# StackOverflow 问答 000719000-000719999

# twitter - 有哪些方法可以让大量数据变得有趣？（即 Twitter、del.icio.us 等 API）

> ID：719004
> 
> 赞同：13
> 
> 时间：2009-04-05T14:29:21.810
> 
> 标签：twitter, statistics, artificial-intelligence, machine-learning

Twitter、谷歌、亚马逊、del.icio.us 等都为您提供大量数据供您使用，全部免费。通过 Project Gutenberg 等计划还可以获得大量文本数据。而这似乎只是冰山一角。

我一直想知道你怎么能用这些数据来取乐。我是 IT 一年级的学生，所以我对统计、机器学习、协同过滤等一无所知。Toby Segaran 的《*编程集体智能*》一书激起了我对这个领域的兴趣，现在我想深入了解一下你可以用数据做什么。我不知道从哪里开始。有任何想法吗？

我也一直在思考是否应该去买像*《人工智能编程范式》这样的*东西。穿越城市值得吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-05T14:43:40.200

尝试通过马尔可夫链生成器从 Guttenberg 编写不同风格的书籍 - Perl 中有一个[可以](http://www.perlmonks.org/?node_id=55851)帮助您入门。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-05T14:51:39.993

可视化，做它们，分享它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-20T18:12:10.437

如果你想从一个简单的 AI 问题开始，你可以尝试聚类。

[http://en.wikipedia.org/wiki/Data_clustering](http://en.wikipedia.org/wiki/Data_clustering)

您可以使用它通过标签或类似的东西将 flickr 图像组合在一起。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-10T20:10:01.097

您可以使用其中的一些数据来赚钱（如果您真的很棒！） [http://www.netflixprize.com/](http://www.netflixprize.com/) Netflix 提供了一个匿名数据集，并且正在寻求更好的算法来预测客户的选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-13T02:55:55.410

如果您熟悉 Python，请尝试使用[nltk](http://www.nltk.org/)。它拥有大量用于文本挖掘甚至机器学习的库。尝试通过[nltk book](http://www.nltk.org/book)工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-05T15:14:43.543

你可以制作像刽子手游戏这样的谜题。或混搭或尝试雅虎管道加入信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-10T20:26:18.313

从数据中预测未来的股市趋势。利润！

# php - Mysql 连接类

> ID：719011
> 
> 赞同：2
> 
> 时间：2009-04-05T14:33:33.533
> 
> 标签：php, mysql, oop, class, connection

我正在编写一些 php 代码，并且我经常访问我的 MySQL 数据库以读取和更新字段。

我当前的代码包括一个名为 dbconnnect 的类，我使用它如下：

```
class edit_data extends dbconnect {
//<some php code>
parent::connect();
//<get info from database>
parent::disconnect();
//<evaluate data> 
```

我的问题 - 这是连接和断开 MySQL 数据库的最有效方式吗？（请记住，我几乎总是连接到同一个数据库，所以不需要每次都重新定义连接参数）。

我正在考虑在构造函数中运行连接，所以我可以写

```
$connector = new dbconnect(); 
```

但我意识到这样做实际上并没有节省多少——对吧？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T04:21:06.803

通过使用

```
$connector = new dbconnect(); 
```

并不是

```
parent::connect(); 
```

您实际上是在将您的 edit_data 类与 dbconnect 类解耦。对你来说意味着什么：

1.  通过使用多个 dbconnect 对象，您的 edit_data 类现在可以拥有多个连接（连接池）
2.  您的 edit_data 类可以（将来）使用 dbconnect 以外的东西，并且不必更改任何其他代码。使用 parent::connect()，如果您更改为扩展另一个类，则必须确保新类将支持现有语义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T14:51:51.197

只需确保在每个文件的开头和结尾自动包含/运行 db 连接/断开连接的代码，而无需为每个文件单独执行此操作。确保此代码存储在 1 个位置并包含在所有其他文件中，以便您可以在需要时轻松更改它。只要你做这些事情，剩下的只是你想如何连接/断开数据库的个人喜好。

我还建议使用[CodeIgniter](http://www.codeigniter.com)等框架来处理每个文件的幕后常见任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T00:44:37.697

除非您知道每次都将连接到数据库，否则我不会将连接部分放在构造函数中。如果你不需要连接，你不应该，它很贵。您的构造函数应该只接受连接参数。虽然看起来您可能正在使用静态类，但构造函数会被执行。

正如 Krzysztof 所说，您应该按需连接。在我的数据库类中，我的所有查询最终都通过“execQuery”函数。该函数检查是否存在与数据库的连接。拥有一个单一的中央查询功能还允许您执行诸如记录会话中运行的所有查询、添加时间、日志记录或您需要做的任何其他事情。

在析构函数中断开连接是正确的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T18:10:11.000

“正确”的方法可能是像 MySQLi 和 PDO 扩展一样 - 在构造函数中打开连接并在析构函数中关闭它。“有效”的方法是检查您的 query() 方法中的连接，并在必要时打开它。

在这两种方法中，您都避免创建单独的 connect() 方法，从而消除了忘记在脚本中调用它的风险。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T01:16:20.867

我们的代码库有很多路径并且大量使用缓存。

我们仅在执行第一个查询时才连接数据库。（实际上是在 ->query() 方法上）。

一旦脚本结束，我们让 PHP 断开连接，并且不显式调用 ->disconnect

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T04:33:50.970

一定要重用你的连接：

查看 new_link 参数：

如果使用相同的参数对 mysql_connect() 进行第二次调用，则不会建立新链接，而是返回已打开链接的链接标识符。new_link 参数修改了这种行为并使 mysql_connect() 始终打开一个新链接，即使之前使用相同的参数调用了 mysql_connect() 也是如此。在 SQL 安全模式下，此参数被忽略。

[http://php.net/function.mysql-connect](http://php.net/function.mysql-connect)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T05:35:27.017

我认为从您的“dbconnect”类派生您的“edit_data”类表明逻辑混乱。您的数据编辑对象是一种特殊类型的数据库连接吗？或者说数据编辑对象需要使用数据库连接可能更有意义？（这就是 IS A 和 HAS A 的区别。）

尽管现在它似乎已经过时了，但您可以使用单例工厂调用来获取数据库处理程序。然后任何需要它的函数都可以简单地调用它。如果您让处理程序在第一次必须执行任何工作时进行自初始化，则无需担心初始化它。（为此，请检查包含句柄的实例变量是否是资源句柄 - 如果不是，请调用初始化程序。请记住决定如果连接失败该怎么办。）然后您只需要一种方法让处理程序找到它的配置. 我会让工厂调用这样做，而不是初始化器。

一种变体方法是让构造函数获取当前数据库处理程序并将对它的引用放入实例变量中。这可以通过多种方式完成。在构造函数中要求它可能会起作用，或者您可以再次使用单例工厂调用。如果数据库处理程序不会初始化（工厂调用可以检查），这种技术使对象构造函数有机会拒绝实例化。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-06T06:28:58.133

*   连接是昂贵的，所以不要为每个查询连接和断开连接。
*   如果可能的话使用mysqli而不是mysql，它通常更快
*   如果您使用的是 mysql 而不是 mysqli，请使用`mysql_pconnect`而不仅仅是`mysql_connect`
*   php 关闭所有打开的数据库连接，因此无需显式这样做
*   无论您是在脚本开始时还是在第一个查询时连接，都可以在查询之间共享连接。

# c# - 具有多个参数的类构造函数

> ID：719013
> 
> 赞同：1
> 
> 时间：2009-04-05T14:34:25.793
> 
> 标签：c#

调用可以有很多相关参数的类构造函数的最佳方法是什么？

例如，如果我想开发一个组件来自动记录应用程序中的异常；让我们称之为'ExceptionLogger'

ExceptionLogger 有 3 种方法来编写引用它的应用程序生成的错误。

```
ToLogFile              (takes 2 parameters)
ToDatabase             (takes 2 parameters)
ToEmail                (take 4 parameters) 
```

这 3 个方法中的每一个都是 ExceptionLogger 私有的，调用应用程序需要通过类构造函数“打开”这些方法；如果需要，还提供参数。

调用应用程序只需使用“发布”方法让 ExceptionLogger 将信息写入相关存储。

添加说明；我的意图是让单个 ExceptionLogger 实例能够进行多次写入

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T14:45:30.273

看起来这可能是一个使用继承的好地方。您可以有一个 FileLogger、DatabaseLogger 和 EmailLogger，它们中的每一个都派生自一个基本的 ExceptionLogger 类，并且有一个适当的构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T14:47:52.327

您可能需要考虑使用[命名构造函数](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.8)范例或层次结构中的三个单独的类。听起来您有三个不同的类，每个类对构造函数都有自己的一组要求。如果实例运行需要构造函数参数中的数据，那么它们必须是构造函数的参数，否则您最终会得到一个缺少数据的实例。

另一种方法是使用[命名参数](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.18)来表示真正的可选参数。我相信 boost 也提供了一个实现命名参数的框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T14:45:35.203

澄清一下，我阅读了您的问题，并假设单个 ExceptionLogger 实例可以通过多种类型的通信进行写入。

对于这个特定的示例，我会将启用三种写入方法所需的参数封装到一个单独的类中。说

*   日志文件构造信息
*   数据库建设信息
*   电子邮件施工信息

然后我会创建 4 个不同的构造函数。上述每种类型都只接受该类型。这允许快速轻松地创建仅以单一方式记录的 ExceptionLogger 实例。它还使调用站点代码非常清楚它正在使用哪种方法。

为了允许多种编写方法，我将定义第四个构造，它具有三个参数，一个用于上述每种类型。对于参数，将允许空值或其他缺少值指示符（例如选项）。这将允许创建写入器的任何组合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T14:46:34.953

使用能够将数据写入日志文件/数据库/电子邮件的单独类，并在构造函数中传递您要使用的类。并使它们都实现相同的接口

例子：

```
LogDatabaseWriter writer = new LogDatabaseWriter(param1, param2, param3);
Logger log = new Logger(writer); 
```

编辑：更多代码

所以你有一个示例界面：

```
interface ILogWriter
{
    public void Write(string s);
} 
```

以及接口的几种实现

```
class LogDatabaseWriter : ILogWriter
{
    //constructor
    // ...

    //implement the required interface methods
    public void Write(string s)
    {
        //Do your thing
    }
} 
```

你的 Logger 类有一个这样的构造函数：

```
class Logger
{
    private ILogWriter _writer;

    public Logger(ILogWriter writer)
    { 
        _writer = writer;
        //Do your thing 
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-05T14:48:08.927

如果不应该扩展存储类型，我建议使用枚举，像这样

```
public enum StorageLocation
{
   None,
   File,
   Database,
   Email      
}

public class ExceptionLogger
{
   private StorageLocation m_Storage;       

   public StorageLocation Storage
   {
      get { return m_Storage; }
      set { m_Storage = value; }
   }

   // ...
} 
```

如果您认为将来需要扩展存储位置，那么我将创建一个接口 IStorageLocation 并使用它来获取/设置 ExceptionLogger 中的 Storage 属性。将付出更多的努力，但您将获得更大的灵活性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-05T15:05:10.150

1.  写几个接受不同论点的ctors。

2.  将 ctor 设为私有或受保护，并添加三个不同命名的静态函数（例如，电子邮件、记录器、数据库），它们采用正确的 args 并将它们传递给 ctor，以及有关构建哪种 EceptionLogger 的信息，然后返回新构造的对象。这是命名构造函数模式。[http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.8](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.8)

3.  为 1，但传入一个虚拟参数以区分否则将具有相同签名的 ctor。一个有用的虚拟对象是在类中定义的标记接口。标记接口是一种类类型，除了通过传递或用作基类来发出信号外，什么都不做。例如

    ```
    公共类 ExceptionLogger {
      私有类 AsEmail {} ;
      公共静态 AsEmail asEmail;
      私有类 AsLogFile {} ;
      公共静态 AsLogFile asLogFile {};
      ExceptionLogger( const AsEmail&, const char* const ) ;
      ExceptionLogger( const AsLogFile&, const char* const ) ;
    ```

4.  与 3 相同，但通过枚举区分 ctor，并在 ctor 内进行分支。（这个很丑。）

5.  通过返回 *this 将设置器添加到“链”类，“命名参数成语”： http: [//www.parashift.com/c++-faq-lite/ctors.html#faq-10.18](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.18)假设您有析取参数，而不是它们的联合，三个对于 ExceptionLogger 可能是一个糟糕的选择。

6.  传入另一个保存参数的类，一个 Traits 类。

7.  将通用逻辑保留在您的类中，将变体逻辑作为 GOF AbstractStrategy 的（单个）GOF ConcreetStrategy 子类传递。类似于 3，但现在逻辑在参数中。

8.  将通用逻辑保留在您的类中，但使其成为三个不同子类的基类，这些子类将各种策略分开，然后在基类中调用通用功能。每个子类都有一个 ctor，但它们可以具有相同的参数，因为 ctor 不是继承的。

9.  将通用逻辑保留在您的类中，但从三个不相关的类委托给它，每个类都通过包含或作为私有基类来保存它。同样，每个人都可以有自己的 ctor。不好，因为您可能希望 ExceptionLoggers 具有相同的（超级）类型。

# .net - dotNet 中是否有 DirectoryInfo.GetFiles / Directory.GetDirectories 的异步版本？

> ID：719020
> 
> 赞同：53
> 
> 时间：2009-04-05T14:40:19.070
> 
> 标签：.net, f#, asynchronous, directoryinfo, async-workflow

dotNet 中是否有 DirectoryInfo.GetFiles / Directory.GetDirectories 的异步版本？我想在 F# 异步块中使用它们，并且有一个可以用 AsyncCallbacks 调用的版本会很好。

问题是我试图吸入一堆目录，可能是通过慢速网络连接安装在 SMB 上，我不希望一堆线程池线程在他们可以做其他工作时等待网络读取。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-05T14:57:00.433

我没有找到 GetFiles 的异步版本，但是如果您查看其他异步操作的源代码，它们的定义如下：

```
module FileExtensions =

        let UnblockViaNewThread f =
            async { //let ctxt = System.Threading.SynchronizationContext.Current
                    do! Async.SwitchToNewThread ()
                    let res = f()
                    do! Async.SwitchToThreadPool ()
                    //do! Async.SwitchTo ctxt
                    return res }

        type System.IO.File with
            static member AsyncOpenText(path)   = UnblockViaNewThread (fun () -> System.IO.File.OpenText(path))
            static member AsyncAppendText(path) = UnblockViaNewThread (fun () -> System.IO.File.AppendText(path))
            static member AsyncOpenRead(path)   = UnblockViaNewThread (fun () -> System.IO.File.OpenRead(path))
            static member AsyncOpenWrite(path)  = UnblockViaNewThread (fun () -> System.IO.File.OpenWrite(path))
            static member AsyncOpen(path,mode,?access,?share) =
                let access = match access with Some v -> v | None -> System.IO.FileAccess.ReadWrite
                let share = match share with Some v -> v | None -> System.IO.FileShare.None
                UnblockViaNewThread (fun () -> System.IO.File.Open(path,mode,access,share))

            static member OpenTextAsync(path)   = System.IO.File.AsyncOpenText(path)
            static member AppendTextAsync(path) = System.IO.File.AsyncAppendText(path)
            static member OpenReadAsync(path)   = System.IO.File.AsyncOpenRead(path)
            static member OpenWriteAsync(path)  = System.IO.File.AsyncOpenWrite(path)
            static member OpenAsync(path,mode,?access,?share) = System.IO.File.AsyncOpen(path, mode, ?access=access, ?share=share) 
```

换句话说，Async 文件、streamreader 和 WebClient 操作只是同步操作的包装器，因此您应该能够编写自己的 GetFiles/GetDirectories 包装器，如下所示：

```
module IOExtensions =
    type System.IO.Directory with
        static member AsyncGetFiles(directory) = async { return System.IO.Directory.GetFiles(directory) }
        static member AsyncGetDirectories(path) = async { return System.IO.Directory.GetDirectories(path) } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-04-05T14:52:28.620

不，我认为没有。池线程方法可能是最实用的。或者，我想你可以下拉到 P/Invoke - 但这将是*更多*的工作。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-06-21T18:07:10.713

这可能被认为是一种 hack，但您可以考虑使用[UWP StorageFolder API](https://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefolder.aspx)。

C# 示例（尽管 F# 可能同样简单）：

```
using Windows.Storage;

...

var folder = await StorageFolder.GetFolderFromPathAsync(path);
var files = await folder.GetFilesAsync();
var folders = await folder.GetFoldersAsync(); 
```

通过使用Lucian Wischik（Microsoft）的[UWP for Desktop](https://github.com/ljw1004/uwp-desktop)库，您可以轻松地从传统的 .NET 桌面和控制台应用程序中使用这些内容。

```
Install-Package UwpDesktop 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-26T14:25:30.617

实际上，根据[for 的帮助`Directory.GetFiles`](http://msdn.microsoft.com/en-us/library/07wt70x2%28v=vs.110%29.aspx)，`Directory.EnumerateFiles`会立即返回第一个结果（它是一个`IEnumerable`），而不是等待整个列表才返回。我相信这可能就是您正在寻找的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-05T18:49:10.937

我已经多次使用这种方法从函数/过程中获取 Async 对象，并且它总是很有效：

```
 let AsyncGetDirectories path = 
    let fn = new Func<_, _>(System.IO.Directory.GetDirectories)
    Async.BuildPrimitive(path, fn.BeginInvoke, fn.EndInvoke) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-05T16:46:49.220

Princess 的回答是在任务之间添加粒度的方法——所以这种事情会让其他玩家使用线程池：

```
let! x = OpenTextAsync("whatever");
// opening for something else to run
let! x = OpenTextAsync("whatever");
// opening for something else to run
let! x = OpenTextAsync("whatever"); 
```

当这些阻塞调用中的每一个都很重时，它并没有多大帮助 - 而 GetFiles over SMB 几乎就是*重*的定义。

`BeginRead`我希望/`EndRead`目录有某种等价物，而`GetFiles`/`GetDirectories`只是对暴露一些异步变体的低级调用的一个很好的包装。像`BeginReadDir`/之类的东西`EndReadDir`。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-01T21:24:33.180

我不是 F# 程序员，但我会在 C# 中执行此操作：

```
static IEnumerable<string> IterateFiles(string path, string pattern) {
    var entryQueue = new Queue<string>();
    entryQueue.Enqueue(path);

    while (entryQueue.Count > 0) {
        var subdirs = Directory.GetDirectories(entryQueue.Peek());
        var files = Directory.GetFiles(entryQueue.Peek(), pattern, SearchOption.TopDirectoryOnly);
        foreach (var file in files)
            yield return file;
        entryQueue.Dequeue();

        foreach(var subdir in subdirs)
            entryQueue.Enqueue(subdir);
    }
} 
```

我假设在 F# 中存在与迭代器类似的构造。

# asp.net-mvc - 如何在asp.net mvc中自我重定向和更改参数？

> ID：719021
> 
> 赞同：2
> 
> 时间：2009-04-05T14:40:28.307
> 
> 标签：asp.net-mvc

如果我的网址看起来像： www.mysite.com/1/home www.mysite.com/1/other-action www.mysite.com/1/another-action/?value=a

如何在使用相同的参数和查询字符串值调用相同的操作时切换 1 参数？

例如，如果我当前正在浏览 www.mysite.com/1/another-action/?value=a 我想获得必要的链接以切换到 www.mysite.com/2/another-action/?value=一个 。. www.mysite.com/x/another-action/?value=a

Url.Action 似乎没有帮助......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T13:45:52.547

大致思路是克隆当前的RouteValueDictionary，改变一个值，然后基于新的RouteValueDictionary构建一个新的动作链接。这是一个例子。但是您可能希望在 URL 帮助程序中执行此操作，而不是直接在视图中：

```
 <% var foo = new RouteValueDictionary();
       foreach (var value in ViewContext.RouteData.Values)
       {
           foo.Add(value.Key, value.Value);
       }
       foo["id"] = 2;
       var newUrl = Url.Action(foo["action"].ToString(), foo); %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-10T20:21:39.770

我会建议对克雷格的回答进行小优化：

`<% var foo = new RouteValueDictionary(ViewContext.RouteData.Values); foo["id"] = 2; var newUrl = Url.Action(foo["action"].ToString(), foo); %>`

# asp.net-mvc - RenderAction RenderPartial

> ID：719027
> 
> 赞同：47
> 
> 时间：2009-04-05T14:43:44.477
> 
> 标签：asp.net-mvc

据我了解，`Html.RenderPartial`ASP.NET MVC 版本`HTML.RenderAction`中`Microsoft.Web.Mvc.ViewExtensions`包含的内容与 MVC Futures 中包含的内容之间存在很大差异。

在我的应用程序中，我有许多由许多“小部件”（某种）组成的页面，每个页面都有自己的特定功能。

在我看来，使用该`RenderAction`方法更合理，因为每个小部件都有一个专用控制器，负责获取不同的数据并渲染一个专用视图（而不是只有一个控制器和一个独特的视图模型传递给`RenderPartial`助手以渲染视图）。

从我所做的测试中，我有一个指向控制器中的 Create 操作方法的表单，例如：

```
 <% using (Html.BeginForm("Create", "Message", FormMethod.Post, 
     new { id = "messageCreateForm" })) {%> 
```

并用

```
 <% Html.RenderPartial("MessageForm",new MessageDTO()); %> 
```

将正确呈现：

```
<form id="messageCreateForm" method="post" action="/Message/Create"> 
```

但是具有相同的等价物`RenderAction`（因此使用`MessageForm`控制器上的操作方法来呈现视图）不会正确呈现：

```
 <% Html.RenderAction<MessageController>(m => m.MessageForm()); %> 
```

将呈现在：

```
<form id="messageCreateForm" method="post" action=""> 
```

请注意，该操作为空。

这是使用`RenderAction`助手的正确方法吗？在这种情况下使用它是否正确？

更新：实际上将部分视图重命名为 _MessageForm 会正确呈现表单。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2009-10-06T13:57:37.640

很老的一个，但它跳进了我的未回答问题列表:)

`RenderAction`和之间有很大区别`RenderPartial`。将在同一个控制器（或共享控制器）上`RenderPartial`渲染 a ，而实际上将执行整个 MVC 循环，即：它将实例化控制器（您提到的任何控制器，而不仅仅是当前控制器），它将执行操作，然后它将返回并呈现结果。*`View`*`RenderAction`

`RenderPartial`更类似于 an `inclusion`，如果您不指定不同的模型，它甚至会共享相同的模型。

它`RenderAction`要复杂得多（并且可能存在不希望的副作用，这就是他们从版本 1 开始没有提供此功能的原因——最初它是作为实验性功能提供的）。

因此，在您的情况下，如果您有小部件，则可以同时使用两者。这取决于小部件的复杂性。如果你有一个必须从数据库中获取数据、做一些复杂的事情等等......那么你可能应该使用`RenderAction`.

我有一个负责新闻对象的新闻控制器。我创建了一个 Block 动作，它将呈现一个带有最新消息的块，并将其放在主页中。在我看来，这是 RenderAction 的完美示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:13:45.430

使用 MVC 需要非常注意不要在自己的脚下开枪。我的意思是 MVC 产品的效率。在复杂的项目中，我更喜欢使用 RenderPartial 而不是 RenderAction。我使用 RenderPartial，其中使用 jQuery.ajax 请求（使用 Html.Action）。它肯定比 RenderAction 更有效。通过这种方式，您可以将您的视图放入缓存中，然后调用 jQuery.ajax。自己试试。[Ayende 在Hibernating Rhinos](http://www.hibernatingrhinos.com/products/nhprof/learn/alert/QueriesFromViews)中清楚地解释了这一点。

# c - GCC 函数属性与缓存

> ID：719032
> 
> 赞同：1
> 
> 时间：2009-04-05T14:46:13.703
> 
> 标签：c, optimization, gcc

我有一个代价高昂的函数被多次调用，并且该参数的可能值集非常有限。
函数返回码仅取决于参数，因此加快速度的明显方法是在函数中为可能的参数和相应的返回码保留一个静态缓存，因此对于参数的每个组合，代价高昂的操作将只执行一次。
我总是在这种情况下使用这种方法，它工作得很好，但我突然想到 GCC 函数属性`const`或者`pure`可能可以帮助我解决这个问题。

有人有这方面的经验吗？GCC 如何使用`pure`和`const`属性 - 仅在编译时或运行时？
我可以依靠 GCC 足够聪明地调用一个函数，声明为

```
int foo(int) __attribute__ ((pure)) 
```

对于相同的参数值只需要一次，或者没有任何保证，我最好坚持使用缓存方法？

**编辑：**我的问题不是关于缓存/记忆/查找表，而是 GCC 函数属性。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-05T14:52:44.720

[我认为您将 GCC 纯属性与memoization](http://en.wikipedia.org/wiki/Memoization)混淆了。

GCC 纯属性允许编译器减少在某些情况下调用函数的次数（例如循环展开）。但是，它不保证它会这样做，只有在它认为合适的情况下。

您似乎正在寻找的是您的功能的记忆。记忆是一种优化，不应该重复对相同输入的计算。相反，应该返回先前的结果。GCC 纯属性不会使函数以这种方式工作。您将不得不手动执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T14:54:23.933

> 我有一个代价高昂的函数被多次调用，并且该参数的可能值集非常有限。

那么为什么不使用静态常量映射（参数'可以散列以生成键，返回码为值）？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T15:24:40.647

这听起来像是可以用模板函数解决的。如果所有已知参数和返回值在编译时都是已知的，那么您也许可以为每个可能的参数生成函数的模板实例。本质上，您将为每个可能的参数调用函数的不同实例。不确定它是否比您已经实现的静态缓存更容易，但可能值得探索。

查看[模板元编程](http://en.wikipedia.org/wiki/Template_metaprogramming)。这些概念类似于 JaredPar 建议的“记忆化”，即使使用相同的阶乘函数的介绍性示例。说这些类型的模板是记忆化的编译时实现可能是合适的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-08-11T17:03:31.420

我不喜欢重新打开旧线程，但这里有一个特别令人反感的评论：

“模板用于处理不同类型，而不是相同类型的不同值”

现在，采用一个简单的模板阶乘实现：

```
template<int n> struct Factorial {
    static const int value = n * Factorial<n-1>::value;
};

template<> struct Factorial<0> {
    static const int value = 1;
}; 
```

这里的模板参数是一个整数，而不是类型名。

# php - Kohana - 你把 AJAX 脚本放在哪里？

> ID：719040
> 
> 赞同：8
> 
> 时间：2009-04-05T14:51:34.817
> 
> 标签：php, ajax, model-view-controller, design-patterns

我正在使用[Kohana](http://kohanaphp.com/)，但这个问题适用于 Rails、CI 或任何其他 MVC Web 开发框架。粘贴服务器端 AJAX 脚本的最佳位置在哪里？

我*计划*创建一个 Ajax_Controller 并为每个单独的脚本使用一个方法/操作。

例如，主页上的登录表单**`index.php/home`**会发送一个 XMLHttpRequest 到**`index.php/ajax/login`**，而编辑配置文件表单**`index.php/profile/edit`**会发送一个 XMLHttpRequest 到**`index.php/ajax/editprofile`**。最佳做法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-05T16:16:46.840

我倾向于将我的 ajax 操作与任何给定模型的非 ajax 操作放在同一个控制器中。

如果可以，我会尝试使用相同的操作，并且只更改输出类型。无论如何，大多数任务都应该有一个非 ajax 版本，所以这往往工作得很好。对于减少逻辑重复非常方便。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-06T03:22:15.150

AJAX 跨越了所有的 MVC 边界。也就是说，它不仅仅进入模型、视图或控制器之一。

*   您的 AJAX 脚本将调用您网站上的脚本 - 因此这将涉及您为此目的创建的**控制器**层的一部分。
*   反过来，该控制器将使用**模型**层提供的接口访问数据库，就像非 AJAX 请求一样。
*   返回给客户端的响应数据可能被打包为 JSON 或 XML 之类的。从技术上讲，这是您的**视图**层的任务，尽管如果您的应用程序对视图层的定义只不过是“一个 HTML 模板系统”，而不是“处理和格式化任何发送回客户端的东西，无论是 HTML 还是其他类似的东西XML”，那么您的 XML 或 JSON 生成可能需要进入它自己的一个新的小部分。

至于发送脚本（Javascript 文件）本身，这可能会由 Web 服务器直接处理，而不是从您的 MVC 框架中处理。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-05T15:51:24.407

您是否为 GET 和 POST 请求制作不同的控制器？我不。在我看来，JS 请求也不应该被区别对待。

我个人认为 JS 请求就像 GET、POST 或任何其他类型的请求。因此，如果我有与用户相关的基于 JS 的操作，我只需在用户控制器中创建它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-05T17:45:42.087

如果您指的是 AJAX (Javascript) 脚本本身，这些应该进入您的 public/js 文件夹。但是，如果您指的是由这些 AJAX 请求调用的操作，则应将它们视为相应控制器的任何其他操作。要完全 RESTful，您应该使用不同的格式（json、xml 等）作为这些操作的返回值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-02-04T16:53:26.780

我是菜鸟，但根据我的理解，用 php mvc 实现 ajax ......思考步骤可能是：

*   将现有 php 视图层的定义/功能从“HTML 模板”更改为“结果格式（XML、JSON 等）-> 来自相关模块的结果，然后由控制器调用以输出到 AJAX 对象，那么这意味着你需要使用格式化方法将视图层写入每个特定的类
*   PHP 模块层保持不变
*   使用 JS 构建一个 Ajax 路由器类，它与您在 PHP 中路由的结构保持相同
*   用 JS 构建一个 ajax 结果处理程序类来处理从 PHP 控制器（XML JSON 等）返回的结果，然后从这里做任何你想要的用户交互，这将被上面的 Ajax 路由器类调用

所以，

```
ajax router (send XMLhttprequest)
-> PHP controllers  C
-> PHP module -> PHP view results M
-> PHP controllers output results V
-> ajax results handle (into page) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-05T15:12:39.397

我不使用 Kohana，但我在我的框架中所做的是 AJAX 脚本是控制器。我尝试将它们视为独立的控制器，但最终它们只是控制器。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-05T16:18:03.157

使用单独的控制器是个好主意。我要么按功能组织我的控制器，然后按返回类型组织动作。

此外，当我使用 Pylons 时，我可以使用 @jsonify 装饰一个动作，它会自动将 python 对象转换为 JSON。非常便利。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-09T19:08:26.637

我喜欢将所有 ajax 请求保存在一个控制器中，通常通过共享模型（非 ajax 控制器也使用该模型）调度它们的请求

主要区别在于通过 ajax 控制器（html 片段、json 数据等）或非 ajax 控制器（整页）产生的视图

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-12-20T10:39:38.350

您可以将其包装为通用 REST-api，并使用 RESTful 约定和 URI。例子：

它可以是对 index.php/api/profile/profilename 的 PUT 请求，而不是 index.php/ajax/editprofile。

# c++ - 在容器中的每个元素上调用成员函数

> ID：719043
> 
> 赞同：10
> 
> 时间：2009-04-05T14:52:24.330
> 
> 标签：c++, stl, boost, coding-style

这个问题是风格问题，因为你总是可以写一个 for 循环或类似的东西；但是，是否存在与写作等价的不那么突兀的 STL 或 BOOST：

```
for (container<type>::iterator iter = cointainer.begin();
     iter != cointainer.end();
     iter++)
 iter->func(); 
```

?

像（想象的）这样的东西：

```
call_for_each(container.begin(), container.end(), &Type::func); 
```

我认为这将是 1) 更少的输入，2) 更易于阅读，3) 如果您决定更改基本类型/容器类型，则更改更少。

编辑：感谢您的帮助，现在，如果我想将一些参数传递给成员函数怎么办？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-04-05T14:56:44.927

```
 #include <algorithm>  // for_each
 #include <functional> // bind

 // ...

 std::for_each(container.begin(), container.end(), 
                   std::bind(&Type::func)); 
```

有关详细信息，请参阅[`std::for_each`](http://en.cppreference.com/w/cpp/algorithm/for_each)和[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)文档。

错过了您的编辑：无论如何，如果需要的话，这是另一种在不使用 Boost 的情况下实现您想要的方法：

```
std::for_each(foo_vector.begin(), foo_vector.end(),
    std::bind(&Foo::func, std::placeholders::_1)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-05T15:03:48.030

您可以使用[std::for_each](http://www.sgi.com/tech/stl/for_each.html)或[boost 的 foreach 结构](http://www.boost.org/doc/libs/1_38_0/doc/html/foreach.html)。

当您不想将逻辑移动到另一个函数中时，请使用 boost 的 BOOST_FOREACH 或 BOOST_REVERSE_FOREACH。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-05T19:10:10.107

我发现 boost bind 似乎很适合这个任务，另外你可以给这个方法传递额外的参数：

```
#include <iostream>
#include <functional>
#include <boost/bind.hpp>
#include <vector>
#include <algorithm>

struct Foo {
    Foo(int value) : value_(value) {
    }

    void func(int value) {
        std::cout << "member = " << value_ << " argument = " << value << std::endl;
    }

private:
    int value_;
};

int main() {
    std::vector<Foo> foo_vector;

    for (int i = 0; i < 5; i++)
        foo_vector.push_back(Foo(i));

    std::for_each(foo_vector.begin(), foo_vector.end(),
        boost::bind(&Foo::func, _1, 1));
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-24T13:41:00.490

由于 C++11 标准，BOOST 方法被标准化为不同的语法，如“基于范围的循环”：

```
class Foo {
    Foo(int x);
    void foo();
}
vector<int> list = {Foo(1),Foo(2),Foo(3)};
for(auto &item: list) item.foo(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-05T15:12:42.067

如果你真的想提高性能而不仅仅是美化你的代码，那么你真正需要的是一个 map 函数。Eric Sink 编写了一个[.net 实现](http://www.ericsink.com/entries/multicore_map.html)

# ruby - ruby中的fixnum和素数

> ID：719049
> 
> 赞同：4
> 
> 时间：2009-04-05T14:55:53.103
> 
> 标签：ruby, math, primes, monkeypatching

在我开始自己写这篇文章之前，有没有人看过以下行为的 ruby​​ 实现？

```
puts 7.nextprime();     #=>  11
puts 7.previousprime(); #=>  5
puts 7.isprime();       #=> true 
```

显然，这种事情对于大数来说是丑陋的，但对于从不超过几千的整数（对我来说是常见的例子），一个明智的实现是可行的，因此是个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-05T15:12:04.423

Ruby 带有一个内置`Prime`类，允许您从 1 开始遍历素数，但我看不到用 1 以外的起始值初始化它，也没有谓词检查来确定数字是否为素数。我会说去吧，尽管您应该记住，Ruby 中的数学运算可能很慢，如果性能是一个因素，您最好考虑将其编写为 C 或 Java 扩展。这是一个[如何使用 RubyInline 在 C 中生成素数](http://on-ruby.blogspot.com/2006/07/rubyinline-making-making-things-faster.html)的示例。

另外，我建议你避免使用方法名`7.isprime`——Ruby 中的约定是`7.prime?`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-05T17:42:50.520

看看在[这里](http://snippets.dzone.com/posts/show/5380)找到的片段。他们可以给你一个先机。

# matrix - 您如何简单地描述 DSM？

> ID：719051
> 
> 赞同：2
> 
> 时间：2009-04-05T14:56:17.783
> 
> 标签：matrix, structure, dependencies

您如何简单地描述 DSM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-09-01T13:49:07.193

简单来说，DSM 是一种不同于*方框和箭头图*的视觉方式来表示图形。有趣的是，虽然*方框和箭头图*擅长显示具有几十个节点且连接不多的小图（稀疏图），但 DSM在显示较大图方面优于*方框和箭头图。*为此，我们说**DSM 可扩展**。缺点是 DSM 不像*方框和箭头图*那样直观，并且带有学习曲线。

与*方框图和箭头图相比*，DSM 尤其擅长使结构模式变得明显。具体来说，在这篇博客文章[《识别代码结构模式概览》](http://codebetter.com/blogs/patricksmacchia/archive/2009/08/24/identify-code-structure-patterns-at-a-glance.aspx)中，解释了如何使用依赖结构矩阵来识别代码结构模式。屏幕截图是使用工具 NDepend的[依赖结构矩阵完成的。](http://www.ndepend.com/Features.aspx#DependenciesView)这里有一些模式：

分层代码（没有循环的代码，肯定是 DSM 可以一目了然的最酷的东西）
![替代文字](https://i.stack.imgur.com/MlnfA.jpg)

具有依赖循环的代码
![替代文字](https://i.stack.imgur.com/4t3YX.jpg)

高内聚/低耦合
![替代文字](https://i.stack.imgur.com/cKEtp.jpg)

饥饿的来电者
![替代文字](https://i.stack.imgur.com/Xm0f0.jpg)

热门被叫方
![替代文字](https://i.stack.imgur.com/ukn0p.jpg)

相互耦合
![替代文字](https://i.stack.imgur.com/UdJ1g.jpg)

数据对象
![替代文字](https://i.stack.imgur.com/tDjBy.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T15:34:35.257

DSM 背后的基本思想是它以表格形式表示“依赖”或“使用”关系。Parnas 定义了 A 和 B 之间的“使用”关系，因此当 B“使用”A 时，这意味着 B 依赖于 A 的正确操作来实现自己的正确操作。

使用关系在实际系统中形成一个图。DSM 是该图的矩阵表示，即所谓的“[关联矩阵](http://en.wikipedia.org/wiki/Incidence_matrix)”，如果组件之间存在使用关系，则标记每个单元格。因此，如果DSM *D*中有*n 个*组件，则*D* *[i,j]* = 1 *iff* *j* “使用” *i*。

 ***# java - 如何获得下一个枢纽

> ID：719052
> 
> 赞同：0
> 
> 时间：2009-04-05T14:56:34.693
> 
> 标签：java, sockets

我想编写一个 Java 程序，如果我提供目标 IP 地址，我将获得下一个集线器的信息以到达该 IP。

那么我该如何实现呢？

谢谢

八皮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T16:01:35.163

我认为您的意思是下一跳而不是“集线器”。

对于主机，可以从主机的路由表中检查下一个主机，使用 traceroute 可以将其实现为以下 stackoverflow 线程：

[如何在 Java 中确定我的路由器/网关的 IP？](https://stackoverflow.com/questions/11930/how-can-i-determine-the-ip-of-my-router-gateway-in-java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T15:05:24.890

Java程序？？？你有`tracert`...

此外，您应该解释“集线器”的确切含义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T15:41:31.903

IP 网络中拓扑检测最常用的方法是将数据包（例如`ICPM ECHO REQUEST`）发送到具有非常小的[TTL](http://en.wikipedia.org/wiki/Time_to_live#Time_to_live_of_IP_packets)值的目标地址。通常，您使用给定 DLL 到达的最后一个有效节点随后会以 ICMP 错误消息进行响应，告诉您该数据包由于其生命周期结束而丢失，从而揭示所述设备的 IP 地址。

[This question's](https://stackoverflow.com/questions/286972/java-control-ip-ttl) answer表明Java Socket API只能在多播套接字上设置TTL。[要解决这个问题，您可以尝试使用原始 IP 套接字，使用RockSaw](http://www.savarese.org/software/rocksaw/index.html)等第三方库，因为 JDK 中没有原始 IP 支持（ 2002[年 SUN 跟踪器上的错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4727550)（！）要求它关闭“赢了'不修复“）。

# linux - 当我们可以编写自己的 makefile 时，为什么还要使用像 Autotools 这样的构建工具？

> ID：719057
> 
> 赞同：61
> 
> 时间：2009-04-05T14:57:24.380
> 
> 标签：linux, gnu-make, autotools

最近，我将我的开发环境从 Windows 切换到了 Linux。到目前为止，我只使用 Visual Studio 进行 C++ 开发，所以很多概念，比如[make](http://en.wikipedia.org/wiki/Make_%28software%29)和[Autotools](http://en.wikipedia.org/wiki/GNU_build_system)对我来说都是新的。我已经阅读了 GNU makefile 文档并且对它有了几乎一个想法。但我对 Autotools 有点困惑。

据我所知，makefile 用于简化构建过程。

1.  为什么我们需要像*Autotools*这样的工具来创建 makefile？由于所有人都知道如何创建生成文件，因此我没有真正使用 Autotools。
2.  标准是什么？我们需要使用这样的工具还是只需要手写的 makefile 就可以了？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2009-04-05T15:12:30.320

您在这里谈论的是两个独立但相互交织的事情：

*   自动工具
*   GNU 编码标准

在 Autotools 中，您有几个项目：

*   自动配置
*   汽车制造
*   工具

让我们分别看看每一个。

**自动配置**

Autoconf 可以轻松扫描现有树以查找其依赖项并创建一个几乎可以在任何类型的 shell 下运行的配置脚本。配置脚本允许用户控制构建行为（即`--with-foo`、`--without-foo`、`--prefix`等`--sysconfdir`）以及进行检查以确保系统可以编译程序。

Configure 生成一个`config.h`文件（从模板），程序可以包含该文件以解决可移植性问题。例如，如果`HAVE_LIBPTHREAD`未定义，请改用 forks。

我个人在许多项目中使用 Autoconf。人们通常需要一些时间来习惯[m4](http://en.wikipedia.org/wiki/M4_%28computer_language%29#Free_software_implementations)。但是，它确实节省了时间。

您可以让 makefile 继承一些配置查找的值，而无需使用 automake。

**汽车制造**

通过提供一个简短的模板来描述将构建哪些程序以及需要链接哪些对象来构建它们，可以自动创建符合 GNU 编码标准的 Makefile。这包括依赖处理和所有必需的 GNU 目标。

有些人觉得这更容易。我更喜欢编写自己的 makefile。

**工具**

Libtool 是一个非常酷的工具，用于简化任何类 Unix 系统上共享库的构建和安装。有时我会使用它；其他时候（尤其是在构建静态链接对象时）我手动完成。

还有其他选项，请参阅 StackOverflow 问题*[Autoconf 和 A​​utotools 的替代方案？](https://stackoverflow.com/questions/600274/alternatives-to-autoconf-autotools)*.

**构建自动化和 GNU 编码标准**

简而言之，如果您将代码发布给大众，您真的应该使用*某种可移植的构建配置系统。*你使用什么取决于你。众所周知，GNU 软件几乎可以在任何东西上构建和运行。但是，您可能不需要遵守这样的（有时是极其迂腐的）标准。

如果有的话，如果您正在为 POSIX 系统编写软件，我建议您尝试一下 Autoconf。仅仅因为 Autotools 生成了与 GNU 标准兼容的构建环境的一部分，并不意味着您必须遵循这些标准（很多人不需要！）:) 还有很多其他选择。

**编辑**

不要害怕 m4 :) 总是有[Autoconf 宏存档](http://autoconf-archive.cryp.to/)。大量示例，或检查。自己编写或使用经过测试的内容。Autoconf 经常与[Automake](http://en.wikipedia.org/wiki/Automake)混淆。它们是两个不同的东西。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2009-04-05T16:05:15.217

首先，正如 tinkertim 已经指出的那样，Autotools 不是一个不透明的构建系统，而是一个松散耦合的工具链。让我添加一些关于 Autoconf 和 A​​utomake 的想法：

**Autoconf**是一个配置系统，它根据应该适用于各种平台的功能检查来创建配置脚本。在其存在的 15 年中，大量系统知识已进入其[m4宏数据库。](http://en.wikipedia.org/wiki/M4_%28computer_language%29)一方面，我认为后者是 Autotools 尚未被其他东西取代的主要原因。另一方面，当目标平台更加异构并且必须支持 Linux、[AIX](http://en.wikipedia.org/wiki/IBM_AIX)、[HP-UX](http://en.wikipedia.org/wiki/HP-UX)、[SunOS](http://en.wikipedia.org/wiki/SunOS)等以及各种不同的处理器架构时，Autoconf 曾经更为重要。如果您只想支持最新的 Linux 发行版和与 Intel 兼容的处理器，我真的不明白它的意义。

**Automake**是 GNU Make 的一个抽象层，并充当来自更简单模板的 Makefile 生成器。许多项目最终摆脱了 Automake 抽象并恢复为手动编写 Makefile，因为您失去了对 Makefile 的控制，并且您可能不需要所有混淆 Makefile 的罐头构建目标。

现在到**替代品**（我强烈建议根据您的要求替代 Autotools）：

**[CMake](http://www.cmake.org/)**最显着的成就是在[KDE](http://en.wikipedia.org/wiki/KDE)中取代了 AutoTools 。如果您想在没有 m4 特性的情况下拥有类似 Autoconf 的功能，这可能是您可以获得的最接近的功能。它带来了 Windows 支持，并已被证明适用于大型项目。我对 CMake 的不满在于它仍然是一个 Makefile 生成器（至少在 Linux 上），存在所有内在问题（例如 Makefile 调试、时间戳签名、隐式依赖顺序）。

**[SCons](http://www.scons.org)**是用 Python 编写的 Make 替代品。它使用 Python 脚本作为构建控制文件，允许使用非常复杂的技术。不幸的是，它的配置系统无法与 Autoconf 相提并论。当适应特定需求比遵循约定更重要时，SCons 通常用于内部开发。

如果您真的想坚持使用 Autotools，我强烈建议您阅读*[Recursive Make Considered Harmful](http://aegis.sourceforge.net/auug97.pdf)*并编写您自己的通过 Autoconf 配置的 GNU Makefile。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2011-09-20T07:49:51.973

这里已经提供的答案很好，但如果你有任何类似于标准 C/C++ 项目的东西，我强烈建议不要接受编写自己的 makefile 的建议。我们需要 autotools 而不是手写的 makefile，因为由 automake 生成的符合标准的 makefile 以众所周知的名称提供了许多有用的目标，而手动提供所有这些目标既乏味又容易出错。

首先，手工编写 Makefile 一开始似乎是一个好主意，但大多数人不会费心编写比所有规则更多的东西，安装和清理。automake 生成 dist、distcheck、clean、distclean、uninstall 和所有这些小帮手。这些额外的目标对于最终将安装您的软件的系统管理员来说是一个巨大的福音。

其次，以可移植和灵活的方式提供所有这些目标非常容易出错。我最近对 ​​Windows 目标进行了很多交叉编译，并且自动工具的性能非常好。与大多数手写文件相比，这些文件编译起来很麻烦。请注意，*可以*手动创建一个好的 Makefile。但是不要高估自己，它需要大量不同系统的经验和知识，而 automake 开箱即用地为您创建了出色的 Makefile。

编辑：**不要试图使用“替代品”**。CMake 和朋友对部署者来说是一种恐惧，因为它们与配置和朋友的界面不兼容。每个能干一半的系统管理员或开发人员都可以做一些很棒的事情，比如交叉编译或简单的事情，比如在他的脑海中设置一个前缀，或者使用一个简单的 --help 和一个配置脚本。但是当你不得不用 BJam 做这些事情时，你该死的花上一三个小时。不要误会我的意思，BJam 可能是一个很棒的底层系统，但使用起来很痛苦，因为几乎没有项目使用它，而且文档很少且不完整。autoconf 和 automake 在已建立的知识方面有着巨大的领先优势。

所以，即使我对这个问题的建议有点晚了：帮自己一个忙，**使用 autotools 和 automake。语法可能有点奇怪，但它们比 99% 的开发人员自己做的要好得多。**

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-04-05T15:08:06.803

对于小型项目，甚至对于仅在一个平台上运行的大型项目，手写的 makefile 都是可行的方法。

当您为需要不同选项的不同平台进行编译时，autotools 真正闪耀的地方。Autotools 往往是典型背后的大脑

。/配置

制作

进行安装

Linux 库和应用程序的编译和安装步骤。

也就是说，我发现自动工具很痛苦，我一直在寻找更好的系统。最近我一直在使用 bjam，但这也有它的缺点。祝你好运找到适合你的东西。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-04-05T15:04:21.430

需要 Autotools 是因为 Makefile 不能保证在不同平台上都一样工作。如果您手写一个 Makefile，并且它可以在您的机器上运行，那么它很可能不会在我的机器上运行。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-04-05T15:02:54.273

您知道您的用户将使用什么 unix 吗？甚至是哪个 Linux 发行版？你知道他们想在哪里安装软件吗？你知道他们有什么工具，他们想在什么架构上编译，他们有多少 CPU，有多少 RAM 和磁盘可供他们使用？

*nix 世界是一个跨平台的环境，您的构建和安装工具需要处理它。

* * *

请注意，auto* 工具可以追溯到更早的时代，并且有很多关于它们的有效抱怨，但是用更现代的替代品取代它们的几个项目在发展很多动力方面遇到了麻烦。

在 *nix 世界中很多事情都是这样的。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-01-12T16:58:44.477

Autotools 是一场灾难。

生成的`./configure`脚本会检查过去 20 年左右没有出现在任何 Unix 系统上的功能。为此，它会花费大量时间。

跑步`./configure`需要很长时间。尽管现代服务器 CPU 甚至可以有几十个内核，并且每台服务器可能有多个这样的 CPU，但`./configure`它是单线程的。我们仍然有足够的摩尔定律剩余时间，CPU 内核的数量将随着时间的推移而增加。因此，所花费的时间`./configure`将大致保持不变，而由于摩尔定律，并行构建时间每 2 年减少 2 倍。或者实际上，我会说`./configure`由于利用改进的硬件而增加的软件复杂性，所花费的时间甚至可能会增加。

仅将一个文件添加到您的项目中就需要您运行`automake`，这将需要很长时间，`autoconf`然后`./configure`您可能会发现由于一些重要文件已更改，所有内容都将重新编译。所以只添加一个文件，然后`make -j${CPUCOUNT}`重新编译所有内容。

而关于`make -j${CPUCOUNT}`. 生成的构建系统是一个递归的。[递归 make 长期以来一直被认为是有害的](http://aegis.sourceforge.net/auug97.pdf)。

那么当你安装已经编译好的软件时，你会发现它不起作用。（想要证明吗？从 Github 克隆[protobuf](https://github.com/google/protobuf)存储库，检查 commit `9f80df026933901883da1d556b38292e14836612`，将其安装到 Debian 或 Ubuntu 系统，嘿，presto：`protoc: error while loading shared libraries: libprotoc.so.15: cannot open shared object file: No such file or directory`——因为它在`/usr/local/lib`而不是`/usr/lib`；解决方法是`export LD_RUN_PATH=/usr/local/lib`在输入之前做`make`）。

理论上，通过使用 autotools，您可以创建一个可以在 Linux、FreeBSD、NetBSD、OpenBSD、DragonflyBSD 和其他操作系统上编译的软件包。事实？每个从源代码构建软件包的非 Linux 系统在其存储库中都有许多补丁文件来解决 autotools 错误。看看例如 FreeBSD `/usr/ports`：它充满了补丁。因此，在每个项目的基础上为非 autotools 构建系统创建一个小补丁比在每个项目的基础上为 autotools 构建系统创建一个小补丁一样容易。或者甚至更容易，因为标准`make`比自动工具更容易使用。

事实是，如果您根据标准创建自己的构建系统`make`（并使其具有包容性而不是递归，遵循“递归使被认为有害”论文的建议），事情会以更好的方式工作。此外，如果您的项目是 10-100 个 C 语言文件的非常小的项目，并且每个 CPU 和多个 CPU 有几十个内核，那么您的构建时间可能会减少一个数量级，甚至可能减少两个数量级。将自定义自动代码生成工具与基于标准的自定义构建系统连接起来也更容易，`make`而不是处理`m4`一堆乱七八糟的自动工具。使用标准`make`，您至少可以在`Makefile`.

所以，回答你的问题：为什么要使用自动工具？答：没有理由这样做。自从商业 Unix 过时以来，Autotools 就已经过时了。多核 CPU 的出现使自动工具更加过时。为什么程序员还没有意识到这一点，这是一个谜。我很乐意`make`在我的构建系统上使用标准，谢谢。是的，为 C 语言头文件包含生成依赖文件需要一些工作量，但是由于不必与 autotools 斗争而节省了工作量。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-02T17:48:41.917

我不觉得我是回答这个问题的专家，但还是用我的经验给你一个类比。

因为在某种程度上，这类似于为什么我们应该用 C 语言（高级语言）编写嵌入式代码而不是用汇编语言编写。两者都解决了相同的目的，但后者更冗长、乏味、耗时且更容易出错（除非您非常了解处理器的 ISA）。Automake 工具和编写自己的 makefile 也是如此。编写 Makefile.am 和 configure.ac 比编写单个项目 Makefile 非常简单。

# compiler-construction - 实时范围与达到定义

> ID：719058
> 
> 赞同：5
> 
> 时间：2009-04-05T14:57:37.500
> 
> 标签：compiler-construction, range, analysis, definition

在编译器数据流分析中，变量的有效范围和达到定义之间有什么区别？两者似乎指的是同一件事......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-04-06T19:41:47.780

到达定义是针对程序中的特定位置定义的。例如，在第 10 行，使用代码“a = b + c”，编译器可以知道“c”的到达定义是什么，或者换句话说，回答“变量 c 在什么语句中获得 a可以达到第 10 行的值？”。

生存范围是相对于变量定义的。变量 c 的有效范围从变量 c 的定义开始，一直到变量的下一个定义（如果您使用的是 SSA，变量在该位置被杀死，或者定义为不同的变量），或者变量 c 存在的范围（块、函数或程序）。

这两个概念相似，但它们不是一回事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-07T16:53:17.033

它们是非常不同的东西，我建议你回去重新阅读任何让你感到困惑的定义。使用给定变量的点的变量的到达定义必须是该变量的定义。变量的生命周期是程序中可以使用它的部分，包括定义以外的东西，例如读取它。

例如，参见 1986 年的《龙之书》，第 534 页（可能过于笼统而无济于事）和第 610 页。

# c# - 将 GAC 引用添加到 VS2008 项目时出现问题

> ID：719061
> 
> 赞同：1
> 
> 时间：2009-04-05T14:58:47.963
> 
> 标签：c#, visual-studio-2008, windows-vista, gac, system.messaging

好的，所以这不是严格意义上的编程问题，而是与编程相关的问题。

我有一个 C# winforms 项目，我正在尝试添加对 System.Messaging dll 的引用。

但是，当我添加引用时（从“添加引用”对话框的 .net 选项卡），它会显示黄色感叹号警告。

右键单击其他引用将允许我在对象浏览器中查看它们。右键单击 System.Messaging 引用不会。

不过，这里是踢球者......如果我单击另一个引用并滚动浏览对象浏览器中的列表，我可以看到 System.Messaging 条目。

到目前为止，我尝试了多种方法来解决此问题，包括使用 gacutil 在 GAC 中强制重新安装 dll，但它仍然无法正常工作。

有没有人对如何解决这个问题有任何建议？如果我需要提供更多信息，请在评论中留下具体的信息请求。

笔记。操作系统是Vista。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T17:33:37.687

经过一些创造性的谷歌搜索后，我设法找到了解决方案。

在项目设置上，有一个标记为“仅客户端框架子集”的复选框。

取消选中该复选框就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T15:24:51.320

我遇到了类似的问题，但在我的 asp.net 项目中（以及不同的 GAC 程序集——虽然记不起名字）。我通过插入添加程序集标记明确告诉我的应用程序要在我的 web.config 中使用的确切版本来修复它

例如：

```
<add assembly="System.Messaging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" /> 
```

有没有办法可以用你的 windows 窗体 app.config 文件来试试这个（我没有用 winforms 工作太多所以不确定）

# iis - 基于 IIS 令牌的安全性、ssl 证书和 https、代理

> ID：719064
> 
> 赞同：0
> 
> 时间：2009-04-05T14:59:46.107
> 
> 标签：iis, ssl, proxy, https, token

我开发了一个新的网络服务。现在，我需要处理安全问题，因为我们打算使其成为一项安全服务。

为了设置 SSL 和 https，我需要获取并安装 SSL 证书。谁是证书颁发机构？

你知道该怎么做吗？

有没有这方面的简明文章？

问候。

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-05T15:06:00.600

您可以选择在哪里购买 SSL 证书。例如[威瑞信](http://www.verisign.com)。

它们[提供了](https://knowledge.verisign.com/support/ssl-certificates-support/index?page=content&id=AR212&actp=LIST)有关如何在 IIS 网络服务器上安装 SSL 证书的信息。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T15:10:19.200

嘿，我建议您从免费开发证书开始（您可以自己创建）

完成所有开发和调试后，您可以联系威瑞信或其他 ca 以获得真正的

创建一个免费的开发证书进行测试非常容易。[我在这里](http://codeforeternity.com/blogs/technology/archive/2008/02/15/creating-self-signed-ssl-certificates-on-iis-6-0-and-windows-server-2003.aspx)写过博客

# c# - 布尔表达式的速度（C#）

> ID：719071
> 
> 赞同：2
> 
> 时间：2009-04-05T15:04:22.040
> 
> 标签：c#, performance, boolean, conditional-statements

您好，我正在考虑写什么更好（在速度和/或效率方面）：

```
bool Method(...) { ... }

...

bool result = Method(...);

if (result == false)
{ ... }
// or

if (!result)
{ ... } 
```

或者，另一种...

```
if (result == true) 
// or

if (result) 
```

我问是因为我使用第一个 ( `result == false`) 但有时它会变得很长，尤其是在`condition ? expr : expr`语句中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-05T15:08:43.837

就个人而言，每当我看到类似`result == false`. 在我看来，这是对相等运算符的相当讨厌的误用，而且完全没有必要。虽然我认为编译器应该将两个表达式转换为相同的字节码，但您肯定希望使用`!result`. 确实，它不仅是更直接和合乎逻辑的表达方式，而且正如您所提到的，它使代码更短且更具可读性。我认为绝大多数 C# 程序员都会同意我的观点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-05T15:11:30.697

运行时速度是相同的 - 两个片段都编译为相同的 MSIL 代码表示。

使用`(result == false)`而不是`(!result)`感觉有点草率。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-05T15:24:36.263

运行时代码没有性能差异。我工作的公司中的大多数编码指南都更喜欢 !result。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-05T15:08:21.437

我不认为有任何区别，如果有的话，你可能很难测量它。任何差异都可能存在于测量的噪声中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-05T15:27:38.083

您绝对应该将表达式与 ! 运算符，不是因为它更快，而是因为它更安全。

如果您不小心使用了一个等号而不是两个等号，则将值分配给变量而不是比较值：

```
if (result = false) { 
```

对于其他数据类型，编译器可以捕捉到这一点，因为表达式 like`(id = 42)`具有整数值，因此不能在 if 语句中使用，但表达式 like`(result = false)`具有布尔值，因此编译器必须接受它。

（一个古老的 C 技巧是把文字放在第一位，这样它就不会是一个赋值，但它的可读性较差，所以 ! 运算符是一个更好的选择。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-05T15:32:42.533

尽管我同意`if(!result)`首选@Noldorin，但我发现`if(result == false)`如果您必须测试可空的布尔值（这在数据访问场景中最常发生），它及其同类非常有用。

**编辑：**这是一个示例程序，它解释了在可为空的布尔值上使用相等运算符的不同方式。

```
class Program
{
  static void Main(string[] args)
  {
    TestNullBool(true);
    TestNullBool(false);
    TestNullBool(null);
    Console.ReadKey();
  }

  private static void TestNullBool(bool? result)
  {
    if (result == null)
    {
      Console.WriteLine("Result is null");
    }
    if (result == false)
    {
      Console.WriteLine("Result is false");
    }
    if (result == true)
    {
      Console.WriteLine("Result is true");
    }
  }
}
/* Output:
Result is true
Result is false
Result is null
*/ 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-05T15:33:16.523

我认为这个过程分为三个步骤。首先，你认为 if 中应该总是有比较，所以你写 if(this.isMonkey == true)banana.eat();

或者，更现实地

```
if(SpeciesSupervisor.getInstance().findsSimilarTo(Monkey.class, 2) == true) {
    String f = new PropertyBundle("bananarepo").getField("banana store");
    EntitiyManager.find(Banana.class,f).getBananas().get(1).eat();
} 
```

然后，您了解到询问 if(this.isMonkey) 是很好的，并且这种格式可以更好地阅读本示例中的句子（“如果这是一只猴子”）。

但最后，你变老了，你知道 if(b) 不是很可读，if(b==true) 给你可怜的大脑一些线索这里发生了什么，以及所有这些“滥用”的严厉主张、“虐”、yada yada，都有些言过其实了。

至于表现。在 Java 中，它不会产生任何影响。我认为.NET 并没有那么糟糕。这是编译器可以做的最简单的优化，我敢打赌，性能是一样的。

干杯，

尼可

# eclipse - 如何在 Eclipse 中安装 javax 和 apache 插件？

> ID：719084
> 
> 赞同：2
> 
> 时间：2009-04-05T15:11:02.193
> 
> 标签：eclipse, apache, plugins

我是 java 新手，并试图在 eclipse 3.4.2 中重建一个需要 javax（InternetAddress、Session 和其他类）和 org.apache.xpath.* 的旧包（我不知道为什么）。我正在寻找更新网站，但谷歌报告了数十亿页。将不胜感激有关如何/在哪里找到 eclipse 插件而不生病的解释，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T15:28:02.870

根据您的描述，您不需要插件，只需将所需的库添加到构建路径即可。您不会在更新站点中找到它们。

这是您需要做的：

1.  找到并下载所需的 JAR。您可以使用[FindJar.com 之](http://findjar.com/)类的服务来搜索这些 JAR。Apache JAR 通常可从 apache.org 获得。
2.  将 JAR 放在项目中名为 lib 的文件夹中。
3.  在 Eclipse 中刷新项目（F5 或右键单击并“刷新”），带有 JAR 的 lib 文件夹应该出现在项目资源管理器中。
4.  将它们添加到构建路径 - 在 Eclipse 项目资源管理器中，右键单击 JAR 并选择“添加到构建路径”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-01T15:44:18.353

右键单击项目 ---> 属性 ---> Java 构建路径 ---> 添加库... ---> 服务器运行时 ---> Apache Tomcat ----> 完成。

# chronic - python的慢性（Ruby NLP日期/时间解析器）？

> ID：719088
> 
> 赞同：4
> 
> 时间：2009-04-05T15:12:39.163
> 
> 标签：chronic

有谁知道像chronic这样的库，但对于python？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-05T16:09:01.727

你试过[parsedatetime](http://code.google.com/p/parsedatetime/)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-09T22:15:59.633

你可以试试斯坦福 NLP 的 SUTime。相关的 Python 绑定在这里：[https ://github.com/FraBle/python-sutime](https://github.com/FraBle/python-sutime)

确保安装了所有 Java 依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T21:30:31.030

我正在和[慢性病](https://github.com/hpoydar/chronic_duration/issues/31#issuecomment-42078264)的斯蒂芬·拉塞特交谈。在他建议标记化之后，我想出了一个 Python 示例。

这是 Python 示例。您将输出运行为慢性。

```
import nltk
import MySQLdb
import time
import string
import re

#tokenize
sentence = 'Available June 9 -- August first week'
tokens = nltk.word_tokenize(sentence)

parts_of_speech = nltk.pos_tag(tokens)
print parts_of_speech

#allow white list
white_list = ['first']

#allow only prepositions
#NNP, CD
approved_prepositions = ['NNP', 'CD']
filtered = []
for word in parts_of_speech:

    if any(x in word[1] for x in approved_prepositions):
        filtered.append(word[0])
    elif any(x in word[0] for x in white_list):
        #if word in white list, append it
        filtered.append(word[0])

print filtered

#normalize to alphanumeric only
normalized = re.sub(r'\s\W+', ' ', ' '.join(filtered))
print filtered 
```

# unix - 如何将文件夹移动到更低的文件夹级别？

> ID：719094
> 
> 赞同：-1
> 
> 时间：2009-04-05T15:14:40.720
> 
> 标签：unix, command-line-interface

我在 /cs/.../topology/mathematics/Math 有一个文件夹 Math。

我在数学文件夹中尝试了以下失败。

```
mv Math/ .. 
```

**如何在终端中将文件夹 Math 移动到 /cs/.../topology/？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T15:17:55.827

`mv Math/ ../`虽然`mv Math/ ..`也适用于 Uni 的一个 Linux 系统。

# c# - wpf 页面内对话框

> ID：719098
> 
> 赞同：1
> 
> 时间：2009-04-05T15:17:18.403
> 
> 标签：c#, .net, wpf, xaml

当我在网页上工作时，我经常使用这些。前几天在为 WPF 项目构建页面时，我最终构建了一个页面，看起来它上面有一个页面内对话框，但它是页面上唯一的东西。

我的问题是。是否有人创建了这样的组件，可以轻松创建这些类型的对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-02-10T21:10:21.300

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.ComponentModel;

namespace xxx.Wpf
{
    /// <summary>
    /// Interaction logic for InPageDialog.xaml
    /// </summary>
    public partial class InPageDialog : UserControl, INotifyPropertyChanged 
    {
        public InPageDialog()
        {
            InitializeComponent();
        }
        public void Show(IDialog ucContent)
        {                        
        }

        void ucContent_OnClose(object obj)
        {

        }
        protected virtual void Changed(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }

        public static readonly DependencyProperty ContentBackgroundProperty = DependencyProperty.Register("ContentBackground", typeof(Brush), typeof(InPageDialog), new UIPropertyMetadata(Brushes.White));
        public Brush ContentBackground 
        {
            get { return (Brush)GetValue(ContentBackgroundProperty); }
            set { SetValue(ContentBackgroundProperty, value); }
        }

        public static readonly DependencyProperty ContentBorderBrushProperty = DependencyProperty.Register("ContentBorderBrush", typeof(Brush), typeof(InPageDialog), new UIPropertyMetadata(Brushes.White));
        public Brush ContentBorderBrush 
        {
            get { return (Brush)GetValue(ContentBorderBrushProperty); }
            set { SetValue(ContentBorderBrushProperty, value); }
        }

        public static readonly DependencyProperty ContentActiveBackgroundProperty = DependencyProperty.Register("ContentActiveBackground", typeof(Brush), typeof(InPageDialog), new UIPropertyMetadata(Brushes.White));
        public Brush ContentActiveBackground 
        {
            get { return (Brush)GetValue(ContentActiveBackgroundProperty); }
            set { SetValue(ContentActiveBackgroundProperty, value); }
        }

        public static readonly DependencyProperty ContentBorderThicknessProperty = DependencyProperty.Register("ContentBorderThickness", typeof(Thickness), typeof(InPageDialog));
        public Thickness ContentBorderThickness 
        {
            get { return (Thickness)GetValue(ContentBorderThicknessProperty); }
            set { SetValue(ContentBorderThicknessProperty, value); }
        }

        public static readonly DependencyProperty ContentBlurRadiusProperty = DependencyProperty.Register("ContentBlurRadius", typeof(double), typeof(InPageDialog));
        public double ContentBlurRadius 
        {
            get { return (double)GetValue(ContentBlurRadiusProperty); }
            set { SetValue(ContentBlurRadiusProperty, value); }
        }

        public event PropertyChangedEventHandler PropertyChanged;
    }

    public interface IDialog
    {
        event Action<object> OnClose;
    }
}

    <UserControl x:Class="xxx.Wpf.InPageDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:me="clr-namespace:xxx.Wpf"
    Visibility="Collapsed" DataContext="{Binding}">
    <UserControl.Resources>
        <Style TargetType="{x:Type Button}">
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Width" Value="60"/>
        </Style>
    </UserControl.Resources>
    <UserControl.Template>
        <ControlTemplate TargetType="{x:Type me:InPageDialog}">
        <Grid HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" DataContext="{TemplateBinding DataContext}">
            <Rectangle HorizontalAlignment="Stretch" 
                       VerticalAlignment="Stretch" 
                       Opacity="0.765" 
                       Fill="{TemplateBinding ContentBackground}" />

            <Border VerticalAlignment="Center" 
                    HorizontalAlignment="Center" 
                    CornerRadius="5" 
                    BorderBrush="{TemplateBinding ContentBorderBrush}" 
                    BorderThickness="{TemplateBinding ContentBorderThickness}" 
                    Background="{TemplateBinding ContentActiveBackground}" >
                <ContentPresenter Margin="0" Width="Auto" Height="Auto" Content="{TemplateBinding Content}" />
            </Border>

        </Grid>
        </ControlTemplate>
    </UserControl.Template>
</UserControl> 
```

是项目的开始，适用于我们在工作中所做的事情。

# c# - 滥用类型重载在 C# 中创建样板代码

> ID：719102
> 
> 赞同：0
> 
> 时间：2009-04-05T15:18:58.213
> 
> 标签：c#, generics, t4, boilerplate

在我目前正在进行的一个项目中，我们添加了一个用于访问`HttpSessionState`对象的包装类。问题在于当前的解决方案意味着您必须编写一些代码来包装功能。我想出了以下解决方案

```
/// <typeparam name="TKey">Class used for generating key into session state storage.</typeparam>
/// <typeparam name="T">Type of object to store.</typeparam>
public static class SessionManager<TKey, T>
{
    static SessionManager()
    {
        _key = typeof(TKey).ToString();
    }

    private static readonly string _key;
    public static string Key
    {
        get { return _key; }
    }

     // Other functions ... (Set, IsSet, Remove, etc.)

} 
```

现在您只需使用即可创建所需的存储

```
using StringStore= Test.SessionManager<System.Boolean, System.String>;
using StringStore2= Test.SessionManager<System.Version, System.String>;

StringStore.Set("I'm here");
StringStore2.Set("I'm also here"); 
```

该代码有效并且很好，因为您可以轻松创建包装类（单个 using 语句）并且一切都是静态的。然而，代码有点滥用类型系统，所以可能有点模糊？在我添加它之前，我想得到一些反馈，所以这里有一个问题：

如果您我们正在维护上述系统并遇到上面的代码，您会

1.  追捕并杀死签入文件的人？
2.  对聪明的尝试有点恼火，但让它溜走？
3.  认为这是避免样板代码的好方法吗？

您更喜欢使用文本生成工具] 像[T4](http://blog.wekeroad.com/blog/make-visual-studio-generate-your-repository/)吗？

感谢您的任何回复，

麦兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T17:53:21.273

因此，您正在使用泛型为字典创建键。我会说这绝对不是一个好主意，原因有几个。

第一个原因是它违反了字典键背后的推理。一个键应该对它所持有的价值具有一定的意义。为什么要在 System.Boolean 下存储一个字符串？System.Boolean 是什么意思？这是否意味着字符串是真或假？像这样的混乱使代码更难支持。我也怀疑键值被用于在代码中的其他地方转换字符串。这显然是字典和泛型的错误混合。

第二个原因是 Session 在用户的会话中共享。因此，由两个不同的开发人员编写的两个完全不同的代码段正在访问这个共享位置。是什么阻止一个开发人员将 System.Boolean 识别为代码中数据 A 的适当键类型，而另一个开发人员使用 System.Boolean 作为代码中数据 B 的键类型？现在，第一个开发人员在访问此存储桶时期望 A，但得到 B。有意义的唯一密钥将防止这种情况发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T15:33:15.137

如果使用 System.Boolean 与 System.Version 只是为了区分不同类型以将 _key 的单独实例放入系统，我的响应将介于 #1 和 #2 之间。至少注释它并创建一些虚拟类型（可能只是空接口）来使用，而不是使用任意 .NET 类型。

我这么说是作为过去 6 个月的主要工作是代码审查的人。如果您与许多其他需要理解该代码的人一起工作，那么如果您至少不给读者一些线索，那么将很难理解和维护。

# java - Java UrlConnection HTTP 1.0

> ID：719107
> 
> 赞同：1
> 
> 时间：2009-04-05T15:27:28.597
> 
> 标签：java, http, urlconnection

我正在尝试从我的 Java 应用程序下载文件。但是因为 UrlConnection 使用 HTTP 1.1 协议，我得到了一个传输编码：分块响应，在这种情况下我无法找到文件大小（未设置内容长度）。从我可以找到的 HTTP 版本在类中是硬编码的，没有办法改变它。是否有可能将版本更改回一个或告诉服务器在发送文件时不要使用分块编码？

编辑：我不想检索动态内容，我的应用程序是下载管理器。我下载的文件是静态的。我检查过 wget、igetter、curl 的其他下载器使用 Http 1.0，它们从大多数服务器获取大小信息。但是我的应用程序和发布 Http 1.1 的 firefox 总是得到分块编码。我知道内容长度并不总是存在，但我大部分时间都想得到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T19:07:13.797

Jakarta Commons HTTP 客户端包含一个“偏好架构”，允许对 HTTP 连接的细节进行一些细粒度的控制。见[http://hc.apache.org/httpclient-3.x/preference-api.html](http://hc.apache.org/httpclient-3.x/preference-api.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-05T19:11:33.067

即使您指定了 HTTP/1.0，服务器也很可能无法指定有效的内容长度。当动态生成内容时，服务器必须将其全部缓冲以测量其总长度。并非所有服务器都能够回退到这种效率较低的行为。

如果缓冲响应是合理的，为什么不在您可以完全控制的客户端中进行呢？这比依赖服务器更安全。

无需处理即可读取响应，只需将数据填充到`ByteArrayOutputStream`. 完成后，测量生成的字节数组的长度。然后用它创建一个`ByteArrayInputStream`并处理该流来代替您从`URLConnection`.

# sql - Microsoft Jet 通配符：星号还是百分号？

> ID：719115
> 
> 赞同：13
> 
> 时间：2009-04-05T15:32:01.130
> 
> 标签：sql, ms-jet-ace

Microsoft Jet 中的 LIKE 运算符中正确的多字符通配符是什么？什么设置会影响它（如果有）？我支持在 Microsoft Jet（在 Access 数据库上）上运行的旧 ASP 应用程序，它使用 LIKE 运算符中的 % 符号，但我有一个客户显然在他的环境中遇到问题，因为 % 字符被理解为常规字符，我假设他的多字符通配符是 *. 另外，我几乎可以肯定，在过去我使用 * 而不是 % 编写了带有查询的应用程序。最后，Microsoft Access（作为应用程序）也仅适用于 * 而不是 % （但我不确定它的相关性）。

我只花了大约 20 分钟在互联网上搜索，没有任何有用的结果，所以我认为在 stackoverflow 上提问会很有用。可能有人已经知道了，无论如何，最好将潜在答案保留在 stackoverflow 上，而不是任何其他随机讨论论坛。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-06T10:21:26.873

直接的答案是通配符的行为取决于所使用接口的 ANSI 查询模式。

ANSI-89 查询模式（'传统模式'）使用`*`字符，ANSI-92 查询模式（'SQL Server 兼容模式'）使用`%`字符。这些模式特定于 ACE/Jet，并且与 ANSI/ISO SQL-89 和 SQL-92 标准有相似之处。

ADO 接口 (OLE DB) 始终使用 ANSI-92 查询模式。

DAO 接口始终使用 ANSI-89 查询模式。

使用 ODBC 时，可以通过[ExtendedAnsiSQL](http://msdn.microsoft.com/en-us/library/ms710959%28v=vs.85%29.aspx)标志显式指定查询模式。

MS Access 用户界面，从 2003 版本开始，可以使用任何一种查询模式，因此在任何给定时间都不要假设它是一种或另一种（例如，不要在验证规则中使用特定于查询模式的通配符）。

ACE/Jet SQL 语法有一个`ALIKE`关键字，它允许 ANSI-92 查询模式字符 (`%`和`_`) 而不管接口的查询模式如何，但是有一个`ALIKE`关键字不兼容 SQL-92 的小缺点（但`ALIKE`仍然具有高度可移植性） . 然而，主要缺点是我知道该`ALIKE`关键字不受官方支持（尽管我无法想象它会很快消失或改变行为）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-05T16:10:50.850

如果您使用的是 DAO，请使用星号（以及单个符号占位符的问号）。如果您使用 ADO，请使用百分号（和下划线）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-05T16:10:58.057

您可能会发现这很有用：

[http://msdn.microsoft.com/en-us/library/aa140104(office.10).aspx](http://msdn.microsoft.com/en-us/library/aa140104(office.10).aspx)

在查询设计网格中，DAO 使用 *，ADO 和 ASP 使用 %

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-05T17:13:47.360

通过 ODBC 访问 Jet，我不清楚应该使用哪些通配符。我假设是自然的 Jet SQL (*/?)，但由于我从不通过 ODBC 使用 Jet 数据，所以我不能说。

在 Access 中，正如 Remou 引用的文章所说，在代码中，它取决于您使用的数据访问接口——ADO（没有人应该在 Access 中使用），您使用 %/_ ，而使用 DAO（Jet 的本机接口层)，您使用 Jet 的本机通配符 (*/?)。

在 Access 中执行 SQL 的更高版本的 Access 中存在异常。我不知道是 Access 2002 还是 2003 添加了它，但是现在，您可以打开一个 ANSI SQL 92 兼容模式。如果这样做，通配符将变为 %/_ 而不是 */?。但是能够选择 ANSI 模式仅适用于 Access 本身——正如 onedaywhen 告诉我们的那样，您必须选择不同的数据接口库来使用不同的 SQL 模式，其中 ADO 使用 92 和 DAO 和 ODBC 89。

# java - 正则表达式匹配括在方括号或双引号中的字符串

> ID：719117
> 
> 赞同：2
> 
> 时间：2009-04-05T15:32:48.833
> 
> 标签：java, regex

我需要 2 个简单的 reg exp，它们将：

1.  如果字符串包含在方括号内（`[]`例如`[word]`） ，则匹配
2.  如果字符串包含在双引号中，则匹配（`""`例如`"word"`）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-05T15:34:46.850

```
\[\w+\]

"\w+" 
```

**解释：**

\[ 和 \] 转义特殊括号字符以匹配其文字。

\w 表示“任何单词字符”，通常认为与字母数字或下划线相同。

+ 表示前面的一项或多项。

" 是文字字符。

注意：如果你想确保整个字符串匹配（不仅仅是它的一部分），前缀`^`和后缀`$`。

下一次，您应该能够自己回答这个问题，通过阅读**[regular-expressions.info](http://regular-expressions.info)**

**更新：**

好的，所以根据您的评论，您似乎想知道的是第一个字符是 [ 和最后一个 ] 还是第一个和最后一个都是 " ？
如果是这样，这些将匹配那些：

```
^\[.*\]$    (or ^\\[.*\\]$ in a Java String)

"^.*$" 
```

但是，除非您需要对中心字符进行一些特殊检查，否则只需执行以下操作：

```
if ( MyString.startsWith("[") && MyString.endsWith("]") ) 
```

和

```
if ( MyString.startsWith("\"") && MyString.endsWith("\"") ) 
```

我怀疑这会比正则表达式更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T17:52:48.327

可能使这在正则表达式中变得困难/不可能的重要问题：

1.  可以`[]`嵌套（例如`[foo [bar]]`）？如果是这样，那么传统的正则表达式无法帮助您。Perl 的扩展正则表达式可以，但编写解析器可能更好。

2.  可以在字符串中转义（例如）`[`吗？如果是这样，请参阅[如何将双引号字符串与转义的双引号字符匹配？](https://stackoverflow.com/questions/481282/how-can-i-match-double-quoted-strings-with-escaped-double-quote-characters)`]``"``"foo said \"bar\""`

3.  您匹配的字符串中是否可能有多个实例？如果是这样，您可能希望使用非贪婪量词修饰符（即`?`）来获取匹配的最小字符串：`/(".*?"|\[.*?\])/g`

根据评论，您似乎想要匹配以下内容`"this is a "long" word"`

```
#!/usr/bin/perl

use strict;
use warnings;

my $s = 'The non-string "this is a crazy "string"" is bad (has own delimiter)';

print $s =~ /^.*?(".*").*?$/, "\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T15:54:21.873

它们是两个不同的表达方式吗？

[[A-Z-Z]+]

\"[A-Z-Z]+\"

如果它们在一个表达式中：

[[\"]+[a-zA-Z]+[]\"]+

请记住，在 .net 中，您需要转义双引号 " by ""

# java - 了解C++，学习Java需要多长时间？

> ID：719124
> 
> 赞同：21
> 
> 时间：2009-04-05T15:35:35.443
> 
> 标签：java, c++

我是一名称职的 C++ 开发人员。我了解并使用多态性、模板、STL，并且对流的工作方式有深刻的理解。出于所有实际目的，我没有进行过 Java 开发。我敢肯定，当你不得不学习 Java 时，你们中的一些人也曾遇到过类似的情况。你花了多长时间成为一名称职的 Java 程序员？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-05T17:17:59.393

我认为学习语言并不难。事实上，我曾经是一名全职 C++ 开发人员，在某个时候我开始编写 Java 代码。但问题是我不记得曾经学习过 Java，所以我想我只是边走边想。我一直在做全职 Java 很长时间了。

如果您非常熟悉 C++，您可能想阅读主要区别列表（例如，所有内容都是动态绑定的），然后开始在环境中练习（只需下载 Eclipse）。细微的差异是您必须适应的主要因素。

既然 Java 支持泛型，那么主要的切换难题之一就消失了。多重继承虽然不受支持，但如果您习惯了接口，这没什么大不了的，实际上使用接口而不是具有纯虚函数 (PVF) 的抽象类可以提高可读性。

对我来说，Java 是一个不错的、友好的、轻松的 C++ 沙盒版本。我不必担心一般保护错误（GPF），我不必担心内存泄漏，我不必担心弄乱指针。但是，不要让这让您感到困惑，仍然有很多机会搞砸了，而且有时甚至更难发现。

只需迈出一步。如果你有直觉，那应该不是问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-05T15:39:03.157

我走了相反的路。从 Java 开始，然后转到 C 和 C++。就我个人的经验而言，学习 Java 比学习 C/C++（尤其是 C++）要容易得多。

Java 在许多方面都意味着是 C++，其中许多未定义和不必要的复杂部分被删除或简化。恕我直言，它在这个目标上取得了巨大的成功。因此，它是一种非常容易学习和使用的语言。特别是对于熟悉 C++ 的人。

实际花费的时间很大程度上取决于学习语言的人。但是，我认为可以肯定地说，与 C++ 相比，掌握 Java 所需的时间更少。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-05T15:41:11.013

应该不会太差。语法和类应该很容易掌握。有一些差异，但没有一个太具有挑战性。

最困难的部分更多是关于学习包，因为它们会有所不同。内置的 Java 类和函数，然后要以实用的方式使用 Java，您需要学习 J2EE 或任何您可能实际使用它的东西。后一部分可能会比​​语言本身花费更多的时间。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-05T16:56:38.353

如果您已经是一名称职的程序员（尤其是在 C++ 方面），那么学习 Java 根本不需要很长时间。我会（按顺序）为任何想学习 Java 的人推荐的书是：

*   [头先Java](http://oreilly.com/catalog/9780596004651/)
*   [用 Java 思考](http://www.mindview.net/Books/TIJ/)
*   [有效的 Java](http://java.sun.com/docs/books/effective/)

根据您的经验，您可能会发现通过 Head First Java 的速度相当快。出于这个原因，我建议您在继续使用 Java 思考之前将其从库中检出并略读。

还可以查看 Sun 的[Java 教程](http://java.sun.com/docs/books/tutorial/)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-05T17:47:22.740

C++ 到 Java：1 周。Java 到 C++：1 个月。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-05T21:29:26.573

正如汤姆·霍廷（Tom Hawtin）所写，关键问题是您如何定义称职。

您将能够相当轻松地学习该语言，但您必须学习习语和库。在你工作的领域（例如嵌入式或企业）之间，以及应该解决相同问题的库之间存在相当多的差异。这里有一些例子：

1.  在商业/企业应用程序中，您通常使用数据库。在那里你可以拥有：

    *   普通的 JDBC
    *   SQL 映射器 (iBatis)，围绕冗长和重复的 JDBC 的包装器
    *   ORM 解决方案（Hibernate），有自己的哲学
2.  使用桌面 UI，您有两个相互竞争的平台：

    *   Swing，JRE 的一部分
    *   SWT/JFace，来自 Eclispe 基金会，由 IBM 发起，具有原生 UI 支持
3.  Web 框架不胜枚举，在表示 UI、配置、文件夹/包结构等方面有不同的想法。

4.  DI（依赖注入）在业务应用程序中很常见，无论是通过 Spring 等 3rd 方框架，还是作为 EJB3 标准的一部分。但是，我认为它从未用于嵌入式设置。

公平地说，这只是冰山一角。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-05T16:42:13.270

早在 1995 年我做这件事的时候，我花了大约半天的时间来熟悉工具和基本想法，一两天的时间来掌握语言，一周的时间来了解语言中比较晦涩的部分（有更少的他们当时）和一个月的时间来获得图书馆（当时图书馆的数量要少得多）。

现在我猜这些工具和基本语言将花费同样多的时间，几个星期到一个月的时间来处理语言中晦涩的部分（取决于你打的是什么部分，以及什么时候）。基本库将是一个月到两个月（`java.lang`、`java.util`和其他一些）。剩下的类库 6 个月到永远，这取决于你需要学习什么以及多久更新一次 :-)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-05T15:43:07.827

我知道 C++，并且不得不使用 Java 一次并在 2 周内学会了它。当然有很多惊喜，但这很容易。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-05T17:09:41.677

我有 C++ 背景。学习 Java 花了我几天时间——这门语言看起来很简单——至少是它的基础。我仍然咨询我的 Java 大师 - 谷歌很多，但通常是探索 API 和标准库的问题。Java 有一些烦恼，但您应该轻松快速地发现它们中的大部分。

有人向我推荐[Thinking in Java](http://www.mindview.net/Books/TIJ/)（有一本免费的电子书），但一直没有足够的耐心去阅读它。我不会用 Java 编写火箭科学代码，而要做到这一点，我的技能就足够了。

话虽如此，最好对语言有更好的正式知识。目前我正在考虑学习[SCJP](http://www.sun.com/training/certification/java/scjp.xml)，这似乎是一种明智的学习方式，而且一旦通过它你将获得公认的编程证书（我听说它不值钱，但它仍然可能是一个动力...）。

你也可以试试[Java 黑带](http://www.javablackbelt.com/)——答案经常让我吃惊。在进行了几次测试之后，我想知道我的程序是如何编译的，这表明我可能不是最有能力的 Java 程序员 :)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-05T19:35:53.307

你如何定义称职？为了我的钱，大多数专业的 Java 程序员（就像他们为钱做的那样）永远无法达到胜任的水平。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-05T20:44:54.530

如今，编程语言的大部分功能来自其库和公认的习语。

虽然学习 Java 语言需要相对较短的时间，但学习有效地使用可用的库（集合、io 等）可能需要更多的时间。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-05T15:45:01.287

我认为“有能力的Java程序员”一词的含义有两种方法。如果是关于 OOP 的词法、语法和术语，我在学习 2（两天）天之前就开始完全理解 Java。但首先你会被不可能打自己的腿所吸引；）但如果是嵌入式类系统（即包）、API 参考、技巧和窍门等，大约需要半年的时间来感受自己对 Java 友好。我认为。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-05T15:52:21.690

我也先学了 C++，然后学了 Java。因为我已经熟悉了 OOPS 概念，所以花费的时间非常少。在学习的最初阶段，我对 Jave 中的新概念（如垃圾收集器）非常满意。我参考了 Herbert Schildt[的 The Complete Reference](https://rads.stackoverflow.com/amzn/click/com/0072224207)，它确实帮助我快速掌握了语法。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-05T20:43:57.760

我从 C++ 开始学习 C#/.NET。没过多久。由于 C#/.NET 的开发非常接近 Java（他们使用了许多 Java 的基础技术，例如 GC、引用类、JIT，...），我认为学习 Java 并不难。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-04-05T21:58:12.467

我会去六到八周。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-04-05T22:12:54.177

学习这门语言应该不会超过一两天，但你可能需要花几周的时间在类库上：如何使用集合、并发包、反射、日志记录、swing/awt、动态代理、 MBean 等

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-03-30T16:51:03.327

我在 15 岁的时候学习了 c++，并成为了一名专业的软件程序员。但是当我找工作时，只有java开发人员可以找到工作。我认为改变我的语言很难。所以只是为了试用，我下载了java编译器，只是为了好玩，输入了一些代码，我发现它与c++没有太大区别. 只有经过 6 个小时的研究和学习，我才成为一名 java 开发人员。所以在 c++ 和 java 之间切换非常容易。

# python - Django 模板 - 新变量声明

> ID：719127
> 
> 赞同：13
> 
> 时间：2009-04-05T15:37:15.347
> 
> 标签：python, django, django-templates

让我以我刚刚开始使用 Python 作为序言，所以如果这真的是一个简单的问题 ^_^

我有一个包含以下内容的 html 文件：

```
 {%for d in results%}
        <div class="twt">
            <img src="{{ d.profile_image_url }}" width="48px" height="48px" /> <span> {{ d.text }} </span>
            <span class="date">{{ d.created_at }}</span>
        </div>
    {% endfor %} 
```

效果很好，但我也想在此页面上声明一个变量。假设对于这个例子，我们可以将它的 RowNumber 为每个显示的 d 增加，吐出当前的 RowNumber。

我试着做：

```
{{ RowNumber = 0}} 
{{ RowNumber ++ }} 
```

但它似乎不允许我声明 RowNumber。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-05T15:38:44.903

查看有关循环的[文档。](http://docs.djangoproject.com/en/dev/ref/templates/builtins/#for)`for`

它会自动创建一个名为`forloop.counter`保存当前迭代索引的变量。

至于如何声明变量的更大问题，Django 没有开箱即用的方法，它不被认为是缺少的功能，而是一个功能。如果您真的想这样做，可以使用[自定义标签](http://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-tags)，但在大多数情况下，您要遵循的理念是，您想要做的任何事情都需要在视图中完成，并且模板应该保留给非常简单的逻辑。例如，对于汇总总计的示例，您可以使用[添加](http://docs.djangoproject.com/en/dev/ref/templates/builtins/#add)过滤器。同样，您可以像使用标签一样[创建自己的过滤器。](http://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-02-18T10:38:13.107

如果你想在 Django 模板中设置任何变量，你可以使用[我写的这个小模板标签](https://surdu.me/2011/02/18/set-variable-django-template.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-13T18:43:18.310

这是怎么做的：

```
{% with name="World" greeting="Hello" %}     
<html>
<div>{{ greeting }} {{name}}!</div>
</html>
{% endwith %} 
```

另见：[带标签](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#with)

来自这篇文章 的[john](https://stackoverflow.com/users/52207/john)和[yarden ：](https://stackoverflow.com/users/1178000/yardenst)[如何在模板代码中设置变量的值？](https://stackoverflow.com/questions/1070398/how-to-set-a-value-of-a-variable-inside-a-template-code)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-11-14T20:51:48.830

在模板中：

```
{% for outer_obj in outer_list %}
    {% for inner_obj in inner_list %}
         {% increment_counter forloop.counter0 forloop.parentloop.counter0 outer_list.count %}
    {% endfor %}
 {% endfor %} 
```

模板标签：

```
@register.simple_tag
def increment_counter(outer, inner, outer_loop_length):
    return outer + inner * outer_loop_length + inner * (outer_loop_length - 1) 
```

结果：0 1 2 3 ...

# datetime - 日期时间十六进制格式

> ID：719129
> 
> 赞同：5
> 
> 时间：2009-04-05T15:38:05.780
> 
> 标签：datetime, hex

我知道以下一对十六进制值和日期：

```
7D 92 D2 5C = 26/03/2009 - 09:28
7D 92 DA CC = 27/03/2009 - 11:12
7D 92 E3 56 = 28/03/2009 - 13:22
7D 92 EC 4F = 29/03/2009 - 17:15
7D 92 F3 16 = 30/03/2009 - 12:22
7D 92 FB 1A = 31/03/2009 - 12:26
7D 93 0B 01 = 01/04/2009 - 12:01
7D 93 12 88 = 02/04/2009 - 10:08
7D 93 1A 30 = 03/04/2009 - 08:48
7D 93 22 DD = 04/04/2009 - 11:29
7D 93 2A D5 = 05/04/2009 - 11:21

```

我不知道如何从一个转换到另一个....

有人认识十六进制格式吗？

铝

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-05T15:44:49.413

这是一个简单的位域，尽管这是一种非常奇怪的时间格式:)

```
1111101100100101101001001011100
                         011100 - 28 分钟
                    01001 - 09 小时
               11010 - 26 天
           0010 - 第 3 个月（从零开始，因此为 2）
11111011001 - 2009 年
```

会是我的猜测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T15:47:16.523

12 位年，4 位月（从 0 开始），5 位日，5 位小时，6 位分钟。

不错的谜题:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-02-10T19:19:07.997

我意识到这是一个古老的话题，但我发现它很有用，并认为我会增加我的 2 美分。

```
u8 getMinutes(u32 in)
{
    return in & 0x3f;
}

u8 getHours(u32 in)
{
    return (in>>6) & 0x1f;
}

u8 getDays(u32 in)
{
    return (in>>11) & 0x1f;
}

u8 getMonths(u32 in)
{
    return ((in>>16)& 0xf)+1;
}

u16 getYears(u32 in)
{
    return (in>>20) & 0x7ff;
}

void printDate(u32 in)
{
    printf("%d/%d/%d - %d:%d", getDays(in), getMonths(in), getYears(in), getHours(in), getMinutes(in));
}

int main(int argc, char *argv[])
{
    u32 t = 0x7D92D25C;
    printDate(t);
    return 0;
} 
```

# deployment - 是否可以为多个平台部署 Common Lisp（或其他方言）桌面应用程序？

> ID：719130
> 
> 赞同：15
> 
> 时间：2009-04-05T15:38:11.553
> 
> 标签：deployment, graphics, lisp, common-lisp

我想用 Common Lisp 或其他 Lisp 方言开发一个图形应用程序，它可以部署在 Mac、Windows 和 Linux 中，作为提高我对该语言知识的一种方式。理想情况下：

1.  将编译代码
2.  会使用一个通用的图形库
3.  不需要安装运行时环境。

我想制作一个小游戏或图形应用程序，并能够通过在具有任何这些操作系统的计算机上的简单安装来展示它。

有人有类似情况的经验，或者可以指出图形库和编译器、运行时环境等的最佳选择......

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-06T04:35:19.857

我是目前托管在谷歌代码上的 lispbuilder-sdl 的开发人员之一。

[替代文字 http://img10.imageshack.us/img10/7664/mandelbrot.jpg](http://img10.imageshack.us/img10/7664/mandelbrot.jpg)

[http://code.google.com/p/lispbuilder/](http://code.google.com/p/lispbuilder/)

这为您提供了一种无需修改即可在 linux、windows 和 mac 机器上运行常见 lisp 程序的方法。我们使用 SDL 库和它的各种扩展。

一个最小的程序如下所示：

```
(sdl:with-init ()
  (sdl:window 320 240)
  (sdl:draw-surface (load-image "lisp.bmp"))
    (sdl:with-events ()
      (:quit-event () t)
      (:video-expose-event (sdl:update-display)))) 
```

wiki 还解释了如何为各种常见的 lisp 实现构建自包含的 exe。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-05T16:00:45.273

大多数 Common Lisp 实现可以转储可执行映像。有时这是两个文件（内核 + 映像），但通常这可能只是一个可执行文件。但可执行文件通常只在编译它的平台上运行。LispWorks 或 Allegro CL 等商业实现具有扩展功能 - 例如，可以删除 Lisp 系统中未使用的部分。这称为“交付”。

有一些关于[LispWorks 应用程序](http://www.lispworks.com/products/runtimes.html)的信息。LispWorks 是商业的，覆盖平台可能很昂贵。您必须购买开发环境 - 在流行平台上免费交付。LispWorks 有一个适用于 Windows、Mac 和 Unix/Linux 的图形库。后者基于古老的Motif。优点是代码可以在平台上非常便携。LispWorks 开发环境本身就是一个 LispWorks 应用程序。例如，在 Mac 上，32 位版本和 64 位版本可在 PowerPC 和 x86 上从单个应用程序运行。

有关 Common Lisp 和库的“免费”版本的信息在[CLIKI](http://www.cliki.net/index)上收集。不过，编写 MS Windows 应用程序并不是“免费”Common Lisp 最强大的部分。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-05T16:21:15.397

[PLT Scheme 可以满足](http://docs.plt-scheme.org/mzc/index.html)您的所有要求。它使用的开箱即用的库是 WxWindows，但如果你真的想的话，你可以得到其他 GUI 系统的绑定。

PLT Scheme 可能是在简化编写和分发“小游戏或图形应用程序”方面所做工作最多的 Lisp。它们包括基础发行版中的许多[游戏示例，](http://docs.plt-scheme.org/games/index.html)并且它们的旗舰 IDE DrScheme 是用它们自己的[图形框架](http://docs.plt-scheme.org/framework/index.html)编写的。可以在任何平台上免费创建和分发编译后的 PLT Scheme 代码。

编辑：您要求任何 Lisp 方言。Clojure 也是一种选择吗？

编辑2：

您说 Clojure 是一种选择。如果您已经非常熟悉 Java 和 Swing，我认为 Clojure 将是一个不错的选择——但需要注意的是，它与其他 Lisps 有一些相当大的语法差异。[一本书即将出版](http://www.pragprog.com/titles/shcloj/programming-clojure)。

如果您还不是 Java 专家，我认为 PLT Scheme 仍然是最佳选择。我是从“刚开始学习 Lisp”和“小型演示应用程序”的角度来看的。其他人已经注意到商业 Common Lisp 实现支持您想要的，但是这些将更难（并且更昂贵）用作介绍性系统。

所有这些实现都有宏系统，我认为这就是您所说的“代码是一流的”。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-05T16:23:24.453

Rainer 对基本问题有很好的评论：有很好的商业解决方案完全按照您的要求（但它们不是免费的开发环境，并且可能涉及经常性费用），并具有良好支持的跨平台库。也有免费的软件方法，但是根据您的需要在所有三个平台上交付更加困难（并非不可能，但更多的是摆弄）。

我会补充一点，“不安装运行时环境”有点问题。您当然不需要让最终用户单独安装 lisp，但您的程序很可能需要安装整个运行时才能正常工作，具体取决于您的工作。这个级别的灵活性意味着很难以编程方式确定哪些位是需要和不需要的，这就是为什么免费软件解决方案通常不会为编写摇树器来完成这项有些乏味和棘手的工作而烦恼。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-24T18:59:37.937

我目前正在做的，对于使用 OpenGL 和 GLFW 的图形应用程序，主要使用 SBCL 进行开发，并通过[cl-launch](http://cliki.net/cl-launch/)为我的测试人员提供交付。但是，我的计划是使用[CCL](http://trac.clozure.com/openmcl)在 OS X 上构建应用程序包，并使用[ECL](http://ecls.sourceforge.net)在 Linux 和 Windows 上构建独立的可执行文件。我目前使用 cl-launch 构建的包相当大（通常为 30M 及以上），而我使用 ECL 完成的测试要小得多（libecl 在我的系统上的重量约为 1.3M）。但是，我希望 SBCL 表现更好（尽管我会先进行配置以确保！），因此您的选择将取决于您的应用程序。

但是，如果我在商业上这样做，我会投资其中一个商业实施。Rainer Joswig 在上面提到了 LispWorks 和 Allegro。对于 Windows 应用交付，您还可以考虑[Corman Lisp](http://www.cormanlisp.com/)。我的印象是，在这三个操作系统上进行应用程序交付的最快但最昂贵的途径是购买 Allegro，但另一种选择（工作更多，但更便宜）是在 OS X 上使用 CCL，在 Win32 上使用 Corman，以及 ECL 或 SBCL在 Linux 上。LispWorks 似乎是介于两者之间的选择，尽管很多人都对它发誓，所以我不会仅仅因为它更实惠就认为它不如 Allegro。

图形库问题是独立的；我的印象是情况在不断改善（CFFI 中的回调似乎现在可以在大多数平台上工作，这对与大多数 C 工具包的接口有很大帮助），但我一直在更多地使用 GL、GLFW、GLUT 和 SDL （虽然还没有 lispbuilder，上面 justinhj 提到过，看起来很酷）。一两年前我用[wxCL](http://www.wxcl-project.org/language/en/)做了一些实验 ，看起来很有希望。

CL 的好处在于，有这么多好的实现，您可以在您选择的实现中进行开发，并且您的大部分代码应该很容易移植到您选择的任何实现，以便在给定平台上交付应用程序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-05T23:45:51.130

有[ECL](http://ecls.sourceforge.net/)，一个 Common Lisp 实现，似乎可以做你想做的事情（不过我还没有使用它）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-03-23T22:04:42.623

Ecl lisp 可以编译非常小的可执行文件（几 kbs），但在 Ubuntu 上，为了执行这个可执行文件，/usr/local/lib 目录中必须有 libecl.so.11.1 文件。该文件为 5.7 MB。

# language-features - Cobol 的优点是什么？

> ID：719135
> 
> 赞同：8
> 
> 时间：2009-04-05T15:40:00.987
> 
> 标签：language-features, cobol

我喜欢花时间研究语言的酷特性，即使我不会很快有机会使用它们，但总是听到关于 Cobol 的坏消息，但我相信它一定有一些不错的特性变得和以前一样重要。那么可以从 Cobol 中学到哪些好的特性呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-05T15:43:25.580

以不太简洁的方式编写公式的能力。例如：

```
ADD YEARS TO AGE.
MULTIPLY PRICE BY QUANTITY GIVING COST.
SUBTRACT DISCOUNT FROM COST GIVING FINAL-COST. 
```

这是优点还是缺点？取决于你怎么看...

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-05T15:55:01.403

真正的定点变量和数学。因此，对于 15 美元和 75 美分，您的内部表示是二进制数字 1、5、7 和 5。这是与标准浮点近似值相比的精确表示。此外，该定点变量的所有加法和减法也是定点的。

报告编写器扩展非常擅长生成报告和处理页眉、页脚、分页符、分节符，以及与生成报告有关的任何事情。

排序/合并扩展也非常非常好。使用各种允许的结构，您可以简单地排序/合并，或者您可以在排序之前处理排序输入记录或在排序之后处理排序输出。例如，直接输入输入记录进行排序，然后在排序记录上使用报告编写器，而无需在代码中管理中间排序文件。非常好。

它做得很好，它做得很好。只是大多数时候，它做得好的并不是你所需要的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-05T15:58:25.653

长寿。我在 1975 年第一次学习的语言可以用于今天的 Web 服务。

此外，COBOL 有一个我每天都听到人们要求的功能。给定两个具有相同名称字段的记录，您可以执行以下操作：

```
MOVE CORRESPONDING SOURCE-RECORD TO DESTINATION-RECORD. 
```

它会将具有相同名称的字段从一个移动到另一个，并根据需要进行转换。缺乏这样的功能是人们采用数据传输对象从 Web 服务返回的障碍之一——您必须手动编写代码来完成上述操作，或者使用代码生成。

我想可能也有`ADD CORRESPONDING`，但我不确定。记忆开始消失，过了一会儿……

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-05T16:05:31.877

输出格式是[变量声明的一部分](http://www.csis.ul.ie/COBOL/Course/DataDeclaration.htm)。它非常面向商业。

> 在 COBOL 中，变量声明由 DATA DIVISION 中的一行组成，其中包含以下项目：
> 
> ```
> * A level number.
> * A data-name or identifier.
> * A Picture clause. 
> ```
> 
> 可以通过对 PICTURE 子句的扩展（称为 VALUE 子句）将起始值分配给变量。
> 
> 一些例子：
> 
> ```
> 01 GrossPay       PIC 9(5)V99 VALUE ZEROS.
> 
> 01 NetPay         PIC 9(5)V99 VALUE ZEROS.
> 
> 01 CustomerName   PIC X(20) VALUE SPACES.
> 
> 01 CustDiscount   PIC V99 VALUE .25. 
> ```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-05T20:42:52.553

支持压缩十进制以进行准确的数学运算；

内置索引文件/排序；

成熟的编译器；

这有点冗长，但它完成了工作。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-04-06T16:05:18.077

哦，我怎么会忘记...

代替：

```
if ((a == 3) || (a == 4) || (a == 10)) 
```

写：

```
IF A IS 3 OR 4 OR 10 
```

代替：

```
if ((a == 3) || (a < b)) 
```

写：

```
IF A IS 3 OR LESS THAN B 
```

代替：

```
if ((a >= 3)  && (a <= 10)) 
```

写：

```
IF A IS BETWEEN 3 AND 10 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-04-05T16:24:24.373

数据结构功能与固定长度字段一样好。

ALTER 是彻头彻尾的思想弯曲。也许不适合在生产代码中使用，但玩起来很有趣。基本上，它允许您在运行时更改哪些语句遵循其他语句（插入 GOTO）。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-04-06T01:08:16.487

1）。简单易学。2）。语法更像英语，因此即使对于初学者来说也很容易理解程序逻辑。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-04-06T04:01:40.157

```
MOVE CORRESPONDING 
```

假设您在 C# 中有 2 个类，它们有一些共同的字段，例如，A 类有 Name、Age 和 Sex，以及其他一些字段……B 类有这 3 个相同的字段，加上它自己的一些其他字段。复制字段的唯一方法是：

```
a.Name = b.Name;
a.Age = b.Age;
a.Sex = b.Sex; 
```

在 COBOL 中，您只需编写：

```
MOVE CORRESPONDING A TO B 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-04-05T15:45:23.423

这很容易学习。我一生中只写过两个 COBOL 程序（将 COBOL ISAM 文件解压缩为不同的格式），并且在一个下午的一本书的帮助下，我学到了所有我需要知道的知识。

哦，它会在你的大脑中留下“环境”这个词的正确拼写。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-04-06T04:02:14.710

在声明变量时它还有一个有趣的特性……在声明变量的地方，您还可以声明变量的一些可能**值**并用布尔值标记它们。您可以使用

```
IF [boolean_label] 
```

代替

```
IF [variable] IS [value] 
```

如果值不是特别有意义（即魔术数字甚至魔术字符串），这尤其好...这些魔术值仅出现在变量的声明中，并且很好地标明了它们的含义。

您甚至可以将变量**设置**为以下值之一：

```
SET [boolean_label] TO TRUE 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-04-13T07:09:29.030

[今年已经 50 岁了，但 Cobol 仍然是幕后商业软件的关键参与者](http://www.guardian.co.uk/technology/2009/apr/09/cobol-internet-programming/print)（卫报）

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2010-05-16T11:37:40.183

Sun（现在是 Oracle）的人可能会生我的气，但 FORTRAN 和 COBOL 是首次尝试编写一次，随处运行的语言。IBM 添加了对 COBOL 语言的扩展，这几乎使 COBOL 的尝试无效。

在 COBOL 和 FORTRAN 之前，计算机语言是特定于机器的。计算机非常昂贵，以至于每次升级计算机时重写代码会更便宜。IBM 在 1950 年代后期意识到创建和维护一致的计算机体系结构可以为客户节省资金（并增加计算机系统的市场）。这就是 IBM 开发 360 系列计算机的原因。

同样，客户意识到为每台新机器重写软件变得过于昂贵。IBM 开发了 FORTRAN，而 Grace Hopper 和联邦政府推动了 COBOL 的开发。这就解释了为什么 IBM 将所有这些专有扩展添加到 COBOL。联邦政府的参与也解释了为什么 COBOL 是一种如此冗长的语言。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-04-07T21:41:19.570

COBOL 非常适合格式化输出。如下所示的输出字段：

总付费图片 $$$,$$$.99

将在值旁边打印 $ 。它将打印高达 99,999.99 美元。如果价值仅为 150 美元，它将打印 150.00 美元。此外，通常有一个 COBOL 函数可以将该金额转换为单词 - “一百五十美元，没有美分”

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-04-30T18:56:13.493

您还可以重新定义记录以允许处理多种记录类型的文本文件。

```
01 my-address-record.
   02 my-record-type      pic x.
   02 my-street           pic x(20).
   02 my-city             pic x(20).
   02 my-state            pic x(2).
   02 my-zip              pic x(5).
   02 filler              pic x(3).
01 my-comments-record redefines my-address-record.
   02 filler              pic x.
   02 my-comments         pic x(50).
01 my-automobiles redefines my-address-record.
   02 filler              pic x.
   02 year                pic 9(4).
   02 make                pic x(20).
   02 model               pic x(20).
   02 filler              pic x(6).

--code--
if my-record-type = 'a'
   ... process address
else if my-record-type = 'b'
   ... process comments
else if my-record-type = 'c'
   ... process automobiles. 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-04-06T04:06:44.187

另一个优势...如果您在大型机上编程，您几乎可以确定 COBOL 将可用...对于任何其他语言都不是这样。这有点像大型机的C。

# c# - 在 C# 中初始化 POD - 最佳实践

> ID：719137
> 
> 赞同：0
> 
> 时间：2009-04-05T15:41:27.160
> 
> 标签：c#, types, initialization

据我所知 [*]，C# 将普通旧数据类型（`int`、`float`、`bool`等）默认为合理值。 `int a`、`float b`和分别`bool c`取值`0`、`0.0f`和。`false`

假设是这样：

为了清楚起见，我应该明确地给我的变量值`0`、`0.0f`和`false`，还是应该隐含这些值，从而减少我编写的代码量，（可以说）减少我可以引入程序的错误数量？

[*] 老实说，经过 10 分钟的谷歌搜索，我很难找到证实这一点的相关文档！如果有人向我指出，我会修改问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-05T15:43:56.780

C#**不会为****局部**变量分配任何默认值。这些默认值仅适用于**字段**（类成员）。

如果您在首次使用之前没有为局部变量赋值，您将收到**编译时错误**：

```
static void Test() {
   int x;
   Console.WriteLine(x); // compile time error.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-05T15:50:41.507

我会说不要初始化它们（字段）。如果没有它们，将会非常清楚会发生什么。

我还要说，在你为它们获得有意义的值之前不要初始化局部变量，例如，我经常看到类似于以下示例的代码：

```
private void SomeMethod()
{
    SomeObject myObj = null;

    if (SomeCondition)
    {
        myObj = someValue;
    }
    else if (SomeOtherCondition)
    {
        myObj = someValue;
    }
    else
    {
        myObj = someOtherValue;
    }
} 
```

空分配是多余的，但我实际上觉得它是有害的，就好像我们忘记在其中一个代码路径中分配给 myObj 一样，例如，如果我们在 else 中分配给 yourObj 而不是 myObj，那么我们最终会设置 myObj为 null ，这最终将在运行时的某个稍后时间表现为空引用异常。如果没有初始的空赋值，那么这将是一个编译错误——更容易处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-05T15:46:46.977

对于静态/实例变量和数组元素，是的，它确实默认它们是合适的。请参阅 C# 3.0 规范的第 5.2 节：

* * *

以下类别的变量会自动初始化为其默认值：

*   静态变量。
*   类实例的实例变量。
*   数组元素。

变量的默认值取决于变量的类型，并确定如下：

*   对于值类型的变量，默认值与值类型的默认构造函数计算的值相同（第 4.1.2 节）。
*   对于引用类型的变量，默认值为 null。

初始化为默认值通常是通过让内存管理器或垃圾收集器在分配内存之前将内存初始化为所有位为零来完成的。因此，使用全位为零来表示空引用很方便。

* * *

局部变量无关紧要，因为它们在被明确分配之前不能使用。

至于是否应该显式初始化它们，这主要是个人喜好问题。例如，如果要在构造函数中重新分配值，我通常不会在声明中分配值。

老实说，就可读性而言，这真的不是一个让我兴奋的话题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-05T15:54:17.097

成员变量被初始化为其默认值（即零或空）。

如果您将默认值分配给成员变量并进行代码分析，它会捕捉到这一点并给您一个[DoNotInitializeUnnecessarily](http://msdn.microsoft.com/en-us/library/ms182274.aspx)警告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-05T15:46:04.870

下面的主观答案:)

我觉得不应该将**成员变量初始化为其默认值。**它是多余的，不会为代码增加太多/任何价值。

我发现大多数这样做的人都有 C++ 方面的深厚背景，因此他们根深蒂固地认为必须初始化成员变量才能编写正确的代码（我在这里感到内疚）。因此，这种做法只是在实际上没有必要的情况下转换为 C#。

但这不是我失去很多睡眠的事情。如果人们默认初始化他们的变量，我可能会在代码审查中添加一个挑剔的评论，但我并没有对此采取强硬立场。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-05T15:47:05.663

当 CLR 初始化一个原始类型时，它会将该类型的所有位清零。因此，就*CLR*而言，以下内容：

```
int i;
bool b; 
```

与此等效：

```
int i = 0;
bool b = false; 
```

但是，C# 编译器要求您在将变量用于表达式之前对其进行初始化。我总是觉得这有点奇怪，但这是规则。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-05T16:36:50.053

经常接触许多不同的编程语言，我永远不会相信编译器/解释器会为我分配默认值给变量。我自己这样做是微不足道的，并确保变量没有被初始化：

*   [随机数据](http://en.wikipedia.org/wiki/Uninitialized_variable)在内存中徘徊
*   通过[用户输入字段](http://shiflett.org/articles/input-filtering)，这是一个潜在的安全风险，尤其是在与数据库交互时使用该数据时，或者更糟糕的是，与操作系统交互时

# http-status-code-404 - 使用 WebDAV 访问 Exchange 2007 邮件存储时出现“404 Not Found”

> ID：719161
> 
> 赞同：0
> 
> 时间：2009-04-05T15:49:54.427
> 
> 标签：http-status-code-404, webdav, exchange-server-2007

我正在尝试使用 WebDAV 以编程方式访问 Exchange 2007 邮件存储。但是，对于某些用户，我收到了可怕的错误“404 Not found”。我正在使用类似于[http://server/exchange/usermailbox/](http://server/exchange/usermailbox/)的 url 。它对某些用户来说工作得很好，但对其他用户则不然。

我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-06-17T14:14:16.317

我发现如果我使用用户的默认 SMTP 地址，它就可以正常工作 - 即我在访问 Exchange 存储时使用类似于 server/exchange/user@domain.local 的 url。您可以从 Active Directory 中用户的 proxyAdresses 属性中找到默认的 SMTP 地址。默认地址是 SMTP 大写的地址。

# django - 带有“忽略大小写”的唯一约束

> ID：719166
> 
> 赞同：4
> 
> 时间：2009-04-05T15:54:17.723
> 
> 标签：django, postgresql, constraints

如何为 Django 模型指定自定义约束？

像那样

```
create table t
(
  login varchar(10),
  unique ( upper(login) )
); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-05T17:04:37.507

Django 的`unique`和`unique_together`支持是在数据库级别处理的，因此非常依赖于数据库，Django 不支持在约束中使用数据库函数（并非所有数据库都支持它，或者一致地支持它等等）。但是，您确实有几个选择：

**代码方式**

如果维护数据库可移植性很重要，请覆盖`save()`模型类中的方法并在代码中执行检查。这显然是一种性能消耗，因为您必须在发出更新/插入之前发出查询，但与所有与性能相关的事情一样，最好先尝试最简单的解决方案，然后看看是否真的存在性能问题您的应用程序和部署环境。（这实际上是 Adam Bernier 在问题评论中指出的“django-check-constraints”项目正在做的事情......只是具有您可能不需要的抽象级别）。

**SQL方式**

或者，如果您不太关心数据库的可移植性，或者很乐意为您需要支持的所有数据库编写适当的 SQL，您可以利用 Django 的钩子`CREATE TABLE`在模型运行后运行自定义 SQL 语句. django 文档在这里介绍了它：[提供初始 SQL 数据](http://docs.djangoproject.com/en/dev/howto/initial-data/#providing-initial-sql-data)。

虽然文档中的示例，如标题所示，用于使用 SQL 填充初始数据，但您可以将任何 SQL 语句集放入文件中，包括`ALTER TABLE`在创建表后立即使用函数引入 DB 管理约束的命令. Django 允许您为您支持的每种数据库类型提供单独的 SQL 语句。

# user-interface - 我想创建一个 GUI 来实现特定优化问题的解决方案

> ID：719171
> 
> 赞同：0
> 
> 时间：2009-04-05T15:55:18.377
> 
> 标签：user-interface

某些节点彼此相距固定距离。在这些节点中的每一个，都有一定的水需求（以 m^3/sec 为单位）。

节点通过管道网络连接，连接不同节点的管道长度是固定的，通过每个管段的流量是根据终端节点的需求逆向计算的。

现在，我需要最小化选择使用哪些管道的固定成本，它是流量、管道长度和管道直径的函数（而且，我知道成本和这些参数之间的相关性以函数形式）。

约束是压降（实际上是动态压头）需要大于每个节点的指定值。

我知道如何将其转换为线性优化问题（通过将每个段分成一系列不同长度和特定直径的管道）并使用单纯形算法。

**我要做的是实现一个GUI界面，用户可以在其中指定节点，连接各个节点的线段和相应的距离，以及通过简单的点击和绘制的最小头，并在一些框中输入信息，这样我就可以使用这些数据来计算最佳解决方案并显示它。**

有人可以指出我可以轻松做到这一点的语言和参考吗？我愿意在编程时付出努力并学习它。

我知道如何使用线性规划和从命令行输入的一组特定参数值来解决预定义网络的优化问题。我想知道如何创建一个 GUI 来绘制网络并输入数据。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T16:08:57.843

如果您已经在使用 C++，并且只想为您的应用程序开发 GUI，那么[Qt](http://qt.nokia.com/)可能是一个不错的选择。

如果你问的是优化问题，那是另一回事。我建议在担心 GUI 之前让它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T16:18:32.173

[Graphviz](http://www.graphviz.org/)可能是了解有关 GUI 的一些想法的好地方。输入您的网络，Graphviz 将绘制它。Graphviz 代码中可能有一些编辑功能，您也可以从它开始，但我没有使用它。

# .net - 我怎么知道一个流已经读到最后？

> ID：719178
> 
> 赞同：3
> 
> 时间：2009-04-05T15:59:35.120
> 
> 标签：.net, stream

我只是在编写一个简单的方法，从一般流中读取数据——这意味着它可能是 FileStream 或 NetworkStream 而不知道它的长度。我反复将流读入 byte[] 并将数据推送到另一个流或其他任何东西。我的问题是，我怎么能注意到流已经结束了？我试图在***Read***方法返回 0 时返回 - 这是正确的方法吗？读取文件似乎没问题，但有时会遇到从网络读取数据的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-05T16:15:40.697

是的，重复调用[`Read`](http://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx)并在返回 0 时完成是完全正确的方法。

网络流也很好——它们会阻塞，直到收到任何数据或流断开连接。查看文档`Stream.Read`：

> 仅当位置当前位于流的末尾时，返回值才为零。在没有数据可用的情况下，该实现将阻塞直到可以读取至少一个字节的数据。仅当流中没有更多数据并且不需要更多数据时（例如关闭的套接字或文件结尾），Read 才返回 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T16:03:34.797

对于网络流，如果 Stream.ReadByte() 返回任何小于 0 的值，您就知道流已读到最后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T16:31:28.303

正如乔恩所说，您知道这是文件的结尾，因为它将返回 0 字节。但是，您还必须考虑可能引发的各种异常。因为网络本质上是不可靠的，所以总是可能出现一些例外情况。

例如，如果流断开连接（与另一端简单地关闭套接字相反），那么您可能会收到`IOException`异常。始终将 I/O 调用包装在异常处理程序中，除非您绝对确定它们不会引发异常。

# c# - 如何用秒初始化时间跨度

> ID：719186
> 
> 赞同：26
> 
> 时间：2009-04-05T16:04:59.117
> 
> 标签：c#

我有一个变量（双），可以累积秒数。

我想使用时间跨度将其格式化为小时：分钟：秒以用于显示目的，但我似乎无法找到如何将这个累积值分配给时间空间。

C# .net 2.0

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-04-05T16:06:35.463

使用[TimeSpan.FromSeconds](http://msdn.microsoft.com/en-us/library/system.timespan.fromseconds.aspx)方法。

# c - C：标头中的原型声明和实现的函数声明之间的区别？

> ID：719189
> 
> 赞同：1
> 
> 时间：2009-04-05T16:05:28.007
> 
> 标签：c, prototype, declaration

我想知道在头文件和 .c 文件中声明函数原型之间的细微差别。我有一个带有一些原型函数的头文件和一个带有这些函数的实际实现的一些 .c 文件。我在标题中做了一些更改，只添加了“__restrict”限定符（由 gcc 识别）。我的问题是我是否必须将“__restrict”限定符放在 .c 文件中（目前代码编译，所以我猜答案是否定的，但会感谢一些精确度）。

这对每个 C 限定符都有效吗？我可以在标题中添加一些“const”或“volatile”而不必在 .c 文件中执行相同的操作吗？

目前在标题中：

```
int myfunc_gettype (const mytype *__restrict, int *__restrict); 
```

并在实现文件中：

```
int myfunc_gettype(const mytype *attr, int *type) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-05T16:13:14.633

你**必须**。不匹配会调用未定义的行为。是否有某些原因需要在标题和定义中分别声明？

请注意，关键字`restrict`与供应商扩展名相反`__restrict`（提示：查看`_`关键字名称之前的 's）。您应该坚持使用标准版本以实现可移植性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-05T16:27:01.823

使用 gcc 4.0.1，这取决于 const 是否毫无意义：

```
// Who cares, compiles fine, but irks the maintenance programmer.

// f.h
int f(const int i);

// f.c
int f(int i) { return i += 42; }

// No no no no Your Types Conflict gcc will not stand for it

// f.h
int f(const int *pi);

// f.c
int f(int *pi) { return (*pi)+= 42; } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-04-05T16:25:20.813

注意：您实际上并没有添加 'restrict' 限定符。您只是在原型中有不同的（可选）变量名称。

至于您的问题，如果不匹配的原型与实现一起#included，大多数优秀的 C 编译器都会捕获此错误并引发警告/错误。如果您有不匹配的原型，您可能会看到从细微到即时崩溃的各种问题。

# ajax - AJAX 刷新脚本

> ID：719191
> 
> 赞同：0
> 
> 时间：2009-04-05T16:06:11.517
> 
> 标签：ajax, refresh

我有一些 AJAX 可以刷新我的页面，但也会使刷新的 div 在刷新时上下波动，但我不会这样做，我只是不会刷新。

我将如何编辑此代码以消除 div 的最小化和最大化？

```
var _v = 0;
var _v2 = 1;

    function ajax_update()
    {
        var wrapperId   =   '#content';
        var postFile    =   'jquery.php';
        _v++;
         _v2++;
        $.post(postFile, { v2: _v2 , v: _v}, function(data){$(wrapperId).slideUp('2000',function(){$(this).html(data).slideDown();}).html();});
        setTimeout('ajax_update()', 2000);

    } 
```

谢谢，斯坦尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T16:10:04.860

改变这个：

```
$.post(postFile, { v2: _v2 , v: _v}, function(data){
    $(wrapperId).slideUp('2000',function(){
        $(this).html(data).slideDown();
    }).html();
}); 
```

对此：

```
$.post(postFile, { v2: _v2 , v: _v}, function(data) {
    $(wrapperId).html(data);
}); 
```

编辑：现在将只替换包装器的内容，不会显示/隐藏，只是刷新`$(wrapperId)`.

# javascript - 你怎么能像在 Stackoverflow 中一样制作一个投票赞成按钮？

> ID：719194
> 
> 赞同：32
> 
> 时间：2009-04-05T16:07:30.077
> 
> 标签：javascript, python, html, ajax

**问题**

1.  如何制作一个 Ajax 按钮（向上和向下箭头），使数字可以增加或减少
2.  如何将用户的操作保存到变量 NumberOfVotesOfQuestionID

我不确定是否应该对变量使用数据库。但是，我知道还有一种更简单的方法可以节省选票。

**你怎么能解决这些问题？**

[编辑]

服务器端编程语言是 Python。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2009-04-05T18:55:08.177

这是一个使用 jQuery/Django 的肮脏/未经测试的理论实现。

我们将假设上下投票是针对本网站上的问题/答案，但这显然可以根据您的实际用例进行调整。

### 模板

```
<div id="answer_595" class="answer">
  <img src="vote_up.png" class="vote up">
  <div class="score">0</div>
  <img src="vote_down.png" class="vote down">
  Blah blah blah this is my answer.
</div>

<div id="answer_596" class="answer">
  <img src="vote_up.png" class="vote up">
  <div class="score">0</div>
  <img src="vote_down.png" class="vote down">
  Blah blah blah this is my other answer.
</div> 
```

### Javascript

```
$(function() {
    $('div.answer img.vote').click(function() {
        var id = $(this).parents('div.answer').attr('id').split('_')[1];
        var vote_type = $(this).hasClass('up') ? 'up' : 'down';
        if($(this).hasClass('selected')) {
            $.post('/vote/', {id: id, type: vote_type}, function(json) {
                if(json.success == 'success') {
                    $('#answer_' + id)
                     .find('img.' + vote_type);
                     .attr('src', 'vote_' + vote_type + '_selected.png')
                     .addClass('selected');
                    $('div.score', '#answer_' + id).html(json.score);
                }
            });
        } else {
            $.post('/remove_vote/', {id: id, type: vote_type}, function(json) {
                if(json.success == 'success') {
                    $('#answer_' + id)
                     .find('img.' + vote_type);
                     .attr('src', 'vote_' + vote_type + '.png')
                     .removeClass('selected');
                    $('div.score', '#answer_' + id).html(json.score);
                }
            });                
        }
    });
}); 
```

### Django 视图

```
def vote(request):
    if request.method == 'POST':
        try:
            answer = Answer.objects.get(pk=request.POST['id'])
        except Answer.DoesNotExist:
            return HttpResponse("{'success': 'false'}")

        try:
            vote = Vote.objects.get(answer=answer, user=request.user)
        except Vote.DoesNotExist:
            pass
        else:
            return HttpResponse("{'success': 'false'}")

        if request.POST['type'] == 'up':
            answer.score = answer.score + 1
        else:
            answer.score = answer.score - 1

        answer.save()

        Vote.objects.create(answer=answer,
                            user=request.user,
                            type=request.POST['type'])

        return HttpResponse("{'success':'true', 'score':" + answer.score + "}")
    else:
        raise Http404('What are you doing here?')

def remove_vote(request):
    if request.method == 'POST':
        try:
            answer = Answer.objects.get(pk=request.POST['id'])
        except Answer.DoesNotExist:
            return HttpResponse("{'success': 'false'}")

        try:
            vote = Vote.objects.get(answer=answer, user=request.user)
        except Vote.DoesNotExist:
            return HttpResponse("{'success': 'false'}")
        else:
            vote.delete()

        if request.POST['type'] == 'up':
            answer.score = answer.score - 1
        else:
            answer.score = answer.score + 1

        answer.save()

        return HttpResponse("{'success':'true', 'score':" + answer.score + "}")
    else:
        raise Http404('What are you doing here?') 
```

哎呀。当我开始回答这个问题时，我并不想写这么多，但我有点得意忘形。当页面首次加载等时，您仍然缺少获得所有投票的初始请求，但我将把它作为练习留给读者。无论如何，如果您实际上*正在*使用 Django，并且对 Stackoverflow 投票的更多测试/真实实现感兴趣，我建议您查看 cnprog.com 的[源代码](http://cnprog.googlecode.com/svn/trunk/)，这是一个用 Python/Django 编写的 Stackoverflow 的中文克隆。他们发布了他们的代码，而且相当不错。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-05T20:16:48.807

没有人提到的几点：

*   您不想在更改数据库状态时使用 GET。否则我可以在我的网站上放一张图片`src="http://stackoverflow.com/question_555/vote/up/answer_3/"`。
*   您还需要[csrf（跨站点请求伪造）保护](http://docs.djangoproject.com/en/dev/ref/contrib/csrf/)
*   您必须记录**每次投票**的人，以避免人们为特定问题多次投票。无论是通过 IP 地址还是用户 ID。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-05T17:02:04.847

您创建按钮，可以是链接或图像或其他任何东西。现在将一个 JavaScript 函数连接到每个按钮的单击事件。单击时，该功能会触发并

*   向服务器代码发送一个请求，或多或少，+1 或 -1。
*   服务器代码接管。这将根据您使用（或不使用）的框架以及其他一些东西而有很大差异。
*   代码连接到数据库并运行查询以 +1 或 -1 分数。这将如何发生取决于您的数据库设计，但它会像`UPDATE posts SET score=score+1 WHERE score_id={{insert id here}};`.
*   根据数据库所说的，服务器返回成功代码或失败代码作为 AJAX 请求响应。
*   响应被异步发送到 AJAX。
*   如果是成功代码，JS 响应函数会更新分数，如果是失败则显示错误。

您*可以*将代码存储在变量中，但这很复杂，并且取决于您对代码运行时环境语义的了解程度。无论如何，它最终都需要被推送到持久存储中，因此 100% 使用数据库是一个很好的初始解决方案。当优化性能的时候到了，世界上有足够多的软件来缓存数据库查询，让你感到头晕目眩，所以没什么大不了的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T16:28:28.047

我认为这些问题的答案对 stackoverflow 来说太长了。

我建议将选票存储在数据库中。

您没有提到服务器端编程语言。

请给我们更多信息

[这](http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=109)可能会帮助您入门

# c# - 我怎样才能把类变成一个数组？

> ID：719195
> 
> 赞同：0
> 
> 时间：2009-04-05T16:08:40.323
> 
> 标签：c#, .net, asp.net

我正在寻找一些信息，我找到了这样的方法：

```
public partial class Customer {        
    private string customerIDField;

    private string companyNameField;

    private string contactNameField;

    private string contactTitleField;

    private string addressField;

    private string cityField;

    private string regionField;

    private string postalCodeField;

    private string countryField;

    private string phoneField;

    private string faxField;
    // Other properties
} 
```

然后编码器像这样使用这个类。如何？

```
private static Model.Customer[] BuildCustomers(SqlDataReader reader)
{
    if (reader.HasRows)
    {
        List<Model.Customer> custs = new List<Model.Customer>();
        while (reader.Read())
        {
            Model.Customer cust = new Model.Customer();
            cust.CustomerID = reader["CustomerID"].ToString();
            cust.CompanyName = reader["CompanyName"].ToString();
            cust.ContactName = reader["ContactName"].ToString();
            custs.Add(cust);
        }
        return custs.ToArray();
    }
    return null;
} 
```

我真的很想了解这个编码器如何使用“Customer -----> Model.Customer[]”。有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T16:33:55.660

您是在问如何将`Customer`对象转换为数组？

有几种方法可以做到这一点 - 您在第二段代码中显示的示例`List`通过添加a 构建`Customers`，然后将 a 转换`List`为数组。当您不知道有多少客户时，这很有效，您不断添加到列表中并在最后创建和数组，数组将是正确的大小。

如果您只有一个`customer`对象，您还可以创建一个`customers`使用一个元素调用的数组并向其中添加一个`customer`对象，如下所示：

```
Model.Customer[] customers = new Model.Customer[1];
customers[0] = customer; 
```

或者，更短的方式：

```
Model.Customer[] customers = new Model.Customer[] {customer}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T16:14:33.913

您是否对方法如何返回数组感到困惑？

它只是使用[`List<T>.ToArray()`](http://msdn.microsoft.com/en-us/library/x303t819.aspx). 该列表一次建立一个客户，然后`ToArray()`在最后被调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T16:22:28.373

就像 Jason 所说，您只是从 List<Model.Customer> 返回一个 Model.Customers 数组。可以访问像数组这样的类，那就是使用索引器。

例如：

```
class Foo
{
     public string this [int index]
     {
          get { return new string; }
     }
} 
```

然后像这样使用它：

```
Foo foo = new Foo();
string s = foo[0]; 
```

显然你会想要做一些事情来让 Foo 根据索引返回一些值，但这是实现它的基本方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T16:19:00.860

我不确定你想在这里做什么。

你想要一个客户数组吗？或者您想使用数组类型语法访问客户类中的属性吗？

浏览代码示例（第二个）

该代码制作了一个客户列表，

创建通过 DataReader 填充的单个客户（这表示数据库数据，允许通过其列索引或名称进行访问）

新客户已添加到客户列表中

最后将 List 转换为 Array（作为 List（Generic），它支持转换为 Customer[] 而无需强制转换）。

HTH 骨头

# documentation - 如何让团队更具跨职能？

> ID：719199
> 
> 赞同：0
> 
> 时间：2009-04-05T16:10:11.320
> 
> 标签：documentation, wiki, communication, bug-tracking

我们现在在您的开发过程中遇到的问题是，有几个人没有让团队更具**跨职能**。

因此，有时这些人可能会成为项目某些部分的瓶颈。他们不喜欢将**Wiki**用于共享知识问题，他们不会在问题跟踪系统中为他们的工单发布足够的评论。

由于这个问题，我们的管理层有时不能解雇一些开发人员（即使他们非常想要），因为没有他我们会花很多时间来了解他做了什么。

**我认为，仅通过code-review**无法解决此问题，因为有时无法注意到，没有为票证生成足够的文档，直到您遇到问题。

**在我们的情况下不能应用结**对编程，因为团队是分布式的。****

 **我们在会议上讨论了很多这个问题，但它似乎更像是概念问题。我们能改变这个人的态度吗？如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T16:15:48.357

你说你不能解雇这个开发人员，因为你会花很多时间来加快他们的工作速度。我想知道你每天因为无法沟通而浪费了多少时间。在某些时候，您需要解决一个简单的事实，即仅仅因为某人非常了解问题领域并不意味着他们可以无视规则并为所欲为。

我认为你需要和这个人谈谈，让他们知道要么他们开始遵守规则，要么你将***被迫***让他们离开。如果你一直这样下去，你最终会浪费更多的时间来处理他们的行为，那么你就会让别人加快他们的代码速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T16:16:16.610

学会无情。如果人们没有按照你的商店定义的流程来损害团队，他们就需要离开。在您通知团队“成员”他们的工作问题后，有一段试用期。如果此人仍然不遵守程序，请按照您在会议期间通知他们问题的任何后果进行。

这不仅是现在的问题，而且对您团队的未来来说是一个巨大的问题。如果这个人拒绝尽自己的本分，他们将拒绝，直到被解雇。你现在拥有的知识差距是可以弥补的，但是如果你让这个人继续留任，就会产生知识差距，因为它会一直持续到这个人成型或被放手。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T16:22:07.547

这听起来不太跨职能，更多的是让所有团队成员都遵循您商定的流程。

我建议回到你的过程的开始，让每个人都参与进来，并支持你的开发过程是如何运作的。包括前面提到的“不能被解雇”的开发者。如果不同意参与的开发者不被包括在内，他的投票就是同谋。

如果开发人员在那之后不遵循流程，那就是决策时间：什么更有价值——开发人员的输出（尽管在您的流程之外）还是遵循开发流程？

我可以大胆猜测：没有人是不可替代的。如果你的开发过程很重要，而有人不参与，那就把他们送出去。了解开发人员做了什么问题是一个短期问题，可以解决/管理。

# pixelsense - 如何检测表面接触是否在 ScatterView 上方？

> ID：719218
> 
> 赞同：1
> 
> 时间：2009-04-05T16:17:29.460
> 
> 标签：pixelsense, visualtreehelper

这与 MS Surface 的 SDK 示例购物车中的（某种）类似情况。

我有一个带有两个 ScatterViews 的应用程序。第一个覆盖整个 Surface 窗口（“表面”）。第二个驻留在 TagVisualization 对象（“pod”）中。可能有多个可用的 pod（如果桌子上有多个标签）。

我希望能够将 ScatterViewItem 从“吊舱”拖到“表面”或另一个“吊舱”。我在检测 ScatterViewItem 是否离开其 ScatterView 父项方面没有问题。此外，重新设置 ScatterViewItem 也没有问题。

但是，我想检测该项目被拖动到哪个 ScatterView 上。在 SDK 示例中，他们使用了位于 ScatterViews 下方的可视元素（在本例中为椭圆）。VisualTreeHelper.HitTest 用于确定接触是否在椭圆上。如果是这样，则找到“已连接”的 ScatterView。

我不认为这是一个非常优雅的解决方案。我不希望在其中放置视觉元素，只是为了检测联系人是否在 ScatterView 上。

有没有更好的方法来完成这种“命中测试”？

谢谢，巴特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T20:50:11.583

嗯，首先，我有一种预感，Surface 的拖放功能很快就会变得更容易，所以我不会花太多时间担心附加元素。

但更多地将其视为一个一般性问题 - 您不一定必须添加视觉元素来进行命中测试，但命中测试仍将是确定在给定点是否存在特定元素的最佳方法。

您所说的示例不仅添加了用于命中测试的椭圆，还用作“吊舱”的背景。所以他们只想在接触超过那个椭圆时处理下降，因为那个椭圆定义了边界。另一条路线可能是设置散点图的背景，并针对该控件进行命中测试。然后，如果您想将“pod”的边界更改为矩形以外的其他内容，则需要将剪切路径应用于 scatterview。

# jquery - jquery 手风琴更改事件缺少新内容

> ID：719221
> 
> 赞同：0
> 
> 时间：2009-04-05T16:18:00.800
> 
> 标签：jquery, jquery-ui, accordion

我第一次使用 jQuery UI 手风琴，我想我在这里遗漏了一些东西。我写了以下代码：

```
 <div id="theAccordion">
        <h2><a href="#">Header1</a></h2>
        <div>old content 1</div>
        <h2><a href="#">Header2</a></h2>
        <div>old content 2</div>
        <h2><a href="#">Header3</a></h2>
        <div>old content 3</div>
        <h2><a href="#">Header4</a></h2>
        <div>old content 4</div>
        <h2><a href="#">Header5</a></h2>
        <div>old content 5</div>
    </div>
<script type="text/javascript">
    var map = {
        Header1: function(jqObj) { jqObj.append("<p>new content 1</p>"); },
        Header2: function(jqObj) { jqObj.append("<p>new content 2</p>"); },
        Header3: function(jqObj) { jqObj.append("<p>new content 3</p>"); },
        Header4: function(jqObj) { jqObj.append("<p>new content 4</p>"); },
        Header5: function(jqObj) { jqObj.append("<p>new content 5</p>"); }
    };
    function accordionChange(event, ui) {
        ui.newContent.empty();
        eval("map." + ui.newHeader.text() + "(ui.newContent)");
    }
    $(function() {
        $("#theAccordion").accordion({
            change: function(event, ui) { accordionChange(event, ui); }
        });
    });
</script> 
```

代码按预期工作，它触发地图功能，但没有代码附加到手风琴内容，因为 newContent 对象似乎一直是空的。我正在使用 IE8 调试工具对其进行调试，并且 jqObj.length 为零，因此对新内容没有任何更改。你知道这里发生了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T17:06:06.193

找到了解决方案！

在内容中添加一个段落解决了问题，所以更改的代码是这样的

```
<div id="theAccordion">
    <h2><a href="#">Header1</a></h2>
    <div><p>old content 1</p></div>
    <h2><a href="#">Header2</a></h2>
    <div><p>old content 2</p></div>
    <h2><a href="#">Header3</a></h2>
    <div><p>old content 3</p></div>
    <h2><a href="#">Header4</a></h2> 
    <div><p>old content 4</p></div>
    <h2><a href="#">Header5</a></h2>
    <div><p>old content 5</p></div>
</div> 
```

感谢你的帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-24T09:43:12.637

实际上——你遇到了麻烦，因为手风琴小部件中有一个错误。我刚才做了一个补丁：[http ://dev.jqueryui.com/ticket/4469#comment:4](http://dev.jqueryui.com/ticket/4469#comment:4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T16:37:25.467

它可能与绑定有关，但我不确定。您是否尝试过将实际功能代码放入手风琴初始化中。请注意，我还将 append() 更改为 html() ，因为您的原始内容未包含在`p`.

```
var map = {
    Header1: function(jqObj) { jqObj.html("new content 1"); },
    Header2: function(jqObj) { jqObj.html("new content 2"); },
    Header3: function(jqObj) { jqObj.html("new content 3"); },
    Header4: function(jqObj) { jqObj.html("new content 4"); },
    Header5: function(jqObj) { jqObj.html("new content 5"); }
};

$(function() {
    $("#theAccordion").accordion({
        change: function(event, ui) {
            ui.newContent.empty();
            eval( "map." + ui.newHeader.text() + "(ui.newContent)");
        }
    });
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T16:44:34.013

可能是因为您在使用之前将其清空吗？IE：

```
ui.newContent.empty();
eval( "map." + ui.newHeader.text() + "(ui.newContent)"); 
```

尝试将手风琴更改回调替换为：

```
function accordionChange(event, ui) {
    var text = ui.newContent.text();
    ui.newContent.empty();
    eval("map." + ui.newHeader.text() + "(text)");
} 
```

# database - 在关系数据库中建模不同的用户类型

> ID：719226
> 
> 赞同：2
> 
> 时间：2009-04-05T16:20:31.217
> 
> 标签：database, inheritance, modeling

首先，我很抱歉这个问题的反馈性质。我试图尽可能地概括它，以便其他人也可以从中受益，但我真的没有人给我关于这个设计的反馈，所以我希望你们能帮助我。

话虽如此，我不想在我的数据库中对不同的用户类型进行建模。我想要共享用户类型的凭据。这个问题基本上是关于继承的，这是 RDB 做得不太好的事情。

然而我确实想出了这个设计： [DB设计http://img48.imageshack.us/img48/9196/dbdesign.png](http://img48.imageshack.us/img48/9196/dbdesign.png)

..但我不确定我是否应该对此感到满意。我不喜欢它的商业合同的数量。首先，我不知道哪个用户类型属于给定的凭证，这意味着我可能需要搜索 N 个表，其中 N 是我得到的用户类型的数量。因此，我想将用户的类型与他或她所在的角色联系起来。因此，如果具有凭据 A 的用户具有“UserType1”和“UserType2”的角色，我希望在 UserType1 和代表他或她的 UserType2 表。- 而且我不确定我是否喜欢这些“业务逻辑”-约束.. :)

非常感谢您对此给定设计的任何反馈，就像任何替代设计一样。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-05T16:59:35.943

如果它类似于 OO 中的抽象类，您可以在父级中放置一个鉴别器列。对于每个子类型，鉴别器具有不同的值。如果您很聪明，那么对于每个子类型只有一行的表来说，这是一个 fk。

或者，您可以仅仅依赖于任何 usertype1 的 authcredentials 到 usertype1 的连接成功，但对于其他子类型不成功，对于其他表也是如此。在每个子表的左外连接上，它不是类型的所有列（尤其是 id）都为 null，并且它的 id 不为 null。然后，您可以基于此添加计算列：

```
select 
 a.*, b.*, c.*, 
 case when b.id is not null then 1 else 0 end as is_usertype1, 
 case when c.id is not null then 1 else 0 end as is_usertype2,
from authcredentials a 
 left outer join usertype1 b on (a.id = b.authcredential_id )
 left outer join usertype2 c on (a.id = c.authcredential_id ); 
```

然后选择一个易于使用的视图。插入仍将是单独的表 usertype 和 usertype2，但是在 OO 编程中，ctor 也不会被继承，并且基于 common 的两个子类不一定具有相似的 ctor。

就像在 C++ 中，基类在派生类之前构造，您必须先创建父行，然后才能创建子行（您需要 FK）。

postgresql 像这样显式地支持表继承。Hibernate ORM 支持将表映射到 Java 子类。

# c# - 在 Asp.Net 中创建部分类

> ID：719236
> 
> 赞同：0
> 
> 时间：2009-04-05T16:23:30.587
> 
> 标签：c#, asp.net, partial-classes

我有一个小型网络应用程序。

这就是我想要做的：创建部分类来拆分文件背后的代码。为什么我不能直接创建部分类？

如果这是代码隐藏文件：

```
using System;
using System.Configuration....

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Test();
    }
} 
```

并创建这个类：

```
public partial class _Default
{
    public void Test()
    {
    }
} 
```

我收到一条错误消息，当前上下文中不存在测试。

为什么是这样？

如果我创建几个从 System.Web.UI.Page 继承的部分类，然后从这个类继承我的代码隐藏文件（部分类的结果），我可以让一切正常工作。这是唯一的方法吗？

代码隐藏和aspx页面被动态编译成一个类有什么关系吗？

如果有人能回答我的问题，将不胜感激。事情现在正在解决，但我更愿意在与代码隐藏相同的“级别”上创建部分类，并避免使用继承。

谢谢/约翰

（请注意，我在两个类前面都有下划线，但在预览中只有一个可见，我不知道为什么..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T17:28:13.720

1）将您的部分类放在 app_code 目录中（我从未尝试过）
2）将您的应用程序从网站项目转换为 Web 应用程序项目

WAP 更像是一个 dll 或 winforms 项目，它在运行前编译（尽管 ui 可以更新）并将类放在命名空间中。网站项目是使用 aspnet_compiler 编译的，它的运行方式（例如，动态命名的程序集）与标准编译器不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T17:11:51.500

如果它们不起作用，它们应该在同一个命名空间上。

最好的祝福！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T17:44:37.737

好的。好吧，这不是名称空间问题，但感谢您的建议。

当我创建一个 Web 应用程序而不是一个网站时，一切正常，非常感谢。

默认情况下，当我开始新项目时，我总是选择创建新网站，我以前从未遇到过任何问题。

所以我当然要问除了上面提到的有什么区别吗？

总是使用 Web 应用程序项目而不是网站项目会有什么缺点吗？

谢谢/约翰

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-01T05:29:21.620

答案位于 default.aspx 第一行：

```
Language="C#" CodeBehind="Default.aspx.cs" ... 
```

将设置每个部分类工作。

反而，

```
Language="C#" CodeFile="Default.aspx.cs" ... 
```

会导致偏类出错。

但是，在 vs2017 old-style-webForm 中只能使用 CodeFile，所以你必须尝试另一种方式：创建一个文件 ..\WebF8\App_Code\Class3.cs，内容为：

```
 public static class Class3 {
            public static int gg3=33;
     } 
```

那么你就可以在 default.aspx.cs 中正确看到 Class3.gg3 了。注意，这个 Class3.cs 文件必须在 \App_Code 文件夹中。

# bug-tracking - 票证/错误格式有多重要？

> ID：719237
> 
> 赞同：4
> 
> 时间：2009-04-05T16:23:35.110
> 
> 标签：bug-tracking, issue-tracking

格式化错误报告有多重要？它应该包含什么？

我通常在错误报告中看到以下部分：

*   重现步骤
*   我所看到的
*   我必须看到的
*   解释

格式化错误报告的最佳解决方案是什么以及它应该包含什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-05T16:32:13.043

最重要的是跟踪问题。如果它被跟踪，它就不会被遗忘。

格式是锦上添花。

那说：

*   重现步骤
*   硬件运行
*   操作系统版本、软件版本
*   它正在做什么与它应该做什么

这些很重要。

此外，门票永远不应该被删除，只需解释一下即可。输入工单的信息永远不应该被删除，只是被标记为错误的。这一切都是为了跟踪问题的生命周期。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-08T11:07:14.763

# **错误报告格式指南**

为了清楚地跟踪我们在 Rawr 中有哪些错误和功能请求，我们要求用户在将错误发布到问题跟踪器时提供以下信息。

*   **标题**- 这应该概述错误所在的类别（模型，如果它是特定于模型的，或者高级功能，如比较、优化器等），并简要描述问题。如果不确定类别，只需将其关闭，我们将根据需要进行调整。
*   **描述**- 这应该不再是一个段落，它应该快速概述什么是坏的/不工作的。
*   **重现步骤**- 听起来确实如此，这些是重现相关错误的步骤。您应该从启动应用程序开始。
*   **版本号/附加信息**- 您正在运行的 Rawr 版本、您的操作系统、堆栈跟踪和错误消息。请注意，大型错误消息（例如在 Rawr 崩溃期间通常产生的错误消息）应保存到 error.txt 文件并附加到问题中，而不是发布到描述中。这为打算解决该问题的开发人员提供了更清晰的格式和更少的滚动。
*   **详细信息**- 在页面右侧，请填写类型（问题）、发布（版本号）和组件（如果有）。
*   **附件**- 附上重现问题的角色文件。

## **例子**

**标题：** [项目编辑器] 项目编辑崩溃
**描述：**当我编辑 helm 项目时，Rawr 崩溃。
**重现步骤：**

1.  启动 Rawr
2.  工具 > 编辑项目
3.  选择血牙面具
4.  将敏捷值从 112 更改为 113
5.  单击“确定”按钮
6.  观察 Rawr 崩溃

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-05T19:59:47.040

归根结底，格式的重点是确保人们始终如一地包含足够的信息来重现或调试问题。如果您不强制执行某种格式，人们会使用任何想到的格式。对于对软件开发过程有很好理解的组织良好的人，他们可能会自己包含所有相关信息。

另一方面，在许多情况下，您会收到来自整个组织甚至直接来自用户的错误报告。或者就此而言，有些人可能只是匆忙而没有某种标准格式作为指导，您可能会收到诸如“应用程序无法正常工作”之类的错误报告等。在一天结束时，不管foramt，您只需要最少量的必要信息来确定所报告的确切问题是什么（它在哪里，什么时候发生，如何重现它）并使您能够调试它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-05T20:09:36.250

实际上，我认为最重要的是确保您使用的术语易于搜索。大多数重复的错误将来自使用非标准术语。

至于确切的格式，我认为这并不重要。可以以任何格式创建可怕的票证。

只要有有助于将其引导给正确的人的基本元数据（什么组件、什么平台和重要性），其他一切都只是锦上添花，文字叙述就足够了。

我认为大多数程序员都足够擅长弄清楚什么是相关的。如果我的 Web 应用程序有问题，我会报告浏览器版本，但不必提及我正在使用多少个处理器或我的确切操作系统版本是什么。如果我可以提炼它们，我会提到重现的步骤，等等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-04-12T16:33:31.917

我见过的最好的书面观点之一是 Simon Tatham（PuTTY 的作者）： http: [//www.chiark.greenend.org.uk/~sgtatham/bugs.html](http://www.chiark.greenend.org.uk/%7Esgtatham/bugs.html)。

* * *

# 如何有效地报告错误

作者：Simon Tatham，专业的自由软件程序员

## 介绍

任何编写过供公众使用的软件的人都可能至少收到过一份糟糕的错误报告。什么都不说的报告（“它不起作用！”）；毫无意义的报告；没有提供足够信息的报告；提供错误信息的报告。报告最终是用户错误的问题；报告原来是其他人的程序错误的问题；报告最终是网络故障的问题。

技术支持被视为一项可怕的工作是有原因的，原因是糟糕的错误报告。然而，并不是所有的错误报告都令人不快：我维护自由软件，当我不谋生时，有时我会收到非常清晰、有用、信息丰富的错误报告。

在这篇文章中，我将尝试清楚地说明什么是好的错误报告。理想情况下，我希望世界上的每个人在向任何人报告任何错误之前都阅读这篇文章。当然，我希望向我报告错误的每个人都阅读它。

简而言之，错误报告的目的是使程序员能够看到程序在他们面前失败。您可以亲自向他们展示，也可以向他们提供有关如何使其失败的详细说明。如果他们可以让它失败，他们将尝试收集额外的信息，直到他们知道原因。如果他们不能让它失败，他们将不得不要求您为他们收集这些信息。

在错误报告中，尽量清楚地说明什么是实际事实（“我在电脑前，这件事发生了”）以及什么是推测（“我认为问题可能是这个”）。如果您愿意，请忽略猜测，但不要忽略事实。

当您报告错误时，您这样做是因为您希望修复错误。对程序员发誓或故意无助是没有意义的：这可能是他们的错和你的问题，你可能对他们生气是对的，但如果你通过提供所有信息来帮助他们，这个错误会更快得到修复他们需要。还要记住，如果程序是免费的，那么作者提供它是出于好意，所以如果有太多人对他们粗鲁，他们可能会停止友好。

## “这行不通。”

给程序员一些基本智能的功劳：如果程序真的根本不起作用，他们可能会注意到。既然他们没有注意到，那肯定对他们有用。因此，要么你做的事情与他们不同，要么你的环境与他们不同。他们需要信息；提供此信息是错误报告的目的。更多信息几乎总是比更少信息好。

许多程序，尤其是免费程序，都会发布他们的已知错误列表。如果您可以找到已知错误的列表，则值得阅读它以查看您刚刚发现的错误是否已知。如果它已经知道，则可能不值得再次报告，但如果您认为您的信息比错误列表中的报告更多，您可能还是想联系程序员。如果您可以向他们提供他们还没有的信息，他们可能能够更轻松地修复错误。

这篇文章充满了指导方针。它们都不是绝对规则。特定的程序员有他们喜欢报告错误的特定方式。如果该程序带有自己的一套错误报告指南，请阅读它们。如果程序随附的指南与本文中的指南相矛盾，请遵循程序随附的指南！

如果您没有报告错误而只是寻求使用该程序的帮助，您应该说明您已经在哪里寻找问题的答案。（“我查看了第 4 章和第 5.2 节，但找不到任何告诉我这是否可能的信息。”）这将使程序员知道人们期望在哪里找到答案，因此他们可以使文档更易于使用.

## “给我看看。”

报告错误的最佳方法之一是将其展示给程序员。让他们站在你的电脑前，启动他们的软件，并演示出问题的地方。让他们观察你启动机器，观察你运行软件，观察你如何与软件交互，观察软件如何响应你的输入。

他们对软件了如指掌。他们知道自己信任哪些部件，也知道哪些部件可能出现故障。他们凭直觉知道要注意什么。当软件做一些明显错误的事情时，他们很可能早就注意到了一些微妙的错误，这可能会给他们一个线索。他们可以观察计算机在测试运行期间所做的一切，并且可以自己挑选出重要的部分。

这可能还不够。他们可能会决定他们需要更多信息，并要求您再次向他们展示相同的信息。他们可能会要求您与他们讨论整个过程，以便他们可以根据需要多次为自己重现错误。他们可能会尝试改变程序几次，以查看问题是仅发生在一个案例中还是在一系列相关案例中。如果你不走运，他们可能需要用一套开发工具坐下来几个小时，然后真正开始调查。但最重要的是让程序员在计算机出错时查看计算机。一旦他们看到问题正在发生，他们通常可以从那里着手并开始尝试修复它。

## “告诉我如何展示自己。”

这是互联网时代。这是全球通信的时代。在这个时代，我只需按一下按钮就可以将我的软件发送给俄罗斯的某人，他也可以很容易地向我发送有关它的评论。但是如果他对我的程序有问题，他不能让我在它失败时站在它前面。可以时“给我看”很好，但通常不能。

如果您必须向不能亲自到场的程序员报告错误，那么练习的目的是让他们重现问题。您希望程序员运行他们自己的程序副本，对其执行相同的操作，并以相同的方式使其失败。当他们能看到眼前发生的问题时，他们就可以处理它。

所以告诉他们你做了什么。如果是图形程序，请告诉他们您按了哪些按钮以及按的顺序。如果是您通过键入命令运行的程序，请准确地向他们显示您键入的命令。只要有可能，您应该提供会话的逐字记录，显示您键入的命令以及计算机输出的响应内容。

给程序员你能想到的所有输入。如果程序从文件中读取，您可能需要发送该文件的副本。如果程序通过网络与另一台计算机通信，您可能无法发送该计算机的副本，但您至少可以说出它是什么类型的计算机，以及（如果可以的话）上面运行的是什么软件。

## “对我有用。所以出了什么问题？”

如果你给程序员一长串输入和动作，他们启动了自己的程序副本并且没有出错，那么你没有给他们足够的信息。可能故障不会出现在每台计算机上；您的系统和他们的系统可能在某些方面有所不同。可能你误解了程序应该做什么，并且你们都在看完全相同的显示，但你认为这是错误的，他们知道这是正确的。

所以还要描述发生了什么。准确地告诉他们你看到了什么。告诉他们为什么你认为你看到的东西是错的；更好的是，准确地告诉他们您希望看到的内容。如果您说“然后它出错了”，那么您遗漏了一些非常重要的信息。

如果您看到错误消息，请仔细而准确地告诉程序员它们是什么。他们很重要！在这个阶段，程序员并没有试图解决问题：他们只是试图找到它。他们需要知道出了什么问题，而这些错误消息是计算机告诉您的最大努力。如果您没有其他简单的方法来记住错误，请将它们写下来，但是除非您还可以报告错误消息是什么，否则不值得报告程序产生了错误。

特别是，如果错误消息中有数字，请让程序员拥有这些数字。仅仅因为你看不到它们的任何意义并不意味着没有任何意义。数字包含了程序员可以阅读的各种信息，并且很可能包含重要的线索。错误消息中有数字是因为计算机太混乱而无法用文字报告错误，但它正在尽最大努力以某种方式将重要信息提供给您。

在这个阶段，程序员正在有效地做侦探工作。他们不知道发生了什么，也无法靠得足够近自己亲眼目睹，因此他们正在寻找可能泄露事件的线索。错误信息、难以理解的数字串，甚至无法解释的延误都与犯罪现场的指纹一样重要。保留它们！

如果您使用的是 Unix，则该程序可能已生成核心转储。核心转储是一个特别好的线索来源，所以不要把它们扔掉。另一方面，大多数程序员不喜欢在没有警告的情况下通过电子邮件接收巨大的核心文件，所以在给任何人邮寄之前先问清楚。此外，请注意核心文件包含程序完整状态的记录：任何涉及的“秘密”（可能程序正在处理个人消息，或处理机密数据）都可能包含在核心文件中。

## “那我试着……”

当出现错误或错误时，您可能会做很多事情。他们中的许多人使问题变得更糟。我在学校的一个朋友错误地删除了她所有的 Word 文档，在寻求专家帮助之前，她尝试重新安装 Word，然后尝试运行 Defrag。这些都没有帮助恢复她的文件，并且在他们之间他们对她的磁盘进行了加扰，以至于世界上没有任何 Undelete 程序能够恢复任何东西。如果她只是不理会它，她可能还有机会。

像这样的用户就像一只被逼到墙角的猫鼬：背对着墙，看到死神盯着它的脸，它疯狂地攻击，因为做某事总比什么都不做要好。这不能很好地适应计算机产生的问题类型。

与其做一只猫鼬，不如做一只羚羊。当羚羊遇到意想不到或可怕的事情时，它会僵住。它保持绝对静止并尽量不吸引任何注意力，而它会停下来思考并找出最好的办法。（如果羚羊有技术支持热线，它会在此时给它打电话。）然后，一旦它决定了最安全的做法是什么，它就会去做。

当出现问题时，立即停止做任何事情。根本不要触摸任何按钮。看着屏幕，注意所有不寻常的事情，然后记住或写下来。然后也许开始小心地按“确定”或“取消”，以最安全的为准。试着发展一种反射反应——如果电脑做了任何意想不到的事情，就停下来。

如果您设法摆脱问题，无论是通过关闭受影响的程序还是通过重新启动计算机，最好的办法是尝试让它再次发生。程序员喜欢可以多次重现的问题。快乐的程序员可以更快、更有效地修复错误。

## “我认为快子调制一定是被错误地极化了。”

不只是非程序员会产生糟糕的错误报告。我见过的一些最糟糕的错误报告来自程序员，甚至来自优秀的程序员。

我曾经和另一个程序员一起工作过，他一直在自己的代码中发现错误并试图修复它们。每隔一段时间，他就会遇到一个他无法解决的错误，他会叫我过来帮忙。“怎么了？” 我会问。他会告诉我他目前对需要解决的问题的看法。

当他目前的意见正确时，这很好。这意味着他已经完成了一半的工作，我们能够一起完成工作。这是有效和有用的。

但很多时候他是错的。我们会工作一段时间试图弄清楚为什么程序的某些特定部分会产生不正确的数据，最终我们会发现不是这样，我们已经研究了半个小时的完美代码，并且实际问题出在其他地方。

我敢肯定他不会对医生那样做。“医生，我需要一张Hydroyoyodyne的处方。” 人们知道不要对医生这么说：你描述症状、实际的不适、疼痛、皮疹和发烧，然后让医生诊断问题所在以及如何处理。否则，医生会认为你是一个疑病症或疯子，这是完全正确的。

程序员也是一样。提供您自己的诊断有时可能会有所帮助，但请务必说明症状。诊断是可选的附加项，而不是给出症状的替代方案。同样，发送对代码的修改以解决问题是对错误报告的有用补充，但不足以替代错误报告。

如果程序员要求您提供额外信息，请不要编造！有人向我报告了一个错误，我让他尝试一个我知道不会起作用的命令。我让他尝试的原因是我想知道它会给出两种不同的错误信息中的哪一种。知道返回的错误消息将提供重要线索。但他实际上并没有尝试过——他只是给我回了邮件说“不，那行不通”。我花了一些时间说服他真正尝试一下。

用你的智慧来帮助程序员很好。即使你的推论是错误的，程序员也应该感激你至少试图让他们的生活更轻松。但也要报告症状，否则你可能会让他们的生活变得更加困难。

## “这很有趣，它刚刚做到了。”

对任何程序员说“间歇性故障”，然后看着他们的脸掉下来。简单的问题是执行简单的操作序列会导致故障发生的问题。然后，程序员可以在密切观察的测试条件下重复这些操作，并详细观察发生的情况。太多的问题根本就不是这样工作的：会有程序每周失败一次，或者在蓝月亮中失败一次，或者当你在程序员面前尝试它们时永远不会失败，但当你有最后期限时总是失败向上。

大多数间歇性故障并不是真正的间歇性。他们中的大多数在某个地方都有一些逻辑。有些可能在机器内存不足时发生，有些可能在另一个程序尝试在错误的时刻修改关键文件时发生，有些可能仅在每小时的前半段发生！（我实际上见过其中之一。）

此外，如果您可以重现错误但程序员不能重现，则很可能是他们的计算机和您的计算机在某些方面有所不同，而这种差异导致了问题。我曾经有一个程序，它的窗口在屏幕左上角蜷缩成一个小球，然后坐在那里闷闷不乐。但它只在 800x600 屏幕上做到了；在我的 1024x768 显示器上很好。

程序员会想知道你能找到的关于这个问题的任何事情。也许在另一台机器上试试。尝试两次或三次，看看失败的频率。如果它在你做严肃的工作时出错，但在你试图展示它的时候却没有，可能是运行时间长或文件太大导致它崩溃。尝试尽可能多地记住当它倒下时你对它所做的事情的详细信息，如果你看到任何模式，请提及它们。你能提供的任何东西都必须是一些帮助。即使它只是概率性的（例如“当 Emacs 运行时它往往会更频繁地崩溃”），它可能无法提供问题原因的直接线索，但它可能有助于程序员重现它。

最重要的是，程序员需要确定他们处理的是真正的间歇性故障还是特定于机器的故障。他们会想知道有关您的计算机的许多详细信息，以便他们可以弄清楚它与他们的计算机有何不同。许多这些细节将取决于特定的程序，但您绝对应该准备好提供的一件事是版本号。程序本身的版本号，操作系统的版本号，以及可能涉及问题的任何其他程序的版本号。“所以我将磁盘加载到我的 Windows 上……”

在错误报告中写清楚是必不可少的。如果程序员不能说出你的意思，你还不如什么都没说。

我收到来自世界各地的错误报告。他们中的许多人来自非英语为母语的人，其中很多人为他们糟糕的英语道歉。一般来说，为他们的英语糟糕而道歉的错误报告实际上非常清晰和有用。所有最不明确的报告都来自以英语为母语的人，他们认为我会理解他们，即使他们不努力清楚或准确。

*   请明确点。如果您可以用两种不同的方式做同样的事情，请说明您使用的是哪一种。“我选择了加载”可能意味着“我点击了加载”或“我按下了 Alt-L”。说你做了什么。有时这很重要。
*   详细一点。提供更多而不是更少的信息。如果你说的太多，程序员可以忽略其中的一些。如果你说的太少，他们必须回来问更多的问题。我收到的一个错误报告是一句话；每次我问更多的信息，记者都会再回复一句。我花了几个星期才获得大量有用的信息，因为它一次只出现一个简短的句子。
*   小心代词。当不清楚它们的意思时，不要使用像“它”这样的词，或者像“窗户”这样的引用。考虑一下：“我启动了 FooApp。它打开了一个警告窗口。我试图关闭它，但它崩溃了。” 目前尚不清楚用户试图关闭什么。他们是试图关闭警告窗口，还是关闭整个 FooApp？它有所作为。相反，您可以说“我启动了 FooApp，它显示了一个警告窗口。我试图关闭警告窗口，结果 FooApp 崩溃了。” 这更长，更重复，但也更清晰，更不容易误解。
*   读你写的。把报告读给自己听，看看你是否认为它很清楚。如果您列出了一系列应该导致失败的操作，请尝试自己遵循它们，看看您是否错过了一个步骤。

## 概括

*   错误报告的第一个目的是让程序员亲眼看到失败。如果你不能和他们一起让它在他们面前失败，给他们详细的指示，让他们自己让它失败。
*   如果第一个目标没有成功，而程序员自己也看不到它失败了，那么错误报告的第二个目标就是描述哪里出了问题。详细描述一切。陈述你看到的，也陈述你期望看到的。写下错误消息，尤其是如果它们有数字。
*   当您的计算机出现意外情况时，请冻结。在你冷静之前什么都不做，不要做任何你认为可能有危险的事情。
*   如果您认为可以，请务必尝试自己诊断故障，但如果您这样做了，您仍然应该报告症状。
*   如果程序员需要，请准备好提供额外信息。如果他们不需要它，他们就不会要求它。他们不是故意尴尬。让版本号触手可及，因为它们可能会被需要。
*   写清楚。说出你的意思，并确保它不会被误解。
*   最重要的是，要精确。程序员喜欢精确。

* * *

免责声明：我从未真正见过猫鼬或羚羊。我的动物学可能不准确。

`$Id: bugs.html 8168 2008-09-08 18:03:28Z simon $`

版权所有 © 1999 Simon Tatham。该文档是[OpenContent](http://www.opencontent.org)。[您可以根据OpenContent 许可](http://www.opencontent.org/opl.shtml)的条款复制和使用文本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-04-13T08:29:42.787

同样重要的是了解世卫组织实际上可以查看和填充诸如“复制步骤”之类的问题字段。问错人，他们会给你垃圾数据。

[这里有一些有用的建议](http://bit.ly/cYy7kT)

# sql-server - MCITP的价值：数据库开发者/管理员

> ID：719239
> 
> 赞同：3
> 
> 时间：2009-04-05T16:24:15.700
> 
> 标签：sql-server, certificate

我的目标是这两个证书。但我真的不知道它们如何影响我的简历，当然还有我的薪水。

它们真的有价值吗？他们在你得到它之前和之后对你的工作和职位有影响吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-13T14:22:25.853

这个问题有几个部分：

**但我真的不知道它们如何影响我的简历，**

证书就像锦上添花，但没有人只想吃锦上添花。

如果这是你简历上最好的东西，那么它就是一种帮助。例如，如果您刚从大学毕业并且经验为零，那么这些认证表明您已经学习了一种新的和相关的技术。大学不会教授这些证书所涵盖的相同信息足迹 - 大学学位非常适合您正在做的事情背后的理论，并且证书更适用于您作为开发人员或 DBA 的实际操作在那个特定的技术上。

但是，它不如真正的体验好。如果您有 2 年的实际数据库开发或管理经验，那么在大多数情况下，这可能胜过证书。

**当然还有我的薪水。**

这不会很重要。如果您可以在四个周末的咨询与四个周末的证书学习之间做出选择，那么您将从咨询中获得更多收益。从理论上讲，证书会提高您的计费率，但如果您甚至提出这个问题，那么您的职业生涯还没有到这会有所作为。

相反，去问问你的经理他们希望在接下来的两个月内能完成什么。告诉他们你愿意在你的业余时间承担他们的宠物项目来帮助你们俩。交付一些新代码，一些新实用程序，清理数据库，保存许可，不管它是什么，与获得证书相比，你更有可能获得加薪。

当你选择副项目时，选择一些你可以放在简历上的东西。“通过成功的服务器整合项目将许可成本降低了 12 万美元”比“MCITP”更能说明雇主的意思。

**它们真的有价值吗？**

容易得到的东西没有价值。一些证书（如 Microsoft Certified Master）很有价值。那些你可以在几个周末的学习中得到的——不是那么有价值。

**他们对你的工作有影响吗**

不，但是您为准备这些考试所做的学习将对您的工作产生影响。在学习过程中，您将学习可以在开发/DBA 工作中利用的技巧、技巧和功能。

**以及你得到它之前和之后的位置？**

如果你认为只要出示 MCITP 就能获得加薪，那你就错了。请您的经理对您的工作进行坦率和诚实的评价。告诉他们你想确保你的事业不断发展，并且你想听听他们对你下一步应该做什么的建议。如果你不喜欢你的经理，问问你的导师——找一个已经在做你希望做的事情的程序员，问问他们他们是怎么做到的。这可能不是通过获得证书。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T12:43:15.177

这取决于你在职业生涯中的位置。

对于入门级职位，那绝对是肯定的。这些课程涵盖了足够多的材料，以便您了解有关 SQL Server 的方法，但证书不会使您成为专家。拥有认证还显示了基本的能力水平。

如果您在职业生涯中走得更远，并且您是 SQL DBA 或开发人员，并且已经使用过几个版本的 SQL，那么如果您想要了解最新的差异，那么它们可能就不那么有价值了新功能。

尽管如此，如果您想走上成为认证培训师的道路，或者您的组织想要成为 Microsoft 合作伙伴，那么认证是必须的。

然后是*我是独家俱乐部的成员吹牛的权利*。根据[这些公布的微软数字](http://www.microsoft.com/learning/mcp/certified.mspx) ，2008 年只有 228 名获得认证的数据库管理员，而 2008 年只有 3,233 名获得认证的开发人员。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-12T18:49:46.233

他们可能是您和另一位求职者之间的决胜局，这在当今更为重要。

您的经验无关紧要，尽管您拥有的越多考试就越容易。

最大的问题是批评者和反对者：“容易”、“一文不值”、“只有微软”等

*   如果它那么容易，为什么不拥有它？
*   既然这么不值钱，为什么那么多人去买？

它表现出对学习和自我发展的兴趣，这并不像你想象的那么普遍。以及准备将自己的时间和金钱投入到你的职业生涯中。

顺便说一句，自 2002 年以来，我一直是 SQL Server 2000 MCDBA，也参加了 7 次 MCSE 考试中的 6 次：我必须升级我的...

编辑，2018 年 2 月

我认为它们现在贬值了。经验和知识现在更重要

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-09T01:09:14.127

这里提出了一些好的观点。我同意认证是锦上添花——它肯定比没有结冰的蛋糕做得更好，但没有结冰的蛋糕仍然可以拥有它自己。如前所述，没有人想只吃糖衣。另请注意，结冰往往会持续到最后。

我最近在一家数据驱动的 SaaS 公司找到了一份工作，担任 SQL Server DBA。我有过 SQL 开发人员的经验，但没有认证。也就是说，我表示我愿意学习，现在他们让我在死亡的痛苦中做证书。为什么？如上所述，如果您的公司是 MS 合作伙伴，他们需要经过认证的人员。我不知道交易的细节，但那些说证书不值钱（以原始美元计）的人可能不会在他们自己的办公桌之外思考。我还因为获得证书而获得奖金，因为它确实为公司带来了直接的利益，更不用说我在准备考试时获得的知识。我同意这并不能以任何方式弥补缺乏经验，但关键是我已经掌握了一些经验，所以对我来说，证书是有价值的和需要的。

整个体验对于 DBA 角色来说真的很关键，我想说的比开发人员或系统管理员角色更重要。很少有公司会将其宝贵数据的密钥交给新手。如果您不相信我，请尝试在工作网站上搜索“初级 DBA”。开发人员和系统管理员可能非常强大和重要，但他们往往更多，并且更需要初级角色。如果您不是 DBA，没有 SQL 经验并且想加入，那么我建议您先成为开发人员或系统管理员。尝试在该工作中尽可能多地使用 SQL Server，然后您将能够过渡到 DBA。

# javascript - 为什么这个 Javascript 函数不起作用？

> ID：719240
> 
> 赞同：2
> 
> 时间：2009-04-05T16:24:18.913
> 
> 标签：javascript, jquery

我有一个 JavaScript 函数现在不工作了，我在它下面放了一个新函数。这是我文件开头的内容。

```
 <head>
<link rel="stylesheet" href="9j3nz/style.css" type="text/css">
   <script src="jquery.js"></script>
    <script src="processing.js"></script>
<script type="text/javascript">
      function isNumberKey(evt)
      {
         var charCode = (evt.which) ? evt.which : event.keyCode
         if (charCode > 31 && (charCode < 48 || charCode > 57))
           return false;

         return true;
      }
</script>

<script type="text/javascript">

function stopRKey(evt) {
  var evt = (evt) ? evt : ((event) ? event : null);
  var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null);
  if ((evt.keyCode == 13) && (node.type=="text")) 
      $("label#enter_error").show();
 {return false;}
}

document.onkeypress = stopRKey;

</script> 
  </head> 
```

除了以前工作的 isnumberkey 函数外，一切工作正常。我的 HTML 没有任何变化。任何帮助表示赞赏。谢谢！

我调用 isnumberkey 函数如下：

```
 onkeypress="return isNumberKey(event)" 
```

是什么阻止了它的工作？自从我放入停止输入键功能后，它才开始起作用。

编辑：

删除停止输入键功能后，isnumberkey 事件再次起作用。我认为他们以某种方式相互干扰。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-05T16:49:48.307

似乎您的 stopRKey 总是返回 false，这可能会阻止您的 isNumberKey。

尝试重新安排您的括号。

```
if ((evt.keyCode == 13) && (node.type=="text"))
  $("label#enter_error").show();
{return false;} 
```

应该

```
if ((evt.keyCode == 13) && (node.type=="text")) {
  $("label#enter_error").show();
  return false;
} 
```

**更新：**有两种使用 if 语句的方法。

您可以`if`通过单个操作调用：例如。

```
if (true) alert('always true');
// or
if (true)
  alert('always true'); 
```

`if`或者你可以用一段代码调用一个语句

```
if (true) {
  alert('one alert');
  alert('another alert');
} 
```

由于您的括号乱序，您的代码仅在用户按下回车键时才执行`show()`，然后继续处理剩余的代码。所以 return false 总是被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T16:27:26.457

如果你使用 jQuery，你可以简化你的代码：

```
$(document).keydown(e) {
    return e.keyCode == 31; // replace this with your logic
} 
```

# c# - 在 DLL“ComCtl32”中找不到名为“TaskDialogIndirect”的入口点

> ID：719251
> 
> 赞同：6
> 
> 时间：2009-04-05T16:29:42.583
> 
> 标签：c#, windows-vista, pinvoke

我们有一台特定的 Vista x64 机器，在运行我们的 C# WinForms 应用程序时，它显示以下错误：

> System.EntryPointNotFoundException：无法在 DLL“ComCtl32”中找到名为“TaskDialogIndirect”的入口点。

同样的代码在其他 Vista 机器上也能正常工作。出于某种原因，这台特定的 Vista 机器总是抛出这个异常。

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-12-14T14:48:30.457

我遇到了这个问题和 Naughter 的免费[XTaskDialog API](http://www.naughter.com/xtaskdialog.html)，通过仿真在 Windows XP 机器上获得回退机制，使这个对话框实现更加有用。:)

就我而言，这是一个激活上下文问题，如本[博客条目](http://sharpmix.net/blog/2009/06/23/unable-to-find-an-entry-point-name-taskdialogindirect-in-dll-comctl32-dll/)中所述。

或者，在这里引用，以防有一天博客文章在网络空间中丢失（适用于 Visual Studio）：

1.  在解决方案资源管理器中打开您的项目属性，
2.  在安全选项卡上，选中启用 ClickOnce 安全设置，
3.  现在您可以看到 app.manifest 文件出现在解决方案的 Properties 文件夹中，打开它，
4.  在 </trustInfo> 标记下，插入以下代码。
5.  如果您尝试构建，可能会出现错误。要修复它，请取消选中启用 ClickOnce 安全设置。

在步骤 4 中插入的代码：

```
<dependency>
  <dependentAssembly>
    <assemblyIdentity type="win32" name="Microsoft.Windows.Common-Controls" 
        version="6.0.0.0" processorArchitecture="*"
        publicKeyToken="6595b64144ccf1df" language="*" />
  </dependentAssembly>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T17:26:57.547

我建议在工作和不工作的 Vista 机器上比较 comctl32.dll 的版本——并比较它们的校验和，即使它们报告的版本相同。

其他要检查的事项：

*   不工作的机器有没有可能有Vista的预发布版本？
*   是否有可能将非 Vista 版本的 comctl32.dll 复制到机器上并被应用程序拾取？（Visual Studio 附带的 Depends 实用程序在这里可能会有所帮助。）
*   是否有可能是病毒或蠕虫（或其他什么）取代了 comctl32.dll？

[这篇](http://msdn.microsoft.com/en-us/library/aa374153(VS.85).aspx)关于激活上下文的文章可能也值得阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T17:27:20.027

如果您用来运行该程序的其他机器使用的是 Vista x86，那么您的代码中可能存在导致问题的 PInvoke。您可能想尝试将编译器目标体系结构设置为 x86，以强制您的程序在 x64 Vista 上的 WoW64 中运行。默认情况下，Visual Studio 使用设置以与体系结构无关的方式构建程序集。这意味着当您尝试在 64 位系统上运行 .NET 程序时，它应该由 CLR 的本机 x64 版本托管。尝试在该上下文中加载 32 位 DLL 将失败。相反，强制应用程序以模拟 x86 模式运行应该可以解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-01T13:38:47.627

今天使用 ClickOnce 应用程序遇到了这个问题。

唯一有效的是这个解决方案：http: [//support.microsoft.com/kb/830033](http://support.microsoft.com/kb/830033)

Internet 存档作为原始链接已变暗 [https://web.archive.org/web/20110313122806/http://support.microsoft.com/kb/830033](https://web.archive.org/web/20110313122806/http://support.microsoft.com/kb/830033)

# development-environment - 哪种语言/运行时/库组合允许最快的多平台软件开发过程？

> ID：719252
> 
> 赞同：2
> 
> 时间：2009-04-05T16:29:52.333
> 
> 标签：development-environment

我想知道关于语言、库和工具的最快组合的意见，这些组合允许在 3 个最重要的操作系统（Win、Mac、Linux）中快速构建应用程序原型。

过去，我使用[处理](http://www.processing.org)视觉草图，但我想知道其他选项，因为这是面向视觉艺术家，而不是程序员专业人士。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T16:46:22.200

[LispWorks](http://www.lispworks.com/)对此非常有用。它有适用于 Win/Mac/Linux 的版本，并且大部分代码与平台无关——包括线程、网络、数据库访问、图形。它实现了 Common Lisp 的扩展版本，因此带有增量和交互式软件开发所需的所有工具。它还可以生成交付应用程序。[Primetrader](http://www.lispworks.com/success-stories/netfonds-primetrader.html)是一个在所有三个平台上运行几乎没有变化的应用程序示例。您可以从 Netfonds 网站下载该应用程序并试用。Ken Dickey 描述了使用 LispWorks 和极限编程：[非常成功的软件](http://xpdx.org/files/ExtremeSuccess/)。

由于可能的增量和交互式开发风格，Common Lisp 获得了很大的开发速度。该语言的许多功能都为此进行了优化。例如，Common Lisp 对象系统 (CLOS) 允许您在运行时更改对象，甚至可以在运行时更改对象系统本身。可以添加/删除/更改类。可以添加/删除/更改方法。对象可以更改它们的类，并将自动更新以进行类更新。这允许您在运行时修改/扩展复杂的面向对象软件。应用程序的编辑/编译/deloy/初始化/调试的传统循环已经一去不复返了。相反，您使用应用程序并扩展/替换它的一部分而不停止它。

# asp.net - 在回发时，如何在我的 GridView 中获取我正在排序的列？

> ID：719253
> 
> 赞同：0
> 
> 时间：2009-04-05T16:30:08.977
> 
> 标签：asp.net, gridview

在回发时，如何获取我正在排序的列（通过单击列）在我的`GridView`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-05T16:43:36.607

听起来您在处理事件时需要[`SortExpression`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sortexpression.aspx)从对象中获取。`GridView`[`Sorted`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sorted.aspx)

# sql - 用于练习的示例数据库

> ID：719259
> 
> 赞同：49
> 
> 时间：2009-04-05T16:33:02.137
> 
> 标签：sql, test-data, sample-data

我想玩一个更大的数据库来测试我对 SQL 的了解。

是否有一个巨大的 .sql 可以用来处理 SQL 查询？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-04-05T16:38:00.067

你可以试试经典的[MySQL 世界数据库](http://downloads.mysql.com/docs/world.sql.gz)。

world.sql 文件可在此处下载：

[http://dev.mysql.com/doc/index-other.html](http://dev.mysql.com/doc/index-other.html)

只需向下滚动到**示例数据库**，您就会找到它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-01T00:45:55.167

这是一个在线数据库，但您可以尝试使用 stackoverflow 数据库： [https ://data.stackexchange.com/stackoverflow/query/new](https://data.stackexchange.com/stackoverflow/query/new)

你也可以在这里下载它的转储：

[https://archive.org/download/stackexchange](https://archive.org/download/stackexchange)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-05T16:40:38.377

查看[Microsoft SQL Server 社区项目和示例的 CodePlex](http://codeplex.com/SqlServerSamples)

### 第三方编辑

在上面的链接之上，您可能会查看

*   [github 上的 microsoft sql server 示例](https://github.com/microsoft/sql-server-samples)
*   [codeplex 上](http://msftdbprodsamples.codeplex.com/)的msft db 产品示例
*   新的[Wide World Importers 示例数据库](https://msdn.microsoft.com/library/mt748083(v=sql.1).aspx)包含 OLTP 和 OLAP for sql server 2016 及更高版本

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-05T17:24:54.510

为什么不下载英文维基百科？有各种大小的压缩 SQL 文件，当然对你来说应该足够大

主要文章是 XML，因此将它们插入数据库有点问题，但您可能会发现那里还有其他适合您的文件。例如，页间链接 SQL 文件是 2.3GB 压缩的。查看[https://en.wikipedia.org/wiki/Wikipedia:Database_download](https://en.wikipedia.org/wiki/Wikipedia:Database_download)了解更多信息。

奥斯卡

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-15T23:35:38.813

这是我用来学习 sql 的：[employees-db](https://launchpad.net/test-db/)

> 这是一个带有集成测试套件的示例数据库，用于测试您的应用程序和数据库服务器

### 第三方编辑

根据 launchpad.net，[数据库已移至 github](https://github.com/datacharmer/test_db)。

> 该数据库包含大约 300,000 条员工记录和 280 万条工资条目。导出数据为 167 MB，虽然不算大，但对于测试来说足够重。
> 
> 数据是生成的，因此存在不一致和微妙的问题。我们没有删除它们，而是决定保持内容不变，并将这些问题用作数据清理练习。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-05T16:48:00.713

如果你想要一个真实数据的大型数据库，你可以报名参加[Netflix Prize 竞赛](http://netflixprize.com/)并访问他们的数据，这些数据非常大（几场参赛作品）。

### 第三方编辑

上面的 URL 不再包含数据集（2016 年 10 月）。[关于 Netflix Prize 的维基百科页面](https://en.wikipedia.org/wiki/Netflix_Prize)报道称，关于隐私问题的诉讼已经解决。

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2009-04-05T16:42:55.030

你想要巨大的吗？

这是一个小表： create table foo (id int not null primary key auto_increment, crap char(2000));

插入 foo(废话) 值 ('');

-- 每次运行下一行时， foo 中的行数加倍。插入 foo( 废话 ) select * from foo;

再运行二十次，你就有超过一百万行可以玩。

是的，如果他正在寻找要导航的关系，这不是答案。但是，如果他的意思是测试*性能和优化能力*，这将做到这一点。我正是这样做（然后用随机值更新）来测试我对另一个问题的潜在答案。（并且没有回答，因为我想不出比那个提问者更好的表现。）

如果他要求“复杂”，我会有不同的答案。对我来说，“巨大”意味着“很多行”。

因为你不需要巨大的东西来玩表格和关系。考虑一个表，它本身没有可以为空的列。可以有多少*种*不同的行？只有一个，因为所有列都必须有一些值，因为没有一个可以为空。

每个可为空的列乘以可能的*不同类型*的行数：该列为空的行，不为空的行。

现在考虑表格，而不是孤立地考虑。考虑一个作为子表的表：对于每个对父表具有 FK 的子表，即多对一，可以有 0、1 或多个子表。所以我们乘以我们在上一步中得到的计数的三倍（零没有行，正好一行，多行两行）。对于父母是很多人的任何祖父母，另外三个。

对于多对多关系，我们可以没有关系、一对一、一对多、多对一或多对多。因此，对于我们可以从表格中到达的每个多对多，我们将行乘以九——或者就像两个一对多。如果多对多也有数据，我们乘以可空性数。

我们无法在图表中访问的表——那些我们没有直接或间接 FK 的表，不要将表中的行相乘。

通过递归地乘以我们可以到达的每个表，我们可以得出提供每种“种类”所需的行数，并且我们只需要那些来测试我们模式中每个可能的关系。而且我们离巨大还差得很远。

# sql - 在关系数据库中存储文件夹层次结构

> ID：719278
> 
> 赞同：5
> 
> 时间：2009-04-05T16:47:24.663
> 
> 标签：sql, sql-server-ce, hierarchy, directory, relational

我有代表文件夹的对象，我想知道它们是否应该在数据库中表示。

一方面，似乎最简单的方法是不表示文件夹对象，而只存储文件夹中包含的对象的路径值。我看到的问题是您不能保留其后代不包含任何项目的文件夹，这没什么大不了的。此外，我不清楚如何加载要显示的文件夹层次结构（例如在 TreeView 中）而不预先将所有内容加载到内存中，这可能是一个性能问题。

另一种方法是有一个“文件夹”表，其中包含对其父文件夹的引用。这似乎应该工作，但我不确定如何允许具有相同名称的文件夹，只要它们不共享父级。这甚至应该是数据库应该关注的事情，还是我应该在业务逻辑中强制执行的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-05T16:51:15.853

这个想法是这样的（自我引用）：

```
CREATE TABLE FileSystemObject ( 
    ID int not null primary key identity,
    Name varchar(100) not null,
    ParentID int null references FileSystemObject(ID),
    constraint uk_Path UNIQUE (Name, ParentID),
    IsFolder bit not null
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T17:29:17.853

看看[本页](http://www.dynamicalsoftware.com/cr/prod/guest/standard.html)中间的 ERD 。将层次结构分解到单独的表中允许您支持多种分类法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T18:44:58.000

首先问问自己将层次结构保留在数据库中的目的是什么，以及从中获得什么功能。然后要求考虑这样做的工作和维护。

如果您只是使用它来填充树控件，则有一些内置控件直接针对文件夹系统。这对你会更好吗？通过将其存储在数据库中，您是否获得了更多的东西？您打算如何使数据库与可以在数据库之外更改的实际文件夹系统保持同步？除非您提供虚拟文件系统，否则最好直接针对真实的东西，并将相关路径存储在数据库中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T19:19:34.907

SQL Server 具有`hierarchyid`支持分层结构的数据类型。请注意，仅适用于完整版。

# javascript - 使用 Prototype 动态加载 js 文件？

> ID：719283
> 
> 赞同：2
> 
> 时间：2009-04-05T16:49:33.457
> 
> 标签：javascript, file, dynamic, prototypejs

我正在使用原型动态加载外部 js 文件（实际上是 php 文件）。像这样：

```
function UpdateJS(file)
{
  var url    = 'main_js.php?file='+file;
  var myAjax = new Ajax.Request( url, {method: 'get', onComplete: showResponseHeader} );
}
function showResponseHeader (originalRequest) 
{
  $('jscode').innerHTML = originalRequest.responseText;
} 
```

容器“jscode”定义如下：

```
<script type="text/javascript" id="jscode"></script> 
```

它有效！但是，如果调用了一些不同的文件，则会保留前一个文件中的所有功能。我不希望那样。有人知道在调用第二个 js 文件时如何“卸载”第一个 js 文件吗？

（我也尝试过使用 Ajax.Updater 函数，但结果是一样的。）

更新：事实证明存在更大的问题：它仅在函数“UpdateJS”在 window.onload 中时才加载，这就是为什么它在那之后不加载任何其他内容的原因。所以原型更新它可能不是一个好的方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T17:09:45.467

这里有一个关于如何动态卸载 Javascript 和 CSS 的很棒的教程：

[http://www.javascriptkit.com/javatutors/loadjavascriptcss2.shtml](http://www.javascriptkit.com/javatutors/loadjavascriptcss2.shtml)

下面的代码是从上面的链接中借用的，它是一个纯 JS 解决方案，而不是 Prototype JS 解决方案，但应该可以解决问题：

```
function removejscssfile(filename, filetype){
 var targetelement=(filetype=="js")? "script" : (filetype=="css")? "link" : "none" //determine element type to create nodelist from
 var targetattr=(filetype=="js")? "src" : (filetype=="css")? "href" : "none" //determine corresponding attribute to test for
 var allsuspects=document.getElementsByTagName(targetelement)
 for (var i=allsuspects.length; i>=0; i--){ //search backwards within nodelist for matching elements to remove
  if (allsuspects[i] && allsuspects[i].getAttribute(targetattr)!=null && allsuspects[i].getAttribute(targetattr).indexOf(filename)!=-1)
   allsuspects[i].parentNode.removeChild(allsuspects[i]) //remove element by calling parentNode.removeChild()
 }
}

removejscssfile("somescript.js", "js") //remove all occurences of "somescript.js" on page
removejscssfile("somestyle.css", "css") //remove all occurences "somestyle.css" on page 
```

如果您不需要 CSS 删除功能，我相信您可以破解它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T16:55:14.800

我认为您不能卸载在文件范围内定义的一组属性。一种解决方法是在一个中心对象中定义每个文件中包含的函数，只要你想摆脱它，你就可以废弃（或覆盖）它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-13T18:26:22.803

尝试以下操作：

```
function UpdateJS(file)
{
  $('jscode').innerHTML = '';  /*YOU NEED TO RESET THIS*/
  var url    = 'main.js'; /*YOU CAN USE A JAVASCRIPT FILE*/
  var myAjax = new Ajax.Request( url, {method: 'get', onComplete: showResponseHeader} );
}
function showResponseHeader (originalRequest) 
{
  $('jscode').innerHTML = originalRequest.responseText;
} 
```

# amazon-s3 - 您可以对 S3 文件存储设置权限吗？

> ID：719292
> 
> 赞同：3
> 
> 时间：2009-04-05T17:01:32.897
> 
> 标签：amazon-s3

您可以对上传到 S3 的文件设置权限吗？

或者，如果有人知道文件的公会/url，他们可以公开访问它？

如果是，我们可以设置什么样的权限？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-05T17:13:29.513

权限是通过密钥机制实现的。您可以使内容对所有人都可读（无密码）或要求密码。您可以通过生成可以限制为最大带宽的键控 URI 来授予上传权限。

[亚马逊关于访问的常见问题](http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1109&categoryID=55#06)

[亚马逊关于身份验证和访问控制的文档](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/index.html?UsingAuthAccess.html)

正如 dcaunt 所说，[查询字符串身份验证](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/index.html?S3_QSAuth.html)需要一个到期日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-08T09:18:18.617

不是密码，但您可以创建在特定时间过期的链接：[http ://docs.amazonwebservices.com/AmazonS3/2006-03-01/index.html?RESTAuthentication.html](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/index.html?RESTAuthentication.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T17:15:14.347

我相信您还可以生成仅在一段时间内有效的“密码”

# svn - 当我使用 svn+ssh 时，日志文件在哪里？

> ID：719300
> 
> 赞同：1
> 
> 时间：2009-04-05T17:06:35.863
> 
> 标签：svn, ssh

标题几乎是个问题。我有一个 post-commit，我花了很长时间才让权限正常工作。

我可以手动运行它并且它可以工作，但是，当我实际提交时（作为我知道手动工作的同一用户）没有任何反应。

是否会在任何地方记录任何内容？或者我可以设置伪日志或其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T17:34:00.773

您是否尝试按照颠覆方向调试钩子？

[为什么我的存储库挂钩不起作用？](http://subversion.tigris.org/faq.html#hook-debugging)

> 他们应该调用外部程序，但调用似乎从未发生过。
> 
> 在 Subversion 调用钩子脚本之前，它会从环境中删除所有变量——包括 Unix 上的 $PATH 和 Windows 上的 %PATH%。因此，如果您拼出该程序的绝对名称，您的脚本只能运行另一个程序。
> 
> 调试提示：
> 
> 如果您使用的是 Linux 或 Unix，请尝试按照以下步骤“手动”运行脚本：
> 
> 1.  使用“su”、“sudo”或类似的东西，成为通常运行脚本的用户。这可能是 httpd 或 www-data，例如，如果您使用的是 Apache；如果您正在运行 svnserve 并且存在特殊的 Subversion 用户，则它可能是 svn 之类的用户。这将明确脚本可能存在的任何权限问题。
> 2.  使用“env”程序调用具有空环境的脚本。这是提交后挂钩的示例：
>     
>     
>     
>     ```
>      $ env - ./post-commit /var/lib/svn-repos 1234 
>     ```
>     
>     
> 
> 注意“env”的第一个参数是一个破折号；这就是确保环境是空的。3\. 检查您的控制台是否有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T17:13:39.997

尝试

```
svn help log 
```

除非您在谈论其他类型的日志记录？

# sharepoint - 项目管理：SharePoint 与 activeCollab

> ID：719303
> 
> 赞同：2
> 
> 时间：2009-04-05T17:09:05.623
> 
> 标签：sharepoint, basecamp, activecollab

我正在尝试为我们的下一个项目选择项目管理和协作软件，并且想知道您对“企业”SharePoint 与“轻量级”替代方案（如 BaseCamp 或 activeCollab）的看法（从两者中，我更喜欢后者）。

对我们很重要的功能：

*   文件共享（规格、手册等）
*   论坛（我讨厌收件箱中丢失重要信息）
*   问题跟踪
*   Subversion 集成会很好，但可能 SharePoint 和 activeCollab 目前都不支持它，是吗？

时间跟踪等其他事情对我们来说不太重要（虽然很高兴）。

当我比较这两种解决方案时，我看到了这些优点和缺点：

*   SharePoint 的杀手级功能是 Office 集成。例如，与纯 HTML 文本区域和一些纯文本格式相比，在 MS Word 中使用样式、图像拖放等编写规范要好得多。我们还非常广泛地使用 Outlook，所以如果我们可以利用这个工具会很好。
*   activeCollab 是基于网络的，并且有一个流畅的用户界面，这对于我们公司的采用很重要（如果我们的开发人员没有找到易于使用的解决方案，他们将不会使用它）。我的老板也有点喜欢简单的解决方案，activeCollab 在这方面很容易获胜。

关于价格，activeCollab 大约是几百美元（合理的一次性成本），但我不太确定 SharePoint。如果我是对的，基本的“SharePoint Services”版本对我们来说就足够了（我认为我们不需要完整的 MS Office SharePoint Server），在这种情况下，我们只需要 Windows Server 许可证（我们已经）和SQL Server 许可证（SQL Server Express 可以工作吗？还是我们至少需要工作组版本？）。这意味着如果我们选择最低版本，即使 SharePoint 也不需要太贵。

有没有人做过同样的比较并且可能提供更多的见解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T17:19:17.957

SharePoint 服务可以与 SQL Express 一起使用。如需全文搜索支持，请不要忘记下载具有高级功能的 SP2：http: [//msdn.microsoft.com/vstudio/express/sql/download/](http://msdn.microsoft.com/vstudio/express/sql/download/)。因此，如果您拥有 2003 版服务器许可证，则一切就绪。

目前，我们使用 WSS V3 管理一些项目。进展顺利，我们已经使用自定义列表实现了问题跟踪，并且文档共享非常高效（它是 WSS 的基础）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T17:50:37.567

如果您使用 SharePoint，您只需要基本的 Windows SharePoint Services，而不需要 Microsoft Office SharePoint Services。除此之外，再加上[Microsoft Office SharePoint Designer](http://office.microsoft.com/en-us/sharepointdesigner/FX100487631033.aspx)现在是免费的，您应该做得很好。

您将需要添加一个问题跟踪系统，尽管您可以从内置的问题跟踪列表开始，然后对其进行自定义。特别是，将工作流添加到任何列表都相当简单，而且 SharePoint 工作流基于 Windows Workflow Foundation，这意味着您应该能够与任何东西集成。您可以为您的颠覆集成做同样的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T17:00:40.970

Opengoo 具有您提到的所有功能 - 除了 subverion 集成，但包括时间跟踪。

我认为它介于 basecamp 和 sharepoint 之间。唯一可能较弱的是办公集成，我认为 fengoffice 提供了一个办公插件。

有人对 opengoo 与 activecollab 进行了比较。当我找到它时，我会在这里发布它。

编辑：这里是链接： http: [//forums.opengoo.org/index.php?topic=617.0](http://forums.opengoo.org/index.php?topic=617.0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-23T15:34:06.630

我知道这篇文章很旧，但我目前同时使用 basecamp 和 activecollab。我也处理了 AC 的安装，它几乎没有痛苦。

管理它变得轻而易举，是的，有颠覆集成。

作为临时措施，我将 Fedora 放在基于英特尔的 mac mini 上，并安装了 activeCollab，它运行良好（是的，我进行异地数据库和文件备份）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-07T18:15:29.290

ActiveCollab 现在具有 Subversion 集成

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-26T08:33:26.330

这里有更多人熟悉SharePoint，所以让我从activeCollab的角度提供答案：

**文件共享和协作工作**主要在项目级别，通过文件部分完成。还有全局文档部分，但它的功能有限，因为它仅用于共享并且缺乏协作功能（无评论、修订跟踪等）。

文件部分支持良好的旧二进制文件（不能在 activeCollab 本身中编辑，但您可以下载、更新它们并上传新版本）、文本文档（可以在 activeCollab 的主界面中编辑的 HTML 文档）、书签和 YouTube 视频。可以通过第三方模块添加新的资产类型。

**讨论：** activeCollab 擅长于此，因为它的构建是为了实现协作。每个项目都有一个讨论部分（一个迷你论坛），系统中的大多数元素（文件、任务等）都支持评论，这也使它们成为讨论点。

Killer 功能是 activeCollab 的电子邮件集成，可让您通过电子邮件开始讨论并回复电子邮件通知，并将这些回复作为评论导入系统。我们发现这大大提高了应用程序的采用率，因为人们可以继续使用他们熟悉的工具（电子邮件），而无需完全切换到新的东西。

可以在此处找到有关电子邮件集成的更多信息：[http ://www.activecollab.com/features.html#email](http://www.activecollab.com/features.html#email)

**问题跟踪：**您可以为此使用内置的任务功能，但请注意，它不是专门为问题跟踪而构建的——它是一种通用的任务管理实现。FogBugz、Bugzilla 等专用问题跟踪工具提供了更专业的功能，但您可能会发现 activeCollab 的实现足以满足您的需求。

**版本控制集成：** activeCollab 2 支持 SVN，activeCollab 3 也添加了 GIT 和 HG 支持。

**Office 集成：**我们正在开发一些东西，可以让您在 Office 应用程序中工作，并将您的更改自动存储在 activeCollab 中。由于这项工作正在进行中，我无法分享任何细节，但我会在该工具可用时立即更新此评论。

免责声明：我是 activeCollab 的原作者。这是对未回答的 activeCollab 相关问题的回复，而不是推销:)

# objective-c - 如果我在内存中有变量的地址，如何找到变量？

> ID：719317
> 
> 赞同：3
> 
> 时间：2009-04-05T17:18:19.877
> 
> 标签：objective-c, xcode

在我的应用程序中，我遇到了一个例外：`MyApp(38431,0xa004ffa0) malloc: *** error for object 0xa08be760: pointer being freed was not allocated`

XCode 有没有办法告诉我这个指针在哪里？我怎样才能找到问题所在？

我知道我可以输入 info line*[address]，它可能会告诉我该行在哪里。但现在它对我不起作用。

如何获得抛出异常的变量的行数或名称？

提前谢谢你，伊利亚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-05T17:20:30.993

你调用 free() 而不调用 malloc()。寻找未初始化的指针。如果您使用的是调试器 (gdb)，您应该能够为“backtrace”键入“bt”，这将显示错误发生时的堆栈。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-05T17:21:18.417

在 gdb 中尝试

```
bt 
```

获取有关错误发生时间的更多信息。尝试释放未分配的内存是一个常见的错误，gdb+xcode 提供了许多工具来帮助您找出问题所在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T12:55:21.077

您应该能够放置一个断点，`malloc_error`这将导致您的程序在打印相关消息时中断。

您还可以使用以下方法，从地址中找到分配点：

1.  将[MallocStackLogging、MallocStackLoggingNoCompact](http://developer.apple.com/documentation/Performance/Conceptual/ManagingMemory/Articles/MallocDebug.html)环境设置为 1。
2.  运行程序，一旦它打印出这一行，就使用shell 的[malloc_history](http://developer.apple.com/documentation/Darwin/Reference/ManPages/man1/malloc_history.1.html)来找出分配的堆栈跟踪：`malloc_history <pid> <addr>`。

# iphone - 关于这个 iPhone UI 的两个问题

> ID：719319
> 
> 赞同：2
> 
> 时间：2009-04-05T17:19:22.340
> 
> 标签：iphone, cocoa-touch

我正在研究 mint.com 团队在 iPhone 应用程序中引入的一些基本 UI 原则。我引用的快速屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/Ixuos.png)

关于这个 UI，我有两个问题：

1) UITableViewCell 之间有一个优雅的空间，您可以在其中看到 UITableView 的薄荷绿色背景。我没有碰巧看到任何允许在单元格之间设置间隔的委托方法。这通常是如何完成的？

2) 最后一个单元格具有来自服务器的最后更新时间的 UIView。此 UIView 与表格同步滚动。它只是一个额外的 UITableViewCell 样式与其余单元格不同并附加到表格中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T17:38:35.880

该空间可能是节间间距，也可能只是其自定义单元格中的空白空间。

底部的视图可能是`tableFooterView`. 此视图（及其匹配`tableHeaderView`的 ）出现在表格底部并随之滚动。

**编辑**：再想一想，这实际上取决于“滚动它”的意思。如果它像普通单元格一样滚动，则为`tableFooterView`; 如果不是，它可能是一个节页脚（我从未尝试过使用这些）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T18:41:04.810

1) 该应用程序肯定使用自定义 tableFooterView，因为您可以看到单元格下方的阴影。

Mint 要么将表格视图的背景颜色设置为薄荷绿色并为阴影添加稍微透明的 PNG，要么绿色条 + 阴影本身就是 PNG 并用作页脚视图。

但是，有一个委托方法来定义页眉/页脚的高度。将此与自定义页脚视图结合使用是您最好的选择。

2）我会假设更新视图只是最后一部分的自定义页脚视图（如果这是他们配置表格的方式）。

例如：

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {
    if (section == 4) {
        // return updating time view
    } else {
        // return default shadow view
    }
} 
```

# iphone - SciFi-HiFi Keychain 问题 - SecKeychainItemRef 未声明的错误

> ID：719320
> 
> 赞同：3
> 
> 时间：2009-04-05T17:19:32.183
> 
> 标签：iphone, keychain, security-framework

我正在尝试使用这个类：

[http://log.scifihifi.com/post/55837387/simple-iphone-keychain-code](http://log.scifihifi.com/post/55837387/simple-iphone-keychain-code)

将数据保存到 iPhone 上的钥匙串。我已经在我的应用程序中包含了头文件和 .m 文件，并包含了安全框架，但是我仍然收到这些未声明的错误。

我似乎找不到任何教程或帮助文件来在项目中设置这个类，所以我相信这并不难。只是给我带来麻烦。

我正在运行 3.0 sdk，但我认为这不会对事情产生太大影响。

提前干杯！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-05T22:26:28.513

我相信模拟器中现在可以使用完整的 iPhone 钥匙串 API（从 3.0 开始）......只要确保所有引用的#ifdefs

```
TARGET_ IPHONE_SIMULATOR
```

被禁用，你应该没问题。

# ruby-on-rails - 您如何编写功能/控制器测试来检查通过 AJAX 调用添加的内容？

> ID：719321
> 
> 赞同：1
> 
> 时间：2009-04-05T17:19:52.400
> 
> 标签：ruby-on-rails, ajax, unit-testing, tdd

测试

```
def test_generateCashFlowStmt
    get :getDateRangeForCashFlowStmt
    xhr :post,
      :generate_cash_flow_stmt, 
      {:fromDate =>  {:year=>"2009", :month => "3", :day=>"1"},
      :toDate => {:year=>"2009", :month => "3", :day=>"31"} }

    table = [ ....       ]
    assert_equal table, formatCashFlowStatementAsTable( assigns(:cashFlowStmt))
    assert_tag :tag => "div", :children => {:count => 1, :only => {:tag=>"table"} }
  end 
```

控制器动作

```
def generate_cash_flow_stmt
      puts params
      fromDate = Date.civil params[:fromDate]["year"].to_i, params[:fromDate]["month"].to_i, params[:fromDate]["day"].to_i
      toDate = Date.civil params[:toDate]["year"].to_i, params[:toDate]["month"].to_i, params[:toDate]["day"].to_i 

      @cashFlowStmt = CashFlowStatement.new(fromDate, toDate)
      render :partial => "cash_flow_stmt", :layout => false
  end 
```

看法

```
<% form_remote_tag(:loading => "Element.show('progress-indicator');",
        :update => "div_results",
        :complete => "Element.hide('progress-indicator');",
        :url=>{:action=>'generate_cash_flow_stmt'}) do %>
...
<% end %>
<div id="div_results"> 
```

测试在最后一次检查中失败，我检查 div 内容持有者是否由于调用 generate_cash_flow_stmt 访问而填充了表格。虽然我看到表格正在浏览器中显示，但“查看源代码”操作显示了一个空白 div 标记。是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T01:10:41.910

显示空白 div 的 View Source 是预期的。AJAX 调用会更新 dom，但不要更改原始源。[您可以使用Firebug](http://getfirebug.com/)最好地查看 DOM 。

至于测试：`xhr :post`调用不会触发`Ajax.Updater`，因此实际上并没有更新页面 div。（Ajax.Updater 是**生成**xhr 调用的原因。通过在测试中手动启动调用，不会发生此类事件。）我也不相信功能测试实际上会跟踪和更新 DOM 或执行 javascript。

要获得通过测试，您应该只生成 xhr 请求（不要执行`get :getDateRangeForCashFlowStmt`），然后确认它返回适当的部分。由于 Rails 和 Prototype 都经过了很好的测试，您应该能够相信`form_remote_tag`他们`Ajax.Updater`会做他们应该做的事情并构建您的最终页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T07:50:36.957

您不想在功能测试中测试 javascript。功能测试根本不包括 JavaScript。

你可以使用 Selenium 之类的东西来测试你的 javascript。Selenium 基本上是尝试在浏览器中做事的测试。众所周知，浏览器对 javascript 的支持比 Rails 的功能测试要好得多；)

# iphone - 从另一个选项卡中更新 tabView？

> ID：719326
> 
> 赞同：1
> 
> 时间：2009-04-05T17:22:39.617
> 
> 标签：iphone

我的 tabBar:didSelectItem: 在我的应用程序中遇到问题...我有 4 个选项卡，其中 1 个是设置选项卡，它使用保存时的设置更新 plist 文件。

我想做的是在选择另一个选项卡项时运行一个操作，这样我就可以使用适当的设置更新视图。我只是无法让它工作。谁能告诉我一个关于如何以这种方式使用 tabBar:didSelectItem: 的例子，或者可能是另一种方式吗？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T19:53:11.690

这是实现您想要的另一种方式。在下文中，我假设您的 tabBarController 已像往常一样在您的应用程序的委托中实例化。

// 检索你的委托

mainDelegate = [[UIApplication sharedApplication] 委托];

// 检索选定的选项卡

NSUInteger tab = [mainDelegate.tabBarController selectedIndex];

// 现在根据用户选择的选项卡做你喜欢的事情

开关（标签）{

案例0：

```
 // your stuff here

    break; 
```

……

案例 N-1：

```
 // your stuff here

    break; 
```

默认：

```
 // you should never arrive here if you check all of the possible values for the tab

    break; 
```

}

如果我理解正确，这应该足以实现您的意思。

# c# - MVC 全局错误处理：Application_Error 未触发

> ID：719329
> 
> 赞同：11
> 
> 时间：2009-04-05T17:25:07.253
> 
> 标签：c#, asp.net-mvc, error-handling

我正在尝试在我的 MVC 应用程序中实现全局错误处理。

我的内部有一些逻辑`Application_Error`可以重定向到 an`ErrorController`但它不起作用。

我的`Application_Error`方法中有一个断点`Global.aspx`。

当我强制异常时，断点没有被击中。任何想法为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-05T17:27:50.103

您可以尝试这种方法进行测试：

```
protected void Application_Error(object sender, EventArgs e)
{
    var error = Server.GetLastError();
    Server.ClearError();
    Response.ContentType = "text/plain";
    Response.Write(error ?? (object) "unknown");
    Response.End();
} 
```

网页配置

```
<customErrors mode="Off" /> 
```

*   [使用 ASP.NET 进行丰富的自定义错误处理](http://msdn.microsoft.com/en-us/library/aa479319.aspx)
*   [如何：处理应用程序级错误](http://msdn.microsoft.com/en-us/library/24395wz3.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T17:41:43.143

我认为处理此问题的更好方法是使用[HandleErrorAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.handleerrorattribute.aspx)来装饰您的控制器（可能是基本控制器）。这将使您可以选择通过扩展此属性并对其进行修改以满足您的需要，例如通过更改呈现的视图，来记录或处理具有不同错误的不同控制器中的错误。使用此属性使用 MVC 中的标准过滤器处理并使用视图构建页面，而不是像使用 Application_Error 那样直接写入响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T17:40:45.190

我不能肯定地告诉你出了什么问题，但我可以想到几件事来检查......首先，VS 是否打破了异常？如果您在调试器中，这是我认为的默认设置。如果它只是按 F5 直到您使用断点到达您的代码。另外，您确定在异常到达之前不会在任何地方处理异常`Application_Error`吗？

另一件事要检查 - `CustomErrors`web.config 中的模式，设置为`Off`，对吗？

# wpf - WPF层乘法

> ID：719342
> 
> 赞同：1
> 
> 时间：2009-04-05T17:33:56.063
> 
> 标签：wpf, image-processing

Grid（或 Canvas）内部有两个“层”（带有 PNG 位图的图像控件）：一个图像直接位于另一个图像之上。有没有办法显示通过将图像颜色相乘创建的组合图像（Photoshop/GIMP 图层效果）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T21:01:52.413

如果你想要它是动态的，你应该看看 WPF 效果。见[Greg Schechter 的博客](http://blogs.msdn.com/greg_schechter/ "Greg Schechter 的博客")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T18:04:43.167

听起来您想将 BitmapSources 链接在一起。 [这是一篇博客文章，详细介绍了如何执行此操作。](http://blogs.msdn.com/dwayneneed/archive/2008/06/20/implementing-a-custom-bitmapsource.aspx)

# c# - 获取 ASP.NET 中动态添加的控件的值

> ID：719345
> 
> 赞同：1
> 
> 时间：2009-04-05T17:35:13.127
> 
> 标签：c#, asp.net

大家好，非常感谢您在我正在开发教育领域的应用程序时为我之前的问题提供帮助。在那里，我将面板控件作为 panel1，并在该面板中动态定义了一些下拉列表控件作为 dropdown1、dropdown2 等。在 button1 点击事件中，我想在 button2 点击事件中使用这些控件的值对我有同样的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T17:51:30.747

在 button2_Click 事件中，您可以获得下拉列表的值：

```
DropDownList ddl1 = (DropDownList)Page.FindControl("dropDownList1");
string dropdown1value = ddl1.SelectedValue; 
```

但是在第二次回发之后，您动态添加的控件将丢失。所以你应该将它们添加到页面的初始化事件中，而不是第一个按钮的点击事件中。

# c# - 使用 Ninject（或其他容器）如何找出请求服务的类型？

> ID：719346
> 
> 赞同：3
> 
> 时间：2009-04-05T17:36:29.677
> 
> 标签：c#, .net, inversion-of-control, structuremap, ninject

假设我有一个服务接口：

```
public interface IFooService
{
   void DoSomething();
} 
```

该服务的具体实现是通用的：

```
public class FooService<TRequestingClass> : IFooService
{
   public virtual void DoSomething() { }
} 
```

我还有其他一些需要 IFooService 实例的类：

```
public class Bar
{
   private IFooService _fooService;
   public Bar(IFooService fooService)
   {
      this._fooService = fooService;
   }
} 
```

我需要连接我的 IoC 容器，这样当 Bar 被创建时，它会传递一个 FooService<Bar> 的构造函数参数。还有很多其他的类，就像 Bar 一样。每个可能还需要传递给他们的 FooService<TRequestingClass> 实例，其中 TRequestingClass 是需要 IFooService 实例的类的类型。我不需要将这种古怪暴露给 IFooService 的消费者。他们应该关心的是他们可以调用他们传递的 IFooService 的方法。他们不需要知道传递给他们的 IFooService 的具体实现需要构造任何特殊的东西。

FooService<T> 的可接受替代方案是非泛型类，其构造函数中包含字符串参数，其中包含为其创建的类的名称。IE：

```
public class FooService : IFooService
{
   public FooService(string requestingClassName) { }
} 
```

**如何连接我的 IoC 容器以这种方式构建依赖项？**

如果您对我为什么想要这样一个奇怪的结构感到困惑，请考虑一下当您获得使用 log4net.LogManager.GetLogger(typeof(SomeClass)) 创建的 ILog 时 log4net 的最佳工作方式。我不想在我的代码中乱扔对 log4net 的引用，所以我想编写一个简单的 ILogger 接口，并用这样的东西来实现它：

```
public class GenericLogger<T> : ILogger
{
    private readonly ILog log;

    public GenericLogger()
    {
        this.log = log4net.LogManager.GetLogger(typeof(T));
    }

    public void Debug(object message)
    {
        this.log.Debug(message);
    }

    /* .... etc ....  */
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-05T18:19:00.137

最简单的方法是创建一个`ILogger<T>`接口：

```
public class ILogger<T> : ILogger { }
public class GenericLogger<T> : ILogger<T> { ... } 
```

然后依靠泛型类型推断来获得正确的类型。例如，在 Ninject 中，您只需要以下绑定：

```
Bind(typeof(ILogger<>)).To(typeof(GenericLogger<>)); 
```

那么您的消费类型将如下所示：

```
public class FooService : IFooService {
  public FooService(ILogger<FooService> logger) { ... }
} 
```

如果你坚决反对`ILogger<T>`接口，你可以做一些更有创意的事情，比如自定义提供程序，它读取`IContext`来确定父类型。

```
public class GenericLogger : ILogger {
  public class GenericLogger(Type type) { ... }
}

public class LoggerProvider : Provider<ILogger> {
  public override ILogger CreateInstance(IContext context) {
    return new GenericLogger(context.Target.Member.ReflectedType);
  }
} 
```

然后消费类型将像这样工作：

```
public class FooService : IFooService {
  public FooService(ILogger logger) { ... }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T18:24:46.317

如果我没有误解你，为什么不简单地让你的 GericLogger 构造函数采用对象类型的参数。然后这样做：

```
ILog = kernel.Get<ILog>(ParameterList); 
```

我还没有完全阅读 Ninject Parameter Lists，但这似乎是一种使用 IParameterList 注入参数类型的方法。

编辑：

看起来像这样工作：

```
ILog = kernel.Get<ILog>(new ConstructorArgument[] { 
    new ConstructorArgument("ClassName", this.GetType().Name) 
}) 
```

然后你有你的 ILog

```
class GenericLogger : Ilog
{
    GenericLogger(string ClassName) {};
} 
```

我没有对此进行测试，只是似乎来自 Ninject 源（我正在查看最近的 Ninject2 树）

编辑：

您想传递 ConstructorArgument，而不是 Parameter。更新以反映。

此代码打印：“从初始化调用”

```
class Init {
    public void Run() {
        StandardKernel kernel = new StandardKernel( new MyLoader() );
        kernel.Get<Tester>( new ConstructorArgument[] { 
            new ConstructorArgument( "ClassName", 
                this.GetType().Name 
            ) 
        } );            
    }
}

public class Tester {
    public Tester(string ClassName) {
        Console.WriteLine("Called From {0}", ClassName);
    }
} 
```

编辑：

另一种可能有用的方法是使用 Bind().To().WithConstructorArgument() 绑定，这在与自绑定或 .WhenInjectedInto() 条件一起使用时可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-04T20:53:09.150

要详细说明自定义提供程序的想法，这里有一个简单的方法......

```
internal class LogModule : StandardModule
    {
        private class log4netILogProvider : SimpleProvider<log4net.ILog>
        {
            protected override ILog CreateInstance(IContext context)
            {
                return LogManager.GetLogger(context.Instance.GetType());
            }
        }

        public override void Load()
        {
            Bind<log4net.ILog>().ToProvider(new log4netILogProvider());
        }
    } 
```

然后在注入的类中：

```
[Inject]
        public ILog logger { get; set; } 
```

# php - 我认为我的路径是正确的，但仍然给出相同的错误“php.exe”无法识别

> ID：719351
> 
> 赞同：0
> 
> 时间：2009-04-05T17:40:50.417
> 
> 标签：php, symfony1

我的 symfony 沙箱位于我的 xampp 文件夹的 htdocs 中，该文件夹位于 c 驱动器中的程序文​​件中，即

c:\程序文件\xammp\htdocs\sf_sandbox\

但是当我尝试运行命令 symfony -v 它给出了错误

'php.exe' 未被识别为内部或外部命令

有人可以帮助我吗？我究竟做错了什么？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T18:39:49.417

在这种情况下，您需要将 php 文件夹或目录路径包含在命令行界面中可用的所有全局路径中。

右键单击Windows的我的电脑图标，您将能够看到如下所示的屏幕

单击此窗口的“高级”选项卡，然后单击该窗口的“环境变量”按钮

在新窗口中选择 TMP 变量，然后选择路径变量并单击编辑按钮。

在变量值字段的末尾添加目录的路径（包含 php.exe 有时它不是这里给出的。即我有一种情况是 E:\wamp\bin\php\php5.2.8） php（这里是 ;C:\wamp\php）还使用分号 (;) 将路径与其他现有路径分开。

现在对每个打开的窗口一一点击确定，然后重新启动计算机，任务就完成了。

要检查它，只需键入 php -v 并按 Enter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T18:47:39.617

您可能希望尝试调整路径以在其中包含 c:\progra~1\xammp\htdocs\sf_sandbox。DOS 中任何长路径的简称已成为许多应用程序的失败，必须正确处理它们。如果你打开一个dos窗口并发出：

```
cd \
dir /x 
```

您将获得 8.3 格式的短名称列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T18:38:34.817

当您尝试从命令行执行 php 时会发生什么？

您是否尝试将 php.exe 的路径添加到 PATH 环境变量？

# c++ - Win32 命名管道和远程客户端

> ID：719353
> 
> 赞同：10
> 
> 时间：2009-04-05T17:42:21.643
> 
> 标签：c++, windows, winapi, pipe, named-pipes

给定计算机 A 的 IP 地址，我可以从计算机 B 访问计算机 A 上的命名管道吗？如果是这样，我需要做些什么来实现这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-05T18:07:03.473

是的，您可以通过命名管道通过网络进行通信。您可以像 UNC 路径一样指定管道名称：

> `\\computername\pipe\pipename`

或通过 IP

> `\\192.168.0.100\pipe\pipename`

您可以对任何 LAN 机器或通过 VPN 连接到 LAN 的任何远程机器执行此操作。

您使用所有相同的管道 Win32 API 函数，例如[CreateFile](http://msdn.microsoft.com/en-us/library/aa363858(VS.85).aspx)。要创建管道，请使用[CreateNamedPipe](http://msdn.microsoft.com/en-us/library/aa365150(VS.85).aspx)。

在您可以使用远程管道之前，您必须与远程计算机建立有效连接。为此，您将使用[WNetUseConnection 之](http://msdn.microsoft.com/en-us/library/aa385482(VS.85).aspx)类的 API 。或者，如果您的计算机在同一个域上，或者具有相同的 u/p，则根本不需要使用 WNetUseConnection。

如果您将程序作为服务运行，则无法使用本地系统帐户访问 LAN 资源。该服务必须使用另一个帐户进行配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T18:03:50.657

命名管道可用于在网络上不同计算机上的进程之间提供 IPC。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/aa365600(VS.85).aspx)。

如果您使用的是 Windows XP SP2、Windows Server 2003 SP1 和更高版本，请不要忘记启用命名管道过滤。参考[这里](http://www.hsc.fr/ressources/articles/win_net_srv/named_pipes_fw.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T18:46:05.767

请注意，Windows 下的管道非常糟糕。有很多关键的细节你需要完全正确，否则它们会奇怪地失败并且文档没有达到标准。

如果可以，请使用套接字。

# c# - 从客户端浏览器上传文件到 Sharepoint

> ID：719355
> 
> 赞同：0
> 
> 时间：2009-04-05T17:44:33.917
> 
> 标签：c#, javascript, sharepoint

我有一个没有运行 Sharepoint 的 Web 服务器，它甚至没有使用任何 Microsoft 技术。我需要一种方法让访问我网站的浏览器也能够将本地文件（客户端本地）上传到客户端可见的 Sharepoint 服务，然后将状态发送到我的 Web 服务器。我不想在客户端上运行独立的应用程序。我怎样才能做到这一点？我是网络编程的新手，所以如果这个问题没有意义，请多多包涵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-07T01:59:22.953

Considering your circumstance that you rarely do not use any Microsoft technology, I am not optimize that you can do that simply uploading or downloading in a usual way. My experience tells me that there are always some hurdles if you do not use MS technology.

I am not a much experienced SharePoint users, and have not met your situation. However I strongly believe DOK's answer is better for you.

Hope this helps a bit!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-05-05T02:07:29.540

从客户端，您必须使用 SharePoint 客户端 OM。在浏览器中，您可以从 Silverlight 控件中选择 javascript 或 C#。请参阅[使用 SharePoint Foundation 2010 托管客户端对象模型](http://msdn.microsoft.com/en-us/library/ee857094.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T17:54:35.577

这是一个不寻常的情况。

如果您的用户可以访问 Sharepoint 网站并在那里上传文件，那么您可以订阅更新文件的文件夹，并接收来自 Sharepoint 的通知电子邮件。如果这些电子邮件发送到您的 Web 服务器上的专用电子邮件地址，您可以在您的 Web 服务器上的应用程序中处理这些传入的电子邮件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T17:58:09.063

要概括 DOK 的答案，您可以在他们上传到的文档库上启用工作流。这可以触发您可能喜欢的任何操作或一系列操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-05-05T02:50:10.220

This sounds like a cross-site scripting issue. I think your best bet would be to have the user enter the filename/url into your web application rather than attempt to write script to automate that notification. Your server could use WebDAV or call sharepoint to verify the file exists.

# scala - Scala 上的 Web 应用程序开发

> ID：719358
> 
> 赞同：25
> 
> 时间：2009-04-05T17:45:52.073
> 
> 标签：scala

我刚刚学习了 Scala，我想尝试用它进行一些 Web 开发。在 Google 上，我遇到的框架之一（唯一一个？）是[Lift](http://liftweb.net/)。使用它是什么体验？

在任何其他框架上使用 Scala 进行 Web 应用程序开发可以推荐什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-03-23T05:00:48.157

我个人建议您使用[Play Framework](http://www.playframework.com)。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-04-06T15:52:25.877

AFAIK，如果您想坚持使用基于 Scala 的解决方案，Lift 是城里最成熟的游戏，另请参阅[http://code.google.com/p/slinky2/](http://code.google.com/p/slinky2/ "紧身")。智者的话，我还没用过 slinky，除了浏览源码，它的设计非常简单，强烈遵循 request => response 模型。

请注意，这是 Scala，因此您可以使用 Java 现有的所有框架。特别是，我建议您查看 wicket：[http](http://technically.us/code/x/the-escape-hatch "使用 Wicket 和 Scala") ://technically.us/code/x/the-escape-hatch ，它描述了如何将两者结合起来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-03-23T07:14:44.667

最常用的全栈 Scala Web 框架是 Lift and Play！在你提交之前看看两者。两者之间的一个主要区别是 Lift 是有状态的，而 Play! 是无状态的，更类似于 Rails/Django。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-03-24T11:48:55.267

Jsf2 运行良好。我猜struts也会。它们本身不是 Scala，但您只能使用 Scala 和适当的 EL，它们可以正常工作。这两个比任何新框架都成熟得多。社区更大，文档更好，等等。

# events - 扩展 CFileDialog 时捕获 ON_CBN_SELCHANGE 和其他下拉事件

> ID：719359
> 
> 赞同：2
> 
> 时间：2009-04-05T17:46:04.240
> 
> 标签：events, mfc, combobox

我正在尝试使用 C++/VS2008 为 XP 创建一个自定义文件保存对话框。我的对话框将有三个下拉菜单和一个编辑框。当在其他下拉列表中进行选择时，我需要下拉列表的内容动态更新。因此，我需要捕捉 CBN_ 事件。

我创建了一个扩展 CFileDialog 的类和一个扩展 CComboBox 的类。我可以显示自定义对话框（带有组合），但我无法捕获 CBN_ 事件。

我使用 VS 的“创建 MFC DLL”向导来获取两个类：应用程序类和自定义文件保存对话框类。我创建了一个派生的 CComboBox 类，因此我可以添加消息/事件捕获代码。我在对话框类中放入了消息映射、DoDataExchange 和事件捕获代码。

下面的代码是我正在使用的代码的精简版本。我想当我连一个下拉菜单都无法工作时，我不需要发布三个下拉菜单的创建。我也没有为编辑框输入任何代码，因为我对此没有任何问题。

一些代码：从应用程序类 - 创建自定义对话框的实例，调用 DoModal：

```
BOOL CSaveAsApp::InitInstance() 
{
CWinApp::InitInstance();
//  Parse the command line to get the defaultExtension and the file filter 
CString cmdLineAsString =   CString( theApp.m_lpCmdLine );

int curPos  =   0 ;
CString fileExtension   = cmdLineAsString.Tokenize(" ", curPos ) ;
CString fileFilter  = cmdLineAsString.Tokenize(" ", curPos ) ; ;

MyFileDialog    dlg( FALSE, fileExtension.GetBuffer(), "Enter File Name Here",
                    OFN_HIDEREADONLY | OFN_OVERWRITEPROMPT,
                    fileFilter.GetBuffer(), m_pMainWnd) ;

m_pMainWnd = &dlg;

int nResponse = dlg.DoModal();

if (nResponse == IDOK)
{
   ...  
}
else if (nResponse == IDCANCEL)
       ...

return FALSE;
} 
```

以下是自定义文件保存对话框中的一些代码：

```
IMPLEMENT_DYNAMIC(MyFileDialog, CFileDialog ) 
//  LJM Put in last two parms: DWORD dwSize, BOOL bVistaStyle (0, 0 )
//      bVistaStyle = 0 ==> XP-Style dialog

MyFileDialog::MyFileDialog(BOOL bOpenFileDialog, LPCTSTR lpszDefExt, 
            LPCTSTR    lpszFileName, DWORD dwFlags, LPCTSTR lpszFilter, 
            CWnd* pParentWnd) :
    CFileDialog(bOpenFileDialog, lpszDefExt, lpszFileName, dwFlags,
            lpszFilter, pParentWnd, 0, 0) 
{ }

MyFileDialog::~MyFileDialog() { }

void MyFileDialog::DoDataExchange(CDataExchange* pDX)
{
   CFileDialog::DoDataExchange(pDX);
   //{{AFX_DATA_MAP(MyFileDialog)
   //DDX_Control(pDX, IDC_CONTEXT_COMBO, m_ComboContext);
   //}}AFX_DATA_MAP
}

BEGIN_MESSAGE_MAP(MyFileDialog, CFileDialog)
ON_CBN_SELCHANGE(IDC_CONTEXT_COMBO, &MyFileDialog::OnCbnSelchangeUniqueNumber)
ON_CBN_SELENDOK(IDC_CONTEXT_COMBO, &MyFileDialog::OnCbnSelchangeUniqueNumber)
END_MESSAGE_MAP()

BOOL MyFileDialog::OnInitDialog() 
{
CFileDialog::OnInitDialog();

//AfxEnableControlContainer();

const UINT iExtraSize = 300;
// Get a pointer to the original dialog box.
CWnd *wndDlg = GetParent();
RECT Rect;

wndDlg->GetWindowRect(&Rect);
// Change the size of FileOpen dialog
wndDlg->SetWindowPos(NULL, 0, 0, 
                    Rect.right - Rect.left, 
                    Rect.bottom - Rect.top + iExtraSize,  
                    SWP_NOMOVE);

CWnd *wndComboCtrl = wndDlg->GetDlgItem(cmb1);   
wndComboCtrl->GetWindowRect(&Rect);
wndDlg->ScreenToClient(&Rect); // Remember it is child controls

Rect.top += 60;
Rect.bottom += 120;
Rect.left += 50;

m_ComboContext.Create(WS_CHILD | WS_VISIBLE | CBS_DROPDOWN | CBS_SORT | WS_VSCROLL | WS_TABSTOP, Rect, wndDlg, IDC_CONTEXT_COMBO);      

    m_ComboContext.SetFont(wndComboCtrl->GetFont(), TRUE);

        m_ComboContext.AddString(_T("Lou1") );
    m_ComboContext.AddString(_T("L432") );
    m_ComboContext.AddString(_T("Lou2") );
    m_ComboContext.AddString(_T("Lou3") );

return true ;
}

void MyFileDialog::OnCbnSelchangeUniqueNumber()
{
AfxMessageBox( _T("OnCbnSelchangeUniqueNumber"), 0, 0 ) ;
} 
```

这是来自 CComboBox 的派生类：

```
 IMPLEMENT_DYNAMIC(LouComboBox, CComboBox)

   LouComboBox::LouComboBox() {  }

   LouComboBox::~LouComboBox() {  }

BEGIN_MESSAGE_MAP(LouComboBox, CComboBox)
ON_CONTROL_REFLECT(CBN_SELCHANGE, &LouComboBox::OnCbnSelchange)
ON_CONTROL_REFLECT(CBN_KILLFOCUS, &LouComboBox::OnCbnKillfocus)
ON_CONTROL_REFLECT(CBN_SELENDCANCEL, &LouComboBox::OnCbnSelendcancel)

ON_CBN_SELCHANGE(IDC_CONTEXT_COMBO, &LouComboBox::OnCbnSelchangeUniqueNumber)
END_MESSAGE_MAP()

void LouComboBox::OnCbnSelchange()
{
// TODO: Add your control notification handler code here
AfxMessageBox( _T("Menu selected"), 0, 0 ) ;
}

void LouComboBox::OnCbnKillfocus()
{
// TODO: Add your control notification handler code here
AfxMessageBox( _T("Lost focus"), 0, 0 ) ;
}

void LouComboBox::OnCbnSelendcancel()
{
AfxMessageBox( _T("OnCbnSelendcancel"), 0, 0 ) ;
}

void LouComboBox::OnCbnSelchangeUniqueNumber()
{
// TODO: Add your control notification handler code here    
AfxMessageBox( _T("OnCbnSelchangeUniqueNumber"), 0, 0 ) ;
} 
```

我已经尝试过对话框类具有消息映射/DoDataExchange，ComboBox 类具有它们，两个类都有它们的版本。

我能够捕捉到一些事件——不过，CComboBox 没有。我可以让对话框响应 ON_NOTIFY、ON_WM_DESTROY 和编辑框响应 ON_WM_KILLFOCUS。

I have this nagging thought that this is a forehead-slapper, that I'm too close to this and can't see the obvious.

ANy help, assistance, direction would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-10-07T03:29:29.647

You need to provide a hook procedure to the dialog to capture the messages. Details here: [http://msdn.microsoft.com/en-us/library/windows/desktop/ms646931%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646931%28v=vs.85%29.aspx)

# java - 我在地图上有一条路。如何将其转换为函数？

> ID：719362
> 
> 赞同：4
> 
> 时间：2009-04-05T17:47:07.047
> 
> 标签：java, algorithm, gis

我有一个地图的图像文件和一条用粗红线标记的弯曲道路（宽度超过 1 px，图像上没有其他红色物体）。有人可以建议如何将这条路识别为一条线，然后将其转换为函数 y=f(x) 以便我可以测量精确的距离。我不知道从哪里开始...

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T17:57:13.043

逐像素检查图像并检查每个像素的颜色。如果像素为红色，则将该点（x/y 坐标）添加到构成道路的点列表中。

我不确定你所说的功能是什么意思。你想要一个多项式还是一个函数来确定一个特定的点是否在路上？如果是前者，请寻找具有曲线拟合函数的数学库，该函数将采用一组点并返回最适合这些点的多项式。不过，我怀疑您可能想要后者。在这种情况下，只需让函数获取相关坐标并搜索您的点集以确定该点是否在集合中。如果您使用将坐标编码为可以使用 O(1) 操作查找的键的映射/哈希，这将最快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T17:58:06.113

尝试查找[插值](http://en.wikipedia.org/wiki/Interpolation)。我使用了类似于您在物理模拟器上所说的东西。为此，您需要做的是找到一些代表道路的一般点，所有点之间都有一个恒定的空间。然后，您可以将每组 3 个点映射到一个二次方程（如果这些点均匀分离，则很容易）。之后，您需要对附近的方程进行插值。如果你愿意，我有一些你可以使用的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T21:38:23.603

由于您现在知道方向，因此您可以找到两边边缘的方程式并找到中间的方程式。之后，您可以将这些点放入一个新的方程中。

编辑：我想这类似于评论者指出的侵蚀文章。[这](http://en.wikipedia.org/wiki/Erosion_(morphology))是链接（显然发布的链接已损坏）。

# c++ - “Spybot Search & Destroy”应用程序使用哪个 GUI 框架？

> ID：719364
> 
> 赞同：0
> 
> 时间：2009-04-05T17:47:34.173
> 
> 标签：c++

我想在我自己的应用程序中复制 Spybot Search & Destroy 的外观和感觉。是否有公开可用的框架、工具包或库来帮助完成这项任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T19:13:14.467

AFAICR 它是用 Delphi 编写的。使用 C++ Builder，您可以使用来自 C++ 的 Delphi 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-08T22:59:51.977

在这篇博文中，他们提到他们使用 Delphi：

[http://www.safer-networking.org/en/news/2005-06-22.html](http://www.safer-networking.org/en/news/2005-06-22.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T18:43:31.233

在我看来，它就像一个 MFC 应用程序。

[http://www.safer-networking.org/de/tutorial/index.html](http://www.safer-networking.org/de/tutorial/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T18:52:44.440

大多数使用本机操作系统小部件的 GUI 框架都允许您生成类似的东西。

这里有 2 个使用操作系统原生小部件的 GUI 框架。

*   MFC
*   wxWidgets

# c# - 将 orderby、Skip() 和 Take() 与 LINQ 一起使用时出现重复行

> ID：719387
> 
> 赞同：5
> 
> 时间：2009-04-05T18:01:30.473
> 
> 标签：c#, linq, c#-3.0

我正在使用以下代码来查询我的数据库：

```
private const int PAGE_SIZE = 10;

public static IList<Image> GetTopImagesForUser(String connectionString, int userID, int page)
{
    dbDataContext db = new dbDataContext(connectionString);
    var images = (from p in db.Images
                  where (p.SubmitterUserIndex == userID &&
                         p.URL != "none" &&
                         p.ThumbURL != "none")
                  orderby p.Rep descending
                  select p).Skip(page * PAGE_SIZE).Take(PAGE_SIZE);
    /* snip */
    return topImages;
} 
```

**如果我用 0页**调用此代码，一切都按我想要的方式工作 - 我得到一个有序的列表，10 个结果，一切都是正确的。

**但是，如果我用第 1页**调用此代码，则第 0 页中的行最终会出现在第 1 页中。我什至无法理解为什么。我检查了我的数据库是否有重复的行，没有。我已检查以确保每一行的**URL**和**ThumbURL 都不**是“无”。这也不是问题。我已经检查以确保**页面**是我在调用此方法时所期望的，并且始终是我所期望的。

真正让我感到困惑的是，以下方法与第一种方法仅在**orderby**子句中有所不同，*完全按预期工作*。

```
public static IList<Image> GetAllImagesForUser(String connectionString, int userID, int page)
{
    dbDataContext db = new dbDataContext(connectionString);
    var images = (from p in db.Images
                  where (p.SubmitterUserIndex == userID &&
                         p.URL != "none" &&
                         p.ThumbURL != "none")
                  orderby p.SubmitTime descending
                  select p).Skip(page * PAGE_SIZE).Take(PAGE_SIZE);
    /* snip */
    return allImages;
} 
```

有没有人遇到过这样的事情？我的查询应该采取不同的形式来做我想做的事情吗？我不确定我可能会错过什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-05T18:05:15.957

当您说您没有任何“重复行”时 - 是否有任何返回的行具有相同的 Rep 值？如果是这样，其中的排序将是不确定的。

尝试

```
orderby p.Rep descending, p.SubmitTime 
```

（或将完全确定的其他排序）以获得更可预测的结果。

另外，这是 LINQ to SQL 吗？如果是这样，您应该查看生成的 SQL 以了解发生了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T18:12:46.063

当不使用 LINQ 时，我对分页中的类似问题感到困惑，而只是使用 SELECT 查询（在存储过程中）。我认为问题可能在于 Rep 字段不是唯一的，但 SubmitTime 字段作为日期可能是唯一的。

我建议您在 Rep 之后尝试第二个字段，以使 Order By 始终以相同的顺序返回结果。它可以是使记录唯一的任何字段；您不必在结果中使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T18:06:18.497

`Rep`您在第一种情况下排序的列可能包含重复项。当您从包含 100 个值为 1 的行的列表中选择前 10 个时，无法保证将返回哪些行。更改 order by 子句以包含唯一列。

# asp.net-mvc - 使用模型对象更新 ModelState

> ID：719390
> 
> 赞同：14
> 
> 时间：2009-04-05T18:03:27.770
> 
> 标签：asp.net-mvc

问题：如何在发布+验证场景中更新 ModelState。

我有一个简单的表格：

```
<%= Html.ValidationSummary() %>
<% using(Html.BeginForm())%>
<%{ %>
    <%=Html.TextBox("m.Value") %>
    <input type="submit" />
<%} %> 
```

当用户提交时，我想验证输入，在某些情况下我想为用户修复错误，让他知道他犯了一个已经修复的错误：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Index(M m)
{
    if (m.Value != "a")
    {
        ModelState.AddModelError("m.Value", "should be \"a\"");
        m.Value = "a";
        return View(m);
    }
    return View("About");            
} 
```

问题是，MVC 将简单地忽略传递给视图的模型，并重新渲染用户输入的任何内容——而不是我的值（“a”）。发生这种情况是因为 TextBox 渲染器会检查是否存在 ModelState 以及它是否不为 null - 使用 ModelState 的值。该值当然是用户在发布前输入的值。

由于我无法更改 TextBox 渲染器的行为，因此我找到的唯一解决方案是自己更新 ModelState。quick'n'dirty 方法是（ab）使用 DefaultModelBinder 并通过简单地更改分配方向来覆盖将值从表单分配到模型的方法；）。使用 DefaultModelBinder 我不必解析 id。以下代码（基于 DefaultModelBinder 的原始实现）是我对此的解决方案：

```
/// <summary>
    /// Updates ModelState using values from <paramref name="order"/>
    /// </summary>
    /// <param name="order">Source</param>
    /// <param name="prefix">Prefix used by Binder. Argument name in Action (if not explicitly specified).</param>
    protected void UpdateModelState(object model, string prefix)
    {
        new ReversedBinder().BindModel(this.ControllerContext,
            new ModelBindingContext()
            {
                Model = model,
                ModelName = prefix,
                ModelState = ModelState,
                ModelType = model.GetType(),
                ValueProvider = ValueProvider
            });
    }

    private class ReversedBinder : DefaultModelBinder
    {
        protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor)
        {
            string prefix = CreateSubPropertyName(bindingContext.ModelName, propertyDescriptor.Name);
            object val = typeof(Controller)
                .Assembly.GetType("System.Web.Mvc.DictionaryHelpers")
                .GetMethod("DoesAnyKeyHavePrefix")
                .MakeGenericMethod(typeof(ValueProviderResult))
                .Invoke(null, new object[] { bindingContext.ValueProvider, prefix });
            bool res = (bool)val;
            if (res)
            {

                IModelBinder binder = new ReversedBinder();//this.Binders.GetBinder(propertyDescriptor.PropertyType);
                object obj2 = propertyDescriptor.GetValue(bindingContext.Model);

                ModelBindingContext context2 = new ModelBindingContext();
                context2.Model = obj2;
                context2.ModelName = prefix;
                context2.ModelState = bindingContext.ModelState;
                context2.ModelType = propertyDescriptor.PropertyType;
                context2.ValueProvider = bindingContext.ValueProvider;
                ModelBindingContext context = context2;
                object obj3 = binder.BindModel(controllerContext, context);

                if (bindingContext.ModelState.Keys.Contains<string>(prefix))
                {
                    var prefixKey = bindingContext.ModelState.Keys.First<string>(x => x == prefix);
                    bindingContext.ModelState[prefixKey].Value
                                    = new ValueProviderResult(obj2, obj2.ToString(),
                                                                bindingContext.ModelState[prefixKey].Value.Culture);
                }
            }
        }
    } 
```

所以问题仍然存在：我是在做一些非常不寻常的事情还是我错过了什么？如果是前者，那么我如何以更好的方式实现这样的功能（使用现有的 MVC 基础设施）？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2011-01-05T08:57:41.783

我知道这篇文章已经相当老了，但这是我以前遇到的一个问题，我只是想到了一个我喜欢的简单解决方案——在你获得发布的值之后清除 ModelState。

```
UpdateModel(viewModel);
ModelState.Clear();

viewModel.SomeProperty = "a new value";
return View(viewModel); 
```

并且视图必须使用（可能已修改）视图模型对象而不是 ModelState。

也许这真的很明显。事后看来是这样！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-06T03:44:10.387

您可以接受表单集合作为参数，而不是控制器中的模型对象，如下所示：`public ActionResult Index(FormCollection Form)`。

因此，默认模型绑定器不会更新模型状态，您将获得所需的行为。

**编辑**：或者您可以更新 ModelStateDictionary 以反映您对模型的更改。

```
 [AcceptVerbs(HttpVerbs.Post)]
public ActionResult Index(M m)
{
    if (m.Value != "a")
    {
        ModelState["m.Value"].Value = new ValueProviderResult("a", m.Name, 
                    CultureInfo.CurrentCulture);
        ModelState.AddModelError("m.Value", "should be \"a\"");
        m.Value = "a";
        return View(m);
    }
    return View("About");            
} 
```

注意：我不确定这是否是最好的方法。但它似乎有效，它应该是你想要的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T16:10:19.900

> 我是在做一些非常不寻常的事情还是我错过了什么？

我认为这是非常罕见的。我认为 MVC 假设验证错误是是/否事件，在这种情况下，您使用验证错误作为提供一般用户反馈的手段。

我认为，当 POST 由于验证错误而失败，或者执行操作并重定向或呈现完全不同的东西时，MVC 似乎也是最快乐的。在模型验证错误之外，重新渲染相同的输入是非常罕见的。

我已经使用 MVC 大约一年了，只是在另一个上下文中遇到了这个问题，在 POST 之后我想呈现一个新的表单作为响应。

```
[HttpPost]
public ActionResult Upload(DocumentView data) {
   if(!ModelState.IsValid) return View(data);
   ProcessUpload(data);
   return View(new DocumentView());
} 
```

MVC 正在渲染`ModelState`from `data`，而不是我的新对象。非常令人惊讶。

> 如果是前者，那么我怎样才能以更好的方式实现这样的功能

1.  在javascript中实现自动修复（可能不可能）
2.  保留所做的自动修复列表，如果对象在所有这些之后仍然有效，则将其传递到“关于”视图并显示为“M 已保存，具有以下更正：...”之类的消息。

# iphone - 扩展 UIScrollView 并监控滚动事件

> ID：719392
> 
> 赞同：14
> 
> 时间：2009-04-05T18:04:36.833
> 
> 标签：iphone, cocoa-touch

我想在 iPhone 应用程序中实现一些自定义的、可重用的和高效的滚动行为，所以我用我的自定义控件扩展*UIScrollView并希望跟踪滚动动作。*

现在我知道我可以将我的自定义控件分配为*UIScrollViewDelegate*并在内部响应*scrollViewDidScroll*调用，但这对我来说感觉不正确（我可能错了）。

感觉不正确，因为委托针对的是应用程序特定的 UI 逻辑，并且控件应该高于此级别。这也意味着如果应用程序类也将自己分配为委托，我需要中继委托调用，这似乎效率低下。

作为*UIScrollView*的直接后代，我希望能够覆盖触发*scrollViewDidScroll*委托调用的方法，或者可以访问模板方法，或者监听滚动事件，但我看不到任何此类选项。

查看*UITableView.h*文件，*UITableView*似乎没有将自己设置为*UISCrollViewDelegate*所以我想知道它是如何管理的（我假设它回收单元格时必须跟踪它们相对于可见边界的位置）。

我对这个平台很陌生，所以我可能会遗漏一些明显的东西。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2011-04-19T07:53:34.777

找到了！！（完全是意外）

我已经辞职，将我的 UIScrollView 子类作为委托分配给 super，然后实现*scrollViewDidScroll:*委托方法，但是在实现的过程中，我在 scrollViewDidScroll 方法的中间遇到了一个异常。快速查看堆栈跟踪告诉我我的委托方法实际上是从**setContentOffset 调用的：**

事实证明，如果您***覆盖 setContentOffset:***每次滚动视图移动时都会收到一个电话！它带有一个方便的 contentOffset 结构来告诉你滚动视图当前在哪里:)

```
- (void)setContentOffset:(CGPoint)contentOffset
{
    [super setContentOffset:contentOffset];

    NSLog(@"ViewDidScroll: %f, %f", contentOffset.x, contentOffset.y);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-26T13:57:15.633

我同意你原来的评价。如果您正在更改滚动逻辑本身（而不是响应滚动），那么这是一个子类，而不是一个委托。

UIScrollView 被设计为子类化，并在参考中包含了关于它的小讨论。特别是它建议覆盖`-touchesShouldBegin:withEvent:inContent:`,`pagingEnabled`和`touchesShouldCancelInContentView:`, 这可能是您想要完成您所描述的工作的地方。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-08T03:28:27.767

如果有疑问，您绝对应该使用委托方法，但是有时（我现在只需要在 iOS 开发的最后 5 年中这样做）子类化是要走的路。

Jo-el 的回答对于 Obj-C 是正确的。这是在斯威夫特：

```
class FeedScrollView: UIScrollView {

    override var contentOffset: CGPoint {
        willSet(newContentOffset) {
            print("About to set Offset: \(newContentOffset)")
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T20:15:52.040

> （我可能错了）

我想你是。如果不了解您的应用程序的详细信息，委托方法听起来正是您想要的。请记住，控制器（`UIViewController`子类）也可以是其视图的委托。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T18:31:45.590

我认为代表中继是你想要的。它可以让您使用已发布的 API，这通常是推荐的，而不是覆盖您实际上不应该知道的函数。我同意它看起来确实比它应该的更混乱，但如果 UIScrollViewDelegate 中的钩子是您自定义所需的，那么听起来这是您最好的选择。

你也可以提供你自己的自定义委托对象/协议给任何 UIViewController 使用你的滚动视图来做一些视图特定的逻辑。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-12-05T05:44:17.307

您可以使用以下协议来监听滚动位置：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    NSLog(@"scroll");
} 
```

请参阅[此链接](https://developer.apple.com/library/ios/documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html#//apple_ref/doc/uid/TP40006923-CH3-SW3)（UIScrollViewDelegate 上的 Apple 文档）。

另请参阅[此链接](https://stackoverflow.com/questions/993280/how-to-detect-when-a-uiscrollview-has-finished-scrolling/20017639#20017639)（一些设置委托的代码）。

# iphone - 查找重复的 iPhone 应用程序

> ID：719410
> 
> 赞同：3
> 
> 时间：2009-04-05T18:20:59.740
> 
> 标签：iphone

如何最有效地确定我对 iPhone 应用程序的想法是否已经完成？iTunes 的搜索不适用于此目的，而且我看到的涵盖 iPhone 应用程序的网站的覆盖范围并不全面。（也许我只是还没有找到这样做的网站。）我还没有注册 iPhone 开发者计划；也许这个搜索工具就在那个有围墙的花园里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T19:17:58.527

以下博文

[一台榨汁机：管理 App Store Beast](http://theappleblog.com/2008/12/26/one-juicer-managing-the-app-store-beast/)

有一些提示如何实现这一点。例如，通过使用 AppShopper 的 RSS 提要。也许你可以从那里刮掉一些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T20:36:12.677

使用谷歌搜索 ;-) 几乎每个应用程序都有一个专门的网页，除了在应用程序商店之外，谷歌每天都能击败蹩脚的应用程序商店搜索，这已经不是什么秘密了

虽然 google 不是 100% 的解决方案，但它总比其他大多数来源好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T18:18:34.090

我发现 App Store 是最好的，尽管它有缺点，因为它的权威性和全面性。感谢您的回答。

# objective-c - 只能在 Objective-C 类上创建类别吗？

> ID：719412
> 
> 赞同：1
> 
> 时间：2009-04-05T18:21:38.367
> 
> 标签：objective-c

我见过的所有类别示例都使用一些 Objective-C 类而不是自定义类。例如：NSMutableArray、NSArray、NSString。我想为自定义类创建一个类别。这是我创建的一个无用示例，只是为了测试但编译失败：

```
//person.h
@interface Person (aCategory) : NSObject {
NSString *MyName;
NSString *webAddress;
}
@property(nonatomic, retain) NSString *MyName;
@end

//person.m
#import "Person+aCategory.h"

@implementation Person
@synthesize MyName;
@end 
```

以及类别定义：

```
@interface aCategory : NSObject {
NSString *webAddress;
}
@property(nonatomic, retain) NSString *webAddress;
- (void)changeWebAddress;
@end

//in aCategory.h
#import "aCategory.h"

@implementation aCategory
@synthesize webAddress;

- (void) changeWebAddress{
self.webAddress = @"http://www.abc.com";
}
@end 
```

这将给出以下错误和警告：

```
error: Person+aCategory.h: no such file or directory
warning: cannot find interface declaration for Person
error: no declaration of property 'MyName' found in interface 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T18:34:56.290

您定义的自定义 Objective-C 类仍然是一个 Objective-C 类。您可以在它们上创建类别，是的。这里的问题是你写的不是定义类别的正确方法。

首先你定义一个普通的类。你把所有的实例变量和你想要的任何方法都放在那里。

然后定义一个类别，将方法添加到它所在的类。类别不来自任何父类或具有 ivars，因为它们只是将方法添加到现有类。

有关完整文档，请参阅 Apple 的[The Objective-C Programming Language](http://developer.apple.com/documentation/Cocoa/Conceptual/ObjectiveC/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T19:08:21.703

您可以在任何 Objective-C 类上创建一个类别。通常，示例会在 NS 类上显示类别，因为您通常无法直接更改类，如果您拥有类的源代码，您会这样做。

我通常在我自己的类中使用类别作为私有方法，但我不会为它们创建单独的类，我只是在 .m 文件中声明类别的@interface。

[这是](https://stackoverflow.com/questions/360968/category-usage-in-objective-c/361140#361140)一个答案的链接，它总结了类别的使用。

在评论之后，这是重写代码的一种方法：

```
//person.h
@interface Person : NSObject {
    NSString *myName;
    NSString *webAddress;
}
@property(nonatomic, copy) NSString *myName;
@property(nontatomic, copy) NSString *webAddress;
@end

//person.m
#import "Person.h"

@interface Person (aCategory)
- (void)changeWebAddress;
@end

@implementation Person
@synthesize myName;
@synthesize webAddress;
@end

@implementation Person (aCategory)
- (void)changeWebAddress {
    self.webAddress = @"http://www.abc.com";
}
@end 
```

# delphi - 使用 Fast Report 打印时使用的最后一台打印机（在 Delphi 中）

> ID：719416
> 
> 赞同：0
> 
> 时间：2009-04-05T18:23:54.367
> 
> 标签：delphi, winapi, fastreport

从快速报告（基础版 4.7.1 版）中的预览窗口打印时如何检索最后用户选择的打印机？

我试过

```
frxReport.PrintOptions.Printer 
```

在 OnAfterPrintReport 事件中，但它只返回系统默认打印机。

用户打印报告后，程序会打印一些 Word 文档，我需要知道最后使用的是哪台打印机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-02-08T11:58:09.427

使用 API Hook 来存储上次使用的打印机有点太多了，不是吗？

我在 FastReport 官方论坛中发现了这种更好的方法：

```
S:=.../Load From Registry
frxreport1.PrintOptions.Printer:=S;//thats the last selected printer
frxreport1.Print;
S:=frxPrinters.Items[frxPrinters.PrinterIndex].Name;//thats a global var defined in frxPrinter
//Save S to Registry. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-07T01:23:50.310

在完全不同的方向（API 挂钩）进行大量研究后，我想出了这个：

```
var
  sLastUsedPrinter: String;

threadvar
  ghHook: Integer;

...

//set frxPrintDialog hook
ghHook := SetWindowsHookEx(WH_CBT, @PrintDialogHookProc, 0, GetCurrentThreadId);
//show prepared report
frxReport.ShowPreparedReport;
//unhook frxPrintDialog hook
UnhookWindowsHookEx(ghHook);

...

function PrintDialogHookProc(uMsg, wParam, lParam: Integer): Integer; stdcall;
var
  //15 chars in 'TfrxPrintDialog' + 1 for string terminator
  sClassName: array [0..15] of Char;
  frxPrintDialog: TForm;
  PrintersCB: TComboBox;
begin
  //when a windows gets activated
  if uMsg = HCBT_ACTIVATE then
  begin
    //get window class name
    GetClassName(wParam, sClassName, 16);
    //window class name is Fast Report's Print Dialog
    if String(sClassName) = 'TfrxPrintDialog' then
    begin
      frxPrintDialog := FindControl(wParam) as TForm;
      PrintersCB := frxPrintDialog.FindComponent('PrintersCB') as TComboBox;
      //remember currently selected printer
      sLastUsedPrinter := PrintersCB.Text;
      //OnChange event handler for the printer selection ComboBox
      PrintersCB.OnChange := PrintersCBChange;
    end;
  end;
  Result := CallNextHookEx(ghHook, uMsg, wParam, lParam);
end;

procedure PrintersCBChange(Sender: TObject);
begin
  //remember last user selected printer
  sLastUsedPrinter := (Sender as TComboBox).Text;
end; 
```

在实际代码中 sLastUsedPrinter 和 PrintersCBChange 实际上是类成员，但我更改了它们以保持简短（呃）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-21T16:27:13.953

查看该`TfrxPreviewPages.Print`函数的 FastReport 源代码，很明显，`OnPrintReport`事件处理程序是在选择打印机之后但在打印作业执行之前调用的。

我将以下代码放入我的`OnPrintReport`处理程序中：

```
PrinterName := frxPrinters.Printers[frxPrinters.PrinterIndex]; 
```

并`PrinterName`产生了我在 FastReport 打印机选择中选择的任何打印机。

一旦你有了它，你可以稍后通过执行以下操作来选择它：

```
frxReport.PrepareReport(True);
frxReport.PrintOptions.Printer := PrinterName;
frxReport.PrintOptions.ShowDialog := True;
frxReport.Print; 
```

我已经验证了所有这些都有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T18:03:40.023

您可以将应用程序的默认打印机存储在注册表中，并在打印之前获取它。

# objective-c - 判断 NSNumber 是否为 NaN

> ID：719417
> 
> 赞同：52
> 
> 时间：2009-04-05T18:24:28.220
> 
> 标签：objective-c, cocoa, nan, nsnumber

如何确定 Cocoa 是否`NSNumber`代表 NaN（*不是数字*）？

例如，当我解析具有无效（非数字）内容的字符串时，就会出现这种情况。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2009-04-05T18:33:58.150

所以，我发现类属性`[NSDecimalNumber notANumber]`就是为了这个目的。在某些语言中 NaN != NaN，但在 Cocoa 中并非如此。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-04-06T22:15:20.997

正如 Mike Abdullah 所说，在 Cocoa 中表示 NaN 的自然方式是使用`nil`，但`[NSNumber numberWithDouble:NAN]`确实返回一个有效对象。没有`NSNumber`特定的方法可以检测到这一点，但一般方法`isnan([foo doubleValue])`, 有效。如果你不喜欢函数，你可以把它放在一个类别中。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2011-06-29T15:13:55.107

对于小数，至少：

```
[[NSDecimalNumber notANumber] isEqualToNumber:myNumber] 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-11-15T19:01:48.857

要确定 NSNumber 是否为 NaN，请将其转换为双精度并使用 C 函数`isnan()`：

```
NSNumber *validNumber = [NSNumber numberWithDouble: 1.];
NSLog( @"%d", isnan(validNumber.doubleValue) ); // prints "0"

NSNumber *nanNumber = [NSNumber numberWithDouble: 0./0.];
NSLog( @"%d", isnan(nanNumber.doubleValue) ); // prints "1" 
```

但是，您应该小心，因为还有其他特殊值，例如：

```
NSNumber *posInfinity = [NSNumber numberWithDouble: 1./0.];
NSLog( @"%d", isnan(posInfinity.doubleValue) ); // prints "0" 
```

如果您还想检查这些值，最好`isnormal()`改用：

```
NSLog( @"%d", isnormal(validNumber.doubleValue) ); // prints "1"
NSLog( @"%d", isnormal(nanNumber.doubleValue) ); // prints "0"
NSLog( @"%d", isnormal(posInfinity.doubleValue) ); // prints "0" 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-08-03T20:22:05.883

我发现这行得通，但它合法吗？

```
NSNumber *NaN = [NSDecimalNumber notANumber];

NSDecimalNumber *x = ... fill it somehow with NaN content ...

if ( x == NaN ) ... this works 
```

`NaN`保证是一个常`singleton`数值？会很酷，但我想不是，因为我发现的所有示例都使用这些`isEqual`方法。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2010-01-21T18:21:26.560

还有我今天发现的函数 isnan()。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-08-04T07:20:11.200

我们也可以使用在 math.h 中定义的#define 如下

```
if(isnan(myNumber))
{  // myNumber is NaN . 
```

`}`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-10-25T19:08:37.917

任何带有 NaN 的布尔表达式将始终返回 false。但这有什么用呢？

我在处理 iPhone 应用程序中的一些手势时，正在从 locationInView 中让 Nan 回来。并且非常高兴地发现任何带有 NaN 的布尔表达式将始终返回 false。我把它用在下面的liek：

//我正在使用`UIPanGestureRecognizer`, 并且似乎在 TouchUp 上我会为 /location .x - .y - 获得 Nan 非常合理，因为在这种情况下，触摸结束没有位置。

```
CGPoint location = [gestureRecognizer locationInView:self];

if ( location.x != location.x || location.y != location.y )
{
 return;
} 
```

那么只要 .x 和 .y 或合法的浮点值，当然它们永远不会不等于它们自己的值。但是在 .x 或 .y 为 NaN 的情况下，比较将是错误的。而且我可以安全地避免使用 Nan 进行计算。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2009-04-06T12:37:31.337

NSNumber 并没有这样的对象，因为如果它不是一个数字，那么，好吧，它不是一个 NSNumber。使用 nil 对象来表示这一点更为常见。

# c# - 关于使用C#从winforms导出到Excel的问题

> ID：719418
> 
> 赞同：1
> 
> 时间：2009-04-05T18:24:35.600
> 
> 标签：c#, winforms, excel

我正在创建一个小型 winforms 应用程序以分发给少数人。我希望用户能够将 DataGridView 的内容导出到 Excel 可以读取的文件中。我希望该文件是 excel 文件，而不是 csv 或 xml。过去，当我创建“导出到 excel”功能时，我总是必须将“Microsoft.Office.Interop.Excel.dll”作为分发的一部分。我只想向用户发送 exe 文件，仅此而已。有没有办法让我摆脱第二个文件？

更新：

将我使用 ILmerge 的程序集与以下 Cmd Line ilmerge /target:winexe /out:PpShiftReport.exe OperatorShiftReport.exe Microsoft.Office.Interop.Excel.dll 结合起来

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T18:38:35.720

如果要创建 .xls 文件，则需要使用互操作程序集或找到另一个可以创建 xls 文件的库（我不知道有任何副手）。没有办法解决许可问题，但如果你想要 .xls 文件，那么你可以放心地假设客户端已经在他们的机器上安装了 excel？（否则他们将如何打开它们？）

为避免这种情况，我通常只导出为 CSV。请记住处理引用（双引号两次以包含文字双引号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T18:46:29.930

使用[ILMerge](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)将互操作 DLL 嵌入到您的 EXE 中。

# communication - Eclipse RCP：在不同 ViewPart 中创建的元素之间的通信？

> ID：719420
> 
> 赞同：2
> 
> 时间：2009-04-05T18:25:30.340
> 
> 标签：communication, eclipse-rcp, jface

在不同 ViewPart 上的页面小部件之间进行通信的最佳方式是什么？

通过侦听器或通过共享对象实例，如“getViewSite().getPart()/getPage()”？什么赞成/反对，什么是最适合你的策略？

感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T20:47:43.367

答案取决于变化的性质。为什么一个 ViewPart 会导致另一个 ViewPart 发生变化？

例如，如果更改是因为一个 ViewPart 正在更改模型数据而另一个 ViewPart 正在显示相同的数据，那么您应该浏览模型。一个 ViewPart 更新模型，另一个正在侦听模型的更改。这是基本的 MVC。

另一方面，如果更改是由于选择引起的（例如，导航视图中选择的更改导致另一个视图显示该选择的内容），那么您应该使用全局选择处理程序。

需要更新问题以更具体以获得正确答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T16:15:27.103

我建议查看 Eclipse 建模框架

# c# - 将字符串转换为双精度

> ID：719423
> 
> 赞同：5
> 
> 时间：2009-04-05T18:26:26.967
> 
> 标签：c#, .net, string, double, globalization

我正在尝试将字符串转换为双精度值，但它并没有返回我所期望的...

```
double dbl;
Double.TryParse("20.0", out dbl); 
```

那段代码返回 200.0（而不是 20.0）作为双精度值。知道为什么吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-05T18:27:46.357

您应该传递`InvariantCulture`给该方法。

这背后的原因是您的区域设置可能设置`.`为分隔符而不是小数点。

```
double.TryParse("20.0", NumberStyles.Any, 
                CultureInfo.InvariantCulture, out x); 
```

# c# - 远程对象和远程连接

> ID：719425
> 
> 赞同：1
> 
> 时间：2009-04-05T18:26:51.273
> 
> 标签：c#, remoting

我正在为一些简单的基于观察者的 IPC 使用 .NET 远程处理。我一直有两个问题：

1.  如果我在几分钟内没有从客户端对远程对象进行任何调用，那么当我尝试调用时会引发错误，指定连接已断开。我怎样才能让这个活着？
2.  我似乎无法通过 TCP 接受来自其他计算机的客户端。我正在使用这样配置的 TcpChannel：

    ```
    BinaryServerFormatterSinkProvider serverProv = new 
        BinaryServerFormatterSinkProvider();
    serverProv.TypeFilterLevel = TypeFilterLevel.Full;
    BinaryClientFormatterSinkProvider clientProv = new 
        BinaryClientFormatterSinkProvider();
    IDictionary props = new Hashtable();
    props["port"] = port;
    TcpChannel channel = new TcpChannel( props, clientProv, serverProv );

    ChannelServices.RegisterChannel( channel, false );

    RemotingConfiguration.RegisterWellKnownServiceType( typeof( Controller ),
        "Controller", WellKnownObjectMode.Singleton ); 
    ```

当客户端应用程序尝试连接`( m_Controller = (Controller)RemotingServices.Connect( typeof( Controller ), "tcp://" + ip + ":2594/Controller" ) )`时，它总是超时。我不在防火墙后面，并且我的端口已正确转发。我可以将此端口用于基于套接字的应用程序，但由于某种原因不能用于远程处理。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-05T20:45:44.963

1.  您是否初始化了 Controller 对象的生命周期？请参阅[http://www.diranieh.com/NETRemoting/InDepthRemoting.htm](http://www.diranieh.com/NETRemoting/InDepthRemoting.htm)。
2.  在这里查看我的答案：[Remoting connection over TCP](https://stackoverflow.com/questions/719576/remoting-connection-over-tcp/719630#719630)。

# sharepoint - SharePoint 是否以任何方式支持 Wiki 标记语言？

> ID：719427
> 
> 赞同：12
> 
> 时间：2009-04-05T18:28:02.953
> 
> 标签：sharepoint, wiki, markup

我倾向于认为答案是否定的。这些搜索词有很多噪音，以至于我无法找到明确的答案。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-04-05T18:57:10.357

开箱即用的 SharePoint Wiki 不支持“完整”标准 Wiki 标记语言。（最常见的“[[page]]”标记是 SharePoint wiki 中唯一使用的 wiki 标记）。这是对 SharePoint wiki 的主要抱怨之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-10T20:08:14.847

如果您更喜欢使用 Markdown 编辑共享文档，则有一种解决方法。

您可以使用优秀的开源[Atom](https://atom.io/)编辑器并将您的文档保存为 html：

1.  编辑您的文档
2.  打开降价预览（`Ctrl`++ `SHIFT`）`M`
3.  右键单击预览窗格，选择*另存为 .html*（必须另存为文件，而不是复制为 .html）
4.  打开文件，复制内容

然后，在 sharepoint 站点上，将文档粘贴为 HTML：

1.  选择“编辑此页面”
2.  点击编辑源
3.  粘贴html文本
4.  点击确定

唯一的缺点是，如果其他人正在编辑同一页面，您将无法将页面从 html 转换回 markdown；这只是一个单向过程。

# css - 审美网络颜色

> ID：719428
> 
> 赞同：13
> 
> 时间：2009-04-05T18:28:11.737
> 
> 标签：css, colors, hex

什么是选择美观的颜色组合和主题的好资源？目前我正在使用颜色选择器并从各个地方窃取。这是一个黑客。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-05T18:32:57.577

*   [色彩爱好者](http://www.colourlovers.com)
*   [配色方案设计师](http://colorschemedesigner.com/)
*   [彩色杰克](http://www.colorjack.com/sphere/)
*   [土坯库勒](http://kuler.adobe.com/)
*   [颜色分配研究](http://www.joehallock.com/edu/COM498/index.html)
*   [色盲资源](http://critiquewall.com/2007/12/10/blindness?printable)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-05T18:32:14.520

我只是想把一些东西扔出去，但更重要的是（IMO）有一个配色方案可以提高可用性，而不是一个美观的配色方案。[设计更多可用网站](http://trace.wisc.edu/world/web/)的资源以及此博客文章可能会引起人们的兴趣，[该博客文章](http://www.allwebdesignresources.com/webdesignblogs/graphics/webdesigncolorcombinationsguide/)同时解决了外观和可用性问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T23:37:10.987

[ColorSchemer](http://www.colorschemer.com/online.html) - 很适合寻找互补色

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T18:32:52.490

您可以在 Kuler 上找到一些用户创建的配色方案：

[http://kuler.adobe.com](http://kuler.adobe.com)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-05T18:33:04.190

我经常使用 kuler.adobe.com。这很有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-05T18:37:09.220

[当你找到你喜欢的页面时，你可以从“我喜欢你的颜色](http://redalt.com/Tools/I+Like+Your+Colors)”中找出所使用的确切颜色

# c# - 如何使用 listitemCollection 之类的占位符

> ID：719429
> 
> 赞同：0
> 
> 时间：2009-04-05T18:31:17.487
> 
> 标签：c#, .net

我在 Web 用户控件中使用了 ListItemCollection。我喜欢它！

**样本.asx**

```
public ListItemCollection Items {
  get {
    return this.ListBox1.Items;
  }
} 
```

**TestForSampleascx.aspx**

```
void Add(WebUserControls.Control3 ctrl1, WebUserControls.Control3 ctrl2) {
  ListBox listbox = ctrl1.FindControl("ListBox1") as ListBox;
  if (ctrl1.Items.Count > 0) {
    foreach (ListItem li in listbox.Items) {
      if (li.Selected)
        ctrl2.Add(li.Text, li.Value);
    }
  }
}

void Remove(WebUserControls.Control3 ctrl) {
  ListBox listbox = ctrl.FindControl("ListBox1") as ListBox;
  if (ctrl.Items.Count > 0) {
    int count = ctrl.Items.Count;
    for (int i = count - 1; i > -1; i--) {
      if (listbox.Items[i].Selected)
        ctrl.Remove(listbox.Items[i].Value);
    }
  }
} 
```

请看！“ctrl.项目。” 我用过。但我想使用其他控件，例如占位符，例如：

```
public PlaceholderItemCollection Items {
  get {
    return this.Placeholder.Items;
  }
} 
```

或者

```
public PlaceholderItemCollection Controls {
  get {
    return this.Placeholder.Controls;
  }
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T00:22:22.993

为什么不直接绑定数据源？

```
DataTable dt = logic_to_get_data();
ListBox1.DataSource = dt;
ListBox1.DataBind(); 
```

# ruby-on-rails - 是我还是 Rails 和 Django 难以在 Windows 上安装？

> ID：719431
> 
> 赞同：2
> 
> 时间：2009-04-05T18:32:07.593
> 
> 标签：ruby-on-rails, django, framework-installation

我尝试让这些框架在 Windows Vista 上运行几天，但无济于事。

每次我以为我让它们工作时，我都会遇到一些涉及 PostgreSQL 或 MySQL 设置的随机错误，或者路径被搞砸或其他一些命令行错误“不被识别为内部或外部命令”（或其他东西）。有人告诉我，这些框架在 Ubuntu 上运行起来要容易得多，但我真的不想进行这种切换，因为我所拥有的一切都在 Windows 上。这些是尝试在 Windows 上运行时的常见问题吗？

我想我会坚持使用 C# 和 .NET，因为一切似乎都很好地协同工作，没有任何“安装 20 个不同的组件”的东西，看看它们是否一起工作。建议使用[Instant Django](http://www.instantdjango.com/)吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-05T18:41:34.857

我已经在多个 Windows 系统（XP 和 Vista）上安装了 Django，完全没有问题。安装 Python 后，只需在命令行中输入以下内容即可，在您提取 Django 的文件夹中：

```
python setup.py install 
```

如果您使用的是 Vista，也许您可​​以尝试“以管理员身份”运行命令窗口，看看这是否会给您带来更好的运气。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-05T19:33:16.977

是的。RoR 和 Django 很难在 Vista 上安装。

我很抱歉没有具体细节，但这里是我的问题的一般叙述以及我是如何克服它的。也许这里有适合你的东西。

对于 Python：您的 Vista 安装可能有一个预先存在的 Python 路径变量会干扰。例如，在我的 HP 计算机上，HP 有工厂提供的 Python。HP Python 路径指向 HP Python，而不是我为 Django 下载的最新路径。检查控制面板-->系统-->高级系统设置-->高级选项卡-->环境变量-->系统变量，然后检查“PATH”是什么。我将这条路径更改为我全新安装的 Python，然后一切正常。

对于 RoR：您使用的是一键式安装程序吗？我忘记了细节，但我知道右键单击 1-Click Installer 文件和“以管理员身份运行”是其中的技巧之一。

对于 RoR 和 Django：此时考虑不使用 MySQL 和 Postgres。使用 Ruby/Python 安装程序附带的默认 SQLite 应该会让您在游戏的这个阶段感到满意。SQLite 足以进行修补，并且不像全栈数据库那样使用那么多资源。

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-05T19:10:25.927

Django 在我的 Vista 上不起作用，那是因为 Vista 搞砸了命令行参数。[有关解决方案，请参阅本页](http://wiki.thinkhole.org/howto:django_on_windows)底部。

以我的经验，Ubuntu 和其他基于 Debian 的操作系统对于除了 C# 和 .NET 之外的几乎所有东西来说都是无故障的开发环境。也就是说，C# 和 .NET 在 Windows 上显然非常出色。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T07:26:07.950

我使用[Instant Rails](http://instantrails.rubyforge.org/wiki/wiki.pl)来解决 Windows 上安装过程困难的抱怨。它包含 Ruby、Rails、MySQL、PHP 和 phpMyAdmin。将文件下载并解压缩到文件夹并运行脚本应该可以完成工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-07-20T12:01:13.677

django 和 python 在我打开 windows 注册表并设置之前，使用 windows vista 命令行对我不起作用：

**计算机\HKEY_CLASSES_ROOT\py_auto_file\shell\open\command（默认）**

到

**"C:\Python26\python.exe" "%1" %***

# c - Ruby 垃圾收集：标记未导出的变量

> ID：719438
> 
> 赞同：2
> 
> 时间：2009-04-05T18:36:02.123
> 
> 标签：c, ruby, garbage-collection

我有几个与**Data_Wrap_Struct**绑定到 ruby​​ 对象的结构，我还提供了 mark() 和 free() 函数。

当我手动启动 GC 或等到它跳入时，我的 ruby​​ 对象被杀死。到目前为止没有什么新鲜事。

奇怪的是：当我尝试用**rb_gc_register_address** () 保护这些对象时，什么也没有发生——我的对象仍然会被杀死。

我只能通过以下方式阻止 GC：

```
objects = rb_ary_new();
rb_gc_register_address(&objects);
rb_ary_push(objects, data); 
```

这是唯一的方法，为什么我不能只使用**rb_gc_register_address** ()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T05:32:22.567

看了一眼，似乎所有类型都排成一行（您正在返回 VALUE 并传入 VALUE ptr），所以我的猜测是标记操作没有正确标记对象，而清扫阶段正在抢夺它们。

也许通过将子对象包装在具有正确标记功能的数组中，您可以保护您的数据对象。

这更像是一个理论而不是一个可靠的答案，但也许这是一个开始。:)

不，具有讽刺意味的是，回到对 Ruby GC 的深入挖掘。希望让一些招聘人员惊叹不已。:D

- 编辑 -

为了补充这一点，我只是在 gc.c 和第 1098 行进行挖掘，你想要*失败*的精确测试是

> if (!(p->as.basic.flags & FL_MARK))

所以做你必须在你的标记函数中包含在你的标志FL_MARK中的事情，这样清扫器就不会……嗯……清扫你。

# wpf - 在 WPF 中，如何捕获画布的一部分以保存为 BMP 或 GIF？

> ID：719441
> 
> 赞同：1
> 
> 时间：2009-04-05T18:38:15.143
> 
> 标签：wpf, vb.net

我有一个生成空中交通重播的应用程序，我需要允许用户捕获部分画布，以便可以将其导出为 GIF 的 BMP。我在 VB6 中做到了这一点，但不确定如何在 WPF 中做到这一点。我计划在鼠标之后在预期的捕获区域周围绘制一个矩形，直到用户触发捕获。

谢谢，

戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T19:01:21.720

[这篇文章](https://stackoverflow.com/questions/716626/how-to-make-a-resizeable-rectangle-selection-tool/716664#716664)中提到的[WPF 交互式图像裁剪控件](http://69.10.233.10/KB/WPF/ImageCropper.aspx)可能与您所追求的很接近。

您还可以查看[RenderTargetBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx)类来复制所选区域。

希望这可以帮助。

# asp.net - 为什么我的 gridview 的列单击不能切换排序方向？

> ID：719444
> 
> 赞同：0
> 
> 时间：2009-04-05T18:39:33.893
> 
> 标签：asp.net, gridview, gridview-sorting

为什么我的 gridview 的列单击不能切换排序方向？

它似乎只在我第一次点击它时对行进行排序，任何其他点击只会刷新页面，而不会改变排序方向。

顺便说一句，我有一个 OnSorting 方法，我调用它来更新要排序的 sql 查询。

我的代码：

```
<asp:GridView ID="gvReport" runat="server" AutoGenerateColumns="False" 
    AllowSorting="True"
    AllowPaging="True" 
    OnSorting="Report_OnSorting">

 public void Report_OnSorting(object sender, GridViewSortEventArgs e)
    {

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-05T18:51:59.357

我想你会在[这个类似问题](https://stackoverflow.com/questions/213148/sort-columns-of-gridview-in-asp-net-c)的许多回复中找到你的答案。

我相信如果你使用最简单的版本，ASP.Net 会为你处理整个排序的事情。

[SqlDataSource 示例](http://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/data/gridview.aspx)中的此代码仅设置 AllowSorting="true" 并在 BoundColumns 中提供 SortExpressions。它没有连接 OnSorting 事件，也没有其他代码。我相信它会为您管理 ASC 和 DESC 之间的切换。在这种情况下，使用可怕的 SqlDataSource，我相信您必须使用 DataSet 而不是 DataReader。

```
<%@ Page Language="C#" %>
<html>
<head id="Head1" runat="server">
  <title>Sorting Data Using GridView</title>
</head>
<body>
  <form id="form1" runat="server">
   <asp:GridView ID="GridView1" AllowSorting="true" runat="server" DataSourceID="SqlDataSource1"
      AutoGenerateColumns="False">
      <Columns>
        <asp:BoundField HeaderText="ID" DataField="au_id" SortExpression="au_id" />
        <asp:BoundField HeaderText="Last Name" DataField="au_lname" SortExpression="au_lname" />
        <asp:BoundField HeaderText="First Name" DataField="au_fname" SortExpression="au_fname" />
        <asp:BoundField HeaderText="Phone" DataField="phone" SortExpression="phone" />
        <asp:BoundField HeaderText="Address" DataField="address" SortExpression="address" />
        <asp:BoundField HeaderText="City" DataField="city" SortExpression="city" />
        <asp:BoundField HeaderText="State" DataField="state" SortExpression="state" />
        <asp:BoundField HeaderText="Zip Code" DataField="zip" SortExpression="zip" />
        <asp:CheckBoxField HeaderText="Contract" SortExpression="contract" DataField="contract" />
      </Columns>
    </asp:GridView>
   <asp:SqlDataSource ID="SqlDataSource1" runat="server"
      SelectCommand="SELECT [au_id], [au_lname], [au_fname], [phone], [address], [city], [state], [zip], [contract] FROM [authors]"
      ConnectionString="<%$ ConnectionStrings:Pubs %>" />
  </form>
</body>
</html> 
```

# templates - Tumblr 使用什么模板语言？

> ID：719448
> 
> 赞同：8
> 
> 时间：2009-04-05T18:40:15.950
> 
> 标签：templates, themes, template-engine, tumblr

[Tumblr](http://www.tumblr.com/docs/custom_themes)为其主题使用了一种非常简单的模板语言：

```
{block:Text}
    <li class="post text">
        {block:Title}
            <h3><a href="{Permalink}">{Title}</a></h3>
        {/block:Title}

        {Body}
    </li>
{/block:Text} 
```

[Start.io](http://start.io/help/layouts)也使用相同的格式：

```
<html>
  <head>
    <title>{Name} @ start.io</title>
  </head>
  <body>
    {Groups}
      <h1>{Name}</h1>
      <ul>
      {Links}
        <li><a href="{Permalink}">{Title}</a></li>
      {/Links}
      </ul>
    {/Groups}
  </body>
</html> 
```

它是定制的，还是使用现有的模板语言？

如果它是定制的，你能建议一些参考来创建类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T19:25:31.897

这些模板引擎看起来是定制的，尽管它们看起来与[Smarty](http://www.smarty.net/crashcourse.php)极为相似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T18:57:44.943

嗯...我认为它是定制的，因为[tumblr 文档](http://www.tumblr.com/docs/custom_themes)中没有提到它，我想如果他们使用现有的模板语言就会这样做。

[不过， JSON 模板](http://json-template.googlecode.com/svn/trunk/doc/Introducing-JSON-Template.html)似乎是一种非常相似的模板语言。试试看 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-02-03T22:06:48.810

我最近发布了一个 PHP 模板引擎，它正是这样做的。从以下网址获取：[https ://www.ohloh.net/p/pheme](https://www.ohloh.net/p/pheme)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-06-29T05:53:09.390

Tumblr 当然有一个自定义解析器。看看[我在 Quora](http://www.quora.com/What-templating-engine-template-language-does-Tumblr-use-to-power-its-layouts/answer/Chris-Lloyd)上的回答，举几个例子说明为什么会这样。

虽然 JSONTemplate 和 Smarty 对变量使用相同的花括号语法，但它们并不兼容。此外，可以看出 Start.io 使用了不同的解析器，因为它允许[自定义条件](http://start.io/help/layouts#conditionals)。Start.io 条件格式为`{if:Var}`或`{if:Var < Num}`。在 Tumblr 中，如果变量是官方的 ()，则这将被写为单个元素块，`{block:Var}`否则如果变量是由用户在`<meta>`标签中指定的，它将使用`{block:IfUserVar}`语法。

# .net - 是否有“编写更快的托管代码：了解成本”的更新版本？

> ID：719449
> 
> 赞同：12
> 
> 时间：2009-04-05T18:40:36.997
> 
> 标签：.net, performance, clr

MSDN [“编写更快的托管代码：了解成本”](http://msdn.microsoft.com/en-us/library/ms973852(loband).aspx)非常好，但它是在 2003 年为 CLR v1 编写的。在某个地方有更新版本吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2010-11-18T06:44:00.103

不。我从未更新过它，但我认为在适当的盐粒下，文章中的一般建议和大多数经验法则今天仍然很好。

（也就是说，今天重复这个实验会很有趣，看看原始时代是如何变化的，生成的代码是如何变化的，以及微处理器是如何变化的。）

大多数原语的相对开销不会有太大变化，但有些会发生巨大变化。例如，非静态委托调用的平庸性能得到了显着改善（如果我没记错的话，在 .NET 2.0 中）。我不愿意认为今天的从业者会竭尽全力避免委托调用，因为我在 2003 年报告说它非常昂贵。

从 .NET 1.1 开始，我预计许多编译后的代码序列会发生变化。会有新的 JIT 编译器优化（在微基准测试中表现不佳）；JIT'd 和 NGEN'd 代码的不同组合（我的文章中没有探讨 NGEN）；多年来，垃圾收集器等关键子系统一直在不断调整。

我重申我的警示性建议，即内存系统效应可能会淹没任何数量的单个托管代码原语操作的成本——并再次注意，很多事情已经发生了变化。例如，03-04 中的大量 CLR 性能工作涉及 NGEN 系统程序集的更好的工作集行为（例如最小化脏私有页面）。

当然，这篇文章的主题是仔细和警惕地衡量代码性能的必要性，而且这个主题是永恒的。

顺便说一句，我一直想写一篇关于前几百个最常用的 .NET BCL 方法的预期/典型时间和空间成本的后续文章，并以警示故事的形式展示我们发现的一些恐怖故事致力于 .NET 性能。这导致了一些非常有趣的思考，即如何描述一个类库/框架的经验性能，正如实际从业者在野外实际使用的那样......

感谢您当时阅读它，并感谢您一直以来的兴趣。

ps 我看到 Vance Morrison 随后就这个主题写了一个很棒的两部分 MSDN 系列——如果你喜欢我的文章，你会喜欢这些：

[http://msdn.microsoft.com/en-us/magazine/cc500596.aspx](http://msdn.microsoft.com/en-us/magazine/cc500596.aspx)

[http://msdn.microsoft.com/en-us/magazine/cc507639.aspx](http://msdn.microsoft.com/en-us/magazine/cc507639.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T20:27:39.093

我不这么认为，而且我认为更新的版本不会有太大的不同。

时间数字会有所不同，因为测试机器可能会更新更快，但测试之间的关系几乎相同。

这篇文章是关于托管代码中常见操作的低级影响的，自这篇文章编写以来并没有太大变化。新版本的框架添加了很多功能，但它们都建立在自 C# 1.0 以来可用的原语之上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T20:00:39.440

我不知道有哪本书可以替代它，但是[通过 C# 编写的 CLR](https://rads.stackoverflow.com/amzn/click/com/0735621632)一书将为您提供很多关于 CLR 如何工作以及它在哪里消耗大量时间和资源的深入和相关的知识。

# hashcode - 具有可逆属性的校验和/哈希函数

> ID：719452
> 
> 赞同：1
> 
> 时间：2009-04-05T18:41:42.873
> 
> 标签：hashcode

我正在寻找具有以下属性的特定哈希码。我不知道任何这样的哈希码，我不知道是否有可能做这样的事情。只是想把它放在那里，看看人们怎么说。

我有两个数据库（松散使用的术语 - 不要想到 SQL 或类似的东西），一个主数据库和一个备份数据库。需要保持两个数据库同步并检测数据库何时不同步。与其验证那里的每个数据，不如保留一些可以验证的哈希码。但是这两个数据库不一定共享所有修改。由于从 master 到 backup 的更改是批处理的，因此从 master 到 backup 的某些修改可能会被折叠。

即：假设数据库的当前状态具有元素 A->X、B->Y 和 C->Z。现在 B 被修改为 B->Y1，然后是 B->Y2。从主服务器发送到备份服务器的唯一更改是 B->Y2。中间的 B->Y1 被跳过。

现在，与其循环遍历每个数据库中的每个元素以验证它们是否匹配，我们更愿意在两个位置保留元素的运行哈希码，然后进行比较。哈希码必须计算如下：

假设 hm0 的前一个哈希码：
hashcode hm1 = f(hm0, A->X, B->Y, C->Z)

当 B 现在发生变化时：
hashcode hm2 = f(hm1, B->Y1)
然后
hashcode hm3 = f(hm2, B->Y2)

所以master会有h3的hashcode。现在备份将不会收到修改 B->Y2，所以如果它计算一个运行哈希码，它将是这样的：

哈希码 hb1 = f(hb0, A->X, B->Y, C->Z)
哈希码 hb2 = f(hb1, B->Y2)

现在我们希望 hb2 和 hm3 匹配，因为数据库的当前状态是相同的。但是大多数（如果不是全部）哈希码都不是这样工作的。

所以我们想要的是，我们首先要从哈希中“移除”B->Y 的贡献，然后“添加”B->Y1 的贡献，然后移除 B->Y1 的贡献并添加B->Y2 对哈希码的贡献。所以我们想要这样的东西：

两个函数 f, g：f 通过添加新元素的贡献来修改现有的哈希码，而 g 通过删除元素的贡献来修改现有的哈希码。

在主机上：
hm1 = f(hm0, A->X, B->Y, C->Z)

当 B 修改为 B->Y1 时：
hm2 = g(hm1, B->Y)
hm3 = f(hm2, B->Y1)

当 B 修改为 B->Y2 时：
hm4 = g(hm3, B->Y1)
hm5 = f(hm4, B->Y2)

hm5 是数据库当前状态的新哈希码 (A->X, B->Y2, C->Z)

备份时：
hb1 = f(hb0, A->X, B->Y, C->Z)

当 B 修改为 B->Y2 时：
hb2 = g(hb1, B->Y)
hb3 = f(hb2, B->Y2)

现在 hm5 和 hb3 应该匹配，因为两个数据库的当前状态是相同的。

那么：有没有这样的算法f和g？我希望我把问题说清楚了......谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T18:51:29.217

只需添加和减去您的代码。h(x) 是任意散列函数：

```
hm2 = hm1 + h(B->Y)
hm3 = hm2 + h(B->Y1)
hm4 = hm3 - h(B->Y1) 
hm5 = hm4 + h(B->Y2)

hb2 = hb1 + h(B->Y)
hb3 = hb1 + h(B->Y2) 
```

hm5 和 hb3 相等。

请注意，它不一定必须是加法或减法。任何可逆操作都可以工作（理论上乘法/除法也可以工作，但可能存在更多溢出问题和关于 0 附近发生的情况的模糊性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T18:59:53.673

唔。我不确定哈希函数是否完全符合您的要求。但似乎类似于 Git 如何存储其修订的结构可能会满足您的需求（这受到 Monotone 如何存储其修订的启发）。

Git 计算存储库中每个文件的 SHA-1 总和。这些用作 blob 标识符。然后它有一个树，它将文件名映射到 blob ID（和其他子树，用于子目录）。树的标识符是它的 SHA-1 和。（虽然它与您的用法无关，但我不相信，这些树随后会被修订引用，其中包括作者、日期和一个或多个父修订等内容）。

这意味着您不必在更新一个 blob 时重新计算每个 blob 的 SHA-1 总和；您只需为更改的 blob 重新计算 SHA-1，然后为树重新计算 SHA-1。

你可以对你的数据做同样的事情。计算每个对象的哈希值，并将所有 key->hash(value) 映射放入一个文件中，然后计算该文件的哈希值。如果包含 key->hash(value) 的文件太大以至于你不想每次都重新散列它，你可以把它分成几个部分，并有一个 key->hash(section)，每个部分都有 key- >哈希（值）。对于大多数情况，一级分支通常就足够了，但如果你真的需要，你可以从这些分支中构建一个树结构。

# search-engine - 是否有搜索引擎可以搜索您输入的确切字词，以及您输入它们的确切方式？

> ID：719471
> 
> 赞同：4
> 
> 时间：2009-04-05T18:53:15.483
> 
> 标签：search-engine, case-sensitive, punctuation

是否有具有以下某些功能的搜索引擎？

*   *区分大小写*："LaTeX" != "latex"*   *不要*在引用的短语中混淆标点符号：“是的！！！” != “是吗？”*   *不*搜索具有相同词干的单词："fracture" != "fractured"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T19:48:41.293

我遇到了这个所谓的[区分大小写的 Google 搜索](http://case-sensitive-search.appspot.com/).. 没关系 .. 我试过的例子在它的实际效用上是成功的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T19:19:29.803

好像没有。。

如果有的话，我认为它不能给出足够的结果......

# jquery - 结合表单验证和关闭弹出窗口？

> ID：719472
> 
> 赞同：0
> 
> 时间：2009-04-05T18:53:45.497
> 
> 标签：jquery, validation, forms, popup

如何确保在表单有效并正确提交之前窗口不会关闭？因为现在它关闭了弹出窗口并且没有人知道表单是否有效。因为即使出现错误，表格也会立即关闭。

```
 $(document).ready(function(){

        $(".requestPassword").hide();
        $(".popupwindow").popupwindow(profiles);

        $(".fp").click(function(){
            $(".loginForm").hide();
            $(".requestPassword").show();
        });
        $(".back").click(function(){
            $(".loginForm").show();
            $(".requestPassword").hide();
        });

        //form validation
         $("#aanmeldForm").validate({

            //set the rules for the field names
            rules: {
            firstname: {
            required: true,
            minlength: 2
            },
            email: {
            required: true,
            email: true
            },
            message: {
            required: true,
            minlength: 2
            },
            },
            //set messages to appear inline
            messages: {
            name: "Please enter your name",
            email: "Please enter a valid email address"

            },
            errorPlacement: function(error, element) {
            error.appendTo( element.parent("td"));
         }

         });

         $("#aanmeldForm").submit(function(){
            //TODO: some data keeping jobs to be done
            self.opener.location = 'http://ladosa.com';
            self.close();
        });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T21:00:37.470

检查表单是否有效，如果不是，返回false；在提交之外：

```
$("#aanmeldForm").submit(function(){
    //TODO: some data keeping jobs to be done
    // make sure the form was valid *before* dismissing the popup
    if($(this).valid()) {
        self.opener.location = 'http://ladosa.com';
        self.close();
        return true;
    }
    // stop the form submitting
    return false;
}); 
```

# sql - 在上传新内容时动态生成 SQL 表 - 一个坏主意？

> ID：719474
> 
> 赞同：2
> 
> 时间：2009-04-05T18:54:27.867
> 
> 标签：sql, mysql, database, postgresql

我有一个有趣的问题，我一直在研究，希望得到一些建议：

作为公司项目的一部分，我正在尝试创建一个模仿需求管理工具的基本功能的工具。

基本设计是类似 Windows 资源管理器的文件夹和文档设置。文档可以在 GUI 中打开、编辑和保存。

文档本身包含一个分层电子表格（如果有意义的话，可以考虑带有章节的 Excel）。每章都包含行，这些行实际上只是一些需求文本+一些补充它的其他值。显示时，需求文本和属性值显示为独立的列（很像 Excel），具有过滤功能。

为此类程序表示用户/权限/文件夹层次结构/等非常简单，但我最感兴趣的是文档内容本身......

我最关心的是大小以及它与性能的关系：作为这个工具的一部分，我不仅打算存储每个文档的当前状态，还打算存储自第一天以来所做的整个更改列表（很像 SVN） ，然后提供对更改历史的快速访问。

平均而言，我预计 repo 中有大约 500 个文档；每个文档可能会有大约 20,000 个活动行；在一年的过程中，假设大约 20,000 次编辑并非不合理（这意味着每个文档本身将年复一年地获得额外的 20,000 行）。

乘以文档的数量，总计将近 10,000,000 行（下一年还有 10,000,000 行，以此类推）。可以清除旧的历史记录，但只能由管理员执行（他/她这样做并不可取）。

在我看来，有两种方法可以处理这种情况：

*   我可以尝试在一个表中表示所有文档的所有行（很像 phpBB 如何将所有论坛的所有帖子存储在一个表中），或者......

*   我可以尝试将每个文档的行存储在一个唯一命名的表中（意味着每个文档都有自己的表）；必须为该表指定一个唯一名称，并且主表将包含所有文档的列表以及对应于每个文档的表名称。

所以我的问题是：哪个真的更可取？两者都不是很好的选择吗？鉴于需要，任何人都可以就您认为更合适的方法提供建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T03:12:26.733

如果您在应用程序的正常日常操作期间以编程方式创建和/或销毁表，我会说这是一个非常糟糕的迹象，表明数据库设计中有问题。

数据库系统可以并且确实可以处理具有那么多行的表。要对该行数进行任何有意义的查询，您确实必须谨慎而节俭地选择索引。我的意思是，您真的必须非常清楚如何查询该表。

但是，我敢说，与您提出的仅根据 ID 或数字任意创建新表的方法相比，实现起来要简单得多。而且，复杂性越少，维护就越容易，并且引入难以调试的讨厌的错误的机会也就越少。

如果你真的热衷于拆分成多个表，那么我建议你看看其他人是如何进行[数据分区](http://en.wikipedia.org/wiki/Partition_(database))的。与其动态创建表，不如根据您认为可能需要的数量从一开始就创建固定数量的表，并根据一些任意的事情（例如在表中有多少记录）为这些表分配记录时间，但可以预测 - 用户的邮政编码是给定的示例，或者文档所在的类别，或者创建它的用户的域名或国家/地区，或者可以用来轻松确定记录位置的逻辑结束了，它将被合理地分散。

One of the benefits of data partitioning this way, where you create all the partitions to start with, is that if you need to in future it's relatively easy to move to multiple database servers. If you are creating and destroying tables dynamically, that's going to make that less attainable.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-05T19:31:42.147

使用多表方法需要考虑的几点：

*   是否有必要在所有文件中查找信息？如果是，您将需要在所有表格中进行搜索，这并不容易实现。
*   如果架构发生更改，更新数据库并不简单，因为代表相同类型实体的所有表都需要更改
*   跟踪有关用户编辑的信息也不是很简单，因为它被拆分为多个编辑（例如：考虑“用户修改了哪些文档”的场景）

您是否考虑过存储数据的替代方法？需要将数据库中的每个excel行存储为表格行吗？将数据存储为 xml 并仅将 idex 保存在数据库中？或者可能只存储跟踪修改和文档版本？应用程序可以承担部分数据库负担并进行过滤吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T21:58:18.970

您可能需要考虑某种文档管理系统。这听起来像是 SharePoint 可以做的事情 - 它可以设置为在签入文档时创建文档的新版本。文档也可能分配有元数据，这可能是必需的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-05T19:00:44.763

拥有多张桌子并没有错。看起来有很多表对你来说是一种更合理的方法。

# vim - 如何在VIM中设置花括号'/括号'/方括号'/算术运算符的语法高亮颜色？

> ID：719476
> 
> 赞同：5
> 
> 时间：2009-04-05T18:56:07.207
> 
> 标签：vim, syntax-highlighting, parentheses, curly-braces

如何突出显示运算符/括号/括号/等。在 VIM 中？我对着色匹配或不匹配的括号/括号不感兴趣。

我试过 ":hi cBracket/whatnot guifg=something" 和 ":hi Operator/cOperator guifg=something" 但这些似乎没有任何影响。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-05T19:12:15.953

Vim 语法着色有两个部分：`syn`命令和`hi`命令。

据我了解，您使用`syn`来定义语法。例如：

```
syn match parens /[(){}]/ 
```

然后你`hi`用来告诉 Vim 如何突出显示`parens`：

```
hi parens ctermfg=red 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-14T19:49:24.250

请参阅 :h pi_paren.txt 关于突出显示匹配的括号：

```
To disable the plugin after it was loaded use this command: >
    :NoMatchParen
And to enable it again: >
    :DoMatchParen
The highlighting used is MatchParen.  You can specify different colors with
the ":highlight" command.  Example: >
    :hi MatchParen ctermbg=blue guibg=lightblue

 ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T19:34:32.603

上面的解决方案破坏了基于语法的代码折叠（因为 {} 覆盖了以前的规则）。我一直无法弄清楚如何解决这个问题......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-01T08:54:59.973

将以下内容放入您的 .vimrc 中以获得红色 ()、{}

```
autocmd BufRead, BufNewFile * syn match parens /[(){}]/ | hi parens ctermfg=red 
```

您可以对方括号执行相同操作，但您需要转义括号字符，将以下内容放入您的 .vimrc 中以获取有色 []

```
autocmd BufRead,BufNewFile * syn match brack /[\[\]]/ | hi brack ctermfg=red 
```

# c# - C#、评估和自定义编译器中方法的纯度？

> ID：719480
> 
> 赞同：1
> 
> 时间：2009-04-05T18:59:40.897
> 
> 标签：c#, .net, compiler-construction

在使用调试器单步执行代码时，您是否曾因 Visual Studio 没有重新评估某些监视表达式而感到沮丧？

我有并且这里有人关心纯方法吗？没有副作用的方法？C# 有很多我喜欢的很棒的东西，但我不能编写纯函数，即没有副作用的静态方法。

如果您要构建自己的 C# 编译器，您可以在其中编写类似这样的内容。

```
function int func(readonly SomeRefType a, int x, int y) { return /*...*/; } 
```

以上不仅是免费函数，唉，我不称它为方法，该函数保证没有任何副作用。C# 关键字`readonly`在这里可以用来表示这一点，并为纯函数提供契约。这些功能总是可以被评估，而不会产生副作用。这是 Visual Studio 始终在手表中评估我的功能的一种方式，尽管错误地假设所有方法调用和用户运算符都有副作用。所有参数都按值复制的方法永远不会产生副作用，但 Visual Studio 无法识别这一点。

我喜欢 C++，因为你可以在编译时做这些事情，我想念 C# 中的这些东西，我认为 C# 对用户来说有点笨拙，基本上不允许某些表达能力，伤害了程序员。许多事情实际上与您在编译时可以做的事情有关，我希望实际看到更多元程序，这些元程序是由编译器运行以编译您的原始程序的程序。

例如，虽然 C# 有布尔值并且不允许类似的东西`if (var a = obj as MyRefType)`，但它不会生成适当的代码。我做了一些挖掘，并注意到 C# 如何无法为无分支条件生成适当的 IL，例如`x > y ? 1 : 0`，有一条 IL 指令用于 C# 编译器不使用的指令。

您想要，还是希望使用开源 .NET 编译器？哪个看起来像 C#，但就你能用它做什么而言，它是完全不同的东西，更具表现力，更灵活，而且完全是糟糕的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T19:09:20.360

并不真地。如果我想要不同的语言选项，我已经有了：

*   F# 用于功能性弯曲
*   Boo 用于具有自定义编译阶段的 DSL 助手

IMO，“由委员会设计”（甚至“由单一的业余语言设计师设计”）语言最终像 C# 一样经过深思熟虑的机会非常渺茫。

能够表达更多的东西会很好吗？绝对地。

让成千上万的人理解同一种语言，真正了解它的人的内置 Visual Studio 集成等是否相当方便？绝对地！

对我来说，“看起来像 C#，但完全不同”听起来像是一个问题，而不是一个解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T19:22:50.483

如果你真的想要纯洁的混合，但你仍然可以使用 OOP 的命令式方面，请使用 F#。它来自 Microsoft，将被产品化并集成到 VS 2010 中。

如果你真的想要一个真正的纯函数式编程，你可以确保你的编程结构中有纯函数，并清楚地区分包括 IO、异常在内的副作用，你可以选择 Haskell。

首先，您可以从微软研究员 Simon Peyton Jones 下载 GHC，这是一个开源的 Haskell 编译器。您还可以下载 Visual Haskell，它是 VS 2005 的插件，用作 Haskell 的 IDE。

欲了解更多信息：

*   [http://haskell.org/ghc/](http://haskell.org/ghc/)
*   [http://www.haskell.org/visualhaskell/](http://www.haskell.org/visualhaskell/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T19:22:50.607

如今，实现一门语言不仅仅是实现一个编译器。我个人沉迷于 Resharper，即使是普通 Visual Studio 提供的更有限的语法高亮、提示、自动完成和编辑器内编译形式也非常复杂和有用。所有这些 UI 内容也必须重新实现。

该领域的一个很好的案例研究是 Spec# 语言。微软并没有将更多功能投入到 C# 中，而是将其变成了一个库，该库提供了一种修饰代码的方式，然后在正常编译步骤之后对其执行静态检查。因此，它被“固定”到您已经使用的任何语言上。

这可能是向 .NET 语言添加更复杂验证的最实用方法。

另外，请注意，即使语言编译器生成带有明显冗余指令的 IL，当 JIT 生成更优化的本机代码时，您也看不到 JIT 做了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T19:13:59.333

为什么要费心编写不同的编译器？您可以通过例如编写 PostSharp 编织器在编译时更改方法（umm，函数）来至少实现您在此处描述的一些内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-05T19:17:41.103

只需遵循这个简单的约定：如果它不是 void，则不要触摸参数。

# c# - 如何确保所有循环在 Parallel.For 中同时完成？

> ID：719485
> 
> 赞同：0
> 
> 时间：2009-04-05T19:01:46.990
> 
> 标签：c#, loops, parallel-processing

在 C# (.NET) 中，我有 2 个循环 ->

```
A for ... do:
{
    B for do:
      { something}

something that evaluates all "for"s in B loop
} 
```

我将 Parallel.For 用于内部循环，但每次运行应用程序时，这些循环的结果都会有所不同。我认为这可能是一些异步工作的结果，但我不确定如何在 VS 2005 Express 中确定它，而且我不确定我是否应该做类似“等到 Parallel.For 完成，然后做所有的事情。

编辑（由于评论需要一些更具体的信息）：

```
 for (int i = 0; i < max; i++) //Pre Vsetky retazce ..
       {
           prefix = 0;
           tempsame.Clear();
           bool spracovane = true;
           int dlzkaI = Items[i, 1].Length;

           if (Items[i, 2] != "1") { spracovane = false; } 

           if (spracovane == false)
         //  Parallel.For(0, max, delegate(int j)
         //    {
                  for (int j = 0; j < max; j++) //Pre kazdy dalsi
                  {

                       int dlzkaJ = Items[j, 1].Length;

                       if (dlzkaJ >= dlzkaI)
                       {

                           CompareInfo myComp = CultureInfo.InvariantCulture.CompareInfo;
                           bool isprefix = myComp.IsPrefix(Items[j, 1], Items[i, 1]);

                           bool issame = false;

                           if (dlzkaJ.Equals(dlzkaI)) issame = true;

                           if (isprefix == true && issame == false)
                           {
                               prefix++;
                           }

                           else if (isprefix == true && issame == true && prefix == 0) 
                           {
                               tempsame.Add(Items[j, 0]);

                           }
                       }
                } 

   if ((prefix==0) && (spracovane==false))
   {
       Items = UpdateUnique(tempsame.ToArray(typeof(string)) as string[], Items);
       unique++;

   }
   } 
```

简而言之，这两个循环遍历相同的字符串数组并仅选择唯一的字符串-> 这意味着该字符串不能是任何其他字符串的前缀。

```
> Car - unique Car - unique Cafeteria -
> unique Automobile - unique Auto - not
> unique - it's prefix of Automobile
> Auto - not unique 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T19:08:07.210

如果你的两个外观与外部变量或副作用有交互，那么你的结果可能最终是不确定的。这是一种解释，您应该检查这些外观是否有交互。看看你的循环是如何*插入*的，考虑`Parallel.For`只在外循环上做。

另一种解释可能是 PFX 还不是一种稳定的技术——它会产生很多奇怪的错误，所以我会等待 .NET 4/VS 2010 并使用它们。

哦，如果你正在做一些数学算法并且想要绝对的顶级性能，我根本不会使用 .NET - OpenMP 要好得多，更不用说线程构建块等。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T12:12:11.747

如果不详细研究代码，则存在一个明显的潜在问题，即您的内部`Parallel.For`循环递增并检查`prefix`在并行循环外部声明的变量。

这意味着并行迭代的功能可能会有所不同，具体取决于哪个线程首先增加此变量。

# php - 如何更改 CakePHP 中路由的基本路径？

> ID：719486
> 
> 赞同：0
> 
> 时间：2009-04-05T19:05:23.300
> 
> 标签：php, facebook, cakephp, routing

我正在使用 CakePHP 生成 Facebook 应用程序（尽管问题不是特定于 Facebook 的）。像往常一样，我正在努力让反向路由正常工作。以前我已经放弃了路由功能，但这次我真的很想让它工作。

问题基本上是 Cake 生成相对于主机服务器基础的 URL，但我们需要相对于 Facebook 画布页面的 URL。所以，当我输入：

```
echo $html->link(__('New Question', true), array('action'=>'add')); 
```

我希望它产生“ [http://apps.facebook.com/appname/admin/questions/add](http://apps.facebook.com/appname/admin/questions/add) ”，但它会产生[http://apps.facebook.com/](http://apps.facebook.com/) **foo/bar** /appname/admin/questions/add "，其中 foo/bar 是从我的主机根目录到应用程序目录的路径。

浏览了配置文件夹中的文件，我没有看到任何明显的东西。任何指针？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-05T19:50:33.693

想办法。

只需要添加这一行：

```
Configure::write('App.base', '/appname/'); 
```

我把它放在我的应用程序的 bootstrap.php 中，但我认为这并不重要。我什至可能会返回并添加几行来检测它是在本地运行还是通过 Facebook 运行......

# robot - Web/HTTP 机器人平台/框架

> ID：719495
> 
> 赞同：0
> 
> 时间：2009-04-05T19:10:32.103
> 
> 标签：robot

是否有用于开发基于 Web/HTTP 的机器人的现有平台/框架？其实我对玩一些网页游戏很感兴趣，可以在其中建造他的城市，选择和训练他的英雄和士兵等等..（例如[Travian](http://www.travian.com/)）但是在游戏中，这些动作需要时间来完成（我讨厌等待..）我尝试编写一个自动工具来处理它们。因此，我尝试通过以下方式找到一个可以减轻开发进度的平台/框架：

*   提供http/https客户端（最好支持Keep-Alive）
*   轻松解析网页，josn 数据**[重要]**
*   支持工作/任务计划
*   启用脚本，例如 javascript、python..
*   事件驱动（我认为这是此类平台/框架的最佳方式）

我做了一个研究，发现[Twisted](http://twistedmatrix.com/trac/wiki/TwistedProject)似乎是最合适的一个，但仍然想知道是否还有另一个最合适的。

是的，我知道并熟悉那些 QA 工具，但我真的很喜欢在 HTTP 级别上运行的控制台应用程序，脚本会告诉它如何处理游戏事件，因此它可以称为机器人......所以我需要一个框架。 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-05T19:23:14.037

你已经离开了，Twisted 绝对不是你想要的。如果您尝试编写脚本的游戏是纯 (X)HTML 的游戏，那么您可以使用 Watir/WatiN/scrubyt 之类的东西来模拟浏览器操作。如果这是一个 Flash 游戏，你最好的选择是反转 swift，根据需要解析和详细说明数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-07-13T13:43:44.633

可能想查看 AutoHotKey，它比您描述的要简单得多，但是很容易编写使用鼠标的宏脚本。此外，它不是合成 I/O 事件，这意味着您可以绕过这类游戏的大多数安全措施。

可能您应该考虑使用 Dojo，它是一个 Javascript 框架。DOH 测试框架下有一个响应鼠标和按键事件的机器人。起初它有点难用，但它似乎非常强大。与其编写“测试”，不如只编写某些操作，例如“建造房屋”或其他什么，然后编写一个决定要做什么的主 js 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T19:23:52.457

然后是 HTML 屏幕抓取工具。考虑一下 PhantomJS - 它是一个基于 WebKit 的无头浏览器。HTML 解析是内置的，以您熟悉的 DOM 作为接口。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-06T19:19:51.007

你试过[机器人框架](http://robotframework.googlecode.com)吗？;)

# c# - 如何将位转换为字节？

> ID：719502
> 
> 赞同：10
> 
> 时间：2009-04-05T19:14:52.013
> 
> 标签：c#, bit-manipulation, byte

我有一个代表位的 128 个布尔值数组。如何将这些 128 位表示形式转换为 16 字节？

例子：

我有一个看起来像这样的数组：

```
0110001100110000100010111011001011010011010001010001101101001100
1000010000000000001000111111111101000011111001111011111011111001 
```

（转换为 1s 和 0s 更简洁）

我需要将这些位转换为以下字节数组：

```
99 48 139 178 211 69 27 76 132 0 35 255 67 231 190 249 
```

编辑：这似乎不起作用：

```
public byte[] ToByteArray() {
    int numBytes = Count / 8;

    if (_bits.Count % 8 != 0) numBytes++;

    byte[] bytes = new byte[numBytes];

    int byteIndex = 0, bitIndex = 0;

    for (int i = 0; i < _bits.Count; i++) {
        if (_bits[i])
            bytes[byteIndex] |= (byte)(1 << bitIndex);

        bitIndex++;
        if (bitIndex == 8) {
            bitIndex = 0;
            byteIndex++;
        }
    }

    return bytes;
} 
```

它输出：

```
198 12 209 77 203 162 216 50 33 0 196 255 194 231 125 159 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-05T20:09:11.057

该代码将第一位视为单词的低位，因此您最终会反转每个单词。作为一个快速和肮脏的修复，试试这个：

```
bytes[byteIndex] |= (byte)(1 << (7-bitIndex)); 
```

这会将数组中的第一位放在第一个字节的最高位置，依此类推。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-05T20:13:14.107

```
bool[] bools = ...
BitArray a = new BitArray(bools);
byte[] bytes = new byte[a.Length / 8];
a.CopyTo(bytes, 0); 
```

* * *

编辑：实际上这也返回：

```
198 12 209 77 203 162 216 50 33 0 196 255 194 231 125 159 
```

错误的字节顺序？无论如何我都会留下答案，以供参考。

* * *

编辑：您可以通过反转数组来使用 BitArray.CopyTo() ，如下所示：

```
bool[] bools = ...
Array.Reverse(bools); // NOTE: this modifies your original array
BitArray a = new BitArray(bools);
byte[] bytes = new byte[a.Length / 8];
a.CopyTo(bytes, 0);
Array.Reverse(bytes); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-05T19:25:35.890

我不知道是否有一种自动的方法可以做到这一点，但你可以用一个简单的算法来做到这一点。

**简单算法：**

1.  创建将用作输出缓冲区的字节数组，并将所有字节初始化为 0。此数组的大小应基于输入布尔数组的长度：ceil(bool_array_length / 8.0)

2.  声明一个索引变量用作当前字节，并将其设置为 0。这会将索引保存在输出缓冲区中。

3.  遍历输入布尔数组中的每个元素。
    3.1。将数字 1 左移数组索引 mod 8。将此数字称为掩码。
    3.2\. 计算你的字节索引作为你当前索引到数组 div 8。
    3.3。如果`true`输入布尔数组中的当前索引有一个布尔值，请`bitwise OR`使用当前字节和掩码执行 a 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-05T20:12:35.183

试试这个函数（写成扩展方法）。

```
public byte[] ToByteArray(this bool[] bits)
{
    var bytes = new byte[bits.Length / 8];
    for (int i = 0, j = 0; j < bits.Length; i++, j += 8)
    {
        // Create byte from bits where LSB is read first.
        for (int offset = 0; offset < 8; offset++)
            bytes[i] |= (bits[j + offset] << offset);
    }

    return bytes;
} 
```

注意：如果位数（布尔值）不是 8 的倍数，它将失败，但从您的问题来看，情况并非如此。只需要很小的修改就可以允许任何长度的位数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-30T10:18:21.850

```
private static byte[] GetBytes(string bitString)
{
    byte[] result = Enumerable.Range(0, bitString.Length / 8).
        Select(pos => Convert.ToByte(
            bitString.Substring(pos * 8, 8),
            2)
        ).ToArray();

    List<byte> mahByteArray = new List<byte>();
    for (int i = result.Length - 1; i >= 0; i--)
    {
        mahByteArray.Add(result[i]);
    }

    return mahByteArray.ToArray();
}

private static String ToBitString(BitArray bits)
{
    var sb = new StringBuilder();

    for (int i = bits.Count - 1; i >= 0; i--)
    {
        char c = bits[i] ? '1' : '0';
        sb.Append(c);
    }

    return sb.ToString();
} 
```

# python - Python 3：正确格式化 zip 模块参数 (newb)

> ID：719503
> 
> 赞同：1
> 
> 时间：2009-04-05T19:16:12.400
> 
> 标签：python, zip

请告诉我为什么此代码失败。我是新手，我不明白为什么我的 zip 参数格式不正确。由于我不确定如何最好地沟通，所以我将展示代码、错误消息以及我认为正在发生的事情。

```
#!c:\python30
# Filename: backup_ver5.py

import os
import time
import zipfile

source = r'"C:\Documents and Settings\Benjamin Serrato\My Documents\python\backup_list"'

target_dir = r'C:\Documents and Settings\Benjamin Serrato\My Documents\python\backup_dir'

today = target_dir + os.sep + time.strftime('%Y%m%d') 

now = time.strftime('%H%M%S')

comment = input('Enter a comment --> ')

if len(comment) == 0:
    target = '"' + today + os.sep + now + '.zip' + '"'
else:
    target = '"' + today + os.sep + now + '_' + \
    comment.replace(' ', '_') + '.zip' + '"'

if not os.path.exists(today):
    os.mkdir(today)
    print('Successfully created directory', today)

print(target)
print(source)
zip_command = zipfile.ZipFile(target, 'w').write(source)

if os.system(zip_command) == 0:
    print('Successful backup to', target)
else:
    print('Backup FAILED')

    enter code here 
```

我收到此错误消息：

```
Enter a comment -->
"C:\Documents and Settings\Benjamin Serrato\My Documents\python\backup_dir\20090
405\134614.zip"
"C:\Documents and Settings\Benjamin Serrato\My Documents\python\backup_list"
Traceback (most recent call last):
  File "C:\Documents and Settings\Benjamin Serrato\My Documents\python\backup_ve
r5.py", line 32, in <module>
    zip_command = zipfile.ZipFile(target, 'w').write(source)
  File "c:\python30\lib\zipfile.py", line 683, in __init__
    self.fp = io.open(file, modeDict[mode])
  File "C:\Python30\lib\io.py", line 222, in open
    closefd)
  File "C:\Python30\lib\io.py", line 615, in __init__
    _fileio._FileIO.__init__(self, name, mode, closefd)
IOError: [Errno 22] Invalid argument: '"C:\\Documents and Settings\\Benjamin Ser
rato\\My Documents\\python\\backup_dir\\20090405\\134614.zip"' 
```

分配之前的两个打印测试`zip_command`告诉我这两个字符串被`zipfile.ZipFile()`正确传递。回溯告诉我我没有`zipfile.ZipFile()`正确调用。中的错误`__init__`使我更加确定这一点。最后，问题似乎是我导致我的路径字符串有双反斜杠。我不明白为什么 IOError 显示了这一点。

我用[这个网站](http://docs.python.org/dev/3.0/library/zipfile.html)来弄清楚如何使用`zipfile`. `zipfile`是一个类，我在程序开始时导入它，然后使用它和它的主要方法。我传递了我想写入的文件并将`zipfile.ZipFile('file to write', 'mode')`程序设置为打开一个设置为可写的对象。然后该命令使用类似这样的子方法将文件写入目标文件夹，`"".zipfile('files to write')`.

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T19:21:44.150

看起来这是因为您的路径名周围有一对额外的双引号。去掉双引号，看看是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T19:24:31.163

回答你的另一个问题：双反斜杠在那里是因为它们被[转义了](http://www.codecodex.com/wiki/index.php?title=Escape_sequences#Python)。

# c# - 减少 if 语句的数量

> ID：719509
> 
> 赞同：2
> 
> 时间：2009-04-05T19:18:09.760
> 
> 标签：c#, conditional

到目前为止，我有以下程序：

```
using System;
namespace ParkingTicket
{
    class Program
    {
        static void Main()
        {
            int speed;
            int yrInSchool;
            double fine;
            char choice = ' ';
            do
            {
                Console.Clear();
                speed = GetSpeed();
                if (speed <= 15)
                    Console.WriteLine("No speeding fine to pay.");
                else
                {
                    yrInSchool = GetYrInSchool();
                    fine = CalculateFine(speed, yrInSchool);
                    DisplayFine(fine);
                }
                choice = GetUserChoice();
            } while (choice != 'Q' && choice != 'q');
        }
        static int GetSpeed()
        {
            int speed;
            string userInput;
            try
            {
                Console.Write("Please enter the speed you were traveling: ");
                userInput = Console.ReadLine();
                speed = Convert.ToInt32(userInput);
            }
            catch
            {
                Console.WriteLine("\a\n INVALID - PLEASE TRY AGAIN");
                Console.Write("Please press enter to continue....");
                userInput = Console.ReadLine();
                speed = GetSpeed();  // this is the recursion - calling myself

            }
            return speed;

            // code this method
        }
        static int GetYrInSchool()
        {
            string userEntry;
            int year;

            /*************************************************************
             *  modify this method to validate the year using a Try/Catch
             *************************************************************/
            Console.WriteLine("\nClassifications");
            Console.WriteLine("\tFreshman  (enter 1)");
            Console.WriteLine("\tSophomore (enter 2)");
            Console.WriteLine("\tJunior    (enter 3)");
            Console.WriteLine("\tSenior    (enter 4)");

            try
            {
                Console.Write("Enter choice: ");
                userEntry = Console.ReadLine();
                year = Convert.ToInt32(userEntry);
            }

            catch
            {
                Console.WriteLine("\a\n INVALID - PLEASE TRY AGAIN");
                Console.Write("Please press enter to continue....");
                userEntry = Console.ReadLine();
                year = GetYrInSchool();  // this is the recursion - calling myself
            }
            return year;
        }
        static double CalculateFine(int speed, int year)
        {
            const double COST_PER_5_OVER = 87.50;
            const int SPEED_LIMIT = 15;
            const double INITIAL_FEE = 75.00;
            double fine = 0;

            if (((year == 1) && (speed >= 15) || (speed <= 19)))
            {
                fine = INITIAL_FEE - 50.00;
            }
            else if (((year == 1) && (speed >= 20) || (speed >= 24)))
            {
                fine += (INITIAL_FEE - 50.00) + COST_PER_5_OVER;
            }
            else if (((year == 1) && (speed >= 25) || (speed <= 29)))
            {
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 2);
            }
            else if (((year == 1) && (speed >= 30) || (speed <= 34)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 3);
            else if (((year == 1) && (speed >= 35) || (speed <= 39)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 4);
            else if (((year == 1) && (speed >= 40) || (speed <= 44)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 5);
            else if (((year == 1) && (speed >= 45) || (speed <= 49)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 6);
            if (((year == 1) && (speed >= 50) || (speed <= 54)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 7);
            if (((year == 1) && (speed >= 55) || (speed <= 59)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 8);
            if (((year == 1) && (speed >= 60) || (speed <= 64)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 9);
            if (((year == 1) && (speed >= 65) || (speed <= 69)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 10);
            if (((year == 1) && (speed >= 70) || (speed <= 74)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 11);
            if (((year == 1) && (speed >= 75) || (speed <= 79)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 12);
            if (((year == 1) && (speed >= 80) || (speed <= 84)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 13);
            if (((year == 1) && (speed >= 85) || (speed <= 89)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 14);
            if (((year == 1) && (speed >= 90) || (speed <= 94)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 15);
            if (((year == 1) && (speed >= 95) || (speed <= 99)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 16);
            if (((year == 1) && (speed >= 100) || (speed <= 104)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 17);
            if (((year == 1) && (speed >= 105) || (speed <= 109)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 18);
            if (((year == 1) && (speed >= 110) || (speed <= 114)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 19);
            if (((year == 1) && (speed >= 115) || (speed <= 119)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 20);
            if (((year == 1) && (speed >= 120) || (speed <= 124)))
                fine = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 21);
            else if (((year == 2) && (speed >= 16) || (speed <= 19)))
                fine = INITIAL_FEE;
            if (((year == 2) && (speed >= 20) || (speed <= 24)))
                fine = INITIAL_FEE + (COST_PER_5_OVER);
            if (((year == 2) && (speed >= 25) || (speed <= 29)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 2);
            if (((year == 2) && (speed >= 30) || (speed <= 34)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 3);
            if (((year == 2) && (speed >= 35) || (speed <= 39)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 3);
            if (((year == 2) && (speed >= 40) || (speed <= 44)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 4);
            if (((year == 2) && (speed >= 45) || (speed <= 49)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 5);
            if (((year == 2) && (speed >= 50) || (speed <= 54)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 6);
            if (((year == 2) && (speed >= 55) || (speed <= 59)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 7);
            if (((year == 2) && (speed >= 60) || (speed <= 64)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 8);
            if (((year == 2) && (speed >= 65) || (speed <= 69)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 9);
            if (((year == 2) && (speed >= 70) || (speed <= 74)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 10);
            if (((year == 2) && (speed >= 75) || (speed <= 79)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 11);
            if (((year == 2) && (speed >= 80) || (speed <= 84)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 12);
            if (((year == 2) && (speed >= 85) || (speed <= 89)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 13);
            if (((year == 2) && (speed >= 90) || (speed <= 94)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 14);
            if (((year == 2) && (speed >= 95) || (speed <= 99)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 15);
            if (((year == 2) && (speed >= 100) || (speed <= 104)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 16);
            if (((year == 2) && (speed >= 105) || (speed <= 109)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 17);
            if (((year == 2) && (speed >= 110) || (speed <= 114)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 18);
            if (((year == 2) && (speed >= 115) || (speed <= 119)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 19);
            if (((year == 2) && (speed >= 120) || (speed <= 124)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 20);
            if (((year == 2) && (speed >= 125) || (speed <= 129)))
                fine = INITIAL_FEE + (COST_PER_5_OVER * 21);
            else if (((year == 3) && (speed >= 16) || (speed <= 19)))
                fine = INITIAL_FEE + 50.00;
            if (((year == 3) && (speed >= 20) || (speed <= 24)))
                fine = INITIAL_FEE + 50.00 + (COST_PER_5_OVER);
            if (((year == 3) && (speed >= 25) || (speed <= 29)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 2);
            if (((year == 3) && (speed >= 30) || (speed <= 34)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 3);
            if (((year == 3) && (speed >= 35) || (speed <= 39)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 4);
            if (((year == 3) && (speed >= 40) || (speed <= 44)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 5);
            if (((year == 3) && (speed >= 45) || (speed <= 49)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 6);
            if (((year == 3) && (speed >= 50) || (speed <= 54)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 7);
            if (((year == 3) && (speed >= 55) || (speed <= 59)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 8);
            if (((year == 3) && (speed >= 60) || (speed <= 64)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 9);
            if (((year == 3) && (speed >= 65) || (speed <= 69)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 10);
            if (((year == 3) && (speed >= 70) || (speed <= 74)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 11);
            if (((year == 3) && (speed >= 75) || (speed <= 79)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 12);
            if (((year == 3) && (speed >= 80) || (speed <= 84)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 13);
            if (((year == 3) && (speed >= 85) || (speed <= 89)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 14);
            if (((year == 3) && (speed >= 90) || (speed <= 94)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 15);
            if (((year == 3) && (speed >= 95) || (speed <= 99)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 16);
            if (((year == 3) && (speed >= 100) || (speed <= 104)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 17);
            if (((year == 3) && (speed >= 105) || (speed <= 109)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 18);
            if (((year == 3) && (speed >= 110) || (speed <= 114)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 19);
            if (((year == 3) && (speed >= 115) || (speed <= 119)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 20);
            if (((year == 3) && (speed >= 120) || (speed <= 124)))
                fine = (INITIAL_FEE + 50.00) + (COST_PER_5_OVER * 21);
            else if (((year == 4) && (speed >= 16) || (speed <= 19)))
                fine = INITIAL_FEE + 100.00;
            if (((year == 4) && (speed >= 20) || (speed <= 24)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER);
            if (((year == 4) && (speed >= 25) || (speed <= 29)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 2);
            if (((year == 4) && (speed >= 30) || (speed <= 34)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 3);
            if (((year == 4) && (speed >= 35) || (speed <= 39)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 4);
            if (((year == 4) && (speed >= 40) || (speed <= 44)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 5);
            if (((year == 4) && (speed >= 45) || (speed <= 49)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 6);
            if (((year == 4) && (speed >= 100) || (speed <= 54)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 7);
            if (((year == 4) && (speed >= 55) || (speed <= 59)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 8);
            if (((year == 4) && (speed >= 60) || (speed <= 64)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 9);
            if (((year == 4) && (speed >= 65) || (speed <= 69)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 10);
            if (((year == 4) && (speed >= 70) || (speed <= 74)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 11);
            if (((year == 4) && (speed >= 75) || (speed <= 79)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 12);
            if (((year == 4) && (speed >= 80) || (speed <= 84)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 13);
            if (((year == 4) && (speed >= 85) || (speed <= 89)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 14);
            if (((year == 4) && (speed >= 90) || (speed <= 94)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 15);
            if (((year == 4) && (speed >= 95) || (speed <= 99)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 16);
            if (((year == 4) && (speed >= 100) || (speed <= 104)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER);
            if (((year == 4) && (speed >= 105) || (speed <= 109)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 18);
            if (((year == 4) && (speed >= 110) || (speed <= 114)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 19);
            if (((year == 4) && (speed >= 115) || (speed <= 119)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 20);
            if (((year == 4) && (speed >= 120) || (speed <= 124)))
                fine = (INITIAL_FEE + 100.00) + (COST_PER_5_OVER * 21);

            // finish coding this method

            return fine;
        }

        static void DisplayFine(double fine)
        {
            Console.WriteLine("Fine: {0:C}", fine);
        }

        static char GetUserChoice()
        {
            Console.Write
                ("\nPress \"C\" to [C]ontinue or \"Q\" to [Q]uit: ");
            string userEntry = Console.ReadLine();
            char choice = Convert.ToChar(userEntry);
            Console.WriteLine("------------------------------------");
            return choice;
        }
    }
} 
```

我有一个完整的列表，这些语句的时速高达 125 英里，并且在不同的年份：1 到 4。我正在尝试制作一个程序，该程序接受车辆速度的输入，然后根据速度提供适当的票务信息。

限速为 15 英里/小时。每小时超过限速 5 英里，总计将增加 87.50 美元。第 2 年是大二，因此适用 50.00 美元的折扣。然而，对于第 4 年，总额中增加了 100.00 美元的费用。对于每种速度，我得到相同的总数。为什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-05T20:37:29.273

其他人关于运算符优先级的说法似乎是正确的，但我认为这里有一个更大的问题。你真的不应该需要无数的 if 语句来模拟这个问题。我相信你现在已经发现这种方法是不可维护的。试图改变那一堆 if 中的任何东西将是一个真正的痛苦并且非常容易出错。

我要做的第一件事是将折扣计算与罚款计算分开。这样您就不必手动计算每个可能的折扣和罚款组合。这就是我所说的：

```
static double CalculateFine(int speed, int year)
{
    const double COST_PER_5_OVER = 87.5;
    const int SPEED_LIMIT = 15;
    const double INITIAL_FEE = 75;

    // Should there be a fine at all?
    if (speed > SPEED_LIMIT) {
        // The discount is 50 for each year, scaled so that year 1 is
        // -50, year 2 is 0, and so on.
        double discount = year * 50 - 100;

        // Now calculate the standard fee.
        int feeMultiplier = (speed - SPEED_LIMIT) / 5;
        double fine = feeMultiplier * COST_PER_5_OVER + INITIAL_FEE;

        return discount + fine;
    }
    return 0.;
} 
```

最后，折扣和罚款只合并了一次。真的，这只是弄清楚使用什么公式来计算罚款然后实施。如果罚款以更任意的方式定义，那么表格可能会很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T20:48:28.717

好吧，这不是一个直接的答案（我认为其他人已经很好地涵盖了这一点），您可能想查看Steve McConnell的*Code Complete一书。*它包含避免使用上述代码的最佳实践。它可以帮助您完成未来的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T19:24:54.690

`(speed >= 50) || (speed <= 54)`

如果您希望这意味着“速度在 50 到 54 之间”，那么您的逻辑就是错误的。你想要和，不是或者。

我不知道这里提供实际答案而不是在那里指导某人的礼仪是什么，但这是你应该瞄准的事情。虽然我没有亲自测试过。

```
static double CalculateFine(int speed, int year)
{
    const double COST_PER_5_OVER = 87.50;
    const int SPEED_LIMIT = 15;
    const double INITIAL_FEE = 75.00;
    double fine = 0;

    if(speed <= SPEED_LIMIT)
    {
        return 0; // No fine imposed
    }

    fine = INITIAL_FEE;

    // Adjust for the different years
    switch(year) {
        case 1:
            fine -= 50;
            break;
        case 2:
            // nowt
            break;
        case 3:
            fine += 50;
            break;
        case 4:
            fine += 100;
    }

    // Add the remaining fine for each 5 miles over the limit
    // XXX: This is slightly different from yours, in that past 125,
    // it'll still keep adding COST_PER_5_OVER
    int perFiveOver = (int)Math.Floor((speed - SPEED_LIMIT) / 5);
    fine += (perFiveOver * COST_PER_5_OVER);

    return fine;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T20:10:21.727

那些 if 语句让我的眼睛流血了——而且它们也不一致。您在第一个范围内的速度存在错误 - 第一年并且速度为 15 会被罚款。在某些情况下，您使用一大行 if 语句，在其他情况下使用 if/elseif 语句。有区别 - 特别是当您测试速度是否 <= 某个数字时。（一堆带有 || or 子句的 if 语句将分别评估为 true，if/else 语句只会评估第一个）。您可能指的是 && (and) 而不是 || （或）-但是为了每个人的理智，您应该替换那些 if 语句。;)

找出公式，然后编写代码——*而*不是结果。看起来它是[1]：

```
 const double COST_PER_5_OVER = 87.50;
    const int SPEED_LIMIT = 15;
    const double INITIAL_FEE = 75.00;

    if (speed <= SPEED_LIMIT)
    {
         return 0;
    }

    double yearSurcharge;
    switch (year)
    {
        case 1:
           yearSurcharge = -50;
           break;
        case 2:
           yearSurcharge = 0;
           break;
        case 3:
            yearSurcharge = 50;
            break;
        case 4:
            yearSurcharge = 100;
            break;
        default:
            yearSurcharge = 0;
            break;
    }

    const int NUMBER_OF_FIVE_OVER = 21;
    int numberOfFiveOver = Math.Min((speed - SPEED_LIMIT) % 5; MAX_NUMBER_OF_FIVE_OVER)

    return INITIAL_FEE + yearSurcharge + (numberOfFiveOver * COST_PER_5_OVER); 
```

这可以简化为以下内容：

```
 if (speed > SPEED_LIMIT) {
         return INITIAL_FEE 
                + (year == 1 ? -50 : year == 3 ? 50 : year == 4 ? 100 : 0) 
                + Math.Min((speed - SPEED_LIMIT) % 5, MAX_NUMBER_OF_FIVE_OVER) * COST_PER_5_OVER;
    } else {
         return 0;
    } 
```

尽管有些人会为年度部分的嵌套三元组争论不休。

[1] 从技术上讲，任何超过 125 的东西都会被罚款 0 美元——但我认为这并不是你真正想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-08T11:27:23.837

通常，如果 If 语句具有至少一个或多个“嵌套”If 语句，您将使用 switch 语句......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-05T19:25:11.770

嘿，我有点困惑，应该是

```
((year == 1) && (speed >= 50) && (speed <= 54)) 
```

?

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-05T19:26:08.133

我认为您混淆了运算符优先级和语义。

首先你要说 (speed >=50) && (speed <= 54)

其次，在 C 中 && 具有更高的优先级，所以你的表达方式是：如果 (year==1 AND speed>=50) OR (如果我的速度低于 54)...

第三，您有一对额外的 ()，这表明您打算以不同的方式优先处理事物。

最后，我会提到那些有一堆类似的 if 语句的代码写得相当糟糕。实现它的更好方法是使用表或数据结构来表示范围，或者至少是更好的组织。

====

更新：既然你已经发布了代码，看起来你真的在这方面工作太努力了......首先，如果或切换基于年份（应该只有大约 4 年）。对于每一年，调用一个单独的函数来进行计算，这已经更干净了。例如：

```
if(year==1) return calculateFineForYear1(speed);
if(year==2) return ... 
```

（我不懂 C#，但应该有某种 switch 语句）

现在您可以分别管理每一年。由于您的条件按速度升序排列，您可以执行以下操作：

```
if(speed<50) return 0;
if(speed<55) return ...;
if(speed<60) return ...;
if(speed<65) return ... 
```

它仍然远非完美，但它已经变得更加清洁和易于管理。

现在，看看你的 ifs，看起来你甚至不需要那么多 ifs，因为你要支付 50 + C*diff，所以为什么不只计算 diff (speed-50) 然后只返回结果计算？

例如：

```
Int total_above_limit = (speed – SPEED_LIMIT);
Int increments_of_5_above_limit = (total_above_limit)/5
Return ( (INITIAL_FEE – 50) + COST_PER_5_OVER*increments_of_5_above_limit)) 
```

（我不懂 C#，我只是猜测语法）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-05T19:26:43.780

不确定我 100% 确定您的代码正在尝试做什么，但问题是否取决于逻辑运算符的优先级，即应该是：

if (((year == 1) && ((speed >= 50) || (speed <= 54)))) 罚款 = (INITIAL_FEE - 50.00) + (COST_PER_5_OVER * 7);

注意速度不等式周围的额外括号。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-06T01:02:56.750

表驱动的方法在这里应该可以很好地工作。定义表中的值，然后遍历它们以找到匹配的值，然后使用它进行计算。这很好用，您可以轻松添加/编辑/删除条目，而无需接触代码 - 完全没有。

您可以从一个简单的静态分配和定义表开始。如果需要，您可以从另一个源（例如 XML 文件）动态加载表。

# c# - Linq - 如何聚合另一个查询的结果

> ID：719510
> 
> 赞同：2
> 
> 时间：2009-04-05T19:18:18.467
> 
> 标签：c#, linq, aggregate

我想获取列表中 where 子句的结果，然后获取该结果集并仅创建一个新类型，该类型的所有字段均由原始查询的聚合构成。所以给出下面的基本示例，是否有将 2 个 linq 语句合并为一个？如果原来的 where 没有行，那么它应该返回 null。谢谢！

```
 class Foo
    {
        public int A { get; set; }
        public int B { get; set; }
    }
    List<Foo> lst = GetFooList();

        var q = (from f in lst
                 where f.A > 3
                 select f).ToList();
        if (q.Count != 0)
        {
            var qq = new
            {
                MinA = q.Min(l => l.A),
                MaxB = q.Max(h => h.B),
            };
            // now do something with qq
        } 
```

更新：对于我的情况，原始集有很多项目，但在 where 子句之后，结果集非常小。多次枚举第二组应该不是问题。此外，我需要在集合中使用 first 和 last 来从这些记录中获取值。按答案分组最适合我。聚合方式非常有趣，我认为它还有另一个用途。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-05T20:58:25.277

此解决方案仅使用 迭代列表一次`Aggregate()`，但对于空列表，它将返回种子值。顺便说一句，种子值是`int.MaxValue`and `int.MinValue`because`Math.Min(int.MaxValue, C)`将始终返回 C，同样`Math.Max(int.MinValue, C)`将始终返回 C。

```
var b = lst.Where(f => f.A > 3)
           .Aggregate(
                  // seed, initial values
                  new
                  {
                     MinA = int.MaxValue,
                     MaxB = int.MinValue
                  },

                  // accumulator function
                  (a,f) => new
                  {
                     MinA = Math.Min(a.MinA , f.A),
                     MaxB = Math.Max(a.MaxB , f.B)
                  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T20:12:45.837

```
( from f in GetFooList()
  where f.A > 3
  group f by 1 into g
  let MinA=g.Min(l=>l.A)
  let MaxB=g.Max(h=>h.B)
  select new {MinA, MaxB} ).SingleOrDefault() 
```

# php - PHP PDO：检索单列结果的方法之间的差异

> ID：719514
> 
> 赞同：0
> 
> 时间：2009-04-05T19:20:23.047
> 
> 标签：php, pdo

有什么区别

```
$PDOStatement->fetchColumn(); 
```

和

```
$PDOStatement->fetch(PDO::FETCH_COLUMN); 
```

（如果存在）？还是它们在功能上相似但只是在美学上不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T19:31:06.267

默认情况下`fetchColumn()`仅返回 `'value'`，而其他默认情况下返回`array('column_name'=>'value')`。你必须用它`setFetchMode()`来改变它。

```
$PDOStatement->fetchColumn($colno); 
```

相当于：

```
$PDOStatement->setFetchMode(PDO::FETCH_COLUMN, $colno);
$PDOStatement->fetch(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T19:31:33.970

从[此处](http://us3.php.net/manual/en/pdostatement.fetch.php)获取的文档中，似乎没有 PDO::FETCH_COLUMN 样式。如果这是真的，那么区别在于 fetch 将返回一行，而 fetchColumn 将只返回指定的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T18:58:53.200

默认情况下 fetchColumn() 将仅返回 'value' 而其他默认情况下将返回 array('column_name'=>'value')。你必须使用 setFetchMode() 来改变它。

# javascript - 在 WebKit 浏览器中捕获“Escape”按键

> ID：719537
> 
> 赞同：13
> 
> 时间：2009-04-05T19:35:18.207
> 
> 标签：javascript, cross-browser, webkit, keyboard-shortcuts, dom-events

我有一个对话框出现，我希望当你`escape`按键时它再次被隐藏。

在 IE、Firefox、Opera 中一切正常 - 代码`document.onkeypress`在显示框时注册一个事件处理程序，然后测试事件 keyCode 以查看它是否是转义键（keyCode 27），但这看起来不起作用在基于 WebKit 的浏览器（Chrome 和 Safari (3)）中，尽管可以通过这种方式捕获其他键。

当按下转义键时，WebKit 浏览器是否根本不触发事件？

有谁知道为什么这不起作用，如何解决它，或者知道解决方法。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-05T19:42:05.897

改为捕获 keydown/keyup。查看[此条目](http://ejohn.org/blog/keypress-in-safari-31/)以获取更多信息。

# eclipse - 关于 Eclipse 4.0 的最新消息

> ID：719539
> 
> 赞同：-1
> 
> 时间：2009-04-05T19:36:47.203
> 
> 标签：eclipse

关于 Eclipse IDE 下一个大版本的“最新”消息是什么？（3.5 伽利略也可能感兴趣）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-05T19:44:34.080

[Eclipse2009](http://www.eclipsecon.org/2009/)为我们提供了一些关于 Eclipse IDE 下一个即将发布的提示。

在快速搜索之后，似乎会有一些新的酷“云”功能/支持。（惊喜！:)）除此之外，Eclipse 4.0 将提供一个跨计算环境（Web / RIA、桌面、服务器、云、嵌入式）的统一、普遍的平台

[Eclipse 3.5 Galileo 中将包含的一些新特性](http://update.eclipse.org/downloads/drops/S-3.5M6-200903130100/eclipse-news-M6.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T22:31:50.230

它计划在 2010 年夏天发布，但会有 Eclipse 3.6 版本，甚至可能是 3.7 等，所以它是分开的轨道。

在 EclipseCon 2009 上，有很多关于如何建模用户界面（使用 EMF）的讨论，但是会有兼容层，因此您将能够在 e4 中运行旧插件而无需大量重写（如果有的话）。

他们还谈到了 Eclipse 运行时，这是一种以其他方式使用 Eclipse 功能的方式，而不仅仅是在 IDE 中，例如在中间件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-11T15:38:09.943

我们正在为即将发布的 Galileo 版本建立一个合适的站点。准备好后（希望本周某个时候），它*应该*类似于[http://www.eclipse.org/galileo 。](http://www.eclipse.org/galileo)

同时，您可以从[Galileo wiki 页面](http://wiki.eclipse.org/Galileo)了解 Galileo 版本中将包含哪些内容。它更多地适用于各种项目的开发人员，而不是采用者。它确实列出了所涉及的项目；从那里您可以了解您可以期待的那种功能。

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T19:38:00.913

计划于2010年发布

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-05T19:41:21.607

几周前，EclipseCon 中涵盖了很多 E4 主题。会议网站在这里： http: [//www.eclipsecon.org/2009/](http://www.eclipsecon.org/2009/)

您可以查看演讲列表，并查看带有“在 gPublication 中查看”的幻灯片

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-08T20:08:33.010

这看起来是一个不错的起点。有一个新闻组和邮件列表。

[项目摘要 - eclipse.e4](http://www.eclipse.org/projects/project_summary.php?projectid=eclipse.e4)

# iphone - 用于构建 iphone 应用程序的最佳硬件是什么？

> ID：719542
> 
> 赞同：5
> 
> 时间：2009-04-05T19:39:21.410
> 
> 标签：iphone, objective-c, ios-simulator

我从来没有在 Mac 上编程过；我在 NeXT 机器上使用 Objective-C 进行了编程。我想学习开发 iphone 应用程序从 Apple 购买用于 iphone 开发的推荐最佳（阅读最低成本与最佳开发人员体验）硬件是什么？

先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-05T20:04:51.037

[从克雷格霍肯伯里](http://furbo.org/2009/02/19/bootstrap/)：

> **购买 Mac**
> 
> * * *
> 
> 没有两种方法。如果您要开发 iPhone 应用程序，您将在 Mac 上进行。整个工具链仅适用于 Mac：您无法在 Visual Studio 或 Eclipse 或在 Windows 上运行的任何其他工具中执行此操作。
> 
> 不要认为这是 Apple 让你使用 Mac 的邪恶计划。这并不比微软要求 Mac 开发人员购买 Visual Studio 来开发我们产品的 Windows 版本更邪恶。
> 
> 购买 Mac 可能是一个昂贵的提议：如果您刚刚开始并且预算有限，这里有一些关于以便宜的方式购买的建议：
> 
> 1.  买一台二手机器。在 Ebay 上可以找到很多非常好的硬件。最近推出了新型号的 Mac Book Pro，所以很多人在升级后都在卖硬件。这种较旧的硬件非常适合进行 iPhone 开发：您要开发的应用程序小而紧凑，并且不需要大量的处理器能力来构建和测试。
> 2.  买一台 Mac mini。即使您要购买新硬件，也可以节省资金，因为您提供自己的显示器、键盘和其他外围设备。如果你像我一样，你周围有很多这样的东西。
> 
> 如果您很难证明硬件支出的合理性，请记住您可以在这台机器上运行 Windows 或任何其他基于 x86 的操作系统。
> 
> 购买硬件时要记住的唯一一件事是：确保 Mac 配备英特尔处理器。开发工具不能在旧的 PowerPC 处理器上运行。

正如其他人所说，强大的机器对 iPhone 开发没有什么好处：在最慢的 mini 上编译速度已经足够快，而且你不会为这种受限（与桌面相比）硬件编写庞大的程序；该模拟器不进行处理器仿真，因此在任何英特尔 Mac 硬件上它总是比真实的 iPhone 等更快。因此，只有在您有其他用途可以证明费用合理的情况下，才购买更昂贵的 Mac。

更新：截至 2013 年，如果您要购买硬件，请确保购买[支持 Mountain Lion](http://support.apple.com/kb/SP654)的产品，因为 iOS 开发工具通常需要最新的 Mac OS X 版本，或者充其量是其前身。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-05T20:30:25.453

你需要一个英特尔 Mac。它们中的任何一个都可以，但我建议至少使用 2GB（最好是 4GB）的 Core 2 Duo。我相信过去几年销售的所有 Mac 都是 Core 2 Duo，并且都将支持至少 2GB - 但购买一台可以让你放入 4GB 的 Mac 确实值得。编译时间往往不会很长对于 iPhone 项目 - 尽管如果您有一些复杂的依赖项或模板繁重的 C++ 代码，那可能会有所不同。

除此之外，这仅取决于个人喜好。我个人推荐大屏幕（我有一个 30"）或多个显示器。XCode 有一个多窗口模型，如果你不自律，它会变得混乱。

我在具有 2GB RAM 的 Core Duo（甚至不是 Core 2）MacBook Pro 上开发了我的第一个 iPhone 应用程序（[vconqr - 有插头），我并不觉得想要。](http://www.vconqr.com)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-05T19:44:25.877

你所需要的只是足够强大的东西来运行 XCode 和 iPhone 模拟器而不会陷入困境。让自己拥有 2GB 内存的新 Mac mini，这应该绰绰有余——这可能是最便宜的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-05T20:29:47.857

只要安装了足够的内存，任何现代 Mac（即英特尔处理器）都可以。iPhone 开发工具的要求真的不是很高。更快的硬盘驱动器将为您构建应用程序等需要大量磁盘的操作带来性能提升，但很多人在使用相对较慢的笔记本电脑驱动器时都能过得很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-05T21:07:31.683

买个二手的 mac mini。除非你在你的第一个 iPhone 应用上赚了一些钱，否则不要在新的 mac 机器上花太多钱。取而代之的是，将这笔钱用于购买书籍、培训课程以及可能用于广告的一点点。也不要忘记在专业设计师的 ui 设计上花一点钱，因为通常我们编码人员痴迷于代码和性能，但不专注于设计。一个好的设计，漂亮的配色方案可以产生很大的不同

一旦你赚钱，你就可以购买最好的硬件。在经济衰退时期进行投资的明智方式；-)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-05T22:07:02.053

具有大量内存的 Mac mini 应该没问题。我使用了带有升级 RAM 的白色 Core 2 Duo MacBook (2007)，这很好（尽管 Xcode 的屏幕有点狭窄）。我现在有一台带有 SSD 的新铝制 MacBook，它稍微好一点，但旧机器也不是问题。

您的 NeXTSTEP 体验应该很好地为您服务 - 现代 Foundation 框架与您记忆中的非常非常相似，并且 UIKit 的设计与 AppKit 类似，因此您将在培训方面有一些领先优势。许多书籍会花费大量时间在您已经知道的内存管理等内容上，因此如果您正在寻找一本书，请确保您翻阅一下并检查它对您来说不是太基础。

如果您对使用 NeXTSTEP 的时光有美好的回忆，您可能会非常喜欢 iPhone。:^)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-11T11:57:59.913

在 eBay 上购买二手 Mac 时要小心。

1) 如果它们已被打开，则保修人可能无效。2) 它们很容易折断，所以不要买有任何问题的。3) 它们在 eBay 上的价格过高，因此请先咨询 Apple。有些人实际上试图收取比苹果新电脑更多的费用！无需任何升级！4) 不要购买一个预先升级的！见#1，你可以自己做更便宜的。5) 如果你只是要打开你的盒子，不要购买 Apple Care，它会作废，无法维修。

希望有帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-05T22:50:45.177

任何英特尔 Mac 都可以。运行开发工具和模拟器的需求并没有那么严格。我有一台第一代 MacBook，它是 1.83GHz Core Duo 和 2GB 内存，这对于 iPhone 开发来说绰绰有余。

Mini 会很好，并且将是您最近可以从 Apple Store 以 419 美元的价格购买的最便宜的合法 Mac。不过有一点警告是，你真的想升级到至少 2GB 的 RAM，Minis 都配备 1GB，并且有我见过的最糟糕的 RAM 升级过程。你需要一把油灰刀来撬开它。严重地。

另一种选择是构建自己的 Mac。我有一个用 Intel Core 2 Quad Q9300、Gigabyte EP-45-DS3L 主板、640GB HD、4GB RAM 和 nVidia GeForce 8600 构建的 Hackintosh，经过大量折扣后，我花了大约 600 美元。这比 Apple 向您出售的性价比要高得多，并且还允许您拥有您根本无法从 Apple 有限的产品线中获得的硬件组合。使用其中一个被黑的 OSX 发行版，遇到了一些麻烦，我能够让一切正常工作，除了它有时不会完全关闭并且我必须给它一个硬关机（尽管 sleep 有效，并且对于很多 Hackintosh 硬件组合来说，让睡眠工作是有问题的）。

我仍然认为，如果您打算在商业上发布应用程序，那么手头有一台真正的 Mac 是个好主意，但如果您只是想开始使用或拥有一台功能相当强大的机器而不花费 2500 美元并且仍然使用一年的不合标准GPU，Hacs 很酷。您甚至可能会发现您现有的 Windows PC 具有足够通用的硬件，您可以让 OSX 在其上运行。许多当代笔记本电脑都是这种情况。

# c# - C#：将 null 传递给重载方法 - 调用哪个方法？

> ID：719546
> 
> 赞同：37
> 
> 时间：2009-04-05T19:42:03.947
> 
> 标签：c#, null, overloading

假设我有两个 C# 方法的重载版本：

```
void Method( TypeA a ) { }
void Method( TypeB b ) { } 
```

我用以下方法调用该方法：

```
Method( null ); 
```

调用方法的哪个重载？我可以做些什么来确保调用特定的重载？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2009-04-05T19:51:09.527

这取决于`TypeA`和`TypeB`。

*   如果其中有一个是适用的（例如，没有从`null`to的转换，`TypeB`因为它是一个值类型，但是`TypeA`是一个引用类型），那么将对适用的那个进行调用。
*   否则取决于 和 之间的`TypeA`关系`TypeB`。
    *   如果存在从 to 的隐式转换`TypeA`但`TypeB`没有从`TypeB`to的隐式转换，`TypeA`则将使用重载 using `TypeA`。
    *   如果存在从 to 的隐式转换`TypeB`但`TypeA`没有从`TypeA`to的隐式转换，`TypeB`则将使用重载 using `TypeB`。
    *   否则，调用是模棱两可的，将无法编译。

有关详细规则，请参阅 C# 3.0 规范的第 7.4.3.4 节。

这是一个不模棱两可的例子。这里`TypeB`派生自，这意味着存在从to`TypeA`的隐式转换，但反之则不然。因此使用了重载 using ：`TypeB``TypeA``TypeB`

```
using System;

class TypeA {}
class TypeB : TypeA {}

class Program
{
    static void Foo(TypeA x)
    {
        Console.WriteLine("Foo(TypeA)");
    }

    static void Foo(TypeB x)
    {
        Console.WriteLine("Foo(TypeB)");
    }

    static void Main()
    {
        Foo(null); // Prints Foo(TypeB)
    }
} 
```

通常，即使面对其他模棱两可的调用，为了确保使用特定的重载，只需强制转换：

```
Foo((TypeA) null); 
```

或者

```
Foo((TypeB) null); 
```

请注意，如果这涉及声明类中的继承（即一个类正在重载由其基类声明的方法），那么您将陷入另一个问题，您需要转换方法的目标而不是参数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-05T20:26:21.377

Jon Skeet 给出了一个全面的答案，但从设计的角度来看，你不应该依赖于编译器规范的极端情况。如果不出意外，如果您必须在编写之前查看它的作用，那么下一个尝试阅读它的人也不会知道它的作用。它是不可维护的。

重载是为了方便起见，两个具有相同名称的不同重载应该做同样的事情。如果这两种方法做不同的事情，重命名它们中的一个或两个。

重载方法更常见的是具有不同数量的参数的变体，而具有较少参数的重载则提供合理的默认值。

eg`string ToString(string format, System.IFormatProvider provider)`具有最多的参数，
`string ToString(System.IFormatProvider provider)`提供默认格式，并
`string ToString()`提供默认格式和提供程序，

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-22T12:29:15.100

Jon Skeet 已经回答了默认选择哪个重载，但是如果你想确保调用特定的重载，使用命名参数通常比强制转换更好。

如果你有：

```
void Method( TypeA a ) { }
void Method( TypeB b ) { } 
```

您可以致电`Method(a: null);`或`Method(b: null);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-05T19:50:15.283

模棱两可的电话。（编译时错误）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-22T13:09:28.543

一个简单的解决方案是创建另一个具有以下签名的方法：

```
void Method() { } 
```

或者更好地将其中一种方法的签名更新为：

```
void Method( TypeB b = null ) { } 
```

然后这样称呼它：

```
Method(); 
```

在编译时，该值`null`是无类型的，因此编译器无法将其与方法签名之一匹配。在运行时，任何可能解析为的变量`null`仍将被键入，因此不会导致问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-03-21T15:05:13.433

只需键入将其转换为您想要的重载值

```
void method(int);
void method(string);
method((string) null){}; 
```

这将调用

# css - 寻找一些 CSS 疑难解答的想法——为什么我的 id 样式没有被应用

> ID：719549
> 
> 赞同：0
> 
> 时间：2009-04-05T19:42:30.247
> 
> 标签：css

我有两个页面，页面 A 和页面 B。它们都有一个 ID 为“loginLink”的项目。他们都导入了“header.css”，它有以下内容：

```
#loginlink, #usernamePlaceholder {color:#333;font-size:16px;font-weight:bold;} 
```

在页面 A 上，我的 loginLink 正确显示。在页面 B 上，未应用 header.css 中定义的样式。Firefox 向我展示了页面 A 是从 header.css 获取其样式的，但页面 B 不是。我知道页面 B 正在成功加载 header.css，因为 header.css 中定义的其他样式正在应用于页面上的其他元素。

我现在要做一些消除过程，蛮力工作，从两页中删除元素直到它们匹配，但很想听听任何非蛮力的想法。

这是登录链接的html：

```
 <div id="HeaderNotLoggedIn" style="display: block;">
    <a href="https://idcenter.services.mysite.net/SignInNew?referer=http%3A%2F%2Flocal.tvlistings.mysite.net%2Fwebdvr%2F" id="loginLink" style="">Please Sign In</a>
   </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T19:51:43.503

您在您的（您的）HTML 中引用“loginLink”，在您的 CSS 摘录中引用“#loginlink”——这种差异可能是问题所在吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T19:51:55.840

仔细检查你的身份证，可能有错字？

将一些新的激进 css 命令写入您的代码，这些命令不会被其他内容覆盖。像

```
background:red!important; 
```

这样你就可以看到是否有其他东西覆盖了你的代码或者你的目标是错误的。

检查您的缓存，有时这似乎是问题，尽管这听起来不像是缓存问题。

使用萤火虫看看你的风格会发生什么。

# jquery - 使用 jQuery 的 Get 函数发送值

> ID：719550
> 
> 赞同：0
> 
> 时间：2009-04-05T19:42:41.527
> 
> 标签：jquery, html, ajax

我目前正在编写一些代码来检查我的数据库以检查是否存在重复错误。它是一个表单，我使用 jQuery.get 使用以下函数检查重复值。

```
function makeAjaxRequest()
{
   $("label#bad_error").hide();
   $("label#good_error").hide();
   $("label#checkingdb_error").show();

   $.get(url,{sheetnum: '$("input#sheetnum").val()'},verifyDb);
}

function verifyDb(response)
{
    if (response==1)
    {
   $("label#checkingdb_error").hide();
   $("label#bad_error").show();
    }

    else
    {
   $("label#checkingdb_error").hide();
   $("label#good_error").show();
    }
} 
```

我让它在文本字段的 onBlur 上执行此操作。我的php文件如下：

```
<?

$sheetnum = $_GET['sheetnum'];

if($sheetnum == "1234"){
echo "1";
}

?> 
```

我现在使用“1234”而不是 mysql 字符串，只是为了测试它的 javascript 端是否正常工作。

当我在文本框中输入 1234 时，它返回没有错误（good_error 标签）。我在 .get 字符串中输入了错误的值吗？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T20:10:15.783

我相信

```
$.get(url,{sheetnum: '$("input#sheetnum").val()'},verifyDb); 
```

应该

```
$.get(url,{sheetnum: $("input#sheetnum").val()},verifyDb); 
```

# c# - C# 客户端通过 SSL 连接到 Java 服务器

> ID：719556
> 
> 赞同：2
> 
> 时间：2009-04-05T19:44:27.030
> 
> 标签：c#, java, ssl, ssl-certificate, jks

作为一个团队项目，我需要从 C# 客户端连接到 Java 6.5 SSL 服务器，但是当我到达 stream.AuthenticateAsClient 行时，它会挂起。

C# 连接代码

```
public static void connect(string server, Int32 port)
{
  try
  {
    client = new TcpClient(server, port);
    stream = new SslStream(client.GetStream(), false);
    stream.AuthenticateAsClient("MyCNfield");
...
... 
```

如果我连接到类似的东西`https://mail.google.com`并设置`MyCNfield`为`mail.google.com`，它工作正常，所以我认为它是 Java 方面的。

Java Init 部分是：

```
public void initSSL() throws IOException, KeyStoreException, NoSuchAlgorithmException,
                             CertificateException, UnrecoverableKeyException, KeyManagementException {
    char[] passphrase = "scared".toCharArray();
    System.out.println(java.security.KeyStore.getDefaultType());
    boolean handshakedone=false;

    KeyStore keystore1 = KeyStore.getInstance("jks");
    FileInputStream fis = new FileInputStream("C:\\\\temp\\\\work.jks");
    keystore1.load(fis, passphrase);
    fis.close();
    KeyStore ksTrust = KeyStore.getInstance("jks");
    FileInputStream fis2 =  new FileInputStream("C:\\\\temp\\\\work.jks");
    ksTrust.load(fis2, passphrase);

    KeyManagerFactory kmf =    KeyManagerFactory.getInstance("SunX509");

    // KeyManager's decide which key material to use.
    kmf.init(keystore1, passphrase);

    // TrustManager's decide whether to allow connections.
    TrustManagerFactory tmf =   TrustManagerFactory.getInstance("SunX509");
    tmf.init(ksTrust);

    SSLContext sslContext = SSLContext.getInstance("TLS");
    sslContext.init( kmf.getKeyManagers(), tmf.getTrustManagers(), null);

    SSLServerSocketFactory sslserversocketfactory =(SSLServerSocketFactory) sslContext.getServerSocketFactory();
    sslserversocket =(SSLServerSocket) sslserversocketfactory.createServerSocket(2443);
    sslserversocket.setUseClientMode(false);

    //Context conte
    ServerSocketFactory serversocketfactory =(ServerSocketFactory) sslContext.getServerSocketFactory();

    //  serverSocket = new ServerSocket(2443);
    System.out.println("OK we are set up");
} 
```

它被称为：

```
sslsocket = (SSLSocket) sslserversocket.accept(); 
```

并继续，即使连接没有完全验证。

需要改变什么来解决这个问题：JKS 有一个`MyCNfield`由我创建的 CA 签名的证书。如何在我的 C# 中将证书链导入我的私有 CA，或者如何使用 Java 和 C# 交换自签名证书，然后丢弃我当前的 JKS？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-03-15T16:29:09.477

您需要使用 RemoteCertificateValidationCallback 回调机制来提供证书认证。你不应该关闭这个问题，这是很多人可能有的一个有效问题。这个答案是谷歌搜索的第一个热门，这要归功于 stackoverflow 的出色 SEO，因此它可能会导致人们走错路。

使用**RemoteCertificateValidationCallback**回调。

```
private readonly bool allowSsl;

// callback used to validate the certificate in an SSL conversation
private static bool ValidateRemoteCertificate(
object sender,
    X509Certificate certificate,
    X509Chain chain,
    SslPolicyErrors policyErrors
)
{
    if (allowSsl)
    {
        // allow any certificate...
        return true;
    }
    else
    {
        return policyErrors == SslPolicyErrors.None;
    }
} 
```

以下是您如何将它与**TCPClient**一起使用：

```
TcpClient client = new TcpClient(machineName,443);
Console.WriteLine("Client connected.");

// Create an SSL stream, specifying the callback above.
SslStream sslStream = new SslStream(
    client.GetStream(), 
    false, 
    new RemoteCertificateValidationCallback (ValidateRemoteCertificate), 
    null
    ); 
```

# c++ - 读取文件：以不同方式处理行

> ID：719559
> 
> 赞同：2
> 
> 时间：2009-04-05T19:45:25.297
> 
> 标签：c++, string, file-io

我在尝试用 C++ 读取文件时遇到了很多麻烦。我遇到的主要问题是正确读取流的第一行，因为它与所有其他行不同。

示例文件将是：

```
#Newbie 101|Exam 1|3
Person One|10
Person Two|20
Person Three|30 
```

第一行以 # 开头并声明班级名称、assignmanet 名称和学生总数。

```
void Grading::loadData()
{
    string filename;
    cout << "Enter a filename with records to open: ";
    cin >> filename;

    std::ifstream file;
    file.open(filename.c_str(), std::ios::app);

    if (!file) {
        cout << "Unable to open the specified file" << endl;
        return;
    }

    string buffer;
    vector<Student> students;
    vector<Student>::iterator it;

    while (!getline(file, buffer, '|').eof()) {

        Student stud;
        string name;
        string tmpgrade;
        string course;
        string assignment;
        int totalstudents;

        // read first line
        if (buffer.find("#") == 0) {
            getline(file, course, '|');
            cout << "Course Name    : " << course << endl;
            cout << "Grading Item   : " << assignment << endl;
            cout << "Total Students : " << totalstudents << endl;
            cout << endl;
            continue;
        }

        getline(file, name, '|');
        getline(file, tmpgrade, '|');

        double grade = strtod(tmpgrade.c_str(), NULL);

        stud.name = name;
        stud.grade = grade;

        cout << "Name: " << stud.name << endl;
        cout << "Grade: " << stud.grade << endl;

        students.push_back(stud);

    } 
```

我非常感谢有关如何修复此代码以正确读取文件的任何建议。提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T19:50:09.980

听起来第一行的读取/解析应该在您的循环之外（上方）。这样您就不必担心在主循环体​​中解析 2 种不同类型的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T22:24:01.700

从我的角度来看，您做自己想做的事情的方式是错误的。

`LoadData()`每次读取“|”时都会停止读取令牌 分隔符。当找到*“#Newbie 101”*标记时，它将丢弃它，因为它以 # 字符开头。其循环中的下一次迭代将处理*“Exam 1”*令牌（下一个 .. 在**第一**行！！）。好吧。然后下一次迭代，它读取下一个是***"3 \nPerson one"***。请注意字符串中间的行尾字符！考虑到输出，我不确定它是你想要的，对吧？

AFAI 了解，您想要的行为是您的程序跳过注释行（以 # 字符开头）。作为一种解决方案，您最好`getline(file_handle, line)`在第一个循环中阅读整行。不要指定任何“|” 调用getline()时第三个参数为字符，必须以'\n'为分隔符才能获取**整**行。

在第一个循环中，添加第一个检查以查看“#”字符是否开始该行。如果是这样，请调用 continue 语句。否则进入第二个嵌套循环来解释行中的所有标记，这次使用`find_first_of()`字符串的方法来查找“|” 特点。循环直到你读完整行。

您可以考虑 BOOST 标记器库。虽然我从未使用过它（或者很久以前当我学习的时候），但我记得以非常简单的方式完成这种工作是非常合适的！我相信也有很好的库来读取文件并丢弃注释行。也许在 BOOST 中......（真遗憾，我真的必须更深入地了解这个库......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T19:51:19.633

您只需将第一行作为特殊情况单独处理。您可以通过在主循环外部读取第一行（当然检查是否有第一行）或在循环内部处理特殊情况，使用布尔值或行数来做到这一点。

# class - 全球地址类别信息

> ID：719572
> 
> 赞同：2
> 
> 时间：2009-04-05T19:53:23.933
> 
> 标签：class, street-address

我正在尝试创建一个通用地址类，可用于存储来自任何国家的任何地址。

例如，在英国，我们有邮政编码，而在美国，我认为他们使用邮政编码。我的想法很少，但我只是想看看其他人的想法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T20:00:52.933

它还取决于您想要的详细程度。例如，您是否需要对地址进行地理编码 - 生成一个在地理位置上定位地址的标识符？您是否需要验证该地址是否存在？您是否需要能够将地址转换为国家邮政局的标准格式？

如果您需要这些功能，那么您需要的不仅仅是您自己的课程——您还需要第三方产品。

我会提到一个，但尽管它做了这些事情，至少可以说是不愉快的。谷歌“数据质量”、“地址标准化”、“数据分析”等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T19:55:42.697

这取决于您想如何使用该类。如果您想显示指定地区（例如“北美”）内的所有地址，您可能需要考虑某种层次结构。如果您只想打印地址，您可能不得不接受巨大的可变性并将地址存储为一个大字符串。

# c# - 通过 TCP 进行远程连接

> ID：719576
> 
> 赞同：0
> 
> 时间：2009-04-05T19:54:18.223
> 
> 标签：c#, timeout, remoting

我已经建立了一个远程服务器和客户端。服务器设置如下：

```
BinaryServerFormatterSinkProvider serverProv = 
    new BinaryServerFormatterSinkProvider();
serverProv.TypeFilterLevel = TypeFilterLevel.Full;
BinaryClientFormatterSinkProvider clientProv = 
    new BinaryClientFormatterSinkProvider();

IDictionary props = new Hashtable();
props["port"] = port;

TcpChannel channel = new TcpChannel( props, clientProv, serverProv );

ChannelServices.RegisterChannel( channel, false );

RemotingConfiguration.RegisterWellKnownServiceType( typeof( Controller ),
    "Controller", WellKnownObjectMode.Singleton ); 
```

客户端设置如下：

```
ChannelServices.RegisterChannel( new TcpChannel( 0 ), false );
m_Controller = (Controller)RemotingServices.Connect( typeof( Controller ), 
      "tcp://" + ip + ":2594/Controller" ); 
```

当我尝试使用指定为“localhost”的 IP 从同一台计算机连接到服务器时，它连接正常。但是，当我尝试从远程计算机而不是 LAN 上连接时，给定服务器的 IP 地址，经过长时间的等待后，我在客户端收到以下异常：

```
A connection attempt failed because the connected party did not properly
respond after a period of time 
```

我该如何解决这个问题？我确定这是配置问题，因为端口在服务器上正确转发并且没有防火墙处于活动状态。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-05T20:23:33.877

这听起来像服务器没有激活。使用 localhost 时，你是如何启动服务器的？您是否使用远程 IP 地址做了同样的事情？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T20:30:34.080

在命令提示符 (cmd.exe) 中，在服务器端运行 netstat -a 并仅查看 LISTENING 行。应该有一个显示您的服务器正在运行的端口作为本地地址列中冒号后面的数字：

```
>netstat -a
...
Proto  Local Address          Foreign Address        State
TCP    0.0.0.0:135            Blah:0                LISTENING
TCP    127.0.0.1:136          Blah:0                LISTENING 
```

如果本地地址显示为 127.0.0.1，则表示您的服务器应用程序仅在环回适配器上侦听。这个适配器只允许从本地机器到它自己的连接（因此得名），因此不会接受到这些端口的远程连接。请注意，名称 'localhost' 是 127.0.0.1 的名称，因此如果您已指定任何地方，这可能是解释。（上例中的 136 显示了一个监听环回套接字。）

如果本地地址显示为 0.0.0.0，则意味着您的服务器应用程序正在侦听所有适配器，并且（假设您有一个我假设您有的网络适配器）远程连接将被接受。（上例中为 135。）

最后一种情况，如果本地地址是另一个 IP 地址，那么您的服务器应用程序正在侦听特定的网络适配器。如果您有多个适配器，则可能是在监听错误的适配器。

现在，说了这么多，我只有一个带有您发布的代码的小应用程序，它似乎默认是侦听 0.0.0.0（所有适配器），所以如果您看到其他内容，我会感到惊讶。如果您确实看到 0.0.0.0，那么我的下一个呼叫端口将是查看客户端和服务器上的防火墙，如果您在组织中，则包括本地和公司。

如果您有远程机器的控制台访问权限，那么您可以尝试远程登录到该端口上的本地机器，以查看它是否确实在侦听连接。我也很想在服务器上替换一个简单的 TCP 侦听器，例如 Netcat，以查看问题出在您的应用程序还是基础架构中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T18:28:26.263

这个问题已经一个月了，但仍然如此：

嗅探服务器上的流量（最好也在客户端上）应该让您更深入地了解正在发生的事情。

对于这项工作，我推荐[Packetyzer](http://paglo.com/opensource/packetyzer)，这是一个非常友好的 Windows 数据包嗅探器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2011-03-08T09:04:18.833

[http://msdn.microsoft.com/en-us/library/bb187433(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/bb187433(v=vs.85).aspx)

# .net - 可共享页面中的 .NET JIT 程序集

> ID：719587
> 
> 赞同：3
> 
> 时间：2009-04-05T20:07:34.040
> 
> 标签：.net, memory, windows-server-2008, jit, ngen

在终端服务环境中运行 .NET 2.0 WinForms 应用程序时，我看到了一些我无法解释的意外结果。我读过的所有内容都表明，JIT 程序集（即不使用 NGen 创建本机图像）导致所有代码空间都存储在私有页面中，从而增加了工作集大小/内存压力。然而，实际结果（使用 Process Explorer、VMMap 和 WinDbg 验证）表明，即使是 JIT 程序集也确实被放置在可共享页面中（并且当有多个应用程序实例运行时，即使在单独的 TS 下也确实是共享的会话/用户）。

谁能解释为什么会这样？这是在 W2K8 服务器环境中运行的，因此 ASLR 解释了为什么每个程序集缺少特定的基地址以及由此产生的变基不会导致问题。尽管如此，这些不是本机 PE 映像的事实似乎应该导致这些程序集的代码存储在私有页面中。

当我们开始研究使用 NGen 来减少内存压力时发现了这一点，但实际上发现它增加了工作集的大小——因为 JIT 的程序集已经被共享。

我发现的最新参考资料在这里，这又与我们的实际发现不同：

[http://blogs.msdn.com/morgan/archive/2009/03/07/developing-net-applications-for-deployment-on-terminal-services-or-citrix.aspx](http://blogs.msdn.com/morgan/archive/2009/03/07/developing-net-applications-for-deployment-on-terminal-services-or-citrix.aspx)

**编辑：**我应该补充一点，自从第一次发布问题以来，Windows Server 2003 测试盒上的更多实验也显然表明 JIT 的程序集在进程之间是可共享的。我仍然很难理解为什么我能找到的所有建议都表明 NGen 是必需的，但所有现实世界的证据都与此相矛盾。我真的希望这里的专家能提供一些启示。

谢谢！

**编辑：**我已经把我所有的 .NET / CLR 书籍都掸掉了，但我已经没有办法尝试解决这个问题了；谁会通过帮助消除“我不明白发生了什么”的那种可怕的唠叨感觉来度过我的一天！？！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-18T14:46:26.233

I think you are looking directly at module pages. When you JIT code, it won't show up under your DLL - it shows up in memory the runtime allocates. The module pages you are looking at are mostly metadata and IL, which is why they are still sharable.

As an experiment, I wrote a small program that generates 30K static methods and calls them. On my system, the JIT version of this program has 8.2 MB of private comitted memory, while the NGEN version has 3.8.

Even within your module pages, however, NGEN does help with memory use. When the runtime is able to load an NGEN image, it doesn't have to read the metadata of your module in order to JIT the code. The JIT version of my test application is using 2.3MB of working set. The NGEN version is using 32 kilobytes.

NGEN should also help your startup time. Impact to warm startup time can be negligable, but the impact to cold startup time (saving reading all those pages off the disk) can be noticable.

# jquery - 类别或 ID

> ID：719588
> 
> 赞同：3
> 
> 时间：2009-04-05T20:07:59.687
> 
> 标签：jquery, class

> 复制：
> 
> *   [级联样式表使用“id”或“class”</a>](https://stackoverflow.com/questions/670820/cascading-style-sheets-use-id-or-class)
> [](https://stackoverflow.com/questions/670820/cascading-style-sheets-use-id-or-class)
> *   [CSS：class 和 id 可以互换吗？](https://stackoverflow.com/questions/671954/css-are-class-and-id-interchangeable)
> *   [div 类与 id](https://stackoverflow.com/questions/84378/div-class-vs-id)
> *   [CSS：div id VS。div 类](https://stackoverflow.com/questions/544010/css-div-id-vs-div-class)

有时，当我喜欢进行选择时，将一个 ID（唯一）添加到某物（图像）中，并且在悬停或 clic 时我使用 jquery 来做一些事情。

但是同样的事情也可以用类来完成。我知道这个类有很多用途（比如说class =“selected”），但是当一个类被添加到某个东西时，我可以触发一个带有ID的类的jQuery动作......

所以问题是，如果我可以同时完成任何事情，那么使用类和 ID 的“正确方法”是什么！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-05T20:10:31.100

## 在哪里使用 ID 与类

两者之间的简单区别在于，虽然一个类可以在一个页面上重复使用，但一个 ID 每页只能使用一次。因此，在标记页面主要内容的 div 元素上使用 ID 是合适的，因为只有一个主要内容部分。相反，您必须使用一个类来设置表格上的交替行颜色，因为根据定义它们将被多次使用。

ID 是一个非常强大的工具。具有 ID 的元素可以是一段 JavaScript 的目标，该 JavaScript 以某种方式操纵该元素或其内容。ID 属性可以用作内部链接的目标，将锚标记替换为名称属性。最后，如果您使您的 ID 清晰且合乎逻辑，它们可以作为文档中的一种“自我文档”。例如，如果块的开始标签的 ID 为“main”、“header”、“footer”，则不必在块之前添加注释说明代码块将包含主要内容“， ETC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T20:14:50.420

不同之处在于，ID 是文档独有的东西，因此它只能用于给定 HTML 页面上的一个元素。

另一方面，类更像是元素的类别。例如，如果您查看单个博客文章，您通常会在其下方显示对该博客条目的评论，您可以将所有这些评论指定为“comment”类，并将单个博客条目指定为“条目” .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T20:10:25.330

一个 HTML ID 只能应用于单个元素，而一个类可以用于多个元素，这使得它更加灵活。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T02:43:37.257

ID 唯一标识整个文档中的元素，而类名就像一个“标签”——可以向一个元素添加许多标签，并且这些标签可以重复使用。

这是一个比较列表：

*   您可以将多个类名添加到以空格分隔的元素，但您只能添加一个 ID。
*   您可以在多个元素上重复使用类名，但在整个文档中只能使用一次 ID。
*   ID 可用作 URL 上的片段标识符，浏览器将滚动到该 ID。例如，。用类是不可能做到这一点的。`[http://example.com/mypage.htm](http://example.com/mypage.htm)**#someid**`
*   ID 使在 Javascript 中查找特定元素变得更加容易和高效。例如，`document.getElementById('someid')`（或`$("#someid")`在 jQuery 中）。请注意，像 jQuery 这样的库也可以通过类名来查找元素，但效率并不高。

ID 的其他属性

*   一个元素可能同时包含一个 ID 和多个类名，如果 ID 与其中一个类名相同，则无关紧要，也没有任何意义。
*   框架、iframe 和传统的弹出窗口算作单独的文档，因此可以在这些不同窗口中的元素上使用相同的 ID。
*   一些浏览器没有正确遵循规范，允许多次使用同一个 ID，并且它在某些方面表现得像类名，但在`document.getElementById()`. 例如，基于该 ID 的 CSS 选择器可以匹配多个元素，就好像它是一个类一样。这是一个非常混乱的情况，你永远不应该依赖它。如果浏览器停止尝试支持这一点，我会很高兴。

# jquery - jquery.load

> ID：719593
> 
> 赞同：0
> 
> 时间：2009-04-05T20:10:25.047
> 
> 标签：jquery, function, load

我想使用jQuery的加载功能

我可以写：`$('#somediv').load('somefile.html #aSpecificDivinThatPage');`

现在我想在 html 页面中有一个变量作为源 div，我该如何写出来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T20:18:51.173

您可以只使用普通的字符串连接：

```
var div = '#aSpecificDivinThatPage';
$('#somediv').load('somefile.html ' + div); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T20:22:43.990

您的意思是要从源 div 复制 html 并将其放入另一个 div？

```
$("#destinationDiv").html($("#sourceDiv").html()); 
```

# c# - 在 TreeView 中有 HierarchicalDataTemplates

> ID：719609
> 
> 赞同：27
> 
> 时间：2009-04-05T20:19:41.063
> 
> 标签：c#, .net, wpf, xaml, treeview

*关于我之前发布的一个问题（[WPF: Correctly storage an object in a TreeViewItem](https://stackoverflow.com/questions/718858/wpf-correctly-storing-an-object-in-a-treeviewitem/718895#718895)）*

**是否可以`HierarchicalDataTemplate`在 TreeView 中嵌套 s？**

* * *

举个例子：

*代码：*

```
public class Artist
{
        private readonly ICollection<Album> _children = new ObservableCollection<Album>();
        public string Name { get; set; }

        public ICollection<Album> Albums
        {
            get { return _children;}
        }
}

public class Album
{
        private readonly ICollection<Track> _children = new ObservableCollection<Track>();
        public string Name { get; set; }

        public ICollection<Track> Tracks
        {
            get { return _children;}
        }
} 
```

*xml:*

```
<TreeView x:Name="_treeView">
        <TreeView.Resources>
                <HierarchicalDataTemplate DataType="{x:Type local:Artist}" ItemsSource="{Binding Albums}">
                        <TextBlock Text="{Binding Name}"/>
                </HierarchicalDataTemplate>
        </TreeView.Resources>
</TreeView> 
```

从上面可以看出，TreeView 只绑定了艺术家和他们的专辑。如何修改它以包含专辑的曲目（作为专辑的子列表，即）？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-04-05T22:52:28.280

这里不需要嵌套模板，因为 TreeView 控件会根据它需要的 DataType 来处理它的嵌套。因此，只需为专辑和艺术家类型定义两个 HierarchicalDataTemplate，为您的 Track 类定义一个普通 DataTemplate。

```
 <HierarchicalDataTemplate  DataType="{x:Type local:Artist}" ItemsSource="{Binding Albums}" >          
         <TextBlock Text="{Binding Name}"/>                 
    </HierarchicalDataTemplate>
    <HierarchicalDataTemplate  DataType="{x:Type local:Album}" ItemsSource="{Binding Tracks}" >
        <TextBlock Text="{Binding Name}"/>
    </HierarchicalDataTemplate>        
    <DataTemplate DataType="{x:Type local:Track}">
        <TextBlock Text="{Binding Name}"/>
    </DataTemplate> 
```

# sorting - 按字母顺序对数字数据进行排序

> ID：719614
> 
> 赞同：0
> 
> 时间：2009-04-05T20:20:57.270
> 
> 标签：sorting, numerical, alphabetical

在任何情况下按字母顺序对数字数据进行排序很有用？例如

```
111
12
2 
```

当按升序排序时，给出：

```
111
12
2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T20:22:43.257

我想不出任何好的理由，而且总体上只会让人感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T12:35:52.637

I finally thought of one.

When investigating [Benford's Law](http://en.wikipedia.org/wiki/Benford%27s_law).

Also, when the data isn't really "numerical", it's strings which just happen to consist only of digits, but which need to be lexically sorted along with other strings that might contain non-digits. But I'm cheating, since you specified "numerical data" rather than "strings of digits".

There are going to be very few mathematical situations where it makes sense to use a sort order that depends what base you've chosen for the numbers. Especially since you're working in base 10, but the software is probably working in base 2 where it's even relevant.

# .net - .NET 中最好的免费/开源图像转换库是什么？

> ID：719616
> 
> 赞同：0
> 
> 时间：2009-04-05T20:21:16.737
> 
> 标签：.net, image-processing, open-source

[System.Drawing](http://msdn.microsoft.com/en-us/library/system.drawing.aspx)支持数量非常有限的图像格式

我想要做的是，给定某种格式（JPG、TIFF、GIF 或 PDF）的图像，将它们转换为其他格式。

我专门为**.NET寻找****免费**或**开源**版本的库。 Google 和 Stack Overflow 为我提供了结果库，例如 LeadTools（我讨厌而且不是免费的）和 C/C++ 库。

 *** * *

我确实对 Stack Overflow 进行了研究，但我无法从以下一些重复的问题中找到答案。

1.  [最有用的免费 .NET 库？](https://stackoverflow.com/questions/662956/most-useful-free-net-libraries)
2.  [您发现的最有用的 .net 库是什么？](https://stackoverflow.com/questions/233648?sort=votes&page=2#sort-top)
3.  [什么是最好的图像处理库？](https://stackoverflow.com/questions/158756/what-is-the-best-image-manipulation-library)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-05T20:29:03.287

[ImageMagick](http://www.imagemagick.org/script/index.php)怎么样？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T20:29:35.597

PDF 不完全是一种图像格式。如果您需要一个免费的库来专门处理 PDF，您可以尝试[http://itextsharp.sourceforge.net/](http://itextsharp.sourceforge.net/)

# testing - 硒与风车

> ID：719624
> 
> 赞同：22
> 
> 时间：2009-04-05T20:28:11.730
> 
> 标签：testing, automation, selenium, windmill

Selenium v​​s. Windmill，你的经验是什么，你有什么推荐的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-12-17T19:05:46.120

我绝不是一个公正的评论者（我是一个风车核心开发者）。

Windmill 支持在单个测试中甚至跨 SSL 连接测试多个域，Selenium 不支持（Selenium2.0 将通过 WebDriver 支持这一点）。

Windmill 有一个了不起的社区，随时可以访问 irc.freenode.org 上的#windmill 并找到可以帮助您的人。

Windmill 支持 Python 和 JavaScript 进行测试编写，并且对它们的支持非常好。Windmill 在集成 IDE 中包含调试工具，集成 Firebug 和各种其他有用的功能。

Windmill 已经被一些 facebook 应用程序使用了大约一年，支持这些用户的过程意味着 Windmill 必须找到一种方法来处理网站在 javascript 中可以做的每一件可怕的事情，因为 Facebook 做了所有这些事情！

如果您不使用 Python 或 JavaScript，此时不要打扰 Windmill。社区成员使用 JSONRPC 接口为 Ruby 编写了一个 RSpec API，其他任何人都可以使用它来创建新语言的绑定，但目前仅支持这些。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-07T13:06:16.953

Windmill 最初是 Selenium 的一个分支，但现在几乎是一个完全不同的代码库。我自己从未使用过它，但我要注意：Selenium 有一个非常活跃的社区。所以我的建议是：除非 Windmill 中有你必须拥有的东西（即：原生 Python 支持），否则使用 Selenium。

# installation - 如何要求用户使用 NSIS 卸载以前的版本

> ID：719631
> 
> 赞同：10
> 
> 时间：2009-04-05T20:31:17.807
> 
> 标签：installation, nsis, uninstallation

我刚刚开始使用[NSIS](http://nsis.sourceforge.net/Main_Page)。
它工作得很好，但我发现文档有点非结构化。[在使用NSIS](http://nsis.sourceforge.net/Main_Page)安装新版本之前，如何要求用户卸载以前的版本？

[NSIS](http://nsis.sourceforge.net/Main_Page)（Nullsoft Scriptable Install System）是一个用于创建 Windows 安装程序的开源系统。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-05T23:02:44.587

NSIS 是一个很棒的 Windows 安装程序。这是我在安装同一应用程序的新版本时使用 NSIS 卸载当前版本的方法。将以下函数添加到您的 NSIS 脚本。

```
Function .onInit

         Exec $INSTDIR\uninst.exe 

FunctionEnd 
```

您也可以在 NSIS wiki 上查看“在安装新版本之前自动卸载旧版本”的链接[。](http://nsis.sourceforge.net/Auto-uninstall_old_before_installing_new)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-11-06T20:54:06.597

另一种方法是创建一个`UninstallPrevious`隐藏部分并使其在安装程序中的所有其他部分之前运行。我还建议让卸载程序静默运行。

```
; The "" makes the section hidden.
Section "" SecUninstallPrevious

    Call UninstallPrevious

SectionEnd

Function UninstallPrevious

    ; Check for uninstaller.
    ReadRegStr $R0 HKLM "${HKLM_REG_KEY}" "InstallDir"

    ${If} $R0 == ""        
        Goto Done
    ${EndIf}

    DetailPrint "Removing previous installation."    

    ; Run the uninstaller silently.
    ExecWait '"$R0\Uninstall.exe /S"'

    Done:

FunctionEnd 
```

这种方法的优点是用户在准备好安装新版本之前不会卸载旧版本。此外，他们甚至不必决定卸载旧版本，它就会神奇地消失。

当然，根据您的需要，您可能希望用户确认卸载，在这种情况下使用 spinner_den 的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-17T20:22:37.240

我重用在安装过程中写入的`UninstallString`或`QuietUninstallString`注册表项，以便稍后确定卸载程序命令。

一对夫妇在顶部定义：

```
!define PROJECT_REG_UNINSTALL_KEY "Software\Microsoft\Windows\CurrentVersion\Uninstall\${PROJECT_NAME}"
!define PROJECT_UNINSTALL_EXE "uninstall.exe" 
```

在安装程序中`Section`：

```
WriteRegStr HKLM "${PROJECT_REG_UNINSTALL_KEY}" "UninstallString" '"$INSTDIR\${PROJECT_UNINSTALL_EXE}" _?=$INSTDIR'
WriteRegStr HKLM "${PROJECT_REG_UNINSTALL_KEY}" "QuietUninstallString" '"$INSTDIR\${PROJECT_UNINSTALL_EXE}" /S _?=$INSTDIR' 
```

然后在您`.onInit`获取注册表项值（如果您的应用程序已经以这种方式安装，则存在）并运行它：

```
${If} ${Silent}
    ReadRegStr $R0 HKLM "${PROJECT_REG_UNINSTALL_KEY}" "QuietUninstallString"
${Else}
    ReadRegStr $R0 HKLM "${PROJECT_REG_UNINSTALL_KEY}" "UninstallString"
${EndIf}
ExecWait "$R0" 
```

# javascript - 需要一些关于 jquery 中对话框的简单解释吗？

> ID：719632
> 
> 赞同：1
> 
> 时间：2009-04-05T20:31:37.667
> 
> 标签：javascript, jquery

我刚开始学习 jquery 和 JavaScript，所以我可以用我当前的 asp.net 项目来实现它。但是，我很难理解如何制作一个对话框，当用户尝试按下删除按钮时会显示一个对话框，然后如果用户选择按钮“是”，它将在 asp.net 后面的代码中执行删除功能或如果用户选择“否”，那么它将被终止并且不会采取任何行动。

**注意：**我不找人教我，我只是想要一些解释、代码示例和指向我可以阅读和理解并自己尝试的信息的链接。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T20:49:50.600

一个简单的例子（不需要 jQuery）是：

```
function deleteConfirm ()
{
    if ( confirm('Are you sure you want to delete this?') )
    {
        // do ajax call (jquery would be handy for this)
        // or redirect to delete script
    }

    return false;
} 
```

此方法使用内置的 javascript confirm() 函数。如果您打算进行 ajax 调用来访问您的 asp.net 代码，那么我建议使用 jQuery 的 ajax 函数：

[jQuery.ajax](http://docs.jquery.com/Ajax/jQuery.ajax) , [jQuery.post](http://docs.jquery.com/Ajax/jQuery.post) , [jQuery.get](http://docs.jquery.com/Ajax/jQuery.get)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T20:50:38.807

**我假设您希望删除实际上是调用事件处理程序的回发的结果。正如其他人所指出的那样，您也可以使用 AJAX 执行此操作，并且这样做可能更容易。**

基本思路是让按钮上的点击功能弹出对话框，然后返回false停止正常动作。在“是”回调处理程序中，您需要设置 __EVENTTARGET 并使用 __doPostback 来模拟按钮单击。

[请参阅autopostback](http://www.dotnetspider.com/resources/189-AutoPostBack-What-How-works.aspx)上的此参考以了解它是如何工作的以及如何模拟它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T20:47:48.733

在 javascript 中，您可以使用“确认”来阻止表单提交，例如

```
<form onsubmit="return confirm('do you really want to delete this?');" method="post">
<input type="submit" value="click me">
</form> 
```

如果您在确认框中单击[ok]，则“return”将返回“true”，然后提交表单，如果单击[cancel]，则返回“false”，然后不会提交表单。

**[编辑]**一些可能有帮助的链接：

*   [ASP.NET 弹出对话框](http://davidhayden.com/blog/dave/archive/2004/03/16/178.aspx)
*   [在 ASP.NET 网页中添加客户端消息框](http://www.4guysfromrolla.com/articles/021104-1.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T00:24:06.263

jQuery UI 1.7 现在内置了一个对话框组件。

查看[http://docs.jquery.com/UI/Dialog](http://docs.jquery.com/UI/Dialog)和[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)了解如何使用它的一些示例。

特别是，请查看第二个链接和“确认对话框”示例。它几乎准确地展示了我想你想做的事情。只需单击演示下方的“查看源代码”链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T00:39:21.470

完全未经测试，但你应该明白了......这个片段将所有元素的点击事件与“delete_user”类绑定到一个确认对话框。

```
// Bind the click event to all
$('.delete_user').click(function () {
    // Find the user's ID which is the value of a hidden INPUT element with the
    // same parent as the deletion button.
    var userId = $(this).siblings(':hidden').eq(0).val();

    // Make the user confirm the deletion.
    var result = confirm('Are you sure?');

    // If the user has confirmed deletion, make an AJAX request to:
    // /delete_user/?user=<ID>
    if (result) {
        $.ajax({
            data: { user: userId },
            url: '/delete_user/',
            success: function () { alert('Successfully deleted user!'); },
            error: function () { alert('Error when trying to delete user!'); }
        });
    }

    // Don't ever do what the browser wants you to do by returning false.
    return false;
}); 
```

# c - 'c' 是 Ruby 中的一个字符还是一个字符串 - 或两者兼而有之？

> ID：719635
> 
> 赞同：5
> 
> 时间：2009-04-05T20:34:35.753
> 
> 标签：c, ruby, string, terminology, character

```
char hello[] = "hello"; #C
hello = ['h', 'e', 'l', 'l', 'o'] #Ruby 
```

如果我在 Ruby 中输出 hello[0] 类，它会显示“String”。这是因为 Ruby 中存在单引号字符串，并且似乎没有 char 类型的概念。前几天我对我的同事说他有一个字符数组，他说“不，我没有，我有一个字符串数组”。挑剔，是的，但从技术上讲，也许他是正确的。来自 CI 世界的人往往不会将单个字符视为字符串。是否同意上面的 hello 数组是字符串数组而不是字符数组？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-05T20:43:27.137

在 C 中，字符不同于字符串（字符串是字符数组）。Ruby 没有单独的字符类型。字符串可以保存任意数量的字符，Fixnums 可以保存字符的 ASCII 值，并使用 #chr 方法将其转换为包含该字符的可打印字符串。

Ruby 中单引号和双引号字符串语法的区别在于对字符串进行了多少预处理（例如插值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T20:38:57.180

你的同事是对的，Ruby 似乎没有任何 Character 类。

```
>> 'c'.class                                                            
=> String 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-05T20:41:28.547

是的。在 C 中，字符串表示为 C-String，它基本上是一个以零结尾的字符数组，而 Ruby 中的 String 是一个以更复杂的方式存储其内容的类。您可以将它的任何部分提取到一个新的字符串中，而 Ruby 可能不会让您降低对它的访问权限。在 C 中，您可以直接访问它的内存，而 Ruby 比这要抽象得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T20:40:26.537

是的，Ruby 中没有 char 类，只有 String。（请注意，char 在 C 标准中定义为 1 个字节，但 unicode 字符不是这种情况）。

# iphone - iPhone游戏开发

> ID：719638
> 
> 赞同：-1
> 
> 时间：2009-04-05T20:35:55.643
> 
> 标签：iphone, objective-c

我有完美的2D和3D动画团队。我们正在开始开发 iPhone 游戏。所以我需要一些东西来开始......像新手指南，具有良好文档的开源引擎......

那么起点在哪里呢？还有一个问题 - 如果我是 Java 开发人员并且在 Objective C 中几乎是 n00b，是否很难开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T20:47:11.077

这些答案可能会有所帮助：

*   [您推荐哪些资源用于 iPhone 上的游戏编程？](https://stackoverflow.com/questions/493324/what-resources-do-you-recommend-for-game-programming-on-the-iphone)
*   [适用于 iPhone 的 3D 游戏所见即所得](https://stackoverflow.com/questions/704274/3d-gaming-wysiwygs-for-iphone)
*   [iPhone 版青蛙](https://stackoverflow.com/questions/306755/frogger-for-iphone)

# c# - Silverlight 表单生成

> ID：719643
> 
> 赞同：0
> 
> 时间：2009-04-05T20:37:56.450
> 
> 标签：c#, .net, silverlight, user-interface, architecture

我正在研究 Silverlight 中的典型数据输入系统。我的大部分屏幕基本上都是查看/编辑屏幕。我正在使用 DDD 方法，并且对所有内容都有域对象。一个典型的场景类似于一个带有用户编辑和输入页面的用户对象。

在对几种类型的对象进行了处理之后，我看到了一种模式。我正在创建一个只绑定到域对象的视图。每个视图都有一个相似的外观，带有一个标题（绑定到域对象），以及一些基于视图数据类型的编辑控件（布尔复选框、大量文本框等）。

所以我在想，不是为每个类创建一个单独的视图，我可以创建某种通用视图类，它会根据 DataContext 中的对象自动生成一个表单。我可以以某种方式告诉视图放置字段的顺序（即名字/姓氏在顶部，然后是电话，然后是地址等），并为字段提供一些属性（例如设置名字/姓氏作为标题，将以粗体或其他内容显示）。对我来说，这听起来和你用 CSS 做的很相似。然后要更改整个应用程序的外观，我只需要更改视图或视图的模板。

所以这是我的问题：

这种方法有意义吗？它会奏效吗？

已经有这样的事情了吗？

如果没有，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T20:44:17.713

在继续之前，您应该先看一下 Silverlight 3 beta 中的 Dataform 控件。你可能会发现你正在重新发明轮子。

# c++ - 2 个或更多进程如何与键盘交互？

> ID：719645
> 
> 赞同：3
> 
> 时间：2009-04-05T20:39:36.757
> 
> 标签：c++, keyboard, kernel, buffering

我一直在考虑键盘处理。它是如何工作的？我似乎无法用谷歌搜索我的解释。

我知道每次按下一个键都会产生一个键盘中断。处理器暂停它正在处理的任何事情，并从键盘缓冲区加载键盘数据，将其存储在系统级缓冲区中。

但接下来会发生什么？让我们举一个实际的例子。当我运行以下代码时会发生什么：

```
...
std::string s;
std::cin >> s;
.... 
```

是否`cin`从系统级键盘缓冲区的用户级表示中读取？这在我的脑海中非常有意义，因为可以从同一个缓冲区读取 2 个或更多进程，这样我就不会松开任何按键。但它是这样工作的吗？

我知道我说的是非常笼统的说法。我使用的操作系统是 OS X。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-05T20:53:03.480

除极少数情况外，您的键盘和显示器由窗口管理器管理：X11、Gnome、KDE、Carbon、Cocoa 或 Windows。

它是这样工作的。

键盘驱动程序是操作系统的一部分。

窗口管理器是一个特权进程，它在启动期间获取设备。窗口管理器“拥有”该设备。只。

1.  中断转到操作系统。

2.  操作系统通过排队响应中断。最终——当没有更高优先级的事情要做时——它从中断中捕获键盘输入并缓冲它。

3.  拥有进程（窗口管理器）正在读取此缓冲区。由此，它创建键盘事件。

您的应用程序通过窗口管理器工作。

示例 1 -- 您正在运行一个命令行应用程序。在终端窗口中。当终端窗口位于最前面时，窗口管理器将事件定向到终端窗口。键盘事件成为标准输入流。

示例 2——您正在运行 GUI 应用程序。在您自己的应用程序窗口中。当您的应用程序的窗口位于最前面时，窗口管理器会将事件定向到您的应用程序窗口。键盘事件可供您处理各种 GUI 控件。某些键盘事件可能会在控件或活动按钮之间循环。

# java - Java中需要访问父函数的棘手情况

> ID：719646
> 
> 赞同：0
> 
> 时间：2009-04-05T20:40:21.653
> 
> 标签：java, inheritance, permissions, parent-child, parent

我一直在用 Java 开发经济模拟器，但遇到了障碍。我有一个拥有*Traders向量的**经济舱*。每次迭代，Economy 类都会调用每个*Trader*来 update() 并决定它想要进行哪些交易。update() 函数返回要添加到父*经济舱*队列中的所需交易。我能够正确实现上述所有内容，但我仍然需要每个*交易者*能够看到他目前有多少笔交易。由于交易存储在父*经济舱*中，我应该如何设计代码以便*交易*者可以访问*经济舱********函数和变量？*******

 **** * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T21:08:29.247

由于 Trader 类需要访问 Economy 类的方法，因此正确的方法是将 Economy 的实例“注入”到 Trader 类。您可以使用构造函数来做到这一点：

```
public Trader(Economy economy) {
    this.economy = economy;
} 
```

或使用二传手：

```
public void setEconomy(Economy economy) {
        this.economy = economy;
    } 
```

但是要小心正确设计经济舱。对经济舱变量的访问应仅限于该类的方法。如果要从外部访问它们，请定义 getter 和 setter。据我了解，交易者应该只从经济中提取信息。他们不应该能够调用修改经济状态的方法。这应该反映在您的设计中。

你也可以考虑定义一个接口：

```
interface IEconomy {
  List<Trade> getTrades(Trader trader);
} 
```

并由经济舱实施。然后向 Trader 注入一个 IEconomy。这使得交易者应该使用经济的哪些部分非常明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T20:44:34.920

```
public class Trader {
    private Economy parent;
    ...
    public Trader(Economy parent, ...) {
        this.parent = parent;
    }
} 
```

现在 Trader 应该可以访问父经济体。

或者：

```
public onUpdate(Economy parent) { ... } 
```

如果你希望。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T20:47:26.643

*Trader*类中的方法*update*可能带有一个参数，即对*经济类的引用，您可以使用**this*传递它。然后，*Economy*可以提供提取所需信息所需的方法。

 ***# c++ - C++ 的开源开发环境：什么更好？

> ID：719650
> 
> 赞同：2
> 
> 时间：2009-04-05T20:42:48.077
> 
> 标签：c++, open-source

我想在业余时间做一些编码，但问题是，我不想把钱花在这上面。

下面的一组开发工具是正确的吗，还是我忘记了什么？

*   C++ 的 Eclipse
*   用于源代码控制的 SVN
*   用于 UI 开发的 Qt（因为它是 C++，而且我相信它现在由诺基亚开放）
*   哈德森持续集成

我想编写一个可以在任何平台上运行的小图像处理应用程序，但目前的主要平台是 Windows，可能会迁移到 Mac——因此是所有跨平台工具。

有什么明显的我忘记了吗？像 fxcop 这样的用于 C++ 中的样式检查的东西？

如果我使用任何库，我想避免使用 GPL 库；如果我现在的雇主情况不妙，我会想通过这个赚钱。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-05T21:14:36.830

Microsoft Visual C++ Express 是免费的，而且是适用于 Windows 的最佳 IDE。此外，您可以使用它来处理跨平台代码 - 它更多地取决于编写符合标准的代码和使用可移植库。

如果你想写跨平台的代码，我推荐一个跨平台的构建工具。我使用 CMake，它在 Windows 上生成 Visual Studio 解决方案，但也有其他的，例如 SCons。

至于图书馆，这取决于你到底需要做什么。Qt 是一个优秀的 GUI 库。libpng/libjpeg 等适合在低级别加载/保存图像，但可能还有其他更高级别的图像库。

**[编辑]**对有关 MSVC 和 Qt 的评论的回应：快速搜索会打开 Trolltech 的 Qt Visual Studio 集成页面： [Qt Visual Studio .NET 集成](http://doc.trolltech.com/vs-integration-1.4/index.html) 评论指出这实际上不是免费的（[此链接](http://www.qtsoftware.com/downloads/visual-studio-add-in)提供免费插件, 但这会在 Visual Studio 之外运行 Qt 设计器。此外，Visual Studio 的 Express 版本不支持插件。

对于专门在 Qt 中进行编码，Qt 创建了另一个新的 IDE：[Qt Creator](http://www.qtsoftware.com/products/developer-tools)。我听说过它的好消息，它还可以跨 Windows、Linux 和 Mac 移植。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-05T20:58:23.093

我发现拖延症（我经常犯这种罪）——只需编写一些代码——你可以随时添加工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-05T21:13:52.120

带有“什么更好”之类的问题的问题在于，很难确定在特定情况下什么是正确的，也许不可能确定什么是“更好”。

话虽如此，我成功地将 Eclipse CDT 用作 Linux 上的 IDE。我使用 ACE/TAO 等框架来创建高度可移植的代码。

我知道 QT 是一个非常好的 UI 框架。KDE 是在 KDE 之上构建的，如果您使用 KDE/Linux，那么您可能还想看看 KDevelop，一个有很多用户的 C++ IDE。

最后，我相信只有你自己才能找出最适合你使用的东西。确保检查替代方案，然后做出有根据的决定。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T07:21:37.103

对于 c++，还有一些免费软件可用，例如 codeblocks 和 devcpp。我发现机器上的日食非常沉重。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T07:37:25.833

*   源代码控制：[git](http://git-scm.org)。这并不像人们想象的那么困难。我是一个 svn 新手，我仍然设法学习了 git 的基础知识，以便在日常生活中使用！大约有 4 或 5 个基本命令可以让您立即开始。阅读[官方 git 教程](http://www.kernel.org/pub/software/scm/git/docs/gittutorial.html)

*   关于IDE，有几个选择

    *   Microsoft Visual C++ Express Edition（免费精简版）
    *   带有 CDT 的 Eclipse
    *   [Qt创造者](http://www.qtsoftware.com/products/appdev/developer-tools/developer-tools#qt-tools-at-a)。（因为您使用 Qt 作为 GUI）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-06T07:38:17.360

有许多工具可以发挥作用：

*   一个 C++ 编译器...（它不在您的列表中）
*   多氧
*   STLfilt（使用 C++ 编程时必须具备）
*   一个 UT 框架（CxxTests、boost.test、Fructose、google.test、...）
*   管理编译链的东西（scons，aap，（b）jam，cmake，...）——我不知道 eclipse 使用的是什么。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-05T21:04:03.687

我个人在许多项目中都使用过 Eclipse+CDT。与 wxWidgets 搭配使用，它为我提供了足够的跨平台能力（我认为这是一个很大的优势）。

QT 现在也有一些有趣的 IDE 版本，请务必查看：[http ://www.qtsoftware.com/products/developer-tools](http://www.qtsoftware.com/products/developer-tools)

就像之前的建议一样，开始编码，你最终会发现什么是适合你的组合。个人之间差异很大，什么是“最好的”IDE或命令行工具的组合等。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-05T21:12:39.737

Eclipse CDT 取得了长足的进步，甚至那些只是 unx 工具的组织现在也终于加入了 IDE 的行列。考虑下载当前里程碑，而不是官方版本。

如果你用的是windows，不要直接用Eclipse，找一个第三方发行版，里面已经有所有的GNU工具了（忘记名字了，可以查一下）。

一旦你切换到 mac，它会更容易，但请确保安装 xcode 以获得你的 GNU 工具。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-06T11:59:39.587

如果您使用的是 svn - VisualSVNServer 是一种出色的基于免费 GUI 的方式来设置和管理您的 SVN 存储库，绝对值得一试，因为这意味着您几乎不需要/没有弄乱配置文件等来更改您的存储库。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-06T13:06:44.030

关于版本控制 - Subversion 几乎是标准的并且得到很好的支持。据我所知，Git 更强大但更难使用；值得一看的是一个新的单人项目，因为您不会像其他项目那样有支持和再培训问题。

关于 IDE，由于 Visual C++ Express 目前是投票率最高的答案——我同时使用了 Eclipse 和 Visual C++ Express。我没有大量使用 Visual C++ Express 的经验，因此它可能具有我忽略的功能，但从我能够比较的情况来看，Eclipse 提供了更多功能。我试图在[这个答案](https://stackoverflow.com/questions/308450/netbeans-or-eclipse-for-c/308657#308657)中列出其更令人印象深刻的功能；据我所知，Visual C++ Express 没有列出的任何功能。Eclipse 速度较慢且资源密集，但如果桌面速度足够快，那么它的额外功能就值得了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-07-14T21:00:38.007

在版本控制方面，使用 git 并将您的项目扔到 GitHub 或 Gitorious 上。真的没有理由再使用 Subversion，因为它痛苦的分支和合并，以及缺乏分布式模型。

请在此处查看此链接，了解为什么 Git 比 X 更好： [http ://whygitisbetterthanx.com/](http://whygitisbetterthanx.com/)

使用 Sourceforge 或 GNU Savannah 也没有任何意义，因为 Git 前端站点具有更多有价值的功能并且更易于使用。

# ruby - 鞋子布局

> ID：719652
> 
> 赞同：2
> 
> 时间：2009-04-05T20:43:06.047
> 
> 标签：ruby, user-interface, shoes

我正在尝试制作如下所示的鞋子布局：

[示例 GUI 布局 http://csclub.uwaterloo.ca/~s3weber/gui.png](http://csclub.uwaterloo.ca/~s3weber/gui.png)

文本给了我一个问题。我试过：

```
stack {
   flow {
      check
      stack {
         para 'text 1'
         para 'text 2'
      }
      para 'Free'
   }
} 
```

但这根本行不通。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T21:10:30.020

您是否正确设置了所有元素的宽度？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-09T15:21:25.417

在粒子中，对于后面的访问者，您需要设置流内堆栈的宽度，否则它将为宽度 100%，并且 check 和 para 将被推送到它们自己的行中。像这样的东西效果很好，添加了一个边框来可视化盒子。

```
Shoes.app do
  stack {
    flow {
      border black
      check 
      stack :width=>-80 do
        para 'text 1'
        para 'text 2'
      end
      para 'Free'
    }
  }
end 
```

将堆栈的宽度设置为 -80 允许它使用行中的所有空间并为其他组件保留 80 像素，这似乎是此类应用程序所需的行为。

另请注意，当您将隐式哈希参数与由大括号分隔的块结合使用时，Ruby 会感到困惑，因此您需要像我在这里一样使用 do..end 或将参数括在括号内以堆栈。

# javascript - Internet Explorer 未设置 HTML 元素的高度属性

> ID：719657
> 
> 赞同：0
> 
> 时间：2009-04-05T20:44:33.297
> 
> 标签：javascript, internet-explorer, firefox, iframe, height

我编写了一个 Javascript 脚本，它会根据 IFrame 的内容自动调整 IFrame 的高度。一旦生成了框架页面的内容，就会执行此操作；在 Firefox 中没有问题，但在 IE 中脚本正确执行但没有看到效果：该方法在回调函数中调用。有什么建议吗？如果我使用按钮执行该方法，它会完美运行，并且框架会调整大小。

我面前没有代码；调整大小方法如下所示：

```
function resizeFrame(){
    var frame = parent.document.getElementsById(window.me);
    frame.style.height = document.offsetHeight;
} 
```

调用函数是这样的：

```
//init function
bunding.doSomeWork(callbackFunction);
...

function callbackFunction()
{
    //does some HTML output
    resizeFrame();
} 
```

我正在使用 Salesforce Ajax 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T21:10:39.600

我发现在某些情况下，在添加新内容时，IE 属性（例如 offsetHeight、clientHeight 和 scrollHeight）的设置不正确。我不得不使用 setTimeout 来允许重新绘制显示，然后才能从这些属性中获取准确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T21:11:14.573

很难在没有看到代码的情况下真正调试代码，但以下示例在 IE 和 Firefox 中对我来说效果很好。

```
<!DOCTYPE html>
<html>
<head>
  <title>so-iframeResize</title>
  <script type="text/javascript" >

    onframeload=function(iframe) {
      var doc = iframe.contentWindow.document;
      iframe.style.height = Math.max(
        doc.getElementsByTagName("html")[0].offsetHeight,
        doc.body.offsetHeight // IE prefers this value
      ) + "px";
    };

  </script>
</head>
<body>
  <div id="page">
    <iframe src="about:blank" onload="onframeload(this)">
    </iframe>
  </div>
</body>
</html> 
```

# java - Java 中的层次结构和数据结构（或 XML 到对象的转换：最佳实践）

> ID：719674
> 
> 赞同：0
> 
> 时间：2009-04-05T20:51:34.043
> 
> 标签：java, data-structures, oop

问题：假设有一个 XML 文件包含应用程序感兴趣的某些元素的数据和层次结构：

```
 <root>
    <node title="lvl1Node">
        <node title="lvl2Node">
            <node title="lvl3Node"></node>
        </node>
    </node>
    <node title="lvl1Node2"></node>
    <node title="lvl1Node3">
        <node title="lvl2Node2">
            <node title="lvl3Node2">
                <node title="lvl4Node"></node>
            </node>
        </node>
    </node>
  </root> 
```

现在假设您的应用程序需要提供一个 API 来检索这些节点。您需要编写一个方法来返回节点而不会丢失有关其层次结构的信息。

我的问题是你会怎么做？您将使用哪种数据类型。树数据类型是显而易见的答案，但它没有在标准 Collections API 中提供，并且自己编写始终是最后的手段（程序员很懒，重新发明轮子等）。

我还想到了一个 ArrayList，其中每个项目要么是一个 Object（对于没有子节点的节点），要么是一个 Arraylist（对于有子节点的节点），但我喜欢泛型，这感觉太像黑客了。有更聪明的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T22:22:02.080

您应该问自己的第一个问题是您需要如何访问数据？深度优先迭代？搜索特定值？

乍一看，这是一个节点树，其中每个节点可以有零个或多个子节点。

所以它是这样的：

```
class Node {
  Node parent;
  List<Node> children;
} 
```

它就像一个链表，但每个节点都可以分支成任意数量的子节点。如果您需要直接通过 id 查找项目，最好的办法是保留一个单独的 hashmap 索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T22:56:46.100

呃。您到底需要什么 DOM 未涵盖的内容？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T20:56:48.620

如果每个项目都有标题，那么您可以使用 Map 而不是 List。使访问每个项目更直观（使用节点的名称而不是索引）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T21:58:06.583

上次我需要树结构时 - 我作弊并使用了[树模型](http://java.sun.com/docs/books/tutorial/uiswing/components/tree.html)。它不是很漂亮（涉及到 Swing），但效果非常好！可惜他们没有把它放在 Collections API 中

# c - 用 fork() 打印斐波那契

> ID：719677
> 
> 赞同：3
> 
> 时间：2009-04-05T20:54:28.640
> 
> 标签：c, sequence, fibonacci

我遇到的问题是，例如当用户输入 7 时，显示屏会显示：

```
0 11 2 3 5 8 13 21 child ends. 
```

我似乎无法弄清楚如何修复 11 以及为什么它在序列中显示这么多数字！任何人都可以帮忙吗？

序列号将在命令行中提供。例如，如果提供了 5，则斐波那契数列中的前五个数字将由子进程输出。因为父进程和子进程都有自己的数据副本，所以子进程必须输出序列。让父进程调用 wait() 调用以等待子进程完成，然后再退出程序。执行必要的错误检查以确保在命令行上传递非负数。

```
#include <stdio.h>
#include <sys/types.h>
#include <unistd.h>

int main()
{
   int a=0, b=1, n=a+b,i,ii;
   pid_t pid;

   printf("Enter the number of a Fibonacci Sequence:\n");
   scanf("%d", &ii);

   if (ii < 0)
      printf("Please enter a non-negative integer!\n");
   else
   {
      pid = fork();
      if (pid == 0)
      {
         printf("Child is producing the Fibonacci Sequence...\n");
         printf("%d %d",a,b);
         for (i=0;i<ii;i++)
         {
            n=a+b;
            printf("%d ", n);
            a=b;
            b=n;
         }
         printf("Child ends\n"); 
      }
      else 
      {
         printf("Parent is waiting for child to complete...\n");
         wait(NULL);
         printf("Parent ends\n");
      }
   }
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-05T21:02:19.730

11 实际上是两个 1，它们之间没有空格。第一个来自这里的第二个 %d，因为 b 的值为 1：

```
printf("%d %d",a,b); 
```

第二个来自循环中的第一个 printf，其中 n = 1：

```
printf("%d ", n); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-05T21:05:17.537

这里没有结束空格

```
printf("%d %d",a,b); 
```

你第一次遇到麻烦

```
printf("%d ", n); 
```

您可以做的最优雅的事情是更改`printf` *循环*以预先添加所需的空间，如下所示：

```
printf(" %d", n); 
```

这样你就不会在最后留下一个悬挂空间......

* * *

您会显示“太多”元素，因为您没有计算第一个写入的元素`printf`...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T21:00:19.890

在我看来，您的程序正在正确生成斐波那契数列，也许前两个“1”字符看起来像“11”，因为它们在您的屏幕上被挤压在一起？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-19T07:55:37.157

你的代码有一些误导性的表达......

您将值作为键盘输入，而不是作为命令行参数...所以您可以按如下方式修改它...

```
 main(int argc, char *argv[]) 
```

然后您可以获取该值并将其存储为整数值...

```
 int num = atoi(argv[1]); 
```

您还可以检查用户是否可以使用...输入值

```
 if(argc < 2)
        {
            printf("You must enter a value to proceed this operation..\n");
            return;         
        } 
```

如果你在那里输入 no 1，它将打印 0 1。但答案应该只有 0；所以为了避免这种情况，你可以使用两个 if 条件...... if(n == 0) printf("0 "); if(n == 1) printf("1"); 通过使用以上两个 if 条件，您也可以避免打印输出 11....

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-07T07:01:29.530

写

> printf("%d %d",a,b);

代替

> printf("%d %d",a,b);

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-12-17T11:53:40.373

取下`printf("%d %d"a b);`并让 n 打印所有值。

首先将第一个变量设置为 eg `a = 1`，然后设置 second:`b = 0`和 third `c=a+b`。现在首先打印`c`没有任何更改（`printf("%d",c);`）然后执行`a=b; b=c;`：

```
for (i=0; i<ii; i++)
{ 
    c=a+b;
    printf("%d ", c);
    a=b;
    b=c;
} 
```

此外，在您的程序中，您已经完成了`n=a+b`两次，这不是必需的。

# asp.net-mvc - ASP.NET MVC 的自定义控制器工厂、依赖注入/结构图问题

> ID：719678
> 
> 赞同：27
> 
> 时间：2009-04-05T20:55:13.117
> 
> 标签：asp.net-mvc, dependency-injection, structuremap

我最近尝试使用 StructureMap 实现依赖注入。我设法一直遵循该示例，但每次尝试运行应用程序时都会遇到抛出的异常。这是我的控制器工厂的一些代码片段。

```
public class StructureMapControllerFactory : DefaultControllerFactory
{
    protected override IController GetControllerInstance(Type controllerType)
    {
        if (controllerType == null)
            throw new ArgumentNullException("controllerType");

        return ObjectFactory.GetInstance(controllerType) as Controller;
    }
} 
```

我的 Global.asax 调用了一个静态 BootStrapper 类，它注册了我的所有依赖项，但看起来 StructureMapControllerFactory 的 GetControllerInstance 被调用了两次。第一次调用时，传入了一个正确的控制器类型，但在第二次调用时它始终为空。

第一次调用 GetControllerInstance 时，类型设置为 HomeController 是正确的。HomeController 中触发的代码并返回 View()。在 View() 返回时，在 aspx 文件上调用 Page_Load 事件。完成之后，它到达了一行：

httpHandler.ProcessRequest(HttpContext.Current);

这就是第二次调用 GetControllerInstance 的地方。

这是我可能相关的 Global.asax 位：

```
 protected void Application_Start()
    {
        RegisterRoutes(RouteTable.Routes);

        Bootstrapper.ConfigureStructureMap();

        ControllerBuilder.Current.SetControllerFactory(new StructureMapControllerFactory());
    } 
```

我非常渴望让依赖注入工作，如果有人能帮助我，我将不胜感激。:)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-04-06T12:56:44.897

**更新** 发生这种情况的原因是，当在 css 文件中指定图像并且该图像丢失时，路由框架会尝试将 url 映射到控制器。忽略下面列出的路线将防止错误发生，但我决定不实施它，因为这是通知您缺少资源的好方法。

[您可以在此处](http://www.codingcontext.com/post/ControllerType-Is-Null-When-Creating-A-Custom-ControllerFactory.aspx)查看详细说明以及使用结构映射设置依赖注入的示例。

我遇到了同样的问题，我想我想通了。无论出于何种原因，每当您尝试提供自己的控制器工厂时，您都需要添加几个额外的 IgnoreRoute 定义。我要做的第一件事就是将此行添加到您的 GetControllerInstance 方法中：

```
if(controllerType == null)
    return base.GetControllerInstance(controllerType) 
```

这至少会在错误消息中为您提供有关导致 controllerType 为空的请求的更多信息。在我的特殊情况下，我的 css 文件中有一个背景图像，如下所示：

```
background: url(img/logo.gif); 
```

所以发生的事情是路由正在寻找一个名为“img”的控制器和一个采用 logo.gif 或类似内容的操作。这显然不是正确的行为。

经过一番挖掘，我意识到我需要在我的 Global.asax 文件中添加一个 IgnoreRoute 定义，它会忽略我网站的“内容”目录中的任何内容，如下所示：

```
routes.IgnoreRoute("{Content}/{*pathInfo}"); 
```

我仍然不确定为什么您不需要使用默认的 ControllerFactory 来执行此操作，但它仍然可以工作。

您可能会遇到与 favicon.ico 相同的问题。特别是如果您使用 google crhome。您还需要添加以下内容：

```
routes.IgnoreRoute("{*favicon}", new {favicon=@"(.*/)?favicon.ico(/.*)?"}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T04:01:38.347

我猜您正在请求一个静态文件，例如一个 javascript 文件，该文件尚未添加到您的项目中，或者对它的引用可能有错字。您应该监控您的浏览器 Web 请求，并在它们应该正确解析为静态文件时查找那些没有正确解析为静态文件的 Web 请求。如果您使用 IE 来执行此操作，则可以在 FF 或 fiddler 中使用 firebug。

# perl - 如何使用 Perl 填写 Web 表单？

> ID：719682
> 
> 赞同：4
> 
> 时间：2009-04-05T20:58:43.497
> 
> 标签：perl, forms, automation

我想用 Perl 填写一个 web 表单。我无法找到正确的语法来完成此操作。如中，我如何去 URL，选择表格，填写表格，然后按 Enter 以确保它已提交？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-05T21:13:56.847

像[WWW::Mechanize::FormFiller](http://search.cpan.org/perldoc?WWW::Mechanize::FormFiller)这样的东西？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-06T12:58:34.547

[WWW::Mechanize](http://search.cpan.org/dist/WWW-Mechanize)和它的朋友是要走的路。[Spidering Hacks](http://oreilly.com/catalog/9780596005771/)中有几个示例，但您还可以通过谷歌搜索模块名称来找到更多示例。

祝你好运， ：）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T18:19:28.053

从 WWW::Mechanize::Shell 开始：

```
perl -MWWW::Mechanize::Shell -e shell
get http://some/page
fillout
...
submit 
```

然后，输入“脚本”，并将生成的代码保存为 something.pl - 就是这样。完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T13:21:13.760

[HTML::Form](http://search.cpan.org/~gaas/libwww-perl-5.825/lib/HTML/Form.pm) works nicely, too.

The synopsis of the module is an excellent example:

```
 use HTML::Form;
 $form = HTML::Form->parse($html, $base_uri);
 $form->value(query => "Perl");

 use LWP::UserAgent;
 $ua = LWP::UserAgent->new;
 $response = $ua->request($form->click); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-05T23:11:28.327

使用 or 请求表单的操作 URL `Net::HTTP`（不记得确切的模块），并将表单字段包含为`GET`/`POST`参数（无论表单要求什么）。

# objective-c - 知道对象是否在数据库中初始化的正确方法是什么？

> ID：719691
> 
> 赞同：0
> 
> 时间：2009-04-05T21:04:46.243
> 
> 标签：objective-c, sqlite

我的数据库有问题 - 不知何故，数据库似乎在打开之前就被关闭了。

如果未打开数据库，我将使用以下语句： if (!database) then break;

当 *database 未打开时被设置为 nil (database = nil)。

我是否以正确的方式做这件事？或者我的代码中还有其他错误？

这是我的代码：

```
-(BOOL) loadDB: (NSString*) dbPath {

//Database was opened before
if (database) {
    sqlite3_close(database);
    database = nil;
}

//Opening database
if (sqlite3_open([dbPath UTF8String], &database) != SQLITE_OK)
{
    database = nil;
    return FALSE;
}

return TRUE; 
```

}

该代码被多次调用，有时会引发异常。为什么会发生这种情况？

当我使用调试器查看问题发生在哪里时，它会显示： sqlite3_close(database);

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T21:58:37.533

你的大括号太早了（但我认为这不是问题，因为它不会编译。

作为样式说明，请仅从函数返回一次（并将其放在底部）。创建一个 BOOL，将其初始化为 TRUE，并在必要时将其值更改为 FALSE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T09:05:28.697

尝试将数据库指针设置为 NULL 而不是 nil。

```
-(BOOL) loadDB: (NSString*) dbPath {
    BOOL retVal = TRUE

    //Database was opened before
    if (database) {
        sqlite3_close(database);
        database = NULL; // <-- NULL not nil
    }

    //Opening database
    if (sqlite3_open([dbPath UTF8String], &database) != SQLITE_OK) {
        database = NULL; // <-- NULL not nil
        retVal = FALSE;
    }
    return retVal;
} 
```

在 Objective C 中，nil 是一个对象上的 nil 指针。But`database`是指向结构的指针，因此请改用 NULL。

# asp.net - 在我得到异常之前只能枚举前 20 个左右的 cookie

> ID：719697
> 
> 赞同：1
> 
> 时间：2009-04-05T21:10:17.713
> 
> 标签：asp.net, internet-explorer, firefox

以下代码创建 100 个 cookie，然后通过回发枚举它们。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        for (int i = 0; i < 100; i++)
        {
            HttpCookie cookie = new HttpCookie("cookie num." + i.ToString());
            cookie["Cookie"] = i.ToString() + "th cookie, anyone?";
            cookie.Expires = DateTime.Now.AddMonths(1);
            Response.Cookies.Add(cookie);
        }

        int i1 = 0;
        Session["i"] = i1;
    }

    if (IsPostBack)
    {
        int i = (int)Session["i"];
        HttpCookie cookie= Request.Cookies["Cookie num." + i.ToString()];
        Label1.Text = cookie["Cookie"];
        Session["i"] = ++i;
    }
 } 
```

Q1 - 但是当使用 Firefox 时，应用程序只能通过前 20 个（最多 40 个）cookie，而不是能够枚举所有 100 个 cookie，然后报告*对象引用未设置为对象*异常的实例：

Q2 - 当我通过 IE 请求此页面时，我总是会在第一次回发时得到*未将对象引用设置为对象*异常的实例（顺便说一句 - 我检查过，IE 确实设法将所有 100 个 cookie 存储到一个文件中）。

谢谢

编辑：

但以下链接适用于 IE，而 Firefox 并没有保存所有 cookie。而对于 IE，代码无法通过任何 cookie 进行枚举。因此，如果我至少能够枚举前 20 个 cookie（在 IE 中），那么上述答案将是有效的，而我不是

2.编辑：

> 该规范不保证浏览器在存储空间用完时必须保留哪些 cookie，因此浏览器可以自由地按照自己喜欢的方式行事，您应该期待不同的行为。此外，在您的示例中，所有 cookie 都设置在单个响应的标头中。HTTP 标头没有顺序，因此无法保证它们首先会以任何特定顺序进行处理。

“处理”到底是什么意思？

谢谢你帮助我

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-05T21:13:18.737

[您不能指望能够为每个主机名设置超过 20 个 cookie。](http://support.microsoft.com/kb/306070)

预计到达时间：

> 但以下链接适用于 IE，而 Firefox 并没有保存所有 cookie。

是的，但是文章引用了 RFC2109，它也适用于 Firefox。

至于您*何时*收到错误，这将取决于浏览器决定保留哪些 cookie。如果它保持前 20 个 cookie 设置，您将在 cookie20 处收到错误；如果它丢弃较早的 cookie 为新的 cookie 腾出空间，您将只剩下 cookie80-cookie99 并且尝试访问 cookie0 将出错。

该规范不保证浏览器在存储空间用完时必须保留哪些 cookie，因此浏览器可以自由地按照自己喜欢的方式行事，您应该期待不同的行为。此外，在您的示例中，所有 cookie 都设置在单个响应的标头中。HTTP 标头没有顺序，因此无法保证它们首先会以任何特定顺序进行处理。

RFC2109 的限制通常不能完全反映现实，但每个浏览器都有自己的 cookie 限制，您通常应该努力将 cookie 数据保持在最低限度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T15:28:40.910

Internet Explorer 拒绝您的 cookie 可能有多种原因（例如安全设置等）

此外，所有浏览器都对它们接受的 cookie 数量有限制（20 到 50 之间），此外，cookie 字符串的总长度也有限制（例如 10 kB）。

所以没有机会在任何浏览器中设置 100 个 cookie。

您可以在这里找到一位 Internet Explorer 程序员本人对所有这些问题的详细解答：http: [//blogs.msdn.com/b/ieinternals/archive/2009/08/20/wininet-ie-cookie-internals-faq .aspx](http://blogs.msdn.com/b/ieinternals/archive/2009/08/20/wininet-ie-cookie-internals-faq.aspx)

# c# - 是否可以在 IIS 之外的独立应用程序中托管 ASPX 网页

> ID：719703
> 
> 赞同：2
> 
> 时间：2009-04-05T21:12:59.250
> 
> 标签：c#, asp.net, silverlight, hosting

我在桌面上有一个厚实的 GUI 应用程序（可能作为服务运行，但也作为普通应用程序运行）。我想向应用程序公开一个 Web 界面，以便对应用程序进行一些远程监视和控制。

我目前正在托管一个仅在应用程序中返回 HTML 的 WCF 服务，该服务运行良好，但最好是使用 ASP.Net 应用程序或 silverlight 应用程序。

有没有办法从我的应用程序中托管 aspx 或 silverlight 应用程序？

作为其中的一部分，我希望能够在两个应用程序之间共享数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-05T21:24:43.823

是的。你甚至不需要 Cassini，因为它包装了框架中已经存在的 ASPX 托管位，它都在[System.Web.Hosting中](http://msdn.microsoft.com/en-us/library/system.web.hosting.aspx)

MSDN 有一篇[很好](http://msdn.microsoft.com/en-gb/magazine/cc163879.aspx)的文章

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T21:21:39.340

内置于 VS 中的微型网络服务器称为 Cassini，您可以在某处下载源代码。不起诉版本和许可证。

Cassini 提供（演示）ASP Hosting 的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T21:45:29.673

ScottHa 有一篇关于[托管 Cassini](http://www.hanselman.com/blog/NUnitUnitTestingOfASPNETPagesBaseClassesControlsAndOtherWidgetryUsingCassiniASPNETWebMatrixVisualStudioWebDeveloper.aspx)进行单元测试的文章。我以前用过它，稍作修改，用于单元测试，效果很好。

不知道[直接使用 HTTP.SYS](https://stackoverflow.com/questions/719703/is-it-possible-to-host-an-aspx-web-page-in-a-stand-alone-application-outside-of/719719#719719)会有什么不同，但我认为两者都应该工作得很好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-05T21:20:50.027

如我所见，最简单的解决方案是在您的应用程序上放置一个浏览器控件，在浏览器中放置一个 silverlight 应用程序，

如果您想在应用程序和 silverlight 之间共享数据，您可以尝试将应用程序中的 wcf 服务公开给 silverlight，如果它也很简单的话。

# python - python内部类的目的是什么？

> ID：719705
> 
> 赞同：109
> 
> 时间：2009-04-05T21:13:28.017
> 
> 标签：python, class, oop, language-features

Python 的内部/嵌套类让我感到困惑。有没有他们不能完成的事情？如果有，那是什么东西？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2009-04-05T21:24:34.713

引自[http://www.geekinterview.com/question_details/64739](http://www.geekinterview.com/question_details/64739)：

> ### 内部类的优点：
> 
> *   **类的逻辑分组**：如果一个类仅对另一个类有用，那么将其嵌入该类并将两者保持在一起是合乎逻辑的。嵌套这样的“帮助类”使它们的包更加精简。
> *   **增加封装**：考虑两个顶级类 A 和 B，其中 B 需要访问 A 的成员，否则这些成员将被声明为私有。通过将类 B 隐藏在类 A 中，可以将 A 的成员声明为私有，并且 B 可以访问它们。另外B本身可以对外界隐藏。
> *   **更具可读性、可维护性的代码**：在顶级类中嵌套小类使代码更接近使用它的位置。

主要优点是组织。任何可以用内部类完成的事情都**可以**在没有它们的情况下完成。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2009-04-06T16:23:21.763

> 有没有他们不能完成的事情？

不。它们绝对等同于在顶层通常定义类，然后将对它的引用复制到外部类中。

我不认为嵌套类被“允许”有任何特殊原因，除了明确地“禁止”它们也没有特别的意义。

如果您正在寻找一个存在于外部/所有者对象的生命周期内的类，并且始终具有对外部类实例的引用——Java 那样的内部类——那么 Python 的嵌套类就不是那个东西。但是你可以破解*类似*的东西：

```
import weakref, new

class innerclass(object):
    """Descriptor for making inner classes.

    Adds a property 'owner' to the inner class, pointing to the outer
    owner instance.
    """

    # Use a weakref dict to memoise previous results so that
    # instance.Inner() always returns the same inner classobj.
    #
    def __init__(self, inner):
        self.inner= inner
        self.instances= weakref.WeakKeyDictionary()

    # Not thread-safe - consider adding a lock.
    #
    def __get__(self, instance, _):
        if instance is None:
            return self.inner
        if instance not in self.instances:
            self.instances[instance]= new.classobj(
                self.inner.__name__, (self.inner,), {'owner': instance}
            )
        return self.instances[instance]

# Using an inner class
#
class Outer(object):
    @innerclass
    class Inner(object):
        def __repr__(self):
            return '<%s.%s inner object of %r>' % (
                self.owner.__class__.__name__,
                self.__class__.__name__,
                self.owner
            )

>>> o1= Outer()
>>> o2= Outer()
>>> i1= o1.Inner()
>>> i1
<Outer.Inner inner object of <__main__.Outer object at 0x7fb2cd62de90>>
>>> isinstance(i1, Outer.Inner)
True
>>> isinstance(i1, o1.Inner)
True
>>> isinstance(i1, o2.Inner)
False 
```

（这使用了类装饰器，这是 Python 2.6 和 3.0 中的新功能。否则你必须在类定义之后说“Inner= innerclass(Inner)”。）

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2009-04-06T16:38:01.290

有一些东西你需要绕着你的脑袋才能理解这一点。在大多数语言中，类定义是编译器的指令。也就是说，类是在程序运行之前创建的。在python中，所有语句都是可执行的。这意味着该声明：

```
class foo(object):
    pass 
```

是在运行时执行的语句，就像这样：

```
x = y + z 
```

这意味着您不仅可以在其他类中创建类，还可以在任何地方创建类。考虑这段代码：

```
def foo():
    class bar(object):
        ...
    z = bar() 
```

因此，“内部类”的概念并不是真正的语言结构。这是一个程序员的构造。Guido 很好地总结了这一切是如何发生[的](http://python-history.blogspot.com/2009/03/how-everything-became-executable.html)。但本质上，基本思想是这简化了语言的语法。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-04-06T15:43:54.027

在类中嵌套类：

*   嵌套类使类定义膨胀，使其更难看到发生了什么。

*   嵌套类会产生耦合，使测试更加困难。

*   在 Python 中，您可以在文件/模块中放置多个类，这与 Java 不同，因此该类仍然接近顶级类，甚至可以在类名前加上“_”，以帮助表示其他类不应该是使用它。

嵌套类可以证明有用的地方是在函数中

```
def some_func(a, b, c):
   class SomeClass(a):
      def some_method(self):
         return b
   SomeClass.__doc__ = c
   return SomeClass 
```

该类从函数中捕获值，允许您在 C++ 中动态创建一个类，如模板元编程

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-04-29T22:52:04.600

我理解反对嵌套类的论点，但在某些情况下使用它们是有道理的。想象一下，我正在创建一个双向链表类，我需要创建一个节点类来维护节点。我有两个选择，在 DoublyLinkedList 类中创建 Node 类，或者在 DoublyLinkedList 类之外创建 Node 类。在这种情况下，我更喜欢第一种选择，因为 Node 类只在 DoublyLinkedList 类中才有意义。虽然没有隐藏/封装的好处，但是可以说 Node 类是 DoublyLinkedList 类的一部分，这是一个分组的好处。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2020-05-14T20:19:44.317

> 有没有他们不能完成的事情？如果有，那是什么东西？

没有一些事情是*不能轻易做到*的：**相关类的继承**。

这是一个带有相关类的极简示例，`A`并且`B`：

```
class A(object):
    class B(object):
        def __init__(self, parent):
            self.parent = parent

    def make_B(self):
        return self.B(self)

class AA(A):  # Inheritance
    class B(A.B):  # Inheritance, same class name
        pass 
```

这段代码导致了一个非常合理和可预测的行为：

```
>>> type(A().make_B())
<class '__main__.A.B'>
>>> type(A().make_B().parent)
<class '__main__.A'>
>>> type(AA().make_B())
<class '__main__.AA.B'>
>>> type(AA().make_B().parent)
<class '__main__.AA'> 
```

如果`B`是顶级类，则不能`self.B()`在方法中编写，而`make_B`只需编写`B()`，从而失去对适当类的**动态绑定。**

请注意，在此构造中，您永远不应该在 class`A`的主体中引用 class `B`。`parent`这就是在 class 中引入属性的动机`B`。

当然，这种动态绑定可以在*没有*内部类的情况下重新创建，但代价是对类进行繁琐且容易出错的检测。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-07-22T13:07:19.480

## 1.两种功能等效的方式

前面显示的两种方式在*功能*上是相同的。但是，存在一些细微的差异，并且在某些情况下您想选择一个而不是另一个。

**方式一：嵌套类定义**
（="Nested class"）

```
class MyOuter1:
    class Inner:
        def show(self, msg):
            print(msg) 
```

**方式2：模块级内部类附加到外部类**
（=“引用内部类”）

```
class _InnerClass:
    def show(self, msg):
        print(msg)

class MyOuter2:
    Inner = _InnerClass 
```

[^(*下划线用于跟随[PEP8](https://www.python.org/dev/peps/pep-0008/) “内部接口（包、模块、类、函数、属性或其他名称）应该 -- 以单个前导下划线作为前缀。”*)]

## 2\. 相似之处

下面的代码片段演示了“嵌套类”与“引用内部类”的功能相似之处；在检查内部类实例的类型时，它们的行为方式相同。不用说， 的`m.inner.anymethod()`行为与`m1`和`m2`

```
m1 = MyOuter1()
m2 = MyOuter2()

innercls1 = getattr(m1, 'Inner', None)
innercls2 = getattr(m2, 'Inner', None)

isinstance(innercls1(), MyOuter1.Inner)
# True

isinstance(innercls2(), MyOuter2.Inner)
# True

type(innercls1()) == mypackage.outer1.MyOuter1.Inner
# True (when part of mypackage)

type(innercls2()) == mypackage.outer2.MyOuter2.Inner
# True (when part of mypackage) 
```

## 3\. 差异

下面列出了“嵌套类”和“引用内部类”的区别。它们并不大，但有时您想根据这些选择其中一个。

### 3.1 代码封装

使用“嵌套类”可以比使用“引用内部类”更好地封装代码。模块命名空间中的类是*全局*变量。嵌套类的目的是减少模块中的混乱，并将内部类放在外部类中。

虽然没有人* 在使用`from packagename import *`，但少量的模块级变量可能会很好，例如在使用带有代码完成/智能感知的 IDE 时。

^([**对吗？*])

### 3.2 代码的可读性

Django 文档指示将[内部类 Meta](https://docs.djangoproject.com/en/3.0/topics/db/models/#meta-options)用于模型元数据。指示框架用户编写一个`class Foo(models.Model)`with inner会更清楚一些* `class Meta`；

```
class Ox(models.Model):
    horn_length = models.IntegerField()

    class Meta:
        ordering = ["horn_length"]
        verbose_name_plural = "oxen" 
```

而不是“写一个`class _Meta`，然后`class Foo(models.Model)`用`Meta = _Meta`”写一个；

```
class _Meta:
    ordering = ["horn_length"]
    verbose_name_plural = "oxen"

class Ox(models.Model):
    Meta = _Meta
    horn_length = models.IntegerField() 
```

*   使用“嵌套类”方法，代码***可以读取嵌套的项目符号列表***，但使用“引用内部类”方法，必须向上滚动`_Meta`才能看到其“子项”（属性）的定义。

*   如果您的代码嵌套级别增加或由于某些其他原因行很长，“引用的内部类”方法可能更具可读性。

[^(** 当然，口味问题*)]

### 3.3 略有不同的错误信息

这没什么大不了的，只是为了完整性：当访问内部类的不存在属性时，我们会看到略有不同的异常。继续第 2 节中给出的示例：

```
innercls1.foo()
# AttributeError: type object 'Inner' has no attribute 'foo'

innercls2.foo()
# AttributeError: type object '_InnerClass' has no attribute 'foo' 
```

这是因为`type`内部类的 s 是

```
type(innercls1())
#mypackage.outer1.MyOuter1.Inner

type(innercls2())
#mypackage.outer2._InnerClass 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-09-11T21:49:32.697

我使用它的主要用例是防止小模块的扩散，*并*在不需要单独的模块时防止命名空间污染。如果我正在扩展一个现有类，但该现有类必须引用另一个应该始终耦合到它的子类。例如，我可能有一个`utils.py`模块，其中包含许多帮助类，它们不一定耦合在一起，但我想加强*其中一些*帮助类的耦合。例如，当我实现[https://stackoverflow.com/a/8274307/2718295](https://stackoverflow.com/a/8274307/2718295)

: `utils.py`:

```
import json, decimal

class Helper1(object):
    pass

class Helper2(object):
    pass

# Here is the notorious JSONEncoder extension to serialize Decimals to JSON floats
class DecimalJSONEncoder(json.JSONEncoder):

    class _repr_decimal(float): # Because float.__repr__ cannot be monkey patched
        def __init__(self, obj):
            self._obj = obj
        def __repr__(self):
            return '{:f}'.format(self._obj)

    def default(self, obj): # override JSONEncoder.default
        if isinstance(obj, decimal.Decimal):
            return self._repr_decimal(obj)
        # else
        super(self.__class__, self).default(obj)
        # could also have inherited from object and used return json.JSONEncoder.default(self, obj) 
```

然后我们可以：

```
>>> from utils import DecimalJSONEncoder
>>> import json, decimal
>>> json.dumps({'key1': decimal.Decimal('1.12345678901234'), 
... 'key2':'strKey2Value'}, cls=DecimalJSONEncoder)
{"key2": "key2_value", "key_1": 1.12345678901234} 
```

当然，我们可以完全避免继承`json.JSONEnocder`而只覆盖 default()：

：

```
import decimal, json

class Helper1(object):
    pass

def json_encoder_decimal(obj):
    class _repr_decimal(float):
        ...

    if isinstance(obj, decimal.Decimal):
        return _repr_decimal(obj)

    return json.JSONEncoder(obj)

>>> json.dumps({'key1': decimal.Decimal('1.12345678901234')}, default=json_decimal_encoder)
'{"key1": 1.12345678901234}' 
```

但有时只是为了约定，您希望`utils`由类组成以实现可扩展性。

这是另一个用例：我希望在我的 OuterClass 中创建一个可变工厂，而不必调用`copy`：

```
class OuterClass(object):

    class DTemplate(dict):
        def __init__(self):
            self.update({'key1': [1,2,3],
                'key2': {'subkey': [4,5,6]})

    def __init__(self):
        self.outerclass_dict = {
            'outerkey1': self.DTemplate(),
            'outerkey2': self.DTemplate()}

obj = OuterClass()
obj.outerclass_dict['outerkey1']['key2']['subkey'].append(4)
assert obj.outerclass_dict['outerkey2']['key2']['subkey'] == [4,5,6] 
```

我更喜欢这种模式，而`@staticmethod`不是你会用于工厂函数的装饰器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-18T10:37:54.607

我已经使用 Python 的内部类在 unittest 函数（即 inside `def test_something():`）中故意创建有错误的子类，以便接近 100% 的测试覆盖率（例如，通过覆盖某些方法来测试很少触发的日志语句）。

回想起来，它类似于 Ed 的回答[https://stackoverflow.com/a/722036/1101109](https://stackoverflow.com/a/722036/1101109)

一旦删除了对它们的所有引用，此类内部类*应该*超出范围并准备好进行垃圾收集。例如，获取以下`inner.py`文件：

```
class A(object):
    pass

def scope():
    class Buggy(A):
        """Do tests or something"""
    assert isinstance(Buggy(), A) 
```

我在 OSX Python 2.7.6 下得到以下奇怪的结果：

```
>>> from inner import A, scope
>>> A.__subclasses__()
[]
>>> scope()
>>> A.__subclasses__()
[<class 'inner.Buggy'>]
>>> del A, scope
>>> from inner import A
>>> A.__subclasses__()
[<class 'inner.Buggy'>]
>>> del A
>>> import gc
>>> gc.collect()
0
>>> gc.collect()  # Yes I needed to call the gc twice, seems reproducible
3
>>> from inner import A
>>> A.__subclasses__()
[] 
```

提示 - 不要继续尝试使用 Django 模型执行此操作，这似乎保留了对我的错误类的其他（缓存？）引用。

所以总的来说，我不建议将内部类用于这种目的，除非你真的重视 100% 的测试覆盖率并且不能使用其他方法。尽管我认为很高兴知道如果您使用`__subclasses__()`，它*有时*会被内部类污染。无论哪种方式，如果您遵循这一点，我认为我们在这一点上已经非常深入地了解 Python，私人 dunderscores 等等。

# jakarta-ee - Java Web 应用程序：使用自定义领域

> ID：719708
> 
> 赞同：14
> 
> 时间：2009-04-05T21:14:29.963
> 
> 标签：jakarta-ee, authentication, jaas, jaspic

我正在编写一个需要通过 web 服务执行登录的 java web 应用程序。当然，我正在使用的应用程序服务器（glassfish v2）提供的任何领域都不能解决问题。因此我不得不自己写。然而，我编写的领域实现似乎完全与 glassfish 相关联，不能在任何其他应用程序服务器中使用。

是否有任何标准或广泛支持的方式来实现自定义领域？是否可以以任何方式从 .war 部署该领域，或者它是否总是需要从服务器自己的类路径中加载？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-06T23:30:20.333

注意：下面的答案仅对 Java EE 5 有效。正如在其他答案之一中引起我注意的那样，Java EE 6 确实支持这一点。因此，如果您使用的是 Java EE 6，请不要阅读此答案，而应阅读其他相关答案。

根据我自己的研究和对这个问题的回答，我找到了以下答案：虽然 JAAS 是一个标准接口，但在各种应用服务器中编写、部署和集成 JAAS Realm + LoginModule 并没有统一的方法。

Glassfish v2 要求您扩展它自己的一些实现 LoginModule 或 Realm 的内部类。但是，您不能自定义整个登录过程，因为 LoginModule 接口的许多方法在 Glassfish 的超类中都标记为 final。自定义 LoginModule 和 Realm 类必须放在 AS 类路径中（不是应用程序的），并且必须手动注册领域（不能从 .war 部署）。

Tomcat 的情况似乎要好一些，它可以让您完全编写自己的 Realm 和 LoginModule，然后使用自己的 JAASRealm 将它们配置到应用程序服务器中（这会将实际工作委托给您的 Realm 和 LoginModule 的实现） . 但是，即使是 tomcat 也不允许从您的 .war 部署您的自定义领域。

请注意，显示我的结果的应用程序服务器似乎都不能充分利用所有 JAAS 回调。它们似乎都只支持基本的用户名+密码方案。如果您需要比这更复杂的东西，那么您将需要找到一个不受 Java EE 容器管理的解决方案。

作为参考，并且因为在我的问题的评论中被要求，这是我为 GlassfishV2 编写的代码。

首先，这是 Realm 的实现：

```
public class WebserviceRealm extends AppservRealm {

private static final Logger log = Logger.getLogger(WebserviceRealm.class.getName());

private String jaasCtxName;
private String hostName;
private int port;
private String uri;

@Override
protected void init(Properties props) throws BadRealmException, NoSuchRealmException {
    _logger.info("My Webservice Realm : init()");

    // read the configuration properties from the user-supplied properties,
    // use reasonable default values if not present
    this.jaasCtxName = props.getProperty("jaas-context", "myWebserviceRealm");
    this.hostName = props.getProperty("hostName", "localhost");
    this.uri = props.getProperty("uri", "/myws/EPS");

    this.port = 8181;
    String configPort = props.getProperty("port");
    if(configPort != null){
        try{
            this.port = Integer.parseInt(configPort);
        }catch(NumberFormatException nfe){
            log.warning("Illegal port number: " + configPort + ", using default port (8181) instead");
        }
    }
}

@Override
public String getJAASContext() {
    return jaasCtxName;
}

public Enumeration getGroupNames(String string) throws InvalidOperationException, NoSuchUserException {
    List groupNames = new LinkedList();
    return (Enumeration) groupNames;
}

public String getAuthType() {
    return "My Webservice Realm";
}

public String getHostName() {
    return hostName;
}

public int getPort() {
    return port;
}

public String getUri() {
    return uri;
}
} 
```

然后是 LoginModule 实现：

```
public class WebserviceLoginModule extends AppservPasswordLoginModule {

// all variables starting with _ are supplied by the superclass, and must be filled
// in appropriately

@Override
protected void authenticateUser() throws LoginException {
    if (_username == null || _password == null) {
        throw new LoginException("username and password cannot be null");
    }

    String[] groups = this.getWebserviceClient().login(_username, _password);

    // must be called as last operation of the login method
    this.commitUserAuthentication(groups);
}

@Override
public boolean commit() throws LoginException {
    if (!_succeeded) {
        return false;
    }

    // fetch some more information through the webservice...

    return super.commit();
}

private WebserviceClient getWebserviceClient(){
    return theWebserviceClient;
}
} 
```

最后，在 Realm 中必须绑定到 LoginModule。这是在 JAAS 配置文件级别完成的，在 glassfish v2 中位于 yourDomain/config/login.conf 中。在该文件的末尾添加以下行：

```
myWebserviceRealm { // use whatever String is returned from you realm's getJAASContext() method
    my.auth.login.WebserviceLoginModule required;
}; 
```

这就是让我在 glassfish 上工作的原因。同样，该解决方案不能跨应用服务器移植，但据我所知，没有现成的可移植解决方案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T13:33:22.480

> 是否有任何标准或广泛支持的方式来实现自定义领域？是否可以以任何方式从 .war 部署该领域，或者它是否总是需要从服务器自己的类路径中加载？

绝对有一种标准的方式来实现自定义领域，或者更一般地说，自定义身份验证模块。这可以通过[JASPIC/JASPI/JSR 196 SPI/API](http://www.jcp.org/en/jsr/detail?id=196)来完成。JASPIC 是任何完整 Java EE 6 实现的标准部分，但遗憾的是它不是 Java EE 6 Web Profile 的一部分。

然而，尽管 JASPIC 是 Java EE 6 的一部分，但它并没有得到供应商的最佳支持。GlassFish 和 WebLogic 似乎有很好的实现，JBoss AS 和 Geronimo 的问题有点多。JBoss 关于这个主题的首席工程师 (Anil Saldhana) 甚至表示他暂时[拒绝默认激活](https://community.jboss.org/wiki/JBossAS7EnablingJASPIAuthenticationForWebApplications#comment-10018)JASPIC 。Jboss AS 7.1 中的一些最严重的错误[最近已被修复](https://issues.jboss.org/browse/AS7-5735)，但由于不再计划发布 JBoss 7.1.x 的公开版本，而且 JBoss AS 7.2 还需要一段时间，这意味着至少在 JBoss JASPIC 上是麻烦。

另一个不幸的问题是实际的身份验证模块可能是标准化的，但是没有声明性的方式（读取 XML 文件）来配置它是标准化的。

> Is it in any way possible to deploy that realm from a .war, or does it always need to be loaded from the server's own classpath?

With JASPIC, the authentication module ('realm') can indeed be loaded from a .war. I'm not 100% sure whether this is guaranteed by the spec, but of the 4 servers I tested (GlassFish, WebLogic, Geronimo and JBoss AS), they all supported this. Geronimo unfortunately has some kind of race condition in its programmatic registration, so you need an ugly workaround by doing a hot deploy twice, but it in the end if does load the module from the .war.

As of the proprietary mechanisms, at least JBoss AS has always supported loading the module (e.g. a subclass of org.jboss.security.auth.spi.AbstractServerLoginModule) from the .war or .ear.

我最近[写了一篇关于这个主题的博客文章，其中包含更多细节。](http://arjan-tijms.blogspot.com/2012/11/implementing-container-authentication.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-07T00:02:28.210

您永远不能从 WAR 部署领域，因为领域不是应用程序工件，它是容器工件（因此称为“基于容器的安全性”）。您可以将您的应用程序配置为使用容器提供的特定领域，但应用程序本身无法提供。

也就是说，虽然所有容器都是不同的，并且这些领域是不可移植的，但如果您正在寻找可移植性，简单的常识将减少与容器集成所需的一点点胶水代码的差异。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T22:32:17.257

快速查看 Suns 文档后，您似乎必须编写一个自定义 LoginModule 来扩展他们的应用程序服务器特定类。这对我来说似乎有点倒退，并且是 Glassfish 的限制。

如果您想让它更便携，我建议将大部分实现放在针对标准 JavaEE 接口开发的自定义 LoginModule 中，然后有一个特定于 Glassfish 的薄实现层，它委托给标准的可移植实现.

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-04-06T07:05:29.903

查看**[Sun 关于此主题的文章](http://developers.sun.com/appserver/reference/techart/as8_authentication/)**。

我自己从来没有真正这样做过，但我非常有信心每个 AS 都为您提供了在其上注册新领域（安全域）的选项。

它可能不会 100% 可移植，并且对于每个 AS，您可能需要不同的配置 XML，但基本上，代码没有任何不同的理由。

# php - 如何使用 Cherrypy 设置会话名称？

> ID：719710
> 
> 赞同：0
> 
> 时间：2009-04-05T21:15:20.493
> 
> 标签：php, python, session, cherrypy

在 PHP 中，我会这样做：

```
session_name("special_session_name"); 
```

那么我该如何使用 Cherrypy 呢？只需要找到它的完全等价物。PHP 手册页： http: [//fi2.php.net/session_name](http://fi2.php.net/session_name)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T22:00:49.137

阅读文档和源代码很可能您必须在配置文件中设置“tools.sessions.name”：

```
cherrypy.config.update({'tools.sessions.name': "special_session_name"}) 
```

# java - 如何检查我是否安装了用于小程序的 Java 6 插件 2？

> ID：719712
> 
> 赞同：1
> 
> 时间：2009-04-05T21:16:33.843
> 
> 标签：java, applet

另外，创建一个使用 java 6 插件 2 的小程序与创建一个普通的小程序有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T21:33:34.270

[有关Applet 和 Object 标记](http://java.sun.com/javase/6/docs/technotes/guides/plugin/developer_guide/using_tags.html)，请参阅 Java 文档。尤其是查看object标签的“class ID”属性的文档。你想使用这样的classid标签：

```
classid="clsid:CAFEEFAC-xxxx-yyyy-zzzz-ABCDEFFEDCBA" 
```

在哪里

```
xxxx = 0016
yyyy = 0000
zzzz = 0002 
```

这将指定确切的版本。不，指定任何特定的 Java 版本与要求“安装的最新版本”没有什么不同，除了 classid 属性的值和可能的 codebase 属性的值。

另请参阅Java 6 update 10 中的[部署建议](http://java.sun.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html)。请注意，Java 6 update 10 添加了许多重要功能，例如，允许您在浏览器之外运行 Applet。

# hosting - 自托管的优点和缺点是什么？

> ID：719713
> 
> 赞同：11
> 
> 时间：2009-04-05T21:17:37.710
> 
> 标签：hosting

自托管类似 svn 存储库的优点和缺点是什么？感谢所有链接和想法。

在我的头顶上：

**自托管的优势**

*   灵活性。在我自己的机器上，我可以安装任何我想要的东西。如果我想使用像 Bazaar 这样的 vcs 并使用 Loggerhead 而不是 Trac，那么现在除了 Launchpad 之外没有太多选择，它有它的缺点
*   存钱。成本会随着时间的推移而增加，尤其是对于大型团队而言
*   Assembla 等网站提供的免费计划不是私人的。任何人都可以访问您的代码

**付费托管的优势（即：GitHub、Assembla、Google Code）**

*   稳健性。您不必担心您的服务器会着火，因为它已成为其他人的问题。
*   少麻烦。不需要做所有的系统管理和 conf 文件的调整。相反，您可以只专注于编码

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-05T21:32:16.037

对于生产，如果您是专业的系统管理员，您应该只使用自托管。您能否对以下问题回答“是”（有点面向 linux，但您应该有所了解）：

*   你能在几分钟内对系统故障做出反应（我的意思是你至少需要睡觉。你睡着的时候有人照顾系统吗？）
*   你能发现系统中断吗？
*   你能从你的系统中删除漏洞吗？
*   你能重新编译内核吗？如果你不能删除漏洞？
*   您能否配置系统以获得最佳性能？
*   您愿意为 UPS、备用存储和替代互联网提供商付费吗？

如果你对这些问题的回答是肯定的，那么好处是非常有吸引力的，我会同意的。

另一方面，托管开发环境可以由任何级别的管理员管理，尤其是当有像 Ubuntu 这样易于使用的服务器时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-05T21:40:19.887

您特别询问了托管颠覆存储库的问题，因此想到的第一个缺点是**数据保护**。我个人永远不会相信第三方的源代码，除了开源代码或不重要的副项目的代码。源代码对于 ISV 来说是一项**非常重要的资产**，因此信任第三方来保护您的源代码听起来不是一个好主意。

即使它与源代码无关，外包您业务的其他关键部分（如电子邮件、会计/发票*）也只是自找麻烦。当您外包数据托管时，您不必再关心备份了。您**仍然应该备份您的数据**，以防托管公司搞砸了。

*) 对于外包会计/发票，我的意思是所有那些新的托管发票应用程序，当然没有从会计师那里得到帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T21:25:09.860

我发现外部主机的 Web 界面很麻烦。另外，您可以在机器上拥有任何想要的空间。就像你说的，维护可能是自托管的负担。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-05T21:32:33.527

你的项目有多大？如果它不是太大，只需在[http://www.beanstalkapp.com](http://www.beanstalkapp.com)上获得一个帐户， 这就是我所做的。我不必担心任何设置，可以专注于实际开发。如果您的情况更复杂，则值得考虑自托管。但请记住，您也必须进行备份，并且服务器的更新会搞砸很多事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-05T21:36:19.117

这与服务器着火有关，但外部托管的一个关键优势是它（大概）是自动备份的。自己做备份很麻烦，而且最终不如你从谷歌那里得到的可靠。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-05T21:37:13.547

自托管带来了巨大的责任。

*   你必须备份一切
*   您需要硬件备件
*   如果你有重要的东西，你需要冗余硬件
*   你没有真正的假期。如果有什么东西坏了，你必须修理它

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-06T00:38:39.740

除了其他人已经提到的之外，亚马逊、雅虎、谷歌、微软等公司使用云服务也有特定的好处。尽管有些人可能声称，自托管本质上并不“更安全”。在大多数情况下，实际上恰恰相反。这是因为大多数中小型公司没有资源来提供像微软或亚马逊这样的大型公司可以提供的可靠性和冗余水平。除非您为绝密防御项目或其他间谍威胁非常真实的项目托管源代码，否则对您的代码和业务的最大威胁是服务器/网络停机等更普通的事情。

*   **冗余**：云服务提供了大多数企业无法自行获得的冗余级别。这包括数据冗余（备份/RAID）、硬件冗余（组件/设备）和地理冗余（全球多个服务器位置）。如果自然灾害袭击您的城市，您的数据是否安全？
*   **多租户**：每个小型企业本身无法负担 24/7 的支持人员和价值数百万美元的设备。但是通过云服务将他们的资源集中在一起，可以（通过集中化和更好的资源利用率/更高的效率）获得更高级别的服务。
*   **安全**性：与多租户相关，通过集中数千家企业的数据，这使得安全资源更加集中。

最后，应该注意的是，大多数商业托管服务提供商都提供托管和专用托管服务。甚至云服务提供商也允许客户随意配置他们的“服务器”，并在其上安装/运行他们想要的任何应用程序。因此，与每月 10 美元的虚拟主机相比，您可以获得更多的自由。

# user-interface - 哪种编程环境和工具链最适合患有严重肌肉残疾的 Web 开发人员？

> ID：719715
> 
> 赞同：6
> 
> 时间：2009-04-05T21:19:05.507
> 
> 标签：user-interface

我在使用 TTS（文本到语音）和 VR（语音识别）的可访问应用程序领域进行了广泛的工作。我有机会长时间使用单手键盘。传统的 UNIX 开发（我的快乐小黑匣子）正在失去市场份额给更现代的技术和开发环境。复杂的 GUI 本身就令人沮丧，增加额外的困难使它们无法忍受。鉴于当前可用的选择，微软似乎在启用环境中的功能以适应残障程序员方面占据上风。这个问题可能简单地归结为哪个环境和工具链最能支持自动化以及 GUI 可以做的所有事情我可以从命令行有效地做的概念？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T21:33:09.763

> 传统的 UNIX 开发（我的快乐小黑匣子）正在失去市场份额给更现代的技术和开发环境。

虽然今天肯定有许多出色的 IDE 支持 Web 开发，如 Visual Studio、Eclipse 和 Netbeans，但许多 Web 开发人员发现它们没有必要，并继续完全在标准文本编辑器（如 vi 和 emacs）中工作。

unix 平台有非常丰富的当代 Web 开发框架可供选择——Ruby on Rails 和 Django 是当今最流行的两个。您可以使用这些框架之一开发应用程序，而无需完全从命令行使用 IDE。这两个框架都是开源的、免费的，并且可以在各种 Unix 和非 unixy 平台上运行。

gnome 桌面有几个辅助功能可以帮助您进行开发。[GNOME 桌面辅助功能指南中关于移动障碍](http://library.gnome.org/users/gnome-access-guide/nightly/ats-1.html.en_GB)的部分可能与您最相关。这将为您提供两全其美的优势，因为您将拥有一个非常丰富的命令行环境，但也可以运行 GUI 应用程序和 IDE，例如 Eclipse。MacOS X 可能会给您带来类似的好处。

如果您发现 Windows 中的 MS Accessibility 功能的好处太大而不能放弃，也许可以考虑安装和学习使用 Powershell。我对[Powershell](http://www.microsoft.com/windowsserver2003/technologies/management/powershell/default.mspx)的理解是，它允许您完全从命令行执行许多基于 GUI 的任务（允许您以更类似于 unix 的方式与 Windows 交互）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T21:39:12.760

我是一名 Ruby on Rails 开发人员，并且爱上了我们的工具允许的少量使用鼠标。以下是我们最常用工具的简要回顾： Mac OS X 的 TextMate 及其用于 Windows 电子文本编辑器的克隆版本可能是最易于仅使用键盘使用的。他们的插件（称为捆绑包）允许在相关文件之间轻松导航，他们有大量可通过键盘访问的片段和模板，以及许多您可以在单独的命令行窗口上执行的基于命令行的脚本，可以通过编辑器作为键盘快捷键访问。快捷方式易于学习和使用，因为它们几乎总是与您输入的内容相对应，并且可以通过编辑器的“捆绑编辑器”功能进行扩展。

Aptana RadRails 仅与 Eclipse IDE 一样可访问，我想您不会对它感兴趣……k-force 在这个方面很弱。

我不确定 *nix (emacs?) 中的 TextMate/e-Text Editor 的对应对象是什么。我认为您绝对需要使用鼠标的唯一一次是当您尝试选择不同的捆绑包或尝试更改选项卡大小时（这两者都可以在电子文本编辑器中通过一行在页面底部。

最后一点，我听说 vi 和 emacs 正在 Ruby 和 Ruby on Rails 社区中卷土重来。如果您习惯了 Unix 开发环境，那可能会让您微笑……我知道这对我有用 :-)

链接

[TextMate（仅适用于 Max OS X）](http://macromates.com/)

[电子文本编辑器（接受 TextMate 包的 Windows 的 TextMate 克隆）](http://www.e-texteditor.com/)

[Rails 的 Emacs 模式](http://rinari.rubyforge.org/)

# jquery - 如何仅选择与确切路径一致的元素？

> ID：719723
> 
> 赞同：0
> 
> 时间：2009-04-05T21:28:56.700
> 
> 标签：jquery

我使用以下表达式选择此“路径”中的所有链接：

```
$J('#leftmenu li div a") 
```

问题是在内部 i 可以具有以下层次结构：

```
<ul id="lefmenu">
<li><div><a href="#">foo</a>
<ul><li><div><a href="#">subfoo</a>
</li>/ul>
</li>
</ul> 
```

使用这个表达式可以选择 foo 和 subfoo。

我想要只选择 foo 的方式，也就是说我在表达式中写的确切路径，现在这是选择列表内的所有“li div a”，这就是它选择 foo 和 subfoo 的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T21:31:40.297

采用

```
$J("#leftmenu > li > div > a") 
```

这将只选择直接的孩子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T21:32:02.950

```
#leftmenu > li > div > a 
```

有关可用选择器的更多信息，请参阅[文档。](http://docs.jquery.com/Selectors)它们基于[CSS 选择器](http://www.w3.org/TR/CSS2/selector.html)，因此有关这些的文档也应该有所帮助。

# reporting-services - SSRS 中的图表报告

> ID：719726
> 
> 赞同：2
> 
> 时间：2009-04-05T21:29:46.060
> 
> 标签：reporting-services

我正在使用 SQL Server Reporting 使用图表显示数据。如何创建我的数据集，以便图表显示男性的一条线和女性的一条线。

谢谢

贝丝

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-07T12:29:20.477

你的意思是两条线

*   每个 x 或 y 轴一个
*   每个数据系列一个

*   这个愚蠢的事情不允许我发表评论，所以我在浪费空间来回答

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-12T04:49:45.240

我认为你想要的是将男性和女性分成不同的数据系列。只要您的数据集中有足够的信息，您就可以在图表属性中执行此操作。

如果您的数据集如下所示：

```
+-----------+-----+-------+
| Date      | Sex | Count |
+-----------+-----+-------+
| 2009-01-1 | M   | 124   |
+-----------+-----+-------+
| 2009-01-1 | F   | 78    |
+-----------+-----+-------+
| 2009-01-2 | M   | 95    |
+-----------+-----+-------+
| 2009-01-2 | F   | 101   |
+-----------+-----+-------+ 
```

然后，如果您将日期作为 X 轴变量，将计数作为 Y 轴，并将性别添加为系列分组，它应该自动将它们分成两条图形线，并添加一个图例等。

# iphone - self.navigationController 的不同值（nil 和非 nil）取决于堆栈位置

> ID：719727
> 
> 赞同：0
> 
> 时间：2009-04-05T21:30:09.473
> 
> 标签：iphone, objective-c, uinavigationcontroller

我有一个 UIViewController 子类，它在 viewDidLoad: 中访问 self.navigationController。根据它在视图堆栈中的位置，我要么得到 navigationController，要么得到 nil。

如果我的堆栈是“RootViewController -> MyViewController”，我会得到一个有效的指针。

如果我的堆栈是“RootViewController -> AnotherViewController -> MyViewController”，我会得到零。

在这两种情况下，MyViewController 都被推入堆栈：

```
[self.navigationController pushViewController:self.myViewController 
                           animated:YES]; 
```

这让我陷入了困境，因为我需要能够在 MyViewController 上方的堆栈中推送另一个 ViewController，这在第一种情况下工作正常，但在第二种情况下显然失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T04:46:16.680

从我可以看到的所有内容中，UIViewController 的 self.navigationController 旨在始终返回适当的 UINavigationController，只要 UIViewController 存在于 UINavigationController 的堆栈中。这可能是我似乎更经常遇到的情况之一，其中一个简单的编码错误伪装成更复杂的东西。在这些情况下，我通常很幸运地设置了一个全新的 Xcode 项目，它使用重现问题所需的最少代码，并且在该过程中我找到了一个我忽略的东西的修复程序，然后可以轻松地将其应用到主项目中. 很抱歉我不能 t 提供更多细节，但您所描述的似乎与 Cocoa Touch 框架的设计背道而驰，如果您仍然可以在严格按照文档编写的最小 Xcode 项目中重现它，那么提交错误报告可能是个好主意与苹果。希望你会发现一些你忽略的简单的东西，并在几分钟内踢自己=）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-08-19T10:10:16.390

我通常做的是子类 UIViewController 并添加一个方法来设置 navigationController。没有理由不将其作为读/写，尤其是考虑到 Apple 的类多久会决定不设置 navigationController（或 parentController，就此而言），即使它们在同一个堆栈中。

# visual-studio - Visual Studio 的 viEmu 插件有什么意义？

> ID：719735
> 
> 赞同：24
> 
> 时间：2009-04-05T21:36:14.187
> 
> 标签：visual-studio, vim, vi, viemu

这可能听起来有点挑衅，但它实际上是一个真正的问题。如果您不喜欢这种语气，请随时编辑。

现在，就我 10 年前对 vi 的短暂体验所了解的情况而言，它是一个原始的文本编辑器，在滚动条发明之前创建的屏幕底部有一个可编辑的行，并有一些疯狂的快捷方式来克服这个限制。

有人可以解释一下如何使用它比使用普通的 VS.NET 编辑器更有效率吗？此外，为什么有人要使用 viEmu，据说它会将您的 VS.NET 变成一个古老的 vi？

我愿意试一试，但我需要一些动力来克服学习曲线。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2009-04-05T21:46:55.003

老实说，您从未见过真正精通 Vi 的人使用过它。当您通常使用 Visual Studio 时，您经常会将手移到鼠标上，单击选项、对话框、类等。

使用 ViEmu，您的手永远不会离开键盘。您正在编译、切换文件、突出显示文本组、修复缩进、对代码执行复杂的动作并在几秒钟内运行正则表达式搜索。对于打字速度很快的人来说，它可以让您实现您原本无法完成的任务的速度。

许多人会反驳说，“我的大部分开发时间都花在思考上。使用这些工具所获得的额外速度可以忽略不计。”。

在我看来，这不是论据。确实，对于大多数大型编程任务，您花费的时间比实际编写代码要多得多。但这*并不*意味着能够以 2 倍的速度通过 IDE 表达自己不会影响您作为程序员的工作效率。

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2009-04-06T18:25:53.060

viEmu 页面本身有一篇很好的文章，可能有助于回答您的问题：[为什么，哦，为什么，做那些#？@！疯子用vi？](http://www.viemu.com/a-why-vi-vim.html)

在过去的几个月里，我一直在试图教自己“正确”使用 vim，现在我几乎无法忍受使用其他编辑器，因为它们似乎动力不足且笨重。对于一个随机示例，假设您有一行代码，如下所示：

```
$welcomeMessage = "Welcome to SiteName!"; // shows at the top of homepage 
```

在普通编辑器中，您将如何更改字符串？您可能必须伸手抓住鼠标并仔细选择它，或者将光标移到第一个引号内，然后按住 Shift 和右箭头，直到到达右引号。

在 vim 中，我的光标位于引号之间的任何位置，我输入**`ci"`**它会删除引号内的所有内容并将我置于插入模式，以便我可以输入我想要的新值。我的手甚至不必从正常的打字位置移开。

这样的东西太多了，我想你真的得花点时间使用编辑器来了解它的强大。一开始很慢而且很难使用，这就是为什么很多人尝试了很短的时间并认为“这很愚蠢，一切都变得更难了”，但过了一段时间你开始从动作的角度思考，这一切开始变得自动化，并且比使用“普通”编辑器快得多。正如我所说，我现在不能回去。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-02-07T14:23:17.067

我也很难理解为什么人们选择 vim 作为他们的编辑器，即使我不时使用它，直到我最终“得到它”。我认为大多数解释是“为什么？” 失败了，因为它们没有显示出几个关键点。要解释这些要点，首先您需要了解在 vim 中您主要在命令模式下操作文本。即默认情况下，您的按键是命令，通常不插入任何文本，除非这些命令（如`a`ppend、`i`nsert、`c`hange）切换到插入模式。这使您无需触摸鼠标或将手从“编辑姿势”移开即可轻松导航和编辑文本。

现在关键点是：

*   Vim 命令分为名词、动词和修饰语。
*   通过组合它们进行编辑。

这就是赋予 vim 力量的原因。为了说明这一点，这里有一些最常用的命令：

*   名词：`w`ord、`s`entence、`b`lock、引号和大括号。
*   动词：`c`改变、 nsert `i`、`v`isual、`d`elete
*   修饰语：`i`nside、`a`round、`t`ill

并说明如何混合它们：

*   想换个词？`c``w`
*   一样，但是光标在单词中间？`c``a``w`
*   更改引号内的文本？`c``i``"`, 还改引号？`c``a``"`
*   删除函数体？`d``i``{`
*   删除直到第一个逗号？`d``t``,`
*   删除直到第二个逗号？`d``2``t``,`
*   跳转到第一个逗号？`t``,`
*   选词？`v``i``w`

还要注意所有命令如何很好地翻译成自然语言：

*   `d`删除`w`命令
*   `c`汉恩赛德`i`_`{`

在 vim 中，如果你学习了一个新的动词、名词或修饰语，你可以很容易地与你已经知道的东西混合搭配。所以基本上只学习一件事，你就会学习如何做很多不同的事情。

另一个很棒的事情是 vim 会记住您使用过的命令，您只需按 即可重复该序列`.`。对于这篇文章，我不得不用 <kbd> 标记包围很多字母。但我只这样做过一次，然后只是检查每个字母并按下`.`。

这基本上是你“需要”了解 vim 的力量并在一夜之间成为高级用户的东西。

PS如果你不喜欢vim，因为它是基于控制台的并且想要一个现代的文本编辑器，那么我建议你研究一下Sublime Text editor，它是一个很棒的编辑器，也支持vim模式。

PS2。我还建议将`Esc`key 映射到`j``j`and `k``k`，这会使事情变得容易得多。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-04-05T22:05:56.673

您对“屏幕底部的一个可编辑行”是错误的。窗口中的所有文本都是可编辑的。它确实滚动（所有版本），并且在 gvim 的情况下，有滚动条。

也许您无意中将其置于“前模式”。这很容易完成，并且可能会令人困惑。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-01T19:47:03.817

另一个答案让我觉得观看一些使用 vim 进行的熟练编辑会很有启发性，所以我挖出了这段视频，展示了编码时的基本动作和更高级的动作。这个人甚至可以使用一些标记等来提高效率，但它给出了一个想法。

[http://www.youtube.com/watch?v=FcpQ7koECgk&feature=related](http://www.youtube.com/watch?v=FcpQ7koECgk&feature=related)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2010-05-05T16:32:34.563

如果你需要灵感或者想见一个真正知道他们在用 Vim 做什么的人，请查看 Gary Bernhardt 的 Python 中的字符串计算器 Kata，看看他吧！[http://vimeo.com/8569257](http://vimeo.com/8569257)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-05T21:41:18.370

我认为他们在 viEmu 主页上对您的问题有一个很长且可以接受的答案：

> 另一个更强大的例子：让我们以'ce'命令为例，它由'c'和'e'组成。'c'change 命令删除下一个运动命令指定的范围，同时进入插入模式。它与 'd' 相同，但区别在于它进入插入模式，而不是停留在正常模式。好处是您在下一个（短）输入会话中键入的文本也是命令的一部分。所以如果你做'ceHello>'，你所做的就是用'Hello'和'.'替换从光标到单词的结尾。之后的命令将完全像这样工作：用“Hello”替换单词的末尾。

来自： http: [//www.viemu.com/a-why-vi-vim.html](http://www.viemu.com/a-why-vi-vim.html)

我在半年前安装了*viEmu*。但我不得不说（也许没有强大的 linux 经验）我从未使用过它。太陌生，太远，太复杂。

所以恕我直言， *viEmu*这是一个巨大的技术和历史挑战，但对于 95% 的开发人员来说不再如此。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-07-02T02:26:32.237

基本上使用 Vi（或 ViM），您会变得更快，因为您不需要触摸鼠标并且键映射得到改进（这代表学习曲线成本但值得付出努力），以便以非常简单的方式进行任何文本操作基础知识是学习的。

[Vi 用户需要了解的关于 Vim 的 10 件事](http://www.oualline.com/vim/10/top_10.html)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-05T23:01:49.847

我没有使用 VS.Net 的经验，但我想它具有与任何其他 IDE 相同的功能。

我发现在我的 IDE 中学习编辑器的所有关键命令足以替代 Vi。诸如重命名、缩进、格式化、移动行之类的东西。

所以我想主要的胜利将是那些已经了解 Vi 的人无需学习 VS.Net 就能高效工作。

但是话又说回来，Vi 有一些真正深奥但强大的功能，可能是标准 IDE 编辑器无法比拟的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-06T23:27:51.867

我认为你真的应该试试 Vim。
如果您在十年前快速尝试过 Vi，我可能会理解您并不欣赏它。乍一看，它并不是真正的用户友好。实际上，当您开始对这些动作感到舒适并开始通过定制使其成为您自己的时，它的真正力量就会显现出来。一旦你熟悉了 Vim，你就会明白为什么它值得学习。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-06T18:33:06.553

这些天我实际上只使用VS进行调试。使用 vim（真正的 vim，而不是 viemu）编码只是一种更好的体验。

现在，我不会声称使用一个比另一个对生产力有任何影响——毕竟我大部分时间都在试图弄清楚如何解决问题——输入代码是很容易的部分。

# .net - 比 MS Access 2007 更快的东西，快速便携式数据库推荐？

> ID：719738
> 
> 赞同：4
> 
> 时间：2009-04-05T21:37:45.867
> 
> 标签：.net, database, performance, ms-access

我正在使用 MS Access 2007 在我的应用程序中插入和读取数据，但它真的很慢。

我有一个长时间运行的应用程序，如果我从内存中运行它大约需要**5**分钟，使用 MS Access 2007 大约需要**13**分钟！

我正在寻找一个更快但可移植的数据库选项，我正在使用 .NET 。我不是在寻找高级关系数据库的东西，只要它像一个像样的数据库一样工作，对我来说就足够了。

**编辑 ：**

我主要是从多个线程进行并发插入。

**结果**

我已经尝试过 SQL Server Compact Edition 3.5 SP1，它与从内存运行几乎相同，因此比访问 + 快 400 倍，而不是 72MB 的依赖关系我有 1.5MB 的依赖关系，这很棒。

*PS 数据库已标准化、干净、压缩，我使用的是 stored_procedures 和本机客户端。所以我已经尝试了很多方法来让它更快。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-05T21:41:45.623

[SQLite](http://www.sqlite.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-05T21:50:50.393

来自 sqlite 维基：

SQLite 是不大量使用并发连接和复杂数据库功能的系统的首选速度恶魔。如果您需要大量并发连接，SQLite 可能不是最佳选择。但是，如果您需要很高的速度和一个简单的连接设置，SQLite 是我见过的最好的东西。

[http://www.sqlite.org/cvstrac/wiki?p=PerformanceConsiderations](http://www.sqlite.org/cvstrac/wiki?p=PerformanceConsiderations)

根据您的需要，您可能还想查看 mysql、pgsql 或 mssql（CE 或 Express（均免费））。

* * *

**编辑**：根据您的评论，您可能需要在 mysql、pgsql 或 mssql（express）等服务器上运行的东西

* * *

**Edit2**：如果您主要进行插入，请确保您的表中没有未使用的索引，因为索引会使插入/更新速度变慢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-05T21:44:15.820

SQL Server Express 2008。它是免费的，而且是 SQL Server。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-05T21:55:02.363

老实说，我不认为你会得到更快的结果。您的程序可能受 I/O 限制，这意味着磁盘速度正在减慢您的速度。

您可以尝试使用 SQL Compact Edition (CE)，但我怀疑您会看到任何其他工具的结果都变慢或变慢。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-12T15:38:54.303

你也可以使用火鸟：www.firebirdsql.org

它是免费的，而且非常易于使用。有一些好的.net 驱动程序。

如果您出售您的应用程序： MySQL 不是免费的。

# javascript - 设置 sIFR 3 样式时，我应该何时使用 JavaScript/CSS/Flash？

> ID：719741
> 
> 赞同：0
> 
> 时间：2009-04-05T21:38:45.430
> 
> 标签：javascript, css, flash, sifr

我今天第一次使用 sifr。我已经启动并运行了；但是，我需要一些帮助。我将向您展示以下代码，而不是解释：

```
<div id="pullquote">“Fantastic property, facilities and location. We
      couldn’t have asked for more!” <em>Mr &amp; Mrs. Smith</em></div> 
```

到目前为止，一切都很好。然后我在同一个文档中设置了样式，以防 flash/JavaScript 被禁用。没问题。

```
sIFR.replace(journal, {
  selector: 'div#pullquote',
  wmode: 'transparent',
  css: [
    '.sIFR-root { text-align: center; color: #be7705; font-size: 30px; background-color:#fdefd4; }',
    'em { font-style: normal; color: #1d5d69; font-size: 26px; }']
}); 
```

这就是我的 JavaScript 文件中包含的内容。我对这样的元素进行样式设置是否正确？我对选择器有点困惑，然后在`js-css`. 再一次，还有`sifr.css`。这份文件应该包括什么？我应该在这里设置元素的样式吗？

我想我的问题是：应该包括什么，应该做什么样的造型，应该做什么`sifr-config.js`样的造型`sifr.css`？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T16:29:44.617

在 HTML 页面的 CSS `sifr.css`（

`selector`参数 for`sIFR.replace()`用于选择您希望用 sIFR 替换的元素。

该`css`参数包含在 Flash 影片中使用的 CSS。此时，所有 CSS 选择器都与您替换的元素相关，因此如果您替换一个`h1#foo`，那么您选择`em`而不是`h1#foo em`。这是您可以在 Flash 影片中设置文本样式的唯一位置，除了字体大小，如果未在此处指定，字体大小来自被替换元素的字体大小。

# python - python中最好的有序dict实现是什么？

> ID：719744
> 
> 赞同：6
> 
> 时间：2009-04-05T21:40:44.737
> 
> 标签：python, dictionary, ordereddictionary

我已经看到（并编写了）许多这样的实现。是否有一个被认为是最好的或正在成为标准的？

我所说的有序 dict 的意思是对象具有其中键的顺序的一些概念，类似于 PHP 中的数组。

[来自PEP 372](http://www.python.org/dev/peps/pep-0372/)的odict似乎是一个强有力的候选人，但并不完全清楚它是赢家。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2010-01-08T21:37:05.707

Raymond Hettinger 的这个是 collections.OrderedDict 的替代品，它将出现在 Python 2.7 中：http: [//pypi.python.org/pypi/ordereddict](http://pypi.python.org/pypi/ordereddict)

集合文档的开发版本说它相当于 Python 2.7 中的版本，因此它很可能会平稳过渡到 Python 附带的版本。

我已经把它放在 PyPI 中，所以你可以用 安装它`easy_install ordereddict`，然后像这样使用它：

```
from ordereddict import OrderedDict
d = OrderedDict([("one", 1), ("two", 2)]) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-05T21:56:17.853

我还没有看到标准；每个人似乎都自己动手（请参阅[此问题](https://stackoverflow.com/questions/60848/how-do-you-retrieve-items-from-a-dictionary-in-the-order-that-theyre-inserted)的答案）。如果您可以使用 PEP 372 中的`OrderedDict` [补丁](http://bugs.python.org/issue5397)，那是您最好的选择。stdlib 中包含的任何内容很有可能在一两年后成为每个人都使用的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-19T01:26:23.847

`collections.OrderedDict`现在应该可以广泛使用，但如果考虑性能，您可以考虑使用我的包[cyordereddict](https://github.com/shoyer/cyordereddict)作为替代方案。它是标准库的 OrderedDict 到 Cython 的直接端口，速度提高了 2-6 倍。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T12:56:31.537

Python 2.7 及更高版本的模块中有 OrderedDict `collections`，因此您应该将其视为“标准”。如果它的功能足够，您可能应该使用它。

然而，它的实现方法是极简的，如果这还不够，你应该看看[Foord](http://www.voidspace.org.uk/python/odict.html) /Larossa 的 odict 或[ordereddict](http://anthon.home.xs4all.nl/Python/ordereddict/)（我的），因为在这种情况下它们更合适。两种实现都是`collections.OrderedDict`. 两者的区别在于，`odict`纯粹的 python 和`ordereddict`一个更快的`C`扩展模块。

即使它提供了您需要的所有功能，简约的方法也不一定更好：例如，当返回嵌套在它自己的值中的一个时`collections.OrderedDict`，最初确实有一个[错误。](http://bugs.python.org/issue9826)一个可以更早发现的错误，有一个子集，即 OrderedDict 可以处理的小子集，使用了较旧的单元测试。`repr()``OrderedDict``ordereddict`

# java - 在 Java Web 应用程序中自定义登录过程

> ID：719747
> 
> 赞同：0
> 
> 时间：2009-04-05T21:43:13.517
> 
> 标签：java, authentication, jakarta-ee, login, jaas

我正在编写一个需要执行异常登录过程的 java 应用程序。我的问题之一是用户需要提供的不仅仅是简单的用户名/密码组合。具体来说，需要用户名/密码/域组合。

另一个问题是我的应用程序强制执行一些密码生命周期规则（例如：密码在 90 天后失效）。当密码过期时，我使用的身份验证服务器将拒绝身份验证并强制用户选择一个新的。因此我的登录过程必须能够处理。

不幸的是，标准的 j_security_check servlet 不允许我这样做。有什么方法可以为 Java Web 应用程序创建自定义且安全的登录过程。

注意：提供域的问题可以通过让用户在 j_username 字段中输入用户名\域而不是只输入用户名来解决，然后让自定义领域对其进行解码。然而，这有点笨拙，无论如何都不能解决第二个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T21:51:07.723

您是否正在考虑[Spring 安全性](http://static.springframework.org/spring-security/site/)？[这些](http://forum.springsource.org/showthread.php?t=38078)是关于密码过期的一些建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T00:34:41.513

JAAS 安全接口允许您创建自定义登录模块。这个大厅模块将允许您进行任何您喜欢的安全检查。我建议您查看有关 JAAS 的信息。0

以下是我用来帮助理解 JAAS 的一些链接：

[http://www.owasp.org/index.php/JAAS_Tomcat_Login_Module](http://www.owasp.org/index.php/JAAS_Tomcat_Login_Module)

[http://www.javaworld.com/jw-09-2002/jw-0913-jaas.html](http://www.javaworld.com/jw-09-2002/jw-0913-jaas.html)

[http://www.jaasbook.com/](http://www.jaasbook.com/)

[http://roneiv.wordpress.com/2008/02/18/jaas-authentication-mechanism-is-it-possible-to-force-j_security_check-to-go-to-a-specific-page/](http://roneiv.wordpress.com/2008/02/18/jaas-authentication-mechanism-is-it-possible-to-force-j_security_check-to-go-to-a-specific-page/)

另请查看 Apache tomcat 领域配置操作方法：

[http://tomcat.apache.org/tomcat-6.0-doc/realm-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/realm-howto.html)

# c# - 这是对 ThreadPool 的适当使用吗？我可以确定它会为每个任务启动一个线程吗？

> ID：719751
> 
> 赞同：1
> 
> 时间：2009-04-05T21:44:18.800
> 
> 标签：c#, .net, multithreading, windows-services, threadpool

```
 protected override void OnStart(String[] args)
    {
        ResultManager.PrepareCache();
        ThreadPool.QueueUserWorkItem(ResultQueue.Process);
        ThreadPool.QueueUserWorkItem(StatusUpdater.UpdateStatus);
        ThreadPool.QueueUserWorkItem(GeneralQueue.RestartHungTests);
        ThreadPool.QueueUserWorkItem(ResultManager.SyncroniseResultsTable);
        ThreadPool.QueueUserWorkItem(GeneralQueue.RecoverLostResults);
        ThreadPool.QueueUserWorkItem(BrowserTestStartInfo.FillQueues);
        ThreadPool.QueueUserWorkItem(MailAppAccount.FillQueues);
    } 
```

这些任务中的每一个都在 Windows 服务的生命周期内运行。对于这种事情，我一直坚持使用 ThreadPool，我应该只是启动普通线程吗？我可以确定 ThreadPool 将有足够的线程来运行每个任务吗？如果我将 MaxThreads 设置为 7，我以后会因为这些线程永不中止而遇到问题吗？将其设置为更高的值是否安全？

* * *

### 编辑：

我总是希望所有 7 个线程同时运行，并且它们永远不会中止——我什至应该使用线程吗？还有其他更适合这种永久运行的任务吗？

每个任务每 x 分钟运行一次特定的方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-05T21:47:34.440

这不是对线程池的适当使用。只需创建普通线程，因为它们是长期存在的。创建线程的开销无关紧要，因为您只会创建一次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-05T21:53:02.493

正如约翰所说，这不是一个好主意。原因是线程池的线程数量有限，而您正在使用大量线程并且永远不会返回它们。线程池旨在为短期线程池线程使用。

您实际上不需要管理线程，因为它们存在于应用程序的生命周期中。

# html - 如何通过 iframe 操作文本？

> ID：719761
> 
> 赞同：2
> 
> 时间：2009-04-05T21:50:00.287
> 
> 标签：html, dynamic, iframe

我有两个问题。这是我目前正在从事的项目的核心组成部分。我正在寻找一种方法来操作/编辑 iFrame 的源代码，其“ `src`”将始终在变化：动态 iFrame。这可能吗？我知道由于潜在的安全问题，它真的不推荐。

我的另一个问题是：是否可以在动态的 iFrame 中检索选定的文本？

我在谷歌上搜索了答案，没有找到结果。请帮我。:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-05T22:27:56.543

iframe 只是您正在查看的网页中的另一个网页。它具有与普通网页相同的 javascript 功能和方法。

要访问它：

```
document.getElementById('iframeID').contentDocument (DOM) 
```

在此处查找跨浏览器访问：[http ://www.dyn-web.com/tutorials/iframes/](http://www.dyn-web.com/tutorials/iframes/)

在这里获取选定的文本： http: [//www.codetoad.com/javascript_get_selected_text.asp](http://www.codetoad.com/javascript_get_selected_text.asp)

结合它们：

```
document.getElementById('iframeID').contentDocument.getSelection(); (DOM) 
```

至于操作源代码，我不知道你想做什么，但Javascript（jQuery）可能是最好的选择。

# networking - 如何测量虚拟主机的地理访问时间？

> ID：719765
> 
> 赞同：0
> 
> 时间：2009-04-05T21:51:16.303
> 
> 标签：networking, hosting, web-hosting

我正在建立一个针对美国访问者的网站；这个问题是在四处寻找可靠的网络托管时出现的。由于我位于英国，从美国访问者的角度来看，一个简单的“ping”并不代表平均访问时间——这很关键，因为新访问者花费大约 3 秒来评估一个网站。

从美国访问者的角度来看，如何衡量获得完整响应所需的平均访问时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-05T22:53:25.467

SiteUptime.com 可能对您有用。他们在全球维护数据中心，并提供简单的廉价检查，其中还包括平均访问时间（尽管实际上只有一页）。

如果您需要更多...好吧..您可以在单独的数据中心获得 el-cheapo 共享主机并自己编写代码。

# python - 如何使用 Django 设置域别名？

> ID：719771
> 
> 赞同：0
> 
> 时间：2009-04-05T21:55:34.233
> 
> 标签：python, django, dns, cross-domain

我正在努力在 Django 中创建一个网站，该网站由两部分组成：网站本身和论坛。它们都将位于不同的域中，即 example.com 和 exampleforum.com。当论坛和主站点属于同一个实例时，如何在 Django 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-05T22:35:38.397

这是在 Web 服务器级别完成的。Django 不关心传入请求的域。

如果您使用的是 Apache，只需将多个 ServerAlias 指令放入您的虚拟主机中，如下所示：

```
<VirtualHost *:80>
    ServerName www.mydomain.com
    ServerAlias mydomain.com
    ServerAlias forum.mydomain.com
    ... other directives as needed ...
</VirtualHost> 
```

这告诉 Apache 将对所有这些域的请求定向到同一个实例。

对于 nginx，您的配置文件将类似于：

```
server {
    listen 80;
    server_name   www.mydomain.com   mydomain.com   forum.mydomain.com;
    ... other directives as needed ...
} 
```

# identity - 确认用户是他们所说的 Wikipedia 用户？

> ID：719778
> 
> 赞同：2
> 
> 时间：2009-04-05T21:59:50.933
> 
> 标签：identity, wikipedia

如果我网站上的用户说他们是 Wikipedia 用户“示例”，那么确认他们确实是 Wikipedia 用户而不是冒名顶替者的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-05T22:00:51.880

让他们在他们的用户页面上放一些东西，然后检查历史，看看是否真的是他们放在那里的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-19T15:14:29.143

Wikipedia 还支持[OAuth](https://www.mediawiki.org/wiki/Help:OAuth)，因此您应该能够要求他们使用 OAuth 进行身份验证，以证明他们就是他们所说的那个人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-23T20:58:55.397

不要忘记检查历史选项卡以仔细检查他们是否真的是发表评论的人

# wpf - 实现 UI 状态机的最佳方式是什么？

> ID：719779
> 
> 赞同：5
> 
> 时间：2009-04-05T22:00:10.837
> 
> 标签：wpf, user-interface, state-machine

在我的程序中，我有三种不同的 UI 状态（正常、成功和错误），并且在每一种状态中，控件都是可见/隐藏、启用/禁用、颜色变化、标签表示不同的东西……等等。在我的代码隐藏中，我基本上希望能够说 ChangeWindowState(UI.Normal);

所以我的问题是如何最好地实现每个状态的控制更改？

当然，我可以手动更改代码隐藏中的控件，但我想知道是否有更好的方法使用 wpf 主题或样式。然后也许我可以将窗口设置为使用我预先定义的“错误”主题。我目前并不真正理解它们，所以我可能使用错误的术语，但如果有人能指出我正确的方向如何最好地做这样的事情，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-05T23:11:44.333

当然，有很多方法可以解决这个问题。如果您有一个程序状态“对象模型”，您可以使用 DataTemplates 和 DataTriggers 的某种组合。假设情况并非如此，这是另一种方法：您引用了一个窗口，因此假设您在窗口类中定义了一个“依赖属性”，如下所示：

```
public partial class Window1 : Window
{
    public Window1()
    {
        this.InitializeComponent();

        // Insert code required on object creation below this point.
    }

    public ProgramStatus ProgramStatus
    {
        get { return (ProgramStatus)GetValue(ProgramStatusProperty); }
        set { SetValue(ProgramStatusProperty, value); }
    }

    // Using a DependencyProperty as the backing store for ProgramStatus.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty ProgramStatusProperty =
        DependencyProperty.Register("ProgramStatus", typeof(ProgramStatus), typeof(Window1), new UIPropertyMetadata(null));
}

public enum ProgramStatus
{
    Normal,
    Success,
    Error
} 
```

现在，您可以通过直接绑定或触发器来更改窗口的任何元素（包括窗口本身）的几乎任何属性。这是通过属性触发器更改窗口背景颜色的示例：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:l="clr-namespace:Test"
    x:Class="Test.Window1"
    x:Name="Window"
    Title="Window1"
    Width="640" Height="480">
    <Window.Style>
        <Style TargetType="{x:Type l:Window1}">
            <Style.Triggers>
                <Trigger Property="ProgramStatus">
                    <Trigger.Value>
                        <l:ProgramStatus>Error</l:ProgramStatus>
                    </Trigger.Value>
                    <Setter Property="Background" Value="Red" />
                </Trigger>
                <Trigger Property="ProgramStatus">
                    <Trigger.Value>
                        <l:ProgramStatus>Normal</l:ProgramStatus>
                    </Trigger.Value>
                    <Setter Property="Background" Value="Blue" />
                </Trigger>
                <Trigger Property="ProgramStatus">
                    <Trigger.Value>
                        <l:ProgramStatus>Success</l:ProgramStatus>
                    </Trigger.Value>
                    <Setter Property="Background" Value="Green" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Style>
    <Grid x:Name="LayoutRoot"/>
</Window> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-07T14:48:08.830

另一个选项可能是作为 WPFToolkit 的一部分发布的 VisualStateManager。

更多信息是通过这些链接：

*   VSM 概述： http: [//windowsclient.net/wpf/wpf35/wpf-35sp1-toolkit-visual-state-manager-overview.aspx](http://windowsclient.net/wpf/wpf35/wpf-35sp1-toolkit-visual-state-manager-overview.aspx)
*   CodePlex 上的 WPFToolkit：http: [//www.codeplex.com/wpf](http://www.codeplex.com/wpf)

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T22:51:32.400

对于这类事情，我几乎总是使用“UpdateUI()”函数。此函数查看模型/成员属性/状态的状态并启用/禁用、隐藏/显示等。试图将这段代码传播出去总是会导致问题（所以“ChangeWindowsState(..)”实际上只是设置了一个属性，然后调用了“UpdateUI()”）。

我已经看到了一些以通用方式处理此问题的尝试……但没有一个是我真正喜欢的（例如 WTL 的东西）。一般来说，这些实施得并不差……但很容易迅速超越他们的能力。通常，状态逻辑非常重要，使用简单的 if/then/else 样式逻辑对其进行显式编码会减少混乱（维护、调试等）。

# apache - 在 Apache 中设置反向代理的问题

> ID：719783
> 
> 赞同：9
> 
> 时间：2009-04-05T22:00:58.027
> 
> 标签：apache, mod-proxy

我和我的室友每个人都有一个我们正在尝试设置的单独的网络服务器。我们正在尝试使用 mod_proxy，以便他的服务器根据服务器名称将请求转发到我的机器（我们在一个路由器后面有两台单独的机器）。我已经给出了我们目前在我们的 apache 配置中拥有的基础知识，但是在尝试访问第二个域（第一个 www 域，工作正常）时，我们得到了 403 Forbidden 错误。

```
NameVirtualHost *:80

<VirtualHost *:80>
 DocumentRoot /var/www
 ServerName www.<domain1>.com
</VirtualHost>

<VirtualHost *:80>
 ProxyPreserveHost On
 ProxyPass / http://<IP addr of other box>:80
 ProxyPassReverse / http://<IP addr of other box>:80
 ServerName <dummydomain>.gotdns.com
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-05T22:56:48.097

您的 mods-enabled/proxy.conf 可能会阻止任何代理请求（默认情况下全部拒绝）。它应该包括以下内容：

```
ProxyRequests Off

<Proxy *>
Order deny,allow
Allow from all
</Proxy> 
```

编辑：还要确保 mod_proxy 子模块符号链接到 mods-enabled（在这种情况下，http 子模块是 mods-available/proxy_http.load）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T11:43:27.223

只需放置两条路线：

```
<VirtualHost *:80>
    DocumentRoot "/app/"
    ProxyPreserveHost On
    ProxyRequests Off
    ServerName app.yourdomain.com

    ProxyPass /app http://yourIP:yourPort/app/
    ProxyPassReverse /app http://yourIP:yourPort/app/

    ProxyPass / http://yourIP:yourPort/app/
    ProxyPassReverse / http://yourIP:yourPort/app/
</VirtualHost>

<Location "/app/" >
    ProxyPass "http://yourIP:yourPort/app/"
    ProxyPassReverse  "http://yourIP:yourPort/app/"
    ProxyPassReverseCookiePath  "/app/"  "/app/"
    ProxyHTMLEnable Off
    ProxyHTMLExtended On
    ProxyHTMLURLMap "/app/" "/app/"
    Order allow,deny
    Allow from all
</Location> 
```

这对我有用

# iphone - 属性与实例变量

> ID：719788
> 
> 赞同：32
> 
> 时间：2009-04-05T22:06:03.553
> 
> 标签：iphone, objective-c, cocoa, cocoa-touch

我试图了解一些人如何使用策略来区分实例变量与属性。一个常见的模式如下：

```
@interface MyClass : NSObject {
    NSString *_myVar;
}

@property (nonatomic, retain) NSString *myVar;
@end

@implementation MyClass
@synthesize myVar = _myVar; 
```

现在，我认为这个策略背后的整个前提是让人们可以轻松地区分 ivar 和属性之间的区别。因此，如果我想使用由综合属性继承的内存管理，我会使用以下内容：

```
myVar = @"Foo"; 
```

另一种方法是通过 self.[ivar/property here] 引用它。

使用@synthesize myVar = _myVar 策略的问题在于，我认为编写如下代码：

```
myVar = some_other_object; // doesn't work. 
```

编译器抱怨 myVar 未声明。为什么会这样？

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-04-05T22:30:03.620

属性只是设置器和获取器，`ivars`并且应该（几乎）总是使用而不是直接访问。

```
@interface APerson : NSObject {
    // NSString *_name;           //  necessary for legacy runtime
}

@property(readwrite) NSString *name;

@end

@implementation APerson
@synthesize name;                 // use name = _name for legacy runtime
@end 
```

`@synthesize`在这种情况下创建这两种方法（不是 100% 准确）：

```
- (NSString *)name {
    return [[_name copy] autorelease];
}
- (void)setName:(NSString *)value {
    [value retain];
    [_name release];
    _name = value;
} 
```

现在很容易区分`ivars`getter/setter 和 getter/setter。访问者有`self.`前缀。无论如何，您不应该直接访问变量。

* * *

您的示例代码无法正常工作：

```
_myVar = some_other_object;      // _myVar is the ivar, not myVar.
self.myVar = some_other_object;  // works too, uses the accessors 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-05T22:31:02.463

一个名为的合成属性`prop`实际上由两种方法表示`prop`（返回属性的当前值）和`setProp:`（为 prop 设置新值）。

`self.prop`语法是调用这些访问器之一的语法糖。在您的示例中，您可以执行以下任一操作来设置属性`myVar`：

```
self.myVar = @"foo"; // handles retain/release as specified by your property declaration
[self setMyVar: @"foo"]; // handle retain/release
_myVar = @"Foo"; // does not release old object and does not retain the new object 
```

要访问属性，请使用`self.propname`. 要访问实例变量，只需使用实例变量的名称。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-07-31T16:41:09.580

> 使用@synthesize myVar = _myVar 策略的问题在于，我认为编写如下代码：
> 
> ```
> myVar = some_other_object; // doesn't work. 
> ```
> 
> 编译器抱怨`myVar`未声明。为什么会这样？

因为变量`myVar`是未声明的。

该语句使用语法访问变量，无论是实例变量还是其他类型。正如 rincewind 告诉您的，要访问属性，您*必须*使用属性访问语法 ( `self.myVar = someOtherObject`) 或对访问器方法 ( ) 的显式消息`[self setMyVar:someOtherObject]`。

否则，您将尝试访问一个变量，并且由于您没有名为 的变量`myVar`，因此您正在尝试访问一个不存在的变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-05T22:42:18.037

通常，我将属性命名为与实例变量相同的名称；`@property`这是语法所做的默认假设。如果你发现你正在与默认值作斗争，那么你做错了（或者你的框架 sux，我认为 Cocoa/Cocoa-touch 不是这种情况）。

你得到的编译器错误是因为属性使用总是必须有一个对象引用，即使在你自己的类实现中：

```
self.stuff = @"foo"; // property setter
[stuff release]; // instance variable
stuff = @"bar"; // instance variable
return self.stuff; // property getter 
```

我知道许多 Cocoa 程序员不同意，但我认为在类实现中使用属性是不好的做法。我宁愿看到这样的东西：

```
-(void) someActionWithStuff: (NSString*) theStuff {
    // do something
    [stuff release];
    stuff = [theStuff copy];
    // do something else
} 
```

比这个：

```
-(void) someActionWithStuff: (NSString*) theStuff {
    // do something
    self.stuff = theStuff;
    // do something else
} 
```

我更喜欢尽可能明确地进行内存管理。但即使您不同意，使用该`self.stuff`表单也会让任何有经验的 Objective-C 程序员知道您正在调用属性而不是访问实例变量。对于初学者来说，这是一个很容易忽略的微妙点，但是在您使用 Objective-C 2.0 一段时间后，它就非常清楚了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-31T06:30:02.927

大学教师，

根据“规则”，您应该为每个 Copy、Alloc 和 Retain 调用 Release。那么，你为什么要调用 Release 呢？这是假设它是使用 Alloc、Copy 或 Retain 创建的吗？

这就引出了另一个问题：如果对象的引用已经被释放，那么调用 Release 是否有害？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-31T08:56:04.940

由于 Apple 为自己保留了 _ 前缀，并且由于我更喜欢​​在使用 setter 和使用 ivar 时使其更加明显，因此我采用了在 ivar 上使用 i_ 前缀的做法，例如：

```
@interface MyClass : NSObject {
    NSString *i_myVar;
}

@property (nonatomic, retain) NSString *myVar;

@synthesize myVar = i_myVar;

i_myVar = [input retain];
self.myVar = anotherInput;
[i_myVar release] 
```

由于知道何时使用 setter 以及何时使用 ivar 非常重要，因此我发现显式不同的名称更安全。

在您的问题中，它应该是：

```
self.myVar = @"Foo"; // with setter, equivalent to [self setMyVar:@"Foo"] 
```

和

```
_myVar = some_other_object;  // direct ivar access - no memory management! 
```

请记住，您不应该在 init/dealloc 中使用 setter/getter，因此您需要在这些方法中进行直接 ivar 访问（以及仔细的内存管理）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-21T17:38:35.737

简单地使用有什么问题

```
@interface MyClass : NSObject
@property NSString *prop;
@end 
```

nonatomic 和 retain 不是必需的，retain 是默认设置，并且 atomic/nonatomic 并不重要，除非 XCode 告诉您警告。

没有必要声明 iVar，如果您真的想使用一个，将为您创建一个名为 _prop 的 iVar（我不明白为什么要诚实）

@synthesize 不是必需的。

when (and you should) using ARC you don't have to bother with retain and release either.

keep it simple !

furthermore, if you have a method like this one

```
- (void)aMethod:(NSString*)string
{
    self.prop = string;
    // shows very clearly that we are setting the property of our object

    _aName = string;
    // what is _aName ? the _ is a convention, not a real visual help
} 
```

i would always use properties, more flexible, easier to read.

# delphi - 关闭TAdoconnection后如何在组合框或dbgrid中维护数据库输出

> ID：719793
> 
> 赞同：1
> 
> 时间：2009-04-05T22:08:24.813
> 
> 标签：delphi

在这个问题中，我的目标是检索数据库表内容。填充 dbGrid，关闭连接。如果我使用以下代码，dbgrid 或组合框将丢失信息。

```
adoQry := TADOQuery.Create(self);
adoQry.Connection := adoConn;
adoQry.SQL.Add(SqlStr);
adoQry.Prepared := true;

try
  adoQry.Active := True;
except
  on e: EADOError do
 begin
   MessageDlg('Error while doing query', mtError,
              [mbOK], 0);

   Exit;
 end;
end;
for i := 0 to adoQry.RecordCount - 1 do
begin
  cmbCnty.Items.Add(adoQry.Fields[1].AsString);
   adoQry.Next
end;

FreeAndNil(adoConn);
FreeAndNil(adoQry); 
```

在 dbGrid 的情况下，我使用 StringGrid，它对我有用。但是，有时我想使用 dbGrid，但不确定如何通过与数据库的紧密连接来保持内容（当然是在检索内容之后）任何建议，示例将不胜感激。
克里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T02:22:57.757

您可以使用查询结果集填充 TClientDataSet，然后将 TClientDataSet 链接到 TDBGrid。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T08:08:55.773

如果我没记错（很久以前我用过它，我不能从这里尝试），你可以将 til adoQuery 上的连接设置为 nil，然后它的行为就像一个断开连接的数据集（如 t-client 数据集）。但是，如果您关闭数据集 (adqQry)，数据就会消失。

在评论中指出上述陈述是不正确的（我还没有测试过）。但是在这篇 Microsoft Knowlegde Base 文章[“如何创建 ADO 断开连接的记录集”http://support.microsoft.com/kb/184397](http://support.microsoft.com/kb/184397)中，它显示了相同的技术。

[Delphi 关于文章“TOP ADO 编程技巧”http://delphi.about.com/od/beginners/l/aa021202a.htm](http://delphi.about.com/od/beginners/l/aa021202a.htm)中也描述了相同的技术

在大多数数据集中将连接设置为 nil 是正确的，它也会关闭数据集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-10T22:30:42.663

本尼是正确的。您可能必须使用 TAdoDataSet 而不是 TAdoQuery。TAdoDatasets 和 TClientDatasets 具有相似的功能。据我了解，TAdoQuery 组件旨在帮助将 BDE 应用程序迁移到 dbGo。

# .net - 拖动/大小手柄实现

> ID：719795
> 
> 赞同：0
> 
> 时间：2009-04-05T22:09:26.650
> 
> 标签：.net, mouse, size, handle, drag

我正在寻找拖动/大小手柄的实现或解释。

也许我使用了错误的命名法，但我的意思是当您选择对象并想要对该对象执行诸如旋转、大小、缩放等操作时出现在对象周围的“句柄”（主要是在绘图程序中）。 ..

谁能指出我可以查看或解释他们如何/将如何实现它的 OSS 实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-05T22:41:28.493

在 Windows 中，这真的不是操作系统功能......这是您自己编写的代码。

基本上，您创建一个矩形数组，其中将出现句柄。您的目标是双重的，第一个是简单地绘制句柄，第二个是传递给 PointInRectangle 调用。

“PointInRectangle”调用位在 MouseMove 事件期间完成。基本上，这是您根据当前鼠标位置决定鼠标应该具有什么光标的地方（也就是鼠标所处的“模式”）。

其他棘手的问题是处理鼠标按下并确定是否开始拖动、拖动时鼠标移动以及拖动结束鼠标向上。

总而言之，这可能是一堆工作。哦..不要忘记，如果在边缘附近拖动，您可能需要滚动绘图窗格/窗口。

根据您正在做什么，您可能想看看[http://www.lassalle.com/](http://www.lassalle.com/)。他们有一个非常便宜的图表（不是图表）工具。

# javascript - 新窗口中的书签

> ID：719799
> 
> 赞同：6
> 
> 时间：2009-04-05T22:14:45.420
> 
> 标签：javascript, internet-explorer, popup, bookmarklet

所以我有一个小书签，它应该在新窗口中打开一个页面。

```
javascript:window.open('http://timetableapp.com/TimeTable/bookmarklet/index.html','TimeTable%20Timer','status=no,directories=no,location=no,resizable=no,menubar=no,width=400,height=210,toolbar=no'); 
```

该代码在 Safari、Firefox 和 Chrome 中完美运行；但正如预期的那样，IE（7 和 8）正在引起问题。当我打开书签时，IE 给了我一个无用的错误，并且没有打开任何窗口。

我试图编辑小书签，以便它在页面上附加一个脚本标签。然后在脚本标签内添加 window.open() 代码，或者它访问脚本（其中包含 window.open() ）[我已经尝试过两种方式]

我现在很茫然。

任何人都知道如何在 IE 中弹出页面（最好使用适用于 Safari、FF 和 Chrome 的代码）？

谢谢，

编辑：我最终得到的最终代码：

```
javascript:(function(){ window.open('http://timetableapp.com/TimeTable/bookmarklet/index.html','TimeTableTimer','status=no,directories=no,location=no,resizable=no,menubar=no,width=400,height=210,toolbar=no'); })(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-05T22:20:51.630

窗口名称中不能有 %20 或空格。该名称用于稍后在代码中再次引用该窗口。

尝试：

```
javascript:window.open('http://timetableapp.com/TimeTable/bookmarklet/index.html','TimeTableTimer','status=no,directories=no,location=no,resizable=no,menubar=no,width=400,height=210,toolbar=no'); 
```

# c# - C#：将音频文件从服务器流式传输到客户端

> ID：719800
> 
> 赞同：6
> 
> 时间：2009-04-05T22:15:02.080
> 
> 标签：c#, wpf, audio, streaming

我目前正在编写一个应用程序，该应用程序将允许用户安装某种形式的应用程序（可能是 Windows 服务），该应用程序将在其 PC 上打开一个端口并在硬盘上给定一个特定目标，然后将能够流式传输 mp3 文件.

然后，我将拥有另一个应用程序，它将连接到服务器（作为用户的电脑），并能够通过连接到给定端口的那台电脑（当然是远程的）来浏览托管数据，并将**mp3 文件从服务器流式传输到应用程序**

* * *

我在网上找到了一些教程，但其中大部分都是关于 C# 中的文件服务器的，它们下载允许您下载整个文件。我想要的是流式传输 mp3 文件，以便在下载一定数量的字节时开始播放（即，在缓冲时）

* * *

我该如何完成这样的任务？我需要特别知道的是如何编写这个应用程序（稍后我将变成一个 Windows 服务），它将在指定的端口上侦听流文件，以便我可以通过某种方式访问​​文件：`http://<serverip>:65000/acdc/wholelottarosie.mp3`和希望能够在 WPF 中流式传输该文件`MediaPlayer`。

* * *

**[更新]**

我正在按照[本教程](http://www.dotnetspider.com/resources/4741-Building-Simple-File-download-server-using-C.aspx)构建文件服务器并将文件从服务器发送到客户端。是我必须做的事情吗？

**[更新]**

目前正在阅读这篇文章：[Play Audio from a Stream using C#](https://stackoverflow.com/questions/184683/play-audio-from-a-stream-using-c)，我认为我如何播放流文件看起来很有希望；但我仍然不知道如何真正从服务器流式传输文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-05T22:45:30.153

流式传输和下载之间没有有效的区别。他们是一样的。任何区别都纯粹是语义上的。

如果您愿意，您可以从任何网络服务器“下载” MP3，并在下载时开始播放。它只要求您缓冲一些数据并立即开始将其发送到您的解码和播放例程。

类似地，甚至可以下载所谓的“流媒体”服务器。您只需要保存字节，因为它们通过线路发送到文件。

“流媒体”应用程序只是不是为将文件保存到磁盘而设计的应用程序。

编辑：

有一个例外。两个真的：

首先，如果您正在流式传输“实时”音频，例如广播或其他不需要 100% 可靠性的类型，那么它们使用 UDP 流式传输。如果您愿意，这仍然可以保存，但它更面向数据包而不是面向流。

第二个是使用加密的时候，这种情况下你可能仍然可以保存文件，但是没有加密算法和密钥就没有用了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-11-17T23:32:47.827

这是不正确的。

文件下载和 HTTP 多媒体流之间的区别在于编码头，它被设置为流的分块编码。另外，一个文件下载有一个Content-Length头，所以接收系统可以提前知道文件的大小。

多媒体流没有 Content-Length 标头，因此没有预期的终点。相反，只要它们继续出现，就会接收和处理一系列连续的数据块。

# http - 宽度大于 1280 像素时的侧边填充

> ID：719802
> 
> 赞同：2
> 
> 时间：2009-04-05T22:17:21.810
> 
> 标签：http, size, webpage

我想创建一个网站，将所有宽度（可用空间）小于或等于 1280 像素的页面宽度填充到 100%，并且对于所有大于 1280 的宽度，应该出现两个填充侧栏（如下所示：|fill|website|fill|） .

（如何）我可以在没有脚本的情况下做到这一点吗？（通过使用CSS设置？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T22:26:44.300

你可以使用这样的东西：

```
#content {
  max-width: 1280px;
  width: 100%;
  margin: 0 auto;
} 
```

那是指应用于`div`具有所有页面内容的样式的样式。

您的“侧边栏”将是任何背景`body`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T22:26:39.433

你想要“填充”位中的内容，还是只是一个边框类型的东西？如果只是一个边框，您可以使用背景图像/颜色来制作填充效果，并在主要内容位上使用 max-width。请注意，如果这对您很重要，它在 IE6 中不起作用。

```
<div style="max-width: (bar width * 2) + 1280">

    <div style="max-width: 1280px">

        <!-- content -->

    </div>

</div> 
```

# vb.net - 使用 VB.NET 捕获 IR 数据

> ID：719804
> 
> 赞同：1
> 
> 时间：2009-04-05T22:19:21.867
> 
> 标签：vb.net, visual-studio-2008, hid, infrared

刚刚找到一个旧的 IR 接收器（Microsoft eHome Infared Transceiver），我正在尝试编写一个可以使用它捕获的数据的应用程序......

对此的任何示例或起点都表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-05T22:38:22.993

[看起来](https://stackoverflow.com/questions/719703/is-it-possible-to-host-an-aspx-web-page-in-a-stand-alone-application-outside-of/719719#719719)它是一个 USB [HID 设备](http://www.lvr.com/hidpage.htm)。因此，您应该能够使用 Win32 API 与之对话 -[类似于](http://blogs.msdn.com/coding4fun/archive/2006/10/31/912422.aspx)其他 USB HID 设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T22:36:17.257

我认为 Microsoft eHome Infared Transceiver 是一个人机接口设备 (HID)，所以我将从[The HID Page](http://www.lvr.com/hidpage.htm)开始。

这上面有一个 VB.NET 示例。

# machine-learning - 纠正收集数据中的已知偏差

> ID：719820
> 
> 赞同：0
> 
> 时间：2009-04-05T22:34:41.957
> 
> 标签：machine-learning, statistics, data-mining, normalization, probability

好的，所以这里有一个类似于我的问题的问题（我将在下面详细说明真正的问题，但我认为这个类比会更容易理解）。

我有一个奇怪的双面硬币，每 1,001 次投掷中只有 1 次正面（随机）出现（其余为反面）。换句话说，每看到 1,000 个尾巴，就会有 1 个正面。

我有一种特殊的疾病，每看到 1,000 个尾巴，我只注意到 1 个，但我注意到每个头，所以在我看来，注意到头或尾的概率是 0.5。当然，我知道这种疾病及其影响，所以我可以弥补它。

现在有人给了我一枚新硬币，我注意到注意到正面的概率现在是 0.6。鉴于我的疾病没有改变（我仍然只注意到每 1,000 个尾巴中有 1 个），我如何计算这枚新硬币产生的实际正面与反面的比率？

* * *

好的，那么真正的问题是什么？好吧，我有一堆数据，包括输入和输出，分别是 1 和 0。我想教一个有监督的机器学习算法来预测给定输入的预期输出（0到1之间的浮点数）。问题是 1 非常罕见，这会破坏内部数学，因为它非常容易受到舍入误差的影响——即使是高精度浮点数学。

因此，我通过随机省略大部分 0 训练样本来对数据进行归一化，以使 1 和 0 的比率看起来大致相等。当然，这意味着现在机器学习算法的输出不再是预测概率，即。它现在将预测 0.5，而不是按应有的预测 0.001。

我需要一种方法将机器学习算法的输出转换回原始训练集中的概率。

**作者注（2015-10-07）：**后来发现这种技术俗称“下采样”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T22:47:44.920

您正在计算以下

```
calculatedRatio = heads / (heads + tails / 1000) 
```

你需要

```
realRatio = heads / (heads + tails) 
```

解决两个方程的尾部产生以下方程。

```
tails = 1000 / calculatedRatio - 1000
tails = 1 / realRatio - 1 
```

将两者结合产生以下结果。

```
1000 / calculateRatio - 1000 = 1 / realRatio - 1 
```

最后求解 realRatio。

```
realRatio = 1 / (1000 / calculatedRatio - 999) 
```

似乎是正确的。计算比率 0.5 产生实际比率 1/1001，0.6 产生 3 / 2003。

# c - 检测socket程序是否连接到自己

> ID：719823
> 
> 赞同：1
> 
> 时间：2009-04-05T22:36:40.517
> 
> 标签：c, sockets

如何在 C 中检测程序是否连接到自身。

例如，我在端口 1234 上设置了一个侦听器，然后我设置了另一个套接字来连接到端口 1234 上的任意地址。我想检测我是否正在连接到我自己的程序。有什么办法吗？

谢谢，戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T01:50:21.800

One of the parameters to the `accept()` function is a pointer to a `struct sockaddr`.

When you call `accept()` on the server side it will fill in the address of the remote machine connecting to your server socket.

If that address matches the address of any of the interfaces on that machine then that indicates that the client is on the same machine as the server.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T22:56:27.240

Linux 提供了我认为可以解决这个问题的工具。如果连接到同一台机器，则可以运行

```
fuser -n tcp <port-number> 
```

并取回监听该端口的进程列表。然后，您可以查看`/proc`并确定是否有一个进程的 pid 不是您自己的，它正在运行与您相同的二进制文件。一点口香糖和打包线将有助于将整个装置保持在一起。

我认为您不能轻易地询问有关另一台机器上的进程的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T22:43:38.907

您可以在连接时发送一系列魔术数据包，这是以确定性方式计算的。诀窍是如何做到这一点，如果发送者和接收者来自相同的程序实例，它们将始终计算相同的数据包内容。关于你的程序是什么的更多信息在这里会有所帮助，但很可能你可以对一堆程序状态进行某种散列，并提出对该程序实例相当独特的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T22:45:26.703

我假设您的意思不仅仅是同一个程序，而是在同一台机器上运行的同一个实例。

您是否关心您通过网络连接回自己的情况（可能您有两个网卡，或者一个端口转发路由器，或者互联网某处的一些不寻常的路由）？

如果不是，您可以检查任意地址是否解析为环回 (127.0.0.1)，或者您知道的任何其他 IP 地址。我不是网络专家，所以我可能错过了一些可能性。

如果您确实关心“间接环回”情况，请进行一些握手，包括两个端点通过内存共享的随机生成的数字。我不知道您的情况是否存在安全问题：如果是这样，请记住，除非您还保护连接，否则这几乎肯定会受到 MITM 的约束。

# c# - 通过 P/Invoke 调用 GetGUIThreadInfo

> ID：719825
> 
> 赞同：13
> 
> 时间：2009-04-05T22:40:31.490
> 
> 标签：c#, pinvoke

我想将键盘输入发送到另一个进程中的窗口，而不将该窗口带到前台。我可以`PostMessage`用来伪造`WM_KEYDOWN`and `WM_KEYUP`; 我只需要知道哪个窗口句柄应该接收键盘输入——即，类似于[GetFocus](http://msdn.microsoft.com/en-us/library/ms646294(VS.85).aspx)的东西，但用于另一个非活动应用程序。

GetGUIThreadInfo API 看起来很有希望——它为另一个应用程序返回[一个](http://msdn.microsoft.com/en-us/library/ms633506(VS.85).aspx)`hwndFocus`。但是我没有运气让它在我的 64 位操作系统上通过 C# 工作。[我已经从pinvoke.net](http://pinvoke.net)复制（然后进一步调整）声明，但我得到的只是一个通用错误代码（下面有更多详细信息）。

我在调用 GetGUIThreadInfo 之前设置了 cbSize，因此我避免了最明显的潜在问题。

我正在运行 64 位 Vista，所以我不知道问题是我没有正确使用 API，还是它在 64 位中的工作方式不同——我还没有找到专门的代码示例说它在Win64中成功运行。

这是示例代码。我[按照建议](http://msdn.microsoft.com/en-us/library/ms633506(VS.85).aspx)使用 GetWindowThreadProcessId ，所以我认为问题与混合线程 ID 和线程句柄无关：

```
[StructLayout(LayoutKind.Sequential)]
内部结构 Rect
{
    公共 int 左;
    公共int顶部；
    公共 int 权利；
    公共 int 底部；
}

[StructLayout(LayoutKind.Sequential)]
内部类 GuiThreadInfo
{
    公共 int cbSize;
    公共单位标志；
    公共 IntPtr hwndActive；
    公共 IntPtr hwndFocus;
    公共 IntPtr hwndCapture；
    公共 IntPtr hwndMenuOwner;
    公共 IntPtr hwndMoveSize;
    公共 IntPtr hwndCaret;
    公共矩形 rcCaret；
}

[DllImport("user32.dll")]
内部静态外部 uint GetWindowThreadProcessId(IntPtr hWnd, IntPtr ProcessId);
[DllImport("user32.dll", SetLastError = true)]
内部静态 extern bool GetGUIThreadInfo(uint idThread, ref GuiThreadInfo lpgui);

IntPtr GetFocusedHandleFromProcessWithWindow（IntPtr 窗口）
{
    var threadId = GetWindowThreadProcessId(window, IntPtr.Zero);
    var info = new GuiThreadInfo();
    info.cbSize = Marshal.SizeOf(info);
    if (!GetGUIThreadInfo(threadId, ref info))
        抛出新的 Win32Exception();
    返回 info.hwndFocus；
}

```

`window`是一个有效的窗口句柄；`GetWindowThreadProcessId`返回一个非零线程句柄。但是调用`GetGUIThreadInfo`always 返回`false`，并且异常消息总是“参数不正确”。

以防万一问题是`GetGUIThreadInfo`不知何故没有 64 位版本，我尝试将声明`IntPtr`中的所有 8-byte s更改`GuiThreadInfo`为 4-byte `int`s，但我仍然遇到相同的错误。

有没有人`GetGUIThreadInfo`在 Win64 上有一个有效的 C# 示例？或者，是否有另一种方法可以在不激活该应用程序的情况下找到另一个应用程序中的焦点子窗口句柄？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T00:42:25.190

我没有仔细看它，但有一件事跳出来了。在您的 GetGUIThreadInfo 调用中，您通过 ref 传递 GUIThreadInfo 结构，但您已将其定义为一个类，因此您通过 ref 发送引用，换句话说，是指向指针的指针。将您的 GUIThreadInfo 更改为结构或删除参数上的 ref 并添加 [In, Out] 属性。

# wpf - 我应该绑定什么 WPF 依赖属性来查找 FrameworkElement 的中心？

> ID：719836
> 
> 赞同：1
> 
> 时间：2009-04-05T22:48:50.860
> 
> 标签：wpf, layout, dependency-properties

我正在编写一个 WPF 应用程序，我正在尝试找出最好的绑定方法，但只提出了“hack”解决方案，我希望有更好的方法。

我在 Grid 中有一个 Border 对象（从 FrameworkElement 派生）。由于子 TextBlock 的文本发生变化，边框的大小可能会发生变化。边框的位置可能会改变，因为网格中的其他东西可能会重新排列边框所在的单元格。

我想从屏幕的左下角画一条线到边框对象的确切中心。无论边框在屏幕上的大小或位置如何，位于边框正中的线的端点必须始终保持在中心。

我怎样才能做到这一点？

我的想法是绑定到依赖属性似乎是处理这个问题的理想方式。我可以在 Binding 对象上使用 IValueConverter 来计算确切的中心，因为它是 ActualWidth、ActualHeight 和 TranslatePoint() 以找到左上角。但是，我不知道我应该绑定哪个依赖属性，当边框改变大小和/或位置时会提醒我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T07:26:25.063

我认为您想对自身的所有`ActualXxx`属性进行多重绑定，并且它包含在：`Border``Grid`

```
<MultiBinding Converter="{StaticResource MyConverter}">#
    <Binding Path="ActualWidth" ElementName="_border"/>
    <Binding Path="ActualHeight" ElementName="_border"/>
    <Binding Path="ActualWidth" ElementName="_grid"/>
    <Binding Path="ActualHeight" ElementName="_grid"/>
</MultiBinding> 
```

您的另一个选择是在代码中执行此操作并覆盖该`OnRender()`方法。该方法可以调用基类实现，然后画线。然后，只要上述属性之一发生更改，您就需要使控件无效。

# javascript - 怎么在a上画文字 Safari 中的标记

> ID：719848
> 
> 赞同：12
> 
> 时间：2009-04-05T23:01:29.117
> 
> 标签：javascript, safari, canvas

我一直在尝试使用`<canvas>`标签来绘制简单的图表和图表，到目前为止它很容易使用。我有一个问题的想法。我不知道如何`<canvas>`在 Safari 上绘制文本。在 Firefox 3.0 中，我可以这样做：

```
Chart.prototype.drawTextCentered = function(context, text, x, y, font, color) {
  if (context.mozDrawText) {
    context.save();
    context.fillStyle = color;
    context.mozTextStyle = font;
    x -= 0.5 * context.mozMeasureText(text);
    context.translate(x, y);
    context.mozDrawText(text);
    context.restore();
  }
} 
```

我`fillText()`在 Apple 的 Safari 文档中看到了对方法的引用，但 Safari 3.2 似乎不支持它。这只是目前缺少的东西，还是一些保守的秘密？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-05T23:13:21.410

我不相信 Safari 3.2 支持在画布中呈现文本。

根据[这个博客](http://bottledtext.blogspot.com/2009/03/firefox-31b2-safari-4-beta-and-html-5.html)，Safari 4 beta 支持将文本渲染到画布，基于[HTML 5 画布文本 API](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text)。

**编辑**：我已经确认以下代码段在 Safari 4 beta 中有效：

```
<canvas id="canvas"></canvas>
<script>
    var context = document.getElementById("canvas").getContext("2d");
    context.fillText("Hello, world!", 10, 10);
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T04:41:05.757

这并不理想，看起来您可以等待，但作为参考，有一个名为[strokeText](http://www.netzgesta.de/dev/text/)的库，它可以进行自己的字体渲染。它适用于 Firefox 1.5+、Opera 9+、Safari（我不知道是什么版本）和 IE6+（使用 VML 而不是画布）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-17T20:01:23.520

如果你真的想使用 HTML5 文本方法，你应该试试这个库： [http ://code.google.com/p/canvas-text/](http://code.google.com/p/canvas-text/)

演示在这里： [http ://canvas-text.googlecode.com/svn/trunk/examples/index.html](http://canvas-text.googlecode.com/svn/trunk/examples/index.html)

它仍处于 alpha 阶段，因此欢迎任何错误报告和反馈！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T07:04:16.330

我正在使用`<canvas>`标签来绘制 Facebook 徽标，但是图像、文本被拉伸了。

```
<div class="content1">
   <canvas id = "e" class="myCanvas">
    <script>
        var canvas = document.getElementById("e");
        var context = canvas.getContext("2d");
        context.fillStyle = "white";
        context.font = "normal 64px Facebook Letter Faces";
        context.fillText("facebook",10, 100);
    </script>
     FACEBOOK
     </canvas>
</div> 
```

CSS 文件：

```
.content1
{
    float:left;
    position:relative;
    width:180px;
    height:120px;
}

.myCanvas
{
    float:right;
    position:relative;
    width:170px;
    height:60px;
    margin-right:5px;
    margin-top:70px;
    background-color:#044692;

} 
```

# sql-server - mdf 文件的物理文件碎片是否存在问题？

> ID：719849
> 
> 赞同：3
> 
> 时间：2009-04-05T23:01:46.977
> 
> 标签：sql-server

我在 SQL 服务器上运行了碎片整理报告，并且数据库的 mdf 文件被报告为 99% 碎片。我问了一位同事，他们说这可能是正常的，因为它只是这种类型的文件在内部工作的方式。

这是一个问题吗？为此文件运行磁盘碎片整理会提高数据库性能吗？这很痛苦，因为它需要大量磁盘空间，因为它是一个巨大的文件，所以我想确定是否有必要。

更新

从答案开始的另一个相关问题。RAID 条带化配置将如何影响这一点。如果数据在多个磁盘上进行条带化，碎片整理就不是问题了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T23:35:20.733

只要您确定实际上存在数据库响应问题，这将是一个很好的改进候选者。大概你至少已经确定有一个问题需要解决，并且它在数据库中。（即您测试的查询比您想要的要慢；或者您看到了锁；等等）。

否则，它开始看起来像是在猜测和尝试。根据您的查询模式，缓存自然会补偿很多这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T23:12:13.473

简短的回答是肯定的，碎片整理会有所帮助。

聚集索引尝试组织索引，以便只需要顺序读取。如果 .MDF 在磁盘上是连续的，那就太好了。如果文件散布在整个磁盘上，那就没有那么多了。

此外，即使 SQL 分配 8K 块，必须将磁盘头移动到各处，这也会导致访问时间慢得多。你真的希望文件是连续的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T15:22:56.777

避免这种情况的一个好方法是**不**依赖自动增长。让 MDF 有呼吸的空间。

# html - 传统的“HTML 仅用于内容”的思路如何处理动态格式？

> ID：719853
> 
> 赞同：6
> 
> 时间：2009-04-05T23:03:59.920
> 
> 标签：html, css, code-generation, code-formatting, standards-compliance

这么久以来，我已经阅读并理解了以下有关 Web 开发的真理：

1.  HTML 用于内容
2.  CSS 用于演示
3.  JavaScript 用于行为。

这通常都很好，而且我发现当我严格遵循这些准则并使用外部`.css`和`.js`文件时，它使我的整个网站更易于管理。但是，我想我发现了一个打破这种思路的情况。

我有一个为我的网站之一构建的自定义论坛系统。除了此类系统的常用格式（链接、图像、粗斜体和下划线等）外，我还允许我的用户设置其文本的格式，包括颜色、字体系列和大小。所有这些都以格式代码的形式保存在论坛消息数据库中，然后在查看页面时转换为相应的 HTML。（有点低效，技术上我应该在保存之前翻译，但这样我可以在系统上实时工作。）

由于这个系统和其他类似系统的性质，我最终会在生成的 HTML 代码周围出现很多标签，我认为这些标签已被非正式地弃用，因为我应该使用 CSS 进行格式化。这违反了规则一和二，即 HTML 不应该包含格式信息，而是更喜欢将这些信息放在 CSS 文档中。

有没有办法在 CSS 中实现动态格式而不在标记中包含该信息？值得麻烦吗？或者，考虑到正确代码的隐含限制，我要*限制我的用户可以做什么*，以便遵循“正确”的方式来格式化我的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-05T23:14:31.423

It's okay to use the `style` attribute for elements:

```
This is <span style="color: red;">red text</span>. 
```

If users are limited to only some options, you can use `class`es:

```
This is <span class="red">red text</span>. 
```

Be sure to use semantic HTML elements:

```
This is <strong>strong and <em class="blue">emphasized</em></strong>
text with a <a href="http://www.google.com" rel="external">link</a>. 
```

Common semantic elements and their user-space terms:

*   `<p>` (paragraphs)
*   `<strong>` (bold)
*   `<em>` (italic)
*   `<blockquote>` (quotes)
*   `<ul>` and `<ol>` with `<li>` (lists)
*   More...?

Likely less common in forum posts, but still usable semantic elements:

*   `<h1>`, `<h2>`, etc. (headings; be sure to start at a value so your page makes sense)
*   `<del>`, and, to a lesser extent, `<ins>` (strikeout)
*   `<sup>` and `<sub>` (superscript and subscript, respectively)
*   `<dl>` with `<dt>` and `<dd>` (list of pairs)
*   `<address>` (contact information)
*   More...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-05T23:13:25.107

This is a bit tricky. I would think about what you really want to allow visitors to do. Arbitrary colours and fonts? That seems rather useless. Emphasis, headings, links, and images? Well that you can handle easily enough by restricting to those tags / using a wikitext/forumtext markup that only provides these features.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T23:07:49.147

您可以在提供给用户的 html 页面的头部动态构建内联样式表。放入页面头部并允许它定位用户可配置的那些元素。

或者，使用具有最常见调整功能的外部样式表的概念，但将有数百个样式表来解释每种可能的替代方案。如果你使用它，你需要一个用于特定字体大小、颜色等的外部样式表，并动态链接到标题中的那些。与任何外部样式表一样。虽然这几乎是难以忍受的复杂启用。

选项一可以正常工作。

举个例子：

```
<STYLE>
    h1,h2,h3,h4 {font-family: Helvetica, Calibri;}
    p    {font-size: 1.2em;    // Populate all this with values from the Db.
         font-weight: bold;
         }
    a    {text-decoration: underline;
         color: #f00;
         }
</STYLE> 
```

另外，我突然想到，您可能可以创建一个每个用户的样式表来应用可配置方面。采用

```
<link href="/css/defaultstylesheet.css" type="text/css" rel="stylesheet" media="all" />
<link href="/css/user1245configured.css" type="text/css" rel="stylesheet" media="all" />
<!-- clearly the second is a stylesheet created for 'user 1245'. --> 
```

The bonus of this approach is that it allows caching of the stylesheet by the browser. Though it might likely clutter up the css folder, unless you have specific user-paths to the user sheet? Wow, this could get complex... :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-05T23:32:53.767

This is an interesting situation because you can have an infinite number of different styles, depending on your users' tastes and their own personal styles.

There are a couple of things you can be doing to manage this situation efficiently. Probably the easiest would be to just use style overrides:

```
<p style="color: blue; font-size: 10pt;">Lorem Ipsum</p> 
```

This is quick and easy. And remember, this is what style overrides are there for. But as you've said, this does not fit well with this content-presentation separation paradigm. To separate them a little more, you could build some CSS information on page load and then insert it into the `<head>` tag of your HTML. This still keeps the HTML and the CSS somewhat distinct, even though you're not technically sepating them.

Your other option would be to build the CSS and then output that to a file. This, however, would not be efficient (in my opinion). If you were to, on every page load, build a new CSS file that accounts for your users' unique preferences, this would sort of defeat the purpose. It's the same thing as the second option, using the `<head>` tag, you're just making it look separated. Even if you used techniques such as caching to try to limit how often you have to build a CSS file, will the ends really justify the means?

This is a completely subjective topic and you should, in the end, choose what you're most comfortable with.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-05T23:08:52.297

I don't know which framework or even language you are using but e.g. Django uses a certain template language to sort of represent the HTML being output. I think a nice solution would be to simply use a different "template" depending on what the user has chosen. This way you wouldn't have to care about breaking the "rules" or having a bunch of basically unused tags floating around in the DOM.

Unless I completely misunderstood...!

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-05T23:19:18.887

The easiest way to manage this is probably to emit dynamic CSS when the pages are generated, based on the user's settings. Then everything is doing the job it is supposed to be doing and the server is doing the work of converting the user's settings into the appropriate CSS.

With the CSS doing this work, you can use appropriate attributes in the HTML (`id` and `name` and `class` and so on) and emit CSS that will cleanly format everything the way you want.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-05T23:22:30.407

Consider the benefits versus the costs before you do anything. What is actually wrong with your code right now? Tag soup and combined content/presentation is to be avoided not because it makes a bad website, but because it is hard to maintain. If your HTML/CSS is being generated, who cares what the output is? If what you've got now works, then stick to it.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-06T00:03:56.000

I assume you are allowing only a limited white list of safe options, and therefore parsing the the user's HTML already.

When rendering the HTML you could convert each style declaration to a class:

```
<span style="font-family: SansSerif; font-size: 18px;">Hello</span> 
```

To:

```
<span class="SansSerif"><span class="size_18px">Hello</span></span> 
```

Laborious to generate (and maintain) the list. However you needn't worry about a class for each combination, which is of course your main problem.

It also has the benefit of extra security as user's CSS is less likely to slip through your filter as it's all replaced, and this should also ensure all the CSS is valid.

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2009-04-06T00:06:11.393

> I've allowed my users to set the formatting of their text, including color, font family, and size. All of this is saved in by database of forum messages as formatting code, and then translated to the corresponding HTML when the page is viewed.

So, you've done formatting through HTML, and you know that formatting is supposed to be done through CSS, and you realise this is a problem, and you got as far as asking a 300-word SO question about it ... ?

You don't see the solution, even though you can formulate the question ... ?

Here, I'll give you a hint:

> All of this is saved in by database of forum messages as formatting code, and then translated to the corresponding **~~HTML~~ CSS** when the page is viewed.

Does that help?

Is this question a joke?

# sql-server - 如何将 tempdb 分布在多个文件上？

> ID：719869
> 
> 赞同：25
> 
> 时间：2009-04-05T23:14:26.930
> 
> 标签：sql-server

该博客[http://blogs.msdn.com/sqlserverstorageengine/archive/2009/01/04/managing-tempdb-in-sql-server-tempdb-configuration.aspx](http://blogs.msdn.com/sqlserverstorageengine/archive/2009/01/04/managing-tempdb-in-sql-server-tempdb-configuration.aspx)指出“将 TempDB 分布在至少与 CORE 或 CPU 一样多的相同大小的文件。”

所以我的基本问题是我如何实际配置我的 SQL 服务器来做到这一点。所以我右键单击tempdb，选择属性，文件然后为每个CPU添加一个文件？它如何知道应该将 tempdb 分布在这些文件中？我应该设置一个标志吗？

我误解了这篇文章吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-04-06T00:34:53.260

只要您可以将额外的 TempDB 文件分布在不同的硬盘上，这个技巧是最好的。否则，创建不同临时表的不同线程将争用同一个物理磁盘。

您确实可以按照您说的去做，并且工作将自动分布在 TempDB 数据文件中。这也可以这样编写：

```
ALTER DATABASE tempdb
ADD FILE (NAME = tempdev2, FILENAME = 'W:\tempdb2.mdf', SIZE = 256);
ALTER DATABASE tempdb
ADD FILE (NAME = tempdev3, FILENAME = 'X:\tempdb3.mdf', SIZE = 256);
ALTER DATABASE tempdb
ADD FILE (NAME = tempdev4, FILENAME = 'Y:\tempdb4.mdf', SIZE = 256);
GO 
```

为您获取三个附加文件（即 4 个 CPU 内核和 4 个物理磁盘）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-19T09:03:13.107

我知道这已经很晚了，但是每个 CPU 创建一个文件的建议实际上是 Paul Randal 在他的博客中揭穿的神话：

[http://www.sqlskills.com/blogs/paul/post/A-SQL-Server-DBA-myth-a-day-%281230%29-tempdb-should-always-have-one-data-file-per -处理器核心.aspx](http://www.sqlskills.com/blogs/paul/post/A-SQL-Server-DBA-myth-a-day-%281230%29-tempdb-should-always-have-one-data-file-per-processor-core.aspx)

文章的基本建议：`If you have > 8 cores, use 8 files and if you're seeing in-memory contention, add 4 more files at a time.`

# grammar - 在 EBNF 中定义语言

> ID：719871
> 
> 赞同：1
> 
> 时间：2009-04-05T23:17:00.920
> 
> 标签：grammar, bnf, ebnf

`L`给出由字符组成的语言的 EBNF 规范，使得该语言中的句子具有`a`以下形式`b``c`

```
L : sqsR

-s   is a string of any combination of the characters a and b
-sR  is that same string s reversed
-q   is an  odd number of c's followed by either an odd number of b's
     or an even number of a’s. 
```

到目前为止我所拥有的：

```
L -> S
S -> {a}{b}Q
Q -> 
```

如果这是正确的，我仍然不确定如何生成`Q`以及如何`S`反向表示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T23:43:23.507

这是一个以相同字符串开头和结尾的字符串，但相反：

```
X -> aXa
  -> bXb 
```

这是一个带有奇数个 c 的字符串：

```
Y -> cY2
Y2 -> ccY2 
```

我遗漏了一些关键的部分，但希望这可以让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T23:33:49.613

*   尝试从中间向外构建前两个部分
*   您可以通过仅从一项开始并添加 N*2 附加项（对于整数 N）来强制重复奇数次。这也应该建议如何强制使用偶数

# c# - 网站架构模块版本控制

> ID：719873
> 
> 赞同：1
> 
> 时间：2009-04-05T23:17:48.157
> 
> 标签：c#, asp.net

我目前有一个 ASP.NET Web 应用程序，它从一个代码库为多个客户端提供服务。我们使用 URL 重写来检测正在为哪个客户端提供服务（几乎是一个虚拟 vdir）以及驱动哪个母版页/主题/模块版本运行。

现在，每个客户端都可以有不同版本的模块或默认模块。一个模块可以由一个数据目录（网格）组成，其中包含到其他模块的各种链接，或者它可以是一个图表生成模块，带有用于拉取数据的选项。模块需要主题化和本地化...

现在，我们制作 ascx 控件（/modulename/clientid.ascx），这是网站解决方案的一部分。如果我们还没有为客户端注册控件，则使用默认值。要发布对任何模块的更新，必须进行完整发布。如果其他客户的工作尚未准备好发布，这可能是一个问题。对于重写，我想解决这个问题。我只是不确定要采取什么方法。可以在这里使用 WCF 吗？也许加载项？每个客户端的实现都是自己的dll？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T04:49:07.890

您可能想看看使客户端控件正确的皮肤只是样式/加载控件的其余部分。

所以可能是所有客户端控件加载（每个模块）的基本控件，然后客户端控件只是标记，这意味着您只需要更改标记而不是编码（因此您不必每次都构建）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T07:39:28.777

“要发布对任何模块的更新，必须进行完整发布”——这是您需要在架构中解决的问题。

将您的模块与其余代码分离。

正如您在问题中提到的那样，将您的模块放在他们自己的程序集中可能是关键。这可以通过编写您自己的服务器控件而不是用户控件来解决，因为服务器控件不需要 ascx 文件。

# objective-c - 使用 alloc init 而不是 new

> ID：719877
> 
> 赞同：350
> 
> 时间：2009-04-05T23:26:06.450
> 
> 标签：objective-c, oop

学习 Objective-C 并阅读示例代码，我注意到对象通常是使用这种方法创建的：

```
SomeObject *myObject = [[SomeObject alloc] init]; 
```

代替：

```
SomeObject *myObject = [SomeObject new]; 
```

这是有原因的吗，因为我已经读到它们是等效的？

* * *

## 回答 #1

> 赞同：298
> 
> 时间：2009-04-05T23:32:16.887

这里有很多原因：http: [//macresearch.org/difference-between-alloc-init-and-new](http://macresearch.org/difference-between-alloc-init-and-new)

一些选择的是：

*   `new`不支持自定义初始化器（如`initWithString`）
*   `alloc-init`比`new`

一般的意见似乎是你应该使用你觉得舒服的任何东西。

* * *

## 回答 #2

> 赞同：143
> 
> 时间：2013-03-06T15:49:07.430

非常老的问题，但我写了一些例子只是为了好玩——也许你会发现它很有用；）

```
#import "InitAllocNewTest.h"

@implementation InitAllocNewTest

+(id)alloc{
    NSLog(@"Allocating...");
    return [super alloc];
}

-(id)init{
    NSLog(@"Initializing...");
    return [super init];
}

@end 
```

在 main 函数中，两个语句：

```
[[InitAllocNewTest alloc] init]; 
```

和

```
[InitAllocNewTest new]; 
```

产生相同的输出：

> ```
> 2013-03-06 16:45:44.125 XMLTest[18370:207] Allocating...
> 2013-03-06 16:45:44.128 XMLTest[18370:207] Initializing... 
> ```

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2009-04-06T02:02:59.740

`+new`相当于`+alloc/-init`在苹果的`NSObject`实现中。这极不可能改变，但根据您的偏执程度，Apple 的文档`+new`似乎允许将来更改实施（并打破等效性）。出于这个原因，因为“显式优于隐式”以及为了历史的连续性，Objective-C 社区通常避免使用`+new`. 但是，您通常可以通过顽固地使用`+new`.

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-04-05T23:52:07.357

通常，您需要将参数传递给`init`，因此您将使用不同的方法，例如`[[SomeObject alloc] initWithString: @"Foo"]`. 如果你习惯于写这个，你就会养成这样写的习惯，这样`[[SomeObject alloc] init]`可能会更自然`[SomeObject new]`。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-07-24T05:29:15.033

一个简短的回答是：

1.  两者都是一样的。但
2.  'new' 仅适用于基本的 'init' 初始化程序，而不能与其他初始化程序（例如 initWithString:) 一起使用。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-08-29T00:50:05.407

我对此很晚了，但我想提一下，在 Swift 世界的 Obj-C 中，new 实际上是不安全的。如果您不创建任何其他初始化程序，Swift 只会创建一个默认的 init 方法。使用自定义初始化程序在 swift 类上调用 new 将导致崩溃。如果你使用 alloc/init，那么编译器会正确地抱怨 init 不存在。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2011-11-04T13:44:53.520

`[Foo new]`附带说明一下，如果我想在 init 中完成某些事情而不在任何地方使用它的返回值，我个人会使用它。如果您不使用`[[Foo alloc] init]`任何地方的返回，那么您将收到警告。或多或少，我用`[Foo new]`眼睛糖果。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-05-05T18:00:09.637

如果 new 为您完成这项工作，那么它也会使您的代码适度地变小。如果您要`[[SomeClass alloc] init]`在代码中的许多不同位置调用，您将在 new 的实现中创建一个热点 - 即在 objc 运行时 - 这将减少缓存未命中的数量。

据我了解，如果您需要使用自定义初始化程序，请使用`[[SomeClass alloc] initCustom]`.

如果不这样做，请使用`[SomeClass new]`.

# c - 为什么从 Microsoft 编译器和链接器中删除 -oa 候选？

> ID：719878
> 
> 赞同：9
> 
> 时间：2009-04-05T23:26:31.613
> 
> 标签：c, visual-studio, command-line

我遇到了以下情况，我想知道它会对我的 Cygwin/GNU 环境产生什么影响。`-o`除了命名编译的输出之外，我应该使用其他东西吗？

是否采用了一些新标准，其他编译器是否遵守它？

删除的动机是`-o`什么？

DOS 提示符> 键入 compile.bat

```
cl.exe -D YY_MAIN=1 lex.yy.c libfl.obj -o foobar 
```

DOS 提示符> 编译

```
cl.exe -D YY_MAIN=1 lex.yy.c libfl.obj -o foobar
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 15.00.21022.08 for 80x86
Copyright (C) Microsoft Corporation.  All rights reserved.
lex.yy.c
Microsoft (R) Incremental Linker Version 9.00.21022.08
Copyright (C) Microsoft Corporation.  All rights reserved.
/out:lex.yy.exe
/out:foobar.exe
lex.yy.obj
libfl.obj 
```

**cl：命令行警告 D9035：选项“o”已被弃用，将在未来版本中删除**

* * *

正如下面的答案所问的那样，***他们****是否有意在 Windows 和 UNIX 之间制造更多裂痕？***我希望不是。我希望我错过了所有编译器采用的一些新约定。**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-05T23:42:03.073

是的。您应该使用[/F](http://msdn.microsoft.com/en-us/library/f1cb223a.aspx)来设置编译器输出选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-05T23:46:28.197

Windows 上的命令行参数与 Unix 上的命令行参数不同。它们通常以 / 而不是 - 开头，并且 to 的参数`cl.exe`不一定与`cc`Unix 上的参数匹配。

看起来您正在寻找的选项是[`/Fe`](http://msdn.microsoft.com/en-us/library/19z1t1wy(VS.71).aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T17:20:13.060

我不一定会看到其背后的邪恶目的 - 它更有可能是一些与兼容性相关的事情（也许 -o 正在干扰一些构建系统或一些微软大客户或其他使用的其他系统。）

然而，当编译器供应商抛弃根深蒂固的做法和习得的反应时，这*很烦人。*

但是 Microsoft 编译器和 Unix 编译器之间的（语法和哲学）差异比简单的命令行开关更大。为此，您可以尝试从简单的批处理构建脚本转向 Makefile - 或者，更好的是，实际的跨平台构建系统，例如[CMake](http://www.cmake.org/)或[SCons](http://www.scons.org/)（请注意，它们只是示例，我不是嫁给他们中的任何一个:)）。

# php - 使用 javascript 提交 php 变量（链接？）

> ID：719880
> 
> 赞同：0
> 
> 时间：2009-04-05T23:28:40.237
> 
> 标签：php, ajax

我正在创建一个基于浏览器的游戏，目前我正在设计脚本，当他/她点击地图的不同部分时更新我的​​角色的位置。

我正在使用一些 ajax 来执行此操作，它将请求发送到名为 position_update.php 的 php 文件。但是为了让它工作，我需要发送两个值，以便它知道新位置是什么，我该怎么做？下面是我将请求发送到 php 文件的链接。

```
<a onClick="positionUpdate();"><img src="images/transparent.gif" border="0" /></a> 
```

作为说明，我使用 php $_GET 超级全局来检索发送时的值。

谢谢，斯坦尼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-05T23:30:41.807

您需要点击网址：

```
position_update.php?var1=val1&var2=val2 
```

PHP 会将 get 字符串解析为 $_GET

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T23:40:25.947

顺便说一句，您应该通过具有适用于非 js 用户的等效 href 值来确保优雅地降级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T02:40:59.947

如果您需要对 URL 字符串进行编码，请使用 javascript 函数**encodeURL()**：

```
sUrl = encodeURL("position_update.php?dir="+sDir+"&dist="+sDist); 
```

请记住，在客户端-服务器架构中，不要对客户端有太多的隐含信任。所有处理游戏机制和规则执行的应用程序逻辑都应该包含在服务器端组件中。

几年前，有一款非常受欢迎的游戏叫做俄罗斯方块（多人在线俄罗斯方块），它的设计没有这些安全考虑。我花了大约 3 天的时间来破解通信协议，并基本上使用服务器命令创建/清除块来绘制其他玩家的屏幕。仅使用一个简单的代理就可以很容易地作弊。

所以不要让客户端*“告诉”服务器*玩家在哪里。仅使用客户端来显示界面、收集输入和显示输出。因此，让客户端告诉服务器玩家*“想要”移动到*哪里（方向、多远等），然后让*服务器*根据玩家合法允许的移动方式和他之前的位置计算玩家的位置。

# python - 帮我找出一个使用 Python 和 PostgreSQL 的随机调度算法

> ID：719886
> 
> 赞同：0
> 
> 时间：2009-04-05T23:34:32.857
> 
> 标签：python, postgresql

我正在尝试为我的模拟棒球队制定即将到来的赛季的时间表。我有一个包含旧时间表的现有 Postgresql 数据库。

数据库中有 648 行：24 个团队的 27 周系列。问题是日程安排已经变得可预测，并允许团队提前了解他们日程安排的薄弱环节。我想做的是采用现有的时间表并将其随机化。这样一来，球队仍然会以适当的次数互相比赛，但顺序与以前不同。

有一条规则一直困扰着我：每支球队每周只能打一场主场和一场客场系列赛。我一直在玩基于 ORDER BY RANDOM() 的 SELECT 语句，但我还没有弄清楚如何确保一个团队每周只有一个主场和一个公路系列赛。

现在，我*可以*在 PHP（这是我最熟悉的语言）中做到这一点，但我正在尝试转向 Python，所以我不确定如何在 Python 中完成这项工作。我知道 Python 似乎不能很好地处理二维数组。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T23:59:14.530

您是否考虑过保持相同的“时间表”，只是改组团队？可以生成一个每个人都互相比赛的适当次数的时间表，但是如果您已经有了这样的时间表，那么只对团队进行洗牌会容易得多。

您可以保留当前表，但将其中的每个团队替换为 id（0-23，或 AX，或其他），然后随机生成到另一个表中，您将每个团队分配给每个 id（0 = TeamJoe，1 = TeamBob ， ETC）。然后当明年再次洗牌时，只需重新生成该映射表。

不确定这是否以您想要的方式回答了问题，但可能是我会选择的（实际上是我在梦幻足球网站上的做法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T23:57:31.383

我不确定我是否完全理解这个问题，但我会这样做： 1\. 创建需要发生的匹配的完整列表 2\. 在几周内迭代，选择本周需要发生的匹配。

您可以使用 Python 列表来表示仍需要发生的匹配，以及每周发生的本周的匹配。

在第 2 步中，选择要发生的匹配将以这种方式工作：使用 random.choice 选择要发生的随机匹配。湾。使用 random.choice([1,2]) 确定哪支球队有本场比赛的主场比赛（如果这可能是任何一支球队的主场比赛） c。暂时删除所有被此选择阻止的匹配项。如果其中一支球队在本周已经有两场比赛，或者如果两支球队在本周都有主场比赛，或者如果两支球队在本周都有客场比赛，则一场比赛将被阻止。d。当一周内没有可用的匹配时，继续下一周，读取前一周被阻止的所有匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T00:45:28.833

我想我已经正确理解了您的问题，但无论如何，您可以使用 Python 的 set 数据类型和生成器功能：

```
import random

def scheduler(teams):
    """ schedule generator: only accepts an even number of teams! """
    if 0 != len(teams) % 2:
        return

    while teams:
        home_team = random.choice(list(teams))
        teams.remove(home_team)
        away_team = random.choice(list(teams))
        teams.remove(away_team)
        yield(home_team, away_team)

# team list from sql select statement
teams = set(["TEAM A", "TEAM B", "TEAM C", "TEAM D"])

for team in scheduler(teams):
    print(team) 
```

这将 SQL 处理保持在最低限度，并且应该很容易添加到新规则中，比如我不理解的规则；）祝你好运

**编辑：**

啊，现在更有意义了，应该少喝一瓶啤酒！在这种情况下，我肯定会推荐[NumPy](http://numpy.scipy.org//)。浏览本[教程](http://www.scipy.org/Tentative_NumPy_Tutorial)并查看在抓取随机夹具时如何使用 2 维主客队数组。最好从主场到客场为主场和客场球队提供食物，这样您就可以确保每支球队每周都在主场和客场比赛。

# php - 使用 php 和 ajax 更新数据库

> ID：719891
> 
> 赞同：0
> 
> 时间：2009-04-05T23:42:24.570
> 
> 标签：php, ajax, variables

下面是我的脚本，用于更新我在数据库中的角色位置：

```
<script language="javascript" type="text/javascript">
function positionUpdate(){
var word = document.getElementById('test').value;
var queryString = "?word=" + word;
ajaxRequest.open("GET", "new_position.php" + queryString, true);
ajaxRequest.send(null);
alert(queryString);
}
</script> 
```

接下来是告诉上述脚本运行的脚本，但我需要向它发送两个变量，以便它知道要更新什么。

```
<a onClick="positionUpdate();"><img src="images/transparent.gif" border="0" /></a> 
```

上面的链接被多次使用，所以我需要用它发送值，而不是将变量放在脚本的顶部，否则它们总是相同的。

作为注释，我使用 php GET 函数来检索 position_update.php 中的变量

谢谢，坦尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T23:55:08.800

尝试：

```
<script language="javascript" type="text/javascript">
function positionUpdate(var1, var2){
    var word = document.getElementById('test').value;
    var queryString = "?word=" + word + "&var1=" + var1 + "&var2=" + var2;
    ajaxRequest.open("GET", "new_position.php" + queryString, true);
    ajaxRequest.send(null);
    alert(queryString);
}
</script> 
```

和

```
<a onClick="positionUpdate('val1', 'val2');"><img src="images/transparent.gif" border="0" /></a> 
```

你是这个意思吗？这似乎是一个相当基本的问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T23:52:06.590

我不明白你的问题。

为什么不直接将变量作为函数参数传递给 positionUpdate？

也许您可以更详细地解释您要完成的工作。

# c# - 使用 C# 和 Mono 为 OS X 构建 Cocoa UI

> ID：719895
> 
> 赞同：13
> 
> 时间：2009-04-05T23:45:01.820
> 
> 标签：c#, cocoa, macos, mono

有没有人花时间比较 Mono 的各种 Objective C 桥和相关的 Cocoa 包装器？

我想移植一个现有的 C# 应用程序以在 OS X 上运行。理想情况下，我会在 Mono 上运行该应用程序，并为其构建一个本机 Cocoa UI。

我想知道哪座桥是最好的选择。

如果它对任何人都有用，这里有一些我到目前为止找到的桥梁的链接：

*   **CocoSharp** - 在 OS X 上与 Mono 一起分发 - [www.cocoa-sharp.com](http://www.cocoa-sharp.com)

*   **Monobjc** - 比其他文档更好（在我看来） - [www.mono-project.com/CocoaSharp](http://www.mono-project.com/CocoaSharp)和[www.monobjc.net](http://www.monobjc.net)

*   **NObjective** - （显然）比其他更快 - [code.google.com/p/nobjective](http://code.google.com/p/nobjective)

*   **MObjc / MCocoa** - [code.google.com/p/mobjc](http://code.google.com/p/mobjc)和[code.google.com/p/mcocoa](http://code.google.com/p/mcocoa)

*   **ObjC#** - [www.mono-project.com/ObjCSharp](http://www.mono-project.com/ObjCSharp)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-05-05T12:25:00.440

Mono 团队发布了一个名为 MonoMac 的新桥。

它本质上是他们为 iPhone 制作的 MonoTouch 框架的桌面版本。

Miguel 在他的博客上宣布了新桥：http: [//tirania.org/blog/archive/2010/Apr-19.html](http://tirania.org/blog/archive/2010/Apr-19.html)

一旦 MonoMac 成熟，我怀疑它将成为人们使用*的*桥梁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-09T07:22:18.683

我最近一直在尝试使用 F# 的 Monobjc、NObjective 和 MObjc/MCocoa，我将使用 MObjc/MCocoa。

Monobjc 是您编写的最佳文档和打包工具，但与其他两个相比非常[慢](http://code.google.com/p/nobjective/)，并且不会从 ObjC“重新抛出异常”。

我相信 NObjective 和 MObjc/MCocoa 是仅有的两个从 ObjC 重新抛出异常，这就是为什么我发现它们是唯一真正的替代品。

[正如这里](http://www.nabble.com/NObjective-and-Inheritance-td21882576ef1367.html)所讨论的， NObjective 使用带有继承的结构，我觉得这很可怕，让我最终选择了 MObjC/MCocoa。

（您可能也有许可证问题。Monobjc 和 NObjective 在 LGPL 下，MObjc/MCocoa 在 MIT 下......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T02:06:37.313

我认为 NObjective 是最好的选择，因为它可以为 Objective-C 包装器自动生成代码，可以轻松配置为为 Mac OS 的其他版本重新生成包装器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T02:22:00.053

好吧，我会问：你为什么要这样做？Cocoa 的 UI 架构，包括 Cocoa-std delgates 和 Cocoa bindngs，与 Objective-C 紧密相关。Interface Builder 和 Objective-C 的结合非常高效。尽管您可以将 Interface Builder 与许多通往 Objective-C 的桥（包括 PyObjC、MacRuby 和许多 C# 桥）一起使用，但由于框架和您选择的语言之间的任何阻抗不匹配，您将不可避免地降低工作效率。对于 C#，这种不匹配很重要。由于您正在编写本机 UI，因此失去了您将从 C# 中获得的任何跨平台优势，因此我将使用 Objective-C。对于一个称职的 C/C++/C#/Java/等。程序员，通常需要 2-3 天才能在 Objective-C 中变得舒适和高效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-03T23:02:12.003

Mono-OSX 邮件列表上对各种网桥进行了相当长的讨论。

讨论从Miguel[开始：](http://lists.ximian.com/pipermail/mono-osx/2009-May/002240.html)

*   宣布 Cocoa# 将不再由 Novell 维护。
*   试图统一社区中剩余的努力。

如果您阅读了讨论的其余部分，Mono 社区似乎倾向于 Monoobjc 或 MObjc / MCocoa；因此，如果您正在进行自己的调查，这些可能是要关注的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T00:11:06.297

不会问为什么，因为我相信你有你的理由。

我会看看 Unity3D 项目，看看你是否能弄清楚他们是如何做到的。看起来，嗯，很难。

# visual-studio-2008 - 用于调试的 Visual Studio 2008 (C++) 附加目录？

> ID：719896
> 
> 赞同：0
> 
> 时间：2009-04-05T23:45:04.377
> 
> 标签：visual-studio-2008, debugging, visual-c++, path

在 Visual Studio 的早期版本中，可以在调试应用程序时指定 DLL 文件的路径。我在版本（2008）中看不到这样做的方法。这是由于在应用程序目录中部署所有 DLL 文件等的应用程序吗？

我错过了什么，还是没有办法做到这一点？

* * *

它在[Visual C++](http://en.wikipedia.org/wiki/Visual_C%2B%2B#32-bit_versions) 6 中。我认为它是菜单*工具*->*选项*->*目录*-> 可执行文件。

也许现在这不是我想的那样 - 这可能与我在 Visual Studio 2008 中发现的相同。

基本上我正在寻找一种“附加”到 PATH 环境变量的方法 - 只是为了运行在 Visual Studio 中打开的 EXE 文件项目（而不实际编辑路径环境变量）。

解决方法是让我将所有依赖项复制到工作目录。这将起作用——它只涉及对其他项目的一些更改——并收集第三方的东西（这是从 Visual C++ 6 的巨大迁移）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T18:36:14.413

它不再那样工作了（从 VS 6.0 开始）。今天，一旦进程加载了 DLL 文件，DLL 文件就会收到通知并搜索 DLL 调试符号。

首先，它查看 DLL 文件内部（DLL 可以保留调试符号的路径）。如果没有，它会搜索符号路径（菜单*Tool* -> *Options* -> *Debugging* -> *Symbols*），然后在窗口目录中查找。

它仅在需要时才尝试加载调试符号（例如解析断点），或者如果您手动要求加载符号（如果找不到符号，它会提示您加载它们）。

*您可以通过打开模块窗格（菜单Debug* -> *Window* -> *Modules*）右键单击模块并选择*显示调试信息*来查看调试器尝试查找符号的位置（这里没有 Visual Studio，所以它可能用不同的名字来称呼）。

感谢上帝，我们不再需要为每个 DLL 文件配置路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T00:59:27.957

使用菜单*工具*->*选项*-> *项目和解决方案，您可以在其中指定项目的所有搜索路径。

# javascript - jQuery 根据内容删除 div

> ID：719905
> 
> 赞同：1
> 
> 时间：2009-04-05T23:52:27.073
> 
> 标签：javascript, jquery, css

我想根据里面的内容删除/隐藏一个 li，这容易吗？

例如。下面的代码：如果 span#type 没有内容，则应删除或隐藏 li.grouping。

```
<li class="grouping"><span class="desc">Options:</span><br /><span id="type"></span></li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T00:00:37.973

```
$("li.grouping:has(span#type:empty)").remove() 
```

`type`如果是 a`class`而不是a似乎更有意义`id`，因为页面上应该只有一个带有给定`id`的元素。在这种情况下：

```
$("li.grouping:has(span.type:empty)").remove() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T23:57:50.773

也许像

```
if ($("span#type").text() == "") {
    $("li.grouping").hide();
} 
```

# django - 如何在 Django 模板中添加注释

> ID：719915
> 
> 赞同：251
> 
> 时间：2009-04-06T00:02:36.677
> 
> 标签：django, django-templates

我想用一行来评论这个

```
{% if something.property %}
    <table>
        <tr>...

{% # this is a comment %}
{% if something.property %}
    <table>
        <tr>... 
```

* * *

## 回答 #1

> 赞同：386
> 
> 时间：2009-04-06T00:13:16.680

作为 Miles 的回答，`{% comment %}...{% endcomment %}`用于多行注释，但您也可以像这样在同一行注释掉文本：

```
{# some text #} 
```

* * *

## 回答 #2

> 赞同：151
> 
> 时间：2009-04-06T00:04:22.803

评论标签记录在[https://docs.djangoproject.com/en/stable/ref/templates/builtins/#std:templatetag-comment](https://docs.djangoproject.com/en/stable/ref/templates/builtins/#std:templatetag-comment)

```
{% comment %} this is a comment {% endcomment %} 
```

* * *

单行注释记录在[https://docs.djangoproject.com/en/stable/topics/templates/#comments](https://docs.djangoproject.com/en/stable/topics/templates/#comments)

```
{# this won't be rendered #} 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2009-04-06T00:13:17.587

使用`{# #}`符号，如下所示：

```
{# Everything you see here is a comment. It won't show up in the HTML output. #} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-07-11T09:24:57.750

如果您想评论一些 Django 模板格式代码，这种方式会很有帮助。

`{#% include 'file.html' %#}`（正确的方法）

如果使用 HTML 注释进行注释，以下代码仍会执行。

`<!-- {% include 'file.html' %} -->`（错误道）

# asp.net - 从 DAL 返回到 BLL 的内容

> ID：719924
> 
> 赞同：10
> 
> 时间：2009-04-06T00:11:17.997
> 
> 标签：asp.net, architecture, data-access-layer, bll

我目前有一个应用程序，其中包括：用户界面（网页）BLL（管理器和域对象）DAL（我的每个域对象的数据访问类）。

我在 UI 中使用以下内容来搜索域对象。

```
protect sub Button1_Click()
{
    IBook book = BookManager.GetBook(txtID.Text);
} 
```

这是我的 BLL

```
public class BookManager 
{
    public static IBook GetBook(string bookId)
    {
        return BookDB.GetBook(bookId);
    }
}

public class Book : IBook
{
    private int? _id
    private string _name;
    private string _genre;

    public string Name
    {
        get { return _name; }
        private set 
        {
            if (string.IsNullOrEmpty(value))
                throw new Exception("Invalid Name");
            _name = value;
        }
    }

    public string Genre
    {
        get { return _serial; }
        private set 
        {
            if (string.IsNullOrEmpty(value))
                throw new Exception("Invalid Genre");
            _genre = value;
        }
    }

    // Other IBook Implementations

} 
```

最后这是我的 DAL

```
public class BookDB
{
    public static IBook GetBook(int id)
    {
        // Get Book from database using sproc (not allowed to use any ORM)
        // ?? Create IBook Item?
        // return IBook
    } 
```

如何创建一个 IBook 对象并将其返回给 Manager？我正在考虑将一个 DataTable 从 BookDB 返回到 BookManager 并让它创建 Book Object 并返回它，但这似乎不正确。还有另一种方法可以做到这一点吗？

**编辑：我决定将每一层分离到一个项目中，并在尝试添加对 BLL 的引用时在 DAL 层中遇到了循环依赖问题。我无法从 DAL 访问 Book Class 或 Interface 或 BLL 中的任何内容。我应该在这里使用 ado.net 对象并让我的经理从 ado.net 对象创建实际对象吗？这是它的布局方式**

```
BLL.Managers - BookManager
BLL.Interfaces IBook
BLL.Domain - Book
DAL - BookDB. 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T01:11:16.883

您可以创建仅包含数据的虚拟 Book 对象。获取、设置属性和成员值。这本书对数据库中的每个字段都有 1 个属性，但不验证任何内容。

您从数据库中填充对象，然后将其发送到 BLL。

当你想保存对象时，你也将它发送到 BLL。

如果有意义的话，您在 BLL 中的类可以包装这些对象。这样，很容易将其发送回 DAL。

假书：

```
public class DummyBook:IBook 
{
    private nullable<int> _id;
    private string _name;
    private string _genre;

    public string Id
    {
        get {return _id;}
        set {_id = value;}
    }

    public string Name 
    {
        get {return _name;}
        set {_name = value;}
    }

    public string Genre 
    {
        get {return _genre;}
        set {_genre= value;}
    }

} 
```

达尔书：

```
public class DALBook 
{
    public static IBook:GetBook(int id) 
    {
        DataTable dt;
        DummyBook db = new DummyBook();

        // Code to get datatable from database
        // ...
        // 

        db.Id = (int)dt.Rows[0]["id"];
        db.Name = (string)dt.Rows[0]["name"];
        db.Genre = (string)dt.Rows[0]["genre"];

        return db;
    }

    public static void SaveBook(IBook book) 
    {
        // Code to save the book in the database
        // you can use the properties from the dummy book
        // to send parameters to your stored proc.
    }
} 
```

BLL 书：

```
public class Book : IBook
{
     private DummyBook _book;

     public Book(int id) 
     {
         _book = DALBook.GetBook(id);
     }

     public string Name 
     {
         get {return _book.Name;}
         set 
         {
            if (string.IsNullOrEmpty(value))
            {
                throw new Exception("Invalid Name");
            }
            _book.Name = value;
         }
     }

     // Code for other Properties ...

     public void Save()
     {
         // Add validation if required
         DALBook.Save(_book);
     }

} 
```

**Edit1：**虚拟类应该放在他们自己的项目中（模型，正如评论中所说的那样很好）。参考将按如下方式工作：

DAL 引用模型项目。
BLL 引用模型和 DAL。
UI 引用 BLL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T05:25:53.043

BookDB 应该返回 IBook 实例。我喜欢存储库模式，它是关于从数据库到域的映射。

存储库实现返回域对象的实例。这将其余代码与特定的持久性实现屏蔽开来，这可能会受到技术（数据库类型、Web 服务、[插入其他内容]）和用于保存数据的格式的影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-08T04:50:45.183

在我看来，你永远不应该让 DAL 访问 BLL。这是一种不必要的依赖。

将 Book 类放入一个新项目（可能命名为 DomainModel）将修复循环引用。你可以这样做：

BLL 项目参考 DAL 和 DomainModel

项目 DAL 参考 DomainModel

项目 UI 参考 BLL 和 DomainModel

项目 DomainModel 没有参考

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T01:19:53.150

我可能会使用 ExecuteReader 从数据库的代码中创建一个对象。这样做的原因是数据表比读取器具有更多开销，因为它具有更多功能（并且可能是由读取器创建的）。由于您没有使用数据表进行更新/删除，因此您不需要开销。

话虽如此，我会在 BookManager 类中创建一个静态辅助方法。

```
internal static IBook BookFromReader(IDataReader reader)
{
     Book B = new Book();
     B.Prop = reader.GetString(0);
     B.Rinse = reader.Repeat();
     return B;
} 
```

这样做的原因是因为您拥有接口的原因是因为您可能想要更改实现。您可能最终拥有 INovel : IBook、IReference : IBook 等，然后您会希望在数据层中有一个抽象工厂实现。

```
public static IBook GetBook(int id)
{
    // SqlCommand Command = new Command("SQL or sproc", ValidConnection);

    using(IDataReader DR = Command.ExecuteReader(id))
    {
        // checking omitted
        switch(DR.GetInt32(1))
        {
            case 0:
                 return BookManager.BookFromReader(DR);
            case 1:
                 return BookManager.NovelFromReader(DR);
            etc
        }
    }
} 
```

这里 DAL 的另一个好处是您可以缓存查找。您可以拥有一个包含您查找过的书籍的字典，以减少对您已经返回的对象的额外数据库调用。发生更新时，您会删除缓存的实体……不过那是另一篇文章。

如果您使用多个程序集，则接口和辅助方法将需要驻留在中性（非依赖）程序集中。现在在 blog-o-sphere 中，正在朝着更少的程序集发展，这意味着更少的依赖等。

这是我阅读的有关此主题的博客的链接：http: [//codebetter.com/blogs/patricksmacchia/archive/2008/12/08/advices-on-partitioning-code-through-net-assemblies.aspx](http://codebetter.com/blogs/patricksmacchia/archive/2008/12/08/advices-on-partitioning-code-through-net-assemblies.aspx)

最终，我认为答案是数据层将您的接口实例返回给业务层。

祝你好运 ：-）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T00:34:06.380

您要返回的 DataTable 与数据库相关，对于 BLL，它不应该关心您使用的是什么数据库以及架构是什么。您可以使用 DB-Object Mapper 将 dbtable 映射到 DAL 中的对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T00:43:55.280

如果您不想返回 DataTable，则可以从 BookManager 传入 IBook 实现以填充 DAL。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-06-04T11:20:18.717

遵循预期的模型。数据访问层 (DAL) 负责从数据源检索数据和向数据源发送数据。

DAL 必须不关心您的 BLL 正在使用的任何业务实体，因为它的唯一工作是检索数据并将其返回到中性对象中。对于通用的可重用性，它必须是中性的，否则你最好不要将层分开，因为你正在破坏它的目的。

您的业​​务逻辑层 (BLL) 必须不关心 DAL 如何实现检索或写入数据。

要在 BLL 和 DAL 之间进行通信，您必须使用中性对象。

您的 BLL 将对象的属性作为单独的参数传递给 DAL 中的方法。DAL 中的参数是中性的，使用字符串、int、bool 和任何其他 .NET 对象，这些对象既不是特定于您正在与之通信的数据库版本，也不是特定类型仅存在于您的 BLL 中。

DAL 将通过任何方式从任何地方检索数据，并将中性数据对象返回给调用者。例如，这可能是 DataSet 或 DataTable 或任何其他不特定于您正在使用的数据库类型/版本的对象。因此 DataSet 和 DataTable 是 System.Data 命名空间中的对象，而不是 System.Data.SQL 等...命名空间中的对象。

本质上： - BLL 将中性类型传递给 DAL（例如：string、int、bool、long、float 等） - 如果需要，DAL 负责将这些类型转换为数据库特定类型，然后再将它们传递给数据源DAL 将中性数据类型返回给 BLL（例如：DataSet、DataTable 等） - BLL 负责使用这些中性数据类型的内容来创建、填充和返回特定的业务实体

您的 BLL 必须参考您的 DAL。而已。

当然，您可以完全忽略此模型并破解之前使用 IBOOK 等建议的许多...无论如何都要独立维护它。

# apache - 如何防止黑客利用 Apache -> 可用站点 -> 默认文件

> ID：719925
> 
> 赞同：3
> 
> 时间：2009-04-06T00:11:28.293
> 
> 标签：apache, configuration, default

我们注意到黑客创建了一个域并配置了 DNS 以将其指向我们服务器的 IP 地址。

我们在 Ubuntu 上使用 apache2.x。在 apache 的 /etc/apache2/sites-available 目录中有一个“默认”文件，看起来黑客的域正在使用“默认”apache 配置文件在他们的域中显示我们的 Web 内容。

我们怎样才能防止这种情况发生？有人可以发布一个“默认”的 apache 配置文件作为示例吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-06T00:15:39.483

通过指定 ip 和端口进入 apache 的未知域将被定向到第一个虚拟主机，即 000-default 文件。您最好的选择是让 000-default 主机返回 400 或 500 错误（或一些明确的消息表明该域不属于）并为您的每个站点使用明确的虚拟主机。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-06T00:54:18.983

+1 Jeremy 的回答：为您正在侦听的每个 IP 地址设置默认（第一个）虚拟主机，返回一些无用的信息，例如 404 或页面只说“这是一个虚拟服务器”。

允许您的 Web 服务器在不匹配的“主机”名称（包括原始 IP 地址）上为真实网站提供服务，这会使您面临两种特定的攻击：

1.  [DNS 重新绑定](http://en.wikipedia.org/wiki/DNS_rebinding)攻击，导致跨站点脚本进入您的真实网站。这会影响具有用户访问元素的站点（例如登录、cookie、所谓的私有 Intranet 应用程序）。

2.  “搜索劫持”。这会影响所有站点（甚至是完全静态的站点）。这可能就是发生在你身上的事情。通过将他们自己的域名指向您的服务器，他们可以让搜索引擎将真实域名和假域名都视为同一站点的重复域名。通过使用 SEO 技术，他们可以尝试使他们的假地址看起来更受欢迎，此时搜索引擎将其视为该网站的规范地址，并将开始专门链接到它而不是您的地址。

大多数 Web 服务器默认配置为向所有人提供网站服务，无论他们通过什么主机名或 IP 地址访问它。这是一个危险的错误。对于所有真实的实时站点，将其配置为要求“主机”标头与您的真实规范主机名匹配。

# asp.net - 如何在运行时修改 web.config appSettings？

> ID：719928
> 
> 赞同：87
> 
> 时间：2009-04-06T00:14:47.207
> 
> 标签：asp.net, web-config, runtime

我对如何在运行时修改 web.config appSettings 值感到困惑。例如，我有这个 appSettings 部分：

```
<appSettings>
  <add key="productspagedesc" value="TODO: Edit this default message" />
  <add key="servicespagedesc" value="TODO: Edit this default message" />
  <add key="contactspagedesc" value="TODO: Edit this default message" />
  <add key="aboutpagedesc" value="TODO: Edit this default message" />
  <add key="homepagedesc" value="TODO: Edit this default message" />
 </appSettings> 
```

比方说，我想在运行时修改“homepagedesc”键。我尝试了 ConfigurationManager 和 WebConfigurationManager 静态类，但设置是“只读的”。如何在运行时修改 appSettings 值？

更新：好的，所以我在这里 5 年后。我想指出经验告诉我，我们不应该将任何有意在运行时可编辑的配置放在 web.config 文件中，而是应该将其放在单独的 XML 文件中，正如下面一位用户评论的那样。这将不需要编辑 web.config 文件来重新启动应用程序，这将导致愤怒的用户呼叫您。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2009-04-06T00:26:12.703

您需要使用`WebConfigurationManager.OpenWebConfiguration()`：例如：

```
Dim myConfiguration As Configuration = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~")
myConfiguration.ConnectionStrings.ConnectionStrings("myDatabaseName").ConnectionString = txtConnectionString.Text
myConfiguration.AppSettings.Settings.Item("myKey").Value = txtmyKey.Text
myConfiguration.Save() 
```

我认为您可能还需要在 machine.config 中设置[AllowLocation](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.allowlocation(VS.80).aspx)。这是一个布尔值，指示是否可以使用该元素配置各个页面。如果“allowLocation”为 false，则无法在单个元素中进行配置。

最后，如果您在 IIS 中运行应用程序并从 Visual Studio 运行测试示例，情况会有所不同。ASP.NET 进程标识是 IIS 帐户、ASPNET 或 NETWORK SERVICES（取决于 IIS 版本）。

可能需要授予 ASPNET 或 NETWORK SERVICES Modify 对 web.config 所在文件夹的访问权限。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-04-06T00:22:19.060

更改 web.config 通常会导致应用程序重新启动。

如果您确实需要您的应用程序编辑其自己的设置，那么您应该考虑一种不同的方法，例如将设置数据库化或使用可编辑设置创建一个 xml 文件。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-12-11T13:32:42.090

如果你想避免应用程序的重启，你可以移出该`appSettings`部分：

```
<appSettings configSource="Config\appSettings.config"/> 
```

到一个单独的文件。并结合`ConfigurationSaveMode.Minimal`

```
var config = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~");
config.Save(ConfigurationSaveMode.Minimal); 
```

您可以继续将该`appSettings`部分用作各种设置的存储，而不会导致应用程序重新启动，也无需使用与普通 appSettings 部分格式不同的文件。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2012-08-08T06:31:36.363

**2012** 这是此场景的更好解决方案（使用[Visual Studio 2008](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2008)测试）：

```
Configuration config = WebConfigurationManager.OpenWebConfiguration(HttpContext.Current.Request.ApplicationPath);
config.AppSettings.Settings.Remove("MyVariable");
config.AppSettings.Settings.Add("MyVariable", "MyValue");
config.Save(); 
```

**2018 年更新 =>**
**在 vs 2015 中测试 - Asp.net MVC5**

```
var config = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~");
config.AppSettings.Settings["MyVariable"].Value = "MyValue";
config.Save(); 
```

**如果您需要检查元素是否存在，请使用以下代码：**

```
var config = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~");
if (config.AppSettings.Settings["MyVariable"] != null)
{
config.AppSettings.Settings["MyVariable"].Value = "MyValue";
}
else { config.AppSettings.Settings.Add("MyVariable", "MyValue"); }
config.Save(); 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-06-06T12:46:51.510

我知道这个问题很老，但我想根据 ASP.NET\IIS 世界中的当前状况以及我的真实世界经验发布一个答案。

我最近在我的公司领导了一个项目，我想在一个中心位置整合和管理 web.config 文件中的所有 appSettings 和 connectionStrings 设置。由于项目的成熟度和稳定性，我想采用一种方法，将我们的配置设置存储在 ZooKeeper 中。更不用说 ZooKeeper 在设计上是一个配置和集群管理应用程序。

项目目标非常简单；

1.  让 ASP.NET 与 ZooKeeper 通信
2.  在 Global.asax 中，Application_Start - 从 ZooKeeper 中提取 web.config 设置。

在通过让 ASP.NET 与 ZooKeeper 对话的技术部分后，我很快找到并用以下代码碰了壁；

```
ConfigurationManager.AppSettings.Add(key_name, data_value) 
```

该声明最符合逻辑，因为我想将新设置添加到 appSettings 集合中。但是，正如原始海报（和许多其他人）所提到的，此代码调用返回一个错误，指出该集合是只读的。

在做了一些研究并看到人们解决这个问题的所有不同疯狂方式之后，我非常气馁。我没有放弃或满足于似乎不太理想的情况，而是决定深入研究，看看我是否遗漏了什么。

经过一些试验和错误，我发现下面的代码完全符合我的要求；

```
ConfigurationManager.AppSettings.Set(key_name, data_value) 
```

使用这行代码，我现在可以在我的 Application_Start 中从 ZooKeeper 加载所有 85 个 appSettings 键。

关于更改 web.config 触发 IIS 回收的一般性陈述，我编辑了以下 appPool 设置以监控幕后情况；

```
appPool-->Advanced Settings-->Recycling-->Disable Recycling for Configuration Changes = False
appPool-->Advanced Settings-->Recycling-->Generate Recycle Event Log Entry-->[For Each Setting] = True 
```

使用这种设置组合，如果此过程导致 appPool 回收，则应该记录一个事件日志条目，但事实并非如此。

这使我得出结论，从集中式存储介质加载应用程序设置是可能的，而且确实是安全的。

我应该提到我在 Windows 7 上使用 IIS7.5。代码将在 Win2012 上部署到 IIS8。如果有关此答案的任何内容发生变化，我将相应地更新此答案。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-02-16T12:34:36.410

谁喜欢直接点，

在您的配置中

```
 <appSettings>

    <add key="Conf_id" value="71" />

  </appSettings> 
```

在你的代码中（c#）

```
///SET
    ConfigurationManager.AppSettings.Set("Conf_id", "whateveryourvalue");
      ///GET              
    string conf = ConfigurationManager.AppSettings.Get("Conf_id").ToString(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-27T11:20:12.150

试试这个：

```
using System;
using System.Configuration;
using System.Web.Configuration;

namespace SampleApplication.WebConfig
{
    public partial class webConfigFile : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            //Helps to open the Root level web.config file.
            Configuration webConfigApp = WebConfigurationManager.OpenWebConfiguration("~");
            //Modifying the AppKey from AppValue to AppValue1
            webConfigApp.AppSettings.Settings["ConnectionString"].Value = "ConnectionString";
            //Save the Modified settings of AppSettings.
            webConfigApp.Save();
        }
    }
} 
```

# c# - C# 制作一个选项卡，向选项卡添加控件，然后拥有多个该类型的选项卡

> ID：719935
> 
> 赞同：1
> 
> 时间：2009-04-06T00:23:31.867
> 
> 标签：c#, controls, tabs, add

```
TabPage newpage = new TabPage();
Tabs.TabPages.Add(newpage);
newpage.Controls.Add(this.tableLayoutPanel41);
newpage.Location = new System.Drawing.Point(4, 26);
newpage.Name = "AddMaintAgreement" + offset;
newpage.Size = new System.Drawing.Size(736, 523);
newpage.TabIndex = 10;
newpage.Text = "Add Maintenance Agreement";
newpage.UseVisualStyleBackColor = true;
offset++; 
```

基本上这就是我目前所拥有的，我在那里添加了偏移量，因为我认为它可能会影响我的问题。

基本上，这里的代码可以正常添加一个“addmaintagreement”选项卡。之后，只有最新的选项卡上有任何控件！

基本上我被难住了。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:17:59.537

我认为简短的例子应该留在这里：

```
 TextBox tmpLog = new TextBox(); // create new control of textbox type
        tmpLog.Text = "some text here";

        TabPage tb = new TabPage("my brand new tab"); //create tab
        tabControl.TabPages.Add(tb); // add tab to existed TabControl
        tb.Controls.Add(tmpLog); // add textBox to new tab

        tabControl.SelectedTab = tb;     // activate tab 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T00:45:31.907

从 TabPage 派生并在该派生类中添加所需的控件。然后使用您的派生类而不是 TabPage。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T00:40:52.497

控件只能作为一个控件的父级，但看起来您正在尝试`tableLayoutPanel41`在每个`TabPage`实例中作为父级。您需要为选项卡的每个实例创建控件的新副本。有多种方法可以解决此问题。

1.  以编程方式多次创建您的标签页及其内容。
2.  将您的内容`TabPage`实现为您停靠在标签页上的用户控件。然后为每个页面重新创建一个，重复您的要求。
3.  创建一个派生自`TabPage`实现标签页的类，并为每次使用创建该类的新实例。

# javascript - extjs 网格在 Firefox 中有效，在 IE 中无效

> ID：719937
> 
> 赞同：0
> 
> 时间：2009-04-06T00:23:54.813
> 
> 标签：javascript, debugging, extjs, firebug

我在网页上有一组 extjs 对象，使用 Firefox 进行开发，因此我可以使用 Firebug 进行调试。过了一会儿，我启动 IE 来检查兼容性并在 IE 中获得一个空白页面，但在 FF 中一切正常。

在 IE 中，我没有收到任何 Javascript 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T00:26:56.820

在 Firebug 选项中打开“严格警告”，然后在您的页面的 .js 源文件中查找警告。似乎 Firefox 对集合的最后一个成员之后的逗号更加宽容。查找标有“尾随逗号在 ECMA-262 对象初始化程序中不合法”的警告。这明确了问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-10T09:03:30.000

“似乎 Firefox 对集合的最后一个成员之后的逗号更加宽容。”

是的！！就是这样。除了 jslint 之外，还有[http://www.jsonlint.com/](http://www.jsonlint.com/)可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-07T13:07:11.127

jslint.com 对 IE JavaScript 问题有很大帮助。FF 忽略和 IE 阻塞的悬挂逗号太容易了。

# jquery - IE 输入选择框

> ID：719950
> 
> 赞同：3
> 
> 时间：2009-04-06T00:32:54.870
> 
> 标签：jquery, html, css, internet-explorer, html-select

我正在寻找最简单的解决方案来解决我在 Internet Explorer（6,7 和 8）中遇到的问题，无论是 CSS 还是使用 jQuery。我有一个定义宽度的 SELECT 输入（因为它在布局中的位置）。由于定义的宽度选择被切断显示它们的完整值，不像在 Firefox 和 Safari 中它们会自动调整大小以显示值的整个长度。

当然这是一个普遍的问题？有任何想法吗？

示例代码：

```
<select id="Grouping_662066" class="productSelectInput" name="AddToCart_Grouping" onchange="DrawProduct(36331,662066,this.value,'',true);">
</select> 
```

我正在使用 CMS 系统，类 ' `productSelectInput`' 是唯一的标识符，它将在整个网站上保持一致。,`ID`和`name`属性`onchange`将会改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T00:55:42.960

[这](http://css-tricks.com/select-cuts-off-options-in-ie-fix/)是使用 jQuery 的信息和解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T00:36:24.020

鉴于这些限制，我对 IE 的唯一建议就是可能减小字体的大小。

我不确定是否有其他方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-02-14T20:24:50.833

您可以使用常规 Javacsript，利用 onmousedown、onblur 和 onchange 函数来操作元素 CSS。这是解决方案在 jQuery 中的外观（使用相同的函数）。

```
 var example = $('#some-id');

    $(example).mousedown(function() {
            $(this).css('width','400px');                            
    });
    $(example).blur(function({
            $(this).css('width','200px');                            
    });
    $(example).change(function() {
            $(this).css('width','200px');                            
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T00:50:05.827

就我而言，这是一个浏览器问题（IE）。

你可以包括   在焦点和模糊事件上使用 Javascript 动态包装选项或调整选择的大小。此外，您可以使用 css 和 javascript（没有“选择”，而是“ul”）创建一个下拉菜单，并完全控制界面。（onBlur，javascript 应该在隐藏的输入上写一个值）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T20:18:34.053

如果 ie8 支持伪类 :focus 您可以为单击选择时指定更大的宽度。虽然在 ie6 中不起作用，而且可能在 ie7 中不起作用

# php - 我应该如何设置开发环境以将代码滚动到实时网站？

> ID：719959
> 
> 赞同：5
> 
> 时间：2009-04-06T00:40:27.193
> 
> 标签：php, cakephp

过去，我总是实时编辑我所有的网站。不太担心我的 2 位访客看到错误消息。

但是，可能有一天我会接待超过 2 个访客。测试我的更改然后使所有更改同时生效的最佳方法是什么？

我是否应该将单个文件复制并粘贴到子文件夹中并进行编辑，然后在完成后将它们复制回来？如果我的代码中有完整的 URL（如果我移动它们会中断）怎么办？也许我可以使用一些 .htaccess 黑客来解决这个问题？数据库虚拟测试数据呢？我应该欺骗我所有的 MySQL 表并引用它们吗？

我正在为我关心的特定项目使用 CakePHP，但我很想知道人们在使用 Cake（*可能*有工具可以帮助解决这个问题？）和没有框架的情况下采用什么方法。

* * *

我收到了很多关于 SVN 的建议，听起来不错，但不幸的是我的主机不支持它：\

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-06T00:43:38.463

您可以做的最好的事情是创建一个临时环境来测试您的更改。登台环境（理想情况下）是您的生产系统的完整、可工作的副本。这将防止您遇到许多令人头疼的问题和意外的生产崩溃。

如果您正在处理一个小型项目，最好的办法是在本地（包括数据库）重新创建您的远程站点。在那里对所有更改进行编码，然后，一旦您对完成感到满意，就可以一次将更改部署到您的远程站点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-06T01:22:04.550

我建议将您的网站代码置于完全版本控制（git 或 subversion）之下。在单独的私有沙箱服务器中测试和维护您的源代码，并在准备发布时在生产站点查看最新的稳定版本。

对于数据库支持，即使是小型项目，我也会维护单独的开发和生产数据库。您可以将用于生成和维护架构以及测试或引导数据的 SQL 与站点的其余部分一起进行版本控制。从一个易于分离的配置文件管理您的站点使用的数据库环境，并告诉您的版本控制解决方案忽略它。

绝对 URL 将是一个问题。如果您无法避免它们，您总是可以将主机名存储在同一个配置文件中并根据需要读取它......当然，样式表和 Javascript 资源中除外。对于该问题，我的第二个选择是 URL 重写魔术或开发服务器中的等效程序，而`/etc/hosts`当我想测试依赖于它们的功能时，我的最后一个选择就是弄乱文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T00:55:08.547

我在笔记本电脑上设置了一个开发服务器，尽可能地复制我的网络服务器（服务器软件和配置、操作系统、文件系统布局、安装的软件等）。这样我就可以在笔记本电脑上编写代码并在本地进行测试; 一旦我在那里工作，我将它复制到服务器。有时，由于两台计算机之间的细微差异会出现一些问题，但这些问题总是很快得到解决（以防万一，我的站点位于 SVN 存储库中，因此我可以随时恢复它）。

在我曾经维护的另一个网站上，我使用了一种稍微不同的策略：我在站点内指定了一个 URL 路径，该路径将是基础站点的开发版本。也就是说，`http://www.example.com/devweb`通常会 mirror `http://www.example.com`，`http://www.example.com/devweb/foo/bar.php`会 mirror`http://www.example.com/foo/bar.php`等等。我在`devweb`文档根目录下创建了一个文件夹，但是我没有复制所有文件，而是配置了服务器，以便如果目录中不存在请求的文件`/devweb`，它会看起来在文档根目录下。不过，这是一个比拥有单独的开发服务器更脆弱的设置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T03:14:38.383

我有许多用 CakePHP 编写的网站。我使用生产服务器上的数据库在本地机器上进行开发和测试（我只有一个适用于我的静态 IP 地址的 MySQL 登录名）。

所有代码都签入 Subversion，然后我有一个持续集成服务器 - Hudson：

[https://hudson.dev.java.net/](https://hudson.dev.java.net/)

这会在生产机器上构建和部署我的项目。它只是检查特定项目的 subversion 中的代码，然后运行一个简单的脚本来 SSH/将文件复制到服务器上的暂存或生产位置。您可以将其设置为手动过程（我目前有），或者您可以设置它以便在签入代码后部署它。还有很多其他 CI 工具可以设置来执行此操作（有一个看看Xinc也是如此）。

[http://code.google.com/p/xinc/](http://code.google.com/p/xinc/)

至于绝对 URL，您始终可以在主机文件中设置一些内容，以在您的机器上本地解析站点。它对我有用，只是不要忘记之后把它拿出来:)

希望有帮助...

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-15T23:57:11.540

我有一个 config/database.php 版本，它使用 php 服务器变量“服务器名称”来确定应用程序在哪个系统上运行。然后，当我在我的家庭系统、开发站点（与实时机器共享相同的规格）和实时机器上克隆我的 git 存储库时，它们都连接到各自的数据库。

我贴在这里，但我也相信它可以在面包店买到。

[http://pastebin.com/f1a701145](http://pastebin.com/f1a701145)

# silverlight - Silverlight/WPF - 你可以根据项目的基本类型有不同的 ItemTemplate 吗？

> ID：719972
> 
> 赞同：0
> 
> 时间：2009-04-06T00:50:43.050
> 
> 标签：silverlight, templates

我将 ObservableCollection 绑定到 Silverlight 中的 ListBox。该列表可以包含多个从 DomainObject 派生的 Person 或 Vehicle 对象。我希望能够为 Person 和 Vehicle 提供不同的模板，但将它们都显示在同一个列表中。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T07:27:44.063

DataTemplateSelector 在 silverlight 中不可用，但有一些资源可以展示如何在控件中实现它的示例。

1.  [资源 1](http://www.tozon.info/blog/post/2009/03/15/Dynamic-Data-Forms-for-Silverlight-with-a-Data-Template-Selector-Control.aspx)

2.  [资源 2](http://silverlight.net/forums/t/78702.aspx)

# multithreading - Lua 注册表在新状态下不可见

> ID：719978
> 
> 赞同：0
> 
> 时间：2009-04-06T00:59:23.887
> 
> 标签：multithreading, lua

在从我的 Lua 脚本调用的 C 函数中，我`luaL_ref`用来存储对函数的引用。但是，如果我随后尝试使用返回的整数索引从不是从同一状态派生的不同线程获取该函数，我得到的只是`nil`. 这是似乎可以证明这一点的最简单示例：

```
// Assumes a valid lua_State pL, with a function on top of the stack
int nFunctionRef = luaL_ref(pL, LUA_REGISTRYINDEX);

// Create a new state
lua_State* pL2 = luaL_newstate();
lua_rawgeti(pL2, LUA_REGISTRYINDEX, nFunctionRef);
const char* szType = luaL_typename(pL2, -1); 
```

我发现它`szType`包含值'nil'。

我的理解是注册表在所有 C 代码之间全局共享，所以任何人都可以解释为什么这不起作用？

如果注册表不是以这种方式全局共享的，我怎样才能像我需要的那样从另一个脚本访问我的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-06T04:14:49.830

注册表只是一个 Lua 状态下的普通表，因此两个不相关的 Lua 状态不能访问同一个注册表。

正如 Kknd 所说，您必须提供自己的机制。一个常见的技巧是创建一个不执行任何代码的额外状态，它仅用作存储。在您的情况下，您将从 C 代码中使用该额外状态的注册表。不幸的是，没有可用的方法可以在两个状态之间复制任意值，因此您必须展开任何表。

复制函数特别困难，如果您为此使用注册表，您可能希望跟踪您用于存储它的状态，并在原始状态上执行它，从而有效地将其转换为跨状态调用，而不是的移动功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T01:06:44.710

luaL_newstate() 顾名思义，创建另一个分离状态。注册表仅在“线程”之间共享，使用 lua_newthread(parent_state); 创建

编辑以匹配问题编辑：

您可以在相同的状态下运行脚本，或者，如果您不希望这样，您将需要提供自己的机制来同步两种状态之间的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T15:29:58.270

要使用多个 Lua 宇宙（状态），您可能会发现[Lua Lanes](http://luaforge.net/frs/?group_id=265)值得一看。还有一个多态 Lua 解决方案的粗略[比较。](http://kotisivu.dnainternet.net/askok/bin/lanes/#comparisons)

Lanes 实际上确实提供了 Javier 提到的“隐藏状态”。它还处理访问此类共享数据所需的锁以及等待此类数据更改的能力。它会在您的应用程序状态和隐藏状态之间复制任何可复制的内容（包括函数和闭包）。

# c# - 在贝叶斯垃圾邮件过滤器中计算令牌成为垃圾邮件的概率

> ID：719983
> 
> 赞同：8
> 
> 时间：2009-04-06T01:02:28.357
> 
> 标签：c#, algorithm, bayesian, spam-prevention

我最近写了一个贝叶斯垃圾邮件过滤器，我使用[Paul Graham 的文章 Plan for Spam](http://www.paulgraham.com/spam.html)和[我在 codeproject 上找到的 C# 中的实现](http://www.codeproject.com/KB/recipes/BayesianCS.aspx)作为创建我自己的过滤器的参考。

我刚刚注意到 CodeProject 上的实现使用唯一令牌的总数来计算令牌成为垃圾邮件的概率（例如，如果 ham 语料库总共包含 10000 个令牌但 1500 个 unqiue 令牌，则 1500 用于计算概率为 ngood )，但在我的实现中，我使用了 Paul Graham 的文章中提到的帖子数量，这让我想知道其中哪一个在计算概率时应该更好：

1.  帖子计数（如 Paul Graham 的文章中所述）
2.  唯一令牌总数（在 codeproject 的实现中使用）
3.  令牌总数
4.  包含的令牌总数（即 b + g >= 5 的那些令牌）
5.  包含的唯一令牌总数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-16T19:15:30.783

[Karl-Michael Schneider (PDF) 的这篇 EACL 论文](http://karlmicha.googlepages.com/eacl2003.pdf)说，您应该使用多项模型（即总令牌数）来计算概率。具体计算请参见论文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T09:44:33.883

一般来说，大多数过滤器已经超越了 Graham 论文中概述的算法。我的建议是获取 SpamBayes 源并阅读 spambayes/classifier.py（特别是）和 spambayes/tokenizer.py（特别是顶部）中概述的评论。那里有很多关于已经完成的早期实验的历史，评估这样的决定。

FWIW，在当前的 SpamBayes 代码中，概率是这样计算的（spamcount 和 hamcount 是看到令牌的消息数（任意次数），nham 和 nspam 是消息的总数）：

```
hamratio = hamcount / nham
spamratio = spamcount / nspam
prob = spamratio / (hamratio + spamratio)
S = options["Classifier", "unknown_word_strength"]
StimesX = S * options["Classifier", "unknown_word_prob"]
n = hamcount + spamcount
prob = (StimesX + n * prob) / (S + n) 
```

unknown_word_strength 为（默认）0.45，unknown_word_prob 为（默认）0.5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-10T08:58:17.983

您可以更改代码以使用其他方法吗？然后您可以使用不同的数据集进行测试，并发布结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T15:50:58.253

你可能想看看 PopFile，一个经过时间考验的 perl 实现。它做得很好。我很确定它是开源的，你可以看到他们使用的公式。

# actionscript-3 - Actionscript - 没有参考的变量赋值？

> ID：719987
> 
> 赞同：2
> 
> 时间：2009-04-06T01:07:57.393
> 
> 标签：actionscript-3, variable-assignment

应该很容易。我有一个对象。我想修改它，但在此之前我想保存一份我可以返回的副本。我尝试设置 copy = original 但是当我修改原始属性时，副本也会显示更改。我假设这是因为在您分配的任何时候在 actionscript 中，它实际上只是存储对原始对象的引用。那么我存储原始对象的副本以供以后使用的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T01:36:07.900

您正在寻找的是对象的深层副本，而不是通过引用传递。我在这里找到了答案，它使用了 AS3 中的新 ByteArray 类：

[http://www.kirupa.com/forum/showthread.php?p=1897368](http://www.kirupa.com/forum/showthread.php?p=1897368)

```
function clone(source:Object):* {
 var copier:ByteArray = new ByteArray();
 copier.writeObject(source);
 copier.position = 0;
 return(copier.readObject()); 
```

}

然后你像这样使用它：

```
newObjectCopy = clone(originalObject); 
```

干杯!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T03:33:04.860

```
var newObj:Object = Object(ObjectUtil.copy(oldObj)); 
```

“复制指定的对象并返回对副本的引用。副本是使用本机序列化技术制作的。这意味着在复制期间将尊重自定义序列化。

此方法设计用于复制数据对象，例如集合的元素。它不适用于复制 UIComponent 对象，例如 TextInput 控件。如果要创建特定 UIComponent 对象的副本，可以创建组件的子类并实现 clone() 方法或其他方法来执行复制。”

[http://livedocs.adobe.com/flex/3/langref/mx/utils/ObjectUtil.html#copy()](http://livedocs.adobe.com/flex/3/langref/mx/utils/ObjectUtil.html#copy())

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T01:26:08.907

```
 // duplicate any given Object (not MCs)  
 Object.prototype.copy = function()  
 {  
     ASSetPropFlags(Object.prototype,["copy"],1);  

     var _t = new this.__proto__.constructor(this) //

     for(var i in this){  
         _t[i] = this[i].copy()  
     }  
     return _t  
 }; 
```

用法

```
x = ["1","2","3",[4,5],[{a:1,b:2}]]

y = x.copy()

y[0] = 0

y[3][0]="d"

trace(x)

trace(y) 
```

# c - 什么是知道 C 会让我用任何其他语言编写更好的代码的例子？

> ID：719997
> 
> 赞同：15
> 
> 时间：2009-04-06T01:16:28.760
> 
> 标签：c

在 Stack Overflow 播客中，Joel Spolsky 不断向 Jeff Atwood 抱怨 Jeff 不知道如何用 C 编写代码。他的声明是“了解 C 可以帮助您编写更好的代码”。他还总是使用某种涉及字符串操作的故事，以及了解 C 如何让您用不同的语言编写更有效的字符串例程。

作为一个懂一点 C 但喜欢用 perl 和其他高级语言编写代码的人，我从来没有遇到过可以通过编写 C 来解决的问题。

我正在寻找实际情况的示例，在这些情况下，了解 C 在使用 perl 或 python 等高级/动态语言编写项目时会很有用。

编辑：阅读你们提交的一些答案很棒，但在这方面对我来说仍然没有任何意义：

以 strcat 为例。在 C 语言中组合字符串有正确的方法和错误的方法。但为什么我（作为高级开发人员）应该认为我比 Larry Wall 聪明？为什么语言设计者不能以正确的方式编写字符串操作代码？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-04-06T01:40:57.530

Joel Spolsky 使用的经典示例是关于[strcat 和 strlen 的误用](http://www.joelonsoftware.com/articles/fog0000000319.html)，以及一般情况下发现“Shlemiel thepainter”算法。

并不是说您需要 C 来解决高级语言无法解决的问题，而是充分了解 C 可以让您了解所有这些语言级别下正在发生的事情，从而使您可以编写更好的软件。因为这种观点可以帮助您避免编写您不知道的代码，例如，实际上是 O(n^2)。

**编辑：**基于评论的一些澄清。

知道 C 不是获得此类知识的先决条件，有很多方法可以获取相同的知识。

知道 C 也不能保证这些技能。你可能精通 C 语言，但仍然用你接触过的所有其他语言编写可怕、怪诞、笨拙的代码。

C 是一种低级语言，但它仍然具有现代控制结构和功能，因此您不会总是被繁琐的细节所困扰。如果不掌握某些基础知识（例如内存管理和指针的细节），就很难精通 C，掌握这些基础知识在使用任何语言工作时通常会带来丰厚的回报。

**它总是关于基本面。**

在许多追求以及软件工程中都是如此。让最优秀的程序员成为最优秀的不是秘密咒语，而是对基础知识的更好掌握。经验表明，C 知识往往与掌握某些基础知识具有更高的相关性，而学习 C 往往是获得此类知识的更容易和更常见的途径之一。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-06T10:21:54.470

假设学习 C 会以某种方式自动让您更好地理解低级编程问题是错误的。在很多情况下，甚至 C 的级别都太高了，无法让您很好地理解效率问题。

经典是 i++ 与 ++i。它被过度引用了，所以也许大多数人都知道这两个操作之间对性能的影响。但是学习 C 本身并不会神奇地教给你这个。

我想我理解关于字符串的论点。当字符串操作看似简单时，人们经常以低效的方式使用它们。但同样，知道 strncat 存在并不能让您完全理解效率问题。很多 C 程序员可能甚至没有想过 strncat 必须在内部执行 strlen 操作这一事实。

即使使用 C，如果效率是一个问题，了解幕后发生的事情也很重要。了解 C 的人倾向于以渐进的方式看待事物。汇编和机器代码是 C 的构建块，而 C 是高级语言的构建块。

这并不是特别正确，但很明显，C 比许多高级语言“更接近金属”。这至少有两个影响：效率问题没有隐藏在隐式行为背后，而且更容易搞砸。

所以你想要一个具体的例子来说明知道 C 是如何给你带来优势的。我不认为有一个。我认为人们说这句话的*意思*是，以您正在编写的任何语言了解幕后发生的事情有助于您就如何编写代码做出更明智的决定。然而，假设 C 是 Java 中的“幕后发生的事情”是错误的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T01:19:42.497

很难准确量化，但是对 C 的理解会让您更深入地了解高级语言结构是如何实现的，因此您将能够更好地以智能方式使用这些结构。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T01:27:10.777

给你一个具体的原因：必须编写自己的垃圾收集例程有助于我编写更好的代码。

我认为我从来没有发现过使用高级语言无法解决的问题。但是从学习C开始，它给我灌输了很多优秀的开发实践。了解应用程序流的基本部分如何工作将使您能够查看自己的代码并很好地了解数据的流动方式以及数据的存储位置。然后，这将导致更好地了解如何追踪泄漏的内存、缓慢的磁盘读取、构造不良的缓存等。

跟踪指针......这是另一个想到的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T01:28:22.180

经典示例是涉及较低级别内存管理的事情，例如链表类的实现：

```
struct Node
{
    Data *data;
    Node *next;
} 
```

了解指针如何用于迭代列表，以及它们在机器架构方面的含义将使您更好地理解您的高级代码。

Joel 提到的另一个例子是字符串连接的实现，以及从一组数据创建字符串的正确方法。

```
// this is efficient
for (int i=0; i< n; i++)
{
    strcat(str, data(i));
}

// this could be too, but you'd need to look at the implementation to be sure
std::string str;
for (int i=0; i<n; i++)
{
  str+=data(i);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-06T10:18:23.183

了解 C 可以帮助您用 C 编写更好的代码。我猜 Joel Spolsky 的示例在 C++ 或 Objective-C 中几乎没有用处，其中存在用于操作字符串的特定类并且在设计时考虑了性能。此外，在其他语言中使用 C 技巧可能会提高效率。

尽管如此，C 知识对于理解其他语言中的一般概念以及在许多情况下的幕后内容非常有帮助。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-06T23:28:32.177

**作为一个懂一点 C 但喜欢用 perl 和其他高级语言编写代码的人，我从来没有遇到过可以通过编写 C 来解决的问题。**

**我正在寻找实际情况的示例，在这些情况下，了解 C 在使用 perl 或 python 等高级/动态语言编写项目时会很有用。**

开始编写高级代码很容易，然后想知道它运行缓慢。事实上，编写 perl 或 python 代码的方法有很多，有些方法比其他方法更好（因为效率更高）。如果您知道如何在 perl 或 python 中执行代码的低级细节（两者都是用 C 编写的），您可以围绕几个低效率进行编码——比如知道哪个循环结构更快、如何保留/释放内存等.

此外，在使用 perl 或 python 编写项目时，您有时会遇到性能障碍。该语言的创建者（至少是 Guido）主张您在 C 中实现该部分，作为语言扩展。要做到这一点，你必须知道 C.

所以，那里。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-06T23:59:37.657

出于论证的目的，假设您想连接从 1 到*n*的所有整数的字符串表示形式（例如， *n* = 5 将产生字符串“12345”）。以下是在 Java 中如何天真地做到这一点。

```
String result = "";
for (int i = 1; i <= n; i++) {
    result = result + Integer.toString(i);
} 
```

如果你用 C 尽可能地重写那个代码段（这在 Java 中非常好看），你会得到一些让大多数 C 程序员害怕的东西：

```
char *result = malloc(1);
*result = '\0';
for (int i = 1; i <=  n; i++) {
    char *intStr = malloc(11);
    itoa(i, intStr, 10);
    char *tempStr = malloc(/* some large size */);
    strcpy(tempStr, result);
    strcat(tempStr, intStr);
    free(result);
    free(intStr);
    result = tempStr;
} 
```

因为 Java 中的字符串是不可变的，所以`Integer.toString`会创建一个虚拟字符串，而字符串连接会创建一个新的字符串实例，而不是更改旧的实例。仅通过查看 Java 代码并不容易看出这一点。了解所述代码如何转换为 C 是准确了解所述代码的低效程度的*一种方法。*

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-06T01:40:33.647

你经常使用数组吗？并且您是否遇到过需要将项目存储在内存中而不知道其中有多少的情况（即基于来自数据库的查询？）那么我想 C 会教给您一些很棒的东西，例如堆栈、结构和链接列表，它们可能帮你。问候，安迪

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-06T01:54:27.263

知道C真的不值钱。我们中许多深入了解 C 的人都喜欢认为所有这些深刻的见解都是有价值和重要的。

我们中的一些了解 C 的人想不出一个有助于了解 C 的特定特性。

了解指针在 C 中是如何工作的（尤其是使用 C 的语法）并不是那么有帮助。在高级语言中，您的语句创建对象并管理它们的交互。从假设的角度来看，指针和引用可能很有趣。但是这些知识对你如何使用 Java 或 Python 没有实际影响。

高级语言就是这样。知道*如何*不会改变那些语言；它不会改变您使用、调试或测试它们的方式。

知道如何创建或操作链表对 Python 列表类定义没有实际影响。没有任何。

了解链表和数组列表之间的区别可能有助于您编写 Java 程序。但是 C 实现并不能帮助您在 Linked List 和 Array List 之间进行选择。该决定与知道 C 无关。

糟糕的算法在每种语言中都是糟糕的。了解 C 的内在奥秘不会让糟糕的算法变得更糟糕。了解 C 并不能帮助您了解 Java 集合或 Python 内置类型。

我看不出学习 C 有什么价值。学习 Fortran 也同样有价值。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-06T23:01:59.557

从技术上讲，C 的所有缺陷都会迫使您围绕它们编写代码；让你编写更多代码 -> 让你更有经验。例如，由于缺少任何大于 32 位的可移植整数，C 过去让我编写了自己的 bignum 库。

缺乏隐式内存、资源和错误管理（垃圾收集、RAII、自动调用的构造函数/析构函数，可能还有异常）迫使 C 用户编写大量初始化、错误处理和清理代码。可能只是我，但我从不厌倦编写这样的代码。我去阅读我调用的每个外部函数的文档，返回我的代码并检查每个返回值和其他指示失败的东西。它甚至让我感到安全！

最后一点可能是支持该论点的最重要的一点。在开始分析每种语言中遇到的每个变量的生命周期之前，您只能编写这么多 malloc()/free() 对！C++ 的自动存储对象也无济于事。

编写真正可移植的 C 代码通常需要程序员摆脱对主机系统的许多假设——想想 sizeof()、CHAR___BITS、unsigned long、UINT_MAX。虽然这并没有帮助我用其他语言编写更好的代码，但它帮助我思考了可能的替代实现：一个微型微处理器如何仍然可以运行我的 C 代码，为我的简单单行语句生成大量 RISC 指令。（那是另一回事；在我的脑海中，没有多少其他语言能如此轻松地与给定的汇编语言相互映射。再说一次，这可能就是我。）

当然，这些论点中没有一个只适用于 C。@S.Lott 有一个有效的观点——Fortran 可能是一个同样好的选择。但是周围有很多 C 代码！从上到下的整个个人计算机系统——应用程序到库到驱动程序再到内核——都可以在 C 源代码中获得。如果你看不懂它，那就太浪费了。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-04-09T19:38:10.353

我认为了解*一些*低级语言是值得的，选择 C​​有*务实的理由：*

*   它是低级的，接近汇编程序
*   它很普遍

了解整个堆栈很有价值。有时你需要调试一些东西的胆量。有时，如果没有底层知识，您就无法解决性能问题（通常情况*并非*如此，例如，当性能问题纯粹是算法问题时，但*有时*确实如此）。

为什么*C*被广泛认为是典型的“堆栈底部”，而不是其他一些语言？我认为这是因为 C 是一种低级编程语言，*而* **C 赢得了**. 现在已经有一段时间了，但 C 并不总是那么占主导地位。举一个著名的例子，Common Lisp（它有自己的编写低级代码的方式）的支持者希望他们的语言也能流行起来，但最终还是[失败了](http://www.jwz.org/doc/worse-is-better.html)。

以下通常在 C 中实现：

*   操作系统（Unix 变体、Windows、许多嵌入式操作系统）
*   高级编程语言（Java、Python 等的许多流行实现）
*   （显然）大量流行的开源项目

我不是硬件专家，但我认为 C 语言也对 CPU 设计产生了重大影响。

因此，如果您相信了解整个堆栈，那么从务实的角度来看，学习 C 是最佳选择。

As a caveat, I think it's worth learning assembler, as well. Although C is close to the metal, I didn't fully understand C until I had to do some assembler. It is occasionally helpful to understand how functions calls are actually performed, how `for` loops are implemented, etc. Less important, but also useful, is having to (at least once) deal with a system without virtual memory. When using C on Windows, Unix, and certain other operating systems, even humble `malloc` does a lot of work under the covers that is easier to appreciate, debug and/or tune if you've ever had to deal with manually locking and unlocking memory regions (not that I would recommend doing so on a regular basis!)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-06T01:34:31.323

我是这样看的，一切都归结为跨平台级别的 C，并以特定于平台的方式组装。所以这就像成为一名越野拉力赛车手，而 C 是基本的汽车机械师，你可以成为一名出色的车手，但是当你遇到麻烦时，知道 C 意味着你可能会让自己重新回到比赛中，否则你会被困在打电话给机械师. 组装是机械师和制造商所知道的，如果这是您想做的事情，这是一项值得投资的事情，否则您可以信任机械师。

具体考虑内存管理、硬件驱动程序、物理引擎、高性能 3D 图形、TCP 堆栈、二进制协议、嵌入式软件、创建 Perl 等高级语言

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-06T11:10:43.027

您不能在 Perl 中编写操作系统内核；C 将是一个更好的选择，因为它足够低级来表达内核应该做的所有事情，并且足够便携，可以让您将内核移植到不同的体系结构

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-04-06T14:45:38.410

了解 C 并不是能够有效使用高级语言的必要条件，但它肯定可以帮助人们大致了解计算机和软件的工作原理——我认为这类似于断言了解一些汇编语言或计算机体系结构/硬件逻辑（和/或/与非门等）可以帮助 C 程序员成为更好的程序员。

有时，为了解决一个问题，了解你正在做的事情“下面”是如何工作的会有所帮助。

我不认为这意味着程序员*必须*了解 C 才能成为一名优秀的程序员，但我认为了解 C 对几乎所有程序员都有帮助。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-04-06T15:36:20.767

不太了解 Perl，我想知道现在是否可以将处理器负载分配到多个物理内核，在 Perl 的单个程序中创建多个线程，而无需产生额外的进程

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-04-06T19:25:04.027

我认为不可能有任何具体的例子。

学习 C 对你的帮助是让你对计算机（和软件）的工作方式有一个洞察力，拓宽你的思维方式。这是一个非常抽象的东西..

它不会让你在 python 中编写更好的代码，它只会让你更像一个计算机科学家。

Wedge 提到 Joel 提到画家 Shlemiel 的文章很有趣，但与此无关。该算法不以任何特定方式与 C 绑定（尽管它以空字符结尾的字符串表现出来）。

Python的字符串无论如何都是不可变的，并且与C的字符串模型完全不同，所以我不太明白这种关系。

我想一个具体的例子是优化解析器或词法分析器或一直写入字符串缓冲区的程序。如果您使用普通字符串而不是字符串缓冲区，则在构建非常大的字符串时会遇到问题。

考虑一下：

```
a = a + b 
```

复制`a`和`b`。它不会更改 a 引用的字符串，它会创建一个新字符串，分配更多内存等。

如果`a`变得相当大，并且你不断地添加一些小东西，那么画家施莱米尔就会表现出来。

但是话又说回来，知道这与了解 C 无关，只知道您的语言如何在低级别实现事物。（这就是拥有 C 语言经验的地方会对您有所帮助）。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-04-06T23:11:46.757

在 Python 中，假设你有一个函数

```
def foo(l=[])
  l.append("bar")
  return l; 
```

在大约一年前可用的某个 Python 版本上，运行 foo() 多次，您会得到一个非常有趣的结果（即`["bar","bar","bar","bar]`）。

似乎有人将默认参数实现为静态变量（并且没有重置它），因此发生了意想不到的结果。

也许我的例子是人为的——我的一个真正喜欢 Python 的朋友发现了这个特殊的错误，但事实是所有这些语言都是用 C 或 C++ 实现的。不了解和不理解基础语言的基础概念意味着您不会深入了解基于此构建的语言。

我发现所有“为什么要麻烦 C/C++/ASM 问题很傻”。如果你足够倾向于学习一门语言，那意味着你有足够的好奇心首先进入它。为什么停在 C 之前？

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-04-06T23:26:47.877

了解 C 非常棒，因为它在你背后没有任何作用（GC、边界检查等）。它也只做你告诉它的事情。没有任何暗示。甚至 C++ 也做了一些你不会用 RAII 告诉它的事情（当然，这暗示对象在超出范围时会被破坏，但你实际上并没有写出来）。C 是了解计算机“幕后”发生的事情的好方法，而无需编写汇编。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-04-06T23:45:09.970

低效的代码（例如字符串+= 的循环）在任何语言中通常都是低效的。如果有人解释为什么用一种语言或另一种语言效率低下，会有什么不同？知道 C 但没有意识到方法效率低下，这与知道 python 却没有意识到这一点没有什么不同。***************