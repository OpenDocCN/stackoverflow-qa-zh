# StackOverflow 问答 10468000-10468999

# java - 如何使用 Java Swing 创建这个特殊的菜单栏？

> ID：10468008
> 
> 赞同：5
> 
> 时间：2012-05-06T04:06:21.433
> 
> 标签：java, swing, icons, jmenu, jmenuitem

我正在尝试使用 Swing 实现这种类型的菜单。是否有现成的解决方案（免费和/或商业）？

![http://i.stack.imgur.com/iwtQf.png](../Images/70ea8560dd93c6ea6a2475d83ad02030.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-06T04:27:15.573

假设您想要菜单上的图像，为什么不这样呢？

```
BufferedImage image = ImageIO.read(url);

yourJMenu.setHorizontalTextPosition(SwingConstants.CENTER);
yourJMenu.setVerticalTextPosition(SwingConstants.BOTTOM);

yourJMenu.setIcon(new ImageIcon(image)); 
```

* * *

**编辑：** 似乎您要求从头开始。

在阅读此答案之前，请参阅：[如何使用菜单。](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html)

* * *

**编辑 2**：这是一个[SSCCE](http://sscce.org/)，

```
import java.awt.image.BufferedImage;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.SwingConstants;

public class MenuTest {

    public static void main(String[] argv) throws Exception {
        // Create the menu bar
        JMenuBar menuBar = new JMenuBar();

        String imageURL = "http://blogs.discovermagazine.com/" +
            "drone360/wp-content/themes/discoverblog/images/" +
            "gear_icon.png";

        // Create a menu
        JMenu menu = new JMenu("Menu");
        BufferedImage image = ImageIO.read(new URL(imageURL));
        menu.setHorizontalTextPosition(SwingConstants.CENTER);
        menu.setVerticalTextPosition(SwingConstants.BOTTOM);
        menu.setIcon(new ImageIcon(image));
        menuBar.add(menu);

        // Create a menu item
        JMenuItem item = new JMenuItem("Test Item");

        menu.add(item);

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.setJMenuBar(menuBar);
        frame.setSize(500, 550);
        frame.setVisible(true);
    }
} 
```

资源礼貌： http: [//pscode.org/media/](http://pscode.org/media/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T13:01:09.017

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JCheckBoxMenuItem;
import javax.swing.JRadioButtonMenuItem;
import javax.swing.ButtonGroup;
import javax.swing.JMenuBar;
import javax.swing.KeyStroke;
import javax.swing.ImageIcon;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JScrollPane;
import javax.swing.JFrame;

/* MenuLookDemo.java requires images/middle.gif. */
/*
 * This class exists solely to show you what menus look like.
 * It has no menu-related event handling.
 */
public class MenuLookDemo {
    JTextArea output;
    JScrollPane scrollPane;
    public JMenuBar createMenuBar() {
        JMenuBar menuBar;
        JMenu menu, submenu;
        JMenuItem menuItem;
        JRadioButtonMenuItemMenuItem;
        JCheckBoxMenuItem cbMenuItem;
        //Create the menu bar.
        menuBar = new JMenuBar();
        //Build the first menu.
        menu = new JMenu("A Menu");
        menu.setMnemonic(KeyEvent.VK_A);
        menu.getAccessibleContext().setAccessibleDescription("The only menu in this program that has menu items");
        menuBar.add(menu);
        //a group of JMenuItems
        menuItem = new JMenuItem("Av text-only menu item", KeyEvent.VK_T);
        //menuItem.setMnemonic(KeyEvent.VK_T); //used constructor instead
        menuItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_1, ActionEvent.ALT_MASK));
        menuItem.getAccessibleContext().setAccessibleDescription("This doesn't really do anything");
        menu.add(menuItem);
        ImageIcon icon = createImageIcon("middle.gif");
        menuItem = new JMenuItem("Both text and icon", icon);
        menuItem.setMnemonic(KeyEvent.VK_B);
        menu.add(menuItem);
        menuItem = new JMenuItem(icon);
        menuItem.setMnemonic(KeyEvent.VK_D);
        menu.add(menuItem);
        //a group of radio button menu items
        menu.addSeparator();
        ButtonGroup group = new ButtonGroup();
        rbMenuItem = new JRadioButtonMenuItem("A radio button menu item");
        rbMenuItem.setSelected(true);
        rbMenuItem.setMnemonic(KeyEvent.VK_R);
        group.add(rbMenuItem);
        menu.add(rbMenuItem);
        rbMenuItem = new JRadioButtonMenuItem("Another one");
        rbMenuItem.setMnemonic(KeyEvent.VK_O);
        group.add(rbMenuItem);
        menu.add(rbMenuItem);
        //a group of check box menu items
        menu.addSeparator();
        cbMenuItem = new JCheckBoxMenuItem("A check box menu item");
        cbMenuItem.setMnemonic(KeyEvent.VK_C);
        menu.add(cbMenuItem);
        cbMenuItem = new JCheckBoxMenuItem("Another one");
        cbMenuItem.setMnemonic(KeyEvent.VK_H);
        menu.add(cbMenuItem);
        //a submenu
        menu.addSeparator();
        submenu = new JMenu("A submenu");
        submenu.setMnemonic(KeyEvent.VK_S);
        menuItem = new JMenuItem("An item in the submenu");
        menuItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_2, ActionEvent.ALT_MASK));
        submenu.add(menuItem);
        menuItem = new JMenuItem("Another item");
        submenu.add(menuItem);
        menu.add(submenu);
        //Build second menu in the menu bar.
        menu = new JMenu("Another Menu");
        menu.setMnemonic(KeyEvent.VK_N);
        menu.getAccessibleContext().setAccessibleDescription("This menu does nothing");
        menuBar.add(menu);
        return menuBar;
    }
    public Container createContentPane() {
        //Create the content-pane-to-be.
        JPanel contentPane = new JPanel(new BorderLayout());
        contentPane.setOpaque(true);
        //Create a scrolled text area.
        output = new JTextArea(5, 30);
        output.setEditable(false);
        scrollPane = new JScrollPane(output);
        //Add the text area to the content pane.
        contentPane.add(scrollPane, BorderLayout.CENTER);
        return contentPane;
    }
    /** Returns an ImageIcon, or null if the path was invalid. */
    protected static ImageIcon createImageIcon(String path) {
        java.net.URL imgURL = MenuLookDemo.class.getResource(path);
        if (imgURL != null) {
            return new ImageIcon(imgURL);
        } else {
            System.err.println("Couldn't find file: " + path);
            return null;
        }
    }
    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
    * event-dispatching thread.
     */
     private static void createAndShowGUI() {
         //Create and set up the window.
        JFrame frame = new JFrame("MenuLookDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //Create and set up the content pane.
        MenuLookDemo demo = new MenuLookDemo();
        frame.setJMenuBar(demo.createMenuBar());
        frame.setContentPane(demo.createContentPane());
        //Display the window.
        frame.setSize(450, 260);
        frame.setVisible(true);
    }
    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

# c# - 添加应用程序清单以确保在 windows xp、vista 和 7 中提升权限的可靠性如何？

> ID：10468010
> 
> 赞同：2
> 
> 时间：2012-05-06T04:06:47.600
> 
> 标签：c#, .net, windows, manifest, elevated-privileges

这种确保我的管理应用程序在启动时请求管理员权限的方法有多稳定：

`<requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" />
</requestedPrivileges>`

这在 Windows 7 上运行良好，但我无法访问 XP 和 Vista，所以无法判断。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:49:38.750

Windows XP 不处理requestedPrivileges 节点，也没有任何类型的UAC 机制。

UAC 和设置请求的执行级别的能力都是在 Windows Vista 中引入的。

* * *

Windows XP 的标准帐户严格来说就是这样，并且没有提升机制来执行管理任务，除非再次登录。

因此，处理因缺少 XP 权限而导致的错误的最佳实践就是显示有意义的错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T09:16:05.143

通过指定该清单，您可以告诉 Windows（Vista 或 7），如果标准用户（管理员以及启用了 UAC 的用户）尝试执行此应用程序，则应出现 UAC 提示。如果没有提升，此应用程序将无法按预期工作。

Windows Vista 和 Windows 7 都可以正确处理这个问题，这就是 UAC 的设计原因。

对于 Windows XP，标准用户需要手动使用 runas 以管理员身份执行您的应用程序，而管理员用户可以直接运行它。Windows XP 上没有 UAC，它回退到 Windows 开发人员长期熟悉的旧行为。

要测试 Windows XP，您应该使用 Windows XP 模式，[http://www.microsoft.com/windows/virtual-pc/download.aspx](http://www.microsoft.com/windows/virtual-pc/download.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T07:37:16.677

是的，该清单可确保属于 Administrators 组的用户在接受 UAC 提示时在 Vista 上得到适当的提升。

它不做的是给*不*属于该组权限的用户。就像在 XP 中完成的方式一样，在以后的版本中也是如此。站点管理员可能会为用户提供受限帐户。没关系，他们肯定不应该运行你的程序。管理员不希望他们这样做。请检查您是否给出了合理的诊断。WindowsPrincipal.IsInRole(WindowsBuiltInRole.Administrator) 允许您检查 .NET。

# php - 提取 twitter 配置文件头信息

> ID：10468011
> 
> 赞同：0
> 
> 时间：2012-05-06T04:06:51.290
> 
> 标签：php

需要一些帮助来使用 php 从 twitter 中检索信息+个人资料图片，例如，我想提取一些公共 twitter 个人资料的个人资料信息

[https://twitter.com/#!/NatureMagazine](https://twitter.com/#!/NatureMagazine)

如果你去链接这是信息，

*自然杂志@NatureMagazine 国际科学周刊。研究范围在这里。有关新闻/评论，请参阅@NatureNews。（来自@noahWG 或@roobina 的大多数推文）*

我有 CURL 功能，所以获取页面的源不是问题。任何帮助表示赞赏。谢谢

Facebook 分享示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:17:09.967

我建议您检查 twitter API：[https ://dev.twitter.com/docs](https://dev.twitter.com/docs)

例如，如果您想以最大格式获取@NatureMagazine 的个人资料图片：

[https://api.twitter.com/1/users/profile_image?screen_name=naturemagazine&size=bigger](https://api.twitter.com/1/users/profile_image?screen_name=naturemagazine&size=bigger)

# gwt - “GWT 2.4 - 费用示例”的运行时错误

> ID：10468012
> 
> 赞同：0
> 
> 时间：2012-05-06T04:07:01.243
> 
> 标签：gwt

我正在使用 Eclipse Indigo for Java EE（并且我已经安装了 m2e 插件）。

启动 GWT 2.4 提供的“费用”示例时出现运行时错误。我启动它，加载应用程序，然后绘制界面并在控制台出现此错误后：

```
Logging to JettyLogger(null) via com.google.apphosting.utils.jetty.JettyLogger
Successfully processed D:\DL\000-code2012\0-ALL-SRC\6-Expenses\src\main\webapp\WEB-INF/appengine-web.xml
Successfully processed D:\DL\000-code2012\0-ALL-SRC\6-Expenses\src\main\webapp\WEB-INF/web.xml
The server is running at http://localhost:8888/
log4j:WARN No appenders could be found for logger (org.hibernate.validator.util.Version).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
Sat May 05 12:03:40 BOT 2012 com.google.gwt.sample.expenses.client.ExpensesShell
SEVERE: One or more exceptions caught, see full set in UmbrellaException#getCauses
com.google.web.bindery.event.shared.UmbrellaException: One or more exceptions caught, see full set in UmbrellaException#getCauses
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext$StandardPayloadDialect.processPayload(AbstractRequestContext.java:299)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext$4.onTransportSuccess(AbstractRequestContext.java:951)
    at com.google.web.bindery.requestfactory.gwt.client.DefaultRequestTransport$1.onResponseReceived(DefaultRequestTransport.java:136)
etc...... 
```

*   首先，为了成功编译项目，我必须快速修复 POM.xml 中的 2 个错误（无法从 2 个存储库下载文件……所以我不得不忽略它们）。
*   然后，如果是因为我没有 maven 的“buildhelper”插件，我就是找不到它（我用 Maven > Discovery > Catalog 尝试过）...
*   我还为注释处理正确配置了（我想）java编译器。
*   最后，当我清理或编译项目时，出现此错误（发生问题）：

无法运行程序“C:\glassfish3\jdk7\bin\javaw.exe”（在目录“D:\DL\000-code2012\0-ALL-SRC\6-Expenses”中）：CreateProcess 错误=206，文件名或扩展名太长无法运行程序“C:\glassfish3\jdk7\bin\javaw.exe”（在目录“D:\DL\000-code2012\0-ALL-SRC\6-Expenses”中）：CreateProcess 错误=206，文件名或扩展太长

单击“详细信息”时会写入两次

有人可以解决这个问题吗？谢谢你。

# css - IE8 问题 - 在其他浏览器上看起来不错

> ID：10468014
> 
> 赞同：0
> 
> 时间：2012-05-06T04:07:22.293
> 
> 标签：css, internet-explorer-8

这在 IE9、Firefox 和 Chrome 中看起来很棒，但在 IE8 中，这一切看起来都很棒。关于这个有什么想法吗？我在 WordPress 上使用论文主题。我正在使用 custom.css 进行编辑。

我的网站是：[http ://www.7637olympia.com/](http://www.7637olympia.com/)

您能否建议如何使其与 IE8 以及其他浏览器一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T04:18:51.293

要在 IE 中模拟 RGBA 和 HSLA 背景，可以使用渐变滤镜，具有相同的开始和结束颜色（alpha 通道是 HEX 值中的第一对）：

```
filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#4cffffff', endColorstr='#4cffffff'); 
```

或使用`.png`大小为 1x2 的图像而不是 1x1。

因为当页面上的任何其他元素对 alpha 透明度使用“-ms-filter”指令时，Internet Explorer 8 无法正确执行 1x1 像素半透明背景图像的重复

[看到这个链接](http://nemesisdesign.net/blog/coding/ie8-1x1px-semi-transparent-background-bug/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T06:03:54.747

我认为从 IE7 开始，支持 css 规则`filter:alpha(opacity=x);`以避免使用半透明 png。不是这样吗？

在您的站点中，您将使用：

```
.custom #page {
    background-color: #000;
    filter:alpha(opacity=50);
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 10px 10px 10px 10px;
    padding-top: 5px;
} 
```

据我了解，IE 会忽略 rgba 值并使用两个更高的规则来获得类似的效果。

在元素上使用不透明度（在较新的浏览器中也是如此）的一个缺点是它将其设置为整个元素，而不仅仅是背景颜色，因此所有文本和边框等都是半透明的。但我至少会尝试上述方法，看看它是否足够接近。

请记住：人们不升级到更高版本的 IE（或迁移到 FF 或 Chrome）的唯一原因是因为我们竭尽全力确保设计在这些过时的浏览器中看起来不错。如果有足够多的网站看起来像狗屎，他们最终会认为这不是网站，而是他们的旧浏览器。因此，不要浪费太多时间和精力来支持从 IE 迎合旧时代的糟糕过渡已经过慢的过渡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T04:14:17.617

IE8 不支持 rgba 颜色。如果您希望它在 IE8 中工作，请创建一个具有相同不透明度的小 png（1x1 像素以外的任何其他大小）并将其作为背景应用到 div。或者，您可以使用仅限 IE8 的样式表并设置除白色以外的其他背景颜色。

# django - Django NameError：未定义名称“模型”

> ID：10468019
> 
> 赞同：2
> 
> 时间：2012-05-06T04:08:01.043
> 
> 标签：django

我有一个用 python 编写的小应用程序。对一些 web 框架做了一些研究，并决定使用 django。我正在阅读手册并一步一步地学习，但是我被困在第 19 页给出的示例上。当我输入命令时，我得到了错误。

```
import datetime
from django.utils import timezone
# ...
class Poll(models.Model):
# ...
    def was_published_recently(self):
        return self.pub_date >= timezone.now() - datetime.timedelta(days=1) 
```

错误：

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
NameError: name 'models' is not defined 
```

我用谷歌搜索“Django NameError：”并没有找到太多。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T04:17:55.617

你不小心错过了整个`import`for `models`。

```
from django.db import models 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-05T01:33:17.107

当您错过拼写内容时会出现此错误的另一个实例 :) 像 Models.Model 而不是 models.Model。很烦人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-04T21:39:17.550

在表单中意外使用 models.CharField 而不是使用 forms.CharField 时出现此错误

# ruby - 用句子库匹配关键词，如何避免结果中出现重复的关键词？

> ID：10468020
> 
> 赞同：0
> 
> 时间：2012-05-06T04:08:19.707
> 
> 标签：ruby, database

我对编程非常陌生，并且是 Ruby 的初学者。我做了很多搜索以尝试找到我需要的答案，但似乎没有什么能与我正在寻找的东西相匹配。

我需要制定一个工作计划，它将：

1.  从用户那里获取关键字
2.  将这些关键字与句子数据库中的相同关键字匹配，然后
3.  吐出随机句子：
    1.  包含所有关键字 1 次
    2.  不包含未列出的关键字
    3.  不要重复关键字

重要提示：句子都有几个关键字的组合，而不是每个句子一个

1和2没问题，我已经能够做到了。我的问题出在第 3 部分。我尝试过一长串“如果包含？” 参数，但它永远不会工作，我知道必须有更好的方法来做到这一点。

我对 Ruby（和一般编程）的掌握是基本的，我真的不知道它可以做什么和不能做什么，因此非常感谢任何关于哪些功能有用的提示或提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T05:42:02.933

如果找到匹配项，为什么不连续将其从数组/数据库中弹出？它将确保没有重复，因为该记录不会出现以供以后匹配。不？考虑这个片段：

```
db=%q(It is hot today), %q(It is going to rain), %q(Where are you, sonny?), %q(sentence contains is and are)
keyw=%w(is am are)
de=[]
keyw.each do |word|
    for index in 0...db.length  
        if db[index].include?(word)    
            puts "Matched #{word} with #{db[index]}"      
            de<<index
        end  
    end  
    until de.empty?
        db.delete_at(de.pop)
    end
end 
```

db 是数据库示例，keyw 包含关键字。

对应输出：

```
Matched is with It is hot today
Matched is with It is going to rain
Matched is with sentence contains is and are
Matched are with Where are you, sonny? 
```

没有重复。:)

# javascript - Design.io 无法热推代码

> ID：10468021
> 
> 赞同：0
> 
> 时间：2012-05-06T04:08:32.683
> 
> 标签：javascript, node.js, hotdeploy

尝试将 design.io 与 node.js Express 一起使用以将 css/javascript 热推送到浏览器中，我克隆了示例[https://github.com/viatropos/design.io-example](https://github.com/viatropos/design.io-example) 并且无法将其热部署后

1.  按照[https://github.com/viatropos/design.io-example/README.md中的说明进行操作](https://github.com/viatropos/design.io-example/README.md)

    shell-1-project-dir> design.io --watch ./src

    错误：未知选项 `--watch'

2.  [按照https://github.com/viatropos/design.io/README.md](https://github.com/viatropos/design.io/README.md)上的说明进行操作

    shell-1-project-dir> design.io 开始

    shell-2-project-dir> design.io watch

    [2012 年 5 月 6 日星期日 03:52:04 GMT] INFO 更新视图/.index.jade.swp

    [2012 年 5 月 6 日星期日 03:52:04 GMT] INFO 更新视图/index.jade

    [2012 年 5 月 6 日星期日 04:03:11 GMT] INFO 更新视图/.index.jade.swp

    [星期日，2012 年 5 月 6 日 04:03:11 GMT] 信息更新意见/index.jade

    这样做，我无法访问[http://localhost:4181/](http://localhost:4181/)因为 node.js 没有启动。我必须改为启动 node.js。

    shell-1-project-dir> 节点 server.js

    但是，这不会热推更改的 index.jade 文件。

好像这个例子已经过时了？

如何热部署？

环境：

```
 OSX-LION
 node 0.6.15 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T05:24:52.017

首先，您可以让您的节点服务器在不同的终端窗口中运行（您不需要运行 design.io 服务器或节点服务器，只要它们在不同的端口上，您可以同时运行它们） .

其次，我不认为这能达到你想要的效果。Design.io 似乎用于注入对静态客户端文件（如样式表和 javascript 文件）所做的更改。你更改了一个 .css 文件，design.io 看到更改并将其广播到浏览器，浏览器中的 design.io 强制重新加载样式表，完成更改的热推送。

Jade 文件是另一回事，它们需要在发送到浏览器之前由解释器处理（浏览器不理解jade 文件）。Design.io 将看到更改，但无法对此做任何事情，因为 Node.js 需要处理新文件并向浏览器发送更新的响应。这样做的唯一方法是刷新浏览器页面（从而发送新请求），这并不是真正的热交换。

# c - Malloc中操作系统之间的不同结果

> ID：10468022
> 
> 赞同：0
> 
> 时间：2012-05-06T04:08:42.187
> 
> 标签：c, windows, malloc, mingw

我尝试像树一样创建 BFS。我做了树并将孩子排队。

我在这里写了代码[https://github.com/cengek/CKDatastruct](https://github.com/cengek/CKDatastruct)。

但奇怪的是，当我使用 Windows 和 MinGW 编译它的朋友时，它返回错误。它不会发生在 OSX 和 Linux 中。

我的朋友说当我使用 malloc 时它变成了错误。

我不知道出错的具体代码在哪里，但我认为它在这里

这是我将树的孩子放入队列的部分

```
 while (isEmpty(antrianNodes) != 1) {

        //tampilkan isinya
        printf("%c,", antrianNodes.first->paket.s->c);

        simpul * now = antrianNodes.first->paket.s;

        simpul * nodePertama = now;

        //jika punya anak
        //masukkan child dari node alamat di queue ke dalam queue sekarang

        if(now->child != NULL){
            simpul * nowchild = now->child;

            //jika punya saudara
            if(nowchild->sibling != NULL){

                //looping memasukkan anak-anak
                while (nowchild->sibling != now->child) {
                    add(&antrianNodes, nowchild);
                    nowchild = nowchild->sibling;
                }
                //masukkan yang terakhir
                add(&antrianNodes, nowchild);
            }else{
                //tak punya saudara masukkan saja satu
                add(&antrianNodes, nowchild);
            }
        }

        del(&antrianNodes);
    } 
```

并在这里将孩子添加到队列中，以便我可以处理它。它做孩子的打印。

```
void add(queue *Q, simpul *s){
elemen * baru = (elemen *) malloc(sizeof(elemen));
baru->paket.s = (simpul *) malloc(sizeof(simpul));
baru->paket.s = s;
baru->next = NULL;
if(isEmpty(*Q) == 1){
    (*Q).first = baru;
    (*Q).last = baru;

}else{
    (*Q).last->next = baru;
    (*Q).last = baru;
}

(*Q).jumlahElemen++; 
```

}

我认为这是队列和树的普通代码。

老实说，我不知道确切的部分在哪里，因为它在每个操作系统中都有奇怪的不同，我尝试在 ideone 中编译它并给出正确的结果，如[http://ideone.com/vVNOe](http://ideone.com/vVNOe)

我朋友说windows的错误是这样的

```
Problem signature:
Problem Event Name: APPCRASH
Application Name:   main.exe
Application Version:    0.0.0.0
Application Timestamp:  4fa665b6
Fault Module Name:  main.exe
Fault Module Version:   0.0.0.0
Fault Module Timestamp: 4fa665b6
Exception Code: c0000005
Exception Offset:   000015e0
OS Version: 6.1.7601.2.1.0.256.48
Locale ID:  1033
Additional Information 1:   0a9e
Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
Additional Information 3:   0a9e
Additional Information 4: 0a9e372d3b4ad19135b953a78882e789

Read our privacy statement online:
http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409

If the online privacy statement is not available, please read our privacy statement offline: 
```

C:\Windows\system32\en-US\erofflps.txt

每个操作系统都执行不同的malloc吗？还是只是我的代码出错了？

最好的问候吉里普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T05:04:06.560

我不确定这是否是您的问题的原因，但可能是。在`add()`您分配一个新的`simpul`并将该指针放入 a`paket`中，但随后您立即用作为参数传递给的指针覆盖该指针`add()`：

```
baru->paket.s = (simpul *) malloc(sizeof(simpul));
baru->paket.s = s; 
```

但我不确定。

* * *

此外，您的`makeTree()`函数需要初始化`child`根节点的成员：

```
baru->child=NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:45:35.493

哦，我的上帝，答案是我忘记了`baru->child = NULL`。

这就是问题所在，因为计算机认为新的孩子不是 NULL。也许在 Windows 中，它会为新分配创建随机内存地址，而 OSX 或 Linux 会自动将其设置为 NULL。

谢谢你们试图回答我的问题

最好的问候吉里

# audio - 在网站上播放音频文件以进行通知的最简单方法是什么？

> ID：10468028
> 
> 赞同：1
> 
> 时间：2012-05-06T04:11:06.040
> 
> 标签：audio, web, notifications

它必须适用于 IE8 及更高版本，以及其他现代浏览器（Firefox、Chrome、Opera）。

相关问题： [如何在网站上播放通知声音？](https://stackoverflow.com/questions/10105063/how-to-play-a-notification-sound-on-websites)

我试过使用 Yahoo! 媒体播放器，但它拒绝接收我的 .mp3 链接，尽管它们看起来像：

```
<a id="wolf-blue" href="/Public/audio/wolf.mp3">a</a> 
```

假设我有一个 .mp3 文件，并且我想在计时器达到 0 时播放它，你建议我用什么来播放这个声音文件？我不想向我的用户展示任何类型的播放器 UI，只是播放声音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:14:53.053

您需要查看[jPlayer](http://jplayer.org/)。它是一个 HTML5 音频播放器，在不支持 HTML5 的浏览器中回退到 Flash。

您可以使用 CSS 完全自定义播放器，包括将其隐藏。

# javascript - 为什么 jslint 抱怨我的空间？

> ID：10468030
> 
> 赞同：2
> 
> 时间：2012-05-06T04:11:54.917
> 
> 标签：javascript, jslint

这可能不是一个好问题，但我还是要问...

所以..我通常写一个这样的函数

```
function name( param1, param2 )
{
} 
```

不知何故，jslint 抱怨 ( 和 param1.

这真的是个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T04:12:54.060

不，空格在 Javascript 中并不重要。但是，大多数人编写的代码后面没有空格`(`，而 jslint 只是建议您遵循相同的约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T04:23:50.827

jQuery 使用这种风格，括号和参数之间有空格。这只是风格和可读性的问题。最后，这一切都归结为个人喜好，我只是关闭了 jslint 中的那个“功能”，以及许多其他功能。

# c# - 在 C# 中使用 For 循环和字符串组合填充字符串数组

> ID：10468038
> 
> 赞同：0
> 
> 时间：2012-05-06T04:13:10.110
> 
> 标签：c#, arrays, string, for-loop

我有一个字符串数组，定义为`String[] sEmails;`我试图用 10 个不同（但相似）的字符串（在这种情况下为电子邮件地址）填充。

这是我试图用来填充数组的代码。

```
public void populateEmailArray()
    {
        for (int x = 0; x < 10; x++)
        {
            switch(x)
            {
                case 1:
                    sEmails[x] = sRepStuff + "1" + sGmail; 
                break;
                case 2:
                    sEmails[x] = sRepStuff + "2" + sGmail;
                break;
                case 3:
                    sEmails[x] = sRepStuff + "3" + sGmail;
                break;
                case 4:
                    sEmails[x] = sRepStuff + "4" + sGmail;
                break;
                case 5:
                    sEmails[x] = sRepStuff + "5" + sGmail;
                break;
                case 6:
                    sEmails[x] = sRepStuff + "6" + sGmail;
                break;
                case 7:
                    sEmails[x] = sRepStuff + "7" + sGmail;
                break;
                case 8:
                    sEmails[x] = sRepStuff + "8" + sGmail;
                break;
                case 9:
                    sEmails[x] = sRepStuff + "9" + sGmail;
                break;
            }
        }
    } 
```

最终结果我想成为这样的东西

`sEmails['repstuff1@gmail.com','repstuff2@gmail.com','repstuff3@gmail.com']`等等等等到 repstuff9@gmail.com

但是在尝试设置的第一次尝试时，`sEmails[x]`它给了我一个错误“NullReferenceException 未处理。对象引用未设置为对象的实例。”

我不知道我在这里做错了什么，因为代码在我看来是合理的。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T04:19:01.553

尝试使用实例化您的数组

```
String[] sEmails = new String[10]; 
```

您还可以使该循环更加简洁：

```
public void populateEmailArray()
{
    for (int x = 0; x < 10; x++)
    {

        sEmails[x] = sRepStuff + x + sGmail; 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T04:15:48.300

数组从 0 开始索引，而不是 1，因此您没有给出`sEmails[0]`值。将所有值下移 1。然后当您访问 sEmails[0] 时，它仍然是`null`. 您还应该确保您的 sEmails 数组已被实例化：

```
sEmails = new String[10]; 
```

这应该有效：

```
public void populateEmailArray()
{
       sEmails = new String[10];
        for (int x = 0; x < 10; x++)
        {
            switch(x)
            {
                case 0:
                    sEmails[x] = sRepStuff + "1" + sGmail; 
                break;
                case 1:
                    sEmails[x] = sRepStuff + "2" + sGmail;
                break;
                case 2:
                    sEmails[x] = sRepStuff + "3" + sGmail;
                break;
                case 3:
                    sEmails[x] = sRepStuff + "4" + sGmail;
                break;
                case 4:
                    sEmails[x] = sRepStuff + "5" + sGmail;
                break;
                case 5:
                    sEmails[x] = sRepStuff + "6" + sGmail;
                break;
                case 6:
                    sEmails[x] = sRepStuff + "7" + sGmail;
                break;
                case 7:
                    sEmails[x] = sRepStuff + "8" + sGmail;
                break;
                case 8:
                    sEmails[x] = sRepStuff + "9" + sGmail;
                break;
                case 9:
                    sEmails[x] = sRepStuff + "10" + sGmail;
                break;
            }
        }
    } 
```

更好、更简洁的版本是：

```
for(int i = 0; i < 10 ; i++)
{
   sEmails[i]="repstuff"+(i+1)+"@gmail.com";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T04:18:22.917

希望你一切顺利。

今天我会帮你清理你的代码！

而不是做一个开关盒，你可以这样做

```
for(int i = 0; i < 10 ; i++)
{
   emails[i]="repstuff"+i+"@gmail.com";
} 
```

这可以帮助您清除您的编码风格。此外，您是否检查过您是否实例化/创建了您的 sEmail、repStuff 和 Gmail？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T04:35:04.587

对于您已经接受的解决方案，我会添加一些“香料”以使其更具活力。我不会设置 10 硬编码，但我会使用数组的长度。

```
public void populateEmailArray()
{
    int length = sEmails.Length;

    for (int x = 0; x < length; x++)
    {

        sEmails[x] = sRepStuff + x + sGmail; 
    }
} 
```

当我必须在一段时间后返回程序并且必须记住并检查我必须更改的所有点时，例如当您的电子邮件数组必须增长到 20 个元素时，我不相信我的记忆力。

# javascript - 在嵌套对象中搜索文本（以 Backbone.js 集合为例）

> ID：10468039
> 
> 赞同：4
> 
> 时间：2012-05-06T04:13:48.050
> 
> 标签：javascript, jquery, backbone.js, full-text-search, underscore.js

我有一个backbone.js 集合，我需要在其中进行全文搜索。我手头的工具如下：

Backbone.js、下划线.js、jQuery

对于那些不熟悉骨干的人：

主干集合只是一个对象。在集合内有一个带有模型的数组。每个模型都有一个带有属性的数组。我必须在每个属性中搜索一个字符串。

我为此使用的代码是：

```
query = 'some user input';

query = $.trim(query);
query = query.replace(/ /gi, '|');

var pattern = new RegExp(query, "i");

// this.collection.forEach is the same as _.each
// only it get's the models from the collection
this.collection.forEach(function(model) {
    var check = true;
    _.each(model.attributes, function(attr){
        if(pattern.test(attr) && check){
            // Do something with the matched item
            check = false;
        }
    }, this);
}, this); 
```

也许我正在使用的工具之一有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T04:49:53.490

Backbone 将许多下划线方法扩展到`Collection`类中，因此您可以摆脱其中的一些内容。真的，您可能想在集合本身上将其作为一种方法来暗示，然后我可能会使用一个好的老式`for`循环来查看这些键，特别是如果我想打破它。

```
// in Backbone.Collection.extend
search: function( query, callback ){
  var pattern = new RegExp( $.trim( query ).replace( / /gi, '|' ), "i");
  var collection = this;
  collection.each(function(model) {
      for( k in model.attributes ){
        if( model.attributes.hasOwnProperty(k) && pattern.test(model.attributes[k]) ){ 
          callback.call( collection, model, k ); 
          break; // ends the for loop.
        }
      }
  });

}

// later
collection.search('foo', function( model, attr ){
  console.log('found foo in '+model.cid+' attribute '+attr);
}); 
```

也就是说，这只会返回集合中的第一个匹配项。您可能更喜欢将结果数组作为 [model, attribute] 对返回的实现。

```
// in Backbone.Collection.extend
search: function( query, callback ){
  var matches = [];
  var pattern = new RegExp( $.trim( query ).replace( / /gi, '|' ), "i");
  this.each(function(model) {
      for( k in model.attributes ){
        if( model.attributes.hasOwnProperty(k) && pattern.test(model.attributes[k]) ){ 
          matches.push([model, k]);
        }
      }
  });
  callback.call( this, matches );
}

// later
collection.search('foo', function( matches ){
  _.each(matches, function(match){
    console.log('found foo in '+match[0].cid+' attribute '+match[1]);
  });
}); 
```

或者，如果您想要一组匹配但不关心匹配哪个属性的模型，您可以使用`filter`

```
// in Backbone.Collection.extend
search: function( query, callback ){
  var pattern = new RegExp( $.trim( query ).replace( / /gi, '|' ), "i");
  callback.call( this, this.filter(function( model ){ 
    for( k in model.attributes ){ 
      if( model.attributes.hasOwnProperty(k) && pattern.test(k) ) 
        return true;
    }
  }));
}

// later
collection.search('foo', function( matches ){
  _.each(matches, function(match){
    console.log('found foo in '+match[0].cid+' somewhere');
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T04:51:07.443

你的内心`each`正在拼凑一个短路，所以你可以切换到[`_.any()`](http://underscorejs.org/#some)而不是你[`_.each()`](http://underscorejs.org/#each)和一个标志的组合；`any`一旦回调函数返回就停止迭代，`true`并且如果可用，还委托给本机`some`方法。

```
this.collection.each(function(model) {
    _(model.attributes).any(function(attr, key) {
        if(!pattern.test(attr))
            return false;
        // Do something with the matched item...
        return true;
    });
}); 
```

我还删除了上下文`this`参数，因为您没有`this`在任何地方使用，如果“做某事”需要它们，您可以将它们放回去。

如果简单的正则表达式搜索不够好，您可以查看词干提取和集合的反向索引。

# ios - 如何在 iOS 上使用 ASIHTTPRequest 发送 PATCH 请求

> ID：10468044
> 
> 赞同：2
> 
> 时间：2012-05-06T04:15:42.060
> 
> 标签：ios, rest, asihttprequest, patch, tastypie

我目前正在开发一个 iOS 应用程序，它通过 RESTful API (tastypie) 与服务器 (在 django 中) 交互。

我正在使用 ASIHTTPRequest 发送请求。但是，它似乎不支持 PATCH 请求（我使用的是 sweetpie）。

我目前正在写这样的东西：

```
[request setRequestMethod:@"PATCH"]; 
```

但是服务器似乎没有得到任何响应......我做错了什么？

我知道我的代码有效，因为当我将其更改为 GET 或 POST 时，它工作得非常好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:41:27.553

您是否尝试过将请求方法设置为 POST 并添加带有 PATCH 值的 X-HTTP-Method-Override 标头？

# c# - Mysql嵌套子查询

> ID：10468051
> 
> 赞同：1
> 
> 时间：2012-05-06T04:17:29.657
> 
> 标签：c#, mysql, subquery

我有一个页面，我正试图增加一点..

基本上，我当前的 SQL 选择是从页面上选择的选项中随机生成的。

但是，我希望默认排序顺序是随机的；但从我读过的内容来看，我应该避免 MySql 中的嵌套子查询和*rand*排序。

但是，如果我使用*嵌套*子查询对返回的有限数量的记录（少于 50 条？）进行排序，该怎么办。

这是一个坏主意吗？如果有一个更大的表，比如 2kk + 行，这会是一个问题吗？

这就是我想做的事情

```
select * from (
  select a.*,b.* 
  from a 
  left join b on b.id=a.id 
  where a.isactive AND etc etc 
  order by a.id DESC // select say page 2 of 50 newest records
  limit 50,50
) tblrand order by rand() // randomize the order of those 50 records 
```

******编辑* *** *****

 **将 a.displayorder 的内部顺序更改为 a.id DESC 的顺序，以更好地反映情况，因为默认排序顺序（如果未指定）是最新记录（即... id sorted desc order）

并添加了一些评论

****** *****已解决***** ******（但是我仍然想知道这将如何发展.. 即。对于 mysql 的性能会有多糟糕......提前 tnx）**

 **tnx dbsman ..我以不同的方式思考这个问题。起初我想要完全随机的行，正如我解释的那样，这会让我很头疼……（我把自己想做的事情搞混了：）

但我想我找到了一个解决方案，它对我在应用程序方面的问题很有帮助

```
//code that gets **Dataset ds** goes here
var rand = new Random();
var result = ds.Tables[0].AsEnumerable().OrderBy(r => rand.Next());
lst.DataSource = result.CopyToDataTable(); 
```****

# php - 检查不同浏览器的会话

> ID：10468054
> 
> 赞同：1
> 
> 时间：2012-05-06T04:17:41.513
> 
> 标签：php, session, jquery

我正在开发一个多人井字游戏。但我目前面临的问题。就是知道其他玩家是否在游戏中。我的意思是检查 player2 会话是否存在。如果会话不存在，游戏应该结束。我怎么知道其他玩家会话是否存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:35:53.703

您可以维护一个服务器来监视正在进行的每场比赛及其球员。客户端将反复联系此服务器以获取新玩家或在您的情况下正在运行会话的有效玩家。但我建议你改用 websockets。那将是更快或在线游戏。

# python - 令人困惑的python值

> ID：10468055
> 
> 赞同：0
> 
> 时间：2012-05-06T04:17:50.483
> 
> 标签：python

我有 2 个来自不同脚本的函数，它们可以通信。应该发生的是，如果存在值，则应将变量设置为 %username%; 如果该值不存在，则应将其设置为“无”。如果变量设置为无，该函数应继续并创建一个新帐户。如果变量设置为用户名，则该函数应继续。那么，为什么我会得到不一致、不稳定的结果？

如下函数，它们不会运行，因为它们会调用未包含的其他函数：

```
def database_get_user_details(user_database, username, detail):
    value = "None"
    rows = ((users_db_curs.execute("SELECT * FROM '" + user_database + "' WHERE username='" + username + "'"))).fetchall()
    for row in rows:
        if rows:
            if detail   == ("userID")     : value = str(row[1])
            elif detail == ("username")   : value = str(row[2])
            elif detail == ("password")   : value = str(row[3])
            elif detail == ("creator_exp"): value = str(row[4])
            else                          : value = "None"
        else:
            value = "None"
    return value

def game_register(username_table_name):
    while True:
        while True:
            user_ID = raw_input("E-mail address: ")
            if user_ID != "":
                break
        while True:
            username = raw_input("Username      : ")
            if username != "":
                break
        while True:
            password = raw_input("Password      : ")
            if password != "":
                password = password.encode("hex")
                break
        usr = database_get_user_details(username_table_name, username, "username")
        print usr
        if (usr != "None") or (usr != None):
            print usr
            print "Username already taken!"
            pause()
        else:
            database_create_user(username_table_name, user_ID, username, password, "250")
            print "Successfully created %s with password: %s" %(username, password.decode("hex"))
            pause()
            break 
```

请注意，为了安全起见，我没有包含实际的密码加密算法——在本例中，我只是将其设置为十六进制。

编辑：忘记解释

就好像我正在调用 random.choice()，我找不到与该函数是否创建新用户或告诉我用户名已被使用有关的任何一致性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:29:18.693

您的现有用户代码将始终触发，因为至少有一个不等式为真。

```
if (usr != "None") or (usr != None):
        print usr
        print "Username already taken!"
        pause() 
```

条件应该是

```
if (usr != "None") and (usr != None): 
```

# c++ - 静态伪随机场发生器

> ID：10468064
> 
> 赞同：2
> 
> 时间：2012-05-06T04:19:19.400
> 
> 标签：c++, random, hash, c++11, fnv

我为游戏编写的随机数生成器遇到了问题。我需要一个快速的伪随机场发生器。它不需要加密安全，它只需要接受一个向量和一个种子，并给出一个足够随机的散列值来欺骗粗略的人工检查。

但是，当我给出一个 2d 向量并将结果修改为 2 时，此代码无法产生“伪随机”输出。它产生的主要是棋盘格图案。

我不知道为什么，老实说，知道它会很酷，但如果我永远弄不明白，我不会出汗。大多数情况下，我只是觉得这种生成随机数的方法太糟糕了，所以我想知道解决这个问题的另一种方法。即，我真的在寻找资源或指针，以这种方式生成随机数的好方法，而不是问“我做错了什么？”

基本上，如果我输入相同的输入，我正在尝试生成一个可以返回的“无限”2D 噪声场（想想，白噪声）。

我写的代码是（它应该是一个 fnv 哈希，请原谅模板的东西。我只是把它从代码中拉出来了。我稍后会清理它）。

```
//Static random number generator, will generate a random number based off of a seed and a coordinate
template<typename T, typename... TL>
uint32_t static_random_u32(T const& d, TL const&... rest) {
  return fnv_hash32(d, rest..., 2938728349u); //I'm a 32-bit prime!
}

template<typename T, typename... TL>
uint32_t fnv_hash32(T const& v, TL const&... rest) {
  uint32_t hash;
  fnv_hash32_init(hash);
  fnv_hash32_types(hash, v, rest...);
  return hash;
}

inline void fnv_hash32_init(uint32_t& hash) {
  hash = 2166136279u; //another 32-bit prime
}

// Should produce predictable values regardless of endianness of architecture
template<typename T, typename... TL>
void fnv_hash32_types(uint32_t& hash, T const& v, TL const&... rest) {
#if LITTLE_ENDIAN
  fnv_hash32_bytes(hash, (char*)&v, sizeof(v), true);
#else
  fnv_hash32_bytes(hash, (char*)&v, sizeof(v), false);
#endif
  fnv_hash32_types(hash, rest...);
}

inline void fnv_hash32_types(uint32_t& hash) {}

inline void fnv_hash32_bytes(uint32_t& hash, char const* bytes, size_t len, bool swapOrder = false) {
  if (swapOrder) {
    for (size_t i = len; i > 0; --i)
      fnv_hash32_next(hash, bytes[i - 1]);
  } else {
    for (size_t i = 0; i < len; ++i)
      fnv_hash32_next(hash, bytes[i]);
  }
}

inline void fnv_hash32_next(uint32_t& hash, char byte) {
  hash ^= byte;
  hash *= 16777619u;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:10:21.337

我不是这方面的专家，但这里有一个想法和一个指针。

您的主要哈希混合函数`fnv_hash32_next`相当简单，实际上混合得不是很好。例如，如果您知道 'byte' 的最低位是 0，那么该语句`hash ^= byte`将保持最低位`hash`不变。由于`16777619u`是奇数，所以`hash *= 16777619u`始终保持最低位不变：奇数（散列）乘以奇数（16777619u）是奇数/偶数（散列）乘以奇数（16777619u）是偶数。

进一步推进这个论点，结果的最低位最终将成为输入的每个字节中最低位的异或。好吧，实际上，恰恰相反，因为你从一个奇数开始作为`hash`in的初始值`fnv_hash32_init`。这可能解释了您所看到的模式。确实，我敢打赌，如果您仔细检查，您会发现它并不完全是棋盘格。例如，对于每个 x，(x,255) 的值应该与 (x,256) 相同。

您使用的方案应该工作得相当好，但您需要一个更好的散列函数。特别是，您需要更好地混合。我以前使用过的一种资源是 Thomas Wang 在[http://www.concentric.net/~ttwang/tech/inthash.htm](http://www.concentric.net/~ttwang/tech/inthash.htm)上的文章。他对基本问题进行了简短的描述以及一些示例代码。此外，不要错过他与 Robert Jenkins 文章的链接：[http](http://www.burtleburtle.net/bob/hash/doobs.html) ://www.burtleburtle.net/bob/hash/doobs.html 。

综上所述，仅使用库中的 MD5 或 SHA1 之类的加密哈希可能要容易得多。不要有任何幻想：使用加密散列不会使您的使用具有任何“加密安全性”。但是加密散列函数往往具有您在这里寻找的良好混合类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T07:00:42.077

IMO 运作良好的东西是

```
int base[16][16]; // Random base tile

int random_value(int x, int y)
{
    return (base[y&15][x&15] ^
            base[(y>>4)&15][(x>>4)&15] ^
            base[(y>>8)&15][(x>>8)&15] ^
            base[(y>>12)&15][(x>>12)&15] ^
            base[(y>>16)&15][(x>>16)&15]);
} 
```

这个想法是对具有多个比例级别的基本随机图块进行异或（我在此示例中使用 5 个级别）。您添加的级别越多，周期就越大；在这个例子中是 16**5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T04:24:56.417

如果你需要做的只是愚弄一个检查不那么努力的人，我只会使用标准库中的[`random_r()`](http://www.kernel.org/doc/man-pages/online/pages/man3/random_r.3.html)and [`srandom_r()`](http://www.kernel.org/doc/man-pages/online/pages/man3/random_r.3.html)。它们允许您保留一个私有状态对象，以便您可以同时激活多个不同（且唯一）的生成器。如果您愿意，可以将它们包装在一个类中以方便使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-25T15:43:34.300

这就是 Perlin 噪音的用途。Minecraft 使用 Perlin 噪声。它使您可以立即计算字段中任何点的值，而无需先计算中间点。如果你任意生成你的世界的比特，然后你生成连接这些任意点的比特，它们将完美地匹配在一起。

# php - 多个输入的一种验证功能

> ID：10468065
> 
> 赞同：1
> 
> 时间：2012-05-06T04:19:23.317
> 
> 标签：php, codeigniter, validation

我正在使用 CodeIgniter 的表单验证回调函数，这里是：

```
function _validate_rate($input, $field)
{

    if ( !in_array($field, array("water", "earth", "fire")) )
    {
        return FALSE;
    }

    $min = (int) $this->input->post($field . '_max');
    if ( $min > 0 AND $min < $input )
    {
        $this->form_validation->set_message($field . '_min', sprintf($this->lang->line('dev_s_invalid_rate'), strtolower($field)));
        return FALSE;
    }
    return TRUE;
} 
```

..我将上述函数用于三个表单输入：

```
$form_rules = array(
    'water_min' => array (
        'field' => substr($this->lang->line('dev_field_water'), 0, -1), 
        'rules' => 'trim|xss_clean|max_length[4]|numeric|callback__validate_rate[water]'
    ),
    'earth_min' => array (
        'field' => substr($this->lang->line('dev_field_earth'), 0, -1), 
        'rules' => 'trim|xss_clean|max_length[4]|numeric|callback__validate_rate[earth]'
    ),
    'fire_min' => array (
        'field' => substr($this->lang->line('dev_field_fire'), 0, -1), 
        'rules' => 'trim|xss_clean|max_length[4]|numeric|callback__validate_rate[fire]'
    )
);
foreach( $form_rules as $input => $data) 
{
    $this->form_validation->set_rules($input, $data['field'], $data['rules']);
} 
```

当我想使用以下语句显示表单验证错误消息时，就会出现问题：

```
$this->form_validation->set_message($field . '_min', sprintf($this->lang->line('dev_s_invalid_rate'), strtolower($field))); 
```

（在回调函数中）。

所以：它应该设置一个与`$field`数据相对应的错误消息，所以当`$field`is时`water`，它应该设置一个错误消息`water_min`（因为那是验证规则字段名称）.. 但是我收到以下消息：

`Unable to access an error message corresponding to your field name.`.

我为三个字段创建了一个回调函数，只是为了防止重复看起来相同的函数，这些函数必须检查/工作相同......不幸的是，无法访问与每个输入对应的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:22:28.517

改变

```
$this->form_validation->set_message($field . '_min', sprintf($this->lang->line('dev_s_invalid_rate'), strtolower($field))); 
```

到

```
$this->form_validation->set_message(_validate_rate, sprintf($this->lang->line('dev_s_invalid_rate'), strtolower($field))); 
```

错误消息对应于函数，而不是字段。这样，您的函数可以普遍用于多个字段。在您的错误消息中，您可以写：

```
'The %s field is not correct' 
```

它会将字段名称插入 %s

# javascript - 禁用浏览器状态栏文本

> ID：10468071
> 
> 赞同：13
> 
> 时间：2012-05-06T04:21:30.040
> 
> 标签：javascript, html, cross-browser, statusbar, suppress

# 背景

现代浏览器取消了经典的状态栏，而是在其窗口底部绘制了一个小工具提示，显示悬停/焦点上的链接目标。

以下屏幕截图说明了这种（在我的情况下是不受欢迎的）行为的示例：

![http://i.imgur.com/0dAxc.png](../Images/aa66a09abc190c741999885e612629eb.png)

* * *

# 问题

1.  是否有一种可移植的方式来禁用这些工具提示？
2.  在我的特定情况下，我是否遗漏了这样做的任何明显缺点？
3.  我的尝试（见下文）是实现这一目标的合理方式吗？

* * *

# 推理

我正在开发一个 Intranet Web 应用程序，并且希望对某些特定于应用程序的操作禁用此行为，因为坦率地说，`https://server/#`任何地方看起来都让人眼花缭乱，而且在某些情况下我的应用程序会在该位置绘制自己的状态栏。

* * *

# 我的尝试

我不是专业的网络开发人员，所以我在这个领域的知识仍然相当有限。

无论如何，这是我对 jQuery 的尝试：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Target Tooltip Test</title>
    <style>
      a, span.a {
        color: #F00;
        cursor: pointer;
        text-decoration: none;
      }

      a:hover, span.a:hover {
        color: #00F;
      }

      a:focus, span.a:focus {
        color: #00F;
        outline: 1px dotted;
      }
    </style>
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script>
      $(document).ready(function() {
        patch();
      });

      function patch() {
        $('a').each(function() {
          var $this = $(this).prop('tabindex', 0);

          if($this.prop('href').indexOf('#') == -1 || $this.prop('rel').toLowerCase() == 'external') {
            return;
          }

          var $span = $('<span class="a" tabindex="0"></span>');

          $span.prop('data-href', $this.prop('href'));
          $span.text($this.text());

          $this.replaceWith($span);
        });

        $('a[rel="external"]').click(function() {
          window.open($(this).prop('data-href'));
          return false;
        });

        $('span.a').click(function() {
          location.href = $(this).prop('data-href');
        }).keypress(function(event) {
          if(event.keyCode == 13) {
            location.href = $(event.target).prop('data-href');
          }
        }).focus(function() {
          window.status = ''; // IE9 fix.
        });
      }
    </script>
  </head>
  <body>
    <ol>
      <li><a href="http://google.com" rel="external">External Link</a></li>
      <li><a href="#foo">Action Foo</a></li>
      <li><a href="#bar">Action Bar</a></li>
      <li><a href="#baz">Action Baz</a></li>
      <li><a href="mailto:support@example.org">Email Support</a></li>
    </ol>
  </body>
</html> 
```

`patch()`用一个元素替换所有包含`#`（即，在我的情况下是特定于应用程序的操作）的`span`链接，使所有“外部”链接在新选项卡/窗口中打开，并且似乎不会破坏自定义协议处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T05:06:22.643

> 是否有一种可移植的方式来禁用这些工具提示？

不，除了像上面的例子这样的解决方法。

> 在我的特定情况下，我是否遗漏了这样做的任何明显缺点？

你似乎忽略了整个情况很尴尬的事实。如果你想让它们看起来像按钮，为什么还要有链接呢？只需使用按钮。就此而言，如果您最终还是用跨度将它们切换出来，为什么还要打扰它们呢？只需使用跨度。

> 我的尝试（见下文）是实现这一目标的合理方式吗？

作为一般方法，这并不合理，因为您要从文档中删除那些锚元素，因此任何附加的事件侦听器、expandos 等都将丢失。它可能适用于您的具体情况，但更明智的方法是首先不使用链接（见上文）。

* * *

如果你仍然下定决心要做这样的事情，至少不要替换`a`元素。就像您在示例中所做的那样，摆脱它的`href`属性并设置一个事件侦听器。现在它不再是一个链接，所以它不会出现在状态栏中（但它仍然是相同的元素，至少）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T06:53:55.883

```
<button onclick="window.open('yoururlhere.html','_self')">your link text here</button> 
```

请注意，这会将 ctrl 单击视为普通单击并禁用右键单击。我不知道中间点击。

您也可以使用“a”，只需将 href 替换为上面代码中的 onclick，但是当我尝试“a:hover”样式停止工作时。显然，没有 href 的“a”被认为是不可悬停的，至少在 Firefox 中是这样。所以我切换到“按钮”和“按钮：悬停”样式，一切都很好。

我知道这种解决方案将被视为不好的做法，但在某些情况下，例如我制作的网站主要由全屏照片组成，美学胜过原则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T04:42:44.597

工具提示向用户提供了一个指示，如果单击，链接会将他们带到哪里。这是标准浏览器用户体验的一部分，也是您网站用户所期望的。因为你认为它看起来不好看而改变这种期望可能会导致糟糕的用户体验。一旦用户停止将鼠标悬停在链接标签上，该区域中显示的任何内容都将可见。

我知道任何没有告诉我它要去哪里的链接对我来说都很可疑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T22:43:10.910

试试这个

```
$(this).removeAttr("href");  
$(this).click(function(){}).mouseover(function(){.........}).etc 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-20T11:12:10.543

这就是我对 jQuery 所做的：

```
 //remove status bar notification...
        $('a[href]').each(function(){
            u = $(this).attr('href');
            $(this).removeAttr('href').data('href',u).click(function(){
                self.location.href=$(this).data('href');
            });
        }); 
```

# iphone - 核心文本中的文本选择，如 ibook

> ID：10468075
> 
> 赞同：0
> 
> 时间：2012-05-06T04:21:47.537
> 
> 标签：iphone, ios5, nsstring, core-text

我做了一个圣经应用程序，它使用核心文本在视图中显示经文...... txt 来自本地存储的 sqlite db，，，我正在使用这个核心文本包装器来呈现我的文本，，，因为它支持多列视图， ，[核心文本变形器](https://github.com/akosma/CoreTextWrapper)，，，但我需要选择诗句功能......如果用户点击诗句，它需要选择那个特定的诗句，如果我有这节经文 1 上帝创造了天地。2 等等等等，，，。3 等等等等，，，，。当用户点击第一节经文时，它需要选择该经文并突出显示该经文......就像 eBible 应用程序或 ibook 应用程序......

是否有任何示例可以在核心文本中显示这种功能。请给我一个可能有帮助的链接。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:50:24.130

我在我的圣经应用程序（https://github.com/photokandyStudios/gbible）中做了类似的事情。具体见[https://github.com/photokandyStudios/gbible/blob/master/gbible/PKBibleViewController.m#L1301](https://github.com/photokandyStudios/gbible/blob/master/gbible/PKBibleViewController.m#L1301)

本质上我维护一个选择数组，当用户点击诗句（在我的例子中是 uitableviewcell）时，我将它添加到数组中。我还为单元格的背景着色以反映选择。

放大镜的选择不是完美的选择，但就我的目的而言，已经足够好了。

# ruby-on-rails - 安装 capybara-webkit gem 时出现问题，递归错误？

> ID：10468076
> 
> 赞同：1
> 
> 时间：2012-05-06T04:22:03.430
> 
> 标签：ruby-on-rails, ruby, gem, capybara, capybara-webkit

```
Installing capybara-webkit (0.11.0) with native extensions Unfortunately, a fatal error has occurred. Please report this error to the Bundler issue tracker at https://github.com/carlhuda/bundler/issues so that we can fix it. Please include the full output of the command, your Gemfile and Gemfile.lock. Thanks!
/Users/me/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:551:in `rescue in block in build_extensions': ERROR: Failed to build gem native extension. (Gem::Installer::ExtensionBuildError)

        /Users/me/.rvm/rubies/ruby-1.9.2-p290/bin/ruby extconf.rb 
/Users/me/.rvm/gems/ruby-1.9.2-p290/gems/bundler-1.0.15/lib/bundler/spec_set.rb:87:in `block in materialize': Could not find capybara-webkit-0.11.0 in any of the sources (Bundler::GemNotFound) 
```

当我尝试安装 capybara-webkit gem 时，它说它找不到 capybara-webkit gem。我已经安装了 qt4：

```
$ sudo port list installed | grep qt4
qt4-mac                        @4.7.4          aqua/qt4-mac 
```

知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:33:12.487

我会尝试使用`brew`而不是`port`.

我现在在我的 Mac 上安装了 capybara-webkit（版本 0.11.0，正如您尝试安装的那样），它已安装并且运行良好。

但是，我的机器上没有端口。我`brew`现在用来安装大部分东西。

所以

```
brew install qt 
```

可以有所作为。

这是 Thoughtbot 团队（构建和支持 capybara-webkit 的人）使用的安装脚本的链接——您可以看到它也使用 brew 安装 qt：

[https://github.com/thoughtbot/laptop/blob/master/mac](https://github.com/thoughtbot/laptop/blob/master/mac)

```
echo "Installing QT, used by Capybara Webkit for headless Javascript integration testing ..."
brew install qt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T23:24:48.173

我在这个方面已经很晚了，但是我遇到了类似的问题，并且发现问题是我安装了 Macports**和**Homebrew。

所以我卸载了 Macports：

`sudo port -fp uninstall installed`

更新了我的自制软件：

`brew update`（花了一段时间）

然后安装了 QT，只安装了 brew 要求从源代码构建：

`brew install qt --build-from-source`（大约需要 25 分钟才能完成）

如果你`qmake -v`现在尝试，你可能会得到一个错误，说 qmake is not in `/opt/local/bin`。这是因为 Homebrew 在 中安装了 QT `/usr/local/bin`，您必须使用下一个命令将其添加到您的 PATH 中：

`export PATH="/usr/local/bin:$PATH"`

最后，我花了大约 3 个小时才找到解决方案，但它就像一个魅力。

我希望这可以帮助其他有同样问题的人。

# jquery - 如何向此 Jquery 内容滑块添加上一个按钮？

> ID：10468077
> 
> 赞同：0
> 
> 时间：2012-05-06T04:22:16.477
> 
> 标签：jquery, slider

我为 Jquery 内容滑块做了这个很好的教程：http: [//brenelz.com/blog/build-a-content-slider-with-jquery/](http://brenelz.com/blog/build-a-content-slider-with-jquery/)

这是我的测试页面： [http ://www.gregquinn.com/oneworld/brenez_slider_test.html](http://www.gregquinn.com/oneworld/brenez_slider_test.html)

但是左键隐藏在第一张幻灯片上，我不希望它隐藏。我对 jquery 了解不多，但我尝试将左按钮从不透明度 o 设置为 100 或 1，但它不起作用按钮出现一次但不起作用。有谁知道如何做到这一点？这是代码：

```
(function($) {
  $.fn.ContentSlider = function(options)
  {
var defaults = {
  leftBtn : 'images/panel_previous_btn.gif',
  rightBtn : 'images/panel_next_btn.gif',
  width : '900px',
  height : '400px',
  speed : 400,
  easing : 'easeOutQuad',
  textResize : false,
  IE_h2 : '26px',
  IE_p : '11px'
}
var defaultWidth = defaults.width;
var o = $.extend(defaults, options);
var w = parseInt(o.width);
var n = this.children('.cs_wrapper').children('.cs_slider').children('.cs_article').length;
var x = -1*w*n+w; // Minimum left value
var p = parseInt(o.width)/parseInt(defaultWidth);
var thisInstance = this.attr('id');
var inuse = false; // Prevents colliding animations

function moveSlider(d, b)
{
  var l = parseInt(b.siblings('.cs_wrapper').children('.cs_slider').css('left'));
  if(isNaN(l)) {
    var l = 0;
  }
  var m = (d=='left') ? l-w : l+w;
  if(m<=0&&m>=x) {
    b
      .siblings('.cs_wrapper')
        .children('.cs_slider')
          .animate({ 'left':m+'px' }, o.speed, o.easing, function() {
            inuse=false;
          });

    if(b.attr('class')=='cs_leftBtn') {
      var thisBtn = $('#'+thisInstance+' .cs_leftBtn');
      var otherBtn = $('#'+thisInstance+' .cs_rightBtn');
    } else {
      var thisBtn = $('#'+thisInstance+' .cs_rightBtn');
      var otherBtn = $('#'+thisInstance+' .cs_leftBtn');
    }
    if(m==0||m==x) {
      thisBtn.animate({ 'opacity':'0' }, o.speed, o.easing, function() { thisBtn.hide(); });
    }
    if(otherBtn.css('opacity')=='0') {
      otherBtn.show().animate({ 'opacity':'1' }, { duration:o.speed, easing:o.easing });
    }
  }
}

function vCenterBtns(b)
{
  // Safari and IE don't seem to like the CSS used to vertically center
  // the buttons, so we'll force it with this function
  var mid = parseInt(o.height)/2;
  b
    .find('.cs_leftBtn img').css({ 'top':mid+'px', 'padding':0 }).end()
    .find('.cs_rightBtn img').css({ 'top':mid+'px', 'padding':0 });
}

return this.each(function() {
  $(this)
    // Set the width and height of the div to the defined size
    .css({
      width:o.width,
      height:o.height
    })
    // Add the buttons to move left and right
    .prepend('<a href="#" class="cs_leftBtn"><img src="'+o.leftBtn+'" /></a>')
    .append('<a href="#" class="cs_rightBtn"><img src="'+o.rightBtn+'" /></a>')
    // Dig down to the article div elements
    .find('.cs_article')
      // Set the width and height of the div to the defined size
      .css({
        width:o.width,
        height:o.height
      })
      .end()
    // Animate the entrance of the buttons
    .find('.cs_leftBtn')
      .css('opacity','0')
      .hide()
      .end()
    .find('.cs_rightBtn')
      .hide()
      .animate({ 'width':'show' });

  // Resize the font to match the bounding box
  if(o.textResize===true) {
    var h2FontSize = $(this).find('h2').css('font-size');
    var pFontSize = $(this).find('p').css('font-size');
    $.each(jQuery.browser, function(i) {
      if($.browser.msie) {
         h2FontSize = o.IE_h2;
         pFontSize = o.IE_p;
      }
    });
    $(this).find('h2').css({ 'font-size' : parseFloat(h2FontSize)*p+'px', 'margin-left' : '66%' });
    $(this).find('p').css({ 'font-size' : parseFloat(pFontSize)*p+'px', 'margin-left' : '66%' });
    $(this).find('.readmore').css({ 'font-size' : parseFloat(pFontSize)*p+'px', 'margin-left' : '66%' });
  }

  // Store a copy of the button in a variable to pass to moveSlider()
  var leftBtn = $(this).children('.cs_leftBtn');
  leftBtn.bind('click', function() {
    if(inuse===false) {
      inuse = true;
      moveSlider('right', leftBtn);
    }
    return false; // Keep the link from firing
  });

  // Store a copy of the button in a variable to pass to moveSlider()
  var rightBtn = $(this).children('.cs_rightBtn');
  rightBtn.bind('click', function() {
    if(inuse===false) {
      inuse=true;
      moveSlider('left', rightBtn);
    }
    return false; // Keep the link from firing
  });

}); 
```

} })(jQuery)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:27:38.117

尝试删除此代码：

```
if(m==0||m==x) {
  thisBtn.animate({ 'opacity':'0' }, o.speed, o.easing, function() { thisBtn.hide(); });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T04:35:24.920

你的“上一个按钮”有 CSS: display: block; 不透明度：0；

为了让它显示您可以在 CSS 中添加 !important 标志来覆盖。因此，在 /styles/jquery.ennui.contentslider.css 的第 144 行添加以下内容

```
.cs_leftBtn {
    display: block !important;
    opacity: 1 !important;
} 
```

另一方面，您也可以修改脚本：

找到代码：

```
if(b.attr('class')=='cs_leftBtn') {
  var thisBtn = $('#'+thisInstance+' .cs_leftBtn');
  var otherBtn = $('#'+thisInstance+' .cs_rightBtn');
} else {
  var thisBtn = $('#'+thisInstance+' .cs_rightBtn');
  var otherBtn = $('#'+thisInstance+' .cs_leftBtn');
} 
```

并将其更改为：

```
if(b.attr('class')!='cs_leftBtn') {
  var thisBtn = $('#'+thisInstance+' .cs_rightBtn');
  var otherBtn = $('#'+thisInstance+' .cs_leftBtn');
} 
```

也删除这个：

```
.find('.cs_leftBtn')
      .css('opacity','0')
      .hide()
      .end() 
```

Havent对此进行了测试，但它应该可以工作。你的选择^^

# jquery - 简单的 JQuery Ajax 帖子

> ID：10468084
> 
> 赞同：1
> 
> 时间：2012-05-06T04:24:57.967
> 
> 标签：jquery, ajax, json, asp.net-mvc-3, jquery-selectors

```
@foreach (var item in set)
 {
    <li>                               
    <div class="slidera_num">@item.VoteCount</div>
    <div class="slidera_button"><a href="#" id="vote" name="vote" onclick="vote(@item.Id);return false;">vote</a> </div>
    </li>
 } 
```

我有这个制作图像列表的代码，我希望用户点击投票并想要制作一个 ajax 帖子并获取 JSON 请求并在`div slidera_num`. 下面是 ajax 调用，它确实返回`{"vote":3}`。

```
function vote(idx) {

        $("#vote").click(function () {
            $.post("/Home/VoteAjax/", { id: idx}, function (result) {
                $(".slidera_num").html(result);
            });
        });
    }; 
```

但是，每次我点击投票时，它都会增加 ajax 调用，我第三次点击时，它会进行 5 次左右的调用。我遇到的另一个问题是，因为所有 div 都会有类`.slidera_num`，所以我不希望它们都更新相同的数字。

我怎样才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T04:27:21.597

您正在使用单击事件将单击事件绑定到按钮。

而是这样做：

```
function vote(idx) {

        $.post("/Home/VoteAjax/", { id: idx}, function (result) {
            $(".slidera_num").html(result);
        });
}; 
```

您不需要使用 jquery 来绑定点击事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T04:27:39.613

从您的 html 中删除，然后在 javascript 代码中的某处`onclick="vote(@item.Id);return false;"`调用您的函数。`vote()`

使用 onclick html 属性是老派的，不再正确（尽管有效）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T04:27:57.060

您有重复的 id `#vote`，但***ID 应该是唯一***的并且也删除`onClick`。

```
function vote(idx) {

        $('div.slidera_button a[name="vote"]').on('click',function (e) {
            e.preventDefault();
            var to = $(this);
            $.post("/Home/VoteAjax/", { id: idx}, function (result) {
                to.parent().prev('.slidera_button').html(result);
            });
        });
    }; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-06T04:28:56.837

我看到其他答案包含重复项。要仅更新特定结果，而不是使用 *$(".slidera_num").html(result);*，请使用以下命令：

```
$("#vote").click(function () {
    var thisLink = $(this);
    $.post("/Home/VoteAjax/", { id: idx}, function (result) {
        $(thisLink).closest("li").find(".slidera_num").html(result);
    });
}); 
```

*编辑*——更正。在 $.post 中，*this*不引用 click 元素，因此您必须事先保存对它的引用（*thisLink*）。从那里，遍历父*li*，然后返回到目标“.slidera_num”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-06T04:31:06.400

在您的代码中，您将 a 标签的 ID 指定为循环中的“投票”。因此，来自该循环的所有元素都将具有相同的 ID。**元素的 ID 应该是唯一的**。所以我会像这样重写你的代码

```
@foreach (var item in set)
 {
    <li>                               
    <div class="slidera_num">@item.VoteCount</div>
    <div class="slidera_button"><a href="#" id="@item.Id" name="vote" >vote</a> </div>
    </li>
 } 
```

脚本是

```
$(function(){
  $("div.slidera_button a").click(function(e){
  var item=$(this);
  e.preventDefault();
  $.post('@Url.Action("Vote","Ajax")', { id :item.attr("id") } ,function(response){
     item.closest(".slidera_num").html(response);
  });
}); 
```

我没有对路径进行硬编码，而是使用它`HTML helper method`来生成该操作方法的路径。所以我不需要担心在我的 URL 中有多少 ../ 。

# javascript - 结合两个 javascript 函数来验证表单并通过 ajax 提交

> ID：10468088
> 
> 赞同：0
> 
> 时间：2012-05-06T04:26:09.067
> 
> 标签：javascript, ajax, validation, livevalidation

我正在尝试向 ajax 提交的表单添加验证，并使其部分工作。

这是提交表单的代码：

```
<script type="text/javascript">
$(document).ready(function(){$(".sendName").click(function(){
var Email=$("#Email").val();
var Name=$("#Name").val();
var ErrorType=$("input:radio[name=ErrorType]:checked").val();
var Univer=$("#Univer").val();
var ErrorMessage=$("#ErrorMessage").val();
$.post("report.php",{Email:Email,Name:Name,ErrorType:ErrorType,Univer:Univer,ErrorMessage:ErrorMessage},function(data){$("#loadName").html(data).effect('bounce', { times: 5, distance: 30 }, 300);
  });
 });
});
</script> 
```

该代码完美运行。

我也在使用 livevalidation 插件，并且大多数情况下它也可以正常工作。我遇到的唯一问题是从提交表单的函数中调用验证代码。

通常验证码是这样调用的：

```
 <form onsubmit="return validate(this)"> 
```

但是，因为表单是由 ajax 提交的，所以当前的表单标签是：

```
 <form onSubmit="return false;"> 
```

所以我需要做的是从通过ajax提交表单的函数中调用验证函数。

我该怎么做这样的事情？两个脚本都可以自己正常工作，这只是我需要弄清楚的最后一件事。

所以我需要在调用ajax函数的时候调用validate函数，如果表单验证了脚本就可以完成ajax请求，如果表单没有验证就不应该提交。

我做了一些搜索，发现了几个类似的问题，但没有解决方案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:33:32.890

更简单的方法是仅在出现验证错误时取消提交，否则让提交正常进行。

```
<form id="new-item" method="post" action="/i"> 
```

然后在你的javascript中：

```
$('#new-item').submit( function () {

  var valid = true;

  // do you validation logic
  valid = validate(this);

  // returning true will let the normal submit action happen
  // returning false will prevent the default action (i.e. the form will not be sumitted)
  return valid;

}); 
```

如果您不想使用标准的提交功能（尽管这是一种最佳做法，因为它在禁用 javascript 时有效）您会做类似的事情，但总是返回 false。

```
$('#new-item').submit( function () {

  var valid = true;

  // do you validation logic
  valid = validate(this);

  if (valid ) {
    // send your ajax post request here
  }

  // returning true will let the normal submit action happen
  // returning false will prevent the default action (i.e. the form will not be sumitted)
  return false;

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:03:17.393

同意账单

假设这种形式

```
<form id="formId" ...
  .
  .
  <input type="submit" />
</form> 
```

使用您的代码：

```
<script type="text/javascript">
$(document).ready(function(){
  $("#formId").submit(function(){
    if (!validate(this)) return false;
    var Email=$("#Email").val();
    var Name=$("#Name").val();
    var ErrorType=$("input:radio[name=ErrorType]:checked").val();
    var Univer=$("#Univer").val();
    var ErrorMessage=$("#ErrorMessage").val();
    $.post("report.php",
      {Email:Email,Name:Name,ErrorType:ErrorType,Univer:Univer,ErrorMessage:ErrorMessage},function(data){$("#loadName").html(data).effect('bounce', { times: 5, distance: 30 }, 300);
    });
    return false; // cancel normal submission
   });
});
</script> 
```

# ruby-on-rails - 在 Rails 中将 Twitter Bootstrap 按钮图标添加到 button_to

> ID：10468094
> 
> 赞同：24
> 
> 时间：2012-05-06T04:27:23.673
> 
> 标签：ruby-on-rails, twitter-bootstrap

我正在阅读[Agile Web Development with Rails](http://pragprog.com/book/rails4/agile-web-development-with-rails)这本书，但我一直在使用 Twitter Bootstrap 而不是书中的自定义样式。我无法通过 GLyphonics 将图标添加到**button_to**方法。我的代码如下所示：

```
<%= button_to <i class="icon-search icon-white">Add To Cart</i>, 
              line_items_path(product_id: product), 
              class: "btn btn-success" %> 
```

我已经尝试了很多变体，但似乎无法让它正常工作。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-07T19:02:54.317

我不确定 OP 是如何让它工作的，但是 Rails`button_to`生成了一个`<input type='submit' />`元素，它不允许在 value 字段中使用 HTML。

另请参阅：[input type="submit" 与按钮标签是否可以互换？](https://stackoverflow.com/questions/7117639/input-type-submit-vs-button-tag-are-they-interchangeable)

在这种情况下，最好的选择是强制`link_to`PUT（或 POST）：

```
<%= link_to raw("<i class=\"icon-search icon-white\">Add To Cart</i>"), 
          line_items_path(product_id: product), 
          class: "btn btn-success",
          method: :put %> 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-12-26T15:43:21.100

您可以将图标添加为子元素：

```
<%= button_to button_path, method: :delete do %>
    <span class="glyphicon glyphicon-search"></span>
<% end %> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-06T07:31:14.467

您的报价似乎有问题：

```
<%= button_to raw("<i class=\"icon-search icon-white\">Add To Cart</i>"), 
          line_items_path(product_id: product), 
          class: "btn btn-success" %> 
```

用双引号将按钮的标签括起来，在标签中转义双引号`i`，最后，将所有内容包装到`raw()`调用中以确保正确显示 HTML。

或者，您可以使用`html_safe`：

```
<%= button_to "<i class=\"icon-search icon-white\">Add To Cart</i>".html_safe, 
          line_items_path(product_id: product), 
          class: "btn btn-success" %> 
```

* * *

@jordanpg 的好点：按钮的值中不能包含 HTML，因此他的解决方案更合适，应该获得批准的状态。该`html_safe`部分仍然有效。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-24T01:08:37.130

使用 raw() 或 #html_safe 仍然对我不起作用。

我正在使用辅助方法来创建 button_to 标志内容。最终在我的辅助方法中使用了以下内容（路径是预先定义的）：

```
form_tag path, :method => :post do
  button_tag do
    content_tag :i, 'Flag as inappropriate', :class => 'icon-flag flag_content'
  end
end 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-22T15:26:29.623

我使用了这个，它对我来说很好用：

```
<%= link_to(line_items_path(product_id: product),
    method: :put,
    class: 'btn btn-success') do %>
    <%= content_tag('i', nil, class: 'icon-search icon-white') %> Add To Cart
<% end %> 
```

希望这可以帮助

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-26T20:32:19.877

我正在使用这个助手：

```
module ApplicationHelper
  def glyph(*names)
   content_tag :i, nil, class: names.map{|name| "icon-#{name.to_s.gsub('_','-')}" }
  end
end 
```

例子：

```
glyph(:share_alt)
=> <i class="icon-share-alt"></i> 
```

和

```
glyph(:lock, :white)
=> <i class="icon-lock icon-white"></i> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-12T21:50:52.590

使用 Rails 4 和 Bootstrap 3，这里是如何使用`link_to`or创建删除按钮`button_to`。

请注意，我使用的是[Haml](http://haml.info/)而不是 Erb。

在您看来：

```
- @users.each do |user|
  = link_to content_tag(:i, ' Delete', class: "glyphicon glyphicon-trash"),
    users_path(user),
    class: "btn btn-danger",
    method: :delete,
    data: { confirm: "Delete user #{user.username}?" } 
```

您也可以将`content_tag`零件替换为

```
raw('<i class="glyphicon glyphicon-trash"> Delete</i>'), 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-29T20:02:23.810

这对我有用，（并带有确认消息）

```
<%= button_to "/home/delete?cardId="+card.id.to_s, data: { confirm:'Are you sure you want to delete?' }  do %>
    <i class="fa fa-times"></i>
<% end%> 
```

这产生

```
<form class="button_to" method="post" action="/home/delete?cardId=15">
 <button data-confirm="Are you sure you want to delete?" type="submit">
    <i class="fa fa-times"></i>
 </button>
</form> 
```

# regex - 对何时（不）使用反斜杠“\”进行转义感到困惑

> ID：10468099
> 
> 赞同：0
> 
> 时间：2012-05-06T04:28:40.073
> 
> 标签：regex, bash, shell, command-line, grep

我很困惑什么时候应该使用'\'。

考虑以下示例：

(1)

```
$ grep -Eh '^(bz|gz|zip)' filenames.txt 
```

它匹配以 bz 、 gz 或 zip 开头的结果。

(2)

```
$ echo "(555) 123-4567" | grep -E '^\(?[0-9][0-9][0-9]\)? [0-9] [0-9][0-9]$' 
```

输出：（555）123-4567

* * *

1.  以示例 (1) 为例，为什么不需要 '\' 来转义括号 ()
2.  以示例 (2) 为例，为什么它需要 '\' 来转义 ()？

我正在使用 Ubuntu 发行版。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T04:30:22.427

您的每个示例中的括号表示不同的含义。

在第一个示例中，括号是*分组*的，并且与文件名*不*匹配。因此，您会找到以`bz`而不是`(bz`.

在您的第二个示例中，括号是*文字*，实际上出现在您匹配的电话号码中。

# ios - UIButton 的点击（IBAction）未以编程方式触发

> ID：10468100
> 
> 赞同：0
> 
> 时间：2012-05-06T04:28:47.433
> 
> 标签：ios, uibutton, ibaction

我在 viewController 中有一个简单的 UIButton。

```
- (IBAction)btnEnter:(id)sender {
   ..
   ..
} 
```

现在我想以编程方式触发按钮按下动作，其中一个库函数（didFinishPickingmediaWithInfo）被执行

```
- (void) imagePickerController: (UIImagePickerController*) reader didFinishPickingMediaWithInfo: (NSDictionary*) info
{

// Do Something

txtBoxAboveEnterButton = @"Data populated successfully";

[self btnEnter:nil];

[reader dismissModalViewControllerAnimated: YES];
} 
```

该函数被调用，并且 Enter 按钮上方的文本框被填充了虚拟文本，但点击没有被触发。请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:34:52.013

您正在调用的方法是不带参数的 btnEnter。看起来你没有定义。尝试传递一个类似`nil`或的参数`self`：

```
[self btnEnter:nil]; 
```

# asp.net-mvc-3 - MVC3 razor 视图错误 Microsoft JScript 运行时错误：对象不支持属性或方法 'datepicker'`

> ID：10468102
> 
> 赞同：3
> 
> 时间：2012-05-06T04:29:00.607
> 
> 标签：asp.net-mvc-3, razor, datepicker

我正在尝试为我的 Html.EditorFor 显示一个日期选择器

为此，我在 Views\Shared\EditorTemplate 文件夹中创建了一个 EditorTemplate，将其命名为 DateTime.cshtml

但它不工作，而是我得到错误---`Microsoft JScript runtime error: Object doesn't support property or method 'datepicker'`

请帮我解决这个错误

这是我的剃刀视图页面

```
@model MyWebRole.ViewModels.ViewModelEvents
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset style="width:50%">
        <legend>Event Details:</legend>
        <div>
            <table>

                <tr>
                 <td>

                        @Html.EditorFor(model => model.vmStartDate)
                        @Html.ValidationMessageFor(model => model.vmStartDate)
                    </td>

                </tr>
            </table>
        </div>
        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
} 
```

这是我的 DateTime.cshtml （粘贴在下面）

```
@model System.DateTime?

<div class="editor-field">
    @Html.TextBox("", String.Format("{0:MM/dd/yyyy}",(Model == DateTime.MinValue)? null : Model), new { @class="text"})
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $("#@ViewData.ModelMetadata.PropertyName").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'mm/dd/yy',
            gotoCurrent: true
        });
    });
</script> 
```

我可以让 datepicker 在另一个视图上工作

```
 @model MyWebRole.Models.Events
    @{
        ViewBag.Title = "Edit";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }

    @using (Html.BeginForm())
    {
        @Html.ValidationSummary(true)
        <fieldset style="width:50%">
            <legend>Event Details:</legend>
            <div>
                <table>

                    <tr>
                     <td>

                            @Html.EditorFor(model => model.StartDate)
                            @Html.ValidationMessageFor(model => model.StartDate)
                        </td>

                    </tr>
                </table>
            </div>
            <p>
                <input type="submit" value="Save" />
            </p>
        </fieldset>
    } 
```

两个剃刀视图之间的区别在于 --> 第一个（（datepicker 不工作）使用 ViewModel 作为模型，即（mywebrole.ViewModels.EventViewModel）

--> 第二个是使用 myWebrole.models.Events （日期选择器工作正常）

这是一个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:38:07.450

鉴于该错误，我认为问题出在选择器上。而不是*$("#@ViewData.ModelMetadata.PropertyName")*，试试这个：

```
$("input.text").datepicker({   ... 
```

（或者，您可以*@Html.TextBoxFor(model => model)*而不是*@Html.TextBox*，这样*输入*将获得*id=PropertyName*，因此选择器应该可以工作）。

此外，您确定*datepicker* JQuery 插件的脚本已成功加载到页面上，对吗？

# c++ - 指向多重继承中继承数据成员的指针

> ID：10468107
> 
> 赞同：2
> 
> 时间：2012-05-06T04:30:25.657
> 
> 标签：c++, inheritance, multiple-inheritance, diamond-problem

我正在尝试查看是否有办法从具有多重继承的类中获取指向数据成员的指针。有没有办法消除它们的歧义并仍然获得正确的偏移量？

```
struct Foo
{
    int BarData;
};

struct FooBarBaseA : public Foo
{
    int DataA;
};

struct FooBarBaseB : public Foo
{
    int DataB;  
};

struct FooBar : public FooBarBaseA, public FooBarBaseB 
{

};

Bar FooBar::* p1 = &FooBar::FooBarNodeA::BarData; // should be 0?
Bar FooBar::* p2 = &FooBar::FooBarNodeB::BarData; // should be 4 or 8? 
```

编辑：我确实希望它们是 2 个独立的值，但两者都是

```
int FooBar::FooBarBaseA::Foo:: *p1 = &FooBar::FooBarBaseA::Foo::BarData; and 
int FooBar::FooBarBaseB::Foo:: *p2 = &FooBar::FooBarBaseB::Foo::BarData; 
```

产生相同的值，如果继承树不是虚拟的，它们不应该是不同的偏移量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:41:58.633

我相信这段代码展示了您正在寻找的内容：

```
#include <iostream>
#include <typeinfo>

using std::cerr;

struct Foo
{
    int BarData;
};

struct FooBarBaseA : public Foo
{
    int DataA;
};

struct FooBarBaseB : public Foo
{
    int DataB;
};

struct FooBar : public FooBarBaseA, public FooBarBaseB
{

};

int main(int argc,char **argv)
{
  int FooBar::* p1 = static_cast<int FooBarBaseA::*>(&Foo::BarData);
  int FooBar::* p2 = static_cast<int FooBarBaseB::*>(&Foo::BarData);
  FooBar foo;
  foo.FooBarBaseA::BarData = 1;
  foo.FooBarBaseB::BarData = 2;
  cerr << (foo.*p1) << "\n";
  cerr << (foo.*p2) << "\n";
  return 0;
} 
```

输出：

```
1
2 
```

# javascript - 如何使用 Javascript 函数更改 div 的背景颜色

> ID：10468108
> 
> 赞同：0
> 
> 时间：2012-05-06T04:30:41.040
> 
> 标签：javascript

当使用以下javascript函数检查复选框时，我正在尝试更改背景颜色：我可以更改正文的背景颜色，但不能更改表单（div）的背景颜色。请帮我修复它。

```
<html>
<head>
<title>Comment Form</title>
 <link rel="stylesheet" type="text/css" media="screen" href="form1.css" />
</head>
<body>
<form>
          <div class="box">
            <h1>Contact Form</h1>
            <label>
               <span>First Name</span><span class="req">*</span>
               <input type="text" class="input_text" name="name" id="FirstName"/>
            </label><br />
             <label>
               <span>Last Name</span><span class="req">*</span>
               <input type="text" class="input_text" name="LastName" id="LastName"/>
            </label><br />
            <label>
             <span>Address</span><span class="req">*</span>
               <input type="text" class="input_text" name="Address" id="Address"/>
            </label><br />
             <label>
                <span>City</span><span class="req">*</span>
                <input type="text" class="input_text" name="City" id="City"/>
            </label><br />
            <label>
             <span>State(XX)</span><span class="req">*</span>
               <input type="text" class="input_text" name="State" id="State"/>
            </label><br />
            <label>
             <span>Zipcode(XXXXXX)</span><span class="req">*</span>
               <input type="text" class="input_text" name="Zipcode" id="Zipcode"/>
            </label><br />
            <label>
                <span>Comment</span><span class="req">*</span>
                <textarea name="text" class="input_text"rows="5" cols="25" ></textarea>

            </label><br />
            <label>
            <span>I agree to the Following Condition</span> <input type="checkbox" id="condition" name="terms" value="condition"/>
            </label><br />

            <label>Make the background Green for Xmas!<input type="checkbox" id="color1" name="color1"  value="color1" onclick="changeBGC('green')"></label>      
         </div>
         <script>
         function changeBGC(color)
         { 
            alert("in the function");
            document.body.style.backgroundColor = color;
            div.style.backgroundColor = color;\\ NOT WORKING
           }
           </script>
    </form>
    </body>
    </html> 
```

CSS 文件：

```
*{ margin:0; padding:0;}
body{ font:100% normal Arial, Helvetica, sans-serif; background:white;}
form,input,select,textarea{margin:0; padding:0; color:black;}

div.box{
margin:0 auto;
width:500px;
background:white;
position:relative;
border:none;
}

div.box h1 { 
color:red;
font-size:18px;
padding:5px 0 5px 5px;
border:none;

}

div.box label {
width:100%;
display: block;
background:white;
border:none;

padding:10px 0 10px 0;
}

div.box label span {
display: block;

font-size:15px;
float:left;
width:100px;
text-align:auto;
padding:0px 0px 0 0;
color:red;
}

div.box.input_text {
padding:10px 10px;
width:150px;
background:Black;
border-bottom: 1px double #171717;
border-top: 1px double #171717;
border-left:1px double #333333;
border-right:1px double #333333;
}

div.box .message{
padding:7px 7px;
width:350px;
background:#262626;
border-bottom: 1px double #171717;
border-top: 1px double #171717;
border-left:1px double #333333;
border-right:1px double #333333;
overflow:hidden;
height:150px;
}

div.box .button
{
margin:0 0 10px 0;
padding:4px 7px;
background:#CC0000;
border:0px;
position: relative;
top:10px;
left:382px;
width:100px;
border-bottom: 1px double #660000;
border-top: 1px double #660000;
border-left:1px double #FF0033;
border-right:1px double #FF0033;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:36:40.617

最好的选择是创建额外的类来改变你的 div 的颜色。

```
.diffrentColor {
    background-color: blue; /* for example blue or #00f*/ 
} 
```

那么你可以做 document.getElementsByClassName('box')[0].className += " diffrentColor";

快速获胜：

```
document.getElementsByClassName('box')[0].style.backgroundColor = color; 
```

# c++ - 使用 g++ 链接对象时的问题

> ID：10468113
> 
> 赞同：2
> 
> 时间：2012-05-06T04:31:56.713
> 
> 标签：c++, linux, opengl, g++, sdl

我正在尝试用 c++ 中的 opengl 制作一个简单的 obj 加载器。用一个命令编译所有东西都可以正常工作，

```
g++ -o main main.cpp timer.cpp screen.cpp obj_loader.cpp `sdl-config --cflags --libs` `pkg-config --cflags --libs glu` 
```

不返回错误。

单独编译对象也可以正常工作，

```
g++ main.cpp -o main.o -c -Wall `sdl-config --cflags --libs` `pkg-config glu --cflags --libs`
g++ obj_loader.cpp -o obj_loader.o -c -Wall `sdl-config --cflags --libs` `pkg-config glu --cflags --libs`
g++ timer.cpp -o timer.o -c -Wall `sdl-config --cflags --libs` `pkg-config glu --cflags --libs`
g++ screen.cpp -o screen.o -c -Wall `sdl-config --cflags --libs` `pkg-config glu --cflags --libs` 
```

也没有返回错误。

但是，在运行决赛时

```
g++ main.o obj_loader.o timer.o screen.o -o main 
```

我得到一堆未定义的参考错误：

```
main.o: In function `draw()':
main.cpp:(.text+0x1d): undefined reference to `glColor3f'
main.cpp:(.text+0x27): undefined reference to `glBegin'
main.cpp:(.text+0x36): undefined reference to `glVertex2i'
main.cpp:(.text+0x45): undefined reference to `glVertex2i'
main.cpp:(.text+0x54): undefined reference to `glVertex2i'
main.cpp:(.text+0x63): undefined reference to `glVertex2i'
main.cpp:(.text+0x68): undefined reference to `glEnd'
main.o: In function `main':
main.cpp:(.text+0xf8): undefined reference to `SDL_PollEvent'
main.cpp:(.text+0x10b): undefined reference to `glClear'
main.cpp:(.text+0x115): undefined reference to `SDL_GL_SwapBuffers'
main.cpp:(.text+0x11a): undefined reference to `glFinish'
main.cpp:(.text+0x14e): undefined reference to `SDL_Delay'
timer.o: In function `Timer::start()':
timer.cpp:(.text+0x4d): undefined reference to `SDL_GetTicks'
timer.o: In function `Timer::pause()':
timer.cpp:(.text+0xa6): undefined reference to `SDL_GetTicks'
timer.o: In function `Timer::unpause()':
timer.cpp:(.text+0xe5): undefined reference to `SDL_GetTicks'
timer.o: In function `Timer::tick()':
timer.cpp:(.text+0x136): undefined reference to `SDL_GetTicks'
timer.o: In function `Timer::get_ticks()':
timer.cpp:(.text+0x172): undefined reference to `SDL_GetTicks'
screen.o: In function `init()':
screen.cpp:(.text+0xa): undefined reference to `SDL_Init'
screen.cpp:(.text+0x31): undefined reference to `SDL_SetVideoMode'
screen.cpp:(.text+0x64): undefined reference to `SDL_WM_SetCaption'
screen.o: In function `init_GL()':
screen.cpp:(.text+0x80): undefined reference to `glClearColor'
screen.cpp:(.text+0x8a): undefined reference to `glMatrixMode'
screen.cpp:(.text+0x8f): undefined reference to `glLoadIdentity'
screen.cpp:(.text+0xc0): undefined reference to `glOrtho'
screen.cpp:(.text+0xca): undefined reference to `glMatrixMode'
screen.cpp:(.text+0xcf): undefined reference to `glLoadIdentity'
screen.cpp:(.text+0xd4): undefined reference to `glGetError'
screen.o: In function `clean_up()':
screen.cpp:(.text+0xf4): undefined reference to `SDL_Quit'
collect2: ld returned 1 exit status 
```

我包含的库是：

```
#include <iostream>
#include <fstream>
#include <string>
#include <vector>

#include "SDL/SDL.h"
#include "SDL/SDL_opengl.h"

#include "GL/gl.h"
#include "GL/glu.h" 
```

和我的 Makefile：

```
CC=g++
SDL_FLAGS=`sdl-config --cflags --libs`
GL_FLAGS=`pkg-config glu --cflags --libs`

CFLAGS=-c -Wall

FLAGS=$(CFLAGS) $(SDL_FLAGS) $(GL_FLAGS)
LDFLAGS=

SOURCES=main.cpp obj_loader.cpp timer.cpp screen.cpp
OBJECTS=$(SOURCES:.cpp=.o)
EXECUTABLE=main

all: $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS)
    $(CC) $(OBJECTS) -o $@ $(LDFLAGS)

.cpp.o:
    $(CC) $< -o $@ $(FLAGS)

clean:
    rm -f *o main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T04:37:47.357

是的……所有这些东西都被退回来了`--libs`？您需要这些才能正确链接最终的可执行文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T04:54:50.793

`sdl-config`并`pkg-config`取两个标志：`--cflags`和`--libs`。当您将源文件编译为目标文件时，需要这些标志中的第一个。链接时需要这些标志中的第二个。当您使用单个命令编译所有内容时，两个阶段都由单个命令处理，因此您应该同时传递`--cflags`and 和to`--libs`是很自然的。现在您已经分离了这些阶段，您需要在正确的时间传递正确的选项。`sdl-config``pkg-config``sdl-config``pkg-config`

```
g++ main.cpp -o main.o -c -Wall `sdl-config --cflags` `pkg-config glu --cflags`
g++ obj_loader.cpp -o obj_loader.o -c -Wall `sdl-config --cflags` `pkg-config glu --cflags`
g++ timer.cpp -o timer.o -c -Wall `sdl-config --cflags` `pkg-config glu --cflags`
g++ screen.cpp -o screen.o -c -Wall `sdl-config --cflags` `pkg-config glu --cflags`

g++ main.o obj_loader.o timer.o screen.o -o main `sdl-config --libs` `pkg-config glu --libs` 
```

在您的 makefile 中，这意味着按如下方式配置变量：（我还对您的 Makefile 进行了其他一些小修复）

```
CC=g++
LD=g++

CFLAGS=-c -Wall $(shell sdl-config --cflags) $(shell pkg-config glu --cflags)
LDFLAGS=$(shell sdl-config --libs) $(shell pkg-config glu --libs)

SOURCES=main.cpp obj_loader.cpp timer.cpp screen.cpp
OBJECTS=$(SOURCES:.cpp=.o)
EXECUTABLE=main

all: $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS)
    $(LD) $(LDFLAGS) $(OBJECTS) -o $@

.cpp.o:
    $(CC) $(CFLAGS) $< -o $@

clean:
    rm -f *.o main 
```

关于你的 Makefile 还有很多要批评的地方——你可能会在这里删除大部分的动作行，因为 GNU Make 将它们作为隐式内置的。您可能需要添加规则来指定`.o`文件的依赖关系——每个`.cpp`文件可能都包含文件，并且当它们依赖的文件发生更改时`.h`，make 需要知道重新编译文件。`.cpp``.h`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T04:38:16.223

我没有看到任何`-llibraryname`告诉 g++ 与 opengl 链接。我本来希望在构建 main 本身的 g++ 行上看到这一点（即以“main”结尾的行）。据我所知，.o 文件本身不包含有关在何处找到库以解析其引用的信息。该信息必须作为`-l`命令行上的开关传递。

# joomla - 如何在 Joomla 2.5 中获取用户组名称

> ID：10468115
> 
> 赞同：9
> 
> 时间：2012-05-06T04:32:42.973
> 
> 标签：joomla, joomla2.5

我正在编写一个我在 Joomla 1.7 中开发的 Joomla 2.5 组件。我一直在使用这样的代码：

```
$user = JFactory::getUser();
$groups = $user->get('groups'); 
```

$groups 数组将包含一个以组名作为索引的 id 列表。Joomla 2.5 似乎已经废弃了这个功能。如果不直接查询数据库，我一直无法找出如何获取组名。是否有任何方法可以获取用户所属的组列表，而无需求助于查询数据库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T19:17:44.127

我在下面生成的代码获取用户所属的所有组的名称，并将它们存储在由换行符分隔的变量**$groupNames中：**

```
foreach ($user->groups as $groupId => $value){
    $db = JFactory::getDbo();
    $db->setQuery(
        'SELECT `title`' .
        ' FROM `#__usergroups`' .
        ' WHERE `id` = '. (int) $groupId
    );
    $groupNames .= $db->loadResult();
    $groupNames .= '<br/>';
}
print $groupNames; 
```

它在技术上查询数据库，但通过 Joomla API 完成。这对我来说在 Joomla 2.5 上运行良好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T23:31:16.507

是的，这[改变了](http://joomlacode.org/gf/project/joomla/tracker/?action=TrackerItemEdit&tracker_item_id=28177)。

但是你应该使用的是：

```
JFactory::getUser()->getAuthorisedGroups(); 
```

要不就`getUserGroups`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T20:53:44.333

真实片段：

```
 $user = JFactory::getUser();
            $db = JFactory::getDBO();

    $db->setQuery($db->getQuery(true)
        ->select('*')
        ->from("#__usergroups")
    );
    $groups=$db->loadRowList();

            $userGroups = $user->groups;
            $return=array();

          foreach ($groups as $key=>$g){
            if (array_key_exists($g[0],$userGroups)) array_push($return,$g[4]);
          }

          $groups=$return;

      /////printing groupnames for current user/////////////
         print_r($groups); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:15:29.203

这里是：

```
<?php

    $user =& JFactory::getUser();

    foreach ($user->groups as $key => $value){
        echo $key.'<br>';
    }

?> 
```

这会将所有用户组名称打印到屏幕上。用户组名称是数组 $user->groups 的“键”。

# ios - NSMutableURLRequest 转换为 ASIFormDataRequest

> ID：10468116
> 
> 赞同：1
> 
> 时间：2012-05-06T04:33:04.247
> 
> 标签：ios, asihttprequest, nsmutableurlrequest, asiformdatarequest

我已经编写了同伴代码：

```
NSString *urlString = [NSString stringWithFormat:ADDRESS,action];
postStr = @"user_name=Thomas Tan&phone=01234567891&password=123456";
NSData *myRequestData = [NSData dataWithBytes:[postStr UTF8String] length:[postStr length]];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];
[request setHTTPBody: myRequestData];
NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *responseString = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding]; 
NSLog(@"%@",responseString); 
```

它运行良好，但现在我想使用 asihttprequest 框架，那么如何更改上面的代码，我已经编写了代码，但它无法得到正确的结果，只是得到服务器错误信息。所以有什么问题？

```
NSString *urlString = [NSString stringWithFormat:ADDRESS,action];

NSURL *url = [NSURL URLWithString:urlString];
ASIFormDataRequest *requeset = [ASIFormDataRequest requestWithURL:url];
[requeset setRequestMethod:@"POST"];
[requeset setPostValue:@"Thomas Tan" forKey:@"user_name"];
[requeset setPostValue:@"01234567891" forKey:@"phone"];
[requeset setPostValue:@"123456" forKey:@"password"];
[requeset startSynchronous];
NSError *error = [requeset error];
if (!error) {
    NSString *re = [requeset responseString];
    NSLog(@"%@",re);
}
NSLog(@"%@",error); 
```

先感谢您。

更新：

```
NSString *urlString = [NSString stringWithFormat:ADDRESS,action];
NSURL *url = [NSURL URLWithString:urlString];

ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setRequestMethod:@"POST"]; 
[request appendPostData:[@"user_name=Thomas Tan&phone=01234567891&password=123456" dataUsingEncoding:NSUTF8StringEncoding]];
[request startSynchronous];
NSError *error = [request error];
if (!error) {
    NSString *re = [request responseString];
    NSLog(@"%@",re);
}
NSLog(@"%@",error); 
```

我使用上面的代码，它也不能得到相同的结果，并且错误不是零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T06:09:34.533

您的 ASIHTTP 代码与您的 NSURLConnection 代码做的事情不同。ASIFormDataRequest 将自动：

*   将 Content-Type 标头设置为[`application/x-www-form-urlencoded`](http://www.w3.org/TR/html4/interact/forms.html#h-17.13.4.1)
*   URL 编码的参数

这通常正是您想要的，但是如果您的 NSURLConnection 代码的行为正确，而 ASIHTTP 的行为不正确，那么您需要更改为[自定义 ASIHTTP POST](http://allseeing-i.com/ASIHTTPRequest/How-to-use#put_requests_and_custom_posts)并使用 ASIHTTPRequest，而不是 ASIHTTPFormDataRequest，然后手动设置 Conten-type回到`application/x-www-form-urlencoded`：

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setRequestMethod:@"POST"]; 
[request addRequestHeader:@"Content-Type" value:@"application/x-www-form-urlencoded"];
[request appendPostData:[@"user_name=Thomas Tan&phone=01234567891&password=123456" dataUsingEncoding:NSUTF8StringEncoding]]; 
```

这样做，并使用[Wireshark](http://www.wireshark.org)检查发送到服务器的确切内容，我可以看到发送的 POST 数据仍然不太相同（左侧为 ASIHTTP，右侧为 NSURLConnection）：

![后差异](../Images/1f9db7c8913eeaf88310ebba3a415827.png)

但内容类型、长度和实际数据是相同的。此时，我希望您的服务器返回相同的结果。如果仍然没有，您可以编辑 ASIhTTP 请求参数以进行匹配。

# mysql - 193：%1 不是有效的 Win32 应用程序错误，Ruby (1.9.3) on Rails(3.2.3) 和 MySQL(5.5) 在 Windows 7

> ID：10468118
> 
> 赞同：1
> 
> 时间：2012-05-06T04:33:14.733
> 
> 标签：mysql, ruby-on-rails, ruby, windows

我似乎无法运行配置为 MySQL 的 rail 应用程序。当我运行项目时，我收到以下错误：

`193: %1 is not a valid Win32 application. - C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql-2.8.1-x86-mingw32/lib/1.9/mysql_api.so`

我注意到其他人已经做到了这一点，但我没有找到任何适合我的解决方案。这是我到目前为止所尝试的：

*   复制`libmysql.dll`到 ruby​​ bin 文件夹
*   尝试过旧版本的 MySQL (5.0)
*   在 regedit 上检查 MySQL 的 ImagePath

有人可以在这里提供指导吗？这只是一个失败的原因吗？使用 Linux 或其他版本的 Ruby/Rails/MySQL 组合可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T19:40:09.280

看起来您安装了 MySQL gem 的二进制预编译版本，这需要安装特定版本的 MySQL。

更重要的是，它需要特定版本的`libmysql.dll`可用，`PATH`以便 gem 可以使用它。

我建议您卸载预编译的 gem 并继续执行此处描述的手动编译步骤：

[http://blog.mmediasys.com/2011/07/07/installing-mysql-on-windows-7-x64-and-using-ruby-with-it/](http://blog.mmediasys.com/2011/07/07/installing-mysql-on-windows-7-x64-and-using-ruby-with-it/)

之前也回答过这个问题：

[Windows中用于mysql 5.5的Ruby Gem](https://stackoverflow.com/questions/7897898/ruby-gem-for-mysql-5-5-in-windows/7903348#7903348)

[Windows 是否支持 Datamapper 的 dm_mysql_adapter gem？](https://stackoverflow.com/questions/8164926/is-datamappers-dm-mysql-adapter-gem-supported-on-windows/8171711#8171711)

[终于在 Windows 64 位中安装 MySQL for Rails，现在](https://stackoverflow.com/questions/7328476/finally-installed-mysql-for-rails-in-windows-64-bit-and-now/7335364#7335364)

[在 ruby​​ on rails gem time 中的 Windows Mysql 本机扩展问题](https://stackoverflow.com/questions/7275061/on-windows-mysql-native-extension-prob-in-ruby-on-rails-gem-time/7275738#7275738)

希望有帮助。

# objective-c - 从“struct myStruct *”分配给“struct myStruct *”的不兼容指针类型

> ID：10468120
> 
> 赞同：0
> 
> 时间：2012-05-06T04:33:42.747
> 
> 标签：objective-c, ios, incompatibletypeerror

我正在努力学习目标c。

这都在我的 .m 文件中

```
@interface TetrisEngine ()
@property (nonatomic, readwrite) struct TetrisPiece *currPiece;
@end

struct TetrisPiece {
    int name;
    struct {
        int colOff, rowOff;
    } offsets[TetrisPieceRotations][TetrisPieceBlocks];
}; 
```

下一个人的内容应该不相关。我假设返回值是您需要查看的所有内容以提供帮助

```
static struct TetrisPiece pieces[TetrisNumPieces] = {...};

@implementation TetrisEngine
@synthesize currPiece;

- (void) nextPiece
    currPiece = &pieces[ ((random() % (TetrisNumPieces * 113)) + 3) % TetrisNumPieces]; 
```

这就是我得到错误的地方： Incompatible pointer types assignmenting to 'struct TetrisPiece *' from 'struct TetrisPiece *'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T04:59:25.363

需要为 c 类型指针显式声明文件 var，如下所示...

```
@interface TetrisEngine () {
    // added curly braces and this
    struct TetrisPiece *currPiece;
}

@property (nonatomic, readwrite) struct TetrisPiece *currPiece;
@end 
```

其余的应该按原样工作。尽管我同意另一个答案，即在 oo 中有更现代的方法来声明结构。

# c - 如何在 C 中创建结构数组？

> ID：10468128
> 
> 赞同：126
> 
> 时间：2012-05-06T04:35:23.597
> 
> 标签：c, arrays, struct

我正在尝试制作一个结构数组，其中每个结构代表一个天体。

我对结构没有太多经验，这就是为什么我决定尝试使用它们而不是一大堆数组的原因。但是，我不断遇到许多不同的错误。我试图实现我在各种线程和 StackOverflow 上看到的技术（例如[Array of structs in C](https://stackoverflow.com/questions/2575921/array-of-structs-in-c)和[C - initialize array of structs](https://stackoverflow.com/questions/4173518/c-initialize-array-of-structs)），但并非所有这些技术都适用。

对于那些已经读到这里的人的更多信息：我不需要任何这些都是动态的，我事先知道/定义了所有内容的大小。我还需要它是一个全局数组，因为我在几个不同的方法中访问它，这些方法已经定义了参数（即 GLUT 方法）。

这就是我在标题中定义结构的方式：

```
struct body
{
    double p[3];//position
    double v[3];//velocity
    double a[3];//acceleration
    double radius;
    double mass;
}; 
```

在定义结构的内部之前，我有一个我正在定义的其他全局变量的列表，其中一个是这个结构的数组（基本上，如果我在我的模糊发言中太不清楚，下面的行在上面的东西之上）：

```
struct body bodies[n]; 
```

正如你所知，`n`这是我合法定义的东西（即`#define n 1`）。

我在几种不同的方法中使用这个数组，但最简单且占用空间最少的方法是我的 main.js 的简化形式。在这里，我初始化每个结构中的所有变量，只是为了在我以某种方式修改它们之前设置变量：

```
 int a, b;
 for(a = 0; a < n; a++)
 {
        for(b = 0; b < 3; b++)
        {
            bodies[a].p[b] = 0;
            bodies[a].v[b] = 0;
            bodies[a].a[b] = 0;
        }
        bodies[a].mass = 0;
        bodies[a].radius = 1.0;
 } 
```

我面临的当前错误是`nbody.c:32:13: error: array type has incomplete element type`第 32 行是我制作结构数组的位置。

最后一个澄清，我的标题是指上面的空间，`int main(void)`但在同一个`*.c`文件中。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-05-06T04:47:51.113

```
#include<stdio.h>
#define n 3
struct body
{
    double p[3];//position
    double v[3];//velocity
    double a[3];//acceleration
    double radius;
    double mass;
};

struct body bodies[n];

int main()
{
    int a, b;
     for(a = 0; a < n; a++)
     {
            for(b = 0; b < 3; b++)
            {
                bodies[a].p[b] = 0;
                bodies[a].v[b] = 0;
                bodies[a].a[b] = 0;
            }
            bodies[a].mass = 0;
            bodies[a].radius = 1.0;
     }

    return 0;
} 
```

这很好用。顺便说一句，您的问题不是很清楚，因此请将源代码的布局与上述内容相匹配。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2019-01-14T10:40:47.483

初始化结构数组的另一种方法是显式初始化数组成员。如果没有太多的结构和数组成员，这种方法非常有用且简单。

每次声明结构变量时，使用说明`typedef`符避免重复使用语句：`struct`

```
typedef struct
{
    double p[3];//position
    double v[3];//velocity
    double a[3];//acceleration
    double radius;
    double mass;
}Body; 
```

然后声明你的结构数组。每个元素的初始化都伴随着声明：

```
Body bodies[n] = {{{0,0,0}, {0,0,0}, {0,0,0}, 0, 1.0}, 
                  {{0,0,0}, {0,0,0}, {0,0,0}, 0, 1.0}, 
                  {{0,0,0}, {0,0,0}, {0,0,0}, 0, 1.0}}; 
```

重复一遍，如果您没有太多的数组元素和大型结构成员，并且如您所说，您对更动态的方法不感兴趣，这是一个相当简单和直接的解决方案。如果结构成员使用命名的枚举变量（而不仅仅是上面示例中的数字）进行初始化，这种方法也很有用，这样它可以让代码阅读者更好地了解结构及其成员的目的和功能。应用程序。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-07-02T22:20:30.730

因此，通过使用将它们放在一起`malloc()`：

```
int main(int argc, char** argv) {
    typedef struct{
        char* firstName;
        char* lastName;
        int day;
        int month;
        int year;

    }STUDENT;

    int numStudents=3;
    int x;
    STUDENT* students = malloc(numStudents * sizeof *students);
    for (x = 0; x < numStudents; x++){
        students[x].firstName=(char*)malloc(sizeof(char*));
        scanf("%s",students[x].firstName);
        students[x].lastName=(char*)malloc(sizeof(char*));
        scanf("%s",students[x].lastName);
        scanf("%d",&students[x].day);
        scanf("%d",&students[x].month);
        scanf("%d",&students[x].year);
    }

    for (x = 0; x < numStudents; x++)
        printf("first name: %s, surname: %s, day: %d, month: %d, year: %d\n",students[x].firstName,students[x].lastName,students[x].day,students[x].month,students[x].year);

    return (EXIT_SUCCESS);
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-06-08T18:48:35.337

我想你也可以这样写。我也是一名学生，所以我理解你的挣扎。回复有点晚，但还可以。

```
#include<stdio.h>
#define n 3

struct {
    double p[3];//position
    double v[3];//velocity
    double a[3];//acceleration
    double radius;
    double mass;
}bodies[n]; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-05-06T04:41:26.697

移动

```
struct body bodies[n]; 
```

之后

```
struct body
{
    double p[3];//position
    double v[3];//velocity
    double a[3];//acceleration
    double radius;
    double mass;
}; 
```

休息一切看起来都很好。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-10-16T17:21:16.247

使用指针的解决方案：

```
#include<stdio.h>
#include<stdlib.h>
#define n 3
struct body
{
    double p[3];//position
    double v[3];//velocity
    double a[3];//acceleration
    double radius;
    double *mass;
};

int main()
{
    struct body *bodies = (struct body*)malloc(n*sizeof(struct body));
    int a, b;
     for(a = 0; a < n; a++)
     {
            for(b = 0; b < 3; b++)
            {
                bodies[a].p[b] = 0;
                bodies[a].v[b] = 0;
                bodies[a].a[b] = 0;
            }
            bodies[a].mass = 0;
            bodies[a].radius = 1.0;
     }

    return 0;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-06T04:50:44.400

该错误意味着编译器在声明结构数组之前无法找到结构类型的定义，因为您说您在头文件中有结构的定义，`nbody.c`然后错误就在你应该检查你是否正确地包含了头文件。检查您`#include`的 's 并确保在声明该类型的任何变量之前完成了结构的定义。

# php - 使用 foreach 循环初始化变量

> ID：10468130
> 
> 赞同：1
> 
> 时间：2012-05-06T04:35:41.723
> 
> 标签：php, arrays, foreach, variable-assignment

我建立了一个空的关联数组，其键名指的是提交的帖子数据。我可以很好地捕获 postdata，但是在尝试实例化名称与数组键匹配的变量时遇到了麻烦。

例如：

```
$insArray = array('rUsername'=>'', 'rPass'=>'', 'rQuestion'=>'', 'rAnswer'=>'', 'rFName'=>'', 'rLName'=>'', 'rBDateD'=>'', 'rBDateM'=>'', 'rBDateY'=>'', 'rHCheck'=>'', 'rHCeckOption'=>'', 'rEmail'=>'');

foreach($insArray as $key=>$value){
    if (filter_input(INPUT_POST, $key) != ''){
        $key = stripslashes(filter_input(INPUT_POST, $key)); 
        $insArray[$key] = $key;
    }       
} 
```

第一行创建空数组，然后 foreach 循环遍历该数组。现在变得棘手了。

`filter_input(INPUT_POST, $key)`捕获位于与当前键匹配的帖子数据中的值，在这种情况下为 rUsername

`$key`是问题所在。我希望新变量的 NAME 是关联键名，例如，我想在第一次迭代中将 $key 替换为 $rUsername，在第二次迭代中替换为 $rPass，依此类推。我尝试使用两个 $$，但我知道这是不对的。以前从未尝试过这样做，但如果我能弄清楚会有所帮助。

***更新：***

这是最终代码，它是所提供的两个答案的组合。

```
if (isset($_POST['submit'])) {
    //Build array of variables to be put into database
    $insArray = array('rUsername'=>'', 'rPassword'=>'', 'rQuestion'=>'', 'rAnswer'=>'', 'rFName'=>'', 'rLName'=>'', 'rBDateD'=>'', 'rBDateM'=>'', 'rBDateY'=>'', 'rHCheck'=>'', 'rHCheckOption'=>'', 'rEmail'=>'');

    foreach(array_keys($insArray) as $key){
        $insArray[$key] = filter_input(INPUT_POST, $key);
        $$key = filter_input(INPUT_POST, $key);
    }
} 
```

给了我想要的输出，谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T04:44:56.530

您根本没有访问 $_POST ，所以您所做的只是获取一些您自己定义的数组成员，过滤它们以查找有害的 POST 字符（为什么要尝试注入自己的代码？），然后从那些自定义的键值。

如果我猜对了你想要什么，它应该是这样的：

```
foreach(array_keys($insArray) as $key) {
    $insArray[$key] = stripslashes(filter_input(INPUT_POST, $_POST[$key]));
} 
```

stripslashes 的使用表明您使用的是启用了 magic_quotes 的 PHP 脑残版本。您应该升级到现代版本的 PHP 和/或关闭它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T04:45:19.573

解决方案是改变

```
$key = stripslashes(filter_input(INPUT_POST, $key)); 
```

到

```
$$key = stripslashes(filter_input(INPUT_POST, $key)); 
```

见[http://www.php.net/manual/en/language.variables.variable.php](http://www.php.net/manual/en/language.variables.variable.php)

另外，重新检查你的代码，它正在做一些错误..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T06:45:10.957

如果我理解正确，我将建议这种方法：

```
$defaultValues = array('rUsername'=>'', 'rPass'=>'', 'rQuestion'=>'', 'rAnswer'=>'', 'rFName'=>'', 'rLName'=>'', 'rBDateD'=>'', 'rBDateM'=>'', 'rBDateY'=>'', 'rHCheck'=>'', 'rHCeckOption'=>'', 'rEmail'=>'');
$values = array_map('stripslashes', array_merge($defaultValues, array_filter($_POST)));
extract($values, EXTR_SKIP);
echo $rUsername;
echo $rPass;
......... 
```

通过使用上面的代码段，您必须考虑以下几点

*   我将[提取](http://co.php.net/manual/en/function.extract.php)函数与 EXTR_SKIP 一起使用，因此您不会覆盖现有变量。确保仅在代码中使用您需要的变量并适当地清理它们。

*   通过在 $_POST 超全局上使用[array_filter可以“擦除”所有空或空变量。](http://co.php.net/manual/en/function.array-filter.php)因此，如果预期的密钥不是通过 $_POST 发送的，它默认为 $defaultValues 数组指定的值。

*   我不太明白为什么您使用[filter_input](http://php.net/manual/en/function.filter-input.php)没有第三个参数（过滤器常量）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T04:49:32.390

希望这会有所帮助，如果没有，可能是我误解了这个问题。

代替

```
$key = stripslashes(filter_input(INPUT_POST, $key)); 
$insArray[$key] = $key; 
```

尝试

```
$insArray[$key] =stripslashes(filter_input(INPUT_POST, $key)); 
```

然后在foreach循环之后

```
extract($insArray); 
```

# javascript - js 打开弹出窗口并在另一个页面中访问其元素

> ID：10468136
> 
> 赞同：7
> 
> 时间：2012-05-06T04:37:01.867
> 
> 标签：javascript, jquery, popup

我有js弹出窗口的问题。

我打开一个弹出窗口并尝试在另一个页面页面中访问它的元素，没有成功，我不想重新加载弹出窗口源，我只是想访问打开的弹出窗口的元素

前任 -

*   第 1 页 - 使用 html5 音乐播放器打开弹出窗口
*   第二页 - 当用户点击主页上的按钮时需要暂停音乐

第 1 页

```
var popup = window.open("test.html","mypopup","width=500,height=300"); 
```

第二页我想在不重新加载弹出窗口的情况下访问 mypopup windows 元素

我只需要如何在不使用 JS 或 JQuery 中断其源的情况下访问打开的弹出元素的方法

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T04:57:12.383

同源（域、端口和协议）？

纯JS：

从第1页

```
var popup = window.open("test.html","mypopup","width=500,height=300");
popup.document.getElementById("player").someFunction(); 
```

从第 2 页开始

```
var popup = window.open('','mypopup');
// now popup is known again
popup.document.getElementById("player").someFunction(); 
```

# c# - 如何以编程方式在 Active Directory 中搜索打印机

> ID：10468139
> 
> 赞同：3
> 
> 时间：2012-05-06T04:37:59.920
> 
> 标签：c#, active-directory, printers

尝试使用 C# 在 Active Directory 中查找打印机/共享。

这是我适用于用户的示例代码，但是我看不到能够使用相同的概念找到打印机。（我是 Active Directory 的新手）。

```
 DirectoryEntry entry = new DirectoryEntry();
    entry.Path = "LDAP://xxx.xxx.xx.xx/CN=Printers;DC=domainName, DC=com";
    entry.Username = @"domainName.com\Administrator";
    entry.Password = "admin";

    DirectorySearcher search = new DirectorySearcher(entry);
    search.Filter = "(objectCategory=printQueue)";
    SearchResult result = search.FindOne();

    if (result != null)
    {
        ResultPropertyCollection fields = result.Properties;

        foreach (String ldapField in fields.PropertyNames)
        {

            foreach (Object myCollection in fields[ldapField])
                Console.WriteLine(String.Format("{0,-20} : {1}",
                              ldapField, myCollection.ToString()));
        }
    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T11:24:13.987

与用户 ( `CN=Users`) 相比，安装后 Active Directory 中没有`CN=Printers`容器。

打印机在相关计算机容器的 Active Directory 中发布。相关的计算机容器是什么意思？好吧，打开 Active Directory 用户和计算机 MMC 管理单元并按照以下步骤操作：

1.  在视图菜单中选择高级功能。
2.  在视图菜单中选择用户、联系人、组和计算机作为容器。
3.  导航到您的打印机所属的计算机对象（现在显示为容器）。
4.  单击计算机容器的加号。在那里您将看到打印机对象。

因此，您会看到打印机在 Active Directory 中的相关计算机容器（打印机所属）中发布，而不是在一个通用容器中，例如`CN=Printers`.

因此，要在 Active Directory 中搜索打印机对象，您必须指定不同的 LDAP 路径。例如，您可以将 Active Directory 的根指定为搜索根：

```
using (DirectoryEntry entry = new DirectoryEntry())
{
  entry.Path = "LDAP://xxx.xxx.xxx.xxx/DC=domainName,DC=com";
  entry.Username = @"domainName.com\Administrator";
  entry.Password = "SecurePassword";

  using (DirectorySearcher search = new DirectorySearcher(entry))
  {
    search.Filter = "(objectCategory=printQueue)";
    SearchResult result = search.FindOne();

    if (result != null)
    {
      ResultPropertyCollection fields = result.Properties;

      foreach (String ldapField in fields.PropertyNames)
      {
        foreach (Object myCollection in fields[ldapField])
          Console.WriteLine(String.Format("{0,-20} : {1}",
                          ldapField, myCollection.ToString()));
      }
    }
  }
} 
```

当然，您也可以将共享打印机的计算机的 LDAP 路径指定为搜索根目录。例如，如果您的打印机在名为的计算机上共享，`server10`并且该计算机位于`CN=Computers`容器中，则指定此 LDAP 路径：

```
LDAP://xxx.xxx.xxx.xxx/CN=server10,CN=Computers,DC=domainName,DC=com 
```

如果您在域控制器上共享打印机，则 LDAP 路径会略有不同（因为默认情况下域控制器计算机对象位于`OU=Domain Controllers`组织单元中）：

```
LDAP://xxx.xxx.xxx.xxx/CN=DomainControllerName,OU=Domain Controllers,DC=domainName,DC=com 
```

# css - 按钮图像问题（css）

> ID：10468146
> 
> 赞同：0
> 
> 时间：2012-05-06T04:38:40.670
> 
> 标签：css

这是我制作的贝宝精灵的CSS..

下图显示了我们在 Internet Explorer 中获得的内容以及在 Firefox 中获得的内容。

显示精灵的代码是：

```
.ppsprite {
background: url('/images/paypal_sprite.png')no-repeat scroll 0px 0px transparent;
width:200px;
height:100px;
position:absolute;
left:54px;
}
 .ppsprite:hover {
background: url('/images/paypal_sprite.png')no-repeat scroll 0px -100px transparent;
} 
```

显示精灵的代码 ( html )

```
<input class="ppsprite" type="image" name="submit" alt=""> 
```

屏幕截图（Internet Explorer 和 Firefox）

![在此处输入图像描述](../Images/de050b66c064ec29704bf6768108b4a4.png)

该精灵在所有浏览器中都能完美运行，但您可以在 IE 中看到一个糟糕的边框和左上方的一种丢失的图像图标。在 chrome 和 safari 中，几乎相同（但在 sprite 顶部显示 alt 文本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:48:14.037

将 src 属性添加到您的输入标签：

```
<input class="ppsprite" type="image" name="submit" alt="" src="images/blank.gif"> 
```

只需创建一个名为 blank.gif 的文件，您无需对其进行任何操作，只需确保它位于正确的目录中即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T04:45:33.947

不要为您的精灵使用图像输入 - 显然这*应该*显示一个断开的链接图标，因为它必须包含一个图像（通过`src`-attrtibute 设置）但您没有设置一个。也许您可以将 替换为`input`（`a`链接）或按钮（`type="button"`或`type="submit"`）。后者应该可以在不更改任何其他内容的情况下工作，因为 a`type="submit"`仍然会提交表单，就像这样`type="image"`做一样（在这种情况下，我认为您不需要知道 klicked x/y 坐标）。

之所以会出现边框，是因为在某些浏览器中输入图像默认具有边框 - 只需设置`border:0;`为`.ppsprite`（但如前所述，在这种情况下您根本不应该使用输入图像）。

# php - Symfony2 项目不能与 JSMserializerbundle 和 DoctrineMongoDBBundle 一起工作

> ID：10468147
> 
> 赞同：2
> 
> 时间：2012-05-06T04:38:42.613
> 
> 标签：php, symfony, doctrine

我的 symfony2 项目在开发环境中完美运行。当我切换到生产环境时出现问题。当我调用具有实体数组的控制器并使用 JSMserializer 将其序列化为 json 时，它会崩溃。客户端仍然收到响应，但 json 为空，甚至没有“[]”。当我查看日志时，我可以看到这些错误：

```
 security.INFO: Populated SecurityContext with an anonymous Token [] []
    request.INFO: Matched route "employe_index" (parameters: "_controller": "Pisteur\WebRefugeManager\Bundle\CoreBundle\Controller\EmployeController::indexAction", "_route": "employe_index") [] []
    request.CRITICAL: Doctrine\Common\Annotations\AnnotationException: [Semantical Error] The annotation "@proxy" in method Doctrine\MongoDB\Cursor::current() was never imported. Did you maybe forget to add a "use" statement for this annotation? (uncaught exception) at /home/wpdemo/symfony/vendor/doctrine-common/lib/Doctrine/Common/Annotations/AnnotationException.php line 52 [] [] 
```

我在谷歌搜索了错误，发现了这两个主题：

[https://github.com/doctrine/mongodb-odm/issues/255](http://github.com/doctrine/mongodb-odm/issues/255) [https://github.com/schmittjoh/JMSSerializerBundle/issues/51](https://github.com/schmittjoh/JMSSerializerBundle/issues/51)

这些主题对我没有帮助，我真的不明白这个问题。有人有想法吗？

**[编辑]** 这是我的配置：

开发：

```
imports:
    - { resource: config.yml }

framework:
    router:   { resource: "%kernel.root_dir%/config/routing_dev.yml" }
    profiler: { only_exceptions: false }

web_profiler:
    toolbar: true
    intercept_redirects: false

monolog:
    handlers:
        main:
            type:  stream
            path:  %kernel.logs_dir%/%kernel.environment%.log
            level: debug
        firephp:
            type:  firephp
            level: info

assetic:
    use_controller: true 
```

产品：

```
imports:
    - { resource: config.yml }

monolog:
    handlers:
        main:
            type:         fingers_crossed
            action_level: error
            handler:      nested
        nested:
            type:  stream
            path:  %kernel.logs_dir%/%kernel.environment%.log
            level: debug 
```

[编辑]

这是我运行的命令：

```
php app/console cache:clear --env=prod --no-debug
php app/console cache:warmup
php app/console assets:install web
php app/console assetic:dump web --env=prod --no-debug 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:49:48.240

在第一次使用 Capifony 进行部署时，曾经遇到过类似的问题。我只能通过手动清除 app/cache/prod 文件夹来解决它。不使用缓存：清除，但实际上删除了文件夹，

```
rm -rf app/cache/prod 
```

我还没有弄清楚为什么`cache:clear --env=prod`有时无法正确清除它，这可能是权限问题。

# java - JFrame 关闭操作

> ID：10468149
> 
> 赞同：18
> 
> 时间：2012-05-06T04:39:13.167
> 
> 标签：java, swing, user-interface, jframe, windowlistener

我想知道是否有办法通过单击“X”让程序在关闭 JFrame 之前执行一些代码。该`setDefaultCloseOperation()`方法只需要一个整数。

```
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-11-02T06:25:15.243

```
this.addWindowListener(new WindowAdapter(){
                public void windowClosing(WindowEvent e){
                    int i=JOptionPane.showConfirmDialog(null, "Seguro que quiere salir?");
                    if(i==0)
                        System.exit(0);//cierra aplicacion
                }
            }); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-06T04:48:36.137

@Jeffrey 有一个很好的答案，但你应该考虑你想要做什么。如果您真的想在关闭框架时做某事，那么 WindowListener 就是要走的路。但是，如果您正在寻找一个地方来做一些清理和优雅的关闭工作，那么您可能需要一个[关闭挂钩](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)。使用 WindowListener，代码只会被触发，正如你所说，用户“点击 X”。但是，如果用户在终端的前台启动应用程序并使用 Ctrl+C 将其终止，该怎么办？如果用户从命令行或任务管理器中终止进程怎么办？

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-06T04:40:31.627

您可能有兴趣使用[`WindowListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html). [`WindowListener`教程](http://docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html)。_

# cuda - CUDA 可以处理自己的工作队列吗？

> ID：10468150
> 
> 赞同：1
> 
> 时间：2012-05-06T04:39:14.870
> 
> 标签：cuda, gpu

很抱歉，如果这很明显，但我现在正在学习 c++ 和 Cuda，想知道这是否可行，以便我可以更多地关注相关部分。

基本上我的问题是高度可并行化的，事实上我目前正在多台服务器上运行它。我的程序得到一个工作项（非常小的列表）并在其上运行一个循环并做出 3 个决定之一：

1.  保留数据（保存），
2.  丢弃数据（不做任何事情），
3.  进一步处理数据（它不确定要做什么，它会修改数据并将其重新发送到队列进行处理。

这曾经是一个递归，但我使每个部分独立，虽然我不再受一个 cpu 的约束，但它的负面影响是有很多消息来回传递。我大致了解 CUDA 的工作原理以及如何向其提交工作，但 CUDA 是否可以管理设备本身的队列？

我目前的想法是在 c++ 主机上管理队列，然后将处理发送到设备，然后将结果返回主机并发送回设备（依此类推）。我认为这可行，但我想看看是否可以让 CUDA 内存本身的队列和内核承担工作并将工作直接发送给它。

CUDA 是否可以实现类似的操作，或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:10:43.573

我认为您要问的是您是否可以在设备上保留中间结果。答案是肯定的。换句话说，您应该只需要将新的工作项复制到设备，并且只从设备复制完成的项目。仍未确定的工作项可以在内核调用之间保留在设备上。

您可能需要为此研究 CUDA Thrust。Thrust 具有高效的转换算法，可以与自定义逻辑相结合（在 Thrust 手册中搜索“kernel fusion”。）听起来您的处理可能被视为转换，您可以在其中获取工作项的向量并创建两个新向量，一个要保留的项目和一个仍未确定的项目。

> 主机是否知道（或可以监视）设备上的内存？我关心的是如何了解和处理开始超过 GPU 板载内存的数据。

可以从内核中分配和释放内存，但效率可能不会很高。相反，通过运行 CUDA 调用来管理内存，例如`cudaMalloc()`和，`cudaFree()`或者，如果您使用 Thrust，则在内核调用之间创建或调整向量的大小。

通过这种“手动”内存管理，您可以跟踪您使用了多少内存`cudaMemGetInfo()`。

由于您会将完成的工作项复制回主机，因此您将知道设备上还剩下多少工作项，从而知道内核调用中可能需要的最大内存量是多少。

也许一个好的策略是为每个变换交换源向量和目标向量。举个简单的例子，假设您有一组要在多个步骤中过滤的工作项。您创建向量 A 并用工作项填充它。然后创建相同大小的向量 B 并将其留空。过滤后，A 中的部分工作项已移至 B，您就有了计数。现在再次运行过滤器，这次将 B 作为源，A 作为目标。

# scheme - 从方案中的列表中删除项目

> ID：10468151
> 
> 赞同：1
> 
> 时间：2012-05-06T04:40:22.643
> 
> 标签：scheme, racket

您将如何通过删除第一项来更新列表？

考虑以下伪代码

```
define remover
(list = cdr list)) 
```

还是有更推荐的方法来删除列表中的第一项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:52:57.257

你搞定了，把它写成一个过程：

```
(define (remover lst)
  (cdr l)) 
```

并像这样使用它（这会创建一个新的绑定，而*不是*一个赋值）：

```
(let ((new-list (remover old-list)))
  new-list) 
```

或者像这样（这定义了一个新列表）：

```
(define new-list (remover old-list)) 
```

在任何情况下，请注意作为参数传递给的原始列表`remover`不会被修改，而是会返回一个没有旧列表第一个元素的*新**列表*；这是对不可变链表进行操作的方式，您永远不应该假设对列表的任何修改都会就地发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T08:35:28.243

谨防！

本身没有列表数据结构。所以你不能拿一个列表`l`，，并删除第一个元素`l`。

当给定一个 list 时`l`，您可以做的是用于`cdr`生成一个新列表，该列表具有相同的元素`l`，除了新列表不包含第一个元素。

更详细一点：包含三个值 1、2 和 3 的列表表示为 `(cons 1 (cons 2 (cons 3 '()))`。让我们命名 cons-cells：

```
 c3 = (cons 3 '()) 
       c2 = (cons 2 c3)
   l = c1 = (cons 1 c2) 
```

首先要注意的是整个列表由值 c1 给出。我们不能通过操作 cons-cell c1 从列表中删除数字 1。然而，我们可以很容易地找到一个省略第一个元素的列表，因为

```
 c2 = (cons 2 c3) = (cons 2 (cons 3 '()) 
```

因此`(cdr l) = (cdr c1) = c2`将生成一个省略第一个元素的新列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T04:51:59.297

想想做什么`cdr`。记住，`cdr`返回一个列表。您的答案很接近，您只需要根据 Scheme 语法和功能来考虑它。

# python - 计算列表中值的重复次数并生成输出文件

> ID：10468153
> 
> 赞同：1
> 
> 时间：2012-05-06T04:40:36.717
> 
> 标签：python, repeat

我有一个包含几列的文件，例如：

```
PAIR 1MFK 1 URANIUM 82 HELIUM 112 2.5506  
PAIR 2JGH 2 PLUTONIUM 98 POTASSIUM 88 5.3003  
PAIR 345G 3 SODIUM 23 CARBON 14 1.664  
PAIR 4IG5 4 LITHIUM 82 ARGON 99 2.5506  
PAIR 234G 5 URANIUM 99 KRYPTON 89 1.664 
```

现在我想做的是读取最后一列并迭代重复值并生成一个包含两列的输出文件`'VALUE' & 'NO OF TIMES REPEATED'`。

我试过像：

```
inp = ('filename'.'r').read().strip().replace('\t',' ').split('\n')
from collections import defaultdict
D = defaultdict(line)

for line in map(str.split,inp):
     k=line[-1]
     D[k].append(line) 
```

我被困在这里。
请帮忙。！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:00:51.550

发布的代码存在许多问题。列表推导中不允许使用 while 循环。*defaultdict*的参数应该是*list*而不是*line*。这是您的代码的固定版本：

```
from collections import defaultdict
D = defaultdict(list)

for line in open('filename', 'r'):
    k = line.split()[-1]
    D[k].append(line)

print 'VALUE    NO TIMES REPEATED'
print '-----    -----------------'
for value, lines in D.items():
    print '%-6s           %d'  % (value, len(lines)) 
```

另一种方法是使用[collections.Counter](http://docs.python.org/library/collections.html#collections.Counter)方便地对重复次数求和。那让你稍微简化一下代码：

```
from collections import Counter
D = Counter()

for line in open('filename', 'r'):
    k = line.split()[-1]
    D[k] += 1

print 'VALUE    NO TIMES REPEATED'
print '-----    -----------------'
for value, count in D.items():
    print '%-6s           %d'  % (value, count) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:00:12.383

> 现在我想做的是读取最后一列并迭代重复值并生成一个包含两列“VALUE”和“NO OF TIMES REPEATED”的输出文件。

所以使用`collections.Counter`来计算每个值出现的次数，而不是`defaultdict`. （完全不清楚你想用 做什么`defaultdict`，而且你的初始化将不起作用，无论如何；`defaultdict`是用一个可以创建默认值的可调用构造的。在你的情况下，你显然想到的默认值是一个空列表，因此您将使用它`list`来初始化`defaultdict`。）您不需要存储行来计算它们。自动为您计算`Counter`它们。

此外，提前处理整个文件有点难看，因为您可以直接遍历文件并获取行，这会为您完成部分处理。尽管您实际上可以在`Counter`创建时自动执行该迭代。

这是一个完整的解决方案：

```
from collections import Counter
with open('input', 'r') as data:
    histogram = Counter(line.split('\t')[-1].strip() for line in data)
with open('output', 'w') as result:
    for item in histogram.iteritems():
        result.write('%s\t%s\n' % item) 
```

# php - 用 PHP 和 WordPress 比较时间

> ID：10468155
> 
> 赞同：0
> 
> 时间：2012-05-06T04:41:07.027
> 
> 标签：php, wordpress, datetime

我正在尝试创建一个插件来比较一条信息的时间。在 WordPress 数据库中到当前时间。例如，如果帖子在 5 月 6 日下午 12:00 过期，则在此之前它不会显示过期标签。

日期和时间表达式采用以下格式：MM/DD/YYYY HH:MM（军用时间）。到目前为止，这是我所拥有的 PHP 代码。有人可以查看我的代码，看看我是否做错了什么？请？:)

```
global $post;
$expired_post = get_post_meta( $post->ID, 'deal_exp_dt', true);
$expired_post_time = strtotime($expired_post);

// CONTENT FILTER
add_filter( 'the_content', 'my_the_content_filter', 20 );
function my_the_content_filter( $content ) {
if(time() > $expired_post_time && !empty($expired_post)) {
    $content = sprintf(
        '<div id="expired_deal_post"><strong><span style="font-size: x-large;">EXPIRED</span></strong><br><span style="font-size: medium;">This deal has ended.</span></div>%s',
        $content
    );

// Returns the content.
return $content;
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:48:46.247

```
function my_the_content_filter( $content ) {

// these two variables should reside this function scope, otherwise declare them as global

$expired_post = get_post_meta( $post->ID, 'deal_exp_dt', true);
$expired_post_time = strtotime($expired_post);

if(time() > $expired_post_time && !empty($expired_post)) {
    $content = sprintf(
        '<div id="expired_deal_post"><strong><span style="font-size: x-large;">EXPIRED</span></strong><br><span style="font-size: medium;">This deal has ended.</span></div>%s',
        $content
    );
 }

// Returns the content.
return $content;
} 
```

# android - 如何在单选按钮的中心绘制图像

> ID：10468160
> 
> 赞同：5
> 
> 时间：2012-05-06T04:41:57.280
> 
> 标签：android

我正在查看[http://bakhtiyor.com/2009/10/iphonish-tabs/](http://bakhtiyor.com/2009/10/iphonish-tabs/)中发布的示例，实际上他们在这里放置了单选按钮作为 Tabview 的替代品。

但问题是，我无法将图像设置为中心。它总是与左对齐。

这是屏幕截图。我希望我的视图看起来像这样，但我希望图像位于中心。 ![在此处输入图像描述](../Images/732c6bed447fe63519f91c07fd64f980.png)

这就是我的布局 XML 文件的外观

```
 <?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@android:id/tabhost" 
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

  <LinearLayout android:orientation="vertical"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">

    <FrameLayout android:id="@android:id/tabcontent"
      android:layout_width="fill_parent" 
      android:layout_height="wrap_content"
      android:layout_weight="1" 
      android:padding="20dip"/>

    <RadioGroup android:layout_width="fill_parent"
      android:layout_height="wrap_content" 
      android:orientation="horizontal"
      android:checkedButton="@+id/allcontacts"
      android:gravity="center"
      android:id="@+id/contactgroup">

      <RadioButton android:id="@+id/allcontacts" 
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_weight="1"
      android:orientation="vertical"
      android:background="@drawable/button_radio"/>

      <RadioButton
          android:id="@+id/categories"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:layout_weight="1"
          android:background="@drawable/button_radio"
          android:orientation="vertical"
          android:layout_gravity="center|right"/>

      <RadioButton android:id="@+id/favourites" 
   android:layout_width="fill_parent"
          android:layout_height="wrap_content"

    android:gravity="center"
    android:orientation="vertical"
      android:layout_weight="1" 
      android:background="@drawable/button_radio"/>

    </RadioGroup>

    <TabWidget android:id="@android:id/tabs"
      android:layout_width="fill_parent" 
      android:layout_height="wrap_content"
      android:layout_weight="0" android:visibility="gone" />
  </LinearLayout>
</TabHost> 
```

请给我建议

使用默认选项卡小部件后更新的图像 ![在此处输入图像描述](../Images/a4e5059030b6dde17aa647e2d7b49080.png)

是否可以在默认选项卡视图中自定义上述单选按钮。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T06:00:32.970

实际上并没有使图像居中，但您可以使其看起来像这样......您可以修改图像以在左侧有空白区域并立即在图像右侧切断。

**编辑**

我不知道你是否看过这些，但你让我很好奇，所以我去找了几个链接，这些链接可能有助于你实现底部标签的最终目标：

[尼可的博客](http://blog.lardev.com/2011/02/02/how-to-move-android-tabs-from-top-to-bottom/)

[所以问题答案](https://stackoverflow.com/a/2710404/1105376)

[另一个SO问题答案](https://stackoverflow.com/a/6992662/1105376)

祝你好运！

**编辑 2**

好的，找到了。您必须从 RadioButton 扩展一个新类并覆盖 onDraw()，然后创建一个 attrs.xml 文件，您需要将其放入 res/values 以便代码可以获取平台定义的属性。

[具体代码在这里](https://stackoverflow.com/a/4407803/1105376)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:02:49.353

您可以定义自己的 ImageButton 扩展`CompoundButton`。请参阅`RadioButton`and`CompoundButton`的源代码以了解如何操作。

# javascript - Lightstreamer 背后的魔力是什么？

> ID：10468161
> 
> 赞同：7
> 
> 时间：2012-05-06T04:42:11.113
> 
> 标签：javascript, ajax, http, comet, lightstreamer

我要开发一个彗星编程框架，但我不能使用 Web Sockets 或服务器发送事件（因为浏览器支持真的很烂）。因此，我需要保持 HTTP 连接处于活动状态，并将分块数据发送回客户端。

然而，当你开始工作时，问题就会显现出来：

1.  使用 XMLHttpRequest 是不可能的，因为 IE 在 3 时没有给`xhr.responseText`你`xhr.readyState`。
2.  隐藏`iframe`不会有用，因为当我将数据发送回客户端时，浏览器会显示加载器。
3.  我尝试将 JavaScript 文件发送回客户端，每次都发送函数执行命令，但浏览器在完全加载之前不会执行 JavaScript。

但是，当我查看[Lightstreamer 演示页面](http://www.lightstreamer.com/demo/StockListDemo/)时，我看到它一点一点地将一个 JavaScript 文件发送回客户端，并且在每一步中，它都会发送一个对函数的调用，并且该函数只是被执行（我不能这样做部分）。似乎 Lightstreamer 使用 AJAX，因为请求只是显示在 Firebug 的控制台选项卡中，但它在 IE 中也像一个魅力。

我尝试使用他们在请求中设置的每个 HTTP 标头字段，但没有结果。我也尝试使用 HTTP Post 而不是 HTTP Get，但仍然没有结果。

我已经阅读了将近 20 篇关于如何实现彗星的文章，但似乎没有一篇文章能解决我遇到的问题：

1.  如何让它跨浏览器？
2.  当新数据从服务器到达时如何得到通知（我应该挂钩什么事件）？
3.  如何使我的页面显示为完全加载给用户（如何实现它，以便浏览器不显示加载活动）？

有人可以帮忙吗？我认为应该有一个我不知道的小技巧或窍门将所有概念粘合在一起。有谁知道 lightstreamer 做了什么来克服这些问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T12:17:56.393

SockJS 作者在这里。

> *   如何让它跨浏览器？

这很难，预计要花几个月的时间在 Opera 和 IE 上获得流传输。

> *   当新数据从服务器到达时如何得到通知（我应该挂钩什么事件）？

有多种技术，取决于特定的浏览器。了解 Socket.IO 和 SockJS 支持的不同回退协议的介绍。

> *   如何使我的页面显示为完全加载给用户（如何实现它，以便浏览器不显示加载活动）？

同样，还有一些特定于浏览器的技巧。一种是在 onload 事件之后延迟加载 AJAX。其他是从 DOM 绑定和取消绑定 iframe。等等。如果您仍然感兴趣，请阅读 SockJS 或 Socket.io 代码。

> 有人可以帮忙吗？我认为应该有一个我不知道的小技巧或窍门将所有概念粘合在一起。有谁知道 lightstreamer 做了什么来克服这些问题？

基本上，除非你有非常充分的理由，否则不要重新发明轮子。使用 SockJS、Socket.io、faye 或任何其他已经解决了这个问题的项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T11:51:15.400

您想要的方法是[流式传输](http://en.wikipedia.org/wiki/Comet_%28programming%29#Streaming)。

> 如何让它跨浏览器？

考虑到大多数浏览器，没有一致的方法。您必须根据浏览器选择合适的传输方式。更糟糕的是，您必须依靠浏览器嗅探来识别正在使用的浏览器，而功能检测对此毫无意义。您可以将 XDomainRequest 用于 IE8+，XMLHttpRequest 用于非 IE，Iframe 用于 IE 6+。尽可能避免 iframe 传输。

> 当新数据从服务器到达时如何得到通知（我应该挂钩什么事件）？

这取决于所使用的传输方式。例如，XDomainRequest 触发进度事件，XMLHttpRequest 在块到达时触发 readystatechange 事件，Opera 和 IE 除外。

> 如何使我的页面显示为完全加载给用户（如何实现它，以便浏览器不显示加载活动）？

我不知道 iframe 的这个问题，但仍然出现在基于 WebKit 的浏览器中，例如带有 XMLHttpRequest 的 Chrome 和 Safari。避免这种情况的唯一方法是在 window 的 onload 事件之后进行连接，但是对于 Safari，这不起作用。

除了上述问题之外，您还必须考虑一些问题。

1.  事件驱动服务器 - 服务器应该能够异步处理。
2.  传输要求 - 服务器对所需传输的行为不同。
3.  流格式 - 如果服务器要在单个块中发送大消息或多条消息，则单个块并不意味着单个数据。它可以是单个数据的片段或多个数据的串联。要识别什么是数据，应对响应进行格式化。
4.  错误处理 - Iframe 传输不提供任何断开连接的证据。
5.  ...

**最后但并非最不重要**的一点是，与长轮询相比，实现流式传输非常令人厌烦。我建议您使用可靠的框架来执行此操作，例如我创建和管理的[socketio](http://socket.io/)、[sockjs](https://github.com/sockjs)和[jquery socket 。](https://github.com/flowersinthesand/jquery-socket)

祝你好运。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-06T04:44:53.763

> 但是浏览器在完全加载之前不会执行 JavaScript。

您是否尝试过发回包含在标签中的`<script>`代码？例如，而不是：

```
<script type="text/javascript">
f(...data1...);
f(...data2...); 
```

尝试

```
<script type="text/javascript">f(...data1...);</script>
<script type="text/javascript">f(...data2...);</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T04:54:58.030

在您的情况下，最好的选择是在服务器端使用 JSONP + Long Pulling。您只需要记住在连接断开（超时）或收到响应时重新连接。

jquery中的示例代码：

```
function myJSONP(){
    $.getScript(url, {
        success: function(){
            myJSONP(); //re-connect
        }, 
        failure: function(){
            myJSONP(); //re-connect
        }
    })
} 
```

显然，您来自服务器的响应必须是调用您的全局函数的 javascript 代码。

或者，您可以使用一些 jquery JSONP 插件。

或者看看这个项目[http://www.meteor.com/](http://www.meteor.com/)（真的很酷，但没试过）

# templates - 为标签使用 Ember.js 文本字段 ID

> ID：10468164
> 
> 赞同：19
> 
> 时间：2012-05-06T04:42:54.167
> 
> 标签：templates, ember.js

标签标签的形式为：

```
<label for="id_of_text_field">
<input type="text" name="example" id="id_of_text_field" /> 
```

`for`标签的标签和`id`文本字段的标签需要匹配的地方。我有两个想法可以在我的 Ember.js 模板中完成这项工作：

**想法 #1：**我尝试创建一个特殊的绑定，以`field_id`在`label`和`TextField`. 我执行如下：

```
<label {{bindAttr for="content.field_id"}}> {{content.label}}</label>
{{view Ember.TextField valueBinding="content.data" id="content.field_id"}} 
```

不幸的是，只有`label's`id 才能正确呈现。`TextField's`id 没有**正确**渲染，结果是“metemorph ... something-or-other”。

**想法#2：**以某种方式召唤TextField的ID并将其用于标签标签，但我担心在某些时候TextField的ID在呈现标签标签时不会准备好。即使这不是问题，我也不知道如何`TextField's`从 JS 中找到 id。

这是在模板中，因此我将拥有多个标签/文本字段对。

如何使用 Ember.js让标签的`for`标签与 TextField 的标签匹配？`id`

谢谢！

**更新**

使用 Peter Wagenet 的建议和稍作修改，我做了以下事情：

```
<label {{bindAttr for="textField.elementId"}}> {{content.label}}</label>
{{view Ember.TextField valueBinding="content.value" viewName="textField"}} 
```

使用这种技术，用户现在可以单击标签来选择 TextFields、CheckBoxes 和 Selects。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-06T05:05:51.223

首先，Metamorph 标签用于标签的值。它与字段的 id 无关。但是，此代码仍然无法工作，因为标准属性不会对属性路径做任何特殊的事情。在这种情况下， 的值`id`实际上是`content.field_id`。这肯定不是你想要的。在正常情况下，您可以使用`elementIdBinding`(`id`只是 的别名`elementId`)，但是 Ember 视图的元素 ID 在创建后无法更改，因此这种方法在这里不起作用。

一种可能的解决方案是利用该`viewName`属性。该`viewName`属性提供了对`parentView`. 然后，您可以执行以下操作：

```
<label {{bindAttr for="view.textField.field_id"}}> {{content.label}}</label>
{{view Ember.TextField valueBinding="content.data" viewName="textField"}} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T23:16:08.280

这并不总能解决您的问题，但我只想补充一点，简单地将输入嵌套在标签内通常是一种方便的解决方案，因为它允许您`for`完全删除属性（[参考](http://www.whatwg.org/specs/web-apps/current-work/multipage/forms.html#the-label-element)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T16:31:39.163

这是我不久前对这个问题的解决方案：

```
App.Widget.TextField = Em.ContainerView.extend({
    tagName: '',
    type: 'text',
    label: null,
    value: null,
    valueSize: '30px',

    childViews: ['labelView', 'inputView'],

    labelView: Em.View.extend({
        tagName: 'label',
        attributeBindings: ['for'],

        forBinding: 'parentView.inputView.elementId',

        init: function () {
            this.set('defaultTemplate', Em.Handlebars.compile(this.getPath('parentView.label')));
            this._super();
        }
    }),

    inputView: Em.TextField.extend({
        typeBinding: 'parentView.type',
        sizeBinding: 'parentView.valueSize',
        valueBinding: 'parentView.value'
    })
}); 
```

然后从 Handlebars 模板中：

```
{{view App.Widget.TextField label="Some Label"}} 
```

# python - Django 查询中的 GROUP BY

> ID：10468165
> 
> 赞同：1
> 
> 时间：2012-05-06T04:43:17.060
> 
> 标签：python, mysql, django, django-models

亲爱的 StackOverFlow 社区：

我需要您的帮助来执行以下 SQL 查询。

```
select DATE(creation_date), COUNT(creation_date) from blog_article WHERE creation_date BETWEEN SYSDATE() - INTERVAL 30 DAY AND SYSDATE() GROUP BY DATE(creation_date) AND author="scott_tiger"; 
```

这是我的 Django 模型

```
class Article(models.Model):
    title = models.CharField(...)
    author = models.CharField(...)
    creation_date = models.DateField(...) 
```

如何使用 aggregate() 和 annotate() 函数形成上述 Django 查询。我创造了这样的东西 -

```
now = datetime.datetime.now()
date_diff = datetime.datetime.now() + datetime.timedelta(-30)
records = Article.objects.values('creation_date', Count('creation_date')).aggregate(Count('creation_date')).filter(author='scott_tiger', created_at__gt=date_diff, created_at__lte=now) 
```

当我运行此查询时，它给了我以下错误 -

```
'Count' object has no attribute 'split' 
```

知道谁使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T05:49:20.777

尝试

```
records = Article.objects.filter(author='scott_tiger', created_at__gt=date_diff, 
    created_at__lte=now).values('creation_date').aggregate(
    ccd=Count('creation_date')).values('creation_date', 'ccd') 
```

您需要使用`creation_date__count`或自定义名称（`ccd`此处）来引用计数结果列，之后`aggregate()`。
此外，`values()`在`aggregate`限制`group by`列之前，最后`value()`声明要`select`编辑的列。无需`COUNT`根据已基于行组的方式进行分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:11:59.307

从值中删除 Count('creation_date') 并在过滤后添加 annotate(Count('creation_date')) 。

# jquery - Jquery 图像变量选择器

> ID：10468166
> 
> 赞同：1
> 
> 时间：2012-05-06T04:43:24.973
> 
> 标签：jquery, image, variables, selector

我想在 javascript 中定义的图像变量上绑定点击事件，但我不确定要使用哪个选择器

例如：-

```
var image=new Image();    
image.src=src;
$("image").click(function()); 
```

有人可以告诉我正确的语法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:51:49.567

```
var image = $('img[src="'+ src +'"]');

$(image).click(function() {
  // stuff
}); 
```

**或者**

```
var image = new Image();    
image.src=src;
$(image).click(function() {
 // stuff
}); 
```

如果您想稍后将图像绘制到 DOM，您也可以尝试实时事件，如下所示：

```
var image = new Image();    
image.src=src;
$('body').on('click', image, function() {
  // stuff
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T04:46:56.170

`img`您可能会发现使用节点而不是`Image`对象本身更容易：

```
var image = $('<img src="' + src + '" />');
image.click(function(){ 
  // do something awesome
}); 
```

根据您的评论，听起来您正在尝试将单击事件绑定到正在传输到画布的图像。在这种情况下，您最好的选择可能是在画布上绑定点击事件，并根据您传输的图像的坐标和尺寸检查鼠标坐标。

# wcf - 自动启动/预热功能在 IIS 7.5/WCF 服务中不起作用

> ID：10468167
> 
> 赞同：16
> 
> 时间：2012-05-06T04:43:32.070
> 
> 标签：wcf, configuration, iis-7.5, application-pool, autostart

为了从头开始测试 IIS/WCF 实现的许多令人头疼的问题，我构建了 HelloWorld 服务，并且客户端（非常好）[在这里](http://www.codeproject.com/Articles/97204/Implementing-a-Basic-Hello-World-WCF-Service)完成了。我为 net.tcp 添加了端点，并且该服务在其自己的称为 HW`IIS 7.5`的（在 Windows 7 上）下的两个绑定中端到端正常工作。`ApplicationPool`

我正在尝试使用已宣布的 AutoStart 和 Preload（或“预热缓存”）功能。我已经非常严格地遵循了[此处](http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4-0-series.aspx)和[此处](http://developers.de/blogs/damir_dobric/archive/2009/10/11/iis-7-5-and-always-running-web-applications.aspx)列出的说明（彼此非常相似，但有第二个意见总是好的）。这意味着我

1）设置应用程序池`startMode`...

```
<applicationPools> 
     <!-- ... -->
     <add name="HW" managedRuntimeVersion="v4.0" startMode="AlwaysRunning" /> 
</applicationPools> 
```

2) ...启用`serviceAutoStart`并设置指向我的指针`serviceAutoStartProvider`

```
<site name="HW" id="2">
    <application path="/" applicationPool="HW" serviceAutoStartEnabled="true" serviceAutoStartProvider="PreWarmMyCache" />
    <!-- ... -->
</site> 
```

3) ...并命名所述提供者，`GetType().AssemblyQualifiedName`下面完整列出了该类的

```
<serviceAutoStartProviders> 
    <add name="PreWarmMyCache" type="MyWCFServices.Preloader, HelloWorldServer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" /> 
</serviceAutoStartProviders> 
```

* * *

```
using System;

namespace MyWCFServices
{
    public class Preloader : System.Web.Hosting.IProcessHostPreloadClient
    {
        public void Preload(string[] parameters)
        {
            System.IO.StreamWriter sw = new System.IO.StreamWriter(@"C:\temp\PreloadTest.txt");
            sw.WriteLine("Preload executed {0:G}", DateTime.Now);
            sw.Close();
        }
    }
} 
```

唉，所有这些手动配置，加上几个`iisreset`电话，我什么也没得到。任务管理器中没有`w3wp.exe`进程启动（尽管如果我启动 HelloWorldClient 我会得到它），没有文本文件，最重要的是，不满意。

无论是在 SO 上还是在更广泛的网络上，关于此功能的讨论都非常少，而且这里的几个类似问题也很少受到关注，所有这些都敲响了一两个警钟。也许是不必要的——有哪位专家曾在这条路上走过一两次，愿意插话吗？（如果您能推荐一个托管它的好地方，很高兴提供整个解决方案。）

* * *

**编辑**：我尝试将方法中的路径重置`Preload`为相对`App_Data`文件夹（另一个 SO 答案建议），没关系。此外，我了解到该`w3wp.exe`过程会在简单浏览到 localhost 时触发。该过程消耗了令人印象深刻的 17MB 内存来提供其单个微小的 OperationContract，同时提供零预加载值的价格。17MB 的 ColdDeadCache。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:42:48.350

对于您的问题，这是一种略有不同的方法：

1.  使用[Windows Server AppFabric](http://msdn.microsoft.com/en-us/windowsserver/ee695849 "Windows Server AppFabric")进行服务自动启动
2.  使用 WCF 基础结构执行自定义启动代码

回复 1：[Appfabric 自动启动功能](http://msdn.microsoft.com/en-us/library/ee677260.aspx)应该开箱即用（如果您没有使用 MVC 的 ServiceRoute 来注册您的服务，则必须在 Web.config`serviceActivations`部分或使用物理`*.svc`文件指定它们。

Re 2：要将自定义启动代码注入 WCF 管道，您可以使用如下属性：

```
using System;
using System.ServiceModel;
using System.ServiceModel.Description;

namespace WCF.Extensions
{
    /// <summary>
    /// Allows to specify a static activation method to be called one the ServiceHost for this service has been opened.
    /// </summary>
    [AttributeUsage(AttributeTargets.Class, AllowMultiple = true, Inherited = false)]
    public class ServiceActivatorAttribute : Attribute, IServiceBehavior
    {
        /// <summary>
        /// Initializes a new instance of the ServiceActivatorAttribute class.
        /// </summary>
        public ServiceActivatorAttribute(Type activatorType, string methodToCall)
        {
            if (activatorType == null) throw new ArgumentNullException("activatorType");
            if (String.IsNullOrEmpty(methodToCall)) throw new ArgumentNullException("methodToCall");

            ActivatorType = activatorType;
            MethodToCall = methodToCall;
        }

        /// <summary>
        /// The class containing the activation method.
        /// </summary>
        public Type ActivatorType { get; private set; }

        /// <summary>
        /// The name of the activation method. Must be 'public static void' and with no parameters.
        /// </summary>
        public string MethodToCall { get; private set; }

        private System.Reflection.MethodInfo activationMethod;

        #region IServiceBehavior
        void IServiceBehavior.AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, System.Collections.ObjectModel.Collection<ServiceEndpoint> endpoints, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
        {
        }

        void IServiceBehavior.ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
        {
            serviceHostBase.Opened += (sender, e) =>
                {
                    this.activationMethod.Invoke(null, null);
                };
        }

        void IServiceBehavior.Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
        {
            // Validation: can get method
            var method = ActivatorType.GetMethod(name: MethodToCall,
                             bindingAttr: System.Reflection.BindingFlags.Static | System.Reflection.BindingFlags.Public,
                             callConvention: System.Reflection.CallingConventions.Standard,
                             types: Type.EmptyTypes,
                             binder: null,
                             modifiers: null);
            if (method == null)
                throw new ServiceActivationException("The specified activation method does not exist or does not have a valid signature (must be public static).");

            this.activationMethod = method;
        }
        #endregion
    }
} 
```

..可以这样使用：

```
public static class ServiceActivation
{
    public static void OnServiceActivated()
    {
        // Your startup code here
    }
}

[ServiceActivator(typeof(ServiceActivation), "OnServiceActivated")]
public class YourService : IYourServiceContract
{

} 
```

这正是我们在大量服务中使用了相当长一段时间的确切方法。将 WCF`ServiceBehavior`用于自定义启动代码（而不是依赖于 IIS 基础结构）的额外好处是它可以在任何托管环境（包括自托管）中工作，并且可以更容易地进行测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-14T17:45:36.893

我知道这听起来很荒谬，但我遇到了同样的问题（在进行配置更改后 w3wp.exe 不会自动触发），这是因为我在编辑 applicationHost.config 文件时没有在管理员模式下运行文本编辑器。我犯了愚蠢的错误。

在我的辩护中，我使用的是 Notepad++，它告诉我它正在保存，而实际上它不是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-16T09:51:04.477

也许您使用的是 64 位系统？Windows 中有一个已知的[“功能”](https://stackoverflow.com/a/17595896/90033)，其中保存被重定向到 32 位文件夹，因此不会获取任何更改

（我已将我的[评论](https://stackoverflow.com/a/18238705/90033)转换为答案，因为答案可能更容易找到）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T12:42:55.940

我也做过同样的事情。有用...

[在预加载方法中，我从此处](http://archive.msdn.microsoft.com/ServiceBusDublinIIS/Release/ProjectReleases.aspx?ReleaseId=4336)提供的一份不错的白皮书中复制了一些代码！

预加载方法看起来像......

```
 public void Preload(string[] parameters) 
 {     
        bool isServceActivated = false; 
        int attempts = 0; 
        while (!isServceActivated && (attempts <10)) 
        {
            Thread.Sleep(1 * 1000);
            try
            {
                string virtualPath = "/Test1/Service1.svc";
                ServiceHostingEnvironment.EnsureServiceAvailable(virtualPath);
                isServceActivated = true;
            }
            catch (Exception exception)
            {
                attempts++;
                //continue on these exceptions, otherwise fail fast 
                if (exception is EndpointNotFoundException ||
                    exception is ServiceActivationException || 
                    exception is ArgumentException) 
                {
                    //log 
                }
                else
                {
                    throw;
                }
            }
        }
   } 
```

# ios - 屏幕旋转后获取自动旋转 UIView 的尺寸？

> ID：10468169
> 
> 赞同：1
> 
> 时间：2012-05-06T04:44:47.903
> 
> 标签：ios, autorotate

**问题：**是否可以在屏幕旋转后获得自动旋转的UIView的大小，但在旋转完成*之前*获得该值？如果是这样，怎么做？

**背景：** 我正在构建一个 iPad 应用程序，它有一个屏幕，其中几个 UILabel 在包含 UIView 的列中排列（小于屏幕的主 UIView。）每个标签中的标签数量和文本长度未知在编译期间。它们在运行时通过一种算法在屏幕上动态布局，该算法试图选择最佳的列数和宽度，以防止内容从屏幕上被剪掉。为了使重新调整过程对用户来说尽可能顺利，我相信我需要在以下内部执行此操作：

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
```

但是当然这个方法是在旋转完成之前调用的，因此需要提前知道包含 UIView 的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:11:21.250

在 iOS 5 中，`viewWillLayoutSubviews`将实现您想要的。

在 iOS 4 中，您可以通过为控件/子视图的移动设置动画来使移动不那么刺耳，即使它发生在`didRotateFromInterfaceOrientation`（我知道这听起来不像，但它有很大的不同）。因此，如果您想为按钮移动到 newFrame 设置动画，它很简单：

```
[UIView animateWithDuration:0.25 animations:^{ 
    [button setFrame:newFrame]; 
}]; 
```

最后，明智地使用`autoResizingMask`, 也有很大帮助，尽管我认为这是不可能的，因为您正在相对于彼此移动控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T04:51:18.840

查看：

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation 
```

你可以在这里找到所有这些方法：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

# php - 如何在其各自的文章下显示评论

> ID：10468172
> 
> 赞同：0
> 
> 时间：2012-05-06T04:45:01.267
> 
> 标签：php, mysql, comments

请在我的脚本方面需要你的帮助。我有一个网站，其中一些内容标题被放入存档框中，以便在单击标题时显示内容。我的问题是关于每一页上的评论。

通常我用 GET 传递页面 ID，所以如果没有设置 GET，这意味着显示的文章是当前文章，并且它的 id 被手动传递到 WHERE 查询中。

问题是用户对旧档案文章的评论并没有显示在他们各自的文章页面上，而是显示在我手动传递ID的文章上。我该如何解决这个问题

这是我正在尝试制作的一些代码。

感谢您的时间和耐心。

```
 $page_name = 'about'; 
                    $id = "";
                    if (isset($_GET['id'])) {
                    $id = $_GET['id'];
  //display content based on the header       clicked
  } else {
  //display content of the current article       based on the id. I pass the numeric id              of the current article into the where       clause that selects the content
   //it displays
  }

 $query6 = mysql_query(" SELECT c.body          FROM comment AS c  
     INNER JOIN about AS a ON
     c.article_id = a.about_id
     WHERE   c.article_id =  3
     AND page_name = '".$page_name."'") 
```

**评论表**

```
 CREATE TABLE IF NOT EXISTS`comment`(
     `comment_id` int(255),
     `article_id` int(255),
     `username` varchar(255) ,
     `page_name` varchar(255) ,
     `comment_body` varchar(300),
     `comment_date` datetime,
     PRIMARY KEY (`comment_id`) 
```

**关于表**

```
 CREATE TABLE IF NOT EXISTS `about` (
  `about_id` int(255),
  `about_head` varchar(255)
  `about_content` varchar(4000),
  `about_tags` varchar(255) ,
  `about_created` datetime, 
```

旧文章的网址

```
http://localhost/root/about.php?id=3 
```

而当前文章的 URL 是

```
 http://localhost/root/about.php 
```

所以现在是当前文章不传递任何动态ID。如果我在查询中执行 '".$id."'，然后单击当前文章，则不会显示任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T05:48:57.117

```
 WHERE   c.article_id =  3 
```

应该是

```
 WHERE   c.article_id =  $id 
```

尽管**请**注意这很容易受到 SQL 注入的攻击。相反，您应该使用准备好的语句，将变量作为参数传递到其中，这些参数不会针对 SQL 进行评估。如果您不知道我在说什么，或者如何解决它，请阅读[Bobby Tables](http://bobby-tables.com)的故事。

# c# - Linq orderby 不工作

> ID：10468177
> 
> 赞同：0
> 
> 时间：2012-05-06T04:46:31.717
> 
> 标签：c#, .net, linq, linq-to-sql, sql-order-by

我在这个问题上阅读了类似的问题和回复，并尝试了多种不同的方法来做到这一点，但都没有成功。记录以随机顺序显示在数据网格中，而不是按姓氏排序。先感谢您。

```
MyEntities theEntities = new MyEntities();

IEnumerable<NameTable> nameitems = (from myrow in theEntities.NameTable.AsEnumerable()
orderby myrow.NameID
select new NameTable
    {NameID = myrow.NameID,
    FirstName = myrow.FirstName,
    LastName = myrow.LastName});

ObservableCollection<NameTable> nameitemsOC = new ObservableCollection<NameTable>(nameitems);

return nameitemsOC; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T04:49:50.183

这可能是因为您按 NameID 而不是 LastName 订购...试试这个：

```
orderby myrow.LastName 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T04:50:08.077

我认为这应该做

```
IEnumerable<NameTable> nameitems = (from myrow in theEntities.NameTable.AsEnumerable()
     orderby myrow.LastName
     select new NameTable { 
       NameID = myrow.NameID, 
       FirstName = myrow.FirstName, 
       LastName = myrow.LastName 
     }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T05:05:20.147

你排序`NameID`和不排序`LastName`。

又是什么类型的`theEntities.NameTable`？也许您可以创建一个`CollectionView`，添加一个`SortDescription`并使其成为`ItemsSource`您的`DataGrid`.

```
ICollectionView myCollectionView = CollectionViewSource.GetDefaultView(theEntities.NameTable);

myCollectionView.SortDescriptions.Add(new SortDescription("LastName", ListSortDirection.Ascending)); 
```

# c++ - C++ 宏中的随机数

> ID：10468179
> 
> 赞同：0
> 
> 时间：2012-05-06T04:47:14.077
> 
> 标签：c++, random, macros, obfuscation

我正在开发一种加密游戏数据文件的方法，该方法将在我正在创建的游戏引擎中使用。游戏数据文件将使用私钥加密，并在加载到游戏引擎后解密。

私钥将在引擎中手动设置（作为 const），以便将其编译到引擎中。然而，诀窍是在其中混淆它，以便普通的 Joe Bloggs 不能（容易地）通过反汇编和逆向工程代码找到密钥。

```
struct Example {
    u_int8_t random1;
    u_int64_t segment31;
    u_int8_t random2;
    u_int8_t random3;
    u_int64_t segment3;
    u_int64_t segment14;
    // Etc
}; 
```

我的想法是将密钥存储在与随机生成的字节混在一起的段中。我的问题是这样的：

有没有办法在 C++ 宏中随机生成一个数字？该数字必须在编译时随机生成（或每个随机值设置为随机用户选择的值），因此任何运行时函数都不好。

如果有更好的方法，我愿意接受任何建议，但我绝对希望使用私钥/公钥对加密游戏数据文件，并且公钥尽可能保持私密。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T05:01:34.917

由于您在编译时生成一个恒定的随机数，该随机数将融入您的程序，因此我看不出这与您自己将随机数（您自己选择的）硬编码到其中之间没有区别。我想使用宏，每次编译都会得到不同的随机数。真的那么关键吗？

我建议做一些更简单的事情：如果密钥只是 ASCII 文本（位就是位，对吗？），您可以使用看起来无害的诊断字符串作为您的密钥，而没有人会注意到它。

尽管如此，该领域的专家通常不赞成默默无闻的安全性（他们经常皱眉头）。如果你真的在做公钥加密，那么公开公钥是完全可以的。毕竟这才是重点。它是必须保密的私钥。

如果你真的想这样做，那么我会看一个随机数生成算法，并将它的迭代展开到一个（大）宏中，该宏本质上接受一个种子并评估为一个大表达式，该表达式产生一个伪随机整数作为其结果. 那应该这样做。如果种子不知何故来自于不可预测的事物，例如编译时间（`__TIME__`），它可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T04:51:23.963

目前没有任何 rand 宏或模板元函数，但可以创建它......需要付出很多努力。

另一方面，您可以简单地触摸 /dev/random 作为构建过程的一部分，或其他一些随机源，并使用结果创建一个标题。在您获得随机数常量的位置包含此标头。

# c - Turbo C++ 链接器警告：未指定模块定义

> ID：10468182
> 
> 赞同：2
> 
> 时间：2012-05-06T04:48:06.873
> 
> 标签：c, turbo-c++

Turbo C++ 编译器中的警告是什么意思：

```
链接 *.exe：
链接器警告：未指定模块定义文件：使用默认值
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:49:46.070

[模块定义文件](http://msdn.microsoft.com/en-us/library/28d6s79h%28v=vs.80%29.aspx)为链接器提供有关导出、属性和有关要链接的程序的其他信息的信息。

你可能不需要使用一个。

# .net - 如何在 F# 中声明循环依赖抽象类

> ID：10468188
> 
> 赞同：5
> 
> 时间：2012-05-06T04:48:43.397
> 
> 标签：.net, f#, abstract-class, circular-dependency, circular-reference

考虑两个抽象类 alpha 和 beta：

```
[<AbstractClass>]  
type alpha () =
    abstract member foo: beta->beta

[<AbstractClass>] 
and beta () = //***
    abstract member bar: alpha 
```

如果我尝试编译我得到一个错误，在 * * * 指示的行上：

```
error FS0010: Unexpected keyword 'and' in interaction 
```

如果我写：

```
[<AbstractClass>]  
type alpha () =
    abstract member foo: beta->beta

and beta () =
    abstract member bar: alpha 
```

然后我得到：

```
error FS0365: No implementation was given for 'abstract member beta.bar : alpha' 
```

以及我应该添加 AbstractClass 属性的提示

那么如何声明循环定义的抽象类呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T05:18:09.770

将属性放在“and”关键字之后：

```
[<AbstractClass>]
type alpha () =
    abstract member foo : beta -> beta

and [<AbstractClass>]  beta () =
    abstract member bar : alpha 
```

# c# - 关键事件：ProcessCmdKey

> ID：10468200
> 
> 赞同：15
> 
> 时间：2012-05-06T04:51:16.567
> 
> 标签：c#, .net, winforms

我试图在一个小小的测试 Windows 窗体应用程序上发生一些键盘响应，我有一个粗略的解决方案，即覆盖 ProcessCmdKey。但是，我遇到了几个问题，并且发现了不一致的地方。

**不同的事件：**有没有办法在参数`ref Message msg, Keys keyData`中判断偶数是 KeyDown、KeyUp 还是 KeyPress？

**KeyPress：**我看过的所有地方都说KeyPress，即重复的键盘输入，只发生在字符键上，而箭头键则没有。但是，对于箭头键和字符键，事件处理程序被频繁调用，并且以相同的方式/具有相同的行为。这是面对 KeyPress 事件，还是别的什么？

理想情况下，我希望有一种方法可以在表单级别处理所有键盘事件，而不会让它们传递给表单上的控件。然而，所有的文档都让我很困惑，错过了关键点，以至于我一直无法完成。

对任何这些主题的帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-06T13:41:12.777

在您的表单中覆盖 ProcessCmdKey 明确旨在允许您在按钮和菜单项中的内置助记符处理之外实现自定义快捷键处理。

仅在具有焦点的控件获得 KeyDown 事件*之前*，无论哪个客户端控件具有焦点，都只会在按键按下事件上调用它。因此与 KeyUp 和 KeyPress 无关。在执行快捷方式功能后，当您识别出该键时，您会从覆盖中返回 true。这可以防止密钥被进一步处理，它不会生成任何 KeyDown/Press/Up 事件。

很少使用该方法的*msg*参数，msg.Msg 值只会是 WM_KEYDOWN 或 WM_SYSKEYDOWN，当用户按住 Alt 键时会产生后一个消息。你不关心的，因为你总是可以从*keyData*参数中得到。像这样：

```
 protected override bool ProcessCmdKey(ref Message msg, Keys keyData) {
        if (keyData == (Keys.Alt | Keys.F)) {
            // Alt+F pressed
            doSomething();
            return true;
        }
        return base.ProcessCmdKey(ref msg, keyData);
    } 
```

您可能要使用 | 检查的其他修饰符 此处使用的运算符是 Keys.Shift 和 Keys.Control。因此 (Keys.Shift | Keys.Control | Keys.F1) 检查 Ctrl+Shift+F1。当您想做一些不寻常的事情（例如检查重复键）时，您*可以解释 msg 数据。*检查 MSDN 文档以获取 WM_KEYDOWN 通知。msg.LParam 值包含一堆关于击键的信息。

请注意，您只能在此方法中获得*虚拟*键。Keys.F 是英文键盘布局上的 F 键，但不一定是用户布局上相同位置的键的相同字母。偏爱功能键以避免文档问题。

按键重复是键盘控制器的一项功能，不仅限于键入按键。按住时箭头和功能键肯定会重复。在这种情况下，您想忽略 KeyPress。但是，如果您为同时也是键入键的键（如 Keys.F）分配快捷键，那么您希望*始终*检查修饰键，以免破坏 TextBox 等控件。

最后但同样重要的是，不要忘记按钮和菜单项控件中对助记符的内置支持。编写它们的 Text 属性就像`&OK`生成一个自记录的快捷方式，而不需要任何代码。由用户操作，在本例中，通过键入 Alt+O。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-06T07:14:28.700

传递给[ProcessCmdKey()](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.processcmdkey.aspx)的[Message结构在其](http://msdn.microsoft.com/en-us/library/system.windows.forms.message.aspx)[Msg](http://msdn.microsoft.com/en-us/library/system.windows.forms.message.msg.aspx)属性中包含 WINAPI 消息编号：

*   `WM_KEYDOWN`是`0x100`(256),
*   `WM_KEYUP`是`0x101`(257),
*   `WM_CHAR`（大致相当于`KeyPress`）是`0x102`（258），
*   `WM_SYSKEYDOWN`是`0x104`(260),
*   `WM_SYSKEYUP`是`0x105`(261)。

关于您的问题`KeyPress`，确实，诸如箭头键之类的非字符键不会在`WM_CHAR`内部生成消息，但它们确实会生成`WM_KEYDOWN`，并且该消息也会多次发送以进行重复输入。

另请注意，我不确定`ProcessCmdKey()`是否是实现您想要的正确方法。文档将其描述为仅处理`main menu command keys and MDI accelerators`，它可能只是您要捕获的键的子集。您可能想要改写[ProcessKeyPreview()](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.processkeypreview.aspx)，它处理子控件接收到的所有键盘消息。

# algorithm - Manacher 算法（在线性时间内找到最长回文子串的算法）

> ID：10468208
> 
> 赞同：72
> 
> 时间：2012-05-06T04:52:13.837
> 
> 标签：algorithm, palindrome

在花了大约 6-8 小时试图消化 Manacher 的算法之后，我准备认输。但在我这样做之前，这是黑暗中的最后一枪：谁能解释一下？我不关心代码。我希望有人解释**算法**。

这里似乎是其他人似乎喜欢解释算法的地方：http: [//www.leetcode.com/2011/11/longest-palindromic-substring-part-ii.html](http://www.leetcode.com/2011/11/longest-palindromic-substring-part-ii.html)

我理解你为什么要转换字符串，比如 'abba' 到 #a#b#b#a# 之后比我迷路了。例如，前面提到的网站的作者说算法的关键部分是：

```
 if P[ i' ] ≤ R – i,
                      then P[ i ] ← P[ i' ]
                      else P[ i ] ≥ P[ i' ]. (Which we have to expand past 
                      the right edge (R) to find P[ i ]) 
```

这似乎是错误的，因为他/她曾说过当 P[i'] = 7 并且 P[i] 不小于或等于 R - i 时 P[i] 等于 5。

如果您不熟悉该算法，这里还有一些链接：[http](http://tristan-interview.blogspot.com/2011/11/longest-palindrome-substring-manachers.html) ://tristan-interview.blogspot.com/2011/11/longest-palindrome-substring-manachers.html （我试过这个，但是术语很糟糕而且令人困惑。首先，有些东西没有定义。另外，变量太多。你需要一个清单来回忆什么变量指的是什么。）

另一个是：[http](http://www.akalin.cx/longest-palindrome-linear-time) ://www.akalin.cx/longest-palindrome-linear-time （祝你好运）

该算法的基本要点是在线性时间内找到最长的回文。它可以在 O(n^2) 中完成，只需最少到中等的努力。该算法应该非常“聪明”以将其降低到 O(n)。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-06T06:49:57.120

我同意链接的解释中的逻辑不太正确。我在下面给出一些细节。

Manacher 的算法填写了一个表 P[i]，其中包含以 i 为中心的回文延伸了多远。如果 P[5]=3，则位置 5 两侧的三个字符是回文的一部分。该算法利用了这样一个事实，即如果您发现了一个长回文，您可以通过查看左侧 P 的值来快速填写回文右侧的 P 值，因为它们应该主要是相同的。

我将首先解释您正在谈论的案例，然后根据需要扩展此答案。

R表示以C为中心的回文右侧的索引。这是您指示的位置的状态：

```
C=11
R=20
i=15
i'=7
P[i']=7
R-i=5 
```

逻辑是这样的：

```
if P[i']<=R-i:  // not true
else: // P[i] is at least 5, but may be greater 
```

链接中的伪代码表明，如果测试失败，P[i] 应该大于或等于 P[i']，但我认为它应该大于或等于 Ri，并且解释支持了这一点。

由于 P[i'] 大于 Ri，以 i' 为中心的回文延伸超过以 C 为中心的回文。我们知道以 i 为中心的回文将至少是 Ri 字符宽，因为我们仍然具有对称性，但我们必须明确搜索。

如果 P[i'] 不大于 Ri，那么以 i' 为中心的最大回文在以 C 为中心的最大回文内，所以我们会知道 P[i] 不可能大于 P[i ']。如果是这样，我们就会产生矛盾。这意味着我们可以将以 i 为中心的回文数扩展到 P[i'] 之外，但如果我们可以，那么由于对称性，我们也可以以 i' 为中心扩展回文数，但它已经应该尽可能大。

这种情况前面已经说明：

```
C=11
R=20
i=13
i'=9
P[i']=1
R-i=7 
```

在这种情况下，P[i']<=Ri。由于我们距离以 C 为中心的回文边缘还有 7 个字符，所以我们知道 i 周围的至少 7 个字符与 i' 周围的 7 个字符相同。由于 i' 周围只有一个字符回文，所以 i 周围也有一个字符回文。

j_random_hacker 注意到逻辑应该更像这样：

```
if P[i']<R-i then
  P[i]=P[i']
else if P[i']>R-i then
  P[i]=R-i
else P[i]=R-i + expansion 
```

如果 P[i'] < Ri，那么我们知道 P[i]==P[i']，因为我们仍在以 C 为中心的回文串内。

如果 P[i'] > Ri，那么我们知道 P[i]==Ri，否则以 C 为中心的回文将延伸超过 R。

所以展开式实际上只在 P[i']==Ri 的特殊情况下是必要的，所以我们不知道 P[i] 处的回文是否可能更长。

这在实际代码中通过设置 P[i]=min(P[i'],Ri) 然后总是扩展来处理。这种方法不会增加时间复杂度，因为如果不需要扩展，则进行扩展所花费的时间是恒定的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-12-24T19:52:39.283

到目前为止，我在以下链接中找到了最好的解释之一：

[http://tarokuriyama.com/projects/palindrome2.php](http://tarokuriyama.com/projects/palindrome2.php)

它还具有问题中提到的第一个链接中使用的相同字符串示例（babcbabcbaccba）的可视化。

除了这个链接，我还找到了代码

[http://algs4.cs.princeton.edu/53substring/Manacher.java.html](http://algs4.cs.princeton.edu/53substring/Manacher.java.html)

我希望它对其他努力理解这个算法的症结的人有所帮助。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-18T00:43:46.427

这个网站上的算法在某种程度上似乎是可以理解的 [http://www.akalin.cx/longest-palindrome-linear-time](http://www.akalin.cx/longest-palindrome-linear-time)

要理解这种特殊的方法，最好的方法是尝试在纸上解决问题并掌握可以实施的技巧，以避免检查每个可能中心的回文。

首先回答自己——当你找到一个给定长度的回文时，假设是 5——下一步你不能跳到这个回文的末尾（跳过 4 个字母和 4 个中间字母）吗？

如果您尝试创建一个长度为 8 的回文并放置另一个长度 > 8 的回文，其中中心位于第一个回文的右侧，您会发现一些有趣的东西。试试看： 长度为 8 的回文 - WOWILIKEEKIL - Like + ekiL = 8 现在在大多数情况下，您可以写下两个 E 之间的位置作为中心，数字 8 作为长度，然后跳到最后一个 L 之后寻找大回文的中心。

这种方法是不正确的，较大回文的中心可以在 ekiL 内，如果你在最后一个 L 之后跳转，你会错过它。

找到 LIKE+EKIL 后，将 8 放入这些算法使用的数组中，如下所示：

[0,1,0,3,0,1,0,1,0,3,0,1,0,1,0,1,8]

为了

[#,W,#,O,#,W,#,I,#,L,#,I,#,K,#,E,#]

诀窍是您已经知道 8 之后的接下来的 7 (8-1) 个数字很可能与左侧相同，因此下一步是自动将 7 个数字从 8 的左侧复制到 8 的右侧，保持不变请注意，它们还不是最终的。数组看起来像这样

[0,1,0,3,0,1,0,1,0,3,0,1,0,1,0,1,8,1,0,1,0,1,0,3] (我们在 8)

为了

[#,W,#,O,#,W,#,I,#,L,#,I,#,K,#,E,#,E,#,K,#,I,#,L]

让我们举个例子，这样的跳跃会破坏我们当前的解决方案，看看我们能注意到什么。

WOWILIKEEKIL - 让我们尝试在 EKIL 内的某个地方用中心制作更大的回文。但这不可能——我们需要将单词 EKIL 更改为包含回文的内容。什么？OOOOOh - 这就是诀窍。中心在我们当前回文的右侧的更大回文的唯一可能性是它已经在回文的右侧（和左侧）。

让我们尝试基于 WOWILIKEEKIL 构建一个 我们需要将 EKIL 更改为例如 EKIK，以 I 作为更大回文的中心 - 请记住也将 LIKE 更改为 KIKE。我们棘手的回文的第一个字母将是：

哇咔咔

如前所述 - 让最后一个我成为比 KIKEEKIK 更大的苍白球的中心：

WOWIKIKEEKIKEEKIKIW

让我们将数组组成我们的旧 pallindrom 并找出如何处理附加信息。

为了

[_ W _ O _ W _ I _ K _ I _ K _ E _ E _ K _ I _ K _ E _ E _ K _ I _ K _ I _ W ]

它将是 [0,1,0,3,0,1,0,1,0,3,0,3,0,1,0,1,8

我们知道下一个 I - a 3rd 将是最长的回文，但让我们暂时忘记它。让我们将数组中的数字从 8 的左边复制到右边（8 个数字）

[0,1,0,3,0,1,0,1,0,3,0,3,0,1,0,1,8,1,0,1,0,3,0,3]

在我们的循环中，我们处于数字 8 的 E 之间。I（最大回文的未来中间）有什么特别之处，我们不能直接跳到 K（当前最大回文的最后一个字母）？特殊的是，它超过了数组的当前大小……怎么办？如果您将 3 个空格移到 3 的右侧 - 您将超出数组。这意味着它可以是最大的回文线的中间，而你可以跳得最远的是这个字母 I。

对不起这个答案的长度 - 我想解释一下算法并可以向你保证 - @OmnipotentEntity 是对的 - 在向你解释后我理解得更好:)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-08-04T16:05:42.493

全文：[http ://www.zrzahid.com/longest-palindromic-substring-in-linear-time-manachers-algorithm/](http://www.zrzahid.com/longest-palindromic-substring-in-linear-time-manachers-algorithm/)

首先，让我们仔细观察回文，以找到一些有趣的性质。例如，S1 = "abaaba" 和 S2="abcba"，两者都是回文，但它们之间的非平凡（即不是长度或字符）区别是什么？S1 是以 i=2 和 i=3 之间的不可见空间（不存在的空间！）为中心的回文。另一方面，S2 以 i=2 处的字符为中心（即 c）。为了优雅地处理回文的中心而不考虑奇数/偶数长度，让我们通过在字符之间插入特殊字符 $ 来转换回文。然后 S1="abba" 和 S2="abcba" 将被转换为以 i=6 和 T2="$a$b$c$b 为中心的 T1="$a$b$a$a$b$a$" $a$" 以 i=5 为中心。现在，我们可以看到中心是存在的，长度是一致的 2*n+1，其中 n = 原始字符串的长度。例如，

```
                    我是           
      -------------------------------------------------- ---
      | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10| 11| 12|
      -------------------------------------------------- ---
   T1=| $ | 一个 | $ | 乙 | $ | 一个 | $ | 一个 | $ | 乙 | $ | 一个 | $ |
      -------------------------------------------------- ---

```

接下来，从围绕中心 c 的（变换的）回文 T 的对称性质观察，对于 0<= k<= c，T[ck] = T[c+k]。即位置 ck 和 c+k 相互镜像。换一种说法，对于中心 c 右侧的索引 i，镜像索引 i' 在 c 的左侧，这样 ci'=ic => i'=2*ci 反之亦然。那是，

> 对于回文子串中心c右侧的每个位置i，i的镜像位置为，i'=2*ci，反之亦然。

让我们定义一个数组 P[0..2*n] 使得 P[i] 等于以 i 为中心的回文的长度。请注意，长度实际上是通过原始字符串中的字符数来衡量的（通过忽略特殊字符 $）。还让 min 和 max 分别是以 c 为中心的回文子串的最左边和最右边的边界。因此，min=cP[c] 和 max=c+P[c]。例如，对于回文S="abaaba"，变换后的回文T，镜像中心c=6，长度数组P[0..12]，min=cP[c]=6-6=0，max=c+P [c]=6+6=12，两个样本镜像索引i和i'如下图所示。

```
      min i' ci max
      -------------------------------------------------- ---
      | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10| 11| 12|
      -------------------------------------------------- ---
    T=| $ | 一个 | $ | 乙 | $ | 一个 | $ | 一个 | $ | 乙 | $ | 一个 | $ |
      -------------------------------------------------- ---
    P=| 0 | 1 | 0 | 3 | 0 | 5 | 6 | 1 | 0 | 3 | 0 | 1 | 0 |
      -------------------------------------------------- ---

```

有了这样一个长度数组 P，我们可以通过查看 P 的最大元素来找到最长回文子串的长度。也就是说，

> P[i] 是变换后的字符串 T 中中心在 i 处的回文子串的长度，即。在原始字符串 S 中以 i/2 为中心；因此，最长的回文子串将是从索引 (i [max] -P[i [max] ])/2开始的长度为 P[i [max ] 的子串，其中 i] [max]是 P 中最大元素的索引。

让我们在下面为我们的非回文示例字符串 S="babaabca" 绘制一个类似的图形。

```
                       最小 c 最大
                       |----------------|-----------------|
      -------------------------------------------------- ------------------
 idx= | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10| 11| 12| 13| 14| 15| 16|
      -------------------------------------------------- ------------------
    T=| $ | 乙 | $ | 一个 | $ | 乙 | $ | 一个 | $ | 一个 | $ | 乙 | $ | c | $ | 一个 | $ |
      -------------------------------------------------- ------------------
    P=| 0 | 1 | 0 | 3 | 0 | 3 | 0 | 1 | 4 | 1 | 0 | 1 | 0 | 1 | 0 | 1 | 0 |
      -------------------------------------------------- ------------------

```

问题是如何有效地计算 P。对称属性暗示了以下情况，我们可以通过在左侧的镜像索引 i' 处使用先前计算的 P[i'] 来计算 P[i]，从而跳过大量计算。假设我们有一个参考回文（第一个回文）开始。

1.  > 如果第二个回文位于第一个回文的边界内，则其中心位于第一个回文右侧的第三个回文的长度将与锚定在左侧镜像中心的第二个回文的长度完全相同。至少一个字符。

    例如在下图中，第一个回文以 c=8 为中心，以 min=4 和 max=12 为边界，以 i=9 为中心的第三个回文的长度（镜像索引 i'= 2*ci = 7）为, P[i] = P[i'] = 1。这是因为以 i' 为中心的第二个回文位于第一个回文的范围内。同样，P[10] = P[6] = 0。

    ```

                                          |----第三----|
                                  |----第二----|        
                           |-----------第一回文---------|
                           min i' ci max
                           |------------|---|---|-------------|
          -------------------------------------------------- ------------------
     idx= | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10| 11| 12| 13| 14| 15| 16|
          -------------------------------------------------- ------------------
        T=| $ | 乙 | $ | 一个 | $ | 乙 | $ | 一个 | $ | 一个 | $ | 乙 | $ | c | $ | 一个 | $ |
          -------------------------------------------------- ------------------
        P=| 0 | 1 | 0 | 3 | 0 | 3 | 0 | 1 | 4 | ? | ? | ? | ? | ? | ? | ? | ? |
          -------------------------------------------------- ------------------

    ```

    现在，问题是如何检查这种情况？请注意，由于线段 [min..i'] 的对称属性长度等于线段 [i..max] 的长度。另外，请注意，如果第 2 个回文的左边缘在第 1 个回文的左边界内，则第 2 个回文完全在第一个回文内。那是，

    ```
            i'-P[i'] >= min
            =>P[i']-i' < -min（否定）
            =>P[i'] < i'-min
            =>P[i'] < max-i [(max-i)=(i'-min) 由于对称属性]。

    ```

    结合案例1中的所有事实，

    > P[i] = P[i'], iff (max-i) > P[i']

2.  > 如果第二个回文符合或超出第一个回文的左边界，则保证第三个回文至少具有从它自己的中心到第一个回文的最右外字符的长度。从第二个回文的中心到第一个回文的最左边的字符，这个长度是相同的。

    例如在下图中，以 i=5 为中心的第二个回文数超出了第一个回文数的左边界。所以，在这种情况下，我们不能说 P[i]=P[i']。但是以 i=11 为中心的第三个回文的长度，P[i] 至少是从其中心 i=11 到以 c 为中心的第一个回文的右边界 max=12 的长度。也就是说，P[i]>=1。这意味着当且仅当超过 max 的下一个直接字符与镜像字符完全匹配时，第三个回文可以扩展到超过 max，并且我们继续这个检查。例如，在这种情况下 P[13]!=P[9] 并且它不能被扩展。所以，P[i] = 1。

    ```

                  |-------第二回文-----| |----第三----|---？    
                           |-----------第一回文---------|
                           min i' ci max
                           |----|------------|------------|------|
          -------------------------------------------------- ------------------
     idx= | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10| 11| 12| 13| 14| 15| 16|
          -------------------------------------------------- ------------------
        T=| $ | 乙 | $ | 一个 | $ | 乙 | $ | 一个 | $ | 一个 | $ | 乙 | $ | c | $ | 一个 | $ |
          -------------------------------------------------- ------------------
        P=| 0 | 1 | 0 | 3 | 0 | 3 | 0 | 1 | 4 | 1 | 0 | ? | ? | ? | ? | ? | ? |
          -------------------------------------------------- ------------------

    ```

    那么，如何检查这种情况呢？这只是案例 1 的失败检查。也就是说，第二个回文将延伸超过第一个回文的左边缘当且仅当，

    ```
            i'-P[i'] < 分钟
            =>P[i']-i' >= -min [否定]
            =>P[i'] >= i'-min
            =>P[i'] >= max-i [(max-i)=(i'-min) 由于对称属性]。

    ```

    也就是说，P[i] 至少是 (max-i) iff (max-i) P[i]>=(max-i), iff (max-i) 现在，如果第三个回文确实超出了 max，那么我们需要更新新回文的中心和边界。

    > 如果以 i 为中心的回文确实扩展到超过最大值，那么我们有新的（扩展的）回文，因此在 c=i 处有一个新的中心。将 max 更新到新回文的最右边边界。

    结合案例 1 和案例 2 中的所有事实，我们可以得出一个非常漂亮的小公式：

    ```
            案例一：P[i] = P[i'], iff (max-i) > P[i']
            情况 2：P[i]>=(max-i), iff (max-i) = min(P[i'], max-i)。

    ```

    > 也就是说，当第三个回文数不可扩展超过 max 时，P[i]=min(P[i'], max-i)。否则，我们在 c=i 和新的 max=i+P[i] 的中心有新的第三回文数。

3.  > 第一回文和第二回文都没有提供信息来帮助确定第四回文的回文长度，第四回文的中心在第一回文的右侧之外。

    也就是说，如果 i>max，我们不能先发制人地确定 P[i]。那是，

    > P[i] = 0，当且仅当 max-i < 0

    结合所有情况，我们得出公式：

    > P[i] = 最大值>i ? min(P[i'], max-i) : 0\. 如果我们可以扩展超出 max，那么我们通过将超出 max 的字符与相对于 c=i 处的新中心的镜像字符匹配来扩展。最后，当我们有不匹配时，我们更新新的 max=i+P[i]。

参考：[wiki页面中的算法描述](http://en.wikipedia.org/wiki/Longest_palindromic_substring)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-26T13:31:40.677

我使用动画图形制作了有关此算法的视频。希望它能帮助你理解它！ [https://www.youtube.com/watch?v=kbUiR5YWUpQ](https://www.youtube.com/watch?v=kbUiR5YWUpQ)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-09T08:20:50.787

该材料对我理解它有很大帮助：http: [//solutionleetcode.blogspot.com/2013/07/leetcode-longest-palindromic-substring.html](http://solutionleetcode.blogspot.com/2013/07/leetcode-longest-palindromic-substring.html)

将 T 定义为以每个字符为中心的最长回文子串的长度。

关键是，当较小的回文完全嵌入较长的回文中时，T[i] 在较长的回文中也应该是对称的。

否则，我们将不得不从头开始计算 T[i]，而不是从对称的左侧部分导出。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-30T06:37:21.063

```
class Palindrome
{
    private int center;
    private int radius;

    public Palindrome(int center, int radius)
    {
        if (radius < 0 || radius > center)
            throw new Exception("Invalid palindrome.");

        this.center = center;
        this.radius = radius;
    }

    public int GetMirror(int index)
    {
        int i = 2 * center - index;

        if (i < 0)
            return 0;

        return i;
    }

    public int GetCenter()
    {
        return center;
    }

    public int GetLength()
    {
        return 2 * radius;
    }

    public int GetRight()
    {
        return center + radius;
    }

    public int GetLeft()
    {
        return center - radius;
    }

    public void Expand()
    {
        ++radius;
    }

    public bool LargerThan(Palindrome other)
    {
        if (other == null)
            return false;

        return (radius > other.radius);
    }

}

private static string GetFormatted(string original)
{
    if (original == null)
        return null;
    else if (original.Length == 0)
        return "";

    StringBuilder builder = new StringBuilder("#");
    foreach (char c in original)
    {
        builder.Append(c);
        builder.Append('#');
    }

    return builder.ToString();
}

private static string GetUnFormatted(string formatted)
{
    if (formatted == null)
        return null;
    else if (formatted.Length == 0)
        return "";

    StringBuilder builder = new StringBuilder();
    foreach (char c in formatted)
    {
        if (c != '#')
            builder.Append(c);
    }

    return builder.ToString();
}

public static string FindLargestPalindrome(string str)
{
    string formatted = GetFormatted(str);

    if (formatted == null || formatted.Length == 0)
        return formatted;

    int[] radius = new int[formatted.Length];

    try
    {
        Palindrome current = new Palindrome(0, 0);
        for (int i = 0; i < formatted.Length; ++i)
        {
            radius[i] = (current.GetRight() > i) ?
                Math.Min(current.GetRight() - i, radius[current.GetMirror(i)]) : 0;

            current = new Palindrome(i, radius[i]);

            while (current.GetLeft() - 1 >= 0 && current.GetRight() + 1 < formatted.Length &&
                formatted[current.GetLeft() - 1] == formatted[current.GetRight() + 1])
            {
                current.Expand();
                ++radius[i];
            }
        }

        Palindrome largest = new Palindrome(0, 0);
        for (int i = 0; i < radius.Length; ++i)
        {
            current = new Palindrome(i, radius[i]);
            if (current.LargerThan(largest))
                largest = current;
        }

        return GetUnFormatted(formatted.Substring(largest.GetLeft(), largest.GetLength()));
    }
    catch (Exception ex) 
    {
        Console.WriteLine(ex);
    }

    return null;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-23T01:58:29.480

# 在字符串中查找最长回文的快速 Javascript 解决方案：

```
const lpal = str => {
  let lpal = ""; // to store longest palindrome encountered
  let pal = ""; // to store new palindromes found
  let left; // to iterate through left side indices of the character considered to be center of palindrome
  let right; // to iterate through left side indices of the character considered to be center of palindrome
  let j; // to iterate through all characters and considering each to be center of palindrome
  for (let i=0; i<str.length; i++) { // run through all characters considering them center of palindrome
    pal = str[i]; // initializing current palindrome
    j = i; // setting j as index at the center of palindorme
    left = j-1; // taking left index of j
    right = j+1; // taking right index of j
    while (left >= 0 && right < str.length) { // while left and right indices exist
      if(str[left] === str[right]) { //
        pal = str[left] + pal + str[right];
      } else {
        break;
      }
      left--;
      right++;
    }
    if(pal.length > lpal.length) {
      lpal = pal;
    }
    pal = str[i];
    j = i;
    left = j-1;
    right = j+1;
    if(str[j] === str[right]) {
      pal = pal + str[right];
      right++;
      while (left >= 0 && right < str.length) {
        if(str[left] === str[right]) {
          pal = str[left] + pal + str[right];
        } else {
          break;
        }
        left--;
        right++;
      }
      if(pal.length > lpal.length) {
        lpal = pal;
      }
    }
  }
  return lpal;
} 
```

### 示例输入

```
console.log(lpal("gerngehgbrgregbeuhgurhuygbhsbjsrhfesasdfffdsajkjsrngkjbsrjgrsbjvhbvhbvhsbrfhrsbfsuhbvsuhbvhvbksbrkvkjb")); 
```

### 输出

```
asdfffdsa 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-22T00:03:57.170

我经历了同样的挫折/挣扎，并在此页面[https://www.hackerearth.com/practice/algorithms/string-algorithm/manachars-algorithm/tutorial/](https://www.hackerearth.com/practice/algorithms/string-algorithm/manachars-algorithm/tutorial/)上找到了最容易理解的解决方案。我尝试以我自己的风格来实现这个解决方案，我想我现在可以理解这个算法了。我还尝试在代码中填充尽可能多的解释来解释算法。希望这有帮助！

```
#Manacher's Algorithm
def longestPalindrome(s):
  s = s.lower()
  #Insert special characters, #, between characters
  #Insert another special in the front, $, and at the end, @, of string  to avoid bound checking.
  s1 = '$#'
  for c in s:
      s1 += c + '#'
  s1 = s1+'@'
  #print(s, " -modified into- ", s1)

  #Palin[i] = length of longest palindrome start at center i
  Palin = [0]*len(s1)

  #THE HARD PART: THE MEAT of the ALGO

  #c and r help keeping track of the expanded regions.
  c = r = 0

  for i in range(1,len(s1)-1): #NOTE: this algo always expands around center i

      #if we already expanded past i, we can retrieve partial info 
      #about this location i, by looking at the mirror from left side of center.

      if r > i:  #---nice, we look into memory of the past---
          #look up mirror from left of center c
          mirror = c - (i-c)

          #mirror's largest palindrome = Palin[mirror]

          #case1: if mirror's largest palindrome expands past r, choose r-i
          #case2: if mirror's largest palindrome is contains within r, choose Palin[mirror]
          Palin[i] = min(r-i, Palin[mirror]) 

      #keep expanding around center i
      #NOTE: instead of starting to expand from i-1 and i+1, which is repeated work
      #we start expanding from Palin[i], 
      ##which is, if applicable, updated in previous step
      while s1[i+1+Palin[i]] == s1[i-1-Palin[i]]:
          Palin[i] += 1

      #if expanded past r, update r and c
      if i+Palin[i] > r:
          c = i
          r = i + Palin[i]

  #the easy part: find the max length, remove special characters, and return
  max_center = max_length = 0
  for i in range(len(s1)):
      if Palin[i] > max_length:
          max_length = Palin[i]
          max_center = i  
  output = s1[max_center-max_length : max_center+max_length]
  output = ''.join(output.split('#'))
  return output # for the (the result substring) 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-02-28T20:20:08.273

```
using namespace std;

class Palindrome{
public:
    Palindrome(string st){
        s = st; 
        longest = 0; 
        maxDist = 0;
        //ascii: 126(~) - 32 (space) = 94 
        // for 'a' to 'z': vector<vector<int>> v(26,vector<int>(0)); 
        vector<vector<int>> v(94,vector<int>(0)); //all ascii 
        mDist.clear();
        vPos = v; 
        bDebug = true;
    };

    string s;
    string sPrev;    //previous char
    int longest;     //longest palindrome size
    string sLongest; //longest palindrome found so far
    int maxDist;     //max distance been checked 
    bool bDebug;

    void findLongestPal();
    int checkIfAnchor(int iChar, int &i);
    void checkDist(int iChar, int i);

    //store char positions in s pos[0] : 'a'... pos[25] : 'z' 
    //       0123456
    // i.e. "axzebca" vPos[0][0]=0  (1st. position of 'a'), vPos[0][1]=6 (2nd pos. of 'a'), 
    //                vPos[25][0]=2 (1st. pos. of 'z').  
    vector<vector<int>> vPos;

    //<anchor,distance to check> 
    //   i.e.  abccba  anchor = 3: position of 2nd 'c', dist = 3 
    //   looking if next char has a dist. of 3 from previous one 
    //   i.e.  abcxcba anchor = 4: position of 2nd 'c', dist = 4 
    map<int,int> mDist;
};

//check if current char can be an anchor, if so return next distance to check (3 or 4)
// i.e. "abcdc" 2nd 'c' is anchor for sub-palindrome "cdc" distance = 4 if next char is 'b'
//      "abcdd: 2nd 'd' is anchor for sub-palindrome "dd"  distance = 3 if next char is 'c'
int Palindrome::checkIfAnchor(int iChar, int &i){
    if (bDebug)
          cout<<"checkIfAnchor. i:"<<i<<" iChar:"<<iChar<<endl;
    int n = s.size();
    int iDist = 3;
    int iSize = vPos[iChar].size();
    //if empty or distance to closest same char > 2
    if ( iSize == 0 || vPos[iChar][iSize - 1] < (i - 2)){
        if (bDebug)
              cout<<"       .This cannot be an anchor! i:"<<i<<" : iChar:"<<iChar<<endl; 
        //store char position
        vPos[iChar].push_back(i);
        return -1; 
    }

    //store char position of anchor for case "cdc"
    vPos[iChar].push_back(i);    
    if (vPos[iChar][iSize - 1] == (i - 2))
        iDist = 4;
    //for case "dd" check if there are more repeated chars
    else {
        int iRepeated = 0;
        while ((i+1) < n && s[i+1] == s[i]){
            i++;
            iRepeated++;
            iDist++; 
            //store char position
            vPos[iChar].push_back(i);
        }
    }

    if (bDebug)
          cout<<"       .iDist:"<<iDist<<" i:"<<i<<endl; 

    return iDist;
};

//check distance from previous same char, and update sLongest
void Palindrome::checkDist(int iChar, int i){
    if (bDebug)
            cout<<"CheckDist. i:"<<i<<" iChar:"<<iChar<<endl;
    int iDist;
    int iSize = vPos[iChar].size();
    bool b1stOrLastCharInString; 
    bool bDiffDist;

    //checkAnchor will add this char position 
    if ( iSize == 0){
        if (bDebug)
            cout<<"       .1st time we see this char. Assign it INT_MAX Dist"<<endl; 
        iDist = INT_MAX;
    }
    else {
        iDist = i - vPos[iChar][iSize - 1]; 
    }

    //check for distances being check, update them if found or calculate lengths if not.
    if (mDist.size() == 0) {
        if (bDebug)
             cout<<"       .no distances to check are registered, yet"<<endl;
        return;
    }

    int i2ndMaxDist = 0;
    for(auto it = mDist.begin(); it != mDist.end();){
        if (bDebug)
                cout<<"       .mDist. anchor:"<<it->first<<" . dist:"<<it->second<<endl; 
        b1stOrLastCharInString = false; 
        bDiffDist = it->second == iDist;  //check here, because it can be updated in 1st. if
        if (bDiffDist){
            if (bDebug)
                cout<<"       .Distance checked! :"<<iDist<<endl;
            //check if it's the first char in the string
            if (vPos[iChar][iSize - 1] == 0 || i == (s.size() - 1))
                b1stOrLastCharInString = true;
            //we will continue checking for more...
            else {
                it->second += 2; //update next distance to check
                if (it->second > maxDist) {
                     if (bDebug)
                          cout<<"       .previous MaxDist:"<<maxDist<<endl;
                     maxDist = it->second;
                     if (bDebug)
                          cout<<"       .new MaxDist:"<<maxDist<<endl;
                }
                else if (it->second > i2ndMaxDist) {//check this...hmtest
                     i2ndMaxDist = it->second;
                     if (bDebug)
                          cout<<"       .second MaxDist:"<<i2ndMaxDist<<endl;
                }
                it++; 
            }
        }
        if (!bDiffDist || b1stOrLastCharInString) {
            if (bDebug && it->second != iDist)
                cout<<"       .Dist diff. Anchor:"<<it->first<<" dist:"<<it->second<<" iDist:"<<iDist<<endl;
            else if (bDebug) 
                cout<<"       .Palindrome found at the beggining or end of the string"<<endl;

            //if we find a closest same char.
            if (!b1stOrLastCharInString && it->second > iDist){
                if (iSize > 1) {
                   if (bDebug)
                       cout<<"       . < Dist . looking further..."<<endl; 
                   iSize--;  
                   iDist = i - vPos[iChar][iSize - 1];
                   continue;    
                }
            }
            if (iDist == maxDist) {
                maxDist = 0;
                if (bDebug)
                     cout<<"       .Diff. clearing Max Dist"<<endl;
            }
            else if (iDist == i2ndMaxDist) {
                i2ndMaxDist = 0;
                if (bDebug)
                      cout<<"       .clearing 2nd Max Dist"<<endl; 
            }

            int iStart; 
            int iCurrLength;
            //first char in string
            if ( b1stOrLastCharInString && vPos[iChar].size() > 0 && vPos[iChar][iSize - 1] == 0){
                iStart = 0;
                iCurrLength = i+1;
            }
            //last char in string
            else if (b1stOrLastCharInString && i == (s.size() - 1)){
                iStart = i - it->second; 
                iCurrLength = it->second + 1;
            }
            else {
                iStart = i - it->second + 1; 
                iCurrLength = it->second - 1;  //"xabay" anchor:2nd. 'a'. Dist from 'y' to 'x':4\. length 'aba':3
            }

            if (iCurrLength > longest){
                if (bDebug)
                      cout<<"       .previous Longest!:"<<sLongest<<" length:"<<longest<<endl;
                longest = iCurrLength;               
                sLongest = s.substr(iStart, iCurrLength);

                if (bDebug)
                      cout<<"       .new Longest!:"<<sLongest<<" length:"<<longest<<endl;
            }

            if (bDebug)
                  cout<<"       .deleting iterator for anchor:"<<it->first<<" dist:"<<it->second<<endl; 

            mDist.erase(it++);
        }
    }

    //check if we need to get new max distance
    if (maxDist == 0 && mDist.size() > 0){ 
        if (bDebug)
              cout<<"       .new maxDist needed";
        if (i2ndMaxDist > 0) {
            maxDist = i2ndMaxDist;
            if (bDebug)
              cout<<"       .assigned 2nd. max Dist to max Dist"<<endl;
        }
        else {
            for(auto it = mDist.begin(); it != mDist.end(); it++){
                if (it->second > maxDist)
                    maxDist = it->second;
            }
            if (bDebug)
              cout<<"       .new max dist assigned:"<<maxDist<<endl;
        }
    }  
};        

void Palindrome::findLongestPal(){
    int n = s.length(); 
    if (bDebug){
        cout<<"01234567891123456789212345"<<endl<<"abcdefghijklmnopqrstuvwxyz"<<endl<<endl;            
        for (int i = 0; i < n;i++){
            if (i%10 == 0)
                cout<<i/10;
            else
                cout<<i;
        }
        cout<<endl<<s<<endl;
    }
    if (n == 0)
        return;

    //process 1st char
    int j = 0;
    //for 'a' to 'z' : while (j < n && (s[j] < 'a' && s[j] > 'z'))
    while (j < n && (s[j] < ' ' && s[j] > '~'))
        j++;
    if (j > 0){
        s.substr(j);
        n = s.length();
    }
    // for 'a' to 'z' change size of vector from 94 to 26 : int iChar = s[0] - 'a';
    int iChar = s[0] - ' ';
    //store char position
    vPos[iChar].push_back(0);  

    for (int i = 1; i < n; i++){
        if (bDebug)
            cout<<"findLongestPal. i:"<<i<<" "<<s.substr(0,i+1)<<endl; 
        //if max. possible palindrome would be smaller or equal 
        //             than largest palindrome found then exit
        //   (n - i) = string length to check 
        //   maxDist: max distance to check from i 
        int iPossibleLongestSize = maxDist + (2 * (n - i));
        if ( iPossibleLongestSize <= longest){
            if (bDebug)
                cout<<"       .PosSize:"<<iPossibleLongestSize<<" longest found:"<<iPossibleLongestSize<<endl;
            return;
        }

        //for 'a' to 'z' : int iChar = s[i] - 'a';
        int iChar = s[i] - ' ';
        //for 'a' to 'z': if (iChar < 0 || iChar > 25){
        if (iChar < 0 || iChar > 94){
            if (bDebug)
                cout<<"       . i:"<<i<<" iChar:"<<s[i]<<" skipped!"<<endl;
            continue;
        }

        //check distance to previous char, if exist
        checkDist(iChar, i);

        //check if this can be an anchor
        int iDist = checkIfAnchor(iChar,i);
        if (iDist == -1) 
            continue;

        //append distance to check for next char.
        if (bDebug)
                cout<<"       . Adding anchor for i:"<<i<<" dist:"<<iDist<<endl;
        mDist.insert(make_pair(i,iDist));

        //check if this is the only palindrome, at the end
        //i.e. "......baa" or "....baca" 
        if (i == (s.length() - 1) && s.length() > (iDist - 2)){
            //if this is the longest palindrome! 
            if (longest < (iDist - 1)){
                sLongest = s.substr((i - iDist + 2),(iDist - 1));
            }
        }
    }
};

int main(){
    string s;
    cin >> s;

    Palindrome p(s);
    p.findLongestPal();
    cout<<p.sLongest; 
    return 0;
} 
```

# php - 将爬虫指向 HTML 快照

> ID：10468213
> 
> 赞同：3
> 
> 时间：2012-05-06T04:53:41.277
> 
> 标签：php, html, ajax

我正在尝试使我的 AJAX 网站可抓取：

[这是有问题的网站。](http://www.canofclouds.com/thought/)

*   我创建了一个生成页面的 htmlsnapshot.php（该文件需要传递哈希片段才能生成正确的内容）。
*   我不知道如何让爬虫加载这个文件，同时让普通用户加载普通文件。
*   我真的不明白爬虫对哈希片段做了什么（这可能是我的问题的一部分。）

有人有任何提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T07:23:42.007

爬虫会自行转移。您只需要配置您的 PHP 脚本来处理 Google 将向您的网站发送的 GET 参数（而不是依赖于 AJAX）。

基本上，当谷歌找到一个链接`yourdomain.com/#!something`而不是请求`/`和运行 JavaScript 来对数据发出 AJAX 请求时`something`，谷歌会*自动*（无需你做任何事情）将`#!`你的 URL 中的任何内容翻译为`?_escaped_fragment_=something`.

您只需要（在您的 PHP 脚本中）检查是否`$_GET['_escaped_fragment_']`已设置，如果已设置，则显示该值的内容`something`。

这实际上很容易。

# c# - Monotouch UIPopover iPhone 覆盖 _popoversDisabled

> ID：10468215
> 
> 赞同：1
> 
> 时间：2012-05-06T04:54:07.973
> 
> 标签：c#, iphone, xamarin.ios

我在 youtube 上看到了这个视频，在 Objective-c 中，他能够覆盖 _popoversDisabled 方法并允许它们显示在 iPhone 上。

我的问题是，我将如何在 monotouch 中做同样的事情，如下所示：

```
This code was written by @hamzasood
===============================
=====popover code===========
=============================
@interface UIPopoverController (overrides)
+ (BOOL)_popoversDisabled;
@end

@implementation UIPopoverController (overrides)

+ (BOOL)_popoversDisabled { return NO;
}

@end 
```

Objective-C 视频教程在这里：[http ://www.youtube.com/watch?v=1iykxemuxbk&feature=related](http://www.youtube.com/watch?v=1iykxemuxbk&feature=related)

# php - Access-Control-Allow-Origin 错误：我尝试设置标题以允许域但仍然无法正常工作，

> ID：10468216
> 
> 赞同：2
> 
> 时间：2012-05-06T04:54:16.517
> 
> 标签：php, http-headers

我试过这样：

```
<head>
<meta http-equiv="Access-Control-Allow-Origin" content="http://localhost" />
<script src="jquery.js" type="text/javascript" ></script>
</head> 
```

我也试过放 *，我尝试通过在计算机上打开一个 html 文件直接运行，我也尝试使用[http://localhost/filename.php](http://localhost/filename.php)，尝试 /filename.html，但没有用。

也试过下面的 php 代码（我把它放在 html 标记之上）：

```
<?php
header('Access-Control-Allow-Origin : *');
?>
<html>
<head> 
```

但出现错误：Access-Control-Allow-Origin 不允许Origin [http://localhost 。](http://localhost)

如果我直接从文件运行，则会出现错误：Access-Control-Allow-Origin 不允许 Origin null。

有什么解决办法？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:04:43.677

这是一个服务器设置（据我所知）。您可以将其放入 Apache（如果您正在运行 Apache）配置文件中的 `<Directory>, <Location>, <Files> or <VirtualHost>`部分或 .htaccess 文件中：

```
Header set Access-Control-Allow-Origin * 
```

此外，* 可以是“http://localhost”。确保 mod_headers 已启用/安装。

# android - 如何从 URL 下载 JSON 对象数组，并为 Android 应用程序存储？

> ID：10468221
> 
> 赞同：2
> 
> 时间：2012-05-06T04:55:02.720
> 
> 标签：android, json

我正在尝试将 API 集成到我正在编写的 android 应用程序中，但是我在尝试获取 JSON 数组时遇到了噩梦。该 API 有一个返回 JSON 数组的 URL，但在我不知道它是如何工作或如何操作之前从未使用过 JSON。

我已经查看并找到了大量的示例，但没有什么可以解释它为什么/如何完成的。任何帮助理解这一点将不胜感激。

这就是我最终得到的结果，再次对 JSON 不了解，这是我在黑暗中的一次尝试（使用示例/教程作为指导）......但它不起作用:(

```
import org.json.*;          
//Connect to URL
        URL url = new URL("URL WOULD BE HERE");
        HttpURLConnection connection = (HttpURLConnection)url.openConnection();
        connection.connect();

//Get Data from URL Link
        int ok = connection.getResponseCode();
        if (ok == 200) {
        String line = null;
        BufferedReader buffer = new BufferedReader(new java.io.InputStreamReader(connection.getInputStream()));
        StringBuilder sb = new StringBuilder();

        while ((line = buffer.readLine()) != null)
          sb.append(line + '\n');
        //FROM HERE ON I'm Kinda Lost & Guessed
        JSONObject obj = (JSONObject) JSONValue.parse(sb.toString()); //ERROR HERE:complains it dosn't know what JSONValue is
        JSONArray array = (JSONArray)obj.get("response");
        for (int i=0; i < array.size(); i++) {
          JSONObject list = (JSONObject) ((JSONObject)array.get(i)).get("list");
          System.out.println(list.get("name")); //Used to debug
        }
      } 
```

***更新/解决方案：*** 所以，事实证明代码没有任何问题。我错用了我认为它会返回的东西。我认为这是一个 JSONObject 数组。实际上，它是一个包裹在一个数组中的 JSONObjects，包裹在一个 JSONObject 中。

对于那些感兴趣/有类似问题的人，这就是我最终得到的。我把它分成两种方法。首先连接/下载，然后：

```
private String[] buildArrayList(String Json, String Find) {
            String ret[] = null;
            try {
            JSONObject jObject = new JSONObject(Json);
            JSONArray jArray = jObject.getJSONArray("response");
            ret = new String[jArray.length()];

            for(int i=0;i<jArray.length();i++){

            JSONObject json_data = jArray.getJSONObject(i);
            String var = json_data.getString(Find);
            ret[i] = var;
            }
            } catch (Exception e) {
                e.printStackTrace();
            }
            return ret;  
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T06:21:49.207

好的，我的朋友，我用下面的代码在我的应用程序中解决了同样的问题：

1.- 处理 Http 请求的类：

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static JSONObject jObj1 = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();            

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
        //Log.e("JSONObject(JSONParser1):", json);
    } catch (Exception e) {
        Log.e("Buffer Error json1" +
                "", "Error converting result json1:" + e.toString());
    }
    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
        jObj1 = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser1:", "Error parsing data json1:" + e.toString());
    }
    // return JSON String
    return jObj;
}
} 
```

后来，一个类来处理 json 信息（数组、对象、字符串等......）

```
public class ListViewer extends ListActivity{

TextView UserName1;
TextView LastName1;

 // url to make request
private static String url = "http://your.com/url";

// JSON Node names
public static final String TAG_COURSES = "Courses";    //JSONArray
//public static final String TAG_USER = "Users";    //JSONArray -unused here.

//Tags from JSon log.aspx All Data Courses.
public static final String TAG_COURSEID = "CourseId"; //Object from Courses
public static final String TAG_TITLE = "title";
public static final String TAG_INSTRUCTOR = "instructor";
public static final String TAG_LENGTH = "length";
public static final String TAG_RATING = "Rating";  //Object from Courses
public static final String TAG_SUBJECT = "subject";
public static final String TAG_DESCRIPTION = "description";

public static final String TAG_STATUS = "Status";  //Object from Courses    
public static final String TAG_FIRSTNAME = "FirstName";  //Object from User
public static final String TAG_LASTNAME = "LastName";  //Object from User 

// contacts JSONArray
JSONArray Courses = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.lay_main);

    // Hashmap for ListView
    final ArrayList<HashMap<String, String>> coursesList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance (json2)
    JSONParser2 jParser2 = new JSONParser2();

    // getting JSON string from URL json2
    final JSONObject json2 = jParser2.getJSONFromUrl(url);

            try {

                // Getting Array of Contacts
                Courses = json2.getJSONArray(TAG_COURSES);
                // looping through All Courses      
                for(int i = 0; i < Courses.length(); i++){
                    JSONObject courses1 = Courses.getJSONObject(i);

                    // Storing each json item in variable
                    String courseID = courses1.getString(TAG_COURSEID);
                    //String status = courses1.getString(TAG_STATUS);

                    String Title = courses1.getString(TAG_TITLE);

                    String instructor = courses1.getString(TAG_INSTRUCTOR);
                    String length = courses1.getString(TAG_LENGTH);
                    String rating = courses1.getString(TAG_RATING);
                    String subject = courses1.getString(TAG_SUBJECT);
                    String description = courses1.getString(TAG_DESCRIPTION);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    map.put(TAG_COURSEID,courseID);
                    map.put(TAG_TITLE, Title);
                    map.put(TAG_INSTRUCTOR, instructor);
                    map.put(TAG_LENGTH, length);
                    map.put(TAG_RATING, rating);
                    map.put(TAG_SUBJECT, subject);
                    map.put(TAG_DESCRIPTION, description);

                    //adding HashList to ArrayList
                    coursesList.add(map);
                }} //for Courses
                catch (JSONException e) {
                e.printStackTrace();
                }

     //Updating parsed JSON data into ListView
    ListAdapter adapter = new SimpleAdapter(this, coursesList,
            R.layout.list_courses,
            new String[] { TAG_COURSEID, TAG_TITLE, TAG_INSTRUCTOR, TAG_LENGTH, TAG_RATING, TAG_SUBJECT, TAG_DESCRIPTION }, new int[] {
                    R.id.txt_courseid, R.id.txt_title, R.id.txt_instructor, R.id.txt_length, R.id.txt_rating, R.id.txt_topic, R.id.txt_description });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        //@Override  --------check this override for onClick event---------
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            // getting values from selected ListItem
            String courseID = ((TextView) view.findViewById(R.id.txt_courseid)).getText().toString();
            String Title = ((TextView) view.findViewById(R.id.txt_title)).getText().toString();
            String instructor = ((TextView) view.findViewById(R.id.txt_instructor)).getText().toString();
            String length = ((TextView) view.findViewById(R.id.txt_length)).getText().toString();
            String rating = ((TextView) view.findViewById(R.id.txt_rating)).getText().toString();//Check place in layout
            String subject = ((TextView) view.findViewById(R.id.txt_topic)).getText().toString();// <- HERE
            String description = ((TextView) view.findViewById(R.id.txt_description)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleListItem.class);

            in.putExtra(TAG_COURSEID, courseID);
            in.putExtra(TAG_TITLE, Title);
            in.putExtra(TAG_INSTRUCTOR, instructor);
            in.putExtra(TAG_LENGTH, length);
            in.putExtra(TAG_RATING, rating);
            in.putExtra(TAG_SUBJECT, subject);
            in.putExtra(TAG_DESCRIPTION, description);
            startActivity(in);
        }
    });//lv.SetOnclickListener                      
}//onCreate
 }// Activity 
```

在这种情况下，我会得到数组，对象......希望这能给你一些想法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:22:35.873

在这里你用`JSONValue.parse()`的是无效的。

Insted 的那一行写下这段代码：

```
JSONObject obj = new JSONObject(<String Value>); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T05:08:36.360

1) 使用 webservice 下载你需要的 Json 字符串

[2) 使用Google Gson](http://code.google.com/p/google-gson/downloads/list)将其转换为您想要的对象

```
Gson gson = new Gson();
MyClass C1 = gson.fromJson(strJson, MyClass.class); 
```

# ios - 为什么我的后台工作线程阻塞了 UI 线程？

> ID：10468226
> 
> 赞同：1
> 
> 时间：2012-05-06T04:56:29.577
> 
> 标签：ios, multithreading

我正在开发一个应用程序，该应用程序将本机联系人上传到服务器然后获取响应（JSON，已安装该应用程序的联系人列表）。当原生联系人足够大时，服务器响应会很慢且不稳定。并且用户不能做其他事情。所以我将网络请求放入后台线程。每次我会上传 100 个联系人，做一些任务，然后下 100 个联系人，直到循环完成。

但是在运行中，结果并不如预期。后台线程正在运行，它一直在请求服务器。UI线程被阻塞了，我还是什么都做不了。

这会导致后台线程中的长循环吗？虽然我有 2 个线程，但它们会竞争 CPU 资源（测试设备是 iPod，1 个核心。我认为这可能与核心数无关）？

谁能告诉我有关如何处理这种情况的提示？提前致谢！

更新：

我找到了根本原因。App 委托中的全局变量设置为错误的值，因此 UI 行为很奇怪。我通过评论所有网络请求方法找到了这一点。所以这个问题与多线程无关。抱歉打扰了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T07:13:33.033

我认为需要对您如何执行网络操作进行一些澄清。

第一， NSOperatiomQueue 处理 NSOperations，因此您可能将网络代码包装在 NSOperation 子类中。

第二，您是否使用 NSURLConnections 作为您的网络代码？

3，阻塞部分是 NSURLConnection 还是你为 NSURLConnection 委托回调？

需要注意的一件事是，普通的 NSURLConnections 是在多线程引擎下实现的。默认情况下，该对象被放置在您的主线程运行循环中（当从主线程运行时），但该对象只是一个包装器，用于处理从另一个线程上发生的较低级别网络代码（BSD 套接字）对委托的回调。

你真的不应该在主线程上用 NSURLConnections 阻塞你的 UI，除非 A）你在委托回调方法中用昂贵的代码阻塞了线程，或者 B）你用太多的同时 URL 连接压倒了你的运行循环（这就是 NSOperationQueue 的 setMaxConcurrentOperationsCount: 发挥作用的地方）

# iphone - 横向模式下的卷曲效果

> ID：10468227
> 
> 赞同：0
> 
> 时间：2012-05-06T04:56:37.640
> 
> 标签：iphone, ios, ipad

我正在尝试通过使用下面的代码片段来实现卷曲效果

卷曲

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.95];
[UIView setAnimationTransition:UIViewAnimationTransitionCurlDown
 forView:self.view cache:YES];
[UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];
[UIView setAnimationDelegate:self]; 
```

卷起

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.95];
[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.view cache:YES];
[UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];
[UIView setAnimationDelegate:self]; 
```

但这适用于纵向模式。

我想在横向模式下实现它，点击右上角和左下角。

目前它的工作是相反的。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:44:16.243

```
#import <QuartzCore/QuartzCore.h>

-(void)pageCurltoNextorPrevious:(UIView*)view:(int)identifier {

// Curl the image up or down
CATransition *animation = [CATransition animation];
[animation setDelegate:self];
[animation setDuration:1.0];
CAMediaTimingFunction *fun=[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
[animation setTimingFunction:fun];

if (identifier==1){
    //next animation
    animation.type = @"pageCurl";
    animation.subtype=@"fromRight";
    animation.fillMode = kCAFillModeForwards;
    animation.endProgress = 1.0; //0.58;
} 
else {
    //previous animation
    animation.type = @"pageCurl";
    animation.subtype=@"fromLeft";
    animation.fillMode = kCAFillModeBackwards;
    animation.startProgress = 0.0;
}
[animation setRemovedOnCompletion:NO];

//[view exchangeSubviewAtIndex:0 withSubviewAtIndex:2];

[[view layer] addAnimation:animation forKey:@"pageCurlAnimation"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:11:59.727

请尝试这种方式。我在一个视图的视图导航中使用

下一个视图的第一个视图 Infoview 我创建了 curlup 效果：

```
InfoView *objdb=[[InfoView alloc] initWithNibName:@"InfoView" bundle:nil];
[UIView beginAnimations:nil context:NULL ];
[UIView setAnimationCurve:UIViewAnimationTransitionCurlUp];
[UIView setAnimationDuration:1.0];
[self presentModalViewController:objdb animated:YES];
[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.navigationController.view cache:NO];
[UIView commitAnimations];
[objdb release]; 
```

然后从 infoview 回到主视图然后使用这个（卷曲效果）：

```
[UIView  beginAnimations:nil context:NULL];
[UIView setAnimationCurve:UIViewAnimationTransitionCurlDown];
[UIView setAnimationDuration:0.75];
[UIView setAnimationTransition:UIViewAnimationTransitionCurlDown forView:self.navigationController.view cache:NO];
[UIView commitAnimations];
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDelay:0.375];
[self dismissModalViewControllerAnimated:YES];
[UIView commitAnimations]; 
```

我希望它对你有帮助。

# java - 使用逗号运算符将字符串拆分为数组列表

> ID：10468228
> 
> 赞同：-1
> 
> 时间：2012-05-06T04:56:40.840
> 
> 标签：java, split

我有一个字符串

```
 String strNumbers = "One,Two,Three,Four,Five"; 
```

O 想拆分这个字符串并产生

```
One
Two
Three
Four
Five 
```

请帮帮我。

我正在使用以下代码

```
 String strNumbers = "One,Two,Three,Four,Five";

    //split the string using split method of String class
    String[] numbers = strNumbers.split(",");

    //create new ArrayList object
    ArrayList<String> aListNumbers = new ArrayList<String>();

    //add individual numbers to the ArrayLists
    for(int i=0; i< numbers.length; i++){
        aListNumbers.add(numbers[i]);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:58:18.873

```
List<String> aListNumbers = new ArrayList<String>(
    Arrays.asList(strNumbers.split(",")); 
```

`split`给你一个数组。 `Arrays.asList`围绕数组包装一个列表。如果你真的需要一个`ArrayList`，你可以使用它的`ArrayList(Collection)`复制构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:06:27.573

现在你只是打印出`ArrayList`对象。您需要遍历*并*`ArrayList`打印出`String`它包含的值。您可以使用 来执行此操作`System.out.println`，它将在打印的每个值之后自动放置一个新行。

```
for (String number : aListNumbers) {
  System.out.println(number);
} 
```

# cocoa-touch - 为什么在动画块中设置图层锚点时我的视图会跳转？

> ID：10468233
> 
> 赞同：2
> 
> 时间：2012-05-06T04:57:55.380
> 
> 标签：cocoa-touch, animation, uiview, cglayer

我有一个 UIPanGestureRecognizer 附加到我的 iOS 应用程序中的视图。[我从Touches 示例应用程序](https://developer.apple.com/library/ios/samplecode/Touches/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007435)中复制了平移处理程序的代码。当手势开始时，我的代码：

*   记录原始锚点和中心。
*   将锚点和中心更改为用户手指周围，如下所示：

    ```
    CGPoint locationInView = [gestureRecognizer locationInView:target];
    CGPoint locationInSuperview = [gestureRecognizer locationInView:target.superview];
    target.layer.anchorPoint = CGPointMake(
        locationInView.x / target.bounds.size.width,
        locationInView.y / target.bounds.size.height
    );
    target.center = locationInSuperview; 
    ```

随着手势的进行，平移处理程序不断更改中心以跟踪手指移动。到现在为止还挺好。

当用户放手时，我希望视图动画回到其原始起点。执行此操作的代码如下所示：

```
[UIView animateWithDuration:2 delay:0 options:UIViewAnimationCurveEaseOut animations:^{
    target.center            = originalCenter;
    target.layer.anchorPoint = originalAnchorPoint;
}]; 
```

这确实将视图动画化回其原始起点。但是，在动画开始之前，视图会跳转到 UI 中的不同位置。IOW，放手，它跳起来，然后动画回到它所属的地方。

我想也许我需要在动画之外设置锚点和中心，也许将中心设置为超级视图中的位置，就像手势开始时一样，但这似乎没有什么区别。

我在这里想念什么？当用户放手时如何防止跳跃？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T11:02:43.927

我怀疑有两个问题没有尝试你在做什么：

**更改锚点会更改视图/图层的位置。**为了在不修改位置的情况下更改锚点，您可以使用一些像这样的助手：

```
-(void)setAnchorPoint:(CGPoint)anchorPoint forView:(UIView *)view
{
    CGPoint newPoint = CGPointMake(view.bounds.size.width * anchorPoint.x, view.bounds.size.height * anchorPoint.y);
    CGPoint oldPoint = CGPointMake(view.bounds.size.width * view.layer.anchorPoint.x, view.bounds.size.height * view.layer.anchorPoint.y);

    newPoint = CGPointApplyAffineTransform(newPoint, view.transform);
    oldPoint = CGPointApplyAffineTransform(oldPoint, view.transform);

    CGPoint position = view.layer.position;

    position.x -= oldPoint.x;
    position.x += newPoint.x;

    position.y -= oldPoint.y;
    position.y += newPoint.y;

    view.layer.position = position;
    view.layer.anchorPoint = anchorPoint;
} 
```

（我自己在我的项目中使用它。在这里找到：[更改我的 CALayer 的锚点移动视图](https://stackoverflow.com/questions/1968017/changing-my-calayers-anchorpoint-moves-the-view)）

**您的动画将锚点设置回其原始值。** 您应该使用上面的帮助器来重置锚点。这确保了视图在更改锚点时不会移动。您必须**在动画之外**执行此操作。之后，使用动画块更改视图的中心并将其动画到您想要的位置。

# video - 如何使用 GNURadio 和 USRP 发送视频文件？

> ID：10468235
> 
> 赞同：2
> 
> 时间：2012-05-06T04:58:12.510
> 
> 标签：video, h.264, gstreamer, gnuradio, usrp

我正在尝试使用带有 RFX2400 的 GNURadio、GRC 和 USRP1 以及使用 .ts 视频文件的 2.4GHZ 天线发送视频文件。我们有两个 USRP，一个用作发送器，另一个用作接收器。我们使用 GMSK 调制和解调，在调制和解调完成之前和之后进行编码和解码，以及在将信号从一个 USRP 发送到另一个之前进行恒定乘法。在解调和解码之前对接收到的信号进行低通滤波，然后将其保存到 video_output.ts 文件中。

这是我们目前遇到的问题。我们有一个我们自己制作的视频。当我们通过输出视频文件发送此视频时，即使我们可以看到由于放置在 LPF 和 USRP 源之间的 FFT 接收器，在 USRP 上正在接收某些内容，我们也不会包含信息。我怎样才能做到这一点，以便我真正保存那些传入的字节。

我们读到我们将不得不使用 mkfifo 命令创建两个管道文件，然后将我们要传输的视频文件复制到创建的管道文件中，然后我们应该能够正确发送文件。这给了我一些额外的问题。我一直在安装以任何方式包含 x264 和 h264 编码的软件包，但仍然给出找不到编码类型的错误。我们确实对 x264 软件包进行了安装，但仍然无法正常工作。所以 atm 我们一直在尝试将我们的视频文件编码为创建的管道文件。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T00:01:21.893

我会建议你从更简单的应用程序开始，当你确定这一步没问题时，继续下一步。

例如，一开始就忘记 USRP。使用文件源块并尝试发送包含在每行中递增计数器的文件或任何您想要的无关紧要的文件。将其传递给您的调制方案，并在同一流程图解调并使用文件接收器块保存它。现在检查这两个文件是否相同。

如果是，请执行相同的示例，但现在使用 usrps 并通过空中传输。如果这也成功，您就可以开始播放视频传输了。

请注意，您也应该在模拟阶段进行游戏，通过添加一些噪音来查看您的系统如何反应，因为您的 2.4GHZ 环境可能会很嘈杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T07:08:21.677

我同意克里斯的观点，在报名参加马拉松比赛之前，你必须学会​​走路。

如果我是你，我会先回顾 GNUradio-examples 目录下的 GR 树中的一些示例。

如果您观看人们在 Youtube 上发布的一些视频，展示他们是如何完成类似工作的，也会有所帮助，例如： [http](http://www.youtube.com/watch?v=XtlyNlRAHGM) ://www.youtube.com/watch?v=XtlyNlRAHGM 而这些： [http://www.youtube。 com/watch?v=pZe3r4EK_7E](http://www.youtube.com/watch?v=pZe3r4EK_7E) http://www.youtube.com/watch?v=2VUZ7H60F68

你也许能找到很多帮助你检查这个网站： [http ://www.wu.ece.ufl.edu/projects/wirelessVideo/project/H264_USRP/index.htm](http://www.wu.ece.ufl.edu/projects/wirelessVideo/project/H264_USRP/index.htm)

并联系完成这项工作的团队，他们也许可以帮助您解决问题。

最好的问候，法哈德·阿布多利安

# phonegap-plugins - 当phonegap中的事件传入短信时如何读取号码和正文短信？

> ID：10468236
> 
> 赞同：2
> 
> 时间：2012-05-06T04:58:18.407
> 
> 标签：phonegap-plugins

我曾经在 android 中制作过短信过滤器，现在我想使用 phonegap。收到短信时，我可以使用什么 API 通过 PhoneGap 读取短信的数量和内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-06T11:56:13.747

以下是允许您接收传入短信的 phonegap 插件的链接。您可以停止消息广播，从而避免传入消息本机弹出窗口。

您所要做的就是按照以下步骤设置您的短信接收器。

将插件添加到您的项目中

（确保您使用的是Phonegap > 2.0） 1 .将SmsInboxPlugin.js 移动到您项目的www 文件夹，并在您的html 文件中包含对它的引用。2\. 将 src 中的 java 文件添加到项目的 src 层次结构中 3\. 在 res/config.xml 文件中引用插件 4\. 确保您的清单包含发送 SMS 消息所需的权限：

在您的 html 文件中包含以下脚本。

```
var smsInboxPlugin = cordova.require('cordova/plugin/smsinboxplugin');

smsInboxPlugin.isSupported ((function(supported) {
    if(supported) 
      alert("SMS supported !");
    else
      alert("SMS not supported");
  }), function() {
    alert("Error while checking the SMS support");
  });

smsInboxPlugin.startReception (function(msg) {
       alert(msg);
  }, function() {
      alert("Error while receiving messages");
  }); 
```

要停止接收，请使用此脚本

```
smsInboxPlugin.stopReception (function() {
    alert("Correctly stopped");
  }, function() {
    alert("Error while stopping the SMS receiver");
  }); 
```

该插件可以在[https://github.com/Pyo25/Phonegap-SMS-reception-plugin找到](https://github.com/Pyo25/Phonegap-SMS-reception-plugin)

# c# - 是否可以进行此自定义配置？

> ID：10468240
> 
> 赞同：1
> 
> 时间：2012-05-06T04:58:55.787
> 
> 标签：c#, asp.net, configuration

这是我的xml结构：

```
<reco>
    <styleSheets>
      <group>
        <asset source="~/Script/file1.css"/>
        <asset source="~/Script/file2.css"/>
        <asset source="~/Script/file3.css"/>
    </group>
  </styleSheets>
  <scripts>
    <group>
        <asset source="~/Content/file1.js"/>
        <asset source="~/Content/file1.js"/>
        <asset source="~/Content/file1.js"/>
    </group>
  </scripts> 
```

这是我的代码：

```
public class AssetConfigurationElement : ConfigurationElement
{

    /// <summary>
    /// Gets or sets the source.
    /// </summary>
    /// <value>The source.</value>
    [ConfigurationProperty("source", IsRequired = true, IsKey = true)]
    public string Source
    {
        get
        {
            return (string)this["source"];
        }

        set
        {
            this["source"] = value;
        }
    }
}

public class GroupConfigurationElementCollection : ConfigurationElementCollection
{
    public GroupConfigurationElementCollection()
    {
        AddElementName = "asset";
    }

    /// <summary>
    /// Gets or sets the name.
    /// </summary>
    /// <value>The name.</value>
    [ConfigurationProperty("name", IsRequired = true, IsKey = true, IsDefaultCollection = true)]
    public string Name
    {
        get
        {
            return (string)this["name"];
        }

        set
        {
            this["name"] = value;
        }
    }

    /// <summary>
    /// Gets or sets a value indicating whether this <see cref="WebAssetGroupConfigurationElement"/> is enabled.
    /// </summary>
    /// <value><c>true</c> if enabled; otherwise, <c>false</c>.</value>
    [ConfigurationProperty("enabled", DefaultValue = true)]
    public bool Enabled
    {
        get
        {
            return (bool)this["enabled"];
        }

        set
        {
            this["enabled"] = value;
        }
    }

    /// <summary>
    /// Gets or sets the version.
    /// </summary>
    /// <value>The version.</value>
    [ConfigurationProperty("version")]
    public string Version
    {
        get
        {
            return (string)this["version"];
        }

        set
        {
            this["version"] = value;
        }
    }

    /// <summary>
    /// Gets or sets a value indicating whether this <see cref="WebAssetGroupConfigurationElement"/> is compress.
    /// </summary>
    /// <value><c>true</c> if compress; otherwise, <c>false</c>.</value>
    [ConfigurationProperty("compress", DefaultValue = true)]
    public bool Compress
    {
        get
        {
            return (bool)this["compress"];
        }

        set
        {
            this["compress"] = value;
        }
    }

    /// <summary>
    /// Gets or sets a value indicating whether this <see cref="WebAssetGroupConfigurationElement"/> is combined.
    /// </summary>
    /// <value><c>true</c> if combined; otherwise, <c>false</c>.</value>
    [ConfigurationProperty("combined", DefaultValue = true)]
    public bool Combined
    {
        get
        {
            return (bool)this["combined"];
        }

        set
        {
            this["combined"] = value;
        }
    }

    protected override ConfigurationElement CreateNewElement()
    {
        return new AssetConfigurationElement();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((AssetConfigurationElement)element).Source;
    }

}

public class SharedGroupConfigurationSection : ConfigurationSection
{

    /// <summary>
    /// Gets the style sheets.
    /// </summary>
    /// <value>The style sheets.</value>
    [ConfigurationProperty("styleSheets")]
    [ConfigurationCollection(typeof(GroupConfigurationElementCollection), AddItemName = "group")]
    public GroupConfigurationElementCollection StyleSheets
    {
        get
        {
            return (GroupConfigurationElementCollection)base["styleSheets"] ?? new GroupConfigurationElementCollection();
        }
    }

    /// <summary>
    /// Gets the style sheets.
    /// </summary>
    /// <value>The style sheets.</value>
    [ConfigurationProperty("scripts")]
    [ConfigurationCollection(typeof(GroupConfigurationElementCollection), AddItemName = "group")]
    public GroupConfigurationElementCollection Scripts
    {
        get
        {
            return (GroupConfigurationElementCollection)base["scripts"] ?? new GroupConfigurationElementCollection();
        }
    }
} 
```

这种配置甚至可能吗？如果是这样，我做错了什么？

当我尝试使用配置管理器获取该部分时，我收到此错误消息。

> 配置错误描述：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：无法识别的元素“资产”。
> 
> 源错误：
> 
> 第 96 行： 第 97 行： 第 98 行： 第 99 行： 第 100 行：
> 
> 源文件：D:\ASP.NET Projects\Resource-Compiler\ResourceCompiler\Examples\web.config 行：98

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T06:39:56.533

应该是，但您需要为每个资产添加一个名称标签，因为它是每个资产的必需属性。如果您不需要它，则从中删除 IsRequired = true 和 IsKey = true 。[ConfigurationElementCollection](http://msdn.microsoft.com/en-us/library/system.configuration.configurationelementcollection%28v=vs.90%29.aspx)确实对 App.Config 中的数据格式提出了严格的要求。Sytem.Configuration 系统允许您从父 app.config 文件继承值。这甚至适用于对象集合。为了使其工作，MS 设计师引入了特殊标签。

为了从从父 app.config 加载的集合中删除所有元素，`<clear/>` 添加了标签。

要添加元素，您需要将`<add/>`数据序列化到属性中的标签。你的 app.config 应该看起来像

```
<add asset source="~/Script/file1.css"/> 
```

要支持配置继承，您需要为必须遵守的完全锁定的序列化格式付出代价。当然，您可以扩展系统并添加您自己的配置提供程序，它的作用不同，但这不是一件容易的事。至少比使用像 XmlSerializer 这样的真正序列化程序复杂得多，在这种情况下，您对数据格式拥有最大的自由度。

DataContractSerializer 也不错，但它不允许您控制一切。XmlSerializer 仍然是 xml 文件最快和最通用的序列化器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T01:05:47.440

我能够让它工作。我必须为 styleSheet 节点和脚本节点添加两个新集合。这是我的完整代码：

```
 public class SharedGroupConfigurationSection : ConfigurationSection
{

    /// <summary>
    /// Gets the style sheets.
    /// </summary>
    /// <value>The style sheets.</value>
    [ConfigurationProperty("styleSheets", Options = ConfigurationPropertyOptions.IsRequired)]        
    public StyleSheetConfigurationElementCollection StyleSheets
    {
        get
        {
            return (StyleSheetConfigurationElementCollection)base["styleSheets"] ?? new StyleSheetConfigurationElementCollection();
        }
    }

    /// <summary>
    /// Gets the style sheets.
    /// </summary>
    /// <value>The style sheets.</value>
    [ConfigurationProperty("scripts", Options = ConfigurationPropertyOptions.IsRequired)]        
    public ScriptConfigurationElementCollection Scripts
    {
        get
        {
            return (ScriptConfigurationElementCollection)base["scripts"] ?? new ScriptConfigurationElementCollection();
        }
    }
}

[ConfigurationCollection(typeof(GroupConfigurationElementCollection), AddItemName = "group")]
public class ScriptConfigurationElementCollection : ConfigurationElementCollection
{

    protected override ConfigurationElement CreateNewElement()
    {
        return new GroupConfigurationElementCollection();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        if (element == null)
        {
            throw new ArgumentNullException();
        }

        return ((GroupConfigurationElementCollection)element).Name;
    }
}

[ConfigurationCollection(typeof(GroupConfigurationElementCollection), AddItemName="group")]
public class StyleSheetConfigurationElementCollection : ConfigurationElementCollection
{

    protected override ConfigurationElement CreateNewElement()
    {
        return new GroupConfigurationElementCollection();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        if (element == null)
        {
            throw new ArgumentNullException();
        }

        return ((GroupConfigurationElementCollection)element).Name;
    }
}

[ConfigurationCollection(typeof(AssetConfigurationElement), AddItemName = "asset", CollectionType = ConfigurationElementCollectionType.BasicMap)]
public class GroupConfigurationElementCollection : ConfigurationElementCollection
{
    public GroupConfigurationElementCollection()
    {
        AddElementName = "asset";
    }

    protected override ConfigurationElement CreateNewElement()
    {
        return new AssetConfigurationElement();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        if (element == null)
        {
            throw new ArgumentNullException();
        }

        return ((AssetConfigurationElement)element).Source;
    }

    /// <summary>
    /// Gets or sets the name.
    /// </summary>
    /// <value>The name.</value>
    [ConfigurationProperty("name", IsRequired = true)]
    public string Name 
    {
        get
        {
            return (string)base["name"];
        }
    }

    /// <summary>
    /// Gets or sets a value indicating whether this <see cref="WebAssetGroupConfigurationElement"/> is enabled.
    /// </summary>
    /// <value><c>true</c> if enabled; otherwise, <c>false</c>.</value>
    [ConfigurationProperty("enabled", DefaultValue = true)]
    public bool Enabled
    {
        get
        {
            return (bool)this["enabled"];
        }

        set
        {
            this["enabled"] = value;
        }
    }

    /// <summary>
    /// Gets or sets the version.
    /// </summary>
    /// <value>The version.</value>
    [ConfigurationProperty("version")]
    public string Version
    {
        get
        {
            return (string)this["version"];
        }

        set
        {
            this["version"] = value;
        }
    }

    /// <summary>
    /// Gets or sets a value indicating whether this <see cref="WebAssetGroupConfigurationElement"/> is compress.
    /// </summary>
    /// <value><c>true</c> if compress; otherwise, <c>false</c>.</value>
    [ConfigurationProperty("compress", DefaultValue = true)]
    public bool Compress
    {
        get
        {
            return (bool)this["compress"];
        }

        set
        {
            this["compress"] = value;
        }
    }

    /// <summary>
    /// Gets or sets a value indicating whether this <see cref="WebAssetGroupConfigurationElement"/> is combined.
    /// </summary>
    /// <value><c>true</c> if combined; otherwise, <c>false</c>.</value>
    [ConfigurationProperty("combined", DefaultValue = true)]
    public bool Combined
    {
        get
        {
            return (bool)this["combined"];
        }

        set
        {
            this["combined"] = value;
        }
    }
}

public class AssetConfigurationElement : ConfigurationElement
{

    /// <summary>
    /// Gets or sets the source.
    /// </summary>
    /// <value>The source.</value>
    [ConfigurationProperty("source", IsRequired = false, IsKey = false)]
    public string Source
    {
        get
        {
            return (string)this["source"];
        }

        set
        {
            this["source"] = value;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T05:25:52.947

正如我所看到的，您正在尝试将自定义部分插入到“标准”web.config 文件中。在这种情况下，您需要在

```
<configSections> 
```

并在那里添加相应的部分。例如（这是我的一个项目中的一些 Quartz 配置）：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>

        <sectionGroup name="common">
            <section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
        </sectionGroup>
        ... other sections here...
    </configSections>
    ... other web.config stuff here 
```

然后，在下面的某个地方，您需要添加自己的部分，如下所示：

```
<common>
    <logging>
        <factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4net">
            <arg key="configType" value="INLINE" />
        </factoryAdapter>
    </logging>
</common> 
```

这是一篇关于此主题的 msdn 文章：http: [//msdn.microsoft.com/en-us/library/2tw134k3.aspx](http://msdn.microsoft.com/en-us/library/2tw134k3.aspx)

# android - 在Android中如何设置多个（2或3）复选框文本应显示在下一页？

> ID：10468243
> 
> 赞同：0
> 
> 时间：2012-05-06T04:59:31.637
> 
> 标签：android

在一个活动中，我们有 3 或 4 个多个复选框和两个按钮，一个用于提交数据，另一个用于清除选定的复选框。单击选中的复选框后，数据应显示在下一页上，任何人都可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T07:22:40.403

```
//Demo Cals 调用第二类。
```

```
public class DemoActivity extends Activity implements OnClickListener,
        OnCheckedChangeListener {

    private Button btnSubmit, btnClear;
    private CheckBox chk1, chk2, chk3;
    private Bundle data = new Bundle();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btnSubmit = (Button) findViewById(R.id.btnSubmit);
        btnClear = (Button) findViewById(R.id.btnClear);

        chk1 = (CheckBox) findViewById(R.id.chk1);
        chk2 = (CheckBox) findViewById(R.id.chk2);
        chk3 = (CheckBox) findViewById(R.id.chk3);

        btnSubmit.setOnClickListener(this);
        btnClear.setOnClickListener(this);

        chk1.setOnCheckedChangeListener(this);
        chk2.setOnCheckedChangeListener(this);
        chk3.setOnCheckedChangeListener(this);

    }

    @Override
    public void onClick(View v) {

        switch (v.getId()) {
        case R.id.btnSubmit:
            Intent intent = new Intent(DemoActivity.this, secondActivity.class);
            intent.putExtras(data);
            startActivity(intent);
            break;
        case R.id.btnClear:
            chk1.setChecked(false);
            chk2.setChecked(false);
            chk3.setChecked(false);
            break;

        }
    }

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        switch (buttonView.getId()) {
        case R.id.chk1:
            if (isChecked) {
                data.putString("Value1", chk1.getText().toString());
                Log.v("chk1", chk1.getText().toString());
            } else {
                if (data.containsKey("Value1")) {
                    data.remove("Value1");
                }
            }
            break;
        case R.id.chk2:
            if (isChecked) {
                data.putString("Value2", chk2.getText().toString());
                Log.v("chk2", chk2.getText().toString());
            } else {
                if (data.containsKey("Value2")) {
                    data.remove("Value2");
                }
            }
            break;
        case R.id.chk3:
            if (isChecked) {
                data.putString("Value3", chk3.getText().toString());
                Log.v("chk3", chk3.getText().toString());
            } else {
                if (data.containsKey("Value3")) {
                    data.remove("Value3");
                }
            }
            break;
        }
    }
}

public class secondActivity extends Activity {

    private Bundle data;
    private TextView txtView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);
        txtView = (TextView) findViewById(R.id.textView1);
        Intent intent = getIntent();
        String Value = "";
        data = intent.getExtras();
        if (data.containsKey("Value1")) {
            Value = data.getString("Value1");
            Log.v("Value", Value);
            txtView.setText(Value);
        }
        if (data.containsKey("Value2")) {
            Value += data.getString("Value2");
            Log.v("Value", Value);
            txtView.setText(Value);
        }
        if (data.containsKey("Value3")) {
            Value += data.getString("Value3");
            Log.v("Value", Value);
            txtView.setText(Value);
        }
    }

} 
```

//主xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <CheckBox
        android:id="@+id/chk1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Red" />

    <CheckBox
        android:id="@+id/chk2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Blue" />

    <CheckBox
        android:id="@+id/chk3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Green" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/btnSubmit"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Submit" />

        <Button
            android:id="@+id/btnClear"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Clear" />

    </LinearLayout>

</LinearLayout> 
```

//第二个xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

# c# - 如何创建像 windows 媒体中心 xaml 这样的矩形玻璃

> ID：10468244
> 
> 赞同：1
> 
> 时间：2012-05-06T04:59:58.733
> 
> 标签：c#, wpf, effect, aero-glass, mediacenter

我想创建一个矩形玻璃和一个与 windows 媒体中心 **完全相同的菜单**![在此处输入图像描述](../Images/d9abe19a34b3d0c001bb2d63ff3b05fe.png)

我想用**xaml** not blend 来做...请帮助我想为我的应用程序创建一个这样的菜单。

也想做这个 ![在此处输入图像描述](../Images/1fd0c6c4a62ee278a18187defba553d9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T08:02:48.280

这与示例不**完全**一样，但我认为这是一个可以接受的开始：

```
 <Grid x:Name="LayoutRoot">
    <Grid.Background>
        <RadialGradientBrush RadiusY="0.573" RadiusX="0.667" GradientOrigin="1.01,1.035">
            <GradientStop Color="#FF06183C" Offset="0.81"/>
            <GradientStop Color="#FF0D60A3"/>
        </RadialGradientBrush>
    </Grid.Background>

    <Grid Width="640" Height="480">
        <Border BorderThickness="2" CornerRadius="3" Height="40" Width="400" VerticalAlignment="Center" HorizontalAlignment="Center">
            <Border.BorderBrush>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA4B3C5" Offset="0"/>
                    <GradientStop Color="#FFA4B3C5" Offset="1"/>
                </LinearGradientBrush>
            </Border.BorderBrush>
            <Border BorderThickness="1" BorderBrush="Black" CornerRadius="0" >
                <Border.Background>
                    <RadialGradientBrush GradientOrigin="0.225,-0.616" RadiusY="0.863" RadiusX="0.757">
                        <GradientStop Color="#EEFFFFFF"/>
                        <GradientStop Color="#00FFFFFF" Offset="0.696"/>
                    </RadialGradientBrush>
                </Border.Background>

                <TextBlock  TextWrapping="Wrap" FontSize="18.667" Foreground="White" Margin="10,4,3,-2"><Run Language="pt-br" Text="Edit Start Menu"/></TextBlock>
            </Border>
        </Border>

        <Border BorderThickness="1" CornerRadius="3" Height="140" VerticalAlignment="Top" Margin="311,30,113,0">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="5" Direction="315"/>
            </Border.Effect>

            <Border.BorderBrush>
                <LinearGradientBrush EndPoint="0.811,0.2" StartPoint="0.246,1.023">
                    <GradientStop Color="#FF7C9FC8" Offset="0"/>
                    <GradientStop Color="#FF7C9FC8" Offset="1"/>
                    <GradientStop Color="#FF353535" Offset="0.491"/>
                </LinearGradientBrush>
            </Border.BorderBrush>
            <Border BorderThickness="0"  CornerRadius="0" Margin="0" >
                <Border.Background>
                    <RadialGradientBrush GradientOrigin="0.191,-0.232" RadiusY="0.353" RadiusX="1.001">
                        <RadialGradientBrush.RelativeTransform>
                            <TransformGroup>
                                <ScaleTransform CenterY="0.5" CenterX="0.5" ScaleY="1" ScaleX="1"/>
                                <SkewTransform AngleY="0" AngleX="0" CenterY="0.5" CenterX="0.5"/>
                                <RotateTransform Angle="-29.285" CenterY="0.5" CenterX="0.5"/>
                                <TranslateTransform/>
                            </TransformGroup>
                        </RadialGradientBrush.RelativeTransform>
                        <GradientStop Color="#B6FFFFFF"/>
                        <GradientStop Color="#0BFFFFFF" Offset="0.578"/>
                    </RadialGradientBrush>
                </Border.Background>

                <TextBlock  TextWrapping="Wrap" FontSize="18" Foreground="White" HorizontalAlignment="Right" Margin="0,0,7,0" Text="recorded TV" UseLayoutRounding="True"></TextBlock>
            </Border>
        </Border>

    </Grid>

</Grid> 
```

# iis - 更新配置文件中的 IIS 绑定，而不是 GUI

> ID：10468245
> 
> 赞同：2
> 
> 时间：2012-05-06T05:00:01.090
> 
> 标签：iis, iis-7

我可以在配置文件中更新 IIS 绑定吗？我有六台服务器，需要在它们之间同步绑定。

你有什么想法可以帮助我完成任务吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T05:07:46.293

您确定可以使用 Web 服务器的 ApplicationHost.config（不是 Web.Config）中的 Bindings/Binding 元素直接设置多个绑定，如下所示，但请确保设置站点特定，以便绑定反映特定站点的正确设置：

```
<site name="Contoso" id="2">
  <application path="/" applicationPool="Contoso">
     <virtualDirectory path="/" physicalPath="C:\inetpub\wwwroot" />
  </application>
  <bindings>
    <binding protocol="http" bindingInformation="192.168.0.1:443:www.contoso.com" />
    <binding protocol="https" bindingInformation="*:443:" />
  </bindings>
</site> 
```

更多信息： [http ://www.iis.net/ConfigReference/system.applicationHost/sites/site/bindings/binding](http://www.iis.net/ConfigReference/system.applicationHost/sites/site/bindings/binding)

# python - 将多个栅格属性附加到逗号分隔的表中

> ID：10468252
> 
> 赞同：0
> 
> 时间：2012-05-06T05:01:51.003
> 
> 标签：python, append, gis, raster, tabular

第一次发帖和已经用尽所有其他选项的 python newb。我有兴趣将选定的栅格属性（使用 arcpy.GetRasterProperties_management(input_raster, "property_type") 函数）附加到以逗号分隔的表中，但在弄清楚如何为**多个**结果执行此操作时遇到了麻烦。作为一个（我的实际脚本的）删节示例，我创建了两个“for”循环；一个用于我有兴趣输出的每个栅格属性（即像元大小 X、像元大小 Y）。我的栅格列表包括 S01Clip_30m 到 S05Clip_30m。我的目标是创建一个看起来像这样的 .txt 文件：

```
RasterName, CellSizeX, CellSizeY  
S01Clip_30m, 88.9372, 88.9375  
S02Clip_30m, 88.9374, 88.9371 
```

到目前为止我的代码如下（底部有一些不确定的、拙劣的语法）。当我运行它时，我得到了这个结果：

S05Clip_30m，88.9374
（列表中的最后一个栅格，CellSizeY）

感谢您在关键的底部代码块上提供的任何帮助。

```
import arcpy
from arcpy import env
env.workspace = ('C:\\StudyAreas\\Aggregates.gdb')
InFolder = ('C:\\dre\\python\\tables')
OutputFile = open(InFolder + '\\' + 'RasterProps.txt', 'a')
rlist = arcpy.ListRasters('*','*')
for grid in rlist:
    if grid[-8:] == "Clip_30m":
        result = arcpy.GetRasterProperties_management(grid,'CELLSIZEX')
        CellSizeX = result.getOutput(0)
for grid in rlist:
    if grid[-8:] == "Clip_30m":
        result = arcpy.GetRasterProperties_management(grid,'CELLSIZEY')
        CellSizeY = result.getOutput(0)
> I know the syntax below is incorrect, but I know there are *some* elements that 
> should be included based on other example scripts that I have...
> if result.getOutput(0) == CellSizeX:
>     coltype = CellSizeX
> elif result.getOutput(0) == CellSizeY:
>     coltype = CellSizeY
> r = ''.join(grid)
> colname = r[0:]
> OutputFile.writelines(colname+','+coltype+'\n') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:04:37.113

在我的脚本上从另一个问答论坛获得帮助后，我现在正在提供我自己的 GIS 相关问题的答案以关闭此线程（并移至 gis.stackexchange :) - 感谢 L.Yip 的评论）。这是最终更正的脚本，它将栅格列表的两个栅格属性（X 方向的像元大小、Y 方向的像元大小）输出到 .txt 文件中：

```
import arcpy
from arcpy import env
env.workspace = ('C:\\StudyAreas\\Aggregates.gdb')
InFolder = ('C:\\dre\\python\\tables')
OutputFile = open(InFolder + '\\' + 'RasterProps.txt', 'a')
rlist = arcpy.ListRasters('*','*')
for grid in rlist:
    if grid[-8:] == "Clip_30m":
        resultX = arcpy.GetRasterProperties_management(grid,'CELLSIZEX')
        CellSizeX = resultX.getOutput(0)
        resultY = arcpy.GetRasterProperties_management(grid,'CELLSIZEY')
        CellSizeY = resultY.getOutput(0)
OutputFile.write(grid + ',' + str(CellSizeX) + ',' + str(CellSizeY) + '\n')
OutputFile.close() 
```

My results after running the script:
S01Clip_30m,88.937158083333,88.9371580833333
S02Clip_30m,88.937158083333,88.937158083333
S03Clip_30m,88.9371580833371,88.9371580833333
S04Clip_30m,88.9371580833308,88.937158083333
S05Clip_30m,88.9371580833349,88.937158083333

谢谢！

# matlab - 索引移动范围

> ID：10468262
> 
> 赞同：2
> 
> 时间：2012-05-06T05:03:56.400
> 
> 标签：matlab, indexing

我试图在我的数据集中获取每年的最大值。数据在一列中，按每日时间步长排列。如何从前 365 行中获取最大值，然后从接下来的 365 行中获取最大值？我在想类似的事情：

```
years=31;
for i=1:years
peak(i)=max(data(i:365*i,2))
end 
```

但当 i=2 时，范围应为 366:730 等。数据矩阵是 11322x7 双倍，我需要第 2 列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:36:14.017

我想过建议像@Thilo's answer之类的东西，但这没有考虑闰年（它似乎出现在您的数据中，因为 365*31=11315，小于 11322）

您可能能够构建一个复杂的矢量化解决方案，但我很想手动跟踪开始和停止索引：

```
NYEARS = 31;

start = 1;
stop = 365 + isLeapYear(year(1));
n=1;
maxValues = nan(NYEARS,1);
while(n=<NYEARS)
  maxValues(n) = max(data(start:stop,2));
  n=n+1;
  start = stop + 1;
  stop = start + 365 + isLeapYear(year(n));
end 
```

它可能不是非常快，但我怀疑这也将成为一个瓶颈。

```
function leap_p = isLeapYear(year)
  leap_p = ~mod(year,400) || (~mod(year,4) && mod(year,100)) 
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T05:27:52.157

## 更新包括闰年

我怀疑这对你拥有的数据量很重要，但我想我想出了一个解决方案，包括闰年而不使用任何循环。因此，为了完整起见。我们将通过一个小例子再次建立这个想法，闰年有 11 天，正常的一年有 10 天。

```
data = 1:103
isLeapYear = [false, false, true, false, false, true, false, false, true, false] 
```

你应该用 isLeapYear 函数的结果替换所有年份的向量。

接下来，我们生成一个包含 11 行（或者，在现实生活中是 366 行）和年数列的矩阵，其中仅包含值 1：

```
helpmatrix = ones(11, 10) 
```

如果相应年份不是闰年，则将矩阵的最后一行设置为 0：

```
helpmatrix(end, ~isLeapYear) = 0 
```

让我们将矩阵写成一个向量（使用如下所述的重塑）并总结所有的

```
selector = cumsum(reshape(helpmatrix, prod(size(helpmatrix)), 1)) 
```

我们可以使用这些值以每年有 11 (366) 天的方式炸毁我们的原始数据，我们可以使用下面的技巧。为了填充第 11 天的值，我们只需重用第 10 天的值，这既不会改变最大值，也不会改变最小值。（但请注意：其他功能也可能受此影响！）

```
max(reshape(data(selector), 11, length(selector)/11)) 
```

要转换它，您只需用 365 和 366 交换所有 10 和 11，并使用`data(selector, 2)`而不是更改最后一个命令`data(selector)`。

与循环解决方案相比，这可能并没有太大的好处，但它显示了矢量计算的力量。

* * *

## 老建议

您可以在更简单的基础上做到这一点。

该函数`reshape`允许您将向量（或矩阵，如有必要）转换为另一个行/列布局。

您的问题可以通过以下方式解决

```
max(reshape(data(:,2), 365, length(data)/365)) 
```

为了了解发生了什么，我创建了一个较小的示例：

```
data = 1:100
reshape(data, 10, length(data)/10)
max(reshape(data', 10, length(data')/10)) 
```

您上面的循环也可以工作，但效率低下。您必须注意如何创建索引。你做`i:365*i`。在我上面的例子中，这看起来像

```
for i=1:10
    i:10*i
end 
```

这显然不是你想要的。以你能做的正确方式完成

```
for i=1:10
    (10*(i-1) + 1):10*i
end 
```

希望有帮助。

# javascript - div中长文本的只读文本输入滚动效果

> ID：10468265
> 
> 赞同：0
> 
> 时间：2012-05-06T05:04:53.377
> 
> 标签：javascript, html, css

有没有办法模仿滚动在 readonly="readonly" 的文本输入上的工作方式。它的工作方式是，如果文本比框长，您可以突出显示并滚动以查看所有文本，而无需滚动条。

我希望在 div 内的段落或标题中具有相同的效果。无论如何要这样做，还是我应该只使用带有 readonly="readonly" 的文本输入并将其样式设置为看起来像我的标题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T05:59:51.380

这是可能的，有一个额外的容器和很少的 Javascript。

在要在没有滚动条的情况下滚动的元素周围添加一个容器 div。并使用 Javascript，计算`scrollHeight`元素的（没有滚动条的高度），并将其设置为容器的`height`.

工作示例：http: [//jsfiddle.net/keune/Cb4jw/1/](http://jsfiddle.net/keune/Cb4jw/1/)

但正如您所提到的，我认为将只读输入设置为看起来像标题将是一种更简洁的解决方案，并且无需 javascript 即可工作。你的选择。

# java - 进度条用作健康条

> ID：10468267
> 
> 赞同：3
> 
> 时间：2012-05-06T05:05:35.610
> 
> 标签：java, swing, progress-bar, jprogressbar

我正在制作一个带有显示玩家健康状况的侧边栏的 java 游戏。我希望该栏像一个进度条，如下图所示：

![在此处输入图像描述](../Images/1f8dd6f9bd122a66f9cc91c62e986570.png)

进度条是否足以完成此任务？如果没有，会怎样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T05:34:47.090

如果您想要一个“官方”答案，那么是的，JProgressBar 可以轻松做到这一点。我建议你试一试，让我们知道它是如何工作的，特别是如果你有任何问题。

# jquery - 表中的动态替换行显示已存在行的错误

> ID：10468268
> 
> 赞同：0
> 
> 时间：2012-05-06T05:05:37.513
> 
> 标签：jquery

我的 html 包含一个表，其结构如下

```
<table id="sample">
 <tr class="new_input_field">
   <td><input type="text" class="first_input" /></td>
   <td><input type="text" class="second_input" /></td>
   <td><a href="#" class="first_link">Button1</td>
   <td><a href="#" class="second_link">Button2</td>
 </tr><tr class="new_input_field">
   <td><input type="text" class="first_input" /></td>
   <td><input type="text" class="second_input" /></td>
   <td><a href="#" class="first_link">Button1</td>
   <td><a href="#" class="second_link">Button2</td>
 </tr>
 <tr class="new_input_field">
   <td><input type="text" class="first_input" /></td>
   <td><input type="text" class="second_input" /></td>
   <td><a href="#" class="first_link">Button1</td>
   <td><a href="#" class="second_link">Button2</td>
 </tr>
</table> 
```

对于我的 jquery 中的每一行，first_input 和 second_input 值更改的值会触发对服务器的调用，并且该行将被这样替换。

```
<tr id="AIK">
<td>some content</td>
<td>some other content</td>
<td><a href="#" class="first_link">Button1</td>
<td><a href="#" class="second_link">Button1</td>
</tr> 
```

我的问题是当我单击动态替换行中的按钮时应该显示警报。我给了jquery

```
$('#sample tr td a.first_link').click(function () {
 trid = $(this).closest('tr').attr('id');
 if(trid.length > 0) { alert("Swap out will come soon"); }
}); 
```

这适用于新替换的行，并显示剩余两行的错误为

```
TypeError: Result of expression 'trid' [undefined] is not an object. 
```

这些按钮应该只对新替换的行启用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T05:12:14.203

由于您正在处理动态添加的表行，因此您不应该使用`$.click`. 相反，您应该通过以下`$.on`方法使用委托：

```
$("table#sample").on("click", "a.first_link", function(){
  trid = $(this).closest("tr").attr("id");
  if ( trid.length > 0 )
    alert( "Swap out will come soon." );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:13:23.867

您必须首先分配`id`给最近的`tr`，然后尝试如下：

```
$('#sample tr td a.first_link').click(function () {
 var trid = $(this).closest('tr').attr('id');
 if(trid.length > 0) { alert("Swap out will come soon"); }
}); 
```

如果你不输入 id 那么你可以尝试：

```
var trid = $(this).closest('tr').attr('id') || ''; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T05:16:16.067

您是否尝试过使用，

```
$('#sample tr td a.first_link').live('click',function... 
```

代替

```
$('#sample tr td a.first_link').click(function... 
```

# ruby - 无法将从 RMagick gem append 方法返回的图像对象写入 Amazon S3

> ID：10468272
> 
> 赞同：0
> 
> 时间：2012-05-06T05:06:08.340
> 
> 标签：ruby, amazon-s3, imagemagick, rmagick

我正在使用 RMagick gem 读取三个图像，然后将它们添加到`ImageList`

```
imagelist = ImageList.new

imagelist << Image.read(path1)[0]
imagelist << Image.read(path2)[0]
imagelist << Image.read(path3)[0] 
```

然后我将这三个图像与`append`方法结合起来

```
combined_image = imagelist.append(false) 
```

然后我尝试将此图像写入 Amazon S3：

```
AWS::S3::S3Object.store(filename, combined_image, bucket) 
```

但是，我收到此错误，导致我无法成功将图像写入 S3：

```
undefined method `size' for #<Magick::Image:0x00000101994498> 
```

我在控制台中使用了 RMagic，我发现当你`append`在 an 中图像时`ImageList`，它返回的 an`Image`似乎忽略了它的大小（以字节为单位）。

如何修改此图像以便将其写入 S3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T05:59:06.810

弄清楚了。诀窍是`combined_image`通过调用`to_blob`它来将其转换为二进制大对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:35:14.667

我建议您检查是否`combined_image.display`向您显示所需的附加图像。如果是这样，AWS::S3 必须像任何其他通用云存储语法一样存储图像文件。

# python - Python将单个单词排序为字母+列中的相应翻译

> ID：10468283
> 
> 赞同：0
> 
> 时间：2012-05-06T05:08:28.803
> 
> 标签：python

所以，这是作为初学者非常友好地提供给我的脚本：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
from __future__ import with_statement    # needed for Python 2.5
from itertools import chain

def chunk(s):
    """Split a string on whitespace or hyphens"""
    return chain(*(c.split("-") for c in s.split()))

def process(latin, gloss, trans):
    chunks = zip(chunk(latin), chunk(gloss))
    # now you have to DO SOMETHING with the chunks!

def main():
    with open("examples.txt") as inf:
        try:
            while True:
                latin = inf.next().strip()
                gloss = inf.next().strip()
                trans = inf.next().strip()
                process(latin, gloss, trans)
                inf.next()    # skip blank line
        except StopIteration:
            # reached end of file
            pass

if __name__=="__main__":
    main() 
```

然而，

我刚刚和我的讲师谈过了，他告诉我他不希望我们使用

```
__ x __ 
```

功能，因为它“在课程的这一点上对于学生的需求来说太先进了”。我完全不知道我需要在“块”或“过程”字段中添加什么，到目前为止，我已经能够弄清楚大多数其他练习（有一些提示）但这个只是远远超过我。这个特殊的部分值 20 分中的 15 分，这让我感觉有点恶心！任何进一步的帮助将不胜感激。

* * *

**原帖**（对不起，太长了！）

我正在尝试执行以下操作：我有一个非英语语言的文本，使用连字符分解成语素（每个单词的一部分），带有英语光泽（每个语素的语言翻译）和下面的直接翻译。例如。

> Itali-am fat-o profug-us Lavini-a-que ven-it
> 
> 意大利-Fem:Sg:Acc 命运-Neut:Sg:Abl 逃亡-Masc:Sg:Nom Lavinian-Neut:Pl:Acc come:Perf-3-Sg:Indic:Act
> 
> “在飞行中[驱使]命运来到意大利和拉维尼亚[海岸]”

我将在一个文件中包含多个文本，例如上述文本 - 即

```
blank line

a line of latin broken up with hyphens

a line of gloss broken up with corresponding hyphens, using colons to join elements

a line of translation

blank line

latin

gloss

translation

ad infinitum. 
```

我需要做的是编写一个文件，它给我以下输出：

```
Itali:    1    Italy
am:    1    Fem:Sg:Acc
fat:    1    fate
o:    1    Neut:Sg:Abl
profug:   1    fleeing
us:    1    Masc:Sg:Nom
Lavini:    1    Lavinian
a:    1    Neug:Pl:Acc
que:    1    come:Perf
ven:    1   3
it:     1   Sg:Indic:Act 
```

其中第一列表示没有连字符的第一行文本；第二列表示出现的次数（在本例中每个只有 1 次），第三列是第一列的英文翻译，如文中所写。

如果有一个拉丁语素没有对应的英文注释/翻译，拉丁栏将照常显示，但英文栏将打印 [unknown]，如：

```
a:  1   [unknown] 
```

如果相反，即没有对应拉丁语的英语语素，它应该打印

```
[unknown]:  1   kitten 
```

最后，程序需要能够处理同音语素（即两个拼写相同但含义不同的拉丁语素）。例如

```
a:  16  Neuter:Plural
a:  28  Feminine:Singular 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:36:58.293

每当您需要计算出现次数时，您都需要一个字典。

创建一个字典，其中键是 zip 生成的元组，值是一个列表，其中包含：[latin, amount, translation]。每次遇到相同的元组时，都会增加数量。

字典必须比函数寿命更长，因此您可能希望将其添加为参数。

完成后，您可以执行以下操作： result = dict.keys(); 结果.sort()。

我不确定我是否理解未知的部分。如果这不能解决该部分，您可能需要展示一个相关示例。

# c# - C＃ 。if (image == Properties.Resources.image)

> ID：10468284
> 
> 赞同：1
> 
> 时间：2012-05-06T05:08:28.910
> 
> 标签：c#

我想在图像上做一个 if 语句

```
 if (SortName.Image == Properties.Resources.RadioEmpty)
          {
              SortName.Image = Properties.Resources.Radio;
          }
          else
          {
              SortName.Image = Properties.Resources.RadioEmpty;
          } 
```

但它在工作任何想法我做错了什么？好的附加信息

1.

```
 //SortName = A picture box
          //Properties.Resources.RadioEmpty = Resources\RadioEmpty.png
          //Properties.Resources.Radio = Resources\Radio.png 
```

2.不，没有错误

3.我想为单选按钮使用自定义图像。A有一个带有上述代码的图片框点击。RadioEmpty 是默认设置，所以我检查图片框的图像是否与资源文件夹中的图像相同，代码也是如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T06:03:09.783

我建议您为此问题使用标签，请参阅此代码

```
 private void Form1_Load(object sender, EventArgs e)
        {
            //in form load the radio is checked or unckecked
            //here my radio is unchecked at load
            pictureBox1.Image = WindowsFormsApplication5.Properties.Resources.Add;
            pictureBox1.Tag = "UnChecked";
        }

   private void pictureBox1_Click(object sender, EventArgs e)
        {
            //after pictiurebox clicked change the image and tag too
            if (pictureBox1.Tag.ToString() == "Checked")
            {
                pictureBox1.Image = WinFormsApplication.Properties.Resources.Add;
                pictureBox1.Tag = "UnChecked";
            }
            else
            {
                pictureBox1.Image = WinFormsApplication.Properties.Resources.Delete;
                pictureBox1.Tag = "Checked";
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T05:10:06.263

比较名字。像这样的东西（未验证）

```
if (SortName.Image.Name.Equals(Properties.Resources.RadioEmpty.Name)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T19:59:23.983

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        Bitmap bm1;
        Bitmap bm2;
        private void button1_Click(object sender, EventArgs e)
        {
            bm1 = new Bitmap(Properties.Resources.firegirl1);
            bm2 = new Bitmap(Properties.Resources.Zemli2);
            pictureBox1.Image = bm1;
            pictureBox2.Image = bm2;
            if (pictureBox1.Image==pictureBox2.Image)
            {
                MessageBox.Show("Some");
            }
            else
            {
                MessageBox.Show("Differ");
            }
        }
} 
```

# java - Java/Groovy 中是否有可用的临时报告构建器库？根据选择的维度/度量生成 SQL 查询

> ID：10468288
> 
> 赞同：12
> 
> 时间：2012-05-06T05:10:52.077
> 
> 标签：java, business-intelligence

理想情况下，库需要详细说明每个维度/度量映射到哪些表/列/聚合。然后，当给出选定的列表时，它会生成 SQL 查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:09:19.273

您可能需要一个通用层来访问底层分析数据库，例如[OLAP4J](http://www.olap4j.org)，它为底层分析数据库提供 API 层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:30:03.693

如果您希望从多个数据库轻松生成查询，您可以尝试[Active Query Builder](http://www.activequerybuilder.com/product_java.html)，它是图形（让您下拉表格），在您的程序中放入非常简单并且易于定制（在某种程度上），这可能与JasperReports 或简单的网格，可以帮助你做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T06:44:59.563

我自己没有使用过它，但我听说过[Pentaho](http://www.pentaho.com/)的好消息。基于 Java 和开源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T09:21:46.400

另请参阅此处的问题：[Java Business Intelligence framework with ad-hoc web reports？](https://stackoverflow.com/questions/6144343/java-business-intelligence-framework-with-ad-hoc-web-reporting)以及 Groovy 的链接[jasper 插件](http://www.grails.org/plugin/jasper)。但是，临时查询很少，我目前面临同样的问题。

我认为 BIRT 和 JasperSoft 的 Adhoc 查询仅在“企业”（阅读“商业”）解决方案中提供。我试图以报告的创建者可以提供参数（特殊标记）并且最终用户可以选择包含或排除此参数的方式来实现它。这不是特别“临时”，但足以满足我的客户要求。

# jquery - 使 div 淡出的最简单方法

> ID：10468291
> 
> 赞同：0
> 
> 时间：2012-05-06T05:11:42.020
> 
> 标签：jquery, function, html, slider, fadeout

这可能是因为我没有得到足够的睡眠，但我就是想不通。我正在尝试制作一个页面，其中您有多个视频，然后顶部有一个 div 突然出现并随着视频加载而消失，所有这些`onClick`。我今天早些时候有它，但现在它不工作了。函数的部分是

```
$('#hh').animate({
        opacity: 1
    }, 0, function() {
            myVideo.src = videos[numb];
        myVideo.load();
        myVideo.play();
     $('#hh').fadeOut(400);                                                        
    }); 
```

那么，为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:19:40.657

```
$('#hh').show();
myVideo.src = videos[numb];
myVideo.load();
myVideo.play();
$('#hh').fadeOut(400); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T05:13:57.423

.fadeOut 是一种让事物淡出的非常简单的方法。

```
$('#clickme').click(function() {
  $('#book').fadeOut('slow', function() {
    // Animation complete.
  });
}); 
```

.fadeOut() 方法动画匹配元素的不透明度。一旦不透明度达到 0，显示样式属性设置为无，因此元素不再影响页面的布局。

持续时间以毫秒为单位；较高的值表示较慢的动画，而不是较快的动画。可以提供字符串 'fast' 和 'slow' 分别表示 200 和 600 毫秒的持续时间。如果提供了任何其他字符串，或者如果省略了持续时间参数，则使用 400 毫秒的默认持续时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T05:19:12.600

```
$('TARGET').fadeOut(300); // TARGET is any valid selector 
```

**[消退（）](http://api.jquery.com/fadeOut/)**

```
 $('#hh').show('fast', function() {
         myVideo.src = videos[numb];
         myVideo.load();
         myVideo.play();
         $(this).fadeOut(400);                                                        
    }); 
```

你也可以使用

```
 $('#hh').fadeIn('fast', function() {
         myVideo.src = videos[numb];
         myVideo.load();
         myVideo.play();
         $(this).fadeOut(400);                                                        
    }); 
```

**[淡入（）](http://api.jquery.com/fadeIn/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T05:29:47.723

您可以将代码替换为，

```
 $('#hh').fadeIn('slow', function() {

                   // Call Back Function 

                   myVideo.src = videos[numb];
                   myVideo.load();
                   myVideo.play();
                   $('#hh').fadeOut('slow');                            
        }                            
    }); 
```

但是有一件事我还没有理解，那就是为什么你要设置 opacity 0 之后`myVideo.play();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T05:38:13.817

您可以使用fadeIn，在回调中更改您的视频src，加载和播放，最后fadeOut。它应该工作

```
$('#hh').fadeIn(400, function () {
  myVideo.src = videos[numb];
  myVideo.load();
  myVideo.play();
  $(this).fadeOut(400);    
}); 
```

# internet-explorer - 尝试编写 BHO 以将 iFrame 注入用户访问的每个网页，使用各种侦听器，导致循环并且没有 iframe 出现

> ID：10468292
> 
> 赞同：3
> 
> 时间：2012-05-06T05:11:53.437
> 
> 标签：internet-explorer, iframe, code-injection, bho

所以不幸的是，我一直在为 Internet Explorer 编写 BHO。它的功能是在用户访问的每个网页中注入一个 iframe，在用户处理他或她的业务时显示一些（相对）恒定的信息。我已经通过一系列相当老套的 mshtml 强制转换来管理注入，如下所示，其中 Explorer 是一个 WebBrowserClass 对象，而 foo.html 与 BHO 的源一起提供：

```
IHTMLDocument2 document = (IHTMLDocument2) Explorer.Document;
IHTMLDocument3 doc3 = (IHTMLDocument3)document;
var iframe = document.createElement("iframe");
iframe.setAttribute("src", "foo.html");
iframe.setAttribute("id", "iFrame");
iframe.setAttribute("style", "position: fixed; left: 0px; top: 0px; border: 0px; width: 100%; height: 45px; background-color: white");
IHTMLElementCollection iec = doc3.getElementsByTagName("body");
IHTMLElement elem = (IHTMLElement)iec.item(0);
IHTMLDOMNode domnode = (IHTMLDOMNode)elem;
domnode.appendChild((IHTMLDOMNode)iframe); 
```

这行得通！我认为。有点。如果我将它粘贴在 OnDocumentComplete 中，它会导致无限循环，并且它不会显示任何 iframe。循环的问题是使用 Explorer 的事件侦听器，例如 OnDocumentComplete，因为只要 iFrame 内的页面完成加载，它们就会被调用，然后调用注入函数，然后调用 OnDocumentComplete，这......好吧，你明白了。我试过使用 OnNavigateComplete，但它仍然会在从多个来源加载的页面上多次加载（例如，启用自动完成功能的谷歌主搜索页面。）但即使它没有进入无限循环，我仍然没有得到可见的 iframe。

所以我想这是两个问题：1）我如何真正让我的 iframe 出现？注入代码有效（我已经尝试过使用简单的 javascript 警报）... 2）如何在每次用户导航到新页面或刷新当前页面时出现我的 iframe 而不会导致 BHO 进入无限循环？

其他可能相关的功能：

```
void OnNavigateComplete(object pDisp, ref object URL)
{
  if ((_currentDocument != null) && (isValidURL(_currentDocument.url))) 
  {
      injectFrame();
  }
}

void OnDocumentComplete(object pDisp, ref object URL)
{
    if (Explorer.ReadyState == SHDocVw.tagREADYSTATE.READYSTATE_COMPLETE)
    {
        _currentDocument = Explorer.Document as mshtml.HTMLDocument;
        if (_currentDocument != null)
        {
            //injectFrame();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:10:13.043

好吧，我想我基本上已经弄清楚了。OnDocumentComplete 仍然被多次调用，但我已经解决了框架的所有问题......所以当 iframe 加载多次时，它被加载到同一个地方。

无限循环的修复是硬编码工具栏的位置，并在 OnDocumentComplete 中检查该 url：

```
void OnDocumentComplete(object pDisp, ref object URL)
{
  // _currentDocument = Explorer.Document as mshtml.HTMLDocumentClass;
    if (Explorer.ReadyState == SHDocVw.tagREADYSTATE.READYSTATE_COMPLETE)
    {
        _currentDocument = Explorer.Document as mshtml.HTMLDocument;
        if (_currentDocument != null)
        {
            // we have a document - attach our events
            // on onload event should go here if the document is now complete...
            if (!URL.Equals("http://url.to/foo.html")) injectFrame();
        }
        else
        {
            // document is null?
            // Debugger.ShowMessage("Tried to attach to document, but was null");
        }
    }
} 
```

就 iframe 而言，Style 属性显然是它自己的一组字符串，而不是像每个 OTHER 属性那样只是一个常规字符串。所以不要做类似的事情......

```
setAttribute("style","position: fixed; left: 0px; top: 0px; border: 0px; width: 100%; height: 45px; background-color: white"); 
```

我最终不得不做

```
iframe.style.setAttribute("position", "fixed");
iframe.style.left="0px";
iframe.style.top="0px";
iframe.style.border="0px";
iframe.style.width = "100%";
iframe.style.height="45px";
iframe.style.backgroundColor="white"; 
```

这整个事情一直是一个巨大的头痛，我希望永远不必再处理它。

# entity-framework - 考虑 EF 4.1 CF 的场景的 RDBMS 映射

> ID：10468296
> 
> 赞同：1
> 
> 时间：2012-05-06T05:12:43.983
> 
> 标签：entity-framework, ef-code-first

对于以下场景，我似乎无法找到一个舒适的解决方案：

*   服务器准备检查包文件的客户端/服务器应用程序。
*   一个包文件就像一个考试（一对一）的许可证。
*   包文件由管理员下载，输入桌面客户端，学生将在其中完成考试。
*   客户端应用程序记录考试会话，重新打包结果以供管理员收集。

我目前正在使用 TPT。问题是我使用 EDMX 文件创建模型，忽略 DB 映射，从自定义模板生成 DbContext 和 POCO 类，并从那里以 CF 友好的方式恢复，就好像 EDMX 不存在一样。

我无法想象如何构建这些类。server 和 client 包都有一个共同的`Compile()`方法，所以在这里考虑继承是很自然的。无法映射包基类，因为我们希望两个派生类的实例都存在于数据库中。

但是，当我尝试使用 TPT 方法来巩固继承时，我对 EF 的理解就崩溃了。我无法控制从 TPT 更改为另一种方法。我想知道是否可以指示 EF 以不同方式处理特定场景。实体类可以从非实体类派生吗？如何派生？

# php - PHP动态类扩展

> ID：10468298
> 
> 赞同：3
> 
> 时间：2012-05-06T05:13:14.360
> 
> 标签：php, oop

我知道你可以在构造它时扩展一个类，如下所示：

```
class b extends a {
} 
```

但是是否可以从脚本中动态扩展类？如：

```
$b = new b($input) extends a; 
```

我希望完成的是对模块进行不同的扩展，无论它是在管理页面中使用还是在公共页面中使用。我知道我可以使用相同的名称创建两个不同的父类，并且每个管理员或公共只包含一个。但我的问题是，是否可以在 PHP 中动态执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T05:38:05.937

不，不是没有像 RunKit 这样的扩展。

您可能会考虑另一种方法。如果您希望 B 承担 A 的功能，也许像下面这样的东西可以提供一种“混合”方法。一般情况下，B 不是 A 的孩子，而是 B 委托给 A。

```
<?php

class MixMeIn
{
  public $favouriteNumber = 7;

  public function sayHi() {
    echo "Hello\n";
  }
}

class BoringClass
{
  private $mixins = array();

  public function mixin($object)
  {
    $this->mixins[] = $object;
  }

  public function doNothing() {
    echo "Zzz\n";
  }

  public function __call($method, $args)
  {
    foreach ($this->mixins as $mixin)
    {
      if (method_exists($mixin, $method))
      {
        return call_user_func_array(array($mixin, $method), $args);
      }
    }
    throw new Exception(__CLASS__ + " has no method " + $method);
  }

  public function __get($attr)
  {
    foreach ($this->mixins as $mixin)
    {
      if (property_exists($mixin, $attr))
      {
        return $mixin->$attr;
      }
    }
    throw new Exception(__CLASS__ + " has no property " + $attr);
  }

  public function __set($attr, $value)
  {
    foreach ($this->mixins as $mixin)
    {
      if (property_exists($mixin, $attr))
      {
        return $mixin->$attr = $value;
      }
    }
    throw new Exception(__CLASS__ + " has no property " + $attr);
  }

}

// testing

$boring = new BoringClass();
$boring->doNothing();
try {
  $boring->sayHi(); // not available :-(
}
catch (Exception $e) {
  echo "sayHi didn't work: ", $e->getMessage(), "\n";
}
// now we mixin the fun stuff!
$boring->mixin(new MixMeIn());
$boring->sayHi(); // works! :-)
echo $boring->favouriteNumber; 
```

只是一个滑稽的想法。我希望我正确理解了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T05:34:45.543

你不能，但这已经要求了几年：[https ://bugs.php.net/bug.php?id=41856&edit=1](https://bugs.php.net/bug.php?id=41856&edit=1)

您可以在 eval 中定义类，但这比正常声明类更麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T05:25:10.863

但是您不能`extends`在对象创建时使用。`extends`仅在类定义中使用，并为我们的新类定义哪个其他类是“父类”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T06:59:15.907

或者，如果您对 javascript 样式的继承感到满意并且不介意丢失类型检查：

```
<? //PHP 5.4+
final class ExpandoLookalike {
    //Allow callable properties to be executed
    public function __call($name, $arguments) {
        \call_user_func_array($this->$name, $arguments);
    }
}

$newBaseModule = static function(){
  $base = new ExpandoLookalike();
  //Common base functions get assigned here.
  $basePrivateVar = 42;

  $base->commonFunction = static function($params1, $params2) use ($basePrivateVar){
      echo "common function\n";
  };
  $base->comment = static function() use ($basePrivateVar){
    echo "Doing base comment with $basePrivateVar\n";
  };
  return $base;
};

//Javascript-style extends
$newAdminModule = static function($param) use ($newBaseModule){
  $base = $newBaseModule();

  $privateVar = 5;

  $base->adminProperty = 60;
  $base->suspendSite = static function() use ($param, $privateVar){
    echo 'Doing admin only function ';
    echo "with $param, $privateVar\n";

  };

  return $base;
};

$newPublicModule = static function() use ($newBaseModule){
  $base = $newBaseModule();

  $privateVar = 3;

  //Javascript-style overloading
  $oldComment = $base->comment;
  $base->comment = static function($data) use ($oldComment, $privateVar){
    $oldComment();
    echo 'Doing public function ';
    echo "with $data\n";
  };

  return $base;
};

$baseModule = $newBaseModule();
$adminModule = $newAdminModule('P');
$publicModule = $newPublicModule();

$adminModule->suspendSite(); //echos 'Doing admin only function with P, 5'
echo "{$adminModule->adminProperty}\n"; //echos '60'
$publicModule->comment('com'); //echos 'Doing base comment with 42'
                                     //'Doing public function with com'
?> 
```

尽管关闭了特性和接口的大门，但它打开了其他有趣的大门来弥补：

```
<? //PHP 5.4+

$inheritAllTheThings = static function(){
  $base = new ExpandoLookalike();
  foreach(\func_get_args() as $object){
    foreach($object as $key => $value){
        //Properties from later objects overwrite properties from earlier ones.
        $base->$key = $value;
    }
  }
  return $base;
};

$allOfEm = $inheritAllTheThings(
  $newPublicModule(),
  $newAdminModule('Q'),
  ['anotherProp' => 69,]
);

$allOfEm->comment('f'); //echos 'Doing base comment with 42'
//Because AdminModule came after PublicModule, the function that echos 'f'
//from PublicModule was overridden by the function from AdminModule.
//Hence, order denotes resolutions for multiple inheritance collisions.
$allOfEm->suspendSite(); //echos 'Doing admin only function with Q, 5'
echo $allOfEm->anotherProp . "\n"; //echos '69'

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T05:22:14.210

您可以使用类型转换。如果 a 扩展 b 那么你可以做

```
$a=(a)(new b($input)); 
```

这不完全相同，但相似。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-06T05:40:41.897

是的，正如 cory 所提到的，这个功能之前已经被[请求](https://bugs.php.net/bug.php?id=41856&edit=1)过。但在此之前，您可以创建一个解决方法。这是我的老把戏

创建两个单独的类，如下所示：

```
class a {
}
class b {
   public $object;
} 
```

然后，也创建一个扩展版本

```
class bextendeda extends a {
} 
```

在类 b 的构造方法中，放置几个如果请求重定向到扩展对象的函数。

```
class b {
    public $object;

    public function __contruct($extend = false) {
        if($extend) $this -> object = new bextendeda(); 
        else $this -> object = $this;
    }

    function __get($prop) {
        return $this-> object -> $prop;
    }

    function __set($prop, $val) {
       $this-> object -> $prop = $val;
    }
    function __call($name, $arguments)
    {
        return call_user_func_array(array($this -> object, $name), $arguments);
    }

} 
```

***有了它***，如果您想要扩展版本，只需执行此操作

```
$b = new b(true); 
```

如果不

```
$b = new b(); 
```

享受 ：）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-08T18:24:20.950

你可以看看：[https ://github.com/ptrofimov/jslikeobject](https://github.com/ptrofimov/jslikeobject)

作者实现了支持继承的类 JS 对象。

但是，使用这样的对象而不是通常的对象可能不是那么好。

# jsf - 我可以在 jsf 项目中使用 gwt 库吗

> ID：10468303
> 
> 赞同：1
> 
> 时间：2012-05-06T05:14:49.670
> 
> 标签：jsf, gwt, cordova, primefaces, gwt2

我想使用 PrimeFaces 创建一个移动应用程序。在其中，我也想使用Phonegap，但不是直接使用，而是通过它的GWT 抽象-phonegap-gwt。

PhoneGap 提供的一些功能，在 phonegap 应用程序中，要求访问手机功能的网页是本地页面（在要访问手机功能的设备上）......这可以使用 phonegap-gwt in还有一个谷歌网络工具包项目，即不要将服务器端代码放在使用phonegap-gwt代码的页面中（如果我在这里错了，请纠正我，到目前为止？）...另一方面，由jsf创建的程序（即primefaces) 是一个移动网络应用程序。

因此，我感到困惑的是，我可以将 GWT 代码（用于通过 GWT 访问 Phonegap）和 JSF 代码保留在同一个项目中吗？我知道phonegap gwt 代码会被编译成Javascript，但是这样的编程，即用jsf 代码保存gwt 代码，可以实现吗？即使这在理论上是可能的，是否会有我必须跟踪的问题/限制？这些限制是什么？您是否尝试过将 GWT 代码与 JSF 代码结合使用？它奏效了吗？

# java - Reducing power consumption

> ID：10468305
> 
> 赞同：1
> 
> 时间：2012-05-06T05:15:29.923
> 
> 标签：java, android, wakelock

For my application, I want to have a `Notification` sent to the user at a specified time. To do this, I have set up a `Timer` and the corresponding `TimerTask`. To be sure the `Notification` will be sent to the user even if the phone is aslept, I have acquired a `PARTIAL_WAKE_LOCK`. The problem is that this method draws a lot of power from my battery (my application is responsible for more than 50% of all the power consumption at the end of the day).

Is there another way (a more power efficient one of course) to do what I want to do?

Thanks in advance for the time you will spend trying to help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T07:50:54.650

```
 > Is there another way (a more power efficient one of course) to 
  > [have a Notification sent to the user at a specified time]? 
```

You can use an the android AlarmManager for this.

See [Using AlarmManager to Schedule Activities on Android](http://justcallmebrian.com/?p=129) as a tutorial and example.

# c - wctype.h 函数应该如何正确使用？

> ID：10468306
> 
> 赞同：5
> 
> 时间：2012-05-06T05:15:44.647
> 
> 标签：c, language-lawyer, ctype

中的各种`is...`函数（例如`isalpha`, `isdigit`）`ctype.h`并不是完全可预测的。它们接受`int`参数但期望`unsigned char`范围内的字符值，因此在有`char`符号的平台上，直接传递`char`值可能会导致不希望的符号扩展。我相信处理这个问题的典型方法是明确地转换为`unsigned char`第一个。

好的，但是处理中的各种`isw...`功能的正确、可移植的方法是`wctype.h`什么？ `wchar_t`, like `char`, 也可以是有符号或无符号的，但因为`wchar_t`它本身是 a `typedef`，所以类型名 of`unsigned wchar_t`是非法的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:03:35.853

在重新阅读有关 的 ISO C99 规范时`wctype.h`，它指出：

> 对于本小节中描述的所有接受类型参数的函数`wint_t`，其值应可表示为 a`wchar_t`或应等于宏的值`WEOF`。如果此参数具有任何其他值，则行为未定义。（§7.25.1/5）

将此与相应的注释进行对比`ctype.h`：

> 在所有情况下，参数都是 an `int`，其值应表示为 an**`unsigned char`**或应等于宏的值`EOF`。如果参数有任何其他值，则行为未定义。(§7.4/1)

（强调我的）

我认为理解为什么`ctype.h`函数需要`unsigned char`表示的动机也是值得的。该标准*要求*它`EOF`是否定的`int`（§7.19.1/3），因此`ctype.h`函数使用`unsigned char`表示来（尝试）避免潜在的歧义。

相比之下，`wctype.h`功能不存在这种动机。该标准对 没有这样的要求`WEOF`，由脚注 270 详细说明：

> 宏的值`WEOF`可能与 的不同，`EOF`不必为负。

因为`WEOF`已经保证不会与`wchar_t`(§7.24.1/3) 表示的任何字符冲突。

因此，这些`wctype.h`函数没有或不需要任何无符号的废话，并且`wchar_t`可以直接将值传递给它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T05:34:46.207

不`wint_t`就是为了这个吗？`iswXxxxx()`函数采用以下类型`wint_t`：

ISO 9899:1999 在各个部分中涵盖了这一点，向后工作：

> ## §7.25 宽字符分类和映射实用程序`<wctype.h>`
> 
> ### §7.25.2.1.1 iswalnum 函数
> 
> 概要
> 
> ```
> #include <wctype.h>
> int iswalnum(wint_t wc); 
> ```
> 
> 描述
> 
> iswalnum 函数测试任何 iswalpha 或 iswdigit 为真的宽字符。
> 
> ## §7.24 扩展的多字节和宽字符实用程序`<wchar.h>`
> 
> ### §7.24.1 简介：
> 
> ```
> wint_t 
> ```
> 
> 它是一个默认不变的整数类型，参数promotions 可以保存对应于扩展字符集成员的任何值，以及至少一个不对应于扩展字符集任何成员的值（参见下面的WEOF）；^(269))
> 
> ^(269)) `wchar_t`并且`wint_t`可以是相同的整数类型。

“默认情况下不变的参数提升”应该意味着它必须和 a 一样大`int`，尽管它可能是 a`short`或`unsigned short`if `sizeof(short) == sizeof(int)`（现在很少出现这种情况，尽管对于某些 16 位系统来说确实如此）。

> ## §7.17 通用定义`<stddef.h>`
> 
> ```
> wchar_t 
> ```
> 
> 这是一个整数类型，其值范围可以表示支持的语言环境中指定的最大扩展字符集的所有成员的不同代码；空字符的代码值为零，基本字符集的每个成员在用作整数字符常量中的唯一字符时，其代码值应等于其值。

只要传递给`iswalnum()`或其亲属的值是有效的`wchar_t`或 WEOF，该函数就会正常工作。如果您凭空制造了价值并设法弄错了价值，那么您将获得未定义的行为。

# bash - 在 Linux 上的 bash 中以编程方式发现公共 IP

> ID：10468307
> 
> 赞同：0
> 
> 时间：2012-05-06T05:15:48.203
> 
> 标签：bash, networking, ip

我找到了一个可以满足我需要的帖子，但是在 Windows 上：

[以编程方式发现公共 IP](https://stackoverflow.com/questions/613471/discovering-public-ip-programatically)

```
> tracert -d www.yahoo.com

`Tracing route to www-real.wa1.b.yahoo.com [69.147.76.15]
over a maximum of 30 hops:`

1    <1 ms    <1 ms    <1 ms  192.168.14.203
2     *        *        *     Request timed out.
3     8 ms     8 ms     9 ms  68.85.228.121
4     8 ms     8 ms     9 ms  68.86.165.234
5    10 ms     9 ms     9 ms  68.86.165.237
6    11 ms    10 ms    10 ms  68.86.165.242 
```

`The 68.85.228.121 is a Comcast (my provider) router. We can ping that:`

> 平 -r 9 68.85.228.121 -n 1

`Pinging 68.85.228.121 with 32 bytes of data:`

`Reply from 68.85.228.121: bytes=32 time=10ms TTL=253` `Route: 66.176.38.51 ->`

`68.85.228.121 ->`

`68.85.228.121 ->`

`192.168.14.203`

``Voila! The 66.176.38.51 is my public IP.``

 `这个（第三个）答案显示了一种获取我的 ISP 的 IP 然后使用 ping 来获取我的 IP 的方法。

它在 Linux 上未经修改就无法工作。Traceroute 可以代替 tracert 工作，但是因为它的输出是不可预测的，所以我不确定如何解析它。

我做到了

```
IP="$(traceroute -d www.yahoo.com | grep ' 2 ' | sed -e 's/.*(\(.*\)).*/\1/')" 
```

但是 grep 是（很差）硬编码的。我没有看到如何让 ping 像示例中那样工作。

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T05:20:30.820

就个人而言，我会运行这个命令：

`wget -qO- whatismyip.org`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T11:15:38.063

这不是一个可靠的解决方案，一种被动的方法是编写一个脚本来拉取您自己的路由器的“WAN”状态页面。您可以根据需要多次这样做，没有人会抱怨过度探测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-09T15:51:46.960

如果您想要的是简单，并且您不介意依赖其他服务器（或服务），请尝试：

```
dig +short myip.opendns.com @resolver1.opendns.com 
```

那只会吐出你的地址

或者，

```
#!/bin/bash
myip="$(dig +short myip.opendns.com @resolver1.opendns.com)"
echo "myip = [${myip}]" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-09T09:19:33.460

我只是将@pizza 所说的与[这个](https://stackoverflow.com/questions/3742983/how-to-get-the-contents-of-a-webpage-in-a-shell-variable)答案结合起来，并生成了以下工作脚本。它不如使用traceroute之类的东西好，但它要简单得多。

```
 #!/bin/bash
   content="$(wget http://checkip.dyndns.org/ -q -O -)"
   myip="$(<<< "$content" sed -e 's/.*Current IP Address: //' -e 's/<.*//')"
   echo "myip = [${myip}]" 
```

该`wget`命令检索向 dyndns 询问我的 IP 的结果。然后，`sed`在 IP 地址 dyndns 返回之前和之后砍掉所有内容。

如其他地方所述，如果此类请求过于频繁，诸如 dyndns 之类的网站可能会阻止此类请求，但由于您的 IP 在大多数情况下应保持不变，至少在您的会话期间（如果不是很多天的话）应该是没有必要的经常运行这个脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-08T19:01:04.020

好的，我知道这是一个旧线程，但是这篇文章向我揭示了一些事情，并将其与我已经学到的知识相结合，我想我已经提出了一个可靠的解决方案。

你想要的 grep 是：

```
grep -m 1 -Eo '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}' 
```

我个人查找外部 IP 的解决方案曾经是：

```
curl icanhazip.com 
```

现在它是：

```
ISP=`traceroute -M 2 -m 2 8.8.8.8 | grep -m 1 -Eo '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'` | ping -R -c 1 -t 1 -s 1 $ISP | grep RR | grep -m 1 -Eo '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}' > .extIP 
```

接着

```
cat .extIP 
```

玩得开心！`

# java - 为什么写入文件的整数被读取为不同的值？

> ID：10468309
> 
> 赞同：1
> 
> 时间：2012-05-06T05:16:45.667
> 
> 标签：java, file-io, integer

我有一个程序，我需要生成一个整数，将其写入文本文件并在程序下次运行时将其读回。在一些异常行为之后，我将其剥离为设置一个整数值，将其写入文件并将其读回以进行调试。

`totScore`, 设置为 25，当我在写入文件之前打印到控制台时，我看到`25`. 但是，当我读取文件并打印到控制台时，我得到三个值... `25`、、`13`和`10`。在记事本中查看文本文件给了我一个不在键盘上的字符，所以我怀疑该文件存储在`int`.

为什么我的写入和读取步骤会得到不同的结果？

它不是写成`int`? 这些值是如何存储在文件中的？我是否需要将读取的值转换为其他值并将其转换为整数？

考虑：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.nio.file.*;
import java.nio.file.StandardOpenOption.*;
//
public class HedgeScore  {
    public static void main(String[] args)  {
        int totScore = 25;
        OutputStream outStream = null;   ///write
        try {
            System.out.println("totscore="+totScore);
            BufferedWriter bw = new BufferedWriter(new FileWriter(new File("hedgescore.txt")));
            bw.write(totScore);
            bw.write(System.getProperty("line.separator"));
            bw.flush();
            bw.close();
        }
        catch(IOException f)  {
            System.out.println(f.getMessage());
        }
        try  {
        InputStream input = new FileInputStream("hedgescore.txt");
            int data = input.read();
            while(data != -1)  {
                System.out.println("data being read from file :"+ data);
                data = input.read();
                int prevScore = data;
            }
            input.close();
        }
        catch(IOException f)  {
            System.out.println(f.getMessage());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T05:18:20.613

您正在读取/写入字符串和原始数据，但不一致。为什么不改为读取字符串（使用某种 Reader），然后通过解析字符串转换为 int？要么将您的数据写为字节并将其作为字节读取 - 尽管如果文件必须处理不同类型的数据，这可能会变得非常棘手。

所以要么：

```
import java.io.*;

public class HedgeScore {
   private static final String FILE_PATH = "hedgescore.txt";

   public static void main(String[] args) {
      int totScore = 25;
      BufferedWriter bw = null;
      try {
         System.out.println("totscore=" + totScore);
         bw = new BufferedWriter(new FileWriter(new File(
               FILE_PATH)));
         bw.write(totScore);
         bw.write(System.getProperty("line.separator"));
         bw.flush();
      } catch (IOException f) {
         System.out.println(f.getMessage());
      } finally {
         if (bw != null) {
            try {
               bw.close();
            } catch (IOException e) {
               e.printStackTrace();
            }
         }
      }

      InputStream input = null;
      try {
         input = new FileInputStream(FILE_PATH);
         int data = 0;
         while ((data = input.read()) != -1) {
            System.out.println("data being read from file :" + data);
         }
         input.close();
      } catch (IOException f) {
         System.out.println(f.getMessage());
      } finally {
         if (input != null) {
            try {
               input.close();
            } catch (IOException e) {
               e.printStackTrace();
            }
         }
      }
   }
} 
```

或者：

```
import java.io.*;

public class HedgeScore2 {
   private static final String FILE_PATH = "hedgescore.txt";

   public static void main(String[] args) {
      int totScore = 25;
      PrintWriter pw = null;
      try {
         System.out.println("totscore=" + totScore);
         pw = new PrintWriter(new FileWriter(new File(FILE_PATH)));
         pw.write(String.valueOf(totScore));
         pw.write(System.getProperty("line.separator"));
         pw.flush();
      } catch (IOException f) {
         System.out.println(f.getMessage());
      } finally {
         if (pw != null) {
            pw.close();
         }
      }

      BufferedReader reader = null;
      try {
         reader = new BufferedReader(new FileReader(FILE_PATH));
         String line = null;
         while ((line = reader.readLine()) != null) {
            System.out.println(line);
         }
      } catch (IOException f) {
         System.out.println(f.getMessage());
      } finally {
         if (reader != null) {
            try {
               reader.close();
            } catch (IOException e) {
               e.printStackTrace();
            }
         }
      }
   }
} 
```

# xmpp - XMPP 在基于位置的标准上发送消息

> ID：10468321
> 
> 赞同：3
> 
> 时间：2012-05-06T05:19:26.500
> 
> 标签：xmpp, postgis, publish-subscribe, ejabberd

我正在使用 XMPP 协议、ejabberd 服务器和 PostGis 空间数据库编写自定义服务。此外，我正在将客户端写入服务，因此我可以完全控制。

用户 Alice 上线并需要向她附近的某些用户实体发布信息。所以用户 Alice 登录创建 pubsub 节点，我希望其他邻近实体自动订阅 Alice 的节点。

当 Alice 上线时，我需要自动查询有关邻近实体的 postgis 并自动将它们订阅给 Alice。

你会推荐哪种方式？

谢谢埃隆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T02:26:41.693

没有现成的标准可以做到这一点，但可以扩展 XEP-0060 来实现这一点。

在我开发的系统中，我可以在节点内订阅点+半径。这是通过[订阅选项](http://xmpp.org/extensions/xep-0060.html#subscriber-configure-subandconfig)完成的，例如：

```
<iq type='set'
    from='francisco@denmark.lit/barracks'
    to='pubsub.shakespeare.lit'
    id='sub1'>
  <pubsub xmlns='http://jabber.org/protocol/pubsub'>
    <subscribe node='princely_musings' jid='francisco@denmark.lit'/>
    <options>
      <x xmlns='jabber:x:data' type='submit'>
        <field var='FORM_TYPE' type='hidden'>
          <value>http://jabber.org/protocol/pubsub#subscribe_options</value>
        </field>
        <field var='location#latitude'><value>52.231</value></field>
        <field var='location#longitude'><value>-1.49</value></field>
        <field var='location#radius'><value>10</value></field>
      </x>
    </options>
  </pubsub>
</iq> 
```

然后我自定义了 pubsub 服务，根据订阅选项中的区域过滤通知。只有当项目移动位置时事情才会真正变得复杂，并且当先前发布到客户端的项目超出其订阅区域的范围时，您需要模拟撤回。

不幸的是，我不能提供任何代码，因为它不是公开的（不是我的选择），尽管它无论如何都是针对 Prosody 的，而且看起来你正在寻找一个 ejabberd 解决方案。我上面描述的原理对我来说效果很好，所以我建议至少将它作为模板解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:14:58.100

我没有使用过 ejabberd，但我认为在位置跟踪和订阅管理之间进行关联的自定义模块将是最简单的。通过使用 curomt 插件/模块，大多数 XMPP 服务器通常支持这种类型的应用程序特定行为。

# vim - 如何在 Vim 中不移动光标的情况下运行搜索和替换命令？

> ID：10468324
> 
> 赞同：24
> 
> 时间：2012-05-06T05:20:00.360
> 
> 标签：vim, macvim

在 Vim 中，当我这样做时：

```
:%s/foo/bar/g 
```

它将在整个文档中将所有出现的 'foo' 替换为 'bar'。完成后，光标已移动到最后一个将 'foo' 替换为 'bar' 的位置。

在发出此命令之前，如何`:%s/foo/bar/g`在光标不离开原始位置的情况下运行？

我可以在`.vimrc`文件中设置一些选项吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-06T08:27:29.800

当`:substitute`命令运行时，在执行任何替换之前，光标的位置存储在跳转列表中。为了回到最近一次跳转之前的位置，可以使用 ````或`''`Normal-mode 命令。前者准确跳转到存储位置；后者跳转到存储位置所属行上的第一个非空白字符。

通过发出命令，可以同时调用替换命令并随后将光标移回

```
:%s/pat/str/g|norm!`` 
```

或者，如果不跳转到精确位置而仅跳转到包含行就足够了，则使用命令

```
:%s/pat/str/g|'' 
```

不需要在后一个命令中`''`加上`norm!`前缀，因为 `''`Ex 命令的范围语法允许的地址是指正常模式命令 `''`跳转到的同一行（请参阅 `:help :range`）；两者都只是查看`'` 伪标记的内容。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-06T08:49:38.080

我只需在替换后键入`Ctrl`+`O`即可返回上一个位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-06T08:19:54.717

它很旧，但是对于遇到这个问题的任何人，我想分享我的解决方案，因为即使没有任何替换它也能正常工作：

```
:exe 'norm m`' | %s/pattern/substitution/eg | norm g`` 
```

`exe`是必需的，因为`norm`将 bar 视为参数。

# javascript - Backbone.js：在 Collection 中使用时不会触发模型事件

> ID：10468325
> 
> 赞同：0
> 
> 时间：2012-05-06T05:20:02.170
> 
> 标签：javascript, backbone.js, javascript-framework, backbone-events, backbone-views

在这里，我有一个 Backbone.js 模型 - 联系人和一个集合 - 以联系人为模型的联系人。我有两个视图，其中一个使用集合列出所有联系人，第二个使用模型直接显示单个联系人。但是当我直接使用模型时，我可以在与集合一起使用时触发'change'事件，而不会触发'change'事件（甚至模型的'所有'事件）。我是否在这里缺少一些额外的绑定以使其与集合一起使用？

```
var Contact = Backbone.Model.extend({ 
    defaults: {
        id: 0,
        urlDisplayPicBig: '',
        urlDisplayPicSmall: ''
    },
    initialize: function () {
        this.bind('change', this.doSomething);
    },
    generateUrls: function () { //earlier doSomething()
        ...
    }
    ...
});

var Contacts = Backbone.Collection.extend({ 
    model: Contact,
    ...
}); 
```

**更新** 同时使用集合和单个模型实例时，我必须运行 generateUrls() 以根据模型的“id”更新 urlDisplayPicBig 和 urlDisplayPicSmall。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:40:05.307

当您[`fetch`](http://documentcloud.github.com/backbone/#Collection-fetch)对集合执行以下操作时：

> 集合将重置

那[将](http://documentcloud.github.com/backbone/#Collection-reset)

> 用新的模型列表（或属性哈希）替换集合，最后触发单个`"reset"`事件。[...] 使用不带参数的 reset 作为清空集合的一种方式很有用。

因此`fetch`，集合上的 a 将删除当前在集合中的所有模型，并用全新的模型实例替换它们。不会发生任何`"change"`事件，只会有一个`"reset"`事件。

当您[`fetch`](http://documentcloud.github.com/backbone/#Model-fetch)对模型执行 a 时：

> `"change"`如果服务器的状态与当前属性不同，将触发一个事件。

因此调用`fetch`几乎与手动从服务器加载数据并调用[`set`](http://documentcloud.github.com/backbone/#Model-set)更改模型相同。

* * *

**摘要**：`Collection#fetch`不触发任何`"change"`事件，只是一个`"reset"`事件；`Model#fetch`如果发生变化，将触发一个`"change"`事件。

* * *

如果您只想在创建新模型实例时添加几个新属性，那么您可以使用[`Model#parse`](http://documentcloud.github.com/backbone/#Model-parse).

# javascript - Blogger 上的延迟加载

> ID：10468326
> 
> 赞同：1
> 
> 时间：2012-05-06T05:20:07.990
> 
> 标签：javascript, jquery, html, blogger

我正在尝试在博客博客上实现延迟加载，但遇到了一些问题。有问题的延迟加载插件是这个： http: [//www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

所以在文档中，它说要延迟加载的图像应该是以下 html 代码格式：

```
<img class="lazy" src="img/grey.gif" data-original="img/example.jpg"  width="640" heigh="480"> 
```

与博客文章的情况一样，博客引擎以以下格式输出图像：

```
<img class="lazy" src="img/myimage.png" width="640" heigh="480"> 
```

我的问题是，是否可以让博主以第一种格式输出图像 html，将“grey.gif”空格符作为所有图像的默认图像 src，并且“data-original”属性具有正确的图像 URL，以便懒加载器真的有效吗？

在此先感谢您的帮助:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:56:54.323

您可以切换到 HTML 视图，然后根据延迟加载脚本的要求修改每个 img 标签。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-05-15T15:03:36.490

你可以`loading='lazy'`在js函数中使用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-09-17T16:38:00.107

您不需要执行所有这些操作，您可以使用以下专门为博主博客创建的延迟加载脚本

`<script type='text/javascript'>//<![CDATA[ (function(a){a.fn.lazyload=function(b){var c={threshold:0,failurelimit:0,event:"scroll",effect:"show",container:window};if(b){a.extend(c,b)}var d=this;if("scroll"==c.event){a(c.container).bind("scroll",function(b){var e=0;d.each(function(){if(a.abovethetop(this,c)||a.leftofbegin(this,c)){}else if(!a.belowthefold(this,c)&&!a.rightoffold(this,c)){a(this).trigger("appear")}else{if(e++>c.failurelimit){return false}}});var f=a.grep(d,function(a){return!a.loaded});d=a(f)})}this.each(function(){var b=this;if(undefined==a(b).attr("original")){a(b).attr("original",a(b).attr("src"))}if("scroll"!=c.event||undefined==a(b).attr("src")||c.placeholder==a(b).attr("src")||a.abovethetop(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.rightoffold(b,c)){if(c.placeholder){a(b).attr("src",c.placeholder)}else{a(b).removeAttr("src")}b.loaded=false}else{b.loaded=true}a(b).one("appear",function(){if(!this.loaded){a("<img />").bind("load",function(){a(b).hide().attr("src",a(b).attr("original"))[c.effect](c.effectspeed);b.loaded=true}).attr("src",a(b).attr("original"))}});if("scroll"!=c.event){a(b).bind(c.event,function(c){if(!b.loaded){a(b).trigger("appear")}})}});a(c.container).trigger(c.event);return this};a.belowthefold=function(b,c){if(c.container===undefined||c.container===window){var d=a(window).height()+a(window).scrollTop()}else{var d=a(c.container).offset().top+a(c.container).height()}return d<=a(b).offset().top-c.threshold};a.rightoffold=function(b,c){if(c.container===undefined||c.container===window){var d=a(window).width()+a(window).scrollLeft()}else{var d=a(c.container).offset().left+a(c.container).width()}return d<=a(b).offset().left-c.threshold};a.abovethetop=function(b,c){if(c.container===undefined||c.container===window){var d=a(window).scrollTop()}else{var d=a(c.container).offset().top}return d>=a(b).offset().top+c.threshold+a(b).height()};a.leftofbegin=function(b,c){if(c.container===undefined||c.container===window){var d=a(window).scrollLeft()}else{var d=a(c.container).offset().left}return d>=a(b).offset().left+c.threshold+a(b).width()};a.extend(a.expr[":"],{"below-the-fold":"$.belowthefold(a, {threshold : 0, container: window})","above-the-fold":"!$.belowthefold(a, {threshold : 0, container: window})","right-of-fold":"$.rightoffold(a, {threshold : 0, container: window})","left-of-fold":"!$.rightoffold(a, {threshold : 0, container: window})"})})(jQuery);$(function(){$("img").lazyload({placeholder:"http://i22.servimg.com/u/f22/15/42/72/40/grey10.gif",effect:"fadeIn",threshold:"-50"})})//]]></script>`

您可以将[http://i22.servimg.com/u/f22/15/42/72/40/grey10.gif](http://i22.servimg.com/u/f22/15/42/72/40/grey10.gif)替换为其他图像链接作为占位符。

**源码链接：http:** [//101helper.blogspot.com/2014/08/how-to-speed-up-your-blogger-blog.html](http://101helper.blogspot.com/2014/08/how-to-speed-up-your-blogger-blog.html)

# c++ - 如何在opengl中使用子窗口

> ID：10468327
> 
> 赞同：2
> 
> 时间：2012-05-06T05:20:10.150
> 
> 标签：c++, opengl, stl, glut

我正在尝试使用子窗口通过旋转它来从曲线中生成一个对象。我能够生成所有曲线。现在我也把窗口分成了两部分。我想在左侧子窗口中绘制曲线，并希望通过沿右侧轴旋转来生成实体。我无法在正确的子窗口中绘制任何内容。

编辑：

好的，这就是我在左侧绘制点的方式。这些点基本上是用户的点击。我捕获这些事件并制作一个列表，然后使用 for 循环打印它们。

```
// This function takes a list of points and draws the dots in the screen
void drawDot(vector<vec2> listPts)
{
    glBegin(GL_POINTS);
    glColor3f(1.0,1.0,1.0);

    if(j==0) // J=0 means points are being added using add option, no insert after is currently being used
    {
        for(int i=0;i<listPts.size();i++)
        {
            glVertex2i(listPts[i].x,listPts[i].y);
        }
    }
    else if(j!=0)// this else part is for making selected points look red, as for this j!=0 
    {
        for(int i=0;i<listPts.size();i++)
        {
            if(i==j ) // make only the selected point red
            {
                glColor3f(1.0,0.0,0.0);
                glVertex2i(listPts[i].x,listPts[i].y);
            }
            else // rest all the points are same as before i.e. white
            {
                glColor3f(1.0,1.0,1.0);
                glVertex2i(listPts[i].x,listPts[i].y);
            }
        }
    }

    glEnd();
    glFlush();
} 
```

现在假设我有一组点。我只想在正确的子窗口中绘制相同的点，看看它是否有效。所以，我创建了一个按钮，当我按下按钮时，我想切换到正确的窗口并绘制一些东西。我在 VS2010 中使用了调试，并检查是否调用了绘图函数并且正在调用它，但屏幕上仍然没有任何内容。

这是我用来在第二个窗口中绘制的函数。

```
void drawDotWin2(vector<vec2> listPts)
{
    glBegin(GL_POINTS);
    glColor3f(1.0,1.0,1.0);

    for(int i=0;i<listPts.size();i++)
        {
            glVertex2i(listPts[i].x,listPts[i].y);
        }
    glEnd();
    glutWireTeapot (0.5);
    glFlush();
} 
```

当我按下按钮时。上面的函数被调用但没有任何反应。我的坐标系错了吗？我没有做太多设置坐标系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:32:49.920

我建议尽可能避免 GLUT 实用程序，尤其是在应用程序实现中并非绝对必要时；*glutCreateSubWindow*可能就是其中之一。

如果您需要将窗口拆分为不同的部分，请学习如何使用[glViewport](http://www.opengl.org/sdk/docs/man/xhtml/glViewport.xml)。

例如，如果主窗口有一个 800x600 像素的客户区，并且我想水平分割窗口，那么绘制例程将是：

```
void draw()
{
    // Draw on left side
    glViewport(0, 0, 400, 600);
    glClear(...);
    gluOrtho2D(0, 0, 400, 600);

    // ... DrawCommands1

    // Draw on left side
    glViewport(400, 0, 400, 600);
    glClear(...);
    gluOrtho2D(0, 0, 400, 600);

    // ... DrawCommands2
} 
```

这样，两幅图不重叠。在每一侧绘制的图元被定义的视口区域裁剪，以相对于主窗口客户区域的像素坐标定义。

投影矩阵（在上述情况下为 2D 正交）是相对于视口的，而不是相对于窗口区域的，实际上您不必担心视口位置。

另请注意，每个 GLUT 子窗口都会创建一个 OpenGL 上下文，实际上每个 GLUT 子窗口都拥有自己的状态，并且状态更改不会影响其他子窗口。相反，在我的回答中，这两个例程共享相同的 OpenGL 上下文。

# objective-c - 使用 CATransaction 将 NSButton 从一个点移动到另一个点，但之后我无法单击它

> ID：10468330
> 
> 赞同：0
> 
> 时间：2012-05-06T05:20:56.943
> 
> 标签：objective-c, cocoa, catransition

我使用下面的代码将带有动画的 NSButton 从一个点移动到另一个点，但是在我这样做之后我无法访问按钮，这意味着我无法单击它（它已被禁用）

```
[CATransaction begin];
    [CATransaction setValue:[NSNumber numberWithFloat:1.0] forKey:kCATransactionAnimationDuration];
    btn.layer.frame=CGRectMake(200, 100, 48,48);
    [CATransaction commit]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:53:43.900

您是否有理由使用 CATransaction 来执行此操作？您可以用这一行更改按钮框架，一切正常：

[btn.animator setFrame:NSMakeRect(200, 100, 48,48)];

（我对 CATransaction 没有任何经验，所以我不能说为什么这不起作用）

# cocoa-touch - 为什么 animateWithDuration 动画和完成块之间的暂停？

> ID：10468333
> 
> 赞同：7
> 
> 时间：2012-05-06T05:21:15.680
> 
> 标签：cocoa-touch, uiview, uinavigationcontroller, core-animation, uiviewanimationtransition

按照 Apple 的建议，我通过将后续调用`-animationWithDuration:animation:`置于对`completion:`的另一个调用块中来链接 UIView 动画`aanimateWithDuration:animation:completion:`，如下所示：

```
[UIView animateWithDuration:scaleDuration delay:0 options:UIViewAnimationOptionCurveEaseIn animations:^{
    // Scale the controllers' views down.
    self.view.transform = CGAffineTransformScale(self.view.transform, 0.8, 0.8);
} completion:^(BOOL finished) {
    // Transition to the new view and push on the new view controller.
    [UIView transitionWithView:self.view duration:1 options:UIViewAnimationOptionCurveLinear | UIViewAnimationOptionTransitionFlipFromLeft animations:^{
        [self pushViewController:viewController animated:NO];
    } completion:^(BOOL finished) {
        [UIView animateWithDuration:scaleDuration delay:0 options:UIViewAnimationOptionCurveLinear animations:
^{
            // Scale back to the original size.
            self.view.transform = CGAffineTransformScale(self.view.transform, 1.25, 1.25);
        } completion:nil];
    }];
}]; 
```

动画都执行正确的顺序，但它们之间有一个微小的延迟，尤其是在`-transitionWithView:duration:options:animations:completion:`调用之前。如何平滑动画步骤之间的过渡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:47:33.217

旁白：您以这种方式滥用导航控制器
有什么特别的原因*吗？*你不能把`presentViewController:animated:completion:`它的过渡风格设置为`UIModalTransitionStyleFlipHorizontal`吗？

回到你的问题：

我很确定口吃来自一个简单的事实，即`pushViewController:animated:`隐式必须加载要推送的视图控制器的视图，这需要一些时间。

所以如果你不能使用`presentViewController:animated:completion:`(or presentModalViewController:animated: if you have to support iOS 4) 方法，我鼓励你试试这个：

```
// ensure the view is already loaded when you invoke `pushViewController:animated:`
[viewController view];

// there is no strict need to calculate those in situ, so we do it up front
CGAffineTransform originalTransform = self.view.transform;
CGAffineTransform downscalingTransform = CGAffineTransformScale(originalTransform, 0.8, 0.8);

// I found it hard to read the block-in-a-block-in-a... while editing here, so I've taken them apart:
void (^scaleDownAnimation)() = ^{
    self.view.transform = downscalingTransform;
};

void (^restoreScaleAnimation)() = ^{
    self.view.transform = originalTransform;
};

void (^pushControllerAnimation)() = ^{
    [self pushViewController:viewController animated:NO];
};

void (^pushAnimationCompletion)(BOOL) = ^(BOOL unused) {
    [UIView animateWithDuration:scaleDuration
                          delay:0
                        options:UIViewAnimationOptionCurveLinear
                     animations:restoreScaleAnimation
                     completion:nil];
};

void (^downscaleCompletion)(BOOL) = ^(BOOL unused){
    UIViewAnimationOptions linearFlipFromLeft = UIViewAnimationOptionCurveLinear | UIViewAnimationOptionTransitionFlipFromLeft;
    [UIView transitionWithView:self.view
                      duration:1
                       options:linearFlipFromLeft
                    animations:pushControllerAnimation
                    completion:pushAnimationCompletion];
};

[UIView animateWithDuration:scaleDuration
                      delay:0
                    options:UIViewAnimationOptionCurveEaseIn
                 animations:scaleDown
                 completion:downscaleCompletion]; 
```

**请注意**，牛肉在前六行之内，其余的只是为了完整性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:06:46.910

正如你所描述的，我已经毫不拖延地链接了动画。

您正在使用 transitionWithView:duration:options:animations:completion: 动画块是对 pushViewController:animated: 的调用。这对我来说没有任何意义。

transitionWithView:duration:options:animations:completion 从一个子视图过渡到下一个子视图。

pushViewController:animated 是一种导航控制器方法，可将视图控制器推送到导航控制器堆栈上。将这两个一起使用对我来说毫无意义。

如果您希望缩放动画以推送结束，则只需直接从完成块中调用推送动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-17T15:30:59.647

以我的经验，“使用完成块链接动画”是有缺陷的（在子动画之间产生小的停顿）。我确保没有 loadView/viewDidLoad/viewWillAppear/viewWillLayoutSubviews 滥用发生。

完全相同的代码与“completion-block_chainig”结结巴巴，但如果我将它重新设计为使用关键帧，它就可以正常工作。

所以，而不是（例如）...

```
 UIView.animate(withDuration: 1, animations: {[weak self] in
            ...
            self?.view.layoutIfNeeded()
        }, completion: { [weak self] _ in
            UIView.animate(withDuration: 1, animations: {
                ...
                self?.view.layoutIfNeeded()
            }, completion: { [weak self] _ in
                UIView.animate(withDuration: 1, animations: {
                    ...
                    self?.view.layoutIfNeeded()
                }, completion: { [weak self] _ in
                    ...
                })
            })
        }) 
```

...我反而更喜欢...

```
 UIView.animateKeyframes(withDuration: 3, delay: 0, options: .calculationModeLinear, animations: {[weak self] in

            UIView.addKeyframe(withRelativeStartTime: 0, relativeDuration: 0.33, animations: {[weak self] in
                ...
                self?.view.layoutIfNeeded()
            })

            UIView.addKeyframe(withRelativeStartTime: 0.33, relativeDuration: 0.33, animations: {[weak self] in
                ...
                self?.view.layoutIfNeeded()
            })

            UIView.addKeyframe(withRelativeStartTime: 0.66, relativeDuration: 0.33, animations: {[weak self] in
                ...
                self?.view.layoutIfNeeded()
            })

        }, completion: { [weak self] _ in
            ...
        }) 
```

# ssl - 使用 SSL 进行客户端身份验证，无需任何客户端代码实现

> ID：10468334
> 
> 赞同：1
> 
> 时间：2012-05-06T05:21:51.450
> 
> 标签：ssl, authentication

我正在开发 Java Web 服务并使用 Tomcat 服务器。由于此应用程序将是 B2B，因此我们需要客户端身份验证。我们正在使用 openssl 创建证书。对于每个用户，我们将创建一个自签名证书，我们将通过邮件或其他方式发送它。现在问题来了，当客户端通过安全连接调用服务器时，客户端应该发送服务器提供的证书。我希望该客户端可以发送证书以进行客户端身份验证，而无需在客户端进行任何代码实现。有什么办法可以做到这一点？有人可以告诉我实施此操作所需的确切步骤吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T06:14:53.313

> 对于每个用户，我们将创建一个自签名证书，我们将通过邮件或其他方式发送它。

停在那儿。这已经很不安全了。这意味着您拥有用户的私钥。用户，并且只有用户，应该拥有用户的私钥。用户应该生成他自己的私钥，如果你坚持他自己的自签名证书，或者最好还是让 CA 签名。如果您出于任何原因需要，他应该将其发送给*您。*

你所做的完全是从头到尾，从法律/安全的角度来看完全没有价值。事实上，它包含重大的法律*风险*，您需要在继续之前了解这些风险。其中之一是完全丧失用户交易的不可否认性。这足以关闭您的业务。

# objective-c - Clang 和 gcc 选项来抑制未定义的消息警告？

> ID：10468338
> 
> 赞同：2
> 
> 时间：2012-05-06T05:23:12.637
> 
> 标签：objective-c, macruby

clang 和 gcc 是否可以选择禁止向对象发送未定义消息的警告？如果是这样，标志是什么？

使用铿锵声3.1：

```
test.mm:51:14: warning: instance method '-dfs_path:' not found (return type defaults to 'id')
            ([pathfinder dfs_path: graph, @[ NUM(start) ], NUM(goal), NUM(max_steps)])
            ~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

使用 gcc 4.2.1：

```
test.mm: In function ‘void test_path(objc_object*, objc_object*, int, int, int, BOOL)’:
test.mm:84: warning: no ‘-dfs_path:’ method found
test.mm:84: warning: (Messages without a matching method signature
test.mm:84: warning: will be assumed to return ‘id’ and accept
test.mm:84: warning: ‘...’ as arguments.)
test.mm:84: warning: no ‘-dfs_path:’ method found 
```

基本上，有问题的方法是在 MacRuby 中生成的，因此 Objective C 编译器在编译时并不知道它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:08:57.077

我在 Xcode 中发出的大部分来自 clang 的警告都带有关于在警告消息本身中解决该特定警告的信息。如果您正在手动运行 clang（或者没有看到这些），则可以使用 clang 选项来打开此行为：

```
-f[no-]diagnostics-show-option 
```

如果您`-fdiagnostics-show-option`用作编译器选项，那么您应该会看到警告中列出的选项，例如：

```
foo.m:73:1: warning: category is implementing a method which will also be implemented by its
            primary class [-Wobjc-protocol-method-implementation] 
```

这表明该`-Wobjc-protocol-method-implementation`选项导致错误，并且添加`-Wno-objc-protocol-method-implementation`通常会禁用它。

话虽如此，我建议不要关闭未定义方法的警告，方法定义会影响编译器处理返回值的方式，这会给你以后带来很多麻烦。

如果您没有适当的包含文件，您始终可以使用类别为该方法声明一个本地定义。不是最干净的方式（包括声明），但有时是必要的。

```
@interface class_you_are_having_issues_with ()
- (id)dfs_path: (id)unknownarg, ...
@end 
```

顺便说一句，我假设这是一个可变参数方法，因为这是您在 Objective-C 中使用逗号分隔的 args 的唯一一次。

希望这将在两个方面为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T12:50:49.140

尝试`-Wno-objc-method-access`- 在铿锵声中为我工作。

# php - php从字符串中获取数字

> ID：10468339
> 
> 赞同：7
> 
> 时间：2012-05-06T05:23:24.670
> 
> 标签：php, regex, preg-match, preg-match-all

我有这个字符串

> @[123:peterwateber] 你好 095032sdfsdf！@[589:zzzz]

我想得到**123 和 589**你怎么在 PHP 中使用正则表达式或其他东西？

注意：peterwateber 和 zzzz 只是示例。应考虑任何随机字符串

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T05:35:07.343

不要忘记前瞻，所以你不匹配`095032`：

```
$foo = '@[123:peterwateber] hello there 095032sdfsdf! @[589:zzzz]';
preg_match_all("/[0-9]+(?=:)/", $foo, $matches);
var_dump($matches[0]); // array(2) { [0]=> string(3) "123" [1]=> string(3) "589" } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T05:27:39.503

以下正则表达式将连续提取一个或多个数字字符：

```
preg_match_all('#\d+#', $subject, $results);
print_r($results); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T05:27:53.533

有一个函数叫做 preg_match_all

第一个参数接受正则表达式 - 以下示例显示 '匹配至少一个数字，后跟任意数量的数字。这将匹配数字。

第二个参数是字符串本身，您要从中提取的主题

第三个是一个数组，所有匹配的元素都将位于其中。所以第一个元素是 123，第二个是 589，依此类推

```
 preg_match_all("/[0-9]+/", $string, $matches); 
```

# java - 确定任务在 ScheduledThreadPoolExecutor 的 BlockingQueue 中的停留时间

> ID：10468341
> 
> 赞同：1
> 
> 时间：2012-05-06T05:24:20.067
> 
> 标签：java

我正在使用[ScheduledThreadPoolExecutor](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)并且我怀疑有时对可用线程数的未完成请求太多（是的......我可能需要调整线程数）。更具体地说，我想知道在计划任务触发后，任务在线程池的 BlockingQueue 中等待可用线程的时间。当 ScheduledThreadPoolExecutor 将任务添加到其内部队列 () 时，我似乎需要挂钩，`ScheduledThreadPoolExecutor.super.queue.add(task)`但查看 JDK 的 API 和代码似乎不是一个简单的方法。

想法和/或建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:41:14.143

你可以在你的任务中实现这个行为，来跟踪它自己的状态吗？

# iphone - UITableViewController 中心的 UIView

> ID：10468343
> 
> 赞同：3
> 
> 时间：2012-05-06T05:24:34.793
> 
> 标签：iphone, objective-c, ios, uiview, uitableview

无论滚动的位置如何，如何将从 UITableViewController 加载的UIView ( `loadingView`) 放在屏幕中心？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T08:23:41.290

您可以将视图添加到 tableview 的 superview 中，如下所示：

```
loadingView.center = self.tableView.center;
[self.tableView.superview addSubview:loadingView]; 
```

完成后将其删除（removeFromSuperview）。它将出现在表格顶部，以表格为中心，但不会随表格滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T05:37:46.747

将您的代码转换为 UIViewController 子类而不是 UITableViewController 子类。这样，您可以将加载视图添加到实际视图而不是表格。然后，符合`UITableViewDelegate`并`UITableViewDataSource`在您的 .h 中，设置委托并将表格添加为主视图的子视图。你甚至不会错过那个 ol' UITableViewController。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T08:20:53.163

而不是将 loadingView 添加到表的子视图中。改为这样做：

```
 [[UIApplication sharedApplication].keyWindow addSubview:loadingView]; 
```

这解决了必须将代码转移到 UIViewController

# google-app-engine - Google App Engine 调试服务器（本地主机）无法启动

> ID：10468348
> 
> 赞同：1
> 
> 时间：2012-05-06T05:25:16.567
> 
> 标签：google-app-engine, settings, localhost, config

我刚刚安装了最新的 GAE SDK 并创建了一个基本的 hello world 项目。我尝试在本地调试服务器并在控制台中遇到了这个问题。其他人有这个问题吗？

2012-05-06 01:20:33.770 java[467:407] [Java CocoaComponent 兼容模式]：启用 2012-05-06 01:20:33.772 java[467:407] [Java CocoaComponent 兼容模式]：设置超时SWT 到 0.100000 用法：[选项]

选项：--help、-h 显示此帮助信息并退出。--server=SERVER 用于确定最新 -s SERVER SDK 版本的服务器。--address=ADDRESS 本地机器上接口的地址 -a ADDRESS 绑定到（或 0.0.0.0 对于所有接口）。--port=PORT 本地机器上绑定的端口号。-p PORT --sdk_root=root 覆盖 SDK 所在的位置。--disable_update_check 禁用对较新 SDK 版本的检查。--generated_dir=dir 设置创建生成文件的目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:05:58.763

我在类似的帖子中找到了答案。我的运行配置文件已损坏。

“这是因为您的启动配置文件（位置：WORKSPACE/.metadata/.plugins/org.eclipse.debug.core/.launches）已损坏。解决此问题所需要做的就是删除现有的启动配置（在运行 > 运行配置中）”

这也是答案的链接。

[Eclipse Google 插件不会为 Web 应用程序启动服务器](https://stackoverflow.com/questions/6712270/eclipse-google-plug-in-doesnt-start-server-for-web-application)

-J

# c#-4.0 - 使用 ImpromptuInterface 时如何解决此枚举转换问题？

> ID：10468358
> 
> 赞同：2
> 
> 时间：2012-05-06T05:26:31.840
> 
> 标签：c#-4.0, dynamic, json.net, duck-typing, impromptu-interface

给定以下代码：

```
public enum Pet
{
    Cat,
    Dog
}

public interface IOwner
{
    Pet Pet
    {
        get;
        set;
    }
}

public class Owner : IOwner
{
    public Pet Pet
    {
        get;
        set;
    }
} 
```

以下测试失败：

```
[TestFixture]
public class ImpromptuInterfaceExample
{
    private Owner owner;
    private ExpandoObject dynamicOwner;

    [SetUp]
    public void SetUp()
    {
        owner = new Owner { Pet = Pet.Dog };
        string serializedOwner = JsonConvert.SerializeObject(owner);
        dynamicOwner = JsonConvert.DeserializeObject<ExpandoObject>(serializedOwner);
    }

    [Test]
    public void InvalidCastException()
    {
        var duckType = ImpromptuDictionary.Create<IOwner>(dynamicOwner);
        Assert.That(duckType.Pet, Is.EqualTo(owner.Pet)); // System.InvalidCastException : Invalid cast from 'System.Int64' to 'JsonSerializationDemo.Pet'.
    }

    [Test]
    public void RuntimeBinderException()
    {
        var duckType = dynamicOwner.ActLike<IOwner>();
        Assert.That(duckType.Pet, Is.EqualTo(owner.Pet)); // Microsoft.CSharp.RuntimeBinder.RuntimeBinderException : Cannot implicitly convert type 'long' to 'JsonSerializationDemo.Pet'. An explicit conversion exists (are you missing a cast?)
    }
} 
```

有没有办法正确解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:54:41.693

您的线路：

```
 var duckType = ImpromptuDictionary.Create<IOwner>(dynamicOwner); 
```

应该可以工作，但是在 ImpromptuInterface 中特别是 Enums 存在一个错误，现在已[在 6.0 版中修复](http://code.google.com/p/impromptu-interface/wiki/ChangeLog)。ImpromptuDictionary 尝试了几种在运行时强制类型的方法，并且为 Enums 使用了错误的方法。所以它现在有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T06:07:26.457

我认为，问题源于事实，即 Json 序列化器将枚举序列化为数字。但是当它将它反序列化为 expando 对象时，它不可能知道该属性实际上是一个枚举。这会在 expando 对象中产生整数值。

然后，这会混淆即兴界面并导致铸造代理异常。我认为这可以在这里解决，代理构建器将检查目标类型是否为枚举，并使用 in 到枚举的工作覆盖。但是你应该把它[带到官方页面](http://code.google.com/p/impromptu-interface/issues/list)。我不认为SO可以解决这个问题。

# python - 在python中打印特定行？

> ID：10468361
> 
> 赞同：1
> 
> 时间：2012-05-06T05:27:24.623
> 
> 标签：python, file, printing

到目前为止，我已经得到了这个代码。您输入一个数字，它应该读取文件中的特定行`packages.txt`并将其打印到 python shell。在下面的代码中，例如，如果您输入“3”，它将打印我不希望的第 1-3 行做。

`which = input('Which package would you like?: ')`

```
 with open('packages.txt') as f:
        i = 0
        for line in f:
            if i == (int(which)):
                break
            i += 1
            print (line) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:31:32.110

想想代码的流程以及何时`print (line)`被调用。

你能看出这段代码和你的代码之间的两个*非常*重要的区别吗？

```
which = input('Which package would you like?: ')

with open('packages.txt') as f:
    i = 1
    for line in f:
        if i == (int(which)):
            break
        i += 1
print (line) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T05:31:19.520

您可以`enumerate`通过`f`获取行的索引并在匹配时打印它`which`。我认为这是一个家庭作业问题，所以不在这里放完整的代码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T07:58:21.110

你可以简单地这样做：

`lines = open('packages.txt').readlines()`

现在你可以猜到剩下的了。

# c# - 如何从父窗口自定义用户控件

> ID：10468373
> 
> 赞同：0
> 
> 时间：2012-05-06T05:30:11.787
> 
> 标签：c#, wpf, xaml, user-controls

我想知道如何从我将用户控件放入其中的父窗口更改用户控件。

我有一个用户控件，其中有一个网格和数据网格。现在我想在我的窗口中更改数据网格属性......我想在我的网格中添加另一个控件。像这样的东西

```
<window>
<usercontrol>
<usercontrol.datagrid backcolor=#ff00000>
<usercontrol/>
<window/> 
```

或者我可以像这样的代码在用户控件网格中添加一个文本块：

```
<window>
<usercontrol.grid>
<textblock grid.row=1/>
<usercontrol.grid/>
<window/> 
```

用户控件中的所有元素都是**公共**的，因此我可以从 c# 代码进行更改，但我想使用**xaml**设计模式进行更改

在 Windows 窗体中，我创建了一个从数据网格视图继承的用户控件，然后我对其进行了自定义。我在 10 个窗口和第 11 个窗口中使用它，我需要稍微更改数据网格视图我不更改用户控件，因为它会更改所有窗口，所以我只是更改用户控件在第 11 个窗口中，请帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T09:12:26.313

我认为您应该在后面的 UserControl 代码中为 DataGrid 的 BackgroundColor（或您想要更改的任何属性）创建一个 DependencyProperty：

```
public static DependencyProperty GridColorProperty = DependencyProperty.Register("GridColor", typeof (Brush),
                                                                                         typeof (UserControl1),
                                                                                         new FrameworkPropertyMetadata(
                                                                                             null,
                                                                                             FrameworkPropertyMetadataOptions
                                                                                                 .AffectsRender));
        public Brush GridColor
        {
            get { return (Brush)GetValue(GridColorProperty); }
            set { SetValue(GridColorProperty, value);}
        } 
```

之后，您应该在 UserControl 的 XAML 中将 DataGrid 的 Color 属性绑定到它：

```
<DataGrid Background="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=YourControlType}, Path=GridColor}"/> 
```

现在您可以像这样使用控件：

```
<YourControlType GridColor="Green"/> 
```

至于控件添加，这取决于您要达到的目标。最直接的方法是从网格派生您的用户控件。或者可能来自 ContentControl 就足以满足您的目的

编辑：这就是您可以放入新控件的方式。从 Grid 派生控件：

```
<Grid x:Class="WpfApplication3.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:app="clr-namespace:WpfApplication3" mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <DataGrid Background="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=app:YourControlType}, Path=GridColor}"/>
</Grid> 
```

你会这样使用它：

```
<YourControlType GridColor="Green">
            <Button Grid.Row="1"/>
</YourControlType> 
```

但实际上这是一件很奇怪的事情，我最好从 ContentControl 派生它：

```
<ContentControl x:Class="WpfApplication3.YourControlType"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:app="clr-namespace:WpfApplication3" mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <ContentControl.Template>
        <ControlTemplate TargetType="ContentControl">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <DataGrid Background="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=app:YourControlType}, Path=GridColor}"/>
                <ContentPresenter Content="{TemplateBinding Content}" Grid.Row="1"/>
            </Grid>
        </ControlTemplate>
    </ContentControl.Template>
</ContentControl> 
```

这就是你如何使用它：

```
<YourControlType GridColor="Green">
       <Button/>
</YourControlType> 
```

作为另一种可能性，您可以为控件的内容创建依赖属性。后面的代码：

```
public static readonly DependencyProperty InnerContentProperty =
            DependencyProperty.Register("InnerContent", typeof (FrameworkElement), typeof (YourControlType),
                                        new FrameworkPropertyMetadata(default(FrameworkElement),
                                                                      FrameworkPropertyMetadataOptions.AffectsRender));

        public FrameworkElement InnerContent
        {
            get { return (FrameworkElement) GetValue(InnerContentProperty); }
            set { SetValue(InnerContentProperty, value); }
        } 
```

用户控件的 XAML：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <DataGrid Background="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=WpfApplication3:UserControl1}, Path=GridColor}"/>
    <ContentControl Grid.Row="1" Content="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=app:YourControlType}, Path=InnerContent}"/>
</Grid> 
```

用法：

```
<YourControlType GridColor="Green">
    <YourControlType.InnerContent>
        <Button/>
    </YourControlType.InnerContent>
</YourControlType> 
```

但是，如果您只想快速简单地回答最初的问题，那么您无法直接从 XAML 解决 UserControl 的内部控件。= )

# java - Android - 调整微调器以不选择任何内容或在第一选择上不执行任何操作

> ID：10468377
> 
> 赞同：1
> 
> 时间：2012-05-06T05:31:23.350
> 
> 标签：java, android, spinner

如何让我的微调器不自动启动？我在这里看到了一些解决方案，但它们让我感到困惑。当活动开始时，下载立即开始，这不是需要发生的。如何允许用户进行选择而不是自动下载第一项？

这是代码：

```
public class SpinnerActivity extends Activity {

public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
private ProgressDialog mProgressDialog;

Spinner spDownloadFrom;
private ArrayAdapter<CharSequence> spinnerArrayAdapter;
String url[] = {
        "http://www.becker.cl/bases.pdf",
        "http://www.pitt.edu/documents/campusmap0607.pdf",
        "http://www.aara.ca/reg3317/web_page_doc.pdf",
        "http://www.dataprotection.ie/documents/guidance/GuidanceFinance.pdf",
        "http://www.fmbb2012.com/JumpingQualifica1.pdf",
        "http://www.consulatdumaroc.ca/coloniefh22012.pdf",
        "http://www.rgrdlaw.com/media/cases/140_Complaint.pdf" };
String name[] = {"bases.pdf", "campusmap0607.pdf", "web_page_doc.pdf",
        "GuidanceFinance.pdf", "JumpingQualifica1.pdf",
        "coloniefh22012.pdf", "140_Complaint.pdf", };

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mProgressDialog = new ProgressDialog(SpinnerActivity.this);
    mProgressDialog.setMessage("Please be patient, file downloading...");
    mProgressDialog.setIndeterminate(false);
    mProgressDialog.setMax(100);
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

    spDownloadFrom = (Spinner) findViewById(R.id.Spinner01);

    spinnerArrayAdapter = new ArrayAdapter<CharSequence>(this,
            android.R.layout.simple_spinner_item, name);
    spinnerArrayAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spDownloadFrom.setAdapter(spinnerArrayAdapter);

    spDownloadFrom.setOnItemSelectedListener(new SpinnerListener(
            spDownloadFrom));
}

public class SpinnerListener implements OnItemSelectedListener {
    Spinner sp;

    public SpinnerListener(View v) {
        sp = (Spinner) findViewById(v.getId());
    }

    @Override
    public void onItemSelected(AdapterView<?> parent, View v, int arg2,
            long arg3) {
        // Call to download class
        startDownload(arg2);

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
}

private void startDownload(int position) {
    DownloadFile downloadFile = new DownloadFile(position);
    downloadFile.execute(url[position]);
}

class DownloadFile extends AsyncTask<String, Integer, String> { // put your
                                                                // download
                                                                // code
    private int position;

    public DownloadFile(int position) {
        this.position = position;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        mProgressDialog.show();
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
        super.onProgressUpdate(progress);
        mProgressDialog.setProgress(progress[0]);
    }

    @Override
    protected String doInBackground(String... aurl) {
        try {

            URL url = new URL(aurl[0]);
            URLConnection connection = url.openConnection();

            connection.connect();
            int fileLength = connection.getContentLength();
            int tickSize = 2 * fileLength / 100;
            int nextProgress = tickSize;

            Log.d(

            "ANDRO_ASYNC", "Lenght of file: " + fileLength);

            InputStream input = new BufferedInputStream(url.openStream());

            String path = Environment.getExternalStorageDirectory()
                    + "/Android/Data/"
                    + getApplicationContext().getPackageName() + "/files/";
            File file = new File(path);
            file.mkdirs();
            File outputFile = new File(file, name[position]);

            OutputStream output = new FileOutputStream(outputFile);

            byte data[] = new byte[1024 * 1024];
            long total = 0;
            int count;
            while ((count = input.read(data)) != -1) {
                total += count;
                if (total >= nextProgress) {
                    nextProgress = (int) ((total / tickSize + 1) * tickSize);
                    this.publishProgress((int) (total * 100 / fileLength));
                }
                output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
            mProgressDialog.dismiss();

        } catch (Exception e) {
            Log.e("Spinner", "exception", e);
        }
        return null;
    }

    protected void onProgressUpdate(String... progress) {
        Log.d("Downloading", progress[0]);

    }

    @Override
    protected void onPostExecute(String unused) {

        mProgressDialog.dismiss();

        File file = new File(Environment.getExternalStorageDirectory()
                + "/Android/Data/"
                + getApplicationContext().getPackageName() + "/files/"
                + name[position]);
        Intent testIntent = new Intent(Intent.ACTION_VIEW);
        testIntent.setType("application/pdf");
        Intent intent = new Intent();
        intent.setAction(Intent.ACTION_VIEW);
        Uri uri = Uri.fromFile(file);
        intent.setDataAndType(uri, "application/pdf");
        try {
            startActivity(intent);
        } catch (ActivityNotFoundException e) {
            Toast.makeText(SpinnerActivity.this,
                    "No Application Available to View PDF",
                    Toast.LENGTH_LONG).show();
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T07:09:37.313

试试这个代码

```
public class SpinnerActivity extends Activity {

    public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
    private ProgressDialog mProgressDialog;

    Spinner spDownloadFrom;
    private ArrayAdapter<CharSequence> spinnerArrayAdapter;
    String url[] = {
            "http://www.becker.cl/bases.pdf",
            "http://www.pitt.edu/documents/campusmap0607.pdf",
            "http://www.aara.ca/reg3317/web_page_doc.pdf",
            "http://www.dataprotection.ie/documents/guidance/GuidanceFinance.pdf",
            "http://www.fmbb2012.com/JumpingQualifica1.pdf",
            "http://www.consulatdumaroc.ca/coloniefh22012.pdf",
            "http://www.rgrdlaw.com/media/cases/140_Complaint.pdf" };
    String name[] = { "bases.pdf", "campusmap0607.pdf", "web_page_doc.pdf",
            "GuidanceFinance.pdf", "JumpingQualifica1.pdf",
            "coloniefh22012.pdf", "140_Complaint.pdf", };
    private boolean checkFlag = false;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mProgressDialog = new ProgressDialog(SpinnerActivity.this);
        mProgressDialog.setMessage("Please be patient, file downloading...");
        mProgressDialog.setIndeterminate(false);
        mProgressDialog.setMax(100);
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

        spDownloadFrom = (Spinner) findViewById(R.id.Spinner01);

        spinnerArrayAdapter = new ArrayAdapter<CharSequence>(this,
                android.R.layout.simple_spinner_item, name);
        spinnerArrayAdapter
                .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spDownloadFrom.setAdapter(spinnerArrayAdapter);

        SpinnerListener spListener = new SpinnerListener();
        spDownloadFrom.setOnItemSelectedListener(spListener);
    }

    public class SpinnerListener implements OnItemSelectedListener {
        public SpinnerListener() {
        }

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int position, long arg3) {
            if(checkFlag){
                startDownload(position);
            }
            checkFlag = true;

        }
        @Override
        public void onNothingSelected(AdapterView<?> arg0) {

        }
    }

    private void startDownload(int position) {
        DownloadFile downloadFile = new DownloadFile(position);
        downloadFile.execute(url[position]);
    }

    class DownloadFile extends AsyncTask<String, Integer, String> { // put your
                                                                    // download
                                                                    // code
        private int position;

        public DownloadFile(int position) {
            this.position = position;
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            mProgressDialog.show();
        }

        @Override
        protected void onProgressUpdate(Integer... progress) {
            super.onProgressUpdate(progress);
            mProgressDialog.setProgress(progress[0]);
        }

        @Override
        protected String doInBackground(String... aurl) {
            try {

                URL url = new URL(aurl[0]);
                URLConnection connection = url.openConnection();

                connection.connect();
                int fileLength = connection.getContentLength();
                int tickSize = 2 * fileLength / 100;
                int nextProgress = tickSize;

                Log.d(

                "ANDRO_ASYNC", "Lenght of file: " + fileLength);

                InputStream input = new BufferedInputStream(url.openStream());

                String path = Environment.getExternalStorageDirectory()
                        + "/Android/Data/"
                        + getApplicationContext().getPackageName() + "/files/";
                File file = new File(path);
                file.mkdirs();
                File outputFile = new File(file, name[position]);

                OutputStream output = new FileOutputStream(outputFile);

                byte data[] = new byte[1024 * 1024];
                long total = 0;
                int count;
                while ((count = input.read(data)) != -1) {
                    total += count;
                    if (total >= nextProgress) {
                        nextProgress = (int) ((total / tickSize + 1) * tickSize);
                        this.publishProgress((int) (total * 100 / fileLength));
                    }
                    output.write(data, 0, count);
                }

                output.flush();
                output.close();
                input.close();
                mProgressDialog.dismiss();

            } catch (Exception e) {
                Log.e("Spinner", "exception", e);
            }
            return null;
        }

        protected void onProgressUpdate(String... progress) {
            Log.d("Downloading", progress[0]);

        }

        @Override
        protected void onPostExecute(String unused) {

            mProgressDialog.dismiss();

            File file = new File(Environment.getExternalStorageDirectory()
                    + "/Android/Data/"
                    + getApplicationContext().getPackageName() + "/files/"
                    + name[position]);
            Intent testIntent = new Intent(Intent.ACTION_VIEW);
            testIntent.setType("application/pdf");
            Intent intent = new Intent();
            intent.setAction(Intent.ACTION_VIEW);
            Uri uri = Uri.fromFile(file);
            intent.setDataAndType(uri, "application/pdf");
            try {
                startActivity(intent);
            } catch (ActivityNotFoundException e) {
                Toast.makeText(SpinnerActivity.this,
                        "No Application Available to View PDF",
                        Toast.LENGTH_LONG).show();
            }
        }
    }
} 
```

# android - 有什么方法可以向用户显示输入文本的格式，例如 ___/__/__？

> ID：10468381
> 
> 赞同：2
> 
> 时间：2012-05-06T05:32:35.100
> 
> 标签：android, format, android-edittext, textinput

我的 Activity 中有一个 EditText，用户必须以我想要的格式在其中输入日期，例如`____/__/__`. 有没有办法在 Android 的 EditText 中显示这种格式，比如某些编程语言的掩码文本框？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:33:31.743

```
editText.setHint("____/__/__"); 
```

或者

```
<EditText android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:hint="____/__/__"/> 
```

编辑

我会推荐一个`DatePicker`虽然而不是让用户输入数字和斜线。如果`DatePicker`不是一个选项，我会推荐 3 个 EditText，每个都有自己的提示，当它们达到自动大小时，它们可能会自动在彼此之间移动。

```
[2012]/[01]/[01] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T06:02:35.140

您可以在它们之间使用“/”的文本视图来分离 Edittexts，然后将它们连接起来......

# mysql - MYSQL - 想要选择一些行，有时该字段不存在，但我想在该字段上使用 WHERE

> ID：10468384
> 
> 赞同：1
> 
> 时间：2012-05-06T05:33:20.600
> 
> 标签：mysql, sql, left-join

好吧，这很难解释...

我有以下表格：

```
table : words
table: word_progress
table: word_set

foreign keys:
words.id = word_set.word_id
word_progress.word_id = words.id
word_progress.user_id = users.id 
```

基本上一个词在一个词集中。word_progress（它对某个单词进行评分）与 user_id 和 word_id 相关。

问题是有时在 word_progress 中没有 user_id 和 word_id 的条目。但是当它在那里时，我希望能够在查询的 WHERE 部分中使用 word_progress。但如果它不存在，我不会。我目前的工作是在运行语句之前，我执行“将 IGNORE IF EXISTS 插入 work_progress (word_id,user_id) 值 (?,?)”以确保其存在

我有这个查询

```
select 
words.* , 
word_progress.progress from words

left join word_progress on word_progress.word_id = words.id
left join word_set on word_set.id = words.word_set_id        

where word_set.id = ?  and word_progress.user_id = ? 
```

但是...问题是有时该单词没有 word_progress 条目

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:37:07.277

您已经左加入，因此当没有可用数据时，您将获得-fields`null`的值。`word_progress`只需像这样检查：

```
...
and
  (
    word_progress.user_id is null
  or
    word_progress.user_id = ?
  ) 
```

另一种方法是将用户限制直接添加到`join`-criteria 中，如下所示：

```
...
left join word_progress
  on word_progress.word_id = words.id
  and word_progress.user_id = ?
... 
```

并从`where`-part 中删除该标准。

请注意，在这两种情况下，您都必须在以后的代码中正确处理`null`-cases 。`progress`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:57:22.193

是的，这是模棱两可的：“我希望能够在查询的 WHERE 部分使用 word_progress。但如果它不存在，我不会。”

在左连接中，如果没有 word_progress 匹配一个单词，你仍然会得到该单词的结果行，只是 word_progress 的所有字段都将为空。

word_set 也一样：没有对应的 word_set，那么 word_set.id 和其余的都是空的。

所以在你的 where 子句中包含 'is null' 或 'is not null' 取决于你想要什么......想想那个案例，这就是你留下的模棱两可的地方。或者请记住，如果 a 或 b 为空（即使它们都为空），则 'a = b' 为假，因此请设计适合的 where 子句。

# ios - 如何以编程方式使用 UIView autoresizingMask 属性？

> ID：10468389
> 
> 赞同：60
> 
> 时间：2012-05-06T05:33:54.487
> 
> 标签：ios, objective-c, swift, uiview, autoresizingmask

我已经用 Interface Builder 布置了一些子视图，但我想用代码来代替。

我已阅读 有关设置属性的[UIView 文档。](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/c/tdef/UIViewAutoresizing)我正在寻找关于如何使用提供的各种掩码（例如，等）来翻译*支柱*和*弹簧*`view.autoresizingMask`的合乎逻辑的解释。**`UIViewAutoresizingFlexibleLeftMargin`**

 *** * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-05-06T12:26:47.930

为视图设置自动调整大小掩码时，使用按位包含 OR ( `|`) (Objective-C) 或数组 (Swift 2, 3, 4) 来指定**springs**和**struts**。

*   **弹簧**通过指定掩码（分别为 Objective-C 或 Swift）来表示：

    *   垂直弹簧： `UIViewAutoresizingFlexibleHeight`或`.flexibleHeight`

    *   水平弹簧： `UIViewAutoresizingFlexibleWidth`或`.flexibleWidth`

*   **Struts**由缺少四个“灵活边距”掩码之一来表示（即，如果支柱不存在，则指定该边距的掩码）：

    *   `UIViewAutoresizingFlexibleLeftMargin`或者`.flexibleLeftMargin`

    *   `UIViewAutoresizingFlexibleRightMargin`或者`.flexibleRightMargin`

    *   `UIViewAutoresizingFlexibleTopMargin`或者`.flexibleTopMargin`

    *   `UIViewAutoresizingFlexibleBottomMargin`或者`.flexibleBottomMargin`

例如，具有*水平弹簧*和*顶部和底部支柱*的视图将具有指定为灵活的宽度和左右边距：

**斯威夫特 3 和 4**

```
mySubview.autoresizingMask = [.flexibleWidth, .flexibleLeftMargin, .flexibleRightMargin] 
```

**斯威夫特 2**

```
mySubview.autoresizingMask = [.FlexibleWidth, .FlexibleLeftMargin, .FlexibleRightMargin] 
```

**斯威夫特 1.2**

```
mySubview.autoresizingMask = .FlexibleWidth | .FlexibleLeftMargin | .FlexibleRightMargin 
```

**Objective-C**

```
mySubview.autoresizingMask = (UIViewAutoresizingFlexibleWidth |    
                              UIViewAutoresizingFlexibleLeftMargin |  
                              UIViewAutoresizingFlexibleRightMargin); 
```

![在此处输入图像描述](../Images/a7e95324c58c47680ae20f3bb44f8924.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-06T05:54:09.267

`UIViewAutoResizingMask`s 就是我们所说的“支柱”和“弹簧”。考虑一下：你有一个大正方形，里面有一个小正方形。为了使该正方形完全居中，您必须从大正方形的每个内侧边缘设置一个固定宽度，以对其进行约束。这些是支柱。

另一方面，弹簧的工作更像是`UIView`在旋转过程中。假设我们的视图必须保持在屏幕底部，居中对齐（很像 a `UIToolbar`）。我们想让它的顶部弹簧保持灵活，这样当视图从 460 像素旋转到 320 像素时，它相对于屏幕现在更改的尺寸保持相同的位置。在 IB 中突出显示其中一个弹簧等于设置适当`UIViewAutoResizingMask`的弹簧，特别突出顶部弹簧类似于调用`myView.autoResizingMask = UIViewAutoresizingFlexibleTopMargin`.

值可以串联使用，方法是将它们括在一对括号中并使用类似的或运算符`myView.autoResizingMask = (UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleLeftMargin)`

掩码向您报告数字，因为它们是 an 的 typdef，`NSUInteger`而这些是苹果分配给它们的标志。Cmd+单击一个以查看其方法定义。**

# iphone - 如何在 iPhone 应用程序的不同文件中为 UIAlertview 设置委托

> ID：10468399
> 
> 赞同：2
> 
> 时间：2012-05-06T05:35:55.440
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ipad

好的，所以我对 iPhone、Objective C 和 Cocoa Touch 的编程有点陌生，但无法弄清楚这一点。当委托是自我时有很多信息，但我试图将其发送到另一个文件。

这是一些代码...我有以下方法（我通常将其称为函数，但我认为方法是正确的术语）`appDelegate.m`

`[GameUtil showAlertViewWithTag:1 delegate:self withTitle:@"" message:msg cancelButtonTitle:@"New game" otherButtonTitles:@"Main Menu", nil];`

我已经正确设置了showAlertViewWithTag`GameUtil.h`并且`.m`它工作正常。

我遇到的问题是`delegate:self`部件......就目前而言，当单击警报视图上的按钮时，它将转到`-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex`位于我的位置`appDelegate.m`（当使用 self 作为委托时，这当然是预期的）。

但是我希望它在单击按钮时将其发送到`-(void)alertView:..`另一个名为`playField.m`.

我正确设置了alertview `playField.m`（已通过在playField.m 中使用delegate:self 调用alertview 进行了测试）。

基本上，我对如何告诉 appDelegate.m 中的 alertview 使用 playField.m 中的委托而不是委托：self 感到困惑。

我想我需要#import playField.m 或 .h at 到 appDelegate.m 但除此之外，我迷失了所有@protocol @interface 的东西。

小步骤会很有帮助，例如“您需要将 XYZ 放在 playField.h 的顶部，将 ABC 放在 playField.m 的顶部”。

我希望这实现起来相当简单，而且我只是缺少一些简单的东西。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T05:50:05.653

首先，即使这样做的结果是委托方法将在另一个文件中，您也应该将其视为“委托是另一个对象”。
在您的情况下，委托对象是 self，即 App Delegate 对象。（因为您在应用程序委托实现中编写此代码）

为了使委托成为另一个对象，您首先需要在您的应用程序委托中访问该对象的实例。

我假设您的 playField 文件包含一个 playField 类。（顺便说一句，我会称它为 PlayField，类通常是大写的，而对象（类的实例）不是，尽管它可以工作。

在某个地方，你需要实例化一个 playField 对象，你在某个地方做过吗？这个看起来像：

```
playField *pf=[[playField alloc] init]; 
```

如果您还没有这样做，请在 showAlertViewCode 上方进行。
为了让这些类在您的 appDelegate 中可用，请添加：

```
#import "playField.h" 
```

在您的 appDelegate 文件之上。

然后在您的 alertview 代码中，将 self 替换为您刚刚创建的对象：

```
[GameUtil showAlertViewWithTag:1 delegate:pf withTitle:@"" message:msg cancelButtonTitle:@"New game" otherButtonTitles:@"Main Menu", nil]; 
```

现在您的委托是 pf 对象，它是 playField 的一个实例，因此将从您的 playField.m 实现文件中调用委托方法。

希望这是有道理的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:53:29.283

```
[GameUtil showAlertViewWithTag:1 delegate:self withTitle:@"" message:msg cancelButtonTitle:@"New game" otherButtonTitles:@"Main Menu", nil]; 
```

在上面的行中，如果您使用了属性，请将 delegate:self 更改为 delegate:GameUtil 或 delegate:self.GameUtil。

在 GameUtil.h 文件中，添加`<UIAlertViewDelegate>`到 @Interface 行的末尾。

# java - 旧的“Java 找不到主类”错误

> ID：10468405
> 
> 赞同：3
> 
> 时间：2012-05-06T05:37:02.223
> 
> 标签：java, eclipse, class, jar, main

我知道这个问题已经被问过很多次了，但是我已经完成了我的研究，我的简单测试程序仍然无法在双击时运行。

当我从 jar (java -jar Test.jar) 运行程序时，它会运行良好，只是双击失败。

我在 64 位 Windows 7 Pro 上的 Eclipse 中创建了一个简单的类，使用 JRE 7 并制作了一个 Jar 文件（已尝试 Runnable）

```
public class Test {
    public static void main(String[] args){
        System.out.println("nope");
    }
} 
```

基本设置的图像 ![http://i48.tinypic.com/1zh36t2.png](../Images/4f44d68a4cf964e127bb85b3a53e4627.png)

这是我尝试过的（我记得）：

检查清单并确保类拼写正确，并在主类行的末尾添加了两个额外的空格

类包含在 jar 中

尝试过 Runnable Jar 和普通 Jar

在普通罐子上，我包括了主类选项并选择了类

检查 ftype 并在 cmd 中键入 java 以查看是否出现选项

我尝试了其他选项，但我不记得它们了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T05:40:48.227

对我来说，这听起来像是一个文件关联问题：您需要确保将 Windows 设置为以正确的方式将 .jar 文件与 java.exe 关联起来。

查看答案：[在 Windows 上运行 JAR 文件](https://stackoverflow.com/questions/394616/running-jar-file-in-windows)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T05:43:55.180

双击运行时路径名中有空格，我遇到了问题。当路径中有空格时，jar 不会使用双击执行，而是使用 java -jar EscapedPathToJarOrQuotedPathToJar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:26:52.073

根据我对[JAR 文件规范](http://docs.oracle.com/javase/6/docs/technotes/guides/jar/jar.html#Name-Value%20pairs%20and%20Sections)的阅读，冒号后面应该有一个空格，类名后面应该有 0 个空格。任何额外的前导或尾随空格都*可能*最终包含在名义类名中，这*可能*导致`java`命令无法找到真正的入口点类名。

# automapper - Automapper 和深度加载

> ID：10468408
> 
> 赞同：1
> 
> 时间：2012-05-06T05:37:33.910
> 
> 标签：automapper

我有一个关于自动映射“深度加载”的实体框架对象的问题。我有一个 Project 对象，它有一个名为 Tasks 的成员，它是一个集合。每个任务都有一个名为 Works 的成员，它是一个集合。当项目被深度加载时，这些任务及其 Works 成员都会被填充。它看起来像这样：

```
-- Project
    -- Task 1
        -- Work 1
        -- Work 2
    -- Task 2
        -- Work 3 
```

我已经想出了如何使用这样的解析器映射 1 级深度：

```
CreateMap<DataAccess.Task, Entities.Task>()
            .ForMember(obj => obj.Description, obj => obj.MapFrom(src => src.Description))
            .ForMember(obj => obj.Estimate, obj => obj.MapFrom(src => src.Estimate))
            .ForMember(obj => obj.Id, obj => obj.MapFrom(src => src.ID))
            .ForMember(obj => obj.ProjectId, obj => obj.MapFrom(src => src.Project))
            .ForMember(obj => obj.TaskName, obj => obj.MapFrom(src => src.TaskName))
            .ForMember(obj => obj.Visible, obj => obj.MapFrom(src => src.Visible))
            .ForMember(obj => obj.WorkItems, obj => obj.ResolveUsing<WorkItemsResolver>().FromMember(src => src.Works));

public class WorkItemsResolver : ValueResolver<EntityCollection<DataAccess.Work>, ICollection<Entities.Work>>
{
    #region Overrides of ValueResolver<List<Task>,List<Task>>

    protected override ICollection<Entities.Work> ResolveCore(EntityCollection<DataAccess.Work> source)
    {
        Mapper.EntitiesMapper entitiesMapper = new EntitiesMapper(); 
        return source.Select(wk => entitiesMapper.Map<Entities.Work>(wk)).ToList();
    }

    #endregion
} 
```

但是，我无法弄清楚如何深入 2 层，即能够映射顶级对象（项目）并让它的子列表（及其子列表）也映射到它们的伴随业务对象。

有谁知道 Automapper 是否可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:35:56.973

每个 Entity 对象都应该有一个对应的 DataAccess 对象。您已经有一个任务映射，现在您需要一个用于工作。此外，不要使用单独的 ValueResolver。您可以使用 ForMember 中的 lambda 重载来做任何您需要的事情。

```
CreateMap<DataAccess.Task, Entities.Task>()
    // when names match on both sides, there is no need to call ForMember
    //.ForMember(obj => obj.Description, obj => obj.MapFrom(src => src.Description))
    //.ForMember(obj => obj.Estimate, obj => obj.MapFrom(src => src.Estimate))
    //.ForMember(obj => obj.Id, obj => obj.MapFrom(src => src.ID))
    .ForMember(obj => obj.ProjectId, obj => obj.MapFrom(src => src.Project))
    //.ForMember(obj => obj.TaskName, obj => obj.MapFrom(src => src.TaskName))
    //.ForMember(obj => obj.Visible, obj => obj.MapFrom(src => src.Visible))
    .ForMember(obj => obj.WorkItems, obj => obj.ResolveUsing(src =>
        Mapper.Map<IEnumerable<DataAccess.Work>>(src.Works)))
;

CreateMap<DataAccess.Work, Entities.Work>()
    // only call ForMember on properties that don't map automatically
; 
```

由于您为对象层次结构中的第 2 级深度创建了映射，因此您只需在 ResolveUsing lambda 重载中调用 Mapper.Map。

# coronasdk - 故事板 - 出现多个场景 enterScene/existScene - 这段代码有什么问题？

> ID：10468417
> 
> 赞同：0
> 
> 时间：2012-05-06T05:41:02.123
> 
> 标签：coronasdk

花了几个小时试图在这里解决一个故事板问题。我已经修剪了一个复制它的示例项目。

问题：

*   从场景 1 到场景 2，然后回到场景 1，然后在场景中切换几次后，我得到以下信息：
*   进入场景时，日志显示多个 enterScene/exitScene 被触发
*   似乎可能正在注册多个背景触摸侦听器，但是我试图在 exitScene 函数中删除这些
*   我在试用版：2011.704 (2011.12.8)

输出

```
<code>
-- Click on background to go back to screen_example1

storyboard.gotoScene( screen_example1)
screen_example1: enterScene

storyboard.gotoScene( screen_example1)
screen_example1: exitScene
screen_example1: enterScene

storyboard.gotoScene( screen_example1)
screen_example1: exitScene
screen_example1: enterScene

storyboard.gotoScene( screen_example1)
screen_example1: exitScene
screen_example1: enterScene

.
.
.
etc
</code> 
```

代码：三个文件：主文件和两个场景文件：

主程序.lua

```
<code>
display.setStatusBar( display.HiddenStatusBar )
local storyboard = require "storyboard"
storyboard.gotoScene( "screen_example1" )
</code> 
```

screen_example1.lua

```
<code>
local storyboard =  require( "storyboard" )
local scene = storyboard.newScene()

local function onScreenTouch( event )
    if event.phase == "began" then
        print("")
        storyboard.gotoScene( "scene_towerView")  
    end
end

function scene:createScene( event )
    print ("screen_example1 - createScene")
    local image = display.newImage( "bg.jpg" )
    scene.view:insert( image )
end

function scene:enterScene( event )
    print ("screen_example1: enterScene")
    scene.view:addEventListener( "touch", onScreenTouch )
end

function scene:exitScene( event )
    print ("screen_example1: exitScene")
    scene.view:removeEventListener("touch", onScreenTouch)
end

-- Scene Listeners
scene:addEventListener( "createScene", scene )
scene:addEventListener( "enterScene", scene )
scene:addEventListener( "exitScene", scene )
scene:addEventListener( "destroyScene", scene )

return scene
</code> 
```

scene_towerView.lua

```
<code>
local storyboard =  require( "storyboard" )
local scene = storyboard.newScene()

local function onScreenTouch( event )
    if event.phase == "began" then
        print("")
        print("storyboard.gotoScene( screen_example1)")
        storyboard.gotoScene( "screen_example1")
    end
end

-- Scene Handlers

function scene:createScene( event )
    print ("TowerScene - createScene")

    -- -- Background Image
    local image = display.newImage( "bg2.jpg" )
    scene.view:insert( image )
end

function scene:enterScene( event )
    print ("TowerScene - enterScene")
    scene.view:addEventListener( "touch", onScreenTouch )
end

-- Scene Listeners
scene:addEventListener( "createScene", scene )
scene:addEventListener( "enterScene", scene )
scene:addEventListener( "exitScene", scene )
scene:addEventListener( "destroyScene", scene )

return scene
</code> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:56:08.280

您是否尝试在触摸事件代码的末尾添加“return true”？这让我困扰了最长时间。

[Corona/Lua 中的不同层](https://stackoverflow.com/questions/6114817/different-layers-in-corona-lua)

ķ

# ios - 关闭应用程序时是否取消了 UILocalNotification？

> ID：10468418
> 
> 赞同：0
> 
> 时间：2012-05-06T05:41:03.550
> 
> 标签：ios, uilocalnotification

我创建了 UILocalNotification 然后我安排了许多通知。如果应用程序关闭，这些预定的通知会被取消吗？

如果它将被取消，我是否必须在每次加载应用程序时都安排它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T05:45:00.663

不，通知的全部目的是在应用当前未运行时通知用户某些事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T14:25:49.223

**不**，`UILocalNotifications`一旦它们被调度，它们就会被操作系统接管，所以即使它们已经退出并从“后台运行模式”中删除，它们也会熄灭。

所以不，你不需要在应用程序启动时重新安排它们，除非你想安排更多。

`UILocalNotifications`可以在[这里](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)找到完整的指南。

# javascript - 在任意 Javascript 正则表达式中检索捕获组的数量？

> ID：10468419
> 
> 赞同：1
> 
> 时间：2012-05-06T05:41:13.723
> 
> 标签：javascript, regex

我想知道正则表达式产生的捕获组的数量。有没有比以下更好的方法？

```
function getRegExpCaptureGroupsNum(r) {
    return Array.prototype.slice.call(new RegExp(r.source + '|').exec(''), 0).length - 1
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T07:57:08.680

我认为您不需要`Array.slice`这里的方法。这就足够了：

```
function getRegExpCaptureGroupsNum(r) {
    return RegExp(r.source + '|').exec('').length - 1;
} 
```

# mongodb - 使用 PHP 在 Mongo 中的 GroupBy

> ID：10468421
> 
> 赞同：1
> 
> 时间：2012-05-06T05:41:26.667
> 
> 标签：mongodb, group-by, mongodb-php, mongodb-query

我正在尝试在 mongoDB 上进行组查询，但我得到了错误的结果，并且所有的调整都不能解决我的问题。

我有一个具有以下架构的集合（action_ 是一个计数器）

```
"_id": ObjectId(""),
"action_1": 3,
"action_2": 2,
"action_4": 0,
"shop": ObjectId(""),
"user": ObjectId(""),
"action_3": 33 
```

我需要每个用户汇总所有商店的所有计数器，我已经这样做了：

```
$keys = array("action_1"=>1, "action_2"=>1, "action_3"=>1, "action_4"=>1); 
$initial = array("action_1"=>0, "action_2"=>0, "action_3"=>0, "action_4"=>0); 
$reduce = "function (obj, prev) { 
    prev.action_1 += obj.action_1; 
    prev.action_2 += obj.action_2; 
    prev.action_3 += obj.action_3; 
    prev.action_4 += obj.action_4; 
}";
$condition = array('user' => $user_id);
$g = $collection->group($keys, $initial, $reduce, $condition); 
```

我得到的结果是一组提取值的文档。我需要一个关联数组的数组，并且每个用户都有类似的东西：

```
array ("user") {
    action_1 => sum, //integer
    action_2 => sum,
    action_3 => sum,
    action_4 => sum
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:19:41.023

您将希望`user`按键分组，而不是：

```
$keys = array("user"=>1); 
```

# performance - Seq.map 比常规 for 循环更快？

> ID：10468422
> 
> 赞同：8
> 
> 时间：2012-05-06T05:41:43.827
> 
> 标签：performance, f#

我正在学习 F#，而这门语言让我全神贯注的一件事是性能。我编写了一个小型基准测试，将惯用的 F# 与用相同语言编写的命令式代码进行比较 - 令我惊讶的是，函数式版本的输出速度明显更快。

基准包括：

1.  使用 File.ReadAllLines 读取文本文件
2.  反转每行中的字符顺序
3.  使用 File.WriteAllLines 将结果写回同一文件。

这是代码：

```
open System
open System.IO
open System.Diagnostics

let reverseString(str:string) =
    new string(Array.rev(str.ToCharArray()))

let CSharpStyle() = 
    let lines = File.ReadAllLines("text.txt")
    for i in 0 .. lines.Length - 1 do
        lines.[i] <- reverseString(lines.[i])

    File.WriteAllLines("text.txt", lines)

let FSharpStyle() = 
    File.ReadAllLines("text.txt")
    |> Seq.map reverseString
    |> (fun lines -> File.WriteAllLines("text.txt", lines))

let benchmark func message = 
    // initial call for warm-up
    func()

    let sw = Stopwatch.StartNew()
    for i in 0 .. 19 do
        func()

    printfn message sw.ElapsedMilliseconds

[<EntryPoint>]
let main args = 
    benchmark CSharpStyle "C# time: %d ms"
    benchmark FSharpStyle "F# time: %d ms"
    0 
```

无论文件大小如何，“F# 样式”版本的完成时间大约是“C# 样式”版本的 75%。我的问题是，为什么会这样？我认为命令式版本没有明显的低效率。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T06:28:32.093

`Seq.map`不同于`Array.map`. 因为序列 ( `IEnumerable<T>`) 在被枚举之前不会被评估，所以在 F# 风格的代码中，直到`File.WriteAllLines`遍历由`Seq.map`.

换句话说，您的 C# 样式版本正在反转所有字符串并将反转的字符串存储在一个数组中，然后循环遍历该数组以写入文件。F# 风格的版本正在反转所有字符串并将它们或多或少地直接写入文件。这意味着 C# 风格的代码在整个文件中循环了 3 次（读取到数组、构建反向数组、将数组写入到文件），而 F# 风格的代码只在整个文件中循环了两次（读取到数组、写入将行反转到文件）。

如果您使用`File.ReadLines`而不是`File.ReadAllLines`结合使用，您将获得最佳性能`Seq.map`- 但您的输出文件必须与输入文件不同，因为您在写入输出的同时仍从输入读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T05:45:02.463

与常规循环相比，*Seq.map*形式有几个优点。它可以只预先计算一次函数引用；它可以避免变量赋值；它可以使用输入序列长度来预先确定结果数组的大小。

# ruby-on-rails - bubushka 一直问我要 uri 吗？在apt源部分下

> ID：10468427
> 
> 赞同：0
> 
> 时间：2012-05-06T05:43:18.040
> 
> 标签：ruby-on-rails, babushka

我正在使用应该基于 Wheezy 的 Debian“测试”。我已经尝试根据 rob holland 的更改添加必填字段：

[http://proxy.nwang.info/github.com/robholland/babushka](http://proxy.nwang.info/github.com/robholland/babushka)

但我仍然在适当的源时间得到问题：

```
sudo ruby /home/map7/.babushka/bootstrap/bin/babushka.rb babushka
babushka {
  up to date.babushka {
    repo clean.babushka {
      installed.babushka {
        Where would you like babushka installed [/usr/local/babushka]? 
        ruby {
          'ruby' & 'irb' run from /usr/bin.
          ✓ ruby is 1.8.7, which is >= 1.8.6.
        } ✓ ruby
        git {
          'git >= 1.6' is missing.
          git.managed {
            apt {
              package manager {
                'apt-get' runs from /usr/bin.
              } ✓ package manager
              apt source {
                uri? 
                That was blank. uri? 
```

我应该在 uri 部分放什么？babushka 是否适用于 Debian 测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:39:11.597

抱歉，我没有检查 stackoverflow 的头巾问题。从现在开始，我会指出这一点。

这仍然是一个问题吗？最近对 apt 源代码进行了一些重构，因此值得在最新版本中重试。

干杯

# android - 图像比例导致内存溢出错误

> ID：10468429
> 
> 赞同：0
> 
> 时间：2012-05-06T05:43:34.360
> 
> 标签：android, android-image

当我从位图缩放图像时，应用程序会关闭。
所以我看到了标签`LogCat`。
我发现原因是内存溢出。
我不知道如何释放由new创建的内存。
垃圾收集不起作用。

代码如下：

```
Runtime.getRuntime().freeMemory();

matrix.reset();

curScale += 0.02f;

h = orgImage.getHeight();

w = orgImage.getWidth();

matrix.postScale(curScale, curScale);

rtnBitmap = Bitmap.createBitmap(orgImage, 0, 0, w, h, matrix, true);

curImageView.setImageBitmap(rtnBitmap);

calculate(-0.02f); 
```

这里的问题是`rtnBitmap`。除了添加这个，我什至使用了函数`recycle()`。但它没有用。
我会等待你的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T06:03:32.703

`rtnBitmap.recycle();`如果不为 NULL，请在使用前使用。

# java - 机器人方法是否需要在事件队列上运行？

> ID：10468432
> 
> 赞同：14
> 
> 时间：2012-05-06T05:43:58.030
> 
> 标签：java, swing, thread-safety, awtrobot

Robot 是 AWT 库的一部分，但它似乎与该库的大多数其他部分完全不同。我正在创建一个 Swing GUI，它将 Swing 与 Java Native Access (JNA) 和 Robot 混合在一起，以允许 Java 驱动一些 MS Windows/Citrix 工作程序。我的直觉是，由于 Robot 将在“平台的本机输入队列”上排队事件，所以我要做的最后一件事就是在 EDT 上运行它，但另一方面，AWT 和 Swing 库中的大多数类应该*在*Swing 事件线程上运行。因此，为了在我的脑海中澄清这一点，让我尽可能具体地提出一个问题：

Robot 方法（特别是按键和释放、鼠标移动、鼠标按下和释放）是否应该在 Swing 事件调度线程（EDT）上运行或关闭？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T00:24:30.937

`Robot`您提到的方法*不*应该在 EDT 上运行。查看源代码会发现，这些“事件”方法中的每一个都有一个共同点（`afterEvent`调用）：

```
public synchronized void keyPress(int keycode) {
    checkKeycodeArgument(keycode);
    peer.keyPress(keycode);
    afterEvent();
}

public synchronized void mousePress(int buttons) {
    checkButtonsArgument(buttons);
    peer.mousePress(buttons);
    afterEvent();
}

// etc

private void afterEvent() {
    autoWaitForIdle();
    autoDelay();
}

private void autoWaitForIdle() {
    if (isAutoWaitForIdle) {
        waitForIdle();
    }
}

public synchronized void waitForIdle() {
    checkNotDispatchThread();
    /* snip */
}

private void checkNotDispatchThread() {
    if (EventQueue.isDispatchThread()) {
        throw new IllegalThreadStateException("Cannot call method from the event dispatcher thread");
    }
} 
```

[`Robot.isAutoWaitForIdle`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html#isAutoWaitForIdle%28%29)如果您在 EDT while is上调用这些方法中的任何`true`一个，则会引发异常。按理说，即使`isAutoWaitForIdle`is `false`，也不应该从 EDT 调用这些方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-06T06:52:18.993

*   API 非常准确，然后我知道如果从 EDT 调用 Robot 应该被忽略

> 使用类生成输入事件与将事件发布到 AWT 事件队列或 AWT 组件的不同之处在于，事件是在平台的本机输入队列中生成的。

*   我是 Java 的新手，我的第一次接触是 Java1.6.009，然后我无法比较 AWT 和（出生时）Java1.3 中的 Swing 和 Java1.4 中的更改

我的例子

```
import javax.imageio.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import java.io.*;

public class CaptureScreen implements ActionListener {

    private JFrame f = new JFrame("Screen Capture");
    private JPanel pane = new JPanel();
    private JButton capture = new JButton("Capture");
    private JDialog d = new JDialog();
    private JScrollPane scrollPane = new JScrollPane();
    private JLabel l = new JLabel();
    private Point location;

    public CaptureScreen() {
        capture.setActionCommand("CaptureScreen");
        capture.setFocusPainted(false);
        capture.addActionListener(this);
        capture.setPreferredSize(new Dimension(300, 50));
        pane.add(capture);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(pane);
        f.setLocation(100, 100);
        f.pack();
        f.setVisible(true);
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                createPicContainer();
            }
        });
    }

    private void createPicContainer() {
        l.setPreferredSize(new Dimension(700, 500));
        scrollPane = new JScrollPane(l,
                ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,
                ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        scrollPane.setBackground(Color.white);
        scrollPane.getViewport().setBackground(Color.white);
        d.setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
        d.add(scrollPane);
        d.pack();
        d.setVisible(false);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getActionCommand().equals("CaptureScreen")) {
            Dimension d1 = Toolkit.getDefaultToolkit().getScreenSize(); // gets the screen size
            Robot r;
            BufferedImage bI;
            try {
                r = new Robot(); // creates robot not sure exactly how it works
                Thread.sleep(1000); // waits 1 second before capture
                bI = r.createScreenCapture(new Rectangle(d1)); // tells robot to capture the screen
                showPic(bI);
                saveImage(bI);
            } catch (AWTException e1) {
                e1.printStackTrace();
            } catch (InterruptedException e2) {
                e2.printStackTrace();
            }
        }
    }

    private void saveImage(BufferedImage bI) {
        try {
            ImageIO.write(bI, "JPG", new File("screenShot.jpg"));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private void showPic(BufferedImage bI) {
        ImageIcon pic = new ImageIcon(bI);
        l.setIcon(pic);
        l.revalidate();
        l.repaint();
        d.setVisible(false);
        location = f.getLocationOnScreen();
        int x = location.x;
        int y = location.y;
        d.setLocation(x, y + f.getHeight());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                d.setVisible(true);
            }
        });
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                CaptureScreen cs = new CaptureScreen();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-06T08:28:44.377

放大@mKorbel 的深思熟虑的答案，并确认他的经验结果，注意各种[`Robot`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/awt/Robot.java)方法如何委托给`RobotPeer`接口的内部实例，其本地实现因平台而异。此外，这些方法是同步的。合成事件都到达`EventQueue`，而与源无关。

# php - Google reCaptcha 说：invalid-request-cookie

> ID：10468433
> 
> 赞同：4
> 
> 时间：2012-05-06T05:44:12.627
> 
> 标签：php, recaptcha

这是我第一次在我的网站上使用 recaptcha。

我正在使用 PHP API 来验证 recaptcha，它一直在说`invalid-request-cookie`

我在不同的论坛上发现 www.example.com 与 example.com 不同，所以我在没有 的情况下再次注册了我的网站`www`，但它仍然无法正常工作..

当我验证`recaptcha_response_field`和`recaptcha_challenge_field`值是否正确时。

这是验证码检查器：

```
require_once(recaptchalib.php'); 

$publickey = "not displayed"; //for security
$privatekey = "not displayed"; //for security
$error = null; 

if( $_POST ) {
    $arr = array('a' => $_POST['task'], 'b' => $_POST['recaptcha_challenge_field'], 'c' => $_POST['recaptcha_response_field']);

    if( trim($arr['a']) == 'captcha' ) {
        $resp = null;
        $error = null;
        $captcha_result = 'success';
        $resp = recaptcha_check_answer( $privatekey, $_SERVER["REMOTE_ADDR"], $arr['b'], $arr['c'] );       

        if( $resp->error ){
            $captcha_result = 'fail';
        }
        echo $captcha_result;
    } 
} 
```

这是HTML代码：

```
 <div id="captcha-div">
                <script type="text/javascript">
                          var RecaptchaOptions = {
                              tabindex: 1,
                              theme: 'custom',
                              custom_theme_widget: 'recaptcha_widget'
                          };
                        </script>
                <div id="recaptcha_widget" style="display:none"><div id="recaptcha_image" style="width: 200px; height: 57px; "></div>
                <?php echo recaptcha_get_html($publickey, $error); ?>
                <div class="recaptcha_only_if_incorrect_sol" style="color:red">Incorrect. Try Again.</div>
                <span class="recaptcha_only_if_audio">Type what you hear</span>
                <input type="text" id="recaptcha_response_field" name="recaptcha_response_field">
                <div class="recaptcha_only_if_audio"><a href="javascript:Recaptcha.switch_type(&#39;image&#39;)">Kumuha ng larawang CAPTCHA</a></div>

                <script type="text/javascript" src="http://www.google.com/recaptcha/api/challenge?k=6Le_X88SAAAAAAH3NEbkIr3w75SEQnQYwl96Y7f0"></script>
                <noscript><iframe src="http://www.google.com/recaptcha/api/noscript?k=6Le_X88SAAAAAAH3NEbkIr3w75SEQnQYwl96Y7f0" height="300" width="500" frameborder="0"></iframe><br>
                <textarea name="recaptcha_challenge_field" rows="3" cols="40">
                             </textarea>
                <input type="hidden" name="recaptcha_response_field" value="manual_challenge"></noscript></div>
                <script type="text/javascript">
                  window.onload = function() {
                      Recaptcha.focus_response_field();
                  }
                </script>
                <p id="captcha-error" style="color:red; font-weight:bold;"></p>
            </div>
            <div><a id="captcha-refresh" href="javascript:Recaptcha.reload()"></a></div>
            <div  class="recaptcha_only_if_image"><a id="captcha-audio" href="javascript:Recaptcha.switch_type(&#39;audio&#39;)"></a></div>
            <div><a id="captcha-help" href="javascript:Recaptcha.showhelp()"></a></div>
            <div id="circle-submit"></div> 
```

谁能帮我解决这个问题？

谢谢，贾斯汀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:54:45.407

正如[reCAPTCHA Support 所说](https://groups.google.com/forum/?fromgroups#!topic/recaptcha/jLaaqZ2PfG0)：

不，这不会导致无效域。这意味着您没有正确地将 recaptcha_challenge_field 提交给服务器。

因此，请确保您使用 recapcha 正确呈现表单。看看[这个链接](https://github.com/google/recaptcha)。

# java - Java枚举替代我是如何做到的？

> ID：10468436
> 
> 赞同：3
> 
> 时间：2012-05-06T05:44:57.880
> 
> 标签：java, enums

通过编写 MIDI 处理程序自学 Java。程序需要做的一件事是在 MIDI 音符编号和它们相应的紧凑字符串表示之间来回转换。我看着使用枚举设置，但由于命名限制，你不能做类似的事情

```
c-1, c#-1, ...  g9; 
```

因为尖锐和负面（是的，我遵循让你最终得到一个负八度的惯例：P）。

必须在允许的内容和我想要的内容之间进行转换似乎很笨拙。

```
CNEG1("c-1"),
CSNEG1("c#-1"),
DNEG1("d-1"),
...
G9("g9"); 
```

所以我想出了下面的静态导入方案，它工作正常。但是，我想了解更多关于如何使用枚举的信息，而且我有一种预感，它们实际上可能更适合这项任务——只要我能更好地理解其中的来龙去脉。所以这就是我的问题：任何人都可以想出一种优雅的方式来使用枚举方案提供相同的功能吗？此外，这样做会有强有力的论据吗？

```
public abstract class MethodsAndConstants {

    public static final String TONICS[] = {"c","c#","d","d#","e","f","f#","g","g#","a","a#","b"};
    static final NoteMap notemap = new NoteMap();

    static class NoteMap{
        static String map[] = new String[128];

        NoteMap() {
            for (int i = 0; i < 128; i++){
                int octave = i/12 - 1;
                String tonic = MethodsAndConstants.TONICS[i%12];
                map[i] = tonic + octave;
            }
        }   
    }

    public static int convert_midi_note(String name){
        return indexOf(NoteMap.map, name);
    }

    public static String convert_midi_note(int note_num){   
        return NoteMap.map[note_num];
    }

    public static int indexOf(String[] a, String item){
        return java.util.Arrays.asList(a).indexOf(item);
    }       
} 
```

编辑 - - - - - - - - - - - - - - - - - - - - -

经过深思熟虑，我认为在这种特殊情况下，枚举毕竟可能是矫枉过正。我最终可能只是在这里使用这个代码，同样的静态导入方法，但不再需要像上面的 NoteMap 业务这样的东西。

note_num -> 名称转换非常简单，而 name -> note_num 的东西只是很好的字符串解析乐趣。

```
public abstract class MethodsAndConstants {
    public static final String[] TONICS = {"c","c#","d","d#","e","f","f#","g","g#","a","a#","b"};

    static String convert(int i) {
        String tonic = MethodsAndConstants.TONICS[i%12];
        int octave = (i / 12) - 1;
        return tonic + octave;
    }

    static int convert(String s) {
        int tonic = java.util.Arrays.asList(MethodsAndConstants.TONICS).indexOf(s.substring(0,1));
        if (s.contains("#")) tonic += 1;
        int octave = Integer.parseInt(s.substring(s.length()-1));
        if (s.contains("-")) octave -= 2;   // case octave = -1
        int note_num = ((octave + 1) * 12) + tonic;
        return note_num;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T06:03:45.737

您可以使用枚举来表示音高，但我可能会尝试在类中封装音高

```
public class Pitch {

    private final int octave;
    private final Note note;

    public enum Note {
        C("C",4), CSHARP("C#/Db",5), DFLAT("C#/Db",5), //and so on

        private final String thePitch;
        private final int midiAdjust;

        private Note(final String thePitch, final int midiAdjust) {
            this.thePitch = thePitch;
            this.midiAdjust = midiAdjust;
        }

        String getThePitch() {
            return thePitch;
        }

        int getMidiAdjust() {
            return midiAdjust;
        }
    }

    public Pitch(Note note, int octave) {
        this.note = note;
        this.octave = octave;
    }

    public int getMidiNumber(){
        return 12*octave + note.getMidiAdjust();
    }

} 
```

这将解释这样一个事实，即音符（C、C#、D、D#、E...）将成为重复集之一，但您可以拥有各种八度音阶，在这种情况下由`int`. 它会大大减小你的`enum`.

编辑：我在这里添加了几行作为一个想法。您可以将第二个参数传递给枚举的构造函数，以允许您返回代表音高的 MIDI 数字。在这篇文章中，我假设 MIDI 表示的最小数字是 A，但我可能错了。此外，`12*octave`它旨在为每个增量添加一个完整的八度音阶。你可能需要稍微调整一下，因为我看到你正在使用那个奇怪的符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T05:49:40.287

像这样的东西：

```
public enum Note {
    CNEG1("c-1"), CSNEG1("c#-1"), DNEG1("d-1");

    private final String tonicOctave;

    private Note(final String tonicOctave) {
        this.tonicOctave = tonicOctave;
    }

    public String getTonicOctave() {
        return this.tonicOctave;
    }

    public static Note fromTonicOctave(final String val) {
        for (final Note note: Note.values()) {
            if (note.getTonicOctave().equals(val)) {
                return note;
            }
        }
        return null;
    }
} 
```

请注意，您可以在枚举中包含任意数量的参数，因此如果您需要将主音和八度音分开，您可以。

# java - 用于获取用双引号括起来的短语的正则表达式

> ID：10468439
> 
> 赞同：4
> 
> 时间：2012-05-06T05:45:16.213
> 
> 标签：java, regex, text

我需要帮助来构建正则表达式。我正在编写一个在字符串中查找某些单词的软件。但我还需要寻找**词组**。该字符串由用户在文本框中输入。

目前我使用以下正则表达式用`\s+`＆符号替换空格： `word1 word2 word3``word1&word2&word3`

我的新要求必须包括用引号括起来的短语，例如在 Google 中搜索短语。

```
"word1 word2" "word3 word4" word5 
```

一定是：

```
word1 word2&word3 word4&word5 
```

提前致谢。

**编辑**：如果有另一种方法或另一种方法可以做到这一点，我愿意接受任何想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T06:12:29.643

这假设任务是平衡的——你有偶数个任务，而不是单词中间的任务。

你可以匹配`/"([^"]+)"|(\S+)/`- 这将导致你的话 - 引用的字符串或非空格。它捕获了第 1 组*或*第 2 组中的单词，然后您可以`join`使用`&`分隔符获取结果。

另一种选择：您可以通过跳过您的标记，在一次替换中获得它，这与第一种模式非常相似。这是一个 JavaScript 示例：

```
s = s.replace(/(?:"([^"]+)"|(\S+))\s*/g, '$1$2&'); 
```

（请注意，您将在字符串末尾有一个额外的＆符号）

# iphone - ios查找所有保存的文件

> ID：10468440
> 
> 赞同：0
> 
> 时间：2012-05-06T05:45:41.577
> 
> 标签：iphone, ios, filepath

我的应用程序不时下载许多 jpeg。所有jpeg文件名都以“hmof-*.jpg”的格式保存有没有办法可以删除所有不以“hmof-”前缀开头的文件？

我显然需要循环执行此操作，但我不确定要循环什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T05:56:12.197

像这样的东西...

```
 NSString *bundleRoot = [[NSBundle mainBundle] bundlePath];
    NSFileManager *fm = [NSFileManager defaultManager];
    NSArray *dirContents = [fm contentsOfDirectoryAtPath:bundleRoot error:nil];
    NSPredicate *fltr = [NSPredicate predicateWithFormat:@"NOT (self BEGINSWITH 'hmof-')"];
    NSArray *notHMOF = [dirContents filteredArrayUsingPredicate:fltr]; 
```

您可以使用以下方法删除文件：

```
for (int i=0; i<[notHMOF count]; i++) 
{       
    [fm removeItemAtPath:[NSString stringWithFormat:@"%@/%@",bundleRoot,[notHMOF objectAtIndex:i]] error:nil];
} 
```

**编辑：**这有效..

# node.js - Node-PerfectAPI vs Restify.js vs ExpressJS vs Node-APIServer

> ID：10468441
> 
> 赞同：17
> 
> 时间：2012-05-06T05:45:42.340
> 
> 标签：node.js, express

我是 ExpressJS 的新手。我想为我的服务创建 API，这些 API 将由其他服务器直接使用，其中的一部分由移动应用程序/浏览器使用。我刚刚发现了 Restify、Node-PerfectAPI、Node-APIServer，我不知道有什么区别。

有人可以详细说明每个框架的差异以及优缺点。

为什么要选择 Express/NodeJS 与其他框架来创建 API？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T16:21:06.577

免责声明：我是[node-perfectapi](http://perfectapi.github.com/node-perfectapi/)的作者。

perfectapi 的重点是让开发人员从开始到生产就绪变得简单。它比[node-restify](http://mcavage.github.com/node-restify/)更抽象。这样做的影响是您在 API 设计中的灵活性较低，但与此同时，您应该能够以更少的专业知识更快地获得生产就绪的东西。

restify 和 perfectapi 都有相当的性能。

此答案中的链接指向突出每种解决方案优势的页面。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T14:42:40.077

我也在研究类似的问题。您可能感兴趣的主要区别之一是性能。我刚刚发现“perfect-api”开发人员的一篇博文，将他的框架与其他两个框架进行了比较。[http://blog.perfectapi.com/2012/benchmarking-apis-using-perfectapi-vs-express.js-vs-restify.js/](http://blog.perfectapi.com/2012/benchmarking-apis-using-perfectapi-vs-express.js-vs-restify.js/)

评论指出 Restify 现在做得更好。

根据我的（有限的）经验，我会说 express.js 比 Restify 更容易使用，并且提供了一些很好的工具，如 connect.js 是公开的。例如，这将避免您编写静态文件服务器的痛苦，即使 Connect 仍然可以与 Restify 集成。

另一方面，Restify 将使一些常见的 API 任务变得更加容易。例如，它提供了一个节流引擎以及一个 API 转换系统，这在您与不受控制的客户端打交道的环境中是非常必要的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-10T05:42:18.400

您还应该考虑[https://npmjs.org/package/hapi](https://npmjs.org/package/hapi)

它看起来很有希望。[在https://www.youtube.com/watch?v=Recv7vR8ZlA](https://www.youtube.com/watch?v=Recv7vR8ZlA)中有一个关于框架的讨论，其中 hapi 的主要贡献者讨论了是什么让 API 框架打勾。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-29T11:35:04.210

如果您访问 github 中的 node-perfectapi，您将在自述文件中看到此消息：

“我目前没有维护这个包。你可能应该寻找另一个工具来满足你的需要。”

因此，我得出结论，您最好使用 restify，因为这是积极维护的。

# scheme - 你能解释一下为什么这适用于字符串而不是列表吗？

> ID：10468444
> 
> 赞同：1
> 
> 时间：2012-05-06T05:46:18.040
> 
> 标签：scheme, racket

```
(define str '("3" "+" "3"))
(define list '(3 + 4))

(define (tokes str)
  (case (car str)
    ((or "+" "-" "*" "/")(write "operand")
                         (tokes (cdr str)))

                         (else (write "other"))
    ))

(define (tokelist)
  (case (car list)
    ((or "+" "-" "*" "/")(write "operand"))
    (else (write "other")))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T05:57:50.627

当您使用列表时，您正在尝试将字符串`"+"`与过程进行比较。`+`这些是不同的类型，它们是不相等的。

试试这个：

```
> (string? "+")
#t
> (procedure? +)
#t
> (string? +)
#f 
```

这应该让您对如何解决问题有一个很好的了解，但请注意：

```
> (= + +)
=: expects type <number> as 1st argument, given: #<procedure:+>;
other arguments were: #<procedure:+> 
```

你需要：

```
> (equal? + +)
#t
> (equal? + "+")
#f
> (equal? "+" "+")
#t 
```

使用这些想法，这应该可以让您的代码正常工作：

```
(define (plus? s)
    (if (procedure? s) (equal? + s) (equal? "+" s))) 
```

# python - 按给定的键列表对字典进行排序

> ID：10468445
> 
> 赞同：0
> 
> 时间：2012-05-06T05:46:21.313
> 
> 标签：python

我从一堆或电子邮件中读取数据并计算每个单词的频率。首先构造两个计数器：

```
counters.stats = collections.defaultdict(dict) 
```

统计的关键是单词。对于每个单词，我构造一个字典，其键是电子邮件的名称，值是该单词在这封电子邮件中出现的频率。

现在我有一个列表，其中包含 counters.stats 中的这些键，按不同的顺序排列。我想按列表对“统计”中的键进行排序。

```
def print_stats(counters):
    for form, cat_to_stats in sorted(counters.stats.items(), key = chi_sort): 
```

如何构建函数 chi_sort？还是其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T05:58:16.090

假设 中的值`L`仅出现一次：

```
D = dict((b,a) for a,b in enumerate(L))
chi_sort = D.get 
```

where`L`指的是您的列表。

如果这以相反的顺序产生值，您可以通过添加`reversed=True`到您的`sorted`调用来解决该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-10T21:34:56.027

用这个：

```
chi_sort = lambda item: your_list_here.index(item[0]) 
```

（替换`your_list_here`为您的列表）

示例（`collections.OrderedDict`可以用普通替换`dict`）：

```
>>> import collections
>>> ordereddict = collections.OrderedDict((
...     ('key_78', 'value'),
...     ('key_40', 'value'),
...     ('key_96', 'value'),
...     ('key_53', 'value'),
...     ('key_04', 'value'),
...     ('key_89', 'value'),
...     ('key_52', 'value'),
...     ('key_86', 'value'),
...     ('key_16', 'value'),
...     ('key_63', 'value'),
... ))
>>>
>>> alist = sorted(ordereddict.keys())
>>> alist
['key_04', 'key_16', 'key_40', 'key_52', 'key_53', 'key_63', 'key_78', 'key_86',
 'key_89', 'key_96']
>>> sorted(ordereddict.items(), key=lambda item: alist.index(item[0]))
[('key_04', 'value'), ('key_16', 'value'), ('key_40', 'value'), ('key_52', 'valu
e'), ('key_53', 'value'), ('key_63', 'value'), ('key_78', 'value'), ('key_86', '
value'), ('key_89', 'value'), ('key_96', 'value')] 
```

# java - 如何读取循环内的值？

> ID：10468452
> 
> 赞同：0
> 
> 时间：2012-05-06T05:50:03.973
> 
> 标签：java

我正在尝试运行一个非常简单的 java 程序。我想编写一个读取 10 个整数的程序，并且程序发现女巫 1 是其中的最大值。我想知道是否有可能在循环内我可以读取 10 个值。

```
Scanner input = new Scanner (System.out);
    int num1, num2, num3, num4, num5, num6, num7, num8, num9, num10;
        System.out.print(" please enter the numer "  +i);
             ===>num[i] = input.nextInt();// 
```

我正在尝试找到不使用数组的方法，因为我还没有在学校看到这个。知道如何在循环中执行此操作吗？还是根本不可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T05:55:48.783

当然有可能。

您所要做的就是保持当前最大值，然后将其与用户输入的每个新值进行比较。您可以使用 for 循环来确保它恰好运行 10 次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T05:54:23.153

如果您只需要最大值，则不需要存储所有十个输入。所以是的，这在没有数组的情况下是可能的，而且你也不需要 10 个整数变量。

（想一想，你会发现你可以通过扫描一次数组找到最大值。然后你就不再需要数组了。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T06:27:09.860

为此，您必须创建长度为 10 的 int 数组，然后在循环中读取该 intvalues 并进一步处理。例子 ：-

```
Scanner input = new Scanner (System.out).useDelimiter("\n");
int values[] = new int[10];
.
.
.

for ( int i = 0 ; i < values.length ; i++ ){
     System.out.print(" please enter the numer "  +i);
     values[i] = input.nextInt();
} 
```

# c - 如果分配一个大的自动变量而不是 C 中的 memset，性能是否会有所提高

> ID：10468454
> 
> 赞同：0
> 
> 时间：2012-05-06T05:50:07.523
> 
> 标签：c

> **可能重复：**
> [memcpy 与 C 中的分配](https://stackoverflow.com/questions/324011/memcpy-vs-assignment-in-c)

我想知道将一个大结构（例如 100 字节）自动变量分配为零而不是在 C 的运行时将它设置为零是否会提高性能。不确定 gcc 编译器是否可以在编译时进行优化这个

下面是两个案例

**情况1：**

```
void fun1()
{
   struct S y = {0};
} 
```

**案例二：**

```
void fun1()
{
  struct S y;
  memset(&y, 0, sizeof(y));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T05:51:59.877

gcc 几乎肯定会比你更好地处理这个问题，这可能不是你系统性能的瓶颈，所以你不应该担心尝试优化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:56:55.140

这几乎是[C 中 memcpy 与赋值的完全相同](https://stackoverflow.com/questions/324011/memcpy-vs-assignment-in-c)

赋值几乎总是比直接内存操作好（更不用说更冗长了）。毕竟，代码是用来阅读的。不仅仅是写的。

# java - 简单的 Java 扫描程序代码不起作用

> ID：10468455
> 
> 赞同：3
> 
> 时间：2012-05-06T05:50:23.037
> 
> 标签：java, loops, java.util.scanner

这是我为制作一个简单游戏而编写的一些基本代码的框架：

```
 Scanner in = new Scanner(System.in);

    String name;
    String playing;
    int age;

    do {

        System.out.println("Enter your name");
        name = in.nextLine();

        System.out.println("Enter your age");
        age = in.nextInt();

        System.out.println("Play again?");
        playing = in.nextLine();

    } while (true); 
```

代码没有按预期工作，例如，这是代码的预期功能：

```
Enter your name
John
Enter your age
20
Play again?
Yes
Enter your name
Bill
... 
```

但是，再次读取 Play 行时存在问题，这是实际输出：

```
Enter your name
John
Enter your age
20
Play again?
Enter your name 
```

如您所见，在“再次播放？”之前再次显示“输入您的姓名”。能够接受输入。调试时播放变量设置为“”，因此我看不到任何输入，也无法弄清楚正在消耗什么。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T06:02:47.707

`nextInt()`不消耗行尾，即使`int`是那里唯一的东西。

`nextLine()`在读取 之后添加另一个`int`，或者完全丢弃它的值，或者如果你想阻止人们输入除 int 之外的任何内容，请检查它是否为空。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T06:03:10.740

问题是在调用 nextInt() 之后缓冲区中仍然有一个 '\n' ，所以这就是传递的内容。使用 in.next() 而不是 in.nextLine()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T06:24:02.873

您应该使用以下代码进行下一行阅读。

```
Scanner scanner = new Scanner(System.in).useDelimiter("\n"); 
```

为了阅读你应该写的那行

```
scanner.next(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T05:59:30.740

在 Scanner 类中使用**next()**方法而不是 nextLine() 方法。

```
 Scanner in = new Scanner(System.in);

    String name;
    String playing;
    int age;

    do {

        System.out.println("Enter your name");
        name = in.next();

        System.out.println("Enter your age");
        age = in.nextInt();

        System.out.println("Play again?");
        playing = in.next();

    } while (true); 
```

有关更多信息，请参阅[扫描仪类](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html) 输出的 Java 文档：

```
Enter your name
Kanishka
Enter your age
23
Play again?
Yes
Enter your name
.... 
```

# android - 在选项卡布局中的 2 个活动之间传输数据

> ID：10468460
> 
> 赞同：0
> 
> 时间：2012-05-06T05:52:21.047
> 
> 标签：android, google-maps, android-intent

我正在实施一个健身应用程序。我有这个应用程序的选项卡布局，第一个选项卡显示位置（纬度、经度）、速度和其他状态，第二个选项卡显示谷歌地图，其中运行路线将显示为地图中的折线。

第一个选项卡活动有一个接收新位置的位置管理器。

我的问题是：如何将第一个选项卡活动中从位置管理器收到的数据传输到谷歌地图选项卡活动？

据我所知，通过使用 intent.putExtra() 和 startActivity() 可以在 2 个活动之间传输数据，但是通过调用 startActivity() 我会立即转到地图活动，对吗？但我想更新地图中的折线并留在状态选项卡中。

有什么提示吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:20:06.620

创建一个`Global class`并`declare static varible`为其赋值并使用另一个类。还有另一种方式

```
Intent i =new Intent()setClass(this, ListViewerIncompleted.class);
i.putStringArrayListExtra(name, value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T06:08:48.947

好的，我用该代码解决了这个问题：

在我的登录活动（第一个活动）中，我需要传递用户名和密码字符串：

```
btnLogin.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {               
            String userName = txtUsername.getText().toString();
            String password = txtPass.getText().toString();
            //instance for UserFunctions.
            UserFunctions userFunction = new UserFunctions();
            JSONObject json = userFunction.loginUser(userName, password);
            //Check login response
            try {
                if(json.getString(KEY_REQUESTRESULT)!= null ){
                    txtErrorM.setText("");
                    //Log.e("Passed fine:", "first if condition");
                    String res = json.getString(KEY_REQUESTRESULT);//Obtaining the value 0 or 1 from the KEY loginstatus from JSONObject.
                if(Integer.parseInt(res) == 1){
                    Intent iii = new Intent("com.mariposatraining.courses.MariposaTrainingActivity");
                    Bundle bundle1 = new Bundle();
                    Bundle bundle2 = new Bundle();
                    bundle1.putString("UN", userName);
                    bundle2.putString("PW", password);
                    iii.putExtras(bundle1);
                    iii.putExtras(bundle2);

                    //iii.putExtra("userName", userName);
                    //iii.putExtra("Password", password);                       
                    startActivity(iii);
                    finish();
                    //Log.e("OBJECTOO", json.toString());
                } 
```

我将此字符串发送到 TAB HANDLER CLASS，然后发送到管理此信息的活动：

```
public class MariposaTrainingActivity extends TabActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE); 
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
    WindowManager.LayoutParams.FLAG_FULLSCREEN); 
    setContentView(R.layout.main);

    TabHost tabHost = getTabHost();
    TabHost.TabSpec spec ; //recurse to the property tabs
    Intent intent; //intent for open tabs

    //created intent for open the class tab1

    intent = new Intent().setClass(this, ListViewerIncompleted.class); //List 2 Incompleted
    spec = tabHost.newTabSpec("ListViewerIncompleted").setIndicator("INCOMPLETED").setContent(intent);
    tabHost.addTab(spec);
    Bundle bundle1 = getIntent().getExtras();
    String userName=bundle1.getString("UN");
    Bundle bundle2 = getIntent().getExtras();
    String password=bundle2.getString("PW");
    Bundle bundle3 = new Bundle();
    Bundle bundle4 = new Bundle();
    bundle3.putString("UN", userName);
    bundle4.putString("PW", password);
    intent.putExtras(bundle3);
    intent.putExtras(bundle4);}} 
```

在类中使用此信息：

```
 Bundle bundle3 = getIntent().getExtras();
    String userName=bundle3.getString("UN");   //Getting the userName
    Bundle bundle4 = getIntent().getExtras();
    String password=bundle4.getString("PW"); 
```

希望这能给你一些想法......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T06:07:27.960

在目标 Activity 中使用公共静态变量可以立即访问源 Activity 中所需的值。

# java - `TreeSet` 的可排序性的可靠性

> ID：10468461
> 
> 赞同：1
> 
> 时间：2012-05-06T05:52:44.420
> 
> 标签：java, collections, treeset

使用以下Java代码是否可靠：

```
TreeSet<String> ts = new TreeSet<String>();
String stringAtIndexThree = Arrays.<Tag> asList(list.toArray(new Tag[list.size()])).get(3); 
```

在第三个索引处获取对象（假设`ts.size() > 3`）？

也就是说`TreeSet<T>#toArray(T[])`，如果不对集合进行任何修改，是否总是以相同的顺序返回元素？

如果重要的话，这适用于`ComboBoxModel`应该只有唯一元素的实现（最好我会使用不存在的元素`UniqueList`）。

谢谢！

厕所

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:00:37.410

> 如果不对集合进行任何修改，TreeSet#toArray(T[]) 是否总是以相同的顺序返回元素？

绝对 -`TreeSet`以相同的排序顺序返回元素。当然，在实现可比较时，您的元素应该可以很好地发挥作用，以便使排序顺序符合您的期望。

# visual-studio - 为什么在发布和调试模式下构建时，VS 2010 项目编译会生成 pdb 文件？

> ID：10468462
> 
> 赞同：6
> 
> 时间：2012-05-06T05:52:48.940
> 
> 标签：visual-studio, visual-studio-2010, compilation

我正在发布模式下构建 VS 2010 的窗口服务 c# 项目。我第一次感到惊讶的是，即使在发布模式下，它也会创建 pdb 文件。附加调试过程后，我无法加载调试符号。

我的问题是，如果我们在调试和发布模式下都有 pdb 文件，那么为什么需要两种编译模式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T05:58:22.050

> 我的问题是，如果我们在调试和发布模式下都有 pdb 文件，那么为什么需要两种编译模式

调试和发布之间除了 PDB 生成之外还有*其他差异。*如果您进入 Build 属性并进入“Advanced”，则会生成不同级别的调试信息 - Full、PDB-only 和 None。

此外，还有不同级别的编译时优化，以及不同预处理器符号的存在（例如，每个`Debug.Assert`存在或不存在）。

当然，您也可以拥有自己的各种构建配置，并提供多种选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T05:56:52.277

存在调试/发布模式的原因有很多，与 PDB 文件的创建无关。

VS 在发布模式下更快地执行你编译的程序。此外，如果您处于调试与发布模式，则有一些编译器指令可以改变程序的行为方式。例如，您可以使用编译器指令来禁用您的顶级`try` `catch`块，以便您可以隔离被抛出到特定代码行的异常。

这只是几个例子。简而言之，调试模式的用途远不止为您创建 PDB 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T05:57:45.390

您可以有两种以上的编译模式。通常，调试和发布意味着你是否想要优化。无论如何，您仍然可以生成调试信息，只有用于发布版本的 PDB 不会有太大帮助。可以排除内联函数、变量等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T18:59:08.857

我最近做了一个 winupdate(20120508) 并且 Visual Studio 之后的调试似乎真的很慢，在 compile-to-runDebug 延迟后延迟了 1 分钟，然后当调试程序退出时，又延迟了 1 分钟才能再次控制 Visual Studio。我确实清理了所有东西，但没有快乐。

解决方案：我手动删除了我的项目/解决方案中的 *.sdf 和 *.suo 文件并重新构建。问题神奇地消失了。

不知道为什么，但有些东西不同步、损坏或与更新不兼容，需要手动清除。

# jquery - 如何链接 2 个 setInterval 函数来制作一个简单的背景图像滑块——连续滑动？

> ID：10468465
> 
> 赞同：0
> 
> 时间：2012-05-06T05:53:49.123
> 
> 标签：jquery

如何制作循环以连续在这两个功能之间切换？此外，有没有一种方法可以使用 1 个功能并链接任意数量的图片？

```
<script  type="text/javascript">

        $(document).ready(function(){

 setInterval('spinna()', 3000);
 setInterval('spinna2()', 6000);

        });
                function spinna(){

                        $('#header_bg').css({                           
                            'background-image' : 'url(' + '<?php echo get_template_directory_uri(); ?>/library/images/bg2.jpg' + ')'                        
                        });             
                }   
                        function spinna2(){
                         $('#header_bg').css({                          
                            'background-image' : 'url(' + '<?php echo get_template_directory_uri(); ?>/library/images/scrib.jpg' + ')'                      
                    });

        }   

</script> 
```

我真的很想这样做，我已经从[thenewboston](http://www.youtube.com/watch?v=GNb8T5NBdQg)用 jQuery 完成了 60 个教程。我试图在没有“作弊”的情况下做到这一点，但我无法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T05:57:18.260

```
$(document).ready(function(){
   setInterval(spinna, 3000);

   var index = 0,
       imgs = ['bg2.jpg', 'scrib.jpg'];
    function spinna(){
          $('#header_bg').css({                
              'background-image' : 'url(' + '<?php echo get_template_directory_uri(); ?>/library/images/'+ imgs[index] +'' + ')';              
          });             
        index == 0 ? index = 1 : index = 0;       
     }   
  }); 
```

**[带有背景颜色变化的演示，也适用于图像变化](http://jsfiddle.net/d7uEr/)**

# python - 在 python 中使用 in 运算符搜索列表时使用什么算法？

> ID：10468467
> 
> 赞同：19
> 
> 时间：2012-05-06T05:54:02.840
> 
> 标签：python, algorithm, search, operators

当使用“in”运算符搜索列表中的项目时，例如

```
if item in list:
  print item 
```

使用什么算法搜索此项目。它是从头到尾直接搜索列表还是使用二进制搜索之类的东西？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-06T05:56:52.973

`list`s 不能被假定为按排序顺序（或任何顺序），因此二进制搜索不起作用。也不能假定键是可散列的，因此与 a`dict`或`set`散列表查找不同，不能用于加速搜索

猜测是从头到尾对每个元素进行直接检查。

我将尝试挖掘相关的 Python 源代码。

--

编辑：`list.__contains__()`实现`in`运算符的 Python 函数在[listobject.c](http://hg.python.org/cpython/file/05274ab06182/Objects/listobject.c)中定义：

```
 393 static int
   394 list_contains(PyListObject *a, PyObject *el)
   395 {
   396     Py_ssize_t i;
   397     int cmp;
   398 
   399     for (i = 0, cmp = 0 ; cmp == 0 && i < Py_SIZE(a); ++i)
   400         cmp = PyObject_RichCompareBool(el, PyList_GET_ITEM(a, i),
   401                                            Py_EQ);
   402     return cmp;
   403 } 
```

它遍历列表中的每个元素，从第一个元素到最后一个元素（或直到找到匹配项）。这里没有捷径。

--

编辑2：情节变厚了。**如果 Python 检测到您正在测试常量** `list`or中某个元素的成员资格`set`，例如：

```
if letter in ['a','e','i','o','u']:    # list version
if letter in {'a','e','i','o','u'}:    # set version 
```

编辑 3 [@JohnMachin]：

常量列表在 2.5-2.7 和 3.1-3.3 中优化为常量**元组。**
常量集在 3.3 中优化为（常量）frozenset。

另请参阅@CoryCarson 的回答。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-06T06:12:59.470

如果`list`是文字列表，Python 3.2+ 将采用更快的方法：[http ://docs.python.org/dev/whatsnew/3.2.html#optimizations](http://docs.python.org/dev/whatsnew/3.2.html#optimizations)

# spring-roo - spring roo 升级后不工作，老是要版本

> ID：10468472
> 
> 赞同：0
> 
> 时间：2012-05-06T05:54:33.770
> 
> 标签：spring-roo

我升级了 spring too 套件 (2.8.1.RELEASE -> 2.9.1.RELEASE) 和 spring roo (1.2.0.M1 -> 1.2.1.RELEASE)。我删除了所有 *.aj 文件并将“@RooRepositoryJpa”更改为“@RooJpaRepository”，将“@RooEntity”更改为“@RooJpaActiveRecord”。

在我进行更改并且 spring roo 不起作用之后，即使是提示命令。

这是错误：

```
 ____  ____  ____  
   / __ \/ __ \/ __ \ 
  / /_/ / / / / / / / 
 / _, _/ /_/ / /_/ /  
/_/ |_|\____/\____/    1.2.1.RELEASE [rev 6eae723]

Welcome to Spring Roo. For assistance press CTRL+SPACE or type "hint" then hit ENTER.
roo> hint
Version is required
roo> 
```

请给我一些建议并帮助我解决这个问题。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T07:06:12.507

看起来像[这个问题](https://jira.springsource.org/browse/ROO-3096)。查看“pom.xml”的内容。

# ios - 在通知中心显示大图标

> ID：10468474
> 
> 赞同：0
> 
> 时间：2012-05-06T05:55:22.557
> 
> 标签：ios

第三方应用是否可以在通知中心显示大图标和交互内容？天气或股票应用程序之类的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T05:58:34.070

应用商店应用？没有。越狱？也许。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T06:11:29.153

Apple 将拒绝使用通知中心的任何应用程序，但通知除外。

# php - FPDI/FPDF：水印和打印多页

> ID：10468478
> 
> 赞同：5
> 
> 时间：2012-05-06T05:56:06.280
> 
> 标签：php, fpdf, fpdi

我修改了这个堆栈问题：[当用户尝试下载文件时在 pdf 文件上应用水印](https://stackoverflow.com/questions/3983432/applying-watermarks-on-pdf-files-when-users-try-to-download-the-files)但我遇到了一个错误，尽管有评论说明如何修复它，但不够详细。

这是代码：

```
require_once('fpdf/fpdf.php');
require_once('fpdi/fpdi.php');

class WaterMark

{
    public $pdf, $file, $newFile,
        $wmText = "STACKOVERFLOW";

/** $file and $newFile have to include the full path. */
public function __construct($file, $newFile)
{
    $this->pdf = new FPDI();
    $this->file = $file;
    $this->newFile = $newFile;
}

/** $file and $newFile have to include the full path. */
public static function applyAndSpit($file, $newFile)
{
    $wm = new WaterMark($file, $newFile);

    if($wm->isWaterMarked())
        return $wm->spitWaterMarked();
    else{
        $wm->doWaterMark();
        return $wm->spitWaterMarked();
    }
}

/** @todo Make the text nicer and add to all pages */
public function doWaterMark()
{
    $currentFile = $this->file;
    $newFile = $this->newFile;

    $this->pdf->addPage();
    $pagecount = $this->pdf->setSourceFile($currentFile);

    for($i = 1; $i <= $pagecount; $i++){
        $tplidx = $this->pdf->importPage($i);
        $this->pdf->useTemplate($tplidx, 10, 10, 100);
        // now write some text above the imported page
        $this->pdf->SetFont('Arial', 'I', 40);
        $this->pdf->SetTextColor(255,0,0);
        $this->pdf->SetXY(25, 135);
        $this->_rotate(55);
        $this->pdf->Write(0, $this->wmText);
    }

    $this->pdf->Output($newFile, 'F');
}

public function isWaterMarked()
{
    return (file_exists($this->newFile));
}

public function spitWaterMarked()
{
    return readfile($this->newFile);
}

protected function _rotate($angle,$x=-1,$y=-1) {

    if($x==-1)
        $x=$this->pdf->x;
    if($y==-1)
        $y=$this->pdf->y;
    if($this->pdf->angle!=0)
        $this->pdf->_out('Q');
    $this->pdf->angle=$angle;

    if($angle!=0){
        $angle*=M_PI/180;
        $c=cos($angle);
        $s=sin($angle);
        $cx=$x*$this->pdf->k;
        $cy=($this->pdf->h-$y)*$this->pdf->k;

        $this->pdf->_out(sprintf(
            'q %.5f %.5f %.5f %.5f %.2f %.2f cm 1 0 0 1 %.2f %.2f cm',
            $c,$s,-$s,$c,$cx,$cy,-$cx,-$cy));
    }
    } 

}
header('Content-type: application/pdf');
//header('Content-Disposition: attachment; filename="downloaded.pdf"');
WaterMark::applyAndSpit('C:\xampp\htdocs\tst\test0.pdf','C:\xampp\htdocs\tst\output0.pdf'); 
```

当我加载一个超过 2 个的 pdf 时，所有页面都合并在一页中。我在这篇文章中附上了图片。![在此处输入图像描述](../Images/bad486ffbcc58dee24ed1e6ac65362d7.png)

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T12:40:29.420

我发现该脚本有一些问题。要使其正常工作，请将`doWatermark()`方法更改为：-

```
public function doWaterMark()
{
    $currentFile = $this->file;
    $newFile = $this->newFile;

    $pagecount = $this->pdf->setSourceFile($currentFile);

    for($i = 1; $i <= $pagecount; $i++){
        $this->pdf->addPage();//<- moved from outside loop
        $tplidx = $this->pdf->importPage($i);
        $this->pdf->useTemplate($tplidx, 10, 10, 100);
        // now write some text above the imported page
        $this->pdf->SetFont('Arial', 'I', 40);
        $this->pdf->SetTextColor(255,0,0);
        $this->pdf->SetXY(25, 135);
        $this->_rotate(55);
        $this->pdf->Write(0, $this->wmText);
        $this->_rotate(0);//<-added
    }

    $this->pdf->Output($newFile, 'F');
} 
```

我将该行`$this->pdf->addPage();`移到循环中，否则所有内容都会输出到一页上。我还添加`$this->_rotate(0);`了在保存之前将文档恢复原状。真的很简单。我已经为您评论了更改后的行。

我在 32 页的 pdf 上对其进行了测试，它似乎工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-07T01:09:55.163

这篇文章对我开始工作很有帮助。但我很快发现 FPDF 有一些这里的一些人一直在经历的陷阱。对我来说，我还注意到水印仅显示在某些浏览器实例的第一页上，以及通过 adobe acrobat (Acrobat X Pro) 打开它。

相反，我转而使用 TCPDF，它解决了各种问题，包括：

*   设置角度时没有错误
*   具有设置透明度的能力
*   自定义字体
*   更新功能：更新文本

要使用自定义字体，只需取消注释下面的自定义字体块 ( [http://www.tcpdf.org/fonts.php](http://www.tcpdf.org/fonts.php) )。

另外，最后要注意的是，标准 FPDI 包仅支持 PDF 版本 1.4。因此，如果您导入任何高于此值的 PDF，导入将无法正常工作并崩溃。您将需要购买商业版本 ( [https://www.setasign.com/products/fpdi-pdf-parser/details/](https://www.setasign.com/products/fpdi-pdf-parser/details/) )，或者只是将您的 PDF 保存在 1.4 版，这就是我们所做的。

这是我更新的代码：

```
require_once(APPPATH . 'third_party/tcpdf/tcpdf.php');
require_once(APPPATH . 'third_party/fpdi/fpdi.php');

class WatermarkerTCPDF extends FPDI {
    public $pdf, $file, $newFile,
            $wmText = "STACKOVERFLOW",
            $fontsize = 24,
            $fontfamily = 'ptsansnarrow400';

    /** $file and $newFile have to include the full path. */
    public function __construct($file = null, $newFile = null) {
        $this->pdf = new FPDI();
        //custom fonts
        //$this->fontfamily = $this->pdf->addTTFfont(APPPATH . 'third_party/tcpdf/ttf/ptsansnarrow400.ttf', 'TrueTypeUnicode', '');
        if (!empty($file)) {
            $this->file = $file;
        }
        if (!empty($newFile)) {
            $this->newFile = $newFile;
        }
    }

    /** $file and $newFile have to include the full path. */
    public static function applyAndSpit($file, $newFile = null) {
        $wm = new Watermarker($file, $newFile);

        if ($wm->isWaterMarked())
            return $wm->spitWaterMarked();
        else {
            $wm->doWaterMark();
            return $wm->spitWaterMarked();
        }
    }

    /** @todo Make the text nicer and add to all pages */
    public function doWaterMark() {
        $currentFile = $this->file;
        $newFile = $this->newFile;

        $pagecount = $this->pdf->setSourceFile($currentFile);

        for ($i = 1; $i <= $pagecount; $i++) {
            $tplidx = $this->pdf->importPage($i);
            $specs = $this->pdf->getTemplateSize($tplidx);
            $this->pdf->SetPrintHeader(false);
            $this->pdf->SetPrintFooter(false);
            $this->pdf->addPage($specs['h'] > $specs['w'] ? 'P' : 'L');
            $this->pdf->useTemplate($tplidx, null, null, 0, 0, true);

            // now write some text above the imported page
            $this->pdf->SetFont($this->fontfamily, '', $this->fontsize);
            $this->pdf->SetTextColor(204, 204, 204);
            //$this->pdf->SetXY($specs['w']/2, $specs['h']/2);
            $_x = ($specs['w']/2) - ($this->pdf->GetStringWidth($this->wmText, $this->fontfamily, '', $this->fontsize)/2.8);
            $_y = $specs['h']/2;
            $this->pdf->SetXY($_x, $_y);
            //$this->pdf->SetXY(0, 0);
            $this->pdf->setAlpha(0.3);
            $this->_rotate(45, 100, 100);
            $this->pdf->Write(0, $this->wmText);
            //$this->pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', $this->wmText, $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=true);
        }

        if (empty($newFile)) {
            header('Content-Type: application/pdf');
            $this->pdf->Output();
        } else {
            $this->pdf->Output($newFile, 'F');
        }
    }

    public function isWaterMarked() {
        //return (file_exists($this->newFile));
        $_file = $this->newFile;
        $file = file_get_contents($_file);
        force_download($file);
    }

    public function spitWaterMarked() {
        $_file = $this->newFile;
        $file = file_get_contents($_file);
        force_download($file);
        //return readfile($this->newFile);
    }

    protected function _rotate($angle, $x = -1, $y = -1) {
        if ($x == -1)
            $x = $this->pdf->x;
        if ($y == -1)
            $y = $this->pdf->y;
        //if ($this->pdf->angle != 0)
            //$this->pdf->_out('Q');
        $this->pdf->angle = $angle;

        if ($angle != 0) {
            $angle*=M_PI / 180;
            $c = cos($angle);
            $s = sin($angle);
            $cx = $x * $this->pdf->k;
            $cy = ($this->pdf->h - $y) * $this->pdf->k;

            $this->pdf->_out(sprintf(
                            'q %.5f %.5f %.5f %.5f %.2f %.2f cm 1 0 0 1 %.2f %.2f cm', $c, $s, -$s, $c, $cx, $cy, -$cx, -$cy));
        }
    }

    public function wmText($text = null)
    {
        $total = 20;
        if (!empty($text)) {
            $this->wmText = '';
            for ($i = 0; $i < $total; $i++) {
                $this->wmText .= ' ' . $text;
            }

        }

        return $this;
    }
} 
```

要使用它，只需：

```
try {
    //this is for CodeIgniter
    $this->load->library('WatermarkerTCPDF');

    //if your using it as a standard class in vanilla PHP just do:
    //require_once('PATH_TO_LIBRARY/WatermarkerPDF.php');

    //If you want to output the PDF to another file, you can supply
    //a second parameter: new WatermarkerTCPDF($file_path, $new_file_path);
    //just remember, the full path is required
    $watermark = new WatermarkerTCPDF($file_path);
    $watermark->wmText($this->session->userdata('email'));
    $watermark->doWaterMark();
} catch (Exception $e) {
    exit($e->getMessage());
} 
```

无论如何，希望有一天这会对某人有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-31T00:23:19.633

如果有人想使用 FPDF 并即时创建 pdf 而不必从文件中加载它，我就是这样做的。您将使用此类而不是 FPDF 类来实例化您的 PDF 对象。这应该在 pdf 在内存中创建之后但在输出之前运行：

```
<?php
include_once('fpdf.php');

class PDF_Rotate extends FPDF
{
    var $angle=0;
    public function ApplyWaterMarkToAllPages() {
        for($i = 0; $i < count($this->pages); $i++) {
            $this->page = $i;
            $this->ApplyWaterMark();
        }
    }

    private function ApplyWaterMark()
    {
        //Put the watermark
        $this->SetFont('Arial','B',60);
        $this->SetTextColor(255,192,203);
        $this->RotatedText(15,280,'D O N O T F I L E - S A M P L E ',50);
        $this->SetTextColor(0,0,0);
    }

    private function RotatedText($x, $y, $txt, $angle)
    {
        //Text rotated around its origin
        $this->rotate($angle,$x,$y);
        $this->Text($x,$y,$txt);
        $this->Rotate(0);
    }

    private function Rotate($angle,$x=-1,$y=-1)
    {
        if($x==-1)
            $x=$this->x;
        if($y==-1)
            $y=$this->y;
        if($this->angle!=0)
            $this->_out('Q');
        $this->angle=$angle;
        if($angle!=0)
        {
            $angle*=M_PI/180;
            $c=cos($angle);
            $s=sin($angle);
            $cx=$x*$this->k;
            $cy=($this->h-$y)*$this->k;
            $this->_out(sprintf('q %.5F %.5F %.5F %.5F %.2F %.2F cm 1 0 0 1 %.2F %.2F cm',$c,$s,-$s,$c,$cx,$cy,-$cx,-$cy));
        }
    }

    function _endpage()
    {
        if($this->angle!=0)
        {
            $this->angle=0;
            $this->_out('Q');
        }
        parent::_endpage();
    }
}
?> 
```

我有一个名为 Document 的类，我将所有内容都放入其中以进行抽象。这是它的输出函数。我创建了一个名为“applyWaterMark”的类级别变量来控制水印是否应用于文档。

```
 protected function OutputDocument() {
    if($this->applyWaterMark) {
      $this->pdf->ApplyWaterMarkToAllPages();
    }    
    $this->pdf->Output();
  } 
```

# css - 通过 WGET 提取时，Google 字体 CSS 不同

> ID：10468481
> 
> 赞同：2
> 
> 时间：2012-05-06T05:56:37.173
> 
> 标签：css, wget, google-webfonts

我正在尝试动态获取一个 Google Fonts css 文件，以便我可以将其解析为字体 URL。我遇到了一些奇怪的行为。相比：

[http://fonts.googleapis.com/css?family=Droid+Sans](http://fonts.googleapis.com/css?family=Droid+Sans) （如果重要，来自 Chrome）

至

```
WGET -qO- http://fonts.googleapis.com/css?family=Droid+Sans 
```

从 Chrome，我得到：

```
@font-face {
  font-family: 'Droid Sans';
  font-style: normal;
  font-weight: normal;
  src: local('Droid Sans'), local('DroidSans'), url('http://themes.googleusercontent.com/static/fonts/droidsans/v3/s-BiyweUPV0v-yRb-cjciBsxEYwM7FgeyaSgU71cLG0.woff') format('woff');
} 
```

但是 WGET 给了我：

```
@font-face {
  font-family: 'Droid Sans';
  font-style: normal;
  font-weight: normal;
  src: local('Droid Sans'), local('DroidSans'), url('http://themes.googleusercontent.com/static/fonts/droidsans/v3/s-BiyweUPV0v-yRb-cjciC3USBnSvpkopQaUR-2r7iU.ttf') format('truetype');
} 
```

[我在Google fonts external CSS Vs 在我的 css 中复制外部 css 的代码时](https://stackoverflow.com/questions/7203871/google-fonts-external-css-vs-copying-the-code-of-external-css-in-my-css)看到了 30 点的回答？声明谷歌根据谁请求文件提供不同的 CSS。任何人都知道我可以传递哪些 WGET 参数，以便它为我提供与我从 Chrome 获得的相同版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T06:10:12.653

```
wget -U "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_2) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.24 Safari/536.5" http://fonts.googleapis.com/css?family=Droid+Sans 
```

# jquery - jQuery点击驱动幻灯片（循环插件）

> ID：10468489
> 
> 赞同：1
> 
> 时间：2012-05-06T05:57:36.647
> 
> 标签：jquery, jquery-plugins, jquery-cycle

这似乎是一个非常基本的问题，因为我不熟悉 jQuery，但我在实现 jquery 循环插件时遇到了一些麻烦。我在 Jquery Cycle Plugin 页面上找到了上一个/下一个的代码：[jQuery Cycle Plugin - Intermediate Demos (Part 2)](http://jquery.malsup.com/cycle/int2.html) (Previous/Next example)

到目前为止，我有这个 [Js Fiddle](http://jsfiddle.net/xcNcx/q8Cam/)作为测试

这是我想要的动画效果的 jQuery：

```
$(document).ready(function() {
  $('#s2').cycle({ 
   fx:     'slideY', 
   speed:   300, 
   timeout: 0, 
   next:   '#next2', 
   prev:   '#prev2' 
  });
}); 
```

我有按钮以及一些测试图像，但我无法让按钮的动画正常工作。

我已经阅读了循环选项的文档，但是由于我对 jQuery 不太熟悉，所以我不明白如何让它工作，我已经准备好 fx 和速度，只是让按钮工作是我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:06:05.103

使用`<a>`按钮的标签。例如：

```
<a id="prev2" href="#">Prev</a> 
```

然后使用 CSS 设置您想要的样式。

确保在 jquery 框架之后包含一次 cycle.js，如下所示：

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.cycle.all.min.js"></script> 
```

# node.js - 为什么 fs.watchFile 在 Node 中调用了两次？

> ID：10468504
> 
> 赞同：3
> 
> 时间：2012-05-06T06:00:01.870
> 
> 标签：node.js

`Ubuntu 12.04` `Node v0.6.14` `CoffeeScript 1.3.1`

```
fs.watchFile coffee_eval, (e) ->
  console.log e
  result = spawn 'coffee', ['-bc', coffee_eval]
  msg = ''
  result.stderr.on 'data', (str) ->
    msg+= str
  result.stderr.on 'end', ->
    console.log 'msg: ', msg
  print "!! #{coffee_eval}\n" 
```

gist 上的完整代码：[https ://gist.github.com/2621576](https://gist.github.com/2621576)

每次我保存一个被观看的文件时，主函数都会被称为 twitce 而不是一次。
我的编辑器是 Sumlime Text 2。

输出的话可以看到：
![在此处输入图像描述](../Images/aec17a9a0b3a98e6393ed828c05b852c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T14:57:43.927

fs.watchFile 不稳定。从节点文档：

> fs.watchFile(filename, [options], listener)#
> 
> 稳定性：2 - 不稳定。如果可用，请改用 fs.watch。

您可以尝试`fs.watch`，但不幸的是它可能会遇到同样的问题。`fs.watch`在尝试创建类似的[监视脚本](https://github.com/mihaifm/simplemon)时，我在 Windows 上遇到了同样的问题。

解决方法是记录修改发生的时间，如果在几毫秒内触发第二次更改，则忽略它。有点难看，但它奏效了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-25T20:18:10.787

问题仍然存在，这是我找到的方法。

```
var actionDone = {}    
fs.watch('.', function(x,filename) {
        var path = './'+filename;
        var stats = fs.statSync(path);
        let seconds = +stats.mtime;
        if(actionDone[filename] == seconds) return;
        actionDone[filename] = seconds
       //write your code here
}); 
```

我们在继续之前检查上次修改时间是否不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T15:02:58.673

我建议尝试 node-inotify-plusplus ( [https://github.com/coolaj86/node-inotify-plusplus](https://github.com/coolaj86/node-inotify-plusplus) )，它比 fs.watchFile 或 fs.watch 对我来说效果更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-03T20:06:11.567

如果您使用下划线或 lodash，您可以考虑使用节流阀并丢弃后沿的调用。一个基本的例子是

```
var fs = require('fs');
var _ = require("lodash");

function FileWatcher (fileName)
{
    this.file = fileName;
    this.onChange = _.throttle(this.trigger, 100, {leading: false});
}
FileWatcher.prototype.observe = function ()
{
    fs.watch(this.file, this.onChange);
}
FileWatcher.prototype.trigger = function ()
{
    console.log("file changed :)");
}

var fileToWatch = __dirname + "/package.json";
new FileWatcher(fileToWatch).observe(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-19T05:52:28.700

为了解决这个问题，我会跟踪之前的“文件修改”时间戳，如果值相同，则不运行我的正常回调代码。

```
var filename = "/path/to/file";
var previousMTime = new Date(0);
var watcher = fs.watch(filename, {
    persistent: false
}, function(){
    fs.stat(filename, function(err, stats){
        if(stats.mtime.valueOf() === previousMTime.valueOf()){
            console.log("File Update Callback Stopped (same revision time)");
            return;
        }
        previousMTime = stats.mtime;

        // do your interesting stuff down here
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-26T07:06:21.423

每次收到更新时，我通过将“忽略”标志从 false 翻转为 true 来解决这个问题，从而忽略每个第二个事件。**但**我还发现，有时，对文件的更改只会导致*一次*更新。我不确定是什么原因造成的，但它似乎发生在更新非常频繁并且这些更新是附加的（`>>`）时。我没有观察到任何单个更改触发两个以上事件的实例。

这个问题有更多关于[这个问题](https://stackoverflow.com/questions/12978924/fs-watch-fired-twice-when-i-change-the-watched-file/32794392#32794392)的讨论。我还在那里为我的解决方案发布了一些示例代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-30T09:07:34.020

另一个比`fs.watch`or更好的 npm 模块建议`fs.watchFile`：

[https://github.com/paulmillr/chokidar/](https://github.com/paulmillr/chokidar/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-27T04:45:39.623

它与原始问题没有直接关系，但是您知道这句话是什么意思吗？（来自`fs.watch` [文档](https://nodejs.org/api/fs.html#fs_fs_watch_filename_options_listener)）。

> 另请注意，侦听器回调附加到 fs.FSWatcher 触发的“更改”事件，但它与 eventType 的“更改”值不同。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-08T13:15:31.167

现在（至少）已经解决了这个问题`fs.watch`。我没有尝试`fs.watchFile`，因为 NodeJS 文档不推荐它。

*   `change`每次修改文件时发生一个事件
*   更改文件名时的2 个`rename`事件，一个用于当前名称，一个用于新名称
*   新创建的文件（从其他位置复制）或删除的文件的一个`rename`事件。

我的环境：macOS 10.12.6 和 NodeJS v11.10.1

# php - php cookie 在第一次读取时不起作用

> ID：10468509
> 
> 赞同：0
> 
> 时间：2012-05-06T06:00:32.877
> 
> 标签：php, cookies

我是 PHP 的初学者，正在学习使用 cookie 登录。请任何人检查我的代码以查看我的问题，或者让我如何解决此问题。

当我第一次打开页面时，cookie 不起作用。当我重复打开该链接时它会起作用。但是，在使用函数 include 和 header 后，我仍然无法使其工作 代码之一是：

一个代码 cookie.php 是：

```
<?php
setcookie("cookiename",$_REQUEST['name']);
if(isset($_COOKIE['cookiename'])){
$cookieSet = ' The Cookie is ' .  $_COOKIE['cookiename'];
} else {
$cookieset = ' No Cookie has been set';
}
setcookie("cookiepwd",$_REQUEST['pwd']);
print_r($_COOKIE);
?> 
```

当我第一次运行这段代码时，它不会显示任何东西。我可以在第二次看到 cookie 数据。从某些网站上说，cookie 不会在同一页面上被读取。

所以我将 print_r($_COOKIE) 移动到第二个 php 文件，并将函数 include() 或 header() 添加到上述文件，但两者都不起作用。

Cookie2.php：

```
<?php
setcookie("cookiename",$_REQUEST['name']);
if(isset($_COOKIE['cookiename'])){
$cookieSet = ' The Cookie is ' .  $_COOKIE['cookiename'];
} else {
$cookieset = ' No Cookie has been set';
}
setcookie("cookiepwd",$_REQUEST['pwd']);
include(‘printcookie.php’);
//or header("Location: printcookie.php")
?> 
```

打印cookie.php：

```
<?php
print_r($_COOKIE);
?> 
```

非常感谢您提前回答！

米歇尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T06:03:14.833

`setcookie`仅设置标头，即发送给客户端。它不会改变`$_COOKIE`超全球。

另一方面 -填满了**从客户端**`$_COOKIE`发送的 cookie

 **所以在第一步 - 你设置了 cookie`setcookie`并且没有任何内容，`$_COOKIE`因为客户端还没有发送它，并且只会在下一个请求时发送。

而且没有办法做你想做的事，而不是`$_COOKIE`手动修改

PS：将用户密码放在cookie中是个坏主意

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T06:23:15.393

给 zerkms 答案，但我只想重申：

1.  Cookie 对于存储一些信息（例如用户的主题偏好或首选起始页等）来说并不坏。它们从被用于身份和身份验证处理中获得了不好的代表。那里有基本上具有“isAdmin = 0”的cookie，以控制用户访问。很*容易*将其更改为`isAdmin=1`并进行实地考察。由于您是 PHP 新手，所以现在就花时间了解会话，而这对您来说是全新的。

2.  当您使用 设置 cookie 时`setcookie`，您将使用 cookie 信息向浏览器发送 HTTP 标头。然后，浏览器将在以后的任何请求中将该 cookie 传回给服务器。`$_COOKIE`全局变量保存从浏览器传递到服务器的 cookie 信息。

3.  由于您`$_REQUEST`用于获取 cookie 名称，因此您无需检查 cookie（否则您将没有数据来正确设置它？）。所以考虑走这条路：

    ```
    if(!isset($_COOKIE['cookiename'])) {
          $name = $_POST['name']);
          setcookie("cookiename",$name);
     } else {
        $name = $_COOKIE['cookiename']);
     }

    echo "Welcome back $name!"; 
    ```

如果他们清除 cookie 等，这也将有所帮助。

但实际上，更安全的路线是：

```
session_start();
if(!isset($_SESSION['name'])){
    $_SESSION['name'] = $_POST['name']);
}
if(!isset($_SESSION['pwd'])){
    $_SESSION['pwd'] = $_POST['pwd']);
}

$name =  $_SESSION['name'];
$pwd = $_SESSION['pwd']; 
```

即便如此，对于严重的网络安全来说，这也是不受欢迎的，您应该简单地根据存储的哈希检查密码，然后将其删除，使用其他全局变量来确认会话完整性。但是现在有一个完整的 StackExchange。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-20T07:13:49.127

作为一种解决方法，您可以在检查 cookie 后使用 location() 以访问存储的数据。

但请注意，如果任何内容（包括脚本中的中断和空白）已发送到浏览器，则 location() 会失败。**

# java - iOS Java 套接字异常

> ID：10468512
> 
> 赞同：1
> 
> 时间：2012-05-06T06:00:41.970
> 
> 标签：java, ios, post, jvm, socketexception

我在 iOS 上运行 JVM。

当我尝试使用来自网页的 POST 请求获取数据并且无法建立连接（客户端）时，出现以下错误：

```
java.net.SocketException: Invalid argument
  at gnu.java.nio.VMChannel.getpeername(Native Method)
  at gnu.java.nio.VMChannel.getPeerAddress(VMChannel.java:471)
  at gnu.java.nio.SocketChannelImpl.isConnected(SocketChannelImpl.java:194)
  at gnu.java.nio.SocketChannelImpl.read(SocketChannelImpl.java:216)
  at org.apache.mina.transport.socket.nio.SocketIoProcessor.read(SocketIoProcessor.java:218)
  at org.apache.mina.transport.socket.nio.SocketIoProcessor.process(SocketIoProcessor.java:198)
  at org.apache.mina.transport.socket.nio.SocketIoProcessor.access$400(SocketIoProcessor.java:45)
  at org.apache.mina.transport.socket.nio.SocketIoProcessor$Worker.run(SocketIoProcessor.java:485)
  at org.apache.mina.util.NamePreservingRunnable.run(NamePreservingRunnable.java:51)
  at java.lang.Thread.run(Thread.java:743) 
```

我用来执行发布请求的代码（请注意，数据可能是一个空字符串）：

```
URL url = new URL(urlstring);
URLConnection conn = url.openConnection();
conn.setDoOutput(true);
OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
wr.write(data);
wr.flush();

// Get the response
BufferedReader rd = new BufferedReader(new InputStreamReader(conn
     .getInputStream())); 
```

此外，请求在单独的工作线程中执行。发生这种情况时，程序的其他功能不会受到影响。

我认为这与正在运行的 JVM 有关。知道为什么会抛出该错误吗？你将如何阻止它显示？

谢谢

# ruby - 如何将字符串转换为对象？

> ID：10468515
> 
> 赞同：0
> 
> 时间：2012-05-06T06:01:31.417
> 
> 标签：ruby, json

我想转换字符串：

```
"{\"message\":\"success\"}" 
```

进入：

```
{:message => "success"} 
```

在 Ruby 中有没有简单的方法来做到这一点？

`success`可能不是一个简单的字符串，而是另一个可能是另一个对象的相同形式的字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T14:32:06.597

`JSON#parse`可以选择制作哈希键的符号（奇怪地命名为“symbolize_names”）

```
require 'json'
p some_hash = JSON.parse("{\"message\":\"success\"}", {:symbolize_names=>true})
#=> {:message=>"success"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T06:04:44.180

你需要一个 JSON 解析器。查看[http://www.json.org](http://www.json.org)并找到一个合适的解析器，它将返回适当的 Ruby 类。

这看起来是一个不错的候选人： http: [//flori.github.com/json/](http://flori.github.com/json/)

[另请参阅下面关于Ruby 库中](http://ruby-doc.org/stdlib-1.9.3/libdoc/json/rdoc/index.html)的标准 JSON 解析器的“mu 太短”评论。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-06T06:28:18.853

以下可能是任何丑陋的方法，但只是另一种方法：

```
str=["{\"message\":\"success\"}", "{\"new_message\":\"fail\"}"] #=> ["{\"message\":\"success\"}", "{\"new_message\":\"fail\"}"]

new=[];str.each{|string| new<<string.gsub(/["{}]/,'').split(':')}
new #=> [["message", "success"], ["new_message", "fail"]]
new=new.transpose #=> => [["message", "new_message"], ["success", "fail"]]
hash=Hash.new #=> {}
new[0].each_with_index{|x,i| hash[x.to_sym]=new[1][i]} #=> ["message", "new_message"]
hash #=> {:message=>"success", :new_message=>"fail"} 
```

让我知道它是否有帮助。

祝你好运

# excel - Excel 公式的类似 IDE 的解决方案

> ID：10468518
> 
> 赞同：1
> 
> 时间：2012-05-06T06:02:17.250
> 
> 标签：excel, ide

我正在使用一些带有大量嵌套`if`语句的公式制作一个复杂的电子表格，我想知道是否有一个很好的类似 IDE 的解决方案。一段时间后它会变得非常复杂，知道括号在哪里关闭并记住`if`我在哪个语句可能会在一段时间后感到困惑。

我试过将它粘贴到 NetBeans 和 Notepad+ 中，这有助于括号，如果我将它空白，那么这有助于我记住我所在的 if 语句。但是，我想要一个更好的解决方案

我知道使用 VBA 可以使我尝试做的任何事情的效率提高一百万倍，但我不想这样做，这不是这个问题的目的。

我怀疑这是否可能，但如果有人发现我可以做一些类似[IntelliSense](http://en.wikipedia.org/wiki/IntelliSense)的功能，那就太棒了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T22:18:19.620

我用记事本++。我发现这是我能找到的最好的解决方案。对于任何感兴趣的人，这是我的最终公式……有点乱。这是我为了好玩/体验/其他什么而做的一个[按小时计费的电子表格。](http://blog.kentcdodds.com/2012/05/06/hourly-pay-spreadsheet/)

```
=if(
    row()>=($J$4+2)
    , ""
    , if(
        row() = 2
        , if(
            or(
                MID(TEXT(datevalue($J$3), "ddEE"),3,9) = "Sat"
                , MID(TEXT(datevalue($J$3), "ddEE"),3,9) = "Sun"
            )
            , if (
                MID(TEXT(datevalue($J$3), "ddEE"),3,9) = "Sat"
                , if (
                    $J$8="No"
                    , if (
                        $J$9="No"
                        , MID(TEXT(datevalue($J$3)+2, "ddEE"),3,9)&" - "&datevalue($J$3)+2
                        , MID(TEXT(datevalue($J$3)+1, "ddEE"),3,9)&" - "&datevalue($J$3)+1
                    )
                    , MID(TEXT(datevalue($J$3), "ddEE"),3,9)&" - "&datevalue($J$3)
                )
                , if (
                    $J$9="No"
                    , MID(TEXT(datevalue($J$3)+1, "ddEE"),3,9)&" - "&datevalue($J$3)+1
                    , MID(TEXT(datevalue($J$3), "ddEE"),3,9)&" - "&datevalue($J$3)
                )
            )
            , MID(TEXT(datevalue($J$3), "ddEE"),3,9)&" - "&datevalue($J$3)
        )
        , if(
            or(
                isnumber(
                    search(
                        "Sat",A1
                    )
                )
                ,isnumber(
                    search(
                        "Fri"
                        , A1
                    )
                )
            )
            ,if(
                isnumber(
                    search(
                        "Sat"
                        , A1
                    )
                )
                ,if(
                    $J$9="No"
                    , MID(TEXT(datevalue(right(A1,len(A1)-5))+2, "ddEE"),3,9)&" - "&datevalue(right(A1,len(A1)-5))+2
                    , MID(TEXT(datevalue(right(A1,len(A1)-5))+1, "ddEE"),3,9)&" - "&datevalue(right(A1,len(A1)-5))+1)
                , if(
                    isnumber(
                        search(
                            "Fri"
                            , A1
                        )
                    ),
                    if (
                        $J$8="No"
                        , if (
                            $J$9="No"
                            , MID(TEXT(datevalue(right(A1,len(A1)-5))+3, "ddEE"),3,9)&" - "&datevalue(right(A1,len(A1)-5))+3
                            , MID(TEXT(datevalue(right(A1,len(A1)-5))+2, "ddEE"),3,9)&" - "&datevalue(right(A1,len(A1)-5))+2
                        )
                        , MID(TEXT(datevalue(right(A1,len(A1)-5))+1, "ddEE"),3,9)&" - "&datevalue(right(A1,len(A1)-5))+1
                    ),
                )
            )
            , MID(TEXT(datevalue(right(A1,len(A1)-5))+1, "ddEE"),3,9)&" - "&datevalue(right(A1,len(A1)-5))+1
        )
    )
) 
```

# java - Android 是否能够处理这样的单个大型活动？

> ID：10468525
> 
> 赞同：0
> 
> 时间：2012-05-06T06:03:31.580
> 
> 标签：java, android

我正在制作一个Android音板。我目前有 12 页针对此特定类别。每个页面都有自己的活动，每个页面有 10 个按钮。

今天有人问我为什么我不只使用一个活动并在页面之间切换 setcontentview (XML) 而不是有这么多活动。

我想了想，这似乎不是一个坏主意。但我很好奇它是否真的会更好。

这意味着这个活动将为其 onclick 和 onlongclick 方法提供 100 多个 switch case 语句。它将有超过 200 个变量。我将不得不添加 200 多个侦听器（尽管我认为我可以在加载特定页面时设置 10 个侦听器，而不是在开始时全部设置。我还可以在显示新 XML 之前释放当前的侦听器）。

Android 是否能够处理这样的单个活动？我计划添加更多声音，所以也许有一天我可能有 20 页左右。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T06:17:28.117

我将分别解决您的一些观点：

*   安卓能不能搞定。是的。尽管如此，你应该对设计事物的方式保持聪明。

*   根据您运行的版本，您应该查看`TabActivity`or 或`Fragment`s。`Button`如果你根据这些来构建你的活动，你可以在任何给定时间确定哪十个左右有听众。

*   这里有一个更激进的想法：创建一个母类，扩展`Activity`并传递它的构造函数关于显示哪些按钮的信息。这样，您只有 10 个左右的按钮`Activity`，但您有 12 个活动。

*   更激进的想法：扩展按钮并将其作为扩展的内部类`Activity`。这可能会引导你到一些有趣的地方。

如果你问一个*稍微*好一点的问题，我可以给你一个更好的答案，但这里有一些想法，随它去吧。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T06:21:09.850

是的，让这一切成为一项活动。不同`Activities`的应该只真正用于完全不同的用例。考虑在一个 Activity 中使用 a`ListView`或 a`GridView`或“ViewPager”。

如果你最终使用了一个`ListView`或任何需要适配器的东西，你的 Activity 应该如下所示：

```
class MyActivity extends Activity{

 int mySounds[] = {R.raw.s1, R.raw.s2}; //etc. could also be a 2d array, one for each page of sounds.

 protected void onCreate(Bundle b)
 {
   setContentView(R.layout.myactivity);

   ListView lv = (ListView) findViewById(R.id.myactivity_listView);

   lv.setAdapter(new SoundAdapter(this));

 }

class SoundAdapter extends BaseAdapter{
  Context cont;
  SoundAdapter(Context c){
   this.cont = c;
  }

  getView(int id, View convertView){
   if(convertView == null){
     ...
     //inflate view to be a row/gridcell
   }

   convertView.setOnClickListener(new SoundClickListener(mySounds[id]));
  }

}

 class SoundClickListener extends View.OnClickListener{

   int resId;

   public SoundClickListener(int resId)
   {
     this.resId = resId;
   }

   protected void onClick(View v){
     playSoundWithId(resId);
   }

 }

} 
```

# python - 如何检测关闭的套接字或实现 Apple 推送通知提供程序

> ID：10468528
> 
> 赞同：1
> 
> 时间：2012-05-06T06:03:38.340
> 
> 标签：python, sockets

我正在开发一个向我的 iPhone 应用程序发送推送通知的简单 Web 服务器。我尝试过使用现有的 Python 包，但它们都遇到了这个问题：

当发送无效令牌时，Apple 将发回错误消息并关闭套接字。我需要发送大量推送通知，但如果其中一个的令牌无效，其余的将不会发送给 Apple。

所以目前，我的代码看起来像这样：

```
for m in messages:
    socket.send(m) 
```

但是当第一条消息的令牌无效时，Apple在收到第一条消息后立即关闭套接字，套接字仍然发送所有消息而没有任何错误。

我负担不起`recv`在每条消息后都超时，因为这将花费太长时间。我该怎么做才能知道套接字何时关闭并打开一个新的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:15:14.883

如果套接字已在另一端关闭，则`recv`它应该返回`0`或导致错误。

* * *

您可以检查发送的字节数`send`。

* * *

更新：您可能想在[这里阅读](https://stackoverflow.com/q/6404008/694576)另一种可能性来监视套接字连接是否仍然存在。

* * *

Update-1：另一种方法可能是在写入操作的同时在相关套接字上运行一个不断读取的线程......正如你提到的：时间是你的极限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T07:36:43.473

我了解到，在 TCP 级别我无法找出发送了哪些数据包。我决定只发送所有消息，然后等待（超时）来自 Apple 的任何错误消息。如果有任何错误，请重复发送失败的错误。

我决定这样做，因为获得无效令牌应该是罕见的事件，并且大多数情况下所有通知都会通过。

# google-app-engine - 如何对 db.ReferenceProperty 属性进行排序？

> ID：10468529
> 
> 赞同：0
> 
> 时间：2012-05-06T06:03:42.950
> 
> 标签：google-app-engine, google-cloud-datastore, gql

我有两种这样的：

```
class A(db.Model):
    propertyA = db.XxxProperty(required=True)

class B(db.Model):
    reference = db.ReferenceProperty(A,collection_name="Bs",required=True)
    date = db.DateTimeProperty(auto_now_add=True) 
```

现在我想让 A.Bs 有订单，你知道，意思是使用 B.date 来订购 A.Bs。我怎样才能做到这一点？我应该写什么 GQL 查询？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:18:55.467

尝试这个

```
a.Bs.order("date") 
```

或（降序）：

```
a.Bs.order("-date") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:04:55.293

Shay 的建议简洁而正确，但我认为添加更多细节会有所帮助。

使用与问题中相同的两个类示例，我创建了以下类来呈现我的页面（GAE、python、jinja2）

```
class MainPage(Handler):
    def get(self):
        a_id = '1001'  # magically get id of target entity a somehow
        # get key using a_id, then retrieve entity using that
        a = db.get(db.Key.from_path('A', a_id, parent=reg_key()))
        # look up the collection and assign it to b
        b = a.Bs
        # sort items in collection in reverse
        b.order('-created')
        # pass b to the template to get rendered (I use a custom method in my Handler)
        self.render('main.html', b = b) 
```

# android - ELF 二进制文件中的 .init_array 部分是什么？

> ID：10468531
> 
> 赞同：6
> 
> 时间：2012-05-06T06:03:49.600
> 
> 标签：android, c, arm, loader, elf

每篇文章都说 .init_array 部分是一个函数数组，但根据我的经验，它不是。

这是我为 Android 编译的 libc.so 的 .init_array：

```
$ prebuilt/linux-x86/toolchain/arm-eabi-4.4.3/bin/arm-eabi-objdump -s -j .init_array out/target/product/e910/obj/SHARED_LIBRARIES/libc_intermediates/LINKED/libc.so 

out/target/product/e910/obj/SHARED_LIBRARIES/libc_intermediates/LINKED/libc.so:     file format elf32-littlearm

Contents of section .init_array:
 42000 e1620100 ffffffff 75940200 00000000  .b......u....... 
```

它包含 4 个单词（小端序）：

```
000162e1
ffffffff
00029475
00000000 
```

`000162e1`并且`00029475`看起来像一些函数指针：

```
000162e0 <__libc_preinit>:
 * as soon as the shared library is loaded.
 */
void __attribute__((constructor)) __libc_preinit(void);

void __libc_preinit(void)
{
   162e0:   b510        push    {r4, lr}
     * Note that:
     * - we clear the slot so no other initializer sees its value.
     * - __libc_init_common() will change the TLS area so the old one
     *   won't be accessible anyway.
     */
    void**      tls_area = (void**)__get_tls();
   162e2:   4805        ldr r0, [pc, #20]   (162f8 <__libc_preinit+0x18>)
    unsigned*   elfdata   = tls_area[TLS_SLOT_BIONIC_PREINIT];

    tls_area[TLS_SLOT_BIONIC_PREINIT] = NULL;
   162e4:   2200        movs    r2, #0
     * Note that:
     * - we clear the slot so no other initializer sees its value.
     * - __libc_init_common() will change the TLS area so the old one
     *   won't be accessible anyway.
     */
    void**      tls_area = (void**)__get_tls();
   162e6:   6803        ldr r3, [r0, #0]
    unsigned*   elfdata   = tls_area[TLS_SLOT_BIONIC_PREINIT];
   162e8:   68d8        ldr r0, [r3, #12]

    tls_area[TLS_SLOT_BIONIC_PREINIT] = NULL;
   162ea:   60da        str r2, [r3, #12]

    __libc_init_common(elfdata);
   162ec:   f010 fed6   bl  2709c <__libc_init_common>

    /* Setup malloc routines accordingly to the environment.
     * Requires system properties
     */
    extern void malloc_debug_init(void);
    malloc_debug_init();
   162f0:   f7ff fd0e   bl  15d10 <malloc_debug_init>
}
   162f4:   bd10        pop {r4, pc}
   162f6:   46c0        nop         (mov r8, r8)
   162f8:   ffff0ff0    .word   0xffff0ff0 
```

并且`00029475`是：

```
00029474 <__guard_setup>:

/* Initialize the canary with a random value from /dev/urandom.
 * If that fails, use the "terminator canary". */
static void __attribute__ ((constructor))
__guard_setup(void)
{
   29474:   b570        push    {r4, r5, r6, lr}
    int fd;

    fd = open("/dev/urandom", O_RDONLY);
   29476:   4810        ldr r0, [pc, #64]   (294b8 <__guard_setup+0x44>)
   29478:   2100        movs    r1, #0
   2947a:   4478        add r0, pc
   2947c:   f7ef f89a   bl  185b4 <open>
    if (fd != -1) {
        ssize_t len = read(fd, &__stack_chk_guard,
   29480:   4d0e        ldr r5, [pc, #56]   (294bc <__guard_setup+0x48>)
   29482:   447d        add r5, pc
static void __attribute__ ((constructor))
__guard_setup(void)
{
    int fd;

    fd = open("/dev/urandom", O_RDONLY);
   29484:   1c06        adds    r6, r0, #0
    if (fd != -1) {
   29486:   1c43        adds    r3, r0, #1
   29488:   d00a        beq.n   294a0 <__guard_setup+0x2c>
        ssize_t len = read(fd, &__stack_chk_guard,
   2948a:   4b0d        ldr r3, [pc, #52]   (294c0 <__guard_setup+0x4c>)
   2948c:   2204        movs    r2, #4
   2948e:   58e9        ldr r1, [r5, r3]
   29490:   f7e3 e8fe   blx c690 <read>
   29494:   1c04        adds    r4, r0, #0
                           sizeof(__stack_chk_guard));
        close(fd);
   29496:   1c30        adds    r0, r6, #0
   29498:   f7e3 e96a   blx c770 <close>
        if (len == sizeof(__stack_chk_guard))
   2949c:   2c04        cmp r4, #4
   2949e:   d009        beq.n   294b4 <__guard_setup+0x40>
            return;
    }

    /* If that failed, switch to 'terminator canary' */
    ((unsigned char *)&__stack_chk_guard)[0] = 0;
   294a0:   4c07        ldr r4, [pc, #28]   (294c0 <__guard_setup+0x4c>)
    ((unsigned char *)&__stack_chk_guard)[1] = 0;
    ((unsigned char *)&__stack_chk_guard)[2] = '\n';
    ((unsigned char *)&__stack_chk_guard)[3] = 255;
   294a2:   2101        movs    r1, #1
        if (len == sizeof(__stack_chk_guard))
            return;
    }

    /* If that failed, switch to 'terminator canary' */
    ((unsigned char *)&__stack_chk_guard)[0] = 0;
   294a4:   2600        movs    r6, #0
   294a6:   5928        ldr r0, [r5, r4]
    ((unsigned char *)&__stack_chk_guard)[1] = 0;
    ((unsigned char *)&__stack_chk_guard)[2] = '\n';
    ((unsigned char *)&__stack_chk_guard)[3] = 255;
   294a8:   424a        negs    r2, r1
    }

    /* If that failed, switch to 'terminator canary' */
    ((unsigned char *)&__stack_chk_guard)[0] = 0;
    ((unsigned char *)&__stack_chk_guard)[1] = 0;
    ((unsigned char *)&__stack_chk_guard)[2] = '\n';
   294aa:   250a        movs    r5, #10
        if (len == sizeof(__stack_chk_guard))
            return;
    }

    /* If that failed, switch to 'terminator canary' */
    ((unsigned char *)&__stack_chk_guard)[0] = 0;
   294ac:   7006        strb    r6, [r0, #0]
    ((unsigned char *)&__stack_chk_guard)[1] = 0;
   294ae:   7046        strb    r6, [r0, #1]
    ((unsigned char *)&__stack_chk_guard)[2] = '\n';
   294b0:   7085        strb    r5, [r0, #2]
    ((unsigned char *)&__stack_chk_guard)[3] = 255;
   294b2:   70c2        strb    r2, [r0, #3]
}
   294b4:   bd70        pop {r4, r5, r6, pc}
   294b6:   46c0        nop         (mov r8, r8)
   294b8:   0001451d    .word   0x0001451d
   294bc:   0001a09e    .word   0x0001a09e
   294c0:   ffffff1c    .word   0xffffff1c 
```

## 有3个问题：

1.  为什么有 1 个字节的偏移量？在 arm 架构中，所有指令都与 2 字节边界对齐，但它们不是。
2.  `ffffffff`那个数组里有什么？
3.  `00000000`那个数组里有什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T07:28:16.210

对于问题 #1，查看反汇编代码，您的 ARM 代码处于 Thumb 模式 - Thumb 指令的地址生成时设置了最低有效位，以便在从标准 ARM 模式调用时触发将处理器切换到 Thumb 模式。为了兼容性，我认为即使 ARM 处理器是 Thumb-only，通常也会这样做。

对于数字 2 和 3，来自[Android 链接器的自述文件](https://android.googlesource.com/platform/bionic/+/android-4.2_r1/linker/README.TXT)：

> DT_INIT_ARRAY
> 
> 指向必须按顺序调用以执行初始化的函数地址数组。数组中的某些条目可以是 0 或 -1，应该被忽略。
> 
> 注意：这通常存储在 .init_array 部分

# linux - Linux sys_call_table rip 相对寻址 x86_64

> ID：10468533
> 
> 赞同：1
> 
> 时间：2012-05-06T06:04:17.720
> 
> 标签：linux, system-calls

我正在尝试在 Linux x86_64 上获取 sys_call_table 的偏移量。

首先，我通过从 MSR_LSTAR 读取指向 system_call 条目的指针，这是正确的

```
static unsigned long read_msr(unsigned int msr)
{

    unsigned low, high;
    asm volatile("rdmsr" : "=a" (low), "=d" (high) : "c" (msr));
    return ((low) | ((u64)(high) << 32));
} 
```

然后我解析它以找到调用指令的操作码，它也是正确的

```
#define CALL_OP 0xFF
#define CALL_MODRM 0x14
static unsigned long find_syscall_table(unsigned char *ptr)
{

  //correct
  for (; (*ptr != CALL_OP) || (*(ptr+1) != CALL_MODRM); ptr++);

  //not correct
  ptr += *(unsigned int*)(ptr + 3);
  pr_info("%lx", (unsigned long)ptr);

  return ptr;
} 
```

但是我在调​​用操作码后未能获得地址。ptr 的第一个字节是操作码，然后是 ModRM 字节，然后是 SIB，然后是 32 位位移，所以我将 3 添加到 ptr 并将其取消引用为整数值，然后将其添加到 ptr，因为它是 %RIP，并且地址是相对于 RIP 的。但是结果值是错误的，它与我在 gdb 中看到的值不一致，所以我错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:10:43.200

它不是 x7e9fed00 而是 -0x7e9fed00 - 负位移。

那是 2 的补码负数 0x81601300 的符号大小形式

它由小端处理器存储为“00 13 60 81”

* * *

但是，不知道您是否会在结果地址中找到 sys_call_table。作为另一种想法，似乎有些人通过在内存中搜索指向应该在其中列出的函数的已知指针来找到它。

# oracle - SQL Developer - 没有为 SQL 类型错误注册的读者

> ID：10468535
> 
> 赞同：3
> 
> 时间：2012-05-06T06:04:32.037
> 
> 标签：oracle, oracle-sqldeveloper

我正在使用 Oracle 11g。我使用已安装的 SQL Developer 版本将数据导出到名为“export.sql”的 sql 文件中。现在，我已经下载了 3.1.07 的新版本，当我尝试通过单击树视图并选择表 | 导入数据时 导入数据并导航到“export.sql”，我收到以下错误：

> **没有为 sql 类型注册阅读器**

当我第一次启动应用程序时，它会询问 java.exe 的路径，我已经显示该路径和应用程序已启动。我已经从下载路径（**C:\users\kaushik\Downloads\sqldeveloper**）启动了应用程序

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-04-10T13:16:08.530

您可以直接从 sql developer 调用该文件。

示例：如果您将文件保存到 c:\Oracle\MyBackups\Export.sql 然后从 Sql Developer 中连接到您的数据库并使用 sql 命令：

@C:\Oracle\MyBackups\Export.sql

这将执行 Export.Sql 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T09:46:41.070

1.  如果你有一个有效的 SQL 文件，你只需要执行脚本。打开文件（文件 | 打开并导航到 export.sql），点击运行脚本按钮（Windows 上的 F5），然后选择要使用的连接。数据导入向导支持多种不同的文件格式（Excel、CSV 等）。它不支持 SQL 文件。如果您想问开发人员为什么他们不支持 SQL（或者为什么他们使用通用文件导航对话框而不是对不同类型的文件使用不同的对话框），您可以[在 OTN 上的 SQL 开发人员论坛](https://forums.oracle.com/forums/forum.jspa?forumID=260)中询问他们。我认为问题在于大多数 SQL 脚本包含的不仅仅是简单的`INSERT`语句，而且要弄清楚任何特定的脚本是否实际上只是一堆`INSERT`可用于导入数据的语句。
2.  是的，SQL Developer 是用 Java 编写的，因此您需要安装适当版本的 JVM。不同的 SQL Developer 下载选项包括捆绑的 JVM，或者您可以下载较小的文件并使用已安装的 JVM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T06:15:43.027

与数据库建立会话的 oracle 客户端工具之一是 sqlDeveloper 及其图形界面工具，使用**Java Lang**编程， 独立于 oracle_home 安装，它是一个独立产品，当然它需要 SDK 或 JDK 才能工作，确保设置路径并检查它阅读了这个链接[http://www.ehow.com/how_5127784_set-java-path.html](http://www.ehow.com/how_5127784_set-java-path.html)

所有这一切，如果 sql developer 没有运行和其他类似的问题，这个要回答

***需要JDK还是什么？***是的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-14T18:22:19.550

使用 sql Developer 更高版本我已升级到版本 20.2.0.175 问题已解决

# java - 如何跟踪 Joda 日期缓冲区中的非空字段

> ID：10468546
> 
> 赞同：0
> 
> 时间：2012-05-06T06:07:29.690
> 
> 标签：java, jodatime

我正在编写一组对象，它们应该能够更改[Joda Time](http://www.google.it/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CH8QFjAA&url=http://joda-time.sourceforge.net/&ei=HxCmT4qyBuPl4QSq6PiGCQ&usg=AFQjCNH25QvdckCfXWVVnS-A2r46o4wp6g) MutableDateTime 实例中的字段。

每个对象都按顺序应用到缓冲区，当应用所有对象时，将构建一个完整有效的 MutableDateTime。

每个实例都必须能够知道集合中的其他实例已经设置了哪些日期时间字段。

我被卡住了，因为我遇到了以下问题：

1.  如何在所有日期时间字段中创建具有空值的 MutableDateTime 实例，以便将其用作要构建的初始值？
2.  我怎么知道 MutableDateTime 的某些字段是否已设置？

MutableDateTime 在内部跟踪它在一个长实例字段中的数据，该字段初始化为从时代开始到现在经过的毫秒数。因此，它已将所有字段设置为某个值。

你知道 MutableDateTime 是否有一些空值的概念吗？

**编辑：**

正如我在回复中所展示的那样，我按照弗拉基米尔的建议使用管理器类开发了一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:25:04.690

您应该创建“经理”类来记住已经设置的字段。`MutableDateTime`如果用户在设置所有字段之前尝试检索实例，它应该抛出异常。

如果您始终设置所有字段，`MutableDateTime`则 [1] 并不重要（值将被覆盖）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T10:34:02.313

我终于改变了最初的设计，并完全按照 Vadim Ponomarev 的建议实现了它。由于 Joda 缓冲区中的每个字段类型都有相应的 DateTimeFieldType 实例，因此我使用私有 Set 对象来跟踪存在的字段。

下面的代码显示了我是如何完成的：

```
 private final Set<DateTimeFieldType> fieldTypes = Sets.newHashSet();

    /**
 * Allow to set to or reset one of the DateTimeFieldType fields 
 * @param fieldType the DateTimeFieldType field to change
 * @param value the value to set it
 */
    public void changeField(DateTimeFieldType fieldType, boolean value) {
        if (value)
            fieldTypes.add(fieldType);
        else
            fieldTypes.remove(fieldType);
    }

    /**
 * Check if one of the DateTimeFieldType is present in this set.
 * @param fieldType The field type to check for presence.
 * @return true if the DateTimeFieldType is present, otherwise false
 */
    public boolean isFieldSet(DateTimeFieldType fieldType) {
        return !fieldTypes.contains(fieldType);
    } 
```

我还添加了一些实用方法，允许一次更改日期的所有字段和时间的所有字段。这在客户端编写代码以简化对日期字段集的常见操作时可能很有用。

```
/**
 * Allow to set the fields that build the time part
 * of a date time
 * <p/>
 *
 * @param value value to set the DateTime fields
 */
    public void changeTimeFields(boolean value) {

        changeField(DateTimeFieldType.hourOfDay(), value);
        changeField(DateTimeFieldType.minuteOfHour(), value);
    }

/**
 * Allow to set the fields that build the date part
 * of a date time
 * <p/>
 *
 * @param value value to set the DateTime fields
 */
    public void changeDateFields(boolean value) {
        changeField(DateTimeFieldType.dayOfMonth(), value);
        changeField(DateTimeFieldType.monthOfYear(), value);
        changeField(DateTimeFieldType.yearOfEra(), value);
    } 
```

最后，我还添加了一些方法来查询是否设置了所有日期字段以及是否设置了所有时间字段：

```
/**
 * Allow to check if the DateTimeFieldType fields that build the 
 * date part of a datetime has been set in this instance.
 * <p/>
 *
 * @return true if date part has yet to be applied to
 * the instance, false otherwise
 */
    public boolean isDateSet() {
        return fieldTypes.contains(DateTimeFieldType.dayOfMonth()) &&
                fieldTypes.contains(DateTimeFieldType.monthOfYear()) &&
                fieldTypes.contains(DateTimeFieldType.yearOfEra());
    }

    /**
 * Allow to check if the DateTimeFieldType fields that build the 
 * time part of a datetime has been set in this instance.
 * <p/>
 *
 * @return true if time part has yet to be applied to
 * the instance, false otherwise
 */
    public boolean isTimeSet() {
        return fieldTypes.contains(DateTimeFieldType.minuteOfHour()) &&
                fieldTypes.contains(DateTimeFieldType.hourOfDay());

    } 
```

我终于把它做成了一个 DateTimeFieldTypeSet 类。我认为它很好地封装了 Joda 类中缺乏的一个常见概念。我希望它也对其他人有用。

# jquery - 为什么构造 JQuery UI Datepicker 会清除字段的值？

> ID：10468547
> 
> 赞同：4
> 
> 时间：2012-05-06T06:07:38.140
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我有一个 INPUT 标记，其 value 属性设置为“2012 年 5 月 15 日”，我已经用它初始化了一个 JQuery UI Datepicker，如下所示：

```
<input type="text" name="schedule" id="schedule"
      value="15-May-2012">

<script type="text/javascript">
  $(function() {
    $( "#schedule" ).datepicker();
    $( "#schedule" ).datepicker( "option", "dateFormat", "d-M-yy" );
  });
</script> 
```

出于某种原因，一旦 Datepicker 初始化，INPUT 标记的值就会被清除。请注意，INPUT 字段中的值与为 Datepicker 设置的格式匹配。

为什么清除值？

这是一个活生生的例子：[http ://agnelkurian.com/lab/datepicker_example.html](http://agnelkurian.com/lab/datepicker_example.html)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T06:16:09.397

当您绑定日期选择器时：

```
$('#schedule').datepicker(); 
```

它将使用默认值[`dateFormat`](http://api.jqueryui.com/datepicker/#option-dateFormat)，即`"mm/dd/yy"`；您的`"15-May-2012"`格式与该格式不匹配，因此日期选择器在无法使用`"mm/dd/yy"`. 然后你改变格式：

```
$("#schedule").datepicker("option", "dateFormat", "d-M-yy"); 
```

但是`value`已经丢失了。

您应该在绑定日期选择器时设置格式：

```
$("#schedule").datepicker({
    dateFormat: 'd-M-yy'
}); 
```

演示： http: [//jsfiddle.net/ambiguous/mHyn7/](http://jsfiddle.net/ambiguous/mHyn7/) ​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-30T09:29:23.747

实际有效的简单解决方案：

```
var tmp = $('#schedule').val();
$("#schedule").datepicker("option", "dateFormat", "d-M-yy");
$("#schedule").val(tmp); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-04T20:45:45.043

```
 $( "#schedule" ).datepicker();
$( "#schedule" ).datepicker( "option", "dateFormat", 'd-M-yy' );
$( "#schedule" ).val("15-May-2012"); 
```

# spring - contextConfigLocation 包含两个用于安全性和 apppservlet 的文件

> ID：10468549
> 
> 赞同：0
> 
> 时间：2012-05-06T06:07:53.620
> 
> 标签：spring, spring-mvc, spring-security, spring-webflow

嗨，在我的 MVC 应用程序中，我有两个

```
contextConfigLocation  files 
```

一个出于安全目的命名的

```
spring-security.xml 
```

另一个用于 servlet 重定向的名称为

```
appServlet-servlet.xml 
```

我的问题是如何在我的

```
web.xml 
```

这是

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xmlns="http://java.sun.com/xml/ns/javaee" 
         xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_1.xsd" 
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
                             http://java.sun.com/xml/ns/javaee/web-app_3_1.xsd" 
         id="WebApp_ID" version="2.5">

    <welcome-file-list>
        <welcome-file>/WEB-INF/enregistrer_client.jsp</welcome-file>
    </welcome-file-list>

    <!--
        - Filtre springSecurityFilterChain
    -->

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!--
      ContextLoaderListener : chargement fichiers de définition de beans
    -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!--
      Fichiers XML de configuration, à charger par le ContextLoaderListener
    -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring-security.xml,/WEB-INF/appServlet-servlet.xml
        </param-value>
    </context-param>
</web-app> 
```

因为这些行

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring-security.xml,/WEB-INF/appServlet-servlet.xml
    </param-value>
</context-param> 
```

返回

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0': Initialization of bean failed; nested exception is java.lang.NoSuchMethodError: org.springframework.web.bind.annotation.RequestMapping.consumes()[Ljava/lang/String;
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:526)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:29:26.143

您误解了堆栈跟踪。你在这条线上的真正问题：

org.springframework.beans.factory.BeanCreationException：创建名为“org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0”的bean时出错：bean初始化失败；**嵌套异常是 java.lang.NoSuchMethodError: org.springframework.web.bind.annotation.RequestMapping.consumes()[Ljava/lang/String;**

很可能您将旧版本的 Spring 放在类路径中。升级到 Spring 3.1。

# c# - C# Combobox 下拉列表项类型

> ID：10468551
> 
> 赞同：1
> 
> 时间：2012-05-06T06:08:14.813
> 
> 标签：c#, winforms, combobox, drop-down-menu, oftype

我有一个包含 16 个组合框的表单，每个组合框的`DropDownStyle`属性都设置为`DropDownList`. 我正在尝试设置表单，以便每个控件显示其第一个预定义值：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        foreach (ComboBox DropDown in this.Controls.OfType<ComboBox>())
            DropDown.SelectedIndex = 0;
    } 
```

此代码不起作用，尽管单独分配每个项目可以。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:58:18.950

我的 WinForm 体验有点生疏，但如果我没记错的话，`this.Controls`只会带你直接在主 Form 下的那些控件。如果您有任何子控件，例如 Groupbox，它们将位于该 groupbox 的 . `Controls`.

您可以显式地迭代 Groupbox 的控件，也可以使用递归遍历表单的所有子控件，就像您[在此处](https://stackoverflow.com/questions/3419159/how-to-get-all-child-controls-of-a-winform-of-a-specific-type-button-textbox)看到的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T06:25:54.200

您必须检测 ComboBox 的控件及其类型...这意味着您必须处理嵌套循环来检测控件

```
foreach (Control MyCtrl in this.Controls)
{
    DoAllRichTextBoxes(MyCtrl);
}

void DoAllRichTextBoxes(Control control)
{
    ComboBox Cmb = control as ComboBox;
    TextBox TxtBx = control as TextBox;
    if (Cmb == null && TxtBx == null)
    {
        // deal with nested controls
        foreach (Control c in control.Controls) DoAllRichTextBoxes(c);
    }
    if (Cmb != null)
    {
        Cmb.GotFocus += new EventHandler(this.Tb_GotFocus);
        Cmb.LostFocus += new EventHandler(this.Tb_LostFocus);
        Cmb.KeyDown += new KeyEventHandler(this.VehComn_KeyDown);
        Cmb.SelectedValueChanged += new EventHandler(this.AllCombos_SelectedValueChanged);
    }
    if (TxtBx != null)
    {
        TxtBx.GotFocus += new EventHandler(this.Tb_GotFocus);
        TxtBx.LostFocus += new EventHandler(this.Tb_LostFocus);
        TxtBx.KeyPress += new KeyPressEventHandler(this.TbCmb_KeyPress);
        TxtBx.KeyDown += new KeyEventHandler(this.VehComn_KeyDown);
    }
} 
```

# python - 谷歌应用引擎 json 响应作为 REST

> ID：10468553
> 
> 赞同：2
> 
> 时间：2012-05-06T06:08:25.487
> 
> 标签：python, json, google-app-engine

如何将页面响应为 json 页面？下面的代码是否正确？

```
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
import json

class JsonPage(webapp.RequestHandler):
    def get(self):
        self.response.header['Content-Type'] = 'application/json'
        self.response.out.write(json.dumps(['foo', {'bar': ('baz', None, 1.0, 2)}]))

application = webapp.WSGIApplication([('json', JsonPage)], debug=True)

def main():
    run_wsgi_app(application)

if __name__ == '__main__':
    main() 
```

我收到以下错误消息：

```
HTTP request sent, awaiting response... 404 Not Found
2012-05-06 14:10:01 ERROR 404: Not Found. 
```

* * *

对代码进行一些更改后，出现以下错误，似乎在 json 模块中找不到转储对象：

```
<pre>Traceback (most recent call last):
  File &quot;/opt/google_appengine/google/appengine/ext/webapp/_webapp25.py&quot;, line 701, in __call__
    handler.get(*groups)
  File &quot;/home/kelvin/workspace/cloudnuts/json.py&quot;, line 8, in get
    self.response.out.write(json.dumps(['foo', {'bar': ('baz', None, 1.0, 2)}]))
AttributeError: 'module' object has no attribute 'dumps'
</pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:12:23.550

您可能应该将代码更改为：

```
application = webapp.WSGIApplication([('/json', JsonPage)], debug=True) 
```

* * *

至于你的 json 问题，你有本地文件名为 json.py 吗？它将覆盖 json 包导入。

# html - 没有javascript的下拉菜单

> ID：10468554
> 
> 赞同：2
> 
> 时间：2012-05-06T06:08:42.017
> 
> 标签：html, css, menu

我有一个带有选项卡的菜单，在选项卡悬停时，选项卡底部会出现一个列表。然后，我想通过转换（在显示：块之前）来降低事物列表。我的问题是，当过渡开始时，列表的顶部必须是某个乘法（选项卡的宽度 * 选项卡的数量）。但我不想要任何javascript。

有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T06:25:52.190

这是我的 CSS 下拉菜单示例：我希望有用：

在 HTML 和 CSS 中：

```
#menu, #menu ul
{
	list-style: none;
	border: 1px solid #000;
	background-color: #ecffec;
	padding: 0 0 26px 0;
	margin: 0;
}
#menu li
{
	float: left;
	margin-right: 3px;
	border: 1px solid #ecffec;
	position: relative;
}
#menu ul
{
	position: absolute;
	top: 25px;
	left: -1px;
	width: 200px;
	padding: 0;
	display: none;
}
#menu ul li
{
	float: none;
	margin: 0;
	padding: 0;
	line-height: 15px;
}
#menu a:link, #menu a:visited
{
	display: block;
	font-family: Tahoma;
	font-size: 0.75em;
	font-weight: bold;
	text-align: left;
	text-decoration: none;
	color: #000;
	padding: 5px;
}
#menu li:hover
{
	background-color: #ffd98a;
	border: 1px solid #000;
}
#menu li:hover ul
{
	display: block;
}
```

```
<ul id="menu">
  <li><a href="#">Programming Language</a>
    <ul>
      <li><a href="#">Java</a></li>
      <li><a href="#">PHP</a></li>
      <li><a href="#">Python</a></li>
      <li><a href="#">Asp Classic</a></li>
      <li><a href="#">ASP.NET</a></li>
      <li><a href="#">javascript</a></li>
      <li><a href="#">Perl</a></li>
    </ul>
  </li>
  <li><a href="#">Database</a>
    <ul>
      <li><a href="#">SQL Server 2005</a></li>
      <li><a href="#">Oracle</a></li>
      <li><a href="#">MySQL</a></li>
      <li><a href="#">DB2</a></li>
    </ul>
  </li>
   <li><a href="#">Help</a></li>
</ul>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-17T11:53:56.383

你见过[https://codepen.io/markcaron/pen/wdVmpB](https://codepen.io/markcaron/pen/wdVmpB)吗？

**html部分**

```
<h2>Checkbox version</h2>

<div class="dropdown">
  <input type="checkbox" id="my-dropdown" value="" name="my-checkbox">
  <label for="my-dropdown"
     data-toggle="dropdown">
  Choose one
  </label>
  <ul>
    <li><a href="#">Coffee</a></li>
    <li><a href="#">Coverage</a></li>
    <li><a href="https://twitter.com/hashtag/covfefe">Covfefe</a></li>
  </ul>
 </div>

<h2>Anchor version</h2>

 <div class="dropdown">
  <ul id="my-dropdown2">
    <li><a href="#">Coffee</a></li>
    <li><a href="#">Coverage</a></li>
    <li><a href="https://twitter.com/hashtag/covfefe">Covfefe</a></li>
 </ul>
  <a href="#my-dropdown2"
    aria-controls="my-dropdown2"
    role="button"
    data-toggle="dropdown"
    id="my-dropdown2-btn">
  Choose one
  </a>
     <a href="#my-dropdown2-btn"
     aria-controls="my-dropdown2"
    role="button"
     data-toggle="dropdown"
     class="close">
  Close dropdown
  </a>
 </div> 
```

**CSS部分**

最好看上面的链接！一探究竟！

# c# - 用于数学函数控制的 C# 控件/组件/编辑器

> ID：10468557
> 
> 赞同：1
> 
> 时间：2012-05-06T06:08:55.573
> 
> 标签：c#, winforms, editor, mapping, curve

我需要一个用于 .NET WinForms 的控件/组件，我可以在其中编辑将输入 (X) 映射到输出 (Y) 的函数曲线。这是从 FL Studio 截取的示例屏幕截图：

[http://i.imgur.com/YEbxP.png](http://i.imgur.com/YEbxP.png)

Photoshop 也将曲线编辑器用于许多事情，就像许多其他应用程序一样。我在哪里可以找到适合的东西，但对于 .NET 尤其是对于 Winforms？提前感谢您的帮助。

# ios - 滚动视图上的 ios alpha 掩码

> ID：10468564
> 
> 赞同：4
> 
> 时间：2012-05-06T06:10:31.883
> 
> 标签：ios, uiscrollview

我知道你可以在 ios 中屏蔽图像，但你可以屏蔽滚动视图吗？我想对我的滚动视图进行 alpha 遮罩，以便末端的内容在被滚动视图剪切之前似乎淡出。这样的事情可能吗？

仅供参考，我已经尝试过“伪造”这种效果的变通方法，但由于动态背景，它们不起作用。如果可能的话，我需要对滚动视图进行严格的 alpha 屏蔽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:28:58.363

您可以通过在滚动视图末尾放置带有 alpha 的图像来伪造这种效果。这样，淡入淡出效果保持不变，并且 scrollView 似乎淡出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T08:15:23.570

您可以通过使用图层蒙版很好地做到这一点：

*   创建具有适当 alpha 渐变的蒙版
*   将掩码添加到表中
*   实现滚动委托，以在表格滚动时将掩码重新定位到当前视口。

这一切都在这里解释得很好：http: [//www.cocoanetics.com/2011/08/adding-fading-gradients-to-uitableview/](http://www.cocoanetics.com/2011/08/adding-fading-gradients-to-uitableview/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T07:19:05.480

您能否实现一个具有适当 alpha 渐变的页脚（或最后一个单元格）来为您提供所需的效果？

# iphone - iPhone sdk 中的 ARC 问题

> ID：10468569
> 
> 赞同：0
> 
> 时间：2012-05-06T06:11:40.087
> 
> 标签：iphone, objective-c, automatic-ref-counting

我正在检查来自 github 的示例项目，我收到此错误，在其中一个类中，其中有很多类，但我只在此类中找到了门。错误是“接收器类型视图控制器例如消息没有使用选择器“loadChapter:forBook”声明方法

错误出现在这种方法中，

```
- (void)displayBook: (int)theBook andChapter: (int)theChapter andVerse: (int)theVerse
{

    [((PKRootViewController *)self.parentViewController.parentViewController ) showWaitingIndicator];
    PKWait(//here i got this error
           [self loadChapter:theChapter forBook:theBook];
           //[self.tableView reloadData];
           [self reloadTableCache];
           [(PKHistory *)[PKHistory instance] addPassagewithBook:theBook andChapter:theChapter andVerse:theVerse];
           [self notifyChangedHistory];
           ((PKSettings *)[PKSettings instance]).topVerse = theVerse;
           if (theVerse>1)
           {
               [self.tableView scrollToRowAtIndexPath: [NSIndexPath indexPathForRow:theVerse-1 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:NO];
           }
           else 
           {
               [self.tableView scrollRectToVisible:CGRectMake(0, 0, 1, 1) animated:NO];
           }
           UITabBarController *tbc = (UITabBarController *)self.parentViewController.parentViewController;
           tbc.selectedIndex = 0;
           );
} 
```

而且这个方法也有这个错误

```
 - (void)loadChapter: (int)theChapter forBook: (int)theBook
    {
        // clear selectedVerses
        selectedVerses = [[NSMutableDictionary alloc] init];
        PKSettings *theSettings = [PKSettings instance];
        theSettings.currentBook = theBook;
        theSettings.currentChapter = theChapter;
        //[theSettings saveCurrentReference]; -- removed for speed
        [self loadChapter];//here i got the error,,in this case after selector'loadChapter;
    } 
```

这个错误的原因是什么，错误显示它显示的窗口，自动引用计数问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:44:45.460

你有没有参数的选择器 loadChapter 吗？

aslo 检查他们的声明是否包含在接口文件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T06:51:07.167

该错误`receiver type view controller for instance message does not declare a method with selector 'loadChapter:forBook'`意味着编译器`loadChapter:forBook:`在`self`. 同样的想法发生在另一个错误上，但使用 method `loadChapter`。所以问题可能是您忘记在接口上声明方法，或者您可能已经声明了两个具有相同名称的方法。

# java - Arrays Java - 尝试删除用户输入要求

> ID：10468572
> 
> 赞同：0
> 
> 时间：2012-05-06T06:12:09.037
> 
> 标签：java, arrays

我正在创建一个计算全年降雨量的程序等。我在下面的第一块代码中完美地处理了用户输入。但是，我现在正在尝试更改程序，以便指定数组值（我基本上是在尝试消除用户输入）。

为什么第二个代码块不起作用？我在底部收到 r.getTotalRainFall、r.getAverageRainFall 等错误。

请注意，我必须在 thisYear 中引入数组（这是必需的）。

代码块 #1：

```
import java.util.*;

public class Rainfall {

Scanner in = new Scanner(System.in);
int month = 12;
double total = 0;
double average;
double months[];

public Rainfall() {
    months = new double[12];
}

public void enterMonthData() {
    for (int n = 1; n <= month; n++) {
        System.out.print("Enter the rainfall (in inches) for month #" + n + ": ");
        months[n - 1] = in.nextDouble();

        // Input Validation - Cannot accept a negative number
        while (months[n - 1] < 0) {
            System.out.print("Rainfall must be at least 0\. Please enter a new value.");
            months[n - 1] = in.nextDouble();
        }
    }
}

public double getTotalRainFall() {
    total = 0;
    for (int i = 0; i < 12; i++) {
        total = total + months[i];
    }
    return total;
}

public double getAverageRainFall() {
    average = total / 12;
    return average;
}

/**
 * Returns the index of the month with the highest rainfall.
 */
public int getHighestMonth() {
    int highest = 0;
    for (int i = 0; i < 12; i++) {
        if (months[i] > months[highest]) {
            highest = i;
        }
    }
    return highest;
}

/**
 * Returns the index of the month with the lowest rainfall.
 */
public int getLowestMonth() {
    int lowest = 0;
    for (int i = 0; i < 12; i++) {
        if (months[i] < months[lowest]) {
            lowest = i;
        }
    }
    return lowest;
}

public static void main(String[]args) {
    Rainfall r = new Rainfall();
    r.enterMonthData();
    System.out.println("The total rainfall for this year is " + r.getTotalRainFall());
    System.out.println("The average rainfall for this year is " + r.getAverageRainFall());
    int lowest = r.getLowestMonth();
    int highest = r.getHighestMonth();
    System.out.println("The month with the highest amount of rain is " + (highest+1) + " with " + r.months[highest] + " inches");
    System.out.println("The month with the lowest amount of rain is  " + (lowest+1) + " with " + r.months[lowest] + " inches");
}
} 
```

代码块 #2：

```
package rain;

public class Rain {

int month = 12;
double total = 0;
double average; 
double getRainAt[];

 public Rain {
    getRainAt = new double[12];
}

double getTotalRainFall() {
    total = 0;
    for (int i = 0; i < 12; i++) {
        total = total + getRainAt[i];
    }
    return total;
}

   double getAverageRainFall() {
    average = total / 12;
    return average;
}

int getHighestMonth() {
    int high = 0;
    for (int i = 0; i < 12; i++) {
        if (getRainAt[i] > getRainAt[high]) {
            high = i;
        }
    }
    return high;
}

int getLowestMonth() {
    int low = 0;
    for (int i = 0; i < 12; i++) {
        if (getRainAt[i] < getRainAt[low]) {
            low = i;
        }
    }
    return low;
}

public static void main(String[] args) {
   // Create an array of rainfall figures.
  double[] thisYear = {1.6, 2.1, 1.7, 3.5, 2.6, 3.7,
                       3.9, 2.6, 2.9, 4.3, 2.4, 3.7 };

  int high;      // The high month
  int low;       // The low month

  // Create a RainFall object initialized with the figures
  // stored in the thisYear array.
  Rainfall r = new Rainfall(thisYear);

  // Display the statistics.
  System.out.println("The total rainfall for this year is " +
                     r.getTotalRainFall();
  System.out.println("The average rainfall for this year is " +
                     r.getAverageRainFall());
  high = r.getHighestMonth();
  System.out.println("The month with the highest amount of rain " +
                     "is " + (high+1) + " with " + r.getRainAt(high) +
                     " inches.");
  low = r.getLowestMonth();
  System.out.println("The month with the lowest amount of rain " +
                     "is " + (low+1) + " with " + r.getRainAt(low) +
                     " inches.");
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T08:39:08.893

我已经重构了 2 个类

现在 Rain 类只包含 main 方法，而所有其他逻辑都包含在 Rainfall 类中

Rainfall 类有一个方法 - getRainAt() 来获取给定月份的降雨量 Rainfall 类有一个构造函数，该构造函数将双数组作为参数，因此必须使用提供的此参数对其进行实例化。

现在看看这些课程，看看这是否符合您的要求。

```
import java.util.*;

public class Rainfall {

Scanner in = new Scanner(System.in);
int month = 12;
double total = 0;
double average;
double months[];

public Rainfall(double newmonths[]){
    months = newmonths;
}

public void enterMonthData() {
    for (int n = 1; n <= month; n++) {
        System.out.print("Enter the rainfall (in inches) for month #" + n
                + ": ");
        months[n - 1] = in.nextDouble();

        // Input Validation - Cannot accept a negative number
        while (months[n - 1] < 0) {
            System.out
                    .print("Rainfall must be at least 0\. Please enter a new value.");
            months[n - 1] = in.nextDouble();
        }
    }
}

public double getTotalRainFall() {
    total = 0;
    for (int i = 0; i < 12; i++) {
        total = total + months[i];
    }
    return total;
}

public double getAverageRainFall() {
    average = total / 12;
    return average;
}

/**
 * get rain given the month number
 */
public double getRainAt(int month){
    double rainValue = 0;
    for (int i = 0; i < months.length; i++) {
        if(month == i){
            rainValue = months[i];
            break;
        }
    }
    return rainValue;
}

/**
 * Returns the index of the month with the highest rainfall.
 */
public int getHighestMonth() {
    int highest = 0;
    for (int i = 0; i < 12; i++) {
        if (months[i] > months[highest]) {
            highest = i;
        }
    }
    return highest;
}

/**
 * Returns the index of the month with the lowest rainfall.
 */
public int getLowestMonth() {
    int lowest = 0;
    for (int i = 0; i < 12; i++) {
        if (months[i] < months[lowest]) {
            lowest = i;
        }
    }
    return lowest;
}
} 
```

Rain类现在只有main方法

```
public class Rain {

public static void main(String[] args) {
    // Create an array of rainfall figures.
    double[] thisYear = { 1.6, 2.1, 1.7, 3.5, 2.6, 3.7, 3.9, 2.6, 2.9, 4.3,
            2.4, 3.7 };

    int high; // The high month
    int low; // The low month

    // Create a RainFall object initialized with the figures
    // stored in the thisYear array.
    Rainfall r = new Rainfall(thisYear);

    // Display the statistics.
    System.out.println("The total rainfall for this year is "
            + r.getTotalRainFall());
    System.out.println("The average rainfall for this year is "
            + r.getAverageRainFall());
    high = r.getHighestMonth();
    System.out.println("The month with the highest amount of rain " + "is "
            + (high + 1) + " with " + r.getRainAt(high) + " inches.");
    low = r.getLowestMonth();
    System.out.println("The month with the lowest amount of rain " + "is "
            + (low + 1) + " with " + r.getRainAt(low) + " inches.");
  }
 } 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T06:20:11.807

不知道为什么要创建一个 getRainAt 类来初始化它，请尝试使用 Rain 类构造函数来执行此操作。

替换这个：

```
public class getRainAt {
    public getRainAt() {
    getRainAt = new double[12];
    }
} 
```

和：

```
public Rain() {
    getRainAt = new double[12];
} 
```

并且由于您现在使用的是 Rain 而不是 Rainfall，因此在 main 方法中应该是： Rain r = new Rain();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T06:44:35.397

我不确定这是否只是一个复制错误，但在第二个块中你调用了 class `Rain`，但是你将 r 声明为`Rainfall`.

# c - 在C中通过引用传递一个char数组

> ID：10468573
> 
> 赞同：4
> 
> 时间：2012-05-06T06:12:09.377
> 
> 标签：c, arrays, reference, char

嗨，我真的无法理解这一点。我基本上试图通过将输出数组作为参数传递来从函数返回一个字符数组。这是我到目前为止所拥有的：

功能：

```
int GetComputerName(char *name, char *ip_address){
    *name = "testing";
    return 0;
} 
```

并称它为：

```
char comp_name[50];
GetComputerName(&comp_name, serverIP);
printf("\n\n name: %s\n\n", comp_name); 
```

我已经尝试切换和交换 * 和 & 看看什么会起作用，并阅读了指针和东西，但我认为应该发生的事情和实际发生的事情是两件非常不同的事情，现在我认为我比自己更困惑当我开始！哈哈

有人可以帮我解释一下这样做的正确方法是什么吗？！

提前感谢=）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T06:14:35.703

这一行：

```
*name = "testing"; 
```

无效，因为您将指向“测试”的指针分配给名称指向的**字符**。您需要将数据复制到缓冲区中。它应该是：

```
int GetComputerName(char *name, char *ip_address){
    strcpy(name,"testing");
    return 0;
} 
```

甚至更好（以避免溢出）：

```
int GetComputerName(char *name, size_t buff_len, char *ip_address){
    strncpy(name,"testing", buff_len);
    name[buff_len - 1] = '\0';
    return 0;
} 
```

并称之为：

```
GetComputerName(comp_name, sizeof(comp_name), serverIP); 
```

# c# - GPS在谷歌地图上给出错误的位置

> ID：10468581
> 
> 赞同：0
> 
> 时间：2012-05-06T06:14:02.267
> 
> 标签：c#, wpf, gps, windows-mobile-gps, gpsd

我正在使用 GPS，**`Sim548c`**当**`Google map API`**我将它连接到我的 C# 代码时，它给出了距出口位置约 1KM 的错误位置，但是当我使用以下时[**`software`**](http://software-files-a.cnet.com/s/software/12/41/22/24/cnet2_pcgps32_exe.exe?token=1336291927_6b1680953b8e629fb9289123d5ff08a1&lop=link&ptype=3001&ontid=12940&siteId=4&edId=3&spi=bb57ec4b21145b723ba7f0f7fa9dda6a&pid=12412224&psid=10494227&isDlm=1&fileName=cnet2_pcgps32_exe.exe)，它给出了 10m 内的出口位置我使用了以下gps cordinats 的一组代码并将其传递给网络浏览器。

```
if (s.Contains("$GPRMC"))
        {
            latlon = s.Split('*');
            int i=0;
            while (!latlon[i].Contains("GPRMC"))
            {
                i++;
            }
            //latlon = latlon[i].Split(',');
            if (latlon[i].Contains(",A,"))
            {
                latlon = latlon[i].Split(',');
                lat = latlon[3];
                lon = latlon[5];

                latt = double.Parse(lat.Substring(0,2));
                latt += double.Parse(lat.Substring(2, 2)) / 60.0;
                latt += double.Parse(lat.Substring(5)) / 3600.0/100.0;
                lonn = double.Parse(lon.Substring(0,3));
                lonn += double.Parse(lon.Substring(3, 2))/60.0;
                lonn += double.Parse(lon.Substring(6))/3600.0/100.0;

                //richTextBox1.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, new Action(delegate() { richTextBox1.AppendText("Write\n"); }));
                richTextBox2.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, new Action(delegate() 
                    { 
                        richTextBox2.AppendText(lonn.ToString()+","+latt.ToString()+"\n"); 
                    }));
                label1.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, new Action(delegate()
                {
                    label1.Content = lon;
                }));
                label2.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, new Action(delegate()
                {
                    label2.Content = lat;
                }));
                Thread.Sleep(1000);
                webBrowser1.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, new Action(delegate()
                    {
                        try
                        {
                            webBrowser1.InvokeScript("animate", latt.ToString(), lonn.ToString());
                        }
                        catch { }
                    })
                    );

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:50:49.710

我认为问题在于您将秒数转换为度数

```
latt += double.Parse(lat.Substring(5)) / 3600.0/100.0; 
```

您只需将“秒”部分除以 3600

```
latt += double.Parse(lat.Substring(5)) / 3600.0;
lonn += double.Parse(lon.Substring(6)) / 3600.0; 
```

另一件事您可能已经知道，如果纬度值在南侧，则纬度值为负，而经度值在西侧为负。否则，您的位置可能会出现在地球的错误一侧。

# xml - 如何将变量用作属性和 setAttribute 属性的值？

> ID：10468582
> 
> 赞同：0
> 
> 时间：2012-05-06T06:14:03.937
> 
> 标签：xml, dom, properties

我正在尝试使用 setAttribute 更改 iframe 中的链接。

我想让链接每隔几分钟就会更改为从数组中选择的新网站。

除了一件事，一切似乎都有效；我不知道如何让 setAttribute 接受变量或数组作为链接。例如，我的代码如下所示：

```
var linkList = [ 'link1',
                 'link2',
                 'link3'];
function changePage() {
for (i=0; i<4; i++) {
document.getElementById('iframe').src = linkList[i];
}}
var timeoutNow = setTimeout("changePage()", 3000) 
```

linkList[i] 部分是我遇到问题的部分 - 如何将 src 属性设置为存储在变量或数组中的链接？

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T06:30:02.910

以文档开头的行。很好。使用静态变量来记住您在哪个变量上。像这样：

```
var i = 0;
function changePage() {
    i = (i + 1) % 3;
    document.getElementById('iframe').src = linkList[i];
} 
```

# php - 我应该将整个对象作为函数参数传递吗？

> ID：10468585
> 
> 赞同：2
> 
> 时间：2012-05-06T06:14:09.210
> 
> 标签：php, function, parameters

假设我们有一些对象

```
$a = new stdClass;
$a->b = 7;
$a->c = 'o';
$a->d = array(1,2,3); 
```

*此外，我们还有一个函数可以对对象的某些*属性（例如`b`and `d[1]`）做一些事情。

**我的问题**：我的函数是否应该接受整个对象作为参数，例如：

```
function some($a) {
 var_dump($a->b);
 var_dump($a->d[1]);
}

some($a); 
```

或仅接受其处理的某些字段，例如：

```
function some($b, $d) {
 var_dump($b);
 var_dump($d);
}

some($a->b, $a->d[1]); 
```

其实不管是`$a`对象还是数组。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T06:30:50.840

请记住，默认情况下对象是通过引用传递的，因此如果您传递整个对象，您可以在需要时从函数本身更改对象值。

如果仅按值传递某些属性，例如在您的示例中，则如果需要更改对象属性，则必须返回一些内容，然后从外部将其应用于对象。当然，您始终可以将属性本身作为引用传递。

无论如何，我会使用第一种方法（传递整个对象），因为如果您以后需要添加属性，它更具可读性和可扩展性。内存影响很小，因为只复制了指向对象的指针，而不是您需要的每个属性的值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T06:21:15.003

我相信第一个选择是要走的路。

```
function some($a) {
 var_dump($a->b);
 var_dump($a->d[1]);
}

some($a); 
```

因为也许随着时间的推移，您将需要该对象/数组的其他部分，并且您将不得不修改函数和进行它们的调用。所以`function some()`可以是全局函数并以其他方式使用，可以在后面添加语句，修改函数而不必到处修改。

```
function some($a, $param1 = 1){
    if($param1 == 1){
        var_dump($a->c);
        var_dump($a->d[2]);
    } else {
        var_dump($a->b);
        var_dump($a->d[1]);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-06T06:40:12.983

我倾向于同意米海，因为通常我们低估了对象属性和函数的有用性，但如果我们真的想要优雅的代码，函数参数应该反映函数的目的（和整体数据模型）。话虽如此，将函数作为对象本身的方法是一个很好的论据，但假设它是一个实用函数：

```
 function find_median($low, $high) {

     return ($low + $high)/2;

  } 
```

我们的对象称为 UserStats，包含该用户在各个区域的多个统计数据数组。传入整个对象（甚至只是特定统计组的整个数组）不会犯罪或杀死小狗，但我认为它会很懒惰，最终导致一个简单的函数变成一个臃肿的计算器，因为“好吧，它已经有了所有的数据，还不如在这里做呢！”

所有这些都是我对编码的看法，即它应该尽可能优雅、简单和巧妙地反映实际的模型和工作流程。我会努力使这与效率和性能相结合，但归根结底，我想要的是讲述故事、绘制地图、显示实际情况的代码，而不是围绕对象和数组的代码，而不是得到它需要的东西。

说了这么多，也许你确实想要一个计算器等，就像 Mihal 说的那样，需要一个值但没有它比只拥有你需要的数据更为常见，不多不少。

# nhibernate - FluentNhibernate Eager 加载多对多子对象

> ID：10468591
> 
> 赞同：1
> 
> 时间：2012-05-06T06:15:10.943
> 
> 标签：nhibernate, fluent-nhibernate, many-to-many, eager-loading

我尝试使用**FluentNhibernate**查询数据，但出现此错误：**“序列包含多个匹配元素”**

这是我的类和映射：

```
public class Course
{
    public virtual int Id { get; private set; }
    public virtual string Name { get; set; }
    public virtual IList<Instructor> Instructors { get; set; }
}

public class Instructor
{
    public virtual int Id { get; private set; }
    public virtual string Name { get; set; }
    public virtual ImageData Portrait { get; set; }
    public virtual ImageData PortraitThumb { get; set; }
    public virtual IList<Course> TeachingCourses { get; private set; }
}

public class ImageData : Entity
{
    public virtual int Id { get; private set; }
    public virtual byte[] Data { get; set; }
}

public class CourseMap : ClassMap<Course>
{
    public CourseMap()
    {
        Id(x => x.Id);
        Map(x => x.Name);
        HasManyToMany(x => x.Instructors)
            .Cascade.All()
            .Table("CourseInstructor");
    }
}

public class InstructorMap : ClassMap<Instructor>
{
    public InstructorMap()
    {
        Id(x => x.Id);
        Map(x=> x.Name);
        References(x => x.Portrait)
            .Nullable()
            .Cascade.All();
        References(x => x.PortraitThumb)
            .Nullable()
            .Cascade.All();
        HasManyToMany(x => x.TeachingCourses)
            .Cascade.All()
            .Inverse()
            .Table("CourseInstructor");
    }
}

public class ImageDataMap : ClassMap<ImageData>
{
    public ImageDataMap()
    {
        Id(x => x.Id);
        Map(x => x.Data);
    }
} 
```

然后我尝试使用以下代码获取数据：

```
var course = session.CreateCriteria(typeof(Course))
               .SetFetchMode("Instructors", FetchMode.Eager)
               .SetFetchMode("Instructors.Portrait", FetchMode.Eager)
               .SetFetchMode("Instructors.PortraitThumb", FetchMode.Eager)
               .List<Course>(); 
```

但我收到以下错误：“序列包含多个匹配元素”另外，当我尝试这个时

```
var course = session.CreateCriteria(typeof(Course))
               .SetFetchMode("Instructors", FetchMode.Eager)
               .SetFetchMode("Instructors.Portrait", FetchMode.Eager)
               .SetFetchMode("Instructors.PortraitThumb", FetchMode.Eager)                   
               .SetResultTransformer(new DistinctRootEntityResultTransformer())
               .List<Course>(); 
```

没有发生错误，但我得到重复`Instructor`的对象。

我确实尝试过下面的帖子和其他一些帖子。但这无济于事。

*   [NHibernate Eager 加载多级子对象](https://stackoverflow.com/questions/563250/nhibernate-eager-loading-multi-level-child-objects)
*   [使用 Fluent NHibernate/Nhibernate 和自动映射的渴望加载](https://stackoverflow.com/questions/3142845/eager-loading-using-fluent-nhibernate-nhibernate-automapping)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:56:19.873

FluentNhibernate`bag`对多对多关系使用 -mapping，如果映射的属性是 type `IList`。

映射`bag`有一些主要缺点[Collections/hibernate 的性能](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-collections)。当前困扰您的是 NH 不允许重复的元素值，并且由于它们没有索引列，因此无法定义主键。

简单地说，当您将它们全部加入时，NH 不知道`bag`它们属于哪个。

而不是 a`bag`我会使用索引变体 a `set`，假设 an`Instructor`没有相同的持久性`Course`分配两次。

您可以通过修改域类来修复查询结果，这会告诉 FluentNhibernate 按照惯例使用 a`set`而不是 a `bag`：

```
public class Course
{
    public virtual int Id { get; private set; }
    public virtual string Name { get; set; }
    public virtual Iesi.Collections.Generic.ISet<Instructor> Instructors { get; set; }
}

public class Instructor
{
    public virtual int Id { get; private set; }
    public virtual string Name { get; set; }
    public virtual ImageData Portrait { get; set; }
    public virtual ImageData PortraitThumb { get; set; }
    public virtual Iesi.Collections.Generic.ISet<Course> TeachingCourses { get; private set; }
} 
```

此外，您可以使用`.AsSet()`. [FluentNHibernate：AsSet() 的作用是什么？](https://stackoverflow.com/questions/2054076/fluentnhibernate-what-is-the-effect-of-asset)

# yii - yii 模态框表单验证

> ID：10468592
> 
> 赞同：1
> 
> 时间：2012-05-06T06:15:13.207
> 
> 标签：yii

我正在使用`yii framework`我的网站。我在模式框中有一个注册表单。如果我在未填写的情况下提交表单，则验证错误应在`modal box`不刷新的情况下显示。但现在它重定向到其他页面。如何`validation errors within the modal box`在同一页面中显示？

这是我用于注册视图的代码

```
<?php 
    $model=new SignupForm;

  $form=$this->beginWidget('CActiveForm', array(
    'id'=>'signup-form',
    'enableAjaxValidation'=>true,
    'action'=>'site/signup'
));
?>
<?php echo $form->errorSummary($model); ?> 
<?php echo $form->textField($model,'name',array('value'=>'Enter Your Name', 'onclick'=>'javascript:this.value=""', 'onblur'=> 'this.value = ( this.value == "" ) ? "Enter Your Name" : this.value;')); ?><br />
<?php echo $form->textField($model,'email',array('value'=>'Enter Your Email ID', 'onclick'=>'javascript:this.value=""', 'onblur'=> 'this.value = ( this.value == "" ) ? "Enter Your Email ID" : this.value;')); ?><br />
<?php echo $form->textField($model,'phone',array('value'=>'Telephone', 'onclick'=>'javascript:this.value=""', 'onblur'=> 'this.value = ( this.value == "" ) ? "Telephone" : this.value;')); ?><br />
    <!--<input type="text" value="username" onClick="this.value=''"/><br/>
    <input type="password" value="Password" onClick="this.value=''"/>    -->
  <div class="d-login"><?php echo CHtml::submitButton('Submit'); ?>
  <?php /*?><input type="image" alt="Login" title="Login" src="<?php echo Yii::app()->request->baseUrl; ?>/images/signup.png"/><?php */?>
  </div>
  <?php $this->endWidget(); ?> 
```

控制器中的代码：

```
public function actionSignup()
    {
        $model=new SignupForm;

        // if it is ajax validation request
        if(isset($_POST['ajax']) && $_POST['ajax']==='signup-form')
        {
            $model->attributes=$_POST['SignupForm'];
            echo CActiveForm::validate($model);
            Yii::app()->end();
        }

        // collect input data
        if(isset($_POST['SignupForm']))
        {
            $model->attributes=$_POST['SignupForm'];
            $name=$model->name;
            $email=$model->email;
            $phone=$model->phone;

            $newsletter = new Newsletter();

            if($model->validate())
            {

                //insert  data
                $newsletter->varName = $name;
                $newsletter->varEmail = $email;
                $newsletter->varPhone = $phone;
                if($newsletter->save()) {
                $url = Yii::app()->getBaseUrl();
                Yii::app()->getRequest()->redirect($url);
                    }

             } 
        }
        $this->render('signup',array('model'=>$model));

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:53:40.240

`renderPartial`如果要在对话框模式框中验证模型，则必须使用 ajax 。下面是一个未经测试的代码。（来自这个[链接](http://www.yiiframework.com/wiki/145/cjuidialog-for-create-new-model/)）

在你的意见/signup.php

```
<div class="form">  
    <?php $form=$this->beginWidget('CActiveForm', array(
        'id'=>'signup-form',
        'enableAjaxValidation'=>false,
    ));
    ?>
    <?php echo $form->errorSummary($model); ?> 
    <?php echo $form->textField($model,'name',array('value'=>'Enter Your Name', 'onclick'=>'javascript:this.value=""', 'onblur'=> 'this.value = ( this.value == "" ) ? "Enter Your Name" : this.value;')); ?><br />
    <?php echo $form->textField($model,'email',array('value'=>'Enter Your Email ID', 'onclick'=>'javascript:this.value=""', 'onblur'=> 'this.value = ( this.value == "" ) ? "Enter Your Email ID" : this.value;')); ?><br />
    <?php echo $form->textField($model,'phone',array('value'=>'Telephone', 'onclick'=>'javascript:this.value=""', 'onblur'=> 'this.value = ( this.value == "" ) ? "Telephone" : this.value;')); ?><br />
    <div class="d-login">
        <?php echo CHtml::submitButton('Submit'); ?>
    </div>
     <?php $this->endWidget(); ?>
</div> 
```

在您的控制器中

```
public function actionSignup()
    {
        $model=new SignupForm;

        if(isset($_POST['SignupForm']))
        {
            $model->attributes=$_POST['SignupForm'];
            $name=$model->name;
            $email=$model->email;
            $phone=$model->phone;

            $newsletter = new Newsletter();
            if($model->save())
            {
                //insert  data
                $newsletter->varName = $name;
                $newsletter->varEmail = $email;
                $newsletter->varPhone = $phone;
                if($newsletter->save()) 
                {               

                    if (Yii::app()->request->isAjaxRequest)
                    {
                        echo CJSON::encode(array(
                            'status'=>'success',
                            ));
                        exit;               
                    }
                    else
                    {   
                        $url = Yii::app()->getBaseUrl();
                        Yii::app()->getRequest()->redirect($url);
                    }
            }
        }

        if (Yii::app()->request->isAjaxRequest)
        {
            echo CJSON::encode(array(
                'status'=>'failure', 
                'div'=>$this->renderPartial('signup', array('model'=>$model), true)));
            exit;               
        }
        else
            $this->render('signup',array('model'=>$model,));
    } 
```

最后在您要显示注册模式框的视图文件中

```
<?php echo CHtml::link('Signup', "",  // the link for open the dialog modal
    array(
        'style'=>'cursor: pointer; text-decoration: underline;',
        'onclick'=>"{doSignup(); $('#dialogSignup').dialog('open');}"));?>

<?php
$this->beginWidget('zii.widgets.jui.CJuiDialog', array( // the dialog
    'id'=>'dialogSignup',
    'options'=>array(
        'title'=>'Signup',
        'autoOpen'=>false,
        'modal'=>true,
        'width'=>550,
        'height'=>470,
    ),
));?>
<div class="divForForm"></div>

<?php $this->endWidget();?>

<script type="text/javascript">
function doSignup()
{
    <?php echo CHtml::ajax(array(
            'url'=>array('site/signup'),
            'data'=> "js:$(this).serialize()",
            'type'=>'post',
            'dataType'=>'json',
            'success'=>"function(data)
            {
                if (data.status == 'failure')
                {
                    $('#dialogSignup div.divForForm').html(data.div);
                    $('#dialogSignup div.divForForm form').submit(doSignup);
                }
                else
                {
                    window.location.href =".Yii::app()->getBaseUrl().";
                }

            } ",
            ))?>;
    return false; 

}

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:39:44.670

您应该在注册模型中定义验证规则。或者在此处粘贴您的注册模型。

# python - 开始和结束时匹配的正则表达式长度相同

> ID：10468618
> 
> 赞同：1
> 
> 时间：2012-05-06T06:21:14.183
> 
> 标签：python, regex

当开头和结尾的长度相同时，如何制作匹配的正则表达式？例如

```
>>> String = '[[A], [[B]], [C], [[D]]]'
>>> Result = re.findall(pattern, String)
>>> Result
>>> [ '[A]', '[[B]]', '[C]', '[[D]]' ] 
```

目前我使用该模式`\[.*?\]`，但它导致

```
>>> ['[[A]', '[[B]', '[C]', '[[D]'] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T06:28:16.063

您可以为有限数量的开始/结束字符定义这样的正则表达式（例如，“如果它以 1 开始和结束，或者以 2 开始和结束，等等”）。但是，*您不能*对无限数量的字符执行此操作。这只是正则表达式的一个事实。正则表达式是有限状态机的语言，有限状态机不能计数；至少需要下推自动机（上下文无关语法）的力量。

简而言之，正则表达式可以说：“我看到*x*然后我看到*y* ”，但它*不能*说“我看到*x*然后我看到*y*的次数相同”，因为它不记得看到*x*多少次。

但是，您可以使用图灵完备的 Python 编程语言的全部功能轻松做到这一点！图灵完备的语言绝对可以计算：

```
>>> string = '[[A], [[B]], [C], [[D]]]'
>>> sameBrackets = lambda s: len(re.findall('\[',s)) == len(re.findall('\]',s))
>>> filter(sameBrackets, string.split(", "))
['[[B]]', '[C]'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T06:30:30.467

你不能。对不起。

Python 的正则表达式是“有限状态自动机”的扩展，它只允许在您扫描字符串以进行匹配时保留有限数量的内存。此示例需要任意数量的内存，具体取决于重复次数。

Python 允许的不仅仅是有限状态的唯一方法是使用“反向引用”，它允许您匹配字符串先前匹配部分的相同副本 - 但它们不允许您匹配某些内容，例如相同数量的字符。

相反，您应该尝试手写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T11:17:36.293

要匹配平衡括号，您需要一个[递归正则表达式](http://www.catonmat.net/blog/recursive-regular-expressions/)。stock`re`模块不支持这种语法，但替代的[正则表达式](http://pypi.python.org/pypi/regex)支持：

```
import regex

r = r'\[(([^\[\]]+)|(?R))*\]'

print regex.match(r, '[[A], [[B]], [C], [[D]] ]') # ok
print regex.match(r, '[[A], [[B]], [C , [[D]] ]') # None 
```

该表达式基本上是说：匹配被括号包围的东西，其中“某物”是一系列非括号`([^\[\]]+)`或整个东西`(?R)`。

# c - int返回类型函数可以返回true吗？

> ID：10468622
> 
> 赞同：6
> 
> 时间：2012-05-06T06:22:16.523
> 
> 标签：c

这是我要编译的程序

```
#include<stdio.h>   
int main()
    {
        int i = 0;
        rec(i);
    }
int rec(int i)
    {
        i = i + 1;
        if (i == 10){return true;}
        rec(i);
        printf("i: %d\n", i);
    } 
```

我得到这个输出

```
$ gcc -o one one.c
one.c: In function ‘rec’:
one.c:10:24: error: ‘true’ undeclared (first use in this function)
one.c:10:24: note: each undeclared identifier is reported only once for each function it appears in 
```

据我所知，布尔真值在 c 中为 1。如果是这样，为什么我会收到错误消息？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T06:26:39.750

C中没有`true`or关键字。这些值在（我认为从 C99 开始）中`false`有一些*库*`stdbool.h`定义，但大多数 C 程序员通常只会使用`1`and `0`。

如果您不想使用`stdbool.h`，或者您正在使用不支持它的编译器，您通常可以自己定义常量，例如：

```
#define FALSE (1==0)
#define TRUE  (1==1) 
```

或者您可以直接使用`1`and `0`- 上面的方法适用于那些不想记住哪些整数值适用于哪些真值^((a) 的)人。

`0`为假，任何其他值为真。所以你的代码看起来像（修复返回值问题，尽管我不确定为什么它仍然存在，因为它总是返回 true。）：

```
#include <stdio.h>   

int rec (int i) {
    i = i + 1;
    if (i == 10)
        return 1;
    printf ("i: %d\n", i);
    return rec (i);
}

int main (void) {
    int rv, i = 0;
    rv = rec (i);
    printf ("rv: %d\n", rv);
    return 0;
} 
```

这给了你：

```
i: 1
i: 2
i: 3
i: 4
i: 5
i: 6
i: 7
i: 8
i: 9
rv: 1 
```

我还应该提到，当搜索空间快速减少时，递归是最适合使用的解决方案，例如在每次递归调用时搜索空间减半的二叉树搜索中。它通常不适合只在每次调用时增加一个值的情况，尽管在这种情况下，它可能没问题，因为您将其限制在大约十个级别。

* * *

^((a)) : 请记住，尽管给定的 TRUE 定义大部分为 1，*但任何*非零值都将被处理。这意味着这两个语句：

```
if (isValid)
if (isValid == TRUE) 
```

不是*同*一个意思。有大量可能的`isValid`值将通过第一次测试但未通过第二次测试。这通常不是问题，因为[无论如何将布尔变量与布尔常量进行比较几乎总是一个坏主意](https://stackoverflow.com/questions/404838/do-you-prefer-if-var-or-if-var-0/404846#404846)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T06:25:47.460

如果要使用`true`/ `false`，可以将编译器置于 C99 模式（`std=c99`对于 GCC）（或 C11），并包含`<stdbool.h>`.

（或者您需要使用预处理器指令或全局常量来定义真假。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T06:32:16.030

你可以在里面放一个简单的'if'语句

```
#include<stdio.h>   
int main()
    {
        int i = 0;
        rec(i);
    }
int rec(int i)
    {
        i = i + 1;
        if (i == 10){
          return 1;
        }
        j = rec(i)
        if (j == 1){
          printf('true')
        }
        printf("i: %d\n", i);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T06:24:42.887

c 没有适当的布尔值。你可以为它定义一个

```
#define true 1
#define false 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T08:30:56.193

如果您的 C 不使用 C99 标准，则既没有`true`也没有`false`. 在设计返回布尔值的函数时，即

```
short isOdd(long); 
```

我会分别用 1 和 0 来表示`true`和`false`。这没关系，因为如果您尝试使用 i=1（或任何非零整数）的以下代码段，它会打印 T; 当 i=0 时，它打印 F。

```
if (i)
  putch('T');
else
  putch('F'); 
```

下面是一个测试数字是否为奇数的函数示例：

```
short isOdd(long num)
{
  return num%2; // evals to 1 if num is odd; 0 otherwise
} 
```

希望有帮助。

# qt - QT：QPainter.drawText() 进入 QPixmap 在 OSX Lion 下崩溃，而不是 Leopard

> ID：10468624
> 
> 赞同：0
> 
> 时间：2012-05-06T06:22:25.233
> 
> 标签：qt

解决了！

我为 Windows 进行了交叉编译，得到了我的提示：Windows 版本甚至在 main 之前就崩溃了——所以它必须是基本的分配问题。确实如此。我做了一个很大的静态分配，最近让它变得更大（程序需要的东西，不是可选的或临时的）；将 array[size] 更改为 array=calloc(etc,etc) 和 bingo，windows 版本运行，OSX/Lion 内部的崩溃消失了，一切都运行正常了。

所以，吸取的教训：大的静态分配，不好——无论是 Windows 还是 OSX 都不能特别适应它们。

* * *

我得到一个绘画事件。我有一个独立的 QPixmap，我将在 QWidget 框架上进行绘制。在绘制事件调用中，我为 QPixmap 创建了一个绘制器，它位于类定义中。我设置颜色；刷子，钢笔。我填充，我画线。直角。渐变。文本。省略号。在 Snow Leopard 和 Leopard 下一切正常。在 Lion 10.7.anything 下，对同一 QPixmap 的*任何*drawText() 调用都会在 OSX 中的许多调用级别以及 com.apple.ColorSync 中的五个级别失败。不管我使用什么字体或大小。drawText() 和 drawStaticText() 都以同样的方式失败。

失败发生在任何尝试实际绘制 QPixmap 之前——它在 drawText() 的渲染过程中被炸毁。到那时我所做的就是用黑色填充（作品），用渐变填充（作品），绘制一些填充的矩形（作品）并绘制一个网格（作品），然后我去绘制这个文本。这不起作用，但会用 EXC_BAD_ACCESS SIGSEGV 炸毁主线程 (0)（在绘制事件期间进行绘图）。

据我所知，Qt 没有颜色管理。OSX 无法关闭与显示器的颜色同步。

目前，我已经对操作系统级别进行了特殊处理，如果在 Lion 下运行，则根本不绘制文本（在测试版中），但这是一个可怕的解决方法。

任何人都有任何想法，为什么 Apple 的 10.7 colorsync 会在 drawText() 上将其内裤打结成具有有效大小、文本、矩形和边界内绘图任务的完美香草 QPixmap？

# ruby-on-rails - Rake 是否应该与 ruby 、irb 和 gem 在同一个 bin 目录中？

> ID：10468626
> 
> 赞同：0
> 
> 时间：2012-05-06T06:22:54.837
> 
> 标签：ruby-on-rails, ruby, rake

我是 Ruby on Rails 的新手，我正在运行 Snow Leopard 的 Macbook Pro 上设置 Ruby on Rails。一切似乎都很顺利，但我注意到了以下问题。

当我`which`在终端中运行命令时，“Rake”显示在与“ruby”、“gem”和“irb”不同的目录中。在与“ruby”、“gem”和“irb”相同的目录中还有一个“rake”可执行文件，但同样，“which”命令返回下面的“rake”可执行文件。它应该返回与其他路径相同的路径吗？我想知道这是否是一个问题，如果是，我应该如何处理？

我的终端命令：

```
vins-MacBook-Pro:~ $ which ruby gem irb rake 
```

我的结果：

```
/Users/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
/Users/.rvm/rubies/ruby-1.9.3-p194/bin/gem
/Users/.rvm/rubies/ruby-1.9.3-p194/bin/irb
/Users/.rvm/gems/ruby-1.9.3-p194@global/bin/rake 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:40:41.993

没关系。您正在使用 RVM，但您的路径看起来。Rake 作为 1.9.3-p194 的全局 gemset 中的 gem 安装。它从 gem 的 bin 目录中提取 rake 可执行文件。

# java - 关于守护线程

> ID：10468629
> 
> 赞同：1
> 
> 时间：2012-05-06T06:23:57.990
> 
> 标签：java, multithreading

我正在做一项研究，我想将用户线程作为守护线程，Thread.setDaemon(true) 使线程守护进程，但我们知道守护线程适合做后台工作，所以我想链接我的这个线程到任何后台守护线程，以便我的守护线程可以为该线程提供一些服务，并且它应该在该守护线程结束时结束，虽然我已经创建了守护线程，但请告知我将如何通过我的守护线程提供服务任何现有的守护线程，然后它应该最终结束，请告知。

```
 Thread daemonThread = new Thread(new Runnable(){
            @Override
           public void run(){
               try{
               while(true){
                   System.out.println("Daemon thread is running");
               }

               }catch(Exception e){

               }finally{
                   System.out.println("Daemon Thread exiting"); //never called
               }
           }
       }, "Daemon-Thread");

       daemonThread.setDaemon(true); //making this thread daemon
       daemonThread.start();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:35:50.060

我不知道你的意思，但我会改变

```
while(true){ 
```

到

```
while(!Thread.currentThread.isInterrupted()){ 
```

这将允许您的线程在中断时停止。

我还会考虑使用 ExecutorService，因为这样可以更轻松地将工作传递给另一个线程并在完成后将其关闭。

```
ExecutorService service = Executors.newSingleThreadExecutor(new ThreadFactory() {
    @Override
    public Thread newThread(Runnable r) {
        Thread t = new Thread(r, "worker");
        t.setDaemon(true);
        return t;
    }
});

service.submit(new Runnable() { /* task for this thread to perform */ });

service.shutdown(); // to stop it. 
```

# wpf - TabControl - 在选项卡之间滚动

> ID：10468633
> 
> 赞同：1
> 
> 时间：2012-05-06T06:25:31.777
> 
> 标签：wpf, tabcontrol

我正在尝试在 WPF 选项卡中实现，其行为类似于 IE9 中的选项卡。当您在最后许多选项卡中打开时，它们会变得越来越小，并且按钮也显示在左侧和右侧，用于在选项卡之间滚动。

任何帮助都会非常感激。

![在此处输入图像描述](../Images/6b575e00ef1cc6c205ed0855b77f5402.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T07:22:56.670

像这样创建两个**主选项卡**（主选项卡是这两个选项卡）

```
 <TabItem   Header="«" Name="LeftTab"/>
  <TabItem Header="»" Name="RightTab"/> 
```

将它们的可见设置为隐藏。现在添加您想要的所有选项卡（使用 c# 代码或 xaml），但不要忘记为**您添加的所有选项卡**设置标签，如下所示

```
 <TabItem   Header="new" Name="tiNew" Tag="1"/>
    <TabItem Header="edit" Name="tiEdit" Tag="2"/>
    ... 
```

现在，当标签数量超出正常水平并且您无法在一页中显示全部内容时：

1.更改两个主选项卡的可见性..

```
 bool is_Left_Right_tabVisible = false;
 if (tabControl1.Items.Count > 8)
 {
     LeftTab.Visibility = System.Windows.Visibility.Visible;
     RightTab.Visibility = System.Windows.Visibility.Visible;
     is_Left_Right_tabVisible = true;

  }
  else
  {
     LeftTab.Visibility = System.Windows.Visibility.Hidden;
     RightTab.Visibility = System.Windows.Visibility.Hidden;
     is_Left_Right_tabVisible = false;
   } 
```

2.隐藏所有额外的选项卡，只显示其中一些（例如：显示两个主选项卡并显示标签**为 1-8 的**选项卡）

3.如果用户单击主选项卡（左侧或右侧选项卡）隐藏一个选项卡并显示另一个选项卡（例如：当用户单击右侧隐藏的 NO 1 和可见的 No 5 时，您有**lefttab-1-2-3-4-righttab**和专注于 5)

```
 private void RightTab_MouseUp(object sender, MouseButtonEventArgs e)
    {
    if (is_Left_Right_tabVisible)
    {
        TabItem ti = sender as TabItem;
        if (ti.Name == "RightTab")
        {
            //find right tab must set to visible
            int Showtabindex = 0;
            var t1 = tabControl1.Items.OfType<TabItem>().Where(x => x.Visibility == System.Windows.Visibility.Hidden);
            foreach (var item in t)
            {
                if (((int)item.Tag) > Showtabindex)
                    Showtabindex = (int)item.Tag;
            }
            //find left tab must go invisible
            int Hiddentabindex = Showtabindex;
            var t2 = tabControl1.Items.OfType<TabItem>().Where(x => x.Visibility == System.Windows.Visibility.Visible);
            foreach (var item in t2)
            {
                if (((int)item.Tag) < Hiddentabindex)
                    Hiddentabindex = (int)item.Tag;
            }

            (tabControl1.Items[Hiddentabindex] as TabItem).Visibility = System.Windows.Visibility.Hidden;
            (tabControl1.Items[Showtabindex] as TabItem).Visibility = System.Windows.Visibility.Visible;

            //you can create drag and drop for tabs then user can change tab TAG
        }
        else if (ti.Name == "LeftTab")
        {
            //.....
        }
    }
} 
```

我知道这有点难，但是当我创建一个好的用户控件时，我感觉很好。但是不要忘记在这个用户控件中我们使用 tabcontrol 我们可以从第一个开始创建自定义选项卡控件并且不要使用这个 tabcontrol。

您还可以为选项卡创建动画，当那些改变不透明度和移动动画会很好[检查这篇文章](https://stackoverflow.com/questions/10459289/animate-grid-from-one-position-to-another/10460884#10460884)

# google-maps-api-3 - 谷歌地图 api v3 在给定初始纬度/经度、距离和角度的情况下确定目的地纬度/经度

> ID：10468637
> 
> 赞同：1
> 
> 时间：2012-05-06T06:26:00.977
> 
> 标签：google-maps-api-3

如果我有初始纬度/经度，从起点到终点的距离，以及相对于 x 轴的 98 度斜率，有没有办法确定目标纬度/经度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T06:39:11.837

此链接：[http](http://www.movable-type.co.uk/scripts/latlong.html) ://www.movable-type.co.uk/scripts/latlong.html具有所需的公式。

很抱歉，我找不到预先构建的脚本。也许其他人知道可以为您应用这些公式的脚本。但是，通过一些努力，您应该能够采用这些公式并创建自己的脚本。（这很麻烦 - 但如果您确实决定需要自己编写脚本，那么编写脚本可能并不简单。）

# python - Django / Python奇怪的没有名为'module_name'的模块

> ID：10468646
> 
> 赞同：0
> 
> 时间：2012-05-06T06:27:24.120
> 
> 标签：python, django, django-models, import

我创建了一个简单的模块来存储我的所有选择并在我的应用程序中重用它们（请参阅 CharField 选择）

这是我的项目结构

```
project_name/  
  -- manage.py  
  -- settings.py
  -- ......
  -- apps/  
      -- __init__.py
      -- simple_app/
           -- __init__.py
           -- models.py
           -- ....
  -- common/
      -- __init__.py  
      -- choices/
           -- __init__.py 
```

在我的 common.choices.__init__.py 里面我有

```
from django.utils.translation import ugettext as _

SCALE_TYPE_CHOICES = (
    (1,_('Lineare')),
    (2,_('Logaritmica')),
    (3,_('Esponenziale'))
)

GENDER_CHOICES = (
    ('male',_('Maschio')),
    ('female',_('Femmina')),
    ('any',_('Tutti')),
) 
```

在apps.simple.models.py

```
from common.choices import SCALE_TYPE_CHOICES, GENDER_CHOICES
..... 
```

我的passenger_wsgi.py

```
import sys, os

sys.path.insert(0, os.getcwd())
sys.path.insert(0, os.path.join(os.getcwd(),"path_to_my_project"))
sys.path.insert(0, os.path.join(os.getcwd(),"path_to_my_project/common"))

os.environ['DJANGO_SETTINGS_MODULE'] = "project_name.settings"
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

在我的开发服务器中它工作正常，但在我的生产服务器中它抛出并错误“没有名为选择的模块”

管理.py 外壳

```
 import common
 print common
 <module 'common' from 'absolute_project_path/common/__init__.pyc'> 
```

乘客wsgi.py

```
import sys, os
sys.path.insert(0, os.getcwd())
sys.path.insert(0, os.path.join(os.getcwd(),"path_to_my_project"))
sys.path.insert(0, os.path.join(os.getcwd(),"path_to_my_project/common"))

os.environ['DJANGO_SETTINGS_MODULE'] = "project_name.settings"
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler()
 import common
 print common

 Outputs
 <module 'common' from 'absolute_project_path/common/__init__.pyc'> 
```

有任何想法吗？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:56:24.747

从 wsgi.py 中删除 common 并将其添加到 settings.py

```
导入操作系统
文件目录 = os.path.dirname(__file__)
sys.path.append(os.path.join(filedir))
sys.path.append(os.path.join(filedir, 'common'))

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T06:33:25.907

将项目所在的目录添加到`sys.path`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T06:59:12.170

检查以确保您的 sys.path 中没有其他包/模块`common`。

```
import common
print common # or common.__file__ 
```

您是`append`项目路径`sys.path`而不是`insert(0, path)`，因此`common`sys.path 中没有选择的可导入将失败。您可以使用`insert`来查看错误是否消失。

# python - 强制面板在 wx 中为正方形（python）

> ID：10468647
> 
> 赞同：1
> 
> 时间：2012-05-06T06:27:52.747
> 
> 标签：python, wxpython, panel, wxwidgets

有谁知道我将如何强制面板成为方形。

发生这种情况的情况是有一个面板，其中我有一个带有 2 个插槽的水平 BoxSizer，在左侧插槽中我有一个面板，我将通过 wx.PaintDC 进行绘制，在右侧我将有一个列表控件或其他一些小部件。

我想要实现的是使窗口可实现并让左侧面板始终保持方形，并让右手内容填充其余空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:11:33.637

其中一种解决方案是在事件函数中使用 EVT_SIZE 响应窗口大小调整和更新面板大小。简单示例代码：

```
import wx
from wx.lib.mixins.inspection import InspectionMixin

class MyApp(wx.App, InspectionMixin):
    def OnInit(self):
        self.Init()  # initialize the inspection tool
        frame = wx.Frame(None)
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        frame.SetSizer(sizer)

        self.__squarePanel = wx.Panel(frame)
        sizer.Add(self.__squarePanel, 0, wx.ALL | wx.EXPAND, 5)

        frame.Bind(wx.EVT_SIZE, self.OnSize)

        frame.Show()
        self.SetTopWindow(frame)
        return True  

    def OnSize(self, evt):
        frame = evt.GetEventObject()
        frameW, frameH = frame.GetSize()
        targetSide = min(frameW, frameH)
        self.__squarePanel.SetSize((targetSide, targetSide))

app = MyApp()
app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:46:28.767

您可以绑定到`wx.EVT_SIZE`以在调整窗口大小时调整面板大小。部分代码（未经测试，但类似这样）：

```
self.panel = wx.Panel(self, -1, size=(200, 200))
self.Bind(wx.EVT_SIZE, self.resize_panel)

def resize_panel():
    w, h = self.sizer.GetSize()
    w = h
    panel.SetSize(w, h) 
```

# php - 遍历 SimpleXMLElement 以检索邮政编码值

> ID：10468648
> 
> 赞同：0
> 
> 时间：2012-05-06T06:28:00.150
> 
> 标签：php, xml, geocoding

我正在尝试从 Google Geocode v3 API XML 响应中提取邮政编码。我遇到的困难是有时 postal_code 值包含在第 6 个 address_element 中，有时包含在第 7 个中。这是我正在使用的 XML 响应，在此示例响应中，您可以看到 postal_code 是 address_component 数组的第 6 个元素：

```
SimpleXMLElement Object
(
[status] => OK
[result] => Array
    (
        [0] => SimpleXMLElement Object
            (
                [type] => street_address
                [formatted_address] => 177 Church St, Toronto, ON M5C 2G5, Canada
                [address_component] => Array
                    (
                        [0] => SimpleXMLElement Object
                            (
                                [long_name] => 177
                                [short_name] => 177
                                [type] => street_number
                            )

                        [1] => SimpleXMLElement Object
                            (
                                [long_name] => Church St
                                [short_name] => Church St
                                [type] => route
                            )

                        [2] => SimpleXMLElement Object
                            (
                                [long_name] => Toronto
                                [short_name] => Toronto
                                [type] => Array
                                    (
                                        [0] => locality
                                        [1] => political
                                    )

                            )

                        [3] => SimpleXMLElement Object
                            (
                                [long_name] => Toronto
                                [short_name] => Toronto
                                [type] => Array
                                    (
                                        [0] => administrative_area_level_2
                                        [1] => political
                                    )

                            )

                        [4] => SimpleXMLElement Object
                            (
                                [long_name] => Ontario
                                [short_name] => ON
                                [type] => Array
                                    (
                                        [0] => administrative_area_level_1
                                        [1] => political
                                    )

                            )

                        [5] => SimpleXMLElement Object
                            (
                                [long_name] => Canada
                                [short_name] => CA
                                [type] => Array
                                    (
                                        [0] => country
                                        [1] => political
                                    )

                            )

                        [6] => SimpleXMLElement Object
                            (
                                [long_name] => M5C 2G5
                                [short_name] => M5C 2G5
                                [type] => postal_code
                            )

                    )

                [geometry] => SimpleXMLElement Object
                    (
                        [location] => SimpleXMLElement Object
                            (
                                [lat] => 43.6547363
                                [lng] => -79.3763746
                            )

                        [location_type] => RANGE_INTERPOLATED
                        [viewport] => SimpleXMLElement Object
                            (
                                [southwest] => SimpleXMLElement Object
                                    (
                                        [lat] => 43.6533849
                                        [lng] => -79.3777345
                                    )

                                [northeast] => SimpleXMLElement Object
                                    (
                                        [lat] => 43.6560829
                                        [lng] => -79.3750365
                                    )

                            )

                        [bounds] => SimpleXMLElement Object
                            (
                                [southwest] => SimpleXMLElement Object
                                    (
                                        [lat] => 43.6547315
                                        [lng] => -79.3763964
                                    )

                                [northeast] => SimpleXMLElement Object
                                    (
                                        [lat] => 43.6547363
                                        [lng] => -79.3763746
                                    )

                            )

                    )

            ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T06:32:52.830

我还没有尝试过，但我认为它应该可以工作。

```
$address = $array->result[0]->address_component;
$postal_code = '';
foreach($address as $adr){
    if($adr->type == 'postal_code'){
        $postal_code = $adr->long_name;
    }
} 
```

# asp.net - 即使在sharepoint server 2007上使用jquery验证引擎验证所有验证，如何解决页面不是回发的问题？

> ID：10468649
> 
> 赞同：0
> 
> 时间：2012-05-06T06:28:02.030
> 
> 标签：asp.net, sharepoint-2007, jquery-validate

我有复杂的表单，在页面中有一个提交按钮，它有客户端和服务器端的事件。

第一次单击按钮后，添加验证类，然后显示验证错误消息，

然后填写一个必填字段进行验证，再次点击按钮，页面不回传，即使jquery验证引擎也能正常工作。

在我的本地计算机中，页面在填写到必填字段后被回发。我假设，客户端和服务器端都可以工作。

但不是在服务器上，页面在填写到必填字段后不会发回。

这是我的代码。我期待着您的回复和建议。

==================================================== =========================

```
jQuery(document).ready(function () {
    jQuery("#aspnetForm").validationEngine();

    //btmContinous
    $('#ctl00_PlaceHolderMain_Form1_btmContinous').click(function () {
        //Part A
    var className = $('#ctl00_PlaceHolderMain_Form1_txtA2').attr('class');
        alert(className);

        if (!(className == "validate[required] text-input"))        
        { 
    alert(className);

        $('#ctl00_PlaceHolderMain_Form1_txtA2').addClass("validate[required] text-input");

       }

if ( $("#Form1").validationEngine('validate') == true) {
         alert("true");             
     //$('#ctl00_PlaceHolderMain_Form1_txtA2').removeClass("validate[required] text-input");
    //should  post back here

    }
else{alert("false");}       

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:09:39.187

昨天我遇到了同样的问题。回发后我的验证将不起作用。

页面包含更新面板和按钮单击 document.ready 内的所有验证。

回发后验证将不起作用。

我所做的是进行验证，即

```
$("#<%= Button1.ClientID %>").click(function() {
    //// Validation conditions here
}); 
```

在 Sys.Application.add_load() 函数内部，它也在回发后开始工作。

所以现在代码看起来像

```
Sys.Application.add_load(function() {
    $("#<%= Button1.ClientID %>").click(function() {
        //// Validation conditions here
    });
} 
```

更多关于发生的事情可以在这里阅读

[http://www.codeoutlaw.com/2009/11/use-sysapplicationaddload-instead-of.html](http://www.codeoutlaw.com/2009/11/use-sysapplicationaddload-instead-of.html)

希望这可以帮助某人:)

# postgresql - postgresql 程序

> ID：10468650
> 
> 赞同：-1
> 
> 时间：2012-05-06T06:28:10.010
> 
> 标签：postgresql, procedure

我正在编写以下 pgsql 程序：

```
CREATE OR REPLACE FUNCTION KNN(gid_ integer)
RETURNS Text AS $body$
DECLARE
row_ RECORD;
BEGIN
    SELECT  g1.gid As SOURCE, g2.gid As Neighbors  FROM polygons as g1, polygons as   g2  WHERE g1.gid = $1 and g1.gid <> g2.gid  ORDER BY g1.gid, 
ST_Distance(g1.the_geom,g2.the_geom) limit 5;
END
$body$
LANGUAGE plpgsql; 
```

现在查询为提供给过程的每个参数值返回 5 行。我怎样才能返回这 5 行。此外，我如何为存储在表多边形中作为列 gid 的所有参数值执行该过程。请有人提供完整的代码。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:45:21.710

您可以使用`RETURNS TABLE`语法隐式创建`OUT`变量：

```
CREATE OR REPLACE FUNCTION KNN(
    gid_ integer
) RETURNS TABLE (
    source  integer,
    neighbor integer
) LANGUAGE SQL AS $$
    SELECT g1.gid As SOURCE
         , g2.gid As Neighbors
      FROM polygons AS g1,
           polygons AS g2
     WHERE g1.gid = $1
       AND g1.gid <> g2.gid
     ORDER BY g1.gid
         , ST_Distance(g1.the_geom,g2.the_geom)
     LIMIT 5;
$$; 
```

要使用它，请使用它，`SELECT * FROM KNN(42)`您将获得最多五个两列的行。

# asp.net-mvc-3 - asp.net mvc3中的验证问题

> ID：10468653
> 
> 赞同：0
> 
> 时间：2012-05-06T06:28:23.290
> 
> 标签：asp.net-mvc-3, c#-4.0, data-annotations

我是 system.datamodel.dataannotation 来验证我的观点。

下面是我的视图模型。

```
using System.ComponentModel.DataAnnotations;

    public class LoginVM
{
    [Required(ErrorMessage="Please provide UserName")]
    public string UserName { get; set; }
    public string Password { get; set; }
} 
```

以下是我对登录的看法

```
<% using (Html.BeginForm())
{ %>
<% Html.ValidationSummary(true); %>
<div style="width: 100%; height: 100%; border-style: none;">
    <fieldset style="border-style: none;">
        <table style="width: 100%; height: 100%; border-style: none;" border="0">
            <tr>
                <td style="height: 100px;" colspan="4">
                </td>
                <td class="editor-label" style="width: 35%; font-size: medium;   vertical-align: top;
                    text-align: justify;">
                    <%: Html.Label("Sign in with your Account Credentials")%><br />
                    <br />
                    <a href='<%= Url.Action("LogOn","Site") %>' class="header-links">Support / Contact Us</a>
                </td>
                <td style="width: 5%;">
                </td>
                <td style="width: 60%; border-left-width: 2px; border-left-color: #E3E3E3; border-left-style: solid;">
                    <table style="border-style: none;" border="0">
                        <tr>
                            <td colspan="3">
                            </td>
                        </tr>
                        <tr style="height: 30px;">
                            <td style="width: 20%;" class="login-display-label">
                                <%: Html.LabelFor(m=>m.UserName,"UserName :") %><br />
                                <br />
                                <%: Html.LabelFor(m=>m.Password,"Password :") %><br />
                                <br />
                            </td>
                            <td style="width: 182px;" colspan="2">
                                <%: Html.TextBoxFor(m=>m.UserName,"UserName :")%><br />
                                <%: Html.ValidationMessageFor(m=>m.UserName) %><br />
                                <%: Html.TextBoxFor(m=>m.Password,"Password :")%><br />
                                <%: Html.ValidationMessageFor(m=>m.Password) %><br />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                &nbsp
                            </td>
                            <td style="width: 182px;" colspan="3">
                                <input type="button" id="btnSubmit" value="Submit" />
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </fieldset>
</div> 
```

以下是我放在我的视图以及我的 site.master 页面上的脚本

```
 <script src="../../Scripts/jquery-1.5.1.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.unobtrusive.js" type="text/javascript"></script> 
```

我还检查了我的 web.config 是否有以下标记

```
 <appSettings>
<add key="ClientValidationEnabled" value="true"/>
<add key="UnobtrusiveJavaScriptEnabled" value="true"/> 
```

经过大量的努力，我的验证没有发生，请帮助我....

让我知道我必须做出哪些必要的改变。

提前考虑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:24:18.180

更改javascript地址：

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script> 
```

和 HTML 助手

```
Html.TextBoxFor(m=>m.UserName) 
```

# sql-server - SQL Server 2012 的类型系统版本（兼容级别）是什么

> ID：10468656
> 
> 赞同：4
> 
> 时间：2012-05-06T06:28:42.257
> 
> 标签：sql-server, ado.net, connection-string, sql-server-2012, compatibility-level

我可以在 ADO.NET 连接字符串中指定什么[类型的系统版本](http://msdn.microsoft.com/en-us/library/ms254500.aspx#ctl00_MTCS_main_ctl90_ctl00_ctl13)（兼容级别）令牌以指示仅支持 SQL Server 2012？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T07:36:03.640

据此，[它将](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring%28v=vs.110%29.aspx)是“SQL Server 2012”。虽然该页面适用于 .NET Framework 4.5，因此仍是预发布版，但考虑到参数的其他可能值，可以安全地假设该值将成立。

话虽如此，我不知道 4.5 以下的任何 .NET 版本是否会接受该值作为有效值。我现在不在电脑前，所以我无法检查，抱歉。

**编辑**它看起来好像这个值确实在客户端解析/检查，即在内部`System.Data`。用反射器看，它发生在`SqlConnectionString.SqlConnectionString(string connectionString)`. 此外，还有一个枚举`SqlConnectionString.TypeSystem`，它命名了所有已知/支持的值。对于 .NET 4.0 ，这将是`SqlServer2000`、和. 这个值是在类内部传递的，最终在内部的某个地方使用。`SqlServer2005``SqlServer2008``Latest``System.Data.SqlClient``SqlDataReader`

因此，除非您使用`Latest`which would use but not force SQL Server 2012，否则无法强制使用 .NET < 4.5 的 SQL Server 2012 类型系统。

# sql - 用于连接表的 Postgres 唯一多列索引

> ID：10468657
> 
> 赞同：5
> 
> 时间：2012-05-06T06:28:43.097
> 
> 标签：sql, postgresql, join

我在 Postgres 中有一个多对多连接表，我想索引到 A）提高性能（显然）和 B）强制唯一性。例如：

```
a_id | b_id
1    | 2     <- okay
1    | 3     <- okay
2    | 3     <- okay
1    | 3     <- not okay (same as row 2) 
```

是否可以在两列上建立一个索引来强制值的唯一性？我应该使用什么类型的索引？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T06:35:58.127

# 作为主键

如果该唯一键是主键，请执行此操作：

```
create table tbl(
   a_id int not null,
   b_id int not null,
   constraint tbl_pkey primary key(a_id,b_id)
); 
```

# 不是主键

如果该唯一键是非主键，请执行此操作：

```
create table tbl(

   -- other primary key here, e.g.:
   -- id serial primary key,

   a_id int not null,
   b_id int not null,
   constraint tbl_unique unique(a_id,b_id)
); 
```

# 现有表

如果您有现有表，请改为执行以下操作：

```
alter table tbl
      add constraint tbl_unique unique(a_id, b_id) 
```

该更改表显示此消息：

```
NOTICE:  ALTER TABLE / ADD UNIQUE will create implicit index "tbl_unique" for table "tbl"

Query returned successfully with no result in 22 ms. 
```

# 降低

如果您想删除该约束（您可能希望将 3 个字段的组合设为唯一）：

```
ALTER TABLE tbl DROP CONSTRAINT tbl_unique; 
```

# 索引 & 约束 & 空值

关于索引，来自 Postgres doc：

> 当为表定义唯一约束或主键时，PostgreSQL 会自动创建唯一索引

来源：[http ://www.postgresql.org/docs/9.1/static/indexes-unique.html](http://www.postgresql.org/docs/9.1/static/indexes-unique.html)

* * *

如果唯一性取决于某些规则，则应使用`CREATE UNIQUE INDEX`，例如：

鉴于这种：

```
CREATE TABLE tbl
(
  a_id integer NOT NULL,
  b_id integer NULL  
);

alter table tbl
    add constraint tbl_unique unique(a_id, b_id); 
```

该唯一可以捕获这些重复项，这将被数据库拒绝：

```
insert into tbl values
(1,1),
(1,1); 
```

然而， UNIQUE CONSTRAINT 无法捕获重复的空值。Nulls 作为未知数，它们作为通配符，这就是为什么它允许在唯一约束中有多个空值。这将被数据库接受：

```
insert into tbl values
(1,1),
(1,null), -- think of this null as wildcard, some real value can be assigned later.
(1,null); -- and so is this. that's why both of these nulls are allowed 
```

想想`UNIQUE CONSTRAINT`它允许延迟唯一性，因此接受上面的空值。

如果您只希望每个 a_id 有一个通配符（null b_id），则除了唯一约束之外，您还需要添加一个`UNIQUE INDEX`. UNIQUE CONSTRAINT 不能对它们有表达式。 `INDEX`并且`UNIQUE INDEX`可以。这将是您拒绝多个 null 的完整 DDL；

这将是您完整的 DDL：

```
CREATE TABLE tbl
(
  a_id integer NOT NULL,
  b_id integer NULL  
);
alter table tbl
    add constraint tbl_unique unique(a_id, b_id);

create unique index tbl_unique_a_id on tbl(a_id) where b_id is null; 
```

这将被您的数据库现在拒绝：

```
insert into tbl values
(1,1),
(1,null),
(1,null); 
```

这将被允许：

```
insert into tbl values
(1,1),
(1,null); 
```

相关[http://www.ienablemuch.com/2010/12/postgresql-said-sql-server2008-said-non.html](http://www.ienablemuch.com/2010/12/postgresql-said-sql-server2008-said-non.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T06:38:54.550

除了使用 @Michael Buen 解释的`PRIMARY KEY`and`UNIQUE`语法之外，您还可以创建一个显式索引：

```
CREATE UNIQUE INDEX foo_a_b ON tbl(a_id, b_id); 
```

这只是一个普通的多列 b 树索引（这正是 KEY 语法隐式创建的）。

# java - Java中需要通过数组来表示二叉搜索树的节点。我怎么做？

> ID：10468659
> 
> 赞同：0
> 
> 时间：2012-05-06T06:29:25.020
> 
> 标签：java, data-structures, binary-tree, binary-search-tree

这是我的数据结构类的作业，它是用 Java 编写的。

我必须制作这个小游戏之类的东西；这个世界是由一个图组成的，一些节点持有的项目，当找到时，将被添加到用户的库存中，这是一个二叉搜索树。（它必须是一个二叉搜索树，否则这会容易得多。）我已经弄清楚了大部分，但我需要用户能够查看和访问库存树的内容。我提供的二叉树节点类有一个`inorderPrint()`使用递归打印所有内容的方法，但这仅有助于向它们显示内容，而不是为它们提供访问它们的简单方法。我想要一个返回二进制搜索树节点数组的方法，这样我就可以在主...

```
int i = 0;
int choice;
System.out.println("# - Item\tPoints"); //Will appear as # - Item     Points
for (BTNode node : inventory.treeAsArray()) {
    System.out.printf("%d - %s\t%d\n", i, node.getData().getName(),
                      node.getData().getPoints()); //example: 1 - Poo    100
    i++;
}

System.out.println("Select the number of the item you want to remove: ");
choice = keyboard.nextInt(); 
```

然后我会再次遍历数组并删除与用户输入的数字相对应的项目。不过，我不知道如何编写一个以数组形式返回二叉搜索树内容的方法。这是我的主要问题。在我的教科书中我真的找不到它的算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:38:20.410

如果我要这样做，我可能只是按顺序将一个数组传递给所有节点。

```
public ArrayList<BTNode> treeAsArray() {
    ArrayList<BTNode> list = new ArrayList<BTNode>();
    root.buildListInorder(list);
    return list;
} 
```

然后有

```
private void buildListInorder(ArrayList<BTNode> list) {
    buildListInorder(this.left);
    list.add(this);
    buildListInorder(this.right);
} 
```

您需要添加适当的检查，但这是所需代码的基本大纲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T06:39:55.650

```
public List<BTNode> treeAsArray() {
     return treeAsArray(this.root, new ArrayList<BTNode>());
}

private List<BTNode> treeAsArray(BTNode root, List<BTNode> array) {
     if (root == null)
         return array;

     treeAsArray(root->getLeftNode(), array);
     array.add(root);
     treeAsArray(root->getRightNode(), array);

     return array;
} 
```

# python - 在python中删除换行符的问题

> ID：10468668
> 
> 赞同：0
> 
> 时间：2012-05-06T06:31:01.913
> 
> 标签：python, newline

除了代码中已有的之外，我还尝试使用 newString.strip('\n') ，但它没有做任何事情。我正在输入一个不应该有问题的 .fasta 文件。提前致谢。

```
def createLists(fil3):
    f = open(fil3, "r")
    text = f.read()

    listOfSpecies = []
    listOfSequences = []

    i = 0
    check = 0

    while (check != -1):
        startIndex = text.find(">",i)
        endIndex = text.find("\n",i)
        listOfSpecies.append(text[startIndex+1:endIndex])

        if(text.find(">",endIndex) != -1):
            i = text.find(">",endIndex)
            newString = text[endIndex+1: i]
            newString.strip()
            newString.splitlines()
            listOfSequences.append(newString)

        else:
            newString = text[endIndex+1:]
            newString.strip()
            newString.strip('\n')
            listOfSequences.append(newString)
            return (listOfSpecies,listOfSequences)

def cluster(fil3):
    print createLists(fil3)

cluster("ProteinSequencesAligned.fasta") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T07:00:32.840

字符串是不可变的：

```
In [1]: s = 'lala\n'

In [2]: s.strip()
Out[2]: 'lala'

In [3]: s
Out[3]: 'lala\n'

In [4]: s = s.strip()

In [5]: s
Out[5]: 'lala' 
```

所以就这样做：

```
new_string = text[end_index+1:].strip() 
```

请遵循 PEP 8。此外，您可以只在行上使用 for 循环来重写循环。Python 文件支持直接迭代：

```
In [6]: with open('download.py') as fobj:
   ...:     for line in fobj:
   ...:         print line 
```

如果您不使用该`with`语句，请确保使用`close()`函数末尾的方法关闭文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:56:21.523

那么最后我发现最好的解决方案是 new_string = text[endIndex+1:].replace('\n', '')

# python - Python PyInstaller Ubuntu 问题

> ID：10468669
> 
> 赞同：2
> 
> 时间：2012-05-06T06:31:07.223
> 
> 标签：python, linux, ubuntu, tkinter, pyinstaller

我一直在寻找有关如何使用 pyinstaller 的教程，但找不到我可以遵循的教程。我一直在研究这个几个小时，但找不到任何对我有帮助的东西。我正在使用 Linux，想知道是否有人可以帮助我摆脱这种乞求，因为我对此一无所知。我也有组成一个程序的三个文件，并且我也在使用 Tkinter，所以我不知道这是否会使它变得更加困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:40:02.957

以下内容是从我对该问题的评论中重新发布的，以便可以将此问题标记为已回答（假设 OP 对此答案感到满意）。它最初是作为评论发布的，因为它没有直接回答问题。

> 没有太多关于如何在 Linux 上执行此操作的教程的原因是因为在 Linux 上执行此操作没有多大意义，因为实际的 Python 文件可以转换为具有一组依赖项和所有内容的包。也许您应该尝试这样做；PyInstaller 方法只有在您有正当理由不使用软件包时才值得（并且确实存在这样的理由）。

# visual-studio-2010 - 如何从 Visual c++ 6.0 迁移到 Visual c++ 2010，从 32 位到 64 位应用程序

> ID：10468670
> 
> 赞同：0
> 
> 时间：2012-05-06T06:31:11.250
> 
> 标签：visual-studio-2010, visual-c++, migration, visual-c++-2010

我必须将大型项目从 Visual c++ 6.0 迁移到 Visual c++ 2010，并从 windows xp sp2 32 位迁移到 windows 7 64 位应用程序。关于我的项目：C/C++ 目标，不使用库，项目构建在 windows xp 32 位和 Visual c++ 6.0 ide 中。有 220 万行代码什么方法可以解决这个问题？请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:50:38.617

这是一个 MS 文档的链接列表，它是一个很好的起点：

*   [使用 Visual C++ 进行 64 位编程](http://msdn.microsoft.com/en-us/library/h2k70f3s.aspx)
*   [常见的 Visual C++ 64 位迁移问题](http://msdn.microsoft.com/en-us/library/3b2e7499.aspx)
*   [一般移植指南](http://msdn.microsoft.com/en-us/library/aa384190.aspx)
*   [迁移提示](http://msdn.microsoft.com/en-us/library/aa384214.aspx)

最重要的是，您可能需要处理一些与 64 位迁移无关的语言更改，例如`for`处理循环中声明的变量的方式的更改。`/Zc:forScope`和选项可能对`/Zc:wchar_t`其中一些有帮助。

# iphone - NSString UTF8String 处理 unicode 字符

> ID：10468671
> 
> 赞同：2
> 
> 时间：2012-05-06T06:31:24.750
> 
> 标签：iphone, objective-c, ios

当我`[NSString UTF8String]`在某些 unicode 字符上运行时，结果`const char*`表示会`NSLog`在设备/模拟器显示器中和设备/模拟器显示器上被破坏。本身显示正常，`NSString`但我需要将其转换`NSString`为 a`cStr`才能在`CGContextShowTextAtPoint`.

它很容易重现（见下面的代码），但我搜索了类似的问题，但没有任何运气。一定是我缺少的基本东西。

```
const char *cStr = [@"章" UTF8String];
NSLog(@"%s", cStr); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:52:26.627

`CGContextShowTextAtPoint`仅适用于 ASCII 字符。

检查[这个](https://stackoverflow.com/questions/1237565/iphone-cgcontextshowtextatpoint-for-japanese-characters)SO question 以获得答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T06:50:16.820

使用字符串格式说明符（又名 %s）时，如果 ac 字符串的字符不是 ASCII，则无法保证它们会正确打印。使用您定义的复杂字符可以使用转义字符以 UTF-8 表示，以指示可以从中找到该字符的字符集。但是 %s 使用系统编码来解释您提供给格式的字符串中的字符（在这种情况下，在 NSLog 中）。请参阅 Apple 的文档：

[https://developer.apple.com/library/mac/documentation/cocoa/Conceptual/Strings/Articles/formatSpecifiers.html](https://developer.apple.com/library/mac/documentation/cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)

%s 以 Null 结尾的 8 位无符号字符数组。%s 以系统编码而非 UTF-8 等方式解释其输入。

转到您的 CGContextShowTextAtPoint 不起作用，该 API 仅支持 macRoman 字符集，而不是整个 Unicode 字符集。

您需要查看另一个用于显示 Unicode 字符的 API。可能 Core Text 是您想要开始的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T06:50:46.810

我以前从未注意到这个问题，但一些快速的实验表明，使用`printf`而不是`NSLog`会导致正确的 Unicode 字符出现。

尝试：

```
printf("%s", cStr); 
```

这在 Xcode 控制台和终端中都为我提供了所需的输出（“章”）。正如 nob1984 在他的回答中所说，字符数据的解释取决于被调用者。

# jquery-ui - 当从 ajax 加载 html 时，让 jQuery datepicker 生效

> ID：10468672
> 
> 赞同：3
> 
> 时间：2012-05-06T06:31:25.990
> 
> 标签：jquery-ui, jquery, datepicker

我在所有表单上都定义了以下 jQuery 脚本。

```
$( "input:text.datepicker" ).datepicker({ 
    yearRange: "1900:+0",
    changeMonth: true,
    changeYear: true
}); 
```

基本上，这会在任何输入元素上调用日期选择器，该输入元素是文本类型并且具有类“datepicker”。

这在所有页面上都可以正常工作，除了我在下面描述的一种情况。

我必须通过 ajax 加载表单，然后将其显示在 jQueryUI 对话框中。**在这个对话框中，如果**我再次包含 java 脚本代码，我只能显示日期选择器。显然我不想包含两次代码。有没有办法让新加载的文本框以某种方式显示日期选择器？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T09:53:27.753

一种选择是以*不推荐*的方式和[事件](http://api.jquery.com/click/)[使用`on`方法](http://api.jquery.com/on/)来初始化 Datepicker： *`live`[`click`](http://api.jquery.com/click/)*

 *```
$('body').on('click', 'input.datepicker', function(event) {
    $(this).datepicker({
        showOn: 'focus',
        yearRange: '1900:+0',
        changeMonth: true,
        changeYear: true
    }).focus();
}); 
```

这段代码应该放在`$(document).ready`section中。

注意初始化后的`showOn: 'focus'`选项和触发[`focus`事件。](http://api.jquery.com/focus/)

**演示：http:** [//jsfiddle.net/Mq93s/](http://jsfiddle.net/Mq93s/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T10:12:40.920

这里的问题是，当执行日期选择器代码时，您的表单元素还不存在，因此它无法将其转换为日期选择器。您可以通过以下任一方式绕过此问题：

1.  将 datepicker 代码移动到一个单独的函数中，然后您将从`document.ready`事件中的所有页面手动调用该函数。这样它只会被声明一次，你也可以在你的ajax页面中调用它，只有当ajax调用完成而不是`ready`事件时你才会调用它。
2.  由于您知道要在表单中加载什么，因此您可以将给定的输入转换为日期选择器。这不是一个干净的解决方案，因为如果您要更改日期选择器中的某些内容，至少有两个地方可以修改。

这两种方法都是有效的，选择取决于您，因为您知道哪个版本更适合您的项目:)*

# c# - 自动更新 C# 列表框

> ID：10468675
> 
> 赞同：0
> 
> 时间：2012-05-06T06:32:44.193
> 
> 标签：c#, winforms, backgroundworker, auto-update

我想运行一个后台工作程序来使用 mssql 数据库中的值更新列表框。我出来了：

```
 public frmMain()        {
        InitializeComponent();            
        bw.DoWork += new DoWorkEventHandler(bw_DoWork);
    }

    private void frmMain_Load(object sender, EventArgs e) {
            if (bw.IsBusy != true)
            {
                bw.RunWorkerAsync();
            }
     }

   private void bw_DoWork(object sender, DoWorkEventArgs e){
        BackgroundWorker worker = sender as BackgroundWorker;
        for (int i = 1; (i <= 10); i++) {
            if ((worker.CancellationPending == true)) {
                e.Cancel = true;
                break;
            }
            else                {
               (1) LoadPrescriptions();  //load the date in a list and writes the list into the listbox
               (2) System.Threading.Thread.Sleep(500);
            }
        }
    }

   private void LoadPrescriptions()
    {
        main_controller = new MainController();
        prescriptionsList = new List<Prescription>();
        prescriptionsList = main_controller.LoadPrescriptions(0); 
        lstPrescriptions.Items.Clear();
        for (int i = 0; i < prescriptionsList.Count; i++)
            lstPrescriptions.Items.Add(prescriptionsList[i].name + "  " + prescriptionsList[i].surname);
    } 
```

在（1）和（2）之间的某个地方我得到了`A first chance exception of type 'System.InvalidOperationException' occurred in System.Windows.Forms.dll` 错误。

关于如何解决这个问题的想法？只要程序正在运行，我只想运行列表框的更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:49:42.410

当我们从 GUI 以外的线程访问一些 GUI 控件时，我们会遇到这种情况

尝试访问此委托结构中的 GUI 元素

```
 MethodInvoker objMethodInvoker = delegate
        {
             //access and assign data to list control here               
        };
        if (InvokeRequired)
            BeginInvoke(objMethodInvoker);
        else
            objMethodInvoker.Invoke(); 
```

# debugging - 在 Symfony 1.4 中使用 Web_Debug 工具调试 sql 查询

> ID：10468679
> 
> 赞同：0
> 
> 时间：2012-05-06T06:34:29.180
> 
> 标签：debugging, symfony-1.4

我正在使用一个使用 symfony 1.4.16 和 mysql 开发的 Web 应用程序。我需要查看应用程序中某些操作背后运行的 sql 查询是什么。所以在开发模式下，我在 settings.yml 文件中启用了 web_debug。

```
dev: 
   web_debug:              true 
```

现在我可以在浏览器中看到 Web 调试工具栏，但我找不到显示正在运行的 sql 查询的地方。

![在此处输入图像描述](../Images/2b8230e2d3eac444e9c9417f43fd7210.png)

我是否应该更改更多设置以获取 sql 查询。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:14:05.590

从 Sf 1.2 开始。您可以自定义 webDebug 面板，因此您很可能禁用了 DB 信息。看看这个文档：[http](http://symfony.com/legacy/doc/more-with-symfony/1_4/en/07-Extending-the-Web-Debug-Toolbar) ://symfony.com/legacy/doc/more-with-symfony/1_4/en/07-Extending-the-Web-Debug-Toolbar ，你应该能够找到你可以找到的地方重新启用查询面板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:00:50.877

编辑：config/databases.yml

添加这些行：

```
dev:
  propel:
    class: sfPropelDatabase
    param:
      classname: DebugPDO 
```

如果您使用 Doctrine，请将 Propel 替换为 Doctrine。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T08:38:23.457

没有其他你应该做的......

![如果您在操作中运行了 sql 查询，您应该会像在图片中看到它一样](../Images/3043bd3921614f43143b00f510df4ae2.png)

如果您在操作中运行了 sql 查询，您应该会看到它像图片

# php - 如何限制处理 php 的 textarea 字段中的字符数？

> ID：10468680
> 
> 赞同：9
> 
> 时间：2012-05-06T06:34:49.820
> 
> 标签：php, html, textarea, character, limit

我在 html 上制作的表单中使用 aa textarea 字段，处理由 php 完成。我想限制用户可以在 textarea 中输入的字符数。有什么方法可以做到这一点，因为 textarea 字段然后存储到 mysql 数据库中，因此我必须根据字段的 varchar 值来限制用户数据。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-06T06:39:51.557

`maxlength`您可以通过在 HTML中的 textarea 标签上设置属性来限制这一点，另外还可以通过函数`<textarea maxlength="120"></textarea>`在 PHP 中“剪切”输入字符串。`substr()`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-23T13:11:42.887

正如**s.webbandit**所提到的，您可以使用`maxlength`，但请注意，这是 HTML5 中引入的新功能，正如 W3 Schools[文章](http://www.w3schools.com/tags/att_textarea_maxlength.asp)中所说的那样`<textarea>`，因此“防弹”解决方案需要 Javascript。所以**直到**`maxlength`版本 10 和 Opera都不支持 Internet Explorer。

 **这是一种使用 Javascript 来帮助您的方法：

```
<script language="javascript" type="text/javascript">
   function charLimit(limitField, limitCount, limitNum) {
    if (limitField.value.length > limitNum) {
      limitField.value = limitField.value.substring(0, limitNum);
  } else {
      limitCount.value = limitNum - limitField.value.length;
       }
    }
</script> 
```

然后您可以像这样使用它（[原始来源](http://www.mediacollege.com/internet/javascript/form/limit-characters.html)）：

```
 <textarea name="limitedtextarea" onKeyDown="charLimit(this.form.limitedtextarea,this.form.countdown,100);">
    </textarea> 
```

这应该让你继续前进。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-06T00:07:52.247

这是通过 JavaScript 限制文本区域长度的一种非常简单的方法。

文本区域字段：

```
<input class='textField' type='text' NAME='note1' value='' onkeyup='charLimit(this, 40);'> 
```

JavaScript 函数：

```
function charLimit(limitField, limitNum) {
  if (limitField.value.length > limitNum) {
   limitField.value = limitField.value.substring(0, limitNum);}
} 
```

当用户输入超过 40 个字符时，它只会删除它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-12T16:33:18.087

我尝试了很多不同的方法来限制 textareas 中的文本，我发现最好的方法（客户端）是使用 jQuery.Maxlength.js 插件。简单快速，涵盖所有内容！

步骤 1\. 包含 Maxlength 插件脚本

```
<script language="javascript" src="jquery.maxlength.js"></script> 
```

步骤 2\. 添加 maxlength 属性到

```
<textarea maxlength="35" 
    rows="5" cols="30" name="address"></textarea> 
```

步骤 3\. 初始化插件

```
<script type="text/javascript">
    $(document).ready(function($) {
             //Set maxlength of all the textarea (call plugin)
             $().maxlength();
    })
</script> 
```

[https://github.com/viralpatel/jquery.maxlength](https://github.com/viralpatel/jquery.maxlength)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-16T09:21:46.453

```
<script type="text/javascript">
        $(document).ready(function(){
        var maxChars = $("#sessionNumtext");
        var max_length = maxChars.attr('maxlength');
        if (max_length > 0) {
            maxChars.bind('keyup', function(e){
                length = new Number(maxChars.val().length);
                counter = max_length-length;
                $("#sessionNum_counter").text(counter);
            });
        }
    });
</script>

<textarea name="sessionNumtext" id="sessionNumtext" maxlength="20" type="text"></textarea>
kalan karakter sayısı: <span id="sessionNum_counters">20</span> 
```**

# javascript - jQuery-ui 插件内的函数调用有错误的上下文？

> ID：10468682
> 
> 赞同：1
> 
> 时间：2012-05-06T06:35:15.470
> 
> 标签：javascript, jquery, jquery-ui, scope, closures

我有一个 jQuery UI 函数，在我的 _create 函数中，`var self = this`所以我可以从插件中的其他函数访问插件上下文。

我在 _create 函数中也有这段代码：

```
//setup sortable handler
if (self.options.sortable !== false) {

     var soptions = {
         items:'.tagit-choice',
         containment:'parent',
         start:function (event, ui) {
             console.log('sorting started', event, ui);
             self._sortable.tag = $(ui.item);
             self._sortable.origIndex = self._sortable.tag.index();
         },
         update:function (event, ui) {
             console.log('sorting started', event, ui);
             self._sortable.newIndex = self._sortable.tag.index();
             self._moveTag(self._sortable.origIndex, self._sortable.newIndex);
             console.log('moved tag', self._sortable.origIndex, 'to', self._sortable.newIndex);

         }
     };

     if (self.options.sortable == 'handle') {
         $('.tagit-choice', this.element).prepend('<a class="ui-icon ui-icon-grip-dotted-vertical" style="float:left"></a>');
         soptions.handle = 'a.ui-icon';
         soptions.cursor = 'move';
     }

     self.element.sortable(soptions);
 } 
```

在插件内部设置可排序。

它调用了`self._moveTag`我正在调用的内部位置`console.log(self)`，我希望`self`它是插件实例，但它是`DOMWindow`. 为什么是这样？

```
_moveTag: function (old_index, new_index) {
    console.log(self);
    self.tagsArray.splice(new_index, 0, self.tagsArray.splice(old_index, 1)[0]);
    for (var ind in self.tagsArray)
        self.tagsArray[ind].index = ind;

    if(self.options.select){
        $('option:eq(' + old_index + ')', this.select).insertBefore($('option:eq(' + new_index + ')', this.select));
    }
}, 
```

* * *

希望这个例子更清楚：

```
(function($) {

    $.widget("ui.widgetName", {

        options: {
            sortable: true
        },

        _sortable: {},

        _create: function() {

            var self = this;

            if (self.options.sortable !== false) {
                self.element.sortable({
                    items: '.tagit-choice',
                    containment: 'parent',
                    start: function(event, ui) {
                        self._sortable.tag = $(ui.item);
                        self._sortable.origIndex = self._sortable.tag.index();
                    },
                    update: function(event, ui) {
                        self._sortable.newIndex = self._sortable.tag.index();
                        self._moveTag(self._sortable.origIndex, self._sortable.newIndex);
                    }
                });
            }
        },

        _moveTag: function(old_index, new_index) {
            console.log(self); // <-- this returns DOMWindow?!?!?
        }
    });
})(jQuery);​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T07:13:18.293

为什么你会期望`self`被定义在里面`_moveTag`？显然有人正在泄漏，`self`而`window.self`您正在捡起`self`里面的坏处，`_moveTag`而这`self`恰好是`window`；给出这样的东西：

```
(function($) {
    $.widget('ui.pancakes', {
        _create: function() {
            var self = this;
            self._moveTag();
        },
        _moveTag: function() {
            // ...
        }
    });
})(jQuery); 
```

内部是您希望成为的小部件`self`，但不在范围内，正在从其他地方获取泄漏的内容。因此，您可以使用inside和其中定义的任何函数，并且得到期望的结果；但是以通常的方式（而不是 inside的范围）定义为小部件方法，因此它会拾取坏的外部，即.`_create``self``self``_moveTag``_moveTag``window.self``self``_create``_create``_moveTag``_create``self``self``window`

我认为你的私人`_moveTags`方法是`self`滥用。您应该使用`this`内部小部件方法并确保调用者使用正确的上下文；`_moveTag`jQuery-UI 将为您调用具有正确上下文的公共方法，并且您应该能够非常轻松地自己处理私有方法（例如）。

这是一个用于说明的快速演示：http: [//jsfiddle.net/ambiguous/UhE3F/](http://jsfiddle.net/ambiguous/UhE3F/)

* * *

一个小小的调查揭示了一个令人震惊的事实：`window`应该有一个[`self`属性](https://developer.mozilla.org/en/DOM/window.self)：

> **窗口.self**
> 
> 返回对窗口对象的对象引用。

事实证明，`var self = this`约定是有史以来最糟糕的想法之一，或者至少使用这个名称`self`是一个糟糕的想法。这是一个令人困惑的错误的可爱来源。

# java - 服务在 android 中泄露了 IntentReceiver

> ID：10468685
> 
> 赞同：10
> 
> 时间：2012-05-06T06:35:53.867
> 
> 标签：java, android

我正在制作一个安卓应用程序。我正在制作一个在用户检查 a 时一直在后台运行的服务，`checkbox`并且在用户使用它时它应该停止`unckeck`。因此，当我选中该框并且它还显示“服务启动”Toast 时它确实有效，但是当我`uncheck`然后`checkbox`它显示显示“服务已停止”的 Toast 但它不会停止播放服务启动时开始的声音。停止这种声音的唯一方法是关闭我的手机，然后再打开它。

这是我用于启动和停止服务的 java 代码

```
public int onStartCommand(Intent intent, int flags, int startId) {
    Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();

    this.registerReceiver(this.batteryInfoReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));

    return START_STICKY;
}
public void onDestroy() {
    super.onDestroy();
    Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();
} 
```

这是我的xml文件

```
<CheckBoxPreference
    android:title="Enable/Disable Alarm"
    android:defaultValue="true"
    android:key="cbAlarm"
    android:summary="Enable or disable alarm" /> 
```

这是我的日志猫

```
05-06 09:13:53.230: D/dalvikvm(5351): GC_EXTERNAL_ALLOC freed 39K, 50% free  2725K/5379K, external 0K/0K, paused 124ms
05-06 09:13:53.355: D/dalvikvm(5351): GC_EXTERNAL_ALLOC freed 21K, 49% free 2779K/5379K, external 504K/518K, paused 18ms
05-06 09:13:53.420: D/CLIPBOARD(5351): Hide Clipboard dialog at Starting input: finished by someone else... !
05-06 09:13:57.975: I/MediaPlayer(5351): uri is:content://media/internal/audio/media/44
05-06 09:13:57.975: I/MediaPlayer(5351): inside  getAudioFilePath: content://media/internal/audio/media/44
05-06 09:13:57.980: I/MediaPlayer(5351): The actual path is:/system/media/audio/ringtones/S_A_cricket_chirps.ogg
05-06 09:13:57.980: I/MediaPlayer(5351): path is: /system/media/audio/ringtones/S_A_cricket_chirps.ogg
05-06 09:13:57.980: I/MediaPlayer(5351): file path found for DRM file:path is: /system/media/audio/ringtones/S_A_cricket_chirps.ogg
05-06 09:13:57.980: E/MediaPlayer-JNI(5351): setDataSource: outside path in JNI is ?x@
05-06 09:14:20.525: E/ActivityThread(5351): Service com.zafar.test.BatteryService has leaked IntentReceiver com.zafar.test.BatteryService$1@40536548 that was originally registered here. Are you missing a call to unregisterReceiver()?
05-06 09:14:20.525: E/ActivityThread(5351): android.app.IntentReceiverLeaked: Service com.zafar.test.BatteryService has leaked IntentReceiver com.zafar.test.BatteryService$1@40536548 that was originally registered here. Are you missing a call to unregisterReceiver()?
05-06 09:14:20.525: E/ActivityThread(5351):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:756)
05-06 09:14:20.525: E/ActivityThread(5351):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:551)
05-06 09:14:20.525: E/ActivityThread(5351):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:866)
05-06 09:14:20.525: E/ActivityThread(5351):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:853)
05-06 09:14:20.525: E/ActivityThread(5351):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:847)
05-06 09:14:20.525: E/ActivityThread(5351):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:318)
05-06 09:14:20.525: E/ActivityThread(5351):     at com.zafar.test.BatteryService.onStartCommand(BatteryService.java:35)
05-06 09:14:20.525: E/ActivityThread(5351):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2043)
05-06 09:14:20.525: E/ActivityThread(5351):     at android.app.ActivityThread.access$2800(ActivityThread.java:117)
05-06 09:14:20.525: E/ActivityThread(5351):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:998)
05-06 09:14:20.525: E/ActivityThread(5351):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-06 09:14:20.525: E/ActivityThread(5351):     at android.os.Looper.loop(Looper.java:130)
05-06 09:14:20.525: E/ActivityThread(5351):     at android.app.ActivityThread.main(ActivityThread.java:3691)
05-06 09:14:20.525: E/ActivityThread(5351):     at java.lang.reflect.Method.invokeNative(Native Method)
05-06 09:14:20.525: E/ActivityThread(5351):     at java.lang.reflect.Method.invoke(Method.java:507)
05-06 09:14:20.525: E/ActivityThread(5351):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-06 09:14:20.525: E/ActivityThread(5351):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-06 09:14:20.525: E/ActivityThread(5351):     at dalvik.system.NativeStart.main(Native Method)
05-06 09:14:37.810: D/CLIPBOARD(5351): Hide Clipboard dialog at Starting input: finished by someone else... ! 
```

请帮忙。我在哪里犯错。

**编辑**

```
private BroadcastReceiver batteryInfoReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, 0);
        int plugged = intent.getIntExtra(BatteryManager.EXTRA_PLUGGED, 0);

        if(plugged == 2) {

                SharedPreferences getAlarms = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
                String alarms = getAlarms.getString("ringtone", "default ringtone");
                //getting uri from MediaStore via filepath i.e. content://media/internal/audio/media/29
                Uri uri = Uri.parse(alarms);

                mMediaPlayer = new MediaPlayer();
                try {
                    mMediaPlayer.setDataSource(context, uri);
                    final AudioManager audioManager = (AudioManager) context
                            .getSystemService(Context.AUDIO_SERVICE);
                    if (audioManager.getStreamVolume(AudioManager.STREAM_ALARM) != 0) {
                        mMediaPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
                        mMediaPlayer.prepare();
                        mMediaPlayer.start();
                    }
                } catch (IOException e) {
                    //System.out.println("OOPS");
                    e.getStackTrace();
                }
        } else if(plugged == 0) {
            mMediaPlayer.stop();
        }

    }
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T07:29:03.467

确保`unregisterReceiver`在完成之前致电`onDestroy`。Service 的上下文无效后`onDestroy`，所有注册的 Intent 接收器都将停止运行。Android 会通过“Leaked Intent receiver”异常警告您您的应用行为异常。

音乐不会停止，因为不再调用接收器。您应该确保在从 onDestroy 返回之前调用 mMediaPlayer.stop。我建议您将所有这些功能提取到单独的方法中，这样编写应用程序会容易得多。

```
private void startMusic(int level);
private void stopMusic(); 
```

此外，如果由于错误而连续收到两个插入的 == 2 个意图，请注意不要泄漏 mMusicPlayer。以防御的方式编写代码总是比依赖调用者的额外知识更好。

异常处理在您的代码中也非常危险。如果音乐启动失败，当您想停止音乐时，可能会出现空指针异常。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T00:27:27.917

也许你错过了@Override 注释

```
@Override
public void onDestroy() {
    unregisterReceiver(batteryInfoReceiver);
    super.onDestroy();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-06T05:07:27.590

可能有点晚了，但似乎你必须在调用 onDestroy() 方法之前调用 unregisterReceiver() 。这解决了我的问题。

# jquery - 动态将标题更改为文本框

> ID：10468687
> 
> 赞同：0
> 
> 时间：2012-05-06T06:36:20.427
> 
> 标签：jquery

```
<div id="form_title">
    <h1>Form Title</h1>
</div> 
```

这是我的 HTML 代码。我想让一个文本框出现，用户可以更改 h1 的值并保存它。

这是我的尝试。

```
$('#form_title').click(function() {
    $(this).html('<input id="form_title_value" name="form_title_value"
                         type="text" placeholder="Enter Form Title..."> ');
});​ 
```

问题是当我点击它时文本框失去焦点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:41:37.403

用这个：

```
$('#form_title').one('click', function() {
    $(this).html('<input id="form_title_value" name="form_title_value" 
                         type="text" placeholder="Enter Form Title...">')
               .find('input').focus();
})​; 
```

[**现场演示**](http://jsfiddle.net/fRBuE/)

问题是您每次点击都会覆盖 div 的 innerHTML。
所以它不仅仅是“松散的焦点”，而是每次点击都会松散innerHTML。

`one`允许您附加一个只会触发一次的回调。

* * *

你也可以试试[**这个 DEMO**](http://jsfiddle.net/ETvPS/3/)，它告诉你如何改变`<h1>`文本

# javascript - Jquery Mobile 我有两页，第一页用于 android，另一页用于 iphone。我如何检测浏览器并分配它们？

> ID：10468689
> 
> 赞同：0
> 
> 时间：2012-05-06T06:36:40.467
> 
> 标签：javascript, jquery, jquery-mobile, browser-detection, android-browser

我对 jQuery Mobile 有疑问。我正在为 Android 和 iPhone 构建一个浏览器页面。我在两个不同的 HTML 文件中创建了这两个页面。但我想要一个文件，我想为 android 页面分配 android 浏览器，为 iphone 页面分配 iphone 浏览器并相应地加载它们。

下面是代码

安卓

```
!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
     <title>Android</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <link rel="stylesheet" href="my.css" />
    <style>
        /* App custom styles */
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
    </script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js">
    </script>
</head>
<body>
    <div data-role="page" data-theme="a" id="page1">
        <div data-theme="b" data-role="header">
        </div>
        <div data-role="content">
            <div>
                <h1 class="text-align-center">
                    <b>
                        Apple
                    </b>
                </h1>
            </div>
            <div>

                </div>
            </div>
            <a data-role="button" data-transition="none" data-theme="b" href="http:m.apple.com">
                Go
            </a>
        </div>
    </div>
    <script>
        //App custom javascript
    </script>
</body> 
```

对于 iPhone，这里是

```
<!DOCTYPE html>
<html>
<head>
<title>Apple</title>
<!-- the three things that jQuery Mobile needs to work -->
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <link rel="stylesheet" href="iphone.css" />
    <style>
        /* App custom styles */
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
    </script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js">
    </script>
    <script type="text/javascript" src="mobiledetect.js"></script> 
```

```
<!-- This is the first page -->
<section id="firstpage" data-transition="flip" data-theme="b" data-role="dialog">
     <div data-role="content">
            <div>
                <h1 class="text-align-center">
                    <b>
                        Apple
                    </b>
                </h1>
            </div>

            <a data-role="button" data-transition="flip" data-theme="b" href="http://m.apple.com">
                Go
            </a>
        </div>

</section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:04:42.253

```
Make both pages in same document with different ids (androidPage and iosPage) then 
```

编写一个 javascript 函数并在加载页面之前调用它。在此函数中检查用户代理，如果用户代理与 android 匹配，则加载 android 页面，如果与 ios 匹配，则加载 ios 页面。android 的用户代理字符串（HTC 的愿望）是

**Mozilla/5.0 (Linux; U; Android 2.1-update1; de-de; HTC Desire 1.19.161.5 Build/ERE27) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17**

ios（Iphone）的用户代理是

**Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293 Safari/6531.22.7**

您可以通过这种方式获取用户代理

用户代理

# hadoop - 何时将输出文件的数据写入 map reduce 架构中？如何在 reducer 中使用已处理的 reducer 输出数据？

> ID：10468690
> 
> 赞同：0
> 
> 时间：2012-05-06T06:37:01.440
> 
> 标签：hadoop, mapreduce

我正在使用 hadoop 版本：1.0.0

在处理每个减速器输入键后，我正在收集输出。但它没有写入实际的输出文件。我正在尝试使用处理后的中间输出来处理进一步的输入键。我该怎么做？

您能否建议我如何使用该中间数据。mapreduce 何时将数据写入输出文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T07:59:38.517

你所问的是与 MR 范式相反的东西。并且，任何偏离这一概念的行为都会产生后果。
从技术上讲，数据被传递给 OutputFormat，他可以自行决定将其推送到输出。我认为它是在工作期间写的，但是您可能会有些延迟才能看到它。
我认为您可以更轻松地在 reducer 中随意累积处理过的数据并使用它，尽管此解决方案存在固有问题。如果有足够的键，您可能会面临内存不足。
我建议使用两个 MR 作业或其他一些技术来使 reducer 无状态或至少限制它可以积累的数据量。

# android - 如何只更新活动的一部分

> ID：10468694
> 
> 赞同：0
> 
> 时间：2012-05-06T06:38:28.357
> 
> 标签：android, android-fragments, android-activity

好吧，标题说明了一切，但是有一个小问题，我不能使用片段或加载器，因为我正在为 android 2.3 开发，那么，我怎样才能只更新 Activity 的一部分呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:46:47.107

即使在 2.3 中，您仍然可以使用 android-support-v4 jar 来使用片段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:34:22.690

您可以按 ID 引用视图。作为更改 EditText 的示例，您可以：

```
EditText text = (EditText) findViewById(R.id.input);
test.setText("New Text"); 
```

只需将强制转换更改为正确的类型，因此对于按钮：

```
Button btn = (Button) findViewById(R.id.button); 
```

因此，对于您的代码，如果您有一个带有 xml 元素的按钮，则`android:onclick="increment"`可以使用以下功能：

```
public void increment(View view) {
    TextView number = (TextView) findViewById(R.id.number);
    number.setText(Integer.toString(Integer.parseInt(number.getText()) + 1));
} 
```

# animation - JavaScript for 循环和类似动画的打印 (Canvas)

> ID：10468695
> 
> 赞同：1
> 
> 时间：2012-05-06T06:38:34.497
> 
> 标签：animation, loops, canvas, for-loop, png

我对我的代码有疑问。它真的很奇怪......我不知道为什么会发生这种情况，但让我解释一下。（我的英语不好，但我会尽力解释并给你们很好的了解发生了什么）

```
var spaceshipIncoming = document.createElement('audio');
var canvasMS12Main = document.getElementById('canvasMS12Main');
var imgMainMs12 = canvasMS12Main.getContext('2d');
var mainMs12 = new Image();
var number2 = 5;
var formatImage = ".png";
var stopeIncreaseMS12 = false;

function introMenu(){ //509,734,306,345
        imgMain.drawImage(mainImg, 6, 8, gameWidth, gameHeight, 0, 0, gameWidth, gameHeight);
        audioElement.setAttribute('src', 'soma.mp3');
        audioElement.play();          
}

function ms12AniAndSound(){
        setTimeout("introMS12()",5000);
        spaceshipIncoming.setAttribute('src', 'spaceshipIncoming.mp3');
        spaceshipIncoming.play();
}
function introMS12(){//78
    if(number2 < 78){
        number2 = number2 + 1;
    }else if (number2 == 78){
        stopeIncreaseMS12 = true;
    }
    var num = new Number(number2);
    mainMs12.src = 'ms12IntroAnimation/introMS12-' + num + formatImage;
    clearMainMS12();

    imgMainMs12.drawImage(mainMs12, 0, 0, gameWidth, gameHeight, 0, 0, gameWidth, gameHeight); 
    delayMS12();
}

function delayMS12(){
    if(stopeIncreaseMS12 == false){
    setTimeout("introMS12()",25);
    }else if(stopeIncreaseMS12 == true){
        clearMainMS12();
    }

}

function clearMainMS12(){
    imgMainMs12.clearRect(0, 0, 800, 500);
} 
```

我有一个包含动画图像的文件夹，每个 PNG 文件的名称如下：introMS12-#。每个 # 从 6 到 78 开始（所以基本上它看起来像 introMS12-6.png、introMS12-7.png、introMS12-8.png .....introMS12-78.png）

当我第一次加载网页时，它不显示动画，而只在画布上播放 mp3 声音。但是，如果我刷新它或按F5，它会播放动画......有时即使我刷新它也不会播放动画。但是，如果我关闭 Chrome 网络浏览器并重新启动它并尝试刷新按钮，它就会开始播放动画.....（它随机工作......）

我一直试图让这项工作超过 10 个小时......但我不知道我的代码有什么问题......请帮助我！谢谢。

# jquery - 如何在 yiiframework 中覆盖 jquery.yiigridview.js

> ID：10468696
> 
> 赞同：1
> 
> 时间：2012-05-06T06:38:38.310
> 
> 标签：jquery, jquery-plugins, yii, overriding

文件位置是：[yiiroot/framework/widjets/assets/gridview/jquery.yiigridview.js](https://github.com/yiisoft/yii/blob/master/framework/zii/widgets/assets/gridview/jquery.yiigridview.js) 我需要在这个文件中更改一行，以便我可以在我的要求中使用它。

```
//original code line 79,80
                if (settings.ajaxUpdate.length > 0) {
                    $(document).on('click.yiiGridView', settings.updateSelector, function () {

//I need to change it to :

                if (settings.ajaxUpdate.length > 0) {
                    $(this).parent().on('click.yiiGridView', settings.updateSelector, function () { 
```

在不需要更改源代码文件的情况下覆盖它的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T09:36:56.097

另一种方法是使用[jQuery 的`off`方法](http://api.jquery.com/off/ "http://api.jquery.com/off/")。

使用`off`你可以删除已经添加在*jquery.yiigridview.js*中的事件处理程序，然后使用添加一个新的处理程序`on`。

像这样的东西（在具有网格视图的视图中）：

```
<?php
Yii::app()->clientScript->registerScript('myownhandlers',
    "
        $(document).off('click.yiiGridView', $.fn.yiiGridView.settings['your-grid-id'].updateSelector); // this will remove the jquery.yiigridview.js handler

        // assign the new handler, instead of $(this) you have to use the id of the element you are interested in
        $('#the-id-you-are-interested-in').parent().on('click.yiiGridView', settings.updateSelector, function () {
        // your function's code, you'll have to write your function
        });
    ",
    CClientScript::POS_LOAD // this is important because the default is POS_READY, and the gridview is available only after load
);
?> 
```

继续阅读[该`on`方法](http://api.jquery.com/on/)以更好地理解代码。

**笔记：**

注意事件命名空间 ie`click.yiiGridView`是正确的，实际上在 yii 的版本中我没有命名空间，它只是`click`，所以在覆盖之前检查一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T18:11:39.997

将文件夹的全部内容复制`yiiroot/framework/zii/widgets/assets/gridview/`到客户端可以访问的位置，例如`your_web_app_dir/gridview`并进行所需的修改。然后`baseScriptUrl`在gridview中添加属性并将其设置为您修改过的文件夹的路径，如下所示

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'model-grid',
    'baseScriptUrl'=>Yii::app()->baseUrl.DIRECTORY_SEPARATOR.'gridview',
    'dataProvider'=>$datatProvider,
    'columns'=>array(
     ....
     ....
     ),
    )); ?> 
```

# php - 如何使用 WordPress 中的过滤器将类添加到 html 元素？

> ID：10468697
> 
> 赞同：1
> 
> 时间：2012-05-06T06:38:38.703
> 
> 标签：php, regex, wordpress

我正在更改我博客的当前主题，我希望在我的所有输入字段中添加一个类。

我不太熟悉正则表达式代码，所以每当我需要让这些事情发生时，我都会遇到很多麻烦。

## 类型="提交"

我要添加类`btn`需要添加到`<input type="submit">`

**旧代码**

```
<input type="submit" id="some_id" name="something" class="some_class" value="some_value" /> 
```

**新代码**

```
<input type="submit" id="some_id" name="something" class="btn some_class" value="some_value" /> 
```

* * *

## 和

同样，我希望将类`input`添加到`<input type="text">`和`<input type="textarea">`

**旧代码**

```
<input type="text" id="some_id" name="something" class="some_class" value="some_value" />
<textarea id="some_id" name="something" class="some_class" value="some_value" /> 
```

**新代码**

```
<input type="text" id="some_id" name="something" class="input some_class" value="some_value" />
<textarea id="some_id" name="something" class="input some_class" value="some_value" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T02:14:01.447

鉴于您的限制，您可以使用 PHP 做您想做的事情并留在 Wordpress 框架内的最简洁的方法是使用 DOMDocument。虽然依赖正则表达式是可能的，但它非常草率，您可能会遇到比开始时更多的问题。

把它放在你的functions.php文件中，它应该做你需要的一切：

```
add_filter('the_content', 'add_text_input_classes', 20);
function add_text_input_classes($content)
{
    $doc = new DOMDocument(); //Instantiate DOMDocument
    $doc->loadHTML($content); //Load the Post/Page Content as HTML
    $textareas = $doc->getElementsByTagName('textarea'); //Find all Textareas
    $inputs = $doc->getElementsByTagName('input'); //Find all Inputs
    foreach($textareas as $textarea)
    {
        append_attr_to_element($textarea, 'class', 'input');
    }
    foreach($inputs as $input)
    {
        $setClass = false;
        if($input->getAttribute('type') === 'submit') //Is the input of type submit?
            $setClass = 'btn';
        else if($input->getAttribute('type') === 'text') //Is the input of type text?
            $setClass = 'input';

        if($setClass)
            append_attr_to_element($input, 'class', $setClass);
    }
    return $doc->saveHTML(); //Return modified content as string
}
function append_attr_to_element(&$element, $attr, $value)
{
    if($element->hasAttribute($attr)) //If the element has the specified attribute
    {
        $attrs = explode(' ', $element->getAttribute($attr)); //Explode existing values
        if(!in_array($value, $attrs))
            $attrs[] = $value; //Append the new value
        $attrs = array_map('trim', array_filter($attrs)); //Clean existing values
        $element->setAttribute($attr, implode(' ', $attrs)); //Set cleaned attribute
    }
    else
        $element->setAttribute($attr, $value); //Set attribute
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T18:41:42.803

如果我正确理解您的问题，您希望将类动态应用于输入元素。您需要使用的是一个过滤器，或一系列过滤器。

首先让我解释一下过滤器的工作原理。过滤器与“钩子”一起使用，就像操作一样。有关详细信息，请参阅[操作和过滤器](http://codex.wordpress.org/Plugin_API#Hooks.2C_Actions_and_Filters)法典页面。

听起来您想使用挂钩来添加此类`btn`，而无需手动更改每个输入。这不是钩子的工作方式。要为此使用钩子，您将使用过滤器，这意味着您需要编写...

```
<input type="submit" class="<?php echo apply_filters('input_class', 'some-default-class'); ?>" /> 
```

然后，您可以将过滤器添加到“input_class”标签。

```
add_filter('input_class', 'btn_class_filter');

function btn_class_filter($default){
    return 'btn';
} 
```

无论您的函数返回什么，都将替换默认值 - 在这种情况下，“some-default-class”将替换为“btn”。

但是，这一切都消除了向要添加类的每个输入字段添加代码的需要。做到这一点的唯一方法是通过 javascript，最容易使用 jQuery。我知道你说过你不想使用 jQuery，但如果你不想编辑标记，那是你唯一的选择。

最简单的做法是手动添加`btn`类 - 如果它是访问问题，jQuery 将是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:53:11.637

如果你只是对这些元素应用一揽子样式规则而不关心 IE6 支持，为什么不在你的 CSS 中使用属性选择器，例如

```
.btn, input[type="submit"] {
    /* styles for buttons */
}

.input, input[type="text"], textarea {
    /* styles for text inputs and textareas */
} 
```

仅供参考，没有`<input type="textarea">`，只是[`<textarea>`](http://www.w3.org/wiki/HTML/Elements/textarea)

使用钩子操作标记既费时又笨拙。您需要获取所有模板输出以及插件生成的标记。我建议不要尝试这个，Wordpress 代码已经够乱了。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-10T04:55:57.467

我在上面回答了，我会简单地编辑那个，但它已经收到投票，这个答案会有很大的不同。

在我最初的回答中发表了一些评论后，我意识到@Aniket 想要更改的输入字段不在内容中，它们是整个网站的元素，例如小部件和模板本身。

无法通过挂钩、操作或过滤器来修改主题模板中编写的代码。过滤器可以修改字符串和值，但前提是已经有可用的挂钩。你没有这个，所以不可能。在不编辑输入字段的情况下动态添加此类的唯一选择是使用 javascript。然而，由于两个原因，这毫无意义。

1.  自己编辑输入字段会更简单
2.  您不需要添加这些类，因为 CSS 允许您以其他方式选择这些元素。

**您不需要向`'input'`输入字段添加类。**

CSS 允许您通过标签名称选择元素，例如，如果您想选择任何 div，则不需要`".div"`为每个 div 添加一个类。`"div"`您可以通过简单地使用不带任何类或 ID 表示法来选择所有 div 。

这同样适用于文本区域。您说您想为`input`textareas、文本字段和提交按钮添加一个类，但这不是必需的。[您可以使用CSS 属性选择器](http://www.w3schools.com/css/css_attribute_selectors.asp)选择所有这些。在这种情况下，将使用属性 submit 和 text 以及 textarea 元素指定输入字段，而不是要添加的两个类。

**不要添加 .btn 类来提交按钮，而是使用...**

```
input[type="submit"] {
   /* Your styles */
} 
```

**而不是向文本字段和文本区域添加 .input 类，而是使用...**

```
textarea, input[type="text"] {
   /* Your styles */
} 
```

**或者，如果您只想要所有输入字段，而不仅仅是文本区域和文本字段使用...**

```
input {
   /* Your styles */
} 
```

即使您通过 javascript 执行此操作，您最终也将不得不使用这种 CSS 选择来选择这些元素，并且您可能执行的任何正则表达式都将比这些简单的行复杂得多。

# html - IndexedDB 在 FireFox 和 IE 中不起作用

> ID：10468699
> 
> 赞同：1
> 
> 时间：2012-05-06T06:38:44.143
> 
> 标签：html, internet-explorer, firefox, indexeddb

我有最新版本的 Firefox 和 IE，但是[html5rocks.com](http://www.html5rocks.com/en/tutorials/indexeddb/todo/)中的示例在这两个浏览器中不起作用。我用 Chrome 测试过，效果很好。我注意到这些浏览器在尝试打开 indexedDB 时不会触发任何事件（“onsuccess”或“onerror”），如下所示。

```
var request = indexedDB.open("todos"); 
```

请分享此问题的任何想法/解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T14:28:21.313

要使 html5rocks 演示在 Firefox 上运行，您需要`onupgradeneeded`在数据库打开时附加事件，而不是`setversion`创建数据库的方法。这是适用于 Firefox 和 Chrome 的代码示例：

```
myStorage.indexedDB.open = function() {
  var v = 1;
  var request = indexedDB.open("todos", v);

  //Firefox code for db init
  request.onupgradeneeded = function (e) {
    myStorage.indexedDB.db = e.target.result;
    var db = myStorage.indexedDB.db;
    // We can only create Object stores in a setVersion transaction;

    if(db.objectStoreNames.contains("todo")) {
        var storeReq = db.deleteObjectStore("todo");
    }

    var store = db.createObjectStore("todo",
        {keyPath: "timeStamp"});

  }

  request.onsuccess = function(e) {
    myStorage.indexedDB.db = e.target.result;
    var db = myStorage.indexedDB.db;

    //Chrome code for db init
    if (v!= db.version && db.setVersion) {
      var setVrequest = db.setVersion(v);

      // onsuccess is the only place we can create Object Stores
      setVrequest.onerror = myStorage.indexedDB.onerror;
      setVrequest.onsuccess = function(e) {
        if(db.objectStoreNames.contains("todo")) {
          db.deleteObjectStore("todo");
        }

        var store = db.createObjectStore("todo",
          {keyPath: "timeStamp"});

        myStorage.indexedDB.getAllTodoItems();
      };
    }
    else 
        myStorage.indexedDB.getAllTodoItems();
  };

  request.onerror = myStorage.indexedDB.onerror;
} 
```

编辑：这是我在[github](https://github.com/denimf/IndexedDbToDo)上维护的 html5roks ToDo 演示的工作版本的链接，扩展了两个新功能，用于查看详细信息数据和更新值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T21:44:14.393

Chrome 落后于 IndexedDB 标准。

12 月推出了新的修订版，Firefox 和 IE 已升级。Chrome 还没有。

我相信运行 HTML5Rocks.com 的主要是 Chrome 团队中的人，所以这些示例会落后是有道理的。

2010 年 12 月前后 API 之间的重大变化是`setVersion`请求的变化和新的`onupgradeneeded`回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T13:45:49.560

IE 不支持 IndexedDB。访问 html5test.com 进行验证

2015 年编辑：IndexedDB API[在 IE](http://caniuse.com/#feat=indexeddb)中可用，版本 10

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T15:30:24.257

Todo 列表示例是在 chrome 上实现的过时 IndexedDB 规范。现在您必须使用 onupgardedneeded 方法，并且现在也要使用 setVersion。

# cordova - 从“视图”单击按钮时调用“控制器”方法

> ID：10468714
> 
> 赞同：1
> 
> 时间：2012-05-06T06:41:19.590
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我添加了一个按钮，如下面的代码所示，我添加了`id:'submitBtn'`因此当单击此按钮时，控制器类`MyController`将被调用并执行。

1.) 代码如何知道它应该去执行 Controller 类？

```
{
                   xtype:'button',
                   {
                   xtype:'button',
                   id:'submitBtn',
                   text:'Send',
                   ui:'confirm',
                   padding:5
                   text:'Send',
                   ui:'confirm',
                   padding:5
} 
```

为了检查一切是否正常，我检查了控制器类是否被调用；这是代码；

**MyController.js**

```
Ext.define('app.controller.MyController', {
           extend: 'Ext.app.Controller',

       config: {
       refs : {
       submitBtn: '#submitBtn'
       },

       controls : {
       submitBtn: {
       onTap: 'submitData'
       }
       },
       },

       submitData: function() {
       var form = Ext.getCmp('form-id');
       alert("Came here!");

       var formvalues = form.getValues();

       // Web Service code goes here ..
       Ext.Ajax.request({
                        params: formvalues,                     
                        url:'http://mywebservice.com/web_ser'

                        success : function() {
                        Ext.Msg.alert('Success');
                        }

       }
       }); 
```

但是，没有显示警报。我认为没有调用控制器类。

在**app.js**类中，我添加了控制器，如下所示；

```
views: ['Main','Home', 'Contact'],
    controller:['MyController'], 
```

帮助 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T08:09:17.487

在`MyController.js`,

改变

1.  `controls:` 到 `control:`和
2.  `onTap :`到`tap :`

&它现在应该可以工作了。

> 代码如何知道它应该去执行 Controller 类？

Check out the [documentation of controller](http://docs.sencha.com/touch/2-0/#!/guide/controllers) for neat & complete explanation

# android - 水平可滚动的 GridView

> ID：10468718
> 
> 赞同：0
> 
> 时间：2012-05-06T06:42:05.633
> 
> 标签：android, gridview, imagebutton, scrollable

[如图所示](http://i.stack.imgur.com/tC1ZX.png)，

[我想创建一个网格视图/具有可水平滚动的级别网格的视图。

级别存储在数据库中。因此，需要动态填充网格。网格一次可以包含 9 个级别的 ImageButton。要显示接下来的 9 个级别，视图应该是水平滚动的。

任何帮助将不胜感激]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T08:26:57.173

使用`ViewPager`和`Fragment`API。

# jquery - 查找具有特定属性和特定值的项目

> ID：10468719
> 
> 赞同：2
> 
> 时间：2012-05-06T06:42:07.200
> 
> 标签：jquery

我正在尝试查看具有某个属性值的列表项是否不存在。此代码将帮助我找到具有特定属性的项目，但是如何修改它以检查是否没有将该属性设置为特定值的列表项？例如，如果 someAttributeName = 存在的项目不存在，那么...

```
$(parentElement).find('*[someAttributeName]').each(function(index){
  doSomething(this);  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:48:14.400

```
$('*:not([someAttributeName="value"]) 
```

这将返回所有没有具有特定值的属性的元素。有关更多详细信息，请参阅[jQuery Not Equals 选择器](http://api.jquery.com/attribute-not-equal-selector/)。

# java - 在我的 Builder Pattern 中找不到匹配的构造函数错误

> ID：10468723
> 
> 赞同：1
> 
> 时间：2012-05-06T06:43:08.140
> 
> 标签：java, design-patterns, groovy

我正在尝试有效的 Java 书籍并享受它。我阅读了 Builder 模式并尝试使用它。我有这样的代码（在 Groovy 中）：

```
public class Anto {
    public static void main(String[] args) {

            def testing = new Java.Builder(1).author("antoaravinth").build()
            println testing.author
        }
}

class Java {
    int version
    def author
    int release_number

    public static class Builder {
        int version

        def author = ""
        int release_number = 0

        public Builder(int version) {
            this.version = version
        }

        public Builder version(int version)
        {
            version = version
            return this
        }

        public Builder author(def author)
        {
            author = author
            return this
        }

        public Builder release_number(int release_number)
        {
            release_number = release_number
            return this
        }

        public Java build() {
            return new Java(this);
        }

        private Java(Builder builder) 
        {
            version = builder.version
            author = builder.author
            release_number = builder.release_number
        }

    }
} 
```

但我得到这样的错误：

```
Caught: groovy.lang.GroovyRuntimeException: Could not find matching constructor for: Java(Java$Builder)
groovy.lang.GroovyRuntimeException: Could not find matching constructor for: Java(Java$Builder)
    at Java$Builder.build(Anto.groovy:43)
    at Java$Builder$build.call(Unknown Source)
    at Anto.main(Anto.groovy:4) 
```

我不知道为什么会这样！我哪里出错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T06:45:31.357

这是你的`build()`方法：

```
public Java build() {
    return new Java(this);
} 
```

看看你的`Java`类（不是`Builder`）——它没有任何显式声明的构造函数，所以它唯一的构造函数是为你自动声明的公共无参数构造函数。

你需要移动这个：

```
private Java(Builder builder) 
{
    version = builder.version
    author = builder.author
    release_number = builder.release_number
} 
```

课外`Builder`。（我有点惊讶 Groovy 之前没有抱怨，但我很确定这就是问题所在......）

编辑：现在它没有抛出异常，看看你的“setter”方法：

```
public Builder version(int version)
{
    version = version
    return this
} 
```

这`version = version`条线什么也没做。您需要区分参数和字段，例如

```
public Builder version(int version)
{
    this.version = version
    return this
} 
```

...或通过给参数一个不同的名称，例如

```
public Builder version(int value)
{
    version = value
    return this
} 
```

# javascript - 从数组动态构建表

> ID：10468724
> 
> 赞同：0
> 
> 时间：2012-05-06T06:43:12.217
> 
> 标签：javascript, jquery, jquery-selectors

我一直试图让这段代码工作几个小时，但似乎无法弄清楚我做错了什么或我可能搞砸了，我从一个有效的示例页面复制了这段代码并对其进行了修改制作我想要建造的桌子..

**原始剪辑代码：**

```
$(function () {
            var $wrap = $('<div>').attr('id', 'tableWrap');
            var $tbl = $('<table>').attr('id', 'basicTable');

            for (var i = 0; i < 200; i++) {
                $tbl.append($('<tr>').append($('<td>').text(i),$('<td>').text(200 - i)));
            }

            $wrap.append($tbl);
            $('body').append($wrap);
        }); 
```

现在我将其更改为六行，并从 javascript 数组中加载链接和数据，由于某种原因它不会构建表..

**我的代码：**

```
myArray = new Array();
    myArray[0] = new Array("001","Title","http://www.google.com/","https://www.google.com/images/logos/google_logo_41.png");
    myArray[1] = new Array("002","Title","http://www.google.com/","https://www.google.com/images/logos/google_logo_41.png");
    myArray[2] = new Array("003","Title","http://www.google.com/","https://www.google.com/images/logos/google_logo_41.png");
    myArray[3] = new Array("004","Title","http://www.google.com/","https://www.google.com/images/logos/google_logo_41.png");
    myArray[4] = new Array("005","Title","http://www.google.com/","https://www.google.com/images/logos/google_logo_41.png");
    myArray[5] = new Array("006","Title","http://www.google.com/","https://www.google.com/images/logos/google_logo_41.png");
    myArray[6] = new Array("007","Title","http://www.google.com/","https://www.google.com/images/logos/google_logo_41.png");
    myArray[7] = new Array("008","Title","http://www.google.com/","https://www.google.com/images/logos/google_logo_41.png");
    myArray[8] = new Array("009","Title","http://www.google.com/","https://www.google.com/images/logos/google_logo_41.png");
    myArray[9] = new Array("010","Title","http://www.google.com/","https://www.google.com/images/logos/google_logo_41.png");

    var $wrap = $('<div>').attr('id', 'tableWrap');              
    var $tbl = $('<table>').attr('id', 'basicTable'); 

    for(i=0;i<myArray.length;i++){
        $(function () {                                   
            $tbl.append($('<tr>').append(
                        $('<td>').text('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]'"></a>'),
                        $('<td>').text('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]'"></a>'),
                        $('<td>').text('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]'"></a>'),
                        $('<td>').text('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]'"></a>'),
                        $('<td>').text('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]'"></a>'),
                        $('<td>').text('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]'"></a>')));             
        }              
        $wrap.append($tbl);             
        $('#c').append($wrap);         
    }); 
```

在我的身体里有一个..

```
 <div id="c"></div> 
```

我正在尝试将其加载到...我想坚持使用 jquery，但几乎想只使用 javascript document.write 函数

**---- 2012 年 5 月 14 日更新 ----**
多亏了很多人的帮助，现在只能使用 JavaScript。让它按照我现在的需要工作和做，直到我从假期回来。我仍然想将它压缩/转换为 jquery，所以它看起来更干净并且已经将它用于其他事情。因此，对于任何遇到过这篇文章并且正在寻找这个方向的人来说，这里的[jsFiddle](http://jsfiddle.net/WRgjv/371/)我一起扔来帮助展示我是如何在每个人的帮助下设置它的......再次感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:02:01.797

```
$(function () {      
    var $wrap = $('<div/>').attr('id', 'tableWrap');              
    var $tbl = $('<table/>').attr('id', 'basicTable');

    for(i=0;i<myArray.length;i++){
            //  $(function () { is miss placed                     
            $tbl.append($('<tr/>').append(
                        $('<td/>').html('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]+'"></a>'),
                        $('<td/>').html('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]+'"></a>'),
                        $('<td/>').html('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]+'"></a>'),
                        $('<td/>').html('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]+'"></a>'),
                        $('<td/>').html('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]+'"></a>'),
                        $('<td/>').html('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]+'"></a>')));             
        }              
        $wrap.append($tbl);             
        $('#c').append($wrap);         
    }); 
```

**问题**

1.  错过的地方`$(function) {..`
2.  `alt="'+myArray[i][1]'"`应该`alt="'+myArray[i][1]+'"`

**[演示](http://jsfiddle.net/WRgjv/95/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T07:03:18.860

首先，您忘记在声明`table`后关闭元素`for`

第二，为什么是`$(function() {`之后`for`？是错的。如果要使用这个，你必须用`});`

```
var $wrap = $('<div>').attr('id', 'tableWrap');              
    var $tbl = $('<table>').attr('id', 'basicTable'); 

    for(i=0;i<myArray.length;i++){                                 
            $tbl.append($('<tr>').append(
                        $('<td>').text('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]'"></a>'),
                        $('<td>').text('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]'"></a>'),
                        $('<td>').text('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]'"></a>'),
                        $('<td>').text('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]'"></a>'),
                        $('<td>').text('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]'"></a>'),
                        $('<td>').text('<a href="'+myArray[i][2]+'" target="_new"><img src="'+myArray[i][3]+'" alt="'+myArray[i][1]'"></a>')));             
        }              
  $tbl.append("</table">); 
```

# mysql - 社交网络发布 mysql 的评论算法

> ID：10468732
> 
> 赞同：0
> 
> 时间：2012-05-06T06:45:05.660
> 
> 标签：mysql

```
$query = $this->db->query("SELECT a.fullname AS fullname_post , a.picture, a.user_id, c.post_id, c.date_posted, c.total_comments, c.content AS post, UNIX_TIMESTAMP() - c.date_posted AS p_time_spent, c.photo, d.comment_id, d.comment_date, d.content AS comments, UNIX_TIMESTAMP() - d.comment_date AS c_time_spent, d.post_id_fk, e.fullname AS fullname_comments 
     from $post_table c
     LEFT JOIN $comments_table d ON d.post_id_fk = c.post_id
     LEFT JOIN $user_table a on a.user_id=c.post_owner_fk
     LEFT JOIN $user_table e on e.user_id=d.comment_owner_id_fk
     LEFT JOIN $contact_table f on f.user_id_fk='$user_id' OR f.user_id_fk2='$user_id'
     WHERE c.post_owner_fk = '$user_id' OR c.post_owner_fk = f.friend_id_fk OR c.post_owner_fk = f.friend_id_fk2
     ORDER BY c.post_id DESC, d.comment_id ASC"
    ); 
```

如果我只想检索对特定帖子的所有评论，但我不知道如何限制要显示的评论数量，上面的 mysql 查询可以正常工作。

我尝试将选择放在左连接之一中并设置一些限制。

```
LEFT JOIN (SELECT * FROM $comments_table LIMIT 4) d ON d.post_id_fk = c.post_id 
```

但它只显示 4 条评论，即使数据库中有评论，其他帖子也没有显示评论。我认为它只检索评论表中的 4 条评论。

所以请任何想法如何解决这个问题谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T07:24:39.090

你可以在 MySQL 中尝试这样的事情吗？

```
SELECT a.fullname AS fullname_post , a.picture, a.user_id, c.post_id, c.date_posted,
   c.total_comments, c.content AS post, UNIX_TIMESTAMP() - c.date_posted AS p_time_spent,
   c.photo, d.comment_id, d.comment_date, d.content AS comments, 
   UNIX_TIMESTAMP() - d.comment_date AS c_time_spent, d.post_id_fk, 
   e.fullname AS fullname_comments  
     FROM $post_table c 
     LEFT JOIN $comments_table d ON d.post_id_fk = c.post_id 
      LEFT JOIN
           (SELECT tmpc.post_id_fk 
                 FROM $comments_table tmpc 
                 WHERE tmpc.post_id_fk = c.post_id 
                 ORDER BY tmpc.comment_date DESC
                 LIMIT 4) as climited
            ON climited.post_id_fk = c.post_id                 
     LEFT JOIN $user_table a on a.user_id=c.post_owner_fk 
     LEFT JOIN $user_table e on e.user_id=d.comment_owner_id_fk 
     LEFT JOIN $contact_table f on f.user_id_fk='$user_id' 
               OR f.user_id_fk2='$user_id' 
     WHERE c.post_owner_fk = '$user_id' 
           OR c.post_owner_fk = f.friend_id_fk 
           OR c.post_owner_fk = f.friend_id_fk2 
     ORDER BY c.post_id DESC, d.comment_id ASC 
```

**编辑：** 将 IN 子句替换为“有限”SELECT 查询的另一个连接

# extjs4 - ExtJs：初始化一个全局变量

> ID：10468734
> 
> 赞同：0
> 
> 时间：2012-05-06T06:45:12.167
> 
> 标签：extjs4

我有一个全局变量，需要在加载商店时初始化，并且需要在另一个商店中使用该值，如下所示

```
var cp = 0;

Ext.onReady(function() {
    Ext.define('Init', {
        singleton: true,
        cp: 0
    });

    Ext.define('loggedUserList', {
        extend: 'Ext.data.Model',
        fields: [
            'id',
            'name'
        ]
    });

    loggedUser = Ext.create('Ext.data.Store', {
        model: 'loggedUserList',
        autoLoad: true,
        proxy: {
        type: 'ajax',
        url: url+'/lochweb/loch/users/getLoggedUser',
        reader: {
            type: 'json',
            root: 'provider'
        },
        listeners: {
            load: function(loggedUser) {
                Init.cp = loggedUser.getAt(0).data.id;
            }
        }
    }); 
}); 
```

我在另一个 url 中使用 cp 的值，如下所示：`url: url + '/lochweb/loch/vocabulary/getVocabularyByProvider?providerId=' + Init.cp,`

```
Ext.define('vocbList', {
    extend: 'Ext.data.Model',
    fields: [
        {
            name: 'id',
            mapping: 'id'
        },
        {
            name: 'code',
            mapping: 'code'
        }
    ]
});

var vocabulary = Ext.create('Ext.data.Store', {             
    model: 'vocbList',
    autoLoad: true,
    proxy: {
        type: 'ajax',                   
        url: url+'/lochweb/loch/vocabulary/getVocabularyByProvider?providerId='+Init.cp,                    
        reader: {
            type: 'json',
            root: 'Vocabulary'
        }
    }
}); 
```

但它的值仍然是 0。我尝试使用（cp，Init.cp）。如何分配其值形式存储以便可以重用？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T12:28:19.990

存储异步加载数据，因此您无法确定 Init.cp 是否会在加载其他存储之前使用新值进行初始化。试试这个：

```
var cp=0;

Ext.onReady(function(){
Ext.define('Init', {
    singleton: true,
    cp: 0
});

Ext.define('vocbList', {
            extend: 'Ext.data.Model',
            fields: [
                { name: 'id', mapping: 'id' },
                { name: 'code', mapping: 'code' }

            ]
        });

    var vocabulary = Ext.create('Ext.data.Store', {             
        model: 'vocbList',
        proxy: {
            type: 'ajax',                                   
            reader:  {
                type: 'json',
                root: 'Vocabulary'
            }
        }

Ext.define('loggedUserList', {
                extend: 'Ext.data.Model',
                fields: ['id','name']
            });

            loggedUser = Ext.create('Ext.data.Store', {
                model: 'loggedUserList',
                autoLoad: true,
                proxy: {
                    type: 'ajax',
                    url : url+'/lochweb/loch/users/getLoggedUser',
                    reader: {
                     type: 'json',
                        root: 'provider'
                    }                   
                },
                listeners: {
                    load:function(loggedUser){
                        Init.cp = loggedUser.getAt(0).data.id;
                        vocabulary.getProxy().url = url+'/lochweb/loch/vocabulary/getVocabularyByProvider?providerId='+Init.cp;
                        vocabulary.load();
                    }
                }

            }); 
}); 
```

如您所见，您必须在刚加载第一个商店时动态设置词汇表代理的 url，然后再加载该商店。

恰兹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:55:42.793

在这里，您`loggedUser = Ext.create('Ext.data.Store', { model: 'loggedUserList', autoLoad: true,...}`使用 Init.cp 声明在 load() 中分配了一些数据。但是您无法确认 Init.cp 在您声明变量时确实具有值`vocabulary`（即，可能还没有完全加载loggedUser）。所以它在 url 中仍然是 0。

要确认，您应该将代码移动`vocbList`到`vocabulary`函数中：

```
function vocabularyLoad() {
   Ext.define('vocbList', {...});
   var vocabulary = ...
} 
```

并以这种方式使用该功能`loggedUser`：

```
loggedUser = Ext.create('Ext.data.Store', {
    ...
    listeners: {
         load:function(loggedUser){
              Init.cp = loggedUser.getAt(0).data.id;
              vocabularyLoad();
         }
    }
 }); 
```

但实际上，这种重构使赋值变得`Init.cp`多余，因为您可以直接将值传递给`loggedUser.getAt(0).data.id`定义的函数。

# javascript - 取消绑定点击到 div

> ID：10468741
> 
> 赞同：2
> 
> 时间：2012-05-06T06:46:04.920
> 
> 标签：javascript, html, bind, jquery

取消绑定单击到 div。我有两个 div。我想将点击事件解除绑定到内部 div

加载页面时，我想将点击事件解除绑定到`triangle`. 我的 JQuery 代码：

```
 $(".wrapper").unbind();
 $(".triangles").unbind();

 $(".triangles" ).click(function(){   //it is still clickable

  alert("hello u clicked me");
 });

<div class="wrapper">
     <div class="triangles">
     </div>
     <div class="triangles">
     </div>
     <div class="triangles">
     </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:49:55.083

确保在注册 click 事件之后调用 unbind 函数，而不是之前。如果解除绑定后注册了点击事件，那么点击事件不会被移除。

```
$(".triangles" ).click(function(){   //it is still clickable

    alert("hello u clicked me");
});

// this will remove the click event and all other handlers 
$(".wrapper").unbind();
$(".triangles").unbind(); 
```

另外，我想指出您的代码中的语法错误。您的 click 事件处理程序缺少`);`关闭它所需的处理程序。

如果您要经常删除并重新应用单击事件，则可能需要将其包装在另一个函数中：

```
function bindClick() {
    $(".triangles" ).click(function(){   //it is still clickable

        alert("hello u clicked me");
    });
} 
```

现在您可以`bindClick()`在需要重新应用点击事件时调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T06:53:48.767

用于`.off()`在需要时取消绑定事件。

例子：

```
$(".triangles").off("click"); 
```

另一个例子：这里它第一次可以点击，第二次不能点击

```
$(".triangles" ).click(function(){
    alert("hello u clicked me");
    $(this).off('click'); //after this, $(".triangles") will not longer be clickable
}); 
```

试试看 ：）

* * *

让我解释一下，你在代码中做错了什么

```
 $(".wrapper").unbind(); //unbinded all the events
 $(".triangles").unbind();  //unbinded all the events

 $(".triangles" ).click(function(){  //binded another click event
     alert("hello u clicked me"); //So of course it will be clickable
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T06:54:42.217

您可以使用：

```
$('.triangles').on("click", function() {
    alert('something');
});

$('.triangles').off("click"); 
```

# asp.net-mvc-3 - ASP.NET MVC3 下拉 JQuery 更改事件

> ID：10468745
> 
> 赞同：0
> 
> 时间：2012-05-06T06:47:16.737
> 
> 标签：asp.net-mvc-3

我在 y cshtml 中有两个下拉列表，一个是制造，另一个是系列 我已经动态绑定制造下拉并使用以下代码绑定系列它不会在我的 cs.Html 中绑定

```
 <script type="text/javascript" src="../../Scripts/jquery-1.6.4.js"></script>
 <script src="../../Scripts/jquery-1.6.4.min.js" type="text/javascript"></script>
 <script type="text/javascript">
  $(document).ready(function () {
    $("#CompProducts").change(function () {

        var selection = $("#CompProducts").val();
        var dataToSend = {
            paymentType: selection

        };
        alert(dataToSend);
        alert(dataToSend);
        $.ajax({
            type: 'POST',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            url: "MobileHome/GetCompSeries", 
            data: dataToSend,
            success: function (data) {
                alert(data);
            }
        });
    });
}); 
```

下拉菜单定义为

```
 <li>Competitor:
                @Html.DropDownList("CompProducts", (IEnumerable<SelectListItem>)ViewData["Manufacturer"], "-- Select --", new
           {
               onchange = "javascript:ChangeLocalSite(this.value);"
           })
            </li>
            <li id="Li1" runat="server">Series:
                <select id="iLevel" name="iLevel">
                    <option value="-1">-- Select --</option>
                </select>
            </li> 
```

请帮我在更改制造商下拉列表时如何绑定系列下拉列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:33:43.043

```
data: JSON.stringify(dataToSend) 
```

should work

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T07:41:06.203

你需要添加 jquery.unobtrusive-ajax.min.js

# spring - Controller中的Spring注解不起作用？@Secure 和 @Async 都不起作用

> ID：10468762
> 
> 赞同：0
> 
> 时间：2012-05-06T06:51:41.747
> 
> 标签：spring, spring-security, spring-roo

我使用 spring-roo 来生成我的项目。我不知道这两件事是否相关，但在 Controller 中，@Async 或 @Secure 注释都不起作用。对于@Secure：我`<global-method-security secured-annotations="enabled"/>`在 applicationContext-security.xml 中添加了标签并修改了 pom.xml 以满足依赖关系，

```
<dependency>
   <groupId>org.springframework.security</groupId>
   <artifactId>spring-security-aspects</artifactId>
   <version>3.0.5.RELEASE</version>
</dependency> 
```

在控制器中的方法上方，我添加了`@Secured("ROLE_ADMIN")`但无论任何角色每个人都可以访问该方法。我错过了什么配置以使@Secure 处于活动状态？

对于@Async：在 applicationContext.xml 中，我添加了

```
<task:annotation-driven executor="asyncExecutor"/>
<task:executor id="asyncExecutor" pool-size="${executor.poolSize}"/> 
```

在控制器.java 中：

```
@Async
private void justWait20seconds() {
    try {
        Thread.sleep(20000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
} 
```

我希望这个方法不会阻塞 main 方法，但它没有。这2个标签都在我的UserController.java中，不知道有没有关联。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:07:13.327

听起来您不了解 Spring 上下文是如何在 Spring MVC 应用程序中组织的，并且正在将注释处理指令添加到错误的上下文中。阅读 Spring MVC 中的 Spring 上下文。您可以在以下位置找到我的另一个 SO 答案，该答案分支到其他相关答案：[为什么 DispatcherServlet 创建另一个应用程序上下文？](https://stackoverflow.com/questions/7833767/why-dispatcherservlet-creates-another-application-context/7836031#7836031)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:10:06.123

我遇到了同样的问题，安全注释在 Roo 项目的 jspx 中起作用，但在控制器中不起作用。我的解决方法是将以下内容添加到 webmvc-config.xml：

```
<security:global-method-security secured-annotations="enabled" /> 
```

（将此添加到 applicationContext-security.xml 对我不起作用）

然后我在 pom.xml 中添加了对 cglib 的依赖：

```
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>2.2</version>
</dependency> 
```

# php - Ajax 不能与 Internet Explorer 一起正常工作

> ID：10468765
> 
> 赞同：2
> 
> 时间：2012-05-06T06:52:47.457
> 
> 标签：php, javascript, ajax

我目前正在与需要对不同产品进行评级的电子商务购物网站合作。我正在使用星级评分脚本。

一切正常，但产品只能根据访问者的 IP 评分一次，一旦访问者点击一颗星（在五颗星中），所有的星都应该被禁用，这样同一 IP 的同一产品的重复评分就可以被阻止（我也在使用服务端验证），并且根据数据库中的新值的平均评分应该由相同的星号表示（刚刚被禁用）。

它在 Firefox 上运行完全没有问题。当访问者单击星号时，一个新值被传递到数据库（使用 Ajax），并根据新值计算并显示平均评分，但 Internet Explorer 无法使用 Ajax 从数据库中检索新值。

我只是用非常简单的代码来演示这个问题，如下所示。

以下是 Temp.php 文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script type="text/javascript" language="javascript">
    var xmlhttp;        
    function ajax()
    {
        if(window.XMLHttpRequest)
        {
            xmlhttp=new XMLHttpRequest();
        }
        else
        {
            xmlhttp = new ActivexObject("Microsoft.XMLHTTP");
        }
    }

    function loadStars(prod_id)
    {
        ajax();

        xmlhttp.onreadystatechange=function()
        {           
            if(xmlhttp.readyState==4 && xmlhttp.status==200)
            {                               
                document.getElementById("ajax_response").innerHTML=xmlhttp.responseText;
                var rating= document.getElementById("rating_value").value;              
                alert(rating);   //Rating value of hidden field from the ajax response is alered.               
            }
        }

        var queryString="Temp1.php?prod_id="+prod_id;
        xmlhttp.open("GET", queryString, true);
        xmlhttp.send();             
    }
</script>
</head>

<body onload="loadStars(11);">
    <span id="ajax_response"></span>
</body>
</html> 
```

以下是 Temp1.php

* * *

```
<?php
    include_once("../Connection.php");  
    $con=new Connection();
    $con->get_connection(); 

    if(isset($_GET['prod_id']))
    {           
        $result=mysql_query("select rating_num from rating where prod_id=".$_GET['prod_id']."");
        $rating=mysql_result($result, 'rating_num');        
        echo "<input type='hidden' id='rating_value' name='rating_value' value='$rating'/>";                                                                    
    }
?> 
```

这两个文件中的代码都与此无关。`loadStars(prod_id)`在事件上调用js 函数`onload`（查看 body 标记），该事件实际上调用 Ajax 请求，从数据库`Temp1.php`中检索`rating_num`并简单地存储到一个名为的隐藏字段`rating_value`中，最后在`Temp.php`文件上使用`alert(rating);`

实际的问题是，当**数据库**`rating_num`中的值发生变化时，Firefox 显示了更新后的值，这是必不可少的，但 Internet Explorer (8) 仍然显示旧值，即使页面被一次又一次地刷新和重新加载。

 **应该是什么原因？这个问题有什么解决办法吗？希望你能明白我的意思。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T07:15:48.147

Internet Explorer 有时会通过缓存做一些有趣的事情。与其他浏览器相比，它倾向于采用更强烈的缓存方法。当我们通常访问同一个资源两次、三次或更多次时，缓存是一件很棒的事情。在静态内容的情况下，我们实际上希望浏览器足够智能，不会请求它已经检索到的数据，因为这样可以节省时间和带宽。

但是，AJAX 请求的不同之处在于它们通常是动态的。在某一时刻提出的相同请求当然可能在另一时刻产生完全不同的结果。因此，我们通常不想缓存 AJAX 请求。

然而，当涉及到 AJAX 请求时，IE 的密集缓存成为一个问题。浏览器将 AJAX 请求视为对静态、不变图像的请求，并从缓存中提取该请求的先前结果，就好像没有任何变化一样。

这当然不是您希望 Internet Explorer 做的事情。因此，您可以用来强制 IE 提取新数据的最快和最简单的技术是每次对 URL 进行轻微修改。

幸运的是，时间是不断前进的东西，就其本质而言，它保证是独一无二的。以下是避免此问题的方法：

```
var queryString="Temp1.php?prod_id="+prod_id + "&t=" + new Date().getTime(); 
```

通过将纪元时间附加到查询字符串的末尾，我们确保 URL 始终是唯一的，从而确保浏览器始终从服务器获取新鲜内容。

我在所有的 AJAX 请求上都使用了这种技术，并且发现它非常有价值。**

# php - 替换 DIV 中的内容

> ID：10468766
> 
> 赞同：-1
> 
> 时间：2012-05-06T06:53:01.207
> 
> 标签：php, html, regex, markup

我有一个`div`叫

```
 <div id="form">Content</div> 
```

我想`div`用新内容替换`Preg_replace`. 应该使用什么正则表达式。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:03:06.107

这将适用于您的情况：

```
$html = '<div id="content">Content</div>';
$html = preg_replace('/(<\s*div[^>]*>)[^<]*(<\s*\/div\s*>)/', '$1New Content$2', $html); 
echo $html; // <div id="content">New Content</div> 
```

但是请注意，由于 HTML 不是常规语言，因此不可能处理所有情况。我提供的简单正则表达式将在以下示例中产生错误的输出：

```
<div class=">">Content</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T07:00:32.997

[你根本不应该使用正则表达式](https://stackoverflow.com/a/1732454/196838)。HTML 可以有多种形式，您需要将所有形式都考虑在内。如果 id/class 没有出现在您期望的位置怎么办？正则表达式必须非常复杂才能获得合理的结果。

相反，您应该使用 DOM 解析器——或者我最近偶然发现的一个非常酷的工具[phpQuery](http://code.google.com/p/phpquery/)。有了它，您几乎可以像使用[jQuery](http://jquery.com)一样在 PHP 中访问您的文档。

# java - 无法显示验证消息

> ID：10468767
> 
> 赞同：0
> 
> 时间：2012-05-06T06:53:27.110
> 
> 标签：java, struts2

我在我的操作 ExpenseManagerAction.java 中的重载方法中添加验证逻辑，如下所示：

```
public void validate(){
    if (!StringUtil.matchDateString(expense.getTempDate())) {
        addFieldError("expense.tempDate","Date format is invalid");
    }
} 
```

我的jsp内容如下：

```
<s:form action="expenseManagerAction" method="post" theme="simple">
    <table width="80%" align="center" border="1" >
        <tr>
            <td width="50%">Expense ID</td>
            <td align="left">
                <s:textfield name="expense.expenseId" />
            </td>
        </tr>
        <tr>
            <td>PaymentItem</td>
            <td align="left">
                <s:textfield name="expense.paymentItem" />            
            </td>
        </tr>
        <tr>
            <td>Comments</td>
            <td align="left">
                <s:textarea name="expense.comments" rows="10" cols="30" />
            </td>
        </tr>
        <tr>
            <td>PaymentDate</td>
            <td align="left">
                <s:textfield name="expense.tempDate" cssClass="Wdate" /><!-- onClick="WdatePicker()" -->
            </td>
        </tr>
        <tr>
            <td>Price</td>
            <td align="left">
                <s:textfield name="expense.price" />
            </td>
        </tr>
        <tr>
            <td>Quantity</td>
            <td align="left">
                <s:textfield name="expense.quantity" />
            </td>
        </tr>
        <tr>
            <td colspan="2" width="100%">
                <p>Expert Search(Double click to magnify it)</p>
                <s:textarea onmouseover="showTooltip();" tooltip="Double click to magnify it" rows="1" cols="100" id="advanced" name="expertCondition" ondblclick="openExpertSearchWindow();"></s:textarea>
            </td>
        </tr>
        <tr>
            <td colspan="2" align="center">
                <s:submit type="button" action="expenseManagerAction_smartSearch" value="smartSearch"  />

                <s:submit type="button" action="expenseManagerAction_reset" value = "Reset" />
                <s:submit type="button" id="btnExpSearch" action="expenseManagerAction_search" value = "Expert Search" />
            </td>
        </tr>
    </table>
</s:form> 
```

当我在付款日期文本框中输入无效字符“a”并单击智能搜索按钮时，我可以看到语句 addFieldError("expense.tempDate", "Date format is invalid"); 调试的时候执行了，但是表单上不能显示错误信息，不知道怎么解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T12:54:53.400

*   您的`<s:form>`标签指定`"simple"`主题。
*   [表单元素标签继承表单标签的主题](http://struts.apache.org/2.x/docs/selecting-themes.html)。
*   [`"simple"`主题不会呈现字段](http://struts.apache.org/2.x/docs/simple-theme.html)错误[。](http://struts.apache.org/2.x/docs/simple-theme.html)

选项包括：

*   在每个字段的基础上覆盖主题
*   不使用表单的简单主题
*   创建自定义主题
*   手动渲染字段错误

# javascript - AJAX 中的 JavaScript 请求更多 AJAX

> ID：10468770
> 
> 赞同：1
> 
> 时间：2012-05-06T06:54:28.837
> 
> 标签：javascript, jquery, ajax, pagination

*我用jQuery*构建了一个基本的页面导航系统。*您单击下一步按钮，它通过AJAX*检索下一页；单击上一个，它转到它之前的一个，等等*。AJAX*请求是通过*jQuery* `$('#dom').html().load()`方法完成的。

在其中一个被拉出的页面内部是一个带有 onclick 的 href 链接，该链接指向一个自定义函数（`loadPage()`——与我用于父页面导航的相同函数）。您可以猜到，*AJAX*`onclick`页面中使用的事件不起作用——它试图调用一个不存在的函数。

 *有没有一种简单的方法来完成这项工作？也许其他一些*jQuery AJAX*方法，比如*GET*？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T07:18:28.083

听起来您正在将 JavaScript 嵌入到您的 html 中。不要那样做。将您的 JavaScript 放入一个外部文件并使用脚本标记将其包含在内，就像使用 jQuery 一样。*

# javascript - javascript中的多线程

> ID：10468772
> 
> 赞同：2
> 
> 时间：2012-05-06T06:54:31.667
> 
> 标签：javascript, ajax, multithreading, json

有什么方法可以在 Javascript 中实现多线程执行。我正在我的应用程序中实现分页，目标是用户的最短等待时间。我既不希望将所有数据一次性带到客户端，也不希望在单击的每个“下一个/上一个”按钮上创建服务器和数据库。所以我希望浏览器创建一个请求并更新我的数据列表，而前端用户还没有到达最后一页。

如果有人实现了这一点，请建议我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T07:00:04.323

您可以使用 setInterval of 和 setTimeOut 函数来获得多线程效果，但这不是真正的多线程，您可以[在此处阅读很好的讨论](https://stackoverflow.com/questions/4037738/does-this-behavior-of-setinterval-imply-multithreading-behavior-in-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T06:59:14.513

您可以使用计时器（setTimeout）来模拟 JS 中的异步性。定时事件在何时运行

*   计时器到了
*   当 JS 什么都不做的时候

因此，使用 setTimeout 在执行中创建“间隙”允许执行其他“等待中的代码”。它仍然是单线程，但它*就像*“剪线”

[这是一个示例](http://jsfiddle.net/LHhy2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T07:01:41.397

您可能会考虑查看无限滚动技术。有许多插件可以促进这一点，包括[Paul Irish 的 Infinite Scroll](https://github.com/paulirish/infinite-scroll)。

这与 Twitter 等网站使用的技术相同，因此页面会随着用户向下滚动而更新，从而为用户创建无缝的 UI 体验并消除延迟。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-19T16:38:17.487

使用 Concurrent.Thread JavaScript 库很容易做到这一点，它是免费和开源的。不需要 SetInterval 或 SetTimeout。

你可以从这里下载它：http: [//sourceforge.net/apps/mediawiki/jsthread/index.php ?title=Main_Page](http://sourceforge.net/apps/mediawiki/jsthread/index.php?title=Main_Page)

可以在这里找到解释库使用的教程：http: [//www.infoq.com/articles/js_multithread](http://www.infoq.com/articles/js_multithread)

# android - 更改 ListView 文本颜色

> ID：10468778
> 
> 赞同：0
> 
> 时间：2012-05-06T06:55:58.927
> 
> 标签：android, android-listview

我有`ListView`显示数据：

```
<ListView
android:id="@+android:id/list"
android:layout_width="fill_parent"
android:layout_height="wrap_content">
</ListView> 
```

是`headlines`一个数组：

```
List headlines;
ArrayAdapter adapter = new ArrayAdapter(this,android.R.layout.simple_list_item_1, headlines);
setListAdapter(adapter); 
```

如何更改文本颜色、样式和大小？`android:textColor`上没有`ListView`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T07:12:45.697

从您的 sdk 安装中找到该文件`simple_list_item_1.xml`，将其复制到项目的布局文件夹中，重命名并在其中进行任何您想要的颜色/文本更改。然后用您的新布局名称替换程序中的布局调用（不要忘记，因为您将使用自己的列表行布局，您需要`android.`从布局调用前面删除）。

它应该看起来像这样：

```
ArrayAdapter adapter = new ArrayAdapter(this, R.layout.your_row_layout, headlines); 
```

希望这可以帮助！

# algorithm - 计算从左上角到右下角向任意方向移动的次数

> ID：10468779
> 
> 赞同：3
> 
> 时间：2012-05-06T06:56:15.273
> 
> 标签：algorithm, dynamic-programming

我在面试中问了一个问题，这是我发现的类似问题，所以我想在这里问。问题是

> 在NXN网格的(1,1)处有一个机器人，机器人可以向左、右、上、下任意方向移动。我还得到了一个整数 k，它表示路径中的最大步数。我必须计算以 k 步或更短的步数从 (1,1) 移动到 (N,N) 的可能方式的数量。

我知道如何解决这个问题的简化版本，即只能向右和向下移动的问题。这可以通过动态规划来解决。我尝试在这里应用相同的技术，但我认为它不能使用二维矩阵来解决，我尝试了一种类似的方法，从左、上或右计算可能的方式数并向下求和，但问题是我不知道还应该添加的向下方向的方法数量。所以我进入一个循环。我能够使用递归来解决这个问题，我可以递归（N，N，k）调用向上，向左和k-1，总结它们，但我认为这也是不正确的，如果它可以是正确的具有指数复杂度。我发现了类似的问题，所以我想知道解决这类问题的完美方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T07:11:21.383

假设您有一个 NxN 矩阵，其中每个单元格为您提供了从 (1,1) 移动到 (i,j) 恰好 k 步的方式数（一些条目将为零）。您现在可以创建一个 NxN 矩阵，其中每个单元格都为您提供了从 (1,1) 移动到 (i,j) 的方式数，恰好是 k+1 步 - 从全零矩阵开始，然后添加在前一个矩阵的单元格 (i,j) 到单元格 (i+1, j), (i, j+1),... 等等。

每个 k 矩阵中的 (N,N) 条目为您提供了以恰好 k 步从 (1,1) 移动到 (i,j) 的方法数——您现在要做的就是将它们全部加在一起。

```
Here is an example for the 2x2 case, where steps outside the 
matrix are not allowed, and (1,1) is at the top left.
In 0 steps, you can only get to the (1,1) cell:

1 0
0 0

There is one path to 1,1\. From here you can go down or right,
so there are two different paths of length 1:

0 1
1 0

From the top right path you can go left or down, and from the
bottom left you can go right or up, so both cells have paths
that can be extended in two ways, and end up in the same two
cells. We add two copies of the following, one from each non-zero
cell

1 0
0 1

giving us these totals for paths of length two:

2 0
0 2

There are two choices from each of the non-empty cells again 
so we have much the same as before for paths of length three.

0 4
4 0

Two features of this are easy checks:

1) For each length of path, only two cells are non-zero, 
corresponding to the length of the path being odd or even.

2) The number of paths at each stage is a power of two, because
each path corresponds to a choice at each step as to whether to 
go horizontally or vertically. (This only holds for this simple 
2x2 case). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T07:10:31.613

**更新**：这个算法**不正确**。请参阅评论和 mcdowella 的回答。但是，修正后的算法对时间复杂度没有影响。

* * *

至少可以在 O(k * N^2) 时间内完成。伪代码：

```
# grid[i,j] contains the number of ways we can get to i,j in at most n steps,
# where n is initially 0
grid := N by N array of 0s
grid[1,1] := 1
for n from 1 to k:
  old := grid
  for each cell i,j in grid:
    # cells outside the grid considered 0 here
    grid[i,j] := old[i,j] + old[i-1,j] + old[i+1,j] + old[i,j-1] + old[i,j+1]
return grid[N,N] 
```

可能有一个更复杂的 O(log k * (N*log N)^2) 解决方案。通过外`for`循环的每次迭代只不过是具有固定内核的卷积。因此，我们可以将内核与自身进行卷积以获得更大的内核，将多个迭代融合为一个，并使用 FFT 来计算卷积。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-02T14:08:47.213

基本上 uniquepaths( row, column ) = 0 if row > N || column > N 1 if row ==N && column == N uniquepaths(row+1, column) + uniquePaths(row, column+1) 即解具有最优子结构和重叠子问题。因此，它可以使用动态规划来解决。下面是它的记忆（惰性/按需）版本（相关的基本上也返回路径：[Algorithm for find all paths in a NxN grid](https://stackoverflow.com/questions/9105699/algorithm-for-finding-all-paths-in-a-nxn-grid/25095973#25095973)）（您可以参考我的博客了解更多详细信息：[http://codingworkout.blogspot。 com/2014/08/robot-in-grid-unique-paths.html](http://codingworkout.blogspot.com/2014/08/robot-in-grid-unique-paths.html) )

```
private int GetUniquePaths_DP_Memoization_Lazy(int?[][] DP_Memoization_Lazy_Cache, int row, 
            int column)
        {
            int N = DP_Memoization_Lazy_Cache.Length - 1;
            if (row > N)
            {
                return 0;
            }
            if (column > N)
            {
                return 0;
            }
            if(DP_Memoization_Lazy_Cache[row][column] != null)
            {
                return DP_Memoization_Lazy_Cache[row][column].Value;
            }
            if((row == N) && (column == N))
            {
                DP_Memoization_Lazy_Cache[N][N] = 1;
                return 1;
            }
            int pathsWhenMovedDown = this.GetUniquePaths_DP_Memoization_Lazy(DP_Memoization_Lazy_Cache,
                row + 1, column);
            int pathsWhenMovedRight = this.GetUniquePaths_DP_Memoization_Lazy(DP_Memoization_Lazy_Cache,
                row, column + 1);
            DP_Memoization_Lazy_Cache[row][column] = pathsWhenMovedDown + pathsWhenMovedRight;
            return DP_Memoization_Lazy_Cache[row][column].Value;
        } 
```

**来电者在哪里**

```
int GetUniquePaths_DP_Memoization_Lazy(int N)
        {
            int?[][] DP_Memoization_Lazy_Cache = new int?[N + 1][];
            for(int i =0;i<=N;i++)
            {
                DP_Memoization_Lazy_Cache[i] = new int?[N + 1];
                for(int j=0;j<=N;j++)
                {
                    DP_Memoization_Lazy_Cache[i][j] = null;
                }
            }
            this.GetUniquePaths_DP_Memoization_Lazy(DP_Memoization_Lazy_Cache, row: 1, column: 1);
            return DP_Memoization_Lazy_Cache[1][1].Value;
        } 
```

**单元测试**

```
[TestCategory(Constants.DynamicProgramming)]
        public void RobotInGridTests()
        {
            int p = this.GetNumberOfUniquePaths(3);
            Assert.AreEqual(p, 6);
            int p1 = this.GetUniquePaths_DP_Memoization_Lazy(3);
            Assert.AreEqual(p, p1);
            var p2 = this.GetUniquePaths(3);
            Assert.AreEqual(p1, p2.Length);
            foreach (var path in p2)
            {
                Debug.WriteLine("===================================================================");
                foreach (Tuple<int, int> t in path)
                {
                    Debug.Write(string.Format("({0}, {1}), ", t.Item1, t.Item2));
                }
            }
            p = this.GetNumberOfUniquePaths(4);
            Assert.AreEqual(p, 20);
            p1 = this.GetUniquePaths_DP_Memoization_Lazy(4);
            Assert.AreEqual(p, p1);
            p2 = this.GetUniquePaths(4);
            Assert.AreEqual(p1, p2.Length);
            foreach (var path in p2)
            {
                Debug.WriteLine("===================================================================");
                foreach (Tuple<int, int> t in path)
                {
                    Debug.Write(string.Format("({0}, {1}), ", t.Item1, t.Item2));
                }
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-15T17:11:59.877

将有无限的方式。这是因为您可以形成无限循环的位置，从而形成无限的可能性。例如：- 您可以从 (0,0) 移动到 (0,1)，然后到 (1,1)，然后是 (1,0)，然后再回到 (0,0)。这形成了一个位置循环，因此任何人都可以在这些类型的循环中转来转去，并有无限的可能性。

# vb.net - 无法引用文本框，因为我还没有创建它

> ID：10468781
> 
> 赞同：0
> 
> 时间：2012-05-06T06:56:48.880
> 
> 标签：vb.net

我正在使用 VB 制作一个文件编辑系统，允许用户在多个选项卡上编辑多个文件，例如 Notpad++。

不过，我遇到了一个小障碍。由于选项卡不包含文本，因此我在创建时为每个选项卡添加了一个文本框。

对于加载文件，我想检查当前选项卡的文本框是否为空，因此我最终不会将加载的文件添加为新选项卡，这只会造成混乱（例如当 word 打开文件时，它会检查当前文档是加载前没有文本的未保存文件。）

问题是，如何使用尚未添加的选项卡进行检查？（即将在程序运行时添加，而不是在设计模式下）

如果有人知道答案，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:12:41.180

我不知道 VB.NET，但我在 C# 中编写了这段代码，它检查 a 是否`TabPage`包含`TextBox`空的 a。如果您知道那种语言，我认为将它翻译成 VB.NET 很容易。

这是检查 TabPage 是否包含空 TextBox 的函数。该函数接收 TabPage 作为其参数并返回`true`or `false`。

```
private bool ContainsEmptyTextBox(TabPage tp)
{
    bool foundTextBox = false;
    bool textBoxIsEmpty = false;
    foreach (Control c in tp.Controls)
    {
        if (c is TextBox)
        {
            foundTextBox = true;
            TextBox tb = c as TextBox;
            if (String.IsNullOrEmpty(tb.Text))
            {
                textBoxIsEmpty = true;
            }
            break;
        }
    }
    if (foundTextBox == true && textBoxIsEmpty == true)
        return true;
    else 
        return false;
} 
```

以下是如何使用该函数遍历 a 中的所有选项卡`TabControl`并查看哪个选项卡包含空文本框：

```
private void button1_Click(object sender, EventArgs e)
{
    foreach (TabPage tp in tabControl1.TabPages)
    {
        if (ContainsEmptyTextBox(tp))
        {
            // This tabpage contains an empty textbox
            MessageBox.Show(tabControl1.TabPages.IndexOf(tp) + " contains an empty textbox");
        }
    }
} 
```

编辑：我使用[这个站点](http://www.developerfusion.com/tools/convert/csharp-to-vb/)将 C# 代码自动转换为 VB.NET。

```
Private Function ContainsEmptyTextBox(tp As TabPage) As Boolean
    Dim foundTextBox As Boolean = False
    Dim textBoxIsEmpty As Boolean = False
    For Each c As Control In tp.Controls
        If TypeOf c Is TextBox Then
            foundTextBox = True
            Dim tb As TextBox = TryCast(c, TextBox)
            If [String].IsNullOrEmpty(tb.Text) Then
                textBoxIsEmpty = True
            End If
            Exit For
        End If
    Next
    If foundTextBox = True AndAlso textBoxIsEmpty = True Then
        Return True
    Else
        Return False
    End If
End Function

Private Sub button1_Click(sender As Object, e As EventArgs)
    For Each tp As TabPage In tabControl1.TabPages
        If ContainsEmptyTextBox(tp) Then
            ' This tabpage contains an empty textbox
            MessageBox.Show(tabControl1.TabPages.IndexOf(tp) & " contains an empty textbox")
        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T07:12:10.720

很久以前，我还不得不在 C# 中制作 Notepad++ 克隆，它需要支持在选项卡中编辑多个文件。我记得`List<string> OpenFiles`我的表单中有一个成员，其中包含打开文件的文件名。每次我打开一个新文件时，我都会这样做：

*   将新项目添加到`OpenFiles`
*   使用文本框创建一个新选项卡并将其添加到 TabControl

通过这种方式，`OpenFiles`列表与 TabControl 中的选项卡同步。例如，第 3 项`OpenFiles`是 TabControl 中第 4 个选项卡的文件名。

当然，当我打开一个新文件时，我需要检查该文件之前是否打开过。如果之前打开过，我切换到它的标签；如果没有，我会打开一个新标签。

有了`OpenFiles`会员，这很容易。打开文件的完整算法是这样的：

*   `OpenFiles`通过搜索列表检查文件是否已打开
*   如果文件已经打开（如果它存在于 中`OpenFiles`），并且它的位置`OpenFiles`是`idx`（例如），则激活第`idx`th 选项卡
*   如果文件不存在于`OpenFiles`
    *   将其添加到`OpenFiles`最后
    *   将带有文本框的新选项卡添加到 TabControl 的末尾

关闭文件时（例如关闭`idx`th 选项卡），我这样做了：

*   检查文件是否已保存，如果没有则提示用户是否要保存（是/否/取消消息框）。
    *   如果他选择是，则保存并继续
    *   如果他选择否，则不要保存并继续
    *   如果他选择取消，则中止操作（返回）
*   `idx`从 TabControl 中删除第一个选项卡
*   删除列表`idx`中的第一项`OpenFiles`

我认为您可以在您的应用程序中应用相同的逻辑。

# sharepoint - 尝试进入 reqacc.aspx 页面时访问被拒绝

> ID：10468782
> 
> 赞同：1
> 
> 时间：2012-05-06T06:57:00.127
> 
> 标签：sharepoint, sharepoint-2010

我正在尝试输入[http://portal/test/_layouts/reqacc.aspx?type=web](http://portal/test/_layouts/reqacc.aspx?type=web) 但我收到一条错误消息：“访问被拒绝。您无权执行此操作或访问此资源。” 我是该网站的网站集管理员。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:07:04.670

成为网站集管理员并不重要。您需要为站点启用访问请求。

要手动启用访问请求，请转到站点操作 > 站点设置 > 用户和权限 > 站点权限，然后单击管理访问请求。单击允许访问请求复选框并设置电子邮件地址。

要以编程方式启用访问请求，请设置[SPWeb.RequestAccessEmail](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spweb.requestaccessemail.aspx)属性。

# delphi - 如何在 Delphi 中制作一次定时功能（如 JavaScript 中的 setTimeout）？

> ID：10468787
> 
> 赞同：21
> 
> 时间：2012-05-06T06:58:17.460
> 
> 标签：delphi

这[`setTimeout`](http://www.w3schools.com/jsref/met_win_settimeout.asp)对 JavaScript 语言很有帮助。你将如何在 delphi 中创建这个函数？

```
SetTimeOut(procedure (Sender: TObject);
begin
  Self.Counter := Self.Counter + 1;
end, 200); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-06T10:35:47.990

我认为您可以保持[`TTimer`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ExtCtrls.TTimer)原样并尝试使用该[`SetTimer`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644906%28v=vs.85%29.aspx)函数并使用它的回调函数。您需要将计时器 ID 及其（匿名）方法存储在某个集合中。因为你没有提到你的 Delphi 版本，所以我使用了一个简单的类和[`TObjectList`](http://docwiki.embarcadero.com/Libraries/en/System.Contnrs.TObjectList)一个集合。

原理很简单，只要调用[`SetTimer`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644906%28v=vs.85%29.aspx)指定回调函数的函数，用匿名方法将新实例化的系统定时器ID存入集合即可。当执行该回调函数时，通过其 ID 在集合中找到导致该回调的计时器，将其杀死，执行匿名方法并将其从集合中删除。这是示例代码：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, StdCtrls, Contnrs;

type
  TOnTimerProc = reference to procedure;
  TOneShotTimer = class
    ID: UINT_PTR;
    Proc: TOnTimerProc;
  end;
  procedure SetTimeout(AProc: TOnTimerProc; ATimeout: Cardinal);

type
  TForm1 = class(TForm)
    Timer1: TTimer;
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;
  TimerList: TObjectList;

implementation

{$R *.dfm}

procedure TimerProc(hwnd: HWND; uMsg: UINT; idEvent: UINT_PTR;
  dwTime: DWORD); stdcall;
var
  I: Integer;
  Timer: TOneShotTimer;
begin
  for I := 0 to TimerList.Count - 1 do
  begin
    Timer := TOneShotTimer(TimerList[I]);
    if Timer.ID = idEvent then
    begin
      KillTimer(0, idEvent);
      Timer.Proc();
      TimerList.Delete(I);
      Break;
    end;
  end;
end;

procedure SetTimeout(AProc: TOnTimerProc; ATimeout: Cardinal);
var
  Timer: TOneShotTimer;
begin
  Timer := TOneShotTimer.Create;
  Timer.ID := SetTimer(0, 0, ATimeout, @TimerProc);
  Timer.Proc := AProc;
  TimerList.Add(Timer);
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  SetTimeout(procedure
    begin
      ShowMessage('OnTimer');
    end,
    1000
  );
end;

initialization
  TimerList := TObjectList.Create;
  TimerList.OwnsObjects := True;

finalization
  TimerList.Free;

end. 
```

***简化版（Delphi 2009 以上）：***

就像@David 的评论所建议的那样，这里是与上面相同的代码，只是在一个单独的单元中使用泛型字典。本单元中的用法`SetTimeout`与上面的代码相同：

```
unit OneShotTimer;

interface

uses
  Windows, Generics.Collections;

type
  TOnTimerProc = reference to procedure;
  procedure SetTimeout(AProc: TOnTimerProc; ATimeout: Cardinal);

var
  TimerList: TDictionary<UINT_PTR, TOnTimerProc>;

implementation

procedure TimerProc(hwnd: HWND; uMsg: UINT; idEvent: UINT_PTR;
  dwTime: DWORD); stdcall;
var
  Proc: TOnTimerProc;
begin
  if TimerList.TryGetValue(idEvent, Proc) then
  try
    KillTimer(0, idEvent);
    Proc();
  finally
    TimerList.Remove(idEvent);
  end;
end;

procedure SetTimeout(AProc: TOnTimerProc; ATimeout: Cardinal);
begin
  TimerList.Add(SetTimer(0, 0, ATimeout, @TimerProc), AProc);
end;

initialization
  TimerList := TDictionary<UINT_PTR, TOnTimerProc>.Create;
finalization
  TimerList.Free;

end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T08:52:13.530

就像是

```
type
TMyProc = Procedure of Object(Sender: TObject);

TMyClass = Object
    HandlerList = TStringList;
    TimerList = TStringlist;

  Procedure CallThisFunction(Sender :TObject); 

  function setTimeout(Timeout: Integer; ProcToCall : TMyProc)

end;

function setTimeout(Timeout: Integer; ProcToCall : TMyProc)
var
  Timer : TTimer;
begin

  Timer := TTimer.Create(nil);
  Timer.OnTimer := CallOnTimer;
  Timer.Interval := Timeout;
  Timer.Enabled := true;
  HandlerList.AddObject(ProcToCall);
  TimerList.AddObject(ProcToCall);

end;

function CallOnTimer(Sender : TObject)
var TimerIndex : Integer;
    HandlerToCall : TMyProc;
    Timer : TTimer;
begin

TimerIndex :=   TimerList.IndexOfObject(Sender);
HandlerToCall := (HandlerList.Objects[TimerIndex] as TMyProc) ;

HandlerToCall(Self);

HandlerList.Delete(TimerIndex);
Timer := (TimerList.Objects(TimerIndex) as TTimer);
Timer.Free;
TimerList.Delete(TimerIndex);

end; 
```

这刚刚被破解在一起，没有以任何方式进行测试，但显示了这个概念。基本上建立一个你想要调用的计时器和程序的列表。因为它是 self 对象在调用时传递给过程，但您可以构建第三个列表，其中包含要用作 setTimeout 调用中的参数的对象。

然后在调用方法后通过释放来清理对象。

与 javascripts setTimeout 不完全相同，而是一个 delphi 近似值。

附言。我还没有真正从 Delphi7 继续前进，所以如果在 Delphi XE 中有一种新的方法可以做到这一点，我不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:20:29.273

假设该函数每秒被调用一次而不是 5 次，可能是这样的：

```
 Parallel.Async( 
       procedure; begin
           Sleep(200);
           Self.Counter:=Self.Counter+1; end; ); 
```

还有更复杂的解决方案，例如您接受的解决方案，将命名对象用于计时器操作并使用 SetTimer 方法。像[http://code.google.com/p/omnithreadlibrary/source/browse/trunk/tests/17_MsgWait/test_17_MsgWait.pas](http://code.google.com/p/omnithreadlibrary/source/browse/trunk/tests/17_MsgWait/test_17_MsgWait.pas) 以前的版本有带有匿名功能的 SetTimer，但现在已经不存在了。

但是，对于您要求的简单匿名关闭方法，也许 Wait(xxxX) 适合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-19T18:54:51.900

我通常这样做

```
TThread.CreateAnonymousThread(procedure begin
  Sleep(1000); // timeout

  // put here what you want to do

end).Start; 
```

# wpf - 从不同的视图执行相同的命令 - MMVM

> ID：10468790
> 
> 赞同：1
> 
> 时间：2012-05-06T06:58:53.557
> 
> 标签：wpf, mvvm, command

我很少有视图以不同的方式（网格、文本框等）在应用程序的不同位置表示相同的数据。每个视图都绑定到不同的视图模型。

我在选定的行上有一个类似 Add-New、Update、Delete 等的命令。这些命令可以从主工具栏（不同的视图）、该视图上的按钮、右键菜单和其他一些地方在活动视图上执行。我不想为命令可能出现的每个场景重写命令。有没有其他方法可以在不重复命令代码且无需针对每种情况进行大规模切换的情况下执行它。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:20:55.513

您可以使用将命令保存在一个主要位置（例如窗口）的 CommandBindings，并从其范围内的每个视图或控件中调用它。或者创建一个“CommnadViewModel”，每个特定的 viewModel 都会在其构造函数上获取并绑定到它。使用 Unity 或其他容器更容易。

# php - 限制PHP中同时上传文件的数量以防止DOS？

> ID：10468794
> 
> 赞同：2
> 
> 时间：2012-05-06T06:59:17.747
> 
> 标签：php, file-upload, load, denial-of-service

我想知道当时同时上传的文件数量。例如，如果数量超过我的限制，我会向用户显示一条消息并道歉，以便稍后尝试。

有没有办法在 PHP 中获取当前正在运行的上传数量？

感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T07:52:50.740

为此，您最好使用一些网络服务器模块。对于 apache 有`mod_qos`. 它的功能之一是`Limit the maximum number of concurrent requests to a location/resource (URL) or virtual host`- 随你所需。它还可以做更多甚至限制带宽。关于模块的信息在[这里](http://opensource.adnovum.ch/mod_qos/)。

# java - 在标签中查询 href 中的 DOUBLE_WHITESPCE

> ID：10468795
> 
> 赞同：1
> 
> 时间：2012-05-06T06:59:19.330
> 
> 标签：java, jsp, href, netbeans-7, servlets

我有一个非常奇怪的问题。

```
 <table border ="1">
                        <tbody>
                            <c:forEach var="question" items="${questions}">                                
                                <tr>
                                    <td>
                                        ${question.getQuestion()}                                     
                                    </td>
                                    <td> 
                                        <c:forEach var="answer" items="${question.getAnswers()}">                                                      
                                            <input type="checkbox" name ="user_answer" value="${answer.getAnswer()}">
                                            ${answer.getAnswer()}
                                            <br />
                                        </c:forEach>                                   
                                    </td>
                                    <td>
                                    <a href="/TutorWebApp/controller?command=edit_qestion&amp;question=${question}">
                                           Edit 
                                    </a>
                                    </td>
                                </tr>
                            </c:forEach>                  
                        </tbody>
</table> 
```

但是如果我使用 in 我会得到下一个错误 ![错误图像](../Images/ba0cd0ca4942627cda5287130bffe41e.png)

但是如果我不使用标签`<a>`就`<td>`可以了。我没有任何想法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:17:00.427

我认为这只是您的编辑器的错误/限制。尝试部署您的 JSP 并查看它是否按预期工作。

也就是说，如果您的问题包含必须是 URL 和/或 HTML 转义的字符，则您的 HTML 代码将无效。您应该使用`c:url`标签来避免这种情况：

```
<c:url var="editQuestionUrl" value="/TutorWebApp/controller">
    <c:param name="command" value="edit_question"/>
    <c:param name="question" value="${question}"/>
</c:url>
<%-- now the params are url-encoded --%>
<a href="${fn:escapeXml(editQuestionUrl)}">Edit</a>
<%-- now the query string is HTML-escaped --%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T07:09:28.687

尝试替换此行

```
<a href="/TutorWebApp/controller?command=edit_qestion&amp;question=${question}"> 
```

和

```
<a href="/TutorWebApp/controller?command=edit_qestion&amp;question='${question}'"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T07:17:25.687

您需要通过调用[URLEncoder#encode() 在此处编码您的问题文本（或整个 URL）](http://download.oracle.com/javase/6/docs/api/java/net/URLEncoder.html#encode%28java.lang.String,%20java.lang.String%29)

您可以查看有关如何在 JSTL 中对 URL 进行编码的[问答。](https://stackoverflow.com/questions/5053975/how-to-url-encode-a-string-with-jstl)

或者，您可以尝试在问题文本上调用[JSTL 的 escapeXml函数。](http://www.google.com/url?sa=t&rct=j&q=jstl%20escapexml&source=web&cd=8&ved=0CGQQFjAH&url=http://www.javatips.net/blog/2012/01/fn-escapexml-jstl-function&ei=FCamT9u9JtCjrQfzy8H8CQ&usg=AFQjCNFdin5Jn2-SwcMfPnv2_NptWSHspQ&cad=rja)

# visual-studio-2008 - 无法解决以下 Visual 2008 错误

> ID：10468799
> 
> 赞同：0
> 
> 时间：2012-05-06T07:00:21.243
> 
> 标签：visual-studio-2008, ms-access-2007

```
System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> System.InvalidOperationException: The 'Microsoft.ACE.OLEDB.12.0' provider is not registered on the local machine.
  at System.Data.OleDb.OleDbServicesWrapper.GetDataSource(OleDbConnectionString constr, DataSourceWrapper& datasrcWrapper)
  at System.Data.OleDb.OleDbConnectionInternal..ctor(OleDbConnectionString constr, OleDbConnection connection)
  at System.Data.OleDb.OleDbConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject)
  at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup)
  at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
  at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
  at System.Data.OleDb.OleDbConnection.Open()
  at System.Data.Common.DbDataAdapter.QuietOpen(IDbConnection connection, ConnectionState& originalState)
  at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
  at System.Data.Common.DbDataAdapter.Fill(DataTable[] dataTables, Int32 startRecord, Int32 maxRecords, IDbCommand command, CommandBehavior behavior)
  at System.Data.Common.DbDataAdapter.Fill(DataTable dataTable)
  at DataSet1TableAdapters.CustomersTableAdapter.GetData()
  --- End of inner exception stack trace --- 
```

开发环境为 Visual Studio 2008 操作系统为 Windows 7（64 位） 数据库为 Access 2007。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:47:20.933

[https://www.microsoft.com/en-us/download/confirmation.aspx?id=23734](https://www.microsoft.com/en-us/download/confirmation.aspx?id=23734) “2007 Office System 驱动程序：数据连接组件”应该为您提供正确的驱动程序

# java - “新”表达式中的花括号？（例如“new MyClass() { ... }”）

> ID：10468806
> 
> 赞同：44
> 
> 时间：2012-05-06T07:01:14.323
> 
> 标签：java, android, class, syntax, curly-braces

花括号在那里做什么？

```
handler1 = new Handler() {

        public void handleMessage() {

       }
}; 
```

`object = new Class_Name() {};`? 这种语法也只存在于 Android 或 Java 上？它在 Java 中叫什么？感谢您的帮助。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-06T07:03:17.787

这是创建扩展的[匿名类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)`Handler`实例的语法。这是Java的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T07:25:25.247

当您创建接口的实例引用时会发生这种情况。例如，我想`Runnable`用类创建接口的实例，然后我可以通过为它创建一个匿名类并覆盖`run()`接口的方法来创建它。您可以通过查看您在下面说明的另一个示例来很好地理解。

```
Runnable runnable = new Runnable() {

    public void run() {
        // TODO Auto-generated method stub

    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-04T11:46:59.833

### 实例化并返回当前类的匿名子类的引用。

```
new Handler() {}; 
```

在大括号内，可以指定匿名子类的定义（编译后被编译器 命名为*Handler$1 ）。*

> 它与显式扩展*Handler*类一样，但它显然需要子类 & 的名称规范，因此它将不再保持匿名。

以下代码可能有助于理解**当前类的匿名子类的实例化和返回引用。**

```
class Main{
    int a = 5;
    void func(){}
    void meth(){
        Main ref2 = new Main() {
            void func(){
                System.out.println(a);
            }           
        };
        ref2.func();
    }    
    public static void main(String[] args) {
        Main mm = new Main();
        mm.meth();
    }
}
//5 
```

# java - 将字符串转换为整数成员，可能吗？

> ID：10468807
> 
> 赞同：1
> 
> 时间：2012-05-06T07:01:25.133
> 
> 标签：java, string, casting

好的，我的问题并不是一个严重的问题，我只是想找到一种访问/修改类成员变量的聪明方法。这是代码：

```
public class Storage{
 private int cookies= 0; 
 private int rolls= 0; 
 private int candies= 0; 
 private int lolipops= 0; 
 private int iceCreams= 0; 

 public void addCookies(int howMuch){  //this is the dirty way of creating method for
    this.cookies = cookies+howMuch;     //every member variable    
 }

 public void addValue(String stat, int howMuch){ //i would like to do it only
                                       //by passing the name
                                      //of variable and then cast it as integer
                                      //so that it would relate to my class members

    int value = this.(Integer.parseInt(stat));   //  <- YES i know its ridiculous
                                      //im just trying to explain what is my aim       
    value = value + howMuch;

    this.(Integer.parseInt(stat)) = value;
 }
} 
```

通常我想通过将其名称传递给方法来访问字段，读取该成员的值，添加一些值，然后存储它。是的，我知道它可以很容易地使用单独的方法来完成，甚至可以通过使用一些数组列表和成员名称与传递给方法的参数的比较来完成。但我想“快速”地做到这一点，而无需编写多余的代码。

现在我有 5 个成员，但是 15000 呢？我的目标是简化整个处理和代码编写。那么一般是否有可能做这种冗余代码编写绕过？因为我知道我总是将适当的名称传递给方法......除非经验法则是为每个变量创建方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T07:08:18.640

通常你会使用像地图这样的集合。

```
public class Storage{
    private final Map<String, Integer> inventory = ...

    public void addCount(String key, int count) {
        Integer i = inventory.get(key);
        if (i == null) i = 0;
        inventory.put(key, i + count);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T07:29:07.710

我想通过使用反射，您可以遍历对象的字段/方法并进行计算。

对于一个特定领域：

```
 Field member = myObject.getClass().getField(fieldName);
    // If you know the class: Field member = MyClass.class.getField(fieldName);
    System.out.println(member.getInt(myObject)); // Get the value
            member.setInt(myObject, 4); // Set the value 
```

如果你想为所有*公共*成员做点什么：

```
 for(Field member: myObject.getClass().getFields())
        // Or you can do: for(Field member: myClass.class.getFields())
    {
        member.getInt(myObject)); // Get the value
        member.setInt(myObject, 4); // Set the value
    } 
```

基本上，您所做的是找到代表对象成员的 Field 对象，然后您可以对其进行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T07:05:02.790

大多数 IDE 会为您生成 setter 和 getter。这将不费吹灰之力地做你想做的事。如果这还不够，请编写一个使用反射来设置值的方法。

如果您有一个有 15000 个成员的类，并且我假设您的意思是类私有的变量，那么您还有其他问题需要解决。

# c# - 将数据传递给 .net Web 服务并返回结果？

> ID：10468808
> 
> 赞同：4
> 
> 时间：2012-05-06T07:01:31.920
> 
> 标签：c#, android, .net, web-services

我需要一个关于如何将输入数据从 Android 传递到 .net Web 服务以及将结果检索到 Android 应用程序的有效示例/教程。

请分享任何您认为与我的需求相关的指南、示例、教程的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:35:11.687

您可以创建一个 Rest Webservice，这是一个[教程](http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide)，您可以使用 URI 传递输入数据，并且您应该计划您的 URI 应该如何，例如发布客户名称：

```
 [OperationContract]
        [WebInvoke(Method = "POST",
            ResponseFormat = WebMessageFormat.Json,
            BodyStyle = WebMessageBodyStyle.Wrapped,
            UriTemplate = "json/post-customer/{name}")]
        void postCustomer(string name); 
```

使用客户 ID 获取客户数据：

```
 [OperationContract]
        [WebInvoke(Method = "GET",
            ResponseFormat = WebMessageFormat.Json,
            BodyStyle = WebMessageBodyStyle.Wrapped,
            UriTemplate = "json/get-customer/{id}")]
        Customer getCustomer(string id); 
```

然后在托管您的网络服务之后，您需要使用 HTTP 客户端从您的 android 应用程序访问它，例如：

```
String uri = "uri to your service";
HttpClient httpclient = new DefaultHttpClient();  
HttpGet request = new HttpGet(uri);  
ResponseHandler<String> handler = new BasicResponseHandler();  
String result = null;
try {  
    result = httpclient.execute(request, handler);  
} catch (ClientProtocolException e) {  
    e.printStackTrace();  
} catch (IOException e) {  
    e.printStackTrace();  
}  
httpclient.getConnectionManager().shutdown(); 
```

之后，您应该在“结果”中有一个字符串，该字符串代表您的响应（json 或 xml）。

希望这些信息可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:42:22.117

这里给小样本试试这个帖子

公共无效帖子（字符串appid，字符串custlogid，字符串cityareaid，字符串mosqname，字符串mosqid，字符串lat，字符串lon）{

```
 HttpClient httpclient = new DefaultHttpClient();   
        HttpPost httppost = new HttpPost(globalconstant.URL_mosquepost); 
        UrlEncodedFormEntity form;
        // Add your data   
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(6);   
        nameValuePairs.add(new BasicNameValuePair("APPUDID", appid));
        nameValuePairs.add(new BasicNameValuePair("CUSTLOGID", custlogid));
        nameValuePairs.add(new BasicNameValuePair("CITYAREAID", cityareaid));
        nameValuePairs.add(new BasicNameValuePair("CITYMOSQUENAME", mosqname));
        nameValuePairs.add(new BasicNameValuePair("CITYMOSQUEID", "0"));
        nameValuePairs.add(new BasicNameValuePair("LATITUDE", lat));
        nameValuePairs.add(new BasicNameValuePair("longitude", lon));
        try {
            form = new UrlEncodedFormEntity(nameValuePairs,"UTF-8");
             httppost.setEntity(form);
            Log.d("myapp", "works till here. 2");
            try {
                HttpResponse response = httpclient.execute(httppost);
                Log.d("myapp", "response " + response.getStatusLine().getStatusCode()+"\n"+EntityUtils.toString(response.getEntity()));

            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }
    } 
```

# debugging - 如何在 x64 堆栈中找到本机异常？

> ID：10468809
> 
> 赞同：5
> 
> 时间：2012-05-06T07:01:38.637
> 
> 标签：debugging, exception, 64-bit, windbg

一段时间以来，我一直在使用 WinDbg 调试转储文件。
有一个很好的“技巧”适用于 x86 本机程序，您可以扫描堆栈中的`CONTEXT_ALL`标志（**0x1003f**）。

在 x64 中，`CONTEXT_ALL`标志显然不包含**0x1003f** ...

现在的问题是，有时当您将本机代码与托管代码混合使用时，发现异常的常规方法（如 .exc 或 .lastevent）。

x64中这个**0x1003f**的等价物是什么？有这样的常数吗？

**编辑：**

顺便说一句，如果您想知道，理论上它应该是**10003f**因为定义：

```
#define CONTEXT_I386    0x00010000
#define CONTEXT_AMD64   0x00100000

#define CONTEXT_CONTROL             0x00000001L // SS:SP, CS:IP, FLAGS, BP
#define CONTEXT_INTEGER             0x00000002L // AX, BX, CX, DX, SI, DI
#define CONTEXT_SEGMENTS            0x00000004L // DS, ES, FS, GS
#define CONTEXT_FLOATING_POINT      0x00000008L // 387 state
#define CONTEXT_DEBUG_REGISTERS     0x00000010L // DB 0-3,6,7
#define CONTEXT_EXTENDED_REGISTERS  0x00000020L // cpu specific extensions
#define CONTEXT_FULL (CONTEXT_CONTROL | CONTEXT_INTEGER | CONTEXT_SEGMENTS)
#define CONTEXT_ALL (CONTEXT_FULL | CONTEXT_FLOATING_POINT | CONTEXT_DEBUG_REGISTERS | CONTEXT_EXTENDED_REGISTERS)

#define CONTEXT_I386_FULL CONTEXT_I386 | CONTEXT_FULL
#define CONTEXT_I386_ALL  CONTEXT_I386 | CONTEXT_ALL
#define CONTEXT_AMD64_FULL CONTEXT_AMD64 | CONTEXT_FULL
#define CONTEXT_AMD64_ALL  CONTEXT_AMD64 | CONTEXT_ALL 
```

但这不是...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:43:35.380

我通常使用段寄存器值作为查找上下文记录的键（ES 和 DS 具有相同的值，并且在 CONTEXT 结构中彼此相邻）。旗帜技巧也很巧妙。

在测试应用程序中强制异常，然后从堆栈中挖掘上下文记录结构，在我的例子中看起来神奇的值是 0x10001f：

```
0:000> dt ntdll!_context 000df1d0
...
   +0x030 ContextFlags     : 0x10001f
...
   +0x03a SegDs            : 0x2b
   +0x03c SegEs            : 0x2b
... 
```

另请注意 ContextFlags 值不在结构的开头，因此如果您找到该值，则必须从中减去 @@c++(#FIELD_OFFSET(ntdll!_CONTEXT, ContextFlags)) 以获得上下文的基础结构体。

此外，以防万一它不明显，这个值来自恰好为 1 的样本大小。它在您的环境中可能不正确，并且它当然会发生变化（就像任何特定的实现一样，例如这样）。

# php - 将地址转换为邮政编码

> ID：10468811
> 
> 赞同：0
> 
> 时间：2012-05-06T07:01:45.383
> 
> 标签：php, location, postal-code

所以我正在从表单中检索一些位置数据，并将表单提交给 php 脚本。我希望人们可以输入地址、邮政编码或地名，并将其转换为邮政编码进行处理。

如何将地名转换为邮政编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:46:15.410

您可以查看[Geonames](http://www.geonames.org/export/web-services.html) Web Services。

按地名查找信息的示例查询可以是

[http://api.geonames.org/postalCodeSearch?placename=sydney&maxRows=10&username=demo](http://api.geonames.org/postalCodeSearch?placename=sydney&maxRows=10&username=demo)

# magento - 如何在magento网站上只显示一个国家？

> ID：10468812
> 
> 赞同：1
> 
> 时间：2012-05-06T07:01:46.763
> 
> 标签：magento

我想在我的网站的结帐流程的国家/地区下拉列表中仅过滤一个国家/地区。我怎样才能做到这一点。

有人可以建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T07:06:45.897

那是您的运输过程。

根据您使用的配送扩展程序，选择您允许用户配送的国家/地区。

```
System > Configuration > Shipping Methods > Ship to Specific Countries 
```

![在此处输入图像描述](../Images/fe960abd8c1df787d59315369f3f8143.png)

如果您只想允许某些国家/地区可用，您也可以以相同的方式进行设置，但现在使用：

```
System > Configuration > General > Countries Options 
```

![在此处输入图像描述](../Images/9b9384df182372d3c9260c9e657b0c4b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-09T08:12:58.347

很简单：转到“允许国家”下的“系统”>“配置”>“常规”>“国家选项”，选择您希望在结帐时出现在下拉列表中的国家

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-22T09:51:42.473

我遇到了同样的问题，但我只想在购物车和结帐页面上显示 3 个不同的国家。为此，我搜索了很多东西，最后我使用 jQuery 删除了。

```
jQuery("#shipping-zip-form #country option").each(function()
{
    if (jQuery(this).val()!='US' && jQuery(this).val()!='CA' && jQuery(this).val()!='PR' && jQuery(this).val()!='') {
        jQuery("#shipping-zip-form #country option[value='"+jQuery(this).val()+"']").remove();
    }
}); 
```

# recursion - 如何在进入无效错误之前中断递归调用

> ID：10468814
> 
> 赞同：3
> 
> 时间：2012-05-06T07:02:01.700
> 
> 标签：recursion, if-statement, scheme, racket

```
(define l '(* - + 4))

(define (operator? x)
    (or (equal? '+ x) (equal? '- x) (equal? '* x) (equal? '/ x)))

(define (tokes list)
  (if (null? list)(write "empty")
  (if (operator? (car list))

       ((write "operator")
        (tokes (cdr list)))

      (write "other")))) 
```

代码工作得很好，直到 (tokes (cdr list))) 到达文件末尾。有人可以告诉我如何防止这种情况。我是 Scheme 的新手，所以如果这个问题很荒谬，我会原谅我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T07:21:41.240

您必须确保在每种情况下都推进递归（基本情况除外，当列表为 时`null`）。在您的代码中，您没有对`(write "other")`案例进行递归调用。`cond`此外，当有几个条件要测试时，你应该使用，让我用一个例子来解释 - 而不是这个：

```
(if condition1
    exp1
    (if condition2
        exp2
        (if condition3
            exp3
            exp4))) 
```

写得更好，可读性更强，并且有额外的好处，您可以在每个条件之后编写多个表达式，*而无需*使用`begin`表单：

```
(cond (condition1 exp1) ; you can write additional expressions after exp1
      (condition2 exp2) ; you can write additional expressions after exp2
      (condition3 exp3) ; you can write additional expressions after exp3
      (else exp4))      ; you can write additional expressions after exp4 
```

...这将我引向下一点，请注意，您*只能为 的每个分支编写一个*表达式`if`，如果表单中的给定条件需要多个表达式，`if`则必须用 包围它们`begin`，例如：

```
(if condition
    ; if the condition is true
    (begin  ; if more than one expression is needed 
      exp1  ; surround them with a begin
      exp2) 
    ; if the condition is false
    (begin  ; if more than one expression is needed 
      exp3  ; surround them with a begin
      exp4)) 
```

回到你的问题 - 这是一般的想法，填写空白：

```
(define (tokes list)
  (cond ((null? list)
         (write "empty"))
        ((operator? (car list))
         (write "operator")
         <???>)   ; advance on the recursion
        (else
         (write "other")
         <???>))) ; advance on the recursion 
```

# cordova - 窗口电话7

> ID：10468818
> 
> 赞同：0
> 
> 时间：2012-05-06T07:03:52.083
> 
> 标签：cordova, windows-phone-7.1.1

我开始使用 PhoneGap 为 windows phone 7 开发应用程序，但我不知道如何开始，任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:07:52.503

检查基础知识怎么样，你需要检查[http://phonegap.com/start#wp](http://phonegap.com/start#wp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:50:59.523

下面是一些链接，供您在 Windows Phone 上开始使用 PhoneGap。

*   [Windows Phone 和 PhoneGap 系列 – 文章 #1 至 #10](http://www.ginktage.com/2012/02/windows-phone-and-phonegap-series-article-1-to-10/)
*   [“Hello World”Windows Phone 应用程序使用 PhoneGap 或 Cordova](http://debugmode.net/2012/05/08/hello-world-windows-phone-application-using-phonegap-or-cordova/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T06:11:47.973

在此处查看更多解释的一些资源。

*   [windows mobile 入门 - phonegap GitHub 文档](https://github.com/purplecabbage/incubator-cordova-docs/blob/22cdc5a1bf43cd4015221558804ba2a809aab40a/docs/en/2.1.0/guide/getting-started/windows-phone/index.md)
*   [这里有一个stackoverflow答案](https://stackoverflow.com/a/13043711/1441326)

# c# - 在文本 C# 后面的按钮上绘图

> ID：10468819
> 
> 赞同：1
> 
> 时间：2012-05-06T07:04:13.127
> 
> 标签：c#, .net, button, graphics

每当鼠标进入按钮时，我都想在按钮上绘图。我希望在按钮文本后面绘制矩形。我有以下代码可以绘制到它上面：

```
private void button1_MouseEnter(object sender, EventArgs e)
{
    Graphics g = this.button1.CreateGraphics();
    LinearGradientBrush myBrush = new
        LinearGradientBrush(
        this.button1.ClientRectangle,
        Color.Red, 
        Color.AliceBlue, 
        LinearGradientMode.Horizontal
    );
    g.FillRectangle(myBrush, this.button1.ClientRectangle);
} 
```

我想知道如何做到这一点，如果可以不制作自定义按钮。

如果有人有任何建议/解决方案，请在此处发布。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T07:42:39.887

我认为最简单的方法是创建一个自定义按钮，并覆盖它的`OnPaint`方法来进行绘图。然后您可以在源文件中替换`Button`为`CustomBtn`并使用新按钮。

```
class CustomBtn : Button
{
    private bool ShouldDraw = false;
    private LinearGradientBrush myBrush = null;

    protected override void OnMouseEnter(EventArgs e)
    {
        base.OnMouseEnter(e);
        ShouldDraw = true;
    }

    protected override void OnMouseLeave(EventArgs e)
    {
        base.OnMouseLeave(e);
        ShouldDraw = false;
    }

    protected override void OnPaint(PaintEventArgs pevent)
    {
        base.OnPaint(pevent);
        if (ShouldDraw)
        {
            if (myBrush == null || (myBrush != null && myBrush.Rectangle != ClientRectangle))
            {
                myBrush = new LinearGradientBrush( ClientRectangle, Color.Red, Color.AliceBlue, LinearGradientMode.Horizontal );
            }
            pevent.Graphics.FillRectangle(myBrush, ClientRectangle);
            TextFormatFlags flags = TextFormatFlags.HorizontalCenter | TextFormatFlags.VerticalCenter | TextFormatFlags.WordBreak;
            TextRenderer.DrawText(pevent.Graphics, Text, Font, ClientRectangle, ForeColor, flags);
        }
    }
} 
```

# sql - 获取项目之前和之后的项目 - SQL Query

> ID：10468820
> 
> 赞同：3
> 
> 时间：2012-05-06T07:04:16.100
> 
> 标签：sql

我是 SQL 新手，所以我需要你的帮助来查询。基本上我有一个邮政编码数据库，我想在选定的邮政编码之前获取 3 个项目，之后获取 3 个项目。我提出的查询非常糟糕......

```
WITH numberedlogtable AS
(
SELECT *
 FROM dbo.US
)

SELECT *
FROM numberedlogtable
WHERE ZipCode IN (SELECT ZipCode+i
             FROM numberedlogtable
             CROSS JOIN (SELECT -1 AS i UNION ALL SELECT 0 UNION ALL SELECT 1) n
             WHERE ZipCode='91803') 
```

我从某个地方拿起了一个示例查询，并成功地将其转换为我使用。唯一的问题是此查询返回当前项目和下一个项目。相反，它应该返回前 3 个项目、当前项目和下三个项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T07:22:57.573

使用`WITH`产生编号序列的公用表表达式（部分）：

```
WITH NumberedZipCodes AS
(SELECT SELECT ROW_NUMBER() OVER (ORDER BY ZipCode) AS RowNumber, *
FROM ZipCodes)

SELECT * From NumberedZipCodes
WHERE RowNumber BETWEEN
(SELECT RowNumber FROM NumberedZipCodes WHERE ZipCode=91803) - 3
AND (SELECT RowNumber FROM NumberedPerson WHERE ZipCode=91803) + 3 
```

通常在 SQL 中没有匹配中的上一个或下一个项目这样的概念。实际上，除非指定 order by 子句，否则行将按 sql 引擎认为合适的任何顺序返回。要进行这样的查询，必须应用订单并生成索引号。这是在 NumberedZipCodes 中完成的。第二部分只是从中获取数据的查询。

要使查询高效运行，请确保`ZipCode`列上有索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T07:51:20.410

“之前”和“之后”仅在排序的上下文中才有意义。假设您希望按邮政编码订购，选择所需的邮政编码和 2 行后，可以这样做：

```
SELECT TOP(3) *
FROM numberedlogtable
WHERE ZipCode >= '91803'
ORDER BY ZipCode 
```

之前选择 3 行：

```
SELECT TOP(3) *
FROM numberedlogtable
WHERE ZipCode < '91803'
ORDER BY ZipCode DESC 
```

如果您愿意，请将 UNION ALL 放在这两个查询之间以使其成为一个查询。

您可以在[SQL Fiddle](http://sqlfiddle.com/#!3/8923b/3)中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T07:09:23.790

> 所选邮政编码之前的 3 项和之后的 3 项

SQL 是基于设置的，它没有定义的顺序，除非您定义一个（使用 order by）。

现在，让我们不要进入更复杂的东西——首先你必须创建一个要求中心项目的订单，然后在第二个查询中你可以要求其他 6 个。抱歉，别无他法。x+3 可以使用 Top 4 语句和过滤器等 - 但之前的 3 肯定需要第二次查询。

所有人都假设您创建的查询/视图具有 * 邮政编码按定义的顺序 * 过滤后的行号，用于定义（a）“当前行”以及过滤所有具有较小行的行。

但是您需要先手动下订单。

# html - 如何分隔具有类的列表元素？

> ID：10468824
> 
> 赞同：0
> 
> 时间：2012-05-06T07:04:53.950
> 
> 标签：html, css

给定这样的元素列表：

```
<ul>
  <li class="favourite"></li>
  <li class="favourite"></li>
  <li class="favourite"></li>
  <li></li>
  <li></li>
  <li></li>
</ul> 
```

我想在有`.favourite`和没有的列表元素之间创建一个差距。

有没有办法用 CSS 做到这一点？

**编辑**
假设具有类的元素`.favourite`总是被强制到列表的顶部。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T07:07:35.583

您可以对 a `li`that's not应用边距`.favourite`，它紧跟在 a 之后`li.favourite`。您将需要`:not()`与相邻的兄弟选择器一起使用，如下所示：

```
li.favourite + li:not(.favourite) {
    margin-top: 1em;
} 
```

如果在您的实际标记中不知道是无类元素在前还是`li.favourite`元素在前，并且您想创建一个不考虑顺序的间隙，请像这样扩展选择器以涵盖这两种情况：

```
li.favourite + li:not(.favourite), li:not(.favourite) + li.favourite {
    margin-top: 1em;
} 
```

如果您的列表从左到右水平流动，请使用左边距而不是上边距。

# assembly - 澄清关于什么是装配的基本概念的问题

> ID：10468831
> 
> 赞同：3
> 
> 时间：2012-05-06T07:05:37.297
> 
> 标签：assembly, x86

我很难找到一个开始学习组装的好地方。我在整个互联网上发现了很多相互矛盾的信息，关于什么是汇编，使用哪些汇编器，什么是汇编器，以及英特尔是否为其特定的 CPU 系列发布了一种“核心”汇编语言（我有一个英特尔x86 CPU，这就是我想学习汇编的目的）。

有人可以解释一下上述的麻烦。据我所知，英特尔发布了带有指令集/参考的 CPU 系列（例如 x86），并且各种汇编程序（MASM、FASM、NASM 等）提供了更高级别的人类可读语言，用于制作机器代码指令。

另外，据我所知，当有人说“汇编语言”时，这实际上是指由许多不同的汇编程序提供的许多不同风格的汇编语言之一。 [http://en.wikipedia.org/wiki/X86_assembly_language#Examples](http://en.wikipedia.org/wiki/X86_assembly_language#Examples) MASM 样式程序集与 NASM 样式程序集

我正在寻找的是“第一个”汇编程序，没有 MASM、NASM 等提供的变体（例如大型宏库）。所有这些汇编程序一定来自某个地方，这就是我要寻找的。

基本上，我正在寻找第一个 x86 汇编器/汇编语言，在 MASM、NASM 等之前。有人可以为我提供第一个汇编器的链接吗？

顺便说一句，如果我关于组装的整个逻辑是错误的，有人可以澄清一下！

提前致谢，

程序

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T08:09:17.950

为了迂腐，你用来直接与 CPU 对话的真正语言是[机器码](http://en.wikipedia.org/wiki/Machine_code)。这意味着找出必须用于某些指令的实际*字节值。*这显然太乏味且容易出错，因此人们改用汇编程序。汇编程序将机器代码的文本表示形式转换为机器代码本身，并处理各种繁琐的细节，例如计算相对地址等。

对于特定的机器代码，可以有许多不同的汇编程序，每个汇编程序都有自己的关于如何编写程序集的想法。对于 x86 处理器来说尤其如此——从广义上讲，有两种风格：英特尔和 AT&T。然后在其中，不同的汇编器可以有不同的宏和指令集等等。

为了说明，这里是从一些 C 代码生成的程序集示例`gcc -S -masm=intel`：

```
 cmp     eax, ebx
    jl      .L63
    mov     eax, DWORD PTR inbuffd
    mov     DWORD PTR [esp+8], 8192
    mov     DWORD PTR [esp+4], OFFSET FLAT:inbuf
    mov     DWORD PTR [esp], eax
    call    read
    cmp     eax, -1
    mov     ebx, eax
    mov     DWORD PTR inbytes, eax
    je      .L64
    test    eax, eax
    je      .L36
    mov     eax, 1
    xor     edx, edx
    jmp     .L33 
```

这是使用生成的相同代码段`gcc -S -masm=att`：

```
 cmpl    %ebx, %eax
    jl      .L63
    movl    inbuffd, %eax
    movl    $8192, 8(%esp)
    movl    $inbuf, 4(%esp)
    movl    %eax, (%esp)
    call    read
    cmpl    $-1, %eax
    movl    %eax, %ebx
    movl    %eax, inbytes
    je      .L64
    testl   %eax, %eax
    je      .L36
    movl    $1, %eax
    xorl    %edx, %edx
    jmp     .L33 
```

这两个片段产生相同的*机器代码*——不同之处仅在于汇编语法。特别注意参数的顺序是如何不同的（英特尔是目标优先，AT&T 是源优先），指令名称的细微差别，`%`在 AT&T 中指定寄存器的使用等等。

然后是不同的 CPU。CPU具有一定的*架构*。这意味着它将执行该架构的指令集。对于该架构，将有一个核心指令集，可能还有用于增强功能或特殊应用的额外指令组。x86 就是一个很好的例子——你有浮点指令，MMx，3DNow！和 SSE 1 到 5。该架构的不同 CPU 可能会也可能不会理解额外的指令；通常有一些方法可以询问 CPU 它支持什么。

当您说“x86 程序集”时，人们理解您的意思是“将在 x86 架构的任何 CPU 上运行的程序集”。

更复杂的 CPU - 特别是那些具有内存管理功能的 CPU（包括 x86）不仅仅执行指令。从[80286](http://en.wikipedia.org/wiki/Intel_80286)开始，x86 架构有两种主要模式——实模式和保护模式。核心*指令集*可以在任何一种模式下按原样使用，但内存在每种模式下的工作方式完全不同，以至于尝试编写可以在任何一种模式下工作的真实世界代码是不切实际的。

后来的 CPU 引入了更多模式。386 引入了[虚拟 8086 模式](http://en.wikipedia.org/wiki/Virtual_8086_mode)又名 v86 模式，以允许保护模式操作系统运行实模式程序，而无需实际将 CPU 切换到实模式。[AMD64 处理器以长模式](http://en.wikipedia.org/wiki/Long_mode)运行 64 位代码。

一个 CPU 可以支持多种架构——[安腾架构](http://en.wikipedia.org/wiki/Itanium)被认为是一个独立的架构，英特尔发布的所有支持安腾的 CPU 也都支持 x86，并且可以在它们之间切换。

x86 系列可能是汇编语言的一个过于复杂的例子——它的[历史可以追溯到 33 多年前](http://en.wikipedia.org/wiki/X86)。（32 位）应用程序中使用的核心指令的机器代码与 1978 年发布的 8086 相同。经过多次修订，[每次都添加了更多指令](http://en.wikipedia.org/wiki/X86_instruction_listings)。

如果您想正确学习 x86 汇编，请考虑：

*   [汇编语言编程的艺术](http://homepage.mac.com/randyhyde/webster.cs.ucr.edu/www.artofasm.com/index.html)，并有一个适用于 DOS、Windows 和 Linux 的版本。Windows 和 Linux 版本使用作者发明的一种称为 High Level Assembly 或 HLA 的语言，它有点像 x86 汇编，但不是真的。这可能是也可能不是你的一杯茶 - 它不是严格意义上的真正组装，但概念都在那里，之后学习编写正确的组装不会有太大的努力。值得称赞的是，它还包含大量与组装相关的材料，例如有关处理器架构、BIOS、视频等的信息。DOS 版本教授直接 MASM（英特尔）组装。

*   [从头开始编程](http://savannah.nongnu.org/projects/pgubook/)在 Linux 中教授 AT&T 风格的汇编

对于实际的汇编程序（免费的），请在 Windows 或Linux上尝试[MASM32 （intel 风格）。](http://www.google.com/url?sa=t&rct=j&q=masm32&source=web&cd=1&ved=0CFcQFjAA&url=http://www.masm32.com/&ei=JUOmT53EI4WhiAfQs6CtAw&usg=AFQjCNFRKhzeIsMXkew2l6fd6rlWuMGctA&cad=rja)[`as`](http://en.wikipedia.org/wiki/GNU_Assembler)碰巧的是，Linux`as`将组装 Intel 或 AT&T 样式的程序集。

[如果您对 x86 架构感到](http://en.wikipedia.org/wiki/PIC_microcontroller) 畏惧，并且愿意为其他架构学习汇编，请考虑从[较小的](http://en.wikipedia.org/wiki/Atmel_AVR).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-27T17:13:40.513

除了迈克尔斯莱德的出色回答外，这里还有一些历史信息：

第一个 x86 汇编程序称为“ASM86”。它由英特尔生产，最初运行在他们的 8 位“ISIS”操作系统上。在 DOS 下运行的更高版本已由在线软件历史博物馆 WinWorld 保存。你可以在[这里](https://winworldpc.com/product/intel-asm86-macro-assembler/32)找到它。随附的手册存档包括 Intel 的 1985 年 ASM86 方言参考手册。它支持熟悉的指令，例如 ASSUME、SEGMENT、DB/DW、END 等，以及更高级别的宏。

我能在网上找到的最古老的 x86 汇编语言参考资料是英特尔 1979 年的 MCS-86 宏汇编语言手册。BitSavers[在此处](http://bitsavers.trailing-edge.com/pdf/intel/ISIS_II/9800640-02_MCS-86_Macro_Assembly_Language_Manual_Sep79.pdf)保存了一份 PDF 副本。

原始 ASM86 的设计者之一埃里克·艾萨克森 (Eric Isaacson) 继续编写 A86，一种精神继承者。A86 的方言与 ASM86 非常相似，但对 ASSUME 和 SEGMENT 指令等（Eric Isaacson 将它们称为“繁文缛节”）的繁琐内容放宽或消除了。在提供 OP 似乎正在寻找的裸机汇编语言的精神方面，A86 可能比 ASM86 更好。A86 只有 16 位；为了运行它，你需要一个 DOS 仿真器，或者一台运行旧版本 Windows 的机器（我有一台仍然运行 Windows XP 的旧 IBM Thinkpad x23；我一直在它的 DOS 机器上运行 A86，没有任何问题）。

[最后，在OS/2 博物馆](http://www.os2museum.com/wp/the-ibm-pc-bios-and-intel-isis-ii/)有一篇关于在 ISIS-2 平台上使用 ASM86 构建原始 IBM PC BIOS 的精彩博客文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T08:11:37.653

我认为没有核心汇编器这样**的东西。**他们每个人都有自己的方言。此外，您可能需要在选择之前考虑要为哪个操作系统编写代码。

这似乎是一篇很好的文章，可以帮助您选择从哪个开始：[http ://webster.cs.ucr.edu/AsmTools/WhichAsm.html](http://webster.cs.ucr.edu/AsmTools/WhichAsm.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T14:36:43.570

很难添加到 Michael Slades 的答案中，但我确实有一些评论。

每个处理器供应商或处理器机器代码的创建者都通过使用助记符（该处理器的一种汇编语言）来做到这一点。通常，在原始处理器文档中定义的程序集，无论是午餐时的餐巾纸还是非常正式和漂亮的文档，都是该处理器的“原始”汇编语言。汇编器（这里是松散的术语，因为它们可以有不同的理解，这里用作解析汇编语言并理想地从中生成机器代码的程序）被编写为读取该汇编语言，并带有正确生成代码所需的附加项以及一些指令等使程序员的工作更轻松（宏，等式（定义）等）。

理想情况下，如果您正在创建一个新的处理器，并且您希望首先获得汇编程序所需的任何认可，然后是其他语言（FORTRAN、BASIC、Pascal、C，一直到现在）（始终需要 C，但显然在今天你不需要帕斯卡或基本等）。如果处理器供应商想要销售芯片，它至少需要制造或签约或以某种方式鼓励组装商。关于 8088/8086，Intel 确实有自己的工具，但是它们当时价格昂贵，而且其他工具更受欢迎（microsoft masm、msvc、borland tasm、pascal、tcc、bcc）。如果我没记错的话，有一个很好的免费汇编程序叫做 a86。现在我们将 nasm 作为一个很好的 x86 自由汇编程序的示例。

英特尔 x86 比规则有点例外，在更接近原始语法的英特尔语法和 AT&T 语法之间存在宗教争论。gnu binutils 倾向于不通过更改来尊重处理器供应商（我个人认为使用不尊重这个词），x86 是最糟糕的，因为他们将 AT&T 作为默认设置，但也支持英特尔（部分，也许是全部）他们的工具（其他语言）。例如，汇编器很长一段时间都使用分号';' 标记行尾和后面的任何内容都是注释，因为 ARM 肯定 binutils 认为这是一个新行，一个新指令并使用 @ 作为注释标记。知道是个人组成了后端，有时这些人自己就是芯片供应商，我明白了，不是一个有组织的团体在做这些事情，

与注释符号一样，随着时间的推移，不同处理器的汇编器使用了相似或相同的指令，不是机器代码但例如 ORG 或 .ORG 的附加标记表示地址。由于您有时需要机器代码所在的物理地址来对指令进行编码，因此用户需要以某种方式指示该地址，并且在您编写一个 asm 程序时可能会在单个文件或一个文件中包含包含的单个文件，并且汇编程序的输出是完整的二进制文件而不是不完整的对象，您需要该地址。这就是为什么您在 gnu 汇编器（gas）中看不到 ORG 语句的原因，gnu 汇编器创建的对象使地址特定指令不完整。由于需要地址和需要链接以解析未知标签。

x86 绝对是我推荐你学习的最后一种汇编语言。这更像是一堂有趣的历史课。处理器已经发展了如此之多，并且在每一步都发生了变化，很早就变成了微编码（大多数处理器都不是微编码的，x86 由于其丑陋的汇编/机器语言几乎需要它来竞争）。

拥有 x86 并不是学习 x86 的好理由。您想学习一个指令集，其中您拥有可以窥探处理器的工具。当然，使用调试器您可以单步执行，但是拥有一个您可以操作以输出任何内容、以任何您希望的方式观看任何内容的模拟器，或者甚至更好的是一个您可以一次看到所有内容的逻辑模拟器，将会使您获得以下体验学习汇编语言的痛苦要少得多。更少的痛苦意味着你应该更多地享受它并坚持而不是放弃。尽管与任何语言一样都需要基本的编程技能，但汇编可以让您快速轻松地陷入困境。你也不想让你的电脑或类似的东西崩溃。（再次在这里，如果您觉得需要从 asm 进行系统调用，请使用 pcemu、dosbox、

# xcode - Xcode：在模拟器中显示原始大小的图像

> ID：10468833
> 
> 赞同：0
> 
> 时间：2012-05-06T07:05:59.590
> 
> 标签：xcode, interface-builder, xcode4.2, ios-simulator

我在 UIViews 和 UIViewController 的滚动视图中创建了一些图像。我去运行应用程序，图像按比例缩放，但已经放大到原始大小。

界面生成器

![在此处输入图像描述](../Images/b10cb5e13b89f924a534a04ac4a56732.png)

模拟器

![在此处输入图像描述](../Images/cb8b91d6926366aeab05cefcad3a9af1.png)

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:33:36.120

如果您单击 IB 中的图像，您会`mode`在`Utillities`窗格中的左侧菜单中看到一个下拉列表。我相信你应该选择“期望拟合”或“期望填充”，不确定你应该使用哪个。当您选择该模式时，图像不应重新缩放。

我认为这就是你要找的。

# mysql - 在流量高峰期间查询远程 Web API 与本地 MySQL 数据库？

> ID：10468843
> 
> 赞同：5
> 
> 时间：2012-05-06T07:08:04.643
> 
> 标签：mysql, web-services

我们正在我们的主页上实现一些代码，这些代码依赖于对每个唯一访问者的 geoip 查找，我们可以选择查询 geoip Web 服务 (Maxmind) 或下载数据库并在本地查询。该服务器目前是一个 512MB 的 Linode 实例，每天仅接收大约 1500 个唯一身份，但是我们担心在流量高峰期间会发生什么。

我很清楚，本地查找会更快，但在负载下访问数据库肯定会比处理额外的 http 请求更占用内存/CPU。显然，如果去本地是最好的路线，升级服务器内存很容易实现。我想每秒超过一定数量的连接，服务器更有可能变得不可用查询其本地数据库而不是 web api（当然假设Web api 服务器可以处理 http 请求）。

任何关于哪种解决方案将是最强大的长期解决方案来处理偶尔的流量泛滥而没有任何拒绝服务的输入将不胜感激。

编辑：只是为了进一步量化这一点，假设服务器每秒需要能够处理多达 200 个连接。每个连接都需要一个 DB 查询或 http 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-30T21:34:21.590

给定每秒 200 次点击，您肯定希望使用本地数据库。我怀疑任何提供此类服务的第三方网站都希望处理这么多请求，但即使他们这样做了，它也可能会比本地数据库访问慢得多。

您当然希望显着增加本地服务器上的内存。请记住，现在内存非常便宜。例如，大约 1 1/2 年前，我构建了一个具有 32 GB RAM 和最新 CPU 的 Linux 机器，价格不到 1000 美元。

每秒 200 次点击可能需要集群数据库和多台服务器。您可能还需要考虑为此使用键值存储，它每秒可以处理数千次点击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-06T08:37:08.507

找出答案的最佳方法是运行负载测试并亲自查看性能最佳的方法。但我的直觉是每秒 200 个查询并不过分，并且可以轻松地以您喜欢的任何方式处理。

我倾向于使用带有 gis 数据库的本地服务器，因为本地更便宜（每次查询没有成本）并且单个服务器更容易更新。此外，如果需要，您可以通过添加第二台服务器或配置第 3 方服务器来扩大规模。

我在这里找到了这个设置的一些实际测试数字：http: [//blog.jcole.us/2007/11/24/on-efficiently-geo-referencing-ips-with-maxmind-geoip-and-mysql-gis/](http://blog.jcole.us/2007/11/24/on-efficiently-geo-referencing-ips-with-maxmind-geoip-and-mysql-gis/) 这个是一种网络设置，其中四个客户端查询单个服务器。对于单个客户端，他报告每秒 2000 个查询和低于 1 毫秒的延迟。请注意，他使用 mysql 中内置的 gis 功能来达到这些数字。此外，这是 2007 年，所以现在的性能应该会更好。

使您的代码模块化和可配置。这当然取决于编程语言，但创建一个 LookupService 接口，以便您可以在需要时创建不同的实现，而无需更改其余代码。如果实现调用 Web 服务，则使端点易于配置。如果您的服务使用与[maxmind 相同的 URI 方案和响应 json](http://dev.maxmind.com/geoip/geoip2/web-services/)，您可以随意从自己的本地服务器切换到 maxmind 并再次切换回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-31T06:31:40.713

您的提供商通过查询向他们的网络服务收费。根据他们网站上公布的费率，以 200 q/s 的速度，您将支付... 每小时 72 美元。你可以用这种钱获得几十个怪物专用服务器！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-02T00:23:47.667

在我的工作中，我们使用 Maxmind 数据库的本地版本，它是一个 .dat 文件，我们不断地查询该文件（每天大约 50 万次或更多），没有任何问题。然后，我们将信息缓存到会话中，这样我们就不必一遍又一遍地为同一用户查询该信息。我们还有一个广告工具，它使用 Maxmind 数据库，然后搜索在该用户半径 10、25 或 50 英里范围内展示的广告。

我不建议将 API 用于太多请求，否则他们可能会在没有警告的情况下将您切断，现在您没有地理信息。此外，如果他们的服务器再次出现故障，您将没有地理信息。

# opengl - 在 Haskell OpenGL 中加载 JuicyPixels 纹理？

> ID：10468845
> 
> 赞同：12
> 
> 时间：2012-05-06T07:08:31.103
> 
> 标签：opengl, haskell

如何使用 Haskell、OpenGL 和 JuicyPixels 库加载纹理？

我可以做到这一点：

```
loadImage :: IO ()
loadImage = do image <- readPng "data/Picture.png"
               case image of 
                 (Left s) -> do print s
                                exitWith (ExitFailure 1)
                 (Right d) -> do case (ImageRGBA i) -> do etc... 
```

如何将其转换为 TextureObject？我想我需要在 Vector Word8 和 PixelData 之间进行转换（以便 OpenGL 识别）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T12:06:41.737

您使用该[`texImage2D`](http://hackage.haskell.org/packages/archive/OpenGL/2.5.0.0/doc/html/Graphics-Rendering-OpenGL-GL-Texturing-Specification.html#v%3atexImage2D)功能。你会像这样调用它：

```
import Data.Vector.Storable (unsafeWith)

import Graphics.Rendering.OpenGL.GL.Texturing.Specification (texImage2D, Level, Border, TextureSize2D(..))
import Graphics.Rendering.OpenGL.GL.PixelRectangles.ColorTable (Proxy(..), PixelInternalFormat(..))
import Graphics.Rendering.OpenGL.GL.PixelRectangles.Rasterization (PixelData(..))

-- ...

(ImageRGBA8 (Image width height dat)) ->
  -- Access the data vector pointer
  unsafeWith dat $ \ptr ->
    -- Generate the texture
    texImage2D
      -- No cube map
      Nothing
      -- No proxy
      NoProxy
      -- No mipmaps
      0
      -- Internal storage format: use R8G8B8A8 as internal storage
      RGBA8
      -- Size of the image
      (TextureSize2D width height)
      -- No borders
      0
      -- The pixel data: the vector contains Bytes, in RGBA order
      (PixelData RGBA UnsignedByte ptr) 
```

请注意，Juicy 并不总是返回 RGBA 图像。您必须处理每个不同的图像变体：

```
ImageY8, ImageYA8, ImageRGB8, ImageRGBA8, ImageYCrCb8 
```

另外，在这个命令之前，你必须绑定一个纹理对象来存储纹理数据。

```
import Data.ObjectName (genObjectNames)
import Graphics.Rendering.OpenGL.GL.Texturing.Objects (textureBinding)
import Graphics.Rendering.OpenGL.GL.Texturing.Specification (TextureTarget(..))

-- ...

-- Generate 1 texture object
[texObject] <- genObjectNames 1

-- Make it the "currently bound 2D texture"
textureBinding Texture2D $= Just texObject 
```

顺便说一句，其中许多导入是在您导入时自动添加的`Graphics.Rendering.OpenGL`；如果您不想要，您不必单独导入每个东西。

# java - 在java中为泛型预定义乘法

> ID：10468853
> 
> 赞同：2
> 
> 时间：2012-05-06T07:10:04.143
> 
> 标签：java, generics, multiplication

因此，出于所有意图和目的，我正在尝试为自己实现一个用于矢量参数的 C++ 的 STL 算法 inner_product 的 Java 版本。到目前为止，我的代码（可能根本上是错误的）看起来像这样：

```
public static<T,K> double inner_product(Vector<T> v1, Vector<K> v2)
{
    double isum = 0;
    for(int i=0;i<v1.size()&&i<v2.size();i++)
    {
        isum+=v1.elementAt(i)*v2.elementAt(i);
    }

    return isum;
} 
```

问题是运算符 * 对于类型 T、K 是未定义的。但是，到目前为止，我的知识还没有涵盖预定义运算符，尽管据我所知，这在 Java 中也是不可能的。在实现采用泛型的功能的方式上，我们将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T07:23:26.297

没有很好的方法可以做到这一点，原因有两个：

1.  类型参数 ( `T`, `K`) 必须引用对象类型，而不是原始类型。
2.  Java 没有运算符重载。

你能得到的最接近的是这样的（模语法错误，我的泛型生锈了）：

```
public static<T extends Number,K extends Number> double inner_product(Vector<T> v1, Vector<K> v2)
{
    double isum = 0;
    for(int i=0;i<v1.size()&&i<v2.size();i++)
    {
        isum+=v1.elementAt(i).doubleValue()*v2.elementAt(i).doubleValue();
    }

    return isum;
} 
```

这将适用于围绕原始类型的对象包装器，即`Double`但不是`double`等。

此外，就像您的版本一样，`double`无论传入什么类型，它都会返回。而且由于类型擦除，这很难修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T07:19:24.220

T 必须定义一个方法，`mutliply`这样你就可以用 V 调用它

```
interface T {
    double multiply(V v);
}

public static<T,K> double inner_product(Vector<T> v1, Vector<K> v2) {
    double isum = 0;
    for(int i=0; i<v1.size() && i<v2.size(); i++) {
        isum += v1.elementAt(i).multiply(v2.elementAt(i));
    }
    return isum;
} 
```

恕我直言 Vector 在 1998 年被 Java 1.2 Collections 库中的 List 取代。使用 List 可能是更好的选择。

你真的需要它是通用的吗？我会用双

```
public static double inner_product(List<Double> v1, List<Double> v2) {
    double isum = 0;
    for(int i=0; i<v1.size() && i<v2.size(); i++) 
        isum += v1.get(i) * v2.get(i);

    return isum;
} 
```

或为了提高效率使用 double[] 或 TDoubleArrayList

```
public static double inner_product(double[] v1, double[] v2) {
    double isum = 0;
    for(int i=0; i<v1.size() && i<v2.size(); i++) 
        isum += v1[i] * v2[i];

    return isum;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T07:25:14.370

Java 中没有运算符重载，乘法运算符仅适用于数字基本类型。如果您需要对泛型类型执行此操作，则必须使它们实现一个接口，该接口允许将它们转换为双精度：

```
public interface DoubleProvider
    double getDouble();
} 
```

然后，您可以定义以下方法：

```
public static <T extends DoubleProvider, K extends DoubleProvider> double innerProduct(Iterable<T> v1, Iterable<K> v2) {
    Iterator<T> it1 = v1.iterator();
    Iterator<K> it2 = v2.iterator();
    double sum = 0D;
    while (it1.hasNext() && it2.hasNext()) {
        T t = it1.next();
        K k = it2.next();
        sum += t.getDouble() * k.getDouble();
    }
    return sum;
} 
```

注意我的代码

*   尊重 Java 命名约定
*   接受任何类型的 Iterable，而不仅仅是过时的 Vector（自 Java 1.2 起不应再使用）

# java - 类中的 Java 字段和访问器方法

> ID：10468854
> 
> 赞同：1
> 
> 时间：2012-05-06T07:10:12.687
> 
> 标签：java, field, accessor

是直接使用 Java 字段还是使用访问器方法更好？同一班内。

例子：

```
private ArrayList<String> list;

list.get(0); 
```

或者

```
getList().get(0); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T07:11:53.647

在同一个类中可以直接访问成员，封装和隐藏是为了类外的。

当您考虑它时，无论如何您都可以直接访问它：

```
private void useList()
{
    String temp = getList().get(0); // access "via accessor" ----------+
    System.out.println(temp);                                          |
}                                                                      |
                                                                       |
public ArrayList<String> getList()                                     |
{                                                                      |
    return theList; // but you actually directly access it here...  <--+
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T08:46:26.817

通过方法访问成员（也可以从同一个类中访问它们）使您的代码更易于维护。考虑在您的班级的未来版本中，列表不再存储在该班级中，而是存储在其他位置。或者，列表中的值可能是派生的，而您希望当场派生列表。在这种情况下，“getter/setter”方法可以节省工作、错误和重复代码。您只需在 getter 中编写新逻辑，就可以开始了！因此，如果需要可维护性，请使用 getter 和 setter。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T07:30:09.753

你应该做你认为更简单或更清晰的事情。

一旦代码预热，性能差异就没有了。它测试了我在更简单的情况下所做的测试，平均差异可能小于 0.1 ns。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T08:10:37.247

实际上存在使用访问器方法更好的情况，但仅限于为扩展设计的类。例如，这在 Spring Framework 的代码中非常常见。您可以编写一个`protected`访问器方法，然后您的 API 的客户端可以覆盖并提供完全不同的东西而不是您的私有字段。

# jquery - 来自 jquery 的 WCF 调用过程很长

> ID：10468864
> 
> 赞同：0
> 
> 时间：2012-05-06T07:12:28.077
> 
> 标签：jquery, wcf

我有一个面向 Internet 的 WCF 服务，它调用 LAN 内的其他几个服务。此调用可能需要几秒钟才能完成。

我通过 jquery 调用此 WCF 服务，并在线程返回响应后更新 UI。

我想要做的是确保如果用户在服务运行时导航到另一个页面，通过 jquery 的第二次调用（在新页面上）将不会在另一个线程上再次启动该进程。

是否有任何模式或 WCF 功能来控制此类行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T07:27:24.167

您的问题是浏览器是无状态的。一个页面中的 HTML、CSS 和 JavaScript 在与另一页面完全不同的上下文中加载。因此，即使您的进程继续运行，它们也无法将数据返回到页面，因为它不再被加载。

听起来您想确保即使用户更改页面也更新您的 UI。这可以通过使用 Comet 来实现。

Comet 的工作方式是通过从浏览器向服务器打开 HTTP 请求。然后服务器保持该连接打开，直到它有数据需要推送回客户端。当服务器准备好时，它会向客户端发送响应。

虽然这种技术通常用于在某些情况发生变化时用新数据更新 N 个客户端，但您可以使用它来将您的响应与特定请求分离。换句话说，您可以设置您的应用程序，以便向服务器发出的请求不会收到响应。相反，服务器将通过彗星连接传递更新。

这将确保任何发出请求然后更改页面的客户端在计算结果后仍会收到对 UI 的更新。

许多主要平台都支持 Comet：Java、PHP、.NET、node.js 是我所知道的支持这种技术的平台之一。

另一种获得支持的类似技术是 WebSockets。然而，并不是所有的浏览器都支持这种技术。首先在您选择的特定平台上对 Comet 进行一些研究，如果您有更具体的问题，可以在这里提问。祝你好运！

# jquery - Ajax 上传删除按钮

> ID：10468867
> 
> 赞同：1
> 
> 时间：2012-05-06T07:12:58.287
> 
> 标签：jquery, ajax, jsp, ajax-upload, ajaxuploader

我使用带有jsp的ajax上传。它运作良好，但我想为每个文件或至少为所有文件添加删除按钮。这是我的代码：

```
<script type="text/javascript">
    $(function () {
        var btnUpload = $('#upload');
        var status = $('#status');
        new AjaxUpload(btnUpload, {
            action: 'uploadServlet',
            name: 'uploadfile',
            onSubmit: function (file, ext) {
                if (!(ext && /^(jpg|png|jpeg|gif)$/.test(ext))) {
                    // extension is not allowed 
                    status.text('Only JPG, PNG or GIF files are allowed');
                    return false;
                }
                status.text('Uploading...');
            },
            onComplete: function (file, response) {
                //On completion clear the status
                status.text('');
                $('<li></li>').appendTo('#files').html('<img src="./uploads/' + file + '" alt="" height="40" width="40"/><br />' + file).addClass('success');

            }
        });

    });
</script>

<div id="mainbody">
    <h3>&raquo; AJAX File Upload Form Using jQuery</h3>
    <!-- Upload Button, use
    any id you wish-->
    <div id="upload">
        <span>Upload File
            <span>
    </div>
    <span id="status"></span>
    <ul id="files"></ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T02:59:24.130

我找到了解决方案。我创建了一个 servlet，并使用了 jquery。

```
 $('ul').on("click","#delete",function(){                      
                 var del=$(this).parent();
                 $filename = del.text();                   
                 del.fadeOut('slow', function() { del.remove(); });
                 $.post("deleteServlet", {filename:$filename}, function() {});
             }); 
```

# jquery - CSS Vertical ul li 菜单，2 行垂直居中

> ID：10468871
> 
> 赞同：1
> 
> 时间：2012-05-06T07:13:32.717
> 
> 标签：jquery, html, css

您好，有以下奇怪的问题，如果是一行，可以垂直居中菜单文本，但是两行会弄乱我的设计。在每个浏览器中，它看起来都不同。它还必须与浏览器兼容。有人有想法吗？

这里有一个在线版本：

[http://jsfiddle.net/Vm57C/6/](http://jsfiddle.net/Vm57C/6/)

HTML：

```
<ul id="vert-menu">
      <li><a href="#">Organisatie</a></li>
      <li><a href="#">Feiten en cijfers</a></li>
      <li><a href="#">Historie</a></li>
      <li><a href="#">Kennis & ontwikkeling</a></li>
      <li><a href="#">Maatschappelijk betrokken</a></li>
      <li><a href="#">Help mee</a></li>
      <li><a href="#">Samenwerking in de zorg</a></li>
      <li><a href="#" class="active">Samen leven, samen werken</a>          
        <ul class="sub-menu">
          <li><a href="#">Samen leven, samen werken</a></li>
          <li><a href="#">Catering en horeca</a></li>
          <li><a href="#">Kunst en cadeaus</a></li>
         <li><a href="#">Lenen en spelen</a></li>
         <li><a href="#">Maken en doen</a></li>
        <li><a href="#">Recreatie</a></li>
        </ul>
        </li>
      <li><a href="#">Medezeggenschap</a></li>
      <li><a href="#">Publicaties</a></li>
    </ul> 
```

CSS：

```
/* verticaal menu */
#vert-menu {
margin: 0;  
padding: 0; 
}

#vert-menu ul {
margin: 0;  
padding: 0;
list-style:none;
}

#vert-menu > li {
    margin-bottom: 5px;
    color: #FFF;
    font-weight: bold;
    text-transform: uppercase;
    width: 175px;
    line-height: 30px;
    font-size: 0.9em;
    background:#FFF url(../images/vert-menu.jpg) no-repeat;
}

#vert-menu > li > a {
    padding: 0 35px 0 5px;
    display: block;
    height: 30px;
    line-height: 15px;
    vertical-align:middle;
    color: #FFF;
    text-decoration:none;
    outline:none;
}

#vert-menu > li:hover > a {
    background:#FFF url(../images/vert-menu-active.jpg) no-repeat;
    text-decoration:none;
}
#vert-menu > li > a.active {
    background:#FFF url(../images/vert-menu-active.jpg) no-repeat;
    text-decoration:none;
}

#vert-menu li > .sub-menu {
    margin:0;
    padding: 0 5px 0 5px;
}
#vert-menu li > .sub-menu > li a {
    display:block;
    line-height: 20px;
    width: 165px;
    text-transform: lowercase;
    color: #83B810;
    border-bottom-width: 1px;
    border-bottom-style: solid;
    border-bottom-color: #83B810;
    text-decoration:none; 
    outline: none;
}

#vert-menu > li > .sub-menu > li:hover > a {
    color: #750D68; 
    text-decoration:none;
}
#vert-menu > li > .sub-menu > li > a.active {
    color: #750D68; 
    text-decoration:none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T08:46:02.223

让它看起来像一个表格单元格：

```
#vert-menu > li > a {
    padding: 0 35px 0 5px;
    display: table-cell;
    height: 30px;
    line-height: 15px;
    vertical-align: middle;
    color: #FFF;
    text-decoration: none;
    outline: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T06:43:45.097

这是此问题的解决方案：

[http://www.andy-howard.com/verticalAndHorizo​​ntalAlignment/index.html](http://www.andy-howard.com/verticalAndHorizontalAlignment/index.html)

希望这对大家有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T07:34:24.890

我认为以下修改可以满足您的要求：

```
#vert-menu > li > a {
    padding: 0 35px 0 5px;
    display: block;
    height: 30px;
    line-height: 15px;
    vertical-align:middle;
    color: #FFF;
    text-decoration:none;
    text-align: center;
} 
```

我补充说`text-align:center`。

但我个人更喜欢左对齐的版本。

# asp.net - 如何正确桥接 asp mvc 3 和 mongodb 数据库？

> ID：10468873
> 
> 赞同：2
> 
> 时间：2012-05-06T07:14:29.963
> 
> 标签：asp.net, asp.net-mvc-3, mongodb, mongodb-.net-driver

我是一名初学者，试图从头开始自学 Web 开发，这样我就可以建立我心中所想的严肃的社交网络创业公司。我选择使用 mongodb 在 C# 中使用 asp.net MVC3。现在，我已经了解了很多关于 MVC 和 Mongodb 的信息，但我仍然不清楚它们应该如何在 semipro 设置中交互。显然，关于 MVC 如何与 sql 一起工作的东西很多，但我找不到很多关于 mongodb 和 asp MVC 的信息。我知道最新的官方 C# 驱动程序支持 LINQ，并且我阅读了所有这些内容，例如存储库模式/实体框架/NoRM/NHibernate，并且我看到了诸如[http://mongorepository.codeplex.com/](http://mongorepository.codeplex.com/)之类的内容。

我需要学习以下哪些东西才能以半专业的企业方式一起使用 aspmvc 和 mongo？所有这些信息过载只是让我头晕目眩。我似乎找不到明确的答案，如果有的话。我更喜欢以正确的方式做事，就像初学者一样，我可以在这方面使用一些指导，因为我希望这至少是专业的一半。这些可能对你们来说是学龄前问题，但我是否只是使用 LINQ 将内容（个人资料/博客文章）进出 mongo 数据库？我是否使用 LINQ AND 存储库模式？实体是否适合任何地方？还有其他我应该完全使用的东西吗？我想我要问的是我应该使用哪些方法/模式/框架将这些域模型对象持久化到我的 mongodb 中？（我希望我用了一些行话，哈哈。太晚了！) 我很想学习，但我只需要知道该学什么。您有才华的人可以提供的任何建议或提示将不胜感激！提前感谢您在我的杂谈中阅读了这篇文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T00:51:52.923

回复：评论 #4...

这是一个很好的问题。不，这不是一个糟糕的假设，但它是一个备受争议的假设，答案再次取决于它。 [http://www.nogginbox.co.uk/blog/do-we-need-the-repository-pattern](http://www.nogginbox.co.uk/blog/do-we-need-the-repository-pattern)是关于这个主题的一个很好的讨论。虽然它没有专门谈论 mongodb，但它专门针对您的抽象问题。

具体就 MongoDB 而言，将数据输入和输出非常简单。您可以在此处阅读快速入门：[http](http://www.mongodb.org/display/DOCS/CSharp+Driver+Quickstart) ://www.mongodb.org/display/DOCS/CSharp+Driver+Quickstart 。至于是否创建中间层取决于您。这取决于您的应用程序的复杂性、应用程序的大小、您是否认为您可能会在某个时候更改数据层等等……

# php - 在 php 中使用 imagick 库从文件中显示

> ID：10468874
> 
> 赞同：-3
> 
> 时间：2012-05-06T07:14:59.773
> 
> 标签：php, image, imagemagick, imagick

你能帮我吗 ？

我编写了以下代码来显示目录中的字母图像，然后我在 linux 终端上通过 CLI 运行此代码，但我什么也没得到，没有图像显示？？！！

这是代码：

```
<?php
$name='LUBNA';
$length=  strlen($name);
$name_array=array();
$image_path='/var/www/letters/';

for($i=0; $i<$length; $i++) {

    $name_array[$i]=$name[$i];

}

    foreach ($name_array as $value) 
    {

        $image = $image_path.$value.'.png';

        $im = new Imagick();

        $im->readImage( $image );

}

?> 
```

谢谢亲爱的；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:58:20.707

您好只是想向您展示我的问题的正确代码，最后我做到了：-

```
<?php

$name='lubna';
$name=strtoupper($name);
$length=  strlen($name);
$name_array=array();
$image_path='/var/www/letters/';

$image_array=array();
$image_hight=array();
for($i=0; $i<$length; $i++) {

    $name_array[$i]=$name[$i];
    $image_array[$i]=$image_path.$name[$i].'.png';
    $size=  getimagesize($image_array[$i]);
    $hight=$size[1];
    $image_hight[$i]=$hight;

}

$hight1=  array_sum($image_hight);
$image = new Imagick();
$image->newImage(120, $hight1, new ImagickPixel('none'));
$image->setImageFormat('png');
$offset=0;

  foreach($name_array as $id=>$value) 
   {  

    $img= new Imagick($image_path.$value.'.png');

    $image->compositeimage($img, imagick::COMPOSITE_COPY,0, $offset);

    $offset=$offset+$image_hight[$id];
   }
//header('Content-type: image/png');
//echo $image;
   $image->setImageFormat('png');
   $image->writeimage('/tmp/name.png');
   $cmd1="display /tmp/name.png";
   $run1=  exec($cmd1);

 ?> 
```

# symfony - 如何配置 Doctrine 放置存储库文件的路径？

> ID：10468875
> 
> 赞同：1
> 
> 时间：2012-05-06T07:15:45.237
> 
> 标签：symfony, doctrine-orm

我认为这个主题说明了一切。使用 Symfony，在使用“doctrine:generate:entity”创建实体时，如何更改创建存储库文件的默认路径。

必须有某种配置文件，但我找不到。

同理，在执行“doctrine:generate:entities”时，是否有任何参数用于指示备份“*.php~”文件的放置位置？我认为它们是必要的，但我不希望它们出现在与“好人”相同的道路上。

提前致谢！

佩德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-06T12:42:33.187

我想如果你在 Entity 文件夹中有一个子目录，你可以像这样指定路径：

```
php app/console doctrine:generate:entities AppBundle:directory_name --env=local 
```

# c# - 用于下载页面的并行类

> ID：10468891
> 
> 赞同：3
> 
> 时间：2012-05-06T07:21:55.360
> 
> 标签：c#, download, parallel-processing

我有一个带有并行类的代码来从网上下载页面。因为我下载了大约 3000 页，所以我想知道它是否是最好的方法。

```
Parallel.For(0, 3000, i =>
            {
                Console.WriteLine(i.ToString());
                //HttpDownloader is my class for downloading
                HttpDownloader ht = new HttpDownloader(s[i]);
                string a = ht.GetPage();
                Console.WriteLine(i.ToString());
            }); 
```

之后我运行 2 func: phasing(string html) and save()//Save into DB 我如何通过 Parallel 来实现？而且，如果我想让它在后台运行，我需要将它插入到 BackgroundWorker 中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T07:31:54.723

任务并行库（TPL，`Parallel`来自哪里）模块是要走的路——就像你已经在做的那样。但是，您可以使用`Parallel.ForEach`over使事情更清楚`Parallel.For`：

```
var urls = new List<string> { "http://google.com", "http://yahoo.com" };

Parallel.ForEach(urls, url => {
    using (var client = new WebClient())
    {
        var contents = client.DownloadString(url);
        // parse contents
        // add to database
    }
}); 
```

进一步阅读，特别是展示如何使用异步模式来节省线程（但不一定是速度）在这里：http: [//blogs.msdn.com/b/pfxteam/archive/2009/08/04/9857477。 aspx](http://blogs.msdn.com/b/pfxteam/archive/2009/08/04/9857477.aspx)

这是一个有用的阅读，但我认为代码在这一点上是性能和可读性的正确平衡。

# php - 显示表格中的所有数据

> ID：10468895
> 
> 赞同：1
> 
> 时间：2012-05-06T07:22:43.610
> 
> 标签：php, mysql, html, css

目前，在对 mysql 进行查询后，所有数据都显示在 HTML 表中，例如：

会员号 | 姓名 | 姓氏 | 地址 | 年龄 | 国籍 | 编号 | 卡| 职业..

问题是所有内容都被压缩并且在 HTML 表格中显示不好。

我希望可能只显示会员编号、姓名和姓氏，一旦您单击会员编号，所有数据就会整齐地显示。

不确定是否需要使用 JavaScript，但如果您至少可以给我一个关于如何能够以简洁的方式显示所有数据的线索，我会很高兴。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T08:01:45.940

我是此类任务的定义列表的忠实拥护者，但您可以将其与表格结合以获得相同的效果。这是一个演示：

[http://jsfiddle.net/crazytonyi/rZfKg/](http://jsfiddle.net/crazytonyi/rZfKg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T07:50:58.440

如果我理解正确，您需要一个显示每个成员的会员编号、姓名和姓氏的 HTML 表格。当您单击会员编号时，您希望它显示其余的详细信息。我认为 Surreal Dreams 使用 Javascript 来完成这部分是正确的。

它可能看起来像这样（请原谅伪代码 - 不记得 foreach 语法）：

```
echo "<table id='data'>";
foreach ($row in $sqltable)
{
  echo "<tr>";
  echo "<td><a onclick='displaymoreinfo'>".$row['id']."</a></td>";
  echo "<td>".$row['name']."</td>";
  echo "<td>".$row['surname']."</td>";
  echo "</tr>";    
} 
echo "</table>"; 
```

然后，您需要在文件顶部有一个 javascript 方法，该方法类似于此人在此处所做的操作：http: [//viralpatel.net/blogs/2009/03/dynamically-add-remove-rows-in-html -table-using-javascript.html](http://viralpatel.net/blogs/2009/03/dynamically-add-remove-rows-in-html-table-using-javascript.html)

-劳拉

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T07:56:18.797

一种选择是使用 jQuery 和[datatables](http://datables.net/)。

与您的普通 HTML 一起使用，您的表格会立即转换为可排序、分页、样式等的表格。您当然可以选择要应用的设置。

您还可以编写自己的 PHP 表类或脚本，与 CSS 一起根据您的输入呈现数据。然后，您可以使用 PHP 数组指定这些参数，可能是这样的：

PHP：

假设您的 SQL 查询脚本最终返回表数据，如下所示：

```
$tbl_data = array(
   0 => array("nr" => "10", "name" => "John", "surname" => "Smith", "address" => " Plaza Hotel Room 12", "age" => "44", "nat" => "Syldavian", "id" => "12345", "card" => "MasterCard", "prof" => "Pet Washer"),
   1 => array("nr" => "11", "name" => "Captain", "surname" => "Haddock", "address" => "Marlinspike Hall", "age" => "55", "nat" => "British", "id" => "133455", "card" => "Discovery", "prof" => "Captain") 
```

);

然后你可以像这样指定你的输入参数：

```
$arr_cols = array("nr" => "Membership Number", "name" => "Name", "surname" => "Surname", "address" => "Address", "age" => "Age", "nat" => "Nationality", "id" => "ID", "card" => "Card", "prof" => "Profession");

$arr_align = array("nr" => "center", "name" => "left", "surname" => "left", "address" => "left", "age" => "center", "nat" => "center", "id" => "center", "card" => "left", "prof" => "left");

$lst_show = array("nr", "name", "surname"); 
```

然后可以始终使用此表视图方法，而与您的特定输入无关：

```
$html = "<table class='grid'>\n";
// headings
foreach ($arr_cols as $key => $title) {
    if (in_array($key, $lst_show))
        $html .= "<tr><th>$title</th></tr>\n";
} 
//rows
foreach ($tbl_data as $arr_row) {
   foreach ($arr_row as $key => $data) {
     if (in_array($key, $lst_show)) {
        $align = !empty($arr_align[$key]) ? " align='" . $arr_align[$key] . "'" : '';
        $html .= "<tr><td$align>$data</td></tr>\n";
    }
  }
}
$html .= "</table>\n";

echo $html; 
```

CSS：

```
table.grid {border:1px solid blue; etc.}
table.grid th {etc.}
table.grid td {etc.} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T07:32:28.787

简短的回答是，如果您想输出数据，然后根据用户交互更改显示的信息，您将需要 JavaScript。具体来说，我建议使用 jQuery 来处理这类事情。您仍然需要想出一种巧妙的方式来使用 HTML 和 CSS 显示您的数据，然后让 JavaScript/jQuery 显示漂亮的演示文稿。

然而，“整齐地”呈现是相当主观的——你必须决定你想要显示什么以及如何布局，这将是所有的 CSS 和 HTML。我会马上告诉你，避免使用表格 - 选择良好的语义 HTML。

# c# - 在 Visual Studio 项目上连接服务器和客户端

> ID：10468898
> 
> 赞同：0
> 
> 时间：2012-05-06T07:23:08.243
> 
> 标签：c#, javascript, google-maps-api-2

**我们用 HTML 编写了这段代码**

```
<!DOCTYPE html>
<html>
<head>
<title>Google Maps</title>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="js/jquery-1.4.1.min.js"></script>
<script type="text/javascript" src="js/markers.js">
</script>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1255">
</head>
<body><div id="map"></div>
<input type="button" id="showmarkers" value="Show Markers" />

</body>
</html> 
```

**以及 JAVASCRIPT 中的这段代码**

```
$(document).ready(function() {
  $("#map").css({
        height:600,
        width: 2000
    });
    var myLatLng = new google.maps.LatLng(31.2402893696987, 34.7672211844361);
  MYMAP.init('#map', myLatLng, 11);

  $("#showmarkers").click(function(e){
        MYMAP.placeMarkers('markers.xml');
});
});

var MYMAP = {
  map: null,
    bounds: null
}

MYMAP.init = function(selector, latLng, zoom) {
  var myOptions = {
    zoom:zoom,
    center: latLng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  this.map = new google.maps.Map($(selector)[0], myOptions);
    this.bounds = new google.maps.LatLngBounds();
}

MYMAP.placeMarkers = function(filename) {
    $.get(filename, function(xml){
        $(xml).find("marker").each(function(){
            var name = $(this).find('name').text();
            var address = $(this).find('address').text();

            // create a new LatLng point for the marker
            var lat = $(this).find('lat').text();
            var lng = $(this).find('lng').text();
            var point = new google.maps.LatLng(parseFloat(lat),parseFloat(lng));

            // extend the bounds to include the new point
            MYMAP.bounds.extend(point);

            var marker = new google.maps.Marker({
                position: point,
                map: MYMAP.map
            });

            var infoWindow = new google.maps.InfoWindow();
            var html='<strong>'+name+'</strong.><br />'+address;
            google.maps.event.addListener(marker, 'click', function() {
                infoWindow.setContent(html);
                infoWindow.open(MYMAP.map, marker);
            });
            MYMAP.map.fitBounds(MYMAP.bounds);
        });

    });
} 
```

我们想使用此代码在我们的 ASP 上显示谷歌地图。NET (C#) 网站。是否可以将整个代码按原样加载到我们网站上的某个页面？谢谢！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T07:42:40.260

是的。将一个新`.aspx`文件添加到您的 ASP.NET 项目中，只需将其默认内容替换为您的 HTML。
然后，在该部分中添加一个脚本块`<head>`：

```
<script language="javascript">

</script> 
```

并在其中粘贴您的 javascript 代码。

现在从项目中的任何其他页面添加指向此页面的链接。
那应该工作得很好。

# objective-c - 在此范围错误中未声明自动释放池

> ID：10468901
> 
> 赞同：0
> 
> 时间：2012-05-06T07:23:26.747
> 
> 标签：objective-c, xcode4.2, objective-c++, nsautoreleasepool

我的项目在 XCode 4.2 中。该项目编译为常规调试版本。

但是当我将构建类型更改为配置文件（我想分析内存使用情况）时，我从这个objective-c++ c++类中得到了错误：

> /Volumes/mchinen/scm/Voicer/FilterAudioMixer.mm:53：错误：程序/Volumes/mchinen/scm/Voicer/FilterAudioMixer.mm 中的杂散'@'：在成员函数'void FilterAudioMixer::WriteToBuffer(SInt16*, int )': /Volumes/mchinen/scm/Voicer/FilterAudioMixer.mm:53: 错误: 'autoreleasepool' 未在此范围内声明 /Volumes/mchinen/scm/Voicer/FilterAudioMixer.mm:53: 错误: 预期 `;' before '{' token /Volumes/mchinen/scm/Voicer/FilterAudioMixer.mm:147: error: expected` }' 在输入结束

下面的@autoreleasepool 行是第 53 行：

```
void FilterAudioMixer::WriteToBuffer(SInt16* buffer, int nb_samps)
{
   @autoreleasepool {
      //do a per element lock (todo)
      pthread_mutex_lock(&playlist_lock);
      FilterSound *snd;

      size_t count = playlist.size();
      for (size_t i = 0; i < count; i++) {
         snd = playlist[i];
         [snd writeToBuffer:buffer samples:nb_samps];
      }
      pthread_mutex_unlock(&playlist_lock);

      if (m_mute) {
         memset(buffer, 0, sizeof(SInt16) * 2 * nb_samps);
      }
   }
} 
```

@autoreleasepool 似乎只在配置文件下给我带来问题，这是为什么呢？

为了完整起见，这里是构建结果窗口中的编译行：

> 构建/Voicer-project-headers.hmap -iquote。-iquotePictures -iquoteCocoaSoundCloudUI -iquoteCocoaSoundCloudAPI -iquoteOHAttributedLabel -iquoteOAuth2Client -iquoteVoicer.xcworkspace -iquoteClasses -iquotehelp -iquoteJSONKit -iquoteShaders -iquoteaudio -iquotePictures / extremeprogrammingpics -iquotePictures / 2010 -iquotePictures /网络摄像头-iquotePictures / 2011 -iquotePictures / GUI -iquoteCocoaSoundCloudUI / SoundCloud.bundle -iquoteCocoaSoundCloudUI/Sources -iquoteCocoaSoundCloudAPI/Sources “-iquoteOHAttributedLabel/AttributedLabel 示例”-iquoteOHAttributedLabel/OHAttributedLabel -iquoteOAuth2Client/Sources -iquoteVoicer。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T07:30:39.033

The important part of that build log is:

> gcc-4.2

Something in your build settings is causing you to use the old GCC 4.2 compiler, which doesn't support `@autoreleasepool`. (More explanation in [this answer](https://stackoverflow.com/questions/6381764/xcode-4-2-compiler-error).)

In your scheme, check what build configuration "Profile" is using. Then, check the settings in your project and target for that build configuration.

# html - 正则表达式 with leading, trailing, linebreak

Most website I can parse its title easily with RegEx "(.*)" or "\s*(.+?)\s*". However some sites have a bit different formatting, like

> ID：10468903
> 
> 赞同：0
> 
> 时间：2012-05-06T07:23:30.127
> 
> 标签：html, regex

 * * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T07:29:08.467 

有多种方法可以完成这项工作。对于仅标题，[SIMPLEHTMLDOM](http://simplehtmldom.sourceforge.net/)绰绰有余。

```
$html = file_get_html('http://www.youtube.com/');
$title = $html -> find("title") -> innerHTML;
echo $title; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T07:38:00.287

如果您想在正则表达式中包含换行符，在大多数情况下，您只需要使用`\n`表达式内部。也就是说，您使用的是哪种语言/翻译？其中一些不允许多行表达式。

如果他们被允许，类似的东西`(.|\n|\r)*`就足够了。

如果您的语言或解释器与多行正则表达式不兼容，您总是可以用空格替换换行符，然后将结果字符串传递给正则表达式解析器。这也取决于您的编程环境。

希望有所帮助！

# list - 删除 xls 文件中的重复项

> ID：10468905
> 
> 赞同：-1
> 
> 时间：2012-05-06T07:23:46.837
> 
> 标签：list, loops, duplicates, xls

我正在尝试编写一个 python 脚本，该脚本能够获取 xls 文件中每一行的内容，从中提取单词列表（使用 rex 具有特定模式），并将该列表与在当前行之后的所有行中提取的所有列表进行比较行直到文件末尾。并删除具有相同列表的行。请注意，两个列表中的单词可能是无序的，但它们的内容仍然相同。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:43:56.027

这个问题非常类似于从未排序的数组中删除相似的元素。您需要做的是根据与您的正则表达式匹配的单词数对所有行进行哈希处理，然后在每个桶中比较相似性。

你使代码也非常可扩展。

```
 buckets={}
     for row in rows:
          if bucket[row.length] is None:
               bucket[row.length]={}
          bucket[row.length].append(row)
      #now do your matching 
      for bucket in buckets:
          #match and delete. 
```

# java - 一个 Java 库，它具有用于查找一组整数的最小公倍数的实用程序

> ID：10468907
> 
> 赞同：0
> 
> 时间：2012-05-06T07:24:19.723
> 
> 标签：java, lcm

我想找到一组整数的最小公倍数。是否存在这样的数字 Java 库？请提供它的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T08:03:05.240

[Orbital 库](http://symbolaris.com/orbital/index.html)有一个 LCM 方法。这是[javadoc](http://symbolaris.com/orbital/Orbital-doc/api/orbital/math/MathUtilities.html)。

# sorting - 需要帮助查找 arraylist 合并排序中的错误

> ID：10468911
> 
> 赞同：0
> 
> 时间：2012-05-06T07:25:30.067
> 
> 标签：sorting, merge, arraylist

我正在尝试为字符串的数组列表实现合并排序算法，但我似乎找不到破坏数组列表排序的错误。

```
private static void sort(java.util.ArrayList<String> a)
{

   // End recursion
   if (a.size() < 2)
   {
      return;
   }

   int mid = a.size() / 2;

   java.util.ArrayList<String> left = new java.util.ArrayList<String>();

   int i;

   for (i = 0; i < mid; i++)
   {

      left.add(a.remove(i));

   }

   java.util.ArrayList<String> right = new java.util.ArrayList<String>();

   // Copy the second half to the "right"
   for ( ; i < a.size(); i++)
   {
      right.add(a.remove(i));
   }

   sort(left);
   sort(right);

   merge(a, left, right);
}

private static void merge(java.util.ArrayList<String> result, java.util.ArrayList<String> left,java.util.ArrayList<String> right)
{
   int i, l, r;

   i = l = r = 0;

   while (l < left.size() && r < right.size())
   {
      if ((left.get(l)).compareTo(right.get(r)) < 0)
      {
         result.add(left.get(l));
         l++;
      }
      else
      {
         result.add(right.get(r));
         r++;
      }

      i++;
   }

   while (l < left.size())
   {
      result.add(left.get(l));
      l++;
      i++;
   }

   // Append rest of the values in the right half, if any...
   while (r < right.size())
   {
      result.add(right.get(r));
      r++;
      i++;
   }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T08:34:17.253

问题出在`sort`功能上。

使用时会发生什么`a.remove(i)`？index 处的元素`i`从数组中删除，因此之前在 index 处的元素`i+1`现在位于 index 处`i`，并且数组大小减小。如果你这样做`i++`，并且再一次`a.remove(i)`，你将跳过数组中的一个元素。

在您的`sort`函数中，调用 时`merge`，您应该检查`a.size() == 0`. 你会发现情况并非总是如此。该`merge`函数看起来不错，但是您的数组拆分不正确：您忘记了 using`remove(int i)`更改了数组；它的大小和元素的索引。

# metrics - 质量控制或保证中的功能点测量

> ID：10468914
> 
> 赞同：0
> 
> 时间：2012-05-06T07:26:07.427
> 
> 标签：metrics, software-quality, function-points

我正在寻找 3 个示例，说明如何在质量控制或保证中使用功能点度量而不是其他一些更简单的度量，即 3 个示例，其中功能点在质量控制/保证中优于其他一些更简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:46:20.443

功能点用于估计构建应用程序所需的工作量。一个替代方案是，例如，基于代码行数的 COCOMO。在项目开发的早期阶段，基于 FP 的方法通常被认为比 COCOMO 更可取，此时尚无法明确估计要开发的代码行数。

基于 FP 的工作量估计的另一个优点是工作量表的可用性（例如，在 Capers Jones 的书中），用于软件项目中涉及的不同类型的应用程序和不同类型的活动。因此，通过使用 FPs，项目经理可以获得对所需工作量的更精细的洞察力。

# java - 如何根据计算的平均值在 jpanel 中绘制矩形

> ID：10468916
> 
> 赞同：0
> 
> 时间：2012-05-06T07:27:14.567
> 
> 标签：java, eclipse, user-interface

我有一个 gui，可以在其中输入数据并计算 5 组不同数据的平均值。这些存储在一个数组中，五个位置的五个平均值。如何让它在 jpanel 中绘制矩形，使其看起来像这 5 个平均值的图形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T07:42:33.897

> *..让它在jpanel中绘制矩形看起来像一个图形......*

假设，你在谈论条形图，

看看这个例子：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class SimpleBarChart extends JPanel {

    private double[] value;
    private String[] languages;
    private String title;

    public SimpleBarChart(double[] val, String[] lang, String t) {
        languages = lang;
        value = val;
        title = t;
    }

    @Override
    public void paintComponent(Graphics graphics) {
        super.paintComponent(graphics);
        if (value == null || value.length == 0) {
            return;
        }
        double minValue = 0;
        double maxValue = 0;
        for (int i = 0; i < value.length; i++) {
            if (minValue > value[i]) {
                minValue = value[i];
            }
            if (maxValue < value[i]) {
                maxValue = value[i];
            }
        }
        Dimension dim = getSize();
        int clientWidth = dim.width;
        int clientHeight = dim.height;
        int barWidth = clientWidth / value.length;
        Font titleFont = new Font("Book Antiqua", Font.BOLD, 15);
        FontMetrics titleFontMetrics = graphics.getFontMetrics(titleFont);
        Font labelFont = new Font("Book Antiqua", Font.PLAIN, 10);
        FontMetrics labelFontMetrics = graphics.getFontMetrics(labelFont);
        int titleWidth = titleFontMetrics.stringWidth(title);
        int q = titleFontMetrics.getAscent();
        int p = (clientWidth - titleWidth) / 2;
        graphics.setFont(titleFont);
        graphics.drawString(title, p, q);
        int top = titleFontMetrics.getHeight();
        int bottom = labelFontMetrics.getHeight();
        if (maxValue == minValue) {
            return;
        }
        double scale = (clientHeight - top - bottom) / (maxValue - minValue);
        q = clientHeight - labelFontMetrics.getDescent();
        graphics.setFont(labelFont);
        for (int j = 0; j < value.length; j++) {
            int valueP = j * barWidth + 1;
            int valueQ = top;
            int height = (int) (value[j] * scale);
            if (value[j] >= 0) {
                valueQ += (int) ((maxValue - value[j]) * scale);
            } else {
                valueQ += (int) (maxValue * scale);
                height = -height;
            }
            graphics.setColor(Color.blue);
            graphics.fillRect(valueP, valueQ, barWidth - 2, height);
            graphics.setColor(Color.black);
            graphics.drawRect(valueP, valueQ, barWidth - 2, height);
            int labelWidth = labelFontMetrics.stringWidth(languages[j]);
            p = j * barWidth + (barWidth - labelWidth) / 2;
            graphics.drawString(languages[j], p, q);
        }
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setSize(350, 300);
        double[] value = new double[5];
        String[] languages = new String[5];
        value[0] = 1;
        languages[0] = "Visual Basic";

        value[1] = 2;
        languages[1] = "PHP";

        value[2] = 3;
        languages[2] = "C++";

        value[3] = 4;
        languages[3] = "C";

        value[4] = 5;
        languages[4] = "Java";
        frame.getContentPane().add(new SimpleBarChart(value, languages,
                "Programming Languages"));

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

另请参阅[JFreeChart](http://www.jfree.org/jfreechart/)，如果您不介意使用外部库。

您可能需要通过 @trashGod 的示例：[示例](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/category/BarRenderer.html)及其[源代码](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/demo/BarChartDemo1.html#line.62)。

# php - 浮点数不连接

> ID：10468920
> 
> 赞同：0
> 
> 时间：2012-05-06T07:28:03.250
> 
> 标签：php, javascript, jquery, flot

我正在尝试制作一个实时图表，每 X 秒更新一次，然后随着时间的推移绘制图表。我遇到的问题是，当它绘制点时，这些点没有连接。这是我到目前为止所拥有的：

```
var r = [];

function fetchData() {
var options = {
    lines: { show: true },
    points: { show: true },
    xaxis: { show: false }
};
function doSomething(series)
{   
    r.push(series);
    $.plot($("#xx"), r, options);
}
$.ajax({
  url:      'playersonline.php',
  method:   'GET',
  dataType: 'json',
  success:  doSomething
});

setTimeout(fetchData, 3000);
}

fetchData(); 
```

这是当前输出的样子。 [一些图片 http://screensnapr.com/e/ra6q70.png](http://screensnapr.com/e/ra6q70.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T12:48:57.453

看起来您的每个观点都是一个单独的系列。为了将它们连接起来，您需要将所有点放在一个数组中，并将其作为一个系列提供给 Flot。

如果您查看 Flot 的示例，就会发现其中一个演示了单个系列的实时更新。

# android - 创建带有复选框的 ListView

> ID：10468929
> 
> 赞同：0
> 
> 时间：2012-05-06T07:29:09.147
> 
> 标签：android, listview

我有一个列表视图，每个项目都包含一个图像、一个文本视图和一个复选框。我正在尝试拥有它，因此无论您在项目中单击何处，它都会突出显示复选框。如[本](https://stackoverflow.com/questions/1121192/android-custom-listview-unable-to-click-on-items)回复所述，我将复选框的可聚焦属性设置为 false，但我仍然只能单击复选框来更改其状态。更有趣的是，当我点击一个复选框时，每个进行中的第 10 个项目也会被突出显示。有什么建议么？

这是我的一个项目的 xml。

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content">
    <ImageView
        android:id="@+id/image"
        android:layout_width="50dip"
        android:layout_height="50dip" 
        android:src="@drawable/stub"   
        android:scaleType="centerCrop"/>
    <TextView
        android:id="@+id/text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:layout_gravity="left|center_vertical" 
        android:textSize="20dip" 
        android:layout_marginLeft="10dip"/>

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:focusable="false"/>

</LinearLayout> 
```

主要的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:layout_weight="1"/>
<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:text="Clear Cache"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T07:37:06.910

在 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:layout_marginTop="5dp">

    <RelativeLayout
        android:layout_width="450dp" 
        android:layout_height="25dp"
        android:layout_marginLeft="7dp"
        android:layout_marginTop="3dp">

     <ListView
android:id="@+id/list"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
android:layout_weight="1"/>
     </RelativeLayout>

     <RelativeLayout
        android:layout_width="450dp" 
        android:layout_height="25dp"
        android:layout_marginLeft="7dp"
        android:layout_marginTop="3dp">

     <Button
android:id="@+id/button1"
android:layout_width="fill_parent"
android:layout_height="wrap_content" 
android:text="Clear Cache"/>
     </RelativeLayout>

</LinearLayout> 
```

希望这可以帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T07:40:16.097

在填充列表的过程中，您可以设置 a`OnItemClickListener`并将复选框更改为`checked`。尝试这样的事情：

```
list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                ListItem item = (ListItem) adapter.getItem(position);
                if(item.checkbox.isChecked()) 
                      item.checkbox.setChecked(false);
                else
                      item.checkbox.setChecked(true);
            }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T08:21:08.083

1.  为您的项目布局容器创建一个`CheckableLinearLayout`或，`CheckableRelativeLayout``ListView`
2.  将列表视图的模式设置为“multipleChoice”

在以下链接中找到更多详细信息：

*   [http://tokudu.com/2010/android-checkable-linear-layout/](http://tokudu.com/2010/android-checkable-linear-layout/)
*   [http://www.marvinlabs.com/2010/10/custom-listview-ability-check-items/](http://www.marvinlabs.com/2010/10/custom-listview-ability-check-items/)

# sparql - 我可以使用推理和 TDB 配置 Jena Fuseki 吗？

> ID：10468940
> 
> 赞同：2
> 
> 时间：2012-05-06T07:33:35.660
> 
> 标签：sparql, jena, inference, rdfs, rdfstore

我想用 TDB 支持的推理模型配置 Fuseki。

我已经能够使用内存模型配置它，但不能使用可以更新三元组的 TDB 模型。

我正在使用以下汇编程序描述：

```
@prefix tdb: <http://jena.hpl.hp.com/2008/tdb#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix ja: <http://jena.hpl.hp.com/2005/11/Assembler#> .
@prefix tdb: <http://jena.hpl.hp.com/2008/tdb#> .

[] ja:loadClass "com.hp.hpl.jena.tdb.TDB" .
tdb:DatasetTDB rdfs:subClassOf ja:RDFDataset .
tdb:GraphTDB rdfs:subClassOf ja:Model .

<#dataset> rdf:type ja:RDFDataset ;
       ja:defaultGraph <#infModel> .

<#infModel> a ja:InfModel ;
     ja:baseModel <#tdbGraph>; 
     ja:reasoner 
          [ja:reasonerURL <http://jena.hpl.hp.com/2003/RDFSExptRuleReasoner>].

<#tdbGraph> rdf:type tdb:GraphTDB ;
    tdb:location "DB" ;
. 
```

它工作正常，它能够进行 RDFS 推理，甚至插入新的三元组。但是，一旦我停止并重新启动服务器，就会引发以下异常：

```
Error 500: Invalid id node for subject (null node): ([000000000000001D], [00000000000000AF], [000000000000003D]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:13:40.917

```
<#tdbGraph> rdf:type tdb:GraphTDB ;
    tdb:location "DB" ;
. 
```

在第二条语句之后去掉分号并以句号结束，即：

```
<#tdbGraph> rdf:type tdb:GraphTDB ;
        tdb:location "DB". 
```

# visual-studio-2010 - LNK1000：IMAGE::BuildImage 期间的内部错误

> ID：10468946
> 
> 赞同：8
> 
> 时间：2012-05-06T07:35:14.433
> 
> 标签：visual-studio-2010, visual-c++, hyperlink

我在 VC++ 2010 中的链接有问题。当我在调试模式下编译时没问题，但在发布模式下，我经常收到错误“LNK1000：IMAGE::BuildImage 期间的内部错误”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T17:01:31.550

一旦我将“整个程序优化”选项从“使用链接时间代码生成”更改为“配置文件引导优化工具”，它就开始工作了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-10T08:07:34.397

我遇到了同样的错误。我的问题是我正在“玩”配置属性（项目属性->配置属性->常规）

项目的“配置类型”是“动态库 (.dll)”，但“目标扩展”是 .lib 而不是 .dll。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-20T12:37:00.280

**2020 年 4 月更新**

MSBuild 和 Docker for Windows 的问题已在 MSBuild 16.5（[源代码](https://developercommunity.visualstudio.com/content/problem/145618/msbuild-linkexe-hangs-inside-container.html?childToView=806109#comment-806109)）中修复，所以如果仍然看到 - 只需将 MSVS/MSBuild 更新到最新版本

**原始答案**

```
Check for working C compiler: C:/BuildTools/VC/Tools/MSVC/14.24.28314/bin/Hostx64/x64/cl.exe -- broken
CMake Error at C:/Program Files/CMake/share/cmake-3.16/Modules/CMakeTestCCompiler.cmake:60 (message):
  The C compiler

    "C:/BuildTools/VC/Tools/MSVC/14.24.28314/bin/Hostx64/x64/cl.exe"

  is not able to compile a simple test program.
......

LINK : fatal error LNK1000: Internal error during IMAGE::BuildImage.FinalPhase 
```

当我在已**安装**的Docker 卷中运行`cmake`Docker for Windows时遇到此错误。解决方案是将工作区复制到本地 Docker 文件系统。

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-03T03:21:01.057

在vs2019中对我有用：<br /> Project->Property pages->Optimization->Link Time Code Generation，从“Use Link Time Code Generation”改为“Profile Guided Optimization-Instrument”**

# php - 使用 jquery 和 php 从 mysql 加载数据

> ID：10468947
> 
> 赞同：0
> 
> 时间：2012-05-06T07:35:18.140
> 
> 标签：php, jquery, mysql

我有一个下拉列表（ddlAccount），我可以从中选择一个项目并在 test.php 中进行 db 查询以检索相应的数据，然后输出带有返回数据的输入元素。

这是我的 JavaScript 代码：

```
function load1(){
$('#divAccountNum').load('test.php?accountInfo=' + document.getElementById('ddlAccount').value , '' ,function() {
alert('Load was performed.')}); 
} 
```

当我更改下拉列表项时调用的 load1 函数，它获取所选选项的值并将其发送到 test.php 的一个名为“accountInfo”的参数中。

我的html：

```
 <select name="ddlAccount" id="ddlAccount" onchange="load1();">
    <option value="1"> Account1</option>
    <option value="2"> Account2</option>
    <option value="3"> Account3</option>
  </select>

  <div id="divAccountNum" >
  </div> 
```

和 test.php ：

```
if($_GET['accountInfo'])
{
    $account = $accountDAO->load($_GET['accountInfo']); //mysql query
        //print an input holding account number as its value
    echo "<input type='text' name='txtAccountNum' id='txtAccountNum' value='".$account->accountnumber."'/>"; 
} 
```

问题是当我选择一个选项时没有发生任何事情（没有出现在 div (divAccountNum) 中）有什么建议吗？提前致谢。

**编辑：** 我使用了@thecodeparadox 的代码，它可以工作，我找到了解决我在下面评论中提到的问题的方法，即从下拉列表中选择一个项目时，它会显示输入元素中的值并加载再次形成。解决方案是： [jQuery Ajax 返回整个页面](https://stackoverflow.com/questions/2586217/jquery-ajax-returns-the-whole-page) 所以我的 jquery 代码现在看起来像：

```
$(document).ready(function(){
  $('#ddlAccount').on('change', function() {  
$.get('testJquery.php?accountInfo=' + $(this).val(), function(accountNum) {
    //console.log(accountNum);
    $('input#txtAccountNum').val(accountNum);
   });
}); 
```

和 testJquery.php ：

```
if($_GET['accountInfo'])
{
    $account = $accountDAO->load($_GET['accountInfo']);
    $accountNum = $account->accountnumber;
    echo $accountNum;
} 
```

最后我在 id="txtAccountNum" 的 divAccountNum 中添加了输入元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T07:46:16.123

尽管您没有提供有关问题的足够信息，但您可以尝试以下操作：

```
function load1(){
  $('#ddlAccount').on('change', function() {  
    $.get('test.php?accountInfo=' + $(this).val(), function(response) {
       $('div#divAccountNum').html(response);
    }, 'html');
  });
} 
```

**笔记：**

1.  `$('#ddlAccount').on('change',`下拉更改时触发
2.  `$.get('test.php?accountInfo=' + $(this).val()..``test.php`使用从下拉列表中选择的值发送 get(ajax) 请求
3.  第二个参数回调函数中的参数是来自服务器的`response`响应`$.get()`
4.  `'html'`作为您返回的数据类型的第三个参数`$.get()`，当您返回一个 html 时，它就是`html`.

欲了解更多信息，请阅读：

**[改变（）](http://api.jquery.com/change/)**

**[$.get()](http://api.jquery.com/jQuery.get/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T07:48:00.847

要从选择输入中获取选定的选项值，请使用：

```
$('#ddlAccount option:selected').val() 
```

# c++ - C++ 在处理视频数据和视频设备方面的优势

> ID：10468948
> 
> 赞同：0
> 
> 时间：2012-05-06T07:35:35.103
> 
> 标签：c++, detection, face-detection

在处理视频数据和视频设备（开发对象检测程序）方面，C++ 与其他语言相比有哪些优势。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T07:47:57.930

对于对象检测，您可以使用 python、matlab、java 和 c++。如果您需要大幅提高速度，则必须使用 c++（在大多数情况下，C++ 是最快的）。您还可以通过 c++ 轻松使用 OpenCv 进行面部和对象检测。

# c# - 从 Web 服务检索表到 wp7 页面

> ID：10468950
> 
> 赞同：0
> 
> 时间：2012-05-06T07:36:03.653
> 
> 标签：c#, windows-phone-7

有什么方法可以将表格从 Web 服务检索到 wp7 应用程序页面？我只是想要一个易于使用的东西，而不是每次获取数据时都制作一个表格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:44:01.663

在 MSDN 上查看 System.Xml 命名空间。它包含许多可用的类。您应该使用 XmlReader 或类似的东西将其加载到数组或泛型集合中。希望这会有所帮助，因为有点不清楚的问题。

**编辑：**

这是我为将示例数据加载到通用集合所做的代码：

样本数据：

```
<?xml version="1.0" encoding="utf-8" ?>
 <studentPunishmentsTables>
  <studentPunishmentsTable>
    <fromSemester/>
    <fromSemesterDesc/>
    <issueDate>01/04/2012</issueDate>
    <note/>
    <penalty>Course Failure</penalty>
    <semester>311</semester>
    <semesterDesc>First Semester 31/32</semesterDesc>
    <toSemester/>
    <toSemesterDesc/>
  </studentPunishmentsTable>
  <studentPunishmentsTable>
    <fromSemester/>
    <fromSemesterDesc/>
    <issueDate>01/04/2012</issueDate>
    <note/>
    <penalty>Semester Failure</penalty>
    <semester>311</semester>
    <semesterDesc>First Semester 31/32</semesterDesc>
    <toSemester/>
    <toSemesterDesc/>
  </studentPunishmentsTable>
</studentPunishmentsTables> 
```

代码：

```
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.IO;

namespace XMLStudent
{
    class Program
    {
        static void Main(string[] args)
        {
            XmlDocument doc = new XmlDocument();
            doc.Load("st.xml");
            List<StudentPunishment> sp = new List<StudentPunishment>();
            foreach (XmlNode nod in doc.SelectNodes(@"studentPunishmentsTables/studentPunishmentsTable"))
            {
                StudentPunishment s = new StudentPunishment();
                s.FromSemester = nod.ChildNodes[0].InnerText;
                s.FromSemesterDesc = nod.ChildNodes[1].InnerText;
                s.IssueDate = nod.ChildNodes[2].InnerText;
                s.Note = nod.ChildNodes[3].InnerText;
                s.Penalty = nod.ChildNodes[4].InnerText;
                s.Semester = nod.ChildNodes[5].InnerText;
                s.SemesterDesc = nod.ChildNodes[6].InnerText;
                s.ToSemester = nod.ChildNodes[7].InnerText;
                s.ToSemesterDesc = nod.ChildNodes[8].InnerText;
                sp.Add(s);
            }
            Console.WriteLine(sp[0].IssueDate);
            Console.Read();
        }
    }
    class StudentPunishment
    {
        public string FromSemester { get; set; }
        public string FromSemesterDesc { get; set; }
        public string IssueDate { get; set; }
        public string Note { get; set; }
        public string Penalty { get; set; }
        public string Semester { get; set; }
        public string SemesterDesc { get; set; }
        public string ToSemester { get; set; }
        public string ToSemesterDesc { get; set; }
    }
} 
```

所以。此代码使用示例数据加载 XMLDocument，并将每个 studentPunishmentsTable 的数据选择到 StudentPunishment 类的新对象中。有用于保存该数据的属性。完成所有操作并将学生惩罚的对象添加到通用集合（“列表”）中后，代码将尝试显示集合中第一个对象的日期。你可以测试自己，它对我有用。

# android - Android 游戏在不同的 Android 手机上的工作方式不同

> ID：10468951
> 
> 赞同：2
> 
> 时间：2012-05-06T07:36:14.373
> 
> 标签：android, sprite, accelerometer

我最近为 Android 2.3.3 开发了一款游戏，奇怪的是我**在不同的手机中发现了一些奇怪的行为**，

例如

1.  **分解为 4x4=16 图像的爆炸精灵（256x256 像素），在Samsung Galaxy Ace 2.3.3 和 Samsung Galaxy Y, 2.3.5**中显示为 2x2 图像时，

2.  此外，加速度计在索尼 Xperia 2.3.3 和三星 Galaxy Ace 中以随意的形式工作。要么它太慢（并且在 3-4 秒间隔后采取触摸手势）并且 Android 操作系统会抛出一个警告框，说应用程序不是响应，否则太快了。

奇怪的是，该**游戏在三星 S2 上完美运行**，就像在**VirtualBox**上运行一样。

请帮帮我，因为这是我的大学项目，如果存在这样的奇怪问题，我什至无法将其投放市场！！

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T20:32:18.690

我想我对图形问题有同样的经历：

从您的代码中，我猜您可能已经根据您在图像编辑器中看到的图像高度/宽度预先计算了“width_explosion”和“height_explosion”，并在不同的设备上使用了相同的值。

您列出的设备有两个不同的 DPI 值，如 Android 所知：240，或 MDPI (Galaxy S2) 和 120，或 LDPI (Galaxy Ace 和 Galaxy Y)。请注意，Galaxy S2 的 DPI 正好是 Ace 和 Y 的两倍。

Android 通过帮助应用程序作者处理图像来方便他们。当从资源中读取图像`getDrawable`并准备好在屏幕上渲染时，Android会根据 160DPI**调整**图像的大小，以便在具有不同像素密度的屏幕上使用*标尺测量它们的长度相同。*例如，如果一个 128x128 像素的图像在 Galaxy S2 上是 2 厘米长和 2 厘米宽，那么在 Galaxy Ace 上它应该是 2 厘米长和 2 厘米宽。然而，为了覆盖 Galaxy S2 上更多的像素，在 Galaxy S2 上绘图时，它的大小调整为 192 x 192 像素，因为它的 DPI 正如 Android 系统所知是 240，是 ADP1（HTC Dream）的 DPI 的 1.5 倍。同样，在 Galaxy Ace 或 Galaxy Y 上，图像将被调整为 96 x 96。

不幸的是，中的源矩形`canvas.drawImage`是指*调整大小*的位图中的像素数。这意味着代码示例中使用的相同源矩形在 Galaxy Y 上覆盖的像素是 Galaxy S2 上的 4 倍。我猜你在这个问题中描述的是“同一个精灵文件看起来像是在低 DPI 设备上被分割为 2x2，但它应该被分割为 4x4”。

以下示例说明了当我尝试使用具有不同 DPI 的设备复制您的问题时会发生什么。我不能发布图片，所以我把图片放在这里（这是我的博客）：

[http://edgeofmap.com/blog/2013/05/android-bitmap-over-devices-of-different-dpis/](http://edgeofmap.com/blog/2013/05/android-bitmap-over-devices-of-different-dpis/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T07:41:40.713

不确定如何处理图形问题，但对于加速度计，每个设备的行为不同。在您的 onSensorChanged() 中使用`event.sensor.getMaximumRange()`以获得最大值并将您的操作基于该值或该值的百分比。

# mysql - 如何选择每列不匹配值的所有行？

> ID：10468956
> 
> 赞同：3
> 
> 时间：2012-05-06T07:37:34.257
> 
> 标签：mysql, sql

我需要选择一个不等于某些语句的值本身。

就像是

```
SELECT * FROM table WHERE * != "qwerty" 
```

但不喜欢

```
SELECT * FROM table WHERE column_name != "qwerty" 
```

我怎样才能做到这一点？

我有一张像

```
 1   2   3   4   5   6   7   8   9   10   11   ...   ...
    1  a   b   c   d   t   h   v   h   d   t    y    ...   ...
    2  g   t   5   s   h   r   q   q   q   q    q    ...   ...
   ... ...
   ... ... 
```

我需要选择每个不等于“q”的值

我可以做某事

```
SELECT * WHERE 1 != q AND 2 != q AND 3 != q ... 
```

但我有太多列

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T07:42:24.420

尝试这个：

```
SELECT * FROM table WHERE "qwerty" NOT IN (column1,column2,column3,column4,etc) 
```

另一个例子：

```
-- this...
SELECT 'HELLO!' FROM tblx 
WHERE 'JOHN' NOT IN (col1,col2,col3);

-- ...is semantically equivalent to:
SELECT 'HELLO!' FROM tblx 
WHERE 'JOHN' <> col1
  AND 'JOHN' <> col2
  AND 'JOHN' <> col3; 
```

数据源：

```
create table tblx(col1 text,col2 text,col3 text);
 insert into tblx values
('GEORGE','PAUL','RINGO'), 
('GEORGE','JOHN','RINGO'); 
```

* * *

如果您使用的是 Postgresql，则可以为列创建快捷方式：

```
select * 
from
(
select 

   row(tblx.*)::text AS colsAsText,

   translate(row(tblx.*)::text,'()','{}')::text[]
      as colsAsArray

from tblx
) x
where 'JOHN' <> ALL(colsAsArray) 
```

现场测试：[http ://www.sqlfiddle.com/#!1/8de35/2](http://www.sqlfiddle.com/#!1/8de35/2)

Postgres 可以从数组中生成行，`'JOHN' <> ALL`相当于::

```
where 'JOHN' NOT IN (SELECT unnest(colsAsArray)) 
```

现场测试：[http ://www.sqlfiddle.com/#!1/8de35/6](http://www.sqlfiddle.com/#!1/8de35/6)

* * *

如果上面真的是你想要实现的，如果你使用全文搜索，搜索会好很多

*   Postgresql：[http ://www.postgresql.org/docs/9.1/static/textsearch.html](http://www.postgresql.org/docs/9.1/static/textsearch.html)
*   Sql 服务器：http: [//msdn.microsoft.com/en-us/library/ms142571.aspx](http://msdn.microsoft.com/en-us/library/ms142571.aspx)
*   MySQL：[http ://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

* * *

* * *

对于 MySQL：

```
select 
  @columns := group_concat(column_name)
from information_schema.columns
where table_name = 'tblx'
group by table_name;

set @dynStmt := 
   concat('select * from tblx where ? NOT IN (',  @columns ,')');

select @dynStmt;

prepare stmt from @dynStmt;

set @filter := 'JOHN';

execute stmt using @filter;

deallocate prepare stmt; 
```

现场测试：[http ://www.sqlfiddle.com/#!2/8de35/49](http://www.sqlfiddle.com/#!2/8de35/49)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T08:21:58.700

这将为您提供所需的 where 表达式。

```
select GROUP_CONCAT(COLUMN_NAME SEPARATOR ' != ''q'' AND ') as Exp
from INFORMATION_SCHEMA.COLUMNS
where TABLE_NAME = 'YourTable' 
```

也许您可以在一些动态 SQL 中使用它，或者将字符串复制并粘贴到您的实际查询中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T08:08:13.333

也许你可以试试[SHOW COLUMNS](http://dev.mysql.com/doc/refman/5.0/en/show-columns.html)：

```
SHOW COLUMNS FROM SomeTable 
```

这将返回所有列信息。

例子：

```
 [Field] => id
    [Type] => int(7)
    [Null] =>  
    [Key] => PRI
    [Default] =>
    [Extra] => auto_increment 
```

然后，您可以使用**Michael Buen**的答案来获得您想要的值：

```
SELECT * FROM table WHERE "qwerty" NOT IN (columnName1,columnName2,columnName3,columnName4,etc) 
```

# emacs - 自动折叠 emacs 中的多行注释

> ID：10468958
> 
> 赞同：3
> 
> 时间：2012-05-06T07:38:02.917
> 
> 标签：emacs, comments, long-integer, lines, folding

在我的 .emacs 配置中，我有以下内容：

```
(defun fold-long-comment-lines ()
"This functions allows us to fold long comment lines
 automatically in programming modes. Quite handy."
 (auto-fill-mode 1)
 (set (make-local-variable 'fill-no-break-predicate)
     (lambda ()
         (not (eq (get-text-property (point) 'face)
                'font-lock-comment-face))))) 
```

以上内容作为“c-mode-common-hook”的一部分被调用，并自动正确地提供折叠长注释行。

然而，上面的事情是不分青红皂白的，无论我是使用单行注释，例如描述结构字段，还是使用多行注释描述一些复杂的代码。

所以，基本问题是，只有当它是多行注释时，我怎样才能自动折叠长注释行？

谢谢阿努帕姆

编辑1：多行评论解释当我说“多行评论”时，它基本上意味着这样的评论：

```
/*
 * this following piece of code does something totally funky with client
 * state, but it is ok.
*/
code follows 
```

相应地，单行注释将是这样的

```
struct foo {
   char buf_state : 3; // client protocol state 
   char buf_value : 5; // some value
} 
```

上面的 elisp 代码，尽职尽责地折叠了这两个注释行。我只想折叠前者，而不是后者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:48:08.313

如果您只希望它影响`auto-fill-mode`而不是一般填充（例如，当您点击时不`M-q`），那么您的代码可以通过设置替换`comment-auto-fill-only-comments`。至于让它仅适用于“多行注释”，我认为您首先必须解释它们之间的区别。你是说你只想在评论已经跨越多行时自动填充，还是评论的其他一些特征可以让 Emacs 弄清楚当前只跨越单行的评论可以传播多行。

您可以尝试以下方法：

```
(set (make-local-variable 'fill-no-break-predicate)
     (lambda ()
       (let ((ppss (syntax-ppss)))
         (or (null (nth 4 ppss)) ;; Not inside a comment.
             (save-excursion
               (goto-char (nth 8 ppss))
               (skip-chars-backward " \t")
               (not (bolp))))))) ;; Comment doesn't start at indentation. 
```

# c# - IPV6 到国家

> ID：10468961
> 
> 赞同：2
> 
> 时间：2012-05-06T07:39:59.257
> 
> 标签：c#, geolocation, ipv6

IP版本6有一个简单的IP到国家数据库 [http://www.ip2location.com/free/ipv6](http://www.ip2location.com/free/ipv6)

```
CREATE TABLE `ip2location_ipv6`(
    `ip_from` DOUBLE,
    `ip_to` DOUBLE,
    `ipv6_from` VARCHAR(40),
    `ipv6_to` VARCHAR(40),
    `country_code` CHAR(2),
    `country_name` VARCHAR(64),
    INDEX `idx_ip_from` (`ip_from`),
    INDEX `idx_ip_to` (`ip_to`),
    INDEX `idx_ip_from_to` (`ip_from`, `ip_to`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

此数据库的示例行值：

```
"42540528726795050063891204319802818560", "42540528806023212578155541913346768895", "2001:200::", "2001:200:ffff:ffff:ffff:ffff:ffff:ffff", "JP", "Japan" 
```

现在我想获取 IP 地址的国家名称。这是我的 SQL：

```
SQL = "SELECT country_code FROM ip2location_ipv6 WHERE " & IPNumber & " BETWEEN ip_from AND ip_to" 
```

在这个 sql 中有一个名为 IPNumber 的参数。在 IPV4 中，我可以轻松计算 IPNumber。

```
IPV4: a.b.c.d  => IPNumber = a*(256*256*256) + b*(256*256) + C*(256) + d 
```

或者我可以做到

```
IPNumber = (long)(uint)IPAddress.NetworkToHostOrder((int)IPAddress.Parse("IP_address_Version_4").Address); 
```

但是我在 C# 中没有针对 IPV6 的任何解决方案。例如它想在这个数据库中找到这个IP的国家名称“2001:DB8::dcaf:BAD”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:46:47.737

要将二进制转换为标准 IPv6 表示法：

将`IPAddress`类与[`public IPAddress(byte[] address)`构造函数](http://msdn.microsoft.com/en-us/library/t4k07yby.aspx)一起使用。

在构造函数中传入 IPv6 地址的字节数组，然后使用该`.ToString()`方法以[标准表示法打印它](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.tostring.aspx)。

* * *

要将标准 IPv6 表示法转换为二进制：

创建一个新`IPAddress`对象，并用于[`IPAddress.TryParse(string standardNotation)`](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.tryparse.aspx)将标准符号字符串转换为二进制值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:39:01.833

您可以使用最新版本的 mysql 5.6 它已经支持 IPv6 和命令 INET6_ATON()、INET6_NTOA()。

你的桌子将是 -

```
CREATE TABLE `ip2location_ipv6`(
    `ip_from` int(11) unsigned,
    `ip_to` int(11) unsigned,
    `ipv6_from` varbinary(16),
    `ipv6_to` varbinary(16),
    `country_code` CHAR(2),
    `country_name` VARCHAR(64),
    INDEX `idx_ip_from` (`ip_from`),
    INDEX `idx_ip_to` (`ip_to`),
    INDEX `idx_ip_from_to` (`ip_from`, `ip_to`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

# c# - MachineToApplication 超出应用程序级别 - 此错误是什么意思？

> ID：10468967
> 
> 赞同：3
> 
> 时间：2012-05-06T07:40:56.817
> 
> 标签：c#, asp.net

当这个错误提示我的屏幕时我该怎么办

在 VS2008 速成版中

1.  C:\Users\ami\Desktop\MyAddressBookasd\MyAddressBook\UpdateTheRecord.aspx：ASP.NET 运行时错误：在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

![在此处输入图像描述](../Images/8c5613d812a00dce120870b67eaa3c7e.png)

在网络浏览器中

2.  说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：在应用程序级别之外使用注册为 Definition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

源错误：

第 36 行：ASP.NET 识别传入用户。第 37 行：--> 第 38 行：第 39 行：部分启用配置

![在此处输入图像描述](../Images/2fa2fea3b2662e104fe078c481941d32.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T07:52:12.653

您似乎尚未将网站的虚拟目录配置为 IIS 中的应用程序。如果您手动创建虚拟目录且未将其配置为应用程序，则您将无法浏览该应用程序并可能出现上述错误。

请访问此链接以解决它。 [asp.net 中的 allowDefinition='MachineToApplication' 超出应用程序级别](http://geekswithblogs.net/ranganh/archive/2005/04/25/37609.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-02T13:19:31.953

这可能是许多可能的原因之一

1.  您可能在主文件夹中添加了一个备份文件夹。如果是，请将其删除。
2.  确保您已打开正确的根文件夹，以防您使用 Visual Studio 运行项目
3.  确保项目中没有保存任何 web.config 文件的副本。

希望它有所帮助。如果您仍然遇到同样的问题，请告诉我:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T01:17:43.377

将 IIS 网站中的虚拟/pshysicial 目录转换为应用程序。转换为应用程序时，请解决您的错误。

# r - 用字符后缀而不是数字后缀将宽改成长

> ID：10468969
> 
> 赞同：15
> 
> 时间：2012-05-06T07:41:38.680
> 
> 标签：r, reshape

受到@gsk3 关于重塑数据的问题[的评论的启发，我开始对变量名称具有字符后缀而不是数字后缀的数据重塑进行一些实验。](https://stackoverflow.com/questions/10161807/reshape-in-the-middle/10170630#comment13051721_10170630)

例如，我将从[UCLA ATS Stata 学习网页](https://stats.idre.ucla.edu/stata/modules/reshaping-data-wide-to-long/)`dadmomw`之一加载数据集（请参阅网页上的“示例 4”）。

数据集如下所示：

```
library(foreign)
dadmom <- read.dta("https://stats.idre.ucla.edu/stat/stata/modules/dadmomw.dat")
dadmom
#   famid named  incd namem  incm
# 1     1  Bill 30000  Bess 15000
# 2     2   Art 22000   Amy 18000
# 3     3  Paul 25000   Pat 50000 
```

当试图从这种宽格式重塑为长格式时，我遇到了一个问题。这是我为重塑数据所做的工作。

```
reshape(dadmom, direction="long", idvar=1, varying=2:5, 
        sep="", v.names=c("name", "inc"), timevar="dadmom",
        times=c("d", "m"))
#     famid dadmom  name  inc
# 1.d     1      d 30000 Bill
# 2.d     2      d 22000  Art
# 3.d     3      d 25000 Paul
# 1.m     1      m 15000 Bess
# 2.m     2      m 18000  Amy
# 3.m     3      m 50000  Pat 
```

注意“name”和“inc”的交换列名；更改`v.names`为`c("inc", "name")`并不能解决问题。

`reshape`希望以相当标准的方式命名列似乎非常挑剔。例如，如果我首先重命名列，我可以正确（并且轻松地）重塑数据：

```
dadmom2 <- dadmom # Just so we can continue experimenting with the original data
# Change the names of the last four variables to include a "."
names(dadmom2)[2:5] <- gsub("(d$|m$)", "\\.\\1", names(dadmom2)[2:5])
reshape(dadmom2, direction="long", idvar=1, varying=2:5, 
        timevar="dadmom")
#     famid dadmom name   inc
# 1.d     1      d Bill 30000
# 2.d     2      d  Art 22000
# 3.d     3      d Paul 25000
# 1.m     1      m Bess 15000
# 2.m     2      m  Amy 18000
# 3.m     3      m  Pat 50000 
```

我的问题是：

1.  为什么 R 在我提供的示例中交换列？
2.  在重塑之前，我可以在`reshape`不更改变量名称的情况下使用 base R 得到这个结果吗？
3.  是否有其他方法可以考虑代替`reshape`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T12:19:09.410

这有效（指定改变哪些列与谁一起使用）：

```
reshape(dadmom, direction="long",  varying=list(c(2, 4), c(3, 5)), 
        sep="", v.names=c("name", "inc"), timevar="dadmom",
        times=c("d", "m")) 
```

所以你实际上已经在这里嵌套了重复的措施；妈妈和爸爸的名字和公司。因为你有不止一个系列的重复测量，你必须提供一个`list`变量来告诉`reshape`哪个组堆叠在另一个组上。

所以解决这个问题的两种方法是像我一样提供一个列表，或者像你一样按照 R 野兽喜欢它们的方式重命名列。

有关此内容的更多信息，请参阅我最近的博客`reshape`（特别是第二个链接涉及此内容）：

[重塑（第一部分）](http://trinkerrstuff.wordpress.com/2012/05/03/reshape-from-base-explained-part-i/)

[重塑（第二部分）](http://trinkerrstuff.wordpress.com/2012/05/06/reshape-from-base-explained-part-ii/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-23T02:47:43.767

尽管这个问题是专门针对基础 R 的，但了解其他有助于实现相同类型结果的方法很有用。

一种替代方法`reshape`是`merged.stack`使用“dplyr”和“tidry”的组合，如下所示：

```
dadmom %>%
  gather(variable, value, -famid) %>%               ## Make the entire dataset long
  separate(variable, into = c("var", "time"),       ## Split "variable" column into two...
           sep = "(?<=name|inc)", perl = TRUE) %>%  ## ... using regex to split the values
  spread(var, value, convert = TRUE)                ## Make result wide, converting type
#   famid time   inc name
# 1     1    d 30000 Bill
# 2     1    m 15000 Bess
# 3     2    d 22000  Art
# 4     2    m 18000  Amy
# 5     3    d 25000 Paul
# 6     3    m 50000  Pat 
```

另一种选择是使用`melt`“data.table”，如下所示：

```
library(data.table)
melt(as.data.table(dadmom),             ## melt here requres a data.table 
     measure = patterns("name", "inc"), ## identify columns by patterns
     value.name = c("name", "inc"))[    ## specify the resulting variable names
       ## melt creates a numeric "variable" value. Replace with factored labels
       , variable := factor(variable, labels = c("d", "m"))][]
#    famid variable name   inc
# 1:     1        d Bill 30000
# 2:     2        d  Art 22000
# 3:     3        d Paul 25000
# 4:     1        m Bess 15000
# 5:     2        m  Amy 18000
# 6:     3        m  Pat 50000 
```

这些方法与 相比如何`merged.stack`？

*   这两个软件包都得到了更好的支持。他们比我更广泛地更新和测试他们的代码。
*   `melt`正在快速燃烧。
*   Hadleyverse 方法实际上更慢（在我的许多测试中，甚至比基本 R 的更慢`reshape`）可能是因为必须使数据变长，然后变宽，然后执行类型转换。但是，一些用户喜欢它的逐步方法。
*   Hadleyverse 方法可能会产生一些意想不到的后果，因为需要在使数据变宽之前使数据变长。这会强制所有度量列被强制转换为相同的类型（通常是“字符”），如果它们的类型不同的话。
*   两者都没有`merged.stack`. 只需查看获得结果所需的代码；-)

`merged.stack`但是，可能会从简化的更新中受益，类似于[此功能](https://gist.github.com/mrdwab/ceded54b616bdc61cb0f)

```
ReshapeLong_ <- function(indt, stubs, sep = NULL) {
  if (!is.data.table(indt)) indt <- as.data.table(indt)
  mv <- lapply(stubs, function(y) grep(sprintf("^%s", y), names(indt)))
  levs <- unique(gsub(paste(stubs, collapse="|"), "", names(indt)[unlist(mv)]))
  if (!is.null(sep)) levs <- gsub(sprintf("^%s", sep), "", levs, fixed = TRUE)
  melt(indt, measure = mv, value.name = stubs)[
    , variable := factor(variable, labels = levs)][]
} 
```

然后可以用作：

```
ReshapeLong_(dadmom, stubs = c("name", "inc")) 
```

* * *

这些方法与基础 R 相比如何`reshape`？

*   主要区别在于`reshape`无法处理不平衡的面板数据集。例如，在下面的测试中，请参见“mydf2”而不是“mydf”。

* * *

### 测试用例

这是一些示例数据。“mydf”是平衡的。“mydf2”不平衡。

```
set.seed(1)
x <- 10000
mydf <- mydf2 <- data.frame(
  id_1 = 1:x, id_2 = c("A", "B"), varAa = sample(letters, x, TRUE), 
  varAb = sample(letters, x, TRUE), varAc = sample(letters, x, TRUE),
  varBa = sample(10, x, TRUE), varBb = sample(10, x, TRUE), 
  varBc = sample(10, x, TRUE), varCa = rnorm(x), varCb = rnorm(x), 
  varCc = rnorm(x), varDa = rnorm(x), varDb = rnorm(x), varDc = rnorm(x))

mydf2 <- mydf2[-c(9, 14)] ## Make data unbalanced 
```

以下是一些要测试的功能：

```
f1 <- function(mydf) {
  mydf %>%
    gather(variable, value, starts_with("var")) %>%
    separate(variable, into = c("var", "time"),
             sep = "(?<=varA|varB|varC|varD)", perl = TRUE) %>%
    spread(var, value, convert = TRUE) 
}

f2 <- function(mydf) {
  melt(as.data.table(mydf),
       measure = patterns(paste0("var", c("A", "B", "C", "D"))),
       value.name = paste0("var", c("A", "B", "C", "D")))[
         , variable := factor(variable, labels = c("a", "b", "c"))][]
}

f3 <- function(mydf) {
  merged.stack(mydf, var.stubs = paste0("var", c("A", "B", "C", "D")), sep = "var.stubs")
}

## Won't run with "mydf2". Should run with "mydf"
f4 <- function(mydf) {
  reshape(mydf, direction = "long", 
          varying = lapply(c("varA", "varB", "varC", "varD"), 
                           function(x) grep(x, names(mydf))), 
          sep = "", v.names = paste0("var", c("A", "B", "C", "D")), 
          timevar="time", times = c("a", "b", "c"))
} 
```

测试性能：

```
library(microbenchmark)
microbenchmark(f1(mydf), f2(mydf), f3(mydf), f4(mydf))
# Unit: milliseconds
#      expr        min         lq       mean     median         uq       max neval
#  f1(mydf) 463.006547 492.073086 528.533319 514.189548 538.910756 867.93356   100
#  f2(mydf)   3.737321   4.108376   6.674066   4.332391   4.761681  47.71142   100
#  f3(mydf)  60.211254  64.766770  86.812077  87.040087  92.841747 262.89409   100
#  f4(mydf)  40.596455  43.753431  61.006337  48.963145  69.983623 230.48449   100 
```

观察：

*   Base R`reshape`将无法处理重塑“mydf2”。
*   “dplyr” + “tidyr” 方法会破坏生成的“varB”、“varC”和“varD”中的结果，因为值将被强制转换为字符。
*   正如基准所显示的，`reshape`给出了合理的性能。

[***注意***：由于发布我最后一个答案的时间差异和方法的差异，我想我会分享这个作为一个新的答案。]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-18T17:07:11.970

`merged.stack`我的“splitstackshape”通过使用以下`sep = "var.stubs"`构造来处理这个问题：

```
library(splitstackshape)
merged.stack(dadmom, var.stubs = c("inc", "name"), sep = "var.stubs")
#    famid .time_1   inc name
# 1:     1       d 30000 Bill
# 2:     1       m 15000 Bess
# 3:     2       d 22000  Art
# 4:     2       m 18000  Amy
# 5:     3       d 25000 Paul
# 6:     3       m 50000  Pat 
```

请注意，由于在堆叠的变量中没有真正的分隔符，我们可以`var.stubs`从名称中删除 以创建“时间”变量。using`sep = "var.stubs"`相当于做`sep = "inc|name"`.

这是有效的，因为“.time_1”是通过从列名中删除“var.stubs”后去掉剩下的内容来创建的。

# android - 用于“淡入”图像的 Alpha 动画？

> ID：10468971
> 
> 赞同：0
> 
> 时间：2012-05-06T07:41:52.930
> 
> 标签：android

我有一个我想慢慢淡入的图像；我玩过标准动画结构，但它似乎从来没有工作过。

（图片代码：）

```
@Override
    public void draw(Canvas c, Layer layer) {
        if ( layer == Layer.BACKGROUND ) {              

            Animation a = new AlphaAnimation(1.00f, 0.00f);
            a.setDuration(4000);

            instructions.startAnimation(a);

            location.left = (view.getWidth() - instructions.getMinimumWidth() ) /2;
            location.right = location.left + instructions.getMinimumWidth();
            location.top = view.getHeight() / 2;
            location.bottom = location.top + instructions.getMinimumHeight();
            instructions.setBounds(location);
            instructions.draw(c);
        }
        //explosions.draw(c, layer);
    }
}; 
```

...“对于 BitmapDrawable 类型，startAnimation 是未定义的，”它说。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:08:38.060

`startAnimation`是 a 的一个方法，`View`所以如果你在一个`ImageView`实例中有位图`imageView`，你应该调用`imageView.startAnimation(a);`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:13:07.060

与其在代码中进行，不如考虑使用 XML：http: [//developer.android.com/guide/topics/resources/animation-resource.html#View](http://developer.android.com/guide/topics/resources/animation-resource.html#View)

# android - Android 应用程序无法启动，活动错误

> ID：10468972
> 
> 赞同：0
> 
> 时间：2012-05-06T07:42:00.683
> 
> 标签：android, android-activity, runtime-error

代码`Activity`：

```
public class MainActivity extends Activity {

    private ListView lv;
    private CustomAdapter adapter;
    private ArrayList<Event> fetch = new ArrayList<Event>();
    private Button button;
    int counter = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

            adapter = new CustomAdapter(MainActivity.this, R.id.listview,fetch);
        lv.setAdapter(adapter);
        button = (Button) findViewById(R.id.button);
        button.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Event temp=new Event("Date","Details","GeoLocation","Location","EvtName");
                fetch.add(temp);
                counter++;
                adapter.notifyDataSetChanged();

            } });

    }

} 
```

该应用程序失败，出现`Unable to start Activity componentInfo`错误。`Logcat`是：

```
05-06 12:56:34.248: E/AndroidRuntime(2215): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.nasotech/com.nasotech.MainActivity}: java.lang.NullPointerException 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T07:46:55.633

首先通过 Id 找到列表视图，例如

```
lv = (ListView)findViewById(R.id.listview); 
```

# python - 过滤在一个非常大的列表中只出现一次的项目

> ID：10468974
> 
> 赞同：6
> 
> 时间：2012-05-06T07:42:27.937
> 
> 标签：python, performance, algorithm, list, filter

我有一个大列表（超过 1,000,000 项），其中包含英文单词：

```
tokens = ["today", "good", "computer", "people", "good", ... ] 
```

我想获取列表中仅出现一次的所有项目

现在我正在使用：

```
tokens_once = set(word for word in set(tokens) if tokens.count(word) == 1) 
```

但它真的很慢。我怎样才能让它更快？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-06T07:45:53.257

您遍历一个列表，然后对每个元素再次执行此操作，这使其成为 O(N²)。如果你用 a 替换你`count`的`Counter`，你遍历列表一次，然后再次遍历唯一元素的列表，这使得它在最坏的情况下为 O(2N)，即 O(N)。

```
from collections import Counter

tokens = ["today", "good", "computer", "people", "good"]
single_tokens = [k for k, v in Counter(tokens).iteritems() if v == 1 ]
# single_tokens == ['today', 'computer', 'people'] 
```

# jquery - 是否可以在 json 数据中进行分组？

> ID：10468978
> 
> 赞同：2
> 
> 时间：2012-05-06T07:43:11.307
> 
> 标签：jquery, asp.net-mvc, json

在我的控制器类和 GetGroupedLogReport 作为 JsonResult 我返回一个具有以下属性的列表：名称，状态，...

鉴于我需要按名称和状态对这些数据进行分组：这是代码：

```
 function SetReportGrid(pageNumber, extra) {
    $("#gvReportList tbody").html('');
    $('#pagination').html('');
    $.getJSON('/Report/GetGroupedLogReport', {
        fromDate: $('#FromDate').val() || "",
        toDate: $('#ToDate').val() || ""

    }, function (data) {
     //here

        }
                       gvReportList.init();
        });
    }); 
```

我需要获取 json 数据并按名称和状态对其进行分组，然后将其放入网格中，我该如何对其进行分组？

这是数据样本：

```
[Object { Id=563,Name="test",State="test"},{Id=543,Name="test2",State="test2"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-21T05:57:10.390

如果您只需要按这两个字段（名称和州）进行分组，您可以使用[Alasql](http://github.com/agershun/alasql)库进行分组。

```
var data = [{ Id:563,Name:"test",State:"test"},{Id:543,Name:"test2",State:"test2"},
            {Id:544,Name:"test2",State:"test2"}, {Id:545,Name:"test2",State:"test2"}];

var res = alasql('SELECT Name, State FROM ? GROUP BY Name, State',[data]); 
```

在 jsFiddle 中试试[这个例子。](http://jsfiddle.net/agershun/yrqj17yj/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T07:54:00.123

JSON 只是一种数据表示法，一种结构，它不提供任何类型的查询。实现该`group by`操作的一种方法是遍历每个元素并记住前一个*键*并比较它是否已更改。

```
var key;
data.forEach(function(obj) {
   var k = obj.Name + ":" + obj.State;
   if (key !== k) {
       key = k;
       console.log("New group " + key);
   }
   console.log(obj.Id);
}); 
```

如果您的数据没有正确排序，您可以试试这个工具：  [LINQ to JavaScript](http://jslinq.codeplex.com/)，它的灵感来自 .NET LINQ。它支持查询，如`select`,  `where`, `order`, ...</p>

总而言之，如果您可以在服务器端执行此操作，您可能会获得更好（更快）的结果。

# html - HTML 中的 SVG：内联与嵌入

> ID：10468981
> 
> 赞同：1
> 
> 时间：2012-05-06T07:44:08.583
> 
> 标签：html, svg, embed

当我将一组 SVG 图形元素内嵌到 HTML 中时，我可以通过其 id 属性访问例如一个组，例如一个棋子，并且可以使其可点击、可拖动等。非常好，直截了当。

现在我从 HTML 中删除 SVG 代码并将其放入一个单独的文件中，我通过

```
<embed src=... /> 
```

进入 HTML。这在渲染中没有明显差异，但现在我无法再通过其 id 属性访问该组。和

```
<object data=...></object> 
```

顺便说一句，它是一样的。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T08:17:56.323

如果你的脚本在 html 文件中，你想要这样的东西......

document.getElementById("embed_or_object_id").getSVGDocument().getElementById("element_id");

# css - 我表的当前悬停列比其他列宽一点

> ID：10468985
> 
> 赞同：1
> 
> 时间：2012-05-06T07:44:45.880
> 
> 标签：css, layout, hover

我有一张桌子，我在鼠标悬停单元格上设置了一种按钮。然后问题是当我在列之间移动时，我们可以看到当前列比其他列宽一点。很难解释。

这是一个小演示视频：[http ://screencast.com/t/WbHIlSHIm](http://screencast.com/t/WbHIlSHim)

我们怎样才能避免呢？

这是我的CSS

```
#MatrixTable td
{
    padding: 0px;
    height: 30px;
    text-align: center;
    vertical-align: middle;    
}

#MatrixTable:hover
{
    cursor: default;
}

#MatrixTable td a:hover
{
    cursor: none;
}

#MatrixTable td:first-child
{
    padding-left: 5px;
    text-align:left; 
}

#MatrixTable td a
{
    padding: 8px 10px;
    cursor: default;
} 
```

谢谢。

* * *

更新

这是一个jsfiddle：http: [//jsfiddle.net/Q35f7/](http://jsfiddle.net/Q35f7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:57:35.507

嗯，最常见的原因是当你添加新类时 CSS 发生了变化，添加了很多其他的东西。造成大小变化的有问题的变化是`padding`和`border`其他一些，它们总是会改变对象的大小。

例如，如果您在鼠标悬停上添加`.class:hover{border: 500px solid #000;}`，当您将鼠标悬停在该元素上时，该元素会变得更大。如果你这样做了，也会发生类似的效果`.class:hover{padding:9999px;}`。看看我在这里得到什么？

我已经为您编辑了它，删除了会造成“烦人”大小变化的样式规则：

[http://jsfiddle.net/Q35f7/1/](http://jsfiddle.net/Q35f7/1/)

# android - 是否可以混合使用不同版本的 gcc 和 ld？

> ID：10468986
> 
> 赞同：0
> 
> 时间：2012-05-06T07:45:03.260
> 
> 标签：android, gcc, ld, unix-ar

我的环境是 arm-linux-androideabi（东芝 AC100 上的 Android 2.2）。我的环境有 2 套 GCC 编译器（安装在设备上的不同位置）：

1.  4.4.3（[Android 上的 Android NDK](http://my-android-travels.blogspot.com/2012/02/android-build-system-ndk-toolchain_21.html)）
2.  4.6.0（[Android 上的 R + GCC](http://rwiki.sciviews.org/doku.php?id=getting-started%3ainstallation%3aandroid)）

我面临的问题是 gcc-4.6.0 运行时会出现段错误（但是它成功运行每个任务，只是在最后出现段错误，可能在退出例程中），而 ld-4.4.3 和 ar-4.4.3 失败在我的环境中运行。另一方面，gcc-4.4.3 运行良好，ld-4.6.0 和 ar-4.6.0 也是如此。

因此，在我的设备上构建时，如果我使用 4.4.3 运行配置，它将在配置步骤失败，因为即使配置测试程序编译成功，gcc 也会出现段错误并返回非零值 (139)。但是，如果我使用 4.6.0 运行 configure，configure 运行得很好，但是 build ( `make all`) 在链接和静态库创建时惨遭失败。

我的问题是：

1.  是否可以使用 gcc-4.4.3 编译我的目标文件（`gcc-4.4.3 -c input.c`），然后与 ld-4.6.0（`ld-4.6.0 -o input input.o -lc` ）链接？也就是说，我将删除有问题的二进制文件并使用工作二进制文件的组合来构建项目。
2.  如果有警告，那么它们是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-07T20:52:32.133

您可以使用 shell 脚本调用 gcc，以隐藏错误的退出代码。

# asp.net-mvc - 为什么我应该使用@Url.Content("~/blah-blah-blah")？

> ID：10468987
> 
> 赞同：39
> 
> 时间：2012-05-06T07:45:07.487
> 
> 标签：asp.net-mvc

我无法理解我可以从[`Url.Content()`](https://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content.aspx "UrlHelper.Content 方法 - MSDN")ASP.NET MVC 中的方法获得的好处。例如，您看到`src='@Url.Content("~/Contents/Scripts/jQuery.js")'`. 我为什么要使用它？使用它可能存在哪些原因？与使用普通的旧简单引用相比，有什么好处、优势等`src='/scripts/jquery.js`？

**更新：**根据答案，我想知道除了处理虚拟文件夹之外是否还有其他使用它的原因？因为我还没有看到太多使用虚拟应用程序（这当然并不意味着它没有被使用那么多）。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-06T07:54:10.780

通常，您的 Web 应用程序发布为：www.yoursite.com/。~ 字符匹配站点 / 的根。

但是，如果您使用虚拟目录 www.yoursite.com/mywebapp/ 发布站点，则 ~ 字符将匹配“/mywebapp/”。使用“/”字符硬编码 URL 会导致错误的页面引用。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-06T17:45:47.487

映射虚拟路径是它的唯一目的。如果您不需要映射它们并且确定您的应用程序或它的文件夹不会位于其他应用程序下，那么它不会为您服务。

从文档注释中，如果您不使用 ~，则结果不会发生任何变化：“备注如果指定的内容路径不以波浪号 (~) 字符开头，则此方法返回 contentPath 不变。”

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-06T07:49:10.753

如果您的应用程序根路径不是服务器的根路径，这将很有用。Url.Content("~/") 返回应用程序的根文件夹。

# regex - 如何在 grep 的输出中添加标签？

> ID：10468988
> 
> 赞同：2
> 
> 时间：2012-05-06T07:45:49.557
> 
> 标签：regex, linux, unix, command-line, grep

假设我有以下文字：

```
name is test1 and age is test2 end
name is test3 and age is test4 end
name is test5 and age is test6 end
name is test7 and age is test8 end 
```

我正在寻找 test1，test2，...，如下所示：

```
-bash$ grep -o -P "is .*? and|is .*? end" test
is test1 and
is test2 end
is test3 and
is test4 end
is test5 and
is test6 end
is test7 and
is test8 end 
```

有没有办法可以在匹配的模式前添加一些文本？我正在寻找这样的输出：

```
STRING1:is test1 and
STRING2:is test2 end
STRING1:is test3 and
STRING2:is test4 end
STRING1:is test5 and
STRING2:is test6 end
STRING1:is test7 and
STRING2:is test8 end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T07:58:28.697

您可以`sed`在管道中使用（诚然它不是很干净）：

```
$ grep -o -P "is .*? and|is .*? end" test | sed '/and$/s/^/STRING1:/; /end$/s/^/STRING2:/'
STRING1:is test1 and
STRING2:is test2 end
STRING1:is test3 and
STRING2:is test4 end
STRING1:is test5 and
STRING2:is test6 end
STRING1:is test7 and
STRING2:is test8 end 
```

before 每个替换将`/.nd$/`替换限制在与该正则表达式匹配的行上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T08:07:55.100

我将 grep 的输出通过管道传输到 awk 以满足您的需求：

```
grep -o -P "is .*? and|is .*? end" test | \
awk -v a=STRING1: -v b=STRING2: "/and$/ {print a\$0} /end$/ {print b\$0}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T12:31:29.477

由于您要操作而不仅仅是选择文本，`sed`因此比`grep`.

构造一个执行您想要的替换的正则表达式很简单。您有两个替换，因此您可以使用两个表达式 ( `-e`)。要仅对匹配的行进行操作（就像您的 grep 示例一样），请使用`sed -n`and`p`操作仅打印匹配的行。棘手的部分是您想在同一行上多次操作，但是当您执行第一次替换时，您会丢失字符串的其余部分以进行第二次替换。例如，以下内容接近您想要的，但第二个表达式永远不会匹配，因为第一个表达式删除了第二个表达式匹配的字符串：

```
sed -n -e 's/.*\(is .* and\).*/STRING1:\1/p' -e 's/.*\(is .* end\)/STRING2:\1/p'
STRING1:is test1 and
STRING1:is test3 and
STRING1:is test5 and
STRING1:is test7 and 
```

为了解决这个问题，您可以使用`h`和`g`sed 命令将模式空间（输入行）复制到保持缓冲区 ( `h`) 中，并将其复制回模式空间以供下一个 sed 命令 ( `g`)：

```
sed -n -e 'h;s/.*\(is .* and\).*/STRING1:\1/p' -e 'g;s/.*\(is .* end\)/STRING2:\1/p'
STRING1:is test1 and
STRING2:is test2 end
STRING1:is test3 and
STRING2:is test4 end
STRING1:is test5 and
STRING2:is test6 end
STRING1:is test7 and
STRING2:is test8 end 
```

在执行第一个表达式中的替换之前，该行被保存在保持缓冲区中。第二个表达式首先使用保持缓冲区加载模式缓冲区，以便第二个替换可以工作。

您可以将这两个单独的表达式合二为一，但我认为这会使其更难阅读：

```
sed -n -e 'h;s/.*\(is .* and\).*/STRING1:\1/p;g;s/.*\(is .* end\).*/STRING2:\1/p' 
```

# jquery - jQuery 和 Zotero

> ID：10468990
> 
> 赞同：1
> 
> 时间：2012-05-06T07:46:05.390
> 
> 标签：jquery

是否可以在 Zotero 翻译器中使用 jQuery？

**更新**

问题是翻译器在沙箱中运行，并且没有文档对象，因此 jquery 或 sizzle 返回以下错误：`ReferenceError: document is not defined`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:50:26.367

我不认为你可以在 Zotero 翻译器中使用 jQuery，不。我的理解是，该库必须包含在 Zotero 中，但事实并非如此。最好的想法可能是准确描述您想要实现的目标并发布到 zotero-dev，很可能有一个可行的替代方案。另请注意，亚当的翻译写作指南在这一点上已经过时了，所以我不建议根据它编写新的翻译。目前没有全面的文档，虽然这个页面有很多： [http ://www.zotero.org/support/dev/translators/coding](http://www.zotero.org/support/dev/translators/coding)

# android - 将android中的32bpp图像（ARGB_8888类型的位图实例）转换为8bpp、4bpp和2bpp

> ID：10468991
> 
> 赞同：0
> 
> 时间：2012-05-06T07:46:13.557
> 
> 标签：android, colors, reduce, depth

我需要在 Android 中转换 32bpp 图像，这是一个 Bitmap 类的实例，其 Bitmap.Config 为 ARGB_8888。1\. 如何将图像的色深降低到 8bpp 和 4bpp？2\. android 是否提供任何 java 帮助类来实现相同的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T08:30:32.630

使用[`copy()`](http://developer.android.com/reference/android/graphics/Bitmap.html#copy%28android.graphics.Bitmap.Config,%20boolean%29)位图的 - 方法。在这里，您可以从可用的颜色深度之一[`Bitmap.Config`](http://developer.android.com/reference/android/graphics/Bitmap.Config.html)（16 或 8 bpp，我在 Android 的各个领域看到其他一些配置，但似乎与位图兼容的唯一配置是 中的配置`Bitmap.Config`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:35:53.367

您需要使用外部图像处理库来进行这种颜色量化。我更喜欢使用[Leptonica](http://www.leptonica.com/)。[它是用 C 编写的，但你可以在这个项目](http://code.google.com/p/tesseract-android-tools/)中找到 Android Java 绑定

# c - C - 从具有动态名称的文件中读取/写入

> ID：10468998
> 
> 赞同：-2
> 
> 时间：2012-05-06T07:46:56.660
> 
> 标签：c, file-io

我想做一个 C 程序，用一些参数调用它；每个参数将代表一个文件名，我想在每个参数中写一些东西。

```
FILE * h0;    
h0 = fopen(argv[0],"w");    
char buffer[100] = "something here\n";    
fprintf(h0,buffer);    
fclose(h0); 
```

对于 C++，有一个叫做 c_str() 的东西，但我没有在这里使用它。任何提示如何处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:56:05.487

文件名完全是一个 C 字符串（以空字符结尾的 char 数组）并且您已经回答了自己的问题（您不需要 C 中的 c_str 之类的东西），因为您打开文件并在其中写入。`argc`告诉您命令行中有多少个参数，程序的名称包括在内，它位于`argv[0]`. 所以你需要一个循环，比如

```
const char *your_stuff = "something here\n";
for(i = 1; i < argc; i++)
{
   FILE *h = fopen(argv[i], "w");
   if (h) {
     fputs(your_stuff, h);
     fclose(h);
   }
} 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T07:56:41.997

你应该看看命令行参数是如何形成的：

[http://crasseux.com/books/ctutorial/argc-and-argv.html](http://crasseux.com/books/ctutorial/argc-and-argv.html)

然后看看你的`argv[0]`.

# c# - 如何从PowerPoint中的幻灯片中删除图表

> ID：10468999
> 
> 赞同：1
> 
> 时间：2012-05-06T07:47:33.137
> 
> 标签：c#, powerpoint

我有一张幻灯片的 pptx 文件。幻灯片中有一个图表。我想使用 C# 代码从幻灯片中删除该图表。我编写了一个 C# 程序来做到这一点。运行解决方案后，当我打开转换后的 pptx 文件时；我收到此错误：

> powerpoint 删除了 test2 中不可读的内容

我的 C# 代码如下。

```
string pptxFileNameTemplate = "D:\\test.pptx";
string pptxFileNameGenerate = "D:\\test2.pptx";

File.Copy(pptxFileNameTemplate, pptxFileNameGenerate, true);
using (PresentationDocument presentationDocument = PresentationDocument.Open(pptxFileNameGenerate, true))
{  
    PresentationPart presentationPart = presentationDocument.PresentationPart;
    List<SlidePart> slideParts = new List<SlidePart>();
    presentationPart.GetPartsOfType<SlidePart>(slideParts);
    SlidePart slp = slideParts[0];
    List<ChartPart> chartParts = new List<ChartPart>();
    slp.GetPartsOfType<ChartPart>(chartParts);
    ChartPart cp = chartParts[0];
    string chartPartIdBookMark = slp.GetIdOfPart(cp);
    slp.DeletePart(chartPartIdBookMark);
    slp.Slide.Save();
    presentationDocument.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:59:56.787

您可以使用 application.presentation.slides 循环所有幻灯片，并为 slide.shapes 集合中的每个形状检查 shape.type，当类型为图表时调用 shape.delete