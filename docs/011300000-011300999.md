# StackOverflow 问答 11300000-11300999

# javascript - Toggle Flash With Javascript

> ID：11300000
> 
> 赞同：0
> 
> 时间：2012-07-02T19:31:11.467
> 
> 标签：javascript, flash, video, memory-leaks

The site I'm currently working on has a series of videos on a carousel (6 altogether). As you could guess, this is causing us/me some performance headaches, especially regarding the flash-video version.

To help with the CPU usage, I began calling .hide() (we're using jQuery) on the videos as they leave the focus of the carousel. That helped the CPU a lot by itself.

**The problem is, each time I call .show() on the object element, I notice an XHR for the video source in Fiddler.** I believe this new resource is getting added to memory each time, because I'm seeing a memory leak. I've also tried removing/recreating the element, but I experience the same type of memory leak as with hiding and showing the video.

I've also looked into writing Javascript hooks into the flash file with ActionScript, but I don't have that kind of environment setup, so I'm looking for something strictly javascript.

**Is there an effective way to pause/play the video?**

Thanks for your time.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:13:49.077

不幸的是，没有办法告诉 Flash 视频停止使用纯 Javascript 解决方案。如果您有权访问 Actionscript 源，则可以侦听 ExternalInterface 回调并处理暂停代码。

至于通过 Javascript 销毁和重新创建 Flash 对象，如果您使用的是 SWFObject，您可以尝试 removeSWF 方法。它将从源中删除整个对象标记，但我不确定浏览器中的内存管理是什么样的。您可能会面临与以前相同的内存泄漏情况。

我的建议是尝试访问 Flash 源或编写自己的源，以便您可以正确处理暂停和恢复功能。

# c# - "Use of unassigned local variable" when trying to pass a struct by reference

> ID：11300005
> 
> 赞同：0
> 
> 时间：2012-07-02T19:31:37.350
> 
> 标签：c#, vb.net, struct, arguments, pass-by-reference

I have a VB class library I built from an existing VB class which wraps an unmanaged DLL. The VB class library contains the DLL functions and various structs and types associated with the DLL functions.

I am using the class lib in a C# project and one of the functions in the class lib requires me to pass a struct as an argument. This is where I am running into trouble.

Here is the VB code for the DLL:

```
Declare Auto Function CtSetVRegister Lib "Ctccom32v2.dll" _
        (ByVal ConnectID As Integer, ByRef Storage As CT_VARIANT) As Integer 
```

Here is the VB struct:

```
<StructLayout(LayoutKind.Sequential, Pack:=1)> _
Public Structure CT_VARIANT
    Dim vRegister As Integer          'Variant Register desired
    Dim type As Integer               'Format want results returned in
    Dim precision As Integer          'Precision desired for floating point conversions
    Dim flags As Integer              'Specially defined flags, 0 for normal, (indirection, etc.)
    Dim cmd As Integer                'Special commands, 0 for normal operation
    Dim taskHandle As Integer         'Alternate task handle for local task register access, 0 = default public
    Dim slength As Integer            'Length of bytes returned in stringVar, not include null
    Dim indexCol As Integer             'Column (X) selection, base 0
    Dim indexRow As Integer             'Row (X) selection base 0
    Dim IntegerIntVar As Integer         '32 bit signed integer storage
    Dim FloatVar As Single         '32 bit float
    Dim DoubleVar As Double        '64 bit double in Microsoft format
    <MarshalAs(UnmanagedType.ByValArray, SizeConst:=223)> _
    Public stringVar() As Byte         'null terminated ASCII string of bytes (1 to 224)
End Structure 
```

The C# method I am writing requires me to set the necessary values in the struct and then pass those to the DLL function:

```
private void btnWriteVReg_Click(object sender, System.EventArgs e) 
{
        int results;
        CTC_Lib.Ctccom32v2.CT_VARIANT Var;            
        Var.vRegister = int.Parse(txtVRegToRead.Text);
        Var.cmd = 0;
        Var.flags = 0;
        Var.FloatVar = 0;
        Var.IntegerIntVar = 0;
        Var.DoubleVar = 0;            
        Var.precision = 6;            
        writeStatus.Text = "";

        Var.type = CTC_Lib.Ctccom32v2.CT_VARIANT_INTEGER;
        Var.IntegerIntVar = Convert.ToInt32(txtVRegVal.Text);            

        Var.taskHandle = 0;
        results = CTC_Lib.Ctccom32v2.CtSetVRegister(CTconnection,ref Var);
        if ((results == SUCCESS)) 
        {
            writeStatus.Text = "SUCCESS";
        }
        else 
        {
            writeStatus.Text = "ERROR";
        }
    } 
```

I get the error:

> Use of unassigned local variable 'Var'

I am a bit puzzled as to how to properly pass the struct 'Var' to the VB Class library.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:34:05.900

初始化变量

```
CTC_Lib.Ctccom32v2.CT_VARIANT Var = new CTC_Lib.Ctccom32v2.CT_VARIANT(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T19:34:21.607

您必须创建 Var 的实例，

```
CTC_Lib.Ctccom32v2.CT_VARIANT Var = new CTC_Lib.Ctccom32v2.CT_VARIANT(); 
```

# extjs - Can't understand MVC example code given by EXT JS

> ID：11300006
> 
> 赞同：1
> 
> 时间：2012-07-02T19:31:40.377
> 
> 标签：extjs, extjs4, extjs-mvc, extjs4.1

I am going through the Example on MVC and i don't understand the following

1.) I didnt understand what `itemdblclick` means ? I know it means double clicks and when we d-click on the grid the function coresponding to it gets executed, but i don't think this is a pre-difined function. So from where does it come from. Imagine there is a button and i want it to log a message to the console saying it was clicked (as shown below) what will `itemdblclick` be ?

```
Ext.define('AM.controller.Users', {
    extend: 'Ext.app.Controller',

    views: [
        'user.List'
    ],

    init: function() {
        this.control({
            'userlist': {
                itemdblclick: this.editUser
            }
        });
    },

    editUser: function(grid, record) {
        console.log('Double clicked on ' + record.get('name'));
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:36:43.547

`itemdblclick`是事件的名称。您查找正在使用的控件支持的事件。例如对于按钮，它将在这里：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.button.Button](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.button.Button)

然后指定您要订阅的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T19:37:31.060

在 this.control 块中，您正在设置事件侦听器。所以 itemdblclick 是一个由 userlist 控件触发的事件名称。

# javascript - javascript site welcome loader with an HTML5 element

> ID：11300008
> 
> 赞同：0
> 
> 时间：2012-07-02T19:31:55.600
> 
> 标签：javascript, ajax, cookies, adobe-edge

I have an odd problem. the question is not so much about specifics of the code, more to the general approach.

scenario: a website has a "welcome screen". The welcome element is an HTML5 EDGE animation (its not a small file ;) ) Using client side detection, we will check if cookies are enabled. if cookies are enabled, we check for a cookie['loader_shown']. if we dont see this cookie, we want to use JS to show a full screen overlay div half opaque. inside this div, we then want to use AJAX to load in the loading element html - at the moment this is defined in a seperate file, and of course refences other files in the EDGE file package...

Any suggestions on how best to approach this. it is important the HTML5 EDGE element is only loaded from the server once the welcome detection has oipened the first overlay div....

oh, the EDGE element must remain transparent!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:45:43.320

solved. the best approach is to dynamically load the js files once the cookies have been checked:

sources in comments

```
 <!DOCTYPE HTML>

<html lang="en">

<head>

<script type="text/javascript">

    var cookiesEnabled = are_cookies_enabled();

    function are_cookies_enabled()                                                                  // http://sveinbjorn.org/cookiecheck
    {
        var cookieEnabled = (navigator.cookieEnabled) ? true : false;

        if (typeof navigator.cookieEnabled == "undefined" && !cookieEnabled)
        { 
            document.cookie="testcookie";

            cookieEnabled = (document.cookie.indexOf("testcookie") != -1) ? true : false;
        }
        return (cookieEnabled);
    }

    // http://www.hunlock.com/blogs/Howto_Dynamically_Insert_Javascript_And_CSS

    if(cookiesEnabled == true)
    {
        var headID = document.getElementsByTagName("head")[0];         

        var newScript = document.createElement('script');

        newScript.type = 'text/javascript';

        newScript.charset = 'utf-8';

        //newScript.onload=scriptLoaded; // If you're loading an external javascript and you need to know when the script has loaded you can simply use .onload=yourfunction; to set up the onload handler. Here's an example. 

        newScript.src = '_loader/head3_C_213_no_preloader_edgePreload.js';

        headID.appendChild(newScript);
    }

</script>

<style>

    .edgeLoad-EDGE-614773 { 
        display:none;  
    }

</style>

</head>

<body style="margin:0;padding:0;">  

<h1>test</h1>
    <div id="Stage" class="EDGE-614773">
    </div>
</body>

</html> 
```

never really thought about JS loading itself from script like that...... Oh the possibilities!

# .net - 如何取消任何当前的 Parallel.ForEach 并重新开始

> ID：11300012
> 
> 赞同：5
> 
> 时间：2012-07-02T19:32:12.457
> 
> 标签：.net, parallel.foreach

从功能上讲，有一长串单词绑定到 ListView。使用 TextBox for chars 过滤单词列表。

使用任何新的 char 需要取消任何处理背景过滤器。然后等待 1 秒 (DispatcherTimer) 以启动新的后台并行过滤器。

使用 BackGroundWorker 进行此工作，但无法将 cancel-any-processing 部分转换为 Parallel。基本上需要“if (backgroundWorkerFTSfilter.IsBusy) backgroundWorkerFTSfilter.CancelAsync();” 在平行下。
如果我要解决这个错误，请告诉我。

```
private List<FTSword> fTSwordsFiltered = new List<FTSword>();
CancellationTokenSource ftsCts = new CancellationTokenSource();
ParallelOptions ftspo = new ParallelOptions();
// in ctor ftspo.CancellationToken = ftsCts.Token;

public List<FTSword> FTSwordsFiltered  // ListView bound to
{
    get { return fTSwordsFiltered; }
    set
    {
        if (fTSwordsFiltered == value) return;
        fTSwordsFiltered = value;
        NotifyPropertyChanged("FTSwordsFiltered");
    }
}
public string FTSwordFilter            // TextBox bound to
{
    get { return fTSwordFilter; }
    set
    {
        if (value == fTSwordFilter) return;

        fTSwordFilter = value;
        NotifyPropertyChanged("FTSwordFilter");

        // cancel any filter currently processing
        ftsCts.Cancel();   // fts filter              
        // with BackgroundWorker this was able to cancel               
        // if (backgroundWorkerFTSfilter.IsBusy) backgroundWorkerFTSfilter.CancelAsync();

        dispatcherTimerFTSfilter.Stop();
        // wait 1 second and apply filter in background
        dispatcherTimerFTSfilter.Start();
    }
}
private void dispatcherTimerFTSfilter_Tick(object sender, EventArgs e)
{
    dispatcherTimerFTSfilter.Stop();
    List<FTSword> ftsWords = new List<FTSword>();
    //ftsCts = new CancellationTokenSource();  with these two it never cancels
    //ftspo.CancellationToken = ftsCts.Token;
    if (!(string.IsNullOrEmpty(FTSwordFilter)))
    {
        Task.Factory.StartNew(() =>
        {

            try
            {
                Parallel.ForEach(FTSwords, ftspo, ftsw =>
                {
                    if (ftsw.WordStem.StartsWith(FTSwordFilter))
                    {
                        ftsWords.Add(ftsw);
                    }
                    ftspo.CancellationToken.ThrowIfCancellationRequested();
                });
                Thread.Sleep(1000);   // so the next key stoke has time
                FTSwordsFiltered = (List<FTSword>)ftsWords;
            }
            catch (OperationCanceledException ei)
            {
                // problem is that it is always cancelled from the cancel request before DispatchTimer
                Debug.WriteLine(ei.Message);
            }
            Debug.WriteLine(ftsWords.Count.ToString() + "parallel ");
        });           
    }
} 
```

Irman 的回答使我想到了这一点

```
 if (!(string.IsNullOrEmpty(FTSwordFilter)))
    {
        string startWorkFilter = FTSwordFilter;
        Task.Factory.StartNew(() =>
        {
            try
            {
                fTSwordsFilteredCancel = false;
                Parallel.ForEach(FTSwords, ftspo, (ftsw, loopstate) =>
                {
                    if (ftsw.WordStem.StartsWith(startWorkFilter))
                    {
                        ftsWords.Add(ftsw);
                    }
                    // Thread.Sleep(1);
                    if (fTSwordsFilteredCancel)
                    {
                        loopstate.Break();
                    }
                });
                Debug.WriteLine("fTSwordsFilteredCancel " + fTSwordsFilteredCancel.ToString());
                FTSwordsFiltered = (List<FTSword>)ftsWords;
                Debug.WriteLine(ftsWords.Count.ToString() + " parallel " + startWorkFilter);                       
            }
            catch (OperationCanceledException ei)
            {
                Debug.WriteLine(ei.Message);
            }
        });
    } 
```

非常感谢我的回答，并将将其用于一些运行时间更长的任务或更长的列表，但获得了如此出色的性能，我将其移至 get（仍然有 1 秒的延迟）。导致更小的内存占用。针对 800,000，它的运行时间不到 1/10 秒。

```
public IEnumerable<FTSword> FTSwordsFiltered
{
    get 
    { 
        if(string.IsNullOrEmpty(FTSwordFilter) || FTSwordFilter == "*") return FTSwords; 
        return FTSwords.AsParallel().Where(ftsWrd => ftsWrd.WordStem.StartsWith(FTSwordFilter));
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T19:51:45.920

Parallel.ForEach 带有 ParallelLoopState 对象。你可以使用这个对象来打破循环。

您可以使用`loopState.Break()`或`loopState.Stop()`根据您的要求。

检查这个。

[http://msdn.microsoft.com/en-us/library/dd991486.aspx](http://msdn.microsoft.com/en-us/library/dd991486.aspx)

# jquery - jquery and referencing objects

> ID：11300017
> 
> 赞同：0
> 
> 时间：2012-07-02T19:33:02.747
> 
> 标签：jquery, arrays, object

I have the following code:

```
var options = [
    '#content',
    'h5'                     
];

var elements = [];

for(a in options){
    elements[a] = {
        'handle':  $(options[a]),
        'ref_copy': $(options[a])
    };

    elements[a].handle.hover(
        function(){
            elements[a].handle.css(
                'border', '1px dashed red'
            );
        },
        function(){
            elements[a].handle.css(
                'border', elements[a].ref_copy.css('border');
            );
        }
    );
} 
```

Why does it make the border of the element red.. but when I call `elements[a].ref_copy` it isn't converting back?

EDIT://

Why do I have to do this:

```
 var options = [
                '#content',
                'h5'                      
            ];

            var elements = [];

            for(a in options){
                elements[a] = {
                    'handle':  $(options[a]),
                    'ref_copy': new Object
                };

                elements[a].ref_copy = elements[a].handle.clone(); 

                elements[a].handle.hover(
                    function(){
                        elements[a].ref_copy = $(this).clone(); 
                        $(this).css(
                            'border', '1px dashed red'
                        );
                    },
                    function(){
                        $(this).css(
                            'border', elements[a].ref_copy.css('border')
                        );
                    }
                );
            } 
```

What are the mechanics here?

# c# - 加载 git2.dll 时出现问题？

> ID：11300022
> 
> 赞同：5
> 
> 时间：2012-07-02T19:33:24.727
> 
> 标签：c#, libgit2sharp

我正在尝试使用 libgit2sharp 库。我唯一的代码是

```
Repository repository = new Repository(@"C:\Path\To\Repo"); 
```

当我运行它时，我收到一条错误消息：无法加载 DLL 'git2'：找不到指定的模块。因此，我手动从 libgit2sharp 中抓取了 git2.dll 并将其移动到目录中。之后运行相同的程序时，我收到另一个错误：尝试加载格式不正确的程序。

在研究这个时，我发现[这篇文章](https://stackoverflow.com/questions/6313203/unable-to-load-dll-git2-dll-the-specified-module-could-not-be-found)和似乎适用于海报的解决方案对我不起作用。那篇文章也是在一年前发布的，并且对其进行了假定的修复，我使用的是 libgit2sharp 的最新分支（我尝试过旧的存储库没有变化）

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:21:23.403

推荐的选项是安装最新的**[LibGit2Sharp NuGet 包](http://nuget.org/packages/LibGit2Sharp)**，它将负责将所有内容安装在正确的位置。

`x86`但是，如果您更喜欢手动处理，`amd64`GitHub存储库包含`git2.dll`. 执行`master`或`vNext`分支的检出应该检索它们。

请注意，每个版本的 LibGit2Sharp 都针对特定版本的 libgit2 二进制文件。每个 LibGit2Sharp 分支都包含一个 libgit2 子模块，它指向被包装的 libgit2 提交。

![子模块](../Images/b29b6953d2b62bf7dc22d210c9a3d62f.png)

为了让它完美地工作，LibGit2Sharp 程序集期望`git2.dll`二进制文件位于特定的树结构中。

```
LibGit2Sharp.dll
|__NativeBinaries
   |__x86
   |  |_git2.dll
   |
   |__amd64
      |_git2.dll 
```

# css - CSS页脚宽度问题

> ID：11300025
> 
> 赞同：0
> 
> 时间：2012-07-02T19:33:48.653
> 
> 标签：css, css-float

我目前正在[这个网站](http://natural.siteprogression.com/)上工作，我希望页脚是屏幕的 100%（宽度），但无论我做什么，它都拒绝响应。我检查了身份证是否有重复，但我什么也没看到。CSS代码如下所示：

```
#footer {
    width: 100%;
    clear: both;
    height: 400px;
    background-color: #293D61;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T19:39:37.770

您的页脚是#rack 内的嵌套 div。在 100% 时，您的页脚将仅与您的外部/父 div 一样宽。您需要将其移出父 div 并使其成为兄弟

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:28:55.373

**检查您的页脚是否在其他 div 内...？如果是这样，那么它将不是整页长度....**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T19:36:23.400

尝试这样做，

```
#footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    clear: both;
    height: 400px;
    background-color: #293D61;
} 
```

# ios - 在 iOS 开发中使用 OCUnit 对 XCode 4.5 中的核心数据对象进行单元测试

> ID：11300026
> 
> 赞同：1
> 
> 时间：2012-07-02T19:34:00.453
> 
> 标签：ios, unit-testing, core-data, xcode4, ocunit

是否有一种**简单**的方法可以**出于测试原因创建 NSManagedObjects 而**无需使用为发布应用程序创建的托管对象上下文？

我现在已经进行了几周的 Core Data 编码，但在细节方面仍然存在一些问题……为什么我不能只分配和初始化对象进行测试？我真的必须处理第二个持久存储/托管对象上下文（以及哪个）吗？

我必须测试一些在我的 NSManagedObject 子类中编写的方法......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T23:09:39.247

相信我，你不想在不使用 MOC 的情况下测试核心数据对象。你最多只能做不健全的事情。

但是，如果您不想使用实际的数据库，请使用内存存储。设置非常简单。事实上，我在自己的许多单元测试中都使用了它。

不过，我警告你。SQL 存储和内存存储有许多不同的行为。最常见的问题是谓词。阅读文档以确保您的谓词是正确的。

我会说，在测试期间，您可以使用内存中 MOC，但您应该有一个配置来运行您在实际数据库本身上进行的所有测试，以确保它能够正常工作。为了速度，也许您将内存数据库用于正常使用，而将实际数据库用于计划的持续集成测试。

作为一个例子，你可以做这样的事情来创建你的内存 MOC ......

```
- (NSManagedObjectContext*)managedObjectContextWithConcurrencyType:(NSManagedObjectContextConcurrencyType)concurrencyType {
    NSManagedObjectModel *mom = [NSManagedObjectModel mergedModelFromBundles:nil];
    STAssertNotNil(mom, @"Can not create MOM from main bundle");

    NSPersistentStoreCoordinator *psc = [[MyPersistentStoreCoordinator alloc] initWithManagedObjectModel:mom];
    STAssertNotNil(psc, @"Can not create persistent store coordinator");
    NSPersistentStore *store = [psc addPersistentStoreWithType:NSInMemoryStoreType configuration:nil URL:nil options:nil error:0];
    STAssertNotNil(store, @"Can not create In-Memory persistent store");

    MyManagedObjectContext *moc = [[MyManagedObjectContext alloc] initWithConcurrencyType:concurrencyType];
    moc.persistentStoreCoordinator = psc;

    return moc;
} 
```

# java - 我在 Java 中计算数字根的递归代码有什么问题？我该如何解决？

> ID：11300028
> 
> 赞同：1
> 
> 时间：2012-07-02T19:34:03.047
> 
> 标签：java, recursion

这是我第一次尝试递归，对愚蠢感到抱歉。我正在尝试通过 Java 计算数字的数字根。我检查了我们可以通过除以 9 来计算它，但我仍然想使用递归。你能告诉我我在 Java 中的递归代码有什么问题吗？我该如何解决？你能为我提供示例代码吗？

```
public static void main(String[] args) {
    Scanner console = new Scanner(System.in);
    int inputnumber = inputnumber(console); 
    int sumofdigit = sumofdigit(inputnumber);
    int digitalroot = digitalroot(inputnumber);
    System.out.println("That number is :" + digitalroot);
}

//input console
public static int inputnumber(Scanner console){
    System.out.println("Please input: ");
    int num = console.nextInt();
    return num;}

public static int digitalroot(int inputnumber ) {
    if(inputnumber<10){
        return inputnumber;
    } else {
        return digitalroot(sumofdigit(inputnumber));
    }
}

// calculate sum of digits
public static int sumofdigit(int inputnumber){
    return sumofdigit(inputnumber/10) + inputnumber%10; 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T19:40:41.610

你的递归永远不会结束。`if`用添加的语句试试这个：

```
public static int sumofdigit(int inputnumber) {
    if (inputnumber<10)
        return inputnumber;
    return sumofdigit(inputnumber/10) + inputnumber%10; 
} 
```

您在 中有一个类似的片段`digitalroot`，但您主要需要在`sumofdigit`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T20:04:28.837

我想说一旦你达到零就停止递归会稍微容易一些（少一个幻数，更常见的情况是你可以在零处停止递归）。

```
public static int sumofdigit(int inputnumber) {
    if (inputnumber == 0)
        return 0;
    return sumofdigit(inputnumber / 10) + inputnumber % 10;
} 
```

并不是说它很重要，但它至少尝试处理对负数求和（尽管返回一个否定的总和）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T20:00:59.877

你的问题在这里：

```
public static int sumofdigit(int inputnumber){
        return sumofdigit(inputnumber/10) + inputnumber%10; 
} 
```

要解决此问题，您应该这样做：

```
public static int sumofdigit(int inputnumber) {
    if (inputnumber<10)
        return inputnumber;
    return sumofdigit(inputnumber/10) + inputnumber%10; 
} 
```

以下是对问题和解决方案的一些解释：

您可能知道，任何递归都可以变成一个while循环。你有问题的递归可以变成

```
public static int sumofdigit(int inputnumber) {
    while(true){
      inputNumber = (inputNumber / 10) + (inputnumber%10); 
    }
    return inputNumber;
} 
```

正如你所看到的，这个方法永远不会返回并且会不确定地循环。一个快速的解决办法是在什么时候返回`inputnumber<10`

```
public static int sumofdigit(int inputnumber) {
    while(inputnumber>=10){
      inputNumber = (inputNumber / 10) + (inputnumber%10); 
    }
    return inputNumber;
} 
```

这又变成了递归给出：

```
public static int sumofdigit(int inputnumber) {
        if (inputnumber<10)
            return inputnumber;
        return sumofdigit(inputnumber/10) + inputnumber%10; 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T19:48:27.153

当您的 inputnumber 小于 10 时，您的 sumofdigit 方法应返回一个值以结束递归

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T20:03:18.630

我也不会递归地这样做：

```
public static int sumofdigit(int x) {
    int sumofdigit = 0;
    while(x != 0) {
        sumofdigit += x % 10;
        x /= 10;
    }
    return sumofdigit;
}

public static int digitalRoot(int x) {
    while(x > 9) {
        x = sumofdigit(x);
    }
    return x;
} 
```

# php - 代码点火器卷曲错误

> ID：11300037
> 
> 赞同：0
> 
> 时间：2012-07-02T19:34:54.600
> 
> 标签：php, json, codeigniter

我正在尝试这段代码并继续获取此错误函数 create(){

```
 $post = array();

    //get all the data from the form into an array
    $post = array(
                'name' => $this->input->post('name'),
                'abbrev' => $this->input->post('abbrev'),           
                'long_name' => $this->input->post('long_name'),
                'long_abbrev' => $this->input->post('long_abbrev'),
                'url' => $this->input->post('url'),
                'description' => $this->input->post('description')
                );  

    //encode the data and set it as output to push to api
    $json_data=json_encode($post);
    $this->curl->post('http://localhost:8888/api/colleges', $json_data); 
```

这是我得到的错误

严重性：通知

消息：未定义的属性：Colleges::$curl

文件名：控制器/colleges.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:33:52.357

改变

```
 $this->curl->post('http://localhost:8888/api/colleges', $json_data); 
```

至

```
 $this->load->library('curl');
 $this->curl->post('http://localhost:8888/api/colleges', $json_data); 
```

# objective-c - 相等的方法不计算相同的值

> ID：11300039
> 
> 赞同：0
> 
> 时间：2012-07-02T19:35:03.637
> 
> 标签：objective-c

我正在尝试学习objective-c。我正在尝试解析二进制文件，执行以下操作（简化）：

```
@interface DatFile : NSObject {
    NSData* _data;
}

-(id)initWithFilePath:(NSString *)filePath;

-(void) readFile;

-(void) auxiliaryMethod;

@implementation DatFile

- (id) initWithFilePath:(NSString *)filePath {
    if ( self = [super init] ) {
        _data = [NSData dataWithContentsOfFile:filePath];
    }
    return self;
}

-(void) readFile {
    int header;
    [_data getBytes: &header range: NSMakeRange(0, 4)];    
    NSLog(@"header: %u", header);

    short key;
    [_data getBytes: &key range: NSMakeRange(4, 2)];
    NSLog(@"key: %u", key);

    short value;
    [_data getBytes: &value range: NSMakeRange(6, 1)];
    NSLog(@"value: %u", value);

    [self auxiliaryMethod];
}

-(void) auxiliaryMethod {
    short value;
    [_data getBytes: &value range: NSMakeRange(6, 1)];
    NSLog(@"value: %u", value);
} 
```

我的问题是**辅助**方法中的代码不会计算**readFile**方法计算的相同值。既然**_data**对象是相同的，为什么该方法计算不同的值？而且，如您所见，辅助方法内部的逻辑只是另一个的副本......

在其他语言（java）中，我通常在较小的方法中分离一些逻辑，以使代码模式可读/可维护。这就是为什么我试图用 ObjC 来模仿它。

当然，这可能会遗漏一些东西，但几个小时后，我放弃了。我不明白我的错误在哪里。也许我应该删除我的项目并重新开始......

TIA,

鲍勃

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T19:57:55.900

`%u`用于[打印 32 位无符号值](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)。短是 16 位。因此，您正在打印解析后的值以及一些堆栈垃圾。

试试`%hu`；`h`修改以`%u`打印一个短值。

* * *

如果这不起作用：

*   确保您的数据对象在这两种方法之间是相同的（看不出它们怎么可能......但是......）
*   显示打印的实际值
*   解码为无符号长整数，在解码前显式初始化为 0

有了这种错误，几乎可以保证要么您没有处理您认为的输入，要么您正在处理一些与数据类型相关的 C-ism 以及此类代码中的隐含转换。

即假设`_data`是一致的，那么它表明**您认为正在工作的代码实际上并没有工作，而只是偶然出现**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T21:32:12.213

The problem is that you're passing a range of size 1 to `getBytes:range:`, but a short is 2 bytes in size. So `getBytes:range:` is only setting one of `value`'s bytes, and the other contains random garbage.

If you really only want to get one byte from the data, change the type of `value` to `int8_t`. If you want to get two bytes, pass 2 as the second argument of `NSMakeRange` (and I recommend also changing the type of `value` to `int16_t`).

# java - java中的Windows资源管理器上下文菜单

> ID：11300041
> 
> 赞同：6
> 
> 时间：2012-07-02T19:35:18.757
> 
> 标签：java, swing, winapi, swt, contextmenu

考虑简单的应用程序，即显示文件列表。我想显示上下文菜单，当用户单击文件或文件夹时，就像用户在 Windows 资源管理器中单击鼠标右键（打开、重命名、编辑等）一样。我不想创建自己的上下文菜单，我想显示 windows os 上下文菜单，可能使用某种 winapi。这应该只适用于 Windows 机器。

是否可以使用 Swing 或 SWT 或任何其他 UI 控件来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:17:45.603

这篇 MSDN[文章](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144093%28v=vs.85%29.aspx#unknown_93012)解释了它是如何完成的：

> Windows 资源管理器调用文件夹对象`IShellFolder::GetUIObjectOf`来为其中一个对象请求一个接口。... 当用户右键单击一个对象时，Windows 资源管理器会请求一个`IContextMenu`接口。

[这里](http://bcbjournal.org/articles/vol4/0006/Using_the_shell_context_menu.htm)有一个完整的 C 源代码示例。

# jquery - jQuery .val() 返回空字符串

> ID：11300043
> 
> 赞同：2
> 
> 时间：2012-07-02T19:35:49.453
> 
> 标签：jquery

感觉就像 jQuery 惹恼了我，虽然这可能是一个简单的问题。我的代码获取到我想要获取其值的 DOM 元素，但是当我添加 .val() 它返回一个空字符串。

```
$('tr.invoice td[data-attr=Payed] div.true').closest('tr').find('td[data-attr=Expiration]')
Returns this:
[<td data-attr=​"Expiration">​2012-04-22​&lt;/td>​,<td data-attr=​"Expiration">​2012-05-21​&lt;/td>​,<td data-attr=​"Expiration">​2012-06-18​&lt;/td>​] 
```

如您所见，DOM 元素具有值，但如果我将 .val() 添加到 JS 字符串，则它仅返回空字符串（不是未定义的，空的）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-02T19:37:21.190

方法`val()`用于`input`和`select`元素。

您应该改用[`html()`](http://api.jquery.com/html/)or[`text()`](http://api.jquery.com/text/)方法。

```
$('tr.invoice td[data-attr=Payed] div.true')
    .closest('tr')
    .find('td[data-attr=Expiration]')
    .each(function() {
        // getting inner HTML
        var html = $(this).html();
    }
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T19:38:16.263

`.val()`用于表单元素，而不是文本值。改为使用`.text()`。

小提琴：http: [//jsfiddle.net/L8V4A/](http://jsfiddle.net/L8V4A/)

**编辑：**对坏链接道歉。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T19:37:39.367

`<td>`s 没有值，因此不会返回任何内容。`.val()`仅用于`<inputs>`和`<select>`标签等表单元素。要获取元素的内容，请使用[`.html()`](http://api.jquery.com/html/)or[`.text()`](http://api.jquery.com/text/)代替。

`.html()`和的区别在于`.text()`前者会在返回的字符串中包含标签，而`.text()`只会返回任何标签的内容。使用此示例 HTML：

```
<div>
    <strong>
        Hello world
        <span>How're you doing?</span>
    </strong>
</div> 
```

`$('div').html()`给出这个字符串（为了清楚起见，格式很好）：

```
<strong>
    Hello world
    <span>How're you doing?</span>
</strong> 
```

而`$('div').text()`会给这个：

```
Hello worldHow're you doing? 
```

# ios - 在 iOS 上，如果 diskPath:nil，NSURLCache 缓存存储在哪里？

> ID：11300044
> 
> 赞同：12
> 
> 时间：2012-07-02T19:35:56.307
> 
> 标签：ios, nsurlcache

我遇到过如下代码：

```
NSURLCache *URLCache = 
    [[NSURLCache alloc] initWithMemoryCapacity:1024 * 1024 
                                  diskCapacity:1024 * 1024 * 5 
                                      diskPath:nil]; 
```

问题是当 diskPath 被传递为零时，我无法找到预期的行为。 [NSURLCache 文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURLCache_Class/Reference/Reference.html#//apple_ref/doc/uid/20001699-BAJJHGEA)没有明确描述这种情况，我也无法通过自己的测试弄清楚。

缓存存储在哪里？还是该代码高于错误？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-04T15:56:09.897

我今天有一些空闲时间做一些测试并找到了答案。没什么令人兴奋的，但如果你好奇的话：

默认情况下，iOS 将使用一个名为**Cache.db**的数据库，并且正如@qegal 所提到的，它将存储在默认位置下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T19:53:23.927

从您链接的文档中：

> 在 iOS 中，`path`是应用程序默认缓存目录的子目录的名称，用于存储磁盘缓存（如果子目录不存在，则创建该子目录）。

我最好的猜测是，如果`path`为 nil（意味着您没有指定子目录），则缓存将仅存储在默认缓存目录中（而不是子目录中）。我现在无法测试它，因为我遇到了一些计算机问题。我还猜测它会存储在默认缓存目录中，因为我确信您会在运行时或编写代码时收到某种警告或错误。我知道我是否写了这样的东西：

```
[array writeToFile: nil atomically:NO]; 
```

我会收到一个错误，因为我没有指定文件应该写入的路径。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-28T15:52:47.137

在 iOS 8.2 下，Cache.db 文件存储在：

```
(App Folder)/Library/Caches/com.mycompany.appname/Cache.db 
```

其中 com.mycompany.appname 是您的 Bundle ID

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-15T06:29:37.923

如果 diskPath == xxxx，则 Cache.db 文件存储在：

```
(App Folder)/Library/Caches/com.mycompany.appname/xxxx/Cache.db 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-04T09:44:52.947

您可以在路径下找到模拟器的缓存文件：

`~/Library/Developer/CoreSimulator/Devices/UDID/data/Containers/Data/Application/UDID/Library/Caches/BUNDLE_IDENTIFIER`

文件夹必须如下所示：

*   缓存.db
*   Cache.db-wal（在此处查看缓存和存储的值）
*   缓存.db-shm

根据我的经验，我必须从设备文件夹中删除所有以前的设备，如果您找不到`bundleIdentifier`尝试删除所有设备文件夹并再次运行应用程序，那么将在该空文件夹上创建新文件夹，您可以从那里

# mediawiki - Mediawiki 将每个命名空间的所有页面都清空。我想清空所有 User_talk 页面

> ID：11300047
> 
> 赞同：1
> 
> 时间：2012-07-02T19:36:04.897
> 
> 标签：mediawiki

我想知道是否有办法将所有 user_talk 页面全部清空。不要删除它们，只是空白它们。我不知道如何编写机器人，所以我真的在问是否有为此扩展或预先编写的机器人。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T06:37:38.853

我建议使用[AWB](http://en.wikipedia.org/wiki/Wikipedia%3aAutoWikiBrowser)。您可以轻松地让它基于名称空间构建一个列表，然后使用简单的[ReGeX](http://en.wikipedia.org/wiki/Regular_expression)替换，例如：搜索：`(.*)*`替换为：（空白）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:23:01.927

您可以编写一个简单的 SQL 来执行此操作，只需查看页表，对于我的安装，User talk: 的命名空间值为 3，因此我可以删除所有命名空间 = 3 的页面。

**从数据库中删除行，将页面保留为空白（未创建）**

# r - Rcpp 按引用传递与按值传递

> ID：11300048
> 
> 赞同：15
> 
> 时间：2012-07-02T19:36:10.877
> 
> 标签：r, rcpp

我第一次尝试通过 Rcpp 函数`inline`，它解决了我的速度问题（感谢 Dirk！）： [用零替换负值](https://stackoverflow.com/questions/11275187/r-replacing-negative-values-by-zero/11275230#11275230)

初始版本如下所示：

```
library(inline)
cpp_if_src <- '
  Rcpp::NumericVector xa(a);
  int n_xa = xa.size();
  for(int i=0; i < n_xa; i++) {
    if(xa[i]<0) xa[i] = 0;
  }
  return xa;
'
cpp_if <- cxxfunction(signature(a="numeric"), cpp_if_src, plugin="Rcpp") 
```

但是当被调用时`cpp_if(p)`，它被输出覆盖`p`了，这不是预期的。所以我认为它是通过引用传递的。

所以我用以下版本修复了它：

```
library(inline)
cpp_if_src <- '
  Rcpp::NumericVector xa(a);
  int n_xa = xa.size();
  Rcpp::NumericVector xr(a);
  for(int i=0; i < n_xa; i++) {
    if(xr[i]<0) xr[i] = 0;
  }
  return xr;
'
cpp_if <- cxxfunction(signature(a="numeric"), cpp_if_src, plugin="Rcpp") 
```

这似乎奏效了。但是现在当我将原始版本重新加载到 R 中时，原始版本不再覆盖它的输入（即现在相同的确切代码不会覆盖它的输入）：

```
> cpp_if_src <- '
+   Rcpp::NumericVector xa(a);
+   int n_xa = xa.size();
+   for(int i=0; i < n_xa; i++) {
+     if(xa[i]<0) xa[i] = 0;
+   }
+   return xa;
+ '
> cpp_if <- cxxfunction(signature(a="numeric"), cpp_if_src, plugin="Rcpp")
> 
> p
 [1] -5 -4 -3 -2 -1  0  1  2  3  4  5
> cpp_if(p)
 [1] 0 0 0 0 0 0 1 2 3 4 5
> p
 [1] -5 -4 -3 -2 -1  0  1  2  3  4  5 
```

我不是唯一一个试图复制这种行为并发现不一致结果的人：

[https://chat.stackoverflow.com/transcript/message/4357344#4357344](https://chat.stackoverflow.com/transcript/message/4357344#4357344)

这里发生了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-02T20:28:52.890

他们的关键是“代理模型”——你`xa`的内存位置和你的原始对象是一样的，所以你最终会改变你的原始对象。

如果您不希望这样做，您应该做一件事：使用该`clone()`方法进行（深度）复制，或者可能显式创建一个新对象，将更改的对象写入其中。方法二不*这样*做，您只需使用两个不同命名的变量，它们都是指向原始变量的“指针”（在代理模型意义上）。

但是，当您将 int 向量（来自 R）传递给 NumericVector 类型时，另一个复杂之处在于*隐式*转换和复制：这会创建一个副本，然后不再更改原始内容。

这是一个更明确的示例，类似于我在教程或研讨会中使用的示例：

```
library(inline)
f1 <- cxxfunction(signature(a="numeric"), plugin="Rcpp", body='
  Rcpp::NumericVector xa(a);
  int n = xa.size();
  for(int i=0; i < n; i++) {
    if(xa[i]<0) xa[i] = 0;
  }
  return xa;
')

f2 <- cxxfunction(signature(a="numeric"), plugin="Rcpp", body='
  Rcpp::NumericVector xa(a);
  int n = xa.size();
  Rcpp::NumericVector xr(a);            // still points to a
  for(int i=0; i < n; i++) {
    if(xr[i]<0) xr[i] = 0;
  }
  return xr;
')

p <- seq(-2,2)
print(class(p))
print(cbind(f1(p), p))
print(cbind(f2(p), p))
p <- as.numeric(seq(-2,2))
print(class(p))
print(cbind(f1(p), p))
print(cbind(f2(p), p)) 
```

这就是我所看到的：

```
edd@max:~/svn/rcpp/pkg$ r /tmp/ari.r
Loading required package: methods
[1] "integer"
        p
[1,] 0 -2
[2,] 0 -1
[3,] 0  0
[4,] 1  1
[5,] 2  2
        p
[1,] 0 -2
[2,] 0 -1
[3,] 0  0
[4,] 1  1
[5,] 2  2
[1] "numeric"
       p
[1,] 0 0
[2,] 0 0
[3,] 0 0
[4,] 1 1
[5,] 2 2
       p
[1,] 0 0
[2,] 0 0
[3,] 0 0
[4,] 1 1
[5,] 2 2
edd@max:~/svn/rcpp/pkg$ 
```

因此，传递 int-to-float 还是 float-to-float 真的很重要。

# cakephp - 在 CakePHP 中为每个 Content $type 创建新表

> ID：11300050
> 
> 赞同：0
> 
> 时间：2012-07-02T19:36:11.887
> 
> 标签：cakephp, database-design, content-management-system, cakephp-2.2

**目标描述**

尝试用 CakePHP 制作一个 CMS（供内部使用，但在许多网站上）。

我希望能够拥有一个通用`Content`模型，然后拥有许多不同的用户生成内容`types`。

这很容易做到，但`contents`如果网站上的每一条内容都在其中，我的单个表格最终会变得很大。我想将其拆分为表格以帮助查询时间/站点速度...等。

我的想法（不确定是否可能）会以某种方式告诉 CakePHP，如果`type`Content 的字段是“文章”，它应该使用`content_articles`表...等这些表将`afterSave`在创建新的`content_type`.

为他们提供特定内容类型将使用哪些字段的选项会很好 - 甚至通过添加/删除字段...等来管理它，然后只在表中生成这些字段，并以某种方式基于`content_fields`表对它们进行验证数据。

```
//my thoughts on tables:    
content_types //id, name, description, use_table
content_fields //id, name, content_type_id, required, field_type, max_chars
content_articles //generated by code
content_people //generated by code 
```

**问题：**

甚至可能吗？有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:25:35.230

也许对内容使用键值表而不是标准表？CakeDC 的 utils 插件可以通过支持的 RDBMS 做到这一点。

或者，您可以将此模型设置为使用像 MongoDB 这样的键值数据源，这是使用 NoSQL 的一个很好的用例。如果您谈论的是海量键值存储和不断变化的架构，我可能会采用这种方法。github上有一个MongoDb插件。

# javascript - 将 d3.js 画布附加到 div

> ID：11300059
> 
> 赞同：8
> 
> 时间：2012-07-02T19:37:17.390
> 
> 标签：javascript, d3.js

我正在尝试将图例添加到图表中，并且我想将其附加到我的图表 div 中。现在我正在使用以下代码，它将图例附加到“正文”。我想将它附加到我的“图表”div 中，这样我就可以在我的图例之后创建一个页脚。现在首先处理 HTML 页面，然后运行我的 d3 javascript 文件，因此图例被放置在我的页脚下方。先感谢您。

```
 // Create the svg drawing canvas...
      var canvas = d3.select("body")
        .append("svg:svg")
          .attr("width", 300)//canvasWidth)
          .attr("height", 300);//canvasHeight); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-02T20:07:17.120

就像我在评论中指出的那样，以下工作。

```
var canvas = d3.select("#chart")
    .append("svg:svg")
      .attr("width", 300)//canvasWidth)
      .attr("height", 300);//canvasHeight); 
```

干杯:)

# java - 将多个项目导出为 jar

> ID：11300061
> 
> 赞同：1
> 
> 时间：2012-07-02T19:37:21.853
> 
> 标签：java, eclipse, maven, jar

如何将多个项目分别导出为单独的 jar 文件，以便项目与 jar 的比例为 1:1？我有数千个项目，一个一个地导出它们会花费太长时间，并且将它们全部导出为一个 jar 也不理想，因为我通过 cron 调度程序单独运行它们。

编辑 - 具体来说，我需要的正是我在 Eclipse 中运行“Export -> Runnable JAR”得到的，“将所需的库打包到生成的 JAR”中，除了以更快的方式完成。Maven 显然对此有好处，但我无法让它像我想要的那样工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T19:42:25.017

您可以使用[Maven](http://maven.apache.org/what-is-maven.html)。然后你只需要`mvn package`在每个项目文件夹中运行一个命令来生成 jar 文件。您可以编写一个脚本来自动执行此过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:19:07.473

要让 maven 创建一个包含所有依赖项的可运行 jar，请尝试执行以下操作：

```
<build>
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.4</version>
    <configuration>
      <archive>
        <manifest>
          <addClasspath>true</addClasspath>
          <mainClass>com.whatever.YourMainClass</mainClass>
        </manifest>
      </archive>
    </configuration>
  </plugin>
  <plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <version>2.2.1</version>
    <configuration>
      <descriptorRefs>
        <descriptorRef>jar-with-dependencies</descriptorRef>
      </descriptorRefs>
      <archive>
        <manifest>
          <mainClass>com.whatever.YourMainClass</mainClass>
        </manifest>
      </archive>
    </configuration>
    <executions>
      <execution>
        <id>make-assembly</id> <!-- this is used for inheritance merges -->
        <phase>package</phase> <!-- bind to the packaging phase -->
        <goals>
          <goal>single</goal>
        </goals>
      </execution>
    </executions>
  </plugin>
</plugins>
</build> 
```

# python - 名称错误。可能是 eval()、raw_input 或误解

> ID：11300062
> 
> 赞同：-2
> 
> 时间：2012-07-02T19:37:22.813
> 
> 标签：python, eval

使用 Python 2.6 并收到一个恼人的错误，我仍然不确定为什么。我感兴趣的文件包含多行只有一个值。我想检索这些值。这段代码

```
f = open(file, 'r')
for line in file:
    value = eval(line) 
```

导致以下错误消息：

```
 File "<string>", line 1, in <module>
NameError: name 'c' is not defined 
```

所以我在这里研究了 Stack Overflow..[这个](https://stackoverflow.com/questions/3309843/calling-class-from-an-external-module-causes-nameerror-in-idle-it-works-fine)问题和[另一个](https://stackoverflow.com/posts/7747871/revisions)问题.. 但我无法在他们的问题和我的问题之间建立联系。我从他们那里得到的是，我对 Python 的使用`eval()`可能会让 Python 感到困惑，我应该用`raw_input`它来让 Python 知道它不必评估`line`，而是实际变量`line`代表。但是，将我的代码修复为：

```
for line in file:
    value = eval(raw_input(line)) 
```

这引发了以下错误（并且可能使终端超载..它只是冻结了，直到我退出程序）：

```
File "<string>", line 0
^
SyntaxError: unexpected EOF while parsing 
```

我在这里做错了什么？我发现`eval()`它不是最喜欢在 SO 周围使用的事实，我是否误解了它的功能？
编辑：我的文件是一个值列表，所以，

```
2 
3
2
3
1
0 
```

ETC

*编辑*所以这是一个**误解**。感谢 DSM 指出我的文件名不匹配，感谢 Levon 仍然提供帮助并显示`int`为`eval`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T19:42:24.097

如果您只想从文件中读取这些数字并将它们转换为整数，则可以。

```
with open('data.txt') as f:
    for line in f:
        value = int(line) 
```

然后您可以根据需要使用该值。

*旁白*：使用`with`打开文件的好处是当你完成或遇到异常时它会自动为你关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T19:42:47.873

要回答您的问题的标题，是的，您误解了它。让我解释一下：
eval 执行您放入其中的代码。所以`x=eval('c')`是一样的`x=c`。
`raw_input`用于获取用户输入。参数是要显示给用户的字符串，而不是输入。
如果您只想读取文件中的值，可以使用

```
with open('file') as f:
    for line in f:
        var = int(line) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T19:46:04.363

如果您想从文件中检索值，那么这样做就可以了，使用`eval()`for this 没有意义：

```
>>> with open('data.txt') as f:
        values=[int(x) for x in f]

>>> values
[2, 3, 2, 3, 1, 0] 
```

# error-handling - VBscript：验证文件是否已完全复制/错误处理

> ID：11300070
> 
> 赞同：0
> 
> 时间：2012-07-02T19:37:47.200
> 
> 标签：error-handling, vbscript, copy, verify

我正在尝试在我的脚本中添加一些内容，让我知道我正在复制的文件是否已被完全复制。

基本上我正在压缩一堆文件，然后将它们发送到网络上的映射驱动器。然后，一旦成功复制了原始位置的文件，我的脚本就会删除它们。该脚本运行良好，但我只需要添加一些错误处理，让我知道复制是否未成功完成。

我从来没有在 vbscript 中使用过任何错误处理，因为我只有大约一周的时间，所以任何帮助都将不胜感激。如果我需要更深入地解释任何事情，请告诉我。我的脚本可以在下面找到：

* * *

```
Option Explicit

Dim sDirectoryPath, sDestinationPath, sOutputFilename, Shell, sFileExt, sFilePrefix

shell = WScript.CreateObject("WScript.Shell") 
```

'指定要压缩的文件所在的目录路径'指定压缩文件的目标'指定要查找的文件扩展名'指定要查找的文件名前缀

```
sDirectoryPath = "C:\Testscripts\"
sDestinationPath = "C:\Script\files\outzips\"
sOutputFilename = shell.ExpandEnvironmentStrings("%COMPUTERNAME%")
sFileExt = ".evtx"
sFilePrefix = "Archive*"

Dim Command, RetVal
Dim d : d = Date() 
Dim dateStr : dateStr = Year(d) & "-" & Right("00" & Month(d), 2) & "-" & Right("00" &   Day(d), 2)
Dim t : t = Time()
Dim timeStr: timeStr = Hour(t) & "-" & Right("00" & Minute(t), 2) & "-" & Right("00" & Second(t), 2)

Command = """C:\Program Files\7-zip\7z.exe"" a  " & sDestinationPath & sOutputFilename & "-" & dateStr & "-" & timeStr & ".zip " & sDirectoryPath & sFilePrefix & sFileExt

        RetVal = Shell.Run(Command,0,true)

Wscript.Sleep 2000

Dim objFso  

Set objFSO = CreateObject("Scripting.FileSystemObject") 
```

'将文件从一个路径复制到另一个路径

```
objFSO.CopyFile "C:\script\files\outzips\*.zip" , "G:\CopyTestFolder\"

If err.Number <> 0 Then
WScript.Echo "An error occured copying this file, re-attempt copy"
Else
WScript.Echo "No errors occured, copy successful"
End If
On Error GoTo 0 
```

'文件被成功压缩和复制后，指定从哪里删除'旧的压缩文件，以及要删除的本地存档文件夹路径

```
objFSO.DeleteFolder("C:\Script") 
```

'可以删除整个存档文件夹，也可以只删除文件夹中的 .zip 文件

```
objFSO.DeleteFile("C:\Testscripts\Archive*.evtx") 
```

'复制成功后需要删除的原始文件所在位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:34:28.527

在 7-zip 上使用“t”命令来验证完整性。如果'0'正常，否则出错。

例如：

```
Set myshell = WScript.CreateObject("WScript.Shell")
Dim cmd, result
cmd = """C:\Program Files\7-zip\7z.exe"" t C:\NOT_a__valid_zip_file.zip"
result = myshell.Run(cmd,0,true)
Wscript.Echo "Not a valid zip file:  " & result

cmd = """C:\Program Files\7-zip\7z.exe"" t C:\a_valid_zip_file.zip"
result = myshell.Run(cmd,0,true)
Wscript.Echo "A valid zip file:  " & result 
```

输出：

```
PS> cscript.exe .\7z.vbs
Microsoft (R) Windows Script Host Version 5.8
Copyright (C) Microsoft Corporation. All rights reserved.

Not a valid zip file:  2
A valid zip file:  0 
```

# c++ - 如何编译独立的 OpenCV 可执行文件？

> ID：11300071
> 
> 赞同：4
> 
> 时间：2012-07-02T19:37:58.490
> 
> 标签：c++, linux, opencv, g++

我编译我的 OpenCV 程序如下：

```
g++ `pkg-config --cflags opencv --libs opencv` <filename>.cpp 
```

它在我的电脑上完美运行。我可以用程序单独编译共享库，以便它可以在其他没有 opencv 的计算机上运行吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:35:14.910

编译期间的程序动态链接到我们计算机上的共享库（.so 文件）。编译的可执行文件在运行时使用这些共享库。但是这些共享库可能不存在于其他计算机上，因此可能无法运行可执行文件。

对此的解决方案是静态链接存档库（.a 文件），而不是动态链接共享库。OpenCV 不会像这样分发存档库。因此，必须使用 `cmake -DBUILD_SHARED_LIBS=OFF`. 此存档库可用于创建独立的可执行文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T19:41:15.783

在某种程度上是的：查找**静态链接**。您的 opencv 副本必须具有 .a 版本的库（不仅仅是您提到的 .so），对于任何其他依赖项也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T19:40:55.223

不，您需要使用静态库。

# wcf - Silverlight 应用程序中的 WCF 服务

> ID：11300072
> 
> 赞同：0
> 
> 时间：2012-07-02T19:38:00.300
> 
> 标签：wcf, silverlight, web-services

我有一个 Silverlight 5 应用程序，它从另一个项目中启用 Silverlight 的 WCF 服务获取数据（我的解决方案有一个 Silverlight 项目和一个 Web 项目）。有许多类似的帖子，但它们指的是托管在 Web 服务器上的 Web 服务（正确的 Web 服务）。

我知道我必须告诉应用程序在哪里可以找到开发和生产中的服务。在开发中，您通常会有一个端口。我创建服务客户端（使用正确的 EndpointAddress）的代码如下：

```
BasicHttpBinding binding = new BasicHttpBinding(
        Application.Current.Host.Source.Scheme.Equals("https", StringComparison.InvariantCultureIgnoreCase)
        ? BasicHttpSecurityMode.Transport : BasicHttpSecurityMode.None);
binding.MaxReceivedMessageSize = int.MaxValue;
binding.MaxBufferSize = int.MaxValue;
Uri tempUri = new Uri("../PolicyDataService.svc", UriKind.Relative);
EndpointAddress servAddr = new EndpointAddress(tempUri);
PolicyDataServiceClient temp = new PolicyDataServiceClient("BasicHttpBinding_PolicyDataService", servAddr);
return temp; 
```

现在，我哪里错了？在 dev 中，一切正常，但在 prod 中，该服务永远不会被调用。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:38:46.267

我不确定发生了什么，但如果您还没有，可以尝试以下一些方法：

1.  浏览到 Prod 上的 svc 文件并确保您可以访问它 (http://yoursite/PolicyDataService.svc)
2.  将您的代码指向 prod 位置，并确保您可以毫无问题地连接。如果您可以连接，这样做通常会揭示问题所在。

由于您使用的是 BasicHttpBinding，因此您不应该遇到与绑定有关的安全问题。我知道这是非常基本的，但必须从某个地方开始。

# node.js - express.js express-resource POST (create) req.body 未定义

> ID：11300075
> 
> 赞同：2
> 
> 时间：2012-07-02T19:38:17.857
> 
> 标签：node.js, express

视窗。

节点 0.8 express.js/express-resource

```
// Configuration of Express Application for all environments
app.configure(function(){
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.bodyParser());
    //app.use(require('connect').bodyParser());
    app.use(express.methodOverride());

    app.use(express.static(__dirname + '/public')); // for static assets (css)
    app.use(express.static(__dirname + '/..')); // for static assets (css)

    app.use(app.router);
});
app.resource("data", require('.....js')); 
```

* * *

> 发送 POST /data（在 FireBug 中）： account[foo] bar name New

在创建的方法中 (req, res)

**req.body 未定义。**

互联网上有一些关于类似问题（使用 bodyParser 或路由器）的讨论，但我无法修复它。

一种

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T19:47:29.370

解决了。以防万一：我在 bodyParser 中间件之前调用了 app.get(..)。

# mysql - 此 INSERT 上的 MySQL 错误 #1064？

> ID：11300079
> 
> 赞同：3
> 
> 时间：2012-07-02T19:38:23.573
> 
> 标签：mysql, sql, database, debugging, mysql-error-1064

不知道出了什么问题，现在就在 PHP MyAdmin 中运行它。有什么突然出现的吗？谢谢。

```
INSERT INTO order (CustomerID, BillAddr, ShipAddr, Date, Total)   
VALUES ('test', 'test', 'test', '2012-07-02', 22) 
```

错误：

> MySQL 说：#1064

表结构`order`：

```
FIELD                TYPE  
OrderID         int(11) auto increment  
CustomerID      varchar(50)  
BillAddr        varchar(200)  
ShipAddr        varchar(200)  
Date            date  
Total           double 
```

（我将 OrderID 排除在 INSERT 之外，因为它是一个自动增量）

**编辑**
与此语法相同的错误：

```
SQL query:

INSERT INTO 'order'( CustomerID, BillAddr, ShipAddr, 'Date', Total )
VALUES (
'test', 'test', 'test', '2012-07-02', 22
)
MySQL said: Documentation
#1064 - 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-02T19:42:54.120

这个词`Date`是一个关键词。试试这样：

```
INSERT INTO `order` (CustomerID, BillAddr, ShipAddr, `Date`, Total)   
VALUES ('test', 'test', 'test', '2012-07-02', 22) 
```

ETA：并且`order`也是一个关键字:)

# php - 防止多个用户使用一个帐户

> ID：11300083
> 
> 赞同：2
> 
> 时间：2012-07-02T19:38:36.803
> 
> 标签：php, zend-framework, authentication, login

我想问您：假设您有一个网站，并且有一些额外的内容供支付月费的注册会员使用。如何确保一些朋友不会只使用一个可以访问所有内容的注册用户帐户？我在想也许可以存储 IP，但是具有动态 IP 的用户呢？也许 SMS 身份验证是正确的方式，但这需要花钱，而且对用户来说很烦人。我不知道。有任何想法吗？我正在将 PHP 与 Zend 框架一起使用。

谢谢你，T。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:04:39.237

您可以强制每个帐户在任何给定时间不超过一个开放会话。

会话应该由仅在 https 中存储和检索的 cookie 来标识，并且它应该在合理的时间（例如 15 分钟）后超时，如果某些活动没有保持活动状态，以便删除或丢失会话的用户cookie 无需显式注销即可再次登录（也出于安全原因）。您不能依靠 cookie 来超时，但这可能对您来说已经很清楚了。

当然，这不会阻止多个用户“分时”使用一个帐户，但这样的使用通常不是真正的问题。如果您需要麻烦的登录程序，许多好客户可能会跑掉。您宁愿容忍一小部分滥用行为。

我也同意 Darwindeeds 在对您的问题的评论中所写的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:25:28.707

You can implement like how steam login works. If you try to access from any other computer it will send a verification code to your registered email and once you enter that you are allowed to login, am sure no on share s their email accounts.

# android - 从 sqlite 数据库中检索数据并通过“OnItemClick”将其显示在另一个类中

> ID：11300089
> 
> 赞同：1
> 
> 时间：2012-07-02T19:38:53.057
> 
> 标签：android, sqlite

我希望当我单击列表项时，应用程序应该加载另一个类，然后通过从 sqlite 数据库中检索数据来在 textview 上显示所需的数据

```
@Override
public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {
    // TODO Auto-generated method stub
    Intent intent = new Intent(DictionaryActivity.this,
            WordDetails.class);
    // Cursor cursor = (Cursor) adapter.getItem(position);
    id = wordList.getItemIdAtPosition(position);
    intent.putExtra("Word_ID", id);
    // cursor.getInt(cursor.getColumnIndex("_id"));
    startActivity(intent);
} 
```

此代码在 WordDetails 类中

```
wordId = getIntent().getIntExtra("WORD_ID", -1);
if (wordId == -1) {
    mean = (TextView) findViewById(R.id.mean);
    mean.setText("Error");
} else {
    SQLiteDatabase db = (new DatabaseHelper(this))
            .getReadableDatabase();
    Cursor cursor = db.rawQuery(
            "SELECT _id ,word, mean FROM Meanings WHERE _id = ?",
            new String[] { "" + wordId });
    if (cursor.getCount() == 1) {
        cursor.moveToFirst();
        mean = (TextView) findViewById(R.id.mean);
        mean.setText(cursor.getString(cursor.getColumnIndex("mean")));
    }
} 
```

当我点击一个项目“错误”字被显示，它应该显示，但`wordTd`等于-1。为什么这`wordId`没有得到正确的价值？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T19:54:49.553

放置`Intent`额外内容时使用的“键”区分大小写。您将 id 设置为...

```
intent.putExtra("Word_ID", id); 
```

...但后来试图得到它...

```
wordId = getIntent().getIntExtra("WORD_ID", -1); 
```

换句话说，您正在投入`Word_ID`并试图获得`WORD_ID`. 更改代码，使它们都相同并且应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T19:47:09.820

默认情况下`id`传递给 OnItemClickListener 的是数据库中行的唯一 id，不需要通过这种方式获取：

```
id = wordList.getItemIdAtPosition(position); 
```

将您的 OnItemClickListener 更改为：

```
@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    Intent intent = new Intent(DictionaryActivity.this, WordDetails.class);
    intent.putExtra("Word_ID", id);
    startActivity(intent);
} 
```

# php - 喜欢系统状态变量未定义，即使它是

> ID：11300090
> 
> 赞同：0
> 
> 时间：2012-07-02T19:38:57.437
> 
> 标签：php, mysql

我有以下代码（如下）可以加载特定状态的喜欢（用于动态使用），如果用户喜欢他们自己的帖子，它就可以工作。但是，如果用户喜欢其他人，它就会失败。

我的代码：

```
<?php

  mysql_connect ('localhost', 'funding9_joeb', 'Brailsf0rdJ0e');
  mysql_select_db ('mingle');
    include('../includes/ts.php');
  $_COOKIE['wds']; 
        $ssid = $_COOKIE['wds'];

        $lu = "SELECT * FROM mingle_sessions WHERE sid = '$ssid' LIMIT 1";
        $luq = mysql_query($lu) or die (mysql_query());
        while($uidr = mysql_fetch_assoc($luq)) {
            $uid = $uidr['uid'];
        }

    $sql = "SELECT * FROM users WHERE uid = '$uid' LIMIT 1";

$s = htmlentities(strip_tags(stripslashes($_GET['sid'])));

$result = mysql_query($sql) or print ("Can't select entry from table mingle_usr.<br />" . $sql . "<br />" . mysql_error());

while($row = mysql_fetch_array($result)) {
    $fname = stripslashes($row['fname']);
    $sname = stripslashes($row['sname']);
    $dp = $row['dp'];
    }
  //--------------------------------------------------------------------------
  // 2) Query database for data
  //--------------------------------------------------------------------------

    $sql = "SELECT * FROM mingle_likes WHERE byuid = '$uid' AND onuid = '$s' AND type = 'status'";
    $sr = mysql_query($sql) or die(mysql_error());

if(mysql_num_rows($sr) >= 1) {

    $re = ("SELECT id as id, status as status, sid as sid, UNIX_TIMESTAMP(timestamp) as timestamp FROM mingle_status WHERE uid = '$uid' AND sid = '$s' ORDER BY timestamp DESC LIMIT 1"); //query

  $result = mysql_query($re) or die (mysql_error());
  while($st = mysql_fetch_assoc($result)) {
    $status = nl2br($st['status']);
    $sid = $st['sid'];  
    $td = $st['timestamp'];
    $id = $st['id'];
    }

    $like = mysql_fetch_array(mysql_query("SELECT COUNT(*) as num FROM mingle_likes WHERE onuid = '$sid' AND type = 'status' AND byuid != '$uid'"));
    $likes = ceil($like['num']);
    $haslike = mysql_fetch_array(mysql_query("SELECT COUNT(*) as nu FROM mingle_likes WHERE onuid = '$sid' AND type = 'status' AND byuid = '$uid'"));
    $hasliked = ceil($haslike['nu']);

?>
<script type="text/javascript" src="js/ld_s.js"></script>
<form action='ld.php' method='post' id='ls' style='display:inline; border:0px; margin: 0 0 0 0; padding: 0 0 0 0;'>
<input type="hidden" class="do_<?php echo $sid; ?>" name="onuid" value="<?php echo $sid; ?>" />
<input type="hidden" class="db_<?php echo $sid; ?>" name="byuid" value="<?php echo $uid; ?>" />
<input type="hidden" class="dp_<?php echo $sid; ?>" name="uid" value="<?php echo $uid; ?>" />
<input type="hidden" class="dt_<?php echo $sid; ?>" name="type" value="status" />
<?php
if($hasliked == 1) {
    ?>
    <label>You <?php if($likes >= 1) { echo "and " . $likes . " other people like this"; } else{ echo "liked this |"; }?></label><input type="submit" id="like" class="<?php echo $sid; ?>" name="submit" value="Unlike" />
    <?php
}
else {
    ?>
    <label><?php if($likes >= 1) { echo $likes . " people like this |"; }?></label><input type="submit" id="like" class="<?php echo $sid; ?>" name="submit" value="Like" />
    <?php
}
?>
</form> 
<a href="#" id="time"><?php echo time_since($td); ?></a>

    <?php
}
?> 
```

错误如下：

```
( ! ) Notice: Undefined variable: sid in C:\wamp\www\mingle\ajax\loadslikes.php on line 47 
```

然后对每次出现的 $sid 再次进行相同的操作。

我根本不知道为什么，就像我说的那样，它非常适合喜欢他/她自己的帖子的用户，而不是其他人。

有任何想法吗？：-/

# xcode - Cocoa 保留数组中的单个对象

> ID：11300091
> 
> 赞同：1
> 
> 时间：2012-07-02T19:39:17.080
> 
> 标签：xcode, arrays, cocoa

在 Cocoa 中，我使用以下代码获取应用程序的窗口数组：

```
CFArrayRef windows;
AXError gettingWindowsResult = AXUIElementCopyAttributeValues(app, (CFStringRef)NSAccessibilityWindowsAttribute, 0, 999, &windows); 
```

然后我检查这些窗口的一些值，并将`AXUIElementRef`其中一个窗口的值保存在我班级的变量中。在方法结束时，我释放`CFArrayRef`以确保我没有任何内存泄漏：

```
if (windows != nil)
{
    CFRelease(windows);
} 
```

虽然这使得当我尝试使用我保留的窗口时，我得到了一个糟糕的访问错误。所以我的问题是：我有必要释放数组吗？如果是这样，我该如何防止错误的访问错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:49:27.467

`AXUIElementRef`为什么不制作要保留的元素的 " " 的保留副本？

要做到这一点，找出你想要保留的元素的索引，然后再次调用“ `AXUIElementCopyAttributeValues`”函数，只是这次只传递你想要的元素的索引和 1 的“ `maxValue`”。例如，对于位置 26 的元素：

```
AXError gettingWindowsResult = AXUIElementCopyAttributeValues(app, (CFStringRef)NSAccessibilityWindowsAttribute, 26, 1, &arrayOfOne); 
```

然后您可以安全地调用“ ”数组`CFRelease`上的“ ”。`windows`

# php - 比较数组mysql php中的值

> ID：11300092
> 
> 赞同：0
> 
> 时间：2012-07-02T19:39:20.977
> 
> 标签：php, mysql, arrays

您好我正在尝试将 2 个数组中的值与此查询进行比较，这是我知道的唯一方法：

```
$session = "1,2,3,"
$table_name = "table1";
$column_name = "data1"; // value for test is 1,4,5,
$sql = "";
$sql .= "SELECT * FROM $table_name WHERE ";
$franquia = array();
$franquia = explode(",", $session);
if (!empty($franquia)) {

$final_id = array();
foreach ($franquia as $val) {
    if (trim($val) != '') {
        $final_id[] = $val;
    }
}

$count_data = count($final_id);
foreach ($final_id as $key => $id) {
    if ($id > 0) {
        $sql .= " $id IN ($column_name) ";
        if ($key < $count_data - 1) {
            $sql .= "OR ";
        }
    }
}
}

echo $sql; 
```

我有`1,2,3`on`$session`和`1,4,5`on的值，因此和`$data1`之间的比较应该返回 true，因为它们的值都为 1，但我没有得到任何结果。`$session``$data1`

实际上它只有在两个数组相同的情况下才有效，比如`$session = 1,2,3`和`$data1 = 1,2,3`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:20:06.707

您使用错误的 IN 子句；简而言之，而不是

```
WHERE value IN (column) 
```

正确的用法是：

```
WHERE column IN (value, value, value) 
```

反过来，这对您尝试做的事情没有帮助（[更多关于 IN 子句](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_in)）。相反，请尝试以下操作：

```
foreach ($final_id as $key => $id) {
    if ($id > 0) {
        $sql .= "$column_name LIKE %$id,%";
        if ($key < $count_data - 1) {
            $sql .= "OR ";
        }
    }
}
} 
```

这应该有效，但是您应该注意几件事。首先，您可能[容易受到 SQL Injections](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)的攻击，其次您应该考虑对数据库中的数据使用不同的方案，因为使用 LIKE %% 搜索数值是一种浪费，或者提前从数据库中获取条目并在结果字符串中搜索。只考虑上面的代码，只是你应该避免的快速而肮脏的 hack :)

# java - JTextPane - 动态自动换行

> ID：11300094
> 
> 赞同：4
> 
> 时间：2012-07-02T19:39:31.360
> 
> 标签：java, swing, word-wrap, jtextpane

我尝试使用`jTextPane1.setText("xxx xxxx xxx xxxxx xx xxx xxxx xxx etc...");`但`JTextPane`根本没有自动换行，而是仅在一行中显示所有文本。在调整大小时支持自动换行也会很有趣`jTextPane1`......

所以我的问题是......如何使`JTextPane`支持自动换行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:43:45.487

尝试使用 a`JTextArea`并调用`setWrapStyleWord(true);`它的实例，这应该可以满足您的需要。

编辑：

如果你需要使用 a`JTextPane`作为要求（你说过你这样做），那么看看一个类似的问题，我发现哪个答案应该有帮助：[How is word-wrapping implementation in JTextPane, and how do I make it包装一个没有空格的字符串？](https://stackoverflow.com/questions/7036543/how-is-word-wrapping-implemented-in-jtextpane-and-how-do-i-make-it-wrap-a-strin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-24T13:00:08.153

我遇到了同样的问题，David Kroukamp 的解决方案非常有帮助。我将其更改为 JTextArea 并设置以下属性，如本[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)中所述：

```
 textArea.setLineWrap(true);
    textArea.setWrapStyleWord(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T19:44:00.463

为什么不使用 JTextArea 而不是 Pane？

[http://docs.oracle.com/javase/1.5.0/docs/api/](http://docs.oracle.com/javase/1.5.0/docs/api/)

> 公共无效 setWrapStyleWord（布尔字）

如果文本区域是换行，则设置使用的换行样式。如果设置为 true，如果行太长而无法容纳在分配的宽度内，则行将在字边界（空白）处换行。如果设置为 false，行将在字符边界处换行。默认情况下，此属性为 false。参数： word - 指示是否应将字边界用于换行 另请参阅：getWrapStyleWord()

# .htaccess - .htaccess 重定向到子文件夹偶尔会起作用

> ID：11300102
> 
> 赞同：2
> 
> 时间：2012-07-02T19:40:30.340
> 
> 标签：.htaccess, redirect

我有一个从子目录运行的站点 - 托管在 HostGator 上。大多数 htaccess 规则都可以重定向到子目录，除了一个。

如果我去 example.com/products - 我得到一个不可见的重定向到 example.com/subfolder/products - 它在地址栏中正确显示为 example.com/products

但是，如果我转到 example.com/news - 我得到一个可见的重定向到 example.com/subfolder/news - 它在地址栏中错误地显示为 example.com/subfolder/news

以下是我在根文件夹中使用的 .htaccess 代码：

```
RewriteEngine on
RewriteRule ^$ /subfolder/ [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /subfolder/$1 [L] 
```

供参考：如果我在浏览器中输入 example.com/news，我会明显地重定向到 example.com/subfolder/news - 但是，如果我第二次在浏览器中输入 example.com/news，我会被隐形重定向！

Google 已抓取该网站并提供可见的重定向网址（因此它们在 Google 中显示为 example.com/subfolder/news）

更新：

在该`.htaccess`文件中，我拥有它的唯一另一行`Options -Indexes`

在子文件**夹** `.htaccess`文件中我也有

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [L,QSA]

ErrorDocument 403 http://www.example.com/403
ErrorDocument 404 http://www.example.com/404
ErrorDocument 500 http://www.example.com/500 
```

如果这有任何影响，我和 HostGator 在一起？

# r - 如何在 R 中将 RgoogleMaps PNG 转换为 SpatialGridDataFrame？

> ID：11300107
> 
> 赞同：3
> 
> 时间：2012-07-02T19:40:44.817
> 
> 标签：r, png, gdal, rgooglemaps

我使用 RgoogleMaps 包中的 GetMap() 函数导出了一个“静态地图”。我可以将它（MyMap）以 PNG 格式保存到我的硬盘中。但是，它会失去空间参考。

有没有人成功地从这样的 PNG 创建空间对象（在 GDAL 可读数据格式的意义上）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T21:14:20.993

将您的`RGoogleMaps`对象作为`MyMap`. 让它下载磁贴以`MyTile1.png`使用`raster`包。

```
bb = MyMap$BBOX
t = stack("MyTile.png")
extent(t)=extent(bb$ll[,2],bb$ur[,2],bb$ll[,1],bb$ur[,1]) 
```

现在`t`是一个栅格堆栈。做`plotRGB(t)`，你应该看到它。现在您可以尝试`writeRaster`创建一个 GDAL 数据源。GeoTIFF 也许？

并注意那个讨厌的谷歌图片使用协议......

# cytoscape-web - Cytoscape.js 中的 CustomMapper？

> ID：11300108
> 
> 赞同：2
> 
> 时间：2012-07-02T19:40:47.017
> 
> 标签：cytoscape-web

我需要创建一个图，其中边缘宽度基于边缘属性值之一。通过查看[https://github.com/cytoscape/cytoscape.js/wiki/StyleObject](https://github.com/cytoscape/cytoscape.js/wiki/StyleObject)，我看到 Cytoscape 有一个 distinctMapper/passthroughMapper/continuousMapper 但这些都不能让我访问边缘属性。但是，查看源代码还有一个 customMapper，它基于以前的 Cytoscape 文档（[http://cytoscapeweb.cytoscape.org/documentation/mappers](http://cytoscapeweb.cytoscape.org/documentation/mappers)）将允许我访问边缘属性并根据它们返回宽度。我该怎么做呢？在我尝试的样式对象内部：

```
...
width: { customMapper: { functionName: "widthMapper" } },
... 
```

和

```
var widthMapper = function(data) 
{
    console.log(data);
}; 
```

在初始化调用之前。通过为函数设置断点，我发现它永远不会被调用。我做错了什么，我是否需要在 Cytoscape 对象的某处添加映射器函数以便它可以看到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:16:47.237

正确的语法是

```
...
width: { customMapper: widthMapper },
... 
```

# c# - 有没有办法让代码在 ASP.NET Web 应用程序中按时间安排运行？

> ID：11300116
> 
> 赞同：2
> 
> 时间：2012-07-02T19:41:26.147
> 
> 标签：c#, asp.net, scheduled-tasks

我有一个 ASP.NET Web 应用程序，可以访问服务器上的数据库。我需要的是一种在给定时间表上在后台运行代码的方法，该时间表可以从另一个来源自动更新服务器数据库。

我知道如何在 Windows 应用程序中通过添加计时器、将函数链接到计时器滴答事件并启动计时器来执行此操作。我不知道如何在网络应用程序中执行此操作。

是否有 Web 应用程序的启动事件，或者无论任何用户在网站上做什么，我都可以启动这个后台进程的地方？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T19:44:47.910

您不应该在 ASP.NET 网站中执行此操作 - 这是一个主要的禁忌。您认为在后台 .exe 上使用计时器是正确的。您应该考虑创建 Windows 任务（由服务器任务计时器执行的控制台 .exe）或 Windows 服务。我建议使用 Windows 服务，因为这是标准做法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T19:44:12.540

如果您可以访问托管您网站的计算机，我会编写一个从任务计划程序运行的小应用程序。

Web 服务器并不意味着处理长时间运行的后台任务。这是错误的工具。

如果您无法访问托管计算机，那么我建议您构建某种界面，让另一台计算机重建数据库并上传它。我在最宽松、最广泛的意义上使用术语“接口”和“上传”——应用你自己的定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T19:48:34.753

几个月前我自己也在寻找解决方案，尽管到目前为止我还没有足够的时间尝试，但我想我可以与你分享链接。也许你会发现它很有帮助。

如果是，请在这里告诉我。

[http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)

[如何在 ASP.NET 中使用 Quartz.net](https://stackoverflow.com/questions/1356789/how-to-use-quartz-net-with-asp-net)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T19:48:49.013

您可以使用 Windows 服务或使用 Timer Control（在 Ajax 类别中）

![在此处输入图像描述](../Images/ed6c70396334b7f762a16a3a280d4062.png)

或者

![在此处输入图像描述](../Images/d2e976e38807e14fe4919d6cc17f5984.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T20:05:28.893

正如其他答案所述，执行此完整功能 - 更新数据库并将其安排为 ASP.NET 应用程序正在使用错误的工具来完成这项工作。

ASP.NET 可用于更新数据库 - 这是完全有效的。它发生故障的地方是计时器。 ***ASP.NET 应用程序并不意味着长时间运行，这是计时器工作所必需的。***

如果你能做到，我强烈建议使用其他人建议的方法——Windows 服务或计划任务。

但是，如果除了发布 ASP.NET 代码之外，您无权访问实际服务器 - 您无法安装服务，也无法设置 Windows 应用程序以按计划运行，这里有一个问题-盒子的想法。

* * *

设置执行更新的 Web 服务或 ASPX 页面，然后从您控制的机器上的计划任务中调用该页面。

因此，如果这是在[http://www.someserver.net/updatedb.aspx](http://www.someserver.net/updatedb.aspx)，那么您没有理由不能在自己的 PC 上设置计划任务来调用该 URL。

我认为这是仅当您无法执行其他选项之一时才使用的最后解决方案。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-02T19:45:47.250

global.asax.cs 文件有一个在应用程序启动时触发的方法：Application_Start。您可以在该事件中连接您的计时器方法。请注意，根据 IIS 的配置方式，您的应用程序池可能会关闭。例如，如果没有人在 20 分钟内点击该站点。只需确保您必须每 X 分钟运行一次，并且将 IIS 配置为始终运行并启动您的应用程序。这比听起来要难。最后，您可能希望使用常规的 Windows 计划任务。

# mirth - mirth 管理员不会加载某些用户帐户

> ID：11300117
> 
> 赞同：0
> 
> 时间：2012-07-02T19:41:29.700
> 
> 标签：mirth

我在 Windows 服务器上有一个 mirth 系统。系统运行正常。然后，突然间，我只能在 Windows Server 上以管理员身份登录时才能启动 Mirth Administrator。对于所有其他帐户，如果我右键单击系统托盘中的 mirth 图标，单击运行管理员并提供我的凭据，Mirth 将挂在“加载首选项”上。如果我没有以管理员身份登录，则 Mirth 服务器管理器菜单中的所有按钮都显示为灰色，如果我单击确定，我会收到一条错误消息，提示“无法保存文件 conf\mirth.properties”

似乎 Mirth 突然无法与 mirthdb 通信——可能是因为权限问题。但我不知道为什么。

我对系统所做的唯一更改是安装 .NET 4。

关于如何调试这个的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:48:43.400

我不确定为什么您的用户首先有权访问，但根据我的经验，对于所有适用的非管理帐户、AD 安全组等，您需要授予对 C:\Program Files 的读/写权限\欢笑。此外，如果您已将 Mirth Service 配置为在特定的非管理帐户下运行，则该帐户还需要 Mirth 文件夹的权限。

但是，还有另一种访问 Mirth Administrator 的方法。不要直接登录服务器，而是在本地计算机上打开 Web 浏览器，然后导航到：

```
http://myservername:8080 
```

您应该会看到一个网页，上面有一个标有“Launch Mirth Connect Administrator”的按钮。只要您在本地机器上安装了 JVM，您就应该能够直接从那里加载和启动 Mirth Administrator。

# wpf - WP7 ListBox 绑定不更新

> ID：11300118
> 
> 赞同：0
> 
> 时间：2012-07-02T19:41:30.450
> 
> 标签：wpf, silverlight, windows-phone-7

我已经坐在这个问题上几个小时了，我有这个部分 xaml 代码：

```
<TextBlock Text="{Binding temprature}" Height="30" HorizontalAlignment="Left" Margin="13,119,0,0" Name="textBlock1" VerticalAlignment="Top" Width="68" />
            <TextBlock Height="30" HorizontalAlignment="Left" Name="commentsTextBlock" Text="Comments:" VerticalAlignment="Bottom" Margin="12,0,0,-31" />
            <ListBox Margin="2,785,-14,-33" ItemsSource="{Binding comments}" DataContext="{Binding}" Name="commentsListBox">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,17">
                            <StackPanel Width="311">
                                <TextBlock Text="{Binding poster_username}" TextWrapping="NoWrap" Style="{StaticResource PhoneTextSubtleStyle}" TextTrimming="WordEllipsis" Width="Auto" Foreground="White" FontFamily="Segoe WP Semibold" />
                                <TextBlock Text="{Binding comment_text}" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}" TextTrimming="WordEllipsis" MaxHeight="100" />
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

我有这个类（线程），其中包括一个应该显示在 ListBox 中的评论列表。

```
 public class Thread : INotifyPropertyChanged
{
    public string title { get; set; }
    public string deal_link { get; set; }
    public string mobile_deal_link { get; set; }
    public string deal_image { get; set; }
    public string deal_image_highres { get; set; }
    public string description { get; set; }
    public string submit_time { get; set; }
    public bool hot_date { get; set; }
    public string poster_name { get; set; }
    public double temperature { get; set; }
    public double price { get; set; }
    public int timestamp { get; set; }
    public string expired { get; set; }
    public Forum forum { get; set; }
    public Category category { get; set; }
    public object merchant { get; set; }
    public object tags { get; set; }
    public int thread_id { get; set; }
    public string visit_link { get; set; }
    public string hot_time { get; set; }
    public int comment_count { get; set; }
    public string availability { get; set; }
    public string can_vote { get; set; }
    public string seen { get; set; }

    public List<Comment> comments { get; set; }
    public event PropertyChangedEventHandler PropertyChanged;

    public void Convert2Unicode()
    {
        UnicodeEncoding unicode = new UnicodeEncoding();
        Byte[] encodedBytes = unicode.GetBytes(title);
        title = String.Format("[{0}]", title);

    }

    private void NotifyPropertyChanged(String propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (null != handler)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public void SetComments(string content)
    {
        PaginatedComments commentsList;
        this.comments.Clear();

        DataContractJsonSerializer serializer =
        new DataContractJsonSerializer(typeof(PaginatedComments));
        using (MemoryStream ms = new MemoryStream(Encoding.Unicode.GetBytes(content)))
        {
            commentsList = (PaginatedComments)serializer.ReadObject(ms);
        }

        foreach (var thread in commentsList.data.comments)
        {
            this.comments.Add(thread);
        }

    }
    public Thread()
    {
        comments = new List<Comment>();

    }
    public void addComments()
    {
        List<string> parameters = new List<string>();
        parameters.Add("thread_id=" + thread_id);
        parameters.Add("results_per_page=10");
        parameters.Add("page=1");
        // Set the data context of the listbox control to the sample data
        APICalls.makeRequest(APICalls.ViewingPaginatedComments, parameters, SetComments);

    }
    //
    // Sets the "Seen" variable depending if the item is new (since the last time the application was opened
    //
    public void updateNewItems()
    {
        try
        {
            int last_seen = (int)IsolatedStorageSettings.ApplicationSettings["lastrun"];

            if (last_seen < timestamp)
            {
                seen = "New";
            }
            else
            {
                seen = "";
            }
        }
        catch (System.Exception e)
        {
            IsolatedStorageSettings.ApplicationSettings["lastrun"] = APICalls.GetIntTimestamp();
            IsolatedStorageSettings.ApplicationSettings.Save();
            MessageBox.Show(e.Message);
        }

        IsolatedStorageSettings.ApplicationSettings["lastrun"] = APICalls.GetIntTimestamp();
        IsolatedStorageSettings.ApplicationSettings.Save();

    }
}
public class Comment
{
    public string poster_username { get; set; }
    public string post_date { get; set; }
    public string comment_text { get; set; }
    public int timestamp { get; set; }
    public int like_count { get; set; }
    public string comment_edit_text { get; set; }
}

public class CommentData
{
    public List<Comment> comments { get; set; }
    public int comment_count { get; set; }
    public int total_comments { get; set; }
}

public class PaginatedComments
{
    public string response_status { get; set; }
    public CommentData data { get; set; }
} 
```

如果我在将 DataCotext 更改为此特定线程之前将评论加载到线程中。显示了评论，但是当我在更改 DataContext 并导航到页面后更新评论时，没有显示评论（我在 xaml 页面的其余部分中还有其他字段绑定到同一个实例并且它们工作得很好。只有评论不起作用！

我真的很感谢你的帮助！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T19:52:28.543

你应该使用

```
public ObservableCollection<Comment> comments{ get; set;} 
```

代替

```
public List<Comment> comments { get; set; } 
```

每当添加或删除其中一项（在本例中为 Comment ）时，ObservableCollection 都会向视图发送更新通知。

注意：它不会更新 Comment 。要将项目绑定到 Comment 更新，Comment 必须实现 INotifyPropertyChanged。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T19:58:01.487

您的属性是一个简单的`List<T>`. 当某些事情发生变化时，需要使用事件向 Silverlight 发出信号。

A`List<T>`在添加/删除项目时不会引发任何事件，因此 Silverlight 无法检测到新项目，因此不会更新 UI。完成这项工作的最简单方法通常是使用 an[`ObservableCollection<T>`](http://msdn.microsoft.com/en-us/library/ms668604%28v=vs.95%29.aspx "可观察集合")而不是列表。此集合将引发 Silverlight 知道要侦听的事件。

请注意，要使其正常工作，您不应从 U/I（调度程序）线程以外的任何其他线程调用 Add/Remove/Clear，因为 Silverlight 控件不是线程安全的（并且事件在执行添加/删除/清除呼叫）。为此，只需确保从 SetComments 方法调用[Dispatcher.BeginInvoke](http://msdn.microsoft.com/en-us/library/cc190259%28v=vs.95%29.aspx)（因为无论您的获取机制是什么，它似乎都是一个回调）。

或者，您也可以在获取评论时重新生成一个全新的 List 对象，并在 SetComments 方法中引发 NotifyPropertyCHanged 事件，但这会导致丢失当前选择并将列表重置为顶部，这可能不是您想要的做。

# android - 从 sd 卡加载 Android 文件

> ID：11300121
> 
> 赞同：1
> 
> 时间：2012-07-02T19:41:42.993
> 
> 标签：android, file-upload, android-sdcard, android-file

我正在尝试使用 http post 进行文件上传，但是当我尝试使用手机上的 micro-sd 卡中的文件时，它不会创建它以便我可以上传它。从手机主存储中选择文件时，它可以完美地工作，而不是从 sd 卡中选择文件。

我为文件选择对话框使用了一个外部库，当我尝试从 sd 卡中选择图像时，它会返回这个（在这个例子中，它是从相机应用程序拍摄的照片）： `/sdcard-ext/dcim/Camera/2012-07-02_12-28-19_548.jpg`

这是从我在手机的操作系统文件中找到的随机图像返回的： `/sdcard/DCIM/.thumbnails/1331049921270.jpg`我知道这个看起来也像它在 SD 卡上（或者至少对我来说是这样），但这绝对是手机的存储空间。

这是我目前用于文件上传的代码： HttpClient httpclient = new DefaultHttpClient(); httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);

```
 HttpPost httppost = new HttpPost(myURL);

    MultipartEntity mp = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

    String mimeType = getFileMimeType(filePath);//the filePath is passed to the function
    that this code is contained inside and is initially sent from the file selection dialog
    mp.addPart("fileupload", new FileBody(new File(filePath), mimeType));

    httppost.setEntity(mp);

    String response = EntityUtils.toString( httpclient.execute( httppost ).getEntity(), "UTF-8" );
    System.out.println(response);

    httpclient.getConnectionManager().shutdown(); 
```

如果有人能解释为什么这适用于手机的内部存储而不是可移动 sd 卡，那就太好了！谢谢。

更新：如果这有什么不同，我的目标是 Android 2.2。如果它没有任何区别，我仍然针对 Android 2.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:33:53.140

添加

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

注意：您还应该在 logcat 中看到“权限被拒绝”错误，它应该提醒您注意这个问题。

**编辑：** 抱歉，只需从您需要的外部存储中读取：

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

# javascript - 已加载 jquery，但未执行正确的 UI 功能

> ID：11300126
> 
> 赞同：0
> 
> 时间：2012-07-02T19:42:02.180
> 
> 标签：javascript, jquery

我有一个验证脚本，我想检查名字字段是否留空。我最初只是更改了字段的背景颜色并且效果很好，但现在我想使用 jquery 淡入一个突出显示。这是到目前为止的代码。

```
var x = document.forms['getinfo']['fname'].value;
var validated = true;
if (x==null || x =="") { 
    //document.getElementById('trfname').style.background="#FF9999";
    document.getElementById('trfname').style.borderRadius = '7px';
    $("trfname").effect("highlight", {}, 3000);
    validated = false;
} 
```

如您所见，我注释掉了有效的旧 javascript 代码，我正在尝试使用 jquery highlight 功能。它不起作用，我想知道是否有人有一些意见。我已经检查了 Jquery 是否正确加载并且确实如此，所以不是那样的。我还包括了 jquery-ui 库，但无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T19:44:49.807

您正在寻找一个名为 的元素`trfname`，而不是一个 id。添加缺少的`#`.

```
$("#trfname").effect("highlight", {}, 3000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T19:55:14.847

```
var x = $('form[name="getinfo"] input[name="fname"]').val();
var validated = true;
if (x.length < 1) { 
    $('#trfname').css('border-radius', '7px').effect("highlight", {}, 3000);
    validated = false;
} 
```

# wcf - 如何枚举所有当前正在执行的 WCF 操作？

> ID：11300127
> 
> 赞同：5
> 
> 时间：2012-07-02T19:42:05.197
> 
> 标签：wcf, .net-4.0

我想获取/创建所有当前正在执行的操作的集合并选择元数据（可从 OperationContext 获得）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T11:01:02.807

[阅读这篇](http://www.danrigsby.com/blog/index.php/2008/03/30/async-operations-in-wcf-canceling-operations/)文章，是否有库可以在 WCF 中排队并最终取消异步操作。它对您的情况很有用。

如果您计划构建监视工具您可以使用 Windows Server 上的 appfabric 框架托管 WCF 服务。Appfabric 提供了一个 IIS 扩展，可以配置为跟踪和记录对 SQL Server DB 的 WCF 调用，并在 IIS 管理控制台中具有监视仪表板。更多信息[在这里](http://blogs.msdn.com/endpoint/archive/2010/01/11/monitoring-and-troubleshooting-with-net-4-and-windows-server-appfabric.aspx)和[这里](http://jeremyronk.wordpress.com/2012/01/09/monitoring-wcf-service-with-appfabric/)。

# encryption - 使用“灾难恢复”在内存和存储受限的系统上加密和/或解密大文件 (AES)

> ID：11300128
> 
> 赞同：4
> 
> 时间：2012-07-02T19:42:07.203
> 
> 标签：encryption, cryptography, aes, large-files, on-the-fly

我有一个相当笼统的问题，所以如果它有点含糊，请原谅。

所以，让我们假设一个 1GB 的文件，需要在给定的系统上加密然后解密。

问题是系统只有不到 512 MB 的可用内存和大约 1.5 GB 的存储空间（给予或接受），因此，对于“板载”文件，我们有大约 500 MB 的“硬盘暂存空间”和不到 512 mb RAM“玩”。

系统在加密或解密期间的任何时候都不太可能遇到“计划外断电”，并且需要在再次通电后能够成功恢复加密/解密过程（这似乎是一个额外令人不快的坚果处理）。

问题是：

*1）它是否可行:)*？

*2）什么是最好的策略*

a) 使用如此小的暂存空间进行加密/解密（在解密/加密时不能将整个文件放在周围，需要以某种方式“即时”截断它......）

和

b) 实施可以在这种受限环境中工作的灾难恢复？

PS：使用的密码必须是AES。

我专门研究了 AES-CTR，但在无法将整个解密文件保留到最后的环境中，灾难恢复恶作剧似乎并不是那么好……

[编辑添加]我想我会按照 Iserni 的方式来做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T20:27:45.420

这是可行的，只要您有办法将 AES 状态向量与文件位置一起保存。

1.  将 AES 状态和文件位置 P 保存到文件 STAGE1 和 STAGE2
2.  读取一大块（比如 10 兆字节）的加密/解密数据
3.  将解密/加密的块写入外部暂存器 SCRATCH
4.  记录 SCRATCH 已完成的事实
5.  在相同位置的原始文件上写入 SCRATCH
6.  记录 SCRATCH 已成功复制的事实
7.  转到 1

如果您在第 1 阶段后遇到严重崩溃，并且 STAGE1 和 STAGE2 不一致，您只需重新启动并假设 P 最早的阶段是好的。如果您在第 2 阶段期间或之后发生严重崩溃，您将损失 10 兆字节的工作量：但是 AES 和 P 很好，因此您只需重复第 2 阶段。如果您在第 3 阶段崩溃，那么在恢复时您将找不到阶段 4 的标记，因此会知道 SCRATCH 不可靠，必须重新生成。拥有 STAGE1/STAGE2，您可以这样做。如果您在第 4 阶段崩溃，您将相信必须重新生成 SCRATCH，即使您可以避免这种情况 - 但在重新生成过程中除了一点时间之外您不会损失任何东西。出于同样的原因，如果您在第 5 阶段或在第 6 阶段提交到磁盘之前崩溃，您只需重复第 5 和第 6 阶段。您知道您不必重新生成 SCRATCH，因为第 4 阶段已提交到磁盘。

所有这一切都假设 10 MB 大于缓存（如果写回，则为操作系统 + 硬盘）的数据价值。如果不是，请提高到 32 或 64 MB。恢复将成比例地变慢。

如果这些功能可用，则在每个写入阶段完成后刷新（）和同步（）可能会有所帮助。

总写入时间比正常的两倍多一点，因为需要“写入两次”才能确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T19:51:32.533

您必须分块处理大文件。断开文件的一部分，对其进行加密，然后将其保存到磁盘；保存后，丢弃未加密的部分。重复。要解密，抓取一个加密的片段，解密它，存储未加密的块。丢弃加密的片段。重复。完成解密片段后，将它们连接起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T20:22:48.327

这当然是可行的。

“最大”（但一点也不大）的问题是，当您加密 128 Mb 的原始数据时，您需要将它们从源文件中删除。为此，您需要将文件的其余部分复制到开头，然后截断文件。这需要时间。在这一步可以关闭电源，但你并不在意——你知道你加密的数据的大小（如果你通过大小多到 16 字节的块来加密数据，加密数据的大小将是等于已经或必须从解密文件中删除的大小）。不幸的是，发明这个方案似乎比解释它更容易:)，但除了额外的复制操作会减慢这个过程之外，我真的没有看到任何问题。不，有'

# ios - 从 Adob e Air iOS 应用程序中删除图标光泽效果？

> ID：11300130
> 
> 赞同：4
> 
> 时间：2012-07-02T19:42:18.067
> 
> 标签：ios, flash, air, icons

使用 Adob​​e Air 编译 iOS 应用程序时，如何防止 iTunes 添加默认光泽效果？使用 Adob​​e Flash CS6。. . .

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T06:42:52.220

将以下内容添加到应用程序描述符文件中的 InfoAdditions 元素：

```
<InfoAdditions> 
    <![CDATA[ 
        <key>UIPrerenderedIcon</key> 
        <true/> 
    ]]> 
</InfoAdditions> 
```

来自：[http ://help.adobe.com/en_US/air/build/WS901d38e593cd1bac1e63e3d129907d2886-8000.html](http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac1e63e3d129907d2886-8000.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T20:01:04.143

这将要求您向应用程序的 info.plist 文件添加一个布尔 UIPrerenderedIcon 键并将其值设置为 true。

为此，请按照以下步骤操作：

1.  将 Flash CS6 生成的 .ipa 文件的扩展名更改为 .zip。
2.  解压缩文件并右键单击以查看应用程序的内容，该内容应位于名为“Payload”的目录中。
3.  找到并编辑 info.plist 文件，添加上面提到的 UIPrerenderedIcon 键/值对。

# android - 从扩展文件播放声音文件

> ID：11300137
> 
> 赞同：2
> 
> 时间：2012-07-02T19:42:44.287
> 
> 标签：android, android-mediaplayer, android-resources, apk-expansion-files

我有一个包含一系列声音文件的扩展文件。较长的是 .mp3 文件，而较短的音效是 .wav 文件。我将它们打包成一个没有压缩的 .zip 文件。我使用 Google 提供的 Zip 文件阅读器和下载器库。

我正在像这样打开声音文件：

```
MediaPlayer mPlayer;

...
AssetFileDescript asd = expansionFile.getAssFileDescriptor(fileName);
FileDescriptor soundFile = asd.getFileDescriptor();
mPlayer = new MediaPlayer();
mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
mPlayer.setDataSource(soundFile);
mPlayer.prepare();
mPlayer.start(); 
```

奇怪的是它每次都播放相同的声音文件。它似乎是它首先找到的任何东西。`asd.getDeclaredLength()`和的字节大小`asd.getLength()`正是它应该的大小。这意味着文件描述符至少可以找到文件，但由于某种原因，MediaPlayer 会播放它决定的任何随机文件。

我到底在这里想念什么？任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T21:17:22.357

第一个近似值是正确的，除非 zip 文件包含多个文件，否则您应该使用：

```
mPlayer.setDataSource(asd.getFileDescriptor(), asd.getStartOffset(), asd.getLength()); 
```

您可以从其他问题中获得更多信息： [Play audio file from the assets directory](https://stackoverflow.com/questions/3289038/play-audio-file-from-the-assets-directory)

请记住在 setDataSource 到媒体播放器之后关闭 AssetFileDescriptor：

```
asd.close(); 
```

[http://developer.android.com/reference/android/media/MediaPlayer.html#setDataSource%28java.io.FileDescriptor,%20long,%20long%29](http://developer.android.com/reference/android/media/MediaPlayer.html#setDataSource%28java.io.FileDescriptor,%20long,%20long%29)

# iphone - 直到 pushViewController 才应用外观更改

> ID：11300138
> 
> 赞同：0
> 
> 时间：2012-07-02T19:42:44.193
> 
> 标签：iphone, objective-c, ios, ipad, ios5

我想构建对象，然后用它打开一个控制器。构建最多可能需要 5 秒，我想在它处理时显示一条消息。
我有以下实现`didSelectRowAtIndexPath`：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    messageView.hidden = NO;

    // Some methods

    Controller *ctrl = [Controller new];
    [self.navigationController pushViewController:ctrl animated:YES];
} 
```

一切都很好，但有一个问题：`messageView`仅在推送动画开始时出现。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:20:25.423

它没有显示，因为您在构建对象时阻塞了主线程。

在您将控制权返回给运行循环之前，用户界面不会更新。

解决方案是在后台线程上构建对象，最简单的方法是使用 libdispatch，如下所示：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    messageView.hidden = NO;

    // you may want to disable user interaction while background operations happen

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

        // Perform your lengthy operations here

        Controller *ctrl = [[Controller alloc] init];

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.navigationController pushViewController:ctrl animated:YES];
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:23:09.403

与乔纳森的回答类似，稍微延迟推送以使 messageView 有时间出现。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    messageView.hidden = NO;

    int64_t oneMillisecond = NSEC_PER_MSEC;
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, oneMillisecond), dispatch_get_main_queue(), ^(void){
        // Some methods

        Controller *ctrl = [Controller new];
        [self.navigationController pushViewController:ctrl animated:YES];
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T19:53:47.497

如果你想要一个`UIAlertView`你可以使用这个代码：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title..." message:@"More?" delegate:nil cancelButtonTitle:nil otherButtonTitles:nil];
    [alert show]; 
```

完成后，您可以调用它来关闭：

```
[alert dismissWithClickedButtonIndex:0 animated:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T20:11:03.453

你可以试试这个：

```
[UIView animateWithDuration:0.5f delay:0.0f options:UIViewAnimationCurveLinear animations:^(void)
{
    messageView.hidden = NO;
}
completion:^(BOOL finished)
{
    Controller *ctrl = [Controller new];
    [self.navigationController pushViewController:ctrl animated:YES];
}]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T20:21:00.437

在您的 didSelectRowAtIndexPath 调用期间，视图可能不会重绘。

所以...我会尝试在一个块中运行长时间运行的方法。然后用你的 messageView 动画阻止主线程，并让你的块发布通知或关闭它的东西。

您可能需要某种条件让 messageView 在一段时间后自行关闭。

# c# - 从 ServiceBase 派生时是否调用基本构造函数？

> ID：11300141
> 
> 赞同：6
> 
> 时间：2012-07-02T19:43:00.743
> 
> 标签：c#, .net

[System.ServiceProcess.ServiceBase](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.servicebase)类构造函数的 Microsoft .NET 文档说：

> 如果重写基类构造函数，则应在派生类的构造函数中显式调用它。

在Microsoft C# Programming Guide 中的[Using Constructors中，它说：](http://msdn.microsoft.com/en-us/library/ms173115.aspx)

> 在派生类中，如果未使用 base 关键字显式调用基类构造函数，则隐式调用默认构造函数（如果有）。

那么我是否需要显式调用基本构造函数，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T19:49:18.110

没关系。这些编译为相同的 IL：

```
public class Service1 : ServiceBase
{
    public Service1() : base() { }
}
public class Service1 : ServiceBase
{
    public Service1() { }
} 
```

我不知道为什么`ServiceBase`建议明确调用它。我会接受另一个建议，因为它似乎更有意义。

# c# - 将嵌套的 XML 反序列化为类

> ID：11300143
> 
> 赞同：2
> 
> 时间：2012-07-02T19:43:09.060
> 
> 标签：c#, xml, deserialization

我有以下 XML：

```
<Root>
   <EventSet>
      <Event>
         <id>12345</id>
         <rant>
            <localTime>
               <dst>true</dst>
               <time>7/2/2012 14:30</time>
            </localtime>
            <randomRant>
               <random>to illustrate point</random>
               <rant>help me!</rant>
            </randomRant>
         </rant>
      </Event>
      <Event>/*another event*/</Event>
      <Event>/*another event*/</Event> //etc
   </EventSet>
</Root> 
```

我想将此映射到：

```
[Serializable] 
public class Events  
{      
     public List<Event> events { get; set; } 
}  

[Serializable] 
public class Event 
{      
    public int id { get; set; }      
    public Rant rant { get; set; } //this is where I get confused
} 
```

***问题**：如何序列化其中的标签`<rant>`？在子标签没有子标签之前，我是否继续制作父类的序列化类？例如，下面：*

```
[Serializable] 
public class Rant
{      
    public LocalTime localTime { get; set; }      
    public RandomRant randomRant { get; set; }
}

[Serializable] 
public class LocalTime
{      
    public bool dst { get; set; }
    public DateTime time { get; set; }
}

[Serializable] 
public class RandomRant
{      
    public string random { get; set; }
    public string rant { get; set; }
} 
```

*还是有更好的方法？*

**编辑：**一个给定的`event`有一个，只有一个`id`，一个，只有一个`rant`。为了我的问题，假设我的类型是有效的。我希望将嵌套的 XML 反序列化为一个对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T19:54:34.260

你给出的例子对我来说似乎很好。至于时间值，您示例中的日期格式与 xsd:dateTime 不兼容，因此您不能只做

```
public DateTime time { get; set; } 
```

这不会被序列化。尽管您可以使用自定义 XmlSerializer 破解此问题，但更简单的方法是使用：

```
[XmlIgnore]
public DateTime _time {
    get { return DateTime.ParseExact(this.time, "MM/dd/YYYY HH:mm", CultureInfo.InvariantCulture);} // or use some specific culture here.
}

[XmlElement]
public string time { get; set; } 
```

更新： `public List<Event> events`将被反序列化为：

```
<events>
    <Event></Event>
    <Event></Event>
    <Event></Event>
</events> 
```

您可以将其设置为：

```
[XmlElement("Event")]
public List<Event> events {get; set} 
```

它将被序列化为

```
 <Event></Event>
    <Event></Event>
    <Event></Event> 
```

没有包装。

或者，使用：

```
[XmlArray("EventSet")]
[XmlArrayItem("Event")]
public List<Event> events {get; set} 
```

将按照示例中的描述进行序列化

```
<EventSet>
    <Event></Event>
    <Event></Event>
</EventSet> 
```

当然还有根元素：

```
[XmlRoot("Root")]
public class RootElement{
    [XmlArray("EventSet")]
    [XmlArrayItem("Event")]
    public List<Event> events {get; set}
} 
```

# python - 使用 python 将 sqlite3 文件导出到 csv 时不会得到重复的值？

> ID：11300146
> 
> 赞同：0
> 
> 时间：2012-07-02T19:43:25.160
> 
> 标签：python, csv, sqlite

我有一个 sqlite3 数据库，它有多个（六个）表，我需要将它导入到 csv，但是当我尝试导入它时，如果一个列（在一个表中）大于另一个（在另一个桌子）。

即：这就是我的 sqlite3 数据库文件的样子：

```
column on table1     column on table2   column on table3
25                   30                 20
30 
```

这是 .csv 文件的结果（使用[此](https://stackoverflow.com/questions/4264379/it-is-possible-export-table-sqlite3-table-to-csv-or-similiar)脚本作为示例）

```
25,30,20
30,30,20 
```

这是我需要它显示的结果：

```
25,30,20
30 
```

编辑：好的，这就是我将值添加到每个表的方式，基于[python 文档示例](http://docs.python.org/library/sqlite3.html)（每次使用值条目时执行）：

```
import sqlite3
conn = sqlite3.connect('database.db')

c = conn.cursor()

# Create table
c.execute('''CREATE TABLE table
            (column int)''')

# Insert a row of data
c.execute("INSERT INTO table VALUES (value)")

# Save (commit) the changes
conn.commit()

# We can also close the cursor if we are done with it
c.close() 
```

有什么帮助吗？

-问候...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:51:38.123

这就是你可以做到这一点的方法。

```
import sqlite3

con = sqlite3.connect('database')
cur = con.Cursor()

cur.execute('select table1.column, table2.column, table3.column from table1, table2, table3')
# result should look like ((25, 30, 20), (30,)), if I remember correctly
results = cur.fetchall()

output = '\n'.join(','.join(str(i) for i in line) for line in results) 
```

注意：这段代码未经测试，是我写出来的，但我希望你能明白。

* * *

**更新：**显然我在脚本中犯了一些错误，并且不知何故 sql '神奇地'填充了结果（你现在可能已经猜到我不是 sql 大师 :D）。另一种方法是：

```
import sqlite3
conn = sqlite3.connect('database.db')

cur = conn.cursor()

tables = ('table1', 'table2', 'table3')
results = [list(cur.execute('select column from %s' % table)) for table in tables]

def try_list(lst, i):
    try:
        return lst[i]
    except IndexError:
        return ('',)

maxlen = max(len(i) for i in results)
results2 = [[try_list(line, i) for line in results] for i in xrange(maxlen)]

output = '\n'.join(','.join(str(i[0]) for i in line) for line in results2)
print output 
```

产生

```
25,30,20
30,, 
```

这可能是一种过于复杂的方法，但对我来说现在是 0:30，所以我不是最好的......
至少它得到了预期的结果。

# algorithm - 来自多个节点的映射的路径

> ID：11300147
> 
> 赞同：0
> 
> 时间：2012-07-02T19:43:25.470
> 
> 标签：algorithm, graph, combinations, graph-algorithm

我的图中有一组节点。每个节点由映射到另一个字符的两个整数组成。这个整数与其他一些字符一起再次形成一个映射到其他整数的节点。我有一组初始的 N 个字符。使用前 N-1 个字符并使用给定的映射，我想计算到达最后一个整数的所有可能方式。

例如：给定的映射是

```
 (1,2) goes to 3
 (3,4) goes to 5
 (3,6) goes to 7
 (1,4) goes to 6 
```

字符是 1,3,4,7。因此，使用整数 1、3、6 并形成节点并使用映射，我必须得到整数 7。

从上面的映射

```
 (1,4)  goes to 6.
  (3,6)  goes to 7. 
```

因此需要的结果。

这是某种遍历图，其中节点被定向

# api - Google 地球：使用 JAK 从 KML 检索图标 URL

> ID：11300148
> 
> 赞同：1
> 
> 时间：2012-07-02T19:43:27.843
> 
> 标签：api, url, kml, google-earth, jak

我目前正在使用 JAK（KML 的 Java API）与 Google 地球和自定义 KML 文件进行交互。我可以使用 Placemark p.getName() 或 point.getCoordinates() 之类的东西获取/设置地标的名称、描述、坐标；进入列表等。但我遇到的问题是获取用于图标的图像的 url。例如，如果我的 kml 文件中有这个地标（包含在 Document 中，然后是整个 KML 标签）：

```
 <Placemark>
    <name>Isla de Roatan</name>
    <description>
       Cruise Stop        
    </description>
    <Style>
        <IconStyle>
            <Icon>
                <href>http://maps.google.com/mapfiles/kml/shapes/airports.png</href>
            </Icon>
        </IconStyle>
    </Style>
    <Point>
      <coordinates>-86.53,16.337461,0</coordinates>
    </Point>
  </Placemark> 
```

我怎样才能抓住那个 png url 说，放入一个单独的 String 对象？我在 Style 中看到了 .getIconStyle，在 IconStyle 中看到了 .getIcon，在 Icon 中看到了 .getHttpQuery，但是除了 .getStyleSelector 和 .getStyleUrl 之外，没有任何东西可以链接到从 Placemark/Feature 中查看 Style。您可以使用其中一个或样式图来做到这一点吗？我不确定我是否完全掌握其中每一个的作用。另外反过来，可以做些什么来设置这个 URL？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:05:41.083

`Feature.getStyleSelector()`返回一个`List<StyleSelector>`。 `Style`是 的子类`StyleSelector`，因此您的 Style 应该在此列表中（以及为 Feature 定义的任何其他 Styles 和 StyleMaps）。

设置样式（和图标 URL）：

```
Placemark placemark = ...;

Style myStyle = new Style().withId("my_style");
myStyle.withIconStyle(new IconStyle().withIcon(new Icon().withHref("http://someurl")));

placemark.addToStyleSelector(myStyle); 
```

获取样式（和图标 URL）：

```
for (StyleSelector styleSelector : placemark.getStyleSelector())
{
    if (styleSelector.getId() == "my_style")
    {
        String href = ((Style)styleSelector).getIconStyle().getIcon().getHref();
    }
} 
```

# amazon-s3 - 有没有办法完全控制您的 EBS 卷快照？

> ID：11300154
> 
> 赞同：0
> 
> 时间：2012-07-02T19:43:54.223
> 
> 标签：amazon-s3, amazon-ec2

从[这个问题](https://stackoverflow.com/questions/5227791/why-cant-i-see-my-ebs-volume-snapshots-in-s3-from-aws-management-console)中，我了解到它们存储在 s3 上，但我们看不到它们。

我的问题真的是问是否有办法将它们存储在其他地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:04:03.097

你想达到什么目的？不，据我所知，没有办法将它们存储在其他地方，您为什么要这样做？S3 便宜且冗余，并且易于从中恢复。

S3 可能有一些性能问题，但只有当您尝试做一些它不打算做的事情时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:37:56.687

EBS 快照由 S3 支持，但不在您的账户有权访问的存储桶中。它们不能通过 S3 直接访问。

# jquery - 使用相同的成功和错误回调在backbone.js 中重新触发collection.fetch

> ID：11300159
> 
> 赞同：0
> 
> 时间：2012-07-02T19:44:10.150
> 
> 标签：jquery, backbone.js

我有一个基本的集合，可以对准备好的文档进行提取：即：

```
message_list.fetch({

            success: function(){
                console.log('success');
                //render
                grid_view.render();
            },
            error: function(xhr, text, ajax){
                //set a column limit and retru
                console.log('retrying');
                urlParams.colLimit = true;
                $.ajax(this);
                return;
            },
            data: urlParams,
            processData:true
        }); 
```

这会从服务器中获取一个 json，该服务器正在使用 thrift 查询一个 hbase 表。对于某些帐户，hbase 中的数据集太大，内存不足并返回 500 响应。所以我想在添加新的查询参数后重新触发相同的 ajax 调用。查看 jquery .ajax 文档，它说要调用 $.ajax(this)，但这是窗口对象。xhr 变量也有空的成功函数。如何使用相同的属性和成功/错误函数重新触发相同的 ajax 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:49:39.417

这很容易——制作一个你可以存储并可以传回的对象：

```
var success_cb = function(){
    console.log('success');
    //render
    grid_view.render();
};

var error_cb = function(xhr, text, ajax){
    //set a column limit and retru
    console.log('retrying');
    urlParams.colLimit = true;
    $.ajax(this);
    return;
};

var fetch_options = {
        success: success_cb, 
        error: error_cb,
        data: urlParams,
        processData:true
}

message_list.fetch(fetch_options); 
```

只要 与`fetch_options`两个回调函数在同一范围内定义，并且`fetch_options`可以在该范围之外访问，任何可以访问的东西都`fetch_options`可以将其用作`.fetch`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:45:28.303

使用 Function.bind 将回调绑定到所需的上下文：success_cb.bind(desired_context) Function.bind 是 ECMAScript 5，因此您可能需要为其添加 shim。一个类似的选项是使用 $.proxy：[http ://api.jquery.com/jQuery.proxy/](http://api.jquery.com/jQuery.proxy/)

# c# - NHibernate Sum 总是四舍五入为整数

> ID：11300161
> 
> 赞同：1
> 
> 时间：2012-07-02T19:44:24.613
> 
> 标签：c#, nhibernate, fluent-nhibernate, linq-to-nhibernate

我对 Linq to NHibernate (C#) 中的总和有疑问。我无法得到任何总数的小数部分。我要在业务对象中求和的字段是 C# 十进制，而数据库中的映射字段是 DECIMAL(8,2)

总和不会引发任何异常，但我只得到一个整数（我在数据库中使用 SQL 检查，总和确实有小数）。

我对该字段的流利映射是：

```
Map(x => x.Importe).Column("importe").Nullable().CustomSqlType("DECIMAL(10,2)"); 
```

我尝试使用这些表达式和相应的没有演员表（十进制）的表达式，我总是得到相同的结果（对不起，我的业务对象是西班牙语，“importe”翻译为“金额”，而“vale”翻译为“凭证” =)

```
 var total1 = (from vale in session.Query<Vale>()
                select vale).Sum(c => c.Importe);

  var total2 = (from vale in session.Query<Vale>()
                select vale.Importe).Sum();

  var total3 = (from vale in session.Query<Vale>()
                select new { vale.Importe }).Sum(c => c.Importe); 
```

并转换为十进制（和十进制？）：

```
 var total1 = (from vale in session.Query<Vale>()
                select vale).Sum(c => (decimal) c.Importe);

  var total2 = (from vale in session.Query<Vale>()
                select (decimal) vale.Importe).Sum();

  var total3 = (from vale in session.Query<Vale>()
                select new { vale.Importe }).Sum(c => (decimal) c.Importe); 
```

输出 SQL 始终相同：

```
SELECT CAST(SUM(vale0_.importe) AS DECIMAL) AS col_0_0_ FROM vales vale0_ 
```

我认为的问题是“AS DECIMAL”，因为我发送了这个 SQL，但使用了“AS DECIMAL(8,2)”，我得到了正确的结果，但我不知道如何让 NHibernate 生成正确的 SQL。

我尝试将 .CustomSqlType("DECIMAL(10,2)") 附加到映射字段，和/或在映射中使用 .Precision(8).Scale(2) ，但没有。

我将 FluentNHibernate 与 NHibernate 3.2.0.4000 和 MySQL 5.5.19 一起使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:36:01.173

这可能与[NH-2347](https://nhibernate.jira.com/browse/NH-2347 "聚合函数内部的强制转换在它们之外被错误地应用")有关，这是我在 NH 3.0 中发现并在 3.3.0 中修复的错误。

尝试升级到最新版本。

# mysql - MySQL IFNULL、Alias 和 LEFT JOIN 导致 Unknown column 错误

> ID：11300171
> 
> 赞同：0
> 
> 时间：2012-07-02T19:45:20.430
> 
> 标签：mysql, left-join, alias, mysql-error-1054, ifnull

这是我的简化查询：

```
SELECT `student`.`id`, `student`.`firstname`, `student`.`lastname`,
IFNULL(`review`.`score`, '0') AS `adminreview_score`,
`reviewcolor`.`color` AS adminreview_color FROM (`student`)
LEFT JOIN `review` ON `review`.`student_id` = `student`.`id` AND
review.reviewtype_id = 13
LEFT JOIN `reviewcolor` ON `reviewcolor`.`score` = `adminreview_score`
WHERE `student`.`id` > '0' 
```

这是我得到的错误：

```
Error Number: 1054

Unknown column 'adminreview_score' in 'on clause' 
```

请注意，表中可能没有`review`以下情况：

```
`review`.`student_id` = `student`.`id` AND review.reviewtype_id = 13 
```

在这种情况下，我想`adminreview_score`被设置为`0`，我希望`reviewcolor.color`be`NULL`或 empry ( `)`

 `谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:49:13.913

试试这个：（我用实际的表达式替换了别名。请注意，SELECT 子句中的别名不能用于 SQL 表达式的其余部分。）

```
SELECT `student`.`id`, `student`.`firstname`, `student`.`lastname`,
IFNULL(`review`.`score`, '0') AS `adminreview_score`,
`reviewcolor`.`color` AS adminreview_color 
FROM (`student`)
    LEFT JOIN `review` ON `review`.`student_id` = `student`.`id` AND review.reviewtype_id = 13
    LEFT JOIN `reviewcolor` ON `reviewcolor`.`score` = IFNULL(`review`.`score`, '0')
WHERE `student`.`id` > '0' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T19:54:06.547

你可以使用一个变量，试试这个

```
set @a:='';

SELECT `student`.`id`, `student`.`firstname`, `student`.`lastname`,
IFNULL(@a:=`review`.`score`, @a:=0),
`reviewcolor`.`color` AS adminreview_color FROM (`student`)
LEFT JOIN `review` ON `review`.`student_id` = `student`.`id` AND
review.reviewtype_id = 13
LEFT JOIN `reviewcolor` ON `reviewcolor`.`score` = @a
WHERE `student`.`id` > '0' 
````

# c# - 如何对来自同一 IQueryable 的不同行进行分组

> ID：11300175
> 
> 赞同：0
> 
> 时间：2012-07-02T19:45:58.903
> 
> 标签：c#, iqueryable

我有一个 IQueryable，其中包含我的应用程序中的使用数据列表。其中的每一行都是表中的一个单独条目。结构是这样的

{

## 使用数据

用户名（字符串）
SessionId（字符串）
PartOfAppAccessed
（
键（int），
名称（字符串），
描述（字符串）
时间（日期时间）
）
}

但是在显示这些数据时，我想根据会话 ID 对行进行分组。所以我的输出必须是这个结构

{

## 使用数据

Username (string)
SessionId (string)
Time (DateTime)
PartOfAppAccessed
(
Key (int),
Name (string),
Description (string)
Time (DateTime)
),
(
Key (int),
Name (string),
Description (string)
Time (DateTime)
),
(
Key (int),
Name (string),
Description (string)
Time (DateTime)
)
}

所以我的问题是 - 如何根据某些条件（例如本例中的常见 sessionId）对来自同一个 IQueryable 的不同行进行分组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:07:30.400

我想您想根据实例对实例进行[分组](http://en.wikipedia.org/wiki/Grouped_data)和。编码：`UsageData``SessionId``UserName`

```
IQueryable<UsageData> usageData = ... ;
var groupedUsageData = usageData.GroupBy(x => new { x.SessionId, x.Username }); 
```

然后，您可以使用单个组，如下所示：

```
var singleGroup = groupedUsageData.ElementAt(0);
string sessionId = singleGroup.Key.SessionId;
string name = singleGroup.Key.Name;

IEnumerable<string> accessedAppsNames = singleGroup.Select(x => x.PartOfAppAccessed.Name); 
```

想到的一些注意事项：

*   由于您可能可以直接将会话映射到用户，因此可能没有必要同时存储`SessionId`和存储`Username`在您的`UsageData`对象中。也许只存储`SessionId`并从其他表中获取用户名会更好？
*   `UsageData`分组包含`Time`属性没有意义。它会有什么价值？在您的原始对象中（在分组发生之前），该`Time`属性仅在`PartOfAppAccessed`对象上声明。

# java - Spring Roo (STS) - 创建名称为“transactionManager”的 bean 时出错

> ID：11300182
> 
> 赞同：2
> 
> 时间：2012-07-02T19:46:35.610
> 
> 标签：java, spring-mvc, spring-roo

我在 STS ide 中尝试使用 Spring-roo 时遇到了问题。我创建了一个项目并添加了 EclipseLink ORM，仅此而已。在persistence.xml 中，我添加了数据库连接的所有细节。当我尝试运行 spring 项目时，它无法显示我期望的默认 jspx 页面。这是错误：

```
2012-07-02 10:45:39,411 [pool-2-thread-1] ERROR org.springframework.web.context.ContextLoader - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in file [/home/ubuntu/springsource/vfabric-tc-server-developer-2.7.0.RELEASE/spring-insight-instance/wtpwebapps/SpringRooStats/WEB-INF/classes/META-INF/spring/applicationContext.xml]: Cannot resolve reference to bean 'entityManagerFactory' while setting bean property 'entityManagerFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in file [/home/ubuntu/springsource/vfabric-tc-server-developer-2.7.0.RELEASE/spring-insight-instance/wtpwebapps/SpringRooStats/WEB-INF/classes/META-INF/spring/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.reflect.UndeclaredThrowableException
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106) 
```

它抱怨它似乎需要创建一个实体管理器，但我认为它不应该，因为它应该运行一个不连接到数据库的项目并且只运行一个简单的 jspx 页面。

是否需要通过实体来完成整个事情才能运行一个简单的项目。希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:01:05.157

您的 applicationcontext.xml 定义了一个 transactionManager。这需要一个实体管理器。您需要删除事务管理器或添加实体管理器。

如果您不打算使用它，我也不确定为什么要添加 ORM 框架。

# spring - 在我当前的 springmvc 中添加 spring 安全性

> ID：11300184
> 
> 赞同：2
> 
> 时间：2012-07-02T19:46:45.797
> 
> 标签：spring, spring-mvc, spring-security

抱歉，我对 Spring Security 很陌生。我有以下 applicationContext.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/mvc 
            http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <!-- Activates various annotations to be detected in bean classes -->
    <context:annotation-config />

    <!-- Scans the classpath for annotated components that will be auto-registered as Spring beans.
     For example @Controller and @Service. Make sure to set the correct base-package-->
    <context:component-scan base-package="org.assessme.com" />

    <!-- Configures the annotation-driven Spring MVC Controller programming model.
    Note that, with Spring 3.0, this tag works in Servlet MVC only!  -->
    <mvc:annotation-driven /> 

</beans> 
```

我正在按照教程...

[http://static.springsource.org/spring-security/site/tutorial.html](http://static.springsource.org/spring-security/site/tutorial.html)

我的问题是，我应该添加到现有的 applicationContext.xml 还是制作一个单独的 XML 文件？

我的 web.xml 如下...

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
  </context-param>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
  <servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
</web-app> 
```

我有点困惑，因为在教程中，它指定了 xml 的上下文参数，但我已经声明了一个，我可以有更多的上下文参数吗？如果有人能给我一个将springmvc和spring security一起使用的最佳方法的想法，那将会很棒，因为目前我发现很难“合并”xml文件。

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T23:06:57.170

您可以将安全配置放在单独的文件中，也可以与现有的应用程序上下文结合使用。如果要使用现有的应用程序上下文。您将默认命名空间保留为 bean，如下所示：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:security="http://www.springframework.org/schema/security"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/security
      http://www.springframework.org/schema/security/spring-security-3.1.xsd">

      <security:http auto-config="true">
         <security:intercept-url pattern="/**" access="ROLE_USER" />
      </security:http>
   ...
</beans> 
```

并且您必须在所有安全元素前面加上安全性。

但是如果你在单独的文件中定义。优点是您可以将安全性作为默认命名空间并省略安全性前缀，如下所示：

```
 <beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security-3.1.xsd">

      <http auto-config='true'>
           <intercept-url pattern="/**" access="ROLE_USER" />
      </http>
      ...
</beans:beans> 
```

常见的方法是像这样定义文件名：

```
 1)applicationContext.xml
 2)applicationContext-security.xml 
```

在你的 web.xml 中像这样：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext*.xml</param-value>
</context-param> 
```

或作为逗号或空格分隔的列表，如下所示：

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>/WEB-INF/applicationContext.xml /WEB-INF/applicationContext-security.xml</param-value>
</context-param> 
```

[文档：上下文加载器](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/ContextLoader.html)

[文档：命名空间配置](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-config)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T19:52:48.243

在您遵循的教程中，它还使用：

```
<context-param>
   <param-name>contextConfigLocation</param-name>
   <param-value>
       classpath:applicationContext-business.xml
       /WEB-INF/security-app-context.xml
   </param-value>
</context-param> 
```

其中`applicationContext-business.xml`就像你的`root-context.xml`. 因此，您需要将路径添加到 Spring 安全配置文件。并且，请记住还包括您的`web.xml`.

# arrays - .bat 脚本，4 个列表作为数据，输入是整数 i，输出是包含 i 的列表的排名

> ID：11300185
> 
> 赞同：1
> 
> 时间：2012-07-02T19:46:50.807
> 
> 标签：arrays, data-structures, batch-file

我需要写一个脚本，in.bat，在哪里

*   用户输入一个 3 位数字（作为字符串） i。
*   该脚本有 4 组预定义的数字，数字从 1 到 4
*   该脚本测试组中 i 的成员资格，并返回包含 i 的组的索引。

我不熟悉为批处理文件声明和初始化任何类型的数据结构（例如列表、数组等），所以有人可以帮助我吗？

伪代码：

```
::Returns 1,2,3,4,5 Depending on testNum passed
group1= <822-824,829,845,851,859,864,867>
group2= <826-828,830-839,843-844,847-850,852-854,860-862,883>
group3= <855-858,861,863,865>
group4= <877-882,884>
if %1 is member of group1 
return 1
if %1 is member of group2
return 2
if %1 is member of group3
return 3
if %1 is member of group4
return 4 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:47:36.223

这将设置`GROUP`为在其中找到代码的任何组

```
set test=822,823,824,829,845,851,859,864,867
echo %test% | findstr %1>nul&&set group=1
set test=826,827,828,830,831,832,833,834,835,836,837,838,839,843,844,847,848,849,850,852,853,854,860,861,862,883
echo %test% | findstr %1>nul&&set group=2
set test=855,856,857,858,861,863,865
echo %test% | findstr %1>nul&&set group=3
set test=877,878,879,880,881,882,884
echo %test% | findstr %1>nul&&set group=4 
```

如果要用于测试`ERRORLEVEL`返回值，则将`SET GROUP=``EXIT /B`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:59:17.320

绝不是完美的，而是一个工作的起点。将以下脚本另存为`group.bat`并调用它`group 878`以找出 878 属于哪个组。

```
@echo off

SET group1=822-824,829,845,851,859,864,867
SET group2=826-828,830-839,843-844,847-850,852-854,860-862,883
SET group3=855-858,861,863,865
SET group4=877-882,884

CALL :IsInGroup %1 "%group1%"
IF Errorlevel 1 echo Group 1 & GOTO :EOF

CALL :IsInGroup %1 "%group2%"
IF Errorlevel 1 echo Group 2 & GOTO :EOF

CALL :IsInGroup %1 "%group3%"
IF Errorlevel 1 echo Group 3 & GOTO :EOF

CALL :IsInGroup %1 "%group4%"
IF Errorlevel 1 echo Group 4 & GOTO :EOF

echo Group not found
GOTO :EOF

:IsInGroup
SETLOCAL ENABLEDELAYEDEXPANSION
FOR %%i IN (%~2) DO (
    SET h=%%i
    SET g=!h:~3,1!
    SET /a lo=!h:~0,3!

    IF !g!. == -. (
        SET /a hi=!h:~4,3!
        IF %1 GEQ !lo! (
            IF %1 LEQ !hi! exit /B 1
        )
    ) ELSE (
        IF %1 EQU !lo! exit /B 1
    )
)
ENDLOCAL
EXIT /B 0 
```

该函数`:IsInGroup`检查第一个参数是否包含在作为第二个参数传递的列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T23:18:51.263

Batch 没有任何正式的复杂数据结构，如数组、列表或对象。但是你可以模仿他们。这是一个有效的解决方案，它定义了与您的问题中的格式几乎相同的组。

```
@echo off
setlocal enableDelayedExpansion

::Here is a small loop to test the routine
for %%N in (822,823,883,835,856,863,880,884) do (
  call :assignGroup %%N
  echo %%N is in group !group!
)
exit /b

:assignGroup  CaseNumber
:: The returning value is contained in variable GROUP
set group=0
for %%A in (
  "822-824,829,845,851,859,864,867"
  "826-828,830-839,843-844,847-850,852-854,860-862,883"
  "855-858,861,863,865"
  "877-882,884"
) do (
  set /a group+=1
  for %%B in (%%~A) do (
    for /f "tokens=1,2 delims=-" %%C in ("%%B") do (
      if "%%C"=="%~1" exit /b
      if "%~1" gtr "%%C" if "%~1" leq "%%D" exit /b
    )
  )
)
::no group found so undefine the var
set "group="
exit /b 
```

上述解决方案适用于偶尔调用。但是，如果您要调用该例程数千次，那么最好用分配的组号初始化一个有效值数组。然后每个测试都直接读取值，而不必调用例程。但是，有可能滥用这种技术。分配足够的值，每个变量分配变得越来越慢。您可能还会花费更多时间来设置数组而不是实际测试值。

`[].`请注意，变量名称中的字符没有意义。它们可以从变量名中去掉，代码的功能也相同。它们只是为了帮助理解变量的意图。

```
@echo off
setlocal enableDelayedExpansion

::initialize a sparse "array" that assigns a group to each valid case #
set group=0
for %%A in (
  "822-824,829,845,851,859,864,867"
  "826-828,830-839,843-844,847-850,852-854,860-862,883"
  "855-858,861,863,865"
  "877-882,884"
) do (
  set /a group+=1
  for %%B in (%%~A) do (
    for /f "tokens=1,2 delims=-" %%C in ("%%B") do (
      if "%%D"=="" (
        set case[%%C].group=!group!
      ) else for /l %%N in (%%C 1 %%D) do (
        set case[%%N].group=!group!
      )
    )
  )
)

::Now test some values
for %%N in (822,823,883,835,856,863,880,884,900) do (
  if defined case[%%N].group (
    echo %%N is in !case[%%N].group!
  ) else (
    echo %%N is not in a group
  )
)
exit /b 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T11:58:27.187

如果每组中要检查的值的数量很少，则 dbenhams 第二种方法（直接读取每个数组值）是最快的。在 FOR 循环中处理每个组的值以进行单独或范围比较的任何其他方法都比较慢。但是，随着*单个元素*数量的增加（计算范围内包含的每个元素），数组值方法会变慢，如 dbenhams 所示。

还有另一种使用算术表达式来解决此问题的方法。例如，您可以使用以下命令检查变量是 829 还是 845：

```
set /A result=(829-variable)*(845-variable) 
```

如果变量具有这两个值中的任何一个，则结果为零。要检查变量是否在范围内，表达式如下：

```
set /A aux=(lowerLimit-variable)*(variable-upperLimit), result=(aux-1)/aux 
```

前面的表达式需要一个小的规定，以防变量是任何限制（管理除以零）。下面的程序为每个组组装适当的算术表达式；之后，通过最多 4 个 SET /A 命令（每组一个）来检查每个值。这种方法比在 FOR 循环中单独测试每个值更快，并且每组只使用一个变量，而不是每个单独的元素。

```
@echo off
setlocal EnableDelayedExpansion

rem Assemble testing expression for each group
set numGroup=0
for %%a in (
   "822-824,829,845,851,859,864,867"
   "826-828,830-839,843-844,847-850,852-854,860-862,883"
   "855-858,861,863,865"
   "877-882,884"
   ) do (
   set expr=1
   for %%b in (%%~a) do (
      for /F "tokens=1,2 delims=-" %%c in ("%%b") do (
         if "%%d" equ "" (
            rem Individual value: multiply previous expr by direct subtract
            set "expr=!expr!*(%%c-n^)"
         ) else (
            rem Range value pair: use range expression at this point, then continue
            set "expr=!expr!,a=r,r=0,b=(%%c-n^)*(n-%%d),r=(b-1)/b*a"
         )
      )
   )
   set /A numGroup+=1
   set expr[!numGroup!]=!expr!
)

rem Now test some values
for %%n in (822,823,883,835,855,856,858,863,880,884,900) do (
   call :assignGroup %%n
   echo %%n is in group !group!
)
goto :EOF

:assignGroup number
set /A n=%1, group=0
for /L %%i in (1,1,%numGroup%) do (
   set /A r=!expr[%%i]! 2> NUL
   if !r! equ 0 set group=%%i & exit /B 0
)
exit /B 1 
```

# jquery - 使用 jQuery 拉取和使用内容

> ID：11300187
> 
> 赞同：3
> 
> 时间：2012-07-02T19:47:00.183
> 
> 标签：jquery, regex, arrays, feed, each

我正在努力找出从 RSS 提要中提取内容的最佳方法，使用部分内容，然后只显示已使用的部分数据。我正在使用 jQuery 插件来提取提要。我需要阅读描述字段并仅使用该字段的部分内容。我使用正则表达式来查找内容。然后我使用 each 语句来操作内容，然后打印它。我遇到的两个问题：

1.  正则表达式语句在 console.log 上工作以查找时间，但随后尝试使用 jQuery append 打印它，它失败了。我应该如何拉取内容？还有其他方法吗？
2.  我如何只打印出我操纵的内容并摆脱描述字段的其余部分？

这是我的工作示例：http: [//jsfiddle.net/jkapaldo/D9RJz/8/](http://jsfiddle.net/jkapaldo/D9RJz/8/)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:03:24.447

也许我没有正确理解它，但您是否试图输出日期和时间而不是 p 标签内的描述字段？

如果是这样，你可以简单地添加这个

```
 $(this).html(month + "/" + day + "/" + year + " "+ time) 
```

[看看这个小提琴](http://jsfiddle.net/PxASY/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:30:25.573

您需要先将您的日期变成一个字符串，然后才能针对它运行任何参数。此外，您的字符串有两个空格。我们已经解决了这个问题，把它变成了一个字符串，并把它变成了一个日期。然后你可以针对它运行你的 date.Parameters 。应该在下面完全工作->

[享受 jsFiddle！](http://jsfiddle.net/D9RJz/10/)

# javascript - MVC 3 jquery ajax 发布 2 个对象

> ID：11300188
> 
> 赞同：0
> 
> 时间：2012-07-02T19:46:59.920
> 
> 标签：javascript, asp.net-mvc-3, jquery

我有一个控制器动作，它将两个对象作为参数。我根本无法让它工作，它们总是以空值返回。我最近的尝试如下所示。我尝试了许多其他变体。在这种情况下，FormInfo 类是一个具有 2 个属性的类，它们是 Form1 和 Form2 的类型。我还尝试让控制器将这两个类作为参数，并且数据部分看起来像 { form1: form1Data, form2: form2Data } 效果不佳。我还尝试使用 JSON.stringify 来形成数据，但没有成功。查看网络监视器，我看到数据返回服务器，它只是 MVC 用来将查询字符串解码为对象的引擎，无法处理我传回的内容。提前感谢您提供任何信息！

**客户端**

```
var formData = $("#form1").serialize();
var formData2 = $("#form2").serialize();
var formInfo = new Object();

formInfo.FormData = formData;
formInfo.FormData2 = formData2;

$.ajax({
    url: 'Controller/Action',
    type: 'POST',
    data:  formInfo,
    success: function (data) {
        //do stuff
    }
}); 
```

**服务器端**

```
public ActionResult SaveForms(FormInfo formInfo)
{
    //Do Stuff here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:46:22.080

您可以将 JSON 请求与[`.serializeArray()`](http://api.jquery.com/serializeArray/)jQuery 方法结合使用。假设您有以下模型：

```
public class FormInfo
{
    public Form1Data Form1Data { get; set; }
    public Form2Data Form2Data { get; set; }
} 
```

where`Form1Data`和`Form2Data`是一些完全任意的复杂类。现在在客户端上，我们假设您有 2 种不同的形式（`#form1`并且`#form2`其输入元素名称与[默认模型绑定线格式](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)方面的复杂结构相匹配）。发送 AJAX 请求并将 2 个表单打包在一起变得微不足道：

```
var form1Data = {};
$.each($('#form1').serializeArray(), function () {
    form1Data[this.name] = this.value;
});

var form2Data = {};
$.each($('#form2').serializeArray(), function () {
    form2Data[this.name] = this.value;
});

$.ajax({
    url: '@Url.Action("someaction", "somecontroller")',
    type: 'post',
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify({
        form1Data: form1Data,
        form2Data: form2Data
    }),
    success: function (result) {
        // TODO: do something with the result 
    }
}); 
```

当然，您要发布的控制器操作如下所示：

```
[HttpPost]
public ActionResult SomeAction(FormInfo formInfo)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T21:37:28.383

我正在做这样的事情，但我有一个对象和其他 Formdata 来传递我的控制器

var discrepancy = self.newCptyReply();

```
 if ($('#UploadFile')[0]) {
            var upload = new FormData(),
                file = $('#UploadFile')[0].files[0];

            upload.append('id', self.globalMessageId());
            upload.append('discrepancy', ko.toJSON(discrepancy));
            upload.append('doc', file); 

        }           

        datacontext.saveCptyToReply(self, upload); 
```

在控制器签名中

```
 public ActionResult SaveCptyToReply(Guid id, Trade discrepancy, HttpPostedFileBase doc) 
```

但是当它到达 Controller id 时，文档没问题，但差异为空......当调用函数时它有数据......

该怎么办...

# java - 从方法返回数组引用变量？

> ID：11300189
> 
> 赞同：-1
> 
> 时间：2012-07-02T19:47:07.623
> 
> 标签：java

考虑以下代码：

```
class Box {
    int size;

    Box(int s) { 
        size = s; 
    }
}

public class Laser {
    public static void main(String[] args) {
        Box b1 = new Box(5);
        Box[] ba = go(b1, new Box(6));
        ba[0] = b1;
        for (Box b : ba) {
            System.out.print(b.size + " ");
        }
    }

    static Box[] go(Box b1, Box b2) {
        b1.size = 4;
        Box[] ma = {b2, b1};
        return ma;
    }
} 
```

结果是什么？我解决它是 5 4 但它不是正确的，正确的答案是 4 4，这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:53:10.493

最后，该数组`ba`有两个 b1 实例。两者都是4号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T19:53:22.000

使用调试器单步执行代码，将结果与实际结果进行比较。这将向您展示您的解决方案存在分歧的地方！

`go()`返回`{b2,b1}`。然后将数组中的第一个条目设置为`b1`，留下`{b1,b1}`，这将打印您得到的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T19:53:47.417

该`go`方法将框的大小更改`b1`为 4，并将其放置在数组中的索引 1 处。然后 main 方法也将其设置为索引 0。因此该数组包含对 的两个引用`b1`，其大小为 4。

# c# - 飞船精灵的程序生成

> ID：11300194
> 
> 赞同：3
> 
> 时间：2012-07-02T19:47:36.407
> 
> 标签：c#, graphics, procedural-programming

我已经研究这个主题几天了，并且知道它是如何工作的，但我想我会在这里发布一些其他想法。

我想做的是生成要在游戏中使用的宇宙飞船精灵/图像。外观和感觉应该类似于[这些](https://i.stack.imgur.com/OidZG.png)： [![飞船精灵](../Images/cd6850de26be0765b40df17ff6d98e35.png)](https://i.stack.imgur.com/OidZG.png)

基本上，我的想法归结为这样的事情：

1.  生成构成船“核心”的基本形状。形状可以包括圆形、椭圆形、菱形、圆角矩形等。

2.  生成较小的子形状，这些子形状要么覆盖在核心形状上，要么通过简单的管道连接。（所有子形状都被镜像以创建对称的船。）

3.  生成更小的子形状（细节形状），将它们覆盖在任何现有形状上。（这些构成了船的“细节”。）

4.  选择 3-5 种颜色，随机着色每个形状，使叠加的形状颜色不一样。

5.  将纹理或渐变应用到核心和子形状（不是细节形状），为船提供 3-d 外观。

有没有人知道一种方法来实现这样的算法来实现宇宙飞船的理想外观？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T19:57:41.627

你的想法是对的，除了要真正由艺术家驱动，你应该使用一组一致的图层。为每个图层类生成多个图像。

1.  机身
2.  座舱
3.  翅膀
4.  翼饰
5.  后置发动机

等等。

这些层中的每一层都是相同的大小，并且由艺术家设计为正确居中。:) 另请注意，这些层中的任何一个都可以包含任何内容，甚至是空的。现在简单的随机化应该给你一个漂亮、可信和独特的船。:)

您也完全可以在每组“引擎”类图层图像旁边添加像素坐标，您可以将其用作不同位置喷气发动机火焰的“中心”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T02:50:22.323

实际上我很久以前就这样做了！我进入了更多的细节，然后你会。我会试着找一张照片，如果我还有一张，请稍等。我什至可能有旧代码。我很乐意把它给你。LMAO，多么古老的项目档案啊，简直不敢相信我在从事该领域工作之前就制作了所有这些东西……似乎我没有，但我确实有类似性质的东西，甚至可能在那个项目中，让我把它放在 Eclipse 中并检查一下。不，不是我正在寻找的项目，也不是它构建的项目，bugger 有 33 个错误。我还丢失了我的随机行星生成代码，可能还有一大堆其他项目。

建议：

我尝试从头开始生成整艘船，这意味着几乎没有任何限制。它通过随机化点来工作，然后我会镜像它。我会得到这样的结果：（它不会让我发布图片，抱歉）。

我的建议是限制可能性，并使用具有自己类型的各个部分，并能够连接到特定类型的其他部分。就像房子一样，您将执行以下操作。墙壁，连接到其他墙壁，一些墙壁有窗槽。一些墙壁有门槽等。墙壁可能有一个窗口槽和一个水线槽。

在这种宇宙飞船的情况下，上述内容会更有意义。确保每种类型的棋子都遵循下降趋势，因此船的底部将是一个 4，它将连接到一个或多个 3，每个 3 将连接到一个或多个 2，每个 2 将连接到一个或多个1的。当随机选择一个项目时，我会建议整个项目都使用，就像一个单一类型的激光武器。此外，请务必考虑允许项目按比例缩放，以便您可以更好地重复使用零件。

我认为这是一个了不起的项目，但也是一个非常耗时的项目。我希望你玩得开心，让我知道进展如何！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T19:52:28.373

`System.Drawing.Drawing2D.GraphicsPath`在这里可能有助于建立矢量路径。然后，您可以对这些路径进行填充和添加描边以创建不同的形状。

你可以使用`System.Drawing.Drawing2D.LinearGradientBrush`你的渐变。

如果您有所进展，希望看到您的代码。这似乎是一个很酷的主意。

只是为了好玩，我在 VB.NET 中将其组合在一起：

```
Imports System.Drawing.Drawing2D

Public MustInherit Class ShipShape
    Public Layout As New Rectangle(0, 0, 128, 128)
    Public MustOverride Sub Draw(ByVal g As Graphics)

    Public Shared Sub DrawRoundedRectangle(ByVal gp As GraphicsPath, ByVal r As Rectangle, ByVal d As Integer)
        gp.AddArc(r.X, r.Y, d, d, 180, 90)
        gp.AddLine(CInt(r.X + d / 2), r.Y, CInt(r.X + r.Width - d / 2), r.Y)
        gp.AddArc(r.X + r.Width - d, r.Y, d, d, 270, 90)
        gp.AddLine(CInt(r.X + r.Width), CInt(r.Y + d / 2), CInt(r.X + r.Width), CInt(r.Y + r.Height - d / 2))
        gp.AddArc(r.X + r.Width - d, r.Y + r.Height - d, d, d, 0, 90)
        gp.AddLine(CInt(r.X + d / 2), CInt(r.Y + r.Height), CInt(r.X + r.Width - d / 2), CInt(r.Y + r.Height))
        gp.AddArc(r.X, r.Y + r.Height - d, d, d, 90, 90)
        gp.AddLine(r.X, CInt(r.Y + d / 2), r.X, CInt(r.Y + r.Height - d / 2))
    End Sub

    Public Shared Sub main()
        Dim b As New Bitmap(640, 480)
        Dim g As Graphics = Graphics.FromImage(b)
        g.Clear(Color.Magenta)
        Dim Hull As New HullShape
        Hull.Layout = New Rectangle(640 * 0.5 - 128 * 0.5, 480 * 0.5 - 128 * 0.5, 128, 128)
        Hull.Draw(g)
        Dim Wing1 As New HullShape
        Wing1.Layout = New Rectangle(Hull.Layout.X - 32, Hull.Layout.Y - 32, 32, Hull.Layout.Height + 64)
        Wing1.Draw(g)
        Dim Wing2 As New HullShape
        Wing2.Layout = New Rectangle(Hull.Layout.X + Hull.Layout.Width, Hull.Layout.Y - 32, 32, Hull.Layout.Height + 64)
        Wing2.Draw(g)
        b.Save("test.png")
    End Sub

End Class

Public Class HullShape
    Inherits ShipShape
    Public Overrides Sub Draw(ByVal g As System.Drawing.Graphics)
        Dim gp As New GraphicsPath
        ShipShape.DrawRoundedRectangle(gp, Layout, 30)
        Dim MetalBrush As New LinearGradientBrush(Layout, Color.Gainsboro, Color.Gray, 0)
        g.FillPath(MetalBrush, gp)
        g.DrawPath(Pens.Black, gp)
    End Sub
End Class 
```

![输出图像](../Images/27da0a546f5e93a517e208560c6da199.png)

# php - 高性能学术服务器

> ID：11300198
> 
> 赞同：2
> 
> 时间：2012-07-02T19:47:55.157
> 
> 标签：php, webserver, high-availability

假设我想为大学的学术兴趣构建一个服务器。该服务器仅专用于一个站点，用户（学生和讲师）只需在其中查看和填写学术数据。但一次（例如每学期一次），大约**12,000 名或更多学生将****同时**访问该网站。最常见的活动是身份验证（登录/注销）和读/写数据库（查看/提交表单）。

使用以下硬件和软件：

*   具有集成显卡的 4 核最新一代台式机 CPU
*   带有一个标准千兆以太网的主板
*   16 GB DDR3 1600 兆赫
*   240 GB 固态硬盘
*   Windows 7 操作系统（选择因为对 SSD 的 TRIM 支持）
*   PHP 编程语言

由于资源限制，那么大学无法提供“服务器级”硬件。但是我应该能够选择正确的软件，它可以处理数千个连接而不会崩溃/挂起/停机（你知道我的意思）。特别是当所有学生都在使用它时。

经过一番研究，我选择了以下候选人。不过经验少，想通过本站请教编程高手。请不要关闭此问题，因为该问题仍包含在“*程序员常用的软件工具*”和“*实用、可回答的问题是编程行业独有的*”类别中（参见常见问题解答）。我期待从不同的角度和专业知识的答案。

1.  我对使用 nginx 网络服务器很感兴趣，因为它是专门为高流量网站设计的？你怎么想？
2.  我在想也许使用 Berkeley DB（来自 Oracle）会比 MySQL 更快？这是真的？
3.  我应该使用 PHP 版本 5.3 还是 5.4？为什么？
4.  与其混淆选择使用 APC / eAccelerator / XCache、Apache / nginx / lighttpd 还是其他，不如使用 Zend Server Community Edition（完整的 Apache、PHP、Zend Optmizer、MySQL）？这是一个更好的选择吗？

感谢您的回答，希望对我们所有人都有益。

# magento - Magento: ?___SID=U 出现在一些网址中

> ID：11300200
> 
> 赞同：20
> 
> 时间：2012-07-02T19:48:06.207
> 
> 标签：magento, url

有人可以解释为什么 ?___SID=U 出现在我网站上的某些 Magento URL 中，而不是其他 URL 中吗？

我认为这与会话有关，但我并不完全清楚。此外，更令人困惑的是它只出现在某些 URL 而不是其他 URL 中。

我不需要知道如何删除它，因为我知道管理区域中的设置。我真的很想解释它是什么，它的目的是什么，以及为什么它会显示在某些页面上而不是其他页面上。我宁愿完全了解正在发生的事情，也不愿盲目地遵循一些关于如何删除它的建议。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-03T09:12:08.377

除了 Brendan 的回答之外，我还在`___SID=U`缓存中用作会话 ID 的占位符。它被替换为`Mage_Core_Model_Url::sessionUrlVar()`which 依次调用`Mage_Core_Model_Url::sessionVarCallback()`。这些方法从 调用`Mage_Core_Block_Abstract::_afterCacheUrl()`，这意味着在块输出中找到的任何 URL 都将包含正确的会话 ID（如果需要）。

因此，要以“正确的方式”摆脱您自己代码中的参数，请使用以下命令：

```
$url = Mage::getUrl('some/magento/route'); // might append ___SID parameter
$url = Mage::getModel('core/url')->sessionUrlVar($url); // process ___SID 
```

如果字符串仍然显示在呈现的页面中，那就是一个错误。您是在使用一些自定义缓存模块，还是使用非标准方式生成 URL？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-03T05:11:56.040

SID 是“会话 ID”。Magento 使用它来跟踪用户在同一 Magento 安装中的活动。通常，Magento 通过一个安装（数据库）为一个网站和一个商店提供支持。

Magento 可以通过一个安装为多个具有多个商店的网站提供支持。SID 允许用户在浏览这些网站/商店时保持登录状态。

我*认为*如果您启用了该功能，则在访问目录 URL 时会发送 SID，以便 Magento 可以使用当前网站/商店的用户位置/状态更新会话。

如果您没有运行多网站或多商店环境，则在前端禁用 SID 是安全的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T20:31:30.940

只是我今天遇到的一些事情，虽然我发表了评论，但也许它会对某人有所帮助。我发现如果在处理页面期间出现一些错误，Magento 将格式化/创建一个不正确的产品 url（包括会话 ID）。不过这并不一致。值得查看您的服务器日志中的 PHP 错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-23T06:40:13.320

这是一个已报告给 magento 的一般 Magento 2 错误。

临时修复是

转到文档根目录，找到 .htaccess 并添加

```
RewriteCond %{HTTP_HOST} ^abc.com
RewriteRule ^(.*) www.abc.com/$1 [L,R=301]
```

以下。

这应该可以解决问题。对我来说，这项工作在 M2.1

一切顺利。

参考：[https ://github.com/magento/magento2/issues/5517](https://github.com/magento/magento2/issues/5517)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-05T15:37:37.533

我找了几个小时才找到这个，准确的答案是这里列出的其他答案的组合。首先，我启动了我的 PHP 错误报告和错误记录（感谢 Gergely Varga）。我看到了这个：

```
PHP Fatal error:  Call to undefined function mb_strrpos() in /var/www/html/app/code/local/ManaPro/FilterAjax/Model/Observer.php on line 59 
```

所以，我们安装的扩展之一需要`php-mbstring`我的服务器没有安装的包。我一安装，`SID=U`网址就全部消失了。（将来我将在将现有安装复制到新服务器之前运行 Magento 的预安装检查！）

也感谢 Vinai 提供了这个标签的背景。

# java - 读取 CSV 文件时的问题让我很困惑

> ID：11300201
> 
> 赞同：2
> 
> 时间：2012-07-02T19:48:11.153
> 
> 标签：java, csv, java.util.scanner

我正在尝试编写一个简单地读取 CSV 文件并存储文件中数据的方法。这是我尝试读取的 CSV 文件的屏幕截图的链接，以及此方法的代码：

[http://i.imgur.com/jsGTg.png](http://i.imgur.com/jsGTg.png)

```
public static void correctPrices(String correctfile) {

    String data;
    Date date;
    SimpleDateFormat formatter = new SimpleDateFormat("MM/dd/yyyy");

    File correctedfile = new File(correctfile);
    Scanner correct;

    try {

        correct = new Scanner(correctedfile);

        correct.nextLine(); //to avoid reading the heading
        ArrayList<Date> correctdate = new ArrayList<Date>();
        ArrayList<String> correctdata = new ArrayList<String>();

        while (correct.hasNext()) {

            correctdata.add(correct.nextLine());
            //data = correct.nextLine();
            //String[] corrected = correct.nextLine().split(",");
            //date = formatter.parse(corrected[0]);
            //correctdate.add(date);

        }

        for (int i = 0; i < correctdata.size(); i++) {

            System.out.println(correctdata.get(i));

        }

    } 

    catch (FileNotFoundException ex) {

        Logger.getLogger(DataHandler.class.getName()).log(Level.SEVERE, null, ex);

    }        

} 
```

正如预期的那样，此代码将输出文件的最后 2 行。但是，当我取消注释 data = correct.nextLine(); 在 while 循环中，输出将只返回 CSV 的第二行，而不是最后一行。我对此有点困惑？我所做的只是将该行存储到另一个变量中，为什么要省略最后一行？感谢您的帮助和时间，如果您需要任何其他信息，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T19:55:22.190

问题是，当您调用 时`correct.nextLine()`，它会读取一行，然后将文件中的指针递增到您正在读取的位置。由于您在循环中多次调用它，它会多次增加指针，跳过行。您应该做的只是在 while 循环开始时使用

```
data = correct.nextLine(); 
```

然后用 . 替换`correct.nextLine()`它出现在循环中的其他任何地方`data`。

换句话说，你的`while`循环看起来像

```
while (correct.hasNext())
{
    data = correct.nextLine();
    correctdata.add(data);
    String[] corrected = data.split(",");
    date = formatter.parse(corrected[0]);
    correctdate.add(date);
} 
```

# apache - 由于 htaccess 文件导致的重定向循环

> ID：11300202
> 
> 赞同：0
> 
> 时间：2012-07-02T19:48:12.083
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我遇到的问题是第一个 URL 有效，而第二个无效。

[http://www.example.com/podcasts](http://www.example.com/podcasts)
[http://www.example.com/podcast](http://www.example.com/podcast)

它们都是 HTML 文件，因此将 .html 添加到第二个文件即可。只有当 html 扩展被剥离（这是我想要发生的）时，才会出现重定向问题。

我认为问题在于“播客”既是文件夹又是 html 文件。换句话说，有一个名为“podcast”的文件夹，还有一个名为 podcast.html 的文件，其扩展名被自动剥离（这是我的意图）。

那么如何解决这个重定向问题呢？我希望文件夹和 html 仍然具有相同的名称，并且 html 扩展名被剥离，就像现在一样。

这是我的 .htaccess 文件的副本（编辑：添加 L 标志）

```
RewriteEngine On 
RewriteBase / 

#removing trailing slash 

RewriteRule ^(.*)/$ $1 [R=301,L] 

#non www to www 

RewriteCond %{HTTP_HOST} !^www\. 
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 

#shtml 

AddType text/html .html 
AddHandler server-parsed .html 

#html 

RewriteCond %{REQUEST_FILENAME} !-f 
RewriteRule ^([^\.]+)$ $1.html [NC,L] 

#index redirect 

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.html\ HTTP/ 
RewriteRule ^index\.html$ http://example.com/ [R=301,L] 
```

很确定与 %{REQUEST_FILENAME} !-f 相关的 RewriteRule 导致了这个问题。404 错误不会发生循环。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:09:56.113

试着把它放在你的 HTML 部分下。

```
RewriteCond %{REQUEST_FILENAME} !-d 
```

您的`-f`标志将阻止在规则中考虑文件，但这将排除目录。

# java - 防止 toString() 中无限递归的最有效方法？

> ID：11300203
> 
> 赞同：17
> 
> 时间：2012-07-02T19:48:18.777
> 
> 标签：java, recursion, tostring

如果收集项目图表中的某处是对自身的引用，则对集合进行字符串处理可能会陷入无限循环。请参见下面的示例。

是的，良好的编码实践应该首先防止这种情况，但无论如何，我的问题是：在这种情况下检测递归的最有效方法是什么？

一种方法是在 threadlocal 中使用一个集合，但这似乎有点重。

```
public class AntiRecusionList<E> extends ArrayList<E> {
  @Override
  public String toString() {
    if (  /* ???? test if "this" has been seen before */ ) {
        return "{skipping recursion}";
    } else {
        return super.toString();
    }
  }
}

public class AntiRecusionListTest {
  @Test
  public void testToString() throws Exception {
      AntiRecusionList<AntiRecusionList> list1 = new AntiRecusionList<>();
      AntiRecusionList<AntiRecusionList> list2 = new AntiRecusionList<>();
      list2.add(list1);
      list1.add(list2);
      list1.toString();  //BOOM !
  }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T19:52:29.540

当我必须遍历有风险的图表时，我通常会创建一个带有递减计数器的函数。

例如 ：

```
public String toString(int dec) {
    if (  dec<=0 ) {
        return "{skipping recursion}";
    } else {
        return super.toString(dec-1);
    }
}

public String toString() {
    return toString(100);
} 
```

正如您已经知道的那样，我不会坚持这样做，但这不尊重`toString()`必须简短且可预测的合同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T20:02:19.123

我在问题中提到的线程本地位：

```
public class AntiRecusionList<E> extends ArrayList<E> {

private final ThreadLocal<IdentityHashMap<AntiRecusionList<E>, ?>> fToStringChecker =
        new ThreadLocal<IdentityHashMap<AntiRecusionList<E>, ?>>() {
            @Override
            protected IdentityHashMap<AntiRecusionList<E>, ?> initialValue() {
                return new IdentityHashMap<>();
            }
        };    

@Override
public String toString() {
    boolean entry = fToStringChecker.get().size() == 0;
    try {
        if (fToStringChecker.get().containsKey(this)/* test if "this" has been seen before */) {
            return "{skipping recursion}";
        } else {
            fToStringChecker.get().put(this, null);
            entry = true;
        }
        return super.toString();
    } finally {
        if (entry)
            fToStringChecker.get().clear();
    }
}
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T15:56:23.517

我推荐使用 Apache Commons Lang 的 ToStringBuilder。在内部，它使用 ThreadLocal Map 来“检测循环对象引用并避免无限循环”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-02T20:00:41.743

这个问题不是集合所固有的，它可能发生在任何具有循环引用的对象图上，例如双向链表。

我认为一个理智的政策是：如果您的类的方法有可能是带有循环的对象图的一部分，则`toString()`不应调用其子类/引用的方法。`toString()`在其他地方，我们可以有一个特殊的方法（可能是静态的，可能作为辅助类）来生成完整图的字符串表示。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-02T20:04:02.213

您可以创建采用身份哈希集的 toString。

```
public String toString() {
   return toString(Collections.newSetFromMap(new IdentityHashMap<Object, Boolean>()));
}

private String toString(Set<Object> seen) {
   if (seen.add(this)) {
      // to string this
   } else {
      return "{this}";
   }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-02T20:21:11.620

您始终可以按如下方式跟踪递归（不考虑线程问题）：

```
public static class AntiRecusionList<E> extends ArrayList<E> {
   private boolean recursion = false;

   @Override
    public String toString() {
         if(recursion){
               //Recursion's base case. Just return immediatelly with an empty string
               return "";
         }
         recursion = true;//start a perhaps recursive call
         String result = super.toString();
         recursion = false;//recursive call ended
         return result;
   }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-02T19:50:55.597

最简单的方法：永远不要调用`toString()`集合或地图的元素。只需打印 a`[]`以表明它是一个集合或地图，并避免完全迭代它。这是避免陷入无限递归的唯一防弹方法。

在一般情况下，您无法预测哪些元素将位于另一个对象中`Collection`或`Map`内部，并且依赖关系图可能非常复杂，从而导致对象图中出现循环的意外情况。

你用的是什么IDE？因为在 Eclipse 中有一个选项可以在通过代码生成器生成方法时显式处理这种情况`toString()`- 这就是我使用的，当属性恰好是非空集合或映射打印`[]`时，无论它包含多少元素。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-02T20:50:37.737

如果你想做得过火，你可以在调用 toString() 时使用跟踪嵌套集合的方面。

```
public aspect ToStringTracker() {
  Stack collections = new Stack();

  around( java.util.Collection c ): call(String java.util.Collection+.toString()) && target(c) {
    if (collections.contains(c)) { return "recursion"; }
    else { 
      collections.push(c);
      String r = c.toString(); 
      collections.pop();
      return r;
    }
  }
} 
```

如果不把它扔到 Eclipse 中，我永远不会 100% 了解语法，但我想你明白了

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-02T20:02:54.790

也许您可以在您的 toString 中创建一个异常并利用堆栈跟踪来了解您在堆栈中的位置，您会发现它存在递归调用。一些框架就是这样做的。

```
@Override
public String toString() {
    // ... 
    Exception exception = new Exception();
    StackTraceElement[] stackTrace = exception.getStackTrace();
    // now you analyze the array: stack trace elements have 
    // 4 properties: check className, lineNumber and methodName.
    // if analyzing the array you find recursion you stop propagating the calls
    // and your stack won't explode    
    //...    

} 
```

# terminal - 停止挂在终端窗口上的 derby 服务器

> ID：11300207
> 
> 赞同：-1
> 
> 时间：2012-07-02T19:48:36.810
> 
> 标签：terminal, derby

我从 ubuntu 的命令行运行 derby 服务器。问题是当我启动它时，它一直在终端窗口中运行，因此它将所有日志直接打印到终端。当我关闭终端窗口时，服务器关闭。无论如何我可以从命令行启动 derby，然后能够在不关闭服务器的情况下关闭终端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:56:26.230

`bg`您可以使用 CTRL-z 挂起它，然后使用 and 在后台运行它`disown %1`（或将 1 替换为挂起消息中括号内显示的作业号）。

例子...

```
$ bundle exec script/rails s
[1]  + 14192 suspended  bundle exec script/rails s
$ bg
[1]  + 14192 continued  bundle exec script/rails s
$ disown %1
$ exit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T04:10:00.217

另一种技术是使用您的窗口管理器。设置为您启动网络服务器的应用程序菜单项，并将各种输出重定向到文件。然后通过选择该菜单项来启动您的服务器。

# .net - 无法从传输层读取数据（内部异常）

> ID：11300219
> 
> 赞同：0
> 
> 时间：2012-07-02T19:50:06.550
> 
> 标签：.net, email

我正在通过 gmail 帐户发送电子邮件。但是当我运行程序时，发生 smtp 异常。当我
打开详细信息时。它显示内部异常 - “{”无法从传输连接读取数据：现有连接被远程主机强行关闭。 “}”

```
**.aspx code:**
     your Email assdress:<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>

   <asp:Label ID="Label3" runat="server" Text="Labe3"></asp:Label>
   <asp:button ID="Button1" runat="server" text="Button" OnClick="button1_click" />
     **.aspx.cs**
        public void button1_click(object sender, EventArgs e)
        {

             SmtpClient smtpClient = new SmtpClient();
        MailMessage message = new MailMessage();
        MailAddress fromAddress = new MailAddress(TextBox1.Text);

            // You can specify the host name or ipaddress of your server
            // Default in IIS will be localhost 
            smtpClient.Host = "smtp.gmail.com";
            smtpClient.EnableSsl = true;
            //Default port will be 25
            smtpClient.Port = 25;

            //From address will be given as a MailAddress Object
            message.From = fromAddress;

            // To address collection of MailAddress
            message.To.Add("irfan.dilwaley@gmail.com");
            message.Subject = "Feedback";

            // CC and BCC optional
            // MailAddressCollection class is used to send the email to various users
            // You can specify Address as new MailAddress("admin1@yoursite.com")

            // You can specify Address directly as string

            //Body can be Html or text format
            //Specify true if it  is html message
            message.IsBodyHtml = false;

            // Message body content

            // Send SMTP mail
            smtpClient.Send(message);

          Label3.Text = "Email successfully sent.";
        }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:12:06.350

我看不到您使用凭据，这可能是问题所在

```
// Credentials are necessary if the server requires the client 
// to authenticate before it will send e-mail on the client's behalf.
smtpClient.UseDefaultCredentials = true;

OR

smtpClient.Credentials = CredentialCache.DefaultNetworkCredentials; 
```

确保您的 SMTP 服务器是否配置正确的另一件有用的事情 链接上的好示例：http: [//codebetter.com/petervanooijen/2006/04/05/using-localhost-as-mailserver-5-7-1-unable- to-relay-for-xxx/](http://codebetter.com/petervanooijen/2006/04/05/using-localhost-as-mailserver-5-7-1-unable-to-relay-for-xxx/)

# asp.net-mvc-3 - CKeditor：无法将 .PNG 图像添加到工具栏中的自定义按钮

> ID：11300221
> 
> 赞同：0
> 
> 时间：2012-07-02T19:50:16.660
> 
> 标签：asp.net-mvc-3, ckeditor

我创建了自定义按钮来从数据库上传我的文件。我已经在我的 ckeditor/plugins/plugin.js 中下载了我的按钮的图像，但是在运行网站时它没有显示出来。这是我的 plugin.js 的样子：

> ```
> CKEDITOR.plugins.add('testimage',
> {
>   requires: ['iframedialog'],
>   init: function (editor) {
>   editor.addCommand('testimage', new CKEDITOR.dialogCommand('testimage')); // associating the executable code with the button
>   editor.ui.addButton('testimage',
>    {
>     label: 'Upload Image',
>     command: 'testimage',
>     icon: this.path + 'Expanding-image-mouse-out.png'
>    });
>     CKEDITOR.dialog.addIframe('testimage', 'upload image', '/Upload/UploadImage', 500, 400);
>    }
> }); 
> ```

```
 function closedialog(url) {

   CKEDITOR.dialog.getCurrent().hide();

 }
   function setText(image_path, id, toolNum) {
     CKEDITOR.instances.CKE.insertHtml('<img src=\x22' + image_path + '\x22 border=0 id=image' + id + '>');
     var element = CKEDITOR.instances.CKE.document.getById('image' + id);
     CKEDITOR.instances.CKE.getSelection().selectElement(element);
      getToolbar(toolNum);

}
    function getToolbar(num) {

   CKEDITOR.tools.callFunction(num, this); return false;

 } 
```

我在按钮上看不到图像，但按钮正在执行其分配的所有功能。请告诉我我做错了什么

# javascript - TinyMCE 验证错误

> ID：11300224
> 
> 赞同：0
> 
> 时间：2012-07-02T19:50:37.073
> 
> 标签：javascript, tinymce

我正在使用 TinyMCE 更新我的 Front UI。在 textareas 中显示**字段名**不能超过 210 个字符。如何扩展此范围或使其无范围。在 DB 表中，该字段是**文本**类型。

在我的标题中，我配置了 tinyMCE，如下所示。

```
<script type="text/javascript">
            tinyMCE.init({
                    mode : "textareas",
                    theme : "advanced",
                    plugins : "emotions,spellchecker,advhr,insertdatetime,preview", 

                    // Theme options - button# indicated the row# only
                    theme_advanced_buttons1 : "newdocument,|,bold,italic,underline,|,justifyleft,justifycenter,justifyright,fontselect,fontsizeselect,formatselect",
                    theme_advanced_buttons2 : "cut,copy,paste,|,bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,|,code,preview,|,forecolor,backcolor",
                    theme_advanced_buttons3 : "insertdate,inserttime,|,spellchecker,advhr,,removeformat,|,sub,sup,|,charmap,emotions",      
                    theme_advanced_toolbar_location : "top",
                    theme_advanced_toolbar_align : "left",
                    theme_advanced_statusbar_location : "bottom",
                    theme_advanced_resizing : true
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:12:02.417

tinyMCE 对输入数据时 textarea 可以接受的字符数没有任何限制。

您能否也显示您的 html 代码，以便我们更好地了解问题所在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:49:08.213

为此，您将自己编写一些代码，但可以完成。我已经实现了类似的东西。如果这对你有用，请告诉我。

# html - 如何在填充页面的容器中垂直对齐图像？

> ID：11300228
> 
> 赞同：1
> 
> 时间：2012-07-02T19:50:54.023
> 
> 标签：html, css, centering

我正在创建一个图像库，其中图像在整个页面中居中。水平部分当然容易，但垂直部分就麻烦了。

我熟悉使用`display: table-cell;`and `vertical-align: middle;`（或 using `line-height`，但在使用它们以及试图让元素填充页面时没有成功。

```
<div id='contain'>
   <img src='url' />
</div> 
```

我无法设置 line-height ，`#contain`因为容器的高度会根据窗口的大小而变化。

如果我绝对定位`#contain`，则应用`vertical-align:middle`不再垂直居中图像，无论我如何设置框的大小。

如果我尝试`#contain`在没有绝对定位的情况下调整大小以填充窗口，`width: 100%`并且`height: 100%`（或使用最小宽度/最小高度）不填充页面。同样，我无法指定确切的值，因为它们会有所不同。

我知道我总是可以将图像设置为背景`#contain`（或使用 JavaScript 来计算高度），但如果有一种 CSS/HTML 方法可以在没有表格的情况下解决这个问题，我更愿意使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:02:45.267

尝试将您的 img 包装在一个额外的 div 中，然后使用以下 css：

```
#contain {
  display: table;
  width: 100%;
  height: 100%;
}
#contain div {
  display: table-cell;
  vertical-align: middle;
} 
```

HTML：

```
<div id='contain'>
   <div><img src='url' /></div>
</div> 
```

# wpf - WindowsPhone 项目如何默认加载资源？

> ID：11300230
> 
> 赞同：0
> 
> 时间：2012-07-02T19:51:01.740
> 
> 标签：wpf, silverlight, windows-phone-7, xaml, windows-phone-7.1

我喜欢 Windows Phone 项目加载这些默认资源的方式：

```
<phone:PhoneApplicationPage 
x:Class="PhoneApp4.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
shell:SystemTray.IsVisible="True">
    ... 
```

PhoneFontFamilyNormal、PhoneFontSizeNormal、PhoneForegroundBrush。因为我正在为 WPF 创建许多库，并且它们都包含一个公共库，所以我在考虑加载该库时，默认情况下也加载我的样式资源。

我该如何实施这种方式？

顺便说一句，我正在使用 WPF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:07:43.427

好吧，因为没有人回答，我会尽力帮助你..

您可以在 App.xaml 中为您的所有应用程序使用定义一个资源（我想您已经知道了），示例：

```
xmlns:win="clr-namespace:System;assembly=mscorlib" 
```

和

```
 <Application.Resources>
    <ResourceDictionary>
        <win:Double x:Key="MyBigFontStyle">186.667</win:Double>
        <!-- .... --> 
```

和..我的应用程序中的页面：

```
<phone:PhoneApplicationPage x:Class="Project.Page"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
        xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
        FontFamily="{StaticResource PhoneFontFamilyNormal}"
        FontSize="{StaticResource MyBigFontStyle}"
<!-- .... --> 
```

由于依赖属性发生了变化，所有文本都是巨人。现在从技术上讲..

微软世界上有依赖属性，它们的值总是继承自父组件。示例：（DataContext、FontFamily、FontSize 等）只有在它们不明确时才会发生这种情况（没有人修改、与它们交互，以及其他例外情况）。

尽管我从未寻求过如何创建它们或它们如何工作的尊重.. 您可以覆盖默认值以扩展到应用程序的所有组件。对于 Windows Phone，我使用了以下功能：

```
 public App()
    {
        // Global handler for uncaught exceptions.
        UnhandledException += Application_UnhandledException;

        // Standard Silverlight initialization
        InitializeComponent();

        // Phone-specific initialization
        InitializePhoneApplication();

        var myNewBrush = new SolidColorBrush(new Color { B = 255, A = 255, R = 88, G = 255 });
        this.Resources.Remove("PhoneAccentBrush");
        this.Resources.Add("PhoneAccentBrush", myNewBrush);

        // Other code that might be here already...
    } 
```

这可以使用任何标准资源来完成。这样做是因为没有 DynamicResources 作为 WPF

注意：静态资源如何，如果您在运行应用程序的过程中更改它，您的更改不会传播。

抱歉英语不好，不知道这是否正是你想知道的，但我已经帮助了一些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:44:33.980

您必须在库本身中添加资源。

例子：

如果您有一个名为 MyControl 的自定义控件，您可以定义资源，如下所示。

```
public class MyControl
{
    public MyControl()
    {

       var myBrush = new SolidColorBrush(Colors.Red);
       this.Resources.Add("MyBrush", myBrush);
    }
} 
```

然后，一旦您在 WPF 项目中添加对您的 dll 的引用，您将通过您的控制获得该资源。

例子：

```
<my:MyControl Foreground="MyBrush"> 
```

# asp.net-mvc - IIS 7.5 上的 maxRequestLength 与 maxAllowedContentLength

> ID：11300232
> 
> 赞同：7
> 
> 时间：2012-07-02T19:51:13.440
> 
> 标签：asp.net-mvc, iis-7, web-config, iis-7.5

maxAllowedContentLength 应该在 IIS 7+ 服务器上工作，但显然我的服务器在上传时不想考虑这个值（ASP.NET MVC 3 网站）。现在我将 maxRequestLength 包含在 web.config 中，一切都开始工作并应用了该值。然而，每个人都在说 maxAllowedContentLength 是正确的。

有人对这种行为有解释吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-19T18:56:58.577

看看下面的链接 - 它解释了两者之间的区别。如果要上传大文件，则需要同时设置两者。请注意，您也可以将此设置嵌套在`<location>`标签中，以免将该设置应用于整个网站（我推荐）。

[混淆所需的 maxRequestLength 和 maxAllowedContentLength 设置](http://forums.iis.net/t/1169846.aspx)

# android - 将 CSV 联系人导入 Android 4 手机

> ID：11300233
> 
> 赞同：5
> 
> 时间：2012-07-02T19:51:14.677
> 
> 标签：android, csv, import, contacts, android-4.0-ice-cream-sandwich

我有一个包含所有联系人的 CSV 文件（从 Thunderbird 导出）。

在我的手机上，我安装了 Android 4 冰淇淋三明治。

如何在不使用任何“间谍软件”（google、facebook、outlook 等）的情况下将 CSV 文件中的联系人导入我的 Android 手机（索尼爱立信 Xperia Ray）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T11:42:44.710

我尝试了很多，最后我找到了一个不需要谷歌的解决方案！

1.  我将我的 csv 列表导​​入到 Windows 7 联系人中。（如果您使用正确的字段名调整第一行，这很容易）

2.  然后我将它们从那里导出到单个 VCF 卡中。

3.  我将它们全部粘合到一个大的 vcf 文件中：

    `cat *.vcf>../all_adresses.vcf`

4.  将它们转换为 UTF-8，以便特殊字符正确：

    `iconv --from-code=ISO-8859-1 --to-code=UTF-8 all_adresses.vcf > all_adresses_correct.vcf`

5.  最后我将它们导入到我的安卓手机中（在联系人中有一个从 SD 卡导入的选项）

如果您在完成后将它们从 Windows 联系人中删除，我认为您的地址不会在计算机上留下任何痕迹。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-02T16:53:06.607

这是 rubo77 解决方案的仅限 Windows 版本：

1.  将 csv 列表导​​入 Windows 7 联系人。（请记住，每个 csv 字段只能使用一次 Windows 联系人字段）

2.  将 Windows 联系人导出到单个 VCF 卡中。

3.  将它们全部粘贴到一个大的 vcf 文件中：

    `type *.vcf>..\all_adresses.vcf`

4.  将 all_adresses.vcf 转换为 UTF-8，以便特殊字符正确：

    在 Notepad++ 中打开 all_adresses.vcf，单击 Encoding > Encode in UTF-8。节省。

5.  将它们导入安卓手机（在通讯录中有一个从 SD 卡导入的选项）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-28T18:36:48.303

这是一个肮脏的修复，但它对我有用（在 Linux 上，尽管 cygwin 可以在 Windows env 上使用）：

1.  使用逗号将 Thunderbird 中的联系人导出为 CSV。
2.  文件格式是这样的：

> 名字、姓氏、显示名称、昵称、主要电子邮件、辅助电子邮件、屏幕名称、工作电话、家庭电话、传真号码、寻呼机号码、手机号码、家庭地址、家庭地址 2、家庭城市、家庭县、家庭邮政代码,原籍国,工作地址,工作地址2,工作城市,工作县,工作邮政编码,工作国家,职位,部门,组织,网页1,网页2,出生年份,出生月份,生日,自定义1、自定义 2、自定义 3、自定义 4、备注、

在我的情况下，大多数条目仅包含**First Name,Last Name,Display Name,,Primary Email**。

所以我使用 sed 将每个条目转换为 VCF 2.1 格式：

```
BEGIN:VCARD
VERSION:2.1
N:LastName;FirstName
FN:FirstName LastName
EMAIL;PREF;INTERNET:local@domain
END:VCARD 
```

这是脚本（老实说，它只是一个单行命令，但为了更清楚......）：

```
#!/bin/bash

# This script convert a ThunderBird AddressBook ( 17.04) exported as CSV file using commas into a VCF 2.1 file.
# rmistero - April 2013 - GNU GPL 3

CSV_FILE="contacts.csv"
VCF_FILE="contacts.vcf"

# sed is looking for regex pattern NOT containing commas between 2 commas.

sed -e "s/^\([^,]*\|\".*\"\),\([^,]*\),\([^,]*\),[^,]*,\([^,\"\']*\),.*$/N:\2;\1\nFN:\3\nEMAIL;PREF;INTERNET:\4\n/g" -e "1d" < $CSV_FILE |  sed -e "/^EMAIL/ a\END:VCARD" -e "/^N/ i\BEGIN:VCARD\nVERSION:2.1" | grep -vE "^$|\"" > $VCF_FILE 
```

文件转换完成后，只需将文件放在 Android 手机的 USB 驱动器上即可。然后转到联系人、设置和导入/导出单个 vCard 文件。

如果一切顺利，您应该会看到手机检测到的联系人条目数以及加载到手机中的号码。

注意：要计算 contacts.csv 中的条目数，只需执行以下操作：

```
grep -c EMAIL contacts.csv 
```

这将返回匹配“EMAIL”的行数（因此是联系人数）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-21T17:42:53.273

将 Outlook 中的所有联系人导出为 vcf 的一种简单方法是选择所有联系人并选择电子邮件作为附件。一旦打开带有附件的草稿电子邮件，选择所有附件，右键单击并复制。找到一个文件夹，右键单击并粘贴。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-07T20:11:39.593

好的，所以我使用的是 Android 7.0，但这就是我必须通过手机执行此操作的方法...我正在从旧手机 Windows Phone 8 导入，我认为它只能将我的联系人导出到 CSV...

（幸运的是，这是一个通用文件扩展名（逗号分隔值），我还能够使用正则表达式手动删除一些垃圾 - 无论如何......）

* * *

使用 Firefox Beta 或 Google Chrome，我去了[http://google.com/contacts](http://google.com/contacts)，登录到我想用于我手机联系人的 GMail 帐户，在 Firefox Beta 中我不得不告诉它使用旧版本的联系人我想想（新版本没有导入功能），然后页面看起来有点像标准的 Web GMail 布局。左侧是一个链接，上面写着“导入联系人...”，所以我点击了它，然后它让我从手机中选择一个文件（“文档”）；请注意，这部分在 Firefox Focus 中不起作用。

在右上角我选择“显示内部存储”，然后在左上角我打开文件管理器，选择我的 CSV 文件，并将其导入 GMail 联系人。然后，它立即将所有联系人同步到我的 Android 手机。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-15T03:43:20.960

MobiKin Assistant for Android 可以帮助您非常轻松地将联系人从 android 手机导入或导出为 CSV 或 XLS 格式的 excel 格式。它是Android数据备份和传输的流行工具。您可以通过 Google 搜索“MobiKin Assistant for Android”。希望这可以帮助！

# jquery - jQuery 第二个匹配的类选择器

> ID：11300234
> 
> 赞同：0
> 
> 时间：2012-07-02T19:51:16.297
> 
> 标签：jquery

使用 jQuery 如何判断第二个“此处”div 是否已被点击？

[http://jsfiddle.net/qBZLM/](http://jsfiddle.net/qBZLM/)

```
<div class="image"></div>
<div class="image"></div>
<div class="image here"></div>
<div class="image here"></div>
<div class="image here"></div> 
```

​</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T19:54:18.960

这是一个选项。这是[一个小提琴](http://jsfiddle.net/rbWUL/1/)

```
$('.image.here:eq(1)').click(function(){

    alert('here')
        });​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T19:56:37.773

```
$(".here:eq(1)").click(function(){
    do_something();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T19:54:06.157

`$('.here').eq(1).click()`应该管用。

# c++ - 文件 I/O 代码未正确读取 C++

> ID：11300237
> 
> 赞同：1
> 
> 时间：2012-07-02T19:51:28.587
> 
> 标签：c++, file-io, getline

```
void createVideoList(ifstream& ifile, Video videoArray[])
{
string title;
string star1;
string star2;
string producer;
string director;
string productionCo;
int inStock;
int count = 0;
Video newVideo;
getline(ifile, title);
while (ifile)
{
    ifile >> inStock;
    getline(ifile, title);
    getline(ifile, star1);
    getline(ifile, star2);
    getline(ifile, producer);
    getline(ifile, director);
    getline(ifile, productionCo);
    videoArray[count] = Video(inStock, title, star1, star2, producer, director, productionCo);
    count++;
}
} 
```

这是我的编程作业代码。它将从 .txt 文件中读取，并将信息放入我创建的类的数组中。

.txt 的格式如下：

```
3 (amount in stock)
Movie Title
Movie Star1
Movie Star2
Movie Producer
Movie Director
Movie ProductionCo 
```

但是，我的代码似乎没有将数据正确地收集到 videoArray 中。我刚从 Java 切换过来，所以我的 C++ 语法有点生疏。我正确使用 getline 吗？如果我尝试输出其中一个索引，则它在任何变量中都没有。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T19:59:11.547

```
Video newVideo;
getline(ifile, title);
while (ifile)
{
    ifile >> inStock;
    getline(ifile, title);
    getline(ifile, star1);
    ... 
```

大部分是正确的，但有几个问题：

*   第一个`getline`，循环之外的那个，不应该在那里。它应该读什么？
*   循环测试并不完全正确——如果最后一条记录仅部分存在会发生什么？
*   `>>`与.混合时必须小心`getline`。The`>>`不会读取第一行的其余部分——具体来说，它会将 the`\n`留在输入流中。使用`std::getline`或`istream::ignore`删除挂起的行尾。
*   `std::vector`如果家庭作业允许，最好使用 a而不是数组。

尝试：

```
while (ifile >> inStock && getline(ifile, temporary_string) &&
       getline(ifile, title) &&
       getline(ifile, star1) &&
       ...
       getline(ifile, productionCo) )
{
  videoVector.push_back(Video(inStock, title, ..., productionCo_));

  // Or, as a less worthy alternative, 
  //  videoArray[count] = Video(inStock, title, star1, star2, producer, director, productionCo);
  //  count++;
} 
```

* * *

作为您将在未来几周内学习的语言功能的演示，这里是您的程序的一个使用现代 C++ 功能的实现：

```
std::istream&
operator>>(std::istream& is, Video& v)
{
  is >> v.inStock;
  is.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
  std::getline(is, v.title);
  std::getline(is, v.star1);
  std::getline(is, v.star2);
  std::getline(is, v.producer);
  std::getline(is, v.director);
  std::getline(is, v.productionCo);
  return is;
}
std::vector<Video> void createVideoList(std::istream& ifile)
{
  std::vector<Video> result;
  std::istream_iterator<Video> begin(ifile), end;
  std::copy(begin, end, std::back_inserter(result));
  return result;
} 
```

# dojo - 从 http://ajax.googleapis.com/ajax/libs/dojo/1.6.0/dijit/form/Form.xd.js 运行不安全的内容

> ID：11300245
> 
> 赞同：0
> 
> 时间：2012-07-02T19:51:56.357
> 
> 标签：dojo

我在证书下运行我的网站。证书是有效的，但是当我尝试使用 https 加载我的网站时，它仍然给我这个错误。我检查了我的布局文件，我指的是 google apis 网站上的 https 条目。

这是我的 layout.cshtml 示例

```
<link rel="Stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/dojo/1.6.0/dijit/themes/claro/claro.css" />
<link rel="Stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/dojo/1.6.0/dojox/form/resources/BusyButton.css" />
<link rel="Stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/dojo/1.6.0/dojox/widget/Wizard/Wizard.css" />
<script type="text/javascript">
    djConfig = {
        parseOnLoad: false,
        isDebug: false,
        baseUrl: "/Scripts/dojo/rpost/",
        // modulePaths: { rpost: "/Scripts/dojo/rpost" }
    };
</script>
<script src="https://ajax.googleapis.com/ajax/libs/dojo/1.6.0/dojo/dojo.xd.js" type="text/javascript"></script>
<script type="text/javascript">
    dojo.require('dijit.form.Form');
    dojo.require('dijit.form.CheckBox');
    dojo.require("dijit.form.Button");
    dojo.require('dijit.form.ValidationTextBox');
    dojo.require('dojox.form.BusyButton');
    dojo.require('dojox.form.DropDownSelect');
    dojo.require('dijit.form.DropDownButton');
    dojo.require("dijit.form.TextBox");
    dojo.require('dijit.form.NumberTextBox');
    dojo.require('dijit.form.NumberSpinner');
    dojo.require('dijit.form.DateTextBox');
    dojo.require('dijit.form.SimpleTextarea');
    dojo.require("dijit.Menu");
    dojo.require('dijit.Dialog');
    dojo.require("dijit.TooltipDialog");
    dojo.require('dijit.MenuSeparator');
    dojo.require('dijit.MenuItem');
    dojo.require('dijit.layout.TabContainer');
    dojo.require('dijit.PopupMenuItem');
    dojo.require('dijit.Declaration');
    dojo.require('dojox.layout.TableContainer');
    dojo.require('rpost.AutocompleteReadStore');
    dojo.require("dojo.NodeList-traverse");
    dojo.require('rpost.ConfirmationDialog');
    dojo.require('dojo.parser');

    dojo.addOnLoad(function () {
        setTimeout(function () {
            dojo.query('.delayUI').forEach(function (el) {
                // dijit.byNode(el).fadeIn({ delay: 100 }).play();
            });
        }, dijit.defaultDuration + 10);
        // do something();

        @if (IsSectionDefined("GridLayout"))
        { 
            @RenderSection("GridLayout")
        }

        dojo.parser.parse();
    });
</script> 
```

可以请任何人建议我该怎么做吗？非常感谢任何帮助。

谢谢，维维克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:26:23.377

找到了解决方案。

在您的 djConfig 中添加以下这些行

```
modulePaths: {
                "dojo": "https://ajax.googleapis.com/ajax/libs/dojo/1.6.0/dojo",
                "dijit": "https://ajax.googleapis.com/ajax/libs/dojo/1.6.0/dijit",
                "dojox": "https://ajax.googleapis.com/ajax/libs/dojo/1.6.0/dojox" 
            } 
```

这应该这样做。

谢谢，维维克

# powershell - 将文件添加到文档库

> ID：11300246
> 
> 赞同：0
> 
> 时间：2012-07-02T19:51:56.450
> 
> 标签：powershell, sharepoint-2010, document-library

这是我的文档库的样子。我的文档库有 2 种内容类型。一种内容类型基于文档，另一种内容类型基于“链接到文档”类型。

我正在尝试使用 powershell 脚本上传一些文件。我正在使用 csv 文件逐行读取并将文件上传到文档库。我在 $i.fileNameASPX 上遇到错误。Powershell 告诉我 , 之后缺少表达式。那么该怎么办。

```
if($i.ContentType = "LegalLink2Document")
{
    $itemType = $docLibrary.ContentTypes[$i.ContentType]
    $newFile = $docLibrary.RootFolder.Files.Add($i.fileNameASPX, UTF8Encoding.UTF8.GetBytes(builder.ToString()), $true) 
    $theItem = $newFile.Item
    $theItem["ContentTypeId"] = $itemType.Id
    $itemUrl = ew-object Microsoft.SharePoint.SPFieldUrlValue()
    $itemUrl.Url = $i.fileLinkUrl
    $itemUrl.Descrition = $i.URLDESC
    $theItem["URL"] = $itemUrl      
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-24T10:08:52.583

# 这是用于将文件上传到 SharePoint2013 中的文档库的简单 PowerShell 脚本

### [http://soreddymanjunath.blogspot.in/2014/07/add-file-to-document-library-using.html](http://soreddymanjunath.blogspot.in/2014/07/add-file-to-document-library-using.html)

```
cls

asnp "*sh*"

$url=Read-Host "Enter Site Url" 

$web=Get-SPWeb -Identity $url

if($web)
{
try
{
$list = $web.Lists.TryGetList("Documents")

$files = Get-ChildItem -Path "D:\M" -Force -Recurse

    foreach ($file in $files)
    {
      $stream = $file.OpenRead()

      $done= $list.RootFolder.Files.Add($file.Name, $stream, $true)

      Write-Host $done.Name  "Uploaded into the Site" -BackgroundColor Green

    }
}
catch
{
$ErrorMessage = $_.Exception.Message
Write-Host $ErrorMessage
}
}

 else
{
Write-Host "Site Doesn't exist"
 }

$list.Update(); 
```

# android - 任何可扩展文本区域（SMS 消息）的现成实现

> ID：11300248
> 
> 赞同：0
> 
> 时间：2012-07-02T19:52:11.067
> 
> 标签：android

我想知道是否有现成的文本区域视图植入，随着用户键入更多文本而扩展。就像安卓内置的短信文本区域一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-28T15:04:01.887

我得到了部分答案:) - 我也需要一个 SMS 样式文本字段，所以我自己做了一个，包括一个跟踪剩余字符数的文本观察器。

这就是它的样子：

![在此处输入图像描述](../Images/cc2bd4b68d06d5f34b578f63f02b1032.png)

**文本观察器实现**

```
public class SMSTextWatcher implements TextWatcher {

    private final int maxLength;
    private final int stringId;
    private final TextView textView;

    /**
     * @param maxLength  maximum number of characters that are allowed
     * @param stringId   must have at least one %s in it, for the updated character count.
     * @param targetView target text view that displays the number of characters left.
     */
    public SMSTextWatcher(int maxLength, int stringId, TextView targetView) {
        this.maxLength = maxLength;
        this.textView = targetView;
        this.stringId = stringId;

        updateTextView(maxLength);
    }

    @Override
    public void beforeTextChanged(CharSequence charSequence, int start, int count, int after) {

    }

    @Override
    public void onTextChanged(CharSequence charSequence, int start, int before, int count) {

    }

    @Override
    public void afterTextChanged(Editable editable) {
        //Update textview (the limit is handled by the maxLength attribute)
        updateTextView(maxLength - editable.length());
    }

    public void updateTextView(int charactersLeft) {
        textView.setText(String.format(textView.getContext().getString(stringId), charactersLeft));
    }
} 
```

**布局 XML - 我们称之为 widget_sms_field.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <EditText
        android:id="@+id/sms_field_text"
        style="@style/TextAppearance.AppCompat.Large"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:hint="@string/short_text"
        android:imeOptions="actionSend|flagNoEnterAction"
        android:inputType="textShortMessage|textAutoCorrect|textCapSentences|textMultiLine"
        android:maxLength="@integer/sms_text_max_length"
        android:paddingRight="10dp"
        android:singleLine="false" />

    <TextView
        android:id="@+id/sms_field_remaining_characters"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:text="@string/remaining_characters"
        android:textColor="@color/secondary_text" />
</LinearLayout> 
```

**最大长度**

在上面的布局文件中，我们使用了 android:maxLength="@integer/sms_text_max_length"

要解决它，我们必须在项目的 values 文件夹中创建一个名为“integer.xml”的文件。该文件的内容应如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <item name="sms_text_max_length" type="integer">160</item>
</resources> 
```

如果您将文件命名为“整数”以外的名称 - 请确保也相应地更改 @integer/sms_text...。

**“剩余 x 个字符”文本**

id 为 sms_field_remaining_characters 的灰色小文本字段（@color/secondary_text - 您需要自己创建此颜色！）是显示剩余字符数的字段。为此，创建一个新的字符串资源：

```
<string name="remaining_characters">%s remaining Characters</string> 
```

在您自己的布局中包含小部件布局 xml，并在您的 Fragment 的 onViewCreated 方法中将 SMSTextWatcher 链接到我们的 sms 样式字段：

```
 @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        EditText textField = (EditText) view.findViewById(R.id.sms_field_text);
        textField.addTextChangedListener(new SMSTextWatcher(
                getResources().getInteger(R.integer.sms_text_max_length),
                R.string.remaining_characters,
                (TextView) view.findViewById(R.id.sms_field_remaining_characters)));
    } 
```

完毕 ：） ！如果您有任何问题或建议，请告诉我！

# javascript - Javascript返回数组中“匹配”数组的位置索引

> ID：11300249
> 
> 赞同：1
> 
> 时间：2012-07-02T19:52:15.253
> 
> 标签：javascript, arrays

是否有另一种更快的方法来返回另一个数组中的部分数组的位置/索引（多个值匹配）？它在我的寻路算法中被调用了很多，因此可以尽可能快地完成。

我目前的功能是：

```
// Haystack can be e.g. [[0,1,278.9],[4,4,22.1212]]

function coordinate_location_in_array(needle,haystack){
    for(n in haystack){
        if(haystack[n][0]==needle[0] && haystack[n][1]==needle[1]) return n;
    }
    return false;
}

// Needle of [0,1]: returns 0
// Needle of [4,4]: returns 1
// Needle of [6,7]: returns false 
```

# 编辑：

我一直在搞砸，想出了一个（相当可怕的）基于字符串操作的方法（从而避免了代价高昂的`for`循环）。我*认为*它仍然稍微慢一些。有人可以对这些方法进行基准测试吗？

```
function coordinate_location_in_array(needle,haystack) {
    var str1 = ':' + haystack.join(':');
    var str2 = str1.replace(':'+needle[0]+','+needle[1],'*').split('*')[0]; 
    if(str2.length == str1.length) return false;
    var preceedingElements = str2.match(/:/g);
    return preceedingElements!=null?preceedingElements.length:0;
} 
```

也许通过一些改进，第二种方法可能会提供一些性能提升？

# 编辑2：

Bench 使用 jsperf.com 标记了所有 3 种描述的方法（初始方法最快）：http: [//jsperf.com/finding-matched-array-within-array/3](http://jsperf.com/finding-matched-array-within-array/3)

# 编辑3：

刚刚用`for(..in..)`循环替换了`for(..;..;..)`循环（因为我知道`haystack`数组永远不会有“间隙”），性能似乎有了显着提高：

```
function coordinate_location_in_array(needle,haystack){
    for(var n=0;n<haystack.length;n++){
        if(haystack[n][0]==needle[0] && haystack[n][1]==needle[1]) return n;
    }
    return false;
} 
```

我已经更新了 jsperf 页面以包含这个最新的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:06:26.073

如果“干草堆”没有排序，那么就没有办法让它更快。不知道集合中的元素是如何排序的，因此从本质上可以线性地找到一些东西，因为你只需要检查每一件事。

如果您一遍又一遍地在同一个“干草堆”上使用此功能，您可以对集合进行排序，并使用排序来更快地找到“针”（查找不同的排序和搜索算法以找到适合您的需要最好的，例如在草垛排序后使用二进制搜索找到“针”。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:22:15.203

使用`for(..;..;..)`循环而不是`for(..in..)`循环产生了最大的不同。

（见问题末尾的编辑 3）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T20:07:16.447

我不知道它是否更快，但您可以执行以下操作：

```
[1,2,3,4].slice(0,2).toString() == [1,2].toString() 
```

在您的情况下，它将是：

```
function coordinate_location_in_array(needle,haystack){
for(n in haystack){
    if(haystack[n].slice(0,2).toString() == needle.toString()) return n
}
return false; 
```

}

还发现了这篇文章，其中涵盖了 JS 数组的比较：[compare-two-arrays-javascript-associative](https://stackoverflow.com/questions/1107237/compare-two-arrays-javascript-associative)

干杯悠闲

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:19:39.437

在我看来，这只是一个子字符串搜索，但数字而不是字符是字符串的组成部分。因此，[Boyer-Moore](http://en.wikipedia.org/wiki/Boyer%E2%8093Moore_string_search_algorithm)可能适用，尤其是当你的针和干草堆变大时。

# javascript - Knockout.js：在选择元素中清除选择

> ID：11300258
> 
> 赞同：3
> 
> 时间：2012-07-02T19:53:15.467
> 
> 标签：javascript, knockout.js, knockout-2.0, ko.observablearray

我需要清除`<select>`元素中的选择。***我已经阅读了诸如[Knockoutjs clear selected value in combobox](https://stackoverflow.com/questions/8137222/knockoutjs-clear-selected-value-in-combobox)之类的帖子，并尝试了接受的答案，但这些解决方案似乎不起作用***（不知道自答案被接受后 Knockout 2 中是否发生了变化？） .

这是一个示例视图模型：

```
var ClearSelectionViewModel = function () {
    var self = this;

    self.station = ko.observable();

    self.selectedStation = ko.observable();
    self.selectedStation.subscribe(function (value) {
        self.station(value);
    });

    self.stations = ko.observableArray(['CLT', 'PHL', 'PHX', 'PIT']);

    self.clearSelectedStation = function () {
        self.selectedStation(null);
    };
};

ko.applyBindings(new ClearSelectionViewModel());​ 
```

调用时`clearSelectedStation`，绑定视图模型属性应设置为`null`，这应通过绑定`<select>`元素显示为空白并扩展选项列表显示没有突出显示的项目来反映在 UI 中。但是，我注意到的是，如果您尝试将绑定值属性 ( `selectedStation`) 设置为选项数组 () 之外的任何内容`stations`，则绑定似乎会被忽略。

这个小提琴说明了我在说什么：http: [//jsfiddle.net/sellmeadog/Su8Zq/1/](http://jsfiddle.net/sellmeadog/Su8Zq/1/)

如果不需要，我不想用空白值“污染”选项数组。我想知道如何使链接帖子中的解决方案起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T20:11:53.533

一种选择是`optionsCaption`对“未选择”值使用附加绑定。它必须设置为某个值才能使用，但您可以将其设置为`" "`.

```
<select data-bind="optionsCaption: ' ', options: stations, value: selectedStation"></select> 
```

示例：http: [//jsfiddle.net/rniemeyer/Su8Zq/3/](http://jsfiddle.net/rniemeyer/Su8Zq/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T20:12:03.730

只需添加一个“optionsCaption”，如下所示：

```
<select data-bind="options: stations, value: selectedStation, optionsCaption: '-- SELECT --'"></select> 
```

更新小提琴：http: [//jsfiddle.net/Su8Zq/2/](http://jsfiddle.net/Su8Zq/2/)

# jquery - Rails 3：确定用户是否查看过数据

> ID：11300259
> 
> 赞同：0
> 
> 时间：2012-07-02T19:53:19.540
> 
> 标签：jquery, ruby-on-rails

我想`index.html.erb`根据用户之前是否查看过与该控制器关联的记录来修改控制器页面的内容。

在我的特殊情况下，我有一个 Item 模型、Items 控制器和一个 Items 视图。Item 的视图`index.html.erb`显示每个 Item 的链接。我需要设置此视图，以便如果之前已查看过某个项目，则其链接`index.html.erb`将以斜体显​​示。如果没有被查看，链接将以粗体显示。

从视觉上看，这种方法类似于电子邮件收件箱，其中未查看的项目具有以粗体列出的主题标题，而查看的项目具有常规字体粗细。

我的问题类似于[之前的堆栈溢出帖子](https://stackoverflow.com/questions/297048/best-way-to-determine-if-a-user-has-viewed-data)；但是，该帖子提供了与数据库结构相关的一般答案。我很想知道是否有一种“Rails 方式”来实现我所缺少的这种行为。如果链接的帖子合适，任何人都可以提供有关如何使用 Rails 实现帖子推荐解决方案的建议吗？

我可以依赖浏览器并使用适当的 CSS 来设置已访问和未访问 URL 的样式，但出于与我的项目相关的其他原因（但不是这个问题，真的），我宁愿有一个依赖 Rails、钩子和/的解决方案或数据库。如果没有直接的 Rails 方法可以做到这一点，我也支持其他解决方案（例如，基于 jQuery 的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:00:38.113

[老实说，您提到](https://stackoverflow.com/questions/297048/best-way-to-determine-if-a-user-has-viewed-data) 的链接的选项 1 似乎*是*最“Rails 方式”。您制作了一个名为 a 的模型`View`，其中包含 a`item_id`和 a `user_id`。我想说最重要的是制作`View`资源。

**更新：**假设您想要将一个项目标记为已查看，如果用户已访问`Items#show`该项目。这很简单——在`Items#show`渲染页面视图之前，请执行以下操作：

```
View.create(item_id: params[:id], user_id: current_user.id) 
```

如果您担心`current_user`未登录或类似情况，您可以进行`before_filter`登录`Items#show`以使用户登录（如果您要求他在查看项目之前登录）或者只是`view`有条件地创建：

```
if current_user
  View.create(item_id: params[:id], user_id: current_user.id)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:03:30.203

向索引中使用的表添加一个新列并调用它查看

呈现页面后，将行的已查看列设置为 true 或 1

下次加载页面时，您将检查是否已使用该列查看它，然后显示为斜体，然后渲染页面然后设置新行 - 即所有行为 true

-- 诀窍是在渲染页面后更新你的行 --

当您插入新记录时，您会将它们插入列视图为 false - 未查看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T20:04:20.610

如果您只想在每个会话的基础上更改链接，您可以这样做...

如果您真的打算使用 Rails 执行此操作，您可以在会话中存储一个变量来检查页面是否已被访问。就像是

`session["visited_hash"]["name_of_page_or_whatever"] = true`

然后在索引页面上

```
if session["visited_hash"]["name_of_page_or_whatever"] == true
  #render link with special formatting
else
  #render normally 
```

老实说，我可能会在 CSS 中实现这一点，但这是在 Rails 中实现的一种方法。不能保证它是最有效的。

# php - 将 8 个 Ajax 调用变为 1 个

> ID：11300262
> 
> 赞同：1
> 
> 时间：2012-07-02T19:53:26.110
> 
> 标签：php, javascript

所以我有一个包含八个类别的图片库。每个类别有 400 多个图像，这些子类别由 AJAX 调用。我在子类别中也有一个分页系统。目前我有 8 个 ajax 调用，这是没用的，所以我想通过给出 2 个参数将它们缩小为一个：'lap' 告诉它它在哪个页面上，如果 lap == 0 或 null 它给出正常页面，否则它会给出 oldal+?page= + lap。'Oldal' 是第二个参数，它用于第一个类别选择，它告诉浏览器要打开哪个 php 文件（kepek_kat1.php 或 kepek_kat2 ... kepek_kat8.php）。“Oldal”在打开类别、进入子类别时效果很好，但分页不起作用。这是我的8个护理代码：

```
 <div id="kepek">
    <div class="kepkat"><a href="#amator" onclick="mutikat(null,'../php/kepek_kat1.php');"><img src="../img/kepkat/amator.jpg" height="130px" width="90px" alt="Amatőrök"/><br/>Amatőr</a></div></div> <!-- only showing the first selection --> 
```

所以第一个参数是空的，这给了它没有分页的页面。

这是我的子类别代码：

```
echo "<div class='lapozo'><a onclick='mutikat($page, '../php/kepek_kat1.php');'  href='../html/blog.php#amator?page=$page'>$page</a></div>"; } 
```

$page 在一个循环中，它列出了它当前所在的页面，它显示了页面控件。

这是我的ajax调用：

```
function mutikat(lap, oldal)
{
            //create XMLHttpRequest object
            xmlHttpRequest = (window.XMLHttpRequest) ? 
            new XMLHttpRequest() : new ActiveXObject("Msxml2.XMLHTTP");

            //If the browser doesn't support Ajax, exit now
            if (xmlHttpRequest == null)
            return;

            if(lap == 0 || lap === 0 || lap == null )
            {
            //Initiate the XMLHttpRequest object
            xmlHttpRequest.open("GET", oldal, true);
            }
            else
            {
                xmlHttpRequest.open("GET", oldal + '?page=' +lap, true);
            }
            //Setup the callback function
            xmlHttpRequest.onreadystatechange = StateChange;

            //Send the Ajax request to the server with the GET data
            xmlHttpRequest.send(null);
}
function StateChange()
{
            if(xmlHttpRequest.readyState == 4)
            {
            document.getElementById('kepek').innerHTML = xmlHttpRequest.responseText;
            }
} 
```

有 8 个 ajax 调用。请帮我！

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:08:20.843

我知道你可以使用[jQuery 的 $.when.then();异步加载 8 个 ajax 调用。](http://api.jquery.com/jQuery.when/)职能...

这是一个例子：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){

    $.when(
        $.getScript("http://domain.com/script_one.js"),
        $.getScript("http://domain.com/script_two.js"),
        $.getScript("http://domain.com/script_three.js"),
        $.getScript("http://domain.com/script_four.js")
    ).then(

        $(function() {

            //work with downloaded scripts and their variables here

        })

    );
});
</script> 
```

# javascript - 电梯生成JS时是否有JsAnd或JsOr？

> ID：11300263
> 
> 赞同：1
> 
> 时间：2012-07-02T19:53:33.830
> 
> 标签：javascript, scala, lift

我知道这是一个非常菜鸟的问题......

我看到 lift 提供了实用程序方法来生成 javascript 命令。我想做相当于：

```
JsIf((JsEq(ValById("disable-production"),JsTrue) || JsEq(ValById("disable-production"), JsTrue) , {
        Alert("Do something interesting...")
      }) 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T20:09:50.793

是的，[有](http://scala-tools.org/mvnsites/liftweb-2.4/#net.liftweb.http.js.JE%24%24JsOr)：

```
import net.liftweb.http.js.JsCmds._
import net.liftweb.http.js.JE._

val conditional = JsIf(
  JsOr(
    JsEq(ValById("disable-production"), JsTrue),
    JsEq(ValById("disable-something-else"), JsTrue)
  ),
  Alert("Do something interesting...")
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:06:31.130

您最好直接以字符串形式编写它，然后使用`JsExp.strToJValue(<your expression>)`.

但是，您的问题的直接答案是`JE.JsOr`。

```
JsIf((JE.JsOr(JsEq(ValById("disable-production"),JsTrue),
             JsEq(ValById("disable-production"), JsTrue)) , {
    Alert("Do something interesting...")
  }) 
```

# android - 在 AChartEngine 时间图中启用滚动

> ID：11300264
> 
> 赞同：2
> 
> 时间：2012-07-02T19:53:40.737
> 
> 标签：android, achartengine

我只是在用 android 测试 AChartEngine 的时间表。我当前的图表使用此处找到的代码： [how to implement TimeChart in achartengine with android](https://stackoverflow.com/questions/8869854/how-to-implement-timechart-in-achartengine-with-android/9030140#9030140) 这使得时间图可以正常工作，除非它不滚动。据我了解，mRenderer.setPanEnabled(true) 行应该使其可滚动（或可平移），但它似乎不起作用。我已经尝试将其更改为 mRenderer.setPanEnabled(true, true) 并将其全部删除，但是无论我做什么，图表都不允许我向任何方向滚动。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T07:27:18.000

试试这个：

```
mRenderer.setPanEnabled(true, true);
mRenderer.setClickEnabled(false); 
```

# windows - 为什么 TFontDialog 提供的字体比 Screen.Fonts 少？

> ID：11300277
> 
> 赞同：4
> 
> 时间：2012-07-02T19:54:38.537
> 
> 标签：windows, delphi, fonts, wordpad

我想知道为什么 TFontDialog 提供的字体比 Screen.Fonts 少？（例如，Arial* 字体、Comic 字体等，在 TFontDialog 中不显示）

看来TFontDialog给出的字体列表和WordPad一样，而Screen.Fonts给出的字体列表和Word基本一样。

非常感谢您的见解！

PS：德尔福XE，Windows 7

PS：相关的SO主题：

1.  [使用 EnumFontFamiliesEx 函数枚举时字体过多](https://stackoverflow.com/questions/11253827/too-many-fonts-when-enumerating-with-enumfontfamiliesex-function)
2.  [使用 Delphi 查找系统字体](https://stackoverflow.com/questions/401915/finding-system-fonts-with-delphi?rq=1)
3.  [如何使用外部字体？](https://stackoverflow.com/questions/2305344/how-to-use-external-fonts?rq=1)

PS：相关网页：

1.  [TFontDialog 显示所有字体@borland.newsgroups.archived](http://borland.newsgroups.archived.at/public.delphi.nativeapi.win32/200710/0710039059.html)
2.  [TFontDialog 显示所有字体@delphigroups](http://www.delphigroups.info/2/2/358057.html)

[![系统](../Images/1e0df51cdd1fc9d8b843dec4d679d7bd.png "点击显示原文")](https://i.stack.imgur.com/hVUgZ.png) [![应用程序](../Images/e285e9ab8b7c3be9698750594766c84d.png "点击显示原文")](https://i.stack.imgur.com/VHeSi.png)

```
unit Unit2;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TForm2 = class(TForm)
    lst1: TListBox;
    dlgFont1: TFontDialog;
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form2: TForm2;

implementation

{$R *.dfm}

procedure TForm2.FormCreate(Sender: TObject);
begin
  lst1.Items.AddStrings(Screen.Fonts);
end;

procedure TForm2.Button1Click(Sender: TObject);
begin
  dlgFont1.Device := fdBoth;
  if dlgFont1.Execute then
  begin

  end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T01:00:17.727

`Screen.Fonts`返回所有已安装的字体，包括在*Registry\HKCU\Software\Microsoft\Windows NT\CurrentVersion\Font Management\Inactive Fonts*中管理的隐藏字体。( [Source](http://vb.mvps.org/samples/FontFilter/) ) 显然，`TFontDialog`不显示这些隐藏的字体。

此外，有些字体在 的*字体*组合框中`Screen.Fonts`没有提及，而是添加到*字体样式*组合框中。以*Arial*为例：Font 样式列出了 10 项，似乎是*Arial*、*Arial Black*和*Arial Narrow*字体的组合。*`TFontDialog`*

 **** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T20:43:09.943

不同的API，不同的结果。 `Screen.Fonts`uses `EnumFontFamiliesEx()`，它返回所有已安装的字体。 `TFontDialog`而是使用，它只显示与和属性`ChooseFont()`兼容的字体。`TFontDialog.Font``TFontDialog.Options`***

# momentjs - moment.js 中完全人性化的持续时间

> ID：11300278
> 
> 赞同：73
> 
> 时间：2012-07-02T19:54:40.370
> 
> 标签：momentjs

我在 moment.js 中试过这个

```
moment.duration(375,'days').humanize() 
```

并得到**“一年”**作为答案，但我希望“一年零 10 天”。在 moment.js 中有没有办法获得完整的人性化价值？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2015-07-02T14:01:33.447

Moment.js 提供了`fromNow`以人类可读的形式获取持续时间的功能，请参阅[http://momentjs.com/docs/#/displaying/fromnow/](http://momentjs.com/docs/#/displaying/fromnow/)

例子：

```
moment([2007, 0, 29]).fromNow(); // 4 years ago
moment().subtract(375, 'days').fromNow(); // a year ago 
```

您需要按照@Fluffy 的建议使用第三方库

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-09-26T09:22:23.467

我找到了这个只显示持续时间的小库（如果你真的不需要 moment.js 的所有功能）

[https://github.com/EvanHahn/HumanizeDuration.js](https://github.com/EvanHahn/HumanizeDuration.js)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-05-22T07:24:55.213

试试这个插件：

[https://github.com/jsmreese/moment-duration-format](https://github.com/jsmreese/moment-duration-format)

```
moment.duration(123, "minutes").format("h [hrs], m [min]");
// "2 hrs, 3 min" 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-11-13T12:22:17.483

我正在研究同样的问题，似乎没有计划在未来支持这个......

*尽管提出的一种解决方法是创建一个覆盖*人性化消息的默认实现的语言定义：

[https://github.com/timrwood/moment/issues/348](https://github.com/timrwood/moment/issues/348)

如果你问我有点矫枉过正......

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-10-10T12:53:50.223

用于[`moment.relativeTimeThreshold('y', 365)`](https://github.com/moment/momentjs.com/blob/master/docs/moment/07-customization/13-relative-time-threshold.md)设置舍入。

```
moment.relativeTimeThreshold('s', 60);
moment.relativeTimeThreshold('m', 60);
moment.relativeTimeThreshold('h', 24);
moment.relativeTimeThreshold('d', 31);
moment.relativeTimeThreshold('M', 12);
moment.relativeTimeThreshold('y', 365); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-05-07T21:43:42.100

我做了一个函数来解决这个确切的问题。

```
function formatDuration(period) {
    let parts = [];
    const duration = moment.duration(period);

    // return nothing when the duration is falsy or not correctly parsed (P0D)
    if(!duration || duration.toISOString() === "P0D") return;

    if(duration.years() >= 1) {
        const years = Math.floor(duration.years());
        parts.push(years+" "+(years > 1 ? "years" : "year"));
    }

    if(duration.months() >= 1) {
        const months = Math.floor(duration.months());
        parts.push(months+" "+(months > 1 ? "months" : "month"));
    }

    if(duration.days() >= 1) {
        const days = Math.floor(duration.days());
        parts.push(days+" "+(days > 1 ? "days" : "day"));
    }

    if(duration.hours() >= 1) {
        const hours = Math.floor(duration.hours());
        parts.push(hours+" "+(hours > 1 ? "hours" : "hour"));
    }

    if(duration.minutes() >= 1) {
        const minutes = Math.floor(duration.minutes());
        parts.push(minutes+" "+(minutes > 1 ? "minutes" : "minute"));
    }

    if(duration.seconds() >= 1) {
        const seconds = Math.floor(duration.seconds());
        parts.push(seconds+" "+(seconds > 1 ? "seconds" : "second"));
    }

    return "in "+parts.join(", ");
} 
```

此函数采用句点字符串 (ISO 8601)，使用 Moment (>2.3.0) 对其进行解析，然后对于每个时间单位，将一个字符串推入`parts`数组中。然后数组中的所有内容都作为分隔字符串`parts`连接在一起。`", "`

你可以在这里测试它：[https ://jsfiddle.net/mvcha2xp/6/](https://jsfiddle.net/mvcha2xp/6/)

我将它用作 Vue 过滤器来正确地人性化持续时间。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-04-12T16:34:02.550

Github 上的[这个问题包含很多关于这一点的讨论。](https://github.com/moment/moment/issues/348)许多人要求更精确的人性化选择。

说明您需要它的原因、用例等。

[https://github.com/moment/moment/issues/348](https://github.com/moment/moment/issues/348)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-05-19T05:19:30.553

我已经编写了这个 javascript 代码来人性化持续时间，

```
function humanizeDuration(timeInMillisecond) {
    var result = "";
    if (timeInMillisecond) {
        if ((result = Math.round(timeInMillisecond / (1000 * 60 * 60 * 24 * 30 * 12))) > 0) {//year
            result = result === 1 ? result + " Year" : result + " Years";
        } else if ((result = Math.round(timeInMillisecond / (1000 * 60 * 60 * 24 * 30))) > 0) {//months
            result = result === 1 ? result + " Month" : result + " Months";
        } else if ((result = Math.round(timeInMillisecond / (1000 * 60 * 60 * 24))) > 0) {//days
            result = result === 1 ? result + " Day" : result + " Days";
        } else if ((result = Math.round(timeInMillisecond / (1000 * 60 * 60))) > 0) {//Hours
            result = result === 1 ? result + " Hours" : result + " Hours";
        } else if ((result = Math.round(timeInMillisecond / (1000 * 60))) > 0) {//minute
            result = result === 1 ? result + " Minute" : result + " Minutes";
        } else if ((result = Math.round(timeInMillisecond / 1000)) > 0) {//second
            result = result === 1 ? result + " Second" : result + " Seconds";
        } else {
            result = timeInMillisecond + " Millisec";
        }
    }
    return result;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-05-28T12:02:38.060

解决方案之一：

```
function getCountdown() {
  // diff in seconds, comes through function's params
  const diff = 60*60*24*4 + 60*60*22 + 60*35 + 5;
  const MINUTE = 60;
  const HOUR = MINUTE * 60;
  const DAY = HOUR * 24;

  const days = Math.floor(diff / DAY);
  const hDiff = diff % DAY;
  const hours = Math.floor(hDiff / HOUR);
  const mDiff = hDiff % HOUR;
  const minutes = Math.floor(mDiff / MINUTE);
  const seconds = mDiff % MINUTE;

  return [days, hours, minutes, seconds]
    .map(v => (''+v)[1] ? ''+v : '0'+v)
}

output: ["04", "22", "35", "05"] 
```

我只需要几天，但可以很容易地延长到几周。几个月没有意义，因为 diff 没有说明开始日期。将时间段拆分为多个部分，添加“天”/“小时”/... 是显而易见的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-07T12:28:15.730

Moment.js 提供：

```
var y = moment.duration(375,'days').years(); // returns 1
var d = moment.duration(375,'days').days(); // returns 9

var data = y + 'y ' + d + 'd';

console.log(data); 
```

这可以与一些额外的逻辑一起使用

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-09-17T10:38:57.263

这是我在 CoffeeScript 上的解决方案：

```
humanizeDuration = (eventDuration)->
    eventMDuration = Moment.duration(eventDuration, 'seconds');
    eventDurationString = ""
    if (eventMDuration.days() > 0)
        eventDurationString += " " + Moment.duration(eventMDuration.days(), 'days').humanize()
    if (eventMDuration.hours() > 0)
        eventDurationString += " " + Moment.duration(eventMDuration.hours(), 'hours').humanize()
    if (eventMDuration.minutes() > 0)
        eventDurationString += " " + Moment.duration(eventMDuration.minutes(), 'minutes').humanize()

    eventDurationString.trim() 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2017-08-22T22:48:52.610

这是我的解决方案，我比这里的其他人更喜欢它：

```
val moment1 = moment();
val moment2 = mement();
console.log(moment.duration(moment1.diff(moment2)).humanize()); 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2018-11-02T10:29:45.130

基于 Ihor Kaslashnikov 的解决方案，我使用 vanilla Javascript 修改了该函数以使其更加准确。

```
function momentHumanize(eventDuration, unit) {
    var eventMDuration = moment.duration(eventDuration, unit);
    var eventDurationArray = [];
    if (eventMDuration.years() > 0) {
        eventDurationArray.push(eventMDuration.years() + ' years');
        eventMDuration.subtract(eventMDuration.years(), 'years')
    }
    if (eventMDuration.months() > 0) {
        eventDurationArray.push(eventMDuration.months() + ' months');
        eventMDuration.subtract(eventMDuration.months(), 'months')
    }
    if (eventMDuration.weeks() > 0) {
        eventDurationArray.push(eventMDuration.weeks() + ' weeks');
        eventMDuration.subtract(eventMDuration.weeks(), 'weeks')
    }
    if (eventMDuration.days() > 0) {
        eventDurationArray.push(eventMDuration.days() + ' days');
        eventMDuration.subtract(eventMDuration.days(), 'days')
    }
    if (eventMDuration.hours() > 0) {
        eventDurationArray.push(eventMDuration.hours() + ' hours');
        eventMDuration.subtract(eventMDuration.hours(), 'hours')
    }
    if (eventMDuration.minutes() > 0) {
        eventDurationArray.push(eventMDuration.minutes() + ' minutes');
    }
    return eventDurationArray.length === 1 ? eventDurationArray[0] : 
    eventDurationArray.join(' and ')
} 
```

一旦它人性化，这将从时刻实例中删除任何数量。我这样做是因为 Ihor 的解决方案不准确，因为那一刻的人性化功能会舍入该值。例如，如果我有 2.8 小时，它应该是`2 hours and an hour`. 我的解决方案从实例中删除了 2 小时，只剩下 0.8 小时，并且不使用 moment 的人性化功能来避免四舍五入。

例子：

```
momentHumanize(45, 'minutes') // 45 minutes

momentHumanize(4514, 'minutes') // 3 days and 3 hours and 14 minutes

momentHumanize(45145587, 'minutes') // 85 years and 10 months and 1 days and 2 hours and 27 minutes 
```

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2020-03-19T12:49:30.940

```
var s=moment([2020, 03, 29]).subtract(3, 'days').fromNow(); 

document.write(s)
```

[在此处输入链接描述](https://jsfiddle.net/srinishith/xj95ygku/29/)

# c# - 支持 ASP.NET 中的多语言

> ID：11300280
> 
> 赞同：0
> 
> 时间：2012-07-02T19:54:44.793
> 
> 标签：c#, asp.net, file, multilingual

我只是在第二行出现运行时错误。

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
rm = new ResourceManager("Resources.Default.apsx", 
         System.Reflection.Assembly.Load(System.IO.File.ReadAllBytes(
             "E:\\New folder\\multi_lang\\multi_lang\\App_LocalResources")));
ci = Thread.CurrentThread.CurrentCulture; 
```

错误消息说从以下路径拒绝访问或文件处于只读模式。我没有发现我的代码有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:00:03.840

尝试使用此代码，如果您使用版本 2.0 或 3.5 或 4，则无需加载资源文件

```
String language = "en-US";
Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(language); 
```

或者在您的配置中

```
<globalization culture="en-US" /> 
```

或者在你的页面 default.aspx 中使用它

```
<%@ Page Culture="en-US" %> 
```

# jquery - 如何获取隐藏对 象的位置

> ID：11300283
> 
> 赞同：-1
> 
> 时间：2012-07-02T19:54:55.637
> 
> 标签：jquery

所以我有一个正在制作的megamenu，我想让它符合屏幕尺寸。当子菜单被下拉时，我不希望它离开屏幕边缘。我计划中的小问题是我不知道如何在元素对浏览器实际可见之前检测它的位置。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T19:56:22.310

元素在浏览器可见之前没有位置*。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T20:00:55.667

您可以将元素的不透明度设为 0.01，然后检查其位置。这使得普通用户*可见*但仍然不可见。

```
var offset = $(selector).show().css('opacity',0.01).offset();
$(selector).css('opacity',1).hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T20:07:24.580

您可以显示元素以获取其位置并在之后隐藏它：

```
var element = $('#element');
element.show();
var position = element.position();
element.hide(); 
```

[**演示**](http://jsfiddle.net/H6d3q/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T20:10:35.667

```
var offset = $(selector).fadeTo(1, .01).offset();
$(selector).hide(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-02T20:12:47.173

```
if($(this).offset().left - 90 < window.screenLeft) { 
    $(this).next().css('left','0')
}
else if($(this).offset().left + $(this).outerWidth() + 90 > window.innerWidth) {
    $(this).next().css('right', '0')
}
else { 
    $(this).next().css('left', '-90px')
} 
```

# facebook - 直接链接到 Facebook 为特定 URL 存储的 og:image？

> ID：11300290
> 
> 赞同：0
> 
> 时间：2012-07-02T19:55:33.920
> 
> 标签：facebook, image, facebook-opengraph

谷歌允许您链接到网站的图标非常巧妙，就像这样：

[http://www.google.com/s2/favicons?domain=www.stackoverflow.com](http://www.google.com/s2/favicons?domain=www.stackoverflow.com)。这很棒，因为您可以将其用作图像的 src。

任何人都知道链接到给定网页的 og:image 标记中定义的图像的类似方法 - 第三方 URL，而不是 Facebook 托管的“页面”？这真的很方便，可以做类似的事情（我正在编造这个）：

```
<img src="https://graph.facebook.com/www.stackoverflow.com/og:image" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:53:33.870

是的，这可以使用开放图来完成。

https://graph.facebook.com/[userId]/picture 或
https://graph.facebook.com/[pageId]/picture

例如：
**UserId**
[https://graph.facebook.com/4/picture](https://graph.facebook.com/4/picture)（马克扎克伯格的头像）或

**PageId**
[https://graph.facebook.com/40796308305/picture](https://graph.facebook.com/40796308305/picture)（可口可乐的头像）或
[https://graph .facebook.com/cocacola/picture](https://graph.facebook.com/cocacola/picture)

# c++ - 解析字符串以创建元素列表

> ID：11300292
> 
> 赞同：2
> 
> 时间：2012-07-02T19:55:46.353
> 
> 标签：c++, string, string-parsing

我有一个这样的字符串：

> "\r 颜色=\"红色\" 名称=\"乔恩\" \t\n 深度=\"8.26\" "

我想解析这个字符串并创建一个`std::list`这个对象：

```
class data
{
    std::string name;
    std::string value;
}; 
```

例如：

```
name = color
value = red 
```

最快的方法是什么？我可以使用升压。

## 编辑：

这是我尝试过的：

```
vector<string> tokens;
split(tokens, str, is_any_of(" \t\f\v\n\r"));

if(tokens.size() > 1)
{
    list<data> attr;
    for_each(tokens.begin(), tokens.end(), [&attr](const string& token)
        {
            if(token.empty() || !contains(token, "="))
                return;

            vector<string> tokens;
            split(tokens, token, is_any_of("="));
            erase_all(tokens[1], "\"");
            attr.push_back(data(tokens[0], tokens[1]));
        }
    );
} 
```

但是如果里面有空格就不行了`" "`:like `color="red 1"`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:47:49.030

假设在 之前总是至少有一个空格`name`，我认为以下算法足够快：

```
list<data> l;
size_t fn, fv, lv = 0;

while((fv = str.find("\"", ++lv)) != string::npos &&
    (lv = str.find("\"", fv+1)) != string::npos)
{
    fn = str.find_last_of(" \t\n\v\f\r", fv);
    l.push_back(data(str.substr(++fn, fv-fn-2), str.substr(++fv, lv-fv)));
} 
```

`str`你在哪里`std::string`并且`data`有这种类型的构造函数：

```
data(string name, string value)
    : name(name), value(value)
{   } 
```

如您所见，无需使用 boost 或 regex，只需使用标准库即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:33:32.180

**编辑后**：您可以针对空间问题执行以下操作：

（用 \n 替换不在 " " 引号内的所有空格）

```
void PrepareForTokanization(std::string &str)
{
    int quoteCount = 0;
    int strLen = str.length();
    for(int i=0; i<strLen; ++i){
        if (str[i] == '"' && (i==0 || (str[i-1] != '\\')))
            quoteCount++;
        if(str[i] == ' ' && quoteCount%2 == 0)
            str[i] = '\n';
    }
} 
```

在调用 split 之前，准备好字符串，然后从 split is_any_of 中删除空格字符

```
PrepareForTokanization(str);
split(tokens, str, is_any_of("\t\f\v\n\r")); 
```

# cdi - 为什么两个具有会话范围的控制器看不到对方？

> ID：11300297
> 
> 赞同：0
> 
> 时间：2012-07-02T19:56:08.447
> 
> 标签：cdi

我将 CDI bean UserController 注释为 @ConversationScope 并带有一个名为 user 的属性，其中暴露了 getter 和 setter。

```
@ConversationScoped
@Named("userController")
public class UserController implements Serializable {

    private User user;

    @PostConstruct
    public void init() {
        this.user = new User();
    }

    //getters and setters ommited...

} 
```

我的观察员也有第二节课。

```
@ConversationScoped
public class UserObservers implements Serializable {

    @Inject private UserController controller;

    public void createObserver(@Observes @MyQualifier MyEvent event) {

        this.controller.getUser().setName("Test Name");

    }
} 
```

用户属性填充在我的界面中，我希望我的观察者更改用户的名称，但用户属性始终返回 null。

就像我的观察者位于不同的对话中一样。

我可以为同一个用户会话启用多个会话吗？

更新：当我将导航规则更改为重定向时，代码可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T04:07:38.303

会不会是你没有开始谈话？然后，您将获得每个请求的新对话。将对话注入两个 bean 并调试其状态/ID 肯定会揭示问题。

# asp.net - 动态创建的自定义验证器不会将错误消息添加到验证摘要

> ID：11300298
> 
> 赞同：0
> 
> 时间：2012-07-02T19:56:13.963
> 
> 标签：asp.net, customvalidator

你能告诉我，为什么自定义验证器（动态创建），这里的信息没有添加到验证摘要中？是因为更新面板吗？如何让它发挥作用？我绝对筋疲力尽，但找不到合适的解决方案......

## MultiFreeSet 控制代码隐藏：

```
protected void btnPatternAdder_Click(object sender, EventArgs eventArgs)
{
    var includeEventArgs = new IncludeEventArgs();
    baseTSMAlertConfigEditControlWithInclude.btnPatternAdder_Click(sender, includeEventArgs);
    if (includeEventArgs.Cancel)
    {
        /*
        var ClientValidationFunctionName = string.Format("{0}_ClientValidation", ID);
        Page.ClientScript.RegisterClientScriptBlock(
                                                GetType(),
                                                string.Format("{0}_validationScript", ID),
                                                string.Format("function {0}(sender, eventArgs) {{ eventArgs.errormessage = '{1}', eventArgs.IsValid = false; return; }}",
                                                ClientValidationFunctionName,
                                                includeEventArgs.Message));
        */
        var customValidator = new CustomValidator
        {
            //ClientValidationFunction = ClientValidationFunctionName,
            ValidationGroup = ValidationGroup,
            IsValid = false,
            ErrorMessage = includeEventArgs.Message,
            Display = ValidationDisplayType
        };
        Page.Validators.Add(customValidator);
    }
} 
```

## MultiFreeSet 控件标记：

```
<asp:UpdatePanel ID="upFreeSet" runat="server">
<ContentTemplate>
...
    <asp:PlaceHolder runat="server" ID="phIncludePattern" Visible="false">
    <tr>
        <td class="SubHead">[IncludeCaption]</td>
        <td>
            <asp:TextBox ID="txtIncludePattern" runat="server" Text="" CssClass="MediumTextBox" />
            </td>
            <td>
                <asp:Button CommandName="ListAdder" ID="btnPatternAdder" runat="server" CssClass="buttonClass displayBlock" Text="Add" OnClick="btnPatternAdder_Click" />
            </td>
        </tr>
        <tr>
        <td class="SubHead ta">[IncludedCaption]</td>
        <td>
            <asp:ListBox ID="lboxIncludePattern" runat="server" SelectionMode="Multiple" Rows="7" CssClass="LargeDropDownList" />
    <asp:ObjectDataSource ID="odsIncludePattern" runat="server" />
</td>
<td class="ta">
<asp:Button CommandName="ListDeleter" ID="btnPatternDeleter" runat="server" CssClass="buttonClass displayBlock" Text="Delete selected" OnClick="btnPatternDeleter_Click" />
    </td>
    </tr>
    </asp:PlaceHolder>
...
</ContentTemplate> 
```

## 主要控制标记：

```
<asp:FormView>
    <EditItemTemplate>
        ...
        <ac:multiFreeSet ID="multiNodePatternInclusions" ValidationGroup="vgFrmConfigEdit" IgnoreCase="True" runat="server" Caption="Include node name patterns" IncludeCaption="Add node name pattern" IncludedCaption="Included node name patterns" />
        <XXX:SaveButton ID="btnImgSave" runat="server" ValidationGroup="vgFrmConfigEdit" />
        <XXX:CancelBackButton ID="btnImgCancel" runat="server" />
        <asp:ValidationSummary ID="valSummary" runat="server" ValidationGroup="vgFrmConfigEdit" CssClass="NormalRed" ShowSummary="True" />
        ...
    </EditItemTemplate>
</asp:FormView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:20:15.860

好的。好吧..我必须在更新面板内创建一个带有单独验证组的单独验证摘要..

# java - 为什么使用 String.intern() 与在 Java 中传递 String 对象会得到不同的结果？

> ID：11300300
> 
> 赞同：5
> 
> 时间：2012-07-02T19:56:19.213
> 
> 标签：java

我有一个命令行程序来针对 XSD 文件验证 XML。该程序的命令行选项之一是要使用的命名空间，它存储在`String namespace`. 我得到不同的验证结果，具体取决于我将解析的选项传递为`namespace`还是传递给`namespace.intern()`. 不同的结果意味着在 XML 验证器的某处，`String`对命名空间执行的比较具有不同的结果，即使它们应该具有相同的 ASCII 值集。

这些可能会产生不同的比较结果是否有根本原因？

该类`NamespaceFilter`（见下文）是使用命名空间值的地方。此类与`namespace`在内部当前元素上找到的值进行比较`startElement`，然后分配它。 `startElement`由 XML 阅读器调用。

这些是 validateAgainstXSD 中的行变体：

### `String.intern()`

`NamespaceFilter nsf = new NamespaceFilter(XMLReaderFactory.createXMLReader(), namespace.intern());`

*结果*：
验证 uart.xml。

### 字符串对象原样

`NamespaceFilter nsf = new NamespaceFilter(XMLReaderFactory.createXMLReader(), namespace);`

*结果*：
错误 4：cvc-complex-type.2.4.a：发现以元素“fileVersion”开头的无效内容。需要 '{"myNamespace":fileVersion}' 之一。

### 上下文中的来源

```
public static void validateAgainstXSD(File file, File schemaFile, String namespace) {

    try {
        SchemaFactory factory = SchemaFactory.newInstance("http://www.w3.org/2001/XMLSchema");

        Schema xsdScheme = factory.newSchema(schemaFile);

        Validator validator = xsdScheme.newValidator();
        ErrorHandler eh = new DefaultErrorHandler();

        validator.setErrorHandler(eh);

        // Create namespace replacement filter  
        NamespaceFilter nsf = new NamespaceFilter(XMLReaderFactory.createXMLReader(), namespace.intern());

        // Load the XML source
        SAXSource source = new SAXSource(nsf, new InputSource(new FileInputStream(file)));

        validator.validate(source, null);
    } catch (Exception e) {
        e.printStackTrace();
    }

}

private static class NamespaceFilter extends XMLFilterImpl {

    private String requiredNamespace;

    public NamespaceFilter(XMLReader parent) {
        super(parent);
    }

    public NamespaceFilter(XMLReader parent, String namespace) {
        this(parent);

        requiredNamespace = namespace;
    }

    @Override
    public void startElement(String uri,
            String localName,
            String qName,
            Attributes atts)
            throws SAXException {

        if (!uri.equals(requiredNamespace)) {
            uri = requiredNamespace;
        }
        super.startElement(uri, localName, qName, atts);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:44:57.813

您还需要覆盖`endElement()`，其中包含类似的逻辑。否则，开始和结束元素 URI 可能不匹配。`XMLFilterImpl`可能在 == 而不是 .equals() 上匹配它们。

# matlab - linprog 可以给出 x 的整数值吗？

> ID：11300305
> 
> 赞同：3
> 
> 时间：2012-07-02T19:56:38.340
> 
> 标签：matlab, integer, mathematical-optimization, linear-programming

我有一个 linprog 代码，其目标函数中有 x1、x2、x3 和 x4。

我得到的结果为我提供了以下形式的值：

```
 x = 
6.6667
0.0420
0 
0 
```

在我尝试建模的情况下，这在物理上没有意义，因为 x 代表特定技术的单位数，因此例如 0.0420 实际上并不存在。无论如何要“强制” linprog 找到 x 的最佳整数值？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T20:02:33.887

这称为[整数编程](http://en.wikipedia.org/wiki/Integer_programming)，通常是 NP 难的。它没有被涵盖，`linprog`因为它是一个完全不同且更难的问题。

[这是 Stack Overflow 关于 Integer Programming 的一个相关问题（但不是重复问题）](https://stackoverflow.com/questions/1970686/integer-linear-programming-example-and-good-tools?rq=1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:49:43.413

您应该考虑使用混合整数编程（在 linprog 中将“整数约束”如“x 整数”添加到线性程序时会得到一个）。

直截了当，我建议使用[Scip](http://scip.zib.de/ "scip")，因为它是“免费的”或[Gams](http://www.gams.com/ "游戏")，它是一种商业产品，但为较小的实例提供免费试用版。

可以在 [scicomp][3] 找到关于混合整数规划和对应求解器的更详细的帖子

[3]：[https](https://scicomp.stackexchange.com/questions/2679/objects-in-buckets-assignment-optimization-problem) ://scicomp.stackexchange.com/questions/2679/objects-in-buckets-assignment-optimization-problem“scicomp”。

# jquery - Jquery 和 asp.net 母版页

> ID：11300306
> 
> 赞同：0
> 
> 时间：2012-07-02T19:56:39.440
> 
> 标签：jquery, asp.net, master-pages

我想我最近看到了一个示例，它允许您将 jquery 与 asp.net 和母版页一起使用，因此您不必拥有对象的全名。

例如，假设您在母版页中有一个标签。当您查看来源时，该名称可能是“ct100_lblName”。如果在 JQuery 中引用它，则需要使用完整的 ct100_lblName。这就是我想我看到你可以在你的 jquery 中放置一些东西的地方，在那里你做了那个引用并使用了一些 jquery 魔法和 lblName。

我离这儿很远吗？谢谢香农

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:01:49.773

您可以使用“结束”选择器：

```
$("span[id$=lblName]") 
```

但是您应该使用“context”参数来获得更准确的结果，否则选择器可能会返回您期望的更多对象。

```
$("span[id$=lblName]", "#myDiv") 
```

[http://api.jquery.com/attribute-ends-with-selector/](http://api.jquery.com/attribute-ends-with-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:02:02.737

您可以在 aspx 中获取 clientID，并像这样使用它：

```
var clientIdOfTheLabel = "<%=lblName.ClientID%>";
var $label = $("#" + clientIdOfTheLabel); 
```

或者将 css 类添加到您的标签中，并使用 css 选择器访问您的元素。就像是`var $labels = $(".myInterestingLabels");`

# php - html5 文件上传器/ move_uploaded_file 问题

> ID：11300307
> 
> 赞同：0
> 
> 时间：2012-07-02T19:56:39.760
> 
> 标签：php, html, file, upload

我找到了一个我喜欢的 html5 文件上传器插件（可恢复），并且在将文件保存到硬盘时，除了在服务器（php）端之外，一切正常。也许有人可以看看并给我建议？因为我不断收到日志错误消息，我怀疑我的`@move_uploaded_file`权限有问题？或者，如果有人可以让我知道在哪里查找任何 php 错误，那也很有用。我是初学者。

```
$temp_dir = '/public_html/uploads/'.$_POST['resumableIdentifier'];
$dest_file =     '/public_html/uploads/'.$_POST['resumableFilename'].'.part'.$_POST['res      umableChunkNumber'
// create the temporary directory
@mkdir($dir, 0777, true);

// move the temporary file
if (!@move_uploaded_file($file['tmp_name'], $dest_file)) {      
_log('Error saving (move_uploaded_file)'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:14:59.507

为什么要使用 @mkdir 和 @move_uploaded_file 抑制错误消息？`ini_set('display_errors', 1);`
`error_reporting(E_ALL);`
如果您没有看到 php-errors 并查看出现了哪些消息，请删除 @'s，在脚本的开头写入。

还要检查你的变量。您正在设置 $temp_dir 但尝试使用 $dir 创建目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:27:09.990

我刚刚使用了一些化妆品并更正了代码中的一些错误。不得不假设一些事情。临时目录只需要创建一次（我猜？）。

```
$temp_dir = '/public_html/uploads/'.$_POST['resumableIdentifier'].'/';
$dest_file = $temp_dir . $_POST['resumableFilename'] . '.part' . $_POST['resumableChunkNumber'];

// create the temporary directory
if (!is_dir($temp_dir) {
    if (!mkdir($temp_dir, 0777, true)) {
        _log('Error creating directory (mkdir)');
    }
}

// move the temporary file
if (!move_uploaded_file($file['tmp_name'], $dest_file)) {
    _log('Error saving (move_uploaded_file)';
} 
```

# php - 使用 PHP 无限期显示子类别

> ID：11300308
> 
> 赞同：0
> 
> 时间：2012-07-02T19:56:40.367
> 
> 标签：php

我不知道当前的数据库模式是否可行，但这里有。我有主要类别，这些只是在数据库中用布尔值标记。然后是一个以逗号分隔的子类别列表。

例如：

```
MainCat1
    SubCat1
        SubCat2
        SubCat2-1
            Subcat3 
```

所以在 MainCat1 的子类别字段中只会有“SubCat1”，而在 SubCat1 的子类别字段中会有“SubCat2，SubCat2-1”等等。

我希望这是有道理的！我不介意您如何显示它，它们最终将成为嵌套列表。

数据库架构：

```
id        |maincat  |       subcats     |
---+---------+--------------------------+
MainCat1  |    1    |SubCat1            |
SubCat1   |    0    |SubCat2, SubCat2-1 |
SubCat2   |    0    |                   |
SubCat2-1 |    0    |SubCat3            |
SubCat3   |    0    |                   | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:01:23.190

您可以创建子级别：

```
MainCat1             // sublevel = 0
    SubCat1          // sublevel = 1
        SubCat2      // sublevel = 2
        SubCat2-1    // sublevel = 2
            Subcat3  // sublevel = 3 
```

您可以使用 arraykeys 设置子级别：

```
$menu[0][0] = 'MainCat1';
$menu[1][0] = 'SubCat1';
$menu[2][0] = 'SubCat2';
$menu[2][1] = 'SubCat2-1';
$menu[3][0] = 'Subcat3'; 
```

# delphi - 虚拟 TAPI 设备

> ID：11300309
> 
> 赞同：11
> 
> 时间：2012-07-02T19:56:59.583
> 
> 标签：delphi, virtualization, tapi

我目前正在构建一个严重依赖 TAPI 并允许用户拨打/接听电话的应用程序。我想知道是否有人拥有虚拟 TAPI 设备或某种方式来模拟来电、保持等。

如果重要的话，我会使用 Delphi（标准版）的 hbTAPI 组件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T19:41:26.067

不幸的是，由于 TAPI 的性质，针对模拟器进行开发不会让您走得太远。我知道没有完整的端到端模拟器。

您可以使用 Microsoft 的 H.323 电话服务提供商和网络上的两台或多台计算机，通过一点努力来设置您自己的简单模拟环境。还有几个可用的 TAPI SIP 提供程序（[Terasip](http://www.terasens.com/products/terasip)、[SIPTAPI](http://www.ipcom.at/en/telephony/siptapi/)）可让您针对生产 SIP 服务器进行测试。

我还没有看到任何符合 TAPI 的硬件模拟器。供应商之间的差异太大，无法制作符合 TAPI 的硬件模拟器，从而为您提供真实的行为。

您最好的选择是针对实际硬件进行测试，然后向您的客户提供您将支持的硬件列表。通过购买一些对 Unimodem 5 有良好支持的可靠语音调制解调器，您可以获得相当不错的结果。如果这是您感兴趣的方向，您可以从那里升级到符合 TAPI 的 PBX 设备。

此外，您没有指明您打算定位的 TAPI 版本。TAPI 2.x 需要在 C/C++ 之外访问语言绑定，而 TAPI 3.x 使用 COM 接口，但支持 TAPI 2.x 提供的功能的更有限的子集。它还具有 2.x 中没有的附加功能。从 hbTAPI 的文档中看它是否支持 3.x 并不明显。

并非所有供应商都支持这两种 API，因此这也是一个考虑因素。

# google-app-engine - 如何使用ndb的OR？

> ID：11300310
> 
> 赞同：1
> 
> 时间：2012-07-02T19:57:00.827
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

我有以下代码：

```
employees = Employee.query()
employees = employees.filter(query.OR(Employee.passport_id == passport_id,
  Employee.inn == inn))
employees.order(-Employee.added)
results = employees.fetch(5) 
```

但我收到错误：

```
NameError: global name 'query' is not defined 
```

顺便说一句，如果`passport_id is None`和`Employee.passport_id is None`. 它会找到这样的匹配吗？

更新。通过添加解决了第一个问题

```
from google.appengine.ext.ndb import query 
```

第二个问题仍然存在..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:42:21.053

您应该使用 ndb.OR，因此您不需要导入查询子模块（您永远不必导入它）。

如果 passport_id 是已定义的属性，是的，查询 Employee.passport_id == None 将起作用。（请务必使用“==”运算符，而不是“is”。）

# jquery - Rails 3：如何汇总多个集合选择？

> ID：11300312
> 
> 赞同：0
> 
> 时间：2012-07-02T19:57:08.053
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一个名为“Size”的选择框集合，其值为 10、25、50 等。我可以使用 jquery 添加/删除此字段，例如，页面上可能有 3 种不同的尺寸选择：25、 50 和 10。如果我想在这个页面上总结这些值，得到 85 的总数，我该怎么做呢？

**观众.rb**

```
SIZE = ['5', '10', '25', '50', '75', '100'] 
```

**form.html.erb**

```
<%= f.fields_for :audiences do |audience_form| %>
  <div class="audiencefields">
  <span class="audienceforminsert"></span>  
  <div>
    <%= audience_form.label :number_of_people, "Size" %><br />
    <%= audience_form.collection_select :number_of_people, Audience::SIZE, :to_s, :to_s, :include_blank => true %>
  </div>

  </div>

  <%= audience_form.link_to_remove "Remove this audience", :id => "removelink" %>
  <% end %>

  <p><%= f.link_to_add "Add another audience", :audiences, :id => "addlink" %></p> 
```

**应用程序.js**

```
$("#removelink").hide().filter(":first-child").show();

$('form a.add_nested_fields, form a.remove_nested_fields').live('click', function(){
$("div.audiencefields span.audienceforminsert").each(function(index, element) {
    //index starts with 0
    $(this).text("Audience");});
});

$("span.audienceshowinsert").each(function(index, element) {
    //index starts with 0
    $(this).text("Audience " + (index + 1));
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:14:04.493

找到所有选择框并添加它们的选定值：

```
var combined = 0;
$("select").each(function() {
    combined += parseInt($(this).val());
}); 
```

这是一个示例[jsFiddle](http://jsfiddle.net/styson/DCLzG/)。

# jquery - 从 使用 jquery 标记

> ID：11300313
> 
> 赞同：0
> 
> 时间：2012-07-02T19:57:09.973
> 
> 标签：jquery, text, pagination, overlay, slideshow

我有这个幻灯片，我希望每个图像都有一个标题和描述覆盖图像，并随着图像淡入淡出......

我认为我必须在使用的每个实例上复制 SOL 变量

```
//sol = document.getElementById('slidy').getElementsByTagName('img')
//var sho = document.getElementById('slidya').getElementsByTagName('a'); 
```

但我想看看是否有办法同时调用：'a' 和 'p' 标签而不添加一大堆代码

例如，这就是我希望 HTML 的样子

```
<div id="slidy" class="slidepart fl">
                <img width="100%" src="/img/1.jpg">
                <p>Here is some text...</p>
                <img width="100%" src="/img/2.jpg">
                <p>Here is somemore text...</p>
                <img width="100%" src="/img/3.jpg">
                <p>even more text...</p>
                <img width="100%" src="/img/4.jpg">
                <p>one more time with some text...</p>
                <img width="100%" src="/img/5.jpg">
                <p>Finally, some text...</p>
                   <div class="sl_paginationpart"> 
```

> > > > > > > > > 以下是我现在所拥有的>>>>>>>>>>>>>>>

HTML：

```
<div class="slideContainer">
   <div class="slides">
      <div class="contents" style="width:100%;  margin:0px auto; overflow:hidden;">
         <div id="slidy" class="slidepart fl">
            <img width="100%" src="/img/1.jpg">
            <img width="100%" src="/img/2.jpg">
            <img width="100%" src="/img/3.jpg">
            <img width="100%" src="/img/4.jpg">
            <img width="100%" src="/img/5.jpg">
               <div class="sl_paginationpart">
               <ul id="slidya" class="slpagination">
                  <li><a href="javascript: prevnext(0);" class="prev"></a></li>
                  <li><a href="javascript: thisisit(0)" class="number select">1</a></li>
                  <li><a href="javascript: thisisit(1)" class="number ">2</a></li>
                  <li><a href="javascript: thisisit(2)" class="number ">3</a></li>
                  <li><a href="javascript: thisisit(3)" class="number ">4</a></li>
                  <li><a href="javascript: thisisit(4)" class="number ">5</a></li>
                  <li><a href="javascript: prevnext(1);" class="next"></a></li>
               </ul>             
               </div>
         </div>
      </div>
   </div>
</div> 
```

CSS：

```
/* ------------------------ START Slider FEATURES ---------------------------- */

.fl{ float:left;}

.slidepart{ width:100%; height:320px; overflow:hidden; position:relative;}
.slidepart img{position:absolute; width:100% }
.slidepart p{position:absolute;height: 100%; opacity: .5%;  }
.sl_paginationpart{ background:url(/../img/slide_paginationbg.png) no-repeat left; width:auto; height:15px; display:block; position:absolute; right:0%; top:5%; padding:6px;}

ul.slpagination{ margin:0px; padding:0px; list-style:none; font-family:arial; }
ul.slpagination li{ margin:0px; padding:0px; list-style:none; float:left; }
ul.slpagination li a.prev{background:url(/../img/sl_prev.png) no-repeat; width:14px; height:15px; display:block; margin-top: 2px;}
ul.slpagination li a.next{background:url(/../img/sl_next.png) no-repeat; width:14px; height:15px; display:block; margin-top: 2px; }
ul.slpagination li a.number{background:url(/../img/sl_nobg.png) no-repeat; width:18px; height:18px ; display:block; text-align:center; margin:0px 3px; font-size:12px; font-weight:bold; color:#fff; text-decoration:none; text-indent: -1px; }
ul.slpagination li a.select{background:url(/../img/select_sl.png) no-repeat;color:#fff; }

/* ------------------------ END Slider FEATURES ---------------------------- */ 
```

JAVASCRIPT

```
<script type="text/javascript">
    var slo=null;
    var sola = Array();
    var prev = 0;
    var cur = 1;
    var timi=null

    $(document).ready(function() {
        sol = document.getElementById('slidy').getElementsByTagName('img')
        var sho = document.getElementById('slidya').getElementsByTagName('a');

        for(var i=1;i<sho.length-1;i++)sola.push(sho[i]);

        for(var i=1;i<sol.length;i++)sol[i].style.display = 'none';

        for(var i=1;i<solb.length;i++)solb[i].style.display = 'none';

        timi = window.setInterval('doslide()',3000);
    })
    function doslide()
        {
            $(sol[prev]).fadeOut(500);
            $(sol[cur]).fadeIn(1000);
            sola[prev].className = 'number'
            sola[cur].className = 'number select'

            prev = cur++;
            if(cur>sol.length-1)
            {
                cur=0;
                prev= sol.length-1;
            }
        }
        function prevnext(mode)
        {
            window.clearInterval(timi);timi=null;

            if(mode)
            {
                if(cur>sol.length-1)
                {
                    cur=0;
                    prev= sol.length-1;
                }
                doslide();      
            }
            else
            {
                cur--;
                prev--;

                if(prev<0)
                {
                    cur=0;
                    prev= sol.length-1;
                }
                if(cur<0)
                {
                    cur=sol.length-1;
                    prev=cur-1 ;        
                }

                $(sol[cur]).fadeOut(500);
                $(sol[prev]).fadeIn(500);
                sola[cur].className = 'number'
                sola[prev].className = 'number select' 
            }
            timi = window.setInterval('doslide()',2000)
        }
        function thisisit(aiyo)
        {
            cur = aiyo
            window.clearInterval(timi);timi=null;

            $(sol[cur]).fadeIn(500);
            $(sol[prev]).fadeOut(1000);
            sola[cur].className = 'number select'
            sola[prev].className = 'number'

            prev=cur
            ++cur;
            if(prev<0)prev = sol.length-1;
            timi = window.setInterval('doslide()',2000)     
        }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:32:55.140

简单切换：

sol = document.getElementById('slidy').getElementsByTagName('img')

溶胶 = $(".slide")

然后用类名 .slide 的 div 包装你的图像...然后你可以添加你需要的所有内容

天哪，伙计们（elclanrs、Sam Tyson、Ohgodwhy）谢谢，这是我正在帮助的其他人的脚本，我知道有一个简单的解决方法，但脑子里放了个屁；哦，好吧，下次请对您的评论更好，这是一个帮助论坛而不是专家论坛。

# android - Android：将标题添加到动态列表视图

> ID：11300315
> 
> 赞同：0
> 
> 时间：2012-07-02T19:57:15.433
> 
> 标签：android, listview, listadapter

我对 android 编码还是很陌生，并试图弄清楚。我正在动态创建一个列表视图，如下所示（然后也动态禁用项目） - 您会注意到活动本身没有 xml 文件，仅用于列表项。

我想做的是向页面添加一个静态标题。有人可以向我解释一下如何修改下面的代码，以编程方式将其添加到 java 文件中，在 listView 之前，或者编辑下面的代码，使其以 xml 文件中的 listView 为目标！

帮助将不胜感激！！！

```
public class Start extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      DataBaseHelper myDbHelper = new DataBaseHelper(null);
      myDbHelper = new DataBaseHelper(this);

      try {
     myDbHelper.openDataBase();
  }catch(SQLException sqle){
     throw sqle;
  }

      ArrayList<String> categoryList = new ArrayList<String>();

      Cursor cur = myDbHelper.getAllCategories();
        cur.moveToFirst();
        while (cur.isAfterLast() == false) {

                if (!categoryList.contains(cur.getString(1))) {
                    categoryList.add(cur.getString(1));
                }

                cur.moveToNext();
            }
        cur.close();
        Collections.sort(categoryList);

        setListAdapter(new ArrayAdapter<String>(this, R.layout.listitem, categoryList) {

          @Override
          public View getView(int position, View convertView, ViewGroup parent) {
              View view = super.getView(position, convertView, parent);

              if(Arrays.asList(checkArray3).contains(String.valueOf(position))){
                  view.setEnabled(false);
              } else {
                  view.setEnabled(true);                      
              }

              return view;
          }                 

       });

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        if(v.isEnabled()) {
            String clickedCat = l.getItemAtPosition(position).toString();
            Toast.makeText(this, clickedCat, Toast.LENGTH_SHORT).show();

            finish();
            Intent myIntent = new Intent(getApplicationContext(), Questions.class);
            myIntent.putExtra("passedCategory", clickedCat);
            myIntent.putExtra("startTrigger", "go");
            startActivity(myIntent);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:13:15.950

您需要为显示列表的活动创建一个额外的 XML 文件。它可能看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:scaleType="fitXY"
        android:src="@drawable/view"/>

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/homeLogo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             android:scaleType="fitStart"
            android:src="@drawable/logo" />
    </LinearLayout>

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/linearLayout1"
        android:layout_centerHorizontal="true" 
        android:cacheColorHint="#00000000">
    </ListView>

</RelativeLayout> 
```

您所拥有的是用于显示您的列表视图的活动的 XML 布局，并且您可以在其中添加一个静态标题。我为我正在构建的应用程序做了同样的事情。从那里您在您正在使用的活动中引用此 XML。希望这可以帮助。

# jpa - 无法创建 EntityManager 工厂 bc 需要 JTA tx 管理器

> ID：11300316
> 
> 赞同：0
> 
> 时间：2012-07-02T19:57:24.807
> 
> 标签：jpa, jboss, persistence.xml

我无法建立我的实体管理器工厂，我得到的错误是“选择的事务策略需要访问 JTA 事务管理器”。谁能建议我必须配置什么才能克服这个问题？仅供参考，我使用的是 Jboss 6，没有弹簧。

这是我**的persistance.xml**

```
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="AvengersPU" transaction-type="JTA">
    <jta-data-source>java:/jdbc/thor_ds</jta-data-source>
    <class>avenger.Grouptable</class>
    <class>avenger.MyUser</class>
    <exclude-unlisted-classes>true</exclude-unlisted-classes>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
    </properties>
  </persistence-unit>
</persistence> 
```

这是部分堆栈跟踪...

```
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: AvengersPU] Unable to build EntityManagerFactory
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:915) [:3.6.6.Final]
        at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:57) [:3.6.6.Final]
        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:48) [:1.0.0.Final]
        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:32) [:1.0.0.Final]
        at avenger.Utils.getEntityManager(Utils.java:49) [:]
        at avenger.UserBean.updateUserList(UserBean.java:136) [:]
        at avenger.UserBean.startup(UserBean.java:43) [:]
        ... 68 more
Caused by: org.hibernate.HibernateException: The chosen transaction strategy requires access to the JTA TransactionManager
        at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:390) [:3.6.6.Final]
        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1872) [:3.6.6.Final]
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:906) [:3.6.6.Final]
        ... 74 more 
```

完整的堆栈跟踪在这里： http: [//pastebin.ca/2166417](http://pastebin.ca/2166417)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:44:12.757

Here is an non ideal answer which I will use in the meanwhile.

specify a non jta datasource:

```
<non-jta-data-source>java:/jdbc/thor_ds</non-jta-data-source> 
```

change transaction type from JTA to RESOURCE_LOCAL

```
<persistence-unit name="AvengersPU" transaction-type="RESOURCE_LOCAL"> 
```

Here is a [discussion](http://forum.springsource.org/showthread.php?58527-transaction-type-quot-JTA-quot-quot-RESOURCE_LOCAL-quot) on the subject:

# css - 以未知宽度居中浮动左侧菜单

> ID：11300325
> 
> 赞同：1
> 
> 时间：2012-07-02T19:58:18.120
> 
> 标签：css

我想把我的菜单的ul的李元素放在中心，我尝试了很多方法但还是不行。看看我的css：

```
#menu {
    float: left;
    width: 767px;
    height: 38px;
    margin: 11px 0 0 14px;
    background: url(images/menubg.gif) repeat-x;
    -webkit-border-radius: 0px 0px 7px 7px;
    border-radius: 0px 0px 7px 7px;
    border: 1px solid #efeff1;
}
    #menu ul {
        list-style: none;
        text-align: center;
        padding: 0;
        margin: 0;
        height: 40px;
    }
        #menu ul li {
            float: left;
            color: #767676;
            height: 18px;
            padding: 11px 0px 11px 0px;
            display: inline;
        }
            #menu ul li a {
                font-family: Arial, Helvetica, sans-serif;
                color: inherit;
                font-size: 12px;
                text-decoration: none;
                font-weight: bold;
                display: block;
                padding: 0px 23px 2px 23px;
                border-left: 1px solid #e0e0e2;
            } 
```

我试过 display: inline, text-aling: center，但它不正确。非常感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:15:12.553

我删除了`float`并添加`inline-block`了：

[http://jsfiddle.net/dtTdg/1/](http://jsfiddle.net/dtTdg/1/)

```
#menu ul li {
    display: inline-block; 
```

# asp.net-mvc - 如何通过传递 ControllerName 获取 MVC Controller 的所有操作列表？

> ID：11300327
> 
> 赞同：13
> 
> 时间：2012-07-02T19:58:19.823
> 
> 标签：asp.net-mvc, controller, action

如何获取 Controller 的所有操作的列表？我搜索但找不到示例/答案。我看到一些建议使用反射的示例，但我不知道如何。

这是我正在尝试做的事情：

```
public List<string> ActionNames(string controllerName){

} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-03T06:18:03.810

您还没有告诉我们为什么需要这个，但一种可能性是使用反射：

```
public List<string> ActionNames(string controllerName)
{
    var types =
        from a in AppDomain.CurrentDomain.GetAssemblies()
        from t in a.GetTypes()
        where typeof(IController).IsAssignableFrom(t) &&
                string.Equals(controllerName + "Controller", t.Name, StringComparison.OrdinalIgnoreCase)
        select t;

    var controllerType = types.FirstOrDefault();

    if (controllerType == null)
    {
        return Enumerable.Empty<string>().ToList();
    }
    return new ReflectedControllerDescriptor(controllerType)
        .GetCanonicalActions().Select(x => x.ActionName)
        .ToList();
} 
```

显然，我们知道反射不是很快，所以如果你打算经常调用这个方法，你可以考虑通过缓存控制器列表来改进它，以避免每次都获取它，甚至[记忆](http://en.wikipedia.org/wiki/Memoization)给定输入参数的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-05T21:46:43.203

对达林的回答稍作调整。我需要进行此更改以使其与 code lense 一起使用，因为它在不同的程序集下运行。

```
public static List<string> GetAllActionNames(string controllerName)
{
    var controllerType = Assembly.Load("YourAssemblyNameHere")
        .GetTypes()
        .FirstOrDefault(x => typeof(IController).IsAssignableFrom(x) 
            && x.Name.Equals(controllerName + "Controller", StringComparison.OrdinalIgnoreCase));

    if (controllerType == null)
    {
        return Enumerable.Empty<string>().ToList();
    }
    return new ReflectedControllerDescriptor(controllerType)
        .GetCanonicalActions().Select(x => x.ActionName)
        .ToList();
} 
```

# mysql - MySql 授予用户权限

> ID：11300328
> 
> 赞同：4
> 
> 时间：2012-07-02T19:58:24.190
> 
> 标签：mysql, grant

我想在 MySql 中创建一个新用户。我不希望那个新用户对我现有的数据库做太多事情[我只想授予他选择权限]，但他可以用他创建的新数据库做任何事情。

首先，有没有办法根据数据库所有者授予权限？如果有可能，那么这就是我正在寻找的理想之选。如果没有，那么我如何限制特定用户仅访问 [only Select privilege] 某些特定数据库，允许他对其余数据库做任何他想做的事情？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-02T20:19:20.147

来自 MySQL[授权文档](http://dev.mysql.com/doc/refman/5.7/en/grant.html)：

```
CREATE USER 'jeffrey'@'localhost' IDENTIFIED BY 'mypass';
GRANT SELECT ON *.* TO 'jeffrey'@'localhost';
GRANT ALL ON db1.* TO 'jeffrey'@'localhost'; 
```

第一个命令创建用户。第二个授权选择所有数据库和表。第三个命令授予对 db1 中所有表的所有访问权限。

你还有什么具体要做的吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-13T11:42:14.403

要为特定用户提供权限，您可以使用此框架：

```
GRANT [type of permission] ON [database name].[table name] TO ‘[username]’@'localhost’; 
GRANT ALL PRIVILEGES ON * . * TO 'newuser'@'localhost'; 
```

此命令中的星号（分别）表示他们可以访问的数据库和表——此特定命令允许用户读取、编辑、执行和执行所有数据库和表中的所有任务。

完成要为新用户设置的权限后，请务必重新加载所有权限。

```
 FLUSH PRIVILEGES; 
```

有关权限的更多信息，您可以阅读这篇文章 [https://www.digitalocean.com/community/articles/how-to-create-a-new-user-and-grant-permissions-in-mysql](https://www.digitalocean.com/community/articles/how-to-create-a-new-user-and-grant-permissions-in-mysql)

有关权限列表，请参阅 MySQL 手册页[MySQL 提供的权限](http://dev.mysql.com/doc/refman/5.7/en/privileges-provided.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-24T11:53:49.797

打开 mysql 命令提示符。

要在主机为 localhost 时创建新用户，请使用此命令

```
CREATE user 'test_user'@'localhost' identified by 'some_password'; 
```

对于任何主机使用％，像这样

```
CREATE user 'test_user'@'%' identified by 'some_password'; 
```

创建用户后，您需要授予一些访问权限。为此使用以下命令。

```
GRANT SELECT,INSERT,UPDATE
ON database_name.table_name
TO 'test_user'@'localhost'; 
```

成功执行上述查询后，test_user 可以在 database_name（数据库名称）的 table_name（表名称）中进行选择、插入和更新。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-06-08T14:33:24.680

`grant privilege`在这样的数据库中给出

```
grant privilege on object to user 
```

`object`是任何数据库表或关系，并且`user`可能是向他提供特权的人。

例子

```
grant select,insert,update,on object name to user name

grant select on employee to john with grant option;

revoke delete on employee from john. 
```

# asp.net - 在 ASP.NET 中，尝试查找可能位于不可见容器内的控件的分配可见性值

> ID：11300329
> 
> 赞同：1
> 
> 时间：2012-07-02T19:58:24.233
> 
> 标签：asp.net

我试图找出asp.net页面上的特定控件是否已将其“可见”属性分配为真或假。问题是可见属性爬上父级列表，如果其中任何一个显示为不可见，则查询的控件也将显示为不可见。我需要知道控件本身的设置。

我做了一些搜索并找到了[如何在 Asp.Net 中获取 Visible 属性的设置/真实值的](https://stackoverflow.com/q/2005322/487909)帖子，它提供了以下解决方案

```
public static bool LocalVisible(this Control control){
    var flags = typeof (Control)
        .GetField("flags", BindingFlags.Instance | BindingFlags.NonPublic)
        .GetValue(control);

    return ! (bool) flags.GetType()
        .GetProperty("Item", BindingFlags.Instance | BindingFlags.NonPublic)
        .GetValue(flags, new object[] {0x10});
} 
```

但是当我尝试它时，它在 GetProperty 上返回了一个“发现不明确的匹配”错误。

有人可以指出我做错了什么，或者展示另一种获得我想要的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-11T17:16:37.310

我有同样的问题（两年后）。这是我刚刚在您提到的主题中写的答案：

如果有人试图让 Jørn Schou-Rode 的代码在 VB.NET 中工作，这里是对我有用的代码。当我在 VB 中简单地翻译他的代码时，我得到一个“发现歧义匹配”异常，因为标志“Item”属性有 3 种风格。

```
<Extension()>
Public Function GetLocalVisible(ctl As Control) As Boolean
    Dim flags As Object = GetType(Control).GetField("flags", BindingFlags.Instance Or BindingFlags.NonPublic).GetValue(ctl)
    Dim infos As PropertyInfo() = flags.GetType().GetProperties(BindingFlags.Instance Or BindingFlags.NonPublic)
    For Each info As PropertyInfo In infos
        If info.Name = "Item" AndAlso info.PropertyType.Name = "Boolean" Then
            Return Not CBool(info.GetValue(flags, New Object() {&H10}))
        End If
    Next
    Return ctl.Visible
End Function 
```

# android - 如何实现这一活动流程 - 许多活动通过一个 MainCheckerActivity -> back 或 SettingsActivity？

> ID：11300336
> 
> 赞同：1
> 
> 时间：2012-07-02T19:59:24.757
> 
> 标签：android, workflow, android-activity

我有一个中央**MainCheckerActivity**来检查所有设置是否正常。这个**MainCheckerActivity**被许多活动 A、B、C、.. 调用。

如果**MainCheckerActivity**发现缺少某些设置，它会显示一个对话框并（当前）完成，因此流程返回到调用活动 A、B、C...

然后用户必须从 A、B、C 手动导航到 SettingsActivity ...

**所以基本上现在：**

```
A -> MainCheckerActivity -> shows the dialog -> finishes MainCheckerActivity -> A -> SettingsActivity 
```

**我将如何实现对用户更方便的逻辑流程，如下所示：**

```
A -> MainCheckerActivity -> shows the dialog -> finishes MainCheckerActivity -> SettingsActivity -> A 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:53:04.877

谷歌地图应用程序做类似的事情。如果您忘记打开 GPS 卫星，它会弹出一个对话框，询问类似“您要打开 GPS 卫星和/或 wifi 以提高您的位置的准确性吗？”。工作流程如下：

1.  您启动 Google 地图`MainActivity`（并搜索“我的位置”）。

2.  该应用程序意识到您忘记打开 GPS 卫星和/或 wifi 互联网。将弹出一个对话框，询问您是否要调整设置。选项是“跳过”（否定按钮）和“设置”（肯定按钮）。还有一个“默认情况下执行此操作”...您可能会考虑添加类似的内容，以防您的设置要求开始激怒用户。:)

3.  (a) 如果单击“跳过”，则关闭对话框，您仍处于`MainActivity`.

    (b) 如果单击“设置”，`SettingsActivity`则启动。您对设置进行更改。完成后，单击“返回”，保存更改，然后返回到`MainActivity`.

因此，换句话说，似乎最好的办法是将`MainCheckerActivity`与活动`A`、`B`和合并`C`。取消不必要的活动几乎总能带来更好的用户体验。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:35:30.253

如果您使用 启动 MainCheckerActivity `Intent.FLAG_ACTIVITY_NO_HISTORY`，那么它将不会保留在任务的历史堆栈中。如果 MainCheckerActivity 启动 SettingsActivity，当用户在 SettingsActivity 中单击“返回”时，他将返回到启动 MainCheckerActivity 的活动（即：您描述中的 A、B 或 C）。

# django - 使用 celery 和 django 的硬超时

> ID：11300338
> 
> 赞同：2
> 
> 时间：2012-07-02T19:59:41.157
> 
> 标签：django, celery

基于这个问题：

[超过 Django Celery 时间限制？](https://stackoverflow.com/questions/11037105/django-celery-time-limit-exceeded)

我有一些可能会运行一段时间的任务。但是，大多数任务不应该花费超过几秒钟的时间。我不想设置全局超时来解决那些长时间运行的任务。相反，我希望有一个较短的全局硬时间限制，并手动调整我需要更长超时的任务。

当用@task 装饰任务时，我做了@task(timeout=None)，但是，该任务仍然达到300 秒的超时。我用 task_function.delay(args) 调用了这个任务。

有没有办法调用任务并自定义它的超时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:30:43.063

[此问题](https://github.com/celery/celery/issues/802)解决了您可以调用具有自定义超时的任务的情况。它在[issue802 分支](https://github.com/celery/celery/tree/issue802)中实现，但尚未在 master 中。您可以将其与 master 合并并使用所需的功能。

使用此补丁，您可以在调用任务时传递超时。

> tasks.add.apply_async(args=[1,2], soft_timeout=2, timeout=5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T01:47:15.097

你运行的是什么版本的芹菜？当前[稳定的文档](http://docs.celeryproject.org/en/latest/userguide/tasks.html#task-options)列表`time_limit`作为设置任务超时的正确参数，如果没有提供时间限制，将使用工作人员默认值。要在任务上设置长时间（例如 60 分钟）超时，您可以使用：

```
@task(time_limit=3600)
def mytask():
    ... 
```

或者，您可以在调用任务时使用 apply_async 更改时间限制：

```
mytask.apply_async(time_limit=3600, args=args) 
```

# ruby-on-rails - Rails 表单渲染两次

> ID：11300339
> 
> 赞同：0
> 
> 时间：2012-07-02T19:59:42.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, erb, simple-form

有时，当我提交表单然后返回浏览器时，它会呈现整个表单两次（参见屏幕截图）。不确定是我的视图或控制器代码导致了这种情况，但我似乎无法弄清楚。

谢谢

场合控制器.rb

```
 def create
     @user = current_user
     @occasion = Occasion.new(params[:occasion])
     @occasion.user = User.find(current_user.id)
     if @occasion.save
      redirect_to occasions_path
    else
      render :new
    end
  end 
```

user_steps/occasions.html.erb

```
<%= simple_form_for @user, url: wizard_path do |f| %>
  <div id="single_module">
  <div class="pitch">
   <h2 class="signup">Step 3: Your first Occasion!</h2>
  </div>
  <div id="input1" style="margin-bottom:4px;" class="clonedInput">
    <p>*Just one to get you started, after completion of the sign up process you will have a chance to utilize our occasion wizard to add as many events as you like! (exciting, we know)</p>
    <ul class="testss1">
      <%= f.simple_fields_for :occasions do |occasion_o| %>
        <li><%= occasion_o.input :name, :placeholder => 'Enter occasion Name', :hint => ('Examples: Anniversaries, Birthdays, Graduations, Mothers day, Fathers day, Valentines day, Weddings, Holidays') %></li>
        <li><%= occasion_o.input :pname, :label => 'Persons Name', :placeholder => '(optional)' %></li>
        <li><%= occasion_o.input :dateg, :label => 'Date',:as => :date_picker, :input_html => { :class => 'special' } %></li>
        <li><%=  occasion_o.input :recurring, :as => :radio_buttons, :label => 'Remind me of this event every year?' %></li>
    <h3>Top 3 Interests</h3>

        <li class="tes1"><%= occasion_o.association :interests, :label => false, :as => :check_boxes %></li></ul>
    <%end%>
    </br>
    </div>
      <%= link_to "skip this step", next_wizard_path %>
      <%= f.button :submit, 'Submit' %>
     </br>
     </br>
     </br> 
```

![在此处输入图像描述](../Images/3e9040d0f9562a0f64c5cbc0e10418a8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:05:51.967

看起来您的用户有两个与之相关的场合。我会在您的控制器中使用 puts 语句检查场合的长度并检查您的日志：

```
 def create
     @user = current_user
     puts "The current length of occasions is #{ @user.occasions.length }"
     @occasion = Occasion.new(params[:occasion])
     @occasion.user = User.find(current_user.id)
     if @occasion.save
      redirect_to occasions_path
    else
      render :new
    end
  end 
```

# php - 在 PHP 中通过 localhost 发送电子邮件

> ID：11300342
> 
> 赞同：0
> 
> 时间：2012-07-02T19:59:56.180
> 
> 标签：php, email, smtp

我正在尝试通过 PHP 发送电子邮件。它给出以下警告。

```
Warning: mail() [function.mail]: Failed to connect to mailserver at 
"smtp.ntlworld.com" port 25, verify your "SMTP" and "smtp_port" setting in 
php.ini or use ini_set() in C:\wamp\www\wagafashion\customerside\BulkInquiry.php 
on line 1007 
```

在 php.ini 中，[SMTP](http://www.yuki-onna.co.uk/email/smtpservers.html)已更改如下。

```
[mail function]
; For Win32 only.
SMTP = smtp.ntlworld.com
smtp_port = 25

; For Win32 only.
sendmail_from = tiny1999@gmail.com 
```

配置 php.ini 后，WAMP 重新启动并给出了上述警告。在 PHP 中通过 localhost 发送电子邮件需要进行哪些其他设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-07T15:51:40.253

改用 PHPMailer：[https ://github.com/PHPMailer/PHPMailer](https://github.com/PHPMailer/PHPMailer)

如何使用它：

```
require('./PHPMailer/class.phpmailer.php');
$mail=new PHPMailer();
$mail->CharSet = 'UTF-8';

$body = 'This is the message';

$mail->IsSMTP();
$mail->Host       = 'smtp.gmail.com';

$mail->SMTPSecure = 'tls';
$mail->Port       = 587;
$mail->SMTPDebug  = 1;
$mail->SMTPAuth   = true;

$mail->Username   = 'me.sender@gmail.com';
$mail->Password   = '123!@#';

$mail->SetFrom('me.sender@gmail.com', $name);
$mail->AddReplyTo('no-reply@mycomp.com','no-reply');
$mail->Subject    = 'subject';
$mail->MsgHTML($body);

$mail->AddAddress('abc1@gmail.com', 'title1');
$mail->AddAddress('abc2@gmail.com', 'title2'); /* ... */

$mail->AddAttachment($fileName);
$mail->send(); 
```

# java - 使用php或java解析java？

> ID：11300356
> 
> 赞同：-3
> 
> 时间：2012-07-02T20:01:03.943
> 
> 标签：java, php, parsing

我正在构建一个 Web 应用程序，它在后端需要解析一个 java 文件并将某些值保存在数据库中。这必须由用户触发并按计划设置。

这样做的最佳方法是什么？我应该使用 php 还是 java 来执行此操作？知道如何用两种语言解析文件，但是 java 具有反射，这将使其更容易并减少出错的可能性，但是我现在不知道从前端调用 java 文件，例如单击按钮。

我希望使用的前端技术是 html、css、javascript 和 ajax。我不打算使用 struts 等，因为我不熟悉它们，而且我的时间有限。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:27:54.530

在这种情况下，反射将无济于事，因为您需要解析代码（在这种情况下为 Java）并按照您的方式解释。因此，您需要构建文件的 AST。

AST（抽象语法树）可以使用[Eclipse JDT](http://www.eclipse.org/jdt/)在 Java 中构建。在[Maven 中央](https://search.maven.org/#search%7Cga%7C1%7Cg%3A%22org.eclipse.jdt%22%20AND%20a%3A%22org.eclipse.jdt.core%22)：

```
 <dependency>
        <groupId>org.eclipse.jdt</groupId>
        <artifactId>org.eclipse.jdt.core</artifactId>
        <version>3.12.2</version>
    </dependency> 
```

Eclipse JDT 是一种文档模型，可以类比为 DOM 树，通过 DOM 树，您可以访问 XML 的元素、属性等。AST 具有相同的范围，您可以访问例如类名称或该类的方法，为每个方法提取参数名称和类型，而无需基于该类实例化对象。通过 JDT 可以访问文档或注释等其他人工制品。

**可以应用反射**，以防万一您将类加载到某个类加载器上，即便如此，仍有一些信息，如文档或参数名称，您无法通过反射访问。

一个好的开始是阅读这篇手帖：[http ://www.vogella.com/articles/EclipseJDT/article.html#jdt](http://www.vogella.com/articles/EclipseJDT/article.html#jdt)

可以使用我在此[答案上发布的代码来完成一个简单的开始](https://stackoverflow.com/a/11062733/1001027)

# mongodb - 如何在 Doctrine MongoDB ODM 中删除多个文档

> ID：11300362
> 
> 赞同：7
> 
> 时间：2012-07-02T20:01:17.563
> 
> 标签：mongodb, doctrine-odm

如何删除学说 mongodb odm 中的多个文档？在 PHP 类中，我应该能够使用以下代码来做到这一点：

```
 $db->collection->remove(array("age" => 18)); 
```

我怎样才能在学说mongo odm中做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-02T23:48:03.560

你有两个选择。使用 DocumentManager，您可以请求给定类的集合。这实际上将返回一个`Doctrine\MongoDB\Collection`实例，该实例包装了基础`MongoCollection`以支持日志记录和事件。如果您真的需要，底层证券`MongoCollection`也可用：

```
$collection = $dm->getDocumentCollection('Documents\User');
$collection->remove(array('age' => 18));

// Use the raw MongoCollection to bypass logging and events
$mongoCollection = $collection->getMongoCollection();
$mongoCollection->remove(array('age' => 18)); 
```

或者，您可以使用[查询构建器 API](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/query-builder-api.html)：

```
$qb = $dm->createQueryBuilder('Documents\User');
$qb->remove()
    ->field('age')->equals(18)
    ->getQuery()
    ->execute(); 
```

如果你停在`getQuery()`，你可以使用`debug()`返回的查询对象上的方法来查看 Doctrine 将对数据库执行什么。

# image-processing - 存在噪声背景下的图像分割

> ID：11300364
> 
> 赞同：0
> 
> 时间：2012-07-02T20:01:25.727
> 
> 标签：image-processing, contour, image-segmentation

附件是图像，其中绿色附近的亮白色轮廓是感兴趣的轮廓。绿色的是近似自动初始化。在自动初始化轮廓附近的区域几乎不存在梯度。因此，活动轮廓和其他基于梯度的方法一动不动就失败了。

沿着初始化轮廓的法线，我搜索了最大强度（并且还合理地关闭了初始化轮廓）。删除异常值并对检测到的曲线进行平滑处理，最终检测到平滑曲线。但这有一些问题。如果有人可以提出不同的建议，那将非常有用。

![在此处输入图像描述](../Images/e26acc8fc4e51b9c7c4a75cb30d7f54a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:43:59.600

> 在自动初始化轮廓附近的区域几乎不存在梯度。因此，活动轮廓和其他基于梯度的方法一动不动就失败了。

在活动轮廓上使用[梯度矢量流](http://ww.vavlab.ee.boun.edu.tr/courses/574/materialx/Active%20Contours/xu_GVF.pdf)* 外力功能。它使用扩散过程来扩展高梯度像素的影响。使用正确的参数，它肯定会在显示的初始曲线上工作。

*如果此链接失效，请搜索 Chenyang Xu 和 Jerry L. Prince 的*蛇、形状和梯度矢量流* 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:53:47.783

这已经是一个不错的成绩了。在这个混乱中找到一个初始轮廓是解决方案的 80%！

您现在可以尝试通过拉直这个初始轮廓，即在（曲线横坐标，距离）坐标中工作，以便初始轮廓的图变成一条线段，而真正的轮廓是一条准直线。

在这些未扭曲的坐标中，重新采样后，您可以使用霍夫变换（可能分段以允许一些变形）。

无论如何，您的问题陈述中缺少一些东西：您在寻找什么？

# php - mktime 强制日期到 1969 年 12 月

> ID：11300367
> 
> 赞同：1
> 
> 时间：2012-07-02T20:01:36.383
> 
> 标签：php, date, mktime

我对 mktime 函数有一个有趣的问题。我之前查看了此处提供的解决方案，但似乎都没有得到解决或帮助（strotime 不会改变我看到的结果）。

我有一份月度报告，我试图为我的用户尽可能地防错，所以我只要求一个月和一年。我将在代码中提供报告的最佳日期。

我的表单有一个月份的下拉选项，月份的值是两位整数（01、02 等）。年份为四位数字，由用户手动填写。

直到 2038 年，一切都很好……我知道，我知道，这还有很长的路要走，但是这个项目应该有 20 年的范围，所以在过去的两年里，我遇到了问题。

这是我从表格中接收信息的方式：

```
$month = filter_var($_POST["month"], FILTER_SANITIZE_NUMBER_INT);
$year = filter_var($_POST["year"], FILTER_SANITIZE_NUMBER_INT); 
```

然后，我使用 mktime 将月份和年份与我的日期（27 日）结合起来： $timeStamp = mktime(0,0,0,$month,27,$year);

然后我将它分配给 MySQL 喜欢的日期形式的变量： $reportdate = date('Ymj',$timeStamp);

我已经回显了 $month 和 $year 的结果，并且它们的显示是正确的，但是当我回显 $reportdate 时，它​​总是显示 1969 年 12 月 31 日。

```
03
2038
1969-12-31 
```

我选择哪个月份并不重要。2037 年 12 月的报告完美无缺，除此之外的任何事情都失败了。

这是可以修复的，还是我只能说这就是饼干崩溃的方式......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T20:03:17.853

这是因为您的时间戳溢出，并且是由[2038 年问题](http://en.wikipedia.org/wiki/Year_2038_problem)引起的。

基本上，整数表示为带符号的 32 位数字，其最大值可以为 2147483648。因此，在 UNIX 时间戳中，这是一个以秒为单位的一定数量，大约为 68 年。

事实上，谷歌告诉我：

```
(2^31) * seconds = 68.0511039 years 
```

因此，UNIX 时间戳是自 UNIX 纪元 1970 年 1 月 1 日 00:00:00 UTC 以来的时间，这意味着可以在 32 位 UNIX 时间戳中表示的最大日期的年份为：

```
1970 + ~68 = ~2038. 
```

如果您需要支持这些日期，请使用[`DateTime`](http://php.net/datetime)该类，因为它没有这样的限制，如下所示：

```
$date = new DateTime( "now", new DateTimeZone( 'America/New_York'));
$date->setDate( $year, $month, 27);
// $date->setTime( 0, 0, 0);
echo $date->format('Y-m-j'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:12:15.623

如上所述，您遇到了 2038 问题[`mktime`](http://php.net/manual/en/function.mktime.php)。

幸运的是，它是可以修复的：不要使用 mktime。只是`$reportdate`以另一种方式建立你的价值，不使用`mktime`. 如：

```
 $reportdate = $year."-".$month."-27"; 
```

# php - 在 Drupal 中创建了一个新字段，尝试将其分配给多种内容类型

> ID：11300368
> 
> 赞同：0
> 
> 时间：2012-07-02T20:01:40.057
> 
> 标签：php, drupal, drupal-7

我在 Drupal 中创建了一个名为“field_vote”的字段，它在我创建它的位置自动分配给称为工具包的内容类型。

我也想把它分配给资源，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:15:30.500

1 前往`admin/structure/types/manage/[YOUR_CONTENT_TYPE]/fields`

2 在 下`Add existing field`，选择您要添加的现有字段。（`field_vote`在你的情况下）

3 点击`Save`自定义您的字段设置，您就完成了。

希望这行得通……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:07:13.760

编辑您的“资源”内容类型，然后单击“管理字段”。然后，您可以将现有字段添加到该内容类型。我假设这是 Drupal 7，因为您没有指定。

# iphone - 如何使用索引通过其标题的单元格导航到 UITableView 位置

> ID：11300369
> 
> 赞同：-1
> 
> 时间：2012-07-02T20:01:45.740
> 
> 标签：iphone, uitableview, indexing

我正在使用一个 UITableView，其中包含大约 200 个包含标题、副标题和缩略图的单元格。我想要一种选择方法，就像在 Apple 的联系人应用程序中一样，您可以从字母表中选择一个字符。

我正在绘制选择界面（A、B、C 等），并通过它的委托检索相应的索引和标题（即：A = 1、B = 2、C = 3 ETC。）。

现在我想导航到第一个单元格，其中单元格标题的第一个字符以选定的索引字符开头。就像联系人应用程序一样。

有人可以给我一个如何实现这种功能的方向。

```
- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index 
```

我通过以下方式填写了我的 sectionIndex

```
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {

    if(searching)
        return nil;

    NSMutableArray *tempArray = [[NSMutableArray alloc] init];
    [tempArray addObject:@"A"];
    [tempArray addObject:@"B"];
    [tempArray addObject:@"C"];
    [tempArray addObject:@"D"];
    [tempArray addObject:@"E"];
    [tempArray addObject:@"F"];
    [tempArray addObject:@"G"];
    [tempArray addObject:@"H"];
    [tempArray addObject:@"I"];
    [tempArray addObject:@"J"];
    [tempArray addObject:@"K"];
    [tempArray addObject:@"L"];
    [tempArray addObject:@"M"];
    [tempArray addObject:@"N"];
    [tempArray addObject:@"O"];
    [tempArray addObject:@"P"];
    [tempArray addObject:@"Q"];
    [tempArray addObject:@"R"];
    [tempArray addObject:@"S"];
    [tempArray addObject:@"T"];
    [tempArray addObject:@"U"];
    [tempArray addObject:@"V"];
    [tempArray addObject:@"W"];
    [tempArray addObject:@"X"];
    [tempArray addObject:@"Y"];
    [tempArray addObject:@"Z"];

    return tempArray;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:14:38.450

试试这个：-

```
#pragma mark -
#pragma mark UITableView data source and delegate methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [contactArr count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    /*
     If the requesting table view is the search display controller's table view, return the count of the filtered list, otherwise return the count of the main list.
     */
        return [[[contactArr objectAtIndex:section]objectForKey:@"name"] count];

}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 44.0f;
}

#pragma mark -

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
        return [[contactArr objectAtIndex:section]objectForKey:@"char"];

}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView 
{

    NSMutableArray *tempArray = [[NSMutableArray alloc] init];
    [tempArray addObject:@"A"];
    [tempArray addObject:@"B"];
    [tempArray addObject:@"C"];
    [tempArray addObject:@"D"];
    [tempArray addObject:@"E"];
    [tempArray addObject:@"F"];
    [tempArray addObject:@"G"];
    [tempArray addObject:@"H"];
    [tempArray addObject:@"I"];
    [tempArray addObject:@"J"];
    [tempArray addObject:@"K"];
    [tempArray addObject:@"L"];
    [tempArray addObject:@"M"];
    [tempArray addObject:@"N"];
    [tempArray addObject:@"O"];
    [tempArray addObject:@"P"];
    [tempArray addObject:@"Q"];
    [tempArray addObject:@"R"];
    [tempArray addObject:@"S"];
    [tempArray addObject:@"T"];
    [tempArray addObject:@"U"];
    [tempArray addObject:@"V"];
    [tempArray addObject:@"W"];
    [tempArray addObject:@"X"];
    [tempArray addObject:@"Y"];
    [tempArray addObject:@"Z"];

    return tempArray;
//    return [[NSArray arrayWithObject:UITableViewIndexSearch] arrayByAddingObjectsFromArray:
//            tempArray];

}

- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index
{
//  if (title == UITableViewIndexSearch) {
//            [tableView scrollRectToVisible:self.searchDisplayController.searchBar.frame animated:NO];
//            return -1;
//        } else {
            return [[UILocalizedIndexedCollation currentCollation] sectionForSectionIndexTitleAtIndex:index];

} 
```

# css - 水平子菜单灵活宽度

> ID：11300372
> 
> 赞同：0
> 
> 时间：2012-07-02T20:01:51.313
> 
> 标签：css, list, position, submenu, horizontallist

我有一个水平导航，我想要一个水平子导航脱落。问题是我有子导航显示内联，而它有一个绝对位置。我知道当你有一个绝对位置时使用内联显示会有问题。它可以在固定显示器上按我想要的方式工作，但我不希望它被固定......有谁知道这个的替代方案？此外，我不能只在子导航上设置宽度，因为每个子菜单的宽度都会不同。

```
<style>
     ul li {
        float: left;
        position: relative;
    }

    #primary-nav ul li ul {
        position: relative;
        top: 42px;
        display: none;
        width:100%;

    }
    #primary-nav ul li ul li {
        list-style:none outside none;
        margin-left:20px;
        float:left;
        z-index: 1000;
    }
    #primary-nav ul li:hover ul {
        display:inline;
        position:absolute;
    }
</style>

<ul class="menu">
    <li>menu Item</li>
    <li>drop down</li>
        <ul class="submenu">
            <li>dropdown Item</li>
            <li>dropdown Item</li>
        </ul>
 </ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:30:19.680

这是解决方案的修补程序-> [http://tinkerbin.com/NlqcJcL7](http://tinkerbin.com/NlqcJcL7)

通过应用`white-space: nowrap`绝对定位的 .submenu，您可以确保它的子内联块不会折叠到下一行。

# php - 如何在 PHP 中使我的字体更大？

> ID：11300380
> 
> 赞同：0
> 
> 时间：2012-07-02T20:02:45.680
> 
> 标签：php, fonts, size

我有一个获取一些 XML 数据的 PHP 文件，但显示的字体太小。我发现我可以增加它，但只能增加到 7 号。有没有办法制作 90pt。代替字体？

这是我所拥有的最大尺寸为 7 的东西：

```
 <font face="helvetica, arial" color="white" size="7">

 <?php 
     $mydata = simplexml_load_file('http://192.168.xx.xxx:yyyy/data.xml');

     echo '<p align="right">'.round($mydata->device[14]->value).'</p>';
     ?>

 </font> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:04:14.313

尺寸=“90pt”

阅读级联样式表以供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:04:38.580

我找到了。我需要在段落标签中添加以下内容：

```
 style="font-size: 90pt;" 
```

# android - alertdialog 中禁用的列表项不显示为灰色项

> ID：11300381
> 
> 赞同：2
> 
> 时间：2012-07-02T20:02:52.217
> 
> 标签：android, android-layout, android-listview, android-alertdialog, android-dialog

这是我的场景。

我有一个活动，我必须在其中显示一个对话框（这是一个带有两个选项 OptionA 和 OptionB 的列表视图）。我使用的列表视图处于单选模式。但有时选项 A 被禁用（不允许用户选择选项 A）

这些是我的代码片段

```
private void createDialog() {
    boolean disableOptionA = false;
    ...
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle(getString(R.string.codec_title));

    ListView modeList = new ListView(this);
    final ArrayAdapter<CharSequence> modeAdapter = CustomMenuAdapter.createFromResource(this, R.array.codec_decoder,
            android.R.layout.simple_list_item_single_choice, disableOptionA);
    modeList.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    modeList.setAdapter(modeAdapter);
    builder.setView(modeList);
    final Dialog dialog = builder.create();
...
} 
```

codec_decoder 数组包含两个选项 OptionA 和 OptionB。CustomMenuAdapter 的代码如下。

```
public class CustomMenuAdapter extends ArrayAdapter<CharSequence> {

    boolean disableOptionA = true;

    private CustomMenuAdapter(Context context, int textViewResId, CharSequence[] strings, boolean disableOptionA) {
        super(context, textViewResId, strings);
        this.disableOptionA = disableOptionA;
    }

    public static CustomMenuAdapter createFromResource(Context context, int textArrayResId, int textViewResId,
            boolean disableOptionA) {

        Resources resources = context.getResources();
        CharSequence[] strings = resources.getTextArray(textArrayResId);

        return new CustomMenuAdapter(context, textViewResId, strings, disableOptionA);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = super.getView(position, convertView, parent);
        view.setEnabled(isEnabled(position));
        return view;
    }

    @Override
    public boolean areAllItemsEnabled() {
        return false;
    }

    @Override
    public boolean isEnabled(int position) {
        if (position == 0) {
            if (disableOptionA) {
                return false;
            }
        }
        return true;
    }
} 
```

现在一切正常，但是当 OptionA 被禁用时，它的行为被禁用但看起来像它被启用，它不会**变灰**。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-17T11:09:19.567

您需要做的就是替换以下代码：

```
 @Override
    public boolean isEnabled(int position) {
    if (position == 0) {
        if (disableOptionA) {
            return false;
        }
     }
    return true;
   } 
```

如果我想在位置 1 禁用我的项目：

```
 @Override
     public boolean isEnabled(int position) {

    if (position == 1)
        return true;

    return false;
   } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-10-17T09:35:58.993

@Override public boolean isEnabled(int position) {

```
if (position == 1)
    return true; 
```

# python - 如何查找字符串中单词的计数？

> ID：11300383
> 
> 赞同：16
> 
> 时间：2012-07-02T20:02:55.673
> 
> 标签：python

我有一个字符串“ `Hello I am going to I with hello am`”。我想找出一个单词在字符串中出现了多少次。示例 hello 出现 2 次。我尝试了这种只打印字符的方法-

```
def countWord(input_string):
    d = {}
    for word in input_string:
        try:
            d[word] += 1
        except:
            d[word] = 1

    for k in d.keys():
        print "%s: %d" % (k, d[k])
print countWord("Hello I am going to I with Hello am") 
```

我想学习如何找到字数。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-02T20:05:03.927

如果要查找单个单词的计数，只需使用`count`：

```
input_string.count("Hello") 
```

使用`collections.Counter`and`split()`来计算所有单词：

```
from collections import Counter

words = input_string.split()
wordCount = Counter(words) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-02T20:05:06.327

[`Counter`from collections](http://docs.python.org/library/collections.html#counter-objects)是你的朋友：

```
>>> from collections import Counter
>>> counts = Counter(sentence.lower().split()) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-02T20:05:02.520

```
from collections import *
import re

Counter(re.findall(r"[\w']+", text.lower())) 
```

using`re.findall`比 更加通用`split`，因为否则您无法考虑诸如“don't”和“I'll”等缩略词。

演示（使用您的示例）：

```
>>> countWords("Hello I am going to I with hello am")
Counter({'i': 2, 'am': 2, 'hello': 2, 'to': 1, 'going': 1, 'with': 1}) 
```

如果您希望进行许多这样的查询，这只会做一次 O(N) 工作，而不是 O(N*#queries) 工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-11T23:40:15.700

单词出现次数的向量称为[bag-of-words](https://en.wikipedia.org/wiki/Bag-of-words_model)。

Scikit-learn 提供了一个很好的模块来计算它，[`sklearn.feature_extraction.text.CountVectorizer`](http://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html). 例子：

```
import numpy as np
from sklearn.feature_extraction.text import CountVectorizer

vectorizer = CountVectorizer(analyzer = "word",   \
                             tokenizer = None,    \
                             preprocessor = None, \
                             stop_words = None,   \
                             min_df = 0,          \
                             max_features = 50) 

text = ["Hello I am going to I with hello am"]

# Count
train_data_features = vectorizer.fit_transform(text)
vocab = vectorizer.get_feature_names()

# Sum up the counts of each vocabulary word
dist = np.sum(train_data_features.toarray(), axis=0)

# For each, print the vocabulary word and the number of times it 
# appears in the training set
for tag, count in zip(vocab, dist):
    print count, tag 
```

输出：

```
2 am
1 going
2 hello
1 to
1 with 
```

部分代码取自本[Kaggle 关于 bag-of-words 的教程](https://www.kaggle.com/c/word2vec-nlp-tutorial/details/part-1-for-beginners-bag-of-words)。

仅供参考：[如何使用 sklearn 的 CountVectorizerand() 来获取包含任何标点符号作为单独标记的 ngram？](https://stackoverflow.com/a/32128803/395857)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-02T20:05:19.713

这是另一种不区分大小写的方法

```
sum(1 for w in s.lower().split() if w == 'Hello'.lower())
2 
```

它通过将字符串和目标转换为小写来匹配。

ps：也解决了下面@DSM指出的`"am ham".count("am") == 2`问题:)`str.count()`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-02T20:14:35.970

考虑`Hello`和`hello`作为相同的词，无论它们的情况如何：

```
>>> from collections import Counter
>>> strs="Hello I am going to I with hello am"
>>> Counter(map(str.lower,strs.split()))
Counter({'i': 2, 'am': 2, 'hello': 2, 'to': 1, 'going': 1, 'with': 1}) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-23T10:02:52.910

You can divide the string into elements and calculate their number

`count = len(my_string.split())`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-09T20:06:11.033

您可以使用 Python 正则表达式库`re`来查找子字符串中的所有匹配项并返回数组。

```
import re

input_string = "Hello I am going to I with Hello am"

print(len(re.findall('hello', input_string.lower()))) 
```

**印刷：**

```
2 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-01T19:45:55.527

```
def countSub(pat,string):
    result = 0
    for i in range(len(string)-len(pat)+1):
          for j in range(len(pat)):
              if string[i+j] != pat[j]:
                 break
          else:   
                 result+=1
    return result 
```

# database-design - 数据仓库应该成为主数据存储库吗？

> ID：11300388
> 
> 赞同：1
> 
> 时间：2012-07-02T20:03:17.483
> 
> 标签：database-design, data-warehouse

通常，数据仓库是一种整合多个源系统的方法，通常用于报告目的。但是在任何情况下，将数据仓库本身用作主数据库（即捕获和管理数据，而不是从另一个系统加载）是个好主意吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T20:16:54.300

简短的回答——**不，我不这么认为**。您应该首先为生产数据库设计一个好的、规范化的数据库结构——然后再考虑数据仓库部分。

将仓库和生产数据库分开被认为是“最佳业务实践”，也许最重要的是它是一个设计考虑因素。数据仓库和生产数据库有两种不同的用途。生产数据库最重要的功能可能是可靠、一致和明确地捕获事务。这在设计数据库和选择软件（即数据库引擎）时都很重要。

它的设计部分不应该被低估——我想说，在大多数项目中，一个好的数据库设计是一个人应该做的第一件事。获得正确的表结构比选择技术更重要。

如果您打算增长，尝试将数据稍微隔离到不同的数据库中也可能很有意义 - 两者都是因为它可以更容易地稍后拆分数据库并在不同的硬件上运行不同的部分（当您点击“流血边缘”，购买更多服务器比购买更强大的服务器便宜得多）并且因为您以后可能想要拆分软件模块或彼此独立地重复使用它们。您不希望以同样的方式拆分数据仓库。

因此，回顾一下，从生产数据库开始，稍后再构建数据仓库——这通常可以推迟到您感到有合并来自不同来源的数据或在生产数据库中添加冗余以实现更快报告的冲动之前。

* * *

*我在一家在线赌博公司工作了 8 年。我参与了生产数据库的设计，后来我负责构建数据仓库——所以上面的评论是基于一些犯过的错误和学习到的经验。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:25:56.780

@tobixen 的精彩回顾。关于 Datawarehouse 最佳实践的另一件事是您不修改数据，通常会附加数据（因此保留历史记录）。

大多数数据仓库技术都面向这种模式。因此，在数据仓库上使用典型的 OLTP 系统或主数据系统将无法正常工作。

一般流程是

OLTP 数据库 -> 数据仓库 > 归档。

OLTP 数据库可能会将数据保留 1 个月到 13 个月。Datawarehouse 将保留数据最多 5 /10 年（不是所有细节，可能是总结的），然后进行归档。

据说 Hadoop / Hive 等大数据技术使存储大量数据（比如 10 年）和以具有成本效益的方式处理它们变得更加容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T15:32:02.587

我不得不说**一般不是**，但是......我们被要求构建一个 DWH，它的源系统之一是一个收集 Twitter 数据的“OLTP”系统。在这种情况下，我认为 Twitter 收集“OLTP”系统只保留 1 周的数据，并且每天将其传递给 DWH 进行存储，然后我们每天将摘要信息反馈给 Twitter OLTP 系统。在这种情况下，我们将成为 Twitter 数据的主要数据存储库……老实说，这对我们来说是第一次。

我不同意@Sathish Senathi 我认为“Datawarehouse 将保留数据最多 5 /10 年（不是所有细节，可能是总结）”的说法。我永远不会汇总进入 DWH 的数据，总是保留最低粒度的事务数据，但显然不是 OLTP 系统中的所有属性。

我承认没有从事过拥有大量数据的在线赌博工作，但我曾在拥有数 TB DWH 的电信和保险业工作过。我们始终存储电话或保费/索赔交易本身的详细信息。

# android - 在底部有一个带有滚动视图和持久按钮的对话框

> ID：11300395
> 
> 赞同：0
> 
> 时间：2012-07-02T20:03:36.227
> 
> 标签：android, android-dialog

我在为对话框创建布局时遇到问题我想显示一个带有滚动视图的对话框，但按钮始终显示在底部，但是当滚动视图变得太大时，它会将底部的按钮推离屏幕。

如果我将父级底部的按钮对齐到 true，我可以获得所需的效果，但是如果滚动视图中的内容很少，则会出现一个带有很多空白空间的大对话框。

这是我目前拥有的

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

    <ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

        <TextView
            android:id="@+id/staCalCompany"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="20dp"
            android:layout_marginLeft="15dp"
            android:layout_marginTop="30dp"
            android:text="Company Name"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#ff2525"
            android:textSize="25sp" />

        <LinearLayout
            android:id="@+id/linearLayout1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/staCalStart"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="15dp"
                android:text="Start:"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#ff2525" />

            <TextView
                android:id="@+id/staCalStartDisp"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:text="Start Time"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/linearLayout2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="20dp" >

            <TextView
                android:id="@+id/staCalEnd"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="15dp"
                android:text="End:"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#ff2525" />

            <TextView
                android:id="@+id/staCalEndDisp"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:text="End Time"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </LinearLayout>

        <TextView
            android:id="@+id/staCalSubDisp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dp"
            android:layout_marginLeft="15dp"
            android:text="Name"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#ff2525" />

        <TextView
            android:id="@+id/staCalDesc"
            android:layout_width="285dp"
            android:layout_height="wrap_content"
            android:layout_marginBottom="20dp"
            android:layout_marginLeft="15dp"
            android:text="Description"
            android:textAppearance="?android:attr/textAppearanceMedium" />
        </LinearLayout>
        </ScrollView>

<RelativeLayout
            android:id="@+id/linearLayout3"
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:layout_gravity="bottom|center_horizontal" 
            android:gravity="center_horizontal" 
            android:layout_below="@+id/scrollView1">

            <ImageButton
                android:id="@+id/calIconSync"
                android:layout_width="60dp"
                android:layout_height="60dp"
                android:layout_marginLeft="20dp"
                android:background="@drawable/calendar_plus" />

            <ImageButton
                android:id="@+id/btnStaCalClose"
                android:layout_width="60dp"
                android:layout_height="60dp"
                android:layout_alignParentRight="true"
                android:layout_marginRight="20dp"
                android:background="@drawable/closepopup" />
        </RelativeLayout> 
```

试图让它在横向和纵向模式下都能正确显示，但是当一个工作时另一个不工作。

关于如何去做这件事的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:10:42.267

在这些情况下，我只是在下面创建一些其他不可见的虚拟按钮，并以这样的方式对齐它们，以使我的“真实”按钮正确定位。

如果虚拟按钮被推离屏幕没问题，那么真正的按钮就在它们上面。如果屏幕上的东西很少，则虚拟按钮位于底部，而“真实”按钮位于中间某处。

根据需要制作宽度=“1dp”和高度的“不可见”按钮。但让它们在 Android 意义上可见

编辑：您可以创建一个相对视图，将其底部与列表视图的底部对齐并给它一个 maxHeight。在此相对视图下方对齐您的按钮。当列表视图很小时，您的按钮将位于它的正下方，如果您的列表视图很长，则相对视图超过 maxHeight 并确保它仍在屏幕上，因此您的按钮将位于 maxHeight 的正下方。确保 relativeView 的 maxHeight 在屏幕底部为按钮留出足够的空间。

要调整 maxHeight 以便为任何屏幕尺寸上的按钮留出足够的空间，您可以使用它来获取设备的屏幕尺寸并根据 screenHeight 调整 maxHight：

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int screenHheight = size.y; 
```

希望对您的情况也有帮助...

# probability - 不同投资组合的另一个方差和期望

> ID：11300403
> 
> 赞同：1
> 
> 时间：2012-07-02T20:04:14.680
> 
> 标签：probability, portfolio, variance, expectations

A 和 B 是两个相互竞争的公司。投资者决定是否购买

(a) 100股A股，或

(b) 100 股 B 股，或

(c) 50 股 A 股和 50 股 B 股。

1 股 A 的利润是一个随机变量 X，分布为 P(X = 2) = P(X =-2) = 0.5。1 股 B 的利润是一个随机变量 Y，分布为 P(Y =4) = 0.2，P(Y = -1) = 0.8。

如果 X 和 Y 是独立的，计算策略 (a)、(b) 和 (c) 的总利润的期望值和方差。

--- 对于 A 和 BI 的 E(X)，得到： EA(X) =(2)(.5) + (-2)(.5) = 0。EB(X) =(4)(.2 ) + (-1)(.8) = 0。

获得方差：EA(X^2)= (2^2)(.5) + (-2^2)(.5) = 0。EB(X^2)= (4^2)(.2) + (-1^2)(.8) = 3.2 + .8 = 4

VarA(X) = EA(x^2) - EA(X)^2 = 0 - 0^2 = 0 VarB(X) = EB(x^2) - EB(X)^2 = 4 - 0^2 = 4

a) 100 股 * X 利润 = 100X = A

E(A) = E(100x) = 100E(x) = 100 * 0 = 0 Var(A) = 100^2*Var(X) = 10,000 * 1 = 0

b) 100 股 * X 利润 = 100X = B

E(B) = E(100x) = 100E(x) = 100 * 0 = 0 Var(B) = 100^2*Var(X) = 10,000 * 4 = 40,000

c) 50 股 * X 利润 + 50 股 * X 利润 = 50X + 50Y = Z

E(Z) = EA(50x) + EB(50X)= 50EA(X) + 50EB(X)= 50*0 + 50* 0 = 0 Var(Z) = 50^2*VarA(X) + 50^ 2*VarB(X) =2500*0 + 2500 * 4 = 10,000

我不知道我的答案是对还是错，但我真的很怀疑自己。任何人都可以确认或纠正我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:19:02.347

好吧，你有几件事是对的，也有几件事是错的。
您对均值和方差的基​​本计算是正确的。
此外，您对离散分布中随机变量概率的理解。

但是，您不能这样说，`E(100X) = 100E(X)`或者说`V(100X) = 100^2V(X)`
每只交易的股票都是一个单独的随机变量！
实际上，表示 100X 实际上是在将随机变量的“概率”乘以一个常数，这是完全不同的东西，`V(100X) = 100^2V(X)`实际上是正确的！但这不是这里的情况。

如果我们要交易 A 的两股股票并想计算均值和方差，我们必须将其写为`E(X + Y) = E(X) + E(Y)`在这种情况下 X = Y。
方差也是如此：`V(X + Y) = V(X) + V(Y)`

在您的示例中，V(B) 不是 40000，而是实际上是 400。

我建议你看看耶鲁大学的这个页面：[随机变量的均值和方差](http://www.stat.yale.edu/Courses/1997-98/101/rvmnvar.htm)
另外，看看这个抛出 2 个骰子的例子（这会让你直观地看到每一股交易的骰子被抛出）：[掷出两个骰子 - 均值和方差](http://www.futureaccountant.com/theory-of-expectation-random-variable/problems-solutions/throwing-rolling-dice-02.php)

一切顺利！

# php - 生成 10 位随机确认字符串 php

> ID：11300407
> 
> 赞同：1
> 
> 时间：2012-07-02T20:04:22.387
> 
> 标签：php

我正在尝试为在我的网站上创建的每个用户帐户创建一个“确认代码”，并将其与他们的个人信息一起存储在数据库中。正如您在下面的示例中所看到的，我尝试生成一个包含时间变量的随机字符串，但是，该字符串不必要地长。

我希望字符串比生成的字符串短，`md5`我想知道是否有一种相对简单的方法可以生成冲突率极低的 10 位（最大）字母数字字符串？

我尝试了什么：

```
 md5(mt_rand(10000,99999).time() . 'example@domain.com'); 
```

输出：

```
0dd6854dba19e70cfda0ab91595e0376 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T20:14:29.397

PHP 提供了[`openssl_random_pseudo_bytes`](http://www.php.net/manual/en/function.openssl-random-pseudo-bytes.php)可以安全地做你想做的事情的功能。

执行以下操作：

```
bin2hex(openssl_random_pseudo_bytes(5)) 
```

例如，上面会给你一些类似的东西`e9d196aa14`。

或者，只取现有 MD5 字符串的前 10 个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:07:44.907

[http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

+

[http://br.php.net/manual/en/function.substr.php](http://br.php.net/manual/en/function.substr.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T02:42:14.007

这将为您生成任何随机输出字符串`Aa-Zz`和`0-9`字符。

```
function genString($length) {
    $lowercase = "qwertyuiopasdfghjklzxcvbnm";
    $uppercase = "ASDFGHJKLZXCVBNMQWERTYUIOP";
    $numbers = "1234567890";
    $specialcharacters = "{}[];:,./<>?_+~!@#";
    $randomCode = "";
    mt_srand(crc32(microtime()));
    $max = strlen($lowercase) - 1;
    for ($x = 0; $x < abs($length/3); $x++) {
        $randomCode .= $lowercase{mt_rand(0, $max)};
    }
    $max = strlen($uppercase) - 1;
    for ($x = 0; $x < abs($length/3); $x++) {
        $randomCode .= $uppercase{mt_rand(0, $max)};
    }
    $max = strlen($specialcharacters) - 1;
    for ($x = 0; $x < abs($length/3); $x++) {
        $randomCode .= $specialcharacters{mt_rand(0, $max)};
    }
    $max = strlen($numbers) - 1;
    for ($x = 0; $x < abs($length/3); $x++) {
        $randomCode .= $numbers{mt_rand(0, $max)};
    }
    return str_shuffle($randomCode);
} 
```

用法

```
$str = genString(10); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-22T13:59:27.990

我认为最好的方法是

```
$random = substr(number_format(time() * rand(),0,'',''),0,10); // you can increase the digits by changing 10 to desired digit 
```

请检查一下

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-02T20:09:52.883

尝试使用[http://php.net/manual/en/function.str-split.php](http://php.net/manual/en/function.str-split.php)

# c# - Win XP（x86）操作系统上的二级属性绑定异常，但不是 Win 7（x64）

> ID：11300414
> 
> 赞同：4
> 
> 时间：2012-07-02T20:04:44.890
> 
> 标签：c#, .net, winforms, data-binding

我难住了。我的 c# AddressForm 上有以下行

`lkuCounty.DataBindings.Add("EditValue", Address, "County.CountyID", true);`

这在 64 位 Win7 机器上效果很好，但在 Win XP 32 位机器上我得到以下异常：

```
Type:        System.ArgumentException    
Message:     Cannot bind to the property or column CountyID on the DataSource.    
Parameter name: dataMember 
```

我猜我错过了一些细微差别，非常感谢一些帮助。

这是我的类（没有构造函数），它们位于一个单独的项目（*myproject.Common*）中

```
public class County 
{ 
    public short? CountyID { get; set; } 

    public string CountyName { get; set; } 
}
public class Address 
{ 
    public int AddressID { get; set; } 

    public string AddressLine1 { get; set; } 

    public string AddressLine2 { get; set; } 

    public string AddressLine3 { get; set; } 

    public string City { get; set; } 

    public string Zip { get; set; }

    public County County { get; set; } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:17:28.283

检查拼写，例如大写/小写

# android - 将正方形投影到 2D 平面 (OpenGL ES2)

> ID：11300416
> 
> 赞同：0
> 
> 时间：2012-07-02T20:04:48.870
> 
> 标签：android, graphics, matrix, opengl-es-2.0

我正在为android创建一个coverflow视图，但是在处理视图上的点击时遇到了一点障碍。我无法确定点击下方的方块。为了确定点击了哪个方格，将点击事件中的（X，Y）数据转换为opengl视图空间。将它放在正方形上时会出现问题：转置、旋转和比较都可以在 java 中完成，但这似乎是一种巨大的浪费，因为所有这些操作都是在渲染视图时完成的。

所以，我的问题是：**如何在 opengl 渲染过程中提取 2d 视图映射对象坐标？**

我的大脑有点扭曲，试图弄清楚opengl的模型和投影矩阵中的实际内容，但我似乎找不到任何关于矩阵中数字实际*含义*的规范。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:12:25.253

您可以使用`gluUnProject()`and`gluProject()`在对象和窗口空间之间进行转换，并为自己节省一些数学。文档在[这里](http://www.opengl.org/sdk/docs/man/xhtml/gluUnProject.xml)和[这里](http://www.opengl.org/sdk/docs/man/xhtml/gluProject.xml)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:26:11.613

还有另一种技术涉及渲染一帧，其中场景中的所有图元都以不同的颜色渲染。然后就可以在触摸事件下测试像素颜色了。您可以使用这种技术来玩一些技巧，例如缩小视口，使其仅是触摸周围的一小块区域，并将其渲染为纹理，以便用户永远看不到它。

# sql - SQL Server 数据透视？将列名设置为一行中的值的某种方法

> ID：11300428
> 
> 赞同：4
> 
> 时间：2012-07-02T20:05:49.353
> 
> 标签：sql, dynamic, row, pivot

我正在构建一个由多个跟踪器组成的系统，这些跟踪器将使用许多相同的列，因此当用户插入跟踪器时，有一个用于跟踪器的表、跟踪器列，然后是哪些列与哪个跟踪器一起使用的交叉引用row 不同的列值存储在共享相同记录 id 的多行中，并存储特定列的值和名称。

我需要找到一种方法来动态地将值的列名更改为存储在同一行中的列名。

IE

```
id | value | name
------------------
23 | red   | color
23 | fast  | speed 
```

需要看起来像这样。

```
id | color | speed
------------------
23 | red   | fast 
```

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-18T15:27:17.093

您可以使用[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 有两种方法，一种是对列的值进行硬编码的静态透视，另一种是在运行时确定列的动态透视。

**静态数据透视**（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/aeec6/1)）

```
select *
from 
(
  select id, value, name
  from test
) x
pivot
(
  min(value)
  for name in ([color], [speed])
) p 
```

**Dynamic Pivot**（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/a7ffa/1)）

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(name) 
                    from test
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
      = 'SELECT id,' + @cols + ' from 
         (
            SELECT id, value, name
            FROM test
         ) x
         pivot 
         (
            min(value)
            for name in (' + @cols + ')
         ) p '

execute(@query) 
```

两个查询将产生相同的结果。不同之处在于，首先您必须对要成为列的所有值进行编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:13:58.253

这是不可能的。SQL Server 中的列名*始终是静态的。*您可以生成动态 SQL。

# c# - 从 XML 随机分配给类属性

> ID：11300429
> 
> 赞同：1
> 
> 时间：2012-07-02T20:05:49.837
> 
> 标签：c#

我有一个 XML 文件，我从中解析一些内容以显示在列表中：

### 班级：

```
public class SampleClass 
{
    public string Sample {get; set;}    
    public string Definite {get; set;}
    public string Random {get; set;}
} 
```

### XML 文件示例：

```
<Question>
    <Sample>This is sample 1</Sample>
    <Definite>Answer 1</Definite>
</Question>

<Question>
    <Sample>This is sample 2</Sample>
    <Definite>Answer 2</Definite>
</Question>
... 
```

目前，我正在轻松解析列表中的内容并制作此列表。

```
_list = xmlDoc.Descendants("Question")
              .Select(
                  q => new SampleClass 
                  { 
                      Sample = q.Element("Sample").Value, 
                      Definite = q.Element("Definite").Value
                  })
              .ToList(); 
```

但是，在列表中，我想包含另一个要从 XML 文件中以随机顺序解析的元素，例如：

```
SampleClass list   Sample        Definite   Random 
                      ^              ^        ^ 
List element 1: This is sample 1, Answer 1, Answer5
List element 2: This is sample 2, Answer 2, Answer1
List element 3: This is sample 3, Answer 3, Answer4 ... 
```

我想问一下如何`Random`在解析时将这个元素包含在列表中，以便从节点中`q.Random`随机分配一个？`<Definite> Value </Definite>``Question`

列表中的随机副本是不可接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:14:38.140

做2遍。第一次通过可以与您已经拥有的相同。第二遍将为列表中的每个项目分配一个随机答案。

这不是我的想法，所以请原谅任何错误，但它看起来像下面这样：

```
IList<string> randomAnswers = _list
    .Select(c => c.Definite)
    .OrderBy(c => Guid.NewGuid())
    .ToList();

for (int index = 0; index < randomAnswers.Length; index++)
{
    _list[index].Random = randomAnswers[index];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:14:03.917

这应该是您正在寻找的：

```
var rnd = new Random(); //make this a static field, if needed
var questions = xmlDoc.Descendants("Question").ToList();
_list = _questions.Select(q => new SampleClass
{
    Sample = q.Element("Sample").Value,
    Definite = q.Element("Definite").Value,
    Random = questions[rnd.Next(questions.Count)].Element("Definite").Value
}).ToList(); 
```

（来自[访问列表中的随机项](https://stackoverflow.com/questions/2019417/access-random-item-in-list)）

请注意，这将允许重复的随机答案，例如答案 1 可能是 2 和 3 的随机答案，并且不会阻止答案本身成为随机答案。如果这些是问题，您将需要使用不同的解决方案（也许对此有所不同）。

# objective-c - iPad UIActionSheet 大小问题

> ID：11300433
> 
> 赞同：1
> 
> 时间：2012-07-02T20:06:15.367
> 
> 标签：objective-c, ipad, uidatepicker, uiactionsheet

我已经搜索并找不到我的问题的答案。

我`UIDatePicker`在输入 a 时使用以下代码弹出 a `UITextField`。它在 iPhone 上完美运行。

```
mySheet = [[UIActionSheet alloc] initWithTitle:nil delegate:nil cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];
[mySheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

CGRect pickerFrame = CGRectMake(0, 44, 0, 0);

UIDatePicker *datePicker = [[UIDatePicker alloc] initWithFrame:pickerFrame];
[datePicker setDatePickerMode:UIDatePickerModeTime];

if (whatPressed == 1) {
    [datePicker setDate:startDate];
}
else
{
    [datePicker setDate:endDate];
}

[mySheet addSubview:datePicker];

UIToolbar *controlToolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, mySheet.bounds.size.width, 44)];
[controlToolBar setBarStyle:UIBarStyleBlack];
[controlToolBar sizeToFit];

UIBarButtonItem *spacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
UIBarButtonItem *setButton = [[UIBarButtonItem alloc] initWithTitle:@"Set" style:UIBarButtonItemStyleDone target:self action:@selector(dismissDate)];
UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(cancelDate)];

[controlToolBar setItems:[NSArray arrayWithObjects:spacer, cancelButton, setButton, nil] animated:NO];
[mySheet addSubview:controlToolBar];

[mySheet showInView:self.view];

[mySheet setBounds:CGRectMake(0, 0, 320, 485)]; 
```

我现在正在尝试对 iPad 版本使用相同的代码，并且视图出现了，但它还不够高。我尝试更改`CGRect`值，但它们似乎没有任何效果。

该视图似乎是 iPhone 的宽度，高度约为 1 厘米。使困惑。

帮助表示赞赏。

# php - Symfony 2 中的自定义全局配置值

> ID：11300438
> 
> 赞同：0
> 
> 时间：2012-07-02T20:06:38.813
> 
> 标签：php, symfony

我知道为我的自定义服务使用自定义配置值，但是如果我有希望在任何地方使用的全局配置值怎么办？定义可以节省我的时间，但我确信 DI 容器有一个更优雅的方法。

我需要一些全局键，那么，如何在 Symfony 2 中定义它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:51:02.997

在parameters.ini中定义它们，然后就可以了`$container->getParameter('blah');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:56:22.530

我认为您正在寻找[容器](http://symfony.com/doc/current/components/dependency_injection/definitions.html#getting-and-setting-container-parameters)。[此页面](http://symfony.com/doc/current/book/service_container.html)显示如何定义服务，但您可以对参数执行相同的操作。

# c++ - 标准布局 c++

> ID：11300439
> 
> 赞同：18
> 
> 时间：2012-07-02T20:06:45.077
> 
> 标签：c++, c++11, standard-layout

我正在阅读有关[C++ POD、Trivial 和标准布局类](https://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special)的精彩文章 我对标准布局还没有清楚了解的一个属性如下：-

```
 A standard layout has no base classes of the same type as the first 
    non-static data member 
```

因此以下将不是标准布局，因为它的第一个成员与基类相同

```
struct NonStandardLayout3 : StandardLayout1 {
    StandardLayout1 x; // first member cannot be of the same type as base
}; 
```

但是在性能方面和属性方面，上述结构有何不同？

```
struct StandardLayout5 : StandardLayout1 {
    int x;
    StandardLayout1 y; // can have members of base type if they're not the first   
}; 
```

这是对上面那个的更正。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-02T20:19:35.677

原因是标准布局类型有效地要求“空基类优化”，其中没有数据成员的基类不占用空间，并且与派生类的第一个数据成员（如果有）具有相同的地址。

但是，当基类与第一个数据成员具有相同类型时尝试这样做违反了 C++ 内存模型，该模型要求相同类型的不同对象必须具有不同的地址。

来自 ISO/IEC 14882:2011 1.8 [intro.object]/6：

> 如果一个对象是另一个的子对象，或者如果至少一个是大小为零的基类子对象并且它们属于不同类型，则两个不是位域的对象可能具有相同的地址；否则，它们将具有不同的地址

有效地强制空基类，9.2 [class.mem] /20：

> 指向标准布局结构对象的指针，使用 a 进行适当转换`reinterpret_cast`，指向其初始成员（或者如果该成员是位字段，则指向它所在的单元），反之亦然。

如果没有此限制，以下类型 (`Type1`和`Type2`) 不可能是布局兼容的（尽管它们将是标准布局类）。

```
struct S1 {};
struct S2 {};

struct Type1 : S1 {
    S1 s;
    int k;
};

struct Type2 : S1 {
    S2 s;
    int m;
}; 
```

# grails - Grails 1.3.7 插件编译错误

> ID：11300442
> 
> 赞同：0
> 
> 时间：2012-07-02T20:06:54.190
> 
> 标签：grails, groovy, sts-springsourcetoolsuite

我在 Grails 1.3.7 项目中遇到插件依赖编译问题。

该项目使用了许多插件，包括 Spring Security 核心。

在 STS 2.9.2 中从 2.0.4（编译器 1.8）项目切换回此 1.3.7 项目（编译器 1.7）时，该项目现在无法编译并出现以下错误：

**`The declared package "grails.plugins.springsecurity" does not match the expected package "plugins.springsecurity"`**

我已经尝试过通常的清理/重新导入周期，并且还尝试过更改类路径以同时使用

```
.link_to_grails_plugins/spring-security-core-1.21/src/java (include all) 
```

和

```
.link_to_grails_plugins/spring-security-core-1.21/src/java/grails 
```

但无济于事！

有没有人遇到过这个/得到任何指示？

提前致谢，

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:21:35.757

尝试从 STS 内部运行 Grails Tools -> Refresh Dependencies。

另外，尝试从命令行运行 grails compile。如果这可行，但不是前者，那么 STS 中的项目存在一些问题。

# ios - iOS 如何使用 touchesMoved 移动两个图像？

> ID：11300444
> 
> 赞同：1
> 
> 时间：2012-07-02T20:07:01.897
> 
> 标签：ios, ios5, ios4, xcode4.3

我有两个不同`UIImage`的s。我想允许用户`UIView`单独移动这些图像。我怎么能那样做？

```
IBOutlet UIImageView *image01;
IBOutlet UIImageView *image02;

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:touch.view];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:59:28.290

我不确定我是否理解这个问题。您可以使用标准平移手势识别器，每个手势识别器一个`UIImageView`，例如：

```
UIPanGestureRecognizer *pan1 = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanImage:)];
image01.userInteractionEnabled = YES;
[self.image01 addGestureRecognizer:pan1];

UIPanGestureRecognizer *pan2 = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanImage:)];
image02.userInteractionEnabled = YES;
[self.image02 addGestureRecognizer:pan2]; 
```

和

```
- (void)handlePanImage:(UIPanGestureRecognizer *)sender
{
    static CGPoint originalCenter;

    if (sender.state == UIGestureRecognizerStateBegan)
    {
        originalCenter = sender.view.center;
        sender.view.alpha = 0.8;
        [sender.view.superview bringSubviewToFront:sender.view];
    }
    else if (sender.state == UIGestureRecognizerStateChanged)
    {
        CGPoint translation = [sender translationInView:self.view];

        sender.view.center = CGPointMake(originalCenter.x + translation.x, originalCenter.y + translation.y);
    }
    else if (sender.state == UIGestureRecognizerStateEnded || sender.state == UIGestureRecognizerStateCancelled || sender.state == UIGestureRecognizerStateFailed)
    {
        // do whatever post dragging you want, e.g.
        // snap the piece into place

        [UIView animateWithDuration:0.2 animations:^{
            CGPoint center = sender.view.center;
            center.x = round(center.x / 50.0) * 50.0;
            center.y = round(center.y / 50.0) * 50.0;
            sender.view.center = center;
            sender.view.alpha  = 1.0;
        }];
    }
} 
```

或者您可以在他们的超级视图上创建一个手势识别器，然后使用`CGRectContainsPoint`来查看您的开始`locationInView`是否在您的两个 UIImageViews 之一的框架内，然后继续为适当的一个设置动画。

例如，在您的视图控制器中，您可以创建一个手势识别器：

```
UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanSuper:)];
[self.view addGestureRecognizer:pan]; 
```

处理程序可能看起来像（如果需要，您也可以将其实现为自定义手势识别器）：

```
- (void)handlePanSuper:(UIPanGestureRecognizer *)sender
{
    static UIImageView *viewToMove;
    static CGPoint      originalCenter;

    if (sender.state == UIGestureRecognizerStateBegan)
    {
        CGPoint location = [sender locationInView:self.view];

        if (CGRectContainsPoint(self.image01.frame, location))
        {
            viewToMove = image01;
            originalCenter = viewToMove.center;
        } 
        else if (CGRectContainsPoint(self.image02.frame, location))
        {
            viewToMove = image02;
            originalCenter = viewToMove.center;
        }
        else
        {
            viewToMove = nil;
        }

        if (viewToMove)
        {
            viewToMove.alpha = 0.8;
            [viewToMove.superview bringSubviewToFront:viewToMove];
        }
    }
    else if (sender.state == UIGestureRecognizerStateChanged && viewToMove != nil)
    {
        CGPoint translation = [sender translationInView:self.view];

        viewToMove.center = CGPointMake(originalCenter.x + translation.x, originalCenter.y + translation.y);
    }
    else if ((sender.state == UIGestureRecognizerStateEnded || 
              sender.state == UIGestureRecognizerStateFailed || 
              sender.state == UIGestureRecognizerStateCancelled) && viewToMove != nil)
    {
        // do whatever post dragging you want, e.g.
        // snap the piece into place

        [UIView animateWithDuration:0.2 animations:^{
            CGPoint center = viewToMove.center;
            center.x = round(center.x / 50.0) * 50.0;
            center.y = round(center.y / 50.0) * 50.0;
            viewToMove.center = center;
            viewToMove.alpha  = 1.0;
        }];

        viewToMove = nil;
    }
} 
```

如果我误解了你的问题，请告诉我。

# css - 有没有特定的方法可以在 play 框架中引用外部 CSS 样式表？

> ID：11300446
> 
> 赞同：0
> 
> 时间：2012-07-02T20:07:09.470
> 
> 标签：css, playframework

我知道 Javascript 有一种特殊的方式。我正在使用的 CSS 是：

```
<link rel="stylesheet" href='@routes.Assets.at("stylesheets/stack.css")' /> 
```

我尝试使用 src 替代，它仍然没有工作。我使用 HTML 头部的样式进行了测试，效果很好，但是一旦我将它移到外部，它就不再起作用了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T20:15:26.670

您需要在“href=”中包含 @ 符号

```
<link rel="stylesheet" media="screen" href='@routes.Assets.at("stylesheets/stack.css")' /> 
```

此外，请确保您的 .css 文件位于 /public/stylesheets/ 目录中，以便 Play 可以引用它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T20:27:41.960

我真的不明白你的问题。但是你忘了'@'这个字符吗？

```
<link rel="stylesheet" href='@routes.Assets.at("stylesheets/stack.css")' /> 
```

# mobile-safari - 在 Mobile Safari 中按住按钮？

> ID：11300455
> 
> 赞同：2
> 
> 时间：2012-07-02T20:07:26.797
> 
> 标签：mobile-safari

我已将 Javascript 事件侦听器附加到键盘按钮，以便在桌面上，当我按住左箭头键时，javascript 值会根据键盘的重复率而变化。我可以在 Mobile Safari 中创建任何类似的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:36:29.847

不确定您想在这里实现什么，但由于在浏览移动 safari 时通常不涉及键盘左箭头键，因此您可以做的最好的事情可能是监听代表左箭头键的特定元素上的触摸事件. [一些关于这里的Apple文档](http://developer.apple.com/library/IOS/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)

例如，您可以`setInterval`在收到事件时启动计时器`touchstart`，并在事件发生后停止它：http `touchend`: [//jsfiddle.net/ZWtFK/](http://jsfiddle.net/ZWtFK/)

# erlang - 从 Erlang 中的 RSA 私钥生成 x509 公钥

> ID：11300456
> 
> 赞同：4
> 
> 时间：2012-07-02T20:07:29.333
> 
> 标签：erlang, rsa, x509

我在 Erlang 中创建一个应用程序，给定一个 RSA 私钥，它可以返回 RSA 公钥和与该私钥关联的 x509 公钥。

我知道我可以通过从私钥获取模数和公共指数来​​生成 RSA 公钥。

```
--from OTP-PUB-KEY.hrl
-record('RSAPrivateKey',{
version, modulus, publicExponent, privateExponent, prime1, prime2, exponent1, exponent2,     coefficient, otherPrimeInfos = asn1_NOVALUE}).

-record('RSAPublicKey',{
modulus, publicExponent}). 
```

但是如何生成 x509 公钥？

我知道这是可能的，因为我用 perl 编写的旧代码曾经通过调用类似这样的方法来做到这一点：

```
$private = Crypt::OpenSSL::RSA->new_private_key( $hash_ref->{'private'} );
{rsa  => $private->get_public_key_string(),
 x509 => $private->get_public_key_x509_string()}; 
```

有谁知道该怎么做？

----- 只是一个更新 ----

在花了一些时间学习 x509 并阅读 Erlang public_key 文档后，我找到了一个解决方案：

鉴于我可以通过简单地获取模数和 publicExponent 从“RSAPrivateKey”生成“RSAPublicKey”，我生成这两个密钥的代码如下所示：

```
getPublicKeysFromPrivateKey(#'RSAPrivateKey'{modulus = M, publicExponent = PE}) ->
    RSAPub = #'RSAPublicKey'{modulus = M, publicExponent = PE},

    %% Encoding the keys
    RSAPublicKey = public_key:pem_encode([public_key:pem_entry_encode('RSAPublicKey', RSAPub)]),
    X509PublicKey = public_key:pem_encode([public_key:pem_entry_encode('SubjectPublicKeyInfo', RSAPub)]),

    [{rsa, RSAPublicKey},{x509, X509PublicKey}]. 
```

这将产生：

```
[{rsa,<<"-----BEGIN RSA PUBLIC KEY----- \nMIGJAoGBAMU8ZcQ4S+gHDuZd6cEdqbf9l1Hw4fxQrJ455B2kJRUwyKidVbCH2omy\nI0SLNu92"...>>},
 {x509,<<"-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDFPGXEOEvoBw7mXenBHam3/ZdR\n8OH8UKye"...>>}] 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:10:04.870

显而易见的事情是：

```
public_key(#'RSAPrivateKey'{modulus = Mod, publicExponent = Exp}) ->
    #'RSAPublicKey'{modulus = Mod, publicExponent = Exp}. 
```

这似乎产生了一个有效的记录：

```
public_key(public_key:pem_entry_decode(hd(public_key:pem_decode(element(2, file:read_file("<OTP Src Dir>/lib/public_key/test/public_key_SUITE_data/server_key.pem")))))). 
```

# css - 在屏幕右侧设置文本

> ID：11300461
> 
> 赞同：-5
> 
> 时间：2012-07-02T20:07:54.670
> 
> 标签：css, html, positioning

下面是我的屏幕的样子

```
*********************************************************
*                      Welcome to Mysite                *
*          ______________________________________       *
*                    Welcome user, logout.              *
*               Mon, 02-Jul-2012 22:59:07 AST           *
*          ______________________________________       *
*                                                       *
*                                                       *
*                                                       *
*                                                       * 
```

我的代码是

```
<html>
    <body>
        <center>
            Welcome to Mysite<br />
            <hr width="40%" /><br />
            Welcome user, logout</br>
            Mon, 02-Jul-2012 22:59:07 AST<br />
            <hr width="40%" /><br />
    </center>
    </body>
</html> 
```

我想要的是下面的东西。

```
*********************************************************
*                      Welcome to Mysite                *
*          ______________________________________       *
*                           Welcome user, logout.       *
*                   Mon, 02-Jul-2012 22:59:07 AST       *
*          ______________________________________       *
*                                                       *
*                                                       *
*                                                       *
*                                                       * 
```

这意味着将一切设置正确。我相信这可以使用 CSS 来完成，但我不知道如何设置位置。

## ***注意***：文本不应位于屏幕右侧。它应该**直到**水平线的右侧。

知道如何完成这项工作吗？

* * *

## 更新 1

我不想要像下面这样的输出。

```
*********************************************************
*                      Welcome to Mysite                *
*          ______________________________________       *
*                                  Welcome user, logout.*
*                          Mon, 02-Jul-2012 22:59:07 AST*
*          ______________________________________       *
*                                                       *
*                                                       *
*                                                       *
*                                                       * 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T20:11:21.490

将其放置在`<div>`具有适当边距和/或填充的 a 中并添加到 CSS 中：`text-align: right`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T20:15:53.510

给你：[**jsFiddle**](http://jsfiddle.net/e6sSg/)

您只需将内容放在 a 中`<div>`并添加以下 CSS 即可。

```
.container {
    width:40%;
    text-align:right;
} 
```

# android - Android 错误：裁剪意图适用于某些设备

> ID：11300464
> 
> 赞同：1
> 
> 时间：2012-07-02T20:08:31.803
> 
> 标签：android, android-intent, android-file

Android 错误：裁剪意图适用于某些文件管理器。

以下代码：

启动从文件夹/文件裁剪图像的意图。

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

        //intent.putExtra(MediaStore.EXTRA_OUTPUT, MediaStore.Images.Media.EXTERNAL_CONTENT_URI.toString());
        intent.putExtra("crop", "true");
        intent.putExtra("return-data", true);

        startActivityForResult(intent, 0); 
```

2 个版本的代码在不同的设备上以不同的方式崩溃，相同的 Android 版本。

第一个版本：

```
try 
    {
        bitmap = MediaStore.Images.Media.getBitmap(this.getContentResolver(), targetUri);

        }catch (FileNotFoundException e){e.printStackTrace();} 
        catch (IOException e){e.printStackTrace();} 
```

第二版（适用于其他设备）

```
bitmap = (Bitmap) data.getExtras().get("data"); 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:29:09.953

它`com.android.camera.action.CROP`是内部 API 的一部分，因此不能保证所有 Android 设备都支持它。

如果您希望所有设备都支持它，您将必须实现自己的裁剪活动。如果某些设备不支持`Intent`. **请不要忘记这样做！**:)

顺便说一句，如果我没记错的话，三星 Galaxy 实现了自己的媒体/画廊应用程序，这就是它无法识别 Intent 的原因。

# uml - 用 0 或 6 个元素建模 UML 关联

> ID：11300472
> 
> 赞同：0
> 
> 时间：2012-07-02T20:09:14.180
> 
> 标签：uml, magic-draw

我想在 UML 中对两个类之间的关联进行建模，即“A 类的对象可以有 B 类的 0 个对象或 B 类的 6 个对象”。我不想要 0 到 6 个元素，我想要 0 或 6 个，介于两者之间。

我该如何建模？0 到 6 是“0..6”，但是是 0 还是 6？我必须使用 OCL 约束吗？

我正在使用魔术抽奖。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:16:50.697

您可以用逗号表示多个分组，即`1..3, 5..6`从 1 到 6 的列表中保留 4，所以我不明白为什么您不能使用不同的数字来做到这一点，即`0, 6`

# sql - 根据最高绝对值选择不同的行

> ID：11300473
> 
> 赞同：1
> 
> 时间：2012-07-02T20:09:15.153
> 
> 标签：sql, ms-access

我是一个包含下表的 MSAccess 数据库

表 A

#

Column1 Column2 金额
======= ======= ======
Value1 Total+ 100
Value1 Total- -50
Value2 Total- -233
Value2 Total+ +5

我想编写一个查询，它将为我提供最高绝对金额的不同行

预期结果
Column1 Column2 金额
======= ======= ======
Value1 Total+ 100
Value2 Total- -233

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:27:44.737

可以使用以下查询检索此结果集。

```
Column1 max_abs_value
Value1            100
Value2            233

SELECT
    Column1,
    Max(Abs(Amount)) AS max_abs_value
FROM Table_A
GROUP BY Column1; 
```

然后，如果您想查看这些相同行的`Column2`和的值`Amount`，您可以创建一个查询，将第一个用作子查询并加入到`Table_A`.

```
SELECT
    a.Column1,
    a.Column2,
    a.Amount
FROM
    Table_A AS a
    INNER JOIN (
        SELECT
            Column1,
            Max(Abs(Amount)) AS max_abs_value
        FROM Table_A
        GROUP BY Column1
    ) AS sub
    ON a.Column1 = sub.Column1
WHERE
    Abs(Amount)=sub.max_abs_value; 
```

# php - Zend Framework SQL 查询更新不起作用

> ID：11300474
> 
> 赞同：1
> 
> 时间：2012-07-02T20:09:24.950
> 
> 标签：php, sql, zend-framework

我有这个查询，根据我在这里和文档中找到的示例，这应该可以工作，但是脚本说不......需要数组而不是字符串。我必须做类似的事情吗

```
$db = $this->db = Zend_Registry::getinstance()->dbAdapter;
$db->select()->from('offer_term')->where('term_id = '.$entry[$i]);
$db->update('status = 0'); 
```

上面我得到一个错误，它没有接受一个字符串，它需要是一个数组。

在下面我的整个脚本中断了。所以，我对 Zend 有点陌生，有人愿意详细说明我做错了什么吗？

```
$db = $this->db = Zend_Registry::getinstance()->dbAdapter;
$db->select()->from('offer_term')->where('term_id = ?',array($entry[$i]));
$db->update('status = ?', array('0')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:16:32.123

请查看`update()` [此处](http://framework.zend.com/manual/en/zend.db.adapter.html#zend.db.adapter.write.update)的 Zend Framework 文档。

该方法的签名是：

```
$db->update($table, $data, $where); 
```

这意味着您必须让适配器知道您正在更新哪个表，以及该表中的哪些行。

您可能应该将代码重写为：

```
$db->update(
    'offer_term', 
    array('status' => 0), 
    array('term_id = ?' => $entry[$i])
); 
```

这将转化为：

```
UPDATE offer_term
SET status = 0
WHERE term_id = <myEntry> 
```

# objective-c - Objective-C：按类别计算对象的有效方法

> ID：11300479
> 
> 赞同：2
> 
> 时间：2012-07-02T20:09:48.710
> 
> 标签：objective-c, algorithm, dictionary

我在一组类别中有一堆对象。我想知道每个类别有多少。

在另一种语言中，我会制作一个字典，然后遍历对象，为每个对象增加字典中的适当值。但是，因为我不能在 Objective-C 中的 NSDictionary 中存储本机数字类型，这让我不断地在 NSNumber 和数字类型之间来回转换：

```
NSMutableDictionary *dictionary = [[NSMutableDictionary alloc] init];
for (MyObject *obj in objs) {  
    NSNumber *old = [dictionary objectForKey:obj.category];
    NSNumber *new = [NSNumber numberWithInteger:1 + old.integerValue];
    [dictionary setObject:new forKey:obj.category];
} 
```

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T20:37:47.230

你正在寻找[`NSCountedSet`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCountedSet_Class/Reference/Reference.html).

```
NSCountedSet *bag = [[NSCountedSet alloc] init];
for (MyObject *obj in objs) {  
    [bag addObject:obj.category];
}
for (id category in bag) {
    NSLog(@"%d instances of %@", [bag countForObject:category], category);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:27:59.537

您可以使用 NSMutableData 来存储您的计数器：

```
int                 * count;
NSMutableData       * num;
NSMutableDictionary * dictionary;

dictionary = [[NSMutableDictionary alloc] init];

for (MyObject *obj in objs)
{
    if ((count = [[dictionary objectForKey:obj.category] mutableBytes]) == nil)
    {
        num    = [NSMutableData dataWithCapacity:sizeof(int)];
        count  = [num mutableBytes];
        *count = 0;
        [dictionary setObject:num forKey:obj.category];
    };
    *count += 1;
}; 
```

这可以防止字典被修改，并且`NSNumber`每次更新类别的计数时都不会分配新的字典

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T20:32:03.473

如果它确实是一个瓶颈，你可以使用底层的 CFDictionaryRef 而不是 NSMutableDictionary，来创建一个直接存储整数的字典，而不是将它们装箱到 NSNumber 值中。

阅读有关 CFDictionaryCreateMutable 和 CFDictionaryValueCallBacks 的文档以了解详细信息，但基本思想是您的保留和释放什么都不做，您的描述会即时生成一个 NSNumber（或者只是执行 stringWithFormat:"%d"），并且您的 equal 比较整数直接地。

这是一个显示代码中棘手部分的示例：

```
#import <CoreFoundation/CoreFoundation.h>
#import <Foundation/Foundation.h>

CFStringRef intdesc(const void *value) {
  int i = (int)value;
  CFNumberRef n = CFNumberCreate(NULL, kCFNumberIntType, &i);
  CFStringRef s = CFCopyDescription(n);
  CFRelease(n);
  return s;
}

Boolean inteq(const void *value1, const void *value2) {
  int i1 = (int)value1, i2 = (int)value2;
  return i1 == i2;
}

int main(int argc, char *argv[]) {
  CFDictionaryValueCallBacks cb = { 0, NULL, NULL, &intdesc, &inteq };

  CFMutableDictionaryRef d = 
    CFDictionaryCreateMutable(NULL,
              0,
              &kCFTypeDictionaryKeyCallBacks,
              &cb);
  CFDictionarySetValue(d, @"Key1", (void *)1);
  CFDictionarySetValue(d, @"Key2", (void *)2);
  CFStringRef s = CFCopyDescription(d);
  NSLog(@"%@", s);
  CFRelease(s);
  CFRelease(d);
  return 0;
} 
```

如果你要做很多这样的事情，你应该把它包在 ObjC 中（特别是如果你使用 ARC），但这留给读者作为练习。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T20:34:53.093

如果这被证明是一个很大的浪费时间，你可以：

*   创建所有唯一类别的数组
*   使用它的计数来创建一个 C 风格的 int 类型数组
*   匹配每个传入对象的类别，得到一个数组偏移量，并递增对应的int桶
*   （根据需要优化类别查找，如果这成为新的瓶颈）

但我当然同意评论者所说的，基本上，首先测量。

# jquery - div标签的高度

> ID：11300485
> 
> 赞同：0
> 
> 时间：2012-07-02T20:09:56.753
> 
> 标签：jquery, jquery-ui

我在 div 内有一棵树（jstree），所以当一个节点展开时，div 的高度会发生变化。我想在节点的每个扩展上获取 div 的高度，或者只是最终的 div 高度。jquery 是可取的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:12:47.107

你可以使用这个：

```
 $("#Your-div-id").height(); 
```

你可以在你的 jstree 上绑定一个点击函数，每次点击你都可以计算你的 div 高度。

看到[这个](http://www.jstree.com/demo)和[http://www.jstree.com/documentation/core](http://www.jstree.com/documentation/core)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:03:15.860

您可以应用以下事件脚本，它应该在树节点发生打开事件时工作。

```
$("#demo1").bind("open_node.jstree", function (e, data) {
        $("#Your-div-id").height('auto');
}); 
```

# ruby-on-rails-3 - 独角兽在 EC2 上行动

> ID：11300487
> 
> 赞同：1
> 
> 时间：2012-07-02T20:10:09.103
> 
> 标签：ruby-on-rails-3, amazon-ec2, unicorn

我有一个中型 EC2 实例，几天后似乎损坏了独角兽实例，导致应用程序抛出 403 错误，url 显示为`http://app/foo/bar`

“app”是独角兽的代理。这是我的 nginx 站点配置

```
 upstream app {
            server unix:/home/foo/app/shared/sockets/unicorn.sock fail_timeout=0;
    }

    server {
            listen   80; # This is on by default. 
            client_max_body_size 2G;
            #       upload_max_file_size 50m;
            server_name foo.tld; # Hostname
            keepalive_timeout 5;
            root /home/foo/app/current/public; # Application root.

            access_log /home/foo/log/foo_access.log; # Logs for nginx access
            error_log /home/foo/log/foo_error.log;

            if ($request_method !~ ^(GET|HEAD|PUT|POST|DELETE|OPTIONS)$) {
                    return 405;
            }

            if (-f $document_root/system/maintenance.html) {
              return 503;
            }

            error_page 503 @maintenance;

            location @maintenance {
              rewrite  ^(.*)$  /system/maintenance.html last;
              break;
            }

            # Static serving as defined in the RoR guides 
            # http://guides.rubyonrails.org/asset_pipeline.html#in-production
            location ~ ^/(assets(?!\/(files|pictures)))/ {
                    gzip_static on;
                    expires max;
                    add_header Cache-Control public;
            }       

            # Proxy forwarding to unicorn
            location / {
                    try_files $uri/index.html $uri.html $uri @app;
                    error_page 404                  /404.html;
                    error_page 422                  /422.html;
                    error_page 500 502 503 504      /500.html;
                    error_page 403                  /403.html;
            }

            location @app {
                    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header Host $http_host;
                    proxy_redirect off;
                    proxy_pass http://app;
            }

        location = /favicon.ico {
                expires max;
                add_header Cache-Control public;
        }

        location ~ \.php {
                deny all;
        }
    } 
```

我的独角兽.rb

```
worker_processes 4
working_directory '/home/foo/app/current'

# This loads the application in the master process before forking
# worker processes
# Read more about it here:
# http://unicorn.bogomips.org/Unicorn/Configurator.html
preload_app true
GC.respond_to?(:copy_on_write_friendly=) and
  GC.copy_on_write_friendly = true

timeout 30

# This is where we specify the socket.
# We will point the upstream Nginx module to this socket later on
listen '/home/foo/app/shared/sockets/unicorn.sock', :backlog => 64
pid '/home/foo/app/shared/pids/unicorn.pid'

# Set the path of the log files inside the log folder of the testapp
stderr_path '/home/foo/app/current/log/unicorn.stderr.log'
stdout_path '/home/foo/app/current/log/unicorn.stdout.log' 
```

还有我的帽子配方

```
require 'bundler/capistrano'

set :rvm_ruby_string, ENV['GEM_HOME'].gsub(/.*\//,"") # Read from local system
require "rvm/capistrano"                               # Load RVM's capistrano plugin.

# Application name
set :application, "foo"

# Repo information
set :repository, "foo.git"
set :scm, :git
set :branch, "master"

# Server information
set :user, "foo"
set :scm_passphrase, "foo"
set :deploy_via, :remote_cache
server "foo.tld", :web, :app, :db # This is our EC2 Instance
set :deploy_to, "/home/foo/app"
ssh_options[:keys] = [File.join(ENV["HOME"], "keys/foo")]
set :use_sudo, false

namespace :deploy do

  desc "Restart of Unicorn"
  task :restart, :excerpt => { :no_release => true } do
    run "kill -a USR2 `cat /home/foo/app/shared/pids/unicorn.pid`"
  end

  desc "Start Unicorn"
  task :start, :excerpt => { :no_release => true } do
    run "cd #{current_path} ; bundle exec unicorn_rails -c config/unicorn.rb -E production -D"
  end

  desc "Stop Unicorn"
  task :stop, :excerpt => { :no_release => true } do
    run "kill -s QUIT `cat /home/foo/app/shared/pids/unicorn.pid`"
  end

  namespace :web do
    desc "Throw maintenance page up"
    task :disable do
      require "erb"
      on_rollback { run "rm #{shared_path}/system/maintenance.html" }

      reason = ENV['REASON']
      deadline = ENV['UNTIL']

      template = File.read("./app/views/layouts/maintenance.html.erb")
      result   = ERB.new(template).result(binding)

      put result, "#{shared_path}/system/maintenance.html", :mode => 0644
    end
  end
end 
```

关于为什么独角兽会在几天后采取行动的任何见解？此外，我当前的设置中是否有任何“陷阱”。？

更新：看起来独角兽永远无法重新启动挂起的进程

```
E, [2012-07-03T09:59:13.554781 #9521] ERROR -- : worker=3 PID:9656 timeout (31s > 30s), killing
E, [2012-07-03T09:59:13.710103 #9521] ERROR -- : reaped #<Process::Status: pid 9656 SIGKILL (signal 9)> worker=3
I, [2012-07-03T09:59:13.710349 #9521]  INFO -- : worker=3 spawning...
I, [2012-07-03T09:59:13.906277 #16214]  INFO -- : worker=3 spawned pid=16214
I, [2012-07-03T09:59:13.906672 #16214]  INFO -- : worker=3 ready
E, [2012-07-03T13:37:45.158213 #9521] ERROR -- : worker=3 PID:16214 timeout (31s > 30s), killing
E, [2012-07-03T13:37:45.402827 #9521] ERROR -- : reaped #<Process::Status: pid 16214 SIGKILL (signal 9)> worker=3
I, [2012-07-03T13:37:45.403125 #9521]  INFO -- : worker=3 spawning...
I, [2012-07-03T13:37:45.531584 #16270]  INFO -- : worker=3 spawned pid=16270
I, [2012-07-03T13:37:45.531982 #16270]  INFO -- : worker=3 ready 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-24T17:20:14.473

因为你有 preload_app: true，你需要在 fork 时重新连接你的数据库/缓存实例

在 before_fork

```
Rails.cache.reset
ActiveRecord::Base.connection.disconnect! 
```

在 after_fork

```
ActiveRecord::Base.establish_connection Rails.env 
```

如果您有任何其他 memcached/dalli 连接，请确保您也 .reset 它们。祝你好运！

# android - Titanium：Android Tab Group Bar 和 Tabs 的自定义

> ID：11300488
> 
> 赞同：0
> 
> 时间：2012-07-02T20:10:17.950
> 
> 标签：android, titanium, titanium-mobile

我已经使用 Objective-C 在 iOS 上构建了一个标签栏，并试图使用 Titanium 让 Android 上的标签栏看起来尽可能接近。我在想：

1.  你如何给标签栏本身一个背景图片？我唯一能做的就是给它一个背景颜色。该`backgroundImage`属性没有任何影响。

2.  如何更改选定选项卡的背景颜色？我试过改变`activeTabBackgroundSelectedColor`没有运气。

3.  你如何修改活动标签的图标？我希望图标在未选中时为灰色，但在选中时为白色。我尝试创建一个可绘制对象，但我无法让 Android 应用程序识别它，`Titanium.App.Android.R.drawable.ic_tab_coupon` 感谢您的帮助！

-

PS 对于它的价值，这是我正在使用的代码片段。请注意，我还有其他以相同方式实例化/添加的选项卡，为了简洁起见，我没有显示它们。

```
var self = Ti.UI.createTabGroup({
    backgroundColor: 'red',
    activeTabBackgroundColor: 'blue',
});

var win1 = new Window(L('SpintoWin'));

var tab1 = Ti.UI.createTab({
    backgroundColor: 'none',
    title: L('SpintoWin'),
    icon: '/images/tab-icon-gift.png',
    window: win1
});

win1.containingTab = tab1;

self.addTab(tab1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:03:40.067

**1.**你需要定义`TabWidget`'s`android:background`属性。例如：

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@android:id/tabs" />

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"

        android:background="@drawable/tab_backgrnd" />

</RelativeLayout> 
```

哪里`tab_backgrnd`可能有任何[drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html)。

**2 & 3.**首先，您像 Android 本身一样定义选项卡的布局。以下是 Android 的选项卡布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="0dip"
    android:layout_height="64dip"
    android:layout_weight="1"
    android:layout_marginLeft="-3dip"
    android:layout_marginRight="-3dip"
    android:orientation="vertical"
    android:background="@drawable/tab_indicator">

    <ImageView android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true" />

    <TextView android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        style="?android:attr/tabWidgetStyle" />

</RelativeLayout> 
```

您可以在此布局中放入您想要的任何东西，而不仅仅是 one`ImageView`和 one `TextView`。要使您的选项卡在按下/选择时发生变化，请将 设置[`StateListDrawable`](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)为根布局的背景和选项卡包含的其他元素的背景（`ImageView`在`TextView`上面的示例中）。

然后你膨胀这个布局并将其设置为选项卡指示器：

```
 TabHost tabHost = getTabHost();
    TabHost.TabSpec tabSpec;  // Reusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab
    View tabView;
    LayoutInflater inflater = getLayoutInflater();

    intent = new Intent().setClass(this, YourActivity1.class);
    tabView = inflater.inflate(R.layout.tab_layout, tabHost.getTabWidget(), false);
    tabSpec = tabHost.newTabSpec(TAG_TAB_1).setIndicator(tabView).setContent(intent);
    tabHost.addTab(tabSpec);

    // Do the same for the other tabs
    ... 
```

您可以通过编程方式设置每个选项卡的图标和文本（就像 Android 使用`android:id="@+id/icon"`和`android:id="@+id/title"`ids 一样），或者您可以为每个选项卡定义单独的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:20:04.870

这是一个较老的问题，但我想我会提供一些有关此问题的其他详细信息，因为该问题在搜索引擎结果中的条款相当高。

[http://developer.appcelerator.com/question/53851/android-tab-icon-states](http://developer.appcelerator.com/question/53851/android-tab-icon-states)

在 Titanium 1.7 中，选项卡被修改为支持可绘制资源以允许这样做（见下文，包括示例代码）

[https://jira.appcelerator.org/browse/TIMOB-3179](https://jira.appcelerator.org/browse/TIMOB-3179)

现在，在那之后的某处修复了将可绘制资源指定为选项卡图标的能力被删除。

下一个合乎逻辑的步骤是尝试在`.icon`选项卡获得或失去焦点时修改选项卡的属性，如以下问题所述：

[http://developer.appcelerator.com/question/135063/how-to-change-active-tab-icon](http://developer.appcelerator.com/question/135063/how-to-change-active-tab-icon)

由于原生 Android 代码采用可绘制资源而不是字符串值，因此选项卡上的图标在绘制后无法更新：

[https://jira.appcelerator.org/browse/TIMOB-9962](https://jira.appcelerator.org/browse/TIMOB-9962)

所以，这个问题的答案是：

*   您不能将图标设置为可绘制资源
*   绘制选项卡后，您无法更改选项卡图标

在使用 Ti.UI.TabGroup / Ti.UI.Tab 时，在上述任一选项可用之前，您将无法更改选项卡的图标。

# excel - Excel 中的标签与值

> ID：11300490
> 
> 赞同：1
> 
> 时间：2012-07-02T20:10:29.273
> 
> 标签：excel, vba

我正在尝试创建从债券评级“AAA、AA+、AA、AA-、...”到等效数字“-29、-28、-27、-26、...”的映射

我希望单元格的值与标签不同。例如，我希望标签为 AAA 的单元格的基础值为 -29。这将使我能够使用 excel 过滤来选择债券评级 > [阈值] 的行。数值等效/映射为我提供了一种方法。

这种值/标签区别在 Excel 中是否可行？如果不是，如果我希望通过我自己的自定义排名应用过滤，我有哪些选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:55:35.167

我个人会选择 Tim William 的使用 VLookup 的解决方案，因为它是最简单的。或者，当使用 VBA 时，通过在二维数组中加载单独的列并在遍历数组时通过设置条件语句来检索“标签”。

只是为了回答您的问题，您可以给单元格（或范围）一个“名称”，这就是为什么它们被称为“命名范围”的原因。
*理论上*你可以给一个单元格一个值-29，并根据它的值检索范围的名称。请注意，命名范围仅允许字母、数字（不要以数字开头）和下划线，因此您需要使用诸如“AA_PLUS”或“AA_MINUS”之类的名称。假设您将名称“AA”添加到工作簿的 sheet(1) 中的单元格(1,1)，您检索命名范围：

```
dim sName as string

sName = thisworkbook.sheets(1).cells(1,1).name.name
debug.print sName 
```

对值进行排序后，仍然可以正确检索名称，如果需要，您可以将它们加载到数组中。虽然好处是您不需要为添加额外的列保留工作表空间并且它增加了灵活性（命名范围可以放在任何地方，因为名称粘在单元格上），但我不推荐这种方法当你处理大量数据。

一般来说，它们的使用方向与我刚才解释的方式相反。首先，您为范围定义一个名称，然后检索它的值，而不是相反（尽管没有禁止它的规则并且代码可用）。命名范围提供了灵活性，并且通常是使工具动态化的必要条件。我的意思是范围可以移动，而 VBA 仍将正确检索它们的值。

好吧，另一个“标签类型的解决方案”是为每个单元格添加注释（其中的内容可以通过编程方式设置和获取），但我也从未使用过这种方法，对于长数据结构，我不推荐它。

```
sName = thisworkbook.sheets(1).cells(1,1).comment.text 
```

# javascript - 雅虎财务数据 javascript

> ID：11300494
> 
> 赞同：2
> 
> 时间：2012-07-02T20:10:43.597
> 
> 标签：javascript, csv, drupal-7, yahoo-finance

1.  我目前持有一个 Drupal 7 站点。

2.  我想在我的侧边栏上用雅虎未婚夫 api 数据构建一个块，例如：

    ```
    Nasdaq 2,951.23    16.18   +0.55%
    Dow    12,871.39   -8.70   -0.07% 
    ```

3.  我想用 javascript 来做，因为在 Drupal 中，我可以将 js 代码直接嵌入到我的内联内容中，这比使用 php 代码更容易。

我从 yahoo 未婚夫那里得到的数据是 .csv 格式的，我需要从 yahoo Finance 远程解析它，查询如下： http: [//download.finance.yahoo.com/d/quotes.csv](http://download.finance.yahoo.com/d/quotes.csv?s=) ?s = ^ IXIC,^GSPC,^FTSE,^GDAXI,^FCHI,^N225,^HSI,^STI,^BSESN,^NSEI&f=sl1c1&e=.csv

好的，伙计们，请帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:17:55.097

不幸的是，您将无法从外部域 (yahoo.com) 下载 csv 文件并仅使用 JavaScript 将其显示给您的用户。有跨域限制防止这种情况发生。

但是，您可以将 JSON 版本用于财务数据，例如使用 jQuery：

请参阅 jsfiddle.net 上的此示例：http: [//jsfiddle.net/grimreaper01/jVWwu/](http://jsfiddle.net/grimreaper01/jVWwu/)

# php - 如何使用curl从远程页面的head标签中提取链接

> ID：11300496
> 
> 赞同：4
> 
> 时间：2012-07-02T20:11:01.017
> 
> 标签：php, hyperlink

我有一些网址，这些网址的所有 html 在其标签中都有以下标签

```
 <link rel="image_src" href="http://imgv2-4.scribdassets.com/img/word_document/15490455
  /164x212/8a4ab0c34b/1337732662" /> 
```

我正在使用以下代码

```
 $url = 'my url';
    $ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);    // The url to get links from
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); // We want to get the respone
$result = curl_exec($ch);

$regex='|<a.*?href="(.*?)"|';
preg_match_all($regex,$result,$parts);
$links=$parts[1];
foreach($links as $link){
    //if(strpos($link,'format=json') !==false) {
        echo $link;
    //}
} 
```

现在我想抓住这个链接href，但我不知道怎么做。请帮我

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:32:57.167

I prefer using PHP's [DOMDocument](http://us2.php.net/manual/en/class.domdocument.php) going through HTML, versus preg_match. Something like this should work:

```
$xpath = new DOMXPath($result);
$links = $xpath->query('//link[@rel="image_src"]');
foreach ($links as $link) {
     $src = $link->nodeValue;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T06:00:00.053

这是对我有帮助的另一种选择。这类似于`DOMXPATH`@Mark Roach 的建议

```
$dom = new DOMDocument;
$dom->loadHTML($html);
$nodes = $dom->getElementsByTagName('link');
foreach ($nodes as $node){
    if ($node->getAttribute('rel') === 'image_src')
    {
        echo($node->getAttribute('href'));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T21:15:56.707

像这样

```
 <?php
    $url = 'http://www.scribd.com/doc/15490455/Learning-PHP-5';
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);    // The url to get links from
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); // We want to get the respone
    $result = curl_exec($ch);

    $regex='#.*link rel=\"image_src\" href=\"(.*)\"./>#';
    preg_match($regex,$result,$parts);

    foreach ($parts as $part) {
       echo = $part;
    }
    ?> 
```

# c# - 使用 asp.net webapi 实现 oData inlinecount

> ID：11300498
> 
> 赞同：1
> 
> 时间：2012-07-02T20:11:12.277
> 
> 标签：c#, jsonp, odata, asp.net-web-api

> **可能重复：**
> [使用 WebApi 进行 OData 分页 ( $inlinecount )](https://stackoverflow.com/questions/10706479/odata-pagination-with-webapi-inlinecount)

由于 Asp.net WebAPi 几乎支持 odata，它非常吸引我让 $inlinecount 工作，以便它与 kendo ui（或任何其他）很好地配合使用。为了让它以 jsonp 格式返回值，我实现了一个新的 MediaFormatter（来自 Stackoverflow）。

麻烦的是，它需要结果中包含计数元素才能使服务器端分页正常工作，所以现在我破解了格式化程序以使虚假计数正常工作。这一切都很好，网格很高兴，但是获得真正的计数是一个挑战，因为返回的 IQueryable 表达式已经应用了过滤器/Take 等。

```
 public override Task WriteToStreamAsync(Type type, object value, Stream stream, HttpContentHeaders contentHeaders, TransportContext transportContext)
    {
        string callback;
        if (IsJsonpCountableRequest(out callback))
        {
            return Task.Factory.StartNew(() =>
            {
                var q = value as IQueryable<Movie>;
                var count = q.Count(); // this count doesnt return the actual count
                var writer = new StreamWriter(stream);
                writer.Write(callback + "({");
                writer.Write(@"""d""");
                writer.Write(" : { ");
                writer.Write(@"""results""");
                writer.Write(" : ");
                writer.Flush();
                base.WriteToStreamAsync(type, value, stream, contentHeaders, transportContext).Wait();
                writer.Write(",");
                writer.Write(@"""__count""");
                writer.Write(" : ");

                writer.Write(string.Format(@"""{0}""", count));
                writer.Write("}");

                writer.Write("})");
                writer.Flush();
            });
        }
        else
        {
            return base.WriteToStreamAsync(type, value, stream, contentHeaders, transportContext);
        }
    } 
```

有没有办法单独获取计数，可能来自 IQueryable 的底层提供者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:17:29.937

我上周遇到了确切的问题。查看[使用有用的元数据扩展您的 ASP.NET Web API 响应](http://www.strathweb.com/2012/06/extending-your-asp-net-web-api-responses-with-useful-metadata/)

我使用这篇文章和示例代码来使用 OData 启动和运行分页网格。如示例中所述，我创建了一个委托处理程序来捕获 HttpResponseMessage 并将其包装在包含项目计数的自定义元数据中。还创建了一个自定义属性 CustomQueryableAttribute，它继承了默认的 QueryableAttribute。

这里听起来可能有点复杂，但实际上实现起来非常简单。我在大约 30 分钟内启动并运行了一些东西。

希望 Web API 的未来版本有更完整的 OData 支持。

编辑：**Odata 支持不会随 Web API 一起提供。**正在为 RTM 版本删除可查询属性。在初始发布后的某个时候，将通过单独的 Nuget 包提供更完整的 OData 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:38:21.847

试试这种方法： http: [//www.strathweb.com/2012/08/supporting-odata-inlinecount-with-the-new-web-api-odata-preview-package/](http://www.strathweb.com/2012/08/supporting-odata-inlinecount-with-the-new-web-api-odata-preview-package/)

它使用最新的 Web API OData 包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T08:28:24.647

用于实现此功能的 SPA `DataController`（派生自）。`ApiController`但是，随着最新的更改，它已被删除，因为他们计划以不同的方式支持 OData。

如果您使用的是 MVC 4 Beta，那么您只需将控制器更改为`DataController`，就可以了。如果您使用的是 RC，那么您应该查看 Codeplex 上较旧的 ASP.NET Webstack[提交](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/8ff0d2799efc#src/Microsoft.Web.Http.Data/DataController.cs)。您感兴趣的方法是`ExecuteAsync`，来自*DataController.cs*

# jquery - 用选定的表格行改变页面的功能表现得很奇怪

> ID：11300500
> 
> 赞同：0
> 
> 时间：2012-07-02T20:11:38.157
> 
> 标签：jquery, jquery-ui

我正在使用下面的函数来检查根据行背景颜色的变化选择了哪个表行。如果未选择任何内容，则会出现一个对话框，提示存在错误。如果选择了一行，那么它应该允许您在单击按钮时转到编辑页面。出于某种原因，这只适用于大约一半的时间，即使选择了一行也会显示错误框。对此的任何帮助将不胜感激

```
$('#edit').click(function() {
                var selected =  $('#deliverytable').find('tr').css("background-color");

                if(selected == "rgb(187, 187, 187)"){
                    window.location = 'editd.html';
                }else{
                    var $dialog = $('<div></div>')
                        .html('<p>Please select a table row</p>')
                        .dialog({
                            autoOpen: false,
                            title: 'ERROR'
                        });
                    $dialog.dialog('open');
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:44:33.413

jQuery 的 CSS 方法只会返回“匹配元素集中第一个元素的样式属性值”。- [http://api.jquery.com/css/](http://api.jquery.com/css/)。因此，这行代码没有按照您的预期进行。

```
$('#deliverytable').find('tr').css("background-color"); 
```

这仅返回`background-color`表中第一行的。因此，您的逻辑仅检查该行。如果要检查所有行，则必须循环执行此逻辑。

```
$('#deliverytable').find('tr').each(function(index, row) {
    if ($(row).css('backgroundColor') == "rgb(187, 187, 187)") {
        //Change the window location
    } else {
        //Show the dialog
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:18:13.367

根据样式属性来确定 UI 状态是很不好的做法。考虑`addClass('ui-row-selected')`例如然后使用`hasClass('ui-row-selected')`或轻松检查`is('.ui-row-selected')`

# excel - 无法从 VBA 调用 SAP BAPI 函数

> ID：11300503
> 
> 赞同：1
> 
> 时间：2012-07-02T20:11:46.637
> 
> 标签：excel, vba, saprfc, bapi

我正在尝试从 Excel 宏 VBA 调用 SAP 函数。我可以进行连接，但是每当代码到达调用函数的行时，我都会收到错误消息

> 运行时错误“61704”：内部应用程序错误。

我的代码如下：

```
Dim functionCtrl As Object
Dim sapConnection As Object
Dim theFunc As Object
Dim PoNumber

Set functionCtrl = CreateObject("SAP.Functions")
Set sapConnection = functionCtrl.Connection
sapConnection.System = ""
sapConnection.Client = ""
sapConnection.user = ""
sapConnection.Password = ""
sapConnection.Language = ""

If sapConnection.logon(0, False) <> True Then
MsgBox "No connection to R/3 System"
Exit Sub                                           'End program
End If
Set theFunc = functionCtrl.Add("BAPI_REQUISITION_CREATE") 
```

错误仅在执行最后一行时出现。我在参考文献中添加了 librfc32.dll，我能够执行 GUI 脚本（从 SAP 记录）。

它与权限或其他什么有关吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:47:28.753

我不会完全回答你的问题，但我希望无论如何都能提供有用的信息。我目前致力于将会计数据从 QuickBooks 迁移到 SAP。我使用 Ruby 和 Ruby on Rails 编写脚本和 Web 界面。

由于您对脚本编写感到满意，因此我建议您尝试以下方法：

*   [ruby 1.8.7 (2011-12-28 patchlevel 357) [i386-mingw32] 与来自http://rubyinstaller.org](http://rubyinstaller.org)的 DevKit
*   SAP NW RFC SDK（分发为 NWRFC_7-20004566.sar 文件）- 将 sapnwrfc.dll 提取到 c:\windows\system32
*   来自[http://www.piersharding.com/download/ruby/sapnwrfc/sapnwrfc-0.24-x86-mingw32-ruby187.gem的 Pierce Harding 的 SAP NW RFC Ruby 库](http://www.piersharding.com/download/ruby/sapnwrfc/sapnwrfc-0.24-x86-mingw32-ruby187.gem)

安装 Ruby 和库非常简单。

您可能需要创建配置文件：

```
# c:\tmp\sapdev.yml
# adjust parameters to yours
ashost: your.sap.server.ip
sysnr: "00"
client: "100"
user: yoursaplogin
passwd: yoursappwd
lang: EN
trace: "1" 
```

然后尝试这样的事情：

```
# c:\tmp\sap-test.rb
require 'rubygems'
require 'sapnwrfc'

SAPNW::Base.config_location = "c:\\tmp\\sapdev.yml"
SAPNW::Base.load_config
conn = SAPNW::Base.rfc_connect
attrib = conn.connection_attributes
# here you will find if you can connect to SAP programmatically
puts "\n>>> Connection Attributes: #{attrib.inspect}\n"

# discover the BAPI function
call = conn.discover("BAPI_ACC_DOCUMENT_CHECK").new_function_call

# set up parameters. in this case DOCUMENTHEADER, ACCOUNTGL and CURRENCYAMOUNT
call.DOCUMENTHEADER = { 
  "HEADER_TXT" => "EXCEL POST", 
  "COMP_CODE" => "2080", 
  "DOC_DATE" => "20090123", 
  "PSTNG_DATE" => "20090123", 
  "USERNAME" => "YOURSAPLOGIN", 
  "BUS_ACT" => "RFBU", 
  "DOC_TYPE" => "SA" # CUSTOMER INVOICE 
}
puts "\n>>> DOCUMENTHEADER:"
p call.DOCUMENTHEADER

call.ACCOUNTGL = [
  {"ITEMNO_ACC" => "0000000001", "GL_ACCOUNT" =>"0000500000" },
  {"ITEMNO_ACC" => "0000000002", "GL_ACCOUNT" =>"0000799900", "ORDERID" => "CS_USD4110" }
]
puts "\n>>> ACCOUNTGL:"
p call.ACCOUNTGL

call.CURRENCYAMOUNT = [
   {"ITEMNO_ACC" => "0000000001", "CURR_TYPE" => "00", "CURRENCY" => "USD", "AMT_DOCCUR" => "-0.70" }, 
   {"ITEMNO_ACC" => "0000000002", "CURR_TYPE" => "00", "CURRENCY" => "USD", "AMT_DOCCUR" => "0.70" }
]
puts "\n>>> CURRENCYAMOUNT:"
p call.CURRENCYAMOUNT

call.invoke
puts "\n>>> call.RETURN:" 
message = []
call.RETURN.each do |r|
    message << r["MESSAGE"].strip
end
message.uniq!
puts message.join("\n") 
```

您可能会收到有关 GL 帐户等的错误，但这只是我的工作示例。这里重要的是建立 RFC 连接。然后你可以继续准备`BAPI_REQUISITION_CREATE`调用，填写`call.REQUISITION_ITEMS`，调用它并检查`call.RETURN`。

您可能还会发现 Ruby 和 Ruby on Rails 可以从 Excel 读取数据并与不同的数据库集成，这很方便。这对我有用。

干杯，

阿列克谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:23:36.287

要访问 SAP，您至少需要 s_RFC。为此，您需要与您的 SAP 管理部分联系，并确定您可能（或可能不需要）需要哪些其他权限对象。

# ruby-on-rails-3 - Rails 错误消息对于命令行窗口来说太长了

> ID：11300519
> 
> 赞同：0
> 
> 时间：2012-07-02T20:12:53.833
> 
> 标签：ruby-on-rails-3, bundler

我的 Rails 应用程序出了点问题，因为当我运行 bundle install 时，我收到一长串错误，其中一部分不断重复（在 resolve_requirement 中阻塞）。该列表很长，当我滚动到命令窗口的顶部（在 Windows 中）时，我看不到错误消息的开头（即导致问题的要求）。

此外，当我进入我的日志 > 开发文件时，错误并没有记录在那里。是否有可以更改的设置来提供帮助，以便我可以看到错误消息的开头，或者我可以在我的日志 > 开发文件中看到错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:17:16.733

如果你运行命令

```
bundle install > output.txt 
```

您可以在文本编辑器中阅读输出

# regex - 正则表达式匹配多个分隔符

> ID：11300520
> 
> 赞同：0
> 
> 时间：2012-07-02T20:12:54.370
> 
> 标签：regex

我有这样的东西

```
START SOMETEXT1 DELIMITER START SOMETEXT2 DELIMITER START SOMETEXT3 DELIMITER 
```

我想匹配`SOMETEXT1`，`SOMETEXT2`并且`SOMETEXT3`我有多个分隔符，`DELIMITER1`比如`DELIMITER2`和`DELIMITER3`。

我不知道如何构造一个匹配的正则表达式`DELIMITER1`，`DELIMITER2`或者`DELIMITER3`以先到者为准。

假设`START(.*?)(DELIMITER1|DELIMITER2|DELIMITER3)`将匹配

```
START SOMETEXT1 DELIMITER2 START SOMETEXT2 DELIMITER1 
```

而不是`START SOMETEXT1 DELIMITER2`因为它尝试以给定的顺序匹配分隔符。

# css - CSS3仅在隐藏孩子时设置样式

> ID：11300521
> 
> 赞同：1
> 
> 时间：2012-07-02T20:13:03.030
> 
> 标签：css

给定下面的 html，仅使用 CSS，不使用 JS/jQuery - 只有当第二个 LI（.dropdown-optional）被隐藏（显示：无）时，我才能以特定方式设置第一个 LI > A 的样式。

```
<ul>
  <li>
    <a class="btn">Item 1</a>
  </li>
  <li class="dropdown-optional">
    <a class="btn">Item 2</a>
  </li>
</ul> 
```

谢谢

# sql - 更新列值 PostgreSQL

> ID：11300522
> 
> 赞同：55
> 
> 时间：2012-07-02T20:13:03.230
> 
> 标签：sql, postgresql

我正在尝试更新与某个匹配的列的值`userid`，但它不断给出语法错误。

```
UPDATE user 
   SET balance = 15000.000000000 
 WHERE id = 11203; 
```

名为 user 的表有很多行和两列，`balance`并且`id`. 我正在尝试在代码中编辑用户 ID 的余额。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-07-02T20:19:04.050

尝试“用户”，或者给一个更通用的名称：

```
UPDATE "user" 
 SET balance = 15000.000000000 
 WHERE id = 11203; 
```

或`ALTER`您的表名，例如“user_list”。如有疑问，请检查 [关键字](http://www.postgresql.org/docs/current/static/sql-keywords-appendix.html)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-02T20:17:47.630

您需要转义`user`，因为它是保留字。尝试

```
UPDATE "user"
SET balance = 15000.000000000 
WHERE id = 11203; 
```

# jquery - 从多个 div 中获取值并将它们与输入值匹配

> ID：11300524
> 
> 赞同：0
> 
> 时间：2012-07-02T20:13:09.387
> 
> 标签：jquery

我希望你能帮我解决这个问题

[http://jsfiddle.net/hyperlagete/z2LYb/2/](http://jsfiddle.net/hyperlagete/z2LYb/2/)

我有一些来自练习的 HTML 代码，基本上我需要做的是获取每个 div 上数字的值，在本例中为“first-number”和“second-number”（没有 ID，全部按类分组(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:38:37.040

有点难以理解你到底想要做什么，但也许这会以某种方式帮助你：

[小提琴](http://jsfiddle.net/z2LYb/3/)

# javascript - 如果输入了正确的坐标，则启用复选框

> ID：11300528
> 
> 赞同：0
> 
> 时间：2012-07-02T20:13:23.023
> 
> 标签：javascript, jquery, regex

如果文本字段具有有效的坐标，我想启用一个复选框，但它不会像我希望的那样工作。我问你知道吗，我做错了什么？

[在 jsFiddle 演示](http://jsfiddle.net/S8r8u/10/)。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T20:27:44.983

1.  事件类型由空格而不是逗号分隔
2.  我用备用声明替换了 RegExp 构造函数，它可以工作。不完全确定为什么。

[http://jsfiddle.net/S8r8u/31/](http://jsfiddle.net/S8r8u/31/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:44:03.707

我不确定RegExp。它似乎不匹配，但您的事件不会触发，因为多个事件的 jQuery 语法是用空格而不是逗号分隔。

```
$('input[name="textfield-coordinates"]').on('keyup change paste', function() {

}); 
```

[jQuery on 方法](http://api.jquery.com/on/)

# php - Twilio 客户端“静音”按钮不起作用

> ID：11300530
> 
> 赞同：1
> 
> 时间：2012-07-02T20:13:39.120
> 
> 标签：php, javascript, twilio

我在通过 Twilio 客户端“静音”拨出电话时遇到问题。当我接到来电时，我可以将呼叫静音*，*但是，当我*拨出*电话时，静音按钮不起作用。我已经尝试了我能想到的一切来使这个静音按钮起作用，但我所做的一切都不起作用。这是代码的链接：

```
<script type="text/javascript">
function call() {
     //Get the phone number to connect the call to
     params = {"PhoneNumber": $("#number").val()};
     Twilio.Device.connect(params);

     $("#mute").click(function() {
        conn.mute();
     });

 }
</script>

<button id="mute">
     Mute
</button> 
```

请帮助解决这个问题。它一直让我发疯。我无法弄清楚这一点！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T20:31:33.047

你不应该设置`conn = Twilio.Device.connect(params);`吗？

[https://www.twilio.com/docs/api/client/device#connect](https://www.twilio.com/docs/api/client/device#connect)

# c# - 是否可以使用 imageresizer.net 对图像进行任意仿射变换？

> ID：11300537
> 
> 赞同：1
> 
> 时间：2012-07-02T20:14:06.877
> 
> 标签：c#, .net, imageresizer

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:47:53.503

**Yes, arbitrary affine transformations can be done through the URL API, but you have to know the [order of events](http://imageresizing.net/docs/plugins/imagebuilder)** and you'll have to split the cropping and padding into separate commands.

Cropping happens before resizing, so you'll need to figure out your viewport dimension and split them into two sets of coordinates.

1) Crop values are x1,y1,x2,y2, in source image coordinates. You can use `cropxunits=100` and `cropyunits=100` to make x1,y1,x2,y2 percentages of width/height respectively if you don't know the viewport coordinates in image dimensions. You can also use arbitrary values for `cropxunits` and `cropyunits` to make the math easier.

Negative crop values will be relative to bottom-right instead of top left, so after copying the absolute value of negative (or, for far right values, the excess amounts) into variables for padding later, set them to zero or width/height/cropxunits/cropyunits.

2) Add padding if needed with `margin=left, top, right, bottom`. Units are display pixels, not source pixels, so these values should be unscaled.

3) Scale - This is where you apply `width=x&height=y&mode=max` to get the appropriate display size. Left off, it will show 1:1 zoom, which may or may not be desired. `x` and `y` here should be the desired width/height of the image in display pixels, NOT the canvas.

See [full command reference](http://imageresizing.net/docs/reference) for details.

You can definitely do this as a plugin, but I'd suggest doing a javascript implementation first, then seeing if you want to bother putting the wrapping on the server in plugin form. Either way, I've had this question a few times and an MIT-licensed code sample would be very helpful to the community.

# html - CSS - 样式化 ul 元素，就好像它们是表格行元素一样

> ID：11300538
> 
> 赞同：1
> 
> 时间：2012-07-02T20:14:07.323
> 
> 标签：html, css

我正在研究一个相当困难的造型问题。我有一组包含在 div 标签内的 ul 元素。从视觉上看，每个 ul 都应该在表格中显示为一行。结构如下：

```
<div class="tableElementEmulation">
   <ul class="trElementEmulation">
      <li class="tdElementEmulation">Some text</li>
      <li class="tdElementEmulation">Some text</li>
      <li class="tdElementEmulation">Some text</li>
      <li class="tdElementEmulation">Some text</li>
   </ul>
</div> 
```

我需要设置这个结构的样式，让它像 HTML 表格一样工作。这已被证明是非常困难的，因为 table 元素本身可以处理大量表格格式，而无需任何额外的 css。无论如何，我都不是 CSS 大师，所以到目前为止，复制该功能还不是很成功。

显然，使用实际的 HTML 表格来实现这种格式会更容易，但我正在为这个页面使用一个插件，它只适用于类似于我上面列出的结构。我需要为页面使用这个插件，所以不幸的是，只使用 HTML 表格不是一个选项。**有没有人对在上面列出的这个 html 结构上实现类似表格的样式有任何建议？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T20:21:01.167

HTML：

```
<div class="tableElementEmulation">
   <ul class="trElementEmulation">
      <li class="tdElementEmulation">Some text</li>
      <li class="tdElementEmulation">Some text</li>
      <li class="tdElementEmulation">Some text</li>
      <li class="tdElementEmulation">Some text</li>
   </ul>
</div> 
```

CSS：

```
.trElementEmulation li {
    list-style:none;
    float:left;
    padding: 5px 10px;
    border: 1px solid #eee;
} 
```

请参阅[演示](http://jsfiddle.net/G7yhP/)。

# javascript - 正则表达式回参考，我错过了什么？

> ID：11300540
> 
> 赞同：1
> 
> 时间：2012-07-02T20:14:26.813
> 
> 标签：javascript, regex, backreference

我正在编写一个微模板脚本，其中部分字符串被替换为对象选项。这是一个简短的例子：

```
var person = {name:"Smith",age:43};
var string = "I am {name} and I am {age} years old";

document.write(string.replace(/{([\s\S]+?)}/g,(person['$1']||"")));
document.write("<br/>");
document.write(string.replace(/{([\s\S]+?)}/g
              , function($0,$1){return person[$1]||"";})); 
```

同样在[JS Fiddle](http://jsfiddle.net/h5Ftv/)

第二个表达式工作正常，但不是第一个。有人可以解释为什么吗？我认为`$1`可以直接用作字符串中的反向引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:25:31.583

`$1`, `$2`, ...,`$&`只能在它们是传递给的字符串值的一部分时使用`replace`：

```
string.replace(/{([\s\S]+?)}/g, '$1(matched)');
// result: "I am name(matched) and I am age(matched) years old" 
```

但是，第一个片段实际上是：

```
document.write(string.replace(/{([\s\S]+?)}/g,"")); 
```

那是因为`(person['$1']||"")`不是可以按原样传递的值。这是一个属性查找和逻辑或，将首先被评估，它们的结果值 - `""`- 将是实际传递给`replace`.

为了能够在匹配*后*评估表达式，您必须使用函数来延迟评估，就像您在第二个片段中所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:26:24.940

这对我来说很有意义，我的意思是如果你看这个：

```
person['$1'] 
```

您基本上是在说“给我`$1`里面的对象`person`”，在这种情况下是`undefined`. 我猜它试图在正则表达式捕获组之前评估对象。这就是为什么你有函数替换并且它在这种情况下有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T20:28:56.260

`RegExp.replace`方法尝试仅在字符串中解析`$n`表达式（以及`$&`其他几个 -[在此处](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#section_5)查找完整列表）。但是类似`person['$1']`is not a string - 它是一个表达式，可能（或可能不）被评估为字符串。只有在此评估之后，才会解析反向引用“标记”。

我想`replace`在你的情况下，回调是唯一非常正常的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T20:18:29.247

第二个正则表达式中的 $1 周围没有单引号。

# ruby-on-rails - Rails 3 Paperclip 图像未使用 Active Admin 以嵌套形式保存

> ID：11300546
> 
> 赞同：2
> 
> 时间：2012-07-02T20:14:45.507
> 
> 标签：ruby-on-rails, ruby, paperclip, activeadmin

我有模型产品和产品图片。Product_images 是一个回形针模型。产品有很多 product_images。我正在制作一个 Active Admin 表单，它上传多个图像并将这些图像显示到产品视图页面。

但是，当我保存产品时。product 表已更新，但 product_image 表未更新。没有图像被保存。

```
class Product < ActiveRecord::Base
    attr_accessible :name, :product_images_attributes 
      has_many :product_images, :dependent => :destroy
      accepts_nested_attributes_for :product_images, :reject_if => lambda { |t| t['product_image'].nil? }, :allow_destroy => true
end

class ProductImage < ActiveRecord::Base
    attr_accessible :name
    attr_accessible :image 
    belongs_to :product
    has_attached_file :image, :styles => { :small => "150x150>", :large => "320x240>" }
    validates_attachment_presence :image
end

ActiveAdmin.register Product do
form :html => { :multipart => true } do |f|
    f.inputs "Admin Details" do
      f.input :name
    end
    f.inputs "Product images" do        
        f.has_many :product_images do |p|
            p.input :image, :as => :file, :label => "Image",:hint => p.object.image.nil? ? p.template.content_tag(:span, "No Image Yet") : p.template.image_tag(p.object.image.url(:small))
            p.input :_destroy, :as=>:boolean, :required => false, :label => 'Remove image'
        end 
    end
    f.buttons
end 
```

结尾

这是控制台输出：

```
Processing by Admin::ProductsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"J0JD6esuv2P5Xvt7N3drh8MSZRQD3gSUydF/ly7qjGA=", "product"=>{"name"=>"Clark Shoes 1", "product_images_attributes"=>{"1341259410694"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x0000010673de38 @original_filename="500x_jello.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[product_images_attributes][1341259410694][image]\"; filename=\"500x_jello.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/var/folders/ho/hot88oWKF1qEWoeAWQPvUE+++TI/-Tmp-/RackMultipart20120702-415-8m58iu>>, "_destroy"=>"0"}}}, "commit"=>"Update Product", "id"=>"1"} 
```

# deployment - 蚂蚁：找不到命令

> ID：11300547
> 
> 赞同：1
> 
> 时间：2012-07-02T20:14:46.053
> 
> 标签：deployment, ant

我在运行蚂蚁时遇到了一些麻烦。这是我的问题的简化版本。我有一个 shell 脚本 script1.sh：

```
export ANT_HOME=/opt/Ant
ant -version 
```

这行得通。但是当我尝试创建另一个脚本 script2 时：

```
cd /location/of/script1
sudo -E ./script1.sh | tee log.txt 
```

我收到错误`ant: command not found.`有谁知道为什么会这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T20:56:25.020

听起来你在`PATH`之后失去了你的设置`sudo`。尝试添加`echo $PATH`以`script1.sh`查看之前和之后的值。或者只是定义`script1.sh`为

```
export ANT_HOME=/opt/Ant
${ANT_HOME}/ant -version 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:25:41.197

在不知道什么 shell 或查看更多脚本的情况下，很难准确判断发生了什么。但是，如果您希望 script2 了解 ANT_HOME，您可能需要`source`或`eval`script1。[见这里](https://stackoverflow.com/a/307145/747145)。我也知道管道'|' 导致 Bash 在子 shell 中执行操作，这在某些情况下可能会出现问题（如果您使用的是 Bash）。

编辑：仔细检查您使用的是您认为自己的 ant 版本：

```
#!/bin/bash
# Capital A here seems suspicious to me...
export ANT_HOME=/opt/Ant
echo "`${ANT_HOME}/ant -version`" 
```

# android - 许可证屏幕 关于电话 - 法律信息 - 打开许可证屏幕

> ID：11300552
> 
> 赞同：3
> 
> 时间：2012-07-02T20:15:27.907
> 
> 标签：android, licensing, android-alertdialog

试图找到 Open licenses AlertDialog 屏幕的源代码（至少它看起来像 AlertDialog）。我想在里面放一些类似的东西，但似乎找不到。有谁知道在哪里可以下载该源代码或有类似的示例可以给我看？

![在 Droid X2 上打开许可证屏幕](../Images/b0290b6af8caa56e78908c6941c2a087.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:05:51.600

设置应用程序是完成此操作的地方。请参阅此活动： [https](https://github.com/android/platform_packages_apps_settings/blob/master/src/com/android/settings/SettingsLicenseActivity.java) ://github.com/android/platform_packages_apps_settings/blob/master/src/com/android/settings/SettingsLicenseActivity.java 内容本身是在构建期间生成的。

# java - FileAppender 打开 FileHandle 但从不记录

> ID：11300554
> 
> 赞同：1
> 
> 时间：2012-07-02T20:15:40.303
> 
> 标签：java, logging, log4j

在我当前的项目中，我需要让某个任务创建自己的日志文件，与 log4j.properties 中配置的内容分开。

我尝试通过将动态创建的 FileAppender 附加到 rootLogger 来实现这一点：

```
public static void setupAnalysisLogfile(String filename) {
  PatternLayout layout 
           = new PatternLayout("%d{dd MMM yyyy HH:mm:ss,SSS} [%t] %-5p %C{1} %x - %m%n");
  if(Config.CREATE_SEPERATE_LOG)
  {
     FileAppender appender;
     try {
       String path = (Config.LOGFILE_PATH!=null)?Config.LOGFILE_PATH:filename;
       appender = new FileAppender(layout,path);
       appender.setName("Analysis Appender");
       org.apache.log4j.Logger.getLogger("my.package.hierarchy").addAppender(appender);
     } catch (IOException e) {
       org.apache.log4j.Logger.getLogger(Config.class).warn(
                                                      "Failed to create a dedicated log "
                                                      + filename, 
                                                      e);
     }
   }        
} 
```

When `Config.LOGFILE_PATH`is not null （来自命令行参数）一切正常。日志文件在指定路径中创建。

但是，当`LOGFILE_PATH is null`没有创建日志文件时，或者更确切地说，*没有任何东西写入它*。

运行程序`-Dlog4j.debug`给出：

```
log4j: setFile called: /home/tbender/.something/bytecode/OMFG_3527961e3fb1134e1d3221c000879a90ff1022b6/bytecode/OMFG-1340994475441.log, true
log4j: setFile ended 
```

当我单步执行代码并密切关注打开的文件句柄列表时，我可以看到文件句柄是在创建附加程序期间创建的。应用程序完成后，不存在任何日志文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:39:18.267

好的，最后不是 FileAppend 导致了问题，而是一段完全不相关的代码删除并重新创建了我的日志文件所在的文件夹。哦！

解决此类问题的好提示：在 linux 中使用 strace：

```
strace -tt -f -e trace=create,open,close,unlink -o strace.out java -jar yourjar.jar 
```

这将向您显示创建、打开、关闭或删除了哪些文件。您还可以包括一堆其他的东西。更多电话可以在[这里找到](http://bluemaster.iu.hio.no/edu/dark/lin-asm/syscalls.html)

# c++ - 奇怪的 C++ 语法？

> ID：11300565
> 
> 赞同：7
> 
> 时间：2012-07-02T20:16:43.417
> 
> 标签：c++, syntax

这可能是一个愚蠢的问题，但我有一个包含以下行的代码：

```
Solver *S, *STP = S = 
UseDummySolver ? createDummySolver() : new STPSolver(true); 
```

我知道三元运算符，但等号让我有点困惑。谁能给我一些解释？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-02T20:18:34.447

写出来就是

```
Solver *S;
Solver *STP;
S = UseDummySolver ? createDummySolver() : new STPSolver(true);
STP = S; 
```

虽然它非常难看，但我不建议在您的代码中这样做。

推荐的方法是这样写（使用初始化，而不是赋值）：

```
Solver *S = UseDummySolver ? createDummySolver() : new STPSolver(true);
Solver *STP = S; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-02T20:22:58.263

我会推荐这个：

```
Solver *S = UseDummySolver ? createDummySolver() : new STPSolver(true);
Solver *STP = S; 
```

它简洁，但整洁干净。

此外，它使用*初始化*，而不是*赋值*。在可能的情况下，您应该更喜欢初始化而不是赋值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-02T20:19:47.120

您正在查看链式分配。

它与以下内容相同：

```
Solver *S;
Solver *STP;
S = UseDummySolver ? createDummySolver() : new STPSolver(true);
STP = S; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T20:18:59.590

三元运算符返回一个值；根据`UseDummySolver`布尔值，它要么返回一个虚拟求解器，要么返回`STPSolver()`. 然后将返回的值存储在`STP`and中`S`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T22:19:22.533

我更喜欢这个：

```
std::unique_ptr<Solver> S (  UseDummySolver
                                  ? createDummySolver()
                                  : new STPSolver(true)  );
Solver& STP = *S; 
```

或这个：

```
std::shared_ptr<Solver> S (  UseDummySolver
                                  ? createDummySolver()
                                  : new STPSolver(true)  );
std::shared_ptr<Solver> STP = S; 
```

两者都避免了您获得的代码的一个问题：当对象离开范围时，我们不需要决定调用哪个指针`delete`（或者，实际上，`delete`根本不需要调用）。相反，我们只是等到变量离开作用域，然后`Solver`对象被自动删除。`STP`在第一种情况下，它只是在范围内访问对象的另一种方式，在第二种情况下，它是对象的独立“共同所有者”，并且两个指针都可以独立地重新分配。

# javascript - Lightbox2，由于附加文本链接而导致计数错误？

> ID：11300566
> 
> 赞同：2
> 
> 时间：2012-07-02T20:16:45.307
> 
> 标签：javascript, jquery, html, lightbox2

我在一个相当标准的实现中使用[Lightbox2](http://lokeshdhakar.com/projects/lightbox2/)：单击系列中的图像（全部带有`rel="lightbox[gallery]"`），然后它在 Lighbox 中打开，下一个/上一个箭头指向系列中的下一个和上一个图像。我还有一个指向第一张图片并打开图库的文本链接（也带有`rel="lightbox[gallery]"`）。

问题是，出于某种原因，该文本链接被计为系列中的图像。因此，当 6 个图像库加载时，它声称有 7 个图像（第一个计数两次）。更重要的是，它加载到 7 个图像 2 上，跳过第一个（无论如何都是重复的）。

如果我删除该文本链接，一切都很好。但是，当然，我不能。那么我的选择是什么？我可以使用 javascript 来启动灯箱（因此链接不算作图库中的图像）吗？无论如何，代码：

```
<script type="text/javascript" src="lightbox.js"></script>

<!-- THIS IS THE TEXT LINK. NOTE THAT IT IS IDENTICAL TO THE FIRST IMAGE LINK -->
<a href="first.jpg" title="I am image one of three" rel="lightbox[gallery]">View Gallery</a>

<!-- THESE ARE THE GALLERY IMAGES. NOTE THAT THERE ARE 6 OF THEM. WHEN GALLERY LOADS, IT WILL THINK THERE ARE 7 BECAUSE OF THE TEXT LINK ABOVE -->
<a href="first.jpg" title="I am image one of three" rel="lightbox[gallery]"><img src="first_sm.jpg"></a>
<a href="second.jpg" title="I am image two of three" rel="lightbox[gallery]"><img src="second_sm.jpg"></a>
<a href="third.jpg" title="I am image three of three" rel="lightbox[gallery]"><img src="third_sm.jpg"></a>
<a href="fourth.jpg" title="I am image four of three" rel="lightbox[gallery]"><img src="fourth_sm.jpg"></a>
<a href="fifth.jpg" title="I am image five of three" rel="lightbox[gallery]"><img src="fifth_sm.jpg"></a>
<a href="sixth.jpg" title="I am image six of three" rel="lightbox[gallery]"><img src="sixth_sm.jpg"></a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T20:42:42.913

弄清楚了！我`id`在第一张图片中添加了一个：

```
<a id="first_img" href="first.jpg" title="I am image one of three" rel="lightbox[gallery]"><img src="first_sm.jpg"></a> 
```

然后我将文本链接更改为 a `<span>`，`onClick`如下所示：

```
<span onclick="$('#first_img').click();">View Gallery</span> 
```

我将其样式设置`<span>`为看起来和行为像一个链接，瞧！

（*有时只需要写出你的问题就能得到答案！*）

# ruby-on-rails - Rails 多对多 SQLite3 错误

> ID：11300570
> 
> 赞同：2
> 
> 时间：2012-07-02T20:17:09.360
> 
> 标签：ruby-on-rails, sqlite, ruby-on-rails-3.2

我在 Rails 中创建了多对多关系，这是我的模型和迁移

```
class Channel < ActiveRecord::Base
  has_and_belongs_to_many :packages
  validates_presence_of :name
end

class Package < ActiveRecord::Base
  has_and_belongs_to_many :channels
  validates_presence_of :name
end

class CreateChannelsPackages < ActiveRecord::Migration
  def change
    create_table :channels_packages, :id => false do |t|
      t.references :channel
      t.references :package

      t.timestamps
    end
    add_index :channels_packages, :channel_id
    add_index :channels_packages, :package_id
  end
end 
```

然后我有一个多项选择，但是当我尝试保存时出现此错误

```
SQLite3::ConstraintException: constraint failed: INSERT INTO "channels_packages" ("package_id", "channel_id") VALUES (1, 1) 
```

我试图从迁移中删除索引但它没有解决它，其他人有这个问题吗？

顺便说一句，我正在使用 Rails 3.2.6 和 sqlite3 1.3.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:22:09.947

我认为 gabrielhilal 的回答并不完全正确：不推荐在连接表中使用*额外属性*，因此您需要删除迁移中的时间戳，然后它应该可以与 has_and_belongs_to_many 一起正常工作，而 has_and_belongs_to_many 本身并*没有*被弃用。

但是，如果您确实需要连接表中的其他属性，has_many :through 是可行的方法。

关于这个主题还有另一个问题有很好的答案： [Rails migration for has_and_belongs_to_many join table](https://stackoverflow.com/questions/4381154/rails-migration-for-has-and-belongs-to-many-join-table)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T23:28:12.777

我不知道这是否是您的问题的原因，但该`has_and_belongs_to_many`关联已被弃用。

根据[Rails 指南](http://guides.rubyonrails.org/association_basics.html#has_and_belongs_to_many-association-reference)：

> 已弃用在 has_and_belongs_to_many 关联中的连接表上使用额外属性。如果您需要在表上以多对多关系连接两个模型的这种复杂行为，则应使用 has_many :through 关联而不是 has_and_belongs_to_many。

我知道您没有向联接表添加任何额外属性，但尝试将迁移更改为以下，我认为这是[默认值](http://guides.rubyonrails.org/association_basics.html#updating-the-schema)：

```
class CreateChannelPackageJoinTable < ActiveRecord::Migration
  def change
    create_table :channels_packages, :id => false do |t|
      t.integer :channel_id
      t.integer :package_id

      t.timestamps
    end
  end
end 
```

# c# - 重新启动控制台应用程序

> ID：11300574
> 
> 赞同：-1
> 
> 时间：2012-07-02T20:17:30.680
> 
> 标签：c#, console-application, reboot

当程序仍然在同一个控制台中工作时，我如何像在 Java 中一样重新启动我的 C# 控制台应用程序，而不创建新的控制台。

我试图启动新应用程序`Process.UseShellExecute = false`并从新创建的进程中终止当前进程，但我可以使用它从子进程中终止父进程。我试图在创建新进程后杀死当前进程，但它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:06:11.733

没有直接的方法可以做到这一点，但是您可以模拟这种行为：

1.  将您的应用程序从控制台应用程序更改为 Windows 应用程序。
2.  为您的应用程序的第一个实例创建一个控制台
3.  启动应用程序的新实例并附加到步骤 2 中创建的控制台。
4.  退出第一个实例。

重要的是不要忘记将应用程序类型更改为 Windows 应用程序。

以下代码将重新启动应用程序，直到您按下 Ctrl+C：

```
using System;
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.Reflection;

class Program
{
    [DllImport("kernel32", SetLastError = true)]
    static extern bool AllocConsole();

    [DllImport("kernel32.dll", SetLastError = true)]
    static extern bool AttachConsole(uint dwProcessId);

    const uint ATTACH_PARENT_PROCESS = 0x0ffffffff;

    [STAThread]
    static void Main(string[] args)
    {
        if (!AttachConsole(ATTACH_PARENT_PROCESS))
        {
            AllocConsole(); 
        }
        Console.WriteLine("This is process {0}, press a key to restart within the same console...", Process.GetCurrentProcess().Id);
        Console.ReadKey(true);

        // reboot application
        var process = Process.Start(Assembly.GetExecutingAssembly().Location);

        // wait till the new instance is ready, then exit
        process.WaitForInputIdle();
    }
} 
```

# c# - 如何将所有案例合并为一个？

> ID：11300575
> 
> 赞同：7
> 
> 时间：2012-07-02T20:17:31.213
> 
> 标签：c#, switch-statement, case

```
private void makeMoleVisable(int mole, PictureBox MoleHill)
    {
        switch (mole)
        {
            case 1:
                if (p01.Image == pmiss.Image && MoleHill.Image == pHill.Image)
                {
                    molesmissed ++;
                }
                p01.Image = MoleHill.Image;
              break;
            case 2:
              if (p02.Image == pmiss.Image && MoleHill.Image == pHill.Image)
              {
                  molesmissed++;
              }
                p02.Image = MoleHill.Image;
                break; 
```

** 我有 36 个这样的案例陈述，每个案例都针对不同的图片框；如何将它们全部分组到一个案例语句中，以便我的代码更高效**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T20:19:45.783

看起来您的案例用于选择图像，然后您始终对图像应用相同的处理。

如何将图像存储在列表或字典中，使用该`mole`值检索正确的图像，然后处理该图像？

就像是

```
Dictionary<int, PictureBox> images;
var image = images[mole];
// do stuff to image 
```

如果图像都按顺序编号，则 List 的效率稍高一些。请记住，列表索引是基于 0 的。如果您从 1 开始对图像进行编号，就像您的`switch`陈述中的情况一样（*在以下示例中假设*），请记住进行相应调整。

```
List<PictureBox> images;
int index = mole - 1; // Assumes mole starts with 1, so adjust to 0-based index
var image = images[index]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T20:21:59.887

不同的`switch`是 pN 变量。不要将这些对象放在离散变量中，而是创建一个可以索引的数组：

```
var p = new [] { p01, p02, .... } 
```

然后你的代码看起来像这样：

```
if (p[mole-1].Image == pmiss.Image && MoleHill.Image == pHill.Image)
{
    molesmissed ++;
}
p[mole-1].Image = MoleHill.Image 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T20:20:25.297

您可以将您的 PictureBoxes 放入列表中，然后按索引访问它们：

```
List<PictureBox> pbs = new List<PictureBox>();
foreach(Control c in this.Controls) if( c is PictureBox ) pbs.Add( (PictureBox)c );

private void MakeMoleVisible(Int32 mole) {
    pbs[ mole ] = // whatever
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T20:27:08.167

试试这个：

```
 string ControlIdSuffix = mole < 10 ? "0" : "" + mole.ToString();
        Control[] picBoxes = this.Controls.Find("p" + ControlIdSuffix, true);
        if (picBoxes.Length > 0)
        {
            PictureBox p = picBoxes[0] as PictureBox;
            if (p != null) {
               if (p.Image == pmiss.Image && MoleHill.Image == pHill.Image)
                  molesMissed++;
               p.Image = MoleHill.Image;
            }
        } 
```

# html - SVG 使用引用外部文件的元素在 Safari 中不起作用

> ID：11300578
> 
> 赞同：3
> 
> 时间：2012-07-02T20:17:58.503
> 
> 标签：html, svg, safari, xlink

我有一个带有内联 SVG 的 HTML 文件，该文件又引用了外部 SVG 文件中带有库元素的 SVG 元素。它使用`<use>`带有`xlink:href="Library.svg#libraryShapeID"`. 它在 Opera 和 Firefox 中轻而易举，但在 Safari 中不起作用。我在这里做了一个简单的测试文件：

[http://sasq.comyr.com/Stuff/SVG/test01.html](http://sasq.comyr.com/Stuff/SVG/test01.html)

是浏览器错误还是我做错了什么？我应该如何重写它以使其也能在 Safari 中工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T22:06:12.633

There was a [bug about this on Webkit](https://bugs.webkit.org/show_bug.cgi?id=12499) but it has been fixed for the Version: 420+ BUT the bug for [Fragment identifier](https://bugs.webkit.org/show_bug.cgi?id=65344) is still not solved.

Someone gave an answer: [Importing external SVG (with WebKit)](https://stackoverflow.com/questions/5411856/importing-external-svg-with-webkit) using XMLHttpRequest. Quite unfortunate but in the meantime, I guess working.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-16T23:19:35.597

我意识到这是一个老问题。但是随着这种使用 SVG 的方法最近变得越来越流行，我编写了一个[polyfill](https://github.com/Keyamoon/svgxuse)来使这种技术在默认情况下无法加载外部 SVG 的浏览器中工作。在撰写本文时，IE9+ 不支持在使​​用元素中引用外部 SVG。我写的 polyfill 非常简单和轻量级；它检测 SVG 是否加载失败，如果是，则发送 GET 请求来获取它。然后它会将其添加到正文中。

希望对你有帮助。我将不胜感激任何反馈。

# java - 将图像添加到 jasperreport（在 iReport 中创建）后如何保持图像质量？

> ID：11300579
> 
> 赞同：5
> 
> 时间：2012-07-02T20:18:00.467
> 
> 标签：java, image, jasper-reports, ireport

自 72 小时以来，我一直在为图像问题而苦苦挣扎。每当我将图像添加到 ireport 4.6 时，图像总是模糊的，并且该模糊图像出现在 jasperreport 运行后生成的 pdf 上。谷歌搜索后，我被指向图像的 dpi。我尝试增加图像的 dpi，但似乎相同。我尝试从在线转换器保存图像的 svg 版本，并遇到了添加图像的 .svg 版本的麻烦。

我想知道它是否有窍门？有人能解释一下吗？看看我的时间表，我正式晚了一天。

感谢您阅读本文并提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:14:59.383

将此行添加到 jasperreports.properties。我发现它使报告更加清晰。

```
net.sf.jasperreports.image.dpi=300 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T01:59:37.630

JRAbstractSvgRenderer 希望这个类可以帮助到你。

你可以扩展这个类。并将其用作参数输入。

# c++ - 为什么在调用函数 snprintf 时使用 "%.24s\r\n" 而不是 "%24s\r\n"

> ID：11300587
> 
> 赞同：2
> 
> 时间：2012-07-02T20:18:30.007
> 
> 标签：c++

```
char    buff[MAXLINE];
time_t  ticks;

ticks = time(NULL);
snprintf(buff, sizeof(buff), "%.24s\r\n", ctime(&ticks)); // with . 
```

我尝试了以下行，没有发现任何区别：

```
snprintf(buff, sizeof(buff), "%24s\r\n", ctime(&ticks));  // without . 
```

我在这里错过了一些关键点吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T20:20:57.547

`%.24s`指定*最多*打印 24 个字符。

`%24s`指定*最少*打印 24 个字符。

# javascript - 文本选择扩展后如何在 iOS 中捕获选定的文本范围

> ID：11300590
> 
> 赞同：12
> 
> 时间：2012-07-02T20:18:53.113
> 
> 标签：javascript, jquery, ios, dom, safari

我正在开发一个允许用户选择一些文本、单击按钮并保存突出显示的文本的网络应用程序。这在桌面浏览器中效果很好（本示例为 chrome），但在 iOS 中，我遇到了本机文本选择问题，用户可以在其中更改所选文本。

这是显示问题的 JsFiddle（问题仅存在于 iOS 中）：http: [//jsfiddle.net/JasonMore/gWZfb/](http://jsfiddle.net/JasonMore/gWZfb/)

1.  用户开始文本选择

2.  用户展开他们的文本选择，然后单击“在上面显示选定的文本”

3.  只有第一个选择的单词“ **The** ”出现，即使我想要“**义人的道路**”

# 1 开始![开始 iOS 文本选择](../Images/53ac661baec54b0b44c7264c7744b8f4.png)

# 2 选择文本并点击按钮![展开文字](../Images/82720a3d5487a519fe431eef422bee42.png)

# 3 只有“那个”![只有](../Images/6551eff04e559ef675939460f1523b19.png)

这是我正在使用的 JS：

```
$(function() {
    $('#actionButton').click(function() {
        $('#result').text(selectedRange.toString());
    });

    $('#slipsum').on('mouseup touchend','p', function() { 
        getSelectedRange();
    });
});

var selectedRange = null;

var getSelectedRange = function() {
    if (window.getSelection) {
        selectedRange = window.getSelection().getRangeAt(0);
    } else {
        selectedRange = document.getSelection().getRangeAt(0);
    }
};​ 
```

HTML：

```
<h3>Selected Text:</h3>
<p id="result">
</p>
<br/>
<p>
    <input type="button" id="actionButton" value="Show the selected text above" />
</p>
<!-- start slipsum code -->
<div id="slipsum">
<h1>Is she dead, yes or no?</h1>
<p>Do you see any Teletubbies in here? Do you see a slender plastic tag clipped to my shirt with my name printed on it? Do you see a little Asian child with a blank expression on his face sitting outside on a mechanical helicopter that shakes when you put quarters in it? No? Well, that's what you see at a toy store. And you must think you're in a toy store, because you're here shopping for an infant named Jeb. </p>

<h1>So, you cold?</h1>
<p>The path of the righteous man is beset on all sides by the iniquities of the selfish and the tyranny of evil men. Blessed is he who, in the name of charity and good will, shepherds the weak through the valley of darkness, for he is truly his brother's keeper and the finder of lost children. And I will strike down upon thee with great vengeance and furious anger those who would attempt to poison and destroy My brothers. And you will know My name is the Lord when I lay My vengeance upon thee. </p>

<h1>I'm serious as a heart attack</h1>
<p>Do you see any Teletubbies in here? Do you see a slender plastic tag clipped to my shirt with my name printed on it? Do you see a little Asian child with a blank expression on his face sitting outside on a mechanical helicopter that shakes when you put quarters in it? No? Well, that's what you see at a toy store. And you must think you're in a toy store, because you're here shopping for an infant named Jeb. </p>

<h1>Is she dead, yes or no?</h1>
<p>Like you, I used to think the world was this great place where everybody lived by the same standards I did, then some kid with a nail showed me I was living in his world, a world where chaos rules not order, a world where righteousness is not rewarded. That's Cesar's world, and if you're not willing to play by his rules, then you're gonna have to pay the price. </p>

<h1>Is she dead, yes or no?</h1>
<p>Your bones don't break, mine do. That's clear. Your cells react to bacteria and viruses differently than mine. You don't get sick, I do. That's also clear. But for some reason, you and I react the exact same way to water. We swallow it too fast, we choke. We get some in our lungs, we drown. However unreal it may seem, we are connected, you and I. We're on the same curve, just on opposite ends. </p>
</div>
<!-- please do not remove this line -->

<div style="display:none;">
<a href="http://slipsum.com">lorem ipsum</a></div>

<!-- end slipsum code -->
​ 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T16:08:29.213

对于将来偶然发现此问题的任何人，以下是解决方案：

[http://jsfiddle.net/JasonMore/gWZfb/](http://jsfiddle.net/JasonMore/gWZfb/)

```
$(function() {
    $('#actionButton').click(function() {
        if (selectedRange) {
            $('#result').text(selectedRange.toString());
            clearInterval(timer);
        }
    });

    timer = setInterval(getSelectedRange, 150);
});

var timer = null;

var selectedRange = null;

var getSelectedRange = function() {
    try {
        if (window.getSelection) {
            selectedRange = window.getSelection().getRangeAt(0);
        } else {
            selectedRange = document.getSelection().getRangeAt(0);
        }
    } catch (err) {

    }

};​ 
```

# java - 如何将 Spring bean id 注入另一个 Spring 配置的 Bean？

> ID：11300593
> 
> 赞同：2
> 
> 时间：2012-07-02T20:19:04.680
> 
> 标签：java, spring, apache-camel

我希望能够通过引用将 bean ID 传递给另一个 bean。所以如果我有这个：

```
<bean id="specialName" class="my.SpecialBean"/>
<bean id="referenceBean" class="my.ReferenceBean">
    <property name="refId" value="<specialName.name>"/>
</bean> 
```

* * *

```
public class ReferenceBean {

    // The spring injected value of this should be 'specialName'        
    public String refId;

    // getter & setter for refId
} 
```

我需要这个的原因是，ReferenceBean 实际上是 Camel 中的路由构建器，它通过 Spring Registry 将消息定向到 SpecialBean。我是 Spring 和 Camel 的新手，所以如果这是一个构思不当的问题，我深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:27:49.333

您可以使用 Spring-EL -

```
<bean id="specialName" class="my.SpecialBean"/>
<bean id="referenceBean" class="my.ReferenceBean">
    <property name="refId" value="#{specialName.name}"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T07:20:24.887

为什么不直接将 id 静态放入 refId 那里？它以后不会改变，所以你为什么要在这里做一些复杂的事情呢？

```
<bean id="specialName" class="my.SpecialBean"/>
<bean id="referenceBean" class="my.ReferenceBean">
    <property name="refId" value="specialName"/>
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T20:22:13.177

关于什么：

```
<bean id="specialName" class="my.SpecialBean" />
<bean id="referenceBean" class="my.ReferenceBean">
    <property name="refId" ref="specialName" />
</bean> 
```

这样你的 bean 应该被注入（假设你改变了 my.SpecialBean 中的 String 属性。

然后你可以得到你想要的任何属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-07T14:38:41.450

您可以使用该`idref`元素（请参阅[Spring XML Beans Schema](https://github.com/spring-projects/spring-framework/blob/master/spring-beans/src/main/resources/org/springframework/beans/factory/xml/spring-beans.xsd#L811-L834)）：

```
<bean id="specialName" class="my.SpecialBean"/>
<bean id="referenceBean" class="my.ReferenceBean">
    <property name="refId">
        <idref bean="specialName"/>
    </property>
</bean> 
```

# mysql - MySQL“DELIMITER”关键字不起作用

> ID：11300595
> 
> 赞同：6
> 
> 时间：2012-07-02T20:19:26.783
> 
> 标签：mysql, stored-procedures, delimiter, procedures, dbvisualizer

好吧，我一直在扯这个，为什么这不起作用？

```
DELIMITER |

CREATE PROCEDURE Decrypt_pw()
    READS SQL DATA
BEGIN
  SELECT 'Hey Select';
END| 
```

它是如此基本，我很确定我使用了正确的语法，我错过了什么？

错误：

```
21:14:07  [DELIMITER - 0 row(s), 0.000 secs]  [Error Code: 1064, SQL State: 42000]  You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DELIMITER |

CREATE PROCEDURE Decrypt_pw()
    READS SQL DATA
BEGIN
  SELECT 'He' at line 1
 21:14:07  [END| - 0 row(s), 0.000 secs]  [Error Code: 1064, SQL State: 42000]  You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'END|' at line 1 
```

我正在使用最新版本的 DbVisualizer，这个问题可能出在软件本身吗？

也许我应该更好地解释自己，密码在我的数据库中加密（不用担心），这允许我解密它们，这是我正在处理的个人项目。

我正在尝试开发一个脚本，允许我运行它并设置必要的数据库、表等以使其正常工作，并且我需要一些也必须创建的 SP，我正在尝试通过mysqli_query，这甚至可能吗？

基本上它是用于 php 应用程序的“设置脚本”。

更新：似乎[这](https://stackoverflow.com/questions/4575780/how-to-insert-create-stored-procedures-in-mysql-from-php)应该可以工作，但是由于 HostGator 的人 -.- 不允许 PHP 中的对象，我不能使用对象。

我已经几乎放弃了 mysqli，因为它不起作用我正在尝试使用 shell_exec，我正在创建程序，但是当我检查 ddl 时它是空的，它正在创建空程序，但至少它正在做一些事情......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:39:30.490

这可能是软件版本问题...我尝试了您的代码，它对我来说效果很好...试试这个

```
DELIMITER //
    CREATE PROCEDURE Decrypt_pw()
            READS SQL DATA
      BEGIN
      SELECT 'Hey Select';
      END //
    DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T19:13:54.413

至少从 9.1 开始，DBVisualizer 不支持 DELIMITER 关键字。这是他们这样做的方式：[链接](http://confluence.dbvis.com/display/UG92/Executing+Complex+Statements)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-22T14:45:38.870

**绝对不是**一个优雅的解决方法......但它有效。
所有关于不炮轰的常见警告，yada yada yada。

```
// here's the core stored procedure code
$stored = <<<EOT
CREATE PROCEDURE Decrypt_pw()
    READS SQL DATA
BEGIN
  SELECT * FROM whatever;
END #
EOT;

// first, shell out to change the delimiter using mysql command-line
shell_exec('mysql -u user -ppassword -e "DELIMITER #");

// assuming $pdo is a valid PDO connection 
// send the command to create the stored procedure:
$pdo->exec($stored);

// now shell out again to change the delimiter back
shell_exec('mysql -u user -ppassword -e "DELIMITER ;"); 
```

# python - Python sql 数据库服务器

> ID：11300603
> 
> 赞同：-1
> 
> 时间：2012-07-02T20:20:15.287
> 
> 标签：python, mysql, sql

是否有纯 python sql server 实现？IE。一种使用可通过网络访问的 python 托管数据库的方法。MySql 服务器，但在 python 中。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T20:26:58.747

显然 MySql Server 不在 Python 中，所以你不能完全理解。但是有多个纯 Python 数据库，例如 Gadfly、SnakeSQL 和 Buzhug。

不知道自己想要什么，很难选择。

Gadfly 可能是纯 Python 中最成熟的 SQL 数据库，但它只支持 SQL 的一个子集。

SnakeSQL 支持更多的语言，但它的安全性要低得多。

如果您实际上不需要 SQL，那么与我尝试过的任何其他方法相比，buzhug 更快、更稳定且更易于使用。

但是，除非数据库是用什么语言编写的，否则使用 MySQL 加上它的 Python 绑定可能更有意义。

# javascript - Google Apps 脚本 - getRowIndex 不起作用

> ID：11300608
> 
> 赞同：3
> 
> 时间：2012-07-02T20:20:34.860
> 
> 标签：javascript, google-apps-script

我有两个类似的应用程序停止正常运行。两者都使用方法“getRowIndex”，并且不再使用活动行位置填充我的光标位置的变量。有没有人经历过这个？看起来 Google 改变了 getRowIndex 函数在 Google Apps 脚本中的工作方式。对此的任何帮助将不胜感激。下面是发生问题的代码的副本。

```
var sheet1 = SpreadsheetApp.getActiveSheet();
var row1 = sheet1.getActiveRange().getRowIndex(); 
```

在上面的示例中，row1 总是取值 1，就好像光标在第一行上一样，但情况并非如此。

提前感谢您抽出时间来帮助解决此问题。杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:02:10.763

前段时间出现了[一个问题，但已修复...您可以尝试](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1476&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)[此测试表](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dDlRUFc0RDc2U0UyNTRRcC1ZT2I2Y0E)，看看它是否适用于您（请参阅菜单中的 2 个测试功能）。如果不是（这不太可能发生），您可以在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中提出问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T09:37:50.940

刚刚尝试运行您的代码段，仅添加行并包装[在此电子表格中的按钮](https://docs.google.com/spreadsheet/ccc?key=0AqGkLMU9sHmLdGIySG9ycXBBeGoxdFNDUDV0akktanc)`Browser.msgBox(row1);`后面运行的函数中，并且 getRowIndex() 正在工作。

# apache-flex - Flex AS3 异步精灵 (MovieClip) 动画

> ID：11300610
> 
> 赞同：0
> 
> 时间：2012-07-02T20:20:42.027
> 
> 标签：apache-flex, flash-builder, sprite, flexbuilder, movieclip

我在 flex AS3 项目下使用 starling 框架。我有名为 Bird 的 Sprite，它使用 Altas 制作动画。

我的问题是，我的屏幕上有两只鸟，它们同时拍打。我想异步拍打。

我该怎么做，我可以给他们每个人一个起始帧号吗？谢谢..

```
public class Bird extends Sprite
{
    private var bird_mc:MovieClip;

    public function Bird(startFrame:Number = 0)
    {
        super();
        this.addEventListener(starling.events.Event.ADDED_TO_STAGE, onAddedToStage);
    }

    private function onAddedToStage(event:Event):void
    {
        this.removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        createBird_mc();
    }

    private function createBird_mc():void
    {
        bird_mc = new MovieClip(Assets.getAtlas().getTextures("Bird_"), 16);
        bird_mc.x = Math.ceil(-bird_mc.width/2);
        bird_mc.y = Math.ceil(-bird_mc.height/2);
        starling.core.Starling.juggler.add(bird_mc);
        this.addChild(bird_mc);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:02:27.757

解决方案是在添加到舞台之前设置 activeframe。

# binary - Erlang 二进制模式匹配失败

> ID：11300612
> 
> 赞同：2
> 
> 时间：2012-07-02T20:20:46.503
> 
> 标签：binary, erlang, pattern-matching, binaries

为什么这个问题会出现 badmatch 错误？我不知道为什么这会失败：

```
<<IpAddr, ":*:*">> = <<"2a01:e34:ee8b:c080:a542:ffaf:*:*">>. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T20:34:53.113

您需要指定的大小，`IpAddr`以便它可以进行模式匹配：

```
1> <<IpAddr:28/binary, ":*:*">> = <<"2a01:e34:ee8b:c080:a542:ffaf:*:*">>.
<<"2a01:e34:ee8b:c080:a542:ffaf:*:*">>
2> IpAddr.
<<"2a01:e34:ee8b:c080:a542:ffaf">> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T10:26:30.167

二进制文件的模式匹配从左到右进行，因此它将`IpAddr`在尝试下一个段之前首先匹配。在匹配之前没有回溯。默认类型变量如`IpAddr`匹配一个字节。有关正确描述和更多示例，请参阅[位语法表达式](http://www.erlang.org/doc/reference_manual/expressions.html#id77874)和[位语法](http://www.erlang.org/doc/programming_examples/bit_syntax.html)。

作为在此处使用模式匹配的替代方法，您可以考虑使用该`binary`模块。有两个功能可能对您有用：`binary:match/2/3`和`binary:split/2/3`. 这些搜索可能更适合您的问题。

作为最后一种选择，您可以尝试使用正则表达式和`re`模块。

# java - 将背景图像添加到带有圆角的 JPanel

> ID：11300616
> 
> 赞同：5
> 
> 时间：2012-07-02T20:21:10.323
> 
> 标签：java, swing, awt, jpanel

我最近刚刚扩展了 JPanel 以用于我们希望看起来更“3D”的项目。这是我的老板要求在组件上使用阴影和圆角的方式。正如许多在线示例所示，这已经完成。我是这样做的：

```
public class RoundedPanel extends JPanel
{
    protected int _strokeSize = 1;
    protected Color _shadowColor = Color.BLACK;
    protected boolean _shadowed = true;
    protected boolean _highQuality = true;
    protected Dimension _arcs = new Dimension(30, 30);
    protected int _shadowGap = 5;
    protected int _shadowOffset = 4;
    protected int _shadowAlpha = 150;

    protected Color _backgroundColor = Color.LIGHT_GRAY;

    public RoundedPanel()
    {
        super();
        setOpaque(false);
    }

    @Override
    public void setBackground(Color c)
    {
        _backgroundColor = c;
    }

    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);

        int width = getWidth();
        int height = getHeight();
        int shadowGap = this._shadowGap;
        Color shadowColorA = new Color(_shadowColor.getRed(), _shadowColor.getGreen(), _shadowColor.getBlue(), _shadowAlpha);
        Graphics2D graphics = (Graphics2D) g;

        if(_highQuality)
        {
            graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        }

        if(_shadowed)
        {
            graphics.setColor(shadowColorA);
            graphics.fillRoundRect(_shadowOffset, _shadowOffset, width - _strokeSize - _shadowOffset,
                    height - _strokeSize - _shadowOffset, _arcs.width, _arcs.height);
        }
        else
        {
            _shadowGap = 1;
        }

        graphics.setColor(_backgroundColor);
        graphics.fillRoundRect(0,  0, width - shadowGap, height - shadowGap, _arcs.width, _arcs.height);
        graphics.setStroke(new BasicStroke(_strokeSize));
        graphics.setColor(getForeground());
        graphics.drawRoundRect(0,  0, width - shadowGap, height - shadowGap, _arcs.width, _arcs.height);
        graphics.setStroke(new BasicStroke());
    }
} 
```

我正在使用以下代码创建一个测试框架：

```
public class UITest
{
    private static JFrame mainFrame;
    private static ImagePanel mainPanel;

    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                mainFrame = new JFrame();
                mainFrame.setVisible(true);

                try
                {
                    mainPanel = new ImagePanel(ImageIO.read(this.getClass().getResource("/content/diamondPlate_Light.jpg")));
                    //mainPanel.setBounds(0, 0, 800, 600);
                }
                catch(IOException e)
                {

                }
                mainPanel.setLayout(null);

                RoundedPanel rPanel = new RoundedPanel();
                rPanel.setBounds(10, 10, 200, 200);
                rPanel.setBackground(new Color(168, 181, 224));

                mainPanel.add(rPanel);

                rPanel = new RoundedPanel();
                rPanel.setBounds(220, 10, 560, 200);
                rPanel.setBackground(new Color(168, 224, 168));

                mainPanel.add(rPanel);

                rPanel = new RoundedPanel();
                rPanel.setBounds(10, 220, 770, 300);
                rPanel.setBackground(new Color(224, 168, 168));

                mainPanel.add(rPanel);

                mainFrame.setSize(800, 600);
                mainFrame.getContentPane().add(mainPanel);
            }
        });
    }
} 
```

它导致了这个（没有`JFrame`'s的背景图像`contentPane`：

![面板](../Images/396ab2adb8e50f49257babe96b972c29.png)

我真正想做的是生成带有圆角的红色、绿色和蓝色面板，但由不同的图像而不是`Color`. 我仍然想要适当的圆角，但我不确定如何做到这一点。

如果我有一个很大的纹理，我可以简单地“剪掉”一块它的大小和形状`RoundedPanel`吗？我需要对此进行评估，因为它只是在我输入时才想到的，但是如果我可以创建一个像所使用的那样的几何图形`graphics.fillRoundRect(...)`然后剪辑图像，这可能会起作用。

还有其他我想念的方法吗？我很感激你能提供的任何反馈。谢谢。

**编辑：**

根据下面所选解决方案中的想法，我得到以下结果：

![面板](../Images/09dfadb3277694f009ae46f339b37b63.png)

它需要在生产中进行成型，并且背景图像选择不当，但作为演示，以下`RoundedPanel`代码使我们得到上述结果：

```
public class RoundedPanel extends JPanel
{
    protected int strokeSize = 1;
    protected Color _shadowColor = Color.BLACK;
    protected boolean shadowed = true;
    protected boolean _highQuality = true;
    protected Dimension _arcs = new Dimension(30, 30);
    protected int _shadowGap = 5;
    protected int _shadowOffset = 4;
    protected int _shadowAlpha = 150;

    protected Color _backgroundColor = Color.LIGHT_GRAY;
    protected BufferedImage image = null;

    public RoundedPanel(BufferedImage img)
    {
        super();
        setOpaque(false);

        if(img != null)
        {
            image = img;
        }
    }

    @Override
    public void setBackground(Color c)
    {
        _backgroundColor = c;
    }

    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);

        int width = getWidth();
        int height = getHeight();
        int shadowGap = this._shadowGap;
        Color shadowColorA = new Color(_shadowColor.getRed(), _shadowColor.getGreen(), _shadowColor.getBlue(), _shadowAlpha);
        Graphics2D graphics = (Graphics2D) g;

        if(_highQuality)
        {
            graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        }

        if(shadowed)
        {
            graphics.setColor(shadowColorA);
            graphics.fillRoundRect(_shadowOffset, _shadowOffset, width - strokeSize - _shadowOffset,
                    height - strokeSize - _shadowOffset, _arcs.width, _arcs.height);
        }
        else
        {
            _shadowGap = 1;
        }

        RoundRectangle2D.Float rr = new RoundRectangle2D.Float(0, 0, (width - shadowGap), (height - shadowGap), _arcs.width, _arcs.height);

        Shape clipShape = graphics.getClip();

        if(image == null)
        {
            graphics.setColor(_backgroundColor);
            graphics.fill(rr);
        }
        else
        {
            RoundRectangle2D.Float rr2 =  new RoundRectangle2D.Float(0, 0, (width - strokeSize - shadowGap), (height - strokeSize - shadowGap), _arcs.width, _arcs.height);

            graphics.setClip(rr2);
            graphics.drawImage(this.image, 0, 0, null);
            graphics.setClip(clipShape);
        }

        graphics.setColor(getForeground());
        graphics.setStroke(new BasicStroke(strokeSize));
        graphics.draw(rr);
        graphics.setStroke(new BasicStroke());
    }
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T20:59:55.330

尝试“剪辑区域”（见`g.setClip()`通话）：

```
public static void main(String[] args) {
    JFrame f = new JFrame();
    f.setSize(new Dimension(600, 400));
    f.getContentPane().setLayout(null);
    RoundPanel rp = new RoundPanel();
    rp.setBounds(100, 50, 400, 300);
    f.getContentPane().add(rp);
    f.setVisible(true);
}

static class RoundPanel extends JPanel {
    @Override
    protected void paintComponent(Graphics g) {
        // Prepare a red rectangle
        BufferedImage bi = new BufferedImage(400, 300, BufferedImage.TYPE_INT_ARGB);
        Graphics2D gb = bi.createGraphics();
        gb.setPaint(Color.RED);
        gb.fillRect(0, 0, 400, 300);
        gb.dispose();

        // Set a rounded clipping region:
        RoundRectangle2D r = new RoundRectangle2D.Float(0, 0, 400, 300, 20, 20);
        g.setClip(r);

        // Draw the rectangle (and see whether it has round corners)
        g.drawImage(bi, 0, 0, null);
    }
} 
```

请注意 API 文档中提到的限制`Graphics.setClip`：

> 将当前剪辑区域设置为任意剪辑形状。并非所有实现 Shape 接口的对象都可以用于设置剪辑。唯一保证支持的 Shape 对象是通过 getClip 方法和 Rectangle 对象获得的 Shape 对象。

# wordpress - 重复的 wordpress 页面 - 我需要使用 .htaccess 从重复页面中删除 -2/ 后缀

> ID：11300620
> 
> 赞同：0
> 
> 时间：2012-07-02T20:21:35.847
> 
> 标签：wordpress, .htaccess, redirect, duplicates

令人沮丧，因为它看起来应该很简单。

客户在 Wordpress 中有数据混乱和大量合并页面。

domain.com/king-2 domain.com/king

是同一页。

客户希望将所有 -2 页面重定向到非 -2 页面

所以：

domain.com/king-2 -> domain.com/king

我如何使用 .htaccess 设置规则来为所有 -2 页面执行此操作？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:24:05.793

为什么不解决问题的根源而不是解决它？`post_name`您可以在(in )上运行 SQL 查找和替换`wp_posts`来修复您的 slug。

# asp.net-mvc - MVC ASP.Net 如何向视图添加第二个模型？即向带有 html 网格的页面添加下拉列表？

> ID：11300622
> 
> 赞同：2
> 
> 时间：2012-07-02T20:21:45.517
> 
> 标签：asp.net-mvc, entity-framework, drop-down-menu, model, asp.net-mvc-views

我已经能够找到很多将下拉列表添加到视图的示例，但我需要将下拉列表添加到也有 Webgrid 的视图中。这需要两种不同的模型，据我所知，每个视图只能有一个。

DDL 将由一个模型填充，而网格则由另一个模型填充。

我只是想用 ddl 中选择的数据过滤网格中显示的数据。

任何示例或文章将不胜感激。

TIA

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T20:23:38.993

创建一个`ViewModel`包含网格和`DropDownList`. 将此`ViewModel`对象用作视图的模型。

有关实现该模式的不同策略，请参阅[Steve Michelotti 的帖子。](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx)`ViewModel`

像这样的东西，例如：

```
public class MyViewModel
{
    public List<Row> RowsForGrid { get; set; }
    public SelectList ItemsForDropdown { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T20:28:35.700

由于您试图过滤网格中显示的数据，我会这样做：

在主视图中，我会调用一个`partial view`. 在您的情况下，部分视图将保存`DropDownList`数据。像这样的东西：

```
@Html.Partial("DropDownView", ViewBag.DropDownViewModel as DropDownViewModel) 
```

在您的控制器操作中，您将填充`DropDownViewModel`数据`DropDownList`并将其传递`DropDownViewModel`给`ViewBag`这样的：

```
DropDownViewModel dropDownViewModel = new DropDownViewModel();
DropDownViewModel.Items = GetDropDownData(); // Fetch the items...

ViewBag.DropDownViewModel = dropDownViewModel; 
```

**视图模型 (DropDownViewModel.cs)**

```
public class DropDownViewModel
{
    public SelectList Items { get; set; }
} 
```

**局部视图 (DropDownView.cshtml)**

```
@model DropDownViewModel

@using (Html.BeginForm("YourControllerAction", "YourControllerName", FormMethod.Get))
{       
        @Html.Label("Search")&nbsp;@Html.DropDownList("YourDataId", Model.Items, String.Empty)

        <input type="submit" value="Search" id="submit"/>
} 
```

`"YourDataId"`将是操作方法的参数，并将包含用户选择的值，如下所示：

```
public virtual ActionResult Index(int? YourDataId, GridSortOptions sort)
{
    ...
} 
```

# android - 覆盖android耳机挂钩长按

> ID：11300626
> 
> 赞同：2
> 
> 时间：2012-07-02T20:22:07.690
> 
> 标签：android

我需要覆盖 android heaset 挂钩按钮，长按会导致音乐播放器自动启动，我需要避免这种情况。

在安卓中可以吗？

我尝试：

```
@Override
public boolean onKeyLongPress(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_HEADSETHOOK) {
        return true;
    }
    return false;
} 
```

但它不起作用。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:19:08.040

可以创建自己的手势识别来解决长按问题。您可以在 KeyDown 上启动一个计时器，然后在 KeyUp 上检查该计时器以查看按键是否等于或低于您的长按时间。或者您可以使用 getEventTime 方法来执行相同的功能。如果您的问题是关于如何拦截耳机按钮的更具体的问题，我会推荐这篇文章，[允许应用程序互相播放 nice(r)：处理遥控器按钮](http://android-developers.blogspot.com/2010/06/allowing-applications-to-play-nicer.html)。

如果您需要其他类型的帮助或一些代码示例，请告诉我

# java - Java EE Glassfish 虚拟服务器 DNS 将 http://192.168.16.144:8080/MyAppCorporation-war/ 更改为

> ID：11300627
> 
> 赞同：0
> 
> 时间：2012-07-02T20:22:08.233
> 
> 标签：java, jakarta-ee, glassfish, glassfish-3

大家好，
我正在使用 Glassfish V3 在 Java EE 中开发应用程序。APP的URL有点像`localhost:8080/MyAppCorporation-war/`，不是很直观。我想知道是否可以将其更改为更有用且更容易让用户在尝试访问应用程序时记住的内容。例如，像 myeasyapp 这样的东西。如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:35:11.953

在 WEB-INF/sun-web.xml 中放：

```
<sun-web-app>
    <context-root>/this_is_my_funky_url</context-root>
</sun-web-app> 
```

# glassfish - 以编程方式检查 glassfish 是否在调试模式下运行

> ID：11300630
> 
> 赞同：0
> 
> 时间：2012-07-02T20:22:14.113
> 
> 标签：glassfish

为了提供特殊的调试信息，我想知道 glassfish 服务器是否在调试模式下运行。是否可以以编程方式检查运行模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:27:44.933

GlassFish Server 提供用于管理和监控的 REST API。您可以连接到 DAS 并解析 jvm 选项：

http://localhost:4848/management/domain/list-jvm-options.html

或者：

http://localhost:4848/management/domain/list-jvm-options.json

或者：

http://localhost:4848/management/domain/list-jvm-options.xml

希望这可以帮助！

# c++ - 使用 Visual Studio 调试时看不到 boost::optional 内容

> ID：11300631
> 
> 赞同：8
> 
> 时间：2012-07-02T20:22:27.940
> 
> 标签：c++, windows, visual-studio-2010, boost, boost-optional

如果我尝试直接查看变量，我会看到一个`?`标志。如果我创建一个调用该`is_initialized`函数的手表，我会收到以下错误：

> CXX0033：错误：OMF 类型信息中的错误

我没有找到与使用 Google 进行 Boost 有关的此错误的太多信息。

还有其他人经历过吗？`OutputDebugString`到处使用和重建都很麻烦......

**编辑**：将 Visual Studio 2010 SP1 与 Windows XP SP3 同上的所有修补程序和 Boost 1.49.0 一起使用

**更新**：这个问题来来去去，它不会一直发生；调试器可视化工具是一个很好的解决方案，我已将它们作为我的全新工具

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T00:57:50.057

您可以使用[DebuggerVisualizers](https://svn.boost.org/trac/boost/wiki/DebuggerVisualizers)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-22T17:37:23.487

使用[DebuggerVisualizers](https://svn.boost.org/trac/boost/wiki/DebuggerVisualizers)进行此转换：

**前**

[![复杂得可笑](../Images/83e69f3467489afee8abe2585338b60b.png)](https://i.stack.imgur.com/w84Lb.png)

**后**

[![简单的](../Images/ba5e10c0bf9393b88bf2adecf62da680.png)](https://i.stack.imgur.com/eDKw5.png)

PS 我试图添加这些图像以澄清接受的答案，但我的编辑被拒绝了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-02T21:39:50.800

试试这个：对于一个变量`boost::optional<Category> category`，创建一个手表：`category.get()`

# svn - SVN 无法设置 LC_CTYPE 语言环境

> ID：11300633
> 
> 赞同：64
> 
> 时间：2012-07-02T20:22:46.093
> 
> 标签：svn, locale

每当我在服务器中使用 SVN 时，我开始收到以下错误：

```
svn: warning: cannot set LC_CTYPE locale
svn: warning: environment variable LC_CTYPE is UTF-8
svn: warning: please check that your locale name is correct 
```

我的猜测是我的 svn 客户端（使用版本应用程序）和服务器 svn 可能有问题...

每当我使用此类命令时，如何使此警告从服务器上永远消失？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-07-04T09:34:13.153

检查输出

```
locale -a 
```

如果没有安装 SVN 抱怨的语言环境，那么您可以安装它。

您可能需要对 Debian 或类似系统执行以下操作：

```
sudo dpkg-reconfigure locales 
```

如果要手动配置语言环境：

```
sudo vim /etc/locale.gen # and add "en_US.UTF-8 UTF-8"
sudo locale-gen 
```

或者，如果您`locale-gen`支持一个论点（不适用于 Debian）：

```
sudo locale-gen en_GB.UTF-8
sudo locale-gen en_US.UTF-8 
```

或者，正如 Ankit 在他的[回答](https://stackoverflow.com/a/11305589/8869244)中所写：

```
export LC_ALL=C 
```

可能有效（在您当前的会话中，或在您的 .profile 中）。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-11-20T10:57:37.650

尽管将 LC_CTYPE 设置为空值对我有用，但根本原因是我的 Mac 上的应用程序终端在启动时设置了语言环境，即使我通过 SSH 连接到另一个系统也是如此。

这可以在终端 > 首选项中修复：

*   选择“配置文件”选项卡并从子选项卡中选择“高级”
*   取消选中“启动时设置语言环境变量”

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-07-03T06:31:08.297

如果要解决此问题，请手动设置“LC_ALL”变量。

要使其永久化，只需编辑文件“/etc/environment”并添加以下行：

```
LC_ALL=C 
```

保存文件并退出编辑器。为了应用它，您必须注销当前的 shell 会话。下次登录时，SVN 的问题就会消失。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-12-27T14:07:30.547

LC_ALL 和 LANG 设置对我不起作用，但 LC_CTYPE 起作用。

```
LC_CTYPE=en_US.UTF-8 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-03-07T11:15:16.143

在**Debian Jessie**上：

我跑了：

```
sudo dpkg-reconfigure locales 
```

添加并安装了缺少的语言环境。然后它起作用了。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-08-03T05:30:41.963

`SendEnv LANG LC_*` 用/etc/ssh/ssh_config注释掉这些行对我有帮助（openSUSE）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-03-20T08:27:13.470

这是由于您的系统上没有生成正确的语言环境造成的。

您希望在**/etc/locale.gen中支持的未注释行**

例如：

```
en_GB.UTF-8 UTF-8
en_US.UTF-8 UTF-8
ru_RU.UTF-8 UTF-8 
```

然后运行**​​sudo locale-gen**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-30T07:44:29.053

我们公司在使用 IntelliJ 时也遇到了这个问题。我的一个同事刚刚修好了。

对我们来说，问题`SendEnv LANG LC_*`在于`/etc/ssh/ssh_config`. 当我注释掉那行时，一切正常。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-07T10:01:43.993

对于 iTerm2：

Profiles → Open Profiles… → Edit Profiles… → Terminal → Unckeck**自动设置语言环境变量**

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-27T22:11:03.863

我发现结合几个答案会产生正确的行为。

1.  我们必须安装对正确语言环境的支持（对于 sunos 的 localadm，对于 linux 的 locale-gen）
2.  我们必须将 LC_ALL 设置为适当的语言环境

这取决于源代码树中的文件名类型。例如，我有英语、希伯来语和阿拉伯语。en_US.UTF-8 对我有用“C”本身导致我无法更新的文件。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-07-09T20:00:52.317

当我连接到远程 ssh 服务器时遇到问题（ssh 由 svnserve -> svn update 命令使用）。

原因是远程服务器没有本地服务器上 $LANG 中设置的可用语言包。

您可以通过“locale -a”查看已安装的语言包。$LANG 语言必须在远程服务器上配置。

例如

本地服务器：LANG=en_US.UTF-8

远程服务器：locale -a -> 只有 de_DE.UTF-8 可用

解决方法：只需在远程服务器上安装缺少的语言包：dpkg-reconfigure locales；

顺便说一句：选择的默认语言无关紧要。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-07-20T15:52:45.420

在 RHEL6 系统上再添加一个对我有用的选项。

`/etc/sysconfig/i18n`包含`LANG="en_US.UTF-8"`但`locale -a | grep -i en_us`显示`en_US.utf8`。

更新`/etc/sysconfig/i18n`以匹配输出后`locale -a`的问题已解决。

# javascript - 如何获取重定向页面的链接以显示在浏览器的历史记录中？

> ID：11300637
> 
> 赞同：0
> 
> 时间：2012-07-02T20:22:51.023
> 
> 标签：javascript, google-chrome, redirect, google-chrome-extension

一个网站包含一个“随机”链接，它加载一个返回 307 重定向到我们想要的 url 的 url。它工作正常：单击它并加载一个随机页面。问题是每次你点击它时，浏览器都会假设你正在加载相同的页面：所以如果你在主页上，那么你点击随机链接 5 次，然后你按回，你会被带走返回主页的方式，无法找到您刚刚查看的随机页面。我想修改此行为，以便用户可以通过后退和前进按钮访问以前的随机页面。

我不拥有该网站，所以我不能只更改重定向代码。

这是我尝试过的，所有这些都失败了。

*   预测将被重定向到的内容。虽然有些可能，但没有办法避免高达 0.1% 的点击失败，而且它对意外事件的反应非常糟糕，比如迟到一天发布的页面，更不用说坐姿结构的变化了。
*   通过 ajax 加载 307 页面。请求停止，`readystate == 2`我无法访问`location`标头。
*   取消点击事件，改为设置`location.href = random_link.href`. 这没有任何效果 - 新页面仍然没有进入历史。
*   有新的页面调用`history.pushState`。这成功地将页面添加到历史记录中，但是我找不到区分新页面和通过后退按钮打开的页面的方法，因此历史记录很快变得非常损坏。
*   保存我自己的历史`localStorage`。如上所述，我不知道何时使用后退按钮。

我正在研究一个我很确定会起作用的解决方案，包括在现有页面上的 iframe 中加载页面，并使用后台进程和消息传递来解决无法从 chrome 扩展程序进行内容注入的`window.parent`事实在 iframe 内。并使用历史 API 在地址栏中反映当前 iframe 的 URL，并在适当的位置获取后退和前进按钮以应用于当前 iframe。

虽然我很确定最后一个解决方案可以工作，但对于看似简单的问题，它是一种极其复杂和重量级的方法。所以我想在继续之前先问你们：还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:44:45.147

Have you tried storing the locations in localStorage, then hi-jacking the back button ?

I am sure you know how localStorage works, for hi-jacking the back button you can refer to this : [Is there a way to catch the back button event in javascript?](https://stackoverflow.com/questions/136937/is-there-a-way-to-catch-the-back-button-event-in-javascript)

T.

# http - 从多部分表单上传 Content-Length 标头获取文件大小

> ID：11300641
> 
> 赞同：13
> 
> 时间：2012-07-02T20:23:09.700
> 
> 标签：http, http-headers, content-length, multipartform-data

所以，我正在上传一个文件，然后下载它......但上传标题中的 Content-Length 与文件大小不匹配。我猜这个计算和传输还涉及其他一些数据，但究竟是什么？如何从 Content-Length 获得准确的文件大小？甚至可能吗？

我知道有界限，也许还有其他一些事情，但请检查一下：

```
5380216 - 5379906 = 310

"----WebKitFormBoundaryeoFyqD4zr6smwYDG".size
→ 38 
```

所以边界大小是 38... 310 有一些 5、10、31 的 LCD ......那些在任何方面都不能很好地与 38 一起工作......我迷路了！

文件大小：

```
-rw-r--r--@  1 williamcotton  staff    5379906 Jul  2 12:02 testfile-downloaded.zip
-rw-r--r--@  1 williamcotton  staff    5379906 Jun  8 14:23 testfile-uploaded.zip 
```

HTTP 标头

```
{ 
  host: 'localhost:8887',
  connection: 'keep-alive',
  'content-length': '5380217',
  'cache-control': 'max-age=0',
  origin: 'http://localhost:8887',
  'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1193.0 Safari/537.1',
  'content-type': 'multipart/form-data; boundary=----WebKitFormBoundaryeoFyqD4zr6smwYDG',
  accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
  referer: 'http://localhost:8887/',
  'accept-encoding': 'gzip,deflate,sdch',
  'accept-language': 'en-US,en;q=0.8',
  'accept-charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3' 
} 
```

tl;博士

文件大小为 5379906

内容长度报告为 5380216

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T18:58:12.450

我认为 multipart/form-data 请求的每个部分都计入主 Content-Length 标头的总体大小。

找到这个作为参考： [http ://chxo.com/be2/20050724_93bf.html](http://chxo.com/be2/20050724_93bf.html)

所以，也许在你的标题之后，你可能有：

```
----WebKitFormBoundaryeoFyqD4zr6smwYDG

Content-Disposition: form-data; name="file"; filename="testfile-downloaded.zip"; size=<file size could be here>
Content-Length: <file size could also be here>
<some other content headers>

<file data>

----WebKitFormBoundaryeoFyqD4zr6smwYDG 
```

所有这些都将计入 Content-Length 大小。

编辑

才发现我没有回答你的问题。不确定如何从请求的文件部分中提取文件大小。对不起！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-29T06:39:15.057

您收到的数据总是比您归档的要大。只需扫描文件开头和结尾的“边界”值。

参考： [HTTP 文件上传是如何工作的？](https://stackoverflow.com/questions/8659808/how-does-http-file-upload-work)

# c# - 在 C# 中强制命名参数

> ID：11300645
> 
> 赞同：43
> 
> 时间：2012-07-02T20:23:39.510
> 
> 标签：c#, .net, c#-4.0, named-parameters

C# 4 引入了一个名为[命名参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)的功能，该功能在以下场景中特别有用

```
int RegisterUser(string nameFirst, string nameLast, string nameMiddle, string email) 
```

有没有办法强制使用命名参数？也许某些属性适用于我不知道的方法或编译器开关？我想这可以使用代码检查器工具来完成，但只是想知道是否有其他方法。

ps

对于那些对为什么需要它以及为什么不使用类/结构来利用[对象初始化器](http://msdn.microsoft.com/en-us/library/bb384062.aspx)感兴趣的人来说，有些场景是不可能的。就像调用不受您控制的库或您必须遵守的奇怪代码约定一样。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-03-22T03:42:43.313

可以强制调用者始终使用命名参数。在大多数情况下，我不会这样做，因为它相当丑陋，但这取决于需要多么安全的方法使用。

这是解决方案：

```
 int RegisterUser(
#if DEBUG
      int _ = 0,
#endif
      string nameFirst = null,
      string nameLast = null,
      string nameMiddle = null,
      string email = null) { /*...*/ } 
```

第一个参数是一个不应该使用的虚拟参数（为了提高效率，它在 Release 中被编译掉了）。但是，它确保必须命名所有以下参数。

有效用法是命名参数的任意组合：

```
 RegisterUser();
    RegisterUser(nameFirst: "Joe");
    RegisterUser(nameFirst: "Joe", nameLast: "Smith");
    RegisterUser(email: "joe.smith@example.com"); 
```

尝试使用位置参数时，代码将无法编译。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-02T20:25:48.930

不，不是 C# 语言。如果提供了所有参数，它将始终接受位置参数。

您可以[构建自定义 FxCop 规则](http://www.toolheaven.net/post/Custom-FxCop-rules.aspx)或[StyleCop 规则](http://scottwhite.blogspot.dk/2008/11/creating-custom-stylecop-rules-in-c.html)来强制执行此操作 - 正如评论中所指出的，您可能会感兴趣的 StyleCop 规则（感谢 Kris）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-08-17T09:01:45.087

对不起一个无耻的插件！
我实现了一个[Roslyn 分析器](https://github.com/mykolav/require-named-args-fs)来强制使用方法的命名参数。

因此，如果您[安装 RequireNamedArgs 分析器](https://github.com/mykolav/require-named-args-fs#download-and-install)并在应使用命名参数调用的方法之前添加特殊注释：

```
//[RequireNamedArgs]
int RegisterUser(string nameFirst, string nameLast, string nameMiddle, string email) 
```

如果调用者尝试使用位置参数而不是命名，分析器将发出错误。

看看它的实际效果：[![在此处输入图像描述](../Images/2eda90263cb6817914f70e83c7f50735.png)](https://i.stack.imgur.com/mRvS5.gif)

如果您决定试一试——风险自负：）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-13T23:01:16.250

我还寻求一种强制命名参数的方法。可选参数可能很危险，尤其是当您有多个相同类型的参数时。重载几乎总是一个更安全的解决方案，但有时你有一个方法可以接受许多参数组合，因此创建 20 个重载来考虑任何可能性是矫枉过正的。

在极端情况下，始终命名参数至关重要，我将创建一个没有定义构造函数的参数类。在你的情况下，你可以这样做：

```
public class UserRegistrationArguments
{
    public string nameFirst { get; set; }
    public string nameLast { get; set; }
    public string nameMiddle { get; set; }
    public string email { get; set; }
} 
```

像这样称呼它：

```
RegisterUser(new UserRegistrationArguments { nameFirst = "Bob", nameLast = "Slob" }); 
```

您也可以像这样简化它：

```
public class UserRegistrationArguments
{
    public string nameMiddle { get; set; }
    public string email { get; set; }
}

int RegisterUser(string nameFirst, string nameLast, UserRegistrationArguments args = null) 
```

...然后这样做：

```
RegisterUser("Bob", "Slob", new UserRegistrationArguments { nameMiddle = "Teh" }); 
```

这样，您只有一个可选参数，即您的可选参数。

**编辑：** 也许我没有正确阅读 OP。您没有使用可选参数吗？如果没有，那么这个答案可能对您没有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-04T13:59:20.530

我正在使用另一种方法。在我的设置中，我有一个我一直期望的参数，然后是一堆可选的字符串，我真的想确保用户主动选择。所以我在这个列表中的第一个字符串是一个“陷阱”值，如果设置它，就会引发错误。像这样：

```
 public HtmlString Toolbar(DynamicEntity target = null, string dontRelyOnParameterOrder = Constants.RandomProtectionParameter, string actions = null, string contentType = null, object prefill = null)
    {
        if (!Enabled) return null;
        protectAgainstMissingParameterNames(dontRelyOnParameterOrder);

        var toolbar = new ItemToolbar(target, actions, contentType, prefill);

        return new HtmlString(toolbar.Toolbar);
    }

    private void protectAgainstMissingParameterNames(string criticalParameter)
    {
        if(criticalParameter != Constants.RandomProtectionParameter)
            throw new Exception("when using the toolbar command, please use named parameters - otherwise you are relying on the parameter order staying the same.");

    } 
```

希望你喜欢 ：）

# r - R：xlsx（0.4.2）包的rJava错误

> ID：11300647
> 
> 赞同：3
> 
> 时间：2012-07-02T20:23:47.480
> 
> 标签：r, apache-poi, xlsx, rjava

我正在尝试使用 xlsx 包来使用来自外部文件的信息填充电子表格。到目前为止，我已经使用 addDataFrame() 将信息放入电子表格中，并且我尝试过的所有内容都成功（字体、颜色、边框等）

现在的问题是我需要有一列超链接，为此我需要获取或创建特定的单元格（我不确定是哪个，并且都给出了相同的错误）。以下代码：

```
library(xlsx)
wb = createWorkbook(type="xlsx")
sheet = createSheet(wb, sheetName="InProduction")
createCell(1, 2) 
```

产生错误：

> .jcall(row[[ir]], "Lorg/apache/poi/ss/usermodel/Cell;", "createCell", 中的错误：RcallMethod: 无法确定对象类

在做了一些探索之后，我发现它试图调用的方法是[来自这个 API](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Row.html#getFirstCellNum%28%29)的调用：

```
minColIx <- .jcall(row[[ir]], "T", "getFirstCellNum") 
```

在我看来，它应该有效，但显然没有。任何人都可以对此有所了解吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:15:32.243

您需要先使用`createRow`或创建行，`getRows`然后才能使用`createCells`.

# shell - 将由一条线分隔的两条线转换为一条线

> ID：11300649
> 
> 赞同：1
> 
> 时间：2012-07-02T20:24:02.863
> 
> 标签：shell, sed, awk

我试图通过查看我的生产 Rails 日志文件来查找在所有 POST 请求中发送的参数。现在我只使用以下内容：

```
grep 'Started POST.*\/[fr]' log/production.log 
```

这向我显示了 POST 何时发生但不显示参数。我想做的是按照以下方式做一些事情：

1.  当遇到上面的正则表达式时，将行存储在 sed 的保持缓冲区中
2.  遇到“Parameters:”时打印保持缓冲区的内容和当前行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:27:55.420

据我了解，您需要使用正则表达式和以下行显示行。`grep`可以自己做：

```
grep -A1 'Started POST.*\/[fr]' log/production.log 
```

它`sed`看起来像：

```
sed -n '/Started POST.*\/[fr]/{N;p}' log/production.log 
```

或者如果不是所有以下行都可能包含“参数”并且您只需要它们：

```
sed -n '/Started POST.*\/[fr]/{N;/Parameters/p}' log/production.log 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T20:43:25.287

这应该可以满足您的需求：

```
sed -n '/Started POST.*\/[fr]/h;/Parameters/{H;g;p;q}' 
```

它保存第一行并打印它和包含“参数”的行。只打印第一组行。

# python - 如何在 mplot3d 中缩放轴

> ID：11300650
> 
> 赞同：26
> 
> 时间：2012-07-02T20:24:10.913
> 
> 标签：python, numpy, matplotlib

我似乎找不到有关使用 matplotlib 在 3d 图像中缩放轴的能力的文档。

例如，我有图像：

![3dplot](../Images/44e7959eeaf0077887f60760dae19002.png) 并且轴有不同的比例。我希望他们是统一的。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-02T20:32:20.037

通常，您最容易包含一些生成图像的代码，这样我们就可以看到您尝试过的内容以及代码的一般设置。话虽如此，包含以下内容应该有效：

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import pyplot as plt

fig = plt.figure()
ax = Axes3D(fig)
ax.set_xlim3d(0, 1000)
ax.set_ylim3d(0, 1000)
ax.set_zlim3d(0, 1000) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-12-06T12:57:43.550

以下设置当前坐标区限制的框纵横比以实现“相等”行为[[来源]](https://github.com/matplotlib/matplotlib/issues/17172#issuecomment-830139107)：

```
ax.set_box_aspect([ub - lb for lb, ub in (getattr(ax, f'get_{a}lim')() for a in 'xyz')]) 
```

# c++ - 静态数据成员初始化

> ID：11300652
> 
> 赞同：23
> 
> 时间：2012-07-02T20:24:41.083
> 
> 标签：c++, c++11, g++

为什么静态数据成员初始化必须在类之外？

```
class X
{
public:
      int normalValue = 5; //NSDMI
      static int i;
};

int X::i = 0; 
```

为什么静态数据成员（这里是“i”）只是一个声明，而不是一个定义？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-02T21:16:26.503

区分表示其初始值是什么的*初始化程序和**定义*是很重要的。这个修改后的代码是有效的，在类定义中有初始化器：

```
class X
{
public:
  int normalValue = 5;
  static const int i = 0;       // declaration, with initializer
};

const int X::i;                 // definition 
```

即必须在类之外的是定义，而不是初始化。

这是因为变量必须在内存中有一个地址（除非它仅在有限的情况下使用，例如在编译时常量表达式中。）

非静态成员变量存在于它所属的对象内部，因此其地址取决于包含它的对象的地址。每次创建新变量`X`时，也会创建一个新`X::normalValue`变量。非静态数据成员的生命周期从类的构造函数开始。NSDMI 语法与变量在内存中的地址没有任何关系，它只是允许您在一个地方提供一个初始值，而不是在每个构造函数中使用显式构造函数初始化列表重复它。

另一方面，静态成员变量不包含在类的实例中，它独立于任何单个实例而存在，并且从程序开始就存在于固定地址处。为了让静态成员变量（或任何其他全局对象）获得唯一地址，链接器必须在一个对象文件中准确地看到静态变量的一个定义，并为其分配一个地址。

因为静态变量只需要一个目标文件中的一个定义，所以允许在类中提供该定义是没有意义的，因为类定义通常存在于头文件中并且包含在多个目标文件中。所以虽然你可以在类中提供一个初始化器，你仍然需要在某个地方定义静态数据成员。

`extern`你也可以像声明一个变量一样看待它：

```
namespace X {
  extern int i;
} 
```

这声明了变量，但程序中必须有一个定义：

```
int X::i = 0; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T20:43:50.883

您需要为静态数据成员（如果它的*odr-used*，如 C++11 中定义的那样）提供单独的定义，因为该定义应驻留在某处 - 在一个且只有一个翻译单元中。静态类数据成员基本上是在类范围内声明的全局对象（全局变量）。编译器希望您选择一个特定的翻译单元来保存每个全局对象的实际“主体”。您必须决定将实际对象放置到哪个翻译单元。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T20:32:58.070

“静态”类成员就像一个全局分配的变量（它与单个类实例无关），因此它必须像任何符号一样驻留在某个目标文件中（并在“.cpp”文件中声明）全局变量。

简单类成员（非静态）驻留在为类实例分配的内存块中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T20:50:44.970

原因很简单，因为类通常在*头*文件中声明，而这些头文件通常包含在多个 cpp 文件中。静态数据成员具有外部链接，并且必须在一个翻译单元中声明，这使得它们不适合在类中定义。

正如 juanchopanza 指出的那样，以下是允许的：

```
struct A
{
    const static int i = 1;
}; 
```

然而，这只是一个*声明*而不是一个定义。如果您要在`i`某处使用 's 地址，您仍然需要定义它。例如：

```
f(int);
g(int&);

X<A::i> x; // Okay without definition for template arguments
char a[A::i]; // Okay without definition, just using value as constant expression
&A::i; // Need a definition because I'm taking the address
f(A::i); // Okay without definition for pass by value
g(A::i); // Need a definition with pass by reference 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T20:41:28.053

当编译器从一个单元（极端简化：一个 cpp 文件及其所有包含的头文件）生成二进制代码时，它将为静态变量发出一个符号，并最终为该变量发出初始化代码。

静态变量符号可以在多个单元中声明，但不能多次初始化。

因此，您必须确保仅针对单个单元发出初始化代码。这意味着静态变量必须在一个单元中定义。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-02T20:53:30.597

请记住，如果静态数据成员是 const 枚举类型的 const 整数类型，则可以在声明时对其进行初始化：

来自 C++03 标准，§9.4.2

> 如果静态数据成员是 const 整型或 const 枚举类型，则其在类定义中的声明可以指定一个常量初始化器，该常量初始化器应为整型常量表达式 (5.19)

```
struct Foo {
  static const int j = 42; // OK
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-20T14:02:12.473

静态数据成员

```
#include<iostream.h>
#include<conio.h>

class static_var
{

static int count; //static member of class
public :

void incr_staticvar()
{
count++;
}

void outputc()
{ 
cout<<"Value of Static variable Count :- "<<count<<endl;
}
};

int static_var::count;

void main()
{
clrscr();
static_var obj1,obj2,obj3,obj4;

obj1.incr_staticvar();
obj2.incr_staticvar();
obj3.incr_staticvar();
obj4.incr_staticvar();

cout<<"\nAfter Increment of static variable by Four Different objects is :-\n";

obj1.outputc ( );
obj2.outputc ( );
obj3.outputc ( );
obj4.outputc ( );

getch();
} 
```

# android - 滚动时ListView背景黑色

> ID：11300653
> 
> 赞同：1
> 
> 时间：2012-07-02T20:24:42.317
> 
> 标签：android, xml, listview, layout

我目前在我的应用程序中使用片段，其中我有一个列表视图。当我滚动它变成黑色，我不知道如何摆脱它。

我查看了这个页面： [滚动时背景 ListView 变黑](https://stackoverflow.com/questions/2833057/background-listview-becomes-black-when-scrolling)

这不起作用......还有其他想法吗？（这是一个结合了图片和文字的列表视图）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T08:54:55.467

你可以这样设置

```
 <ListView 
         android:id="@+id/list01" 
         android:layout_height="fill_parent"
         android:layout_width="fill_parent"
         android:focusable="true"    
         android:fastScrollEnabled="true"
         android:focusableInTouchMode="true"
         android:transcriptMode="normal"
         android:cacheColorHint="@android:color/transparent"
         android:scrollingCache="false" 

         /> 
```

或者可以这样设置

```
list.getDrawingCache(false);
list.setScrollingCacheEnabled(false);  
list.setCacheColorHint(Color.TRANSPARENT); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T13:08:04.353

or you can also set attribute

```
android:cacheColorHint="@android:color/transparent"
android:scrollingCache="false" 
```

in List View.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-14T11:48:17.300

你也可以试试这个

```
android:cacheColorHint="#00000000" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T08:50:18.553

```
<ListView
            android:id="@+id/listtask"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginTop="15dp"
            android:background="@drawable/back"
            android:divider="@drawable/divider"
            android:dividerHeight="1dp"
            android:padding="5dp"
            android:cacheColorHint="@android:color/transparent"
            android:scrollingCache="false" >
        </ListView> 
```

# javascript - 在redis中存储node.js setTimeout的返回值

> ID：11300654
> 
> 赞同：14
> 
> 时间：2012-07-02T20:24:43.457
> 
> 标签：javascript, node.js, redis, settimeout

我`setTimeout`在 Node.js 中使用，它的行为似乎与客户端不同`setTimeout`，因为它返回一个对象而不是数字。我想把这个存储在redis中，但是由于redis只存储字符串，所以我需要将对象转换为字符串。但是，使用`JSON.stringify`会引发循环引用错误。如果我希望能够从 redis 中获取并调用`clearTimeout`它，如何将这个对象存储在 redis 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:35:10.393

您不能将对象存储在 Redis 中。该`setTimeout`方法返回一个处理程序（对象引用）。

一种想法是在内存中创建自己的关联数组，并将索引存储在 Redis 中。例如：

```
var nextTimerIndex = 0;
var timerMap = {};

var timer = setTimeout(function(timerIndex) {
    console.log('Ding!');

    // Free timer reference!
    delete timerMap[timerIndex];
}, 5 * 1000, nextTimerIndex);

// Store index in Redis...

// Then, store the timer object for later reference
timerMap[nextTimerIndex++] = timer;

// ...
// To clear the timeout
clearTimeout(timerMap[myTimerIndex]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T22:43:06.230

我试图做和 OP 一样的事情。我的解决方案是在断开连接处理程序中对超时内的新键进行条件检查来设置超时：

```
redis.hset("userDisconnecting:" + userId, "disconnect", 1);

setTimeout(function() {
    redis.hget("userDisconnecting:" + userId, "disconnect",
     function(err, result) {
        if (result.toString() === "1") {
           //do stuff, like notify other clients of the disconnect.
        }
    });
}, 10000); 
```

然后，当客户端再次连接时，我将该键设置为`0`，因此在真正断开连接时需要触发的东西不会发生：

```
redis.hset("userDisconnecting:" + userId, "disconnect", 0); 
```

超时本身在服务器重新启动时不会持续存在，但您可以通过在启动时启动清扫器方法来解决这个问题。连接的客户很快就会“在线”回来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-24T05:49:04.560

在较新版本的 node 中，您可以使用对象的 Id`Timeout`而不是对象本身来结束循环。

```
 redisClient.set('time', JSON.stringify(10))
   let timeoutObject = setInterval(async function(){
      let time = await JSON.parse(redisClient.get('time'))
      if(time === 0){
       let intervalId = await JSON.parse(redisClient.get('intervalId'))
       clearInterval(intervalId)
      }
       time -= 1
       redisClient.set('time', JSON.stringify(time))
    }, 1000)

    let intervalId = timeoutObject[Symbol.toPrimitive]()
    redisClient.set('intervalId', JSON.stringify(intervalId)) 
```

这只是一个使用`setInterval`和`redis`组合构建的计时器的示例。如您所见，您可以获取 Timeout 对象的 Id 并将其存储以结束 setInterval 的执行，而不是尝试存储整个对象。

这是节点文档的链接：[https ://nodejs.org/api/timers.html#timers_timeout_symbol_toprimitive](https://nodejs.org/api/timers.html#timers_timeout_symbol_toprimitive)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T21:57:55.967

当超时不需要在服务器重新启动时保持不变时使用此代码

```
var timeouts = {};

app.get('/', function (req, res) {
  var index = timeouts.length;
  timeouts[index] = setTimeout(console.log, 1000000, req.user.name);

  redis.set('timeout:' + req.user.name, index, function (err, reply) {
    res.end();
  });
});

app.get('/clear', function (req, res) {
  redis.get('timeout:' + req.user.name, function (err, index) {
   clearTimeout(timeouts[index]);
   delete timeouts[index];
   redis.delete('timeout:' + req.user.name);
   res.end();
  });
}); 
```

如果您需要在服务器重新启动时保持超时，那么您可能需要为 redis 中的每个计时器存储`_idleStart`和`_idleTimeout`值，并在每次服务器重新启动时加载它们

```
app.get('/', function (req, res) {
  var timeout = setTimeout(console.log, 1000000, req.user.name);
  var time = timeout._idleStart.getTime() + timeout._idleTimeout;

  redis.set('timeout:' + req.user.name, time, function (err, reply) {
    res.end();
  });
});

app.get('/clear', function (req, res) {
  redis.delete('timeout:' + req.user.name);
  res.end();
});

// Load timeouts on server start
// *I know this is not the correct redis command*
// *It's not accurate, only approx*
redis.get('timeout:*', function (err, vals) {
  vals.forEach(function (val) {
    var time = val - new Date().getTime();
    setTimeout(console.log, time, username)
  });
}); 
```

# java - 从需要 SSL 证书的 WSDL 创建 Web 服务客户端

> ID：11300655
> 
> 赞同：1
> 
> 时间：2012-07-02T20:24:51.057
> 
> 标签：java, eclipse, web-services, ssl, wsdl

我需要使用 Eclipse 中的 Apache CXF 2.x 从以下 WSDL 创建一个 Web 服务客户端：

[https://test.timbrado.com.mx/cfdi/wstimbrado.asmx?WSDL](https://test.timbrado.com.mx/cfdi/wstimbrado.asmx?WSDL)

问题是 Web 服务需要 SSL 证书才能正常工作。

我已经在我的机器中安装了证书，将证书添加到位于 ${jdk_home}/jre/lib/security/ 的 Java 密钥库（cacerts）中，但我不知道如何在 eclipse 中安装此证书。

在尝试创建 Web 服务客户端时，我编写了 WSDL 的 URL 并收到以下错误：

> “选择的服务定义无效”

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T21:02:12.563

手动下载 WSDL，然后从下载的文件中生成 Web 服务。

# javascript - 为 Jqueryui datepicker 设置默认日期

> ID：11300657
> 
> 赞同：0
> 
> 时间：2012-07-02T20:25:05.440
> 
> 标签：javascript, jquery, jquery-ui

我有一个用于生成报告的简单表单，我正在向其中添加 jqueryUI datepicker。我遇到的问题是当我尝试使用来自用户的信息重新填充字段时。

Jquery 似乎正在重置我的日期字段的默认值（目前，它在 7 月选择了 2 个不同的日期）。如何将其设置回用户提交的值？

我当前的代码：

```
<form method="post" action="">
        Username: <input type="text" size="12" name="username" required  value="foo" />
        Password: <input type="password" size="12" name="password" required value="bar" />
        Start Date: <input id="startdate" type="text" size="12" name="startday" required  value="06/28/2012" />
        End Date: <input id="enddate" type="text" size="12" name="endday" required  value="06/30/2012" />

        <script type="text/javascript">
            $(function(){
                $("#startdate").datepicker();
                $("#enddate").datepicker();
            });
        </script>
        <input type="submit">
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:26:39.840

如果该字段为空白，则设置在首次打开时突出显示的日期。通过 Date 对象或当前 dateFormat 中的字符串指定实际日期，或从今天开始的天数（例如 +7）或值和句点字符串（'y' 表示年份，'m' 表示月份， 'w' 表示几周，'d' 表示几天，例如 '+1m +7d'），或者 null 表示今天。

使用指定的 defaultDate 选项初始化日期选择器。

```
$( ".selector" ).datepicker({ defaultDate: +7 }); 
```

在 init 之后获取或设置 defaultDate 选项。

```
//getter
var defaultDate = $( ".selector" ).datepicker( "option", "defaultDate" );

//setter
$( ".selector" ).datepicker( "option", "defaultDate", +7 ); 
```

[http://jqueryui.com/demos/datepicker/#option-defaultDate](http://jqueryui.com/demos/datepicker/#option-defaultDate)

小提琴：http: [//jsfiddle.net/iambriansreed/gMNrZ/](http://jsfiddle.net/iambriansreed/gMNrZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:28:14.170

您可以在填充日期时执行此操作：

```
$( "#startdate" ).datepicker( "setDate" , date ); 
```

看到[这个](http://jqueryui.com/demos/datepicker/#method-setDate)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:19:06.190

[http://docs.jquery.com/UI/Datepicker#option-minDate](http://docs.jquery.com/UI/Datepicker#option-minDate)

```
 var dateOptions = { 
  dateFormat: "mm/dd/yy", 
  constrainInput: true, 
  gotoCurrent: true, 
  minDate: new Date()
  };

  $('.date').datepicker(dateOptions); 
```

# php - 使用 PHP 制作链接列表

> ID：11300658
> 
> 赞同：4
> 
> 时间：2012-07-02T20:25:22.820
> 
> 标签：php, arrays, url, hyperlink, echo

我想知道如何在我的页面上显示一个显示名称的链接列表，但是当您单击它时，它会导航到该链接。

我目前知道如何使用 foreach 命令和数组制作列表并显示其中的项目，但是有没有办法可以制作它，所以我有一个数组，包含一个数组，包含链接的名称和链接本身，像这样：

```
$links = array(array("Google","//google.co.uk"),array("Bing","//bing.co.uk"))
foreach ($links as $myurl){
foreach ($myurl as $url){
echo "<a href='".$url."'>".$myurl."</a>";
}}; 
```

我知道上述方法不起作用，但如果有人可以帮助解决这个问题，我们将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T20:28:09.430

```
$links = array('Google' => 'www.google.com', 'Yahoo' => 'www.yahoo.com');

foreach($links as $k => $v) {
  echo '<a href="//' . $k . '">' . $v . '</a>'; 
} 
```

如您所见，我没有指定`http`or `https`，`//`两者都适用！请参阅：http: [//google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml](http://google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml)

您可以添加以下链接`$links`：

```
$links['stackoverflow'] = 'www.stackoverflow.com'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T20:31:43.733

```
$links = array(
array("Google","//google.co.uk"),
array("Bing","//bing.co.uk")
);

foreach ($links as $urlitem){ 
echo "<a href='".$urlitem[1]."'>".$urlitem[0]."</a>";
} 
```

# excel - Excel VBA循环使用标准和2张

> ID：11300661
> 
> 赞同：0
> 
> 时间：2012-07-02T20:25:32.487
> 
> 标签：excel, vba, loops

我正在尝试做一些我真的不知道该怎么做的事情。

我有 2 个电子表格 sheet1 和 sheet2

在表 1 上，我有
A 列一个数字列表 (SalespersonsID)
B 列是表 2 上 B 列的总和

```
SalespersonID | Total sales
--------------+------------
            1 | 
            2 | 
```

在工作表 2 上，我有
A 列有 salespersonsID
列 B 有多少小部件在该交易中由销售人员出售
列 C 有 TypeofWidget
列 D 有位置

```
SalespersonID | Units sold | Type | Location
--------------+------------+------+-----------
            1 |          1 | Foo  | London
            1 |          2 | Bar  | London
            2 |          4 | Foo  | Berlin
            1 |          1 | Bar  | Madrid 
```

我不知道该怎么做，但我需要插入销售员使用 Sheet2 的 C 和 D 列以及工作表 1 的销售 ID 作为标准销售的小部件总数，并将其插入 Sheet1 的 B 列？

```
SalespersonID | Total sales
--------------+------------
            1 |           4
            2 |           4 
```

我可以使用 SumIFS 函数在单元格中执行此操作，但我总共有 5 张纸要处理超过 500 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:38:52.433

这是一个执行所需工作的 vba 子程序，只需将其放入 vba 并运行：

```
sub totalSales()
  Dim i As Integer 'used to loop on sheet1
  Dim j As Integer 'used to loop on sheet2
  Dim spID As Integer 'the SalepersonID in Sheets1
  Dim spID2 As Integer 'the SalepersonID in Sheets2
  Dim rows1 as Integer 'rows count in sheet1
  Dim rows2 as Integer 'rows count in sheet2
  Dim total as Integer 'to count sales per person

  'getting rows count
  rows1=Worksheets("sheet1").Cells(Rows.Count, "A").End(xlUp).Row 'rows count in sheet1
  rows2=Worksheets("sheet2").Cells(Rows.Count, "A").End(xlUp).Row 'rows count in sheet2

    For i = 1 To rows1 
        spID =  Worksheets("sheet1").Cells(i, "A").Value) 'the salepersonID
        total=0 'initializing counter
        for j= 1 to rows2
            spID2 =  Worksheets("sheet2").Cells(j, "A").Value 
            If (UserID=UserID2) Then
                total = total + Worksheets("sheet2").Cells(j, "B").Value
            End If
        next j
        Worksheets("sheet2").Cells(i, "B").Value = total ' Storing the total in sheet1
    next i

End Sub 
```

# c++ - 推力中的移位向量

> ID：11300662
> 
> 赞同：1
> 
> 时间：2012-07-02T20:25:37.640
> 
> 标签：c++, cuda, gpgpu, thrust

我正在研究一个涉及在线（流）数据的项目。我想使用该数据的滑动窗口。例如，假设我想在我的向量中保存 10 个值。当值 11 出现时，我想删除值 1，将所有内容移过来，然后将值 11 放在值 10 所在的位置。

很长的路是这样的：

```
int n = 9;
thrust::device_vector<float> val;
val.resize(n+1,0);

// Shift left
for(int i=0; i != n-1; i++){
   val[i] = val[i+1];
}

// add the new value to the last position
val[n] = newValue; 
```

有没有一种“快速”的方法可以用推力做到这一点？我正在查看的项目将有大约 500 个向量需要同时完成此操作。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:23:44.900

正如我所说，[环形缓冲区](http://en.wikipedia.org/wiki/Ring_buffer)是您所需要的。无需移到那里，只需一个计数器和一个固定大小的数组。

让我们考虑一下如何处理 500 个环形缓冲区。

如果您想拥有 500 个（假设为 512 个）滑动窗口并在 GPU 上处理它们，那么您可以将它们打包成一个大的 2D 纹理，其中每一列都是同一时刻的一组样本。

如果您一次为每个向量获取新样本（我的意思是在一个处理步骤中为每个 512 个缓冲区提供一个新样本），那么这个“环形纹理”（如圆柱体）只需要更新一次（上传每个步骤中的新样本数组），您只需要一个计数器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:04:46.363

我强烈建议使用不同的但仍然免费的库来解决这个问题。在 4 行[ArrayFire](http://accelereyes.com/arrayfire)代码中，你可以做所有 500 个向量，如下：

```
array val = array(window_width, num_vectors);
val = shift(val, 0, 1);
array newValue = array(1,num_vectors);
val(span,end) = newValue; 
```

我对 Thrust 代码进行了相同的基准测试，ArrayFire 比 Thrust 获得了大约 10 倍的加速。

缺点是 ArrayFire 不是开源的，但对于这类问题它仍然是免费的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T12:28:12.273

想要你想要的简直就是`thrust::copy`。您不能并行进行原地移位，因为您不能保证在写入之前读取值。

```
int n = 9;
thrust::device_vector<float> val_in(n);
thrust::device_vector<float> val_out(n+1);

thrust::copy(val_in.begin() + 1, val_in.end(), val_out.begin());

// add the new value to the last position
val_out[n] = newValue; 
```

# java - Java：如何使用 Ctrl+V 命令将剪贴板上的文本粘贴到 UI 对象中？

> ID：11300673
> 
> 赞同：3
> 
> 时间：2012-07-02T20:26:53.453
> 
> 标签：java, clipboard

我正在使用 Java 中的 Selenium WebDriver – 如何执行`Ctrl+V`命令将剪贴板上已经存在的文本粘贴到编辑框中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:05:53.590

首先，如果 java 应用程序作为 applet 或 JNLP 运行，则需要对其进行签名。JRE 沙箱不允许 system.copy 粘贴缓冲区与您的程序共享。但是，如果您正在运行存储在本地文件系统上的 jar 文件，这不是问题。

要访问复制粘贴缓冲区，您可以尝试包 java.awt.datatransfer 中的类您可以在此处找到使用示例： [http ://www.javapractices.com/topic/TopicAction.do?Id=82](http://www.javapractices.com/topic/TopicAction.do?Id=82)

复制和粘贴实际上非常复杂，因为不同的应用程序可以允许传输不同类型的数据。这种复杂性由 DataFlavor 处理。看：

[https://blogs.oracle.com/JavaFundamentals/entry/transferring_text_through_the_clipboard](https://blogs.oracle.com/JavaFundamentals/entry/transferring_text_through_the_clipboard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:00:22.330

这是一种方法...

```
public static void main(String[] args) {

    final JTextField textField = new JTextField(25);
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.add(textField, BorderLayout.NORTH);
    frame.add(new JButton(new AbstractAction("Paste") {

        public void actionPerformed(ActionEvent e) {
            Action pasteAction = TransferHandler.getPasteAction();
            ActionEvent actionEvent = new ActionEvent(textField, 0, "paste");
            pasteAction.actionPerformed(actionEvent);
        }
    }), BorderLayout.SOUTH);

    frame.setSize(300, 500);
    frame.setVisible(true);
} 
```

# javascript - javascript 本地存储

> ID：11300681
> 
> 赞同：1
> 
> 时间：2012-07-02T20:27:38.197
> 
> 标签：javascript

所以，这是我的代码：

```
localStorage.setItem("nhac",for(p=0;p<opener.document.getElementsByName('link').length;p++){opener.document.getElementsByName('link').item(p).style.backgroundColor}) 
```

我很困惑，我无法再思考xD，我整天都在努力使这项工作，我什至无法解释，对不起。我有一个从主页打开的弹出窗口。从弹出窗口中，我检索要保存背景颜色的元素，因此，通过将其保存在本地存储中，它将始终保持不变。我做过其他效果很好的，像这样

```
localStorage.setItem("color_chosen2", opener.document.getElementById('header').style.color); 
```

我不知道为什么它不起作用，有人可以帮助我吗？它给了我某种错误（第一个）

谢谢

编辑：（对不起，当我发布这个时我很着急）它给出的错误是“SyntaxError：语法错误”（顺便说一下，我使用的是firefox）使用javascript控制台，这段代码

```
for(p=0;p<opener.document.getElementsByName('link').length;p++){opener.document.getElementsByName('link').item(p).style.backgroundColor} 
```

完美地返回元素的背景颜色，但是当我尝试将其用作 localStorage 中的值时，它会出错。不，语法没有问题，`localStorage.setItem`就是这样，谢谢。

Edit2：如果您需要了解它如何更好地工作，这是我的[网站](http://www.varquilha.webs.com/ "网站")。弹出窗口从底部中心的链接打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:33:54.640

您正在尝试将 for 循环设置为接受`String`. 您必须单独设置每个样式并使用唯一的键值。

另外，我不认为`item`是一种方法...

尝试这个...

```
items = opener.document.getElementsByName('link');
for ( p = 0; p < items.length; p++ ){
     localStorage.setItem( p + 'nhac', items[p].style.backgroundColor );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:33:03.627

好吧，没有人真正有效地帮助了我，但至少有 2 人试图帮助，所以谢谢。无论如何，我不知道怎么做，我有一个想法，代码现在可以工作......对任何感兴趣的人：

```
if(localStorage.getItem("color_chosen3")){
 for(p=0;p<document.getElementsByName('link').length;p++){document.getElementsByName('link').item(p).style.backgroundColor=localStorage.getItem("color_chosen3")}}} 
```

问题解决了，问题结束了……无论如何。谢谢

# android - 如何使用 ID 共享 Android 应用

> ID：11300689
> 
> 赞同：2
> 
> 时间：2012-07-02T20:27:50.367
> 
> 标签：android, share, google-play

我正在寻找一种让移动用户能够共享 Android 应用程序和 ID 的方法。

现在我知道如何共享应用程序并为此自定义文本，但是有什么方法可以在 Android Market 中拥有查询字符串（或类似的），当从那里安装时将其传递给我们的应用程序？

基本上我想做的是让某人的 ID 与应用程序一起发送，只要他们共享它，一旦其他用户点击市场上带有 ID 参数的链接，下载应用程序并获得 ID出于营销目的而嵌入应用程序中的人。

[HeyTell App](https://play.google.com/store/apps/details?id=com.heytell&hl=en)具有此类功能，但它们共享共享该应用程序的用户的名称而不是 ID。

# javascript - 在模式窗口中填充文本区域

> ID：11300690
> 
> 赞同：0
> 
> 时间：2012-07-02T20:27:54.083
> 
> 标签：javascript, jquery

这是我的代码：

```
// Open modal window with links
$('.links').colorbox({speed:100, opacity:0.75, html:'<div id="links-colorbox"><h2>Download links</h2><textarea name="links"></textarea></div>'});

// Populate textarea with links
for(i in linkList) {
    $('#links-colorbox textarea').append('http://site.com/' + linkList[i][0] + '/' + linkList[i][1] + '\n');
} 
```

问题是模式窗口中的文本区域没有被填充，可能是因为它是通过我正在使用的模式窗口插件动态插入到 DOM 中的。

有没有办法让这个工作？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:33:31.140

使用`oncomplete`回调：

```
$('.links').colorbox({
    speed:100,
    opacity:0.75,
    html:'<div id="links-colorbox"><h2>Download links</h2><textarea name="links"></textarea></div>',
    onComplete: function() {
        for(i in linkList) {
            $('#links-colorbox textarea').append('http://site.com/' + linkList[i][0] + '/' + linkList[i][1] + '\n');
        }
    }
}); 
```

# php - Chrome 20 websocket 握手

> ID：11300694
> 
> 赞同：5
> 
> 时间：2012-07-02T20:27:57.260
> 
> 标签：php, google-chrome, websocket

我正在使用 lemmingzshadow ( [web](https://github.com/lemmingzshadow/php-websocket) ) 的 PHP Websocket 服务器。到目前为止，一切都很好。

更新到 chrome 20 后，如果我想与服务器握手，则会出现此错误

```
Error during WebSocket handshake: Sec-WebSocket-Protocol mismatch 
```

来自 chrome 20 的标题

```
GET /demo HTTP/1.1
Upgrade: websocket
Connection: Upgrade
Host: gomokulive.eu:8001
Origin: http://www.gomokulive.eu
Sec-WebSocket-Key: s+AMQQu4Q10xH2AKy49byg==
Sec-WebSocket-Version: 13
Sec-WebSocket-Extensions: x-webkit-deflate-frame 
```

发回的标头：

```
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: dMCVYKkF5VRrIouWFW7EYdvfD28=
Sec-WebSocket-Protocol: demo 
```

我认为问题在于 Chrome 20 中的“Sec-WebSocket-Extensions: x-webkit-deflate-frame”标头。

知道如何让它再次工作吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-02T21:02:34.563

服务器违反了 WebSocket 协议。Chrome 很可能只是在版本 20 中更正确地遵守了该标准，这暴露了服务器中的一个错误。

问题是服务器在响应中发回了“Sec-WebSocket-Protocol”标头，但这只有在客户端在请求中发送相同的标头时才合法。如果客户端不发送 Sec-WebSocket-Protocol，那么服务器应该在响应中省略标头。

[请参阅rfc6455 第 4.2.2 节](https://www.rfc-editor.org/rfc/rfc6455#section-4.2.2)中第 22 页的 /subprotocol/ 描述

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T00:30:19.760

[php-websocket](https://github.com/lemmingzshadow/php-websocket)的快速修复方法是：

```
$response.= "Sec-WebSocket-Accept: " . $secAccept . "\r\n";
if (isset($headers['Sec-WebSocket-Protocol']))
{
    $response.= "Sec-WebSocket-Protocol: " . substr($path, 1) . "\r\n";
}
$response .= "\r\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:57:31.467

一个简单的解决方法是`Sec-WebSocket-Accept`在do_handshake时添加信息，代码如下：

```
 list($resource,$host,$origin,$key) = $this->getheaders($buffer);

    $accept = base64_encode(SHA1($key."258EAFA5-E914-47DA-95CA-C5AB0DC85B11", true));

    $upgrade  = "HTTP/1.1 101 Web Socket Protocol Handshake\r\n" .
            "Upgrade: WebSocket\r\n" .
            "Connection: Upgrade\r\n" .
            "WebSocket-Origin: {$origin}\r\n" .
            "WebSocket-Location: ws://{$host}{$resource}\r\n".
            "Sec-WebSocket-Accept: " . $accept . "\r\n\r\n";
    $this->handshakes[$socket_index] = true;

    socket_write($socket,$upgrade,strlen($upgrade)); 
```

在哪里，

`$accept = base64_encode(SHA1($key."258EAFA5-E914-47DA-95CA-C5AB0DC85B11", true));`

$key 是`Sec-WebSocket-Key`从 $buffer 得到的，你可以 print_r($buffer) 看看。

希望这可以解决您的问题..

# php - 使用 PHP 发送 HTML 电子邮件：包括 HTML 文件

> ID：11300698
> 
> 赞同：7
> 
> 时间：2012-07-02T20:28:14.720
> 
> 标签：php, html, email

我正在尝试使用 PHP 发送电子邮件。该电子邮件是包含数百行 HTML 代码的 HTML 电子邮件（在文件**email.html**中）。我不想在 PHP 中编写整个 HTML 代码。我该怎么做？我下面的方法正确吗？有更好的选择吗？

我的代码（PHP）：

```
$email_text = file_get_contents('email.html');
$headers = "From:def@gmail.com";

mail('abc@gmail.com', 'Hello', $email_text, $headers); 
```

我的电子邮件文件（email.html）：

```
<html>
     <body>
          <a href="http://google.com">Hello</a>
     </body>
</html> 
```

**我的问题：**我想发送一封显示 HTML 内容的 HTML 电子邮件。HTML 内容取自一个名为 email.html 的文件。

**注意 1：**为了清楚起见，我简化了上面的代码。原始代码具有可以正确显示 HTML 代码的标题。原始的 HTML 文件也有数百行和 CSS 样式。为了简化，我只提到了几行。

**注意 2：***使用 PHP 发送电子邮件*有很多重复项，但我找不到如何在一行 PHP 代码中包含一个大的 HTML 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T20:36:04.667

**更新更新问题：**

如果您不想在 PHP 代码中包含所有 HTML，那么 yes`file_get_contents()`是一个不错的选择。

* * *

您需要在标题中包含内容类型和 MIME 版本。这也是字符集 UTF-8。

```
$headers = "From: $from <$from_email>\r\n". 
           "MIME-Version: 1.0" . "\r\n" . 
           "Content-type: text/html; charset=UTF-8" . "\r\n"; 
```

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

# java - 如何防止 JFrame 关闭

> ID：11300700
> 
> 赞同：7
> 
> 时间：2012-07-02T20:28:20.317
> 
> 标签：java, swing, user-interface, jframe, windowlistener

我有一个 Java GUI 应用程序，使用反射和加载从中调用另一个 Java GUI 应用程序。它工作正常，唯一面临的问题是，在关闭`JFrame`调用的应用程序时，主`GUI`应用程序框架也会关闭。如何防止主应用程序（框架）关闭？

我无法更改`defaultCloseOperation`调用的应用程序，但是可以更改主应用程序。跟线程有关系吗？？

![在此处输入图像描述](../Images/96215fd220c2018c49cd16b11280229b.png)

这是我执行目标应用程序的应用程序代码

```
public class ClassExecutor{

    private ClassLoaderOfExtClass classLoader;
    private byte[][] ArrayOfClasses;
    private String[] ArrayOfBinaryNames;
    @SuppressWarnings("rawtypes")
    private ArrayList<Class> loadedClasses;
    private ArrayList<String> loadedClasesNames;
    private Object[] parameters;

    @SuppressWarnings("rawtypes")
    public ClassExecutor() {
        classLoader = new ClassLoaderOfExtClass();
        new ArrayList<Class>();
        loadedClasses = new ArrayList<Class>();
        loadedClasesNames = new ArrayList<String>();
    }

    @SuppressWarnings("unchecked")
    public void execute(File[] file, String[] binaryPaths) {
        Object[] actuals = { new String[] { "" } };
        Method m = null;
        try {
            Field classesx=ClassLoaderOfExtClass.class.getDeclaredField("classes");
            classesx.setAccessible(true);
        } catch (SecurityException e1) {
            e1.printStackTrace();
        } catch (NoSuchFieldException e1) { 
            e1.printStackTrace();
        }

        /*for (int i = 0; i < file.length; i++) {
            for (int j = 0; j < file.length; j++) {

                try {

                    @SuppressWarnings("rawtypes")
                    Class c = classLoader.loadClassCustom(file[i], binaryPaths[i]);
                //Fied classex=classLoader.getResource("classes");
                }catch(Exception e){

                }

            }
        }
        Class<?>[]classesxx= getLoadedClasses(classLoader);
        System.out.println("Loaded classes have size "+ classesxx.length);*/

        for (int i = 0; i < file.length; i++) {
            try {
                @SuppressWarnings("rawtypes")
                Class c = classLoader.loadClassCustom(file[i], binaryPaths[i]);

                try {
                    if (c.getMethod("main", new Class[] { String[].class }) != null) {
                        m = c.getMethod("main", new Class[] { String[].class });
                    } else {

                        System.out.println("This class does not contain main");
                        continue;
                    }

                } catch (NoSuchMethodException e) {
                //  System.out.println("Main not found!!!");
                    // System.out.println("M here");
                    // e.printStackTrace(); // not printing stack trace
                } catch (SecurityException e) {
                    e.printStackTrace();
                }

            } catch (ClassNotFoundException e) {
                System.out.println("No such class definition exist!!");
                // TODO Auto-generated catch block
                // e.printStackTrace();
            }

        }

        try {

            m.invoke(null, actuals);

            // CallStack.print();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    @SuppressWarnings({ "unchecked", "rawtypes" })
    public void execute(ArrayList<byte[]> stuffedFiles,
            ArrayList<String> binaryPaths) {
        convertToArray(stuffedFiles, binaryPaths);
        loadAllClasses(ArrayOfClasses, ArrayOfBinaryNames);
        Object[] actuals = { new String[] { "" } };
        Method m = null;

        /*
         * Method[] m1= new Method[10]; for (Class c : loadedClasses) {
         * m1=c.getMethods(); } for(Method m2: m1){
         * System.out.println(m2.getName()); }
         */
        /* System.out.println(loadedClasses.size()); */
        for (Class c : loadedClasses) {
            /*
             * System.out.println(c.toString());
             * System.out.println(c.getConstructors());
             */
            // for (int i = 1; i < file.size(); i++) {
            /*
             * for(Method meth : c.getMethods()){ meth.setAccessible(true);
             * 
             * }
             */

            try {
                if (c.getMethod("main", new Class[] { String[].class }) != null) {
                    m = c.getMethod("main", new Class[] { String[].class });
                    break;
                } else {

                //  System.out.println("This class does not contain main");
                    continue;
                }

            } catch (NoSuchMethodException e) {

                System.out.println("Program does not contain main");

            } catch (SecurityException e) {
                e.printStackTrace();
            }

        }

        try {

            if(parameters==null){

            m.invoke(null, actuals);
            }
            else{
                try {

                    System.out.println("It Fails Here");
                    m.invoke(null, parameters);
                } catch (Exception e) {
                    System.out.println("Illegal arguments");
                }
            }

            // CallStack.print();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T20:31:11.487

你会想要使用 DISPOSE_ON_CLOSE 操作，所以它会是`setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE)`

EXIT_ON_CLOSE 将是关闭所有窗口的选项，我相信这是您目前正在经历的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-02T20:29:38.383

您有以下选项`defaultCloseOperation`：

*   `DO_NOTHING_ON_CLOSE`- 无所事事的默认窗口关闭操作；
*   `HIDE_ON_CLOSE`- hide-window 默认窗口关闭操作；
*   `DISPOSE_ON_CLOSE`- dispose-window 默认窗口关闭操作。
*   `EXIT_ON_CLOSE`- 退出应用程序默认窗口关闭操作。尝试在支持此功能的 Windows（例如 JFrame）上设置此功能可能会引发基于 SecurityManager 的 SecurityException。建议您仅在应用程序中使用它。

该选项`DISPOSE_ON_CLOSE`可用于避免关闭所有窗口，只关闭您想要的窗口。

如果您没有像上次发布的代码那样直接访问 JFrame 对象，则可以使用[Window.getWindows()](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#getWindows%28%29)来接收所有 Windows 实例（`JFrame`它`Window`也会被列出）。然后设置`defaultCloseOperation`它。

可能您需要使用线程，因为`defaultCloseOperation`需要在调用 main 方法之后设置。

**理论上它是有效的，所以我认为这是一个好镜头；）**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T07:21:15.997

> 我不允许对正在调用的应用程序进行更改。

这是对@JeffLaJoie 的回复，只是为了澄清，它不需要对其他应用程序的代码进行*任何*更改。只需您的应用程序调用一两个额外的方法即可**。**在运行时设置第 3 方框架的关闭操作。

* * *

如果做不到这一点，我能想到的最好的解决方案是在一个单独的框架中`Process`启动一个新的 JVM，当用户关闭另一个应用程序时，它和第二个 JVM 将结束，同时离开原始应用程序。在屏幕上。

# php - 使用 PHP 登录页面时遇到问题

> ID：11300705
> 
> 赞同：1
> 
> 时间：2012-07-02T20:28:45.463
> 
> 标签：php, mysql

客户在登录此页面时遇到问题。他们被分配了一个号码，无论他们的号码是多少，他们都会得到一个空白页。如果他们输入无效密码，他们会收到无效的密码消息，所以我知道部分代码正在运行。我还在浏览器中验证了每个客户端应该去的实际目的地是否正常工作。您能提供的任何帮助将不胜感激！

```
<Doctype HTML>
<html>
<head>
<?php

//include the required functions

include(' ./includes/functions.php');

//make connection
$db = conn();

//check for username and password
if(isset($_POST['username']) && isset($_POST['password'])) {

//Query the db for the user

$result = $db->query("SELECT * FROM users WHERE username ='{$_POST['username']}'");

//fetch the result set
$row = $result->fetch_assoc();

//check credentials again the database
if ($result == true && md5($_POST['password']) == $row['password']){

//store user as seesion variable
$_SESSION['valid_user'] = $_POST['username'];

/*
* @Locations:
* /admin, /calc, /live
*
* @Authorization Levels
* 1 = production employee
* 2 = Quality tech
* 3 = Management
* 0 = not authorized
*
* @var = $row['active']
*/

if ($row['active'] == '3') {
  header('Location: ./admin/index.php ');
}
elseif ($row['active'] == 2) {
  header('Location: ./calc/index.php ');
}
elseif ($row['active'] == 1) {
  header('Location: ./live/data.php ');
}

}
elseif ($_POST['password'] != $row['password']) {
   echo ('Password Incorrect');
}

}
else
{

?>

<style type="text/css">

body
{
margin: 0;

/* IE10 */
background-image: -ms-linear-gradient(bottom, #FFFFFF 0%, #7EBC50 100%);
background-repeat: no-repeat;

/* Mozilla Firefox */
background-image: -moz-linear-gradient(bottom, #FFFFFF 0%, #7EBC50 100%);
background-repeat: no-repeat;

/* Opera */
background-image: -o-linear-gradient(bottom, #FFFFFF 0%, #7EBC50 100%);

/* Webkit (Safari/Chrome 10) */
background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #FFFFFF), color-stop(1, #7EBC50));

/* Webkit (Chrome 11+) */
background-image: -webkit-linear-gradient(bottom, #FFFFFF 0%, #7EBC50 100%);

/* Proposed W3C Markup */
background-image: linear-gradient(bottom, #FFFFFF 0%, #7EBC50 100%);

/* IE6-IE9 */
filter: progid:DXImageTransform.Microsoft.gradient(startColorStr='#7EBC50', EndColorStr='#FFFFFF');

}

#login
{
background-color: #FBFBCA;
width: 15em;
margin-right: auto;
margin-left: auto;
margin-top: 15%;
margin-bottom: auto;
border: 2px solid #3A8E00;
border-radius: 5px;
text-align: center;
padding-bottom: 1em;
box-shadow: 10px 10px 5px #888888;
-moz-box-shadow: 10px 10px 5px #888888;
}

#login .text, h4
{
color: #1C4F00;
font-family: "Helvetica Neue", "Lucida Grande", "Segoe UI", Arial, Helvetica, Verdana, sans-serif;
}

</style>

<title>LLF Lab || Login Page</title>

</head>

<body>

<div id="login">

<h4>LLF Lab Login</h4>

<form action="login.php" method="post">

<span class="text">Username:</span><br />

<input type="text" name="username"/><br />

<br />

<span class="text">Password:</span><br />

<input type="password" name="password"/>

<br />

<br />

<input type="checkbox" name="rememberme"/><span class="text">Remember me</span>

<br />

<br />

<input type="submit" value="Login" />

</form>

</div>

</body>

</html>

<?php

}//endif ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:48:22.337

将 HTML 输出到浏览器后，您正在使用 header()。移动

```
<Doctype HTML>
<html>
<head> 
```

在 PHP 代码下方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:49:36.047

`header("location: example.html")`仅在未打印任何其他内容时才有效。因为您在 之前打印文档类型（这也是不正确的`<!DOCTYPE html>`）`header()`，所以它永远不会重定向。将打开的 html 移到 php.ini 下。

# java - 集群环境中的 Spring Singleton

> ID：11300706
> 
> 赞同：4
> 
> 时间：2012-07-02T20:28:48.383
> 
> 标签：java, spring, jvm, singleton, cluster-computing

正如本文所讨论[的，在](https://stackoverflow.com/questions/1194129/singleton-in-cluster-environment)**集群**环境中不适合使用单例（因为不同的 JVM 中有多个单例对象），对于 Spring 框架创建的单例来说必须如此。

如果这是正确的，那么我们必须非常小心地使用 Spring 框架来使用单例类。你能告诉我这是否是正确的理解吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T20:59:09.700

情况不一定如此。

如果它们*共享有意义的状态*，那么在不同的 JVM 中使用单例是一个问题。例如，如果两个独立的实例存在于两个独立的应用程序服务器上，而这两个独立的应用程序服务器都是同一应用程序的一部分，那么存储和发布递增 ID 的单例将是非常危险的。

Spring 中没有任何固有的东西使这或多或少难以处理。您的 Spring bean（可能的服务）应该旨在维护尽可能少的状态作为良好实践的实际问题。如果他们需要共享状态，那么您将必须像处理任何其他共享状态一样解决此问题。

很多人在集群环境中使用 Spring，并且没有遇到与上述相关的任何问题。我就是其中之一！

# textmate2 - 为 rbenv 配置 Textmate 2

> ID：11300711
> 
> 赞同：5
> 
> 时间：2012-07-02T20:29:00.537
> 
> 标签：textmate2

设置[Textmate 2](http://blog.macromates.com/2011/textmate-2-0-alpha/)以使用[rbenv](https://github.com/sstephenson/rbenv/#readme)的最佳方法是什么？

我阅读了[有关设置 rbenv 的 Textmate 邮件列表线程，](http://article.gmane.org/gmane.editors.textmate.general/34552/match=rbenv)但尚未找到正确的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T20:29:01.317

更新你`~/.tm_properties`的包括：

```
TM_RUBY = "$HOME/.rbenv/shims/ruby"
PATH = "$HOME/.rbenv/bin:$PATH"

```

感谢 uberfork 提供这篇有用的文章：[将 rbenv 与 Textmate 集成](http://uberfork.com/post/12280974742/integrate-rbenv-with-textmate)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-26T23:12:25.583

这里提供的答案对我不起作用。这是做了什么：

1.  首选项 -> 变量
2.  将此添加到前面`PATH`：`$HOME/.rbenv/bin:$HOME/.rbenv/shims:`
3.  设置`TM_RUBY`为：`$HOME/.rbenv/shims/ruby`
4.  填充`RBENV_VERSION`您的版本。例子：`2.1.0-preview1`
5.  （并确保选中每个变量的复选框）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-07T12:39:58.390

对我来说，添加`/usr/local/var/rbenv/shims`到 TextMate 的`PATH`变量就可以了。

`PATH`TextMate 变量如下所示`/usr/local/var/rbenv/shims:$PATH:/opt/local/bin:/usr/local/bin:/usr/texbin`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-28T22:34:04.683

只是为了补充上面的所有答案 - 如果您想为每个项目使用不同的 ruby​​ 版本，只需`.tm_properites`在项目的根目录内创建一个具有正确`RBENV_VERSION`变量的新文件。

# ruby-on-rails-3 - 是否可以在 Active_Record 中多次定义“belongs_to”？

> ID：11300713
> 
> 赞同：0
> 
> 时间：2012-07-02T20:29:04.267
> 
> 标签：ruby-on-rails-3, database-design, activerecord, orm, forums

我正在尝试为镇上的一家公司编写数据库。我使用 Devise 进行身份验证，使用 Forem 进行网站论坛。我决定只为 Devise 身份验证设置一个类，“Account”，它将有许多不同的站点访问类型。

大部分用户将只是客户，它们按路线（不是 Rails 路线，街道路线）隔离。所以我决定让他们有自己的个人资料模型。

我想这样做 - 个人资料链接到帐户和路由。（路由命名为 gmr_routes）

这段代码是正确的方法吗？我发现的文档并没有告诉我我不能，但我只是想确定......

```
 class Profile < ActiveRecord::Base
      attr_accessible :first_name, :last_name, :phone_number, :street_address
        belongs_to :account
        belongs_to :gmr_route
    end 
```

Account和Profile有has_one关系，gmr_route有has_many。

这是正确的吗？

布莱恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:38:11.607

是的，这是完全可以接受的。您需要记住在任何具有belongs_to 的模型上包含外键ID。

`account_id:integer`因此，在您描述的情况下，您将`gmr_route_id:integer`在您的迁移中进行迁移，并将其包含在`attr_accessible`模型中的调用中

# jekyll - 动态包含

> ID：11300717
> 
> 赞同：9
> 
> 时间：2012-07-02T20:29:36.713
> 
> 标签：jekyll

我看过一些帖子说你只能将文字字符串传递给 Jekyll 的前端包含语句，如下所示：

```
{% include mypage.ext %} 
```

但是，我几乎每个页面都有以下 HTML 布局：

```
 <section id="feature">
        <div class="container_12">
            <div class="grid_12 alpha omega">
                {% include myfile.ext %}
            </div>
        </div>
    </section>

    <section id="main">
        <div class="container_12">
            <div class="grid_12 alpha omega">
                {{ content }}
            </div>
        </div>
    </section> 
```

为了实现我正在寻找的布局，必须在每个页面中包含这将是痛苦的。包含的文件将与当前页面相关，所以我希望有人知道某种方法来做到这一点。当然，它会是这样的：

```
{% include {{page.file}} %} 
```

我已经看到其他一些帖子说这不可能发生。

所以，我只想能够在 Jekyll 中动态加载包含。

编辑：[https ://github.com/mojombo/jekyll/issues/176](https://github.com/mojombo/jekyll/issues/176)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-16T16:35:22.517

[当该问题](https://github.com/mojombo/jekyll/issues/1464)将通过[拉取请求 #1495](https://github.com/mojombo/jekyll/pull/1495)解决时，这可能是可能的，该请求准确地提出了您正在寻找的内容：`{% include {{page.file}} %}`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T04:02:46.777

目前这是故意不可能的，因为 Jekyll 的维护者不希望项目变得*过于*动态。您可以阅读[此评论和主题](https://github.com/mojombo/jekyll/issues/176#issuecomment-11798538)以了解一些背景知识。qrush（维护者）给出的建议是使用 rails 或 sinatra。可能不是您正在寻找的答案，但这是当前状态。

如果你想使用一个插件，这里有一个可以让你这样[做](https://github.com/mojombo/jekyll/issues/176#issuecomment-6757780)

# javascript - Spring框架优化SQL连接？

> ID：11300719
> 
> 赞同：0
> 
> 时间：2012-07-02T20:29:39.647
> 
> 标签：javascript, sql, spring, database-connection

所以我在一个成功连接到 SQL 数据库并从中读取数据的 web 项目中。连接到它的代码如下所示。

```
//From Here
var connection = new ActiveXObject("ADODB.Connection") ;
var connectionstring="Data Source=<server>;Initial Catalog=<catalog>;User ID=<user>;
Password=<password>;Provider=SQLOLEDB";
connection.Open(connectionstring);
var rs = new ActiveXObject("ADODB.Recordset");
//To Here

rs.Open("SELECT * FROM table", connection);
rs.MoveFirst
while(!rs.eof)
{
document.write(rs.fields(1));
rs.movenext;
}

rs.close;
connection.close; 
```

简单有效，我让它工作正常。但是前 4 个（从这里标记到这里）运行速度非常慢，每次需要读取或写入 sql 数据库时我都必须重新连接......这对我的项目来说很多。所以每次我运行这段代码（在我在这个项目中创建的所有其他网页上）时，我都必须坐下来等待这段代码运行。

我被告知/需要该项目使用 javascript 和 spring 框架配置设计。显然有 a) 一种保持连接的方法，因此我不必每次点击转到新页面时都运行此代码，或者 b) 连接到 SQL 数据库的不同方法（替换那些 4代码行。这两个都与我使用 Spring 框架有关。

我以前从未使用过 Spring Framework，需要快速学习。一直在看他们的网站教程，但仍然不知道该做什么或如何去做。让我知道是否有任何想法。

请和谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:48:55.397

您需要连接池，这意味着不要每次都打开和关闭一个新连接，而是保留您即将关闭的连接，然后看看您是否可以在以后重用它。

不幸的是，我从未在 JavaScript 中看到任何允许您跨页面重用对象的东西，所以在 JavaScript 中没有办法做到这一点。无论如何，从浏览器直接连接到数据库被认为是一种非常糟糕的做法。

通常，您所做的是在两者之间放置一个 java 或 C# 应用程序服务器，并使用连接池让它们访问数据库。然后从您的 javascript 中对应用程序服务器进行 AJAX 调用，该应用程序服务器将使用连接池，并返回例如 JSON 对象。

参见例如[http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html#MySQL_DBCP_Example](http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html#MySQL_DBCP_Example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:27:20.093

我认为你在这里搞错了：你不应该从 JavaScript 访问你的数据库，因为任何用户都可以通过这种方式访问​​任何数据，或者删除所有内容。

您应该只访问数据库服务器端。

# php - Symfony2 查询应该针对相同的实体字段进行优化

> ID：11300720
> 
> 赞同：1
> 
> 时间：2012-07-02T20:29:39.870
> 
> 标签：php, symfony, doctrine-orm

我有三个实体`Recipe`：`RecipeIngredient`和`Ingredient`。每个`Recipe`都有很多`RecipeIngredients`。每个`RecipeIngredient`人都有一个`Ingredient`。我的*RecipeAdmin*包含一个用于编辑的集合字段`RecipeIngredients`。集合字段包含许多表单，每个表单对应一个`RecipeIngredient`。此表单包含一个实体字段，用于选择`Ingredient`. 问题是当我`RecipeIngredients`在表单上有 80 个时，Symfony 会进行 80 个相同的查询，每个字段一个。

这些查询基本上看起来像：

`SELECT (all the fields) FROM recipe_ingredients ORDER BY name`

重要的是一切都是**一样**的。我认为这不正常，我该如何优化以便只需要一个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:57:19.850

我想你可以尝试使用[ResultCache 驱动程序](http://symfony.com/doc/current/reference/configuration/doctrine.html)。

```
doctrine:
  orm:
    ..
    ..
    result_cache_driver:
      type: memcache
      host: localhost
      port: 11211
      instance_class: Memcache 
```

# c# - 将项目从一个列表框移动到另一个列表框（c# webforms）

> ID：11300723
> 
> 赞同：0
> 
> 时间：2012-07-02T20:30:04.483
> 
> 标签：c#, listbox

我遇到了一个奇怪的问题，我可以将项目从一个列表框移动到另一个列表框，但不能将任何项目移回原始列表框。这是我的代码：

```
private void MoveListBoxItems(ListBox from, ListBox to)
{
    for(int i = 0; i < first_listbox.Items.Count; i++)
    {
        if (first_listbox.Items[i].Selected)
        {
            to.Items.Add(from.SelectedItem);
            from.Items.Remove(from.SelectedItem);
        }   
    }
    from.SelectedIndex = -1;
    to.SelectedIndex = -1;
}

protected void Button2_Click(object sender, EventArgs e)
{
    MoveListBoxItems(first_listbox, second_listbox);
}

protected void Button1_Click(object sender, EventArgs e)
{
    MoveListBoxItems(second_listbox, first_listbox); 
} 
```

button2 事件可以正常工作，但是 button1 事件不能。列表框没有数据绑定，我已经手动向它们添加了项目。

也许我在这里遗漏了一些非常明显的东西？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:32:56.443

将其更改为：

```
private void MoveListBoxItems(ListBox from, ListBox to)
{
    for(int i = 0; i < from.Items.Count; i++)
    {
        if (from.Items[i].Selected)
        {
            to.Items.Add(from.SelectedItem);
            from.Items.Remove(from.SelectedItem);

            // should probably be this:
            to.Items.Add(from.Items[i]);
            from.Items.Remove(from.Items[i]);
        }   
    }
    from.SelectedIndex = -1;
    to.SelectedIndex = -1;
} 
```

您原来的方法是`first_listbox`在这两个地方使用，而不是`from`. 另外，我想如果选择了多个项目，您的代码将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:33:56.013

更改您的 for 循环以迭代本地参数`from`，而不是特别是`first_listbox`：

```
private void MoveListControlItems(ListControl from, ListControl to)
{
    for(int i = 0; i < from.Items.Count; i++)
    {
        if (from.Items[i].Selected)
        {
            to.Items.Add(from.Items[i]);
            from.Items.Remove(from.Items[i]);
        }   
    }
    from.SelectedIndex = -1;
    to.SelectedIndex = -1;
} 
```

如果要一次移动多个项目，还需要切换添加和删除。

只是另一个想法，虽然这主要是个人喜好，但如果您将参数类型切换为，您也可以对's`ListControl`使用相同的方法。`ComboBox`

# c# - UDP 跟踪器没有响应

> ID：11300733
> 
> 赞同：1
> 
> 时间：2012-07-02T20:30:54.077
> 
> 标签：c#, udp, bittorrent

好的，所以我正在尝试使用 c# 连接到 UDP 跟踪器，但我从未得到响应。我也没有收到任何错误。这是我的代码。

```
namespace UDPTester
{
    class MainClass
    {
        public static bool messageReceived = false;
        public static Random Random = new Random();
        public static void LOG(string format, params object[] args)
        {
            Console.WriteLine (format,args);    
        }
        public static void Main (string[] args)
        {
            LOG ("Creating Packet...");
            byte[] packet;
            using(var stream = new MemoryStream())
            {
                var bc = new MiscUtil.Conversion.BigEndianBitConverter();
                using(var br = new MiscUtil.IO.EndianBinaryWriter(bc,stream))
                {
                    LOG ("Magic Num: {0}",(Int64)0x41727101980);
                    br.Write (0x41727101980);
                    br.Write((Int32)0);
                    br.Write ((Int32)Random.Next());
                    packet = stream.ToArray();
                    LOG ("Packet Size: {0}",packet.Length);
                }
            }
            LOG ("Connecting to tracker...");
            var client = new System.Net.Sockets.UdpClient("tracker.openbittorrent.com",80);
            UdpState s = new UdpState();
            s.e = client.Client.RemoteEndPoint;
            s.u = client;
            StartReceiving(s);

            LOG ("Sending Packet...");
            client.Send(packet,packet.Length);
            while(!messageReceived)
            {
                    Thread.Sleep(1000);
            }
            LOG ("Ended");

        }
        public static void StartReceiving(UdpState state)
        {
            state.u.BeginReceive(ReceiveCallback,state);
        }

        public static void ReceiveCallback(IAsyncResult ar)
        {
            UdpClient u = (UdpClient)((UdpState)(ar.AsyncState)).u;
            IPEndPoint e = (IPEndPoint)((UdpState)(ar.AsyncState)).e;

            Byte[] receiveBytes = u.EndReceive(ar, ref e);
            string receiveString = Encoding.ASCII.GetString(receiveBytes);

            LOG("Received: {0}", receiveString);
            messageReceived = true;
            StartReceiving((UdpState)ar.AsyncState);
        }

    }
    public class UdpState
    {
        public UdpClient u;
        public EndPoint e;
    }
} 
```

我使用的是普通的 BinaryWriter，但这不起作用，我在某处读到它想要 BigEndian 中的数据。

这不适用于我发现的任何 UDP 跟踪器，有什么想法为什么我没有得到响应？他们是否可能更改了协议而不告诉任何人？HTTP 跟踪器都可以正常工作。

我试过的追踪器

udp://tracker.publicbt.com:80

udp://tracker.ccc.de:80

udp://tracker.istole.it:80

另外，我对使用 MonoTorrent 不感兴趣（当我使用它时，UDP 无论如何都不起作用）。

协议来源

[http://xbtt.sourceforge.net/udp_tracker_protocol.html](http://xbtt.sourceforge.net/udp_tracker_protocol.html)

[http://www.rasterbar.com/products/libtorrent/udp_tracker_protocol.html](http://www.rasterbar.com/products/libtorrent/udp_tracker_protocol.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:13:47.587

UDP 是一种无连接协议，因此如果数据包在目的地丢失或丢弃，您将不会看到任何错误。

尝试以下诊断步骤：

1.  使用数据包嗅探器（Wireshark 是一个很好的）来检查 UDP 数据包是否正在离开机器。
2.  安装一些工作的 BitTorrent 客户端，检查它是否可以与跟踪器通信，如果可以，使用数据包嗅探器查看工作客户端发送的数据包与您的代码生成的数据包有何不同。

如果工作客户端也无法与跟踪器通信，但 UDP 流量正在离开您的机器，则 UDP 数据包很可能被防火墙丢弃。您可以尝试使用“traceroute”工具来诊断您的数据包被丢弃的位置（这并不总是 100% 可靠，因为有时防火墙会丢弃 traceroute 生成的 UDP 数据包，并且不会丢弃正常的 UDP 流量）。

# tsql - 高插入率设计表

> ID：11300734
> 
> 赞同：0
> 
> 时间：2012-07-02T20:30:58.087
> 
> 标签：tsql, database-design, indexing

我想要一些关于如何设计一个每天插入 10 到 5000 万个并且需要快速响应选择的表的建议……我应该使用索引吗？或者间接费用会太大？

编辑：我不担心交易量......这实际上是一个分配......我需要找出一个表的设计“必须很好地响应不基于主键的选择，知道这个表每天都会收到大量的插件”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:14:30.540

即使您每天执行 50,000 次并且您的工作日是 8 小时，那平均每秒仍然少于两次插入。我想你可能会得到比这高得多的峰值，但总的来说，SQL Server 可以处理比你看起来更高的事务率。

如果您的表相当宽（很多列或一些非常长的列），那么您可能需要考虑通过代理 (IDENTITY) 列进行聚类。您的数量不足以在表格末尾形成一个糟糕的热点。结合这一点，为数据一致性（即 FK）和检索（PK、自然键等）所需的任何键使用索引。小心设置索引的填充因子，并考虑在定期停机窗口期间重建它们。

如果您的表相当窄，那么您可能会考虑在自然键上进行聚类，但您必须确保可以满足您的响应时间预期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T01:00:38.643

最佳速率是 PK 排序与插入顺序相同，没有其他索引。一天10-5万也不算多。如果只插入，那么我看不到脏读有任何不利之处。

如果您正在优化选择，则对插入使用行级锁定。

测量索引碎片。使用适当的填充因子定期对索引进行碎片整理。填充因子决定了索引碎片的速度以及碎片整理的频率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T20:36:59.997

确实。至少是主键、外键，然后是您需要报告的任何内容，但不要过度使用。每天插入 10k-50k 不是问题。如果它就像，我不知道，一百万次插入，那么您可以开始考虑拥有单独的表、数据字典等等，但对于您的需求，我不会担心。

# drag-and-drop - Trello 拖放效果

> ID：11300735
> 
> 赞同：14
> 
> 时间：2012-07-02T20:31:06.867
> 
> 标签：drag-and-drop, trello

有谁知道 Trello 是如何做那些漂亮的拖放效果的，其中选定的卡片与文本可见略微倾斜？

我喜欢认为我查看 Web 上的任何站点并大致了解所有内容是如何完成的，但我从未见过像这样无缝完成的效果。它是在服务器上动态设置样式并在拖动开始时加载的预渲染图像吗？

我知道的非常琐碎的问题！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-02T20:44:58.037

Trello just uses a [CSS rotate transformation](http://davidwalsh.name/css-transform-rotate) on the `ui-sortable-helper`

```
.list-card.ui-sortable-helper {
   transform: rotate(3deg);
   -moz-transform: rotate(3deg);
   -webkit-transform: rotate(3deg);
} 
```

# python - ImportError：没有名为 isodate 的模块

> ID：11300737
> 
> 赞同：2
> 
> 时间：2012-07-02T20:31:15.423
> 
> 标签：python, python-2.7

我无法在 python 中导入 rdflib。错误详细：

```
Python 2.7.3 (default, Jun 27 2012, 23:48:21) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import rdflib
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/site-packages/rdflib/__init__.py", line 65, in <module>
    from rdflib.term import URIRef, BNode, Literal, Variable
  File "/usr/local/lib/python2.7/site-packages/rdflib/term.py", line 49, in <module>
    from isodate import parse_time, parse_date, parse_datetime
ImportError: No module named isodate 
```

如果有人可以提供帮助，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T20:44:55.347

If you actually install rdflib via `pip`, then its dependencies will come along with it (isodate included):

```
pip install -U rdflib 
```

or

```
easy_install -U rdflib 
```

Chances are you might have installed it directly from source, meaning you would have to take care of the deps yourself.

Information on installing pip if you dont have it already:
[http://www.pip-installer.org/en/latest/installing.html](http://www.pip-installer.org/en/latest/installing.html)

If you have easy_install, you can do: `easy_install pip`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T20:38:21.753

似乎存在对[isodate](http://pypi.python.org/pypi/isodate/)的依赖，因此请尝试通过您最喜欢的 PyPI-Installer ( *pip* oder *easy_install*) 安装它。

# c# - 在 C# 中将 XML 字符串解析为类？

> ID：11300739
> 
> 赞同：15
> 
> 时间：2012-07-02T20:31:22.187
> 
> 标签：c#, .net, xml, class

> **可能重复：**
> [如何反序列化 XML 文档](https://stackoverflow.com/questions/364253/how-to-deserialize-xml-document)

假设我有一个在 C# 中这样定义的类：

```
public class Book
{
    public string Title {get; set;}
    public string Subject {get; set;}
    public string Author {get; set;}
} 
```

假设我有如下所示的 XML：

```
<Book>
    <Title>The Lorax</Title>
    <Subject>Children's Literature</Subject>
    <Author>Theodor Seuss Geisel</Author>
<Book> 
```

如果我想`Book`使用这个 XML 实例化类的实例，我知道的唯一方法是使用 XML Document 类并枚举 XML 节点。

.net 框架是否提供了一些用 XML 代码实例化类的方法？如果没有，实现此目的的最佳实践是什么？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-07-02T20:37:59.580

您可以只使用 XML 序列化从 XML 创建类的实例：

```
XmlSerializer serializer = new XmlSerializer(typeof(Book));
using (StringReader reader = new StringReader(xmlDocumentText))
{
    Book book = (Book)(serializer.Deserialize(reader));
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-02T20:33:36.600

有几种方法可以反序列化 XML 文档 - 现有[`XmlSerializer`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)的`System.Xml.Serialization`和较新[`DataContractSerializer`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)的`System.Runtime.Serialization`.

两者都要求您使用告诉序列化程序如何操作的属性来装饰您的类成员（每个属性都有不同的属性）。

# java - Selenium RC 无法使用下载弹出窗口

> ID：11300740
> 
> 赞同：0
> 
> 时间：2012-07-02T20:31:22.927
> 
> 标签：java, selenium, download, selenium-rc

我是硒 RC 的新手。我一直在 eclipse 中运行一个简单的 junit 测试用例来运行和从 adobe.com 下载 flashplayer。

但是 selenium RC 无法点击甚至识别下载弹出窗口。我在谷歌搜索中看到了一些建议，但我仍然无法做到。

我一直在尝试获取窗口 ID 或弹出窗口的名称来使用它，但我仍然无法做到。我在下面复制了我的代码的主要功能：

```
public void testPopup() throws Exception 
    {
    selenium.open("http://get.adobe.com/");
    selenium.open("/flashplayer/");
    selenium.click("id=buttonDownload");

    String ids[]=selenium.getAllWindowIds();
    for(int i=0;i<ids.length;i++)
        System.out.println(ids[i]);
    String[] windownames=selenium.getAllWindowNames();
    for(int i=0;i<windownames.length;i++)
        System.out.println(windownames[i]);

        String feedWinId = selenium.getEval("{var windowId; for(var x in selenium.browserbot.openedWindows ) {windowId=x;} }");
    System.out.println(feedWinId);
        selenium.chooseOkOnNextConfirmation();
    selenium.waitForPageToLoad("30000");                                        
} 
```

如果有人可以帮助我解决这个问题，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:32:35.513

您不能使用 selenium 自动生成系统弹出窗口。
为此，您必须转移 `Autoit with selenium`。
借助此功能，您可以在下载弹出窗口中记录您的活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:40:22.377

简短的回答：你不能。

更长但仍然令人失望的答案：

你不能，因为当前没有 Selenium 实现支持它。Selenium 的人[都知道它](http://code.google.com/p/selenium/issues/detail?id=95&sort=-stars&colspec=ID%20Stars%20Type%20Status%20Priority%20Milestone%20Owner%20Summary)，它实际上是 nr。目前 Selenium 中最受欢迎的 13 个功能

Selenium RC 永远不会拥有它，因为它的技术限制（它是纯 JavaScript。纯 JavaScript 无法下载和保存文件。）并且一年多前它已被弃用。Selenium WebDriver ...好吧，也许，在未来。您可以尝试的各种方法：

*   重新考虑是否真的需要*下载*文件。仅仅断言文件存在并且可以通过[发出 HTTP 请求并看到答案`200 OK`](https://stackoverflow.com/a/10192812/1273080)来下载是不是可以的？
*   通过 Selenium 获得 URL 后，不能[使用纯 Java 下载文件吗？](https://www.google.cz/search?q=java%20download%20a%20file)我个人认为这是最好的方法。
*   如果您使用的是 WebDriver，有[一个下载文件的好工具](https://github.com/Ardesco/Ebselen/blob/master/ebselen-core/src/main/java/com/lazerycode/ebselen/customhandlers/FileDownloader.java)！
*   如果您使用的是 Firefox，您可以设置一个干净的测试配置文件，该配置文件将被配置为将每个点击的文件下载到某个指定的文件夹中。那里也有可以帮助您的[插件。](https://addons.mozilla.org/cs/firefox/addon/download-statusbar/)我不确定 Selenium RC 是否支持使用预先创建的配置文件，但 Selenium WebDriver 肯定支持。
*   如果您使用给定的浏览器进行测试，您可以通过盲目按下按钮来弄清楚如何“盲目地”下载文件。这[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)门课[可以帮助](http://www.testingexcellence.com/how-to-download-and-save-images-with-selenium-rc/)你。您只需单击文件，然后盲目地按`Enter`或任何键将文件下载到正确的位置。还有很多人[用于此任务的](https://stackoverflow.com/questions/5827387/how-to-handle-ie-download-dialog-with-vb-script)[AutoIt 框架](http://www.autoitscript.com/site/autoit/)。

# javascript - javascript：嵌套函数的动态调用

> ID：11300742
> 
> 赞同：0
> 
> 时间：2012-07-02T20:31:31.157
> 
> 标签：javascript, dynamic

在现有的实现中（不能改变太多的结构），我试图调用一个嵌套在另一个函数中的函数：

```
function outer(innerFunction, obj) {

    //TODO: call innerFunction here, passing obj as first parameter

    function inner1(obj) {
        alert(obj.key);
    }
}
outer('inner1', {key:'value'}); 
```

jsfiddle 在这里：http: [//jsfiddle.net/tbyyw/](http://jsfiddle.net/tbyyw/)

我已经考虑过使用`eval()`，但我不知道如何传递一个对象——他们说'eval is evil'；）

我想出的另一个解决方案是检查 innerFunction 字符串，但这意味着我必须知道存在哪些内部函数（此外，添加新函数意味着必须编写额外的检查）：

```
if(innerFunction == 'inner1') inner1(obj); 
```

那么在不改变整体实现的情况下还有另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:38:42.917

这是你想要的吗？

```
function outer(innerFunction, obj) {

    var fn = {
        inner1: function (obj) {
            alert(obj.key);
        } 
    };

    fn[innerFunction](obj);
}

outer('inner1', {key:'value'}); 
```

[http://jsfiddle.net/tbyyw/1/](http://jsfiddle.net/tbyyw/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:17:46.710

在不改变整体结构`eval`的情况下似乎是唯一的选择：

```
function outer(funcName, obj) {

    var func = eval(funcName);
    func(obj);

    function inner1(obj) {
        alert(obj.key);
    }
} 
```

`eval`只要您可以完全控制代码，就没有什么特别“邪恶”的地方，但是如果您愿意，您可以插入额外的安全检查：

```
if (funcName.match(/\W/))
    throw "invalid function name!";

var func = eval(funcName); 
```

如果有人试图传递除简单标识符（即函数名）以外的任何其他内容，这将引发异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T20:42:38.243

一个简单的 switch 语句将是最少干扰的。或者函数名称是完全动态的？

```
function outer(innerFunction, obj) {

     switch (innerFunction) {
        case "inner1": inner1(obj); break;            
    }

    function inner1(obj) {
        alert(obj.key);
    }
}
outer('inner1', {key:'value'});
​ 
```

# python - 一次更新所有显示 PyGame

> ID：11300745
> 
> 赞同：2
> 
> 时间：2012-07-02T20:31:33.937
> 
> 标签：python, pygame

使用 PyGame，我得到了闪烁的东西。方框、圆圈、文字，一切都在闪烁。我可以通过增加循环之间的等待来减少这种情况，但我也许可以通过一次将所有内容绘制到屏幕上来消除它，而不是单独做所有事情。这是发生在我身上的一个简单示例：

```
    导入pygame，时间
    pygame.init()
    screen = pygame.display.set_mode((400, 300))
    循环=“是”
    而循环==“是”：
        screen.fill((0, 0, 0), (0, 0, 400, 300))
        字体 = pygame.font.SysFont("calibri",40)
        text = font.render("TextA", True,(255,255,255))
        screen.blit（文本，（0,0））
        pygame.display.update()

        字体 = pygame.font.SysFont("calibri",20)
        text = font.render("开始", True,(255,255,255))
        screen.blit（文本，（50,50））
        pygame.display.update()
        时间.睡眠（0.1）

```

“开始”按钮为我闪烁。它可能只是我的电脑速度较慢，但​​有没有办法减少或消除闪烁？在我正在处理的更复杂的事情中，它变得非常糟糕。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T20:48:09.550

我认为部分问题是您不止一次调用“pygame.display.update()”。尝试在主循环期间只调用一次。

其他一些优化：

*   您可以将字体创建代码从主循环中取出以加快速度
*   `loop = True`不如这样做`loop = "yes"`
*   要获得更一致的 fps，您可以使用 Pygame 的[时钟](http://www.pygame.org/docs/ref/time.html)类

所以...

```
import pygame
pygame.init()

screen = pygame.display.set_mode((400, 300))
loop = True

# No need to re-make these again each loop.
font1 = pygame.font.SysFont("calibri",40)
font2 = pygame.font.SysFont("calibri",20)

fps = 30 
clock = pygame.time.Clock()

while loop:
    screen.fill((0, 0, 0), (0, 0, 400, 300))

    text = font1.render("TextA", True,(255,255,255))
    screen.blit(text,(0,0))

    text = font2.render("Begin", True,(255,255,255))
    screen.blit(text,(50,50))

    pygame.display.update()   # Call this only once per loop
    clock.tick(fps)     # forces the program to run at 30 fps. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T20:44:54.673

您将循环更新屏幕两次，一次用于绘制第一个文本（`TextA`），一次用于绘制第二个文本（`Begin`）。

`begin`第一次更新后，只显示第一个文本，因此在第一次更新和第二次更新之间看不到文本。这会导致闪烁。

绘制完所有内容后更新您的屏幕。在您的情况下，首先删除`pygame.display.update()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T20:54:34.927

您每 0.1 秒重绘整个屏幕的内容。跟踪您实际所做的更改并仅更新实际包含更改内容的矩形更为常见和快捷。因此，在循环之外绘制所有内容并让您的事件修改屏幕并跟踪实际更改的矩形。

所以是这样的：

```
import pygame, time
pygame.init()
screen = pygame.display.set_mode((400, 300))
screen.fill((0, 0, 0), (0, 0, 400, 300))
font = pygame.font.SysFont("calibri",40)
text = font.render("TextA", True,(255,255,255))
screen.blit(text,(0,0))
font = pygame.font.SysFont("calibri",20)
text = font.render("Begin", True,(255,255,255))
screen.blit(text,(50,50))
loop = "yes"
counter = 0
dirty_rects = []
while loop=="yes":
    pygame.display.update()
    time.sleep(0.1)
    # Handle events, checks for changes, etc. Call appropriate functions like:
    counter += 1
    if counter == 50:
        font = pygame.font.SysFont("calibri",20)
        text = font.render("We hit 50!", True,(255,255,255))
        screen.blit(text,(50,100))
        dirty_rects.append(Rect((50,100),text.get_size())) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T20:48:40.113

Pygame 有一个 Buffer 系统来避免闪烁，所以你应该照常绘制它们，但最后只更新一次：

```
...
while loop=="yes":
    screen.fill((0, 0, 0), (0, 0, 400, 300))
    font = pygame.font.SysFont("calibri",40)
    text = font.render("TextA", True,(255,255,255))
    screen.blit(text,(0,0))

    font = pygame.font.SysFont("calibri",20)
    text = font.render("Begin", True,(255,255,255))
    screen.blit(text,(50,50))

    pygame.display.update()   # only one update

    time.sleep(0.1) 
```

如果你不想保持帧率，Pygame 有一个比 time.sleep(0.1) 更好的[时钟类。](http://www.pygame.org/docs/ref/time.html#pygame.time.Clock)

# google-chrome-extension - chrome.tabs.captureVisibleTab 在安全页面上？

> ID：11300747
> 
> 赞同：1
> 
> 时间：2012-07-02T20:31:43.670
> 
> 标签：google-chrome-extension

我正在开发一个 chrome 插件，它通过“chrome.tabs.captureVisibleTab”使用屏幕捕获功能，但它在 https 页面上失败。我请求了安全页面的许可：

```
 permissions:[
    "tabs", "http://*/*", "https://*/*"
 ], 
```

这甚至可以在安全页面上实现吗？

这是我在示例 URL 中看到的错误：

```
 Error during tabs.captureVisibleTab: Cannot access contents of url "https://www.host.com/test". Extension manifest must request permission to access this host. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:41:11.823

我想你想用`<all_urls>`

看到这个：[http ://code.google.com/chrome/extensions/match_patterns.html](http://code.google.com/chrome/extensions/match_patterns.html)

T。

# javascript - d3.js 雷达图 - 填充线条之间

> ID：11300754
> 
> 赞同：3
> 
> 时间：2012-07-02T20:32:12.097
> 
> 标签：javascript, d3.js

我正在尝试在其中两个三角形之间创建填充，例如红色和绿色三角形之间的红色填充。有谁知道如何做到这一点？我看过另一个雷达图的例子，我相信它会做类似的事情，尽管我认为他们使用 CSS 创建填充，而不是 d3 ......

![在此处输入图像描述](../Images/8e8839649c4eee87bebe3ba2df1f290a.png)

使用径向图解决了 mbostock 回答的上述问题......

**最后结果** ![在此处输入图像描述](../Images/a693a4ffc28d1f4a308a83e008c65378.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T19:03:35.173

您不需要为此实现自定义路径；您可以使用[d3.svg.area.radial](https://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-area_radial)路径生成器。这是一个堆叠径向面积图的示例，您可以使用它来绘制周期性数据：

*   [http://bl.ocks.org/3048740](http://bl.ocks.org/3048740)

该实现与雷达图非常相似，除了雷达图的每个角度点的比例不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:40:02.340

为此，您必须使用自定义路径生成器将两个三角形合并为一条路径。然后你可以关闭路径并填充它。请注意，如果您希望三角形具有不同的颜色，则需要分别绘制它们。

您可以尝试作弊并简单地填充较大的三角形，然后将带有白色填充的较小三角形放在它上面。然后绘制网格线。但是，这仅在三角形不重叠时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T23:58:44.223

正如 Lars 所提到的，您想要创建一个[SVG 路径元素](http://www.w3.org/TR/SVG/paths.html#PathData)。

**路径由元素的d**属性中的一系列命令定义。您想首先将绝对（“M”）移动到两个三角形之一的一个角。然后你会想要使用 lineto（绝对“L”，或相对“l”）去第一个三角形的每个角落。然后绝对移动到另一个三角形，并重复。末尾的“z”关闭路径。将路径上的填充设置为所需的颜色。

*这是上面链接中单个*三角形的示例路径：

```
<path d="M 100 100 L 300 100 L 200 300 z"/> 
```

[mbostock 使用http://square.github.com/crossfilter/](http://square.github.com/crossfilter/)上的条形图的路径，如果您想查看此技术的实际应用。

# java - java restful 服务客户端接受响应列表

> ID：11300755
> 
> 赞同：2
> 
> 时间：2012-07-02T20:32:12.940
> 
> 标签：java, rest

我正在尝试为restful资源编写一个java客户端。我的请求的响应是对象列表。我有以下请求代码。但是我得到了一些解组异常。谁能让我知道如何解决这个问题？

```
 GenericType<List<Response>> genType = new GenericType<List<Response>>() {};
 GenericType<List<Response>> response = (GenericType<List<Response>>)resource.path(paramPath).accept(MediaType.APPLICATION_JSON).get(genType); 
```

我的资源有以下代码

```
@GET
@Path("/app/{Id}")
@Produces(MediaType.APPLICATION_JSON)
public List<Response> getAllKeyValuesByAppId(@PathParam("Id") Long Id){
    ...
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:52:57.933

你可以在不解组的情况下测试你的 REST 方法吗？您确定消息正文包含您所期望的内容吗？

# sql - 以编程方式锁定 SQL 登录

> ID：11300760
> 
> 赞同：2
> 
> 时间：2012-07-02T20:32:30.410
> 
> 标签：sql, sql-server

我需要以编程方式锁定 SQL-Server 登录。目标是模拟 SQL 中的自动功能，该功能将锁定使用错误密码进行多次连接尝试的用户。

我可以轻松解锁登录，但我也需要锁定它。

我尝试使用`sqlConnection`包含无效密码的 .NET 循环 20 次，但结果非常不一致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:51:25.797

使用`SqlConnetion`客户端：

```
using (var con = new SqlConnection(MyConnectionString))
{
    con.Open();
    var cmd = new SqlCommand("ALTER LOGIN [Username] DISABLE", con);
    cmd.ExecuteNonQuery();
} 
```

或者，您可以拒绝用户连接权限（只要用户不是该`sysadmin`角色的成员）。请注意，为了做到这一点，您必须连接到`master`数据库，因为它是服务器级别的权限：

```
using (var con = new SqlConnection(MyConnectionStringToMasterDatabase))
{
    con.Open();
    var cmd = new SqlCommand("DENY CONNECT SQL TO [Username]", con);
    cmd.ExecuteNonQuery();
} 
```

# javascript - jQuery UI 运算符重载？

> ID：11300761
> 
> 赞同：1
> 
> 时间：2012-07-02T20:32:37.963
> 
> 标签：javascript, jquery, jquery-ui, oop

我试图同时找出 OOP Javascript、jQuery 和 jQuery UI。基本上，我想创建一个自定义“面板”组件，我可以在整个 Web 应用程序的各个地方重用它。该面板由一个标题栏和其下方的内容组成。

所以我使用 jQuery UI 来完成这个。我希望能够制作组件，然后更改其属性（如标题栏文本）。这是一个例子：

```
$(function()
{
    $.widget("custom.ShinyPanel",
    {
        options: {
            css:{},
            title:""
        },

        _create:function()
        {
            $(this.element).addClass("shinyPanel").disableSelection();
            this.titleBar = $(createElement("div")).addClass("shinyPanelTitleBar").appendTo(this.element);
            this.topShine = $(createElement("div")).addClass("shinyPanelTopShine").appendTo(this.element);
            this.leftShine = $(createElement("div")).addClass("shinyPanelLeftShine").appendTo(this.element);
            this.content = $(createElement("div")).addClass("shinyPanelContent").appendTo(this.element);

            this._refresh();
        },

        _refresh:function()
        {
            if (this.options.hasOwnProperty("title"))
                $(this.titleBar).html(this.options.title);
        }
    });
});

// $("#divShotList").ShinyPanel({title:"Shot List"});    // this works
$("#divShotList").ShinyPanel();
$("#divShotList").title = "Shot List";                   // this doesn't work

<div id="divShotList" style="position:absolute; top:5px; bottom:10px; width:250px;"></div> 
```

有没有办法让我重载`=`运算符或使用这种语法使它工作的东西？我知道我可能可以创建一个额外的函数，比如`setProperty`或其他什么，但如果我能保持这种语法并让它工作，那就太酷了。知道如何修改小部件以实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:34:33.573

元素或 jQuery 包装的元素不是您的小部件：

```
$("#divShotList").data('ShinyPanel')._setOption('title', 'something'); 
```

但它存储在元素 的[.data()中。](http://api.jquery.com/jQuery.data/)

* * *

或者：

```
var shinyPanel = $("#divShotList").ShinyPanel().data('ShinyPanel');
shinyPanel.options.title = 'new title';
shinyPanel.refresh(); 
```

也可以。

* * *

最后编辑：回答你的问题：不。

# design-patterns - 嵌入式系统的外观与适配器模式

> ID：11300770
> 
> 赞同：1
> 
> 时间：2012-07-02T20:33:09.817
> 
> 标签：design-patterns, embedded, adapter, facade

阅读 Elecias White 的书*“制作嵌入式系统”*（来自 O'Reilly）让我感到困惑，因为这两个术语：外观和适配器模式。她对两者的解释根本不清楚。

**适配器模式**（Pag，19）：*“（......有时称为包装器）它将对象的接口转换为对客户端更容易的接口......通常，适配器是在软件 API 上编写的，以隐藏丑陋的接口。 ……”*。

**外观模式**（第 86 页）：*“……它为一段代码提供了简化的接口……”。*然后它说*“......适配器模式是外观模式的更通用版本”*。

可悲的是，这两个术语似乎与我相似。

根据本网站（和其他）中的其他定义，大多数人说**“适配器模式使两个不兼容的接口兼容”**。***在这种情况下，“不相容***”一词是什么意思？

大多数网站和书籍从嵌入式系统的角度以外的更高级别（纯 C，而不是 OOP）给出了关于模式的定义，因此给出的示例确实不清楚。

值得一提的是，虽然这本书是一本极好的知识来源，但对于新手和专业人士来说，它并没有包含这么多代码，所以人们应该弄清楚这种定义。

我试图通过我为自己写的几个例子来理解它们，你能指出我的理解是否正确吗？

*示例 1，外观模式：*

```
/* This is a fancy API that I want to 'facade' */

fancy_gui_DrawWidget(parent, id, x0, y0, x1, y1, text, txt_color, back_color, brdr_color, draw_callback(), ... and more parameters)
{
/* draw the widget */
}

/* Here I'm using the 'facade pattern' */

mygui_DrawButton(parent, id, x, y, width, height, text)
{
 ...
x1=x+width;
y1=y+height;
...

fancy_gui_DrawWidget(parent, id, x, y, x1, y1, text, BLACK, WHITE, ORANGE, button_draw_fn, ... and some more parameters needed);
} 
```

*示例 2，适配器模式：*

```
/* Ugly interface that I want to 'adapt' (from LPC17xx NXP's CMSIS library) */

uint32_t UART_Send(
LPC_UART_TypeDef *UARTx, 
uint8_t *txbuf,
uint32_t buflen, 
TRANSFER_BLOCK_Type flag)
{
/* transmits the txbuf */
}

/* Here I'm using the 'adapter pattern' (I think so) for a good looking interface */

int uart0_Send(buffer, len_buffer)
{
/* Do some stuff */
len=UART_Send(uart0_handler,buffer,len_buffer, BLOCKING);
if(len!=len_buffer)
return 0;
return 1;
} 
```

希望我自己解释得足够好。先谢谢了！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:44:13.670

The Facade pattern is used to abstract away complex functionality in order to make an API easier to use.

For instance, let's say you have a bit of code that updates several objects at once:

```
ObjectA.update();
ObjectB.update();
ObjectC.update(); 
```

...etc...

You could create a class that wraps these three update() calls into a single call:

```
SuperObject.update(); 
```

This is one example of a facade.

You'd use the Adapter pattern when you have a particular interface that you are required to use and an object that implements the behavior you desire but does not have the required interface.

Let's say your required interface has a method with the following signature:

```
void Save(); 
```

You have a class already that implements the necessary behavior, but doesn't have the interface you need, perhaps something like this:

```
bool Update(); 
```

You don't want to change your existing class and risk breaking code that uses it, nor do you want to recreate the wheel, so you instead create a wrapper class that implements the Save method but uses an instance of your existing class:

```
void Save()
{
   bool notUsingThisReturnValue = existingClassInstance.Update();
} 
```

I've written articles outlining the use of both the [Facade Pattern](http://www.brian-driscoll.com/2011/05/design-patterns-simplified-facade.html) and the [Adapter Pattern](http://www.brian-driscoll.com/2011/05/design-patterns-simplified-adapter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:53:11.523

弗朗西斯科，您的适配器示例是正确的。我可以给出另一个，但它主要是面向对象的：想象你有一个用于数据源的接口，它们都有方法 `int readValue()`，并且你有与这个方法的接口，用于多态调用。而且您还有一个无法使用 method 重写的旧旧版本（例如，它由其他团队管理或在源代码中不可用） `int readInteger()`。您不能将原始接口与`readValue()`此类的方法一起使用，因此您制作了具有方法的中间类，该类`int readValue()`委托给`void readInteger()`.

```
class Adapter implements Reader {
  private LegacyReader legacyReader;
  public int readValue() {
       return legacyReader.readInteger();
  }
} 
```

现在您可以将旧版阅读器与新的类和界面阅读器一起使用。

在纯 C 世界中，如果您的函数希望有一个指向具有特定签名的函数的指针作为参数，并且实现函数具有另一个签名，则可以使用它。只需用另一个具有正确签名的函数包装您的函数。

当您有详细的 API（例如，drawCircle()、drawRect()、drawLine()）时，通常会使用 Facade，但通常您需要使用这些调用的组合，并且您希望避免复制粘贴或不想要为客户端代码提供低级抽象。在这种情况下，您只需使用以下代码：

```
class DrawerFacade {
   private LowLevelDrawer drawer;
   public void drawHouse(int i, int j) {
       drawer.drawCircle(...);
       drawer.drawRect(...);
   }
} 
```

如果您谈论的是嵌入式，您可以在纯 C 中使用与函数（非 OOP）API 相同的概念。

# android - 在 Windows 7 上使用 Jelly Bean 4.1 模拟器在 ADB 中运行 systrace 工具时出错

> ID：11300773
> 
> 赞同：16
> 
> 时间：2012-07-02T20:33:16.990
> 
> 标签：android, windows-7, adb, android-4.2-jelly-bean, systrace

如何运行`systrace`以显示其 html 输出？在观看了 Google I/O 2012 演讲[“For Butter or Worse”](http://www.youtube.com/watch?feature=player_embedded&v=Q8m9sHdyXnE#t=31m15s)之后，我无法`systrace`使用运行 Jelly Bean 4.1 的模拟器在 Windows 7 上工作。

我做了以下事情：

1.  安装 Python 2.7，并将安装文件夹添加到我的 PATH
2.  运行以下内容：（`C:\android-sdk\platform-tools\systrace>python systrace.py`使用较旧的 SDK `C:\android-sdk\tools\systrace>python systrace.py`：）

但是我在cmd中收到以下错误：

```
Traceback (most recent call last):
  File "systrace.py", line 212, in <module>
    main()
  File "systrace.py", line 124, in main
    ready = select.select([adb.stdout, adb.stderr], [], [adb.stdout, adb.stderr])
select.error: (10093, 'Either the application has not called WSAStartup, or WSAStartup failed') 
```

笔记：

*   我在模拟器中启用了跟踪：`Settings > Developer Options > Enable traces`
*   我也尝试过使用 Python 3.2

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-24T17:38:08.110

systrace python 脚本使用 select() 系统调用，这在 Windows 上不起作用。Android SDK 工具的[最新预览版](http://tools.android.com/preview-channel)(ADT21 rc9) 支持从监控工具中收集系统跟踪。

启动监视器为：

```
./tools/monitor & 
```

单击一个设备，在设备面板的右上角，您应该有一个工具栏项，可以让您收集系统跟踪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T05:25:07.830

我也遇到了这个问题。似乎 systrace.py 尝试将 select.select() 与文件描述符一起使用，如此处所述，[Windows](http://docs.python.org/library/select.html#select.select)不支持该文件描述符。

我最终从 Linux VM 运行该工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-11T21:09:02.767

如果您使用 eclipse 进行开发，那么您可以使用内置的 Systrace 实用程序以及概述的 @ [http://developer.android.com/tools/help/systrace.html](http://developer.android.com/tools/help/systrace.html)。这是我发现的最简单的收集痕迹的方法。

# jquery - 使用 Phonegap 启动图像后白屏闪烁

> ID：11300778
> 
> 赞同：5
> 
> 时间：2012-07-02T20:33:26.227
> 
> 标签：jquery, iphone, xcode, cordova, launching-application

加载启动图像后，我的应用程序加载前出现白屏。我正在使用带有 xcode 的 phonegap。我希望我的应用程序加载到我的 lauch 图像上，以便它遵循 ios 开发人员指南并提供流畅的启动。我认为这个白屏是我的应用程序的 webview 加载。我希望这个 webview 清楚。关于解决此问题或解决方法的任何想法？

我尝试了以下代码，但它对我的启动没有任何影响。此代码位于我的 MainViewController.m

```
-void (webViewDidFinishLoad:(UIWebView*) theWebView
{
theWebView.backgroundColor = [UIColor clearColor];
theWebView.opaque = NO;
 } 
```

我对此进行了很多研究，但我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T06:24:12.647

我也遇到了同样的问题，试试我为解决问题所做的这3个步骤：

1.  在您的 phonegap/cordova plist 文件中设置`AutoHideSplashScreen`为`NO`

2.  将此行添加到 CDVMainViewController.m 的 viewDidLoad 方法中

    ```
    self.useSplashScreen = YES; 
    ```

3.  然后将此代码添加到`onDeviceReady()`方法中

    ```
    function onDeviceReady()
    {
    // do your thing!
    cordova.exec(null, null, "SplashScreen", "hide", []);  //On Cordova 1.6\. 0
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T20:42:46.823

您必须在启动后覆盖一个伪造“Default.png”图像的 ModalViewController，将视图控制器覆盖在 UIWebView 之上，并显示一个 UIActivityIndi​​cator，以便用户知道您正在加载您的应用程序。网页完成后，您可以关闭视图控制器。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T03:42:59.527

您是否考虑过手动隐藏启动屏幕，以便您的页面在它消失之前准备好？

```
window.setTimeout(function() { 
navigator.splashscreen.hide();
},1350); 
```

`AutoHideSplashScreen`并在你的 phonegap/cordova plist 文件中设置为 NO

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T20:50:16.147

我有一个类似的问题。我没有在代码中修复它，而是在 UI 编辑器中修复它。包含 uiwebview 的窗口本身在属性中也有背景颜色。这可以设置为您选择的颜色，以消除白色的闪光。（我将我的设置为黑色。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-15T18:30:55.187

从 Cordova/Phonegap 3+ 开始，您需要在 config.xml 中设置首选项：

```
<preference name="AutoHideSplashScreen" value="false" /> 
```

您还需要插件：

```
cordova plugin add org.apache.cordova.splashscreen 
```

然后，

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
  // depending on how many things you are rendering on your webview, you might want to add an artificial wait
  var SPLASH_SCREEN_DELAY = 500;
  setTimeout(function() {
    navigator.splashscreen.hide();
  }, SPLASH_SCREEN_DELAY);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-21T07:50:59.407

我遇到了同样的问题，在做了一些研究后，我发现这是因为应用程序需要一些时间来加载所有必需的 .css 和 .js 文件。

为了克服这个问题，我们可以使用启动画面并延迟它的时间，这样在加载所有需要的文件之前，最终用户不会看到乱码的白屏，而是可以看到我们自定义的启动画面。

我通过参考“ian”给出的答案的第一和第二部分来解决它。这些是我遵循的步骤。

第 1 步：安装 Cordova Splashscreen 插件。

`cordova plugin add org.apache.cordova.splashscreen`

第 2 步：将 config.xml 文件中的 Auto Hide Splash Screen Preference 设置为 false。

```
<preference name="AutoHideSplashScreen" value="false"/> 
```

第三步：增加闪屏延迟时间

```
<preference name="SplashScreenDelay" value="6000"/> 
```

希望这对某人有帮助:)

# javascript - CSS 和 JS - 将背景图像扩展到 div 之外

> ID：11300782
> 
> 赞同：0
> 
> 时间：2012-07-02T20:33:51.973
> 
> 标签：javascript, css, background-image

我目前正在尝试找到一种解决方法，让 Niall Doherty 的 Coda Slider 2 上的箭头突出显示选定的选项卡。最初我尝试使用标题图像上的图像来执行此操作，虽然它在我的 Mac 上的 Safari 中看起来不错，但它在其他设备上并不重要（请参阅[www.lukekendalldesign.co.uk/pss/productsandservices](http://www.lukekendalldesign.co.uk/pss/productsandservices)）

我尝试使用 CSS 箭头创建它，但事实证明这相当困难，所以我找到了使用背景图像的解决方法，但我遇到了另一个问题。

[http://cl.ly/HovO](http://cl.ly/HovO)（对不起，我不能上传图片 - 新手！）

请参考上面的链接截图。与背景匹配的浅灰色三角形是标题图像的一部分。黑色三角形使用以下 CSS 代码定位：

```
.coda-nav ul li a.current { 
    border-top-right-radius: 10px; 
    border-top-left-radius: 10px; 
    color: white;
    height: 60px; 
    z-index: 20000;
    background: url(../images/triangle.png) no-repeat 50% 100%;
    position: relative;
    overflow: visible;
} 
```

我想要做的是将这个黑色箭头放在灰色图像箭头所在的位置（如果这有意义吗？）我该怎么做？

我尝试添加边距和填充，但是它扩展了灰色背景并且不会将背景图像黑色三角形向下推。

虽然我找到了类似的解决方案，但似乎没有一个适用，因为 .current 类是使用以下 JS 应用的：

```
// If we need a tabbed nav
    $('#coda-nav-' + sliderCount + ' a').each(function(z) {
        // What happens when a nav link is clicked
        $(this).bind("click", function() {
            navClicks++;
            $(this).addClass('current').parents('ul').find('a').not($(this)).removeClass('current');
            offset = - (panelWidth*z);
            alterPanelHeight(z);
            currentPanel = z + 1;
            $('.panel-container', slider).animate({ marginLeft: offset }, settings.slideEaseDuration, settings.slideEaseFunction);
            if (!settings.crossLinking) { return false }; // Don't change the URL hash unless cross-linking is specified
        });
    }); 
```

我非常感谢任何人在这方面可以提供给我的任何帮助——因为这是一个 JS 问题，这有点超出我的理解范围！:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:02:18.513

我已经在 Firefox 中使用 windows 上的 fire bug 进行了尝试。我认为有2个问题。首先是 ul 元素上的边距应该是 167px （黑色箭头在图像中的位置不是很好（中间是 232 px 你是说这个吗？）。箭头只需要向下移动，我做了将背景位置设置为： url("../images/triangle.png") no-repeat scroll 50px 60px transparent 希望这会有所帮助。

# vim - C 的 Vim 函数提示

> ID：11300788
> 
> 赞同：11
> 
> 时间：2012-07-02T20:34:17.887
> 
> 标签：vim, autocomplete, syntax-highlighting, code-completion, code-hinting

我正在尝试实现一些简单的东西，通常称为“功能提示”。例如，基于 scintilla 的编辑器有它：

![在此处输入图像描述](../Images/a912b22bd5d38ebd3ec8313401d9d43c.png)

你输入一个名字，然后得到原型。在 vim 中存在一些问题：

*   您必须重建 ctags 以使其保持最新状态
*   你不能在 之后输入 CX CO ，*你*`(`只会得到“找不到模式”
*   你不能在普通模式下输入CX CO，光标只会跳来跳去
*   您会在顶部看到烦人的预览窗口

我尝试了一些插件；他们中的大多数人把事情搞得更糟[^1]。谁能推荐一个简单的方法来做到这一点？一个包含函数原型的简单矩形，仅此而已。

[^1] 这些插件中的一些是多么愚蠢，真是令人麻木。一个插件（我不会提及）实际上包含*在 .vim 文件*中，其中包含来自 libc 的函数列表。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T20:17:48.973

`ctags`因为自动完成是一团糟。我建议您尝试使用基于编译器的插件，例如[clang-complete](http://www.vim.org/scripts/script.php?script_id=3302)或[gcc-sense](http://cx4a.org/software/gccsense/)（没有尝试过这个）。优点是：

*   更准确，因为他们所做的几乎是编译
*   编译错误在源代码上动态标记

> 您必须重建 ctags 以使其保持最新状态

您不需要处理 ctags（尽管它们仍然可以用来跳转）

> 您不能在 ( 之后键入 CX CO，您只会得到“找不到模式”

你会期待什么？

> 你不能在普通模式下输入CX CO，光标只会跳来跳去

如果您认为这是一个常见的错误（例如`nnoremap <C-x><C-o> a<C-x><C-o>`） ，您可以随时重新映射该序列

> 您会在顶部看到烦人的预览窗口

`preview`您可以通过从`completeopt`选项中删除来禁用此功能。看`:help completeopt`

我正在使用以下设置：

![这里](../Images/69ad9d8312b17d9ef02041086fbf2fa5.png)

*   [clang-complete](http://www.vim.org/scripts/script.php?script_id=3302)完成
*   [supertab](http://www.vim.org/scripts/script.php?script_id=1643)用`tab`键完成
*   用于函数签名占位符的[ultisnips 。](http://www.vim.org/scripts/script.php?script_id=2715)（也适用于[snipmate](http://www.vim.org/scripts/script.php?script_id=2540)）

和一些 vimrc 设置：

```
set pumheight=10             " so the complete menu doesn't get too big
set completeopt=menu,longest " menu, menuone, longest and preview
let g:SuperTabDefaultCompletionType='context'
let g:clang_complete_auto=0  " I can start the autocompletion myself, thanks..
let g:clang_snippets=1       " use a snippet engine for placeholders
let g:clang_snippets_engine='ultisnips'
let g:clang_auto_select=2    " automatically select and insert the first match 
```

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:24:52.340

尝试使用`eclim`（用于与 Eclipse 集成的插件）。

这个解决方案开销很大，但它适用于所有情况。

# go - Go 错误：“未使用 fmt.Println”。什么？

> ID：11300795
> 
> 赞同：2
> 
> 时间：2012-07-02T20:34:59.350
> 
> 标签：go

标题说了什么。我收到一个错误：

```
fmt.Println not used 
```

提到的行是我的源文件的最后一行。我没有使用该`fmt`文件中的包，但我最近使用了。

当我尝试构建包或运行测试时会发生这种情况。

编辑：

如果我`go clean myproject`是这个项目，我仍然会得到相同的响应。

我刚刚跑了`go clean`，现在有：

```
# myproject
<epoch>: fmt.Println not used 
```

为了 Cat Plus Plus 的利益进行编辑，这里是触发错误的源文件：

types2.go

```
package mypackage

import (
) 
```

跑步：

```
go build mypackage
# mypackage
./types2.go:4: fmt.Println not used 
```

是的，你没有看错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:43:49.970

答案是我`fmt.Println`在某处的文件中有表达式。编译器告诉我错误发生在不正确的文件中。此博客文章中的更多信息。

[http://blog.afandian.com/2012/07/strange-error-in-go-fmt-println-not-used/](http://blog.afandian.com/2012/07/strange-error-in-go-fmt-println-not-used/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:06:28.490

我怀疑你没有编译你认为你正在编译的东西。你的 GOPATH 是什么样的？请记住 go 命令只是通过 GOPATH 查找包，并不关心您的当前目录。此外，go build 不会“运行”甚至安装包，而且 Go clean 不像 make clean ——它确实做了其他事情。

# jquery - 基于 url 添加类并在鼠标悬停时删除

> ID：11300797
> 
> 赞同：0
> 
> 时间：2012-07-02T20:35:29.113
> 
> 标签：jquery, addclass, removeclass

有没有更有效的方法来做到这一点？如果用户在该页面上，基本上只需将一个类添加到 subNav 菜单。当他们将鼠标悬停在菜单上时，选定的课程就会消失。但是，如果他们从菜单中移出鼠标，我需要重新出现所选的类。必须有一种更有效的方法来做到这一点......

抱歉，我没有包含 html。你可以在这里看到它的实际效果：http: [//oursaviorschurch.com/GivingNew](http://oursaviorschurch.com/GivingNew)。我正在使用 asp.net 进行开发。

```
$(function () {
    var loc = window.location.href; // returns the full URL
    if (/GivingNew/.test(loc)) {
        $('.SideGrace').addClass('selected');
    };
    if (/Options/.test(loc)) {
        $('.SideOptions').addClass('selected');
    };
    if (/FAQ/.test(loc)) {
        $('.SideFAQ').addClass('selected');
    };
    if (/GiveNow/.test(loc)) {
        $('.SideGive').addClass('selected');
    };
    $('.sideNav').mouseover(function () {
        $('.sideNav li a').removeClass('selected');
    });
    $('.sideNav').mouseout(function () {
        var loc = window.location.href; // returns the full URL
        if (/GivingNew/.test(loc)) {
            $('.SideGrace').addClass('selected');
        };
        if (/Options/.test(loc)) {
            $('.SideOptions').addClass('selected');
        };
        if (/FAQ/.test(loc)) {
            $('.SideFAQ').addClass('selected');
        };
        if (/GiveNow/.test(loc)) {
            $('.SideGive').addClass('selected');
        };
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:04:08.507

假设标记类似于以下内容：

```
<ul>
    <li><a class="menuLinks" href="http://example.com/home/">Home</a></li>
    <li><a class="menuLinks" href="http://example.com/about/">About</a></li>
    <li><a class="menuLinks" href="http://example.com/contact/">Contact</a></li>
    <li><a class="menuLinks" href="http://example.com/options/">Options</a></li>
</ul>​ 
```

请注意，我使用元素`class`上的特定`a`元素来指定我希望搜索的元素，并且*我*使用`a`元素的文本来搜索`window.location`字符串，这可能需要根据您自己的标记和逻辑。

在这些假设下，以下 jQuery 有效：

```
var loc = 'http://www.example.com/options/';

$('a.menuLinks').each(

function() {
    var needle = $(this).text().toLowerCase().split(/ /)[0];
    if (loc.indexOf(needle) > -1) {
        $(this).addClass('selected');
        $(this).attr('data-selected',true);
    }
}).closest('ul').on('mouseenter mouseleave', function(e) {
    if (e.type == 'mouseenter') {
        $(this).find('.selected').removeClass('selected');
    } else if (e.type == 'mouseleave') {
        $(this).find('a[data-selected]').addClass('selected');
    }
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/DTGUN/)。

参考：

*   jQuery：
    *   [`addClass()`](http://api.jquery.com/addClass/).
    *   [`attr()`](http://api.jquery.com/attr/).
    *   [具有属性选择器`[attribute]`](http://api.jquery.com/has-attribute-selector/)。
    *   [`each()`](http://api.jquery.com/each/).
    *   [`find()`](http://api.jquery.com/find/).
    *   [`on()`](http://api.jquery.com/on/).
    *   [`removeClass()`](http://api.jquery.com/removeClass/).
    *   [`text()`](http://api.jquery.com/text/).
*   JavaScript：
    *   [`e.type`](https://developer.mozilla.org/en/DOM/event.type).
    *   [`indexOf()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/indexOf).
    *   [`split()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split).
    *   [`toLowerCase()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/toLowerCase).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:58:37.590

根据你的说法，你想要以下...

> 当他们将鼠标悬停在菜单上时，选定的课程就会消失。但是，如果他们从菜单中移出鼠标，我需要重新出现所选的类。

**为什么不当用户关注您添加的菜单`selected`并在 focusout 时删除它？**

你可以这样做：
检查[toggleClass](http://api.jquery.com/toggleClass/)。

```
$(function () {

    $('.sideNav').on('mouseout mouseover', function() {
        $(this).toggleClass('selected');
    });

}); 
```

**[例子](http://jsfiddle.net/ricardolohmann/C9nrg/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T20:41:35.553

如果我正确理解了您的问题，我将使用 PHP 将“选定”标签添加到当前页面，并使用 jQuery 和 CSS 将其添加到样式/效果中。

我想像当您将鼠标悬停在您当前所在页面的链接上时，您会显示类似“您已经在这里！”的内容。在这种情况下，使用 PHP 打印出“选定”类似乎更合乎逻辑，其余的工作也很容易。

此外，由于您总是针对您的 'loc' var "test(loc)" 进行测试，而不是使用多个 if，您可以使用 'switch'。

# mysql - $this->db->trans_status() 如何在 codeigniter 事务中工作？

> ID：11300803
> 
> 赞同：0
> 
> 时间：2012-07-02T20:36:07.987
> 
> 标签：mysql, codeigniter, transactions

CodeIgniter究竟如何`$this->db->trans_status()`理解事务中的查询是否成功？

来源：[http ://codeigniter.com/user_guide/database/transactions.html](http://codeigniter.com/user_guide/database/transactions.html)

```
$this->db->trans_begin();

$this->db->query('AN SQL QUERY...');
$this->db->query('ANOTHER QUERY...');
$this->db->query('AND YET ANOTHER QUERY...');

if ($this->db->trans_status() === FALSE){
    $this->db->trans_rollback();
}
else{
    $this->db->trans_commit();
} 
```

我使用**MySQL**作为底层数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:44:09.640

SQL 有一个 for `START TRANSACTION`one`COMMIT`和一个 for的语句`ROLLBACK`。

您的数据库驱动程序和/或抽象层不必*一次*发送整个列表：

```
$query_string = '
    START TRANSACTION;
        SELECT something FROM somewhere;
        UPDATE something SET something.we_have = something.else;
    COMMIT;';
$dba->execute($query_string); 
```

它们可以单独发送，驱动程序和/或抽象层可以等待查询执行并返回 SQL STATUS。

```
$query_string = 'START TRANSACTION;';
$dba->execute($query_string);

$query_string = 'SELECT something FROM somewhere;';
$dba->execute($query_string);

$query_string = 'UPDATE something SET something.we_have = something.else;';
$dba->execute($query_string);
$status = $dba->get_status();

if($status)
    $query_string = 'COMMIT;';
else // darn our update must have failed
    $dba->execute($query_string); 
```

并根据该状态，您可以决定天气`COMMIT`或`ROLLBACK`。

当然，这意味着您的脚本连接到数据库所花费的总时间比它在一个连接中将整个字符串推到管道中的时间要长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-11T20:51:22.463

这是一团糟：

```
if($status)
    $query_string = 'COMMIT;';
else // darn our update must have failed
    $dba->execute($query_string); 
```

也许你想要：

```
if($status)
    $query_string = 'COMMIT';
else // darn our update must have failed
    $query_string = 'ROLLBACK';

$dba->execute($query_string); 
```

# html - IE 绝对表位置留下空白

> ID：11300807
> 
> 赞同：1
> 
> 时间：2012-07-02T20:36:24.633
> 
> 标签：html, css, internet-explorer, position

我目前正在与 IE 战斗。在我得到一些关于表的咆哮之前，我知道“不要使用它们”，但我没有写这个，我只是在调试它。我想知道当我绝对定位一个表格时，是否有一些技巧可以让 IE 上的表格间距脱离 IE 流。我包含了一些样式以帮助更好地查看问题。有一条不属于任何东西的空白区域。这在 FF 和 Chrome 上效果很好，IE 只是打破了这个流程。

```
<html>
    <head>
        <style type="text/css">
            .button{
                float:left;
                Background:#0F0;
            }

            #testCont{
                Background:#F00;
            }

            #testUnder{
                Clear:both;
                Background:#00F;
                Color:#FFF;
            }

            .tablePop{
                position: absolute;
                top:60px;
                left:60px;
                Background:#CACACA;
            }
        </style>
    </head>
    <body>
        <div  id="testCont">
            <div class="button">
                Button1
            </div>
            <div class="button">
                Button2
            </div>
            <div class="button">
                Button3
            </div>
            <table border=0 cellspacing=0 cellpadding=0 class="tablePop">
                <tbody>
                    <tr>
                        <td>
                            Row 1
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Row 2
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Row 3
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div  id="testUnder">
            Hello World
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:37:59.927

将您的页面置于标准模式：

```
<!DOCTYPE html>
<html>
    <head> 
```

您可以通过按 F12 并将文档模式切换为标准来快速测试这一点。

或者，您也可以使用`display:inline`代替`float:left`for `.button`。

# php - 任何用于 CMS 的开源小部件系统

> ID：11300808
> 
> 赞同：0
> 
> 时间：2012-07-02T20:36:26.287
> 
> 标签：php, jquery, content-management-system, widget

我正在寻找类似 Yootheme Widgetkit 的东西来在我的 CMS 中实现。

我的目标是在内容中放置一些标记（例如 [gallery=1] ），并且在呈现页面时系统将我的画廊放置在相同的位置。

Yootheme widgetkit 有大约 60 个 jquery 小部件、手风琴、画廊、菜单等...

你知道在自定义 CMS 中是否有类似于 implment 的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:10:41.317

也许试试 jQuery UI？[http://jqueryui.com/home](http://jqueryui.com/home)但不幸的是它没有画廊支持。
jQuery UI 库目前可用于在 MIT 和 GPL 许可下的所有个人或商业项目。

# string - 扫描PowerShell中的特定字符串

> ID：11300813
> 
> 赞同：1
> 
> 时间：2012-07-02T20:37:11.223
> 
> 标签：string, parsing, powershell

我目前正在运行此命令

```
Get-ChildItem -recurse | Select-String -pattern ('a' OR 'b' OR 'c' OR 'd') | group path | select name | export-csv results.csv 
```

修改它以使每个输出旁边的 csv 包含它包含的字符串的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:57:12.193

```
$match = @{n='Matches';e={ ($_ | Select-String -Pattern 'a|b|c|d' -AllMatches).Matches | select -expand value | sort -unique}}
Get-ChildItem -Recurse | select name,fullname,$match 
```

# javascript - 检查身份验证对话框中的领域是否包含字符串

> ID：11300817
> 
> 赞同：1
> 
> 时间：2012-07-02T20:37:44.613
> 
> 标签：javascript, firefox, firefox-addon, xul

我正在尝试检查 Firefox 身份验证对话框中的网站领域是否包含指定的字符串：

```
document.getElementById("prompt-password-message").textContent.indexOf("STRING") 
```

其中 STRING 是我要查找的字符串。

任何想法为什么上面的代码不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:41:55.527

您需要获取“内容文档”，否则 getElementById() 将不返回任何内容...

[https://developer.mozilla.org/En/Working_with_windows_in_chrome_code#Accessing_content_documents](https://developer.mozilla.org/En/Working_with_windows_in_chrome_code#Accessing_content_documents)

```
content.document.getElementById("prompt-password-message").textContent.indexOf("STRING") 
```

# php - php列表循环div错误

> ID：11300819
> 
> 赞同：0
> 
> 时间：2012-07-02T20:37:51.120
> 
> 标签：php

php新手。尝试在循环中创建带有文本的图像列表。该脚本仅适用于 ，但我想为其添加一个类名，以便我可以使用 css 控制它，但我收到错误消息。似乎不能与 HTML 一起干净地流动。有什么建议么？

```
$rs = $conn->Execute("SELECT ProductName, ProductID FROM Products ");
//opens a recordset from the connection object

while (!$rs->EOF) {
  $fv1=$rs->Fields("ProductID");
  $fv2=$rs->Fields("ProductName");
  print "<div class="product-img"> ";
  print "<a href='moredetails.php?productid=$fv1'>";
  print "<img src = \"thumbs/artifact-$fv1.jpg\" alt = \"Artifact-$fv1\"</a><br>";
  print "<a href='moredetails.php?productid=$fv1'>";
  print "$fv2</a><br>";
  print "</div>";
  $rs->MoveNext();
} 
$rs->Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:38:50.560

改变

```
 print "<div class="product-img"> "; 
```

到

```
print "<div class=\"product-img\"> "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:55:58.993

双引号将关闭 php 函数，请尝试为您的类 attr 使用单引号。

```
 print "<div class='product-img'> "; 
```

或逃脱它

```
print "<div class=\"product-img\"> "; 
```

# c++ - 需要澄清 Bloom 和后处理 (DirectX 10 / 11)

> ID：11300823
> 
> 赞同：0
> 
> 时间：2012-07-02T20:38:14.623
> 
> 标签：c++, directx, hlsl, post-processing

最近几天，我阅读了很多关于使用bloom 等进行后处理的文章，并且我能够通过一个单独的着色器运行这个纹理来实现对纹理的渲染功能。现在我对整个事情有一些疑问。

1.  我必须同时渲染吗？场景和纹理放在全屏四边形上？
2.  Bloom 或任何其他具有此渲染到纹理功能的后处理（DOF、模糊）如何工作？或者这是完全不同的东西？
3.  我不太了解 Back 和 Front-Buffer 的概念以及如何将其用于后期处理。
4.  我已经阅读了一些关于体积光渲染的内容，它们使用不同的颜色设置将场景渲染 6 次。这不是非常低效吗？还是我的理解不正确？

感谢有人愿意向我解释这些事情；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:47:43.630

让我试着回答你的一些问题

1.  是的，你必须同时渲染
2.  DOF 通常是通过将“模糊”因子渲染到屏幕外缓冲区来实现的，其中后处理过滤器然后使用该因子比其他像素更模糊某些像素（对锐利和模糊对象之间的颜色泄漏进行一些补偿）。所以是的，基本思想是相同的，渲染到缓冲区，处理它然后显示它（在原始场景的顶部混合或不混合）。
3.  后台缓冲区是您渲染内容的对象（用户将在下一帧看到的内容）。所有的屏幕外渲染都是针对您将创建和使用的其他渲染目标完成的。
4.  我不太明白你的意思。请提供您阅读内容的链接，以便我尝试理解并解释它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:50:19.033

假设：

1.  你有一个单一纹理中每个渲染器像素的“*亮度”*

2.  此纹理包含可以大于 1.0 的浮点值

现在：

> 你做了一个模糊通道（可能是一个单独的模糊），只考虑值大于 1.0 的像素，并将模糊结果放在另一个纹理中。

最后：

> 在最后一个着色器中，您对屏幕进行最终演示。您从“*亮度*”（限制为 1.0）和“*模糊的过度亮度*”中采样并添加它们，获得所谓的绽放效果。

# c# - asp.net c#（mvc）上“build”文件夹中的代码在哪里

> ID：11300825
> 
> 赞同：1
> 
> 时间：2012-07-02T20:38:22.487
> 
> 标签：c#, asp.net-mvc, uploadify

我必须修复一个使用 asp.net 的网站上的错误，但我对此了解不多（asp.net c# mvc）...

问题出在名为 uploadify 的插件中，它要求脚本上传文件：

```
'script': '<%= ResolveUrl("~/Build/UploadImages")%>/<%= ViewData["build_id"] %>', 
```

在浏览器中显示如下：

```
'script': '/prod/cms/Build/UploadImages/680ad442-8e9c-459c-b253-e9c389c1622b', 
```

问题是文件夹'Build'不存在，我认为它是由asp.net创建的......

我找不到上传文件的代码......我在所有文件中用“SaveAs”、“SaveFileAs”、“Upload”、“Uploadify”等词到处搜索，但我仍然没有找到它。 .

uploadify 给出的问题是显示 100% 的上传后出现“HTTP 错误”，我在谷歌上搜索但没有运气......我想如果我找到了上传文件的脚本，也许我可以修复它

这是我的文件的所有脚本：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<IEnumerable<Framework.Models.Image>>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Photo
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <h2>
        Photo</h2>
    <p>
        <label>
            Tipo:</label>
        <%= Html.DropDownList("type", (SelectList)ViewData["types"], new { onchange = "changeScript(this.value)" })%>
    </p>
    <div id="dvUpload">
        <input id="upload" name="upload" type="file" />
        <a href="#" onclick="Upload('<%= ViewData["build_id"] %>')">Fazer Upload</a> | <a
            href="javascript:$('#upload').uploadifyClearQueue();">Limpar Uploads</a>
    </div>

   <%-- <% using (Html.BeginForm("UploadImages", "build", new { id = ViewData["build_id"], type = "c1956908-64f5-4195-ba73-4d7710d560d7" }, FormMethod.Post, new { enctype = "multipart/form-data" }))
       {%>
            <input id="File1" name="upload" type="file" />
            <input type="submit" value="Enviar" />
    <%} %>--%>
    <br />
    <br />
    <table>
        <tr>
            <th>
            </th>
            <th>
                Type
            </th>
            <th>
                Imagem
            </th>
            <th>
                Legenda
            </th>
        </tr>
        <% foreach (var item in Model)
           { %>
        <tr>
            <td>
                <%= Html.ActionLink("Apagar", "deleteimage", new { id = item.Properties.id, build_id = item.Properties.build_id }, new { onclick = "return confirm('Confirma esta ação?')" })%>
            </td>
            <td>
                <%= Html.Encode(item.Type)%>
            </td>
            <td>
                <img src="<%= Cms.Helpers.Settings.CMS_ADDRESS + item.Properties.url_address %>" width="150" height="100" />
            </td>
            <td>
                <%= Html.TextBox(item.Properties.id.ToString(), item.Properties.description) %>
                <input type="button" value="Ok" onclick="saveLegend('<%= item.Properties.id.ToString() %>')" />
            </td>
        </tr>
        <% } %>
    </table>
    <p>
        <%= Html.ActionLink("Create New", "Create") %>
    </p>
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="HeaderContent" runat="server">

    <script type="text/javascript" src="<%= ResolveUrl("~/Content/JS/swfobject.js") %>"></script>

    <script type="text/javascript" src="<%= ResolveUrl("~/Content/JS/jQuery/jquery.uploadify.v2.1.0.js") %>"></script>

    <script type="text/javascript">

        var html = "";

        jQuery(document).ready(function() {

            html = jQuery("#dvUpload").html();

            jQuery("#upload").uploadify({
                'uploader': '<%= ResolveUrl("~/Content/Flash/uploadfy.swf") %>',
                'script': '<%= ResolveUrl("~/Build/UploadImages")%>/<%= ViewData["build_id"] %>',
                'cancelImg': '<%= ResolveUrl("~/Content/Images/cancel.png") %>',
                'folder': '<%= ResolveUrl("~/Content/Images") %>',
                'multi': true,
                'simUploadLimit': 10,
                'fileDesc': 'Apenas Imagens são permitidas',
                'fileExt': '*.gif;*.jpg;*.png',
                'onError'      : function(errorType) {
                    //alert('The error was ' + errorType.toSource());
                    alert(JSON.stringify(errorType, null, 4));
                },
                'onComplete': function() {
                    alert("foi tudo");
                }
            });

            AddNullValueSelectObject('type');

        });

        function Upload(build_id) {
            jQuery('#upload').uploadifyUpload();
        }

        function changeScript(val)
        {
            jQuery("#dvUpload").empty();
            jQuery("#dvUpload").html(html);

            var culture = jQuery('#culture').val();

            jQuery("#upload").uploadify({
                'uploader': '<%= ResolveUrl("~/Content/Flash/uploadfy.swf") %>',
                'script': '<%= ResolveUrl("~/Build/UploadImages")%>/<%= ViewData["build_id"] %>?type=' + val,
                'cancelImg': '<%= ResolveUrl("~/Content/Images/cancel.png") %>',
                'folder': '<%= ResolveUrl("~/Content/Images") %>',
                'multi': true,
                'simUploadLimit': 10,
                'fileDesc': 'Apenas Imagens são permitidas',
                'fileExt': '*.gif;*.jpg;*.png',
                'onError'      : function(errorType) {
                    //alert('The error was: ' + errorType.toSource());
                    alert(JSON.stringify(errorType, null, 4));
                },
                'onComplete': function() {
                    alert("foi tudo");
                }
            });
        }

        function saveLegend(id)
        {
            var text = jQuery('#' + id).val();

            jQuery.ajax({
                type: 'GET',
                url: '<%= ResolveUrl("~/build/UpdatePhotoLegend")%>/' + id,
                data: 'legend=' + text,
                success: function(data) {
                    alert('Alterado com sucesso!');
                }
            });
        }
        function AddNullValueSelectObject(object_id) {
            jQuery('#' + object_id).append("<option value='00000000-0000-0000-0000-000000000000'>--- SELECIONE ---</option>");
            jQuery("#" + object_id + " option[value='00000000-0000-0000-0000-000000000000']").attr('selected', 'selected');
        }
    </script>

</asp:Content> 
```

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:45:31.933

通常我不会回答，除非我很确定我的答案，但是，因为没有其他人回应......

我没有使用 uploadify 的经验，但看起来您使用的是旧版本的 uploadify，并且 api 已经发生了很大变化，所以我很难确定。我认为'script'参数实际上是指通常处理上传文件保存的服务器端“脚本”（当前版本[http://www.uploadify.com/documentation/uploadify中的'uploader'参数/上传者/](http://www.uploadify.com/documentation/uploadify/uploader/)）。

你有一个带有 UploadImages 动作（方法）的 BuildController 类吗？如果是这样，那可能是您的错误的原因之一（保存到磁盘时出错）。如果您确实有一个 BuildController，我想知道解析 url 的调用是否正确？解析的路径对我来说很有趣（通常你不会在 mvc 中解析基于路由的 url，因为解析 url 不支持路由）。

如果您没有 BuildController 而我完全不在，请告诉我，我将删除此答案。这有点像在黑暗中拍摄。但这是有道理的。

编辑：以防万一您根本没有 MVC 经验，“构建文件夹”中的代码应位于您的 mvc Web 应用程序中的一个名为 Controllers 的文件夹下，该文件夹位于名为 UploadImages 的方法中的 BuildController 类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:22:05.557

**将我的评论提升为答案**

脚本可能作为资源嵌入。尝试使用 ILSpy 来确认这一点。在这种情况下，您将需要访问源代码。此外，可能脚本已被缩小/混淆，这就是您找不到任何东西的原因。

# java - 根据签名在 Netbeans 中自动创建构造函数主体和字段

> ID：11300827
> 
> 赞同：10
> 
> 时间：2012-07-02T20:38:36.333
> 
> 标签：java, netbeans

如果我从 Netbeans 中的一个空类 (TestClass) 开始并添加以下空构造函数：

```
public void TestClass(String a, String b) {
} 
```

有没有办法让netbeans自动生成：

```
private final String a;
private final String b;

public void TestClass(String a, String b) {
    this.a = a;
    this.b = b;
} 
```

我知道我可以先创建 2 个成员并要求 netbeans 自动生成构造函数，但我要求反过来。

例如，在 Eclipse 中，这可以通过在构造函数的参数上按`CTRL`+ `1`> 将参数分配给新字段来实现。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-07T08:35:18.413

来自：[https ://coderwall.com/p/oyanzg](https://coderwall.com/p/oyanzg)

只需将光标指向您希望生成的代码出现的位置，然后按 Alt + Insert（或选择 Source -> Insert Code）。将出现以下菜单，您可以在其中选择生成所需的任何内容：

![在此处输入图像描述](../Images/4d38f2fd00c0f2ca4d865f0e7ef84c2f.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T20:51:10.310

您可以编写具有所需签名的空构造函数。然后将光标设置在参数旁边并按 Alt+ENTER。

NetBeans 将要求创建一个新字段。按 ENTER 键，NetBeans 将为您编写代码。

我认为您必须分别为每个参数执行此操作，但我不确定。

一般来说，NetBeans 中的 Alt+ENTER 与 Eclipse 中的 Ctrl+1 类似，在其他地方也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-13T15:34:10.373

对于 mac 用户：

突出显示变量，然后按 control + i

然后选择你想要的选项

# objective-c - iOS 中的货件追踪

> ID：11300833
> 
> 赞同：4
> 
> 时间：2012-07-02T20:39:17.570
> 
> 标签：objective-c, ios, cocoa-touch

iOS 4 会自动检测电子邮件、便笺和消息中的跟踪号码，并将它们转换为可点击的链接。

![发货图片](../Images/37ac10335eb6db7df967f0eb933bb000.png)

它重定向到这个 URL，

[http://trackingshipment.apple.com/?Company=UPS&Locale=&TrackingNumber=1Z1234567890123456](http://trackingshipment.apple.com/?Company=UPS&Locale=&TrackingNumber=1Z1234567890123456)

我们如何在我们的 iOS 应用程序中使用这个 API 或库，以便它自动检测或强制检测发货号码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T02:46:06.033

不幸的是，公开发布的数据检测器类型不包括常见的运营商跟踪号码。我写了一个小项目来展示如何检测 UPS、USPS 和 FedEx 包裹号码，并得到了很好的结果：

![跟踪代码演示](../Images/7f6f59b813ce3171060b89c2cd9602db.png)

您必须自己完成组装跟踪 URL 的工作，但此示例代码可能会帮助您入门。[在这里下载](https://dl.dropbox.com/u/13103695/Shipments.zip)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T21:01:29.663

用于执行此操作的类称为[NSDataDetector](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSDataDetector_Class/Reference/Reference.html)。

它是一个子类`NSRegularExpression`，您可以在其中指定一些要查找的内置模式。

`NSTextCheckingType`可以在[此处查看](https://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSTextCheckingResult_Class/Reference/Reference.html#//apple_ref/c/tdef/NSTextCheckingType)枚举中的内置类型值列表。

我没有看到专门用于跟踪信息的，但最接近的似乎是`NSTextCheckingTypeTransitInformation`. 这很可能是您将要使用的那个。

祝你好运！

# ruby-on-rails - Rails 表单格式化

> ID：11300835
> 
> 赞同：0
> 
> 时间：2012-07-02T20:39:31.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我刚刚回答[了在 Rails 中提交多个表单，](https://stackoverflow.com/questions/11299884/submitting-multiple-forms-in-rails)这导致了另一个问题。在我的表格中，我有以下内容（还有很多）：

```
= hidden_field_tag :event_id, :value => @event.id

.control-group
  = label_tag :title
  .controls
    = select(:registration, "registrations[][title]", Registration::TITLE) 
```

最后一行返回：

> "注册"=>[{"职称"=>{"注册"=>"先生"},

与预期相反：

> “头衔”=>“先生”

我试过了：

```
= select(:registration, "registrations[][title]", Registration::TITLE) 
```

返回：

> 未定义的方法 `registrations[][title]' for #

并尝试过：

```
= select("registrations[][title]", Registration::TITLE) 
```

返回：

> 参数数量错误（2 对 3）

看看下面的参数， event(_id) 只存在一次，然后 :title 奇怪开始了，知道问题可能是什么吗？

```
{"utf8"=>"✓",
 "authenticity_token"=>"BQXm5fngW27z/3Wxy9qEzu6D8/g9YQIfBL+mFKVplgE=",
 "event_id"=>"7",
 "registrations"=>[{"title"=>{"registration"=>"Mr"},
 "first_name"=>"Name1",
 "last_name"=>"Surname1",
 "company_name"=>"Company1",
 "designation"=>"Designation1",
 "landline"=>"Landline1",
 "cell"=>"Cell1",
 "email"=>"address1@example.com",
 "member"=>{"registration"=>"No"},
 "dietary"=>{"registration"=>"None"},
 "specify"=>"None"},
 {"first_name"=>"Name2",
 "last_name"=>"Surname2",
 "company_name"=>"Company2",
 "designation"=>"Designation2",
 "landline"=>"Landline2",
 "cell"=>"Cell2",
 "email"=>"address2@example.com",
 "member"=>{"registration"=>"No"},
 "dietary"=>{"registration"=>"None"},
 "specify"=>"None",
 "title"=>{"registration"=>"Mr"}},
 {"first_name"=>"Name3",
 "last_name"=>"Surname3",
 "company_name"=>"Company3",
 "designation"=>"Designation3",
 "landline"=>"Landline3",
 "cell"=>"Cell3",
 "email"=>"address3@example.com",
 "member"=>{"registration"=>"No"},
 "dietary"=>{"registration"=>"None"},
 "specify"=>"None"}],
 "commit"=>"Submit registrations"} 
```

请注意:dietary 和:member 的格式与:title 相同。提前感谢你的帮助！

**编辑**

因此，通过 text_field_tag 提交哈希很简单：

= text_field_tag "注册[][first_name]"

但问题出在我的 hidden_​​field_tag 和 select_tag 上。

它添加了错误的值，例如：

```
"title"=>{"registrations"=>"Mr"} 
```

基本上看来我需要找到一种更好的方法将这些值添加到哈希中。我将继续尝试找到解决方案并将其发布在这里，除非有人击败我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T03:15:46.247

除非我读错了，否则您的前两个选择调用是相同的。你试过`= select(:registrations, "title", Registration::TITLE)`吗？如果您查看 api.rubyonrails.org 中方法的文档，它会声明第一个值是对象，第二个是属性。那将是`registrations => { :title => "Value" }`, 在参数中。如果你只是想要`:title => "Value"`，那么你需要 select_tag 方法。

# android - 指南针校准

> ID：11300837
> 
> 赞同：1
> 
> 时间：2012-07-02T20:39:41.317
> 
> 标签：android, android-sensors

所以我一直在构建一个利用磁罗盘和手机方向等的 AR 引擎。在这个过程中，我构建了一个免费的愚蠢的 AR Compass，在测试中我意识到 90% 的时间它工作得很好！但有时磁罗盘传感器停止响应..我发现的每个文档都在谈论用户使用他们的设备制作数字 8 以重新校准罗盘.. 这有时有效但并非总是如此.. 有没有办法以编程方式重置罗盘? 在冰淇淋三明治上测试 nexus prime！

埃利德尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T20:46:13.467

The compass cannot be reset programmatically because of the way calibration works.

The compass works by detecting small changes in the magnetic field around it. When you wave it in a figure of 8 pattern, the changes are to fast and too much, which resets it. This causes it to recalibrate. However, there are some cases in which recalibration will not help. These are usually when you are standing next to high voltage power lines, or next to a piece of metal, or are inside a car that has a lot of static in it (especially the area next to the dashboard),

# asp.net-mvc-3 - GZip system.web.optimization 包

> ID：11300839
> 
> 赞同：10
> 
> 时间：2012-07-02T20:40:04.390
> 
> 标签：asp.net-mvc-3, asp.net-optimization, bundling-and-minification

我正在使用新的 System.Web.Optimization 并创建了一个这样的包：

```
bundles.Add(New ScriptBundle("~/bundles/BaseJS").Include(
                "~/Resources/Core/Javascripts/jquery-1.7.1.js",
                "~/Resources/Core/Javascripts/jquery-ui-1.8.16.js",
                "~/Resources/Core/Javascripts/jquery.validate.js",
                "~/Resources/Core/Javascripts/jquery.validate.unobtrusive.js",
                "~/Resources/Core/Javascripts/jquery.unobtrusive-ajax.js")) 
```

在我看来，我已经添加了这个

```
@System.Web.Optimization.Scripts.Render("~/bundles/BaseJS") 
```

在提琴手中，URL 会遇到未来 1 年的过期标头和文本/javascript 的内容类型

在 web.config 中，我有一些用于处理静态 JS 文件的 gzip 代码，但它似乎不适用于缩小的捆绑包。

```
<staticContent>
  <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="365.00:00:00"/>
  <remove fileExtension=".js"/>
  <mimeMap fileExtension=".js" mimeType="text/javascript"/>
</staticContent>
<urlCompression doDynamicCompression="true" doStaticCompression="true" dynamicCompressionBeforeCache="true"/>
<httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
  <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll"/>
  <dynamicTypes>
    <add mimeType="text/*" enabled="true"/>
    <add mimeType="text/javascript" enabled="true"/>
  </dynamicTypes>
  <staticTypes>
    <add mimeType="text/*" enabled="true"/>
    <add mimeType="text/javascript" enabled="true"/>
  </staticTypes>
</httpCompression> 
```

有没有办法让渲染包 gzip 内容？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-31T10:51:52.870

使用最新`ASP.NET Optimization (v1.1.2)`的，`GZipTransform`课程效果不佳。

我找到了一种使用自定义`Bundle`类的新方法，该类将始终在响应之前压缩捆绑内容（已转换和缓存）：

```
public class GZipBundle : Bundle
{
    public GZipBundle(string virtualPath, params IBundleTransform[] transforms)
        : base(virtualPath, null, transforms) { }

    public override BundleResponse CacheLookup(BundleContext context)
    {
        if (null != context) GZipEncodePage(context.HttpContext);
        return base.CacheLookup(context);
    }

    // Sets up the current page or handler to use GZip through a Response.Filter.
    public static void GZipEncodePage(HttpContextBase httpContext)
    {
        if (null != httpContext && null != httpContext.Request && null != httpContext.Response
            && (null == httpContext.Response.Filter
            || !(httpContext.Response.Filter is GZipStream || httpContext.Response.Filter is DeflateStream)))
        {
            // Is GZip supported?
            string acceptEncoding = httpContext.Request.Headers["Accept-Encoding"];
            if (null != acceptEncoding
                && acceptEncoding.IndexOf(DecompressionMethods.GZip.ToString(), StringComparison.OrdinalIgnoreCase) >= 0)
            {
                httpContext.Response.Filter = new GZipStream(httpContext.Response.Filter, CompressionMode.Compress);
                httpContext.Response.AddHeader("Content-Encoding", DecompressionMethods.GZip.ToString().ToLowerInvariant());
            }
            else if (null != acceptEncoding
                && acceptEncoding.IndexOf(DecompressionMethods.Deflate.ToString(), StringComparison.OrdinalIgnoreCase) >= 0)
            {
                httpContext.Response.Filter = new DeflateStream(httpContext.Response.Filter, CompressionMode.Compress);
                httpContext.Response.AddHeader("Content-Encoding", DecompressionMethods.Deflate.ToString().ToLowerInvariant());
            }

            // Allow proxy servers to cache encoded and unencoded versions separately
            httpContext.Response.AppendHeader("Vary", "Content-Encoding");
        }
    }
}

// Represents a bundle that does CSS minification and GZip compression.
public sealed class GZipStyleBundle : GZipBundle
{
    public GZipStyleBundle(string virtualPath, params IBundleTransform[] transforms) : base(virtualPath, transforms) { }
}

// Represents a bundle that does JS minification and GZip compression.
public sealed class GZipScriptBundle : GZipBundle
{
    public GZipScriptBundle(string virtualPath, params IBundleTransform[] transforms)
        : base(virtualPath, transforms)
    {
        base.ConcatenationToken = ";" + Environment.NewLine;
    }
} 
```

然后你可以使用`GZipStyleBundle`and`GZipScriptBundle`来替换原来的`Bundle`类：`StyleBundle`, `ScriptBundle`. 前任：

```
public static class BundleConfig
{
    // For more information on Bundling, visit http://go.microsoft.com/fwlink/?LinkId=254725
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new GZipScriptBundle("~/bundles/jquery.js").Include(...));
        bundles.Add(new GZipScriptBundle("~/bundles/jquery-ui.js", new JsMinify()).Include(...));

        bundles.Add(new GZipStyleBundle("~/bundles/all.css", new CssMinify()).Include(...));
    }
} 
```

问候

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-05T22:58:17.520

正如您所指出的，通过创建实现 IBundleTransform 的类来创建自定义捆绑转换是正确的方法。例如，以下是使用 SharpZipLib（[通过 NuGet](https://www.nuget.org/packages/SharpZipLib/)）进行 GZip 压缩的示例包转换：

```
public class GZipTransform : IBundleTransform 
{
    string _contentType;

    public GZipTransform(string contentType)
    {
        _contentType = contentType;
    }

    public void Process(BundleContext context, BundleResponse response)
    {
        var contentBytes = new UTF8Encoding().GetBytes(response.Content);

        var outputStream = new MemoryStream();
        var gzipOutputStream = new GZipOutputStream(outputStream);
        gzipOutputStream.Write(contentBytes, 0, contentBytes.Length);

        var outputBytes = outputStream.GetBuffer();
        response.Content = Convert.ToBase64String(outputBytes);

        // NOTE: this part is broken
        context.HttpContext.Response.Headers["Content-Encoding"] = "gzip";
        response.ContentType = _contentType ;
    }
} 
```

现在，这是不幸的部分——在测试这个样本时，我发现了一个会阻止它工作的错误。最初的设计期望人们会做一些非常简单的事情——因此，BundleResponse 公开了允许您设置内容（更具体地说，字符串内容）和内容类型的属性。BundleContext 暴露了 HttpContext 的一个属性，这会使一个有理智的人相信可以在那里设置响应的附加属性（如上所示）。然而，这具有误导性，原因有两个：

1.  捆绑转换作为创建捆绑的一部分运行 - 并且在第一次引用捆绑时创建捆绑（不是取消引用，如浏览器遵循脚本标记中的 src 属性 - 但引用，如视图调用Scripts.Render 辅助方法）。在我上面的示例中，这意味着将在第一页上设置一个值为 gzip 的内容编码标头，其视图使用捆绑的辅助方法来生成链接 - 如果实际的 HTTP 内容没有经过 gzip 压缩，你由于浏览器无法解码 HTTP 内容，因此会出现错误。

2.  即使#1 不是问题，该包在创建后会立即放入 ASP.NET 缓存中 - 因此此代码路径只会执行一次。

我们正在仔细研究下一版本框架中的设计，以使您能够指定 HTTP 响应消息的所有（理想情况下）方面，这些方面不受 HTTP 上下文的影响（这意味着它很容易被缓存）。

一个附加说明。要提供自定义捆绑转换，您需要回退到创建 Bundle 的实例而不是 ScriptBundle/StyleBundle。这些类实际上只是具有预配置捆绑转换的捆绑的简写类型。要基于 Bundle 创建一个捆绑包，您需要执行以下操作：

```
var jqueryBundle = new Bundle("~/bundles/jqueryall", new GZipTransform("text/javascript"));
jqueryBundle.Include("~/Scripts/jquery-1.*",
    "~/Scripts/jquery-ui*",
    "~/Scripts/jquery.unobtrusive*",
    "~/Scripts/jquery.validate*");
bundles.Add(jqueryBundle); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-04T23:49:04.813

可以使用 HttpModule 来实现

```
public class GzipModule : IHttpModule
{
    #region IHttpModule Members

    public void Init(HttpApplication application)
    {
        application.BeginRequest += Application_BeginRequest;
    }

    public void Dispose()
    {
    }

    #endregion

    private void Application_BeginRequest(Object source, EventArgs e)
    {
        HttpContext context = HttpContext.Current;
        HttpRequest request = context.Request;
        HttpResponse response = context.Response;
        string acceptEncoding = request.Headers["Accept-Encoding"];

        if (String.IsNullOrEmpty(acceptEncoding))
            return;

        acceptEncoding = acceptEncoding.ToUpperInvariant();

        if (acceptEncoding.Contains("GZIP"))
        {
            response.AppendHeader("Content-Encoding", "gzip");
            response.Filter = new GZipStream(response.Filter, CompressionMode.Compress);
        }
        else if (acceptEncoding.Contains("DEFLATE"))
        {
            response.AppendHeader("Content-Encoding", "deflate");
            response.Filter = new DeflateStream(response.Filter, CompressionMode.Compress);
        }
    }
} 
```

并在配置中注册

```
 <system.webServer>
    <modules>
        <add name="Gzip" type="Gecko.Web.GzipModule" />
    </modules> 
```

# java - 加载并显示文件夹中的所有图像

> ID：11300847
> 
> 赞同：18
> 
> 时间：2012-07-02T20:41:14.193
> 
> 标签：java, image, file

我想使用 Java 读取文件夹中的所有图像。

**什么时候：**我在 Java 应用程序中按下一个按钮，
**它应该：**

*   在弹出窗口中询问目录的路径，
*   **然后**从该目录加载所有图像，
*   **然后**显示它们的名称、尺寸类型和尺寸。

如何进行？

我有读取图像的代码以及文件夹中所有图像的代码，但是我上面所说的事情是如何完成的？

欢迎任何建议或帮助！请提供参考链接！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-02T20:58:50.740

*未经测试，因为不是在安装了 JDK 的机器上，所以请耐心等待，所有这些都是“按原样”输入的，但应该让你开始（期待一波反对票......）*

# 从文件夹加载所有图像

```
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FilenameFilter;
import java.io.IOException;
import javax.imageio.ImageIO;

public class Test {

    // File representing the folder that you select using a FileChooser
    static final File dir = new File("PATH_TO_YOUR_DIRECTORY");

    // array of supported extensions (use a List if you prefer)
    static final String[] EXTENSIONS = new String[]{
        "gif", "png", "bmp" // and other formats you need
    };
    // filter to identify images based on their extensions
    static final FilenameFilter IMAGE_FILTER = new FilenameFilter() {

        @Override
        public boolean accept(final File dir, final String name) {
            for (final String ext : EXTENSIONS) {
                if (name.endsWith("." + ext)) {
                    return (true);
                }
            }
            return (false);
        }
    };

    public static void main(String[] args) {

        if (dir.isDirectory()) { // make sure it's a directory
            for (final File f : dir.listFiles(IMAGE_FILTER)) {
                BufferedImage img = null;

                try {
                    img = ImageIO.read(f);

                    // you probably want something more involved here
                    // to display in your UI
                    System.out.println("image: " + f.getName());
                    System.out.println(" width : " + img.getWidth());
                    System.out.println(" height: " + img.getHeight());
                    System.out.println(" size  : " + f.length());
                } catch (final IOException e) {
                    // handle errors here
                }
            }
        }
    }
} 
```

# 使用的 API

这相对简单，只使用标准的 JDK 打包类：

*   [`File`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)
*   [`FilenameFilter`](http://docs.oracle.com/javase/6/docs/api/java/io/FilenameFilter.html)
*   [`BufferedImage`](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html)
*   [`ImageIO`](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html)

[Java 教程](http://docs.oracle.com/javase/tutorial)的这些会话也可能对您有所帮助：

*   [读取/加载图像](http://docs.oracle.com/javase/tutorial/2d/images/loadimage.html)
*   [如何使用图标](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)
*   [如何使用文件选择器](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)

# 可能的增强

*   使用 Apache Commons`FilenameUtils`提取文件的扩展名
*   基于实际的 mime 类型或内容检测文件，而不是基于扩展名
*   我把 UI 代码留给你。由于我不知道这是否是家庭作业，因此我不想提供完整的解决方案。但要继续：
    *   查看 a`FileChooser`以选择文件夹。
    *   我假设您已经知道如何制作框架/窗口/对话框。
    *   阅读[Java 教程](http://docs.oracle.com/javase/tutorial) [如何使用图标](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)部分，它教您如何显示和标记它们。
*   我遗漏了一些需要处理的问题：
    *   异常处理
    *   带有邪恶结尾的文件夹（假设您有一个文件夹“TryMeIAmEvil.png”）

通过结合以上所有内容，这很容易做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-17T21:31:28.973

javaxt.io.Directory 目录 = new javaxt.io.Directory("C:\Users\Public\Pictures\Sample Pictures"); 目录.getFiles(); javaxt.io.File[] 文件；

```
 java.io.FileFilter filter = file -> !file.isHidden() && (file.isDirectory() || (file.getName().endsWith(".jpg")));
    files = directory.getFiles(filter, true);
    System.out.println(Arrays.toString(files)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-02-26T13:26:46.190

```
step 1=first of all make a folder out of webapps 
step2= write code to uploading a image in ur folder
step3=write a code to display a image in ur respective jsp,html,jframe what u want

this is folder=(images)
reading image for folder'
Image image = null;
        try {
            File sourceimage = new File("D:\\images\\slide4.jpg");
              image = ImageIO.read(sourceimage);

        } catch (IOException e) {
            e.printStackTrace();
        }       
    } 
```

# snmp - SNMP OID 树遍历

> ID：11300851
> 
> 赞同：2
> 
> 时间：2012-07-02T20:41:27.773
> 
> 标签：snmp, net-snmp

我正在尝试编写一个 SNMP 代理，坦率地说，整个过程就像阅读翻译不佳的立体声指令。但我很接近，除了一个问题：实现 GETNEXT 操作。

考虑以下系统 OID 空间块：

```
.1.3.6.1.2.1 .1.5.0
             .1.6.0
             .1.8.0
             .1.9.1 .2.1
                    .2.2
                    .2.3 
```

为了明确起见，假设我想做

```
 $ snmpwalk -On -v 2c -c public localhost .1.3.6.1.2.1.1.8.0 
```

net-snmp 通过首先在 .1.8.0 上执行 GET，然后执行 GETNEXT 来实现这一点。GETNEXT 应该从 .1.8.0 到 .1.9.1.2.1，然后是 .1.9.1.2.2，依此类推。

我认识到这在概念上只是深度优先行走，但由于某种原因——也许是年龄——当它必须找到 GET 节点然后备份时，我无法找到一种干净的方式来实现该搜索下一次调用并找到“下一个”节点。

随意向我展示它非常简单。

**更新**

我在 26 小时的编程回合后写了这篇文章，所以我可以想象它并不清楚。这是问题：

我需要一个函数*后继者*，它以 OID 作为输入并返回下一个 OID——其中 next 是 SNMP 工具实现的深度优先顺序。我有几个解决方案，通过以深度优先顺序枚举 OID 并等待正确的出现，; 我正在寻找一个比 O(l+n) 更好的优雅的，其中 l 是 OID 的长度，n 是 OID 的数量。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-07T11:54:56.590

根据您正在行走的根 OID 检查响应 PDU 中的每个 OID。如果找到匹配项，那么您就知道停止遍历树。如果找不到匹配项，则发送下一个 GET_MSG_BULK 请求 PDU。

# jenkins - Jenkins 应该运行多少个线程？

> ID：11300857
> 
> 赞同：7
> 
> 时间：2012-07-02T20:41:51.123
> 
> 标签：jenkins

我有一个 Jenkins 服务器，它一直用完内存并且无法创建本机线程。我增加了内存并安装了[监控插件](https://wiki.jenkins-ci.org/display/JENKINS/Monitoring)。

服务器上大约有 150 个项目，我整天都在看着线程数不断增加。现在大约是 990。我预计当它达到 1024（线程的用户限制）时，Jenkins 将再次耗尽内存。

`[edit]: I have hit 1016 threads and am now getting the out of memory error`

这是 Jenkins 运行的适当数量的线程吗？我如何告诉詹金斯在完成线程后销毁它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T00:11:49.817

**tl;博士：**

有一个运行 bash 脚本的构建后操作没有通过 stderr 或 stdout 向 Jenkins 返回任何内容。因此，每次构建运行时，都会创建线程并卡住`wait`。我通过让 bash 脚本返回`exit`状态解决了这个问题。

**长答案**

我在 CentOS 上运行 Jenkins，并通过 RPM 安装。在修改 Winstone servlet 容器方面，您可以在`/etc/sysctrl/jenkins`. 但是，上面的选项仅控制创建的 HTTP 线程数，而不是总体线程数。

如果我的线程挂在访问 Jenkins 的 HTTP API 作为提交后操作的一部分，那将是一个解决方案。但是，使用我的问题中提到的非常方便的监控插件，我检查了卡住的线程。

线卡在`com.trilead.ssh2.channel`包裹里的东西上。该`getChannelData`方法有一个`while(true)`循环，用于查找ssh 流的`stderr`or的输出。`stdout`线程在那个循环中变得很糟糕，因为没有任何东西通过。我在[GrepCode](http://grepcode.com/file/repo1.maven.org/maven2/org.jvnet.hudson/trilead-ssh2/build212-hudson-6/com/trilead/ssh2/channel/ChannelManager.java#ChannelManager.getChannelData%28com.trilead.ssh2.channel.Channel,boolean,byte%5B%5D,int,int%29)上学到了这一点。

这是因为构建后的操作是通过 SSH 向服务器执行命令并执行一个 bash 脚本来检查 git 存储库。但是，git repo 配置错误，git 命令会出错，但`exit 1`状态没有通过 bash 脚本冒泡（部分原因是 if-elif-else 语句格式错误）。

脚本完成并且构建被认为是成功的，但是由于这个 git 错误，处理来自 Jenkins 的 SSH 连接的线程不知何故被挂起。

但是感谢您对这个问题的帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T21:33:34.810

如果您“开箱即用”地运行 Jenkins，它将使用 Winstone servlet 容器。您可以将命令行参数传递给它，如此[处所述](http://winstone.sourceforge.net/#commandLine)。其中一些参数可以限制线程数：

```
 --handlerCountStartup    = set the no of worker threads to spawn at startup. Default is 5
 --handlerCountMax        = set the max no of worker threads to allow. Default is 300
 --handlerCountMaxIdle    = set the max no of idle worker threads to allow. Default is 50 
```

现在，我前段时间尝试过，但并不是 100% 相信它有效，所以不能保证，但值得一试。

# ios - 在 Apple 审核时隐藏应用内购买

> ID：11300859
> 
> 赞同：0
> 
> 时间：2012-07-02T20:42:02.093
> 
> 标签：ios, app-store, in-app-purchase

我有一个带有应用内购买的 iPhone 应用，我希望能够独立于它发布应用（应用内购买）。换句话说，应用内购买有时可能处于“等待审核”状态，不应由应用显示。

如果我理解正确，在这种情况下，`SKProductsResponse`对象（由 Apple App Store 返回以响应有关产品列表信息的请求）将在`invalidProductIdentifiers`数组下列出特定产品。因此，在显示应用内购买之前，我可以检查数组以检查产品是否存在。这仍然应该允许 Apple 使用我的应用程序的发布版本测试应用内购买，因为我假设他们的测试是在所有应用内购买都有效的沙箱中完成的。

它是否正确？我应该采用不同的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:54:07.217

您描述了向用户显示 IAP 内容的正确工作流程。放置一个模态对话框或 UIActivityIndi​​cator，告诉客户正在下载 IAP 内容。使用返回的 productIdentifiers 填充您的商店 gui。

我不鼓励您在特定视图中为特定的应用内购买进行硬编码，然后尝试填充该视图。如果您对此很聪明并提前检查有效内容，则可以这样做，但是在客户已经期望看到某些内容之后进行检查可能会以 Apple 审查和您的客户认为您的应用程序损坏而告终。

最不美观的实现是一个 tableView 显示返回的 productIdentifiers 和它们各自的价格，允许客户从熟悉的列表中选择。

# datasource - 我无法加载我的 SmartGWT 数据源

> ID：11300864
> 
> 赞同：0
> 
> 时间：2012-07-02T20:42:44.600
> 
> 标签：datasource, smartgwt

我正在修改内置 ds 的示例。此示例的工作方式是您需要选择一个数据源，然后从那里填充一个表中的数据。这个想法是为了展示同一个组件如何适应多个数据源。我已经成功地运行了这个示例并且它可以工作，但是我正在尝试修改它，所以你跳过了第一步——只有一个数据源被加载“到”表中。令我困惑的是，这应该是微不足道的，但由于某种原因它不是。我将只粘贴代码的不同部分，这个有效：

```
 // we create a list of datasources
    ListGrid grid = new ListGrid();
    grid.setLeft(20);
    grid.setTop(75);
    grid.setWidth(130);
    grid.setLeaveScrollbarGap(false);
    grid.setShowSortArrow(SortArrow.NONE);
    grid.setCanSort(false);
    grid.setFields(new ListGridField("dsTitle", "Select a DataSource"));
    // I'm just loading the one I need
    grid.setData(new ListGridRecord[] { new DSRecord("predmeti", "predmeti")});
    grid.setSelectionType(SelectionStyle.SINGLE);
    grid.addRecordClickHandler(new RecordClickHandler() {
        public void onRecordClick(RecordClickEvent event) {
            DSRecord record = (DSRecord) event.getRecord();
            bindComponents(record.getDsName());
        }
    });

    grid.draw(); 
```

这是 bindComponents 方法：

```
private void bindComponents(String dsName) {
    DataSource ds = DataSource.get(dsName);
    boundList.setDataSource(ds);
    boundViewer.setDataSource(ds);
    boundForm.setDataSource(ds);
    boundList.fetchData();
    newBtn.enable();
    saveBtn.disable();
} 
```

这可以正常工作。现在，由于我只有一个数据源，我可以跳过网格，直接调用 bindComponents：

```
bindComponents(); 
```

bindComponents 看起来像这样：

```
private void bindComponents() {
    DataSource ds = DataSource.get("predmeti");
    boundList.setDataSource(ds);
    boundViewer.setDataSource(ds);
    boundForm.setDataSource(ds);
    boundList.fetchData();
    newBtn.enable();
    saveBtn.disable();
} 
```

我不明白为什么第二个不起作用，它会中断`boundList.setDataSource(ds);`。我在调试模式下检查了它，返回了一个对象，并且在两种情况下它看起来都“相同”，但由于某种原因它在第二个示例中不起作用，所以我猜我太早地实例化数据源或，不知何故，完全错了:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:38:11.487

数据源一切都很好，问题很简单，我一定是累了——调用时的 boundList 对象`boundList.setDataSource(ds);`还没有被实例化。我不断收到空指针异常，但我认为数据源有问题。

# java - 如何在javafx2中获取变换形状的坐标？

> ID：11300868
> 
> 赞同：1
> 
> 时间：2012-07-02T20:43:10.183
> 
> 标签：java, javafx-2

我在一个窗格上有 2 个椭圆，一个应用了旋转变换（旋转点显然不是椭圆本身:)），另一个没有。现在我需要从变换椭圆的中心到未变换椭圆的中心画一条线。所以我需要转换后的椭圆的坐标，有没有办法检索这些？（除了线条图之外，我还需要它们进行其他计算）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:06:39.917

使用`localToParent`方法。例子：

```
 @Override
    public void start(Stage stage) {
        stage.setTitle(VersionInfo.getRuntimeVersion());
        Group root = new Group();

        // ellypsis with center in 100,100
        Arc ellypsis = ArcBuilder.create().centerX(100).centerY(100).length(360).radiusX(100).radiusY(50).fill(Color.TRANSPARENT).stroke(Color.RED).build();
        // rotate
        ellypsis.getTransforms().add(new Rotate(50, 50, 45));

        // find out where is 100,100 in rotated ellypsis
        Point2D localToParent = ellypsis.localToParent(100,100);

        // draw line from that point
        Line line = new Line(localToParent.getX(), localToParent.getY(), 200, 200);
        root.getChildren().addAll(ellypsis, line);
        stage.setScene(new Scene(root, 300, 250));
        stage.show();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:17:59.513

鉴于问题中没有提供代码，我会给你一个数学答案:)

假设你有`ellipse1`哪个中心是`X1`，`elipse2`哪个中心是`X2`。转换为您提供以下内容

```
elipse1 --> f(elipse1) = elipse1' 
```

如果您想知道变换后的椭圆`ellipse1'`中心坐标 ( `X1'`)，只需执行以下操作：

```
X1 --> f(X1) = X1` 
```

因此，简而言之，只需将相同的变换应用于您的原始点`X1`，您将获得变换后的坐标`X1'`。现在你所要做的就是从`X1'`到画一条线`X2`

# javascript - Backbone Fetch Request 是 OPTIONS 方法

> ID：11300874
> 
> 赞同：17
> 
> 时间：2012-07-02T20:43:34.253
> 
> 标签：javascript, jquery, backbone.js, fetch, options

我有一个带有以下 URL“http://localhost:8080/api/menu/1/featured”的主干集合对象。我正在尝试执行 fetch 操作以从 url 检索集合并解析它。但是，在服务器端，我看到的这个请求的方法类型是 OPTIONS。服务器只假设支持 GET 方法。我不确定 Backbone 如何确定要使用的方法类型，以及为什么有时会随机更改为 OPTIONS 方法类型。我正在使用 Node.js 服务器来处理请求。下面的代码几乎就是我所做的。

```
var FeaturedCollection = Backbone.Collection.extend({
    model:FeaturedContent,
    url:function () { return url_featured; },
    parse:function (response) {
        console.log(response);
        return response;
    }
});

var featuredCollection = new FeaturedCollection();
featuredCollection.fetch(); 
```

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-29T23:21:12.037

已经有一段时间了，但我记得以前遇到过这个。这可能是两件事： 默认情况下，Backbone 尝试对后端执行 RESTful API 调用，这意味着 GET、POST、PUT 和 DELETE。

许多后端不是用真正的 REST 支持构建的，只支持 GET 和 POST。当 Backbone 发送 PUT 或 DELETE 命令时，您的浏览器（不是 Backbone）会首先自动发送 OPTIONS 请求，以查看是否允许发出此类请求。如果您的服务器回答不正确，此调用将失败，并且 Backbone 可能不会执行任何操作。

绕过这个集合`Backbone.emulateHTTP = true;`或者让你的服务器正确应答 OPTIONS 调用。有关更多信息，请参阅文档：http: [//backbonejs.org/#Sync-emulateHTTP](http://backbonejs.org/#Sync-emulateHTTP)

另一个问题是您正在跨域/子域发出 ajax 请求，并且您需要正确启用 CORS。这还包括正确回答 OPTIONS 请求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-05T08:51:37.227

我遇到了与 OP 完全相同的问题 - 使用 Backbone 和 NodeJS 通过 CORS POST 请求保存数据会不断发送 OPTIONS http 请求标头，而根本不会触发 POST 请求。

显然，带有“对用户数据造成副作用”的请求的 CORS 将使您的浏览器在实际发送您预期的 HTTP 请求方法之前“预检”带有 OPTIONS 请求标头的请求以检查批准。 [https://developer.mozilla.org/en-US/docs/HTTP_access_control#Overview](https://developer.mozilla.org/en-US/docs/HTTP_access_control#Overview)

这个线程解决了我的问题 -[如何允许 CORS？](https://stackoverflow.com/questions/7067966/how-to-allow-cors-in-express-nodejs)

张贴者使用一些中间件来批准 PUT/GET/POST/DELETE 请求，如下所示 -

```
res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE');
...
next(); 
```

和下一个（）；将允许 OPTIONS 检查继续到 POST 请求。

对我来说就像一个梦想一样工作，希望它对其他人也有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T00:08:31.257

Backbone.js 将 CRUD 方法映射到 HTTP。取自 Backbone 的源代码：

```
var methodMap = {
  'create': 'POST',
  'update': 'PUT',
  'delete': 'DELETE',
  'read':   'GET'
};
Backbone.sync = function(method, model, options) {
   var type = methodMap[method]; 
```

问题可能出在您的 node.js 后端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T14:03:17.970

您使用的是什么版本的主干？我遇到了完全相同的问题，但后来意识到我在教程中使用了旧版本的骨干网（0.3.3）。将链接升级到最新的backbone.js (0.9.2) 和underscore.js(1.3.3) 并作为GET 发送。

# c# - Why `DatabaseGenerated(DatabaseGeneratedOption.Identity)` doesn't work in MVC 4

> ID：11300883
> 
> 赞同：11
> 
> 时间：2012-07-02T20:44:18.270
> 
> 标签：c#, entity-framework, ef-code-first, asp.net-mvc-migration

I was trying to move my MVC 3 project to MVC 4 but when I wanted to move this model:

```
public class Link
{
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid ID { get; set; }

    [DisplayName("Shorted URL")]
    public string SURL { get; set; }

    [DisplayName("General Link")]
    public string OriginalURL { get; set; }

    [DisplayName("Click Count")]
    public int ClickCount { get; set; }
}

public class LinkDBContext : DbContext
{
    public DbSet<Link> Links { get; set; }
} 
```

I got error with `[System.ComponentModel.DataAnnotations.(DatabaseGeneratedOption.Identity)]` attribute. I don't know what's the problem. Does anyone know?!?

**Update**

These are the errors:

> The type or namespace name 'DatabaseGeneratedAttribute' could not be found (are you missing a using directive or an assembly reference?)
> 
> The type or namespace name 'DatabaseGenerated' could not be found (are you missing a using directive or an assembly reference?)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-02T21:35:00.933

`DatabaseGeneratedAttribute``System.ComponentModel.DataAnnotations.Schema`位于 .NET 4.5的 命名空间属性中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T06:11:04.023

如果您想在 .net 4 中使用此属性，您可以使用 EntityFramework 6 的预发布版本（甚至是 Nightly Builds）来执行此操作，在`Manage NuGet Pakages`窗口中，从窗口顶部的下拉列表中选择`Include Prerelease`.

要更新到 Nightly Builds，请`Pakage Manager Settings`添加此包源：

```
http://www.myget.org/F/aspnetwebstacknightly/ 
```

如需完整指南，请参阅[GitHub 上的 EF](https://github.com/aspnet/EntityFramework6)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-02T23:20:39.720

您需要 - 在某些情况下 - 将框架从 4.5 或更低版本更改为 4.5.1，然后安装 Entity Framework 6 +，它会被发现

# javascript - Access Functions Between Two External Javascript Files

> ID：11300885
> 
> 赞同：0
> 
> 时间：2012-07-02T20:44:24.573
> 
> 标签：javascript

I have a pretty JavaScript-heavy site that I'm working on, so to try and keep the code a little more under control, I tried to group my code into several logical external JavaScript files (.js files). For the most part it works just fine, but for some reason one function located in the file `viewer.js` file does not like being called from the `ajax.js` file (in other words, it's not - the Firebug console tells me `nb_displayError is not defined` (where the function in question is `nb_displayError()`.

I tried placing the `viewer.js` script tag both above and below my `ajax.js` script tag in my HTML file, but neither seemed to make a difference. Strangely, I can call functions in my `ajax.js` file from another JavaScript file but this one in particular fails. Any thoughts as to why?

In case it's useful to you, the function calling creating this issue is defined as the following (I don't think it's anything particularly tricky):

```
function populateZoomLevel() {
    var model = $('#modtype').children(':selected').text();
    var lat = $("#loc-label").data('location').latitude;
    var lon = $("#loc-label").data('location').longitude;

    $.get("checkDomains.php", { result: 'zoomlevel', lat: lat, lon: lon, model: model })
        .done(function(responseText){
            if(responseText.substring(0, 7) == "error: "){  // Error flag
                nb_displayError(responseText);
                return;                          // Don't do anything further
            }

            $('#zoomlevel').html(responseText);
        });
} 
```

# ruby - Ruby：如何在数组中找到下一个匹配项

> ID：11300886
> 
> 赞同：0
> 
> 时间：2012-07-02T20:44:29.440
> 
> 标签：ruby

我必须在数组中搜索一个项目并返回下一个项目的值。例子：

```
a = ['abc.df','-f','test.h']
i = a.find_index{|x| x=~/-f/}
puts a[i+1] 
```

除了使用索引之外，还有什么更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T20:53:11.443

经典的函数方法不使用索引（`xs.each_cons(2)`-> *xs 的成对组合*）：

```
xs = ['abc.df', '-f', 'test.h']
(xs.each_cons(2).detect { |x, y| x =~ /-f/ } || []).last
#=> "test.h" 
```

使用[Enumerable#map_detect](http://rdoc.info/github/rubyworks/facets/master/Enumerable#find_yield-instance_method)可以稍微简化一点：

```
xs.each_cons(2).map_detect { |x, y| y if x =~ /-f/ }
#=> "test.h" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T22:44:48.010

类似的东西`array.find{something}.next`不存在的原因是它是一个数组而不是链表。每一件物品都是它自己的价值；它没有“我之后的项目”的概念。

@tokland 通过使用每对连续项目迭代数组提供了一个很好的解决方案，这样当第一个项目匹配时，您就可以方便地使用第二个项目。可以肯定的是，对于函数式风格有很强的论据。不过，您的版本更短，而且我认为您的版本也更快速、更容易理解。

如果问题是您经常使用它并且想要一些更清洁和更重要的东西，那么您当然可以将它作为单例方法添加到`a`：

```
def a.find_after(&test)
  self[find_index(&test).next]
end 
```

然后

```
a.find_after{|x| x=~/-f/} 
```

是在第一次匹配后找到下一个项目的清晰方法。

综上所述，我认为@BenjaminCox 对您的实际目标提出了最佳观点。如果您正在解析命令行选项，那么有些库可以做得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T20:49:46.337

我不知道执行该特定操作的更清洁方法。但是，看起来您确实在尝试解析命令行参数。如果是这样，我建议使用内置的 OptionParser 模块 - 它会节省大量时间和头发拉扯试图自己解析它们。

[这篇文章](http://ruby.about.com/od/advancedruby/a/optionparser.htm)解释了它是如何工作的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T22:49:07.403

正如其他人所评论的那样，您使用索引的解决方案很好。您可以使用[`Enumerable#drop_while`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-drop_while)从匹配中获取数组并获取其中的第二个元素：

```
a = ['abc.df','-f','test.h']
f_arg = a.drop_while { |e| e !~ /-f/ }[1] 
```

# css - Which css versions are supported in chm files?

> ID：11300887
> 
> 赞同：4
> 
> 时间：2012-07-02T20:44:30.477
> 
> 标签：css, chm

I am writing a stylesheet to use with my Compiled Help files. It looks like CSS2 generally works, but I'm not sure about CSS selectors like `>` and `+`.

Is the CHM format equivalent to, say, IE 7? fwiw, I am authoring on Windows 7 and IE9 is installed.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-14T08:26:49.140

On Windows Vista and later (I tested 7, 8, and 8.1), the HTML Help Viewer uses IE 7, even if you have a more recent version of Internet Explorer installed, and even if Windows itself comes bundled with a more recent version of Internet Explorer.

On Windows XP and prior, if the user has IE 7 or prior installed, then the HTML Help Viewer uses whichever version of IE the user has installed. If the user has IE 8 installed, then the HTML Help Viewer will use the IE 7 engine, even if the user never installed IE 7\. IE 9 and later cannot be installed on Windows XP or prior.

So it seems HTML Help will be fovever stuck with IE 7.

Here's a small CHM file that you can use to test this: [http://download.jgsoft.com/helpscribble/UserAgent.chm](http://download.jgsoft.com/helpscribble/UserAgent.chm)

(If the right hand pane of the HTML Help Viewer shows "navigation canceled" or a similar error, you need to right-click the downloaded CHM in Windows Explorer, select Properties, and then click the Unblock button.)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T22:39:02.063

The HTML Help Viewer uses the layout engine components of Microsoft Internet Explorer (Shdocvw.dll hosting Mshtml.dll) to display Help topics.

[http://msdn.microsoft.com/en-us/library/aa189109%28v=office.10%29.aspx](http://msdn.microsoft.com/en-us/library/aa189109%28v=office.10%29.aspx)

Which means: CSS version support is determined by which IE version is installed.

# ruby - Defining elements and locators with interpolation in site-prism?

> ID：11300889
> 
> 赞同：0
> 
> 时间：2012-07-02T20:44:38.530
> 
> 标签：ruby, rspec, site-prism

do you happen to know if there is a way to define both elements and locators using string or symbol interpolation while using the site-prism gem?

I'm trying to do something like this:

```
0.upto(@adults) do  {
element :"adult#{index}", "#passenger-first-name-#{index}"
element :"adult#{index}", "#passenger-last-name-#{index}"
index+=1
} 
```

But I'm getting the following syntax error at executing:

> syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '(' (SyntaxError) element :"adult#{index}" , "#passenger-first-name-#{index}"

I was reading here that symbols DO allow interpolation: [http://www.robertsosinski.com/2009/01/11/the-difference-between-ruby-symbols-and-strings/](http://www.robertsosinski.com/2009/01/11/the-difference-between-ruby-symbols-and-strings/)

Maybe I am missing something? Thanks a lot!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:59:35.903

这是我的错误。为此表示歉意！允许使用带插值的符号，问题在于我使用 upto 循环的方式。

对不起！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:01:27.487

我没有尝试过符号插值，但字符串插值应该可以工作。但是，你很多人不需要这样做......通常，这种事情可以通过使用部分更紧密地建模你的网站来解决。`elements`您可以使用将创建元素数组的or`sections`方法来代替动态创建元素。这是我根据您给出的示例所做的：

我从您的示例中猜测您的网站列出了乘客......如果每个乘客都显示在一个单独的 div 中，那么您可以考虑以下内容：

```
#section that models a single passenger
class PassengerDetails < SitePrism::Section
  element :first_name, "input[id^=passenger-first-name]"
  element :last_name, "input[^=passenger-last-name]"
end

#page that contains a list of passengers
class FlightManifest < SitePrism::Page
  sections :passengers, PassengerDetails, ".passenger-details"
  #... where ".passenger-details" is a style on the divs that contains a passenger's details
end 
```

鉴于上述情况，您可以将乘客列表称为数组：

```
Then /^the flight manifest contains the correct first and last names for each passenger$/ do
  @flight_manifest.passengers.each_with_index do |passenger, i|
    passenger.first_name.text.should == @expected_passengers[i].first_name
    passenger.last_name.text.should == @expected_passengers[i].last_name
  end
end 
```

我不知道这是否有帮助，或者您的网站是否有可能，但它可能会为您指明正确的方向......

# batch-file - Conditional execution (IF, ELSE) NOT WORKING

> ID：11300895
> 
> 赞同：0
> 
> 时间：2012-07-02T20:44:54.437
> 
> 标签：batch-file, if-statement, conditional-operator

I want to write a batch script statement where: FINDSTR has to check for a string AND IF found then just print out FAILED and end the program IF NOT FOUND then go check/look for another string AND IF FOUND then print out SUCCEEDED and close the program, IF NOT FOUND then print out the error message again. Any ideas?

Here is what I did:

```
ECHO Checking the log file for errors...
FINDSTR /C:"Open failed" some_Log.txt && (ECHO Deployment FAILED. 
cscript //nologo success_mail.vbs 
pause) || FINDSTR "RC (return code) = 0" && (ECHO Deployment was successful.
cscript //nologo fail_mail.vbs
pause) 
```

I don't know why it is not working. Any help would be appreciated.

Here is what i my latest one looks like:

```
 ECHO Checking the log file for errors...
    FINDSTR /C:"Open failed" some_Log.txt some_Log.txt && (
     ECHO Deployment FAILED. 
     cscript //nologo fail_mail.vbs 
     GOTO offshore ) || (
      FINDSTR /C:"RC (return code) = 0" some_Log.txt && (
        ECHO Deployment was successful.
        cscript //nologo success_mail.vbs 
        GOTO offshore)
      ) 
```

And, it is not working. Do you see any errors? Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:29:09.790

我看到了几个潜在的问题。

*   您的`%workDir%`or`%filenm%`可能包含空格或特殊字符。为安全起见，如果您尚未在值中这样做，则应将它们括在引号中。

*   `&&`使用and运算符时必须小心`||`。如果`&&`失败之后的命令，那么它可能会导致脚本落入该`||`部分，即使`&&`成功之前的原始命令也是如此。我担心您发送邮件的 CSCRIPT 命令。即使它今天成功，也许它将来可能会失败，你的逻辑可能会受到影响。

*   我猜第二个搜索字符串应该是一个短语而不是 5 个不同的搜索。请记住，除非使用 /C 选项，否则搜索字符串由空格分隔。

*   您的第二个 FINDSTR 挂起，因为您忽略了提供文件作为输入，因此它正在等待标准输入上的数据。

我会像这样构造你的代码

```
ECHO Checking the log file for errors...
set "file=%workDir%\%filenm%_DEV_Log.txt"
set "search1=Error: Open failed because: No such file or directory"
set "search2=RC (return code) = 0"
set "err="
FINDSTR /C:"%search1%" "%file%" && (set err=1) || (
  FINDSTR /C:"%search2%" "%file%" || set err=1
)
if defined err (
  ECHO Deployment FAILED.
  cscript //nologo success_mail.vbs "%filenm%_ddl_DEV.sql" "%file%"
  pause
) else (
  ECHO Deployment was successful.
  cscript //nologo fail_mail.vbs "%filenm%_ddl_DEV.sql" "%file%"
  pause
) 
```

# c# - Implementing async timeout using poor mans async/await constructs in .Net 4.0

> ID：11300900
> 
> 赞同：6
> 
> 时间：2012-07-02T20:45:16.027
> 
> 标签：c#, timeout, pattern-matching, task-parallel-library, async-await

# Motivation

C# 5.0 async/await constructs are awesome, unfortunately yet Microsoft only shown a release candidate of both .NET 4.5 and VS 2012, and it will take some time until these technologies will get widely adopted in our projects.

In Stephen Toub's [Asynchronous methods, C# iterators, and Tasks](http://blogs.msdn.com/b/pfxteam/archive/2009/06/30/9809774.aspx) I've found a replacement that can be nicely used in .NET 4.0\. There are also a dozen of other implementations that make it possible using the approach even in .NET 2.0 though they seem little outdated and less feature-rich.

# Example

So now my .NET 4.0 code looks like (the commented sections show how it is done in .NET 4.5):

```
//private async Task ProcessMessageAsync()
private IEnumerable<Task> ProcessMessageAsync()
{
    //var udpReceiveResult = await udpClient.ReceiveAsync();

    var task = Task<UdpAsyncReceiveResult>
               .Factory
               .FromAsync(udpClient.BeginReceive, udpClient.EndReceive, null);

    yield return task;

    var udpReceiveResult = task.Result;

    //... blah blah blah

    if (message is BootstrapRequest)
    {
        var typedMessage = ((BootstrapRequest)(message));

        // !!! .NET 4.0 has no overload for CancellationTokenSource that 
        // !!! takes timeout parameter :(
        var cts 
          = new CancellationTokenSource(BootstrapResponseTimeout); // Error here

        //... blah blah blah

        // Say(messageIPEndPoint, responseMessage, cts.Token);

        Task.Factory.Iterate(Say(messageIPEndPoint, responseMessage, cts.Token));
    }
} 
```

Looks little ugly though it does the job

# The question

When using [CancellationTokenSource](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtokensource.aspx) in .NET 4.5 there is a constructor that takes timespan as a timeout parameter, so that resulting `CancellationTokenSource` cancels within specified period of time.
.Net 4.0 is not able to timeout, so what is the correct way of doing that in .Net 4.0?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T20:50:08.393

FWIW，您可以在 4.0 项目中使用 async/await，只需使用[async 目标包](http://blogs.msdn.com/b/bclteam/archive/2012/04/26/async-targeting-pack-for-visual-studio-11-now-available-for-net-4-and-silverlight-5-greg.aspx)。非常适合我！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T21:05:08.867

这真的与异步/等待有关吗？看起来你只需要一种方法来取消令牌，独立于异步/等待，对吧？在这种情况下，您是否可以简单地创建一个在超时后调用 Cancel 的 Timer？

```
new Timer(state => cts.Cancel(), null, BootstrapResponseTimeout, Timeout.Infinite); 
```

**编辑**

我上面的初步反应是基本想法，但可以在[Is CancellationTokenSource.CancelAfter() 泄漏中找到更强大的解决方案？](https://stackoverflow.com/questions/10715688/is-cancellationtokensource-cancelafter-leaky)（实际上是您正在寻找的构造函数的 .Net 4.5 实现）。这是一个可用于根据该代码创建超时令牌的函数。

```
public static CancellationTokenSource CreateTimeoutToken(int dueTime) {
    if (dueTime < -1) {
        throw new ArgumentOutOfRangeException("dueTime");
    }
    var source = new CancellationTokenSource();
    var timer = new Timer(self => {
        ((Timer)self).Dispose();
        try {
            source.Cancel();
        } catch (ObjectDisposedException) {}
    });
    timer.Change(dueTime, -1);
    return source;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-20T05:07:53.677

您仍然可以使用`CancelAfter()`，这是一种扩展方法，`Microsoft.Bcl.Async`与上面接受的答案非常相似。

这是我按 F12 查看执行时的参考源代码`CancelAfter()`：

```
 /// <summary>Cancels the <see cref="T:System.Threading.CancellationTokenSource" /> after the specified duration.</summary>
  /// <param name="source">The CancellationTokenSource.</param>
  /// <param name="dueTime">The due time in milliseconds for the source to be canceled.</param>
  public static void CancelAfter(this CancellationTokenSource source, int dueTime)
  {
    if (source == null)
      throw new NullReferenceException();
    if (dueTime < -1)
      throw new ArgumentOutOfRangeException("dueTime");
    Contract.EndContractBlock();
    Timer timer = (Timer) null;
    timer = new Timer((TimerCallback) (state =>
    {
      timer.Dispose();
      TimerManager.Remove(timer);
      try
      {
        source.Cancel();
      }
      catch (ObjectDisposedException ex)
      {
      }
    }), (object) null, -1, -1);
    TimerManager.Add(timer);
    timer.Change(dueTime, -1);
  } 
```

# c# - Using Reflection to Upsert Derived Entities in Generic Repository

> ID：11300904
> 
> 赞同：0
> 
> 时间：2012-07-02T20:45:34.973
> 
> 标签：c#, entity-framework, reflection, repository-pattern, derived-class

A bit new at the Repository Pattern. Trying to build a generic repository that will also handle state changes to derived entities. What I've done so far is create a custom attribute to flag the property as one which needs to be upserted.

Attribute:

```
public class DerivedObjectAttribute : Attribute
{
    public enum EntityType
    {
        REFERENCE,
        OBJECT
    }

    public EntityType DerivedType { get; set; }
} 
```

I define this attribute for any property on which I want to cascade state changes.

Sample Entity:

```
public class FightingCharacter : BaseEntity 
{
    public Costume costume { get; set; }

    [DerivedObject(DerivedType=DerivedObjectAttribute.EntityType.REFERENCE)]
    public SpecialFinish specialFinish { get; set; }

    [DerivedObject(DerivedType = DerivedObjectAttribute.EntityType.REFERENCE)]
    public List<MoveList> moveList { get; set; }
} 
```

So for this class, the costume property would not need to cascade, but the specialFinish and moveList properties should.

Then in my repository:

```
public class DataRepository<T> : IRepository<T> where T : BaseEntity {
    private void TryDerivedUpsert(T entity)
    {
        Type type = entity.GetType();
        PropertyInfo[] piList = type.GetProperties();
        foreach (PropertyInfo pi in piList)
        {
            foreach (DerivedObjectAttribute attr in pi.GetCustomAttributes(typeof(DerivedObjectAttribute), false))
            {
                // What to do here?
            }
        }
    }
} 
```

In the innermost loop, I'm able to pinpoint DerivedObjectAttributes without any problem. The question is: how do I obtain the Type and Value of the object, then upsert it? In other words: if property pi is flagged to cascade changes, create a repo cast to the appropriate Entity, and Upsert it. E.G.:

```
DataRepository<EntityType> repo = new DataRepository<EntityType> ();
repo.Upsert(property as EntityType); 
```

Does that make sense? Or am I going about generic repo entirely the wrong way? If it does make sense (I'll be surprised), how to do it? (The examples listed here are just examples, BTW. I'm still architecting and have no EF classes at all yet.)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:56:22.620

您可以使用 获取值`pi.GetValue(entity, null)`，并为属性类型（来自 pi）创建通用存储库 ( `Activate.CreateInstance`)，但您必须进行大量反思。

在这种情况下，您应该考虑放弃经典的通用存储库思想（每种类型的存储库），并使用`DbContext`可以处理所有类型的扩展库之类的东西。

如果您有断开连接的场景 (WCF)，主要问题将是 EF 本身，因为您必须将所有更改复制到服务器端的嵌套列表并手动更改 EntityState。

# javascript - Check if a string starts with http using Javascript

> ID：11300906
> 
> 赞同：43
> 
> 时间：2012-07-02T20:45:45.103
> 
> 标签：javascript, regex

I've been searching all over for an answer to this and all of the answers I've found haven't been in JavaScript.

I need a way, in javascript, to check if a string starts with http, https, or ftp. If it doesn't start with one of those I need to prepend the string with `http://`. indexOf won't work for me I don't think as I need either http, https or ftp. Also I don't want something like `google.com/?q=http://google.com` to trigger that as being valid as it doesn't start with an http whereas indexOf would trigger that as being true (if I'm not entirely mistaken).

The closest PHP regex I've found is this:

```
function addhttp($url) {
   if (!preg_match("~^(?:f|ht)tps?://~i", $url)) {
      $url = "http://" . $url;
   }
   return $url;
} 
```

[Source: How to add http if its not exists in the url](https://stackoverflow.com/questions/2762061/how-to-add-http-if-its-not-exists-in-the-url)

I just don't know how to convert that to javascript. Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-07-02T20:51:20.383

```
export const getValidUrl = (url = "") => {
    let newUrl = window.decodeURIComponent(url);
    newUrl = newUrl.trim().replace(/\s/g, "");

    if(/^(:\/\/)/.test(newUrl)){
        return `http${newUrl}`;
    }
    if(!/^(f|ht)tps?:\/\//i.test(newUrl)){
        return `http://${newUrl}`;
    }

    return newUrl;
}; 
```

测试：

```
expect(getValidUrl('https://www.test.com')).toBe('https://www.test.com');
expect(getValidUrl('http://www.test.com')).toBe('http://www.test.com');
expect(getValidUrl('    http   :    /  /  www.test.com')).toBe('http://www.test.com');
expect(getValidUrl('ftp://www.test.com')).toBe('ftp://www.test.com');
expect(getValidUrl('www.test.com')).toBe('http://www.test.com');
expect(getValidUrl('://www.test.com')).toBe('http://www.test.com');
expect(getValidUrl('http%3A%2F%2Fwww.test.com')).toBe('http://www.test.com');
expect(getValidUrl('www    .  test.com')).toBe('http://www.test.com'); 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-07-02T20:50:10.223

这应该有效：

```
var pattern = /^((http|https|ftp):\/\/)/;

if(!pattern.test(url)) {
    url = "http://" + url;
} 
```

[jsFiddle](http://jsfiddle.net/JnKVw/)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-07-02T20:50:21.150

```
var url = "http://something.com"
if( url.indexOf("http") == 0 ) {
    alert("yeah!");
} else {
    alert("No no no!");
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-02T20:49:36.650

这应该有效：

```
var re = /^(http|https|ftp)/ 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-07-17T14:06:30.513

进一步完善以前的答案，我曾经`new RegExp(...)`避免混乱的转义，还添加了一个可选的`s`.

```
var pattern = new RegExp('^(https?|ftp)://');

if(!pattern.test(url)) {
    url = "http://" + url;
} 
```

```
var pattern = new RegExp('^(https?|ftp)://');

console.log(pattern.test('http://foo'));
console.log(pattern.test('https://foo'));
console.log(pattern.test('ftp://foo'));
console.log(pattern.test('bar'));
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-05-12T08:46:13.363

非正则表达式声明方式：

```
const hasValidUrlProtocol = (url = '') => 
    ['http://', 'https://', 'ftp://'].some(protocol => url.startsWith(protocol)) 
```

# spring - 当我使用 Maven 时，休眠 DDL 数据库生成停止

> ID：11300909
> 
> 赞同：1
> 
> 时间：2012-07-02T20:46:05.253
> 
> 标签：spring, hibernate, maven, ddl

以前，我的 Java Web 项目使用 Eclipse 普通结构，并且在容器（以防万一，Tomcat）启动时，Hibernate 正确生成了方案。

现在我正在使用 Maven 基础设施。我已经重新定位了所需的文件并配置得很好（我认为，因为一切正常：Spring 正在启动，Hibernate 正在连接数据库 - 当它之前创建并且有一些数据要获取时）。我已经测试了所有 CRUD 操作并且它正在工作。问题是 Hibernate 拒绝像在 Eclipse 普通基础架构上那样生成方案 (DDL)。

附加信息：

*   我的 persistence.xml 几乎是空的（一如既往），因为 Spring applicationContext.xml 正在启动它。我没有更改文件，它继续以与以前相同的方式。

    ```
    <!-- Location: src/main/resources/META-INF/persistence.xml -->
    <persistence>
        <persistence-unit name="jpa-persistence-unit" transaction-type="RESOURCE_LOCAL"/>
    </persistence> 
    ```

*   Spring 配置的一部分在这里（applicationContext.xml）：

    ```
    <!-- Location: src/main/webapp/WEB-INF/applicationContext.xml -->
    <!-- ... -->
    <bean id="jpaVendorAdapter" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
        <property name="database" value="[DATABASE-NAME]" />
        <property name="showSql" value="true" />
        <property name="generateDdl" value="true" /> <!-- THIS CONFIGURATION WORKED PREVIOUSLY, NOW WITH MAVEN, IT'S IGNORED -->
        <property name="databasePlatform" value="[DIALECT]" />
    </bean>
    <!-- ... --> 
    ```

*   我没有使用任何 Maven Hibernate 插件，因为我只想要之前发生的默认行为。

*   Maven 是否使这个“generateDdl”属性无效！？为什么！？我该怎么办！？我找不到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:43:19.667

我找到了解决方案。

**Maven对此有任何错误。**

Hibernate 无法创建我的数据库，因为“方言”错误。

我记得我把方言从 MySQL 改成了 MySQL-InnoDB。Hibernate 正在记录这个问题，但我看不到它，因为 slf4j-simple 依赖项没有明确导入。

谢谢你的时间，肖恩。

# dotnetnuke - Dot Net Nuke Multiple Sites

> ID：11300914
> 
> 赞同：1
> 
> 时间：2012-07-02T20:46:23.320
> 
> 标签：dotnetnuke

There is a current install of DNN on one of my local webservers - this was installed before I took over this position. I am trying to add a second site, but the [instructions](http://www.dotnetnuke.com/Resources/Wiki/Page/Hosting-Multiple-Sites-on-a-Single-Instance-of-DotNetNuke.aspx) I am following appear to be for attaching an existing site. Do I simply run the installer to create a new site in addition to the current? I've never used DNN before, so I am going at this blind.

All information I am finding is referencing the same as the instructions link I provided. Any assistance is greatly appreciated.

To add a little bit more information, here is another area where I am confused. Referencing the link, it states #2 to add a binding to my site, then #3 is to add the new portal. What I am trying to do is create a new DNN site - one does not yet exist, so I cannot do step 2 until a new portal is created. As said, I've never used DNN. I was tasked today to have this done by July 4th (nice, huh) so today is the first I am looking at DNN ever.

What I have done is added a new portal and I assumed it would create a new bare-bones site for me, but that is not what happened (obviously). So, instead of just adding an existing site for DNN, how do I add a new one (that is why I asked if I needed to reinstall)? From what I understand, there was an initial website setup with the installation of DNN. That basic site served what they needed - I need to do the same thing again, but, as can be seen, I've no clue how to do so.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:09:31.093

不，您不会再次运行安装程序。请记住 DotNetNuke 是 PORTAL 托管软件，这意味着只需安装 1 次，您就可以运行〜无限的网站（当然，总会有限制，具体取决于您运行的硬件）。

例如，如果您的 DNN 安装在 www.myweb.com 上运行，并且您想为 www.yourweb.com 添加一个站点，您只需将 www.yourweb.com 的 DNS 条目指向您的 DNN 安装的 IP , 应与 www.myweb.com 相同的 IP。

然后，您以 HOST（超级用户）用户身份登录 DNN 安装。您无法通过使用 www.myweb.com 的管理员登录来执行此操作，该管理员将无权添加门户。当您以主机身份登录时，您会看到另外两个菜单项出现，“管理员”和“主机”。管理员与您只想在 www.myweb.com 上完成的功能有关，主机菜单适用于整个 DNN 安装，包括您设置的所有门户。

根据您的版本号，一旦您单击或放下 HOST 菜单，您可能会看到“门户”或“站点管理”（如果是较新的安装，例如 6.0+）。

从那里您填写有关您的新 www.youweb.com 网站的详细信息，包括 URL 和您想要的任何别名。一旦您这样做并且 DNS 传播，您就可以访问 www.youweb.com 并登录并设置该站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:29:43.813

步骤#2 是在 IIS 中添加绑定，而不是在 DNN 中做任何事情。您需要告诉 IIS 有关 strategyplanning.mysite.com，以便它将对该 URL 的请求发送到您的 DNN 站点。

因此，该过程如下所示：

1.  确保 strategyplanning.mysite.com 的 DNS 记录指向您的 Web 服务器的 IP 地址。
2.  在 IIS 中，更新当前应用程序的主机头绑定以包括 strategyplanning.mysite.com。
3.  一个。如果您的 DNN 安装中只有一个门户，此时尝试导航到 strategyplanning.mysite.com 将自动将其添加为该门户的门户别名。
    湾。如果您的 DNN 安装中有多个门户，此时尝试导航到 strategyplanning.mysite.com 将显示有关该 URL 与现有站点不对应的错误消息。
4.  在 DotNetNuke 中，您需要进入主机菜单（以前称为门户）中的站点管理页面，并使用管理/操作菜单添加新站点。在出现的表格中，使用 strategyplanning.mysite.com 作为别名（将其标记为父门户），并填写其余详细信息。如果您想要一个空白网站，请确保选择空白网站模板（否则您需要删除一堆您不需要的页面和模块）。

这应该是您需要做的所有事情。如果您导航到 strategyplanning.mysite.com 并看到原始站点，则 strategyplanning.mysite.com 已添加为该站点的门户别名，您需要将其删除（在“管理”菜单下的“站点设置”中） .

# vbscript - OS architecture detection script

> ID：11300916
> 
> 赞同：1
> 
> 时间：2012-07-02T20:46:35.863
> 
> 标签：vbscript, operating-system

I have just downloaded the two .msi installers for 7zip (x86 and x64). Does anyone have a simple script I can use to detect the OS architecture and launch the appropriate .msi file?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-25T14:40:43.153

I found a great vbscript, written by Monimoy Sanyal, posted on Microsoft Technet. It also gives information about system architecture, if 32-bit system run on the 64-bit hardware. [https://gallery.technet.microsoft.com/scriptcenter/Determine-If-Your-System-969670e3](https://gallery.technet.microsoft.com/scriptcenter/Determine-If-Your-System-969670e3)

```
Option Explicit 
Dim ObjWMI, ColSettings, ObjProcessor 
Dim StrComputer, ObjNetwork 
Set ObjNetwork = WScript.CreateObject("WScript.Network") 
StrComputer = Trim(ObjNetwork.ComputerName) 
Set ObjNetwork = Nothing 
WScript.Echo VbCrLf & "Computer Name: " & StrComputer 
WScript.Echo vbNullString 
Set ObjWMI = GetObject("WINMGMTS:" & "{ImpersonationLevel=Impersonate,AuthenticationLevel=Pkt}!\\" & StrComputer & "\Root\CIMV2") 
Set ColSettings = ObjWMI.ExecQuery ("SELECT * FROM Win32_Processor") 
For Each ObjProcessor In ColSettings 
Select Case ObjProcessor.Architecture 
    Case 0 
        WScript.Echo "Processor Architecture Used by the Platform: x86" 
    Case 6 
        WScript.Echo "Processor Architecture Used by the Platform: Itanium-Based System" 
    Case 9 
        WScript.Echo "Processor Architecture Used by the Platform: x64" 
End Select 
Select Case ObjProcessor.ProcessorType 
    Case 1 
        WScript.Echo "Processor Type: Other. Not in the Known List"     
    Case 2 
        WScript.Echo "Processor Type: Unknown Type" 
    Case 3 
        WScript.Echo "Processor Type: Central Processor (CPU)" 
    Case 4 
        WScript.Echo "Processor Type: Math Processor" 
    Case 5 
        WScript.Echo "Processor Type: DSP Processor" 
    Case 6 
        WScript.Echo "Processor Type: Video Processor" 
End Select 
WScript.Echo "Processor: " & ObjProcessor.DataWidth & "-Bit" 
WScript.Echo "Operating System: " & ObjProcessor.AddressWidth & "-Bit" 
WScript.Echo vbNullString     
If ObjProcessor.Architecture = 0 AND ObjProcessor.AddressWidth = 32 Then 
    WScript.Echo "This Machine has 32 Bit Processor and Running 32 Bit OS" 
End If 
If (ObjProcessor.Architecture = 6 OR ObjProcessor.Architecture = 9) AND ObjProcessor.DataWidth = 64 AND ObjProcessor.AddressWidth = 32 Then 
    WScript.Echo "This Machine has 64-Bit Processor and Running 32-Bit OS" 
End If 
If (ObjProcessor.Architecture = 6 OR ObjProcessor.Architecture = 9) AND ObjProcessor.DataWidth = 64 AND ObjProcessor.AddressWidth = 64 Then 
    WScript.Echo "This Machine has 64-Bit Processor and Running 64-Bit OS" 
End If 
Next 
Set ObjProcessor = Nothing:    Set ColSettings = Nothing:    Set ObjWMI = Nothing:    StrComputer = vbNullstring 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:22:58.600

你说简单，但没有指定语言......

批次（`.cmd`）：

```
IF /I %PROCESSOR_ARCHITECTURE% EQU x86 (
    msiexec /qn /i 7zip_x86.msi
) ELSE (
    msiexec /qn /i 7zip_x64.msi
) 
```

VBScript ( `.vbs`):

```
Set oShell = WScript.CreateObject("WScript.Shell")
proc_arch = oShell.ExpandEnvironmentStrings("%PROCESSOR_ARCHITECTURE%")

If proc_arch = 'x86' Then
    oShell.Run("msiexec /qn /i 7zip_x86.msi"), 0, true 
Else
    oShell.Run("msiexec /qn /i 7zip_x64.msi"), 0, true
End If 
```

PowerShell ( `.ps1`):

```
if ($env:PROCESSOR_ARCHITECTURE -eq "x86") {
    & msiexec /qn /i 7zip_x86.msi
} else {
    & msiexec /qn /i 7zip_x64.msi
}
# or ...
if ([Environment]::Is64BitOperatingSystem) {
    & msiexec /qn /i 7zip_x86.msi
} else {
    & msiexec /qn /i 7zip_x64.msi
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T04:16:08.720

这可能会有所帮助

```
strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
 & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")

Set colProcessors = objWMIService.ExecQuery _
  ("Select * From Win32_Processor")

For Each objProcessor in colProcessors
  If objProcessor.Architecture = 0 Then
    Wscript.Echo "This is an x86 computer."
  ElseIf objProcessor.Architecture = 1 Then
    Wscript.Echo "This is a MIPS computer."
  ElseIf objProcessor.Architecture = 2 Then
    Wscript.Echo "This is an Alpha computer."
  ElseIf objProcessor.Architecture = 3 Then
    Wscript.Echo "This is a PowerPC computer."
  ElseIf objProcessor.Architecture = 5 Then
    Wscript.Echo "This is a ARM computer."
  ElseIf objProcessor.Architecture = 6 Then
    Wscript.Echo "This is an ia64 computer."
  ElseIf objProcessor.Architecture = 9 Then
    Wscript.Echo "This is an x64 computer."
  Else
    Wscript.Echo "The computer type could not be determined."
  End If
Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T20:48:49.190

可能很粗糙而且不是很......“安全”......

只需检查`C:\Program Files (x86)`仅在 64 位系统上存在的是否存在。

# android - 检查应用程序是否在平板电脑上运行

> ID：11300917
> 
> 赞同：1
> 
> 时间：2012-07-02T20:46:36.617
> 
> 标签：android

您可以使用以下方法检查您的应用程序是否在不同版本的 Android 上运行：

```
int sdk = Build.VERSION.SDK_INT;
if (sdk <= Build.VERSION_CODES.ECLAIR){
    //do stuff
} else {
    //do some other stuff
} 
```

是否有这样的平板电脑使用检查？目前我有两种方法可以找出我不喜欢的：

```
Configuration configuration = getResources().getConfiguration();
if (configuration.orientation == Configuration.ORIENTATION_LANDSCAPE) {
   try {
       return configuration.screenWidthDp >= 1024; 
    } catch (NoSuchFieldError ex) {
        return false;
    }
} else {
    return false;
} 
```

而且，如果我使用具有不同视图 ID 的不同布局文件：

```
return findViewById(R.id.mytabletlinearlayout) == null; 
```

是否有类似可用的版本代码？还是有另一种更优雅的解决方案？

*编辑*

为了清楚起见，如果我在平板电脑上运行我的应用程序，我需要执行一些不同的操作，因为那时我使用的是多窗格布局。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T20:54:47.060

与其尝试检测平板电脑，不如考虑检测屏幕尺寸和检测设备支持的功能，因为手机和平板电脑之间的差异并没有完全明确（​​并且可能会发生变化）。

要检测功能，请使用[PackageManager](http://developer.android.com/reference/android/content/pm/PackageManager.html)类，特别是[hasSystemFeature](http://developer.android.com/reference/android/content/pm/PackageManager.html#hasSystemFeature%28java.lang.String%29)或[getSystemAvailableFeatures](http://developer.android.com/reference/android/content/pm/PackageManager.html#getSystemAvailableFeatures%28%29)。为了检测屏幕尺寸，您在不同文件夹中嗅探布局更改的第二种方法是处理它的合适方法。

如果您在运行时检查可用功能，您将不会被迫提前对平板电脑进行概括，例如假设它们没有后置摄像头或类似的其他功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:54:50.113

要检查它是否在平板电脑上运行，[这个答案](https://stackoverflow.com/a/9590506/1029916)就足够了。请记住，您可能会问错误的问题。您的程序应该更关心您正在使用的设备的具体特性。（例如屏幕尺寸、内存容量等）

# ruby - 从较小的短语重建原始句子？

> ID：11300921
> 
> 赞同：3
> 
> 时间：2012-07-02T20:47:14.590
> 
> 标签：ruby, string, nlp

我有一个原句

```
sent = "For 15 years photographer Kari Greer has been documenting wildfires and the men and women who battle them." 
```

和短语：

```
phrases = [
  "For 15 years",
  "wildfires and the men and women who battle them",
  "has been documenting wildfires",
  "been documenting wildfires and the men and women who battle them",
  "documenting wildfires and the men and women who battle them",
  "them",
  "and the men and women who battle them",
  "battle them",
  "wildfires",
  "the men and women",
  "the men and women who battle them",
  "15 years",
  "photographer Kari Greer"
] 
```

我想从短语中重建原始句子（不丢失任何单词）并将选定的短语存储在新数组中，保持顺序，以便我得到：

```
 result = [
   "For 15 years",
   "photographer Kari Greer",
   "has been documenting wildfires",
   "and the men and women who battle them"
] 
```

**编辑**：`result`具有最少数量的元素很重要。

**编辑**：这是适用于更复杂情况的答案代码版本：

```
 sent ="Shes got six teeth Pink says of her 13-month-old daughter but shes not a biter"      
 phrases = ["her 13-month-old daughter", "she", "says of her 13-month-old daughter", "a biter", "got six teeth", "Pink", "of her 13-month-old daughter", "s not a biter", "She", "six teeth", "s got six teeth", "Shes got six"] 

def shortest(string, phrases)
 string = string.gsub(/\.|\n|\'|,|\?|!|:|;|'|"|`|\n|,|\?|!/, '')
 best_result = nil
 phrases.each do |phrase|
  if string.match(/#{phrase}/)
    result = [phrase] + shortest(string.sub(/#{phrase}/, "").strip, phrases)
        best_result = result  if (best_result.nil? || result.size < best_result.size) # && string == result.join(" ")
      end
    end
  best_result || []
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:52:12.937

```
def solve arr
    len = arr.count
    (len - 1).downto(0) do |i|
        phrase = arr[0..i].join(" ")
        if $phrases.include?(phrase)
            return [phrase] if len - 1 == i
            ans = solve arr[(i + 1)..(len - 1)]
            return [phrase] + [ans] if ans.count != 0
        end
    end
    []
end

words = sent.gsub(".", "").split(" ")
res = solve words
puts res.flatten.inspect 
```

我认为这应该可行。它查找匹配的最大短语并检查该短语的其余部分是否可以分解为短语。

可能有更好的方法来做到这一点，但这里是凌晨 4 点......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T23:32:06.547

```
def shortest(string, phrases)
  best_result = nil
  phrases.each do |phrase|
    if string.match(/\A#{phrase}/)
      result = [phrase] + shortest(string.sub(/\A#{phrase}/, "").strip, phrases)
      best_result = result if (best_result.nil? || result.size < best_result.size) && string.match(Regexp.new("\\A#{result.join("\\s?")}\\Z"))
    end
  end
  best_result || []
end
result = shortest(sent.gsub(/\./, ""), phrases) 
```

**编辑：**更新了算法以允许某些短语之间没有空格。

# regex - 在位置边界内使用正则表达式分组和替换字符串的 EDI

> ID：11300926
> 
> 赞同：0
> 
> 时间：2012-07-02T20:47:43.840
> 
> 标签：regex

我想使用正则表达式为 EDI 目的使用搜索和替换字符串技术进行分组，我可以强制替换在我的 EDI 输出中的特定大小限制内吗？

输入：

```
01234567890123456789012345678901234567890123456789012345678901234567890123456789
EINSTEIN            ALBERT              165 
```

正则表达式未命名分组搜索：

```
(.*{20})(.*{20})(.*{20}) 
```

正则表达式分组替换：

```
First:\2Last:\1IQ:\3 
```

输出：

```
01234567890123456789012345678901234567890123456789012345678901234567890123456789
First:ALB Last:EIN IQ:165 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:00:10.503

您似乎没有指定要使用的工具（或者我没有得到它）​​，但这可能会给您一些线索：

```
$ echo 'EINSTEIN            ALBERT              165' |\
> sed -r 's/(.{3}).{17}(.{3}).{17}(.*)/First:\2 Last:\1 IQ:\3/'
First:ALB Last:EIN IQ:165 
```

# image-processing - 单个摄像机的运动重建

> ID：11300928
> 
> 赞同：3
> 
> 时间：2012-07-02T20:47:47.103
> 
> 标签：image-processing, 3d, computer-vision

我有一个校准过的相机（已知的内在参数，即已知相机矩阵K，以及失真系数）。

我想重建相机的 3d 轨迹。没有关于场景的先验知识。

通过呈现两个在同一场景上看起来的图像并从中提取两组对应的匹配特征点（SIFT、SURF、ORB 等）来简化问题。我的问题是如何计算相机外部参数（即旋转矩阵R 和平移向量 t ) 到视点之间？

我已经设法计算了基本矩阵，并且由于 K 是已知的，所以基本矩阵也是如此。使用[David Nister 对五点相对姿势问题的有效解决方案，](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.129.1518&rep=rep1&type=pdf)我设法得到了 4 个可能的解决方案，但是：

1.  对基本矩阵 E ~ U * diag (s,s,0) * V' 的约束并不总是适用 - 导致不正确的结果。[编辑]：取平均奇异值似乎可以纠正结果:) 下降

2.  我怎么知道这四个中哪一个是正确的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:38:21.527

您对第 1 点的解决方案是正确的：diag( (s1 + s2)/2, (s1 + s2)/2, 0)。

至于告诉四种解决方案中的哪一种是正确的，只有一种会为所有点相对于相机框架提供正深度。那就是你想要的那个。

可以在此处找到用于检查哪种解决方案正确的代码：http: [//cs.gmu.edu/%7Ekosecka/examples-code/essentialDiscrete.m](http://cs.gmu.edu/%7Ekosecka/examples-code/essentialDiscrete.m)来自[http://cs.gmu.edu/%7Ekosecka/bookcode.html](http://cs.gmu.edu/%7Ekosecka/bookcode.html) 他们使用 U 和 V 的行列式来确定具有正确方向的解。寻找评论“那么四种可能性是”。由于您只是在估计基本矩阵，因此它很容易受到噪声的影响，并且如果所有点都共面，则表现不佳。

此外，平移仅恢复到恒定比例因子内，因此您看到单位大小的归一化平移向量这一事实是完全正确的。原因是深度未知并且估计为 1。您必须找到某种方法来恢复深度，如八点算法 + 3d 重建的代码中（bookcode 链接中的算法 5.1）。

上面示例代码取自的书也是一本很好的参考书。[http://vision.ucla.edu/MASKS/](http://vision.ucla.edu/MASKS/)您感兴趣的第 5 章可在 Sample Chapters 链接上找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T03:44:37.670

恭喜你的辛勤工作，听起来你已经努力学习这些技术了。对于实际的生产强度代码，我建议下载[libmv](http://code.google.com/p/libmv/)和[ceres](http://code.google.com/p/ceres-solver/)，并使用它们重新编码您的解决方案。

您的两个问题实际上是一个：根据您收集的数据拒绝无效的解决方案。特别是，Nister（以及 Stewenius）算法通常用于类似 RANSAC 的求解器的内部循环中，该求解器选择具有最佳拟合/最大内点数的解决方案。

# android - android - 如何导入 com.google.android.maps.MapActivity？

> ID：11300932
> 
> 赞同：2
> 
> 时间：2012-07-02T20:48:02.943
> 
> 标签：android, import, maps, keystore

我正在尝试让谷歌地图在我的 android 项目中工作。我已经获得了 md5 密钥并通过 google 注册以获取 api 密钥，但是现在当我尝试显示地图时，导入它时出现错误。“com.google”下面有 sqiqly 红线。

任何人都可以帮忙吗？谢谢

这是我的 xml 文件：（注意：我用“my_key”替换了密钥，因为我不想公开它）

```
<com.google.android.maps.MapView
   android:id="my_map"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:enabled="true"
   android:clickable="true"
   android:apiKey="my_key"/> 
```

对于java文件：

```
package com.escortme.basic;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import com.google.android.maps.MapActivity; // ERROR
import com.google.android.maps.MapView;     // ERROR
import android.os.Bundle;

public class Police_ViewActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.pol_view);
    }

    public void quit_button_action(View view){
        finish();
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T20:53:46.793

听起来您的项目没有引用 Google API。假设您使用的是 Eclipse，查看项目的属性并选择 Android 并检查 Google APIs 是否被选中，而不是简单的 Android 版本。

如果您尚未下载 Google API，则可能需要下载。您可以通过 Android SDK 管理器执行此操作。

# android - Android 从外部源动态获取数据到列表视图活动中

> ID：11300933
> 
> 赞同：0
> 
> 时间：2012-07-02T20:48:05.373
> 
> 标签：android, datasource, listactivity

我是开发 Android 应用程序的新手。我想要做的是将数据存储到数组中并将该数据显示到列表活动视图中。在某种程度上，该应用程序将类似于解析树，单击列表中的一个项目将带您进入另一个项目，依此类推。问题是我将有多个不同的列表，并且大多数都会以某种方式连接（取决于事先选择的类别）。我一直在研究 MapsDemo 示例应用程序并且知道有一种方法 - 但是我还没有弄清楚。如果这令人困惑，请告诉我......

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:07:34.453

开始尝试这个，然后一旦你可以做到这一点，然后转向使用动态数据。我将它用于一个非常相似的项目并且效果很好：

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

这是我使用的代码。也许这会帮助你：

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.dining);
        //Hard coded array
        ListData newListItem = new ListData();
        ArrayList<ListData> itemObject=null;
        try {

             itemObject= newListItem.getData(DATAURL);
             Log.e(TAG, "item object: "+itemObject.toString());
             ListAdapter adapter = new ListAdapter(this, R.layout.dininglistview, itemObject);
             //Create listview
             this.listView1 = (ListView)this.findViewById(android.R.id.list);
             this.listView1.setAdapter(adapter);

        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            Log.e(TAG, "Unexpected error", e);
        } catch (ServiceException e){
            AlertDialog alertDialog = new AlertDialog.Builder(DiningActivity.this).create();
            alertDialog.setTitle("Temporarily unavailable");
            alertDialog.setMessage("Please contact top25@uievolution.com");
            alertDialog.setButton("OK", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which)
                {
                    Intent homeIntent = new Intent(DiningActivity.this, HomeActivity.class);
                    DiningActivity.this.startActivity(homeIntent);

                }
            });
            alertDialog.show();
        }
        //implement dining adapter

    } 
```

这是我用来解析 XML 的 getData() 方法：

```
public ArrayList<ListData> getData(String DATAURL) throws InterruptedException, ServiceException {

        ArrayList<ListData> items=null;

        HttpURLConnection conn = null;
        try {
            URL url = new URL(DATAURL);
            conn = (HttpURLConnection) url.openConnection();
            conn.setReadTimeout(TIMEOUT);
            conn.setConnectTimeout(CONNECT_TIMEOUT);
            conn.setRequestMethod("GET");
            conn.setDoInput(true);
            conn.connect();
            if(Thread.interrupted())
            {
                throw new InterruptedException();
            }

             items = parseXML(conn);

        } catch (MalformedURLException e) {

            Log.e(TAG, "Invalid URL", e);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.e(TAG, "Unable to connect to URL", e);
        }
        finally{
            if(conn!=null){
                conn.disconnect();
            }
        }

        return items;

    } 
```

这是我的解析器：

```
private static ArrayList<ListData> parseXML(HttpURLConnection conn) throws ServiceException {
    ArrayList<ListData> dataArray = new ArrayList<ListData>();

    DocumentBuilderFactory builderFactory =
            DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = null;

    try {

        builder = builderFactory.newDocumentBuilder();
    } catch (ParserConfigurationException e) {
        Log.e(TAG, "Parse Configuration issue", e);
        throw new ServiceException("Service Exception Error");
    } catch (IllegalAccessError e){
        Log.e(TAG, "Illegal Accessor Error", e);
        throw new ServiceException("Service Exception Error");
    }

    try {
        //parse input from server
        Document document = builder.parse(conn.getInputStream());
        Element xmlElement  = document.getDocumentElement();
        NodeList recordNodes = xmlElement.getChildNodes();

        //assign parsed data to listItem object
        for(int i=0; i<recordNodes.getLength(); i++){

          Node record = recordNodes.item(i);
          NodeList recordDetails = record.getChildNodes();
          ListData listItem = new ListData();

          for(int ii=0; ii<recordDetails.getLength(); ii++){
             Node detailItem = recordDetails.item(ii);
             String detailType = detailItem.getNodeName();
             String detailValue = detailItem.getTextContent();

             //assign attributes to listItem object
             if(detailType.matches("item")){
                 int itemValue = Integer.parseInt(detailValue);
                 listItem.setItem(itemValue);
             } else if(detailType.matches("title")){
                 listItem.setTitle(detailValue);
             } else if(detailType.matches("subhead")){
                 listItem.setSubhead(detailValue);

             } else if(detailType.matches("thumb")){
                 ImageManager im = new ImageManager();
                 Bitmap tImg = im.getImage(detailValue);
                 listItem.setThumb(tImg);
             } else if(detailType.matches("photo")){
                 ImageManager im = new ImageManager();
                 Bitmap pImg = im.getImage(detailValue);
                 listItem.setPhoto(pImg);
             } else if(detailType.matches("localAddress")){
                 listItem.setLocalAddress(detailValue);
             } else if(detailType.matches("phone")){
                 listItem.setPhone(detailValue);
             } else if(detailType.matches("webUrl")){
                 URL webUrl1 = new URL(detailValue);
                 listItem.setWebURL(webUrl1);
             } else if(detailType.matches("facebook")){
                 listItem.setFacebook(detailValue);
             } else if(detailType.matches("twitter")){
                 listItem.setTwitter(detailValue);
             } else if(detailType.matches("latitude")){
                 float itemLat = Float.parseFloat(detailValue);
                 listItem.setLatitude(itemLat);
             } else if(detailType.matches("longitude")){
                 float itemLon = Float.parseFloat(detailValue);
                 listItem.setLatitude(itemLon);
             } else if(detailType.matches("notes")){
                 listItem.setNotes(detailValue);
             } else if(detailType.matches("comments")){
                 listItem.setComments(detailValue);
             }

          }
          dataArray.add(listItem);

        }

    } catch (SAXException e) {
        //TODO
        e.printStackTrace();
    } catch (IOException e) {
        //TODO
        e.printStackTrace();
    }

    return dataArray;
} 
```

# visual-studio-2010 - 脚手架/在初始化程序中生成对象的属性

> ID：11300940
> 
> 赞同：5
> 
> 时间：2012-07-02T20:48:44.787
> 
> 标签：visual-studio-2010, resharper

有谁知道如何为所有对象属性“搭建”或“生成”构造函数块？我有带 Resharper 的 VS2010，我希望生成类似的东西：

```
 public Customer CustomerB = new Customer
                                    {
                                        firstName = "",
                                        middleName = "",
                                        lastName = "",
                                        additionalPhone = "0",
                                        address1 = "",
                                        address2 = "",
                                        birthDate = new DateTime(),
                                        cellPhone = "",
                                        city = "",
                                        driverLicenseNumber = "",
                                        driverLicenseState = "",
                                        emailAddress = "",
                                        country = "",
                                        fax = "",
                                        grossIncome = 0,
                                        education = null,
                                        leadRequest = null
                                    }; 
```

然后我可以在哪里翻倍并填写空白。我发现的所有东西都是 DatabaseFirst 和 Getter/Setters 类属性......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:10:23.110

I think it is not possible to generate object initializer for all properties with VS and ReSharper. You need to press *Ctrl+Space* for every property selection.

# c# - 提取 Twitter PIN 信息，WP7

> ID：11300944
> 
> 赞同：3
> 
> 时间：2012-07-02T20:48:57.707
> 
> 标签：c#, api, windows-phone-7, twitter

我一直在关注这个很棒的教程：

[http://buildmobile.com/twitter-in-a-windows-phone-7-app/#fbid=o0eLp-OipGa](http://buildmobile.com/twitter-in-a-windows-phone-7-app/#fbid=o0eLp-OipGa)

但似乎其中使用的引脚提取方法对我不起作用或已过时。我不是 html 报废方面的专家，我想知道是否有人可以帮助我找到提取 pin 的解决方案。本教程使用的方法是：

```
private void BrowserNavigated(object sender, NavigationEventArgs e){
if (AuthenticationBrowser.Visibility == Visibility.Collapsed) {
    AuthenticationBrowser.Visibility = Visibility.Visible;
}
if (e.Uri.AbsoluteUri.ToLower().Replace("https://", "http://") == AuthorizeUrl) {
    var htmlString = AuthenticationBrowser.SaveToString();
    var pinFinder = new Regex(@"<DIV id=oauth_pin>(?<pin>[A-Za-z0-9_]+)</DIV>", RegexOptions.IgnoreCase);
    var match = pinFinder.Match(htmlString);
    if (match.Length > 0) {
        var group = match.Groups["pin"];
        if (group.Length > 0) {
            pin = group.Captures[0].Value;
            if (!string.IsNullOrEmpty(pin)) {
                RetrieveAccessToken();
            }
        }
    }
    if (string.IsNullOrEmpty(pin)){
        Dispatcher.BeginInvoke(() => MessageBox.Show("Authorization denied by user"));
    }
    // Make sure pin is reset to null
    pin = null;
    AuthenticationBrowser.Visibility = Visibility.Collapsed;
} 
```

}

运行该代码时，“匹配”总是以 null 结尾，并且永远找不到引脚。本教程中的其他所有内容都有效，但由于页面的新结构，我不知道如何操作此代码来提取 pin。

我真的很感谢时间，

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:21:08.307

我发现 Twitter 有 2 个不同的 PIN 页面，我认为它们会根据您的浏览器确定将您重定向到哪个页面。

像字符串解析这样简单的东西对你有用。我遇到的第一个 PIN 页面将 PIN 码包裹在 <.code> 标记中，因此只需查找 <.code> 并将其解析出来：

```
 if (innerHtml.Contains("<code>"))
 {
     pin = innerHtml.Substring(innerHtml.IndexOf("<code>") + 6, 7);
 } 
```

如果我没记错的话，我遇到的另一页（看起来像您正在使用的教程中的那个）是使用 id="oauth_pin" 包装的。所以，也只需解析它：

```
else if(innerHtml.Contains("oauth_pin"))
{
     pin = innerHtml.Substring(innerHtml.IndexOf("oauth_pin") + 10, 7);
} 
```

innerHtml 是一个包含页面正文的字符串。这似乎是 var htmlString = AuthenticationBrowser.SaveToString(); 从你的代码。

我在我的 C# 程序中使用了这两个，它们工作得很好，完整的片段：

```
private void WebBrowser1DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
      var innerHtml = webBrowser1.Document.Body.InnerHtml.ToLower();
      var code = string.Empty;
      if (innerHtml.Contains("<code>"))
      {
          code = innerHtml.Substring(innerHtml.IndexOf("<code>") + 6, 7);
      }
      else if(innerHtml.Contains("oauth_pin"))
      {
          code = innerHtml.Substring(innerHtml.IndexOf("oauth_pin") + 10, 7);
      }
      textBox1.Text = code;
} 
```

如果您有任何问题，请告诉我，希望对您有所帮助！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:26:15.210

我需要用这个更改 Toma A 建议的代码：

```
 var innerHtml = webBrowser1.SaveToString();
        var code = string.Empty;

        if (innerHtml.Contains("<code>"))
        {
            code = innerHtml.Substring(innerHtml.IndexOf("<code>") + 6, 7);

        }

        else if (innerHtml.Contains("oauth_pin"))
        {
            code = innerHtml.Substring(innerHtml.IndexOf("oauth_pin") + 10, 7);
        } 
```

因为这个不适用于windows phone

```
 var innerHtml = webBrowser1.Document.Body.InnerHtml.ToLower(); 
```

# iphone - textFieldDidEndEditing 在不需要时移动屏幕

> ID：11300946
> 
> 赞同：6
> 
> 时间：2012-07-02T20:48:59.730
> 
> 标签：iphone, objective-c, uitextfield

在我的应用程序中，我的 UITextFields 位于键盘顶部的下方，因此我必须向上移动视图，以便在编辑时文本字段在键盘上可见。为此，我使用 UITextFieldDelegate 方法 textFieldDidBeginEditing:。然后在方法 textFieldDidEndEditing: 中，我将视图向下移动。

当我尝试在文本字段之间切换时会出现问题。当我这样做时，委托调用方法 textFieldDidEndEditing: 然后立即为另一个文本字段调用 textFieldDidBeginEditing: ，这使视图下降然后立即上升，因此看起来屏幕震动。这种效果有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:14:44.727

I've just been having the exact same issue, and this is the solution that I came to.

Set up a separate method for handling when your textField's keyboard is resigned, and place your self.view.center realignment in there. This way, you can ensure that your textFieldDidEndEditing method is kept separate.

Here's an example if I haven't explained myself properly. Note that when the user taps on a textField, I place a DONE button in the navigation bar (due to it being a numerical keypad), although you can link this method to the DONE button on a normal keyboard:

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
    UIBarButtonItem *hideKeyboardButton = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(resignResponder:)];
    [self.navigationItem setRightBarButtonItem:hideKeyboardButton animated:YES];
}

- (void)textFieldDidEndEditing:(UITextField *)textField {

//Nothing needs to go here anymore

}

- (void)resignResponder:(id)sender {
    [textField resignFirstResponder];
    //Use core animation instead of the simple action below in order to reduce 'snapback'
    self.view.center = CGRectMake(0, 0, 320, 480);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:33:22.173

Just check in which text field you are (for example, give them `tag`s). Then according to this information, move or don't move your view.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:34:58.620

我认为移动文本字段的最佳方法是注册通知

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil]; 
```

在keyboardWillShow: & keyboardWillHide: 中修改textfield frame

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-27T16:50:09.213

我使用了一种不同的方法来解决这个问题：当从一个编辑控件切换到另一个（field1 -> field2）时，您会收到以下消息：

*   textFieldShouldBeginEditing (field2)
*   textFieldShouldEndEditing (field1)
*   textFieldDidEndEditing (field1)
*   textFieldDidBeginEditing (field2)

我所做的是使用计数器变量（x）：

*   在 textFieldShouldBeginEditing 中添加 x+=1
*   在 textFieldShouldEndEditing 中添加 x-=1

然后：

*   如果 x<0，在 textFieldDidEndEditing 中将控件拉伸到原始位置
*   在 textFieldDidBeginEditing 中，如果 x>0 则卷起控件

# youtube-api - 获取 youtube 嵌入视频的视频标签

> ID：11300954
> 
> 赞同：0
> 
> 时间：2012-07-02T20:49:40.433
> 
> 标签：youtube-api, youtube-javascript-api

我正在尝试更改嵌入 youtube 视频的播放速率，有没有办法获取视频标签？

我知道视频保存在 iframe 中，可以使用 chrome 扩展来绕过安全性吗？

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:39:37.760

YouTube API 创建一个公共 JavaScript 对象，允许您控制 YouTube 视频。默认情况下，该对象称为*player*。

唯一的问题是开发人员是否将其分配给另一个对象。

我想您需要的不是绕过 iframe，您只需要检测该对象的名称即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T23:20:13.767

如果您使用的是 HTML5 YouTube 播放器：

```
document.getElementsByTagName("video")[0] 
```

# mysql - 为玩家和锦标赛设计模式

> ID：11300957
> 
> 赞同：1
> 
> 时间：2012-07-02T20:49:46.540
> 
> 标签：mysql, sql, database-design

我是 SQL 初学者，我有一个简单的 MySQL 数据库，其中包含两个表：

1.  球员（身份证，姓名）
2.  比赛（ID、姓名、参与者）

我想保存有关每个锦标赛参与者的信息。我的第一个想法是`participants`应该包含表中的大量`id`字段，`players`但这似乎并不好。

我应该如何以正确的方式设计这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T20:51:42.167

制作另一个名为 Participants 的表，其中包含两个字段。Player_ID 和 Tournament_ID。该表可以包含尽可能多的行来关联谁在何时玩，并且您可以根据需要交叉引用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T20:51:53.993

从第二个表中删除“参与者”并添加第三个表：TournamentPlayers（playerid，tournamentid）。

您应该避免在一个字段中存储多个值。这将打破数据库设计 (1NF) 的第一种正常形式，即只能将原子值存储在一个字段中。关系数据库系统不太适合处理非规范化数据，您*将*很难为非 1NF 表编写查询。

# ruby - 如何在 Ruby 的 MULTI 块中读取 Redis？

> ID：11300958
> 
> 赞同：13
> 
> 时间：2012-07-02T20:49:46.593
> 
> 标签：ruby, transactions, redis

我在 MULTI 事务中封装了一组复杂的 Redis 命令，但事务中的逻辑取决于 Redis 中已有的值。但是事务中的所有读取似乎都返回了`nil`

这是一个演示问题的示例：

```
[Dev]> $redis.set("foo", "bar")
=> "OK"
[Dev]> $redis.multi{ $redis.set("foo", "baz") if $redis.get("foo") == "bar" }
=> ["bar"]
[Dev]> $redis.get("foo")
=> "bar" 
```

显然我希望最后一个返回值是`'baz'`——我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-03T12:40:58.443

您不能，因为所有命令（包括 get）实际上都是在 exec 时执行的。在这种情况下，get 命令只返回一个未来对象，而不是实际值。

有两种方法可以实现这种交易。

**使用 WATCH 子句**

watch 子句用于防止并发更新。如果变量的值在 watch 和 multi 子句之间更新，则不会应用 multi 块中的命令。由客户决定再次尝试交易。

```
loop do
    $redis.watch "foo" 
    val = $redis.get("foo")
    if val == "bar" then
        res = $redis.multi do |r|
            r.set("foo", "baz") 
        end
        break if res
    else
        $redis.unwatch "foo"
        break
    end
end 
```

这里的脚本有点复杂，因为块的内容可以是空的，所以没有简单的方法可以知道交易是否被取消，或者它是否根本没有发生。当多块在所有情况下返回结果时通常更容易，除非事务被取消。

**使用 Lua 服务器端脚本**

使用 Redis 2.6 或更高版本，[可以在服务器上执行 Lua 脚本](https://redis.io/commands/eval)。整个脚本的执行是原子的。它可以在 Ruby 中轻松实现：

```
cmd = <<EOF
    if redis.call('get',KEYS[1]) == ARGV[1] then
       redis.call('set',KEYS[1],ARGV[2] )
    end
EOF
$redis.eval cmd, 1, "foo", "bar", "baz" 
```

这通常比使用 WATCH 子句简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:05:37.657

正如 Sergio 在他的评论中所说，您不能选择`MULTI`在 Redis 中执行这样的块。请参阅[有关交易的文档](http://redis.io/topics/transactions)：

> 要么处理所有命令，要么不处理任何命令。

但是，您可以[`WATCH`](http://redis.io/commands/watch)使用 check-and-set（伪代码）来实现乐观锁定：

```
SET foo bar
WATCH foo
$foo = GET foo
MULTI
if $foo == 'bar'
  SET foo baz
EXEC
GET foo 
```

使用`WATCH`，仅当监视的键未更改时才会执行事务。如果手表键被更改，`EXEC`将失败，您可以再试一次。

另一种可能性是使用脚本功能，但这仅在 2.6 候选版本中可用。

# java - java.lang.ClassNotFoundException: org.apache.commons.codec.binary.Base64 尝试创建 CommonsHttpOAuthConsumer

> ID：11300959
> 
> 赞同：0
> 
> 时间：2012-07-02T20:49:48.647
> 
> 标签：java, eclipse, oauth

编辑：

```
public static void main(String[] args)throws Exception {
    // TODO Auto-generated method stub
    System.out.println("debug1");
    CommonsHttpOAuthConsumer consumer = new CommonsHttpOAuthConsumer("key","secret");
         System.out.println("debug2");
...} 
```

嗨，当我尝试运行此脚本时，我得到以下响应：

调试1

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/codec/binary/Base64

at oauth.signpost.signature.OAuthMessageSigner.<init>(OAuthMessageSigner.java:37)

at oauth.signpost.signature.HmacSha1MessageSigner.<init>(HmacSha1MessageSigner.java:30)

at oauth.signpost.AbstractOAuthConsumer.<init>(AbstractOAuthConsumer.java:65)

at oauth.signpost.commonshttp.CommonsHttpOAuthConsumer.<init>(CommonsHttpOAuthConsumer.java:30)

at mein.tester.main(tester.java:21)

Caused by: java.lang.ClassNotFoundException: org.apache.commons.codec.binary.Base64

at java.net.URLClassLoader$1.run(Unknown Source)

at java.security.AccessController.doPrivileged(Native Method)

at java.net.URLClassLoader.findClass(Unknown Source)

at java.lang.ClassLoader.loadClass(Unknown Source)

at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)

at java.lang.ClassLoader.loadClass(Unknown Source)

at java.lang.ClassLoader.loadClassInternal(Unknown Source)

... 5 more 
```

第 21 行是前一行

```
 System.out.println("debug2"); 
```

好吧，我可以轻松地在 Eclipse 中编译代码，并且添加了 2 个 Signpost 库以及 common-codec.jar 作为外部库，正如我在另一篇文章中所读到的那样。但是，我如何使其在运行时可用？（我确实喜欢发布“将其添加到 WEB-INF/lib ”-> 我创建了该文件夹并添加了 jar -我还尝试了 defaultoauthconsumer -> 相同的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:53:09.150

右键单击 jar 并选择“添加到构建路径”？我不认为 ide 会自动将它添加到你的类路径中，除非你告诉它。

# java - 无法在我的 Web 应用程序中创建 log4j 日志文件

> ID：11300968
> 
> 赞同：0
> 
> 时间：2012-07-02T20:50:22.467
> 
> 标签：java, eclipse, jakarta-ee, logging, log4j

我正在使用 log4j 作为我的日志库，并且我希望生成的日志文件位于我的 Web 应用程序中，因此以下是我正在使用的 jar：

```
 <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.4</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.4</version>
    </dependency> 
```

以下是 log4j 配置：

```
log4j.rootLogger=DEBUG, stdout, R

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout

# Pattern to output the caller's file name and line number.
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n

log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File=mylog.log

log4j.appender.R.MaxFileSize=10000KB

log4j.appender.R.MaxBackupIndex=3

log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n

# Control/Limit integrated frameworks logging messages
log4j.logger.org.springframework=ERROR 
```

**问题**：当我使用文件系统路径时`log4j.appender.R.File=${user.home}/mylog.log` ，文件已成功创建，没有问题，但是当尝试使用相对路径时：`log4j.appender.R.File=mylog.log`文件未创建。

请告知如何解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:10:50.610

由于您提到了一个 Web 应用程序，因此当前工作目录将是 Web 容器根目录，例如 TOMCAT_HOME。因此，日志文件路径将与您的 Web 容器相关，而不是您的 Web 应用程序。

此外，大多数 Web 容器限制将文件写入 Web 应用程序目录。可能有一些配置可以做到这一点 - 不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:03:42.033

检查当前工作目录的权限。确保执行 Java 进程的用户具有读写权限。

要确定工作目录，请从 Web 应用程序上下文中的类（例如 a`Servlet`或 a `ServletContextListener`）运行它：

```
System.out.println("Working Directory = " + System.getProperty("user.dir")); 
```

# meteor - 错误：将 node_modules 放入 /public 时注意 EMFILE

> ID：11300969
> 
> 赞同：0
> 
> 时间：2012-07-02T20:50:23.900
> 
> 标签：meteor

据说，我应该把 node_modules 放到 Meteor 的 /public 中。这工作正常，直到我在 node_modules 目录中获得大量文件，并且我开始收到此错误：

```
Error: watch EMFILE
    at errnoException (fs.js:648:11)
    at FSWatcher.start (fs.js:675:11)
    at Object.watch (fs.js:703:11)
    at [object Object]._scan (/usr/local/meteor/app/meteor/run.js:347:12)
    at /usr/local/meteor/app/meteor/run.js:362:14
    at Array.forEach (native)
    at Function.<anonymous> (/usr/local/meteor/app/lib/third/underscore.js:76:11)
    at [object Object]._scan (/usr/local/meteor/app/meteor/run.js:361:9)
    at /usr/local/meteor/app/meteor/run.js:362:14
    at Array.forEach (native) 
```

我应该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:40:00.413

此命令在 linux 中解决它：

```
sudo sh -c 'echo 8192 > /proc/sys/fs/inotify/max_user_instances' 
```

# javascript - 如何自定义 OpenERP 6.1 WebClient HTML DOM？

> ID：11300971
> 
> 赞同：3
> 
> 时间：2012-07-02T20:50:30.993
> 
> 标签：javascript, jquery, css, dom, openerp

OpenERP Web 客户端的页面可以变得非常宽，列表视图中有很多列。在短屏幕上，这是一个麻烦，因为居中的菜单在内容的右侧无法触及。我决定为此找到一个快速解决方案：**使菜单与左对齐**。对于普通的网站，这对于标准的 JQuery 来说是小菜一碟，但是这个 OpenERP web 的东西几乎完全是用 JS 生成的！

生成的 HTML 具有以下菜单结构：

```
<div class="menu" id="oe_menu">
  <table align="left">
    <tbody>
      <tr>
        <td>
          <a href="#" data-menu="3">
            Settings
          </a>
        </td>
        <!--other menus...-->
      </tr>
    </tbody>
  </table>
</div> 
```

使用 JQuery 的方法是（在 JS 控制台中测试）：

```
$('div.menu table[align=center]').attr('align','left'); 
```

虽然通常的[$(document).ready()](http://docs.jquery.com/Tutorials:Introducing_$%28document%29.ready%28%29)会失败，因为加载 DOM 的时间只是 OpenERP Web 客户端的初始化。

我的要求是这需要从一个模块进行管理。Simahawk 得到了类似主题的答案 -[连接到注销事件](https://stackoverflow.com/questions/8817467/openerp-web-client-6-1-how-to-override-base-javascript-functions)，这为我指明了正确的方向，但没有解决我的任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T20:50:33.287

我从 web_livechat 模块中找到并修改了一段代码，最终成功了。我的模块叫做[camara](https://code.launchpad.net/~camara-custom-openerp/openobject-addons/camara-6.1)，这很重要，因为 openerp 对象的新方法必须在你的模块之后调用 - static/src/js/tweaks.js：

```
// openerp.camara(openerp) is executed when the module is loaded - UI is not rendered yet!

openerp.camara = function(openerp) {

    // so we hook into (override) the Header do_update() call 
    // which is executed upon session validation by the WebClient
    // we have to call the overriden parent method
    // then we hook onto the update_promise 
    // which executes our code after the update is done.

    openerp.web.Header.include({
        do_update: function() {
        var self = this;
        this._super();
        this.update_promise.then(function() {
            // change menu alignment to the left
            // because with wide views, it runs out of reach
            $('div.menu table[align=center]').attr('align','left')
        });
        }
    });

} 
```

js 文件需要包含在**__ *openerp* __** .py 中：

```
'js': ["static/src/js/tweaks.js"] 
```

剩下的问题：

*   你喜欢这个并认为它是一种合适的方法吗？
*   如果没有，请提供其他解决方案。

I myself find this rather clumsy, that's why I ask. I thought of using CSS but did not manage to override the table's align attribute.

# magento - magento - 多语言网站 + 将商店代码添加到 url - 想要显示标志图标

> ID：11300974
> 
> 赞同：1
> 
> 时间：2012-07-02T20:50:39.000
> 
> 标签：magento, multilingual

我想让一个多语言的 magento 站点使用标志图像而不是语言选择框供用户选择页面语言。在[http://www.atwix.com/magento/replace-language-selector-flag-icons/](http://www.atwix.com/magento/replace-language-selector-flag-icons/)上有一篇很好的文章， 唯一的问题是我们使用“将商店代码添加到 url”选项。我破解了这段代码，但它可以使用一些改进并使它看起来更像 Magento。

```
 <?php if(count($this->getStores())>1): ?>
    <div class="form-language">
        <div class="langs-wrapper">
        <?php foreach ($this->getStores() as $_lang): ?>
            <?php if ($_lang->getCode() != 'default'): ?>   
            <?  
                $base_url = Mage::getBaseUrl();
                // remove language in base url
                $base_url = str_replace('/en/' , "" , $base_url);       
                $base_url = str_replace('/fr/' , "" , $base_url);                   
                $current_url = $this->helper('core/url')->getCurrentUrl();
                // take out base url and language code
                $rest_of_url = str_replace($base_url , "" , $current_url);                  
                $rest_of_url = str_replace('/en/' , "" , $rest_of_url);     
                $rest_of_url = str_replace('/fr/' , "" , $rest_of_url);      
                // assmble new url
                $new_url = $base_url . '/' . $_lang->getCode()  . '/' . $rest_of_url;                       
            ?>      
            <a class="lang-flag" href="<?php echo $new_url ;?>"><img src="<?php echo $this->getSkinUrl('images/flags/' . $_lang->getCode() . '.png');?>" alt=""></a>
            <?php endif;?>
        <?php endforeach;?>
        </div>
    </div>
    <?php endif;?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:14:16.100

模板文件（路径/到/模板/file.phtml）：

```
<?php if(count($this->getStores()) > 1): ?>
<div class="form-language">
    <?php foreach ($this->getStores() as $_lang): ?>
        <?php $selected = $_lang->getId() == $this->getCurrentStoreId() ?>
        <a class="lang-flag<?php $selected && print ' selected' ?>" href="<?php echo $_lang->getCurrentUrl() ?>">
            <img src="<?php echo $this->getSkinUrl('images/flags/' . $_lang->getCode() . '.png');?>" alt="<?php echo $this->htmlEscape($_lang->getName()) ?>">
        </a>
    <?php endforeach ?>
</div>
<?php endif ?> 
```

将此行添加到您的布局更新 xml 文件（如果您尚未定义 switch 块）：

```
<block type="page/switch" name="lang.switcher" template="path/to/template/file.phtml" /> 
```

如果您已经拥有一个：

```
<reference name="store_language">
    <action method="setTemplate"><tmpl>path/to/template/file.phtml</tmpl></action>
</reference> 
```

# php - ORM 关系、PHP 和 SQL 连接

> ID：11300976
> 
> 赞同：4
> 
> 时间：2012-07-02T20:50:55.737
> 
> 标签：php, sql, orm

我正在为一个学校项目开发一个小的 PHP 框架，我目前正在学习如何构建 ORM 部分。

但是，我不知道如何从带有连接的 SQL 查询中映射对象关系，或者我只是不知道要搜索的正确词:(

```
t1
  id
  title
  text 
```

-

```
t2
  id
  name
  description 
```

我试着做一个简单的：SELECT * FROM t1 LEFT JOIN t2 ON t1.id = t2.t1_id

我得到的是一个简单的数组，其中表和 id 列中的所有字段都被覆盖，因为它存在于两者中。

```
[
  "id" => "2"
  "title" => "Lorem"
  "text" => "Ipsum"
  "name" => "Tomato"
  "description" => "Tomato are nice"
] 
```

所以我的问题是有一种简单的方法可以通过 joins 获得类似的东西吗？

```
[
  "t1" => [
     "id" => 2
     "title" => "Lorem"
     "text" => "Tomato"
     "t2" => [
       "id" => 3
       "name" => "Tomato"
       "description" => "Tomato are nice"
     ]
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:54:30.067

不，连接是用于创建两个表并排的表视图。但你可以这样做：

```
SELECT t1.id, t1.title, t1.next, t2.name as "t2_name", t2.description as "t2_description" FROM t1 LEFT JOIN t2 ON t1.id = t2.t1_id 
```

这将为您提供以下前缀：

```
[
    "t1" => [
        "id" => 2
        "title" => "Lorem"
        "text" => "Tomato"
        "id" => 3
        "t2_name" => "Tomato"
        "t2_description" => "Tomato are nice"
    ]
] 
```

这解决了您试图解决的相同问题。

# c++ - Windows XP 上用于高级格式硬盘的物理扇区大小

> ID：11300978
> 
> 赞同：1
> 
> 时间：2012-07-02T20:51:05.750
> 
> 标签：c++, windows-xp, hdd, sector

我需要检索硬盘的物理扇区大小，以确定硬盘是否为高级格式，在 Windows XP 中。

我尝试使用[`STORAGE_ACCESS_ALIGNMENT_DESCRIPTOR`](https://msdn.microsoft.com/en-us/library/windows/desktop/ff800831(v=vs.85).aspx)，但它在 Windows XP 中不兼容。我使用的任何方法都将返回 512 而不是 4096，其中包括 WMI，其中返回的唯一值是 512。

我一直在用 C++ 进行编码，如果有人能指出一种方法来帮助我找到实际的物理扇区大小，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-25T17:10:43.347

根据微软的[MSDN 文章](https://msdn.microsoft.com/en-us/windows/compatibility/advanced-format-disk-compatibility-update)：

> Windows XP、Windows Server 2003 和 Windows Server 2003 R2 不支持 512e 或 4Kn 媒体。虽然系统可能会启动并能够以最低限度运行，但可能存在功能问题、数据丢失或次优性能的未知场景。因此，Microsoft 强烈警告不要将 512e 媒体与 Windows XP 或其他基于 Windows XP 代码库的产品（例如 Windows Home Server 1.0、Windows Server 2003、Windows Server 2003 R2、Windows XP 64 位版、Windows XP Embedded、Windows Small Business Server 2003 和 Windows Small Business Server 2003 R2）。

在 Windows XP 下，您将无法获得真正的物理扇区大小，因为操作系统本身假定它是 512 字节。

# python - 验证用 ElementTree 解析的 XML，可能吗？

> ID：11300979
> 
> 赞同：1
> 
> 时间：2012-07-02T20:51:09.737
> 
> 标签：python, xml, xsd, dtd, elementtree

我认为 ElementTree 不支持 DTD 或 XSD 是否正确？有没有办法将任何东西插入 ElementTree 以支持验证，最好是通过 XML Schema？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:27:32.420

我会尝试使用 lxml 库；它支持 etree 表示和验证。

# google-apps-script - 尝试删除由于我的错误而出现故障的 ScriptDb 数据库

> ID：11300989
> 
> 赞同：1
> 
> 时间：2012-07-02T20:51:34.217
> 
> 标签：google-apps-script

真的很尴尬，但我测试了从电子表格创建数据库，并使用[此示例](https://developers.google.com/apps-script/scriptdb#copying_a_spreadsheet_into_the_database)中的修改脚本：

```
function loadDatabaseFromSheet() {
  var sheet = SpreadsheetApp.openById('my_key').getSheetByName('Payroll');
  var data = sheet.getDataRange().getValues();
  data = data.splice(0, 9);                 // **this is where I went wrong**
  var keys = data[0];                       // **this actually corresponds with a blank row**
  var db = ScriptDb.getMyDb();
  for (var row = 1; row < data.length; row++) {
    var rowData = data[row];
    var item = {};
    for (var column = 0; column < keys.length; column++) {
      item[keys[column]] = rowData[column]; // **null values used to name attributes???**
    }
    db.save(item);
  }
} 
```

所以 Javascrit 菜鸟应该使用`data.splice(0, 9)`而不是`data = data.splice(0, 9)`. 我想从数组中删除前九行，而不是保留它们。

无论如何，就目前而言，数据库似乎不可修复或不可擦除。我无法检索任何记录；每当我尝试调用 .next() 或 .hasNext() 时，都会引发服务器错误，例如使用[此处](https://developers.google.com/apps-script/scriptdb#deleting_all_items_from_the_database)的脚本：

```
function deleteAll() {
  var db = ScriptDb.getMyDb();
  while (true) {
    var result = db.query({}); // get everything, up to limit
    if (result.getSize() == 0) {
      break;
    }
    while (result.hasNext()) {
      db.remove(result.next());
    }
  }
} 
```

.getSize() 确实有效，但是当脚本到达带有 .hasNext() 的行时，脚本会返回服务器错误，这可能是由于对象错误。我还尝试了批量删除：

```
function batchRemove() {
  var db = ScriptDb.getMyDb();
  var result = db.query({});
  db.removeBatch(result, false); 
} 
```

我得到：

> 找不到方法 removeBatch($Proxy799,boolean)。（第 114 行）

顺便说一句，我可以成功地将新记录保存到数据库中，并通过查询检索该记录，但是如果查询返回数据库中使用有缺陷的脚本创建的任何其他内容，那么当我尝试时就会失败处理生成的对象。

所以我理解我的错误并承诺将来会更加小心，但有谁知道我如何“清理”我的数据库以重新开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:22:41.813

好吧，我猜是误报，我又试了一次，现在我可以清除数据库了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:12:43.107

我认为这不是虚惊一场，当在 ScriptDb 上运行的函数超过执行时间时，我也经历过类似的行为。当您尝试删除或以某种方式与受执行时间错误影响的对象交互时，ScriptDb 变得无响应。看来您所能做的就是等待，然后一切恢复正常。最佳实践是制定策略以防止与 ScriptDb 交互的函数达到执行时间限制。

# model-view-controller - ExtJS 使用 MVC 在边框面板中嵌套面板

> ID：11300991
> 
> 赞同：1
> 
> 时间：2012-07-02T20:51:51.887
> 
> 标签：model-view-controller, extjs4, extjs

我之前不小心删除了这个帖子，所以我重新提交：\

我通常是 Ext JS 和 MVC 的新手，并且正在玩弄创建一个应用程序，该应用程序具有嵌套在面板内的图表，该面板嵌套在应用程序内的边框面板内。[从上到下依次为视口 > 边框面板 > '中心区域' 中的面板 > 图表]

我在边框面板中嵌套面板的原因是嵌套面板将同时保存图表以及图表的工具栏，这两者都是动态的，具体取决于用户的选择。

虽然简单地让边框面板引用外部定义的图表视图效果很好，但一旦我尝试让它引用外部定义的面板视图，它就会抛出“未捕获的类型错误：无法调用未定义的方法‘子字符串’”，并且 Aptana 给了我一个“名称是undefined' 命名空间错误，无论我是否让嵌套面板引用图表或只是留空。我已经仔细检查了我的名字间距，所以我有点迷失从哪里开始寻找问题。

我的基本应用程序文件如下：

```
Ext.application({
    name: 'Chart',

    appFolder: 'chart',

    controllers:['sidebar.Navigation', 'commoditycontrol.Commoditycontrol',    
    'chart.oil.Spreads'],

    launch: function() {
        Ext.create('Ext.container.Viewport', {
            layout: 'border',
            items: [{
                region: 'north',
                xtype: 'commoditycontrol',
            }, {
                region: 'east',
                xtype: 'sidebarnavigation',
            }, {
                region: 'center',
                xtype: 'oilbase',
            }]
        });
    },

}); 
```

“oilbase”视图只是一个导入图表和图表工具栏视图的面板（在这种情况下，我已将工具栏视图排除在外）

```
Ext.define('Chart.view.base.Oil', {
   extend: 'Ext.panel.Panel',
   alias: 'widget.oilbase',

   name: 'oilbase',
   layout: 'fit',

   items: [{
       xtype: 'oilspreads'
   }]

}); 
```

这是图表视图“油价”

```
Ext.define('Chart.view.chart.oil.Spreads', {
   extend: 'Ext.chart.Chart',
   alias: 'widget.oilspreads',

   name: 'oilspreads',
   layout: 'fit',
   store: 'Chart.store.oil.Spreads',
   config: {
   style: {
            background: '#333333'
          },
    },

    axes: [
        {
            title: 'Close',
            type: 'Numeric',
            position: 'left',
            fields: ['close'],
            minimum: 0,
            maximum: 100,
            cls: 'axis'
        },
        {
            title: 'Month',
            type: 'Category',
            position: 'bottom',
            fields: ['month'],
            cls: 'axis'
        }
    ],

    series: [
        {
            type: 'line',
            xField: 'month',
            yField: 'close'
        }
    ]
}); 
```

同样，如果我在应用程序中引用图表视图而不是“oilbase”空面板，一切正常。如果我引用默认面板 xtype，一切正常。

是否不鼓励嵌套面板？我的直觉是，我只是遗漏了一个明显的命名空间问题，但我希望看到第二组眼睛，以及对我对 ExtJs 的 MVC 模式的一般方法的评论。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:02:54.370

为了正确加载视图，必须在应用程序的视图配置中或其中一个控制器的视图配置中进行定义。

# php - 使用 LWP 登录 JSP 服务器

> ID：11300992
> 
> 赞同：1
> 
> 时间：2012-07-02T20:51:52.787
> 
> 标签：php, javascript, perl, jsp, curl

我正在尝试创建一个脚本以使用 LWP（Perl 中的 WWW 库）登录 JSP 网站并执行多个操作。该网站有一些在登录后呈现的 Ajax 元素（小部件）。我可以使用此代码获取框架，但是 Ajax 小部件无法加载。

```
#!/usr/bin/perl
use strict;
use warnings;
use LWP::Simple;
use LWP::UserAgent;
use HTTP::Request::Common qw(POST);
use HTTP::Cookies;

my $ua = LWP::UserAgent->new;
$ua->agent('Mozilla/8.0');
$ua->cookie_jar(
        HTTP::Cookies->new(
                file => 'mycookies.txt',
                autosave => 1
                )
        );
push @{ $ua->requests_redirectable } , 'POST';
$ua->max_redirect('3');
my $user="USER";
my $psw="PASSWORD";
my $req = POST 'http://somesite.../?cmd=login', ['userid'
 => $user , 'pwd' => $psw];
my $res = $ua->request($req);
if ($res->is_success){
print $res->content;}else { print $res->status_line . "\n" . $res->content;}
exit 0; 
```

我尝试了 CURL，但在 Ajax 部分也失败了。任何人都可以帮忙吗？是否有任何工具可以做到这一点？[我被告知我需要创建一个虚拟浏览器，但除了 curl 和 lwp 我不知道如何]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:02:38.167

您需要用于 AJAX 的 JavaScript 引擎，例如浏览器。见[WWW::Mechanize::Firefox](http://metacpan.org/module/WWW%3a%3aMechanize%3a%3aFirefox)。

# apache - 如何将错误记录到文件中，并使用 apache 分发带有错误的电子邮件？

> ID：11300996
> 
> 赞同：0
> 
> 时间：2012-07-02T20:52:11.517
> 
> 标签：apache

如何设置 apache 以在日志文件中发生错误时通过电子邮件发送错误？我已经尝试过[这个例子](http://insidenothing.com/?p=131)，但是在 apache 重新启动后，它似乎不再处理错误了。

我的目标是在服务器出现错误时通知我的团队，以便我们及时解决。

# jags - jags / bugs 的 emacs 语法高亮

> ID：11300999
> 
> 赞同：2
> 
> 时间：2012-07-02T20:33:55.980
> 
> 标签：jags

是否有颜色突出显示锯齿和错误模型文件的软件包？我安装了 ESS，但它似乎无法识别开箱即用的 .bug 文件或 jags/bugs 语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:11:33.837

## 语法高亮

我正在使用 ESS 5.14（来自 ELPA），语法高亮或智能下划线对我来说适用于 GNU Emacs 24.1.1。如果要突出显示给定文件，可以尝试`M-x ess-jags-mode`或添加一个钩子以每次突出显示 JAGS 文件，例如

```
(add-to-list 'auto-mode-alist '("\\.jag\\'" . jags-mode)) 
```

但是，这并不是真正需要的，因为您可以简单地

```
(require 'ess-jags-d) 
```

在你的`.emacs`. BUGS 文件有相应的模式。该文件已包含在早期版本（至少 5.13）中，并附带相应的`auto-mode-alist`（用于`"\\.[jJ][aA][gG]\\'"`扩展）。
（请注意，使用 JAGS 和 BUGS 似乎存在[一些微妙的问题](http://comments.gmane.org/gmane.emacs.ess.general/5942)，但我不能说更多，因为我只使用 JAGS。）

## 运行命令文件

如果你想坚持使用 Emacs 来运行 JAGS（即，而不是[rjags](http://cran.r-project.org/web/packages/rjags/index.html)或其他 JAGS/BUGS 的 R 接口），只需要知道一个命令：如[ESS 手册](http://ess.r-project.org/Manual/ess.html#ESS_0028JAGS_0029_002d_002dCommand-files)中所述，在处理命令文件时，`C-c C-c`应该创建一个`.jmd`文件，然后`C-c C-c`再次 'ing 应该将此命令文件提交给 Emacs `*shell*`（在新缓冲区中），并`jags`以批处理模式调用。在内部，此命令绑定到“下一步操作”指令 ( `ess-*-next-action`)。例如，使用 JAGS 示例文件附带的鼠标数据，您应该得到`mice.jmd`如下所示的：

```
model in "mice.jag"
data in "mice.jdt"
compile, nchains(1)
parameters in "mice.in1", chain(1)
initialize
update 10000
update 10000
#
parameters to "mice.to1", chain(1)
coda \*, stem("mice")
system rm -f mice.ind
system ln -s miceindex.txt mice.ind
system rm -f mice1.out
system ln -s micechain1.txt mice1.out
exit
Local Variables:
ess-jags-chains:1
ess-jags-command:"jags"
End: 
```

注意默认文件名！在这里，假设数据在文件中`mice.jdt`，参数的初始值在`mice.in1`. 如果需要，您可以在 Emacs 缓冲区中更改它，以及修改要使用的链数。