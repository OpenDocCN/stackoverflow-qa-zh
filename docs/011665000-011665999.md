# StackOverflow 问答 11665000-11665999

# c++ - VS 到 CBlocks、std::sort、operator< 编译器错误

> ID：11665009
> 
> 赞同：0
> 
> 时间：2012-07-26T08:10:36.657
> 
> 标签：c++, sorting, operators, codeblocks, visual-studio-express

我有一个问题（对不起我的英语不好。）

我在 VS 2008 Express C++ 中开发了一个 c++ 程序，我想将它迁移到代码块。迁移成功，但默认的 GNU 编译器在编译时发现错误。

但是VS没有发现任何东西。我使用`std::sort`算法来 a `std::vector`，包含类实例。我对此表示`bool operator<()const`赞同。

```
 class Item{
        //...
        double size;

    public:
        bool operator<( Item& theOther)const{
            return size < theOther.size ? true : false;
        }
        //...
    } 
```

现在编译器告诉我：

```
c:\mingw\bin\..\lib\gcc\mingw32\4.5.2\include\c++\bits\stl_algo.h||In function '_RandomAccessIterator std::__unguarded_partition(_RandomAccessIterator, _RandomAccessIterator, const _Tp&) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Item*, std::vector<Item> >, _Tp = Item]':|

c:\mingw\bin\..\lib\gcc\mingw32\4.5.2\include\c++\bits\stl_algo.h:2249|70|instantiated from '_RandomAccessIterator std::__unguarded_partition_pivot(_RandomAccessIterator, _RandomAccessIterator) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Item*, std::vector<Item> >]'|

c:\mingw\bin\..\lib\gcc\mingw32\4.5.2\include\c++\bits\stl_algo.h:2280|54|instantiated from 'void std::__introsort_loop(_RandomAccessIterator, _RandomAccessIterator, _Size) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Item*, std::vector<Item> >, _Size = int]'|

c:\mingw\bin\..\lib\gcc\mingw32\4.5.2\include\c++\bits\stl_algo.h:5212|4|instantiated from 'void std::sort(_RAIter, _RAIter) [with _RAIter = __gnu_cxx::__normal_iterator<Item*, std::vector<Item> >]'|

D:\the_user\packing\packing\PackingProblem.h:426|41|instantiated from here|
c:\mingw\bin\..\lib\gcc\mingw32\4.5.2\include\c++\bits\stl_algo.h|2208|error: no match for 'operator<' in '__first.__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = Item*, _Container = std::vector<Item>, __gnu_cxx::__normal_iterator<_Iterator, _Container>::reference = Item&]() < __pivot'|

D:\the_user\packing\packing\Item.h|15|note: candidate is: bool Item::operator<(Item&) const|
||=== Build finished: 2 errors, 0 warnings ===| 
```

有人知道我该如何解决吗？

谢谢大家的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:39:03.967

改变

```
bool operator<( Item& theOther)const 
```

进入

```
bool operator<(const Item& theOther)const 
```

应该管用。

# php - 在表格标题中显示行

> ID：11665014
> 
> 赞同：0
> 
> 时间：2012-07-26T08:10:48.547
> 
> 标签：php, mysql

我有一张像

```
id       course       activities   

1     Microbiology      Quiz1
2     Microbiology      Quiz2
3     Microbiology      Quiz3
4     Microbiology      Quiz4 
```

我需要在 php 文件中显示为表头

```
Quiz1   Quiz2   Quiz3    Quiz3  Quiz4 
```

这是我的代码

```
<?php
$sql = mysql_query('SELECT * FROM activity');
while($row = mysql_fetch($sql))
{
    $activities $row['activities'];
}
echo '<table>
       <tr>
        <th>'.$activities.'</th>
       </tr>
     </table>';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:14:02.350

你只需要重新组织你的代码：

```
<?php
$sql = mysql_query('SELECT * FROM activity');

echo '<table><tr>';
while($row = mysql_fetch_array($sql))
{
    echo '<th>'.$row['activities'].'</th>';
}
echo '</tr>';

//your data rows here

echo '</table>';
?> 
```

# android - Android non-blocking read from socket

> ID：11665015
> 
> 赞同：0
> 
> 时间：2012-07-26T08:10:50.807
> 
> 标签：android, sockets, serversocket

I need a little help with implementation of reading a data from socket in my application.

I'm working on application which is listening for a data using Socket and parsing received data. The problem is that I need to connect to my device and start the socket so I can receive the data. I was using `ServerSocket` which is blocking and waiting to stop the other socket, which is sending me the data, and parse the data after that. But I need to be able to read the stream before closing the server's socket.

So any idea how can I achieve this kind of implementation and which classes I have to use about that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:18:33.177

The following code is what im using to listen broadcast messages from network:

```
void startBroadcastListener(final int receivingPort)
{
    new Thread() 
    {
        public void run() 
        {
            try 
            {
                int port = receivingPort;
                dsocket = new DatagramSocket(port);
                byte[] buffer = new byte[2048];

                DatagramPacket packet = new DatagramPacket(buffer, buffer.length);
                while (true) 
                {
                    //System.out.println("Receiving...");
                    dsocket.receive(packet);
                    String msg = new String(buffer, 0, packet.getLength());
                    packet.setLength(buffer.length);

                    String binaryString = convertHexToBinary(packet.getData()).replaceAll("\\s","");

                    //System.out.println(packet.getAddress().getHostName() + ": " + binaryString);
                }
            }
            catch (Exception e) 
            {
                e.printStackTrace();
            }
        }
    }.start();
} 
```

# google-app-engine - 在 Google App Engine/J 中，表中的最大行数是多少？

> ID：11665022
> 
> 赞同：1
> 
> 时间：2012-07-26T08:11:08.717
> 
> 标签：google-app-engine, google-cloud-datastore

比方说，我想在表格中保留“聊天”。列可以是“from”、“to”和“message”（所有字符串）。此表中的最大行数是多少？超过 2000 万行后会发生什么？2000万是大还是小？

一般来说，在 Google App Engine 形式的 Java 中，表中的最大行数是多少？最佳实践是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:14:41.117

如果您提到数据存储，出于所有实际原因，唯一的限制是您的预算，您存储的数据越多，您将支付更多的存储费用。

* * *

关于查询速度，查询中的主要开销是查询获取的项目数量，从 1,000 个实体集和 100,000,000 个实体中检索 X 个项目几乎需要相同的时间。

[Google IO 2008](http://www.youtube.com/watch?v=tx5gdoNpcZM)有一个关于数据存储区的非常有趣的视频（索引部分仍然相关）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:32:16.747

您可以在数据存储中存储无限的行。但是，您应该注意操作它们。如果您的应用程序尝试检索太多行，则会导致严重的性能问题。(DeadlineExceededException) 所以你最好做一些设备。例如，获取小尺寸实体并在客户端循环它。

# c# - 选择模式为 FullColumnSelect 时 DataGridView 不显示 DataTable

> ID：11665024
> 
> 赞同：0
> 
> 时间：2012-07-26T08:11:17.917
> 
> 标签：c#, winforms, datagridview, datasource

当我的 DataGridView 的选择模式设置为 FullColumnSelect 时，如何绑定到 DataSource (DataTable)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:31:59.060

我不确定是否有合适的方法，或者是否是这样，但我让我的工作方式如此；

```
foreach (DataGridViewColumn col in dataGrid.Columns)
        {
            col.SortMode = DataGridViewColumnSortMode.NotSortable;
            col.Selected = false;
        }
        dataGrid.SelectionMode = DataGridViewSelectionMode.FullColumnSelect; 
```

因此，对于数据网格中的每一列，您将 sortmode 设置为 notsortable（这可能是唯一的方法），并选择为 false。然后将选择方式改为fullcolumn select，第一列改为selected=true。

如果您愿意，您可能可以在设计模式下拥有最后一行代码，即在设计模式下单击数据网格时更改它。

# java - 私人访问？爪哇

> ID：11665025
> 
> 赞同：1
> 
> 时间：2012-07-26T08:11:21.443
> 
> 标签：java, class, private

我有一个与变量“totalFloat”有关的私人访问错误。但是，我一直在引用和使用同一个类的方法，没有这个问题。

在这种情况下，有没有一种通用的方法来解决私人访问错误？

```
public static void writeHtmlFile() {
  double contentsChangeDraw;

  String ChangeDrawer = "ChangeFloat.html";
  try {
    PrintWriter outputStream = new PrintWriter(ChangeDrawer); 
    contentsChangeDraw=cd.getTotalFloat(totalFloat); 

    // totalFloat has private access in ChangeDrawer, which means I am
    // unable to use the method to calculate the array that needs to be written  

    outputStream.println(contentsChangeDraw); 
    outputStream.close(); 
    System.out.println("The contents of the ChangeDrawer have been written to a file");
  } catch (FileNotFoundException e) {
    e.printStackTrace();      
  }       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:29:30.593

我敢打赌`totalFloat`有这样的声明：

```
private int totalFloat; // or double, or boolean, or something else 
```

您不能从静态方法访问它，因为它是一个成员变量。做了

```
private static int totalFloat; // or double, or boolean, or something else 
```

访问它（或将您的方法更改`writeHtmlFile()`为非静态）。

# c - 为什么 MISRA 规则禁止使用“#undef”？

> ID：11665031
> 
> 赞同：7
> 
> 时间：2012-07-26T08:11:35.603
> 
> 标签：c, misra

为什么 MISRA 规则禁止`#undef`在程序中使用？如果我想限制任何宏的范围，如何在不使用的情况下做到这一点`#undef`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T08:17:30.227

基本上，因为 MISRA 太偏执，不相信程序员知道他们在做什么 :-) 认真地说，MISRA 试图防止某些错误，并以这样一种信念为指导，即如果你禁止潜在有问题的代码结构，软件的可靠性会突然增加. 这是否属实还有待商榷。在 的情况下`#undef`，可能的原因是，一旦定义了宏，它的扩展就会保持不变，并且始终是其定义中的扩展。如果你允许`#undef`，标识符可以作为变量、函数名、typedef 或 struct/union 成员重用，甚至可以作为具有*不同*扩展的宏。如果您愿意，这是一种防止标识符隐藏的方法。可怕，不是吗？！你决定！

`#undef`要回答您的第二个问题，如果不能使用，限制宏范围的唯一方法是使用文件结尾，这是结束宏范围的唯一其他标准定义方法。换句话说，您必须将源文件拆分为更小的源文件，并且仅在编译需要的特定文件时才定义宏。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T08:41:00.823

`#undef`MISRA 对禁止使用的原因有自己的解释：

> #undef 通常不需要。当在代码中使用宏时，它的使用可能会导致对宏的存在或含义产生混淆。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T13:19:55.577

回复@Bubble 上面的评论：

> 要求你举个例子。我无法想象它怎么会造成混乱？

想象一下场景...

```
#define MACRO some-definition
.
.
MACRO // Invocation 1
.
.
MACRO // Invocation 2
.
. 
```

然后有人出现并插入，在现有的 MACRO 调用之间

```
.
.
#undef MACRO
#define MACRO something-else
MACRO // Between (1) and (2)
.
. 
```

MACRO 的原始第二次调用不会达到您的预期！

# delphi - 按钮点击进度条

> ID：11665034
> 
> 赞同：1
> 
> 时间：2012-07-26T08:11:51.337
> 
> 标签：delphi, delphi-7

使用以下 youtube 视频[http://www.youtube.com/watch?v=ePuCsvwoHMo](http://www.youtube.com/watch?v=ePuCsvwoHMo)的帮助，我想通过零 Delphi 体验在按钮单击时获得一个进度条移动（正在进行）。

我正在尝试基于谷歌搜索和 stackoverflow 过去的类似问题，但没有运气。这单行代码（或最多两行）应该是什么样的，我在哪里输入它？

与第一个无关的第二个问题是：

是否有任何网站（网络应用程序）我可以在线使用 Delphi - 实际上是在网站上？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T08:33:19.220

创建一个新的 VCL 项目。将 a`TButton`和 a`TProgressBar`放在主窗体上。现在，双击按钮，然后写

```
ProgressBar1.StepBy(1) 
```

现在您可以通过重复单击按钮来移动进度条。

如果您希望进度条自行移动，那么您需要一个`TTimer`，所以将一个这样的拖放到主窗体上。使用 Object Inspector将其`Enabled`属性设置为。`false`此外，设置`Interval`为`60`. 现在，双击计时器，然后写入

```
ProgressBar1.Position := (ProgressBar1.Position + 1) mod ProgressBar1.Max; 
```

返回您的表单，然后双击该按钮。删除您之前编写的代码，然后编写，

```
Timer1.Enabled := not Timer1.Enabled; 
```

现在运行你的项目。您可以使用按钮切换动画（运行、停止）。

# c++ - 如果语句不起作用，我希望它如何

> ID：11665039
> 
> 赞同：0
> 
> 时间：2012-07-26T08:12:05.447
> 
> 标签：c++

以下 C++ 代码：

```
if (a != '0.5' || a != '0.6')
{
    cout << "The answer is neither 0.5 nor 0.6 " << '\n';
} 
```

我也试过

```
if ((a != '0.5') || (a != '0.6'))
{
   cout << "The answer is neither 0.5 nor 0.6 " << '\n';
} 
```

并尝试过

```
if ( !(a== '0.5') || !(a==0.6)
{
     cout << "The answer is neither 0.5 nor 0.6 " << '\n';
} 
```

从用户那里接收一个数字，并检查该数字是 0.5 还是 0.6；如果是，它应该作为假语句执行，但如果它是任何其他数字，它应该作为真执行。但是，尽管当我输入 0.5 或 0.6 时它应该执行为 false，但它仍然执行为 true。当我使用可以正常工作的 else if 语句时，这是不同的：

```
if (a != 0.5)
{
    //what to do if true.
}
else if (a != 0.6)
{
    //What to do if this is true and the first id wrong.
}
else
{
    //What to do if none are true.
} 
```

为什么 != 在 if 语句中不能执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:27:37.240

逻辑是错误的。您当前正在同时检查一个数字是否不是 0.5 或不是 0.6；所有数字都将通过该测试。您需要将逻辑或 ( `||`) 替换为逻辑与 ( `&&`)。

此外，您需要从数字中删除单引号，否则您将创建一个具有实现定义值的多字符文字。

```
if (a != 0.5 && a != 0.6)
{
    cout << "The answer is neither 0.5 nor 0.6 " << '\n';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T08:18:07.150

a is supposed to be a float or a string ? In either way, this syntax is wrong '0.5', if it's a string use double quotes. Don't compare with float/double for (in)equality, because of the internal representation this won't work as you expect, see [how-to-correctly-and-standardly-compare-floats](https://stackoverflow.com/questions/4548004/how-to-correctly-and-standardly-compare-floats).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T09:40:11.773

*a*的类型是什么？

# 标准::字符串

认为：

```
std::string a;
std::cin >> a; 
```

然后以下代码有效：

```
if (a == "0.5" || a == "0.6")
{
    // Do something when it's true
}
else
{
    // Do something when it's false
} 
```

虽然 "0.5" 和 "0.6" 是*const char**，但它们会转换为*std::string*，所以效果很好。

# 常量字符 *

```
char a[BUFSIZE];
std::cin >> a;
if (strcmp(a, "0.5") == 0 || strcmp(a, "0.6") == 0)
{
  // Do something when it's true
}
else
{
  // Do something when it's false
} 
```

您可以使用*strcmp*来比较 c 风格的字符串

# 浮动/双

在比较浮点数时，可能会遇到精度问题。您可以编写一些函数或 Float 类来解决问题。像这样：

```
const double EPS = 1e-8;
inline bool FloatEqual(const double lhs, const double rhs)
{ return std::fabs(rhs-lhs) <= EPS; }
int main()
{
  double a;
  std::cin >> a;
  if (FloatEqual(a, 0.5) || FloatEqual(a, 0.6))
  {
    // Do something when it's true
  }
  else
  {
    // Do something when it's false
  }
} 
```

# 顺便一提

有趣的是发现以下语句是相等的

```
if (a == "0.5" || a == "0.6")
if (!(a != "0.5" && a != "0.6")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T08:15:31.770

从 0.5 和 0.6 中删除单引号，您应该使用 &&(AND) 而不是 ||(OR) 即： `if (a != 0.5 && a != 0.6)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T08:17:20.100

肯定是

```
if (a != 0.5 && a != 0.6) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T08:28:46.157

如果`a`是一个字符，那么当您执行以下操作时会发生奇怪的事情：

```
char a = '0.5';
cout << "A: " a << endl; 
```

这将输出（在我的编译器上，不能确定任何其他）：

```
A: 5 
```

和：

```
char a = '0.5';
if (a == '5')
    cout << "yey" << endl;
else
    cout << "oops" << endl; 
```

这将输出：

```
yey 
```

但我认为这种行为是未定义的（我不确定）。无论如何，它不会做你认为它会做的事情。

其次，我认为你的逻辑是错误的：

你是说：

如果不是`0.5`或不是`0.6`

我认为你的意思是

如果不是`0.5`并且不是`0.6`

```
if (a != '0.5' && a != '0.6') 
```

# testing - SpecFlow - 多个 BeforeScenario 方法的排序

> ID：11665042
> 
> 赞同：11
> 
> 时间：2012-07-26T08:12:24.313
> 
> 标签：testing, specflow

SpecFlow 让我的脚湿透了，我真的很喜欢它。

除了一些棘手的问题......比如功能和场景设置代码。

在一个名为 的“通用”文件`InfrastructureSteps.cs`中，我有应该为每个场景运行的通用设置代码 - 所以我的方法看起来像这样：

```
[BeforeScenario]
public void SetupDbContext()
{
    // define some basic stuff, set up a database transaction context etc.
} 
```

这需要在**每个**场景之前运行，到目前为止，它工作得很好。

但是现在，我在一个特定于测试的步骤文件中有两个场景，它们在运行之前也需要相当广泛的设置。所以我`.feature`用标签标记了他们的场景：

```
@needs_extra_setup
Scenario: .....
   Given .....
   When .....
   Then ...... 
```

并实现了一个特定于测试的`BeforeScenario`设置方法：

```
[BeforeScenario("needs_extra_setup")]
public void DoExtraSetupForMyScenario()
{
   // do stuff
} 
```

它可以工作 - 它被调用 - 但它在通用方法被调用**之前**`[BeforeScenario]`被调用:-(因此它失败了 - 在该通用设置方法中设置的东西不存在并导致我的代码失败。

那么 SpecFlow 中有什么方法可以对`[BeforeScenario]`方法进行排序吗？或者我可以告诉特定`[BeforeScenario]`方法首先执行“基本”`[BeforeScenario]`方法，例如在覆盖方法中调用基本方法吗？

当然，我可以`[BeforeScenario]`明确地称之为“基础”方法——但这似乎有点像大锤方法......

有任何想法吗？想法？指针？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T18:42:13.600

我很确定您可以（并且可能不应该）订购场景的执行顺序。

但是您可以使用其他一些[钩子](https://github.com/techtalk/SpecFlow/wiki/Hooks)，例如 BeforeFeature 并且可以通过这种方式绕过它。

另一种方法是简单地使用一个标志来检查是否已在特定内容中设置了通用内容，调用 SetupDbContext 方法（或者最好是 SetupDbContext 依次调用的内容）。

使用[ScenarioContext.Current](https://github.com/techtalk/SpecFlow/wiki/ScenarioContext)字典来存储您的标志。

我希望你觉得这很有帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T10:22:35.147

我有同样的问题。我最终使用

```
if(ScenarioContext.Current.ScenarioInfo.Tags.Contains("needs_extra_setup")) 
```

在 [BeforeScenario] 方法的末尾。它在 Marcus 已经链接到的页面上进行了描述：[SpecFlow Hooks](https://github.com/techtalk/SpecFlow/wiki/Hooks)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-16T15:06:08.620

这现在可以在 specflow 的 v2 中实现，在撰写本文时它还处于测试阶段。

The step binding attributes have an optional order property which allows you to specify the order of the hooks. Smaller numbers will be processed first and the default order value is 10,000.

# xpath - 使用 xsi:type="term:term" 解析 Xpath 2

> ID：11665050
> 
> 赞同：0
> 
> 时间：2012-07-26T08:12:59.497
> 
> 标签：xpath

从以下 XML 中过滤出两个描述值的正确 XPath 表达式是什么：

```
<course>
    <description>This is a description of the course</description>
    <description xsi:type="learning:outcome">This is the description of the learning outcome of the course</description>
</course> 
```

我认为正确的 XPath 应该是：

```
//course/description[@xsi:type=""]
//course/description[@xsi:type="learning:outcome"] 
```

但这在 XMLSpy 或我的 Drupal 导入器中尝试时不起作用任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:44:06.707

我认为您将 xsi:type 错误地输入为 xsi:path。

您还需要确保在 XPath 上下文中声明了 xsi 命名空间。

# c# - 编辑元素的内部 HTML 不起作用

> ID：11665053
> 
> 赞同：1
> 
> 时间：2012-07-26T08:13:09.213
> 
> 标签：c#, .net, html, webbrowser-control

我的目标是在表格正文中添加一些特定的 HTML。

代码注释：

*   tbody 指向身体
*   “Hello \n” 是一个非常简单的词，例如我想添加
*   我将 HTML 存储在另一个变量中

现在每次我得到异常并且它不接受我的编辑

```
var tbody = table.GetElementsByTagName("tbody")[0];
//tbody.InnerHtml = " </br> ";
foreach (DataGridViewRow row in dataGridView1.Rows)
{
    try
    {
        tbody.InnerHtml = tbody.InnerHtml + "Hello \n";
    }
    catch (Exception)
    {
    }
} 
```

**更新：**

我也尝试了另一种方法，但结果是：

![在此处输入图像描述](../Images/d558a8b4a0ea6b30fc2f17db34a91982.png)

**更新 2：**

这是一个桌面应用程序，我想更改从 WebBrowser Control 获得的表的 innerHtml 值

**更新 3：**

*例外*

捕获 System.NotSupportedException 消息=此类 HtmlElement 不支持属性。Source=System.Windows.Forms StackTrace: 在 System.Windows.Forms.HtmlElement.set_InnerHtml(String value) at WebScraper.Form1.webBrowser2_DocumentCompleted(Object sender, WebBrowserDocumentCompletedEventArgs e) 在 E:\Companies-work\FreeLancer\WebScraper\WebScraper\ WebScraper\Form1.cs：第 248 行内部异常：

**更新 4：**

*检查 tbody 是否为空* ![在此处输入图像描述](../Images/9cd501bd082aea446e8ba9ce12fab7f2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:31:23.120

如果 tbody 是 HtmlElement 如下行所示

```
var tbody = table.GetElementsByTagName("tbody")[0]; 
```

然后您可以直接使用它的 InnerHtml 属性，而不是打印屏幕中显示的行

像这样

```
tbody.InnerHtml += "Hello \n"; 
```

# ios - 如何防止 ALAssetsLibrary enumerateGroupWithTypes:usingBlock:failureBlock 解除模式？

> ID：11665057
> 
> 赞同：0
> 
> 时间：2012-07-26T08:13:17.403
> 
> 标签：ios, modalviewcontroller, alassetslibrary, alasset

访问 ALAssetsLibrary 时，第一次在 iPad 上运行应用程序时，您会收到标准警报“'Appname' 希望使用您当前的位置。这允许访问照片和视频中的位置信息。” 但是，此警报会自动关闭我的模态视图控制器。

有没有办法防止我的模态视图控制器被解雇？对于我的应用程序来说，这不是可取的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:07:19.510

问题是警报触发了 AppDelegate willResignActivate，我用它来在我的应用程序中执行注销操作。

# ruby-on-rails - Rails 正则表达式

> ID：11665065
> 
> 赞同：0
> 
> 时间：2012-07-26T08:13:53.253
> 
> 标签：ruby-on-rails, regex, ruby-on-rails-3, rubular

我对正则表达式真的很陌生。我有以下网址：`http://www.foo.bar.com/hgur_300x300.jpg`和`http://www.foo.bar.com/hgur_100x100.jpg`

我如何在 rails 中使用带有正则表达式的 gsub 来查找 [300X300.jpg AND 180X180.jpg] 并将其替换为 500X500？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:15:31.710

```
"http://www.foo.bar.com/hgur_100x100.jpg".gsub(/\d+/, "500") 
```

将两个“100”替换为“500”

更新：

```
"http://www.foo.bar.com/hgur_100x100.jpg".gsub(/\d+x\d+/, "500x500") 
```

会更精确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:17:16.527

请不要在整个 URL 上使用正则表达式。URL 应该是统一的，表达式很容易破坏它们。您应该先将路径与其余部分分开，然后再进行一些严格的表达。

此代码将使用 Rubys`uri`库进行解析，然后直接修改路径。

```
uri = URI.parse("http://www.foo.bar.com/hgur_300x300.jpg")
uri.path #=> "/hgur_300x300.jpg"
uri.path.gsub!(/\d{3}/, '500')
uri.to_s #=> "http://www.foo.bar.com/hgur_500x500.jpg" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:22:09.567

我建议使用以下方法。

如果您的 URL 是纯字符串，则只需`"my_url.com/hgur_100x100.jpg".gsub(/\d+x\d+/,"500x500")`.

这将匹配“100x100”，您将其替换为“500x500”

我建议这样做是因为如果你只匹配 using `\d+/`，你最终会匹配 URL 中的所有数字，包括端口号。

@injekt 的使用方法`URI.path`非常好。我一直在使用 URI，我认为它是一个非常可靠的模块。但这在很大程度上取决于您首先拥有格式良好的 URI。例如，如果您输入一个 URL（例如，手动键入一个`www.mydomain.com/image333.png`没有 的URL `scheme`，则`path`and`host`也将是未定义的。

# spring - org.springframework.jndi.JndiLookupFailureException: JndiObjectTargetSource 未能获得新的目标对象

> ID：11665066
> 
> 赞同：2
> 
> 时间：2012-07-26T08:13:54.360
> 
> 标签：spring, spring-mvc, jboss, jndi, jboss-portal

我正在尝试在 jboss-portal-2.7.2 上部署我的应用程序文件 app-ear-1.0.ear 和 mytest-portlet-1.0.war，并在部署之后（通过复制 app-ear-1.0.ear 和 mytest-portlet -1.0.war 到 jboss-portal-2.7.2/server/default/deploy) 并使用 portlet 打开页面给我以下错误：

错误：

```
Cause: javax.portlet.PortletException: Request processing failed
Message: Request processing failed
StackTrace: 
javax.portlet.PortletException: Request processing failed
    at org.springframework.web.portlet.FrameworkPortlet.processRequest(FrameworkPortlet.java:544)
...
org.springframework.jndi.JndiLookupFailureException: JndiObjectTargetSource failed to obtain new target object; nested exception is javax.naming.CommunicationException: Could not obtain connection to any of these urls: localhost:1099 and discovery failed with error: javax.naming.CommunicationException: Receive timed out [Root exception is java.net.SocketTimeoutException: Receive timed out] [Root exception is javax.naming.CommunicationException: Failed to connect to server localhost:1099 [Root exception is javax.naming.ServiceUnavailableException: Failed to connect to server localhost:1099 [Root exception is java.net.ConnectException: Connection refused]]]
    at org.springframework.jndi.JndiObjectTargetSource.getTarget(JndiObjectTargetSource.java:139)
..
javax.naming.CommunicationException: Could not obtain connection to any of these urls: localhost:1099 and discovery failed with error: javax.naming.CommunicationException: Receive timed out [Root exception is java.net.SocketTimeoutException: Receive timed out] [Root exception is javax.naming.CommunicationException: Failed to connect to server localhost:1099 [Root exception is javax.naming.ServiceUnavailableException: Failed to connect to server localhost:1099 [Root exception is java.net.ConnectException: Connection refused]]]
    at org.jnp.interfaces.NamingContext.checkRef(NamingContext.java:1562)
...
javax.naming.CommunicationException: Failed to connect to server localhost:1099 [Root exception is javax.naming.ServiceUnavailableException: Failed to connect to server localhost:1099 [Root exception is java.net.ConnectException: Connection refused]]
    at org.jnp.interfaces.NamingContext.getServer(NamingContext.java:274)
...
javax.naming.ServiceUnavailableException: Failed to connect to server localhost:1099 [Root exception is java.net.ConnectException: Connection refused]
    at org.jnp.interfaces.NamingContext.getServer(NamingContext.java:248)
...
java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
... 
```

有谁知道如何解决这一问题？

我的 web.xml（mytest-portlet/src/main/webapp/WEB-INF/）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
...

    <jee:jndi-lookup id="myTestService" jndi-name="app-ear-1.0/ejb/APPMyTest/remote"
                     proxy-interface="app.ejb.facade.portlet.mytest.IAPPMyTestService" lookup-on-startup="false">
        <jee:environment>
            java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory
            java.naming.provider.url=jnp://localhost:1099
            java.naming.factory.url.pkgs=org.jboss.naming:org.jnp.interfaces
        </jee:environment>
    </jee:jndi-lookup>
</beans> 
```

但在 Windows 7 上，如果从 IntelliJ IDEA 进行部署，则一切正常。在 Mac OS X 上必须做什么才能通过在 jboss-portal-2.7.2 上复制文件来成功进行手动部署？

# php - PHP导致高SQL负载

> ID：11665070
> 
> 赞同：0
> 
> 时间：2012-07-26T08:14:06.230
> 
> 标签：php, mysql, load, flush

我需要将 70,000 个条目从 csv 导入 SQL 数据库。不幸的是，这导致了极高的服务器负载并最终导致服务器崩溃。我正在阅读这篇关于大规模 SQL 导入的文章[http://naleid.com/blog/2009/10/01/batch-import-performance-with-grails-and-mysql/](http://naleid.com/blog/2009/10/01/batch-import-performance-with-grails-and-mysql/)并提到需要刷新“最简单的方法”解决这个问题的方法是创建一个简单的方法来定期清除这些集合。

然后非常快速地运行脚本，虽然它是另一种语言，但是否有 PHP 替代方案？用于刷新或垃圾收集。在一个循环中导入 70,000 个条目的最佳方法是什么？

文章还提到使用 MySQL 索引来减少负载，我如何在 PHP 中也解决这个问题？

谢谢

Ps 另外你认为它是 SQL 还是 CSV 阅读器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:29:17.780

您可以尝试下一个：

做一个**TableShadowCopy**。（如果是live table，这样可以避免网站挂起，否则可以跳过这一步）

```
DROP TABLE IF EXISTS __shadow_table; // droping previous shadow table if exists
CREATE TABLE __shadow_table LIKE table; // COPY source table structue
CREATE TABLE IF NOT EXISTS __shadow_table SELECT * FROM table; // possible use of WHERE statemnet 
```

现在您有了源表的精确副本，您可以使用它来做您无需担心导入时“站点关闭”的后果的事情。

**在新创建的表上**禁用索引****

 **```
ALTER TABLE __shadow_table DISABLE KEYS; 
```

现在您可以导入表 ( `__shadow_table`)。

尝试`LOAD DATA LOCAL INFILE`（需要`FILE`许可）

如果您**没有** `FILE`权限使用`BULK INSERT`

```
INSERT INTO __shadow_table (col1, col2, col3, col4) VALUES (1,2,3,4), (6,7,8,9), (20,30,40,60); 
```

**ENABLE**表上的索引（影子表）

```
ALTER TABLE __shadow_table ENABLE KEYS; 
```

**DROP**原始表

```
DROP TABLE IF EXISTS table 
```

**将影子**表重命名为原始 ( `DROP`ped) 名称

```
RENAME TABLE __shadow_table TO table; 
```

导入时禁用索引可以减少插入数据时的负载和 HDD 搜索。此外，如果表是`InnoDB`，`FOREIGN_KEY_CHECKS`则应禁用。**导入期间禁用**的所有内容都应在导入结束时**启用**。**

# matlab - 如何通过考虑特殊的另一个矩阵将值输入到矩阵

> ID：11665071
> 
> 赞同：-1
> 
> 时间：2012-07-26T08:14:06.330
> 
> 标签：matlab, matrix

一种可能的解决方案如下。请注意，我自由地为您的变量分配有意义的名称，因为诸如`A`和`Start Time A`（甚至不是有效的 Matlab 标识符）之类的名称非常容易混淆。您还可以看到您的矩阵 `C`和`Start Time C`是多余的，因为所有信息都已经编码在`A`和 `B`中`Start Time A`。

```
% The values to put in the result matrix.
value = [5 6 7;
         7 5 6];
% Column index where each sequence starts in the result matrix.
start = [2 3 7;
         1 6 8];
% The length of each sequence, i.e. how often to put the value into the result.
count = [1 2 3;
         3 1 2];

% Determine the longest row. Note: At this place you could also check, if all 
% rows are of the same length. The current implementation pads shorter rows with
% zeros.
max_row_length = max(start(:, end) + count(:, end) - 1);

% Allocate an output matrix filled with zeros. This avoids inserting sequences
% of zeros afterwards.
result = zeros(size(start, 1), max_row_length);

% Finally fill the matrix using a double loop.
for row = 1 : size(start, 1)
    for column = 1 : size(start, 2)
        s = start(row, column);
        c = count(row, column);
        v = value(row, column);
        result(row, s : s + c - 1) = v;
    end
end 
```

`result`是_

```
result =

     0     5     6     6     0     0     7     7     7
     7     7     7     0     0     5     0     6     6 
```

按照要求。

如何修改上述代码以解决 3D 矩阵。

示例：第三维的大小为 2。矩阵值

```
value(:,:,1) = [5 6 7;
                7 5 6];
value(:,:,2) = [6 5 7;
                6 7 5];

start(:,:,1) = [2 3 7;
                1 6 8];
start(:,:,2) = [1 5 6;
                2 5 9];

count(:,:,1) = [1 2 3;
                3 1 2];
count(:,:,2) = [2 1 3;
                2 3 1]; 
```

我希望我的结果矩阵是

```
result(:,:,1) =[0 5 6 6 0 0 7 7 7;
                7 7 7 0 0 5 0 6 6]
result(:,:,2) =[6 6 0 0 5 7 7 7 0;
                0 6 6 0 7 7 7 0 5] 
```

如何制作代码以产生结果。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:55:22.067

如果问题没有完全回答，这应该让您了解如何解决问题。我没有测试我在这里输入的代码，只是据我所知简单地修改了你提供的内容。

```
result = zeros(size(start, 1), max_row_length, size(start,3)); 

% Finally fill the matrix using a double loop. 
for depth = 1:size(start,3)
    for row = 1 : size(start, 1) 
        for column = 1 : size(start, 2) 
            s = start(row, column, depth); 
            c = count(row, column, depth); 
            v = value(row, column, depth); 
            result(row, s : s + c - 1, depth) = v; 
        end 
    end 
end 
```

# ejb-3.0 - 在 glassfish 中多次调用 EJB 3.0 计时器 bean 超时

> ID：11665073
> 
> 赞同：0
> 
> 时间：2012-07-26T08:14:15.393
> 
> 标签：ejb-3.0, java-ee-5, glassfish-2.x

我们必须实现 EJB 3.0 计时器，我们采用了以下方法：

*   我们创建了@Stateless bean 并使用 @Resource 注释注入了 TimerService
*   我们已经实现了一个在启动期间调用初始化方法的 servlet

以下片段应该可以为您提供更清晰的画面：

定时器实现：

```
public class TimerFacade {

  @Resource
  protected TimerService timerService;

  public void createTimer() {
    timerService.createTimer(startTime, intervall, ident);
  }
} 
```

初始化小服务程序：

```
public class InitServlet extends HttpServlet {
  @EJB
  private transient ITimerFacade timerFacade;

  @Override
  public void init(final ServletConfig config) throws ServletException {
    timerFacade.createTimer();
  }
} 
```

（重新）部署后一切都很好。但是在重新启动后，glassfish (2.1) 给我们提供了以下信息：

```
Rescheduling missed expiration for periodic timer ... 
```

我们如何避免这种行为，又如何保证定时器只启动一次？

我们必须尝试制作一个注入了计时器服务的无状态 bean，以让我们提供当前可用的计时器。但是将从容器中重新安排的计时器不会出现在此列表中，这会导致容器在整个应用程序初始化结束时重新安排持久化的计时器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:10:16.213

EJB 计时器是持久的，这意味着如果您没有取消计时器，它将在服务器启动后继续工作。

您应该在应用程序关闭时取消计时器（不确定您如何在 glassfish 中执行此操作）或在创建新计时器之前检查该计时器是否已存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T08:51:26.867

我有类似的问题....为了确保 ObjectTimer 每次运行一个，我使用了一种信号量，一个静态布尔变量 ENABLE_TIMER，我在 @Timeout 方法中使用它：

```
@Timeout
public void timerMethod(Timer timer) {
    try{
    if (ObjectModelSessionBean.ENABLE_TIMER ) {
        timerMethod();
    } else {
        LOGGER.info("timer is temporary disabled - waiting....);
    }
    }catch (Exception ex){
         LOGGER.severe("- Eccezione.   "+ex.toString());
    }
} 
```

在 timerMethod() 的开始，我将变量 ENABLE_TIMER 设置为 false，最后 ENABLE_TIMER 设置为 true

# hibernate - 内存泄漏异常

> ID：11665089
> 
> 赞同：3
> 
> 时间：2012-07-26T08:15:15.750
> 
> 标签：hibernate, tomcat, guice, c3p0, catalina.out

谁能帮我解决这个例外：

```
Jul 23, 2012 11:00:57 AM org.apache.catalina.loader.WebappClassLoader loadClass
INFO: Illegal access: this web application instance has been stopped already.  Could not load com.mchange.v2.sql.SqlUtils.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
java.lang.IllegalStateException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1597)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:531)
    at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128)
    at org.hibernate.connection.C3P0ConnectionProvider.getConnection(C3P0ConnectionProvider.java:78)
    at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
    at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
    at org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:142)
    at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:85)
    at net.customware.gwt.dispatch.server.AbstractDispatch.doExecute(AbstractDispatch.java:81)
    at net.customware.gwt.dispatch.server.AbstractDispatch.execute(AbstractDispatch.java:68)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at com.google.inject.servlet.ServletDefinition.doService(ServletDefinition.java:216)
    at com.google.inject.servlet.ServletDefinition.service(ServletDefinition.java:141)
    at com.google.inject.servlet.ManagedServletPipeline.service(ManagedServletPipeline.java:93)
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:63)
    at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:122)
    at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:110)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

并为它提供可能的解决方案..？

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:51:17.280

基本问题是tomcat为每个webapp创建一个新的类加载器，并在你重置应用程序时禁用类加载器，例如通过热部署一个新版本。c3p0 创建辅助线程。如果 c3p0 已在 web 应用程序的类加载器中加载，然后应用程序被重置，c3p0 的线程可能仍处于活动状态并持有对从现已失效的 ClassLoader 加载的对象的引用，从而导致您在必须使用新类时看到的那种错误加载。

多线程组件和 tomcat 的“热”类加载方案之间的交互可能具有挑战性。一些建议：

1）如果您的 Web 应用程序构建了自己的 c3p0 数据源（例如在 ContextListener 中），请确保在应用程序关闭时（在同一个 ContextListener 中）该数据源也是 close()ed

2) 尝试将 c3p0 和您的 JDBC 驱动程序类加载到 Web 应用特定 ClassLoader 以外的其他东西中。将 c3p0 jar 文件、change-commons-java jar 文件和 JDBC 驱动程序 jar 文件放在 common、system 或 bootstrap ClassLoader 可以找到它的位置。确保将这些文件从您的 web 应用程序的 lib 目录中取出，因为首先尝试了 web 应用程序 ClassLoader。有关更多信息，请参见[http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)。

我希望这有帮助！

# regex - IIS Url 重写以将用户切换回 HTTP

> ID：11665100
> 
> 赞同：0
> 
> 时间：2012-07-26T08:15:52.663
> 
> 标签：regex, iis-7, url-rewriting

我刚刚在我的服务器上安装了 URL 重写模块 2.0。如果用户导航到登录或注册视图，我有以下规则将用户从 http 切换到 https。

```
<rewrite>
      <rules>
        <rule name="Redirect to SSL for login and register" stopProcessing="true">
          <match url="^login.aspx$|^register.aspx$" />
          <conditions>
            <add input="{HTTPS}" pattern="^OFF$" />
          </conditions>
          <action type="Redirect" url="https://{HTTP_Host}/{R:0}" />
        </rule>
      </rules>
    </rewrite> 
```

这样，当用户尝试在 http 上访问登录或注册页面时，他会切换到相关的 https 页面。但是一旦用户使用[https://server.com/login.aspx](https://server.com/login.aspx)登录，我希望他导航回 http。准确地说，我想写一个规则，除了登录和注册之外的所有页面都强制在http上。我该怎么做？我想，我只需要弄清楚除了注册和登录页面之外的任何东西的正则表达式？那会是什么样的？我不精通正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:49:00.103

怎么样：

```
<rewrite>
  <rules>
    <rule name="Redirect to SSL for login and register" stopProcessing="true">
      <match url="^login\.aspx$|^register\.aspx$" />
      <conditions>
        <add input="{HTTPS}" pattern="^OFF$" />
      </conditions>
      <action type="Redirect" url="https://{HTTP_Host}/{R:0}" />
    </rule>
    <rule name="Redirect to non-SSL for others" stopProcessing="true">
      <match url="^.*$" />
      <conditions>
        <add input="{HTTPS}" pattern="^ON$" />
      </conditions>
      <action type="Redirect" url="http://{HTTP_Host}/{R:0}" />
    </rule>
  </rules>
</rewrite> 
```

# c# - C# 单例线程安全

> ID：11665102
> 
> 赞同：10
> 
> 时间：2012-07-26T08:16:07.153
> 
> 标签：c#, thread-safety, singleton

我有一个类似于这个的单例类

```
public class Singleton
{
    private static Singleton m_instance;
    private Timer m_timer;
    private static List<CustomObject> m_cacheObjects;

    private Singleton()
    {    
        m_cacheObjects = new List<CustomObject>();
        m_timer= new Timer(MyTimerCallBack, 
                           null, 
                           TimeSpan.FromSeconds(60), 
                           TimeSpan.FromSeconds(60));           
    }

    public static Singleton Instance
    {
        get
        {
            if (m_instance == null)
            {
                m_instance = new Singleton();
            }
            return m_instance;
        }
    }

    private void MyTimerCallBack(object state)
    {
        //******** Update the list by interval here ******************

        m_cacheObjects = UpdateTheList();
    }

    public void CallMe()
    {
        foreach (CustomObject obj in m_cacheObjects)
        {
            // do something here based on obj

            // The question is, does the m_cacheObjects is thread safe??
            // what happen if the m_cacheObjects is changed
            // during the loop interation?
        }
    }
} 
```

Web 服务将调用 CallMe 方法：

```
 [WebMethod]
    public void CallMeWebService()
    {
        Singleton.Instance.CallMe();
    } 
```

问题： 1) m_cacheObjects 是线程安全的吗？如果在循环交互期间（在 CallMe() 中）更改了 m_cacheObjects（由于计时器）会发生什么？

2) 调用 Webservice CallMeWebService() 时是否会创建一个新线程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T08:20:33.050

1：不，静态列表不是自动线程安全的；您必须`m_cacheObjects`手动保护

2：这是一个实现细节；乍一看，它似乎将自己暴露为一个同步方法，但它*如何*做到这一点完全取决于它

实际上，您的静态初始化也不是线程安全的。我可以暴力破解`Singleton`使用两个不同实例的场景。产生它需要重复，但它会发生。

坦率地说，除非你有充分的理由不这样做，否则最简单但最安全的单例模式就是：

```
private static readonly Singleton m_instance = new Singleton(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-06T10:43:49.563

```
//using System.Runtime.CompilerServices;

private static volatile Singelton _instance;

public static Singelton Instance
{
    [MethodImpl(MethodImplOptions.Synchronized)]
    get
    {
        if (_instance == null)
        {
            _instance = new Singelton();
        }
        return _instance;
    }
} 
```

解释：

`[MethodImpl(MethodImplOptions.Synchronized)]`这将告诉编译器对“Instance”的访问是“Synchronized”，因此系统会注意对该参数的调用。

这是线程安全的。

编辑：（此外，“Lock（）”示例不安全！因为，您可以使用“Monitor.Exit（Singleton）;”禁用线程安全性）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-26T08:22:40.373

我建议您在[http://csharpindepth.com/Articles/General/Singleton.aspx上阅读关于如何创建线程安全单例的 Jon Skeets 文章](http://csharpindepth.com/Articles/General/Singleton.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-26T08:19:27.510

This is a pretty good resource on how to implement the singleton pattern in a thread safe way: [http://msdn.microsoft.com/en-us/library/ff650316.aspx](http://msdn.microsoft.com/en-us/library/ff650316.aspx)

```
public sealed class Singleton
{
   private static volatile Singleton instance;
   private static object syncRoot = new Object();

   private Singleton() {}

   public static Singleton Instance
   {
      get 
      {
     if (instance == null) 
     {
        lock (syncRoot) 
        {
           if (instance == null) 
          instance = new Singleton();
        }
     }

     return instance;
      }
   }
} 
```

This simply makes sure that there will never be more than one instance. You also need to apply locking for your custom method.

```
public void CallMe()
{
    lock (syncRoot) 
    {
        foreach (CustomObject obj in m_cacheObjects)
        {
            // do something here based on obj
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T08:21:33.827

它不是线程安全的。

我相信我会在“MyTimerCallBack”和“CallMe”方法中使用**锁**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T08:33:42.710

1）不，`m_cacheObjects`不是线程安全的。

2）是的，将创建新线程（嗯，它可能不是新线程，而是从线程池中获取的线程）。

你需要`m_cacheObjects`用`lock`声明来保护。此外，在 CallMe 方法中，我建议创建以下内容的本地副本`m_cacheObjects`：

```
// create new field syncRoot
private static readonly object syncRoot = new object(); 
```

新的 CallMe 方法：

```
List<CustomObject> localCopy;
lock (syncRoot)
{
    localCopy = new List<CustomObject>(m_cacheObjects);
}

foreach (var nextObject in localCopy)
{
// Do some work
} 
```

并更新`MyTimerCallBack`方法：

```
lock (syncRoot)
{
    m_cacheObjects = UpdateTheList();
} 
```

并且还请实现线程安全的单例（详细阅读其他答案）。

# blackberry - 单击或使用滚轮单击按钮字段时出现蓝色

> ID：11665103
> 
> 赞同：0
> 
> 时间：2012-07-26T08:16:12.770
> 
> 标签：blackberry, focus

单击按钮字段时会出现这种蓝色，因为 I `setChangeListener()`. 如果我覆盖`navigationClick()`，那么工作正常。但是，它遇到了问题`TouchEvent`。

这是按钮调用。

```
newsbtn = new Custom_ButtonField(news, newsactive, newsactive);
        newsbtn.setChangeListener(new FieldChangeListener() {
            public void fieldChanged(Field field, int context) {
                Main.getUiApplication().pushScreen(
                        new Menu_PopupMenu(position));
            }
        });
        add(newsbtn); 
```

这是按钮声明。

```
public class Custom_ButtonField extends ButtonField {
Bitmap mNormal;
Bitmap mFocused;
Bitmap mActive;

int mWidth;
int mHeight;

private int color = -1;
String text;

public Custom_ButtonField(Bitmap normal, Bitmap focused, Bitmap active) {
    super(CONSUME_CLICK | Field.FOCUSABLE | Field.FIELD_HCENTER
            | Field.FIELD_VCENTER);
    mNormal = normal;
    mFocused = focused;
    mActive = active;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE,
            BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
}

public Custom_ButtonField(String text, Bitmap normal, Bitmap focused,
        Bitmap active, int color) {
    super(CONSUME_CLICK | Field.FOCUSABLE | Field.FIELD_HCENTER
            | Field.FIELD_VCENTER);
    this.color = color;
    mNormal = normal;
    mFocused = focused;
    mActive = active;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE,
            BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    this.text = text;
}

public Custom_ButtonField(String text, Bitmap normal, Bitmap focused,
        Bitmap active, int color, long style) {
    super(style);
    this.color = color;
    mNormal = normal;
    mFocused = focused;
    mActive = active;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE,
            BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    this.text = text;
}

public void setText(String text) {
    this.text = text;
    invalidate();
}

public String getText() {
    return text;
}

public void setColor(int color) {
    this.color = color;
}

protected void onFocus(int direction) {
    super.onFocus(direction);
    color = 0x540604;
    this.invalidate();
}

protected void onUnfocus() {
    super.onUnfocus();
    color = Color.WHITE;
    this.invalidate();
}

protected void paint(Graphics graphics) {
    int fontcontent;
    if (Display.getWidth() > 480)
        fontcontent = 28;
    else if (Display.getWidth() < 481 && Display.getWidth() > 320)
        fontcontent = 23;
    else
        fontcontent = 18;

    Bitmap bitmap = null;
    switch (getVisualState()) {
    case VISUAL_STATE_NORMAL:
        bitmap = mNormal;
        break;
    case VISUAL_STATE_FOCUS:
        bitmap = mFocused;
        break;
    case VISUAL_STATE_ACTIVE:
        bitmap = mActive;
        break;
    default:
        bitmap = mNormal;
    }
    setBackground(BackgroundFactory.createBitmapBackground(bitmap));
    graphics.setFont(Font.getDefault().derive(Font.PLAIN, fontcontent));
    graphics.setColor(color);
    graphics.drawText(text, (mNormal.getWidth() - Font.getDefault()
            .getAdvance(text)) / 2, ((mNormal.getHeight() - Font
            .getDefault().getHeight()) / 2) + 10, DrawStyle.HCENTER
            | DrawStyle.VCENTER);
}

public int getPreferredWidth() {
    return mWidth;
}

public int getPreferredHeight() {
    return mHeight;
}

protected void layout(int width, int height) {
    setExtent(mWidth, mHeight);
}
} 
```

即使我覆盖`drawFocus(){//nothing here}`，它仍然呈现蓝色。

[这](http://imageshack.us/photo/my-images/715/focusing.png/)是按钮对焦时的图像。

[这](http://imageshack.us/photo/my-images/816/clicking.png/)是单击时的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T03:33:35.227

这是构造函数之一。

```
public Custom_ButtonField(String text, Bitmap normal, Bitmap focused,
        Bitmap active, int color, long style) {
    super(style);
    this.color = color;
    this.text = text;
    mNormal = normal;
    mFocused = focused;
    mActive = active;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE,
            BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBackground(VISUAL_STATE_NORMAL,
            BackgroundFactory.createBitmapBackground(normal));
    setBackground(VISUAL_STATE_FOCUS,
            BackgroundFactory.createBitmapBackground(focused));
    setBackground(VISUAL_STATE_ACTIVE,
            BackgroundFactory.createBitmapBackground(active));
} 
```

# html - chrome中的HTML5音频在服务器上不起作用

> ID：11665104
> 
> 赞同：0
> 
> 时间：2012-07-26T08:16:13.723
> 
> 标签：html, webserver, html5-audio

我有以下 HTML 代码，当我使用 Chrome 打开它时可以正常工作。问题是我将它上传到我的网站的那一刻，它就停止了工作。有谁知道解决这个问题？

```
<audio id="speech" controls="controls">
<source src="http://translate.google.com/translate_tts?ie=UTF-8&tl=es&q=hola" type="audio/mpeg">
</audio> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:16:11.117

Chrome 直接从链接中为我播放文件。尝试将类型更改为音频/mp3。此外，您的服务器可能未设置为正确提供 mpeg。尝试将其中之一添加到与音频文件位于同一目录中的 .htaccess 文件中：
`AddType application/octet-stream .mpeg
AddType application/octet-stream .mp3`

# c# - 如何从具有日期的对象列表中获取最小日期？

> ID：11665105
> 
> 赞同：15
> 
> 时间：2012-07-26T08:16:19.057
> 
> 标签：c#, .net

我创建了一个代表项目的简单类：

```
public class EntityAuftrag
{
    public string cis_auftrag { get; set; }
    public string bezeich { get; set; }
    public DateTime? dStart { get; set; }
    public DateTime? dEnd { get; set; }
    public decimal? aufstunde { get; set; }
    public int id_auftrag { get; set; }
    public string barcolor { get; set; }
} 
```

现在我有一个清单。我想提取最小的日期，我该怎么做？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-26T08:17:54.983

您可以使用[`Enumerable.Min`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.min.aspx)（`null`值将被忽略，除非所有值都为空）：

```
DateTime? smallest = auftragList.Min(a => a.dStart); 
```

**编辑**：如果你想找到最早（开始）日期的对象，你可以使用`OrderBy`and `First`：

```
EntityAuftrag auft = auftragList.OrderBy(a => a.dStart).First(); 
```

如果你想要最新的日期，你可以`Enumerable.OrderByDescending`改用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T08:19:18.497

您可以使用 Min() LINQ 扩展方法：

`collection.Min(item => item.dStart);`

我看到您的 date 属性可以为空，因此如果您想避免空值，请使用以下命令：

`collection.Where(item=> dStart.HasValue).Min(item => item.dStart);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T08:22:48.007

你可以用 Linq 简单地做到这一点。鉴于您想要最早的对象`dStart`，您可以执行以下操作：

```
List<EntityAuftrag> list = someSourceOfItems;

EntityAuftrag firstObject = list.OrderBy( i => i.dStart ).First() as EntityAuftrag; 
```

或者（不确定上面的语法是否正确），您可以这样做：

```
List<EntityAuftrag> list = someSourceOfItems;

EntityAuftrag firstObject = (from item in list
                            orderby item.dStart
                            select item).Single() as EntityAuftrag; 
```

Enjoy your day :-)

# ios - ios中的正则表达式删除href链接

> ID：11665109
> 
> 赞同：7
> 
> 时间：2012-07-26T08:17:10.893
> 
> 标签：ios, regex, nsregularexpression

我需要一些帮助来构建正则表达式以从长字符串中删除带有搜索词的 href 链接，然后将其解析为 Web 视图

href 字符串的示例：`<a href="/search/?search=Huntington">Huntington</a>`

我想删除除了链接的纯文本（只是链接本身）之外的所有内容，但有问题

```
 NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<a href=\"/search/?search=([A-Z][a-z])\"" options:NSRegularExpressionCaseInsensitive error:&error]; 
```

非常欢迎任何帮助

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T08:30:12.257

我认为

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<a href=\"[^\"]+\">([^<]+)</a>" options:NSRegularExpressionCaseInsensitive error:&error];
NSString *modifiedString = [regex stringByReplacingMatchesInString:string options:0 range:NSMakeRange(0, [string length]) withTemplate:@"$1"]; 
```

应该可以工作（我在 TextMate 中测试了正则表达式，但在 XCode 中没有）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-05T18:33:01.660

@Helium3 和 @Carl 解释就在上面，我想正确地写，我创建了这个函数来从 NSString 中删除一个 href 标签

```
-(NSString *)deleteAHref:(NSString *)originalString
{
    NSError *regexError = nil;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<a href=.*?>(.*?)</a>" options:NSRegularExpressionCaseInsensitive error:&regexError];
    NSString *modifiedString = [regex stringByReplacingMatchesInString:originalString options:0 range:NSMakeRange(0, [originalString length]) withTemplate:@"$1"];
    return modifiedString;
} 
```

# iphone - 加载了 nib 文件但未设置视图出口

> ID：11665113
> 
> 赞同：4
> 
> 时间：2012-07-26T08:17:27.217
> 
> 标签：iphone, ios, xcode

我不小心删除了universityPicker.xib，然后创建了一个新的同名但无法连接。文件崩溃并给出此消息

```
reason: '-[UIViewController _loadViewFromNibNamed:bundle:] loaded the "universityPicker" nib but the view outlet was not set." 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-26T08:30:07.253

*   打开 universityPicker.XIB 文件
    *   单击左侧栏上的文件所有者图标
    *   单击右侧边栏中的第三个选项卡
    *   在顶部的“自定义类”下，确保 Class 是应与该视图对应的 ViewController 的名称。如果没有，请输入
    *   在右侧边栏中，单击最后一个选项卡
    *   您应该在其下方看到带有“视图”的“出口”。将旁边的圆圈拖到左侧栏上的“查看”图标上
    *   保存xib并重新运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:21:00.113

在 Interface Builder 中，您应该将视图连接到文件的所有者。

# eclipse - 步进功能键偶尔会被禁用

> ID：11665115
> 
> 赞同：2
> 
> 时间：2012-07-26T08:17:30.603
> 
> 标签：eclipse, eclipse-cdt

我在 Linux 上使用 Eclipse CDT。我的`F5`///键设置为它们的默认配置`F6`。但是，当我开始调试时，有时它们不会，有时它们不会 - 意思是，单击它们什么都不做。如果它们工作，只要被调试的程序运行，它们就会继续工作，如果它们不运行，它们也一样。`F7``F8`

我可以从菜单中验证，有时快捷方式确实处于活动状态，有时则不是 - 下面的两个屏幕截图来自两个不同的调试会话，但它们之间没有配置更改。

![和](../Images/4f9879d78c817e9d4d20b78f257c106f.png)

![没有](../Images/e650c285613bcf4bbb5f0197e9a63e0a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:17:30.603

该问题很可能是“调试”透视设置中的“调试”操作组的问题。尽管它看起来一直很活跃，但它一定是出了什么问题。我通过重置调试透视图解决了这个问题（您可以从窗口菜单重置，或者只需右键单击右上角的透视图）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T15:18:17.303

我从这里找到了解决方法：[Eclipse - 运行/调试快捷键不起作用](https://stackoverflow.com/questions/13391804/eclipse-run-debug-shortcut-key-doesnt-work)

解决方案是将“When:”从“Debugging”设置为“Editing Java Source”

在 Eclipse 开普勒上工作。

# sql-server-2008 - DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0) 有人能解释一下吗

> ID：11665119
> 
> 赞同：24
> 
> 时间：2012-07-26T08:17:39.773
> 
> 标签：sql-server-2008

```
DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0) 
```

有人可以解释一下吗。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-26T08:23:23.243

这将为您提供给定日期的第一个月的第一天

内部选择 `select DATEDIFF(MONTH, 0, GETDATE())`将给出从 1900-01-01 开始的月份数

这里是 1350

这将添加到 1900-01-01 ，但只有几个月

`select DATEADD(MONTH,1350,0)`将给 2012-07-01 00:00:00.000

这是当月的开始。

我认为这是查找任何给定日期的月初的最有效方法。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-12-21T13:57:05.527

DateDiff 函数返回多少秒、多少个月、多少年——您在第一个日期（此处为 0）和第二个日期（此处为当前日期）之间指定的任何间隔。

```
 DATEDIFF(MONTH, 0, '2-14-2015')  --returns month. 0 is for 1/1/1900, and getdate is the current date 
     --(i used a set date bc dates will change as this post gets older).
     result: 1381 
```

在我的工作中，我使用了 2-14-2015 的日期，它给了我自 1900 年 1 月 1 日以来的 1381 个月。我像这样将 1381 放入 dateadd 函数中......

```
 select Dateadd(MONTH, 1381, 0)
     result: 2015-02-01 00:00:00.000 
```

基本上，它获取最内层公式的日期中指定的任何月份的第一天。

我必须弄清楚的代码更进一步，并从该结果中减去 1 秒，以便在 11:59:59 获得该月的最后一天，就像这样......

```
 select DATEADD(s, -1, '2015-02-01 00:00:00.000') 
```

公式全部放在一起看起来像这样：

```
 DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,getdate())+1,0)) 
```

希望这可以帮助某人。:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T08:31:55.273

```
The DATEDIFF will give you date diff in month from January 1 1900 to current date
AND 
The DATEADD will add (DATEDIFF) results months to your last parameter of DATEADD 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T08:20:09.460

It's getting the start of the current month. It counts the number of months since January 1900, and adds on them to January 1 1900 to get the start of the current month

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-16T03:13:17.340

> DATEADD 函数将时间间隔添加到您指定的日期。例如，如果 SalesOrderHeader 表中的所有订单的到期日期滑动了 3 天，您可以使用以下语句获取新日期：

```
USE AdventureWorks;
GO
SELECT DATEADD(day, 3, DueDate)
FROM Sales.SalesOrderHeader;
GO 
```

> DATEDIFF 函数计算您指定的两个日期的第二个和第一个日期之间的时间段。换句话说，它找到两个日期之间的间隔。结果是一个有符号整数值，等于日期部分中的 date2 - date1。以下查询使用 2001 年 11 月 30 日这一日期，并找出 DueDate 与该日期之间经过的天数：

```
USE AdventureWorks;
GO
SELECT DATEDIFF(day, DueDate, 'Nov 30 2001')
FROM Sales.SalesOrderHeader;
GO

SELECT DATEDIFF(year, '20051220', '20060101')
SELECT DATEDIFF(month, '20051220', '20060101')
SELECT DATEDIFF(day, '20051220', '20060101') 
```

# javascript - 在什么情况下我应该使用 knockout.js？

> ID：11665120
> 
> 赞同：3
> 
> 时间：2012-07-26T08:17:49.460
> 
> 标签：javascript, knockout.js

伙计们，我想知道什么时候使用 knockout.js。对于哪些问题，knockout.js 可以利用 javascript？基本上我想知道我应该为哪种类型的应用程序使用 knockout.js 以及使用它的优点和缺点是什么？

# ruby-on-rails - 为什么 xPath 搜索在 REXML 中有效，而在 Hpricot 中无效？

> ID：11665126
> 
> 赞同：0
> 
> 时间：2012-07-26T08:18:05.323
> 
> 标签：ruby-on-rails, ruby, xpath, nokogiri, hpricot

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:50:07.253

Hpricot 第一次出现时非常棒，因为它将 CSS 选择器语法引入了 HTML 解析。但是，它并不完全符合 XPath，尤其是围绕您正在使用的 XPath 谓词语法。

我会建议[Nokogiri](http://nokogiri.org/)。该库速度快且维护良好，并且完全符合 XPath 1.0。有了它，您应该能够拉动车辆：

```
doc.search('//vehicle[line_number[text()=1234]]') 
```

此外，稍微简化一下：您真的不需要嵌套谓词。这也将识别正确的车辆：

```
doc.search('//vehicle[line_number/text()=1234]') 
```

# c++ - 为什么 PE 部分在运行之间会发生变化？

> ID：11665128
> 
> 赞同：0
> 
> 时间：2012-07-26T08:18:07.727
> 
> 标签：c++, memory, process, portable-executable

我偶然发现了一个问题，希望您能帮助我理解。

在我的应用程序中，我有一个快照函数，它复制（ReadProcessMemory 或 memcpy，相同的结果）其所有代码 + 只读数据部分并将它们写入文件。然后我有一个验证功能，它读取文件并对文件中的内容和内存中的内容执行 memcmp。

如果我运行快照功能，然后在同一个会话中运行验证功能，无论我运行多少次验证，它都会一直说它们是相同的。

当我在一个会话中拍摄快照然后重新启动应用程序并运行验证时，如果内存相同与否，它似乎完全随机，有时它适用于应用程序的 3-4 次重新启动，但迟早它不会认为文件中的数据与 pe 部分代码相同。

这是运行之间的pe代码部分比较的链接：

[http://i45.tinypic.com/4kad7b.jpg](http://i45.tinypic.com/4kad7b.jpg)

它始终是同一件事，它将一个字符更改为另一个字符（在这种情况下？变为升高的 1），但从和到哪个字符总是不同的。

谁能解释为什么会这样？应该是这样，如果是，为什么？还是我做错了什么？

注意：我已经在调试和发布中测试了这个，无论是否附加调试器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:30:23.817

出于安全原因，现代操作系统随机化进程的内存布局。该机制称为[地址空间布局随机化 (ALSR)](http://en.wikipedia.org/wiki/Address_space_layout_randomization)。

如果可执行文件中存在漏洞，这使得通过攻击将外部代码注入应用程序变得更加复杂。

# vb.net - .NET：将 2 个 DataSet/DataTable 组合在一个 DataTable 中

> ID：11665129
> 
> 赞同：0
> 
> 时间：2012-07-26T08:18:09.320
> 
> 标签：vb.net, datatable, dataset, oledb

我有 2 个数据集，每个数据集有 1 个表（7 列）。这两个表都有不同的列名，但结构相同。我想加入/合并/合并这 2 个表并生成一个只有 7 个列的表。我与 Merge 合作，但这会产生 14 个 cols 并且实际上并没有加入它们。我也在这个网站和其他网站上进行了搜索，但找不到适合我的情况的任何解决方案。我的代码是：

```
 Private Sub FillMatchToOtstdAdapter()
    Dim sql1 As String = "SELECT DOCMCH.docmch_nAccNo, DOCMCH.docmch_lRefDocId, DOCMCH.docmch_nDocLnNo, DOCMCH.docmch_dAdjustedAmt, DOCMCH.docmch_dAdjustedAmt, DOCHDR.dochdr_nVersionNo, 'D' AS Expr1 FROM TXNTYP INNER JOIN (DOCHDR INNER JOIN DOCMCH ON DOCHDR.dochdr_lDocId = DOCMCH.docmch_lRefDocId) ON TXNTYP.txntyp_sDocTyp = DOCHDR.dochdr_sDocType WHERE (((TXNTYP.txntyp_cDocTypCat)='F') AND ((DOCHDR.dochdr_lDocDt)>=20120630));"
    Dim sql2 As String = "select otstnd_nAccNo, otstnd_lDocId, otstnd_nDocLnNo, otstnd_dOtstndgAmt, otstnd_dDocLnAmt, otstnd_nVersionNo, otstnd_cOtstndgSign from otstnd"

    ' Get Records of Query 1
    ds_otstnd_Adap = New OleDb.OleDbDataAdapter(sql1, connStr)
    ds_otstnd_Adap.Fill(ds_otstnd_Ds)
    ds_otstnd_Dt = ds_otstnd_Ds.Tables(0)

    ' Get Records of Query 2
    Dim adap As New OleDb.OleDbDataAdapter(sql2, connStr)
    Dim ds As New DataSet
    adap.Fill(ds)

    ' Merge both of them
    ds_otstnd_Dt.Merge(ds.Tables(0), False, MissingSchemaAction.Add)
    DataGridView1.DataSource = ds_otstnd_Dt
End Sub 
```

知道如何在仅包含 7 个列的单个表中生成结果 - 只需将第二个表中的数据添加到第一个表中。我正在考虑从 table2 中选择每一行并添加 table1，但它们可能有很多行，如果可以以更简单的方式管理事情，我不想进入不必要的过程。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:48:50.000

我得到了它。我在查询中为每个表的结果添加了“as Col1”。对于合并，将 MissingSchemaAction.Add 替换为 MissingSchemaAction.Ignore。

这对我有用。

# android - 如何在android中读取JSON值

> ID：11665130
> 
> 赞同：1
> 
> 时间：2012-07-26T08:18:10.367
> 
> 标签：android, json

朋友们，我有这样的 json 回复

```
{"status":"1","responseCode":"1000","response":{"actorGuid":"1","daRemarks":"Device is Nonoperational","serialNumber":"1234567"}} 
```

我正在使用成功获取状态代码

```
String statusStr =  jsonObject.getString("status"); 
```

但我还需要序列号，所以请告诉我如何获取它。请帮助我获取整个代码以获取它。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:20:21.187

```
String serial = jsonObject.getJSONObject("response").getString("serialNumber"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:20:20.053

你可以试试下面的代码

```
String serial= jsonObject.getJSONObject("response").getString("serialNumber"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:24:23.297

```
JSONObject responseJsonObject =  jsonObject.getJSONObject("response");
 String serialNumberStr =  responseJsonObject.getString("serialNumber"); 
```

# forms - Drupal: #weight and forms

> ID：11665138
> 
> 赞同：0
> 
> 时间：2012-07-26T08:18:36.530
> 
> 标签：forms, drupal

I am writing a module in which a fieldset containing a bunch of buttons gets added to the edit/add node form using hook_form_alter.

The fieldset(the buttons) are supposed to be connected to a certain widget for a field. For example maybe the body field widget of content type 'myContentType'. I always want the fieldset and the widget of the field to be placed together in the form, preferably with the fieldset above the widget. So to achieve this I thought I would use the #weight property of the form elements.

So in hook_form_alter I set:

```
$form['buttonFieldset'][#weight] = $form['body']['#weight'] - 1; 
```

Afterwards I check in the $form array and the weight of the button field did get set to a weight one smaller than the associated widget. I thought this would place it right above the textarea of the body, but this did not happen. Does anyone know why not? Or some other way to achieve what I want?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:52:04.117

尝试将您的 fielsdset 权重设置为 body 字段的权重，并将 body 字段在列表中移动到较低的位置。所以：

```
$form['buttonFieldset']['#weight'] = $form['body']['#weight'];
...
$form['body']['#weight'] = $form['body']['#weight'] + 1; 
```

这很有效，特别是如果您将标题直接放在正文字段上方，因为 Drupal 似乎不喜欢移动标题字段，尽管更改了`#weight`它。我无法`title`向上移动以便在两者之间放置一些东西，`title`但`body`我可以`body`向下移动。

# java - 将 LongBuffer/IntBuffer/ShortBuffer 转换为 ByteBuffer

> ID：11665147
> 
> 赞同：17
> 
> 时间：2012-07-26T08:19:17.447
> 
> 标签：java, arrays, bytearray, nio

我知道一种将 byte/short/int/long 数组转换为 ByteBuffer，然后获取字节数组的快速方法。例如，要将字节数组转换为短数组，我可以这样做：

```
byte[] bArray = { 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0 };

ByteBuffer bb = ByteBuffer.wrap(byteArray);
ShortBuffer sb = bb.asShortBuffer();
short[] shortArray = new short[byteArray.length / 2];
sb.get(shortArray); 
```

产生一个像这样的短数组：`[256, 0, 0, 0, 256, 0, 0, 0]`.

**如何使用[java.nio](http://docs.oracle.com/javase/7/docs/api/java/nio/package-summary.html)类进行逆运算？**

现在我正在这样做：

```
shortArray[] = {256, 0, 0, 0, 256, 0, 0, 0};
ByteBuffer bb = ByteBuffer.allocate(shortArray.length * 2);
for (short s : shortArray) {
    bb.putShort(s);
}
return bb.array(); 
```

我获得了原始`[1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0]`字节数组。但我想使用 ShortBuffer.asByteBuffer() 之类的方法，而不是手动循环。

我找到了[2001 年向 Sun 提出的请求](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4489356)，但他们没有接受；-((

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-26T08:56:17.447

那这个呢？：

```
 bb.asShortBuffer().put(shortArray); 
```

然后`bb`包含您的数据。

**完整代码**：

```
public class Test {
    public static void main(final String args[]) {
        short[] arr = { 256, 0, 0, 0, 256, 0, 0, 0 };
        for (byte b : F(arr)) {
            System.out.print(b);
        }
    }

    public static byte[] F(short[] arr) {
        java.nio.ByteBuffer bb = java.nio.ByteBuffer.allocate(arr.length * 2);
        bb.asShortBuffer().put(arr);
        return bb.array(); // this returns the "raw" array, it's shared and not copied!
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T08:26:33.730

好吧，在声明中

```
ShortBuffer sb = bb.asShortBuffer(); 
```

AFAIK，您`ShortBuffer`只是原始的视图`ByteBuffer`。因此，您始终可以访问原始`ByteBuffer`变量`bb`并通过您的`CharBuffer`参考查看修改后的数据`sb`。

[asCharBuffer](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#asCharBuffer%28%29)的文档说：

> [...] 对此缓冲区内容的更改将在新缓冲区中可见，反之亦然 [...]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:26:06.977

我会记得您用来创建 ShortBuffer 的 ByteBuffer 作为它在同一个缓冲区上的视图。

否则，似乎要恢复它的唯一方法是使用反射来获取该`bb`字段。

顺便说一句：如果您使用本机字节顺序，则使用直接 ByteBuffer 可能会明显更快，具体取决于您正在做什么，尤其是。

# php - How to send a record to five9

> ID：11665151
> 
> 赞同：1
> 
> 时间：2012-07-26T08:19:26.467
> 
> 标签：php, soap, ivr

I had tried to connect Five9 and to send a record to Five9 inorder to add in the list

My Codes is below

```
 $soapUser = "test@sample.com";  //  username
    $soapPassword = "password"; // password

$soap_options   = array( 'login' => $soapUser, 'password' => $soapPassword );
$auth_details   = base64_encode($soapUser.":".$soapPassword);

$client = new SoapClient("https://api.five9.com/wsadmin/v2/AdminWebService?wsdl", $soap_options);
$header = new SoapHeader("https://api.five9.com/wsadmin/v2/AdminWebService/AddRecordToList", "authentication", "Basic $auth_details"); 
//echo "Response:\n" . $client->__getLastResponse() . "\n";
$client->__setSoapHeaders($header);

$xml_data = '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:ser="http://service.admin.ws.five9.com/">
<soapenv:Header />
<soapenv:Body>
<ser:addRecordToList>
<listName>some_list_name</listName>
<listUpdateSettings>
<fieldsMapping>
<columnNumber>1</columnNumber>
<fieldName>number1</fieldName>
<key>true</key>
</fieldsMapping>
<fieldsMapping>
<columnNumber>2</columnNumber>
<fieldName>first_name</fieldName>
<key>false</key>
</fieldsMapping>
<fieldsMapping>
<columnNumber>3</columnNumber>
<fieldName>last_name</fieldName>
<key>false</key>
</fieldsMapping>
<reportEmail>name@example.com</reportEmail>
<separator>,</separator>
<skipHeaderLine>false</skipHeaderLine>
<callNowMode>ANY</callNowMode>
<cleanListBeforeUpdate>false</cleanListBeforeUpdate>
<crmAddMode>ADD_NEW</crmAddMode>
<crmUpdateMode>UPDATE_FIRST</crmUpdateMode>
<listAddMode>ADD_FIRST</listAddMode>
</listUpdateSettings>
<record>
<fields>5551208111</fields>
<fields>John</fields>
<fields>Smith</fields>
</record>
</ser:addRecordToList>
</soapenv:Body>
</soapenv:Envelope>';

echo $client->__doRequest($xml_data, "https://api.five9.com/wsadmin/v2/AdminWebService?wsdl", "https://api.five9.com/wsadmin/v2/AdminWebService/AddRecordToList",0); 
```

**Please guide me to connect five9 and to send Record to Five9 in order to add in the list.**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-01T21:34:40.257

您可以使用以下 PHP 代码将记录插入到 Five9 拨号列表中。我意识到这个问题已经有将近一年的历史了，但由于它还没有得到回答，而且 Five9 API 的 PHP 示例明显缺乏，我认为这仍然是相关的。

```
$soap = null;
$wsdl = "https://api.five9.com/wsadmin/v2/AdminWebService?wsdl";

$user = "YourLoginID";
$pass = "YourPassword";
$soap_options = array('login' => $user, 'password' => $pass );

$soap = new SoapClient($wsdl, $soap_options);

/* Field Mapping */
$arryFields = array();
$arryFields[0] = array("columnNumber"=>1,"fieldName" => "number1", "key" => "false");
$arryFields[1] = array("columnNumber"=>2,"fieldName" => "first_name", "key" => "false");
$arryFields[2] = array("columnNumber"=>3,"fieldName" => "last_name", "key" => "false");
$arryFields[3] = array("columnNumber"=>4,"fieldName" => "street", "key" => "false");
$arryFields[4] = array("columnNumber"=>5,"fieldName" => "city", "key" => "false");
$arryFields[5] = array("columnNumber"=>6,"fieldName" => "state", "key" => "false");
$arryFields[6] = array("columnNumber"=>7,"fieldName" => "zip", "key" => "false");

//$arrySettings['callNowColumnNumber'] = 0;
$arrySettings['cleanListBeforeUpdate'] = 0;
$arrySettings['crmAddMode'] = "ADD_NEW"; //DONT_ADD or ADD_NEW
$arrySettings['crmUpdateMode'] = "UPDATE_FIRST"; 
$arrySettings['listAddMode'] = "ADD_FIRST";

$arryValues[0] = "9515551212";
$arryValues[1] = "FirstName";
$arryValues[2] = "LastName";
$arryValues[3] = "123 Main St.";
$arryValues[4] = "Corona";
$arryValues[5] = "CA";
$arryValues[6] = "92881";

$arryParams['parameters']['listName'] = "Z-outbound-test";
$arryParams['parameters']['listUpdateSettings'] = $arrySettings;
$arryParams['parameters']['record'] = $arryValues;

try {
    $result = $soap->__soapCall("addRecordToList", $arryParams);       
} catch (SoapFault $e) {
    /* your error handling */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-01T21:50:40.633

我想在@Jesse Q 的优秀答案的基础上，用对我有用的东西......

```
$auth = array("login" => "your login",
              "password" => "your password");

$wsdl = "https://api.five9.com/wsadmin/v2/AdminWebService?wsdl";
$soap = new SoapClient($wsdl, $auth);

$fields = array("number1" => "555-666-7777", 
                "first_name" => "John", 
                "last_name" => "Doe", 
                "street" => "", 
                "city" => "", 
                "state" => "", 
                "zip" => "");

// these are the columns we're sending so Five9 knows what we're sending
$columns = array(); 
$keys = array_keys($fields);
for ($x = 0; $x < count($fields); ++$x)
  $columns[$x] = array("columnNumber" => $x + 1,
                       "fieldName" => $keys[$x],
                       "key" => "false");

// assemble the settings...
$settings = array("fieldsMapping" => $columns,
                  "cleanListBeforeUpdate" => 0,
                  "crmAddMode" => "ADD_NEW",
                  "crmUpdateMode" => "UPDATE_FIRST",
                  "listAddMode" => "ADD_FIRST",
                  "skipHeaderLine" => "false");

// assemble the request...
$record = array_values($fields);
$params = array("listName" => $list,
                "listUpdateSettings" => $settings,
                "record" => $record);

$response = $soap->addRecordToList($params); 
```

如果列表不存在，您甚至可以执行一些检查并添加它。

```
$list_lookup = $soap->getListsInfo(array("listNamePattern" => $list));
if (!($list_lookup->return && $list_lookup->return->name))
  $soap->createList(array("listName" => $list)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T07:06:07.947

问题是因为即使您设置了 Header ie`User Name`和`password`Header 记录。这被合并到`XML Data`其中发送到`WebService in doRequest`。

**解决方案**
1\. 如果你想使用`doRequest`，你需要发送`XML`带有正确的 Header 节点，即。with`Username`和`password`in 认证节点。
2\. 而不是`doRequest`，使用`__soapCall`，使用`$client`带有功能的对象`addRecordToList`。

[您可以在此处](http://php.net/manual/en/soapclient.soapclient.php)获得更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-02T21:15:32.210

嘿，这个问题很老，但我设法将一个类放在一起，将记录添加到列表中，只需根据需要编辑您的字段名称。它使用 AddRecordtoList();

[你可以在这里](http://webapps.five9.com/assets/files/for_customers/documentation/apis/config-webservices-api-reference-guide.pdf)查看文档

```
class five9{

  //the fields mapped to five9
  //initialize and empty array so there are no errors with array_push
  private static $listUpdateSettings = array("fieldsMapping" => array());

  //maps field to five9 columns
  protected function mapField($index, $field, $key = false){
    //map the field to five9\. Index must start at 1 not 0
    //mapping fields this way allows flexibility in which order the parameter has its keys
    array_push( self::$listUpdateSettings["fieldsMapping"], array( "columnNumber" => $index + 1, "fieldName" => $field, "key" => $key ));
  }

  //returns data array after being scrubbed
  protected function checkArray( array $lead){

    //data sent to five9
    $data = array();

    //counter
    $i = 0;

    //five9 requires the $field names outlined below
    foreach($lead as $field => $value){
      //make sure first_name is 3 characters or more
      if( ($field == 'first_name' && strlen($field) > 3)){
        //add field to array
        $data[$i] = $value;
        //map the field in five9
        self::mapField($i, $field);
      }
      //make sure last_name is 3 characters or more
      if($field == 'last_name' && strlen($field) > 3 ){
        //add field to array
        $data[$i] = $value;
        //map the field in five9
        self::mapField($i, $field);
      }
      //if the field is a phone number
      if( $field == 'number1' ){
        //add field to array
        $data[$i] = preg_replace("/[^0-9]/", "", $value);
        //map the field in five9
        //this was they key for my instance
        self::mapField($i, $field, true);
      }
      //if the field is a phone number
      if( $field == 'number2' ){
        //add field to array
        $data[$i] = preg_replace("/[^0-9]/", "", $value);
        //setup column mapping in five9
        self::mapField($i, $field);
      }
      //make sure the state is only two characters
      if($field == 'state' && strlen($value) <= 2){
        //add field to array
        $data[$i] = $value;
        //setup column mapping in five9
        self::mapField($i, $field);
      }
      //make sure the state is only two characters
      if($field == 'zip' && strlen($value) <= 5){
        //add field to array
        $data[$i] = $value;
        //setup column mapping in five9
        self::mapField($i, $field);
      }
      //make sure memberid is an int
      if($field == 'member_id' && is_numeric($value)){
        //add field to array
        $data[$i] = $value;
        //setup column mapping in five9
        self::mapField($i, $field);
      }
      //increase the counter
      $i++;
    }
    //return the data array that is constructed
    return $data;

  }

  static function sendToFive9(array $lead ){

    //the conctructed array
    $data = self::checkArray($lead);

    //if the fields sent are all correct both arrays are the same size
    if(sizeof($lead) === sizeof($data) ){

        // Import the WSDL and authenticate the user.-----------------------------
        $wsdl_five9 = "https://api.five9.com/wsadmin/v2/AdminWebService?wsdl&user=$username";

        //try to authenticate with five9
        try{
            $soap_options = array( 'login'    => '$username',
                                   'password' => '$password',
                                   'trace' => true );

            $client_five9 = new SoapClient( $wsdl_five9 , $soap_options );
        }//if errors occur add the message to the response array
        catch (Exception $e){
            $error_message = $e->getMessage();
            $response['error'] = $error_message;
        }

        //settings required by five9
        self::$listUpdateSettings["skipHeaderLine"] = false;
        self::$listUpdateSettings["cleanListBeforeUpdate"] = false;
        self::$listUpdateSettings["crmAddMode"] = 'ADD_NEW';
        self::$listUpdateSettings["crmUpdateMode"] = 'UPDATE_SOLE_MATCHES';
        self::$listUpdateSettings["listAddMode"] = 'ADD_IF_SOLE_CRM_MATCH';

        //the default list for all new leads
        $list = "test";

        //prepare the query used to add the record to five9
        $query = array ( 'listName' => "$list",
                         'listUpdateSettings' => self::$listUpdateSettings,
                         'record' => $data );

        //get the result from running the query
        //this will return an object
        $result = $client_five9->AddRecordToList($query);

        //get the array of variables within the results object
        $variables = get_object_vars($result);

        //get the array of varaibles within the return array of objects
        $resp = get_object_vars($variables['return']);

        //if there was an error adding the record
        if($resp['failureMessage'] != ""){
          $response['errors'] = $resp['failureMessage'];
        }
       //if it was successful either adding or updating
        if($resp['crmRecordsUpdated'] == 1 || $resp['crmRecordsInserted'] == 1){
          $response['success'] = true;
          //reset the settings array so this class can be looped without passing the lists back and forth
          self::$listUpdateSettings = array("fieldsMapping" => array());
        }

    }//end if
    else{
        //return the differences in the arrays usually caused due to improper names
        $reponse["errors"] = array_diff($lead, $data);

    }

    return $response;

  }//end function

} 
```

# jquery - 如何使用 jqueryplugin 全屏显示 googlemaps

> ID：11665154
> 
> 赞同：9
> 
> 时间：2012-07-26T08:19:41.940
> 
> 标签：jquery, jquery-plugins, jquery-mobile, google-maps-api-3

如下图所示，地图只显示在左上角，可以在整个屏幕上拖动它，但它会跳回那个方块，只显示在那里。

标题中提到的插件：[SemiOfficial jquery plugin](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html)

所以我想知道如何解决这个问题？

在图片下方你会找到我的 html、插件列表和 js 代码。

![地图只显示左上角](../Images/ccdb669fedce75c44653434bb3755606.png)

**HTML/JSP：（**应该提到这是我的应用程序中的第二个 .jsp，所以它应该希望在 pageinit 方法中初始化）

```
<!DOCTYPE html> 
<html>
    <head> 
        <title>Map</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <link rel="stylesheet" href="js/jquery.mobile-1.1.0.css" />
    </head> 
    <body> 
        <!-- Start of first page -->
        <div data-role="page" id="mapmode" name="mapmode">

            <div data-role="header" id="header" name="header">
                <p>Header</p>
            </div><!-- /header -->
            <div data-role="content" id="content" name="content">   
                <div id="map_canvas" style="width:300px;height:350px"></div>

            </div><!-- /content -->
        </div><!-- /page -->
    </body>
</html> 
```

**插件：**

```
<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.1.0.js"></script>
        <script type="text/javascript"
                src="http://maps.googleapis.com/maps/api/js?key=_MY_KEY__INSERT_HERE_&sensor=true">
        </script>
        <script type="text/javascript" src="js/jquery.ui.map.js"></script>
        <script type="text/javascript" src="js/cordova-1.9.0.js"></script>
        <script type="text/javascript" src="js/FileManager.js"></script>
        <script type="text/javascript" src="js/LocalAction.js"></script>
        <script type="text/javascript" src="js/Menu.js"></script>
        <script type="text/javascript" src="js/MenuLoader.js"></script>
        <script type="text/javascript" src="js/PageHeader.js"></script>
        <script type="text/javascript" src="js/Mapmode.js"></script> 
```

**Mapmode.js：**

```
var mapdata = {
    destination: new google.maps.LatLng(59.3327881, 18.064488100000062)
};

$(document).on("pageinit", "#mapmode", function(event) {
    initMapMode();
    document.getElementById("map_canvas").style.height=$(window).height();
    document.getElementById("map_canvas").style.width=$(window).width();
    //Create the map then make 'displayDirections' request
    $('#map_canvas').gmap({
        'center' : mapdata.destination, 
        'mapTypeControl' : true, 
        'navigationControl' : true,
        'navigationControlOptions' : {
            'position':google.maps.ControlPosition.LEFT_TOP
        }
    })
    .bind('init', function() {
        $('.refresh').trigger('tap');        
    });
});

$('#mapmode').on("pageshow", function() {
    $('#map_canvas').gmap('refresh');
});

function initMapMode(){
    initPageHeader();
    initMapModeContent();
}

function initMapModeContent(){
}

function fadingMsg (locMsg) {
    $("<div class='ui-overlay-shadow ui-body-e ui-corner-all fading-msg'>" + locMsg + "</div>")
    .css({
        "display": "block", 
        "opacity": 0.9, 
        "top": $(window).scrollTop() + 100
    })
    .appendTo( $.mobile.pageContainer )
    .delay( 2200 )
    .fadeOut( 1000, function(){
        $(this).remove();
    });
}

// Request display of directions, requires jquery.ui.map.services.js
var toggleval = true; // used for test case: static locations
$('.refresh').live("tap", function() {
    // START: Tracking location with test lat/long coordinates
    // Toggle between two origins to test refresh, force new route to be calculated
    var position = {};
    if (toggleval) {
        toggleval = false;
        position = {
            coords: {
                latitude: 57.6969943, 
                longitude: 11.9865
            }
        }; // Gothenburg
    } else {
        toggleval = true;
        position = {
            coords: {
                latitude: 58.5365967, 
                longitude: 15.0373319
            }
        }; // Motala
    }
    $('#map_canvas').gmap('displayDirections', 
    {
        'origin' : new google.maps.LatLng(position.coords.latitude, position.coords.longitude), 
        'destination' : mapdata.destination, 
        'travelMode' : google.maps.DirectionsTravelMode.DRIVING
    },
    {
        'panel' : document.getElementById('dir_panel')
    },
    function (result, status) {
        if (status === 'OK') {
            var center = result.routes[0].bounds.getCenter();
            $('#map_canvas').gmap('option', 'center', center);
            $('#map_canvas').gmap('refresh');
        } else {
            alert('Unable to get route');
        }
    }); 
    // END: Tracking location with test lat/long coordinates
    $(this).removeClass($.mobile.activeBtnClass);
    return false;
}); 
```

**initpageheader 函数：**

```
function initPageHeader(){
    //TODO getdata with the id(page we are currently on).
    $("#header").html(function(index, originalMarkup) {
        return '<a data-theme="a" data-wrapperels="span" data-iconshadow="true" data-shadow="true" '+
        'data-corners="true" class="ui-btn-left ui-btn ui-btn-up-a ui-shadow ui-btn-corner-all" href="#" '+
        'data-rel="back" data-role="button"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">'+
        '<img src="../images/back.png" alt="back" align="middle" vspace="2"></span></span></a>'+
        '<h1 aria-level="1" role="heading" class="ui-title">'+
        '<img src="../images/main_header.png" alt="logo" align="middle" vspace="2">'+
        '</h1><a data-theme="a" data-wrapperels="span" data-iconshadow="true" data-shadow="true"'+
        'data-corners="true" class="ui-btn-right ui-btn ui-btn-up-a ui-btn-inline ui-shadow ui-btn-corner-all" '+
        'href="#first" data-role="button" data-inline="true"><span class="ui-btn-inner ui-btn-corner-all">'+
        '<span class="ui-btn-text">'+
        '<img src="../images/home.png" alt="picture to take you to the first page" align="middle">'+
        '</span></span></a>';
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:41:09.200

尝试使用api函数刷新地图的框架

在这条线之后

```
$('#map_canvas').gmap('refresh'); 
```

试试这个

```
google.maps.event.trigger(map, "resize"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:25:44.353

在装有谷歌地图的容器上。

#map_canvas { 最大宽度：无；}

# ajax - 什么是在 MVC3 中发送敏感数据更安全的方法

> ID：11665156
> 
> 赞同：0
> 
> 时间：2012-07-26T08:19:44.297
> 
> 标签：ajax, asp.net-mvc-3, passwords, submit

你能否告诉我什么是更安全的方式以及遵循什么程序。

我有此页面，其中包含要发送的密码和其他数据。那么在MVC3中发送它的更安全的方法是什么：1）使用ajax 2）或使用提交按钮将数据发布到模型中，并且我将模型作为控制器中处理提交的方法的输入参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:22:32.780

完全相同：除非您使用 SSL，否则也不安全。Ajax 只是一个异步 http post/get，所以从技术上讲，如果您谈论安全性，它们是等价的。

# java - How to load splash screen from image file

> ID：11665157
> 
> 赞同：1
> 
> 时间：2012-07-26T08:19:45.420
> 
> 标签：java, swing, splash-screen

I use an image as the splash screen by adding the following line:

`SplashScreen-Image: com/package1/splashimage.png`

to the `manifest.mf` file, which requires my `splashimage.png` to be included in the jar file. What I want to do now is to put that image file outside the jar file (i.e. as a separate file). How do I do that? Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:23:49.303

`SplashScreen-Image`需要一条路径。有关更多详细信息，请阅读 -[如何创建启动画面](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html)

```
SplashScreen-Image: com/package1/splashimage.png 
```

# linux - how may be the virtual memore be limited in linux

> ID：11665159
> 
> 赞同：0
> 
> 时间：2012-07-26T08:19:53.017
> 
> 标签：linux, memory, virtual-machine

I have a virtual machine in which every process can only malloc most 128M memory。 and when I typed "ulimit -v" in the teminal, is display 131072 while in the other machine is "ulimited". Can any one tell me why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:26:08.187

您可能需要询问设置该机器的人。

有`/etc/security/limits.conf`设置默认限制的文件。

# windows - how to search for every ABC folder from parent folders for *.txt files?

> ID：11665160
> 
> 赞同：1
> 
> 时间：2012-07-26T08:20:04.157
> 
> 标签：windows, batch-file

i am new to batch file programming. the hierarchy for the folder is like c:\Test\ contains multiple folders say suppose from 1 to 5 and each folder contains sub folders. say suppose there is folder name ABC in every 1 to 5 folders and in that *.txt files what i am looking is to search for ABC folder if i gave the path C:\Test it will look for ABC folder and copy the *.txt file in c:\copytest folder. is it possible ? i wanted to do this using batch file programming. Thanks! in advanced.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:06:51.967

打败我。

```
@echo off

setlocal

set ROOT_DIR=c:\temp\source
set DIR_TO_MATCH=ABC
set TARGET_DIR=c:\temp\target

for /f "tokens=*" %%F in ('dir "%ROOT_DIR%\*.txt" /s /b /a-d ^| %SystemRoot%\System32\find.exe "\%DIR_TO_MATCH%\"') do (
    move "%%F" "%TARGET_DIR%"
    )

endlocal 
```

# mysql - data type for high non-decimal prices

> ID：11665161
> 
> 赞同：1
> 
> 时间：2012-07-26T08:20:05.400
> 
> 标签：mysql, types

I've found a lot of questions there and in the other sites about the best data type for storing prices in MySQL and they said `Decimal` is the best.

But, my price column is a bit difference. All prices are integer (non-decimal) and the maximum amount is 999,999,999 ........

Which data type should I use?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:21:23.207

假设您的价格始终为正，请使用`UNSIGNED INT`. 它的范围高达 40 亿（对您来说绰绰有余）并存储整数值而不会丢失精度。

**有关的**

*   [数值类型](http://dev.mysql.com/doc/refman/5.6/en/integer-types.html)

# jquery - 如何在asp.net中压缩标签

> ID：11665164
> 
> 赞同：1
> 
> 时间：2012-07-26T08:20:11.987
> 
> 标签：jquery, asp.net, ajax

我有 Asp.net Ajax Tab 容器。有很多标签。因此，我需要滚动条才能在最后单击选项卡。是否有任何功能可以将选项卡压缩到容器宽度之外并在单击 + 符号后重新获得。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:09:16.530

这是官方网站：http: [//jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

这是您可以更改选项卡外观的方法

[http://keith-wood.name/uiTabs.html](http://keith-wood.name/uiTabs.html)

这显示了如何更改其代码以实现类似的功能

[http://css-tricks.com/jquery-ui-tabs-with-nextprevious/](http://css-tricks.com/jquery-ui-tabs-with-nextprevious/)

# jquery-plugins - jgesture 事件不会触发

> ID：11665166
> 
> 赞同：2
> 
> 时间：2012-07-26T08:20:21.163
> 
> 标签：jquery-plugins, touch-event

我正在使用 jgestures 来处理 Galaxy SII 上的触摸事件。我实现的事件不会以任何方式做出反应。在 stackoverflow 上，他们建议不要使用 swipeleft 或模拟事件，因为它必须是准确的。但替代方案也不起作用

```
<script type="text/javascript">
$(document).on('swipeleftup swipeleftdown', function(){
    // code to be executed
});
<script/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:38:58.327

我知道这个问题有点老了，但我在尝试解决同样的问题时遇到了它。据我所知，jGesture 库似乎不适用于除了 touchone 之外的 android。我已经尝试在 ICS 和 JB 上使用他们的示例，并且只有他们的 touch one event 似乎有效。

因此，我对最佳替代方案进行了一些研究。虽然有很多主要的似乎是 JQuery Mobile。它现在更成熟了，有一个 alpha builder 来生成一个只有触摸事件管理的 js（见[下载](http://jquerymobile.com/download-builder/)），这样你就可以选择事件的东西（注意这仅适用于 beta 版本，不适用于当前的稳定版释放）。我创建了一个仅触摸的 js，最小为 6.2kB。旧版本会创建一个 20kB 的 js。所以这是一个进步！

jQuery Mobile 的事件有[据可查](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)，你可以看到它们有一个合理的范围，对于更通用的行为来说绰绰有余。一些缺点是滑动只是左右滑动，没有捏合事件。

另一种选择是[TouchSwipe jQuery 插件](http://labs.skinkers.com/touchSwipe/)。这有大量的演示和一个支持捏事件的分支。我已经尝试过 ICS 上的演示，它们都运行良好。带有夹点支持的分支大小为 4.3kB。但是请注意，没有捏的演示，所以我还没有确定它是否适用于 ICS。在 Galaxy SII 上尝试[TouchSwipe 演示](http://labs.skinkers.com/content/touchSwipe//demo/1_Basic_swipe.php)，看看这是否适合您自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:30:42.943

复活一个可能死掉的线程，但以防其他人发现这个。

这篇文章对我修改 jgestures 中的 swipeleft/swiperight 功能非常有帮助。 [只有 swipeone 正在使用 jGestures](https://stackoverflow.com/questions/9413435/only-swipeone-is-working-with-jgestures)

完成此操作后，我可以保证它在 android 上运行良好。

# spring - Should 'everything' be spring managed in a Spring application?

> ID：11665168
> 
> 赞同：7
> 
> 时间：2012-07-26T08:20:22.610
> 
> 标签：spring, spring-mvc

We are working on a new application and we want to use Spring (college project!)

When you are writing a new Spring application, should each and every object be Spring injected?

```
class A {
    ...
    AHelper helper = new AHelper();
    helper.doSomething();
    ...
}

class AHelper {
    public void doSomething(){}
} 
```

1.  In this case, should AHelper be Spring injected into A using a setter? If class A depends on 5 helpers, should all of them be injected? Is that the best practice and if yes what are we getting out of it?

2.  Also, if class AHelper depends on AHelperHelper and that in turn depends on AHelperHelperHelper, should this entire dependency chain be configured in the XML. It just feels wrong to me!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T09:58:22.403

在我看来，最好在项目开始时决定哪些对象是 bean，哪些不是。它可以基于他们的*责任感*，或者在我的情况下，可以基于他们所在的*层。*这条规则很容易向其他团队成员解释，它最大限度地减少了项目中间的修改和*意外*。

所以，我通常会做的事情：

*   **Controller**、**service**和**repository**层是 Spring beans。所有这些通常都连接在一起，同时拥有一些 bean 和一些常规对象 (POJO) 过于复杂。

*   **模型**实体不是 Spring bean。如果模型实体只是 POJO，开发通常会更简单。此外，如果您在一次操作中加载数百个，并且它们都是 bean，则可能会导致性能下降。

*   **DTO** , **VO** ......好吧，我通常不需要它们，但如果我需要它们，我会将它们视为模型实体。

*   **实用程序**类。它们分为三种：

    *   静态方法类：显然它们不能是 bean。它不会帮助你。

    *   *简单*的对象，例如您自己的地图：只需将它们保留为常规对象即可。

    *   ***Helpers***，例如 CsvFileConstructor：在我看来，这些只是服务，但有些人更喜欢将它们放在*util*包中。无论如何，它们通常需要一些配置（在 CSV 情况下：编码、基本路径、分​​隔符...），因此如果您将它们设为 bean，您可以获得一些好处。

*   **Exceptions** , **enums** , ...：当然，没有 bean。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T08:22:25.657

我见过注入每个对象的项目，这是一场噩梦。

如果出现以下情况，我会确定您可能构建的*更大规模的组件并将它们创建为 Spring bean：*

1.  您可能想要配置它们
2.  在它们上使用 Spring AoP（例如用于事务等）
3.  客户可能希望使用这些组件重构您的应用程序

例如，在我当前的项目中，我们启用了新的更大规模的组件，我们可能希望启用/禁用这些组件以进行发布，或者其他团队将使用这些组件，或者我们需要启用 JMX（通过 Spring AoP）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T08:25:34.797

不是一切。但在那种情况下，这可能是一个好主意，是的。您获得的是通过在其中`A`注入模拟来进行单元测试的可能性`AHelper`。您可以获得许多其他东西（安全性、事务性方面等），但这取决于上下文以及对象`A`的类型`AHelper`。

这同样适用于您的所有连锁店。请注意，虽然 XML 不是配置 Spring 应用程序的首选方式。注释更易于使用，并且允许拥有最小的 XML 配置文件。

# c - I am not able to understand the recursion of functions. How it works? how the values are stored and all?

> ID：11665169
> 
> 赞同：0
> 
> 时间：2012-07-26T08:20:23.963
> 
> 标签：c, recursion

I am not able to understand the recursion of functions. How it works? how the values are stored and all?

```
int tree_size(struct node* node) { 
  if (node==NULL) {
    return(0); 
  } else { 
    return(tree_size(node->left) + tree_size(node->right) + 1); 
  } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:23:50.260

进入函数时，会创建一个新的堆栈帧（在内存中的堆栈上）。堆栈帧跟踪该函数内的本地数据，例如本地定义的变量和传入的参数。（以及必须保留的其他内容，例如返回地址和先前存储的寄存器值。但是，这与此问题无关。）

使用递归，当您从同一个函数中调用一个函数时，您会创建一个新的堆栈框架（与任何调用一样），并且该新堆栈框架将存储新调用的局部变量。

正如 C. Stoll 所指出的，由于 + 运算符，这两个调用的顺序是未指定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:57:47.800

我认为最让你困惑的是..

```
return(tree_size(node->left) + tree_size(node->right) + 1); 
```

如果您在顶部节点上调用此函数，它会告诉您树中的节点数是左侧的节点数加上右侧的数，再加上您刚刚调用函数的节点上的 this。

现在，我不认为是递归让您感到困惑，如果是，请发表评论，我可以再解释一下。

我认为您遇到的问题是该行的执行顺序。好吧，它遵循“加法”的逻辑数学规则。注意，我们知道我们不必关心运算符重载，就像`tree_size`返回 an一样`int`，所以我们有

```
intA + intB + intC; 
```

我相信我不需要告诉你添加这三个值的顺序无关紧要，你会得到相同的结果。

但是，这些添加的顺序是明确定义的。如果您将`+`运算符视为它的功能，它会更清晰一些。我们基本上有（我希望我做对了）：

```
operator+(intA , operator+( intB, intC); 
```

所以，你可以看到，我们需要先计算 B + C，然后才能加 A，或者如果我们把它带回到有问题的代码行，我们`tree_size`首先得到右边的，加一个，然后加在`tree_size`左边。这是需要注意的重要事项，您可以做一些非常奇怪的事情，例如在获得值时编辑树大小......例如，如果您将节点从一侧移动到另一侧。当然，如果获取它的大小不是您可以依赖的东西，那将是一棵非常糟糕的树。

我担心我可能在这里做得太多了，所以如果我有点错过了标记，请发表评论，我很乐意帮助您改善这个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:38:08.633

考虑以下三个

```
     1
  2 3
 4 5 6
7

```

1 有两个孩子（2 和 3） 2 有两个孩子（4 和 5）.. 4 有一个孩子（7）
，您想知道树在 1 处的大小：

```
tree_size(tree1); 
```

因为 tree1 不为 NULL 且 if 条件不成立，所以 else 语句将被执行：

```
tree_size(tree1): return tree_size( tree_size(tree2) + tree_size(tree3) + 1 ) 
```

树 2 和树 3 相同

```
tree_size(tree2): return tree_size( tree_size(tree4) + tree_size(tree5) + 1 )
tree_size(tree3): return tree_size( tree_size(tree6) + tree_size(NULL) + 1 ) 
```

等等。现在如果我们用 tree_size(tree1) 替换 tree_size(tree2) 和 tree_size(tree3) 的返回值，我们会得到：

```
tree_size(tree1): return tree_size( tree_size(tree4) + tree_size(tree5) + 1 + tree_size(tree6) + tree_size(NULL) + 1 + 1 ) 
```

现在您可以看到术语 1+1+1，这是前两个 niveau 的树的大小，如果我们继续替换 tree_size 调用，将得到 n 乘以 1 的一些，其中 n 的大小树

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:54:52.693

使用纸片的类比（@nhahtdh 在对 Q 的评论中）非常好。让我详细说明一下。

首先，以更线性的方式重新编写代码：

```
int tree_size(struct node* node) { 
  if (node==NULL) {
    return(0); 
  } else { 
    x = tree_size(node->left);
    y = tree_size(node->right);
    z = x + y;
    r = z + 1;
    return( r ); 
  } 
} 
```

想象一下，您面前有一叠厚厚的（实际上取之不尽的）空纸。您的办公桌左侧还有各种食谱（功能定义），右侧有一个空白空间。

现在，调用一个函数意味着将它的定义从它的配方复制到你面前一堆纸上的纸上，然后将调用的参数值替换为函数参数，然后从那里继续。

当你碰到一个**函数调用**的行（*任何*函数调用）时，在你面前的纸上**标记那条线，把那张纸****移到**你的右边（面朝上），然后开始处理**新**的空纸纸在你面前。将您需要调用的函数的配方复制到其上，记下参数值，然后根据您面前的配方继续处理*它。*

如果您遇到另一个函数调用，请重复以下操作：标记需要接收函数调用**结果**的行，将当前纸张放在您右侧的纸堆顶部（面朝上），将新配方复制到你面前的最上面的一张纸，然后像以前一样从那里继续。

现在，当您点击当前配方中的一行时**`return`**，将返回的值写在您右侧**标记行**的纸堆的最上面一张纸上，然后**丢弃**您面前的当前纸并向**后移动**从你面前的那摞纸中取出最上面的那张纸。

而已。你只需要两摞纸，一张在你面前，另一张在你的右边，还有一堆写着函数定义的纸，在你的左边。

请注意，我们不关心我们调用的函数是否与我们执行的先前函数调用之一*相同。*它的工作原理是一样的。

# xml - XSLT 合并 2 个 XML 文件

> ID：11665170
> 
> 赞同：0
> 
> 时间：2012-07-26T08:20:27.537
> 
> 标签：xml, xslt, merge, union

我知道这里很少有与 xml/xslt 合并相关的问题，但似乎没有一个可以解决我遇到的问题。

我正在寻找的是一个 XSLT（尽可能通用 - 与输入 XML 文件的结构不紧密），它可以

将 a.xml 与 b.xml 合并并以这样的方式生成 c.xml

*   c.xml 将包含 a.xml 和 b.xml 之间的公共节点（节点值取自 a.xml）
*   此外，c.xml 将包含 b.xml 中而不是 a.xml 中存在的节点（和值）

例如：合并**a.xml**：

```
<root_node>
  <settings>
    <setting1>a1</setting1>
    <setting2>a2</setting2>
    <setting3>
      <setting31>a3</setting31>
    </setting3>
    <setting4>a4</setting4>
  </settings>
</root_node> 
```

与**b.xml**：

```
<root_node>
  <settings>
    <setting1>b1</setting1>
    <setting2>b2</setting2>
    <setting3>
      <setting31>b3</setting31>
    </setting3>
    <setting5 id="77">b5</setting5>
  </settings>
</root_node> 
```

将生成**c.xml**：

```
<root_node>
  <settings>
  <setting1>a1</setting1>
  <setting2>a2</setting2>
  <setting3>
    <setting31>a3</setting31>
  </setting3>
  <setting5 id="77">b5</setting5>
</settings> 
```

**附加信息**

我将尝试通过“公共节点”来解释我的理解。这可能不是一个准确的 xml/xslt 定义，因为我不是任何方面的专家。

**a** /root_node/settings/ **setting1是与****b** /root_node/settings/ **setting1**的“公共节点”，因为使用相同的路径到达 2 个节点。设置 2 和设置 3 相同。

2个“非公共节点”是**一个**/root_node/settings/ **setting4**仅在 a.xml 中找到（它不应该出现在输出中）和**b** /root_node/settings/ **setting5**仅在 b.xml 中找到（它应该进入输出）。

我所说的“通用解决方案”并不是指可以使用任何输入 XML 格式的东西。我的意思是 xslt 不应该包含硬编码的 xpath，而您可能会添加诸如“这仅在 a.xml 中的节点是唯一的时才有效”之类的限制，或者您可能认为合适的任何其他限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:02:21.500

对多个文件进行操作的基本技术是通过 document() 函数。文档函数如下所示：

```
<xsl:variable name="var1" select="document('http://example.com/file1.xml', /)"/>
<xsl:variable name="var2" select="document('http://example.com/file2.xml', /)"/> 
```

拥有这两个文档后，您可以像在同一个文档中一样使用它们的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:10:34.883

下面的 XSLT 1.0 程序可以满足您的需求。

应用它`b.xml`并将路径`a.xml`作为参数传递。

下面是它的工作原理。

1.  它遍历`B`，因为它包含您要保留的新节点以及 和之间的*公共元素*。 `A``B`
    1.  我将*“公共元素”*定义为具有相同*简单路径*的任何元素。
    2.  我将*“简单路径”*定义为以斜线分隔的祖先元素名称列表和元素本身，即`ancestor-or-self`轴。
        所以在你的样本`B`中，`<setting31>`会有一个简单的*路径*。`root_node/settings/setting3/setting31/`
    3.  **请注意，此路径不明确。**这意味着您的输入中不能有任何两个具有相同名称的元素共享相同的父元素。根据您的样本，我认为情况并非如此。
2.  对于每个*叶文本节点*（元素中没有其他子元素的任何文本节点）
    1.  *简单路径*是使用名为 的模板计算的`calculatePath`。
    2.  调用递归模板`nodeValueByPath`，尝试从其他文档中检索相应*简单路径的文本值。*
    3.  如果找到相应的文本节点，则使用其值。这满足了您的第一个要点。
    4.  如果没有找到对应的节点，它使用手头的值，即来自的值`B`。这满足了您的第二个要点。

结果，新文档匹配`B`的结构并包含：

*   中的所有文本节点值`B`都没有对应的节点`A`。
*   `A`存在相应节点时的文本节点值`B`。

这是 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" />

  <xsl:param name="aXmlPath" select="''" />
  <xsl:param name="aDoc"     select="document($aXmlPath)" />

  <xsl:template match="@* | node()">
    <xsl:copy>
       <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>

  <!-- text nodes will be checked against doc A -->
  <xsl:template match="*[not(*)]/text()">
    <xsl:variable name="path">
      <xsl:call-template name="calculatePath" />
    </xsl:variable>

    <xsl:variable name="valueFromA">
      <xsl:call-template name="nodeValueByPath">
        <xsl:with-param name="path"    select="$path" />
        <xsl:with-param name="context" select="$aDoc" />
      </xsl:call-template>
    </xsl:variable>

    <xsl:choose>
      <!-- either there is something at that path in doc A -->
      <xsl:when test="starts-with($valueFromA, 'found:')">
        <!-- remove prefix added in nodeValueByPath, see there --> 
        <xsl:value-of select="substring-after($valueFromA, 'found:')" />
      </xsl:when>
      <!-- or we take the value from doc B -->
      <xsl:otherwise>
        <xsl:value-of select="." />
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <!-- this calcluates a simpe path for a node -->
  <xsl:template name="calculatePath">
    <xsl:for-each select="..">
      <xsl:call-template name="calculatePath" />
    </xsl:for-each>
    <xsl:if test="self::*">
      <xsl:value-of select="concat(name(), '/')" />
    </xsl:if>
  </xsl:template>

  <!-- this retrieves a node value by its simple path -->
  <xsl:template name="nodeValueByPath">
    <xsl:param name="path"    select="''" />
    <xsl:param name="context" select="''" />

    <xsl:if test="contains($path, '/') and count($context)">
      <xsl:variable name="elemName" select="substring-before($path, '/')" />
      <xsl:variable name="nextPath" select="substring-after($path, '/')" />
      <xsl:variable name="currContext" select="$context/*[name() = $elemName][1]" />

      <xsl:if test="$currContext">
        <xsl:choose>
          <xsl:when test="contains($nextPath, '/')">
            <xsl:call-template name="nodeValueByPath">
              <xsl:with-param name="path"    select="$nextPath" />
              <xsl:with-param name="context" select="$currContext" />
            </xsl:call-template>
          </xsl:when>
          <xsl:when test="not($currContext/*)">
            <!-- always add a prefix so we can detect 
                 the case "exists in A, but is empty" -->
            <xsl:value-of select="concat('found:', $currContext/text())" />
          </xsl:when>
        </xsl:choose>
      </xsl:if>
    </xsl:if>    
  </xsl:template>
</xsl:stylesheet> 
```

# c++ - 在 Windows 7 中管理应用程序音量

> ID：11665176
> 
> 赞同：6
> 
> 时间：2012-07-26T08:20:41.503
> 
> 标签：c++, delphi, audio, windows-7, windows-vista

如何检索应用程序音频会话列表（如在 Windows 音量混合器中）并手动更改一个应用程序（例如 Mozilla）的音量（C++、Delphi）？当你开始说话时，Skype 会做同样的事情（降低其他应用程序的音量）。提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T19:39:52.843

要枚举音频会话，您必须使用[`IAudioSessionManager2`](http://msdn.microsoft.com/en-us/library/dd370950%28VS.85%29.aspx)接口并调用[GetSessionEnumerator](http://msdn.microsoft.com/en-us/library/dd370952%28v=vs.85%29.aspx)方法，这将返回一个[`IAudioSessionEnumerator`](http://msdn.microsoft.com/en-us/library/dd370950%28VS.85%29.aspx)接口，从这里您必须调用该[`GetSession`](http://msdn.microsoft.com/en-us/library/dd368286%28v=vs.85%29.aspx)方法以返回一个[`IAudioSessionControl`](http://msdn.microsoft.com/en-us/library/dd368246%28v=vs.85%29.aspx)接口，该接口提供了检索与音频会话相关的信息的所有功能。作为附加讲座，请尝试这篇 MSDN 文章[`Default Ducking Experience`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd316773%28v=vs.85%29.aspx)。

# iphone - 如何将包裹类型的文件作为邮件附件发送？

> ID：11665177
> 
> 赞同：3
> 
> 时间：2012-07-26T08:20:41.270
> 
> 标签：iphone, mfmailcomposeviewcontroller, nsfilewrapper

我有一个包类型的文档——即它实际上是一个文件夹，但它使用`NSFileWrapper`并符合`com.apple.package`显示为一个文件——我想通过电子邮件共享它。我已经制作了一个`MFMailComposeViewController`，我正在尝试找出给 . 的第一个参数提供什么`addAttachmentData:mimeType:fileName:`。

该软件包包含一个图像文件和一个 plist，尽管将来可能会改变。

如何将包转换为数据？这是正确的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:34:24.347

正如你所说，一个包实际上是一个文件夹。它仅在 OSX 操作系统上被解释为一个包。

因此，邮件协议不能将其解释为一个包/单个文件，而只能看到一个标准文件夹。

通过电子邮件发送此文件的唯一方法是将文件压缩成一个文件。例如，您可以通过创建包的 ZIP 存档或 tar.gz 文件来做到这一点。

有多种解决方案可以从 Cocoa 中的代码创建 ZIP 存档。您可以直接使用 libz 库和 C 代码，或使用一些第三方库（已经有通用代码，并使用 Cocoa 方法帮助您更轻松地完成此操作），如[ZipArchive](http://code.google.com/p/ziparchive/downloads/list)或其他。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-12T21:29:54.017

我的文件不大，所以 ZIP 有点大材小用，我也在尽量避免使用第三方代码。所以我想出了一种不同的方法来在一个电子邮件附件中附加多个文件。

首先，我已经有一个 NSFileWrapper 对象，其中包含附件中我想要的所有文件。关键是使用 NSFileWrapper 的 serializedRepresentation 方法来获取 NSData 对象以用于电子邮件附件。我正在为 mimeType 使用“应用程序/八位字节流”。当我重新打开附件时，我使用 NSFileWrapper 的 initWithSerializedRepresentation: 方法来获取原始的 NSFileWrapper。

这对我有用，因为附件只会由我的应用程序使用和打开。显然，如果您需要对 App 之外的附件做一些事情，这将不起作用。在这种情况下，ZIP 似乎是合乎逻辑的选择。

# c# - 以特定顺序读取文件？

> ID：11665178
> 
> 赞同：3
> 
> 时间：2012-07-26T08:20:47.777
> 
> 标签：c#, .net, file

我想从不同的文件夹中读取很多文件。现在我问自己什么是最聪明的方法。现在我使用

```
 DirectoryInfo directory = new DirectoryInfo(myPath);
    FileInfo[] files = directory.GetFiles("*.txt"); 
```

所以我有一个包含所有文件的列表，我可以遍历它们（一一阅读）。

这样好吗？有没有办法重新排序列表，以便我**始终**将最旧的文件放在顶部。这可能是一个好主意，因为我想开始阅读最旧的文件，最后是最新的。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T08:23:23.140

```
List<FileInfo> files = directory
    .GetFiles("*.txt")
    .OrderBy(f => f.LastWriteTime)
    .ToList(); 
```

请参阅[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)和[FileSystemInfo](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.aspx)以获取您可以订购的字段的完整列表。

这是VB.NET 中的一个[示例](http://geekswithblogs.net/ntsmith/archive/2006/08/17/88250.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T08:29:49.080

您可以从目录中获取文件，然后按创建日期对它们进行排序：

```
DirectoryInfo info = new DirectoryInfo(myPath);
FileInfo[] files = info.GetFiles("*.txt").OrderBy(f => f.CreationTime).ToArray(); 
```

现在该`files`数组包含按创建日期排序的文件。通过改变 lambda 表达式`OrderBy`，您可以按任何方式对它们进行排序：

*   按上次修改时间：`OrderBy(f => f.LastWriteTime)`
*   按名字：`OrderBy(f => f.Name)`

..等等。*您的输出也*不必是数组。`List<FileInfo>`它也可以通过将 final 替换为 a 来转换为`ToArray()`a `ToList()`。

如果您需要以相反的顺序排序，您可以简单地使用`OrderByDescending(...)`来获得所需的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T08:28:28.747

在您的代码之后，请执行以下操作：

```
FileInfo[] orderedFiles = files.OrderBy(x => x.CreationTime).ToArray(); 
```

.. 或者更好的是，首先将它们排序：

```
DirectoryInfo directory = new DirectoryInfo(myPath);
FileInfo[] files = directory.GetFiles("*.txt")
                   .OrderBy(x => x.CreationTime).ToArray(); 
```

# c# - Server.MapPath 和空格

> ID：11665179
> 
> 赞同：5
> 
> 时间：2012-07-26T08:20:50.113
> 
> 标签：c#, asp.net, .net, server.mappath

我注意到 Server.MapPath() 中有一些奇怪的东西。如果我有一个最后有空格的文件夹，我会得到：

> HttpException：无法映射路径。

这工作正常： `Server.MapPath("/Folder1/Folder2/item.jpg")`

这工作正常： `Server.MapPath("/Folder1/ Folder2/item.jpg")`

这工作正常： `Server.MapPath("/Folder1/Fol der2/item.jpg")`

这失败了！： `Server.MapPath("/Folder1/Folder2 /item.jpg")`

有人可以向我解释为什么最后的空格会失败，而其他任何地方的空格都不会吗？

**注意：**这些文件夹都不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:38:30.090

MapPath 方法将指定的相对或虚拟路径映射到服务器上相应的物理目录。该方法不检查它返回的路径是否有效或是否存在于服务器上。您必须使用 Directory.Exists() 或 File.Exists() 方法来检查目录或文件是否已经存在。

```
if (File.Exists(Server.MapPath(file)) 
```

此外，还知道以下是该方法的无效字符：

星号 (*)
问号 (?)
尖括号 (< 或 >)
逗号 (,)
冒号或分号 (: 或 ;)
单引号或双引号 (' 或 ")
右方括号 (])
双斜杠（// 或者 \）

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:33:19.037

因为你[不应该](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx#file_and_directory_names)：

> 不要以空格或句点结尾的文件或目录名称。尽管底层文件系统可能支持此类名称，但 Windows shell 和用户界面不支持。但是，可以将句点指定为名称的第一个字符。例如，“.temp”。

问题来自方法`FileUtil.IsSuspiciousPhysicalPath(string physicalPath, out bool pathTooLong)`，它进行了比较：

```
string.Compare(physicalPath, Path.GetFullPath(physicalPath), StringComparison.OrdinalIgnoreCase) != 0; 
```

`Path.GetFullPath()`将从目录和文件名中修剪尾随空格（因为它调用`Path.NormalizePath()`which 这样做），例如可以发现调用`Path.GetFullPath(@"C:\Foo \Bar.txt")`。由于这与包含空格的原始路径不匹配，因此该方法将返回，`true`从而将路径识别为可疑，之后`Server.MapPath`将引发异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T08:23:47.510

## 编辑

[设置 Visual Studio 2010 以进入 Microsoft .NET 源代码](http://weblogs.asp.net/rajbk/archive/2010/04/21/setting-up-visual-studio-2010-to-step-into-microsoft-net-source-code.aspx)

使用事情后，我试图找出`server.MapPath`在调试.net框架代码后使用方法时.net框架中实际发生的问题，我发现调用从虚拟路径获取绝对路径会抛出以下文件和框架方法

**文件**- System\Web\httpserverutility.cs\1477467\httpserverutility.cs **方法**-MapPath

**文件**- \System\Web\VirtualPath.cs\1477467\VirtualPath.cs**方法**-创建

**文件**-System\Web\HttpRequest.cs\1599819\HttpRequest.cs **方法**-MapPath

但是我发现，当路径为 /folder1/folder2 /file.cs 而不是 reutn null 对象时，当输入 /folder1/folder2/file.cs

我希望你喜欢进入框架，看看会发生什么

任何方式都很好的问题..但这个问题的答案仍然可能由微软人提供，只有在框架中设计该文件的人

* * *

问题是它无法找到带有空间的文件夹，即“Folder2”。无效并且无法在文件系统上找到此文件夹。

基本上，您在 Windows 文件系统上找不到任何文件夹，该文件夹在 namei.e 末尾或开头后有 sapce。

# html - 绝对位置，负右移，移除滚动条

> ID：11665180
> 
> 赞同：0
> 
> 时间：2012-07-26T08:20:50.727
> 
> 标签：html, css, positioning

在调整窗口大小时，绝对定位的 DIV 移动到HTML 的**右边界**之外- 因此出现水平滚动条。**但我只**需要在中央固定宽度列上滚动条。有什么解决办法吗？如何在 HTML-tag 右边框下悄悄获得正确的评论？

见[http://jsfiddle.net/9y5BW/1/](http://jsfiddle.net/9y5BW/1/)

```
<!DOCTYPE HTML>
<html>
<head><title>Absolute position right scrollbar removing</title></head>

<body>
  <style>
    body {line-height: 1.5em;}
    p {margin: 0;}
    .page {position: relative; width: 400px; margin: 0 auto; background-color: #ccc;}
    .comment-container {position: relative; width: 100%; height: 0; top: -1px;}
    .comment {position: absolute; width: 200px; background-color: #eee; top: -1.5em; border-top: 1px solid #aaa;}
  </style>

    <div class="page">
    <p>
        Text and images here. Scrollbar should appear when window size is less than 400px.
    </p>
    <div class="comment-container">
      <div class="comment" style="right: -200px;">
        Some outside comment on the right. Horizontal scrolbar on html-tag appears on window squeezing.
        Is there any way to remove the scrollbar when this element goes outside?
      </div>
    </div>
    <p>
        More text, text and text goes here.
    </p>
    <div class="comment-container">
      <div class="comment" style="left: -200px;">
        Some outside comment on the left. No scrollbar on window resizing.
      </div>
    </div>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:28:17.803

如果您`overflow: hidden`在正确的 div/包装器上使用，您可以决定哪些内容不会触发滚动条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:31:40.493

你把所有东西都放在一个隐藏溢出的容器中，然后`right: -100px`像这样定位右列：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
html,
body { 
    margin: 0;
    padding: 0;
    text-align: center;
}

body {
    overflow: auto;
}
#container {
    min-width: 960px;
    zoom: 1; /*For ie6*/
    position: relative; /*For ie6/7*/
    overflow: hidden;
    margin: 0 auto;
}

#main {
    background: #cea;
    width: 960px;
    margin: 0 auto;
    height: 700px;
    position: relative;
    top: 0;
}

#right,
#left {
    position: absolute;
    height: 100px;
    width: 100px;
    top: 0;
    z-index: 100;
}

#right { 
    background: #797;
    right: -100px;
}

#left {
    background: #590;
    left: -100px;
}      
</style>
</head>
<body>
    <div id="container">
        <div id="main">
            <div id="left">left</div>
            <div id="right">right</div>
        </div>
    </div>
</body>
</html> 
```

# asp.net - 在一种解决方案中从 asp.net 页面重定向到 silverlight 页面

> ID：11665187
> 
> 赞同：2
> 
> 时间：2012-07-26T08:21:09.883
> 
> 标签：asp.net, sql, silverlight

我现在在一个解决方案中获得了一个带有 silverlight 应用程序的 ASP.Net 应用程序，当我将 ASP.net 页面重定向到 sliverlight 页面时，我在引用中弹出了这个错误

> **尝试向 URI 'http://localhost:2172/Middleware.svc' 发出请求时出错。这可能是由于在没有适当的跨域策略或不适合 SOAP 服务的策略的情况下尝试以跨域方式访问服务。您可能需要联系服务的所有者以发布跨域策略文件并确保它允许发送与 SOAP 相关的 HTTP 标头。此错误也可能是由于在 Web 服务代理中使用内部类型而不使用 InternalsVisibleToAttribute 属性造成的。有关更多详细信息，请参阅内部异常。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:26:23.957

您需要将跨域和客户端访问策略文件放在 Web 应用程序的根目录中。

请参考以下链接。

[使服务跨域边界可用](http://msdn.microsoft.com/en-us/library/cc197955%28v=vs.95%29.aspx)

# string - 是否有一个 Delphi XE2 字符串散列函数保证是唯一的，我可以使用它来查找？

> ID：11665189
> 
> 赞同：1
> 
> 时间：2012-07-26T08:21:12.347
> 
> 标签：string, delphi, hash, delphi-xe2

我正在使用 TClientDataSet 来管理对象并授予我对对象数据的“数据库”访问权限。到目前为止，这运作良好。我在数据集中有两个“特殊”（隐藏）字段-“ObjectName”和“ObjectRef”。ObjectName 是对象项的类别和名称的连词，形式为 My category.my object'，用于将我从对象实例内部获取到记录号。该字段已编入索引。'ObjectRef' 是指向该对象实例的指针的整数类型转换，用于所有其他对象生命周期管理。

我必须为“ObjectName”字段选择一个大小，以适应我预期的最大可能类别和名称组合，但这只是一个索引，出于性能和内存原因，我希望尽可能小。是否有一个“无损”函数可以应用于我的表单“我的类别.我的名字”，它仍然是唯一的，我可以用作哈希？散列函数看起来很聪明，但不是计算机科学大师，我从不知道如何知道它们的输出是否唯一。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T20:06:46.037

所有散列函数都有冲突的风险，但 AFAIK 更安全的一种是 SHA-1 算法，存在许多 delphi 实现，例如您可以使用 [Jwscl 库（JEDI Windows 安全代码库）](http://sourceforge.net/projects/jedi-apilib/)，它是[Windows的包装器CryptoAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa388162%28v=vs.85%29.aspx)（你可以在这个问题上找到一个 delphi 示例[`SHA1 hashing in Delphi XE`](https://stackoverflow.com/questions/4929650/sha1-hashing-in-delphi-xe)）或使用`TIdHashSHA1`Indy 中的类。

另一种选择是使用更简单的哈希函数（非加密），例如 delphi 在[BobJenkinsHash](http://docwiki.embarcadero.com/Libraries/en/System.Generics.Defaults.BobJenkinsHash)方法中实现的 Jenkins 哈希函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T08:32:11.713

不。根据定义，哈希函数的结果不是唯一的。

您可能需要创建一个本地列表来跟踪应用程序中的 ObjectName，并将唯一索引与添加的每个对象相关联，这样您就可以将其存储在 DB 中而不是 ObjectName 中。或者在创建时为您的对象分配全局唯一索引（例如 UInt64）

# android - 未处理的异常类型 ParseException

> ID：11665195
> 
> 赞同：6
> 
> 时间：2012-07-26T08:21:40.380
> 
> 标签：android, exception, unhandled

我在我的应用程序中使用这部分代码：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ss'Z'");
Date qdate = new GregorianCalendar(0,0,0).getTime();
try {
    qdate = sdf.parse(dt);
} catch (ParseException e) {
    e.printStackTrace();
} 
```

但 Eclipse 抛出一个错误说：

未处理的异常类型 ParseException

这里有什么问题？你需要我发布整个代码吗？提前谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-26T08:27:41.970

见下面的代码

```
 String date = "Sat, 23 Jun 2012 00:00:00 +0000";
        try {
            SimpleDateFormat format = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z");
            SimpleDateFormat df2 = new SimpleDateFormat("dd/MM/yy");
            date = df2.format(date));
        } catch (java.text.ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-24T11:07:45.703

## java.time

是时候展示现代的做法了。使用 java.time，现代 Java 日期和时间 API。

```
 String dt = "2020-07-24T11:03:12Z";
    try {
        Instant i = Instant.parse(dt);
        System.out.println(i);
    } catch (DateTimeParseException dtpe) {
        System.err.println(dtpe);
    } 
```

输出是：

> 2020-07-24T11:03:12Z

我正在利用您的格式是 ISO 8601 的事实，并且 java.time 的类将 ISO 8601 的最常见变体解析为默认值，也就是说，没有任何显式格式化程序。

如果字符串不是 UTC 中的有效 ISO 8601 日期和时间，则会出现异常。例如：

```
 String dt = "Not a valid date-time"; 
```

> java.time.format.DateTimeParseException：无法在索引 0 处解析文本“不是有效的日期时间”

这些类`SimpleDateFormat`和`Date`设计不佳且早已过时，尤其是前者出了名的麻烦。我建议没有人再使用它们。现代 API 使用起来要好得多。

## 链接

*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。
*   [维基百科文章：ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-05-30T11:10:51.837

```
Calendar c = Calendar.getInstance();

SimpleDateFormat df = new SimpleDateFormat("DD-MM-YYYY");

String Currentdatestr = df.format(c.getTime());

//get current date in String

Date date = df.parse(Currentdatestr);

//String to parse Date Format 
```

# c# - NUnit 和 NUnit.Runner 的区别

> ID：11665196
> 
> 赞同：0
> 
> 时间：2012-07-26T08:21:45.883
> 
> 标签：c#, visual-studio-2010, nunit, nunit-2.5.9

NUnit 和 NUnit.Runner 包有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:34:18.410

NUnit 包包含 NUnit 框架库，可让您**编写**测试。NUnit Runners 包包含一些额外的工具，可以让您**执行**测试，例如使用 GUI 运行器。

# c# - 如何使用 wmi 映射网络驱动器

> ID：11665197
> 
> 赞同：2
> 
> 时间：2012-07-26T08:21:50.880
> 
> 标签：c#, wmi, mapped-drive

> **可能重复：**
> [使用 WMI 挂载网络驱动器](https://stackoverflow.com/questions/11508844/mount-network-drive-with-wmi)

我正在使用 c# 映射网络驱动器。我在[代码项目](http://www.codeproject.com/Articles/90143/Mapping-Network-Drive-using-C)中找到了运行良好的代码，但在同一个应用程序中，我一直在使用 WMI 来确定现有映射驱动器指向的位置，以及创建共享文件夹。本着保持一致的精神，我想知道是否可以使用 WMI 创建和删除映射驱动器，以便我可以用 WMI 实现替换代码项目类。

谢谢

# ios - 我的视图控制器没有出现在屏幕上

> ID：11665199
> 
> 赞同：0
> 
> 时间：2012-07-26T08:21:56.760
> 
> 标签：ios, uiviewcontroller

我选择选项卡式应用程序模板。然后我添加了 CoolViewController，但它没有出现在屏幕上。怎么了？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
 self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
 UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
 UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
 self.tabBarController = [[UITabBarController alloc] init];
 self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, nil];
 self.window.rootViewController = self.tabBarController;

 CoolViewController *coolVC = [[CoolViewController alloc] init];
 coolVC.view.frame = CGRectMake(0, 0, 320, 200);
 coolVC.view.backgroundColor = [UIColor blackColor];
 [self.window addSubview:coolVC.view];

 [self.window makeKeyAndVisible];
 return YES;
}

@interface CoolViewController : UIViewController
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:31:03.270

您不应该将 CoolViewController 添加到窗口，而是添加到`UITabBarController`.

你应该得到这样的结果：（注意：我没有尝试过）

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
 self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
 UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
 UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
 self.tabBarController = [[UITabBarController alloc] init];

 CoolViewController *coolVC = [[CoolViewController alloc] init];
 coolVC.view.frame = CGRectMake(0, 0, 320, 200);
 coolVC.view.backgroundColor = [UIColor blackColor];

 self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2,coolVC, nil];
 self.window.rootViewController = self.tabBarController;

 [self.window makeKeyAndVisible];
 return YES;
} 
```

# unix - 根据上次修改日期确定文件所有者、大小和修改日期/时间

> ID：11665200
> 
> 赞同：2
> 
> 时间：2012-07-26T08:22:01.143
> 
> 标签：unix

我想确定来自多个磁盘系统的文件的所有权、大小和修改日期/时间。

有没有办法递归搜索这些文件和目录，因为我知道的唯一解决方案是使用 find 的 -mtime 选项，它只返回基于指定日期范围的文件名/路径列表。我还需要修改所有权、大小和日期/时间。

我知道 stat 会通过一些后处理提供详细信息，但是是否有任何其他选项可以使用每个文件所需的信息有效地找到这些文件，因为我必须处理跨多个文件系统的巨大文件/目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:11:05.460

使用 GNU find，您可以使用该`-ls`选项让 find 以类似的格式打印结果，`ls -isl`或者使用该`-printf`选项准确选择您想要的字段。例子：

```
find . -type f -mtime -3 -ls

find . -type f -mtime -3 -printf 'owner=%u (uid %U) size=%s bytes modified=%t name=%p\n' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:28:14.907

GNU 版本的 find 有 -user（对于所有者）、-size（对于文件大小）、-mtime（对于修改时间）。

难道这些选项不能为您提供您所需要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T20:03:40.617

为了可读性和清晰度，我编辑了您的 OP。

根据我相信您的要求，您可以结合`find`为`ls`您提供所需的内容：

```
find . -type f -mtime -3d -print0 | xargs -0 ls -la 
```

上面的命令行语句将识别自修改后不到三天的所有文件，并将输出通过 -la 开关通过管道传输到 ls 命令，以根据您的需要为您提供完整的文件信息。您可以摆弄语句的 find 部分来识别实际的文件集，但后面的部分将始终为您提供文件的详细信息。

# android - XML 错误 - 标记根元素

> ID：11665201
> 
> 赞同：0
> 
> 时间：2012-07-26T08:22:02.203
> 
> 标签：android, xml

我有以下 XML 代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@android:id/tabhost" >

    <LinearLayout android:orientation="vertical" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent">
        <TabWidget android:id="@android:id/tabs"
           android:layout_width="fill_parent" 
           android:layout_height="wrap_content">
        </TabWidget>
        <FrameLayout android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent">

        </FrameLayout>

    </LinearLayout>

</TabHost> 
```

错误消息：“根元素之后的文档中的标记执行良好。所有标签都已关闭，这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:28:13.257

尝试`ctrl`++`shift`到`F`您的 xml 代码，这将格式化代码并在清理项目后重试。它将起作用。

# c# - 如何登录到活动目录？

> ID：11665204
> 
> 赞同：2
> 
> 时间：2012-07-26T08:22:11.643
> 
> 标签：c#, .net-4.0, active-directory, authorization, windows-server

我有活动目录的用户名和密码，我想使用 C# 登录活动目录。如何在 Windows 窗体中执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-18T17:20:46.470

这个问题来自几年前，我希望这个答案可以帮助未来的人。这对我有用：

添加这些参考：

*   使用 System.DirectoryServices；
*   使用 System.DirectoryServices.AccountManagement；

之后，您可以在您的应用程序中使用此代码：

```
 PrincipalContext pc = new PrincipalContext(ContextType.Domain, "YOUR DOMAIN");
   bool Valid = pc.ValidateCredentials("User", "password"); 
```

**如果登录正常，名为Valid**的变量将显示一个**True**值。

欲了解更多信息，您可以访问[此页面](https://stackoverflow.com/questions/290548/validate-a-username-and-password-against-active-directory)。该页面来自这里，**stackOverFlow**，它将向您显示很多有关以下内容的信息：“使用 MS Active Directory 登录”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T08:24:27.180

# 解决方案

连接到 Active Directory 非常简单。

您必须使用该`DirectoryEntry`对象（在命名空间中`System.DirectoryServices`）。

此对象的构造函数在参数中采用三个字符串：

*   Active Directory 的路径。此路径具有以下格式：`LDAP://your-name-AD`
*   连接的用户名
*   对应的密码

# 例子

```
using System.DirectoryServices;

try
{
   DirectoryEntry Ldap = new DirectoryEntry("LDAP://your-name-AD", "Login", "Password");
}
catch(Exception Ex)
{
   Console.WriteLine(Ex.Message);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-26T08:49:00.957

你去吧。此方法`username/password`针对 Active Directory 进行验证，并且很长一段时间以来一直是我的功能工具箱的一部分。

```
//NOTE: This can be made static with no modifications
public bool ActiveDirectoryAuthenticate(string username, string password)
{
    bool result = false;
    using (DirectoryEntry _entry = new DirectoryEntry())
    {
        _entry.Username = username;
        _entry.Password = password;
        DirectorySearcher _searcher = new DirectorySearcher(_entry);
        _searcher.Filter = "(objectclass=user)";
        try
        {
            SearchResult _sr = _searcher.FindOne();
            string _name = _sr.Properties["displayname"][0].ToString();
            result = true;
        }
        catch
        { /* Error handling omitted to keep code short: remember to handle exceptions !*/ }
    }

    return result; //true = user authenticated!
} 
```

显然，执行此操作的软件必须在域内的计算机上运行（否则您将没有 Active Directory 来验证您的凭据）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-12T06:05:45.203

更简短的答案是添加**参考** **System.DirectoryServices.AccountManagement**

然后使用 **UserPrincipal.Current.Context.ValidateCredentials("username", "password");**

但我想您将需要加入您要验证的域。

# css - 如何在 Yii 框架中严格控制 CSS 文件的顺序

> ID：11665205
> 
> 赞同：6
> 
> 时间：2012-07-26T08:22:22.543
> 
> 标签：css, yii

在 Yii 中，有许多不同的方法可以让 CSS 进入你的页面。

问题是，一旦你开始使用扩展、小部件、主题等，它们都有自己的样式表（很公平），并且 CSS 被处理和插入 HTML 的顺序会根据它们是否设置在控制器、视图或布局，或者正在使用 Yii 资产管理器或 Yii 包管理器。

最近，我们的 Yii 项目被修改为使用注册在`config/main.php`中的包，方式如下：

```
'clientScript'=>array(
        'packages'=> array(
            'theme'=>array(
                'basePath'=>'yii.themes.default',
                'css'=>array('css/reset.css','css/main.css','css/form.css'),
                'js'=>array('js/lib.js'),
                'depends'=>array('jquery'),
            ),
... 
```

这导致 CSS 文件中断，因为它旨在覆盖网格视图样式，并且现在包含在 CGridView 样式表之前。

解决方案是在底部添加这些行`layouts/main.php`：

```
$path = Yii::getPathOfAlias('yii.themes.default').'/css/style.css';
$cssFile = Yii::app()->getAssetManager()->publish($path);
Yii::app()->getClientScript()->registerCssFile($cssFile); 
```

对我来说，这感觉不是一个完美的解决方案，我希望将来我们可能会在忘记我们所做的事情时遇到问题，或者我们必须做一个不同主题的类似事情，或者完全不同的项目。

当 CSS 可以从这么多不同的来源提供时，是否有更好的方法来有效地管理 CSS？

*编辑：*

*我正在考虑扩展 CClientScript 以提供“覆盖”类型的选项，您可以在其中指定一个 CSS 文件数组，您正在注册的文件应该包含在这些文件之后。不过感觉可能有点飘了。。。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T09:33:30.203

我提出了以下解决方案，使用类似于 z-index 工作方式的方法。尽管无论如何它都不是完美的。

默认情况下，样式表的优先级设置为 0，您可以使用`registerCss`and`registerCssFile`将其设置为正整数或负整数。负整数会将文件插入到 CSS 的其余部分之前，正整数会将其发送到末尾。

在`config/main.php`中，将 clientScript 设置为使用新类：

```
 'clientScript'=>array(
        'class' => 'components\ClientScript',
        ... 
```

`components/ClientScript.php`：

我正在玩弄指定注册文件之间的依赖关系而不是基于整数的优先级的想法，但没有遵循它。我暂时把这段代码留在这里，以防有人想接受它。

```
class ClientScript extends CClientScript
{

    protected $dependencies = array();
    protected $priority = array();

    public function renderHead(&$output)
    {
        $cssFilesOrdered = array();
        $currentCssFiles = $this->cssFiles;

        if (!empty($this->priority)){
            # assign 0 to anything without a specific priority
            # can't do this in the register method because not every CSS file that ends up here used it
            $cssFilesWithPrioritySet = array_keys($this->priority);
            foreach ($currentCssFiles as $path => $v){
                if (!in_array($path, $cssFilesWithPrioritySet)){
                    $this->priority[$path] = 0;
                }
            }

            asort($this->priority);
            foreach ($this->priority as $path => $id){
                $cssFilesOrdered[$path] = $currentCssFiles[$path];
                unset($currentCssFiles[$path]);
            }
            # add any remaining CSS files that didn't have an order specified
            $cssFilesOrdered += $currentCssFiles;
        }

        if (!empty($cssFilesOrdered)){
            $this->cssFiles = $cssFilesOrdered;
        }

        parent::renderHead($output);
    }

    public function registerCssFile($url, $media = '', $order = null)
    {
        $this->setOrder($url, $order);
        return parent::registerCssFile($url, $media);
    }

    public function registerCss($id, $css, $media = '', $order = null)
    {
        $this->setOrder($id, $order);
        return parent::registerCss($id, $css, $media);
    }

    private function setOrder($identifier, $order)
    {
        if (!is_null($order)){
            if (is_array($order)){
                $this->dependencies[$identifier] = $order;
            } elseif (is_numeric($order)){
                $this->priority[$identifier] = $order;
            }
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T15:53:27.303

我认为增强@bcmcfc 功能的更好方法是保持默认排序，同时确保优先排序。

我在这里修改了 renderHead() 函数。

```
public function renderHead(&$output)
{
    $cssFilesOrdered = array();
    $currentCssFiles = $this->cssFiles;
    //print_r($currentCssFiles);
    if (!empty($this->priority))
    {
        // sort priority array according to value (priority number)
        asort($this->priority);
        $tmp = array_values($this->priority);
        $startPriority = $tmp[0];
        # assign 0 to anything without a specific priority
        # can't do this in the register method because not every CSS file that ends up here used it
        $cssFilesWithPrioritySet = array_keys($this->priority);
        $startCounter = $startPriority-count($currentCssFiles);
        foreach ($currentCssFiles as $path => $v)
        {
            if (!in_array($path, $cssFilesWithPrioritySet))
            {
                $this->priority[$path] = $startCounter++;
            }
        }

        asort($this->priority);
        foreach ($this->priority as $path => $id)
        {
            $cssFilesOrdered[$path] = $currentCssFiles[$path];
            unset($currentCssFiles[$path]);
        }
    }

    if (!empty($cssFilesOrdered)){
        $this->cssFiles = $cssFilesOrdered;
    }
    # add any remaining CSS files that didn't have an order specified
    $cssFilesOrdered += $currentCssFiles;
    parent::renderHead($output);
} 
```

# android - jpg文件的分辨率

> ID：11665213
> 
> 赞同：0
> 
> 时间：2012-07-26T08:22:48.610
> 
> 标签：android, bitmap, jpeg, bitmapfactory

我有一个类，在构造函数中我得到一个文件。这个文件是jpeg。如何在此类中获取此 jpeg 文件的分辨率？这是来自构造函数的一些代码：

```
public static Bitmap bitmapSizer(File file) {

        BitmapFactory.Options options = new BitmapFactory.Options();
        Bitmap bitmap = null;

        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(file.getAbsolutePath(), options);

        int imageHeight = options.outHeight;
        int imageWidth = options.outWidth;
        options.inDither = true;
        options.inPreferredConfig = Bitmap.Config.ARGB_4444;
        options.inPurgeable = true;
        options.inSampleSize=8;         
        options.inJustDecodeBounds = false; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:25:58.907

您需要移动几行代码。
首先，把`Options`对象拿起来：

```
 BitmapFactory.Options options = new BitmapFactory.Options();
    options.inDither = true;
    options.inPreferredConfig = Bitmap.Config.ARGB_4444;
    options.inPurgeable = true;
    options.inSampleSize=8;         
    options.inJustDecodeBounds = true; 
```

注意`options.inJustDecodeBounds =`**true** 这只会读取 jpg 的标题，而不是整个图像。
接下来，解码您的文件：

```
 Bitmap bitmap = null;
    BitmapFactory.decodeFile(file.getAbsolutePath(), options); 
```

解码后，您将获得以下结果：

```
 int imageHeight = options.outHeight;
    int imageWidth = options.outWidth; 
```

# google-drive-api - 是否可以通过 Google Drive API 公开共享文件

> ID：11665215
> 
> 赞同：15
> 
> 时间：2012-07-26T08:22:53.847
> 
> 标签：google-drive-api

我正在研究`Google drive application`允许用户创建必须公开的文件。

我可以看到一些示例，我们可以通过 API 在 Google 驱动器中创建文件。

但是，在创建文件时，是否可以将文件共享为`public`.

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-26T12:43:38.890

您可以使用权限提要设置文件的访问控制列表。文档位于此处：

[https://developers.google.com/drive/v2/reference/permissions](https://developers.google.com/drive/v2/reference/permissions)

要公开文件，您需要将角色分配给`reader`类型`anyone`

然后，如果您想将链接分享给人们，您可以`webContentLink`在 API 中获取文件元数据中返回的 URL，它将允许任何用户下载该文件。您还可以使用它将共享文件嵌入 HTML（例如`<img>`标签中的图像）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-01T06:03:05.990

我认为根据 Nivco 提供的答案显示代码示例会很好。使用 Javascript 你可以这样做：

```
var google = require('googleapis');
var _ = require('lodash-node/compat');
var Q = require('q');   
var OAuth2 = google.auth.OAuth2; 

var CLIENT_ID = '...';
var CLIENT_SECRET = '...';
var REDIRECT_URL = '...';

var shareFile = function (fileName) {
  var deferred = Q.defer();
  var drive = google.drive('v2');
  var auth = new OAuth2(CLIENT_ID, CLIENT_SECRET, REDIRECT_URL);

  drive.files.list({auth: auth}, function (err, res) {
    var foundFile = _.first(_.filter(res.items, {title: fileName, "explicitlyTrashed": false}));

    if (!foundFile) {
        deferred.reject('File ' + fileName + ' has not been found.');
        return;
    }

    drive.permissions.list({fileId: foundFile.id, auth: auth}, function (err, res) {

        if (_.isEmpty(_.find(res.items, 'role', 'reader'))) {
            var body = {
                'value': 'default',
                'type': 'anyone',
                'role': 'reader'
            };

            drive.permissions.insert({
                fileId: foundFile.id,
                resource: body,
                auth: auth
            }, function (err, res, body) {
                deferred.resolve(body);
            });
        }
    });
});
return deferred.promise; 
```

};

# scala - 用于处理大量事件的 Akka 模式

> ID：11665217
> 
> 赞同：1
> 
> 时间：2012-07-26T08:23:05.857
> 
> 标签：scala, design-patterns, actor, akka

我正在寻找使用 Akka 来解决以下问题的设计模式。假设我有一个包含大量记录事件的大文件。我启动一个处理文件的actor（Master），并为每个事件向actor池发送一条消息以进行处理（解析、转换等......），然后它们将结果发送回Master以序列化最终结果每个事件的。处理事件独立于其他事件。

所以我的第一个想法是使用`Future.traverse`呼叫并等待整个列表。但我担心性能，因为处理事件是一项细粒度的任务，创建大的 Futures 列表可能会占用内存并消耗性能。

是否有任何模式可以让我使用`?`运算符（即开即忘）但同时确认所有事件已处理的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:22:48.913

我会让处理器参与者向主机请求批量工作，并在完成后确认每批工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:31:10.747

在处理 Actor 时，我喜欢推理它们的实现方式：

*   Actors 处理来自他们邮箱的消息
*   邮箱是一个fifo队列
*   保证一个actor在处理下一条消息之前已经完成了一条消息的处理。

我想到了两个解决方案，绝对不是唯一的一个：

*   在发送方记录您路由了多少条消息，并让处理器参与者在完成后发送确认。也许 FMS 会在这方面为您提供帮助。

*   分层组织消息的路由和“确认”机制。这在我看来是最优雅的模式。

# c++ - 我应该更喜欢数组而不是向量来提高性能吗？

> ID：11665218
> 
> 赞同：5
> 
> 时间：2012-07-26T08:23:05.807
> 
> 标签：c++, arrays, performance, stl, vector

> **可能重复：**
> [std::vector 比普通数组慢得多？](https://stackoverflow.com/questions/3664272/stdvector-is-so-much-slower-than-plain-arrays)

看起来向量是在堆而不是堆栈上分配的。

那么当性能成为一个严重问题时，我是否应该考虑使用数组来替换向量（如果可能）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-26T08:26:30.733

不。（为了满足评论学究，不，你不应该“更喜欢”数组而不是向量来提高性能，但可以肯定的是，对于下面概述的特定情况，你应该“考虑”使用数组来替换向量）

当性能成为一个严重问题时，*您应该根据实际数据进行优化，而不是二手故事、道听途说和迷信*。

如果用数组替换你的向量给你一个可衡量的（和必要的）加速，那么你应该这样做。

但请注意，您只能在以下情况下使用堆栈分配的数组：

*   大小在编译时已知，并且
*   尺寸足够小，可以放在堆栈上而不会引起问题。
*   大小必须是固定的，而不是动态的。

在大多数情况下，这些条件都不成立，然后无论如何都必须在堆上分配数组，然后您就失去了数组所具有的一个优势。

但是*，如果*所有这些条件都成立*，并且*您可以看到这种堆分配实际上会明显损害您的性能，那么是的，切换到数组（或 a `std::array`）是有意义的。

否则？不...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T08:30:33.583

如果在编码时预先知道元素的数量，那么是的，您应该更喜欢使用数组。C++11 提供了这个：

```
std::array<int,10000> arr; 
```

但避免使用这个：

```
int arr[10000]; //avoid it in C++11 (strictly), and possibly in C++03 also! 
```

在 C++03 中，`std::vector`在大多数情况下，您仍然应该更喜欢（除非实验表明它很慢）：

```
std::vector<int> arr;
arr.reserve(10000); //it is good if you know the (min) number of items! 
```

在大多数情况下，当向量*看起来*很慢时，这是因为程序员没有利用`reserve()`函数。相反，当向量调整自身大小时，它们依赖于*重复的分配-释放-复制策略。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:27:13.933

除非您在一个特殊的系统上运行（即内存分配器速度较慢的系统），否则不太可能产生显着差异。我建议您更喜欢使用 std::vector ，因为它比普通数组更好的类型安全性。

# c# - Ajax 脚本管理器阻止了 jquery？

> ID：11665222
> 
> 赞同：1
> 
> 时间：2012-07-26T08:23:25.670
> 
> 标签：c#, javascript, asp.net, asp.net-ajax, scriptmanager

我创建了一个简单的页面来测试它。

我的页面将有一个文本框和一个按钮。如果单击按钮，服务器端的按钮单击事件将在文本框中写入一些文本。

然后我有一个 jQuery 函数来检测文本框的输入按键。

如果它检测到输入键，它将单击该按钮。

标记：

```
<asp:TextBox ID="txtTest" runat="server"></asp:TextBox>
<asp:Button ID="btnClick" runat="server" Text="test" onclick="btnClick_Click" />
<script type="text/javascript">
    $('#<%=txtTest.ClientID%>').keypress(function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13) { //Enter keycode
            $('#<%=btnClick.ClientID%>').click();
        }
    });
</script> 
```

代码隐藏：

```
protected void btnClick_Click(object sender, EventArgs e)
{
    txtTest.Text = "btnclick click event";
} 
```

它适用于每次刷新。

然后我实现了一个ScriptManager。

标记：

```
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:TextBox ID="txtTest" runat="server"></asp:TextBox>
        <asp:Button ID="btnClick" runat="server" Text="test" onclick="btnClick_Click" />
        <script type="text/javascript">
            $('#<%=txtTest.ClientID%>').keypress(function (e) {
                var code = (e.keyCode ? e.keyCode : e.which);
                if (code == 13) { //Enter keycode
                    alert('hihi');
                    $('#<%=btnClick.ClientID%>').click();
                }
            });

        </script>
    </ContentTemplate>
</asp:UpdatePanel> 
```

代码隐藏：

```
protected void btnClick_Click(object sender, EventArgs e)
{
    txtTest.Text = "btnclick click event";
} 
```

然后它只适用于第一次输入，螺母不适用于第二次输入。

有人遇到过这种问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:29:35.243

只需将此代码块放在 scriptmanager 标签之外，它就可以正常工作

```
 <script type="text/javascript">
                $('#<%=txtTest.ClientID%>').keypress(function (e) {
                    var code = (e.keyCode ? e.keyCode : e.which);
                    if (code == 13) { //Enter keycode
                        alert('hihi');
                        $('#<%=btnClick.ClientID%>').click();
                    }
                });

</script>
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
...
... 
```

**更新**

为什么您处理按键的代码不在 $(document).ready 内？

```
$(document).ready(function() {
    $('#<%=txtTest.ClientID%>').keypress(function (e) {
                        var code = (e.keyCode ? e.keyCode : e.which);
                        if (code == 13) { //Enter keycode
                            alert('hihi');
                            $('#<%=btnClick.ClientID%>').click();
                        }
                    });
 }); 
```

请参阅以下[线程](http://forums.asp.net/t/1661979.aspx/1?jquery%20event%20working%20in%20first%20time%20only)，其中提到的问题类似。但解决方案不是把它放在document.Ready中，而是每次通过调用RegisterStartupScript来绑定点击的脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:30:53.937

我会在这里做一些事情。首先，我会将您的 JS 代码放在一个单独的文件中，然后`<script>`从 UpdatePanel 中删除标签。（但是，如果您将以下脚本直接放在`<head>`标签中，这也将起作用）。这意味着您不能使用 ClientID 属性 - 我们将使用 jQuery 选择器对其进行排序。此外，**您需要在 document ready 和 partial postback 上绑定事件**。所以在你的JS中......

```
//define the bind function
function bindEvents(){
    //the selector '[ID$="txtTest"]' will select any element with ID ending
    //txtTest - make sure there's only 1!!

    $('[ID$="txtTest"]').keypress(function (e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            if (code == 13) { //Enter keycode
                alert('hihi');
                $('[ID$="txtTest"]').click();
            }
    });  
}

//bind on doc ready
$(function(){
    bindEvents();

    //and bind on partial postback too  
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(bindEvents()); 
}); 
```

# mysql - 如何遍历数据库 UserId - X 中的所有表格。

> ID：11665223
> 
> 赞同：0
> 
> 时间：2012-07-26T08:23:26.573
> 
> 标签：mysql, search, procedure

我如何浏览数据库中的所有表，因为我想找到特定数量的 UserId 其中 X - 它是一个数字 UserId 示例 X = 2 所以我必须找到 UserId = 2

我使用 MySQL，我想创建过程

我的数据库架构：

```
Something ( ... ) --> without UserId
Something1 (... , UserId,...)
Something2 (... , UserId,...)
Something3 (... , UserId,...)
Cat
Cat1
Cat2
Cat3
Cat4
etc.... 
```

没有数字的表格可能我们称为 PARENT 和带有数字示例的表格 (Cat1, Cat2... Cat3..) 我们称为 CHILDREN>

当我们在一张表中获得 20000 条记录时，将动态创建 CHILDREN

我想要调用程序示例：CALL SearchUser(X) where X - number of UserId

如果有人有脚本，我将不胜感激，或者如果有人也帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:03:12.937

不确定这是否有效。请试一试。数据库名称在这里是硬编码的`WHERE TABLE_SCHEMA IN ('test')`

```
## Procedure for search in all fields of all databases
DELIMITER $$
#Script to loop through all tables using Information_Schema
DROP PROCEDURE IF EXISTS get_table $$
CREATE PROCEDURE get_table(in_search varchar(50),in_column_name varchar(50))
READS SQL DATA
BEGIN
DECLARE trunc_cmd VARCHAR(50);
DECLARE search_string VARCHAR(250);
DECLARE db,tbl,clmn CHAR(50);
DECLARE done INT DEFAULT 0;
DECLARE COUNTER INT;
DECLARE table_cur CURSOR FOR
SELECT concat('SELECT COUNT(*) INTO @CNT_VALUE FROM `',table_schema,'`.`',table_name,'` WHERE `', in_column_name,'` = "',in_search,'"') ,table_schema,table_name,column_name FROM information_schema.COLUMNS WHERE TABLE_SCHEMA IN ('test') and column_name=in_column_name ;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done=1;
#Truncating table for refill the data for new search.
PREPARE trunc_cmd FROM "TRUNCATE TABLE temp_details;";
EXECUTE trunc_cmd ; 
OPEN table_cur;
table_loop:LOOP
FETCH table_cur INTO search_string,db,tbl,clmn;
#Executing the search
SET @search_string = search_string;
SELECT  search_string;
PREPARE search_string FROM @search_string;
EXECUTE search_string;
SET COUNTER = @CNT_VALUE;
SELECT COUNTER;
IF COUNTER>0 THEN
# Inserting required results from search to table
INSERT INTO temp_details VALUES(db,tbl,clmn);
END IF;
IF done=1 THEN
LEAVE table_loop;
END IF;
END LOOP;
CLOSE table_cur;

END $$
DELIMITER ; 
```

临时表结构：

```
CREATE TABLE `temp_details` ( 
`t_schema` varchar(45) NOT NULL,
`t_table` varchar(45) NOT NULL,
`t_field` varchar(45) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

调用程序：

```
call get_table('2','userID');
select * from temp_details; 
```

# objective-c - Objective-C / iOS 中的富文本编辑器

> ID：11665224
> 
> 赞同：0
> 
> 时间：2012-07-26T08:23:33.530
> 
> 标签：objective-c, ios, editor, rtf

我目前正在使用 UIWebView 作为 RTF 编辑器，但该方法似乎有点“滞后”并且不是很稳定。有没有更好的方法在 iOS 中实现 RTF 编辑器？那里有图书馆吗？我在google上搜索过，但没有找到很多...

谢谢，卢卡斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:28:40.953

使用 CoreText 或等待 iOS6，这将在几乎所有 UIKit 控件中具有属性字符串

# android - onCreate 中的 RelativeLayout 高度为 0

> ID：11665226
> 
> 赞同：0
> 
> 时间：2012-07-26T08:23:45.883
> 
> 标签：android, android-layout

我正在尝试根据（屏幕高度 - 我的布局高度）/list.size 动态调整行的高度。

不幸的是，在 onCreate 方法中，布局高度返回 null （当我在点击监听器中调用它时不是这样）。

还有另一种方法可以调用它吗？我想要运行时的高度和宽度。

帮我....

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:34:52.620

在 onCreate 视图中没有放置，所以它总是返回 null，你需要设置 GlobalLayoutListener，然后在监听器的 onGlobalLayout 方法中你可以获取视图/布局的实际尺寸。

```
ViewTreeObserver observer = view.getViewTreeObserver();
observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        //in here, place the code that requires you to know the dimensions.

         //this will be called as the layout is finished, prior to displaying.
    }
} 
```

# java - 更改 Android 密钥库密码时出现奇怪的结果

> ID：11665228
> 
> 赞同：1
> 
> 时间：2012-07-26T08:23:46.727
> 
> 标签：java, android, eclipse, adt

`123`当我更改为`abc`使用命令时，我的 Android 密钥库的原始密码是

```
keytool -storepasswd -keystore my.keystore 
```

现在当我使用 Eclipse 导出应用程序时，我发现要输入的第一个密码是`abc`，但要输入的第二个密码仍然是`123`

这是正常的结果吗？

那么如何更改两个密码？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:56:32.310

第二个密码保护密钥库中的私钥。您应该可以使用命令更改它

```
keytool -keypasswd -alias <myKeyAlias> -keystore my.keystore 
```

替换为 Eclipse 中显示的键名。

# javascript - 一两行后的 CSS 单词省略号（'...'）

> ID：11665229
> 
> 赞同：16
> 
> 时间：2012-07-26T08:23:47.370
> 
> 标签：javascript, html, css, ellipsis

我正在尝试使用 CSS 在 JavaScript 中创建自动换行，条件是：

如果 DIV 包含一个*很*长的单词，例如*"asdasfljashglajksgkjasghklajsghl"*，我想显示：

```
 |asdasfljashglajk...| 
```

如果 DIV 包含一个很长的句子，例如*“如果我每次被告知我不能得到一角钱”*，我想显示：

```
 |if i had a dime for|
     |everytime i was... | 
```

我使用 HTML、CSS、JavaScript。我不能使用 jQuery。

请让我知道是否可能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-12T13:54:55.363

发现这个：

[http://codepen.io/martinwolf/pen/qlFdp](http://codepen.io/martinwolf/pen/qlFdp)

看起来`-webkit-line-clamp`在某些浏览器中有效。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-07T13:58:33.377

我知道我对 anwser 有点晚了，但我只是写了一段代码来帮助它：

```
 if ($('your selector').height() > 50) {
        var words = $('your selector').html().split(/\s+/);
        words.push('...');

        do {
            words.splice(-2, 1);
            $('your selector').html( words.join(' ') );
        } while($('your selector').height() > 50);
    } 
```

当然，您应该将 jQuery 选择器保存在一个变量中，这样您就不会每次都查询 DOM。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-26T08:31:22.133

为此，您可以使用`text-overflow: ellipsis;`属性。像这样写

```
white-space: nowrap;
text-overflow: ellipsis; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-26T08:37:26.220

可悲的是，仅使用 CSS 我认为您做不到。

[http://jsfiddle.net/TVVHs/](http://jsfiddle.net/TVVHs/)

`text-overflow: ellipsis;` *仅*适用于`white-space: nowrap;`防止多行的情况。

可能有一个疯狂的 javascript 解决方案，它会一直砍掉单词，直到元素高度可以接受，但这会很慢，而且非常讨厌。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-18T08:19:00.710

在摆弄 CSS 以提出“次佳”的纯 CSS 解决方案后，我想出了这个：

```
p.excerpt { position: relative; height: 63px; line-height: 21px; overflow-y: hidden; }
p.excerpt:after { content: '...'; position: absolute; right: 0; bottom: 0; } 
```

这总是假设您至少有 3 行文本，并且存在一些问题。如果要换行到第 4 行的最后一个单词很长，则在最后一个单词和省略号之间会有一个异常大的空格。同样，如果它是非常*非常*小的东西，例如“a”，它可能会与最后一个单词重叠。

您可以添加另一个容器并将省略号放在`p`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-05-07T14:14:18.900

当您被允许使用 jQuery 时，您可以在[此链接](http://dotdotdot.frebsite.nl/)上看到 dotdotdot 插件。使用起来非常简单，而且效果很好！

目前我可以建议你看看这个[小提琴](http://jsfiddle.net/k5VET/)！谁来工作`text-overflow: ellipsis`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-18T15:08:19.313

希望这能回答你的问题

```
 @mixin multilineEllipsis(
  $lines-to-show: 2,
  $width: 100%,
  $font-size: $fontSize-base,
  $line-height: 1.6) {

  display: block; /* Fallback for non-webkit */
  display: -webkit-box;
  max-width: $width;
  height: $font-size * $line-height * $lines-to-show; /* Fallback for non-webkit */
  font-size: $font-size;
  -webkit-line-clamp: $lines-to-show;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
} 
```

[http://codepen.io/martinwolf/pen/qlFdp](http://codepen.io/martinwolf/pen/qlFdp) [http://caniuse.com/#search=-webkit-line-clamp](http://caniuse.com/#search=-webkit-line-clamp)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-22T17:20:56.583

如果你能保证内容会溢出，这就是我想出的解决方案。它适用于我的网站，我想保持简单。

html:

```
<p class="snippet">
   [content]
</p> 
```

CSS：

```
.snippet {
    position: relative;
    height: 40px; // for 2 lines
    font-size: 14px; // standard site text-size
    line-height: 1.42857; // standard site line-height
    overflow: hidden;
    margin-bottom: 0;
}
.news-insights .snippet:after {
    content: "\02026";
    position: absolute;
    top: 19px;
    right: 0;
    padding-left: 5px;
    background: linear-gradient(to right, rgba(255, 255, 255, 0), white 20%, white); // use vendor prefixes for production code
} 
```

然后，您可以使用填充和背景渐变来获得更时尚的演示。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-09-26T22:58:16.217

当容器的宽度固定和百分比时，显示省略号需要不同的处理。

*   容器宽度固定时

```
 .nooverflow{
        display: inline-block;
        overflow: hidden;
        overflow-wrap: normal;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
```

*   当容器的宽度为百分比或自动时，在这种情况下，在该容器中定义另一个标签来呈现文本并将宽度指定为 0，将最小宽度指定为 100%，这样它将采用容器的宽度并显示省略号。下面是要使用的 LESS 类：

```
 .nooverflow{
        display: inline-block;
        overflow: hidden!important;
        overflow-wrap: normal;
        text-overflow: ellipsis;
        white-space: nowrap!important;
        width: 0;
        min-width: 100%;
    }
```

# android - 为什么 logcat 中出现 super.requestRectangleOnScreen 错误？

> ID：11665232
> 
> 赞同：2
> 
> 时间：2012-07-26T08:23:54.107
> 
> 标签：android, webview

在 facebook 对话框 /webview 中输入密码输入文本字段时，在 logcat 中看到此错误。似乎没有什么不好的事情发生，但这意味着什么？

在每个字符上显示：

```
E/webtextview(27952): ....Doing a super.requestRectangleOnScreen.... 
```

# android - Android默认浏览器上的GWT弹出滚动问题

> ID：11665235
> 
> 赞同：2
> 
> 时间：2012-07-26T08:24:07.137
> 
> 标签：android, gwt, popup, iscroll, mgwt

对于我之前遇到的每个问题，我都能在这里找到解决方案，但是这个问题真的让我很烦。
我有带有 gwt-maps 库的 GWT 应用程序。然后单击一个标记，弹出信息窗口将出现，其中包含一个滚动面板。所以一切都在 PC 浏览器、iOS safary 和 chrome、android 浏览器上完美运行。唯一的问题是 Galaxy Tab 10.1 GT-P7501 (os v3.2) 默认浏览器。我无法在其中滚动那个弹出窗口。
我发现这个滚动问题出现在所有 android 设备上，但现在它以某种方式解决了。我尝试使用：

1.  -webkit-transform: translateZ(0px);
2.  -webkit-transform: translate3d(0,0,0);

我还发现 iScroll gwt 包装器 - [http://code.google.com/p/gwt-iscroll/](http://code.google.com/p/gwt-iscroll/)它也不起作用，但我不确定我是否正确使用它。
那么有人知道如何解决吗？

**附加**
找到了一个带有可滚动弹出窗口的示例，该示例适用于该 Galaxy 选项卡，但我再次不知道如何将其集成到 GWT 应用程序。[http://jbkflex.wordpress.com/2012/04/21/a-look-at-iscroll-native-way-of-scrolling-content-in-mobile-webkit/](http://jbkflex.wordpress.com/2012/04/21/a-look-at-iscroll-native-way-of-scrolling-content-in-mobile-webkit/)
任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:27:48.010

GWT 有一个移动库（[http://www-m-gwt.com/](http://www-m-gwt.com/)），它也解决了移动设备上的滚动问题。你可能想看看它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:56:07.647

因此，m-gwt 根本无法使用非 webkit android 浏览器加载我的应用程序。

经过长时间的搜索，我设法找到了 src ，它帮助我在 android 3 默认浏览器上实现了弹出滚动。

该链接是[http://code.google.com/p/google-web-toolkit/source/browse/branches/2.1/bikeshed/src/com/google/gwt/mobile/client/?r=8145](http://code.google.com/p/google-web-toolkit/source/browse/branches/2.1/bikeshed/src/com/google/gwt/mobile/client/?r=8145)

不客气。

# android - 如何在 Android 主屏幕上的我的应用程序图标上显示通知计数

> ID：11665237
> 
> 赞同：5
> 
> 时间：2012-07-26T08:24:10.237
> 
> 标签：android, android-widget, android-manifest

问题是 Android 在系统范围的通知栏中放置了新的警报，而 iPhone 则直接在特定的应用程序图标上放置了通知。

所以我要做的是，我必须显示我的应用程序图标以及从 C2dm 接收器收到的通知计数，就像它在 iPhone 中显示的一样，红色椭圆显示计数。

我已经提到了这个 ==[链接 1](https://stackoverflow.com/questions/1103027/how-to-change-an-application-icon-programmatically-in-android)和这个链接 ==[链接 2](https://stackoverflow.com/questions/5569695/android-is-it-possible-to-update-a-imageview-imagebutton-with-a-number-to-show)来做这件事，但还没有成功。

请提供一些指导方针。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T08:44:41.497

尽管有可能做这样的事情，但**绝对不建议**尝试更改应用程序的图标。此行为源自 iOS，根本不在 Android 上使用。

您可以创建一个显示未读计数的小部件，并在单击小部件时将用户带到您的应用程序。Google Reader Android 应用程序提供了一个很好的例子：

![在此处输入图像描述](../Images/b9322148b632ca00f3c2ffe53101e7e0.png)

# cakephp - cakePHP HABTM 不保存

> ID：11665239
> 
> 赞同：0
> 
> 时间：2012-07-26T08:24:13.420
> 
> 标签：cakephp, cakephp-2.0, cakephp-model

我已经查看了我能找到的关于这个主题的所有线程，但没有解决我的问题。

我有一个 'customers' 表和一个 'employees' 表，它们应该通过 'customers_employees' 表连接。

在我的表格中，我可以选择员工，但是当我想保存数据时，他只保存“创建”和“修改”条目，而不是键。

员工有一个字符串 id，它是 CHAR(36)。

这是我在“员工”模型中的条目：

```
public $hasAndBelongsToMany = array(
    'Customer' => array(
        'className' => 'Customer',
        'joinTable' => 'customers_employees',
        'foreignKey' => 'employee_id',
        'associationForeignKey' => 'customer_id',
        'unique' => 'keepExisting',
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    )
); 
```

这是我在“客户”模型中的条目：

```
public $hasAndBelongsToMany = array(
    'Employee' => array(
        'className' => 'Employee',
        'joinTable' => 'customers_employees',
        'foreignKey' => 'customer_id',
        'associationForeignKey' => 'employee_id',
        'unique' => 'keepExisting',
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    )
); 
```

请求数组如下所示：

```
Array
(
    [Customer] => Array
        (
            [id] => 10000
            [name] => XXXXX
            [name2] => XXXXX
            [address] => XXXXX
            [address2] => 
            [country_code] => 
            [plz] => 12345
            [place] => XXXXX
            [tel] => XXXXX
            [fax] => XXXX
            [mail] => XXXXX
            [customer_price_group] => XX
            [allow_discount_line] => XX
            [payment_code] => 0
            [terms_of_delivery_id] => XXX
            [closed] =>  
            [uSt_IdNr] => DEXXXXXXXXX
            [information] => 
            [conditions] => XX
        )

    [Employee] => Array
    (
        [Employee] => Array
            (
                [0] => EMPXXX
            )

    )

) 
```

这里是对 customers_employees 的 INSERT 查询：

```
INSERT INTO `appsbf_db6`.`customers_employees` (`modified`, `created`) VALUES    ('2012-07-26 06:40:22', '2012-07-26 06:40:22') 
```

我的错误在哪里？

谢谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:49:57.543

请求数组中的员工数据应如下所示：

```
[Employee] => Array
(
    [0] => Array
        (
            [Employee] => Array
                        (
                          [first_name] = ADSF
                          .........
                          ......... 
                        )
        )

    [1] => Array
        (
            [Employee] => Array
                        (
                          [first_name] = wersdf
                          .........
                          ......... 
                        )
        )

) 
```

在您的视图中，使用以下表单元素：

```
 $this->Form->input('Employee.0.FirstName', array(........... 
```

希望它对你有用。

# android - 安卓新拨出电话

> ID：11665243
> 
> 赞同：3
> 
> 时间：2012-07-26T08:24:37.543
> 
> 标签：android

> **可能重复：**
> [如何确定广播意图的发送者](https://stackoverflow.com/questions/3755896/how-to-determine-the-sender-of-broadcast-intent)

我已经应用了新的拨出电话广播接收器。它工作正常。

但我想知道从哪个应用程序用户拨打了电话。

即来自默认拨号器或谷歌语音应用程序？

我怎么知道这个？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:29:33.713

我的第一次尝试是获取广播源或发送广播的意图。然而，Android 没有提供一种方法来了解这一点，他们甚至没有强调这一点，因为通常广播的内容对用户来说是有意义的。

如果是您自己的应用程序发送广播，那么正如迈克尔建议的那样，这将非常容易。您将添加一个额外的内容，将您的广播源指示给接收器。但是，您可以从 OUTGOING_CALL 意图中获得的唯一额外信息是呼叫的号码。

不过，我有一个解决方案，但不能保证有效，而且纯粹是理论上的。您在这里需要自担风险。

这个想法是检查您的接收器中最近使用的应用程序，并假设呼叫是通过 Google Voice 完成的，如果它是最近使用的应用程序之一。这是因为我们希望用户在拨打电话并且您的接收者截获该电话后立即在 Google Voice 上处于活动状态。

所以在你的接收器中，你可以这样做：

```
ActivityManager m = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
RecentTaskInfo task = m.getRecentTasks(3,0).get(0);
String nameofrecentlyusedapp = task.ComponentName.toString(); 
```

检查最近使用的应用程序，甚至使用 get(1) 和 get(2) 读取两个最近的应用程序以提供更大的灵活性。

试一试，让我们知道它是否有效。

# javascript - 使用一个倒计时脚本进行多个倒计时

> ID：11665244
> 
> 赞同：0
> 
> 时间：2012-07-26T08:24:49.843
> 
> 标签：javascript, forms, countdown

我想使用这样的倒计时脚本

```
 var montharray=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec")

function countdown(yr,m,d,idCountdown){
    var theyear=yr;
    var themonth=m;
    var theday=d;
    var today=new Date();
    var todayy=today.getYear();
    if (todayy < 1000)
        todayy+=1900
    var todaym=today.getMonth();
    var todayd=today.getDate();
    var todayh=today.getHours();
    var todaymin=today.getMinutes();
    var todaysec=today.getSeconds();
    var todaystring=montharray[todaym]+" "+todayd+", "+todayy+" "+todayh+":"+todaymin+":"+todaysec;
    var futurestring=montharray[m-1]+" "+d+", "+yr;
    var dd=Date.parse(futurestring)-Date.parse(todaystring);
    var dday=Math.floor(dd/(60*60*1000*24)*1);
    var dhour=Math.floor((dd%(60*60*1000*24))/(60*60*1000)*1);
    var dmin=Math.floor(((dd%(60*60*1000*24))%(60*60*1000))/(60*1000)*1);
    var dsec=Math.floor((((dd%(60*60*1000*24))%(60*60*1000))%(60*1000))/1000*1);
    var dag = "dagen";

    if(dday==0&&dhour==0&&dmin==0&&dsec==1){
        document.getElementById(idCountdown).value=current;
        return;
    }
    else if(dday<=1) {
        dag = 'dag';
    }
    document.getElementById(idCountdown).value=dday+ ' ' + dag + ' ' +dhour+" uur "+dmin+" min "+dsec+" sec";
    setTimeout(function(){countdown(theyear,themonth,theday,idCountdown);}, 1000);
} 
```

在我的 html 页面中，我将有一个这样的文本字段

```
 <input name="aktie1" type="text" class="countdownTekst" size="27" readonly="readonly">
 <input name="aktie2" type="text" class="countdownTekst" size="27" readonly="readonly"> 
```

然后我用它来使用该功能

```
countdown(2012,7,30, 'aktie1') 
```

最后一个是文本字段的 ID。但是当我这样做时，我会得到一个错误

```
 document.forms.count.idCountdown.value is undefined 
```

如何在该函数中获取该文本字段的 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:29:42.473

您需要像这样访问输入：`document.forms.count[idCountdown].value`

编辑：这个小提琴正在工作[http://jsfiddle.net/Fy2FM/4/](http://jsfiddle.net/Fy2FM/4/)。更大的问题是你没有用 声明变量`var yourvar`，这使得变量成为全局对象的一部分。因此，您在两个倒计时中总是看到相同的，因为实际上您访问的是相同的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T16:36:13.120

在此脚本中添加特定时间，例如：3: *44*

```
<script language="javascript">countdown(2016,6,20,15:44 'aktie1')</script> 
```

# wpf - 将 WPF 控件拖入桌面以创建新窗口

> ID：11665248
> 
> 赞同：1
> 
> 时间：2012-07-26T08:25:10.930
> 
> 标签：wpf, drag-and-drop

在我的应用程序中，我想将一个特定的用户控件拖到桌面上，该控件创建一个带有拖放控件的新窗口（类似于 Visual Studio 2010（使用 wpf 实现）选项卡项或谷歌浏览器选项卡）。据我所知，我们只能将拖放文件对象拖放到桌面而不是用户控件。有什么办法可以做到这一点？是否有任何控制可用于此目的？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:54:48.290

我不得不做类似的事情。为了完成这项工作，我所做的是在鼠标离开原始窗口时创建一个新窗口，而不是等到释放鼠标按钮。

# json - 如何在 C# 中反序列化 JSON？

> ID：11665252
> 
> 赞同：1
> 
> 时间：2012-07-26T08:25:29.020
> 
> 标签：json, c#-4.0, deserialization

有人可以帮助我以正确的方式以这种格式反序列化 json：

```
[
    {person: {name: "James", age:26}},
    {person: {name: "Mary", age:36}},
    {person: {name: "Kofi", age:46}}
] 
```

我正在使用的代码如下：

```
WebRequest request = WebRequest.Create("url");
WebResponse response = request.GetResponse();

string json;

using (var sr = new StreamReader(response.GetResponseStream()))
{
    json = sr.ReadToEnd();
}

var serializer = new JavaScriptSerializer();

var persons= serializer.Deserialize<List<response>>(json);

foreach (var item in persons)
{
    Console.Write("name:" + item.name + " and age: " + item.age);
} 
```

我映射到的类如下：

```
public class person
{
    public string name{get;set;}
    public int age{get; set;}
}

public class response
{
   public person person {get;set;}
} 
```

运行此代码时，我不断收到 name 和 age 属性的 null 和空字符串。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T08:56:58.053

也可以使用内置的[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer%28v=vs.95%29.aspx)类。参见示例：

```
WebRequest request = WebRequest.Create("url");
WebResponse response = request.GetResponse();

using (Stream stream = response.GetResponseStream())
{
   Type serializationTargetType = typeof(List<person>);
   DataContractJsonSerializer jsonSerializer = new DataContractJsonSerializer(serializationTargetType);

   List<person> jsonDeserialized = (List<person>)jsonSerializer.ReadObject(stream);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T08:38:44.047

# 解决方案

我的解决方案非常简单，但您必须安装：

*   [NuGet 包管理器](http://visualstudiogallery.msdn.microsoft.com/27077b70-9dad-4c64-adcf-c7cf6bc9970c/)
*   [牛顿软件的 JSON.NET](http://nuget.org/packages/newtonsoft.json)

![nuget](../Images/cd733a23315f7b99a94c8258ed6f89b4.png) ![json](../Images/4024dd353a21ec254ada0c3a154b7d9a.png)

# 例子

```
using Newtonsoft.Json;

var url = "http://your-url";
var json = JsonConvert.DeserializeObject<Person[]>(new WebClient().DownloadString(url));

List<Person> users = new List<Person>();

foreach (var user in json)
{
    users.Add(new Person()
    {
        name = user.name,
        age = user.age
    });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T09:26:15.853

您可以定义将反映您的 JSON 结构的模型：

```
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
}

public class Row
{
    public Person Person { get; set; }
} 
```

然后反序列化为行数组：

```
var serializer = new JavaScriptSerializer();
var rows = serializer.Deserialize<Row[]>(json);
foreach (var row in rows)
{
    Console.Write("name: {0} and age: {1}", row.Person.Name, row.Person.Age);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T09:32:37.090

我必须在 foreach 循环中调用 item.person.name 和 item.person.age 并确保 person 类中的所有属性都是字符串类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T09:13:50.830

如果您需要反序列化来自 Web 服务器的响应，我会使用一些框架来完成所有这些工作。

我用过[http://restsharp.org/](http://restsharp.org/)，效果很好。

# xsl-fo - 如何为 fo:external graphics xsl 提供动态路径

> ID：11665266
> 
> 赞同：7
> 
> 时间：2012-07-26T08:26:12.957
> 
> 标签：xsl-fo

我为 sp_sign 获得的值（如下所示）我想将其用作 fo:external graphics 的 src 。我尝试了很多东西仍然没有运气请帮忙。

```
 <xsl:for-each select="//**sp_sign**">
    <xsl:value-of select="**@value**" /> 
```

//

```
<xsl:variable name="src" select="//sp_sign" />
<fo:external-graphic baseline-shift="super" **src="${src}"** content-height="80px" content-width="80px"/>
</fo:block> 
```

提前致谢 问候， Manik Vashisht

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T13:32:09.060

我通常使用 xsl:attribute 标签给出 src 属性

```
<fo:external-graphic>
      <xsl:attribute name="src">
             <xsl:value-of select="$src" />
       </xsl:attribute>
</fo:external-graphic> 
```

src 应如下所示： url('path/to/image')

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-10T20:42:15.820

通常，您也可以像这样添加图像文件。其中LOGO是XML值，使用apache fop 2.1

```
<xsl:variable name="logo" select="LOGO"/>
<fo:block>
  <fo:external-graphic src="file:///{$logo}" />
</fo:block> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-28T14:26:32.333

只需在大括号之间添加变量！

```
<xsl:variable name="logo" select="LOGO"/>
<fo:block>
  <fo:external-graphic src="{$logo}" />
</fo:block> 
```

结果将是：

```
<fo:external-graphic src="https://ibb.co/kqSQ9z3"/> 
```

# struts - 在struts中使用arraylist

> ID：11665269
> 
> 赞同：0
> 
> 时间：2012-07-26T08:26:31.717
> 
> 标签：struts

我有一组按年份的文本字段，比如今年，上一年，明年在 jsp 中。我需要获取这些值并通过操作类传递值并在另一个 JSP 中显示任何人都可以告诉我如何做并给我示例代码。

文本框就像下面的 senario

```
field name      Previous year   current year    next year
----------  -------------   ------------    ----------
A       textbox     textbox     textbox
B       textbox     textbox     textbox
C       textbox     textbox     textbox
.         .        .           .
.         .        .           .
.         .        .           .
.         .        .           . 
```

# raphael - 有没有办法在 HighChart 中构建拉斐尔的点图？

> ID：11665270
> 
> 赞同：-1
> 
> 时间：2012-07-26T08:26:32.953
> 
> 标签：raphael, highcharts

我们想像这里一样按小时和天绘制活动 - g.raphaeljs.com/dotchart.html

有没有办法在 HighChart 中做到这一点？我环顾四周，但找不到。

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T16:11:41.067

我建议使用气泡图来接近。[http://www.highcharts.com/demo/bubble](http://www.highcharts.com/demo/bubble)

虽然这个图表仍然不是你在 Raphael JS 的点图中看到的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:48:31.313

您可以使用此处演示的散点图：[http ://www.highcharts.com/demo/scatter](http://www.highcharts.com/demo/scatter)

# notepad++ - Notepad ++：如何获取当前文件的文件名/路径并将其放入记事本加号的剪贴板中

> ID：11665273
> 
> 赞同：28
> 
> 时间：2012-07-26T08:26:56.713
> 
> 标签：notepad++, clipboard

使用 VIM 编辑文件我可以轻松地复制和粘贴我正在处理的文件的名称（或完整路径）（要了解我对 VIM 的含义，您可以看到：[this question](https://stackoverflow.com/questions/916875/yank-file-name-path-of-current-buffer-in-vim "在 Vim 中 Yank 文件名/当前缓冲区的路径") or [wiki](http://vim.wikia.com/wiki/Get_the_name_of_the_current_file "获取vim缓冲区中当前文件的名称")）；

是否有使用[Notepad++](http://notepad-plus-plus.org/ "notepad++ 文本和源代码编辑器")的等效解决方案？，我该怎么做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-26T08:26:56.713

Notepad++ 没有*默认的快捷方式*来做到这一点，但是：

打开菜单：“编辑”（Alt-E）然后选择：“复制到剪贴板”，您可以选择不同的选项来复制当前文档或其部分的完全限定文件名。

请参阅[此 wiki](http://docs.notepad-plus-plus.org/index.php?title=Clipboard_Uses "广泛使用剪贴板中的文本")以获取详尽的参考。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-16T16:23:48.850

另一种解决方案是右键单击选项卡，这将让您从那里获取文件名/路径。但是，我禁用了标签，所以我必须使用 Franco 的解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-28T23:43:04.973

复制文件名或路径没有默认快捷键，但您可以创建一个。

转到设置->快捷方式映射器向下滚动并查找“剪贴板的当前文件路径”单击它旁边的空单元格并提供您选择的快捷方式。

# c# - 为什么 Enum 的 HasFlag 方法需要装箱？

> ID：11665279
> 
> 赞同：13
> 
> 时间：2012-07-26T08:27:30.697
> 
> 标签：c#, .net, enums, boxing

我正在阅读“C# via CLR”，在第 380 页，有一条说明如下：

> 注意 Enum 类定义了一个 HasFlag 方法，定义如下
> 
> `public Boolean HasFlag(Enum flag);`
> 
> 使用此方法，您可以像这样重写对 Console.WriteLine 的调用：
> 
> `Console.WriteLine("Is {0} hidden? {1}", file, attributes.HasFlag(FileAttributes.Hidden));`
> 
> 但是，出于这个原因，我建议您避免使用 HasFlag 方法：
> 
> **由于它采用 Enum 类型的参数，因此您传递给它的任何值都必须装箱，需要分配内存**。”

我无法理解这个加粗的陈述——为什么“

> 您传递给它的任何值都必须装箱

`flag`参数类型是，`Enum`是值类型，为什么会有装箱呢？“您传递给它的任何值都必须装箱”应该意味着当您将值类型传递给参数时会发生装箱`Enum flag`，对吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T17:26:57.773

值得注意的是，一个`HasFlag<T>(T thing, T flags)`比扩展方法快大约 30 倍的泛型`Enum.HasFlag`可以用大约 30 行代码编写。甚至可以做成扩展方法。不幸的是，在 C# 中不可能将这种方法限制为仅采用枚举类型的东西。因此，即使对于不适用的类型，Intellisense 也会弹出该方法。我认为如果有人使用 C# 或 vb.net 以外的其他语言编写扩展方法，则可能仅在应该弹出时才弹出它，但我对其他语言还不够熟悉，无法尝试这样的事情。

```
internal static class EnumHelper<T1>
{
    public static Func<T1, T1, bool> TestOverlapProc = initProc;
    public static bool Overlaps(SByte p1, SByte p2) { return (p1 & p2) != 0; }
    public static bool Overlaps(Byte p1, Byte p2) { return (p1 & p2) != 0; }
    public static bool Overlaps(Int16 p1, Int16 p2) { return (p1 & p2) != 0; }
    public static bool Overlaps(UInt16 p1, UInt16 p2) { return (p1 & p2) != 0; }
    public static bool Overlaps(Int32 p1, Int32 p2) { return (p1 & p2) != 0; }
    public static bool Overlaps(UInt32 p1, UInt32 p2) { return (p1 & p2) != 0; }
    public static bool Overlaps(Int64 p1, Int64 p2) { return (p1 & p2) != 0; }
    public static bool Overlaps(UInt64 p1, UInt64 p2) { return (p1 & p2) != 0; }
    public static bool initProc(T1 p1, T1 p2)
    {
        Type typ1 = typeof(T1);
        if (typ1.IsEnum) typ1 = Enum.GetUnderlyingType(typ1);
        Type[] types = { typ1, typ1 };
        var method = typeof(EnumHelper<T1>).GetMethod("Overlaps", types);
        if (method == null) method = typeof(T1).GetMethod("Overlaps", types);
        if (method == null) throw new MissingMethodException("Unknown type of enum");
        TestOverlapProc = (Func<T1, T1, bool>)Delegate.CreateDelegate(typeof(Func<T1, T1, bool>), method);
        return TestOverlapProc(p1, p2);
    }
}
static class EnumHelper
{
    public static bool Overlaps<T>(this T p1, T p2) where T : struct
    {
        return EnumHelper<T>.TestOverlapProc(p1, p2);
    }
} 
```

编辑：以前的版本被破坏了，因为它使用（或至少尝试使用）。`EnumHelper<T1`**`, T1`**`>`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T08:38:54.783

[在这种情况下，在您进入该`HasFlags`方法之前，需要两次装箱调用。一种是将值类型的方法调用解析为基类型方法，另一种是将值类型作为引用类型参数传递。如果你这样做`var type = 1.GetType();`，你可以在 IL 中看到相同的内容，文字1 在调用`int`之前被装箱。`GetType()`方法调用的装箱似乎只有在值类型定义本身中没有覆盖方法时，可以在此处阅读更多内容：[在值类型上调用方法会导致 .NET 中的装箱吗？](https://stackoverflow.com/questions/436363/does-calling-a-method-on-a-value-type-result-in-boxing-in-net)]

`HasFlags`接受一个`Enum` ***类***参数，所以这里会发生装箱。您正在尝试将什么是[值类型](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)传递给期望引用类型的东西。为了将值表示为引用，会发生装箱。

有很多编译器支持值类型及其继承（使用`Enum`/ `ValueType`），这在试图解释它时会混淆情况。人们似乎认为，因为`Enum`和`ValueType`在值类型的继承链中，拳击突然不适用了。如果这是真的，那么可以说`object`一切都继承了这一点——但我们知道这是错误的。

这并不能阻止将值类型表示为引用类型**会导致装箱的事实。**

我们可以在 IL 中证明这一点（查找`box`代码）：

```
class Program
{
    static void Main(string[] args)
    {
        var f = Fruit.Apple;
        var result = f.HasFlag(Fruit.Apple);

        Console.ReadLine();
    }
}

[Flags]
enum Fruit
{
    Apple
}

.method private hidebysig static 
    void Main (
        string[] args
    ) cil managed 
{
    // Method begins at RVA 0x2050
    // Code size 28 (0x1c)
    .maxstack 2
    .entrypoint
    .locals init (
        [0] valuetype ConsoleApplication1.Fruit f,
        [1] bool result
    )

    IL_0000: nop
    IL_0001: ldc.i4.0
    IL_0002: stloc.0
    IL_0003: ldloc.0
    IL_0004: box ConsoleApplication1.Fruit
    IL_0009: ldc.i4.0
    IL_000a: box ConsoleApplication1.Fruit
    IL_000f: call instance bool [mscorlib]System.Enum::HasFlag(class [mscorlib]System.Enum)
    IL_0014: stloc.1
    IL_0015: call string [mscorlib]System.Console::ReadLine()
    IL_001a: pop
    IL_001b: ret
} // end of method Program::Main 
```

在将值类型*表示*为时可以看到相同的情况`ValueType`，它也会导致装箱：

```
class Program
{
    static void Main(string[] args)
    {
        int i = 1;
        ValueType v = i;

        Console.ReadLine();
    }
}

.method private hidebysig static 
    void Main (
        string[] args
    ) cil managed 
{
    // Method begins at RVA 0x2050
    // Code size 17 (0x11)
    .maxstack 1
    .entrypoint
    .locals init (
        [0] int32 i,
        [1] class [mscorlib]System.ValueType v
    )

    IL_0000: nop
    IL_0001: ldc.i4.1
    IL_0002: stloc.0
    IL_0003: ldloc.0
    IL_0004: box [mscorlib]System.Int32
    IL_0009: stloc.1
    IL_000a: call string [mscorlib]System.Console::ReadLine()
    IL_000f: pop
    IL_0010: ret
} // end of method Program::Main 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T08:31:21.427

`Enum`继承自[`ValueType`](http://msdn.microsoft.com/en-us/library/system.valuetype.aspx)...一个类！因此拳击。

请注意，`Enum`该类可以将任何枚举表示为装箱值，无论其基础类型是什么。而诸如此类的值`FileAttributes.Hidden`将表示为实值类型，int。

编辑：让我们在这里区分类型和表示。An`int`在内存中表示为 32 位。它的类型源自`ValueType`. 一旦您将一个分配`int`给一个`object`或派生类（`ValueType`类，`Enum`类），您就将它装箱，有效地将其表示更改为现在包含该 32 位以及其他类信息的类。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-06-28T08:28:11.987

自 C# 7.3 以来，引入了通用 Enum 约束，您可以编写一个不依赖反射的快速、非分配版本。它需要编译器标志 /unsafe 但由于 Enum 支持类型只能是固定数量的大小，因此它应该是完全安全的：

```
using System;
using System.Runtime.CompilerServices;
public static class EnumFlagExtensions
{
    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    public static bool HasFlagUnsafe<TEnum>(TEnum lhs, TEnum rhs) where TEnum : unmanaged, Enum
    {
        unsafe
        {
            switch (sizeof(TEnum))
            {
                case 1:
                    return (*(byte*)(&lhs) & *(byte*)(&rhs)) > 0;
                case 2:
                    return (*(ushort*)(&lhs) & *(ushort*)(&rhs)) > 0;
                case 4:
                    return (*(uint*)(&lhs) & *(uint*)(&rhs)) > 0;
                case 8:
                    return (*(ulong*)(&lhs) & *(ulong*)(&rhs)) > 0;
                default:
                    throw new Exception("Size does not match a known Enum backing type.");
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T08:34:00.247

当你传递一个以对象为参数的方法的值类型时，就像在 console.writeline 的情况下，会有一个固有的装箱操作。Jeffery Richter 在您提到的同一本书中详细讨论了这一点。

在这种情况下，您使用的是 console.writeline 的 string.format 方法，它采用 object[] 的 params 数组。所以你的布尔值将被转换为对象，因此你得到一个装箱操作。您可以通过在布尔值上调用 .ToString() 来避免这种情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T08:46:20.273

此外，还有不止一个拳击`Enum.HasFlag`：

```
public bool HasFlag(Enum flag)
{
    if (!base.GetType().IsEquivalentTo(flag.GetType()))
    {
        throw new ArgumentException(Environment.GetResourceString("Argument_EnumTypeDoesNotMatch", new object[]
        {
            flag.GetType(),
            base.GetType()
        }));
    }
    ulong num = Enum.ToUInt64(flag.GetValue());
    ulong num2 = Enum.ToUInt64(this.GetValue());
    return (num2 & num) == num;
} 
```

查看`GetValue`方法调用。

**更新**。看起来 MS 在 .NET 4.5 中优化了这种方法（源代码已从参考源下载）：

```
 [System.Security.SecuritySafeCritical]
    public Boolean HasFlag(Enum flag) { 
        if (flag == null)
            throw new ArgumentNullException("flag"); 
        Contract.EndContractBlock(); 

        if (!this.GetType().IsEquivalentTo(flag.GetType())) { 
            throw new ArgumentException(Environment.GetResourceString("Argument_EnumTypeDoesNotMatch", flag.GetType(), this.GetType()));
        }

        return InternalHasFlag(flag); 
    }

    [System.Security.SecurityCritical]  // auto-generated 
    [ResourceExposure(ResourceScope.None)]
    [MethodImplAttribute(MethodImplOptions.InternalCall)] 
    private extern bool InternalHasFlag(Enum flags); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-26T09:14:03.560

此调用涉及两个拳击操作，而不仅仅是一个。两者都是必需的，原因很简单：对于 和 都**`Enum.HasFlag()`需要*类型信息*`this`，而不仅仅是值`flag`。**

大多数时候，一个`enum`值实际上只是一组位，编译器从`enum`方法签名中表示的类型中获得了它所需的所有类型信息。

但是，`Enum.HasFlags()`它首先要做的是调用`this.GetType()`并`flag.GetType()`确保它们是相同的。如果你想要无类型版本，你会问`if ((attribute & flag) != 0)`，而不是调用`Enum.HasFlags()`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-08T17:29:04.030

正如 Timo 所建议的，Martin Tilo Schmitz 的解决方案可以**在不需要`/unsafe`switch**的情况下实现：

```
public static bool HasAnyFlag<E>(this E lhs, E rhs) where E : unmanaged, Enum
{
    switch (Unsafe.SizeOf<E>())
    {
    case 1:
        return (Unsafe.As<E, byte>(ref lhs) & Unsafe.As<E, byte>(ref rhs)) != 0;
    case 2:
        return (Unsafe.As<E, ushort>(ref lhs) & Unsafe.As<E, ushort>(ref rhs)) != 0;
    case 4:
        return (Unsafe.As<E, uint>(ref lhs) & Unsafe.As<E, uint>(ref rhs)) != 0;
    case 8:
        return (Unsafe.As<E, ulong>(ref lhs) & Unsafe.As<E, ulong>(ref rhs)) != 0;
    default:
        throw new Exception("Size does not match a known Enum backing type.");
    }
} 
```

需要NuGet`System.Runtime.CompilerServices.Unsafe`才能使用 .NET Framework 进行编译。

### 表现

*   我不得不提到，任何通用实现仍然比本机检查慢一个数量级，即`((int)lhs & (int)rhs) != 0`. 我想参考`lhs`,会`rhs`阻止优化函数变量的存储。枚举大小的运行时调度增加了另一个开销。
*   但它仍然**比 快一个数量级`HasFlag`**。
*   `HasFlag`而且，如果在调试版本中关闭优化，性能优势几乎为零。
*   在优化（发布）版本中使用`unsafe { }`和使用之间没有显着差异。`class Unsafe`只有没有优化`class Unsafe`几乎和`HasFlag`.
*   使用作为 supercat 推荐的委托不是合理的选择，因为在大多数 CPU 架构上生成的函数指针调用很慢，而且它完全阻止了内联。
*   `MethodImplOptions.AggressiveInlining`没有增加任何价值。

### 结论

**仍然没有真正快速*且*可读的实现来测试枚举中的标志。**

# ruby - 使用 MongoDB 的 Twitter 搜索 API

> ID：11665280
> 
> 赞同：0
> 
> 时间：2012-07-26T08:27:35.720
> 
> 标签：ruby, mongodb, twitter, tweets

我想使用 Twitter Search API 来获取推文并将它们存储在 MongoDB 中。
使用`GET`我可以做到

```
http://search.twitter.com/search.json?q=%3A%29&lang=en&rpp=100&result_type=mixed 
```

但是如何将这些推文存储在 MongoDB 中？我试过这个，但没有结果......

```
require 'rubygems'
require 'net/http'
require 'open-uri'
require 'json'
require 'mongo'

con = Mongo::Connection.new
db = con.db('sentiment')
tweets = db.collection('positive')

uri = URI.parse('http://search.twitter.com/search.json')
uri.query_values = { :q => "%3A%29", :lang => "en" ,:rpp=>"100",:result_type=>"mixed"}
json = open(uri).read
ref = JSON.parse(json)
ref["results"].each do |tweet|
  puts "@" + tweet["from_user"] + " : " + tweet["text"]
end 
```

得到这个结果：

> Thu Jul 26 20:08:38 [conn18] 端连接 127.0.0.1:61861

# animation - google如何在其主页上创建当前的png图像动画

> ID：11665282
> 
> 赞同：0
> 
> 时间：2012-07-26T08:27:36.630
> 
> 标签：animation, png, base64

google如何在其主页上创建当前png图像动画，似乎是png编码的base64文件。

png 动画如何在没有 javascript 的情况下运行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T03:21:49.100

它可以是[CSS Sprite Sheet 动画](http://blog.teamtreehouse.com/css-sprite-sheet-animations-steps)或基于 JavaScript 的动画。Google Chrome 不支持 APNG。

# sql - 一系列日期的最近记录

> ID：11665286
> 
> 赞同：5
> 
> 时间：2012-07-26T08:27:49.680
> 
> 标签：sql, postgresql, datetime

我知道要在某个日期之前获得最近的记录，我可以使用查询：

```
select * 
from results 
where resulttime = (select max(resulttime) 
                    from results 
                    where some_id = 15 
                      and resulttime < '2012-07-27'); 
```

但是我需要连续几天这样做，这样我才能知道每天最接近的记录。有任何想法吗？

这一系列天将由 生成`generate_sequence()`。

最接近的先前记录可能是我们想要的值的前一天，但仍需要返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T19:03:01.190

`LEFT JOIN`使用and应该是最简单和最快的`DISTINCT ON`：

```
WITH x(search_ts) AS (
    VALUES
     ('2012-07-26 20:31:29'::timestamp)              -- search timestamps
    ,('2012-05-14 19:38:21')
    ,('2012-05-13 22:24:10')
    )
SELECT DISTINCT ON (x.search_ts)
       x.search_ts, r.id, r.resulttime
FROM   x
LEFT   JOIN results r ON r.resulttime <= x.search_ts -- smaller or same
-- WHERE some_id = 15                                -- some condition?
ORDER  BY x.search_ts, r.resulttime DESC; 
```

结果（虚拟值）：

```
search_ts           | id     | resulttime
--------------------+--------+----------------
2012-05-13 22:24:10 | 404643 | 2012-05-13 22:24:10
2012-05-14 19:38:21 | 404643 | 2012-05-13 22:24:10
2012-07-26 20:31:29 | 219822 | 2012-07-25 19:47:44 
```

我使用[CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html)来提供值，可以是表或函数或未嵌套的数组或由[`generate_series()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html#FUNCTIONS-SRF-SERIES)其他东西生成的集合。（你的意思`generate_series()`是“generate_sequence（）”吗？）

首先，我`JOIN`搜索表中所有早于或等于的行的时间戳`resulttime`。我使用`LEFT JOIN`而不是`JOIN`这样，当表中根本没有先验时，不会删除搜索时间戳`resulttime`。

结合我们得到小于或等于每个搜索时间戳`DISTINCT ON (x.search_ts)`的`ORDER BY x.search_ts, r.resulttime DESC`最大（或同样最大的一个） 。`resulttime`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:34:06.910

*从类似于您的示例的时间序列中识别一天边界内最大*日期的简单子查询将是这样的

```
SELECT max(resulttime), date_trunc('days',resulttime) FROM results GROUP BY 2; 
```

即使用[date_trunc](http://www.postgresql.org/docs/9.1/static/functions-datetime.html#FUNCTIONS-DATETIME-TRUNC)函数将时间戳固定到日期组件，然后使用 GROUP BY max() 收集每个截断日期的最大时间戳

# jquery-ui - 我们如何使用 Jquery tagit 获取所选标签的 ID？

> ID：11665291
> 
> 赞同：4
> 
> 时间：2012-07-26T08:27:58.543
> 
> 标签：jquery-ui, jquery, jquery-plugins, tag-it

我有一个输入标签字段，我想获取所选标签的 ID 所以我尝试了[http://jsfiddle.net/u8zj5/19/](http://jsfiddle.net/u8zj5/19/)但我的问题是我想获取 id 而不是标签或值传递到`id="show"`但我失败了。

```
<input type="text" id="field1" name="field1" value=""/>
<span id="show">show ID here</span>

jQuery(document).ready(function(){
var availableTags = [{"id":"144","label":"Allicelabel","value":"Allice value"}];
jQuery("input#field1").each(function(){
    var target = jQuery(this);
    var currenttags = target.val();
    target.hide()        
          .after("<ul class=\"tags\"><li>"+currenttags+"</li></ul>");
    var instance = target.next();
    instance.tagit({
        tagSource:availableTags,
        tagsChanged:function () {
            var tags = instance.tagit('tags');
            var tagString = [];
            for (var i in tags){
                tagString.push(tags[i].value);
            }
            $("#show").html(tagString.join(','));
        },
        sortable:true,
        triggerKeys: ['enter', 'comma', 'tab']
    });
}); 
```

});

任何使用[jQuery Tagit (Demo Page)](http://www.webspirited.com/tagit/?theme=simple-green#demos)的人都可以帮我解决这个问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-08T18:21:36.417

我有同样的问题，但不想改变插件的默认行为。所以，相反，我使用提供的钩子来添加新的行为。

```
var availableTags = [
    {
        label: "myTag",
        value: "myTag",
        id: 1
    },
    //etc...
];
var assignedTags = [];

$('#singleinputfield').tagit( {
                            tagSource: function (request, response) {
                                    //setup the search to search the label
                                    var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
                                    response($.grep(availableTags, function (value) {
                                        return matcher.test(value.label);
                                    }));
                            },
                            beforeTagAdded: function(event, ui){
//get id for that tag and signal if it was in the tagSource list
                                var id, result = false;
                                $.each(availableTags, function(){
                                    if(ui.tagLabel === this.label){
                                        result = true;
                                        id=this.id;
                                        return false;
                                    }
                                });
                                if(result){
//put id in the list of ids we are using
                                    assignedTags.push(id);
                                }
                                return result;
                            },
                            afterTagAdded: function(event, ui){
//replace the values in the single input field with the assigned ids
                                    $('#singleinputfield').val(assignedTags.join(','));
                            },
                            afterTagRemoved: function(event, ui){
                                $('#singleinputfield').val(assignedTags.join(','));
                            },
                            beforeTagRemoved: function(event, ui){
                                var id;
//get the id for the removed tag and signal if it was in the tagSource list
                                $.each(availableTags, function(){
                                    if(ui.tagLabel === this.label){
                                        result = true;
                                        id = this.id;
                                        return false;
                                    }
                                });
                                if(result){
//remove the unassigned tag's id from our list
                                    assignedTags = $.grep(assignedTags, function(el){
                                        return el != id;
                                    });
                                }
                            }
                        }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T20:31:17.443

我遇到了同样的问题，我所做的是修改 tag-it.js。当您调用函数选择时，您需要`ID`通过函数发送`_addTag`

```
self._addTag(ui.item.label, ui.item.value, ui.item.id); 
```

然后你只需要获取 id：

```
_addTag: function(label, value, id) {
    ...
    this._addSelect(label, value, id);
    ...
} 
```

在这里附加`ID`一个隐藏的选择

```
_addSelect: function(label, value, id) {
        var opt = $('<option>').attr({
            'selected':'selected',
            'value':id
        }).text(label);
        this.select.append(opt); 
```

有了这个，您可以拥有一个用于自动完成列表的标签，一个要在标签中显示的值，以及`ID`一个隐藏的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T12:57:46.483

使用其他一些插件，如 Select2。它实际上已经得到了支持。

# qt - QTcpServer 如何真正监听连接

> ID：11665293
> 
> 赞同：8
> 
> 时间：2012-07-26T08:28:13.103
> 
> 标签：qt, qtcpserver

我对 QTcpServer 如何在线程和阻塞方面的幕后工作感兴趣。`QTcpServer`有一个`listen()`立即返回的方法。如果侦听成功开始，服务器将发出信号`newConnection()`。`listen()`当方法返回时，我对服务器如何监听（是否在主线程上）感兴趣。带有 QTcpServer 的控制台应用程序的通常示例是这样的：

```
//main.cpp
int main(int argc, char* argv[])
{
    QCoreApplication app;
    MyServer server;
    app.exec();
}

//MyServer.cpp
MyServer::MyServer(QObject *parent) : QObject(parent)
{
    this->server = new QTcpServer(this);
    connect(server, SIGNAL(newConnection()), this, SLOT(on_newConnection()));
    if (!server->listen(QHostAddress::Any, 1234))
        //do something in case of error
}
void MyServer::on_newConnection()
{
    QTcpSocket* socket = server->nextPendingConnection();
    //do some communication...
} 
```

`QTcpServer`依赖于一个`QCoreApplication`（或者可能是一个）`QRunLoop`现有的并且正在运行来接收网络事件。`QCoreApplication::exec()`它可以在不被调用的情况下正常工作吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-27T16:31:33.930

我一直在研究`QtCore`and`QtNetwork`模块的源代码。

Aperantly，`QTcpServer`可以在两种模式下工作：**同步**和**异步**。

在**同步**模式下，调用`listen()`者可以调用`waitForNewConnection()`这是一个阻塞方法（线程将休眠，直到有人连接到监听端口）。这种方式`QTcpServer`可以在没有事件循环的线程中工作。

在**异步**模式下，将在接受新连接时`QTcpServer`发出信号。`newConnection()`但是为了能够做到这一点，必须有一个事件循环在运行。底层`QCoreApplication`是`QEventLoop`and `QAbstractEventDispatcher`（一个抽象类，具体类型取决于操作系统，例如`QEventDispatcherUNIX`）。此事件调度程序可以监视套接字上的条件（由文件描述符表示）。它有一个方法`registerSocketNotifier(QSocketNotifier*)`。该方法由`QSocketNotifier`类的构造函数调用`QTcpServer`，每次`listen()`调用都会创建一个实例。`QTcpServer::listen()`当然，在调用时调用的唯一系统调用是`listen()`它立即返回，当事件循环开始运行时，所有真正的魔法都会发生。事件循环（使用调度程序）将监视已注册的套接字上是否存在特定条件。它调用**`select()`**接收一个或多个文件描述符的系统调用（由内核）在某些条件下（如果有要读取的数据，是否可以写入数据，或者是否发生错误）。该调用可以阻塞线程，直到满足套接字上的条件，或者它可以在经过一段时间后返回，并且不满足套接字上的条件。我不确定 Qt 是否正在调用`select()`提供或不提供等待时间（无限期阻塞），我认为它以某种复杂的方式确定并且是可变的。因此，当最终满足套接字的条件时，事件调度程序将通知该`QSocketNotifier`套接字，后者将通知`QTcpServer`正在侦听套接字的人，后者将接受连接并发出`newConnection()`信号。

* * *

因此，`QTcpServer`它本身并不调用事件循环/套接字监控系统，但它依赖于它，它通过`QSocketNotifier`它用于异步接收连接。

当同步方法`waitForNewConnection()`被调用时，它只是绕过所有的`QSocketNotifier`东西并调用`accept()`阻塞线程直到有传入连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:27:12.353

Qt 的大部分“幕后”功能都发生在 QCoreApplication 的主事件循环中：信号/槽、定时器等。
一个例子是 JavaScript——你绑定一个事件，但事件循环由浏览器处理。

# delphi - Delphi FloatToStr - 为什么显示不同？

> ID：11665298
> 
> 赞同：4
> 
> 时间：2012-07-26T08:28:20.457
> 
> 标签：delphi, floating-point

使用**DEFAULT** FloatToStr 函数

```
FloatToStr('0.0000442615029219009') 
```

输出

```
4.42615029219009E-5 
```

小数点后去掉一个零

```
FloatToStr('0.000442615029219009') 
```

生产

```
0.000442615029219009 
```

有人可以解释为什么第二种情况下的值没有输出到

```
4.42615029219009E-4 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T09:09:20.130

的[文档`FloatToStr`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.FloatToStr)包含答案：

> 转换使用具有 15 位有效数字的通用数字格式。

要解释该声明，您还需要参考[描述`Format`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.Format)函数的主题，特别是有关一般数字格式的文本（强调我的）：

> 使用固定或科学格式将该值转换为可能的最短十进制字符串。结果字符串中的有效位数由格式字符串中的精度说明符给出；如果不存在精度说明符，则假定默认精度为 15。从结果字符串中删除尾随零，并且仅在必要时出现小数点。如果值中小数点左侧的位数小于或等于指定精度，并且**值大于或等于 0.00001** ，则生成的字符串使用定点格式。否则，生成的字符串使用科学格式。

不幸的是，那里的文档实际上是错误的。而不是`0.00001`应该阅读`0.0001`. 这个程序说明了这一点：

```
program FloatToStrScientificFixed;
{$APPTYPE CONSOLE}
uses
  System.SysUtils;

var
  d: Double;

begin
  d := 0.0001;
  Writeln(FloatToStr(d*0.9999999));
  Writeln(FloatToStr(d));
  Writeln(FloatToStr(d*1.0000001));
  Readln;
end. 
```

对于您的示例，`0.0000442615029219009`小于`0.0001`，因此使用科学记数法格式化。但是`0.000442615029219009`大于`0.0001`，因此使用固定符号进行格式化。

如果您希望输出始终使用科学记数法，请使用`Format`格式`e` [字符串](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.Format)。

* * *

[质量控制#107388](http://qc.embarcadero.com/wc/qcmain.aspx?d=107388)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:37:55.830

因为第一个示例中尾数中的有效位数超过了要显示的位数，请参阅

[Delphi 基础：FloatToStr](http://www.delphibasics.co.uk/RTL.asp?Name=FloatToStr)

如果您想更好地控制格式，请改用 FloatToStrF 函数。

**编辑**：位数的解释不正确，请参阅大卫赫弗曼的答案以获得正确的解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T08:40:58.890

在某些时候，`FloatToStr`函数会切换到指数格式以限制输出中的字符数。否则，显示 a`Double`可能需要多达 300 个十进制数字，这对于解释是不实际的。

您可以使用`Format`函数来指定严格的规则。

# php - Windows服务器中的PHP scandir

> ID：11665299
> 
> 赞同：0
> 
> 时间：2012-07-26T08:28:24.040
> 
> 标签：php, scandir

我正在使用 Windows 服务器，我想在文件夹“temp_orders”中使用 scandir。我回应了完整的路径，我得到了

```
 "C:\Domains\oaxiscom\oaxis.com\wwwroot\groupon_redeem" 
```

它使用反斜杠而不是正向，如果我 scandir，我无法读取 temp_orders 中的内容

```
 "C:\Domains\oaxiscom\oaxis.com\wwwroot\groupon_redeem\temp_orders" 
```

- 这会产生“\”的语法错误。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:34:45.280

尝试`\\`代替`\`，看看效果如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:59:21.277

几乎每次在 Windows 编程中需要路径时，我都可以在路径文件夹/文件名之间 使用正斜杠 ( `/`) 或反斜杠 ( )。`\`

由于反斜杠在许多编程语言中用作转义序列起始字符，因此这些天在路径名中使用正斜杠对我来说是非常标准的。

因此，您可以尝试使用正斜杠 ( `/`) 而不是反斜杠。

由于 php 将反斜杠解释为转义，因此如果您使用两个反斜杠 ( `\\`)，通常在解释器处理字符串时，这两个反斜杠会替换为单个反斜杠。

`\'`反斜杠还用于在带引号的字符串 (或)中插入引号`\"`以及其他一些特殊字符，例如换行符 ( `\n`)。

# html - 网站重组后如何为许多资源返回 301 重定向？

> ID：11665301
> 
> 赞同：2
> 
> 时间：2012-07-26T08:28:28.907
> 
> 标签：html

我正在重建一个旧网站，它有很多文件，已经移动到服务器上更合适的目录中。很明显，Google 拥有的这些页面的所有 url 都将返回 404，因为它们不再存在。但我希望 Google（和其他人）知道这些页面仍然存在，以及它们存在于哪个目录中。

但是我们如何为许多不同的页面做到这一点呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:06:45.060

您必须将旧链接重定向到新域。这就是你可以做到的。

**使用 php：**

```
<?
 Header( "HTTP/1.1 301 Moved Permanently" );
 Header( "Location: http://www.new-url.com" );
?> 
```

**使用 asp.net：**

```
<script runat="server">
private void Page_Load(object sender, System.EventArgs e)
{
 Response.Status = "301 Moved Permanently";
 Response.AddHeader("Location","http://www.new-url.com");
 }
</script> 
```

**使用 ROR：**

```
def old_action
headers["Status"] = "301 Moved Permanently"
redirect_to "http://www.new-url.com/"
end 
```

**使用 htaccess**：

使用以下代码创建一个 .htaccess 文件，它将确保您旧域的所有目录和页面都将正确重定向到您的新域。.htaccess 文件需要放在你旧网站的根目录下（即你的索引文件所在的同一个目录）

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule (.*) http://www.newdomain.com/$1 [R=301,L] 
```

请将上述代码中的 www.newdomain.com 替换为您的实际域名。

除了重定向之外，我建议您联系每个反向链接站点以修改其反向链接以指向您的新网站。

**注意：**这种 .htaccess 重定向方法仅适用于启用了 Apache Mod-Rewrite 模块的 Linux 服务器。

更多方法请参考[这里](http://www.webconfs.com/how-to-redirect-a-webpage.php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:17:16.640

您是否正在运行任何类型的服务器端请求处理（即 php、asp(.net)、java、ruby 等）？如果是这样，您可以制作一个查找字典，其中包含旧位置及其新的等价物。检查所有传入请求是否在该字典中并返回适当的响应。

ASP.NET 中的示例（这在 Globabl.asax 中）：

```
Private redirectedResourceList As New Dictionary(Of String, String) From {
    {"/files/myfile.txt", "/newfiles/myfile.txt"},
    {"/files/myfile2.txt", "/newfiles/myfile2.txt"}
}

Sub Application_BeginRequest(ByVal sender As Object, ByVal e As EventArgs)
    If redirectedResourceList.ContainsKey(HttpContext.Current.Request.Path) Then
        Response.StatusCode = 301
        Response.AddHeader("Location", redirectedResourceList(HttpContext.Current.Request.Path))
        Response.End()
    End If
End Sub 
```

# android - Android xml-stylesheet 解析

> ID：11665306
> 
> 赞同：1
> 
> 时间：2012-07-26T08:28:47.833
> 
> 标签：android, xml, stylesheet

如何在 android.xml 中解析这个 xml 数据。

xml-stylesheet 格式与普通 xml 不同？

我需要这些字段；

Kod 纸币购买纸币出售

```
<?xml version="1.0" encoding="ISO-8859-9"?>
<?xml-stylesheet type="text/xsl" href="isokur.xsl"?>
<Tarih_Date Tarih="20.07.2012" Date="07/20/2012">

<Currency Kod="USD" CurrencyCode="USD">
    <Unit>1</Unit>
    <Isim>AMERİKAN DOLARI</Isim>
    <CurrencyName>US DOLLAR</CurrencyName>
    <ForexBuying>1.7967</ForexBuying>
    <ForexSelling>1.8054</ForexSelling>
    <BanknoteBuying>1.7954</BanknoteBuying>
    <BanknoteSelling>1.8081</BanknoteSelling>
    <CrossRateUSD>1</CrossRateUSD>
    <CrossRateOther></CrossRateOther>
</Currency>

<Currency Kod="EUR" CurrencyCode="EUR">
    <Unit>1</Unit>
    <Isim>EURO</Isim>
    <CurrencyName>EURO</CurrencyName>
    <ForexBuying>2.1998</ForexBuying>
    <ForexSelling>2.2104</ForexSelling>
    <BanknoteBuying>2.1983</BanknoteBuying>
    <BanknoteSelling>2.2137</BanknoteSelling>
    <CrossRateUSD></CrossRateUSD>
    <CrossRateOther>1.2243</CrossRateOther>
</Currency> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:33:43.797

我不相信它应该是不同的。最后，这也是一个由标签和属性组成的 XML 文件。
如果您需要重新了解解析 XML [，这篇文章](http://androidresearch.wordpress.com/2012/01/17/parsing-xml-with-xmlpullparser-2/)可能会让您暖和起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:48:38.403

Android 提供了大部分 java 的 api（SAX 和 DOM）来解析 XML 文档。您可以执行以下操作来解析 xml 并获取您需要的字段。

```
DocumentBuilder docBuild= docBuildFactory.newDocumentBuilder();
InputSource in= new InputSource();
in.setCharacterStream(new StringReader(xml));
Document doc = docBuild.parse(in); 
NodeList nodes = doc.getElementsByTagName("Currency");
Element e = (Element)nodes.item(i);
XMLfunctions.getValue(e, "BanknoteBuying") 
```

这必须解决你的问题.... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:44:16.110

您可以放心地忽略[`xml-stylesheet`处理指令](http://www.w3.org/TR/xml-stylesheet/)并像解析任何其他 XML 一样解析 XML。`xml-stylesheet`是一种向表示代理（例如浏览器）提示一种转换的方法，该转换将按照预期呈现的方式呈现 XML。仍然由代理决定是否使用样式表。

在这种情况下，代理是您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T11:39:23.653

如果您确实希望将 isokur.xsl XSLT 样式表应用于您的 XML，那么我认为您可能不走运。据我所知，目前 Android 上没有可用的 XSLT 处理器。我们正在研究将 Saxon 移植到这个平台的可能性，但现在还没有。

# php - 跟踪我的软件的用户 (PHP)

> ID：11665308
> 
> 赞同：2
> 
> 时间：2012-07-26T08:29:12.937
> 
> 标签：php

我正在构建一个人们可以下载并在他们的服务器上运行的脚本，但我想跟踪安装以及有多少人在使用它。

我想出了在中央服务器上编辑文本文件并在每次安装时增加数量的想法，但这是有缺陷的，因为任何人都可以通过查看源来编辑文件。

然后我想我可以将 CouchDB 与 RESTful API 一起使用，但同样，人们可能会造成超出预期目的的损害。

然后我想到了谷歌分析，但这可能不适用于多台计算机上的脚本。

有人对此有任何解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:43:46.943

使用下载计数器来跟踪下载

还

将用户引导至有关成功安装和跟踪点击的“感谢安装”网页。

# javascript - 如何使用 asp.net 将 gridview 的行号作为命令参数传递？

> ID：11665309
> 
> 赞同：0
> 
> 时间：2012-07-26T08:29:13.503
> 
> 标签：javascript, asp.net, edit, row-number, commandargument

当谈到 asp.net 时，我是初学者。从昨天开始，我一直在尝试寻找一个问题的答案：如何使用 asp.net 将 gridview 的行号作为命令参数传递？

我尝试了很多方法/方式，但没有一个有效（命令参数在代码隐藏中为空），所以我认为尝试使用 javascript 函数是合适的（如果有比使用 javascript 更短、更清晰的方法，请告诉我）。

这是功能：

```
 <script type = "text/javascript">
   function GetSelectedRow(lnk) {
       var row = lnk.parentNode.parentNode;
       var rowIndex = row.rowIndex - 1;
       alert("RowIndex: " + rowIndex);
       return rowIndex;
   }
</script> 
```

并且：

```
 <ItemTemplate>
                <asp:Label ID="labelStatus" 
                           runat="server" 
                           Text='<%#Bind("Statut")%>'
                           CommandArgument='<%#"Eval(GetSelectedRow(lnk))"%>'>
                </asp:Label>
   </ItemTemplate> 
```

我需要行号的原因是在 OnRowCommand 事件处理程序中，以便能够指定正在编辑的行。( myGridView.EditIndex = Convert.Int16(e.CommandArgument.ToString()); )。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:49:28.220

您可以在`RowCreated`处理程序的服务器端执行此操作：

```
protected void GridView1_RowCreated(Object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        // Find the control which fires the command
        LinkButton button = (LinkButton)e.Row.Cells[0].FindControl("LinkButton1");

        button.CommandArgument = e.Row.RowIndex.ToString();
    }
} 
```

现在`LinkButton1`点击后`RowCommand`事件将被触发，您可以`CommandArgument`在以下位置访问它`handler`：

```
protected void GridView1_RowCommand(Object sender, GridViewCommandEventArgs e)
{
    int rowIndex;
    if (int.TryParse(e.CommandArgument as string, out rowIndex))
    {
        // Do something with row index
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:46:29.013

你在这里找到关于 GridView 和 OnRowCommand 的完整示例

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.onrowcommand.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.onrowcommand.aspx)

# actionscript-3 - 录制/播放音频出错 - 使用 Flash 和 Evostream 的应用程序

> ID：11665312
> 
> 赞同：1
> 
> 时间：2012-07-26T08:29:16.650
> 
> 标签：actionscript-3, flash, streaming, rtmpd

我正在使用 rtmpd 的商业版本 evostream。

在 Flash 中制作示例记录和播放应用程序时，我可以发布**实时**流并播放它们，但不能**记录**或**附加**。

```
netStream.publish(_streamName, "record"); 
```

在闪存中使用上述内容会导致连接关闭和服务器控制台中的一系列错误。

这是该系列的一部分，我相信它可以提供一些见解。

```
...

    /common/src/utils/misc/file.cpp:78 Unable to open file  with mode `w+b`. Error was: (2) No such file or directory
    /thelib/src/protocols/rtmp/streaming/outfilertmpflvstream.cpp:44 Unable to initialize file 
    /thelib/src/protocols/protocolmanager.cpp:45 Enqueue for delete for protocol CTCP(10) <-> TCP(4) <-> [IR(5)]
    /thelib/src/application/baseclientapplication.cpp:262 Stream INR(2) with name `_20120626133918` unregistered from application `evostreamms` from protocol IR(5)
    /thelib/src/application/baseclientapplication.cpp:262 Stream OFRFLV(3) with name `_20120626133918.flv` unregistered from application `evostreamms` from protocol IR(5)
    /thelib/src/application/baseclientapplication.cpp:240 Protocol CTCP(10) <-> TCP(4) <-> [IR(5)] unregistered from application: evostreamms
    /common/src/utils/misc/file.cpp:476 File not opened
    /thelib/src/protocols/rtmp/streaming/outfilertmpflvstream.cpp:53 Unable to write FLV signature
    /thelib/src/protocols/rtmp/basertmpprotocol.cpp:960 RTMP connection no longer associated with an application
    /thelib/src/netio/epoll/tcpcarrier.cpp:89 Unable to signal data available
    /thelib/src/netio/epoll/iohandlermanager.cpp:129 Handlers count changed: 9->8 IOHT_TCP_CARRIER
... 
```

从上面我可以假设的是，由于访问权限，无法以某种方式创建文件。但我已将所有文件夹和文件的权限设置为完全访问权限。

我不知道该去哪里找了。任何对如何前进有任何想法的人都可以分享它。

* * *

**编辑**

可以在[此处](http://pastebin.com/ThruGN05)找到完整的错误日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:19:10.133

我自己测试过。看起来你刚刚发现了一个错误。在下一个版本之前的工作是创建一个像这样的文件：

[MEDIA_FOLDER]/[_streamName].flv

一点也不漂亮，但肯定会在下一个版本中解决。另一种解决方法是使用记录 CLI 命令

* * *

您可以将日志文件发送至contact@rtmpd.com 或将其全部发布在此处或pastebin.com 上。您从中剪下最有趣的部分，就在您粘贴的第一行上方

# ruby-on-rails - Gemfile：确保机器上有一些gem可用，但不需要为项目加载

> ID：11665313
> 
> 赞同：1
> 
> 时间：2012-07-26T08:29:22.183
> 
> 标签：ruby-on-rails, gem, yard

我在 RoR 工作了 2-3 年，但现在我重新开始工作了，我真的很喜欢这个`bundle`命令。但我有点不确定如何确保我的开发人员伙伴安装了所有**不属于 Rails 应用程序的**gem 。

例如，我们使用 YARD 来记录文档。YARD 与我们正在进行的 Rails 项目没有任何关系，所以我不确定是否应该将它添加到它的 Gemfile 中。另一方面，这是确保每个开发人员都自动安装它的唯一方法。

如果我将它添加到 Gemfile，我应该怎么做呢？在`:development`组中，所以它不会被加载用于生产？但严格来说，它也不应该在开发中加载，它**只是简单地安装**，以便手动使用。

那我应该怎么添加呢？谢谢各位，求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:54:35.430

Gemfile 中的`:development`组正是这样做的正确位置。有一些很好的命令意味着用户只能安装他们需要的特定组。[有关使用 Bundler 的组的更多信息，](http://gembundler.com/groups.html)请参阅文档。

[您可以查看 Rails 项目的 Gemfile 本身](https://github.com/rails/rails/blob/master/Gemfile#L32-40)，注意他们有一个名为的组`:doc`，他们使用它来达到相同的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:44:37.797

如果您觉得 App Gemfile 中的 :development 范围不合适，您可以选择一个仅为此目的而存在的共享 Gemfile。（也就是说，在某个地方设置一个仅包含此 Gemfile 的存储库，在其上运行 bundle install ，gems 将安装在本地）。

# c# - 如何设置 web.config 文件以显示完整的错误消息

> ID：11665322
> 
> 赞同：172
> 
> 时间：2012-07-26T08:29:48.257
> 
> 标签：c#, asp.net, asp.net-mvc-3, web-config

我在 Windows Azure 上部署了我的 MVC-3 应用程序。但是现在当我通过`staging url`它请求它时，它会显示**（对不起，处理您的请求时发生错误。）**。现在我想查看完整的错误消息，由于某些安全原因，默认情况下它会隐藏它。我知道我们可以通过 web.config 文件来做到这一点。但是怎么做？

* * *

## 回答 #1

> 赞同：284
> 
> 时间：2012-07-26T08:38:45.350

不确定它是否适用于您的场景，但请尝试将以下内容添加到您的`web.config`under `<system.web>`：

```
<system.web>
    <customErrors mode="Off" />
    ...
</system.web> 
```

在我的例子中工作。

另见：

[自定义错误模式=“关闭”](https://stackoverflow.com/questions/101693/customerrors-mode-off)

* * *

## 回答 #2

> 赞同：153
> 
> 时间：2016-11-24T05:19:36.313

这还可以通过在客户端浏览器上显示错误的完整详细信息来帮助您。

```
<system.web>
    <customErrors mode="Off"/>
</system.web>
<system.webServer>
    <httpErrors errorMode="Detailed" />
</system.webServer> 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-07-26T08:47:48.517

如果您使用的是 ASP.NET MVC，您可能还需要从 Global.asax.cs 文件中删除**HandleErrorAttribute ：**

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
} 
```

# php - 使用 PHP 检查远程文件是否存在

> ID：11665323
> 
> 赞同：2
> 
> 时间：2012-07-26T08:29:49.407
> 
> 标签：php, xml, curl, fopen

我正在尝试找到一个最佳解决方案来节省**性能、内存使用**等，以检查文件是否存在于不同的域中。就我而言，该文件是一个**XML**，大小可以在**10KB 到 10MB**之间。

其中哪一个最适合使用？如果您有更好的方法，我很乐意改用它。

谢谢

**卷曲**

```
$ch = curl_init("http://www.example.com/hello.xml");

curl_setopt($ch, CURLOPT_NOBODY, true);
curl_exec($ch);
$retcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
// $retcode > 400 -> not found, $retcode = 200, found.
curl_close($ch); 
```

**FOPEN**

```
$url = "http://www.example.com/hello.xml";

if (@fopen($url, "r")) {
   echo "File Exists";
} else {
   echo "Can't Connect to File";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:56:28.443

```
$opts = array('http' =>
  array(
    'method'  => 'HEAD'
  )
);

$context  = stream_context_create($opts);

$result = fopen('http://example.com/submit.php', 'rb', false, $context); 
```

[手册中的示例（但已缩短）](http://php.net/context.http)

然后用于[`stream_get_meta_data()`](http://php.net/stream-get-meta-data)获取响应标头，例如

```
$meta = stream_get_meta_data($result);
var_dump($meta['wrapper_data']); 
```

# c# - 静态元素的执行顺序初始化

> ID：11665324
> 
> 赞同：1
> 
> 时间：2012-07-26T08:29:50.673
> 
> 标签：c#, .net-4.0, static

我遇到过这样的设置代码：

```
internal class Something
{
    public string Name { get; set; }

    public override string ToString()
    {
        return Name;
    }
}

internal static class Factory
{
    public static string Name { get; set; }

    public static Something Create()
    {
        return new Something { Name = Name };
    }
}

internal static class Resources
{
    public static readonly Something DefaultSomething = Factory.Create();
}

internal class Program
{
    public static void Main(string[] args)
    {
        Factory.Name = "MyFactory";
        Execute();
        Console.ReadKey();
    }

    private static void Execute()
    {
        Console.WriteLine(Resources.DefaultSomething);
    }
} 
```

当然这只是一个片段，我不想详细说明为什么要这样做。

我的问题是在调试和没有调试器的情况下运行时的行为差异：

*   使用调试器调试或发布：`MyFactory`打印到控制台
*   不带调试器的发布：打印空行

显然，问题在于静态元素初始化的执行顺序以及在发布模式下编译时完成的一些优化。我想知道如何在不制动此设置的情况下解决此问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T08:37:18.510

解决方法是向 Resources 类添加一个静态构造函数：

```
internal static class Resources
{
    public static readonly Something DefaultSomething = Factory.Create();

    static Resources()
    {
    }
} 
```

**编辑**阅读Jon Skeet 的[这篇文章](http://csharpindepth.com/Articles/General/Beforefieldinit.aspx)

# mysql - 在 MySQL 中将标签保存为位字段。带索引？

> ID：11665327
> 
> 赞同：1
> 
> 时间：2012-07-26T08:30:02.670
> 
> 标签：mysql, tags, bit-manipulation, bit-fields, bitset

我正在尝试使用 MySQL 为我的项目设计一个类似标签的结构。

在阅读了这个[http://forge.mysql.com/wiki/TagSchema](http://forge.mysql.com/wiki/TagSchema)之后，我感到非常失望，因为 m2m 表设计需要如此多`join`的性能，这肯定会影响大数据。

我想到的是一个标签表，其中每个标签都有一个`name`和一个`id`

然后在我要标记的项目表上，每个项目都有一个名为 的列`tag`，每个标记将其位索引标记为 1，否则位字段为 0。

例如

```
table: tag

id   name
1    tag1
2    tag2
3    tag3

table: item

id      name    tag (in binary)     tag (in array)
 1      item1   00000001            [tag1]
 2      item2   00000100            [tag3]
 3      item3   00000110            [tag2, tag3] 
```

所以如果我想`item`用某些标签查找一个，我只需要`&`带有想要的标签的二进制标签字段`id`。

1.  我的设计是好主意还是坏主意？

2.  我可以在标记位集字段上使用索引，以便加快查找速度吗？

3.  如果 MySQL 不能做 #2，我最好的选择是什么（除了 NoSQL）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:37:36.150

不，多对多关系所需的两个连接不会吸收大数据，这是一种基本的设计模式，MySQL 的连接速度非常快。如果有超过 32 个不同的标签（或 64 个，如果您使用`BigInt`数据类型），您的设计就会中断 - 您能找出原因吗？此外，通常最好先考虑实现您的应用程序，然后当它成为问题时再关注性能。

# python - 在objective-c中打开python .dat

> ID：11665328
> 
> 赞同：1
> 
> 时间：2012-07-26T08:30:04.353
> 
> 标签：python, objective-c, database

我正在为 iOS 制作一个应用程序，它使用使用 python 脚本创建的 .dat 数据库文件。

如何使用 objective-c 或 c 从数据库中获取数据？

我没有使用 python 的经验，我猜它有一个 S/N 列和一个 Passwords 列。

这是代码：[这里](http://www.mentalpitstop.com/touchspeedcalc/touchspeedcalc_createtable.py)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:23:14.480

查看发布的 Python 代码 - 它创建了各种变量，但只写出一个名为的变量，`ssid`它恰好是 sha1 摘要的最后 3 个字节。

它写入的文件不是以二进制模式打开的，而是写入了二进制数据，因此可能会发生一些 EOL 的有趣事情。

否则，要检索您的数据，请继续从文件中一次读取 3 个字节...

# java - Java 服务器-客户端套接字通信

> ID：11665331
> 
> 赞同：1
> 
> 时间：2012-07-26T08:30:19.737
> 
> 标签：java, sockets, client

我试图让（android）客户端与服务器通信。发送数据客户端 - > 服务器工作正常，但我希望服务器响应。客户端代码是：

```
try {
                Socket s = new Socket("192.168.0.36", 12390);
                s.setSoTimeout(5000);

                JSONObject json = new JSONObject();
                json.put("emergency", false);
                json.put("imei", imei);
                json.put("lat", l.getLatitude());
                json.put("lon", l.getLongitude());
                json.put("acc", l.getAccuracy());
                json.put("time", l.getTime());

                BufferedWriter out = new BufferedWriter(new OutputStreamWriter(
                s.getOutputStream()));
                out.write(json.toString());
                out.newLine();
                out.write("###");
                out.flush();
                Log.d(TAG, "sent");

                String inputLine = null;
                String result = "";
                BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));  

                Log.d(TAG, "open input");
                while ((inputLine = in.readLine()) != null) {
                    Log.d(TAG, "while");
                    if (inputLine.contains("###")) {
                        break;
                    }
                    result = result.concat(inputLine);

                }

                Log.d(TAG, "closing socket");
                s.close(); 
```

服务器端是：

```
Socket c = null;
    while (true) {
        try {
            c = s.accept();
        } catch (IOException e) {
            System.out.println("Accept failed: " + port);
            System.exit(-1);
        }
        try {

            BufferedReader in = new BufferedReader(new InputStreamReader(c.getInputStream()));
            BufferedWriter out = new BufferedWriter(new OutputStreamWriter(c.getOutputStream()));

            String inputLine = null;
            String result = "";
            while ((inputLine = in.readLine()) != null) {

                if (inputLine.contains("###")) {
                    System.out.println("received ###");
                        out.write("Hello phone");
                        out.newLine();
                        out.write("###");
                        out.newLine();
                        out.flush();

                }

                result = result.concat(inputLine);  

            }
            System.out.println(result);

            out.close(); 
```

服务器正确地从客户端读取消息，并且在接收到### 后应该发回一条消息，但客户端永远不会收到该消息。客户端超时

```
 while ((inputLine = in.readLine()) != null) {
                    Log.d(TAG, "while");
                    if (inputLine.contains("###")) {
                        break;
                    } 
```

并且永远不会进入while循环。我在这里想念什么？任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:29:00.473

来自客户：

```
out.write(json.toString());
out.newLine();
out.write("###");
out.flush(); 
```

您忘记在发送“###”后添加新行，因为您的服务器使用 readLine()

```
 while ((inputLine = in.readLine()) != null) {
 //...
 } 
```

因此，我相信您的服务器无法收到此消息。试着放

```
 out.newLine(); 
```

发送“###”后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:55:15.857

我在这里可能错了，但根据我的经验，我总是在开始通讯之前打开输入和输出流。尝试移动您的

```
BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream())); 
```

旁边

```
BufferedWriter out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream())); 
```

以防您的数据包在您打开输入流并开始读取它们之前过期。

# ruby-on-rails - Rails 2.3.14：在没有验证的情况下保存时不运行 before_validation

> ID：11665337
> 
> 赞同：0
> 
> 时间：2012-07-26T08:30:50.970
> 
> 标签：ruby-on-rails, ruby, callback

保存对象时，我希望更新一个字段。无论对象是否经过验证，此更新都必须发生，并且必须在验证之前发生。

问题是在没有验证的情况下保存时 before_validation 不会运行。这段代码应该放在哪里？有没有办法在没有验证的情况下保存时调用 before_validation 回调？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:48:58.243

不，根据[http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

你遇到这个问题是因为你很顽皮，你在没有验证的情况下保存。不要那么做。 *严重地。* 相反，您应该放宽您的验证策略，以便所有这些“不经验证保存”的废话变成“带验证保存”。

为此，您可以将一些选项传递给验证方法，或者在自定义`validate`方法中包含一些条件子句。

```
class User < ActiveRecord::Base
  before_validation :my_crazy_thing      
  validates_presence_of :name, :unless => :is_a_robot?

  def is_a_robot?
    @brain_type == :positronic
  end

  def my_crazy_thing
    @brain_type = brain_surgery.brain_type
    # or whatever
  end

  def validate
    if condition_exists_to_run_custom_validations
      errors.add_to_base 'WTF' if @universe.exploded?
    end
  end
end 
```

因此，在以前的情况下，您必须跳过验证，以便机器人可以在没有名称的情况下存在。但是如果你正确设置了验证，那么你永远不需要在没有它们的情况下保存。您可以告诉您已正确设置它们，因为您不必在不进行验证的情况下进行保存。现在你可以`before_validation`一直正确地使用回调作为一个不错的奖励。

# php - 使用 Ajax 提交表单是否安全？

> ID：11665340
> 
> 赞同：4
> 
> 时间：2012-07-26T08:31:19.060
> 
> 标签：php, javascript, ajax

所以我在 html 中构建了我的表单并在 JS 中进行了验证，它确实并且看起来像我想要的那样。现在显然我将在服务器端使用 PHP 验证输入，但我想知道使用 Ajax 提交表单然后在服务器端验证是否足够安全，而不是使用“提交”类型提交表单按钮和“动作”属性。基本上，使服务器端验证依赖于提交它的 JS 是否安全？

这是我的表格：

```
<form name="contactForm" id="contactForm"><!-- The form has no action attribute because its submitted via Ajax -->
<div id="inputsWrapper">
    <div>
        <label for="fullName">Your Name: <span class="required">(required)</span></label>
        <input type="text" name="fullName" id="fullName" title="First &amp; last name" value="First &amp; last name" maxlength="50" />
    </div>
    <div>
        <label for="email">Your E-mail: <span class="required">(required)</span></label>
        <input type="text" name="email" id="email" title="E-mail address" value="E-mail address" maxlength="500" />
    </div>
    <div>
        <label for="subject">In Regards To: <span class="required">(required)</span></label>
        <input type="text" name="subject" id="subject" title="Subject" value="Subject" maxlength="50"/>
    </div>
    <div>
        <label for="message">Your Message: <span class="required">(required)</span></label>
        <textarea name="message" id="message" title="Enter your message here" cols="40" rows="10">Enter your message here</textarea>
    </div>
</div> <!-- End inputsWrapper -->
<input type="button" name="sendBtn" id="sendBtn" value="Send Message" /><!-- This button has a listener assigned to it in JS and submits the form on click --> 
```

单击按钮后，Ajax 将通过 POST 将表单提交到我的 PHP 脚本，然后返回有效或无效。这是否是一种安全的方法？谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T08:34:00.517

从安全角度来看，通过 Ajax 或浏览器默认表单发布行为发布它不会产生影响。这些请求都是常规的 HTTP POST/GET 请求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T08:37:20.403

> 我想知道使用 Ajax 提交表单然后在服务器端进行验证是否足够安全，而不是使用“提交”类型按钮和“操作”属性提交表单。

是的。来自系统外部的输入是来自系统外部的输入。

> 基本上，使服务器端验证依赖于提交它的 JS 是否安全？

您的 JavaScript 应该[不显眼](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)并实现[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)。

脚本的输入应该是相同的，无论它来自使用 Ajax 的常规表单提交（如果您使用[jQuery 的 serialize 之](http://api.jquery.com/serialize/)类的东西，这将非常容易），因此您不需要让服务器*依赖于JS*用于响应。

处理表单提交和 Ajax 请求的唯一区别应该是响应的格式。

无论哪种方式，进入系统的数据最终都在提交者的控制之下，因此您需要执行适当的健全性检查并以任何一种方式进行转义。

# php - 使用 PHP facebook connect + JS 自动登录

> ID：11665343
> 
> 赞同：0
> 
> 时间：2012-07-26T08:31:22.053
> 
> 标签：php, javascript, facebook, connect, autologin

由于 Facebook 在过去一年中所做的所有更改，很多事情都发生了变化。网上有一些解决方案，但它们不再起作用。（像这样：[使用 PHP 或 JavaScript Facebook SDK，我怎样才能让用户登录到我的网站？](https://stackoverflow.com/questions/7135474/using-the-php-or-javascript-facebook-sdk-how-can-i-keep-the-user-logged-in-to-m/11611015#comment15398973_11611015)）

我已经在我的网站上使用 PHP facebook SDK 实现了 facebook 连接。问题在于已经批准我的应用程序并且也登录到他们的 Facebook 的用户。在这种情况下，我希望他们自动登录，而无需再次按下连接按钮。我想有一种方法可以使用 php+js 来做到这一点，但我找不到方法，相信我我尝试了几件事。问题是php用户检查

```
$user  = $facebook->getUser(); 
```

不承认 facebook 会话，我想也许我可以用 JS 触发它。所以我厌倦了在 JS 中为页面添加此代码，并且 ALRETS 正在工作，说用户已连接但没有会话传递给 PHP，因此 PHP SDK 无法识别用户已连接：

```
<div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
              appId  : '<?=FACEBOOK_APP_ID?>',
              status : true, // 
              cookie : true, // 
              xfbml  : true, //
              oauth  : true
        });

      // Additional initialization code here
 //--------> this isn't need to work its only a check
FB.getLoginStatus( function(response) {
    //console.log(response);
    if (response.status === 'connected') {
        var accessToken = response.authResponse.accessToken;
        alert(accessToken);
    } else if (response.status === 'not_authorized') {
        //login function
    } else {
        //login function
    }
}, true);

FB.Event.subscribe('auth.authResponseChange', function(response) {
    //console.log('The status of the session changed to: '+response.status);
    alert(response.status);
});

 //--------> END OF CHECK!!
      };
      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/<?=$fb_api_lang?>/all.js#xfbml=1";
         ref.parentNode.insertBefore(js, ref);
       }(document));
    </script> 
```

如果有人找到解决此问题的方法并可以分享，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:05:30.160

> 问题是 php 用户检查`$user = $facebook->getUser();`无法识别 facebook 会话

当然它*不能*——因为在服务器端它只能访问为您的域设置的 cookie。但是如果用户不在该域上并与 Facebook 交互，Facebook 就无法为您的域设置 cookie。

> 我想也许我可以用 JS 来触发它。

只需嵌入 JavaScript SDK，对其进行初始化并设置`cookie: true`参数。这将使 JS SDK 在您的域下设置一个 cookie，PHP 可以*在下一个请求*时读取该 cookie 。

如果您想“立即”识别返回用户，那么您必须检查客户端，并在满足适当条件时重新加载您的页面：JS SDK 识别返回用户（`FB.getLoginStatus`），但 PHP 没有识别他然而（让你的 PHP 代码设置一个变量/标志，你的 JS 可以评估）——然后通过 JS 重新加载页面，以便 PHP 可以读取刚刚由客户端 JS 设置的 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:39:36.957

你的表现是否正确：

```
$facebook = new Facebook(array(
    'appId'  => $app_id,
    'secret' => $app_secret,
    'cookie' => true
)); 
```

在调用此方法之前？你用的是同一个域吗？

# asp.net - 由于 IIS 中的“默认文档”，必须两次登录到 asp.net 应用程序

> ID：11665348
> 
> 赞同：5
> 
> 时间：2012-07-26T08:31:49.200
> 
> 标签：asp.net, iis, login, default-document

以前，我已将**login.aspx**添加到 IIS 的**默认文档**部分。

但是，当有人访问该应用程序时，需要*登录两次*。第一个不会说任何错误消息或没有重定向到应用程序中的下一页。第二个实际上会将用户重定向到预期的页面。并且用户两次都使用了正确的凭据。

一旦我从 IIS 的**默认文档部分删除****login.aspx**，并且用户提供了应用程序的完整链接 (~/login.aspx)，问题就消失了，因为它只需要登录一次。

 **有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:52:25.900

为了解决这个问题，在 Default Document 的 Page_Load 事件中，必须检查如下：

```
if (this.User.Identity.IsAuthenticated)
{
    Response.Redirect("somepage.aspx");
} 
```

来源：[asp.net Form Authentication change .net 2 to .net4](https://stackoverflow.com/questions/8343375/asp-net-form-authentication-change-net-2-to-net4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:43:43.487

您是否已将索引页面设置为默认并存在？

从您稀缺的信息中，我可以找到一个（可能的许多）解释：

首先，您访问 yoursite.com（不指定 login.aspx），它会在后台重定向到 login.aspx，但 url 保持不变。当您从 login.aspx 提交时，它可能会转到其他（现有）页面，该页面将用户重定向到 login.aspx（这次重写 url）。

如果您想要更好的解释，您需要提供更多详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-13T13:38:58.787

在 Global.asax 添加这些行

```
void Application_BeginRequest(object sender, EventArgs e)
{
    if (Request.QueryString.ToString().EndsWith("ReturnUrl=%2f"))
              System.Web.HttpContext.Current.Response.Redirect("~/login.aspx");

    if (Request.AppRelativeCurrentExecutionFilePath == "~/")
        HttpContext.Current.RewritePath("login.aspx");//This is the default page to navigate after a successful login.

} 
```**

# android - Robotium 中的整个测试超时

> ID：11665354
> 
> 赞同：2
> 
> 时间：2012-07-26T08:32:01.110
> 
> 标签：android, robotium

我很少有课程可以测试我的应用程序。如果持续时间超过 4 秒，我想测试失败。我的代码破坏了测试，但在某些情况下它不会执行下一个测试类。

当我写的时候（和超时无关，只是fail()的一个例子）：

```
public void testSmth() {
    fail("msg");
} 
```

失败跟踪是空的，它会中断测试并开始另一个。但是当我想让它像超时一样时：

```
public void testSmth() {
    Timer timer = new Timer();
    timer.schedule(new TimerTask() {
        @Override
        public void run() {
            fail("msg");
        }
    }, 4000);

    // some tests (that even lasts more than 4 secons) like clickOnImage() etc.
} 
```

它破坏了测试，但它不执行下一个测试，并且在失败跟踪中有：

> 测试未能完成。原因：“仪器运行因“junit.framework.AssertionFailedError”而失败。检查设备 logcat 以获取详细信息

在 LogCat 中我得到了：

> 07-26 11:46:07.428：E/AndroidRuntime(6195)：致命异常：Timer-1
> 
> 07-26 11:46:07.428: E/AndroidRuntime(6195): junit.framework.AssertionFailedError: msg
> 
> 07-26 11:46:07.428: E/AndroidRuntime(6195): at junit.framework.Assert.fail(Assert.java:47)
> 
> 07-26 11:46:07.428: E/AndroidRuntime(6195): 在 java.util.Timer$TimerImpl.run(Timer.java:284)

或者也许还有其他方法可以做我想做的事？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T08:06:30.730

您必须使用以下内容覆盖 runTest() 方法：

[编辑] 此代码创建一个新线程并在其上运行实际测试。Future 类允许我们在这个线程的执行上设置一个超时，当达到超时时，它就会停止。它还负责捕获异常。（我是否提到其余的测试仍将运行？）

如果您想使用此超时来确保测试不会在被测代码中的某处保持“挂起”，这将非常有用。

```
public class MyTestClass extends
                ActivityInstrumentationTestCase2<EditorActivity> {

@Override
public void runTest() throws Throwable {
    final Throwable[] exceptions = new Throwable[1];

    ExecutorService executor = Executors.newCachedThreadPool();
    Callable<Object> task = new Callable<Object>() {
        public Object call() throws Exception {

            try {
                doRunTest();
            }
            catch (Throwable t) {
                exceptions[0] = t;
            }

            return Boolean.TRUE;
        }
    };

    int timeOutMinutes = 10;
    String testCaseName = String.format("%s.%s", getClass().getName(), getName());

    Future<Object> future = executor.submit(task);
    try {
        future.get(timeOutMinutes, TimeUnit.MINUTES);
    } catch (TimeoutException ex) {
        Assertions.fail("[Test method timed out after " + timeOutMinutes + " minutes.]\n" + testCaseName);
    } catch (Throwable e) {
        throw e;
    } finally {
        future.cancel(true); // may or may not desire this
    }

    if (exceptions[0] != null) {
        throw exceptions[0];
    }
}

private void doRunTest() throws Throwable {
    super.runTest();
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T20:02:48.137

如果您只想在达到超时的情况下使测试失败，这应该足够了：

```
public void test1() throws Exception {
    long start = System.currentTimeMillis();
    solo.sleep(5000);
    if (System.currentTimeMillis() - start > 4000) {
        fail("msg");
    }
}

public void test2() throws Exception {
    long start = System.currentTimeMillis();
    solo.sleep(3000);
    if (System.currentTimeMillis() - start > 4000) {
        fail("msg");
    }
} 
```

在执行过程中很难破坏测试，您也可以在每个命令后检查超时，但是检查它需要时间并且您的测试方法会持续更长时间。

# php - 将两个数组相加，维护索引

> ID：11665355
> 
> 赞同：0
> 
> 时间：2012-07-26T08:32:03.490
> 
> 标签：php, multidimensional-array

我有两个要连接在一起的数组。

我想保留索引。

第一个数组（开始时间）

```
 array(2) {
      [0]=>
      array(2) {
        ["ID"]=>
        string(2) "15"
        ["start_time"]=>
        string(19) "2012-06-24 08:00:00"
      }
      [1]=>
      array(2) {
        ["ID"]=>
        string(2) "28"
        ["start_time"]=>
        string(19) "2012-07-26 18:00:00"
      }
    } 
```

第二个数组（结束时间）

```
 array(2) {
      [0]=>
      array(2) {
        ["ID"]=>
        string(2) "15"
        ["end_time"]=>
        string(19) "2012-06-24 17:00:59"
      }
      [1]=>
      array(2) {
        ["ID"]=>
        string(2) "28"
        ["end_time"]=>
        string(19) "2012-07-26 22:00:59"
      }
    } 
```

如果我跑；

```
 $merge[0] = $a[0] + $b[0];

    echo '<pre>';
    var_dump($merge);
    echo '</pre>'; 
```

我明白了；

```
 array(1) {
     [0]=>
     array(3) {
       ["ID"]=>
       string(2) "15"
       ["start_time"]=>
       string(19) "2012-06-24 08:00:00"
       ["end_time"]=>
       string(19) "2012-06-24 17:00:59"
     }
   } 
```

我如何继续这种趋势？我一次只能弄清楚如何定位一个索引（ [0] ），我知道需要一个 foreach 循环来完成它，但不确定如何编写它。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:39:04.920

试试这个：

```
for ($i=0; $i<count($a); $i++)
{
  $merge[$i] = $a[$i] + $b[$i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:39:10.967

您将需要使用`array_merge()`.

[http://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:39:40.730

Foreach 循环将如下所示。

```
$merge = array();
for($i =0; $i<count($a); $i++)
   $merge[$i] = $a[$i] + $b[$i]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T08:41:55.517

```
$array1, $array2, $result = array();
foreach($array1 as $ind => $item)
    $result[$ind] = array( 
        'ID' => $item['ID'], 
        'start_time' => $item['start_time'], 
        'end_time' => $array2[$ind]['end_time']
    ); 
```

# php - 在数组值之后从第二个数组添加值？

> ID：11665357
> 
> 赞同：-1
> 
> 时间：2012-07-26T08:32:05.140
> 
> 标签：php

有类似的问题，但没有一个能完全解决这个问题。

```
Array('1','2','3')
Array('4','5','6') 
```

假设它们都有键 0、1、2。合并两个数组不会在第一个数组值之后分配第二个数组值，因为它会覆盖具有相同名称的键。使用联合数组运算符 (+) 都不起作用。并使用 array_push 导致：

```
Array('1','2','3',Array('4','5','6')) 
```

如何在 array1 中的值保持其顺序之后添加 array2 中的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:42:35.547

```
$array1 = array('1','2','3');
$array2 = array('4','5','6');
$result = array_merge($array1, $array2);
print_r($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:35:34.043

```
$merged = array_merge(array(1, 2, 3), array(4, 5, 6)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:35:52.600

```
$a = ('1', '2', '3');
$b = ('4', '5', '6');

$c = array_merge($a, $b);

print_r($c);

Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 4
    [4] => 5
    [5] => 6
) 
```

当然你不能合并数组如果它有相同的字符串键，显然这些键会被覆盖

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T08:36:36.237

[数组合并](http://php.net/manual/en/function.array-merge.php)

```
$result = array_merge($array1, $array2); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-26T08:36:01.947

不确定这是否是您的意思，但是：

```
for($i=0;$i<count($array2);$i++) {
     $array1[] = $array2[$i];
} 
```

将附加 $array1 与来自 $array2 的元素，有序。

# asp.net-mvc-3 - 注册mvc3中的多个字段验证

> ID：11665358
> 
> 赞同：1
> 
> 时间：2012-07-26T08:32:07.723
> 
> 标签：asp.net-mvc-3, validation, field

在我的 mvc3 项目的注册视图中，我想验证多个输入字段。更准确地说，我需要检查用户（名字、姓氏、街道和邮政）是否已经存在。我尝试使用 [Remote] 验证以及 AdditionalFields 属性，但对我来说，这似乎是解决该问题的错误方法。（但我可能是错的）。

进行多字段验证的最佳方法是什么，以便检查所有四个字段的输入？我是否必须使用数据注释编写自定义验证？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:43:58.723

您必须访问数据库，对吗？这不是您在属性中所做的事情。您需要的是[自定义 MembershipProvider](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:47:01.630

希望这是您部分问题的正确答案：

```
public class User {
    [Required]
    public String FirstName {get;set;}
    [Required]
    public String LastName {get;set;}
    [Required]
    public String Postal {get;set;}
    [Required]
    public String Street {get;set;}
} 
```

这应该验证所有 4 个字段都有输入（客户端或服务器端或两者）。

# overlay - Sencha Touch 2 Overlay 的 showBy() 函数很慢

> ID：11665359
> 
> 赞同：1
> 
> 时间：2012-07-26T08:32:09.157
> 
> 标签：overlay, sencha-touch-2, panel

我的 Sencha Touch 2 应用程序非常复杂。所以我无法在这里展示整个代码片段，我将简要描述我应该做什么。在我的应用程序中，我具有以下全局结构：

*   主容器
    *   工具栏顶部
    *   卡开关
        *   基于链接实例的不同面板
*   工具栏底部

Cardswitch 中的链接面板之一是主面板。该面板具有以下结构：

*   主容器
    *   面板左侧（布局 vbox）
        *   另外三个面板
    *   面板右侧（布局 vbox）
        *   带数据视图的面板
        *   (* 我的问题面板) 带有动态生成的分段按钮的面板

一切正常。“问题面板”中的动态按钮将通过基于存储数据的控制器启动功能生成。每个按钮都设计并填充了一些 html 和自定义图像。

现在我的问题：每个按钮还提供了一个点击功能。此功能应根据按钮位置弹出叠加层。因此，在生成按钮的控制器功能中，我有一些类似的代码：

```
...
var panel = this.getContent();
var overlay =  Ext.create('MyApp.view.Overlay');
panel.add(overlay);
... 
```

如您所见，我的叠加层是一个单独的类。var panel 是显示按钮的“问题面板”。按钮项目中的点击功能代码（效果很好）如下：

```
listeners: {
    tap: function() {

       //overlay.showBy(this);
       overlay.show();
    }                                      
} 
```

和覆盖的代码：

```
Ext.define('MyApp.view.Overlay', {
    extend: 'Ext.Panel',
    alias: 'widget.Overlay',

    config: {
        centered: true,
        height: 200,
        hidden: true,
        html: 'This is just a overlay',
        id: 'pOverlay',
        ui: 'light',
        width: 200,
        hideOnMaskTap: true,
        modal: true
    }

}); 
```

如果我做一个

```
panel.add(overlay); 
```

并调用 tap 函数

```
overlay.show(); 
```

一切都很好而且很快，但相对于按下的按钮，覆盖不会弹出。所以我想用

```
overlay.showBy(button); 
```

但是如果我这样做，覆盖需要大约两秒钟才能弹出并且非常慢（在 Windows 7 @quadcore 上使用 chrome）。我正在使用 sencha-touch 2.0.1.1，当我将叠加层添加到视口时，我期望它，而不是将其添加到面板，然后调用 show：

```
//panel.add(overlay);
Ext.Viewport.add(overlay);
...
overlay.show(); 
```

当我将它添加到面板时，它并没有那么快出现。我需要 showBy() 的功能，但比我的应用程序要快得多。我能做些什么？我在整个申请过程中是否犯过任何错误？还要别的吗？我希望你们能帮助我，因为我正在处理这个简单的叠加层超过三天......

编辑：为了测试，我使用我的主页面板（包括问题面板）作为初始视图，因此它不包含在 Cardswitch 容器中。之后，我完成了一个 showBy()，当整个面板都包含在 cardswitch 中时，它比以前快得多。它不会像只使用 show() 函数那样快速弹出，但没关系。但这仍然不是我的解决方案，因为我需要嵌入面板。

我还尝试使用带有两个选项的简单选择字段。选择字段还使用叠加层来显示选项，并且选择字段与我自己在问题面板中的叠加层一样慢。:(

编辑2：我在这里找到了该问题的类似描述：[http ://www.sencha.com/forum/showthread.php?203501-ShowBy-with-Flexed-panels-and-a-box-layout-popup-is -slow](http://www.sencha.com/forum/showthread.php?203501-ShowBy-with-Flexed-panels-and-a-box-layout-popup-is-slow) 但是该线程中的解决方法对我不起作用。如何使选择字段的项目列表的覆盖显示在屏幕中间而不是使用 showBy()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:08:41.327

好的，在与 sencha touch 中的性能问题进行了几周的斗争（这也导致了我在这里描述的问题）之后，我在这里找到了我自己的解决方案。

我的大多数面板都应用了布局“hbox”，子面板具有选项 flex，带有带有 hbox 布局的新面板。当我显示（）或隐藏（）主面板时，这会导致很长的加载时间。这种布局也导致了这个问题。

所以我的解决方法是将布局设置为默认值，手动浮动容器和元素，并在启动应用程序时使用 window.innerHeight / width 为这些元素设置初始宽度/高度。

之后，showBy() 函数的速度达到了应有的速度。

# java - java中将MD5转为String

> ID：11665360
> 
> 赞同：7
> 
> 时间：2012-07-26T08:32:10.357
> 
> 标签：java, md5

谁能知道如何将**MD5**转换为**String**。就我而言，我已将密码保存在数据库中的**MD5中。**我正在尝试检索密码并以字符串形式显示以进行编辑。

这是我为将字符串转换为加密格式所做的：

```
public static String encrypt(String source) {
   String md5 = null;
   try {
         MessageDigest mdEnc = MessageDigest.getInstance("MD5"); //Encryption algorithm
         mdEnc.update(source.getBytes(), 0, source.length());
         md5 = new BigInteger(1, mdEnc.digest()).toString(16); // Encrypted string
        } 
    catch (Exception ex) {
         return null;
    }
    return md5;
} 
```

我不知道如何将加密格式转换为字符串以编辑密码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-26T08:38:49.780

```
 String password = "123456";

    MessageDigest md = MessageDigest.getInstance("MD5");
    md.update(password.getBytes());

    byte byteData[] = md.digest();

    StringBuffer sb = new StringBuffer();
    for (int i = 0; i < byteData.length; i++)
        sb.append(Integer.toString((byteData[i] & 0xff) + 0x100, 16).substring(1));

    System.out.println("Digest(in hex format):: " + sb.toString()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T08:40:39.227

MD5 是单边散列函数。所以你不能解码它。这就是为什么在许多网站上，您可以通过创建新密码来选择“找回密码”。

[更多关于 MD5](http://en.wikipedia.org/wiki/MD5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:18:01.417

将字符串转换为 MD5 的代码

```
private static String convertToMd5(final String md5) throws UnsupportedEncodingException {
        StringBuffer sb=null;
        try {
            final java.security.MessageDigest md = java.security.MessageDigest.getInstance("MD5");
            final byte[] array = md.digest(md5.getBytes("UTF-8"));
            sb = new StringBuffer();
            for (int i = 0; i < array.length; ++i) {
                sb.append(Integer.toHexString((array[i] & 0xFF) | 0x100).substring(1, 3));
            }
            return sb.toString();
        } catch (final java.security.NoSuchAlgorithmException e) {
        }
        return sb.toString();
    } 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-07-05T13:51:41.280

I think that is the most elegant way to do that:

```
public String getMD5(String data) {
        String result = null;
        MessageDigest md;
        try {
            md = MessageDigest.getInstance("MD5");
            md.update(data.getBytes(Charset.forName("UTF-8")));
            result = String.format(Locale.ROOT, "%032x", new BigInteger(1, md.digest()));
        } catch (NoSuchAlgorithmException e) {
            throw new IllegalStateException(e);
        }
        return result;
} 
```

`

# c - 在 GtkGrid c 中插入空行

> ID：11665369
> 
> 赞同：7
> 
> 时间：2012-07-26T08:32:43.770
> 
> 标签：c, gtk

如何在 GtkGrid 中留下一个空行

我想创建一个带有按钮的 gtkgrid，例如：

```
 0         1        2         3
   ------------------------------------------
0  |         |           button2           |      
   - button1 -------------------------------
1  |         |           button3           |
   -----------------------------------------
2  |         |           button4           |
   -----------------------------------------
3  |         |         |         |         |
   -----------------------------------------
4  |         |      button5      |         |
   ----------------------------------------- 
```

如何在网格中插入一个空行 (3) 并在 gui 中将该行显示为空格？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-05T14:31:32.197

我试图完成类似的任务并找到了解决方法。我正在使用 GTK+3。我只是在第三行的一个单元格中添加了一个空标签，以使 GTK 为该行分配空间而不显示任何内容。

你可以做这样的事情（我假设第二个`button2`应该是`button5`）：

```
// Declare widgets.
    GtkWidget *button1 = gtk_button_new_with_label("button1");
    GtkWidget *button2 = gtk_button_new_with_label("button2");
    GtkWidget *button3 = gtk_button_new_with_label("button3");
    GtkWidget *button4 = gtk_button_new_with_label("button4");
    GtkWidget *button5 = gtk_button_new_with_label("button5");
    GtkWidget *space = gtk_label_new("");
    GtkWidget *buttonGrid = gtk_grid_new();

//  Attach to the grid.
    gtk_grid_attach(GTK_GRID(buttonGrid),button1,0,0,1,2);
    gtk_grid_attach(GTK_GRID(buttonGrid),button2,1,0,3,1);
    gtk_grid_attach(GTK_GRID(buttonGrid),button3,1,1,3,1);
    gtk_grid_attach(GTK_GRID(buttonGrid),button4,1,2,3,1);
    gtk_grid_attach(GTK_GRID(buttonGrid),button5,1,4,2,1);
    gtk_grid_attach(GTK_GRID(buttonGrid),space,2,3,1,1);
    gtk_grid_set_column_homogeneous(GTK_GRID(buttonGrid),TRUE); 
```

这会产生这样的布局： ![产生的布局](../Images/d2b57ca8d32d1c11160d85e36b558cb5.png)

# java - java消息队列或手动读取文件

> ID：11665371
> 
> 赞同：2
> 
> 时间：2012-07-26T08:33:02.200
> 
> 标签：java, io, jms, message-queue

我们有单独的 Java 实例程序处理原始博客，如下所示：

```
jvm instance 1 read fileA --> process
jvm instance 2 read fileA ---> process
jvm instance 3 read fileA ---> process
.... 
```

我认为当 jvm 实例的数量增加时，`disk IO`进程的数量会增加。有时这个解决方案无法正常工作。

所以谁能告诉我另一个解决方案`for reduce the disk IO`。

我认为一个理想的方法是使用 JMS 服务器（如 Apache ActiveMQ）来读取文件并存储在队列和进程中。

如果我使用 JMS 有什么问题吗？？？

请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:29:52.843

事件驱动的解决方案在这里肯定是一个不错的选择，因此 JMS 可能是一个不错的解决方案。

但是你应该记住，如果你的消费者跟不上生产者的步伐，而你将使用持久传递，那么消息将存储在你的硬盘上，这将导致磁盘 IO。但我认为这不是问题，因为您始终可以增加并发消费者的数量，甚至使用集群（例如，使用 ActiveMQ 非常容易配置）来跟上负载。

总而言之，我认为 JMS 将是您的问题的一个很好的解决方案，因为您不需要主动轮询文件系统以进行更改，并且可以非常容易地扩展您的处理应用程序。

如果您对集成主题感兴趣，您可以访问[企业集成站点](http://www.enterpriseintegrationpatterns.com)并阅读 Gregor Hohpe 和 Bobby Woolf 关于该主题的一本非常好的书。您可以在提到的网站上找到它的链接。在其中，您会发现这两种方法的所有优点和缺点，并熟悉其他可用的方法。无论如何，消息传递绝对是不错的选择。

您可能会考虑使用[骆驼框架](http://camel.apache.org/)作为上述模式的实现。

# c++ - 不让一个值超过另一个值的最快方法 - C++

> ID：11665378
> 
> 赞同：0
> 
> 时间：2012-07-26T08:33:41.043
> 
> 标签：c++, numbers

我目前正在尝试找到不会让值超过某个值的解决方案，在本例中为 0x1000 (4096)。这是一个简单的解决方案，但这里的关键是速度。

```
int someVal = rand();
for(int i = 0; i < 10000; i++)
{
    if(someVal > 0x1000)
        someVal = 0x1000;
    cout << someVal;
    someVal = rand();
} 
```

这太慢了，除非当然没有其他方法可以做到这一点。感谢您的帮助，Hetelek。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T08:36:41.600

不确定您要完成什么。这能解决你的问题吗？

```
someVal = rand() % 0x1001; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:36:34.070

你想要完成什么？

在这种简单的情况下，您可以在循环后检查一次。我不确定你的目标是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:35:06.877

可以试试这个；

```
floatValue = floor(floatValue * 0x1000 + 0.5)/0x1000; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T08:37:46.940

[您可以执行与c++ 参考](http://www.cplusplus.com/reference/clibrary/cstdlib/rand/)中解释的相同的操作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T08:39:36.537

用于掩蔽`and`：

```
someVal = rand() & 0xfff; 
```

# uitableview - iOS：设置表格行的多种颜色

> ID：11665381
> 
> 赞同：0
> 
> 时间：2012-07-26T08:33:45.270
> 
> 标签：uitableview, ios4, appcelerator-mobile

是否可以设置单元格部分的两种颜色或透明度？像这张[图片](http://i49.tinypic.com/22c3du.jpg)一样，你可以看到深绿色和浅绿色？

我正在寻找基于原生和 Titanium Appcelerator 的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:30:41.867

最好将 CALayer（作为子图层）添加和定位到现有 UITableViewCell 的图层上，并根据您的要求设置单元格图层和新子图层的颜色。为方便起见，在 UITableViewCell.m 文件中编码属性也可能会有所帮助。

如果您不熟悉 CALayers，这是一个有用的链接[http://www.raywenderlich.com/2502/introduction-to-calayers-tutorial](http://www.raywenderlich.com/2502/introduction-to-calayers-tutorial)

# java - 使用 Java 代码导入 Eclipse 项目

> ID：11665385
> 
> 赞同：1
> 
> 时间：2012-07-26T08:33:57.800
> 
> 标签：java, eclipse, eclipse-plugin, pde

我已经浏览了关于同一主题的上一个[主题](https://stackoverflow.com/questions/1968369/import-java-project-into-eclipse-using-java)

读完之后，我尝试使用相同的代码。我对 Eclipse 插件开发非常陌生。我试图查看给定的示例链接，但找不到正确的线程。

我有类似的要求。我试图按照这个[链接开发一个插件](http://www.vogella.com/articles/EclipsePlugIn/article.html)

我应该强制开发一个插件还是有什么方法可以从 java main 方法运行它。

谢谢， 瓦姆西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:46:51.653

基本上，您必须编写一个 Eclipse 插件，因为建议的代码重用了仅在 Eclipse 插件环境中可用的现有功能。

要使引用的代码正常工作，您必须维护一个具有依赖关系 org.eclipse.core.resources 插件的插件，并且您还必须提供一些功能来执行此代码（例如，平台命令，如另一个提到的vogella.de教程。

理论上，可以用纯 Java 代码来完成，但在这种情况下，直接编辑元数据文件会更有意义——我不推荐这种方式。

# java - OS X 10.8 Gatekeeper 和 Java 小程序

> ID：11665386
> 
> 赞同：30
> 
> 时间：2012-07-26T08:33:59.250
> 
> 标签：java, applet, code-signing, osx-mountain-lion, osx-gatekeeper

在 OS X 10.8 的新版本中，当您尝试启动已签名的 Java 小程序时，Gatekeeper 将弹出以下警告：

![在此处输入图像描述](../Images/da293588dacf270e8d02db01dcd09342.png)

该小程序已使用有效的代码签名证书进行签名，并且可以在其他平台以及以前版本的 OS X 上正常工作。如果我将“允许从以下位置下载的应用程序：”更改为“任何地方”，它就可以正常工作。

据我所知“无法验证数字签名”，实际上意味着“未使用 Mac 开发人员 ID 制作签名”。

那么：我可以使用 Mac 开发人员 ID 签署 Java 小程序吗？我可以同时使用 Mac 开发人员 ID 和标准代码签名证书对其进行签名吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T07:13:03.823

这是我从 Apple Developer Technical Support 得到的答案：

> 感谢您在我们调查此问题时的耐心等待。
> 
> 警报由 Java 提供，而不是 Gatekeeper。但是，您在 OS X Mountain Lion 上更改了验证逻辑是正确的。
> 
> 一段时间以来，用户在运行已签名的小程序时会收到此警报，因为已签名的小程序可以逃离 Java 沙箱并对用户的系统进行意外更改。如果他们信任开发人员，用户可以选择选中“允许所有小程序来自”框，因此除非他们从 Java 安全首选项中删除该项目，否则他们将不会再次看到警报。
> 
> Mountain Lion 的变化在于，验证警报现在基本上意味着小程序的签名是有效的，但小程序来自身份不明的开发人员，并且在启用 Gatekeeper 时尝试提升权限，用户必须决定是否允许这样做。
> 
> “未识别的开发者”是指 Mac App Store 或开发者 ID 识别的开发者以外的来源。请注意，Java 小程序不能参与 Developer ID 计划。
> 
> 如果 Gatekeeper 设置为仅信任 Mac App Store 应用程序，那么您将无法将小程序添加到受信任列表，除非您使用单击显示详细信息后出现的工作表将小程序的证书添加到钥匙串。
> 
> 未签名的小程序根本不允许逃离 Java 沙箱。
> 
> 这与 Gatekeeper 对待原生 Mac 应用的方式是一致的；默认情况下不允许运行来自身份不明的开发者的应用程序。
> 
> 如果您希望更改警报的措辞，请在[https://developer.apple.com/bugreporter](https://developer.apple.com/bugreporter)提交错误报告。

这基本上意味着无法以可以避免显示此消息的方式对小程序进行签名。我向 Apple 提交了一份错误报告，说我希望将消息的措辞更改为不包含诸如 UNIDENTIFIED、UNVERIFIED、INSECURE 之类的词……因为这是签署小程序的全部意义，这样用户就可以感到温暖当他们需要允许小程序运行时，内部舒适，向他们保证他们将允许的内容是好的和经过验证的，并且不会对他们的计算机造成任何伤害，我们需要在它的地方展示它将是可见的，用它来戳他们的眼睛。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T18:24:47.007

你是在自问自答。Gatekeeper 认为不是由 Apple 颁发的证书/签名是不可信的。

[Apple 文档](https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/CodeSigning/CodeSigning.html#//apple_ref/doc/uid/TP40011201-CH7-SW8)将告诉您如何导出您的证书。然后，您可以照常使用它。codesign命令也可以解决问题[。](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/codesign.1.html#//apple_ref/doc/man/1/codesign)

# ruby - 如何保存到数据库与保护大规模分配的rails中的关联

> ID：11665389
> 
> 赞同：0
> 
> 时间：2012-07-26T08:34:01.213
> 
> 标签：ruby, many-to-many, associations, ruby-on-rails-3.2, one-to-many

尝试了几个小时后，我无法保存到数据库。

上下文是这样的：我有两种类型的用户，一种我只需要非常基本的信息[用户名，电子邮件，密码]，另一种我需要很多信息[年龄，性别，城市等]

我没有使用 STI，因为表中会有大量的 Null 值。因此，我创建了这三种模式，其中用户是否有个人资料（个人资料表）取决于其类型 [1 或 2]，并且此个人资料的一个字段是该用户居住的城市，与另一个表格相关DB，城市表

```
class User < ActiveRecord::Base
  has_one :profile
  has_one :city, through: :profile
end

class Profile < ActiveRecord::Base
  belongs_to :user
  belongs_to :city
  [...a bunch of fields here]
end

class City < ActiveRecord::Base
  has_many :profiles
  has_many :users, through: :profiles
end 
```

当我在 Rails 控制台中与它们一起玩时，一切正常：

```
usr = User.new(name: "roxy", email: "roxy@example.me", password: "roxanna", password_confirmation: "roxanna", utype: 1)
cty = City.new(name: "Bucaramanga")
prf = Profile.new (rname: "Rosa Juliana Diaz del Castillo"...)
prf.city = cty
usr.profile = prf
usr.valid?
=> true
usr.save
=> true 
```

但是当我尝试保存在应用程序中时（查看模型）

```
<%= f.label :city, "En que ciudad te encuentras?"%>
<%= select_tag :city, options_from_collection_for_select(City.all, 'id', "name"),{:prompt => 'Selecciona tu ciudad'}%>

def new
  @profile = Profile.new
end

def create
  @profile = params[:profile]
  @city= City.find_by_id(params[:city].to_i)
  @profile.city = @city
end 
```

我收到此错误：

```
undefined method `city=' for #<ActiveSupport::HashWithIndifferentAccess:0xa556fe0> 
```

有人可以帮帮我吗？

**更新** 正如大卫建议的那样，我在 create 方法的第一行创建了 Profile 对象，所以我的控制器现在看起来像这样：

```
def create
  @profile = Profile.new(params[:profile])
  @city= City.find_by_id(params[:city].to_i)
  @profile.city = @city
  @usr = current_user
  if @usr.profile.exists? @profile
    @usr.errors.add(:profile, "is already assigned to this user") # or something to that effect
    render :new
  else 
   @usr.profile << @profile
   redirect_to root_path
  end
end 
```

但我现在收到此错误

```
undefined method `exists?' for nil:NilClass 
```

current_user 返回@current_user

```
def current_user
  @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end 
```

你能告诉我，我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:29:35.380

我想把这封信写给所有和我一样开始并被困在这一步的人。

我必须创建一个新项目并使用它来意识到我做错了什么。我发现我正在验证我添加到`Profiles`表中的最后一个时间字段并且

```
# education       :string(255)     not null 
```

但我还没有将它添加到表单中，所以启动的错误是：

```
Failed to save the new associated so_profile. 
```

现在，您知道是否遇到此错误，请检查您的架构并查找表单中可能缺少的 NOT_NULL 字段，您也可以注释掉所有模型验证，并在它工作后取消注释以确保。

所以，我的最终模型：

```
class User < ActiveRecord::Base
  has_one :profile
  has_one :city, through: :profile
  attr_accessible :email, :name
end

class Profile < ActiveRecord::Base
  belongs_to :user
  belongs_to :city
  attr_accessible :age, :fcolor, :gender
end

class City < ActiveRecord::Base
  has_many :profiles
  has_many :users, through: :profiles
  attr_accessible :name
end 
```

我的控制器：

```
class ProfilesController < ApplicationController
  def new
    @user = User.find_by_id(params[:id])
    @profile = Profile.new
  end

  def create
    @profile = Profile.new(params[:profile])
    city = City.find_by_id(params[:city])
    @profile.city = city
    @user = User.find_by_id(params[:userid])
    @user.profile = @profile
    if @user.save
      flash[:success] =  "Guardado"
      redirect_to profile_path(id: @user.id)
    end
  end

  def show
   @user = User.find(params[:id])
  end  
end

class UsersController < ApplicationController
  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      flash[:success] =  "Registrado!"
      redirect_to new_profile_path(id: @user.id)
    else
      flash[:error] =  "No Registrado :("
      redirect_to new
    end
  end

  def show
    @user = User.find_by_id(params[:id])
  end
end 
```

在真正的应用程序中，您必须使用 Cookie 或其他东西来保持会话活动，因此使用 user_token 从您获取 user_id 的位置，但它可以与关联一起玩。

观点：

个人资料/new.html.erb

```
<%= @user.name %>
<%= form_for @profile, url: {action: :create, userid: @user.id } do |f| %>
<%= f.label :age, "Edad" %>
<%= f.text_field :age%> <br />

<%= label :city, "Ciudad"%>
<%= select_tag :city, options_from_collection_for_select(City.all, 'id', 'name')%>

<%= f.submit %>
<% end %> 
```

个人资料/show.html.erb

```
Hello <%= @user.name %><br />
Tu edad es: <%= @user.profile.age %><br />
Vives en <%= @user.profile.city.name%> 
```

用户/new.html.erb

```
<%= form_for @user do |f|%>
<%= f.label :name, "Nombre"%>
<%= f.text_field :name, size: 20, placeholder: "Escribe tu nombre aqui" %><br />

<%= f.label :email, "Email"%>
<%= f.text_field :email, size: 20, placeholder: "Escribe tu email aqui" %><br />

<%= f.submit "Sign me up!"%> 
```

用户/show.html.erb

```
Name: <%= @user.name %><br />
Email: <%= @user.email %> 
```

就是这样！

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:06:56.723

学习阅读错误信息。问题是 @profile 是一个哈希，因为您实际上并没有在`create`方法的第一行创建一个新的 Profile 对象。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-26T15:01:56.023

我认为正确的是

```
@so_profile.City 
```

不是

```
@so_profile.city 
```

因为类名是 City

# css - 子 div 溢出

> ID：11665391
> 
> 赞同：0
> 
> 时间：2012-07-26T08:34:07.193
> 
> 标签：css, html

我有一个父 div，里面有多个 div，它们是父 div 的子级，但我不明白为什么这些子级 div 溢出到父级 div 之外，

我希望父 div 根据其中的子 div 的数量调整它的高度。

这是[小提琴](http://jsfiddle.net/CvMNH/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:35:11.693

向左浮动#downloads。

[http://jsfiddle.net/CvMNH/1/](http://jsfiddle.net/CvMNH/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:36:32.887

只需制作`overflow:hidden`而不是`overflow:visible`

[演示](http://jsfiddle.net/surendraVsingh/CvMNH/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T08:36:51.993

要么向左浮动#downloads，要么使用`overflow:hidden`：

```
#downloads
        {
            background-color: #EEEEEE;
            border: 1px solid #CCCDCF;
            padding: 5px;
            line-height: 25px;
            overflow:hidden;
        }​ 
```

或者：

```
#downloads
        {
            background-color: #EEEEEE;
            border: 1px solid #CCCDCF;
            padding: 5px;
            line-height: 25px;
            float: left;
        }​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T08:43:11.983

`overflow: hidden`将使溢出的子内容简单地隐藏起来，我相信这不是您想要实现的。

要展开父 div 以显示所有子内容，请在父 div 上指定`overflow: auto`（在某些浏览器中可能有副作用），或将

```
<div style="clear: both"></div> 
```

作为您父 div 中的最后一个孩子。

# php - pdftk + xfdf + php 无法处理变音符号

> ID：11665394
> 
> 赞同：3
> 
> 时间：2012-07-26T08:34:22.727
> 
> 标签：php, pdf, acrobat, pdftk, xfdf

我正在使用 XFDF 文件用 PHP 和 pdftk 填写 PDF 表单服务器端，但我的问题是没有非英语字符（ä、ö、å 等）打印到表单字段。

这是我用来解析 XFDF 文件的函数：

```
function createFDF($file,$info,$enc='UTF-8'){ 
$data='<?xml version="1.0" encoding="'.$enc.'"?>'."\n". 
    '<xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve">'."\n". 
    '<fields>'."\n"; 
foreach($info as $field => $val){ 
    $data.='<field name="'.$field.'">'."\n"; 
    if(is_array($val)){ 
        foreach($val as $opt) 
            $data.='<value>'.htmlentities($opt,ENT_COMPAT,$enc).'</value>'."\n"; 
    }else{ 
        $data.='<value>'.htmlentities($val,ENT_COMPAT,$enc).'</value>'."\n"; 
    } 
    $data.='</field>'."\n"; 
} 
$data.='</fields>'."\n". 
    '<ids original="'.md5($file).'" modified="'.time().'" />'."\n". 
    '<f href="'.$file.'" />'."\n". 
    '</xfdf>'."\n"; 
return $data; 
```

生成的 XFDF 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve">
<fields>
<field name="loadman-pudotuspainolaitteen-mittaustulosten-tallenne">
<value>1201</value>
</field>
<field name="tutkittavarakenne-rivi1">
<value>a</value>
</field>
<field name="tutkittavarakenne-rivi2">
<value></value>
</field>
<field name="tutk-pvm">
<value>11.12.2012</value>
</field>
<field name="mittauksen_suorittaja">
<value>o</value>
</field>
<field name="vast-tyonjohtaja">
<value>&ouml;</value>
</field>
<field name="rakennemateriaali">
<value>&auml;</value>
</field>
<field name="laatuvaatimukset">
<value>&aring;</value>
</field>
<field name="mittauspaikan_tiivistysmenetelma">
<value>&aacute;</value>
</field>
<field name="pohjalevy">
<value>&eacute;</value>
</field>
<field name="pohjamaa-alusrakenne">
<value>&iacute;</value>
</field>
<field name="mittauspaikan-tiivistysmenetelma">
<value>&egrave;</value>
</field>
<field name="emoduli">
<value>&ouml;</value>
</field>
<field name="tiiveys">
<value>&ouml;&auml;</value>
</field>
<field name="huomautukset_ja_loppupaatelmat1">
<value>&ouml;&auml;</value>
</field>
<field name="huomautukset_ja_loppupaatelmat2">
<value>&ouml;&auml;</value>
</field>
<field name="huomautukset_ja_loppupaatelmat3">
<value>&ouml;&auml;</value>
</field>
<field name="empa1">
<value>&ouml;</value>
</field>
<field name="empa1-e">
<value>&ouml;</value>
</field>
<field name="empa2">
<value>&ouml;</value>
</field>
<field name="empa2-e">
<value>&ouml;</value>
</field>
<field name="allekirjoitus">
<value>Einomies Porkkakoski</value>
</field>
</fields>
<ids original="84b0ff7a04b017303be186faa0d1254a" modified="1343290963" />
<f href="assets/loadman.pdf" />
</xfdf> 
```

带有英文字母的字段打印完美，但带有锐角、坟墓或斯堪的纳维亚添加的字母不会转移到 PDF 文件中。 **出于**某种原因除外

```
<field name="huomautukset_ja_loppupaatelmat1">
<value>&ouml;&auml;</value>
</field> 
```

完美运行并打印 öä！

我运行的命令是

```
pdftk <pdf-file> fill_form <xfdf-file> output <output file> flatten 
```

这不会导致任何错误。

我使用的是 Debian 6.0，PHP 5.3.3-7+squeeze13，pdftk 版本是 1.44-5

**更新**我注意到，如果我不展平生成的文件并打开它，则在激活字段时字符会正确打印，但在字段未聚焦时会再次隐藏。如果我手动在文件中键入任何内容，特殊字符也会显示出来。但是，除非再次添加一些文本，否则保存并重新打开的文件不会显示文本。

**更新 2**修复了该死的东西。最初这些表格是在 OSX Snow Leopard 上使用 Adob​​e Acrobat Pro 制作的。现在我用 LibreOffice + Oracle PDF Import 插件重新制作了表格，一切似乎都在工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:56:20.710

如果您使用以下列表，我认为您会有更多的运气：

*   `&#196;`对于 Ä（而不是`&Auml;`）
*   `&#197;`对于 Å（而不是`&Aring;`）
*   `&#214;`对于 Ö（而不是`&Ouml;`）
*   `&#220;`对于 Ü（而不是`&Uuml;`）
*   `&#223;`对于 ß（而不是`&szlig;`）
*   `&#228;`对于 ä （而不是`&auml;`）
*   `&#229;`对于 å（而不是`&aring;`）
*   `&#246;`对于 ö （而不是`&ouml;`）
*   `&#252;`对于ü（而不是`&uuml;`）

我会让您自己了解如何扩展该列表，直到它达到完整性:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:18:28.693

这是因为您`htmlentities`在 PHP 脚本中使用。将重音符号转换为`&xxxx;`

将您的 XML 编码设置为`iso-8859-1`或`WINDOWS-1252`省略`htmlentities`PHP 脚本中的

*另一件要尝试的事情是使用* `utf8_encode` *而不是* `htmlentities` *（而不是修改 XML 编码）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T23:20:00.303

为了支持任何 UFT-8 字符，我写了 PdfFormFillerUTF-8：http: [//sourceforge.net/projects/pdfformfiller2/](http://sourceforge.net/projects/pdfformfiller2/)

# java - JTable 多标题行

> ID：11665397
> 
> 赞同：14
> 
> 时间：2012-07-26T08:34:31.020
> 
> 标签：java, swing, jtable, jtableheader

我在我的应用程序中使用 JTable 并希望有 2 行标题，类似于： ![像这样](../Images/81dfcd4a4cc7a7a15307fb8cdd65651c.png)

这甚至可能吗，还是我必须做其他事情？如果是这样，是什么？使用 Supertitle-titleA，SuperTitle-titleB 会占用太多空间，使信息冗余。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T09:14:28.667

我们在上一个项目中也有同样的要求。我发现的是[java2s.com 上 GroupableTableHeader](http://www.java2s.com/Code/Java/Swing-Components/GroupableGroupHeaderExample.htm)的实现。然而，我已经拉皮条了一点，虽然我不记得到底是什么。下面是三个类的实现，以及我们如何使用它们。

ColumnGroup.java

```
import java.awt.Component;
import java.awt.Dimension;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import javax.swing.JTable;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;

/**
 * ColumnGroup
 * 
 * @version 1.0 20.10.1998
 * @author Nobuo Tamemasa
 */
public class ColumnGroup {

    protected TableCellRenderer renderer;

    protected List<TableColumn> columns;
    protected List<ColumnGroup> groups;

    protected String text;
    protected int margin = 0;

    public ColumnGroup(String text) {
        this(text, null);
    }

    public ColumnGroup(String text, TableCellRenderer renderer) {
        this.text = text;
        this.renderer = renderer;
        this.columns = new ArrayList<TableColumn>();
        this.groups = new ArrayList<ColumnGroup>();
    }

    public void add(TableColumn column) {
        columns.add(column);
    }

    public void add(ColumnGroup group) {
        groups.add(group);
    }

    /**
     * @param column
     *            TableColumn
     */
    public List<ColumnGroup> getColumnGroups(TableColumn column) {
        if (!contains(column)) {
            return Collections.emptyList();
        }
        List<ColumnGroup> result = new ArrayList<ColumnGroup>();
        result.add(this);
        if (columns.contains(column)) {
            return result;
        }
        for (ColumnGroup columnGroup : groups) {
            result.addAll(columnGroup.getColumnGroups(column));
        }
        return result;
    }

    private boolean contains(TableColumn column) {
        if (columns.contains(column)) {
            return true;
        }
        for (ColumnGroup group : groups) {
            if (group.contains(column)) {
                return true;
            }
        }
        return false;
    }

    public TableCellRenderer getHeaderRenderer() {
        return renderer;
    }

    public void setHeaderRenderer(TableCellRenderer renderer) {
        this.renderer = renderer;
    }

    public String getHeaderValue() {
        return text;
    }

    public Dimension getSize(JTable table) {
        TableCellRenderer renderer = this.renderer;
        if (renderer == null) {
            renderer = table.getTableHeader().getDefaultRenderer();
        }
        Component comp = renderer.getTableCellRendererComponent(table, getHeaderValue() == null || getHeaderValue().trim().isEmpty() ? " "
                : getHeaderValue(), false, false, -1, -1);
        int height = comp.getPreferredSize().height;
        int width = 0;
        for (ColumnGroup columnGroup : groups) {
            width += columnGroup.getSize(table).width;
        }
        for (TableColumn tableColumn : columns) {
            width += tableColumn.getWidth();
            width += margin;
        }
        return new Dimension(width, height);
    }

    public void setColumnMargin(int margin) {
        this.margin = margin;
        for (ColumnGroup columnGroup : groups) {
            columnGroup.setColumnMargin(margin);
        }
    }

} 
```

GroupableTableHeader.java

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import javax.swing.table.JTableHeader;
import javax.swing.table.TableColumn;
import javax.swing.table.TableColumnModel;

/**
 * GroupableTableHeader
 * 
 * @version 1.0 20.10.1998
 * @author Nobuo Tamemasa
 */
@SuppressWarnings("serial")
public class GroupableTableHeader extends JTableHeader {

    @SuppressWarnings("unused")
    private static final String uiClassID = "GroupableTableHeaderUI";

    protected List<ColumnGroup> columnGroups = new ArrayList<ColumnGroup>();

    public GroupableTableHeader(TableColumnModel model) {
        super(model);
        setUI(new GroupableTableHeaderUI());
        setReorderingAllowed(false);
        // setDefaultRenderer(new MultiLineHeaderRenderer());
    }

    @Override
    public void updateUI() {
        setUI(new GroupableTableHeaderUI());
    }

    @Override
    public void setReorderingAllowed(boolean b) {
        super.setReorderingAllowed(false);
    }

    public void addColumnGroup(ColumnGroup g) {
        columnGroups.add(g);
    }

    public List<ColumnGroup> getColumnGroups(TableColumn col) {
        for (ColumnGroup group : columnGroups) {
            List<ColumnGroup> groups = group.getColumnGroups(col);
            if (!groups.isEmpty()) {
                return groups;
            }
        }
        return Collections.emptyList();
    }

    public void setColumnMargin() {
        int columnMargin = getColumnModel().getColumnMargin();
        for (ColumnGroup group : columnGroups) {
            group.setColumnMargin(columnMargin);
        }
    }

} 
```

GroupableTableHeaderUI.java

```
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Rectangle;
import java.util.Enumeration;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.swing.JComponent;
import javax.swing.UIManager;
import javax.swing.plaf.basic.BasicTableHeaderUI;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;
import javax.swing.table.TableColumnModel;

public class GroupableTableHeaderUI extends BasicTableHeaderUI {

    protected GroupableTableHeader getHeader() {
        return (GroupableTableHeader) header;
    }

    @Override
    public void paint(Graphics g, JComponent c) {
        Rectangle clipBounds = g.getClipBounds();
        if (header.getColumnModel().getColumnCount() == 0) {
            return;
        }
        int column = 0;
        Dimension size = header.getSize();
        Rectangle cellRect = new Rectangle(0, 0, size.width, size.height);
        Map<ColumnGroup, Rectangle> groupSizeMap = new HashMap<ColumnGroup, Rectangle>();

        for (Enumeration<TableColumn> enumeration = header.getColumnModel().getColumns(); enumeration.hasMoreElements();) {
            cellRect.height = size.height;
            cellRect.y = 0;
            TableColumn aColumn = enumeration.nextElement();
            List<ColumnGroup> groups = getHeader().getColumnGroups(aColumn);
            int groupHeight = 0;
            for (ColumnGroup group : groups) {
                Rectangle groupRect = groupSizeMap.get(group);
                if (groupRect == null) {
                    groupRect = new Rectangle(cellRect);
                    Dimension d = group.getSize(header.getTable());
                    groupRect.width = d.width;
                    groupRect.height = d.height;
                    groupSizeMap.put(group, groupRect);
                }
                paintCell(g, groupRect, group);
                groupHeight += groupRect.height;
                cellRect.height = size.height - groupHeight;
                cellRect.y = groupHeight;
            }
            cellRect.width = aColumn.getWidth();
            if (cellRect.intersects(clipBounds)) {
                paintCell(g, cellRect, column);
            }
            cellRect.x += cellRect.width;
            column++;
        }
    }

    private void paintCell(Graphics g, Rectangle cellRect, int columnIndex) {
        TableColumn aColumn = header.getColumnModel().getColumn(columnIndex);
        TableCellRenderer renderer = aColumn.getHeaderRenderer();
        if (renderer == null) {
            renderer = getHeader().getDefaultRenderer();
        }
        Component c = renderer.getTableCellRendererComponent(header.getTable(), aColumn.getHeaderValue(), false, false,
                -1, columnIndex);

        c.setBackground(UIManager.getColor("control"));

        rendererPane.paintComponent(g, c, header, cellRect.x, cellRect.y, cellRect.width, cellRect.height, true);
    }

    private void paintCell(Graphics g, Rectangle cellRect, ColumnGroup cGroup) {
        TableCellRenderer renderer = cGroup.getHeaderRenderer();
        if (renderer == null) {
            renderer = getHeader().getDefaultRenderer();
        }

        Component component = renderer.getTableCellRendererComponent(header.getTable(), cGroup.getHeaderValue(), false,
                false, -1, -1);
        rendererPane
                .paintComponent(g, component, header, cellRect.x, cellRect.y, cellRect.width, cellRect.height, true);
    }

    private int getHeaderHeight() {
        int headerHeight = 0;
        TableColumnModel columnModel = header.getColumnModel();
        for (int column = 0; column < columnModel.getColumnCount(); column++) {
            TableColumn aColumn = columnModel.getColumn(column);
            TableCellRenderer renderer = aColumn.getHeaderRenderer();
            if (renderer == null) {
                renderer = getHeader().getDefaultRenderer();
            }

            Component comp = renderer.getTableCellRendererComponent(header.getTable(), aColumn.getHeaderValue(), false,
                    false, -1, column);
            int cHeight = comp.getPreferredSize().height;
            List<ColumnGroup> groups = getHeader().getColumnGroups(aColumn);
            for (ColumnGroup group : groups) {
                cHeight += group.getSize(header.getTable()).height;
            }
            headerHeight = Math.max(headerHeight, cHeight);
        }
        return headerHeight;
    }

    @Override
    public Dimension getPreferredSize(JComponent c) {
        int width = 0;
        for (Enumeration<TableColumn> enumeration = header.getColumnModel().getColumns(); enumeration.hasMoreElements();) {
            TableColumn aColumn = enumeration.nextElement();
            width += aColumn.getPreferredWidth();
        }
        return createHeaderSize(width);
    }

    private Dimension createHeaderSize(int width) {
        TableColumnModel columnModel = header.getColumnModel();
        width += columnModel.getColumnMargin() * columnModel.getColumnCount();
        if (width > Integer.MAX_VALUE) {
            width = Integer.MAX_VALUE;
        }
        return new Dimension(width, getHeaderHeight());
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:04:10.920

是的，您需要提供自己的[JTableHeader](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/JTableHeader.html)。困难在于尝试对其进行布局。

您需要查看[JTableHeader.getHeaderRect(column)](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/JTableHeader.html#getHeaderRect%28int%29)，它告诉渲染器如何布局列标题。

您将不得不考虑每个列渲染器的高度以及要使用标签渲染器的组件的高度（我建议使用 Header 的列渲染器作为基础，但这取决于您)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:26:04.547

考虑列之间的空间（当超过两列加入组时 - 组列的右边框变得不可见）。这是解决方案：

```
 public Dimension getSize(JTable table) {
    Component comp = renderer.getTableCellRendererComponent(
        table, getHeaderValue(), false, false,-1, -1);
    int height = comp.getPreferredSize().height; 
    int width  = 0;
    Enumeration e = v.elements();
    int testNum = 0;
    while (e.hasMoreElements()) {
      Object obj = e.nextElement();
      if (obj instanceof TableColumn) {
        TableColumn aColumn = (TableColumn)obj;
        width += aColumn.getWidth()-table.getIntercellSpacing().width;
        width += margin;
      } else {
        width += ((ColumnGroup)obj).getSize(table).width-table.getIntercellSpacing().width;
      }
    }
    return new Dimension(width+2*table.getIntercellSpacing().width, height);
  } 
```

# python - Jinja - 是否有任何内置变量来获取当前 HTML 页面名称？

> ID：11665401
> 
> 赞同：21
> 
> 时间：2012-07-26T08:35:00.557
> 
> 标签：python, html, templates, jinja2

我对 Jinja 和 Flask 很陌生

我想在导航栏中设置不同的背景颜色来指示当前页面。

是否有任何内置的 Jinja 变量或方法可以返回当前的 HTML 页面？如果可能，我想要不需要与 Python 文件通信的代码。

所以如果我目前在`index.html`，它将返回“index”或“index.html”

这是我的模板中的导航代码：

```
<ul>
   {% for item in navigation %}
       <a href="{{url_for(item.route)}}">
       <li>
           {{item.text}}
       </li>
       </a>
   {% endfor %}
</ul> 
```

我想添加`if`语句，以便当前页面将`<li>`获得`class`

```
{% if ??? %}
   <li class="current">
   ...
   </li>
{% else %}
   ...
{% endif %} 
```

谢谢你

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-26T09:04:04.910

jinja2 文档中有一个技巧可以解决您的问题：http: [//jinja.pocoo.org/docs/tricks/](http://jinja.pocoo.org/docs/tricks/)

如果您的列表足够简单，只需使用请求对象，如下所示：

```
<li {% if request.endpoint == item.endpoint %} class='active' {% endif %}>
    <a href="{{url_for(endpoint)}}">{{item.text}}</a>
</li> 
```

通常，我将此代码段写入一个带有显式参数 set 的宏`active`：

```
{% macro render_sitem(endpoint, display, cls='', icon-cls='', active='') %}
<li {% if request.endpoint == endpoint or active == endpoint %} class='active' {% endif %}>
    <a class='{{cls}}' href="{{url_for(endpoint)}}"><i class="{{icon-cls}}"></i> {{display}}</a>
</li>
{% endmacro %} 
```

该列表将类似于：

```
 <ul class="nav nav-list">
     {{render_sitem('page.index',  _('Pages'), icon-cls='icon-sitemap', active=active_page)}}
     {{render_sitem('post.index', _('Posts'), icon-cls='icon-file', active=active_page)}}
     {{render_sitem('user.index', _('Users'), icon-cls='icon-group', active=active_page)}}
 </ul> 
```

因此，如果您有一个扩展或包含您的列表的子页面，您可以设置活动项目，例如：

```
{% set active_page = 'page.index' %} 
```

在您的子页面顶部。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-09T08:42:14.627

在金字塔 1.5 中，Flask 中没有类似 request.endpoint 的方法。

我们使用自定义过滤器 get_endpoint

> request.path|get_endpoint

jinja2_custom_filters.py：

```
from pyramid_jinja2 import Environment

def get_endpoint(str):
    """

    :param str:
    :return:
    """
    return str.split('/')[-1]

env = Environment()
env.filters['get_endpoint'] = get_endpoint 
```

在 development.ini 中：

```
jinja2.filters =
    model_url = pyramid_jinja2.filters:model_url_filter
    route_url = pyramid_jinja2.filters:route_url_filter
    static_url = pyramid_jinja2.filters:static_url_filter
    get_endpoint = path to ... jinja2_custom_filters.get_endpoint 
```

也许它对某人有用:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-06T20:12:24.390

在 Flask 2.0.1 中，该`request`对象在模板中可用。有了这个，您可以轻松地使用它来使用`request.path`属性检查页面。

检查的一个例子是这样的：

```
{% if request.path == "/" %}
  <h1>You are at the root</h1>
{% endif %} 
```

# jodatime - 使用 Joda-Time 在时区获取本地毫秒的最简单方法

> ID：11665404
> 
> 赞同：26
> 
> 时间：2012-07-26T08:35:13.610
> 
> 标签：jodatime

目前，要在本地时区从 1970 年开始获得毫秒数，我会

```
long localMillis = dateTime.withZone(timeZone).toLocalDateTime()
    .toDateTime(DateTimeZone.UTC).getMillis(); 
```

这行得通，但是有没有更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-30T12:20:11.223

`LocalDateTime`您可以通过存储一个引用 1970 年 1 月 1 日的常量，然后计算该`Duration`时间点（对于给定时区）和您关心的时刻之间的a 来使这一点更清楚一点，例如：

```
private static final LocalDateTime JAN_1_1970 = new LocalDateTime(1970, 1, 1, 0, 0);

...

new Duration(JAN_1_1970.toDateTime(someTimeZone), endPointInstantOrDateTime).getMillis(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-29T15:29:08.257

使用 (joda-time-2.3.jar) org.joda.time.LocalDateTime#toDateTime()#getMillis()。

```
org.joda.time.format.DateTimeFormatter dtf = org.joda.time.format.DateTimeFormat.forPattern("yyyy-MM-dd HH:mm:ss.SSS");
org.joda.time.LocalDateTime ldt = dtf.parseLocalDateTime("2014-12-25 12:23:34.567");
System.out.println(ldt);

long delta = ldt.toDateTime().getMillis();
System.out.println(delta);

java.util.Date dt = new java.util.Date(delta);
System.out.println(dt); 
```

# ios - 未使用 iOS Retina 图像

> ID：11665407
> 
> 赞同：1
> 
> 时间：2012-07-26T08:35:31.913
> 
> 标签：ios, xcode

我已经阅读并搜索过，但我仍然没有解决方案。

这里是：我正在构建一个通用应用程序，需要在 UIImageView 中显示图像。你猜怎么着——Xcode 一直忽略我的@2x-images。

我试过“myImage.png”和“myImage”——没有显示@2x。我试过用“~ipad”等命名文件，这里的所有提示......

只有当我硬编码“myImage@2x”时，Xcode 才会使用大版本。在模拟器和设备上也是如此。

有人有其他线索吗？可能是因为我在创建新文件时没有选中“Targeted for iPad”吗？

感谢您提供任何帮助！

编辑：Xcode 4.3.3，iOS 5.1

# python - Django - 查询集校验和

> ID：11665411
> 
> 赞同：3
> 
> 时间：2012-07-26T08:35:39.657
> 
> 标签：python, django, django-queryset, checksum

我有一个类似的查询集

```
ses = Session.objects.all() 
```

我想从中获取校验和（以检查是否有更改）。
通过*更改*，我的意思是创建/删除/更新的行。

我想象：

```
from django.core import serializers
new_chksum = serializers.serialize("json", ses).__hash__() 
```

这是了解查询集中是否发生变化的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:20:43.303

所以这个问题可能非常复杂——如果你只想知道特定表中的任何行是否被触及（比如：我上次检查时是否有任何会话发生变化）。例如，您可以在另一个表中存储一些版本 ID，每次更改 Session 模型的实例时，该值都会增加。

要进行增量，您可能需要使用数据库触发器和序列。

# scope - 红5。我的项目没有范围

> ID：11665412
> 
> 赞同：0
> 
> 时间：2012-07-26T08:35:49.030
> 
> 标签：scope, red5

我无法使用 Red5 服务器创建我的应用程序。我有一个错误

```
NetConnection.Connect.Rejected: No scope 'TestEcho' on this server.
NetConnection.Connect.Closed 
```

我做了类似 ping 应用程序的操作来测试一切是否正常。我的课看起来像这样：

```
 package org.red5.core;

import org.red5.server.adapter.ApplicationAdapter;
import org.red5.server.api.IConnection;
import org.red5.server.api.IScope;
import org.red5.server.api.service.ServiceUtils;

public class Application extends ApplicationAdapter {

    public void appDisconnect(IConnection conn)
    {
        super.appDisconnect(conn);
    }

    public boolean appStart()
    {
        return true;
    }

    public void appStop()
    {}

    public boolean appConnect(IConnection conn, Object[] params)
    {
        return true;
    }

    public Object echo(Object p)
    {
        return p;
    }

} 
```

我也有 red5-web.xml 和 red5-web.properties

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>

    <!--
    Defines a properties file for dereferencing variables
    -->
    <bean id="placeholderConfig" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location" value="/WEB-INF/red5-web.properties" />
    </bean>

    <!--
    Defines the web context
    -->
    <bean id="web.context" class="org.red5.server.Context" 
        autowire="byType" />

    <!--
    Defines the web scopes
    -->
    <bean id="web.scope" class="org.red5.server.WebScope"
         init-method="register">
        <property name="server" ref="red5.server" />
        <property name="parent" ref="global.scope" />
        <property name="context" ref="web.context" />
        <property name="handler" ref="web.handler" />
        <property name="contextPath" value="${webapp.contextPath}" />
        <property name="virtualHosts" value="${webapp.virtualHosts}" />
    </bean>

    <!--
    Defines the web handler which acts as an applications endpoint
    -->
    <bean id="web.handler" 
        class="org.red5.core.Application" 
        singleton="true" />

</beans> 
```

和

```
webapp.contextPath=/TestEcho
webapp.virtualHosts=127.0.0.1 
```

所以，这很奇怪，但是在 echo-demo 应用程序中我无法连接到 rtmp://localhost:1935/TestEcho 而且我想注意到演示应用程序运行良好，例如 oflaDemo。问题出在哪里？....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T02:29:53.720

你使用哪个版本？如果您使用 red5 1.0，请使用

```
<bean id="web.scope" class="org.red5.server.scope.WebScope" init-method="register"> 
```

代替

```
<bean id="web.scope" class="org.red5.server.WebScope" init-method="register"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:11:13.937

检查以下内容

*   在 webapp 文件夹中检查您的文件夹名称。它应该是“TestEcho”
*   检查 web.xml 文件中的 webAppRootKey
*   在 red5 conf 文件夹的 logback.xml 中启用调试。启动时检查您的日志。

参考：[https ://github.com/arulrajnet/red5Demo/wiki/Different-context-name](https://github.com/arulrajnet/red5Demo/wiki/Different-context-name)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T11:55:47.140

我是 Red5 的大佬。我也遇到过同样的问题。在搜索了很多论坛后，我已经弄清楚了。在我的搜索过程中，我也完成了您的查询。所以我认为如果我在这里发布解决方案会很有帮助。

问题在于有重复的 red5.jar 文件。在我的场景中，我的 RED5_HOME 中有一个 jar 文件，另一个在 myapp/WEB-INF/lib 文件夹中。我们不应该有两个 Red5.jar 文件。red5.jar 必须在 RED5_HOME 目录中。所以我已经从 myapp/WEB-INF/lib 文件夹中删除了所有的 jar，包括 red5.jar。它解决了我的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T08:05:14.820

我只是遇到了同样的问题，这是虚拟主机名称的配置问题。

`red5-web.properties`我通过从更改`webapp.virtualHosts=localhost`为修复`webapp.virtualHosts=*`。

希望能帮助到你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T21:59:36.373

检查一些非常简单的事情——如果你在 Windows 上——red5 默认安装并启动一个服务。然后，您可能手动复制了另一个版本的 red5 - 您用于开发。这就是发生在我身上的事情——有一个 Windows 服务——运行 red5——早就被遗忘了。而我实际上是在我的文件系统中运行另一个版本的 red5。

# android - Android：单击地图中的集群图标时创建信息框

> ID：11665415
> 
> 赞同：1
> 
> 时间：2012-07-26T08:35:51.117
> 
> 标签：android, android-maps, android-dialog

在我的地图项目中，我在地图中放置了集群图标。我只想在单击图标时创建信息框。单击群集图标时，我已经更改了图标图像。添加了我想在 infoBox 中显示图标的详细信息。

我已经编写了一个代码来更改自定义覆盖类的 onTap() 中的图标，所以我需要那个地方的正确代码

请给我正确的方法来做到这一点......

# c# - WCF 服务 C# 中的 System.TimeoutException

> ID：11665417
> 
> 赞同：1
> 
> 时间：2012-07-26T08:35:58.030
> 
> 标签：c#, wcf, timeout

我的 WCF 服务有问题。在程序完美运行三个小时后，我得到了以下异常。

> ```
> System.TimeoutException: The request channel timed out while waiting for a reply after 00:00:59.9843998\. Increase the timeout value passed to the call to Request or increase the SendTimeout value on the Binding. The time allotted to this operation may have been a portion of a longer timeout 
> ```

我不认为增加超时将是一个解决方案。我认为只是几分钟后会抛出异常。也许我必须更改侦听器服务器上的任何设置。难道是我的机器在一段时间后关闭了端口？我这样称呼我的服务：

```
IServices service = null;
                    service = ChannelFactory<IServices>.CreateChannel(
                        new BasicHttpBinding(),
                        new EndpointAddress(
                        port));
                    result = service.addAppointments(appList); 
```

我的听众：

```
ServiceHost host = new ServiceHost(service);
                    host.AddServiceEndpoint(typeof(
                            IServices),
                            new BasicHttpBinding(), port);
                    host.Open(); 
```

就这样。到目前为止，无需进一步设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:13:29.170

您可以通过配置为 WCF 添加跟踪器。这将帮助您找出问题所在。

[http://msdn.microsoft.com/en-us/library/ms733025.aspx](http://msdn.microsoft.com/en-us/library/ms733025.aspx)

[http://msdn.microsoft.com/en-us/library/ms732023.aspx](http://msdn.microsoft.com/en-us/library/ms732023.aspx)

# java - 如何使用 UnboundID LDAP SDK 在 LDAP 中使用用户 ID 获取 DN

> ID：11665418
> 
> 赞同：4
> 
> 时间：2012-07-26T08:35:59.467
> 
> 标签：java, ldap-query

当我拥有的唯一参数是用户 ID 时，我正在尝试获取用户的 DN（可能不止一个）

如您所见，我也在使用 UnboundID LDap SDK：

```
public String getCustomerAdminDN(String uid)
{

    String result =null;
    String filter = "uid=" +uid;
    try {
        SearchResult searchResult = this.ldapConnection.search("",SearchScope.SUB,filter);

        result = searchResult.getMatchedDN();
    } catch (LDAPSearchException e) {
        throw new RuntimeException("Error in the searching query :" + e.getMessage());
    }

  return result;
} 
```

假设我的 uid 属于以下 DN

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T17:21:23.903

这种情况下的问题是“匹配的 DN”元素不是您认为的那样。它不是匹配搜索条件的条目的 DN（实际上可能是零个、一个或多个条目）。如果操作的目标不存在，则可以提供响应的匹配 DN 元素。对于搜索操作，如果您指定了一个不存在的搜索基础 DN，那么匹配的 DN 可能会指定与您指定的、服务器中实际存在的条目最接近的条目的 DN。例如，如果您指定了“ou=nonexistent,dc=example,dc=com”的搜索基础 DN，它不存在但条目“dc=example,dc=com”条目确实存在，则服务器可能会返回匹配的 DN 值“dc=example,dc=com”。

如果您的搜索匹配一个或多个条目，那么（除非您使用搜索结果侦听器，您在上面提供的示例中不是这种情况），匹配的条目将可以通过 getSearchEntries 方法访问。例如：

```
 List<SearchResultEntry> searchEntries = searchResult.getSearchEntries();
 if (searchEntries.size() != 1)
 {
   // The search didn't match exactly one entry.
 }
 else
 {
   SearchResultEntry entry = searchEntries.get(0);
   result = entry.getDN();
 } 
```

此外，当部分值可能来自用户输入时，从字符串表示构造过滤器时应该小心，因为这可能会导致某种注入攻击。LDAP 注入比 SQL 更困难且通常更温和，但它并非完全不存在。因此，建议不要：

```
 String filter = "uid=" + uid; 
```

你用：

```
 Filter filter = Filter.createEqualityFilter("uid", uid); 
```

# java - 如何处理异步套接字？

> ID：11665425
> 
> 赞同：2
> 
> 时间：2012-07-26T08:36:38.287
> 
> 标签：java, sockets, asynchronous

我有一个大问题，我不知道这是否可能，但我正在寻找一个教程或类似的帖子来帮助我处理异步套接字。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:38:58.783

你可以看[这里（我的帖子并使用答案：munyemgm）](https://stackoverflow.com/questions/11628420/server-client-stop-1-thread-1-clients)

Java.nio 是解决方案。

# browser - 如何将 HTMLUnit 页面呈现给浏览器？

> ID：11665432
> 
> 赞同：0
> 
> 时间：2012-07-26T08:37:08.883
> 
> 标签：browser, render, htmlunit

我正在使用 HTMLUnit 进行网站抓取。我在浏览器中显示 Html 页面时遇到问题。这意味着当我在网站上抓取网站添加新页面时。所以我需要通过我的 HTMLUnit 应用程序将该页面显示给浏览器。那么如何将 HTMLUnit 页面呈现给浏览器呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-16T18:30:56.077

据我了解您的需求，您使用 HtmlUnit 加载页面，并希望在对呈现的代码进行一些操作后在浏览器中显示它。

一般来说，渲染页面需要时间，并且我看到了一些我不喜欢的睡眠解决方案。

有两种方法：

1.  page.asText() - 显示渲染文本
2.  page.asXml() - 在渲染前显示文本

但这两个功能都不是您想要的。

一个奇怪但仍然有效的解决方案是保存呈现的页面，然后用浏览器加载它：

```
// Get page as Html
HtmlPage page = wc.getPage("http://stackoverflow.com/");

// Generate random file in temp directory
File file = File.createTempFile("HtmlUnit", ".html");
file.delete(); // Delete is needed, because page.save can't overwrite it

//save page image
page.save(file);

//Open the page with a browser
Runtime.getRuntime().exec("C:/Program Files/Internet Explorer/iexplore.exe " + file); 
```

# iphone - 使用用户铃声

> ID：11665439
> 
> 赞同：0
> 
> 时间：2012-07-26T08:37:47.210
> 
> 标签：iphone, ringtone

我正在寻找一种方法来使用从 Itunes 手动传输的用户音调。我知道使用 Apple 系统音调是不可能的，但我只想使用用户的女贞音调。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:39:45.830

您无法访问用户铃声，甚至无法访问通过 iTunes 添加的自定义铃声。没有 API 允许这样做。

# .htaccess - 使用 .htaccess 将所有流量重定向到我的主页

> ID：11665443
> 
> 赞同：0
> 
> 时间：2012-07-26T08:38:04.333
> 
> 标签：.htaccess

有人可以帮我配置我的 .htaccess 吗？我已经阅读了很多关于如何将所有流量重定向到一个页面的教程，但这对我没有帮助。

我的问题是，我之前有一个 wordpress 网站，我决定删除所有文件并卸载 wordpress 下的所有内容。简而言之，我在我的服务器上建立了一个新的 public_html。

我之前给我的客户提供了永久链接，例如[http://domain.com/web/pricing/](http://domain.com/web/pricing/)或[http://domain.com/web-login/uploads/image.jpg](http://domain.com/web-login/uploads/image.jpg)。一些链接包含许多子文件夹，例如 ..domain.com/web/me/you/anyone/none。

我正在使用这个 .htaccess 代码

```
ErrorDocument 404 /notfound.php
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

我的服务器上现在只有两个页面；index.php 和 notfound.php。上面的代码只有在我尝试访问这些类型的 url **..domain.com/web**和**..domain.com/web.php 时才有效**。

如果我尝试访问**..domain.com/web/me/you/anyone/none**或什至像**..domain.com/web.php/**这样末尾带有斜线的短链接，它会给我找不到。 php 但有很多错误。未加载 CSS 和 javascript。只有文字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T06:35:51.950

将此添加到您的 2 页的标题中：

```
<base href="/"> 
```

添加到 URI 的附加路径可能使相对链接使用不正确的 URI 基。所以如果你有：

```
<img src="image/foo.jpg"> 
```

当您请求**domain.com/web.php**时它工作正常，因为 URI 基础是`/`，但是如果您请求**domain.com/web/me/you/anyone/none**，那么 URI 基础是`/web/me/you/anyone/`并且浏览器会认为图像在`/web/me/you/anyone/image/foo.jpg`.

# android - CSS3 变换的 rotate3D 在 Android 中不起作用

> ID：11665447
> 
> 赞同：1
> 
> 时间：2012-07-26T08:38:13.763
> 
> 标签：android, html, css

我使用 Phonegap 和 HTML5 (jqueryMobile) 创建了一个应用程序。我已经为一个 div 放置了 rotate3D，

它在 google chrome 和 Safari 中运行良好，但在 Android 2.3+ 中无法运行有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:28:24.553

我认为这是android浏览器的错误。我做了一个函数来测试是否支持rotate3d，它说是：

```
function styleSupport( prop ) 
{
    var vendorProp;
    var supportedProp;
    // capitalize first character of the prop to test vendor prefix
    var capProp     = prop.charAt(0).toUpperCase() + prop.slice(1);
    var prefixes    = [ "Moz", "Webkit", "O", "ms" ];
    var div         = document.createElement( "div" );

    if ( prop in div.style ) 
    {
        //browser supports standard CSS property name
        supportedProp = prop;
    } 
    else 
    {
        //otherwise test support for vendor-prefixed property names
        for ( var i = 0; i < prefixes.length; i++ ) 
        {
            vendorProp = prefixes[i] + capProp;
            if ( vendorProp in div.style )
            {
                supportedProp = vendorProp;
                break;
            }
        }
    }
    // avoid memory leak in IE
    div = null;    
    return supportedProp;
}
alert(styleSupport('perspective'));
alert(styleSupport('transform')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:35:00.743

如您所见，Android 2.3 不支持 CSS transforms3D：http: [//caniuse.com/#feat=transforms3d](http://caniuse.com/#feat=transforms3d)

尝试升级到 Android 4（它适用于我）

# java - 将 Maps.uniqueIndex 与 Guava 一起使用时拒绝值

> ID：11665449
> 
> 赞同：3
> 
> 时间：2012-07-26T08:38:18.127
> 
> 标签：java, functional-programming, guava

我想知道当我们使用 Guava 方法时是否可以丢弃一些值。

```
public static Function<Locale, String> GET_LANGUAGE = new Function<Locale, String>() {
    @Override
    public String apply(Locale input) {
        return StringUtils.isBlank(input.getLanguage()) ? "NO_LANGUAGE" : input.getLanguage();
    }
};

Maps.uniqueIndex(availableLocales, GET_LANGUAGE); 
```

我知道我可以使用多地图，因为许多语言环境可以使用相同的语言，但它实际上符合我的需求。

例如，我希望没有任何语言的语言环境不在输出地图中。由于我不能返回 null 或类似的东西，我将使用不相关语言的语言环境重定向到键“NO_LANGUAGE”。问题是仍然可以检索该值。

是否有某种“/dev/null”映射键，或者我是否总是需要在使用谓词之前/之后进行一些过滤？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T09:21:13.250

番石榴贡献者在这里。

没有。做一个过滤器......或者可能更有效，只需自己构建地图，不要`Maps.uniqueIndex`完全使用。无论如何，它可能更简单，更短。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T10:18:47.873

我想补充一点，如果[这个问题](https://code.google.com/p/guava-libraries/issues/detail?id=968)得到解决，您将能够：

```
ImmutableMap<String, Locale> index = FluentIterable.from(availableLocales)
    .filter(NOT_BLANK_LANGUAGE)
    .uniqueIndex(GET_LANGUAGE);

public static Predicate<Locale> NOT_BLANK_LANGUAGE = new Predicate<Locale>() {
  @Override
  public boolean apply(Locale input) {
    return !StringUtils.isBlank(input.getLanguage());
  }
};

public static Function<Locale, String> GET_LANGUAGE = new Function<Locale, String>() {
  @Override
  public String apply(Locale input) {
    return input.getLanguage();
  }
}; 
```

使用 Java 8 lambda 时，它会更加简洁。

# drupal - 如何在 Open Atrium 中查看提交？

> ID：11665466
> 
> 赞同：2
> 
> 时间：2012-07-26T08:39:17.730
> 
> 标签：drupal, redmine, open-atrium

我在所有项目中都使用 Redmine 来跟踪代码和提交。但现在我被要求使用与 Red mine 非常相似的 Open Atrium。我总是在 redmine 的存储库中看到提交，并看到提交的代码的差异。

有没有机会我可以看到提交以及对 Open atrium 中的提交所做的代码更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:39:50.060

Open Atrium（以及随后的 Drupal）没有开箱即用的东西，但您可能想看看[版本控制 API](http://drupal.org/project/versioncontrol)模块：

> 版本控制 API 是 Drupal 与各种版本控制系统集成的引擎。重点主要是使用规范的服务器端存储库。它提供了一些基本工具，允许执行诸如历史列表、提交访问控制、新代码进入时触发的操作以及直接磁盘存储库管理等操作。

它目前具有 Git、SVN、CVS、Mercurial 和 Bazaar 的扩展模块。

# jquery-ui - jquery-ui switchClass 在 Chrome 下失败

> ID：11665467
> 
> 赞同：0
> 
> 时间：2012-07-26T08:39:20.873
> 
> 标签：jquery-ui, google-chrome, animation

当我尝试将 'right' 属性从以 px 为单位的值更改为以百分比为单位的值时，我遇到了 jquery-ui switchClass 完成的动画问题。该问题仅在 Chrome 下发生（在 FireFox 或 IE 下工作）。

动画应该只是将 div 的 right 属性从“90px”更改为“20%”，但 div 首先会转到屏幕的另一部分。当我查看调试器工具时，px 似乎被解释为 % ：值的序列是 90px、89%、88%、... 21%、20%。

以下代码重现了该问题：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
        <style>
            .class1 {width:100px; height:50px; position:absolute; right:90px; background-color:#F9EDBE;}
            .class2 {width:100px; height:50px; position:absolute; right:20%; background-color:#F9EDBE;}
        </style>
    </head>
    <body>
        <div id="myDiv" class="class1" onclick="$('#myDiv').switchClass('class1', 'class2', 5000);">Click me</div>
    </body> 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:41:09.047

您可以尝试使用 'this' 而不是 jQuery 选择器。还尝试添加与“id”具有相同值的“name”属性。

# php - 堆栈内的PHP Echo？

> ID：11665472
> 
> 赞同：-1
> 
> 时间：2012-07-26T08:39:42.267
> 
> 标签：php, stack, echo

我有以下代码：

```
case "links":
        $SideContent ='<a href="http://www.EXAMPLE.net" target="_blank">Example Link</a>';
        break; 
```

如何用从我的列表中提取的品牌替换显示“EXAMPLE”的链接区域 - 我已经在页面上对其进行了回显，但不确定如何在现有 php 代码中使用回显：

```
<?php echo $brand_to_use; ?> 
```

IE我的目标如下：

```
<a href="http://www.$brand_to_use.net" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:41:20.637

如果我正确理解了你的问题，

```
$SideContent ='<a href="'.$brand_to_use.'" target="_blank">'.$brand_to_use.'</a>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:42:32.243

```
case "links":
        $SideContent ='<a href="http://www.'.$brand_to_use.'.net" target="_blank">Example Link</a>';
        break; 
```

# iphone - 使用控制器控制其他控制器时的视图大小问题

> ID：11665475
> 
> 赞同：1
> 
> 时间：2012-07-26T08:39:53.293
> 
> 标签：iphone, ios, uiviewcontroller, rotation, uisegmentedcontrol

我正在开发一个基于 UISegmentControl 切换视图的 ViewController。[在查看有关堆栈溢出](https://stackoverflow.com/questions/2118358/uisegmentedcontrol-best-practice)的这个问题后，我在网上找到了一个[教程](http://redartisan.com/2010/5/26/uisegmented-control-view-switching)

主视图控制器是一个选项卡视图控制器，然后在其中一个选项卡上有一个包含分段控件的 uinavigationcontroller（希望你还在我身边）。我遇到的问题是分段控件中视图的高度。第一个选定的视图已正确调整大小，但段控件中的所有其他视图都忽略了那里有一个选项卡栏并且视图位于选项卡栏下方的事实。

我尝试添加以下内容，但似乎没有帮助。

```
controller1.view.autoresizesSubviews = YES;
controller1.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

controller2.view.autoresizesSubviews = YES;
controller2.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

有任何想法吗？

另一个问题是旋转。如果我在分段视图上旋转。当前选择的视图会旋转，如果我改变segment，视图不会旋转到横向，只会占屏幕的一小部分（如下图）。

我已经覆盖了 SegmentedViewController 中所有与旋转相关的方法，并遍历了它正在管理的视图数组并调用了那里的方法。不幸的是，这似乎没有完成这项工作。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
{
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];     

    for (UIViewController * viewController in self.segmentedViewControllers) 
        [viewController willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];

}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation 
{
    [super didRotateFromInterfaceOrientation:fromInterfaceOrientation];    

    for (UIViewController * viewController in self.segmentedViewControllers) 
        [viewController didRotateFromInterfaceOrientation:fromInterfaceOrientation];

}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
{
    [super willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];    

    for (UIViewController * viewController in self.segmentedViewControllers) 
        [viewController willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];    
} 
```

等等……</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:14:33.143

设法通过以不同的方式实现它来解决这个问题，如下所示[http://redartisan.com/2010/6/27/uisegmented-control-view-switching-revisited](http://redartisan.com/2010/6/27/uisegmented-control-view-switching-revisited)

# excel - 检查是否有任何行重复并突出显示

> ID：11665479
> 
> 赞同：1
> 
> 时间：2012-07-26T08:40:05.913
> 
> 标签：excel, vba

我在（Sheet4）A 到 I 列中有数据：

我正在尝试比较所有行的数据（仅在 A 列和 B 列上）以查看是否有任何行重复，如果是：excel 应该突出显示两行。例子：

```
AB C......我

1 x

3 瓦

e 5 q

s 1 o

```

第 1 行和第 4 行应突出显示，因为 A 列和 B 列的值相同。

我不应该修改工作表（不应该对工作表进行列或行的修改），并且行数并不总是已知的（并非所有文件都相同）。

有没有简单的方法（使用宏）来做到这一点？？？

这是我尝试过的尝试，但它将我的文件增加到 7MB ！！！！！！我确信应该有一种更简单的方法来比较未知行数的行，如果存在重复项，只需突出显示它们：

```
Public Sub duplicate()
    Dim errorsCount As Integer
    Dim lastrow As Integer
    Dim lastrow10 As Integer
    errorsCount = 0

    lastrow = Sheet4.Cells(Rows.Count, "A").End(xlUp).Row 'is the row number of the last non-blank cell in the specified column
    lastrow10 = lastrow
    Sheet10.Range("B1:B" & lastrow10).Value = Sheet4.Range("A1:A" & lastrow).Value
    Set compareRange = Sheet10.Range(column + "2:" & Sheet10.Range(column + "2").End(xlDown).Address)
    For Each a In Sheet10.Range(column + "2:" & Sheet10.Range(column + "2").End(xlDown).Address)
        c = a.Value
        If c <> Null Or c <> "" Then
            If name = "testing" Then
                       If WorksheetFunction.CountIf(compareRange, c) > 1 Then
                        a.Interior.ColorIndex = 3
                        errorsCount = errorsCount + 1
                       End If
            End If
        End If
    Next a

    If errorsCount > 0 Then
        MsgBox "Found " + CStr(errorsCount) + " errors"
    Else
        MsgBox " No errors found."
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:39:51.610

傻傻的回答你。

J1 或只是复制表。

J1 =CONCATENATE(A1,"#",B1) > 向下拖动 > J:J > 条件格式 > 突出显示单元格规则 > 重复值。

（* 将 # 替换为您认为在原始 A:A 和 B:B 中不可能的任何字符串。）

我一直这样做。

要收集所有重复项，只需按颜色排序。

# php - Web应用程序可以打开客户端存在的pdf文件吗

> ID：11665480
> 
> 赞同：1
> 
> 时间：2012-07-26T08:40:06.123
> 
> 标签：php, javascript, asp-classic, client

我有一个 ASP 页面，用户在其中从列表框中选择一个值（例如，drawingId），并根据该值，ASP 构建/计算一个文件路径，例如 c:\drawings\file1.pdf，以便显示这个 pdf 文件给用户。此路径指的是存储这些 pdf 文件的客户端计算机。服务器查询数据库并且只知道drawingId和客户端计算机上的路径之间的关联。

我怎样才能打开这个pdf文件？

我读过类似的问题，例如[我用 Java 编写的 Web 应用程序如何在客户端打开文件？](https://stackoverflow.com/questions/4806443/how-can-my-web-application-written-in-java-open-a-file-on-the-client-side)或者[javascript 可以访问文件系统吗？](https://stackoverflow.com/questions/1087246/can-javascript-access-a-filesystem)，但我不明白如何进行。

我希望它适用于所有浏览器，并在 PHP 站点中实现此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:07:46.343

使用`file:///` 例如`file:///c:/filename.pdf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:54:55.697

好吧，我猜在用户从列表框中选择选项后，您可以构建路径并将用户重定向到应该打开 pdf 文件的路径

例如。

```
file:///C:/foldername/filename.pdf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-02T11:20:27.153

无法从服务器端代码打开客户端文件，因为它在服务器端运行，也由于某些安全原因，浏览器不允许浏览客户端位置

参考链接[从链接打开本地文件夹](https://stackoverflow.com/questions/5246292/open-local-folder-from-link)

# c# - 获取类型并将第二个变量转换为该类型

> ID：11665481
> 
> 赞同：3
> 
> 时间：2012-07-26T08:40:13.023
> 
> 标签：c#, generics

> **可能重复：**
> [C#泛型列表<T>如何获取T的类型？](https://stackoverflow.com/questions/557340/c-sharp-generic-list-t-how-to-get-the-type-of-t)

我有一个列表变量，我想获取该列表的类型并将第二个变量转换为该类型。为了清楚起见，我添加了下面的代码。

目前我有以下内容：

```
return _ValueList.Any<FieldType>(x => x.Equals((FieldType)fieldValueObject)); 
```

我想做这样的事情：

```
Type valueType = _ValueList.GetType();

return _ValueList.Any<FieldType>(x => x.Equals((valueType)fieldValueObject)); 
```

任何帮助将不胜感激。

更新：

当 fieldValueObject 的类型为 Int16 并且我尝试将其转换为 Int32 时，将引发无效的转换异常。

更新 2：

我使用了以下解决方案：

```
 if (fieldValueObject.GetType() == typeof(Int16))
        {
            fieldValueObject = Convert.ToInt32(fieldValueObject);
        }
        return _ValueList.Any<FieldType>(x => x.Equals(fieldValueObject)); 
```

它不漂亮，但它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:53:55.827

```
public bool ContainsAny<T>(List<T> valueList, T fieldValueObject)
{
    return valueList.Any(x => x.Equals(fieldValueObject));
} 
```

或者

```
public bool ContainsAny<T>(List<T> valueList, object fieldValueObject)
{
    return valueList.Any(x => x.Equals((T)fieldValueObject));
} 
```

**请注意，第二个可能会引发 InvalidCastException。**

# android - 如果在 Android 中不再可见，则 Activity 被系统杀死的问题

> ID：11665483
> 
> 赞同：6
> 
> 时间：2012-07-26T08:40:30.273
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我的应用程序中有活动（A，B，C）。当我启动应用程序活动 A 时：

```
 A:onCreate()
  A:onStart()
  A:onResume() 
```

使用意图我正在调用第二个活动（A-> B）：

```
 A:onPause()
  B:onCreate()
  B:onStart()
  B:onResume()
  A:onStop() 
```

然后我点击“主页”按钮所以应用程序进入后台：现在

```
 B:onPause()
  B:onStop() 
```

1 或 2 小时后，我再次转到设备中的主页，然后单击它运行的应用程序图标，如下所示：

```
 B:onDestroy()
 A:onRestart()
 A:onStart()
 A:onResume() 
```

但我需要像这样退出哪一项活动，

```
B:onRestart()
B:onStart()
B:onResume() 
```

我读过一些文章，它说该活动因不再可见而被系统杀死。有没有可能解决我的问题...

提前致谢...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T16:54:35.227

You may be confusing two different things here:

1.  Android does not **kill an activity** if it needs memory. What it does is that it kills the whole **process** that the activity is running in. In general that means that Android kills **all** of your activities in this situation. However, it remembers the activity stack and when the user returns to the application, Android will create a new process and then recreate each activity (in turn, as needed). It starts by recreating the activity that was on the top of the activity stack (ie: where the user left the application).

2.  Android assumes that if the user leaves a **task** for a long period of time (I think this is something like 30 minutes) then he is no longer interested in that task and there is no point in remembering where the user was in the activity stack of that task because he probably doesn't care anymore. In this case, what happens is that when the user returns to the task (or restarts the application that was on the top of the activity stack in that task) Android simply **clears the task back to the root activity**. This has the effect that it looks like the application is **starting all over again**. This is the desired (and documented behaviour).

What you want to do is prevent Android from clearing the task in situarion #2\. You do it by adding

```
 android:alwaysRetainTaskState="true" 
```

to the `<activity>` tag of the **root activity** (ie: the activity that starts your application, the one with `ACTION_MAIN` and `CATEGORY_LAUNCHER`).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:43:23.383

我不相信这是你可以控制的事情。如果您的 Activity 长时间处于后台，同时其他应用程序需要内存，系统将终止您的 Activity 以释放内存。

# javascript - 将递归函数转换为异步 CPS 实现 (javascript)

> ID：11665484
> 
> 赞同：2
> 
> 时间：2012-07-26T08:40:32.260
> 
> 标签：javascript, jquery, dom, asynchronous, callback

这是我的功能。

```
 function duplicate_step_through_highlighted (element_jq, target_jq, char_cb) {
        console.log( element_jq);
        var contents = element_jq.contents();
        for (var i = 0 ; i < contents.length; ++i) {
            // if text node, step
            if (contents[i].nodeType === 3) {
                // insert empty text node
                var new_tn = document.createTextNode('');
                target_jq.append(new_tn);

                // iterate it 
                var text = contents[i].nodeValue;
                for (var j = 0; j < text.length; j++) {
                    char_cb(text[j],new_tn);
                    new_tn.nodeValue += text[j];
                    // *** I want an async delay here *** 
                }
            } else { // type should be 1: element
                // target_jq gets a duplicate element inserted, copying attrs
                var new_elem = $(contents[i].cloneNode(false)).appendTo(target_jq);
                duplicate_step_through_highlighted($(contents[i]),$(new_elem),char_cb);

                // then a recursive call is performed on the newly created element as target_jq
                // and the existing one as element_jq. char_cb is passed in
            }
        }
    } 
```

我正在做的是通过一次重建一个字符来重建一个 HTML 元素。这样做是有充分理由的，我想要“输入”它的视觉效果。

所以现在没有延迟，所以我的元素会立即复制。我已经检查过结果是否一致，但我越来越清楚我可能需要完全重新编写功能，以便能够在插入每个字符后进行异步延迟。

我需要重写它并有一个堆栈来跟踪我在元素中的位置吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T08:58:30.783

您可能想看看我最近的[答案](https://stackoverflow.com/a/11657799/1048572)或[这个较旧的](https://stackoverflow.com/a/10237157/1048572)答案（[Demo](http://jsfiddle.net/pZb8W/2/)），了解如何实现这种效果。

* * *

提示：不要将元素克隆到新的元素中，只需隐藏它们并让它们部分显示。

此外，除了原生 DOM 元素之外，根本不处理 jQuery 实例可能更容易。所以是的，重写可能会:-)而且我认为它也需要一个堆栈。

```
function animate(elements, callback) {
/* get: array with hidden elements to be displayes, callback function */
    var i = 0;
    (function iterate() {
        if (i < elements.length) {
            elements[i].style.display = "block"; // show
            animateNode(elements[i], iterate); 
            i++;
        } else if (callback)
            callback();
    })();
    function animateNode(element, callback) {
        var pieces = [];
        if (element.nodeType==1) {
            while (element.hasChildNodes())
                pieces.push(element.removeChild(element.firstChild));
            setTimeout(function childStep() {
                if (pieces.length) {
                    animateNode(pieces[0], childStep); 
                    element.appendChild(pieces.shift());
                } else
                    callback();
            }, 1000/60);
        } else if (element.nodeType==3) {
            pieces = element.data.match(/.{0,2}/g); // 2: Number of chars per frame
            element.data = "";
            (function addText(){
                element.data += pieces.shift();
                setTimeout(pieces.length
                    ? addText
                    : callback,
                  1000/60);
            })();
        }
    }
}

animate($("#foo").children()); 
```

[jsfiddle.net 上的演示](http://jsfiddle.net/y9PJg/24/)

这个怎么运作：

*   该`addText`函数将一些字符添加到当前文本节点，并为自己设置超时 - 动画！如果一切都完成，它会调用该`callback`函数。
*   `childStep`在子节点上运行动画，并将自身作为回调传递，直到没有子节点离开 - 然后调用该`callback`函数。
*   两者一起`animateNode`递归地运行在节点树上并按顺序为文本节点设置动画。
*   通过将自身作为回调传递，函数在所有输入元素上调用（取消隐藏它们之后）`iterate`。`animateNode`在所有输入元素完成后，它调用`callback`作为第二个参数给定的外部元素`animate`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-19T18:42:19.370

这是我的解决方案，它是一种更高效、更清洁、更快捷的方法：

```
var start = 0; //Makes sure you start from the very beggining of the paragraph.
var text = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras viverra sem dolor, nec tempor purus luctus vitae. Nulla massa metus, iaculis et orci euismod, faucibus fringilla metus. Sed pellentesque in libero nec.'; //Your text
var speed = 14; //Of course you can choose your own speed, 0 = instant, the more you add the slower it gets.
function typeWriter() {
  if (start < text.length) {
    document.querySelector('.demo').innerHTML += text.charAt(start);
    start++;
  }
  setTimeout(typeWriter, speed);
}
```

```
<body onload="typeWriter();">

<p class="demo"></p>

</body>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-09T12:47:25.937

我制作了一个简单的脚本在我的网站上使用，它可能会帮助那些希望达到这种效果的人。

这是Github 上的 repo[链接](https://github.com/fjunqueira/typer.js)，解释如下：

```
class Typer {

    constructor(typingSpeed, content, output) {

        this.typingSpeed = typingSpeed;
        // Parses a NodeList to a series of chained promises
        this.parseHtml(Array.from(content), output);
    };

    makePromise(node, output) {

        if (node.nodeType == 1) // element 
        {
            // When a new html tag is detected, append it to the document
            return new Promise((resolve) => {
                var tag = $(node.outerHTML.replace(node.innerHTML, ""));
                tag.appendTo(output);
                resolve(tag);
            });

        } else if (node.nodeType == 3) // text
        {
            // When text is detected, create a promise that appends a character
            // and sleeps for a while before adding the next one, and so on...
            return this.type(node, output, 0);
        } else {
            console.warn("Unknown node type");
        }
    }

    parseHtml(nodes, output) {
        return nodes.reduce((previous, current) => previous
            .then(() => this.makePromise(current, output)
                .then((output) => this.parseHtml(Array.from(current.childNodes), output))), Promise.resolve());
    }

    type(node, output, textPosition) {
        var textIncrement = textPosition + 1;

        var substring = node.data.substring(textPosition, textIncrement);

        if (substring !== "") {
            return new Promise(resolve => setTimeout(resolve, this.typingSpeed))
                .then(() => output.append(substring))
                .then(() => this.type(node, output, textIncrement));
        }

        return Promise.resolve(output);
    }
} 
```

# php - SQL 查询以给定日期/时间格式选择当前或特定月份的值

> ID：11665487
> 
> 赞同：1
> 
> 时间：2012-07-26T08:40:40.107
> 
> 标签：php, mysql, sql

我已将数据库（mysql）中的日期保存为 `(d-m-Y H:i:s)`

如何编写 sql 查询来选择仅适用于当前月份或特定月份的所有值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T08:48:26.513

```
SELECT *
FROM table
WHERE DATE_FORMAT(date_field,'%m-%Y') = '07-2012'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T08:44:00.417

以 MySQL DATE 格式存储您的日期并使用以下查询：

```
SELECT 
        * 
    FROM 
        table 
    WHERE 
        MONTH(date_field) = MONTH(CURRENT_DATE) 
    AND 
        YEAR(date_field) = YEAR(CURRENT_DATE) 
```

将日期存储为字符串/varchar 是一个非常糟糕的主意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T08:44:21.713

```
SELECT * FROM `your_table` WHERE MONTH(`your_date_column`)=6 
AND YEAR(`your_date_column`)=2012 
```

从 2012 年 6 月开始获取所有内容。

# perl - 如何在perl中读取和打印多个数组的公共元素？

> ID：11665488
> 
> 赞同：1
> 
> 时间：2012-07-26T08:40:41.517
> 
> 标签：perl

我已将值存储在 5 个文本文件中。每个文本文件中的值应被视为一个数组。我正在尝试编写一个 perl 程序**来读取和打印**这 5 个数组中的公共元素。

例如

```
@a1=(1,7,4,5); 

@a2=(1,9,4,5); 

@a3=qw(1,6,4,5 ); 

@a4=qw(1 2 4 5 ); 

@a5=qw(1 2 4 5 ); 
```

我希望打印

```
1 4 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:02:39.663

The [perlfaq](http://perldoc.perl.org/perlfaq.html) has lots of answer to questions that are frequently asked. Of course it's all a bit of a waste of time and effort if no-one bothers to check there before asking the question again :-)

> [How do I compute the difference of two arrays? How do I compute the intersection of two arrays?](http://perldoc.perl.org/perlfaq4.html#How-do-I-compute-the-difference-of-two-arrays%3f-How-do-I-compute-the-intersection-of-two-arrays%3f)
> 
> Use a hash. Here's code to do both and more. It assumes that each element is unique in a given array:
> 
> ```
> my (@union, @intersection, @difference);
> my %count = ();
> foreach my $element (@array1, @array2) { $count{$element}++ }
> foreach my $element (keys %count) {
>     push @union, $element;
>     push @{ $count{$element} > 1 ? \@intersection : \@difference }, $element;
> } 
> ```

You need the intersection of two arrays. And then do it three more times.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:54:07.027

你没有说你的输入文件有什么格式，但是这个程序会找到每个文件中的所有数字字符串，并列出所有这些数字字符串的共同值。

输入文件列表应为命令行参数。

```
use strict;
use warnings;

use File::Slurp 'read_file';

my %counts;

for (@ARGV) {
  $counts{$_}++ for map /\d+/g, read_file $_;
}

my @common = grep $counts{$_} == @ARGV, keys %counts;

printf "(%s)\n", join ', ', @common; 
```

**输出**

```
(4, 1, 5) 
```

# qt - Qt 4.7.4 - 在 QGraphicsItem 像素图中使透明像素可点击（扩展命中框）

> ID：11665491
> 
> 赞同：2
> 
> 时间：2012-07-26T08:40:49.263
> 
> 标签：qt, transparency, qgraphicsview, qpixmap, movable

我正在使用 Qt Creator 创建电路原理图编辑器。我有一个 QGraphicsScene/QGraphicsView 画布，我想将电路组件的图像拖放到上面并移动它们。

我目前正在使用像素图 QGraphicsItem 并将其添加到画布并使其可移动。这在您直接单击符号的线条时效果很好，但是当单击图像中的透明区域时符号不会移动。

有没有办法扩展 hitbox/mouse 区域以使这些透明区域的响应与符号上其他区域的响应相同？下面是我如何添加图像。（我需要图像透明，以便其他符号在其后面/前面可见）

```
QGraphicsItem* b = canvas.addPixmap(QPixmap(":/images/ground2.gif"));
b->setFlag(QGraphicsItem::ItemIsMovable);
b->setPos(qrand()%int(canvas.width()),qrand()%int(canvas.height())); 
```

非常感谢所有帮助！谢谢！乔什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:07:25.970

您可以调用`QGraphicsPixmapItem::setShapeMode( QGraphicsPixmapItem::BoundingRectShape )`以将项目处理为矩形。

# javascript - 从一页导航到另一页的选项

> ID：11665492
> 
> 赞同：1
> 
> 时间：2012-07-26T08:40:56.107
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile, cordova

嗨，我想在没有 ajax 的情况下从一个页面导航到另一个页面。我们可以使用 ajax`$.mobile.changePage('test.html')`但我的目标是 blackberry5+ 版本。代替`window.location`并且`<a href="test.html">`是否有任何其他可用选项。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:07:46.910

尝试：

window.location.href = "test.html"; 或者：

window.location.assign("test.html"); window.location.replace("test.html");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:46:58.543

不确定我理解但 onclick="setLocation('newurl.html');" 是另一种方法？

# java - 如何使用jni将java中的Arraylist转换为c中的lpwstr

> ID：11665495
> 
> 赞同：2
> 
> 时间：2012-07-26T08:41:01.130
> 
> 标签：java, c++, arraylist, java-native-interface

我正在使用 JNI 将 ArrayList 传递给 c++。我想将其转换为 LPWSTR* 类型。但是我收到了arraylist 作为jobject。我怎样才能转换这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:59:53.313

开始吧。我不确定某些转换，希望其他人会有所帮助。

你有一个对象。获取 JNI 的方法并调用它们。这很简单。

以下代码示例可能有助于入门。

```
// parameter
jobject YourJObjectRepresentingArrayList;

// I suppose you have the JNIEnv somehow
JNIEnv* env;

// use the Array list
ArrayList_class       = env->FindClass( "java/util/ArrayList" );

    // to conver jobject to jstring
    jmethodID caster = env->GetMethodID(ArrayList_class, "toString", "()Ljava/lang/String;");

// get two methods
Get_method            = env->GetMethodID( ArrayList_class, "get", "(I)Ljava/lang/Object" );
Size_method           = env->GetMethodID( ArrayList_class, "size", "()I" );

// call java.lang.ArrayList.get()
int NumElts = env->CallIntMethod(YourJObjectRepresentingArrayList, ArrayList_class, Size_method);

// allocate output array
LPWSTR* Out = new LPWSTR[NumElts];

// fetch all the items
for(int i = 0 ; i < NumElts ; i++)
{
    // call java.lang.ArrayList.get(int index) method
    // Not sure about the parameter passing here
    jobject Tmp = env->CallObjectMethod(YourJObjectRepresentingArrayList, Get_method, i);

    jstring Str = (jstring)env->CallObjectMethod(Tmp, caster);

    // get the length
    int StrLen = env->GetStringLength(env, Str);

    Out[i] = new wchar_t[StrLen];

    const char* SourceUTF = env->GetStringChars(env, Str);

    // store the string - not sure about UTF-16/UTF-8 here. It is OS-dependant.
    // MultiByteToWideChar or iconv on POSIX
    ConvertUTF8ToWChar(Out[i], SourceUTF);

    env->ReleaseStringUTFChars(s, SourceUTF);
}

// done 
```

# c# - 如果文件名在 Windows Phone 中是 unicode，则检查文件是否存在

> ID：11665496
> 
> 赞同：0
> 
> 时间：2012-07-26T08:41:01.957
> 
> 标签：c#, windows-phone-7, unicode, filenames

我在存储中有一个文件，我无法检查它，因为文件的名称是 unicode。这就是 FileExist 函数返回 false 的原因，但文件存在，这是肯定的，因为当我列出它时，会显示文件名。文件名是一个匈牙利语单词。

```
IsolatedStorageFile fileStorage = IsolatedStorageFile.GetUserStoreForApplication();

// List files
List<String> fileList = new List<String>(fileStorage.GetFileNames("Informations/*"));

(string file in fileList)
{
    MessageBox.Show("file: " + file);
    // Will appear: "file: Felhasználási Feltételek.html"
}

// Check file: return false
if (fileStorage.FileExists("Informations/Felhasználási Feltételek.html"))  
{
} 
```

解决办法是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:08:57.313

您可以通过制作“自己的” FileExists 逻辑来游戏我猜的系统，例如：

```
private bool FileExists(string name, List<string> fileList)
{
    foreach (string file in fileList)
    {
        if (file == name) return true;
    }
    return false;
} 
```

然后你可以用它来检查你的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:44:26.723

我发现了问题：我从Windows资源管理器中复制了文件名，我把F2放在文件上，ctrl+c和ctrl+v到源代码中。文件名在代码中是正确的，但是当应用程序运行时，fileName 值是错误的，解决方案是我用键盘写了文件名。

# xcode - Safari can not find my webplugin

> ID：11665498
> 
> 赞同：0
> 
> 时间：2012-07-26T08:41:03.587
> 
> 标签：xcode, plugins, safari, webkit

I have developed a web plugin for Safari. It works correctly in XCode (debug), but it can not be found by Safari. The web plugin was copied in /Library/Internet Plug-Ins/.

Does someone know the answer? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:06:47.753

Safari 5.1 and later no longer supports Webkit Plugins. (I assume you're talking about that and not an NPAPI plugin?)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T02:00:32.883

I found the answer by myself.When using xcode for debuging, the 32-bit plugin can be compiled.but only use safari run plugin,the plugin must be compiled 64-bit.

# android - 如何确定具有相同包名的 2 个 APK 是否不同？

> ID：11665502
> 
> 赞同：4
> 
> 时间：2012-07-26T08:41:22.913
> 
> 标签：android, hash, package, apk

有没有办法确定 2 个具有相同包名的 APK 是否不同（假设它们来自 2 个不同的市场）？获取应用程序的哈希对我有帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:23:50.370

计算 APK 上的哈希或数字签名将告诉您它们是否完全相同。如果您想知道它们在功能上是否等效，则必须提取内容并检查资源和可执行文件。如果它们具有相同的名称，那将使我有大约 50% 的信心认为它们是相同的。如果它们实现了所有相同的类和方法（按名称），我会 90% 确定它们在功能上是等效的。

如何在 Linux 上计算文件的 MD5 签名：

```
md5sum filename 
```

如何在 Mac 或 BSD 上计算文件的 MD5 签名：

```
md5 filename 
```

如何使用 OpenSSL 计算文件的 MD5/SHA1/SHA512 签名：

```
openssl dgst -md5 filename
openssl dgst -sha1 filename
openssl dgst -sha512 filename 
```

如何计算目录中所有文件的签名：

```
cat * | md5sum
cat * | openssl dgst -sha512 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:43:59.840

我对android没有太多经验，但你不能比较APK的大小吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-18T11:55:23.340

您可以使用 androgaurd ：从 gitHub 下载它后，在终端中写入下一个命令：

```
python androsim.py -i first.apk second.apk -c ZLIB -n 
```

[这里](http://www.technotalkative.com/part-2-deep-analysis-using-androguard-tools-2/)解释了

# c# - 生成和编译名称以索引翻译/映射以加快可重用性

> ID：11665503
> 
> 赞同：3
> 
> 时间：2012-07-26T08:41:25.957
> 
> 标签：c#, compilation, generated-code

假设我从服务（我无法控制）获取数据：

```
public class Data
{
    // an array of column names
    public string[] ColumnNames { get; set; }

    // an array of rows that contain arrays of strings as column values
    public string[][] Rows { get; get; }
} 
```

在中间层，我想将其映射/翻译到可以将**其中**`IEnumerable<Entity>`的列名表示为我的类中的属性的位置。我说*可能*是因为我可能不需要服务返回的所有数据，而只需要其中的一部分。`Data` **`Entity`**

 ***## 转型

这是进行翻译的算法的抽象：

1.  创建一个`IDictionary<string, int>`，`ColumnNames`以便我可以轻松地将各个列名映射到各个行中的数组索引。
2.  使用反射来检查我的`Entity`属性名称，以便我能够将它们与列名匹配
3.  根据 #1 中完成的映射遍历`Data.Rows`并创建我的对象并填充属性。`Entity`可能使用反射和`SetValue`属性来设置它们。

## 优化

上层算法当然可以工作，但我认为因为它使用反射，它应该做一些缓存，可能还有一些即时编译，这可以大大加快速度。

完成第 1 步和第 2 步后，我们实际上可以生成一个方法，该方法采用字符串数组并直接使用索引实例化我的实体，然后对其进行编译**和缓存**以供将来重用。

我通常会得到一页结果，因此后续请求将重用相同的编译方法。

## 附加事实

这不是问题（和答案）的必要条件，但我还创建了两个属性，当它们的名称不匹配时，它们有助于列到属性的映射。我创建了最明显的`MapNameAttribute`（它需要一个字符串，并且还可以选择启用区分大小写）和我的不应该映射到任何数据`IgnoreMappingAttribute`的属性。`Entity`但是这些属性是在上层算法的第 2 步中读取的，因此会根据此声明性元数据收集和重命名属性名称，以便它们与列名称匹配。

## 问题

生成和编译这种方法的最佳和最简单的方法是什么？Lambda 表达式？`CSharpCodeProvider`班级？

你可能有一个生成和编译代码的例子吗？我猜映射是一个相当常见的场景。

> **注意**：与此同时，我将研究 PetaPoco（也许还有 Massive），因为 afaik 他们都在运行中进行编译和缓存，完全是为了映射目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:32:43.507

建议：[从 NuGet 获取 FastMember](http://nuget.org/packages/FastMember)

然后只需使用：

```
var accessor = TypeAccessor.Create(typeof(Entity)); 
```

然后在你的循环中，当你找到当前迭代的`memberName`and时：`newValue`

```
accessor[obj, memberName] = newValue; 
```

这是为了满足您的要求而设计的；在内部，它维护了一组类型（如果以前见过）。当看到一个新类型时，它会创建一个新的`TypeAccessor`on-the-fly (via `TypeBuilder`) 子类并缓存它。每个独特`TypeAccessor`的都知道该类型的属性，并且*基本上*就像：

```
switch(memberName) {
    case "Foo": obj.Foo = (int)newValue;
    case "Bar": obj.Bar = (string)newValue;
    // etc
} 
```

因为这是缓存的，所以您只需在它第一次看到您的类型时支付任何费用（而且不是真正的*大笔费用）；*其余时间，它是免费的。因为它`ILGenerator` *直接*使用，它也避免了任何不必要的抽象，例如 via`Expression`或 CodeDom，所以它几乎是尽可能快的。

（我还应该澄清，对于`dynamic`类型，即实现的类型`IDynamicMetaObjectProvider`，它可以使用单个实例来支持每个对象）。

* * *

额外的：

您*可以*做的是：获取现有`FastMember`代码，并将其编辑为 process`MapNameAttribute`和`IgnoreMappingAttribute`during`WriteGetter`和 `WriteSetter`; 然后所有的巫术都发生在您的*数据*名称上，而不是*成员*名称上。

这将意味着更改行：

```
il.Emit(OpCodes.Ldstr, prop.Name); 
```

和

```
il.Emit(OpCodes.Ldstr, field.Name); 
```

在`WriteGetter`and中，如果应该忽略它，则在循环的开头`WriteSetter`执行 a 。`continue``foreach`***

# c# - C# LINQ to XML - 如何将特定的 XElements 写入文件

> ID：11665504
> 
> 赞同：0
> 
> 时间：2012-07-26T08:41:27.743
> 
> 标签：c#, xml

我想知道如何将 XDocument 的特定部分写入文件。

假设我在应用程序启动时加载整个文档，然后使用应用程序加载读取设置。当我修改我的类的属性时，我希望将只是那个属性（或只是那个属性及其子属性）写回文件，**而对 XDocument 的任何其他修改（在内存中）保持不变**

我当前的代码如下所示（注意我有一些围绕 XDocument 和 XElement 类的包装器）：

```
 public void SaveRecursiveData()
    {
        //Load the original file into a new document
        XmlConfig tmp = new XmlConfig(_XmlDoc.Filename,false);

        //find the node i am interested in
        XElement currentElement = tmp.Xmldoc.XPathSelectElement(this.Path);

        //Replace it with my IN MEMORY one
        currentElement.ReplaceWith(_XmlNode);

        //Write the whole temporary document back to the file 
        tmp.Save(); 
    } 
```

这是最好的方法还是有其他方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T08:46:38.700

你可以做

```
currentElement.Attribute("toChange").Value = "mynewvalue"; 
```

代替`ReplaceWith`

# c++ - 我可以生成一个大小为 n 的常量数组吗

> ID：11665509
> 
> 赞同：0
> 
> 时间：2012-07-26T08:41:58.003
> 
> 标签：c++, build-time

我想生成一个常数数组*power[501]* = {1, p % MODER, p*p % MODER, p*p*p % MODER, ..., p^500 % MODER}，其中p是常数数字。

我知道我可以使用以下代码生成*p^n % MODER ：*

```
template<int a, int n> struct pow
{
  static const int value = a * pow<a, n-1>::value % MODER;
};
template<int a> struct pow<a, 0>
{
  static const int value = 1;
}; 
```

它确实有效！

我的问题是我是否可以生成我想要的数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T08:51:38.847

您可以[`BOOST_PP_ENUM`](http://www.boost.org/doc/libs/1_46_1/libs/preprocessor/doc/ref/enum.html)用作：

```
#include <iostream>
#include <boost/preprocessor/repetition/enum.hpp>

#define MODER 10

template<int a, int n> struct pow
{
  static const int value = a * pow<a, n-1>::value % MODER;
};
template<int a> struct pow<a, 0>
{
  static const int value = 1;
};

#define ORDER(count, i, data) pow<data,i>::value

int main() {
  const int p = 3;
  int const a[] = { BOOST_PP_ENUM(10, ORDER, p) };
  std::size_t const n = sizeof(a)/sizeof(int);
  for(std::size_t i = 0 ; i != n ; ++i ) 
    std::cout << a[i] << "\n";
  return 0;
} 
```

输出：

```
1
3
9
7
1
3
9
7
1
3 
```

见[在线演示](http://ideone.com/22Ffe)

该行：

```
int const a[] = { BOOST_PP_ENUM(10, ORDER, p) }; 
```

扩展为：

```
int const a[] = { pow<p,0>::value, pow<p,1>::value, ...., pow<p,9>::value}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:58:14.667

除非`n`有上限，否则我认为这是不可能的。检查[这个问题](https://stackoverflow.com/questions/3136686/is-the-c99-preprocessor-turing-complete)。有一些方法可以使预处理器看起来像一个图灵完备的机器，但前提是你接受你的代码大小应该增加的事实`n`，这并不比手动放置一个预先计算的数组好。

重要更新：您也应该看到[这个问题](https://stackoverflow.com/questions/189172/c-templates-turing-complete)。似乎不是预处理器而是模板引擎确实是图灵完备的（至少可以进行递归）。所以，现在我怀疑答案是肯定的。

# ios - 偏航不断变化的核心运动

> ID：11665510
> 
> 赞同：2
> 
> 时间：2012-07-26T08:42:03.700
> 
> 标签：ios, core-motion

我的 iOS 应用中有 Core Motion 管理器：

```
motionManager = [[CMMotionManager alloc] init];
motionManager.deviceMotionUpdateInterval = 1.0 / 60.0;
if ([motionManager isDeviceMotionAvailable]) {
    [motionManager startDeviceMotionUpdates];
} 
```

在更新方法中（我使用的是 cocos3d，但没关系）我有这个：

```
-(void) updateBeforeTransform:(CC3NodeUpdatingVisitor *)visitor
{
    if (motionManager.deviceMotionActive)
    {
        CMDeviceMotion *deviceMotion = motionManager.deviceMotion;
        CMAttitude *attitude = deviceMotion.attitude;

        NSLog(@"%f, %f, %f", attitude.yaw, attitude.pitch, attitude.roll);

    }
} 
```

我把设备放在桌子上，开始观察偏航、俯仰和横滚值，偏航一直在变化！它在几分钟内改变了大约 10 度，这在我的应用程序中是绝对不允许的。这种变化的原因是什么，我该如何避免呢？我开始认为它的发生是因为地球自转，但速度太快了:)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:02:10.700

让我在黑暗中试一试。在 iOS 5 中，磁力计数据是 Core Motion 传感器融合算法的一部分。对于像游戏这样的许多应用程序来说，由于能耗增加以及可能需要校准指南针，迫使用户进行类似 8 的动作，因此不需要或更好的是危险的。

因此，我推测只有在使用 CMMotionManager 的[startDeviceMotionUpdatesUsingReferenceFrame](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009670-CH1-SW48)而不是[startDeviceMotionUpdates](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009670-CH1-SW27)明确说明时，才在传感器融合中考虑罗盘数据。尝试[CMAttitudeReferenceFrameXMagneticNorthZVertical](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html#//apple_ref/doc/c_ref/CMAttitudeReferenceFrameXMagneticNorthZVertical)并检查漂移效果是否降低。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-12T16:52:54.600

你正在经历的是一种叫做漂移的东西，你对此无能为力。

基本上，陀螺仪非常擅长测量旋转速率，但它不能测量瞬时方向。因此，为了计算设备的当前方向，传感器算法必须将传感速率整合到位置中。然而，随着位置的计算，随着时间的推移，小错误会逐渐累积，并且计算出的方向可能会发生漂移，即使设备大部分时间都保持静止。

如果设备碰巧有一个可以测量瞬时方向的传感器，例如磁力计，那么传感器融合算法可以通过比较/组合传感器输入来纠正漂移，因此 Apple 的参考框架选项：CMAttitudeReferenceFrameXArbitraryCorrectedZVertical。

But Apple's implementation isn't perfect, that's why you see the massive jumps back and forth to correct build up of error when CMAttitudeReferenceFrameXArbitraryCorrectedZVertical is enabled. A better algorithm might be one that at least smooths out the error correction over time.

# javascript - typewatch 如何处理提交请求

> ID：11665511
> 
> 赞同：2
> 
> 时间：2012-07-26T08:42:23.580
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, typewatch

我在搜索表单上使用[typewatch 。](https://github.com/dennyferra/TypeWatch)当我实现这样的事情时

```
$('#search_groups').submit(function() {
    alert("testing");
    return false;
}); 
```

弹出警报消息，但仍通过 AJAX 处理表单的提交请求。然而，这是唯一的请求，几乎就像按下回车一样，您只需加速 typewatch 上的提交计时器。这是这里发生的事情吗？我查看了 typewatch[源代码](https://github.com/dennyferra/TypeWatch/blob/master/jquery.typewatch.js)，但似乎找不到任何东西。此外，当我删除上面的代码时，表单会被提交两次：作为 JS 请求和作为 HTML。HTML 请求正在通过，因为我不再取消提交操作，我认为 JS 请求背后的原因与手头的主要问题有关：提交绑定的表单时 typewatch 会做什么。非常感谢！

表格代码：

```
<%= form_tag groups_path, method: :get, id: "search_groups" do %>
    Find a Group: <%= text_field_tag :groups_query, params[:groups_query] %>
<% end %> 
```

**更新**：找到了答案，它证实了我的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:53:38.930

找到了我的答案，它证实了我认为回车键“加速”计时器，

从 typewatch 源代码：

```
if (evt.keyCode == 13 && (this.type.toUpperCase() == "TEXT" || this.type.toUpperCase() == "PASSWORD")) {
timerWait = 1;
overrideBool = true;
} 
```

keyCode #13 是回车键

# ios - 无需苹果部署流程即可分发 ipad 应用程序

> ID：11665513
> 
> 赞同：2
> 
> 时间：2012-07-26T08:42:29.077
> 
> 标签：ios, ipad

是另一种无需经过 Apple 部署流程即可将 ipad 应用程序分发给企业 iPad 用户的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T08:44:23.820

您可以查看其中一个 Ad-Hoc 站点，例如[testflight.com](https://www.testflightapp.com/)，否则您需要[企业开发许可证](https://developer.apple.com/programs/ios/enterprise/)。但是，在这种情况下，将应用程序分发到公司外部是违法的

请注意，如果您选择 Ad-Hoc 模式，您最多只能使用 100 台设备，但对于用户和开发人员来说，这都是一种非常简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:56:51.187

如果是在一家公司内，你可以成为[企业开发人员](https://developer.apple.com/programs/ios/enterprise/)。如果您只是想将它们分发给每个人，同时对 Apple 嗤之以鼻，那么您唯一的选择就是交出您的源代码并让每个人编译它。

# sql - DataSnap 服务器 - 每个客户端请求共享数据库连接或新连接？

> ID：11665516
> 
> 赞同：5
> 
> 时间：2012-07-26T08:42:35.363
> 
> 标签：sql, delphi, rest, ado, datasnap

我有一个 Delphi XE2 DataSnap 服务器（Windows 服务）连接到服务 REST 客户端请求的后端 MS SQL Server 2008（相同的服务器框）。
一段时间以来一切都很好，直到最近，我遇到了一个问题，DataSnap 服务由于某种原因失去了与 SQL Server 的连接。

该服务无法重新建立连接，我必须重新启动 DataSnap 服务才能继续。
这让我开始思考，因为目前该服务仅使用 1 个 SQL 连接 (TADOConnection) 来共享所有客户端请求。我这样做是因为我不希望为每个客户端请求实例化一个新的 SQL 连接的开销。

我正在考虑是否为每个请求建立一个单独的 SQL 连接实际上是否会更好，并且开销是否会很明显 - 任何人都可以对此发表评论/建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:44:05.110

这就是拥有一个可以修改以尝试不同方法并将您的数据库连接与其余代码隔离开来的结构良好的数据访问层非常有用的地方。

如果您使用从客户端到 DataSnap 服务器的 MIDAS (DataSnap)，强烈建议使用池化方法（如 mjn 建议的那样），因为我发现它有很大的连接开销。

我已经构建了一些在运行时使用普通 TADOConnection 的网络服务（相当低的流量），并且发现建立数据库连接的开销可以忽略不计，当然与从设备到服务器的整体网络延迟相比，背部。
如果您发现 TADOConnection 在高流量环境中仍然产生过多开销，您可以轻松地将您自己的连接池添加到这样的系统中。

# javascript - 对网络服务器的 httprequest 在 javasqlipt 中返回 null json

> ID：11665520
> 
> 赞同：1
> 
> 时间：2012-07-26T08:42:50.497
> 
> 标签：javascript

我正在尝试使用 httpWebRequest 调用 web 服务，但我得到的响应总是 null JSON。

```
var con = $.net.http.getConnection("http://api.geonames.org/citiesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&lang=de&username=demo");
con.setProxy("proxy", 8080); 
var resp = con.request("GET", "/Service1.html");

//resp here is always null 
```

我得到的输出是这样的：

```
 {} 
```

真的不知道我哪里错了。

如果您对此有所了解，请帮助我。

# android - NDK ndk 构建错误

> ID：11665521
> 
> 赞同：4
> 
> 时间：2012-07-26T08:42:54.737
> 
> 标签：android, android-ndk

当我尝试执行 NDK 构建时，我收到以下错误列表...有人知道吗？

```
encies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:153: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:153: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfPizCompressor.o): In function `std::_Rb_tree_const_iterator<std::pair<Imf::Name const, Imf::Channel> >::operator++()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/NDK/sources/cxx-stl/gnu-libstdc++/include/bits/stl_tree.h:259: undefined reference to `std::_Rb_tree_increment(std::_Rb_tree_node_base const*)'
    ./obj/local/armeabi/libfreeimage.a(ImfPizCompressor.o): In function `PizCompressor':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPizCompressor.cpp:228: undefined reference to `__cxa_end_cleanup'
    ./obj/local/armeabi/libfreeimage.a(ImfPizCompressor.o):(.ARM.extab.text._ZN3Imf13PizCompressorC2ERKNS_6HeaderEjj+0x0): undefined reference to `__gxx_personality_v0'
    ./obj/local/armeabi/libfreeimage.a(ImfPizCompressor.o): In function `std::_Rb_tree_const_iterator<std::pair<Imf::Name const, Imf::Channel> >::operator++()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/NDK/sources/cxx-stl/gnu-libstdc++/include/bits/stl_tree.h:259: undefined reference to `std::_Rb_tree_increment(std::_Rb_tree_node_base const*)'
    ./obj/local/armeabi/libfreeimage.a(ImfPizCompressor.o): In function `PizCompressor':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPizCompressor.cpp:228: undefined reference to `__cxa_end_cleanup'
    ./obj/local/armeabi/libfreeimage.a(ImfPizCompressor.o):(.ARM.extab.text._ZN3Imf13PizCompressorC1ERKNS_6HeaderEjj+0x0): undefined reference to `__gxx_personality_v0'
    ./obj/local/armeabi/libfreeimage.a(ImfPizCompressor.o):(.data.rel.ro+0x28): undefined reference to `vtable for __cxxabiv1::__si_class_type_info'
    ./obj/local/armeabi/libfreeimage.a(ImfPxr24Compressor.o): In function `Imf::(anonymous namespace)::notEnoughData()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp:165: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp:165: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfPxr24Compressor.o): In function `unsigned int Imf::uiAdd<unsigned int>(unsigned int, unsigned int)':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:105: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfPxr24Compressor.o): In function `std::_Rb_tree_const_iterator<std::pair<Imf::Name const, Imf::Channel> >::operator++()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/NDK/sources/cxx-stl/gnu-libstdc++/include/bits/stl_tree.h:259: undefined reference to `std::_Rb_tree_increment(std::_Rb_tree_node_base const*)'
    ./obj/local/armeabi/libfreeimage.a(ImfPxr24Compressor.o): In function `tooMuchData':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp:173: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp:173: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfPxr24Compressor.o): In function `Imf::Pxr24Compressor::uncompress(char const*, int, Imath::Box<Imath::Vec2<int> >, char const*&)':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp:431: undefined reference to `__cxa_allocate_exception'
    ./obj/local/armeabi/libfreeimage.a(ImfPxr24Compressor.o): In function `std::_Rb_tree_const_iterator<std::pair<Imf::Name const, Imf::Channel> >::operator++()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/NDK/sources/cxx-stl/gnu-libstdc++/include/bits/stl_tree.h:259: undefined reference to `std::_Rb_tree_increment(std::_Rb_tree_node_base const*)'
    ./obj/local/armeabi/libfreeimage.a(ImfPxr24Compressor.o): In function `Imf::Pxr24Compressor::compress(char const*, int, Imath::Box<Imath::Vec2<int> >, char const*&)':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp:404: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp:404: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfPxr24Compressor.o): In function `Pxr24Compressor':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp:206: undefined reference to `__cxa_end_cleanup'
    ./obj/local/armeabi/libfreeimage.a(ImfPxr24Compressor.o):(.ARM.extab.text._ZN3Imf15Pxr24CompressorC1ERKNS_6HeaderEjj+0x0): undefined reference to `__gxx_personality_v0'
    ./obj/local/armeabi/libfreeimage.a(ImfPxr24Compressor.o): In function `Pxr24Compressor':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp:206: undefined reference to `__cxa_end_cleanup'
    ./obj/local/armeabi/libfreeimage.a(ImfPxr24Compressor.o):(.ARM.extab.text._ZN3Imf15Pxr24CompressorC2ERKNS_6HeaderEjj+0x0): undefined reference to `__gxx_personality_v0'
    ./obj/local/armeabi/libfreeimage.a(ImfPxr24Compressor.o): In function `__static_initialization_and_destruction_0':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/NDK/sources/cxx-stl/gnu-libstdc++/include/iostream:72: undefined reference to `std::ios_base::Init::Init()'
    ./obj/local/armeabi/libfreeimage.a(ImfPxr24Compressor.o): In function `global constructors keyed to ImfPxr24Compressor.cpp':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfPxr24Compressor.cpp:550: undefined reference to `std::ios_base::Init::~Init()'
    ./obj/local/armeabi/libfreeimage.a(ImfPxr24Compressor.o):(.data.rel.ro+0x28): undefined reference to `vtable for __cxxabiv1::__si_class_type_info'
    ./obj/local/armeabi/libfreeimage.a(ImfRleCompressor.o): In function `Imf::RleCompressor::uncompress(char const*, int, int, char const*&)':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfRleCompressor.cpp:283: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfRleCompressor.cpp:283: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfRleCompressor.o): In function `__static_initialization_and_destruction_0':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/NDK/sources/cxx-stl/gnu-libstdc++/include/iostream:72: undefined reference to `std::ios_base::Init::Init()'
    ./obj/local/armeabi/libfreeimage.a(ImfRleCompressor.o): In function `global constructors keyed to ImfRleCompressor.cpp':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfRleCompressor.cpp:331: undefined reference to `std::ios_base::Init::~Init()'
    ./obj/local/armeabi/libfreeimage.a(ImfRleCompressor.o): In function `uiMult<unsigned int>':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:69: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:69: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfRleCompressor.o): In function `RleCompressor':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfRleCompressor.cpp:170: undefined reference to `__cxa_end_cleanup'
    ./obj/local/armeabi/libfreeimage.a(ImfRleCompressor.o):(.ARM.extab.text._ZN3Imf13RleCompressorC2ERKNS_6HeaderEj+0x0): undefined reference to `__gxx_personality_v0'
    ./obj/local/armeabi/libfreeimage.a(ImfRleCompressor.o): In function `RleCompressor':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfRleCompressor.cpp:170: undefined reference to `__cxa_end_cleanup'
    ./obj/local/armeabi/libfreeimage.a(ImfRleCompressor.o):(.ARM.extab.text._ZN3Imf13RleCompressorC1ERKNS_6HeaderEj+0x0): undefined reference to `__gxx_personality_v0'
    ./obj/local/armeabi/libfreeimage.a(ImfRleCompressor.o):(.data.rel.ro+0x28): undefined reference to `vtable for __cxxabiv1::__si_class_type_info'
    ./obj/local/armeabi/libfreeimage.a(ImfZipCompressor.o): In function `Imf::ZipCompressor::uncompress(char const*, int, int, char const*&)':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfZipCompressor.cpp:192: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfZipCompressor.cpp:192: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfZipCompressor.o): In function `Imf::ZipCompressor::compress(char const*, int, int, char const*&)':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfZipCompressor.cpp:159: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfZipCompressor.cpp:159: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfZipCompressor.o): In function `ZipCompressor':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfZipCompressor.cpp:76: undefined reference to `__cxa_end_cleanup'
    ./obj/local/armeabi/libfreeimage.a(ImfZipCompressor.o):(.ARM.extab.text._ZN3Imf13ZipCompressorC1ERKNS_6HeaderEjj+0x0): undefined reference to `__gxx_personality_v0'
    ./obj/local/armeabi/libfreeimage.a(ImfZipCompressor.o): In function `ZipCompressor':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfZipCompressor.cpp:76: undefined reference to `__cxa_end_cleanup'
    ./obj/local/armeabi/libfreeimage.a(ImfZipCompressor.o):(.ARM.extab.text._ZN3Imf13ZipCompressorC2ERKNS_6HeaderEjj+0x0): undefined reference to `__gxx_personality_v0'
    ./obj/local/armeabi/libfreeimage.a(ImfZipCompressor.o): In function `__static_initialization_and_destruction_0':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/NDK/sources/cxx-stl/gnu-libstdc++/include/iostream:72: undefined reference to `std::ios_base::Init::Init()'
    ./obj/local/armeabi/libfreeimage.a(ImfZipCompressor.o): In function `global constructors keyed to ImfZipCompressor.cpp':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfZipCompressor.cpp:240: undefined reference to `std::ios_base::Init::~Init()'
    ./obj/local/armeabi/libfreeimage.a(ImfZipCompressor.o):(.data.rel.ro+0x28): undefined reference to `vtable for __cxxabiv1::__si_class_type_info'
    ./obj/local/armeabi/libfreeimage.a(IlmThread.o): In function `IlmThread::Thread::start()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:74: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:74: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(IlmThread.o): In function `~Thread':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:67: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:67: undefined reference to `__cxa_throw'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:67: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:67: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(IlmThread.o): In function `Thread':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:61: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:61: undefined reference to `__cxa_throw'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:61: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmThread/IlmThread.cpp:61: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(IlmThread.o):(.data.rel.ro._ZTIN3Iex9NoImplExcE[typeinfo for Iex::NoImplExc]+0x0): undefined reference to `vtable for __cxxabiv1::__si_class_type_info'
    ./obj/local/armeabi/libfreeimage.a(IlmThread.o):(.data.rel.ro+0x14): undefined reference to `vtable for __cxxabiv1::__class_type_info'
    ./obj/local/armeabi/libfreeimage.a(ImfB44Compressor.o): In function `std::_Rb_tree_const_iterator<std::pair<Imf::Name const, Imf::Channel> >::operator++()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/NDK/sources/cxx-stl/gnu-libstdc++/include/bits/stl_tree.h:259: undefined reference to `std::_Rb_tree_increment(std::_Rb_tree_node_base const*)'
    ./obj/local/armeabi/libfreeimage.a(ImfB44Compressor.o): In function `Imf::(anonymous namespace)::notEnoughData()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfB44Compressor.cpp:440: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfB44Compressor.cpp:440: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfB44Compressor.o): In function `std::_Rb_tree_const_iterator<std::pair<Imf::Name const, Imf::Channel> >::operator++()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/NDK/sources/cxx-stl/gnu-libstdc++/include/bits/stl_tree.h:259: undefined reference to `std::_Rb_tree_increment(std::_Rb_tree_node_base const*)'
    ./obj/local/armeabi/libfreeimage.a(ImfB44Compressor.o): In function `tooMuchData':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfB44Compressor.cpp:448: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfB44Compressor.cpp:448: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfB44Compressor.o): In function `__static_initialization_and_destruction_0':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/NDK/sources/cxx-stl/gnu-libstdc++/include/iostream:72: undefined reference to `std::ios_base::Init::Init()'
    ./obj/local/armeabi/libfreeimage.a(ImfB44Compressor.o): In function `global constructors keyed to ImfB44Compressor.cpp':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfB44Compressor.cpp:1069: undefined reference to `std::ios_base::Init::~Init()'
    ./obj/local/armeabi/libfreeimage.a(ImfB44Compressor.o): In function `checkArraySize<unsigned int>':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:153: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfCheckedArithmetic.h:153: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfB44Compressor.o): In function `std::_Rb_tree_const_iterator<std::pair<Imf::Name const, Imf::Channel> >::operator++()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/NDK/sources/cxx-stl/gnu-libstdc++/include/bits/stl_tree.h:259: undefined reference to `std::_Rb_tree_increment(std::_Rb_tree_node_base const*)'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/NDK/sources/cxx-stl/gnu-libstdc++/include/bits/stl_tree.h:259: undefined reference to `std::_Rb_tree_increment(std::_Rb_tree_node_base const*)'
    ./obj/local/armeabi/libfreeimage.a(ImfB44Compressor.o): In function `B44Compressor':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfB44Compressor.cpp:548: undefined reference to `__cxa_end_cleanup'
    ./obj/local/armeabi/libfreeimage.a(ImfB44Compressor.o):(.ARM.extab.text._ZN3Imf13B44CompressorC2ERKNS_6HeaderEjjb+0x0): undefined reference to `__gxx_personality_v0'
    ./obj/local/armeabi/libfreeimage.a(ImfB44Compressor.o): In function `std::_Rb_tree_const_iterator<std::pair<Imf::Name const, Imf::Channel> >::operator++()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/NDK/sources/cxx-stl/gnu-libstdc++/include/bits/stl_tree.h:259: undefined reference to `std::_Rb_tree_increment(std::_Rb_tree_node_base const*)'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/NDK/sources/cxx-stl/gnu-libstdc++/include/bits/stl_tree.h:259: undefined reference to `std::_Rb_tree_increment(std::_Rb_tree_node_base const*)'
    ./obj/local/armeabi/libfreeimage.a(ImfB44Compressor.o): In function `B44Compressor':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfB44Compressor.cpp:548: undefined reference to `__cxa_end_cleanup'
    ./obj/local/armeabi/libfreeimage.a(ImfB44Compressor.o):(.ARM.extab.text._ZN3Imf13B44CompressorC1ERKNS_6HeaderEjjb+0x0): undefined reference to `__gxx_personality_v0'
    ./obj/local/armeabi/libfreeimage.a(ImfB44Compressor.o):(.data.rel.ro+0x28): undefined reference to `vtable for __cxxabiv1::__si_class_type_info'
    ./obj/local/armeabi/libfreeimage.a(ImfHuf.o): In function `Imf::(anonymous namespace)::notEnoughData()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:101: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:101: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfHuf.o): In function `Imf::(anonymous namespace)::unexpectedEndOfTable()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:125: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:125: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfHuf.o): In function `Imf::(anonymous namespace)::tableTooLong()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:133: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:133: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfHuf.o): In function `Imf::(anonymous namespace)::invalidTableEntry()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:141: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:141: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfHuf.o): In function `Imf::(anonymous namespace)::tooMuchData()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:93: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:93: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfHuf.o): In function `Imf::(anonymous namespace)::invalidCode()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:109: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:109: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfHuf.o): In function `invalidTableSize':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:117: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:117: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfHuf.o): In function `invalidNBits':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:85: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:85: undefined reference to `__cxa_throw'
    ./obj/local/armeabi/libfreeimage.a(ImfHuf.o): In function `~AutoArray':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfAutoArray.h:61: undefined reference to `__cxa_end_cleanup'
    ./obj/local/armeabi/libfreeimage.a(ImfHuf.o): In function `Imf::hufUncompress(char const*, int, unsigned short*, int)':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:1076: undefined reference to `__cxa_begin_catch'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:1079: undefined reference to `__cxa_rethrow'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:1076: undefined reference to `__cxa_end_catch'
    ./obj/local/armeabi/libfreeimage.a(ImfHuf.o):(.ARM.extab.text._ZN3Imf13hufUncompressEPKciPti+0x0): undefined reference to `__gxx_personality_v0'
    ./obj/local/armeabi/libfreeimage.a(ImfHuf.o): In function `~AutoArray':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfAutoArray.h:61: undefined reference to `__cxa_end_cleanup'
    ./obj/local/armeabi/libfreeimage.a(ImfHuf.o):(.ARM.extab.text._ZN3Imf11hufCompressEPKtiPc+0x0): undefined reference to `__gxx_personality_v0'
    /home/flock/ANDROID/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.4.3/libgcc.a(unwind-arm.o): In function `__gnu_unwind_pr_common':
    /i/ndk-andrewhsieh/src.1-with-cherrypicks//build/../gcc/gcc-4.4.3/libgcc/../gcc/config/arm/unwind-arm.c:1237: undefined reference to `__cxa_call_unexpected'
    collect2: ld returned 1 exit status
    make: *** [obj/local/armeabi/libimageprocessing.so] Error 1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T08:51:14.217

通过添加内容如下的 Application.mk 解决了该问题-

```
APP_OPTIM := release
APP_PLATFORM := android-7
APP_STL := gnustl_static
APP_CPPFLAGS += -frtti 
APP_CPPFLAGS += -fexceptions
APP_CPPFLAGS += -DANDROID
APP_ABI := armeabi-v7a 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T01:12:19.473

首先，您需要在“Application.mk”中添加“APP_STL”标签：

```
APP_STL := stlport_static #or 'stlport_shared' 'gnustl_static' 
```

然后编辑“Android.mk”添加链接信息：

```
LOCAL_WHOLE_STATIC_LIBRARIES := libstlport_static
# or you may need shared library
# LOCAL_SHARED_LIBRARIES := libstlport_shared 
```

它对我有用。祝你好运！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-13T04:32:15.693

我在编译 boost::thread 示例时遇到了这个问题。如果使用 GNU STL，则 gnustl_static 库必须与您的程序链接。只需将 -lgnustl_static 添加到 Android.mk 中的 LOCAL_LDLIBS 行。例子：

```
LOCAL_LDLIBS += -lgnustl_static 
```

更多详情，请阅读[https://github.com/MysticTreeGames/Boost-for-Android](https://github.com/MysticTreeGames/Boost-for-Android)

# vb6 - 检测 TreeView 节点图像点击

> ID：11665522
> 
> 赞同：2
> 
> 时间：2012-07-26T08:43:00.960
> 
> 标签：vb6, treeview

我在 VB6 中有一个 TreeView，当单击节点的图像（+ 或 -）时，节点会展开然后立即折叠，反之亦然。我有一个 TreeView Click 方法，它在单击时展开/折叠节点（简化版本如下所示）

```
Private Sub MyTreeView_Click()

    Dim selectedNode As Node
    Dim nodeType As String

    Set selectedNode = MList2.SelectedItem
    If selectedNode Is Nothing Then
        Exit Sub
    End If

    nodeType = selectedNode.Key

    If nodeType = "MyNodeType" Then

        'Collapse Node if it's already expanded, otherwise expand it.
        If selectedNode .Expanded Then
            selectedNode .Expanded = False
        Else
            'Do some processing

            selectedNode .Expanded = True
        End If
    End If
End Sub 
```

如果单击节点的文本部分，这可以正常工作。但是，如果单击 Node 的 Image 部分，则 Node 在到达此 EventHandler 之前会展开/折叠，导致 Node 在遇到此 EventHandler 时立即返回其原始状态。节点的第一次展开/折叠似乎发生在节点图像上的 MouseDown 上。

有谁知道在单击节点图像时如何防止节点在点击此 EventHandler 之前被展开/折叠？

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:31:02.343

您可以使用 TreeView`Collapse`和`Expand`事件来设置一个布尔变量，指示您的过程不应运行。例如：

```
Dim bNodeImageClicked As Boolean

Private Sub MyTreeView_Collapse(ByVal Node As MSComctlLib.Node)
    bNodeImageClicked = True
End Sub

Private Sub MyTreeView_Expand(ByVal Node As MSComctlLib.Node)
    bNodeImageClicked = True
End Sub

Private Sub MyTreeView_Click()
    If bNodeImageClicked Then
        bNodeImageClicked = False
        Exit Sub
    End If

    'Your code...
End Sub 
```

# ruby-on-rails - rails：如何在更改/添加字段后“重新”生成视图文件

> ID：11665524
> 
> 赞同：4
> 
> 时间：2012-07-26T08:43:02.460
> 
> 标签：ruby-on-rails

我首先运行了一个脚手架命令，例如，

rails 生成脚手架用户

现在，我去了 app/models/user.rb 并添加了一堆字段

我现在想要运行一个命令来重新生成 app/views/users/ 中的视图文件，这样 _form.html.erb 现在包含我在上面添加的字段的 HTML。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:56:43.577

一个想法是使用[formtastic](https://github.com/justinfrench/formtastic) gem。

然后你的表格可能如下所示：

```
<%= semantic_form_for @user do |f| %>
  <%= f.inputs %>
  <%= f.actions %>
<% end %> 
```

此表单片段按以下说明工作。

> 这会呈现一组输入（一个用于数据库表中的大多数列，一个用于每个 ActiveRecord 的 belongs_to-association），然后是默认操作按钮（一个输入提交按钮）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:08:25.747

您可以再次使用相同的命令`--skip-migration`并指定新字段，如下所示

```
rails generate scaffold User existing_field:string new_field:string --skip-migration 
```

请注意，您必须使用`--skip-migration`，否则脚手架生成将失败，并显示迁移已存在的错误。系统将提示您要覆盖的所有文件。覆盖除模型文件之外的所有内容，因为您已经在其中进行了一些更改。

此外，由于您要添加新字段，因此您应该相应地更新迁移文件。

**备用**

删除现有的迁移文件并像以前一样生成脚手架并覆盖选定的文件。

```
rails generate scaffold User existing_field:string new_field:string 
```

# web-services - 保护 glassfish 上的 jax-ws 服务 3\. 好方法

> ID：11665526
> 
> 赞同：2
> 
> 时间：2012-07-26T08:43:08.093
> 
> 标签：web-services, soap, openssl, jax-ws, glassfish-3

我有一个从 wsdl 在 NetBeans 中生成的 jax-ws soap web 服务（实现不像 Session bean）。部署在 Glassfish 3.1.2 上。我想使用相互证书身份验证使用 SSL 和 https 来保护对它的访问。我读过很多文章和书籍。据我了解，有几种变体：

*   使用 OpenSSL（不幸的是它在部署过程中失败，如果需要我可以显示堆栈跟踪）；
*   使用[http://www.ibm.com/developerworks/java/library/j-jws10/index.html](http://www.ibm.com/developerworks/java/library/j-jws10/index.html) [Jax-ws Metro 安全]

我有以下问题：

*   什么是最好和最合适的方法？可能你能告诉我别的什么吗？
*   你能给我看一个包含每个步骤（生成证书、修改源代码、配置 Glassfish）的好教程吗？
*   为什么 Web 服务安全被认为不同于简单的 Web 应用程序安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:50:42.040

看看其他答案：

[https://stackoverflow.com/a/13979272/660990](https://stackoverflow.com/a/13979272/660990)

我建议您使用 Metro 和 WS-Security 标准。

# jquery - 媒体查询和 JQuery 问题

> ID：11665527
> 
> 赞同：2
> 
> 时间：2012-07-26T08:43:10.907
> 
> 标签：jquery, css, media-queries

我正在为我的网站使用移动/平板电脑屏幕的媒体查询。当屏幕尺寸针对移动设备缩小时，我会使用很多 jquery 切换功能，这样我可以缩小一些内容，但如果需要可以扩展它。

我的问题是，如果我切换一个项目并展开（显示），然后我将设备旋转到横向，该项目将保持展开，但是正在使用不同的媒体查询来说明该 div 或要隐藏的任何内容。我认为这是因为 Jquery 切换将样式属性添加到实际的 HTML 而不是 CSS。有没有办法获得正确的页面，所以重置切换？如果这有意义吗？

谢谢

戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:22:14.873

如果您将以下代码添加到您的站点，它将向横向或纵向的主体节点添加一个类，然后您可以在您的 css 中使用它。希望这会有所帮助。

```
window.onorientationchange = function() {
  var orientation = window.orientation;
  if (orientation == 0) {
    document.body.setAttribute("class","portrait");
  }else{
    document.body.setAttribute("class","landscape");  
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:16:13.577

在您的函数中，您可以重写 css 规则，如下所示：

```
document.styleSheets[0].cssRules[1].style.some_attribute='some value'; 
```

1 是规则的顺序（从 0 开始）

# c++ - 添加包含 netfilter.hi 时出现错误，字段 'in'、'in6' 的类型不完整

> ID：11665529
> 
> 赞同：2
> 
> 时间：2012-07-26T08:43:13.500
> 
> 标签：c++, linux, linux-kernel

拥有没有任何代码的简单、空项目。只包括。include linux/netfilter.h 导致编译错误：

```
In file included from ../src/main.cpp:2:0:
/usr/include/linux/netfilter.h:65:17: error: field ‘in’ has incomplete type
/usr/include/linux/netfilter.h:66:18: error: field ‘in6’ has incomplete type 
```

正如您在简单项目中看到的那样，如果我删除 iostream 包含，我将得到 2 个包含，我将得到额外的错误 - '/usr/include/linux/sysctl.h:40:2: error: 'size_t' does not name a type '

```
#include <iostream>
#include <linux/netfilter.h>

int main() {
} 
```

如果我在 netfilter.h 之前添加 netinet/in.h 的包含而不是没有错误。

为什么我的简单主程序不能有这些编译错误？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T08:52:30.963

尝试包括`netinet/in.h`之前`linux/netfilter.h`。

```
#include <iostream>
#include <netinet/in.h>
#include <linux/netfilter.h> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:52:16.573

```
union nf_inet_addr {
    __u32       all[4];
    __be32      ip;
    __be32      ip6[4];
    struct in_addr  in;
    struct in6_addr in6;
}; 
```

`struct in_addr`并且`in6_addr`不是完整的类型。因此，您应该在之前包含带有结构声明的标题`netfilter.h`

# php - 使用带有 XPath 和 DOMDocument 的 DOMDocument 获取 td(style) 标签时出错？

> ID：11665533
> 
> 赞同：0
> 
> 时间：2012-07-26T08:43:23.507
> 
> 标签：php

我有一个示例代码：

```
$content = '
<table width="100%" border="0"> 
   <tr>
      <td style="white-space:nowrap;" class="cap_row_odd">browser_id</td>
      <td width="100%" class="cap_row_odd">browser_winmo_iemobile9</td>
   </tr>
   <tr>
      <td style="white-space:nowrap;" class="cap_row_even  cap_isempty"><span>nokia_feature_pack</span></td>                
      <td width="100%" class="cap_row_even cap_isempty"></td>             
   </tr>
</table>
'; 
```

我使用 DOMDocument：

```
$dom = new DOMDocument();
@$dom->loadHTML($content);
$xpath = new DOMXPath($dom);

$attributes = array();

$query1 = $xpath->query("//td[@style='white-space:nowrap']");
foreach($query1 as $a) { 
    $attributes[] = $a->nodeValue;
}

print_r($attributes); 
```

=> 但是结果为空，如何得到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:51:48.970

`;`您从 xpath 查询中遗漏了一个：

```
$query1 = $xpath->query("//td[@style='white-space:nowrap;']"); // works 
```

考虑使用[contains()](http://www.w3.org/TR/xpath/#function-contains)函数使您的查询更加健壮：

```
$query1 = $xpath->query("//td[contains(@style, 'white-space:nowrap')]"); // works too 
```

# java - 输入键点击事件未在 Firefox 中捕获

> ID：11665534
> 
> 赞同：0
> 
> 时间：2012-07-26T08:43:29.373
> 
> 标签：java, firefox, gwt, keyboard, enter

当我使用 chrome 浏览器运行我的应用程序（GWT java）时，以下代码运行良好

```
if (event.getUnicodeCharCode() == 13) 
```

但是通过 Firefox 浏览器运行的同一个应用程序并没有给出理想的结果。

我想从所有浏览器中捕获输入事件并执行相同的处理代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:04:39.433

而不是 char 代码查看键代码，与物理键关联的代码：

```
if (event.getKeyCode() == KeyCodes.KEY_ENTER) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:02:17.723

Firefox 不会`keypress`为 Enter 键触发事件，您必须使用`keydown`or`keyup`代替（但随后处理键代码，而不是字符代码；幸运的是，它们对于 Enter 键和 LF 字符是相同的）。

# delphi - RARSFX / ZipSFX - 将参数传递给存档文件

> ID：11665535
> 
> 赞同：0
> 
> 时间：2012-07-26T08:43:34.610
> 
> 标签：delphi, parameter-passing, self-extracting

我已经完成了一个应用程序的工作，现在是时候将它交付给客户了。由于它是一个小于 5 MB 的 5 文件应用程序，我决定最简单和最精简的交付方式是作为 RARSFX/ZipSFX 文件，指示解压缩临时文件夹中的所有内容，然后启动主可执行文件我的项目中的文件。

到目前为止一切正常，我选择 ZipSFX 作为默认格式，但问题是我将我的主 exe 设计为接受参数（即 -batch（处理一批文件）和 -nolang（不本地化应用程序）。但是，当使用 ZipSFX 打包时，用户实际上会将参数传递给安装程序，而不是主 exe。

有没有办法将参数“路由”到主应用程序？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:02:46.050

根评论很有趣...

如果你真的不想通过 unpack-run-cleanup 场景安装，那么寻找安装程序没有多大用处，我同意。一种方法是查看 PortableApps。他们不断地用更复杂和更严格的程序来做这些技巧，并且可能有很好的工具来实现它。

另一种方法是将需要的文件作为资源存储在主应用程序中，然后解压缩到 %TEMP% 并在那里使用表单，并在退出时删除。这就是 SysInternals 工具安装其临时驱动程序的方式。最基本的方法应该是使用 Microsoft Resource Compiler。某些语言（如 Delphi）具有用于数据存储的本机组件。

这样做你可以制作一个小的存根 exe，那个 drop-shot 主应用程序，运行它，等待完成和清理（比主程序崩溃更可靠）或者让你的主程序自己做所有事情（但它会留下垃圾如果崩溃或以不寻常的方式退出本身）您可以选择 dropper 到 eb 与 UPX 等工具打包，但主要 exe 和 DLL 应保持未打包。

您可以使用缓存目录标签标记临时文件，以提示您可以在发现杂散时自由删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:38:25.210

你看过 InnoSetup 吗？它是用 Delphi 编写的，因此您可能会很容易使用，而且开销很小。我认为您可以轻松地编写脚本以将一些参数传递到流中。

* * *

你试过 7-zip sfx 吗？一些像 Opera 这样的安装程序是在它之后制作的。

7-zip stock SFX 似乎在传递参数。 [http://sourceforge.net/projects/sevenzip/forums/forum/45798/topic/4788506](http://sourceforge.net/projects/sevenzip/forums/forum/45798/topic/4788506)

7-zip 扩展 SFX 具有特殊选项，可将其余参数沿链传递。 [http://7zsfx.info/en/switches.html#breakcmdline](http://7zsfx.info/en/switches.html#breakcmdline)

# mongodb - 是否有 MongoDB 图形日志查看器？

> ID：11665538
> 
> 赞同：3
> 
> 时间：2012-07-26T08:43:50.507
> 
> 标签：mongodb

MongoDB 将所有日志存储在一个文本文件中。我正在寻找一个 MongoDB 日志查看器，它以图形方式显示所有带有过滤器的 MongoDB 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:47:22.163

MongoDB 监控服务 (MMS) 是一个免费的托管解决方案，用于查看数据库性能和其他信息的图形可视化。

在这里查看更多信息：

[https://mms.mongodb.com/](https://mms.mongodb.com/)

虽然如果您寻找每个日志活动的“可视化工具”，您可以查看这个项目： [https ://github.com/kchodorow/edda](https://github.com/kchodorow/edda)

# iphone - 对 UIWebView 错误进行分类并在 iphone 应用上显示？

> ID：11665545
> 
> 赞同：0
> 
> 时间：2012-07-26T08:44:14.813
> 
> 标签：iphone, uiwebview

UIWebView 的任何类别是否可能出现错误？在我的应用程序中，我需要显示加载 url 时发生的实际错误。我可以在 didFailLoadWithError 方法中打印错误，但会给出关于错误的详细描述，例如

```
didFailLoadWithError Error Domain=NSURLErrorDomain Code=-1003 "A server with the specified hostname could not be found." UserInfo=0x895fb10 {NSErrorFailingURLStringKey=https://mobilelogin.bwanet.ca/mdninput.html?csphostid=J13y8E9t000Mb3ZK00001H7R, NSErrorFailingURLKey=https://mobilelogin.bwanet.ca/mdninput.html?csphostid=J13y8E9t000Mb3ZK00001H7R, NSLocalizedDescription=A server with the specified hostname could not be found., NSUnderlyingError=0x8c68f20 "A server with the specified hostname could not be found."} 
```

我将如何对这些可能的错误进行分类，我想将其显示为“找不到指定的主机名”“url 超时错误”等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:20:34.717

在这篇文章中，您可以找到可能的错误代码列表，这将帮助您使用特定的错误字符串对其进行分类：[Undocumented NSURLErrorDomain error code (-1001, -1003 and -1004) using StoreKit](https://stackoverflow.com/questions/6778167/undocumented-nsurlerrordomain-error-codes-1001-1003-and-1004-using-storeki)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:36:12.713

好的，在 didFailWithError 方法中

```
if (error.code==NSURLErrorTimedOut) {

      errorReason=@"URL Time Out Error ";

   }
    else if (error.code==NSURLErrorCannotFindHost) {
      errorReason=@"Cannot Find Host ";

   }
       else if (error.code==NSURLErrorCannotConnectToHost) {
           errorReason=@"Cannot Connect To Host";

    }
             else if (error.code==NSURLErrorNetworkConnectionLost) {
               errorReason=@"Network Connection Lost";

       }
                   else if (error.code==NSURLErrorUnknown) {
                        errorReason=@"Unknown Error";

             }
                               else {
                                   errorReason=@"Loading Failed";

                   }
 UIAlertView *errorAlert=[[UIAlertView alloc]initWithTitle:errorReason message:@"Redirecting to the server failed. do you want to EXIT the app"  delegate:self cancelButtonTitle:@"EXIT" otherButtonTitles:@"RELOAD", nil];

  [errorAlert show];
  [errorAlert release]; 
```

# vim - 使用 Vim 编辑 clojure 文件时不建议 java 完成

> ID：11665547
> 
> 赞同：1
> 
> 时间：2012-07-26T08:44:15.147
> 
> 标签：vim, clojure

我想在使用 Vim 编辑 clojure 文件时建议 java Omni 完成。我试过 slime.vim 和 vimclojure 插件，但他们不建议这样做。你有什么主意吗 ？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:05:58.067

java完成是什么意思？VimClojure 建议导入类的名称。目前它不提供方法名或任意类名。这是计划在未来的版本中发布的。

当你已经在一个打开的缓冲区中的某个地方输入了类名/方法名时，正常的 vim 完成 (<Cn>) 会建议这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:03:21.147

最新版本的[Slimv](https://bitbucket.org/kovisoft/slimv)会在按下 时完成 java 方法名称完成`<Tab>`。请注意，completion 是一个 swank 功能，因此您需要`swank-clojure`安装并运行，并且必须连接 Slimv。在 Slimv 中按 启动并连接 swank 服务器`,c`。最简单的安装方法`swank-clojure`是通过 Leiningen，确保您有`lein swank`可用的命令。

# parallel-processing - 多核机器上 MPI 集合操作的实现细节

> ID：11665548
> 
> 赞同：2
> 
> 时间：2012-07-26T08:44:18.637
> 
> 标签：parallel-processing, fortran, mpi, fortran90

在 MPI 中，每个 rank 都有一个唯一的地址空间，并且它们之间的通信通过消息传递发生。

我想知道*MPI 如何在具有共享内存的多核机器上工作*。如果队列位于两台没有共享内存的不同机器上，则 MPI 必须使用消息进行通信。但是如果 rank 在同一台物理机器上（但每个 rank 仍然有不同的地址空间），MPI 调用会利用共享内存吗？

例如，假设我正在发出 ALLREDUCE 调用。我有两台机器 M1 和 M2，每台都有 2 个内核。等级 R1 和 R2 位于机器 M1 的核心 1 和核心 2 上，而 R3 和 R4 位于机器 M2 的核心 1 和 2 上。ALLREDUCE 将如何发生？是否会传输超过 1 条消息？理想情况下，我希望 R1 和 R2 使用它们可用的共享内存（类似于 R3 和 R4）进行减少，然后在 M1 和 M2 之间进行消息交换。

是否有任何文档可以让我阅读 MPI 中集体操作的实施细节？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T08:58:14.733

集体操作的实现因一个 MPI 库而异。最好的地方是您正在使用/想要使用的具体库的源代码。

我可以告诉你 Open MPI 如何实现集合。Open MPI 由不同的组件（模块）所在的各个层组成。有一个`coll`用于集体操作的框架，它使用较低级别的`btl`框架来传输消息。框架中实现了许多不同的算法`coll`，以及实现这些算法的许多不同模块。评分机制用于选择库认为最适合您的情况的模块，但这可以很容易地用 MCA 参数覆盖。最突出的`tuned`是经过良好测试的模块，可在各种互连（从共享内存到 InfiniBand）上很好地扩展。该`tuned`模块完全不知道进程的位置。它只是使用`btl`框架来发送消息并`btl`注意使用共享内存或网络操作。模块中的一些算法`tuned`是分层的，并且通过适当的参数调整（OMPI 的巨大灵活性来自于许多内部 MCA 参数可以在不重新编译的情况下更改）这些算法可以匹配集群的实际层次结构。还有另一个`coll`模块`hierarch`，它尽最大努力收集尽可能多的物理拓扑信息，并使用它来优化集体通信。

不幸的是，几乎所有的 MPI 实现都是用 C 语言编写的，顶部有非常薄的层以提供 Fortran 接口。因此，如果您想深入研究这个主题，我希望您对 C 的了解高于平均水平。也有很多关于集体运营优化的研究论文。其中一些是免费提供的，另一些可以通过学术订阅获得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T08:57:03.620

由于这是您正在使用的 MPI 实现的实现细节，我想最好在您正在使用的任何 MPI 实现的邮件列表中询问。或者，在谷歌学者或其他搜索科学论文的网站上搜索“mpi 集体”会给你带来很多点击。

但是，是的，一个合理的实现是首先使用共享内存在节点内进行减少，以减少网络消息的数量。

# facebook - 在 spotify 中阻止 facebook 用户缩略图链接

> ID：11665550
> 
> 赞同：0
> 
> 时间：2012-07-26T08:44:22.397
> 
> 标签：facebook, dialog, feed, spotify

我正在 Spotify 中开发一个应用程序，我希望用户彼此共享内容。

我所做的是使用 spotifys showAuthenticationDialog 和 url 看起来像 [http://www.facebook.com/dialog/feed?app_id=](http://www.facebook.com/dialog/feed?app_id=) < appid >&to=< otheruser >&link=< link >&redirect_uri=< redirect >&display =弹出

*我会在这里发布一张显示对话框的图片......但在stackoverflow上没有足够的声誉;）*

现在的问题是单击用户缩略图将在弹出窗口中显示该用户的 facebook 页面。有没有办法阻止这个？

Facebooks 示例的工作方式相同，但我在 facebook 上看到其他应用程序/游戏已设法阻止此链接。

提前致谢！

罗杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:49:10.900

如果它是在您无法在 Spotify 客户端内部控制的弹出窗口中执行此操作，那么这就是 Spotify 中的一个错误。

# asp.net - Internet Explorer 8 实际浏览器中的 CSS 问题

> ID：11665557
> 
> 赞同：0
> 
> 时间：2012-07-26T08:44:55.190
> 
> 标签：asp.net, html, css, webforms

我在具有 Internet Explorer 8 的客户端计算机上面临设计问题。在具有 IE 9 的计算机上，即使使用 F12（IE 8/7 标准或兼容模式），我也无法复制相同的设计问题。该问题仅发生在系统上安装了 IE 8 的用户身上。

该问题仅发生在除主页之外的所有页面的 TOP Menu 上，主页具有不同的设计。

[网站链接](http://tinyurl.com/c99epj8)

菜单部分设计问题的屏幕截图：

![在此处输入图像描述](../Images/ec647496399213a51e2ff211d62e5381.png)

我将不胜感激这方面的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:49:43.493

您是否尝试删除`display: inline`and `position: relative`？

# macos - Bash 文件夹变量中的转义空格

> ID：11665558
> 
> 赞同：1
> 
> 时间：2012-07-26T08:44:59.940
> 
> 标签：macos, bash, terminal, .bash-profile

我正在尝试在 Bash 中创建一个变量以快速访问某些文件夹并将其保存到我的 bash_profile 脚本文件中。这就是脚本的样子

```
Documents=~/Documents
Apps=~/Library/Application\ Support/iPhone\ Simulator/5.1/Applications 
```

运行脚本后，$Documents 变量有效，而 $Apps 无效。它说：

```
-bash: cd: /Users/myusername/Library/Application: No such file or directory 
```

这是文件夹的路径：

```
/Users/myusername/Library/Application Support/iPhone Simulator/5.1/Applications 
```

我应该如何逃离空间？我使用 Vim 并输入“cd $Apps”。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T08:47:01.227

空间很好；这是你的命令是错误的。

```
cd "$Apps" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T10:33:09.053

您也可以引用字符串而不使用反斜杠字符：Apps='~/Library/Application Support/iPhone Simulator/5.1/Applications' cd "$Apps"

# mongodb - 数据库错误 MongoDB：数据库消失

> ID：11665559
> 
> 赞同：5
> 
> 时间：2012-07-26T08:45:11.477
> 
> 标签：mongodb, database

启动了非常多的进程。然后重新启动服务器，数据库就消失了。当我走进rockmongo的时候，还没有看到旧的数据库。有一个新的数据库管理员，仅此而已。

```
 db.serverStatus()
{
        "host" : "host",
        "version" : "2.0.6",
        "process" : "mongod",
        "uptime" : 1041,
        "uptimeEstimate" : 1037,
        "localTime" : ISODate("2012-07-26T08:20:40.729Z"),
        "globalLock" : {
                "totalTime" : 1041408230,
                "lockTime" : 330771,
                "ratio" : 0.0003176189610101314,
                "currentQueue" : {
                        "total" : 0,
                        "readers" : 0,
                        "writers" : 0
                },
                "activeClients" : {
                        "total" : 0,
                        "readers" : 0,
                        "writers" : 0
                }
        },
        "mem" : {
                "bits" : 64,
                "resident" : 19,
                "virtual" : 114,
                "supported" : true,
                "mapped" : 0,
                "mappedWithJournal" : 0
        },
        "connections" : {
                "current" : 11,
                "available" : 808
        },
        "extra_info" : {
                "note" : "fields vary by platform",
                "heap_usage_bytes" : 3623360,
                "page_faults" : 2
        },
        "indexCounters" : {
                "btree" : {
                        "accesses" : 0,
                        "hits" : 0,
                        "misses" : 0,
                        "resets" : 0,
                        "missRatio" : 0
                }
        },
        "backgroundFlushing" : {
                "flushes" : 17,
                "total_ms" : 0,
                "average_ms" : 0,
                "last_ms" : 0,
                "last_finished" : ISODate("2012-07-26T08:20:19.341Z")
        },
        "cursors" : {
                "totalOpen" : 0,
                "clientCursors_size" : 0,
                "timedOut" : 0
        },
        "network" : {
                "bytesIn" : 4429,
                "bytesOut" : 14192,
                "numRequests" : 56
        },
        "opcounters" : {
                "insert" : 0,
                "query" : 22,
                "update" : 0,
                "delete" : 0,
                "getmore" : 0,
                "command" : 54
        },
        "asserts" : {
                "regular" : 0,
                "warning" : 14,
                "msg" : 0,
                "user" : 0,
                "rollovers" : 0
        },
        "writeBacksQueued" : false,
        "dur" : {
                "commits" : 29,
                "journaledMB" : 0,
                "writeToDataFilesMB" : 0,
                "compression" : 0,
                "commitsInWriteLock" : 0,
                "earlyCommits" : 0,
                "timeMs" : {
                        "dt" : 3045,
                        "prepLogBuffer" : 0,
                        "writeToJournal" : 0,
                        "writeToDataFiles" : 0,
                        "remapPrivateView" : 0
                }
        },
        "ok" : 1
} 
```

mongodb.log

```
 {
            "assertion" : "file /var/lib/mongodb/baza.4 open/create failed in create                                                                             PrivateMap (look in log for more information)",
            "assertionCode" : 13636,
            "errmsg" : "db assertion failure",
            "ok" : 0
    }

Thu Jul 26 12:05:44 [conn5] ERROR: mmap private failed with out of memory. (64 bit build)
Thu Jul 26 12:05:44 [conn5] Assertion: 13636:file /var/lib/mongodb/baza.4 open/create failed in createPrivateMap (look in log for more information)
0x5848a2 0x75dcea 0x75e8e3 0x8a8c3b 0x8a0962 0x8a1d03 0x8a1fda 0x8a2835 0x898619 0x898ea3 0x982bd5 0x97c4f4 0x97dbfd 0x940f05 0x943a30 0x889107 0x88dcd9 0xaa0bc8 0x6389f7 0x2b76122978ca 
 /usr/bin/mongod(_ZN5mongo11msgassertedEiPKc+0x112) [0x5848a2]
 /usr/bin/mongod(_ZN5mongo8MongoMMF13finishOpeningEv+0x1ca) [0x75dcea]
 /usr/bin/mongod(_ZN5mongo8MongoMMF6createESsRyb+0x63) [0x75e8e3]
 /usr/bin/mongod(_ZN5mongo13MongoDataFile4openEPKcib+0x14b) [0x8a8c3b]
 /usr/bin/mongod(_ZN5mongo8Database7getFileEiib+0x102) [0x8a0962]
 /usr/bin/mongod(_ZN5mongo8Database12openAllFilesEv+0x33) [0x8a1d03]
 /usr/bin/mongod(_ZN5mongo8DatabaseC1EPKcRbRKSs+0x1ca) [0x8a1fda]
 /usr/bin/mongod(_ZN5mongo14DatabaseHolder11getOrCreateERKSsS2_Rb+0x605) [0x8a2835]
 /usr/bin/mongod(_ZN5mongo6Client7Context11_finishInitEb+0x2e9) [0x898619]
 /usr/bin/mongod(_ZN5mongo6Client7ContextC1ERKSsSsPNS_9mongolockEb+0x73) [0x898ea3]
 /usr/bin/mongod(_ZN5mongo16CmdListDatabases3runERKSsRNS_7BSONObjEiRSsRNS_14BSONObjBuilderEb+0x215) [0x982bd5]
 /usr/bin/mongod(_ZN5mongo11execCommandEPNS_7CommandERNS_6ClientEiPKcRNS_7BSONObjERNS_14BSONObjBuilderEb+0x6c4) [0x97c4f4]
 /usr/bin/mongod(_ZN5mongo12_runCommandsEPKcRNS_7BSONObjERNS_11_BufBuilderINS_16TrivialAllocatorEEERNS_14BSONObjBuilderEbi+0x6fd) [0x97dbfd]
 /usr/bin/mongod(_ZN5mongo11runCommandsEPKcRNS_7BSONObjERNS_5CurOpERNS_11_BufBuilderINS_16TrivialAllocatorEEERNS_14BSONObjBuilderEbi+0x35) [0x940f05]
 /usr/bin/mongod(_ZN5mongo8runQueryERNS_7MessageERNS_12QueryMessageERNS_5CurOpES1_+0x1740) [0x943a30]
 /usr/bin/mongod() [0x889107]
 /usr/bin/mongod(_ZN5mongo16assembleResponseERNS_7MessageERNS_10DbResponseERKNS_11HostAndPortE+0x559) [0x88dcd9]
 /usr/bin/mongod(_ZN5mongo16MyMessageHandler7processERNS_7MessageEPNS_21AbstractMessagingPortEPNS_9LastErrorE+0x78) [0xaa0bc8]
 /usr/bin/mongod(_ZN5mongo3pms9threadRunEPNS_13MessagingPortE+0x287) [0x6389f7]
 /lib/libpthread.so.0(+0x68ca) [0x2b76122978ca]
Thu Jul 26 12:05:52 [initandlisten] connection accepted from 127.0.0.1:41970 #11 
```

~# 免费 -ltm

```
 total       used       free     shared    buffers     cached
Mem:          1400        196       1203          0          0          0
Low:          1400        196       1203
High:            0          0          0
-/+ buffers/cache:        196       1203
Swap:            0          0          0
Total:        1400        196       1203 
```

~# cat /proc/sys/vm/overcommit_memory

```
0 
```

~# cat /proc/sys/vm/overcommit_ratio

```
50 
```

~# ulimit -a

```
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 16382
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) unlimited
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

**UPD：** 解决方案：禁用日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:24:41.710

您收到的错误表明数据仍然存在，但是在映射数据文件时出现问题。这条线是您需要查看的第一件事：

```
Thu Jul 26 12:05:44 [conn5] Assertion: 13636:file /var/lib/mongodb/baza.4 open/create failed in createPrivateMap (look in log for more information) 
```

检查该文件（以及数据路径中的其他文件）的权限，确保从该角度来看没有任何问题。

接下来，出现内存不足错误：

Thu Jul 26 12:05:44 [conn5] 错误：mmap private 因内存不足而失败。（64 位构建）

您可能会遇到此错误：[https ://jira.mongodb.org/browse/SERVER-6414](https://jira.mongodb.org/browse/SERVER-6414)

因此，您可以尝试 2.0.7，其中包含对此的修复，在撰写本文时，候选版本可在[下载页面上找到。](http://www.mongodb.org/downloads)

最后，如果您有选项，您可以通过增加此实例的内存（如果它是某种虚拟机）来解决此问题，就运行 MongoDB 实例而言，1.4GB 的 RAM 并不是很多。

# jquery - div点击事件不起作用

> ID：11665561
> 
> 赞同：2
> 
> 时间：2012-07-26T08:45:17.623
> 
> 标签：jquery

我有这个简单的代码，在正文中附加了一个 div，

```
<!DOCTYPE html>
<html>

    <head>
        <script type="text/javascript" src='/libs/jquery/jquery.js'></script>
        <script>
            $(document).ready( function() {
                $('#show').click( function() {
                    $("<div id='fade'></div>").appendTo('body');
                    $('#fade').fadeIn('fast');
                });

                $('#fade').click( function() {
                    $('#fade').remove('fast');
                });
            });
        </script>
    </head>

    <body>
        <div>
            <input type="button" value="show" id="show"/>
        </div>
    </body>
</html> 
```

css

```
#fade {
    display: none;
    background: black;
    opacity:0.4;
    filter:alpha(opacity=50);
    z-index: 1;
    position: fixed;
    left: 0; top: 0;
    width: 100%; height: 100%;
}

#window {
    width: 440px;
    height: 356px;
    background: white;
    position:fixed;
    left:50%;
    top:30%;
    margin:-70px 0 0 -245px;
    z-index: 2;
} 
```

附加我的 div#fade 工作正常，但我在#fade 上的点击事件不起作用。我看起来很简单，但我不知道为什么不能正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T08:54:55.670

[http://jsfiddle.net/ffK3u/1/](http://jsfiddle.net/ffK3u/1/)上的工作解决方案

```
$(document).ready( function() {
                $('#show').click( function() {
                    $("<div id='fade'></div>").appendTo('body');
                    $('#fade').fadeIn('fast');
                });

                $(document).on("click","#fade", function() {
                    $('#fade').fadeOut("slow",function(){
                        $('#fade').remove();
                    });
                });
            }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T08:47:06.863

假设您使用的是 jQuery 1.7，您可以使用`.on()`将点击委托给文档级别。

```
$(document).on('click', '#fade', function() {
    $('#fade').remove('fast');
}); 
```

基本上，您不能为尚不存在的元素设置点击处理程序，但是在这种情况下，您可以将点击委托给父级`document`。当文档收到点击时，它会检查以确保它来自`#fade`并执行您需要执行的任何操作。

此方法是 的更新和更好的版本`.live()`，您可能见过也可能没有见过用于将事件绑定到动态插入到 DOM 中的元素。

为了进一步阅读，此技术依赖于事件冒泡和事件委托。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T08:52:34.140

***[演示。](http://jsfiddle.net/ePPVB/)***

**您不需要每次都创建一个新的 div**，只需将其缓存在局部变量中即可。

使用`.on`将起作用，但不是必需的。

```
var fade = $("<div id='fade'></div>").click(function () {
    $(this).fadeOut('fast');
});

$('#show').click(function () {
    fade.appendTo('body').fadeIn('fast');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T08:50:45.580

[`.remove()`](http://api.jquery.com/remove/)在 jquery 中只接受`selector`作为参数

```
 $('#show').click( function() {
                $("<div id='fade'></div>").appendTo('body');
                $('#fade').fadeIn('fast');

                $('#fade').click( function() {
                    $(this).remove();
                });
            }); 
```

[演示](http://jsfiddle.net/9Lsfw/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T08:51:09.553

如果您希望它淡出，请执行以下操作：

```
$('#fade').click( function() {
    $('#fade').fadeOut('fast');
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T08:53:49.083

```
<!DOCTYPE html>
<html>

    <head>
        <script type="text/javascript" src='jquery-1.7.1.min.js'></script>
        <script>
            $(document).ready( function() {
            alert($('#show'));
                $('#show').click( function() {
                    alert(0);//this code already execution,prove click event not problem.
                    $("<div id='fade'></div>").appendTo('body');//issue here 'body' replace document.body
                    $('#fade').fadeIn('fast');
                });

                $('#fade').click( function() {
                    $('#fade').remove('fast');
                });
            });
        </script>
    </head>

    <body>
        <div>
            <input type="button" value="show" id="show"/>
        </div>
    </body>
</html> 
```

# javascript - 三.js如何使用四元数旋转相机

> ID：11665562
> 
> 赞同：13
> 
> 时间：2012-07-26T08:45:19.027
> 
> 标签：javascript, three.js

在 Three.js 中，我想使用 THREE.quaternion 使相机对象旋转到所选对象。

我确实在网上搜索过，但没有找到关于如何使用这个四元数类的示例/演示或文档。

我用以下代码试试运气：

```
 camera = new THREE.PerspectiveCamera( 40, window.innerWidth / window.innerHeight, 1, 10000 );
    camera.position.y = 10;
    camera.position.z = 0;
    camera.position.x = radious;
    camera.useQuaternion = true;

   // I did use the TrackballTrackballControls. Maybe it causes the problem so I put it here
    controls = new THREE.TrackballControls( camera, document.getElementById(_canvasElement) );

    // function to make the camera rotate to the object
    function focusOn3DObject(obj){  
        obj.useQuaternion = true;
        obj.quaternion = new THREE.Quaternion(obj.position.x, obj.position.y, obj.position.z, 1);

        var newQuaternion = new THREE.Quaternion();
        THREE.Quaternion.slerp(camera.quaternion, obj.quaternion, newQuaternion, 0.07);
        camera.quaternion = newQuaternion;
    } 
```

但它不起作用。我错过了什么？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-06T13:53:27.000

Slerp 很容易。它需要4个参数：

*   `targetRotation`实际的相机旋转
*   `destinationRotation`物体旋转
*   `destinationRotation`新的四元数将是新的相机旋转
*   `percentOfRotation`这个参数是游乐场，我现在在这里使用 0.07，可以是 0 (0%) 和 1 (100%) 之间的值

这是我的旋转方法：

```
var qm = new THREE.Quaternion();
THREE.Quaternion.slerp(camera.quaternion, destRotation, qm, 0.07);
camera.quaternion = qm;
camera.quaternion.normalize(); 
```

希望这会对您有所帮助。不要打扰我也为完美的相机工作了几个星期。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-20T23:11:27.537

您可以使用 ThreeJs 中的 applyQuaternion 方法

```
 const quaternion = new THREE.Quaternion(obj.position.x, obj.position.y, obj.position.z, 1);

 camera.applyQuaternion(quaternion); // Apply Quaternion

 camera.quaternion.normalize();  // Normalize Quaternion 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T15:41:47.647

我认为这条线行不通：

```
obj.quaternion = new THREE.Quaternion(obj.position.x, obj.position.y, obj.position.z, 1); 
```

你需要设置

```
obj.useQuaternion = true 
```

将对象添加到场景后，旋转时会自动应用到`obj.quaternion`.

第二点是您应该将对象应用于您的控件而不是相机。因为你想控制物体而不是相机？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-21T13:51:12.107

这就是我的做法：

1.  获取相机的当前四元数（initialQuaternion）
2.  创建相机的克隆
3.  使用 lookAt 方法使克隆查看目标
4.  问题是，相机的 lookAt 方法实际上会让它看起来远离目标，所以你有两个选择：

*   要么直接使用lookAt方法，然后反转旋转
*   或者计算目标应该有的位置，这样当你远离它时，你实际上是朝着正确的方向看

6.  获取克隆的新四元数（targetQuaternion）
7.  通过使用动画循环，在 initialQuaternion 和 targetQuaternion 之间进行 slerp

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-07T03:48:21.793

我试过使用它：

```
 var newQuaternion = new THREE.Quaternion();
        THREE.Quaternion.slerp(camera.quaternion, obj.quaternion, newQuaternion, 0.01);
        camera.quaternion = newQuaternion;
        camera.quaternion.normalize();
        camera.matrixAutoUpdate(); 
```

然而，我没有得到想要的结果。我知道这是一个相当老的帖子，但如果有人能回复我会很高兴。除了这个，我没有看到任何其他相关的帖子，所以真的希望有人回应。

这是我的问题的详细信息：[Rotate camera to see Selected object in three.js](https://stackoverflow.com/q/58740616/12198192)

# attributes - 基于分层导航主动过滤器在产品列表中注入特定的附加产品

> ID：11665563
> 
> 赞同：1
> 
> 时间：2012-07-26T08:45:21.083
> 
> 标签：attributes, categories, magento, magento-1.7

我们正在 Magento 1.7.0.2 上建立一个小型在线商店，到目前为止，从 XML 和 CSV 文件导入类别、属性和产品都很好。然后我尝试实现似乎很容易完成的任务，但我无法达到我的目标，这是我的问题：

假设您有类别“三脚架”和一个属性“Weight_it_support”，这意味着特定三脚架可以支撑多少重量而不会摔倒。然后我还有另一个类别“相机”和一个属性“重量”，无需描述。

然后我想要完成的是在分层导航（或任何其他地方）上有一个带有属性“Weight_it_support”的过滤器，一旦我点击它，不仅显示支持这个重量的三脚架，还有重量更轻的相机或等于与所选过滤器相对应的那个。希望它足够清楚。

我认为这可以通过将“Weight_it_support”分配给一组属性来完成，在属性的“在分层导航中使用”属性上选择“是”，仅此而已。但是这些操作并不能解决我的目标，因为我还需要链接“三脚架”和“相机”这两个类别，这没有用，因为从这一点开始，我会将所有内容都混在这些类别上，我们不希望这样。

有什么线索吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:25:40.130

这是一个版本，当有关它们支持的重量的过滤器处于活动状态时，它会在“三脚架”类别页面上创建一个附加块。

**Github 上的回购**：[https ://github.com/herveguetin/Demo_RelatedCamera](https://github.com/herveguetin/Demo_RelatedCamera)

**Github 上的 Wiki**：[https ://github.com/herveguetin/Demo_RelatedCamera/wiki](https://github.com/herveguetin/Demo_RelatedCamera/wiki)

* * *

**[编辑]** GIT Repo 已更新为适用于完整产品列表实施的版本。但是，块重写是强制性的。它是 Mage_Catalog_Block_Product_List，它是一个通常被重写的块。

**[编辑 2]**以前的版本在不混合来自不同类别的产品（三脚架 + 相机）时制作 3 个产品集合加载而不是一个。我做了一些更新，修改了原始的 mySql 查询，以便注入能够添加相机产品的语句。因此，即使我们从三脚架顶部的相机类别中请求产品，也只有一个集合负载。

谨慎使用：启用产品的平面目录时它不起作用。您可以通过将常量 Demo_RelatedCamera_Block_Collection::USE_MYSQL_UPDATES 设置为 true 或 false 来打开或关闭此功能；

在大型产品群（30 000+）上，我们非常鼓励您使用此功能并挠头以使其适应您的需求！

# java - JSF ViewExpiredExceptionHandler NullPointerException

> ID：11665564
> 
> 赞同：0
> 
> 时间：2012-07-26T08:45:23.927
> 
> 标签：java, exception, jsf-2, session-timeout

我在 WebSphere Application Server 8 上使用 Apache MyFaces 2。我想实现一个处理 ViewExpiredException 的自定义 ExceptionHandler。

我使用[BalusC 发布](https://stackoverflow.com/questions/8144195/check-if-session-exists-jsf/8144420#8144420)的代码。工厂在正确的时间被调用，但是在这里调用 handleNavigation 时我得到了 NullPointerException：

```
public class ViewExpiredExceptionHandler extends ExceptionHandlerWrapper {

    private ExceptionHandler wrapped;

    public ViewExpiredExceptionHandler(ExceptionHandler wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public void handle() throws FacesException {
        FacesContext facesContext = FacesContext.getCurrentInstance();

        for (Iterator<ExceptionQueuedEvent> iter = getUnhandledExceptionQueuedEvents()
                .iterator(); iter.hasNext();) {
            Throwable exception = iter.next().getContext().getException();

            if (exception instanceof ViewExpiredException) {
                facesContext
                        .getApplication()
                        .getNavigationHandler()
                        .handleNavigation(facesContext, null,
                                "/content/home?faces-redirect=true&expired=true");
                facesContext.renderResponse();
                iter.remove();
            }
        }

        getWrapped().handle();
    }

    @Override
    public ExceptionHandler getWrapped() {
        return wrapped;
    }

} 
```

例外是：

```
com.ibm.ws.webcontainer.servlet.ServletWrapper service SRVE0068E: An exception was thrown by one of the service methods of the servlet [Faces Servlet] in application [My_App]. Exception created : [java.lang.NullPointerException
    at org.apache.myfaces.application.NavigationHandlerImpl.getNavigationCase(NavigationHandlerImpl.java:203)
    at org.apache.myfaces.application.NavigationHandlerImpl.handleNavigation(NavigationHandlerImpl.java:77)
    at myapp.ViewExpiredExceptionHandler.handle(ViewExpiredExceptionHandler.java:33)
    at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:191)
    at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:189)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1147)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:722)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:449)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:125)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:92)
    at myapp.auth.RequestFilter.doFilter(RequestFilter.java:35)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:192)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:89)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:919)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1016)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:87)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:886)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1655)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1650)
] 
```

**编辑：** 首先 /content 是我的 WebContent 中的一个目录。它不是上下文路径。我更改了代码并使用了这样的外部重定向：

```
if (exception instanceof ViewExpiredException) {
        String loc = facesContext.getExternalContext()
            .getRequestServletPath();
        try {
            facesContext.getExternalContext().redirect(loc);
            //facesContext.getExternalContext().redirect("/content/home.xhtml");
            //facesContext.getExternalContext().redirect("/");
        } catch (IOException e) {
            e.printStackTrace();
        }
} 
```

但仍然在 facesContext.getExternalContext().redirect 上得到相同的 NullPointerException。但 ExternalContext 不为空。我得到了 RequestServletPath。

那么我的代码有什么问题吗？

最好的问候 - 投票

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:29:27.167

`"/content/home?faces-redirect=true&expired=true"`显然不被认为是有效的导航案例。由于您的环境的详细信息尚不清楚，因此无法判断其中有什么问题。是否是`/content`上下文路径？如果是这样，那么它应该被省略。真的有`/home.xhtml`档案吗？等等。

如果您仍然无法弄清楚，那么发送重定向可能更容易，因为无论如何您似乎都是在重定向之后。

```
externalContext.redirect("/content/home.xhtml?expired=true"); 
```

请注意，如果 URL 无效，这仍然会导致 404，但它可能更容易为您找出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:00:27.110

我得到了一组类似的错误。按照上述方法，我的手柄导航

```
nav.handleNavigation(fc, null, "/error"); 
```

返回一个像上面一样的 NPE（甚至相同的行号）。

如果我修改为只进行重定向，我会得到：

```
java.lang.NullPointerException
at org.apache.myfaces.context.servlet.PartialViewContextImpl.getPartialResponseWriter(PartialViewContextImpl.java:303)
at org.primefaces.context.PrimePartialViewContext.getPartialResponseWriter(PrimePartialViewContext.java:45)
at org.apache.myfaces.context.servlet.ServletExternalContextImpl.redirect(ServletExternalContextImpl.java:452)
at my.package.CustomExceptionHandler.handle(CustomExceptionHandler.java:134)
at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:191)
at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:189)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1235)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:758)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:441) 
```

在这两种情况下，我认为原因是`getViewRoot()`null 显然不是 'getNavigationCase' 或`getPartialResponseWriter`.

我能够使用此博客文章中的示例进行修复（[http://ovaraksin.blogspot.com/2010/10/jsf-ajax-redirect-after-session-timeout.html](http://ovaraksin.blogspot.com/2010/10/jsf-ajax-redirect-after-session-timeout.html)）。似乎 Mojarra 和 PrimeFaces（我正在使用带有 MyFaces 的 PrimeFaces 3.5）在出现此错误的情况下存在标准重定向问题。修复是在这种情况下

```
facescontext.getResponseWriter() == null && facescontext.getRenderKit() == null 
```

它是一个部分请求和一个ajax请求，然后使用`RenderKit`创建一个`ResponseWriter`并将其设置在`facescontext`.

然后`externalContext.redirect()`工作。

编辑：更具体地说，在博客文章中，`SecurityPhaseListener`有一个`doRedirect(FacesContext fc, String redirectPage)`方法，其中包括一个名为：

```
 // fix for renderer kit (Mojarra's and PrimeFaces's ajax redirect) 
```

我将该部分提升为我从块中调用的重定向响应方法`if (exception instanceof ViewExpiredException)`

**编辑** 好的，最终解决方案。在[http://jira.icesoft.org/browse/ICE-4251](http://jira.icesoft.org/browse/ICE-4251)的一小段代码的帮助下，我能够使用句柄导航来实现这一点。这是我从 JIRA 问题中添加的调用，它在 handle() 中执行

```
checkViewRoot(facesContext,"/error.jsf"); 
```

...这是方法

```
 public static void checkViewRoot( FacesContext ctx, String viewId) {
    if (ctx.getViewRoot() == null) {
        UIViewRoot viewRoot = ctx.getApplication().getViewHandler().createView(ctx, viewId);
        if (viewRoot != null) {
            ctx.setViewRoot(viewRoot);
        }
    }
} 
```

... 之后，在 handle() 方法中调用 handlenavigation。

```
 facesContext
            .getApplication()
            .getNavigationHandler()
            .handleNavigation(facesContext, null,
                    (redirectPage != null ? redirectPage : ""));
    facesContext.renderResponse(); 
```

请注意，根据我迄今为止的经验，它`viewId`必须是现有页面，并且与您需要重定向的页面不同。

好消息是`facesmessage`我设置的`viewexpiredexception`消息现在显示在新页面上，我之前在重定向时遇到了各种麻烦。

# python - 从 django 中基于类的通用视图中删除重复项

> ID：11665566
> 
> 赞同：0
> 
> 时间：2012-07-26T08:45:31.417
> 
> 标签：python, django, django-views

```
class InvestigationCreateView(CreateView):
      form_class = InvestigationForm
      template_name = 'hse/investigation/investigation_create.html'
      success_url = reverse_lazy('hse-incidents')

      def get_context_data(self, **kwargs):
          context = super(InvestigationCreateView, self).get_context_data(**kwargs)
          id = self.kwargs['pk']
          incident = Incident.objects.get(id=id)
          context['incident'] = incident
          return context

      def form_valid(self, form):
          self.object = form.save(commit=False)
          id = self.kwargs['pk']
          incident = Incident.objects.get(id=id)
          self.object.incident = incident
          self.object.save()
          return HttpResponseRedirect(self.get_success_url()) 
```

在上面的代码中，语句**id = self.kwargs['pk']**和event **= Incident.objects.get(id=id)在****get_context_data()**和**form_valid()**方法中重复

我怎样才能避免在 python 中编写这样的重复。

我尝试在同一个类中创建一个单独的方法，该方法将在两种方法中调用，但这对我不起作用。

# android - Android 动态壁纸未在我的平板电脑上的 Google Play 中显示

> ID：11665567
> 
> 赞同：1
> 
> 时间：2012-07-26T08:45:35.783
> 
> 标签：android, live-wallpaper, google-play

我编写了我的第一个 Android 动态壁纸并将其发布在 Google Play 上。我首先在我的平板电脑（Manta MID001 和 Android 2.2）上通过从 apk 文件安装它来测试它，它工作正常。我从来没有机会在这个设备上调试，因为 USB 端口坏了​​。

发布已经一个多星期了，但我在使用平板电脑时仍然无法在 Google Play 中看到壁纸。我只能从我的电脑上找到它，它可以[在这里找到](https://play.google.com/store/apps/details?id=pl.bartoszwesolowski.ringlivewallpaperdemo)。在找到我的其他应用并选择“来自此开发者的更多”时，我什至看不到壁纸。什么可能是错的？

这是我的 AndroidManifest.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="pl.bartoszwesolowski.ringlivewallpaperdemo"
    android:versionCode="2"
    android:versionName="1.1" >

    <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="7" />
    <uses-feature android:name="android.software.live_wallpaper" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name">

        <service
            android:label="@string/app_name"
            android:name=".service.RingWallpaperService"
            android:permission="android.permission.BIND_WALLPAPER">
            <intent-filter>
                <action android:name="android.service.wallpaper.WallpaperService" />
            </intent-filter>
            <meta-data android:name="android.service.wallpaper" android:resource="@layout/wallpaper" />
        </service>

    </application>

</manifest> 
```

我确信我的平板电脑支持动态壁纸，因为我可以下载并使用其中的几个。我什至运行这个特殊的壁纸，从一个 apk 文件安装它，我没有遇到任何问题。

我阅读了 StackOverflow 上的其他帖子，建议在清单文件中添加以下几行：

```
<supports-screens android:smallScreens="true"
              android:normalScreens="true"
              android:largeScreens="true"
              android:xlargeScreens="true" /> 
```

我不认为它们是必要的，因为根据[Google Play 文档上的过滤器](http://developer.android.com/guide/google/play/filters.html)，这些选项默认为真：

> 对于将 android:minSdkVersion 或 android:targetSdkVersion 设置为 3 或更低的应用程序，元素本身是未定义的，并且没有可用的属性。在这种情况下，Google Play 假定应用程序是为正常尺寸的屏幕设计的，并将应用程序显示给具有正常或更大屏幕的设备。
> 
> 当 android:minSdkVersion 或 android:targetSdkVersion 设置为 4 或更高时，所有属性的默认值为“true”。这样，应用程序被认为默认支持所有屏幕尺寸。

# php - php REGEX 是否有任何匹配的可能性？

> ID：11665569
> 
> 赞同：0
> 
> 时间：2012-07-26T08:46:11.553
> 
> 标签：php, regex, string, pattern-matching

在 php 中，假设我有 2 组单词要匹配：

离开团队：

1.  堆叠
2.  溢出

右组：

*   堆栈流
*   堆栈溢出
*   在堆栈流上

从左组的角度（通过循环每个），我如何编写正则表达式模式来说明里面的条目.. 右组中的条目是否相似匹配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T08:53:47.010

我认为在这种情况下有更好的选择。有一个名为[levenshtein](http://www.php.net/manual/en/function.levenshtein.php)的函数可以计算两个字符串之间的距离 - 将一个字符串转换为另一个字符串时必须替换、插入或删除的最少字符数。

所以你可以遍历你的数组并找到最接近的字符串。手册页上有一个很好的例子。

# xml - Magento 模块布局 xml 顺序

> ID：11665572
> 
> 赞同：1
> 
> 时间：2012-07-26T08:46:21.053
> 
> 标签：xml, magento, layout, module, magento-layout-xml

我在我的 Magento 安装中使用了一个自定义模块，它使用布局 XML 文件将一些 Javascript 文件添加到每个页面的头部。

这很好用，但是这些 javascript 文件需要在我已经在 page.xml 中声明的文件之后添加，但是似乎 XML 文件是按字母顺序处理的，而不是按层次结构处理的！

我查看了 page/html_head 块，似乎没有本地方法来设置/更改包含项目的顺序。如果不从我的模块的 XML 文件中删除 javascript 文件并将它们放在 page.xml 中，有没有人知道如何确保首先添加 page.xml javascript？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T12:18:50.377

布局 XML 文件仅作为模块加载顺序的影响按字母顺序处理，该顺序受`glob()`.

虽然 head 块缺少排序功能是不幸的，但有一种解决方法。您可以使您的模块依赖`Mage_Page`于您的模块激活文件。

其他选项是：向块添加`core/template`块`head`并使用带有主题安全链接的模板到您的 JS 文件，或者添加`core/text`块并调用`setText()`带有指向 JS 文件的显式链接（不太安全，通常用于 CDN 托管的脚本）。有一个空调`getChildHtml()`用`page/html/head.phtml`将呈现`head`.

# javascript - 单击复选框按钮时如何制作单选按钮？

> ID：11665577
> 
> 赞同：0
> 
> 时间：2012-07-26T08:46:35.100
> 
> 标签：javascript, jquery

单击复选框按钮时如何制作单选按钮？而且，当复选框未选中时，如何删除单选按钮？

```
if($("input[type=checkbox]").is(':checked')==true) {
  var val = this.value;
  var dataSplit = val.split("_");
  var result = '<div id="div'+dataSplit[0]+'"><input type="radio" class="choosen"
    name="rdb_'+val+'" value="'+val+'" id="'+dataSplit[0]+
    '" /><label class="'+dataSplit[0]+'">'+dataSplit[1]+'</label><br /></div>';
  $("#result").append(result);
}else if ($("input[type=checkbox]").is(':checked')==false){
  var val1 = this.value;
  var dataSplit1 = val1.split("_");
  $('#div'+dataSplit1[0]).parent.remove();
} 
```

当我选中复选框时代码有效，但当我取消选中复选框时它不起作用。当我取消选中时，仍会添加单选按钮。

注意：尝试选中 2/3 复选框，然后取消选中它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:57:40.787

您可能应该将其绑定到复选框的更改事件，然后执行以下操作：

```
$("input[type=checkbox]").on('change', function() {
    var val = this.value;
    var dataSplit = val.split("_");
    if (this.checked) {
        var result = '<div id="div'+dataSplit[0]+'"><input type="radio" class="choosen" name="rdb_'+val+'" value="'+val+'" id="'+dataSplit[0]+'" /><label class="'+dataSplit[0]+'">'+dataSplit[1]+'</label><br /></div>';
        $("#result").append(result);
    }else{
        $('#div'+dataSplit[0]).remove();
    }
}); 
```

[小提琴](http://jsfiddle.net/RV4Fg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:57:11.297

错误：

*   `parent().remove()`不是`parent.remove()`，但为什么要删除 div 的父级而不是 div 呢？
*   `dataSplit1`代替`dataSplit`

请注意，我使用*单击*而不是*更改*，因为某些浏览器在使用更改事件时对象失去焦点之前不会触发事件 - 但是正如 adeneo 在评论中指出的那样，可能有一个不触发单击的制表符/空格键触发器...

[在 OSX 上测试](http://jsfiddle.net/mplungjan/6MEDu/)FX 中的假设发现 onclick 和 onchange 由空格键或鼠标触发

```
$("input[type=checkbox]").click(function() {
  var val = this.value;
  var dataSplit = val.split("_");
  if (this.checked) {
    var result = '<div id="div'+dataSplit[0]+'"><input type="radio" class="choosen"
      name="rdb_'+val+'" value="'+val+'" id="'+dataSplit[0]+
      '" /><label for="'+dataSplit[0]+'" class="'+dataSplit[0]+'">'+dataSplit[1]+'</label><br /></div>';
    $("#result").append(result);
  }
  else {
    $('#div'+dataSplit[0]).remove();
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T09:02:38.227

这很容易，我将为您概述步骤 - [Fiddle - 更新](http://jsfiddle.net/kVYy2/)

```
//Get all checkboxes you want to monitor
var myCheckBoxesContainer = $('.checkboxes_container');

//Monitor the change event of these checkboxes
myCheckBoxesContainer.on('change', '.checkboxes', function(){
    var self = $(this), checked = self.is(':checked'), dataSplit = self.val().split('_');

    //code to create radio button
    if(checked){ 
        /* code goes here */ 
        var result = '<div id="div'+dataSplit[0]+'"><input type="radio" class="choosen" name="rdb_'+val+'" value="'+val+'" id="'+dataSplit[0]+'" /><label class="'+dataSplit[0]+'">'+dataSplit[1]+'</label><br /></div>';
        $("#result").append(result);
    }

    //code to delete the radio button
    else{ 
        /* delete code goes here */ 
        $('#div' + dataSplit[0]).remove();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T08:53:39.137

我认为您可以简化它：

```
if($("input[type=checkbox]").is(':checked')==true) {
  var val = this.value;
  var dataSplit = val.split("_");
  var result = '<div id="div'+dataSplit[0]+'"><input type="radio" class="choosen"
    name="rdb_'+val+'" value="'+val+'" id="'+dataSplit[0]+
    '" /><label class="'+dataSplit[0]+'">'+dataSplit[1]+'</label><br /></div>';
  $("#result").append(result);
} else { // Just use else here
  var val1 = this.value;
  var dataSplit1 = val1.split("_");
  // $('#div'+dataSplit1[0]).parent.remove(); should 

  $('#div'+dataSplit1[0]).remove(); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T08:55:32.560

而不是使用“else if”，只尝试“else”作为复选框，只能在未选中时选中。

```
if($("input[type=checkbox]").is(':checked')==true) 
{
  var val = this.value;
  var dataSplit = val.split("_");
  var result = '<div id="div'+dataSplit[0]+'"><input type="radio" class="choosen"
    name="rdb_'+val+'" value="'+val+'" id="'+dataSplit[0]+
    '" /><label class="'+dataSplit[0]+'">'+dataSplit[1]+'</label><br /></div>';
  $("#result").append(result);
}
else
{
  var val1 = this.value;
  var dataSplit1 = val1.split("_");
  $('#div'+dataSplit[0]).remove();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T08:56:20.050

`is(':checked')`返回一个布尔值`true`or `false`，不需要将返回值与`true`or进行比较`false`：

```
if ($("input[type=checkbox]").is(':checked') { // if true
  // ...
} else { // if not true == false
  // ..
} 
```

请注意，您的代码中`parent`应该有一个错字`parent()`。

# blackberry-webworks - BlackBerry WebWorks Project 使用来自 CDN 的 CSS 和 JS

> ID：11665579
> 
> 赞同：0
> 
> 时间：2012-07-26T08:46:41.180
> 
> 标签：blackberry-webworks

我正在使用 webworks 为黑莓开发应用程序。该项目可以像这样使用来自 CDN 网络（互联网）的 javascript（jquery 和 jquery mobile）或 css：

```
 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
```

我在 Ripple 模拟器中试过了，效果很好。当我在 BlackBerry 模拟器上直接在设备上尝试时，应用程序出现时没有样式。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:27:36.633

它在 Ripple 模拟器中工作但在模拟器或设备上不起作用的原因是：Ripple 模拟器本质上是一个 Web 浏览器，并不能准确地描述设备特定的行为。

Blackberry 模拟器和设备需要将应用程序使用的任何外部 Web 服务列入白名单。

为此，您需要按照以下链接中的说明编辑您的 config.xml [https://developer.blackberry.com/html5/documentation/access_element_834677_11.html](https://developer.blackberry.com/html5/documentation/access_element_834677_11.html) https://developer.blackberry.com /html5/documentation/securing_your_ww_app_1866986_11.html

# python - 时间戳的正则表达式

> ID：11665582
> 
> 赞同：6
> 
> 时间：2012-07-26T08:46:57.527
> 
> 标签：python, regex

显然我在正则表达式方面很糟糕，这对我来说毫无意义......

我想要一个匹配时间的表达式，比如`01:23:45`在字符串中。

我试过这个

```
(r'(([0-9]*2)[:])*2([0-9]*2) 
```

但它不起作用。我需要能够获得整个时间戳。我试过的其他人只发现了 2 位数字。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T08:48:42.067

恐怕你的中继器错了：

```
r'\d{2}:\d{2}:\d{2}' 
```

正确的语法是`{n,m}`针对最小和最大数字，或`{n}`精确匹配。`\d`字符类也更容易使用`[0-9]`；这对于常规（非Unicode）匹配意味着同样的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T08:51:59.603

为什么还要使用正则表达式 - 使用正确的日期时间函数并免费获得验证......

```
from datetime import datetime
time = datetime.strptime('01:23:45', '%H:%M:%S').time()
print time.hour, time.minute, time.second
# 1 23 45 
```

达夫时间：

```
>>> datetime.strptime('99:45:63', '%H:%M:%S')
Traceback (most recent call last):
  File "<pyshell#36>", line 1, in <module>
    datetime.strptime('99:45:63', '%H:%M:%S')
  File "/usr/lib/python2.7/_strptime.py", line 325, in _strptime
    (data_string, format))
ValueError: time data '99:45:63' does not match format '%H:%M:%S' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T08:48:38.557

重复上一场比赛两次的正确说明符是`{2}`.

```
[0-9]{2} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T08:49:05.943

而不是`*2`你应该使用`{2}`.

```
[0-9]{2}:[0-9]{2}:[0-9]{2} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-29T11:02:30.033

```
import re

timestamp_regex = r'(2[0-3]|[01][0-9]|[0-9]):([0-5][0-9]|[0-9]):([0-5][0-9]|[0-9])'

print(bool(re.match(timestamp_regex, '01:23:45')))  # True
print(bool(re.match(timestamp_regex, '01:01:45')))  # True
print(bool(re.match(timestamp_regex, '01:01:01')))  # True
print(bool(re.match(timestamp_regex, '1:1:1')))     # True
print(bool(re.match(timestamp_regex, '25:1:1')))    # False 
```

demo: [https://ideone.com/eE0Pnb](https://ideone.com/eE0Pnb)

# c# - 如何使用 prism wpf mvvm 在模块中绑定 dataviewmodel？

> ID：11665590
> 
> 赞同：0
> 
> 时间：2012-07-26T08:47:16.517
> 
> 标签：c#, wpf, mvvm, wpf-controls, prism-4

我的 Prisam 应用程序“初始化模块”通过视图模块填充成功完成模块视图调用。但是加载视图没有设置 detacontex 视图模块。要添加模块，我可以使用以下代码：

```
protected override void ConfigureModuleCatalog()
        {
            base.ConfigureModuleCatalog();
            ModuleCatalog moduleCatalog = (ModuleCatalog)this.ModuleCatalog;
            moduleCatalog.AddModule(typeof(ModuleR1Customer.ViewModule.CustomerViewModules));
            moduleCatalog.AddModule(typeof(ModuleR2Order.ViewModule.OrderViewModules));
        } 
```

如何解决这个问题？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:29:13.453

这就是你所需要的。- 创建`IViewModel` `IView`该视图的通用接口和特殊接口 ( `ITiersView`)。通过实现你的特殊接口到你的视图视图代码后面应该如下所示：

```
 public interface IViewModel
{
}

public interface IView
{
    IViewModel ViewModel
    {
        get;
        set;
    }
}

public interface ITiersView : IView
{
}

    //My View
    public partial class Tiers : UserControl , ITiersView
    {
        public Tiers(ITiersViewModel tiersViewModel)
        {
            InitializeComponent();
            ViewModel = tiersViewModel;
        }

        public SmartStock.Infrastructure.IViewModel ViewModel
        {
            get
            {
                return (ITiersViewModel)DataContext;
            }
            set
            {
                DataContext = value;
            }
        }
    } 
```

要进行此加载，您需要在 modulinit 类中使用[Unity 容器，如下所示：](http://msdn.microsoft.com/en-us/library/ff648211.aspx)

```
 _container.RegisterType<ITiersView, Tiers>();
        _container.RegisterType<ITiersViewModel, TiersViewModel>();
        IRegion Content = _regionManager.Regions[RegionNames.ContentRegion];
        var TiersView = _container.Resolve<ITiersView>();
        RibbonRegion.Add(TiersView); 
```

# gwt - 尽早避免 GWT 的 com.google.gwt.user.client.rpc.SerializationException 的最佳实践

> ID：11665594
> 
> 赞同：2
> 
> 时间：2012-07-26T08:47:29.010
> 
> 标签：gwt, serialization, gwt-rpc

有哪些可推荐的方法来强制/检查整个 GWT 模块的可序列化性？例如，如果某些类型不可序列化，我们是否可以在 gwt 模块描述符文件中告诉 gwt 编译器或使用 gwt maven 插件的配置部分抛出错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:21:37.480

在我看来，可以制作一个 APT（注释处理器工具）来验证在服务器和客户端之间传输的实体。APT 类似于在编译时用于验证请求工厂代理的东西。

我不熟悉 APT，但我认为您可以在编译时使用 APT 检查实体可序列化性。

检查此链接：

[http://www.javalobby.org/java/forums/t17876.html](http://www.javalobby.org/java/forums/t17876.html) [http://docs.oracle.com/javase/6/docs/technotes/guides/apt/index.html](http://docs.oracle.com/javase/6/docs/technotes/guides/apt/index.html) 希望这有帮助。

# scala - sbt 0.11 中的所有 Setting[T] 都存储在哪里？

> ID：11665597
> 
> 赞同：2
> 
> 时间：2012-07-26T08:47:31.950
> 
> 标签：scala, sbt

**如何访问所有 sbt Setting[T] 的映射或任何包含所有设置依赖项的容器？**

我想将它们全部以及它们的依赖项打印出来。输出应如下所示：

```
setting(ScopedKey(Scope(Select(ThisBuild),Global,Global,Global),managed-directory))
    ScopedKey(Scope(Select(ThisBuild),Global,Global,Global),base-directory)
        ScopedKey(Scope(Select(ThisBuild),Global,Global,Global),this-project)
... 
```

下面是我用来执行此操作的 SBT 构建定义。

`this-project`并非在所有设置中都找到该密钥。它存储在哪里？

```
import sbt._
import sbt.Logger
import Keys._
import PlayProject._

object TheBuild extends Build {

  lazy val howItWorksProject = Project(
    id = "howItWorks",
    base = file("./modules/howItWorks")
  )

  val projDef: ProjectDefinition[_] = howItWorksProject
  var count  = 0

  def printSettingsDependencies(setting: Setting[_], settings: Seq[Setting[_]], indent: String): Unit = {
    println("debug printSettingsDependencies start" + (count+=1))
    println(setting)
    println("debug setting =" + setting)
    println("debug setting.dependencies = " + setting.dependencies)

    setting.dependencies.foreach {
      n =>
        println("debug it = " + n)
        println("debug finding ...")
        val settingOption = settings.find {
          it =>
            println("\t"+it.key.key.label + "?=" + n.key.label)
            it.key.key.label == n.key.label
        }
        println("debug found = "+settingOption)
        println(indent + settingOption)
        printSettingsDependencies(settingOption.get, settings, indent + indent)
    }
  }
} 
```

`inspect this-project`输出：

```
> inspect this-project
[info] Setting: sbt.ResolvedProject = Project(id: howItWorks, base: C:\Users\pawel\workspace\kody\ria-template\modules\howItWorks, aggregate: List(), dependencies: List(), delegates: List(), configurations: List(compile, runtime, test, provided, optional))
[info] Description:
[info]  Provides the current project for the referencing scope.
[info] Provided by:
[info]  {file:/C:/Users/pawel/workspace/kody/ria-template/}howItWorks/*:this-project
[info] Reverse dependencies:
[info]  *:ivy-configurations
[info]  *:base-directory
[info]  *:name
[info] Delegates:
[info]  *:this-project
[info]  {.}/*:this-project
[info]  */*:this-project 
```

`inspect base-directory`输出：

```
> inspect base-directory
[info] Setting: java.io.File = C:\Users\pawel\workspace\kody\ria-template\modules\howItWorks
[info] Description:
[info]  The base directory.  Depending on the scope, this is the base directory for the build, project, configuration, or task.
[info] Provided by:
[info]  {file:/C:/Users/pawel/workspace/kody/ria-template/}howItWorks/*:base-directory
[info] Dependencies:
[info]  *:this-project
[info] Reverse dependencies:
[info]  *:ivy-paths
[info]  *:target
[info]  *:unmanaged-base
[info]  *:runner
[info]  *:source-directory
[info] Delegates:
[info]  *:base-directory
[info]  {.}/*:base-directory
[info]  */*:base-directory
[info] Related:
[info]  {.}/*:base-directory 
```

`show sbt-version`

```
> show sbt-version
[info] 0.11.3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:54:46.953

我认为这是你需要的：

```
import sbt._
import Keys._

object TheBuild extends Build {

    lazy val allSettings = TaskKey[Seq[sbt.Project.Setting[_]]]("all-settings", "")

    lazy val printIt = TaskKey[Unit]("print-it", "")

    lazy val testSettings = Defaults.defaultSettings ++ Seq(
        allSettings <<= (state) map { s =>
            val extracted = Project.extract(s)
            import extracted._
            structure.settings
        },

        printIt <<= (allSettings) map { all =>
            // there are more than one base-directories with different scopes, not all of them have the dependencies
            val baseDirectories = all.filter(s => s.key.key.label == "base-directory" && !s.dependencies.isEmpty)
            // pick the first one to demonstrate this works
            printSettingsDependencies(baseDirectories(0), all, "\t")
        })

    def printSettingsDependencies(setting: Setting[_], settings: Seq[Setting[_]], indent: String): Unit = {
        println(indent + setting)

        setting.dependencies.foreach { n =>
            val settingOption = settings.find { _.key.key.label == n.key.label }
            if (settingOption.isDefined) {
                printSettingsDependencies(settingOption.get, settings, indent + indent)
            }
        }
    }

    lazy val howItWorksProject: Project = Project("howItWorks", file(".")) settings (testSettings: _*)
} 
```

输出：

```
> print-it
    setting(ScopedKey(Scope(Select(ProjectRef(file:/Users/balagez/Sites/test/,howItWorks)),Global,Global,Global),base-directory)) at NoPosition
        setting(ScopedKey(Scope(Select(ProjectRef(file:/Users/balagez/Sites/test/,howItWorks)),Global,Global,Global),this-project)) at NoPosition
[success] Total time: 0 s, completed Oct 12, 2012 7:50:29 PM 
```

# php - 使用 PHP 在对象中设置公共值

> ID：11665604
> 
> 赞同：0
> 
> 时间：2012-07-26T08:47:49.447
> 
> 标签：php, oop, methods, static, public

我想使用公共方法在对象中设置我的值。但我找不到让它工作

```
<?php
        class User{
            public $id;

            public function ToSynchData(){
                $this->$id = "1";
            }
        }
        $new = new User;
        $new->ToSynchData();
        $new->$id;
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:49:22.007

```
public $id;

public function ToSynchData(){
    $this->id = 1;
}

$new = new User;
$new->ToSynchData();
echo $new->id; // 1 
```

编辑：为什么突然静止？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T08:51:27.557

```
class User{
    public $id;
    public function ToSynchData(){
        $this->id = "1";
    }
}

$new = new User();
$new->ToSynchData();
print_r($new->id); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T08:52:54.323

您正在尝试访问**静态属性**，`->`而[这里清楚地写着](http://www.php.net/manual/en/language.oop5.static.php)

> 使用箭头运算符 -> 无法通过对象访问静态属性。

因此要访问它，您必须将其从更改`static public`为`public`

# android - 图像和剪贴画和“坏”文本

> ID：11665609
> 
> 赞同：1
> 
> 时间：2012-07-26T08:48:14.920
> 
> 标签：android

对于最新的Android SDK，在新建一个Android项目的时候，有没有人遇到过这个简单但奇怪的问题：当你来到第二页“配置启动器图标”时，选择Image或Clipart都可以成功创建项目，但是选择 Text 只会得到所有空包而没有`project.properties`文件。

这是一个需要报告的错误吗？这是一个常见问题吗？

![在此处输入图像描述](../Images/0d0f2ecb598b32bc733697373a6550f3.png)

# c# - 将对象保存到文件

> ID：11665610
> 
> 赞同：0
> 
> 时间：2012-07-26T08:48:18.150
> 
> 标签：c#, serialization

我正在构建一个小型应用程序，我需要将我的数据存储到文件中。我读了一些关于保存对象的内容。我以前用 Java 做过这个，但那是几年前的事了。然后我保存了对象的孔数组，我想知道我是否可以在 C# 中做同样的事情以及如何做到这一点？

我正在使用一个名为 Animals 的列表，并且我还对该类进行了序列化，因为这是此任务中的一个需求。如果我已经序列化了 Animal 类，那么我想我不需要将子类序列化为 Animal？

一些帮助是preciated，谢谢！

编辑：

嗨，阿吉安！我制作了一些测试代码来保存列表，我只是想知道我做得对吗？我还没有添加任何 Try/Catch 代码。当我应该打开文件并阅读列表时，列表会被整体加载吗？反馈很有价值！

```
filestream = new FileStream(filePath, FileMode.Create);
        BinaryFormatter b = new BinaryFormatter();
        b.Serialize(filestream, animals);
        filestream.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:58:23.627

对象的序列化是一件很棒的事情。它允许您存储对象的状态，与其他系统共享对象，在业务层和应用程序的前端之间传递对象。

一般来说，总是说明你需要什么样的序列化：二进制、xml、json？两个系统相互通信的方式会影响选择。

你说你不需要xml序列化。不是吗？管理二进制序列化对象的日志记录、调试和跟踪非常困难。您不需要 XML？没关系，那么让我们使用自定义序列化器，但帮助自己避免二进制序列化。除非需要！！

无论如何，这里的msdn链接：

*   [系统.运行时.序列化](http://msdn.microsoft.com/en-us/library/kd1dc9w5)。
*   [自定义序列化](http://msdn.microsoft.com/en-us/library/ty01x675%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:22:58.903

看起来您正在做一个简单的示例，在这种情况下使用可序列化可能很好，但是您很快就会发现使用它真的很痛苦，并且对标记为可序列化的类的任何更改都会使旧文件不可读。

这使得序列化适用于非常短暂的存储，例如 - 在步骤之间保持批处理程序的状态或通过网络传输数据。如果您实际上是在编写文件，则最好设计一种文件格式。

xml 是一种很好用的语言——它基本上是为输出树状结构而设计的，而且很容易添加，因为所有内容都是按名称而不是位置读取的。

如果你只有非常简单的数据，你可以设计一个文本格式；一些简单的选项是使用制表符或空格分隔。如果您有多态类型，您可能需要稍微考虑一下以获得适用于所有类型的数据结构，或者您可以拥有所有子类型字段，然后用“类型”条目区分它们，例如：

（空格分隔）
类型 NumberOfLegs NumberOfFins
Fish - 2
Badger 4 -
SeaDog 3.5 7

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:55:03.607

如果您的类仅包含可序列化类型，则可以将基类和所有子类标记为可序列化。这是通过 Serializable 属性完成的

# c# - 如何在两个日期之间创建水晶报表

> ID：11665611
> 
> 赞同：1
> 
> 时间：2012-07-26T08:48:18.477
> 
> 标签：c#, sql-server, sql-server-2008, crystal-reports

我尝试使用下面的代码，但它不起作用。

`ReportDataSet`我使用 SQL 查询将报告数据存储在 a中。后来我将此设置为`ReportDataSet`对象。`DataSource``CrystalReport`

```
private void btnGenReport_Click(object sender, EventArgs e)
    {
        CrystalReport1 objRpt = new CrystalReport1();

        string sql; //creating sql query
        sql = "SELECT invoice.InvoiceNo, invoice.Date, invoiceitems.Name, invoice.InvoiceTo, invoice.CusName, invoiceitems.Qty, invoiceitems.Rate, invoiceitems.Amount ";
        sql += "FROM (invoice INNER JOIN invoiceitems ON invoice.Date = invoiceitems.Date) ";
        sql += "WHERE (invoice.Date BETWEEN '" + DateTimePickerFrom.Value + "' AND '" + DateTimePickerTo.Value + "');";

        ReportDataSet ds = new ReportDataSet();
            string path = Application.StartupPath + "\\";
        string conStr = @"Data Source=.\SQLEXPRESS;AttachDbFilename=" + path + "SMS_DB.mdf;Integrated Security=True;User Instance=True";
        SqlConnection con = new SqlConnection(conStr); // create connection
        try
        {
            con.Open();
            SqlDataAdapter da = new SqlDataAdapter(sql, con);
            da.Fill(ds, "InvoiceItemData");
            objRpt.SetDataSource(ds.Tables["InvoiceItemData"]);
            crystalReportViewer1.ReportSource = objRpt;
            con.close();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error ! \n" + ex.ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:21:12.533

我将假设一些事情：

1.  您的项目正在使用 Visual Studio 2010、.NET Framework 4 和 VS2010 的 Crystal Reports 运行时
2.  您的类型化数据集`ReportDataSet`是使用 VS 的数据集设计器通过连接到您的数据库文件 SMS_DB.mdf 设置的，并且该文件中已有数据
3.  您的类型化 Crystal Report`rt1`是在报表设计器中设置的，数据源是项目`InvoiceItemData`中类型化数据集中的表`ReportDataSet`
4.  所有这些控件都在同一个表单上
5.  您仍在安装 .NET Framework 4 和 Crystal Reports 运行时 for VS2010 的机器上调试它

换句话说，我假设您已经设置了所有内容，`btnReportGen`在最新的非 beta 环境中单击按钮之前，您已经完成了所有操作，并且您没有尝试将其运行为a 在另一台机器上发布。

现在，我有一些建议和澄清要向您提出。

1.  在这种情况下，您没有使用类型化数据集作为报表数据源：数据集是您的数据服务，数据源是您的类型化数据表，这就是您在代码中正确发送报告更新数据表的原因。
2.  为您的选择器控件和报表查看器使用单独的 winform，并在您点击生成按钮时从您的选择器控件表单中调用您的报表查看器表单。否则，您将遇到向报表查看器发送错误数据的问题，这将生成不正确的报表或根本不生成报表。
3.  在您的报表文档中使用参数并将选取器控件值发送到报表文档，以便您可以在报表上显示它们，以便您的用户知道当他们点击生成按钮时他们至少发送了正确的值。
4.  在将控件值发送到查看器表单并在查询中使用它们之前，请检查它们是否有效。需要检查的一些事情：它们都设置了吗？他们俩都是约会吗？To 值是否大于或等于 From 值？该范围对您的数据库有效吗？（这也使您可以选择向用户显示更有用的错误消息，并能够将它们发送回正确的控件，以便他们可以修复它。）
5.  由于您已经在使用类型化数据集和数据集设计器，因此请使用提供的类型化表适配器并在设计器中使用参数创建自定义查询，然后使用该查询来填充您的表。这将为您省去许多因尝试以编程方式完成所有事情而引起的头痛。你有可用的工具，所以使用它们。

如果您考虑以上所有因素，我认为您会发现自己的项目工作正常。但是，如果您仍然卡住，我可以仔细阅读每个建议，并通过屏幕截图和示例代码帮助您修复所有问题。如果您需要我这样做也没关系，因为我在 VS2010 中创建了种类繁多的 Crystal Report 项目，我只是根据经验告诉您，作为程序员和用户，什么最适合您。您可能认为只需以编程方式输入所有内容并将其扔给报表查看器即可节省时间和资源，但这也是它不合作的原因。

# gwt-2.5 - 过滤 Celltable

> ID：11665615
> 
> 赞同：0
> 
> 时间：2012-07-26T08:48:29.960
> 
> 标签：gwt-2.5

我有一个要求，我需要为每个单元格表设置过滤器文本框，每当我在上面输入一些文本时，只有匹配的数据应该显示在单元格表中。我想要 smartgwt 在以下网址中提供的类似功能：[http ://www.smartclient.com/smartgwt/showcase/#grid_adaptive_filter_featured_category](http://www.smartclient.com/smartgwt/showcase/#grid_adaptive_filter_featured_category)

我不能去 smartgwt。大多数人都问过类似的问题。我在任何地方都没有看到任何完整的例子。我是 GWT 的新手。您能否提供步骤或链接或示例来实现对 celltable 的过滤。

谢谢，萨丽莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:01:46.050

我使用 Smartgwt，所以不知道 CellTable 小部件的客户端过滤功能。但是您仍然可以实现过滤服务器端（使用非常大的数据集，服务器端花费的时间可能会更小..）所以在不知道 CellTable 的情况下，我将在过滤器文本框中选择更改的事件，我将发送一个新的 Rpc带有过滤条件的请求。

# facebook - 用户如何通过移动应用程序向他的 Facebook 好友发送消息？

> ID：11665617
> 
> 赞同：0
> 
> 时间：2012-07-26T08:48:29.167
> 
> 标签：facebook, facebook-graph-api, lua, coronasdk

我使用 Corona SDK 编写移动应用程序。

我希望使用 Facebook 登录的用户（我知道如何实现用户的 Facebook 登录和用户对其好友列表的 Facebook 请求）可以从应用程序向他的朋友发送私人 Facebook 消息。

我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:43:00.003

您可以使用[Facebook 发送对话框](https://developers.facebook.com/docs/reference/dialogs/send/)！

使用**直接 URL 示例**下提到的链接打开[Web 弹出窗口](http://docs.coronalabs.com/api/library/native/showWebPopup.html)或[Web 视图](http://docs.coronalabs.com/api/library/native/newWebView.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:17:20.393

你不能。

您可以使用 Corona 的[facebook.request](http://docs.coronalabs.com/api/library/facebook/request.html) API 方法发出对 Facebook[图形 API](https://developers.facebook.com/docs/reference/api/)的调用，但没有 API 访问权限来向其他用户发送私人消息。

您的选项列在[此答案](http://facebook.stackoverflow.com/a/4061298/295262)中。

# php - CakePHP：使用 mediaViews 强制下载外部文件

> ID：11665618
> 
> 赞同：0
> 
> 时间：2012-07-26T08:48:32.510
> 
> 标签：php, apache, cakephp

我正在使用 cakephp 开发应用程序，我想强制下载 jpeg。

到目前为止，通过使用 mediaViews，一切都很好......但该文件并未托管在服务器上，因为我使用的是肥皂网络服务，而我只是获得了一个完整的 jpeg 文件 url。有没有办法在 cakePHP 中通过外部链接使用 mediaViews，例如在`http://mywebsite.com/foo/bar/picture.jpeg`将其保存到 cakephp webroot 文件夹之前无需下载它？

对不起我的英语不好，我会尽力而为......

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:34:27.693

不，您不能强制下载您无法控制的对象。这是因为使其可下载的标头 ( `'Content-disposition: attachment'`) 是由响应服务器设置的。例如，如果我试图强制从 Google 下载图像，我无法在其上设置标题。

# php - PHP表单在检查输入之前重定向

> ID：11665626
> 
> 赞同：-3
> 
> 时间：2012-07-26T08:49:08.980
> 
> 标签：php, forms, redirect

我用于此示例的表单是我使用了一段时间的回收表单，因为我没有知识或时间来学习 PHP。它有效，但并不完全像我想要的那样。例如，当有人在表单中输入姓名和电子邮件并提交时，它应该将用户重定向到 freepage.html。但是，它会使用已输入的信息“闪烁”实际的“freepage.php”。通常会持续 1-2 秒，然后重定向开始。

我遇到的另一个问题是，如果用户没有输入信息，“所有字段都是强制性的”警告会显示在 freepage.php 上，只是这一次该页面在屏幕上没有“闪烁”一秒钟，它会一直显示警告显示并且修复它的唯一方法是单击浏览器中的“返回”按钮。

有人可以指出我怎样才能使这个表格更好一点......

这就是 php 文件的样子

```
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <script type="text/javascript" src="jquery-1.3.2.min.js"></script>
            <script src="http://www.google.com/jsapi"></script>
            <script type="text/javascript">google.load("jqueryui", "1.5.2");</script>
            <? 
        if($_POST['name']!="" and $_POST['email']!=""){

    $headers    = "From: Sender";
    $message    = 
            strtoupper($_POST['name'])."
            ".strtoupper($_POST['email'])."
            ";
    echo str_replace("\n","<br />", $message);
    $headers2   = "From: Sender <info@gmail.com>\nContent-Type: text/plain;                               charset=UTF-8; format=flowed\nMIME-Version: 1.0\nContent-Transfer-Encoding: 8bit\nX-Mailer: PHP\n";
    $message2   = "
    Hello ".($_POST['name'])."  

            ";

    mail("$_POST[email]", "Thanks for entering", $message2, $headers2);

    $myFile = "info-file.txt";
    $fh = fopen($myFile, 'a') or die("can't open file");
    $stringData =            "$_POST[name]*$_POST[email]*".$_SERVER['REMOTE_ADDR']."*".date("d-m-Y H:i")."
             ";
    fwrite($fh, $stringData);
    fclose($fh);

    ?>

    echo '<script>document.location="freepage.html"; </script>';

    <?
} else {
    echo "All fields are mandatory";
    ?>
    <script language="javascript">
    alert("All fields are mandatory");
    </script>
    <?
}
    ?> 
```

表格看起来像这样

```
 <form method="post" action="freepage.php" name="popups" id="popups">
        <fieldset>
        <label for=name accesskey=U ><span class="required">*</span> Name</label>
        <br />
        <input name="name" type="text" id="name" size="30" value="" /> 
        <br />
        <label for=email accesskey=E ><span class="required">*</span> Email</label>
        <br />
        <input name="email" type="text" id="email" size="30" value="" />
        <br />
        <input type="submit" value="Submit" id="submit" name="submit" class="button" />
        </fieldset>  
        <br />
        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T10:59:50.547

在for循环中使用空函数检查字段是否为空然后在表单操作中使用php
self然后如果检查部分在内部完成如果使用标题重定向到其他页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:09:19.717

它“闪烁”的原因是您必须等待服务器在重定向之前发送邮件。

对于警告：“所有字段都是必需的”。

*   如果表单在同一页面 (freepage.php) 上，则表单将在显示时工作。
*   如果表单不在同一页面上，只需添加重定向（html 链接或 javascript 位置）或在 php 代码后插入表单。

# file - struts2 无法上传文件。无效的字段值

> ID：11665627
> 
> 赞同：0
> 
> 时间：2012-07-26T08:49:09.837
> 
> 标签：file, validation, file-upload, upload, struts2

当我尝试在 struts2 中上传文件时，我看到一个验证错误：**字段“上传”的字段值无效。** 在 JBoss 控制台中，我得到：

```
10:37:56,140 WARN  [OgnlValueStack] Error setting expression 'upload' with value '[Ljava.lang.String;@17c7b19'
ognl.MethodFailedException: Method "setUpload" failed for object bm.action.content.SaveNewBannerAction@13ebb53 [java.lang.NoSuchMethodException: bm.action.content.SaveNewBannerAction.setUpload([Ljava.lang.String;)]
    at ognl.OgnlRuntime.callAppropriateMethod(OgnlRuntime.java:1289)
    at ognl.OgnlRuntime.setMethodValue(OgnlRuntime.java:1478)
    at ognl.ObjectPropertyAccessor.setPossibleProperty(ObjectPropertyAccessor.java:85)
    at ognl.ObjectPropertyAccessor.setProperty(ObjectPropertyAccessor.java:162)
...
...
Caused by: java.lang.NoSuchMethodException: bm.action.content.SaveNewBannerAction.setUpload([Ljava.lang.String;)
    at ognl.OgnlRuntime.callAppropriateMethod(OgnlRuntime.java:1230)

/-- Encapsulated exception ------------\
java.lang.NoSuchMethodException: bm.action.content.SaveNewBannerAction.setUpload([Ljava.lang.String;)
    at ognl.OgnlRuntime.callAppropriateMethod(OgnlRuntime.java:1230)
    at ognl.OgnlRuntime.setMethodValue(OgnlRuntime.java:1478)
    at ognl.ObjectPropertyAccessor.setPossibleProperty(ObjectPropertyAccessor.java:85)
    at ognl.ObjectPropertyAccessor.setProperty(ObjectPropertyAccessor.java:162) 
```

我的jsp：

```
<div class="v4DDfiltering">
    <s:fielderror/>
    <s:form id="saveNewBannerForm" name="saveNewBannerForm"
        action="SaveNewBannerAction" theme="simple" method="POST" enctype="multipart/form-data">
...
        <div class="OneFilteringRow">
            <s:label for="upload" value="Plik:*" />
            <s:file id="upload" name="upload"/>
        </div>
...
        <div class="OneFilteringRow">
            <s:url id="saveNewBannerUrl" action="SaveNewBannerAction" />

            <sj:a href="%{saveNewBannerUrl}" targets="messagesDiv"
                formIds="saveNewBannerForm">
                Save
            </sj:a>

        </div>
    </s:form>
</div> 
```

我的动作类 SaveNewBannerAction.java

```
public class SaveNewBannerAction extends BaseAction {
    private static final long serialVersionUID = 1L;

    private static final Log LOG = LogFactory.getLog(SaveNewBannerAction.class);

    private boolean validate = true;

    private File upload;// The actual file
    private String uploadContentType; // The content type of the file
    private String uploadFileName; // The uploaded file name
    private String fileCaption;// The caption of the file entered by user
        ...

    public File getUpload() {
        return upload;
    }

    public void setUpload(File upload) {
        this.upload = upload;
    }

    public String getUploadContentType() {
        return uploadContentType;
    }

    public void setUploadContentType(String uploadContentType) {
        this.uploadContentType = uploadContentType;
    }

    public String getUploadFileName() {
        return uploadFileName;
    }

    public void setUploadFileName(String uploadFileName) {
        this.uploadFileName = uploadFileName;
    }

    public String getFileCaption() {
        return fileCaption;
    }

    public void setFileCaption(String fileCaption) {
        this.fileCaption = fileCaption;
    }
    @Override
    public void validate() {
        LOG.info("Enter: validate()");

        LOG.info("VALIDATE FIELDS");
        ...
        if(upload == null) {
            addFieldError("upload",
                    "Proszę uzupełnić pole: plik.");
            validate = false;
        } else {
            if(!uploadContentType.contains("image")) {
                addFieldError("upload",
                        "Wprowadzono niepoprawny format pliku. Plik musi być obrazkiem.");
                validate = false;
            }
        }

        LOG.info("Exit: validate()");
    } 
```

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:01:53.150

你的jsp应该是这样的：

```
<div class="v4DDfiltering">
    <s:fielderror/>
    <s:form id="saveNewBannerForm" name="saveNewBannerForm"
        action="SaveNewBannerAction" theme="simple" method="POST" enctype="multipart/form-data">
...
        <div class="OneFilteringRow">
            <s:label for="upload" value="Plik:*" />
            <s:file id="upload" name="upload"/>
        </div>
...
        <div class="OneFilteringRow">
            <sj:submit targets="messagesDiv"/>
        </div>
    </s:form>
</div> 
```

或者：

```
<div class="v4DDfiltering">
    <s:fielderror/>
    <s:form id="saveNewBannerForm" name="saveNewBannerForm"
        action="SaveNewBannerAction" theme="simple" method="POST" enctype="multipart/form-data">
...
        <div class="OneFilteringRow">
            <s:label for="upload" value="Plik:*" />
            <s:file id="upload" name="upload"/>
        </div>
...
    </s:form>
    <sj:a targets="messagesDiv" formIds="saveNewBannerForm">Save</sj:a>
</div> 
```

# python - 从 CSV 文件读取数据并从字符串转换为正确的数据类型，包括整数列表列

> ID：11665628
> 
> 赞同：34
> 
> 时间：2012-07-26T08:49:12.533
> 
> 标签：python, csv, python-2.5

当我从 CSV 文件读回数据时，每个单元格都被解释为一个字符串。

*   如何自动将我读入的数据转换为正确的类型？
*   或者更好：如何告诉 csv 阅读器每列的正确数据类型？

（我写了一个二维列表，其中每一列都是不同的类型（bool、str、int、整数列表），输出到一个 CSV 文件。）

样本数据（在 CSV 文件中）：

```
IsActive,Type,Price,States
True,Cellphone,34,"[1, 2]"
,FlatTv,3.5,[2]
False,Screen,100.23,"[5, 1]"
True,Notebook, 50,[1] 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-09-04T11:54:37.670

正如[文档解释](https://docs.python.org/3/library/csv.html#csv.reader)的那样，CSV 阅读器不执行自动数据转换。您有 QUOTE_NONNUMERIC 格式选项，但这只会将所有未引用的字段转换为浮点数。这是与其他 csv 阅读器非常相似的行为。

我不相信 Python 的 csv 模块对这种情况有任何帮助。正如其他人已经指出的那样，`literal_eval()`是一个更好的选择。

以下确实有效并转换：

*   字符串
*   整数
*   花车
*   列表
*   字典

您也可以将它用于布尔值和 NoneType，尽管必须对它们进行相应的格式化`literal_eval()`才能通过。当在 Python 中布尔值大写时，LibreOffice Calc 以大写字母显示布尔值。此外，您必须用`None`（不带引号）替换空字符串

我正在为执行所有这些操作的 mongodb 编写一个导入器。以下是我到目前为止编写的代码的一部分。

[注意：我的 csv 使用制表符作为字段分隔符。您可能还想添加一些异常处理]

```
def getFieldnames(csvFile):
    """
    Read the first row and store values in a tuple
    """
    with open(csvFile) as csvfile:
        firstRow = csvfile.readlines(1)
        fieldnames = tuple(firstRow[0].strip('\n').split("\t"))
    return fieldnames

def writeCursor(csvFile, fieldnames):
    """
    Convert csv rows into an array of dictionaries
    All data types are automatically checked and converted
    """
    cursor = []  # Placeholder for the dictionaries/documents
    with open(csvFile) as csvFile:
        for row in islice(csvFile, 1, None):
            values = list(row.strip('\n').split("\t"))
            for i, value in enumerate(values):
                nValue = ast.literal_eval(value)
                values[i] = nValue
            cursor.append(dict(zip(fieldnames, values)))
    return cursor 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-26T08:56:26.137

你必须映射你的行：

```
data = """True,foo,1,2.3,baz
False,bar,7,9.8,qux"""

reader = csv.reader(StringIO.StringIO(data), delimiter=",")
parsed = (({'True':True}.get(row[0], False),
           row[1],
           int(row[2]),
           float(row[3]),
           row[4])
          for row in reader)
for row in parsed:
    print row 
```

结果是

```
(True, 'foo', 1, 2.3, 'baz')
(False, 'bar', 7, 9.8, 'qux') 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-02-20T19:49:35.630

我知道这是一个相当老的问题，标记[为 python-2.5](/questions/tagged/python-2.5 "显示标记为“python-2.5”的问题")，但这里的答案适用于 Python 3.6+，使用该语言的更新版本的人们可能会感兴趣。

[`typing.NamedTuple`](https://docs.python.org/3/library/typing.html#typing.NamedTuple)它利用了Python 3.5 中添加的内置类。从文档中可能不明显的是，每个字段的“类型”可以是一个函数。

示例用法代码还使用所谓的[f-string](https://docs.python.org/3/reference/lexical_analysis.html#formatted-string-literals)文字，直到 Python 3.6 才添加，但不需要使用它们来进行核心数据类型转换。

```
#!/usr/bin/env python3.6
import ast
import csv
from typing import NamedTuple

class Record(NamedTuple):
    """ Define the fields and their types in a record. """
    IsActive: bool
    Type: str
    Price: float
    States: ast.literal_eval  # Handles string represenation of literals.

    @classmethod
    def _transform(cls: 'Record', dict_: dict) -> dict:
        """ Convert string values in given dictionary to corresponding Record
            field type.
        """
        return {name: cls.__annotations__[name](value)
                    for name, value in dict_.items()}

filename = 'test_transform.csv'

with open(filename, newline='') as file:
    for i, row in enumerate(csv.DictReader(file)):
        row = Record._transform(row)
        print(f'row {i}: {row}') 
```

输出：

```
row 0: {'IsActive': True, 'Type': 'Cellphone', 'Price': 34.0, 'States': [1, 2]}
row 1: {'IsActive': False, 'Type': 'FlatTv', 'Price': 3.5, 'States': [2]}
row 2: {'IsActive': True, 'Type': 'Screen', 'Price': 100.23, 'States': [5, 1]}
row 3: {'IsActive': True, 'Type': 'Notebook', 'Price': 50.0, 'States': [1]} 
```

通过创建一个仅包含通用类方法的基类来概括这一点并不简单，因为实现的方式`typing.NamedTuple`。

为了避免这个问题，在 Python 3.7+ 中，[`dataclasses.dataclass`](https://docs.python.org/3.7/library/dataclasses.html#module-dataclasses)可以使用 a 代替，因为它们没有继承问题——所以创建一个可以重用的通用基类很简单：

```
#!/usr/bin/env python3.7
import ast
import csv
from dataclasses import dataclass, fields
from typing import Type, TypeVar

T = TypeVar('T', bound='GenericRecord')

class GenericRecord:
    """ Generic base class for transforming dataclasses. """
    @classmethod
    def _transform(cls: Type[T], dict_: dict) -> dict:
        """ Convert string values in given dictionary to corresponding type. """
        return {field.name: field.type(dict_[field.name])
                    for field in fields(cls)}

@dataclass
class CSV_Record(GenericRecord):
    """ Define the fields and their types in a record.
        Field names must match column names in CSV file header.
    """
    IsActive: bool
    Type: str
    Price: float
    States: ast.literal_eval  # Handles string represenation of literals.

filename = 'test_transform.csv'

with open(filename, newline='') as file:
    for i, row in enumerate(csv.DictReader(file)):
        row = CSV_Record._transform(row)
        print(f'row {i}: {row}') 
```

从某种意义上说，使用哪一个并不是很重要，因为从未创建过类的实例——使用一个只是在记录数据结构中指定和保存字段名称及其类型的定义的一种干净方式。

A[`TypedDict`](https://docs.python.org/3/library/typing.html#typing.TypedDict)被添加到`typing`Python 3.8 中的模块中，它也可用于提供类型信息，但必须以稍微不同的方式使用，因为它实际上并没有定义新类型 like `NamedTuple`and `dataclasses`do——因此它需要一个独立的转换功能：

```
#!/usr/bin/env python3.8
import ast
import csv
from dataclasses import dataclass, fields
from typing import TypedDict

def transform(dict_, typed_dict) -> dict:
    """ Convert values in given dictionary to corresponding types in TypedDict . """
    fields = typed_dict.__annotations__
    return {name: fields[name](value) for name, value in dict_.items()}

class CSV_Record_Types(TypedDict):
    """ Define the fields and their types in a record.
        Field names must match column names in CSV file header.
    """
    IsActive: bool
    Type: str
    Price: float
    States: ast.literal_eval

filename = 'test_transform.csv'

with open(filename, newline='') as file:
    for i, row in enumerate(csv.DictReader(file), 1):
        row = transform(row, CSV_Record_Types)
        print(f'row {i}: {row}') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-08T17:14:35.360

Jon Clements 和 cortopy 教我的道具`ast.literal_eval`！这是我最终的结果（Python 2；对 3 的更改应该是微不足道的）：

```
from ast import literal_eval
from csv import DictReader
import csv

def csv_data(filepath, **col_conversions):
    """Yield rows from the CSV file as dicts, with column headers as the keys.

    Values in the CSV rows are converted to Python values when possible,
    and are kept as strings otherwise.

    Specific conversion functions for columns may be specified via
    `col_conversions`: if a column's header is a key in this dict, its
    value will be applied as a function to the CSV data. Specify
    `ColumnHeader=str` if all values in the column should be interpreted
    as unquoted strings, but might be valid Python literals (`True`,
    `None`, `1`, etc.).

    Example usage:

    >>> csv_data(filepath,
    ...          VariousWordsIncludingTrueAndFalse=str,
    ...          NumbersOfVaryingPrecision=float,
    ...          FloatsThatShouldBeRounded=round,
    ...          **{'Column Header With Spaces': arbitrary_function})
    """

    def parse_value(key, value):
        if key in col_conversions:
            return col_conversions[key](value)
        try:
            # Interpret the string as a Python literal
            return literal_eval(value)
        except Exception:
            # If that doesn't work, assume it's an unquoted string
            return value

    with open(filepath) as f:
        # QUOTE_NONE: don't process quote characters, to avoid the value
        # `"2"` becoming the int `2`, rather than the string `'2'`.
        for row in DictReader(f, quoting=csv.QUOTE_NONE):
            yield {k: parse_value(k, v) for k, v in row.iteritems()} 
```

（我有点担心我可能错过了一些涉及引用的极端案例。如果您发现任何问题，请发表评论！）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-26T02:55:43.380

我也非常喜欢@martineau 的方法，并且对他的评论特别感兴趣，即他的代码的本质是字段和类型之间的干净映射。这向我表明，字典也可以工作。因此，他的主题变体如下所示。它对我来说效果很好。

很明显，字典中的 value 字段实际上只是一个可调用的，因此可以用来为数据按摩和类型转换提供一个钩子，如果有人选择的话。

```
import ast
import csv

fix_type = {'IsActive': bool, 'Type': str, 'Price': float, 'States': ast.literal_eval}

filename = 'test_transform.csv'

with open(filename, newline='') as file:
    for i, row in enumerate(csv.DictReader(file)):
        row = {k: fix_type[k](v) for k, v in row.items()}
        print(f'row {i}: {row}') 
```

输出

```
row 0: {'IsActive': True, 'Type': 'Cellphone', 'Price': 34.0, 'States': [1, 2]}
row 1: {'IsActive': False, 'Type': 'FlatTv', 'Price': 3.5, 'States': [2]}
row 2: {'IsActive': True, 'Type': 'Screen', 'Price': 100.23, 'States': [5, 1]}
row 3: {'IsActive': True, 'Type': 'Notebook', 'Price': 50.0, 'States': [1]} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T14:29:36.523

替代使用的替代方法（尽管看起来有点极端）是PyPi 上可用`ast.literal_eval`的模块 - 并查看[http://pyparsing.wikispaces.com/file/view/parsePythonValue.py](http://pyparsing.wikispaces.com/file/view/parsePythonValue.py)代码示例是否适合您需要，或者可以很容易地适应。`pyparsing`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-25T07:06:29.523

这是我对这个问题的看法，以防您必须处理多种 csv 格式、一些额外的自定义数据整理以在某些列上执行，并输出为列表列表或元组的元组。

类型显示为字符串，因为列类型存储在 Python 代码之外的数据库中。如果需要，它还可以添加一些自定义类型。

不过，我还没有针对超大文件对此进行测试，因为在我的生产代码中我使用了 pandas，并且此代码用于一些测试设置。但我想这比其他一些答案消耗更多的内存，因为来自 csv 的所有数据都是一次加载的。

```
dict_headers_type = {
    "IsActive": "bool",
    "Type": "str",
    "Price": "float",
    "State": "list",
}

dict_converters = {
    "bool": x: bool(x),
    "float": x: float(x),
    "list": x: ast.literal_eval(x),
}

dict_header_converter = {
    header: dict_converters[my_type]
    for header, my_type in dict_headers_type.items()
    if my_type in dict_converters.keys()
} 
```

到位后，我们可以执行转换：

```
with open(csv_path) as f:
    data = [line for line in csv.reader(f)]

# list of the converters to apply
ls_f = [
    dict_header_converter[header]
    if header in dict_header_converter.keys() else None
    for header in data[0]
]

ls_records = [f(datapoint) if f else datapoint
     for f, datapoint in zip(ls_f, row)]
    for row in data[1:]]

# to add headers, if needed:
ls_records.insert(0, data[0]) 
```

输出：

```
[
  ['IsActive','Type','Price','State']
  [True, 'Cellphone', 34.0, [1, 2]],
  [False, 'FlatTv', 3.5, [2]],
  [True, 'Screen', 100.23, [5, 1]],
  [True, 'Notebook', 50.0, [1]],
] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-04T13:19:30.603

我喜欢[@martineau](https://stackoverflow.com/a/54794212/11657671)的回答。它很干净。

我需要的一件事是只转换几个值并将所有其他字段保留为字符串，例如将字符串作为默认值并仅更新特定键的类型。

为此，只需替换此行：

```
row = CSV_Record._transform(row) 
```

通过这个：

```
row.update(CSV_Record._transform(row)) 
```

“*更新*”函数直接更新变量*行*，将来自 csv 提取的原始数据与通过“ *_transform* ”方法转换为正确类型的值合并。

请注意，更新版本中没有“ *row* =”。

如果有人有类似的要求，希望这会有所帮助。

（PS：我对在stackoverflow上发帖很陌生，所以如果上述内容不清楚，请告诉我）

# c# - 'System.Data.Objects.ObjectContext' 不包含采用 0 个参数的构造函数

> ID：11665629
> 
> 赞同：0
> 
> 时间：2012-07-26T08:49:16.277
> 
> 标签：c#, .net, entity-framework, compiler-errors, objectcontext

我继承了一些代码（这种情况经常发生！），看起来有点像这样：（省略了命名空间）

```
public partial class SpatialDatabase : global::System.Data.Objects.ObjectContext
{
    public string MY_PROCEDURE(Decimal arg1, Decimal arg2)
    {
        using (EntityConnection conn = new EntityConnection(this.Connection.ConnectionString))
        {
            conn.Open();

            object a = new System.Data.Objects.ObjectContext(new EntityConnection());

            EntityCommand cmd = conn.CreateCommand();
            cmd.CommandText = "SpatialDatabaseContext.MY_PROCEDURE";
            cmd.CommandType = CommandType.StoredProcedure;

            cmd.Parameters.AddWithValue("ARG1", arg1);
            cmd.Parameters.AddWithValue("ARG2", arg2);

            EntityParameter resultParam = cmd.Parameters.Add("RESULT", DbType.String, 100);
            resultParam.Direction = ParameterDirection.Output;

            int c = cmd.ExecuteNonQuery();

            return (string)resultParam.Value;
        }
    }
} 
```

这在我的班级名称下给了我一条弯曲的蓝线，并带有错误消息。

我知道这段代码有效。这在现场其他地方运行得很好。那么为什么这个副本会给我这个错误呢？

[编辑]

实际上，当从数据库对象构建 EDMX 文件时，会添加缺少的构造函数。这就是为什么它是一个部分类！我们每天都学到新东西！

[/编辑]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:52:51.723

由于[ObjectContext](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx)没有任何带 0 个参数的构造函数，并且您没有使用`SpatialDatabase` 类调用任何 base(...) 构造函数，因此您的代码会**隐式调用`base()`**基类的默认构造函数。

您当前的代码相当于：

```
public partial class SpatialDatabase : global::System.Data.Objects.ObjectContext
{

       SpatialDatabase() : base() //Problem is here
       {
       }

} 
```

您需要使用类构造函数调用以下基本构造函数之一

*   [对象上下文（实体连接）](http://msdn.microsoft.com/en-us/library/bb738714.aspx)
*   [对象上下文（字符串）](http://msdn.microsoft.com/en-us/library/bb739017.aspx)
*   [ObjectContext（实体连接，字符串）](http://msdn.microsoft.com/en-us/library/bb738877.aspx)
*   [对象上下文（字符串，字符串）](http://msdn.microsoft.com/en-us/library/bb156503.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:52:45.577

这是一个警告，说明您的派生类没有提供带参数的构造函数，您可能希望将其传递给继承类的构造函数。这可能会导致问题。

# php - 警告：preg_match() [function.preg-match]：未知修饰符“-”

> ID：11665632
> 
> 赞同：1
> 
> 时间：2012-07-26T08:49:23.527
> 
> 标签：php, php-5.3

我将`ereg to preg_match`更新 mycode 更改为 PHP5.3 。现在我在我的页面中看到了这个警告。如何解决这个问题？

警告 ：

```
Warning: preg_match() [function.preg-match]: Unknown modifier '-' in C:\xampp\htdocs\share\configs\functions.php on line 2645 
```

旧代码：

```
if (!ereg ("([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})", $dateOfBirth, $regs)) 
```

新代码（PHP 5.3）：

```
if (!preg_match ("([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})", $dateOfBirth, $regs)) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:50:51.950

您需要添加[分隔符](http://php.net/manual/en/regexp.reference.delimiters.php)：

```
if (!preg_match ("/([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})/", $dateOfBirth, $regs))
#                 ^                                    ^ 
```

# android - 在 Android 上显示 GPS 方向

> ID：11665644
> 
> 赞同：1
> 
> 时间：2012-07-26T08:50:13.720
> 
> 标签：android, google-maps

我有所有数据，包括纬度、经度和 gps 方向，如何绘制具有行驶方向
的车辆我可以在地图上绘制车辆，使用这个

```
 List<Overlay> mapOverlays = mapView.getOverlays();
        Drawable drawable = this.getResources().getDrawable(R.drawable.vehicle_move_green);
        MapVehicles objMapVehicles=new MapVehicles(drawable, this);

        GeoPoint point = new GeoPoint((int)(latitude*1E6),(int)(longitude*1E6));
        OverlayItem overlayitem = new OverlayItem(point,"","");

        objMapVehicles.addOverlay(overlayitem);
        mapOverlays.add(objMapVehicles);
        mapController.setCenter(point);
        mapController.setZoom(17); 
```

我需要这张图片应该显示移动方向，因为我有 GPS 方向号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:21:20.430

你想从你现在的地方画出方向，就从[这里过去](http://blog.synyx.de/2010/06/routing-driving-directions-on-android-%E2%80%93-part-2-draw-the-route/)

# java - 在 Servlet-Spring 中强制浏览器下载

> ID：11665646
> 
> 赞同：0
> 
> 时间：2012-07-26T08:50:21.023
> 
> 标签：java, jsp, servlets, spring-mvc, download

我是 Spring MVC 的新手，我对访问`HttpServletResponse`servlet 中的对象有疑问。

基本上我的代码是这样的：

```
@RequestMapping("/part of requesturl")
@ResponseBody String methodName(HttpServletRequest request)
{
    //All the computations which build up a JSon

    return json;
} 
```

现在这个`json`文件作为响应显示在浏览器上。无论浏览器如何，我都需要强制将其下载到用户的磁盘上。通过查看其他帖子，我认为我应该这样做：

```
response.setContentType("application/force-download"); 
```

如何在这里获取响应对象？此外，如果有人可以更清楚地说明强制下载到浏览器上，那就太好了。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:58:31.127

> 如何在这里获取响应对象？

非常直观：

```
@ResponseBody String methodName(
        HttpServletRequest request, 
        HttpServletResponse response
) {
    response.setContentType("application/force-download");
        //...
} 
```

> 此外，如果有人可以更清楚地说明强制下载到浏览器上，那就太好了。

看：

*   [如何强制浏览器下载文件？](https://stackoverflow.com/questions/6520231)
*   [用于移动设备的 HTTP 标头“内容类型：应用程序/强制下载”的实用程序？](https://stackoverflow.com/questions/10615797)

# android - 使用填充时 Actionbar-compat 下方的阴影

> ID：11665651
> 
> 赞同：8
> 
> 时间：2012-07-26T08:50:48.947
> 
> 标签：android, android-layout, android-actionbar

我正在开发一个 Android 应用程序，它使用 Google 的兼容性包来获取 Android 2.x 中的片段等。操作栏是根据 Google 的示例创建的。一个白色的“阴影”被放置在它下面，使用

```
<item name="android:windowContentOverlay">@drawable/actionbar_shadow</item> 
```

但是，操作栏（片段）下方的对象包含具有以下属性的 ListView

```
android:paddingTop="5dp" 
```

这导致白色阴影也下降了 5dp：

![在此处输入图像描述](../Images/7d97cff160888e72e053e119252c38f2.png)

有没有办法在将阴影保持在适当位置的同时保持 ListView 上的填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-09T20:43:49.560

此项目应在应用程序主题中，而不是 ActionBar 样式中。

# facebook - 在 Facebook 弹出窗口期间禁用后台按钮 (Corona)

> ID：11665656
> 
> 赞同：0
> 
> 时间：2012-07-26T08:50:53.893
> 
> 标签：facebook, popup, coronasdk

我在 Corona 中使用内置的 Facebook api 来获取 Facebook 弹出窗口。但是，弹出窗口不会覆盖全屏，因此背景中的按钮是可见且可点击的。有一个主页按钮。当我单击后台的主页按钮时，Facebook 弹出窗口不会关闭，并且应用程序会在后台返回主屏幕。我想在弹出窗口关闭的情况下返回主屏幕，或者在弹出窗口打开时使主页按钮不可点击。如果我在 Facebook 弹出窗口出现时在后台禁用按钮，则无法知道用户关闭了弹出窗口，因此我可以启用该按钮。有没有办法让 Facebook 弹出窗口全屏或知道弹出窗口已关闭。? 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:18:34.783

当对话框关闭时，您应该收到一个“对话框”类型的事件，发送给您提供给 facebook.login() 的 facebook 侦听器。考虑到这一点，您可以禁用屏幕上的所有控件，显示对话框，然后每当您获得对话框事件时恢复控件功能。诀窍是在您的原始侦听器和弹出对话框的代码之间保持某种关系。

# jquery - 如何使用更少的代码计算元素的宽度和高度及其填充/边距值？

> ID：11665657
> 
> 赞同：5
> 
> 时间：2012-07-26T08:50:52.817
> 
> 标签：jquery, css, height, width

我正在使用[height()](http://api.jquery.com/height/) / [width()](http://api.jquery.com/width/)方法，但它的返回值没有填充和边距值。我用 / 高度值计算总和没有问题。

这种方式有效，但我的问题是；它太长了，无法计算所有这些。有没有办法用更少的代码来计算这些而没有错误？

[这是 jsFiddle 示例。](http://jsfiddle.net/B7fMW/6/)

jQuery：

```
var ele = $('div');

var eleW = ele.width();
var eleH = ele.height();

alert(eleW);//returning 200
alert(eleH);//returning 100

var eleMR = parseInt(ele.css('margin-right'));
var eleML = parseInt(ele.css('margin-left'));
var eleMT = parseInt(ele.css('margin-top'));
var eleMB = parseInt(ele.css('margin-bottom'));

var elePR = parseInt(ele.css('padding-right'));
var elePL = parseInt(ele.css('padding-left'));
var elePT = parseInt(ele.css('padding-top'));
var elePB = parseInt(ele.css('padding-bottom'));

var eleTotalWidth = eleMR + eleML + elePR + elePL + eleW;
var eleTotalHeight = eleMT + eleMB + elePT + elePB + eleW;

alert(eleTotalWidth);//returning 147
alert(eleTotalHeight);//returning 122 
```

CSS：

```
div {
       float:left; width:100px; height:200px; background-color:#000;
       margin:5px 3px 2px 4px; padding:10px 20px 5px;
     }​ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T08:54:08.150

使用[`outerWidth();`](http://api.jquery.com/outerWidth/)和[`outerHeight();`](http://api.jquery.com/outerHeight/)

```
var ele = $('div');

var eleW = ele.outerWidth(true);
var eleH = ele.outerHeight(true); 
```

# java - Scala 的另一个“无法实例化活动 ComponentInfo”

> ID：11665658
> 
> 赞同：2
> 
> 时间：2012-07-26T08:50:55.157
> 
> 标签：java, android, scala, classnotfoundexception, sbt-android-plugin

我正在尝试在没有 ProGuard 步骤的情况下创建和测试一个用 Scala 编写的简单虚拟 Android 应用程序（useProguard := false）。

* * *

我已将 scala 库推送到`/system/framework`：
`/system/framework/scala-library-2.9.1.jar`

和一个权限文件`/system/etc/permissions`：
`/system/etc/permissions/scala-library-2.9.1.xml`

* * *

权限xml的内容：

```
<?xml version="1.0" encoding="utf-8"?>

<permissions>
    <library
        name="scala-library-2.9.1"
        file="/system/framework/scala-library-2.9.1.jar"
    />
</permissions> 
```

* * *

这是我的`MainActivity.scala`：

```
package com.google.summer

import _root_.android.app.Activity
import _root_.android.os.Bundle
import _root_.android.graphics.Typeface
import _root_.android.text.Html

class MainActivity extends Activity with TypedActivity {
    override def onCreate(bundle: Bundle) {
        super.onCreate(bundle)
        setContentView(R.layout.main)

        // my dummy code here

    }
} 
```

* * *

这是我的`AndroidManifest.xml`：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.google.summer">

    <application
        android:icon="@drawable/android:star_big_on"
        android:label="@string/app_name"
        android:debuggable="true">

        <activity android:label="@string/app_name" android:name=".MainActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>

        <uses-library android:name="scala-library-2.9.1" />
    </application>

    <uses-sdk android:minSdkVersion="10"/>
</manifest> 
```

* * *

我设法在不使用 ProGuard 的情况下将它安装在我的设备上，但是，当我尝试运行它时，出现以下异常（使用 logcat 捕获）：

```
dalvikvm   I  Zip is good, but no classes.dex inside, and no valid .odex file in the same directory
dalvikvm   I  Failed resolving Lcom/google/summer/TypedViewHolder; interface 48 'Lscala/ScalaObject;'
dalvikvm   W  Link of class 'Lcom/google/summer/TypedViewHolder;' failed
dalvikvm   I  Failed resolving Lcom/google/summer/TypedActivityHolder; interface 30 'Lcom/google/summer/TypedViewHolder;'
dalvikvm   W  Link of class 'Lcom/google/summer/TypedActivityHolder;' failed
dalvikvm   I  Failed resolving Lcom/google/summer/TypedActivity; interface 19 'Lcom/google/summer/TypedActivityHolder;'
dalvikvm   W  Link of class 'Lcom/google/summer/TypedActivity;' failed
dalvikvm   I  Failed resolving Lcom/google/summer/MainActivity; interface 18 'Lcom/google/summer/TypedActivity;'
dalvikvm   W  Link of class 'Lcom/google/summer/MainActivity;' failed 
```

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.google.summer/com.google.summer.MainActivity}: java.lang.ClassNotFoundException: com.google.summer.MainActivity in loader dalvik.system.PathClassLoader[/system/framework/scala-library-2.9.1.jar:/data/app/com.google.summer-1.apk]
     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1680)
     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
     at android.os.Handler.dispatchMessage(Handler.java:99)
     at android.os.Looper.loop(Looper.java:123)
     at android.app.ActivityThread.main(ActivityThread.java:3835)
     at java.lang.reflect.Method.invokeNative(Native Method)
     at java.lang.reflect.Method.invoke(Method.java:507)
     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
     at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: com.google.summer.MainActivity in loader dalvik.system.PathClassLoader[/system/framework/scala-library-2.9.1.jar:/data/app/com.google.summer-1.apk]
     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1672)
     ... 11 more
  Force finishing activity com.google.summer/.MainActivity 
```

* * *

有谁知道错误可能在哪里以及如何解决它？

先谢谢了

顺便说一句，可能是被推送的 scala 库有问题吗？
Logcat 说它找不到`scala.ScalaObject`，但它存在于我推送的 jar 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:45:13.640

您不能随意向设备添加新的外部库（即在应用程序之间共享的库）。您将需要在您创建的每个应用程序中包含 scala jar。

这可以通过创建一个带有 Scala 的自定义 rom 来完成，但是每个想要运行您的应用程序的人都需要该自定义 rom。不是很实用:)

# regex - 在正则表达式中匹配时删除一个字符

> ID：11665659
> 
> 赞同：0
> 
> 时间：2012-07-26T08:50:59.817
> 
> 标签：regex

我需要匹配一个特定的字符串，中间有一个空格，生成的匹配组应该删除空格。

例如，如果字符串是“Action 50”，则正则表达式应该是匹配组应该匹配字符串“Action 50”，但返回值应该是“Action50”。

正则表达式中是否有任何运算符可以执行此操作？

欢迎任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:47:52.940

我不知道您将哪个软件用于正则表达式，但是：

源正则表达式：`"^(.*) (.*)$"`
目标正则表达式： `"\1\2"`

在大多数正则表达式工具中，您可以使用括号将字符串放入内存。
在你可以得到它们之后`"\x"`，其中 x 是一个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:05:00.370

这将打印您需要的预期结果：

```
grep -o "search pattern" filename | sed -e 's/ //' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:46:16.443

您可以使用两个组来执行此操作，然后将两个组连接起来：

```
(Action)\s+(\d+) 
```

然后使用第 1 组和第 2 组。

快速 PowerShell 测试：

```
PS> 'bdfskildhfAction 50sdlfhjsf' -match '(Action)\s+(\d+)'; $Matches[1] + $Matches[2]
True
Action50 
```

# jasper-reports - JasperReports 中跨页面的水印

> ID：11665663
> 
> 赞同：3
> 
> 时间：2012-07-26T08:51:10.940
> 
> 标签：jasper-reports, reporting, ireport

我们在 Web 应用程序中使用 jasperReports 和 iReports 来生成报告。

当我探索碧玉报告时，我能够轻松地在报告中插入水印..

但是我的目的是将水印字符串说（迈克尔杰克逊）放在页面上。

通过我只能找到的属性`rotation option of left/right and upside down`...

是否可以在整个页面的报告中放置水印..

我正在使用`ireport`设计报告...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T14:41:38.823

JasperReports 本身不支持将文本旋转到 90、180 或 270 度以外的任何角度。一种解决方案是生成旋转文本的图像并将其呈现在报告上。

在[这个 jasperforge 线程](http://community.jaspersoft.com/questions/526526/how-rotate-text-field-45-degrees)的最后一篇文章中，用户“artduc”分享了一个报告脚本来实现这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-05T00:51:20.870

我只是在说明 GenericJon 的建议...

将图像元素添加到背景带（设置见屏幕截图）。

实现 Renderable 并通过参数映射将其传递给 Jasper Reports：

```
InputStream jasperReportInputStream = getClass().getResourceAsStream("/reports/Test.jasper");  
JRBeanCollectionDataSource dataSource = ...    
Map parameters = new HashMap();
parameters.put("watermark", new WaterMarkRenderer(true);    
JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReportInputStream, parameters, dataSource); 
```

水印渲染器：

```
@SuppressWarnings("deprecation")
public class WaterMarkRenderer extends JRAbstractRenderer
{
  private boolean m_licenseTrial = false;

  public WaterMarkRenderer(boolean isLicenseTrial)
  {
    m_licenseTrial = isLicenseTrial;
  }

  @Override
  public byte getType()
  {
    // no idea what this does
    return RenderableTypeEnum.SVG.getValue();
  }

  @Override
  public byte getImageType()
  {
    // no idea what this does
    return ImageTypeEnum.UNKNOWN.getValue();
  }

  @Override
  public Dimension2D getDimension() throws JRException
  {
    // A4 in pixel: 595x842
    // this seems to override whatever is configured in jasperreports studio
    return new Dimension(595 - 2 * 40, 700);
  }

  @Override
  public byte[] getImageData() throws JRException
  {
    // no idea what this does
    return new byte[0];
  }

  @Override
  public void render(Graphics2D g2, Rectangle2D rectangle) throws JRException
  {
    if(m_licenseTrial)
    {
      AffineTransform originalTransform = g2.getTransform();

      // just for debugging
      g2.setColor(Color.BLUE);
      g2.draw(rectangle);

      g2.translate(rectangle.getX() + 100, rectangle.getMaxY());
      g2.rotate(-55 * Math.PI / 180);

      Font font = new Font("Arial", Font.PLAIN, 120);
      Shape shape = font.createGlyphVector(g2.getFontRenderContext(), "Trial License").getOutline();
      g2.setColor(new Color(255, 0, 0, 100));
      g2.setStroke(new BasicStroke(1));
      g2.draw(shape);

      g2.setTransform(originalTransform);
    }
  }
} 
```

![](../Images/eda50f55069269a57520f451944302bc.png)

结果：

![](../Images/edaf7a2e9352a4ed145045799758bd46.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-06T17:32:05.620

您可以使用 iText 阅读您使用 jasper 报告创建的 pdf。要么将 pdf 读取为 byteArray。然后使用 itext PdfReader 使用它

```
byte [] dataArray = JasperExportManager.exportReportToPdf(jasperPrint);
PdfReader pdfReader = new PdfReader(dataArray); 
```

或从某个位置读取 pdf（如果已写入）

```
JasperExportManager.exportReportToPdfFile(jasperPrint,pdfFileLocation); 
PdfReader pdfReader = new PdfReader(pdfFileLocation); 
```

我希望下面的代码片段有助于我从哪里读取文件并添加水印，删除现有文件并编写新文件。

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
BaseFont bf = null;
PdfBoolean pdfBoolean_YES = new PdfBoolean(true);
PdfReader pdfReader = new PdfReader(pdfFileLocation);
PdfStamper pdfStamper = new PdfStamper(pdfReader, baos);  
PdfContentByte contentunder = pdfStamper.getUnderContent(1);

contentunder.saveState();                   
contentunder.setColorFill(new Color(200, 200, 200));
contentunder.beginText();
bf = BaseFont.createFont(BaseFont.TIMES_ROMAN, BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
contentunder.setFontAndSize(bf, 90);
contentunder.showTextAligned(Element.ALIGN_MIDDLE, "  WaterMark Content", 200, 400, 45);
contentunder.endText();    
contentunder.restoreState();

// We could stack those ViewerPreferences using '|' ... :)
pdfStamper.addViewerPreference(PdfName.HIDETOOLBAR, pdfBoolean_YES);
pdfStamper.addViewerPreference(PdfName.HIDEMENUBAR, pdfBoolean_YES);
//pdfStamper.addViewerPreference(PdfName.HIDEWINDOWUI, pdfBoolean_YES);                   

pdfReader.close();
pdfStamper.close();
//deleting existing file                 
FileUtil.delete(pdfFileLocation);

FileOutputStream fos = new FileOutputStream(pdfFileLocation);
baos.writeTo(fos);                    
fos.flush();
//close streams                
baos.close();
fos.close(); 
```

# jquery - Ajax 回馈最近页面的代码 HTML，为什么？

> ID：11665668
> 
> 赞同：0
> 
> 时间：2012-07-26T08:51:21.460
> 
> 标签：jquery, ajax, zend-framework

我的代码真的很简单，而且我多次使用 ajax 都没有问题。但现在我有这个：

```
var dataForm=jQuery('form').serialize();
jQuery.post(  
        '/home/index/page/1', 
        dataForm,
        process_Results_Search 
        ); 

function process_Results_Search(response)
        {
                console.log('Im processing data');
                console.log(response);
        } 
```

在我的控制器中，我只做了一个简单的回声：

```
echo "im here"; 
```

但我的回应是这样的（最近页面的内容）。我正在使用 ZEND：

* * *

```
<!DOCTYPE HTML>
<html>
<head>

    ....

im here<!----------in the end of the response!!!----------------> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:39:11.037

您不一定需要使用不同的操作。在我的代码中，我有一些页面使用基本相同的代码进行 AJAX 调用和常规调用（例如弹出窗口）。您可以检查调用是否是 ajax 调用，如果是这种情况，则禁用布局和查看：

```
 if($this->getRequest()->isXmlHttpRequest()) {
        $this->_helper->layout()->disableLayout();
        $this->_helper->viewRenderer->setNoRender();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:53:41.590

不要忘记在您的响应视图上禁用模板！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:35:49.613

好的，修好了。我将帖子发送到用于呈现带有表单的页面的同一视图。所以我再次渲染了相同的视图。我需要创建一个不同的操作来处理请求 ajax

# spring - Spring Data Neo4j - @Autowired Repository == null

> ID：11665670
> 
> 赞同：2
> 
> 时间：2012-07-26T08:51:30.790
> 
> 标签：spring, neo4j, annotations, autowired, spring-data-neo4j

我尝试使用 Spring Data Neo4j 编写一个 webapp。

我有一个存储库：

```
public interface UserRepository extends GraphRepository<Neo4jUser> {} 
```

一个applicationcontext.xml：

```
...
<context:component-scan base-package="de.wilke.test.neo4j" >
    <context:exclude-filter type="annotation" 
          expression="org.springframework.stereotype.Controller"/>
</context:component-scan>

<!-- REST Connection to Neo4j server --> 
<bean id="restGraphDatabase" 
    class="org.springframework.data.neo4j.rest.SpringRestGraphDatabase">
    <constructor-arg value="http://localhost:7474/db/data/" />
</bean>

<bean id="myservice" class="de.wilke.test.neo4j.Neo4jResource">
</bean>

<!-- Neo4j configuration (template) -->
<neo4j:config graphDatabaseService="restGraphDatabase" />

<!-- Package w/ automagic repositories -->
<neo4j:repositories base-package="de.wilke.test.repository" /> 
```

还有我的 Neo4jResource：

```
@Controller
public class Neo4jResource {

    @Autowired
    public static UserRepository repo;
    ... 
```

现在不能在 Controller 中使用 UserRepository，因为它是空的......

错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:27:12.067

`@Autowired`不适用于`static`字段。

从设计的角度来看，制作这个领域也不是一个好主意`static`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:51:38.687

我能想到的几件事：

1.  您的`<neo4j:repositories base-package=".."/> is not correct`
2.  您没有`applicationContext`正确加载并且`repo`没有正确实例化

首先检查你的包裹。另外，您的主应用程序中是否有以下内容？

```
ConfigurableApplicationContext context;
context = new ClassPathXmlApplicationContext("spring/applicationContext.xml");

Neo4jResource myBean = context.getBean(Neo4jResource.class);
myBean.functionThatUsesTheRepo(); 
```

希望这会有所帮助...

# c# - 为什么延迟照明会破坏 FPS？(2D)

> ID：11665671
> 
> 赞同：1
> 
> 时间：2012-07-26T08:51:31.193
> 
> 标签：c#, xna, 2d, hlsl, deferred

为什么延迟照明会破坏 FPS？我尝试在我的地图的可视空间上放置大约 20-26 个延迟照明，它将 fps 从 61 降低到 28-31。

它还使我的 VGA 温度从 68°C 上升到 72-73°C。我觉得这有点奇怪，因为它只是 2D。而且我认为将我的 FPS 减半不应该是这么多的计算。

所以基本上我不明白为什么这种方法要花这么多钱。或者我的代码有问题以及我如何尝试解决它？

还有没有其他好的照明方法，比这个成本低得多？点灯？

我的代码是：

```
 Texture_Lights = RenderTargetBase.GetTexture();
 for (int i = 0; i < LightRef.Count; i++)
            {

                //Draw lights
                for (int techniqueindex = 0; techniqueindex < LightRef[i].Parent.effect.Techniques.Count; techniqueindex++)
                {
                    LightRef[i].Parent.effect.CurrentTechnique = LightRef[i].Parent.effect.Techniques[techniqueindex];

                    LightRef[i].Parent.effect.Parameters["time"].SetValue(((float)timer.Elapsed.TotalSeconds) * 0.0000158f);
                    LightRef[i].Parent.effect.Parameters["GameTime"].SetValue(timer.Elapsed.Seconds);
                    LightRef[i].Parent.effect.Parameters["lightPosition"].SetValue(
                        new Vector3(
                            (LightRef[i].Position.X-CameraX)/(1.0f/ZoomFloat), 
                            (LightRef[i].Position.Y-CameraY)/(1.0f/ZoomFloat),
                            0
                            ));

                   LightRef[i].Parent.effect.Parameters["screenWidth"].SetValue(this.Width);
                   LightRef[i].Parent.effect.Parameters["screenHeight"].SetValue(this.Height);

                    for (int cx = 0; cx < LightRef[i].Parent.SelfTextures.Count; cx++)
                    {
                        LightRef[i].Parent.effect.Parameters[LightRef[i].Parent.SelfTextures[cx]].SetValue(RenderTargetBase.GetTexture());
                    }

                    foreach (EffectPass pass in LightRef[i].Parent.effect.CurrentTechnique.Passes)
                    {

                        GraphicsDevice.SetRenderTarget(0, RenderTargetLights);
                        GraphicsDevice.Clear(ClearColor);

                        spriteBatch.Begin(SpriteBlendMode.AlphaBlend, SpriteSortMode.Immediate, SaveStateMode.None);
                        LightRef[i].Parent.effect.Begin();
                        LightRef[i].Parent.effect.GraphicsDevice.RenderState.AlphaBlendEnable = true;
                        pass.Begin();

                        spriteBatch.Draw(
                         Texture_Lights,
                         new Vector2(0,0),
                        new Rectangle(0, 0, Texture_Lights.Width, Texture_Lights.Height),
                        Color.White,
                        0,
                        new Vector2(0, 0),
                        1.0f,
                        SpriteEffects.None,
                        0);

                        spriteBatch.End();
                        pass.End();
                        LightRef[i].Parent.effect.End();

                        GraphicsDevice.SetRenderTarget(0, null);
                        GraphicsDevice.Clear(ClearColor);

                        Texture_Lights = RenderTargetLights.GetTexture();
                    }

                }

            }

            GraphicsDevice.SetRenderTarget(0, null);
            GraphicsDevice.Clear(ClearColor);

            //Draw the Lightings #2
            if (Texture_Lights != null)
            {
                spriteBatch.Begin(SpriteBlendMode.AlphaBlend, SpriteSortMode.Immediate, SaveStateMode.None);

                spriteBatch.Draw(
                 Texture_Lights,
                 new Vector2(0, 0),
                new Rectangle(0, 0, Texture_Lights.Width, Texture_Lights.Height),
                Color.White,
                0,
                new Vector2(0, 0),
                this.ZoomFloat,
                SpriteEffects.None,
                0);

                spriteBatch.End();
            } 
```

和着色器：

```
float GameTime;
float time;

texture2D colortexture;
texture2D normaltexture;

float ambient = 1.00;
float4 ambientColor = (1, 1, 1, 1);

float3 lightPosition = (230,230,0);
float4 lightColor = (120,120,120,120);
float lightPower = 0.27;

float screenWidth = 1000;
float screenHeight = 600;

sampler ColorMap = sampler_state
{
 Texture = <colortexture>;
};

sampler NormalMap = sampler_state
{
 Texture = <normaltexture>;
};

float4 DeferredNormalPS(float2 texCoords : TEXCOORD0) : COLOR
{
 float4 base = tex2D(ColorMap, texCoords);
 float3 normal = tex2D(NormalMap, texCoords);

 float3 pixelPosition = float3(screenWidth * texCoords.x, screenHeight * texCoords.y,0);

 float3 direction = lightPosition - pixelPosition;
 float distance = 1 / length(lightPosition - pixelPosition) * lightPower;
 float amount = max(dot(base + normal, normalize(distance)), 0);
 lightColor *= lightPower;

 float4 finalColor = (base * ambientColor * ambient) +
 (base * distance * amount * lightColor * ambient);

finalColor.a = base.a;

 return finalColor;
}

technique Deferred
{
 pass Pass1
 {
 PixelShader = compile ps_3_0 DeferredNormalPS();
 }
} 
```

# gstreamer - 与 gst-launch 命令等效的 Gstreamer 代码

> ID：11665673
> 
> 赞同：-1
> 
> 时间：2012-07-26T08:51:40.193
> 
> 标签：gstreamer, gst-launch

我使用以下命令从 cmd 创建管道。

```
gst-launch -v filesrc location=c:\\song.mp3  ! mad ! audioconvert ! directsoundsink 
```

如何将上述命令编码到程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:47:27.973

“程序”是猜测你的意思是你可以运行的文件。

您可以简单地将 gst-launch 节放入脚本文件中，然后运行该脚本文件。

以下示例使用[bash](http://de.wikipedia.org/wiki/Bourne-again_shell)语法（将其保存在文件*playmad*中，使文件可执行并运行`playmad /path/to/song.mp3`）

```
#!/bin/sh
SOURCE=$1
test -e "${SOURCE}" && \
gst-launch -v filesrc location="${SOURCE}" \
              ! mad \
              ! audioconvert \
              ! directsoundsink 
```

在 w32 上，您可以创建一个`.bat`执行相同操作的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:12:03.567

所有 gstreamer 模块都有 test/examples 目录，您也可以查看[git browser](http://cgit.freedesktop.org/gstreamer/gstreamer/tree/tests/examples "git浏览器")。要将上述 gst-launch 调用作为程序实现，您需要选择语言（例如 c 或 python）并使用 gst API 实现它。不要指望有人在这里为你做这件事。

# android - 果冻豆 android.R.id.content 变了？

> ID：11665677
> 
> 赞同：3
> 
> 时间：2012-07-26T08:51:50.757
> 
> 标签：android, android-layout, android-actionbar, android-4.2-jelly-bean

我最近在 Jelly Bean 设备上测试了我的应用程序，发现我的操作栏躲避代码不再起作用。

我有一个 OverlayMode 为 true 的透明操作栏，但希望在我的某些屏幕中将操作栏表现得像一个实心操作栏。

为了使它工作，我从 Honeycomb Gallery [Code借了一些代码](http://android.okhelp.cz/java_android_code.php?o=%5Candroid-15%5CHoneycombGallery%5Csrc%5Ccom%5Cexample%5Candroid%5Chcgallery%5CTitlesFragment.java)

基本上我检查 Acionbar 高度并将 android.R.id.content 存储桶的 topMargin 设置为此值。

```
 public void setupActionbar() {
    final int sdkVersion = Build.VERSION.SDK_INT;
    int barHeight = getSupportActionBar().getHeight();
      if (sdkVersion < Build.VERSION_CODES.HONEYCOMB) {
        FrameLayout content = (FrameLayout) findViewById(android.R.id.content);
        RelativeLayout.LayoutParams params = (android.widget.RelativeLayout.LayoutParams) content.getLayoutParams();

        if (params.topMargin != barHeight) {
          params.topMargin = barHeight;
          content.setLayoutParams(params);
        }

        if (!getSupportActionBar().isShowing()) {
          params.topMargin = 0;
          content.setLayoutParams(params);
        }
      } else {
        FrameLayout content = (FrameLayout) findViewById(android.R.id.content);
        LayoutParams params = content.getLayoutParams();
        if (params instanceof RelativeLayout.LayoutParams) {
          android.widget.RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams) params;
          if (lp.topMargin != barHeight) {
            lp.topMargin = barHeight;
            content.setLayoutParams(lp);
          }

          if (!getActionBar().isShowing()) {
            lp.topMargin = 0;
            content.setLayoutParams(lp);
          }
        } else if (params instanceof FrameLayout.LayoutParams) {
          FrameLayout.LayoutParams lp = (FrameLayout.LayoutParams) params;
          if (lp.topMargin != barHeight) {
            lp.topMargin = barHeight;
            content.setLayoutParams(params);
          }

          if (!getActionBar().isShowing()) {
            lp.topMargin = 0;
            content.setLayoutParams(params);
          }
        }

      } 
```

在 Jelly Beans 中，由于某种原因，这种策略不再起作用。Jelly Bean 是否更改了 id.content Container perhabs？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:34:02.257

好的，在这里回答我自己的问题。首先，我的代码中有一个错字：

```
content.setLayoutParams(params); should read
content.setLayoutParams(lp); 
```

但真正的问题是

```
FrameLayout content = (FrameLayout) findViewById(android.R.id.content); 
```

提供整个屏幕的视图，包括**状态栏**。**仅适用于 Android 4.1 Jelly Bean**

```
View content = ((ViewGroup) findViewById(android.R.id.content)).getChildAt(0); 
```

给出了需要在透明操作栏下推送的 RootContentView。

# javascript - 使用 Google Places API 通过分页获得 20 多个结果

> ID：11665684
> 
> 赞同：5
> 
> 时间：2012-07-26T08:52:02.753
> 
> 标签：javascript, google-places-api

谷歌的演示有这个片段，可以通过分页捕获来自地点搜索的 20 多个结果：

```
 service.nearbySearch(request, resultList, function(status, results, pagination) {
    if (status != google.maps.places.PlacesServiceStatus.OK) {
     return;
    }
    resultList.addPlaces(results);
    if (pagination.hasNextPage) {
      resultList.button.onClick = pagination.nextPage;
    }
  }); 
```

我在尝试将此片段集成到以下示例中时遇到问题，即 Github 中的另一个谷歌地图示例 gmaps-samples-v3：

```
 <!DOCTYPE html>
<html>
  <head>
    <title>Places Search Demo</title>
    <link rel="stylesheet" type="text/css"
          href="https://google-developers.appspot.com/css/screen.css">
    <link rel="stylesheet"
          href="https://www.google.com/cse/style/look/default.css" type="text/css">
    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places">
    </script>
    <script type="text/javascript">
      var map;
      var places;
      var iw;
      var markers = [];

      function initialize() {
        var options = {
          zoom: 12,
          center: new google.maps.LatLng(22.279387,114.164579),
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          streetViewControl: false
        };
        var mapCanvas = document.getElementById('map_canvas');
        map = new google.maps.Map(mapCanvas, options);
        places = new google.maps.places.PlacesService(map);
      }

      function updateKeyword(event) {
        updateRankByCheckbox();
        blockEvent(event);
      }

      function blockEvent(event) {
        if (event.which == 13) {
          event.cancelBubble = true;
          event.returnValue = false;
        }
      }

      function updateRankByCheckbox() {
        var types = getTypes();
        var keyword = document.controls.keyword.value;
        var disabled = !types.length && !keyword;
        var label = document.getElementById('rankbylabel');
        label.style.color = disabled ? '#cccccc' : '#333';
        document.controls.rankbydistance.disabled = disabled;
      }

      function getTypes() {
        var types = []
        for (var i = 0; i < document.controls.type.length; i++) {
          if (document.controls.type[i].checked) {
            types.push(document.controls.type[i].value);
          }
        }
        return types;
      }

      function search(event) {
        if (event) {
          event.cancelBubble = true;
          event.returnValue = false;
        }

        var search = {};

        // Set desired types.
        var types = getTypes();
        if (types.length) {
          search.types = types;
        }

        // Set keyword.
        var keyword = document.controls.keyword.value;
        if (keyword) {
          search.keyword = keyword;
        }

        // Set ranking.
        if (!document.controls.rankbydistance.disabled &&
            document.controls.rankbydistance.checked) {
          search.rankBy = google.maps.places.RankBy.DISTANCE;
          search.location = map.getCenter();
        } else {
          search.rankBy = google.maps.places.RankBy.PROMINENCE;
          search.bounds = map.getBounds()
        }

        // Search.
        places.search(search, function(results, status) {
          if (status == google.maps.places.PlacesServiceStatus.OK) {
            clearResults();
            clearMarkers();
            for (var i = 0; i < results.length; i++) {
              var letter = String.fromCharCode(65 + i);
              markers[i] = new google.maps.Marker({
                position: results[i].geometry.location,
                animation: google.maps.Animation.DROP,
                icon: 'http://maps.gstatic.com/intl/en_us/mapfiles/marker' +
                    letter + '.png'
              });
              google.maps.event.addListener(
                  markers[i], 'click', getDetails(results[i], i));
              dropMarker(markers[i], i * 100);
              addResult(results[i], i);
            }
          }
        });
      }

      function clearMarkers() {
        for (var i = 0; i < markers.length; i++) {
          if (markers[i]) {
            markers[i].setMap(null);
            delete markers[i]

          }
        }
      }

      function dropMarker(marker, delay) {
        window.setTimeout(function() {
          marker.setMap(map);
        }, delay);
      }

      function addResult(result, i) {
        var results = document.getElementById('results');
        var tr = document.createElement('tr');
        tr.style.backgroundColor = i % 2 == 0 ? '#F0F0F0' : '#FFFFFF';
        tr.onclick = function() {
          google.maps.event.trigger(markers[i], 'click');
        };

        var iconTd = document.createElement('td');
        var nameTd = document.createElement('td');
        var icon = document.createElement('img');
        icon.src = result.icon;
        icon.className = 'placeIcon';
        var name = document.createTextNode(result.name);
        iconTd.appendChild(icon);
        nameTd.appendChild(name);
        tr.appendChild(iconTd);
        tr.appendChild(nameTd);
        results.appendChild(tr);
      }

      function clearResults() {
        var results = document.getElementById('results');
        while (results.childNodes[0]) {
          results.removeChild(results.childNodes[0]);
        }
      }

      function getDetails(result, i) {
        return function() {
          places.getDetails({
            reference: result.reference
          }, showInfoWindow(i));
        }
      }

      function showInfoWindow(i) {
        return function(place, status) {
          if (iw) {
            iw.close();
            iw = null;
          }

          if (status == google.maps.places.PlacesServiceStatus.OK) {
            iw = new google.maps.InfoWindow({
              content: getIWContent(place)
            });
            iw.open(map, markers[i]);
          }
        }
      }

      function getIWContent(place) {
        var content = '<table style="border:0"><tr><td style="border:0;">';
        content += '<img class="placeIcon" src="' + place.icon + '"></td>';
        content += '<td style="border:0;"><b><a href="' + place.url + '">';
        content += place.name + '</a></b>';
        content += '</td></tr></table>';
        return content;
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>

    <style type="text/css">
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        font-family: arial;
        font-size: 13px;
        overflow: hidden;
      }

      #container {
        margin-top: 6px;
        margin-left: 6px
      }

      #map_canvas {
        float: left;
        width: 320px;
        height: 406px;
        margin-top: 13px; 
      }

      #listing {
        float: left;
        margin-left: 1px;
        margin-top: 13px;
        width: 200px;
        height: 406px;
        overflow: auto;
        cursor: pointer;
      }

      #controls {
        padding: 5px;
      }
      .placeIcon {
        width: 16px;
        height: 16px;
        margin: 2px;
      }

      #results {
        border-collapse: collapse;
        width: 184px;
      }
    </style>
  </head>

  <body class="docs framebox_body">
    <div id="container">
      <div>
        <form name="controls">
          <div style="margin-top: 5px">
            Keyword:
          </div>
          <div style="margin-left: 9px">
            <input id="keyword" type="text" onkeyup="updateKeyword(event)"
                   onkeydown="blockEvent(event)" style="width:110px">
          </div>
          <div style="margin-top: 5px">
            Types:
          </div>
          <div style="margin-left: 9px">
            <input type="checkbox" name="type" value="store"
                   onclick="updateRankByCheckbox()" /> store<br/>
            <input type="checkbox" name="type" value="clothing_store"
                   onclick="updateRankByCheckbox()" /> clothing_store<br/>
            <input type="checkbox" name="type" value="restaurant"
                   onclick="updateRankByCheckbox()" /> restaurant<br>
            <input type="checkbox" name="type" value="lodging"
                   onclick="updateRankByCheckbox()" /> lodging<br>
            <input type="checkbox" name="type" value="subway_station"
                   onclick="updateRankByCheckbox()" />MTR Station<br>
          </div>
          <div id="rankbylabel" style="margin-top: 5px; color: #cccccc">
            <input type="checkbox" disabled="true"
                   name="rankbydistance" /> Rank by distance
          </div>
          <div style="margin-top: 5px">
            <input type="submit" value="Search" onclick="search(event)" />
          </div>
        </form>
      </div>
    <div id="map_canvas"></div>
    <div id="listing">
      <table id="results"></table>
    </div>
  </body>
</html> 
```

有人可以帮忙吗？请在这个问题上提供一些要点（指针）就足够了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T02:28:59.743

这就是我的做法。我不是这方面的专家，但这是我的代码。

首先，您可能需要将搜索调用从 function() 剥离到它自己的函数中。

我有类似的东西

```
placesServiceClass.search(request, placesCallback); 
```

在您的restuls处理回调中，只需执行类似...

```
function placesCallback(results, status, pagination) {

// process the resutls  
if (status == google.maps.places.PlacesServiceStatus.OK) {      
    for (var int = 0; int < results.length; int++) {    
        placesManager.addMarker(results[int], int);
    }

 } 

if (pagination.hasNextPage) {
    sleep:2;
    pagination.nextPage();
} 
```

谷歌文档指出您需要在下一页调用之间等待 2 秒，因此进入睡眠状态。

pagination.nextPage() 调用相同的回调，在我的例子中是 placesCallback()。

希望有帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-26T18:02:29.983

使用[雷达搜索](https://developers.google.com/maps/documentation/javascript/places#radar_search_requests)一次获得更多结果。然后，您可以调用 PlacesService.getDetails() 以获取有关每个地点的更多详细信息。

# sql - SQL批处理将不同的结果返回给RPC

> ID：11665688
> 
> 赞同：0
> 
> 时间：2012-07-26T08:52:17.683
> 
> 标签：sql, batch-file, ssms

我编写了一个存储过程，它从多个表中构建一个字符串，然后返回它。它可以从 SSMS 完美运行，SP 是从第三方软件调用的，它没有返回正确的值。

SP 的重点是生成对文件所做更改的资产标签。sp低于

ALTER PROCEDURE [dbo].[usp_ACREpdflibTAG] -- 在此处添加存储过程的参数 @SJID INT AS BEGIN DECLARE @Asset VARCHAR(2000) SET ANSI_NULLS OFF

SELECT @Asset = COALESCE(@Asset, '') + { fn CONCAT(tPdfChanges.ShortHand, '=1,') } 从 tPdfChanges WHERE SubJobID = @SJID

声明 @AssetTag VARCHAR(4000)

```
SET @AssetTag = (SELECT 
'@@@AssetTagStart@@@' + 
@Asset
+ 'Desc=' + a.sName
+ ',UPC=' + h.sBarcodeStd
+ ',Cat=' + CAST(b.GACategoryID AS VARCHAR(10))
+ ',Type=' + CAST(d.GAProductTypeID AS VARCHAR(10))
+ ',PackFormat=' + CAST(f.GAPackTypeID AS VARCHAR(10))
+ ',DispDate=' + ISNULL(CONVERT ( varchar  , g.DCompleted ,105 ), '')
+ '@@@AssetTagEnd@@@'
FROM
tSubJob a   
WHERE
a.ID = @SJID)

select @AssetTag
END 
```

我不得不从查询中删除表名，因为它们对我工作的业务很敏感。

从 SSMS 运行时，将返回以下内容：

```
@@@AssetTagStart@@@CutChg=1,DesChg=1,UPCChg=1,ProChg=1,IngChg=1,NutChg=1,StoreChg=1,CookChg=1,TtlChg=1,LegChg=1,AgyChg=1,WeightChg=1,CountryChg=1,ImpChg=1,OtherChg=1,Desc=Testing Triggers,UPC=,Cat=27,Type=3,PackFormat=38,DispDate=25-07-2012@@@AssetTagEnd@@@ 
```

当第三方软件执行它时，将返回以下内容：

```
@@@AssetTagStart@@@CutChg=1,Desc=Testing Triggers,UPC=,Cat=27,Type=3,PackFormat=38,DispDate=25-07-2012@@@AssetTagEnd@@@ 
```

如您所见，它仅匹配资产标签第一部分中的一个更改。

我使用分析器查看发生了什么，当我从 SSMS 执行它时，它是一个 RPC，当它从第三方软件执行时，它是一个 SQL Batch 查询。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:46:13.787

我自己刚刚解决了这个问题，我查看了分析器中的进程 ID，进一步向上看，第三方软件将行数设置为 1，我重置了它，一切正常。

# c# - 如何获取特定于文化的短日期字符串？

> ID：11665696
> 
> 赞同：0
> 
> 时间：2012-07-26T08:52:56.853
> 
> 标签：c#, wpf

我想要文化格式的短日期。我与文化约会，但也只想要约会，而不是时间。我正在使用`IValueConverter`它。

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    var item = (DateTime)value;

    if (item != null)
    {
        return item.ToString(culture);
    }

    return null;
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-26T09:00:58.287

这将为您提供基于当前文化的信息，如果您想要一种也可以完成的特定文化......

```
string format = CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern;
String Date = DateTime.Now.ToString(format); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T09:02:30.467

您的回答也是正确的，但我找到了解决方案，谢谢。

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    var item = (DateTime)value;
    if (item != null)
    {
        return item.ToString(culture.DateTimeFormat.ShortDatePattern, culture);
    }
    return null;
} 
```

# actionscript-3 - 从循环影片剪辑中隐藏孩子

> ID：11665697
> 
> 赞同：0
> 
> 时间：2012-07-26T08:53:01.517
> 
> 标签：actionscript-3, rendering, movieclip

我有一个多次使用的 MovieClip，这个 MovieClip 每 10 帧循环一次。我需要在一些但不是所有这些剪辑上隐藏一个子 MovieClip。当我尝试这个时，一旦电影剪辑循环并回到第一帧，它就会重新出现！

如果我这样做`child.visible = false`或`parent.removeChild(child)`

我什至尝试过，将它隐藏在 EnterFrame 处理程序的每一帧上，但它随后出现在第 2 帧上。

我知道我可以使用框架脚本，因为该代码将在渲染之前而不是之后运行（与 EnterFrame 一样）但我真的不想这样做（除非它是唯一的选择）

编辑：我试图隐藏的这个子 MovieClip 确实存在于每一帧上，而且没有中断，只是想我会提到这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:16:28.543

首先，应该只有一个上述“**子**”电影剪辑的实例。

去做这个，

*   添加一个新层并将影片剪辑放入其中。

*   在该图层中不再添加关键帧。仅添加空白帧。

*   `.visible`现在使用or属性控制可见`.alpha`性。

*   不要使用`parent.removeChild()`，因为它会删除舞台上唯一的实例。

# android - 键盘上方的 android 按钮，只有一个滚动视图和相对视图

> ID：11665704
> 
> 赞同：3
> 
> 时间：2012-07-26T08:53:46.027
> 
> 标签：android, android-layout

我有这个代码

```
<ScrollView>
<RelativeView>
...
</RelativeView>
</Scrolview> 
```

是否可以使按钮浮动在键盘顶部，而无需更改为

```
<RelativeView>
<button />
<ScrollView>
     <RelativeView>
     </RelativeView>
</ScrollView>
</RelativeView> 
```

因为 android 建议，层数和视图越少，性能越好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:45:01.313

像这样在您的 manifest.xml 文件中使用`adjustResize`或：`adjustPan`

```
<application
      android:icon="@drawable/icon"
      android:label="@string/app_name" >
       <activity
                .....
                android:windowSoftInputMode="adjustResize" >
                <intent-filter >
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
               </intent-filter>
       </activity>
</application> 
```

# android - 如何在 ViewHolder 中存储原始值？

> ID：11665708
> 
> 赞同：1
> 
> 时间：2012-07-26T08:53:50.520
> 
> 标签：android, android-listview, xamarin.android

我正在使用带有 CursorAdapter 的 ViewHolder 模式来填充 ListView。我试图在我的 ViewHolder 中存储一个整数，该整数对应于我的光标列中的一个值。稍后我想遍历我的 ListView 中的所有项目并提取这个值。

但是，当 CursorAdapter 回收我的视图时，它似乎不会更新我的 ViewHolder 中的整数值。

这是我的CursorAdapter 中的相关代码（我使用的是Mono For Android，所以代码是C#，但思路是一样的）。

```
 public override void BindView(View view, Context context, ICursor cursor)
    {
        var viewHolder = view.Tag as ViewHolder;

        if (viewHolder.GroupCheckedTextView != null)
        {
            viewHolder.GroupCheckedTextView.Text = cursor.GetString(ColumnMapping["Name"]);
        }

        if (viewHolder.FieldTextView != null)
        {
            viewHolder.FieldTextView.Text = cursor.GetString(ColumnMapping["Value"]);
            viewHolder.LabelTextView.Text = cursor.GetString(ColumnMapping["Label"]) ?? cursor.GetString(ColumnMapping["TypeLabel"]);
        }

        // I tried updating it manually, but it doesn't stick...
        //viewHolder.GroupId = cursor.GetInt(ColumnMapping["GroupId"]);
        //view.Tag = viewHolder;
    }

    public override View NewView(Context context, ICursor cursor, ViewGroup parent)
    {
        var inflator = LayoutInflater.FromContext(context);
        View view = null;

        if (IsNewGroup(cursor, cursor.Position))
        {
            view = inflator.Inflate(Resource.Layout.Group, parent, false);
        }
        else
        {
            view = inflator.Inflate(Resource.Layout.Field, parent, false);
        }

        var viewHolder = new ViewHolder(view);
        viewHolder.GroupId = cursor.GetInt(ColumnMapping["GroupId"]);
        view.Tag = viewHolder;

        return view;
    } 
```

我想我明白为什么了。ViewHolder 模式更多的是关于重用视图，因此您不必再次搜索它们，但是有没有办法扩展它以使用我想要的东西？我能想到的唯一解决方案是创建一个隐藏视图并将这个整数填充到它的文本字段中，我可以稍后检索它，但我希望有一个不那么 hacky 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:10:32.777

> ViewHolder 模式更多的是关于重用视图，因此您不必再次搜索它们，但是有没有办法扩展它以使用我想要的东西？

没错，持有者模式用于在每次需要显示一行时缓存查找视图。也许我不明白您要做什么，但是请注意：

> 我试图在我的 ViewHolder 中存储一个整数，该整数对应于我的光标列中的一个值。稍后我想遍历我的 ListView 中的所有项目并提取这个值。

为什么你不能简单地获得对下划线的引用`Cursor`（a`CursorAdapter`有`getCursor`方法），跳过它并提取你想要的值（在阅读你的代码之后，这似乎是`id`行的值）？您始终可以在适配器内部存储来自游标的所需值的数组/列表。此数组/列表将在 中更新，`bindView`以便您在其中拥有正确的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:02:14.857

你可以把它塞进`tag`你的`GroupCheckedTextView`.

# joomla2.5 - 在 Joomla 2.5 中制作页面从数据库中获取数据并导出到 excel

> ID：11665709
> 
> 赞同：0
> 
> 时间：2012-07-26T08:53:53.950
> 
> 标签：joomla2.5

我使用扩展在 Joomla 中开发了一个应用程序。我使用 fabrik 进行数据输入、数据提取和 CSV 提取。问题出在 fabrik 中，我得到的数据是 CSV 格式而不是 Excel 格式。现在我的要求是：我想从头开始完全自己制作一个页面，该页面从已经通过 fabrik 输入并显示在页面上的数据库中获取数据。

我不知道如何制作自己的页面来连接到数据库以获取值。我是否需要仅使用 .php、.xml 和 index.html 文件创建模块？还是我还需要创建一个控制器？我应该在哪里保存我的文件？

请帮助我了解：

*   我需要制作什么文件。
*   我应该把这些文件放在哪里。

对于文件的内容，我将在互联网上检查。

一个问题是我是否必须设计完整的模型视图控制器才能获取和导出已保存的数据。我只想要我现有网站上的一个链接，它将已经保存的数据导出到 excel。请帮助..对于 php，我通过堆栈溢出得到了很多帮助，但对于 joomla 没有太多帮助。请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:55:21.000

好的，到此为止。

检查您的要求。我认为您需要创建一个组件，并且您需要熟悉 PHP 和 SQL。但是，当您继续编写组件时，您可以了解这一点。组件基于 MVC 设计模式。但是，您可以仅使用 V 和 C 编写一个足够简单的组件。

要创建一个组件，请使用：

[http://cocoate.com/jdev/component/step-2](http://cocoate.com/jdev/component/step-2)

安装下面提到的组件，然后根据您的要求修改视图。你可以在一两天内学会所有这些。之后，您就可以为新组件重用相同的代码了。 [http://cocoate.com/sites/cocoate.com/files/com_coco_real_estate-0.0.2.zip](http://cocoate.com/sites/cocoate.com/files/com_coco_real_estate-0.0.2.zip)

# objective-c - 验证 if 语句语法

> ID：11665714
> 
> 赞同：0
> 
> 时间：2012-07-26T08:54:08.460
> 
> 标签：objective-c, cocoa

system1我想验证这个语法（当按下无线电组时）。这个语法是否正确：

```
if([[sender selectedCell ] tag]==1) 
        [prefs addChild:element(@"System", [NSString stringWithUTF8String:"system1"])];
    if([[sender selectedCell] tag]==2) 
        [prefs addChild:element(@"system", [NSString stringWithUTF8String:"system2"])];
    if([[sender selectedCell] tag]==3) {        
        [advancedButton setEnabled:NO];

        [notifs addChild:element(@"UploadedFiles", [NSString stringWithUTF8String:"YES"])];
        [notifs addChild:element(@"DeletedFiles", [NSString stringWithUTF8String:"YES"])];

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:57:24.057

是的，那是正确的。`tag`属性只是一个`NSInteger`，因此您可以将其与 1 进行比较。

* * *

极客注意：如果您尝试编译该*确切*代码，则会产生错误，因为注释（//）适用于该行中的任何内容并包含您的右花括号（**编辑**：OP 编辑​​了问题，所以我的极客笔记没有再申请）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:08:27.417

```
if([[sender selectedCell] tag]==1) {/* do something */} 
```

:)

尽管如此，它应该没问题。

魔鬼在细节中。sender 只是一个 id 对象，因此不超过 NSObject *。您不能在不进行类型转换或收到编译器警告的情况下访问该方法。当您使用 ARC 时，它甚至可能无法编译。

完整图片：

```
(IBAction) performMyAction:(id) sender {

  if ([sender isKindOfClass:[MyVeryOwnClass class]]) {

    MyVeryOwnClass myVeryOwnObject = (MyVeryOwnClass *) sender;

    if([[myVeryOwnObject selectedCell] tag]==1) {
      /* here goes the business logic */

     }
  }
} 
```

还有其他存档相同的方法。您可以只对 stender 进行类型转换，而无需将其分配给临时对象引用。或者您可以使用 performToSelector: 和 performSelector 来访问 selectedCell。出于某种原因，我更喜欢这种方式。我觉得这可读性很好，调试也很容易。

# java - Hibernate 对象映射导致 Liquibase 出现 SQL 错误 (errno: 150)

> ID：11665718
> 
> 赞同：4
> 
> 时间：2012-07-26T08:54:20.647
> 
> 标签：java, mysql, hibernate, liquibase

我面临以下问题：

对于我的 Java 项目，我使用 SpringFramework、Maven 和数据库管理 Hibernate 3.6 和 Liquibase 进行变更管理。

现在我面临一个困扰我的问题。它与应从 Hibernate 创建的外键约束有关。

2 类具有具有关系的对象实体。观看以下代码：

```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public class SearchSingle extends OfferSearch implements Comparable<SearchSingle>,   OfferSingle {
    private static final long serialVersionUID = 7618785527154737982L;

@ManyToOne
private Route routeOutbound;

@ManyToOne
private Route routeWayBack;
...
...
} 
```

现在另一个类有相应的对象：

```
@JsonAutoDetect
@Entity
public class Route extends PersistentObject {

private static final long serialVersionUID = -4611710805557036851L;
@OneToMany(mappedBy = "routeOutbound")
@Cascade(CascadeType.SAVE_UPDATE)
private List<SearchSingle> searchesOutbound;

@OneToMany(mappedBy = "routeWayBack")
@Cascade(CascadeType.SAVE_UPDATE)
private List<SearchSingle> searchesWayBack;

...
} 
```

在这里查看我在 tomcat 日志中得到的错误：

> SEVERE 26.07.12 10:12:liquibase: 更改集类路径:dbchangelog.xml::1343227727949-11::mirco (生成) 失败。错误：执行 SQL 更改表`ridesingle`添加约束 `FKD5C95340EE9D2F8`外键 ( `routeoutbound`) 引用`route` ( `id`) 时出错执行 SQL ALTER TABLE `ridesingle`ADD CONSTRAINT `FKD5C95340EE9D2F8`FOREIGN KEY ( `routeoutbound`) REFERENCES `route`( `id`) ON UPDATE NO ACTION ON DELETE NO ACTION: Can't create table 'backendtest.#sql-454_5f' (errno: 150)

最让我困惑的是“无法创建表：后端测试”。这根本没有意义，因为 backendtest 是数据库名称而不是表。当我重新部署项目并且 Liquibase 尝试将更改从 migrationdb 映射到项目使用的数据库时，会出现此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:18:46.400

也许 Liquibase 或其配置存在问题：一些 DBMS 使用`#`临时表前缀的事实使我相信 Liquibase 或 MySQL 或两者之间的某个层尝试`ALTER TABLE`通过“复制-删除-创建-复制”执行过程中创建一个临时表。

发出的用户是否在数据库中`ALTER TABLE`具有`CREATE [TEMPORARY] TABLE`特权`backendtest`？

# iphone - 更改工具栏的色调颜色

> ID：11665719
> 
> 赞同：0
> 
> 时间：2012-07-26T08:54:22.013
> 
> 标签：iphone, ios, interface, toolbar, tint

我想更改工具栏中按钮的色调。

我见过[这个问题](https://stackoverflow.com/questions/3151549/uitoolbar-tint-on-ios-4)，但我不知道如何访问工具栏对象......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:03:09.753

```
self.navigationController.navigationBar.tintColor = [UIColor colorWithRed:0.83 green:0.43 blue:0.57 alpha:0.5]; 
```

考虑到您正在视图控制器中编写这行代码...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:03:40.377

我发现这个[Tint UIButton 和 UIBarButtonItem](http://charles.lescampeurs.org/2011/02/10/tint-color-uibutton-and-uibarbuttonitem)希望对您有所帮助！

# sql - SQL Server 排序基于两列 - 父和子

> ID：11665720
> 
> 赞同：1
> 
> 时间：2012-07-26T08:54:22.190
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2005

我在 SQL Server 中有一个排序问题。

我的结果集是主列和辅助列的结果集。辅助列是指主列的子节点，例如，它是稍后出现在结果集中的主列的 id

```
Primary Column | Secondary Column
1                  NULL
1                  2
1                  3
3                  NULL
3                  NULL
2                  NULL
2                  NULL
2                  7 
```

我需要 SQL SELECT 按主列排序，但是在有辅助列的地方注入与主列下的该 id 相关的行，例如上面的结果集看起来像。

```
Primary Column | Secondary Column
1                  NULL
1                  2
2                  NULL
2                  NULL
2                  7
1                  3
3                  NULL
3                  NULL 
```

在不使用 CURSOR 的情况下，这在 SQL 中是否可行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:31:26.680

试试这个：

```
with cte as (select *,ROW_NUMBER() over(partition by Primary_Column order by isnull(Secondary_Column,0)) as rownum 
    from test_order
    where Secondary_Column is null or Secondary_Column not in (select Primary_Column from test_order)
), 
cte1 as (
    select *,ROW_NUMBER() over(partition by Secondary_Column order by isnull(Primary_Column,0))-1 as rownum
    from test_order
    where Secondary_Column  in (select Primary_Column from test_order)
),
cte2 as (select 'c1' [type],* from cte
    union all
    select 'c2' [type],* from cte1)
    select Primary_Column,Secondary_Column from cte2
    order by case when [type]='c1' then Primary_Column 
                                else Secondary_Column end,rownum 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/f2e44/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T11:11:41.280

一种方法是使用自联接：

```
select primary, secondary
from (select t.primary, t.secondary,
             max(case when tsub.primary is not null then 1 else 0 end) as hasprimary
      from t left outer join
           t tsub
           on t.secondary = t.primary
      group by t.primary, t.secondary
     ) a
order by (case when hasprimary = 1 then secondary else primary end),
         hasprimary desc,
         secondary 
```

这会根据是否有匹配的行来计算首先使用哪个 id - 主要或次要。第二个子句将“不寻常的”放在第一位，然后是其余的。

# ruby - YARD 不替换 `code` 是否正常code？

> ID：11665723
> 
> 赞同：23
> 
> 时间：2012-07-26T08:54:47.337
> 
> 标签：ruby, markup, rdoc, yard

我刚刚开始使用 YARD 来记录我的 Rails 应用程序。我没有指定任何特定的标记处理程序，但我预计 `code` 会被转换为`code`，这似乎不会发生。这是正常行为吗？我是否必须添加一些额外的选项才能完成这项工作？谢谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-27T06:33:47.623

我想语法与markdown（markdown vs rdoc）有点不同。使用`'+'`作品。+code+ 呈现在一个`<code>`块中。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-27T09:44:32.043

在 GitHub 上，我习惯于使用反引号进行内联代码注释。因此，经过一些研究，我发现了以下非常好的解决方案。

*   将`redcarpet`gem 添加到您的 Gemfile
*   运行`bundle`命令
*   添加`--markup=markdown`到您的`.yardopts`文件中
*   使用启动 YARD 服务器`yard server --reload`
*   在浏览器中打开 localhost:8808

现在你可以像在 GitHub 上一样使用语法，例如

```
```ruby
def bla; puts 'bla'; end
``` 
```

或者

```
`this is inline code` 
```

好的！:)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-15T00:57:16.017

如果没有降价，YARD 将显示缩进行的代码块，例如

```
 # This is a useful POSIX regex:
  #   [[:lower:]]{2}[[:digit:]]{3}[[:lower:]]{2}[[:digit:]]{4} 
```

两个缩进空间似乎就足够了。

# maven - 如果代码覆盖率低于构建之前，如何配置 hudson 失败？

> ID：11665728
> 
> 赞同：1
> 
> 时间：2012-07-26T08:55:16.793
> 
> 标签：maven, hudson

如果代码覆盖率低于以前的构建，有没有办法在 hudson 上配置 maven 构建失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:41:03.120

与这个问题有关

*   [如果违反声纳阈值，我如何让 Hudson/Jenkins 失败？](https://stackoverflow.com/questions/8942960/how-do-i-make-hudson-jenkins-fail-if-sonar-thresholds-are-breeched/8949974#8949974)

[Sonar](http://www.sonarsource.org/)有一个 Hudson 插件。代码覆盖率是标准指标之一，您可以根据任何质量指标定义阈值。

# java - 关于守护线程为非守护线程提供一些服务

> ID：11665729
> 
> 赞同：0
> 
> 时间：2012-07-26T08:55:21.100
> 
> 标签：java, multithreading, threadpool

我有一个查询是我在下面开发了一个名为线程一和线程二的多个线程的代码，下面是代码..

类 multip 实现 Runnable {

```
public void run() {
    for (int i = 0; i < 20; i++) {
        try {

        Thread.sleep(500);
                System.out.println(Thread.currentThread().getName());
                System.out.println("i");
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
}

public class MultiThread3 {
    public static void main(String... a) {
        multip obj = new multip();
        Thread t1 = new Thread(obj);
        t1.currentThread().setName("one");
        t1.start();
        Thread t2 = new Thread(obj);
        t2.currentThread().setName("two");
        t2.start();

    }

} 
```

现在我希望将线程二设置为守护线程，它应该为线程一提供一些服务，它可以是任何类型的服务，但最后我想要实现的是守护线程为非守护线程提供一些服务。请告知如何实现这一点。问题是关于守护线程如何为非守护线程提供服务..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:11:35.310

`t1`例如，制作一个守护进程：

```
Thread t1 = new Thread(obj);
t1.setName("one");
t1.setDaemon(true);
t1.start(); 
```

笔记：

*   `setDaemon`需要在线程启动前调用
*   `t1.currentThread().setName("one");`最肯定不会做你想做的事。它将主线程的名称设置为“one”，而不是 t1 的名称。请参阅我上面的代码，了解您可能的意思。
*   这些信息可以很容易地在[Thread 的 javadoc 中](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)找到，这应该是您搜索此类信息时首先看到的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:40:08.967

> 问题是关于守护线程如何为非守护线程提供服务

我会使用执行器服务。如果你想从守护线程返回一个值，你可以使用 a`Callable<ReturnType>`而不是 a `Runnable`。

```
// creating a thread pool.
ExecutorService service = Executors.newSingleThreadExecutor(new ThreadFactory() {
    @Override
    public Thread newThread(Runnable r) {
        // creating a thread.
        Thread two = new Thread(r, "two");
        // making it a daemon thread.
        two.setDaemon(true);
        return two;
    }
});

for(int i=0;i<10;i++)
    // creating a task and submitting it.
    service.submit(new Runnable() {
        @Override
        public void run() {
            System.out.println("["+Thread.currentThread().getName()+"] - Hello World.");
            Thread.yield();
        }
    });
service.shutdown(); 
```

印刷

```
[two] - Hello World.
[two] - Hello World.
[two] - Hello World. 
```

首先，它创建一个带有工作队列的线程池。线程池有一个创建线程的因素，在这种情况下，它具有一个给定的名称，它是一个守护进程。

其次，有一个循环将 10 个任务添加到队列中以供执行者线程执行。

最后它在服务完成后停止服务（这很少需要）

# java - javap -c 对类文件有什么作用？

> ID：11665730
> 
> 赞同：2
> 
> 时间：2012-07-26T08:55:21.847
> 
> 标签：java, javac, javap

实际上，这个问题有点宽泛。我知道 javac 将 java 文件编译成字节码，一个类文件。所以，类文件应该包含 jvm 指令和所有这些。另一方面，查看这些指令的唯一方法是使用 javap -c 反编译类文件。但它不是反编译，对吧？因为如果是反编译，就会产生java文件。所以，我的猜测是 javac 编译 java 文件两次（这实际上不是真的，但为了简单起见，我们假设），首先是 jvm 指令，然后是字节码，所以 javap -c 从字节码反编译为 jvm 指令。Jvm 应该理解字节码，因此它不能理解指令。我在这里有点困惑。有人可以解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T09:01:12.797

Javap 不会*反编译*字节码，它会*反汇编*它。为了解释差异，我们可以换一种方式来转换术语：编译是将人类可读的代码翻译成字节码，而汇编是将汇编指令翻译成字节码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T09:02:19.567

`javap`显示人类可读形式的 JVM 指令。JVM指令是JVM的代码。显示的是`javap`汇编语言。

如果您想以更易读的形式查看字节码，请使用 java 反编译器，例如[jad](http://www.varaneckas.com/jad/)。有几个 jad 的 UI 包装器，包括 Eclipse 的插件。

# ruby-on-rails - Rails - 每个请求的数据库连接，基于用户凭据

> ID：11665733
> 
> 赞同：3
> 
> 时间：2012-07-26T08:55:41.363
> 
> 标签：ruby-on-rails, session, exchangewebservices

我们有以下问题：我们的应用程序通过其交换 Web 服务 (EWS) 与交换接口，您可以将其视为只是一个花哨的数据库。例如，我们有一个 Appointment 模型，它应该与 Exchange 上的日历同步。现在 EWS 要求每个连接的用户凭据。这会产生两个问题：

*   我们如何获得每个请求的用户凭据？
*   模型应该如何与 EWS 交互？

我们不想做的是在需要与 EWS 交互的每个操作中询问用户的密码。我们也不想牺牲安全性。

我们目前的解决方案：

我们将来自用户的凭据（我们在登录期间获得）存储在会话中。这很难看，因为这意味着用户名和密码存储在客户端计算机上的 cookie 中 - 我知道它是加密的，但它仍然很难看。

然后在控制器中，我们懒惰地创建一个 EWS 客户端并将其传递给每个需要与 EWS 交互的模型实例。这很丑陋，因为这意味着与其他数据库操作不同（您可以将 EWS 视为另一个数据库），这意味着您必须为每个操作执行额外的步骤。

示例（简化/精简）：

```
# app/models/appointments.rb
class Appointment
  attr_writer :ews

  def pull_from_exchange
    exchange_event = ews.events[exchange_id, exchange_change_key]
    # …update from exchange_event.to_hash…

    self
  end

  def push_to_exchange
    exchange_event = ews.events.new(to_hash_for_exchange)
    exchange_event.save
    update_attributes(exchange_id: exchange_event.id, exchange_change_key: exchange_event.change_key)

    self
  end

  def ews
    raise EwsClientNotProvided unless @ews
    @ews
  end

  def save_and_push!
    self.class.transaction do
      save!
      push_to_exchange
    end
  end
end

# app/controllers/appointments_controller.rb
class AppointmentsController < ApplicationController
  def create
    @appointment = Appointment.new(params[:appointment])
    @appointment.ews = ews
    @appointment.save_and_push!
  end

private
  def ews
    @ews ||= Ews.client(session.slice(:username, :password, :email).merge(endpoint: ews_endpoint))
  end

  def ews_endpoint
    Rails.application.configuration.ews_endpoint
  end
end 
```

我对处理这种情况的替代和/或更好的设计感兴趣。

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:25:26.387

对于数据库连接，我建议`Thread.current[]`在 rackapp 中，伪全局变量有时是必要的。

将用户凭据存储在客户端是最佳解决方案，您可以使用另一种加密方式为密码字段添加趣味，以保护其免受暴力破解。这是因为 cookie 是经过哈希处理的，因此可以暴力破解它，因为可以在本地检查解密成功的位置。如果您将凭据存储在服务器上的某个位置，那么如果服务器被黑客入侵，所有密码都会被泄露。如果您将数据存储在客户端，它们会更安全，因为您需要这两个部分（服务器上的密钥和 cookie）。

# php - 我的 PHP 文件不执行 else 条件下的代码

> ID：11665736
> 
> 赞同：0
> 
> 时间：2012-07-26T08:56:02.903
> 
> 标签：php

我有以下 PHP 代码来服务我的移动应用程序以将一些数据插入数据库，但是当它进入 else 条件时，它无法将邮件发送给我自己。我很确定我的邮件功能可以发送，因为我已将代码移动到另一个 PHP 文件进行测试，那么为什么它在这里不起作用？所以我尝试它是否可以创建一个txt文件，但执行后也没有文件出现。

```
$result1 = mysql_query("SELECT COUNT(*) FROM Log") or die('Error! ' . mysql_error());
$query = "SELECT `Type` FROM `Log` WHERE `TechID` = '".$TechID."' ORDER BY LogTime DESC LIMIT 1";
$result2 = mysql_query($query) or die('Error! ' . mysql_error());

while($row1 = mysql_fetch_array($result1))
{
      $count = $row1['COUNT(*)'];
      if(mysql_num_rows($result2) > 0)
          {
         while($row2 = mysql_fetch_array($result2))
             {
            if($row2['Type']!="Checkin")
                {
               $count = $count+1;
               $timezone = "Asia/Hong_Kong";
               if(function_exists('date_default_timezone_set')) 
                  date_default_timezone_set($timezone);
               $Time = date('Y/m/d H:i');
               mysql_query("INSERT INTO Log (LogID, TechID, ClientID, SiteID, LogTime, Type)
                    VALUES(".$count.", '".$TechID."', ".$ClientID.", ".$SiteID.", '".$Time."', 'Checkin')");
            }
                else
                {
                 mail('me@gmail.com', 'test mail', 'Just a test');
                 $content = "First folder"; 
                 $fp = fopen("C:/xampp/htdocs/Me/checking.txt","wb"); 
                 fwrite($fp,$content); 
                 fclose($fp);
            }
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:02:56.443

做一个 var_dump() `$row2['Type']`：

```
 while($row2 = mysql_fetch_array($result2)){
           var_dump($row2['Type']);
           if($row2['Type']!="Checkin"){ 
```

并查看 Type 键真正包含的内容，即使是空格也会使该测试失败（或者您可以尝试使用`if(trim($row2['Type']) != "Checkin"){`）

# vba - 形状/OLE 层何时更新？

> ID：11665737
> 
> 赞同：0
> 
> 时间：2012-07-26T08:56:05.227
> 
> 标签：vba, excel

我有一个带有文本“Now Loading...”和背景颜色#000000 alpha=0.5 的形状，与 FHD 屏幕一样大。

我打算在用户执行耗时的功能时显示它（如您所见，从其他地方加载数据和脏工作），并在 vba 完成其工作后再次隐藏它。

但它一开始根本不显示，只是在vba完成后像flash一样再次显示和隐藏。

是的，我用 MsgBox 一路检查，真的，只在最后出现和隐藏。

问题：

1）那么这只是发生在我身上吗？

2）如果（1）不是，为什么会发生这种情况？形状/OLE 图层是否只在末尾刷新（*1）？技术细节将不胜感激。

3）如果我坚持让这个形状完成它的工作，在 Excel 2007 中可能吗？如何？

4) 替代解决方案(*3)？只是不要告诉我。

```
Sheets("Sheet1").Range("A1").Value = "Now Loading..."
'balabala
Sheets("Sheet1").Range("A1").Value = "Finish!" 
```

*1）我的意思是“最后刷新”，Excel 收集所有形状隐藏/显示事件并一次执行。所以如果我在一些耗时的函数中保持隐藏和显示相同的形状，结果是眨眼眨眼~

*2) 下面的示例代码。我可以分享的最短的。`'Notes`让你了解我想要做什么，`MsgBox`向你展示我的检查点。

```
Sub Item_Genre_Reset_Revise()
'↓ Show the loading notification.
Sheets("Item.Genre").Shapes("OLE_Loading").Visible = True
MsgBox "I thought the shape would show now, but didn't."

'↓ Merge 3 pieces into 1 piece.
Application.ScreenUpdating = False
Sheets("Item.Genre").Range("AJ5:AL37").Value = Sheets("Item.Genre").Range("Q5:S37").Value
Sheets("Item.Genre").Range("AJ38:AL70").Value = Sheets("Item.Genre").Range("V5:X37").Value
Sheets("Item.Genre").Range("AJ71:AL103").Value = Sheets("Item.Genre").Range("AA5:AC37").Value
MsgBox "No. :("

'↓ Sort the mergerd one.
ActiveWorkbook.Worksheets("Item.Genre").Sort.SortFields.Clear
ActiveWorkbook.Worksheets("Item.Genre").Sort.SortFields.Add Key:=Range("AJ5:AJ103"), _
    SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
ActiveWorkbook.Worksheets("Item.Genre").Sort.SortFields.Add Key:=Range("AK5:AK103"), _
    SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
ActiveWorkbook.Worksheets("Item.Genre").Sort.SortFields.Add Key:=Range("AL5:AL103"), _
    SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
With ActiveWorkbook.Worksheets("Item.Genre").Sort
    .SetRange Range("AJ4:AL103")
    .Header = xlYes
    .MatchCase = False
    .Orientation = xlTopToBottom
    .SortMethod = xlPinYin
    .Apply
End With
MsgBox "No. :( :("

'↓ Reload sorted items from internal memory to 3 pieces, as to give up all revise too for another function.
Call Item_Genre_Escape_Internal
MsgBox "No. :( :( :("

'↓ Reset revise counter.
Sheets("Item.Genre").Range("T41").Value = 0
MsgBox "No. :( :( :( :("

Application.ScreenUpdating = True

'↓ Hide the loading notification.
Sheets("Item.Genre").Shapes("OLE_Loading").Visible = False
MsgBox "Now the shape flash!"
End Sub

Sub Item_Genre_Escape_Internal()
Sheets("Item.Genre").Range("Q5:T37").Value = Sheets("Item.Genre").Range("AJ5:AM37").Value
Sheets("Item.Genre").Range("V5:Y37").Value = Sheets("Item.Genre").Range("AJ38:AM70").Value
Sheets("Item.Genre").Range("AA5:AD37").Value = Sheets("Item.Genre").Range("AJ71:AM103").Value
Sheets("Item.Genre").Range("T41").Value = 0
End Sub 
```

*3) 每张纸的地球设置。

```
Application.DisplayFormulaBar = False
ActiveWindow.DisplayHeadings = False
ActiveWindow.DisplayHorizontalScrollBar = False
ActiveWindow.DisplayVerticalScrollBar = False
Application.DisplayStatusBar = False
ActiveWindow.DisplayWorkbookTabs = False
Worksheets("Item.Genre").Protect Password:="******", _
    UserInterfaceOnly:=True 
```

非常感谢你。

解决方案：

添加`Application.Wait Now + TimeValue("00:00:01")`到每个`Sheets("Item.Genre").Shapes("OLE_Loading").Visible = True`. 形状会按设计显示，但仍有 1~2 秒的延迟。不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:34:42.277

我编辑了我的回复，我相信这正是您正在寻找的。
事实上，我注意到当您调用另一个子例程时，形状不会显示。
尽管如此，引入 1 秒的“等待”可以解决问题。

```
Sub Shapes()

Dim oShape              As Shape

Application.ScreenUpdating = True

Set oShape = ThisWorkbook.Sheets(1).Shapes("Oval 1")
oShape.Visible = msoTrue

Application.Wait Now + TimeValue("00:00:01")

Call Other_Sub

oShape.Visible = msoFalse

End Sub

Sub Other_Sub()

Application.Wait Now + TimeValue("00:00:05")

End Sub 
```

如果你得到预期的结果，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T06:57:39.063

更改`width`，然后形状会刷新。样本：

```
ThisWorkbook.Sheets(1).Shapes("Oval 1").DrawingObject.Width = xxx 
```

# testing - 使用 Autohotkey 找不到文本

> ID：11665741
> 
> 赞同：3
> 
> 时间：2012-07-26T08:56:21.250
> 
> 标签：testing, autohotkey

我正在尝试使用 AutoHotKey 对应用程序进行一些基本的 UI 测试。我想测试一个添加用户的“添加”按钮。我试图通过检查用户名是否添加到相关列来验证添加测试。但是，我根本无法检查用户名是否在列中，因为没有任何窗口控件被识别为我使用 WinGetText。仅对父窗口本身使用 WinGetText 是行不通的。关于做什么/如何更改验证过程的任何建议？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T11:51:24.540

你是通过思杰吗？如果是这样，windows Spy 将无法看到父 citrix 窗口（按设计）。

我处理您的情况的方式是如果控件能够选择文本，我将其复制到剪贴板，然后根据我的变量检查剪贴板值...

# firefox - 图片未在 Firefox 和 Chrome 中显示

> ID：11665745
> 
> 赞同：0
> 
> 时间：2012-07-26T08:56:28.603
> 
> 标签：firefox, google-chrome, explorer, jpeg

此高分辨率 JPEG 图像在 FireFox 和 Chrome 中无法正确显示，但在 IE 中打开 [http://www.irmatenbrinke.nl/images/stories/pers/MF76601.jpg](http://www.irmatenbrinke.nl/images/stories/pers/MF76601.jpg)

我找不到问题所在。一些指针将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:58:23.873

您的网络服务器`content-type`由于某种原因发送了错误的标头：

```
text/html 
```

代替

```
image/jpeg 
```

您或您的服务器管理员将需要解决此问题。也许您在某处有一个内容类型说明错误的 .htaccess 文件。

# ios - 从主线程调用的方法中调用方法

> ID：11665750
> 
> 赞同：0
> 
> 时间：2012-07-26T08:56:38.833
> 
> 标签：ios, multithreading, background-process, performselector

我已经从 appDelegate 调用了一个类方法，如下所示：

```
 RankingAndSMProcess *process = [RankingAndSMProcess alloc];

    [process performSelectorInBackground:@selector(DoRankingAndSocialMediaProcessing) withObject:nil];

    [process release]; 
```

此方法调用其他方法：

```
 @try {
         [self GoForRankingProcess];
         [self updateItemsForPeerindex];
         [self updateItemsForKloat];
         [self updateItemsForKred];
     }
     @catch (NSException *exception) {
         NSLog(@"An Error has been occured:%@", exception);
     }
     @finally { 
         [items release];
         [profile release];
     } 
```

从 RankingAndSMProcess 中的 DoRankingAndSocialMediaProcessing 方法中调用的所有方法都必须以与后台线程上的 DoRankingAndSocialMediaProcessing 相同的方式调用吗？或者这里还有另一个潜在的问题？

目前我认为没有任何处理方法被解雇，因为没有收集新数据。

在添加更改调用以在后台执行之前，所有方法和整个过程都按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:01:03.407

那些其他方法都在做什么？例如，如果它是网络请求，则可能需要运行循环以使后台线程真正能够执行任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:15:13.333

创建一个 NSOperation 并将此操作添加到 NSOperationQueue。这将创建一个与主线程平行的新线程，它也会执行您的方法。

以下是一些有用的链接：

[iPhone 上的 NSOperation](https://stackoverflow.com/questions/830218/nsoperation-on-the-iphone)

[http://www.icodeblog.com/tag/nsoperation/](http://www.icodeblog.com/tag/nsoperation/)

[http://www.cimgf.com/2008/02/16/cocoa-tutorial-nsoperation-and-nsoperationqueue/](http://www.cimgf.com/2008/02/16/cocoa-tutorial-nsoperation-and-nsoperationqueue/)

希望这会帮助你。

享受编码:)

# iphone - cocos2d，我忘记了延迟场景的命令是什么

> ID：11665762
> 
> 赞同：2
> 
> 时间：2012-07-26T08:57:20.817
> 
> 标签：iphone, objective-c, ios, xcode4, cocos2d-iphone

我希望游戏结束的场景在几秒钟内不会出现，这样你就可以真正看到你是怎么死的。我记得前一段时间这样做过，但我一生都记不起来了。

```
 GameOverScene *gameOverScene = [GameOverScene node];
        [gameOverScene.layer.label setString:@"You Lose"];
        [[CCDirector sharedDirector] replaceScene:gameOverScene]; 
```

真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:02:00.250

使用 NSObject`[self performSelector:@selector(gameOver) withObject:nil afterDelay:5];`并在新方法 GameOver 中替换场景：

```
- (void)gameOver
{
    GameOverScene *gameOverScene = [GameOverScene node];
    [gameOverScene.layer.label setString:@"You Lose"];
    [[CCDirector sharedDirector] replaceScene:gameOverScene];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:04:49.017

一个解决方案可能是安排一个选择器来执行您的操作：

```
[[CCScheduler sharedScheduler] scheduleSelector:@selector(myMethod:) forTarget:self interval:2.0f paused:[[CCDirector sharedDirector] isPaused]]; 
```

和你的方法实现：

```
- (void)myMethod:(ccTime)dt
{
    [[CCScheduler sharedScheduler] unscheduleSelector:_cmd forTarget:self];

    //your actions here
    GameOverScene *gameOverScene = [GameOverScene node];
    [gameOverScene.layer.label setString:@"You Lose"];
    [[CCDirector sharedDirector] replaceScene:gameOverScene];
} 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:05:05.603

没有得到你真正需要的东西。仍然建议这两个..尝试

```
[self performSelector:@selector(showGameOverScene) withObject:nil afterDelay:2.0f]; 
```

替换为时间：

```
[[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[GameOverScene scene] withColor:ccWHITE]]; 
```

# python - 相对导入适用于 CLI，但不适用于脚本

> ID：11665765
> 
> 赞同：0
> 
> 时间：2012-07-26T08:57:25.340
> 
> 标签：python, import

我将我的 python 项目的项目根添加到`PYTHONPATH`. 现在我的模块的导入在`CLI`python bot 中工作，而不是在 python 脚本中。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:23:49.697

使用 -v 选项调用您的脚本。

> python -v yourscript.py

这将跟踪所有导入语句并查找或执行 grep 以获取您的项目名称。如果它不在其中，那么它根本没有添加到您的 python 路径中，或者您正在运行不同的 python 解释器。

# java - WebDriver 中的 get() 和 navigate()

> ID：11665766
> 
> 赞同：0
> 
> 时间：2012-07-26T08:57:25.913
> 
> 标签：java, webdriver

哪个更好用？

```
driver.get("http://google.com");
driver.navigate().to("http://google.com"); 
```

请建议我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:40:24.780

这两种方法是彼此的别名。没有功能上的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T12:39:24.773

就像 JimEvans 说的，他们是一样的。此处描述了唯一的区别：

```
driver.navigate().to("http://www.example.com"); 
```

> 重申一下：“navigate().to()”和“get()”做同样的事情。一个比另一个更容易打字！
> 
> “导航”界面还提供了在浏览器历史记录中前后移动的能力：

```
driver.navigate().forward();
driver.navigate().back(); 
```

> 请注意，此功能完全取决于底层浏览器。如果您习惯了一种浏览器的行为而不是另一种浏览器的行为，那么当您调用这些方法时，可能会发生意想不到的事情。

[http://code.google.com/p/selenium/wiki/NextSteps](http://code.google.com/p/selenium/wiki/NextSteps)

# php - 在单个文件中提供 CSS 和 JS，可能的优点和缺点

> ID：11665771
> 
> 赞同：0
> 
> 时间：2012-07-26T08:57:42.597
> 
> 标签：php, javascript, css, apache, compression

前段时间我注意到，许多大型网站有时会以非常少的数量（甚至是一个文件）和奇怪的字母数字名称提供他们的 CSS 和 JS 文件。我认为这些文件名是哈希，这反过来又让我怀疑：

*   他们被缓存了
*   它们是动态创建的，以减少来自各种 CSS 和 JS “位”的 HTTP 开销

一些互联网研究表明我是对的，这种方法有些存在和价值，我想在我正在开发的 WAMP/LAMP 站点中实现它 - 该站点因其模块化插件结构而经常提供很多服务中小型 CSS 和 JS 文件。

* * *

这些是我的问题：

1.  如何在文件更新时自动更新缓存？我想出的解决方案是为每个页面创建一种“签名字符串”，加入文件路径和最后修改时间，然后使用 MD5 对签名进行哈希处理并将其提供给缓存以确定哈希/文件名是否为存在的。这是一个正确的方法吗？有什么缺点吗？
2.  下一个合乎逻辑的步骤是**缩小**。缩小 CSS 文件相当简单；JS缩小也可靠吗？网上有什么好课吗？
3.  另一个问题：已经缩小的脚本呢？除了某种形式的解析之外，我想到的唯一解决方案是比较缩小之前和之后的大小，如果之后的大小 < 之前的大小，则使用 PHP 缩小的形式。计算开销应该通过缓存来解决，对吧？
4.  **最重要的问题**：**CSS 图像**。在这里我*真的*不知道：在不同的地方收集各种 CSS*会破坏所有相关的图像链接*。我不能使用绝对路径（破坏站点可重定位性）。`css/img`由于潜在的文件名冲突，我不希望对 CSS 图像使用标准目录结构（例如，将所有 CSS 引用的图像放在一个目录下）。这也意味着以某种方式解析 CSS。我该如何解决这个问题？
5.  压缩：我是否必须始终实现基于软件 PHP 的 GZIP 压缩，或者（在该领域非常无知）它可以在 Apache 服务器上自动执行吗？

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:24:37.107

我使用的是一个非常好的库[https://github.com/mrclay/minify](https://github.com/mrclay/minify)。它的库自动将 css 和 js 文件压缩为一个文件，并在修改文件上重建缓存。

# android - EditText 中可点击的复合可绘制对象，点击时会弹出一个视图

> ID：11665775
> 
> 赞同：5
> 
> 时间：2012-07-26T08:58:08.270
> 
> 标签：android, android-edittext, textwatcher

我正在使用 TextWatcher 来验证我的输入，我希望我的红色提示图像是可点击的，这样我就可以给用户视觉反馈，如下图所示。到目前为止，我所拥有的是当我输入无效数据时出现的带有红色提示图像的编辑文本。我现在想知道如何使这个红色提示可点击并使弹出提示如图所示。

![EditText 提示](../Images/24ab8fcd0827482915677bc39a597619.png)

这是我到目前为止的代码，

```
public class MainActivity extends Activity implements TextWatcher{

    EditText username,email = null;
    boolean flag=false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);      

        username=(EditText) findViewById(R.id.usernametxt);
        email=(EditText) findViewById(R.id.emailtxt);

        username.addTextChangedListener(this);

        username.setOnTouchListener(new View.OnTouchListener(){
        public boolean onTouch(View view, MotionEvent motionEvent) {
            // your code here...
            if(flag)
            {
                email.setText("Error. . .");
            }
            getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);                
            return false;
            }
        });

        Button loginbtn = (Button) findViewById(R.id.login);
        loginbtn.setOnClickListener(new Button.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                //Check Validations
                if(username.getText().toString().equalsIgnoreCase(""))
                {
                    username.setCompoundDrawablesWithIntrinsicBounds(0, 0, R.drawable.alert, 0);
                    flag=true;
                }
            }
        });

        Button clearbtn = (Button) findViewById(R.id.clear);
        clearbtn.setOnClickListener(new Button.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                username.setText("");
                email.setText("");      
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void afterTextChanged(Editable arg0) {
        // TODO Auto-generated method stub

    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // TODO Auto-generated method stub      
        username.setCompoundDrawablesWithIntrinsicBounds(0, 0, 0, 0);
        flag=false;
        email.setText("");
    }   
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T09:10:27.510

您必须进行自定义`EditText`才能获得第一个功能。

[在这里解决](https://stackoverflow.com/questions/3554377/handling-click-events-on-a-drawable-within-an-edittext)

单击可绘制的弹出视图可以通过`PopupWindow`

[在这里解决。](https://stackoverflow.com/questions/10664386/inserting-textview-inside-edittext-in-android/10664561#10664561)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-23T15:15:29.240

如果您将红色提示图像用作 EditText usernametxt 右侧的复合可绘制对象，则非常简单。以下将解决问题。

```
EditText username = (EditText) findViewById(R.id.usernametxt);
username.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_UP) {
            if(event.getRawX() >= username.getRight() - username.getTotalPaddingRight()) {
                // your action for drawable click event

             return true;
            }
        }
        return true;
    }
}); 
```

如果您想要左可绘制，请将 if 语句更改为：

```
if(event.getRawX() <= username.getTotalPaddingLeft()) 
```

同样，您可以对所有复合可绘制对象执行此操作。

```
username.getTotalPaddingTop()
username.getTotalPaddingBottom() 
```

此方法调用返回该侧的所有填充，包括任何可绘制对象。您甚至可以将它用于 TextView、Button 等。

单击[此处](http://developer.android.com/reference/android/widget/TextView.html#getTotalPaddingBottom())以获取来自 android 开发者网站的参考。

# arrays - 如何使用学说 getArrayResult 只返回行 ID 和名称？

> ID：11665784
> 
> 赞同：1
> 
> 时间：2012-07-26T08:58:38.790
> 
> 标签：arrays, doctrine-orm, dql

嗨，我有这个 dql 查询

```
createQuery("SELECT b.name FROM Album\Entity\Brand b")->getArrayResult(); 
```

它返回这个

```
array
 0 => 
  array
   'id' => int 11
   'name' => string 'aaas' (length=4) 
```

我该怎么做才能把结果变成这样

```
array(11=>'asss') 
```

我的意思是数组

```
array(id=>name,id=>name,...) 
```

dql 或 getArrayResult 方法中是否有针对此问题的任何特定选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T17:56:55.460

我昨晚刚遇到这个问题。你想做的事情是不可能的，反正也不完全是。

如果您决定检索整个实体对象而不是仅名称，则可以使用以下内容：

```
createQuery("SELECT b FROM Album\Entity\Brand b INDEX BY b.id")->getArrayResult(); 
```

...结果你会得到：

```
Array(
    [id] => object,
    ....
); 
```

但是，如果您这样做：

```
createQuery("SELECT b.name FROM Album\Entity\Brand b INDEX BY b.id")->getArrayResult(); 
```

...好吧， INDEX BY 被忽略了。不太清楚为什么。

[这里](https://stackoverflow.com/questions/12096792/using-column-value-as-array-index-in-doctrine)的这个人似乎已经**解决**了这个问题，但他使用 Doctrine 2.1 而我有 2.0。你用过哪个版本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T13:53:42.810

因为你必须写：

```
createQuery("SELECT b.id, b.name FROM Album\Entity\Brand b INDEX BY b.id")->getArrayResult(); 
```

更复杂的例子：

```
$u = $em-> createQuery('SELECT u.id, u.name FROM MainBundle:User u INDEX BY u.id')->getArrayResult(); 
```

# iphone - X 轴分为 2 个具有相同 y 轴的部分

> ID：11665785
> 
> 赞同：0
> 
> 时间：2012-07-26T08:58:44.183
> 
> 标签：iphone, objective-c, ipad, core-plot

我想要在 x 轴上显示一个主标签和其他两个子标签的图表，这些子标签显示当前日期和前一天日期相等地划分为 24 小时。我的 y 轴与此相同。我不知道 x 轴的划分到底是什么词。如果有人知道请建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:51:40.853

只需在您的示例中检查`CPTTestApp`项目即可。`CorePlot_1.0`

您需要做的就是为同一个图表创建另一个 x 轴。

`axisSet.xAxis2 = [(CPTXYAxis *)[CPTXYAxis alloc] initWithFrame:CGRectZero];`

添加您需要显示的属性。您可以在其中添加自定义标签。

最后将所有轴添加到图中。

`graph.axisSet.axes = [NSArray arrayWithObjects:axisSet.xAxis,axisSet.yAxis, axisSet.xAxis2,nil];`

# jquery - Jquery-识别正在获取的对象？

> ID：11665787
> 
> 赞同：3
> 
> 时间：2012-07-26T08:58:46.197
> 
> 标签：jquery

假设我有这个任务：

```
$("myObj").val('1') 
```

现在假设我想添加到`1`现有值，所以：

```
$("myObj").val($("myObj").val()+'1') 
```

*ps，我不希望任何外部变量记住该值*

有什么方法可以获取正在获取的对象吗？就像是 ：

![在此处输入图像描述](../Images/d3b97f998fe7d991efb397b67113f8a3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:01:22.327

与大多数 jQuery 函数一样，`val`此处采用更适合您的用例的回调：

```
$("myObj").val(function(i, val) {
    console.log(this); //the current dom element that's value is being set
    return val+'1';
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:01:11.267

```
$("myObj").val(function(i, oldVal) {
   return oldVal + '1';
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:02:35.853

```
​$(function(){
    $("input").val(function(){
     return parseInt(this.value, 10)+1;   
    }); 
});​ 
```

[http://jsfiddle.net/T7KGR/](http://jsfiddle.net/T7KGR/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:18:31.393

实际上，您可以使用函数`Number()`本身解析字符串。

```
$(".myObj").val('1');
$(".myObj").val(Number($(".myObj").val())+1); 
```

## 结果：

```
2 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/9jYDT/1/)**

# r - RStudio Server vs opencpu.org 用于自己包的基于 Web 的 GUI？

> ID：11665788
> 
> 赞同：4
> 
> 时间：2012-07-26T08:58:51.847
> 
> 标签：r, rstudio, rstudio-server, opencpu

作为早期的 RStudio 用户，我刚刚在本地 ubuntu VM 上安装了 RStudio Server。浏览器版本反应迅速，提供用户管理等——这里有很多让我印象深刻的理由。我也喜欢将它与基于 LDAP 的用户管理集成的事实似乎并不遥远。

此外，我也关注[opencpu.org](http://www.opencpu.org)和 Jeroen Ooms 的其他项目的开发已经有一段时间了。像[lme4](http://www.stat.ucla.edu/~jeroen/lme4.html)这样的应用程序对我来说尤其重要。

我正在为我自己的研究所开发一个机构特定的 R 包，并希望通过放入应用程序服务器和添加基于 Web 的 gui 来增加其在组织内的使用。

上述两个项目都提供了超出我需要的方式，因此无需重新发明轮子。但我不确定我应该在这里使用哪种轮子。

您将使用哪种架构为自定义包构建具有 LDAP 用户管理（使用外部 LDAP 服务器）的基于 Web 的 GUI？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T11:26:49.513

RStudio 服务器更多的是为用户提供 R 会话。对于抽象的 GUI，您只需要与 R 的 RESTful 连接，因此请使用 opencpu.org

# sql-server - 没有从存储过程中得到任何结果

> ID：11665789
> 
> 赞同：0
> 
> 时间：2012-07-26T08:58:54.497
> 
> 标签：sql-server, sql-server-2005, stored-procedures, sql

我有以下程序界面：

```
create procedure [dbo].[GetsItemDetails]
(
    @SiteURL varchar
)
AS

select 
    *
from
    s_ItemDetails
where
    SiteURL = @SiteURL 
```

当我这样称呼它时：

```
DECLARE @return_value int

EXEC    @return_value = [dbo].[GetsItemDetails]         @SiteURL =
N'fgh'

SELECT  'Return Value' = @return_value 
```

当有 siteURL "fgh" 的记录时，我什么也得不到

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T09:02:55.583

您忘记指定参数的大小。

```
create procedure [dbo].[GetsItemDetails]
(
    @SiteURL varchar
)
AS 
```

没有大小，它是 1 个字符。

为 指定与列大小相同的大小`SiteURL`。

像这样的东西：

```
create procedure [dbo].[GetsItemDetails]
(
    @SiteURL varchar(255)
)
AS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:48:41.537

试试这个：

```
CREATE procedure [dbo].[GetsItemDetails]
(
    @SiteURL varchar(1000)
)
AS
DECLARE @str varchar(1000)
SET @str='select * from s_ItemDetails where  SiteURL ='+ ''''+@SiteURL+''''
select @str 
```

# ipad - 你能创建一个基于导航的表格，链接到 ipad 上的多个 detailview 控制器吗

> ID：11665792
> 
> 赞同：2
> 
> 时间：2012-07-26T08:59:29.347
> 
> 标签：ipad, ios5, uisplitviewcontroller

有没有办法设计具有以下结构的应用程序。我尝试了很多教程，但没有一个能像我尝试的那样。我想知道是不是因为它无法完成。

我想要一个 SplitViewController，Masterview 有一个 Tableview，里面有多个项目。每个项目都推送到一个新的 Masterview 表，该表具有然后可以选择的项目。

如果在第一个子菜单中选择了一个项目，它会打开 DetailViewController1 并显示相关信息。

如果在单独的子菜单项中选择了一项，它将打开 DetailViewController2 并显示信息。

我查看了 Apple 的 MultipleDetailView Controller 教程，但它仅适用于单级 MasterViewController 表。我可以在 MasterDetailController 中放置一个导航控制器，然后仍然可以推送到新的详细视图控制器吗？

在 AppDelegate 中，您选择子视图，那么您将如何根据选择不断更改子视图？

我还尝试使用故事板，并使用使用样式“替换”的 segue 获得了部分解决方案。我发现我可以有一个基于导航的 MasterViewController，并将它推送到新的 detailviewControllers，但我无法让 popovercontroller 正常工作。我无法让工具栏出现并给我按钮以重新出现 MasterViewController。

希望很清楚。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T03:26:27.760

以下适用于我在 iOS 6 上使用带有情节提要的 Master Detail 模板。我使用的是 Xcode 4.6.2

1.  修改 MasterViewController 的代码以消除您不需要的东西，然后创建它的子类，例如。SubviewMasterViewController 或您选择的任何名称。

2.  将一个 tableview 控制器拖到您的故事板上，并使用 segue 将它连接到您当前的主视图控制器（tableview 到 tableview，而不是从单元格到 tableview）。将其单元格的标识符更改为与属性检查器中主视图控制器的单元格不同的名称。

3.  为 segue 赋予其标识符的唯一名称，例如。显示子级别。

4.  分配您连接到主视图控制器的 tableview 控制器以使用您刚刚在 Attributes Inspector 中创建的子类。

5.  返回到您的 MasterViewController.m 文件。在里面

    *   (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 方法，使用 performSegueWithIdentifier:sender 方法导航到您添加的 tableview 控制器。
6.  在 SubMasterViewController.m 文件中，更改

    *   (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 方法，特别是行 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath] 通过将单元格标识符设置为您的单元格新的 tableview 控制器。
7.  还将该行的 UITableViewCell *cell 的名称更改为 UITableViewCell *cell 之类的其他名称，否则 Xcode 将抛出一个嘶嘶声。

8.  对添加到主视图控制器的每个 tableview 控制器重复步骤 2-7。确保为每个 tableview 控制器的单元格标识符使用唯一名称。

# nat - NAT 后面的 HTTP 服务器

> ID：11665793
> 
> 赞同：7
> 
> 时间：2012-07-26T08:59:42.403
> 
> 标签：nat, stun

我正在尝试使多层 NAT 后面的（apache）服务器可以从 Internet 访问。

限制：

1.  避免中继。有一个公共服务器（我们称他为 OldMan）用于登录/眩晕，但它的带宽太差，无法承载中继数据。
2.  我无权手动配置 NAT。3.用户无需更改浏览器或设备。（即适用于android、ios和任何PC）

我试过`UPnP`了，但它只适用于**1 层 NAT**。

我试图搜索`NAT`遍历解决方案几个月，但徒劳无功。

我学习`STUN/TURN/ICE`并尝试了 pjsip (icedemo.exe + numb)，但是，它的 stun 无法穿透 2 层 NAT。

我尝试了 Mist,Pwnat，但没有运气。据我所知，libjingle 听起来像是一个用于制作 Gtalk 扩展的 API……（？）

我也尝试制作 VPN/N2N 来解决这个问题，但这对公共服务器来说将是一个沉重的负担。任何 VPN 客户端都需要服务器（OldMan 服务器）将所有数据包中继到另一个，不是吗？

有什么解决方案可以解决这个问题吗？多层 NAT 后面的 HTTP 服务器。

顺便说一句，如果 STUN/TURN/ICE 有效，我的想法如下，可能吗？

1.  用户安装了一个应用程序（例如：stun_browser_agent.exe）
2.  用户在 Chrome 上输入以下地址：127.0.0.1:9999
3.  Chrome 连接到 stun_browser_agent.exe 守护进程
4.  守护进程使用 Stun 协议连接到 HTTP 服务器
5.  Http Server 上的守护进程（例如：stun_apache_agent.exe）接收所有消息并将其中继到 Apache 守护进程。
6.  Apache回复所有http信息-->stun_apache_agent.exe-->stun_browser_agent.exe-->chrome

这样我们就不必修改浏览器和 Apache。

我可以参考任何可用的资源来实现这个吗？

感谢您的耐心等待

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:08:02.500

您是否可以控制此服务器与“外部世界”之间的所有 NAT 设备？

一种方法是在 Internet 网关路由器和服务器之间设置 SSH 隧道。

SSH 隧道将从您的服务器启动并连接到在您的 Internet 网关路由器上运行的 sshd。使用 SSH 的端口转发功能将 Internet 网关上的端口 80 转发回 Apache 在您的服务器上运行的任何端口。

另一种方法是在公共互联网上可访问的任何其他服务器上设置 sshd（或任何其他隧道产品）。从您的服务器初始化您的连接，并使用该连接将流量从该公共服务器上的端口 80 转发到您的服务器。

方法基本相同：您需要从服务器启动隧道设置，并使用该连接将流量从公共服务器转发回您的服务器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T09:02:07.970

配置每个 NAT 设备，从具有 Internet 连接的设备开始，将端口转发到下一个 NAT 设备，并将最内部的 NAT 转发到服务器。

**更新**：“ *2.我​​无权手动配置 NAT。* ”我不明白您如何有权在这些 NAT 设备后面运行服务器，但无权在其中配置端口转发。当然，运行服务器的权利包括执行运行服务器所需的操作的权利。

# javascript - 在这种情况下如何通过 jQuery 选择图像图标？

> ID：11665796
> 
> 赞同：0
> 
> 时间：2012-07-26T08:59:49.503
> 
> 标签：javascript, jquery, dom, jquery-selectors, jquery-events

我让用户通过单击一个按钮来创建图像和按钮（上面有图像的按钮）：“new_a_window”，所以我`append()`在 jQuery 中使用。但问题是当用户按下它时，我必须得到不同的图像。

当用户单击“new_a_window”按钮时，jQuery 将在 jDialog(story_pages) 中创建一个带有图像的按钮。

```
$( '#new_a_window').bind('click',function(){
 $('#story_pages').append('<div><button value=window_value
 style="width:100px; height:100px" >

 <img id=window_value src="../pic/white.png" width="100px" height="100px"> 
 </button></div>');
 window_value= window_value+1; //I give each of the images a unique integer value since of 
                               // the value is the index of a image array. 
 }) 
```

我必须实现这个场景：

*   当用户按下图像按钮时，我可以获得图像的 id 值。但是，附加上面的代码片段后，每个图像的值都是“window_value”，我无法按值选择它。我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:09:51.267

尝试

```
$('#story_pages').append('<div><button value=window_value
 style="width:100px; height:100px" >

 <img value="'+window_value+'" src="../pic/white.png" width="100px" height="100px"> 
 </button></div>'); 
```

问题是您只是将值设置为字符串“window_value”而不是变量内的值。

希望这可以帮助

**更新**

ID 不应该是一个数字，如果你想使用 id 你需要在它之前添加文本。

```
'<img id="window'+window_value+'" src="' 
```

选择你可能做的任何一个。

`$('#window1')`对于 id 或我认为`$('img[value="1"]')`可以使用值（不是 100%，因为值不是标准属性）

# java - 解析和读取java中的公钥

> ID：11665798
> 
> 赞同：6
> 
> 时间：2012-07-26T09:00:02.233
> 
> 标签：java, bouncycastle, public-key-encryption

我需要使用 java 读取公钥并对其进行解析，以检查其有效性、指数、模数或是否有效。我尝试了以下代码，但遇到了问题。你能帮我找到解决这个问题的方法吗？

```
public static void getPublicKey(String key) throws Exception {

key = key.replaceAll("-----BEGIN SSH2 PUBLIC KEY-----", "");
key = key.replaceAll("-----END SSH2 PUBLIC KEY-----", "");
KeyFactory kFactory = KeyFactory.getInstance("RSA", new BouncyCastleProvider());
byte pub_llave[] =  new BASE64Decoder().decodeBuffer( key ) ;
X509EncodedKeySpec spec =  new X509EncodedKeySpec(pub_llave);
PublicKey pubkey = (PublicKey) kFactory.generatePublic(spec);
} 
```

这是一个例外：

```
java.lang.IllegalArgumentException: unknown object in getInstance: org.bouncycastle.asn1.DERApplicationSpecific
    at org.bouncycastle.asn1.ASN1Sequence.getInstance(Unknown Source)
    at org.bouncycastle.asn1.ASN1Sequence.getInstance(Unknown Source)
    at org.bouncycastle.asn1.x509.SubjectPublicKeyInfo.getInstance(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-04T18:00:57.483

SSH 密钥不是 X.509 密钥，因此它不能工作（这种方式）。

[https://jsvnserve.googlecode.com/svn/trunk/src/main/java/com/googlecode/jsvnserve/sshd/PublicKeyReaderUtil.java](https://jsvnserve.googlecode.com/svn/trunk/src/main/java/com/googlecode/jsvnserve/sshd/PublicKeyReaderUtil.java)展示了一种如何解析 SSH 密钥的方法。

# sql-server - 访问中的存储查询与 MS SQL Server 中的存储过程

> ID：11665800
> 
> 赞同：0
> 
> 时间：2012-07-26T09:00:09.473
> 
> 标签：sql-server, ms-access, stored-procedures

说MS 访问中的“**存储查询**”的功能与MS SQL Server 中的“**存储过程”相同是否正确。**哪一个更能提高性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:00:14.497

模块中的 Sub 或 Function 可能比查询更接近存储过程。你可以：

*   执行一条或多条 sql 语句。
*   使用流控制和其他逻辑
*   与数据库外的对象交互：文件、电子邮件、执行程序等。
*   执行/使用其他子程序和功能

查询与视图有相似之处（除了视图不能接受参数，只执行一个select语句），但更像是一个表用户定义的函数（没有一些流控制）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:06:03.587

不，Access 查询比[存储过程](http://en.wikipedia.org/wiki/Stored_procedure)更受限制。如果您正在使用 SQL Server 后端并想要做一些复杂的事情，那么存储过程可能会更好。

# jakarta-ee - Glassfish 应用服务器上的 SPDY

> ID：11665802
> 
> 赞同：1
> 
> 时间：2012-07-26T09:00:13.263
> 
> 标签：jakarta-ee, web-applications, glassfish, spdy

我想知道像 Glassfish 这样的 Java App Server 是否支持/将支持[SPDY](http://dev.chromium.org/spdy/)以及它如何符合 Java EE 规范（以及是否需要一些代码更改才能完全生效）。目前甚至没有（Glassfish Jira）的门票？为什么不？没有人关心或需要它吗？

我知道 SPDY 可以与 Jetty 一起使用（所以我可以将它用于某些应用程序，但不能用于 Java EE），有用于 Apache 的 mod_spdy 和 F5 负载均衡器。CDN Akamai 也支持它。“缺失的链接”似乎是应用服务器？

我很感激任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:05:03.877

根据这个[关于 java.net](http://java.net/jira/browse/GLASSFISH-19393) SPDY 的新问题，将通过 GRIZZLY 在 Glassfish 4 中实现 SPDY 支持。

路线[图](https://wikis.oracle.com/display/GlassFish/PlanForGlassFish4.0)指出，Glassfish 4.0 将于 2013 年下半年发布。

# iphone - 如何自动符号化崩溃日志

> ID：11665806
> 
> 赞同：1
> 
> 时间：2012-07-26T09:00:34.310
> 
> 标签：iphone, symbolicate, symbolicatecrash, plcrashreporter

我使用 PLCrashReport 保存崩溃文件并将其发送到服务器，当我得到崩溃日志文件时，我必须符号化每个崩溃日志文件以通过终端理解这个错误。但是这项工作需要很多时间，因为如果我发布我的应用程序到appstore，我会从用户那里得到很多崩溃。所以我想创建一个可以自动符号化崩溃文件的应用程序，我可以这样做吗？我不确定，但我必须使用终端窗口来象征崩溃，我认为制作这样的应用程序非常困难，例如象征性命令

```
symbolicatecrash log_e371b6ac-6f46-4408-90df-ea0ff96ce50e_2012.07.26_07.34.22.log.crash -v result.crash 
```

# c# - 页面范围变量消失

> ID：11665807
> 
> 赞同：0
> 
> 时间：2012-07-26T09:00:36.133
> 
> 标签：c#, asp.net, .net

假设我有以下 asp.net 页面：

```
public partial class SamplePage : System.Web.UI.Page
{
    private int UserID;

    protected void Page_Load(object sender, EventArgs e)
    {
    }

    protected void btnSearchUser_Click(object sender, EventArgs e)
    {
       UserID = 5;
    }

    protected void btnSubmit_Click(object sender, EventArgs e)
    {
        Response.Write(UserID.ToString());
    }
} 
```

但 UserID 始终为 0。如何实现它始终为 5？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:10:50.193

因为按钮的单击会导致回发，并且由于 HTTP 协议是无状态的，因此在回发期间数据总是会丢失。所以您必须将该 UserID 存储到视图状态中以保持其值...这就是为什么我们在 Asp 中有状态管理的概念。网。但是，您可以像这样实现它...

```
public partial class SamplePage : System.Web.UI.Page
{
    int UserID;
  protected void Page_Load(object sender, EventArgs e)
  {

  }
 protected void btnSearchUser_Click(object sender, EventArgs e)
 {
    UserID=5;
    ViewState["UserID"] = UserID;
 }
 protected void btnSubmit_Click(object sender, EventArgs e)
 {
    if(ViewState["UserID"]!=null)
    Response.Write(ViewState["UserID"].ToString());
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:13:45.597

要在回发之间保留数据，您需要将其置于当前控件的视图状态：

```
private int UserID
{
    get
    {
        return this.ViewState["UserID"] as int? ?? -1; // if data is missing, default value -1 will be returned
    }
    set
    {
        this.ViewState["UserID"] = value;
    }
} 
```

# html - 清理html代码

> ID：11665809
> 
> 赞同：0
> 
> 时间：2012-07-26T09:00:38.490
> 
> 标签：html, tidy

嗨，我正在寻找一个脚本来简单地排列我的 html 代码（打开和关闭标签排列等）

我已经尝试过 tidyHTML 和一些基于 Web 的解决方案，但它们都通过删除或更改元素填充了我的网格系统和 php，我只是想要一些可以整理标签缩进的东西，这样更容易阅读而不是更改标记。

我也看到 htmlTIDY 有配置选项，但如果我遗漏了一些东西，我会发现它们令人困惑，我可以将其设置为不更改标记，将不胜感激示例或教程。

任何建议都会很棒。

如果有帮助，我会使用 Coda

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-11T08:19:55.827

CODA 2015 年更新

对于 HTML 代码的非破坏性和 HTML5 验证整理：

1.  安装 Mario Fischer 的 Coda PHP & Web Toolkit 插件，v4.2beta
2.  转到它的首选项并选择 W3C，配置：自定义
3.  根据您的需要调整 HTML Tidy 配置文件，例如添加“块”元素
4.  文档在这里：[http ://tidy.sourceforge.net/#docs](http://tidy.sourceforge.net/#docs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:33:21.657

尝试[使用 sublime text 2 格式化 html 代码](https://stackoverflow.com/questions/8839753/formatting-html-code-using-sublime-text-2)的答案。

此外，您可以尝试w3c 中的[tidy-html5](http://w3c.github.com/tidy-html5/)。

# php - Zend - 将参考地图与 easyother 结合起来

> ID：11665810
> 
> 赞同：1
> 
> 时间：2012-07-26T09:00:44.760
> 
> 标签：php, zend-framework, models, zend-db-table

在我当前的项目中，我正在使用“ **referenceMap** ”和“ **dependentTables** ”。一切都按我想要的方式工作，除了我需要将两个查找器相互结合的问题。我找不到合适的解决方案，所以这就是你们希望得到正确解决方案的地方。

**索引控制器**

```
$accountsTable  = new Module_Model_Languages();

$accountsRowset = $accountsTable->find(Zend_Registry::get('Zend_Locale'));
$user1234       = $accountsRowset->current();

$bugsAssignedToPrints  = $user1234->findModule_Model_ModulesPagesContentsPrintsViaModule_Model_ModulesPagesContentsMultilingual()->toArray();

$bugsAssignedToContent = $user1234->findModule_Model_ModulesPagesContentsViaModule_Model_ModulesPagesContentsMultilingual()->toArray();

// Dumping results       
Zend_Debug::dump($bugsAssignedToPrints);
Zend_Debug::dump($bugsAssignedToContent); 
```

* * *

这都是关于两个变量**$bugsAssignedToPrints**和**$bugsAssignedToContent 的**。我不想将结果排列成数组，而是将它们组合成一个数组。模型类可以通过 Pastebin 找到。对不起我的错误解释......这是我能做的最好的。

[模型 - Languages.php](http://pastebin.com/xZc9X5K9)

[模型 - ModulesPagesContentsMultilingual.php](http://pastebin.com/Yi8dYx6j)

PS：我不被允许将所有文件从 Pastebin duo 发布到我的新用户帐户。但我认为这两个是最重要的。

谢谢！

# c# - “System.Int32”类型的对象无法转换为“System.UInt32&”类型

> ID：11665813
> 
> 赞同：0
> 
> 时间：2012-07-26T09:00:50.470
> 
> 标签：c#, com, .net-3.5

当我执行以下代码行时

```
dispatch.GetTypeInfoCount(ref typeInfoCount); 
```

抛出以下异常

*“System.Int32”类型的对象无法转换为“System.UInt32&”类型*

```
using System.Runtime.InteropServices;
using ComTypes2 = System.Runtime.InteropServices.ComTypes;

public class ComHelper
{

[ComImport(), Guid("00020400-0000-0000-c000-000000000046"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    private interface IDispatch
    {
        void GetTypeInfoCount(ref uint pctinfo);
        void GetTypeInfo(uint itinfo, uint lcid, ref IntPtr pptinfo);
        void stub_GetIDsOfNames();
        void Invoke(int dispIdMember, 
            ref Guid riid, 
            uint lcid, 
            ushort dwFlags, 
            ref ComTypes2.DISPPARAMS pDispParams, 
            ref object pVarResult, 
            ref IntPtr pExcepInfo, 
            ref uint pArgErr);
    }

   public static bool CheckIfComPropertyOrMethodExists<T1>(T1 objectToCheck, string propertyOrMethodName)
    {

        ComTypes2.ITypeInfo objectTypeInfo = null;
        var objectITypeInfo = default(IntPtr);
        var pFuncDesc = default(IntPtr);

        try
        {

            //  Convert the object to IDispatch
            var dispatch = (IDispatch)objectToCheck;
            uint typeInfoCount = 0;

            //  Attempt to get the objects TypeInfo
            dispatch.GetTypeInfoCount(ref typeInfoCount);

            if (typeInfoCount < 1) throw new ApplicationException("No type info");

            dispatch.GetTypeInfo(0, 0, ref objectITypeInfo);

            if (objectITypeInfo == IntPtr.Zero) throw new ApplicationException("No ITypeInfo");

            objectTypeInfo = (ComTypes2.ITypeInfo)Marshal.GetTypedObjectForIUnknown(objectITypeInfo, typeof(ComTypes2.ITypeInfo));

            var pTypeAttr = default(IntPtr);
            objectTypeInfo.GetTypeAttr(out pTypeAttr);

            var typeAttr = (ComTypes2.TYPEATTR)Marshal.PtrToStructure(pTypeAttr, typeof(ComTypes2.TYPEATTR));

            objectTypeInfo.ReleaseTypeAttr(pTypeAttr);

            //  Find the method we're looking for in the list of COM objects methods
            for (var iFunc = 0; iFunc <= typeAttr.cFuncs - 1; iFunc++)
            {
                objectTypeInfo.GetFuncDesc(iFunc, out pFuncDesc);
                var funcDesc = (ComTypes2.FUNCDESC)Marshal.PtrToStructure(pFuncDesc, typeof(ComTypes2.FUNCDESC));

                string[] names = { string.Empty };
                int pcNames;

                objectTypeInfo.GetNames(funcDesc.memid, names, 1, out pcNames);

                var funcName = names[0];

                if (funcName == propertyOrMethodName)
                {
                    return true;
                }

                objectTypeInfo.ReleaseFuncDesc(pFuncDesc);
            }

            return false;

        }
        finally
        {
            if (objectTypeInfo != null)
            {
                objectTypeInfo.ReleaseFuncDesc(pFuncDesc);
            }
            Marshal.Release(objectITypeInfo);
        }

    }

} 
```

我确信答案很简单，但我目前无法解决。GetTypeInfoCount 的参数是一个 uint。通过引用传递给 GetTypeInfoCount 方法的局部变量 typeInfoCount 也是一个 uint。为什么会出现类型转换异常？

这个问题与以下内容有关

[如何在不产生异常的情况下检查 COM 属性或方法是否存在？](https://stackoverflow.com/questions/11540553/how-to-check-if-a-com-property-or-method-exists-without-generating-an-exception)

到目前为止有用的链接

[http://msdn.microsoft.com/en-us/library/ebbff4bc-36b2-4861-9efa-ffa45e013eb5%28VS.85%29](http://msdn.microsoft.com/en-us/library/ebbff4bc-36b2-4861-9efa-ffa45e013eb5%28VS.85%29)

[http://en.wikipedia.org/wiki/IDispatch](http://en.wikipedia.org/wiki/IDispatch)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:11:30.443

尝试使用`out`而不是`ref`：

```
void GetTypeInfoCount(out uint pctinfo); 
```

进而：

```
uint typeInfoCount;
dispatch.GetTypeInfoCount(out typeInfoCount); 
```

顺便说一句，您对该方法有同样的问题`GetTypeInfo`。您正在使用`ref`指针，但它应该是`out`：

```
void GetTypeInfo(uint itinfo, uint lcid, out IntPtr pptinfo); 
```

这是 IDispatch 接口的正确 P/Invoke 包装器：

```
[Guid("00020400-0000-0000-C000-000000000046")]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
internal interface IDispatch
{
    void GetTypeInfoCount(out uint pctinfo);
    void GetTypeInfo(uint iTInfo, int lcid, out IntPtr info);
    void GetIDsOfNames(ref Guid iid, [MarshalAs(UnmanagedType.LPArray, ArraySubType=UnmanagedType.LPWStr, SizeParamIndex=2)] string[] names, uint cNames, int lcid, [Out, MarshalAs(UnmanagedType.LPArray, ArraySubType=UnmanagedType.I4, SizeParamIndex=2)] int[] rgDispId);
    void Invoke(int dispIdMember, ref Guid riid, int lcid, INVOKEKIND wFlags, ref DISPPARAMS pDispParams, IntPtr pvarResult, IntPtr pExcepInfo, IntPtr puArgErr);
} 
```

# java - 使用非主键的多对一映射

> ID：11665815
> 
> 赞同：0
> 
> 时间：2012-07-26T09:00:51.870
> 
> 标签：java, hibernate

我有一个情况。在我的项目中，数据模型由业务人员控制，他在两个表之间创建了一个关系，其中该关系与另一个表上的唯一列而不是主键。让我创建一个示例表

```
Table - CATEGORY
Column
ID - PK
Version -
CatergoryID - Combination of Version and this column is is Unique
Category_Desc

Table - PCM
Coulmn
ID - PK
Catergory_ID - FK to Category ID in Category Table
Version - FK to Version on Category Table
.....
..... 
```

现在，当我使用休眠来使用多对一关系时，它不起作用。它不加载子类别。

我认为这是一个糟糕的数据库设计。我同意你的观点，但我无能为力，这是政治问题。

所以有人可以建议我如何在休眠中使用这个场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:03:59.857

使用*property-ref*属性以通过目标表中的 PK 以外的列指定 FK 关系。

# php - 循环随机字符串

> ID：11665819
> 
> 赞同：0
> 
> 时间：2012-07-26T09:01:12.017
> 
> 标签：php, mysql, loops, random

```
$new_random_string = substr(str_shuffle('0123456789'), 0, 2);

$strings = mysql_query("SELECT `string` FROM `table`");
while ($string = mysql_fetch_row($strings)) {

if ($new_random_string == $string[0]) 

// generate new random string

}

mysql_query("INSERT INTO `table` (`string`) VALUES ('".$new_random_string."')"); 
```

我想要一个循环来生成一个新字符串，以防它已经存在于数据库中。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:04:51.207

看起来您正在尝试生成随机字符串并将它们插入数据库，但有不能重复的限制。

为确保不能重复，最好的方法是在该列上[创建一个唯一索引。](http://dev.mysql.com/doc/refman/5.6/en/create-index.html)然后数据库将确保永远不会有重复的值。

要插入新值，您可以在插入之前查询数据库以查看您的特定字符串是否已经存在。或者您可以继续尝试插入并查看它是否有效 - UNIQUE 约束将防止插入任何重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:05:50.170

```
while(1)
{
   // generate new random string
   if(mysql_result(mysql_query("SELECT COUNT(*) FROM `table` WHERE `string` ".$new_random_string), 0) == 0){
       mysql_query("INSERT INTO `table` (`string`) VALUES ('".$new_random_string."')");
       break;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:06:13.353

```
function gen_string() {
   return substr(str_shuffle('0123456789'), 0, 2);
}

do {
$rand = gen_string();
$query = mysql_query("SELECT count(*) as rows FROM `table` where `string` ='".$rand ."'; ");

$row = mysql_fetch_row($query);

} while ($row['rows']>0);

mysql_query("INSERT INTO `table` (`string`) VALUES ('".$rand."')"); 
```

它未经测试，但应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:08:00.653

```
do{

    $new_random_string = substr(str_shuffle('0123456789'), 0, 2);
    $string = mysql_query("SELECT `string` FROM `table` WHERE `string` = $new_random_string");
    $string = mysql_fetch_row($strings)

}while($new_random_string == $string[0]);

mysql_query("INSERT INTO `table` (`string`) VALUES ('".$new_random_string."')"); 
```

# jquery - 带有动态内容的 jQuery 就地编辑

> ID：11665821
> 
> 赞同：1
> 
> 时间：2012-07-26T09:01:12.313
> 
> 标签：jquery

在我的网站上，我以这种方式将元素添加到 DOM

```
$('#header').load('header.html #template'); 
```

所以我将外部 html 文件的内容加载到 DOM 中。然后我打电话

```
$('.edit').editInPlace({
    callback: function(){
        alert("test");
    }
}); 
```

加载的内容包含一个`h2 with edit css`类。

但根本没有任何反应。我尝试了许多就地编辑插件。我有同样的问题。任何想法为什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:22:53.193

由于该`jquery.load()`方法是异步的，因此尽管您`editInPlace`在运行 load 方法后调用了该方法，但内容仍然不存在。你应该使用回调：

```
$('#header').load('header.html #template',function(){
    $('.edit').editInPlace({
        callback: function(){
        alert("test");
       }
    });
}); 
```

# android - 使用相同的活动在 Android 中查看翻转

> ID：11665822
> 
> 赞同：3
> 
> 时间：2012-07-26T09:01:13.247
> 
> 标签：android, android-layout, user-interface

我是 android 新手，因此我对所有这些 ViewFlipper、ViewSwitcher、ViewAnimator 和 ViewPager 有点迷失了。此外，我不确定引擎盖下发生了什么。

基本上我有一个显示一些数据的活动。通过滑动（或按钮，没关系），我想滚动视图并进入另一个页面（如下图所示）。

1.  是否可以在不更改其他活动的情况下实现类似的东西？

2.  我对视图和对设计元素的访问有点困惑。这些页面是如何相互定位的？例如，如果我当前看到的是 Page1，我可以修改 Page3 的内容吗？或者简单地说，所有的页面浏览量都是一起加载的吗？就像我设置`setContentView(R.layout.xlayout);`的那样，我只能访问 xlayout 元素。但是，如果我使用相同的活动，那么我有一个线程更新 Page1 上的计数器，如果我将视图更改为第 2 页，计数器将找不到 Page1 Counter TextView 并会抱怨。

3.  据我了解，Android 4.0 具有类似于图片中的 ViewPager。我正在使用 GB。我应该使用支持库还是可以在不导入任何库的情况下四处实现类似的东西？

（对不起，我的描述有点乱）

![例子](../Images/e94903a5b3c0a9aaa79ac05ce5bc431b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:08:15.430

是的，您可以根据需要使用 ViewSwitcher、ViewFlipper 和 ImageSwitcher。

ViewSwitcher 最多可以有两个孩子。这些孩子可能是视图或视图子类的对象。

ViewFlipper：可以有尽可能多的孩子。这些孩子可能是视图或视图子类的对象。

ImageSwitcher 可用于切换图像。

通过使用视图翻转器，您可以一次显示一个项目，并添加手势叠加，您可以应用滑动效果。要应用 View Flipper，您需要将所有视图添加到 ViewFlipper，并使用 showNext 和 showPrevious 方法显示下一个和上一个子项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:11:16.220

您需要使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)才能获得与 Google Play 中相同的行为。它仅适用于最新版本的 Android，但您可以使用 Compatibility Package 使其适用于旧版本。

使用 ViewFlipper，您不能在两个页面之间“滚动”。

# c# - 将数据集输出为 .csv 文件的集合，.zip 不是 C# 选项

> ID：11665824
> 
> 赞同：3
> 
> 时间：2012-07-26T09:01:20.767
> 
> 标签：c#, file-io, zip

我在 C# Web 应用程序中生成了一个解决方案，该应用程序运行一个报告，该报告返回一个包含 9 个数据表的数据集。

这些表以多对多关系链接，报告的目的是为任何时间点生成表中包含的记录的进度快照。

这要求同时查询所有 9 个表，因为在不同时间单独查询表将意味着表之间的结果不匹配。

我在一个 zip 文件中返回了 9 个 csv 文件，这在开发中运行良好。但是，在我为很多用户工作的组织中，机器非常有限，我们不能依赖他们拥有 winzip 或其他一些存档软件，因此我被告知要找到替代解决方案。

到目前为止，我遇到的问题是：

1.  所有 9 个数据表必须由同一个查询生成，这排除了让用户选择单独针对表运行报告的选项，因为如果它们在一天中的不同时间运行，结果可能不匹配。

2.  我一次只能将一个文件返回给浏览器，这会阻止我返回解压缩的 csv 文件集合。

3.  我确实考虑过将数据作为 Excel 工作簿上的单独选项卡返回，但是一些结果有前导零，当它们加载到工作表中时会被修剪掉。

如果有人知道我缺少的明显解决方案，那就太好了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:22:21.060

使用 DotNetZip，您可以像这样压缩和解压缩文件：

```
using Ionic.Zip;

namespace ConsoleApplication23
{
    class Program
    {
        static void Main(string[] args)
        {
            //Zip your files like so
            ZipFile x = new ZipFile();
            x.AddFile(@"C:\myFile");
            x.AddFile(@"C:\mySecondFile");
            x.Save(@"c:\myZipFile.zip");

            //Unzip like so
            ZipFile y = ZipFile.Read(@"c:\myZipFile.zip");

            foreach (ZipEntry e in y)
            {
                e.Extract(@"c:\test", ExtractExistingFileAction.OverwriteSilently);
            }
        }
    }
} 
```

# c# - ASP.NET 成员资格提供程序 - 公开盐

> ID：11665828
> 
> 赞同：0
> 
> 时间：2012-07-26T09:01:24.073
> 
> 标签：c#, asp.net, membership, salt, provider

## 背景

我们使用存储成员登录信息的 ASPNET 成员提供程序，以及存储辅助信息集的 MongoDB。

由于 MongoDB 不提供内置加密，我们决定在将某些数据插入数据库之前使用 ASPNET 成员资格提供程序表中的成员 salt 对其进行加密。

## 客观的

**我将如何公开盐以便在代码中可以访问它？**我在默认提供程序类中找不到任何方法。

## 选择

或者有人可以提出更好的方法吗？将盐保存在不同的地方的好处之一是保护它免受“闯入者”的侵害。

谢谢，马克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:04:45.773

这是一种方法，您可以使用用户名、电子邮件来加盐。

```
public static string hashCalculator(string username, string password)//Use username as salt.
        {
            byte[] stringbytes = System.Text.Encoding.Unicode.GetBytes(username.ToLower() + password);
            return Convert.ToBase64String(new SHA384Managed().ComputeHash(stringbytes));
        } 
```

# c++ - 如何打印 C++ 中捕获的异常的堆栈跟踪和 C++ 中的代码注入

> ID：11665829
> 
> 赞同：29
> 
> 时间：2012-07-26T09:01:23.730
> 
> 标签：c++, gcc, exception-handling, c++11, code-injection

我希望堆栈跟踪不仅适用于我的异常，也适用于任何后代`std::exception`

据我了解，由于堆栈展开（展开）而捕获异常时，堆栈跟踪将完全丢失。

所以我看到抓住它的唯一方法是在`std::exception`构造函数调用的地方注入代码保存上下文信息（堆栈跟踪）。我对吗？

如果是这样，请告诉我如何在 C++ 中进行代码注入（如果可以的话）。您的方法可能并不完全安全，因为我只需要它用于我的应用程序的调试版本。可能我需要使用汇编程序吗？

我只对 GCC 的解决方案感兴趣。它可以使用 c++0x 特性

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-26T17:33:16.330

既然您提到您对特定于 GCC 的东西感到满意，我已经整理了一个示例，说明您可以执行此操作的方式。不过，这纯粹是邪恶的，它插入了 C++ 支持库的内部。我不确定我是否想在生产代码中使用它。反正：

```
#include <iostream>
#include <dlfcn.h>
#include <execinfo.h>
#include <typeinfo>
#include <string>
#include <memory>
#include <cxxabi.h>
#include <cstdlib>

namespace {
  void * last_frames[20];
  size_t last_size;
  std::string exception_name;

  std::string demangle(const char *name) {
    int status;
    std::unique_ptr<char,void(*)(void*)> realname(abi::__cxa_demangle(name, 0, 0, &status), &std::free);
    return status ? "failed" : &*realname;
  }
}

extern "C" {
  void __cxa_throw(void *ex, void *info, void (*dest)(void *)) {
    exception_name = demangle(reinterpret_cast<const std::type_info*>(info)->name());
    last_size = backtrace(last_frames, sizeof last_frames/sizeof(void*));

    static void (*const rethrow)(void*,void*,void(*)(void*)) __attribute__ ((noreturn)) = (void (*)(void*,void*,void(*)(void*)))dlsym(RTLD_NEXT, "__cxa_throw");
    rethrow(ex,info,dest);
  }
}

void foo() {
  throw 0;
}

int main() {
  try {
    foo();
  }
  catch (...) {
    std::cerr << "Caught a: " << exception_name << std::endl;
    // print to stderr
    backtrace_symbols_fd(last_frames, last_size, 2);
  }
} 
```

我们基本上窃取了对 GCC 用于调度抛出异常的内部实现函数的调用。此时，我们获取堆栈跟踪并将其保存在全局变量中。然后，当我们稍后在 try/catch 中遇到该异常时，我们可以使用堆栈跟踪来打印/保存或您想做的任何事情。我们`dlsym()`用来查找真实版本的`__cxa_throw`.

我的示例抛出一个`int`来证明您可以使用任何类型来执行此操作，而不仅仅是您自己的用户定义的异常。

它使用`type_info`来获取被抛出的类型的名称，然后对其进行分解。

如果您愿意，可以更好地封装存储堆栈跟踪的全局变量。

我编译并测试了这个：

```
g++ -Wall -Wextra test.cc -g -O0 -rdynamic -ldl
```

运行时给出以下内容：

```
./a.out
抓到一个：int
./a.out(__cxa_throw+0x74)[0x80499be]
./a.out(main+0x0)[0x8049a61]
./a.out(main+0x10)[0x8049a71]
/lib/i686/cmov/libc.so.6(__libc_start_main+0xe6)[0xb75c2ca6]
./a.out[0x80497e1]

```

不过，请不要将此作为好的建议示例 - 这是您可以通过一些技巧来做的一个示例，并在内部四处寻找！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T09:05:38.590

在 Linux 上，这可以通过[`backtrace()`](http://www.kernel.org/doc/man-pages/online/pages/man3/backtrace.3.html)在异常构造函数中添加调用来实现，以将堆栈跟踪捕获到异常的成员变量中。不幸的是，它不适用于标准异常，仅适用于您定义的异常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T09:19:09.473

几年前我写过这个：[Unchaining chained exceptions in C++](http://drdobbs.com/cpp/191100567)

基本上，一些宏会记录抛出异常时堆栈展开的位置。

可以在库 Imebra ( [http://imebra.com](http://imebra.com) ) 中找到该框架的更新版本。

我会重新实现它的某些部分（比如将堆栈跟踪存储在线程本地存储中）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-12T12:15:04.453

Flexo 的解决方案非常好，而且效果很好。它还具有从回溯地址到过程名称的转换仅在`catch`部分中执行的好处，因此它取决于异常的接收者是否关心回溯。

然而，在某些情况下，基于 libunwind 的解决方案可能更受欢迎，即因为 libunwind 在某些情况下可以收集`backtrace`函数无法收集的过程名称。

在这里，我根据 Flexo 的回答提出了一个想法，但有几个扩展。它使用 libunwind 在 throw 时生成回溯，并直接打印到 stderr。它使用 libDL 来识别共享对象文件名。它使用来自 elfutils 的 DWARF 调试信息来收集源代码文件名和行号。它使用 C++ API 来消除 C++ 异常。用户可以设置`mExceptionStackTrace`变量来临时启用/禁用堆栈跟踪。

关于所有拦截解决方案的重要一点`__cxa_throw`是，它们可能会增加遍历堆栈的开销。对于我的解决方案尤其如此，它增加了访问调试器符号以收集源文件名的大量开销。这在您希望代码不会抛出的自动测试中可能是可以接受的，并且您希望对抛出的（失败的）测试拥有强大的堆栈跟踪。

```
// Our stack unwinding is a GNU C extension:
#if defined(__GNUC__)
// include elfutils to parse debugger information:
#include <elfutils/libdwfl.h>

// include libunwind to gather the stack trace:
#define UNW_LOCAL_ONLY
#include <libunwind.h>

#include <dlfcn.h>
#include <cxxabi.h>
#include <typeinfo>
#include <stdio.h>
#include <stdlib.h>

#define LIBUNWIND_MAX_PROCNAME_LENGTH 4096

static bool mExceptionStackTrace = false;

// We would like to print a stacktrace for every throw (even in
// sub-libraries and independent of the object thrown). This works
// only for gcc and only with a bit of trickery
extern "C" {
    void print_exception_info(const std::type_info* aExceptionInfo) {
        int vDemangleStatus;
        char* vDemangledExceptionName;

        if (aExceptionInfo != NULL) {
            // Demangle the name of the exception using the GNU C++ ABI:
            vDemangledExceptionName = abi::__cxa_demangle(aExceptionInfo->name(), NULL, NULL, &vDemangleStatus);
            if (vDemangledExceptionName != NULL) {
                fprintf(stderr, "\n");
                fprintf(stderr, "Caught exception %s:\n", vDemangledExceptionName);

                // Free the memory from __cxa_demangle():
                free(vDemangledExceptionName);
            } else {
                // NOTE: if the demangle fails, we do nothing, so the
                // non-demangled name will be printed. Thats ok.
                fprintf(stderr, "\n");
                fprintf(stderr, "Caught exception %s:\n", aExceptionInfo->name());
            }
        } else {
            fprintf(stderr, "\n");
            fprintf(stderr, "Caught exception:\n");
        }
    }

    void libunwind_print_backtrace(const int aFramesToIgnore) {
        unw_cursor_t vUnwindCursor;
        unw_context_t vUnwindContext;
        unw_word_t ip, sp, off;
        unw_proc_info_t pip;
        int vUnwindStatus, vDemangleStatus, i, n = 0;
        char vProcedureName[LIBUNWIND_MAX_PROCNAME_LENGTH];
        char* vDemangledProcedureName;
        const char* vDynObjectFileName;
        const char* vSourceFileName;
        int vSourceFileLineNumber;

        // This is from libDL used for identification of the object file names:
        Dl_info dlinfo;

        // This is from DWARF for accessing the debugger information:
        Dwarf_Addr addr;
        char* debuginfo_path = NULL;
        Dwfl_Callbacks callbacks = {};
        Dwfl_Line* vDWARFObjLine;

        // initialize the DWARF handling:
        callbacks.find_elf = dwfl_linux_proc_find_elf;
        callbacks.find_debuginfo = dwfl_standard_find_debuginfo;
        callbacks.debuginfo_path = &debuginfo_path;
        Dwfl* dwfl = dwfl_begin(&callbacks);
        if (dwfl == NULL) {
            fprintf(stderr, "libunwind_print_backtrace(): Error initializing DWARF.\n");
        }
        if ((dwfl != NULL) && (dwfl_linux_proc_report(dwfl, getpid()) != 0)) {
            fprintf(stderr, "libunwind_print_backtrace(): Error initializing DWARF.\n");
            dwfl = NULL;
        }
        if ((dwfl != NULL) && (dwfl_report_end(dwfl, NULL, NULL) != 0)) {
            fprintf(stderr, "libunwind_print_backtrace(): Error initializing DWARF.\n");
            dwfl = NULL;
        }

        // Begin stack unwinding with libunwnd:
        vUnwindStatus = unw_getcontext(&vUnwindContext);
        if (vUnwindStatus) {
            fprintf(stderr, "libunwind_print_backtrace(): Error in unw_getcontext: %d\n", vUnwindStatus);
            return;
        }

        vUnwindStatus = unw_init_local(&vUnwindCursor, &vUnwindContext);
        if (vUnwindStatus) {
            fprintf(stderr, "libunwind_print_backtrace(): Error in unw_init_local: %d\n", vUnwindStatus);
            return;
        }

        vUnwindStatus = unw_step(&vUnwindCursor);
        for (i = 0; ((i < aFramesToIgnore) && (vUnwindStatus > 0)); ++i) {
            // We ignore the first aFramesToIgnore stack frames:
            vUnwindStatus = unw_step(&vUnwindCursor);
        }

        while (vUnwindStatus > 0) {
            pip.unwind_info = NULL;
            vUnwindStatus = unw_get_proc_info(&vUnwindCursor, &pip);
            if (vUnwindStatus) {
                fprintf(stderr, "libunwind_print_backtrace(): Error in unw_get_proc_info: %d\n", vUnwindStatus);
                break;
            }

            // Resolve the address of the stack frame using libunwind:
            unw_get_reg(&vUnwindCursor, UNW_REG_IP, &ip);
            unw_get_reg(&vUnwindCursor, UNW_REG_SP, &sp);

            // Resolve the name of the procedure using libunwind:
            // unw_get_proc_name() returns 0 on success, and returns UNW_ENOMEM
            // if the procedure name is too long to fit in the buffer provided and
            // a truncated version of the name has been returned:
            vUnwindStatus = unw_get_proc_name(&vUnwindCursor, vProcedureName, LIBUNWIND_MAX_PROCNAME_LENGTH, &off);
            if (vUnwindStatus == 0) {
                // Demangle the name of the procedure using the GNU C++ ABI:
                vDemangledProcedureName = abi::__cxa_demangle(vProcedureName, NULL, NULL, &vDemangleStatus);
                if (vDemangledProcedureName != NULL) {
                    strncpy(vProcedureName, vDemangledProcedureName, LIBUNWIND_MAX_PROCNAME_LENGTH);
                    // Free the memory from __cxa_demangle():
                    free(vDemangledProcedureName);
                } else {
                    // NOTE: if the demangle fails, we do nothing, so the
                    // non-demangled name will be printed. Thats ok.
                }
            } else if (vUnwindStatus == UNW_ENOMEM) {
                // NOTE: libunwind could resolve the name, but could not store
                // it in a buffer of only LIBUNWIND_MAX_PROCNAME_LENGTH characters.
                // So we have a truncated procedure name that can not be demangled.
                // We ignore the problem and the truncated non-demangled name will
                // be printed.
            } else {
                vProcedureName[0] = '?';
                vProcedureName[1] = '?';
                vProcedureName[2] = '?';
                vProcedureName[3] = 0;
            }

            // Resolve the object file name using dladdr:
            if (dladdr((void *)(pip.start_ip + off), &dlinfo) && dlinfo.dli_fname && *dlinfo.dli_fname) {
                vDynObjectFileName = dlinfo.dli_fname;
            } else {
                vDynObjectFileName = "???";
            }

            // Resolve the source file name using DWARF:
            if (dwfl != NULL) {
                addr = (uintptr_t)(ip - 4);
                Dwfl_Module* module = dwfl_addrmodule(dwfl, addr);
                // Here we could also ask for the procedure name:
                //const char* vProcedureName = dwfl_module_addrname(module, addr);
                // Here we could also ask for the object file name:
                //vDynObjectFileName = dwfl_module_info(module, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                vDWARFObjLine = dwfl_getsrc(dwfl, addr);
                if (vDWARFObjLine != NULL) {
                    vSourceFileName = dwfl_lineinfo(vDWARFObjLine, &addr, &vSourceFileLineNumber, NULL, NULL, NULL);
                    //fprintf(stderr, " %s:%d", strrchr(vSourceFileName, '/')+1, vSourceFileLineNumber);
                }
            }
            if (dwfl == NULL || vDWARFObjLine == NULL || vSourceFileName == NULL) {
                vSourceFileName = "???";
                vSourceFileLineNumber = 0;
            }

            // Print the stack frame number:
            fprintf(stderr, "#%2d:", ++n);

            // Print the stack addresses:
            fprintf(stderr, " 0x%016" PRIxPTR " sp=0x%016" PRIxPTR, static_cast<uintptr_t>(ip), static_cast<uintptr_t>(sp));

            // Print the source file name:
            fprintf(stderr, " %s:%d", vSourceFileName, vSourceFileLineNumber);

            // Print the dynamic object file name (that is the library name).
            // This is typically not interesting if we have the source file name.
            //fprintf(stderr, " %s", vDynObjectFileName);

            // Print the procedure name:
            fprintf(stderr, " %s", vProcedureName);

            // Print the procedure offset:
            //fprintf(stderr, " + 0x%" PRIxPTR, static_cast<uintptr_t>(off));

            // Print a newline to terminate the output:
            fprintf(stderr, "\n");

            // Stop the stack trace at the main method (there are some
            // uninteresting higher level functions on the stack):
            if (strcmp(vProcedureName, "main") == 0) {
                break;
            }

            vUnwindStatus = unw_step(&vUnwindCursor);
            if (vUnwindStatus < 0) {
                fprintf(stderr, "libunwind_print_backtrace(): Error in unw_step: %d\n", vUnwindStatus);
            }
        }
    }

    void __cxa_throw(void *thrown_exception, std::type_info *info, void (*dest)(void *)) {
        // print the stack trace to stderr:
        if (mExceptionStackTrace) {
            print_exception_info(info);
            libunwind_print_backtrace(1);
        }

        // call the real __cxa_throw():
        static void (*const rethrow)(void*,void*,void(*)(void*)) __attribute__ ((noreturn)) = (void (*)(void*,void*,void(*)(void*)))dlsym(RTLD_NEXT, "__cxa_throw");
        rethrow(thrown_exception,info,dest);
    }
}
#endif 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-12T22:58:47.773

在[backward-cpp向后](https://github.com/bombela/backward-cpp)检查它做得很好并且维护得很好

示例代码

在 trace.hxx 中

```
#define BACKWARD_HAS_DW 1 // or #define BACKWARD_HAS_BFD 1 check docs
#include <backward.hpp>

class recoverable_err final: std::runtime_error
  {
    backward::StackTrace stacktrace_;

  public:
    explicit recoverable_err(std::string msg) noexcept;

    auto
    print_stacktrace(std::ostream &stream)const noexcept -> void;

    [[nodiscard]] auto
    what() const noexcept -> const char * final;
  }; 
```

在 trace.cxx 中

```
 #include "trace.hxx"

  recoverable_err::recoverable_err(std::string msg) noexcept
      : std::runtime_error{ msg }
      , stacktrace_{ backward::StackTrace() }
  {
    stacktrace_.load_here();
  }

  auto
  recoverable_err::print_stacktrace(std::ostream &stream)const  noexcept -> void
  {
    using namespace backward;
    Printer p;
    p.object = true;
    p.color_mode = ColorMode::always;
    p.address = true;
    p.print(stacktrace_, stream);
  }

  auto
  recoverable_err::what() const noexcept -> const char *
  {
    return std::runtime_error::what();
  } 
```

主要用途

```
auto
main() -> int
{
  try
    {
      throw recoverable_err("Recover from nasty error");
    }
  catch (recoverable_err const &ex)
    {
      std::cerr << ex.what();
      ex.print_stacktrace(std::cerr);
    }
  catch (std::exception const &ex)
    {
      std::cerr << "Using default class\n";
      std::cerr << ex.what();
    }
} 
```

# java - 不下载文件

> ID：11665834
> 
> 赞同：-4
> 
> 时间：2012-07-26T09:01:34.793
> 
> 标签：java, sockets, inputstream

我使用以下代码使用套接字而不是 url.openconnection() 从指定的 url 下载文件；下载后，当我检查它不起作用时...当我用编辑器打开文件时，它完全是空白的，文件内没有数据（空文件）需要建议？？？... ...

```
try {

    String address="http://tineye.com/images/widgets/mona.jpg";
    URL url_of_file=new URL(addres);
    String hostaddress=url_of_file.getHost();
    Socket mysocket=new Socket(hostaddress, 80);
    System.out.println("Socket opened to " + hostaddress + "\n");
    String file=url_of_file.getFile();
    System.out.println(" file = "+file);

    OutputStreamWriter osw=new OutputStreamWriter(mysocket.getOutputStream());

    osw.write("GET " + file + " HTTP/1.0\r\n\n"); 
    osw.flush(); 

    dis = new DataInputStream(mysocket.getInputStream());
    fileData = new byte[7850];

    for (int x = 0; fileData[x] > 0; x++){
         fileData[x] = (byte) dis.read();
    }

     // close the data input stream
    fos = new FileOutputStream(new File("C:\\Users\\down-to\\filedownloaded.jgp"));  //create an object representing the file we want to save
    fos.write(fileData);  // write out the file we want to save.
    dis.close();
    fos.close();

} catch (UnknownHostException ex) {
    Logger.getLogger(Check.class.getName()).log(Level.SEVERE, null, ex);
} catch (IOException ex) {
    Logger.getLogger(Check.class.getName()).log(Level.SEVERE, null, ex);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T09:04:56.790

这是：

```
for(int x=0;fileData[x]>0;x++){ 
```

正确的 ？看起来您正试图根据流的内容进行中断。正如 Flavio 所指出的，由于数组是新创建的，因此该语句立即为假。

我认为您更有可能阅读指示的内容长度，或者直到到达流的末尾。

事实上，我更愿意使用现有的[HttpClient](http://hc.apache.org/)并绕过上述所有内容。编写可靠的 HTTP 代码并不像第一次出现那样简单，第 3 方库将为您省去很多麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:52:18.677

你做错了几件事。首先，它是在重新发明轮子，因为已经存在很多 HTTP 库。

然后你正在制作一个无效的 HTTP 请求。就像 HTTP 1.1 一样，此类请求的标头应该以 结束`\r\n`，而您只发送`\n`：

```
osw.write("GET " + file + " HTTP/1.0\r\n\n"); 
```

服务器可能会等到您完成您的请求（它仍在等待一个完整的请求，以 double 结束`\r\n`）或抛出错误，因为它不希望出现第二个`\n`。

那么您就不会读取响应标头，这可能表明期望有多少数据。有趣的是，您初始化了一个足够大的字节数组（您要下载的文件是 7850 字节大），但是您不能对网络上的每个文件的文件大小进行硬编码，因为您很快就会用完存储磁盘空间他们。

因此，要么读取并解析`Content-length`标头，要么等待服务器在发送所有数据后关闭连接（这是[HTTP 1.0](http://www.w3.org/Protocols/HTTP/1.0/draft-ietf-http-spec.html#BodyLength)中的两个选项）。

最后，正如其他人所指出的那样，您没有正确阅读响应。请修复这些基础知识，然后您可以尝试存储响应。现在你的文件被零填充了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:15:29.100

通过如下修改您的代码，我能够用数据填充文件，这就是我得到的：

> 错误：拒绝访问
> 
> # 错误
> 
> ## 拒绝访问
> 
> * * *
> 
> *   **访问被安全策略拒绝**
> 
> 您的网络的安全策略此时不允许您的请求。如果您认为这不正确，请联系您的管理员。

```
try {
    String address = "http://tineye.com/images/widgets/mona.jpg";
    URL url_of_file = new URL(address);
    String hostaddress = url_of_file.getHost();
    Socket mysocket = new Socket(hostaddress, 80);
    System.out.println("Socket opened to " + hostaddress + "\n");
    String file = url_of_file.getFile();
    System.out.println(" file = " + file);

    OutputStreamWriter osw = new OutputStreamWriter(mysocket.getOutputStream());

    osw.write("GET " + file + " HTTP/1.0\r\n\n");
    osw.flush();

    DataInputStream dis = new DataInputStream(mysocket.getInputStream());
    byte[] fileData = new byte[7850];
    FileOutputStream fos = new FileOutputStream(new File("C:\\Users\\aboutros\\Desktop\\filedownloaded.jgp")); // create an object representing the file we want to save

    while (dis.read(fileData) >= 0) {
        fos.write(fileData); // write out the file we want to save.
    }
    dis.close();
    fos.close();

} catch (UnknownHostException ex) {
    ex.printStackTrace();
} catch (IOException ex) {
    ex.printStackTrace();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:03:48.783

条件是什么意思`for`？

```
for(int x=0;fileData[x]>0;x++){ 
```

刚刚创建了 fileData 数组，因此它用零填充。`fileData[x]>0`立即为假。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T13:22:08.823

这个条件正确吗？如果是，这种情况背后的含义是什么？

```
for(int x=0;fileData[x]>0;x++) 
```

# javascript - Now.js 和安全

> ID：11665835
> 
> 赞同：0
> 
> 时间：2012-07-26T09:01:37.787
> 
> 标签：javascript, node.js, client, nowjs-sockets

我用 now.js 在 Node.js 中制作了一些聊天应用程序。现在我想到了一些事情。有两个文件.. server.js 和 client.js，每个人都可以窃取 client.js 文件并在另一个主机上运行它，以获得我的 server.js 工作的好处。我该如何预防？

这是关于 client.js 通过域和端口与主机连接的：

```
window.now = nowInitialize("http://address.com:6564"); 
```

如何使其更安全，例如只有来自我的主机（address.com）的客户端（js 文件）才能与我的主机连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T12:55:55.180

如果您担心*其他*服务器可以将*您的*服务器与客户端代码一起使用：这应该不是问题，因为[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)。只有当您的服务器明确允许时，来自其他主机的客户端才能与其通信。

只需从不同的域名（甚至本地主机）尝试一下：您会看到您的浏览器不允许您发出跨域请求。

*（例如，您可以看到[这个 StackOverflow 帖子](https://stackoverflow.com/questions/6770490/socket-io-basic-example-not-working)是用户无法让 Socket.IO 在不同的主机/帖子组合上工作。）*

**更新**

它会像这样工作：

![在此处输入图像描述](../Images/7b6f52d9855dea05cad3a7e254255776.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T01:09:19.580

您的用户如何在您的聊天中获得身份验证？有注册之类的吗？

也许令牌或安全密钥可以做到这一点？还是带有所述令牌的安全cookie（抱歉......但至少对用户不可见）？如果没有令牌，您就无法访问您的服务？

# neon - xcode 4.4 霓虹灯组装错误

> ID：11665836
> 
> 赞同：0
> 
> 时间：2012-07-26T09:01:40.297
> 
> 标签：neon, xcode4.4

我在编译 neon 程序集时遇到编译错误`Xcode 4.4`，这些错误不在 xCode 4.3 中，错误是针对这些命令类型的：

```
error: invalid operand for instruction
        vld1 q5.u8, [r12], r2 

error: invalid operand for instruction
  vrhadd d0.u8,d22.u8,d0.u8

error: unexpected token in argument list
        vst1 d2.u32[0], [r1], r3 
```

知道如何解决这些错误吗？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:54:00.040

替换`vld1 q5.u8, [r12], r2`为`vld1.u8 q5, [r12], r2`

替换`vrhadd d0.u8,d22.u8,d0.u8`为`vrhadd.u8 d0,d22,d0`

替换`vst1 d2.u32[0], [r1], r3`为`vst1.u32 d2[0], [r1], r3`

这是应按注册者大小键入的指令！不是寄存器本身

# android - 我们可以强制设备以编程方式使用 GPRS 而不是 WIFI 吗？

> ID：11665842
> 
> 赞同：0
> 
> 时间：2012-07-26T09:02:02.250
> 
> 标签：android, gprs

我正在为*WAP 门户*编写代码，我需要专门建立一个`GPRS`连接，这是否可行，据我所知，一个聚合器（O2 uk）已经完成了这种类型的技巧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:11:58.283

不，从 android SDK 是不可能的，你可以通过关闭 wifi 去中途，但从应用程序控制 GPRS 是不可能的。但是您可以通过调用意图来要求用户打开设置页面来打开 GPRS。

# java - Web服务客户端顶部的包装器

> ID：11665843
> 
> 赞同：1
> 
> 时间：2012-07-26T09:02:05.973
> 
> 标签：java, web-services, client

我有一个返回 Web 服务客户端的库。

客户端 c = Clientlib.getclient();

现在我所做的是在它之上创建了一个包装器：

```
public class Myclient {

 private static Client c = ClientLib.getClient(); 
 private static instance = new MyClient();

 public static MyClient getInstance(){
  return instance;
 } 

 private Myclient(){
   //singleton
 }

 public Data getDate(Sting id){
  Data1 d1 = cleint.getData();
  convert d1 to Data and return data
 } 
} 
```

这是正确的方法吗？我应该只创建一次实例`Client`吗？

这种方法会有问题吗？如果两个线程同时调用该`getData`方法会怎样。这种情况很可能是因为这是一个基于 Web 的应用程序。

如果与服务器的连接断开又回来怎么办？我不认为这应该是一个问题，因为 http 是无状态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:19:03.847

一般来说，我认为包装器是个好主意。您可以在不影响其余代码的情况下从 Web 服务重建类。还允许您执行其他操作，例如缓存、安全性等。

如果您打算将**MyClient**设为单例，则**Client c**不需要是静态的。不是一件大事，但值得注意。

是否存在线程问题取决于**ClientLib.getClient()**的实现。您可能需要阅读以了解是否允许您以多线程方式访问它，或者您是否应该证明同步。但是，通过包装客户端，您可以轻松地将访问同步到一个地方。一般来说，一个 web 服务应该可以从多个线程访问，它只是一个通过 http 的调用。

我唯一可以建议的另一件事是在 MyClient 上添加一个接口，以解耦使用此类的任何内容。使测试更容易一些。

# ios5 - 以编程方式 iOS 5 在 Storyboard 中的 PresentModalViewController

> ID：11665844
> 
> 赞同：5
> 
> 时间：2012-07-26T09:02:06.227
> 
> 标签：ios5, uistoryboard, presentmodalviewcontroller

我第一次在我的 iOS 应用程序中使用故事板。我的故事板（A 和 B）中有 2 个视图。假设 A 是我故事板中的初始视图控制器。当我的应用程序启动时，我可以看到视图控制器 A。到目前为止，一切都按预期工作。现在在我的视图控制器 A 中，我正在检查用户是否已登录。如果用户未登录，那么我想呈现视图控制器 B。如何以编程方式使用 PresentModalViewController 以模态方式显示 B？

这是我的设置

![在此处输入图像描述](../Images/bb6999ea07aa5e32fa8ba3e75776cb2a.png)

这是我的代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    if (!isUserLoggedIn) {
        NSLog(@"USER NOT LOGGED IN....");
        UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
        LoginViewController *vc = (LoginViewController*)[mainStoryboard instantiateViewControllerWithIdentifier:@"B"];
        [self presentModalViewController:vc animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T10:26:25.587

到目前为止，您所做的似乎是正确的。您是否记得在情节提要中实际设置了 B 的标识符？

另外，您可能想尝试

```
[self.storyboard instantiateViewControllerWithIdentifier:@"B"]; 
```

而不是你在做什么。

**更新：**

该`viewDidLoad`方法可能如下所示：

```
- (void)viewDidLoad {

    [super viewDidLoad];

    if (!isUserLoggedIn) {

        NSLog(@"User is not logged in.");

        LoginViewController *vc = (LoginViewController *)[self.storyboard instantiateViewControllerWithIdentifier:@"B"];
        [self presentModalViewController:vc animated:YES];

    }

} 
```

此外，我从图像中看到您的第一个视图控制器未设置为任何特定类。它只是说“视图控制器”，而第二个正确显示“登录视图控制器”。

注意：我现在无法访问 Xcode，所以我还没有测试它。

# mysql - 每周上传了多少产品？

> ID：11665845
> 
> 赞同：-7
> 
> 时间：2012-07-26T09:02:06.540
> 
> 标签：mysql

我有一个带有`product_id`和`entry_date`字段的产品表（它是 varchar）。我想获得每周上传多少产品的结果。请告诉我 SQL，以便我可以得到每周上传多少产品的结果。

我也有 user_id 字段。我还需要每个用户每周上传多少产品。

非常感谢上述帮助。现在我还想要用户名，创建人，条目日期（日期格式），上传。我有一个用户注册表，其中主键是用户ID。它有用户名字段。我知道我必须加入但是我应该做哪个加入我无法决定你能帮我解释一下我使用哪个加入吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:10:54.047

```
select count(product_id) as uploads
from product 
group by week(cast(entry_date as date)) 
```

## 编辑

```
select user_id,
       count(product_id) as uploads, 
       week(cast(entry_date as date)) as week
from product 
group by user_id, week 
```

请参阅[此 SQLFiddle 示例](http://sqlfiddle.com/#!2/70973/1)

# php - 单击按钮时添加行的产品订单表单

> ID：11665851
> 
> 赞同：0
> 
> 时间：2012-07-26T09:02:25.590
> 
> 标签：php, forms

我想创建一个订单表格，其中的字段是

选择客户：[下拉菜单] 选择产品：[下拉菜单] 数量：[] 单价：[选择产品时从数据库查询] TotalPrice：[选择产品时显示，更新数量时显示]

[添加产品按钮] [提交按钮] [重置]

所以我的问题：

1.  添加行按钮应从选择产品中添加表单字段。这一行中的每一行都应该有一个唯一的 id，因为它们是数据库中的不同行。任何帮助是极大的赞赏。

2.  我如何触发单价和总价。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:53:49.917

这似乎都是客户端请求，所以我建议您使用[jQuery](http://jquery.com/)来解决您的问题。我将在示例中使用的所有功能都可以在该站点上找到，并且在 stackoverflow 上有很多示例可以解决您的所有疑问。现在的问题：

1\. 我并没有真正得到你想要的，但你应该简单地使用 click 事件在 addRow 按钮上生成一个事件：

```
$('AddRow').click(function(e){
e.preventDefault(); //this avoid the default button action (submit/send)
var last_id = $('row').last().attr('id'); //retrieve the id of the last added row you probably will have to strip/transform it since id shouldn't be only number
$('row').last().append('insert here html with form fields of the new row with the (last_id+1)');
}); 
```

2\. 要检索 UnitPrice，您应该使用[ajax](http://api.jquery.com/jQuery.ajax/)调用，使用 an`$('product').change(function(){});`触发事件并通过 ajax 检索结果。填充该字段后，您可以使用简单的 jquery/javascript 函数根据 Quantity 字段动态计算总价格：

```
$('Quantity').change(function(){
     //add here control to check if fields are empty/wrongly set
    var UnitPrice = parseFloat($('UnitPrice').val());
    var Quantity = parseInt($('Quantity').val());
    $('TotalPrice').val(UnitPrice*Quantity);
}) 
```

# iphone - UITableView commitEditingStyle 不删除单元格

> ID：11665853
> 
> 赞同：3
> 
> 时间：2012-07-26T09:02:30.083
> 
> 标签：iphone, objective-c, ios, uitableview

我对删除 UITableView 中的行的概念有一个小问题。用户删除一行后，我不想触发：

```
 [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationRight]; 
```

相反，我想更改已编辑的单元格文本和背景而不隐藏它。我的方法效果很好：

> ```
> if (editingStyle == UITableViewCellEditingStyleDelete) {
>     NSMutableArray *previous_points = [self.trip_arrayOfAllPoints mutableCopy];
>     [previous_points removeObjectAtIndex:indexPath.row];
>     self.trip_arrayOfAllPoints = nil;
> 
>     self.trip_arrayOfAllPoints = [[NSMutableArray alloc] initWithCapacity:[previous_points count]];
>     self.trip_arrayOfAllPoints = [previous_points mutableCopy];
> 
>     self.trip_arrayOfAllPointsEDITED = [[NSMutableArray alloc] initWithCapacity:[previous_points count]];
>     self.trip_arrayOfAllPointsEDITED = [previous_points mutableCopy];
>     //[self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationRight];
> 
>     self.trip_isArrayOfAllPointsEDITED = YES;
> } 
> ```

但是在删除一行后，它不会在当前单元格上提交消失“DELETE”标签的动画。有没有办法绕过“Apple方式”删除行？

**编辑 - 我已经解决了**

这非常简单明了。只需将 deleteRowsAtIndexPaths 替换为：

```
 [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

在这个“删除”动画消失并且单元格仍然在它的位置之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:22:12.610

你的意思是“删除”按钮会保留，即使你按下它？在我的 iOS 5.1 模拟器上按“删除”后为空：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
```

“删除”按钮消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:15:53.847

我正在使用这段代码，它工作正常

```
//self.selectedMessageIndex is NSIndexPath object declared in header file
//self.attachments is a NSMutableArray Object

[self.attachments removeObjectAtIndex:self.selectedMessageIndex.row];

[tblvAttachmentsList deleteRowsAtIndexPaths:[NSArray arrayWithObject:self.selectedMessageIndex]
                                  withRowAnimation:UITableViewRowAnimationLeft];
[tblvAttachmentsList reloadData]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T14:00:14.893

```
self.tableView.reloadRowsAtIndexPaths([indexPath], withRowAnimation:.Automatic) 
```

这将删除带有漂亮动画的删除按钮。调用，当您知道您不会删除该行时：

```
func tableView(tableView: UITableView, commitEditingStyle editingStyle:UITableViewCellEditingStyle, forRowAtIndexPath indexPath:NSIndexPath) {
    if (editingStyle == UITableViewCellEditingStyle.Delete) {

        //An action happens here. If it was successful, page is refreshed
        //If the action fails, cell stays. I am showing an error and:
        self.tableView.reloadRowsAtIndexPaths([indexPath], withRowAnimation:.Automatic)
    }
} 
```

# php - 更新 MySQL 中的相关表

> ID：11665858
> 
> 赞同：0
> 
> 时间：2012-07-26T09:02:38.157
> 
> 标签：php, mysql, sql, database

我需要用 PHP 更新 MySQL 中的两个表。第二个表需要插入到第一个表中的行的 ID。

目前我有一些 PHP 代码循环遍历数组中的每个项目的这个过程：

1.  通过尝试获取它的 ID 来检查记录是否存在。
2.  如果记录不存在，则插入它并获取最后一个插入 ID。
3.  使用我们找到的 ID 作为外键更新第二个表。

这是非常低效的，因为要进行多个数据库调用。我宁愿将数据存储在两个数组中，每个表一个，然后在循环完成时批量插入它们。问题是我需要先获取第一个表中行的 ID，然后才能执行此操作。

这是我经常遇到的问题。这样做的最有效/“最佳实践”方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:11:43.660

创建用于在一个服务器调用中插入整个层次结构的存储过程。将所有父子记录作为 XML 提供并在过程中解析/插入记录（afaik MySql 应该具有类似于 MS SQL 的 XML 函数）。这将导致相同数量的 INSERT 语句，但是它们将在服务器端执行，这应该会提高性能。例如

```
exec MySp @myHierarchy = '<Recs><Parent Name="P1"><Child Name="C1" /><Child Name="C2"/></Parent></Recs>' 
```

# objective-c - 调整 UITableView 的大小

> ID：11665859
> 
> 赞同：0
> 
> 时间：2012-07-26T09:02:50.443
> 
> 标签：objective-c, ios, uitableview, autoresize

我正在做这个项目。目前我面临一个问题，我在一个 ViewController 中有 3 个 UITableView。它看起来像这样：

![在此处输入图像描述](../Images/5f1f083bf42b244694e34a0c301e1490.png)

现在，第一个 TableView（顶部）只有一行，大小为 55 像素，不必调整大小。接下来，第二个是 TableView，同样有一行，但是这一行必须根据它的内容来调整大小。现在这个 TableView 显示这一行：

![在此处输入图像描述](../Images/aa69c18a4d83a0ec3ada8567ab18f672.png)

此行必须调整大小取决于其中文本的长度。我计算大小的方法是：

```
if(tableView == self.usersPostOnTheWallTableView) {
    NSDictionary *propertyItems = [self.repliesItems objectAtIndex:indexPath.row];

    NSString *text = [self.postItems objectForKey:@"text"];

    NSLog(@"%@", text);

    CGSize constraintSize = CGSizeMake(280, MAXFLOAT);

    CGSize sizeText = [text sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

    self.height = MAX(sizeText.height, 44.0f);

    self.photosArray = [propertyItems objectForKey:@"attach_photos"];
    self.videosArray = [propertyItems objectForKey:@"attach_videos"];

    if((self.photosArray.count == 0) && (self.videosArray.count == 0)) {

        height += (CELL_CONTENT_MARGIN * 2);

    } else if ((self.videosArray.count > 0) && (self.photosArray.count == 0)) {

        height += 90 + (CELL_CONTENT_MARGIN * 2);

    } else if((self.photosArray.count > 0) && (self.videosArray.count == 0)) {

        height += 85 + (CELL_CONTENT_MARGIN * 2);
    }

} 
```

现在，如果文本非常小，它会很好地适合行，并且行会调整大小。比如这样：

![在此处输入图像描述](../Images/e622b14d01987ce7e1c7861c12f27fbf.png)

但是，在文本变大之后，会发生以下情况：

![在此处输入图像描述](../Images/a70b56a50c7b8c07fa9329bb252b5207.png)

![在此处输入图像描述](../Images/4c277a47f47f36884b47f5629ccba065.png)

显然我不需要在那里滚动，我会禁用它。但这里的问题是它需要文本的大小，并调整标签的大小，你可以看到它从标签的顶部和底部产生了多少空间。但它并没有把实际的文字放在那里。另一件事是它没有自行调整 TableView 的大小，当我尝试调整它的大小时，我得到了中间表与底部表的重叠。

**任何人都可以推荐任何解决方案，或者可能是另一种实现方式吗？**

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:13:56.230

你可以这样做是使用 tableviewDelegate 方法根据您的文本设置单元格高度，例如：

将为每个单元调用此方法以决定单元应具有多少高度

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
 {
    NSString *strDetails = [yourTextArray objectAtIndex:indexPath.row];
   //if(indexPath.row == 1)
   //{
     CGSize stringSize = [strDetails sizeWithFont:[UIFont fontWithName:@"Marker Felt" size:13] constrainedToSize:CGSizeMake(320, 9999) lineBreakMode:UILineBreakModeWordWrap]; // Provide text as well as font name in which your text will be displayed and constrainedToSize which defines width and height it should be maximum
     return stringSize.height+65; //Here 65 can be any value depending on Calculation  ImageView height + uppermost space + bottom space added
   //}
   //else 
   //{
   //  return 80 // anything u wishes
   //}
 } 
```

# java - nio2 和文件属性

> ID：11665861
> 
> 赞同：0
> 
> 时间：2012-07-26T09:02:54.087
> 
> 标签：java, attributes, backup, nio2

刚刚下载并安装了 NetBeans NetBeans IDE 7.2（Build 201207171143）；Java：1.7.0_03；Java HotSpot(TM) 客户端 VM 22.1-b02。这不是 Eclipse 与 JDK 6/ 的主要原因是因为我正在开始一个新项目，这将不得不访问文件和属性（备份实用程序，包括清除存档标志 - 任何人都可以分享经验吗？）。但是，安装无法识别 java.nio.file.attribute，并设置错误。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T11:07:21.127

我希望这可以帮助：

* * *

## 视窗

JDK 与所有产品安装程序捆绑在一起，除非有任何特定问题，否则建议您使用提供的 JDK 版本。

32 位 JDK 位于**IDE_HOME\jre**目录中，供 32 位产品可执行文件使用。

要在 64 位模式下运行 IDE，您需要下载并安装 64 位 JDK（不是 JRE）发行版并自行安装。当您运行 64 位**.exe**文件时，IDE 会从注册表中找到并使用它（目前仅适用于 IntelliJ IDEA，其他产品可以使用**.bat**文件在 64 位模式下运行）。

**<product>.exe**使用以下 JDK 搜索序列：

1.  **IDEA_JDK** / **WEBIDE_JDK** / **PYCHARM_JDK** / **RUBYMINE_JDK**环境变量（取决于产品，**WEBIDE_JDK**适用于 WebStorm 和 PhpStorm）

2.  **..\jre**目录
3.  系统**注册表**
4.  **JDK_HOME**环境变量
5.  **JAVA_HOME**环境变量

**idea64.exe**使用这个 JDK 搜索序列：

1.  **IDEA_JDK_64**环境变量
2.  **..\jre64**目录
3.  系统**注册表**
4.  **JDK_HOME**环境变量
5.  **JAVA_HOME**环境变量

也可以使用位于**bin目录中的****<product>.bat**文件启动 IDE ，它使用以下 JDK 搜索序列：

 **1.  **IDEA_JDK** / **WEBIDE_JDK** / **PYCHARM_JDK** / **RUBYMINE_JDK**环境变量（取决于产品）
2.  **..\jre**目录
3.  **JDK_HOME**环境变量
4.  **JAVA_HOME**环境变量

环境变量**必须指向JDK安装主目录**，例如：

```
c:\Program Files (x86)\Java\jdk1.7.0_17
```

*   /create-i4j-log 命令行开关可与 .exe 一起使用，以跟踪 JDK 搜索序列并找出选择特定 JDK 的原因。
*   IDE 实际使用的 JDK 版本可以在 Help | 关于对话框（打开任何项目以访问菜单）。
*   根据产品定义 **IDEA_JDK**  /  **WEBIDE_JDK**  /  **PYCHARM_JDK**  /  **RUBYMINE_JDK变量以覆盖来自****IDE_HOME\jre** 的默认版本。
*   使用[Rapid Environment Editor](http://www.rapidee.com/en/download)添加/编辑变量，它会检测到不正确的路径。

* * *

来自： [https ://intellij-support.jetbrains.com/entries/23455956-Selecting-the-JDK-version-the-IDE-will-run-under](https://intellij-support.jetbrains.com/entries/23455956-Selecting-the-JDK-version-the-IDE-will-run-under)**

# forms - 需要在 joomla 中编写一个管理模块来管理来自前端的内容

> ID：11665862
> 
> 赞同：0
> 
> 时间：2012-07-26T09:02:54.123
> 
> 标签：forms, joomla, module, admin, joomla1.6

我对 Joomla 很陌生，我想为 Joomla 管理员编写一个模块来创建一个表单以在管理员端添加名称、标题和文件上传，并且我想管理列表中的内容列表作为 Joomla 默认的列表行为。它在 Drupal 中非常简单，例如创建内容类型和使用内容类型输入的数据可以使用视图进行审核。就像那是在 joomla 中可用的任何免费模块。

对于前端，我们通过 Web 服务提供数据，因此我们无需担心前端。只有 cms 以表格结尾并记录审核。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:11:14.893

已经有许多扩展允许您执行此操作。它们都列在 JED 的[Forms Extensions](http://extensions.joomla.org/extensions/contacts-and-feedback/forms)下。

# rest - xpath 不能在 Jersey REST 上工作

> ID：11665871
> 
> 赞同：1
> 
> 时间：2012-07-26T09:03:18.203
> 
> 标签：rest

我有一个非常复杂的 XML 文件，当我构建一个 java 项目并使用 xpath 解析它时，它工作得很好，但是当我将它打包为一个 RESTFul WS 时，它就无法再解析了。有没有人遇到过这个问题？我使用球衣来构建 REST。

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
factory.setNamespaceAware(true);
DocumentBuilder builder = factory.newDocumentBuilder();
Document CDAdoc = builder.parse(new ByteArrayInputStream(cdaDocument));

XPath xpath = XPathFactory.newInstance().newXPath();
xpath.setNamespaceContext(new MetadataNamespaceContext());
XPathExpression xPathExpression = xpath.compile("/Document/Time/@value");
String creatTime =  xPathExpression.evaluate(doc); 
```

在 java 项目中我可以获得 creatTime 的值，但在 REST 中我无法获得该值。

非常感谢。

# html - 获取标签中不包含的文本 htmlagilitypack vb.net

> ID：11665872
> 
> 赞同：2
> 
> 时间：2012-07-26T09:03:27.647
> 
> 标签：html, html-agility-pack, vb.net-2010

我只是想知道如何从不在 HTML 标签之间的网站（使用 vb.net）获取文本（例如，不是这样`<b> hello </b>`）。我知道我可以使用 HtmlAgilityPack 并且我一直在阅读和阅读，但我没有得到任何可以帮助我的东西。

我需要像这样提取文本：

```
<td colspan="2">
<b>Some text:</b>
I need to extract this text
<a href="#">Some text</a>
<a href="#">Some text 2</a>
... 
```

这是一个需要先登录的网站，所以我不能给你网址。我需要从网站中提取它，而不是从 HTML 文件或 var String 中提取。

# c# - IQuery 未按预期运行

> ID：11665878
> 
> 赞同：0
> 
> 时间：2012-07-26T09:04:02.670
> 
> 标签：c#, hibernate

我有以下方法：

```
ServiceType GetWithValidServices(long ServiceTypeID); 
```

和以下功能：

```
public ServiceType GetWithValidServices(long ServiceTypeID)
    {
        IQuery query = CurrentSession.CreateQuery("select dl.ServiceType from Service as dl"
         + "where dl.ServiceType.ID = :id and dl.IsValid = true"
         + "order by dl.HavePriority desc");

        query.SetInt64("id", ServiceTypeID);

        var dlArt = query.UniqueResult<ServiceType>();
        return dlArt;
    } 
```

在以下方法中，我调用上述函数：

```
 public ServiceCollection GetService(long ServiceTypeID)
    {

        ServiceType d = DomainToWebgridMapper.GetWebgridServiceType(DaoFactory.Instance.ServiceTypeDao.GetWithValidService(ServiceTypeID));

        return d.Service;
    } 
```

我的问题是查询运行不正确。我可以看到服务，但是 dl.IsValid 没有运行的过滤器，他也没有按优先级排序类型。

我在其他几个方法中使用 where 子句，它工作正常。

我不知道这里出了什么问题。也许有人可以帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:30:24.107

我想我明白你的问题是什么；它与您如何连接字符串以创建查询有关。考虑一下：

```
string query = "select dl.ServiceType from Service as dl"
     + "where dl.ServiceType.ID = :id and dl.IsValid = true"
     + "order by dl.HavePriority desc"; 
```

因为您没有在字符串的开头/结尾插入任何空格或换行符，所以您的查询变成了这样：

```
select dl.ServiceType from Service as dlwhere dl.ServiceType.ID = :id and dl.IsValid = trueorder by dl.HavePriority desc
                                      ^^^^^^^                                          ^^^^^^^^^ 
```

看看我在哪里标记了问题？要解决此问题，请在除了要连接的最后一个字符串之外的所有字符串的末尾添加一个额外的空格来组成查询，或者使用类似[逐字字符串文字](http://msdn.microsoft.com/en-us/library/362314fe.aspx)的内容。

```
IQuery query = CurrentSession.CreateQuery(
    "select dl.ServiceType from Service as dl " +
    "where dl.ServiceType.ID = :id and dl.IsValid = true " +
    "order by dl.HavePriority desc"
); 
```

# android - 当我在android中降低标签高度时如何删除黑色背景

> ID：11665883
> 
> 赞同：0
> 
> 时间：2012-07-26T09:04:28.617
> 
> 标签：android, android-layout, background, tabs

我`tabs`在我的 android 应用程序中使用。当我降低`tab`身高时，我看到那个空间上有黑色背景。如何删除它？

![标签](../Images/717e93506b8e984c15c6f0d75fcdc0df.png)

谢谢。

# javascript - 如何将带有逗号千位分隔符的字符串解析为数字？

> ID：11665884
> 
> 赞同：138
> 
> 时间：2012-07-26T09:04:36.163
> 
> 标签：javascript, number-formatting

我有`2,299.00`一个字符串，我试图将它解析为一个数字。我尝试使用`parseFloat`，结果为 2。我猜逗号是问题所在，但我将如何以正确的方式解决这个问题？只是去掉逗号？

```
var x = parseFloat("2,299.00")
console.log(x);
```

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-07-26T09:08:50.553

是的，删除逗号：

```
let output = parseFloat("2,299.00".replace(/,/g, ''));
console.log(output);
```

* * *

## 回答 #2

> 赞同：154
> 
> 时间：2017-02-02T10:45:52.080

删除逗号有潜在的危险，因为正如其他人在评论中提到的那样，许多语言环境使用逗号来表示不同的东西（比如小数位）。

我不知道你从哪里得到你的字符串，但在世界上的某些地方`"2,299.00"`=`2.299`

该`Intl`对象可能是解决此问题的好方法，但不知何故，他们设法仅使用`Intl.NumberFormat.format()`API 而没有`parse`对应物来发布规范:(

以任何 i18n 理智的方式将带有文化数字字符的字符串解析为机器可识别的数字的唯一方法是使用利用 CLDR 数据的库来覆盖格式化数字字符串的所有可能方式[http://cldr.unicode。组织/](http://cldr.unicode.org/)

到目前为止，我遇到的两个最佳 JS 选项：

*   [https://github.com/google/closure-library/tree/master/closure/goog/i18n](https://github.com/google/closure-library/tree/master/closure/goog/i18n)
*   [https://github.com/globalizejs/globalize](https://github.com/globalizejs/globalize)

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2017-07-25T16:44:56.603

在现代浏览器上，您可以使用内置的[Intl.NumberFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat)来检测浏览器的数字格式并将输入标准化以匹配。

```
function parseNumber(value, locales = navigator.languages) {
  const example = Intl.NumberFormat(locales).format('1.1');
  const cleanPattern = new RegExp(`[^-+0-9${ example.charAt( 1 ) }]`, 'g');
  const cleaned = value.replace(cleanPattern, '');
  const normalized = cleaned.replace(example.charAt(1), '.');

  return parseFloat(normalized);
}

const corpus = {
  '1.123': {
    expected: 1.123,
    locale: 'en-US'
  },
  '1,123': {
    expected: 1123,
    locale: 'en-US'
  },
  '2.123': {
    expected: 2123,
    locale: 'fr-FR'
  },
  '2,123': {
    expected: 2.123,
    locale: 'fr-FR'
  },
}

for (const candidate in corpus) {
  const {
    locale,
    expected
  } = corpus[candidate];
  const parsed = parseNumber(candidate, locale);

  console.log(`${ candidate } in ${ corpus[ candidate ].locale } == ${ expected }? ${ parsed === expected }`);
}
```

他们显然有一些优化和缓存的空间，但这在所有语言中都可靠地工作。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-07-26T09:06:45.573

删除任何不是数字、小数点或减号 ( `-`) 的内容：

```
var str = "2,299.00";
str = str.replace(/[^\d\.\-]/g, ""); // You might also include + if you want them to be able to type it
var num = parseFloat(str); 
```

[更新的小提琴](http://jsfiddle.net/BPF68/2/)

请注意，它不适用于科学计数法中的数字。如果您愿意，请将`replace`行更改为添加`e`, `E`, 和`+`可接受的字符列表：

```
str = str.replace(/[^\d\.\-eE+]/g, ""); 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2017-04-17T09:37:19.957

通常您应该考虑使用不允许自由文本输入数值的输入字段。但在某些情况下，您可能需要猜测输入格式。例如，德国的 1.234,56 表示美国的 1,234.56。有关使用逗号作为十进制的国家/地区列表，请参阅[https://salesforce.stackexchange.com/a/21404](https://salesforce.stackexchange.com/a/21404)。

我使用以下函数进行最佳猜测并去除所有非数字字符：

```
function parseNumber(strg) {
    var strg = strg || "";
    var decimal = '.';
    strg = strg.replace(/[^0-9$.,]/g, '');
    if(strg.indexOf(',') > strg.indexOf('.')) decimal = ',';
    if((strg.match(new RegExp("\\" + decimal,"g")) || []).length > 1) decimal="";
    if (decimal != "" && (strg.length - strg.indexOf(decimal) - 1 == 3) && strg.indexOf("0" + decimal)!==0) decimal = "";
    strg = strg.replace(new RegExp("[^0-9$" + decimal + "]","g"), "");
    strg = strg.replace(',', '.');
    return parseFloat(strg);
} 
```

在这里试试：[https ://plnkr.co/edit/9p5Y6H?p=preview](https://plnkr.co/edit/9p5Y6H?p=preview)

例子：

```
1.234,56 € => 1234.56
1,234.56USD => 1234.56
1,234,567€ => 1234567
1.234.567 => 1234567
1,234.567 => 1234.567
1.234 => 1234 // might be wrong - best guess
1,234 => 1234 // might be wrong - best guess
1.2345 => 1.2345
0,123 => 0.123 
```

该函数有一个弱点：如果您有 1,123 或 1.123，则无法猜测格式 - 因为取决于语言环境格式，两者都可能是逗号或千位分隔符。在这种特殊情况下，该函数会将分隔符视为千位分隔符并返回 1123。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-07-03T14:54:08.967

令人费解的是，它们包含一个**toLocaleString**但没有一个**parse**方法。IE6+至少支持不带参数的**toLocaleString 。**

对于**i18n**解决方案，我想出了这个：

首先检测用户的语言环境小数点分隔符：

```
var decimalSeparator = 1.1;
decimalSeparator = decimalSeparator.toLocaleString().substring(1, 2); 
```

如果字符串中有多个小数点分隔符，则对数字进行规范化：

```
var pattern = "([" + decimalSeparator + "])(?=.*\\1)";separator
var formatted = valor.replace(new RegExp(pattern, "g"), ""); 
```

最后，删除任何不是数字或小数分隔符的内容：

```
formatted = formatted.replace(new RegExp("[^0-9" + decimalSeparator + "]", "g"), '');
return Number(formatted.replace(decimalSeparator, ".")); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-04-04T12:37:15.307

如果您想避免 David Meister 发布的问题并且您确定小数位数，您可以替换所有点和逗号并除以 100，例如：

```
var value = "2,299.00";
var amount = parseFloat(value.replace(/"|\,|\./g, ''))/100; 
```

或者如果你有 3 位小数

```
var value = "2,299.001";
var amount = parseFloat(value.replace(/"|\,|\./g, ''))/1000; 
```

是否要使用 parseInt、parseFloat 或 Number 取决于您。此外，如果您想保留小数位数，您可以使用函数 .toFixed(...)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-10-22T21:39:22.520

这会将任何语言环境中的数字转换为正常数字。也适用于小数点：

```
function numberFromLocaleString(stringValue, locale){
    var parts = Number(1111.11).toLocaleString(locale).replace(/\d+/g,'').split('');
    if (stringValue === null)
        return null;
    if (parts.length==1) {
        parts.unshift('');
    }   
    return Number(String(stringValue).replace(new RegExp(parts[0].replace(/\s/g,' '),'g'), '').replace(parts[1],"."));
} 
```

```
//Use default browser locale
numberFromLocaleString("1,223,333.567") //1223333.567

//Use specific locale
numberFromLocaleString("1 223 333,567", "ru") //1223333.567 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-07-21T18:36:19.297

如果您有数百万的数字，所有这些答案都会失败。

3,456,789 将简单地使用替换方法返回 3456。

简单地删除逗号的最正确答案必须是。

```
var number = '3,456,789.12';
number.split(',').join('');
/* number now equips 3456789.12 */
parseFloat(number); 
```

或者简单地写。

```
number = parseFloat(number.split(',').join('')); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-03-19T03:23:43.540

```
const parseLocaleNumber = strNum => {
    const decSep = (1.1).toLocaleString().substring(1, 2);
    const formatted = strNum
        .replace(new RegExp(`([${decSep}])(?=.*\\1)`, 'g'), '')
        .replace(new RegExp(`[^0-9${decSep}]`, 'g'), '');
    return Number(formatted.replace(decSep, '.'));
}; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-05-06T11:40:58.090

使用此功能，您将能够以多种格式格式化值，例如`1.234,56`and `1,234.56`，甚至出现 and 等`1.234.56`错误`1,234,56`

```
/**
 * @param {string} value: value to convert
 * @param {bool} coerce: force float return or NaN
 */
function parseFloatFromString(value, coerce) {
    value = String(value).trim();

    if ('' === value) {
        return value;
    }

    // check if the string can be converted to float as-is
    var parsed = parseFloat(value);
    if (String(parsed) === value) {
        return fixDecimals(parsed, 2);
    }

    // replace arabic numbers by latin
    value = value
    // arabic
    .replace(/[\u0660-\u0669]/g, function(d) {
        return d.charCodeAt(0) - 1632;
    })

    // persian
    .replace(/[\u06F0-\u06F9]/g, function(d) {
        return d.charCodeAt(0) - 1776;
    });

    // remove all non-digit characters
    var split = value.split(/[^\dE-]+/);

    if (1 === split.length) {
        // there's no decimal part
        return fixDecimals(parseFloat(value), 2);
    }

    for (var i = 0; i < split.length; i++) {
        if ('' === split[i]) {
            return coerce ? fixDecimals(parseFloat(0), 2) : NaN;
        }
    }

    // use the last part as decimal
    var decimal = split.pop();

    // reconstruct the number using dot as decimal separator
    return fixDecimals(parseFloat(split.join('') +  '.' + decimal), 2);
}

function fixDecimals(num, precision) {
    return (Math.floor(num * 100) / 100).toFixed(precision);
} 
```

```
parseFloatFromString('1.234,56')
"1234.56"
parseFloatFromString('1,234.56')
"1234.56"
parseFloatFromString('1.234.56')
"1234.56"
parseFloatFromString('1,234,56')
"1234.56" 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-06-08T05:14:47.613

```
Number("2,299.00".split(',').join(''));   // 2299 
```

split 函数使用“，”作为分隔符将字符串拆分为一个数组，并返回一个数组。
join 函数连接从 split 函数返回的数组元素。
Number() 函数将连接的字符串转换为数字。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-03-13T22:09:11.500

如果您想要一个 l10n 答案，请这样做。示例使用货币，但您不需要它。如果您必须支持旧版浏览器，则需要对 Intl 库进行填充。

```
var value = "2,299.00";
var currencyId = "USD";
var nf = new Intl.NumberFormat(undefined, {style:'currency', currency: currencyId, minimumFractionDigits: 2});

value = nf.format(value.replace(/,/g, "")); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-03-02T12:22:05.547

如果你有一小部分语言环境来支持你可能会更好地通过硬编码几个简单的规则：

```
function parseNumber(str, locale) {
  let radix = ',';
  if (locale.match(/(en|th)([-_].+)?/)) {
    radix = '.';
  }
  return Number(str
    .replace(new RegExp('[^\\d\\' + radix + ']', 'g'), '')
    .replace(radix, '.'));
} 
```

# c# - 您可以在 C# 类型基类的泛型列表中混合派生类和基类吗？

> ID：11665887
> 
> 赞同：1
> 
> 时间：2012-07-26T09:04:40.763
> 
> 标签：c#, list, generics, derived-types

您可以在 C# 类型基类的泛型列表中混合派生类和基类吗？我不明白为什么不...而且我没有看到一个明确的答案...但是今天玩了一个类型基类的通用列表，其中也有派生类，我没有看到任何问题。但我想知道是否可能存在潜在问题，除了派生/基类中始终固有的通常的向上/向下转换限制。我问的原因：我不知道 C# 的通用列表是否与以前在 C++ 中称为 ArrayList 的工作方式相同，也就是说，在编译过程中你是否会因为像这样混合“类型”而受到任何抱怨（基类与派生类）。我今天运行了许多示例而没有抱怨，但想验证是否存在问题的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:20:39.513

C# 类类型是引用类型。C++ 类类型在 .NET 世界中称为值类型。适当的比较将是基类指针的 C++ 列表，您可以在其中存储指向派生类的指针而不会出现任何问题。

所以是的，没关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T20:24:30.433

```
 using System;
 using System.Collections.Generic;

 namespace DoFactory.GangOfFour.Composite.Structural
{
/// <summary>
/// MainApp startup class for Structural 
/// Composite Design Pattern.  
/// </summary>
class MainApp
{
    /// <summary>
    /// Entry point into console application.
    /// </summary>
    static void Main()
    {
        // Create a tree structure
        Composite root = new Composite("root");
        root.Add(new Leaf("Leaf A")); //1st Add for root
        root.Add(new Leaf("Leaf B")); //2nd Add for root
        Console.WriteLine(" ....");
        root.Display(1);
        Console.WriteLine("...........");
        Composite comp = new Composite("Composite X");
        comp.Add(new Leaf("Leaf XA"));
        root.Add(comp); //add comp to root //3rd Add for root

        DerivedComposite myDerivedComposite = new DerivedComposite("derived member",      1000);
        Console.WriteLine("Show the special int, string for DerivedComposite");
        myDerivedComposite.mySpecialVariablesAre();
        Console.WriteLine("........");

        root.Add(myDerivedComposite); //4th Add for root

        Composite SecondRoot = new Composite("SecondRoot");
        SecondRoot.Add(new Leaf("Leaf fA"));

        SecondRoot.Add(myDerivedComposite); //add to SecondRoot

        root.Add(SecondRoot); //add comp to root ; //5th Add for root
        //// Recursively display tree again, after adding
        root.Display(1);

        Console.WriteLine("Now get List read back");
        Console.WriteLine("show List elements for root (should be five)");
        root.DisplayList();

        Console.WriteLine("Show List elements for comp (should be one)");
        comp.DisplayList();
        Console.WriteLine("Show List ele for SecondRoot (should be 2)");
         SecondRoot.DisplayList();

        // Wait for user
        Console.ReadKey();
    }
}

/// <summary>
/// The 'Component' abstract class
/// </summary>
abstract class Component
{
    protected string name;

    // Constructor
    public Component(string name)
    {
        this.name = name;
    }

    public abstract void Add(Component c);
    public abstract void Remove(Component c);
    public abstract void Display(int depth);
    public abstract void printSpecialInt();
}

/// <summary>
/// The 'Composite' class
/// </summary>
class Composite : Component
{
    private List<Component> _children = new List<Component>(); 
    //This Generic List was potentially troublesome but it executed fine
    protected int specialbaseInt;
    // Constructor
    public Composite(string name)
        : base(name)
    {
        specialbaseInt = -1;
    }

    public override void Add(Component component)
    {
        _children.Add(component);
    }

    public override void Remove(Component component)
    {
        _children.Remove(component);
    }

    public override void Display(int depth)
    {
        Console.WriteLine(new String('-', depth) + name);

        // Recursively display child nodes
        foreach (Component component in _children)
        {
            component.Display(depth + 2); //calls .Display again, is recursive
        }
    }

    public void DisplayList()
    {
        int ijk = _children.Count;
        Console.WriteLine("# elements in this List: {0}", ijk);
        foreach (Component c in _children)
        {
            int ii = c.GetHashCode();
            Type type = c.GetType();
            Console.WriteLine("GetHashCode, Type on list: {0}, {1}", ii, type.FullName);

            c.printSpecialInt();

        }
    }

    public override void printSpecialInt()
    {
        Console.WriteLine("special int (at base class): {0}", specialbaseInt);
    }
}

class DerivedComposite : Composite
{
    public string myExtraString;
    public int mySpecialInt;

    public DerivedComposite(string name,int ianint)
        : base(name)
    {
        myExtraString = name;
        mySpecialInt = ianint + 10;
        specialbaseInt = ianint;
    }

    public void mySpecialVariablesAre()
    {
        Console.WriteLine("The string, int, specialbaseInt are!- {0}, {1}, {2}", myExtraString, mySpecialInt, specialbaseInt);
    }

    public override void printSpecialInt()
    {
        Console.WriteLine("The string, int, specialbaseInt are (at derived): {0}, {1},    {2}", myExtraString, mySpecialInt, specialbaseInt);
    }

}

/// <summary>
/// The 'Leaf' class
/// </summary>
class Leaf : Component
{
    // Constructor
    public Leaf(string name)
        : base(name)
    {
    }

    public override void Add(Component c)
    {
        Console.WriteLine("Cannot add to a leaf");
    }

    public override void Remove(Component c)
    {
        Console.WriteLine("Cannot remove from a leaf");
    }

    public override void Display(int depth)
    {
        Console.WriteLine(new String('-', depth) + name);
    }

    public override void printSpecialInt()
    {
        Console.WriteLine("at Leaf printSpecialInt");
    }
}

/// <summary>
/// The 'Leafail' class //try and make it fail
/// </summary>
class Leafail : Component
{
    // Constructor
    public Leafail(string name)
        : base(name)
    {
        myExtraString = "Hi, I am Leafail";
        mySpecialInt = 123;
    }

    public string myExtraString;
    public int mySpecialInt;

    public override void Add(Component c)
    {
        Console.WriteLine("Cannot add to a leafail");
    }

    public override void Remove(Component c)
    {
        Console.WriteLine("Cannot remove from a leafail");
    }

    public override void Display(int depth)
    {
        Console.WriteLine(new String('-', depth) + name);
    }

    public void mySpecialVariablesAre()
    {
        Console.WriteLine("The string, int are: {0}, {1}", myExtraString,mySpecialInt);
    }
    public override void printSpecialInt()
     {
         Console.WriteLine("at Leafail printSpecialInt");
     }
}

} 
```

# javascript - 如何将弹出消息放置在 div 的中心？

> ID：11665894
> 
> 赞同：0
> 
> 时间：2012-07-26T09:05:07.863
> 
> 标签：javascript, jquery, html, css

我有一个 div 块，我正在根据下面的计算计算它的宽度和偏移高度。现在我试图将消息持有者块放在 div 块之间。

我的目标是在 div“oID_1”的中心显示消息“弹出”块。有谁能够帮我？

```
<BODY>
  <head>
  <script>
  function msgBox(message) {
    var msgbox = document.getElementById("msgbox");
    msgbox.innerHTML = message;
    var x = (window.innerWidth / 2) - (msgbox.offsetWidth / 2);
    var y = (window.offsetHeight / 2) - (msgbox.offsetHeight / 2);              
    msgbox.style.top = y;
    msgbox.style.left = x;
    msgbox.style.display = "block";
  }
</script>
<style type="text/css">
  .popup {
    width:100px;
    height:100px;
    position:absolute;
    display:none;
    border:1px solid green;
  }
</style>
<script type="text/javascript">
  function showPopup(id) {
    var popup = document.getElementById(id);
    var divblock=document.getElementById('oID_1');
    width=parseInt(oID_1.style.width);
    var x = (width / 2) - (popup.offsetWidth / 2);
    var y = (divblock.offsetHeight / 2) - (popup.offsetHeight / 2);              
    popup.style.top = y;
    popup.style.left = x;
    popup.style.display = "block";
  }
</script>
</head>
<DIV CLASS="body">
  <center>
  <div id="popup" class="popup">
    This a vertically and horizontally centered popup.
  </div>
  <a onclick="showPopup('popup');">Show Popup</a>
  <DIV ID="oID_1" STYLE=" width:300; height:300;border:1px solid red">
  </DIV>
  </center>
</DIV> 
</BODY> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:13:53.627

如果你的元素是绝对定位的并且你知道它的宽度，你总是可以使用 left: 50%; 左边距：-（半角）px

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:02:32.923

Take a look at the following website: [http://bushraaadit.appspot.com/](http://bushraaadit.appspot.com/)

Now the way they have centered the div is quite simple. First we'll take a look at the HTML structure:

```
<div id="container">
    <div id="wrapper">
        <div id="center"></div>
    </div>
</div> 
```

Okay so we have three nested divs. The first one (the `container`) is the div within which you want to center the third div (`center`). The second div (the `wrapper`) is used to help center it. Think of it as a center tag which centers horizontally and vertically.

Now for the CSS (yes it works purely on CSS and automatically re-centers itself when the `container` div is resized). Give the `container` div any width and height you want. Now for the `wrapper` and the `center` divs.

The `wrapper` div **must have** the same width and height as the `center` div. If the `center` div needs an explicit width and height (say 50% of the container) then set it on the `wrapper` and set the width and height of the `center` as 100% (which is 100% of 50% of the container). Otherwise make the `wrapper` float to the left (doing so will automatically shrink it to the size of the `center` div).

Finally to center it we first set the position of the `wrapper` and `center` to relative. Then the `wrapper` div is positioned 50% to the right and the bottom from where it is (50% of the container). Then the `center` div is positioned 50% to the left and top from where it is (50% of the `wrapper` which is 50% of itself).

The resulting CSS is something like:

```
html, body, #container {
    height: 100%;
    width: 100%;
}

body {
    margin: 0;
}

#container {
    background-color: #FFF0F5;
}

#wrapper {
    height: 50%;
    left: 50%;
    position: relative;
    top: 50%;
    width: 50%;
}

#center {
    background-color: #FFE4E1;
    bottom: 50%;
    height: 100%;
    position: relative;
    right: 50%;
    width: 100%;
} 
```

The end result can be seen in this fiddle: [http://jsfiddle.net/a3kVj/](http://jsfiddle.net/a3kVj/)

Hope that helps.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:10:12.783

可以使用 jQuery 吗？看看[center-div-with-jquery](http://manos.malihu.gr/center-div-with-jquery)

# windows - 如何在批处理文件编程中搜索文件名中的特定字符串？

> ID：11665896
> 
> 赞同：0
> 
> 时间：2012-07-26T09:05:16.007
> 
> 标签：windows, batch-file

我必须搜索包含文件的特定文件夹`*.txt`，但文件的名称包含一些日期，如`20120712`，`20120713`等等。

我想搜索具有特定日期或更长时间的文件并将它们移动到另一个文件夹。如何使用批处理搜索包含某个日期或更长时间的文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:55:43.433

尝试类似：

```
@echo off

setlocal

set SEARCH_DIR=c:\temp\source
set TARGET_DIR=c:\temp\target
set DATE_THRESHOLD=20120720

REM ***
REM *** NEED TO MODIFY REGEX ACCORDINGLY (THIS REGEX EXPECTS THE FILES TO BE CALLED YYYYMMDD.TXT).
REM ***
for /f %%F in ('dir /b %SEARCH_DIR%\*.txt 2^>nul ^| %SystemRoot%\System32\findstr.exe /r /c:"^[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]\.txt"') do (
    call :PROCESS_FILE "%%F"
    )

endlocal

goto END

:PROCESS_FILE

set PF_FILENAME=%1
set PF_FILENAME=%PF_FILENAME:"=%

REM ***
REM *** EXTRACT THE NUMERIC PART FROM THE FILENAME.  THIS WILL NEED MODIFYING IF YOUR FILENAME FORMAT IS NOT YYYYMMDD.TXT.
REM ***
set /a PF_YYYYMMDD=%PF_FILENAME:~0,8%

echo Processing file [%PF_FILENAME%]...

REM ***
REM *** CHECK DATE.
REM ***
if %PF_YYYYMMDD% LEQ %DATE_THRESHOLD% (
    echo File not old enough - skipping.
    goto END
    )

REM ***
REM *** MOVE FILE.
REM ***
echo Moving file....
move "%SEARCH_DIR%\%PF_FILENAME%" "%TARGET_DIR%"
if exist "%SEARCH_DIR%\%PF_FILENAME%" (
    echo ERROR : Failed to move file.
) else (
    echo File moved successfully.
)

goto END

:END 
```

# ruby - 在不破坏锚点和别名的情况下读写 YAML 文件？

> ID：11665897
> 
> 赞同：19
> 
> 时间：2012-07-26T09:05:25.403
> 
> 标签：ruby, yaml

我需要打开一个 YAML 文件，其中使用了别名：

```
defaults: &defaults
  foo: bar
  zip: button

node:
  <<: *defaults
  foo: other 
```

这显然扩展为等效的 YAML 文档：

```
defaults:
  foo: bar
  zip: button

node:
  foo: other
  zip: button 
```

它`YAML::load`读作。

我需要在这个 YAML 文档中设置新的密钥，然后将其写回磁盘，尽可能保留原始结构。

我看过[YAML::Store](http://ruby-doc.org/stdlib-1.9.3/libdoc/yaml/rdoc/YAML/Store.html)，但这完全破坏了别名和锚点。

是否有任何可用的东西可以类似于以下内容：

```
thing = Thing.load("config.yml")
thing[:node][:foo] = "yet another" 
```

将文档另存为：

```
defaults: &defaults
  foo: bar
  zip: button

node:
  <<: *defaults
  foo: yet another 
```

?

我选择使用 YAML 是因为它可以很好地处理这种别名，但编写包含别名的 YAML 在现实中似乎有点暗淡。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-18T21:39:46.090

用于`<<`指示别名映射应合并到当前映射不是核心 Yaml 规范的[一部分，但它是标签存储库](http://yaml.org/type/merge.html)的一部分。

Ruby 提供的当前 Yaml 库 - Psych - 提供了`dump`和`load`方法，这些方法允许轻松序列化和反序列化 Ruby 对象，并使用标签存储库中的各种隐式类型转换，包括`<<`合并哈希。如果需要，它还提供工具来执行更多低级 Yaml 处理。不幸的是，它不允许有选择地禁用或启用标签存储库的特定部分——这是一个全有或全无的事情。尤其[是对 hashes 的处理非常](https://github.com/tenderlove/psych/blob/v1.3.4/lib/psych/visitors/to_ruby.rb#L261-274)[重要`<<`](https://github.com/tenderlove/psych/blob/v1.3.4/lib/psych/visitors/to_ruby.rb#L261-274)。

实现您想要的一种方法是提供您自己的 Psych类的子`ToRuby`类并覆盖此方法，以便它仅将映射键`<<`视为文字。这涉及覆盖 Psych 中的私有方法，因此您需要小心一点：

```
require 'psych'

class ToRubyNoMerge < Psych::Visitors::ToRuby
  def revive_hash hash, o
    @st[o.anchor] = hash if o.anchor

    o.children.each_slice(2) { |k,v|
      key = accept(k)
      hash[key] = accept(v)
    }
    hash
  end
end 
```

然后你会像这样使用它：

```
tree = Psych.parse your_data
data = ToRubyNoMerge.new.accept tree 
```

使用您示例中的 Yaml，`data`看起来像

```
{"defaults"=>{"foo"=>"bar", "zip"=>"button"},
 "node"=>{"<<"=>{"foo"=>"bar", "zip"=>"button"}, "foo"=>"other"}} 
```

请注意`<<`作为文字键。此外，键下的散列与`data["defaults"]`键下的散列*相同*`data["node"]["<<"]`，即它们具有相同的`object_id`. 您现在可以根据需要操作数据，当您将其写为 Yaml 时，锚点和别名仍将保留，尽管锚点名称会发生​​变化：

```
data['node']['foo'] = "yet another"
puts Yaml.dump data 
```

产生（Psych 使用`object_id`哈希的 来确保唯一的锚名称（当前版本的 Psych 现在使用序列号而不是`object_id`））：

```
---
defaults: &2151922820
  foo: bar
  zip: button
node:
  <<: *2151922820
  foo: yet another 
```

如果您想控制锚名称，您可以提供自己的[`Psych::Visitors::Emitter`](https://github.com/tenderlove/psych/blob/v1.3.4/lib/psych/visitors/emitter.rb). 这是一个基于您的示例的简单示例，并假设只有一个锚点：

```
class MyEmitter < Psych::Visitors::Emitter
  def visit_Psych_Nodes_Mapping o
    o.anchor = 'defaults' if o.anchor
    super
  end

  def visit_Psych_Nodes_Alias o
    o.anchor = 'defaults' if o.anchor
    super
  end
end 
```

当与`data`上面的修改后的哈希一起使用时：

```
#create an AST based on the Ruby data structure
builder = Psych::Visitors::YAMLTree.new
builder << data
ast = builder.tree

# write out the tree using the custom emitter
MyEmitter.new($stdout).accept ast 
```

输出是：

```
---
defaults: &defaults
  foo: bar
  zip: button
node:
  <<: *defaults
  foo: yet another 
```

（*更新：* [另一个问题](https://stackoverflow.com/q/13583588/214790)询问如何使用多个锚点来执行此操作，我想出了一种[在序列化时保留锚点名称的可能更好的方法](https://stackoverflow.com/a/13588273/214790)。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T16:36:23.577

YAML 有别名，它们可以往返，但你可以通过哈希合并禁用它。`<<`作为映射键似乎是 YAML 的非标准扩展（在 1.8 的 syck 和 1.9 的 psych 中）。

```
require 'rubygems'
require 'yaml'

yaml = <<EOS
defaults: &defaults
  foo: bar
  zip: button

node: *defaults
EOS

data = YAML.load yaml
print data.to_yaml 
```

印刷

```
--- 
defaults: &id001 
  zip: button
  foo: bar
node: *id001 
```

但是`<<`在您的数据中将别名哈希合并到一个不再是别名的新哈希中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T10:16:07.403

你试过[心理](http://rubygems.org/gems/psych)吗？另一个关于心理[的问题](https://stackoverflow.com/questions/9640277/how-to-dump-strings-in-yaml-using-literal-scalar-style)。

# php - 通过 php 和 fpdf 从表格中获取数据的 pdf 条码

> ID：11665899
> 
> 赞同：0
> 
> 时间：2012-07-26T09:05:42.323
> 
> 标签：php, mysql, pdf, barcode, fpdf

我想在 pdf 文件中制作学生证，并想为每个学生生成一个条形码，其中包含他们的详细信息。

我的桌子会像

学生桌

```
Name varchar(55);
Class varchar(20);
RollNo int(4);
Session int(10);
Semester int(4);
Phone int(12);
Address varchar(100); 
```

现在我只想在条形码中有姓名、班级、学期和会话。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:21:35.407

我使用[PDFB 库](http://chir.ag/projects/pdfb/)创建 PDF 格式的条形码。

# html - HTML - 将用户创建的 HTML 插入 HTML 页面：转义和丢弃格式

> ID：11665900
> 
> 赞同：0
> 
> 时间：2012-07-26T09:05:42.877
> 
> 标签：html

我有一个 HTML 页面，需要在管理区域（例如博客）上显示用户生成的一些 HTML。问题是用户有时需要将表格和其他“垃圾”内容从 Word/Excel 复制粘贴到 WYSIWYG 编辑器（具有适当的“从 Word 粘贴”功能）。这会导致生成的 HTML 代码非常脏。

除非其中一些页面显示完全错误，否则这不会成为问题：用户的 HTML 代码之后的其他 div 不在其应有的位置，不尊重浮点数......等等......

我试着放一个div：

```
<div style="clear: both;"></div> 
```

没有成功。我什至尝试使用 iFrame，但 iFrame 只接受外部网页（如果适用的话......）。

问题是：是否有任何标签或方法可以将 HTML 代码的一部分放入网页中，从而丢弃此代码之后的所有格式？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:32:48.960

据我所知，您只是想结束所有 div。HTML 是一个非常简单的代码，具有非常简单的选项。您的示例不起作用，因为 HTML 并没有那么先进。您可以开始一个函数 <...> 或结束一个函数。

理想情况下，您想要的是一段代码，将他们的工作完全放在一个单独的框架中，因此一旦页面通过他们的代码，它就会回到正确的格式。

或者，你可能真的很草率，放了一百个，以防万一。

# objective-c - ZBar SDK 嵌入阅读器和故事板

> ID：11665904
> 
> 赞同：1
> 
> 时间：2012-07-26T09:05:55.917
> 
> 标签：objective-c, ios, zbar-sdk

我正在尝试使用 ZBar SDK 创建嵌入式 QR 码阅读器，就像此处示例中所示：[https](https://github.com/twotoasters/zbar) ://github.com/twotoasters/zbar （嵌入式阅读器示例）

唯一的区别是我在故事板中使用它。我尝试将代码复制到我的应用程序中，一切似乎都很好，直到我真正尝试使用它。
我正在使用模拟器，因此 ZBarCameraSimulator 正在初始化并显示它的文本，但是当我尝试“两指单击”（检查子视图属性中的多点触控选项）时，它似乎忽略了该操作。
我想缺少一个委托或处理程序，这在 XIB 中不是必需的，但在情节提要中是必需的。

有人有任何线索吗？将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:39:35.047

好的，看起来我找到了解决方案，我将 readerView 设置为（弱的、非原子的）IBOutlet 属性，而 XIB 项目使用“保留”选项。我将选项更改为强（正如我从 ARC 所了解的，保留不应与它一起使用）并且它开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:28:38.473

我也将它与情节提要一起使用，并且让模拟器识别两指点击没有问题。我通过按 Option+Mouse 并按住它一秒钟来做到这一点。

但是，我确实关注扫描图像似乎没有被处理的问题，但我认为这是由于委托问题。

# php - 截断多维数组以仅包含某些值

> ID：11665905
> 
> 赞同：0
> 
> 时间：2012-07-26T09:05:58.767
> 
> 标签：php, multidimensional-array

我有一个数组，我需要将这个数组截断为只包含我需要的信息。

参考日期采用以下格式；

```
 $reference_date = '20120624'; 
```

我需要把这个数组...

```
 array(3) {
      [0]=>
      array(3) {
        ["ID"]=>
        string(2) "15"
        ["start_time"]=>
        string(19) "2012-06-24 08:00:00"
        ["end_time"]=>
        string(19) "2012-06-24 17:00:59"
      }
      [1]=>
      array(3) {
        ["ID"]=>
        string(2) "28"
        ["start_time"]=>
        string(19) "2012-07-26 18:00:00"
        ["end_time"]=>
        string(19) "2012-07-26 22:00:59"
      }
      [2]=>
      array(3) {
        ["ID"]=>
        string(2) "31"
        ["start_time"]=>
        string(19) "2012-07-28 00:00:00"
        ["end_time"]=>
        string(19) "2012-07-28 23:59:59"
      }
    } 
```

进入这个...

```
 array(1) {
      [0]=>
      array(3) {
        ["ID"]=>
        string(2) "15"
        ["start_time"]=>
        string(19) "2012-06-24 08:00:00"
        ["end_time"]=>
        string(19) "2012-06-24 17:00:59"
      } 
```

可以有多个数组具有相同的日期（不同的时间）。我也需要保存这些。

我尝试了各种解除不安的方法，但我的理解还不存在。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:10:11.540

```
$reference_date = '20120624';
$reference_date = substr($reference_date, 0, 4).'-'.substr($reference_date, 4, 2).'-'.substr($reference_date, 6, 2);

$result = array();
foreach($data as $item){
   if(substr($item['start_time'], 0, 10) == $reference_date || substr($item['end_time'], 0, 10) == $reference_date)
       $result[] = $item;
} 
```

# jquery - HOWTO：长 ListView wirh 缩略图延迟加载？

> ID：11665913
> 
> 赞同：0
> 
> 时间：2012-07-26T09:06:35.133
> 
> 标签：jquery, mobile, lazy-loading, thumbnails

我需要帮助。我有一个带有缩略图图标的长 ListView。像这样 - [http://jquerymobile.com/demos/1.1.1/docs/lists/lists-thumbnails.html](http://jquerymobile.com/demos/1.1.1/docs/lists/lists-thumbnails.html)

如何调整系统，以便首先仅加载屏幕上显示的项目，这些缩略图将被加载。然后，如果用户向下滚动，将加载更多缩略图。也就是说，当用户向下滚动时，图像将被加载。

同样的事情也发生在 Facebook 时间线上。试试看旧帖。。。。

我不知道如何轻松做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:13:04.127

试试这些演示：

[**演示 1**](http://www.jquery4u.com/demos/infinite-scrolling-demo5/)

**使用 HTML：**

```
<ul class="items">
   <li>content</li>
   <li>content</li>
   ...
</ul>
<div id="lastPostsLoader"></div> 
```

**使用 jQuery：**

```
<script type="text/javascript">
$(document).ready(function(){
    function lastAddedLiveFunc()
    {
        $('div#lastPostsLoader').html('<img src="bigLoader.gif">');

        $.get("loadmore.php", function(data){
            if (data != "") {
                //console.log('add data..');
                $(".items").append(data);
            }
            $('div#lastPostsLoader').empty();
        });
    };

    //lastAddedLiveFunc();
    $(window).scroll(function(){

        var wintop = $(window).scrollTop(), docheight = $(document).height(), winheight =     $(window).height();
        var  scrolltrigger = 0.95;

        if  ((wintop/(docheight-winheight)) > scrolltrigger) {
         //console.log('scroll bottom');
         lastAddedLiveFunc();
        }
    });
}); 
```

* * *

[**演示 2**](http://www.jquery4u.com/demos/infinite-scrolling-demo2/)

**使用 HTML：**

```
<div id="postswrapper">
   <div class="item">content</div>
   ...
   <div id="loadmoreajaxloader" style="display:none;"><center><img src="ajax-loader.gif" /></center></div>
</div> 
```

**使用 jQuery：**

```
<script type="text/javascript">
$(window).scroll(function()
{
    if($(window).scrollTop() == $(document).height() - $(window).height())
    {
        $('div#loadmoreajaxloader').show();
        $.ajax({
        url: "loadmore.php",
        success: function(html)
        {
            if(html)
            {
                $("#postswrapper").append(html);
                $('div#loadmoreajaxloader').hide();
            }else
            {
                $('div#loadmoreajaxloader').html('<center>No more posts to show.  </center>');
            }
        }
        });
    }
});
</script> 
```

# c++ - 对向量的元素进行排序，其中每个元素都是一对

> ID：11665914
> 
> 赞同：3
> 
> 时间：2012-07-26T09:06:41.410
> 
> 标签：c++, sorting, vector

> **可能重复：**
> [如何根据对的第二个元素对对的向量进行排序？](https://stackoverflow.com/questions/279854/how-do-i-sort-a-vector-of-pairs-based-on-the-second-element-of-the-pair)

我有一个这种类型的向量：`vector< pair<float, int> > vect;`我想根据浮点值的降序（对的第一个值）对其元素进行排序。例如`vect = [<8.6, 4>, <5.2, 9>, <7.1, 23>]`，排序后我想要：`[<5.2, 9>, <7.1, 23>, <8.6, 4>]` 我怎么能在 C++ 中简单地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T09:10:48.137

```
struct cmp_by_first {
  template<typename T>
  bool operator<(const T& x, const T& y) const { return x.first < y.first; }
};

std::sort(vect.begin(), vect.end(), cmp_by_first()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T09:12:09.753

```
std::vector<std::pair<float, int>> vect = 
{
    std::make_pair(8.6, 4),
    std::make_pair(5.2, 9),
    std::make_pair(7.1, 23)
};
std::sort(vect.begin(), vect.end(), [](const std::pair<float, int>& first, const std::pair<float, int>& second)
{
    return first.first < second.first;
});
for (const auto& p : vect)
{
    std::cout << p.first << " " << p.second << std::endl;
} 
```

C++11。

[http://liveworkspace.org/code/5f14daa5c183f1ef4e349ea26854f1b0](http://liveworkspace.org/code/5f14daa5c183f1ef4e349ea26854f1b0)

# maven - Maven是否有读取机器名的机制

> ID：11665916
> 
> 赞同：0
> 
> 时间：2012-07-26T09:06:58.110
> 
> 标签：maven, maven-3

我正在编写一个 Maven 项目，我想在生成的 WAR 中包含一个文件，该文件将包含一些构建时间信息。通常这将是这样的

*   构建时间/日期戳
*   构建 WAR 的人的用户名
*   POM 中指定的应用程序版本

这些都相当简单，因为有 Maven 属性可以为我提供所需的信息。

我还想包括机器名称。我知道 Windows 将此信息存储在名为“COMPUTERNAME”的环境变量中，而 *nix 使用该`hostname`命令。

是否有一些独立于平台的方式来获取这些信息，以便我可以将其写入我的文本文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:10:12.407

我通过调用 Maven Ant 任务来做到这一点。其中我使用了以下 Ant 任务：

`<tstamp>`生成时间戳属性 `<propertyfile>`以创建包含上述时间戳、用户名等属性的属性文件。

您可以使用 Ant`<exec>`任务来执行`hostname`并指定一个输出属性来写入这个值。

这在目录中创建了一个属性文件，`src/main/resources`然后我将其嵌入到 .war 文件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:06:08.350

正如安德鲁·洛格维诺夫所说，

*   [从 Maven 中查找主机名](https://stackoverflow.com/questions/7441265/look-up-hostname-from-maven/7450469#7450469)

谢谢 ：-）

# iphone - AFNetworking：下载队列中的文件

> ID：11665918
> 
> 赞同：0
> 
> 时间：2012-07-26T09:07:05.777
> 
> 标签：iphone, queue, afnetworking

我刚开始使用 AFNetworking，到目前为止，它对于从网络获取数据来说效果很好。

但是现在我有一个需要下载到设备的文件列表

```
for(NSDictionary *issueDic in data)
{
    Issue *issue = [[Issue alloc] init];
    ...
    [self getOrDownloadCover:issue];
    ...
} 
```

getOrDownloadCover:issue 检查文件是否已在本地存在，如果存在，则仅保存该路径，如果不存在，则从给定 url 下载文件

```
- (void)getOrDownloadCover:(Issue *)issue
{
    NSLog(@"issue.thumb: %@", issue.thumb);

    NSString *coverName = [issue.thumb lastPathComponent];

    NSLog(@"coverName: %@", coverName);

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    __block NSString *filePath = [documentsDirectory stringByAppendingPathComponent:coverName];

    if([[NSFileManager defaultManager] fileExistsAtPath:filePath])
    {
        // Cover already exists
        issue.thumb_location = filePath;

        NSLog(@"issue.thumb_location: %@", filePath);
    }
    else 
    {
        NSLog(@"load thumb");

        // Download the cover
        NSURL *url = [NSURL URLWithString:issue.thumb];
        AFHTTPClient *httpClient = [[[AFHTTPClient alloc] initWithBaseURL:url] autorelease];
        NSMutableURLRequest *request = [httpClient requestWithMethod:@"GET" path:issue.thumb parameters:nil];

        AFHTTPRequestOperation *operation = [[[AFHTTPRequestOperation alloc] initWithRequest:request] autorelease];
        operation.outputStream = [NSOutputStream outputStreamToFileAtPath:filePath append:NO];

        [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        issue.thumb_location = filePath;

        NSLog(@"issue.thumb_location: %@", filePath);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"FAILED");
    }];
        [operation start];
    }
} 
```

getOrDownloadCover:issue 可以连续调用 20 次，所以我需要将所有请求放入队列中，一旦队列完成，它应该仍然能够保存路径（或者只是发送通知，因为我已经知道路径是什么）

对此有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:19:24.907

添加一个[`NSOperationQueue`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)对象，您可以在应用程序中的任何位置获取其实例，例如在您的 appDelegate 中。然后只需将其添加`AFHTTPRequestOperation`到此队列中，例如：

```
[[(AppDelegate *) [UIApplication sharedApplication].delegate operartionQueue] addOperation:operation]; 
```

只需处理完成块中的保存，或者从主线程上的该块调用方法或发布[`NSNotification`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNotification_Class/Reference/Reference.html).

要调用主线程，请使用 GCD ：

```
dispatch_async(dispatch_get_main_queue(), ^{
    // Call any method from on the instance that created the operation here.
    [self updateGUI]; // example
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:40:11.330

不确定这是否有帮助，但......

您可以使用 AFHTTPClient 的 operationQueue，而不是使用您自己的 operationQueue。使用 enqueueHTTPOperation 将单个操作排入队列或使用 enqueueBatchOperations 将一组操作排入队列（我正在从内存中回忆起这些方法名称，可能有点偏离）。

至于存储特定于每个操作的数据，您可以继承 AFHTTPRequestOperation 并为您想要存储的路径设置属性。像这样的东西。

# string - opa : binary_to_string / String.contains 错误

> ID：11665921
> 
> 赞同：0
> 
> 时间：2012-07-26T09:07:12.797
> 
> 标签：string, file, opa

当我对从文件读取的字符串使用 String.contains 方法时，我的 opa 应用程序失败：

```
import stdlib.io.file
import stdlib.core

function start()
{
        txt = string_of_binary(File.content("data.txt"))
        jlog(txt)
        b = String.contains(txt, "Rabbit")

        <>Hello Bug</>
}

Server.start(
   {port:8092, netmask:0.0.0.0, encryption: {no_encryption}, name:"bug"},
   [ {resources: @static_resource_directory("resources")},
     {register: {css: []} },
     {page: start, title: "bug"},
   ]
) 
```

我有以下错误：

```
bug serving on http://ks3098156.kimsufi.com:8092
[Opa] Server dispatch Decoded URL to /
STDERR:rabbit

/home/kayhman/website/rstEditor/code/bug_depends/qmlCpsClientLib.js:26
_error = true;global.console.log("Uncaught exception : " + global.e.toString()
                                                                    ^
TypeError: Cannot call method 'toString' of undefined
    at /home/kayhman/website/rstEditor/code/bug_depends/qmlCpsClientLib.js:26:222
    at /home/kayhman/website/rstEditor/code/bug_depends/qmlCpsClientLib.js:27:78
    at /home/kayhman/website/rstEditor/code/bug_depends/qmlCpsClientLib.js:22:128
    at /home/kayhman/website/rstEditor/code/bug_depends/qmlCpsClientLib.js:28:263
    at dispatcher_cps (/home/kayhman/website/rstEditor/code/bug_depends/bslNet.nodejs:60:165)
    at Server.<anonymous> (/home/kayhman/website/rstEditor/code/bug_depends/bslNet.nodejs:59:437)
    at Server.emit (events.js:70:17)
    at HTTPParser.onIncoming (http.js:1514:12)
    at HTTPParser.onHeadersComplete (http.js:102:31)
    at Socket.ondata (http.js:1410:22) 
```

数据文件只包含一行：

```
rabbit 
```

我的代码有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:57:35.520

File.content 确实有一个错误，它将在下一个版本中修复。您可以使用更可取的（和有效的）安全`File.content_opt`功能：

```
function start() {
        match(File.content_opt("data.txt")){
        case {none} :<>No file</>
        case {some:content} :
            txt = string_of_binary(content)
            jlog(txt)
            b = String.contains(txt, "Rabbit")
            <>Hello Bug</>
        }
} 
```

# android - 没有基站的 GSM 设备之间的数据传输

> ID：11665922
> 
> 赞同：0
> 
> 时间：2012-07-26T09:07:22.743
> 
> 标签：android, ios, gsm, adhoc, mesh-network

我正在考虑一个应用程序，它将在 Android 上的智能手机和可能的 iOS 设备之间建立网状网络。它看起来像智能手机 + 语音、聊天、数据，也许是本地网络之间的 netsukuku。

1.  GSM可以吗？任何 GSM 架构限制？

2.  android可以通过GSM连接手机吗？和/或 iOS？

3.  我可以使用 Android 库来实现它还是需要直接访问 GSM 模块来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:03:02.697

在正常情况下没有办法做到这一点，如果不直接对底层 GSM 无线电进行修改，可能无法做到这一点——这不是出于内心的狂热。在 iOS 上，我猜这是完全不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:47:20.403

首先，有大量与无线使用相关的法规。在美国，FCC 负责处理这一点，而且每个国家都有自己的一套规则，幸运的是，这些规则有一些共同点。如果您想在其当前频率范围内使用手机调制解调器，则必须对其进行修改，这不“合法”。它使用的频率范围由运营商“拥有”，他们会花大价钱使用它。其次，您的蜂窝调制解调器旨在寻找蜂窝塔并“连接”到它。它没有做网格所需的东西。这将需要重写单元调制解调器本身的固件，并且只有当芯片组支持网状网络时才会这样做（我对此表示怀疑）。即使完成所有这些工作，您也必须使用可用的无线电频段（有 s 不多）这样做，手机调制解调器天线可能不支持它。因此，要使您的网格架构正常工作，您必须在其中进行一些硬件工作。这里有一个想法：你构建了一个可以通过蓝牙连接到你的手机的小包。反过来，这个 Dungle 将在 ISM 频段中拥有更长距离的无线电，这是免费的（您仍然必须通过 FCC ......认证）。但是在 ISM 频段中，传输功率也受到限制，因此您的网格仍然需要是距离不太远的设备。反过来，这个 Dungle 将在 ISM 频段中拥有更长距离的无线电，这是免费的（您仍然必须通过 FCC ......认证）。但是在 ISM 频段中，传输功率也受到限制，因此您的网格仍然需要是距离不太远的设备。反过来，这个 Dungle 将在 ISM 频段中拥有更长距离的无线电，这是免费的（您仍然必须通过 FCC ......认证）。但是在 ISM 频段中，传输功率也受到限制，因此您的网格仍然需要是距离不太远的设备。

更简单、更便宜的解决方案：使用互联网将您的设备连接在一起。您可以使用云中的服务器，所有设备都在其中注册，然后可以一起交谈。

# android - 如何在 Android 中在线获取当前的 UTC 时间？

> ID：11665923
> 
> 赞同：9
> 
> 时间：2012-07-26T09:07:23.297
> 
> 标签：android, timezone

我正在使用 UTC 时区和我的应用程序中的时间来获取数据。在应用程序中，用户可以在任何地方获取 UTC 时间并用于获取数据。我使用这种方法来获取 UTC 时间。

```
String format = "yyyy-MM-dd HH:mm:ss";
final SimpleDateFormat sdf = new SimpleDateFormat(format);
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
String utcTime = sdf.format(new Date()); 
```

该应用程序运行良好。但它将系统时间转换为UTC时间。问题是有时用户可以将时间更改为错误的时间。所以数据不会来。

上述问题的案例是：

例如，印度的当前日期时间是 2012 年 7 月 26 日星期四 14:27:56，时区加尔各答。那么太平洋时区的时间应该是 2012 年 7 月 26 日星期四 01:59:30 PDT。

但是用户将他的设备时间从 14:27:56 更改为 13:27:56，因此转换后的 UTC 时间将是 2012 年 7 月 26 日星期四 00:59:30 PDT。此时，由于一小时的差异，我的应用程序无法获取日期。

我不想使用 Java 的日期、日历类，也不想使用设备时间。如何在不涉及设备时间、日期的情况下直接获取 UTC 时间。是否有任何开源API？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-01T21:53:26.180

如果系统时间更改（例如手动更改 8 小时），则上述 SntpClient 上的 UTC 时间不起作用。因为它使用 System.currentTimeMillis 返回错误值！！！

```
 // get current time and write it to the request packet
        long requestTime = System.currentTimeMillis();
        long requestTicks = SystemClock.elapsedRealtime(); 
```

最好使用此类从 NTP 服务器获取正确的 UTC 时间：

```
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

class NTP_UTC_Time
{
private static final String TAG = "SntpClient";

private static final int RECEIVE_TIME_OFFSET = 32;
private static final int TRANSMIT_TIME_OFFSET = 40;
private static final int NTP_PACKET_SIZE = 48;

private static final int NTP_PORT = 123;
private static final int NTP_MODE_CLIENT = 3;
private static final int NTP_VERSION = 3;

// Number of seconds between Jan 1, 1900 and Jan 1, 1970
// 70 years plus 17 leap days
private static final long OFFSET_1900_TO_1970 = ((365L * 70L) + 17L) * 24L * 60L * 60L;

private long mNtpTime;

public boolean requestTime(String host, int timeout) {
    try {
        DatagramSocket socket = new DatagramSocket();
        socket.setSoTimeout(timeout);
        InetAddress address = InetAddress.getByName(host);
        byte[] buffer = new byte[NTP_PACKET_SIZE];
        DatagramPacket request = new DatagramPacket(buffer, buffer.length, address, NTP_PORT);

        buffer[0] = NTP_MODE_CLIENT | (NTP_VERSION << 3);

        writeTimeStamp(buffer, TRANSMIT_TIME_OFFSET);

        socket.send(request);

        // read the response
        DatagramPacket response = new DatagramPacket(buffer, buffer.length);
        socket.receive(response);          
        socket.close();

        mNtpTime = readTimeStamp(buffer, RECEIVE_TIME_OFFSET);            
    } catch (Exception e) {
      //  if (Config.LOGD) Log.d(TAG, "request time failed: " + e);
        return false;
    }

    return true;
}

public long getNtpTime() {
    return mNtpTime;
}

/**
 * Reads an unsigned 32 bit big endian number from the given offset in the buffer.
 */
private long read32(byte[] buffer, int offset) {
    byte b0 = buffer[offset];
    byte b1 = buffer[offset+1];
    byte b2 = buffer[offset+2];
    byte b3 = buffer[offset+3];

    // convert signed bytes to unsigned values
    int i0 = ((b0 & 0x80) == 0x80 ? (b0 & 0x7F) + 0x80 : b0);
    int i1 = ((b1 & 0x80) == 0x80 ? (b1 & 0x7F) + 0x80 : b1);
    int i2 = ((b2 & 0x80) == 0x80 ? (b2 & 0x7F) + 0x80 : b2);
    int i3 = ((b3 & 0x80) == 0x80 ? (b3 & 0x7F) + 0x80 : b3);

    return ((long)i0 << 24) + ((long)i1 << 16) + ((long)i2 << 8) + (long)i3;
}

/**
 * Reads the NTP time stamp at the given offset in the buffer and returns 
 * it as a system time (milliseconds since January 1, 1970).
 */    
private long readTimeStamp(byte[] buffer, int offset) {
    long seconds = read32(buffer, offset);
    long fraction = read32(buffer, offset + 4);
    return ((seconds - OFFSET_1900_TO_1970) * 1000) + ((fraction * 1000L) / 0x100000000L);        
}

/**
 * Writes 0 as NTP starttime stamp in the buffer. --> Then NTP returns Time OFFSET since 1900
 */    
private void writeTimeStamp(byte[] buffer, int offset) {        
    int ofs =  offset++;

    for (int i=ofs;i<(ofs+8);i++)
      buffer[i] = (byte)(0);             
}

} 
```

并将其用于：

```
 long now = 0;

        NTP_UTC_Time client = new NTP_UTC_Time();

        if (client.requestTime("pool.ntp.org", 2000)) {              
          now = client.getNtpTime();
        } 
```

如果您需要 UTC 时间“现在”作为 DateTimeString 使用函数：

```
private String get_UTC_Datetime_from_timestamp(long timeStamp){

    try{

        Calendar cal = Calendar.getInstance();
        TimeZone tz = cal.getTimeZone();

        int tzt = tz.getOffset(System.currentTimeMillis());

        timeStamp -= tzt;

        // DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss",Locale.getDefault());
        DateFormat sdf = new SimpleDateFormat();
        Date netDate = (new Date(timeStamp));
        return sdf.format(netDate);
    }
    catch(Exception ex){
        return "";
     }
    } 
```

并将其用于：

```
String UTC_DateTime = get_UTC_Datetime_from_timestamp(now); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T09:10:44.247

```
long dateInMillis = System.currentTimeMillis(); 
```

这将返回自 1970 年 1 月 1 日 00:00:00 UTC 以来的毫秒数。

然后只需将其解析为您想要的最合适的格式：

```
String format = "yyyy-MM-dd HH:mm:ss";
final SimpleDateFormat sdf = new SimpleDateFormat(format);

String dateString = sdf.format(new Date(dateInMillis))); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-26T09:36:57.070

我认为您必须实现一个 Sntp 客户端并访问 NTP 以获取网络时间。我的代码：

```
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.util.Date;

public class GetTime {

    public static void main(String[] args) {
        SntpClient client = new SntpClient();
        if (client.requestTime("pool.ntp.org", 30000)) {
            long now = client.getNtpTime() + System.nanoTime() / 1000
                    - client.getNtpTimeReference();
            Date current = new Date(now);
            System.out.println(current.toString());
        }

    }
}

class SntpClient {

    private static final int ORIGINATE_TIME_OFFSET = 24;
    private static final int RECEIVE_TIME_OFFSET = 32;
    private static final int TRANSMIT_TIME_OFFSET = 40;
    private static final int NTP_PACKET_SIZE = 48;

    private static final int NTP_PORT = 123;
    private static final int NTP_MODE_CLIENT = 3;
    private static final int NTP_VERSION = 3;

    // Number of seconds between Jan 1, 1900 and Jan 1, 1970
    // 70 years plus 17 leap days
    private static final long OFFSET_1900_TO_1970 = ((365L * 70L) + 17L) * 24L * 60L * 60L;

    // system time computed from NTP server response
    private long mNtpTime;

    // value of SystemClock.elapsedRealtime() corresponding to mNtpTime
    private long mNtpTimeReference;

    // round trip time in milliseconds
    private long mRoundTripTime;

    /**
     * Sends an SNTP request to the given host and processes the response.
     *
     * @param host
     *            host name of the server.
     * @param timeout
     *            network timeout in milliseconds.
     * @return true if the transaction was successful.
     */
    public boolean requestTime(String host, int timeout) {
        try {
            DatagramSocket socket = new DatagramSocket();
            socket.setSoTimeout(timeout);
            InetAddress address = InetAddress.getByName(host);
            byte[] buffer = new byte[NTP_PACKET_SIZE];
            DatagramPacket request = new DatagramPacket(buffer, buffer.length,
                    address, NTP_PORT);

            // set mode = 3 (client) and version = 3
            // mode is in low 3 bits of first byte
            // version is in bits 3-5 of first byte
            buffer[0] = NTP_MODE_CLIENT | (NTP_VERSION << 3);

            // get current time and write it to the request packet
            long requestTime = System.currentTimeMillis();
            long requestTicks = System.nanoTime() / 1000;
            writeTimeStamp(buffer, TRANSMIT_TIME_OFFSET, requestTime);

            socket.send(request);

            // read the response
            DatagramPacket response = new DatagramPacket(buffer, buffer.length);
            socket.receive(response);
            long responseTicks = System.nanoTime() / 1000;
            long responseTime = requestTime + (responseTicks - requestTicks);
            socket.close();

            // extract the results
            long originateTime = readTimeStamp(buffer, ORIGINATE_TIME_OFFSET);
            long receiveTime = readTimeStamp(buffer, RECEIVE_TIME_OFFSET);
            long transmitTime = readTimeStamp(buffer, TRANSMIT_TIME_OFFSET);
            long roundTripTime = responseTicks - requestTicks
                    - (transmitTime - receiveTime);
            // receiveTime = originateTime + transit + skew
            // responseTime = transmitTime + transit - skew
            // clockOffset = ((receiveTime - originateTime) + (transmitTime -
            // responseTime))/2
            // = ((originateTime + transit + skew - originateTime) +
            // (transmitTime - (transmitTime + transit - skew)))/2
            // = ((transit + skew) + (transmitTime - transmitTime - transit +
            // skew))/2
            // = (transit + skew - transit + skew)/2
            // = (2 * skew)/2 = skew
            long clockOffset = ((receiveTime - originateTime) + (transmitTime - responseTime)) / 2;
            // if (Config.LOGD) Log.d(TAG, "round trip: " + roundTripTime +
            // " ms");
            // if (Config.LOGD) Log.d(TAG, "clock offset: " + clockOffset +
            // " ms");

            // save our results - use the times on this side of the network
            // latency
            // (response rather than request time)
            mNtpTime = responseTime + clockOffset;
            mNtpTimeReference = responseTicks;
            mRoundTripTime = roundTripTime;
        } catch (Exception e) {

            return false;
        }

        return true;
    }

    /**
     * Returns the time computed from the NTP transaction.
     *
     * @return time value computed from NTP server response.
     */
    public long getNtpTime() {
        return mNtpTime;
    }

    /**
     * Returns the reference clock value (value of
     * SystemClock.elapsedRealtime()) corresponding to the NTP time.
     *
     * @return reference clock corresponding to the NTP time.
     */
    public long getNtpTimeReference() {
        return mNtpTimeReference;
    }

    /**
     * Returns the round trip time of the NTP transaction
     *
     * @return round trip time in milliseconds.
     */
    public long getRoundTripTime() {
        return mRoundTripTime;
    }

    /**
     * Reads an unsigned 32 bit big endian number from the given offset in the
     * buffer.
     */
    private long read32(byte[] buffer, int offset) {
        byte b0 = buffer[offset];
        byte b1 = buffer[offset + 1];
        byte b2 = buffer[offset + 2];
        byte b3 = buffer[offset + 3];

        // convert signed bytes to unsigned values
        int i0 = ((b0 & 0x80) == 0x80 ? (b0 & 0x7F) + 0x80 : b0);
        int i1 = ((b1 & 0x80) == 0x80 ? (b1 & 0x7F) + 0x80 : b1);
        int i2 = ((b2 & 0x80) == 0x80 ? (b2 & 0x7F) + 0x80 : b2);
        int i3 = ((b3 & 0x80) == 0x80 ? (b3 & 0x7F) + 0x80 : b3);

        return ((long) i0 << 24) + ((long) i1 << 16) + ((long) i2 << 8)
                + (long) i3;
    }

    /**
     * Reads the NTP time stamp at the given offset in the buffer and returns it
     * as a system time (milliseconds since January 1, 1970).
     */
    private long readTimeStamp(byte[] buffer, int offset) {
        long seconds = read32(buffer, offset);
        long fraction = read32(buffer, offset + 4);
        return ((seconds - OFFSET_1900_TO_1970) * 1000)
                + ((fraction * 1000L) / 0x100000000L);
    }

    /**
     * Writes system time (milliseconds since January 1, 1970) as an NTP time
     * stamp at the given offset in the buffer.
     */
    private void writeTimeStamp(byte[] buffer, int offset, long time) {
        long seconds = time / 1000L;
        long milliseconds = time - seconds * 1000L;
        seconds += OFFSET_1900_TO_1970;

        // write seconds in big endian format
        buffer[offset++] = (byte) (seconds >> 24);
        buffer[offset++] = (byte) (seconds >> 16);
        buffer[offset++] = (byte) (seconds >> 8);
        buffer[offset++] = (byte) (seconds >> 0);

        long fraction = milliseconds * 0x100000000L / 1000L;
        // write fraction in big endian format
        buffer[offset++] = (byte) (fraction >> 24);
        buffer[offset++] = (byte) (fraction >> 16);
        buffer[offset++] = (byte) (fraction >> 8);
        // low order bits should be random data
        buffer[offset++] = (byte) (Math.random() * 255.0);
    }
} 
```

希望能帮到你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-26T09:14:23.873

[使用http://www.worldweatheronline.com/](http://www.worldweatheronline.com/)上的免费 API ，您可以通过 java 执行 HTTP GET 以获取 UTC 的当前时间 (http://www.worldweatheronline.com/time-zone-api.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-29T15:41:41.257

对于 android，如果您尝试从主线程连接到 Internet，应用程序将崩溃，所以我编辑了代码以在 android 上正常工作

```
import android.os.AsyncTask;

import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

public class NTPUTCTime {
    private static final String TAG = "SntpClient";

    private static final int RECEIVE_TIME_OFFSET = 32;
    private static final int TRANSMIT_TIME_OFFSET = 40;
    private static final int NTP_PACKET_SIZE = 48;

    private static final int NTP_PORT = 123;
    private static final int NTP_MODE_CLIENT = 3;
    private static final int NTP_VERSION = 3;

    // Number of seconds between Jan 1, 1900 and Jan 1, 1970
// 70 years plus 17 leap days
    private static final long OFFSET_1900_TO_1970 = ((365L * 70L) + 17L) * 24L * 60L * 60L;

    private long mNtpTime;

    public boolean requestTime() {
        try {
            new AsyncTask<Void, Void, Boolean>() {
                @Override
                protected Boolean doInBackground(Void... voids) {
                    try {
                        DatagramSocket socket = new DatagramSocket();
                        socket.setSoTimeout(1000);
                        InetAddress address = InetAddress.getByName("pool.ntp.org");
                        byte[] buffer = new byte[NTP_PACKET_SIZE];
                        DatagramPacket request = new DatagramPacket(buffer, buffer.length, address, NTP_PORT);
                        buffer[0] = NTP_MODE_CLIENT | (NTP_VERSION << 3);

                        writeTimeStamp(buffer, TRANSMIT_TIME_OFFSET);

                        socket.send(request);

                        // read the response
                        DatagramPacket response = new DatagramPacket(buffer, buffer.length);
                        socket.receive(response);
                        socket.close();

                        mNtpTime = readTimeStamp(buffer, RECEIVE_TIME_OFFSET);
                    } catch (Exception e) {
                        //  if (Config.LOGD) Log.d(TAG, "request time failed: " + e);
                        e.printStackTrace();
                        return false;
                    }
                    return true;
                }
            }.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR).get();

        } catch (Exception e) {
            //  if (Config.LOGD) Log.d(TAG, "request time failed: " + e);
            e.printStackTrace();
            return false;
        }

        return true;
    }

    public long getNtpTime() {
        return mNtpTime;
    }

    /**
     * Reads an unsigned 32 bit big endian number from the given offset in the buffer.
     */
    private long read32(byte[] buffer, int offset) {
        byte b0 = buffer[offset];
        byte b1 = buffer[offset + 1];
        byte b2 = buffer[offset + 2];
        byte b3 = buffer[offset + 3];

        // convert signed bytes to unsigned values
        int i0 = ((b0 & 0x80) == 0x80 ? (b0 & 0x7F) + 0x80 : b0);
        int i1 = ((b1 & 0x80) == 0x80 ? (b1 & 0x7F) + 0x80 : b1);
        int i2 = ((b2 & 0x80) == 0x80 ? (b2 & 0x7F) + 0x80 : b2);
        int i3 = ((b3 & 0x80) == 0x80 ? (b3 & 0x7F) + 0x80 : b3);

        return ((long) i0 << 24) + ((long) i1 << 16) + ((long) i2 << 8) + (long) i3;
    }

    /**
     * Reads the NTP time stamp at the given offset in the buffer and returns
     * it as a system time (milliseconds since January 1, 1970).
     */
    private long readTimeStamp(byte[] buffer, int offset) {
        long seconds = read32(buffer, offset);
        long fraction = read32(buffer, offset + 4);
        return ((seconds - OFFSET_1900_TO_1970) * 1000) + ((fraction * 1000L) / 0x100000000L);
    }

    /**
     * Writes 0 as NTP starttime stamp in the buffer. --> Then NTP returns Time OFFSET since 1900
     */
    private void writeTimeStamp(byte[] buffer, int offset) {
        int ofs = offset++;

        for (int i = ofs; i < (ofs + 8); i++)
            buffer[i] = (byte) (0);
    }

} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-26T09:11:50.540

您可以使用[Joda](http://joda-time.sourceforge.net/)库来操作日期/时间数据

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2018-03-15T08:45:34.297

```
class GetUTCTime : AppCompatActivity() {

private val OUTPUT_DATE_FORMATE = "dd-MM-yyyy - hh:mm a"

internal lateinit var textView : TextView

val utcTime: String
    get() {

        LongOperation().execute("")

        return ""
    }

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_get_utctime)

    //        Log.d("UTC", "onCreate: "+ getUTCTime());

    textView = findViewById(R.id.dateTime)

    findViewById<View>(R.id.fetchButton).setOnClickListener {
        utcTime
        textView.text = "Fetching..."
    }
}

private inner class LongOperation : AsyncTask<String, Void, Long>() {

    override fun doInBackground(vararg params: String): Long? {
        var nowAsPerDeviceTimeZone: Long = 0
        try {
            val sntpClient = SntpClient()

            if (sntpClient.requestTime("ntp.ubuntu.com", 30000)) {
                nowAsPerDeviceTimeZone = sntpClient.ntpTime

            }
            Thread.sleep(1000)
        } catch (e: InterruptedException) {
            Thread.interrupted()
        }

        return nowAsPerDeviceTimeZone
    }

    override fun onPostExecute(nowAsPerDeviceTimeZone: Long?) {
        // might want to change "executed" for the returned string passed
        // into onPostExecute() but that is upto you

        Log.d("GMT", "getUTCTime:0 " + Date(nowAsPerDeviceTimeZone!!))
        textView.text = Date(nowAsPerDeviceTimeZone).toString()

        //            Calendar cal = Calendar.getInstance();
        //            TimeZone timeZoneInDevice = cal.getTimeZone();
        //            int differentialOfTimeZones = timeZoneInDevice.getOffset(System.currentTimeMillis());
        //            nowAsPerDeviceTimeZone -= differentialOfTimeZones;
        //
        //
        //
        //
        //
        //            Log.d("GMT", "getUTCTime:1 "+ new Date(nowAsPerDeviceTimeZone).toString());
    }

    override fun onPreExecute() {}

    override fun onProgressUpdate(vararg values: Void) {}
} 
```

}

[在这里找到 SntpClient](https://gist.github.com/prasann/9003350)

# php - 在带小数的数字之间回显文本

> ID：11665924
> 
> 赞同：0
> 
> 时间：2012-07-26T09:07:24.240
> 
> 标签：php

我已经将一个脚本与数组之类的东西放在一起。现在最后，它使用复选框检查分数并将其除以十。然后用数字格式将它四舍五入两位小数，它看起来像这样。

```
$number = $score / $total;
$number = $number * 10;
$number = number_format(round($number,2),2,',','.');
echo "The number is: $number <br/>"; 
```

然后稍后，我正在这样做。

```
if($number < 4 && $number > 0)
echo 'You're number is between zero and 4';
else if($number > 6 && $number < 4)
echo ' You're number is between 4and 6';
else if($number < 8 && $number > 6)
echo' You're number is between 6 and 8';
else if($number < 10 && $number > 8)
You're number is between 8 and 10'; 
```

现在，如果数字是 0.50 或 1.50 或 2 或 5.50，它会显示我提供的文本。但是，如果数字是 4,13 或 7,85 或 9,13，则不是。

现在搜索了很长时间，但无法弄清楚。你们看到解决方案了吗？

希望我足够清楚！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:15:58.003

以下语句永远不会验证`true`：

```
if($number > 6 && $number < 4) 
```

你知道任何大于六小于四的数字吗？

该代码还包含许多语法错误，例如：

```
echo 'You're number is between zero and 4'; 
```

撇号需要使用反斜杠进行转义：

```
echo 'You\'re number is between zero and 4'; 
```

或者对包含撇号的字符串使用双引号：

```
echo "You're number is between zero and 4"; 
```

最后，语法方面`you're`应该是`your`:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:17:05.240

这是你要找的吗？

```
<?php
$score = 7; //Example values
$total = 32;

$number = $score / $total;
$number = $number * 10;
$number = round($number,2);
echo 'The number is: ',number_format($number,2,'.',','),' <br/>';

if($number < 4 && $number > 0)
    echo 'Your number is between zero and 4';
else if($number < 6 && $number > 4)
    echo 'Your number is between 4 and 6';
else if($number < 8 && $number > 6)
    echo 'Your number is between 6 and 8';
else if($number < 10 && $number > 8)
    echo 'Your number is between 8 and 10';
?> 
```

# javascript - 用于比较日期字段的 Javascript

> ID：11665925
> 
> 赞同：0
> 
> 时间：2012-07-26T09:07:27.027
> 
> 标签：javascript, html

在我的表单中，有两个标签字段，即出生日期和确认出生日期。每个字段分别由 DD、MM 和 YY 三个输入字段组成。下面是html代码，

```
 <label>Date of Birth</label>
     <input type="textbox" id="dd1" />
     <input type="textbox" id="mm1" /> 
     <input type="textbox" id="yy1" />
     <label>Confirm Date of Birth</label>
     <input type="textbox" id="dd2" />
     <input type="textbox" id="mm2" /> 
     <input type="textbox" id="yy2" /> 
```

现在我需要比较两个标签字段。如果两者相等，则需要获取警报消息。请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:24:08.230

```
var d1 = document.getElementById('dd1').value;
var m1 = document.getElementById('mm1').value;
var y1 = document.getElementById('yy1').value;

var d2 = document.getElementById('dd2').value;
var m2 = document.getElementById('mm2').value;
var y2 = document.getElementById('yy2').value;

var date1 = new Date(y1 + "/" + m1 + "/" + d1);
var date2 = new Date(y2 + "/" + m2 + "/" + d2);

date1 = date1.getTime();
date2 = date2.getTime();

if (date1 == date2) {
    alert('Dates are equal');
} else {
    alert('Dates are not equal');
} 
```

这可以作为纯 javascript 工作，或者您可以使用 jquery 替换

```
document.getElementByIt('dd1').value; 
```

与 $('#dd1').val();

或者你可以使用 datepicker，我建议 jquery-ui [http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

并比较日期选择器填充的 2 个字段中的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:19:19.820

只需创建一个接受数字（1 或 2）的函数，然后在 jQuery 内部执行 $("#XX" +param).value 的连接（其中 XX 是 dd、mm、yy 和 param 是接收的参数） .

从字符串创建一个日期并返回它。

我建议你使用 HTML5 看看[html5-date](http://www.html5tutorial.info/html5-date.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:20:47.613

对于比较两个 javascript 日期，此链接可能对您有用

[用 JavaScript 比较两个日期](https://stackoverflow.com/questions/492994/compare-2-dates-with-javascript)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:21:43.800

您可以将它们解析为 Date 对象：

```
var y1 = document.getElementById('yy1').value;
// get the rest input value
var date = new Date(y1, m1, d1)
  , confirmed_date = new Date(y2, m2, d2);
if (date == confirmed_date) { /* do something */ } 
```

上面的代码还可以验证用户输入的日期是否有效。

有关日期对象的更多信息：[http ://www.javascriptkit.com/jsref/date.shtml](http://www.javascriptkit.com/jsref/date.shtml)

# asp.net - 部署后初始加载时出现奇怪的 log4net 参考错误

> ID：11665926
> 
> 赞同：7
> 
> 时间：2012-07-26T09:07:28.453
> 
> 标签：asp.net, log4net

自从我将最新版本的 log4net (1.2.11.0) 放在我的解决方案项目中以来，我收到了附加错误。这在我部署后立即发生在服务器上，当我再次刷新时它会消失，直到下一次部署。请注意，我尝试了以下版本重定向代码，但没有帮助：

```
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
        <assemblyIdentity name="log4net" publicKeyToken="669e0ddf0bb1aa2a" culture="neutral" />
        <bindingRedirect oldVersion="1.2.10.0" newVersion="1.2.11.0" />
    </dependentAssembly>
</assemblyBinding> 
```

这是我得到的错误：

“/”应用程序中的服务器错误。

无法加载文件或程序集 'log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

异常详细信息：System.IO.FileLoadException：无法加载文件或程序集“log4net，版本=1.2.10.0，文化=中性，PublicKeyToken=1b44e1d426115821”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

源错误：

```
 Line 76:     </script>
Line 77:     <form id="form1" runat="server">
Line 78:     <asp:ScriptManager ID="radscriptmanager" runat="server">
Line 79:     </asp:ScriptManager>
Line 80:     <asp:ContentPlaceHolder ID="cphAfterScriptManager" runat="server"> 
```

源文件：MainFront.Master 行：78

程序集加载跟踪：以下信息有助于确定为什么无法加载程序集“log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T11:09:27.223

我怀疑造成这种情况的原因可能是您的应用程序中依赖于 1.2.10，并且由于新的签名密钥，您安装的 log4net 新版本不兼容。

1.2.11 你会注意到已经用不同的密钥签名，这给许多人带来了痛苦。我最终只是恢复到 1.2.10。

但是，有一个 1.2.11 版本使用以前的密钥进行。只需下载并执行以下操作，一切都应该没问题。

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
            <assemblyIdentity name="log4net" publicKeyToken="1b44e1d426115821" culture="neutral" />
            <bindingRedirect oldVersion="0.0.0.0-1.2.10.0"
                             newVersion="1.2.11.0"/>
        </dependentAssembly>
    </assemblyBinding>
</runtime> 
```

您可以从以下网址获取新旧密钥：http: [//logging.apache.org/log4net/download_log4net.cgi](http://logging.apache.org/log4net/download_log4net.cgi)

# iphone - 数据未从数组中显示

> ID：11665928
> 
> 赞同：1
> 
> 时间：2012-07-26T09:07:42.063
> 
> 标签：iphone, xcode, arrays

我已将数据从 json 提取到数组中，但是当我访问数组内容时，它不显示它显示在两条记录中，但不显示内容

```
for (int i = 0; i<[tempArray count]; i++)
{
   id *item = [tempArray objectAtIndex:i];
   NSDictionary *dict = (NSDictionary *) item;
   ObjectData *theObject =[[ObjectData alloc] init];
   [theObject setUser_id:[dict objectForKey:@"user_id"]];
   [theObject setSurvey_id:[dict objectForKey:@"survey_id"]];
   [theObject setSurvey_title:[dict objectForKey:@"survey_Title"]];
   [theObject setSurvey_Description:[dict objectForKey:@"survey_Description"]]; 
   [theObject setDate_Created:[dict objectForKey:@"date_Created"]];

   NSString*testing=[dict objectForKey:@"survey_id"];
   NSLog(testing);

   [surveyList addObject:theObject];
   [theObject release];
   theObject=nil;

   int count =[surveyList count];
   NSLog(@"Total is %d",count);
} 
```

我想访问，

```
ObjectData*data=[surveyList objectAtIndex.path.row];
NSString*cellText=data.surveyDescription; 
```

当 NSLog 时它在 cellText 中没有显示任何内容，我不知道为什么会这样，因为数组有内容。

```
 tempArray: (
    {
    color = "[UIColor GrayColor]";
    "date_created" = "2012-07-24 22:39:14";
    "survey_description" = "Survey To get feedback from clients about food quality and any suggestion to improve the service";
    "survey_id" = 1;
    "survey_title" = "Resturant Survey";
    "user_id" = ali40;
    },
    {
    color = "[UIColor greyColor]";
    "date_created" = "2012-07-25 00:43:42";
    "survey_description" = "Toursim Survey";
    "survey_id" = 2;
    "survey_title" = "Travel Servey";
    "user_id" = ali40;
   }
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:46:12.813

您正在使用

`"survery_Description"`

在您的代码中，但是 JSON 只有

`"survey_description"`

（注意非大写）

# jquery - jQuery 移动应用程序中的 iFrame 导致错误

> ID：11665932
> 
> 赞同：0
> 
> 时间：2012-07-26T09:07:53.373
> 
> 标签：jquery, iframe, jquery-mobile

jQuery 移动应用程序中的 iFrame 导致错误：`Unsafe JavaScript attempt to access frame with URL file:///D:/xx/webpage.html from frame with URL http://www.asp.net/. Domains, protocols and ports must match.`

我正在开发一个使用 iFrame 加载外部网站的 jQuery 移动应用程序。
我的脚本代码是：

```
 $(document).ready(function () {

$('#divID').prepend('<img  src="http://xxx/images/ICPosternew1002.png" usemap="#map" id="image" style="margin-top:43px;"/>')
    $('#map').append('<area coords="30,0,60,30" id="1" alt="Blah" title="asp" />')
    $("#1").bind("click", function (e) {                
    e.preventDefault();         
           $('#Web1').append('<form id="form1" runat="server" rel="external"></form>')              
        $('#form1').append('<iframe id="iframe1" src="http://asp.net" frameborder="0" rel="external"></iframe>')
        });
    }); 
```

我的应用程序中有两个虚拟页面。单击主页中的图像地图时，会加载带有 iFrame 和相应网站的第二页。

```
 <div data-role="page" id="Web" class="pagebody">
    <div data-role="header" data-position="inline" data-theme="a">
            <!--header-->
        </div>
        <div data-role="content" id="Web1">
    <form id="form1" runat="server">
            <iframe id="iframe1" >
            </iframe>
            </form> 
        </div>
        <div data-role="footer" class="footer">
            <!--footer-->
        </div>
    </div> 
```

是我的代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:00:35.903

这听起来像是同源策略的问题。请参阅此社区 wiki 以获取解决方案：[绕过同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:03:11.463

我想你可以这样解决：

```
 $(document).ready(function () {

                    var html = "";
                    html += "<div data-role=page id=win2 class=pagebody>";
                    html +=   "<div data-role='header'>";   
                    html +=   "</div>";
                    html +=   "<div data-role=content>";
                    html +=   "</div>";
                    html +=   "<div class=push>";
                    html +=   "</div>";
                    html +=   "<div data-role=footer class=footer>";
                    html +=   "</div>"
                    html += "</div>";
                    $(html).insertAfter ("#index");
                    for(var i=0;i<data.length;i++)
                    {
                        $("#area"+data[i].NodeID+"").bind ("click", function (event)
                        {
                            var title = $(this).attr("src");
                            alert(title);
                            $.mobile.changePage ($("#win2"));
                            $("#win2 div:jqmData(role=content)").empty().append ('<form id="form1" runat="server" rel="external"></form>')
                            $('#form1').empty().append('<iframe id="iframe1" src="'+title+'" frameborder="0" rel="external"></iframe>') 
                        });
                    }       
        }); 
```

# javascript - 从“文件”类型输入字段上传的文件未显示在 img 字段中

> ID：11665937
> 
> 赞同：-1
> 
> 时间：2012-07-26T09:08:05.090
> 
> 标签：javascript, html, file-upload, image

我无法使用javascript更改文件上传时显示的图像。这是我的代码：

```
<html>
<head>
    <title> File Upload </title>
    <script>
        function uploadFile() {
            document.getElementById('picturefield').src='file:///'+document.frmaddstudent.picturefile.src;
            //document.getElementById('picturefield').src='http://icons.iconarchive.com/icons/custom-icon-design/pretty-office-2/128/man-icon.png';
        }
    </script>
</head>

<body>
    <b>Image</b>
    <form name="frmaddstudent">
        <img id="picturefield" src="file:///C:/Users/Nasim/Desktop/myimage.jpg">
        <input type="file" name="picturefile" onchange="uploadFile()">
    </form>
</body>
</html> 
```

但是从我的电脑上传文件时图像没有被更改。当我使用 firebug 进行调试时，的值 `document.frmaddstudent.picturefile.src` 显示**空字符串。**

如果我使用 `document.frmaddstudent.picturefile.value` 而不是 `document.frmaddstudent.picturefile.src`，则该值仅显示所选文件名，但我**需要将完整文件路径**设置为.**`img`** `src`

谁能告诉我我在这里做错了什么？Javascript/jQuery 中是否有任何简单的解决方案可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:10:43.367

`input file`出于安全原因，现代浏览器不支持此功能。

您必须上传该文件，然后将其显示在`img`

# testing - 将时间戳添加到 gradle 测试输出

> ID：11665944
> 
> 赞同：0
> 
> 时间：2012-07-26T09:08:35.357
> 
> 标签：testing, gradle

我们在使用 junit 和 gradle 运行的 java 项目中使用功能测试。他们需要一些时间。每次测试几分钟，我们有 200 分钟。测试输出如下所示：

```
TEST testname1(location) PASSED/FAILED
TEST testname2(location) PASSED/FAILED 
```

因此，当我们查看日志时，我们不知道是 test1 还是 test2 花费了时间。是否可以在 gradle 输出中添加时间戳？

```
datetime: TEST testname1(location) PASSED/FAILED
datetime: TEST testname2(location) PASSED/FAILED 
```

在我们知道测试是通过还是失败之前，是否可以编写 testname？因此，如果测试挂起，我们将看到哪个测试挂起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:38:31.480

Gradle 1.1 中的新[测试日志记录](http://forums.gradle.org/gradle/topics/whats_new_in_gradle_1_1_test_logging)功能将帮助您解决此问题。您今天已经可以尝试 1.1-rc-2。

其他选项是实现和注册一个自定义`org.gradle.api.tasks.testing.TestListener`. 请参阅完整 Gradle 发行版中的[java/testListener](https://github.com/gradle/gradle/blob/master/subprojects/docs/src/samples/java/testListener/build.gradle)示例。

# mailto - mailto links not working in Chrome and Safari Mobile

> ID：11665945
> 
> 赞同：1
> 
> 时间：2012-07-26T09:08:35.777
> 
> 标签：mailto

In my jQuery Mobile App, I have a mailto link, its href attribute is dynamically generated and it is 'clicked' via jQuery.Here is the link code:

```
<a id="mealLink" href="mailto:123@123.com" style="display: none;">This is the mailto 
link</a> 
```

A click handler is attached to it like this:

```
$('#mailLink').bind('click', function() {
window.location.href = $(this).attr('href'); 
}); 
```

Lastly,a function creates the href attribute for the link with emailaddress, subject and message body and click is simulated via jQuery:

```
$emailAddress= ..

$subject= ....
$body=...
$emailString="mailto:"+$emailAddress+$subject+$body;
$emailLink= $("#mealMail");
$emailLink.attr("href",$emailString);
$emailLink.click(); 
```

Now, this code is working perfectly in: Mozilla desktop Safari desktop Android

But not working in: Safari Mobile Chrome desktop

Any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:54:37.003

After searching for complex solutions, I found a much easier solution by chance. The issue here is that if a mailto link is directly clicked, it works in all browsers, but if it is indirectly clicked, such as via jQuery .click() function, it does not work in all browsers. Therefore, here is my implementation:

```
<a href='#mailtolink' id="emailLink">This is a mail to link</a>
$emailAddress= ..

$subject= ....
$body=...
$emailString="mailto:"+$emailAddress+$subject+$body;
$emailLink= $("#emailLink");
$emailLink.attr("href",$emailString); 
```

Now, depending upon the context of an application, the href parameter of the link can be setup and when this link is clicked, it works. I have tested in following browers:

1.  Mozilla Firefox Desktop
2.  Safari Desktop
3.  Chrome Desktop
4.  Safari mobile on ipad 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:11:53.720

You should not use mailto:
Check if is not better to create a simple "Contact us" form. But still, take a look at this: [i-cant-get-mailto-links-to-open-the-mail-app-from-mobile-safari-when-using-jqto](https://stackoverflow.com/questions/2317431/i-cant-get-mailto-links-to-open-the-mail-app-from-mobile-safari-when-using-jqto)

# batch-file - 将文件从 FTP loacl 移动到目录的批处理脚本文件

> ID：11665951
> 
> 赞同：0
> 
> 时间：2012-07-26T09:08:58.243
> 
> 标签：batch-file, ftp

> **可能重复：**
> [如何使用 FTP 命令移动文件](https://stackoverflow.com/questions/9461844/how-to-move-files-using-ftp-commands)

我正在尝试将仅具有 .csv 格式的文件从本地 FTP 移动到 FTP 目录。我无法通过批处理脚本将文件移动到目录。所以我需要帮助。我是批处理文件脚本的新手。

```
open FTP ADDRESS 
USER
PASSWORD
prompt
bin

??????????????

bye 
```

从现在开始感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:25:43.537

`rename`正如@wmz 对[重复问题](https://stackoverflow.com/q/9461844/799586)的评论所指出的那样，您可以使用该命令在 ftp 服务器上移动文件。

```
open FTP ADDRESS 
USER
PASSWORD
prompt
bin
rename file.csv anotherfolder\file.csv
bye 
```

# jsp - 表中的标记和渲染时间

> ID：11665953
> 
> 赞同：0
> 
> 时间：2012-07-26T09:09:08.063
> 
> 标签：jsp, jakarta-ee, xhtml, javabeans

我对 JavaEE 和 XHTML 很陌生，希望你能帮助我。

我对标签有一些问题，`<c:if>`我知道它必须对渲染时间做一些事情。所以我有一个表，我想显示一个命令链接，不是在列表中的所有条目上，而是在一些具有特定类型或属性的条目上。

这是我的代码：

```
 <h:dataTable id="list" border="1" cellspacing="0" cellpadding="4"
                                     value="${listbean.entryList}" var="entry" >
    <c:if test="${entry.eventType == 'Übung' or entry.eventType== 'Praktikum' }">
         <h:column>
            <h:commandLink action="#{listbean.deleteEntry()}" value="show event">
                       <f:param name="id" value="${entry.id}"/>
            </h:commandLink>
         </h:column>
    </c:if> 
```

有可能解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:04:50.290

好吧，我通过使用一些工作解决了它。

我在 java 代码中声明了一些布尔变量，并使用 EL 来测试这些值是真还是假

# symfony-forms - 我应该如何在 Symfony2 表单中嵌入一组新实体？

> ID：11665955
> 
> 赞同：0
> 
> 时间：2012-07-26T09:09:12.900
> 
> 标签：symfony-forms, symfony-2.1

我需要编写一个表单来创建一个新实体，并使用它，最多 3 个关系（它们是新实体）。

我可以让它动态地附加/动态地删除它们（这可能很有用），或者让所有 3 个始终与实体相关，并让它们在它们上具有一个“活动”布尔值，这将是适当的。

我应该在什么时候这样做？我需要将它们呈现为表单上的复选框。

* * *

到目前为止，我已经尝试在将它们传递给表单之前将它们附加到实体，但是选择字段不能传递未映射的实体，所以这不好。

我还为此修改了 DataTransformer，尽管那时，据我所知，我必须在 DataTransformer 中创建新实体，这似乎是错误的，而且我无论如何都无法开始工作 - 我没有可以访问其中的实体，甚至绕过它，关系无法正确绑定（Doctrine 尝试首先保存关系）。

* * *

在 Symfony1 术语中，我可以为我需要的每个附加关系嵌入几个表格，使用新对象，它就可以工作，所以肯定还有一个相对简单的方法吗？

* * *

一位朋友还建议查看 ResizeFormEventListener，但据我所知，这是用于根据返回的数据“调整”表单的大小，虽然我从不希望表单更改，但我总是想要 3 个复选框。

* * *

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:17:56.040

如果不玩它，我不确定确切的细节 - 但根据我做过类似事情的方式，我希望使用“collectiontype”，然后将三个部门类型添加到其中。

# json - 最小的只读实现的 OData 标准摘要

> ID：11665956
> 
> 赞同：2
> 
> 时间：2012-07-26T09:09:16.927
> 
> 标签：json, odata, standards, atom-feed, atompub

[OData 规范](http://www.odata.org/media/30001/%5Bms-odata%5D.pdf)很长。甚至“ [OData Core](http://www.odata.org/media/30002/OData.html) ”文档也很长。

那么，简要总结一下只读 OData 发布者至少需要实现什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T09:09:16.927

我会开始的。OData 服务提供了一个 HTTP 端点，它：

*   必须理解“ `Accept`”标题
*   必须支持 Content-Type 标头，并且必须支持 ATOM 格式（可选 JSON）
*   可以将服务文档（集合列表）返回到`GET /`（10.1.1）
    *   如果是 ATOM (AtomPub?) 格式，层次结构是`service/workspace/collection/title`
*   `GET /Customers`必须将集合的描述返回给像(10.2) 这样的请求
    *   如果是 ATOM，层次结构是`feed/entry/content`
*   `GET /Customers(3)`必须将单个实体的描述返回给像(10.2.1)这样的请求
*   `GET /Customers(3)/Name`可以为（10.2.2）之类的请求返回单个实体的单个属性
*   必须提供包装在 EDMX 文档 (10.1.2) 中 的[CSDL模式描述](http://www.odata.org/documentation/odata-v3-documentation/common-schema-definition-language-csdl/)
    *   这应该可以在`/$metadata`
*   可以支持任何这些查询 (10.2.3)
    *   过滤器（限制返回的行数）：`Products?$filter=Price lt 10.00`
    *   选择（限制返回的字段）：`Products?$select=Rating,ReleaseDate`
    *   订购：`Products?$orderby=ReleaseDate asc, Rating desc`
    *   顶，跳过：`Products?$top=5&$skip=2`
    *   InlineCount（包括实体计数）：`Products?$inlinecount=allpages`
*   必须（？）提供实体的关系列表（10.2.4）：`Products(0)/$links/Orders`
*   必须提供实体计数 (10.2.5)：`Products/$count`
*   可以使用说明符支持其他格式`$format`(10.2.3.7)

当返回一个 ATOM 提要（例如一个集合）时，它需要符合一些 OData 约定：[http](http://www.odata.org/documentation/odata-v3-documentation/atom-format/) ://www.odata.org/documentation/odata-v3-documentation/atom-format/例如：

*   使用的类型是“ `edm:String`”等。
*   `link`元素被大量使用
*   `content`元素要么包含内联内容（例如，文本数据），要么通过`src=`属性链接到它（例如，图像、二进制文件）。

返回 JSON 提要时，它同样遵循某些规则：

*   [http://www.odata.org/documentation/odata-v3-documentation/json-verbose-format/](http://www.odata.org/documentation/odata-v3-documentation/json-verbose-format/)

鼓励 URL 遵循此方案：

*   [http://www.odata.org/documentation/odata-v3-documentation/url-conventions/](http://www.odata.org/documentation/odata-v3-documentation/url-conventions/)

# shell - 从 Emacs 运行多字符串 bash 脚本

> ID：11665958
> 
> 赞同：5
> 
> 时间：2012-07-26T09:09:17.923
> 
> 标签：shell, emacs, elisp, executable

我想运行以下 bash 脚本，该脚本存储在 Elisp 字符串中，而不是`.sh`文件中，然后将 shell 输出存储在变量中。

```
#!/bin/bash
IFS=: read -ra _dirs_in_path <<< "$PATH"

for _dir in "${_dirs_in_path[@]}"; do
    for _file in "${_dir}"/*; do
        [[ -x ${_file} && -f ${_file} ]] && printf '%s\n' "${_file##*/}"
    done
done 
```

我无法`shell-command`在由多个字符串组成的 bash 脚本上运行。[Emacs 和 Long Shell 命令](https://stackoverflow.com/q/2706171/596361)也没有帮助我，因为`compile`也`comint-run`需要命令，而不是 bash 语法。

**如何从 Elisp 运行复杂的 bash 脚本？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T15:38:25.947

`bash -c`如果您像引用任何其他可能包含 shell 元字符的 shell 参数一样引用多行命令，则可以作为参数提供多行命令，例如：

```
(setq my-command
      (concat "IFS=: read -ra dirs <<<\"$PATH\"\n"
              "for dir in ${dirs[@]}; do\n"
              " echo got dir \"$dir\"\n"
              "done\n"))

(shell-command (format "bash -c %s" (shell-quote-argument my-command))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T09:59:04.697

这也许会做你想要的。添加修饰符来品尝:)

```
(defun example-multiline-shell-command ()
  (interactive)
  (with-temp-buffer
    (insert "#!/bin/bash
IFS=: read -ra _dirs_in_path <<< \"$PATH\"

for _dir in \"${_dirs_in_path[@]}\"; do
    for _file in \"${_dir}\"/*; do
        [[ -x ${_file} && -f ${_file} ]] && printf '%s\n' \"${_file##*/}\"
    done
done")
    (write-region (point-min) (point-max) "~/temp.sh")
    (shell-command "source ~/temp.sh" (current-buffer))
    (buffer-string))) 
```

~~**编辑**哦，`"${_dirs_in_path[@]}"`如果文件中有空格或其他字符可能被视为名称中的分隔符，那么仅供参考。~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:12:00.747

`shell-command`实际上适用于多字符串 bash 语法。我的问题是`shell-command`不知道 bash 环境变量，包括 PATH。我所做的：将脚本中的所有内容替换为 elisp 字符串，然后将一些目录分配给 PATH `"`。`\"`这是成功将系统中的所有可执行文件输出到`*Shell Command Output*`缓冲区的代码。

```
(let ((path "PATH='/usr/local/bin:/usr/bin:/bin'")
      (command "IFS=: read -ra _dirs_in_path <<< \"$PATH\"

for _dir in \"${_dirs_in_path[@]}\"; do
    for _file in \"${_dir}\"/*; do
        [[ -x ${_file} && -f ${_file} ]] && printf '%s\n' \"${_file##*/}\"
    done
done"))
  (shell-command (concat path ";" command))) 
```

我仍然对如何`compile`使用多字符串 bash 脚本感兴趣。

**关于 PATH 的注意事项：**我没有`(getenv "PATH")`在上述解决方案中使用，因为据我了解，X 显示管理器（包括 xdm、gdm 和 kdm）[在 Xsession 之前不运行 shell](https://stackoverflow.com/a/9664872/596361)，因此从 GUI 运行的 emacs 将具有不同的环境变量来自 bash 的。我`emacs --daemon`通过 cron 在启动时运行，我的路径设置在`/etc/profile`and中`~/.profile`，所以 Emacs 不会从那里得到它的 PATH。

Steve Purcell 提出了一个[代码](https://github.com/purcell/emacs.d/blob/master/init-exec-path.el)（另请参见 SO 上的变体[一](https://stackoverflow.com/a/2566945/596361)和变体[二](https://stackoverflow.com/a/8609349/596361)）以确保 Emacs 具有与 shell 相同的环境变量，包括 PATH。

# sharepoint - SharePoint 列表上的 SQL Report Builder 3.0 LookupSet 函数

> ID：11665961
> 
> 赞同：1
> 
> 时间：2012-07-26T09:09:26.153
> 
> 标签：sharepoint, reporting-services, dataset

我有两个名为 city 和 town 的 SharePoint 列表。我在 SQL Report Builder 3.0 中为每个列表创建了两个数据集。城市数据集具有 ID 和 Title 列。Town 数据集有 ID、City_Id 和 Title。

![在此处输入图像描述](../Images/812f77fedd409aed0a78f0542e3e7710.png)

我的目的是显示城市名称和同一行的城镇。我像这样使用 LookupSet 函数：

```
=Join(LookupSet(Fields!ID.Value, Fields!City_ID.Value, Fields!Title.Value,"Town"), ",") 
```

但是，它只提供空白字段。我如何使用 LookupSet 函数。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:20:49.250

Fields!ID.Value 和 Fields!City_ID.Value 不是同一类型。Fields!ID 是整数，Fields!City_ID.Value 是字符串。所以我像这样重写我的表达

```
Join(LookupSet(Fields!ID.Value, CInt(Fields!City_ID.Value), Fields!Title.Value,"Town"), ",") 
```

# xml - xquery 多 if-else 语句

> ID：11665962
> 
> 赞同：2
> 
> 时间：2012-07-26T09:09:26.917
> 
> 标签：xml, string, if-statement, xquery

使用 xPath，我从 html 字段中获取数据，这些数据可以是这种格式（包括括号）：

> ## 数据 |||| 我用来解释我的代码的符号
> 
> （出生地，出生日期-死亡日期）|||| (str, AB) = 注意 str 也可能包含 '-'
> 
> (出生地点, 出生日期) |||| (str, A)
> 
> (出生地) |||| （字符串）
> 
> (出生日期-死亡日期) |||| (AB)
> 
> (出生日期) |||| （一种）
> 
> 或完全空

我正在尝试使用多个 if-else 语句将每个元素检索到单独的变量中，但它似乎不喜欢多行命令（我认为是这样）。

我已经制作了一个无法正常工作的代码：-/（它说期待返回，如果……则发现其他）

```
let $temp1 := data(normalize-space(substring-before(substring-after(//div/div[2]/h2/text(), '('), ')')))

if (contains($temp1,','))           (:   (str, A-B) or (str, A)   :)
then
    let $bornPlace := substring-before($temp1, ',')
    let $temp2 := substring-after($temp1, ',')

    if (contains($temp2,'-'))
    then
        let $bornDate := substring-before($temp2, '-')
        let $deathDate := substring-after($temp2, '-')
    else
        let $bornDate := $temp2
        let $deathDate := data('')

else if (contains($temp1,'-'))
    then                            (:   (s-t-r) or (A-B)   :)
        let $temp2 := normalize-space(substring-before($temp1, '-'))
        if (number($temp2)=$temp2)     (: it's a number :)
        then
            let $bornDate := temp2
            let $deathDate := normalize-space(substring-after($temp2, '-'))
            let $bornPlace := data('')
        else
            let $bornPlace := $temp1
            let $bornDate := data('')
            let $deathDate := data('')
    else                            (:   (str) or (A)   :)
        if (number($temp1)=$temp1)     (: it's a number :)
        then
            let $bornDate := temp1
            let $deathDate := data('')
            let $bornPlace := data('')
        else
            let $bornPlace := $temp1
            let $bornDate := data('')
            let $deathDate := data('') 
```

另外，如果有更漂亮的方法可以做到这一点，我会接受它：D

在此先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T12:03:54.500

let 子句不是表达式。你需要改变这种逻辑

```
if (contains($temp2,'-'))
    then
        let $bornDate := substring-before($temp2, '-')
        let $deathDate := substring-after($temp2, '-')
    else
        let $bornDate := $temp2
        let $deathDate := data('') 
```

这样

```
let $hyphenated := contains($temp2, '-')
let $bornDate := if ($hyphenated) then substring-before($temp2, '-') else $temp2
let $deathDate := if ($hyphenated) then substring-after($temp2, '-') else ''
return ... 
```

尽管在这种特殊情况下，我倾向于写：

```
let $tokens := tokenize($temp2, '-')
let $bornDate := $tokens[1]
let $deathDate := string($tokens[2])
return ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T11:28:41.287

您的`let`子句后跟表达式（以 开头`if`），这是无效的语法 -`return`缺少 a 使其成为完整的`FLWOR`表达式。

此外，变量是在内部范围内定义的，它们的绑定不会到达外部范围，这不是很有用。

尽管它们很容易变得晦涩难懂，但这可能是正则表达式的情况，例如

```
for $input in
(
    "Capetown, 10/04/1932-01/14/2002",
    "Taipeh, 05/31/1988",
    "Anchorage",
    "08/19/1918-07/02/1997",
    "12/22/1978"
)
let $bornPlace := replace($input, ",.*$|^[-0-9/]+$", "")
let $bornDate := replace($input, "^.*, |-[0-9/]+$|^[^0-9][^,]+$", "")
let $DeathDate := replace($input, "^.*[0-9]+-|^.*,[^-]*$|^[^,-]+$", "")
return <test input="{$input}" 
             bornPlace="{$bornPlace}" 
             bornDate="{$bornDate}" 
             DeathDate="{$DeathDate}"/> 
```

有关详细信息，请参阅[正则表达式](http://www.w3.org/TR/xmlschema-2/#regexs)规范和相应的[XQuery 函数](http://www.w3.org/TR/xquery-operators/#string.match)。

# javascript - jQuery弹出框堆叠

> ID：11665964
> 
> 赞同：0
> 
> 时间：2012-07-26T09:09:30.013
> 
> 标签：javascript, jquery, html, popup

所以基本上，我有一个在浏览器窗口上显示弹出窗口的功能。我需要连续调用它两次。我怎样才能第二次调用同一个函数，并让它只在第一个窗口被关闭后运行？

```
function focusbox() {
   $("#box").show();
}

$("#close-focus").live("click", function() {
   $("#box").fadeOut();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:12:14.933

将函数作为淡出的回调传递？

```
$("#close-focus").live("click", function() {
   $("#box").fadeOut(function() {
      focusbox(); //add your parameters in here
   });
}); 
```

# javascript - 溢出的 div 上的“向下滚动以更新”（或向左）功能

> ID：11665965
> 
> 赞同：1
> 
> 时间：2012-07-26T09:09:43.030
> 
> 标签：javascript, windows-8, microsoft-metro

就像智能手机的 Twitter 应用程序在更新推文列表方面所做的那样，我希望在 - 使用触摸 - 我滚动超出`div`限制时得到通知。

假设`wrapper`是`div`'s `id`，我尝试检查`wrapper.scrollWidth`, `scrollLeft`，`clientWidth`但`clientLeft`没有成功。即使滚动条超出其限制，这些值也保持不变。

提前致谢。

**编辑**

我正在寻找的功能似乎被称为“向下滚动以更新”，在 Twitter/Facebook 应用程序上（当然还有更多）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:16:52.107

尝试`$(wrapper).scrollTop()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:27:20.777

当用户释放滚动条时，您可能会使用强制捕捉点来强制应用程序“捕捉回”到滚动区域的末尾。这将允许您观察 scollLeft（或 scrollTop）的变化，然后观察它直到用户释放（当它开始反转时）。

挑战在于用户可以使用鼠标滚动过去强制快照点；您可能需要检测交互，并将其更改为滚动边界。

有关强制快照点的详细信息：

[指导方针](http://msdn.microsoft.com/en-us/library/windows/apps/hh465310.aspx)

[捕捉点声明](http://msdn.microsoft.com/en-us/library/ie/hh772038%28v=vs.85%29.aspx)

[捕捉点值](http://msdn.microsoft.com/en-us/library/ie/hh772037%28v=vs.85%29.aspx)

# joomla - 在 Joomla 地铁主题中制作自定义背景

> ID：11665966
> 
> 赞同：0
> 
> 时间：2012-07-26T09:09:49.757
> 
> 标签：joomla, background, web, themes, directory

我对 Joomla 比较陌生。我确实有一些经验，并且可以制作一个非常好的网站。我正在努力将自己的背景图像导入地铁主题？我做了一些搜索，人们一直说要覆盖“背景”文件夹中的一张图像。看起来很简单，只是这个文件夹似乎不存在于任何地方！任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:47:43.493

该文件夹必须存在。你应该在寻找

```
templates/yoo_subway/images/background/ 
```

然后，您可以选择 8 个文件夹，具体取决于您为模板使用的预设。

如果您似乎仍然对此感到困惑，请提供网站链接。

问候

# java-native-interface - JNI程序运行

> ID：11665967
> 
> 赞同：1
> 
> 时间：2012-07-26T09:09:50.463
> 
> 标签：java-native-interface, runtime-error

运行此代码时发现错误，这是我使用 JNI 的第一个程序

```
$ javac HelloWorld.java 
$  javah -jni HelloWorld
$ LD_LIBRARY_PATH=.
$    export LD_LIBRARY_PATH
$ gcc -I/usr/lib/jvm/java-6-openjdk /include  -o libHelloWorld.so -shared HelloWorld.c -fPIC
$ java -Djava.library.path=. HelloWorld
*** glibc detected *** java: munmap_chunk(): invalid pointer: 0x00007f89713b5736 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x776b6)[0x7f89782ca6b6]
/home/ushusadmin/libHelloWorld.so(Java_HelloWorld_nativeHelloWorld+0x82)  [0x7f89713b56de]
[0x7f8972e1dd68]
======= Memory map: ========
00400000-00409000 r-xp 00000000 08:11 1984203                            /usr/lib 
.
.
.
.
.
7f8976c97000-7f8976e96000 ---p 00007000 08:11 9175206                    /lib/x86_64- linux-gnu/librt-2.13.soAborted 
```

出现这个错误请给我一个解决这个错误的建议，谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:31:27.367

在编译代码之前包含 JNI 库的路径。

```
export PATH="/Library path/":$PATH 
```

# php - 如何使递归树视图可折叠

> ID：11665976
> 
> 赞同：0
> 
> 时间：2012-07-26T09:10:25.153
> 
> 标签：php, jquery, mysql, css, treeview

我有一个递归树视图，它从数据库中提取所有信息，并希望了解如何使其可折叠。我尝试使用 Jquery 和 Javascript，但都没有任何效果。不确定是否可能只是我的错误或其他原因。

这是我的基本代码：

```
<body>
<?php
mysql_connect('localhost', 'root');
mysql_select_db('test');

 $qry="SELECT * FROM treeview_items";
 $result=mysql_query($qry);

 $arrayCategories = array();

 while($row = mysql_fetch_assoc($result)){ 
 $arrayCategories[$row['id']] = array("parent_id" => $row['parent_id'], "name" =>                       
 $row['title']);   
  }
//createTree($arrayCategories, 0);

 function createTree($array, $currentParent, $currLevel = 0, $prevLevel = -1) {

foreach ($array as $categoryId => $category) {

if ($currentParent == $category['parent_id']) {                       

    if ($currLevel > $prevLevel) echo " <ul> "; 

    if ($currLevel == $prevLevel) echo " </li> ";

    echo '<li id="'.$categoryId.'" onclick=child(this.id);>       
 <span>'.$category['name'].'</span>';

    if ($currLevel > $prevLevel) { $prevLevel = $currLevel; }

    $currLevel++; 

    createTree ($array, $categoryId, $currLevel, $prevLevel);

    $currLevel--;               
    }   

}

if ($currLevel == $prevLevel) echo " </li>  </ul> ";

}   
?>
<div id="content" class="general-style1">
<?php
 if(mysql_num_rows($result)!=0)
 {
?>
<ul>
<li id="0" class="root"><span>Categories</span>
<?php createTree($arrayCategories, 0); ?>
</li>
</ul>
<?php
}
?>
</div>
</body>
</html> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:18:13.653

我认为真的值得看看这种仅用于可折叠树视图的 css 方法：[http](http://www.thecssninja.com/css/css-tree-menu) ://www.thecssninja.com/css/css-tree-menu经过一些修改，它可以用于任何类型的树视图您可能想要使用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T22:03:01.570

在这里，您可以找到使用 php 和 jQuery 制作的可折叠树视图。

它就像一个魅力（除了我需要制作一个预先折叠的treeView..但也许你不需要那个，在这种情况下，这应该可以解决你的问题）

[如何使用 php/javascript 制作预先折叠的 TreeView](https://stackoverflow.com/questions/15349533/how-to-make-pre-collapsed-treeview-with-php-javascript)

# javascript - IE7 页面挂起，怀疑是由于 javascript，但我该如何诊断？

> ID：11665980
> 
> 赞同：0
> 
> 时间：2012-07-26T09:10:32.090
> 
> 标签：javascript, internet-explorer-7

[我已经查看了此](https://stackoverflow.com/questions/361635/debugging-javascript-in-ie7)SO 帖子中提到的 Web Dev Helper ，但看起来并没有帮助。

我似乎没有办法获取有关挂起开始时页面在做什么的信息？此类问题的任何已知技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:39:18.247

只是为了我的信息和任何感兴趣的人，这是由于在调整窗口大小时运行的操作。对于 IE7，此事件似乎几乎不断触发。超时脚本使我能够在这里获得一些控制权。

```
var resizeTimeout;
    var actioning = false;

    $(window).resize(function() {

        if(!actioning ) {

            actioning = true;

            resizeTimeout = setTimeout(function() {

                clearTimeout(resizeTimeout);

                .. do stuff

            }, 200);
        }
    }); 
```

# ruby-on-rails - Vagrant 和 guest 的 Gemfile 冲突

> ID：11665981
> 
> 赞同：4
> 
> 时间：2012-07-26T09:10:42.693
> 
> 标签：ruby-on-rails, virtual-machine, conflict, vagrant, gemfile

在我的系统 (OS X) 上，我有一个在 Rails 3.1.0、ruby 1.8.7 上运行的应用程序。

我安装了 Vagrant 并使用 Ubuntu virtual 进行设置。我从虚拟机中创建了一个新项目 ABC，并在虚拟机上安装了 ruby​​ 1.9.3 和 Rails 3.2.6。

现在，当我退出 Vagrant 虚拟机并想再次从 ABC 项目目录 ssh 进入它时，它遇到了 ABC 项目的 Gemfile 中的冲突：

`~/.rvm/gems/ruby-1.8.7-p358@global/gems/bundler-1.1.4/lib/bundler/spec_set.rb:90:in 'materialize': Could not find actionmailer-3.2.6 in any of the sources (Bundler::GemNotFound)`

当我从 ABC 项目的目录中删除 Gemfile 时，我可以毫无问题地使用 Vagrant。

为什么 Vagrant 会检查项目的 Gemfile，而不仅仅是运行虚拟机？

以前有人经历过这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-01T08:51:11.560

Vagrant 使用 Gemfile 作为插件。请参阅插件文档[https://docs.vagrantup.com/v2/plugins/packaging.html](https://docs.vagrantup.com/v2/plugins/packaging.html)。

所以 vagrant 认为你的 rails gem 是 vagrant 的插件并且失败了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:37:29.483

我当前的设置使用从 rails 目录分离的 Vagrantfile。

在我开始使用 Puppet 提供脚本、各种 bash 脚本、rails 之外的项目文档文件夹等之后，我最终得到了这个设置。

保持 Rails 应用程序尽可能干净而不用本地开发工具文件 (Vagrantfile) 污染它更有意义。

这个问题仍然有效。我不确定这是否符合 github 上的问题报告...

# php - yii 自定义下拉菜单在验证后为空白

> ID：11665987
> 
> 赞同：1
> 
> 时间：2012-07-26T09:10:54.453
> 
> 标签：php, yii

状态：我在用户/创建时有 3 个依赖下拉自定义字段验证。他们验证得很好。Q : 提交后，如果没有通过验证，我所有的下拉列表都是空白的。我能怎么做？

这是在提交之前 ![提交前](../Images/67cd0776e9e69a6a60acd8de66cbebf1.png)

这是提交后 ![提交后](../Images/d52f7cfb4e5bff9f07fb00f7b3a8e4da.png)

这是部门 tbl 结构

```
department
id | name      | p_id | company_id
1  | dep1      | 0    | 1
2  | dep2      | 0    | 1
3  | sec1.1    | 1    | 1
4  | sec2.1    | 2    | 1
5  | team1.1.1 | 3    | 1
6  | team1.1.2 | 3    | 1
7  | team2.1.1 | 4    | 1 
```

这是用户 tbl 结构

```
user
id | name | company_id | team_id 
```

team_id 与部门 tbl 的关系。

这是用户模型的规则

```
public $section;
    public $team;
public function rules()
    {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
            array('login_name, email, rank_id, company_id, team_id, section, team', 'required'), // team_id is Department   
            array('rank_id, company_id, team_id', 'numerical', 'integerOnly'=>true),
            array('login_name, first_name, last_name', 'length', 'max'=>100),
            array('password', 'length', 'max'=>50),
            array('email', 'length', 'max'=>200),

            array('password', 'compare', 'on' => 'create'),
            array('password_repeat', 'safe', 'on' => 'create'),
            array('password, password_repeat', 'required', 'on' => 'create'),

            // The following rule is used by search().
            // Please remove those attributes that should not be searched.
            array('first_name, last_name, email, created, updated, rank_id, company_id, team_id', 'safe', 'on'=>'search'),
        );
    } 
```

此视图 (_form.php)

```
<!-- This is Department -->
<div class="row">
        <?php
            if($model->company_id)
            {
                $records = Department::model()->findAll('p_id=0 AND company_id=:company_id', array(':company_id'=>(int) $model->company_id));
                $department_list = CHtml::listData($records, 'id', 'name');
            }else $department_list = array();
        ?>
        <?php echo $form->labelEx($model,'team_id'); ?>
        <?php echo $form->dropDownList($model,'team_id', $department_list, array('prompt'=>'Please select a department',
                'ajax' => array(
                    'type'=>'POST', //request type
                    'url'=>CController::createUrl('user/dynamicsection'), //url to call.
                    'dataType'=>'json',
                    'data'=>array('department_id'=>'js:this.value'),  
                    'success'=>'function(data) {
                        $("#User_section").html(data.ddsection);
                        $("#User_team").html(data.ddteam);
                    }',
                )
            )
        ); 
        ?>
        <?php echo $form->error($model,'team_id'); ?>
    </div>
<!-- This is section -->
    <div class="row">
        <?php echo $form->labelEx($model,'section'); ?>
        <?php echo $form->dropDownList($model,'section', array(), array('prompt'=>'Please select a section',
        'ajax' => array(
            'type'=>'POST', //request type
            'url'=>CController::createUrl('user/dynamicteam'), //url to call.
            'dataType'=>'json',
            'data'=>array('section'=>'js:this.value'),  
            'success'=>'function(data) {
                        $("#User_team").html(data.ddteam);
                    }',
        ))); ?>

        <?php echo $form->error($model,'section'); ?>

    </div>
<!-- This is Team -->
    <div class="row">
        <?php echo $form->labelEx($model,'team'); ?>
        <?php echo $form->dropDownList($model,'team', array(), array('prompt'=>'Please select a team')); ?>
        <?php echo $form->error($model,'team'); ?>

    </div> 
```

这个控制器

```
public function actionCreate()
    {
        $model=new User;

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['User']))
        {
            if(User::model()->exists("login_name='".$_POST['User']['login_name']."'"))
            {
                $_SESSION['User'] = $_POST['User'];

                $duplicate_error = '<p>Please fix the following input errors:</p>
                    <ul>
                    <li>Name is duplicated.</li>
                    </ul>';
                Yii::app()->user->setFlash('duplicate_error',$duplicate_error);
                $this->redirect(array('user/create'));
            }else{
                $currentTime = date('Y-m-d h:i:s', time());             
                $model->created = $currentTime;

                $model->attributes=$_POST['User'];

                if($_POST['User']['team']){
                    $model->team_id = (int)$_POST['User']['team'];
                    $dep['team'] = (int)$_POST['User']['team'];

                }elseif($_POST['User']['section']){
                    $model->team_id = (int)$_POST['User']['section'];
                    $dep['section'] = (int)$_POST['User']['section'];

                }elseif($_POST['User']['team_id']){
                    $model->team_id = (int)$_POST['User']['team_id'];
                    $dep['department'] = (int)$_POST['User']['team_id'];
                }
                if($model->save())
                    $this->redirect(array('view','id'=>$model->id));

            }
        }

        $this->render('create',array(
            'model'=>$model,
        ));
    } 
```

感谢您的帮助。

========**********=========

更新的模型没有改变，

查看添加

'options'=>array("$model->section"=>array('selected'=>'selected')),

进入 dorpdown

控制器

```
public function actionCreate()
    {
        $model=new User;

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['User']))
        {
            if(User::model()->exists("login_name='".$_POST['User']['login_name']."'"))
            {
                $_SESSION['User'] = $_POST['User'];

                $duplicate_error = '<p>Please fix the following input errors:</p>
                    <ul>
                    <li>Name is duplicated.</li>
                    </ul>';
                Yii::app()->user->setFlash('duplicate_error',$duplicate_error);
                $this->redirect(array('user/create'));
            }else{
                $currentTime = date('Y-m-d h:i:s', time());             
                $model->created = $currentTime;

                $model->attributes=$_POST['User'];
                $model->team = (int)$_POST['User']['team'];
                $model->section = (int)$_POST['User']['section'];

                if($_POST['User']['team']){
                    $model->team_id = (int)$_POST['User']['team'];              
                }elseif($_POST['User']['section']){
                    $model->team_id = (int)$_POST['User']['section'];               
                }elseif($_POST['User']['team_id']){
                    $model->team_id = (int)$_POST['User']['team_id'];
                }

                if($model->save())
                    $this->redirect(array('view','id'=>$model->id));

            }
        }

        //$dst = $this->getDST($model->team_id);

        $this->render('create',array(
            'model'=>$model,
            'department'=>0,
            'section'=>0,
            'team'=>0,
        ));
    } 
```

下拉空白问题消失了。但不验证部分和团队。我怎样才能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:33:07.453

比较密码的验证规则缺少 compareAttribute 的参数：

```
array('password', 'compare', 'compareAttribute'=>'password_repeat', 'on'=>'create'), 
```

高温高压

# java - 在哪里可以找到 Cplex 库（不是 AIMMS 的 GUI）？

> ID：11665991
> 
> 赞同：0
> 
> 时间：2012-07-26T09:11:16.480
> 
> 标签：java, macos, cplex

我想将 CPLEX 用作 java 库。但是，我没有找到用于此目的的下载站点。如果我理解正确的话，谷歌搜索提供了一个 AIMMS 站点，它只是该工具的 GUI。

你能帮忙吗？我的操作系统是 Mac OS X ，所以我不能使用 AIMMS 的学术许可证。cplex.jar 对我来说就足够了。但我看不到它的位置......谷歌在这里没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T22:04:23.930

[http://pic.dhe.ibm.com/infocenter/cosinfoc/v12r2/index.jsp?topic=%2Filog.odms.cplex.help%2FContent%2FOptimization%2FDocumentation%2FCPLEX%2F_pubskel%2FCPLEX19.html](http://pic.dhe.ibm.com/infocenter/cosinfoc/v12r2/index.jsp?topic=%2Filog.odms.cplex.help%2FContent%2FOptimization%2FDocumentation%2FCPLEX%2F_pubskel%2FCPLEX19.html)

这是它的链接。不幸的是，它不能是 .jar。但是，如果您下载 IBM® ILOG CPLEX Optimization Studio，您可以找到它，只需按照链接上的说明进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:42:13.817

我自己弄清楚。应该登录 IBM 的站点。届时将提供免费试用版或学术许可证。顺便说一句，Cplex 似乎不错。

# java - 将java语法折叠成单行

> ID：11665992
> 
> 赞同：1
> 
> 时间：2012-07-26T09:11:18.967
> 
> 标签：java, syntax, if-statement, formatting, string-formatting

以下确保 char(4) 的输出，因此 5 是 0005，43 是 0043：

```
if ( var > 1 && var <= 9 ) {
    o.setOutput (String.format ("%0001d", i.getInput());
else if (var > 9 && var <= 99 ) {
    o.setOutput (String.format ("%002d", i.getInput());
else if (var > 99 && var <= 999 ) {
    o.setOutput (String.format ("%03d", i.getInput());
else if (var > 999 & var <=9999 ) {
    o.setOutput (String.format ("%4d", i.getInput());
} 
```

有没有办法写这只是一行而不是多个 if/case 语句？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T09:15:09.730

看起来你想要的只是：

```
o.setOutput (String.format ("%04d", i.getInput()); 
```

格式字符串`%04d`生成（至少）四个字符的输出字段，并根据需要在左侧填充`0`字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:23:23.330

只需使用`String.format("%04d", number);`

# java - Java Web App 上传和加载图片

> ID：11665999
> 
> 赞同：1
> 
> 时间：2012-07-26T09:11:31.927
> 
> 标签：java, web-applications

所以，我正在使用 Spring Framework 开发简单的 Web 应用程序。

应用程序用户可以上传图像。

存储/加载图像的最佳实践是什么？

我在某个论坛上找到了解决方案，有人建议将文件存储到 user.dir 目录。

好的，我也这样做。

当用户上传图像时，我将图像存储到 user.dir 目录。

现在，我有一个问题：如何将图像从 user.dir 目录加载到页面？

```
 <img src="path/to/dir/where/images/stored"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:16:50.867

最佳实践确实是将此类数据存储在 webapp 的树之外，以避免重新部署时出现问题。它们的确切存储位置更多的是约定俗成的问题，user.dir 确实是一个合理的选择。

但是，您不能直接提供这些文件，通常是通过创建一个映射到 eg 的 servlet 来完成的，该 servlet`images/*`解析请求 URL (eg `<img src="approot/images/apic.jpg"/>`) 并基于该 url if fetches 和 serving `path/to/dir/where/images/stored/apic.jpg`。作为一个额外的好处，servlet 让您可以完全控制下载的内容、下载时间和由谁下载，也许您稍后会在应用程序生命周期中需要这种控制。

您可以使用[getPathInfo](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getPathInfo%28%29)检索 servlet 名称后面的 URL 部分，为输出设置正确的 MIME 类型，并将请求的文件流式复制到 servlet 的输出。

可以在[BalusC 的博客上找到这样一个 servlet 的公开可用且解释清楚的示例](http://balusc.blogspot.be/2007/04/imageservlet.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T12:00:12.860

我们最近在我们的一个项目中遇到了类似的情况，因此我们决定将所有用户个人资料图片存储在应用程序目录中的一个文件夹中。然后在我们的 servlet 实现中，我们检索到文件夹的路径，这样我们就可以在那里拥有一个独立于平台的实现，每当我们必须存储一个 img 时，我们将动态生成的 img 名称以及其他配置文件详细信息存储在 db 中，因此存储和检索只是一个数据库查找的问题以及将来如果我们需要更改 img 的目录，我们需要做的就是更新路径变量的值。

希望能帮助到你

祝一切顺利。..!!!