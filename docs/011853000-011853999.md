# StackOverflow 问答 11853000-11853999

# c# - 随时间呈指数衰减的值

> ID：11853002
> 
> 赞同：2
> 
> 时间：2012-08-07T19:48:03.903
> 
> 标签：c#, algorithm, math, datetime

我想创建一个排序算法，该算法采用项目分数（基于赞成/反对票）并根据考虑时间衰减的不可见基础分数对它们进行排序。

从分析哲学的角度来看，我的数学算法并不总是最好的。在以下示例中，解决 InverseTimeRelationship(currentItem.CreationDate) 的简单优雅方法是什么：

```
class Item()
{
  int upvotes;
  int downvotes;
  int SortScore;
  DateTime CreationDate;
}

var currentItem = GetSomeSpecificItemMethod();
int Score = currentItem.upvotes - currentItem.downvotes;
currentItem.SortScore = Score * InverseTimeRelationship(currentItem.CreationDate);
SortItemsBySortScore(Item[]);

InverseTimeRelationship(DateTime CreationDate)
{
  //Code To Write
} 
```

希望一天之后，SortScore 会稍微低一点，但是说 2-3 天之后，无论它有多少票，它都会从列表/首页的顶部消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:50:22.380

你可以看看[reddit 使用的算法](http://amix.dk/blog/post/19588)。这似乎是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T19:57:21.730

也许：

> e^-x (= 1/e^x)

看到[这张图片](http://upload.wikimedia.org/wikipedia/commons/d/db/Plot-exponential-decay.svg)（来自[维基百科](http://en.wikipedia.org/wiki/Exponential_decay)）。

这是代码：

```
double InverseTimeRelationship(DateTime CreationDate)
{
    double HowFast = 0.1;
    return Math.Exp(-DateTime.Now.Subtract(CreationDate).Days * HowFast);
} 
```

你可以试试：

```
Text = InverseTimeRelationship(DateTime.Today.AddDays(-3)).ToString(); 
```

# hadoop - Apache HBase 和 Cloudera HBase 是否兼容？

> ID：11853009
> 
> 赞同：1
> 
> 时间：2012-08-07T19:48:40.343
> 
> 标签：hadoop, hbase, cloudera, elastic-map-reduce

在工作中，我们正在尝试执行以下操作：

*   通过 Amazon 运行 Elastic MapReduce 作业，它将 Hadoop 冻结在 0.20.205 版本
*   将输出写入在 EC2 上运行的 HBase，特别是来自 Cloudera 的 0.92.1-cdh4.0.1

到目前为止，我发现当我在 Hadoop 作业（通过 maven 打包）中使用 Apache HBase 0.92.1 时，我的 WordCount 测试似乎有效。我担心这是意外工作，并且随着我的使用成熟可能会爆炸。

但是，当我在 Hadoop 作业中打包 HBase 0.92.1-cdh4.0.1 时，我得到`ClassNotFoundException`：

[https://emr-qa.eventbrite.com.s3.amazonaws.com/logs/j-RWJ75VR11SLB/steps/1/stderr](https://emr-qa.eventbrite.com.s3.amazonaws.com/logs/j-RWJ75VR11SLB/steps/1/stderr)

*   Apache HBase jar 能否与 CDH Hbase 服务器很好地配合使用？
*   像这样混合版本和软件包是可怕的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:41:18.163

我有同样的问题，而且似乎它们不兼容（连接有问题）。解决方案是更改maven依赖以使用cloudera的jar：

```
 <properties>
   <hbase.version>0.92.1-cdh4.0.1</hbase.version>
   <hadoop.version>2.0.0-cdh4.0.1</hadoop.version>
 </properties>

 <repositories>
   <repository>
       <id>cloudera</id>
       <url>https://repository.cloudera.com/artifactory/cloudera-repos/</url>
    </repository>
 </repositories> 
```

稍后在依赖项中：

```
 <dependency>
 <groupId>org.apache.hbase</groupId>
      <artifactId>hbase</artifactId>
      <version>${hbase.version} </version>
      <exclusions>
          <exclusion>
              <artifactId>thrift</artifactId>
              <groupId>org.apache.thrift</groupId>
          </exclusion>
      </exclusions>
  </dependency> 
```

当您想将代码与另一个发行版一起使用时，您可以更改属性并重新打包

# android - 如何获取 android tcp 跟踪

> ID：11853018
> 
> 赞同：0
> 
> 时间：2012-08-07T19:49:08.357
> 
> 标签：android, sockets, tcp, trace

我正在寻找报价中最后一个问题的答案

这是对[这个线程](https://stackoverflow.com/questions/11847092/android-tcp-does-not-flush-until-socket-is-closed#comment15763190_11847092)的回应：

> 由于这些是短消息（< MSS），我猜堆栈可能正在实现 Nagle 的算法。服务器是否在执行某种延迟的 ACK？如果可能，您应该捕获跟踪并查看是否有来自另一方的未决确认。在任何一种情况下，TCP_NODELAY 都应该有所帮助。
> 
> > > > (1) ACK 代表什么？我用谷歌搜索了它，但找不到定义 (2) 我会给你和 Nikolai 建议的 TCP_NODELAY 一个镜头，如果它确实回答了问题，则标记为已回答。感谢你目前的帮助！
> > > > 
> > > > > ACK 是 tcp 确认。服务器可能正在等待将它们捆绑在一起，而不是为每个段发送 ACK。如果客户端实现了 Nagle 的算法，它会在发送带有 < MSS 的段之前等待 ACK。在 TCP 跟踪中，您必须在 TCP 标头中查找 ACK 编号并将其与 SEQ 编号相关联，以查看是否发生这种情况。或者您可以在此处发布捕获的片段。
> > > > > 
> > > > > > > > > > 好的，我更新了问题以在我的线程中显示创建套接字以及 Java 服务器的 run 方法。你会看到我有 socketClient.setTcpNoDelay(true); 已经在那里了，但它没有修复它。该文档有它应该是 socketClient.setTcpNoDelay(on); 但后来我需要初始化。我有点困惑我应该初始化什么“on”来制作 socketClient.setTcpNoDelay(on); 工作？
> > > > > > > > > > 
> > > > > > > > > > 关于 TCP 跟踪，我是从 android（客户端）还是计算机（服务器）端执行此操作？我在哪里/如何实现它？它只是socketClient吗？?

附加信息：

*   我在 Eclipse 中开发
*   我的 TCP 客户端（android）发布在链接的问题中
*   我的 TCP 服务器 (java) 发布在链接的问题中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:27:03.867

我不确定标题是否与您提出的问题有关。

如果我们坚持标题：“如何获取 android tcp 跟踪”，您可以使用[http://www.wireshark.org/](http://www.wireshark.org/)之类的软件。

将其安装在您的开发机器上，并确保您的开发设备或模拟器使用您的开发机器的互联网连接。

这就是你获得 tcp 跟踪的最简单方法（恕我直言）

# iphone - RestKit：动态属性的映射（不是示例中的 NSDictionary）

> ID：11853019
> 
> 赞同：-2
> 
> 时间：2012-08-07T19:49:12.740
> 
> 标签：iphone, ios, restkit

我在我的 iOS 项目中使用 RestKit，并发现了一个不平凡的问题，但找不到解决方案。

我有一个json：

```
[{
    "name": "restkit", 
    "downloads": 2
},
{
    "name": "restkit", 
    "rating": 10.0
}] 
```

和数据模型：Model.h

```
@interface Model : NSObject
    @property (nonatomic, strong) NSString * name;
    @property (nonatomic, strong) NSString * key;
    @property (nonatomic, strong) NSString * value;
@end 
```

这些 JSON 对象加载在一个数组中，其中一个属性是“动态”属性。在 RestKit 中执行映射后，我希望能够有 2 条记录：

```
name: "restkit", key: "downloads", value: 2
name: "restkit", key: "rating", value: 10.0 
```

问题：如上例所示，如何将开头的 JSON 映射为 2 个 NSObject？

这就是我使用 RestKit 初始化映射和触发请求的方式：

```
// during app initialization I setup mappings:

RKObjectMapping *modelMapping = [RKObjectMapping mappingForClass:[Model class]];
[metricDataMapping mapKeyPath:@"name" toAttribute:@"name"];

...... -- something should go here to support that dynamic stuff

[[RKObjectManager sharedManager].mappingProvider addObjectMapping:metricDataMapping];

// in the view controller when loading data
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:url usingBlock:^(RKObjectLoader *loader){
    loader.objectMapping = [[RKObjectManager sharedManager].mappingProvider objectMappingForClass: [MetricData class]];

    loader.onDidLoadObjects = ^(NSArray * objects){
        self.dataArray = objects;
    };
}]; 
```

问题在于“下载”和“评级”键是动态的，它可以是任何词。我需要解析“即时”并在 UI 中显示。Restkit 确实支持这种行为，但仅适用于嵌套字典。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:02:26.207

您可以使用键值编码访问动态命名的属性。从 JSON 中创建 NSDictionary 后，执行以下操作：

```
[self setValue:[dictionary objectForKey:@"downloads"] forKey:@"downloads"]; 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:29:52.080

我确实在由 RestKit 触发的模型上使用了键值验证来为我想要的通用键设置正确的度量键和值。

# php - 在 sqlsrv 中寻找 mysql_fetch_field 等效项或任何解决方法

> ID：11853024
> 
> 赞同：-1
> 
> 时间：2012-08-07T19:49:33.613
> 
> 标签：php, mysql, sql-server

以下代码段输出查询中存在的字段名称`mysql`：

```
for($i=0; $i<$fields_num; $i++)
{

    $field = mysql_fetch_field($result);
    echo  $field->name , ",";  
    //outputs something like ID,FirstName,OrderNbr etc..
} 
```

显然，这只适用于`mysql`结果句柄 ( `$result`)。

当语句句柄为 时，你如何做同样的事情`sqlsrv`？

编辑：我们几乎都知道 mysql 出，mysqli 入。但问题不在于那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:02:55.400

感谢 ZombieHunter 的领导，这是我问题的答案。

包括在此处供可能需要它的人使用。

```
 foreach( sqlsrv_field_metadata($result) as $fieldMetadata)
    {
        echo $fieldMetadata['Name'] , ",";  
        //outputs something like ID,FirstName,OrderNbr etc..
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:54:07.297

这取决于您使用的数据库扩展：

*   使用 ext/mssql，相当于[`mssql_fetch_field()`](http://php.net/manual/en/function.mssql-fetch-field.php).
*   使用 PDO，等价于 [`PDOStatement::getColumnMeta()`](http://php.net/manual/en/pdostatement.getcolumnmeta.php).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:25:08.580

试试[`sqlsrv_field_metadata()`](http://msdn.microsoft.com/en-US/library/cc296197%28v=sql.90%29.aspx)。

据我所知，没有其他可用的。查看[MSDN 上的 API 参考以](http://msdn.microsoft.com/library/cc296152%28v=SQL.90%29.aspx)获取所有受支持函数的完整列表。

# c# - 输入 URL，如 http://example.com 在操作输入中更改为 http:/example.com

> ID：11853025
> 
> 赞同：1
> 
> 时间：2012-08-07T19:49:38.083
> 
> 标签：c#, asp.net-mvc, c#-4.0, asp.net-mvc-routing, asp.net-mvc-4

我问了一个问题以获取 URL 作为操作输入[。](https://stackoverflow.com/q/11838840/1003464)现在我有一个新问题。传递给操作的 URL 从`http://example.com`变为`http:/example.com`。

**我想知道为什么以及如何解决这个问题。**

PS：我添加了这段代码来解决，但我认为将来可能会有另一个问题！代码是：

```
if ((url.Contains(":/")) && !(url.Contains("://")))
{
    url = url.Replace(":/", "://");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:55:01.367

使用正则表达式：

```
string src = @"http://example.com";
string result = Regex.Replace(src, @"(?<=https?:/)/", ""); 
```

如果您需要还原：

```
string src = @"http:/example.com";
string result = Regex.Replace(src, @"(?<=https?:)/(?=[^/])", @"//"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T20:03:06.207

浏览器（或服务器）正在用单斜杠替换双斜杠（非法）。
尝试一下，

`http://stackoverflow.com/questions/11853025//input-url-like-http-site-com-changes-to-http-site-com-in-action-input`

（在 Chrome 中）转到：

`http://stackoverflow.com/questions/11853025/input-url-like-http-site-com-changes-to-http-site-com-in-action-input`

如果我是你，我会从你的路径中删除 http:// 并稍后添加它。

`http://localhost:1619/Utility/PR/example.com/`

然后，`url = "http://" + url;`

如果您可能获得安全网址，请将其添加到路由`/http/example.com`或`/https/example.com`

# android - Android SQLite MAX 函数问题

> ID：11853029
> 
> 赞同：0
> 
> 时间：2012-08-07T19:49:46.147
> 
> 标签：android, sqlite, max

我想从具有 MAX(col) 的表中检索行，但是如果 col 的值具有相同的数据，则 MAX(col) 返回多行。我有2个表如下：

```
**Table1**
row_id INTEGER (Primary key auto incremented), 
name   TEXT

**Table2**
row_id INTEGER (Primary key auto incremented), 
ref_id INTEGER (Foreign key of Table1(row_id)), 
date_in_long TEXT, 
data   TEXT 
```

以下查询我正在执行以获取具有 MAX(date_in_long) 的行，期望单个最新输入的行。

```
SELECT DISTINCT a.name, b.row_id, b.ref_id, b.date_in_long, b.data
FROM Table1 a, Table2 b 
WHERE a.row_id=b.ref_id 
AND b.date_in_long =
(SELECT MAX(c.date_in_long) 
 FROM Table2 c 
 WHERE c.ref_id=a.row_id
) 
```

如果 date_in_long 与 ref_id 具有不同的值，则输出结果将是完美的。但它返回多行是值相同。例子

**表 1：** row_id 名称 1 aparna
2 user1 3 XYZ

**表2：** row_id ref_id date_in_long data 1 1 98 data1 for aparna 2 1 100 data2 for aparna 3 1 100 data3 for aparna 4 2 200 data1 for user1 5 2 300 data2 for user1 6 3 100 data1 for XYZ

**上述查询结果：**

```
row_id  ref_id  name    date_in_long  data
2       1       aparna  100           data2 for aparna
3       1       aparna  100           data3 for aparna
5       2       user1   300           data2 for user1
6       3       XYZ     100           data1 for XYZ 
```

**预期结果应该是：**

```
row_id  ref_id  name     date_in_long  data
3       1       aparna   100           data3 for aparna
5       2       user1    300           data3 for user1
6       3       XYZ      100           data1 for XYZ 
```

请让我知道上述查询中的问题。

添加以下条件（作为 Alexandar 在这篇文章中提供的解决方案）不包括某些行

```
AND
b.row_id = (Select MAX(c.row_id) from Table2 c where c.ref_id = b.ref_id) 
```

**添加以上 row_id 条件后的输出：**

```
row_id  ref_id  name     date_in_long  data
3       1       aparna   100           data3 for aparna
6       3       XYZ      100           data1 for XYZ 
```

USER1 没有行。

请让我知道如何解决此查询。

谢谢， 问候， 阿帕纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:05:12.630

问题是“distinct”关键字并不意味着“返回每个值都与其他行不同的行”，它的意思是“返回在某种程度上彼此不同的行”。

因此，即使 row_id 2 和 3 具有相同的 ref_id，它们也有不同的 row_id 和数据列——因此，它们是唯一的行。

一种选择是添加一个额外的条件，以便仅尊重特定 ref-id 的最大 row_id。

添加的条件看起来像这样。

```
AND
b.row_id = (Select MAX(c.row_id) from Table2 c where c.ref_id = b.ref_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:37:29.163

以下查询解决了我的问题。

```
SELECT a.name, b.row_id, b.ref_id, b.date_in_long, b.data, MAX(date_in_long)
FROM Table1 a INNER JOIN Table2 b 
ON a.row_id=b.ref_id 
GROUP BY a.row_id 
```

谢谢， 问候， 阿帕纳

# clojure - clojure 不连续的让

> ID：11853031
> 
> 赞同：3
> 
> 时间：2012-08-07T19:49:56.570
> 
> 标签：clojure, scheme

看起来 clojure`let`是顺序的，并且对应于一个 scheme `let*`。clojure 是否具有像 scheme's 这样的非顺序绑定机制`let`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:59:02.823

我相信`binding`宏是并行的而不是顺序的。

请参阅：[http ://clojuredocs.org/clojure_core/clojure.core/binding](http://clojuredocs.org/clojure_core/clojure.core/binding)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T20:27:00.480

letfn 是一种函数的并行绑定形式，允许人们编写相互递归的局部函数。尽管它可以在紧要关头使用，但它并不像您所寻求的那样通用。

```
user> (letfn [(a [] 4) 
              (b [] c) 
              (c [] a)] 
       (a))
4 
```

只要您将值分配给 vars 中的事物并想要动态范围，就可以使用绑定

```
user> (def ^:dynamic x 4)
#'user/x
user> (defn foo [] x)
#'user/foo
user> (binding [x 8] (+ x (foo)))
16 ; the value of x that gets called by foo is modified by the caller
   ; yielding 16 instead of 12

user> (binding [x 8 a 7] (+ x (foo)))
; Evaluation aborted.
Unable to resolve var: a in this context 
```

如果您尝试使用并行绑定，则动态作用域将给出与方案中的 let* 不同的结果

```
user> (def ^:dynamic a 2)
#'user/a
user> (binding [x 8 a 7] (+ x a))
15
user> (binding [x 8 a (+ x 2)] (+ x a))
14 ; this would be 18 if the binding of x to 8 had been used
   ; instead the root value of 4 was used. 
```

一般来说，`let`如果需要，最常见的是顺序绑定或使用嵌套 s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T01:46:27.007

`binding`不会为您提供与并行相同的功能，`let`因为它取决于绑定的存在。如上所述`letfn`，只要您不介意将值包装在函数中，它就会起作用。另一种解决方案是使用宏编写并行 let：

```
(defmacro letp 
  [bindings & exprs]
  (let [bindings (partition 2 bindings)
        vars     (->> bindings (map first) vec)
        values   (->> bindings (map second))]
    `((fn ~vars ~@exprs)
      ~@values))) 
```

所以以下成立：

```
(def a 7)

(letp [a 5 b a] b)
;;=> 7 
```

# java - 在Java中设置背景图像

> ID：11853043
> 
> 赞同：0
> 
> 时间：2012-08-07T19:50:49.243
> 
> 标签：java, swing, background-image, miglayout

好的，我想说的第一件事是：是的，我知道在 java 中设置背景图像有很多类似的问题。然而，我的情况有点不同，因为我接到了一个由其他人启动的 Java 项目。我相信以前的程序员对 Java GUI 编程相当陌生，而我自己对 Java GUI 编程也**很**陌生。以下是该程序必须执行的操作：

*   设置背景图片，这是我们客户的网络地图
*   将带宽映射到通过 url 获取的各个客户端
*   每 5 秒左右刷新一次带宽图

前一个程序员所做的唯一一件事就是设置了 2 个类，一个是主类，一个是从 url 设置他作为猴子的背景图像

现在，我决定使用 MigLayout 来组织一个网格，我将在其中以正确的排列方式放置带宽图像。我遇到了麻烦，所以我决定从小一点开始，将猴子背景更改为网络地图。我将地图 jpg 添加到 src 库中，并认为如果我将 URL 切换到 File 它将起作用。它没有，我一直试图改变它以使其工作，但没有雪茄。

下面是设置背景的代码。这是我第一次尝试发布代码，我希望它可以工作：...好吧，我尝试了几种方法并用谷歌搜索了几次，但发布我的代码不起作用，所以我截屏了。今天没有什么对我有用。![在此处输入图像描述](../Images/8d01ff7bdaa51782d1f579de83ff36ca.png)

我得到的错误是：

```
Exception in thread "main" java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(Unknown Source)
    at bwMonBackground.<init>(bwMonBackground.java:21)
    at bwMonBackgroundMain.main(bwMonBackgroundMain.java:7) 
```

编辑：我取消了第 18 行的注释。这是主要内容：

```
public class bwMonBackgroundMain extends bwMonBackground{
      public static void main( String[] args )
        {
            bwMonBackground frame = new bwMonBackground();
            migLayout testing = new migLayout();
            testing.createLayout();
            frame.setVisible(true);
            frame.setResizable(false);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.pack();

        }
} 
```

编辑 2：一旦我在 bwMonBackground.java 中取消注释第 18 行，我会收到以下错误：

```
javax.imageio.IIOException: Can't read input file!
    at javax.imageio.ImageIO.read(Unknown Source)
    at bwMonBackground.<init>(bwMonBackground.java:15)
    at bwMonBackgroundMain.main(bwMonBackgroundMain.java:7)
Exception in thread "main" java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(Unknown Source)
    at bwMonBackground.<init>(bwMonBackground.java:20)
    at bwMonBackgroundMain.main(bwMonBackgroundMain.java:7) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:07:54.317

基本上，错误是说找不到文件（您正在指定`null`对构造函数的引用`ImageIcon`）。确保它存在于应用程序执行上下文的根位置。

现在，到你的实际问题。

您将需要设置自定义`Component`（例如 a `JPanel`）并覆盖该`paintComponent`方法

看一眼

*   [在 Swing 中执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [Java 2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)

你可能还想看看

*   [Java SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)
*   [Java 摆动计时器](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:57:58.220

我敢打赌你有 IOException 并且你什么都不做，这就是为什么 image 为空。而带图标的 JLabel 并不是真正的背景图像，它的图标，你不能在其中放置元素。所以你需要阅读这个： [java swing background image](https://stackoverflow.com/questions/2227423/java-swing-background-image)

它包含很好的代码示例答案，只需将 URL 更改为有效图像并启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T19:58:43.720

你能显示 bwMonBackgroundMain.java 的来源吗？现在看起来它找不到您要添加到标签的图像文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T20:00:04.630

一个 IOException 被抛出，你看不到是否因为堆栈跟踪被注释掉了。我假设尝试读取文件时抛出了 IO 异常。尝试打印堆栈跟踪，然后从那里解决它。

# html - 为多个 html 页面加载一次 iframe

> ID：11853044
> 
> 赞同：1
> 
> 时间：2012-08-07T19:50:50.537
> 
> 标签：html, iframe

我在我的 Web 应用程序的多个页面中使用相同的 iframe。我想在登录屏幕上加载一次 iframe，然后当带到下一页时，仍然会加载相同的 iframe 而不会刷新。

当定向到下一页时，有什么方法可以保持网页的一部分加载和静态？带有 iframe 的某种静态页脚会很棒。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:53:38.730

在提交表单或使用链接的情况下，您可以`target`在页面上再添加一个 iframe。目标将加载新页面，而保留原始页面。

# regex - 如何使用pagemod排除Firefox插件内容脚本中的网站？

> ID：11853046
> 
> 赞同：2
> 
> 时间：2012-08-07T19:50:54.323
> 
> 标签：regex, firefox-addon, firefox-addon-sdk, userscripts, content-script

我正在开发用户脚本的 Firefox 插件版本。使用 page-mod 库的插件语法非常简单。例如：

```
var data = require("self").data;
var pageMod = require("page-mod");
pageMod.PageMod({
  include: "*.example.com",
  contentScriptWhen: 'end',
  contentScriptFile: data.url("test.user.js")
}); 
```

`test.user.js`这将为匹配的站点运行脚本`*.example.com`。然而，在一个典型的用户脚本中，我还可以指定一个排除行，这样我就可以轻松绕过包含的 url 的子目录。IOW，我想要这样的一行：

```
exclude: "*.example.com/somewhere", 
```

但是[pagemod](https://addons.mozilla.org/en-US/developers/docs/sdk/1.5/packages/addon-kit/docs/page-mod.html)文档没有列出任何这样的选项（它似乎也不存在）。 **在这种情况下，我将如何指定排除项？**

看起来 include 也可以接受从正则表达式构建的[匹配模式。](https://addons.mozilla.org/en-US/developers/docs/sdk/1.5/packages/api-utils/docs/match-pattern.html)但是，我无法想象正则表达式会匹配 *.example.com 但不匹配 *.example.com/subdir（但也匹配 *.example.com/othersubdirs）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T06:30:04.147

您可以在正则表达式中使用负前瞻来实现此目的：

```
include: /^https?:\/\/([^\/]+\.)?example.com\/(?!somewhere).*/ 
```

此正则表达式匹配`http://example.com/`,和 ，`https://example.com/`但不匹配or 。`http://foo.example.com/``http://example.com/subdir``http://example.com/somewhere``http://fooexample.com/`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T20:52:06.943

并不总是可以在`include`选项中使用正则表达式来执行排除规则，并且在可能的情况下，它可能会变得非常复杂。

可能最简单、最可靠的排除方法是将其添加到您的`contentScriptFile`.

像这样的东西（未经测试）：

```
if (/^https?.*badSite\.net.*$/.test (location.href) )
    return; 
```

# c++ - 填充数组

> ID：11853047
> 
> 赞同：1
> 
> 时间：2012-08-07T19:51:01.233
> 
> 标签：c++, arrays, random

你能帮我解决一个用随机数填充 5 个圆的数组的问题吗？随机数将是圆的半径。这是我的代码：

```
#include <iostream>
#include <time.h>
using namespace std;

int main()
{
    // Array 2, below section is to populate the array with random radius
    float CircleArrayTwo [5]; // store the numbers
    const int NUM = 5; // Display 5 random numbers

    srand(time(NULL)); // seed the generator

    for(int i = 0; i < NUM; ++i)
    {
        CircleArrayTwo[i] = rand()%10;
    }

    cout << "Below is the radius each of the five circles in the second array. " <<   endl;
    cout << CircleArrayTwo << endl;

    system("PAUSE");
    return 0;
} 
```

目前输出如下：

下面是第二个数组中五个圆的半径。002CF878

我哪里错了？

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T19:52:40.973

您正在打印数组第一个元素的地址。您可以遍历数组并打印每个元素：

```
for(int i = 0; i < NUM; ++i)
{
    std::cout << CircleArrayTwo[i] << ", ";
}
std::cout << "\n"; 
```

或者，如果您有 C++11 支持，

```
for (auto& x : CircleArrayTwo) {
   std::cout << x << ", ";
}    
std::cout << "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:54:40.510

您填充数组的方式是正确的，但是您不能打印这样的数组。您需要编写一个循环来逐个输出值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T19:55:54.563

在 C（和 C++）中，数组几乎等同于指向内存位置开头的指针。所以你只是输出第一个元素的地址；要输出所有元素，请引入另一个循环：

```
for(int i = 0; i < NUM; ++i) 
{
    cout << CircleArrayTwo[i] << endl;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-07T19:58:13.217

`CircleArrayTwo`是一个指针。当您打印一个指针时，它会打印一个内存地址，就像您提供的那样。为了打印数组的值，您需要使用`[]`插入的符号。

您可以遍历数组中的值并打印每个值：
`for (int i = 0; i < NUM; ++i) { cout << CircleArrayTwo[i] << endl; }`

# crystal-reports - Crystal Reports 不允许对公式进行汇总

> ID：11853050
> 
> 赞同：0
> 
> 时间：2012-08-07T19:51:09.983
> 
> 标签：crystal-reports, formula, summary

我见过几个例子说你可以创建一个运行总计，但这对我也不起作用。这是我从 Oracle 获得的数据：

```
Select 19000 as sales, 'Ted' as teammember from dual
union select 150000, 'Bob' from dual
union select 80000, 'Sally' from dual  
union select 8000, 'Sally' from dual 
```

我的佣金公式：

```
If sum({Command.SALES}, {Command.TEAMMEMBER}) *.2 < 20000
then sum({Command.SALES}, {Command.TEAMMEMBER}) *.2
else 20000 
```

我的 sumval 公式：

```
whileprintingrecords;
global numbervar sumval;
sumval :=sumval + {@Commission}; 
```

我把`teammember`和`sales`放在细节部分。我把`Commission`和`sumval`放在组页脚。我想在报告页脚中`total sales`。`total commission`

它不会让我创建一个摘要，所以我把`commission`和`sumval`放在一起。值 41,400 是正确的。页脚中存在的佣金不影响 的值`sumval`。

我的报告是这样的：

```
Bob     150,000   20,000   20,000
Sally     8,000
sally    80,000 
         88,000  17,600    37,600
ted      19,000   3,800    41,400
total   257,000   3,800    45,200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:23:46.570

您可以创建另一个新公式，我们称之为`SumvalTotal`，然后执行以下操作：

```
whileprintingrecords;
global numbervar sumval;
sumval; 
```

并将其放在您的报告页脚中。您可以将它用于您的列`Comission`和`Sumval`列，因为它们应该是相同的。

这应该让你：

```
Bob     150,000  20,000    20,000
Sally     8,000
sally    80,000 
         88,000  17,600    37,600
ted      19,000   3,800    41,400

total   257,000  41,400    41,400 
```

# hibernate - Hibernate 4：如何解决“需要使用 AnnotationConfiguration 实例 我正在使用 Hibernate 4.1.5.SP1，但在配置会话工厂以与基于注释的类一起使用时遇到问题。我尝试配置它 final Configuration hibConfiguration = new Configuration().configure(); 问问题 问问题 2012-08-07T19:51:17.550 5630 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在使用 Hibernate 4.1.5.SP1，但在配置会话工厂以与基于注释的类一起使用时遇到问题。我尝试配置它 final Configuration hibConfiguration = new Configuration().configure(); final ServiceRegistry serviceRegistry = new ServiceRegistryBuilder() .applySettings(hibConfiguration.getProperties()) .buildServiceRegistry(); return hibConfiguration.buildSessionFactory(serviceRegistry); 但我得到了这个异常（“AnnotationConfiguration 实例需要使用 org.quartz.SchedulerException: Job threw an unhandled exception. [See nested exception: javax.ejb.EJBTransactionRolledbackException: An AnnotationConfiguration instance is required to use <mapping class="com.mainco.fdr.myproject.model.UserRole">] at org.quartz.core.JobRunShell.run(JobRunShell.java:214) at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520) * Nested Exception (Underlying Cause) --------------- javax.ejb.EJBTransactionRolledbackException：在 org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:130) 的 org.jboss.ejb3.tx.Ejb3TxPolicy.handleInCallerTx(Ejb3TxPolicy.java:87) 需要使用 AnnotationConfiguration 实例) 在 org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.ejb3.stateless 的 org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:195)。 StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:62) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) at org.jboss.ejb3.mdb.MessagingContainer.localInvoke(MessagingContainer.java:249) at org .jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.delivery(MessageInflowLocalProxy.java:268) 在 org.jboss.ejb3.mdb。inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:138) at $Proxy128.execute(Unknown Source) at org.jboss.resource.adapter.quartz.inflow.QuartzJob.execute(QuartzJob.java:57) at org.quartz.core .JobRunShell.run(JobRunShell.java:203) at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520) 原因：org.hibernate.MappingException：在 org.hibernate 需要使用 AnnotationConfiguration 实例.cfg.Configuration.parseMappingElement(Configuration.java:1600) 在 org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1555) 在 org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1534) 在 org. hibernate.cfg.Configuration.doConfigure(Configuration.java:1508) 在 org.hibernate.cfg.Configuration。configure(Configuration.java:1428) at org.hibernate.cfg.Configuration.configure(Configuration.java:1414) at org.subco.myco.dido.service.AbstractServiceProvider.getSessionFactory(AbstractServiceProvider.java:64) at org.subco .myco.dido.service.AbstractServiceProvider.initServices(AbstractServiceProvider.java:127) 在 org.subco.myco.dido.quartz.ProcessOrdersJob.execute(ProcessOrdersJob.java:79) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org. jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:112) 在 org.jboss.ejb3。org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 的interceptor.InvocationContextImpl.proceed(InvocationContextImpl.java:166)在 org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54) 在 org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor .java:47) 在 org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126) ... 11 更多166) 在 org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor 的 org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63) .invoke(TransactionScopedEntityManagerInterceptor.java:54) 在 org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47) 在 org.jboss。 aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126) ... 11 更多166) 在 org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor 的 org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63) .invoke(TransactionScopedEntityManagerInterceptor.java:54) 在 org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47) 在 org.jboss。 aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126) ... 11 更多MethodInvocation.invokeNext(MethodInvocation.java:101) at org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) at org .jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java :126) ... 11 更多MethodInvocation.invokeNext(MethodInvocation.java:101) at org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) at org .jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java :126) ... 11 更多ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126) ... 11 更多ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126) ... 11 更多 这是我的 Maven 依赖项 <dependency><groupid>org.hibernate</groupid> <artifactid>hibernate-validator</artifactid> <version>4.3.0.Final</version></dependency> <dependency><groupid>org.hibernate</groupid> <artifactid>hibernate-entitymanager</artifactid> <version>${hibernate.version}</version> <exclusions><exclusion><groupid>org.jboss.spec.javax.transaction</groupid> <artifactid>jboss-transaction-api_1.1_spec</artifactid></exclusion> <exclusion><groupid>org.jboss.logging</groupid> <artifactid>jboss-logging</artifactid></exclusion></exclusions></dependency> 这是我的 hibernate.cfg.xml 文件……<hibernate-configuration><session-factory><property name="connection.datasource">MySqlDS</property> <property name="hibernate.connection.pool_size">10</property> <property name="show_sql">true</property> <property name="dialect">org.hibernate.dialect.MySQLDialect</property> <property name="current_session_context_class">thread</property> <mapping class="com.mainco.fdr.myproject.model.UserRole"><mapping class="com.mainco.fdr.myproject.model.Organization"><mapping class="com.mainco.fdr.myproject.model.Product"><mapping class="com.mainco.fdr.myproject.model.State"><mapping class="com.mainco.fdr.myproject.model.Country"><mapping class="com.mainco.fdr.myproject.model.AccessCode"><mapping class="com.mainco.fdr.myproject.model.Contract"><mapping class="com.mainco.fdr.myproject.model.TrainingLink"></mapping></mapping></mapping></mapping></mapping></mapping></mapping></mapping></session-factory></hibernate-configuration>我将我的应用程序作为 JAR 文件回复到 JBoss 4.2.2.GA 服务器（无法控制 JBoss 版本）。我应该包含哪些正确的依赖项以及配置会话工厂的正确方法是什么，以便我可以读取基于注释的类，如下面的……@Entity @Table(name = "lyc_user_role") public class UserRole { @Id @Column(name = "USER_ROLE_ID") private String roleId; 看起来您可能需要用引号将用户代理包装起来。在设置标题时试试这个，看看是否能解决问题。 $headers = array( 'X-PHX' => 'true', 'X-Requested-With' => 'XMLHttpRequest', 'Referer' => 'https://domain.com/index.html', 'User-Agent' => "'".self::getRandomUserAgent()."'" ); $this->setHeaders($headers); hibernateconfiguration 4 1 回答 1 This answer is useful 0 看起来您实际上并没有使用您认为正在使用的 Hibernate 版本 4.1.5.SP1。事实上，当我们将注释（及其处理）合并到 hibernate-core 模块中时，异常消息在 3.6 中完全从 Hibernate 中删除。可能您需要查看 JBoss lib 目录，您会发现导致问题的较旧的 Hibernate jar。我不记得一路回到 JBoss 4 才能告诉你在哪里看。 于 2012-08-07T22:28:53.797 回答 Related 2 apache - 如果我删除 apache 日志文件会怎样？ 3 c# - Firefox 浏览器中的 jQuery AJAX beforeSend 失败 2 asp.net - 路由在 Server 2008 R2 上不起作用 1 asp.net - 根据汇率动态改变物品的价格 2 php - 如何使我的 php 项目像 .exe 文件一样可分发 2 django - 管理员中的 GenericForeignKey 1 javascript - 将字符串转换为变量名。(JavaScript) 1 c# - 在 Gridview 中选择所有复选框需要很长时间 12 php - 将“var_dump”发送到 FireBug 控制台 1 jsp - HTTP Status 500 - java.lang.NumberFormatException: null Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</mapping>

> ID：11853053
> 
> 赞同：0
> 
> 时间：
> 
> 标签：hibernate, configuration

我正在使用 Hibernate 4.1.5.SP1，但在配置会话工厂以与基于注释的类一起使用时遇到问题。我尝试配置它

```
 final Configuration hibConfiguration = new Configuration().configure();       

    final ServiceRegistry serviceRegistry = new ServiceRegistryBuilder()
        .applySettings(hibConfiguration.getProperties())
        .buildServiceRegistry();

    return hibConfiguration.buildSessionFactory(serviceRegistry); 
```

但我得到了这个异常（“AnnotationConfiguration 实例需要使用

```
org.quartz.SchedulerException: Job threw an unhandled exception. [See nested exception: javax.ejb.EJBTransactionRolledbackException: An AnnotationConfiguration instance is required to use <mapping class="com.mainco.fdr.myproject.model.UserRole"/>]
    at org.quartz.core.JobRunShell.run(JobRunShell.java:214)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520)
* Nested Exception (Underlying Cause) --------------- 
```

javax.ejb.EJBTransactionRolledbackException：在 org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:130) 的 org.jboss.ejb3.tx.Ejb3TxPolicy.handleInCallerTx(Ejb3TxPolicy.java:87) 需要使用 AnnotationConfiguration 实例) 在 org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.ejb3.stateless 的 org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:195)。 StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:62) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) at org.jboss.ejb3.mdb.MessagingContainer.localInvoke(MessagingContainer.java:249) at org .jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.delivery(MessageInflowLocalProxy.java:268) 在 org.jboss.ejb3.mdb。inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:138) at $Proxy128.execute(Unknown Source) at org.jboss.resource.adapter.quartz.inflow.QuartzJob.execute(QuartzJob.java:57) at org.quartz.core .JobRunShell.run(JobRunShell.java:203) at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520) 原因：org.hibernate.MappingException：在 org.hibernate 需要使用 AnnotationConfiguration 实例.cfg.Configuration.parseMappingElement(Configuration.java:1600) 在 org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1555) 在 org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1534) 在 org. hibernate.cfg.Configuration.doConfigure(Configuration.java:1508) 在 org.hibernate.cfg.Configuration。configure(Configuration.java:1428) at org.hibernate.cfg.Configuration.configure(Configuration.java:1414) at org.subco.myco.dido.service.AbstractServiceProvider.getSessionFactory(AbstractServiceProvider.java:64) at org.subco .myco.dido.service.AbstractServiceProvider.initServices(AbstractServiceProvider.java:127) 在 org.subco.myco.dido.quartz.ProcessOrdersJob.execute(ProcessOrdersJob.java:79) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org. jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:112) 在 org.jboss.ejb3。org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 的interceptor.InvocationContextImpl.proceed(InvocationContextImpl.java:166)在 org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54) 在 org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor .java:47) 在 org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126) ... 11 更多166) 在 org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor 的 org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63) .invoke(TransactionScopedEntityManagerInterceptor.java:54) 在 org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47) 在 org.jboss。 aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126) ... 11 更多166) 在 org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor 的 org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63) .invoke(TransactionScopedEntityManagerInterceptor.java:54) 在 org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47) 在 org.jboss。 aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) 在 org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126) ... 11 更多MethodInvocation.invokeNext(MethodInvocation.java:101) at org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) at org .jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java :126) ... 11 更多MethodInvocation.invokeNext(MethodInvocation.java:101) at org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) at org .jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java :126) ... 11 更多ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126) ... 11 更多ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47) at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101) at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126) ... 11 更多

这是我的 Maven 依赖项

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.3.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${hibernate.version}</version>
        <exclusions>
            <exclusion>
                <groupId>org.jboss.spec.javax.transaction</groupId>
                <artifactId>jboss-transaction-api_1.1_spec</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.jboss.logging</groupId>
                <artifactId>jboss-logging</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

这是我的 hibernate.cfg.xml 文件……</p>

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <property name="connection.datasource">MySqlDS</property>
        <property name="hibernate.connection.pool_size">10</property>
        <property name="show_sql">true</property>
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>

        <!-- Enable Hibernate's automatic session context management -->
            <property name="current_session_context_class">thread</property>

        <mapping class="com.mainco.fdr.myproject.model.UserRole" />
        <mapping class="com.mainco.fdr.myproject.model.Organization" />
        <mapping class="com.mainco.fdr.myproject.model.Product" />
        <mapping class="com.mainco.fdr.myproject.model.State" />
        <mapping class="com.mainco.fdr.myproject.model.Country" />
        <mapping class="com.mainco.fdr.myproject.model.AccessCode" />
        <mapping class="com.mainco.fdr.myproject.model.Contract" />
        <mapping class="com.mainco.fdr.myproject.model.TrainingLink" /> 
    </session-factory>
</hibernate-configuration> 
```

我将我的应用程序作为 JAR 文件回复到 JBoss 4.2.2.GA 服务器（无法控制 JBoss 版本）。我应该包含哪些正确的依赖项以及配置会话工厂的正确方法是什么，以便我可以读取基于注释的类，如下面的……</p>

```
@Entity
@Table(name = "lyc_user_role")
public class UserRole {

    @Id
    @Column(name = "USER_ROLE_ID")
    private String roleId; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:28:53.797

看起来您实际上并没有使用您认为正在使用的 Hibernate 版本 4.1.5.SP1。事实上，当我们将注释（及其处理）合并到 hibernate-core 模块中时，异常消息在 3.6 中完全从 Hibernate 中删除。可能您需要查看 JBoss lib 目录，您会发现导致问题的较旧的 Hibernate jar。我不记得一路回到 JBoss 4 才能告诉你在哪里看。

# sql-server - 在 SQL Server 中生成 **bare** CREATE TABLE 和 CREATE PROC statemnts

> ID：11853054
> 
> 赞同：2
> 
> 时间：2012-08-07T19:51:22.840
> 
> 标签：sql-server, database, tsql, sql-server-2008-r2, sql-server-2008

我公司的部署过程要求用于创建过程和表等的 SQL 脚本是裸露的。

在 SQL Server Management Studio 中生成创建脚本给您带来的不仅仅是一个裸脚本，这在这种情况下是不幸的。例如，对于一个测试表，这是 SSMS 为我生成的：

```
USE [DemoDB]
GO

/****** Object:  Table [dbo].[example]    Script Date: 08/07/2012 15:46:32 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[example](
    [fake_row] [int] NULL
) ON [PRIMARY]

GO 
```

**所以，我想知道的是：**

我可以在 SSMS 中以某种方式在 SQL Server 上运行一个查询，它会给我一个实际上只是以下内容的脚本吗？

```
create table example (
    fake_row int
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:42:40.807

您可以使用 information_schema (Aaron ... 我知道，INFORMATION_SCHEMA ;) 创建自己的“创建表”语句。

我为此编写了一些代码，但它不使用 INFORMATION_SCHEMA。我知道，如果使用可能计划删除的旧系统表。它还添加了一些附加信息（您可以将其删除，因为您不需要它）。只需将表列表放在@INCLUSIONLIST 中，然后在表所在的数据库中运行它。

```
SET @INCLUSIONLIST = '|table1|table2|';

SELECT (CASE WHEN rownum = 1 THEN 'CREATE TABLE ['+a.t_name+'] ('
             WHEN c.column_id IS NOT NULL
             THEN '    ['+c.c_name+'] ' +
                  (CASE WHEN CHARINDEX('CHAR', datatype) > 0 THEN datatype+'('+(case when length < 0 then 'max' else cast(length as varchar) end)+')'
                        WHEN CHARINDEX('BINARY', datatype) > 0 THEN datatype+'('+cast(length as varchar)+')'
                        WHEN datatype = 'float' AND precision <> 24 THEN datatype+'('+cast(precision as varchar)+')'
                        WHEN datatype IN ('numeric', 'decimal') AND scale = 0 THEN datatype+'('+cast(precision as varchar)+')'
                        WHEN datatype IN ('numeric', 'decimal') AND scale > 0 THEN datatype+'('+cast(precision as varchar)+','+cast(scale as varchar)+')'
                        ELSE datatype END)+' '+
                  (CASE WHEN c.identity_seed IS NOT NULL
                        THEN 'IDENTITY(' + CAST(identity_seed AS VARCHAR) + ',' + CAST(identity_increment AS VARCHAR) + ') '
                        ELSE '' END) +
                  (CASE WHEN c.is_nullable = 0 THEN 'NOT NULL ' ELSE '' END) +
                  (CASE WHEN c.default_definition IS NOT NULL
                        THEN 'DEFAULT '+default_definition ELSE '' END) +
                  (CASE WHEN max_column_id = column_id AND pk.pk_name IS NULL THEN '' ELSE ',' END)
            WHEN rownum = max_column_id + 2 and pk.pk_name IS NOT NULL
            THEN '    PRIMARY KEY ('+pk.pk_columns+')'
            WHEN rownum = max_column_id + 3 THEN ')  /* CREATE TABLE '+a.t_name+' */'
            WHEN rownum = max_column_id + 4 THEN 'GO'
            WHEN rownum = max_column_id + 5 THEN ''
        END)
 FROM (SELECT t.t_name, rownum, max_column_id
       FROM (SELECT t.name as t_name, MAX(c.column_id) as max_column_id
             FROM sys.columns c join
                  (SELECT * FROM sys.tables WHERE CHARINDEX('|'+name+'|', @INCLUSIONLIST) > 0 ) t 
                  ON c.object_id = t.object_id
             GROUP BY t.name) t join
            (SELECT ROW_NUMBER() OVER (ORDER BY object_id) as rownum FROM sys.columns c) ctr
            ON ctr.rownum <= t.max_column_id + 5
      ) a LEFT OUTER JOIN
      (SELECT t.name as t_name, c.column_id, c.name AS c_name, u.name as datatype,
              ISNULL(baset.name, N'') AS systemtype,
              CAST(CASE WHEN baset.name IN (N'nchar', N'nvarchar') AND c.max_length <> -1
                        THEN c.max_length/2 ELSE c.max_length END AS INT) AS length,
              c.precision AS precision,
              c.scale as scale,
              c.is_nullable,
              dc.definition as default_definition,
              idc.seed_value as identity_seed, idc.increment_value as identity_increment
       FROM sys.tables t JOIN
            sys.all_columns AS c
            ON c.object_id = t.object_id LEFT OUTER JOIN
            sys.types u
            ON u.user_type_id = c.user_type_id LEFT OUTER JOIN
            sys.types baset
            ON baset.user_type_id = c.system_type_id AND 
               baset.user_type_id = baset.system_type_id LEFT OUTER JOIN
            sys.default_constraints dc
            ON c.object_id = dc.parent_object_id AND
               c.column_id = dc.parent_column_id LEFT OUTER JOIN
            sys.identity_columns idc
            ON c.object_id = idc.object_id AND
               c.column_id = idc.column_id
      ) c
      ON a.t_name = c.t_name AND
         c.column_id + 1 = a.rownum LEFT OUTER JOIN
      (SELECT t.name as t_name, kc.name as pk_name, 
              (MAX(CASE WHEN index_column_id = 1 THEN '['+c.name+']' ELSE '' END) +
               MAX(CASE WHEN index_column_id = 2 THEN ','+'['+c.name+']' ELSE '' END) +
               MAX(CASE WHEN index_column_id = 3 THEN ','+'['+c.name+']' ELSE '' END) +
               MAX(CASE WHEN index_column_id = 4 THEN ','+'['+c.name+']' ELSE '' END) +
               MAX(CASE WHEN index_column_id = 5 THEN ','+'['+c.name+']' ELSE '' END) +
               MAX(CASE WHEN index_column_id = 6 THEN ','+'['+c.name+']' ELSE '' END) +
               MAX(CASE WHEN index_column_id = 7 THEN ','+'['+c.name+']' ELSE '' END) +
               MAX(CASE WHEN index_column_id = 8 THEN ','+'['+c.name+']' ELSE '' END) +
               MAX(CASE WHEN index_column_id = 9 THEN ','+'['+c.name+']' ELSE '' END) +
               MAX(CASE WHEN index_column_id = 10 THEN ','+'['+c.name+']' ELSE '' END)
              ) as pk_columns
       FROM sys.indexes i JOIN
            sys.key_constraints kc
            ON i.name = kc.name AND
               kc.type = 'PK' JOIN
            sys.tables t
            ON i.object_id = t.object_id JOIN
            sys.index_columns ic
            ON i.object_id = ic.object_id AND
           i.index_id = ic.index_id JOIN
            sys.columns c
            ON ic.index_column_id = c.column_id AND
               ic.object_id = c.object_id
       GROUP BY t.name, kc.name
      ) pk
      ON pk.t_name = a.t_name 
ORDER BY a.t_name, rownum 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T21:00:29.560

为自我回答道歉，将其他好的答案标记为 +1。

**事实证明，您可以通过 SSMS 中的实用程序获得几乎所有的方法。**

1.  右键单击对象资源管理器中的数据库
2.  点击“任务”
3.  点击“生成脚本”
4.  选择“脚本特定对象”并选择表格或其他任何内容
5.  选择“保存到文件”和“每个对象单个文件”（或只是假脱机到查询窗口）
6.  单击“高级”，您可以启用/禁用您生成的语句的几乎每个部分的生成，包括约束、使用语句等。
7.  如果需要进一步移除（例如移除 GO），它是最小的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T02:53:07.267

或者，您可以控制 SSMS 的一般脚本行为，如下所示：[脚本 SQL Server 数据库对象的选项](http://www.mssqltips.com/sqlservertip/1503/options-for-scripting-sql-server-database-objects/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T20:35:45.137

我将创建从 INFORMATION_SCHEMA 视图读取的存储过程。获取存储的过程文本只是：

```
 DECLARE @SQL VARCHAR(8000)
    SET @SQL=' '

    select  @SQL = @SQL + ROUTINE_DEFINITION
    from INFORMATION_SCHEMA.ROUTINES
    where ROUTINE_TYPE='PROCEDURE'
    AND SPECIFIC_NAME = 'updateComments'

    PRINT @SQL 
```

为表格编写脚本的脚本如下所示：

```
DECLARE @tableName VARCHAR(50)
SET @tableName = 'Location' 

-- Need to know how many columns 
DECLARE @NumColumns int
SELECT @NumColumns = MAX(ORDINAL_POSITION)
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = @tableName

DECLARE @SQL VARCHAR(8000)
SET @SQL=' '

DECLARE @Results TABLE 
(LineNumber int, 
Line VARCHAR(1000))

INSERT INTO @Results
    SELECT 0 AS ORDINAL_POSITION, 
    'CREATE TABLE '+TABLE_SCHEMA+'.'+@tableName+' (' AS Line
    FROM INFORMATION_SCHEMA.TABLES
    WHERE TABLE_NAME = @tableName

    UNION ALL

    SELECT ORDINAL_POSITION, 
    '['+COLUMN_NAME+'] '+ DATA_TYPE + 
    CASE WHEN DATA_TYPE = 'varchar' OR DATA_TYPE = 'char' 
    THEN '('+ CAST(CHARACTER_MAXIMUM_LENGTH AS VARCHAR) +')'
    ELSE '' END +
    CASE WHEN IS_NULLABLE = 'NO' 
    THEN ' NULL '
    ELSE ' NOT NULL' END +
    CASE WHEN ORDINAL_POSITION < @NumColumns 
    THEN ', '
    ELSE ' ' END
    AS LINE
    FROM INFORMATION_SCHEMA.COLUMNS
    WHERE TABLE_NAME = @tableName

    UNION ALL

    SELECT 999, ' )'

SELECT Line
FROM @Results
ORDER BY LineNumber

SELECT @SQL = @SQL + Line
FROM @Results
ORDER BY LineNumber

SELECT @SQL
PRINT @SQL 
```

这将创建您想要的简单表格脚本，但它并不完整 - 不执行数字精度、主键等。但这足以让您入门。

我只是将其中的每一个都放入一个以对象名称作为参数的存储过程中。

# c - 用索引替换

> ID：11853057
> 
> 赞同：0
> 
> 时间：2012-08-07T19:51:47.940
> 
> 标签：c, replace

我想用索引替换字符串。`x`和之间的字符串`y`。如果要替换长度的字符串是 lees than `y`，则指针必须按差值递增。例如，

给定字符串`([10 20]...[10 20]..[30 80])`；`x = 1`(index of `[`) 和`y = 7`(index of `]`)，并且字符串替换为`50`，它必须替换为`(50...[10 20]..[30 80])`。

我试过了：

```
void replaceindex(char *s, char *replace, unsigned int start, unsigned int end)
{
  assert(start < end);

  char *p = s, *q = s, *r = replace;
  register unsigned int i =  0;
  int found = 0;

  while(*q) {

    if(found == 0 && i == start) {

      found = 1;

      for(; *r; ++r, ++start, ++q)
    *p ++ = *r;

      while(++start < end)
    q++;
    }

    *p ++ = *q ++;   
    i ++;
  }

} 
```

使用：

```
 char str[] = "([10 20]...[10 20]..[30 80])";
  printf("Before: %s\n", str);
  replaceindex(str, "50", 1, 7);
  printf("After: %s\n", str); 
```

输出是：

```
Before: ([10 20]...[10 20]..[30 80])
After: (500]...[10 20]..[30 80])0]) 
```

但我期待这个：

```
Before: ([10 20]...[10 20]..[30 80])
After: (50...[10 20]..[30 80]) 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T22:03:30.017

基于[Anon ymous 的想法](https://stackoverflow.com/a/11853217/1468366)，但避免创建新字符串：

```
void replaceindex(char *s, char *replace, unsigned int start, unsigned int end)
{
  unsigned rl, sl;
  rl = strlen(replace);
  sl = strlen(s);
  ++end; /* change inclusive index to exclusive one */
  assert(start <= end);
  assert(rl <= end - start);
  memcpy(s + start, replace, rl);
  memmove(s + start + rl, s + end, sl - end + 1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:02:15.027

```
#include <stdio.h>
#include <string.h>
 char* replaceindex(char *s, char *replace, unsigned int start, unsigned int end)
 {

   char *rep= (char*)malloc(strlen(s)+1);
   memset(rep,0,strlen(s)+1);
   if(strlen(replace)<=(end-start))
     { memcpy(rep,s,start);
      memcpy(rep+start,replace,strlen(replace));
      memcpy(rep+start+strlen(replace),s+end,strlen(s+end));
      return rep;
    }
    else{free(rep);}
    return s;

 }

int main() {
char* z="This answer is crazy";
printf("%s",replaceindex(z,"Code",5,11));

return 0;
} 
```

输出是

> ```
> This Code is crazy 
> ```

编辑：

> 没有记忆：-

```
 #include <stdio.h>
#include <string.h>
void replaceindex(char *s, char *replace, unsigned int start, unsigned int end)
{
  if(strlen(replace)<=(end-start))
  {
  char* iter=  s+start+strlen(replace),*cursor=s+end;
  memcpy(s+start,replace,strlen(replace));
  while(*iter)
   *iter++=*cursor++;
  }
}

int main() 
{
char z[]="This answer is crazy";
replaceindex(z,"Code",5,11);
return printf("%s",z);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T21:57:18.090

您需要两个修复：

```
 for(; *r; ++r, ++start, ++q)
     *p ++ = *r;

-      while(++start < end)
+      while(start++ <= end)
     q++;
     }

     *p ++ = *q ++;
     i ++;
   }
+  *p = '\0';

 } 
```

第一个是因为你的结束索引是包容性的（从调用来看），你想先比较然后增加。第二个是终止新字符串。

请注意，如果`strlen(replace) > end - start + 1`.

# c# - 用于启动具有特定大小和位置的 Internet Explorer 的 .NET API？

> ID：11853061
> 
> 赞同：0
> 
> 时间：2012-08-07T19:51:57.820
> 
> 标签：c#, html, wpf, internet-explorer

我想从我的在线 html 应用程序中创建一个具有 Windows 桌面外观的应用程序（Windows 7 和 8）。我曾尝试在 WPF 窗口中嵌入浏览器控件，但后来注意到它是在 WPF 中运行的旧版本 (IE7) IE。我不确定 IE9 或 IE10 是否可以嵌入到 WPF 应用程序中，但我想不会。我需要最新版本的 IE。

我已经查看了 IE 的命令行开关，但除了“kiosk 模式”之外，这似乎对 Windows 的视觉呈现没有太大影响。我想要的是至少设置大小和位置，关闭所有栏（可能除了地址栏）。

我也查看了 HTA 应用程序，但我无法让它在同一个窗口中打开外部 url。它不断打开一个新的普通 IE 窗口。

还有其他我没有尝试过的选择吗？也许我可以为此使用一些.NET API？我已经搜索过，但发现关于任何 API 的信息很少（只有 Process.Start 还不够）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:58:12.457

您可能正在寻找称为[Kiosk Mode](https://stackoverflow.com/questions/6279792/web-browsers-into-kiosk-mode)的内容，它隐藏了浏览器 UI，只为您提供全屏页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:21:27.377

听起来您需要将事情分开：您需要将自己从*用户*界面的工作方式中分离出来。您可能需要重新设计应用程序的某些部分，但最终您将使用两个不同的 UI，在*这样*的分支结构中更接近您的目标（下面是糟糕的 ASCII 艺术模式）：

```
    （应用核心）
          | |
Web UI ---+ +--- WPF UI

```

不同的 UI 具有不同的功能，您可能会发现利用每一个都可以带来好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:17:50.683

我现在自己解决了这个问题：

事实证明，WPF 中的 WebControl 毕竟支持 IE9。这仅取决于我正在加载的内容。源 html 必须具有正确的格式才能使用 IE9 加载（与 IE7 似乎是默认的相反）。

[在这里](http://social.msdn.microsoft.com/Forums/eu/wpf/thread/87e41b0d-145d-4438-958e-c8b3a0a969d3)找到它。

# php - 为什么 PHP 文件不用于（自定义）CSS 和 JS？

> ID：11853063
> 
> 赞同：15
> 
> 时间：2012-08-07T19:52:02.000
> 
> 标签：php, javascript, css

**为什么人们不** `.php` **为他们的** `CSS` **和文件制作** `JavaScript` **文件？**

添加`<?php header("Content-type: text/javascript; charset: UTF-8"); ?>`到文件中使其可以被浏览器读取，您可以通过将`Content-type`属性设置为 .css 文件来执行相同的操作`text/css`。

它允许您将 PHP 的所有变量和方法用于其他语言。例如，让您根据 css 中的用户偏好更改主题主颜色，或预加载您的 javascript 可以在文档加载时使用的数据。

使用这种技术有不好的方面吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-07T20:15:46.860

人们这样做的频率比你想象的要多。您只是看不到它，因为通常这种技术与 URL 重写结合使用，这意味着浏览器无法区分静态提供的 .css 文件和由 PHP 脚本生成的动态样式表。

但是，有一些强有力的理由*不*这样做：

*   在默认配置中，Apache 将 PHP 脚本输出视为“随时可能更改”，并设置适当的标头以防止缓存（否则，动态内容将无法正常工作）。然而，这意味着浏览器不会缓存您的 CSS 和 javascript，这很糟糕——它们会在*每次页面加载时通过网络重新加载*。如果你每秒有几百个页面加载，这些东西绝对很重要，即使你不这样做，页面的响应性也会受到很大影响。
*   CSS 和 Javascript，一旦部署，就很少更改，并且使其动态化的理由非常少见。
*   运行 PHP 脚本（即使只是为了启动解释器）比只提供静态文件更昂贵，因此除非绝对必要，否则应避免使用它。
*   确保您输出的 Javascript 正确且安全是非常困难的。转义 Javascript 的动态值并不像您想象的那么简单，如果这些值是用户提供的，那么您就是在自找麻烦。

还有一些更容易设置的替代方案：

*   编写一些样式表并动态选择正确的样式表。
*   根据类名制定样式表规则，并在 HTML 中动态设置这些规则。
*   对于 javascript，在包含静态脚本之前，在父文档中定义动态部分。最典型的场景是在文档中设置一些全局变量并在静态脚本中引用它们。
*   作为构建/部署过程的一部分，将动态脚本编译成静态文件。这样，您可以在 CSS 中使用 PHP，但您仍然可以提供静态文件。

如果你想使用 PHP 来动态生成 CSS：

*   覆盖缓存标头以允许浏览器和代理缓存它们。您甚至可以将缓存过期设置为“从不”，并添加一个伪造的查询字符串参数（例如`<link rel="stylesheet" type="text/css" href="http://example.com/stylesheet.css?dummy=121748283923">`）并在脚本更改时更改它：浏览器会将其解释为不同的 URL 并跳过缓存的版本。
*   设置 URL 重写，以便脚本的 URL 具有 .css 扩展名：某些浏览器 (IE) 在扩展名不匹配的某些情况下会因错误地获取 MIME 类型而臭名昭著，尽管`Content-Type`标题正确。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-07T19:54:53.390

有些人会这样做，更好的做法是在 PHP 中生成 JS/CSS 脚本并将它们缓存到文件中。

如果您使用 PHP 提供所有 CSS/JS 文件，那么您必须调用更多 PHP，这会产生更多开销（cpu 和内存），这在提供静态文件时是不必要的。最好让 Web 服务器（Apache/nginx/lighttpd/iis 等）完成它们的工作并为您提供这些文件，而无需 PHP。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-07T19:54:31.590

运行 PHP 引擎在时间或 CPU 方面的成本都不是零。由于 CSS 和 JavaScript 文件通常很少更改，让它们在引擎中运行以完全不做任何事情是没有意义的；最好让浏览器在适当的时候缓存它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T22:30:35.637

这是我使用过的一种方法： HTML 页面包含对`/path/12345.stylesheet.css`. 该文件不存在。因此`.htaccess`将请求路由到`/path/index.php`. 该文件 (a) 执行数据库请求，(b) 创建 CSS，(c)**保存文件以备下次使用**，(d) 将 CSS 提供给浏览器。这意味着下一次请求 时`/path/12345.stylesheet.css`，实际上有一个物理静态文件由 Apache 照常提供。

哦，每当编辑样式规则时（a）删除静态文件，以及（b）更改引用 ID，以便 HTML 页面将来包含对 的引用`/path/10995.stylesheet.css`或其他任何内容。（实际上，我使用的是 UNIX 时间戳。）

我使用类似的方法来创建图像缩略图：在第一次请求时创建文件，并将静态文件保存在同一位置以供将来请求。我从来没有机会为 javascript 做同样的事情，但没有根本原因。

这也意味着我不需要担心在 PHP 中缓存标头：只有每个 CSS 文件（或图像缩略图）的*第一次*调用通过 PHP，如果使用反缓存标头提供服务，那不是什么大问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T19:54:43.920

有时您可能必须动态创建 javascript 或样式。

问题是网络服务器经过优化以提供静态内容。使用 php 动态生成内容可能会对性能产生巨大影响，因为它需要在每个请求上生成。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-07T20:17:23.577

这不是一个坏主意，或者所有不常见的，但也有缺点。缓存是一个重要的考虑因素——您需要让浏览器在内容相同时缓存，但在内容不同时刷新（例如，当其他人登录时）。任何查询字符串都会立即停止某些浏览器缓存，因此您需要一些重写规则以及 HTTP 标头。

任何需要花费大量时间或需要锁定某些东西（例如 session_start）的处理都会在浏览器等待资产时阻止浏览器。

最后，也是非常重要的一点，混合语言会使编辑代码变得更加困难——语法高亮和结构浏览器可能无法应对，重叠的语法会导致丑陋的事情，比如多个反斜杠转义。

在 javascript 中，将一些 PHP 数据转换为 (JSON) 变量，然后继续处理静态 JS 代码会很有用。在浏览器一次性下载多个 JS 文件之前连接多个 JS 文件也有性能优势。

对于 CSS，有一些特定的语言，例如更适合该目的的 Less。使用 LessPHP (http://leafo.net/lessphp/)，您可以使用 PHP 脚本中的变量和回调轻松初始化 Less 模板。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-07T20:02:27.983

不好的一面：很多，但仅举几例：

*   它会很慢：为每个请求构建自定义样式表会给服务器带来巨大的负载，而不是您想要的。

*   设计师创建 CSS 文件，程序员不应该（在某些情况下不应该被允许）。这不是他们的工作/他们的专长。

*   恕我直言，混合 JS 和 PHP 是可能犯的最大错误之一。由于 jQuery 是一个非常流行的库，使用该`$`符号，它可能是错误和语法错误的巨大来源。除此之外：JS 是一种与几乎任何其他编程语言完全不同的语言。很少有人知道如何充分利用它，而让 PHP 开发人员编写大量的 JS 脚本往往以泪水告终。
    JavaScript 是一种功能性 OO（*原型*）语言。不完全理解这些关键差异的人会写出糟糕的代码。我知道，因为我写了很多糟糕的 JS 代码。

*   实际上，您为什么要这样做？PHP 允许您在生成页面时更改所有元素的类，只需确保这些类在您的 css 文件中具有相应的样式规则，并且颜色会根据您的需要更改，而无需发送各种文件、弄乱标题和所有令人头疼的问题这种做法附带的

如果您想要更多不应该这样做的理由，我至少可以想到另外几十个。
也就是说：我只能想到一个你会考虑这样做的原因：它使由客户端缓存脚本引起的问题不再是问题。并不是说这首先应该是一个问题，但是嘿...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-07T19:53:46.410

PHP 通常用作生成动态内容的处理器。处理页面然后发送它需要时间。为了效率（服务器和编程所花费的时间），只有在静态文件无法成功实现其预期目标的情况下，*才会创建动态 JS 或 CSS 文件。*

我建议仅在绝对需要动态数据库驱动处理器的帮助时才这样做。

# sql - 试图根据不同字段的值计算一个字段的 # 个不同值

> ID：11853065
> 
> 赞同：0
> 
> 时间：2012-08-07T19:52:13.207
> 
> 标签：sql, tsql

寻找有关我的 SQL 查询的帮助。我试图找到一种方法来指定客户在两个不同的商店购买或销售的情况，但如果他们在一个商店购买并在另一家商店销售，我不在乎或不希望计算在内。

我试过这个 -

```
Select count(distinct store) OVER(Partition BY Customer) 
```

但它不喜欢独特的并导致错误。当我没有指定不同时，它会给我该客户的所有观察计数，而不仅仅是他们购买或出售给的商店的计数。

根据以下数据，客户 D 是我要过滤的类型。

我的原始数据：

```
Customer    Type        Qty     Store
A           Purchase    1       2
A           Purchase    2       2
A           Sale        3       1
B           Sale        24      1
B           Sale        12      1
C           Purchase    4       2
D           Sale        12      2
D           Purchase    4       2
D           Purchase    2       1
D           Purchase    2       1 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:55:38.960

你不想组吗？

```
Select Count(store) FROM Blah GROUP BY Customer, Store 
```

编辑：啊，我明白了你想要什么 - 你想要一个商店而不是顾客，抱歉误读了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:58:26.253

```
select customer
from your_table
group by customer, type
having count(distinct store) > 1 
```

# c# - c#中如何从字符串中读取字符

> ID：11853069
> 
> 赞同：-4
> 
> 时间：2012-08-07T19:52:30.947
> 
> 标签：c#

我有一个字符串`a = "aabbbffdshhh"`。我想编写一个程序，它会给我输出`"a2b3f2d1s1h3"`. 我想返回字母表中的每个字母，它是计数的。

我目前使用的代码是：

```
int cnta;int cntb; int cntf; int cnth;

for (int i=0;i<a.lenghth;i++)
{
   if(a[i]=='a')
   {
      cnta++;
   }
   if(a[i]=='b')
   {
      cntb++;
   }
   if(a[i]=='h')
   {
   cnth++;
   }
} 
```

它给了我输出，但这个逻辑不好。我还可以使用哪些其他算法或方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T20:00:58.373

这应该为您提供结果所需的所有数据。

`StringBuilder`如果您需要该格式的结果，您应该能够将它们附加到字符串中（使用 a ）。

```
var results = s.GroupBy(c => c)
    .Select(group => new
    {
        Letter = group.Key,
        Count = group.Count()
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:59:57.667

```
var input = "aabbbffdshhh";

var characters = input.ToArray();

StringBuilder sb = new StringBuilder();
characters.ToList().ForEach(c=>{if(!sb.ToString().Contains(c)){sb.Append(c); sb.Append(characters.ToList().Count(cc=>cc == c));}});

//sb.ToString().Dump(); //output is a2b3f2d1s1h3 
```

在 LinqPad 中完成

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:01:19.883

使用 Dictionary 类型的字典。在第一次出现时添加到字典中，在每个后续增量中。

这样你就可以使用你想要的任何字符（并控制如何处理大小写），而不仅仅是处理 26

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T20:32:28.273

可以用 1 行超级可读代码（讽刺）来完成 :-) 即使没有要求，我也添加了一个 orderby，如果需要，您可以删除。

```
 string a = "aaaadjkhsdfkjsdjkfhsdkjff";
        var res = a.GroupBy(c => c).OrderBy(g => g.Key).Aggregate("", (p, g) => p += g.Key + g.Count().ToString()); 
```

或者如果您是认为字符串连接效率太低的人之一

```
 var res2 = a.GroupBy(c => c).OrderBy(g => g.Key).Aggregate(new StringBuilder(), (p, g) => p.Append(g.Key + g.Count().ToString())).ToString();; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T20:25:37.583

假设您正在对[Run-length Encoding](http://en.wikipedia.org/wiki/Run-length_encoding)进行轻微变化，这将对您的字符串进行编码。我的评论没有得到答复，所以我将其作为猜测。我将把解码作为练习留给您（或者只需查看rosettacode 以查看实现）。

```
var a = "aabbbffdshhh";
var rle = new StringBuilder();

var last = a[0];
var count = 1;
for (int i = 1; i < a.Length; i++)
{
    if (a[i] != last)
    {
        rle.AppendFormat("{0}{1}", last, count);
        last = a[i];
        count = 0;
    }

    count++;
}

rle.AppendFormat("{0}{1}", last, count);

Assert.AreEqual("a2b3f2d1s1h3", rle.ToString()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-07T19:55:52.760

一个想法是有一个`List<Tuple<char,int>>`预先填充每个`char`并`0`为它填充的位置。

遇到时增加每个字符的值。

```
for (int i=0;i<a.lenghth;i++)
{
  myList.Single(t => t.Item1 == a[i]).Item2++;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-07T19:58:22.997

笼统：

1.  对字符进行排序以获得每个字符的 1 个实例的排序列表
2.  创建一个与排序列表大小相同的计数器列表（每个计数器从 0 开始）
3.  循环遍历字符串中的每个字符，递增对应的计数器
4.  循环排序列表，从排序列表和计数器构造结果。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-07T20:02:24.223

尝试这个：

```
 string a = "aaabbbasdlfjasldfkjalsdkfjaewoasdfj";

        //store character counts in a dictionary 
        Dictionary<char, int> charCounts = new Dictionary<char, int>();

        //iterate through string and place counts in dictionary
        for (int i = 0; i < a.Length; i++)
        {
            if (!charCounts.Keys.Contains(a[i]))
            {
                charCounts[a[i]] = 1;
            }
            else
            {
                charCounts[a[i]] += 1;
            }
        }

        //output sorted list
        foreach (char letter in charCounts.Keys.OrderBy(x => x))
        {
            Console.Write(string.Format("{0}{1}", letter, charCounts[letter]));
        } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-07T20:04:33.323

在 C# 中，你可以这样做：

```
Dictionary<char, int> d = new Dictionary<char, int>();
foreach(char c in a){
    if(d.ContainsKey(c)){
        d[c] = d[c] + 1;
    } else {
        d[c] = 1;
    }
}
StringBuilder sb = new StringBuilder();
foreach(KeyValuePair p in d){
    sb += p.Key.ToString() + p.Value.Tostring();
}
return sb.ToString(); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-08-07T19:57:56.733

这段代码应该在 cpp 中工作

```
int* count = new int[26];
for (int i = 0; i < a.length; i++)
  count[a[i] - 'a']++; 
```

在 c# 中，您需要稍微玩一下，以便将字符视为数字。

# oop - 如何让抽象的依赖属性起作用

> ID：11853073
> 
> 赞同：4
> 
> 时间：2012-08-07T19:52:42.503
> 
> 标签：oop, matlab, inheritance, properties, abstract-class

我想在这样的抽象类中定义一个带有属性的接口

```
classdef A
    properties (Abstract = true)
        Valid;
    end
end 
```

像这样实现这个接口

```
classdef B < A
    properties (Dependent = true)
        Valid;
    end
    methods
        function v = get.Valid(obj)
            v = 1;
        end
    end
end 
```

但是当我尝试制作 BI 的实例时，会出现以下错误

```
>> c = B()
??? Error using ==> B
The property 'Valid' restriction defined in class 'B' must match the property definition in base class 'B'. 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:33:34.437

尝试`Dependent`在基类中设置属性属性：

```
classdef A
    properties (Abstract = true, Dependent = true)
        Valid;
    end
end 
```

根据[文档](http://www.mathworks.com/help/techdoc/matlab_oop/brgxk22-1.html#brjh54r-1)：

> 具体的子类必须重新定义抽象属性而不将 Abstract 属性设置为 true

我理解这一点的方式，子类属性属性必须匹配基类（没有`Abstract`属性）

# magento - Magento 错误：SQLSTATE [42S02]：未找到基表或视图：1146 表

> ID：11853074
> 
> 赞同：0
> 
> 时间：2012-08-07T19:52:44.597
> 
> 标签：magento

按继续结帐后，我在购物车中收到此错误，有什么想法吗？

处理您的请求时出现错误 SQLSTATE[42S02]: Base table or view not found: 1146 Table \\'XXXX_mgnt1.magenotification_log\\' 不存在

痕迹：

```
#0 /home/celialiu/public_html/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array) 
#1 /home/celialiu/public_html/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array) 
#2 /home/celialiu/public_html/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array) 
#3 /home/celialiu/public_html/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query(\\\’SELECT `main_ta...\\\’, Array) 
#4 /home/celialiu/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query(\\\’SELECT `main_ta...\\\’, Array) 
#5 /home/celialiu/public_html/lib/Zend/Db/Adapter/Abstract.php(734): Varien_Db_Adapter_Pdo_Mysql->query(\\\’SELECT `main_ta...\\\’, Array) 
#6 /home/celialiu/public_html/lib/Varien/Data/Collection/Db.php(734): Zend_Db_Adapter_Abstract->fetchAll(\\\’SELECT `main_ta...\\\’, Array) 
#7 /home/celialiu/public_html/app/code/core/Mage/Core/Model/Resource/Db/Collection/Abstract.php(521): Varien_Data_Collection_Db->_fetchAll(\\\’SELECT `main_ta...\\\’, Array) 
#8 /home/celialiu/public_html/lib/Varien/Data/Collection/Db.php(566): Mage_Core_Model_Resource_Db_Collection_Abstract->getData() 
#9 /home/celialiu/public_html/lib/Varien/Data/Collection.php(268): Varien_Data_Collection_Db->load() 
#10 /home/celialiu/public_html/app/code/local/Magestore/Magenotification/Helper/Data.php(1) : eval()\\\’d code(383): Varien_Data_Collection->getFirstItem() 
#11 /home/celialiu/public_html/app/code/local/Magestore/Magenotification/Helper/Data.php(1) : eval()\\\’d code(324): Magestore_Magenotification_Helper_Data->_getLogger() 
#12 /home/celialiu/public_html/app/code/local/Magestore/Magenotification/Helper/Data.php(1) : eval()\\\’d code(76): Magestore_Magenotification_Helper_Data->getDBLicenseKey() 
#13 /home/celialiu/public_html/app/code/local/Magestore/Giftvoucher/Model/Payment/Giftvoucher.php(12): Magestore_Magenotification_Helper_Data->checkLicenseKey(\\\’Giftvoucher\\\’) 
#14 /home/celialiu/public_html/app/code/core/Mage/Payment/Helper/Data.php(73): Magestore_Giftvoucher_Model_Payment_Giftvoucher->isAvailable(Object(Rewardpoints_Model_Quote)) 
#15 /home/celialiu/public_html/app/code/core/Mage/Payment/Block/Form/Container.php(118): Mage_Payment_Helper_Data->getStoreMethods(\\\’1\\\’, Object(Rewardpoints_Model_Quote)) 
#16 /home/celialiu/public_html/app/code/core/Mage/Payment/Block/Form/Container.php(44): Mage_Payment_Block_Form_Container->getMethods() 
#17 /home/celialiu/public_html/app/code/core/Mage/Core/Block/Abstract.php(238): Mage_Payment_Block_Form_Container->_prepareLayout() 
#18 /home/celialiu/public_html/app/code/core/Mage/Core/Model/Layout.php(456): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout)) 
#19 /home/celialiu/public_html/app/code/core/Mage/Core/Model/Layout.php(472): Mage_Core_Model_Layout->createBlock(\\\’checkout/onepag...\\\’, \\\’checkout.paymen...\\\’) 
#20 /home/celialiu/public_html/app/code/core/Mage/Core/Model/Layout.php(239): Mage_Core_Model_Layout->addBlock(\\\’checkout/onepag...\\\’, \\\’checkout.paymen...\\\’) 
#21 /home/celialiu/public_html/app/code/core/Mage/Core/Model/Layout.php(205): Mage_Core_Model_Layout->_generateBlock(Object(Mage_Core_Model_Layout_Element), Object(Mage_Core_Model_Layout_Element)) 
#22 /home/celialiu/public_html/app/code/core/Mage/Core/Model/Layout.php(206): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element)) 
#23 /home/celialiu/public_html/app/code/core/Mage/Core/Model/Layout.php(206): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element)) 
#24 /home/celialiu/public_html/app/code/core/Mage/Core/Model/Layout.php(210): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element)) 
#25 /home/celialiu/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(344): Mage_Core_Model_Layout->generateBlocks() 
#26 /home/celialiu/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(269): Mage_Core_Controller_Varien_Action->generateLayoutBlocks() 
#27 /home/celialiu/public_html/app/code/core/Mage/Checkout/controllers/OnepageController.php(185): Mage_Core_Controller_Varien_Action->loadLayout() 
#28 /home/celialiu/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Checkout_OnepageController->indexAction() 
#29 /home/celialiu/public_html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch(\\\’index\\\’) 
#30 /home/celialiu/public_html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http)) 
#31 /home/celialiu/public_html/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch() 
#32 /home/celialiu/public_html/app/Mage.php(683): Mage_Core_Model_App->run(Array) 
#33 /home/celialiu/public_html/index.php(87): Mage::run(\\\’\\\’, \\\’store\\\’) 
#34 {main} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:32:34.597

您只需`Configuration > Advanced > Advanced`禁用块的输出。要真正禁用该模块，您需要转到代码库中的 app/etc/modules 并找到文件 Magestore_Magenotifcation.xml。在该文件中，您需要将节点更改为 false。启用缓存后，您需要在进行此更改后刷新它。

# c - c程序对学生的分数进行分组

> ID：11853078
> 
> 赞同：0
> 
> 时间：2012-08-07T19:52:54.210
> 
> 标签：c

帮助，我似乎无法在下面的代码中识别问题。

这就是我想要做的：输入一个标记列表。输入以 0 结尾（0 本身不是某人的标记）。输出 1) 得分大于等于 85 的学生人数；2) 60 到 84 之间；3）严格小于60。

这是我的代码：

```
#include stdio.h

int main() {
    int mark;
    int morethan85 = 0, between60and84 = 0, lessthan60 = 0;

    for (true) {
        scanf("%d", &mark);
        if (mark != 0) {
            if (mark >= 85)
                morethan85 = morethan85 + 1;
            else if (mark < 85 && mark >= 60)
                between60and84 = between60and84 + 1;
            else
                lessthan60 = lessthan60 + 1;
        } else
            break;
    }

    printf(">=85:%d, morethan85");
    printf("60-84:%d, between60and84");
    printf("<60:%d, lessthan60");

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:55:58.637

> ```
> printf(">=85:%d, morethan85");
>                            ^ 
> ```

您正在打印纯字符串。试试这个：

```
printf(">=85:%d", morethan85);
               ^ 
```

* * *

此外，严格来说，传递的参数少于格式字符串所需的参数是未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:02:25.230

哇。这里有很多东西要评论。

1.  首先，“true”是无效的 C。您可以定义一个名为 TRUE 的宏或常量并将其设置为“1”——或者简单地使用 1。

2.  如果你正在循环某个东西直到它中断，请使用 while() 而不是 for()。

3.  最后，您的代码不起作用的原因是您在 printf() 函数中的变量名称之后添加了引号。

这是您的代码的工作版本：

```
#include <stdio.h>

int main() {
    int mark;
    int morethan85 = 0;
    int between60and84 = 0;
    int lessthan60 = 0;

    while (1) {
        scanf("%d", &mark);
        if (mark != 0) {
            if (mark >= 85)
                morethan85 ++;
            else if (mark < 85 && mark >= 60)
                between60and84 ++;
            else
                lessthan60 ++;
        } else
            break;
    }

    printf(">=85:%d\n", morethan85);
    printf("60-84:%d\n", between60and84);
    printf("<60:%d\n", lessthan60);

} 
```

# mysql - AES_ENCRYPT 返回的字符串是否唯一？

> ID：11853079
> 
> 赞同：2
> 
> 时间：2012-08-07T19:52:56.717
> 
> 标签：mysql, security, encryption, aes

我需要加密 MySQL 中的列，并且我正在使用 AES_ENCRYPT。我想找出一种在 WHERE 子句中使用此数据列的安全方法。我的问题是这个——

1）我可以使用相同的密码对 WHERE 子句参数进行 AES_ENCRYPT 并在 WHERE 子句中使用生成的加密字符串吗？还是我必须对整个列进行解密？

例如，这会安全吗？

```
SELECT * from TABLE WHERE Enc_COL= AES_ENCRYPT('someColValue','same_passphrase'); 
```

还是必须

```
SELECT * from TABLE WHERE AES_ENCRYPT(Enc_COL,'same_passphrase')= 'someColValue'; 
```

我相信第二个例子会慢得多，所以我想知道第一个例子是否可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:22:37.730

使用

```
SELECT * FROM `table`
WHERE `Enc_COL` = AES_ENCRYPT('text-to-encrypt', 'same_passphrase'); 
```

应该没事。只要确保有一个索引，`Enc_Col`就不必扫描整个表来查找结果。只要您使用相同的输入和键，您将获得相同的输出。

只是一个侧面说明，不要对多个列使用相同的密钥（确保使用某种 IV 或加密随机数，这对您加密的每一列都是唯一的）。如果您使用相同的密钥加密所有行并且您的数据库受到破坏，则更有可能有人可以找到该密钥。

# html - 在 Phonegap/Android 上停止后执行媒体回调

> ID：11853083
> 
> 赞同：2
> 
> 时间：2012-08-07T19:53:30.713
> 
> 标签：html, cordova, media

我在我的 cordova/android 项目中使用 HTML5 媒体对象。这些媒体对象有一个回调函数，一旦媒体完成播放音频文件就应该执行该回调函数，但似乎在媒体停止和释放时也会启动回调。为什么当我停止/释放媒体时会调用成功回调？如何在不启动回调函数的情况下完全停止？

# ios - 单击 UISearch 时如何显示 UITableView。

> ID：11853086
> 
> 赞同：0
> 
> 时间：2012-08-07T19:53:39.180
> 
> 标签：ios, xcode, uitableview, uilabel, uisearchbar

我正在创建一个应用程序并需要用户选择一个活动。我希望他们能够搜索活动，因为列表中有很多。我只想在主视图上有一个搜索栏（带有显示选择活动的占位符文本。）当他们在搜索栏中单击时，我希望显示一个包含活动列表的表格视图，然后我希望他们能够搜索表格视图。我知道如何执行搜索栏的搜索功能，但我不知道如何让它拉起表格视图，或者在他们选择一个之后如何关闭表格视图。我希望它在关闭后在标签中显示活动的名称。任何建议都会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:27:24.863

你应该使用`UISearchDisplayController`它让事情变得更容易。
它管理第二个`UITableView`，所以你不需要自己做。
要随时关闭搜索表视图，请致电 -`[mySearchController setActive:NO];`

看看那些教程

[使用 UISearchDisplayController 和 Interface Builder 实现基本搜索](http://ygamretuta.me/2011/08/10/ios-implementing-a-basic-search-uisearchdisplaycontroller-and-interface-builder/)

[带有 NSPredicate 的 UISearchDisplayController](http://blog.mugunthkumar.com/coding/iphone-tutorial-uisearchdisplaycontroller-with-nspredicate/)

# javascript - FB.api() 在下划线模板内调用

> ID：11853087
> 
> 赞同：3
> 
> 时间：2012-08-07T19:53:40.850
> 
> 标签：javascript, ajax, facebook-javascript-sdk, underscore.js

下划线模板文档建议以下应该是可能的，但它对我不起作用。执行模板只是为此返回任何内容。

```
<% FB.api('/me', function(response){ %>
<%= response.name %>
<% }); %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:14:10.047

这是一个完全有效的模板；事实上，编译后的 JavaScript 版本看起来像这样（为了便于阅读而重新格式化）：

```
function(obj) {
    var __p = '';
    var print = function() { __p += Array.prototype.join.call(arguments, '') };
    with(obj || {}) {
        __p += '\n';
        FB.api('/me', function(response) { 
            __p += '\n' + response.name + '\n';
        }); 
        __p += '\n';
    }
    return __p;
} 
```

这并没有错。顺便说一句，`source`如果您想查看模板的 JavaScript，可以查看已编译的 Underscore 模板的属性：

```
var t = _.template(raw_template);
console.log(t.source); 
```

但是，它不会做你期望它做的事情。您的问题是`FB.api`调用是 AJAX 调用，而**A**代表异步。因此，当您的回调被调用（即被`<%= response.name %>`执行）时，模板将被转换为 HTML 并添加到 DOM 中，并且`__p`不再查看该变量。序列看起来像这样：

1.  编译模板并调用编译后的模板函数。
2.  `FB.api`被调用。
3.  模板函数返回一些 HTML。
4.  来自**3**的 HTML被添加到 DOM。
5.  时间流逝。
6.  Facebook 做出响应并调用您的`FB.api`回调。
7.  `response.name`附加到`__p`缓冲区。

你将不得不稍微改变你的逻辑。您的`FB.api`电话应该在您的模板之外：

```
var t = _.template(...);
FB.api('/mu', function(response) {
    var html = t({ response: response });
    // Somehow add html to the DOM
}); 
```

这样您就不会在所有数据准备好之前尝试使用模板。

# android - ANDROID - 如何在 Andengine 中使用视频作为背景

> ID：11853088
> 
> 赞同：4
> 
> 时间：2012-08-07T19:53:42.533
> 
> 标签：android, video-streaming, android-webview, andengine, android-videoview

我在我的应用程序中使用游戏引擎 AndEngine。我正在使用[此处](http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/AnalogOnScreenControlsExample.java)找到的 AnalogOnScreenControls 示例的变体；我正在扩展 BaseGameActivity。我需要以某种方式将应用程序的背景设置为我从 Ustream.com 流式传输的视频。我正在考虑使我在[这里](http://code.google.com/p/andengineaugmentedrealityextension/source/browse/src/org/anddev/andengine/extension/augmentedreality/BaseAugmentedRealityGameActivity.java)看到的背景透明，以便在下面使用 WebView 显示我的 .xml 布局，但我无法弄清楚如何在我自己的代码中做到这一点。这是我尝试过的（直接来自第二个链接中的代码）以及下面的其他方法：

```
protected void onSetContentView() {
    this.mRenderSurfaceView = new RenderSurfaceView(this);  

    this.mRenderSurfaceView.setEGLConfigChooser(new ComponentSizeChooser(4, 4, 4, 4, 16, 0)); 
    this.mRenderSurfaceView.getHolder().setFormat(PixelFormat.TRANSLUCENT);

    this.mRenderSurfaceView.setRenderer(this.mEngine);

    this.setContentView(this.mRenderSurfaceView, createSurfaceViewLayoutParams());

} 
```

我也尝试将场景设置为视频，但无法做到。如果有人可以在制作流式视频作为我的应用程序背景方面提供帮助，同时保持两个模拟控件功能齐全且可见，我将不胜感激。

# java - Spring Roo - 将查找器添加到 list.jspx 中的每一行

> ID：11853090
> 
> 赞同：1
> 
> 时间：2012-08-07T19:53:53.453
> 
> 标签：java, spring, spring-roo, finder

我创建了一个查找器，findUserBySupervisoID。我想获取该查找器并将其应用于 list.jspx 中的每一行，同时将 list.jspx 中的一项（managerID）作为查找器的参数。我知道我需要修改 list.tagx 但我不确定如何为每一行传递不是其主键的经理 ID。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T09:19:04.247

*   将 table.tagx 复制到 tableManager.tagx

这允许您稍后更新 roo 标签，而不会丢失您的更改

*   更新 list.jspx 以使用 tableManager 而不是 table

*   将您的自定义列添加到 tableManager.tagx，请参见下面的示例：

**打开/关闭自定义列的额外参数：**

```
<jsp:directive.attribute name="hits" type="java.lang.Boolean" required="false" description="Include 'hits' link into table (default true)" /> 
```

**额外参数的默认值**

```
<c:if test="${empty hits}">
  <c:set var="hits" value="true" />
</c:if> 
```

**显示额外的列**

```
 <c:if test="${hits}">
        <td>
          <spring:url value="/hits" var="hits_form_url">
            <spring:param name="find" value="ByScraper"/>
            <spring:param name="scraper" value="${itemId}"/>
            <spring:param name="page" value="1"/>
            <spring:param name="size" value="${param.size}"/>
          </spring:url>
          <spring:url value="/resources/images/list.png" var="hits_image_url" />
          <spring:message arguments="${typeName}" code="entity_hits" var="hits_label" />
          <a href="${hits_form_url}" alt="${fn:escapeXml(hits_label)}" title="${fn:escapeXml(hits_label)}">
            <img alt="${fn:escapeXml(hits_label)}" class="image" src="${fn:escapeXml(hits_image_url)}" title="${fn:escapeXml(hits_label)}" />
          </a>
        </td>
      </c:if> 
```

# c# - 在 WPF 中将图像添加到 FixedPage

> ID：11853096
> 
> 赞同：1
> 
> 时间：2012-08-07T19:54:26.140
> 
> 标签：c#, wpf, image, fixedpage

我希望能够使用其他 UIElements 打印图像。我有一个 FixedPage 实例并尝试像这样添加图像

```
// Basic printing stuff
var printDialog = new PrintDialog();
var fixedDocument = new FixedDocument();
fixedDocument.DocumentPaginator.PageSize = new Size(printDialog.PrintableAreaWidth, printDialog.PrintableAreaHeight);

FixedPage page = new FixedPage();
page.Width = fixedDocument.DocumentPaginator.PageSize.Width;
page.Height = fixedDocument.DocumentPaginator.PageSize.Height;

Image img = new Image();

// PrintIt my project's name, Img folder
var uriImageSource = new Uri(@"/PrintIt;component/Img/Stuff.png", UriKind.RelativeOrAbsolute);
img.Source = new BitmapImage(uriImageSource);
img.Width = 100;
img.Height = 100;

page.Children.Add(img);

PageContent pageContent = new PageContent();
((IAddChild)pageContent).AddChild(page);

fixedDocument.Pages.Add(pageContent);

// Print me an image please!
_printDialog.PrintDocument(fixedDocument.DocumentPaginator, "Print"); 
```

它给了我一张白纸。我想知道为什么，因为其他 UIElement（例如 TextBox、Grid、Rect）出现时没有问题。我错过了什么？

谢谢！

PS好的，我找到了另一个解决方案。我不知道为什么，但是使用 Uri 可以正确加载图片

```
var uri = new Uri("pack://application:,,,/Img/Stuff.png"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:17:00.627

为了更清楚我的代码

```
var bitImage = new BitmapImage();
bitImage.BeginInit();
bitImage.StreamSource = new FileStream(fileName, FileMode.Open, FileAccess.Read);
bitImage.DecodePixelWidth = 250;
bitImage.CacheOption = BitmapCacheOption.OnLoad;
bitImage.CreateOptions = BitmapCreateOptions.IgnoreColorProfile;
bitImage.EndInit();
bitImage.StreamSource.Seek(0, System.IO.SeekOrigin.Begin);
bitImage.Freeze();

var tempImage = new Image {Source = bitImage};
var imageObject = new ImageObject(tempImage, fileName);
bitImage.StreamSource.Dispose();
page.Children.Add(imageObject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:13:32.703

首先我想建议，见下文。

```
Set the sourceStream of the Image for BitMap
    bitImage.StreamSource = new FileStream(fileName, FileMode.Open, FileAccess.Read); 
```

然后冻结位图图像，否则它不会在实例中作为可渲染图像。

```
bitImage.StreamSource.Seek(0, System.IO.SeekOrigin.Begin);
bitImage.Freeze(); 
```

这应该可行，如果不是我个人认为直接使用 BitMaps 是一个坏主意，我使用 Bitmap 创建图像表单文件，然后将其复制到类型 Image(system.drawing igess)，如下所示

```
var tempImage = new Image {Source = bitImage};
var imageObject = new ImageObject(tempImage, fileName);
bitImage.StreamSource.Dispose(); 
```

这个 tempImage 可以作为常规 UIElement 添加到您的页面。希望能帮助到你。

# delphi - 在我手动调用 ClientHeigh 或手动调整大小之前，不会执行调整大小

> ID：11853111
> 
> 赞同：-1
> 
> 时间：2012-08-07T19:55:04.920
> 
> 标签：delphi

我想创建一个从 TPanel 派生的自定义控件，其中包含一个图像和一堆其他控件。编写代码后，我的程序中有一些奇怪的行为。我意识到一些应该在 TDisplay.Resize （覆盖）中初始化的变量从未被初始化，因为 Resize 从未被执行。

为了“解决它”，我在表单上放了一个按钮并调用了 LoadSample 函数，该函数调用了 ClientHeight，该函数第一次调用了 Resize！

```
constructor TDisplay.Create(AOwner: TComponent);
begin
 inherited Create(AOwner);
 Ready         := FALSE;                                                       
 Parent        := Owner as TWinControl;
 Width         := 200;
 Height        := 86;                 
 Color         := clSilver;
 Caption       := '';
 DoubleBuffered:= TRUE;

  InternalDisplay:= TImage32.Create(Self);
  with Display DO
   begin
    Parent        := Self;
    Bitmap.Width  := 1;                                                        
    Bitmap.Height := 1;
    RepaintMode   := rmOptimizer;     
    Align         := alClient;
    SetupBitmap(TRUE, clBlack32);    
    Visible       := TRUE;
    OnMouseDown   := DMouseDown;
   end;
 ...
end; 
```

**更新：**
在我在运行时手动调整表单（控件）的大小之前，InternalDisplay 也不会与其父大小对齐。只有这样，它才会按预期的方式运行（与 alClient 保持一致）。

**更新 2：**
Resize 声明如下：procedure Resize; 覆盖；

**更新 3：**
我从构造函数中删除了 ClientHeight 行并将其移至此处：

```
procedure TDisplay.LoadSample(VAR Obj: TMySample; CONST bReleaseOnExit: boolean)
begin
 ClientHeight;  <--------- this will call Resize for the first time and my code will be finally initialized. But until this point my display will look odd because the code was never initialized. So the user will see weird stuff until it pushes the 'LoadSample' button.
 more code here....
end; 
```

**更新 4：**
我按照 David 的建议使用了 HandleNeeded，它解决了初始化问题。但是，除非我手动调整表单/控件的大小，否则图像仍然不会与整个客户区对齐。

**更新 5**
在这里继续，正如 David 所建议的那样：[TImage 不会与父级对齐](https://stackoverflow.com/questions/11853782/timage-wont-align-to-parent)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T20:07:51.013

您的控件派生自`TWinControl`，并`TWinControl`调用`Resize`以响应`WM_SIZE`消息。因此，`Resize`除非已创建控件的窗口句柄，否则不会调用。

`Resize`分配时不会调用该方法`Height`，或者实际上是`Width`因为尚未分配窗口句柄。

当您评估该`ClientHeight`属性时，会导致创建窗口句柄，然后`Resize`调用该句柄。那是因为`GetClientHeight`调用`GetClientRect`看起来像这样：

```
function TWinControl.GetClientRect: TRect;
begin
  Winapi.Windows.GetClientRect(Handle, Result);
end; 
```

正是对`Handle`属性的评估迫使窗口句柄存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T20:04:54.433

您的表单尚未显示，因此它还无法接收 Windows 消息（例如触发 OnResize 事件的调整大小消息）。

# asp.net - 如何在 NLog 中设置 isdebugenabled

> ID：11853117
> 
> 赞同：7
> 
> 时间：2012-08-07T19:55:37.503
> 
> 标签：asp.net, nlog

我试图找到一种在配置文件中设置 isdebugenabled false 或 true 的方法，

所以我可以在需要时打开或关闭它。谢谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T15:26:35.357

使用非常简单的日志记录设置

```
<targets>
  <target xsi:type="File"
          name="debug"
          fileName="c:\temp\debug.txt"
          layout="${longdate} ${uppercase:${level}} ${message}" 
  />
</targets>

<rules>
  <logger name="*" minlevel="Trace" writeTo="debug" />
</rules> 
```

还有一个同样简单的代码示例

```
class Program
{
    static void Main(string[] args)
    {
        var logger = new NLog.LogFactory().GetCurrentClassLogger();

        if (logger.IsDebugEnabled)
        {
            logger.Debug("this is a debug message");
        }

        logger.Debug("this is another debug message");
    }
} 
```

当`minLevel`设置为 Debug 或 Trace 时，两个`logger.Debug`语句都将写入日志。如果您提升`minLevel`到更高级别（信息、警告、关闭），则任何语句都不会写入日志。 `logger.Debug`检查`IsDebugEnabled`（从日志级别推断）。

您当然可以通过检查来提高性能（在您要记录计算值而不仅仅是字符串的情况下）`IsDebugEnabled`，并且更改`minLevel`记录器是切换它的方法。

# java - 包“au.com.bytecode”不存在（OpenCSV）

> ID：11853120
> 
> 赞同：1
> 
> 时间：2012-08-07T19:55:48.273
> 
> 标签：java, windows, netbeans, opencsv

正如标题所说。我究竟做错了什么？我正在使用 Netbeans，并为我的 3rd 方库创建了一个文件夹，右键单击包，导航：

```
Properties > Libraries > Add JAR/Folder > OpenCSV-2.3.jar 
```

然后用

```
import au.com.bytecode.OpenCSV;

class OpenCSV extends au.com.bytecode.OpenCSV {

} 
```

但是每次我尝试修复导入或编译时，netbeans 都会抛出上述错误（或完全删除导入）。

那么我在这里做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:43:25.813

我想到了。在使用 7Zip 探索 JAR 之后，我发现“opencsv”是一个文件夹，而不是一个类；在导入行的末尾添加“。*”后，它开始工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-27T10:32:20.790

请确定您使用的是哪个 Opencsv。我遇到了同样的问题，因为我添加了 com.opencsv.opencsv ma​​ven 依赖项并期望是 au.com.bytecode.opencsv：

```
<dependency>
    <groupId>au.com.bytecode</groupId>
    <artifactId>opencsv</artifactId>
    <version>2.4</version>
</dependency> 
```

# php - 多次打开和关闭 php 标签会增加页面负载吗？

> ID：11853130
> 
> 赞同：5
> 
> 时间：2012-08-07T19:56:11.130
> 
> 标签：php, performance, page-load-time

> **可能重复：**
> [打开/关闭标签和性能？](https://stackoverflow.com/questions/2437144/opening-closing-tags-performance)

这是一个新手问题，但我在网上找不到明确的答案，所以请不要笑:)

1.  **多次**打开和关闭 php 标签 ( `<? php code ?>`)会增加页面加载时间吗？

***   多次使用包含模板路径怎么样？** 

 **谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T20:42:45.563

> `<? php code ?>`多次打开和关闭 php 标签 ( ) 会增加页面加载时间吗？

**不**——即使你接受了，我也会回答，因为每个人都应该知道*实际*发生了什么。

当 PHP 解析文件时，它[会将标签之外的所有内容标记为 T_INLINE_HTML](http://lxr.php.net/xref/PHP_5_4/ext/tokenizer/tokenizer.c#162)。

这[直接](http://lxr.php.net/xref/PHP_5_4/Zend/zend_language_parser.y#303)变成了[ZEND_ECHO](http://lxr.php.net/xref/PHP_5_4/Zend/zend_compile.c#860)

关闭和重新打开标签的速度与在单个块中回显 html 的速度*完全相同。*`<?php ?>`

> 多次使用包含模板路径怎么样？

是的，您包含的文件越多，加载页面所需的时间就越长，特别是如果每​​次都必须从磁盘读取它们并且您没有使用各种缓存机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T19:59:49.367

1.  理论上是的，但差异是如此微小，以至于在几乎所有情况下都无关紧要。

2.  不确定你的意思。如果有可能多次包含一个文件，请使用`include_once`或`require_once`。这将防止多次加载并防止诸如**'Cannot redeclare class' 之类的**错误。同样，这比`include`and更昂贵`require`，但更稳定。

*作为旁注，您的问题与代码无关，我相信这些问题已经在 SO 中被多次询问和回答，所以下次请尝试搜索/询问更好:)*

一切顺利！**

# r - tk_choose.files 与 UNIX 和 R

> ID：11853132
> 
> 赞同：0
> 
> 时间：2012-08-07T19:56:13.290
> 
> 标签：r, file, unix

我对 R 有点陌生，但我认为我有一个相当简单的程序，除了它实际上不接受多个文件之外，它运行良好。如果我尝试手动输入两个不同的文件，它声称都不存在。这是代码：

```
library("lattice")
library("tcltk")

File.names<-(tk_choose.files(default="", caption="Choose your files", multi=TRUE, filters=NULL, index=1))
Num.Files<-NROW(File.names)

file<- read.table(File.names,header=TRUE)

colnames(file) <- c(1:18)

histoCol <- c(file$'14')

histogram(histoCol, col=1, xlim=range(c(histoCol)), main='Test',ylab='Percent',  xlab='Greater than 30x Coverage') 
```

我试图输入的文件都遵循这种方法：

```
Targ  cov  av_cov  87A_cvg  87Ag  87Agr  87Agr  87A_gra  87A%_1   87A%_3   87A%_5   87A%_10  87A%_20                    
1:028 400  0.42    400     0.42    1       1       2       41.8    0.0     0.0     0.0     0.0     
1:296 5599  39.99   5599    39.99   34      42      50      100.0   100.0   100.0   100.0   93.6 
1:453 334  0.63    334     0.63    1       2       2       62.1    0.0     0.0     0.0     0.0  
1:427 6932  49.51   6932    49.51   48      52      57      100.0   100.0   100.0   100.0   100.0
1:736 27562  124.15  27562   124.15  97      123     157     100.0   100.0   100.0   100.0   100.0
1:514 2340  16.71   2340    16.71   13      17      21      100.0   100.0   100.0   95.7    40.0 
1:296 8202  49.71   8202    49.71   23      43      80      100.0   100.0   100.0   100.0   81.2
1:534 3950  28.21   3950    28.21   22      33      36      100.0   100.0   100.0   100.0   76.4 
```

我从命令行（UNIX）运行它，但到目前为止，我所阅读的所有内容都表明，只要我有这`multi=TRUE`条线，它就可以工作。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:01:16.440

这就是 jverzani 的建议：

```
> for ( i in seq_along(File.names) ) { assign( paste0("fil_", i), 
                                          read.table(File.names[i] ) ) }
> ls(patt="fil_")
[1] "fil_1" "fil_2" "fil_3" "fil_4" "fil_5" 
```

# c - 在汇编中添加浮点数/双精度数

> ID：11853133
> 
> 赞同：6
> 
> 时间：2012-08-07T19:56:12.527
> 
> 标签：c, assembly, x86, x87

我正在尝试使用内联汇编，并尝试在内联汇编中添加十进制数（不，不是整数）。问题是，当我调用以下函数时：

```
inline double ADD(double num1, double num2) {
  double res;
_asm{

    push eax; push the former state of eax onto stack
    mov eax, num1;
    add eax, num2;
    mov res, eax;
    pop eax; restore the former state of eax now that we are done   
     }  return res;} 
```

编译器抱怨内联汇编中的操作数大小不正确（所有汇编行，不包括 push 和 pop 指令行）。所以只好改成整数类型，比如unsigned long，然后就可以了，不过当然只支持整数类型；十进制结果四舍五入。

有没有办法添加允许像 8.4 这样的十进制结果的程序集？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T20:05:51.373

我已经十年没有做过 x87 组装了，但它应该是这样的：

```
fld num1   ; load num1 and push it onto the fpu stack
fld num2   ; load num2 and push it onto the fpu stack
faddp      ; pop two numbers, add them, push sum on the stack
fstp res   ; pop sum from the stack and store it in res 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T20:31:16.133

您可能想要的指令是 ADDSD，但我不确定。

这是英特尔指令集手册的链接。 [http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html/](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html/)

他们过去常常免费邮寄给你纸质版，但现在看来不再是这样了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:43:31.477

尝试这个：

```
_asm{

movq xmm0,[num1]
addpd xmm0, [num2];
movq [res],xmm0
// sse2
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T20:07:06.787

您需要一组不同的指令来操作浮点数。这是一个应该有帮助的介绍：[x86 Assembly: Floating Point](http://en.wikibooks.org/wiki/X86_Assembly/Floating_Point)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T21:07:00.517

上面的答案是，您必须将操作数压入 FP 堆栈并弹出结果是正确的。

但是，“操作数大小不正确”错误的直接原因是“扩展”寄存器，“e__”（例如 eax）是 32 位的，而双精度浮点数是 64 位的。

# android - Android 数据类型推荐

> ID：11853136
> 
> 赞同：0
> 
> 时间：2012-08-07T19:56:25.093
> 
> 标签：android

我在设计一些代码来处理我的 Android 应用程序中的动态二维数据时遇到问题。我尝试使用 ArrayAdapter 解决此问题，但有一个问题：

据我所知，没有办法通过 ArrayAdapter 的位置（或索引）删除数据。使用 ArrayAdapter，您必须按值删除，如下所示：

```
arrayAdapter.remove (stringValue1); 
```

这对于我的一半数据来说很好，因为这对中的第一个值（“x 值”）保证是唯一的（在 x 中），但对于第二个值来说这并不可靠。我尝试了一些愚蠢的体操来使“y 值”独一无二，但这并不是一个好主意。

谁能推荐一个 Android 数据类型（或 Java，我猜），既可以动态调整大小，又可以让我准确地删除我需要的数据？

谢谢，
R。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:59:23.330

一个 String 对象的 ArrayList，听起来它可以完成这项工作，并且它也可以动态调整大小：

```
ArrayList<String> 
```

[http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

按索引删除：

```
remove(int index) 
```

> 移除此列表中指定位置的元素。

通过对象比较检查它是否包含某个对象：

```
contains(Object o) 
```

> 如果此列表包含指定元素，则返回 true。

# vb.net - 我可以根据与部分文本的匹配从 DropDownList 中删除多个项目吗

> ID：11853138
> 
> 赞同：0
> 
> 时间：2012-08-07T19:56:45.547
> 
> 标签：vb.net, .net-1.1, asp.net-1.1

我有一个下拉列表，其内容类似于：

> ```
> City1
> City1_SearchCriteria
> City2
> City3
> City3_SearchCriteria
> City4
> City4_SearchCriteria 
> ```

我想知道是否可以删除此下拉列表中包含的项目`_SearchCriteria`

或者我应该在作为下拉源的 DataSet 上往上看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:49:38.960

我会亲自修复数据集。但是，您可以通过向后遍历项目列表并删除不良项目来轻松删除有问题的项目：

```
 For nI As Integer = cboMyData.Items.Count - 1 To 0 Step -1
        Dim oItem As ListItem
        oItem = cboMyData.Items(nI)
        If oItem.Text.EndsWith("_SearchCriteria", StringComparison.InvariantCultureIgnoreCase) Then
            cboDataType.Items.Remove(oItem)
        End If
    Next 
```

# python - Foo.objects.get(id=None) 有时返回 Foo 实例

> ID：11853141
> 
> 赞同：9
> 
> 时间：2012-08-07T19:57:05.280
> 
> 标签：python, mysql, django, django-models, innodb

我有这个代码：

```
try:
    parent_comment = models.Comment.all_objects.get(id=parent_comment_id)
except models.Comment.DoesNotExist:
    parent_comment = None

if parent_comment is not None and parent_comment_id is None:
    raise Exception("WTF django/mysql") 
```

...有时，异常会以某种方式引发。这怎么可能发生？

偶尔，一天几次，它返回看似随机的 Comment 实例。通常它会按预期运行并返回 None。

这是 Comment 表的 id 字段：`id int(11) NOT NULL AUTO_INCREMENT`所以它不是可以为空的。这是一个 InnoDB 表。

至于 Comment.all_objects，这是它​​的定义：`all_objects = Manager()`它是该类的第一行。

我们在 Django 1.2.7 上。

**更新** 向异常添加了日志记录，以获取引发异常时生成的 SQL。这里是：

```
SELECT `canvas_comment`.`id`, `canvas_comment`.`visibility`, `canvas_comment`.`parent_content_id`, `canvas_comment`.`parent_comment_id`, `canvas_comment`.`timestamp`, `canvas_comment`.`reply_content_id`, `canvas_comment`.`reply_text`, `canvas_comment`.`replied_comment_id`, `canvas_comment`.`category_id`, `canvas_comment`.`author_id`, `canvas_comment`.`title`, `canvas_comment`.`ip`, `canvas_comment`.`anonymous`, `canvas_comment`.`score`, `canvas_comment`.`judged`, `canvas_comment`.`ot_hidden` FROM `canvas_comment` WHERE `canvas_comment`.`id` IS NULL 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T19:37:22.140

这种行为是由非常奇怪的（在这个编码员的拙见中）MySQL 行为引起的，[由`SQL_AUTO_IS_NULL`变量](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_sql_auto_is_null)控制（`1`默认情况下在 MySQL < 5.5.3 中）：

> 如果此变量设置为 1，则在成功插入自动生成的 AUTO_INCREMENT 值的语句之后，您可以通过发出以下形式的语句来找到该值：
> 
> ```
> SELECT * FROM tbl_name WHERE auto_col IS NULL 
> ```
> 
> 如果语句返回一行，则返回的值与调用 LAST_INSERT_ID() 函数时相同

有[一个 Django 错误（已关闭：wontfix）描述](https://code.djangoproject.com/ticket/10339)了由此“功能”引起的类似混淆，其中一位核心开发人员指出

> 如果您不想要这种行为，您应该配置您的数据库以根据您的偏好做正确的事情

那么，解决方案是[使用](http://dev.mysql.com/doc/refman/5.1/en/set-statement.html)[语句](http://dev.mysql.com/doc/refman/5.1/en/set-statement.html)`SQL_AUTO_IS_NULL`禁用MySQL 数据库的选项。您可以通过以下方式执行此操作：[`SET`](http://dev.mysql.com/doc/refman/5.1/en/set-statement.html)`settings.py`

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        # ... your DB options
        'OPTIONS': {
            'init_command': 'SET SQL_AUTO_IS_NULL=0;'
        },
    }
} 
```

[从长远来看，您可以尝试在 django-developers 列表](http://groups.google.com/group/django-developers)上打鼓，让他们重新考虑[之前的立场](https://groups.google.com/forum/?fromgroups#!topic/django-developers/1BgLit316XA%5B1-25%5D)：

> 幸运的是，我在这里的想法并没有烧毁任何桥梁。如果有人想测试它，或者默认使用它，他们可以通过设置中的 DATABASE_OPTIONS 使用数据库初始化选项......“read_default_file”和“init_command”在那里都很有用。
> 
> 我并不是说这应该是“不，永远”，但现在我不相信这样做值得。与此相平衡的是如何让人们知道它可能会发生……*耸耸肩*……我可能会在 databases.txt 中添加一些内容，作为开始。我讨厌这种平衡行为。:-(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:55:28.663

排除简单的东西：

1.  你能发布你的评论模型吗
2.  您能否对您的数据库运行以下查询

`SELECT COUNT(id) FROM <your_comment_table> WHERE id <= 0 OR id ='' OR id IS NULL`

你的代码在逻辑上应该可以工作，除非你的模型代码中有一些不可靠的东西，这让我相信它一定是与数据相关的。

# 编辑

另一个想法，看看 django 的 ORM 正在查询什么（这应该告诉我们发生了什么）：

```
parent_comment = models.Comment.all_objects.get(id=parent_comment_id)
raise Exception(parent_comment.query) # should display out the query thats being generated 
```

# r - 检查 R 包时出现意外的节标题“\examples”

> ID：11853143
> 
> 赞同：17
> 
> 时间：2012-08-07T19:57:15.683
> 
> 标签：r, package

当我使用 R CMD check pkg_name 检查我自己的 R 包时，我收到如下警告：

```
unexpected section header '\examples'
unexpected section header '\keyword' 
```

问题存在于 .Rd 文件中，我在其中为自己的数据编写了一些示例 R 代码（即 .Rd 文件用于 .RDdata 文件，而不用于 .R 函数文件）。我在想我们可以在`{}`以下之间编写示例代码（“...”）：

```
\example{
...
} 
```

不幸的是，它无法通过包裹检查程序...在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-10-15T00:14:35.370

我曾经在使用百分比符号 ( `%`) 时遇到过这个问题。我试图为置信区间参数编写文档。然后我意识到我需要用反斜杠转义符号来解决错误（就像在 LaTeX 中一样）。因此，我替换`%`为`\%`. 这修复了错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T04:04:51.353

.Rd 文件中的 { } 不匹配会导致问题。很难检测到，请确保在执行 R CMD 检查 pkg_name 之前已匹配对。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-18T18:53:02.167

既然 roxygen2 （幸运地）[支持 markdown](https://cran.r-project.org/web/packages/roxygen2/vignettes/markdown.html) ，这个错误消息可能会得到更多的点击。如果从旧的 LaTeX 样式文件转换，某些 LaTeX 合法语法可能仍会通过手动转换隐藏。

从 'wo​​rd' 转换为 'word' 解决了我的 Rd 解析错误（*即*，将前导反引号更改为常规引号）。

# javascript - Javascript：decodeURIComponent 拒绝工作

> ID：11853145
> 
> 赞同：0
> 
> 时间：2012-08-07T19:57:22.237
> 
> 标签：javascript, urldecode

我得到了这个人。他将字符串解码为可读字符串。

```
decodeURIComponent("Invalid Ticker Name \u0027t\u0027 at line: 3")
"Invalid Ticker Name 't' at line: 3" 
```

现在看看这个。它告诉我们这个字符串（数组项）的来源实际上是一个字符串。

```
typeof decodeURIComponent(errorsArr[i])
"string" 
```

但是当我尝试解码数组项时，它就不起作用了。

```
decodeURIComponent(errorsArr[i])
"Invalid Ticker Name \u0027t\u0027 at line: 3" 
```

该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:04:29.290

我知道它是什么。您的字符串中有一个文字`\u0027`。您可以在浏览器中验证此行为：

```
javascript:alert("\u0027");alert("\\u0027"); 
```

当您将其输入为：

```
Invalid Ticker Name \u0027t\u0027 at line: 3 
```

它正在替换 unicode 字符。为什么不能用`%27`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T15:49:23.953

问题已解决。

正如代码中所写

```
// If the document was sent as 'application/javascript' or
// 'text/javascript', then the browser wraps the text in a <pre>
// tag and performs html encoding on the contents.  In this case,
// we need to pull the original text content from the text node's
// nodeValue property to retrieve the unmangled content.
// Note that IE6 only understands text/html 
```

我已经开始将文件作为 html/text 提供，这解决了问题。

# sql - 组合选择语句

> ID：11853147
> 
> 赞同：0
> 
> 时间：2012-08-07T19:57:24.403
> 
> 标签：sql, select

除了每个活动的平均“分数”和每个活动的计数之外，我有三个选择声明提供参加特定活动的成员数量 - 医疗保健、宗教和体育。

每个事件的计数会有所不同。

每个查询单独工作，但我想将它们组合成一个查询。

我怎么做？

```
 (select sum(case when Healthcare ='1' then 1 else 0 end)  as [Healthcare_never],
 sum(case when Healthcare ='2' then 1 else 0 end)  as [Healthcare_not often],
 sum(case when Healthcare ='3' then 1 else 0 end)  as [Healthcare_average],
 sum(case when Healthcare ='4' then 1 else 0 end)  as [Healthcare_often],
 sum(case when Healthcare ='5' then 1 else 0 end)  as [Healthcare_very often]
 ,avg(Cast(Healthcare as float)) as Average
 ,count(Healthcare) as N_Healthcare
 from Member 
 where Healthcare > '0' )

 (select
  sum(case when Religious ='1' then 1 else 0 end)  as [Religious_never],
  sum(case when Religious ='2' then 1 else 0 end)  as [Religious_not often],
  sum(case when Religious ='3' then 1 else 0 end)  as [Religious_average],
  sum(case when Religious ='4' then 1 else 0 end)  as [Religious_often],
  sum(case when Religious ='5' then 1 else 0 end)  as [Religious_very often],
  Avg(cast(Religious as float)) as Average
  ,count(Religious) as N_Religious
  from Member 
  where Religious > '0' )

 (select
 sum(case when Sport ='1' then 1 else 0 end)  as [Sport_never],
 sum(case when Sport ='2' then 1 else 0 end)  as [Sport_not often],
 sum(case when Sport ='3' then 1 else 0 end)  as [Sport_average],
 sum(case when Sport ='4' then 1 else 0 end)  as [Sport_often],
 sum(case when Sport ='5' then 1 else 0 end)  as [Sport_very often],
 Avg(cast(Sport as float)) as Average
 ,count(Sport) as N_Sport
 from Member 
 where Sport > '0' ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:02:08.483

试试这个

```
select 
sum(case when Healthcare ='1' then 1 else 0 end)  as [Healthcare_never],
sum(case when Healthcare ='2' then 1 else 0 end)  as [Healthcare_not often],
sum(case when Healthcare ='3' then 1 else 0 end)  as [Healthcare_average],
sum(case when Healthcare ='4' then 1 else 0 end)  as [Healthcare_often],
sum(case when Healthcare ='5' then 1 else 0 end)  as [Healthcare_very often],
avg(Cast((case when Healthcare > 0 Then Healthcare Else Null end) as float)) as Healthcare_Average,
count(case when Healthcare > 0 Then Healthcare Else Null end) as N_Healthcare,

sum(case when Religious ='1' then 1 else 0 end)  as [Religious_never],
sum(case when Religious ='2' then 1 else 0 end)  as [Religious_not often],
sum(case when Religious ='3' then 1 else 0 end)  as [Religious_average],
sum(case when Religious ='4' then 1 else 0 end)  as [Religious_often],
sum(case when Religious ='5' then 1 else 0 end)  as [Religious_very often],
Avg(cast((case when Religious > 0 Then Religious Else Null end) as float)) as Religious_Average,
count(case when Religious > 0 Then Religious Else Null end) as N_Religious,

sum(case when Sport ='1' then 1 else 0 end)  as [Sport_never],
sum(case when Sport ='2' then 1 else 0 end)  as [Sport_not often],
sum(case when Sport ='3' then 1 else 0 end)  as [Sport_average],
sum(case when Sport ='4' then 1 else 0 end)  as [Sport_often],
sum(case when Sport ='5' then 1 else 0 end)  as [Sport_very often],
Avg(cast((case when Sport > 0 Then Sport Else Null end) as float)) as Sport_Average,
count(case when Sport > 0 Then Sport Else Null end) as N_Sport

from Member 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T20:04:15.530

只需将 UNION ALL 放在 SELECT 语句之间。但是您可能需要添加另一列来指示它来自哪个表。并且列标题需要相同。例如：

```
 select 'Healthcare' as source
, sum(case when Healthcare ='1' then 1 else 0 end)  as [never], 
 sum(case when Healthcare ='2' then 1 else 0 end)  as [not often], 
 sum(case when Healthcare ='3' then 1 else 0 end)  as [average], 
 sum(case when Healthcare ='4' then 1 else 0 end)  as [often], 
 sum(case when Healthcare ='5' then 1 else 0 end)  as [very often] 
 ,avg(Cast(Healthcare as float)) as Average 
 ,count(Healthcare) as N_Healthcare 
 from Member  
 where Healthcare > '0' 
UNION ALL 
```

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:18:28.327

问题是 where 语句为每个事件提供了不正确的计数。医疗保健计数应为 54，运动 54 和其他 13 而不是全部计数为 55。

```
 select 
 sum(case when Healthcare ='1' then 1 else 0 end)  as [Healthcare_never],
 sum(case when Healthcare ='2' then 1 else 0 end)  as [Healthcare_not often],
 sum(case when Healthcare ='3' then 1 else 0 end)  as [Healthcare_average],
 sum(case when Healthcare ='4' then 1 else 0 end)  as [Healthcare_often],
 sum(case when Healthcare ='5' then 1 else 0 end)  as [Healthcare_very often],
 avg(Cast(Healthcare as float)) as Average,
 count(Healthcare) as N_Healthcare,

 sum(case when Religious ='1' then 1 else 0 end)  as [Religious_never],
 sum(case when Religious ='2' then 1 else 0 end)  as [Religious_not often],
 sum(case when Religious ='3' then 1 else 0 end)  as [Religious_average],
 sum(case when Religious ='4' then 1 else 0 end)  as [Religious_often],
 sum(case when Religious ='5' then 1 else 0 end)  as [Religious_very often],
 Avg(cast(Religious as float)) as Average,
 count(Religious) as N_Religious,

 sum(case when Sport ='1' then 1 else 0 end)  as [Sport_never],
 sum(case when Sport ='2' then 1 else 0 end)  as [Sport_not often],
 sum(case when Sport ='3' then 1 else 0 end)  as [Sport_average],
 sum(case when Sport ='4' then 1 else 0 end)  as [Sport_often],
 sum(case when Sport ='5' then 1 else 0 end)  as [Sport_very often],
 Avg(cast(Sport as float)) as Average,
 count(Sport) as N_Sport
 from contacts_cstm 
 where Sport > '0' or Religious > '0' or Healthcare >'0' 
```

# vba - VBA：在 Excel 中创建宏 - 编译错误 - '未定义子或函数'

> ID：11853149
> 
> 赞同：1
> 
> 时间：2012-08-07T19:57:33.023
> 
> 标签：vba, excel, compiler-errors, excel-2010

我有一个工作簿，上面有几张桌子。我想首先将工作表中的所有行聚合到主表中。我希望它是动态的，因此当我将一行添加到其他工作表之一时，它会将行添加到主表中。这是我的 Sub 的代码：

```
Public Sub AggregateIssues() 
    For pgNum = 1 To ActiveWorkbook.Sheets.Count
        If ActiveWorkbook.Sheets(pgNum).Name = "Main" Then

          currSheet = ActiveWorkbook.Sheets(pgNum) 'Get Sheet
          flag = True
          RowIndex = 0
          While currSheet.Tables(0).Rows(RowIndex).Cells(0).Text = Null Or currSheet.Tables(0).Rows(RowIndex).Cells(0).Text = ""

            Row = currSheet.Tables(0).Rows(RowIndex)
            ActiveWorkbook.Sheets("Main").Tables("MainTbl").Append (Row)
            RowIndex = RowIndex + 1
          Next
        End If
    Next pgNum
End Sub 
```

目前，我收到一个编译错误：`Sub or function is not defined`. 该错误是在子名称上引发的。这是定义。当然，它还没有定义。关于为什么会发生这种情况的任何想法？

注意：我相信错误实际上是由`continue`关键字引起的。VBA中有`continue`关键字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:22:51.570

`continue`在 VBA 中不使用 - 您可以将其包裹`if`在主循环中的代码周围。

`break`也不是 VBA 语句 - 您可能想要`Exit`代替它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:24:25.080

关于您的 Update1，

问题出在您的 While 循环中。

正确的格式是这样的：

```
Do while [boolean expression]
'do something
Loop 
```

更具体地添加`Do`之前`While`，并将您的第一个更改`Next`为`Loop`

从技术上讲，您也可以出于怀旧原因使用我喜欢的这种结构：

```
While [boolean expression]
'do something
Wend 
```

但您应该使用[Do...Loop 结构（单击链接查看示例）](http://www.vbtutor.net/vba/vba5.htm)

编辑：为了澄清，不要在您的实际代码中包含 [] 。:-)

# sql - 根据列值更改 where 子句条件

> ID：11853153
> 
> 赞同：0
> 
> 时间：2012-08-07T19:57:48.040
> 
> 标签：sql, case, where

我试图弄清楚如何在 where 子句中使用 case 语句，以便根据产品类型列选择特定条件。where 子句的第一部分对这两种情况都是通用的。如果产品类型是 STD，我需要检查 EntryDate 是否在当月的第一天和昨天之间。如果产品是 LTD，那么我需要检查 EntryDate 是否在昨天和 7 天前之间。

```
DECLARE @firstDayOfCurrentMonth datetime
SET @firstDayOfCurrentMonth = CAST(CAST(YEAR(GETDATE()) AS VARCHAR(4)) + '/' +  CAST(MONTH(GETDATE()) AS VARCHAR(2)) + '/01' AS DATETIME)

SELECT DCMNumber, COUNT(*) AS PriorDenied
FROM  cauAssignedClaim 
WHERE RecordType = 'A' AND [Status] IS NULL AND
CASE WHEN Product = 'LTD' THEN EntryDate BETWEEN @firstDayOfCurrentMonth AND GETDATE()-1 
CASE WHEN Product = 'STD' THEN  EntryDate BETWEEN DATEADD(Day, -7, GETDATE()-1) AND GETDATE()-1 
END
GROUP BY [Status],  DCMNumber 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:02:33.513

此处无需使用`CASE`语句。您可以在您的上添加附加条款`WHERE`：

```
DECLARE @firstDayOfCurrentMonth datetime
SET @firstDayOfCurrentMonth = CAST(CAST(YEAR(GETDATE()) AS VARCHAR(4)) + '/' +  CAST(MONTH(GETDATE()) AS VARCHAR(2)) + '/01' AS DATETIME)

SELECT DCMNumber, COUNT(*) AS PriorDenied
FROM  cauAssignedClaim 
WHERE RecordType = 'A' 
    AND [Status] IS NULL 
    AND 
    ( 
        (
            Product = 'LTD' 
            AND EntryDate BETWEEN @firstDayOfCurrentMonth AND GETDATE()-1 
        )
        OR
        (
            Product = 'STD'
            AND EntryDate BETWEEN DATEADD(Day, -7, GETDATE()-1) AND GETDATE()-1 
        )
    )

GROUP BY [Status],  DCMNumber 
```

仅供参考，这里有一个更短的方法来获取当月的第一天：

```
SELECT DATEADD(m,DATEDIFF(m,0,getdate()),0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:02:45.297

你要

```
WHERE EntryDate BETWEEN 
  CASE WHEN Product = 'LTD' THEN @FirstDatetc 
       ELSE DateAdd(blah)
  END 
AND GetDate()-1 
```

这是假设这是有效的语法，因为我从未尝试过:)

我更喜欢这个，因为它非常简洁 - 如果你格式化它，我想它也很可读

# tinymce - 在 TinyMCE 编辑器中将自定义参数发送到图像管理器

> ID：11853155
> 
> 赞同：1
> 
> 时间：2012-08-07T19:57:53.187
> 
> 标签：tinymce, url-parameters, mcimagemanager

我需要根据各种场景设置图片管理器的路径和根路径。

同一用户可以使用图像管理器从不同页面上传图像。我想从客户端发送一个参数来指示场景。例如，如果用户在主页使用编辑器，则发送 home；同样，如果在联系我们页面中使用，请发送联系方式。我所能做的就是在初始化期间在客户端设置根路径。例如，imagemanager_rootpath: "test"。但是我的路径是根据我发送的参数在服务器端计算的。有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T00:58:30.347

根据我对您的问题的了解，您有两种选择：

1：从服务器上的模板生成 Javascript（比如使用 Smarty 或等效的）并将正确的根路径插入到 TinyMCE 初始化代码中。

所以，在直接的 PHP 中，你可能会得到这样的结果：

```
<?php
$root_path = get_root_path();
?>

// Other javascript goes here

tinymceInstance = tinyMce.init({
    //parameters
    imagemanager_rootpath: "<?php echo $root_path ?>"
}); 
```

2：生成一个 Javascript 参数文件，其中包含您希望 Javascript 具有的所有参数，然后在初始化 tinyMCE 实例时使用它。

参数文件：

```
<?php
echo "window.serverParameters = ".json_encode(array("imageRoot" => get_root_path()));
?> 
```

HTML：

```
<html>
    <head>
        <script src="serverParameters.php" type="text/javascript" />
    </head>
</html> 
```

Javascript：

```
tinymceInstance = tinyMce.init({
    //parameters
    imagemanager_rootpath: window.serverParameters.imageRoot
}); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:23:29.047

目前，我找不到更好的方法来做到这一点。我最终创建了一个辅助方法，该方法接受一个指示资源类型的参数并确定根路径并设置 Session["imagemanager.filesystem.rootpath"] = "someRootPath"。在使用编辑器返回视图的控制器中，我调用了这个辅助方法。这几乎没有缺点。一是无论您是否使用图像管理器，都会预先调用辅助方法。我最初的方法是在单击图像管理器后设置路径。因此，如果视图中的编辑器不使用图像管理器，请不要调用辅助方法。这样做的第二个缺点是，如果您在同一个视图上有多个编辑器，但他们需要上传到不同的位置；这是不可能的。所有编辑器都使用会话中设置的相同根路径。同样，更好的方法是从每个编辑器向服务器发送一个值并设置根路径。使用多个位置的一种方法是获取所有位置并使用 magemanager_rootpath:“someRootPath”在 tinyMce 编辑器的 init() 中设置它们。但是，这样做的一个优点是，如果您的视图使用多个编辑器并且它们都使用该视图中的相同位置，则辅助方法仅被调用一次，而不是使用原始方法多次调用。因此，我将 Skurrier 的答案标记为正确，但如果您找到更好的方法，请发表评论。

# php - MySQL：从最新行的列中检索值

> ID：11853156
> 
> 赞同：0
> 
> 时间：2012-08-07T19:57:53.623
> 
> 标签：php, mysql, yii

我正在尝试从表中的最新行（我有一个`a.i`id 列）中检索特定列的值。

为了实现这一点，需要编写什么查询？

到目前为止，我已经...

```
$lots = Yii::app()->db->createCommand()
                  ->select('MAX(id) as num_lots')
                  ->from('my_table')
                  ->queryRow(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:58:39.747

```
SELECT column_name FROM table_name ORDER BY id DESC LIMIT 1 
```

`id`即从按降序排序的表的第一行中获取值。

* * *

编辑：

至于您编辑的代码 -`MAX(id) as num_lots`在`SELECT`子句中从列中选择最大值，`id`但这可能不是您想要的。

在 Yii 中你可能会使用这样的东西：

```
$lots = Yii::app()->db->createCommand()
  ->select('column_name')
  ->from('my_table')
  ->order('id desc')
  ->limit(1)
  ->queryRow(); 
```

# radio-button - 网页单选按钮

> ID：11853164
> 
> 赞同：0
> 
> 时间：2012-08-07T19:58:26.200
> 
> 标签：radio-button, web.py

我正在使用 webpy 创建一个网页，我需要使用单选按钮来执行一些条件，我找不到任何关于此的文档，只是想知道如何使用 fow 控件，例如：`if radio1.checked() : do stuff`

任何帮助都会很棒我是 dweb 编程的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:44:50.087

你会做这样的事情：

```
radio_button = form.Form( 
    form.Radio('details', ['option1', 'option2', 'option3', 'option4']),
    ) 
```

此外，您可以让 webpy 呈现一个 html 页面并将单选按钮 html 标记放入该页面。如果您是编程新手，我建议您不要尝试学习如何使用 webpy 的模板系统。对于初学者来说太抽象了。而是使用 webpy 为您的页面提供服务并定期编写您的页面。然后当你觉得舒服的时候，你应该考虑一个很好的独立模板引擎，比如 Jinja2。

这也在这里得到了回答：

[如何在 python web.py 中使用单选按钮](https://stackoverflow.com/questions/12816464/how-to-use-radio-buttons-in-python-web-py)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T22:28:06.167

我很确定 Paxwell 误读了你想做的事情。我有我的单选按钮通过 ajax 在一个大表单内发送。

html看起来像这样

```
<form> 
    ... form stuff...
    <div class="control-group">         
      <div class="controls">    
         <label class="radio">
          <input type="radio" name="radioId" value="option1" checked>
               Reporter 1
          </label>
         <label class="radio">
           <input type="radio"  name="radioId" value="option2" 
              Reporter 2
         </label>  
        ..
        </div>
     </div>
 </form> 
```

我的 main.py：

```
def POST(self):
form = web.input() 
```

经过实验，单选按钮将在表单内部！我用**相同的名称**命名了我的单选按钮。当您选择：时 `form.radio_id`，它只会返回选中的值。在这种情况下，你会得到 `option1`

```
radiobutton= "%s" % (form.radioId)
if radiobutton == "option1":
    print "hooray!" 
```

# mysql - 获取 osCommerce 中没有子类别或子类别的父类别

> ID：11853165
> 
> 赞同：0
> 
> 时间：2012-08-07T19:58:34.157
> 
> 标签：mysql, sql, oscommerce

在我的 osCommerce 商店中，我想获取没有子类别或子类别的类别的 parent_id。

我在我的代码中使用了以下内容：

```
$categories_query = tep_db_query("select c.categories_id, cd.categories_name 
    from " . TABLE_CATEGORIES . " c, " . TABLE_CATEGORIES_DESCRIPTION . " cd 
    where c.parent_id = '$parent_id' and 
    c.categories_id = cd.categories_id 
    order by sort_order, cd.categories_name"); 
```

当填写常量时，上面的内容转化为：

```
select c.categories_id, cd.categories_name 
    from categories c, categories_description cd 
    where c.parent_id = '$parent_id' and 
    c.categories_id = cd.categories_id 
    order by sort_order, cd.categories_name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:53:45.313

你可以这样做：

```
SELECT c.categories_id, cd.categories_name, c.parent_id 
  FROM categories c, categories_description cd 
  WHERE c.categories_id=cd.categories_id 
  AND c.categories_id NOT IN (SELECT DISTINCT c2.parent_id FROM categories c2)
  ORDER BY c.sort_order, cd.categories_name 
```

或者你可以这样做：

```
SELECT c.categories_id, cd.categories_name, c.parent_id 
  FROM categories c 
  LEFT JOIN categories_description cd 
  ON c.categories_id=cd.categories_id
  WHERE c.categories_id NOT IN (SELECT DISTINCT c2.parent_id FROM categories c2)
  ORDER BY c.sort_order, cd.categories_name 
```

但你真正想知道的是这一行：

```
 c.categories_id NOT IN (SELECT DISTINCT c2.parent_id FROM categories c2) 
```

由于该列与[您正在查找](https://stackoverflow.com/questions/6752776/select-parent-row-only-if-it-has-no-children "仅当父行没有子行时才选择它")`parent_id`的表在同一个表中，而不是在另一个表中，因此您需要自行查找表并通过另一个别名引用它。

这部分 SQL 将返回被引用为父类别的所有`categories_id`（实际上在表中）：`parents_id`

```
SELECT DISTINCT c2.parent_id FROM categories c2 
```

现在，当您将其放入[`NOT IN`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_not-in "MySQL - 比较函数和运算符")比较中时，您会看到下面没有任何子类别的行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T20:30:34.233

在不知道您的表格布局的情况下，需要进行一些猜测才能回答您的问题。但是，我相信您需要这样的查询：

```
 SELECT c.parent_id
       FROM TABLE_CATEGORIES c
  LEFT JOIN TABLE_CATEGORIES_DESCRIPTION cd ON c.categories_id = cd.categories_id
      WHERE cd.categories_id IS NULL 
```

请注意，此`LEFT JOIN ... WHERE ... IS NULL`模式匹配第一个表中的行，这些行在第二个表中没有匹配项。

# python - 在 sqlite 中插入 int 时不支持参数

> ID：11853167
> 
> 赞同：77
> 
> 时间：2012-08-07T19:58:42.457
> 
> 标签：python, datetime, sqlite

我一直在四处走动，在 SQLite3 中存储日期和时间，目的是稍后使用比较检索记录，例如`SELECT * WHERE date1 < date2`

我最终放弃了尝试存储 datetime.datetime 对象并决定改用 UNIX 时间戳，因为它们只是一个 int 且易于操作，但我仍然遇到错误。

```
import sqlite3 as lite
import datetime
import time

conn = lite.connect('dispatcher.db')
cur = conn.cursor()
query = "create table if not exists new_test (curent_dt)"
cur.execute(query)
conn.commit()
now = datetime.datetime.now() - datetime.timedelta(minutes=60)
temp = int(time.mktime(now.timetuple()))
cur.execute('insert into new_test (curent_dt) values (? )', (temp))
conn.commit()
conn.close() 
```

返回以下错误：

> cur.execute('insert into new_test (curent_dt) values (?)', (temp)) ValueError: parameters are unsupported type

在进一步调查问题后，我发现您必须使用尾随逗号来创建单个元素元组，例如`(temp,)`

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2014-01-13T01:19:47.513

请注意下面“temp”之后添加的逗号：

```
cur.execute('insert into new_test (curent_dt) values (?)', (temp,)) 
```

发生这种情况的原因是它`(temp)`是一个整数，但`(temp,)`它是一个长度为 1 的元组，其中包含`temp`.

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-07-22T07:24:20.090

用这个改变那条线

```
cur.execute('插入 new_test (curent_dt) 值 (?)',str(temp))
```

# python - 使 Python 脚本与 xargs 一起工作

> ID：11853169
> 
> 赞同：5
> 
> 时间：2012-08-07T19:58:48.313
> 
> 标签：python, xargs

使我的 Python 脚本与“xargs”一起工作的过程是什么？例如，我希望以下命令遍历文本文件的每一行，并执行任意命令：

```
cat servers.txt | ./hardware.py -m 
```

本质上希望每一行都传递给 hardware.py 脚本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T20:07:44.063

要使您的命令与您一起工作，`xargs`您只需要它们接受参数。Python 中的参数在`sys.argv`列表中。通过这种方式，您可以执行以下操作：

```
find . -type f -name '*.txt' -print0 | xargs -0 ./myscript.py 
```

这可能相当于

```
./myscript.py ./foo.txt ./biz/foobar.txt ./baz/yougettheidea.txt 
```

为了使您的命令与标准输入一起工作，您还可以使用该`sys`模块，这次使用`sys.stdin`，您可以将其视为文件。这更像是您给出的示例：

```
./myscript.py < somefile.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T20:09:18.290

你混淆了两个问题。

首先，您的应用程序可以接收来自标准输入的输入。这与`xargs`. 在您的示例中，所有`hardware.py`需要做的就是`sys.stdin`作为输入文件读取，例如：

```
if __name__=='__main__':
    for line in sys.stdin:
         do_something(line) 
```

如果您希望 hardware.py 产生其他程序可以使用的输出，只需写入`sys.stdout`

其次，您的应用程序可以接收来自参数的输入。这是您将使用`xargs`. 例如：

xargs ./hardware.py < servers.txt # 同 cat servers.txt | xargs ./hardware.py

这会将 servers.txt 的每个“单词”（不是每一*行*）作为参数传递给 hardware.py （可能一次有多个参数）。这将与运行相同`hardware.py word1 word2 word3 word4 ...`

Python 将命令行参数存储在`sys.arvg`数组中。`sys.argv[0]`将是命令名称，并且`sys.argv[1:]`将是所有命令行参数。但是，您通常最好使用[`argparse`](http://docs.python.org/library/argparse.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T15:46:39.420

目前还不太清楚你想做什么。如果`./hardware.py -m`从标准输入中读取一行，您可以使用 GNU Parallel 来分发这些行：

```
cat servers.txt | parallel --pipe -N1 ./hardware.py -m 
```

如果`./hardware.py -m`将单个服务器作为参数，您可以执行以下操作：

```
cat servers.txt | parallel ./hardware.py -m 
```

您可以通过以下方式安装 GNU Parallel：

```
wget http://git.savannah.gnu.org/cgit/parallel.git/plain/src/parallel
chmod 755 parallel
cp parallel sem 
```

观看 GNU Parallel 的介绍视频以了解更多信息： [https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

# sql - 这是使用存储过程执行 CRUD 的正确方法吗？

> ID：11853171
> 
> 赞同：1
> 
> 时间：2012-08-07T19:58:48.960
> 
> 标签：sql, stored-procedures

我有一个任务存档一些数据库表。为了简化一切，我基本上必须执行以下操作：

1.  根据某些条件从表 1 中检索一些行
2.  将这些行插入备份数据库中的表中
3.  从表 1 中删除这些行

我必须在几个表上执行这些操作。

本文告诉我[根据](http://www.databasejournal.com/features/mssql/article.php/10894_3082201_2/Implementing-CRUD-Operations-Using-Stored-Procedures-Part-1.htm)不同的 CRUD 操作（每个 CRUD 一个）创建单独的 SP。可以看到，我需要执行的步骤是`READ`、`UPDATE`和`DELETE`。然后根据这篇文章，我的每张桌子都需要 3 SP。所以如果我有 10 个表需要备份，那么我需要写 30 个 SP？

有人可以告诉我这是否是正确的做法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:09:22.647

代表我的学习曲线：当我开始使用数据库时，我并不太关心我现在所做的事情。最简单且更“合乎逻辑”的方法是在一个 SP 中执行 CRUD，因为根据您的场景，事情很小。但是当涉及到可扩展性时，您确实需要将它们分开。开始构建您的程序是一个好习惯。要指出的另一件事是，您可以应用到数据库的顺序越多越好。

关于必须 CRUD 10 表。不，您不需要 30 个 SP（也许您会这样做，但这种情况不太可能发生）。您可以使用变量、参数和其他内容，以便使用参数（用于表名等）对多个表执行 READ。与其他 CRUD 的操作相同。

所以，简而言之：也许你最终会拥有一个大而复杂的 SP 来读取表。但就是这样，你努力一次，然后你一次又一次地重复使用。（这是一件好事；如果您不了解 OOP，它将在未来帮助/拯救您）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:18:36.993

考虑一个存储过程来概述您想要执行的某种功能。您正在尝试将数据存档在表中，因此我将调用存储的 proc dbo.Archive_Table1。“Archive_”是表示过程操作的前缀，后缀是您要操作的对象（或多个对象）。

举个简单的例子，假设您要将数据归档在几个表中，这些表都与汽车数据相关。dbo.Make、dbo.Model、dbo.Sales 等。您可以创建一个名为 dbo.Archive_Cars 的存储过程，它作用于所有这些表。它足够冗长，可以告诉任何看到它的人您正在尝试做什么。

在你的新存储过程中，随意做任何你想做的事情。一起进行插入和删除！不必处理 30 个 SP，这将使您的生活轻松一千倍。当然，稍后您可能最终会创建一些其他 CRUD SP，但请根据需要进行。

您在问题中的大纲是完美的；只需将其转换为代码即可。

# wcf - WCF 数据服务以及如何将存储过程用于 gridview？

> ID：11853180
> 
> 赞同：1
> 
> 时间：2012-08-07T19:59:31.423
> 
> 标签：wcf, stored-procedures, execute

我正在使用 WCF 数据服务。我想使用存储过程，以便其结果在 GridView 中。我找到了使用 Execute 方法的示例，例如

[http://www.codegain.com/articles/wcf/miscellaneous/how-to-use-stored-procedure-in-wcf-data-service.aspx](http://www.codegain.com/articles/wcf/miscellaneous/how-to-use-stored-procedure-in-wcf-data-service.aspx)

但是在我的情况下，编译器不识别执行方法，在 Intelisens 中根本不识别。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:38:54.357

你确定你已经导入了所需的命名空间吗？我刚刚检查过，下面的代码编译得很好。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
//DataServiceContext
using System.Data.Services;
using System.Data.Services.Client;

namespace WebApplication1
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        public class StudentGrade
        {
            //ClassDefinition
        }

        protected void Page_Load(object sender, EventArgs e)
        {
            DataServiceContext context = new DataServiceContext(new Uri("http://URI"));

            List<StudentGrade> lstStudentsGrade = context.Execute<StudentGrade>
                   (new Uri("http://URI")).ToList();
        }
    }
} 
```

在尝试使用 DataServiceContext 类和 .Execute<>() 方法之前，请`System.Data.Services`确保您已导入。`System.Data.Services.Client`

# php - 检查 PHP 中的字符串是否为有效正则表达式的最有效方法

> ID：11853188
> 
> 赞同：2
> 
> 时间：2012-08-07T20:00:11.457
> 
> 标签：php, regex, validation

> **可能重复：**
> [是否有正则表达式来检测有效的正则表达式？](https://stackoverflow.com/questions/172303/is-there-a-regular-expression-to-detect-a-valid-regular-expression)
> [测试字符串是否为正则表达式](https://stackoverflow.com/questions/10778318/test-if-a-string-is-regex)

给定一个字符串，我有一个案例，我希望能够检查它是否是一个正则表达式。到目前为止，我最好的方法是：

```
<?php

function validate_regex($str){
    return preg_match($str, "anything here") !== false;
} 
```

有没有更好的方法来检查这个？

# iphone - iPhone 导航控制器应用程序

> ID：11853190
> 
> 赞同：0
> 
> 时间：2012-08-07T20:00:26.123
> 
> 标签：iphone, uiviewcontroller, uinavigationcontroller

我正在按照[这里](http://www.edumobile.org/iphone/iphone-programming-tutorials/navigationcontroller-application-in-iphone/)的教程使用 UINavigationController 在 ViewController 之间切换。如果我下载代码并按照教程操作，它可以正常工作，但当我尝试将其应用于不同的应用程序时，我会遇到以下混淆/问题。当我在“FirstViewController”中时，`[self navigationController]`如果我的 viewController 类中没有任何 navigationController，我该如何访问？在此示例中，我无法在 FirstViewController 中找出 navigationController 的来源或来源。有人可以解释一下这是如何工作的吗？

**注意：整个项目的完整源代码也可以在我上面链接的页面上找到。

这是让我感到困惑的一行：

```
[[self navigationController] pushViewController:secondViewController   animated:YES]; 
```

这是 viewController 的完整代码：

。H

```
#import <UIKit/UIKit.h>
@class SecondViewController;

@interface FirstViewController : UIViewController {

    IBOutlet SecondViewController *secondViewController;
}

@property(nonatomic, retain) SecondViewController *secondViewController;

- (IBAction)PressMe:(id)sender;

@end 
```

.m

```
#import "FirstViewController.h"
#import "SecondViewController.h"

@implementation FirstViewController

@synthesize secondViewController;

- (void)viewDidLoad {
    [super viewDidLoad];
    self.title = @"First View";
}

- (IBAction)PressMe:(id)sender
{
    [[self navigationController] pushViewController:secondViewController animated:YES]; //This line
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:07:48.253

来自[Apple 的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)：

> 如果接收器或其祖先之一是导航控制器的子级，则此属性包含拥有的导航控制器。如果视图控制器未嵌入导航控制器，则此属性为零。

所以你不必声明导航控制器。如果当前视图控制器已加载到导航控制器上，那么您引用的行将为您提供当前导航控制器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:51:13.550

如果您使用的是 IB（如您在代码中所写），请右键单击该按钮，将其拖动到 SecondViewController，然后选择“Touch Up Inside”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:35:26.200

简单地说，你没有任何导航控制器，所以你不能用这个从视图切换到另一个

```
[[self navigationController] pushViewController:secondViewController   animated:YES]; 
```

在您的 FirstView 中创建导航控制器对象并使用它在视图之间和您的 PressMe 方法中移动：

```
SecondViewController *secondView = [[secondView alloc] initWithNibName:@"SecondViewController" bundle:nil];
        [self.navigationController pushViewController:secondView animated:YES];
[secondView release]; 
```

# vba - 如何使用 Excel VBA 2010 创建具有两个数据集的图表

> ID：11853197
> 
> 赞同：2
> 
> 时间：2012-08-07T20:00:56.960
> 
> 标签：vba, excel, excel-2010

这实际上是两个不同的问题。首先，我有一个包含三列数据的 Excel 表。我在 A、C 和 E 列中有 12 行数据。根据我一直在查找的内容，该程序应将 A 列分配给 x 轴，将 C 列和 D 列分配给 y 轴，同时还添加标签。

```
Sub ChartMaker()
    ActiveWorkbook.Charts.Add
    With ActiveWorkbook.ActiveChart
        .ChartType = xlXYScatterLines
        ActiveChart.SetSourceData Source:=Range("A1:A12,C1:C12,E1:E12")
        .Location xlLocationAsNewSheet
        .HasTitle = True
        .ChartTitle.Characters.Text = "CFL Over Time"
        .Axes(xlCategory, xlPrimary).HasTitle = True
        .Axes(xlCategory, xlPrimary).AxisTitle.Characters.Text = "Time (Days)"
        .Axes(xlValue, xlPrimary).HasTitle = True
        .Axes(xlValue, xlPrimary).AxisTitle.Characters.Text = "CFL"
        .Axes(xlCategory).HasMajorGridlines = True
        .Axes(xlCategory).HasMinorGridlines = False
        .Axes(xlValue).HasMajorGridlines = True
        .Axes(xlValue).HasMinorGridlines = False
        .HasLegend = False
    End With
End Sub 
```

我不断收到错误“对象变量或未设置块变量”。

这是我的第一个问题！

我的第二个问题是如何使用以下数据集创建图表，其中 y 轴上有两组数据，但它们共享一个 x 轴。

数据集一：

```
X     Y1

1    0.87
2    0.45
3    0.92
4    0.03
5    0.99
6    0.45
7    0.63
8    0.83
9    0.28
10   0.66 
```

数据集二：

```
X      Y2

0.3    2
4.5    3
6      6
7.2    1
7.8    6
8.3    1 
9.1    4
9.6    5
10     9
13     2 
```

有没有办法让这些在同一张图上？（当然使用 VBA）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:39:57.043

创建图表后

```
ActiveSheet.Shapes.AddChart.Select  
'this adds the chart and selects it in the same statement
ActiveChart.ChartType = xlXYScatter 
```

然后添加第一组点

```
ActiveChart.SeriesCollection.NewSeries
ActiveChart.SeriesCollection(1).Name = "=Sheet1!$C$1"
ActiveChart.SeriesCollection(1).XValues = "=Sheet1!$A$3:$A$12"
ActiveChart.SeriesCollection(1).Values = "=Sheet1!$C$3:$C$12" 
```

并使用相同的方法添加第二组

```
ActiveChart.SeriesCollection.NewSeries
ActiveChart.SeriesCollection(2).Name = "Sheet1!$E$1"
ActiveChart.SeriesCollection(2).XValues = "=Sheet1!$D$3:$D$12"
ActiveChart.SeriesCollection(2).Values = "=Sheet1!$E$3:$E$12" 
```

# javascript - 点击时的 Javascript 不适用于 setInterval

> ID：11853206
> 
> 赞同：0
> 
> 时间：2012-08-07T20:01:21.737
> 
> 标签：javascript, jquery, html, onclick

我有以下代码-

```
 <html>
<head>
<title>Rebound</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">

    function ShowRandom() {
        var $span = $(".random");
        var oldTop = 0;
        var oldLeft = 0;
        var leftPos = 10;
        var topPos = 10;
        var flag = true;

        $(".random").on("click", "#lion", function(event) {
                alert(event.target.id);
            }); 

        $span.fadeOut(500, function() {

            var maxLeft = $(window).width() - $span.width();
            var maxTop = $(window).height() - $span.height();

            oldTop = topPos;
            oldLeft = leftPos;

            leftPos = Math.floor(Math.random() * (maxLeft + 1));
            topPos = Math.floor(Math.random() * (maxTop + 1));          

            $span.css({ left: leftPos, top: topPos }).fadeIn(500);
        });
    };
    ShowRandom();
    setInterval(function(){         
        $('.random').append("<span class='lab'></span>");
        ShowRandom(); 
    }, 1500);
     $('.random').delegate('.lab', 'click', function() {
        $('.random').remove('.lab');
        alert('single event trigger');
    });

</script>
<style>
    span { 
        display: inline-block; 
        position: absolute;
    }
</style>
</head>
<body>
    <div id="container">
        <span class="random"><img src="lion.jpg" width="50px" height="50px" id="lion"></span>

    </div>
</body>
 </html> 
```

单击图像时，我只需要一个警报框。但我收到多个警报框。有办法解决吗？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:04:43.630

因为您在每个时间间隔都不断连接点击事件。

您添加的每个内部事件都不会覆盖前一个事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:08:56.563

尝试移动

```
$(".random").on("click", "#lion", function(event) {
     alert(event.target.id);
}); 
```

在 ShowRandom 函数之外。

前任：

```
function ShowRandom(){...};

$(function(){

   $(".random").on("click", "#lion", function(event) {
         alert(event.target.id);
    }); 

    ShowRandom();

    setInterval(function(){
        $('.random').append("<span class='lab'></span>");
        ShowRandom(); 
    }, 1500);

    ...

}); 
```

# c++ - char* 到 const wchar_t * 的转换

> ID：11853208
> 
> 赞同：6
> 
> 时间：2012-08-07T20:01:27.647
> 
> 标签：c++, pointers, char, wchar

我需要将字符指针转换为 w_char * 才能使用 ParseNetworkString()。我自己尝试过寻找解决方案，虽然我找到了一种解决方案，但有一个问题阻止了我使用它：

b1naryatr0phy 在另一篇文章中说：

```
std::wstring name( L"Steve Nash" );
const wchar_t* szName = name.c_str(); 
```

这几乎对我有用，除了我不能明确地传递字符串，因为它的值并不总是相同的，这意味着我不能把它放在引号中。如果我用函数调用替换参数，那么第一行会给我一个错误（例如：std::wstring name(LgetIpAddress()); 我试过 std::wstring name(L" " + getIpAddress() + " "); ，认为它只需要在 L 后加一个引号，但这也不起作用..有什么建议吗？

谢谢！:)

给能回答这个问题的人额外的荣誉！

链接到其他帖子：[我想将 std::string 转换为 const wchar_t *](https://stackoverflow.com/questions/246806/i-want-to-convert-stdstring-into-a-const-wchar-t)

PS对不起，只是为了澄清，getIpAddress返回一个字符指针

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:15:15.333

是什么类型的`getIpAddress()`？

这是一个片段，展示了如何将 a 转换`string`为 a `wstring`（使用标准 C++11，没有错误检查）：

```
wstring to_wstring(string const& str)
{
  size_t len = mbstowcs(nullptr, &str[0], 0);
  if (len == -1) // invalid source str, throw
  wstring wstr(len, 0);
  mbstowcs(&wstr[0], &str[0], wstr.size());
  return wstr;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T20:08:43.837

您只查看了其他答案的一部分。它继续解释你需要做一个[`MultiByteToWideChar`](http://msdn.microsoft.com/en-us/library/dd319072%28v=vs.85%29.aspx)从 8 位字符串转换为 16 位字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T20:15:30.857

这假设 wchar_t 在您的平台上使用 UTF-16（根据您提到的 ParseNetworkString()，我假设是 Windows）。它还假设 char* 使用 UTF-8 而不是传统编码，因为你真的不应该使用传统编码，即使在 Windows 上也是如此。

```
#include <codecvt>

int main() {
    std::wstring_convert<std::codecvt_utf8_utf16<wchar_t>,wchar_t> convert;

    std::wstring name = convert.from_bytes("Steve Nash");
    const wchar_t* szName = name.c_str();
} 
```

如果您使用的是遗留编码，那么您应该通过完全转移到 wchar_t API（假设您不关心可移植代码）或使用 UTF-8 作为您的内部 char* 编码来解决这个问题。如果您坚持使用遗留编码，那么您将需要使用其中一个处理转换它们的函数，例如`mbstowcs()`（它对语言环境敏感，这会带来很多新问题），或者使用`MultiByteToWideChar()`有一些类似问题但与 Windows 语言环境更好地融合。

# graphics - 凸多边形，图形算法

> ID：11853211
> 
> 赞同：1
> 
> 时间：2012-08-07T20:01:52.927
> 
> 标签：graphics, clipping, polygons, convex-polygon, planar-graph

问：为什么凸多边形被认为是设计图形算法的更好选择？

我的 A. 凸多边形是平面的，更容易剪裁。

我的回答有点简短，我不确定我的回答是否正确，请问其他人可以扩展或给我一个更好的答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:26:21.933

一个原因是凸多边形更容易三角剖分。另一个是更容易确定一个点是在凸多边形内部还是外部。这两项任务在图形中都很重要。

# vb.net - 这将如何使用 LINQ 或 func 委托来完成？

> ID：11853212
> 
> 赞同：1
> 
> 时间：2012-08-07T20:01:56.293
> 
> 标签：vb.net, linq, optimization, performance

下面的代码不能用 LINQ/func 委托完成（并且做得更好）吗？我对 LINQ/func 相当陌生。我正在遍历表单上的所有控件以查找所有 FlowLayoutPanel（它们嵌入选项卡和拆分容器中）并将控件索引信息保存到应用程序设置中，以便在加载时调用它。我的应用程序允许用户通过拖放重新定位他们的 GUI/控件。*注意，`ServicingLayout`是我自己的可序列化类，其中包含我需要恢复用户偏好的信息。

```
Private Sub SaveFlow(ByVal F As FlowLayoutPanel) Handles Me.FoundFlow
    For Each C As Control In F.Controls
        My.Settings.ServicingLayout.AddControl(F.Name, C.Name, F.Controls.GetChildIndex(C))
    Next
End Sub

Private Event FoundFlow(ByVal F As FlowLayoutPanel)

Private Sub SaveFlowLayouts(ByVal CC As Object)
    For Each C As Control In CC
        If TypeOf C Is FlowLayoutPanel Then RaiseEvent FoundFlow(C)
        If C.Controls.Count > 0 Then SaveFlowLayouts(C.Controls)
    Next
End Sub 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:38:28.483

Olivier 正确地建议 LINQ 有利于通过过滤器和应用转换等处理数据......它在其他事情（如递归、多分支逻辑）方面做得不好。

我有点能够在 LINQ 中做到这一点，但它很难看。

但是，我建议您至少窃取一个 LINQ 功能...您可以使用此行轻松过滤`ControlCollection`for `FlowLayoutPanel`（作为奖励，它已经为您强类型化了！）

```
Dim flowLayoutPanels = Me.Controls.OfType(Of FlowLayoutPanel) 
```

事不宜迟……丑陋的LINQ。

```
Private Sub SaveWithLinq(ByVal CC As Control.ControlCollection)
  CC.OfType(Of FlowLayoutPanel).ToList.ForEach(
    Sub(f)
      f.Controls.Cast(Of Control).ToList.ForEach(
        Sub(c)
          My.Settings.ServicingLayout.AddControl(f.Name, c.Name,             
                                                 f.Controls.GetChildIndex(c))
        End Sub)

      If f.Controls.Count > 0 Then
        SaveWithLinq(f.Controls)
      End If
    End Sub)
End Sub 
```

丑陋的部分原因在于 Control.ControlCollection 不是强类型的（它实现`IEnumerable`而不是`IEnumerable(Of T)`，所以我们必须告诉 LINQ 该集合中对象的类型（[更多细节在这里](https://stackoverflow.com/a/2248078/945456)）。

# android - 如何让用户使用触摸事件在android中的谷歌地图上画一个圆圈？

> ID：11853213
> 
> 赞同：1
> 
> 时间：2012-08-07T20:02:03.067
> 
> 标签：android, google-maps, android-widget, android-mapview, android-ui

我一直在开发一个 android 应用程序，我需要从用户那里获取半径作为输入。我一直在寻找一种方法（没有运气）让用户在 goolge 地图上画一个圆圈（也可能是一个多边形），就像这个应用程序在 ipad 上所做的那样

[http://itunes.apple.com/us/app/realtor.com-real-estate-search/id336698281?mt=8](http://itunes.apple.com/us/app/realtor.com-real-estate-search/id336698281?mt=8)

并以某种方式找到以圆或多边形为界的坐标。

有没有办法使用触摸事件在 android 上的谷歌地图上绘图？如果是，那么我如何获得多边形内的所有点？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:20:21.007

您可以将其`MapView`放入 a 中`FrameLayout`，并通过将该 View 放在同一个 FrameLayout 中来将其与另一个 View 叠加。这个其他视图可以捕获触摸事件，您可以将绘图代码放在该层上。

# c# - /* ... */ 的正则表达式

> ID：11853219
> 
> 赞同：2
> 
> 时间：2012-08-07T20:02:16.700
> 
> 标签：c#, regex

我想`"/* anytext here */"`用空格替换所有出现的 （`anytext here`可能是不同类型的文本。）我想要做的是用空格替换所有评论。

我创建了一个正则表达式：

```
Regex regex = new Regex(@"/\*.*\*/"); 
```

...但它不考虑多种`/* ... */`模式的存在。例如，这个字符串：

```
"she /*sells*/ sea shells /*by the*/ sea shore" 
```

...变成：

```
"she   sea shore" 
```

...而我想要的是：

```
"she   sea shells   sea shore" 
```

有人可以帮助正确的正则表达式吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T20:05:45.057

使用*惰性*量词 ( `.*?`) 而不是*贪心*量词( `.*`)。顺便说一句，您的文字`*`字符需要转义`\*`：

```
Regex regex = new Regex(@"/\*.*?\*/"); 
```

惰性量词尝试*尽可能少*地匹配（= 到 first `*/`），而贪婪量词*尽可能多地*匹配（= 到 last `*/`）。更多详细信息可以在以下 MSDN 页面中找到：

*   [正则表达式：贪婪和惰性量词](http://msdn.microsoft.com/en-us/library/3206d374.aspx#Greedy)

# iphone - 如何在不影响现有用户数据的情况下发布更新的 Core Data 架构？

> ID：11853234
> 
> 赞同：0
> 
> 时间：2012-08-07T20:03:02.857
> 
> 标签：iphone, core-data

我即将发布一个严重依赖核心数据使用的应用程序。我是否认为对核心数据结构所做的任何更改都会导致用户丢失所有保存的数据（更新应用程序时）？

什么是确保不会发生这种情况的好方法？是否适合在我的数据中创建额外的字段 - 只是额外的 NSStrings - 以便它们可以使用，我将来是否需要额外的字段？

非常感谢所有的想法和意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:35:51.653

Core Data 包括模型版本的概念以及它们之间的迁移。在某些情况下，无需太多努力就可以完成，而在更复杂的情况下，可能需要程序员的工作。网上有一个参考：[Core Data Model Versioning and Data Migration Programming Guide](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html)

# php - 在循环PHP之外使用循环变量

> ID：11853237
> 
> 赞同：1
> 
> 时间：2012-08-07T20:03:07.703
> 
> 标签：php, loops

这可能很简单，但我无法弄清楚，我的搜索结果一片空白。

这是我的想法：

```
<?php

$var1 = 0.0;
for ($i=1;$i<10;$i++){
    $var1 = $var1 + $i;
}
echo $var1[4]; // This would give 0, I believe.
?> 
```

我希望我的示例清楚地说明了我要做什么，并且我确信有一个简单的解决方案，但不幸的是我找不到它。

谢谢，山姆

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T20:06:28.613

```
<?php
  $arr = array();
  for ($i = 1; $i < 10; $i++){
      $arr[$i - 1] = $i;
  }
  echo $arr[4]; // This would give 5.
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:07:14.150

恐怕您不会更改循环中 $i 的值，这将导致它永远持续下去。此外，您将 $var1 定义为一个数字，但随后您尝试访问它，就好像它是一个数组一样。

# sql-server-2008 - SELECT 在存储过程中使用时返回不同的结果

> ID：11853244
> 
> 赞同：0
> 
> 时间：2012-08-07T20:03:20.117
> 
> 标签：sql-server-2008, stored-procedures, sql-server-2000, sql-server-2012

我们开始从 SQL Server 2000 升级到 SQL Server 2008，然后是 SQL Server 2012（我们不能直接从 2000 升级到 2012）。

SQL Server 2000 中的存储过程之一将给定值所在的视图中的值设置`@ErrorMsg`为名称列。出于这些目的，假设我正在寻找视图中确实存在的名称。`sys.objects``name``zz_BICWS_PersonInfo_Search_1000000000000000000``sys.objects`

该过程在 SQL Server 2000 中有效，如果我在 SQL Server 2012 中运行以下代码，它将返回正确的名称，但在 SQL Server 2012 中的存储过程中不会。

```
declare @ErrorMsg varchar(1000)

set @ErrorMsg = 'xxxxxxx'

select @ErrorMsg = name
    from bic.dbo.sysobjects 
    Where name = 'zz_BICWS_PersonInfo_Search_10000000000000000000'

print 'test ' + @ErrorMsg 
```

这些相同的行存在于存储过程中，除了打印行，`@ErrorMsg`输出到调用该过程的应用程序。但它`xxxxxx`使用应用程序中的消息框返回初始值以显示返回值。

但是，如果我将 where 子句更改为

```
Where name Like ‘zz_BICWS_PersonInfo_Search_%’ 
```

（大约有 40 行与此匹配）然后我将获得找到的第一行的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:04:29.477

感谢另一个论坛，我收到了答案。我在这里为可能遇到相同问题的其他人发布它。

SQL 2000 和更高版本之间有一个重要的区别。在 SQL 2000 中，每个人都可以看到所有元数据，并且无法更改它。

在 SQL 2005 及更高版本中，只有在您有权限的情况下才能查看元数据。当您的 SELECT 语句由您的应用程序中的普通用户执行时，它不会命中任何行。但是，当您在以 sa 连接的 SSMS 中运行 SELECT 或至少使用 db_owner 权限时，一切正常。

如果您依赖可见的元数据，则需要将权限 VIEW DEFINITION 授予适当的用户。

将视图定义授予应用程序用户

将数据库中所有对象的 VIEW DEFINITION 授予角色 appusers。此语句授予对 dbo 模式中所有对象的权限：

将 SCHEMA::dbo 上的视图定义授予 appusers

如果您对对象具有 SELECT 或 EXECUTE 权限，则该对象隐含 VIEW DEFINITION 权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:51:17.677

我在其中找到问题时遇到了一些麻烦，但我认为问题在于您试图将 40 行塞入一个变量中。

尝试删除 @ErrorMsg 变量，然后运行它：

```
select name
from bic.dbo.sysobjects 
Where name = 'zz_BICWS_PersonInfo_Search_10000000000000000000' 
```

# android - 在Android中制作带有图像的RadioGroup单选按钮......如何？

> ID：11853245
> 
> 赞同：20
> 
> 时间：2012-08-07T20:03:30.407
> 
> 标签：android, radio-button, radio-group

是否可以在 Android 中制作单选按钮，其中有按钮的图像表示而不是常规按钮？我希望它看起来像这样：

![在此处输入图像描述](../Images/ce265d3487463ac25763e62a2d0843bd.png)

中间的青色代表选中的按钮。

我该怎么做？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-07T20:18:22.353

该类[`RadioButton`](http://developer.android.com/reference/android/widget/RadioButton.html)有一个[`buttonDrawable`](http://developer.android.com/reference/android/widget/CompoundButton.html#setButtonDrawable(int))成员，派生自[`CompoundButton`](http://developer.android.com/reference/android/widget/CompoundButton.html).

有多种方法可以更改此可绘制对象。

**来自java：**

```
myRadioButton.setButtonDrawable(resourceId or Drawable); 
```

**来自 xml：**

```
<RadioButton
    android:button="@drawable/yourdrawable" 
    ...
/> 
```

如果您只是希望选中/未选中状态看起来不同，那么

*   通过右键单击您的 res 文件夹来添加新的选择器 xml -> 新建 -> Android xml -> 在上方下拉列表中选择 Drawable -> 选择选择器（在 Eclipse 中）
*   要设置此选择器，请查看此[链接](http://www.hrupin.com/2011/09/how-to-make-android-checkbox-and-radiobutton-custom-style)
*   从现在开始，您可以使用其 id 将新创建的选择器设置为任何复选框/单选按钮。

# php - mySQL 事务不工作

> ID：11853249
> 
> 赞同：1
> 
> 时间：2012-08-07T20:03:47.437
> 
> 标签：php, mysql, transactions

我有以下代码：

```
<?php

// Conexion a MySQL

$mysql_link = mysql_connect( 'localhost', 'root', '010101' );

if  (!$mysql_link) {
    die('No se pudo conectar a la DB: ' . mysql_error());

}

$mysql_db = mysql_select_db('test', $mysql_link);

if (!$mysql_db) {
die ('No se pudo seleccionar DB: ' . mysql_error());
    }

$mysql_doc_query = "INSERT INTO documents (name, wfid, docid, archivo) VALUES     ('{$CodDoc}: {$documentoNombre} de {$DNI}', '{$workflowNombre}', '{$documentoNombre}',     '{$archivoNombre}' );
      INSERT INTO keywords (document_id, keyword, value) VALUES (LAST_INSERT_ID(),     'DNI', '{$DNI}' ), (LAST_INSERT_ID(), 'Cuit Empleador',
      '{$cuitEmpleador}' ), (LAST_INSERT_ID(), 'DigitalizadoPor', '{$usuario}' ),
  (LAST_INSERT_ID(), 'Direccion IP', '{$IP}' ), (LAST_INSERT_ID(), 'Ubicacion',     CONCAT('pdfs/',LAST_INSERT_ID(),'.pdf') );";

   // Insert en mysql
 $log = fopen('/dev/shm/log.txt', 'w');
  if( $log ) {
      fwrite( $log, $mysql_doc_query );
  }

  mysql_query("START TRANSACTION");
  if (mysql_query($mysql_doc_query) == TRUE)
  {
      mysql_query("COMMIT");
  echo "\nCOMMIT!";
  }
    else {
      mysql_query("ROLLBACK");
      echo "\nROLLBACK!";
  }
  mysql_close($mysql_link);
fclose ($log);
?> 
```

它总是让我回滚，但我不明白为什么。

对此有任何线索吗？log.txt 存档中生成的代码可以在 PHP MY ADMIN 中毫无问题地执行。（我知道没有引用变量，但这是更大脚本的一部分）。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:06:15.410

你的测试方法不好。mysql_query() 在错误时返回布尔值 FALSE，或在成功时返回结果。根据 PHP 的类型转换规则，一个结果句柄测试等于 true。您必须使用严格的布尔比较，并明确测试是否为 false：

```
if (mysql_query($mysql_doc_query) !== FALSE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:08:45.707

您不能同时发送两个 mysql 查询。您正在发送两个不同的 INSERT 查询。

此外，您必须发送不带“;”的查询 因为它是自动添加的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:08:59.823

`mysql_query()`一次只支持*一个语句*。您正在`INSERT`一次执行多个语句：

```
$mysql_doc_query = "INSERT INTO documents (name, wfid, docid, archivo) VALUES     ('{$CodDoc}: {$documentoNombre} de {$DNI}', '{$workflowNombre}', '{$documentoNombre}',     '{$archivoNombre}' );
      // Oops, new statement here! mysql_query() can't do that.
      INSERT INTO keywords (document_id, keyword, value) VALUES (LAST_INSERT_ID(),     'DNI', '{$DNI}' ), (LAST_INSERT_ID(), 'Cuit Empleador',
      '{$cuitEmpleador}' ), (LAST_INSERT_ID(), 'DigitalizadoPor', '{$usuario}' ),
  (LAST_INSERT_ID(), 'Direccion IP', '{$IP}' ), (LAST_INSERT_ID(), 'Ubicacion',     CONCAT('pdfs/',LAST_INSERT_ID(),'.pdf') );"; 
```

这可以`mysql_error()`在您的`ROLLBACK`块内进行调试：

```
 if (mysql_query($mysql_doc_query) == TRUE)
  {
      mysql_query("COMMIT");
  echo "\nCOMMIT!";
  }
  else {
    echo "Error in query: " . mysql_error();
    mysql_query("ROLLBACK");
    echo "\nROLLBACK!";
  } 
```

如果您需要执行两次`INSERT`s，则需要两次单独调用`mysql_query()`，并在每次调用后检查错误。在任何一个失败时，做你的`ROLLBACK`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T20:15:42.977

运行事务的标准方法包括以下步骤：

```
 mysql_query("SET AUTOCOMMIT=0"); //by default this is 1
 mysql_query("START TRANSACTION"); // start the transaction

 //run all the queries, possibly in a loop
 $q1 = mysql_query("INSERT INTO  .... ");
 $q2 = mysql_query("INSERT INTO  .... ");

 //check the success of all the queries and based on that commit or rollback
 if ($q1 and $q2) {
     mysql_query("COMMIT");
 } else {        
     mysql_query("ROLLBACK");
 } 
```

# python - Fabric中下载时如何维护权限

> ID：11853251
> 
> 赞同：1
> 
> 时间：2012-08-07T20:03:54.923
> 
> 标签：python, sftp, fabric

如果我有如下代码：

```
import fabric.operations
from fabric.api import settings    

def begin():
    with settings(host_string='blar', user='blar', password='blar'):
           fabric.operations.get('/remote/file', '/local/file') 
```

如果某些文件是可执行的而有些不是，我如何在文件传输期间维护权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T22:49:04.017

你不能。您的本地文件将由启动结构脚本并遵守其 umask 的用户创建。但是，您可以在下一个 python 调用中更改它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:29:42.153

就 API 而言，目前似乎[没有办法。](http://fabric.readthedocs.org/en/1.4.3/api/core/operations.html#fabric.operations.get)奇怪的是，[甚至没有对此的功能请求](https://github.com/fabric/fabric/issues)。

# c# - Html Parser - C# Regex html 标签（div、img、a、h5 等）加上属性

> ID：11853252
> 
> 赞同：-4
> 
> 时间：2012-08-07T20:03:57.450
> 
> 标签：c#, html, regex, parsing, phrase

Html Parser - C# Regex html tags content >me im the content< (div, img, a, h5 etc) html 标签以多种不同的方式关闭。

你可能会问为什么要这样做。我继承了原型代码来执行短语替换，例如 Home -> Casa。（西班牙语）。正如您可以想象的那样，我有很多短语（350 和上升），例如“添加新联系人”，它们的长度和字数各不相同。

第一个要求：需要一个正则表达式来提取标签内容。输出必须是：这里是正则表达式匹配的内容 这将允许我进一步操作字符串以允许我执行短语替换。

第二个要求：这里是正则表达式要匹配的内容/> 需要一个正则表达式来拉出属性标签内容如： 输出必须是：

请不要使用 HTML 敏捷包进行响应。我的定制要求不允许我查看： 格式良好的文档。湾。客户端 XSL 转换 c. 确定内容的 XML 数据岛。

```
string file = @"<html>
        <body>
            <input class='moth'>Add New Organisation  </>
<input class='moth'>Org&#160;role
 </>
         </body>
           </html>";

string searchText = "Add New Organisation";

<([\d\w]*)\b[^>]*>([\d\w\s]*?{0}[\d\w\s]*) 
```

所以任何人都可以帮忙。到目前为止，我一直在使用这个正则表达式 ..

```
 var myContentMatches = new List<string>
            (Regex.Matches(file, regExpressionContent.ToString(),
            RegexOptions.IgnoreCase
                | RegexOptions.IgnorePatternWhitespace
                | RegexOptions.Multiline)
            .Cast<Match>().Select(pp => pp.ToString())); 
```

我试图不在这里过多地讨论这个问题。需要任何进一步的信息，请询问。一段时间以来，我一直在努力反对速度和正确匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:38:15.020

我正在结束这个问题，使用 HAP 已经解决了我的一部分要求。谢谢大家的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:20:33.853

HTML 不是正则语言，不能用正则表达式解析。我不相信您的问题有一个现实的解决方案，它不利用现有的库来解析 HTML。

这是 StackOverflow 上投票率最高的问题/答案组合之一，我建议您阅读它：[RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

# javascript - 如何在运行时获取 Javascript 函数调用/跟踪

> ID：11853256
> 
> 赞同：39
> 
> 时间：2012-08-07T20:04:15.770
> 
> 标签：javascript, function, google-chrome, runtime, trace

*当我在RUNTIME*与基于 AJAX 的应用程序交互时，我希望控制台能够输出它调用的所有函数。（所以没有堆栈跟踪、断点、分析或任何东西）

例如，假设我按下了页面上的一个按钮。我希望它返回它在发生这种情况时经历的所有功能：

所以我会在控制台中看到类似的东西（当我按下按钮时）：

```
1\. button1Clicked();
2\.     calculating();
3\.          printingResults(); 
```

这基本上意味着 button1Clicked() 调用了 computed() 调用了 printingResults()

是否有实用程序、插件、浏览器或语言中的某种方式来执行此操作？我正在使用谷歌浏览器，顺便说一句。

ps 和 NO 我不想遍历每个函数并添加一个`"console.log("inside function X")"`工作量太大的 b/c

pps 作为额外的奖励，我也希望看到参数也传递给函数，但也许这是在推动它。:>

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-07T21:05:23.593

我想不出一种很好的方法来全局拦截所有函数调用以插入日志记录（尽管下面的更新部分有一个不错的解决方法）。

相反，仅将日志记录添加到您关心的某个命名空间中的函数怎么样？您可以使用以下设置代码执行此操作：

```
var functionLogger = {};

functionLogger.log = true;//Set this to false to disable logging 

/**
 * Gets a function that when called will log information about itself if logging is turned on.
 *
 * @param func The function to add logging to.
 * @param name The name of the function.
 *
 * @return A function that will perform logging and then call the function. 
 */
functionLogger.getLoggableFunction = function(func, name) {
    return function() {
        if (functionLogger.log) {
            var logText = name + '(';

            for (var i = 0; i < arguments.length; i++) {
                if (i > 0) {
                    logText += ', ';
                }
                logText += arguments[i];
            }
            logText += ');';

            console.log(logText);
        }

        return func.apply(this, arguments);
    }
};

/**
 * After this is called, all direct children of the provided namespace object that are 
 * functions will log their name as well as the values of the parameters passed in.
 *
 * @param namespaceObject The object whose child functions you'd like to add logging to.
 */
functionLogger.addLoggingToNamespace = function(namespaceObject){
    for(var name in namespaceObject){
        var potentialFunction = namespaceObject[name];

        if(Object.prototype.toString.call(potentialFunction) === '[object Function]'){
            namespaceObject[name] = functionLogger.getLoggableFunction(potentialFunction, name);
        }
    }
}; 
```

然后，对于要添加日志记录的任何命名空间对象，您只需调用：

```
functionLogger.addLoggingToNamespace(yourNamespaceObject); 
```

这是一个在行动中看到它[的小提琴。](http://jsfiddle.net/briguy37/jtCmZ/#base)

**更新**
请注意，您可以调用`functionLogger.addLoggingToNamespace(window);`以在调用时将日志记录添加到所有全局函数。此外，如果您真的需要，您可以遍历树以查找任何函数并相应地更新它们。这种方法的一个缺点是它只适用于当时存在的函数。因此，它仍然不是最好的解决方案，但它比手动添加日志语句要少很多工作:)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-07T20:21:58.020

这称为配置文件，Chrome 和 Firebug 内置了它。在[Chrome 开发人员工具](https://developers.google.com/chrome-developer-tools/docs/profiles)中，转到配置文件选项卡并单击记录（圆圈）按钮。执行您的 ajax 并在您响应后，再次单击记录按钮以停止。分析的结果将显示在右窗格中。

请注意，这将为您提供**一切**，因此如果您使用像 jQuery 这样的库，那么绝大多数函数调用对您来说都是垃圾。我已经尝试了几次，我发现这样做更有帮助`console.log('inside <method>')`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-11-27T07:09:45.283

我刚刚发现你可以用`console.trace()`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-07T21:20:47.790

也许您可以让 JavaScript 为您添加一些添加 console.log 的工作：

[自动将 console.log 添加到每个函数](https://stackoverflow.com/questions/5033836/adding-console-log-to-every-function-automatically)

Paul Irish 的这个博客也可能会有所帮助：

[http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/](http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/)

它包括一个指向一些专门针对日志记录参数的 JavaScript 的链接：

[http://pastie.org/1033665](http://pastie.org/1033665)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-17T10:18:49.310

试试diyism_trace_for_javascript.htm：

[https://code.google.com/p/diyism-trace/downloads/list](https://code.google.com/p/diyism-trace/downloads/list)

```
eval('window.c=function(){3+5;}');
declare_ticks_for(window);

function a(k, c) {
  return k + 2;
}

function b() {
  4 + 3;
  a(3, {'a':'c','b':'d'});
  c();
  return 5 + 4;
}

b(); 
```

在 chrome 或 firefox 的控制台选项卡中查看日志

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-07-26T05:01:25.353

Briguy37 解决方案的一种变体，我编写了一个接受在每个方法之前调用的函数的解决方案。它也适用于 ECMAScript 6 类，其中方法不是由 for...in 枚举的。我正在使用它来修改对象原型，将日志记录添加到我的对象的所有新实例中。

```
function inject(obj, beforeFn) {
    for (let propName of Object.getOwnPropertyNames(obj)) {
        let prop = obj[propName];
        if (Object.prototype.toString.call(prop) === '[object Function]') {
            obj[propName] = (function(fnName) {
                return function() {
                    beforeFn.call(this, fnName, arguments);
                    return prop.apply(this, arguments);
                }
            })(propName);
        }
    }
}

function logFnCall(name, args) {
    let s = name + '(';
    for (let i = 0; i < args.length; i++) {
        if (i > 0)
            s += ', ';
        s += String(args[i]);
    }
    s += ')';
    console.log(s);
}

inject(Foo.prototype, logFnCall); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-28T20:14:06.807

让我把第三种（当然也有些不完美）的解决方案扔进戒指。

请注意，所有其他答案都提供两种解决方案：

1.  在运行时手动修补您的 JS 函数，并将它们记录到控制台
    *   是的，它可以完成工作，但是一旦您的项目发展到一定规模，它将毫无用处。它不会给你足够的可控性，除非你一直花时间去开发这个功能。
2.  Jeff 建议使用分析器进行调试
    *   不是很有帮助，因为分析器视图（至少现在）旨在帮助您分析性能，而不是调用图；效果不好，除非您花大量时间训练自己习惯适得其反的用户界面。

这就是我编写 Dbux 的原因，这是一项正在进行中的工作，目前仅作为 VSCode 插件工作，但有一些限制。然而，它是一个无所不知的调试器，具有动态执行分析工具、代码注释和一个成熟的动态调用图可视化工具，旨在帮助开发人员进行程序理解和调试：

![](../Images/4ccb47470b7731ace5dc1f1d176ba63d.png)

链接：

*   [Dbux VSCode 扩展](https://marketplace.visualstudio.com/manage/publishers/Domi)（有很多文档和一些图片）
*   [Dbux Github 仓库](https://github.com/Domiii/dbux)
*   [带 2 个示例的介绍视频](https://www.youtube.com/watch?v=m1ANEuZJFT8)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-01T16:05:14.983

我使用了@ Briguy37 的解决方案并进行了改进。就我而言，我不想跟踪某些库中的函数，所以我添加了一些代码来排除它们。以下是它的使用方法：

*   首先，包括你不想跟踪的函数的定义；
*   excludeLoggingToNamespace 列出到目前为止定义的函数并排除它们；
*   包括要跟踪的函数的定义；
*   调用 addLoggingToNamespace 为上述步骤中定义的函数添加日志记录功能。

例子：

```
<script src="js/someLibrary.js"></script>
<script>
    functionLogger.excludeLoggingToNamespace(window);
</script>
<script src="js/codeIWantToTraceHere.js"></script>
<script>
    functionLogger.addLoggingToNamespace(window);
</script> 
```

这是我添加到@Briguy37 解决方案中的代码：

```
var excludedFunctions = {};

        functionLogger.excludeLoggingToNamespace = function(namespaceObject){
            for(var name in namespaceObject){
                var potentialFunction = namespaceObject[name];

                if(Object.prototype.toString.call(potentialFunction) === '[object Function]') {
                    excludedFunctions[name] = name;
                }
            }
        }; 
```

而且我不得不修改@Briguy37 的 addLoggingToNamespace 方法来考虑 excludeFunctions 哈希：

```
functionLogger.addLoggingToNamespace = function(namespaceObject){
    for(var name in namespaceObject){
        var potentialFunction = namespaceObject[name];

        if(Object.prototype.toString.call(potentialFunction) === '[object Function]' && 
           !excludedFunctions[name]) {
            namespaceObject[name] = functionLogger.getLoggableFunction(potentialFunction, name);
        }
    }
}; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-14T19:26:52.523

[您可以在putout 代码转换](https://github.com/coderaiser/putout)器的帮助下跟踪函数调用。`Plugin`看起来是这样的：

```
const {template, types, operator} = require('putout');
const {replaceWith} = operator;
const {BlockStatement} = types;

// create nodes
const buildLog = template(`console.log('TYPE' + ' ' + 'NAME')`);
const buildLogEnter = template(`console.log('enter' + ' ' + 'NAME' + '(' + JSON.stringify(Array.from(arguments)) + ')')`);
const buildLogException = template(`console.log('TYPE' + ' ' + 'NAME' + ': ' + trace$error.message); throw trace$error`);
const buildTryCatch = template(`try {
        BLOCK;
    } catch(trace$error) {
        CATCH;
    } finally {
        FINALLY;
    }
`);

const JSON = 'JSON';

// nodes we are searching for
module.exports.include = () => [
    'Function',
];

module.exports.fix = (path) => {
    const name = getName(path);

    // create 3 types of events
    const enterLog = buildLogEnter({
        NAME: name,
        JSON,
    });
    const exitLog = buildLogEvent(name, 'exit');
    const errorLog = buildLogExceptionEvent(name);

    // move function body into try-catch
    const bodyPath = path.get('body');
    replaceWith(bodyPath, BlockStatement([buildTryCatch({
        BLOCK: path.node.body.body,
        CATCH: errorLog,
        FINALLY: exitLog,
    })]));

    // add into the beginning of function "console.log" with "enter" event
    bodyPath.node.body.unshift(enterLog);
};

// get name of a function
function getName(path) {
    if (path.isClassMethod())
        return path.node.key.name;

    if (path.isFunctionDeclaration())
        return path.node.id.name;

    const {line} = path.node.loc.start;
    return `<anonymous:${line}>`;
}

// build logger
function buildLogEvent(name, type) {    
    return buildLog({
        NAME: name,
        TYPE: type,
    });
}

// build logger that throws
function buildLogExceptionEvent(name) {    
    return buildLogException({
        NAME: name,
        TYPE: 'error',
    });
} 
```

假设这是您要跟踪的代码：

```
const processFile = (a) => a;
process([]);

function process(runners) {
    const files = getFiles(runners);
    const linted = lintFiles(files);

    return linted;
}

function getFiles(runners) {
    const files = [];

    for (const run of runners) {
        files.push(...run());
    }

    return files;
}

function lintFiles(files) {
    const linted = [];

    for (const file of files) {
        linted.push(processFile(file));
    }

    return linted;
} 
```

这是一张完整的图片：

[![在此处输入图像描述](../Images/785622b2e8c7674a156d7394914ee564.png)](https://i.stack.imgur.com/tw1w1.png)

如果您将处理后的源代码另存为`trace.js`并使用节点运行它，您将拥有：

```
> node trace.js
enter process([[]])
enter getFiles([[]])
exit getFiles
enter lintFiles([[]])
exit lintFiles
exit process 
```

存在[与跟踪功能相关的问题](https://github.com/coderaiser/putout/issues/61)。

# c# - Oracle SQL 插入/Visual Studio 2010 C# 错误

> ID：11853257
> 
> 赞同：0
> 
> 时间：2012-08-07T20:04:21.680
> 
> 标签：c#, sql, visual-studio-2010

我正在尝试将新记录添加到数据库中。

代码最初是

```
rsGroup.Open(ftSQL, Global.gADOConnection, false);
rsGroup.AddNew();

rsGroup["PANELIST_NUM"] = flPanelistNum;
rsGroup["USER_CREATED"] = Global.glUserNumberID; 
```

在 rsGroup.AddNew() 上发生初始错误时 - 列 PANELIST_NUM 不允许空值。
这是因为它是主键。

为了解决这个问题，我尝试使用插入方法-

```
strInsert1 = "INSERT INTO PANELIST_HEADER (PANELIST_NUM, USER_CREATED) VALUES (" + flPanelistNumber + "," + Global.glUserNumberID + ")";

System.Data.OracleClient.OracleCommand cmdCommand = new
System.Data.OracleClient.OracleCommand();

cmdCommand.CommandText = strInsert1;
cmdCommand.Connection = Global.gADOConnection;
cmdCommand.ExecuteNonQuery(); 
```

当我运行它时，我没有收到错误，但它会在无限循环中继续，并且永远不会在 ExecuteNonQuery 命令之后进入下一行代码。是否有原因导致它陷入循环和/或是否有另一种方法可以让我成功将此记录添加到数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:26:30.380

如果 ExecuteNonQuery 方法挂起，听起来几乎就像是在数据库上获得了一个锁（或者之前调用的锁尚未释放）。它真的不可能是无限循环，因为您的代码（至少您发布的片段）没有循环。

此外，将 INSERT 语句参数化是非常可取的，因为所示代码容易受到 SQL 注入攻击。

# java - 参数 ActionListener

> ID：11853260
> 
> 赞同：-1
> 
> 时间：2012-08-07T20:04:29.550
> 
> 标签：java, swing, arguments, actionlistener

我无法`allField, nbGrpGen, Na` 在我的 actionListener 中传递这三个参数。即使有全局变量，Eclipse 也会告诉我它们“无法解析为变量”。如果在 class 中声明了这些元素`Panneau_fenetre1A`，则它可以工作。但我不能这样做，因为我需要 Na 的值。

```
import javax.swing.*;
import java.awt.event.*;

class Panneau_fenetre1A extends JPanel {

    JLabel phrase = new JLabel(
            "Veuillez indiquer le nombre de groupe generalisant par Niveau");
    JButton boutonOK = new JButton("OK");

    public Panneau_fenetre1A(int Na) {
        final JTextField[] allField = new JTextField[Na];
        final String[] nbGrpGen = new String[Na];
        for (int i = 0; i < Na; i++) {
            allField[i] = new JTextField(String.valueOf(0));
            allField[i].setBounds(150, 350 + i * 25, 20, 20);
            add(allField[i]);
        }
        boutonOK.addActionListener(new ecout5());
    }

    class ecout5 implements ActionListener {

        public void actionPerformed(ActionEvent evt) {
            for (int i = 0; i < Na; i++) {
                nbGrpGen[i] = allField[i].getText();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:26:37.160

您有多种选择来完成此操作。
1）处置ecoout5并使用匿名ActionListener，这不那么冗长，并且对于习惯于java的人来说更容易理解：

```
boutonOK.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent evt)
    {

        for(int i = 0;i < Na ;i++)
        {
            nbGrpGen[i] = allField[i].getText();
        }                   
    }
} 
```

更多关于 Java 中的匿名类的信息：[http](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm) : //docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm类”）

2) 将 Na 作为参数传递给 ecoout5 的构造函数，这样可能更简洁，更易于阅读和重用：

```
boutonOK.addActionListener(new ecout5(Na));

...

class ecout5 implements ActionListener 
{   
    private int Na;
    public ecout5(int Na)
    {
        this.Na = Na;
    }

    public void actionPerformed(ActionEvent evt)
    {

        for(int i = 0;i < Na ;i++)
        {
            nbGrpGen[i] = allField[i].getText();
        }                   
    } 
```

可能还有更多选择，但我希望提到的一个应该做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:11:41.913

您需要创建`na`一个全局变量：

```
private int na;

public Panneau_fenetre1A(int na)
{
    this.na = na;
    // la reste ici 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:12:56.450

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

import java.lang.Integer;

class Panneau_fenetre1A extends JPanel
{

  JLabel phrase = new JLabel("Veuillez indiquer le nombre de groupe generalisant par Niveau");
  JButton boutonOK = new JButton ("OK");

  public Panneau_fenetre1A(final int Na)
  {
    final JTextField[] allField = new JTextField [Na];
    final String[] nbGrpGen = new String [Na];
    for(int i = 0;i < Na;i++)
    {
      allField[i] = new JTextField(String.valueOf(0));
      allField[i].setBounds(150, 350 + i * 25, 20, 20);
      add(allField[i]);
    }

    boutonOK.addActionListener(new ActionListener()
    {
      public void actionPerformed(ActionEvent evt)
      {

        for(int i = 0;i < Na ;i++)
        {
          nbGrpGen[i] = allField[i].getText();

        }
      }
    });
  } 
```

# excel - SSRS 指标 - 我如何在 Excel 中读取它们？

> ID：11853272
> 
> 赞同：2
> 
> 时间：2012-08-07T20:05:00.167
> 
> 标签：excel, reporting-services, ssrs-2008

我将一个较旧的 Crystal 报表移植到 SSRS 中，该报表通过在列中显示 X 或空白来显示值，并决定将 X/空白替换为指示器控件，显示复选标记。看起来很可爱，但是当我的老板将它导出到 Excel 时，我们发现他不再计算标记的单元格。

我有一个涉及两行的部分解决方法，一行带有指标，另一行带有指标后面的 0/1 值，并选择使用 RenderFormat 全局显示哪一行，但我*真的*不喜欢这样的重复行。有没有更好的方法来做到这一点，无论是在 SSRS 还是 Excel 方面？谢谢。

# iphone - 如何在两个重叠的 UIView 中启用用户交互？

> ID：11853276
> 
> 赞同：1
> 
> 时间：2012-08-07T20:05:18.963
> 
> 标签：iphone, objective-c, ios, uiview, user-interaction

我有两个重叠的 UIView，我希望它们都能响应用户的触摸。目前，只有最后一个加载的视图响应。

如何让两者都响应触摸事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:11:34.600

您可以提供一个简单的协议，将所有触摸事件从第一个视图发送到后台视图。所以让后台的视图成为第一个视图的委托将是一种非常简单的方法。

否则重写`touchesBegan:withEvent:`前面视图的方法，在后台调用视图的对应方法。

干杯，安卡

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:13:01.397

如果你在处理它们之后调用 touchesBegan/Moved/Ended，我认为你会实现你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T21:36:47.637

最后，由于我不需要两者同时响应，我做了一个解决方法。我使用了方法bringSubViewToFront: 和sendSubViewToBack:。这种方法成功了。

# google-maps-api-3 - 使用 gmaps4rails 更新集群图标的最佳方法是什么

> ID：11853282
> 
> 赞同：1
> 
> 时间：2012-08-07T20:05:57.687
> 
> 标签：google-maps-api-3, gmaps4rails, markerclusterer

我是 gmaps4rails gem 的忠实粉丝，它运行良好且非常灵活。

但是，我似乎无法轻松清除和更新集群标记，并且在使用此 gem 的 Stackoverflow 上找不到类似的解决方案。

在我的 javascript 中，我使用以下方法过滤掉可见标记。但是 Gmaps.map.clearClusterer 似乎没有响应点击事件。我能够正确显示和隐藏标记，但无法清除群集标记，也无法使用新编号更新群集标记。我应该怎么做？

```
 var VisibleMarker=function(){
    var filtered=_.filter(Gmaps.map.markers,function(marker){   
       return marker.building_type == SELECT;
     }); //end of _.filter
    return filtered
  }//end of VisibleMarker

  var applyFilters=function(){
    var VisibleArray=VisibleMarker()
    _.each(Gmaps.map.markers,function(marker){
         Gmaps.map.hideMarker(marker)
     })
        Gmaps.map.clearClusterer()
    _.each(VisibleArray,function(marker){
         Gmaps.map.showMarker(marker)
     }) 
        Gmaps.map.createClusterer(VisibleArray)

   };//end of applyFilters 
```

更新：

我应该如何正确调用 MarkerClusterer 类中的 addMarkers() 方法？ [http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)

我用了这条线：

> Gmaps.map.addMarkers(VisibleArray)

但它改为调用此函数：

```
Gmaps4Rails.prototype.addMarkers = function(new_markers) {
this.markers = this.markers.concat(new_markers);
this.create_markers();
return this.adjustMapToBounds();
}; 
```

# ruby-on-rails - 文件上传 Rails 自定义

> ID：11853283
> 
> 赞同：1
> 
> 时间：2012-08-07T20:06:13.057
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我想知道如何上传我的文件。我已阅读此[http://guides.rubyonrails.org/form_helpers.html#uploading-files](http://guides.rubyonrails.org/form_helpers.html#uploading-files)但不确定如何从控制器读取和写入数据？我也读了这个[http://www.tutorialspoint.com/ruby-on-rails/rails-file-uploading.htm](http://www.tutorialspoint.com/ruby-on-rails/rails-file-uploading.htm)但是把它们放在一起让我很困惑。我不喜欢 gem，因为我不了解编码的存储位置，并且在我能够编写特定于我的应用程序的代码方面不允许灵活性。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:10:12.913

我建议使用[Paperclip](https://github.com/thoughtbot/paperclip/) gem。该文档非常简单明了，并解释了文件上传过程中的每个步骤。

# android - 更改 Android 自定义 SurfaceView 的大小

> ID：11853297
> 
> 赞同：3
> 
> 时间：2012-08-07T20:06:53.520
> 
> 标签：android, 2d, surfaceview, surfaceholder

我正在尝试为 Android 应用程序创建 2D 游戏引擎。我已经按照[本教程](http://www.droidnova.com/2d-tutorial-series-part-ii,772.html "本教程")进行操作，它可以很好地创建全屏显示，但我不希望这样。我想让我的视图占据屏幕的顶部 2/3（或其他），并用标准的 Android 小部件（按钮、文本输入等）填充底部的三分之一。我不能让它工作。我能得到的最好的结果是一个空白屏幕。我尝试了许多排列，包括使用外部 LinerLayout，然后将自定义 SurfaceView 嵌入嵌套的 RelativeLayout 中，并将 Android 小部件放入嵌套的 LinearLayout 中，但它不起作用。

例如，这会产生一个白屏，当我觉得它应该是 SurfaceView 的 50%，TextView 的 50% 时：

活动主.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:baselineAligned="false" >

<RelativeLayout
    android:layout_width="0dip"
    android:layout_height="0dp"
    android:layout_weight="1"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapContainer"
    >
</RelativeLayout> 

<LinearLayout
    android:layout_width="0dip" 
    android:layout_weight="1"
    android:layout_height="0dp"
    xmlns:android="http://schemas.android.com/apk/res/android" >
    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:textColor="@color/white"
        android:text="@string/test_str" />
</LinearLayout>

</LinearLayout> 
```

MainActivity.java：

```
package com.removed.for.privacy;

import com.removed.for.privacy;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        RelativeLayout mapContainer = (RelativeLayout) findViewById(R.id.mapContainer);

        JSMapView mapView = new JSMapView(this);
        mapContainer.addView(mapView);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T04:51:24.550

通过大量谷歌搜索和半相关问题弄清楚了。这是我如何让它在纵向模式下填充 2/3 高度（100% 宽度）和在横向模式下填充 2/3 宽度（100% 高度）的示例。

在自定义表面视图中，重写 onLayout 方法：

```
@Override
public void onLayout(boolean changed, int left, int top, int right, int bottom) {
    if (changed) {
        (this).layout(0, 0, viewWidth, viewHeight);
    }
} 
```

在类构造函数中，添加以下代码：

```
public YourCustomSurfaceView(Context context) {
    super(context);

    WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();
    int rotation = display.getRotation();

    // If vertical, we fill 2/3 the height and all the width. If horizontal,
    // fill the entire height and 2/3 the width
    if (rotation == Surface.ROTATION_0 || rotation == Surface.ROTATION_180) {
        screenWidth = display.getWidth();
        screenHeight = display.getHeight();
        viewHeight = 2 *  (screenHeight / 3);
        viewWidth = screenWidth;
    } else {
        screenWidth = display.getWidth();
        screenHeight = display.getHeight();
        viewWidth = 2 * (screenWidth / 3);
        viewHeight = screenHeight;
    }
    // Enter rest of code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-05T15:49:44.207

拥有自定义 SurfaceView 大小 `surfaceView!!.layoutParams = ConstraintLayout.LayoutParams(width, height)`

ConstraintLayout 取决于您的父布局

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-25T00:59:05.860

现在，constraintLayout 出来了。可以通过将“layout_constraintHeight_percent”设置为“0.5”来做到这一点。surfaceView 如下所示：

```
<SurfaceView
    android:id="@+id/surface_camera"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    app:layout_constraintTop_toTopOf="parent"
    app:layout_constraintHeight_percent="0.5"
/> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-25T19:45:32.373

要更改 SurfaceView 的自定义高度和宽度，请使用“android.view.ViewGroup.LayoutParams”。 LayoutParams 的子类用于 ViewGroup 的不同子类。例如，AbsoluteLayout 有自己的 LayoutParams 子类，它添加了 X 和 Y 值。通过这个你可以改变 SurfaceView 的 X 和 Y

更改surfaceview高度宽度的代码在这里： [http ://agalaxycode.blogspot.in/2014/12/change-surfaceview-height-width.html](http://agalaxycode.blogspot.in/2014/12/change-surfaceview-height-width.html)

# windows - 在 windows xp 中获取 ipsec 隧道的回调

> ID：11853298
> 
> 赞同：0
> 
> 时间：2012-08-07T20:07:05.597
> 
> 标签：windows, callback, tunnel, ipsec

我想从 Windows XP PC 打开一个 IPsec 隧道（我可以使用 MMC GUI 来完成）并在我的应用程序（它可以是 C、C++ 或任何其他应用程序）中获取关于连接状态的回调（一些 Windows API），例如 CONNECTION_ESATBLISHED 、CONNECTION_FAILED 或 NEGOTIATION_FAILED。

换句话说，我想知道隧道是否已建立，是否运行正常或已通过我的应用程序代码关闭。

我在这个主题上搜索了很多，但找不到任何有用的信息......

有人有什么想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:44:07.357

如果要创建 VPN 连接 (IPSec)，可以使用远程访问客户端 API 对其进行配置。使用您的 IPSec 配置创建带有 RasSetEntryProperties 的 Ras 条目并使用 RasDial 拨号。回调函数将通知您连接状态。

# java - 使用 SpringLayout (Java) 序列化一个类

> ID：11853302
> 
> 赞同：0
> 
> 时间：2012-08-07T20:07:14.837
> 
> 标签：java, serializable, springlayout

我最近开始使用 Java 进行开发，并且非常享受这种体验。默认的 Java 包加载了有用的东西，拥有 Swing 包对创建 GUI 有很大帮助。我决定为我的 LayoutManager 使用 SpringLayout，因为它简单且非常灵活，但现在我发现自己陷入了困境。

我希望能够保持我的应用程序的状态。我开始使用 Preferences API 来解决这个问题，但这只允许存储 Java 原生（可以理解 - 它的目标是轻量级）。我继续通过持久化包含数据的 XML 字符串来混杂 Preferences 的使用。过了一会儿，我决定环顾四周，看看是否有更好的地方，然后我开始阅读有关可序列化的内容——看起来我找到了答案。

然而，当我尝试序列化一个具有一些由 SpringLayout 管理的 GUI 组件的类时，我遇到了一个障碍，我发现它没有实现可序列化。我以为我已经找到了解决`transient`关键字问题的方法，但 SpringLayout 唯一允许的修饰符是`final`. 我见过的唯一解决方法是更改​​我正在使用的 LayoutManager ......我不想这样做，因为我已经创建了一些相当定制的 GUI。

有任何想法吗？

在此先感谢您的所有回复。

-M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:30:54.243

你是什​​么意思

> SpringLayout 唯一允许的修饰符是`final`.

如果它是您的可序列化对象的一个​​字段，那么您可以将其声明为瞬态的。如果您无法控制 Object 中的所有字段，请尝试仅持久`State`化您写入所有相关数据的 Object。保留一个布局管理器不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:33:37.710

*我试图将构造函数本地*的 SpringLayout 实例声明为`transient`. 需要做的是将这些变量声明为类变量，然后将它们修改为`transient`.

# javascript - 在隐藏值上调用 jQuery .trigger('change') 会破坏依赖于淘汰赛的 observable

> ID：11853303
> 
> 赞同：4
> 
> 时间：2012-08-07T20:07:33.043
> 
> 标签：javascript, jquery, knockout.js

在我们遇到这个问题的背后有一些故事......基本上，我们调用`trigger('change')`了我们所有的表单输入来让其他淘汰赛 observables 知道它们的值已被重置。但我真的认为这是 Knockout 中的一个错误。在这里询问是否有其他人遇到过它（并且 StackOverflow 是一个比 Knockout 的谷歌论坛更好的界面）。

因此，如果您有一个隐藏的输入，其值是数据绑定到计算的可观察对象，并且您在其上调用 jQuery `trigger('change')`，它会清除可观察对象。如果您深入研究代码，您可以看到在视图模型对象上，在触发更改事件之前，成员对象被替换为计算出的 observable 上的最后一个值的字符串。

JS fiddle 展示了破损情况：http: [//jsfiddle.net/2VvvE/1/](http://jsfiddle.net/2VvvE/1/)

它使用console.log 输出对象，因此如果您尝试没有控制台的浏览器（*咳嗽*IE），请注意。你可以看到依赖的 observable 工作正常，直到你点击“Break It”按钮，之后，值停止更新，随后的按下输出相同的东西。如果您注释掉带有触发器（'change'）的行并重新运行小提琴，您可以看到它在每次按下按钮后继续工作。

很抱歉没有提出真正的问题 - 我们已经想出了一个解决方法，我们只在未隐藏的输入上调用 trigger('change') （非常简单的 jquery 选择器，以防有人好奇）：

```
$("#"+this.id+" form").each(function() {
    $(this).validate().resetForm();
    this.reset();

    // Do some actions on all the inputs, then filter before calling the trigger
    $(this).find('input,select').data('valid','true').filter(':not(:hidden)').trigger('change');
    $(this).find('label,legend').removeClass('validated-error');
}); 
```

但我想要一个结论：淘汰错误？还是我做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:51:53.057

您不应该将普通的计算 observable 绑定到像`value`. 这导致它在您的模型中被覆盖。

如果必须，您可以使用[可写的计算 observable](http://knockoutjs.com/documentation/computedObservables.html#writeable_computed_observables)。在这种情况下，您甚至可以有一个空白的写入功能：http: [//jsfiddle.net/rniemeyer/2VvvE/2/](http://jsfiddle.net/rniemeyer/2VvvE/2/)

但实际的答案是您确实不需要触发`change`字段上的事件。处理此问题的更好方法是从您的视图模型中执行此操作。在任何`observable`或`computed observable`您可以调用该`valueHasMutated()`函数再次通知所有订阅者最新的值。

`myObservable.valueHasMutated()`

# arrays - Haskell 位数组

> ID：11853306
> 
> 赞同：11
> 
> 时间：2012-08-07T20:07:43.087
> 
> 标签：arrays, haskell

`STUArray`with`Bool`元素为每个元素使用多少空间？它真的把事情压缩到一点吗？或者它是否使用每个元素的整个字节？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T20:23:31.750

[数组](http://hackage.haskell.org/package/array)包的源代码显示，是的，多个`Bool`作为位打包在一起成为字节数组。

似乎没有记录（？）

# javascript - .each() $.ajax 完成后显示消息

> ID：11853313
> 
> 赞同：0
> 
> 时间：2012-08-07T20:07:58.160
> 
> 标签：javascript, jquery, ajax, each

在我`each()`完成其中的所有任务后，我需要显示一些文本。但似乎他们正在异步运行并且“完成”。显示得太早。我曾尝试使用延迟，但这没关系。如您所见，我将成功和失败信息发送到一个模式，以显示哪些记录已保存或失败。'完成'需要在所有`$.ajax`呼叫完成后到来。

```
$(".QueueGrid tbody > tr").each(function () {
    dcn = "";
    if ($(this).find(".chkOtherSelected").prop("checked")) {
        claimnum = $(this).find("td:eq(2)").text();
        dcn = $(this).find("td:eq(5)").text();
        $.ajax({
            type: "POST",
            url: "Approval_Inbox.aspx/SaveNote",
            data: "{dcn:'" + dcn + "',note:'" + note + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            cache: false,
            timeout: 8000,
            beforeSend: function () {
                str = "- " + dcn + "<br />";
            },
            success: function (data) {
                _savedSucess += str;
            },
            error: function () {
                _savedFail += str;
            },
            complete: function (data) {
                $("#divMassMessage").fadeIn("fast");
                $("#divMassMessage").center();
                $('#MainContent_savedSucess').html(_savedSucess);
                $('#MainContent_savedFail').html(_savedFail);
            }
        });
    }
});
$(".saveComplete").html("done."); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:12:36.577

AJAX 就其本质而言是异步的。您可以强制它同步（async: false），但这会在请求期间锁定浏览器。

或者，您可以计算发出的请求数，然后每次完成时调用一个函数。计算完成次数，当它与调用次数匹配时，触发警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:19:15.500

在AJAX完整函数中，您可以检查是否`this`是您正在解析的元素数组的最后一个成员，即获取数组中元素的数量`$().each`并检查当前元素是否等于长度的数组。如果是，请写下完整的消息。如果没有，还有更多元素需要循环。

# c# - 是否有调用 gridView.EndDataUpdate、gridView.EndUpdate、gridView.EndSummaryUpdate 的命令？

> ID：11853314
> 
> 赞同：1
> 
> 时间：2012-08-07T20:08:20.920
> 
> 标签：c#, winforms, gridview, batch-file, devexpress

如果我想`gridView.EndDataUpdate (gridView.BeginDataUpdate)`和`gridView.EndSummaryUpdate (gridView.BeginSummaryUpdate)`一起使用，哪一个应该是正确的顺序？
订单 1：

```
gridView.BeginDataUpdate();
gridView.BeginSummaryUpdate();
...
gridView.EndSummaryUpdate();
gridView.EndDataUpdate(); 
```

订单 2：

```
gridView.BeginDataUpdate();
gridView.BeginSummaryUpdate();
...
gridView.EndDataUpdate();
gridView.EndSummaryUpdate(); 
```

当我应该使用时`gridView.EndUpdate (gridView.BeginUpdate)`，是否有任何订单要求？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T04:39:59.450

[BaseView.BeginUpdate](http://documentation.devexpress.com/WindowsForms/DevExpressXtraGridViewsBaseBaseView_BeginUpdatetopic.aspx) / [BaseView.EndUpdate](http://documentation.devexpress.com/WindowsForms/DevExpressXtraGridViewsBaseBaseView_EndUpdatetopic.aspx)方法锁定视图并阻止后续的视觉**更新**。使用 BeginUpdate 和 EndUpdate 方法无法避免任何**数据更新。**相反，必须使用[BaseView.BeginDataUpdate](http://documentation.devexpress.com/WindowsForms/DevExpressXtraGridViewsBaseBaseView_BeginDataUpdatetopic.aspx)和[BaseView.EndDataUpdate方法。](http://documentation.devexpress.com/WindowsForms/DevExpressXtraGridViewsBaseBaseView_EndDataUpdatetopic.aspx)每当将摘要项添加到网格视图或修改它们的设置时，网格都会自动重新计算摘要。要在所有汇总项都正确初始化之前阻止汇总计算，请使用[BeginSummaryUpdate](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsGridGridView_BeginSummaryUpdatetopic)和[EndSummaryUpdate](http://documentation.devexpress.com/WindowsForms/DevExpressXtraGridViewsGridGridView_EndSummaryUpdatetopic.aspx)方法。
以下是所有这些方法用法的详细说明：
-[批量修改概述](http://documentation.devexpress.com/#WindowsForms/CustomDocument773)

在您的情况下，您可以将数据和摘要更新包含在可视更新中，如下所示：

```
view.BeginUpdate();
try {
    ...view options modifications...

    view.BeginDataUpdate();
    try {
        ...data modifications...
    }
    finally{ view.EndDataUpdate(); } // real data update here

    view.BeginSummaryUpdate();
    try {
        ...summary modifications...
    }
    finally{ view.EndSummaryUpdate(); } // real summary recalculation

    ...another view options modifications...
}
finally{ view.EndUpdate(); } // real visual update 
```

# php - 如何使用 json_encode 对这个 mysql 结果进行编码？我究竟做错了什么？

> ID：11853315
> 
> 赞同：0
> 
> 时间：2012-08-07T20:08:25.157
> 
> 标签：php, mysql, json

```
//this is my mysql result
$search_result=$this->Connect_user_model->get_user($key_word);
$info=array();

foreach($search_result as $row){
    $info[]=array('username' => $row->username, 
                  'email' => $row->email, 
                  'gender' => $row->gender);
    echo json_encode($info);'
} 
```

我怎样才能循环这个响应？我得到了这样的回应——

```
0: {
    username: iamanam,
    email: 1,
    gender: Male
}
email: "1"
gender: "Male"
username: "iamanam"
1: {
    username: admin,
    email: iamanam3@gmail.com,
    gender: Male
}
email: "iamanam3@gmail.com"
gender: "Male"
username: "admin"
2: {
    username: iamanam,
    email: 1@1.com,
    gender: Male
}
email: "1@1.com"
gender: "Male"
username: "iamanam" 
```

当我在循环外回显 json_encode 时。它可以工作，但我得到每个结果双倍我使用这个函数进行循环----

```
function process_response(data){
    var show_user='';

     $.each(data,function(contact,contactInfo) {

      show_user+='<div class="discounted-item '+contactInfo.gender+' music-playlist">';
      show_user+='<img src="" alt="" class="music-playlist-left" width="38px" height="38px"  />';
      show_user+='<h1>';
      show_user+=contactInfo.username;
      show_user+='</h1>';
      show_user+='<p>';
      show_user+= contactInfo.gender;
      show_user+='</p>';
      show_user+='<a  href="" title="" class="tips" rel="">';
      show_user+='<img src="" alt="f" class="music-playlist-right" id="img"></a>';
      show_user+='</div>';

     }); // end of each()

     // add finished HTML to page
     $('#info').append(show_user);

}//process_responce 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:12:26.280

您的意思是每次遍历结果时都回显 JSON 字符串吗？如果将 echo 语句移出 for 循环，您将获得一个包含所有数据的 JSON 对象，而不是每次添加数据时都获得 JSON 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T20:13:04.290

你做错的是在循环中输出 JSON。

这意味着您的输出实际上是几个单独的 JSON 块：如果您尝试将该输出作为单个 JSON 块读取，它将无法正常工作。

您需要做的就是将它全部构建到一个数组中，并在您完成循环数组后输出 JSON。

由于您已经`$info[]`正确构建了数组，因此您需要做的就是修复代码，将其移到循环`echo`外部`foreach`，如下所示：

```
foreach($search_result as $row){
    $info[]=array('username' => $row->username, 
                  'email' => $row->email, 
                  'gender' => $row->gender);
}
echo json_encode($info); 
```

希望有帮助。

顺便说一句，如果`$row`只包含这三个字段，那么值得知道它`json_encode()`能够像数组一样轻松地编码对象。因此，如果`$row`只是这三个字段，那么您可以简单地`$info[]=$row;`在循环内执行，最后的输出将是相同的。

# error-handling - makefile 中的自定义错误处理

> ID：11853317
> 
> 赞同：1
> 
> 时间：2012-08-07T20:08:40.837
> 
> 标签：error-handling, makefile

我需要构建一个需要特定 Linux 包的 C 程序。我将一个变量 PACKAGENOTIFICATION 设置为一个 shell 命令，该命令应该检查是否为 Ubuntu 安装了该软件包，如果没有则打印一个通知：

```
PACKAGENOTIFICATION := if cat /etc/issue | grep Ubuntu -c >>/dev/null; then if ! dpkg -l | grep libx11-dev -c >>/dev/null; then echo "<insert notification here>"; fi; fi

[...]

maintarget: dependencies
            $(PACKAGENOTIFICATION)
            other_commands 
```

不幸的是，在制作依赖项时，它会运行到需要包的文件中，并在执行我的 PACKAGENOTIFICATION 之前出错。另一种表述是创建一个单独的目标，其唯一目的是运行通知：

```
maintarget: notify other_dependencies
            commands

notify: 
            $(PACKAGENOTIFICATION) 
```

然而，由于这个幻像依赖总是需要被执行，make 永远不会报告程序是最新的。

让始终报告为最新的最佳方法是什么，但在通知死亡之前执行我的通知？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:02:53.373

如果您的 Make 版本支持“仅订购”先决条件，则可以这样做：

```
# Note the pipe
maintarget: other_dependencies | notify
            commands

# This should be an order-only preq of any target that needs the package
notify: 
            $(PACKAGENOTIFICATION) 
```

如果没有，还有其他方法。

# java - 为 RandomAccessFile 添加方法

> ID：11853319
> 
> 赞同：0
> 
> 时间：2012-08-07T20:08:44.990
> 
> 标签：java, random-access

嘿，我被困在我的 ArrayList 存储学生的 add 方法上，然后使用 randomAccessFile 将学生存储写入文本文件。所以我需要能够将学生添加到商店，然后将其写入文件。谁能建议我可以做到这一点的方法？我可以将学生添加到商店没有问题，但实际问题是我正在使用静态数组将学生写入文件，我不确定如何让用户将新员工添加到静态数组？

这是我的代码：

主应用

```
import java.io.IOException;
import java.io.RandomAccessFile;
public class MainApp
{

    public static void main(String[] args) throws Exception 
    {
        new MainApp().start();

    }
    public void start()throws Exception 
    {
        StudentStore details = new StudentStore();
        Student a = new Student("Becky O'Brien", "DKIT26", "0876126944", "bexo@hotmail.com");
        Student b = new Student("Fabio Borini", "DKIT28", "0876136944", "fabioborini@gmail.com");
        Student c = new Student("Gaston Ramirez", "DKIT29", "0419834501", "gramirez@webmail.com");
        Student d = new Student("Luis Suarez", "DKIT7", "0868989878", "luissuarez@yahoo.com");
        Student e = new Student("Andy Carroll", "DKIT9", "0853456788", "carroll123@hotmail.com");
        details.add(a);
        details.add(b);
        details.add(c);
        details.add(d);
        details.add(e);
        //details.print();

        RandomAccessFile file = new RandomAccessFile("ContactDetails.txt","rw");
        //getBytes() returns an array of bytes.
        //Because i have put the store in a static Array.(I done this because i could find no other
        //Simple way to write a Student Object.)
        //None of the methods of the RandomAccessFile write class worked with this.
        Student[] students = {a,b,c,d,e};
        details.write(students, file);
        details.readAll(file);

        file.close();

     }

 } 
```

学生商店

```
//---------------------------------------------------------------------------
//Imports.
//---------------------------------------------------------------------------   
import java.io.IOException;
import java.io.RandomAccessFile;
import java.util.ArrayList;
import java.util.List;
//---------------------------------------------------------------------------   

public class StudentStore
{
//---------------------------------------------------------------------------
//ArrayList declaration.
//---------------------------------------------------------------------------
    List<Student> students = new ArrayList<Student>();
//---------------------------------------------------------------------------
//Name:          Add method.
//Description:   Adds a student to the ArrayList.
//---------------------------------------------------------------------------
    public void add(Student student) 
    {
        students.add(student);
    }
//---------------------------------------------------------------------------
//Name:          DeleteAll method.
//Description:   Delete's everything in the ArrayList.
    //---------------------------------------------------------------------------
     public void deleteAll()
     {
           students.clear();
     }
//---------------------------------------------------------------------------
//Name:          Print method.
//Description:   Prints out the contents of the ArrayList.
//---------------------------------------------------------------------------
    public void print() 
    {
        for (int i = 0; i < students.size(); i++) 
        {
          Student a = students.get(i);
            System.out.println(a.toString());
        }
    }
    public int size()
    {
        return (students == null) ? 0 : students.size();
    }
    public void write(Student[] students, RandomAccessFile file) throws IOException
    {
        for (int i = 0; i < students.length; i++)
        {
        byte[] bytes = students[i].toString().getBytes();
        for(byte byteWrite : bytes)
        {
            file.writeByte(byteWrite);
        }
        }

    }
    public void readAll(RandomAccessFile file) throws IOException
    {
        final int Record_Length = 30;
        int recordNumber = 0;
        file.seek((recordNumber) * Record_Length);

        String code ="";
        for(int i = 0; i < 30; i++)
        {
        code += file.readLine() + "\n";
        }
        System.out.println(code);
    }

} 
```

注意：我没有展示学生类，因为它是由构造函数、getter 和 setter 以及 toString 构建的，我不觉得上传它有什么用，但如果需要我会很乐意这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:28:35.063

就我个人而言，我只是将 arraylist 写入文件，而不是创建一个单独的数组来让你的 write 方法写入文件。这也将简化您的主要方法。[你可以在这里](https://stackoverflow.com/questions/8417051/writing-an-arraylist-of-non-string-objects-to-file)看到一个很好的例子

所以，你的主要看起来像这样：

```
StudentStore details = new StudentStore();  
details.add(new Student("Becky O'Brien", "DKIT26", "0876126944", "bexo@hotmail.com"));  
// add more students  
details.write(new RandomAccessFile("ContactDetails.txt","rw")); 
```

您还可以进一步简化它，只让 write 方法的唯一参数是文件名。

# javascript - 剪切的文本和阴影

> ID：11853331
> 
> 赞同：3
> 
> 时间：2012-08-07T20:09:26.827
> 
> 标签：javascript, jquery, html, css, typography

我试图让这个例子中的文本正确显示，但我一直在用各种字母剪裁文本和阴影，我不知道为什么以及如何修复它。

这是一个jsfiddle（已删除），因此您可以完全理解它。 ~~ 请在加载后刷新 jsfiddle，因为第一个字母剪辑不会像在常规发布页面上那样出现。~~

问题在于~~加载（刷新后）'F'＆它的阴影将被剪裁。~~ 然后，将鼠标悬停在文本上 - 将出现“第二个”，然后鼠标悬停和第一个单词将再次出现，但随后“t”阴影被剪裁。

无法弄清楚如何解决这些问题。有人可以帮我清除这些剪辑错误。谢谢，比尔

**更新：** 我发现了 'F' 字母剪裁问题（更新的 jsfiddle） - 我需要关于 't' 剪裁的帮助 - 谢谢，Bill

BUMP——有人吗？漂亮请 - 比尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T22:49:41.843

这个问题与字体的呈现方式有关。某些字体（例如您要嵌入的字体）的衬线超出了字母本身的“框”。在典型的排版中，这是通过允许渲染区域超出框本身来处理的——因为大多数应用程序不会在每个字母周围制作一个框。

我认为您遇到的问题源于每个字母实际上是 a 的事实`<span>`，这意味着它确实有一个盒子。然后，您的 JS 会弄乱`opacity`,`overflow`和定位，这会导致 CSS 渲染在渲染每个个体`<span>`时将其框住。

我的建议是避免使用您应用于跨度的显式宽度/溢出，而是让它们自动调整大小并控制绝对定位。

如果每个跨度具有相同的 z-index，并且它们的间距正确，那么这应该会为您提供所需的内容，而不会导致剪辑。

更新：

问题是字体以与字母重叠的方式呈现（就像许多脚本风格的字体一样）。因此，您 - 必须 - 以超出其框边界的方式渲染此字体。

但是，当插件中的 CSS 将单个字母变为部分透明时，透明项目不能超出其框的外部......因此会发生剪切。

解决方案是充分增加框的大小以不发生剪裁，并允许框重叠。

换句话说，诀窍是给字体字母提供`padding-right`足够`padding-left`的空间来充分表达，然后用负数调整`margin-left`，将字母移回一起。

对于这种字体，在这种大小下，使它起作用的样式是：

```
.lslide_wrap a span span.sl-w1 {
    ...
    /* Add the following 2 lines: */
    padding: 0 100px 0 22px;
    margin-left: -22px;
} 
```

可以在[此处](http://jsfiddle.net/TroyAlford/8XFSx/16/)找到原始 jsFiddle 的更新版本。

# sql - SQL Oracle，无序插入表

> ID：11853332
> 
> 赞同：0
> 
> 时间：2012-08-07T20:09:28.607
> 
> 标签：sql

我正在使用 Oracle 11.2g 实例。我想通过自己生成主键值将行插入表中来了解我所暴露的内容。我会从某些表中选择 max(pk)；然后将接下来的一百个值用于我接下来的 100 个插入。是在玩火吗？

上下文是：我有大量的插入要做，它们被分成几个由外键链接的表。我试图获得良好的性能，而不是使用 PL/SQL。

[编辑]这里的代码示例看起来像我正在处理的：

```
QString query1 = "INSERT INTO table 1 (pk1_id, val) VALUES (pk1_seq.nextval, ?)"
sqlQuery->prepare(query);
sqlQuery->addBindValue(vec_of_values);
sqlQuery->execBatch();

QString query2 = "INSERT INTO table 2 (pk2_id, another_val, pk1_pk1_id) VALUES    (pk2_seq.nextval, ?, ?)"
sqlQuery->prepare(query);
sqlQuery->addBindValue(vec_of_values);

// How do I get the primary keys (hundreds of them)
// from the first insert??
sqlQuery->addBindValue(vec_of_pk1);
sqlQuery->execBatch(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:20:10.907

您将自己暴露在性能下降、逻辑错误和需要维护的额外代码中。Oracle 序列针对您的特定目的进行了优化。对于高 DML 操作，您还可以缓存序列：

```
ALTER SEQUENCE customers_seq CACHE 100; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:35:05.740

为主表创建序列使用插入到
主表中`your_sequence.nextval`
插入子（从属）表使用完成`your_sequence.currval`

```
create table parent (id integer primary key not null);
create table child (id integer primary key not null, pid integer not null references parent(id));
create sequence parent_seq;
create sequence child_seq;

insert into parent (id) values (parent_seq.nextval);
insert into child (id, pid) values (child_seq.nextval, parent_seq.currval);
commit; 
```

要解释为什么 max(id) 不能可靠地工作，请考虑以下场景：

1.  事务 1 检索 max(id) + 1（产量，例如 42）
2.  事务 1 插入一个 id = 42 的新行
3.  事务 2 检索 max(id) + 1（也产生 42，因为事务 1 尚未提交）
4.  事务 1 提交
5.  Transcation 2 插入一个 id = 42 的新行
6.  事务 2 尝试提交并获得唯一的密钥违规

现在想想当你有**很多**事务这样做时会发生什么。你会得到**很多**错误。此外，您的插入会越来越慢，因为计算 max(id) 的成本会随着表的大小而增加。

序列*是*解决这个问题的唯一合理（即正确、快速和可扩展）的方法。

**编辑**

如果您对另一个无法应对这种策略的 ORM 感到震惊（现在几乎所有 DBMS 都支持这种策略 - 甚至 SQL Server 现在也有序列），那么您应该能够在您的客户端代码中执行以下操作：

使用编程语言中的变量检索下一个 PK 值`select parent_seq.nextval from dual`（这是检索 PK 值的快速、可扩展且正确的方法）。

如果你可以运行 a`select max(id)`你也可以运行一个`select parent_seq.nextval from dual`. 在这两种情况下，只需使用从该 select 语句获得的值。

# javascript - 如果不是 inputA，则禁用输入 B&C

> ID：11853334
> 
> 赞同：0
> 
> 时间：2012-08-07T20:09:34.703
> 
> 标签：javascript, jquery

[http://jsfiddle.net/6Pu3E/](http://jsfiddle.net/6Pu3E/)

JS：

```
$(document).ready(function() {
    var block = false;
    if $('#password').attr('disabled'); {
        block = false;
    }else{
        block = true;
    };
    if block {
        $('.form_input input').attr('disabled','disabled');
    }else{
        $('.form_input input').removeAttribute('disabled');
    }
}); 
```

HTML：

```
<form>
    <input id="password" value="" />
    <input class="form_input" id="Special" />
    <input class="form_input" id="Nothing Special" />
</form> 
```

目标是，如果 ID="password" 的第一个输入没有禁用属性，则具有某个类的所有输入都会禁用该属性。如果第一个输入被禁用，则不会发生任何事情。即其他输入不会获得禁用属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:15:34.777

您的 javascript 语法和使用`$()`都不正确。If 语句需要在被评估的表达式周围加上括号，并在元素中`$('.form_input input')`查找元素。`<input>``.form_input`

`disabled`您还可以使用您希望元素上的属性与元素的属性`.form_input`相反的逻辑将整个块缩短到一行。`disabled``#password`

尝试：

```
$(document).ready(function() {
    $('.form_input').prop('disabled',!$('#password').prop('disabled'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:17:56.257

像这样？**[jsFiddle 示例](http://jsfiddle.net/j08691/6Pu3E/18/)**

```
var block = false;
if ($('#password').attr('disabled')) {
    block = false;
} else {
    block = true;
}
if (block) {
    $('.form_input').attr('disabled', 'disabled');
} else {
    $('.form_input').removeAttribute('disabled');
} 
```

或超精简版：

```
$('.form_input').attr('disabled',!$('#password').attr('disabled') );​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/6Pu3E/23/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:24:21.800

```
$(document).ready(function() {
    var foo = $('#password').attr('disabled');
    if (foo == 'disabled'){
    $('.form_input').attr('disabled','disabled');
    }else{
    $('.form_input').removeAttribute('disabled');
    }
}); 
```

**工作演示：http:** [//jsfiddle.net/thewingser/6Pu3E/27/](http://jsfiddle.net/thewingser/6Pu3E/27/)

`block`不需要使用布尔值。老实说，我的变量`foo`并不是真正需要的。我只是为了可读性而这样做。

# ember.js - 如何在 emberjs 中查询 JSON 文件

> ID：11853336
> 
> 赞同：1
> 
> 时间：2012-08-07T20:09:42.207
> 
> 标签：ember.js, ember-data

我以前从未使用过 JSON，但使用过 xml、php、mysql。我在服务器上有一个填充的数据库，并想用 ember.js 开发一个 Web 应用程序来与这些数据（CRUD）交互。

我应该从哪里开始？我知道 ember-data 拥有我在开发时需要的大部分东西，但我不确定如何开始。

由于数据库包含不同的表，是否可以将这些信息保存在一个 json 文件中？这是合适的方法吗？如何从服务器自动生成这个 json 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:48:49.703

您可以从读取查询开始：

你在你的服务器上上传一个带有 json 语法的文件样本（或者使用你的 json 服务，如果它启用的话）来快速启动。测试您是否可以在浏览器中访问它，例如：

```
[ {"id": 1, "desc": "hmarchadour"}, {"id": 2, "desc": "moderator"} ] 
```

那么现在你在你的 embjer js 中获取/创建一个视图，你可以使用 JQuery 来调用这个文件/服务：

```
Ember.View.create({
        templateName : "templateName" // you    
        stuff : [],

        didInsertElement : function() { 
            $.ajax({
                type : "GET", 
                url : <url-of-your-sample>,
                dataType: "json",
                success : function(result) {
                    var tmpStuff = json2Stuff(result);
                    this.set('stuff', tmpStuff);
                }, 
                error : ... }
            );
        }
    }); 
```

问候，

# .net - .NET 中的自定义 CSRF 令牌

> ID：11853337
> 
> 赞同：1
> 
> 时间：2012-08-07T13:29:27.077
> 
> 标签：.net, csrf, web-services

我正在寻找有关如何在我的 .NET 应用程序中创建自定义反 CSRF 令牌的建议。我们在大多数应用程序中使用 ViewState，但我们希望在对 .asmx Web 服务的几次调用中实现自定义令牌保护。

如何在 .NET 中创建安全的自定义令牌？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:26:20.953

首先，ViewState 不仅仅是阻止 CSRF 的魔法棒，如果 ViewState 是比它所阻止的更多攻击的来源的话。[如果您启用了](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet#Viewstate_.28ASP.NET.29)ViewStateUserKey， ViewState 将阻止 CSRF 。（这在您的系统上启用了吗？？？）

您可以阅读[CSRF 预防备忘单](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet)并选择最适合您的方法。最常见的方法是[每个请求都包含一个随机令牌](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet#General_Recommendation%3a_Synchronizer_Token_Pattern)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T04:30:56.790

我建议不要创建一个，而是使用免费提供的、经过时间考验的、质量好的、现有的之一。

例如：[http ://anticsrf.codeplex.com/](http://anticsrf.codeplex.com/)

# windows - 复制数字签名？

> ID：11853340
> 
> 赞同：0
> 
> 时间：2012-08-07T20:09:49.653
> 
> 标签：windows, security, digital-signature, windows-security

根据我对数字签名的了解，当对 exe 进行代码签名时，“签名者”会修改 PE 本身。我注意到它将证书内容添加到 PE 的末尾，并且（显然）添加了对标头的某种引用。

我的问题是：这有多安全？能够对可执行文件进行逆向工程的人不能将其伪造到他自己的可执行文件上，从而伪造数字签名吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T20:31:08.630

代码签名是一种公私密钥操作。签名操作计算 .exe 文件的哈希值（减去存储签名的位），然后使用签名者的私钥加密哈希值。

在客户端验证时，客户端将重做哈希计算，并使用公钥解密存储的签名。如果两个哈希值匹配，则该 exe 未被篡改。

文件的唯一位被加密的是签名 - 其他所有内容都以明文形式存储。没有什么能阻止你撕开 exe 并将其（或其中的一部分）塞入另一个 .exe 中。

签名不是为了防止盗窃——它是为了检测篡改。

# java - 抛出和捕获异常

> ID：11853348
> 
> 赞同：7
> 
> 时间：2012-08-07T20:10:12.707
> 
> 标签：java, exception, exception-handling

嘿 StackOverflow 社区，

关于抛出异常。一般来说，我什么时候抛出异常，什么时候捕获它？

假设我遇到了这种情况，由于发生了一些问题而我不得不退出并且我无法从中恢复。我扔还是接住？

我现在这样做：

```
 try {
       // some code
    }
    catch (IOException e) {
       logger.info("Failed to do something, and cannot continue" + e.getMessage(), e);
       e.printStackTrace();
       throw e;
    } 
```

这是正确的做法吗？如果我只是抛出异常会更合适吗？对不起，我是例外的新手:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T20:25:05.773

当您希望程序继续运行时，通常会在方法中捕获异常。当您想要调用该方法的更高级别的方法来处理异常时，您会抛出异常。例如，您可以将它一直扔回您的 Main 方法，该方法有一个 try..catch 块（可能针对不同的异常使用不同的 catch 块）封装所有方法调用，并且可以在那里处理异常（例如通过结束程序）。

请记住，抛出异常将立即结束该方法。这会影响您的代码流。如果您在方法的中间可能有一个异常，并且如果该异常发生，它下面的代码将无法运行，那么您需要将整个部分包装在一个 try/catch 块中或抛出一个异常。

一个一般性的建议 - printStackTrace() 不好。您可以自己创建更好的错误输出（您也可以在输出中包含堆栈跟踪）。更好的是，使用日志记录。

我推荐阅读[这篇关于异常的介绍](http://onjava.com/pub/a/onjava/2003/11/19/exceptions.html)和[这篇介绍好的和坏的异常模式](http://today.java.net/article/2006/04/04/exception-handling-antipatterns)的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:13:37.837

如果发生致命异常，则捕获异常并很好地结束您的程序。重新抛出而不捕获只会杀死你的程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:20:46.157

如果您知道异常不是您可以处理的，请让异常离开而不首先捕获它。有一个异常处理程序可以捕获所有内容并将其与堆栈跟踪一起记录到文件中。例如，如果您的程序从命令行运行，您可以在 main 方法中捕获所有内容并将其记录到那里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T20:23:29.750

当您与它有关时，您会 捕获*异常。*在您的情况下 - 写入日志，向用户显示消息并有序退出。
当它发生时，您无能为力时*抛出异常。*

我推荐你使用微软的**企业库异常处理应用程序块**。它将帮助您处理异常，这是一种您能够控制流程并进行配置更改的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T20:14:54.607

捕获后，我会记录该事件，然后执行您需要的操作以便整齐地关闭，然后调用 System.exit 但我不会再次抛出该异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T20:17:09.100

由于未处理的异常而终止程序是不好的做法。如果您捕获到致命且不可恢复的异常，请执行以下操作：

1.  记录它
2.  执行任何必要的清理工作
3.  终止程序

# ruby - Ruby 和 EventMachine-WebSockets - 它有多异步？

> ID：11853357
> 
> 赞同：0
> 
> 时间：2012-08-07T20:10:58.883
> 
> 标签：ruby, asynchronous, websocket, eventmachine

我正在通过 EventMachine 使用 WebSockets 在 Ruby 上构建服务器。

假设用户 Carl 要汽车。

向 CarManager 请求 ID 为“7”的汽车。CarManager 创建一个 Car 实例，Car 从 Mongo 数据库中加载自身（提供了 ID）。Car "7" 像缓存一样存储在 CarManager 中，只要 Carl 或其他任何人继续使用或请求它。然后通过 WebSocket 将 Car 发送给 Carl。我将卡尔的 WS 存储在某个地方。

如果两个用户，比如说，Lenny 和 Carl，都在“确切”的时间要求 Car id “7”，会怎样。CarManager 会因为在这两种情况下都找不到 Car 7 的缓存版本，因此两次都从数据库中获取并实例化它，或者这两个 WebSocket 请求中的一个将首先处理，然后第二个将使用缓存的版本？

WebSockets 的整个异步事情让我有点困惑。感谢您对此的任何见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T01:38:12.340

让我这样说吧：假设您已经扩展到两台服务器。你应该明白你创建惰性汽车的方法是不正确的。您不应该允许用户使用提供的 id 创建，或者您应该使用一些外部互斥锁，例如 CarManager 中的“Car:7:loading”。或者，或者，您可以使 CarManager 成为透明代理，将获取 Cars 的工作放在其上（并在那里面临相同的并发问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T01:56:54.830

我会使用类似的东西`Mongoid`来隐藏大部分细节，这样当 Carl 的浏览器发送一个 websocket`onmessage`请求时，就像`{:command => 'get_car", :car_id => "7"}`你的 EM 的`onmessage`处理程序看起来有点像

```
ws.onmessage do |msg|
  message = JSON.parse(msg)
  car = Cars.where(car_number: message[:car_id]).first
  ws.send(car.to_json)
end 
```

显然您想要处理找不到汽车或消息格式不正确等的情况，并且您可能想要自定义返回的 JSON 位（`.to_summary`例如向`Car`模型添加一个方法）所以它只返回客户关心的汽车信息。

您不必担心哪个请求先进来，或者即使它们同时进来，`mongoid`也会为您处理低级别的东西。

# objective-c - [NSObject 描述]

> ID：11853358
> 
> 赞同：5
> 
> 时间：2012-08-07T20:11:02.397
> 
> 标签：objective-c, ios, c, foundation

你好，你能给我一个这个方法的用法的例子吗

```
+(NSString *)description 
```

我是否将描述与 NSObject（任何类型的对象）或 NSString 的实例一起使用？

还是我不使用实例，直接使用 NSObject（任何类型的对象）或 NSString？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-07T20:14:09.273

实例的描述为您提供了有关您创建的特定实例的信息。

**- (NSString *)描述;**

```
NSString *string = [NSString alloc] initwithString:@"aString"]];
[string description]; 
```

*为您提供有关此实例的信息（内存中的位置等）*

另一方面：

**+ (NSString *) 描述；**

```
[NSString description]; 
```

*为您提供有关 NSString 类的信息。*

相同的规则适用于所有 NSObject 子类和其他符合 NSObject 协议的类，例如**NSArray**、**NSDictionary** * *NSProxy* * 等

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T20:23:36.973

假设我们有：

```
@interface randomObject : NSObject
{
    NSString  *yourString;
} 
```

在某处：

```
yourString = [[NSString alloc] initWithString:@"random text"]; 
```

然后我们可以`randomObject`像这样覆盖......

```
- (NSString *)description
{
  return [NSString stringWithFormat:@"%@", yourString];
} 
```

完成此操作后，我们可以使用 NSObject 调用 NSLog：

```
-(void)viewDidLoad {
    randomObject *ourObj;

    ourObj = [[randomObject alloc] init];

    NSLog(@"%@", ourObj); //  this will output "random text"
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T20:23:58.347

您似乎主要对类和实例方法之间的区别感到困惑。

`NSObject`声明*类方法* [`+[NSObject description]`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/doc/uid/20000050-description)，正如文档告诉您的那样，“返回一个表示接收类内容的字符串。”。如果您将消息发送`description`到类对象，如下所示：

```
[NSArray description];
[NSNumber description];
[[someObject class] description]; 
```

将调用此方法，您将获得该类用于描述自身的字符串。

另一方面，[`NSObject` *协议*](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intf/NSObject)声明了一个必需的*实例方法* [`-[id<NSObject> description]`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/doc/uid/20000052-BBCBAFEH)，它将返回“一个描述接收者内容的字符串”。当你把它发送到一个实例时，你会得到一个代表它的字符串：

```
NSNumber * n = [NSNumber numberWithInt:10];
[n description];
NSArray * arr = [NSArray arrayWithObjects:@"Lemon", @"curry", @"?", nil];
[arr description];
NSDicitonary * d = [NSDictionary dictionaryWithObject:arr forKey:n];
[d description]; 
```

的所有子类都`NSObject`继承了这两种方法，并且它们可以像其他任何方法一样被覆盖。例如，请注意`NSDictionary`并`NSArray`格式化自己并发`description`送到它们包含的对象。

还应该注意的是，当使用 时`NSLog()`，`%@`格式说明符会导致`description`发送到其参数（无论是类对象还是实例）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T20:14:16.613

最常用的调用实际上使用它

```
- (NSString *)description; 
```

它用于通常的实例，而不是类。它可以在自定义类中被覆盖以提供有关对象的详细信息。如果你试图以字符串的形式访问一个类，描述方法将被自动调用。

```
NSLog(@"array: %@", array);               //Identical
NSLog(@"array: %@", [array description]); //Identical 
```

正如您所说，您可以在课程中使用它

```
[NSArray description]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T20:15:35.440

```
+(NSString *)description 
```

主要用于调试，由实例使用。它允许打印对象的描述。

# hibernate - 在 HQL 查询中转换值

> ID：11853360
> 
> 赞同：1
> 
> 时间：2012-08-07T20:11:13.693
> 
> 标签：hibernate, jpa, hql

我正在运行以下内容作为 HQL 查询的 where 子句的一部分：

```
:timeToTopOfList = ((CAST((j.displayed_position - 1) AS FLOAT) / jp.openings_per_month) * 30) 
```

当我在 SQL Management Studio 中运行它时，它工作得很好，但是当我通过 Eclipse 运行它时，我收到以下错误：

> 引起：java.lang.NullPointerException org.hibernate.dialect.function.CastFunction.render(CastFunction.java:55)

我也在使用 JPA，根据这个[答案](https://stackoverflow.com/a/4791425/573634)，如果您使用 JPA，则无法转换类型。真的吗？

我真的需要将两个 int 值列划分为浮点数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-23T14:04:18.180

转换为字符串时，我遇到了类似的问题。

它是通过输入小写的“字符串”来解决的。

尝试使用小写“浮点数”

查看以下链接以获取说明：

[https://forum.hibernate.org/viewtopic.php?t=960362](https://forum.hibernate.org/viewtopic.php?t=960362)

# sql - 将 SQL 列转换为具有 ID 的行

> ID：11853361
> 
> 赞同：1
> 
> 时间：2012-08-07T20:11:24.397
> 
> 标签：sql, sql-server, database, while-loop

我有 192 个单独的列的数据。它们是列对，因此有 15 分钟时间片的数据和质量控制编号。现在设置的方式每一行代表一天。我想将数据插入到另一个列较少的表中（Date、ReadTime、QualityControlNumber、Reading、...）我开始尝试像这样的 while 循环，但使用变量来更改列标题似乎是不可能的。

我应该嵌套while循环来增加列标题还是我应该使用另一个技巧

代码尝试：

```
Declare @count varchar (10), 
    @QC varchar (10), 
    @Interval varchar(10) 
set @count = 1 
set @QC = 'QC#' + @count 
set @Interval = 'Interval#' + @count 

While (@count<97) 
    BEGIN 
        insert into Data_DATEstr (Number,[ReadDate],TimeInterval,QCReading,IntervalReading,ConversionFactor) 
        select [Number], [Start Date], @count, ['QC#'+@count], [Interval# +@count] ,[Conversion Factor] 
        from table 
        where [Number] = '103850581' 
            and [Start Date] = '060112' 

        set @count = (@count+1) 
    END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:21:38.330

无需为此使用 while 循环。你想要一个[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)如果你试图将 192 个单独的列转换为行，那么你肯定会想要使用一个`UNPIVOT`函数。这可以使用动态 SQL 编写，因此您必须对所有字段进行编码：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('test') and
               C.name like 'col%'
         for xml path('')), 1, 1, '')

set @query = 'SELECT QualityControlNumber, replace(col, ''col'', '''')  as col, value
            from test
            unpivot 
            (
               value
               for col in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8f406/2)

为此使用动态 SQL 将获得执行查询时要转置的字段列表。这也避免了您必须为 192 个单独的列手动编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:19:30.017

尽管您的问题并不完全清楚，但听起来您需要某种类似于[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 这使您可以将列旋转为行。我建议阅读它，看看它是否对你有用——即使它没有，它可能会建议一种可行的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:19:42.347

您想要的命令是 unpivot。就像是：

```
select Date, ReadTime, QualityControlNumber, Reading
from t
unpivot (Reading for date in (day1,  . . . , dayn) as unpvt 
```

你会发现你不会真正得到日期，而是原始的列名。您可以通过将 unpivot 查询放在子查询（或 CTE）中，然后使用字符串操作和强制转换将列名转换为日期来解决此问题。

# ruby-on-rails - fields_for 中使用的 :index 选项是什么

> ID：11853364
> 
> 赞同：1
> 
> 时间：2012-08-07T20:11:33.570
> 
> 标签：ruby-on-rails, ruby

在 Rails 3 中使用的 fields_for 中的 :index 选项是什么？我正在阅读文档，但我不明白。

我正在尝试使用 radio_button 助手，但它不起作用，可以检查所有单选按钮。

```
<%= f.fields_for :answers do |answer_form| %>
   <%= answer_form.text_area :description, :rows => 2 %>
<% end %> 
```

我得到这样的名字`question[answer_attributes][0], question[answer_attributes][1], ...`这些数字是从哪里来的，它们是干什么用的？它们是数组索引吗？

# mongodb - MongoDB Schema Design 排序服务

> ID：11853368
> 
> 赞同：2
> 
> 时间：2012-08-07T20:11:49.573
> 
> 标签：mongodb, schema-design

我有以下对象公司、用户和订单（包含订单行）。用户下达 1 个或多个订单行的订单，这些订单与公司有关。本公司下单时间仅为一周。

我不确定在哪里放置订单数组，它应该是它自己的集合，包含指向用户的链接和指向公司的链接，还是应该位于公司之下，或者最终是否应该位于订单之下用户。

数字方面，我需要计划 50k+ 的订单。

明智的查询，我可能会主要查看公司的订单，但我需要为特定用户找到公司的订单。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T18:27:14.660

1) 对于来自 SQL 世界的人（比如我自己）来说，对 MongoDB 最难学习的事情之一就是新的模式设计风格。在 SQL 世界中，一切都进入第三范式。人们开始认为只有一种正确的方式来设计他们的架构，因为通常有一个。

在 MongoDB 世界中，没有一种最好的模式设计。更准确地说，在 MongoDB 中，模式设计取决于应用程序将如何访问数据。

2) 以下是您需要回答的关键问题，以便为 MongoDB 设计一个好的模式：

*   你有多少数据？
*   你最常见的操作是什么？您主要是插入新数据、更新现有数据还是进行查询？
*   您最常见的查询是什么？
*   您期望每秒执行多少次 I/O 操作？

您在这里谈论的是建模多对一关系：

*   公司 -> 用户
*   用户 -> 订单
*   订单 -> 订单行
*   公司 -> 订单

使用 SQL，您将创建一对具有主键/外键关系的主/从表。在 MongoDB 中，您有多种选择：可以嵌入数据，可以创建链接关系，可以复制和非规范化数据，或者可以使用混合方法。

正确的方法将取决于有关您的应用程序用例的大量详细信息，其中许多您尚未提供。

3）这是我最好的猜测 - 这只是一个猜测 - 对你来说是一个好的模式。

a) 为用户、公司和订单提供单独的集合

如果您正在查看超过 50k 的订单，则有太多订单无法嵌入到单个文档中。将它们作为单独的集合将允许您从公司和用户文档中引用它们。

b) 在公司文档和用户文档中都有一系列对订单文档的引用。这使得查询“查找该公司的所有订单”成为单文档查询

c) 如果您的查询模式支持它，您可能还会有一个从 Orders 返回到拥有公司和/或用户的重复链接。

d) 假设订单行对于单个订单是唯一的，您可以将订单行嵌入订单文档中的数组中。

e) 如果您的订单行引用单个产品，您可能希望有一个单独的产品集合，并在订单行子文档中包含对产品文档的引用

4) 这里有一些关于 MongoDB 模式设计的很好的通用参考资料。

MongoDB 演示文稿：

*   [http://www.10gen.com/presentations/mongosf2011/schemabasics](http://www.10gen.com/presentations/mongosf2011/schemabasics)
*   [http://www.10gen.com/presentations/mongosv-2011/schema-design-by-example](http://www.10gen.com/presentations/mongosv-2011/schema-design-by-example)
*   [http://www.10gen.com/presentations/mongosf2011/schemascale](http://www.10gen.com/presentations/mongosf2011/schemascale)

这里有几本关于 MongoDB 模式设计的书，我认为你会发现它们很有用：

*   [http://www.manning.com/banker/（MongoDB](http://www.manning.com/banker/)在行动）
*   [http://shop.oreilly.com/product/0636920018391.do](http://shop.oreilly.com/product/0636920018391.do)

以下是一些示例架构设计：

*   [http://docs.mongodb.org/manual/use-cases/](http://docs.mongodb.org/manual/use-cases/)

请注意，“MongoDB in Action”一书包含一个电子商务应用程序的示例模式，它与您尝试构建的非常相似——我建议您检查一下。

# android - OpenGL ES 1.0 (Android) 上的混合功能

> ID：11853373
> 
> 赞同：0
> 
> 时间：2012-08-07T20:12:31.573
> 
> 标签：android, opengl-es, textures, blending

我正在为 Android 使用 OpenGL ES 1.0。我有一个由 2 个三角形（四边形）组成的形状，就像一张扑克牌。这张扑克牌使用的纹理有光滑的边角（透明）

当我绘制形状时...以这种方式启用混合功能：

```
 gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA); 
```

如果我只抽一张牌，一切都很好！！！

但是，当我画很多卡片时......并添加一些旋转，我可以看到形状的角落：

![在此处输入图像描述](../Images/528d4645b920eabecaeaf8eacdc89cea.png)

我怎样才能在所有帧上都有透明效果？有没有办法替换所有帧上的混合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:27:17.600

alpha 测试可能`glEnable(GL_ALPHA_TEST); glAlphaFunc(GL_GREATER, 0.1f);`比混合更好，因为在使用混合时，您必须对它们进行排序以从前到后绘制它们。

看起来你是先画最上面的牌，然后再画下面的牌，而在混合时，你必须先画底牌才能正确混合。

# jquery - 删除可拖动属性

> ID：11853375
> 
> 赞同：1
> 
> 时间：2012-08-07T20:12:42.533
> 
> 标签：jquery, drag-and-drop, jquery-ui-draggable

我有一组具有设置的图像`draggable=true`。这些图像旨在被拖放到谷歌地图视图上，并在放置位置创建一个标记。为了防止地图上出现重复图像，我想禁用可拖动设置并更改不透明度。

我的地图可拖放和照片可拖动处理程序是

```
$("#photo"+i).draggable({
  helper: "clone",
  cursor: "move",
  containment:  'body',
  start: function(e){
    $(this).addClass("fade");
    currentPhoto = $(this);   
  }
});

$("#map").droppable({
  drop: function(e){
    var point = new google.maps.Point(e.pageX, e.pageY);
    var data = {
      "location": overlay.getProjection().fromDivPixelToLatLng(point),
      "photo": currentPhoto
    }

    makeMarkers(data.location, $(data.photo).attr("src"), $(data.photo).attr('id'));
  }
}); 
```

在内部`makeMarkers`，该`type`值用于确定标记是在页面加载时从数据库检索值创建的，还是作为被拖动照片图像的 ID。

```
function makeMarkers(location, title, type){
   //variable and marker initialization here    

  if (type == "onload")
    newMarker.setIcon(savedLocation);
  else {
    newMarker.setIcon(unsavedLocation);
    $("img."+type).attr("draggable", "false");
    $("img."+type).attr("opacity", "0.5");
    console.log("Disabling draggability of " +type);
  }

   //marker event handlers here
} 
```

我可以拖放图像并在该位置创建一个新标记。但是，图像属性不变。如何启用该功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:49:07.133

您应该使用[.removeAttr()](http://api.jquery.com/removeAttr/)而不是.removeAttr() `.attr()`。

这段代码应该可以解决问题：

```
function makeMarkers(location, title, type){
   //variable and marker initialization here    

  if (type == "onload")
    newMarker.setIcon(savedLocation);
  else {
    newMarker.setIcon(unsavedLocation);
    $("img."+type).removeAttr("draggable");
    $("img."+type).attr("opacity", "0.5");
    console.log("Disabling draggability of " +type);
  }

   //marker event handlers here
} 
```

# python - 从 python 列表访问二进制数据时出错

> ID：11853382
> 
> 赞同：1
> 
> 时间：2012-08-07T20:13:07.110
> 
> 标签：python, python-2.7, binary-data

我对python很陌生，使用python 2.7。我必须读入一个二进制文件，然后将一些字节连接在一起。所以我尝试了

```
f = open("filename", "rb")
j=0
infile = []
try:
    byte = f.read(1)
    while byte != "":
        infile.append(byte) 
        byte = f.read(1)
finally:
    f.close()
blerg = (bin(infile[8])<<8 | bin(infile[9]))
print type 
```

我意识到重铸为二进制可能是不必要的，但这是我后来的尝试之一。

我得到的错误是 TypeError: 'str' object cannot be mapped as index. 这对我来说是个新闻，因为我没有在任何地方使用字符串。！@#% 我做错了什么？

编辑：完整的回溯文件 binaryExtractor.py，第 25 行，在 blerg = (bin(infile[8])<<8 | bin(infile[9])) 类型错误：'str' 对象不能被解释为索引

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:40:48.493

您应该尽可能使用[`struct`](http://docs.python.org/library/struct.html)，而不是为此编写自己的代码。

```
>>> struct.unpack('<H', '\x12\x34')
(13330,) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:28:02.493

您想使用`ord`从单个字符串返回整数的函数，而不是`bin`返回二进制数的字符串表示形式。

# macos - 如何在 Mountain Lion 上优先考虑 IPv6 地址记录 (AAAA)

> ID：11853386
> 
> 赞同：0
> 
> 时间：2012-08-07T20:13:32.620
> 
> 标签：macos, dns, ipv6, osx-mountain-lion

当一个站点同时具有 AAAA 记录和 A 记录时，

如果使用 Lion，则连接到 AAAA 记录的服务器。
但是，如果是Mountain Lion，连接到A 记录的服务器。

示例：
[http](http://www.kame.net/)
://www.kame.net/ Lion ：Kame 正在跳舞。
Windows 7：Kame 正在跳舞。
山狮：Kame 不会跳舞。

有没有办法在Mountain Lion中优先考虑AAAA记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:07:31.317

Mac OS Lion 和 Mountain Lion 基于延迟测量在 IPv4 和 IPv6 之间进行选择。这个想法是系统选择最适合用户的，但缺点是几乎完全无法预测是使用 IPv4 还是 IPv6 进行连接。我认为没有办法改变这种行为。

# jquery - 获取原始 Twitter 关注者数量

> ID：11853387
> 
> 赞同：1
> 
> 时间：2012-08-07T20:13:35.640
> 
> 标签：jquery, json

我正在尝试获取基本的、原始的 Twitter 关注者数量。看了这个贴子后

[Jquery、JSON 推特关注者数量](https://stackoverflow.com/questions/9794526/jquery-json-twitter-followers-count)

并按照 JSFiddle 的链接，我以一种小的方式对其进行了调整。但是代码是为多个用户名和计数设置的，因此是数组。

[http://jsfiddle.net/AndyMP/yQMXA/](http://jsfiddle.net/AndyMP/yQMXA/)

我让它适用于一个用户名，但鉴于这就是我所需要的，我确信代码可以被削减。任何有关如何这样做的指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:36:02.967

您应该能够摆脱循环和数组。

```
$(document).ready(function() {

    var twitterusername = 'London2012';

    $.getJSON('http://twitter.com/users/' + twitterusername + '.json?callback=?', function(data) {
        $('#twitter').html(data.followers_count);
    });
});​ 
```

# android - 保留数据的 Android 片段

> ID：11853389
> 
> 赞同：5
> 
> 时间：2012-08-07T20:13:37.423
> 
> 标签：android, rotation, android-fragments, retain, parcelable

当一个片段的活动经历一个 onCreate/Destroy 循环时，如何最好地将数据保留在片段中？

在我们的设置中，我们可能会将大型列表从我们的服务器加载到片段自定义列表适配器中，我们希望通过不让它们在轮换时重新加载来平滑用户体验。我们在设置片段 retainInstance=true; 时遇到的问题；是我们的适配器引用了原始活动的上下文，因此会泄漏内存。我们可以将数据存储在片段中并重新创建适配器吗？如果是这样，那真的是正确的做法吗？

下一个想法是将数据存储到会话单例对象中并在轮换后检索，这会带来一些陈旧数据的问题，但我们可以轻松克服。

我看到的另一种选择，似乎是*最佳解决方案，是将数据保存到一个包中，并在旋转后恢复到新片段中；但是，我们有相当多的对象需要在整个应用程序中存储，并且我们的一些对象很复杂，包含列表、多种类型，并且很难打包。有没有更好的解决方案，还是我们必须硬着头皮让它们可包裹？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:17:43.723

只是防止 Activity 在旋转时重新创建自身（等）。添加

```
android:configChanges="keyboardHidden|orientation|screenSize" 
```

到您的 AndroidManifest.xml 中的 Activity 定义。那么就不需要在旋转时保存任何东西。

**编辑：**

如果您不喜欢该解决方案，那么您别无选择，只能使用 onSaveInstanceState 机制。如果您有复杂的数据，只需使您的类可序列化并以这种方式将它们添加到 Bundle 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-12T13:15:31.230

设置

> 安卓：配置更改

Android 清单中的属性是禁用默认销毁和重新创建行为的最黑客和最广泛滥用的解决方法。

在此处查看更多信息

**使用片段处理配置更改**：

[http://www.androiddesignpatterns.com/2013/04/retaining-objects-across-config-changes.html](http://www.androiddesignpatterns.com/2013/04/retaining-objects-across-config-changes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-14T01:25:48.803

根据[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html,you)，只要不与活动、视图等相关联，您完全可以将数据保存在片段中。确实不适用于大量数据并且序列化速度很慢，因此片段非常适合大量数据。

> 您可能无法使用系统通过 onSaveInstanceState() 回调为您保存的 Bundle 完全恢复您的活动状态 - 它并非设计用于携带大型对象（例如位图），并且其中的数据必须序列化然后反序列化，这会消耗大量内存并使配置更改变慢。在这种情况下，您可以通过在您的活动因配置更改而重新启动时保留一个片段来减轻重新初始化活动的负担。此片段可以包含对您要保留的有状态对象的引用。

# javascript - 如何使函数像回调一样

> ID：11853390
> 
> 赞同：1
> 
> 时间：2012-08-07T20:13:43.430
> 
> 标签：javascript, jquery

我怎样才能在完成`shwOpts.show("fast");`时采取行动`removeHighlight()`？

我想如果我将一个匿名函数作为参数放在另一个中，它将充当回调。这没有用。

```
removeHighlight : function(f) {
        // remove previous highlight.
        var highlight = $('#openid_highlight');
        if (highlight) {
            highlight.replaceWith($('#openid_highlight a')[0]);
        }
    },

 moreOptsLink = $("#more-options-link").click(function () {
              moreOptsLink.detach();
              openid.removeHighlight(function(){$("#show-more-options").show("fast");});
              //shwOpts.show("fast");
              openid.setPref("showMoreOpenIdOptions", !0)
            }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T20:17:09.520

您没有执行回调函数

```
removeHighlight : function(f) {
    // remove previous highlight.
    var highlight = $('#openid_highlight');
    if (highlight) {
        highlight.replaceWith($('#openid_highlight a')[0]);
    }

    if (typeof(f) === "function") {
        f();
    }
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:18:44.817

您应该像这样在 removeHighlight 函数中调用回调：

```
removeHighlight : function(f) {
    // remove previous highlight.
    var highlight = $('#openid_highlight');
    if (highlight) {
        highlight.replaceWith($('#openid_highlight a')[0]);
        if( typeof f === 'function' ) {
            f();
        }
    }
},

moreOptsLink = $("#more-options-link").click(function () {
     moreOptsLink.detach();
     openid.removeHighlight(function(){
         $("#show-more-options").show("fast");
     });
     openid.setPref("showMoreOpenIdOptions", true);
}); 
```

通过使用 typeof 控件，当您不将函数作为参数传递给函数时，不会出现任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:17:11.250

```
removeHighlight : function(f) {
        // remove previous highlight.
        var highlight = $('#openid_highlight');
        if (highlight) {
            highlight.replaceWith($('#openid_highlight a')[0]);
        }
   //you need to call f
       f()

    }, 
```

# ios - 防止iOS将单词添加到在UITextField中输入的字典？

> ID：11853391
> 
> 赞同：3
> 
> 时间：2012-08-07T20:13:46.687
> 
> 标签：ios, cocoa-touch, uikit

> **可能重复：**
> [iPhone 键盘安全，](https://stackoverflow.com/questions/1955010/iphone-keyboard-security)

我一直想知道以下几点：如果我在 iOS 上经常输入一个未知单词，在某个时候（我认为是在第三次输入之后）它会将该单词添加到其内部字典中（Google for "dynamic-text.dat “ 了解更多信息）。

但是`UITextFields`我在我的应用程序中使用的呢？如果我不想让 iOS 了解那里输入的内容（因为它是敏感数据）怎么办？在现场禁用自动更正是否足够？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:13:47.787

我用三个`UITextFields`. 第一个具有自动更正YES，第二个具有NO，第三个没有明确设置但设置为安全（密码）。

在 ~Library/Application Support/iPhone Simulator/5.1/Library/Keyboard/dynamic-text.dat 中观察 dynamic-text.dat 我可以看到，在键入一个单词两次并通过主页按钮退出应用程序后，将单词写入所有非安全字段的文件。

*这意味着：即使*在 UITextField 上将自动更正设置为 NO，单词也会存储在 dynamic-text.dat 中！但是，安全字段永远不会写入文件。

我的测试是使用 iOS 5.1 和 iPhone 模拟器完成的。

# sql-server - 在 Report Builder 3.0 中按时间段生成计算字段

> ID：11853393
> 
> 赞同：0
> 
> 时间：2012-08-07T20:13:49.713
> 
> 标签：sql-server, reporting-services, ssrs-2008

我花了数周时间构建一个庞大的视图，然后在 SSRS/Report Builder 3.0 中生成一个庞大的报告，以精细的形式显示主库存水平、采购水平、库存中断等。这份报告的最终结果是，我会将我们的每一个库存商品列为行，并按供应商可折叠地分组。作为列，我有时间值，目前按年分组，然后按月分组（我想在这里添加季节/季度，因为我们是一个非常季节性的业务，但现在可以等待）。

目前，报告显示每个月、每个项目（行）的以下列：发货数量、库存接收数量、期末库存水平、该期间平均缺货时间和数量期间内停电。

所以，为了完成这头野兽，我现在需要的是估计的每日使用量。为此，我想通过列分组获得周期长度，然后减去总和（DaysOutofStock）。结果将是库存天数，然后我将其除以该期间的发货总数。为了简化这一点，我只想知道在商品有库存的日子里，我们平均移动 X。

所以我需要的是周期长度，作为函数中使用的值。有没有办法自动得到这个？它是否隐藏在功能菜单的某个地方？是否有我可以使用的函数或表达式来查看月份或分组或任何列，并告诉我我所在的月份有 X 天？

我的基础数据有很大的差距，尤其是在公司成立的早期，所以没有简单的方法可以从那里得到它（至少，我能想到）。请帮忙！我非常接近最终完成这个项目！谢谢！

如果您需要更多信息或详细信息，我很乐意提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:40:21.997

假设您可以在 SQL 代码中执行此操作，则报告中的月份有以下几天：

```
SELECT [Year], [Month], DateDiff(dd, CAST(CAST([Year] AS VARCHAR) + '-' + CAST([Month] AS VARCHAR) + '-01' AS DATETIME), DateAdd(mm, 1, CAST(CAST([Year] AS VARCHAR) + '-' + CAST([Month] AS VARCHAR) + '-01' AS DATETIME))) AS DaysDifference
FROM MyTable 
```

# imagemagick - 在填充空间上创建带有文本的图像

> ID：11853394
> 
> 赞同：0
> 
> 时间：2012-08-07T20:13:58.760
> 
> 标签：imagemagick

我想使用 imagemagick 创建一个耀斑图像，然后在其上添加文本。我在想这会很容易，但是在生成的图像上添加文本时遇到问题。

到目前为止，这是我所拥有的（请记住，文本和维度都是动态的）：

耀斑：

```
\(
-fill transparent -size 300x1 xc: +noise Random -channel G -separate +channel \
-scale 300x300\! \
\( -size 300x300 gradient: -evaluate cos .5 \) \
-compose hardlight -composite \
-virtual-pixel HorizontalTileEdge -distort Polar -1
\) 
```

文本

```
-fill red \
-gravity center \
-font Arial \
annotate:"Logo 12345678" 
```

**编辑：** 文本正在显示，但我不知道如何在图像顶部过度印记文本，使其填充整个宽度的图像（从左到右，如果可能，使用一些填充）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:49:50.523

想通了：

```
convert \
\( -background transparent -size 300x1 xc: +noise Random -channel G -separate +channel -scale 300x300\! \( -size 300x300 gradient: -evaluate cos .5 \) -compose hardlight -composite -virtual-pixel HorizontalTileEdge -distort Polar -1 \) \
\( -background transparent -size 300x300 -fill blue -gravity center -font Arial caption:"Logo \\n13474899" \) \
-gravity center -composite /tmp/flare_2_final.png 
```

现在我需要弄清楚如何将耀斑的背景颜色从黑色更改为灰色，然后我就完成了。

# go - Google Go Lang 作业顺序

> ID：11853396
> 
> 赞同：3
> 
> 时间：2012-08-07T20:14:07.720
> 
> 标签：go, variable-assignment

让我们看看下面的 Go 代码：

```
package main

import "fmt"

type Vertex struct {
    Lat, Long float64
}

var m map[string]Vertex

func main() {
    m = make(map[string]Vertex)
    m["Bell Labs"] = Vertex{
        40.68433, 74.39967,
    }
    m["test"] = Vertex{
        12.0, 100,
    }
    fmt.Println(m["Bell Labs"])
    fmt.Println(m)
} 
```

它输出这个：

```
{40.68433 74.39967}

map[Bell Labs:{40.68433 74.39967} test:{12 100}] 
```

但是，如果我更改测试顶点声明的**一**小部分，通过向右移动“ `}`”4 个空格，如下所示：

```
m["test"] = Vertex{
    12.0, 100,
} 
```

..然后输出变为：

```
{40.68433 74.39967}

map[test:{12 100} Bell Labs:{40.68433 74.39967}] 
```

为什么这个小小的修改会影响我的地图顺序？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T20:23:54.603

映射“顺序”取决于使用的散列函数。散列函数是随机的，以防止使用散列冲突的拒绝服务攻击。有关详细信息，请参阅问题跟踪器：

[http://code.google.com/p/go/issues/detail?id=2630](http://code.google.com/p/go/issues/detail?id=2630)

根据规范不保证地图顺序。尽管在当前的 go 实现中没有这样做，但未来的实现可能会在 GC 或其他更改映射顺序的操作期间进行一些压缩，而无需您的代码修改映射。假设规范中未定义的属性是不明智的。

> 映射是一种类型的**无序**元素组，称为元素类型，由另一种类型的一组唯一键索引，称为键类型。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-07T20:23:16.913

地图不应该总是以任何固定的顺序打印它的键元素：
请参阅“ [Go：什么决定了地图键的迭代顺序？](https://stackoverflow.com/questions/9619479/go-what-determines-the-iteration-order-for-map-keys) ”

> 然而，在最新的 Go 每周版本中（以及可能在本月发布的 Go1 中），迭代顺序是随机的（它从伪随机选择的键开始，哈希码计算以伪随机为种子）数字）。
> 如果您使用每周版本（和 Go1）编译程序，则每次运行程序时迭代顺序都会不同。

但是，它并没有像规范中那样完全拼写出来（[Ref Map Type](http://golang.org/ref/spec#Map_types)）：

> 映射是一种类型的***无序***元素组，称为元素类型，由另一种类型的一组唯一键索引，称为键类型。

实际上，规范确实说明了它，但在[For 语句部分](http://golang.org/ref/spec#RangeClause)：

> **未指定映射的迭代顺序，也不保证从一次迭代到下一次迭代顺序相同**。
> 
> *   如果在迭代过程中删除了尚未到达的映射条目，则不会产生相应的迭代值。
> *   如果在迭代期间插入映射条目，则行为取决于实现，但每个条目的迭代值最多会生成一次。
> *   如果 map 为 nil，则迭代次数为 0。

这已由2011 年 10 月的[代码审查 5285042引入：](https://groups.google.com/forum/?fromgroups#!topic/golang-dev/E3f93Pvi0wA)

> 运行时：地图迭代的随机偏移量

* * *

疯狂的[线程](https://groups.google.com/d/msg/golang-nuts/YfDxpkI34hY/spKQ_NyqrbgJ)指出：

> “它的存在是为了阻止人们做坏事”的原因似乎特别弱。
> **避免恶意哈希冲突更有意义**。
> 此外，指向代码的指针使得在开发中可以在存在难以解决的间歇性错误的情况下恢复该行为。

Patrick Mylund Nielsen 回复：

> Dan 的注释实际上是 Python 开发人员不愿采用哈希 IV 随机化的主要论据——它破坏了他们的单元测试！PHP 最终选择了根本不做，而是限制了`http.Request`header 的大小，Oracle 等人根本不认为这是语言问题。
> Perl 看到了这个问题并应用了类似于 Go 的修复程序，该修复程序在 2003 年包含在 Perl 5.8.1 中。
> 我可能是错的，但我认为当这篇论文发表时，他们是唯一真正关心的人：“[拒绝服务通过算法复杂性攻击](http://www.cs.rice.edu/~scrosby/hash/CrosbyWallach_UsenixSec2003/)”，攻击哈希表。
> 
> ![最坏的情况是](../Images/85279bdc95144122cbbb0c3c2661868c.png)
> （最坏情况的哈希表冲突）
> 
> 对于其他人来说，这在大约一年前变得非常流行，是一个很好的动力：
> “ [28c3：针对 Web 应用程序平台的有效拒绝服务攻击（YouTube 视频，2011 年 12 月）](http://www.youtube.com/watch?v=R2Cq3CLI6H8) ”大多数流行的 Web 编程语言和平台（包括 PHP、ASP.NET、Java 等）都可以（ab）用于强制 Web 应用程序服务器在几分钟到几小时内为单个 HTTP 请求使用 99% 的 CPU。
> 这种攻击大多独立于底层 Web 应用程序，仅依赖于 Web 应用程序服务器通常如何工作的一个共同事实。

# ios - iOS 日历签入后台

> ID：11853397
> 
> 赞同：0
> 
> 时间：2012-08-07T20:14:07.680
> 
> 标签：ios, background, calendar, push-notification

我希望我的应用程序在后台运行时检查日期。那时，我想做一个本地通知，但我知道该怎么做......我感兴趣的是，如果有人甚至点击主页按钮，我的应用程序在后台，我想要我的应用程序检查它是什么日期（一天一次，在后台），如果它是一个特定的日期，我想做一个本地通知 - 一种特定于应用程序的日历......

有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:42:12.910

您的应用程序（可能）不会在后台运行，因此您无法检查日期，但您可以`fireDate`使用以下命令为特定日期（）安排本地通知

```
UILocalNotification *localNotif = [[UILocalNotification alloc] init];
localNotif.fireDate = [NSDate dateWithTimeIntervalSinceNow:60*90];  // the date you want the notification to fire.
localNotif.timeZone = [NSTimeZone defaultTimeZone];
[[UIApplication sharedApplication] scheduleLocalNotification:localNotif]; 
```

有关更多信息，请参阅[Apple 的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:15:36.183

也许这篇文章对你有帮助[http://mobileorchard.com/ios-advanced-programming-understanding-ios-4-multitasking/](http://mobileorchard.com/ios-advanced-programming-understanding-ios-4-multitasking/)。祝你好运！

# c++ - Lemon Graph Library C++ - 有向图

> ID：11853405
> 
> 赞同：1
> 
> 时间：2012-08-07T20:14:30.780
> 
> 标签：c++, path-finding, directed-graph, lemon-graph-library

我正在寻找 Lemon 来处理我的寻路，因为它具有搜索和最短路径算法等。

问题是，我一开始就一直在理解 Lemon 的工作原理，他们有教程但没有论坛可问。

我对有向图的理解是你有一个节点，它可以链接或不链接到另一个节点，然后你对它有一个权重。

例子：

```
 A    B    C
A    0    1    0
B    1    0    5
C    0    0    0 
```

在此，`A`与`B`权重为 1`C`的连接，与无连接（因此一旦到达，`C`您就会被卡住），并`B`以`A`1 的值`B`连接并`C`以 5 的值连接。

该教程说要做这样的事情：

```
ListDigraph g;
ListDigraph::Node A = g.addNode();
ListDigraph::Node B = g.addNode();
ListDigraph::Node C = g.addNode(); 
```

所以现在我有一个`g`包含三个节点的图表。怎么办？在哪里/如何添加连接信息以及权重值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:21:26.633

来自柠檬教程

```
 ListDigraph g;

  ListDigraph::Node x = g.addNode();
  ListDigraph::Node y = g.addNode();
  ListDigraph::Node z = g.addNode();

  g.addArc(x,y);
  g.addArc(y,z);
  g.addArc(z,x); 
```

从来没有用过这个图书馆的头脑，我只是引用我读过的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-07T03:41:26.303

LEMON 使用的术语与大多数图论文本略有不同，但在我看来，这使得使用该库更容易一些。

首先，LEMON 中边和弧的区别很简单，边是两个节点之间的*无向*边，而弧是有*向*边。

* * *

至于添加边和权重等等，图本身只管理节点和边/弧，与每个相关的唯一数据是一个完整的标识符。

您可以使用以下方法找到此标识符：

```
graph.id(node); 
```

要将数据片段附加到节点/边缘，您可以使用地图。有几种不同类型的映射，但它们通常归结为`NodeMap`、`EdgeMap`或`ArcMap`- 并且，正如您可能猜到的那样，它们分别是`<Node, V>`、`<Edge, V>`和的关联映射`<Arc, V>`，其中`V`值类型（可以是任何具有默认构造函数）。

* * *

要添加边（在无向图中）或弧（在有向图中），您只需创建两个节点，然后使用`.addEdge(n1, n2)`or `.addArc(n1, n2)`。

例如：

```
ListDigraph graph;

ListDigraph::Node n1 = graph.addNode();
ListDigraph::Node n2 = graph.addNode();

ListDigraph::Arc a = graph.addArc(n1, n2); 
```

并将某个值与该弧关联：

```
ArcMap<std::string> arcMap;

arcMap[a] = "This is an arc value!"; 
```

# user-controls - Infragistics 和用户控件中的 Ultra web Grid 列

> ID：11853407
> 
> 赞同：-1
> 
> 时间：2012-08-07T20:14:33.117
> 
> 标签：user-controls, infragistics

我的用户控件（.Net）使用了一个 ultrawebgrid，我想将其中一列的值传递给同一网格中的另一列..谁能建议我传递值的最佳方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:44:17.557

将这些列公开为用户控件 (GET/SET) 的公共属性。这样，您将能够在控件本身之外操作它们。

# vba - 如何根据有限的信息识别特定的 ActiveX 接口

> ID：11853411
> 
> 赞同：2
> 
> 时间：2012-08-07T20:14:53.390
> 
> 标签：vba, interface, activex

我正在开发一个嵌入到罗克韦尔自动化的 Factory Talk View 中的 ActiveX 控件。（请参阅[ActiveX DLL 错误：已解决](https://stackoverflow.com/questions/11834832/activex-dll-error-solved)，看看我有多么好的开始！）

目前我有一个似乎嵌入到主机系统中的 ActiveX 控件，但没有完全集成到 VBA 进程中。我相信这是因为我没有实现一些需要的特定 COM 接口，但我没有关于它是什么的文档。我确实知道像 Microsoft Forms 2.0 控件这样的标准 MS 控件**确实**实现了所需的接口并完全集成。

我缺少的关键功能与我需要设置的属性有关，以便我的 VBA 代码实际看到 ActiveX 对象。**在打开放置在 Factory Talk 屏幕上的任何**activeX 控件的属性面板时可以看到此属性，但在查看嵌入在（例如）Excel 中的 ActiveX 控件的属性时不会看到。因此，我可能正在尝试寻找一些自定义的 Rockwell 实现。我希望 SO 能够帮助我了解如何根据识别它实现的功能来追踪我想要的东西。

现在到实际财产。在 Factory Talk 中，该属性称为“ExposeToVBA”，类型为“long”。您可以从下拉列表中选择 3 个值：

```
 Not Exposed         - When set to this, the controls name is not even visible to VBA code
    Type Info Extension - Not sure what this does
    VBA Control         - VBA code can see and interact with the control. 
```

当我为我的控件选择“未公开”以外的任何内容时，我会收到一个警告对话框，其中没有任何文本。对于其他控件，我需要将其设置为“VBA 控件”以便在 VBA 代码中与其交互（d'oh）

我怀疑此属性的值被转换为对目标控件上的 ActiveX 接口的一些调用。

**问题**

我想要做的是确定与上述功能相匹配的“Forms 2.0 标签”之类的接口实现。还有也许我如何将其转换为基于 C# 的控件（基于[C# ActiveX 控件 (CSActiveX)](http://code.msdn.microsoft.com/windowsdesktop/CSActiveX-c3f43e7d)）

我知道这是一个很长的镜头，但我会很感激任何和所有的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:08:39.950

当我发现一个具有我需要的功能的罐装 Active-x 控件时，这变得毫无意义。

FWIW 这就是我相信我使用的：[DMGraph](http://www.codeproject.com/Articles/310494/2D-Graph-ActiveX-control-in-Cplusplus-with-ATL-no)

# mysql - MySQL 双连接

> ID：11853413
> 
> 赞同：4
> 
> 时间：2012-08-07T20:14:56.090
> 
> 标签：mysql, join

我有两张桌子：

```
teams
----------------
|uid|name |rank|
----------------
|  1  |Team1|  1  |
|  2  |Team2|  2  |
----------------

games
-----------------------------------------------------------------------
|uid|team_one_uid|team_one_score|team_two_uid|team_two_score|game_date|
-----------------------------------------------------------------------
|1|1|70|2|50|2012-12-12| 
```

团队表有一个团队列表和其他数据，如排名。游戏表有一个游戏列表，并通过其唯一 ID (uid) 引用每个团队。我可以运行什么查询来查看包含具有以下列的行的结果：

```
game_uid, team_one_name, team_one_rank, team_one_score, team_two_name, team_two_rank, team_two_score, game_date 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T20:18:59.613

```
select g.uid as game_uid, 
       t1.name as team_one_name, 
       t1.rank as team_one_rank, 
       team_one_score, 
       t2.name as team_two_name, 
       t2.rank as team_two_rank, 
       team_two_score, 
       game_date
from games g 
inner join teams t1 on t1.uid = team_one_uid
inner join teams t2 on t2.uid = team_two_uid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:20:55.793

我想这就是你要找的：

```
SELECT g.uid AS game_uid, t1.name AS team_one_name, t1.rank AS team_one_rank,
g.team_one_score, t2.name AS team_two_name, t2.rank AS team_two_rank, 
g.team_two_score, g.game_date 
FROM `games` g, `teams` t1, `teams` t2 
WHERE t1.id = g.team_one_uid 
AND t2.id = g.team_two_uid 
```

这也可以完成，`INNER JOIN`但它达到了同样的目的。

# python - Python 请求未清理连接并导致端口溢出？

> ID：11853418
> 
> 赞同：1
> 
> 时间：2012-08-07T20:15:18.250
> 
> 标签：python, rest, networking, ssh, python-requests

我在这里做的事情完全超出了我的舒适区，所以希望我只是在做一些愚蠢的事情。

我有一个 Amazon EC2 实例，我用它来运行一个专门的数据库，该数据库是通过 Tomcat 内部提供 REST API 的 web 应用程序控制的。在同一台服务器上，我正在运行一个 Python 脚本，该脚本使用 Requests 库对数据库进行数十万个简单查询（我认为合并查询是不可能的，尽管我接下来会尝试。 )

问题：运行脚本一段时间后，我的 SSH 终端突然出现**管道损坏**错误。当我尝试使用 SSH 重新登录时，我不断收到“操作超时”错误。所以我什至无法重新登录以终止 Python 进程，而不得不重新启动 EC2 实例（这是一个巨大的痛苦，尤其是因为我使用的是临时存储）

我的理论是，每次请求进行 REST 调用时，它都会激活 Python 和 Tomcat 之间的一对端口，但完成后它永远不会关闭端口。所以 python 一直在尝试获取越来越多的端口，最终要么以某种方式抢走并锁定 SSH 端口（让我关闭），要么它只使用所有端口，导致网络系统以某种方式崩溃（正如我所说，我我已经超出了我的深度。）

我也尝试过使用`httplib2`，并且遇到了类似的问题。

有任何想法吗？如果我的端口理论是正确的，有没有办法在完成后强制要求交出端口？或者至少有一种方法可以告诉 Ubuntu 保持 SSH 端口不受限制，以便我至少可以重新登录并终止进程？

或者是否有某种最佳实践来使用 Python 进行大量非常简单的 REST 调用？

编辑：

解决...做：

```
s = requests.session()
s.config['keep_alive'] = False 
```

在发出请求以强制请求完成后释放连接之前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:58:13.653

我的猜测：

[https://github.com/kennethreitz/requests/blob/develop/requests/models.py#L539](https://github.com/kennethreitz/requests/blob/develop/requests/models.py#L539)将 conn 设置为 connectionpool.connection_from_url(url)

这导致[https://github.com/kennethreitz/requests/blob/develop/requests/packages/urllib3/connectionpool.py#L562](https://github.com/kennethreitz/requests/blob/develop/requests/packages/urllib3/connectionpool.py#L562)，这导致[https://github.com/kennethreitz/requests/blob/develop/请求/包/urllib3/connectionpool.py#L167](https://github.com/kennethreitz/requests/blob/develop/requests/packages/urllib3/connectionpool.py#L167)。

这最终导致[https://github.com/kennethreitz/requests/blob/develop/requests/packages/urllib3/connectionpool.py#L185](https://github.com/kennethreitz/requests/blob/develop/requests/packages/urllib3/connectionpool.py#L185)：

```
def _new_conn(self):
    """
    Return a fresh :class:`httplib.HTTPConnection`.
    """
    self.num_connections += 1
    log.info("Starting new HTTP connection (%d): %s" %
             (self.num_connections, self.host))
    return HTTPConnection(host=self.host, port=self.port) 
```

我建议将处理程序连接到该记录器，并侦听与该记录器匹配的行。这会让你看到有多少连接被创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:30:25.390

想通了...请求对连接有一个默认的“保持活动”策略，您必须通过执行显式覆盖该策略

```
s = requests.session()
s.config['keep_alive'] = False 
```

在您提出请求之前。

从文档：

""" Keep-Alive 好消息——多亏了 urllib3，在会话中保持活动是 100% 自动的！您在会话中发出的任何请求都将自动重用适当的连接！

请注意，只有在读取所有主体数据后，连接才会释放回池中以供重用；请务必将 prefetch 设置为 True 或读取 Response 对象的 content 属性。

如果您想禁用 keep-alive，只需将 keep_alive 配置设置为 False：

s = requests.session() s.config['keep_alive'] = False """

此处的请求中可能存在一个细微的错误，因为我正在读取 .text 和 .content 属性，但它仍然没有释放连接。但是明确地将“保持活力”传递为 false 解决了这个问题。

# java - 为什么Java代码需要编译而JavaScript代码不需要

> ID：11853423
> 
> 赞同：18
> 
> 时间：2012-08-07T20:15:35.023
> 
> 标签：java, javascript, compilation, bytecode

为什么用 Java 编写的代码需要编译成 JVM 解释的字节码，而用 JavaScript 这样的语言编写的代码不需要编译，可以直接在浏览器中运行？

有没有简单的方法来理解这一点？

这两种语言的编写方式之间的根本区别是什么，可能有助于理解这种行为？

我不是CS学生，所以请原谅这个问题的幼稚。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-07T20:20:32.453

从历史上看，JavaScript 是一种解释型语言。这意味着解释器接受源代码并一步执行。这里的优点是简单和灵活，但是解释器很慢。编译器将高级语言转换为本地处理器或 VM（在本例中为 Java VM）可以直接执行的低级语言。这要快得多。

现代浏览器中的 JavaScript 现在是动态编译的。所以当脚本被加载时，JavaScript 引擎做的第一件事就是把它编译成字节码然后执行它。从最终用户的角度来看，缺少整个编译步骤的原因是浏览器开发人员（谢天谢地）维护了 JavaScript 没有显式编译的要求。

Java 从一开始就是一种始终具有显式编译步骤的语言。但在许多情况下，这不再是真的了。像 IntelliJ 或 Eclipse 这样的 IDE 可以即时编译 Java，并且在许多情况下删除了显式编译步骤。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T20:24:43.820

JavaScript 和 Java 不是一回事。他们可能有一个相似的名字，但我建议您向[JS 大师道格拉斯·克罗克福德 (Douglas Crockford](http://www.crockford.com/javascript/javascript.html) ) 了解，以帮助澄清他们实际上根本没有关系的事实。

现实情况是，没有什么能阻止 Java 成为一种解释性语言，同样也没有什么能阻止 JavaScript 成为一种编译语言（Chrome 的 javascript 引擎确实会进行编译以提高速度，并且做得非常好）。

在浏览器的上下文中，Java 的运行方式与 Flash 或 Silverlight 相同——需要一个插件，并且浏览器充当该插件的宿主；它承载了一个 Java 运行时环境。

Javascript 被设计为浏览器的脚本语言，这就是浏览器可以原生理解它的原因。 *然而，浏览器如何*真正实现该代码的运行，完全取决于浏览器。也就是说 - 它可以纯粹在脚本级别运行，假设对下一行代码的了解为零并运行纯粹的基于软件的堆栈；或者它可以执行一些 JIT 以使代码更接近硬件并（希望）提高速度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T20:25:09.493

任何语言都可以编译和解释。在这两种情况下，软件都必须读取源代码、拆分、解析等，以检查某些需求，然后为程序的每个部分赋予含义。唯一的区别是编译器随后会继续生成具有（几乎）相同含义的另一种语言（JVM 字节码、JavaScript、机器代码或完全不同的东西）的代码，而解释器会立即执行程序的含义。

现在，在实践中它既简单又复杂。它在许多语言中更简单，更适合这两种语言中的一种——Java 是静态类型的，程序含义的动态性相对较小，因此您可以编译它，从而完成一些原本需要在运行。JavaScript 是动态类型的，在运行时之前您无法决定很多事情（例如 + 是加法还是连接），因此编译不会为您提供太多性能。然而，编译器和解释器的混合（编译为简化的中间表示，然后解释和/或编译）在动态语言实现中越来越流行。还有一个事实是现代 JavaScript 实现*确实可以*编译，事实上 V8*从来没有*解释任何东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T20:27:33.633

由于 Java 和 Javascript 之间编译层次的复杂性，Javascript 存在一些限制。由于字节码是在为特定操作系统编写的 JVM 平台上执行的，而硬件字节码执行在访问系统资源方面更有优势。甚至 C 代码也可以嵌入到 Java 字节码中。另一方面，由于 Javascript 仅在浏览器上运行，因此与它的关系不大。

Java平台有两个主要部分。Java 编程语言和 JVM。它使每个部分只关注自己的领域。这就是 JVM 不处理 Java 编程语法的原因。类似于运行 C 代码时，链接不处理 C 代码而是汇编。

JVM 平台中的字节码很可能是 C 中的程序集。

最终，所有表示都转换为二进制表示，然后以某种方式转换为电信号。它证明我们需要编程水平。

# regex - 使用正则表达式：确保字段包含特殊字符和数字

> ID：11853425
> 
> 赞同：0
> 
> 时间：2012-08-07T20:15:38.747
> 
> 标签：regex

我正在尝试制作一个正则表达式来检查一个字段并确保它包含（特殊字符或数字），包括所有其他字符。我没有正确地做到这一点。

我一直在使用一些正则表达式网站，如[http://www.gskinner.com/RegExr/](http://www.gskinner.com/RegExr/)来给我一些帮助并确保我得到正确的东西，但我不是。

我得到的最接近的是：

```
(?!^[0-9]*$)(?!^[a-zA-Z!@#$%^&*()_+=<>?]*$)^([a-zA-Z!@#$%^&*()_+=<>?0-9]{6,15})$ 
```

尽管要求其中有一个数字，但它会检查所有内容。但我需要它必须有一个数字或特殊字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:32:30.003

这需要一个数字和一个特殊字符：

```
[^\s\w].*\d|\d.*[^\s\w] 
```

这需要一个数字或一个特殊字符：

```
\d|[^\s\w] 
```

管道字符“|” 表示或。

如果同时存在特殊字符和数字，则此行匹配整行：

```
.*(:?[^\s\w].*\d|\d.*[^\s\w]).* 
```

如果有特殊字符或数字，则此行匹配整行：

```
.*(?:\d|[^\s\w]).* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:20:04.270

特殊字符或数字？好吧，那`[^A-Za-z_ ]`可能就足够了。

编辑：

因此，如果您尝试进行密码验证，那么这非常简单，具有积极的前瞻性。无耻从：[http ://www.mkyong.com/regular-expressions/how-to-validate-password-with-regular-expression/](http://www.mkyong.com/regular-expressions/how-to-validate-password-with-regular-expression/)

```
(           # Start of group
  (?=.*\d)      #   must contains one digit from 0-9
  (?=.*[a-z])       #   must contains one lowercase characters
  (?=.*[A-Z])       #   must contains one uppercase characters
  (?=.*[@#$%])      #   must contains one special symbols in the list "@#$%"
              .     #     match anything with previous condition checking
                {6,20}  #        length at least 6 characters and maximum of 20 
) 
```

# linux - 如何阻止 Sublime Text 2 在保存时删除“Read & Execute”标志

> ID：11853429
> 
> 赞同：6
> 
> 时间：2012-08-07T20:15:46.880
> 
> 标签：linux, sublimetext2, file-permissions, samba

使用 Sublime Text 2，我有时必须编辑由 bash 在 cron 中执行的 shell 文件。但是，当我保存这些文件时，正在从文件中删除执行标志，导致 cron 在尝试执行文件时失败。每次更改文件时，我都必须对文件进行 chmod。以前，使用 Ultra-Edit，我从来没有遇到过这个问题。

有没有其他人处理过这个问题，可以推荐修复或解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T21:42:14.733

这个问题可以通过禁用[`map_archive`](http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#MAPARCHIVE)samba 的特性来解决。

```
[global]
map archive = no 
```

这应该可以解决问题。

[资源](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=7969)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T12:58:08.740

假设您正在通过 Samba 编辑文件，Sublime Text 似乎每次保存文件时都会重新创建文件，使用默认的 umask，并且不保留旧权限。

获得 +x 权限的解决方法是设置

```
create mask = 755 
```

在相关共享部分的 Samba smb.conf 文件中。

不利的一面是，每个新文件现在都会有 +x 。

# python - python跨平台应用

> ID：11853430
> 
> 赞同：2
> 
> 时间：2012-08-07T20:16:00.857
> 
> 标签：python, webkit, cross-platform, packaging, py2exe

我正在尝试用 CPython 制作一个可以在 linux 和 windows 上运行的应用程序。我正在使用 webkit 库，女巫在 linux（Ubuntu 12.04）上运行良好，但我无法让它在 Windows 上运行。

我知道我可以使用 将我的应用程序编译成 Windows 可执行文件*(.exe)*，`py2exe`但要做到这一点，它必须在我的 Windows 机器上运行。

问题是：有什么方法可以在 linux 下打包我的应用程序，所以它的依赖项（webkit）会与它捆绑在一起，所以它可以在 Windows 下工作？或者有没有办法在linux下制作一个不需要python文件依赖的windows可执行文件？

谢谢！

编辑：这是我的测试应用程序代码：

```
import gtk
import webkit

class Base:
   def __init__(self):   
       self.builder = gtk.Builder()    
       self.builder.add_from_file("youtubeWindow.ui")       
       self.main_window = self.builder.get_object("main_window")
       self.scrl_window = self.builder.get_object("scrl_window")
       self.webview = webkit.WebView()
       self.scrl_window.add(self.webview)
       self.webview.show()  
       self.webview.open("http://youtu.be/o-akcEzQ6Y8") 
       self.main_window.show()

   def main(self):
       gtk.main()

print __name__
if __name__ == "__main__":
    base = Base()
    base.main() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T18:08:39.517

好的，所以我无法让 webkit 在带有 GTK 的 Windows 上工作，但我发现 Qt 提供了一个集成的 WebKit 模块，所以我下载了 PySide（python 的 Qt 包装器）并用这个脚本对其进行了测试：

```
import sys
from PySide import QtCore
from PySide import QtGui
from PySide import QtWebKit

class MainWindow (QtGui.QWidget):

    def __init__(self):
        super(MainWindow, self).__init__()
        self.setGeometry(300,300,800,600)
        self.setWindowTitle('QtPlayer')
        web = QtWebKit.QWebView(self)
        web.settings().setAttribute(QtWebKit.QWebSettings.PluginsEnabled, True)       
        web.load(QtCore.QUrl("http://youtu.be/Dys1_TuUmI4"))
        web.show()
        self.show()

def main():
    app = QtGui.QApplication(sys.argv)
    win = MainWindow()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

我还使用*GUI2EXE*和 *cx_Freeze* 将其打包到 .exe Windows 应用程序中。（不要忘记包含*atexit、PySide.QtNetwork模块，*[这里](http://qt-project.org/wiki/Packaging_PySide_applications_on_Windows)有更多详细信息）

可以在[此处](http://www.rkblog.rk.edu.pl/w/p/webkit-pyqt-rendering-web-pages/)找到关于 Qt-Webkit 的酷指南（它使用 PyQt，但它与 Pyside 兼容）

[这里](http://zetcode.com/gui/pysidetutorial/)还有一个 Pyside 教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:38:36.427

为了在 Windows 上运行您的脚本，您需要安装 Webkit 及其 Windows 绑定（库）。下面的 2 个链接提供了设置文件和说明。

[http://opensourcepack.blogspot.com/2009/12/pywebkitgtk-windows-binary.html](http://opensourcepack.blogspot.com/2009/12/pywebkitgtk-windows-binary.html) [http://opensourcepack.blogspot.com/2011/01/conservative-all-in-one-pygtk-installer.html](http://opensourcepack.blogspot.com/2011/01/conservative-all-in-one-pygtk-installer.html)

第二个链接提供了一个二进制文件，它安装了所有需要的库（一个多合一的包）。

# java - 将域名插入 servlet 身份验证令牌

> ID：11853433
> 
> 赞同：0
> 
> 时间：2012-08-07T20:16:16.047
> 
> 标签：java, servlets, bytearray, jna, waffle

我在我的网络应用程序中使用[Waffle](http://dblock.github.com/waffle/)作为 SSO 解决方案。

一切正常，但我想稍微修改一些功能：

目前，如果用户未连接到域，SSO 将失败并打开一个小授权对话框：

![在此处输入图像描述](../Images/c00d7cbc80ac6788a672723b7dcd33a0.png)

Windows 授权需要用户名格式，`Domain\Username`但我的大多数用户不知道在他们的用户名前面添加域。因此，如果未指定，我想提供一个默认域名。

我找到了一个可以覆盖的 waffle 函数，它可以让我访问解码的身份验证令牌，我`println`在 waffle 函数中添加了一个，它以纯文本形式显示用户名（有或没有域，具体取决于在对话框中键入的内容） ):

```
public IWindowsSecurityContext acceptSecurityToken(String connectionId, byte[] token, String securityPackage) {

    // I can see the passed username in the logs with this
    System.out.println(new String(token));

    // I don't understand any of the JNA stuff below this comment:
    IWindowsCredentialsHandle serverCredential = new WindowsCredentialsHandleImpl(
            null, Sspi.SECPKG_CRED_INBOUND, securityPackage);
    serverCredential.initialize();

    SecBufferDesc pbServerToken = new SecBufferDesc(Sspi.SECBUFFER_TOKEN, Sspi.MAX_TOKEN_SIZE);
    SecBufferDesc pbClientToken = new SecBufferDesc(Sspi.SECBUFFER_TOKEN, token);

    NativeLongByReference pfClientContextAttr = new NativeLongByReference();

    CtxtHandle continueContext = _continueContexts.get(connectionId);

    CtxtHandle phNewServerContext = new CtxtHandle();
    int rc = Secur32.INSTANCE.AcceptSecurityContext(serverCredential.getHandle(), 
            continueContext, pbClientToken, new NativeLong(Sspi.ISC_REQ_CONNECTION), 
            new NativeLong(Sspi.SECURITY_NATIVE_DREP), phNewServerContext, 
            pbServerToken, pfClientContextAttr, null);

    WindowsSecurityContextImpl sc = new WindowsSecurityContextImpl();
    sc.setCredentialsHandle(serverCredential.getHandle());
    sc.setSecurityPackage(securityPackage);
    sc.setSecurityContext(phNewServerContext);

    switch (rc)
    {
        case W32Errors.SEC_E_OK:
            // the security context received from the client was accepted
            _continueContexts.remove(connectionId);
            //  if an output token was generated by the function, it must be sent to the client process
            if (pbServerToken != null 
                    && pbServerToken.pBuffers != null
                    && pbServerToken.cBuffers.intValue() == 1 
                    && pbServerToken.pBuffers[0].cbBuffer.intValue() > 0) {
                sc.setToken(pbServerToken.getBytes());
            }
            sc.setContinue(false);
            break;
        case W32Errors.SEC_I_CONTINUE_NEEDED:
            // the server must send the output token to the client and wait for a returned token
            _continueContexts.put(connectionId, phNewServerContext);
            sc.setToken(pbServerToken.getBytes());
            sc.setContinue(true);
            break;
        default:
            sc.dispose();
            WindowsSecurityContextImpl.dispose(continueContext);
            _continueContexts.remove(connectionId);
            throw new Win32Exception(rc);
    }

    return sc;
} 
```

整个函数来自 Waffle API，我只在开头添加了 println。

传递的用户名以纯文本形式打印在该令牌内的一堆随机字节字符之间（ÉsR=ÍtÍö?æ¸+Û-）。

诚然，总的来说，我对 JNA 和 java 的理解非常遥远，但我认为因为我可以在这里看到用户名，所以必须有一种方法可以将域名添加到此令牌的用户名部分？我可能是错的。

我的另一个想法是将域添加到`pbClientToken`从传递此方法的原始字节 [] 令牌创建的域中。

是[JNA](http://jna.java.net/javadoc/platform/com/sun/jna/platform/win32/Sspi.SecBufferDesc.html)[对象](http://jna.java.net/javadoc/platform/com/sun/jna/platform/win32/Sspi.SecBufferDesc.html)派生类`pbClientToken`。它的方法看起来很有希望，但我似乎无法弄清楚我应该写什么领域。该方法似乎不适用于.[`Structure`](http://jna.java.net/javadoc/platform/com/sun/jna/platform/win32/Sspi.SecBufferDesc.html)`Stucture``writeField``Structure.getFields``pbClientToken`

我希望这对于更熟悉 byte[] 处理或 JNA 的人来说是一个简单的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:25:37.730

你不能做这个。此对话框背后发生的是对用户计算机上的 LogonUser 的调用，它为您提供一张票，然后将其发送到服务器。不幸的是，服务器不在同一个域中，因此即使您设法提取用户名，它也完全没用。

# javascript - javascript变量等于iframe

> ID：11853436
> 
> 赞同：0
> 
> 时间：2012-08-07T20:16:26.533
> 
> 标签：javascript, iframe

```
var iframe= "<iframe src='article_course.php?option="+option+"&userid="+userid+"&course="+course+"&article="+escape(article)'/>"; 
```

我在这个声明中做错了什么。请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T20:19:10.613

您没有正确终止字符串连接：

```
...+escape(article)'/>"; 
```

应该：

```
...+escape(article) + "/>"; 
```

导致：

```
var iframe = "<iframe src='article_course.php?option="+option+"&userid="+userid+"&course="+course+"&article="+escape(article) +"/>";​​​​ 
```

# codeigniter - Codeigniter：电子邮件仅偶尔有效

> ID：11853441
> 
> 赞同：1
> 
> 时间：2012-08-07T20:17:05.823
> 
> 标签：codeigniter, email

我的电子邮件联系表有问题。以下是相关代码：

```
<?php
$postdata = $this->input->post();

//email
$this->load->library('email');
$this->email->from($postdata['email'], $postdata['firstname'] . ' ' . $postdata['lastname']);
$this->email->to('mail@mydomain.com'); 
$this->email->subject('contact form');
$this->email->message($postdata['message']);    

if ($this->email->send())
    {
    $data['status'] = 'success';
    }
else
    {
    $data['status'] = 'error';
    }

?> 
```

奇怪的是它只是偶尔起作用。我只做了 10 次测试，#2 和 #7 通过了。`$status`在视图文件中使用，它总是“成功”，所以看起来脚本本身工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:23:29.407

正如 Goldenparrot 所指出的，问题在于我的通用测试电子邮件被垃圾邮件过滤器捕获。

# feed - Nextag 饲料的位置

> ID：11853447
> 
> 赞同：0
> 
> 时间：2012-08-07T20:17:30.713
> 
> 标签：feed, shopping

我需要将 Nextag 提要转换为另一种提要格式。我需要找到一些 Nextag 真实的提要来进行测试。有人知道 Nextag 饲料是否有特定的位置吗？例如，雅虎商店的提要位于 http://{domain_name}/catalog.xml。Nextag有类似的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:23:46.627

不。网站可以将 nextag 提要以任何名称放在其服务器上的任何位置，他们只需告诉 nextag 位置。

[您可以在此处](http://feedtugela.com/docs/nextag/ProductFileInstructions.pdf)下载 nextag 提要规范

# iphone - 获取当前选项卡的标识符 - iphone

> ID：11853449
> 
> 赞同：0
> 
> 时间：2012-08-07T20:17:37.133
> 
> 标签：iphone, tabbarcontroller

可能是一个简单的问题，但我正在寻找解决方案。

我需要在 tabbarcontroller 中找到当前选项卡的标识符，并在条件中使用它来运行方法。

我怎么找到这个？

```
if (self.tabbarcontroller.identifier == @"My identifier") {
   // do some method
} else {
   // do the default method
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:47:21.363

```
UIWindow *window = [[UIApplication sharedApplication] keyWindow];
UITabBarController *tabBarController = (UITabBarController*) window.rootViewController;
UIViewController *selectedVC = tabBarController.selectedViewController;
if ([selectedVC.identifier isEqualToString:@"anIdentifier"])
{
  // Do something
} else {
  // Do something else
} 
```

您可以在情节提要中设置 ViewController 的标识符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:40:02.130

查看以下代码。还要确保 UITabBar 的委托正确指向视图控制器，在本例中为 FirstViewController。

```
**FirstViewController.h****

@interface FirstViewController : UIViewController<UITabBarDelegate>

**FirstViewController.m:**

- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item
{
    NSLog(@"%@",[item tag]);
} 
```

# flash - 基于网络的音频编辑器

> ID：11853453
> 
> 赞同：1
> 
> 时间：2012-08-07T20:17:48.327
> 
> 标签：flash, audio-recording, multimedia

在这里寻找一些大方向。目前这超出了我的水平，但我希望最终能达到目标。我的背景是 PHP/Javascript/CSS。

我想创建一个基于 Web 的音频编辑器，类似于以下示例：

[http://soundation.com/studio](http://soundation.com/studio) http://advanced.aviary.com/tools/audio-editor

我什至不确定从哪里开始，所以我就开始提问。请提供您可能有的任何反馈/指导。

这些都是基于闪存的工具。在不了解 Flash 开发的情况下，我猜这些并不是完全在 Flash 中创建的（如果有错误请纠正我）。如果是这样，这样做的一种方法是创建一个用桌面语言（如 C# 或 VB.net）编写并集成到闪存中的应用程序吗？

此外，flash 会是这样的最佳界面吗？HTML5 可能是一种选择还是其他任何一种选择？

任何其他指导将不胜感激。我是从几乎零知识开始的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:30:19.630

精确控制音频或处理大量音频对于 HTML 5 来说仍然是一个糟糕的解决方案，它还不是一个标准，即使是像 Chrome 这样的领导者也无法提供一个足够的解决方案，这是曾经的著名愤怒小鸟制作人所说的。 Chrome 但后来选择了 Flash：

[http://www.2ality.com/2011/05/angry-birds-and-flash.html](http://www.2ality.com/2011/05/angry-birds-and-flash.html)

Flash 在应用程序创建方面为您提供了“跨平台”的能力，因此，如果您想将音频应用程序带到浏览器、非 Windows 桌面甚至移动设备上，Flash 是一个理想的选择。Flash 也是为富媒体设计的，所以一些音频 API 已经得到验证，我在 Flash 6 时看到过由 Flash 创建的节拍盒，现在我们在 Flash 11 中。

如果您考虑使用 php、C# 或 VB，请记住音频应用程序来回会产生大量数据，因此如果它是客户端-服务器应用程序，则必须小心来回传递数据，带宽可能成为任何用户体验的杀手。

毕竟，如果您了解 C# 和一些 JavaScript，那么 Flash 的 ActionScript 应该不难，因为它是带有真正 OO 符号的 JavaScript，如 JScript.NET。至于Flash的API，嗯，不管你用什么框架，你都需要学习。

# grails - 如何在 groovy 中使用 cxf 制作地图？

> ID：11853457
> 
> 赞同：6
> 
> 时间：2012-08-07T20:18:13.060
> 
> 标签：grails, soap, groovy, cxf, groovyws

GroovyWS 是一个在内部使用 CXF 的框架。我想提出如下要求：

```
<param2 xsi:type="ns2:Map">
    <item xsi:type="ns2:Map">
        <key xsi:type="xsd:string">param1</key>
        <value xsi:type="xsd:string">param2</value>
    </item>
</param2> 
```

目前我正在尝试从 grails 服务中执行此操作，如下所示：

```
def proxy = new WSClient("http://xyz", this.class.classLoader)
proxy.initialize()

proxy.client.invoke("call", new HashMap<String, String>()) 
```

这使

```
javax.xml.bind.JAXBException
class java.util.HashMap nor any of its super class is known to this context. 
```

我什至尝试过 [:] 之类的东西，但没有让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T07:54:52.717

好吧，我已经有一段时间没有做这样的事情了，但我似乎记得 CXF 生成的客户端有一个名为“create”的方法，类似于：

```
def mapObject = proxy.create( "ns2.Map" ); 
```

尝试一下，看看 mapObject 是否具有您期望的方法或成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:24:48.837

这是使用[JAXB的一个](http://www.oracle.com/technetwork/articles/javase/index-140168.html)[已知问题](http://www-01.ibm.com/support/docview.wss?uid=swg21307866)

潜在的问题是您的架构不明确。

有两种解决方案：

*   使用名称空间消除任何歧义
*   将每个服务单独解析为不同的 Java 包。

# java - 活动关闭并重新启动后计时器未停止

> ID：11853458
> 
> 赞同：0
> 
> 时间：2012-08-07T20:18:16.863
> 
> 标签：java, android, timer, runnable

我有一个可运行的计时器，它每秒更新一个文本视图，当活动处于 onStop （或调用到后台）时，计时器继续运行。我遇到的问题是，当我重新启动活动时，它会再次启动相同的计时器，因此数字上升的速度是应有的两倍。我已经对其进行了编码，以便在重新启动它们之前杀死两个计时器，但我相信当活动再次启动时，计时器不会被杀死。这是我的代码示例：

```
 t.cancel();
    cd.cancel();
   t = new Timer();
    t.schedule(new TimerTask() {

        @Override
        public void run() {
            runOnUiThread(new Runnable() {

                public void run() { 
```

这只是一小部分，但它应该终止计时器 (t.cancel();) 然后启动一个新计时器，这只发生在活动停止然后重新启动时。请帮助这个问题让我非常疯狂。

==================================================== =======

对于愿意大量阅读的勇敢的灵魂，这是我遇到问题的整个活动：

```
 public class PayTracker extends Activity {
    private static double Reserve;
    private static int Reserve1;
    public static double money;
    public static double counter;
    private static int go;
    private static int countdown;
    public static int convert;
    public static double HW;
    public static double OTW;
    public static double HPD;
    public static double DPPS;
    public Timer t = new Timer();
    public Timer cd = new Timer();
    public static String mcountdown = "Time till overtime";
    public static String mmoney = "total cash";
    public static String mcounter = "ticks";
    public static String mReserve = "building total";
    public static String mReserve1 = "building total 2";
    public static String mHW;
    public static String mOTW;
    public static String mHPD;
    public static String mDPPS;
    public static String mgo;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_pay_tracker);
        getActionBar().setDisplayHomeAsUpEnabled(true);
     // Receive messages from options page
       double pHW, pOTW, pHPD;
        Intent intent = getIntent();
        pHW = intent.getDoubleExtra(Options.MESSAGE_HW, 0);
        pOTW = intent.getDoubleExtra(Options.MESSAGE_OTW, 0);
        pHPD = intent.getDoubleExtra(Options.MESSAGE_HPD, 0);
        if(pHW != 0){
            HW = pHW;
            OTW = pOTW;
            HPD = pHPD;
        }
     // Color buttons
        Button buttonc = (Button) findViewById(R.id.clockin);
        buttonc.getBackground().setColorFilter(0xFF00FF00, PorterDuff.Mode.MULTIPLY);
        Button buttond = (Button) findViewById(R.id.clockout);
        buttond.getBackground().setColorFilter(0xFFFF0000, PorterDuff.Mode.MULTIPLY);

//      go = 0;
        // Calculate pay per second
        final double PPS = (HW/3600);
        DPPS = (PPS/50);
        final double OTPPS = (OTW/3600);
        final double DOTPPS = (OTPPS/50);
        final double HPDPS = (HPD*3600);
        final double DHPDPS = (HPDPS*50);
        // Display

        final TextView t1 = (TextView) findViewById(R.id.yourpay);
        t1.setTextColor(Color.parseColor("#008000"));
        final TextView t2 = (TextView) this.findViewById(R.id.payper);
        final String result2 = String.format("%.8f", OTPPS);
        final String result = String.format("%.8f", PPS);

       // if(go != 1){
       //   go = 1;
       // if(go == 1){
        t.cancel();
        cd.cancel();
       // go = 0;
       // }
       // if(go == 0){
       //   go = 1;
       t = new Timer();
        t.schedule(new TimerTask() {

            @Override
            public void run() {
                runOnUiThread(new Runnable() {

                    public void run() {
                        if(DHPDPS==0){
                            money = (DPPS+Reserve);
                            Reserve = (money);
                            String end = String.format("%1f", money);
                            t1.setText("$" + end);
                        }else if(counter > DHPDPS && DOTPPS != 0 && DHPDPS != 0){
                            money = (DOTPPS+Reserve);
                            Reserve = (money);
                            String end = String.format("%1f", money);
                            t1.setText("$" + end);
                        } else{

                            money = (DPPS+Reserve);
                            Reserve = (money);
                            String end = String.format("%1f", money);
                            t1.setText("$" + end);
                        }
                        counter++;
                        //if(counter == 3000)
                        //   t.cancel();

                        // Display pay per second
                        if(counter <= DHPDPS || DHPDPS == 0){
                        t2.setText("Your pay per second is: $"+result);
                        }else{
                            t2.setText("Your pay per second is: $"+result2);
                        }
                    }
                }); 
            }
        }, 20, 20);

     // Make countdown to overtime display

        final Intent intent1 = new Intent(this, PayTracker.class);
     // Create the notification
        final Notification notification = new Notification(R.drawable.ic_launcher, "Click here to check your pay!", System.currentTimeMillis());
        // Create an Intent for the notification to launch
        // Create a PendingIntent for the associated Intent
        final PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, intent1, 0);
        cd = new Timer();
        final TextView count = (TextView) findViewById(R.id.countdown);
        convert = (int)HPDPS;
        cd.schedule(new TimerTask() {
            @Override
            public void run() {
                runOnUiThread(new Runnable() {
                    public void run(){
                        countdown = (convert - Reserve1);
                        int hours = (countdown/3600);
                        if(OTPPS != 0 && HPDPS != 0){
                                count.setText("Seconds Remaining to Overtime: " + countdown + "\nAbout " + hours + " Hours");
                                Reserve1++;
                            }

                        // Set the notification's details
                        final String end = String.format("%.6f", money);
                        notification.setLatestEventInfo(getApplicationContext(), "Your Current Pay:", "$"+end, pendingIntent);
                        // Submit the notification to the system
                        ((NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE)).notify(0, notification);
                    }
                });
            }

        }, 1000, 1000);
       // }
       // }

         final Button b = (Button) findViewById(R.id.clockout);
         b.setOnClickListener(new OnClickListener() {
             public void onClick(View v) {
                if(go == 1)
                    go = 0;
                 if (t != null){
                     t.cancel();
                     cd.cancel();
                 }
                 }
         });

    }

    public void onRestoreInstanceState(Bundle savedInstanceState) {
        // Always call the superclass so it can restore the view hierarchy
        super.onRestoreInstanceState(savedInstanceState);
            // Restore value of members from saved state
            countdown = savedInstanceState.getInt(mcountdown);
            Reserve = savedInstanceState.getInt(mReserve);
            money = savedInstanceState.getInt(mmoney);
            counter = savedInstanceState.getInt(mcounter);
            Reserve1 = savedInstanceState.getInt(mReserve1);
            HW = savedInstanceState.getInt(mHW);
            OTW = savedInstanceState.getInt(mOTW);
            HPD = savedInstanceState.getInt(mHPD);
            DPPS = savedInstanceState.getInt(mDPPS);
            go = savedInstanceState.getInt(mgo);
    }

    @Override
    public void onStart(){
        super.onStart();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_pay_tracker, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                NavUtils.navigateUpFromSameTask(this);
                return true;
        }
        return super.onOptionsItemSelected(item);
    }

    public void sendMessage(View view) {
        // Calculate pay per second
        final double PPS = (HW/3600);
        DPPS = (PPS/50);
        final double OTPPS = (OTW/3600);
        final double DOTPPS = (OTPPS/50);
        final double HPDPS = (HPD*3600);
        final double DHPDPS = (HPDPS*50);
        // Display

        final TextView t1 = (TextView) findViewById(R.id.yourpay);
        t1.setTextColor(Color.parseColor("#008000"));
        final TextView t2 = (TextView) this.findViewById(R.id.payper);
        final String result2 = String.format("%.8f", OTPPS);
        final String result = String.format("%.8f", PPS);

        //if(go != 1){
        //  go = 1;
            t.cancel();
            cd.cancel();
       t = new Timer();
        t.schedule(new TimerTask() {

            @Override
            public void run() {
                runOnUiThread(new Runnable() {

                    public void run() {
                        if(DHPDPS==0){
                            money = (DPPS+Reserve);
                            Reserve = (money);
                            String end = String.format("%1f", money);
                            t1.setText("$" + end);
                        }else if(counter > DHPDPS && DOTPPS != 0 && DHPDPS != 0){
                            money = (DOTPPS+Reserve);
                            Reserve = (money);
                            String end = String.format("%1f", money);
                            t1.setText("$" + end);
                        } else{

                            money = (DPPS+Reserve);
                            Reserve = (money);
                            String end = String.format("%1f", money);
                            t1.setText("$" + end);
                        }
                        counter++;
                        if(counter == 3000)
                           t.cancel();

                        // Display pay per second
                        if(counter <= DHPDPS || DHPDPS == 0){
                        t2.setText("Your pay per second is: $"+result);
                        }else{
                            t2.setText("Your pay per second is: $"+result2);
                        }
                    }
                }); 
            }
        }, 20, 20);

     // Make countdown to overtime display

        final Intent intent1 = new Intent(this, PayTracker.class);
     // Create the notification
        final Notification notification = new Notification(R.drawable.ic_launcher, "Click here to check your pay!", System.currentTimeMillis());
        // Create an Intent for the notification to launch
        // Create a PendingIntent for the associated Intent
        final PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, intent1, 0);
        cd = new Timer();
        final TextView count = (TextView) findViewById(R.id.countdown);
        convert = (int)HPDPS;
        cd.schedule(new TimerTask() {
            @Override
            public void run() {
                runOnUiThread(new Runnable() {
                    public void run(){
                        countdown = (convert - Reserve1);
                        int hours = (countdown/3600);
                        if(OTPPS != 0 && HPDPS != 0){
                                count.setText("Seconds Remaining to Overtime: " + countdown + "\nAbout " + hours + " Hours");
                                Reserve1++;
                            }

                        // Set the notification's details
                        final String end = String.format("%.6f", money);
                        notification.setLatestEventInfo(getApplicationContext(), "Your Current Pay:", "$"+end, pendingIntent);
                        // Submit the notification to the system
                        ((NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE)).notify(0, notification);
                    }
                });
            }

        }, 1000, 1000);

        //}   
    }

    @Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
        // Save the user's current game state
        savedInstanceState.putInt(mcountdown, countdown);
        savedInstanceState.putDouble(mReserve, Reserve);
        savedInstanceState.putDouble(mmoney, money);
        savedInstanceState.putDouble(mcounter, counter);
        savedInstanceState.putDouble(mReserve1, Reserve1);
        savedInstanceState.putDouble(mHW, HW);
        savedInstanceState.putDouble(mOTW, OTW);
        savedInstanceState.putDouble(mHPD, HPD);
        savedInstanceState.putDouble(mDPPS, DPPS);
        savedInstanceState.putInt(mgo, go);

        // Always call the superclass so it can save the view hierarchy state
        super.onSaveInstanceState(savedInstanceState);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();  

        if(t != null)
            t.cancel();
        if(cd != null)
            cd.cancel();   
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:46:59.747

这是解决这个问题的一种方法。

```
static Timer mTimer = null;

onCreate() {
    if (mTimer == null)
        mTimer = new Timer();
    } else {
        // You shouldn't have to do nothing because your timer should be running
    }
} 
```

请注意，这里通常存在几个问题。静态基本上是说只是创建该对象的一个​​实例。作为副作用，它还尝试回收相同的内存地址。无论哪种方式，一旦您的应用程序处于后台，系统就可以随时清理它，因此您不能保证可以恢复您的计时器。还有很多其他方法可以解决这个问题，但这超出了这个问题的范围。

# java - Java 递归和性能

> ID：11853459
> 
> 赞同：6
> 
> 时间：2012-08-07T20:18:18.147
> 
> 标签：java, recursion

递归是否会对处理器和内存造成严重影响？我的意思是，我的一个线程有一个方法，很可能会调用它自己。假设它每秒可以自调用一次。我的应用程序应该至少运行 24 小时而不会停止，因此它提供了 (60*60*24) 86400 个自调用方法。

它如何影响第二个（主）线程？

对不起我的英语不好，也没有代码，但我不是在家写的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T20:24:52.970

如果在第 86400 次调用之前没有返回语句将结束递归调用字符串，则很可能由于堆栈上的递归调用过多而导致堆栈溢出错误。如果可能，请尝试实施迭代解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T20:35:50.940

递归调用在内存方面非常低效。
这是因为每个递归调用都会向堆栈添加一个新帧，因此对于`N`调用，您有`O(N)`内存要求。
递归方法通过简单的代码以非常简单的方式（例如遍历树）解决难题。
不利的一面是，如果您不知道自己在做什么，则可能由于递归调用过多而导致内存不足。
因此，如果您知道可以递归解决问题但需要太多递归，请尝试迭代地实现它（大多数但不是所有递归算法都可以转换为迭代算法）

例子。在我的 Windows 32 位 (4GB) 中，以下内容`Exception in thread "main" java.lang.StackOverflowError`在 7380 之后调用

```
public static void recursing( int n ){
        System.out.println(n++);
        recursing(n);
}  
public static void main(String[] args) {
    recursing(1);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:31:13.277

我不确定它是否适合您的问题，但听起来调度程序可能很有用，因为您基本上是在说它应该每秒运行一次。您可以尝试使用[Quartz Scheduler](http://quartz-scheduler.org/)。

您可以创建一个 Job，然后使用简单的触发器或 cron 触发器告诉它永远每秒运行一次。[石英文档](http://quartz-scheduler.org/documentation/quartz-2.1.x/quick-start)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T20:51:21.547

在 Java 中，使用循环通常比使用递归更有效。在某些情况下，递归是最有效的。

一个处理器每秒可以轻松进行 1000 万次调用或每天数万亿次调用。86400 不是很多，我不会担心。

> 假设它每秒可以自调用一次。

这没有多大意义。使用循环是一种很重要的方法。仅当您打算在完成后返回时才使用递归。

# java - 如何在 Eclipse EE (Java) 上配置 mySQL

> ID：11853464
> 
> 赞同：3
> 
> 时间：2012-08-07T20:18:39.293
> 
> 标签：java, mysql, eclipse

下载：

*   Java EE*   Eclipse 靛蓝 EE*   mysql 5.5

从这一点来看，我不知道如何直接从 eclipse 创建一个 mySQL 数据库。我找到了使用 WAMP 服务器的方法，但是我不打算这样做。
我相信第一步在于以某种方式使用 eclipse/java 配置 mySQL，但此时我有点迷茫，我不知道如何继续。

注意：鉴于我是 CS 领域的初学者，我的问题可能缺少必要的细节，因此如果您有这种感觉，请告诉我，我将编辑我的问题并提供更多细节。
谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T21:48:05.310

如果需要更多帮助，这里有一张非常清晰且一步一步的图片：

[http://books.zkoss.org/wiki/Setup_MySQL_DB_in_Eclipse](http://books.zkoss.org/wiki/Setup_MySQL_DB_in_Eclipse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T11:54:29.637

试试这个 Eclipse 插件。适用于所有 oracle/mysql/postgre。数据库操作/查询不需要像 SQLyog 这样的外部 ide...﻿</p>

[单击此处获取 Toad Plugin for eclipse](http://marketplace.eclipse.org/content/toad-extension-eclipse#.UqhSMvRpkcx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:21:45.410

看看以下链接：

[http://forums.mysql.com/read.php?39,91363,91363](http://forums.mysql.com/read.php?39,91363,91363)

[http://obscuredclarity.blogspot.com/2009/08/setup-mysql-development-in-eclipse.html](http://obscuredclarity.blogspot.com/2009/08/setup-mysql-development-in-eclipse.html)

[http://www.classes.cs.uchicago.edu/archive/2006/spring/10200-1/mysql/JDBC.pdf](http://www.classes.cs.uchicago.edu/archive/2006/spring/10200-1/mysql/JDBC.pdf)

从这里开始： [如何在 Eclipse 中使用 MySql 数据库](https://stackoverflow.com/questions/2457179/how-to-use-a-mysql-database-within-eclipse)（特别是**[这个](https://stackoverflow.com/a/2457188/325742)**答案）

# sql - 检查生成脚本中的约束

> ID：11853465
> 
> 赞同：2
> 
> 时间：2012-08-07T20:18:42.677
> 
> 标签：sql, sql-server, tsql, ssms

在 SSMS 的任务 > 生成脚本中，我选择了一些表，在生成的 SQL 中我得到：

```
ALTER TABLE [Project]  WITH CHECK ADD  CONSTRAINT [FK_Project_aspnet_Users] FOREIGN KEY([UserId])
REFERENCES [aspnet_Users] ([UserId])
GO
ALTER TABLE [Project] CHECK CONSTRAINT [FK_Project_aspnet_Users]
GO 
```

如果在第一个语句中指定，为什么它`CHECK`在第二个语句`WITH CHECK`中？第二个语句直接出现在第一个语句之后。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:34:47.083

您正确地观察到它是多余的。

这正是 SSMS 生成脚本的方式。

请注意，脚本可以在生成后进行修改。可以将第一个语句更改为使用 ' `WITH NO CHECK`'，并且第二个语句不会是多余的。

第一条语句的目的是添加约束。

第二条语句的目的是启用约束。

至少，这是我阅读剧本的方式。如果我一一手动运行语句，我可能会收到“约束已存在”异常，但该约束可能未启用。

我仍然会运行第二条语句，以确保启用现有的约束。

# python - Django - 获取基本模型的实例作为相应的代理模型

> ID：11853467
> 
> 赞同：0
> 
> 时间：2012-08-07T20:18:48.757
> 
> 标签：python, django-models

我有一个基本的 Django 模型，以及子类它的代理模型。它们覆盖所有方法。我需要遍历基模型的所有实例（即`for i in BaseModel.objects.all()`），但能够调用它们对应的代理类的方法，而不是基类中声明的占位符方法。

我该如何处理？我实际上有一个模型字段，可以确定哪个代理模型对应于每个特定实例。也许我可以利用它并以某种方式将基类转换为子类？我不知所措。

编辑：我看过[这个问题](https://stackoverflow.com/questions/7526088/django-model-polymorphism-with-proxy-inheritance)，并设法通过写信来改变课程`self.__class__`。但是，与 Django 一起使用是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:46:16.240

```
proxymodels = {"Foo": FooModel, "Bar": BarModel}    

for o in BaseModel.objects.all():
    proxymodels[o.type].method_name(o, *args, **kwargs) 
```

这些方法在代理模型（类）上调用，将 BaseModel 实例作为第一个参数以及您要传递的任何其他参数传递。这样，调用方法就像在代理模型的实例上调用它们一样。

PS：重新分配 self.__class__ 对我来说似乎很hackish。

# ios - MonoTouch + SQLite + SQLite.Net ORM：全文索引

> ID：11853470
> 
> 赞同：4
> 
> 时间：2012-08-07T20:19:03.547
> 
> 标签：ios, sqlite, xamarin.ios, full-text-search

我在[MonoTouch上使用 SQLite 的](http://Xamarin.com)[SQLite.NET](https://github.com/praeclarum/sqlite-net) ORM 包装器来创建基于业务对象的数据库。工作正常。

我希望运行 SQLite`full text indexing command`以便创建一个全文虚拟表。但是[SQLite.Net ORM](https://github.com/praeclarum/sqlite-net)不直接支持。有没有办法在 MonoTouch 上使用其他命令创建索引？

创建全文索引的 SQL 只是：

```
CREATE VIRTUAL TABLE "Term" USING FTS3 (
"Id" INTEGER PRIMARY KEY,
"Word" integer,
"Definition" TEXT 
);

insert into Term(Id,Word,Definition) 
  Select Id,Word,Definition from SomeOtherTable;

drop table SomeOtherTable; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:15:38.070

我相信SQLite.NET不支持创建全文索引，但支持创建普通索引。

无论如何，您可以尝试通过以下方式执行任何自定义 SQL 代码：

```
<YOUR_SUBCLASS_OF_SQLiteConnection>.Execute(<YOUR_SQL_CODE>); 
```

例子：

```
public class LocalDatabase: SQLiteConnection
{
    ...
    public LocalDatabase (string path) : base(path)
    {
        ...
        Execute("CREATE VIRTUAL TABLE \"MyTable\" USING FTS3 ...");
        ...
    }       
    ...
} 
```

# python - 更新 QtableWidget pyqt

> ID：11853473
> 
> 赞同：1
> 
> 时间：2012-08-07T20:19:14.387
> 
> 标签：python, pyqt

我正在尝试从表中的 mysql 数据库更新一个单元格，但我无法将全局变量传递给该单元格。目前我从 mysql 数据库中获取一个整数，然后我尝试全局定义，然后我将变量传递给 mystruct（表的结构），最后我将 mystruct 应用于表，并给我错误`AttributeError: 'Window' object has no attribute 'struct1'`，我知道为什么，因为 self.mystruct1 首次用于`__init__`. 有没有替代方案。请看下面的代码来理解。*注意位置无关紧要

```
import sys
from PyQt4.QtGui import QTableWidget 
from PyQt4 import QtGui,QtCore
import MySQLdb as mdb
import time
class Window(QtGui.QDialog,object):
    def get_data_status(self):
        self.model.execute("""SELECT cpu FROM table
                              WHERE date = (SELECT MAX(date) FROM table)""")        
        rows_status = self.model.fetchone()
        self.listc1 = ['%s' % rows_status]#['%s %s' % self.rows_status]
        self.lista1 = 'Juliet','Julietleft','Pong','Hulk'
        self.listb1 = 'None','None','None','None'
        self.mystruct1 = {'A':self.lista1, 'B':self.listb1, 'C':self.listc1} 
        print self.mystruct1
        return self.mystruct1

        # this is only for the temp time test
    def new_data_status(self):
        self.update_ready_status.emit()

    update_ready_status = QtCore.pyqtSignal()
    def __init__(self,parent=None):
        super(Window, self).__init__()

        self.layout = QtGui.QVBoxLayout(self)
        self.db = mdb.connect('server','user','user','db')
        self.model = self.db.cursor()
        self.table1 = MyTableStatus(Window.get_data_status(self),145,4)
        self.table1.repaint()
        self.table1.reset()
        self.layout.addWidget(self.table1)  
        self.update_ready_status.connect(self.get_data_status)
        self.timer_status = QtCore.QTimer()
        self.timer_status.timeout.connect(self.new_data_status)
        # check every half-second
        self.timer_status.start(1000*2)

class MyTableStatus(QTableWidget):
    def sizeHint(self):
        width = 0

        for i in range(self.columnCount()):
            width += self.columnWidth(i)

        width += self.verticalHeader().sizeHint().width()

        width += self.verticalScrollBar().sizeHint().width()
        width += self.frameWidth()*2

        return QtCore.QSize(width,self.height())
    def __init__(self, thestruct,*args): 
        QTableWidget.__init__(self, *args)
        self.setSizePolicy(QtGui.QSizePolicy.Fixed, QtGui.QSizePolicy.Preferred)
        self.data = thestruct
        self.setHorizontalHeaderLabels(['Server', 'Avg. Disk Queue','CPU Load',"Status"])
        self.setmydata()
        QTableWidget.setSortingEnabled(self,True)

    def setmydata(self):
        for n, key in enumerate(self.data):
            for m, item in enumerate(self.data[key]):
                newitem = QtGui.QTableWidgetItem(item)
                self.setItem(m, n, newitem)

def main():
   app = QtGui.QApplication(sys.argv)
   app.setStyle(QtGui.QStyleFactory.create("plastique"))
   main_window = Window()
   main_window.repaint()
   main_window.show() 
   sys.exit(app.exec_())

if __name__ == '__main__':
   main() 
```

手动触发（代码 2）：

```
import sys
from PyQt4.QtGui import QTableWidget 
from PyQt4 import QtGui,QtCore,Qt
import MySQLdb as mdb
import time
class Window(QtGui.QDialog):

    def __init__(self,parent=None):
        super(Window, self).__init__()
        self.custom_choice = QtGui.QLineEdit()
        self.layout = QtGui.QVBoxLayout(self)
        self.db = mdb.connect('serv','user','pass','db')
        self.model = self.db.cursor()
        self.button = QtGui.QPushButton('Test', self)
        self.button.clicked.connect(self.updateAllViews)
        self.layout.addWidget(self.button)
        self.initialData = self.get_data_status()
        self.table1 = MyTableStatus(self.initialData, 145, 4)
        self.layout.addWidget(self.table1)  

        # check every half-second

    def handleHeaderMenu(self, pos):
        self.menu = QtGui.QMenu()
        self.custom_choice.setPlaceholderText("Server")
        self.wac = QtGui.QWidgetAction(self.menu)
        self.wac.setDefaultWidget(self.custom_choice)
        self.menu.setStyleSheet("QMenu::item {background-color: #264F7D;color: white; font-weight:bold;}")
        self.menu.addAction("Choose Server to Monitor:")
        self.menu.addSeparator()
        self.actionJuliet = self.menu.addAction('Juliet')
        self.actionJulietleft = self.menu.addAction('JulietLeft')
        self.actionPong = self.menu.addAction('Pong')
        self.actionHulk = self.menu.addAction('Hulk')
        self.actionCustom = self.menu.addAction(self.wac)
        self.connect(self.custom_choice, QtCore.SIGNAL("returnPressed()"),self.updateAllViews)
        action = self.menu.exec_(QtGui.QCursor.pos())
        if action == self.actionPong:
            print("pong")
    def get_data_status(self):
        self.tx = self.custom_choice.text()
        self.model.execute("show TABLES;")
        table_array = []
        table_names = self.model.fetchall()
        for lines in table_names:
            lines = str(lines)
            lines = lines.strip("()""''"",")
            table_array.append(lines)
        if any("%s" % self.tx in s for s in table_array):
            table_name = self.tx
            self.model.execute("""SELECT computer_name 
                                  FROM %s""" % (table_name))
            new_user_name = self.model.fetchall()
            self.model.execute("""SELECT idle_time 
                                  FROM %s""" % (table_name))
            new_idle = self.model.fetchall()
            self.model.execute("""SELECT files_opened 
                                  FROM %s""" % (table_name))
            new_files = self.model.fetchall()
            self.model.execute("""SELECT active_time 
                                  FROM %s""" % (table_name))
            new_active = self.model.fetchall()
            self.model.execute("""SELECT session_type 
                               FROM %s""" % (table_name))
            new_session = self.model.fetchall()
#            self.model.execute("""SELECT number_of_machines 
#                                  FROM %s WHERE date = (SELECT MAX(date) 
#                                  FROM %s""" % (table_name,table_name))
            #new_machines = self.model.fetchall()
            self.model.execute("""SELECT cpu 
                               FROM %s""" % (table_name))
            new_cpu_load = self.model.fetchall()
            self.model.execute("""SELECT avg_disk_queue 
                               FROM %s""" % (table_name))
            new_disk_queue_load = self.model.fetchall()
            new_data_user = [item0[0] for item0 in new_user_name]
            new_data_idle = [item1[0] for item1 in new_idle]
            new_data_files = [item2[0] for item2 in new_files]
            new_data_active = [item3[0] for item3 in new_active]
            new_data_session = [item4[0] for item4 in new_session]
            new_data_cpu_load = [item5[0] for item5 in new_cpu_load]
            new_data_disk_queue_load = [item6[0] for item6 in new_disk_queue_load]
#            self.lista.append(new_data_user)
#            self.listb.append(new_data_idle)
#            self.listc.append(new_data_files)
#            self.listd.append(new_data_active)
#            self.liste.append(new_data_session)
#            self.listf.append(new_data_cpu_load)
#            self.listg.append(new_data_disk_queue_load)  
            self.lista = new_data_user
            self.listb = new_data_disk_queue_load
            self.listc = new_data_cpu_load
            self.listd = new_data_active
            self.liste = new_data_files
            self.listf = new_data_session
            self.listg = new_data_idle  
            self.mystruct2 = {'A':self.lista, 'B':self.listb, 'C':self.listc,'E':self.liste,'D':self.listd,'F':self.listf,'G':self.listg}  
        else:
            self.NotFound()
        return self.mystruct2

    def updateAllViews(self):
        _ = self.get_data_status()
        self.updateTable()

    def updateTable(self):
        self.table1.updateFromDict(self.mystruct1)

class MyTableStatus(QTableWidget):

    def __init__(self, thestruct, *args): 
        QTableWidget.__init__(self, *args)
        self.setSizePolicy(QtGui.QSizePolicy.Fixed, QtGui.QSizePolicy.Preferred)
        self.setHorizontalHeaderLabels(['Server', 'Avg. Disk Queue','CPU Load',"Status"])
        self.setSortingEnabled(False)

        self.data = {}
        self.setmydata()

    def updateFromDict(self, aDict):
        self.data.clear()
        self.data.update(aDict)

        self.setmydata()

    def setmydata(self):
        for n, key in enumerate(self.data):
            for m, item in enumerate(self.data[key]):
                newitem = QtGui.QTableWidgetItem(item)
                self.setItem(m, n, newitem)
def main():
   app = QtGui.QApplication(sys.argv)
   app.setStyle(QtGui.QStyleFactory.create("plastique"))
   main_window = Window()
   main_window.repaint()
   main_window.show() 
   sys.exit(app.exec_())

if __name__ == '__main__':
   main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:37:57.277

这段代码中的逻辑有点混乱，但我可以看到你的数据没有更新的问题。

1.  有一个初始数据库拉取，然后您传递`self.mystruct1`给您的自定义表以首次显示数据。在随后的触发器中，您会在主窗口中覆盖该字典，并认为表格将以某种方式具有相同的引用。发生的事情是 Window 有新字典，而 Table 和原始对象坐在那里。
2.  即使您只是清除字典并更新其值，而不是每次都覆盖它，表仍然不知道字典已更改。您需要将信号连接到表本身以刷新其数据，或者直接在表上调用某些内容。简单地命名属性`model`并不能赋予它与 QModel 相同的功能。
3.  这有点附带说明，但是 python 约定通常将 放在`__init__`类的顶部，因此阅读它的人可以在看到它的方法之前立即看到设置你的类的内容。

要解决这个问题，首先清除一些杂物。在这种情况下，您不需要向发出另一个信号的插槽发送信号。除了让它变得更加混乱之外，它并没有做任何事情。只需将信号直接连接到 Table 上将执行更新的插槽即可。还可以摆脱桌面主窗口中的重绘和重置调用。

您可以采用两种方式将数据提供给表。您可以直接从窗口更新 Table 上的数据模型，然后告诉它刷新，或者，您可以通过信号传递新数据并让 Table 处理它...

```
class Window(QtGui.QDialog):

    def __init__(self,parent=None):
        super(Window, self).__init__()
        ...
        initialData = self.get_data_status()
        self.table1 = MyTableStatus(initialData, 145, 4)
        ...
        self.timer_status = QtCore.QTimer()
        self.timer_status.timeout.connect(self.updateAllViews)

        # check every half-second
        self.timer_status.start(1000*2)

    def get_data_status(self):
        ...
        self.mystruct1 = {'A':self.lista1, 'B':self.listb1, 'C':self.listc1} 
        return self.mystruct1

    def updateAllViews(self):
        _ = self.get_data_status()
        self.updateTable()

    def updateTable(self):
        self.table1.updateFromDict(self.mystruct1)

class MyTableStatus(QTableWidget):

    def __init__(self, thestruct, *args): 
        QTableWidget.__init__(self, *args)
        self.setSizePolicy(QtGui.QSizePolicy.Fixed, QtGui.QSizePolicy.Preferred)
        self.setHorizontalHeaderLabels(['Server', 'Avg. Disk Queue','CPU Load',"Status"])
        self.setSortingEnabled(True)

        self.data = {}
        self.setmydata(thestruct)

    def updateFromDict(self, aDict):
        self.data.clear()
        self.data.update(aDict)

        self.setmydata()

    def setmydata(self):
        for n, key in enumerate(self.data):
            for m, item in enumerate(self.data[key]):
                newitem = QtGui.QTableWidgetItem(item)
                self.setItem(m, n, newitem) 
```

您可以为您的表提供初始数据，但您还需要将其设置为由未来的数据库拉取更新。这里我们简单地将定时器连接到一个更新本地数据的方法上，然后刷新你正在使用的各种视图，包括表格。

Table 现在有一个方法可以接受一个字典，并更新它自己的内部数据结构。

这种方法的一个细微变化是在信号中发出新的数据结构，并在窗口中的本地数据结构发生变化时触发它......

```
class Window(QtGui.QDialog):

    update_ready = QtCore.pyqtSignal(dict)

    def __init__(self,parent=None):
        ...
        # call a generate update and emit wrapper
        self.timer_status.timeout.connect(self.refreshData)
        # connect each view with a slot that expects a dict
        self.update_ready.connect(self.table1.updateFromDict)
        ...

    def refreshData(self):
        new_data = self.get_data_status()
        self.update_ready.emit(new_data) 
```

在此示例中，您只需让信号将新数据结构传递到需要 dict 的插槽上的视图（来自上一个示例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:48:43.987

这里发生了一些事情：

1.  您不需要 init 方法中的**全局**声明（textedit 和 rows 不是全局的）
2.  您从以下行看到了错误： MyTableStatus(self.mystruct1, 145, 4) 因为您尚未定义 self.mystruct1 变量 - 您在 get_data_status 方法中定义它，该方法未被调用直到信号发出。您通常希望在做任何其他事情之前定义您的班级成员（只是好的做法）
3.  我不太确定为什么你在那里有 time.sleep(2) 调用，信号的处理应该在 Qt 中很快发生
4.  在执行**self.layout = QtGui.QVBoxLayout(self) 之**类的操作时必须小心。*布局*符号实际上是一个继承的 QWidget 方法（self.layout()）。设置它可能会破坏 Qt 内部。
5.  通常，除非您尝试将其他小部件连接到 update_ready_status 信号，否则您实际上并不需要它

无论如何，我不是 100% 确定你想要做什么 - 但我希望这会有所帮助！

# php - PDO查询中的多个LIKE

> ID：11853476
> 
> 赞同：1
> 
> 时间：2012-08-07T20:19:24.860
> 
> 标签：php, pdo, sql-like

我需要对具有多个“喜欢”的 PDO 执行查询。

到目前为止，我会说我对 1 like 的查询如下所示： $query = $database->prepare('SELECT * FROM table WHERE column1 LIKE ?'); $query->execute(array('%$value1%'));

所以，如果我在mysql中有这个：

```
mysql_query("SELECT * FROM table WHERE column1 LIKE %$value1% OR column1 LIKE %$value2% OR column2 LIKE %$value1%") 
```

它将如何在 PDO 中翻译？

```
mysql_query("SELECT * FROM table WHERE column1 LIKE ? OR column1 LIKE ? OR column2 LIKE ?")
$query->execute(array('%$value1%','%$value2%',.....)); 
```

这样就够了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:09:08.417

差不多就是这样，尽管在第二个示例中您似乎仍在使用`mysql_*`函数而不是 PDO。

除此之外，如果您希望变量替换为字符串，您只需要记住使用双引号即可。

```
$query = $dbh->prepare('SELECT * FROM table WHERE column1 LIKE ? OR column1 LIKE ? OR column2 LIKE ?');
$query->execute(array("%$value1%","%$value2%",.....)); 
```

# c++ - 尝试从命名管道读取时出现错误代码998对内存位置的无效访问

> ID：11853478
> 
> 赞同：1
> 
> 时间：2012-08-07T20:19:36.087
> 
> 标签：c++, winapi, named-pipes

我使用 WCF 和 C# 创建了一个命名管道，以及一个连接到它的客户端，以便我知道它工作正常。现在我正在尝试创建一个 C++ 客户端。到目前为止，我已经能够获得管道的名称，连接到它，并向它写入一些数据。当我尝试从中读取时，我得到`error code 998 Invalid access to memory location`. 这是我正在使用的代码：

```
HANDLE hPipe = CreateFile(pipeName.c_str(), GENERIC_WRITE | GENERIC_READ, 2, NULL, OPEN_EXISTING, NULL, NULL);
BOOL bWrite = WriteFile(hPipe, &message, size, &bytesWritten, NULL);
LPVOID buffer = 0;
DWORD bytesRead;
BOOL bRead = ReadFile(hPipe, buffer, 10, &bytesRead, NULL); 
```

我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T21:17:31.853

没有为 分配内存`buffer`，它当前是一个空指针，并且代码请求将 10 个字节的数据读入一个不存在的数组中。来自[`ReadFile()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467%28v=vs.85%29.aspx)：

> lpBuffer [输出]
> 
> 指向缓冲区的指针，该缓冲区接收从文件或设备读取的数据。

纠正：

```
char buffer[10]; 
```

# asp.net-mvc - IIS 和 Asp.net MVC Intranet 应用程序的 Windows 身份验证问题

> ID：11853479
> 
> 赞同：1
> 
> 时间：2012-08-07T20:19:36.400
> 
> 标签：asp.net-mvc, visual-studio-2010, entity-framework-4

所以我一直在开发一个从现有数据库中提取数据的 MVC 应用程序。我将其设计为“Intranet 应用程序”，以便用户使用其 Windows 凭据自动登录到该应用程序。这是可行的，因为属性 @User.Identity.Name 返回我的 Windows 登录名。（以及其他用户），并且他们可以访问应用程序本身。但是，当尝试访问信息所在的数据库时，出现以下错误：

```
[SqlException (0x80131904): 用户“**我的计算机名**”登录失败。]
```

它似乎正在识别我的 Windows 登录，但由于某种原因试图使用我的机器名称来访问数据库。在公司，这个特定的数据库也使用员工的 windows 用户名访问，所以我希望人们能够使用 MVC 应用程序中的内置 windows 身份验证自动访问它。

在我的 web.config 中，我将身份模拟设置为 false，身份验证模式等于 Windows，并在 appSettings 中设置了以下键：

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" />
<add key="enableSimpleMembership" value="false"/>
<add key="autoFormsAuthentication" value="false" /> 
```

连接字符串是为我自动生成的，并且在从 Visual Studio 运行应用程序时可以检索信息，所以我只能假设这是 IIS 设置的问题。（我以前从未部署过 MVC 应用程序）

在应用程序的 IIS 设置中，我禁用了除 Windows 身份验证之外的所有身份验证。任何想法我做错了什么？如果您还需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:24:10.913

在您的身份验证配置中打开模拟。否则，应用程序池的标识将用于连接到您的 Sql Server。

# jquery - Angularjs - 使用指令或小部件动态更改 dom？

> ID：11853484
> 
> 赞同：9
> 
> 时间：2012-08-07T20:19:51.337
> 
> 标签：jquery, widget, angularjs, using-directives

我的目标是了解如何正确使用 angularJS。我希望能够将变量的选择与使用 angularJS 动态更改 DOM 结构联系起来。我认为我不太了解 angular 提供的文档，而且我在这里或其他地方都没有找到任何示例。任何帮助表示赞赏。

我的想法是我有这个用例，我首先从选择类型开始，然后从选择的类型开始，将创建适当的输入类型元素，然后使用 ng-model 记录（例如从 textareas 到复选框） ，一直由 angularjs 控制器控制以进行验证/限制。我已经习惯了在页面上拥有可克隆元素并使用 jQuery 销毁和创建新元素的想法，但我一直在阅读控制器不应该具有这种逻辑，而应该使用指令/小部件创建。我没有看到任何以这种方式操作的指令或小部件的示例，所以我什至不确定如何继续。我可以使用指令以这种方式操作 DOM，而不仅仅是一次，而是基于被监视的元素多次？

我想做的事的例子。

```
$scope.types = ['Type1','Type2']

// something along the lines of...
$scope.layouts = {'Type1':['textarea','textarea'], 'Type2':['numeric','datepicker']} 
```

选择类型 1：

*   显示 2 个文本区域

选择类型 2：

*   显示数字输入
*   显示日期选择器

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T23:06:38.763

我就是这样做的。请注意，这只是一个起点。仍然存在绑定到相应输入中的特定值的问题。我希望它有所帮助。

标记：

```
<html ng-app="App" ng-controller="MainCtrl">

<body>

  <component index="0"></component>
  <component index="1"></component>
  Current type: {{type}}
  <button ng-click="toggleType()">Toggle</button>

</body>

</html> 
```

指示：

```
var ngApp = angular.module('App', []).directive('component', function() {
  var link = function(scope, element, attrs) {
    var render = function() {
      var t = scope.layouts[scope.type][attrs.index];
      if (t === 'textarea') {
        element.html('<' + t + ' /><br>');
      }
      else {
        element.html('<input type="' + t + '"><br>');
      }
    };
    //key point here to watch for changes of the type property
    scope.$watch('type', function(newValue, oldValue) {
      render();
    });

    render();
  };
  return {
    restrict : 'E',
    link : link
  }
}); 
```

控制器：

```
var MainCtrl = function MainCtrl($scope) {
  $scope.type = 'Type1';
  $scope.types = [ 'Type1', 'Type2' ];
  $scope.layouts = {
    'Type1' : [ 'textarea', 'textarea' ],
    'Type2' : [ 'number', 'text' ]
  };

  $scope.toggleType = function() {
    if ($scope.type === 'Type1') {
      $scope.type = 'Type2';
    }
    else {
      $scope.type = 'Type1';
    }
  };
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T01:45:14.137

我能想到的最简单的方法就是使用 ng-show 和 ng-hide。

[http://jsfiddle.net/cfchase/Xn7PA/](http://jsfiddle.net/cfchase/Xn7PA/)

```
<select ng-model="selected_type" ng-options="t for t in types">
</select>

<div ng-show="selected_type=='Type1'">
    <input type="text" id="text1" ng-model="text1"/>
    <input type="text" id="text2" ng-model="text2"/>
</div>

<div ng-show="selected_type=='Type2'">
    <input type="number" id="numeric1" ng-model="numeric1"/>
    <input type="date" id="date1" ng-model="date1"/>
</div> 
```

当然，您可以在不将任何逻辑放入 html 的情况下清理它，但我不想在控制器中使用额外的东西来掩盖问题。

有关验证，请参阅[表单文档](http://docs.angularjs.org/guide/forms)。很可能您将主要使用内置验证的 AngularJS 以及您构建的一些自定义验证。

至于指令，[网上的文档](http://docs.angularjs.org/guide/directive)很密集，但你试验了一会儿就会点击。对于更温和的介绍，Jon Lindquist 在[YouTube 上](http://www.youtube.com/watch?v=Yg-R1gchccg)有一个 hello world 教程。指令绝对是在 Angular 中进行 DOM 操作的方式。

# ruby-on-rails - 合并两个红宝石对象

> ID：11853491
> 
> 赞同：12
> 
> 时间：2012-08-07T20:20:15.367
> 
> 标签：ruby-on-rails, ruby

问题：Ruby（和/或 Rails）中是否有一种简洁的方法可以将两个对象合并在一起？

具体来说，我试图找出类似于 jQuery 的`$.extend()`方法的东西，而您传入​​的第一个对象的属性将被第二个对象覆盖。

我正在使用 Rails 3.2+ 中的无表模型。当表单提交发生时，提交的参数用于动态填充用户对象。该用户对象使用 Ruby 的 PStore 类在页面请求之间持久化，将对象编组为平面文件，以便将来轻松检索。

相关代码：

```
module Itc
  class User
    include ActiveModel::Validations
    include ActiveModel::Conversion
    include ActionView::Helpers
    extend ActiveModel::Naming

    def set_properties( properties = {} )
      properties.each { |k, v|
        class_eval("attr_reader :#{k.to_sym}")
        self.instance_variable_set("@#{k}", v)
      } unless properties.nil?
    end
  end
end 
```

用户对象的创建过程如下：

```
user = Itc.User.new( params[:user] )
user.save() 
```

上面的`save()`方法不是ActiveRecord的save方法，而是我写的通过PStore做持久化的方法。

如果我加载了一个用户对象，并且我有一个表单提交，我想做这样的事情：

```
merged = existingUserObject.merge(User.new(params[:user]) 
```

并具有`merged`成为用户对象的结果，仅更新表单提交中更改的属性。

如果有人对总体上更好的方法有任何想法，我会全神贯注。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T23:50:16.767

不是`Hash#merge`你要找的吗？[http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-merge](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-merge)。看来你可以走了

```
merged = existingUserObject.merge(params[:user]) 
```

我认为您不需要创建一个全新的`User`对象，因为大概这就是 existingUserObject 并且您只想覆盖一些属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T21:51:56.700

通过捎带哈希的行为来做到这一点。创建一个为`new()`方法的参数获取哈希的类，然后创建一个`to_h`获取对象并从实例的当前状态生成哈希的方法：

```
class Foo
  def initialize(params={})
    @a = params[:a]
    @b = params[:b]
  end

  def to_h
    {
      a: @a,
      b: @b
    }
  end
end

instance_a = Foo.new(a: 1, b:2)
instance_b = Foo.new(a: 1, b:3)

instance_c = Foo.new(instance_a.to_h.merge(instance_b.to_h)) 
```

将其转储到 IRB：

```
irb(main):001:0> class Foo
irb(main):002:1>   def initialize(params={})
irb(main):003:2>     @a = params[:a]
irb(main):004:2>     @b = params[:b]
irb(main):005:2>   end
irb(main):006:1> 
irb(main):007:1*   def to_h
irb(main):008:2>     {
irb(main):009:3*       a: @a,
irb(main):010:3*       b: @b
irb(main):011:3>     }
irb(main):012:2>   end
irb(main):013:1> end
nil
irb(main):014:0> 
irb(main):015:0* instance_a = Foo.new(a: 1, b:2)
#<Foo:0x1009cfd00
    @a = 1,
    @b = 2
>
irb(main):016:0> instance_b = Foo.new(a: 1, b:3)
#<Foo:0x1009ead08
    @a = 1,
    @b = 3
>
irb(main):017:0> 
irb(main):018:0* instance_c = Foo.new(instance_a.to_h.merge(instance_b.to_h))
#<Foo:0x100a06c60
    @a = 1,
    @b = 3
> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-04T23:57:11.643

这就是我如何用我的模型之一实现类似的事情

```
 # merge other_config.attrs into self.attrs, only for nil attrs
  def merge!(other_object)
    return if other_object.nil? || other_object.class != self.class
    self.assign_attributes(self.attributes.slice ('id').merge(other_object.attributes.slice!('id')){|key, oldval, newval|
      oldval.nil? ? newval: oldval
    })
  end 
```

# jquery - DOM 操作后的 jQuery Mobile 和 .next()？

> ID：11853497
> 
> 赞同：0
> 
> 时间：2012-08-07T20:20:25.900
> 
> 标签：jquery, dom, jquery-mobile, touch

好的，所以我已经开始使用 jQuery Mobiles 预取功能。我正在使用此页面[http://jquerymobile.com/test/docs/pages/page-cache.html](http://jquerymobile.com/test/docs/pages/page-cache.html)上指定的链接方法。唯一的问题是我的刷卡代码无法看到通过预取引入的页面。请参阅此 js fiddle 以获取该问题的工作示例。

[http://jsfiddle.net/UurQC/1/](http://jsfiddle.net/UurQC/1/)

任何人都对尝试获取 .next 以查找新页面有任何想法。我也尝试过通过

```
div.ui-page 
```

它仍然在萤火虫中作为空选择器出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:17:50.233

问题是您试图选择下一个 DOM 元素，而不是下一个 pesueo-page 元素。由于您是在 DOM 加载后添加最后一页，因此它实际上是在另一个元素之后添加的（因此`.next()`选择这个其他元素而不是伪页面）。

我变了：

```
$(this).next("div:jqmData(role='page')");
$(this).prev("div:jqmData(role='page')"); 
```

到：

```
$(this).nextAll("div:jqmData(role='page')").first();
$(this).prevAll("div:jqmData(role='page')").first(); 
```

它选择所有上一个/下一个伪页面，然后只选择其中的第一个。

这是一个演示：http: [//jsfiddle.net/UurQC/2/](http://jsfiddle.net/UurQC/2/)

如果您不为滑动事件委派事件处理程序，则滑动事件处理程序将不会为动态放置的伪页面运行。以下是解决方法：

```
$(document)
    .on("swipeleft", "div:jqmData(role='page')", function(){
        var $nextPage = $(this).nextAll("div:jqmData(role='page')").first();
        // swipe using id of next page if exists
        if ($nextPage.length > 0) {
            $.mobile.changePage($nextPage, { transition: 'slide' });
        }
    })
    .on("swiperight", "div:jqmData(role='page')", function(){
        var $prevPage = $(this).prevAll("div:jqmData(role='page')").first();
        // swipe using id of next page if exists
        if ($prevPage .length > 0) {
            $.mobile.changePage($prevPage, { transition: 'slide', reverse : true });
        }
    }); 
```

这是一个演示：http: [//jsfiddle.net/UurQC/3/](http://jsfiddle.net/UurQC/3/)

**更新**

以下是 DOM 的外观以及为什么需要上述内容：

```
<div data-role="page" id="text_0" data-url="text_0" tabindex="0" class="ui-page ui-body-c ui-page-active" style="min-height: 452px; "></div>
<div data-role="page" id="text_1" data-url="text_1"></div>
<div data-role="page" id="text_2" data-url="text_2"></div>
<script type="text/javascript">...</script>
<div data-role="page" id="text_3" data-url="text_3"></div>
<div class="ui-loader ui-corner-all ui-body-a ui-loader-default"></div> 
```

请注意，这不是完整的 HTML，而只是元素的直接子`<body>`元素。

请注意，在 JSFiddle 将您的 JS 代码添加到标签中之后，动态创建的伪页面被添加到 DOM 中`<script>`。当不在 JSFiddle 上运行时，这也是一个问题，因为 jQuery Mobile 在初始化时添加了一个加载器元素。

# c++ - 函数不返回用户输入的值

> ID：11853498
> 
> 赞同：0
> 
> 时间：2012-08-07T20:20:27.483
> 
> 标签：c++, function

我正在为一项任务开发这个程序，所以我不想要答案……只是朝着正确的方向前进。

我编写了一个程序，用户将在其中输入一个 3 位数的 ID（必需）和当月使用的 KWh 量。输入该标准后，它将打印出一个简短的摘要 + 每个用户该月的费用。这包含在一个循环中，询问是否有更多的 ID 需要输入。

下面是我的打开代码和循环结构：

```
#include <iostream>
#include <string>
#include <iomanip>
#include <windows.h>

using namespace std;

//function prototypes
string get_user_ID();
int get_cust_kwh();
string display_cust_data();

int main()
{
string userID;
int userKWH;
char answer;

while ((answer !='N')&&(answer !='n')){
    userID = get_user_ID();
    userKWH =get_cust_kwh();

    display_cust_data();

    cout << "\n\nWould you like to add another utility ID? : (Y or N)";
    cin >> answer;

    }
}

system("pause")
return 0; 
```

我可以让循环正常运行，但我的函数似乎没有返回用户输入的值。由于我是函数新手，我确信这是一个愚蠢的错误，但它一直让我发疯。以下是功能：

```
**********function definitions**********
string get_user_ID(){
    string usrID;
    cout << "\n\nPlease enter in your 3-digit utility ID: ";
    cin >> usrID;
    return usrID;
}

int get_cust_kwh(){
    int usrKWHs;
    cout << "Please enter the total KWH used for the month: ";
     cin >> usrKWHs;
    return usrKWHs;
}

string display_cust_data(){
    string usrID;
    int usrKWHs;
    double userCharge;

    cout << "\n\nUSER ID        KWHours     Charge($)\n";
    cout << fixed << setprecision(2);
    cout << usrID << "            " << usrKWHs << "           " << userCharge << endl;
   } 
```

我正在考虑与函数中变量的使用方式有关。

感谢您提供的任何推动！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:23:34.043

问题是`display_cust_data()`不知道主函数范围内的变量。您要打印的只是具有垃圾值的局部变量。

```
string display_cust_data(){
    string usrID;  // This is a different variable and is not equivalent to the 
                   // variable in main. 
```

还有为什么函数的返回类型是`string`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:26:20.237

您需要找到一种方法将用户输入变量传递给您的显示函数。您在`display_cust_data()`函数中拥有的变量是在那里新创建的，并且与您在`main()`函数的 while 循环中拥有的变量不同。您在该函数中显示的所有变量都未初始化，因此您不知道它们的实际值是什么。考虑向函数添加参数，以便在调用它时可以将用户输入变量传递给它，以便显示要显示的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:24:27.333

查看您的 display_cust_data。它如何获得有关显示内容的任何信息？

# forms - 表单提交按钮不传递值

> ID：11853502
> 
> 赞同：0
> 
> 时间：2012-08-07T20:20:40.533
> 
> 标签：forms, post, submit

我有一个包含 3 个提交按钮的基本表单。

```
<form action="/signups/wizard/location" id="SignupForm" method="post" accept-charset="utf-8">
<div style="display:none;"><input type="hidden" name="_method" value="POST"></div>
Street: <input name="data[Location][street]" maxlength="200" type="text" value="">
Apartment: <input name="data[Location][apartment]" value="">
City:<input name="data[Location][city]" maxlength="50" type="text" value="">
<div class="submit">
    <input name="Previous" type="submit" value="Previous">      
    <input type="submit" value="Continue">
    <input name="Cancel" type="submit" value="Cancel">  
</div>
</form> 
```

当我提交该表单时，我希望提交按钮的输入字段将其数据传递给 $_POST，但是我只看到数组中的位置。

以下是 $_POST 的内容：

```
array(
    '_method' => 'POST',
    'data' => array(
        'Location' => array(
            'street' => '',
            'apartment' => '',
            'city' => ''
        )
    )
) 
```

**更新** 我禁用了 javascript 并且值出现在 $_POST 中。有没有一种简单的方法可以确定哪些脚本可以删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:59:06.600

找到了罪魁祸首，这个 JavaScript 被以前的开发人员包含在每个页面上。

```
$('form').submit(function(){
  $('input[type=submit]', this).attr('disabled', 'disabled');
}); 
```

# java - 在子类中使用 super 或 this 访问超类中的属性？

> ID：11853504
> 
> 赞同：1
> 
> 时间：2012-08-07T20:20:46.687
> 
> 标签：java

就超类中定义的属性值而言，在子类中使用相同的属性并且该属性被定义为受保护，那么使用 super 或 this 没有任何区别，对吗？**那么为什么语言真的有这些访问属性的方式呢？**是否存在它们具有不同值的情况。

```
 class A{ protected int a = 15; 
    }

    class B{ 
    public void printA()
{
    System.out.print(super.a) // prints 15
    System.out.print(this.a) // prints 15
 } 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:23:05.163

在*这种*情况下，它没有任何区别。但是，一旦您更改为方法而不是变量，并引入另一种方法，`B`其中阴影中的方法`A`，*那么*它就会有所不同：

```
class A { 
    protected int a = 15; 
}

class B extends A { 
    private int a = 10;

    public void printA() {
       System.out.println(super.a); // prints 15
       System.out.println(this.a); // prints 10
    }
} 
```

这在方法中比在字段中更常见 - 通常重写实现需要调用超类实现作为其实现的一部分：

```
public void foo() {
    super.foo();
    // Now do something else
} 
```

我个人建议*避免*使用非私有字段，此时字段部分变得无关紧要。

有关阴影的更多信息，请参见[JLS 的第 6.4.1 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.4.1)

# python - 如何使 sys.argv 参数可选？

> ID：11853508
> 
> 赞同：17
> 
> 时间：2012-08-07T20:21:01.530
> 
> 标签：python, command-line-arguments, sys

`sys.argv`运行程序时在 shell 命令行中接受参数。如何使这些参数可选？

我知道我可以使用`try`- `except`。但这会迫使您不插入额外的参数或插入所有额外的参数，除非您嵌套更多`try`-`except`这会使代码看起来更不可读。

## 编辑

假设我想要以下功能，我该如何实现？

```
$ python program.py add Peter 
'Peter' was added to the list of names. 
```

这个`add`参数（而不是`--add`）是可选的，这样

```
$ python program.py 
```

只是正常运行程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T21:13:02.527

**编辑** 以解决您的编辑，

```
import sys

sys.argv = sys.argv[1:]
names = []
while sys.argv and sys.argv[0] == 'add':
    #while the list is not empty and there is a name to add
    names.append(sys.argv[1])
    print sys.argv[1], 'was added to the list of names.'
    sys.argv = sys.argv[2:] 
```

以下所有工作都与此有关

```
$ python program.py add Peter
Peter was added to the list of names.

$ python program.py add Peter add Jane
Peter was added to the list of names.
Jane was added to the list of names.

$ python program.py 
```

如果在每个名称之前要求“添加”的好处是，如果在添加名称后还有其他要查找的参数，则可以。如果您想通过说`python program.py add Peter Jane`这可以通过一个相当简单的更改来传递多个名称

```
import sys

names = []
if len(sys.argv) > 2 and sys.argv[1] == 'add':
    names = sys.argv[2:]

for n in names:
    print n, 'was added to the list of names.' 
```

* * *

**原来的**

似乎使用 optparse 之类的东西会更好。但是，由于`sys.argv`是一个列表，您可以检查它的长度。

```
arg1 = sys.argv[1] if len(sys.argv) > 1 else 0 # replace 0 with whatever default you want
arg2 = sys.argv[2] if len(sys.argv) > 2 else 0 
```

然后使用 arg1 和 arg2 作为您的“可选”命令行参数。这将允许您传递 1、2 或 0 个命令行参数（实际上您可以传递超过 2 个，它们将被忽略）。这也假设参数有一个已知的顺序，如果你想使用标志，如`-a`后跟一个值，请查看 optparse [http://docs.python.org/library/optparse.html?highlight=optparse#optparse](http://docs.python.org/library/optparse.html?highlight=optparse#optparse)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T13:13:16.183

[plac](http://pypi.python.org/pypi/plac/)是其他答案中给出的标准库模块的替代方案。它允许通过[注释](http://www.python.org/dev/peps/pep-3107/)定义命令行参数。从文档中，示例 8 演示了可选参数语法：

```
example8.py
def main(command: ("SQL query", 'option', 'q'), dsn):
    if command:
        print('executing %s on %s' % (command, dsn))
        # ...

if __name__ == '__main__':
    import plac; plac.call(main) 
```

argparse 示例：

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument("--add", help="Add prefix to string")
args = parser.parse_args() 
```

请注意，约定是将可选参数作为“--add”提供，而**子命令**作为“add”提供。argparse 中有一个[子命令实现](http://docs.python.org/dev/library/argparse.html#argparse.ArgumentParser.add_subparsers)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T20:24:37.457

您应该使用命令行解析器，例如 getopt 或[argparse](http://docs.python.org/library/argparse.html)。这些允许您定义可选且具有默认值的选项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-30T15:01:49.503

作为对您问题的简单回答，您可以使用 可选参数`sys.argv`，但如果您预见到您的模块会扩展很多，您可能需要考虑另一个模块，`argparse`如其他地方所建议的那样。

这将不忽略任何参数，但之后允许任意数量的参数。

```
#!/usr/bin/env python

import sys

added = sys.argv[1:]
if added:
    for add in added:
        print("{0} was added to the list of names.".format(add)) 
```

```
$ ./test.py
$ ./test.py Peter
Peter was added to the list of names. 
```

Of course you are not passing `add Peter` just `Peter`. But if that is acceptable, then this works.

My point is you can certainly do optional args with `sys`, and in fact for very simple scripts it is often not necessary to use `argparse` if that suffices!

# css - MVC3：在文本框或文本上应用高斯模糊

> ID：11853511
> 
> 赞同：0
> 
> 时间：2012-08-07T20:21:16.757
> 
> 标签：css, asp.net-mvc-3, blur, gaussian

当我们要求用户验证信息时，我需要隐藏信息。例如重新输入电子邮件地址。我被要求应用高斯模糊来实现它。我如何在 MVC3 中实现它？

我也对隐藏信息的其他选项持开放态度。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:33:19.607

你不能。您的客户端在不同地理区域的不同计算机上运行，​​您无法真正控制客户端的操作。即使你想出了一种方法在一个客户身上做到这一点，也并不意味着所有客户都会这样做。更重要的是，只需简单的右键单击并查看源代码即可查看实际信息。

您需要做的是在发布后将信息替换为** * 或类似内容。*

# javascript - 根据数组中的值检查用户输入值

> ID：11853512
> 
> 赞同：0
> 
> 时间：2012-08-07T20:21:20.970
> 
> 标签：javascript, jquery, html, filereader

我有文本文件。其中大约有 1000 行，每行包含一个 8 个字母的字母数字单词，例如我的文本文件如下所示

```
TEST1234
T1E2A334
12RR8912 
```

等等。此文件位于服务器上名为 TestCodes 的文件夹中

现在我有一个名为的 html 文件`test.html`，在这个文件中我有输入文本框，用户可以在其中输入他/她的测试代码

我有一个名为验证的按钮。单击此输入按钮时，我想根据文本文件中的内容检查用户输入的值。

如果测试代码存在于文本文件中，则显示一个名为 Procced 的按钮，如果不显示一个名为 invalid 的错误消息。

我知道如何编写 if 条件，但我不知道如何根据文本文件检查它

**HTML**

```
<div class="user-input">
    <input type="text" name="test-code" id="test-code" value="" />
    <input type="submit" value="Verify Code" name="verify-code" id="verify-code" />
</div>
<div id="TestRegister">
    <form id="club" action="/Proceed.html" method="post" autocomplete="off">
        <input type="submit" value="Proceed Registration" name="proceed-register" />
    </form>
</div>
<div id="TestError">
    <span>Please check the code again, its not valid</span>
</div> 
```

**JavaScript**

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function () {
    $("#TestRegister").hide();
    $("#TestError").hide();

    $.get("testcodes.txt", function (data) {
        var lines = data.split("\n");

        // this is where I am stuck. how to pass the above to ARRAY
        $("#verify-code").click(function (e) {
            e.preventDefault();
            if ( /* here I need to check against the user input value, if they are equal */ ) {
                $("#TestRegister").show();
                $("TestError").hide();
            } else {
                $("#TestRegister").hide();
                $("TestError").show();
            }
        }
        });     

</script> 
```

如何将文本从测试代码传递到数组，然后对照该数组检查用户输入值？如果数组中存在用户输入值，那么我想显示`#TestRegister`，如果没有，或者输入值为空白或 null，则显示`#TestError`。

感谢并感谢任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:24:57.473

```
var lines;

$(document).ready(function () {
    $("#TestRegister").hide();
    $("#TestError").hide();

    $.get("testcodes.txt", function (data) {
        lines = data.split("\n");
    });

    $("#verify-code").click(function (e) {
        e.preventDefault();

        if (lines.indexOf($("#test-code").val()) !== -1 && $("#test-code").val().length == 8) {
            $("#TestRegister").show();
            $("TestError").hide();
        } else {
            $("#TestRegister").hide();
            $("TestError").show();
        }

    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:41:08.620

您可以通过创建一个正则表达式来完全避免数组循环，以确保在单词边界之间找到测试代码：

```
var codeRegEx = new RegExp('\\b'+$('#test-code').val()+'\\b');
if(codeRegEx.test(lines)) {
   // the testcode is found on a single line, avoiding partial matches
} 
```

这是一个演示：

[**jsFiddle 演示**](http://jsfiddle.net/vnjkp/)

# php - SOAP WSDL 解析错误

> ID：11853513
> 
> 赞同：0
> 
> 时间：2012-08-07T20:21:22.373
> 
> 标签：php, soap, soap-client

我在使用 PHP 设置 SoapClient 时遇到了一些问题。我遇到的问题似乎是一个相对常见的问题，但我还没有找到合适的解决方案。我正在使用以下代码进行连接：

```
 $varIDs = array();
    $varIDs[0] = '2147483732';

    try{
        $client = new SoapClient("../../../../ASP/webservice1.asmx?WSDL");
    } catch (Exception $e) {
        echo $e . '<br>';
    } 
```

我收到下面列出的关于无法加载 WSDL 文件的标准错误。

```
[07-Aug-2012 12:11:17] PHP Warning:  SoapClient::SoapClient() [<a href='soapclient.soapclient'>soapclient.soapclient</a>]: I/O warning : failed to load external entity &quot;../../../../ASP/webservice1.asmx?WSDL&quot; in C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\php\utils\getISOxml.php on line 7
[07-Aug-2012 12:11:17] PHP Fatal error:  SOAP-ERROR: Parsing WSDL: Couldn't load from '../../../../ASP/webservice1.asmx?WSDL' in C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\php\utils\getISOxml.php on line 7 
```

我不确定这里有什么问题。当我在浏览器中访问 URL 时，我得到了有效的 XML（以前从未使用过 WSDL，所以我只是假设它是有效的）。有什么建议么？

编辑：根据@Madbreaks 的以下建议，我尝试更改我指向的 URL（它现在显示为“http://vm0281sch/ATS/webservice2.asmx?WSDL”）。起初我认为它正在工作，因为它需要很长时间才能响应，但我不确定 - 它给了我一个新的错误，但我仍然没有得到任何东西。我现在得到如下所示的错误：

```
[07-Aug-2012 16:16:42] PHP Warning:  SoapClient::SoapClient(http://vm0281sch/ASP/webservice1.asmx?WSDL) [<a href='soapclient.soapclient'>soapclient.soapclient</a>]: failed to open stream: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. in C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\php\utils\getISOxml.php on line 6 
```

接下来是我之前遇到的错误。我不确定这里发生了什么，但似乎这个问题实际上与我正在使用的 URL 有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:24:46.793

您的 URI 无效，错误非常清楚 - 找不到资源。您正在指定一个文件路径，但您的问题是您在访问“URL”时获得了有效的 XML。在您的代码中放置相同的 URL，而不是相对文件路径。

*编辑*

如果你说的是真的，试试这个：

```
$client = new SoapClient(dirname(__FILE__)."/../../../../ASP/webservice1.asmx?WSDL"); 
```

当您使用它时，请将其放在该行之前：

```
error_log('In dir: '.dirname(__FILE__)); 
```

*编辑*

根据您在下面陈述的内容，尝试像这样加载 WSDL：

```
$client = new SoapClient('http://localhost/ASP/webservice1.asmx?WSDL'); 
```

# c - 崩溃后找到 %ebp（有 %eip）

> ID：11853514
> 
> 赞同：0
> 
> 时间：2012-08-07T20:21:24.663
> 
> 标签：c, x86

我正在为一门课程编写一个回溯跟踪程序。提供的启动代码在崩溃时为我们提供了 %eip，我们应该打印运行时堆栈的回溯。

第一步似乎是获取顶部堆栈的 %ebp，我们的任务说“在 C 代码中可以访问的东西相对于当前基指针具有保证的固定位置”。

我唯一能想到的是将函数的参数存储在 %ebp 以上的固定位置，但我想不出任何可能的方式来使用这些信息。

什么是只用 C 代码（没有内联汇编或任何东西）找到​​这个 %ebp 的方法？

任何朝着正确方向发展的人都将不胜感激！我在 x86-32 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:48:35.470

我假设该任务是为 Linux/UNIX 提供的。

> 提供的启动代码在崩溃时为我们提供 %eip，

所以，你现在在 SIGSEGV 处理程序中并且有来自....上下文的 eip - 处理程序的第三个参数？

第一种方式：

信号处理程序在应用程序堆栈上启动；如果您将获取某个局部变量的地址，您将获得指向堆栈的指针：

```
 void sigsegv_handler(int signo, siginfo_t *info, void *context)
 {
   int a;
   void * ptr = &a;
   void * ptr_epb = ptr+0x**; 
   // 0x** is an unknown offset, find in disassembly or in debugger
 } 
```

如果我们谈论一般情况（根据 C 编程语言标准和/或某些 UNIX 规范，这应该是未定义的行为），这通常不是“保证相对于当前基指针的固定位置”。但对于 x86/x86_64；一些固定的编译器；固定的编译器选项集；启用帧指针保存在堆栈中，则此偏移量将是恒定的。

第二种方式：

检查 ucontext.h (/usr/include/sys) 并通过处理程序的第三个参数侵入它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:00:31.260

在 GCC 中，使用`__builtin_frame_address(level)`. 请参阅[此页面](http://gcc.gnu.org/onlinedocs/gcc/Return-Address.html)。任何通过标准 C 结构查找 %ebp 的尝试都可能是一种无法保证有效的黑客攻击。

# r - 比较 R 中 POSIXct 的时间部分

> ID：11853524
> 
> 赞同：1
> 
> 时间：2012-08-07T20:22:02.257
> 
> 标签：r, date, datetime, posix, posixct

我有一个`data.frame`包含一堆`POSIXct`日期：

```
df <- data.frame(dte=as.POSIXct(c("2001-02-03 14:30:00",
  "2001-02-04 9:30:00", "2001-02-05 10:30:00")), a=1:3) 
```

我想提取`df`时间部分大于上午 9:15 且小于下午 5:25 的部分。我可以分别提取小时和分钟的组成部分并进行比较，但我认为可能有一种更优雅的方法。任何人都可以提出建议吗？

我目前的方法是：

```
df <- subset(df,
  (as.numeric(format(dte, "%H")) >  9 & as.numeric(format(dte, "%M")) > 15) |
  (as.numeric(format(dte, "%H")) < 17 & as.numeric(format(dte, "%M")) < 25)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:24:58.953

我的建议是使用 xts 而不是 data.frame。

```
df <- data.frame(dte=as.POSIXct(c("2001-02-03 14:30:00",
  "2001-02-04 9:30:00", "2001-02-05 10:30:00")), a=1:3)
library(xts)
x <- xts(df$a, df$dte)
x["T09:15/T17:25"]  # returns everything (in your example)
x["T10:15/T14:25"]  # returns the correct subset 
```

# testing - 不正确的数据类型是错误吗？

> ID：11853525
> 
> 赞同：0
> 
> 时间：2012-08-07T20:22:06.237
> 
> 标签：testing, terminology

由于错误是错误的原因，不正确的数据类型（例如导致溢出）是否被视为错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:28:39.313

在强类型语言中，编译器不允许您编译具有类型错误的代码。相反，动态类型语言可以编译，但在运行时不正确的数据类型可能会导致不正确/不需要的结果。在某些语言（例如 Java）中，会引发异常，如果不处理，应用程序将终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:25:05.320

对值使用不正确的数据类型是错误的。

用你的术语，是的，这将被认为是一个错误。

数据类型很重要——应该根据系统将产生的预期值来选择它们。

# javascript - 奇怪的数据属性布尔问题

> ID：11853528
> 
> 赞同：5
> 
> 时间：2012-08-07T20:22:14.087
> 
> 标签：javascript, jquery

我有一个标题的实时点击事件，该事件在打开和关闭其内容时有一个向上/向下翻转的箭头。

最奇怪的事情发生在`!`后面跟着一个变量——它应该把它从 true -> false 翻转，反之亦然。基本上它根本不起作用，它会翻转为 false 并停留在那里......查看小提琴以了解我的意思。

为了简洁起见，我删除了很多代码。

[演示代码](http://jsfiddle.net/JKUJb/1/)

```
$(document).on('click', '.regimenHeader', function () {
    var _state = $(this).attr('data-state');

    if (_state === 'true') {
        // do stuff
    }

    else { 
        // do stuff
    }

    // This is where the issue is happening, it isn't flipping the Boolean value
    // !"true" = false, !true = false, it works with strings or booleans
    $(this).attr('data-state', !_state);
});​ 
```

如果我执行以下操作，我可以让它工作得很好：

```
 if (_state === 'true') {
        // Manually flip the data-state boolean
        $(this).attr('data-state', false);
    } 
```

有什么我想念的，为什么这不能按应有的方式工作？只是想知道它为什么这样做！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T20:27:02.337

我认为您正在尝试这样做：

[http://jsfiddle.net/JKUJb/2/](http://jsfiddle.net/JKUJb/2/)

如果是这样，问题是您正在使用`.attr()`它返回一个字符串，所以如果您转换：

```
!"true" //false

!"false" //false 
```

`.data()`另一方面返回已经“铸造”的值

**编辑：**

为了更清楚起见，在 javascript 中，唯一的虚假值是：

```
false;
null;
undefined;
'';
0;
NaN; 
```

因此，如果您真的想使用`.attr()`，可以，但我建议您首先这样做：

```
var _state = $(this).attr('data-state') === 'true'; //if 'true' then true, false otherwise 
```

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T20:28:21.847

将您的第二行更改为：

```
var _state = $(this).attr('data-state') == 'true'; 
```

在 if 语句中检查布尔值：

```
if ( _state ) {
 // do stuff
 ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:28:32.993

_state 是一个字符串（typeof _state === String //true），您需要先将其转换为布尔值（字符串始终为真）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T20:28:36.713

如果您真的想为此使用`data-`属性，请使用 jQuery 的`.data`方法来检索和设置值。它会自动将字符串“true”转换为布尔值，或将字符串“1”转换为数字：

```
$(document).on('click', '.regimenHeader', function () {
    var _state = $(this).data('state');
    if (_state) {
        // do something
    }
    $(this).data('state', !_state);
});​ 
```

[http://jsfiddle.net/mblase75/JKUJb/6/](http://jsfiddle.net/mblase75/JKUJb/6/)

或者你可以切换一个类——你可以使用该`.hasClass`方法返回一个布尔值：

```
$(document).on('click', '.regimenHeader', function () {
    var _state = $(this).hasClass('data-state');
    if (_state) {
        // do something
    }
    $(this).toggleClass('data-state');
});​ 
```

[http://jsfiddle.net/mblase75/JKUJb/3/](http://jsfiddle.net/mblase75/JKUJb/3/)

# asp.net-mvc-3 - 向 MVC 添加不属于控制器的视图

> ID：11853533
> 
> 赞同：0
> 
> 时间：2012-08-07T20:22:40.187
> 
> 标签：asp.net-mvc-3

我不确定问题标题是否真的解释了我想要做什么，但是我将在下面解释：

我正在使用 Visual Studio MVC 项目模板，并且我更改了一些选项卡以映射到来自不同控制器的不同操作。但是，我想制作一个选项卡来打开一个视图，该视图将再次具有不同管理操作的链接。

我遇到的问题是我不确定该视图的放置位置，因为它并不真正属于管理控制器，因为该视图上的每个选项卡都将链接到另一个控制器中的列表视图。实际上它是一个子 _Layout 视图，因为它与控制器没有任何关系。

我希望我已经把自己说得够清楚了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:24:10.097

您可以将此视图放在 Shared 文件夹中，因为它将被多个控制器使用。或者，您可以将其放在其他位置并使用此视图/部分视图的完整路径来引用它

**在控制器中**

```
public ActionResult SomeAction(){
  return View("~/Path/To/View/ViewName.cshtml");
} 
```

**在视图中（剃刀）**

```
@Html.RenderPartial("~/Path/To/View/ViewName.cshtml"); 
```

话虽如此，Shared 文件夹最有意义，因为它将在多个控制器之间共享。

# mysql - 使用 PHPMyAdmin 为 MySQL 设置时区

> ID：11853534
> 
> 赞同：9
> 
> 时间：2012-08-07T20:22:47.723
> 
> 标签：mysql, phpmyadmin

目前，每当用户创建新帐户时，我都有一个具有 datatype 的 Creation_date 列`timestamp`。目前，这个时间戳比美国东部标准时间早 3 小时（如果它是波士顿的下午 5 点，它读取的是晚上 8 点）。有没有办法将时区更改为 EST？当前设置为哪个时区？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T20:25:06.560

这与 MySQL 的时区有关。

您可以使用以下内容为每个连接设置它（例如通过 PHPMyAdmin）：

```
SET time_zone = timezone; 
```

但是，如果 MySQL 重新启动，这将*重置。*所以最好在服务器级别设置。我想，你不能。

我鼓励您从[MySQL Docs](https://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)中阅读更多内容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-07T20:26:01.317

因此与[这个问题](https://stackoverflow.com/questions/9798308/how-can-i-change-the-timezone-in-mysql-using-phpmyadmin-without-admin-permission)

```
SET SESSION time_zone = '+8:00' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T20:33:13.263

`TIMESTAMP`值在插入数据库时​​转换为 UTC，并在检索时转换回 MySQL 中设置的当前时区。其他答案显示了如何在 MySQL 中设置时区，这将确定数据库中的值。

另一种选择是使用一`DATETIME`列，以 UTC 存储所有日期，并将它们转换为应用程序中所需的时区（PHP 或您从中获取值的任何地方）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-29T20:10:09.623

SET GLOBAL time_zone = 时区；

# php - 最大文件大小 php 服务器

> ID：11853535
> 
> 赞同：-1
> 
> 时间：2012-08-07T20:22:48.347
> 
> 标签：php, html, .htaccess, file-upload, size

我正在使用 wamp 作为我的测试服务器，并且在尝试上传视频时收到错误代码 1，这是一个错误，表示我的最大文件大小太小。我将 php.ini 设置更改为

```
; Maximum allowed size for uploaded files.

upload_max_filesize = 700000000000000000M 
```

我改变了我的 htacess 文件说这个..

```
RewriteEngine On
php_value post_max_size 1000000000000000000M
php_value upload_max_filesize 1000000000000000000M
php_value max_execution_time 60000000000000 
```

所以有足够的空间我不明白为什么我仍然会收到这个错误..提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:35:31.753

您确定在编辑 php.ini 文件后重新启动了 Apache 吗？

Apache 会在启动时加载 php.ini，因此如果您在未重新启动 Apache 的情况下进行了更改，则更改将不会生效。

# java - Android 模拟器中的 FORCE CLOSE 错误

> ID：11853541
> 
> 赞同：1
> 
> 时间：2012-08-07T20:23:07.163
> 
> 标签：java, android, emulation

我正在学习android，所以我编写了这段代码只是为了切换电话铃声模式。代码编译没有问题，我在 Android Manifest 中输入，将内容视图设置为所需的布局，但我运行这个应用程序，我得到强制关闭错误。有人可以告诉我为什么会发生强制关闭错误，以便将来我应该自己找出问题。这是代码：

```
package com.umer.practice2;

import android.R.bool;
import android.app.Activity;
import android.media.AudioManager;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.ToggleButton;

public class RingerMode extends Activity implements View.OnClickListener {

ToggleButton tb;
ImageView Riv;
TextView tv;
AudioManager mRing;
boolean silent;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ringermode);

    tb.setOnClickListener(this);
    InitializeShit();

    mRing=(AudioManager) getSystemService(AUDIO_SERVICE);
}

private void InitializeShit() {
    // TODO Auto-generated method stub
    tb= (ToggleButton) findViewById(R.id.ringTB);
    tv= (TextView) findViewById(R.id.ringTV);
    Riv= (ImageView) findViewById(R.id.ringIV);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    checkMode();
    if(silent)
    {
        Riv.setImageResource(R.drawable.mysplash);
    }else
        {
            Riv.setImageResource(R.drawable.myscreen);
        }
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    checkMode();
}

private void checkMode() {
    // TODO Auto-generated method stub
    int temp = mRing.getRingerMode();
    if(temp==AudioManager.RINGER_MODE_SILENT)
    {
        tv.setText("Silent");
        Riv.setImageResource(R.drawable.mysplash);
        silent= true;
    }else
        if(temp==AudioManager.RINGER_MODE_NORMAL)
        {
            tv.setText("Normal");
            Riv.setImageResource(R.drawable.myscreen);
            silent= false;
        }
    } 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:33:55.550

您需要查看 logcat 以了解会发生什么。请参阅[Logcat | 安卓开发者](http://developer.android.com/tools/debugging/debugging-log.html)。

找到崩溃的堆栈跟踪，它指向您的问题。如果您自己无法弄清楚，请在您的问题中复制/粘贴 logcat。

在这种情况下，您`tb`在初始化它之前引用：

```
tb.setOnClickListener(this); 
```

此时，`tb`is still `null`，所以`NullPointerException`出现 a 。要解决此问题，请更改您的代码，如下所示：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ringermode);

    InitializeShit();
    tb.setOnClickListener(this);

    mRing=(AudioManager) getSystemService(AUDIO_SERVICE);
} 
```

此外，我建议使用 Java 关于方法和变量命名的约定：

*   类以大写开头：例如`MyClass`
*   变量以小写字母开头：例如`myVariable`
*   方法以小写字母开头：例如`myMethod()`

这将使您以后免于困惑。

# javascript - 如何使用 jquery 查找表单

> ID：11853543
> 
> 赞同：3
> 
> 时间：2012-08-07T20:23:26.677
> 
> 标签：javascript, jquery

我在一个页面上有多个表单。如何通过名称查找表单？我认为在纯 javascript 中它类似于 document.forms['FormName'] 。

我想做一个form.submit。但我希望能够按名称选择表单。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T20:32:08.910

不需要 jQuery——只需使用内置的 JavaScript`submit()`方法：

```
document.forms['FormName'].submit(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-07T20:24:14.323

你可以添加一个[属性选择器](http://api.jquery.com/attribute-equals-selector/)来获得你想要的形式：

```
$('form[name="foo"]')... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T20:25:03.510

为您的表单提供 ID 或类属性。在身份证的情况下：

`$("#formName").function()`

您的 HTML：

`<form id="formName">`

功能是您计划做的事情......

# python - Python 多个用户同时追加到同一个文件

> ID：11853551
> 
> 赞同：37
> 
> 时间：2012-08-07T20:23:47.123
> 
> 标签：python, concurrency, text-files, simultaneous, simultaneous-calls

我正在开发一个可以通过网络访问的 python 脚本，因此会有多个用户尝试同时附加到同一个文件。我担心这可能会导致竞争条件，如果多个用户同时写入同一个文件，它可能会损坏文件。

例如：

```
#!/usr/bin/env python

g = open("/somepath/somefile.txt", "a")
new_entry = "foobar"
g.write(new_entry)
g.close 
```

我是否必须为此使用锁定文件，因为此操作看起来有风险。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-07T20:27:12.143

您可以使用[文件锁定](http://docs.python.org/library/fcntl.html#fcntl.flock)：

```
import fcntl
new_entry = "foobar"
with open("/somepath/somefile.txt", "a") as g:
    fcntl.flock(g, fcntl.LOCK_EX)
    g.write(new_entry)
    fcntl.flock(g, fcntl.LOCK_UN) 
```

请注意，在某些系统上，如果您只编写小缓冲区，则不需要锁定，因为**这些**[系统上的追加是 atomic](https://stackoverflow.com/questions/1154446/is-file-append-atomic-in-unix)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-09T23:11:09.493

如果你在 Linux 上做这个操作，并且缓存大小小于 4KB，写操作是原子的，你应该很好。

**在这里阅读更多内容：** [文件附加在 UNIX 中是原子的吗？](https://stackoverflow.com/questions/1154446/is-file-append-atomic-in-unix)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T20:26:59.660

您没有说明您使用的平台，但这里有一个您可以使用的跨平台模块： [Python 中的文件锁定](https://pypi.python.org/pypi/filelock/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T21:00:52.917

根据您的平台/文件系统位置，这可能无法以安全的方式进行（例如 NFS）。也许您可以写入不同的文件并在之后合并结果？

# android - 列表中的图像显示不止一次

> ID：11853553
> 
> 赞同：2
> 
> 时间：2012-08-07T20:23:46.213
> 
> 标签：android, listview

我有一个从数据库中提取图像 url 的列表。一旦它获得了 url，我使用以下代码将它们存储在 drawables 上：

```
 private Drawable LoadImageFromWebOperations(String url){
    try{
        InputStream is = (InputStream) new URL(url).getContent();
        Drawable d = Drawable.createFromStream(is, "src name");
        return d;
    }catch (Exception e) {
        System.out.println("Exc="+e);
        return null;
    }
} 
```

然后我将drawable保存到一个链接列表中并继续拉其他图像url，一旦完成，图片就会显示出来。我遇到的问题是它可以很好地提取网址，但是当它显示在应用程序上时，前两张图片很好，但是当我滚动查看第三张图片时，它会显示第一张的图片，对此有什么想法吗？ ?

以下是 getview 和自定义列表的代码：

```
private class RowData {

    protected int mId;
    protected String mTitle;

    RowData(int id,String title){
    mId=id;
    mTitle = title;
    }
    @Override
    public String toString() {
            return mId+" "+mTitle+" ";
    }
}

private class CustomAdapter extends ArrayAdapter<RowData> {

    public CustomAdapter(Context context, int resource,
                    int textViewResourceId, List<RowData> objects) {
            super(context, resource, textViewResourceId, objects);

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder holder = null;

            TextView title = null;
            TextView date = null;
            TextView detail = null;
            ImageView i11=null;
            String postDate;

            RowData rowData= getItem(position);

            if(null == convertView){
                    convertView = mInflater.inflate(R.layout.newspg, null);
                    holder = new ViewHolder(convertView);
                    convertView.setTag(holder);                   
            }
            holder = (ViewHolder) convertView.getTag();    

            title = holder.gettitle();     
            title.setText(rowData.mTitle);
            postDate = getpostDate(news, rowData.mTitle );
            Log.i("Date",postDate);
            date = holder.getDate();     
            date.setText(postDate);

            i11=holder.getImage(position);
            Log.i("pos",Integer.toString(position));
            //i11.setImageResource(imgid[0]);

            return convertView;
    }

    private class ViewHolder {      
        private View mRow;
        private TextView title = null;
        private TextView date = null;
        private TextView detail = null;
        private ImageView i11=null;            

            public ViewHolder(View row) {
            mRow = row;
            }

            public TextView gettitle() {
                    if(null == title){
                            title = (TextView) mRow.findViewById(R.id.title);
                    }
                    return title;
            }

            public TextView getDate() {
                if(null == date){
                        date = (TextView) mRow.findViewById(R.id.date);
                }
                return date;
        }

            public ImageView getImage(int position) {
                if(null == i11){

                    i11 = (ImageView) mRow.findViewById(R.id.img); 

                    i11.setImageDrawable(newArtists.get(position).getNewsPic());

            }

            return i11;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:57:03.113

发生这种情况是因为列表视图重用了以前的行（视图包括您的图片）来构建新行。所以你必须注意这一点。例如，你可以隐藏ImageView，直到你得到好的图片放到ImageView中，然后让它可见。

# objective-c - 在运行时使用变量声明字符串

> ID：11853554
> 
> 赞同：0
> 
> 时间：2012-08-07T20:23:50.110
> 
> 标签：objective-c, nsstring

我正在尝试使用传递给 Web 服务的参数创建一个字符串，但在运行时之前我永远不知道会有多少参数。

所有参数都存储在一个数组中，我遍历数组，将每个参数添加到字符串中。

.php 端的变量标记为 field1、field2、field3 等。

我的问题在于当我尝试在 for 循环中声明字符串时。我正在尝试使用`x`并将其附加到“字段”一词，以便最终得到字段 1、字段 2、字段 3 等。

当我尝试执行此操作时，会出现一条错误消息，指出参数多于预期。

这是我所拥有的：

```
NSString *URLWithParameters = [NSString stringWithFormat:@"http://www.mywebsite/service?"];

for (int x = 0; x < [fields count]; x++) {

    NSString *temp = [NSString stringWithString:@"field%i=%@&", x, (NSString *)[fields objectAtIndex:x]];

    URLWithParameters = [URLWithParameters stringByAppendingString:temp];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:26:40.447

`stringWithString`应该是`stringWithFormat`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:28:07.440

改变：

```
NSString *temp = [NSString stringWithString:@"field%i=%@&", x, (NSString *)[fields objectAtIndex:x]]; 
```

到：

```
NSString *temp = [NSString stringWithFormat:@"field%i=%@&", x, (NSString *)[fields objectAtIndex:x]]; 
```

* * *

**笔记：**

为什么你使用`[NSString stringWithFormat:@"http://www.mywebsite/service?"]`什么时候你可以像这样直接使用它：

```
NSString *URLWithParameters = @"http://www.mywebsite/service?"; 
```

或使用`stringWithformat`：

```
NSString *URLWithParameters = [NSString stringWithFormat:@"%@", @"http://www.mywebsite/service?"]; 
```

# php - 需要获得路径的中间部分

> ID：11853556
> 
> 赞同：0
> 
> 时间：2012-08-07T20:23:56.620
> 
> 标签：php, regex, string

我有这样的路径

```
apples/oranges/bananas 
```

我需要获取路径中的中间项目，在本例中为橘子。

最好的方法是什么？我可以使用 strpos 和 substr 自己做，但我想有更好的方法......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T20:24:56.117

```
$path = explode("/", "apples/oranges/bananas");

echo $path[1]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T20:29:23.470

只是为了展示*PHP > 5.4*中的数组取消引用：

```
echo explode('/', 'apple/oranges/bananas')[1]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T20:25:25.437

您可以分解字符串（假设是），然后从数组中获取正确的索引。像这样：

```
$string = "apples/oranges/bananas";

$array = explode('/', $string);

echo $array[1]; //outputs oranges 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T20:25:57.330

如果

```
$path = 'apples/oranges/bananas'; 
```

你可以这样做：

```
$dir = basename(dirname($path)); 
```

如果你想从字符串的末尾开始，并且应该在 Windows 上工作，或者

```
$dir = preg_match('|/([^/]*)|', $path, $m) ? $m[1] : false; 
```

如果你想从字符串的开头开始，并且不会在 Windows 上工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T20:26:23.303

它总是由 2 个斜线分隔的 3 个单词吗？
如果是，您可以尝试：

```
$mypath = explode('/', 'apple/oranges/bananas');
echo $mypath[1]; //gives oranges 
```

# iphone - 这些创建和处理数组的方式之间的基本区别是什么？

> ID：11853558
> 
> 赞同：0
> 
> 时间：2012-08-07T20:24:00.580
> 
> 标签：iphone, ios, arrays, nsarray

我不确定用 10 个 MyClass 类型的固定大小的对象声明我的数组的方法，以及这些不同的替代方案对效率、易于编码或其他方面的影响。

...牢记 xCode4.4 的新功能，尤其是：

*   对于 NSArray 和 NSDictionary 类，提供了对 Objective-C 文字的支持。
*   Objective-C 容器对象支持使用 '[ ]' 语法进行下标。

...当然还有使用 ARC

特别是我需要编写返回这些数组作为结果的构造方法。

**备选方案1**

```
 MyClass* objectOfMyClass;
  MyClass* array1[10];
  array1[5] = objectOfMyClass; 
```

方法声明：

```
- (MyClass*[]) createArray {   <--- is this declaration correct like this ? 
```

附言。AFAIK 这些数组被放在堆栈内存中 - 但我不确定！

**备选方案2**

```
 MyClass* objectOfMyClass;

    NSMutableArray *array2 = [[NSMutableArray alloc] init];
    for (int i = 0; i<10; i++)
        [array2 addObject:objectOfMyClass]; //objects get added in some way...
    //can't directly access nTh object in this case, need to add from 0 to 9
    //conversion to non mutable array, since size will not change anymore
    NSArray *array3 = [NSArray arrayWithArray:array2]; 
```

方法声明：

```
- (NSArray*) createArray { 
```

附言。AFAIK 这些数组放在主内存中 - 不是堆栈 - 但我不确定！

**备选方案3**

```
NSArray *array4 = [[NSArray alloc] init];
array4 = ...how to prepare the array so it can hold 10 objects without using NSMutableArray ?
            otherwise I do not see a difference to alternative 2...
for (int i = 0; i<10; i++)
    array4[i] = objectOfMyClass]; 
```

方法声明：

```
- (NSArray*) createArray { 
```

非常感谢您带来光明！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:01:28.313

[这里](http://clang.llvm.org/docs/ObjectiveCLiterals.html)有一篇关于文字的好文章。你不能做替代 1。最好的方法是：

```
NSMutableArray *holdsMyClass = [NSMutableArray arrayWithCapacity:10]; // sized so array does not need to realloc as you add stuff to it 
```

您不能通过索引超过大小来任意增加数组的大小 - 如果您在索引 5 处有一个对象，您可以替换它：

```
holdsMyClass[5] = obj; 
```

例如，如果您尝试编译它，它会失败：

```
- (NSArray*[]) createArray
{
    NSArray *foo[10];
    foo[2] = [NSArray array];

    return foo;
} 
```

生成此错误：“数组初始化程序必须是初始化程序列表”

# javascript - new Date('2011-12-15 00:00:00') 显示为 NaN

> ID：11853562
> 
> 赞同：4
> 
> 时间：2012-08-07T20:24:14.670
> 
> 标签：javascript, date, internet-explorer-9

代码：`new Date('2011-12-15 00:00:00')`显示为`NaN`.
我怎样才能转换这个日期？任何帮助表示赞赏。

我的代码非常简单。它适用于 Chrome，但不适用于 IE 9。

```
var dateText = new Date('2012-08-01 00:00:00'); 
alert(dateText.getDate().toString() + "/" + dateText.getMonth().toString() + "/" + dateText.getYear().toString()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T20:30:50.903

在日期格式中添加“T”。例如：

```
new Date('2011-12-15T00:00:00') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:28:16.573

在网上搜索后，发现愚蠢的 IE 不理解这种日期格式。我不了解 Safari 和 Firefox，但肯定可以在 Chrome 中使用。

要么我将不得不使用一些像 DateJS 这样的 javascript 库来执行此操作，要么必须执行一些自定义编码，如下所示，我永远不会推荐。幸运的是，我确信我会得到 YYYY-MM-DD HH:MI:SS 格式的日期。

```
var dateText = '2011-12-15 00:00:00';
alert(dateText.substring(5, 7) + "/" + dateText.substring(8, 10) + "/" + dateText.substring(0, 4)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-15T09:23:07.527

我尝试的简单解决方案 从[http://datejs.com/](http://datejs.com/)下载 date.js 包含在您的文件中，然后 var date = Date.parse('1970-01-12 00:00:00'); var formattedDate = date.toString('yyyy-MM-dd');

它就像 Safari 中的魅力一样。

# html - 边界半径属性 | 在 iPad 上显示不正确，但在 iMAC 上不正确

> ID：11853563
> 
> 赞同：1
> 
> 时间：2012-08-07T20:24:15.917
> 
> 标签：html, css, safari

去苹果商店测试我的网站，发现 iPad 在我的所有角落都设置了圆形边框，而不仅仅是我指定的两个。

相关代码：

. . .

```
 <div id="wr_un_pass" >
      <input name="pass" id="un_pass" type="password" maxlength="20" >
      <p id="un_pass_lab" class="un_lab">Password</p>
      <p id="un_but">SignUp</p>
      <p id="un_rc">SignUp</p>
    </div>
  </form>
   <div id="un_rb" class="i_box_r" ><p id="un_rt" >Please enter all fields</p></div>
</div>
<style>
#un_pass{
  border-top-left-radius:  4px;
  border-bottom-left-radius:  4px;  
  width:  200px;
  height:  29px;
  color:  #888887;
  border:  1px solid #cccccc;
  font-size:  18px;
} 
```

. . .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:37:32.803

您应该将样式放在 html 代码上方，并且您可能还需要适用于 iPad 的 webkits。

```
-webkit-border-top-left-radius: 4px;
-webkit-border-bottom-left-radius: 4px; 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:03:45.317

新 iPad 会自动在我的所有输入字段上放置一个半径。通过一起删除 radius 属性进行验证。

# ruby-on-rails - 使用未知的 URL 参数重定向？

> ID：11853566
> 
> 赞同：0
> 
> 时间：2012-08-07T20:24:22.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3, url, parameters

我想从 URL 中获取所有“附加”参数并将它们放在`redirect_to`. 不过，我不知道参数是什么。

例子：`example.com/books/1234?name=Bobby&uid=3819&gender=male`

我想做一些类似的事情`redirect_to login_path(params)`

然后它会重定向到`example.com/login?name=Bobby&uid=3819&gender=male`

我知道我可以通过`:name`,`:uid`和`:gender`,`redirect_to`但就像我说的那样，我不确切知道那里会有什么参数，所以我只需要抓住所有这些参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:41:11.967

我假设您只想将 GET 参数传递给此重定向。如果是这样，您可以这样做：

```
redirect_to login_path(request.GET) 
```

# mysql - 参数化查询不断消失

> ID：11853567
> 
> 赞同：0
> 
> 时间：2012-08-07T20:24:24.493
> 
> 标签：mysql

我正在尝试对数据库进行编程，并且我正在使用参数化查询和存储过程的组合。大多数情况下，我在存储过程中使用 pqs。我做的每一个都正确，并得到了正确的结果。但是，每次我退出 mysql 服务器并重新登录时，sprocs 仍然存在，但就像我从未编写过任何 pqs 一样。仅当我从头开始重新执行 pqs 时它才有效。我在讲座或网上都没有看到任何关于 pqs 是临时的，所以我做错了什么吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:39:28.300

你有一个苹果和星号类别的混淆。

苹果：存储过程是持久的服务器端对象，其名称位于特定 MySQL 数据库的名称空间中。就像表定义、视图和表内容一样，它们是数据库的一部分。

星号：参数化查询（准备好的语句）是在与 DBMS 的特定连接下创建的客户端对象。它们是您碰巧使用的任何连接库（以任何语言）的类层次结构中的对象。它们的生命周期不能超过连接的生命周期。

如果您的应用碰巧使用了多个连接（例如，如果它是多线程的），您需要为您正在使用的特定连接创建参数化查询。

# iphone - presentPopoverFromRect 导致我的应用程序冻结

> ID：11853569
> 
> 赞同：0
> 
> 时间：2012-08-07T20:24:28.020
> 
> 标签：iphone, ios, uipopovercontroller

我正在显示一个来自 Button 的 Popover，它位于 UITableView 的标题中。

```
-(void) addButtonClicked:(id)sender{

 [addPopOverVC setPopoverContentSize:CGSizeMake(POPOVER_WIDTH, numberOfRowsInTable * addOptionsTable.rowHeight)];
 [addPopOverVC presentPopoverFromRect:[sender bounds] inView:sender
                    allowedArrowDirections:UIPopoverArrowDirectionAny 动画：YES];
 addPopOverVC.passthroughViews = nil;
}

```

应用程序冻结在第二行（当我调用方法 presentPopoverFromRect 时），调试器中没有任何警告/错误。此外，当我尝试对其进行调试时，该步骤会在该行消失，并且应用程序变得无响应，就好像它从未返回过一样。我以前没有见过这样的行为。addPopOverVc 是一个 UIPopoverViewController。所有参数的值都不是 nil 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:31:35.850

1）`sender`在这种情况下是触发点击事件的按钮。您不应该使用按钮来呈现弹出框，而是使用您想要呈现弹出框的真实视图。

2）您确定`addPopOverVC`已正确初始化和保留吗？

干杯，安卡

# antlr - Antlr 告诉我 NoViableAltException，我一无所知

> ID：11853574
> 
> 赞同：0
> 
> 时间：2012-08-07T20:24:50.890
> 
> 标签：antlr, dsl, parser-generator

我目前正在研究一种接受 sql 语句的 ANTLR 语法。我想使用这个语法来允许程序员创建 mysql 查询，应用程序会自动将查询更改为所需数据库的正确格式。

例如，如果您在查询中使用 LIMIT 0,5，它将自动将此查询转换为 mssql 的正确格式

到目前为止，这是我的语法

```
grammar sql2;

query   
    : select ';'?  EOF
    ;

select
    : 'SELECT' top? select_exp 'FROM' table ('WHERE' compare_exp)? limit?
    ;

compare_exp
    : field CompareOperator param (BooleanOperator compare_exp)?
    ;

param
    : '@' ID
    ;

top
    : 'TOP' INT
    ;

limit
    : 'LIMIT' INT (',' INT)?
    ;

select_exp
    : field (',' select_exp)?
    ;

table
    : '`' ID '`' ('.`' ID '`')?
    | ID ('.' ID)?
    ;

field
    : table
    ;

ID  :   ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
    ;

CompareOperator
    : ( '=' | '<>' )
    ;

BooleanOperator
    : ('AND' | 'OR')
    ;

INT :   '0'..'9'+
    ;

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ; 
```

如果我用输入测试这个

```
SELECT TOP 5 bla_asdf, bal, lab FROM `x`.`y` WHERE xdf = @tf AND bla = @b LIMIT 0, 5 
```

它在 AND bla = @b 处停止解析我的查询，此时它给了我一个 NoViableAltException ... 如果我输入

```
SELECT TOP 5 bla_asdf, bal, lab FROM `x`.`y` WHERE xdf = @tf LIMIT 0, 5 
```

它不会给我任何问题。

我绝对不是 ANTLR 的专家，但这也意味着我看不到我在这里做错了什么。

有人可以帮我吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:16:20.303

AND 被标记为 ID，因为匹配最长输入片段的第一个词法分析器规则获胜。

所以你应该在 ID 之前定义 BooleanOperator。

# android - sqlite 空指针异常

> ID：11853577
> 
> 赞同：0
> 
> 时间：2012-08-07T20:24:55.100
> 
> 标签：android, sqlite

```
String sel="SELECT "+stdb.sid+"," +stdb.amt+", "+stdb.details+" FROM "+stdb.tname;
        Cursor c=dobj.rawQuery(sel, null);
        while(c.moveToNext()){
            int id=c.getInt(c.getColumnIndex(stdb.sid));
            int amt=c.getInt(c.getColumnIndex(stdb.amt));
            String printdetail=c.getString(c.getColumnIndex(stdb.details));
            TextView tv1=(TextView)findViewById(R.id.textView1);

        Log.e("gg",""+amt ); //the value of amt comes in logcat
        tv1.setText(""+amt);//this gives nullpointer exception 
```

在这里，我试图从edittext中获取一个值，我可以在logcat中看到该值，但是当我尝试使用settext（TextView）打印相同的值时，我得到一个NULLPOINTEREXCEPTION

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:30:12.803

尝试这个

```
if(tv1!=NULL)
    tv1.setText(""+amt);
else
    Log.e("WHOA, this is NULL!!!"); 
```

并查看它是否打印 else 日志。如果是这样，则意味着您的 tv1 视图未正确初始化。如果没有，将看看我们能做些什么。

# python - 如何在不打开计算机的情况下保存在模块中所做的事情？

> ID：11853591
> 
> 赞同：1
> 
> 时间：2012-08-07T20:25:27.700
> 
> 标签：python, savestate, easygui

我打算设计一个关于养龙的游戏，但不知道如何保存我的会话/经验/统计数据，所以这将***毫无意义！***无法弄清楚如何使用泡菜，所以有人可以给我答案吗？PSSimplify你的答案，因为我很愚蠢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:58:25.193

以下是标准库中基本 I/O 信息的链接：[http://docs.python.org/tutorial/inputoutput.html](http://docs.python.org/tutorial/inputoutput.html)您需要以某种格式存储游戏中的数据（这取决于您) 到一个文件中，然后，稍后，您将读取该文件，解析数据，并在用户从上一个会话返回时将其放回内存中。

# heroku - 我可以使用不支持 Cedar 的应用程序推送到 Heroku 吗？

> ID：11853592
> 
> 赞同：1
> 
> 时间：2012-08-07T20:25:28.680
> 
> 标签：heroku

我的应用程序只使用 PHP 和 SQLite。

我收到此错误：

> Heroku 推送被拒绝，未检测到 Cedar 支持的应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T22:42:55.347

您应该能够使用 PHP，有一个[PHP buildpack](https://github.com/heroku/heroku-buildpack-php) — 尽管 Heroku 站点上没有很好的文档记录。查看[它的检测脚本](https://github.com/heroku/heroku-buildpack-php/blob/master/bin/detect)，它正在检查`index.php`文件。你的应用程序有吗？如果不是，您将需要创建一个，如果只是为了将其检测为 PHP 应用程序。

如果您的应用仍未被检测为 PHP 应用，您可以尝试显式[指定 buildpack 以](https://devcenter.heroku.com/articles/buildpacks#using-a-custom-buildpack)与 config var 一起使用：

```
$ heroku config:set BUILDPACK_URL=https://github.com/heroku/heroku-buildpack-php 
```

更大的问题是您将无法在 Heroku 上使用 SQLite。即使您要创建自己的构建包来添加相关的 SQLite 库，只读文件系统也意味着它几乎没有用处。您应该考虑使用[Postgres](https://devcenter.heroku.com/articles/what-database-does-heroku-use)（或者可能使用附加组件的 MySQL）。

# ruby-on-rails - 将 Rails 应用程序编译为 Heroku 之外的 slug 是否有好处？你能做一个非 Heroku slug 吗？

> ID：11853601
> 
> 赞同：0
> 
> 时间：2012-08-07T20:26:05.123
> 
> 标签：ruby-on-rails, performance, heroku, compilation, slug

是否有关于 Heroku 上下文中的 slug 的规范、白皮书或任何内容？我一直注意到 Heroku 如何将 Rails 应用程序编译成 slug，从而提高性能，至少在其专有环境中是这样。

有没有办法在 Heroku 之外做到这一点，和/或在不同的环境中利用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T19:52:57.447

正如上面 John Beynon 所指出的，“编译”是构建包过程的另一个名称。当您将代码推送到 Heroku 时，我们会解决所有依赖项并将生成的包 TGZ 转换为“slug”。

该过程是开源的，具有完整的文档和指向我们[devcenter](https://devcenter.heroku.com/articles/buildpacks)上各种受支持的构建包的链接。如果您想了解确切的技术细节，请参阅[buildpack api 文档](https://devcenter.heroku.com/articles/buildpack-api)。

我们已经看到[其他](http://docs.stackato.com/deploy/buildpack.html)一些平台开始采用 buildpack。很高兴看到任何喜欢采用它们并提供反馈的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:06:13.630

[除此之外](https://devcenter.heroku.com/articles/slug-compiler)，我没有看到任何文档，但它不是传统意义上的“编译”。

他们获取您已将应用程序推送到的 git 存储库，删除 .git 目录，清理不必要的目录，处理 .slugignore 文件以删除您在运行时不需要的任何位（如测试等），然后包含依赖项然后创建一个更小的应用程序版本，它更容易分布在测功网格中。slug 尺寸越小，扩展应用程序的速度就越快，因为您添加的每个 dyno 都会收到“已编译”slug 的新副本。

# c# - C# 不允许我将两个短裤相加为一个短裤

> ID：11853602
> 
> 赞同：18
> 
> 时间：2012-08-07T20:26:14.223
> 
> 标签：c#, type-conversion

我有一个代码：

```
static short Sum(short a, short b)
        {
            return a + b;
        } 
```

而且它不能编译，saynig 不能将 'int' 转换为 'short'。我今天可能真的很累，但我看不到问题！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-07T20:29:34.853

> 而且它不能编译，saynig 不能将 'int' 转换为 'short'。我今天可能真的很累，但我看不到问题！

这只是语言的定义方式。整数类型的 + 运算符定义为：

```
static uint op +(uint x, uint y)
static int op +(int x, int y)
static ulong op +(ulong x, ulong y)
static long op +(long x, long y) 
```

根据需要提升操作数。

现在至于*为什么*这样定义它 - 老实说，我不知道。我不赞成“因为它可能溢出”的论点——这表明`byte + byte`应该将其定义为 return `short`，并且`int + int`应该 return `long`，这两者都不是真的。

我在某处听说它可能与性能有关，但我不想肯定地说。（也许处理器通常只提供 32 位和 64 位整数的整数运算？）

无论哪种方式，为什么会这样并不*重要*——这只是语言的规则。

请注意，复合赋值运算符有一个隐式转换回相关类型，因此您*可以*编写：

```
short x = 10;
short y = 20;
x += y; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-07T20:27:08.890

当您将两条短裤相加时，它们的总和可以超过一个短裤的允许值，但对于一个`int`. 这几乎就是 Eric Lippert 在[他的回答](https://stackoverflow.com/a/4347752/1583)中所说的。

* * *

`int`旁白：为什么添加两个s 返回 a不是这种情况`long`？Eric 也解决了这个问题：

> 在整数算术环绕的世界中，在 int 中进行所有计算更为明智，这种类型可能具有足够的范围以使典型计算不会溢出。

* * *

因此，`+`定义添加两个`short`s 的运算符返回一个`int`。

这就是您收到编译时错误的原因 - 您正在返回`int`指定`short`返回类型的位置。

`short`如果您*知道*加法将*始终*导致 a ，则可以将结果显式转换为`short`：

```
static short Sum(short a, short b)
{
    return (short)(a + b);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:33:15.020

Jon Skeet[详细解释了](https://stackoverflow.com/a/11853652/1159478)为什么您的代码不起作用，但他没有列出您需要做什么才能编译它。您可以使用以下内容：

```
static short Sum(short a, short b)
{
    return (short)(a + b);
} 
```

# jquery - 如何在菜单中取消绑定后绑定

> ID：11853608
> 
> 赞同：1
> 
> 时间：2012-08-07T20:26:22.633
> 
> 标签：jquery

我正在尝试创建一个导航，它使用悬停来上下移动导航按钮，这很有效。当我单击以选择一个按钮时，我希望悬停停止，这很有效。当我在导航中选择另一个按钮时，如何将悬停动画绑定回来？截至目前，它保持无界，并且所有按钮在单击时都变为无界。一个foreach（）？

自从我使用 jQuery 以来已经有一段时间了，需要一点帮助。

另外，我首先使用了 mouseOver() 和 mouseOut() 并且读到悬停更好用。它是否正确？

让小提琴正确运行，这可以让您在不使用图像的情况下获得更好的想法。 [http://jsfiddle.net/cs_what/WP9TT/](http://jsfiddle.net/cs_what/WP9TT/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:47:44.373

事件委托可以使这变得容易。

```
google.load("jquery", "1.6.2");
google.setOnLoadCallback(function(){
    $(".horzNavigation").delegate("ul > li > a:not(.active)",{
        "mouseenter": function(){
            $(this).stop(true,true).animate({"top": "-=60px"}, 250, 'swing');
        },
        "mouseleave": function(){
            $(this).stop(true,true).animate({"top": "+=60px"}, 250, 'swing');
        }
    }).delegate("ul > li > a","click",function(event){
        $(this).addClass('active').parent().siblings().children('.active').removeClass('active');
    });
}); 
```

另外，我假设您的代码中有错字，`ul`元素不能直接包含锚标签，所以我在`li`标签中添加了选择器。无效的 html 在不同的浏览器中可能会产生不一致的结果。

# ruby-on-rails - yml 文件存在，但 Rails 服务器和乘客抱怨它不存在

> ID：11853609
> 
> 赞同：0
> 
> 时间：2012-08-07T20:26:27.983
> 
> 标签：ruby-on-rails, ruby, yaml, config

我一直在关注 Ryan Bates 在[此链接](http://railscasts.com/episodes/85-yaml-configuration-file/)上关于 YAML 配置文件的 railscast #85，但我遇到了一个我找不到答案的问题。我通过 RVM 和 Rails 3.2.6 使用 Ruby 1.9.3p194。

在我的 applications.rb 中，我有

```
require 'yaml'
APP_CONFIG = YAML.load_file("#{Rails.root}/config/config.yml")[Rails.env] 
```

我将以下内容放入 /config/config.yml：

```
username: "userhere"
password: "pass" 
```

当我尝试“rails s”时，它给了我一个错误

```
/opt/local/lib/ruby1.9/1.9.1/psych.rb:297:in `initialize': No such file or directory - /config/config.yml (Errno::ENOENT) 
```

当我尝试在乘客中加载页面时，我得到

```
Error message:
No such file or directory - /config/config.yml
Exception class:
Errno::ENOENT 
```

我在[这里](https://stackoverflow.com/questions/4236391/why-cant-rails-find-this-custom-yml-file)尝试过 File.join 行，但我遇到了同样的错误

```
'join', can't convert nil to String (TypeError) 
```

当我搜索答案时，每个线程都通过创建文件解决了 yml 文件未找到错误的问题，但我的存在并且它仍然给我错误消息。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:22:40.603

答案就在这里：[为什么我的 Rails.root 为零？](https://stackoverflow.com/questions/4240627/why-is-my-rails-root-nil)

Application 对象尚不存在，因此`Rails.root`返回`nil`。尝试将 YAML 配置内容放入初始化程序中，就像 RB 推荐的那样。

# java - java web app-为servlet上下文监听器添加内容到web.xml后无法看到jsp文件

> ID：11853613
> 
> 赞同：1
> 
> 时间：2012-08-07T20:26:45.007
> 
> 标签：java, servlets, servlet-listeners

我已将以下内容添加到我的 web.xml 中以用于 servlet 上下文侦听器---

```
 <listener>
 <listener-class>
 com.anyaservices.log4j.ApplicationServletContextListener
 </listener-class>
 </listener> 
```

我在“欢迎文件列表”结束后立即添加了这个

欢迎文件列表节点的最后一行如下 -

```
 </welcome-file-list> 
```

现在，我对 servlet 进行了一些更改，以便它可以使用上下文侦听器……除了 servlet 之外，还有一个“Hello.jsp”文件，它只显示一条欢迎消息。

我没有对 JSP 文件进行任何更改。但是，在我的 servlet 上下文侦听器的代码更改后，当我尝试转到 Hello.jsp 时，我在 Tomcat= 请求的资源不可用时收到错误消息。

我在这里做错了什么？为什么现在不显示 JSP 文件？

编辑——我已经在下面发布了我的 web.xml 的全部内容——

```
 <?xml version="1.0" encoding="UTF-8"?>
  <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
    <display-name>Test Web Application</display-name>
    <welcome-file-list>
      <welcome-file>index.html</welcome-file>
      <welcome-file>index.htm</welcome-file>
      <welcome-file>index.jsp</welcome-file>
      <welcome-file>default.html</welcome-file>
      <welcome-file>default.htm</welcome-file>
      <welcome-file>Hello.jsp</welcome-file>
    </welcome-file-list>
    <listener>
    <listener-class>
     com.test.log4j.ApplicationServletContextListener
    </listener-class>
  </listener>
    <servlet>
      <description>Used to run a single crawl job</description>
      <display-name>runsinglecrawljob</display-name>
      <servlet-name>runsinglecrawljob</servlet-name>
      <servlet-class>com.test.runsinglecrawljob</servlet-class>
    </servlet>
    <servlet-mapping>
      <servlet-name>runsinglecrawljob</servlet-name>
      <url-pattern>/runsinglecrawljob</url-pattern>
    </servlet-mapping>
    <servlet>
      <description>Home page</description>
      <display-name>home</display-name>
      <servlet-name>home</servlet-name>
      <servlet-class>home</servlet-class>
    </servlet>
    <servlet-mapping>
      <servlet-name>home</servlet-name>
      <url-pattern>/home</url-pattern>
    </servlet-mapping>
    <servlet>
      <description>Run a single crawl job after asking users for parameters of that       job</description>
      <display-name>runsinglejob</display-name>
      <servlet-name>runsinglejob</servlet-name>
      <servlet-class>com.test.runsinglecrawljob</servlet-class>
    </servlet>
    <servlet-mapping>
      <servlet-name>runsinglejob</servlet-name>
      <url-pattern>/runsinglejob</url-pattern>
    </servlet-mapping>

  </web-app> 
```

我试图访问的 URL 是 http://localhost:8080/test_web_app/Hello.jsp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:00:36.957

Tomcat 通过 org.apache.jasper.servlet.JspServlet 处理 JSP 文件。也许您的侦听器类以某种方式干扰了 JspServlet 的操作。无需在欢迎文件列表中列出所有这些文件。战争中的任何 jsp 文件都应该可用（但不应放在 WEB-INF 或 META-INF 文件夹中。）

我认为您应该检查您的 log4j 配置。您是否使用 WEB-INF/classes 中的 log4j.properties 文件初始化 log4j？

# android - Android - Admob 下推布局

> ID：11853614
> 
> 赞同：1
> 
> 时间：2012-08-07T20:26:48.690
> 
> 标签：android, xml, layout, admob, gesture

我已经发布了一个应用程序，但问题在于 admob 推送布局，假设您一打开活动就开始绘制手势，然后在几秒钟后弹出一个广告，它推送内容并因此破坏了你画的手势。

我怎样才能阻止这种情况发生，我希望广告加载但不推动其下方的内容。

我已经包含了我的创建手势布局的 XML

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/gridbg"
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"

        android:orientation="horizontal">

   <com.google.ads.AdView
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
         android:id="@+id/adView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ads:adUnitId=""
        ads:adSize="BANNER"
        ads:loadAdOnCreate="true"
         android:gravity="center_horizontal"/>

    </LinearLayout>

    <android.gesture.GestureOverlayView
        android:id="@+id/gestures_overlay"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1.0"
        android:gestureColor="#00FFFF"
        android:gestureStrokeType="multiple" />

    <LinearLayout
        style="@android:style/ButtonBar"

        android:layout_width="fill_parent"
        android:layout_height="wrap_content"

        android:orientation="horizontal">

        <Button
            android:id="@+id/done"

            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"

            android:enabled="false"

            android:onClick="addGesture"
            android:text="@string/button_done" 

            style="@style/BlueButtonText"
            android:background="@drawable/blue_button"
            />

        <Button
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"

            android:onClick="cancelGesture"
            android:text="@string/button_discard" 

            style="@style/BlueButtonText"
            android:background="@drawable/blue_button"
            />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:35:46.867

它正在推动您的视图，因为您将高度设置为 wrap_content。首次加载视图时，没有广告可显示，因此高度为零。尝试设置容器视图的高度，以便视图始终占据广告所需的空间：

```
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:orientation="horizontal">

   <com.google.ads.AdView
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
         android:id="@+id/adView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ads:adUnitId=""
        ads:adSize="BANNER"
        ads:loadAdOnCreate="true"
         android:gravity="center_horizontal"/>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:33:15.283

如果你没有得到广告，你最终会得到空白空间，这看起来很奇怪，并且在小屏幕上浪费了宝贵的空间。

不仅如此，据我所知，广告应该在不同的屏幕上有不同的尺寸。

我认为你应该考虑做接下来的事情：

1.  将广告放在布局顶部

2.  仅将其放在用户不会看到的不重要的地方。甚至可能在初始屏幕、过渡屏幕和设置页面上

3.  当广告出现时使用动画，当它结束时，也改变布局。

# hibernate - Hibernate 总是将 bool isAdmin() 映射到 false

> ID：11853624
> 
> 赞同：2
> 
> 时间：2012-08-07T20:27:19.077
> 
> 标签：hibernate, mapping

我正在使用休眠和 JSF 2.0，尝试使用我的 sqlDB 列 Admin(BOOL) 设置 Web 过滤器，以确定用户是否可以查看管理员设置页面，但无论 Admin 字段设置为 1 还是 0在数据库中，休眠将其设置为 false。谁能帮我解决这个问题？我使用 Hibernate 的逆向工程将字段映射到 DAO，但必须对 Admin 以外的字段进行一些修复。我可以包含每个请求的代码，此时我可以发布很多内容，以免淹没帖子，我不会。

# c# - 我怎样才能让我的应用程序一次又一次地关闭并自动启动和关闭？

> ID：11853627
> 
> 赞同：0
> 
> 时间：2012-08-07T20:27:43.373
> 
> 标签：c#

我想检查一个有时会出现但有时不会发生的问题。因此，不是手动关闭应用程序并一直重新启动，有什么可以让它自动运行，直到问题出现？或者可以模拟表单关闭的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:35:55.877

编写一个简单的 bat 程序来杀死你的应用程序并重新启动它怎么样？寻找控制台的“Taskkill”命令。如果我必须杀死记事本，我将使用“taskkill /f /im notepad.exe”

您可以使其需要按键来执行迭代并在杀死应用程序之前引起延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:36:51.160

只是为了好玩，如果您真的想做某事，请尝试一个简单的 C# 应用程序，它执行以下操作：

```
for (int i = 0; i < 100; ++i)
{
  Process proc = Process.Start("ExecutablePath");  
  Thread.Sleep(1000);
  proc.Kill();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:40:49.720

如果您想模拟用户行为您应该尝试[AutoIT](http://en.wikipedia.org/wiki/AutoIt)或[AHK](http://en.wikipedia.org/wiki/AutoHotkey)或[SIKULI](http://en.wikipedia.org/wiki/Sikuli)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T20:43:42.163

你可以试试这个

```
Timer timer;

public void StartTimer()
{
    timer = new Timer();
    timer.Interval = 5000; // 5 seconds
    timer.Tick += new EventHandler(timer_Tick);
    timer.Start();
}

void timer_Tick(object sender, EventArgs e)
{
    Process[] p = Process.GetProcessesByName("TheApp");
    if (p.Length == 0) {
        // Restart the app if it is not running any more
        Process.Start(@"C:\Programs\Application\TheApp.exe");
    } else {
        p[0].CloseMainWindow();
    }
} 
```

使用 Timer 以特定间隔调用方法。当计时器滴答作响时，查看是否存在具有给定名称的进程。如果它存在关闭它的主窗口（不要只是杀死它）。如果它不存在，请启动它。

# asp.net-mvc - 如何从源代码中获取 html 字符串并将 MailMessage 作为 Html Body 发送？

> ID：11853633
> 
> 赞同：0
> 
> 时间：2012-08-07T20:28:02.133
> 
> 标签：asp.net-mvc, string, asp.net-mvc-2, html

我有一个很大的页面，里面有很多 div..

看法：

```
<div id="contractOverview">
        <div id="econtract">
             <p>a lot of content here</p>
        </div>
</div> 
```

我只想从整个视图中获取一个“econtract”的id，然后调用控制器中的一个方法，该方法通过smtp发送一封电子邮件；这不是问题。问题是从“econtract”中获取 html 字符串。

控制器操作结果：

```
MailMessage m = new MailMessage();
m.From = new MailAddress("ir@w3mentor.com", "Raja Item");
m.To.Add(new MailAddress("su@w3mentor.com", "Sekaran Uma"));
m.Subject = "html email coming!";

//Specify an HTML message body
m.Body = "<div id="econtract">a lot of content here</div>"
m.IsBodyHtml = True 
```

请帮忙，已经坐了好几个小时了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:30:56.530

使用 JavaScript：

```
var txt = document.getElementById('econtract').innerHTML 
```

然后，您可以使用 AJAX 或表单将其发布回服务器。

# android - Android 亮度变化通知（或状态栏上卷通知）

> ID：11853635
> 
> 赞同：1
> 
> 时间：2012-08-07T20:28:08.780
> 
> 标签：android

在 Android 中，用户可以通过“向下滚动”状态栏（或通知栏，无论在 Android 中如何调用）并在那里更改亮度来更改亮度。

我需要在我的应用程序中显示亮度滑块。我知道如何获取系统亮度值，但问题是如何知道用户是否更改了亮度？当用户滚动通知栏时，我没有得到 onResume。我如何知道亮度发生了变化或通知栏向用户显示了我的活动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:03:15.630

尝试使用可无限期运行（或直到您希望它运行）的可运行线程创建一个线程，您可以在其中监听当前亮度的变化。这可以很容易地完成

1.  找到原始屏幕亮度并将其分配给名为 oldScreenBrightness 的变量。

2.  在你的线程检查中

    ```
    currentScreenBrightness = getCurrentScreenBrightness();
    if (oldScreenBrightness != currentScreenBrightness)
    {
        doSomething()
        oldScreenBrightness = currentScreenBrightness
    }
    else
    {
       doNothing or doSomethingElse
    } 
    ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-06T10:27:04.337

进入设置 选择显示 选择通知面板 检查亮度调整

# entity-framework - 如何告诉 EF 忽略数据库中的列？

> ID：11853636
> 
> 赞同：1
> 
> 时间：2012-08-07T20:28:08.267
> 
> 标签：entity-framework

我正在从我的 SQL Server 数据库构建我的 EF (v4.0.30319) 数据模型。每个表都有通过数据库触发器填充的字段`Created`。`Updated`

该数据库是 ASP.NET Web API 应用程序的后端，我最近发现了一个问题。问题是，由于`Created`和`Updated`字段没有填充到传递到 api 端点的模型中，它们被写入数据库作为`NULL`. 这将覆盖这些属性的数据库中已有的任何值。

我发现我可以编辑 EF 数据模型并从实体中删除这两列。它可以工作，并且日期时间不会被覆盖`NULL`。但这会导致另一个不那么严重但更烦人的问题......我的数据模型有一堆包含这些属性的表，并且所有表都需要通过删除这两列来更新。

有没有办法告诉 EF 忽略整个数据模型中实体中的某些列而不手动删除它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:05:06.487

据我所知，没有。从数据库生成模型将始终从数据库表中创建所有字段。好吧，只要它有一个主键，它就会。

可以只更新您想要的字段，即在您的创建和更新方法中不包括“已创建”和“已更新”字段。不过，我不得不说，如果那时模型上甚至不存在这些字段，我认为会更好。您可能会在某一时刻看到模型上的这些字段，但不记得它们不会被持久化到数据库中。

您可能希望在调用 create() 和 update() 方法时仅将日期时间插入这些字段。然后你可以放弃触发器。您显然希望对所有数据库操作都使用一个类库，以便将这个功能集中在一个地方。为了保持整洁，你知道吗？

# eclipse - 当恰好有 404 匹配时，Eclipse 搜索结果丢失？

> ID：11853639
> 
> 赞同：7
> 
> 时间：2012-08-07T20:28:30.140
> 
> 标签：eclipse, search

### 规格

*   Eclipse：SpringSource 工具套件
*   版本：2.9.1.RELEASE
*   内部版本号：201203221000

### 我所做的：

1.  搜索 -> 文件
2.  包含文字：“副标题”
3.  文件名模式：“*, !*jquery.js, !*min.js”
4.  范围：工作区
5.  点击“搜索”

### 我期望发生的事情：

*   搜索选项卡将显示“副标题”的搜索结果。

### 怎么了：

*   搜索选项卡开始查找结果并将它们放在选项卡上。
*   匹配的数量停止在 404 处，因为在我的工作区中有很多“副标题”实例。
*   每个结果的文件/目录名称变为空白。

### 我对复制的建议：

*   创建一个包含 404 个单词实例的测试工作区。
*   搜索它。

### 我的理论：

Eclipse 的开发人员在惹我。我希望这不是真的，但我不明白为什么它会这样做。其他人可以复制和/或解释它吗？

### 更新：

在更多地使用 Eclipse 之后，同样的结果似乎随机出现（文件/目录名称变为空白）。当有 404 个结果时，它始终如一地发生，但它也与其他数量随机发生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-11-02T23:00:49.063

解决方法。我发现我可以切换到不同的视角，它给了我搜索结果。

# android - android：特殊屏幕分辨率（滑块，720p ...）

> ID：11853642
> 
> 赞同：0
> 
> 时间：2012-08-07T20:28:36.317
> 
> 标签：android

我为我的 android 布局创建了不同的目录，如下所示：

*   1）资源/布局
*   2) res/layout-small
*   3) res/layout-large
*   4) res/layout-xlarge

我已经达到了大多数屏幕分辨率，但我无法获得这一切。

例如，所有带有（滑块）和 720p Galaxy Nexus 的屏幕分辨率都不起作用！还有一些 FWQVGA 或 XGA 分辨率。

谁能告诉我哪些目录我还需要正确获取所有屏幕？

THX 4 帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:36:51.877

您缺少“layout-normal”，但 small、normal、large、xlarge 限定符用于物理屏幕尺寸（对角线）。最好使用 dpi 限定符 layout-ldpi、layout-mdpi、layout-hdpi、layout-xhdpi。有关更多详细信息，请参阅[指南](http://developer.android.com/guide/practices/screens_support.html)。

# c# - Response.BinaryWrite 两次调用 ASPX 页面

> ID：11853644
> 
> 赞同：2
> 
> 时间：2012-08-07T20:28:43.637
> 
> 标签：c#, asp.net

我正在尝试使用`BinaryWriter`. 这会导致对话框窗口打开并提示用户保存或打开文件。这种行为很好；但是，如果我选择打开，则会再次调用 aspx 页面，经过长时间的等待，文件终于打开了。

我设置了 ContentType

```
Response.BinaryWrite(binary);
Response.End();
Repsonse.Close(); 
```

此行为仅发生在 excel 和 word 文件中。

浏览器 IE8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:58:41.720

做同样的事情的替代方法。你可以检查一下：

```
FileInfo fileInfo = new FileInfo(yourFilePath);    
context.Response.Clear();   
context.Response.ContentType = contentType;   //Set the contentType
context.Response.AddHeader("content-disposition", "attachment; filename=" + Path.GetFilename(yourFilePath));   
context.Response.AddHeader("Content-Length", fileInfo.Length.ToString());       
context.Response.TransmitFile(yourFilePath); 
```

希望这会有所帮助

# c# - 将文本从文本框保存到内存流？

> ID：11853645
> 
> 赞同：3
> 
> 时间：2012-08-07T20:28:43.437
> 
> 标签：c#, .net

嗨，我是 C# 开发人员的新手。我想将文本文件保存到数据库。我在 Youtube 上看了一些视频。他们使用 Memorystream 来保存图像：

```
MemoryStream ms = new MemoryStream();
pictureBox1.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg); 
```

现在我尝试从文本框中保存文本？我可以有类似的方法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:31:38.833

尝试这个：

```
MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(myTextBox.Text)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:31:48.593

是的你可以。

尝试这样的事情。

```
MemoryStream ms = new MemoryStream();
ms.Write(System.Text.Encoding.UTF8.GetBytes(textBox1.Text), 0, textBox1.Length); 
```

# python - 在 OSX 上预构建的 Python 包

> ID：11853646
> 
> 赞同：4
> 
> 时间：2012-08-07T20:28:58.820
> 
> 标签：python, macos, python-3.x, setuptools

好的，我想创建一个包含 C 模块的预构建 Python 包。也就是说，最后我想要一个 tarball，其中包含使用我的模块所需的所有内容并且可以安装 pip，即最后我可以执行以下操作：

```
pip install whatevertarballgetsproduced.tar.gz 
```

和图书馆将可用。它还需要对虚拟环境友好。

我当前的目录结构是：

```
project/
    + setup.py
    + mylibrary/
        + __init__.py
        + mylibrary.py
        + _mylibrary.so
    + README 
```

也就是说，编译后的 C 库在`_mylibrary.so`. 派生此文件的 C 源代码*不*包含在 tarball 中。我也在 OSX (Lion) 上这样做。`mylibrary.py`仅包含 C 库代码的 Python 包装器。

我如何实现这一目标？我想过做一个`python setup.py bdist`，但这并不是我真正想要的（除非我错过了由它产生的 tarball 不能安装 pip 的东西）。

为了完成，我的 setup.py 看起来像：

```
from setuptools import setup

setup(
    name='mylibrary_py3mac',
    version='0.1.1',
    description='My library which is tied to OSX & Python 3',
    long_description=open('README').read(),
    packages=['mylibrary'],
    classifiers = [
        'Intended Audience :: Developers',
        'License :: OSI Approved :: BSD License',
        'Operating System :: MacOS :: MacOS X',
        'Programming Language :: Python :: 3',
    ],
) 
```

请注意，我不打算公开分发此 tarball，它仅用于内部部署目的（因此我不关心它被预编译或仅与 OSX 绑定）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:21:12.493

亚当，你试过了`setup.py bdist_egg`吗？

它将生成一个可以使用安装的 egg 文件`easy_install`（`pip`不幸的是，不使用 ）。

此外，您的项目似乎丢失了`mylibrary/__init__.py`。

一旦你添加了丢失的“init”文件，我很想知道是否`setup.py`会足够聪明地将“so”文件包含到生成的 egg 文件中。有机会你必须以某种方式刺激它（我自己没有理由处理“.so”Python扩展，所以我不知道该怎么做）。

在下面的示例中，我`gevent-1.0b2-py2.7-macosx-10.4-x86_64.egg`使用它的`setup.py bdist_egg`. 我已经把它放在`pypi/`当前目录下的目录中。我知道它恰好有其他依赖项，我也战略性地将它们放入同一`pypi/`目录中。

```
easy_install --allow-hosts=None \
             --find-links=pypi/ \
             --always-unzip \
             pypi/gevent-1.0b2-py2.7-macosx-10.4-x86_64.egg 
```

您的情况更简单，因为您似乎没有任何额外的依赖项。所以你会做这样的事情：

```
easy_install --always-unzip \
             dist/mylibrary_py3mac-0.1.1-py2.7-macosx-10.4-x86_64.egg 
```

请注意，`dist/`目录是构建的鸡蛋文件所在的位置，何时`setup.py bdist_egg`调用。

# php - Mysqli 类总是为结果返回 NULL 一个 var 通过

> ID：11853647
> 
> 赞同：-1
> 
> 时间：2012-08-07T20:29:12.107
> 
> 标签：php, mysql, oop, mysqli, prepared-statement

每次我用我的班级为 select * from table where blank=blank 调用查询时，它总是在 var_dump 上出现“NULL”，以获得班级结束时的结果。我仍然坚持这一点，不知道它为什么这样做，但它肯定没有发送任何响应，因为我什么也没得到。

mysqli.class.php

```
<?php
class DATABASE
{
//set up variables only for this class
private $db_host;
private $db_user;
private $db_pass;
private $db_name;
private $connection;
private $paramaters = array();
private $results = array();
private $numrows;

//call connection on call of class
public function __construct($db_host, $db_user, $db_pass, $db_name)
{
    $this->host = $db_host;
    $this->user = $db_user;
    $this->pass = $db_pass;
    $this->name = $db_name;
    $this->mysqli = new mysqli($this->host, $this->user, $this->pass, $this->name) or die('There was a problem connecting to the database! Error #: '. $this->mysqli->connect_errno);
}
//close mysqli connection on class close
public function __destruct()
{
    $this->mysqli->close();
}
//query
public function select($fields, $table, $where, $whereVal, $type, $orderByVal, $ASDESC, $limitVal, $sets, $setVal)
{
    switch($type)
    {
        case "regular":
            if ($where == null)
            {
                $queryPre = "SELECT " . $fields . " FROM " . $table;
                $querySuff = "";
            } else {
                $queryPre = "SELECT " . $fields . " FROM " . $table;
                $querySuff = " WHERE " . $where . " = ?";
            }
            break;
        case "orderByLimit":
            $queryPre = "SELECT " . $fields . " FROM " . $table;
            $querySuff = " ORDER BY " . $orderByVal . " " . $ASDESC . " LIMIT " . $limitVal;
            break;
        case "update":
            if ($where == null)
            {
                $queryPre = "UPDATE " . $table;
                //need for loop for multiple sets, check for is_array and do multiple if so.
                $querySuff = " SET " . $sets . " = " . $setVal;
            } else {
                $queryPre = "UPDATE " . $table;
                //need for loop for multiple sets, check for is_array and do multiple if so.
                $querySuff = " SET " . $sets . " = " . $setVal . " WHERE " . $where . " = ?";
            }
            break;
        case "insert":
            if ($sets == null)
            {
                $queryPre = "INSERT INTO " . $table;
                $querySuff = " VALUES(" . setVal . ")";
            } else {
                $queryPre = "INSERT INTO " . $table . " (" . $sets . ")";
                $querySuff = " VALUES(" . setVal . ")";
            }
        case "delete":
            if ($where == null)
            {
                $queryPre = "DELETE FROM " . $table;
                $querySuff = "";
            } else {
                $queryPre = "DELETE FROM " . $table;
                $querySuff = " WHERE " . $where . " = ?";
            }
    }
    //$sql = $queryPre . "" . $querySuff; 
    //var_dump($sql);
    //exit;
    $stmt = $this->mysqli->prepare($queryPre . "" . $querySuff) or die('There was a problem preparing the Query! Error#: '. $this->mysqli->errno); 
    if ($whereVal == null)
    {
        $stmt = $this->bindVars($stmt,$setVal);
    } else {
        $stmt = $this->bindVars($stmt,$whereVal);
    }
    $stmt->execute();
    $meta = $stmt->result_metadata();

    while ($field = $meta->fetch_field())
    {
        $parameters[] = &$row[$field->name];
    }
    call_user_func_array(array($stmt, 'bind_result'), $parameters);

    while ($stmt->fetch()) 
    {
        $x = array();
        foreach($row as $key => $val)
        {
            $x[$key] = $val;
        }
        $results[] = $x;
    }
    $stmt->close();
    //var_dump($results);
    if ($results == "" || $results == NULL)
    {
        return null;
    } else {
        return $results;
    }
}
private function bindVars($stmt,$params) 
{
    if ($params != null) 
    {
        $types = '';
        //initial sting with types
        if (is_array($params))
        {
            foreach($params as $param)
            {
                //for each element, determine type and add
                if(is_int($param))
                {
                    $types .= 'i'; //integer
                } elseif (is_float($param)) 
                {
                    $types .= 'd'; //double
                } elseif (is_string($param))
                {
                    $types .= 's'; //string
                } else {
                    $types .= 'b'; //blob and unknown
                }
            }
        } else {
            if (is_int($params))
            {
                $types = 'i';
            } elseif (is_float($params))
            {
                $types = 'd';
            } elseif (is_string($params))
            {
                $types = 's';
            } else {
                $types = 'b';
            }               
        }
        $bind_names[] = $types;
        if (is_array($params))
        {
            //go through incoming params and added em to array
            for ($i=0; $i<count($params);$i++)
            {
                //give them an arbitrary name
                $bind_name = 'bind' . $i;
                //add the parameter to the variable variable
                $$bind_name = $params[$i];
                //now associate the variable as an element in an array
                $bind_names[] = &$$bind_name;               
            }
        } else {
            $int0 = 0;
            $bind_name = 'bind' . $int0;
            $$bind_name = $params;
            $bind_names[] = &$$bind_name;
        }
        call_user_func_array(array($stmt,'bind_param'),$bind_names);
    }
    return $stmt; //return the bound statement
}
}
?> 
```

调用和检查字段的示例 - process_availability.php：

```
<?php
//require necessary files
require('../config/dbconfig.php');
include('../classes/mysqli.class.php');
//initiate connection
$mysqli = new DATABASE($db_host,$db_user,$db_pass,$db_name);
//take type of check
$checktype = $_POST['type'];

//check the user name
if ($checktype == "username") {
//change post to variable
$username = $_POST['username'];
//check if user name is empty
if ($username == "") {
    $validuser = array("empty", "false");
    echo implode(',', $validuser);
    exit;
}
//if user name is more characters than 30
if (strlen($username) > 30) {
    $validuser = array("max", "false");
    echo implode(',', $validuser);
    exit;
}
//search for same user name in database
$resultsU = $mysqli->select('*','users','username',$username,'regular',null,null,null,null,null);
//var_dump($resultsU);
if (is_array($resultsU))
{
var_dump($resultsU);
    foreach($resultsU as $rowU)
    {
        //return results
        if($rowU['username'] == "" || $rowU['username'] == NULL)
        {
            //user name is blank
            $validuser = array("yes", "true");
            echo implode(',', $validuser);
            exit;
        }
        else {
            //username is not blank, so it's taken
            $validuser = array("no", "false");
            echo implode(',', $validuser);
            exit;
        }
    }
}
} 
```

并且只是为了展示我实际上对这些信息所做的事情，这是 java 的一部分（主要只处理用户名，还有更多的电子邮件，不包括在内）： [fiddle](http://jsfiddle.net/qJVLE/)

而且，粗略地说，指向页面的链接：[页面链接](http://hardcoregamesusa.com/portal/register.php)

我一直在这里修复其他东西，并且在技术上它有效。如果数据库中有与我输入的用户名匹配的内容，我会收到响应，但如果不匹配，由于某种原因它根本没有响应.....

具体来说......在类中倒数第二个函数的底部：

```
$stmt->close(); 
//var_dump($results); 
if ($results == "" || $results == NULL) 
{ 
    return null; 
} else { 
    return $results; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:57:57.740

当您没有向客户端返回任何结果时，您需要向客户端表明这是您所做的，并且上面显示的代码在这种情况下只是不输出任何内容。虽然很容易在客户端正确处理这个空响应，但更好的解决方案是执行以下操作之一：

*   如果您需要结果中的数据，`json_encode()`则在将结果发送回客户端之前。这意味着如果没有结果，您将返回一个空数组，但它仍然是有效的 JSON，而且至关重要的是，您可以使用`result.length`.
*   如果您实际上*不需要*结果数据，而您只需要确定是否有任何结果，则可以简单地返回 1 或 0。这种布尔响应需要最少的带宽和最少的处理，最好的事情是您需要做的就是在客户端将其评估为布尔值 - 即`if (result) { /* do stuff */ }`

# javascript - 如何检测是否在主页上隐藏按钮

> ID：11853648
> 
> 赞同：2
> 
> 时间：2012-08-07T20:29:15.057
> 
> 标签：javascript, html, css, hyperlink

如果我有一个静态 HTML 主页，有没有办法嵌入一些 Javascript 来查看我是否在主页上？我想要做的是如果用户不在主页上，在我的导航栏上显示一个“主页”按钮。因此，一旦我知道他是否在主页上，我就可以使用 if-else 语句。不熟悉如何在 Javascript 中执行此操作。我会在 PHP 中执行此操作，但由于项目限制，我不允许使用 PHP。本站是纯HTML页面。

我需要 Javascript 来检测页面的原因是因为所有页面，包括主页都是相同的模板（再次强调，不是我的决定）。如果不是因为这个，我可以为除主页之外的每个页面创建一个模板。所以这给我留下了问题。

我目前的想法是使用这样的东西：

```
<script type="text/javascript">
var sPath = window.location.pathname;
var sPage = sPath.substring(sPath.lastIndexOf('/') + 1);
if(sPage != "index.html"){
$turnonhomelink=true;
}
else{
$turnonhomelink=false;
}
</script> 
```

然后是链接：

```
<script type="text/javascript">
if ($turnonhomelink==true){
echo '<li><a href="#">Home</a></li>';
}
else{
//echo nada
}
</script> 
```

除了正常的“如果没有打开 Javascript，这将不起作用”之外，还有什么我遗漏的吗？

我最关心的一行是：`if(sPage != "index.html")` 需要注意的是，这个站点只有 1 层深度链接（一个目录中的所有 HTML 页面），但这是在 Javascript 中比较字符串的正确方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T20:37:24.757

我可以建议绝对不需要 javascriptr 来实现这一点。仅使用 css 就有很多方法可以做到这一点。特别是如果您在静态 html 页面上。最简单的方法是在您的身体标签中添加一个 id，以表明您在 hompegae 上。然后添加一些 css 使主页按钮在此页面上时不可见。像这样的东西：

HTML：

```
<body id="homepage">
...
   <li id='home-button'>
      <a href='/index.htm'>Home</a>
   </li>
... 
```

CSS：

```
#homepage #home-button {
  display: none;
} 
```

这样，禁用 js 的访问者可以获得与普通访问者相同的体验......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:36:51.490

这应该没问题。同样在 html 中的哪一点，您是否会进行此检查很重要（对于包含“index.html”的 url）通常您可以创建一个函数 doAfterLoad() 并调用可以检查 url 的 doAfterLoad()子字符串，然后相应地显示/隐藏主页链接。您也可以使用 html body onLoad 事件。

ps：你不需要在 js 中的 var 后面加上 $ 前缀，即使它是一个有效的 var 名称：$turnonhomelink==true

# python - Python Tkinter 删除标题栏

> ID：11853649
> 
> 赞同：1
> 
> 时间：2012-08-07T20:29:18.733
> 
> 标签：python, user-interface, tkinter, title

我正在寻找很长时间的解决方案。我想删除 Tk 窗口的标题栏，就像函数“overridedirect()”一样。我对该功能的问题是，操作系统的任务栏上没有图标。我还尝试使用“root.attributes("-fullscreen", 1)" 并尝试缩小它，但这也不起作用。我希望有人知道一个好的解决方案，谢谢你的帮助！

我的代码现在看起来像这样：

```
from tkinter import *

class Main(Frame):
    def __init__(self, root):
**...**
#There are more classes after this one, but defined the same way

def main():
    root = Tk()
    root.geometry("800x400+0+0")
    root.minsize(700, 400)
    root.title("Title")
    #root.overrideredirect(True)
    #root.iconify()
    ##root.attributes('-topmost', 1)
    ##root.attributes("-fullscreen",  1)
    ##root.wm_state("zoomed")

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:13:37.020

你不能做你想做的事。您可以没有标题栏和图标，也可以有标题栏和图标。没有另一个就没有办法得到一个。

# asp.net - 使用 VS Express 部署服务器

> ID：11853651
> 
> 赞同：0
> 
> 时间：2012-08-07T20:29:24.260
> 
> 标签：asp.net, visual-studio, webserver

我正在尝试部署可以从办公室的另一台计算机上访问的服务器。我只需要一台，两台电脑就可以达到最大值。我正在使用 Visual Studios Express 2012 RC for Web 并制作了整个网站，但我不知道如何实际部署它。当我单击播放进行调试时（在我告诉它构建网站之后）它会在我构建服务器的计算机上显示它，但我无法从另一台计算机上运行它。它在浏览器上给我的地址是 localhost:XXXXX。我知道本地主机意味着计算机 IP，我已经反复尝试过。我难住了。请帮忙。我感谢您提前提供的任何帮助。另外，如果您需要更多信息，请随时询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:36:20.230

您无法从 Visual Studio Express 运行它，您必须将 Web 应用程序部署到 IIS 服务器。如果 VS 没有运行，您将无法访问该站点，因为它会在您启动应用程序时创建一个本地的专用开发服务器，无论是否进行调试。您需要在 Web 服务器上配置 IIS。什么是操作系统？完成教程进行设置后，您会将代码复制到将为您创建的应用程序文件夹中。详细信息因 IIS 版本而异。

> Internet 信息服务 (IIS) - 以前称为 Internet 信息服务器 - 是一个 Web 服务器应用程序和一组功能扩展模块，由 Microsoft 创建，用于 Microsoft Windows。IIS 7.5 支持 HTTP、HTTPS、FTP、FTPS、SMTP 和 NNTP。它是 Windows Server 产品系列以及某些版本的 Windows XP、Windows Vista 和 Windows 7 的组成部分。安装 Windows 时默认情况下不打开 IIS。IIS 管理器可通过 Microsoft 管理控制台或控制面板中的管理工具访问。

[http://en.wikipedia.org/wiki/Internet_Information_Services](http://en.wikipedia.org/wiki/Internet_Information_Services)

[http://www.iis.net/](http://www.iis.net/)

# reporting-services - SSRS 2005 和 SQL Server 2008 R2

> ID：11853655
> 
> 赞同：1
> 
> 时间：2012-08-07T20:29:42.323
> 
> 标签：reporting-services, sql-server-2008-r2, reportingservices-2005

是否可以将 SSRS 2005 与 SQL Server 2008 一起使用？我几乎把它挂了，但一直收到这个错误：“报表服务器安装未初始化。(rsReportServerNotActivated) (rsRPCError)”。在 SSRS 配置管理器中，初始化按钮显示为灰色，但在“服务器状态”窗格中显示“已初始化：是”。

这个问题与这个问题相反：[Reporting services 2008 on Sql Server 2005](https://stackoverflow.com/questions/1287761/reporting-services-2008-on-sql-server-2005)。

# .htaccess - 从 url .htaccess 重写/重定向特定单词

> ID：11853657
> 
> 赞同：4
> 
> 时间：2012-08-07T20:29:52.447
> 
> 标签：.htaccess, url, mod-rewrite, redirect, rewrite

我有几个由 wordpress/php 生成的 url

*   [http://mydomain.com/news-2/newsarticle](http://mydomain.com/news-2/newsarticle)
*   [http://mydomain.com/products/category-2](http://mydomain.com/products/category-2)
*   [http://mydomain.com/products/category/products-2](http://mydomain.com/products/category/products-2)

如何将带有**-2**的任何网址重写/重定向到没有的网址？结果应该是

*   [http://mydomain.com/news/newsarticle](http://mydomain.com/news/newsarticle)
*   [http://mydomain.com/products/category](http://mydomain.com/products/category)
*   [http://mydomain.com/products/category/products](http://mydomain.com/products/category/products)

这是我到目前为止所拥有的

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:32:26.757

将此添加到您的 htaccess ：

```
RewriteRule ^(.*)-2(.*)$ /$1$2 [NC,L,R=301] 
```

# pickle - 上传和下载到 MKS Integrity 时出现不安全的字符串 pickle 错误

> ID：11853662
> 
> 赞同：1
> 
> 时间：2012-08-07T20:30:21.513
> 
> 标签：pickle, mks, mks-integrity

在从 MKS 创建沙箱后尝试运行我的程序时出现异常“ValueError：不安全的字符串pickle”。

如果您仍在阅读本文，希望您仍然有兴趣提供帮助，所以这里是完整的故事。

我用 Python 创建了一个分析数据的应用程序。从我的程序中保存特定数据时，我会腌制文件。我以二进制正确读取和写入它，并且一切都在我的计算机上正常工作。

然后我使用 py2exe 将所有内容包装成一个 .exe。但是，为了让腌制文件继续工作，我必须将它们物理复制到 py2exe 的文件夹中。所以我的泡菜在 .exe 文件夹中，当我运行 .exe 时一切正常。

接下来，我将所有内容上传到 MKS（一个 ALM，这里是 Wikipedia 页面[http://en.wikipedia.org/wiki/MKS_Integrity](http://en.wikipedia.org/wiki/MKS_Integrity)）。

当我继续创建我的文件的沙箱并运行程序时，我得到了可怕的“不安全的字符串pickle”错误。换句话说，我想知道 MKS 是否搞砸了一些东西或在我的泡菜文件中添加了行尾字符。当我将 MKS 泡菜文件的内容与我在将程序上传到 MKS 之前创建的内容进行比较时，没有任何区别。

我希望这足以详细描述我的问题。

请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:13:01.973

您是否尝试将腌制文件作为二进制文件而不是文本添加到 Integrity 沙箱？

添加文件时，在创建存档界面，选择选项按钮，将数据类型从“自动”更改为“二进制”。这将保留文件中的任何非文本格式。

# javascript - 输入值更改时 html() 方法错误

> ID：11853666
> 
> 赞同：13
> 
> 时间：2012-08-07T20:30:44.433
> 
> 标签：javascript, jquery, firefox, webkit

本质上，我有一些代码需要在其任何输入元素模糊时获取父元素的 HTML。这很简单。问题是调用`html()`父元素时返回的 HTML 不反映其中包含的输入元素的当前值。也就是说，在 Firefox 或 Chrome 中。它适用于所有地方的IE。

这是 JSFiddle：http: [//jsfiddle.net/8PJMx/15/](http://jsfiddle.net/8PJMx/15/)

尝试将文本框中的“世界”更改为“所有人”并单击按钮。请注意，我还在附加`$.now()`，以便您可以看到代码实际上正在执行。

如您所见，`$("#parent").html()`即使更新，也不会更新`$("#child").val()`。为了您的观看乐趣，这里是 HTML：

```
<div id="parent">Hello <input type='text' id="child" value='world' /></div>
<button id="separateEvent">Get HTML.</button>
<br>
<p>The HTML for #parent is:</p>
<textarea id="parentsHtml" style="width:95%; height: 100px;"></textarea>
<p>The value of #child is:</p>
<textarea id="childsValue" style="width:95%; height: 100px;"></textarea> 
```

...这是JavaScript：

```
$("#separateEvent").click(function ()
                         {
                             $("#parentsHtml").val($("#parent").html() + "\r\n@" + $.now());
                             $("#childsValue").val($("#child").val() + "\r\n@" + $.now());
                         }); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-07T20:35:19.893

html`value=""`属性不反映`.value`DOM 属性（不直观），但它反映了`.defaultValue`DOM 属性。该`.value`属性未序列化为 HTML，但`.defaultValue`已序列化为 HTML。

用户输入改变`.value`，不是`.defaultValue`。

`.value`只反映`.defaultValue`输入的[脏值标志为假时](https://stackoverflow.com/a/11779426/995876)

这是一个解决方法，其中还包括 SELECT 框的示例：http: [//jsfiddle.net/8PJMx/20/](http://jsfiddle.net/8PJMx/20/)

# string - 如何在至少重复一次的字符串中找到最大的序列？

> ID：11853668
> 
> 赞同：9
> 
> 时间：2012-08-07T20:30:49.020
> 
> 标签：string, algorithm, language-agnostic

试图解决以下问题：

> 给定一个任意长度的字符串，找出在字符串中出现多次且没有重叠的最长子字符串。

例如，如果输入字符串是`ABCABCAB`，那么正确的输出应该是`ABC`。你不能说`ABCAB`，因为这只会在两个子字符串重叠的地方发生两次，这是不允许的。

对于包含几千个字符的字符串，有什么方法可以合理快速地解决这个问题？

（在有人问之前，这不是功课。我正在寻找优化 Lindenmayer 分形渲染的方法，因为它们往往会花费大量时间来使用幼稚的海龟图形系统在高迭代级别进行绘制。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:53:22.163

这是一个长度为 11 的字符串的示例，您可以对其进行概括

*   将块长度设置为 floor(11/2) = 5

*   扫描剩余 5 个字符的字符串以查找重复。会有3个比较

```
    左右
    偏移 偏移
     0 5
     0 6
     1 5

```

*   如果你找到一个重复的，你就完成了。否则将块长度减少到 4 并重复直到块长度变为零。

这是一些（显然未经测试的）伪代码：

```
String s
int len = floor(s.length/2)
for int i=len; i>0; i--
    for j=0; j<=len-(2*i); j++
        for k=j+i; k<=len-i; k++
            if s.substr(j,j+i) == s.substr(k,k+i)
                return s.substr(j,j+i)
return null 
```

那里可能存在一个错误，但该方法应该是合理的（并且是最小的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T20:52:15.103

它看起来像一个后缀树问题。创建后缀树，然后找到具有多个子节点的最大压缩分支（在原始字符串中出现多次）。该压缩分支中的字母数应该是最大子序列的大小。

我在这里找到了类似的东西：http: [//www.coderanch.com/t/370396/java/java/Algorithm-wanted-longest-repeating-substring](http://www.coderanch.com/t/370396/java/java/Algorithm-wanted-longest-repeating-substring)

看起来它可以在 O(n) 中完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:39:56.677

首先，我们需要定义子字符串的开始符号并定义长度。迭代所有可能的起始位置，然后找出长度，对长度进行二进制搜索（如果你能找到长度为 a 的 substr，你可能会发现长度更长，函数看起来很单调，所以 bin 搜索应该没问题）。然后找到相等的子串是 N，使用 KMP 或 Rabin-Karp 任何线性算法都可以。总计 N*N*log(N)。是不是太复杂了？代码类似于：

```
for(int i=0;i<input.length();++i)
    {
        int l = i;
        int r = input.length();
        while(l <= r)
        {
            int middle = l + ((r - l) >> 1);
            Check if string [i;middle] can be found in initial string. Should be done in O(n); You need to check parts of initial string [0,i-1], [middle+1;length()-1];
            if (found)
                l = middle + 1;
            else
                r = middle - 1;
        }
    } 
```

说得通？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T15:00:33.357

This type of analysis is often done in genome sequences. have a look at this paper. it has an efficient implemention (c++) for solving repeats: [http://www.complex-systems.com/pdf/17-4-4.pdf](http://www.complex-systems.com/pdf/17-4-4.pdf) might be what you are looking for

# ios - 用目标实体填充表格视图

> ID：11853674
> 
> 赞同：1
> 
> 时间：2012-08-07T20:31:13.823
> 
> 标签：ios, core-data, entity-relationship

我有一个表格视图，它需要显示来自不同关系的所有不同目标实体。为简单起见，让我们看一个关系，从实体 Operation 到 Goal 的关系，relationshipname: goal (inverse: operationisation)

我想知道如何填充单元格

这就是我所拥有的：

```
- (void)viewWillAppear:(BOOL)animated{
goals = [[NSArray alloc] init];
goals = [[self.operation valueForKeyPath:@"goal.goalNaam"] allObjects]  ;
} 
```

和

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath       *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];
    }
    if(indexPath.section == 2){
        Goal *goal = (Goal*)[goals objectAtIndex:indexPath.row];
        cell.textLabel.text = goal.goalNaam;
    }

    // Configure the cell...

    return cell;
} 
```

我想知道这是这样做的方法。模拟器卡住但没有给出错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:38:06.943

您确定在操作和目标之间使用 1:n 关系吗？我想我没有正确理解你的问题。不应该有一个操作多个目标并且每个目标都有一个属性`goalNaam`吗？如果是这样，那么操作模型将包含一个`Goal`可以轻松检索的关联对象的 NSSet。

干杯，安卡

# uitableview - MonoTouch：刷新 UITableView

> ID：11853679
> 
> 赞同：0
> 
> 时间：2012-08-07T20:31:42.323
> 
> 标签：uitableview, xamarin.ios

非常感谢 Jonathan Peppers 关于如何刷新 tableview 的建议。

* * *

## 更新：这是我的解决方案的链接：[https](https://github.com/Videlia/Veggies.git) ://github.com/Videlia/Veggies.git 。此外，我发现，一旦我在横向视图中添加了 5 个项目，或者在纵向视图中添加了大约 7 或 8 个项目，列表就会重新开始显示顶部项目，而不是继续向下显示列表。但是，如果我选择一行，它会选择*应该*显示的值。

如果我添加或编辑一行（这两者都需要我转到另一个屏幕然后返回到这个屏幕），我的 tableview 现在可以正常工作。由于某种原因，在同一屏幕上执行的删除操作不会重新加载数据。

这是我更新的代码：

**视图控制器**

```
using System;
using System.Drawing;

using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace TableViewTest
{
public partial class vc_ManageVeggies : UIViewController
{
    public vc_ManageVeggies () : base ("vc_ManageVeggies", null)
    {
    }

    public override void DidReceiveMemoryWarning ()
    {
        // Releases the view if it doesn't have a superview.
        base.DidReceiveMemoryWarning ();

        // Release any cached data, images, etc that aren't in use.
    }

    public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();

        // connect table to source.
        VeggieTableSource source = new VeggieTableSource ();

        Console.WriteLine ("\n vc_ManageVeggies.ViewDidLoad: " + Veggies.CountVeggies ().ToString () + " veggies found! :-)");

        if (Veggies.CountVeggies () > 0) {

            this.tblVeggies.Source = source;
        }

        btnNewVeggie.TouchUpInside += delegate {

            Veggies.SelectedVeggie = string.Empty;

            vc_VeggieAddEdit newScreen = new vc_VeggieAddEdit ();
            try {
                this.NavigationController.PushViewController (newScreen, false);
            } catch (Exception ex) {
                Console.WriteLine ("btnNewVeggie error: " + ex.ToString ());
            }
        };

        btnEditVeggie.TouchUpInside += delegate {

            if (Veggies.SelectedVeggie == string.Empty) {
                UIAlertView alert = new UIAlertView ("Oops!", "Please select a veggie to edit.", null, "OK");
                alert.Show ();
            } else {
                vc_VeggieAddEdit newScreen = new vc_VeggieAddEdit ();
                this.NavigationController.PushViewController (newScreen, false);
            }
        };

        btnDeleteVeggie.TouchUpInside += delegate {

            Veggies.DeleteVeggie (Veggies.SelectedVeggie);

            // update VeggieNames list and reload tableview data.
            //Veggies.RefreshVeggieList ();
            Veggies.VeggieNames.Remove (Veggies.SelectedVeggie);
            tblVeggies.ReloadData ();

        };

        btnDone.TouchUpInside += delegate {

            vc_MainMenu newScreen = new vc_MainMenu ();
            NavigationController.PushViewController (newScreen, false);
        };

    }

    public override void ViewDidUnload ()
    {
        base.ViewDidUnload ();

        // Clear any references to subviews of the main view in order to
        // allow the Garbage Collector to collect them sooner.
        //
        // e.g. myOutlet.Dispose (); myOutlet = null;

        ReleaseDesignerOutlets ();
    }

    public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
    {
        // Return true for supported orientations
        return (toInterfaceOrientation != UIInterfaceOrientation.PortraitUpsideDown);
    }

    public void RefreshVeggieTable ()
    {

    }
}
} 
```

**表源** 使用系统；使用 MonoTouch.UIKit；使用 MonoTouch.Foundation；使用 System.Collections.Generic；

```
namespace TableViewTest
{
public class VeggieTableSource: UITableViewSource
{
    //List<string> veggieNames;

    public VeggieTableSource ()
    {
        Veggies.GetVeggieNames ();
    }

            #region implemented abstract members of MonoTouch.UIKit.UITableViewSource
    public override int RowsInSection (UITableView tableview, int section)
    {
        //return veggieNames.Count;
        return Veggies.VeggieNames.Count;
    }

    public override UITableViewCell GetCell (UITableView tableView, NSIndexPath indexPath)
    {
        var cell = tableView.DequeueReusableCell ("cell");

        if (cell == null) {
            cell = new UITableViewCell (UITableViewCellStyle.Default, "cell");

            var text = string.Format ("{0}", Veggies.VeggieNames [indexPath.Row]);
            cell.TextLabel.Text = text;

        }

        return cell;
    }

    public override void RowSelected (UITableView tableView, NSIndexPath indexPath)
    {
        Veggies.SelectedVeggie = Veggies.VeggieNames [indexPath.Row].ToString ();

    }
    #endregion

}
} 
```

**素食类**

```
using System;
using System.Collections.Generic;

using MonoTouch.UIKit;
using MonoTouch.Foundation;

using MyDataLayer;

namespace TableViewTest
{
public static class Veggies
{
    public static List<string> VeggieNames;
    public static string SelectedVeggie;
    public static int NumberOfVeggies;

    public static int CountVeggies ()
    {
        NumberOfVeggies = DataLayer.CountRecords ("tVeggies");
        return NumberOfVeggies;
    }

    public static List<string> GetVeggieNames ()
    {
        //VeggieName ntext, Description ntext, Yummy int
        string sql = "Select VeggieName from tVeggies ORDER BY VeggieName";
        VeggieNames = DataLayer.GetStringList (sql);
        Console.WriteLine ("\n GetVeggieNames: " + VeggieNames.ToString ());
        return VeggieNames;
    }

    public static void CreateVeggie (string veggieName, int yummy, string description)
    {
        // 1\. Declare variables and set initial values
        DataLayer dataLayer = new DataLayer ();
        DataField[] dataFields;

        DataField NameField = new DataField ();
        DataField YummyField = new DataField ();
        DataField DescriptionField = new DataField ();

        string sql = string.Empty;

        // unselect any other players because the new player will also become the selected player.
        MyDataLayer.DataLayer.ExecuteNonQuery (sql);

        //3\. Create data field objects for each field to be created.
        NameField.FieldName = "VeggieName";
        NameField.FieldType = "string";
        NameField.FieldValue = '"' + veggieName + '"';

        YummyField.FieldName = "Yummy";
        YummyField.FieldType = "int";
        YummyField.FieldValue = yummy.ToString ();

        DescriptionField.FieldName = "Description";
        DescriptionField.FieldType = "string";
        DescriptionField.FieldValue = '"' + description + '"';

        dataFields = new DataField[] { NameField, YummyField, DescriptionField };

        // Insert Record into database.
        dataLayer.InsertRecord ("tVeggies", dataFields);

        RefreshVeggieList ();

    }

    public static void DeleteVeggie (string veggieName)
    {

        string sql = "DELETE FROM tVeggies WHERE VeggieName = '" + veggieName + "'";

        try {
            DataLayer.ExecuteNonQuery (sql);

        } catch (Exception ex) {
            Console.WriteLine ("Player.Delete error: " + ex.ToString ());
        }

        RefreshVeggieList ();

    }

    public static void UpdateVeggie (string veggieName, int yummy, string description)
    {
        // create variables and set initial values
        //DataLayer dataLayer = new DataLayer ();
        string sql = "UPDATE tVeggies SET VeggieName = '" + veggieName + "', yummy = " + yummy.ToString () + ", description = '" + description + "' where VeggieName = '" + Veggies.SelectedVeggie + "'";
        //string response = string.Empty; //this will hold a response such as "success" or the error message.

        Console.WriteLine ("Veggie.UpdateVeggie sql statement: " + sql);

        try {
            DataLayer.ExecuteNonQuery (sql);
            Console.WriteLine ("PVeggie.UpdateVeggie: veggie updated successfully.");

        } catch (Exception ex) {
            Console.WriteLine ("Veggie.UpdateVeggie: " + ex.ToString ());
        }

        RefreshVeggieList ();

    }

    // Update list of Veggie names
    // the TableView on the ManageVeggies view controller needs the VeggieList to be updated whenever veggie records are changed.
    //so the tableview will refresh properly.
    public static void RefreshVeggieList ()
    {

        string sql = "Select VeggieName from tVeggies ORDER BY VeggieName";
        VeggieNames = DataLayer.GetStringList (sql);
    }
}
} 
```

数据层

```
using System;
using System.IO;
using Mono.Data.Sqlite;
using System.Data;
using System.Collections.Generic;

using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace MyDataLayer
{

// DataField class is used to create data for each data field in a table to be created, updated, or deleted.
public class DataField
{

    public string FieldName { get; set; }

    public string FieldValue { get; set; }

    public string FieldType { get; set; }
}

public class DataLayer
{   
    //declare variables used by all DataLayer methods; 
    private static string dbFileName = "myFunDatabase.db3";
    //private string dbFileAndPath = string.Empty;
    private static SqliteConnection connection;

    public DataLayer ()
    {
    }

    public static int CountRecords (string tableName)
    {
        int count = 0;
        string sql = "SELECT count(*) FROM " + tableName;
        count = DataLayer.ExecuteScalar_Int16 (sql);
        Console.WriteLine ("\n DataLayer.CountRecords: " + count.ToString () + "records found in the datatable.");

        return count;

    }
    public static void ExecuteNonQuery (string sql)
    {
        SqliteCommand sqlCommand = new SqliteCommand ();

        try {
            // create and open connection
            connection = GetConnection ();

            using (connection) {
                connection.Open ();
                Console.WriteLine ("\n DataLayer.ExecuteNonQuery: connection opened. Connection state is " + connection.State);

                // create and execute command
                sqlCommand.CommandText = sql;
                sqlCommand.Connection = connection;
                sqlCommand.ExecuteNonQuery ();
                connection.Close ();
                Console.WriteLine ("\n DataLayer.ExecuteNonQuery: Connection was closed. Connection state is " + connection.State);

            }
            connection.Close ();

            Console.WriteLine ("DataLayer.ExecuteNonQuery: NonQuery Executed: " + sql);

        } catch (Exception ex) {
            Console.WriteLine ("\n >>> DataLayer.ExecuteNonQuery Exception: " + ex.ToString ());
            Console.WriteLine ("\n >>> SQL statement: " + sql);
        }

    }

    public static Int16 ExecuteScalar_Int16 (string sql)
    {
        int result = 0;
        SqliteCommand sqlCommand = new SqliteCommand ();

        try {
            //connection = new SqliteConnection (string.Format ("Data Source = {0};", dbFileName));
            connection = GetConnection ();
            connection.Open ();

            sqlCommand.CommandText = sql;
            sqlCommand.Connection = connection;
            result = Convert.ToInt16 (sqlCommand.ExecuteScalar ());

            connection.Close ();

        } catch (Exception ex) {
            Console.WriteLine ("\n >>>DataLayer.ExecuteScalar_Int Exception: " + ex.ToString ());
        }

        return Convert.ToInt16 (result);
    }

    public static string ExecuteScalar_String (string sql)
    {
        string result = string.Empty;
        SqliteCommand sqlCommand = new SqliteCommand ();

        try {
            //connection = new SqliteConnection (string.Format ("Data Source = {0};", dbFileName));
            connection = GetConnection ();
            connection.Open ();

            sqlCommand.CommandText = sql;
            sqlCommand.Connection = connection;
            result = Convert.ToString (sqlCommand.ExecuteScalar ());

            connection.Close ();

        } catch (Exception ex) {
            Console.WriteLine ("\n >>>DataLayer.ExecuteScalar_Int Exception: " + ex.ToString ());
        }

        return result;
    }

    public void CreateDatabaseFolder ()
    {

    }

    //public string InsertRecord(string tableName, string variableNames, string variableTypes, string variableValues)
    public string InsertRecord (string tableName, DataField[] dataFields)
    {
        string sql = string.Empty;
        string fieldNameList = string.Empty;
        string fieldValueList = string.Empty;
        string response = string.Empty;
        SqliteCommand sqlCommand = new SqliteCommand ();

        connection = GetConnection ();

        try {

            connection.Open ();

            // Begin transaction for multiple updates (improves efficiency)
            sqlCommand = new SqliteCommand ("BEGIN", connection);
            sqlCommand.ExecuteNonQuery ();

            // begin individual inserts. I will nest this later to accommodate batch updates.l
            sql = "INSERT INTO " + tableName + " (";
            sqlCommand = new SqliteCommand ();
            sqlCommand.Connection = connection; 

            foreach (DataField dataField in dataFields) {
                fieldNameList += dataField.FieldName + ", ";
                fieldValueList += dataField.FieldValue + ", ";
                sqlCommand.Parameters.AddWithValue ("@" + dataField.FieldName, dataField.FieldValue);
            }

            // remove extra commas at the end of the lists, and append to the sql statement
            sql += fieldNameList.Substring (0, fieldNameList.Length - 2);
            sql += ") VALUES (";
            sql += fieldValueList.Substring (0, fieldValueList.Length - 2);
            sql += ")";

            Console.WriteLine (sql); 

            // load and run sql insert statement.
            sqlCommand.CommandText = sql;

            sqlCommand.ExecuteNonQuery ();

            sqlCommand = new SqliteCommand ("END", connection);
            sqlCommand.ExecuteNonQuery ();

            connection.Close ();

            response = "Success";
        } catch (Exception ex) {
            response = ">>> DataLayer.InsertRecord Error: " + ex.ToString ();
        }

        // End batch commmand and close connection to the database.

        Console.WriteLine ("\n DataLayer.InsertRecord Response to be returned: " + response);
        return response;
    }

    public static List<string> GetStringList (string sql)
    {
        SqliteDataReader dataReader;
        SqliteCommand sqlCommand = new SqliteCommand ();
        List<string> values = new List<string> ();

        int i = 0; //used to increment through  records.
        int count = 0; 

        connection = GetConnection ();

        try {

            using (connection) {
                connection.Open ();

                Console.WriteLine ("\n DataLayer.GetStringList: sql statement: " + sql);
                sqlCommand.CommandText = sql;

                sqlCommand.Connection = connection;

                dataReader = sqlCommand.ExecuteReader ();   
                if (dataReader.HasRows) {
                    Console.WriteLine ("\n DataLayer.GetStringList: dataReader has" + " rows. ");
                    while (dataReader.Read ()) {
                        values.Add (dataReader [0].ToString ());
                        Console.WriteLine ("\n DataLayer.GetStringList: value added to list: " + dataReader [0].ToString ());
                        i++;
                    }
                    count = i + 1;
                    Console.WriteLine ("\n DataLayer.GetStringList: dataReader has" + count + " rows. ");

                    Console.WriteLine ("\n DataLayer.GetStringList: successfully populated value string array from data reader");

                    connection.Close ();
                }
            }
        } catch (Exception ex) {
            Console.WriteLine ("\n >>> DataLayer.GetStringList  error: " + ex.ToString ());

        }

        return values;

    }

    public void GetSchema ()
    {

    }

    public static void DeleteDatabase ()
    {
        // Declare variables 
        var path = Environment.GetFolderPath (Environment.SpecialFolder.MyDocuments);
        string db; // full name and path of database file.

        // set initial values;
        path = Path.Combine (path, "..", "Library");
        db = Path.Combine (path, dbFileName);
        bool databaseExists = File.Exists (db);
        Console.WriteLine ("\n DataLayer.GetConnection: Getting ready to create database if it does not exist.");

        if (databaseExists) {
            try {
                File.Delete (db);
                Console.WriteLine ("\n DataLayer.DeleteDatabase: database deleted: " + dbFileName);
            } catch (Exception ex) {
                Console.WriteLine ("\n >>> DataLayer.DeleteDatabase: Unable to delete database: " + dbFileName);
                Console.WriteLine ("\n >>> DataLayer.DeleteDatabase: Cause of error: " + ex.ToString ());

            }

        }

    }

    static SqliteConnection GetConnection ()
    {
        // Declare variables 
        var path = Environment.GetFolderPath (Environment.SpecialFolder.MyDocuments);
        string db; // full name and path of database file.
        var conn = new SqliteConnection ();

        // set initial values;
        path = Path.Combine (path, "..", "Library");
        db = Path.Combine (path, dbFileName);
        bool databaseExists = File.Exists (db);
        Console.WriteLine ("\n DataLayer.GetConnection: Getting ready to create database if it does not exist.");

        if (!databaseExists) {

            CreateDatabase (db);
        }

        conn = new SqliteConnection ("\n Data Source=" + db);
        return conn;

    }

    static void CreateDatabase (string db)
    {
        // Declare variables 

        var conn = new SqliteConnection ();

        // set initial values;
        bool databaseExists = File.Exists (db);
        Console.WriteLine ("\n DataLayer.GetConnection: Getting ready to create database if it does not exist.");

        if (!databaseExists) {
            try {
                SqliteConnection.CreateFile (db);
                Console.WriteLine ("\n DataLayer.GetConnection: Database created successfully.");
            } catch (Exception ex) {
                Console.WriteLine ("\n >>> DataLayer.GetConnection: Error creating database: " + ex.ToString ());
            }

            if (!File.Exists (db)) {

                Console.WriteLine ("\n >>> DataLayer.GetConnection: Database NOT created.");
            }

            conn = new SqliteConnection ("Data Source=" + db);

            var commands = new[] {

                "CREATE TABLE tVeggies (VeggieName ntext, Description ntext, Yummy int)",
                "INSERT INTO tVeggies (VeggieName, Description, Yummy) VALUES ('Carrots', 'An orange root', 0)",
                "INSERT INTO tVeggies (VeggieName, Description, Yummy) VALUES ('Spinach', 'Green leafy veggie', 1)",
                "INSERT INTO tVeggies (VeggieName, Description, Yummy) VALUES ('Onion', 'Round with layers', 1)",

            };

            foreach (var cmd in commands) {

                using (var c = conn.CreateCommand()) {

                    c.CommandText = cmd;
                    //c.CommandType = CommandType.Text; //this code does not work.
                    conn.Open ();
                    c.ExecuteNonQuery ();
                    conn.Close ();
                    Console.WriteLine ("\n DataLayer.GetConnection: command executed: " + cmd.ToString ());
                }
            }
        } 
    }

    public static System.Data.DataTable GetData (string sql)
    {
        // declare variables and set initial values
        SqliteCommand command = new SqliteCommand ();
        System.Data.DataTable dataTable = new System.Data.DataTable ();
        SqliteDataAdapter adapter = new SqliteDataAdapter ();
        System.Data.DataRow iRow;

        //open connection and retrieve desired data.

        try {
            connection = GetConnection ();
            using (connection) {

                Console.WriteLine ("\n DataLayer.GetData: sql statement: " + sql);
                command.CommandText = sql;
                command.Connection = connection;
                adapter = new SqliteDataAdapter (command);

                connection.Open ();
                adapter.Fill (dataTable);

                // check to see if we got some data.
                Console.WriteLine ("\n DataLayer.GetData: retrieved dataTable with " + dataTable.Rows.Count.ToString () + " rows.");
                for (int i = 0; i< dataTable.Rows.Count; i++) {
                    iRow = dataTable.Rows [i];

                }

                Console.WriteLine ("\n DataLayer.GetData: successfully populated data table");

                connection.Close ();
            }

        } catch (Exception ex) {
            Console.WriteLine ("\n >>>   error: " + ex.ToString ());

        }

        return dataTable;

    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:15:13.937

Looking at your code, what is visible on your screen should be directly correlated to your list of `veggieNames`.

So to remove, replace, or add an item:

1.  Perform this operation on the `List<string>`
2.  call `tblVeggies.ReloadData()`

You don't have to create new table source or anything, which is likely what is messing you up. I would recommend creating the table source in `ViewDidLoad`.

If you want to get really fancy, an optimization you can do is call `tblVeggies.ReloadRows` on a specific row, but I would get it working in general first.

# entity-framework - 如何更新实体框架中的子表？

> ID：11853681
> 
> 赞同：0
> 
> 时间：2012-08-07T20:31:52.297
> 
> 标签：entity-framework

我与两个表有一对多的关系，`Parent`有很多`Child`. 我创建了一个父级并向其添加子级。然后我要么创建它（如果它是新的父级）或更新它（如果它已经存在。）当我创建它时，一切正常。但是，如果我更新它，孩子们不会更新。

```
using (var Repo = new ParentRepository(context))
{
   var key = new AnnualFormKey(prnt.Year, prnt.UserId);
   if (Repo.Retrieve(key) == null)
   {
       prnt.CreatedDate = DateTime.Now;
       prnt.CreatedId = 1;
       Repo.Create(prnt);
       Repo.SaveChanges();   //creates parent and children
   }
   else
   {
       prnt.UpdatedDate = DateTime.Now;
       prnt.UpdatedId = 2;
       Repo.Update(prnt);
       Repo.SaveChanges();   //updates parent but not children
   }
} 
```

（注：更新调用`_context.Entry(orginal).CurrentValues.SetValues(entity)`

这是我的上下文问题还是我需要做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:36:08.460

除非您`Repo.Update(prnt)`专门在`Repo.Retrieve`. 它已经被跟踪了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T21:05:20.077

好的，我更深入地查看了这一点，发现实体框架实际上并没有更新复杂的实体（例如，它不会保存子实体）。有很多复杂的解决方法，但我的很简单。我刚刚删除了现有实体并再次创建了它（使用更新的版本）。

# ruby-on-rails - 在rails中对heroku ENV vars执行操作

> ID：11853683
> 
> 赞同：0
> 
> 时间：2012-08-07T20:32:00.097
> 
> 标签：ruby-on-rails, ruby, heroku

我正在尝试针对 heroku ENV var 测试是否相等，但无济于事。

例子：

```
if a['answer']['question_id'] == ENV['HEROKU_VAR']
  # this expression was supposed to be true!
end 
```

我已将表达式的每一侧发送到调试器，它们打印相同的值。

我唯一的假设是 ENV var 是一个不能对其执行操作的对象。

任何人都知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:45:13.910

事实上，即使您将 Heroku var 声明为 int，例如 HEROKU_VAR=12345，当您从应用程序中的任何位置调用它时，它似乎都会返回一个字符串，您需要将其转换回整数。我解决了这个问题如下：

```
if a['answer']['question_id'] == ENV['HEROKU_VAR'].to_i
  # this expression was supposed to be true and it IS!
end 
```

# solr - Solr 搜索 – Tika 从 PDF 中提取的文本不返回突出显示的片段

> ID：11853685
> 
> 赞同：1
> 
> 时间：2012-08-07T20:32:15.443
> 
> 标签：solr, highlighting, apache-tika

我已经成功地在一个集合中索引了 Pdf（使用 Tika）和纯文本（从数据库中获取）。现在我正在尝试实现突出显示。当我查询 Solr 时，我在 url 中放置了以下内容：`http://myhost:8090/solr/ktm/select/?q=BlahBlah&start=0&rows=120&indent=on&hl=true&wt=json`. 一切都好。接收到的输出在“docs”下具有原始（未突出显示的文本）内容，在“highlighting”下具有突出显示的片段。但我注意到 Tika 提取的文档没有“突出显示”片段。那种反应，给我带来了很多麻烦（零长度行）。是否有任何解决方法来解决它？我已经尝试过 copyField（在索引时），但响应为空白**({“highlighting”:{}})**。我真的需要这方面的帮助。

# wordpress - 如何获取子页面并按类别过滤？

> ID：11853689
> 
> 赞同：0
> 
> 时间：2012-08-07T20:32:34.307
> 
> 标签：wordpress

我有一个 wordpress 页面，我使用插件 api 来允许页面类别。我想获取子页面，但我想按类别过滤我得到的那些。我正在使用 get_page_children_as_html() 函数，但这不会让我过滤我的结果。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:46:14.043

插件 API 可能创建了自己的函数来处理类别，因此没有任何东西可以帮助您过滤插件函数，您必须与插件开发人员联系，看看是否可行。

# javascript - 部分 jQuery 代码的奇怪行为

> ID：11853692
> 
> 赞同：0
> 
> 时间：2012-08-07T20:32:48.163
> 
> 标签：javascript, jquery

好的，让我们开始吧。

此代码在控制台中运行良好，可以执行所需的操作。

```
$('#tasks-table input').parent().html($('#tasks-table input').siblings('textarea').val()) 
```

但在这样的调用中，它甚至不会执行。控制台是沉默的。所有其他功能代码都正确执行

```
updateTask.call(this, 131) 
```

有任何想法吗？

**更新**

这

```
$('#tasks-table input').parent().html($('#tasks-table input').siblings('textarea').val()) 
```

是其中的一部分

```
updateTask.call(this, 131) 
```

并在 updateTask 中被忽略，这条指令在控制台上工作得很好，但当它是 updateTask 的一部分时不会

html 是一个 4 行 php 生成的表，其中有一行典型的

```
<tr>
  <td><?php echo $task->id ?></td>
  <td onclick='projects.editTask.call(this, <?php echo $task->id ?>)'><?php echo $task->text ?> </td>
  <td><?php echo $task->status ?></td>
  <td><?php echo $task->controls ?></td>
</tr> 
```

editTask 是一个简单的替换功能（td 的内容变成了 textarea）

```
if(block || !($(this).attr('incomplete'))) return; //only one is allowed
block = true;
if(!$(this).children('textarea').length) {
   $(this).html('<textarea style="width: 100%; height: 110px;">'+$(this).html()+'</textarea><br/><input type="button" value="Сохранить" onclick="projects.updateTask.call(this, '+parseInt(id)+')" />');
} 
```

updateTask 的目标是将 td 中的任何内容替换回 textarea 的内容，并使用 updateTask 的 $.post 内容将更新请求发送回服务器

```
var text = $(this).siblings('textarea').val();
//does not work only here, but works anywhere else
$('#tasks-table input').parent().text($('#tasks-table input').siblings('textarea').val())
$.post('/projects/ajax/', {
   ajax: true,
   command: 'update',
   id: id,
   text: text }
  , function() { 
     block = false; 
  }); 
```

当我以更复杂的方式进行操作时，它会起作用。像这样更简单的方法：

```
$(this).parent().html(text) 
```

也没有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:01:13.297

**编辑：** 重新审视你的问题，看起来我关注的重点可能不是问题所在。我不会删除它，因为它是您发布的代码的有效问题。未查询或修改 textarea 值的问题很可能是因为您在`textarea`DOM 加载后添加了 。您应该能够在您的表上使用[jquery.live()](http://api.jquery.com/live/)事件或在本文末尾使用委托事件。两者都适用于任何当前或未来的 DOM 元素。在执行任何 DOM 操作或基于 ajax 的 HTML 更新时，这些都是救命稻草。这也可以解释为什么您能够在控制台而不是代码中执行操作。

**原始答案：** 我不确定这是否会完全有帮助，但我认为阻止您的代码执行的是：

```
if(block || !($(this).attr('incomplete'))) return; 
```

当您的表格单元格没有该属性时，您实际上是在执行：

```
if( block || !(undefined) ) return; 
```

这将永远是真的，因为`!(undefined)`它是真的。您很可能希望强制使用布尔值：

```
if( block || !!(undefined) ) return; 
```

如果您只期望`undefined`和任何文本值，这很好。修改此条件的更好方法是明确检查您期望的值（我假设您期望为“真”）：

```
if(block || ($(this).attr('incomplete') === "true") ) return; 
```

**建议：**

我会提出的一个建议是，不要内联 onclick 函数，而是使用 HTML5 data-* 属性来存储您的数据并在一个地方执行代码。这有助于将 JavaScript 保存在一个地方，并且不会在整个 HTML 中混合使用它。

例如，您可以`data-id`为每个表格单元格生成一个属性，并将表格行标记为可编辑`data-edit-cell="true"`

```
<table>
<tr data-edit-cell="true">
  <td data-id="1">cell one</td>
  <td data-id="2">cell two</td>
  <td data-id="3">cell three</td>
  <td data-id="4">cell four</td>
</tr>
</table>​ 
```

[然后，第二个建议，而不是将单击事件绑定到每个单元格，您可以使用jquery.delegate()](http://api.jquery.com/delegate/)将事件绑定到行 ，它监视由选择器 ( *td* ) 定义的子项的冒泡事件 ( *click* )：

 *```
var block = false;
$('tr[data-edit-cell=true]').delegate('td', 'click', function() {
    if (block || $(this).attr('incomplete') === "true" ) return; //only one is allowed
    block = true;
    console.log('clicked: ' + $(this).attr('data-id'));
});​ 
```

我在[这里](http://jsfiddle.net/jimschubert/Daur8/1/)创建了一个 jsfiddle，因此您可以查看此代码。*

# unit-testing - Scala 等价于 instanceOf Java 和异常处理

> ID：11853694
> 
> 赞同：2
> 
> 时间：2012-08-07T20:32:54.463
> 
> 标签：unit-testing, scala, junit4

刚开始使用 Scala 进行单元测试，对 Scala 中如何处理异常感到完全困惑。下面是一个 JUnit 测试的示例。

```
class Test {
  @Test
  void someTest {
    try {
      //Something
    } catch(Exception e) {
      Assert.assertTrue(e.getCause() instanceOf IOException);
    }
  }
} 
```

现在我想在 Scala 中做同样的事情，我试过了

```
class Test {
  @Test def someTest {
    try {
      //Something
    } catch {
      case e: Exception => assertTrue(e.getCause().isInstanceOf[IOException])
    }
  }
} 
```

但是我的 IDE 一直在抱怨`Method Apply is not a member of type Any`。我阅读了 Scala 中的异常处理，发现您应该使用模式匹配器，并且[Scala 中没有异常处理](http://www.codecommit.com/blog/scala/scala-for-java-refugees-part-4)。这究竟是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T05:01:15.610

如果您正在测试 scala 代码，我建议使用比 jUnit 更高级的东西，例如[ScalaTest](http://www.scalatest.org)。

```
import java.io.IOException

import org.scalatest._
import org.scalatest.FlatSpec
import org.scalatest.matchers.ShouldMatchers

object SomeCode
{
    def apply() = {
        throw new IOException
    }
}

class SomeTest
  extends FlatSpec
  with ShouldMatchers
{
    "Something" should "throw an IOException, TODO: why ?" in
    {
        intercept[IOException] {
            SomeCode()
        }
    }

    it should "also throw an IOException here" in
    {
        evaluating { SomeCode() } should produce [IOException]
    }
}

nocolor.run( new SomeTest ) 
```

# ios - tableView 未填充数组中的数据

> ID：11853695
> 
> 赞同：0
> 
> 时间：2012-08-07T20:33:07.070
> 
> 标签：ios, json, nsmutablearray, tableview, cell

我是 iOS 开发和 Objective-C 编程的新手，所以请原谅我的“noobiness”。

事情是这样的，我有一个函数可以构建一个从 JSON 对象获取数据的数组。然后我有第二个函数，负责用数组中包含的数据填充 tableView。

问题是，这个数组的内容似乎无法从我的 tableView 函数中访问，即使该数组已添加到我的头文件并在主文件中实现。tableView 仍然是空的...

你知道这是为什么吗？

这是功能，非常感谢您的帮助！

1）数组构建功能：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
[self.responseData appendData:data];

    //Get data
    NSError *myError = nil;
    NSDictionary *res = [NSJSONSerialization JSONObjectWithData:self.responseData options:NSJSONReadingMutableLeaves error:&myError];

    //Extract titles
    NSMutableArray *myResults = [[NSMutableArray alloc] init];
    NSArray *results = [res objectForKey:@"data"];

    for (NSDictionary *result in results) {
        NSString *title = [result objectForKey:@"colors"];
        NSLog(@"colors: %@", colors);
        [myResults addObject:colors];
    }

    self.colorNames = myResults;    
} 
```

2）TableView填充功能：

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
}

//Set cell text
NSString *colorString = [self.colorNames objectAtIndex: [indexPath row]];
NSLog(@"%@",colorString);
cell.textLabel.text = colorString;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:41:41.310

您确定在收到 json 数据后重新加载表视图数据吗？我会在你的方法`[self.tableView reloadData];`结束时建议一个。`connection:didReceiveData:`否则，该方法`tableView:cellForRowAtIndexPath:`只会在您加载视图后调用一次。

干杯，安卡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:56:04.630

我猜你必须实现更多的 UITableViewDataSource 协议。**在调用tableView:cellForRowAtIndexPath:**以用您的数据填充表格之前，您必须至少提供一个方法**tableView:numberOfRowsInSection:返回表格的实际行数。**

 **最好的祝愿

布鲁诺

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T06:07:46.340

row 是 indexPath 的方法吗？我认为应该是 indexPath.row 而不是 [indexPath row]**

# php - 防止站点范围内的双重提交

> ID：11853698
> 
> 赞同：1
> 
> 时间：2012-08-07T20:33:15.223
> 
> 标签：php, twitter, submit, twitter-oauth, fwrite

我很难为这个问题找到一个好的标题，所以我希望这很清楚。我目前正在我的一个网站上使用 TwitterOauth 模块来发布推文。虽然这可行，但我需要限制提交的推文数量；*每小时只有一个*。

注意：我没有使用数据库的选项。这对于这个问题至关重要。

我已将其合并到处理实际发布到 Twitter API 的 PHP 文件中，如下所示：

```
# Save the timestamp, make sure lastSentTweet exists and is writeable
function saveTimestamp(){
    $myFile = "./lastSentTweet.inc";
    $fh = fopen($myFile, 'w');
    $stringData = '<?php function getLastTweetTimestamp() { return '.time().';}';
    fwrite($fh, $stringData);
    fclose($fh);
}

# Include the lastSentTweet time
include('./lastSentTweet.inc');

# Define the delay
define('TWEET_DELAY', 3600);

# Check for the last tweet
if (time() > getLastTweetTimestamp() + TWEET_DELAY) {
    // Posting to Twitter API here
} else {
    die("No.");
} 
```

文件的（初始）内容`lastSentTweet.inc`（chmod 777）：

```
<?php function getLastTweetTimestamp() { return 1344362207;} 
```

问题是，虽然这行得通；它允许意外的双重提交；如果多个用户（并且运行此脚本的站点当前非常繁忙）触发此脚本，则恰好有 2 次提交（或更多，尽管尚未发生）到 Twitter 滑过，而不仅仅是 1。我的第一个想法是打开，写入和关闭文件的（虽然是一分钟）延迟，但我可能是错的。

有谁知道什么允许意外双重提交（以及如何解决这个问题）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:57:02.227

你得到了比赛条件。在进行更改时，您需要对文件实施[锁定](http://php.net/manual/en/function.flock.php)，但您需要将读取（语句）和更新*都*`include`包含在锁内；关键是确保没有其他人（例如另一个 HTTP 请求）正在使用该文件，同时您读取它的当前值，然后使用新的时间戳更新它。

这将是相当无效的。您还有其他选项可能在您的 PHP 安装中可用，这里有一些：

1.  即使没有数据库服务器也可以使用数据库*：*[SQLite](http://bg2.php.net/manual/en/book.sqlite.php)
2.  您可以将时间戳存储在 APC 中，并[`apc_cas()`](http://bg2.php.net/manual/en/function.apc-cas.php)在更新时用于检测上次存储的时间戳是否仍然是最新的。

**更新**

您的锁定工作流程需要是这样的：

1.  获取您存储的时间戳的锁定。如果您正在处理文件，则需要打开文件以进行读取*和*写入，并已调用`flock()`它。`flock()`如果另一个进程锁定了文件，它将挂起，并且只有在获得锁定后才会返回，此时其他尝试锁定文件的进程将挂起。
2.  从已锁定的文件中读取存储的时间戳。
3.  检查自存储的时间戳以来所需的时间是否已过。
    *   *只有*通过了，才发送推文并将当前时间戳保存到文件中；否则您不会触摸存储的时间戳。
4.  释放锁（只需关闭文件就足够了）。

这将确保在您读取和测试时间戳之后但在您存储新时间戳之前没有其他进程会更新时间戳。

# java - 删除函数什么都不做

> ID：11853699
> 
> 赞同：2
> 
> 时间：2012-08-07T20:33:19.597
> 
> 标签：java, binary-search-tree

我正在研究类的二进制搜索树，并且我的大部分代码都正确实现（我认为），尽管如果我尝试删除根节点，什么也不会发生。

有人看到我的代码有问题吗？

```
public class BinarySearchTree {
private Node root;
private int size = 0;

public BinarySearchTree(){
    root = null;
}

public BinarySearchTree create(){
    BinarySearchTree tree = new BinarySearchTree();
    return tree;
}

public int size(){
    return size;
}

public Node getRoot(){
    System.out.println("root: " + root.getData());
    return root;
}

public void insert(String s){
    root = insertHelper(root, s.toLowerCase());
    size++;
}
private Node insertHelper(Node n, String s){
    if(n == null){
        //root is null, make it a new node
        n = new Node(s);
    } else if(s.compareTo(n.getData()) < 0){
        //string is alphabetically less than root
        n.setLeft(insertHelper(n.getLeft(), s));
        n.getLeft().setParent(n);
    } else{
        //string is alphabetically greater than root
        n.setRight(insertHelper(n.getRight(), s));
        n.getRight().setParent(n);
    }
    return n;
}

public void delete(String s){
    deleteHelper(root, s.toLowerCase());
}
private void deleteHelper(Node n, String s){
    if(n == null){
        //nothing to delete
        return;
    }
    //found node to delete
    else if(s.equals(n.getData())){
        System.out.println("DELETED: " + n.getData());
        //check for left subtree
        //if null, replace node-to-be-deleted with
        //right subtree
        if(n.getLeft() == null){
            replace(n, n.getRight());
        } 
        //check for right subtree
        //if null, replace node-to-be-deleted with
        //left subtree
        else if(n.getRight() == null){
            replace(n, n.getLeft());
        } 
        //if it has two subtrees, find minimum value of the
        //right tree and swap the node-to-be-deleted's data with
        //the minimum node's data
        else{
            Node min = n.getRight();
            while(min.getLeft() != null){
                min = min.getLeft();
            }
            //replace with right and reset pointers
            if(min.getParent() != n){
                replace(min, min.getRight());
                min.setRight(n.getRight());
                min.getRight().setParent(min);
            } 
            //replace with left and reset pointers
            else{
                replace(n, min);
                min.setLeft(n.getLeft());
                min.getLeft().setParent(min);
            }
        }
    }
    //if it hasn't been found, recurse left
    else if(s.compareTo(n.getData()) < 0){
        deleteHelper(n.getLeft(), s);
    } 
    //then, recurse right
    else{
        deleteHelper(n.getRight(), s);
    }
}
private void replace(Node x, Node y){
    //if x is the root, set root to y
    if(x.getParent() == null){
        root = y;
    } 
    //if x is a left child, set it's parent's left child to y
    else if(x == x.getParent().getLeft()){
        x.getParent().setLeft(y);
    } 
    //if x is a right child, set it's parent's right child to y
    else{
        x.getParent().setRight(y);
    }
    //if y is not null, set y's parent to be x's parent
    if(y != null){
        y.setParent(x.getParent());
    }
}

public void destroy(){
    //wipe out the tree
    root = null;
    size = 0;
}

public boolean find(String s){
    return findHelper(root, s.toLowerCase());
}
public boolean findHelper(Node n, String s){
    if(n == null){
        System.out.println("Sorry, " + s + " is not in here.");
        return false;
    }  
    if(s.equals(n.getData())){
        System.out.println(s + " is in the tree.");
        return true;
    } else if(s.compareTo(n.getData()) < 0){
        return findHelper(n.getLeft(), s);
    } else{
        return findHelper(n.getRight(), s);
    }
}
}

public class SearchDriver {

/**
 * @param args
 */
public static void main(String[] args) {
    SearchDriver me = new SearchDriver();
    me.doIt();
}

public void doIt(){
    BinarySearchTree tree = new BinarySearchTree();

    tree.insert("marry");
    tree.insert("alpha");
    tree.insert("gamma");
    tree.insert("delta");
    tree.insert("epsilon");
    tree.insert("zeta");
    tree.insert("eta");
    tree.insert("theta");
    tree.insert("iota");
    tree.insert("kappa");
    tree.insert("lambda");
    tree.insert("beta");
    tree.insert("nu");
    tree.insert("xi");
    tree.insert("omicron");
    tree.insert("pi");
    tree.insert("rho");
    tree.insert("sigma");
    tree.insert("tau");
    tree.insert("upsilon");
    tree.insert("phi");
    tree.insert("chi");
    tree.insert("psi");
    tree.insert("omega");
    tree.printInOrder();

    tree.delete("psi");
    tree.printInOrder();

    tree.delete("marry");

    tree.printInOrder();
    tree.printPostOrder();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:39:34.580

让我来帮助你：

*   [在IDE](http://www.jetbrains.com/idea/)中构建程序
*   在 main 方法的开头设置断点
*   [在调试器](http://www.jetbrains.com/idea/features/compiler.html)中启动您的程序
*   在删除 root 的情况下逐步执行代码

如果您无法使用上面给出的建议解决此问题，请在此问题中评论您所坚持的具体内容。 **如果您现在不花时间学习这些技能，它将在您的编程职业中永远困扰您**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:41:05.780

问题在于：

```
if (min.getParent() != n) {
      replace(min, min.getRight());
      min.setRight(n.getRight());
      min.getRight().setParent(min);
} 
```

这永远不会用 min 替换 n ，因此永远不会将 root 设置为其新值。

# c++ - C++ 对象实例化与赋值

> ID：11853700
> 
> 赞同：12
> 
> 时间：2012-08-07T20:33:24.437
> 
> 标签：c++, constructor, default-constructor, copy-assignment

这有什么区别：

```
TestClass t; 
```

和这个：

```
TestClass t = TestClass(); 
```

我预计第二个可能会调用构造函数两次，然后是 operator=，但它却只调用了一次构造函数，就像第一个一样。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-07T20:38:35.623

```
TestClass t; 
```

调用默认构造函数。

```
TestClass t = TestClass(); 
```

是**拷贝初始化**。它将调用默认构造函数`TestClass()`，然后调用复制构造函数（理论上，复制受*复制省略*的影响）。**这里没有分配**。

还有**直接初始化**的概念：

```
TestClass t(TestClass()); 
```

如果要使用赋值运算符：

```
TestClass t;
TestClass s;
t = s; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T20:41:57.980

第一种情况非常简单——使用默认构造函数构造一个实例。

第二个类是构造一个匿名对象，然后调用复制构造函数。请注意，这里的`=`is 不是赋值，它类似于（但不[相同](https://stackoverflow.com/questions/11222076/why-is-copy-constructor-called-instead-of-conversion-constructor)）写作：

```
TestClass t(TestClass()); 
```

我们可以通过使其不可用来验证这需要复制构造函数可用，例如：

```
#include <iostream>

struct TestClass {
  TestClass() { std::cout << "Ctor" << std::endl; }
  TestClass(const TestClass&)  = delete;
};

int main() {
  TestClass t = TestClass();
} 
```

由于已删除的复制构造函数而无法编译。（在 C++03 中，您可以`private:`改用）。

但实际上最有可能发生的是您的编译器正在执行[Return value optimization](http://en.wikipedia.org/wiki/Return_value_optimization)，从而允许它完全省略对复制构造函数的调用，*前提*是存在合适的构造函数并且可以访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T20:42:15.017

在第一个中，您正在**隐式**调用默认构造函数。在第二个中，您**明确地**调用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T20:36:45.443

后者*可以*调用复制构造函数，因此需要一个是公共的。

编辑：我当然从您使用的类型名称中得出了太大的结论。上面的句子只适用于类类型（即不是 POD）。对于 POD 类型，前者使变量未初始化，而后者使用所谓的“默认”值对其进行初始化。

# jsf - pe:inputNumber 四舍五入

> ID：11853704
> 
> 赞同：0
> 
> 时间：2012-08-07T20:33:43.017
> 
> 标签：jsf, jsf-2, primefaces, primefaces-extensions

我对有关舍入数字的 primefaces 扩展有疑问

来自数据库的值为 1.24569833，但在屏幕上打印为 1.240000。但我希望该数字打印为 1.245700。不久，我想将来自数据库的数字四舍五入。

```
 <pe:inputNumber
                disabled="#{expenseBean.renderMode.currencyRateInputDisabled()}"
                decimalPlaces="6" 
                rendered="#{!expenseBean.renderMode.kdvPanelRendered()}"
                id="defaultCurrencyRate"
                value="#{expenseBean.expense.selectedExpenseSpending.spendingCurrencyRate}"> 
```

我听说了 inputNumber 的 roundMethod 属性，但这并没有解决我的问题。你能帮助我吗？

**编辑：** InputNumber 已被提升为核心 PrimeFaces 并且不再在 Extensions 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:15:23.103

我发现了我的错误。问题是primefaces扩展的版本。旧版本是 0.4 ，更新到 0.5.1 后，primefaces 3.3.1 或更高版本的 roundMethod 正在工作。

# sql-server - DateTime2 作为表值函数中的输入参数数据类型

> ID：11853709
> 
> 赞同：0
> 
> 时间：2012-08-07T20:34:01.287
> 
> 标签：sql-server, sqlclr

我有以下表值函数：

```
[Microsoft.SqlServer.Server.SqlFunction(SystemDataAccess = SystemDataAccessKind.Read,
                          FillRowMethodName ="XXX",  TableDefinition = "time DateTime2"]  

public static IEnumerable ValueAtTime(string somestring, DateTime inputTime)
{
...
} 
```

正如您在表定义中看到的那样，我可以将其定义`DateTime2`为列数据类型。我也想对输入参数“InputTime”做同样的事情，但由于这个参数是 .NET 类型，我做不到。有没有办法做到这一点，以便`DateTime2`将 SQL 定义作为输入参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:49:36.303

为什么不？以下是工作代码的摘录。与 SQL Server 2008 一起工作得很好。

```
[SqlFunction(
    FillRowMethodName = "FillRow",
    DataAccess = DataAccessKind.None,
    IsDeterministic = true,
    IsPrecise = true)]
public static IEnumerable ParsePacket(
    byte[] packet)
{ ... }

public static void FillRow(
    object rowdata,
    out DateTime? time,
    out short peer,
    out int addr,
    out byte quality,
    out bool? state,
    out float? value)
{ ... } 
```

和

```
CREATE FUNCTION [split_packet] (@data [varbinary](300))
RETURNS  TABLE (
    [time] [datetimems] NULL,
    [peer] [smallint] NULL,
    [n] [int] NULL,
    [quality] [tinyint] NULL,
    [state] [bit] NULL,
    [value] [real] NULL
)
AS 
EXTERNAL NAME [Iec104Parser].[UDF].[ParsePacket] 
```

2005年不太好...... :-(

虽然这是输出，但我不明白为什么输入可能存在问题（[微软](http://msdn.microsoft.com/en-us/library/ms131092.aspx)似乎对此没有区别）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T00:11:59.660

实际上，.NET`DateTime`类型*是*用于来回传递`DATETIME2`值的正确类型。而且，由于它是 .NET 类型而不是其中一种`SqlTypes`类型（它们都具有`.IsNull`属性），因此如果您需要允许`NULL`s，请使用`DateTime?`.

为了帮助澄清，听起来好像假设 SQL Server 的数据类型在 .NET`DATETIME`中具有等效`DateTime`类型，因此 SQL Server 的`DATETIME2`数据类型也应该具有 .NET 等效类型，尤其是在`DATETIME2`具有更大范围和精度的情况下。不要被这两个环境名称`DATETIME`和之间的相似性所迷惑。`DateTime`SQL Server 的`DATETIME`范围和精度低于 .NET `DateTime`，`DATETIME2`但范围和精度相同：

```
Type         Environment    Min Date      Max Date      Precision
----         -----------    ----------    ----------    ---------
DATETIME     SQL Server     1753-01-01    9999-12-31    .000, .003, and .007 seconds
DATETIME2    SQL Server     0001-01-01    9999-12-31    .0000001 seconds
DateTime     .NET           0001-01-01    9999-12-31    .0000001 seconds 
```

欲了解更多信息，请参阅：

*   [约会时间](https://msdn.microsoft.com/en-us/library/ms187819.aspx)
*   [日期时间2](https://msdn.microsoft.com/en-us/library/bb677335.aspx)
*   [约会时间](https://msdn.microsoft.com/en-us/library/System.DateTime.aspx)
*   [SQLCLR 第 5 级的阶梯：开发（在 SQL Server 中使用 .NET）](http://www.sqlservercentral.com/articles/Stairway+Series/119429/)（我为 SQLCLR 系列撰写的一篇文章；需要免费注册）

* * *

还：

*   不过，我建议不要将输出字段命名为“时间”，因为它是一个 SQL Server 保留字，而且有点误导（因为`TIME`SQL Server 中也有一个数据类型）。
*   您应该使用`SqlString`而不是`string`其他输入参数。

# objective-c - 实例变量和 GCD 线程

> ID：11853712
> 
> 赞同：0
> 
> 时间：2012-08-07T20:34:21.673
> 
> 标签：objective-c, multithreading, ios5, grand-central-dispatch

我最近向应用程序添加了线程，这样网络请求就不会阻塞 UI。这样做时，我发现我不能再像实现线程之前那样设置我的实例变量。我的实例变量是一个声明如下的属性：

```
@property (nonatomic, strong) NSMutableArray *currentTopPlaces; 
```

以下是我错误设置实例变量 self.currentTopPlaces 的方法：

```
dispatch_queue_t downloadQueue = dispatch_queue_create("Flickr Top Places Downloader", NULL);
dispatch_async(downloadQueue, ^{
    __block NSArray *topPlaces = [FlickrFetcher topPlaces];
    dispatch_async(dispatch_get_main_queue(), ^{
        self.tableRowCount = [topPlaces count];
        [[self currentTopPlaces] setArray:topPlaces];
    }); 
```

在我开始使用 GCD 之前，使用 [self currentTopPlace] setArray:topPlaces] 在阻塞版本中运行良好。

现在，我必须像这样设置它才能正常工作：

```
dispatch_queue_t downloadQueue = dispatch_queue_create("Flickr Top Places Downloader", NULL);
dispatch_async(downloadQueue, ^{
    __block NSArray *topPlaces = [FlickrFetcher topPlaces];
    dispatch_async(dispatch_get_main_queue(), ^{
        self.tableRowCount = [topPlaces count];
        self.currentTopPlaces = topPlaces;
    }); 
```

有人可以向我解释使用之间的区别：

```
[[self currentTopPlaces] setArray:topPlaces]; 
```

和：

```
self.currentTopPlaces = topPlaces; 
```

具体来说，为什么“setArray”调用在线程块中不起作用？

我认为 Objective-C 中的点符号是语法糖而不是强制性的。我想知道实现相同行为的“非糖”方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T21:10:17.723

`[self currentTopPlaces]`并且`self.currentTopPlaces`实际上是相同的，但是

```
[self.currentTopPlaces setArray:topPlaces]; // (1)
self.currentTopPlaces = topPlaces; // (2) 
```

不是。(1) 将 的所有元素替换为 的`self.currentTopPlaces`元素`topPlaces`。(2) 分配一个新值`self.currentTopPlaces`（如果它不是*nil*则释放旧值）。

如果 `self.currentTopPlaces`is *nil*会发生差异：（1）什么都不做，因为该`setArray:`方法被发送到*nil*。(2) 为 赋一个新值`self.currentTopPlaces`。

Btw: The `__block` modifier is not necessary in your code, because the block will not change the value of `topPlaces`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T21:01:32.480

```
[[self currentTopPlaces] setArray:topPlaces];
self.currentTopPlaces = topPlaces; 
```

这是两种完全不同的表达方式。第一个是书面的，第二个是：

```
[self setCurrentTopPlaces:topPlaces]; 
```

如果你想用点表示法做第一个，那就是：

```
self.currentTopPlaces.array = topPlaces; 
```

# jquery - 格式化 bxSlider 图像滑块

> ID：11853713
> 
> 赞同：1
> 
> 时间：2012-08-07T20:34:26.993
> 
> 标签：jquery, css, formatting, bxslider

我正在努力解决如何格式化 bxSlider 图像滑块（[http://www.bxslider.com/](http://www.bxslider.com/)）。

我正在尝试复制此示例中的图像滑块：http: [//bxslider.com/examples/display-move-multiple-slides-once-example-one](http://bxslider.com/examples/display-move-multiple-slides-once-example-one)

当我按照 bxSlider 网站上的说明进行操作时，我得到的结果中没有任何格式。我想我需要创建一个指向包含的 CSS 文件的链接（不知道为什么这不是他们说明的一部分），这给了我“上一个”和“下一个”按钮图标，但滑块非常长，每个图像之间有 700 像素的边距，并且超过了浏览器窗口的宽度。

似乎 JQuery 的一部分是在它遇到的 div、ul 和 li 上附加宽度很长的内联样式。

我找到了这个，但是问题没有答案：[bxslider style configuration](https://stackoverflow.com/questions/11318247/bxslider-style-configuration)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:26:31.350

链接此 bxslider 样式和图像。

[https://github.com/wandoledzep/bxslider/tree/master/bx_styles](https://github.com/wandoledzep/bxslider/tree/master/bx_styles)

# salesforce - 带有重定向的条件渲染

> ID：11853716
> 
> 赞同：0
> 
> 时间：2012-08-07T20:34:35.443
> 
> 标签：salesforce, apex-code, visualforce

这是设置。我有一个带有自定义按钮的标准页面布局。

当用户单击按钮时，我想检查扩展类中的值。如果值为 null 或 0 - 我希望显示页面消息，否则我想将它们重定向到另一个**VF**页面。

我**尝试**这样做的方法是在页面布局上放置一个 VF 部分，并使用 action:support 方法有条件地呈现它，但我无法让它工作..

停！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:30:56.177

You do not need to add a VF page to the layout.
Try to use the Salesforce AJAX Toolkit for your custom button:

1) First create a WebService to calculate your value:

```
global with sharing class yourController{
    WebService static Integer calculateValue(Integer i) { 
        Integer result = i + 5;
        return result; 
    }
} 
```

2) Then create a custom button for your object:
Display Type - *Detail Page Button*
Behavior - *Execute JavaScript*
Content Source - *onClick JavaScript*

3) Then add this code to the button:

```
// Loading the ajax toolkit data
{!REQUIRESCRIPT("/soap/ajax/20.0/connection.js")}
{!REQUIRESCRIPT("/soap/ajax/10.0/apex.js")}

// Making a call to the webservice method
var value = sforce.apex.execute("yourController","calculateValue", {i:5});

// If the value is 0 or blank            
if(value == 0 || value == ''){
    // Pop up a message
    alert('Your message text here');
else{
    // Otherwise redirecting user to another page
    window.location = "/apex/YourCustomPage";
} 
```

4) Now save your button and do not forget to add it to the layout page :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:51:13.213

如果从按钮调用的方法返回一个`PageReference`，您可以创建一个`PageReference`对象并使用该`.setRedirect( True)`方法进行重定向。您现在可能正在返回`Null`，这表明“没有行动”。

您可以在创建时设置重定向目标`PageReference`，或使用该`new ApexPages.StandardController()`方法为给定对象类型选择一个控制器，或仅`Page.vfPageName`引用另一个 Visualforce 页面。

当您的方法返回时`PageReference`，浏览器将重定向到新的 URL。

# jquery - JQUERY：如何通过 VAR 更改按钮上的文本

> ID：11853720
> 
> 赞同：1
> 
> 时间：2012-08-07T20:34:48.320
> 
> 标签：jquery, button, dynamic, text

关于这个主题：更改按钮文本 jquery mobile

```
http://stackoverflow.com/questions/4009524/change-button-text-jquery-mobile/11851231#11851231 
```

尼克·克拉弗写道：

```
<a data-role="button" href="#" onclick="Podcast.consumed(); return false" id="consumed">
  <span class="ui-btn-inner ui-btn-corner-all">
    <span class="ui-btn-text">Mark Old</span>
  </span>
</a>​ 
```

和

```
$("#consumed .ui-btn-text").text("Mark New"); 
```

在尼克的解决方案中，文本 Mark New 是固定的。那么，新文本不是来自变量，而不是固定文本“Mark New”？例如 var newtext = "hello world"

那么代码会是什么样子以使文本真正可变？这意味着任何动态文本都可以放在按钮上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:37:46.793

像这样：

```
var newtext = 'something';
$("#consumed .ui-btn-text").text(newtext); 
```

# xcode - 有没有办法跳转到 Xcode (4.4) 中的插座/操作代码？

> ID：11853722
> 
> 赞同：5
> 
> 时间：2012-08-07T20:35:03.377
> 
> 标签：xcode, interface, action, builder, outlet

我一直在查看其他人设置的.xib，如果我可以双击与插座/操作关联的属性/方法以跳转到声明它们的实际代码，那将非常方便/定义。我已经尝试了我能想到的一切，但到目前为止无济于事。我是对的，没有办法做到这一点......？

为了说明，假设我有一个 UIButton 用于“重置”。当我在 Interface Builder（这是 Xcode 4.4）中右键单击它时，我可能会看到有一个名为“resetButton”的关联插座和一个映射到“onReset”的操作。据我所知，找到相关代码的唯一方法是将这些属性/方法名称手动输入到搜索框中，然后在相关的 .h / .m 中查找（例如，使用 Project Navigator 搜索）。在某些情况下，我会在不同的文件中多次使用相同的名称，然后必须弄清楚哪个是我真正感兴趣的对象。

是否有一些技巧可以用来跳转到我没有看到的代码？

预计到达时间

# c# - 98% 的 CPU 使用率 - 简单的 C# 服务

> ID：11853723
> 
> 赞同：0
> 
> 时间：2012-08-07T20:35:17.540
> 
> 标签：c#, service, ftp

我用 C# 编写了一个简单的应用程序。它通过 ftp 下载日志文件，检查 Firefox 是否在 PC 上运行，更改日志字符串，将日志上传回服务器。

我使用计时器每 10 秒运行一次。

服务启动时，其内存使用量为 10Mb，CPU 使用率 <1%。大约两分钟后，它的内存使用量约为 12Mb，但 CPU 使用率跃升至 90% 以上！

这是我的应用每 10 秒执行的操作：1) 通过 ftp 下载日志并存储在*字符串 log*中。2）查看PC上运行的进程列表，如果有firefox.exe进程，适当更改日志字符串以指示firefox正在运行。3）将日志字符串保存为txt文件，读取文件通过ftp将id发送回服务器。

我怀疑将几行文本保存/读取到硬盘驱动器需要如此多的 CPU 能力。

对可能发生的事情有任何猜测吗？谢谢！！

编辑：这是我的全班

```
class Program : System.ServiceProcess.ServiceBase
{
    private static System.Timers.Timer timer;

    static string myIP = "";

    static void start()
    {
        string strHostName = Dns.GetHostName();
        IPHostEntry ipEntry = Dns.GetHostEntry(strHostName);
        IPAddress[] addr = ipEntry.AddressList;

        int i = 0;
        foreach (IPAddress address in addr)
        {
            if (("" + addr[i].AddressFamily).Equals("InterNetwork"))
                myIP = "" + addr[i];
            i++;
        }

        timer = new System.Timers.Timer();
        timer.Elapsed += new ElapsedEventHandler(firefoxChecker); // Everytime timer ticks, timer_Tick will be called
        timer.Interval = (1000) * (5);             
        timer.Enabled = true;                       // Enable the timer
        timer.Start();
    }

    protected override void OnStart(string[] args)
    {
        start();
    }

    public static void Main()
    {
        System.ServiceProcess.ServiceBase.Run(new Program());
    }

    static string downloadLog()
    {
        FtpWebRequest reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp://server/log.txt"));

        // Provide the WebPermission Credintials
        reqFTP.Credentials = new NetworkCredential("username", "password");
        reqFTP.Proxy = null;
        reqFTP.Method = WebRequestMethods.Ftp.DownloadFile;

        FtpWebResponse response = (FtpWebResponse)reqFTP.GetResponse();

        Stream responseStream = response.GetResponseStream();
        StreamReader reader = new StreamReader(responseStream);
        string log = reader.ReadToEnd();
        reader.Close();
        reader.Dispose();
        return log;
    }

    static void sendLogThroughFTP(string log)
    {
        FtpWebRequest reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp://server/log.txt"));

        reqFTP.Credentials = new NetworkCredential("username", "password");
        reqFTP.Proxy = null;
        reqFTP.Method = WebRequestMethods.Ftp.UploadFile;
        StreamWriter wr = new StreamWriter(@"C:\logs\temp.txt");
        wr.Write(log);
        wr.Close();

        StreamReader sourceStream = new StreamReader(@"C:\logs\temp.txt");
        byte[] fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
        sourceStream.Close();
        reqFTP.ContentLength = fileContents.Length;
        Stream requestStream = reqFTP.GetRequestStream();
        requestStream.Write(fileContents, 0, fileContents.Length);
        requestStream.Close();
        sourceStream.Dispose();
    }

    static void firefoxChecker(object sender, EventArgs e)
    {

        string firefoxOwner = "----------";
        TerminalServicesManager manager = new TerminalServicesManager();
        ITerminalServer server = null;

        string log = downloadLog();

        bool diceFirefoxRunning = false;
        bool monsterFirefoxRunning = false;
        bool careerbuilderFirefoxRunning = false;

        try
        {
            server = manager.GetLocalServer();
            server.Open();
            foreach (ITerminalServicesSession session in server.GetSessions())
            {
                if (session.ConnectionState == ConnectionState.Active)
                {
                    firefoxOwner = session.UserAccount.ToString();
                    string ip = session.ClientIPAddress.ToString();

                    string user = session.UserAccount.ToString();

                    System.Collections.Generic.IList<Cassia.ITerminalServicesProcess> list = session.GetProcesses();
                    foreach (ITerminalServicesProcess process in list)
                    {
                        if (Equals(process.ProcessName, "firefox.exe"))
                        {
                            // change firefoxOwner string appropriately
                            log = updateLog(log, user, firefoxOwner);
                        }
                    }
                }
            }
            server.Close();
            sendLogThroughFTP(log);
        }
        catch
        {
            // do nothing
        }
    }

    static string updateLog(string log, string username, string ffOwner)
    {
                // make some changes to log string
                return log;
    }
} 
```

}

感谢所有输入！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:38:34.163

开始工作时禁用计时器，完成后重新启用它。

您正在通过 FTP 下载和上传，这可能需要超过您为计时器设置的 5 秒。如果您在开始之前禁用计时器并在结束时重新启用它，您将在最后一次上传完成后 5 秒进行轮询。

您可能还需要考虑将投票时间延长到更合理的时间。您真的需要每 5 秒轮询一次以确保 Firefox 仍在运行吗？

# python - DatabaseError：用作表达式的子查询返回的不止一行（Django）

> ID：11853725
> 
> 赞同：1
> 
> 时间：2012-08-07T20:35:23.020
> 
> 标签：python, sql, database, django, django-models

`DatabaseError`当我尝试使用合并的查询集时，Django 通过了一个。我的代码是

```
assetsNetwork = Asset.objects.filter(client=myClient, module__label__in=network_label_list)
vulnsNetworkRaw = Vuln.objects.none()
for asset in assetsNetwork:
    vulnsNetworkRaw = vulnsNetworkRaw | asset.latest_vulns
    logging.debug("+++%s+++"%vulnsNetworkRaw) 
```

错误信息是

```
DatabaseError: more than one row returned by a subquery used as an expression 
```

.latest_vulns 方法是

```
@property
def latest_scan(self):
    from arachni.models import WebScan, Vulns as WebVuln
    my_module = self.module

    try:
        return Scan.objects.filter(assets__id=self.id, status='Audit Complete').latest('completed_Date')
    except:
        return Scan.objects.none()
@property
def latest_vulns(self):
    from arachni.models import WebScan, Vulns as WebVuln
    latest_scan = self.latest_scan
    return Vuln.objects.filter(scan=latest_scan, host=self.IP_Address) 
```

询问：

```
2012-08-07 16:44:38 EDT STATEMENT:  SELECT "pegasus_vuln"."id", "pegasus_vuln"."nvt_id", "pegasus_vuln"."scan_id", "pegasus_vuln"."host", "pegasus_vuln"."port", "pegasus_vuln"."risk_factor", "pegasus_vuln"."cvss_score", "pegasus_vuln"."status", "pegasus_vuln"."change", "pegasus_vuln"."comment", "pegasus_vuln"."description", "pegasus_vuln"."solution", "pegasus_vuln"."_order" FROM "pegasus_vuln" WHERE (("pegasus_vuln"."host" = '192.168.2.251'  AND "pegasus_vuln"."scan_id" = 95 ) OR ("pegasus_vuln"."host" = '192.168.2.5'  AND "pegasus_vuln"."scan_id" =  (SELECT U0."id" FROM "pegasus_scan" U0)) OR ("pegasus_vuln"."host" = '10.1.10.244'  AND "pegasus_vuln"."scan_id" = 109 ) OR ("pegasus_vuln"."host" = '192.168.2.5'  AND "pegasus_vuln"."scan_id" =  (SELECT U0."id" FROM "pegasus_scan" U0)) OR ("pegasus_vuln"."host" = '192.168.2.248'  AND "pegasus_vuln"."scan_id" =  (SELECT U0."id" FROM "pegasus_scan" U0))) ORDER BY "pegasus_vuln"."_order" ASC LIMIT 21
2012-08-07 16:44:38 EDT ERROR:  more than one row returned by a subquery used as an expression 
```

它成功记录了几次，但也在记录行中给出了错误。有人可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:58:20.470

在你的 SQL 中检查这样的代码。如果可以从嵌套 SQL 中获取多个结果，则需要使用 IN 运算符。

```
"pegasus_vuln"."scan_id" =  (SELECT U0."id" FROM "pegasus_scan" U0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:50:44.747

问题已经奇怪地解决了。我添加了登录`latest_vulns`以评估查询集，然后一切正常。即使在我删除了日志记录后它仍然有效。

# javascript - Javascript继承和丢失'this'的上下文

> ID：11853727
> 
> 赞同：3
> 
> 时间：2012-08-07T20:35:26.867
> 
> 标签：javascript, class, inheritance, this

我正在使用 John Resig 的 Simple JavaScript Inheritance 并且遇到了一个问题，我丢失了“this”所指的内容。使用此代码：

```
var Runner = Class.extend({ 
 init: function() {
  this.update();
  if(!this.interval) {
   this.interval = setInterval(this.update, this.period * 1000);
  }
 },
 stop: function() {
  clearInterval(this.interval);
 },
 update: function() {
  this.success()
 },
 success: function(){
 }
});

var SubRunner = Runner.extend({
 update: function() {
  this._super();
 },
 success: function(){
  alert('sub runner success');
 }
}); 
```

运行`p = new SubRunner()`按我的预期运行，并`sub runner success`在第一时间发出警报。第一次运行后，尝试在错误的“this”（窗口）上运行成功函数。

我知道 Prototype 为您提供了一个绑定函数，以便您可以将上下文传递给该函数，但我在这里做类似的事情没有任何运气。有没有人有一个起点来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:37:00.727

问题是当您将 this.update 传递给 setInterval 函数时。在 Javascript 中，“this”取决于您是否使用点表示法调用函数，如果您将它们作为回调传递或将它们存储在变量中，函数将不会记住它们的来源。

您可以添加一个包装函数

```
var that = this;
setTimeout(function(){ that.update() }, this.perios*1000) 
```

或者您可以使用 bind 方法（如果它在您的浏览器中可用）（或者您可以使用 Prototype 中的类似功能）。

```
setTimeout(this.update.bind(this), this.period*1000) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:39:56.053

当您将 this.update 传递给 setInterval 时，您会丢失上下文。最简单的解决方案是

```
var that = this;
this.interval = setInterval(function() { that.update() }, this.period * 1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:40:05.393

```
this.interval = setInterval(this.update, this.period * 1000); 
```

当`setTimeout`调用一个函数时，它会在全局范围内调用它（它设置`this`为`window`）。

您需要传递一个调用`this.update`.

```
var self = this;
this.interval = setInterval(function(){
    self.update();
}, this.period * 1000); 
```

# php - 编辑动态菜单 php mysql

> ID：11853737
> 
> 赞同：3
> 
> 时间：2012-08-07T20:36:00.970
> 
> 标签：php, mysql

我正在尝试在 PHP 和 MySql 中构建一个动态菜单（带有子菜单）。并尝试构建动态编辑器以使用此菜单进行操作、创建、删除等。在创建菜单类别时，我已经堆叠了它的位置。要理解好，请看一下 mysql 表结构 =>

```
create table menu(
id int(5) NOT NULL AUTO_INCREMENT PRIMARY KEY,
sort_id UNSIGNED BIGINT NOT NULL,
title VARCHAR(20) NOT NULL,
etc ...); 
```

我正在使用 sort_id 对菜单类别进行排序，在创建过程中我给了这个列不同的值（第一次，默认情况下），因为在创建另一个类别之后，我将值加 1 并减 1，但我认为它这样做是很糟糕的。任何想法如何管理 MySql 表以定义创建类别的位置（向前或向后）？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:38:34.790

在 sort_id 中，只需输入父菜单的 id，对于根菜单，只需输入 0/NULL。

示例：（sid = sort_id）

```
id|sid| title
1 | 0 | Menu1
2 | 0 | Menu2
3 | 1 | Submenu1of1
4 | 1 | Submenu2of1
5 | 2 | Submenu1of2
6 | 4 | Subsubmenu1of2of1 
```

将指：

```
1 : Menu1
    3 : Submenu1of1
    4 : Submenu2of1
        6 : Submenu1of2of1
2 : Menu2
    5 : Submenu1of2 
```

现在在第 1 步和第 2 步之间进行转换是您工作的一部分。
使用递归，你会没事的。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T20:45:00.030

您不应该像@Jerska 所说的那样使用 sort_id ，因为那样您将无法对子菜单进行排序并且它会使您的程序逻辑复杂化/混淆。你可以有一张这样的桌子

```
CREATE TABLE menu(
  id INT NOT NULL AUTO_INCREMENT,
  PRIMARY KEY(id),
  parent_id INT,
  FOREIGN KEY(parent_id) REFERENCES menu(id),
  sort_id INT,
  title VARCHAR(100)
) ENGINE=InnoDB; 
```

如果 parent_id 设置为 null 那么它是一个根菜单。

* * *

这是给您的示例菜单：

家居和花园
- 客厅
- 餐厅
- 浴室
- 卧室
- 花园和温室
电器
- 声音和视觉
- 计算机和电话
- 家用电器
- 小家电

它将像这样存储：

```
INSERT INTO menu
  (parent_id, sort_id, title)
VALUES
  (null, 1, "Home & Garden"),
  (null, 2, "Electricals"),
  (1, 1, "Living Room"),
  (1, 2, "Dining Room"),
  (1, 3, "Bathroom"),
  (1, 4, "Bedroom"),
  (1, 5, "Garden & Conservatory"),
  (2, 1, "Sound & Vision"),
  (2, 4, "Small Appliances"),
  (2, 3, "Home Appliances"),
  (2, 2, "Computing & Phones"); 
```

如果你真的按这个顺序插入它们，“Home & Garden”的 ID 将为 1，“Electricals”的 ID 为 2（不要与 sort_id 混淆），“Living Room”的 ID 为3，“Dining Room”的 ID 将是 4... 因为我们在 ID 字段上自动递增。

因此，如果您想在 Sound & Vision 中有一个子类别，首先您会找到 ID，在这种情况下它会找到`8`，然后您将添加新记录，其父 ID 为`8`.

示例子子类别：

```
Electricals  
- Sound & Vision  
  * Televisions  
  * Audio 
```

您将插入这些记录：

```
INSERT INTO menu
  (parent_id, sort_id, title)
VALUES
  (8, 1, "Televisions"),
  (8, 2, "Audio"); 
```

# python - 如何修改 Sphinx 文档以更新相关链接？

> ID：11853745
> 
> 赞同：7
> 
> 时间：2012-08-07T20:36:22.783
> 
> 标签：python, python-sphinx

我正在使用 Sphinx 来记录一个 python 项目。我正在使用画布来可视化文档中的一些结果。我的文档需要支持 Firefox 和 IE。我需要在文档中包含 excanvas.js 库，但前提是浏览器是 IE。我怎样才能有条件地包含这个库，所以相对路径是正确的？

例子....

文档文件夹

```
/sphinx
   /source
   working_test_page.rst
   test_block.html
   /nested
      non_working_test_page.rst
      test_block_copy.html
   /_templates
      layout.html
   /_static
      excanvas.js
   ... 
```

[根据Sphinx 文档页面](https://www.sphinx-doc.org/en/master/templating.html)的注释，文件 layout.html 已修改。此修改是在模板头中插入一个条件 HTML 块，如果在 IE 上查看页面，则添加 excanvas.js。

```
{% extends "!layout.html" %} 
{% block extrahead %} 
  <!--[if IE]>
    <script type="text/javascript" src="_static/excanvas.js"></script>
  <![endif]--> 
{% endblock %} 
```

文件working_test_page.rst 和non_working_test_page.rst 具有相同的内容。内容如下。唯一的区别是文件的位置。

```
Script Test
==========

.. raw:: html
   :file: test_block_1.html 
```

文件 test_block.html 和 test_block_copy.html 具有相同的内容。这两个文件包含一些 HTML，用于设置画布并使用它。

当 sphinx 将第一个文件编译到 HTML 构建目录中时，会产生以下文件结构：

```
/sphinx
   /build
   working_test_page.html
   /nested
      non_working_test_page.html
   /_static
      excanvas.js
   ... 
```

文件working_test_page.html 具有excanvas.js 的正确路径并正确加载。文件 non_working_test_page.html 的 excanvas.js 路径错误，无法正确加载。

如何有条件地加载 excanvas.js，以便 sphinx 文档中的相对路径是正确的，而不管 rst 文件的位置如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T20:56:40.300

如果辅助函数 pathto(...) 用于修改条件 HTML 片段，则条件链接将被正确格式化。请参阅有关[pathto(file,1)](http://sphinx.pocoo.org/templating.html)的文档。

```
{% extends "!layout.html" %}
{% block extrahead %}
    <!--[if IE]>
      <script type="text/javascript" src="{{pathto("_static/excanvas.js", 1)}}"></script>
    <![endif]-->
{% endblock %} 
```

# c# - 如何只允许管理员关闭程序？

> ID：11853752
> 
> 赞同：1
> 
> 时间：2012-08-07T20:36:51.670
> 
> 标签：c#, forms, windows-services, admin, uac

我正在 Uni 从事我的第 3 年项目。

该功能的一个组成部分是只有管理员才能弄乱该程序，其中包括：

*   安装
*   卸载
*   设置（文件）

最后是有争议的；'关闭程序'。

这是我目前的想法。

Windows Form App，启动时启动，记录各种事情，并监视和阻止其他人，与PC一起关闭（不知道如何让程序在关闭时很好地退出？）然后重新打开计算机该程序在启动时就在那里，完成它的工作。

我不确定它是否更适合 Windows 服务，但该程序肯定需要一个 Windows 表单界面，以便用户可以登录（如果管理员需要这样做，通过用户帐户）。

任何人都可以告诉我Windows服务是否会更好，如果是的话，有一些关于它们的好文档吗？我查看并尝试了 MSDN 教程，但没有太多运气甚至理解。

我知道干扰用户并阻止他们关闭程序是不好的做法，但这都是管理员有意安装的功能的一部分。

哦，是的，我忘了提到该程序将被安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:43:13.877

通常这是通过用户权限和角色来完成的。您创建用户并为他们分配角色。如果尝试“关闭”的给定用户具有“管理员”角色，那么我们允许他，否则我们不允许。您可以将这些用户放入注册表并创建您的程序可以与之对话或直接查询的 Windows 服务。

# asp.net - .NET 4.5 中的样式包和 CSS 中的图标

> ID：11853755
> 
> 赞同：9
> 
> 时间：2012-08-07T20:37:07.820
> 
> 标签：asp.net, asp.net-mvc, minify, asp.net-optimization, bundling-and-minification

我开始使用 .NET 4.5 内置的缩小和捆绑来缩小和捆绑我的 CSS 和 JavaScript。JavaScript 缩小效果很好，但是，我在 CSS 缩小方面遇到了麻烦。我使用以下代码创建了一个样式包 -

```
var myCss = new string[]
                                        {
                                            "~/Content/jquery.css",
                                            "~/Content/app.css",
                                        };
bundles.Add(new StyleBundle("~/bundles/MySiteCss/").Include(myCss )); 
```

然后我在 .cshtml（剃刀文件）中引用它们，如下所示 -

```
@Styles.Render("~/bundles/MySiteCss/") 
```

它缩小了 CSS 文件。但是，如果 CSS 文件包含具有背景图像引用的样式，例如 background-image: url('img/icon.png')，它会尝试从新位置加载此图标文件（从包名称派生） = /bundles/MySiteCss/img/icon.png

由于该图标不存在于该位置，因此它不会被加载并显示在页面上。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T20:40:16.100

您需要从同一个地方提供您的捆绑包和 CSS 才能轻松工作。例如，将您的捆绑线更改为：

```
bundles.Add(new StyleBundle("~/Content/MySiteCss/").Include(myCss)); 
```

并更新您的参考：

```
@Styles.Render("~/Content/MySiteCss/") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:46:04.280

这已在 Microsoft ASP.NET Web 优化框架的 1.1.0-alpha1 版中得到修复。如果包含 Prerelease，
您可以通过 NuGet ( [https://nuget.org/packages/Microsoft.AspNet.Web.Optimization ) 获取更新。](https://nuget.org/packages/Microsoft.AspNet.Web.Optimization)

# iphone - 加载联系人以检索电子邮件地址并发送电子邮件

> ID：11853756
> 
> 赞同：0
> 
> 时间：2012-08-07T20:37:22.330
> 
> 标签：iphone, ios, cocoa

我是 iphone 世界的新手，我想问一个问题：我的 IOS 应用程序中有一个联系人按钮，我要做的就是当用户点击该按钮时，它会打开我的手机联系人，我选择了以下任何电子邮件我那个联系人的朋友，然后我向那个地址发送电子邮件..

我想实现这个功能。

我已经使用 messageUI 框架完成了反之亦然。当您点击电子邮件时，会出现一个 + 按钮，当您单击它时，会打开一个联系页面，您从那里选择电子邮件地址。我实际上希望我的联系按钮上有这个功能。

当我点击联系人时，我的手机联系人加载我从那里选择一个联系人并向它发送电子邮件。我不知道如何在 iphone 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:43:07.387

你看过一些这样的苹果文档[吗](https://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/QuickStart.html#//apple_ref/doc/uid/TP40007744-CH2-SW1)？如果您发布示例代码也会有所帮助。

# node.js - Node.js CMS 选项比 Calipso 更活跃、更有特色？

> ID：11853767
> 
> 赞同：5
> 
> 时间：2012-08-07T20:38:17.823
> 
> 标签：node.js, content-management-system

[在浏览了相当多的 Node.js CMS 候选人之后， Calipso](http://calip.so)似乎是迄今为止最活跃/开发最完善的 CMS。我是否错过了目前更强大和成熟的其他选择或项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:56:32.903

更新：卡利普索现在死了。我们目前正在使用 Apostrophe CMS，在我看来，它功能更全面，架构更好，适用于基于 node.js 的 cms。

我们在我公司的一些项目中使用 Calipso，效果很好。如果你喜欢节点，那你应该没问题 :) 我们不断审查其他基于节点的 cmses，到目前为止，Calipso 是最活跃和最受欢迎的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-03T06:15:47.503

我强烈推荐[KeystoneJS](http://www.keystonejs.com)，它仍然相对较新，但我已经在几个商业项目中使用它，试试吧！（我也为该项目做出了贡献）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-23T14:03:23.467

[DocPad](http://docpad.org/)似乎几乎和 Calipso 一样活跃——来自 22 位开发人员的[831次提交与 Calipso 中的](https://github.com/bevry/docpad)[1023](https://github.com/cliftonc/calipso/)次提交。DocPad 有很好的文档和很多插件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-09T11:16:48.963

查看[enduro.js](http://www.endurojs.com/docs/what-is-enduro)。它是简约的，可以通过 node.js 扩展，并且有一个非常漂亮的自动生成的管理界面。

# javascript - MVC 3 返回多个 Flot 图

> ID：11853768
> 
> 赞同：0
> 
> 时间：2012-08-07T20:38:20.690
> 
> 标签：javascript, json, asp.net-mvc-3, c#-4.0, flot

谢谢阅读。随着我正在升级到 MVC，我也越来越多地接触到很多 Javascript（我在这方面非常薄弱）。

我有一个呈现如下数据列表的视图

```
<table>
    <tr>
        <th>heading 1</th>
        <th>heading 2</th>
        <th>heading 3</th>
        <th>heading 4</th>
        <th>chart</th>
    </tr>
    foreach(var item in Model)
    {
        <tr>
            <td>@item.data1</td>
            <td>@item.data2</td>
            <td>@item.data3</td>
            <td>@item.data4</td>
            <td><div id="graphname"></div> </td>
        </tr>
    }
</table> 
```

通过遵循此处[http://blog.simontimms.com/2009/06/bar-graphs-using-flot-and-aspnet-mvc.html](http://blog.simontimms.com/2009/06/bar-graphs-using-flot-and-aspnet-mvc.html)的示例，我可以获得正确的数据。我如何使用从该链接中学到的知识，并且还能够创建/返回多个图表 `<div id="graphname"></div>` ，因为它是由 id 引用的？还是有更好的方法来完全做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:06:12.857

您需要为每个 div 设置一个唯一的 ID。

您可以通过几种不同的方式做到这一点。最干净的方法是以某种方式将其与您的数据联系起来，例如，如果每个项目的 item.data1 是唯一值（如主键），您可以执行以下操作

<div id="@("graphname_" + item.data1>"

或者您可以在 foreach 中添加一个索引并引用它

```
int i = 0;
foreach(var item in Model)
{
    <tr>
        <td>@item.data1</td>
        <td>@item.data2</td>
        <td>@item.data3</td>
        <td>@item.data4</td>
        <td><div id="@(graphname + i)"></div> </td>
    </tr>
    ++i;
} 
```

从那里只需为每个图形调用 $.plot，引用所需的数据和正确的 div

# css - CSS max-width 以匹配父宽度

> ID：11853774
> 
> 赞同：2
> 
> 时间：2012-08-07T20:39:01.070
> 
> 标签：css, width, overflow

我在列表元素内的代码块的宽度有问题。这个列表元素由 JavaScript 设置，与 Swipejs 一起使用，设置为页面的宽度。

但是，我遇到的问题是，当`<pre>`元素在单行上有一大块超过父级宽度的文本时，列表元素会扩展。我的问题是如何防止这种情况发生并强制`<pre>`元素在拥有的`<li>`同时将宽度设置为宽度`overflow:scroll`？

```
<li>
<pre class="language-css"><code class="language-css">
</code></pre>
</li> 
```

我知道这可以通过为`<pre>`元素定义特定的固定宽度来完成，但由于它应该适用于不同的屏幕尺寸，所以这是不可能的。我希望你能帮忙。谢谢！

# delphi - TImage 不会与父级对齐

> ID：11853782
> 
> 赞同：0
> 
> 时间：2012-08-07T20:39:40.303
> 
> 标签：delphi

我想创建一个包含 TImage32 的自定义 TPanel。在我手动调整父控件的大小之前，图像不会与父控件对齐。之后它将保持很好的对齐。
为什么？

```
TYPE
  TDisplay1= class(TPanel)
   private
    Ready: Boolean;
    RightPnl       : TPanel;
    ShowA          : TSpeedButton;
    Display        : TImage32;
   protected
    procedure Resize; override;
   public
    constructor Create(AOwner: TComponent); override;
    destructor  Destroy; override;
  end;

IMPLEMENTATION

procedure TDisplay1.Resize;    <-------- the culprit was here as suggested by Vahid
begin
 inherited;
 if Ready
 then Display.SetupBitmap(TRUE, clYellow32);
end; 
```

更新：
我正在使用另一种加载控件的方法来解决 oa 解决方案。如果我成功了，我会告诉你的。

Update2：
Vahid 的答案更好。谢谢瓦希德。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:28:25.950

将此代码添加到您的面板：

```
...
protected
   procedure Paint; override;
...
procedure TDisplay1.Paint;
begin
 inherited;
 if Ready then Display.SetupBitmap(TRUE, clYellow32);
end; 
```

# xcode - 为什么我的提交没有出现在 Xcode 4 中？

> ID：11853783
> 
> 赞同：0
> 
> 时间：2012-08-07T20:39:45.100
> 
> 标签：xcode, git, version-control, commit

我是一名新程序员，正在尝试使用 Xcode 的源代码控制管理器来跟踪我的代码的更改。

现在我想恢复到我以前提交的项目版本。但是，在打开 Organizer、选择 Repositories 并从左侧项目列表中选择我的项目时，我只能看到我的项目的快照。

在 Organizer 之外使用版本编辑器时，以前提交的版本会正确显示。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:04:03.657

我不相信你可以在 Xcode 中做到这一点，但在 Xcode 之外它很简单。最简单的方法是在终端中输入以下内容：

```
git checkout -b <new branch> <commit> 
```

这不会在当前分支上恢复，但会给你一个新的分支来开发。如果您真的想恢复，那么只需：

```
git revert <commit> 
```

解决冲突将起作用。

如果在终端中找不到“git”，那么 1) 安装 Xcode 命令行工具或 2) 在 Xcode/.../usr/bin 下的 Xcode 包中查找它。

# mysql - Mysql InnoDB 插入速度太慢？

> ID：11853784
> 
> 赞同：2
> 
> 时间：2012-08-07T20:39:53.153
> 
> 标签：mysql, innodb, insertion

我在 Mysql 中有一个 InnoDb 表，它需要非常快速地处理插入（其他一切都可以随心所欲）。该表没有关系或索引一个自动递增的 id 和一个时间戳。

我从多个客户端运行脚本以在分配的时间内插入尽可能多的记录（循环插入）并计算每秒的插入次数。

我平均每秒只能插入 200 次，而我需要大约 20000 次。性能不会随着运行脚本的客户端数量或运行脚本的机器的数量而改变。

有什么方法可以加快这些插入的性能吗？

- - - 编辑 - - - -

感谢你的帮助。我无法将任何插入组合在一起，因为当我们启动时，所有插入都将来自多个连接。我最终将该表的引擎切换到 MyISAM，每秒的插入量立即飙升至 40,000。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T23:20:35.333

您使用了哪个主键？

InnoDB 使用聚集索引，因此所有数据的顺序与其主键索引相同。

如果您不使用自动增量类型的主键，那么它会为每个插入进行大型磁盘操作。它推送所有其他数据并插入新元素。

如需更多参考，请尝试检查[http://dev.mysql.com/doc/refman/5.0/en/innodb-table-and-index.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-table-and-index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:45:47.167

首先，执行`INSERTs`in a `TRANSACTION`：

```
START TRANSACTION;

INSERT ...

COMMIT; 
```

其次，将多行批处理成一个`INSERT`语句：

```
START TRANSACTION;

INSERT INTO table (only,include,fields,that,need,non_default,values) VALUES
(1,1,1,1,1,1,1),
(2,1,1,1,1,1,1),
(3,1,1,1,1,1,1),
...;

COMMIT; 
```

最后，如果输入数据的格式正确，您可能会发现`LOAD DATA INFILE`性能优于。`INSERT`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:44:06.550

例如，我建议在一个查询中尝试多个插入

```
INSERT INTO table 
   (title, description) 
VALUES 
   ('test1', 'description1'), 
   ('test2', 'description2'), 
   ('test3', 'description3'), 
   ('test4', 'description4') 
```

或尝试使用程序

# jsf-2 - 从非 JSF 页面调用 Jsf View id

> ID：11853785
> 
> 赞同：1
> 
> 时间：2012-08-07T20:39:54.033
> 
> 标签：jsf-2

我们正在将新应用程序与现有 JSP 应用程序集成，并尝试重新使用一些现有功能。我在 faces-navigation.xml 中有一个导航规则，例如

```
<from-view-id>/WEB-INF/jsp/admin/login.xhtml</from-view-id>
<navigation-case>
    <from-outcome>success</from-outcome>
    <to-view-id>/WEB-INF/jsp/admin/welcome.xhtml</to-view-id>
</navigation-case>
<navigation-case>
    <from-outcome>admin</from-outcome>
    <to-view-id>/WEB-INF/jsp/admin/dashaboard.xhtml</to-view-id>
</navigation-case>
</navigation-rule> 
```

在我的jsp中，我试图将这个定义称为

```
<a href="/WEB-INF/jsp/admin/login.xhtml">Admin login </a> 
```

当我点击“管理员登录”时，我得到页面未找到异常。

有没有另一种方式来调用这个视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:09:59.317

中的文件`/WEB-INF`不可公开访问（即最终用户无法`/WEB-INF`通过在浏览器的地址栏中输入其裸露的 URL 直接打开任何文件）。它们只能由对文件夹中的文件执行操作的[servlet](https://stackoverflow.com/tags/servlets/info)访问。旧的 webapp 代码设置显然使用了这样的 servlet，无论是自产的还是来自不同的 MVC 框架。`RequestDispatcher#forward()``/WEB-INF`

您应该将这些页面移动到文件夹***之外。***`/WEB-INF`顺便说一句，我还会`/jsp`从路径中删除误导性部分，因为这些文件根本不是 JSP 文件。鉴于`.xhtml`扩展，您实际上是在使用它的继任者 Facelets。

顺便说一句，由于新的“隐式导航”特性，导航规则从 JSF 2.0 开始就已经过时了。也许您在学习 JSF 时过于关注 JSF 1.x 目标书籍/教程？

# windows - linux上的Oracle数据库

> ID：11853789
> 
> 赞同：0
> 
> 时间：2012-08-07T20:39:58.730
> 
> 标签：windows, linux, oracle

我有一个关于 oracle 区分大小写的问题。我正在做一个访问 oracle 11g 数据库的项目，Oracle 服务器安装在 windows server 2008 上。我们正在将此应用程序部署在 linux 环境中，此时该应用程序将与 linux 机器上的 oracle 数据库通信。

我想知道区分大小写是否会成为问题？前任。如果我的应用程序将表名“Foo”查询为“select * from foo”，这在 windows 环境中不是问题，这在 linux 中会出现问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:57:37.517

在大多数情况下，就您所说的 Oracle 而言，可以被视为不区分大小写。然而，事实并非如此。

从[文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements008.htm)中：

> 不带引号的标识符不区分大小写。Oracle 将它们解释为大写。带引号的标识符区分大小写

这意味着通常所有对象都是大写的，Oracle 会处理：

```
select * from foo; 
```

相同：

```
select * from "FOO"; 
```

但是，如果您的表实际上是创建为区分大小写的，那么您必须指定正确的大小写：

```
select * from "Foo"; 
```

在实践中很少会创建区分大小写的对象，但 Oracle 确实允许这样做。如果不清楚，请告诉我，我会尽力给出更好的解释

# jquery - 移除移动版 Safari touchcancel

> ID：11853790
> 
> 赞同：0
> 
> 时间：2012-08-07T20:39:59.570
> 
> 标签：jquery, touch, mobile-safari

你如何删除移动Safari touchcancel？我有一个 li，在一个事件之后它添加了一个 touchcancel。我想知道是否有人可能知道如何删除它以及它为什么会发生。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:48:56.727

您无法删除该事件，但您可以绑定到该事件，然后在其上进行 preventDefault，这样就不会发生任何事情。

使用 jQuery

```
 $(document).on('touchcancel', function(event){event.preventDefault()}) 
```

# r - 将经纬度坐标 (WGS) 转换为具有等距轴的网格（在给定区域内）

> ID：11853796
> 
> 赞同：0
> 
> 时间：2012-08-07T20:40:21.620
> 
> 标签：r, geolocation, geospatial, nearest-neighbor, wgs84

我在两个数据集中有很多地理坐标，并且想要运行最近邻搜索。我遇到了“RANN”包，该功能`nn2(x,y)`运行得非常快。

现在有一个问题，当然在伦敦地区，向北一个学位比向西一个学位要远得多。

我现在的想法是将位置坐标转换为某个网格，其中在 x 方向上的一步与在 y 方向上的一步几乎相同。该地区是伦敦（中心 -0.1045,51.489）。如何执行此转换？

```
library(RANN)

xyunf <- structure(c(-0.19117, -0.173862, -0.187623, -0.187623, -0.192366, 
-0.176224, 51.489096, 51.482442, 51.50226, 51.50226, 51.491632, 
51.495429), .Dim = c(6L, 2L), .Dimnames = list(c("1", "2", "3", 
"4", "6", "7"), c("Longitude", "Latitude")))
xyosm <- structure(c(-0.1966434, -0.1097162, -0.2023061, -0.198467, -0.4804301, 
-0.4286548, 51.6511198, 51.6134576, 51.6042042, 51.5186019, 51.3757395, 
51.3351355), .Dim = c(6L, 2L), .Dimnames = list(NULL, c("lon", 
"lat")))

res <- nn2(data=xyunf, query=xyosm, k=1)
res$nn.dists
res$nn.idx 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:52:09.477

仅使用 111.1 公里/度，您就可以很好地估计温带纬度的南北距离。对于经度（东西）：

```
mtrs_degr_long <- function(long) { a=6378137.0 ; b=6356752.3142 
         e.sqr <- a^2/b^2 -1; long=long*2*pi/360
         pi*a*cos(long)/( 180*(1-e.sqr*sin(long)^2)^(1/2) ) } 
```

{参见[维基百科文章](http://en.wikipedia.org/wiki/Longitude#Length_of_a_degree_of_longitude)。）

现在您可以乘以您的经度值`mtrs_degr_lat(51.5)/111100`，然后您将调整比例，因此相对距离是正确的。如果将两者都转换为米，则可以获得绝对距离。在相对较小的范围内，由非直线坐标系引起的误差将非常小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:15:35.307

如果您阅读 R Spatial Task 视图，您可以找到所有关于 Spatial 对象的信息 - 这些是可以关联坐标参考系的点、网格、线或多边形。

一旦你有了这些，你就可以`spTransform`用来在坐标系之间进行转换。因此，要将具有 lat/lon 项目的数据框从 lat-long 转换为军械测量网格坐标：

```
coordinates(ptsLL) = ~Longitude+Latitude # turns a dataframe into a SpatialPointsDataFrame
proj4string(ptsLL) = CRS("+init=epsg:4326")  # tells it to be lat-long WGS84
ptsOS = spTransform(ptsLL, CRS("+init=epsg:27700")) # converts to UK Grid system
ptsOS = pts@coords 
```

现在关于 epsg:27700 的问题是它是以米为单位的方形网格，所以使用它。如果您需要再次转换回经纬度`spTransform`。

世界其他地区还有其他方格坐标系，所以不要在澳大利亚使用这个！

# rcpp - 满足条件时终止犰狳程序

> ID：11853802
> 
> 赞同：0
> 
> 时间：2012-08-07T20:40:47.643
> 
> 标签：rcpp, armadillo

我想知道如果满足某个条件，我如何终止一些犰狳程序。

我使用 RcppArmadillo 运行程序。但是，该程序有时可能会在数值上不稳定并产生 NaN 输出。如果某些变量采用 NaN，我想做的是终止程序。Armadillo 文档没有列出任何关于“终止”、“停止”或“中止”程序的内容。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:49:52.457

这个问题并不特定于 Rcpp、Armadillo 或 RcppArmadillo。

您可能只是`throw()`一个例外，然后`catch()`- 但真正的解决方案可能是尝试解决导致不稳定的潜在问题。

# iphone - UITableView 部分重新定位

> ID：11853806
> 
> 赞同：0
> 
> 时间：2012-08-07T20:41:01.327
> 
> 标签：iphone, objective-c, uitableview, xcode4

我有 UITableView 有 7 个部分 .. 每个部分有 1 行 .. 我的问题是： **如何将部分从它的位置移动到另一个位置**？.. 就像在 TableView 中移动单元格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:43:02.657

从 iOS 5.0 开始，`UITableView`可以理解该[`moveSection:toSection:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006943-CH3-SW56)消息。

# c# - Task<> 不包含“GetAwaiter”的定义

> ID：11853812
> 
> 赞同：75
> 
> 时间：2012-08-07T20:41:45.577
> 
> 标签：c#, wcf, silverlight-5.0, async-ctp

客户

```
iGame Channel = new ChannelFactory<iGame> ( new BasicHttpBinding ( BasicHttpSecurityMode . None ) , new EndpointAddress ( new Uri ( "http://localhost:58597/Game.svc" ) ) ) . CreateChannel ( );

public Task<SerializableDynamicObject> Client ( SerializableDynamicObject Packet )
{
    return Task<SerializableDynamicObject> . Factory . FromAsync ( Channel . BeginConnection , Channel . EndConnection , Packet , null );
} 
```

合同

```
 [OperationContract ( AsyncPattern = true )]
    IAsyncResult BeginConnection ( SerializableDynamicObject Message , AsyncCallback Callback , object State );

    SerializableDynamicObject EndConnection ( IAsyncResult Result ); 
```

服务

```
public IAsyncResult BeginConnection ( SerializableDynamicObject Message , AsyncCallback Callback , object State )
{
    dynamic Request = Message;
    dynamic Response = new SerializableDynamicObject ( );
    if ( Request . Operation = "test" )
    {
        Response . Status = true;
    }
    Response . Status = false;

    return new CompletedAsyncResult<SerializableDynamicObject> ( Response );
}

public SerializableDynamicObject EndConnection ( IAsyncResult Result )
{
    return ( Result as CompletedAsyncResult<SerializableDynamicObject> ) . Data;
} 
```

从 Silverlight 客户端公开服务

```
private async void myButton ( object sender , RoutedEventArgs e )
{
    dynamic Request = new SerializableDynamicObject ( );
    Request . Operation = "test";

    var task = Client ( Request );
    var result = await task;  // <------------------------------ Exception
} 
```

例外

```
Task<SerializableDynamicObject > does not contain a definition for 'GetAwaiter' 
```

**怎么**了？

* * *

**编辑 1：**

简要地，

Visual Studio 2012 RC **Silverlight 5 应用**程序使用通过共享便携式库使用 ChannelFactory 技术托管在**ASP.net 4 应用程序中的***Game* **WCF 4 服务****。NET4/SL5**包含带有**异步 CTP的***iGame*接口

 *********图：**
ASP.NET **<=**类库 (Game) **<=**便携式库 (iGame) **=>** Silverlight

* * *

**编辑 2：**

*   Microsoft.CompilerServices.AsyncTargetingPack.Silverlight5.dll 添加到我的 SL5 客户端
*   使用系统。穿线。任务;

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2015-09-09T09:20:24.480

我在我的一个项目中遇到了这个问题，我发现我已将项目的 .Net Framework 版本设置为 4.0，并且异步任务仅在 .Net Framework 4.5 及更高版本中受支持。

我只是将我的项目设置更改为使用 .Net Framework 4.5 或更高版本，它就可以工作了。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2016-09-23T13:46:06.203

您必须安装[Microsoft.Bcl.Async](https://www.nuget.org/packages/Microsoft.Bcl.Async/) NuGet 包才能使用`async/await`.NET 4.5 之前的版本（例如 Silverlight 4.0+）中的构造

只是为了清楚起见——这个包曾经被称为`Microsoft.CompilerServices.AsyncTargetingPack`，一些旧的[教程](http://10rem.net/blog/2012/05/22/using-async-and-await-in-silverlight-5-and-net-4-in-visual-studio-11-with-the-async-targeting-pack)仍然引用它。

[在这里](https://blogs.msdn.microsoft.com/bclteam/2013/04/17/microsoft-bcl-async-is-now-stable/)查看来自 Immo Landwerth 的信息。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2017-07-05T17:41:56.697

刚刚在执行 linq 查询的方法中经历了这一点。

```
public async Task<Foo> GetSomething()
{
    return await (from foo in Foos
                  select foo).FirstOrDefault();
} 
```

需要改为使用`.FirstOrDefaultAsync()`。N00b 错误。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-08-07T21:30:22.997

`GetAwaiter()`，由 使用`await`，被实现为异步 CTP 中的扩展方法。我不确定您到底在使用什么（您在问题中提到了 Async CTP 和 VS 2012 RC），但 Async 目标包可能使用相同的技术。

那么问题是扩展方法不适用于`dynamic`. 您可以做的是明确指定您正在使用 a `Task`，这意味着扩展方法将起作用，然后切换回`dynamic`：

```
private async void MyButtonClick(object sender, RoutedEventArgs e)
{
    dynamic request = new SerializableDynamicObject();
    request.Operation = "test";

    Task<SerializableDynamicObject> task = Client(request);
    dynamic result = await task;

    // use result here
} 
```

或者，由于该`Client()`方法实际上不是动态的，因此您可以使用`SerializableDynamicObject`、 not调用它，并尽可能`dynamic`限制使用：`dynamic`

```
private async void MyButtonClick(object sender, RoutedEventArgs e)
{
    var request = new SerializableDynamicObject();
    dynamic dynamicRequest = request;
    dynamicRequest.Operation = "test";

    var task = Client(request);
    dynamic result = await task;

    // use result here
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-08-03T18:28:12.650

您仍然可以使用框架 4.0，但您必须包含`getawaiter`以下类：

`MethodName(parameters).ConfigureAwait(false).GetAwaiter().GetResult();`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-11-26T06:17:51.553

出现问题因为我使用的应用程序和我添加到我的应用程序的 dll 都有不同的版本。

添加此 Package-Install-Package Microsoft.Bcl.Async -Version 1.0.168

添加此包 async 代码在 4.0 版本中也变得兼容，因为 Async 仅适用于版本大于或等于 4.5 的应用程序

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-03-14T12:07:43.700

确保您的 .NET 版本 4.5 或更高版本

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-12-11T03:14:12.390

就我而言，只需添加即可`using System;`解决问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-05T20:14:43.517

我遇到了这个问题，因为我正在调用一个方法

```
await myClass.myStaticMethod(myString); 
```

但我正在设置 myString

```
var myString = String.Format({some dynamic-type values}) 
```

这导致了一个`dynamic`类型，而不是一个`string`，因此当我尝试等待时`myClass.myStaticMethod(myString)`，编译器认为我打算调用`myClass.myStaticMethod(dynamic myString)`. 这编译得很好，因为，再次，在动态上下文中，一切都很好，直到它在运行时爆炸，这是因为没有动态版本的实现而发生的`myStaticMethod`，并且这个错误消息没有任何帮助，并且Intellisense 会将我带到正确的定义这一事实也无济于事。
棘手！

但是，通过强制结果类型为字符串，例如：

```
var myString = String.Format({some dynamic-type values}) 
```

到

```
string myString = String.Format({some dynamic-type values}) 
```

我的呼叫`myStaticMethod`路由正确

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-08-22T11:56:37.873

```
public async Task<model> GetSomething(int id)
{
    return await context.model.FindAsync(id);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-01-18T01:44:36.550

我遇到了同样的问题，我必须从方法中删除 async 关键字，并从调用方法中删除 await 关键字才能使用 getawaiter() 而不会出现任何错误。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-12-22T22:14:54.093

如果您正在编写 Visual Studio 扩展 (VSIX)，请确保您有 Microsoft.VisualStudio.Threading 的 using 语句，如下所示：

```
using Microsoft.VisualStudio.Threading; 
```*******

# python - 我可以制作一个脚本来打开终端并运行.py吗？

> ID：11853818
> 
> 赞同：3
> 
> 时间：2012-08-07T20:42:18.110
> 
> 标签：python, macos, terminal

我有一个可以通过终端运行的简单 python 脚本。有没有办法在我的 mac 桌面上放置一个快捷方式来打开终端并像“cd ~/Desktop/script.py”一样运行？我试过自动机，但我无法让它工作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T22:20:26.010

在其中创建一个名为`anyname.command`with的文件`python ~/Desktop/script.py`。`chmod 555 ~/Desktop/anyname.command`然后通过在终端中运行使其可执行。然后当你双击`anyname.command`它应该运行 python 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:55:12.927

Automator 实际上是你最好的选择，手动创建 Macintosh .app 包可能很烦人。

自从我使用 automator 已经很长时间了，但是在这里，使用终端中的 Run Shell Script 命令，并使脚本成为`python ~/Desktop/script.py`或者可能使用完整路径，例如`python /Users/<username>/Desktop/script.py`

PS`cd ~/Desktop/script.py`不会做你认为它做的事，你想做的事`python ~/Desktop/script.py`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-07T20:46:52.863

您必须创建一个 samplename.sh 文件并放入以下行并运行它 ./samplename.sh

~/桌面/script.py

创建指向该 .sh 文件的符号链接并将其放在桌面上。

# php - Zend 框架 - 电子邮件主题行中的变量

> ID：11853819
> 
> 赞同：1
> 
> 时间：2012-08-07T20:42:26.863
> 
> 标签：php, forms, zend-framework, email, variables

我以前没有在 Zend 框架中做过表单。所以我有我的 .phtml 页面，该页面设置正确并使用我的表单。我有控制器文件和 mailer.php 文件，它们都工作正常。该表单使用 javascript 进行验证，向用户发送 HTML 电子邮件。所有这些工作正常。我通常会卡在最简单的事情上。

下面是我的控制器文件的快照，这是设置主题行的位置。

```
 $arrData = $this->_request->getPost();
  if (count($arrData) > 0) {
  $arrErrors = array();
  $objMailer = mymailer($arrData);
  $objMailer->setSubject('Subject Line'); 
```

这很好用，但我想在主题行中包含一个变量（或者更确切地说是一个 $_POST 字段）。我已经多次使用标准 PHP 表单完成此操作，所有内容都在同一页面上。我认为我的问题是 .phtml 页面将表单操作发布到我的控制器文件中的公共函数，然后运行邮件程序 php 脚本。

我试过打印 $arrData，什么都没有，试着看看我是否可以抓住我想要的 $_POST 字段。

如何从原始 .phtml 页面中获取 $_POST 字段？我认为这就是这里的问题。

感谢您的帮助，也许我需要休息一下然后回来，这通常会有所帮助。

我可以在这里打印出数组： print_r ($objMailer);

```
 mymailer Object
 (
[_strRecipient:mymailer:private] => 
[_strBcc:mymailer:private] => 
[_strSubject:mymailer:private] => 
[_strEmail:mymailer:private] => 
[_arrData:mymailer:private] => Array
    (
        [full_name] => brian
        [invitee_name] => test
        [email] => test@testing.com
        [captcha] => kqd2q9
    )

[_arrAttachments:mymailer:private] => 
[_blnCaptcha:mymailer:private] => 1
[_arrErrors:mymailer:private] => Array
    (
    )

 ) 
```

我需要获取全名字段。我怎样才能回显/打印出全名字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:01:06.380

有几种不同的方法可以在控制器中获取 POST 变量。

基本方式。

```
 $post = $this->_request->getPost() 
```

我一般用这个...

```
 $id = $this->_request->getParam('id', 0) 
```

getParam 函数将返回 $_POST['id']/$_GET['id'] 的值或 0

尝试

```
 $objMailer->setSubject($arrData['full_name']); 
```

如果这不起作用，请在 $arrData 上执行 var_dump 并显示结果。

# mysql - 关于 WHERE 条件的子查询效率

> ID：11853820
> 
> 赞同：0
> 
> 时间：2012-08-07T20:42:28.970
> 
> 标签：mysql

我有一个在 FROM 子句中包含子查询的查询。查询的结构如下所示：

```
SELECT date, avg(total)
FROM(
    SELECT date, id, sum(actions) as total
    FROM table
    WHERE date < '2012-08-07'
    GROUP BY date, id
) subquery
GROUP BY date 
```

拥有 WHERE 条件是否更有效，例如`WHERE date < '2012-08-07'`位于最内部的子查询（如图所示）或最外部的子查询中？

我正在使用的实际查询有另一个外层查询，但出于这个问题的目的，我相信这个例子会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:01:42.323

它取决于数据，但通常内部子查询的日期检查应该更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:45:50.970

如您所知，您可以在没有子查询的情况下表达这一点：

```
SELECT date, sum(total)/count(distinct id)
FROM table
WHERE date < '2012-08-07'
GROUP BY date 
```

这可能会更快一些（尽管`COUNT(DISTINCT)`可能很昂贵）。

# jaxb - Moxy 不尊重超类/接口属性

> ID：11853821
> 
> 赞同：3
> 
> 时间：2012-08-07T20:42:31.433
> 
> 标签：jaxb, jaxb2, moxy

`enter code here`我有一个客户的属性分布在两个接口上，如下所示。我使用子接口 ICustomer 定义了外部 xml 绑定。当我将 pojo 编组为 xml 时，似乎 Moxy 忽略了超级接口的属性**firstName**。这是一个错误还是我需要在 xml 元数据中明确指定这两个接口中的每一个？

**基础接口**

```
public interface IBaseCustomer
{
    String getFirstName();

    void setFirstName(final String firstName);
} 
```

**子界面**

```
public interface ICustomer extends IBaseCustomer
{
    String getLastName();

    void setLastName(final String lastName);

    Address getAddress();

    void setAddress(final Address address);

    List<PhoneNumber> getPhoneNumbers();

    void setPhoneNumbers(final List<PhoneNumber> phoneNumbers);

    void setPrefix(final String prefix);

    String getPrefix();
} 
```

**元数据xml**

```
<xml-bindings xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm" package-name="blog.bindingfile">
   <xml-schema namespace="http://www.example.com/customer" element-form-default="QUALIFIED" />
   <java-types>
      <java-type name="ICustomer">
         <xml-root-element name="customer"/>
         <xml-type prop-order="firstName lastName address phoneNumbers" />
         <java-attributes>
            <xml-element java-attribute="firstName" name="first-name" />
            <xml-element java-attribute="lastName" name="last-name" />
            <xml-element java-attribute="phoneNumbers" name="phone-number" />
         </java-attributes>
      </java-type>
      <java-type name="PhoneNumber">
         <java-attributes>
            <xml-attribute java-attribute="type" />
            <xml-value java-attribute="number" />
         </java-attributes>
      </java-type>
   </java-types>
</xml-bindings> 
```

**输出**

```
<customer xmlns="http://www.example.com/customer">
   <prefix>pre</prefix>
</customer> 
```

**演示代码**

```
Map<String, Object> properties = new HashMap<String, Object>(1);
InputStream resourceAsStream = Demo.class.getResourceAsStream("xml-bindings.xml");
properties.put(JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY, resourceAsStream);
JAXBContext jc = JAXBContext.newInstance("blog.bindingfile",  ICustomer.class.getClassLoader(), properties);

ICustomer customer = new Customer();
customer.setPrefix("pre");
customer.setFirstName("firstName");

Marshaller marshaller = jc.createMarshaller();
marshaller.marshal(customer, System.out); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:25:58.880

MOXy 可能没有处理超级接口属性，因为它们不是公共的。默认情况下，JAXB 的访问器类型设置为 PUBLIC_MEMBER。子接口上的属性被处理是因为它们在外部绑定中明确指定，但超接口上的属性不是因为它们不是公共的。您可以尝试在包或接口级别（在外部元数据中）指定不同的访问器类型，或者将接口方法公开以查看是否可以解决问题。

*更新*

经过进一步调查，这确实是一个错误。EclipseLink 不会按应有的方式自动处理父接口。一个临时解决方法是将“super-type="IBaseCustomer"' 添加到 ICustomer 的 java 类型。

我打开了这个错误来跟踪问题：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=386959](https://bugs.eclipse.org/bugs/show_bug.cgi?id=386959)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:40:07.787

由 EclipseLink MOXy V 2.4.1 修复。

我发现在 JavaClassImpl.getSuperClass 方法中添加了超级接口支持，如下所示：

```
public JavaClass getSuperclass() {
    if(this.superClassOverride != null) {
        return this.superClassOverride;
    }
    if(jClass.isInterface()) {
        Class[] superInterfaces = jClass.getInterfaces();
        if(superInterfaces != null) {
            if(superInterfaces.length == 1) {
                return javaModelImpl.getClass(superInterfaces[0]);
            } else {
                Class parent = null;
                for(Class next:superInterfaces) {
                    if(!(next.getName().startsWith("java.") || next.getName().startsWith("javax."))) {
                        if(parent == null) {
                            parent = next;
                        } else {
                            throw JAXBException.invalidInterface(jClass.getName());
                        }
                    }
                }
                return javaModelImpl.getClass(parent);
            }
        }
    }
    return javaModelImpl.getClass(jClass.getSuperclass());
} 
```

# c++ - clang 3.1 看不到 unique_ptr？

> ID：11853822
> 
> 赞同：16
> 
> 时间：2012-08-07T20:42:32.433
> 
> 标签：c++, c++11, clang

我刚刚开始玩 clang 并尝试编译以下示例程序：

```
#include <memory>
#include <iostream>

int main()
{
    std::unique_ptr<unsigned> u(new unsigned(10));
    std::cout << *u << std::endl;
    return 0;
} 
```

编译时出现以下错误：

```
$ clang++ helloworld.cpp 
helloworld.cpp:6:10: error: no member named 'unique_ptr' in namespace 'std'
    std::unique_ptr<unsigned> u(new unsigned(10));
    ~~~~~^
helloworld.cpp:6:29: error: expected '(' for function-style cast or type construction
    std::unique_ptr<unsigned> u(new unsigned(10));
                    ~~~~~~~~^
helloworld.cpp:6:31: error: use of undeclared identifier 'u'
    std::unique_ptr<unsigned> u(new unsigned(10));
                              ^
helloworld.cpp:7:19: error: use of undeclared identifier 'u'
    std::cout << *u << std::endl;
                  ^
4 errors generated. 
```

我在 Mac OS X 上使用 Clang 3.1：

```
$ clang++ --version
Apple clang version 3.1 (tags/Apple/clang-318.0.61) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.0
Thread model: posix 
```

任何想法为什么这不会编译？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-07T20:46:37.610

我让它通过使用来编译

```
clang++ test.cpp  -std=c++11 -stdlib=libc++ 
```

# .net - SQL CLR - dll下载和注册

> ID：11853823
> 
> 赞同：0
> 
> 时间：2012-08-07T20:42:33.570
> 
> 标签：.net, sql, vb.net, dll, sqlclr

我正在使用 SQL CLR。​​我没有 Visual Studio。我安装了 SQL 服务器，所以我有 .NET 环境。

我一直在尝试使用一段代码，但我一直在这一行收到错误：

导入 Microsoft.Practices.EnterpriseLibrary.Security.Cryptography

我确定我需要以下 dll 才能工作：

Microsoft.Practices.EnterpriseLibrary.Security.Cryptography

我在哪里可以下载它以及如何安装它？我只是将它包含在正确的文件夹中还是必须注册它？

任何帮助都会很有用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:33:19.513

不知道如何使用它，但快速搜索会将您指向[下载](http://msdn.microsoft.com/en-us/library/ff647292)和文档

# javascript - 通过 javascript 触发 CSS 动画

> ID：11853824
> 
> 赞同：0
> 
> 时间：2012-08-07T20:42:35.643
> 
> 标签：javascript, css

我想通过 CSS 动画触发 javascript，反之亦然（Javascript 触发 CSS）。

最终目标是让 CSS 动画闪烁，并让它们触发通过 Web Audio API 导入的音频文件。

现在我只是对制作 CSS 动画和 Javascript 相互交流感兴趣。

所以..

我正在 Webkit 浏览器中进行独家试验。下面是一个堆栈溢出线程，它似乎回答了我的问题的第一部分： [如何通过 JavaScript 重新触发 WebKit CSS 动画？](https://stackoverflow.com/questions/4797675/how-do-i-re-trigger-a-webkit-css-animation-via-javascript)

但我无法让它工作。

我在下面添加了我抓取/修改的代码

```
<!--SETUP-->
<!DOCTYPE html>
<meta charset="UTF-8">
<title>test</title>
<link rel="stylesheet" href="test.css">
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js" charset="utf-8"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
<!--END setup-->

<script src="test.js"></script>
<div id="box"> shake </div>
<div id="button"> Button </div> 
```

**CSS**

```
#button {
    width:100px;
    height:100px;
    background:blue;
    position:absolute   

}

#box{
width:100px;
height:100px;
background:red;
position:absolute;
top:100px;
left:90%;
margin-left:100px;
-webkit-animation: shake 1.5s  steps(1)  ;
}

@-webkit-keyframes shake {
    0% {
        left: 0;
    }
    25% {
        left: 12px;
    }
    50% {
        left: 0;
    }
    75% {
        left: -12px;
    }
    100% {
        left:0;
    }
} 
```

**Javascript**

```
var element = document.getElementById('box');

element.addEventListener('webkitAnimationStart', function(){
    this.style.webkitAnimationName = ''; // I think css animationName should go here...but not sure.
}, false);

document.getElementById('button').onclick = function(){
    element.style.webkitAnimationName = 'shake';
    // you'll probably want to preventDefault here.
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T20:51:40.867

而不是更改元素的样式，添加一个类名并有一个 CSS 声明，其中包含要在该类中使用的 CSS 过渡。

# sql - 用数百万个查询查询 sqlite db 的巧妙方法

> ID：11853834
> 
> 赞同：1
> 
> 时间：2012-08-07T20:43:14.913
> 
> 标签：sql, sqlite

我有一个带有大约 400 个键值对的 sqlite3 数据库。我想知道什么是查询这个数据库的首选方法，因为我有 2-3 百万个键，我想找出它们的值。

我问是因为我不确定就我应该进行的查询数量而言，什么是一个好的阈值。我的搜索查询中应该包含多少个键？

```
select * from db_name where col_name in ( <optimum number of keys that I should search>) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:56:48.207

@JNK 注意到了什么。

一个子句`select`中包含 400 个字符串文字的查询`in`可能会运行......很差。

创建一个表，例如：

```
create table key_lookup
(
  name varchar(32) not null primary key clustered ,
) 
```

确保它在查找值上是聚集的（并且是唯一的）。然后针对该表运行您的选择：

```
select t.*
from some_table t
join key_lookup k on k.name = t.some_column 
```

我不知道 sqlite3，但是如果`some_table`在键列上有一个可用的索引，你应该会得到很好的性能。在最坏的情况下，您应该对表进行表扫描，`some_table`并且聚集索引会针对该`key_lookup`表进行搜索，这应该不会太糟糕。

# c++ - 从 Windows::Storage::Streams::IBuffer 中获取字节数组

> ID：11853838
> 
> 赞同：15
> 
> 时间：2012-08-07T20:43:54.187
> 
> 标签：c++, stream, windows-8, windows-runtime, visual-studio-2012

我有一个实现接口的对象，`Windows::Storage::Streams::IBuffer`我想从中获取一个字节数组，但是在查看文档时，这个接口看起来非常无用，并且文档没有提供对任何其他可以组合的类的任何引用用这个接口来达到我的目的。到目前为止，我在谷歌上发现的只是对 .Net 类[WindowsRuntimeBufferExtensions](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.windowsruntime.windowsruntimebufferextensions(v=vs.110).aspx)的引用，但我使用的是 C++，所以这也是一个死胡同。

`Windows::Storage::Streams::IBuffer`有人可以提示如何从C++中获取字节数组吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-05T14:12:32.613

您可以通过奇异的 COM 强制转换使用 IBufferByteAccess：

```
byte* GetPointerToPixelData(IBuffer^ buffer)
{
   // Cast to Object^, then to its underlying IInspectable interface.

   Object^ obj = buffer;
   ComPtr<IInspectable> insp(reinterpret_cast<IInspectable*>(obj));

   // Query the IBufferByteAccess interface.
   ComPtr<IBufferByteAccess> bufferByteAccess;
   ThrowIfFailed(insp.As(&bufferByteAccess));

   // Retrieve the buffer data.

   byte* pixels = nullptr;
   ThrowIfFailed(bufferByteAccess->Buffer(&pixels));

   return pixels;

} 
```

[从http://cm-bloggers.blogspot.fi/2012/09/accessing-image-pixel-data-in-ccx.html](http://cm-bloggers.blogspot.fi/2012/09/accessing-image-pixel-data-in-ccx.html)复制的代码示例

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-20T08:57:00.507

还要检查这个方法：

IBuffer -> Platform::Array
[CryptographicBuffer.CopyToByteArray](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.cryptographicbuffer.copytobytearray)

Platform::Array -> IBuffer
[CryptographicBuffer.CreateFromByteArray](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.cryptographicbuffer.createfrombytearray.aspx)

作为旁注，如果您想`Platform::Array`从简单的 C++ 数组创建，您可以使用`Platform::ArrayReference`，例如：

```
char* c = "sdsd";
Platform::ArrayReference<unsigned char> arraywrapper((unsigned char*) c, sizeof(c)); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-17T16:39:44.630

这是 C++/CX 版本：

```
std::vector<unsigned char> getData( ::Windows::Storage::Streams::IBuffer^ buf )
{
    auto reader = ::Windows::Storage::Streams::DataReader::FromBuffer(buf);

    std::vector<unsigned char> data(reader->UnconsumedBufferLength);

    if ( !data.empty() )
        reader->ReadBytes(
            ::Platform::ArrayReference<unsigned char>(
                &data[0], data.size()));

    return data;
} 
```

有关详细信息，请参阅[数组和 WriteOnlyArray (C++/CX)](https://msdn.microsoft.com/en-gb/library/hh700131.aspx)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-13T20:12:53.287

如前所述，`WindowsRuntimeBufferExtensions`命名空间`System::Runtime::InteropServices::WindowsRuntime`仅适用于 .Net 应用程序，不适用于本机 C++ 应用程序。

一个可能的解决方案是使用`Windows::Storage::Streams::DataReader`：

```
void process(Windows::Storage::Streams::IBuffer^ uselessBuffer)
{
    Windows::Storage::Streams::DataReader^ uselessReader =
             Windows::Storage::Streams::DataReader::FromBuffer(uselessBuffer);
    Platform::Array<Byte>^ managedBytes = 
                         ref new Platform::Array<Byte>(uselessBuffer->Length);
    uselessReader->ReadBytes( managedBytes );                               
    BYTE * bytes = new BYTE[uselessBuffer->Length];
    for(int i = 0; i < uselessBuffer->Length; i++)
        bytes[i] = managedBytes[i];

    (...)
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-13T13:45:02.017

这应该适用于 WinRT 扩展：

```
// Windows::Storage::Streams::DataReader
// buffer is assumed to be of type Windows::Storage::Streams::IBuffer
// BYTE = unsigned char

DataReader^ reader = DataReader::FromBuffer(buffer);

BYTE *extracted = new BYTE[buffer->Length];

// NOTE: This will read directly into the allocated "extracted" buffer
reader->ReadBytes(Platform::ArrayReference<BYTE>(extracted, buffer->Length));

// ... do something with extracted...

delete [] extracted; // don't forget to free the space 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-05-03T17:54:38.223

由于这个问题被标记为[c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")，这里有一个使用[C++/WinRT](https://docs.microsoft.com/en-us/windows/uwp/cpp-and-winrt-apis/)的解决方案。[它本质上与引擎盖下的这个答案](https://stackoverflow.com/a/14172579/1889329)相同，但更易于访问。投影上的（未记录的）`data()`助手完成了`IBuffer`所有繁重的工作：

```
uint8_t* GetPointerToPixelData(::winrt::Windows::Storage::Streams::IBuffer const& buffer)
{
    return buffer.data();
} 
```

不幸的是（还没有）官方文档，我只是在该[`WritableBitmap.PixelBuffer`](https://docs.microsoft.com/en-us/uwp/api/windows.ui.xaml.media.imaging.writeablebitmap.pixelbuffer#Windows_UI_Xaml_Media_Imaging_WriteableBitmap_PixelBuffer)属性的示例代码中偶然发现了这一点（确保从右上角的语言下拉列表中选择*“C++/WinRT” ）。*

从语言下拉列表中选择*“C++/CX”*`IBufferByteAccess`时，该文档条目也提供了相同的解决方案（查询接口）。

 ** * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-07T20:55:45.960

[像静态方法一样使用扩展方法](https://stackoverflow.com/a/1349687/6210)：

```
IBuffer *buffer;
array<unsigned char>^ result= System::Runtime::InteropServices::WindowsRuntime::WindowsRuntimeBufferExtensions::ToArray(buffer); 
```*

# c# - 用一行渲染对象属性

> ID：11853840
> 
> 赞同：1
> 
> 时间：2012-08-07T20:44:02.427
> 
> 标签：c#, asp.net-mvc-3

如何在一行内的复选框中显示每个属性我有具有许多属性的对象功能，这些属性是动态分配的，我不想在视图中对它们进行硬编码。所以，现在我有类似的东西

```
@Html.CheckBoxFor(model => model.Features.IsRegistered, new { @disabled = "disabled" })
@Html.CheckBoxFor(model => model.Features.IsPhone, new { @disabled = "disabled" 
```

.... 还有很多

如何完全像上面那样渲染，但对于所有对象属性，这可能吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:20:59.693

我只对此进行了一些有限的测试，但这是您可以使用的扩展方法的基本实现：

```
public static class HtmlHelperExtensions
{
    public static MvcHtmlString CheckBoxesForModel(this HtmlHelper helper,
        object model)
    {
        if (model == null)
            throw new ArgumentNullException("'model' is null");

        return CheckBoxesForModel(helper, model.GetType());
    }

    public static MvcHtmlString CheckBoxesForModel(this HtmlHelper helper,
        Type modelType)
    {
        if (modelType == null)
            throw new ArgumentNullException("'modelType' is null");

        string output = string.Empty;
        var properties = modelType.GetProperties(BindingFlags.Instance | BindingFlags.Public);

        foreach (var property in properties)
            output += helper.CheckBox(property.Name, new { @disabled = "disabled" });

        return MvcHtmlString.Create(output);
    }
} 
```

您可能希望对其进行扩展以允许它也采用 HTML 属性，而不是对它们进行硬编码，但这应该可以帮助您入门。

# spring - 如何将使用消息侦听器接收到的 JMS 消息转换为域对象

> ID：11853841
> 
> 赞同：5
> 
> 时间：2012-08-07T20:44:04.163
> 
> 标签：spring, jms

我在用：

*   春天 3.1.1
*   活动MQ 5.6.0

我有两个 JMS 应用程序：

*   App A 使用 JmsTemplate 发送域对象，使用 jmsTemplate.convertAndSend(msg);
*   应用 B 使用消息侦听器并注册了消息转换器

当接收到的消息被转换时，空值被提取。

我知道这一定很简单，但我得到的是空值，我还没有找到一个例子来看看我做错了什么。

有人可以解释一下这是如何工作的吗？

**域对象**

```
public class MyDomainObj implements Serializable {

private static final long serialVersionUID = -5411260096045103654L;
private String name;
private String msg;

public MyDomainObj() {

}

public MyDomainObj(String name, String msg) {
    this.name = name;
    this.msg = msg;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getMsg() {
    return msg;
}

public void setMsg(String msg) {
    this.msg = msg;
} 
```

}

**应用程序 A**

```
@Component
public class MessageSender {

    @Autowired
    private JmsTemplate jmsTemplate;

    public MessageSender() {

    }

    public void sendMessage(MyDomainObj msg) {
        jmsTemplate.convertAndSend(msg);
    }
} 
```

**应用程序 B**

```
@Component
public class MyReceiverConverter implements MessageConverter {

    @Override
    public Object fromMessage(Message msg) throws JMSException,
            MessageConversionException {

        MyDomainObj myDomainObj = new MyDomainObj(msg.getStringProperty("name"), msg.getStringProperty("msg"));

        return myDomainObj;
    }

    @Override
    public Message toMessage(Object msg, Session session) throws JMSException,
            MessageConversionException {

        ....
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:36:34.390

Solution is:

```
@Override
public Object fromMessage(Message msg) throws JMSException,
        MessageConversionException {

    MyDomainObj myDomainObj = (MyDomainObj)((ObjectMessage)msg).getObject();

    return myDomainObj;
} 
```

# c# - 为什么编译器无法解决这个问题？（特性）

> ID：11853843
> 
> 赞同：2
> 
> 时间：2012-08-07T20:44:10.687
> 
> 标签：c#, compiler-construction, properties

在使用可变结构和属性时，编译器可以弄清楚一些事情，但对其他相当明显的事情却不能做同样的事情，这对我来说似乎很奇怪。

以下面的自动属性为例：

```
Vector2 Vector { get; set; } 
```

而不是输入这个：

```
Vector2 v = Vector;
v += new Vector2(5, 7);
Vector = v; 
```

编译器足够聪明，可以让我这样做：（结构的可变性在这里没有影响）

```
Vector += new Vector2(5, 7); 
```

但似乎编译器不够聪明，无法让我执行以下操作，即使我可以同时访问 setter 和 getter -

```
Vector.X += 4; 
```

相反，我被迫“手动”执行此操作-

```
Vector2 v = Vector;
v.X += 4;
Vector = v; 
```

**编译器团队决定允许第一种速记形式而不是第二种速记形式有什么特别的原因吗？**
除了建议的方式显然更简洁之外，我还认为它可能允许更有效地内联 NGEN/JIT，因为很明显 getter 生成的副本不会在其他任何地方使用。（仅当这可以以某种方式反映在 IL 代码中时）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:48:55.817

如果`Vector2`是结构（值类型），则分配给将分配给属性`someObject.Vector.X`返回的临时副本。`Vector`这从来没有意义，因此是不允许的。

请参阅[为什么可变结构是“邪恶的”？](https://stackoverflow.com/questions/441309/why-are-mutable-structs-evil)供一般参考和一些链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T20:49:13.067

这不是编译器足够聪明的问题，而是代码编译成什么的问题。

```
Vector += new Vector2(5, 7); 
```

编译为

```
Vector = Vector + new vector2(5,7); 
```

所以我们有一个任务。一切都好。

```
Vector.X += 2; 
```

编译为

```
var v = Vector;
v.X = v.X + 2 
```

没有分配回`Vector`。

# ios - 以下图形代码被 iOS ARC 标记为泄漏

> ID：11853845
> 
> 赞同：0
> 
> 时间：2012-08-07T20:44:22.080
> 
> 标签：ios, cgcontext

```
 (UIImage *) cropToSquare:(UIImage *)_image 
 {
if(_image.size.height < _image.size.width)
{
    CGRect drawRect = CGRectMake(0, 0, _image.size.height, _image.size.height); 
    UIGraphicsBeginImageContext(drawRect.size);
    CGContextRef currentContext = UIGraphicsGetCurrentContext();
    CGRect cropArea = CGRectMake (((_image.size.width - _image.size.height)/2), 0, _image.size.height, _image.size.height);
    CGContextTranslateCTM(currentContext, 0.0, _image.size.height);
    CGContextScaleCTM(currentContext, 1.0, -1.0);
    CGContextDrawImage(currentContext, drawRect, CGImageCreateWithImageInRect (_image.CGImage, cropArea));
    UIImage *cropped = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return cropped;
}
else
{
    return _image;
} 
```

}

行 CGContextDrawImage(currentContext, drawRect, CGImageCreateWithImageInRect (_image.CGImage, cropArea)) 标记 100% 泄漏。

我需要自己做 CG 相关的发布吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:49:26.073

我相信 ARC 仅适用于 Cocoa 对象，不适用于 Core* 框架。

要修复泄漏，您需要更改为以下内容：

```
CGImageRef myImage = CGImageCreateWithImageInRect (_image.CGImage, cropArea);
CGContextDrawImage(currentContext, drawRect, myImage);
CFImageRelease(myImage); 
```

这可能是一个相当大的泄漏，具体取决于图像的大小。

# html - Clearfix 不适用于所有页面

> ID：11853848
> 
> 赞同：0
> 
> 时间：2012-08-07T20:44:34.553
> 
> 标签：html, css, wordpress, clearfix

在我的网站[http://jonasolaussen.se/?page_id=16](http://jonasolaussen.se/?page_id=16)`<div style="cleare:none;"> </div>`上，您会看到文字位于页脚下方，如果我像在其他网站上那样做广告，我确实会变得更好。

有人有解决办法吗，不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:49:25.440

主要有两个问题：

**1）**有一个额外`</div><!--wrapper-->`的需要删除。
**2）**`div` `.footer_fix_pusher`需要清除（我在下面使用了您的清除修复方法）

```
<div style="clear:both"></div> <!--You need to add this-->
</div><!--footer_fix_pusher-->
</div><!--wrapper--> <!--You need to delete this closing tag--> 
```

# python - Django模型继承 - 只需要查询中的父类实例

> ID：11853850
> 
> 赞同：6
> 
> 时间：2012-08-07T20:44:51.690
> 
> 标签：python, django, django-models, django-queryset

假设我有 2 个模型，一个是另一个模型的父级。如何在 Django 中查询所有不是餐厅的地方？Place.objects.all() 将包括所有餐馆，对吗？我想从结果中排除孩子。谢谢！

```
class Place(models.Model):
    name = models.CharField(max_length=50)
    address = models.CharField(max_length=80)

class Restaurant(Place):
    serves_hot_dogs = models.BooleanField()
    serves_pizza = models.BooleanField() 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-08-18T20:46:26.500

过滤 Django 的自动创建的`OneToOneField`. 如果是`IS NULL`，这`Place`不是一个`Restaurant`。

```
non_restaurant_places = Place.objects.filter(restaurant__isnull=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:56:08.470

简单的方法是在模型上有一个`place_type`属性`Place`，然后覆盖`save`for`Place`和`Restaurant`任何其他基类，以便在持久化时正确设置它。然后您可以使用 查询`Place.objects.filter(place_type='PLACE')`。可能还有其他方法，但它们可能很快就会变得非常多毛。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-07T21:00:29.953

[根据文档](https://docs.djangoproject.com/en/1.3/topics/db/models/#multi-table-inheritance)，您可以检查小写模型名称是否存在作为属性：

```
places = Place.objects.all()
not_restaurants = [p for p in places if not hasattr(p, 'restaurant')] 
```

# c++ - 命名空间 std 中的字符串没有命名类型

> ID：11853851
> 
> 赞同：57
> 
> 时间：2012-08-07T20:44:57.613
> 
> 标签：c++, string, namespaces, std

这可能只是一个我没有看到的简单错误，但我认为我只是做错了什么。别担心，我没有在我的标头函数中使用命名空间 std 或任何似乎是这个人的问题的东西 [我读到的问题与我的类似][1] [1]：[为什么我得到字符串没有命名类型错误?](https://stackoverflow.com/questions/5527665/weird-string-does-not-name-a-type-)

我现在收到 4 个错误：

> C:\Documents and Settings\Me\My Documents\C++Projects\C++\RandomSentence\Nouns.h|8|错误：命名空间“std”中的“字符串”未命名类型|
> 
> C:\Documents and Settings\Me\My Documents\C++Projects\C++\RandomSentence\Nouns.h|12|错误：命名空间“std”中的“字符串”未命名类型|
> 
> C:\Documents and Settings\Me\My Documents\C++Projects\C++\RandomSentence\Nouns.h|13|错误：命名空间“std”中的“字符串”未命名类型|
> 
> C:\Documents and Settings\Me\My Documents\C++Projects\C++\RandomSentence\Nouns.cpp|9|error: no 'std::string Nouns::nounGenerator()' member function声明在类'Nouns' |
> 
> ||=== 构建完成：4 个错误，0 个警告 ===|

这是我的头文件：

```
class Nouns
{
    public:
        Nouns();
        std::string noun;
    protected:
    private:
        int rnp; // random noun picker
        std::string dog, cat, rat, coat, toilet, lizard, mime, clown, barbie, pig, lamp, chair, hanger, pancake, biscut, ferret, blanket, tree, door, radio;
        std::string nounGenerator()
}; 
```

这是我的 cpp 文件：

```
#include "Nouns.h"
#include <iostream>

Nouns::Nouns()
{

}

std::string Nouns::nounGenerator(){
    RollRandom rollRandObj;

    rnp = rollRandObj.randNum;

    switch(rnp){
    case 1:
        noun = "dog";
        break;
    case 2:
        noun = "cat";
        break;
    case 3:
        noun = "rat";
        break;
    case 4:
        noun = "coat";
        break;
    case 5:
        noun = "toilet";
        break;
    case 6:
        noun = "lizard";
        break;
    case 7:
        noun = "mime";
        break;
    case 8:
        noun = "clown";
        break;
    case 9:
        noun = "barbie";
        break;
    case 10:
        noun = "pig";
        break;
    case 11:
        noun = "lamp";
        break;
    case 12:
        noun = "chair";
        break;
    case 13:
        noun = "hanger";
        break;
    case 14:
        noun = "pancake";
        break;
    case 15:
        noun = "biscut";
        break;
    case 16:
        noun = "ferret";
        break;
    case 17:
        noun = "blanket";
        break;
    case 18:
        noun = "tree";
        break;
    case 19:
        noun = "door";
        break;
    case 20:
        noun = "radio";
        break;
    }

    return noun;
} 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-08-07T20:46:10.523

你需要

```
#include <string> 
```

`<iostream>`声明`cout`, `cin`, 不是`string`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-07T20:46:38.313

`Nouns.h`不包括`<string>`，但需要。您需要添加

```
#include <string> 
```

在该文件的顶部，否则编译器不知道`std::string`第一次遇到它是什么时候。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T20:46:41.057

您需要添加：

```
#include <string> 
```

在你的头文件中。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2021-03-22T10:08:25.247

您需要添加

```
#include <string> 
```

在这里，您尝试访问`string noun::`但没有命名空间命名`string noun`. 您正在尝试访问私人文件。

# c# - 可选参数在目标框架 3.5 中起作用，而对泛型的协变和逆变不起作用

> ID：11853857
> 
> 赞同：3
> 
> 时间：2012-08-07T20:45:16.000
> 
> 标签：c#, .net, c#-4.0

最近 ReSharper 在我的**Visual Studio 2010**解决方案中建议我可以在我的一种方法中使用可选参数。我很惊讶，因为项目的目标是 .NET 3.5，而且据我所知，可选参数是在 C# 4.0 中引入的。

但我做了一个改变，它编译了。

另一方面，我尝试了协变和逆变是否适用于**.NET Framework 3.5 通用 IEnumerable**，但它没有。你能告诉我我缺少什么知识吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:56:13.867

.NET Framework 2.0 中引入了泛型接口和委托的变体，但只有在 C# 4.0 编译器能够利用它之前，开发人员才可以使用。

直到 .NET Framework 4 才针对这种类型的差异更新了框架的库类型。.NET 3.5 泛型变体适用于 C# 4 编译器，但仅适用于您自己的类型。这在带有 C# 4 编译器的 .NET Framework 3.5 上编译得很好。

```
public interface IFoo<out T>
{
    T Bar();
}

public class Baz<T> : IFoo<T>
{
    public T Bar()
    {
        return default(T);
    }
}

public class Program
{
    static void Main()
    {
        IFoo<IConvertible> foo = new Baz<string>();
    }
} 
```

* * *

[彼得·里奇（Peter Richie](https://stackoverflow.com/users/5620/peter-ritchie)）留下了一条具有足够重要性的评论，它应该成为答案的一部分：

> 方差在 .NET 中一直存在，例如引用类型的数组一直是协变的。同样，自 .NET 2.0 以来，方法组差异一直存在。您所说的是添加到 C# 4 中的通用接口变化能力——在文档中通常称为“泛型中的协变和逆变”。

# php - header() 延迟在 IE 中不起作用

> ID：11853859
> 
> 赞同：1
> 
> 时间：2012-08-07T20:45:25.830
> 
> 标签：php, internet-explorer, header

我无法得到...

```
<?php
   header( "Refresh: 5; URL=http://www.mywebsite.com" );
?> 
```

...在 Internet Explorer 中工作（该死的！）。

它在 Chrome 中运行良好，如果我使用...

```
header("Location: http://www.mywebsite.com"); 
```

...它适用于两者，但我没有延迟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:48:34.840

尝试将其包含为元标记，或通过 JavaScript 重新加载。

元标记：

```
<meta http-equiv="refresh" content="5;URL='http://example.com/'"> 
```

Javascript：

```
window.onload = new function() {
  setTimeout(function() {
    location.reload();
  }, 5000);
}; 
```

# javascript - 动态创建的 div 在 jQuery 中不可用吗？

> ID：11853861
> 
> 赞同：0
> 
> 时间：2012-08-07T20:45:41.103
> 
> 标签：javascript, jquery

所以我根据用户点击的内容更新 div 的内容。有时我显示图像，有时我显示文本：

```
var output;
switch(type)
{
    case IMAGE:
        pages = null;
        contentText = null;
        upArrow = null;
        downArrow = null;

        var imageURL = "assets/images/" + items[itemIndex].imageURL;
        output = '<img src="' + imageURL + '" class="fullImage" />';
        break;

    case TEXT:
        pageIndex = 0;
        pages = items[itemIndex].copy.page;
        numPages = pages.length;
        lastPageIndex = numPages - 1;

        output = '<div id="contentText" class="text"></div>';
        output += '<div id="textUpArrow" class="arrow upArrow"></div>';
        output += '<div id="textDownArrow" class="arrow downArrow"></div>';

        contentText = $("#contentText");

        textUpArrow = $("#textUpArrow");
        textUpArrow.bind(MOUSE_DOWN, onUpArrowClicked);

        textDownArrow = $("#textDownArrow");
        textDownArrow.bind(MOUSE_DOWN, onDownArrowClicked);

        setText();
        break;
}
content.html(output); 
```

这个问题似乎与范围有关。我在我的 JS 文件的根级别声明了 contentText、textUpArrow 和 textDownArrow（我不知道它是否被称为 root，但它在每个函数之外，所以它是全局可用的）。

发生的事情是当我在控制台中输出上述变量时，没有任何东西是未定义的。但是，每当我尝试使用这些变量时，无论是用于事件侦听器还是通过 jQuery 更改它们的 CSS，都没有任何反应。

我应该调查什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:49:42.017

您在将事件添加到 DOM`div` **之前将其绑定到。**那是行不通的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:49:49.073

我想你会想要使用[`.on()`](http://api.jquery.com/on/)而不是`.bind()`. 来自 jQuery [.bind()](http://api.jquery.com/bind/)文档：

> 从 jQuery 1.7 开始，该[`.on()`](http://api.jquery.com/on)方法是将事件处理程序附加到文档的首选方法。对于早期版本，该 `.bind()`方法用于将事件处理程序直接附加到元素。处理程序附加到 jQuery 对象中当前选定的元素，因此这些元素必须存在于调用`.bind()`发生的点。[`.on()`](http://api.jquery.com/on)有关更灵活的事件绑定，请参阅或中有关事件委托的讨论[`.delegate()`](http://api.jquery.com/delegate)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:52:02.087

那是因为您在创建元素之前设置了`contentText`,`textUpArrow`和。`textDownArrow`

```
output = '<div id="contentText" class="text"></div>';
output += '<div id="textUpArrow" class="arrow upArrow"></div>';
output += '<div id="textDownArrow" class="arrow downArrow"></div>';

contentText = $("#contentText"); 
```

这里，`contentText`设置为元素 id`#contentText`的元素，但该元素尚未创建，因此它变为未定义

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T20:48:15.173

何时将输出应用于文档？

如果它在 setText() 中，您可能希望在完成输出文本之后并在设置 contentText 之前调用该方法。

当您尝试设置该变量时，文档中没有具有该 ID 的 div。

# .net - WCF 错误 - '无法获取元数据'

> ID：11853863
> 
> 赞同：1
> 
> 时间：2012-08-07T20:45:50.513
> 
> 标签：.net, wcf, wcf-binding, wcf-configuration

我正在开发我的第一个 WCF 服务，但在尝试在 Visual Studio 中启动该服务时出现错误。因此，它将在 Cassini 下运行。

错误是：

```
Error: Cannot obtain Metadata from http://localhost:1393/BEService.svc 
```

这是我的配置

```
 <behaviors>
        <serviceBehaviors>
            <behavior name="metadataBehavior">
                <serviceMetadata httpGetEnabled="true" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <services>
        <service behaviorConfiguration="metadataBehavior" name="DataServices.BEService">
            <endpoint address="" binding="basicHttpBinding" contract="DataServices.IBEService" />
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
            <host>
                <baseAddresses>
                    <add baseAddress="http://localhost:1393" />
                </baseAddresses>
            </host>
        </service>
    </services> 
```

这是我定义服务合同的接口：

```
 [ServiceContract]
    public interface IBEService
    {
        [OperationContract]
        string Get271EDI(string EDI, DDKSLib.Enums.EDIRequestor requestor);
    } 
```

这是实现它的类：

```
public class BEService : IBEService
    {

        public string Get271EDI(string EDI, Enums.EDIRequestor requestor)
        {
            return "this is a test";
        }
    } 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:13:26.607

也许我弄错了，但我认为当端点为空或相对并且您不使用 IIS 时，您需要使用服务基址，不是吗？

```
<host>
   <baseAddresses>
       <add baseAddress="http://localhost:1393/MyService"/>
   </baseAddresses>
</host> 
```

这是一篇关于[WCF 寻址的文章](http://msdn.microsoft.com/en-us/magazine/cc163412.aspx)

**编辑：**你应该更详细地检查你得到的错误。我认为有一些内部细节可以帮助您解决此案。可能是您的实现中的某些内容不符合 WCF 规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T15:10:27.257

更改 WCF 配置时，编辑器将所有配置移至 app.config 文件。但是，我阅读的很多文章都引用了 web.config 中的配置。因此，我将它们移至 web.config 并删除了 app.config。一切都开始工作了。然后，我遇到了[这个](https://stackoverflow.com/questions/6814082/when-does-wcf-use-app-config-or-web-config)问题，它回答了我关于何时使用 web.config 与 app.config 的问题。

# php - 用于 PHP 部分模板的 Mustache

> ID：11853866
> 
> 赞同：0
> 
> 时间：2012-08-07T20:46:17.440
> 
> 标签：php, templates

我正在尝试使用 Mustache for PHP 做一些 Mustache 模板，但遇到了一个我不知道该怎么做的问题。

我有一个数组，其中有一个名为 Designations 的成员，它可以有大约 6 个值的倍数。我需要为每个名称返回一个带有图像的 html 表。

假设该数组具有以下值：

```
$data = array("Designations"=>"CC,RM,SR", "YearsDesignated" => "1989, 2003, 2006"); 
```

我将如何使用 Mustache 生成这个结果表：

```
<table class="table table-condensed" style="width: 100%;">
  <tbody>
    <tr>
      <td style="text-align:center; width: 16%;"><img src="images/cc-46x40.png" alt=""><br />CC Since: 1989</td>
      <td style="text-align:center; width: 16%;"><img src="images/rm-30x40.png" alt=""><br />RM Since: 2003</td>
      <td style="text-align:center; width: 16%;"><img src="images/sr-40x40.png" alt=""><br />SR Since: 2006</td>
      <td style="text-align:center; width: 16%;">&nbsp;</td>
      <td style="text-align:center; width: 16%;">&nbsp;</td>
      <td style="text-align:center; width: 16%;">&nbsp;</td>
    </tr>
  </tbody>
</table> 
```

我假设使用了 Partial 但不确定如何执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-19T15:45:30.910

最终，我最终这样做了：

**胡子模板：**

```
<table class="table table-condensed" style="width: 100%;">
  <tbody>
    <tr>
    {{# Designations}} 
      <td style="text-align:center; width: 16%;"><img src="images/{{Desig}}-46x40.png" alt=""><br />{{Desig}} Since: {{Year}}</td>
    {{/ Designations}} 
    </tr>
  </tbody>
</table> 
```

**数据：**

```
$data = array("Designations"=>array(
            array("Desig"=>"CIC", "Year"=>1989), 
            array("Desig"=>"CRM", "Year"=>2003), 
            array("Desig"=>"CSRM", "Year"=>2006)
    )
); 
```

**最终渲染：**

```
<table class="table table-condensed" style="width: 100%;">
  <tbody>
    <tr>
      <td style="text-align:center; width: 16%;"><img src="images/CIC-46x40.png" alt=""><br />CIC Since: 1989</td>
      <td style="text-align:center; width: 16%;"><img src="images/CRM-46x40.png" alt=""><br />CRM Since: 2003</td>
      <td style="text-align:center; width: 16%;"><img src="images/CSRM-46x40.png" alt=""><br />CSRM Since: 2006</td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T20:53:33.253

尝试`exploding`数组值

```
$data = array("Designations"=>"CC,RM,SR", "YearsDesignated" => "1989, 2003, 2006");
$array1 = explode(",",$data["Designations"]);
$array2 = explode(",",$data["YearsDesignated"]); 
```

和标记，*虽然没有使用那个特定的库*..

```
echo '<table class="table table-condensed" style="width: 100%;"><tbody><tr>';
foreach($array1 as $offset=>$value){
 echo '<td style="text-align:center; width: 16%;">
       <img src="images/'.strtolower($value).'-thumb.png" alt="">
       <br />'.$value.'Since: '.$array2[$offset].'</td>';
}
echo "</tr></tbody></table>"; 
```

# mobile - TapkuLibrary 的钛金版

> ID：11853867
> 
> 赞同：0
> 
> 时间：2012-08-07T20:46:18.197
> 
> 标签：mobile, titanium, titanium-mobile

是否有用于 Ti 的 TapkuLibrary 端口？
我正在寻找 Titanium 中的日历（视图）控件，但实际上没有什么可以像 Tapku 那样工作。

是否可以在 Titanium 中使用 TapkuLibrary 的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:10:00.970

我认为这仅用于 xCode (SDK) 而不是 Titanium。你可以在 iOS 上使用它，这很好[。](https://github.com/Mritunjaysingh/Titanium-Calendar)和 android 有默认的钛日历功能。

# entity-framework - 将 Linq 用于具有 OrderByDescending 和 SaveChanges 的实体

> ID：11853870
> 
> 赞同：1
> 
> 时间：2012-08-07T20:46:29.667
> 
> 标签：entity-framework, c#-4.0, linq-to-entities

我看到 Linq to Entitites 的行为与我对 Linq 工作原理的理解不一致。请考虑以下代码段：

```
MWGRCEntities entities = new MWGRCEntities();

foreach (EDMXModel.Classes.RiskScoreMetric rsm in entities.RiskScoreMetrics.Where(rsmq.StatusCode != (int)KnownCodes.RiskScoreMetricStatusInActive))
{
    //Magic happens here...
    rsm.ImpactOverall = (rsm.ImpactWorkingGroup + rsm.ImpactExecutive) / 2;
    rsm.LikelihoodOverall = (rsm.LikelihoodWorkingGroup + rsm.LikelihoodExecutive) / 2;
}

int rank = 0;
double prevScore = -1;
double score = -2;
foreach (EDMXModel.Classes.RiskScoreMetric rsm in entities.RiskScoreMetrics.Where(rsmq.StatusCode != (int)KnownCodes.RiskScoreMetricStatusInActive).OrderByDescending(rsmq => Math.Round((Math.Round(rsmq.ImpactOverall, 3) + Math.Round(rsmq.LikelihoodOverall, 3)), 3)))
{
    score = Math.Round((Math.Round(rsm.ImpactOverall, 3) + Math.Round(rsm.LikelihoodOverall, 3)), 3);

    if (score != prevScore)
        rank++;

    rsm.Ranking = rank;
    prevScore = score;
}

entities.SaveChanges(); 
```

我预计 RiskScoreMetric 对象将在第二个 foreach 循环中使用在第一个 foreach 循环中设置的 ImpactOverall 和 LikelihoodOverall 值进行排序。然而，Linq 似乎在第二个 foreach 循环中根据原始 ImpactOverall 和 LikelihoodOverall 值进行排序（如数据库中的值而不是内存中的值）。我可以通过在第二个 foreach 循环之前立即添加对 entity.SaveChanges() 的第二个调用来轻松修复代码。

谁能告诉我这种行为是否是预期的，如果是，为什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:34:09.613

您需要记住，`OrderbyDescending`您在这里使用的是 的扩展方法`IQueryable<T>`，而不是`IEnumerable<T>`. 此扩展方法和您用作此方法参数的 LINQ 表达式 - `rsmq => Math.Round(...)`- 不会在内存中的数据结构/集合上执行，但它仅表示表达式树。该表达式树实际发生的情况取决于数据提供者（在 type 的可查询对象内部引用`IQueryable<T>`）。在实体框架/LINQ to Entities 的情况下，此提供程序会将表达式树转换为 SQL 字符串（取决于该提供程序的详细信息的方言，例如 SQL Server 的 T-SQL、Oracle 的一些其他本机 SQL 方言或MySQL 等）。

翻译后的 SQL 被发送到数据库服务器，并将在数据库引擎中执行，该引擎对您对内存中已加载的实体所做的更改一无所知。

**所有**LINQ to Entities 查询始终根据表中的当前状态和数据值在数据库中执行。他们从不考虑您是否已经加载了实体，它们具有哪些值以及是否已更改。（`DbSet<T>.Find`或者`ObjectSet<T>.GetObjectByKey`是检查具有提供的键的实体是否已加载到内存中的唯一例外，但这些方法不是 LINQ to Entities 查询，尽管它们会发出 LINQ to Entities 查询，即`SingleOrDefault`，如果他们找不到实体已附加到上下文。）

附带说明：将表达式树转换为 SQL 的需要也是您不能在 LINQ to Entites 查询中使用任意 .NET 方法的原因，因为在大多数情况下，无法转换为 SQL 或 LINQ to Entities 提供程序可以不知道怎么翻译。就像是...

```
rsmq => MySpecialRoundMethod(...) 
```

...`MySpecialRoundMethod`您用 C# 编写的自定义方法在哪里可以与 LINQ to Objects（在 an 上`IEnumerable<T>`）一起使用，但不适用于 LINQ to Entities（在 an 上`IQueryable<T>`）。恰好`Math.Round(...)`是实现了对 SQL 的翻译，以便您可以将其与 Entity Framework 一起使用。

# c# - 当我不确定数据的格式/内容时，如何将数据传递给对象？

> ID：11853871
> 
> 赞同：1
> 
> 时间：2012-08-07T20:46:35.293
> 
> 标签：c#, api

**情况：**

我正在寻找一个框架，我将在其中处理数据。数据紧缩的输出将是一个字符串（我的大部分程序都需要它）。我将使用其他人制作的数据处理器。

我有一个看起来像这样的界面：

```
public interface IDataCruncher {
    string Execute( ICruncherInput input );
} 
```

**问题：**

由于每个 DataCruncher 的执行方式不同并且需要不同的输入，因此我采用了将信息传递为 as 的方法`dictionary<string, object>`，但是打包/解包过程实施起来很繁琐，并且对于打包材料而言编译不安全（您可能拼错字典键，或者忘记一个，导致数据处理器崩溃）。

```
public interface ICruncherInput {
    Dictionary<string, object> Data { get; }
} 
```

**问题：**

是否可以在编译时安全的情况下将数据传递给 Data Cruncher 实现，或者至少比从对象强制转换更安全？

有没有办法在代码中定义这些关键合约？（而不是假设字典将包含我需要的键，并在代码之外的文档中定义键）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:51:16.633

看看[动态类型](http://msdn.microsoft.com/en-us/library/dd264736.aspx)，它应该给你一些更健壮和（运行时）编译器安全的东西。

或者您可以使用这样的泛型类型：

```
public interface ICruncherInput <T> {
    Dictionary<string, T> Data { get; }
} 
```

可以这样实现：

```
public CruncherInput : ICruncherInput<YourObject>
{
    Dictionary<string, YourObject> Data { get; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T20:54:50.120

我将数据传递给类的常用方法是将其传递给构造函数。由于构造函数不是接口的一部分，因此实现相同接口的不同类可以具有不同的构造函数签名。

但是，只有在您不通过默认构造函数实例化类时，它才有效。

```
IDataCruncher cruncher1 = new DataCruncherA(x, y, z);
IDataCruncher cruncher2 = new ExcelDataCruncher(pathOfExcelFile);
IDataCruncher cruncher3 = new SampleDataCruncher(); 
```

当然，它是完全类型安全的，如果传递了错误的参数，将不会编译。

# c++ - C++中的二维形状匹配

> ID：11853872
> 
> 赞同：2
> 
> 时间：2012-08-07T20:46:36.713
> 
> 标签：c++, pattern-matching, shape

我有一组连续的点，它们构成一个 2D 形状，我还有另一组可能正在制作类似的形状，但这个形状的比例和旋转与上一个形状不同。匹配和计算这两种形状的相似度得分的最佳方法/选项是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:16:07.490

比较每个形状顶点的角度。如果它们一一匹配，则形状相似。在此过程中，您可能必须“旋转”其中一个形状。记住相似的三角形，它们的角度一一匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:14:23.167

经过几天的研究，我发现最好的东西是[1 美元的手势识别](http://depts.washington.edu/aimgroup/proj/dollar/)器，它是缩放和旋转不变的，并且在包括 C++ 在内的许多语言中都有实现。

# java - Scala 类字段上的 getAnnotations

> ID：11853878
> 
> 赞同：2
> 
> 时间：2012-08-07T20:46:55.547
> 
> 标签：java, scala, reflection

我正在尝试将 Java 库 (JOhm) 与 Scala 一起使用，并注意到当 lib 尝试使用类似`field.isAnnotationPresent(Id.class)`.

注释在 Java 中定义为：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface Id {

} 
```

所以它们应该在运行时可用。但是，如果我尝试：

```
scala> import redis.clients.johm._
import redis.clients.johm._

scala> class myClass(@Id var id: java.lang.Long)
defined class myClass

scala> new myClass(id = null)
res0: myClass = myClass@5157cfbc

scala> res0.getClass.getDeclaredFields
res1: Array[java.lang.reflect.Field] = Array(private java.lang.Long myClass.id)

scala> res0.getClass.getDeclaredFields.map(_.getAnnotations)
res2: Array[Array[java.lang.annotation.Annotation]] = Array(Array()) 
```

然后我设法获取了这些字段（感谢 StackOverflow 用户……），但我仍然无法访问注释。我做错什么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:52:28.830

感谢 'soc' 提供的[参考](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.annotation.meta.package)，有一个明确的答案：“默认情况下，（val-，var-或plain）构造函数参数上的注释最终在参数上......”。

有问题的注释是为具有运行时保留的 FIELD 元素定义的，同时它被应用于 scala 构造函数参数 (PARAMETER)。

我最近遇到了同样的情况，试图在 scala 构造函数“var”参数上使用 JAXB FIELD 级别的 @XmlElement 注释 - 也不适用于我。

我通过在类中定义一个不同的字段并从构造函数的参数列表中对其进行初始化（消除了“val/var”关键字）解决了我的 JAXB 问题。在您的情况下，可能看起来像：

```
class myClass(_id: java.lang.Long) {
    @Id var id = _id
} 
```

该参考文献提出了另外两种选择：

1.  将注释的元素类型更改（添加）为（包括）参数；这只有在来源可用的情况下才可行。

2.  使用[2.9.2 中的目标包（](http://www.scala-lang.org/api/current/index.html#scala.annotation.target.package)已重命名[为 2.10 的元包](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.annotation.meta.package)），将注释重新分类（重新定位）到基础字段（或其他选项）。

# sql - BIDS 数据挖掘性能问题

> ID：11853881
> 
> 赞同：2
> 
> 时间：2012-08-07T20:47:06.293
> 
> 标签：sql, ssis, data-mining, bids

我在使用 Microsoft Business Intelligence Development Studio 和 Data Mining Query Task 时遇到了一个有趣的问题。我有一个包，其中有（除其他外）两个数据挖掘查询任务，它们从现有数据库中获取一些行，对它们执行数据挖掘查询，并将它们附加到同一个数据库。两个数据库都比较小（大约 30,000 行，大约 15 列）。

这在开发服务器上一切都很好，但是当我尝试将所有内容转移到生产环境时遇到了一个奇怪的问题。在每个数据库中特定且一致的行数之后，数据挖掘查询任务挂起（第一个任务的数字是 2001，第二个任务的数字是 5001）。少于这些限制的任何行数都需要几秒钟。再长一点，任务就会超时（2 小时后）。

另一件需要注意的事情是，当我从相同的生产数据库中提取信息但将它们插入到开发服务器上的不同表中时，一切正常。

我只能假设生产数据库中有一些设置搞砸了，但我不知道它可能是什么。可惜我只是个实习生，没有设置系统，也没有完全的访问权限，但是我摸索了一下，没有发现设置有什么实质性的差异。

有人有什么意见或建议吗？任何帮助是极大的赞赏。

编辑：感谢您的回复。我选择了 Build New Query 窗口下的表。但是，我认为实际的案例表不是问题，因为当我将输出表更改为不同服务器上的表时，包执行得很好。这是我使用的查询的精简版本：

```
SELECT FLATTENED

  t.field1,  
  t.field2,  
  t.field3,  
  t.field4,  
  t.field5,  
  t.field6,  
  t.field7,  
  t.field8,  
  t.field9,  
  t.field10,  
  t.field11,  
  t.field12,  
  t.field13,  
  t.field14,  
  t.field15,  
  t.field16,  
  t.field17,  
  t.field18,  
  t.field19,  
  ([MiningModel].[Model Output Column]) as field20,  
  PredictProbability([Model Output Column])  
From  
  [MiningModel]  
PREDICTION JOIN  
  OPENQUERY([Input Table Data Source],  
    'SELECT  
     field1,  
    field2,  
    field3,  
    field4,  
    field5,  
    field6,  
    field7,  
    field8,  
    field9,  
    field10,  
    field11,  
    field12,  
    field13,  
    field14,  
    field15,  
    field16,  
    field17,  
    field18,  
    field19,  
    field 20  
    FROM  
      [Input Table]  
    ') AS t  
ON  
  [MiningModel].[Model Input 1] = t.[field16] AND  
  [MiningModel].[Model Input 2] = t.[field17] AND  
  [MiningModel].[Model Input 3] = t.[field18] AND  
  [MiningModel].[Model Input 4] = t.[field19] AND  
  [MiningModel].[Model Output Column] = t.[field20] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:56:49.293

如果您运行分析器并捕获错误，您会看到[排序警告](http://www.solidq.com/sqj/Pages/Relational/Identifying-and-Solving-Sort-Warnings-Problems-in-SQL-Server.aspx)吗？

你能找出任何不正确的统计数据吗？也许问题在之后消失：

```
UPDATE STATISTICS InputTable WITH FULLSCAN, ALL 
```

# java - 将 Jackson Mixins 与 MappingJacksonHttpMessageConverter 和 Spring MVC 一起使用

> ID：11853883
> 
> 赞同：3
> 
> 时间：2012-08-07T20:47:26.453
> 
> 标签：java, json, spring-mvc, jackson

我会马上解决我真正的问题/问题，**有没有办法访问 HttpMessageConverter 内控制器的处理程序方法上的注释**？我很确定答案是否定的（在浏览了 Spring 的源代码之后）。

使用 MappingJacksonHttpMessageConverter 时，还有其他方法可以配对使用[Jackson](http://wiki.fasterxml.com/JacksonMixInAnnotations) [Mixins](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/http/converter/json/MappingJacksonHttpMessageConverter.html)吗？我已经实现了我自己的基于 MappingJacksonHttpMessageConverter 的 HttpMessageConverter 来“升级”它以使用 Jackson 2.0。

**控制器类**

```
@Controller
public class Controller {

    @JsonFilter({ @JsonMixin(target=MyTargetObject.class, mixin=MyTargetMixin.class) })
    @RequestMapping(value="/my-rest/{id}/my-obj", method=RequestMethod.GET, produces="application/json")
    public @ResponseBody List<MyTargetObject> getListOfFoo(@PathVariable("id") Integer id) {
        return MyServiceImpl.getInstance().getBarObj(id).getFoos();
    }
} 
```

`@JsonFilter`是我希望传递给映射器的自定义注释，然后可以自动将其直接馈送到 ObjectMapper。

**MappingJacksonHttpMessageConverter.class**

```
public class MappingJacksonHttpMessageConverter extends AbstractHttpMessageConverter<Object> {

    ...

    @Override
    protected void writeInternal(Object object, HttpOutputMessage outputMessage) {

            //Obviously, no access to the HandlerMethod here.

    }

    ...
} 
```

我已经广泛搜索了这个答案。到目前为止，我只看到人们在 Controller 的处理方法中将他们的对象序列化为 JSON（在每个方法中都反复违反[DRY 原则）。](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)或者直接注释他们的数据对象（没有解耦或如何公开对象的多重配置）。

可能是无法在 HttpMessageConverter 中完成。还有其他选择吗？拦截器可以访问 HandlerMethod，但不能访问处理程序方法的返回对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:33:02.590

**这不是理想的解决方案。请参阅我的第二个答案。**

我使用`ModelAndViewResolver`. 您可以直接使用 注册这些，并且`AnnotationMethodHandlerAdapter`知道它们总是在默认处理发生之前首先启动。因此，Spring的文档 -

```
/**
 * Set a custom ModelAndViewResolvers to use for special method return types.
 * <p>Such a custom ModelAndViewResolver will kick in first, having a chance to resolve
 * a return value before the standard ModelAndView handling kicks in.
 */
public void setCustomModelAndViewResolver(ModelAndViewResolver customModelAndViewResolver) {
    this.customModelAndViewResolvers = new ModelAndViewResolver[] {customModelAndViewResolver};
} 
```

查看`ModelAndViewResolver`接口，我知道它包含将某些功能扩展到处理程序方法的工作方式所需的所有参数。

```
public interface ModelAndViewResolver {

    ModelAndView UNRESOLVED = new ModelAndView();

    ModelAndView resolveModelAndView(Method handlerMethod,
            Class handlerType,
            Object returnValue,
            ExtendedModelMap implicitModel,
            NativeWebRequest webRequest);
} 
```

看看所有那些美味的论点`resolveModelAndView`！我几乎可以访问 Spring 知道的关于请求的所有内容。以下是我实现接口的`MappingJacksonHttpMessageConverter`方式，以单向方式（向外）与除了非常相似的行为：

```
public class JsonModelAndViewResolver implements ModelAndViewResolver {

    public static final Charset DEFAULT_CHARSET = Charset.forName("UTF-8");

    public static final MediaType DEFAULT_MEDIA_TYPE = new MediaType("application", "json", DEFAULT_CHARSET);

    private boolean prefixJson = false;

    public void setPrefixJson(boolean prefixJson) {
        this.prefixJson = prefixJson;
    }

    /**
     * Converts Json.mixins() to a Map<Class, Class>
     *
     * @param jsonFilter Json annotation
     * @return Map of Target -> Mixin classes
     */
    protected Map<Class<?>, Class<?>> getMixins(Json jsonFilter) {

        Map<Class<?>, Class<?>> mixins = new HashMap<Class<?>, Class<?>>();

        if(jsonFilter != null) {
            for(JsonMixin jsonMixin : jsonFilter.mixins()) {
                mixins.put(jsonMixin.target(), jsonMixin.mixin());
            }
        }

        return mixins;
    }

    @Override
    public ModelAndView resolveModelAndView(Method handlerMethod, Class handlerType, Object returnValue, ExtendedModelMap implicitModel, NativeWebRequest webRequest) {

        if(handlerMethod.getAnnotation(Json.class) != null) {

            try {

                HttpServletResponse httpResponse = webRequest.getNativeResponse(HttpServletResponse.class);

                httpResponse.setContentType(DEFAULT_MEDIA_TYPE.toString());

                OutputStream out = httpResponse.getOutputStream();

                ObjectMapper objectMapper = new ObjectMapper();

                objectMapper.setMixInAnnotations(getMixins(handlerMethod.getAnnotation(Json.class)));

                JsonGenerator jsonGenerator =
                        objectMapper.getJsonFactory().createJsonGenerator(out, JsonEncoding.UTF8);

                if (this.prefixJson) {
                    jsonGenerator.writeRaw("{} && ");
                }

                objectMapper.writeValue(jsonGenerator, returnValue);

                out.flush();
                out.close();

                return null;

            } catch (JsonProcessingException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        return UNRESOLVED;
    }

} 
```

上面使用的唯一自定义类是我的注释类`@Json`，其中包含一个名为`mixins`. 这是我在控制器端实现它的方法。

```
@Controller
public class Controller {

    @Json({ @JsonMixin(target=MyTargetObject.class, mixin=MyTargetMixin.class) })
    @RequestMapping(value="/my-rest/{id}/my-obj", method=RequestMethod.GET)
    public @ResponseBody List<MyTargetObject> getListOfFoo(@PathVariable("id") Integer id) {
        return MyServiceImpl.getInstance().getBarObj(id).getFoos();
    }
} 
```

这是一些非常棒的简单性。ModelAndViewResolver 将自动将返回对象转换为 JSON 并应用带注释的 mix-ins。

由于新的 3.0 标签不允许直接配置 ModelAndViewResolver。也许他们只是忽略了这一点？

**我的旧配置（使用 Spring 3.1 样式）**

```
<mvc:annotation-driven /> 
```

**我的新配置（使用 Spring 2.5 风格**）

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"> 
    <property name="customModelAndViewResolvers">
        <list>
            <bean class="my.package.mvc.JsonModelAndViewResolver" />
        </list>
    </property>
</bean> 
```

^^ 3.0+ 无法连接自定义 ModelAndViewResolver。因此，切换回旧样式。

这是自定义注释：

**json**

```
@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
public @interface Json {

    /**
     * A list of Jackson Mixins.
     * <p>
     * {@link http://wiki.fasterxml.com/JacksonMixInAnnotations}
     */
    JsonMixin[] mixins() default {};

} 
```

**JsonMixin**

```
public @interface JsonMixin {
    public Class<? extends Serializable> target();
    public Class<?> mixin();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:19:42.693

在下面发布答案后，我改变了我的做法。我用了一个`HandlerMethodReturnValueHandle`r。我必须创建一个编程 Web 配置来覆盖顺序，因为自定义返回值处理程序是最后触发的。我需要在默认值之前触发它们。

```
@Configuration
public class WebConfig extends WebMvcConfigurationSupport {
   ...
} 
```

希望这将引导某人比我在下面的答案更好的方向。

这使我可以将任何对象直接序列化为 JSON。在 @RequestMapping hasproduces="application/json" 中，我总是将返回值序列化为 JSON。

我对参数绑定做了同样的事情，只是我使用了`HandlerMethodArgumentResolver`. 只需使用您选择的注释来注释您的类（我使用 JPA @Entity 因为我通常会序列化为模型）。

您现在可以在 Spring 控制器中无缝 POJO 到 JSON 反/序列化，而无需任何样板代码。

奖励：我拥有的参数解析器将检查参数的 @Id 标记，如果 JSON 包含 Id 的键，则检索实体并将 JSON 应用于持久对象。巴姆。

```
/**
 * De-serializes JSON to a Java Object.
 * <p>
 * Also provides handling of simple data type validation.  If a {@link JsonMappingException} is thrown then it
 * is wrapped as a {@link ValidationException} and handled by the MVC/validation framework.
 *
 * @author John Strickler
 * @since 2012-08-28
 */
public class EntityArgumentResolver implements HandlerMethodArgumentResolver {

    @Autowired
    private SessionFactory sessionFactory;

    private final ObjectMapper objectMapper = new ObjectMapper();

    private static final Logger log = Logger.getLogger(EntityArgumentResolver.class);

    //whether to log the incoming JSON
    private boolean doLog = false;

    @Override
    public boolean supportsParameter(MethodParameter parameter) {
        return parameter.getParameterType().getAnnotation(Entity.class) != null;
    }

    @Override
    public Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer, NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception {

        HttpServletRequest request = webRequest.getNativeRequest(HttpServletRequest.class);
        String requestBody = IOUtils.toString(request.getReader());
        Class<?> targetClass = parameter.getParameterType();
        Object entity = this.parse(requestBody, targetClass);
        Object entityId = getId(entity);

        if(doLog) {
            log.info(requestBody);
        }

        if(entityId != null) {
            return copyObjectToPersistedEntity(entity, getKeyValueMap(requestBody), entityId);
        } else {
            return entity;
        }
    }

    /**
     * @param rawJson a json-encoded string
     * @return a {@link Map} consisting of the key/value pairs of the JSON-encoded string
     */
    @SuppressWarnings("unchecked")
    private Map<String, Object> getKeyValueMap(String rawJson) throws JsonParseException, JsonMappingException, IOException {
        return objectMapper.readValue(rawJson, HashMap.class);
    }

    /**
     * Retrieve an existing entity and copy the new changes onto the entity.
     *
     * @param changes a recently deserialized entity object that contains the new changes
     * @param rawJson the raw json string, used to determine which keys were passed to prevent
     *                copying unset/null values over to the persisted entity
     * @return the persisted entity with the new changes copied onto it
     * @throws NoSuchMethodException
     * @throws SecurityException
     * @throws InvocationTargetException
     * @throws IllegalAccessException
     * @throws IllegalArgumentException
     */
    private Object copyObjectToPersistedEntity(Object changesObject, Map<String, Object> changesMap, Object id) throws SecurityException, NoSuchMethodException, IllegalArgumentException, IllegalAccessException, InvocationTargetException {

        Session session = sessionFactory.openSession();

        Object persistedObject =
                session.get(changesObject.getClass(), (Serializable) id);

        session.close();

        if(persistedObject == null) {
            throw new ValidationException(changesObject.getClass().getSimpleName() + " #" + id + " not found.");
        }

        Class<?> clazz = persistedObject.getClass();

        for(Method getterMethod : ReflectionUtils.getAllDeclaredMethods(clazz)) {

            Column column = getterMethod.getAnnotation(Column.class);

            //Column annotation is required
            if(column == null) {
                continue;
            }

            //Is the field allowed to be updated?
            if(!column.updatable()) {
                continue;
            }

            //Was this change a part of JSON request body?
            //(prevent fields false positive copies when certain fields weren't included in the JSON body)
            if(!changesMap.containsKey(BeanUtils.toFieldName(getterMethod))) {
                continue;
            }

            //Is the new field value different from the existing/persisted field value?
            if(ObjectUtils.equals(getterMethod.invoke(persistedObject), getterMethod.invoke(changesObject))) {
                continue;
            }

            //Copy the new field value to the persisted object
            log.info("Update " + clazz.getSimpleName() + "(" + id + ") [" + column.name() + "]");

            Object obj = getterMethod.invoke(changesObject);

            Method setter = BeanUtils.toSetter(getterMethod);

            setter.invoke(persistedObject, obj);

        }

        return persistedObject;
    }

    /**
     * Check if the recently deserialized entity object was populated with its ID field
     *
     * @param entity the object
     * @return an object value if the id exists, null if no id has been set
     */
    private Object getId(Object entity) throws IllegalArgumentException, IllegalAccessException, InvocationTargetException {

        for(Method method : ReflectionUtils.getAllDeclaredMethods(entity.getClass())) {
            if(method.getAnnotation(Id.class) != null) {
                method.setAccessible(true);
                return method.invoke(entity);
            }
        }

        return null;
    }

    private <T> T parse(String json, Class<T> clazz) throws JsonParseException, IOException {
        try {
            return objectMapper.readValue(json, clazz);
        } catch(JsonMappingException e) {
            throw new ValidationException(e);
        }
    }

    public void setDoLog(boolean doLog) {
        this.doLog = doLog;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-07T18:39:27.887

我不知道这是由于我使用的 Spring 版本（5）还是我做错了什么，但这里的答案对我不起作用。我最终做的是用所需的 ObjectMapper 注册一个 RequestResponseBodyMethodProcessor。

PushCard.getObjectMapperForDTO() 是我的方法，它返回一个已经拥有正确 Mixins 的 ObjectMapper。您显然可以使用自己的方法，根据需要进行配置。

我的配置类看起来像这样。

```
@EnableWebMvc
@Configuration
public class SidekickApplicationConfiguration implements WebMvcConfigurer {
    private static Logger logger = LoggerFactory.getLogger(SidekickApplicationConfiguration.class);

    @Autowired
    private RequestMappingHandlerAdapter requestHandler;

    @Bean
    RequestResponseBodyMethodProcessor registerReturnValueHandler() {
        List<HttpMessageConverter<?>> messageConverters = new ArrayList<>();
        messageConverters.add(new MappingJackson2HttpMessageConverter(PushCard.getObjectMapperForDTO()));

        logger.info("Registering RequestResponseBodyMethodProcessor with DTO ObjectMapper...");
        RequestResponseBodyMethodProcessor r = new RequestResponseBodyMethodProcessor(messageConverters);
        requestHandler.setReturnValueHandlers(Arrays.asList(r));
        return r;
    }
} 
```

# javascript - jQuery Mobile 内部页面问题

> ID：11853886
> 
> 赞同：2
> 
> 时间：2012-08-07T20:47:37.307
> 
> 标签：javascript, jquery, html, ajax, jquery-mobile

我正在使用 jQuery Mobile 中的内部页面功能，它可以正常工作，但仅限于特定情况。应用程序中的大多数链接都使用 jQuery 的“标准”加载功能（通过 AJAX 加载所需的页面，并将第一个容器`data-role="page"`放置在 DOM 中）。

但是，有几个页面包含多个带有 的容器`data-role="page"`，这些容器旨在用作内部页面。换句话说，`page`HTML 文档中的第一个容器包含链接，这些链接将在内部链接到 DOM 中的其他页面。

使用上述“标准”加载方法，内部链接不起作用。但是，重新加载页面以加载整个 DOM 可以解决此问题。

我知道我可以通过在链接中添加一个属性来链接到该页面`rel="external"`，但是这样做会删除 jQuery Mobile 通过“标准”加载方法提供的所有漂亮转换。

如何在不添加`rel="external"`属性的情况下解决此问题？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T22:11:31.317

我发现此解决方案是处理我的情况的最有效方式。它不需要在锚标记上使用类来指示链接是否包含单独的页面。此代码将仅在单个 HTTP 请求中查找其他页面。

Jasper 让我的轮子朝着正确的方向旋转。

```
(function($) {
/**
 * This code will load all of the internal pages within the DOM of an HTML element
 * and transition the first one into place, just as the "standard" way of loading
 * a page, but it includes all internal pages
*/

  $(document).bind('pageload', function(event, ui) {
  //Find all of the pages and dialogs in the DOM
    var response = ui.xhr.responseText;
    var data = $(response).filter('section[data-role="page"], section[data-role="dialog"]');

  //Make sure that the given psuedo page does not already exist before adding it
  //Skip the first matched element, since jQM automatically inserted it for us
    for (var i = 1; i <= data.length - 1; i++) {
      var current = data.eq(i);

      if (current.attr('id') && !document.getElementById(current.attr('id'))) {
        current.appendTo('body');
      }
    }
  });
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:05:32.117

默认情况下，jQuery Mobile 只加载外部文档中的第一个`data-role="page"`或第一个元素。`data-role="dialog"`该`<head>`部分甚至被省略。

解决方法是将所有页面放入单个 HTML 文档中，或者将每个伪页面放入它自己的 HTML 文档中。

您可以编写一些代码来手动抓取外部文档中的所有伪页面：

HTML --

```
<a class="multi-page-link" href="some-external-document.html"></a> 
```

JS——

```
//when a pseudo-page initializes this code will run
$(document).delegate('.ui-page', 'pageinit', function () {

    //find elements tagged with the above class and bind to their `click` events
    $(this).find('.multi-page-link').bind('click', function () {

        //show the loading spinner
        $.mobile.showPageLoadingMsg();

        //create AJAX request for href of link
        $.ajax({
            url      : this.href,
            dataType : 'html',
            success  : function (response) {

                //on successful response, find all the pseudo-page elements in the external document and append them to the `<BODY>`
                var $pseudoPages = $(response).filter('[data-role="page"], [data-role="dialog"]').appendTo('body');

                //now hide the loading spinner
                $.mobile.hidePageLoadingMsg();

                //and navigate to the first pseudo-page that was just added to the DOM
                $.mobile.changePage($pseudoPages.eq(0));
            },
            error    : function (a, b, c) { /*Don't for get to handle errors*/ }
        });
        return false;
    });
}); 
```

我认为有一个插件可以解决这个问题，但我不知道它在哪里或者它是否被支持。

# git - 在 Git 存储库中隐藏 mysql 连接数据

> ID：11853888
> 
> 赞同：1
> 
> 时间：2012-08-07T20:47:45.720
> 
> 标签：git, security, github

我在 Github 上有一个公共存储库。这是一个在线网络服务。我们只想分享我们的网络服务的源代码。我们将所有连接数据和函数存储在`connect.php`文件中。并在必要时将其包含到其他文件中。我们希望对除存储库合作者之外的所有访问者隐藏此文件。

是否可以？还是有其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:49:40.883

您要做的是阻止 Git 跟踪文件更改。

1.  将任何敏感字符串从`connect.php`名为`config.php`
2.  填写示例字符串
3.  包括`config.php`在`connect.php`
4.  提交给 Git
5.  用于`git update-index --assume-unchanged <file>`停止跟踪此文件的更新。
6.  使用您的生产字符串更新文件
7.  如果您需要再次跟踪更改，请使用`git update-index --no-assume-unchanged <file>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:51:22.667

在您的文件夹中放置一个名为 .gitignore 的文件，其中包含您要忽略的文件的名称！

# sql-server - 在 SQL Server 中每 4 位添加空格的标量函数

> ID：11853892
> 
> 赞同：2
> 
> 时间：2012-08-07T20:48:22.047
> 
> 标签：sql-server, scalar

大家好，我正在尝试创建一个函数，该函数将一个值作为参数，然后将其格式化为每 4 位添加空格。

例如，数字 1111222233334444 应返回为“1111 2222 3333 4444”。

我需要这样做，因为我从 .net 导出到 .xls 并且 excel 会自动检测到一个大数并将其转换为指数数。

使用与以前相同的数字，Excel 将其转换为 .. 1.111E+15。

有了这个值，由于空格，程序会将该值识别为字符串值，并且不会转换为指数，当然，除非有一种我没有想到的更简单的方法来做到这一点。我还是个新手。

提前谢谢。再会。

**编辑：这就是我导出到 Excel 的方式。**

```
GridView gv = new GridView();
    gv.AllowPaging = false;
    gv.AllowSorting = false;
    gv.AutoGenerateColumns = false;

    ArrayList arColumns = getData(Request.QueryString["report"].ToString());
    int i = 0;
    if (arHeaders.Count > 0)
    {
        foreach (string column in arColumns)
        {
            BoundField bf = new BoundField();
            bf.HeaderText = arHeaders[i].ToString();
            if (bf.HeaderText.ToLower().Contains("fecha"))
            {
                bf.DataFormatString = "{0:dd/MM/yyyy}";
                bf.HtmlEncode = false;
            }
            bf.DataField = column;
            gv.Columns.Add(bf);      

            i++;
        }
gv.RowDataBound += new GridViewRowEventHandler(gv_RowDataBound);
        gv.DataSource = getDataTable();
        gv.DataBind();
}

Response.Clear();

Response.AddHeader("content-disposition", "attachment;filename=Reporte" +lblTitle.Text + DateTime.Today.ToShortDateString() + ".xls");

Response.Charset = "";

Response.ContentType = "application/vnd.ms-excel";
System.IO.StringWriter stringWrite = new System.IO.StringWriter();

System.Web.UI.HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite);
ClearControls(gv);
gv.RenderControl(htmlWrite);
Response.Write(stringWrite.ToString());

Response.End(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:08:32.507

正如@Lamak 所提到的，excel 可能正确存储了值，您可能只需要更改 excel 中列的格式。此外，这样做是因为 SQL 可能不会执行得那么好——也许是错误的工具？

但是为了有趣的 SQL 挑战，如果您想在 T-SQL 中执行此操作，您可以使用[STUFF](http://msdn.microsoft.com/en-us/library/ms188043.aspx)函数递归地将空格添加到字符串中。从性能的角度来看，最好在这样的一组字符串上执行此操作：

架构：

```
create table strings (string nvarchar(max))
insert into strings (string) 
values ('1111222233334444'),('1234567890'),('234234') 
```

询问：

```
;with r as (

  select s.string, ceiling(len(s.string)/4.) as spaces, 1 as iteration 
  from strings s

  union all

  select stuff(r.string,(r.iteration*4)+r.iteration,0,' ')
    , r.spaces, r.iteration + 1
  from r
  where r.iteration < r.spaces

)
select r.string
from r
where r.spaces = r.iteration 
```

我真的不建议在标量值函数中执行此操作，因为它们[会影响您的性能](http://my.safaribooksonline.com/book/databases/microsoft-sql-server/9781617290473/database-development/ch20#X2ludGVybmFsX0ZsYXNoUmVhZGVyP3htbGlkPTk3ODE2MTcyOTA0NzMvY2gyMA==)。但如果你必须...

```
create function GetExplodedString(@input_string nvarchar(max))
returns nvarchar(max)
as begin

    declare @output_string nvarchar(max)

    ;with r as (

      select @input_string as string, ceiling(len(@input_string)/4.) as spaces, 1 as iteration 

      union all

      select stuff(r.string,(r.iteration*4)+r.iteration,0,' ')
        , r.spaces, r.iteration + 1
      from r
      where r.iteration < r.spaces

    )
    select @output_string = r.string
    from r
    where r.spaces = r.iteration

    return @output_string
end

select dbo.GetExplodedString('1111222233334444') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:28:33.387

如果您在值前面加上撇号，`'`excel 会将其视为字符串。

# c# - 仅更改 MenuItem 单选按钮和复选框

> ID：11853896
> 
> 赞同：0
> 
> 时间：2012-08-07T20:48:45.310
> 
> 标签：c#, wpf, xaml, menuitem, controltemplate

对于分隔符，可以仅更改此内容，这些内容包含在 MenuItem 中。因此我不得不使用：

```
<Style TargetType="{x:Type Separator}" x:Key="{x:Static MenuItem.SeparatorStyleKey}"> 
```

menuitem 和 RadioButton 有类似的东西吗？另一个问题是，这只能在 windows7 下正常工作，而不能在 windows XP 下正常工作。我稍后发布整个代码，但我不必用键指定分隔符。它是这样工作的——在windows7下。在 windows xp 中，颜色变为，但一个奇怪的透明边框是关于整个分隔符的。但我只画了一个边框，用我的分隔符控件模板中的颜色填充它，而不是两个！

我可以在某个地方找到 MenuItem 的子“样式键”吗？vs 在这一点上没有智慧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:17:13.133

这是完整的代码：

```
<Style TargetType="{x:Type Separator}" x:Key="{x:Static MenuItem.SeparatorStyleKey}">
    <Setter Property="Background" Value="{Binding Path=Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Menu}}}"/>
    <Setter Property="Focusable" Value="false"/>
    <Setter Property="OverridesDefaultStyle" Value="True" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Separator}">
                    <Border Background="{TemplateBinding Background}"
                            SnapsToDevicePixels="True" 
                            Height="2"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

windows xp 的问题是，我没有覆盖默认样式。

带有单选按钮和复选框的另一个问题始终存在

另一个问题是，我必须覆盖网格背景的默认样式。我必须在网格的背景上用颜色画一条线并包含默认内容。该行不应该在每个窗口手动添加，应该在应用程序的每个窗口的相同位置。

但这条线应该只是一条线，而不是填满整个窗口，我不知道窗口的宽度和高度。我可以使用吗？有什么例子吗？

# java - Glassfish 3.1.2.2 上 Web 应用程序的上下文路径

> ID：11853901
> 
> 赞同：7
> 
> 时间：2012-08-07T20:48:56.530
> 
> 标签：java, jakarta-ee, glassfish, glassfish-3

我正在尝试找到一种方法来明确指定部署到 Glassfish 3.1.2.2 的 Web 应用程序的上下文路径，但到目前为止我还没有运气。任何人都可以提供这方面的指导吗？其背景如下：

我有一个由两个独立的 Netbeans (7.0) 项目组成的 Web 应用程序。第一个是 Web 服务，称为 FooWS。第二个是使用 FooWS 网络服务的面向用户的网络应用程序。它被称为 FooApp。

我最近将 glassfish 升级到 3.1.2.2，希望能解决一些其他问题，现在当我部署 FooWS 应用程序时，它部署成功，但使用上下文路径 /web 而不是 /FooWS。这不是我特别关心的事情，除了当我尝试部署 FooApp 时，glassfish 也尝试将其部署到 /web 导致以下错误：

严重：加载应用程序时出现异常：java.lang.Exception：WEB0113：虚拟服务器 [server] 已经在 [/web] 加载了一个 Web 模块 [FooWS]；因此无法在此虚拟服务器上的此上下文路径中加载 Web 模块 [FooApp]。

FooApp 的 web.xml 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>defaultWebRootId</param-name>
        <param-value>2631</param-value>
    </context-param>

    <listener>
        <listener-class>com.foo.service.AppInitialiser</listener-class>
    </listener>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

FooWS 的配置类似。两者都没有提到应用程序上下文，所以我的期望是它应该使用 /FooWS 而不是默认使用 /web。

显而易见的解决方案似乎是覆盖 web.xml 中的上下文路径，但我找不到任何这样做的方法。有什么建议么？

只是一些跟进，我不小心将上下文路径更改为 /FooW。这次它按预期部署到 /FooW。如果 /FooWS 导致旧行为返回，则将其更改回来，也就是说，它再次部署到 /web。看来我目前有一个解决方法。

为了遵循此操作的任何人的利益，我在 3.1.2 中得到了相同的行为。我现在已经回到 3.1 (b43) 并且它的行为符合预期。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-08T16:22:43.343

在与 web.xml 相同的文件夹中添加 glassfish-web.xml 文件

```
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app error-url="">
    <context-root>/FooWS</context-root>
</glassfish-web-app> 
```

# sql - Teradata 快速加载脚本问题 - 日期格式错误 2665

> ID：11853913
> 
> 赞同：0
> 
> 时间：2012-08-07T20:49:43.223
> 
> 标签：sql, datetime, teradata

我有一个给我带来问题的快速加载脚本。我是 teradata 新手，不知道如何正确格式化日期。日期列当前在 excel (csv) 中格式化为："12/31/2011"。

我的脚本如下：

```
BEGIN LOADING "table"
    ERRORFILES "errors1", "errors2";

SET RECORD VARTEXT ",";

DEFINE PERD_END_RPT_DT   (VARCHAR(20)),  <---- date column returning the error
       RPT_PERD_TYPE_CD  (VARCHAR(20)),
       PERD_NM       (VARCHAR(30)),
       QTR_NUM           (VARCHAR(2)),
       YEAR_NUM          (VARCHAR(4)),
       RPT_PERD_TYPE_NM  (VARCHAR(10)),
       DATA_VLDTN_IND    (VARCHAR(1)),
       EDW_PUBLN_ID      (VARCHAR(18)) 

FILE=C:\pathtofile\file.csv;

INSERT INTO "table" ( PERD_END_RPT_DT, RPT_PERD_TYPE_CD, PERD_NM, QTR_NUM, YEAR_NUM, RPT_PERD_TYPE_NM,
                          DATA_VLDTN_IND, EDW_PUBLN_ID )
    VALUES ( :PERD_END_RPT_DT, :RPT_PERD_TYPE_CD, :PERD_NM, :QTR_NUM, :YEAR_NUM, :RPT_PERD_TYPE_NM,
                          :DATA_VLDTN_IND, :EDW_PUBLN_ID ) ;

END LOADING ;
LOGOFF ; 
```

那么应该如何格式化日期以及如何修改我的脚本以使其工作？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:21:26.293

尝试这个：

```
BEGIN LOADING "table"
    ERRORFILES "errors1", "errors2";

SET RECORD VARTEXT ",";

DEFINE PERD_END_RPT_DT   (VARCHAR(20)),  -- date column returning the error
       RPT_PERD_TYPE_CD  (VARCHAR(20)),
       PERD_NM           (VARCHAR(30)),
       QTR_NUM           (VARCHAR(2)),
       YEAR_NUM          (VARCHAR(4)),
       RPT_PERD_TYPE_NM  (VARCHAR(10)),
       DATA_VLDTN_IND    (VARCHAR(1)),
       EDW_PUBLN_ID      (VARCHAR(18)) 

FILE=C:\pathtofile\file.csv;

INSERT INTO "table" ( PERD_END_RPT_DT, RPT_PERD_TYPE_CD, PERD_NM, QTR_NUM, YEAR_NUM, RPT_PERD_TYPE_NM, DATA_VLDTN_IND, EDW_PUBLN_ID )
    VALUES ( CAST(:PERD_END_RPT_DT AS DATE FORMAT 'mm/dd/yyyy') -- Changed here
           , :RPT_PERD_TYPE_CD
           , :PERD_NM
           , :QTR_NUM'
           , :YEAR_NUM
           , :RPT_PERD_TYPE_NM 
           , :DATA_VLDTN_IND
           , :EDW_PUBLN_ID ) ;

END LOADING ;
LOGOFF ; 
```

# c# - 检测是否安装了 WIF 运行时的最佳方法

> ID：11853915
> 
> 赞同：5
> 
> 时间：2012-08-07T20:49:46.420
> 
> 标签：c#, asp.net, wif

我的 ASP.Net 应用程序的几页使用 WIF 直接连接到另一个服务。WIF 只是在这里取得进展，虽然它安装在测试和生产服务器上，但每次新程序员或测试人员获得最新版本并且碰巧在没有在其机器上安装 WIF 运行时的情况下访问这些页面时，他都会获得 YSOD 和一个关于找不到 Microsoft.IdentityModel 的错误......他们从未阅读过，而是启动了一个 IM，告诉我我的应用程序已损坏。

我想检测是否安装了 WIF 运行时，如果没有安装，则显示每条有用的错误消息并链接到下载页面。我不想检查特定的 .dll 路径，因为这可能会改变……而且 3.5 和 4.0 已经有不同的路径。

是否有最好的方法来检测是否安装了 WIF 运行时？

（显然在一个没有引用它的页面中......如果没有安装它就无法正确显示）

**编辑**

看起来[WIF 包含在 4.5 的框架中，](http://blogs.msdn.com/b/vbertocci/archive/2012/03/15/windows-identity-foundation-in-the-net-framework-4-5-beta-tools-samples-claims-everywhere.aspx)因此特定于 3.5/4.0 的方法就可以了。无需面向未来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-22T04:40:11.377

微软官方评论：

```
Q: Under what registry key is WIF installed?
A: HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsIdentityFoundation\setup\v3.5\. 
```

参考[这里](http://msdn.microsoft.com/en-us/library/ee748487.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T19:07:29.967

我会尝试在 try/catch -block 中从 GAC 加载 Microsoft.IdentityModel.dll 或更好，只需捕获当前没有 WIF 运行时的特定异常用户，然后使用它来将用户重定向到特定错误页面/信息。

要回答您的确切问题 - 有没有办法检测是否存在正确的 WIF 安装包：如果您的应用程序可以访问注册表（至少在只读模式下），也可以检查 Windows Identity Foundation 相关项目是否存在出现在 SOFTWARE\Microsoft\Windows Identity Foundation（以及 64 位系统的相关 Wow6432Node）中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T21:40:56.277

1.  您可以将 WIF 库与您的应用程序捆绑在一起。
2.  您可以在那里使用 WebPI 并参考 WIF SDK。
3.  也许如果您尝试从 GAC 加载程序集就可以了。[仅反射装配加载](http://blogs.msdn.com/b/junfeng/archive/2004/08/24/219691.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T15:48:58.927

在检查了 Microsoft 的一些安装程序以查看他们如何检测到 WIF 运行时的存在之后，我采用了上述答案中的注册表检查建议，这就是他们所做的一切。

这是我的选择：

```
/// <summary>
/// Determines if WIF is installed on the machine.
/// </summary>
public static class WifDetector
{
    /// <summary>
    /// Gets a value indicating that WIF appears to be installed.
    /// </summary>
    public static bool WifInstalled { get; private set; }

    static WifDetector()
    {
        WifInstalled = IsWifInstalled();
    }

    private static bool IsWifInstalled()
    {
        try
        {
            //return File.Exists(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles),
            //                                "Reference Assemblies\\Microsoft\\Windows Identity Foundation\\v3.5\\Microsoft.IdentityModel.dll"));
            //The registry approach seems simpler.
            using( var registryKey = Registry.LocalMachine.OpenSubKey("SOFTWARE\\Wow6432Node\\Microsoft\\Windows Identity Foundation") ?? 
                                     Registry.LocalMachine.OpenSubKey("SOFTWARE\\Microsoft\\Windows Identity Foundation") )
            {
                return registryKey != null;
            }
        }
        catch
        {
            //if we don't have permissions or something, this probably isn't a developer machine, hopefully the server admins will figure out the pre-reqs.
            return true;
        }
    }
} 
```

然后在基础页或母版页中检查值，并让用户知道。实际检查只在类型初始化器中执行一次，之后它只是简单的静态属性访问。

```
 private void CheckWifInstallation()
    {
        if (!WifDetector.WifInstalled)
        {
            var alert = new ClientSideAlert(
                    "This application requires the Windows Identity Foundation runtime to be installed on the webserver:\n");
            alert.AddMessageLine("Please install the appropriate WIF runtime for this operating system by visiting:\n");
            alert.AddMessageLine("http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=17331 \n");
            alert.AddMessageLine("or simply search for 'WIF runtime install'\n");
            alert.AddMessageLine("Thanks, and have a nice day!'");
            alert.Display(Page);
        }
    } 
```

我们没有用于开发人员机器的精美 Web 部署包，它只是从源代码获取并运行。这将使没有此库的开发人员在遇到 YSOD 和晦涩的程序集加载错误时不会浪费时间。

感谢您的建议。

# slickgrid - Slickgrid 水平滚动条在 IE9 中添加随机空白

> ID：11853919
> 
> 赞同：0
> 
> 时间：2012-08-07T20:50:05.047
> 
> 标签：slickgrid

在测试此问题的修复程序时：

[Slickgrid 水平滚动条覆盖最后一行](https://stackoverflow.com/q/11806720/141172)

我注意到更新后的代码会导致 IE9 中水平滚动条下方的“随机”空白。jsFiddle 不能在浏览器模式设置为 IE7 的 IE9 中运行（*SCRIPT1028: Expected identifier, string or number*）

错误*未见*于：

*   铬（当前）
*   野生动物园（当前）
*   火狐（当前）
*   带有浏览器模式的 IE 9 IE8

小提琴演示问题（在**IE9**中查看）：

[http://jsfiddle.net/ericjohannsen/LtsvJ/9/](http://jsfiddle.net/ericjohannsen/LtsvJ/9/)

[为GitHub 上](https://github.com/mleibman/SlickGrid/issues/414)的相应票证添加了评论，但没有重新打开它的权限。

*注意：slick.grid.js 托管在我自己的服务器上，因为 IE9 抱怨 [https://raw.github.com/mleibman/SlickGrid/master/slick.grid.js](https://raw.github.com/mleibman/SlickGrid/master/slick.grid.js) 报告了错误的 MIME 类型并拒绝加载它。该代码对应于更改 [https://github.com/mleibman/SlickGrid/commit/6d3b8a0844a0ef8528b11e67ef0bd0f5265d1c7b](https://github.com/mleibman/SlickGrid/commit/6d3b8a0844a0ef8528b11e67ef0bd0f5265d1c7b)*

**更新**

**IE7 浏览器模式下的 IE9**

IE9 的 IE7 浏览器模式中存在一个 JavaScript 错误，导致网格完全无法呈现。但是，IE9 控制台中的调用堆栈是空的。错误是

```
SCRIPT1028: Expected identifier, string or number  
show, line 90 character 1 
```

单击 JS 控制台中的链接会出现错误*Source code is not available for this location*。

**IE9 常规模式**

添加了来自 IE9 的屏幕截图。请注意，在 IE9 中没有报告 JavaScript 错误。

![在此处输入图像描述](../Images/48aa71409ddb0da059096aa051ae3ba3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T20:53:40.057

仅当您托管自己的 slick.grid.js 时才会发生这种情况。在我将您的 jsfiddle 更改为包含[http://mleibman.github.com/SlickGrid/slick.grid.js](http://mleibman.github.com/SlickGrid/slick.grid.js)（不是[http://raw.github](http://raw.github) ...，它没有正确的 MIME 类型）之后，一切都开始了在职的。

IE7 模式仍然失败，但错误似乎来自 jsfiddle.net 而不是来自 SlickGrid。

# java - 使用 Swing 在 JFrame 上设置背景图像

> ID：11853921
> 
> 赞同：1
> 
> 时间：2012-08-07T20:50:15.677
> 
> 标签：java, image, swing, background, jframe

我已经学习 Java 几个星期了，在将背景图像应用于 JFrame 时，我真的陷入了困境。我遇到的每个教程都没有按照我的方式创建 Frames（我扩展了 JFrame），或者如果他们这样做了，说明不够清晰，我无法理解。

下面的代码来自我自己的一个项目，因此请帮助我练习到目前为止所学的知识。请您在下面的代码上构建并向我解释要添加的内容和位置，以便我可以将图像作为框架的背景？

我真的很感激的一件事是，如果你能解释事情是如何工作的，为什么需要它们以及它们实际上在做什么——我不喜欢盲目复制和粘贴你所做的事情而不知道它是如何工作的想法. 解释越深入越好；即使听起来很傲慢。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class MiniPad extends JFrame implements ActionListener {

    JPanel pan = new JPanel();
    ClassLoader ldr = this.getClass().getClassLoader();
    ImageIcon closeImg = new ImageIcon(ldr.getResource("\\images\\buttons\\closeBtn.png"));
    JTextArea note = new JTextArea("", 6, 21);
    JScrollPane notes = new JScrollPane(note);
    JButton close = new JButton(closeImg);

    public static void main(String[] args) {
        MiniPad padgui = new MiniPad();
    } //Instance of GUI

    public MiniPad() {
        super("Notepad");
        setSize(265, 191);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        add(pan);
        setVisible(true);
//Specifications
        note.setLineWrap(true);
        note.setWrapStyleWord(true);
        notes.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        close.setBorderPainted(false);
        close.setContentAreaFilled(false);
        close.setOpaque(false);
//Adding to JPanel 'pan'
        pan.add(notes);
        pan.add(close);
        close.addActionListener(this);
    }

    public void actionPerformed(ActionEvent event) {
        if (event.getSource() == close) {
            setVisible(false);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:22:25.607

至于你的问题，因为它的标题

您将需要设置自定义`Component`（例如 a `JPanel`）并覆盖该`paintComponent`方法

看一眼

*   [在 Swing 中执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [Java 2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)

现在，您将遇到一些问题，注释窗格将阻挡大部分背景，使图像变得模糊。不过，这不应该阻止尝试；）

您还需要熟悉如何使 Swing 组件变得[透明](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setOpaque%28boolean%29)。

一些反馈；）

我认为您不需要保留对 , 的引用`Classloader`，因为您使用它的目的只是增加了代码的权重和复杂性。这不是一个大问题，但我的第一个问题是，“他用类加载器做什么？？”

我可能也会采用某种命名约定。一般稍微冗长一点会使代码更容易理解。

`close`?? 这是一个动作吗？也许像“closeButton”之类的东西，至少我知道它是某种类型的按钮

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T20:59:02.577

更好地使用：

```
ImageIcon closeImg = new ImageIcon(getClass().getResource("\\images\\buttons\\closeBtn.png")); 
```

确保您的图像位于与**类**文件输出位置相同的位置。

此外，您的关闭按钮会调用`setVisible(false)`但不会处理任何资源或退出应用程序。

# java - Java：构造对象矩阵时的 Eclipse ClassNotFound 异常

> ID：11853923
> 
> 赞同：0
> 
> 时间：2012-08-07T20:50:22.147
> 
> 标签：java, eclipse, linked-list, classnotfoundexception

我在 Java 中将四重链表实现为 Node 对象的矩阵，我已将其实现为内部类：

```
public class Test {

    private Node[][] Matrix;

    class Node {
        int data; 
        Node up;
        Node down;
        Node left;
        Node right;
    }

    public Test() {
        Matrix = new Node[10][10];
        for (int col = 0; col < 10; col++) {
            for (int row = 0; row < 10; row++) {
                Matrix[row][col] = new Node();
            }
        }
    }

    public static void main(String[] args) {
        Test test = new Test();
    }

} 
```

首先，这是正确/最好的方法吗？其次，虽然它运行良好，但当我逐行调试时，我得到了错误，并且在我前进到 line 之前`Test(Object).<init>() line: 37 [local variables unavailable]`还有一个窗口。然后它卡在该行并给我一个 ClassNotFound 异常：`Source not found``Matrix = new Node[10][10];`

```
owns: Object  (id=28)   
owns: Object  (id=29)   
ClassNotFoundException(Throwable).<init>(String, Throwable) line: 286   
ClassNotFoundException(Exception).<init>(String, Throwable) line: not available 
ClassNotFoundException(ReflectiveOperationException).<init>(String, Throwable) line: not available  
ClassNotFoundException.<init>(String) line: not available   
URLClassLoader$1.run() line: not available  
URLClassLoader$1.run() line: not available  
AccessController.doPrivileged(PrivilegedExceptionAction<T>, AccessControlContext) line: not available [native method]   
Launcher$ExtClassLoader(URLClassLoader).findClass(String) line: not available   
Launcher$ExtClassLoader(ClassLoader).loadClass(String, boolean) line: not available 
Launcher$AppClassLoader(ClassLoader).loadClass(String, boolean) line: not available 
Launcher$AppClassLoader.loadClass(String, boolean) line: not available  
Launcher$AppClassLoader(ClassLoader).loadClass(String) line: not available 
```

为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:54:40.480

难道是你有一个不需要的断点？Debug 视图上的堆栈是否显示`Thread[main] (Suspended...)`消息？转到 Breakpoints 视图，删除所有这些，在您的 Test 类上再次设置它并再次尝试调试。

检查这篇[文章](http://www.popcornfarmer.com/gamedev/2009/01/eclipse-debug-error/)（最初在这个[答案](https://stackoverflow.com/a/4896882/1434089)上看到）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T03:11:26.070

进一步思考，我不认为这实际上是一个错误。它使用 Object 的默认构造函数，Eclipse 很可能无法访问其源代码（因为它是 Java 库或其他的一部分）。不确定，但这是我最好的答案。

最好的解决方案是跳过而不是步入 Node.js 的构建。

# java - 用Java模拟来测试数据库的性能

> ID：11853924
> 
> 赞同：1
> 
> 时间：2012-08-07T20:50:22.897
> 
> 标签：java, database, multithreading, testing

要求是用 Java 构建一个工具，该工具将一组查询作为输入，并将查询的响应时间打印为输出。

这是为了测试数据库的性能，当大量查询同时访问数据库（大约 1000 个）时，并获取在这种情况下每个查询可能需要多少的详细信息。

这个东西必须用Java模拟。我该怎么做。我在想线程。这是正确的方法（每个查询的单独线程）。如果没有，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:09:16.593

您可以使用[Apache JMeter](http://jmeter.apache.org/usermanual/build-db-test-plan.html)来完成此任务。它是开源软件，一个 100% 纯 Java 应用程序，旨在加载测试功能行为和测量性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:57:45.697

如果您想修复 SQL 语句以提高性能，您可以在*没有*线程的情况下进行。

如果您真的想知道数据库的实时行为，您应该使用线程。

# xml - 使用 xsl 创建本地化内容第 3 部分

> ID：11853927
> 
> 赞同：1
> 
> 时间：2012-08-07T20:50:37.007
> 
> 标签：xml, xslt, localization

从这个问题开始：[使用 xsl 创建本地化内容第 2 部分](https://stackoverflow.com/questions/10344242/using-xsl-to-create-localized-content-part-2)。我的要求现在发生了变化，因此我还需要匹配属性以及文本节点的部分匹配。所以从前面的例子：

这个文件：

```
<html>
    <div>Lot's of html</div>
    <div>[property.to.match]</div>
    <div>
        <h1>[other.property.to.match]</h1>
        <p>
            <img src="[localized_x.jpg]" />[another.property.to.match]
        </p>
        <input type="checkbox"/>[a.label.to.match]         
        <p>Some text that shouldn't be translated followed
        by [some.text.to.translate]
        XXX [other.property.to.match]
        </p>
    </div>
</html> 
```

应该变成：

```
<html>
   <div>Lot's of html</div>
   <div>The British translation</div>
   <div>
      <h1>The other language localized, but non locale based generic translation</h1>
      <p><img src="british_x.jpg">Second generic property
      </p><input type="checkbox">Generic Checkbox label
      <p>Some text that shouldn't be translated followed
                by This text follows a static bit of text
                XXX The other language localized, but non locale based generic translation

      </p>
   </div>
</html> 
```

请注意 img src 属性与属性匹配并被重写。是否可以更新 xslt 以匹配和重写这些属性？

谢谢罗宾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:05:36.907

> 是否可以更新 xslt 以匹配和重写这些属性？

**是的。只需添加此模板**：

```
 <xsl:template match="@*[contains(., '[') and contains(., ']')]">
       <xsl:attribute name="{name()}">
         <xsl:call-template name="replaceWithLookup"/>
       </xsl:attribute>
     </xsl:template> 
```

**现在完整的转换变成：**

```
 <xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:param name="pLookupPath" select="'file:///c:/temp/delete/lookup2.xml'"/>
     <xsl:param name="pLang" select="'en_GB'"/>

     <xsl:key name="kLookup" match="text/*"
      use="concat(../@name, '+', name())"/>

     <xsl:variable name="vDict" select="document($pLookupPath)"/>

     <xsl:template match="node()|@*">
         <xsl:copy>
           <xsl:apply-templates select="node()|@*"/>
         </xsl:copy>
     </xsl:template>

     <xsl:template match="@*[contains(., '[') and contains(., ']')]">
       <xsl:attribute name="{name()}">
         <xsl:call-template name="replaceWithLookup"/>
       </xsl:attribute>
     </xsl:template>

     <xsl:template name="replaceWithLookup" match=
      "text()[contains(., '[') and contains(., ']')]">
      <xsl:param name="pText" select="."/>

      <xsl:if test="string-length($pText)">
          <xsl:value-of select=
           "substring-before(concat($pText, '['), '[')"/>

          <xsl:variable name="vToken" select=
           "substring-before(substring-after($pText, '['), ']')"/>

        <xsl:variable name="vReplacement">
         <xsl:for-each select="$vDict">
          <xsl:value-of select=
          "(key('kLookup', concat($vToken, '+', $pLang))
         |
           key('kLookup', concat($vToken, '+', substring-before($pLang, '_')))
           )[1]"/>
         </xsl:for-each>
        </xsl:variable>

        <xsl:choose>
         <xsl:when test="$vReplacement">
          <xsl:value-of select="$vReplacement"/>
         </xsl:when>
         <xsl:when test="$vToken">
          <xsl:value-of select="concat('[', $vToken, ']')"/>
         </xsl:when>
         <xsl:otherwise>
           <xsl:value-of select=
            "substring-after
              ($pText,
               substring-before(concat($pText, '['), '[')
               )"/>
         </xsl:otherwise>
        </xsl:choose>

        <xsl:if test="$vToken">
         <xsl:call-template name="replaceWithLookup">
           <xsl:with-param name="pText" select=
            "substring-after($pText, concat('[', $vToken, ']'))"/>
         </xsl:call-template>
        </xsl:if>
      </xsl:if>
     </xsl:template>
  </xsl:stylesheet> 
```

**如果 lookup2.xml 文件是**：

```
<resources>
    <text name="property.to.match">
        <en_US>The American translation</en_US>
        <en_GB>The British translation</en_GB>
        <en>The language localized, but non locale based generic translation</en>
    </text>
    <text name="other.property.to.match">
        <en>The other language localized, but non locale based generic translation</en>
    </text>
    <text name="another.property.to.match">
        <en>Second generic property</en>
    </text>
    <text name="a.label.to.match">
        <en>Generic Checkbox label </en>
    </text>
    <text name="some.text.to.translate">
        <en>This text follows a static bit of text</en>
    </text>
    <text name="localized_x.jpg">
        <en_GB>british_x.jpg</en_GB>
        <en>Generic JPG</en>
    </text>
</resources> 
```

**然后，当对提供的 XML 文档应用转换时：**

```
<html>
        <div>Lot's of html</div>
        <div>[property.to.match]</div>
        <div>
            <h1>[other.property.to.match]</h1>
            <p>
                <img src="[localized_x.jpg]" />[another.property.to.match]
            </p>
            <input type="checkbox"/>[a.label.to.match]
            <p>Some text that shouldn't be translated followed
            by [some.text.to.translate]
            XXX [other.property.to.match]
            </p>
        </div>
</html> 
```

**产生了想要的正确结果**：

```
<html>
   <div>Lot's of html</div>
   <div>The British translation</div>
   <div>
      <h1>The other language localized, but non locale based generic translation</h1>
      <p><img src="british_x.jpg">Second generic property

      </p><input type="checkbox">Generic Checkbox label 

      <p>Some text that shouldn't be translated followed
         by This text follows a static bit of text
         XXX The other language localized, but non locale based generic translation

      </p>
   </div>
</html> 
```

# c# - 使用 aspnet 成员表中的 UserId 作为外键是个好主意吗？

> ID：11853929
> 
> 赞同：1
> 
> 时间：2012-08-07T20:50:39.427
> 
> 标签：c#, asp.net, sql, asp.net-membership

我正在创建一个表来保存登录用户的用户 ID。我想知道使用 UserId 列作为我正在创建的表的参考列是否有任何缺点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:23:17.170

我有时会这样做，但您不想开始做的一件事是通过查询字符串将其来回发送到其他页面。如果你这样做，至少加密它。

[http://everymanprogrammer.com/index.php/passing-encrypted-parameters-to-your-querystring-the-right-way-to-do-it/](http://everymanprogrammer.com/index.php/passing-encrypted-parameters-to-your-querystring-the-right-way-to-do-it/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:36:42.360

根据我的经验，当您想将另一个表中的数据（例如用户配置文件数据）链接到 SQL Membership 用户时，使用 UserId 很好。

在代码中，您可以执行以下操作来获取用户信息：

```
var username = HttpContext.Current.User.Identity.Name;
var user = Membership.GetUser(username);
var userid = user.ProviderUserKey as Guid?;

// Look-up user info based on UserId GUID
var info = QueryOtherTables(userid); 
```

# javascript - jQuery UI Slider 每个值切换类

> ID：11853932
> 
> 赞同：0
> 
> 时间：2012-08-07T20:50:41.907
> 
> 标签：javascript, jquery

我有一个范围在 1-100 之间的 jQuery UI 滑块。我想为 1-100 之间的每个值更改 div 的类。

我怎样才能最有效地遍历 1-100 之间的每个值并为每个值切换一个新类？

答案（这是最终解决的问题）：

```
$( '#slider-container' ).slider({
min: 1,
max: 100,

slide: function() {

    var $activeBackgroundUrl = $('.position_100').css('background');

    return function(event, ui) {
        activeBackgroundUrl = 'url(images/numbers/1'+(ui.value < 10 ? '0' : '')+ ui.value +'.png)';
        $('.position_100').css('background', activeBackgroundUrl);
    };

}()

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:06:09.873

尝试使用闭包来缓存您的`div`. 这样就不会在每个`slide`事件上都查询 DOM。相反，您`div`只被查询和定义一次。

```
$('#slider-container').slider({
    min: 1,
    max: 100,
    slide: (function() {
        var $el = $('#myDiv'),
            activeClass = '';

        return function(e, ui) {
            $el.removeClass(activeClass);
            activeClass = 'number_1' + (ui.value < 10 ? '0' : '') + ui.value;
            $el.addClass(activeClass);
        };

    })();
}); 
```

# android - 应用内购买在 android 2.3.6 下不起作用

> ID：11853933
> 
> 赞同：2
> 
> 时间：2012-08-07T20:50:48.903
> 
> 标签：android

在我的应用程序中，我已经集成了应用程序计费系统，并且它在 2.3.6 及更高版本的设备中正常工作，但是当我在 2.3.3 和 2.2.1 上测试它时，不会触发应用程序计费。我已使用以下代码在按钮单击侦听器中进行测试：

```
val = billingService.requestPurchase("android.test.purchased", payloadContents); 
```

是否有任何文档说明它应该在哪个版本中运行或任何解决方案？

# php - 使用PHP获取目录中文件的最后修改日期

> ID：11853935
> 
> 赞同：11
> 
> 时间：2012-08-07T20:50:59.993
> 
> 标签：php, date

我正在尝试使用 PHP 获取目录中所有文件的最后修改日期。

我正在使用这个：

```
foreach($dir as $file) 
{
$mod_date=date("F d Y H:i:s.", filemtime($file));
} 
```

`foreach($dir as $file)`正在返回正确的文件，但所有修改日期都返回为 0000-00-00 00:00:00，而不是实际修改日期。

我需要进行哪些更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-07T21:28:39.753

检查 $file 变量是否实际上指向正确的文件

```
foreach($dir as $file) 
{
  if(is_file($file))
  {
    $mod_date=date("F d Y H:i:s.", filemtime($file));
    echo "<br>$file last modified on ". $mod_date;
  }
  else
  {
    echo "<br>$file is not a correct file";
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T20:56:57.017

`date("F d Y H:i:s.", false)`就是你得到的。请参阅. [_](http://php.net/manual/en/function.filemtime.php) `filemtime`失败时返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-28T17:55:16.980

与其使用`glob`函数，不如使用`scandir`函数。其次，您可以通过使用轻松获得所需的日期格式`date("Y-m-d H:i:s", filemtime($file))`

# c# - 不接受从另一个类传递的值的变量

> ID：11853943
> 
> 赞同：-1
> 
> 时间：2012-08-07T20:51:22.990
> 
> 标签：c#

我即将放弃这一点，我试图将一个字符串传递给另一个类，并在那个类中将它保存到一个列表中，但它就是不会这样做。我知道列表存在并且工作，因为我制作了一个将字符串放入该列表并将其显示在列表框中的按钮。但由于某种原因，我无法让它在传递的字符串上工作。

这是两个winforms，一个让用户提供信息，然后将其处理并传递给另一个类，然后将其保存到列表中，然后我调用更新，该更新应在列表框中显示列表。

Mainform（带有列表框的那个）

```
public partial class MainForm : Form
{        

    List<string> m_customers = new List<string>();    

    public MainForm()
    {
        InitializeComponent();            
    }

    public void StringToList(string strnew)
    {           
        m_customers.Add(strnew);
        Updatelistbox();

        foreach (string custom in m_customers)
        {
            lstRegistry.Items.Add(custom);
        }
    }

    private void strtest(string strnew)
    {
        string userinfo = strnew;
        m_customers.Add(userinfo);
    }

    private void Updatelistbox()
    {
        lstRegistry.Items.Clear();
        for (int index = 0; index < m_customers.Count; index++)
        {
            lstRegistry.Items.Add(m_customers[index]);
        }
    }      

    private void button1_Click(object sender, EventArgs e)
    {
        using (ContactForm frm = new ContactForm())
        {
            frm.ShowDialog();
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {                 
        lstRegistry.Items.Add("Hey this works atleast...");

        m_customers.Add("add this to List");  //This works as this line becomes more and more.
        foreach (string custom in m_customers)
        {
            lstRegistry.Items.Add(custom);
        }        
    }
} 
```

输入表单

```
public partial class ContactForm : Form
{
    private ContactFiles.Contact m_contact = new ContactFiles.Contact();
    private ContactFiles.Email m_email = new ContactFiles.Email();
    private ContactFiles.Phone m_phone = new ContactFiles.Phone();
    private ContactFiles.Adress m_adress = new ContactFiles.Adress();

    private bool m_closeForm;

    public ContactForm()
    {

        InitializeComponent();

        InitializeGUI();
    }

    private void InitializeGUI()
    {
        txtFirstName.Text = string.Empty;
        txtLastName.Text = string.Empty;
        txtHomePhone.Text = string.Empty;
        txtCellPhone.Text = string.Empty;
        txtEmailBusiness.Text = string.Empty;
        txtEmailPrivate.Text = string.Empty;
        txtStreet.Text = string.Empty;
        txtCity.Text = string.Empty;
        txtZipCode.Text = string.Empty;
        FillCountryComboBox();
        cmbCountries.Items.AddRange(FillCountryComboBox()); cmbCountries.SelectedIndex = 5;
        m_closeForm = true;
    }

    public string[] FillCountryComboBox()
    {
        string[] m_countryStrings = Enum.GetNames(typeof(Countries));

        for (int index = 0; index < m_countryStrings.Length - 1; index++)
        {
            m_countryStrings[index] = m_countryStrings[index].Replace("_", " ");
        }
        return m_countryStrings;
    }

    private void btnOK_Click(object sender, EventArgs e)
    {           
        string a_country = cmbCountries.SelectedItem.ToString();
        var oAdress = new ContactFiles.Adress(txtStreet.Text, txtCity.Text, txtZipCode.Text, a_country);
        string adresslist = oAdress.ToString();            
        var oEmail = new ContactFiles.Email(txtEmailBusiness.Text, txtEmailPrivate.Text);
        string emaillist = oEmail.ToString();            
        var oPhones = new ContactFiles.Phone(txtHomePhone.Text, txtCellPhone.Text);
        string phonelist = oPhones.ToString();
        //This is actually working, the string is passed OK.            
        //MainForm strin = new MainForm();            
        var oContact = new ContactFiles.Contact(txtFirstName.Text, txtLastName.Text);
        string namelist = oContact.ToString();

        //Create string from input and send to MainForm.StringToList()
        MainForm instance = new MainForm();
        string strnew = string.Format("{0,-3} {1, -10} {2, -20} {3, -30}", namelist, phonelist, emaillist, adresslist);
        instance.StringToList(strnew);

        this.Close();
    }

    private ContactFiles.Contact Contacts
    {
        get { return m_contact; }
        set
        {
            if (value != null)
                m_contact = value;                
        }
    }

    public ContactFiles.Email Email
    {
        get { return m_email; }
        set 
        {
            if (value != null)
            m_email = value; 
        }
    }

    public ContactFiles.Phone Phone
    {
        get { return m_phone; }
        set
        {
            if (value != null)
                m_phone = value;
        }
    }

    private ContactFiles.Adress Adress
    {
        get { return m_adress; }
        set
        {
            if (value != null)
                m_adress = value;
        }
    }

    private void ContactForm_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (m_closeForm)
            e.Cancel = false;  //Close the Contact form.
        else
            e.Cancel = true; //Do not close (user has chosen Cancel)
    }      
} 
```

正如您所看到的，还有一些处理包含构造函数的用户输入的类，但它们都可以工作，因为我可以从所有用户输入中创建字符串，但后来我失败了，现在就像 3 天一样，我仍然可以找不到问题。:'(

关于如何解决我的问题的任何想法？！？我只是找不到问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:58:03.823

```
 MainForm instance = new MainForm();
    string strnew = string.Format("{0,-3} {1, -10} {2, -20} {3, -30}", namelist, phonelist, emaillist, adresslist);
    instance.StringToList(strnew); 
```

这是不好的。您正在创建一个新的主表单实例（带有新列表），而不是使用旧的。在联系表的建造者中传递列表并在那里增加价值。

```
List<string> m_customers;

public ContactForm(List<string> list) : this()
{
   m_customers = list;
} 
```

创建表单代码

```
private void button1_Click(object sender, EventArgs e)
{
    using (ContactForm frm = new ContactForm(m_customers))
    {
        frm.ShowDialog();
    }
} 
```

现在您可以将值添加到列表中。

更新：将您的 StringToList 方法带入联系表单，将其设为私有并在联系表单实例中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:58:14.770

您可以尝试使您的主表单具有输入表单的实例，反之亦然。主要形式最终将保存数据。让输入表单成为一个新实例并以这种方式返回值。

# c# - 将我的（短）Python 修复为 C# 算法端口

> ID：11853945
> 
> 赞同：0
> 
> 时间：2012-08-07T20:51:30.313
> 
> 标签：c#, python, math, port

在这里编写基于 Reddit 的排序算法：http: [//amix.dk/blog/post/19588](http://amix.dk/blog/post/19588)

由于某些 System.Math 签名在它们的应用程序中不同，我很难将它们组合在一起。

```
public class Calculation
{
    protected DateTime Epoch = new DateTime(1970,1,1);

    protected int EpochSeconds(DateTime date)
    {
        var td = date - Epoch;
        return td.Days*86400 + td.Seconds + ((td.Milliseconds)/1000000);
    }

    protected int Score(int upVotes,int downVotes)
    {
        return upVotes - downVotes;
    }

    public int HotScore(int upVotes,int downVotes,DateTime date)
    {
        var s = Score(upVotes, downVotes);
        var order = Math.Log(Math.Max(Math.Abs(s), 1), 10);
        var sign = Math.Sign(s); //Edit from Jonathon Reinhart
        var seconds = EpochSeconds(date) - 1134028003;
        return Math.Round(order + sign + *seconds/45000, 7);
    }
} 
```

**编辑以获取更多信息**

具体来说，我在最后一行遇到错误

```
return Math.Round(order + sign + *seconds/45000, 7);
//error "The * or -> operator must be applied to a pointer" 
```

"

我可以在方法签名中找到的最接近的匹配是：http: [//msdn.microsoft.com/en-us/library/f5898377](http://msdn.microsoft.com/en-us/library/f5898377)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:56:49.367

我会提出的一项建议是使用[`Math.Sign(Int32)`](http://msdn.microsoft.com/en-us/library/bd3y5wdf.aspx). 所以：

```
var sign = new int();
if (s > 0) { sign = 1; }
else if (s < 0) { sign = -1; }
else { sign = 0; } 
```

变成：

```
var sign = Math.Sign(s); 
```

* * *

好的，所以你在这条线上遇到了问题：

```
return Math.Round(order + sign + *seconds/45000, 7); 
```

一方面，您可能会丢失 中的小数部分`seconds/45000`，因为它们都是`int`。先施以加倍： `((double)seconds / 45000)`.

对于两个，您可能遇到了语法错误`sign + *seconds`。你的意思是`+`或`*`？它认为你使用`seconds`的就像一个指针。

最后，[`Math.Round`](http://msdn.microsoft.com/en-us/library/system.math.round)返回 a `double`，但您的`HotScore`方法返回的是`int`。我猜你希望它返回一个`double`.

我的猜测是这就是你想要的：

```
public double HotScore(int upVotes,int downVotes,DateTime date)
{
    var score = Score(upVotes, downVotes);
    var order = Math.Log(Math.Max(Math.Abs(score), 1), 10);
    var sign = Math.Sign(score);
    var seconds = EpochSeconds(date) - 1134028003;
    return Math.Round(order + sign * ((double)seconds/45000), 7);
} 
```

* * *

另外，我不认为你`EpochSeconds()`是正确的。我从[这里](http://blogs.msdn.com/b/brada/archive/2004/03/20/93332.aspx)改编了这个：

```
public long GetEpochTime(DateTime dt) 
{ 
    var ts = dt.Subtract(Convert.ToDateTime("1/1/1970 8:00:00 AM")); 

    return ((((((ts.Days * 24) + ts.Hours) * 60) + ts.Minutes) * 60) + ts.Seconds); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:01:27.127

最后一行有语法错误 - 的序列`+ *`无效。我认为你想要的最后一行是这个（使用[这个`Math.Round`重载](http://msdn.microsoft.com/en-us/library/75ks3aby)）：

```
return Math.Round(order + sign * ((double)seconds / 45000), 7); 
```

# php - 隐藏其他收件人

> ID：11853946
> 
> 赞同：0
> 
> 时间：2012-08-07T20:51:32.810
> 
> 标签：php, email

我有一个邮件功能，它将邮件发送给从数据库中提取的收件人。如何隐藏其他收件人？密件抄送不起作用。邮件来源：

```
$to=array();
while($row = mysql_fetch_array($subscrquery)) {
    array_push($to, $row['subscr_mail']);
}
$msgheader=$ttl;

$mailheaders  = "MIME-Version: 1.0\r\n";
$mailheaders .= "Content-type: text/html; charset=UTF-8\r\n";
$mailheaders .= "From: ".$sender." <".$sender.">\r\n";
$mailheaders .= "Reply-To: ".$sender." <".$sender.">\r\n";
$mailheaders .= "Bcc: ".implode(',', $to)."\r\n";           
$mailmsga .= stripslashes($mailcontent);
$mailmsg .= strtr($mailmsga, array("<" => "\n<"));
mail(implode(',', $to), $msgheader,$mailmsg,$mailheaders); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:54:35.927

通常，您希望为每个收件人发送一封电子邮件。发送密件抄送将使您更有可能被垃圾邮件过滤器过滤。

如果您的列表很大，那么您将希望避免使用 PHP 的内置`mail`方法，因为它会为每封电子邮件打开和关闭一个连接。相反，您应该使用一个 SMTP 电子邮件程序，它只会为所有发送的电子邮件打开一个连接。可能的选项：

*   （可能过时的）PEAR 包有一个 SMTP 邮件程序
*   [Zend\Mail\Transport\Smtp](https://framework.zend.com/manual/2.4/en/modules/zend.mail.transport.html)是一个更新的命名空间包

大多数较大的框架，如 Zend，可能也有自己的 SMTP 邮件程序。

一般来说，使用现有的包是个好主意，这样您就不必担心标题注入、电子邮件的最大行长等问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:54:46.943

你的最后一行有问题：

```
mail(implode(',', $to), $msgheader,$mailmsg,$mailheaders); 
```

就在那儿，您正在向每个人“发送”电子邮件。BCC 已经处理了。在邮件的第一个参数中使用虚假地址（或您的地址，或其他），它应该可以解决问题。最后一行应该是这样的：

```
mail('mailer@wherever.com', $msgheader,$mailmsg,$mailheaders); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:01:08.303

只需添加这一行

```
$headers .= 'To:  Unknown<undefined>' . "\r\n"; 
```

# windows-8 - 是否可以获得 Windows 8 通知列表

> ID：11853947
> 
> 赞同：3
> 
> 时间：2012-08-07T20:51:37.963
> 
> 标签：windows-8, microsoft-metro

无论是通过 UI，还是代码（最好）两者。您可以查看列表或获取 Windows 8 通知的历史记录吗？

从 Metro 应用程序中执行此操作也很好，但通常从桌面应用程序中也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:25:44.893

如果不深入挖掘通知服务的内部状态等，这是不可能的。

# javascript - 在 Jquery 中，我可以存储对象引用并在以后使用它吗？

> ID：11853951
> 
> 赞同：0
> 
> 时间：2012-08-07T20:51:49.897
> 
> 标签：javascript, jquery

我遇到了 Jquery 的问题，我在 RoR 上制作了一个动态表单，所以我在调用 jQuery 模式的输入旁边有一个按钮。在那里，用户将进行查找并从列表中选择一些信息。

问题是我需要在用户单击的按钮旁边的输入中插入回信息。所以我想知道有什么方法可以存储按钮dom然后重用它，以便在模式隐藏时设置输入值？还是有其他方法可以解决这个问题？

单击按钮时调用的函数。

```
function openPicker(event)
{   
    $('#myModal').modal('toggle')
} 
```

当模态被隐藏时调用的函数。

```
$('#myModal').on('hidden', function () {

}) 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:58:22.073

假设您想要存储触发 openPicker 函数的内容，您可以将事件的引用存储在数据中并在需要时读取它。

```
function openPicker(event) {   
    $('#myModal').modal('toggle').data("btn", event.target || event.srcElement);
}

$('#myModal').on('hidden', function () {
    var elem = jQuery(this); 
    var btn = elem.data("btn");
}); 
```

# php - 为登录写记住我

> ID：11853953
> 
> 赞同：0
> 
> 时间：2012-08-07T20:51:56.703
> 
> 标签：php, login, remember-me

我要写一个登录页面，我一直在阅读 Charlie Miller 关于登录时记住我的文章。另请阅读 OWASP 备忘单。我在想，不是随机数的持久数据库条目，你能不能只将随机数存储在 $_SESSION 数组中？然后检查用户cookie，如果匹配，则重新生成数字并设置在会话cookie和用户cookie中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:18:11.400

关键是，当用户必须再次登录时，通常您没有有效的会话。会话不会无限存储。

# javascript - 从 NodeJS 以 JSON 格式发送照片数组

> ID：11853955
> 
> 赞同：0
> 
> 时间：2012-08-07T20:52:02.793
> 
> 标签：javascript, json, node.js

长期听众，第一次来电:-)

我是 nodejs 和 javascript 的新手，我正在努力解决事件和回调模型。

我的目标：以 JSON 格式返回照片数组（名称、宽度、高度、exif 数据）。这是必要的，这样我的应用程序就可以使用 JSON 的图片数组来发挥它的魔力。

情况：我的代码似乎可以工作，只是事情没有按照我想要的顺序运行。我希望将每张图片的 JSON 流式传输到 HTTP 响应，但我的控制台日志显示事情不是按预期顺序进行的，我怀疑 res.end() 被调用得太早了。这意味着我的 Web 请求在响应中没有任何结果。

相关代码：

```
fs.readdir(readDir, function (err, files) {
    var picsInfo;
    if (err) res.writeHead(500, err.message);
    else if (!files.length) res.writeHead(404);
    else {
        res.writeHead(200, { 'Content-Type': 'application/json' });
            files.forEach(function(file) {
        console.log('easyimage');
        easyimg.info(readDir + '/' + file, function(err, stdout, stderr) {
            if (err) throw err;
            console.log(JSON.stringify(stdout));
            res.write(JSON.stringify(stdout));
        });
        });
    }
    res.end();
}); 
```

我在控制台中看到的输出显示事情不正常（我希望将每张照片发送到 res）：

```
easyimage
easyimage
easyimage
easyimage
easyimage
easyimage
easyimage
easyimage
easyimage
easyimage  
{"type":"JPEG","depth":"8","width":"933","height":"1400","size":"532365B","name":"6.jpg"}
{"type":"JPEG","depth":"8","width":"1400","height":"933","size":"318134B","name":"3.jpg"}
{"type":"JPEG","depth":"8","width":"1400","height":"933","size":"310927B","name":"10.jpg"}
{"type":"JPEG","depth":"8","width":"933","height":"1400","size":"258928B","name":"1.jpg"}
req.method=GET...
{"type":"JPEG","depth":"8","width":"1400","height":"928","size":"384475B","name":"7.jpg"}
{"type":"JPEG","depth":"8","width":"933","height":"1400","size":"469711B","name":"4.jpg"}
{"type":"JPEG","depth":"8","width":"1400","height":"933","size":"392666B","name":"2.jpg"}
{"type":"JPEG","depth":"8","width":"1400","height":"933","size":"354468B","name":"5.jpg"}
{"type":"JPEG","depth":"8","width":"1400","height":"933","size":"438143B","name":"9.jpg"}
{"type":"JPEG","depth":"8","width":"933","height":"1400","size":"304939B","name":"8.jpg"} 
```

我尝试使用我发现的一些示例（例如[http://blog.nakedjavascript.com/going-evented-with-nodejs](http://blog.nakedjavascript.com/going-evented-with-nodejs)但认为我只是缺少事件/回调模型方面的一些关键。任何指针或帮助将不胜感激。此外，如果我在这里的方法（即发送 JSON 到 res 等）是愚蠢的或次优的，我也会喜欢一些关于什么可能是最好的提示。

提前感谢您的任何指示和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:55:46.323

好的，我无法运行代码，因此可能需要一些调整：

```
fs.readdir(readDir, function(err, files) {
    var filesPath = files.map(function(file) {
      return readDir + '/' + file;
    });

    async.map(filesPath, easyimg.info, function(err, json) {
        if(err)
            return res.end(500, err.message);

        res.end(JSON.stringify(json));
    });
}); 
```

你的代码有什么问题？

*   正如我之前所说，`res.end()`因为`easyimg.info`异步回答而立即被调用。
*   您调用`easyimg.info`每个文件，但不能保证响应会按顺序到达。查看精彩的[异步](https://github.com/caolan/async#map)库 ( `npm install async`)。
*   当您通过回调返回错误时，请确保您也返回。始终使用该模式`return cb(err)`。

# php - json_encode 和重音

> ID：11853957
> 
> 赞同：2
> 
> 时间：2012-08-07T20:52:05.533
> 
> 标签：php, javascript, json, encoding

我有一个 json 编码并存储到数据库中的数组。我所有的php文件都是utf8，我的mysql数据库是utf8_general_ci。

我的数组包含可能包含重音字符的名称，json_encode 将其转换为 \u 字符。这个数组被存储到我的数据库中。当我使用 jQuery.parseJSON 时，强调的字符会正确显示。

```
info = jQuery.parseJSON(data);
console.log(info);

//"Bob Épine" which is good 
```

但是当我想在 PHP 中使用 json_decode 时， \u 字符会保留。

```
print_r($this->opts['name']);
echo $this->opts['name'];

//Bob \u00c9pine
//Bob u00c9pine 
```

我发现了这个函数[PHP: Replace \u characters in json string](http://www.avoid.org/?p=67)，这是要走的路吗？它确实有效，但它似乎避免了问题而不是修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:57:32.353

首先，将 JSON 存储在数据库表中听起来像是一种有缺陷的应用程序设计，但暂时搁置一会......

对我来说，这听起来像是[Bobby Tables](http://bobby-tables.com/)的领地。`\`我的意思是，当您将数据插入数据库时​​，听起来您并没有逃避。这意味着它被从字符串中剥离出来，所以你最终得到的是`uxxxx`而不是`\uxxxx`，这意味着它们无法被解码。

现在，解决这个问题的方法多种多样，但您需要做的第一件事是确保数据正确插入数据库，并且编码的 JSON 字符串与您输入的字符串相同。如果你这样做并且你发现你仍然有这个问题，我有一个我前一段时间写的函数，它将 unicode 代码点转换为它们的二进制表示（*我只是为你找到*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:56:30.750

PHP json_decode 不能很好地处理一些（如果不是全部）UTF-8 非 ASCII 字符（>1 字节）。在prototype.js 中，我必须添加一个新的JSON 编码函数，该函数将对所有非A​​SCII 字符进行编码（我不再拥有该代码）。

尝试[phpjs](http://phpjs.org/packages/configure)库中的[json_encode 。](http://phpjs.org/functions/json_encode)

# python - 使用来自 python 的 opencv 缝合器

> ID：11853960
> 
> 赞同：5
> 
> 时间：2012-08-07T20:52:13.713
> 
> 标签：python, opencv, python-2.7

OpenCV 可以与 pythonbindings 一起使用，并且效果很好。但是我想知道（真的希望）是否也可以在 python 中使用[OpenCv 的缝合器。](http://docs.opencv.org/modules/stitching/doc/stitching.html)我已经尝试了几件事，但无法让它工作。如果有可能，我可能需要进行额外的导入，但我无法弄清楚，谷歌也没有给我答案。希望你们中有一个opencv-python大师可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:04:47.037

好的，所以，我终于想通了。到目前为止，我只移植了带有两个参数的stitch 方法，请问我是否在公开其他可能需要的内容时遇到了麻烦。

构建它的最简单方法是以与位置无关的方式（gcc 的 -fPIC 选项）将所有内容编译到动态库中，同时链接 opencv_core 和 opencv_stitching 库。您还必须为要构建的任何版本的 python 添加包含目录，以便它可以找到正确的 Python.h 标头。

如果构建正确，您将能够像使用 python 模块一样使用编译后的库。

不幸的是，由于它们不提供对构造函数的访问，我不得不满足于制作事物的全局实例。如果有另一种优雅的方式，我全是耳朵（眼睛）。这意味着每当您调用 .Stitcher() 构造函数时，它将返回相同的实例（有一个单独的实例在构造期间尝试使用 GPU，请为此使用 .Stitcher(True) ）。

这是我的 pythonPort.h 文件：

```
/* 
 * File:   pythonPort.h
 * Author: algomorph
 *
 * Created on December 5, 2012, 10:18 AM
 */

#ifndef PYTHONPORT_H
#define PYTHONPORT_H

#define MODULESTR "mycv"

#include "Python.h"
#include "numpy/ndarrayobject.h"
#include <opencv2/core/core.hpp>
#include <opencv2/stitching/stitcher.hpp>
/*
//include your own custom extensions here
#include "savgol.h"
#include "filters.hpp"
*/
#include "pythonPortAux.h"

#endif 
```

MODULESTR 应该是您想要命名模块的任何名称。我保持它与它编译的库的名称相同。

您必须从 cv2.cpp 文件中复制所需的任何 opencv_to 和 opencv_from 例程，并将其放入我的 pythonPortAux.h 之类的文件中。我的有很多从那里开始的例程，你可以[在这个链接](http://algomorph.com/storage/pythonPortAux.h)中找到它。MKTYPE2 宏也在那里。

其余的在下面的 pythonPort.cpp 文件中（我还有其他东西，这只是与 Stitcher 相关的部分）：

```
#include "pythonPort.h"

struct pycvex_Stitcher_t
{
    PyObject_HEAD
    Ptr<cv::Stitcher> v;
};

static PyTypeObject pycvex_Stitcher_Type =
{
    PyObject_HEAD_INIT(&PyType_Type)
    0,
    MODULESTR".Stitcher",
    sizeof(pycvex_Stitcher_t),
};

static void pycvex_Stitcher_dealloc(PyObject* self)
{
    //((pycvex_Stitcher_t*)self)->v.release();
    PyObject_Del(self);
}

static PyObject* pyopencv_from(const Ptr<cv::Stitcher>& r)
{
    pycvex_Stitcher_t *m = PyObject_NEW(pycvex_Stitcher_t, &pycvex_Stitcher_Type);
    new (&(m->v)) Ptr<cv::Stitcher>(); // init Ptr with placement new
    m->v = r;
    return (PyObject*)m;
}

static bool pyopencv_to(PyObject* src, Ptr<cv::Stitcher>& dst, const char* name="<unknown>")
{
    if( src == NULL || src == Py_None )
        return true;
    if(!PyObject_TypeCheck(src, &pycvex_Stitcher_Type))
    {
        failmsg("Expected cv::Stitcher for argument '%s'", name);
        return false;
    }
    dst = ((pycvex_Stitcher_t*)src)->v;
    return true;
}

static PyObject* pycvex_Stitcher_repr(PyObject* self)
{
    char str[1000];
    sprintf(str, "<Stitcher %p>", self);
    return PyString_FromString(str);
}

Stitcher gStitcher = cv::Stitcher::createDefault(false);
Stitcher gStitcherGPU = cv::Stitcher::createDefault(true);

static PyObject* pycvex_Stitcher_Stitcher(PyObject* , PyObject* args, PyObject* kw)
{
    PyErr_Clear();
    {
        pycvex_Stitcher_t* self = 0;
        bool try_use_gpu = false;

        const char* keywords[] = { "img", "pt1", "pt2","connectivity","leftToRight", NULL };
        if (PyArg_ParseTupleAndKeywords(args, kw, "|b:Stitcher",
                (char**) keywords, &try_use_gpu)){
            self = PyObject_NEW(pycvex_Stitcher_t, &pycvex_Stitcher_Type);
            if (self)
                ERRWRAP2(
                        if(try_use_gpu)
                            self->v = &gStitcherGPU;
                        else
                            self->v = &gStitcher;
                        );
            return (PyObject*) self;
        }
    }
    return NULL;
}
static PyGetSetDef pycvex_Stitcher_getseters[] =
{
    {NULL}  /* Sentinel */
};

static PyObject* pycvex_Stitcher_stitch(PyObject* self, PyObject* args, PyObject* kw){
    if(!PyObject_TypeCheck(self, &pycvex_Stitcher_Type))
        return failmsgp("Incorrect type of self (must be 'Stitcher' or its derivative)");
    Stitcher* _self_ = ((pycvex_Stitcher_t*)self)->v;
    //Stitcher::Status status;
    int status;

    PyObject* pyobj_images = NULL;
    vector<Mat> images = vector<Mat>();
    Mat pano;

    const char* keywords[] = { "images", NULL };
    if( PyArg_ParseTupleAndKeywords(args, kw, "O:Stitcher.stitch", (char**)keywords, &pyobj_images) &&
        pyopencv_to(pyobj_images, images, ArgInfo("images", false)))
    {
        ERRWRAP2( status = (int)_self_->stitch(images, pano));
        return Py_BuildValue("(NN)", pyopencv_from(status), pyopencv_from(pano));
    }

    return NULL;
}

static PyMethodDef pycvex_Stitcher_methods[] =
{
    {"stitch", (PyCFunction)pycvex_Stitcher_stitch, METH_KEYWORDS, "stitch(image) -> status, pano"},
    {NULL, NULL}
};

static void pycvex_Stitcher_specials(void)
{
    pycvex_Stitcher_Type.tp_base = NULL;
    pycvex_Stitcher_Type.tp_dealloc = pycvex_Stitcher_dealloc;
    pycvex_Stitcher_Type.tp_repr = pycvex_Stitcher_repr;
    pycvex_Stitcher_Type.tp_getset = pycvex_Stitcher_getseters;
    pycvex_Stitcher_Type.tp_methods = pycvex_Stitcher_methods;
}

static PyMethodDef methods[] = {
    {"Stitcher",(PyCFunction)pycvex_Stitcher_Stitcher, METH_KEYWORDS, "Stitcher([tryUseGpu=False]) -> <Stitcher object>"},
    {NULL, NULL}
};

extern "C"{
    #if defined WIN32 || defined _WIN32
    __declspec(dllexport)
    #endif
    void initcvex()
    {
      MKTYPE2(Stitcher);
      import_array();
      PyObject* m = Py_InitModule(MODULESTR, methods);
      PyObject* d = PyModule_GetDict(m);
      //PyDict_SetItemString(d, "__version__", PyString_FromString(CV_VERSION))
      opencv_error = PyErr_NewException((char*)MODULESTR".error", NULL, NULL);
      PyDict_SetItemString(d, "error", opencv_error);
    }
} 
```

# java - 如果没有抛出异常指示操作成功，则返回布尔值 true？

> ID：11853966
> 
> 赞同：3
> 
> 时间：2012-08-07T20:52:44.307
> 
> 标签：java, exception-handling, return, throws

即使抛出所有可能的异常，方法（远程方法调用）是否应该返回`true`指示操作成功执行的布尔值？

**例子：**

在我的 java 应用程序中有许多 CRUD 远程方法调用，我捕获所有可能的异常并向调用客户端抛出自定义异常。

我现在应该返回 void 还是布尔值，因为 Exceptions 已经隐式指示操作的成功或失败？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T20:56:55.163

我建议返回无效。

如果你返回一个布尔值，调用代码必须猜测“哦，我应该检查布尔值还是检查异常？或者两者都做？”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T20:57:22.037

Return ，在这种情况下`void`不是 a 。`boolean`

例外是针对特殊情况。为什么要在两个不同的通道上指示操作的成功或失败之类的东西？DRY 原则告诉我们：

> 不要重复自己

我只会使用布尔值来表示*更多*信息，就像有时在集合上所做的那样，报告是否找到要删除的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:58:31.490

当对所有错误条件使用异常时，仅当方法具有要返回的实际有用数据时才返回值。

如果您没有要返回的有用信息，请使用 void。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T20:59:21.707

我认为这是一个方便的问题。您已经抛出自定义异常这一事实有助于识别确切的错误（如果有）。

但是，有时，您可能会发现使用以下表达式很方便：

```
 if(method()){
     ... 
  } 
```

因此，返回布尔值可能很有用。

最后，两者（抛出异常并返回布尔值）不相互排斥

# java - xmlparserv2.jar 和 Oracle 数据库的错误

> ID：11853967
> 
> 赞同：1
> 
> 时间：2012-08-07T20:52:52.523
> 
> 标签：java, xml, oracle, hibernate

当我针对 oracle 数据库运行我的代码时，我收到以下错误：

```
Error parsing XML (31) : http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd<Line 31, Column 2>: XML-20068: (Fatal Error) content model is not deterministic
[07 Aug 2012 14:41:36,643](UTC 20:41:36) WARN   ApplicationLifecycle      | Unable to install module at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
Caused by: org.hibernate.InvalidMappingException: Unable to read XML
at org.hibernate.util.xml.MappingReader.readMappingDocument(MappingReader.java:101)
at org.hibernate.cfg.Configuration.add(Configuration.java:513)
at org.hibernate.cfg.Configuration.add(Configuration.java:509)
at org.hibernate.cfg.Configuration.add(Configuration.java:716)
at org.hibernate.cfg.Configuration.addResource(Configuration.java:801)
at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:2344)
at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:2310)
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2290)
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2243)
at org.hibernate.cfg.Configuration.configure(Configuration.java:2158)
Caused by: org.dom4j.DocumentException: Error on line 31 of document http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd : http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd<Line 31, Column 2>: XML-20068: (Fatal Error) content model is not deterministic Nested exception: http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd<Line 31, Column 2>: XML-20068: (Fatal Error) content model is not deterministic
at org.dom4j.io.SAXReader.read(SAXReader.java:482)
at org.hibernate.util.xml.MappingReader.readMappingDocument(MappingReader.java:75)
... 20 more 
```

主要错误是`Error parsing XML (31) : http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd<Line 31, Column 2>: XML-20068: (Fatal Error) content model is not deterministic`

然后当我删除 jar 时，`xmlparserv2.jar`我会收到以下错误。

```
Caused by: java.lang.NoClassDefFoundError: oracle/xml/parser/v2/XMLParseException
at oracle.jdbc.driver.OracleSQLXML.setString(OracleSQLXML.java:415)
at com.capitaliq.loader.persistence.messaging.QueueUtils$1FlushMessages.execute(QueueUtils.java:358)
at com.capitaliq.loader.persistence.messaging.QueueUtils.flushMessages(QueueUtils.java:378)
at com.capitaliq.loader.persistence.AbstractControlFacadeHelper$ControlFacadeRetrier.performOperation(AbstractControlFacadeHelper.java:303)
at com.capitaliq.loader.persistence.AbstractRetryLimitedDurationWithTimout.retryContinuously(AbstractRetryLimitedDurationWithTimout.java:66)
at com.capitaliq.loader.persistence.AbstractControlFacadeHelper.performRetries(AbstractControlFacadeHelper.java:138)
... 12 more
Caused by: java.lang.ClassNotFoundException: oracle.xml.parser.v2.XMLParseException
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 18 more
at com.capitaliq.loader.control.ClientManager$HeartbeatCity.safeRun(ClientManager.java:429)
at com.capitaliq.common.thread.SafeRunnable.run(SafeRunnable.java:57)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoClassDefFoundError: oracle/xml/parser/v2/XMLParseException
at oracle.jdbc.driver.OracleSQLXML.setString(OracleSQLXML.java:415)
... 12 more
Caused by: java.lang.ClassNotFoundException: oracle.xml.parser.v2.XMLParseException
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 18 more  
   Caused by: oracle.xml.parser.v2.XMLParseException 
```

从堆栈跟踪中，我可以推断我需要在我的类路径中有这个 jar 来读取 xml，但我不能拥有它，因为它与我的 hibernate 版本不兼容。在升级到 Hibernate 3.6 之前，我没有出现此错误。**我的问题是，有人以前有过这种情况吗？还有另一个与 oracle 数据库一起使用的 xmlparser 吗？**

如果我针对 SQL 数据库运行我的代码，如果 jar 在类路径上，我会得到同样的错误。但是，如果我删除一切正常。所以我知道这与 oracle 数据库有关。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:35:13.520

试试这个：使用以下命令解压缩文件：

```
"C:\Program Files\Java\jdk1.7.0_02\bin\jar" -xvf xmlparserv2.jar 
```

更改 META-INF/services 中文件中的条目，如下所示：

*   **`javax.xml.parsers.DocumentBuilderFactory` **替换** **为****_**`oracle.xml.jaxp.JXDocumentBuilderFactory` **`com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl`****

*****   **对于**javax.xml.parsers.SAXParserFactory**将**oracle.xml.jaxp.JXSAXParserFactory**替换为**com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl

    *   **对于**javax.xml.transform.TransformerFactory**将**oracle.xml.jaxp.JXSAXTransformerFactory**替换为**com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl**** 

 ****使用以下命令重新 jar 文件：

```
"C:\Program Files\Java\jdk1.7.0_02\bin\jar" -cvfm xmlparserv2.jar META-INF\MANIFEST.MF -c ./ . 
```

将此新的 xmlparserv2.jar 文件复制到项目的 lib 目录中****

# php - PHP - 从 PHP 执行 Python

> ID：11853970
> 
> 赞同：-2
> 
> 时间：2012-08-07T20:52:58.473
> 
> 标签：php, python, html

我正在尝试从网页在服务器上运行 Python 脚本，我决定使用 PHP 来执行它。从我从在线教程中阅读的内容来看，它应该足够简单才能工作，但是每当我尝试使用 PHP 提交表单时，我都会收到以下错误代码。

```
Parse error: syntax error, unexpected T_STRING in /home/dertyui/public_html/root/wwwdustin/rss/sm/runpython.php on line 6 
```

不完全确定我做错了什么，代码太短了，我希望它能正常工作。我确保仔细检查服务器上的安全模式是否关闭，并将文件权限设置为 755。这是我的其他代码：

提交表单页面 (index.html)

```
<html>
<head>
</head>
<body>

<form action="runpython.php" method="post">
Status: <input type="text" name="status" />
<input type="submit" />
</form>

</body
</html> 
```

RunPython.php（运行 Python 脚本）

```
<?php

$commandtorun = '/usr/bin/python2.7 /home/dertyui/python/scripts/socialmedia/StatusPoster.py --accountname dustin --statusupdate ' . $_POST["status"] . '--statusupdatelink http://google.ca'

exec($commandtorun);

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T20:53:38.910

在声明变量的第一行之后，您缺少一个分号。

# phpunit - 尝试使用配置 XML 文件运行 PHPUnit 会导致异常

> ID：11853974
> 
> 赞同：9
> 
> 时间：2012-08-07T20:53:28.867
> 
> 标签：phpunit, integration, phpstorm

我正在尝试（很长一段时间，在 PHP 聊天室的小伙子的帮助下）成功地将 PHPUnit 与 PhpStorm 集成。

我已将`phpunit.xml`文件设置如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit
        backupGlobals               = "false"
        backupStaticAttributes      = "false"
        colors                      = "true"
        convertErrorsToExceptions   = "true"
        convertNoticesToExceptions  = "true"
        convertWarningsToExceptions = "true"
        processIsolation            = "false"
        stopOnFailure               = "false"
        syntaxCheck                 = "false"
        bootstrap                   = "bootstrap.php" >

    <testsuites>
        <testsuite name="Lamed Test Suite">
            <directory>Custom/*</directory>
        </testsuite>
    </testsuites>

</phpunit> 
```

并成功配置 PHP Storm 以从该文件中读取。

问题是，我在运行测试时在 PhpStorm 的控制台中收到以下错误：

```
D:\Websites\php\php.exe C:\fakepath\ide-phpunit.php --bootstrap D:\Websites\htdocs\lamed\tests\boostrap.php --configuration D:\Websites\htdocs\lamed\tests\phpunit.xml
Testing started at 23:51 ...

Fatal error: Uncaught exception 'PHPUnit_Framework_Exception' with message 'Neither "Lamed Test Suite.php" nor "Lamed Test Suite.php" could be opened.' in D:\Websites\php\pear\PHPUnit\Util\Skeleton\Test.php:100
Stack trace:
#0 D:\Websites\php\pear\PHPUnit\TextUI\Command.php(157): PHPUnit_Util_Skeleton_Test->__construct('Lamed Test Suit...', '')
#1 C:\Users\Dor\AppData\Local\Temp\ide-phpunit.php(95): PHPUnit_TextUI_Command->run(Array, true)
#2 C:\Users\Dor\AppData\Local\Temp\ide-phpunit.php(434): IDE_PHPUnit_TextUI_Command::main()
#3 {main}
  thrown in D:\Websites\php\pear\PHPUnit\Util\Skeleton\Test.php on line 100

Process finished with exit code 255 
```

显然是从元素的`name=`属性中读取的。`testsuite`问题是，**为什么？**

### 更新

*   我正在运行**Windows 7 x64 SP1 和 PHPStorm 4.0.3**。PHPUnit 版本是**3.6.12**。
*   在 CLI 中键入`phpunit -c "D:\Websites\htdocs\lamed\tests\phpunit.xml"`实际上会给出相同的结果。
*   我的`Custom`目录与文件位于同一文件夹中`phpunit.xml`。

我很困惑。将不胜感激任何形式的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T07:07:49.753

`/*`从`<directory>`元素中删除。这个元素的文本内容应该指向一个目录——而不是一个文件 glob。

```
<directory>Custom</directory> 
```

有关指定单个文件和包含模式的更多详细信息，请参阅[PHPUnit 配置文档](https://phpunit.de/manual/current/en/organizing-tests.html#organizing-tests.xml-configuration)。

默认情况下，将检查所有以`Test.php`(eg `UserTest.php`) 结尾的文件以查找测试用例。如果您有不同的命名约定，您可以切换或添加`suffix`属性。例如，如果您将测试命名为这样，请`User.test.php`使用：

```
<directory suffix=".test.php">Custom</directory> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T15:17:28.463

你所经历的是一个后备。看起来您的测试套件是空的（也没有其他额外的非空测试套件）。

在这种情况下，PHPUnit 也会尝试打开一些合适的东西，但这是行不通的。然后你会看到一个错误。

*   如果您只有一个空的测试套件，您将看到带有测试套件名称的异常，并为尝试添加了 php。

    ```
    Uncaught exception 'PHPUnit_Framework_Exception' with message 'Neither "Empty-Testuite.php" nor "Empty-Testuite.php" could be opened.' 
    ```

*   如果您有多个空的测试套件并且没有工作的测试套件，您将只看到关于 php 的错误，没有添加名称。

    ```
    Uncaught exception 'PHPUnit_Framework_Exception' with message 'Neither ".php" nor ".php" could be opened.' 
    ```

*   如果您至少有一个工作测试套件但有一个或多个空测试套件，您将看到每个空测试套件的简短报告但没有错误：

    ```
    Empty test suite. 
    ```

当我写到这是一个后备时，它一定不意味着这种行为是 PHPUnit 想要的。在您的案例中看到错误是可以的，因为在您开始测试之前，您至少需要运行一个。在您开始配置测试套件之前，同样如此。

修复测试丢失和错误消失的根本问题。

另一个答案中提到的通配符`*`- 即使我确信没有它是正确的 - 据我所知，它对你的问题没有任何作用。

* * *

> 此答案中的信息基于
> 
> *   Sebastian Bergmann 的 PHPUnit 3.6.7。
> *   php.net 的 PHP 5.4.5

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T14:26:42.633

有同样的问题将目录的值更改为绝对路径而不是相对路径，并且它起作用了。例如，我将测试更改为 C:\eclipse\Workspace\testweb

太糟糕了，我不得不浏览很多非信息，这在文档中没有提到，也没有记录如何使用配置 xml 文件启动命令行界面。

phpunit -c 测试/all.xml

即使您添加文件元素 C:\eclipse\Workspace\testweb\tests\classes\something.php 不起作用但 C:\eclipse\Workspace\ testweb\tests\classes\somethingtest.php 会工作

# c# - 用 Moq 和 Moles 测试非虚拟公共方法？

> ID：11853975
> 
> 赞同：1
> 
> 时间：2012-08-07T20:53:30.783
> 
> 标签：c#, moq, moles

如有必要，您将如何使用 Moq 和 Moles 测试以下代码？

我想检查在引发“SomeEvent”时是否调用了一次“TestCommand.RaiseCanExecuteChanged()”命令。

困难在于 RaiseCanExecuteChanged 是 Microsoft.Practices.Prism.Commands.DelegateCommandBase 上的公共非虚拟方法，而 Moles 引入了其他复杂性，其中之一是它似乎无法仅模拟没有返回值的方法。

```
using Microsoft.Practices.Prism.Commands;
public class SomeEventClass
{
    public event Action SomeEvent;
}

public class TestClass
{
    public TestClass(SomeEventClass someEventClass)
    {
        TestCommand = new DelegateCommand(() => { /* do stuff */}, CanExecute);
        someEventClass.SomeEvent += () => TestCommand.RaiseCanExecuteChanged();
    }

    private bool CanExecute()
    {
        //Some logic
        return true;
    }

    public DelegateCommand TestCommand { get; private set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:03:18.183

Moles 应该能够填充没有返回类型的方法。有些东西正在阻止 Moles 绕道而行。

我建议使用存根和依赖注入，而不是构建模拟（这可能需要一段时间）或使用 Moles 填充调用。

# javascript - Google 放置自动完成功能 - 限制结果数量

> ID：11853977
> 
> 赞同：0
> 
> 时间：2012-08-07T20:53:39.073
> 
> 标签：javascript, google-maps-api-3, google-places-api

我有什么方法可以在谷歌地方自动完成中显示少于 5 个（默认）的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:00:30.557

无法显示少于 5 个我熟悉的结果，但是您可以使用 css 更改自动完成下拉菜单的高度。

`div`保存自动完成结果的 pac-container 类使用已将溢出设置为隐藏的样式设置样式，因此如果将高度设置为 50px 之类的值，则任何填充 div 超过 50px 的结果都将被隐藏。在[示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)中，这将隐藏最后两个结果并仅显示三个。

```
.pac-container {
  height: 50px;
} 
```

如果只想更改下拉菜单的高度并允许用户向下滚动以查看额外的结果，您可以将高度设置为 50px 并设置 overflow-y 滚动。

```
.pac-container {
  height: 50px;
  overflow-y: scroll;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-10-16T05:59:30.167

使用现代 CSS，您甚至可以限制显示结果的数量。例如 3 个结果：

```
.pac-item { display: none; }
.pac-item:nth-child(-n+3) { display: block; } 
```

或者介于两者之间:-) [https://developer.mozilla.org/de/docs/Web/CSS/:nth-child](https://developer.mozilla.org/de/docs/Web/CSS/:nth-child)

html 类名的文档可以在 Google 官方页面上找到：[https ://developers.google.com/maps/documentation/javascript/places-autocomplete#style-autocomplete](https://developers.google.com/maps/documentation/javascript/places-autocomplete#style-autocomplete)

# android - android openOrCreateDatabase 仅适用于模拟器

> ID：11853983
> 
> 赞同：1
> 
> 时间：2012-08-07T20:54:25.810
> 
> 标签：android, sqlite, ddms

我注意到 openOrCreateDatabase 仅适用于模拟器而不适用于手机，当我右键单击项目并“作为 Android 应用程序运行”时。我检查了 DDMS，数据库是通过模拟器成功创建的，但不是实际的设备。在手机上测试时，我根本没有收到任何错误消息。是的，我确实知道数据库助手类，我也尝试过，再次没有错误消息。所以我想知道，是否存在权限问题？需要设置某种配置以便在手机上进行测试时创建 SQLite 数据库？任何帮助表示赞赏。谢谢。

PS 我正在关注本教程：[http ://www.youtube.com/watch?v=OUoGnvz_Yw4](http://www.youtube.com/watch?v=OUoGnvz_Yw4)

* * *

编辑添加代码：在这里......在模拟器中工作正常，设备上没有任何反应。任何帮助表示赞赏。再次感谢。

```
package com.solitario.dbtest1;

import android.app.Activity;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;

public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        SQLiteDatabase db = this.openOrCreateDatabase("dbtest1.db",MODE_PRIVATE,null);
        db.execSQL("CREATE TABLE IF NOT EXISTS FunnyNames (email VARCHAR, firstName VARCHAR, lastName VARCHAR);");
        db.close();
    }
} 
```

* * *

针对 Rob 的问题进行编辑：密切关注我的 LogCat 我看到以下两行：

```
08-07 21:44:33.439: D/Database(2936): dbopen(): path = /data/data/com.solitario.dbtest1/databases/dbtest1.db, flag = 6
08-07 21:44:33.439: D/Database(2936): dbopen(): path = /data/data/com.solitario.dbtest1/databases/dbtest1.db, free size = 888 
```

我试图通过在我的终端中输入这个来提取数据库，并得到“权限被拒绝”。

```
solitario@ubuntu:~/sdk/platform-tools$ sudo ./adb pull /data/data/com.solitario.dbtest1/databases/dbtest1.db
failed to copy '/data/data/com.solitario.dbtest1/databases/dbtest1.db' to './dbtest1.db': Permission denied 
```

因此，如果我尝试拉取一个不存在的文件，则计算终端会给我一个不同的响应，我进入我的 droid 设置，清除了应用程序的数据但没有卸载应用程序。然后再次尝试从终端拉数据库，并得到一个“不存在”。

```
solitario@ubuntu:~/sdk/platform-tools$ sudo ./adb pull /data/data/com.solitario.dbtest1/databases/dbtest1.db
remote object '/data/data/com.solitario.dbtest1/databases/dbtest1.db' does not exist 
```

所以看起来它确实创建了数据库，但是 DDMS 不会向您显示数据库何时创建，终端也不会允许您拉取它以查看它。

所以，我想修改我的问题......在构建一个 android 应用程序并在实际设备上进行测试时，如何验证您的命令是否成功？有什么工具可以验证我的查询是否已在机器人上执行？

再次感谢您的阅读和您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T03:57:15.243

要在非 root 设备上调试时查看数据库，您需要将其复制到公开可见的位置，例如 SD 卡。

您可以使用以下代码将您的数据库复制到 SD 卡（不要忘记在发货前禁用此代码）。在您想要验证您的数据库处于什么状态时调用它。

```
String sourcePath = "/data/data/com.solitario.dbtest1/databases/dbtest1.db";
File sourceFile = new File(sourcePath);

FileInputStream fis = new FileInputStream(sourceFile);

String outFilePath = Environment.getExternalStorageDirectory() + "/dbtest1.db";

OutputStream output = new FileOutputStream(outFilePath);

byte[] buff = new byte[1024];
int len;
while ((len = fis.read(buff)) > 0) {
    output.write(buff, 0, len);
}
output.flush();
output.close();
fis.close(); 
```

如果您的设备中没有 SD 卡，您可能需要修改输出目录。

将它放在 SD 卡上后，您可以使用 Eclipse 中的 DDMS 将其复制到您的开发机器上。

一旦它在您的开发机器上，[SQLite DB 浏览器](http://sqlitebrowser.sourceforge.net/)就可以打开数据库并浏览/查询它等。

# c++ - 调用成员函数，在类外声明

> ID：11853988
> 
> 赞同：2
> 
> 时间：2012-08-07T20:54:44.307
> 
> 标签：c++, visual-studio-2010, function, member-functions

我想调用'int Random::random(int lower, int upper) 函数，但是我遇到一个问题，说'成员函数可能不会在它的类之外重新声明'我也试图以以下形式提供解决方案以下：

'随机米；m.Random()'

其中说以下问题“函数调用中的参数太少”

下面是 main.cpp 文件

```
#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

#include "Circle.h"
#include "Random.h"

int main()
{
    Random m;
    m.random();

    // Array 1, below section is to populate the array with random 
    // radius number within lower and upper range
    int CircleArrayOne [5];
    const int NUM = 5;

    srand(time(NULL));

    for(int x = 0; x < NUM; ++x)
    {
        int Random::random(int lower, int upper);
    }

    // output the radius of each circle
    cout << "Below is the radius each of the five circles in the second array. " << endl;

    // below is to output the radius in the array
    for(int i = 0; i < NUM; ++i) 
    {
        cout << CircleArrayOne[i] << endl;
    }

    system("PAUSE");
    return 0;
}

int Random::random(int lower, int upper)
{
    cout << "Enter lower number: " << lower << endl;
    cout << "Enter upper number: " << upper << endl;

    int range = upper - lower + 1;
    return (rand() % range + lower);
} 
```

下面是 Random.h 文件

```
#pragma once
#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

class Random
{
public:
    static void initialiseSeed();
    // random number initialised
    // random number has been initialised to the current time.

    static int random(int lower, int upper);
    // this function will return a positive random number within a specific lower and 
    // upper boundary.
}; 
```

你能帮我解决我哪里出错了吗。非常感谢所有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:56:16.377

你的原型：

```
static int random(int lower, int upper); 
```

你的来电：

```
Random m;
m.random(); 
```

您要么需要提供参数，要么需要为它们提供一些默认值。此外，由于该方法是`static`，因此您不需要实例来调用它。

```
Random::random(0,100) 
```

足够。

甚至评论也暗示了这一点：

```
// this function will return a positive random number within a specific lower and 
// upper boundary. 
```

您既不提供下限也不提供上限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T21:01:26.240

这里有两个问题。

首先，您调用`m.random()`- 不存在这样的功能。你需要给它两个 int 参数。另外，因为它是`static`，所以你根本不需要`Random m`；你可以使用`Random::random(some_int, some_other_int);`.

其次，你有这个：

```
for(int x = 0; x < NUM; ++x)
{
    int Random::random(int lower, int upper);
} 
```

这里实际上有两个问题：首先，这不是函数调用，而是函数声明。函数声明的形式`return_type function_name(arg_type arg_name /* etc. */);`与您在此处的形式相同。要调用它，您只需将实际值传递给它，而不包括返回值——这就是它会给您的。

其次，您需要将结果实际存储在某个地方。您的评论表明这应该是`CircleArrayOne`，但您实际上并没有像您声称的那样填充它。

试试这个：

```
for(int x = 0; x < NUM; ++x)
{
    CircleArrayOne[x] = Random::random(0, 10); // assumed 0 and 10 as the bounds since you didn't specify anywhere; you could use variables here also
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T21:02:46.597

问题在于您调用函数的语法错误，它与声明函数的语法不同。如果要调用函数，请给出函数的名称，后跟括号。在括号之间，您可以放置​​您需要提供的任何参数。您可能想对函数的返回值做一些事情。现在我并没有真正遵循你想要做的事情，但这样的事情可能就是你正在寻找的。

```
int result = Random::random(1, 10); 
```

因此，函数的名称`Random::random`，后跟参数，在这种情况下为 1 和 10，您可能想要更改这些值。在这种情况下，我从函数调用中获取返回值并将其分配给一个名为`result`. 同样，您可能想要更改它。

这将包含在任何有关 C++ 的书籍中，可能值得投资一本。

# magento - Magento：如何获取交易响应

> ID：11853991
> 
> 赞同：0
> 
> 时间：2012-08-07T20:54:46.813
> 
> 标签：magento

有谁知道如何为 Magento 中的给定订单获取以下数组或类似的数据？更具体地说，我对`avsaddr`、`avszip`和感兴趣`cvv2match`。

```
Array 
( 
    [result] => 0 
    [pnref] => xxxx
    [respmsg] => Approved 
    [authcode] => 120632 
    [avsaddr] => N 
    [avszip] => Y 
    [cvv2match] => N 
    [hostcode] => 00 
    [procavs] => Z 
    [proccvv2] => N 
    [iavs] => N 
    [request_id] => xxx
    [result_code] => 0 
) 
```

我使用的是 Payflow Pro（不是 Payflow Link），我们启用了 AVS 和 CVV 验证。他们正在 Paypal 端进行检查和标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:34:01.877

你也许可以在`Mage_Sales_Model_Order_Payment`模型中得到它。看着`sales_flat_order_payment`表格，我看到了`cc_avs_status`，它应该提供一些关于支付的 AVS 响应的信息。

从我正在查看的测试付款数据来看，该值未填充，因此它可能会因您使用的付款方式而异，是否存储该信息。

`Mage_Authorizenet_Model_Directpost`从方法来看，似乎确实设置了该值`_fillPaymentByResponse()`。

# internet-explorer - 如何访问 IOmNavigator c++ 接口

> ID：11853993
> 
> 赞同：2
> 
> 时间：2012-08-07T20:55:03.820
> 
> 标签：internet-explorer, webbrowser-control, mshtml

我在我的 c++ 应用程序中托管了 mshtml。我试图在 IHTMLDocument 中查询 IOmNavigator 但什么也没得到。我也尝试对 IHTMLWindow2 做同样的事情，但没有运气。

我正在尝试访问 IOmNavigator 以获取浏览器版本号。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-07T17:42:04.950

```
IHTMLDocument2 *pDoc; IHTMLWindow2 *ihw; IOmNavigator *nvg; BSTR uastr; AnsiString mouni;
if (SUCCEEDED(CppWebBrowser1->Document->QueryInterface(IID_IHTMLDocument2,(void**)&pDoc)))
{
  pDoc->get_parentWindow(&ihw); ihw->get_navigator(&nvg); nvg->get_userAgent(&uastr);
  mouni=AnsiString(uastr).UpperCase(); nvg->Release(); ihw->Release(); pDoc->Release();
  if (mouni.Pos("TRIDENT")>0 && mouni.Pos("MSIE")==0) { lmrg=8; tmrg=8;}
} 
```

上面的代码片段 (BCB5) 显示了如何获取 IHTMLDocument2 接口，然后是 IHTMLWindow2 接口，然后是 IOmNavigator 接口，然后是 useragent 字符串，并相应地设置一些边距（IE11 在呈现页面的方式上与 IE10 和以前的版本不同）。HTH，图形。

# opengl-es - webGL中的gluOrtho2D

> ID：11853994
> 
> 赞同：0
> 
> 时间：2012-08-07T20:55:05.180
> 
> 标签：opengl-es, webgl, projection-matrix

**更新**：这段代码确实有效。我的错误是对`glViewport`; 这似乎是浏览器窗口锚定的，而不是 webGL 中的画布相关的，它把所有东西都推到了屏幕外。所以这个问题中的代码显示了如何为 WebGL 创建正确的正交投影：

webGL 没有`gluOrtho2D`. 我已经复制 - 并转置，因为 OpenGL 矩阵应该是 - 从[`glOrtho`](http://www.opengl.org/sdk/docs/man/xhtml/glOrtho.xml)：

```
function createOrtho2D(left,right,bottom,top) {
    var near = -1, far = 1, rl = right-left, tb = top-bottom, fn = far-near;
    return [        2/rl,                0,              0,  0,
                       0,             2/tb,              0,  0,
                       0,                0,          -2/fn,  0,
        -(right+left)/rl, -(top+bottom)/tb, -(far+near)/fn,  1];
} 
```

然后我使用`createOrtho2D(0,canvas.offsetWidth,canvas.offsetHeight,0)`.

例如，`createOrtho2D(0,1024,768,0)`=

```
[ 0.001953125,                      0,  0,  0, 
            0, -0.0026041666666666665,  0,  0, 
            0,                      0, -1,  0, 
           -1,                      1,  0,  1] 
```

我上传这个`gl.uniformMatrix4fv(this.program.mvp,false,mvp);`并在顶点着色器中应用它`gl_Position = mvp * vec4(vertex,z,1.0);`。

但是，这不起作用：

*   点 10,10 在屏幕上不可见
*   点 10,100 就在屏幕顶部

我做错了什么？

# python - 导入两个同名包

> ID：11853995
> 
> 赞同：5
> 
> 时间：2012-08-07T20:55:04.667
> 
> 标签：python, django, pip

我使用 pip 安装了两个我需要的库，它们与它们的功能相关，但不能处理它们中的任何一个。问题是，一旦解包，它们具有相同的名称，并且它们的功能都被导入为：

```
import the_package
from the_package import a, b 
```

**更新**：我的意思是用前面的任何一种方式导入 the_package，不一定同时也不是按顺序导入。

因为我通过 pip 安装它们，并且是从[需求文件](http://www.pip-installer.org/en/latest/requirements.html#the-requirements-file-format)安装的，所以我的队友可以以同样的方式安装它们我猜重命名包/模块不是一个选项（如果是，我很感激指出如何自动执行）

我想出的一件事是给 pip 一些选项，可以将包安装在具有某种别名/前缀的目录中，因此它们的名称可能不同，但是 pip 文档对我来说并没有多大用处。

在此先感谢您的帮助：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T21:11:09.273

您应该在安装时添加它

```
pip install --install-option="--prefix=$PREFIX_PATH" package_name 
```

并将这两个包安装到不同的文件夹。然后将它们导入为

```
import Folder1.mymodule as A
import Folder2.mymodule as B 
```

可能还想通知包创建者。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T21:01:05.777

```
import the_package
from the_package import a, b 
```

接着：

```
import the_package as package_b
from the_package import a as a_, b as b_ 
```

相应地使用它们，这不会与命名空间冲突。