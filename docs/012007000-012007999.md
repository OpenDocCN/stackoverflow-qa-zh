# StackOverflow 问答 12007000-12007999

# linux - 在 Linux 上，当您不是 root 时，获取每个用户使用的磁盘空间

> ID：12007001
> 
> 赞同：2
> 
> 时间：2012-08-17T13:43:32.410
> 
> 标签：linux, storage, disk, du

`du --max-depth=1`将给出您登录的用户的使用情况。但是我们有一个由多个团队共享的开发箱，因此很难找到罪魁祸首。

如果我是 root，我可以做到，但我不是 root 用户，并且不想一直要求系统管理员找到使用最多的用户。

请对此有任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T13:46:13.610

您无法确定您没有读取/执行权限的目录的大小，因此这只有在成为 root 时才有可能。

# javascript - 使用 JQuery 修改函数写入文档的数据

> ID：12007003
> 
> 赞同：0
> 
> 时间：2012-08-17T13:43:50.233
> 
> 标签：javascript, jquery, ajax

我的大部分 html 是通过 Jquery 请求提供的数据。通过将其插入到“主”div 中，将其写入页面，如下所示：

```
$("#main").html(passedData);
} 
```

该页面运行良好，但现在我在尝试将任何 javascript 添加到写入 div 的数据时遇到问题。

即我有插入到 div 中的表格，并且我正在尝试编写在单击其他单元格时隐藏某些单元格的脚本。我已经使用[http://jsfiddle.net/](http://jsfiddle.net/)来确保我所有的 JS 都是正确的，但由于某种原因，似乎 JS 函数在 div 中看不到该数据并且不会对其进行操作。

有什么我想念的吗？当将数据写入这样的页面时，您是否必须做某些事情才能使用 javascript 引用该数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:56:06.017

您必须将事件处理程序附加到这些“未来”元素，如下所示：

```
$("#main").on("click", ".myelement", function(){
        // Do something
}); 
```

[在这里](http://api.jquery.com/on/)阅读更多。此外，如果您发布实际代码会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:50:13.210

没有实际代码很难排除故障，但我几乎可以肯定问题是当您执行 jQuery 代码时，通过 AJAX 拉入的元素不存在。因此，它们不会附加任何事件。

您应该考虑使用[jQuery 的 .on() 事件处理程序](http://api.jquery.com/on/)。将它附加到 DOM-ready 触发时存在的父元素，您可以操作其中动态拉入的任何元素。

# android - 自定义相机/图库应用程序未准确显示 SD 卡/文件夹

> ID：12007004
> 
> 赞同：1
> 
> 时间：2012-08-17T13:43:50.653
> 
> 标签：android, android-sdcard, galaxy-tab

我已经构建了一个自定义相机应用程序，它将图片保存到我的 sdcard 上的特定文件夹中，并有自己的画廊视图用于查看该文件夹“/sdcard/myApp/images”中的照片

我一直在两款不同的平板电脑上进行测试，Galaxy Tab-1 10 英寸和 Galaxy Tab-2 10 英寸。相机在两台平板电脑上都可以正常工作，拍照并将它们保存到应用程序创建的文件夹中。但 Tab1 上的图库视图并未显示该文件夹中的所有照片。tab-2 总是显示文件夹中当前的所有照片，但 tab-1 通常只显示该文件夹中上次重新启动平板电脑时的图像。

因此，在 Tab-1 上，如果我在该文件夹中没有照片，然后用相机拍摄两张照片并切换到画廊视图，它不会显示任何照片。如果我然后重新启动，然后转到画廊视图，我会看到两张照片，但如果我切换到相机并拍摄另一张照片，画廊只会显示原始的两张，直到我重新启动。

适用于 android 3.2 + 但 3.1 不行！

有任何想法吗？

在galleryView的构造函数中将光标发送到适配器：

```
 // Set up an array of the Thumbnail Image ID column we want
    String[] projection = {MediaStore.Images.Media._ID};
    // Create the cursor pointing to the SDCard
    cursor = managedQuery( MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
            projection, // Which columns to return
            MediaStore.Images.Media.DATA + " like ? ",
            new String[] {"%LC/images%"},  
            MediaStore.Images.Media._ID + " DESC");

    // Get the column index of the Thumbnails Image ID
    columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media._ID);

    ga.setAdapter(new GallAdapter(this,cursor,columnIndex)); 
```

适配器：

```
public class GallAdapter extends BaseAdapter {
    public Cursor cursor;
    private int columnIndex;
    private Context context;
    int imageBackground;
    String url;
    Uri uri;
    int originalImageId;
    int imageID;
    int columnData;
    ViewGroup myp;
    ImageView d;

    public GallAdapter(Context ctx, Cursor cur, int cIn ) {
        context = ctx;
        columnIndex = cIn;

        cursor = cur;
        Log.v("GallAdapter", "COUNT:"+getCount());
    }

    @Override
    public int getCount() {

        return cursor.getCount();
    }

    @Override
    public Object getItem(int position) {

        return position;
    }

    @Override
    public long getItemId(int position) {

        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        myp = parent;
        View v;
        if(convertView ==null){
            v = LayoutInflater.from(context).inflate(R.layout.galitem, parent, false);
        }else{
            v = convertView;
        }

        ImageView photo = (ImageView) v.findViewById(R.id.imageView);
        ImageView border = (ImageView) v.findViewById(R.id.borderView);
        d = (ImageView) v.findViewById(R.id.delView);

        // Move cursor to current position
        cursor.moveToPosition(position);

        // Get the current value for the requested column
        imageID = cursor.getInt(columnIndex);
        // obtain the image URI
        uri = Uri.withAppendedPath( MediaStore.Images.Media.EXTERNAL_CONTENT_URI, Integer.toString(imageID) );
        url = uri.toString();
        // Set the content of the image based on the image URI
        originalImageId = Integer.parseInt(url.substring(url.lastIndexOf("/") + 1, url.length()));
        Bitmap b = MediaStore.Images.Thumbnails.getThumbnail(context.getContentResolver(),
                        originalImageId, MediaStore.Images.Thumbnails.MINI_KIND, null);
        photo.setImageBitmap(b);

        photo.setScaleType(ImageView.ScaleType.FIT_CENTER); 
        d.setTag(uri);
        d.setOnClickListener(new OnClickListener(){

            public void onClick(View v) {

                String path = getRealPathFromURI((Uri) v.getTag());
                alertBox("Warning!", "Are you sure you want to delete this photo?", path, v);

            }

        });

        return v;
    } 
```

再次，这适用于 tab-2 (os 4.0) 和 tab-1，因为固件已在 tab-1 和 os 从 3.1 更新到 3.2，但为什么它不工作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:03:57.337

试试这个以刷新您的媒体文件。

```
this._context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.parse("file://" + Environment.getExternalStorageDirectory() + "/Hugg/" + name))); 
```

# maven - 多模块项目上的 Maven 站点无法解决依赖关系

> ID：12007005
> 
> 赞同：6
> 
> 时间：2012-08-17T13:43:51.967
> 
> 标签：maven, build, continuous-integration, hudson, multi-module

我想将我的持续集成工作（Hudson）分成两个步骤。（因为同时构建和报告的运行时间太长了。）在第一份工作中，我成功地使用“mvn package”构建了我的**多模块 maven 项目。**然后我将我的工作区复制到另一个位置并尝试仅使用目标“站点”和/或 findbugs/checkstyle/pmd 再次构建项目以创建报告。但这不起作用！Maven**无法解决**我的子模块的依赖关系。（但所有 JAR 都在其目标文件夹中可用。）

示例：我的结构如下所示：

*   家长
    *   一个
    *   乙
    *   C
    *   D

项目 C 作为依赖项目 B。

当我使用“mvn site”构建所有内容时，它会为项目 A 和 B 生成所有报告。但在项目 C 处停止并显示错误消息“无法解决项目 B 的依赖关系”。但是项目 B 已经用“mvn package”构建了。即我可以在其目标文件夹中找到项目B 的JAR 文件。

有没有办法在没有“mvn install”的情况下解决子模块 B 的依赖关系？（我不想在我的 ci 服务器上执行此操作。我担心这对于具有相同代码库的其他工作可能很危险。）

**2012 年 8 月 20 日更新：**

根文件夹的POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <name>Foo</name>
    <groupId>foo</groupId>
    <artifactId>bar</artifactId>
    <version>1.0</version>
    <packaging>pom</packaging>
    <modules>
        <module>parent</module>
    </modules>
</project> 
```

父 POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <name>Foo</name>
    <groupId>foo</groupId>
    <artifactId>parent</artifactId>
    <version>1.0</version>
    <packaging>pom</packaging>
    <modules>
        <module>../bar-a</module>
        <module>../bar-b</module>
        <module>../bar-c</module>
        <module>../bar-d</module>
    </modules>
    [...]
    <reporting>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>findbugs-maven-plugin</artifactId>
                <version>2.5.1</version>
                [...]
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-pmd-plugin</artifactId>
                <version>2.7.1</version>
                [...]
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>2.9.1</version>            
                [...]
            </plugin>
        </plugins>
    </reporting>
</project> 
```

B的POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>foo</groupId>
        <artifactId>parent</artifactId>
        <version>1.0</version>
        <relativePath>../parent</relativePath>
    </parent>
    <name>Bar B</name>
    <artifactId>bar-b</artifactId>
    <version>1.0</version>
    <packaging>jar</packaging>  
    [...]
</project> 
```

C的POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>foo</groupId>
        <artifactId>parent</artifactId>
        <version>1.0</version>
        <relativePath>../parent</relativePath>
    </parent>
    <name>Bar C</name>
    <artifactId>bar-c</artifactId>
    <packaging>jar</packaging>
    [...]
    <dependencies>
        <dependency>
            <groupId>foo</groupId>
            <artifactId>bar-b</artifactId>
            <version>1.0</version>
        </dependency>
    </dependencies>
    [...]
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:17:06.180

我面临着完全相同的“长时间”问题。

正如你所建议的那样，用你的工作方式解决它的唯一方法（我认为）确实是 mvn install。

但问题确实是您尝试在复制工作区时具有不同行为的方式。相反，您应该考虑 CI 将根据您的需要（每次提交或每小时）频繁地构建和测试，但只报告一次（例如每个午夜）。您将能够拥有更快的连续构建，并在夜间更正文档和报告。

这就是我们的工作方式，已经足够了。我们为此使用 jenkins，但我认为您可以使用每个 CI 软件触发它）！

```
@hourly : mvn clean package (or install) --> from 1 to 5 minutes to run all test on all modules
@daily : mvn clean install site -->  from 15 to 35 minutes to run all test on all modules + doc + reports + PDF reports 
```

您还可以使用配置文件来触发不同的行为，但这对于这样的基本用途来说太复杂了。

# java - 如何使用jackson从嵌套的Json字符串中获取2个值

> ID：12007007
> 
> 赞同：1
> 
> 时间：2012-08-17T13:43:53.907
> 
> 标签：java, json, jackson

我正在使用杰克逊库从 Json 反序列化。我只需要从这个 json 中提取 2 个值，即 c1 和 d1。我已经使用了这段代码...我需要知道克服获取 c1 和 d1 值的正确方法...

我的 json

```
{"Alpha":{"A":{"B":{"C":{"c1":1234,c2:"abcd"},"D":{"d1":"xyz","d2":5678,"d3":"qwerty"},"E":[{"e1":456,"e2":"mnop"},{"e1":098,"e2":"qrst"}]}}},"X"{"x1":8098}}

ObjectMapper mapper = new ObjectMapper();
mainclass alphaobj = mapper.readValue(new File("C:\\employee.json"), mainclass.class);
System.out.println(alphaobj.A.B.C.getc1()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:12:25.920

也许您应该改用杰克逊[树模型](http://wiki.fasterxml.com/JacksonTreeModel)？

就像是：

```
JsonNode root = mapper.readTree(file);
int c1 = root.path("Alpha").path("A").path("C").path("C1").intValue(); 
```

等等。

# java - 如何从运行时类路径中读取目录？

> ID：12007012
> 
> 赞同：12
> 
> 时间：2012-08-17T13:44:14.093
> 
> 标签：java, classpath

我的 Java 应用程序需要能够找到`myconfig/`将捆绑在同一个 JAR 中的目录：

```
myjar.jar/
    com/
        me/
            myproject/
                ConfigLoader.java --> looks for myconfig/ directory and its contents
    myconfig/
        conf-1.xml
        conf.properties
        ... etc. 
```

我实际上如何`myconfig/`从运行时类路径中读取这个目录？我做了一些研究，似乎从类路径读取**文件**的正常方法不适用于**目录**：

```
InputStream stream = ConfigLoader.class.getResourceAsStream("myconfig"); 
```

那么有谁知道如何从运行时类路径（而不是单个文件）中读取整个目录？提前致谢！

请注意：无法单独加载文件，`myconfig`这是一个包含数千个属性文件的目录。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T14:01:36.153

您可以使用`PathMatchingResourcePatternResolver`Spring 提供的。

```
public class SpringResourceLoader {

    public static void main(String[] args) throws IOException {
        PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();

        // Ant-style path matching
        Resource[] resources = resolver.getResources("/myconfig/**");

        for (Resource resource : resources) {
            InputStream is = resource.getInputStream();
            ...
        }
    }
} 
```

我没有对退回的东西做任何花哨的事情，`Resource`但你明白了。

将此添加到您的 maven 依赖项（如果使用 maven）：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>3.1.2.RELEASE</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T14:13:22.103

您可以调用`ClassLoader.getResource()`以查找目录中的特定文件（或目录本身，如果`getResource()`将返回目录）。`getResource()`返回指向结果的 URL。然后，您可以将此 URL 转换为其他库所需的任何形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-05T11:40:50.207

诀窍似乎是类加载器可以在类路径中找到目录，而类不能。

所以这行得通

```
this.getClass().getClassLoader().getResource("com/example/foo/myconfig"); 
```

虽然这不是

```
this.getClass().getResource("myconfig"); 
```

# firefox - 火狐通过 SSH 隧道

> ID：12007013
> 
> 赞同：0
> 
> 时间：2012-08-17T13:44:15.243
> 
> 标签：firefox, ssh, proxytunnel

我有一个关于通过 SSH 连接 Firefox 的问题。有一些像下面这样的网站我需要连接 [http://ieeexplore.ieee.org](http://ieeexplore.ieee.org)

所以当我从我的办公室连接到这个网站时，它可以让我在没有任何身份验证的情况下搜索文档和下载。所以我想，是因为我使用的是已经完成身份验证的办公网络。

但是，当我不在办公室时，它会要求我进行身份验证，而我没有办公室使用的帐户的用户名和密码。所以我需要以某种方式通过 SSH 连接到办公网络才能访问这个网站。

我已经尝试 ssh -X 并打开一个 firefox -no-remote。但这真的很慢。我想知道是否有一种解决方案可以让我通过代理隧道或其他方式直接从 SSH 连接。也有可能只有某些网站应该使用代理其他网站，它应该使用正常的互联网连接。

谢谢你的帮助，拉吉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T23:50:27.850

```
 ssh -D port_number office 
```

然后在 Firefox 中将代理配置为 SOCK5：localhost port_number

应该成功。

# android - 如何将 .txt 文件附加到电子邮件？

> ID：12007015
> 
> 赞同：0
> 
> 时间：2012-08-17T13:44:19.640
> 
> 标签：android, email

我对android还很陌生，我的电子邮件有问题。我正在尝试将文本文件附加到电子邮件并发送，但是当我这样做时，我收到“文件太大”错误。这是我第一次在应用程序中设置电子邮件，有人可以帮忙吗？

代码：

```
 File myFile = new File(Environment.getExternalStorageDirectory() + "/test.txt");
    Uri uri = Uri.fromFile(myFile);

    Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);  

    String aEmailList[] = { "person@gmail.com" };    
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);     
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Test");  
    emailIntent.setType("plain/text");  
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "This is a test.");
    emailIntent.putExtra(Intent.EXTRA_STREAM, uri);

    startActivity(emailIntent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-19T05:11:38.480

> 你好，试试这个。

```
public void sendMail(String[] mailTo,String[] cc,String subject, String body, String attachmentFilePath)
{
    Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    emailIntent.addFlags(Intent.FLAG_FROM_BACKGROUND);

    emailIntent.setType("plain/text");

    if(mailTo!=null)
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,mailTo);
    if(cc!=null)
    emailIntent.putExtra(android.content.Intent.EXTRA_CC, cc);
    if(subject!=null)
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
    if(body!=null)
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(body));
    if(mailTo!=null)
    emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://"+attachmentFilePath));

    context.startActivity(emailIntent); 
} 
```

# node.js - Mongoose：计算删除的文档

> ID：12007017
> 
> 赞同：12
> 
> 时间：2012-08-17T13:44:23.407
> 
> 标签：node.js, mongoose

如何检查 Mongoose 模型的 remove-method 是否真的删除了某些东西？

```
MyModel.remove({_id: myId}, function(err, entry) {
  if(entry == null) next(new Error("ID was not found."));    // this doesn't work
} 
```

我可以查看删除了多少文件吗？

在[Mongo-Documentation](http://www.mongodb.org/display/DOCS/Removing) kristina1 中写下评论：

> 如果您在删除后调用 db.runCommand({getLastError:1}) 并且“n”字段将告诉您删除了多少文档。

但我不知道如何用猫鼬做到这一点。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-17T14:00:39.273

**猫鼬 < 4，MongoDB < 3**

回调的第二个参数`remove`是一个包含删除文档数量的数字。

```
MyModel.remove({_id: myId}, function(err, numberRemoved) {
  if(numberRemoved === 0) next(new Error("ID was not found."));
} 
```

**猫鼬 4.x、MongoDB 3.x**

传递给`remove`回调的第二个参数现在是一个对象，其`result.n`字段指示已删除文档的计数：

```
MyModel.remove({_id: myId}, function(err, obj) {
  if(obj.result.n === 0) next(new Error("ID was not found."));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-17T00:41:43.453

我用最新版本的猫鼬试过这个，但没有用。由于第二个参数作为运算结果返回，而不仅仅是计数。如下使用，它起作用了：

```
 Model.remove({
            myId: req.myId
        }, function(err, removeResult) {
            if (err) {
                console.log(err);
            }
            if (removeResult.result.n == 0) {
                console.log("Record not found");
            }
            Console.log("Deleted successfully.");
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-11T00:28:06.387

我在 2020 年偶然发现了这一点，并在 Mongoose 5.9.28 中发现结果不再需要结果包装器，因此使用 remove 在异步方法中获取已删除记录的计数如下所示：

```
async function remove(query) {
  const result = await ItemModel.remove(query);
  return result.n;
}
```

当然，collection.remove 不赞成使用 deleteOne 或 deleteMany，所以也试试这个。

# annotations - Idea 无法更正自动完成文本

> ID：12007022
> 
> 赞同：1
> 
> 时间：2012-08-17T13:44:41.030
> 
> 标签：annotations, intellij-idea

我正在使用 hibernate 在 java 上编写小型 Web 应用程序，我看到了奇怪的事情 - 例如，当我在写

```
@ID 
```

或者

```
@Id 
```

我的 IDE(Idea) 自动将其更改为正确的形式`@Id` 但是当我像这样写时`@id`它告诉我这是一个错误并且找不到正确的形式。我正在设置中搜索，但找不到可以帮助 Ide 解决此问题的内容

可能有人知道如何解决这个问题？谢谢）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:13:25.327

`Settings`| `Editor`| `Code Completion`| **区分大小写的完成**：**无**。

# android - 将文本转换为 PDF

> ID：12007023
> 
> 赞同：1
> 
> 时间：2012-08-17T13:44:41.743
> 
> 标签：android, pdf-generation, pdf-writer

我正在尝试通过在 Android 中以适当的结构向其中插入一些文本来创建 PDF 文件。

```
Document doc = new Document();
PdfWriter.getInstance(doc, new FileOutputStream("urgentz.pdf"));
doc.open();
Image image = Image.getInstance ("urgentzImageahslkdhaosd.jpg");
doc.add(new Paragraph("Your text blah bleh"));
doc.add(image);               
doc.close(); 
```

上面的代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:19:28.177

没有看到堆栈跟踪，我只能猜测出了什么问题。您可能会发现这些问题很有用：

*   [如何在 Android 应用程序中创建 PDF？](https://stackoverflow.com/q/2499960/262462)
*   [如何在android中生成带有图像的Pdf文件？](https://stackoverflow.com/q/6674059/262462)

一些想法：

1.  检查文件路径。您只为 pdf 和 image 指定了文件名，没有任何路径。使用类似的东西`/mnt/sdcard/<YourFolderHere>/somefile.pdf`并确保您已`android.permission.WRITE_EXTERNAL_STORAGE`在 AndroidManifest.xml中定义
2.  使用[droidText](http://code.google.com/p/droidtext/)而不是`iText`
3.  尝试另一个 PDF Writer 库[http://coderesearchlabs.com/androidpdfwriter/](http://coderesearchlabs.com/androidpdfwriter/)

# php - Wordpress 函数参数语法差异

> ID：12007027
> 
> 赞同：3
> 
> 时间：2012-08-17T13:44:59.350
> 
> 标签：php, wordpress

嗨，我刚刚进入 wordpress 主题开发，我看到许多开发人员在为数组中的函数设置属性时使用这个 sintax：

```
'name' => __( 'Portfolio'),   
'singular_name' => __('Portfolio'), 
```

我已经尝试过了，我发现它没有任何区别，然后像这样写：

```
'name' => 'Portfolio',   
'singular_name' => 'Portfolio', 
```

Aldo 我是 php 和 wordpress 的初学者，所以也许这就是原因。

那么这两种写作方式有区别吗？如果是这样的话，女巫更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T13:48:05.053

这是通过本地化模块返回正确语言值的 Wordpress 方法。检查此链接以获取更多详细信息：

[http://codex.wordpress.org/Translating_WordPress](http://codex.wordpress.org/Translating_WordPress)

# android - 我可以在测试中真正启用和禁用网络访问吗？

> ID：12007031
> 
> 赞同：4
> 
> 时间：2012-08-17T13:45:12.307
> 
> 标签：android, integration-testing, robotium

我想编写自动化测试以在模拟器上运行，以验证我的应用程序在网络连接自发断开时是否正常运行。为此，我想编写如下测试：

1.  启用网络连接。
2.  开始一些app网络操作，比如长文件下载。
3.  禁用网络连接。
4.  确认显示丢失的网络连接对话框。

我已经看到了各种 stackoverflow 答案，这些答案通过建议通过命令行手动禁用主机 PC 的网络连接来解决这个问题。这不能通过在模拟器上运行的测试来自动化，因为模拟器无法访问其主机 PC。并且在主机 PC shell 脚本中运行命令将很难尝试与仿真器测试自动同步。

或者，我看到了建议操纵模拟器的网络设置的答案，这些设置显然并没有真正禁用访问，它们只会导致显式`networkInfo.isConnected()`的连接检查，比如报告断开状态。它们仍然允许双向通信。（例如，当模拟器网络访问被禁用时，浏览器仍然可以正常工作。）

有没有人能够构建在模拟器上运行的自动化测试，并在测试中根据需要实际打开和关闭网络访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:28:57.263

目前没有办法在单元测试中以编程方式真正禁用网络访问。我为此问题提交了[增强请求。](http://code.google.com/p/android/issues/detail?id=36916)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:23:25.147

如果您不反对调用未记录的方法，则可以执行以下操作来关闭/打开数据连接。

```
public void enableData(Context context, boolean enable) {
    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    try {
        Method m = cm.getClass().getDeclaredMethod("setMobileDataEnabled", boolean.class);
        m.invoke(cm, enable);
    } catch (Exception e) {
    }
} 
```

# directory - 如何以编程方式从abap中的目录参数获取文件路径？

> ID：12007034
> 
> 赞同：2
> 
> 时间：2012-08-17T13:45:16.677
> 
> 标签：directory, abap

事务 AL11 返回“目录参数”到应用服务器 AFAIK 上文件路径的映射。事务 AL11 的问题在于它的程序只调用 c 模块，几乎没有任何 select 语句或函数调用的踪迹来分析那里。

我希望能够在我的代码中动态地执行此操作，例如将“DATA_DIR”作为输入和“E:\usr\sap\IDS\DVEBMGS00\data”作为输出的功能模块。

[这个](https://stackoverflow.com/questions/152919/get-the-contents-of-a-server-side-directory-in-sap-abap)线程是关于一个类似的主题，但它没有帮助。

[其他人也有同样的问题，他在这里](http://www.qnasap.com/al11-directory-parameter/)解释得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:27:22.757

我强烈怀疑获得这些值的唯一方法是直接通过内核。其中一些可能因应用程序服务器而异，因此您可能无法在数据库中找到它们。你可以试试这个：

```
TYPE-POOLS abap.

TYPES: BEGIN OF t_directory,
         log_name TYPE dirprofilenames,
         phys_path TYPE dirname_al11,
       END OF t_directory.

DATA: lt_int_list    TYPE TABLE OF abaplist,
      lt_string_list TYPE list_string_table,
      lt_directories TYPE TABLE OF t_directory,
      ls_directory   TYPE t_directory.

FIELD-SYMBOLS: <l_line> TYPE string.

START-OF-SELECTION-OR-FORM-OR-METHOD-OR-WHATEVER.
* get the output of the program as string table
  SUBMIT rswatch0 EXPORTING LIST TO MEMORY AND RETURN.
  CALL FUNCTION 'LIST_FROM_MEMORY'
    TABLES
      listobject = lt_int_list.
  CALL FUNCTION 'LIST_TO_ASCI'
    EXPORTING
      with_line_break   = abap_true
    IMPORTING
      list_string_ascii = lt_string_list
    TABLES
      listobject        = lt_int_list.

* remove the separators and the two header lines
  DELETE lt_string_list WHERE table_line CO '-'.
  DELETE lt_string_list INDEX 1.
  DELETE lt_string_list INDEX 1.

* parse the individual lines
  LOOP AT lt_string_list ASSIGNING <l_line>.
*   If you're on a newer system, you can do this in a more elegant way using regular expressions
    CONDENSE <l_line>.
    SHIFT <l_line> LEFT DELETING LEADING '|'.
    SHIFT <l_line> RIGHT DELETING TRAILING '|'.
    SPLIT <l_line>+1 AT '|' INTO ls_directory-log_name ls_directory-phys_path.
    APPEND ls_directory TO lt_directories.
  ENDLOOP. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:57:40.377

尝试以下

```
data : dirname type  DIRNAME_AL11.
CALL 'C_SAPGPARAM' ID 'NAME'  FIELD 'DIR_DATA'
                   ID 'VALUE' FIELD dirname. 
```

或者，如果您想使用自己的参数（AL11->configure），则从表 user_dir 中读取这些参数。

# java - 使用 Java 进行跨平台作业调度

> ID：12007036
> 
> 赞同：2
> 
> 时间：2012-08-17T13:45:30.263
> 
> 标签：java, scheduled-tasks

我有一个 java 应用程序（jar 文件），我想在其中添加某种调度选项。这意味着该应用程序将为用户提供按照用户自己定义的时间间隔自动执行特定工作的能力。我正在考虑从命令行（通过 Java 代码）调用调度程序，例如对 Windows 使用“AT”命令，对基于 UNIX 的系统使用 Anacron。

我的第一部分问题是关于 Windows 中的“AT”命令：

我曾尝试直接从命令行使用“AT”命令，但我似乎无法让它工作。该作业被列为计划任务，但是当时间过去时，该任务不会执行。（我试图运行的任务是一个 jar 文件，当我在没有调度的情况下从命令行运行它时，它运行得非常正常。）有人能指出我可能做错了什么吗？我提供的命令如下：

'AT XX:XX java -jar C:....\xyz.jar' ，其中 XX:XX 是我想要运行它的时间。

问题的第二部分是关于此类功能的任何其他不同实现：

我对想法持开放态度，所以如果有不同的方式来实现这样的功能，请毫不犹豫地提及它。实现必须是跨平台的，如果可能的话，免费。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T13:48:54.850

真的只是你问题第二部分的答案，但你可能想看看[Quartz Scheduler](http://quartz-scheduler.org/ "石英调度器")。

您还可以潜在地使用支持 Quartz 的 Spring 等框架来简化和进一步了解[Quartz Scheduling with Spring](http://static.springsource.org/spring/docs/1.2.5/reference/scheduling.html)的用法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:03:31.597

您需要检查“任务计划程序”服务是否已启动并将完整路径添加到 java

# debugging - 如何调试或跟踪模块中的果园本地化不起作用的原因

> ID：12007043
> 
> 赞同：1
> 
> 时间：2012-08-17T13:45:45.183
> 
> 标签：debugging, localization, orchardcms

我创建了两个模块。我为两者都添加了本地化。一个有效，另一个无效。我认为我做的事情是正确的，但显然不是因为一个人不工作。

如何调试或跟踪本地化不起作用的原因？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-14T08:41:29.003

[在http://orchard.codeplex.com/](http://orchard.codeplex.com/)上询问它可能会增加您获得答案的机会。您可以随时在此处添加额外信息：http: [//docs.orchardproject.net/Documentation/localizing-modules](http://docs.orchardproject.net/Documentation/localizing-modules)

# javascript - Uploadify 文件扩展过滤：删除 Chrome 中的“所有文件”选项

> ID：12007044
> 
> 赞同：0
> 
> 时间：2012-08-17T13:45:46.010
> 
> 标签：javascript, file-upload, uploadify

我正在使用带有扩展过滤器的 uploadify 来控制上传的文件。

我同时设置 `fileExt = "*.avi;*.mpg;*.mp4;*.mov;*.wmv;";` 了 `fileDesc = "Videos (.avi,.mpg,.mp4,.mov,.wmv)";`

这在 FF、IE7/8/9 中按预期工作：用户被限制上传具有这些扩展名的文件。但是，在 Chrome 中，用户最初仅限于文件类型，但可以选择将过滤器更改为“所有文件”，如下面的屏幕截图所示。

![允许用户更改过滤器的 Chrome 打开文件对话框的屏幕截图](../Images/cfd7635218491d5647a4f137ff2d1b96.png)

如何确保遵守扩展过滤器？

干杯

# c# - 在 IIS 7.0（不是 WCF）中托管 Web 服务

> ID：12007046
> 
> 赞同：0
> 
> 时间：2012-08-17T13:45:48.880
> 
> 标签：c#, web-services, iis-7

我用 C# 编写了一个 web 服务，并试图在 IIS 7.0 上托管它。考虑以下代码，此代码运行良好，可以毫无问题地托管在 IIS 7.0 上：

```
using System;
using System.Collections.Generic;
using System.Collections.Specialized;
using System.Linq;
using System.Web;
using System.Web.Services;
using VMware;

namespace vmareService
{
/// <summary>
/// Summary description for Service1
/// </summary>
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the     following line. 
// [System.Web.Script.Services.ScriptService]
public class Service1 : System.Web.Services.WebService
{

    [WebMethod]

    public void logintoVmware(string URL, string username, string password)
          {
        VMware.Vim.VimClient client = new VMware.Vim.VimClient();

    }

}
} 
```

现在，如果我希望此方法返回我的会话 ID，我将代码更改为以下内容：

```
using System;
using System.Collections.Generic;
using System.Collections.Specialized;
using System.Linq;
using System.Web;
using System.Web.Services;
using VMware;

namespace vmareService
{
/// <summary>
/// Summary description for Service1
/// </summary>
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the     following line. 
// [System.Web.Script.Services.ScriptService]
public class Service1 : System.Web.Services.WebService
{

    [WebMethod]

    //public void logintoVmware(string URL, string username, string password)
    public VMware.Vim.UserSession logintoVmware(string URL, string username, string password)
    {
        VMware.Vim.VimClient client = new VMware.Vim.VimClient();
        VMware.Vim.UserSession session;
        session = client.Login(URL, username, password);
        return session;

    }

}
} 
```

现在，虽然我在代码中引用了 vmware.vim.dll 并且还将该文件包含在托管在 IIS 7.0 上的文件夹中，但我收到以下错误消息：

```
Server Error in '/vmService' Application.

Could not load file or assembly 'VMware.Vim, Version=5.0.0.0, Culture=neutral,     PublicKeyToken=10980b081e887e9f' or one of its dependencies. The system cannot find the file  specified.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.IO.FileNotFoundException: Could not load file or assembly 'VMware.Vim, Version=5.0.0.0, Culture=neutral, PublicKeyToken=10980b081e887e9f' or one of its dependencies. The system cannot find the file specified.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Assembly Load Trace: The following information can be helpful to determine why the assembly 'VMware.Vim, Version=5.0.0.0, Culture=neutral, PublicKeyToken=10980b081e887e9f' could not be loaded.

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value   [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value    [HKLM\Software\Microsoft\Fusion!EnableLog].

Stack Trace: 

[FileNotFoundException: Could not load file or assembly 'VMware.Vim, Version=5.0.0.0,      Culture=neutral, PublicKeyToken=10980b081e887e9f' or one of its dependencies. The system cannot find the file specified.]
System.Signature._GetSignature(SignatureStruct& signature, Void* pCorSig, Int32 cCorSig, IntPtr fieldHandle, IntPtr methodHandle, IntPtr declaringTypeHandle) +0
 System.Signature..ctor(RuntimeMethodHandle methodHandle, RuntimeTypeHandle declaringTypeHandle) +236
System.Reflection.RuntimeMethodInfo.get_Signature() +91
System.Reflection.RuntimeMethodInfo.get_ReturnType() +19
System.Reflection.RuntimeMethodInfo.ToString() +36
System.Web.Services.WebMethodReflector.GetMethods(Type type) +255
System.Web.Services.Description.ServiceDescriptionReflector.Reflect(Type type, String  url) +77
System.Web.Services.Protocols.DocumentationServerType..ctor(Type type, String uri) +203
System.Web.Services.Protocols.DocumentationServerProtocol.Initialize() +388
System.Web.Services.Protocols.ServerProtocol.SetContext(Type type, HttpContext context,  HttpRequest request, HttpResponse response) +75
System.Web.Services.Protocols.ServerProtocolFactory.Create(Type type, HttpContext context, HttpRequest request, HttpResponse response, Boolean& abortProcessing) +143

[InvalidOperationException: Unable to handle request.]
System.Web.Services.Protocols.ServerProtocolFactory.Create(Type type, HttpContext  context, HttpRequest request, HttpResponse response, Boolean& abortProcessing) +458971
System.Web.Services.Protocols.WebServiceHandlerFactory.CoreGetHandler(Type type,   HttpContext context, HttpRequest request, HttpResponse response) +285

[InvalidOperationException: Failed to handle request.]
System.Web.Services.Protocols.WebServiceHandlerFactory.CoreGetHandler(Type type, HttpContext context, HttpRequest request, HttpResponse response) +401754
System.Web.Services.Protocols.WebServiceHandlerFactory.GetHandler(HttpContext context, String verb, String url, String filePath) +281
System.Web.Script.Services.ScriptHandlerFactory.GetHandler(HttpContext context, String requestType, String url, String pathTranslated) +89
 System.Web.MaterializeHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute () +425
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&  completedSynchronously) +263

Version Information: Microsoft .NET Framework Version:2.0.50727.5456; ASP.NET      Version:2.0.50727.5456 
```

任何帮助，将不胜感激..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:01:53.553

从评论粘贴：

您应该确保此文件位于您的 /bin 文件夹中。如果是，那么您应该调查它的潜在依赖关系可能是什么。请记住，仅仅因为该文件存在并不意味着它的所有依赖 dll 都可用。

# css - Webkit 中的悬停在边缘显示原始颜色

> ID：12007047
> 
> 赞同：1
> 
> 时间：2012-08-17T13:45:53.280
> 
> 标签：css, fonts, webkit, hover

我正在使用一些字体图标来代表我正在构建的网站上的 twitter、Facebook 和 rss，它们看起来很棒。它们会在悬停、激活和聚焦时更改为适当的颜色，并且在 Firefox 和 Opera 上看起来很棒。

我的问题是 Mac 上的 Safari 和 Chrome（所以我假设是 webkit）。悬停时，您可以在一个或两个图标的边缘看到一点点白色。

我已经尝试将链接/访问的颜色更改为绿色，您可以在悬停时看到一点绿色，所以我知道这是所看到的默认颜色。

在此处查看页脚左侧的图标：http: [//tempertemper.net/index2](http://tempertemper.net/index2)

以下是我拍摄的一些屏幕截图：

![在此处输入图像描述](../Images/93ba4191d6e5dfe645ccb2d6d6d4bcc7.png)

twitter 鸟在背景下看起来不太好，但我仍然需要做一些调整。你可以把它的喙周围的白色弄出来。facebook 徽标显示它的顶部和底部，并在左侧和底部边缘显示 rss 符号。

感谢您的观看，

马丁。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T15:41:48.390

我在 Mac 上使用 Univers 字体的 Webkit 遇到了同样的问题。

我通过在我的字体大小属性中设置半像素来解决它：`font-size: 18.5px`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T20:41:49.390

我联系了制作字体的小伙子，他建议更改@font-face 请求的顺序，以便 svg 高于 woff 和 ttf 并使它变得更好。然后我调整了字体大小并选择了 4.15em，它在 Safari 或 Mac 版 Chrome 中没有显示白边。4.1、4.2、4.3、4.4等均呈现轻微的白线。

所以它是固定的，但我不知道为什么！

感谢所有人的关注，如果你们中的任何人都知道为什么会发生这种情况，但我很想知道一些字体大小:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:49:18.930

Add this to anchor style:

```
.social a:link, .social a:visited {
    color: white;
    border-bottom: none;
    text-decoration: none;
} 
```

# asp.net - web.config 和 app.config 中存在不同实体框架连接字符串的问题

> ID：12007053
> 
> 赞同：2
> 
> 时间：2012-08-17T13:46:03.617
> 
> 标签：asp.net, entity-framework, configuration, connection-string

我的解决方案有两个项目。一个类库，用于通过存储库类从 Entity Framework .edmx 文件生成数据。App.Config 文件 connectionString 与我的第二个 ASP.Net 4.0 Web 表单项目中的 Web.config 匹配。

当部署到测试服务器时，我修改了 BOTH connectionStrings 以指向测试数据库 (DataSource=TestDB)。当部署到实时站点时，我将两者都修改为指向实时数据库（DataSource=LiveDB）。

在 Site.Master 的顶部，我在标签控件中以红色字母显示“您已连接到 TEST 数据库”。我有条件地切换标签的 .Visible 属性`if (context.Connection.DataSource.Contains("TestDB"))`

在开发过程中，我发现了一些奇怪的东西。当 Web.config 指向 TestDB 时，如果我忘记让 App.config 匹配（并且它指向 LiveDB），则会出现“已连接到 TEST”警告，但会显示来自 LiveDB 的数据。

这告诉我存储库（类库）使用 App.Config，但在 Web 表单项目中创建的数据上下文使用 Web.config 连接字符串。那是对的吗？我担心如果我部署到测试站点并忘记将 App.Config 指向 TestDB，实时数据将被错误地更新。

所以我的问题是，在这种情况下......**显示始终准确的“连接到测试数据库”通知的最佳方式是什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T13:49:17.907

默认情况下，类库不会使用任何`app.config`文件。

它将使用在`.config`使用它的应用程序上下文中的文件 - 在将成为`web.config`文件的 Web 应用程序的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:48:20.527

当应用程序运行时，它使用 web.config 中的那个，无论上下文是在哪里创建的。

为什么不在您的实时应用程序上设置防火墙以防止从（a）除实时网络服务器之外的任何地方访问，或（b）尤其是您的测试位置？

# javascript - 如何查看 IntelliJ 中的所有 jslint 错误？

> ID：12007055
> 
> 赞同：10
> 
> 时间：2012-08-17T13:46:05.233
> 
> 标签：javascript, intellij-idea, jslint

IntelliJ 在 JSLint 报告的每个错误中都用红色下划线，我可以在文档的最右边看到相应的指示。

但是，我希望在一个窗口中查看所有 jslint 错误，并能够从错误导航到错误。

是否可以？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T15:24:45.407

运行`Analyze`| 使用配置文件中启用的**JSLint代码检查来****检查代码。**

# c# - 从通用列表中删除集合对象

> ID：12007057
> 
> 赞同：0
> 
> 时间：2012-08-17T13:46:18.490
> 
> 标签：c#, asp.net-mvc-3, linq, generic-collections

很抱歉再次发布这个问题，因为我认为我已经解决了这个问题！！！我需要收集分配给特定角色的用户，其中角色是一个以用户为属性的实体。我的目标是从该角色中删除分配的用户并为该角色插入新分配的用户我应用了以下代码，我无法删除分配给该角色的用户：

```
Role DeleteUsers = new Role();
List<Role> role = new List<Role>();

//Deleting the users from the selected Role
DeleteUsers = RolesList.FindOne<Role>(r => r.RoleID == roleID, r => r.Users);

DeleteUsers.Users.Clear();
this.Save<Role>(DeleteUsers); 
```

以及如何插入新分配的用户，其中我有一个角色 ID 和用户 ID 列表作为字符串数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:57:58.133

这完全取决于`this.Save<T>()`方法的实现。你在使用 ORM 吗？什么类型`this`？

此外，您的变量命名约定非常具有误导性。

# c++ - 查找 DNS 服务器和网关的 IP 和 MAC 地址

> ID：12007063
> 
> 赞同：1
> 
> 时间：2012-08-17T13:46:53.683
> 
> 标签：c++, winapi, networking

您好，我正在尝试以编程方式（C++）查找网关 IP 和 DNS 服务器 IP 及其本地网络的 MAC 地址。你对如何做到这一点有什么建议吗？还有一种方法可以使用 WinPcap 吗？代码示例会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T13:56:09.697

既然您提到了 winpcap，我得出的结论是您在 Windows 上。因此，您需要 WinAPI 来检索您的信息。

查看[使用 GetNetworkParams 检索信息](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366351%28v=vs.85%29.aspx)一文，它包含获得所需内容所需的所有步骤。

**PS：**虽然与winpcap无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:36:49.533

好吧，我做了 ihor 和 Sp。建议找到 IP 地址，然后使用 winpcap 向 DNS 服务器制作 ARP 请求以获取其 MAC 并处理 ARP 回复。

# asp.net-mvc - ASP.NET MVC SiteMap 提供程序——如何在实际菜单中“隐藏”单个项目

> ID：12007065
> 
> 赞同：9
> 
> 时间：2012-08-17T13:47:02.387
> 
> 标签：asp.net-mvc, menu, visibility, nodes, mvcsitemapprovider

我在一个项目中使用 ASP.NET MVC SiteMap 提供程序，它运行良好。但是，我很难弄清楚如何隐藏菜单项。我想在全局导航中隐藏的菜单项是我的“站点地图”页面。现在我知道在 mvcSiteMapNode 上有一个`VisibilityProvider`可供我使用的东西 - 但我似乎无法弄清楚如何让它工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-23T23:34:53.183

取自我在这里的回答，解释如何隐藏可用的节点和选项。

[https://stackoverflow.com/a/27095721/853295](https://stackoverflow.com/a/27095721/853295)

您应该使用本指南了解如何隐藏节点

[https://github.com/maartenba/MvcSiteMapProvider/wiki/Advanced-Node-Visibility-with-ISiteMapNodeVisibilityProvider](https://github.com/maartenba/MvcSiteMapProvider/wiki/Advanced-Node-Visibility-with-ISiteMapNodeVisibilityProvider)

您可以从上面的链接中设置一些设置：

```
<appSettings>
    <!-- Visibility will not filter to children -->
    <add key="MvcSiteMapProvider_VisibilityAffectsDescendants" value="false"/>
    <!-- Set default visibility provider -->
    <add key="MvcSiteMapProvider_DefaultSiteMapNodeVisibiltyProvider" value="MvcSiteMapProvider.FilteredSiteMapNodeVisibilityProvider, MvcSiteMapProvider"/>
</appSettings> 
```

添加应用程序设置后，将以下内容添加到您希望在面包屑而不是菜单中看到的任何节点：

`visibility="SiteMapPathHelper,!*"`（SiteMapPathHelper - 节点在站点地图路径中可见，!* - 它对所有其他控件不可见）

例如：

```
<mvcSiteMapNode title="Administration" area="Admin" clickable="false" visibility="SiteMapPathHelper,!*" /> 
```

其他可用选项：

**类型**............**它对**
CanonicalHelper 的影响............Canonical HTML Helper
MenuHelper....... .......Menu HTML Helper
MetaRobotsHelper.... Meta Robots HTML Helper
SiteMapHelper..........SiteMap HTML Helper
SiteMapPathHelper...SiteMapPath HTML Helper
SiteMapTitleHelper...标题HTML Helper
XmlSiteMapResult.... /sitemap.xml 端点的站点地图 XML 输出

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T10:48:45.863

首先，我建议您阅读这个 wiki 页面：[创建自定义 SiteMapNodeVisibilityProvider](https://github.com/maartenba/MvcSiteMapProvider/wiki/Advanced-Node-Visibility)。然后对于指向您的站点地图页面的特定节点，以这种方式声明它：

```
<mvcSiteMapNode title="Site Map" controller="Home" action="Map" visibility="false" /> 
```

现在，在实现该`IsVisible`方法时（如上面链接的 wiki 页面所示），您可以这样做：

```
string visibility = mvcNode["visibility"];

// Is a visibility attribute specified?
if (!string.IsNullOrEmpty(visibility))
{
     isVisible = Convert.ToBoolean(mvcNode["visibility"]);

     if (!isVisible)
     {
          return false;
     }
}

return true; 
```

# signal-processing - FFT 和加速度计数据：为什么我会得到这个输出？

> ID：12007071
> 
> 赞同：1
> 
> 时间：2012-08-17T13:47:22.587
> 
> 标签：signal-processing, accelerometer, fft

我在 StackOverflow 上阅读了关于对加速度计数据执行 FFT 的各种帖子，但没有一篇文章能帮助我理解我的问题。

我正在通过以下方式在我的加速度计阵列上执行[此](http://www.ee.columbia.edu/~ronw/code/MEAPsoft/doc/html/FFT_8java-source.html)FFT 实现：`data`

```
int length = data.size();
double[] re = new double[256];
double[] im = new double[256];
for (int i = 0; i < length; i++) {
    input[i] = data[i];
}

FFT fft = new FFT(256);
fft.fft(re, im);

float outputData[] = new float[256];
for (int i = 0; i < 128; i++) {
    outputData[i] = (float) Math.sqrt(re[i] * re[i]
    + im[i] * im[i]);
} 
```

我绘制了`outputData`（左，）的内容，还使用 ​​R 对我的数据执行 FFT（右。） ![快速傅里叶变换](../Images/ea22281b7b3d31ed2c676a25b1cf8bc8.png)

我在这里做错了什么？我使用相同的代码来执行我在其他地方看到的 FFT。

编辑：按照@PaulR 的建议应用窗口函数，以及@BjornRoche 提供的链接（[http://baumdevblog.blogspot.com.br/2010/11/butterworth-lowpass-filter-coefficients.html](http://baumdevblog.blogspot.com.br/2010/11/butterworth-lowpass-filter-coefficients.html)），我能够解决我的问题。解决方案几乎就是该链接中描述的内容。这是我现在的图表：http: [//imgur.com/wGs43](https://imgur.com/wGs43)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:42:41.143

低频伪影可能是由于缺少窗口。尝试应用窗口函数。

总体偏移可能是由于两种不同的 FFT 实现中的不同比例因子造成的——我的猜测是你看到了 24 dB 的偏移，这对应于比例差异为 256 倍。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-09-14T13:09:42.967

因为左侧的所有数据都高于 0，所以对于频率分析，它是直流信号。所以在你的fft之后，它将DC信号抽象出来，非常好。对于您的场景，您只需要切断直流信号，只需保留超过 0 Hz（交流信号）的信号，这是有道理的。

# sql-server - 我用 dataReader 询问日期时间值并获取最小值

> ID：12007072
> 
> 赞同：-1
> 
> 时间：2012-08-17T13:47:24.773
> 
> 标签：sql-server, date, datetime, sqldatareader

我需要你的帮助来找出并解决这个问题。

我有一个 DataReader，当使用函数 GetDateTime 来读取日期列时，我得到了最小值。我没有看到 GetDate 函数。我尝试将列的数据类型更改为日期时间，以便两者具有相同的数据类型，但结果相同。

这是表的定义：

```
CREATE TABLE [dbo].[Solped](
    [docNumber] [int] NOT NULL,
    [docType] [nvarchar](255) NOT NULL,
    [createDate] [date] NULL,
    [hora] [time](2) NULL,
    .... 
```

这是我读取数据库的地方：

```
string sql = "SELECT * FROM Solped order by docNumber DESC";
            System.Console.WriteLine(sql);
            SqlCommand cmd = new SqlCommand(sql, con);
            SqlDataReader reader = cmd.ExecuteReader();

            while (reader.Read())
            {
                solped = new Solped();

                solped.docNumber = reader.GetInt32(0);
                solped.docType = reader.GetString(1);

                DateTime dt = reader.GetDateTime(2);
                solped.fecha = dt; 
```

这是调试时显示的值：

```
dt = {1/1/0001 12:00:00 AM} 
```

这是程序中的呈现值：

```
Date(1345089600000) 
```

我完全困惑，我不知道我应该采取什么功能或行动来解决问题。如果您能提供帮助，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:59:01.693

看起来您在表格的两个不同列中有日期和时间，试试这个

```
SELECT DocNumber, DocType, 
CAST(CAST(createDate as varchar(10)) + ' ' + CAST(hora as varchar(12)) as datetime) as fullDate
FROM Solped 
```

# grails - 使用 Eclipse CloudFoundry 插件将 Grails 应用程序部署到 AppFog

> ID：12007077
> 
> 赞同：3
> 
> 时间：2012-08-17T13:47:44.027
> 
> 标签：grails, cloud-foundry, appfog

我正在尝试使用 Spring Source Suites（STS 2.9.2）中的 CloudFoundry 插件（1.1 版）将我的 Grails 应用程序部署到 AppFog。部署应用程序时，我使用[https://api.appfog.com](https://api.appfog.com)作为服务器地址，使用 MYAPPNAME.aws.af.cm 作为应用程序地址。应用程序被推送并启动，服务是有界的，但在那之后，我收到错误消息：与服务器通信失败：I/O 错误：服务器返回 HTTP 响应代码：405 用于 URL：[https ://api.appfog.com/应用程序/MYAPPNAME/应用程序](https://api.appfog.com/apps/MYAPPNAME/application)

此外，当我尝试创建通向数据库的 Caldecott 隧道时，我收到响应“URI：caldecott-85393a.appfog.com 已被占用或保留。（404 未找到）”我在（错误地）部署时也看到了应用到 MYAPPNAME.api.appfog.com（默认 AF 名称而不是特定的基础设施地址）。

我想 CloudFoundry 插件使用默认服务器地址来访问应用程序，并尝试在默认服务器地址上创建 Caldecott 隧道（caldecott-85393a.appfog.com 而不是 caldecott-85393a.aws.af.cm）

有人知道如何规避这种情况吗？

BR佐兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:10:18.713

这听起来不像是插件本身的问题，而是来自 AppFog 云的响应。我会将此作为他们的一个问题，并澄清您可以将该插件与他们的云一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:30:04.743

AppFog 最近在其 Java 部署方面遇到了问题，这些问题特别影响了 Grails 应用程序。这已解决，现在应该可以按预期无缝工作。您也可以随时在活跃的 google 群组中获取更多信息：[https ://groups.google.com/forum/#!forum/appfog-users](https://groups.google.com/forum/#!forum/appfog-users)

# java - 为具有版本属性的 XML 文档解析哪个版本的 XML 模式

> ID：12007079
> 
> 赞同：1
> 
> 时间：2012-08-17T13:47:54.383
> 
> 标签：java, xml, xsd, sax, jaxp

我必须编写一些代码来处理读取和验证在其根元素中使用版本属性来声明版本号的 XML 文档，如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
<Junk xmlns="urn:com:initech:tps" 
    xmlns:xsi="http://www3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="urn:com:initech.tps:schemas/foo/Junk.xsd"
    VersionAttribute="2.0"> 
```

有一堆嵌套模式，我的代码有一个[`org.w3c.dom.ls.LsResourceResolver`](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/ls/LSResourceResolver.html)要弄清楚要使用什么模式，实现这个方法：

```
LSInput resolveResource(String type,
                        String namespaceURI,
                        String publicId,
                        String systemId,
                        String baseURI) 
```

以前版本的架构已将架构版本嵌入到命名空间中，因此我可以使用 namespaceURI 和 systemId 来决定提供哪个架构。现在版本号已切换到根元素中的属性，而我的解析器无权访问它。我应该如何找出 XML 文档中的版本`LsResourceResolver`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T20:39:46.093

在此之前，我从未处理过模式版本，也不知道涉及到什么。当版本是命名空间的一部分时，我可以将所有模式放在一起并让它们整理出来，但是根元素中的版本和跨版本共享的命名空间没有绕过从 XML 读取版本信息*之前*开始 SAX 解析。

我将做一些与 Pangea 建议的非常相似的事情（从我那里得到 +1），但我不能完全遵循建议，因为文档太大而无法将其全部读入内存，即使一次。通过使用 STAX，我可以最大限度地减少从文件中获取版本的工作量。请参阅此 DeveloperWorks 文章[“使用 StAX 高效地筛选 XML 文档”](https://web.archive.org/web/20120424150226/http://www.ibm.com/developerworks/xml/library/x-tipstx3/)：

> XML 文档的筛选或分类是一个常见问题，尤其是在 XML 中间件中。将 XML 文档路由到特定的处理器可能需要分析文档类型和文档内容。这里的问题是以尽可能少的开销从文档中获取所需的信息。DOM 或 SAX 等传统解析器不太适合此任务。例如，DOM 在将控制权返回给客户端之前，会解析整个文档并在内存中构建完整的文档树。即使是采用延迟节点扩展并因此能够部分解析文档的 DOM 解析器，也具有很高的资源需求，因为文档树必须至少部分在内存中构建。这对于筛选目的来说是不可接受的。

获取版本信息的代码如下所示：

```
def map = [:]
def startElementCount = 0
def inputStream = new File(inputFile).newInputStream()
try {
    XMLStreamReader reader = 
        XMLInputFactory.newInstance().createXMLStreamReader(inputStream)
    for (int event; (event = reader.next()) != XMLStreamConstants.END_DOCUMENT;) {
        if (event == XMLStreamConstants.START_ELEMENT) {
            if (startElementCount > 0) return map
            startElementCount += 1
            map.rootElementName = reader.localName
            for (int i = 0; i < reader.attributeCount; i++) {
                if (reader.getAttributeName(i).toString() == 'VersionAttribute') {
                    map.versionIdentifier = reader.getAttributeValue(i).toString()
                    return map
                }
            }
        }
    }   
} finally {
    inputStream.close()
} 
```

然后我可以使用版本信息来确定要使用什么解析器以及要在 SaxFactory 上设置什么模式文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T14:00:58.027

我的建议

1.  使用 SAX 或 DOM 解析文档
2.  获取版本属性
3.  使用 Validator.validate(Source) 方法并使用已解析的文档（来自步骤 1），如下所示

*从解析的文档构建 DOMSource*

```
DocumentBuilder builder = factory.newDocumentBuilder();
Document document = builder.parse(new File(args[0]));

domSource = new DOMSource(document); 
```

# java - GAE、JDO：处理从缓存加载的实体

> ID：12007080
> 
> 赞同：1
> 
> 时间：2012-08-17T13:47:56.740
> 
> 标签：java, google-app-engine, jdo, jcache

我使用简单层通过键或 id 加载和存储实体，我只是在该层中添加了缓存。当具有给定键的实体在缓存中时，返回它而不是从数据存储中获取。当实体更新并保存到数据存储时，该层只需将缓存中的实体设置为空。它是完全透明的。

它似乎工作正常，但是从缓存中获取的对象与从数据存储中获取的对象略有不同。有些事情停止工作，例如，我不能在实体内部的集合上使用 .contains() 来检查两个实体之间是否存在关系。我还遇到了一个奇怪的行为，当我从缓存加载一个对象并立即存储到数据存储区时，代表关系的集合中的所有项目都被替换为`null`s。但是我无法重现它。现在它工作正常。

我不知道幕后发生了什么，所以问题是，这种使用缓存的方式可靠吗？我可以像从数据存储中获取实体一样处理从缓存中获取的实体（访问子项、更新、删除......）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:56:18.057

有两点需要注意：

1.  存储到 Memcache 的所有对象都被[序列化/反序列化](http://java.sun.com/developer/technicalArticles/Programming/serialization/)，这意味着它们的内存表示被采用并更改为一系列字节（反之亦然）。

2.  [`Collection.contains(object)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html#contains%28java.lang.Object%29)用于`object.equals(anotherObject)`检查集合是否包含某个对象。默认情况下`Object.equals()`，仅`true`当这是[完全相同的对象](https://stackoverflow.com/questions/4178997/how-default-equals-and-hashcode-will-work-for-my-objects)（= 相同内存位置的对象）时。

鉴于此：序列化对象然后反序列化它永远不会产生一个给出`deserialisedObject.equals(originalObject) == true`.

如果你真的需要这个，那么你应该在你存储在 Memcache 中的类中覆盖`.equals()`（以及`.hashCode()`），这样你才能真正比较类中有意义的值（= 比较所有字段的值）。

# java - ZipInputStream 的关闭在 IntelliJ 中工作正常，但在 Maven 中失败并出现异常

> ID：12007082
> 
> 赞同：0
> 
> 时间：2012-08-17T13:48:07.103
> 
> 标签：java, zip

我有个问题。当我通过 IntelliJ 运行当前代码时，它运行良好，但是当我在 maven 3 中运行它时它失败并出现异常。

```
 public static boolean isZipContent(InputStream inputstream) throws IOException {
    BufferedInputStream bis = new BufferedInputStream(inputstream);
    ZipInputStream zis = new ZipInputStream(bis);
    ZipEntry ze = zis.getNextEntry();
    if (ze == null) {
        return false;
    }
    zis.closeEntry();
    zis.close();
    bis.close();
    return true;
} 
```

例外：

```
java.util.zip.ZipException：无效的文字/长度设置
        在 java.util.zip.InflaterInputStream.read(InflaterInputStream.java:164) ~[na:1.7.0_06]
        在 java.util.zip.ZipInputStream.read(ZipInputStream.java:193) ~[na:1.7.0_06]
        在 java.util.zip.ZipInputStream.closeEntry(ZipInputStream.java:139) ~[na:1.7.0_06]

```

当我使用 WinZip 或其他方式手动打开 Zip 文件时，它们看起来还不错 - 正如我所说，一切都在 IntelliJ 中完美运行。

我已经调试并检查了文件编码、类加载器和所有东西，一切看起来都一样，但是如果我使用 Maven3 运行测试，代码仍然会始终失败，但在 IntelliJ 中工作。

它在 zis.closeEntry(); 上失败了 有一个例外。我确保在调试期间流仍然打开。

我在 Win7 上使用 Java 1.6。Maven 3.0.4。我尝试过其他版本的 Java，结果相同。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:07:02.063

问题是一个损坏的 Zip 文件...

让我失望的是所有条目的目录看起来都很好，因此我认为 Zip 文件很好。

一旦我尝试实际解压缩其中一个文件，它就失败了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:19:52.553

您不需要 closeEntry()，因为您对下一个不感兴趣。去掉它。你也不需要 bis.close()：它已经被 zis.close() 关闭了。

# visual-studio-2012 - Entrian Source Search for vs 2012？

> ID：12007088
> 
> 赞同：1
> 
> 时间：2012-08-17T13:48:17.393
> 
> 标签：visual-studio-2012

目前 Entrian Search 不适用于 Visual Studio 2012。有谁知道他们计划何时发布更新？目前还有其他类似的插件可以与vs2012一起使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:41:49.280

Entrian Source Search 现在支持 Visual Studio 2012 - 请参阅[http://entrian.com/blog/source-search-1-4-1-visual-studio-2012/](http://entrian.com/blog/source-search-1-4-1-visual-studio-2012/)

# c# - 如何使用 C# 定义 Excel 宏

> ID：12007090
> 
> 赞同：0
> 
> 时间：2012-08-17T13:48:18.413
> 
> 标签：c#, excel-2007

我有一个关于如何通过 C# 代码定义 Excel 宏的问题。例如，我在 Excel 中创建了一个按钮，然后将 C# 函数分配给它作为其宏函数，而不是使用 VBA。有人可以给我一点吗？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:52:54.847

这是一篇文章，解释了您要做什么，希望对您有所帮助

[Excel 宏 - 使用 C# 在运行时创建和运行](http://www.eggheadcafe.com/articles/create_macro_at_runtime_in_dotnet.asp)

# facebook - Facebook 应用程序用户通知

> ID：12007093
> 
> 赞同：1
> 
> 时间：2012-08-17T13:48:32.103
> 
> 标签：facebook, facebook-graph-api, notifications, facebook-apps

我想知道，是否可以通知 Facebook 应用程序的每个用户？

这就是我想做的事情：假设我有一个拥有 20 000 名用户的 Facebook 应用程序，并且该应用程序中有新内容。是否可以向每个用户发送消息、墙贴、通知......，让他们知道有新内容而不会被 Facebook 禁止？

格兹，邦迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:00:02.173

您可以通过查看应用程序的 ID 跟踪所有用户（及其朋友）。如果您已提示用户允许发布/共享等应用程序，您可以使用这些 ID 向用户和他们的朋友墙发布信息。但是有一个限制（我的帐户因发送大约 600 个“共享”而被阻止了几天，错误地..不断发布的逻辑错误......并且应用程序处于沙盒模式，因此规则仍然适用）

因此，要回答这个问题，我会说不。不是通过墙贴/分享，但您可以收集他们的电子邮件地址并向外部发送一封带有应用程序链接的邮件。

我的 FB 经验是使用 javascript api 来创建通知和帖子，我不确定这个 api 的限制，并且在“feed”、“Shares”、“Notifications”等之间感到困惑......精确的科学，看起来。

# rest - 用soapUI测试REST服务（试用版）

> ID：12007094
> 
> 赞同：0
> 
> 时间：2012-08-17T13:48:33.100
> 
> 标签：rest, testing, soapui

我想使用soapUI（试用版）发布到REST 服务。我设置了请求。当我发布单行 JSON 时，它工作正常。如果我发布带有换行符的 JSON 文本 (PrettyPrint)，我会收到 HTTP 500 内部服务器错误。

我已经尝试更改以下属性

*   去除空格
*   删除空内容
*   实体化属性

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:10:59.620

我的错。请务必在 JSON 文档中包含引号。soapUI 工作正常

# asp.net - 如何使用 SignalR 在 Web 上的客户端和服务器之间传递消息

> ID：12007096
> 
> 赞同：1
> 
> 时间：2012-08-17T13:48:37.257
> 
> 标签：asp.net, signalr

我听说 SignalR 是一个很好的消息传递库。我得到了 SignalR 的一些代码，但我无法理解它是如何工作的。

JS

```
var hooking;
$(function() {

  hooking = $.connection.hooking;
  hooking.removeLead = function(ref) {
    $("lead" + ref).remove();
  };

  $.connection.hub.start();
}); 
```

C＃

```
// Hooking.cs (placed in application root)
public class Hooking : Hub
{
  public void Submit(string jsonString)
  {
    var serializer = new JavaScriptSerializer();
    var json = serializer.Deserialize<HookingLeadResult>(jsonString);
    Clients.removeLead(json.Ref); // Remove lead from client hooking windows
    // update lead gen
  }
} 
```

我对上述代码有疑问。

*   `hooking`ins是什么意思**`$.connection.hooking;`**
*   `removeLead`在哪里**`hooking.removeLead`**
*   这会做**`$.connection.hub.start();`**什么？它从什么开始？它将在服务器端调用哪个方法？
*   谁以及如何`Submit`在服务器端调用方法？如何将数据从客户端传递到服务器端。如果可能的话，请给我一个 URL，以便为 SignalR 库提供良好的开端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:55:12.780

只要您调用Javascript 函数`hooking.removeLead`就会被调用`Clients.removeLead()`。所有绑定都是动态完成的，在 Javascript 到 C# 之间以及 C# 和 Javascript 之间。

`$.connection.hub.start()`实际上是连接功能。它会将您的客户端连接到服务器。除非您这样做，否则无法发送或接收任何消息。该`start`函数允许您定义在连接完成时要调用的回调。

`Submit`每当您在客户端上进行调用时，都会调用服务器上的方法`hooking.submit(json)`。例如，由于用户填写了一些表格并单击了按钮。

我建议从 SignalR 官方 wiki 开始：[http ://www.asp.net/signalr](http://www.asp.net/signalr)

# java - 这段代码有什么问题？它总是将 savedInstanceState 返回为 null

> ID：12007098
> 
> 赞同：-1
> 
> 时间：2012-08-17T13:48:39.997
> 
> 标签：java, android

此代码始终返回`savedInstanceState`为`null`

```
public class DemoidActivity extends Activity implements OnClickListener, android.view.View.OnClickListener  {

EditText t1=null;
EditText t2=null;
EditText t3=null;
EditText t4=null;
String data1 = null,data2=null,data3=null;
/** Called when the activity is first created. */
@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    t1=(EditText)findViewById(R.id.editText1);
    t2=(EditText)findViewById(R.id.editText2);
    t3=(EditText)findViewById(R.id.editText3);
    t4=(EditText)findViewById(R.id.editText4);
    Button b1=(Button)findViewById(R.id.button1);
    Button b2=(Button)findViewById(R.id.button2);
    b1.setOnClickListener(this);
    b2.setOnClickListener(this);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:38:18.723

他们对这样的代码没有任何问题。您在方法中获得`savedInstanceState`as的原因是因为您的活动是第一次创建的，因此不会有任何已保存的状态。`null``onCreate()`

仅当您实现 onSaveInstanceState() 方法时才会设置它。 [http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:43:22.157

这意味着您的活动状态永远不会被保存。
尝试覆盖该`onSaveInstanceState()`方法：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    //Put your stuff in the bundle
} 
```

然后使用它来检索数据/活动状态，无论是在`onCreate()`方法中还是在方法中`onRestoreInstanceState()`：

```
if (savedInstanceState != null) {
    //Retrieve data
} 
```

# android - 在Android中动态改变微调器的宽度

> ID：12007099
> 
> 赞同：4
> 
> 时间：2012-08-17T13:48:40.280
> 
> 标签：android, dynamic, width, spinner, layoutparams

我尝试使用下面的代码动态更改微调器的宽度，但收到一条错误消息。这样做的正确方法是什么？

```
Spinner s1 = (Spinner) findViewById(R.id.s1_10);
s1.setLayoutParams(new LayoutParams(400, LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T13:55:10.243

执行以下操作，我知道它看起来很难看，但这似乎是目前唯一的方法。

```
ViewGroup.LayoutParams params = mSomeView.getLayoutParams();
params.width += 10;
s1.setLayoutParams(params); 
```

# sql - 在 CTE SQL Server 2008 中声明变量

> ID：12007100
> 
> 赞同：2
> 
> 时间：2012-08-17T13:48:53.273
> 
> 标签：sql, sql-server, tsql

如何实现以下内容：

```
declare @myInt int
set @myInt=(select count(*) from x)
;with x as

(
select row_number() over(partition by c.patientid order by c.admissiondate) as rn
    ,c.patientid,c.admissiondate
    ,max(c.claimsfromdate)  as maxHemiDate
    ,min(c.claimsfromdate) minHemiDate  
    ,(
        select max(c2.claimsfromdate)
            from claims as c2
            where c2.patientid=c.patientid
            group by c2.patientid
     ) as maxClaimsDate

         ,p.drgCode
         ,datediff(dd,min(c.claimsfromdate),max(c.claimsfromdate)) /7 as weeksWithHemi
         from claims as c inner join icdclaims as ci on ci.id=c.id
         inner join tblicd as t on t.icd_id=ci.icd_id
         inner join patient as p on p.patientid=c.patientid
         and p.admissiondate = c.admissiondate
         and p.dischargedate = c.dischargedate
         where t.icdText like '%X%'  and p.statecode='21'
         group by c.patientid, c.admissiondate, p.drgCode
)

select p.patientid, count(*)
    from patient as p
    left join x on x.patientid=p.patientid
    where x.patientid is null
    group by p.patientid 
```

执行时抛出的错误是

> *无效的对象名称 x*

我有点想这会发生，因为变量声明在 CTE 之外。如果我将声明移动到括号内，`WITH`我会得到另一个错误。

如何在 CTE 中分配这样的变量？或者你不能使用从 CTE 中提取数据的变量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:30:38.370

如果您使用的是 SQL Server 2005 或更高版本，则可以将总计放在每一行：

```
select t.*, cnt, count(*) over () as NumRows
from (select p.patientid, count(*) as cnt
      from patient as p left join
           x
           on x.patientid=p.patientid
      where x.patientid is null
      group by p.patientid
    ) t 
```

如果您使用总计来计算百分比或类似的东西，那么在每一行上都有值可能会很方便。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T13:54:12.253

要获取 @myInt 行数，您可以执行以下操作：

```
declare @myInt int
;with x as
(
   __your query__
)
select p.patientid, count(*)
    from patient as p
    left join x on x.patientid=p.patientid
    where x.patientid is null
    group by p.patientid

set @myInt=@@ROWCOUNT 
```

***已编辑***（由于 Jon Egerton 评论）如果您需要计算 x 行，那么临时表就是这样：

```
declare @myInt int
;with x as
(
   __your query__
)
select * 
into #tmp_x
from x;

set @myInt=(select count(*) from #tmp_x)

select p.patientid, count(*)
    from patient as p
    left join #tmp_x x on x.patientid=p.patientid
    where x.patientid is null
    group by p.patientid 
```

谢谢乔恩·埃格顿

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T13:51:47.757

问题在于这一行：

`set @myInt=(select count(*) from x)`

您正在尝试在`x`声明之前进行选择！

**更新**

在这种情况下，最好使用临时表或表变量而不是 CTE。例如：

```
declare @myInt int

select row_number() over(partition by c.patientid order by c.admissiondate) as rn
    ,c.patientid,c.admissiondate
    ,max(c.claimsfromdate)  as maxHemiDate
    ,min(c.claimsfromdate) minHemiDate  
    ,(
        select max(c2.claimsfromdate)
            from claims as c2
            where c2.patientid=c.patientid
            group by c2.patientid
     ) as maxClaimsDate

         ,p.drgCode
         ,datediff(dd,min(c.claimsfromdate),max(c.claimsfromdate)) /7 as weeksWithHemi
         INTO #XTable
         from claims as c inner join icdclaims as ci on ci.id=c.id
         inner join tblicd as t on t.icd_id=ci.icd_id
         inner join patient as p on p.patientid=c.patientid
         and p.admissiondate = c.admissiondate
         and p.dischargedate = c.dischargedate
         where t.icdText like '%X%'  and p.statecode='21'
         group by c.patientid, c.admissiondate, p.drgCode

set @myInt=(select count(*) from #XTable)

select p.patientid, count(*)
    from patient as p
    left join #XTable x on x.patientid=p.patientid
    where x.patientid is null
    group by p.patientid 
```

这是一种快速而肮脏的方法，但您显然可以在脚本的前面声明您的表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T13:53:59.993

您不能将单个`CTE`语句用于两个不同的语句 - 它们超出了范围。

因此，要么您需要删除对变量的需求，要么您可以只声明一个表变量，然后根据需要继续选择该变量。

您可以按如下方式声明表 var：

```
declare @x table (rowno int, patientid varchar... 
```

然后，您可以使用您当前在 CTE 中获得的选择来填充它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T15:17:22.933

CTE 可以是复数。它不能解决您所说的问题，但是将复杂的 CTE 分解为几个步骤通常更清楚，每个步骤都基于先前的定义。在此示例中，有一个递归 CTE 和第二个 CTE，它基于第一个计算统计信息。最后`SELECT`结合结果：

```
with CTE
  as (
    select 1 as Number
    union all
    select Number + 1
      from CTE
      where Number < 10
    ),
  Summary
  as (
    select Count( 42 ) as HowMany, Min( Number ) as Least, Max( Number ) as Most
      from CTE
    )
  select *
    from CTE cross join
      Summary 
```

# mysql - Mysql查询不适用于空列

> ID：12007103
> 
> 赞同：0
> 
> 时间：2012-08-17T13:48:57.440
> 
> 标签：mysql, sql, database, null

我正在做一个相对简单的mysql查询：

```
 SELECT g.id FROM myTable g
            WHERE g.timestamp > '0' 
            AND g.userId = '1'
            AND g.foo != '34'
            ORDER BY g.id DESC LIMIT 0, 10 
```

此查询返回 0 行，但是如果我删除最后一个条件，即将其更改为：

```
 SELECT g.id FROM myTable g
            WHERE g.timestamp > '0' 
            AND g.userId = '1'
            ORDER BY g.id DESC LIMIT 0, 10 
```

这将返回 5-6 行。这对我来说很奇怪，因为在所有这些行中，`int`列`foo`都设置为 NULL

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T13:50:30.783

Comparing something wilh `NULL` will result in `unknown`. That is why `NULL` values have to be compared with the `IS` operator.

Replace

```
AND g.repostVia != '34' 
```

with

```
AND (g.repostVia != '34' or g.repostVia  is null) 
```

or use the [NULL-safe equality operator](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_equal-to) (thanks to eggyal):

```
AND NOT g.repostVia <=> '34' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:09:55.097

比较`g.repostVia != '34'`是`FALSE`什么时候`g.repostVia`是`NULL`因为任何与 NULL 的比较都将始终为 FALSE。

您应该确保`NULL`在与 NULL-able 列的任何比较中都涵盖了这种情况（变量 is ）。

您可以使用[IS NULL](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_is-null "一片空白")运算符：

```
SELECT g.id FROM myTable g
            WHERE g.timestamp > '0' 
            AND g.userId = '1'
            AND (g.repostVia, != '34' OR g.repostVia IS NULL)
            ORDER BY g.id DESC LIMIT 0, 10 
```

或[COALESCE](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)函数：

```
SELECT g.id FROM myTable g
            WHERE g.timestamp > '0' 
            AND g.userId = '1'
            AND COALESCE(g.repostVia, -1) != '34'
            ORDER BY g.id DESC LIMIT 0, 10 
```

我自己更喜欢 COALESCE，因为在我看来，它更好地保留了比较的原始含义，并且由于它允许更多的参数，它也更灵活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:11:17.403

使用 IS NULL 进行比较绝对有效。如果您有可以分配的无效值，我想提供 COALESCE() 通常更具可读性。例如，如果 g.foo 总是积极的，那么以下将起作用：

```
 SELECT g.id FROM myTable g
         WHERE g.timestamp > '0'
          AND g.userId = '1'
         AND coalesce(g.foo, -1) != '34'
         ORDER BY g.id DESC
     LIMIT 0, 10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T13:54:34.123

也许尝试`<>`而不是`!=`.

`0`价值观很棘手。

# java - Convert PLSQL function to process a jdbc statement that utilizes an Oracle ARRAY

> ID：12007106
> 
> 赞同：0
> 
> 时间：2012-08-17T13:49:11.853
> 
> 标签：java, sql, oracle, function, plsql

I have the following PL/SQL block that creates a procedure to insert a new cat:

```
CREATE OR REPLACE PROCEDURE INSERT_NEW_CAT(AGE NUMBER, WEIGHT NUMBER, NAME VARCHAR2)  
AS  
BEGIN    
     INSERT INTO CATS(cat_id,age,weight,name)  
     VALUES(cat_id_sequence.nextval,age,weight,name);  
END  INSERT_NEW_CAT; 
```

And the following Java block to batch insert these cats:

```
CallableStatement statement = conn.prepareCall("{CALL insert_new_cat(?,?,?)}");  
for(int i = 0; i < 50000;i++)  
{  
    statement.setInt(1, i);  
    statement.setInt(2,i);  
    statement.setString(3,"Test");  
    statement.addBatch();  
    if(i % 16382== 0)  //max value my batch can support on my hardware
    {  
         statement.executeBatch();  
    }  
}  

statement.executeBatch(); 
```

So the issue with this is I can only persist 700 records a second, which is quite slow. I believe the issue is that I invoke the above PL/SQL function once per row (or once per batch entry). How can I re-write the above function to take an array of these statements and do a bulk insert to reduce the number of calls to the function to N modulo 16382 + 1? The database is Oracle 10g.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:06:05.877

创建数据库对象类型：

```
CREATE TYPE CAT AS OBJECT(
  AGE NUMBER, WEIGHT NUMBER, NAME VARCHAR2
); 
```

然后创建一个相同的集合类型：

```
CREATE TYPE CATS IS TABLE OF CAT; 
```

在您的 PL/SQL 过程中接收猫列表并使用[FORALL](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/forall_statement.htm) -> 这对性能很重要。

[`StructDescriptor`](http://docs.oracle.com/cd/B10500_01/java.920/a96654/oraoot.htm#1039458)从 java 中使用and构建您的 CAT 对象和 CATS 集合`ArrayDescriptor`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T16:19:40.817

我能够使用以下步骤解决问题：

创建 Oracle 对象以引用我的 Cat 属性：

```
Create Type age is table of number  
Create Type weight is table of number  
Create Type name is table of varchar(50) 
```

然后在我的 Java 代码中，我执行了以下操作：

```
ArrayDescriptor ageCollection = ArrayDescriptor.createDescriptor("AGE", conn);   
ArrayDescriptor weightCollection = ArrayDescriptor.createDescriptor("WEIGHT", conn); 
ArrayDescriptor nameCollection = ArrayDescriptor.createDescriptor("NAME", conn);   
int[] ageArray = new int[50000];  
int[] weightArray = new int[50000];  
String[] nameArray = new String[50000];  
for(int i = 0; i <50000;i++)  
{  
    ageArray[i]=i;  
    weightArray[i]=i;
    nameArray[i] = "Test";
}  
ARRAY oraAge = new ARRAY(ageCollection,conn,ageArray);  
ARRAY oraWeight = new ARRAY(weightCollection,conn,weightArray);  
ARRAY oraName = new ARRAY(nameCollection,conn,nameArray);    

CallableStatement statement = conn.prepareCall("{CALL insert_new_cat(?,?,?)}";   

statement.setObject(1,oraAge);
statement.setObject(2,oraWeight);  
statement.setObject(3,oraName);  
statement.execute();  
conn.commit(); 
```

SQL过程：

```
CREATE OR REPLACE PROCEDURE  INSERT_NEW_CAT (age age, weight weight, name name)  
AS
BEGIN  
    forall i in 1..age.last  
        insert into cats(id,age,weight,name)  
        vales(cat_sequence.nextval,age(i),weight(i),name(i);  
END INSERT_NEW_CAT; 
```

需要注意的重要的一行（age age）是指我在oracle数据库中创建的age的数据类型。通过实现上述内容，我能够将全索引表上的插入提高到每秒约 45000 次。在非索引表上，此值变为每秒 ~70000。

# iphone - Add new sharer to the camera roll

> ID：12007109
> 
> 赞同：0
> 
> 时间：2012-08-17T13:49:19.980
> 
> 标签：iphone, xcode, ios

I would like to know if there is a way to achieve this. The goal is to add a new sharing option to the camera roll sharing actions (see the attached screenshot). This option have to open my application with a given image or video as a parameter of a method.

![An example of what I would like to do](../Images/459cbe84457c454f2de86f295639c84b.png)

Is it possible to do this? If yes, it will be great if you can show me snippets for achieving this.

Cheers!

Cyril

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:02:31.027

不，这对于当前的 iOS SDK 是不可能的。

# ssh - how to get remote IP addresses from reverse ssh tunnel

> ID：12007113
> 
> 赞同：6
> 
> 时间：2012-08-17T13:49:27.930
> 
> 标签：ssh, ssh-tunnel

I have an Apache webserver running on a local machine through reverse ssh tunnel, i.e.:

ssh -R *:80:local_machine:8080 username@gateway_machine

In other words, all traffic from port 80 on gateway_machine is sent to port 8080 on local_machine.

For monitoring purposes, I wish to know IP addresses of the remote clients connected to gateway_machine. However my local Apache server sees all traffic coming from the IP address of gateway_machine.

My question: Is there any way to setup ssh server running on gateway_machine such that it sends all traffic to local_machine with actual remote IP addresses ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-02T14:47:17.770

SSH 协议使用一种称为“direct-tcpip”的通道类型来转发 TCP 连接。[打开这些通道之一的协议消息](https://www.rfc-editor.org/rfc/rfc4254#section-7.2)包括正在转发连接的客户端的地址和端口。因此，您想要的信息可用于 ssh 客户端（在您的情况下，它正在打开与转发目标的连接）。

OpenSSH`ssh`客户端将创建者地址和端口记录在调试级别消息中，因此如果您使用以下`-v`选项运行 ssh，您可以看到它：

```
$ ssh -v -R 2000:localhost:1000 localhost
...
debug1: client_request_forwarded_tcpip: listen localhost port 2000, originator ::1 port 51101 
```

这里的发起者地址是 ::1 (IPv6 localhost) 和端口 51101。该`ssh`实用程序不会对这些信息做任何其他事情。

因此，根据您的需要，您可以通过三种方法来收集此信息：

1.  使用选项调用`ssh`创建这些转发的进程`-v`，并安排收集和解析相关的调试信息。
2.  更改[源代码](https://www.openssh.com/portable.html)以`ssh`使其按照您希望它对信息执行的操作。
3.  编写您自己的 ssh 客户端，它可以满足您的需求。SSH 客户端库可用于大多数现代编程语言。

# asp.net-mvc-3 - Resources files issues in ASP.NET MVC 3

> ID：12007120
> 
> 赞同：0
> 
> 时间：2012-08-17T13:49:50.183
> 
> 标签：asp.net-mvc-3, localization, globalization

I´m having a strange problem with resources files. Strange because it was working great. Well, I have some resources files. I created a Resources folder on my asp.net mvc 3 project structure and I am mirroring the views's folder structure. For now I have:

```
Views
   Shared
      _Layout.cshtml

Resources
   Shared
      Layout.pt-BR.resx
      Layout.en-US.resx
      Layout.ko-KR.resx 
```

All resources files are configured as Embedded Resource, PublicResXFileCodeGenerator and with Custom Tool Namespace "ViewRes". All ".Designer.cs" files are empty. I remember to see some code in them when it was working.

On my .csproj file I have these data:

```
<ItemGroup>
    <EmbeddedResource Include="Resources\Shared\Layout.en-US.resx">
      <SubType>Designer</SubType>
      <Generator>PublicResXFileCodeGenerator</Generator>
      <LastGenOutput>Layout.en-US.Designer.cs</LastGenOutput>
      <CustomToolNamespace>ViewRes</CustomToolNamespace>
    </EmbeddedResource>
    <EmbeddedResource Include="Resources\Shared\Layout.ko-KR.resx">
      <SubType>Designer</SubType>
      <Generator>PublicResXFileCodeGenerator</Generator>
      <CustomToolNamespace>ViewRes</CustomToolNamespace>
      <LastGenOutput>Layout.ko-KR.Designer.cs</LastGenOutput>
    </EmbeddedResource>
    <EmbeddedResource Include="Resources\Shared\Layout.pt-BR.resx">
      <SubType>Designer</SubType>
      <Generator>PublicResXFileCodeGenerator</Generator>
      <LastGenOutput>Layout.pt-BR.Designer.cs</LastGenOutput>
      <CustomToolNamespace>ViewRes</CustomToolNamespace>
    </EmbeddedResource>
  </ItemGroup> 
```

The problem is: When I try to access the @ViewRes on my views, It is not recognized. I tried already to remove the custom tool namespace but the @Resource is not recognized too. In both situations I got this compilation error:

```
Compiler Error Message: CS0103: The name 'ViewRes' does not exist in the current context 
```

Does anybody have any idea? Thanks, Paulo

EDIT: NEW INFORMATIONS

I created a global Resources.resx file by project's properties menu in VS2010 and it's working with the custom tool namespaces I have entered. "Resources" namespace still not working. I think the problem is with the local resources files. Unfortunatly I need them because I can't rename the global resources.resx file including the culture code.

EDIT 2 I created new .resx file on Resource folder and what I can see is that the filename can not have 2 ".". Is the name is Resources.resx, it works. If the name is Resource-en-US.resx, it works but, If the name is Resources.en-US.resx it fails!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:36:06.333

我认为您还可以编写一个自定义助手，它将通过反射返回字符串。

# css - HTML/CSS floating sidebar, but normal behavior at top of page

> ID：12007121
> 
> 赞同：2
> 
> 时间：2012-08-17T13:49:56.980
> 
> 标签：css, html

I am working on a web page ([link](http://www.slushie.me/test/display.php?articleID=102 "link")) whose layout has a header on top, across the entire page, and then underneath two side-by-side sections, `div.content` and `div.sidebar`.

While the viewers are scrolling down, I want the sidebar to remain at the top of the page (i.e., a floating sidebar).

When using `position:fixed` in css, it works fine, except at the top of the page, where the sidebar overlaps with the header.

If I use a `top:200px`, it goes under the header, but when people are scrolling, the sidebar stays lowered.

Is it possible to have the sidebar behave regularly when the user is at the top of the page, so the sidebar doesn't interfere with the header, but have the sidebar float at theh top (`top:0px`, for example) when the user is scrolling and the header is off the screen?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:54:06.077

将此添加到`div.sidebar`：

```
position: fixed;
top: 200px;
right: 20px; /* change this if you want */ 
```

# javascript - javascript用片段刷新当前页面

> ID：12007129
> 
> 赞同：2
> 
> 时间：2012-08-17T13:50:24.560
> 
> 标签：javascript, refresh, fragment

如何使用片段刷新当前页面？

如果页面 url 是这样的：`localhost/test#1`我`<a href="http://localhost/test#2">`如何刷新当前页面？

```
location.reload(true)

window.location.reload() 
```

这 2 种方法都会将页面重新加载到`localhost/test#1`. 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:56:54.400

`window.location.hash`?

```
setTimeout((
    function(){
        window.location.hash = '#2';
    }
), 2000);

// so: <a href="http://localhost/test#2" onclick="window.location.hash='#2';window.location.reload();">aaa</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:53:01.180

您将需要仔细查看**hashchange**事件。幸运的是，有一个不错的 jQuery 插件，叫做 BBQ。

[http://benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:53:47.873

**#** urls 仅适用于客户端。# 之后的部分不发送到服务器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T14:18:53.883

您可以使用 URL 重写

在您的 .htaccess 文件中添加这些行：

```
RewriteEngine On
RewriteRule ^([0-9a-zA-Z_]*)$ index.php?p=$1 [L] 
```

在您的页面 test/index.php 中，您可以使用链接（不带 #）：

```
<a href="2">Page 2</a> 
```

它将存储在 $_GET['p'] 中（在示例中，目标是 php）

找到满足您需求的重写规则。

# qt - fatal error U1073: don't know how to make 'distclean' Stop

> ID：12007131
> 
> 赞同：1
> 
> 时间：2012-08-17T13:50:28.310
> 
> 标签：qt, nmake

Before configuring again qt with visual studio, I tried to cleanup previous build. I wrote cd C:\Qt\4.8.2 C:\Qt\4.8.2>nmake distclean using Visual Studio Command Prompt(2010). Then I faced with this error.

How to fix this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:01:01.023

这只是意味着您已经清理了您的 makefile，因此请根据自己的喜好再次配置您的构建。

# ruby-on-rails - 在同一流中渲染两个部分中的最新部分

> ID：12007133
> 
> 赞同：0
> 
> 时间：2012-08-17T13:50:31.567
> 
> 标签：ruby-on-rails, rendering

我有两种不同类型的对话，开始和加入。我想将它们一起呈现在同一流中，从顶部最新到底部最旧。也就是说，我希望将它们混合在一起，以便最新的对话位于顶部，无论它是由用户发起还是由用户加入（即由另一个用户发起）。

从我的控制器：

```
def conversations
  @user = current_user
  @joined_conversations = @user.received_meeting_requests.paginate(page: params[:page], :conditions => ['state = ?', 'replied'])
    @started_conversations = @user.sent_meeting_requests.paginate(page: params[:page], :conditions => ['state = ?', 'replied'])
end 
```

在我看来，我是这样渲染的：

```
<ol class="meetings">
  <%= render @started_conversations %>
  <%= render @joined_conversations %>
</ol>
  <%= will_paginate @started_conversations %>
  <%= will_paginate @joined_conversations %>
<% end %> 
```

因此，即使是最早开始的对话也会在最新加入的对话之上。如何渲染这两个对象以使它们混合在一起，即最新开始的或加入的对话将始终位于顶部？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:25:09.077

好吧，实际上有几种方法可以解决这个问题，但您需要的是在一个集合中进行两种对话。

现在，您*可以*只取现有的两个集合，将它们放在一起（使用数组联合运算符'|'），然后使用它们：

```
def conversations
  @user = current_user
  @joined_conversations = @user.received_meeting_requests.paginate(page: params[:page], :conditions => ['state = ?', 'replied'])
  @started_conversations = @user.sent_meeting_requests.paginate(page: params[:page], :conditions => ['state = ?', 'replied'])
  @conversations = (@joined_conversations | @started_conversations).sort_by{|c| c.created_at}
end 
```

但是，由于这种过滤和排序是数据库的真正用途，我认为您最好在一个查询中收集所有相关的对话。我想告诉你那个查询是什么，但是如果不知道你的模型/表是什么，它们是如何关联的，用户加入或开始对话意味着什么，以及对于这与您使用的 Rails 版本和数据库无关，因为它在 Rails 3.x 和 2.x 中看起来会有很大不同。

无论哪种情况，您最终都会得到一个名为 的集合`@conversations`，并且应该能够简单地呈现它。

# release - Unable to release viewcontroller

> ID：12007134
> 
> 赞同：0
> 
> 时间：2012-08-17T13:50:34.787
> 
> 标签：release, viewcontroller, nszombie

I need some help with releasing a controller in xcode ..im not using ARC ..take a look at this simple code from my main delegate controller:

```
LoginViewController *login = [[LoginViewController alloc] init];
[window addSubview:login.view];
[window makeKeyAndVisible];
[login release];  // code runs if i comment out this line 
```

If i comment out the last line the program runs. The program crashes on the last line ...i put in a zombie and here is the result: 2012-08-17 09:43:02.193 dialer[238:707] *** -[LoginViewController performSelector:withObject:withObject:]: message sent to deallocated instance 0x186360

how can i trace this and why is this even happing since im allocating and releasing right away. Does it have something to do with retain , etc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:57:49.280

登录控制器作为子视图添加后释放，但是addSubview方法并没有保留控制器（只有controller.view），所以不能再继续使用。

你必须释放它，否则你会有泄漏，解决方案是在你的类中创建一个属性/ivar并将视图控制器分配给它（而不是局部变量），然后在dealloc中释放它。

我认为您缺少的一点是 [login release] 语句有效地将您的 loginViewController 的保留计数减少到零，并且该对象丢失/清理，这不是您想要的，因为只要您仍然需要它显示子视图。

因此，您的父对象（主控制器，如果我正确理解您的示例）创建 loginController，将 loginView 添加为子视图（通过执行 addSubview 调用保留），然后释放控制器，但您仍然需要它来处理登录查看！所以解决方案是在主控制器中保留一个引用，以便在需要时保留它（直到您删除 loginView，或者主控制器被释放）

# java - how to read value for Complex Text-Only Elements using XMLBean

> ID：12007136
> 
> 赞同：1
> 
> 时间：2012-08-17T13:50:41.697
> 
> 标签：java, xml, xsd, xmlbeans

I have created a Complex Text-Only element as:-

```
<xs:element name="trackingidtag" type="tagtype"/>
<xs:complexType name="tagtype">
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute ref="parenttag" use="required"/>
      </xs:extension>
    </xs:simpleContent>
</xs:complexType> 
```

My XML has the element as:-

```
<trackingidtag parenttag="ParentTag">TagValue</trackingidtag> 
```

Now I am trying to read the value for this element using XMLBean generated API, but when I do

```
getTrackingidtag() 
```

It doesn't give me any method to read the value "TagValue". I have a method for reading the parenttag attribute but nothing for reading the text value. How can I read "TagValue"?

# android - 不允许绑定到服务 Intent

> ID：12007139
> 
> 赞同：12
> 
> 时间：2012-08-17T13:50:53.850
> 
> 标签：android, service

我写了一个获取天气的android服务，AndroidManifest.xml是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.my.weather"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <service
            android:name=".WeatherService"
            android:exported="true" >
        </service>
    </application>

</manifest> 
```

现在，我想让另一个 apk 启动这个服务：

```
Intent service = new Intent();
service.setClassName("com.my.weather", "com.my.weather.WeatherService");
context.bindService(service, weatherServiceConnection, Context.BIND_AUTO_CREATE); 
```

我收到错误消息：

```
E/AndroidRuntime(14068): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.my.test/com.my.test.MainActivity}: java.lang.SecurityException: Not allowed to bind to service Intent { cmp=com.my.weather/.WeatherService } 
```

我该如何解决这个问题？

其他 apk 是使用 Messenger 方法与天气服务通信。

==================================================== ===============================

谢谢大家！

现在我修改我的天气服务的 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.my.weather"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <service
            android:name=".WeatherService"
            android:exported="true"
            android:process=":remote" >
            <intent-filter>
                <action android:name="com.my.weather.WeatherService"></action>
            </intent-filter>
        </service>
    </application>

</manifest> 
```

我使用这种方法开始：

```
Intent service = new Intent("com.my.weather.WeatherService");
context.bindService(service, weatherServiceConnection, Context.BIND_AUTO_CREATE); 
```

然后我收到警告信息：

```
W/ActivityManager(131): Unable to start service Intent { act=com.my.weather.WeatherService }: not found 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T17:42:17.563

我有同样的问题。对我来说，问题是我首先使用 API 安装了应用程序，然后是提供 API 的应用程序。卸载/重新安装第一个应用程序解决了这个问题。

更新：为避免该问题**，两个**应用程序都应在其清单中定义权限。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-17T14:51:19.547

[这里](https://stackoverflow.com/questions/2880450/providing-a-background-service-for-other-apps/2881548#2881548)从文档中说：

> 如果我们想让该服务在远程进程中运行（而不是其 .apk 的标准进程），我们可以`android:process`在其清单标签中指定一个：
> 
> ```
> <service android:name=".app.MessengerService"
>         android:process=":remote" /> 
> ```

另请注意，`remote`此处选择的名称是任意的，如果您需要其他进程，可以使用其他名称。前缀将`:`名称附加到包的标准进程名称。完成后，客户端现在可以绑定到服务并向其发送消息。请注意，这允许客户端向其注册以接收返回的消息。

**Edit1**：
其次，如果服务元素（在清单中）包含操作字符串，请使用它。例如，如果您的服务声明如下：

```
<service android:name="com.sample.service.serviceClass"  
            android:exported="true" android:label="@string/app_name" 
            android:process=":remote">
   <intent-filter><action android:name="com.sample.service.serviceClass"></action>
   </intent-filter>
</service> 
```

因此，请在`onCreate()`您的服务方法中执行此操作：

```
public void onCreate(Bundle savedInstanceState) {    
      super.onCreate(savedInstanceState);  
      Intent intent=new Intent("com.sample.service.serviceClass");  
      this.startService(intent);
} 
```

我在这个问题中看到了这一点：
[无法启动服务意图](https://stackoverflow.com/questions/3439356/unable-to-start-service-intent/3439838#3439838)

**Edit2**：
我再次看到了您的清单。您的清单似乎没有 .In`Main/Launcher Activity`它`android 3.1 and later`导致没有可用的服务。这需要一个主/启动器活动。所以你必须将这样的活动添加到你的应用程序中，并注意它已经被执行。*`In fact for`**`security`**`reason all services,receivers,... that you declare in manifest,will not register unless your App run explicitly by user`*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T15:12:26.423

向 WeatherService 添加带有操作的意图过滤器：

```
<service
    android:name=".WeatherService"
    android:exported="true" >
    <intent-filter>
        <action android:name="this.is.my.custom.ACTION" />
    </intent-filter>
</service> 
```

然后，当您在其他应用程序中使用 bindService() 进行绑定时，请使用以下意图：

```
new Intent("this.is.my.custom.ACTION") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-05T04:29:06.047

在您的活动类中...假设 BothButton 是活动类名，而 CleverTexting 是服务类名，并且您想从服务中调用活动，而不是从活动中调用服务。如果您的代码在超过 4.0 的 android 版本中运行良好，那么您可以这样做不会有任何问题。

```
CleverTexting mService ; 

public void setService(CleverTexting listener) {
    // TODO Auto-generated method stub
     mService = listener;
} 
```

在你的服务课上做......你想在哪里打电话给你的活动

```
BothButton mBothButton;

mBothButton = new BothButton(this);
    mBothButton.setService(this); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-23T08:16:48.103

当您为远程服务调用 bindService 时，您也应该设置您的 packageName。

```
Intent intent = new Intent("com.my.weather.WeatherService");
intent.setPackage("com.my.weather");
bindService(intent, serConn, Context.BIND_AUTO_CREATE); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-28T01:12:47.057

David Wasser 在评论中解决了我的问题，所以我想我分享一下。

在清单中，您可以将导出的属性设置为 true。这使得其他应用程序可以访问该服务。

清单.xml

```
<service android:name=".MyUsefulService_"
                android:exported="true"/> 
```

我的活动.java

```
Intent intent = new Intent();
intent.setComponent(new ComponentName("jav.android.app",jav.android.app.MyUsefulService_");

bindService(this,MyServiceConnection,0); 
```

# android - HttpURLConnection.setConnectTimeout 不起作用

> ID：12007140
> 
> 赞同：1
> 
> 时间：2012-08-17T13:50:56.860
> 
> 标签：android, timeout, connect

我有一个连接在服务器中搜索更新的 Android 应用程序。如果服务器响应时间很长（+500 毫秒），我必须完成我的方法并继续执行程序。

我已经将`readTimeout`and设置`connectTimeout`为**500 ms**，但即便如此，我的方法在这一行中也需要大约 30 秒：**`c.connect();`**

这是我的代码：

```
HttpURLConnection c = (HttpURLConnection) updateUrl.openConnection();
c.setConnectTimeout(500);
c.setReadTimeout(500);
c.setRequestMethod("GET");
c.setDoOutput(true);
c.connect();  // the program stops here 
```

我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:28:41.550

非常感谢，阿索克！！我使用 org.apache.http.client.HttpClient 解决了：

```
HttpParams httpParameters = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParameters, 500);
HttpConnectionParams.setSoTimeout(httpParameters, 500);

HttpGet httpget = new HttpGet(updateUrl.toURI());
DefaultHttpClient httpClient = new DefaultHttpClient();
httpClient.setParams(httpParameters);

HttpResponse response = httpClient.execute(httpget);
HttpEntity entity = response.getEntity();
InputStream is = entity.getContent();

//download file..... 
```

# javascript - D3.js 强制有向图，通过使边缘相互排斥来减少边缘交叉

> ID：12007141
> 
> 赞同：53
> 
> 时间：2012-08-17T13:50:59.663
> 
> 标签：javascript, graph, d3.js, force-layout

所以我已经有一个页面，它绘制了一个力导向图，就像[这里](http://networkx.lanl.gov/)显示的那样。

这很好用。我正在使用[这里](http://mbostock.github.com/d3/ex/force.html)的 JS ，通过一些调整来更好地分散节点。

这些或多或少是唯一的区别：

```
d3.json("force.json", function(json) {
  var force = d3.layout.force()
      .gravity(0.1)
      .charge(-2000)
      .linkDistance(1)
      .linkStrength(0.1)
      .nodes(json.nodes)
      .links(json.links)
      .size([w, h])
      .start(); 
```

降低链接强度似乎使链接更像弹簧，因此它变得类似于经常使用的[Fruchterman & Reingold](http://en.wikipedia.org/wiki/Force-based_algorithms_%28graph_drawing%29)技术。这工作得相当好，但仅适用于相当小的图形。对于较大的图表，交叉点的数量只会增加 - 正如人们所期望的那样，但它所采用的解决方案通常远非最佳。我不是在寻找获得最佳解决方案的方法，我知道这非常困难。我只是希望它有一些粗略的添加，试图将线条和节点分开。

**有没有办法在链接之间以及节点之间添加排斥？**我不熟悉 D3 force 的工作方式，我似乎找不到任何说这是可能的...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-06-30T23:08:57.557

**不幸的是，您的问题的答案不存在。**

D3 中没有内置机制可以排斥边缘或最小化边缘交叉。您会认为在边缘实施收费并不难，但我们来了。

此外，似乎没有任何机制**可以**减少一般的边缘交叉。我浏览了数十个可视化库和布局算法，但没有一个涉及减少通用无向图上的边交叉。

有许多算法适用于平面图、2 级图或其他简化。[dagre](https://github.com/cpettitt/dagre/wiki)在理论上适用于 2 级图，尽管完全缺乏文档使得它几乎无法使用。

造成这种情况的部分原因是布局图表很**困难**。特别是，最小化边缘交叉是 NP 难的，所以我怀疑大多数布局设计师都会遇到这个问题，用头撞键盘几次，然后放弃。

如果有人为此提出了一个好的库，请为我们其他人发布它:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T19:27:28.187

比试图强行排斥边缘更容易的方法是摆动节点，直到系统中的交叉线数量减少。

[http://en.wikipedia.org/wiki/Simulated_annealing](http://en.wikipedia.org/wiki/Simulated_annealing)

从连接数量最少的节点开始，然后向下摆动。

如果您尝试将边缘用作节点，我怀疑您只会遇到相同的空间锁定问题。解决方案是找出边缘交叉点的位置以及是否可以解决它们。您可能会发现解决许多边缘交叉是不可能的

一种更横向的可视化方法是对其进行动画处理，使其一次仅显示节点和连接的子集。或者使边缘透明，直到用户将鼠标焦点放在节点上，这点关联的边缘变得更加可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-08T07:16:15.433

I followed the Force Editor example and I saw that setting `charge` and `linkDistance` values solves the problem.

```
 ...
  .charge(-200)
  .linkDistance(50)
  ... 
```

Screenshot:

![enter image description here](../Images/b95940a915067256efdd7ce06a6e340b.png)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-09-13T09:00:32.283

我已经“解决”了这个问题：

```
nodes[0].x = width / 2;
nodes[0].y = 100;
nodes[0].fixed = true;
force.on("tick", function(e) {

    var kx = .4 * e.alpha, ky = 1.4 * e.alpha;
    links.forEach(function(d, i) {
      d.target.x += (d.source.x - d.target.x) * kx;
      d.target.y += (d.source.y + 80 - d.target.y) * ky;
    });
    [...]
 } 
```

[http://mbostock.github.io/d3/talk/20110921/parent-foci.html](http://mbostock.github.io/d3/talk/20110921/parent-foci.html)

这不完全是我们想要的，但和以前一样好。重要的是，您定义一个“根”节点并修复它。

```
nodes[0].fixed = true; 
```

它看起来更像一棵树，但更清晰。

# sql - 获取 SQL“将数字转换为数字数据类型的算术溢出错误。” 在测试入站值的语句上

> ID：12007144
> 
> 赞同：1
> 
> 时间：2012-08-17T13:51:03.717
> 
> 标签：sql, sql-server, tsql

我有以下语句在一个非常大的存储过程结束时执行。

```
UPDATE myTable
SET    DiffPerc = CAST(CASE
                         WHEN ( CASE
                                  WHEN SimExt = 0
                                       AND StdExt = 0 THEN 0
                                  WHEN StdExt = 0 THEN 99999
                                  ELSE SimExt - StdExt / StdExt
                                END ) * 100 > 99999 THEN 99999
                         ELSE ( CASE
                                  WHEN SimExt = 0
                                       AND StdExt = 0 THEN 0
                                  WHEN StdExt = 0 THEN 99999
                                  ELSE SimExt - StdExt / StdExt
                                END ) * 100
                       END AS DECIMAL(8, 2)) 
```

这个想法是我有一个字段来确定一个值与另一个值的百分比差异。该字段是to`DiffPerc`的百分比差异。这个例程每天都有效，已经一年多了，但是，从两天前开始，我开始收到以下错误消息：`SimExt``StdExt`

> 将数字转换为数字数据类型的算术溢出错误。

我理解这条消息的含义，但嵌入 case 语句的全部意义在于测试分母中的 0，以及在将值打包到`DECIMAL (8, 2)`字段中之前检查任何非常高的值百分比。

我错过了什么？如何更新此语句以解决所有可能的边缘情况并在溢出发生之前处理它？

另外，请注意，`99999`以百分比形式的硬编码值是向最终用户表明有人搞砸了的标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:30:15.667

也许这是一个错字，但在我看来，您缺少一组括号。

IE

`(SimExt - StdExt) / StdExt`否则你总是会这样做，`SimExt - 1`因为减法是在除法之后完成的。

注意区别：

```
select CAST((99999999 - 99999998) / 99999998 as decimal(8,2))
select CAST(99999999 - 99999998 / 99999998 as decimal(8,2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:58:04.953

最终结果超过大小 (8,2)。你需要增加规模

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:00:15.077

这可能是一个超出范围的高值。尝试更改为

```
 (CASE  
   WHEN SimExt = 0 AND StdExt = 0 THEN 0  
   WHEN StdExt = 0 THEN 99999  
   when simext>1000000 then null
   ELSE SimExt - StdExt / StdExt  
   END) * 100 > 99999 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T14:11:06.977

SQL 不做短路评估，所以你必须保护它。 [http://en.wikipedia.org/wiki/Short-circuit_evaluation](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

实际上，它将评估这两种情况并最终选择正确的路径。

# asp.net-mvc - 在 .Net MVC 4 中从单个视图保存多个模型

> ID：12007145
> 
> 赞同：1
> 
> 时间：2012-08-17T13:51:04.343
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在编写一个用于存储学校课程数据的应用程序，我需要在 .Net MVC 的单个视图中保存 2 个相关模型，但是我无法理解如何将它们组合在一起。

我有 2 个模型，主题和课程，一个主题可以有多个课程。在我看来，我希望允许用户输入新主题的详细信息，并在单个表单提交中为该主题分配课程。

示例：
学科名称
学科带头人教师姓名

（如果一个学科有多个班级，下面的字段可能是递归的）
班级名称
班级开始时间
班级教师姓名

用户会出现并输入学科名称和学科带头教师姓名，然后输入新班级名称、开始时间和班主任姓名，一旦他们完成此操作，他们将提交表格，我需要保存学科名称和学科将教师姓名引导至学科模型，将班级名称、班级开始时间和班级教师姓名引导至班级。

1.  如何在单个视图中为 2 个模型创建表单字段？
2.  如何获取提交的数据并将其保存回 2 个单独的模型？

如果有人可以帮助我并提供一些示例代码，那将是很棒的，因为我现在迷路了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:59:37.053

这正是 viewModel 的用途。您在 UI 中创建一个新类并为其提供您需要在视图中访问的任何属性

```
public class SubjectClassViewModel()
{
  public string SubjectName {get; set;}
  public string LeadTeacherName {get; set;}
  public string ClassName {get; set;}
  public DateTime StartTime{get; set;}
  public string TeacherName{get; set;}
} 
```

然后将您的视图强输入到此视图模型中 在您的控制器中，收集视图模型并将数据保存到适当的表中

```
[HttpPost]
public ActionResult Details (SubjectClassViewModel viewModel)
{
  //can't really give details here without knowing what pattern you're using for data access
  //but basically you want to
  //save viewModel.SubjectName and viewModel.LeadTeacherName to the Subject table
  //save viewModel.ClassName, etc to the Class table
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:23:38.370

我可以建议您使用包装器；怎么样？，是的，代表您正在使用的视图或表单并将其设置为您的视图模型类型的主要类，请尝试以下操作：

模型：

```
public class person
    public property id as integer
    public property name as string
    public property status as integer
end class

public class marriage
    public property husband as person
    public property wife as person
end class 
```

然后在视图中：

```
@Modeltype marriage

<span>Wife Name:</span></br>
@Model.wife.Name

</br>

<span>Husband Name:</span></br>
@Model.husband.Name 
```

在行动中，我们采取阶级联姻，让每个人分居

```
dim t_wife as person = marriage.wife
dim t_husband as person = marriage.husband

'Put save wife code here ---

'Put save husband code here --- 
```

# java - 从目录中检索 .class 文件的列表

> ID：12007146
> 
> 赞同：1
> 
> 时间：2012-08-17T13:51:07.533
> 
> 标签：java, class, methods

我可以使用以下代码从目录中检索文件列表

```
public List listClassFilesForFolder(final File folder) {
    for (final File fileEntry : folder.listFiles()) {
        if (fileEntry.isDirectory()) {
            listClassFilesForFolder(fileEntry);
        } else {
            if (fileEntry.toString().toUpperCase().endsWith(".CLASS")) {
                filesInDirectory.add(fileEntry);
                System.out.println(fileEntry.getName());
            }
        }
    }
    return filesInDirectory;
} 
```

但我想检索 java.lang.Classes 列表（例如 Example.class），因此上述方法不起作用，因为它返回 java.io.Files 列表。

有谁知道可以返回 java.lang.Classes 列表的递归方法，因为我需要传入 java.lang.Class 而不是 java.io.Files 的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:54:23.503

出色地。您需要加载类以获取 Class 对象。为此，您必须确保这些文件在您的类路径中，然后是 Class.forName，或者您必须制作自己的类加载器并加载文件数据并使用类加载器定义一个新类。

# java - 如何在 JPA 中反映“嵌套集”模型

> ID：12007148
> 
> 赞同：2
> 
> 时间：2012-08-17T13:51:09.747
> 
> 标签：java, database, jakarta-ee, jpa, nested-sets

对分层数据使用[嵌套集很好。](http://www.evanpetersen.com/item/nested-sets.html)但是在这个设计中，如果你删除或插入一些数据，你应该总是计算右节点和左节点。此外，您没有任何外键。

我如何用 JPA 反映这个模型？可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:53:36.197

我认为即使使用 RIGHT 和 LEFT，您仍然需要 PARENT_ID，否则父/子查询效率低下，或者我什至不确定可能。

您可以在应用程序/模型中或通过 PrePersist/PreUpdate/PreRemove 事件更新 RIGHT 和 LEFT 值。

另一种选择是改用分解表。为此，您只需要添加一个使用 ManyToMany 连接表的 allChildren 关系。当您将子节点添加到任何节点时，您只需要将子节点添加到其所有父节点。

另一种选择是只在数据库中使用分层查询，例如 Oracle 中的 CONNECT BY 子句。

# java - Apache commons验证器，要验证的bean属性都应该是字符串吗？

> ID：12007149
> 
> 赞同：0
> 
> 时间：2012-08-17T13:51:12.863
> 
> 标签：java, validation, jakarta-ee, servlets, apache-commons

我最近正在研究 apache commons 验证器。问题解释如下。

我的 Bean 有 2 个属性 fullName (String) & age (int)。两者都“需要”验证，但年龄也需要检查“整数”。

```
bean.setFullName("Tester"); -----> Will Pass
bean.setAge("Too Old"); ---> "required Pass but "integer" Fail.

results = validator.validate(); 
```

**注意：**如果 age 属性是 String 但它不是，并且 setAge 不会接受 String 值并在到达 validator.validate() 之前抛出异常，则上述是可能的。

在我们设置 bean 之前应该检查验证。在上述情况下，我需要使所有属性字符串都比在validation.xml 中检查整数/条件。

***当我的年龄属性是整数时，我如何使用它。有点困惑。用日期、整数等处理 bean？***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T01:52:16.163

我的 Bean 有 2 个属性 fullName (String) & age (int)。两者都“需要”验证，**但年龄也需要检查“整数”**。

如果您的域类`age`已声明为 an，`int`那么您有两个选择

1.  在调用 setAge(int a) 之前检查数据，您可以使用[IntegerValidator](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/routines/IntegerValidator.html)
2.  提供一个内部使用[IntegerValidator的重载方法 setAge(String a)](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/routines/IntegerValidator.html)

**我的推荐**

commons-validator 仅适用于字符串（如果您希望一次验证整个 bean）并且不适合您的场景。我建议您放弃它以支持标准[JSR 303](http://java.dzone.com/articles/bean-validation-and-jsr-303)。它功能丰富，有两个非常好的实现：

1.  [休眠验证器](http://www.hibernate.org/subprojects/validator.html)
2.  [阿帕奇 BVAL](http://bval.apache.org/)

# html - 外部文件的 HTML 路径

> ID：12007153
> 
> 赞同：0
> 
> 时间：2012-08-17T13:51:18.850
> 
> 标签：html, css, path

我想知道我们提供路径之间`./`以及`../`何时提供路径之间有什么区别。是一样的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T13:52:33.257

`.`是当前目录

`..`是父目录

所以从`http://example.com/foo/bar/baz.html`：

`./x`是`http://example.com/foo/bar/x`

`../x`是`http://example.com/foo/x`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:52:31.003

`./`是当前目录，`../`是当前目录的父目录

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T13:57:11.567

这`./`是当前目录，这`../`是父目录。

所以这个：`../hello.png`意思是：从父目录中获取 hello.png。这`./hello.png`是相同的`hello.png`; 两者都是从当前目录中获取的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T13:53:45.760

`./`引用当前目录，同时`../`引用父目录，依此类推`../../`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T04:19:10.680

据我了解`./`是同一个目录。`../`向后遍历目录结构。

示例：工作目录：`\drives\letters\numbers`

`./`是数字中的数字目录 `../`将带您到字母 `../../`数字目录将带至驱动器目录

并且您不断添加`../`以向后退，直到您在正确的位置。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-24T07:24:06.250

下面给出的示例之间没有区别，两者都是相同的

```
./myfiles/images

../myfiles/images 
```

这个 ./myfiles/images 是这里的图像文件夹，这个 ../myfiles/images 是这里的 myfiles 文件夹的父目录

所以 ../myfiles/images 就像我们想要来自 images 文件夹的图像。这 ./myfiles/images 与图像相同，都是从此处的图像文件夹中获取的。

# javascript - Javascript：声明函数的最佳实用方法

> ID：12007154
> 
> 赞同：0
> 
> 时间：2012-08-17T13:51:38.677
> 
> 标签：javascript, jquery

我过去工作的几个网站主要使用 jquery 进行事件驱动，我通常使我的功能如此

```
function abc() {
    //do stuff
}
abc(); 
```

和

```
function foo() {
    var a = $('.aaa');
    var b = $('.bbb');
    var c = $('.ccc');

    function animal() {
        //do stuff
    }
    animal();

    function pet() {
        //do stuff
    }
    pet();
}
foo(); 
```

我知道这不是最佳做法，但我仍在学习，它似乎有效。我只是想知道我现在应该如何处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:53:20.807

阅读[编写一致、惯用的 JavaScript 的原则](https://github.com/rwldrn/idiomatic.js/)。这是一个非常好的 Javascript 风格指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:06:17.213

实际上，如果您在全局范围内定义所有这些函数（如全局对象窗口的属性/方法），则示例中的代码（第一个）并不是您可以做的最好的事情。我更喜欢使用模块模式[http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript) 我建议你在上面的链接中阅读整本书。另一件事非常有用 - Stoyan Stefanov 的 JS 模式书[http://www.amazon.com/JavaScript-Patterns-Stoyan-Stefanov/dp/0596806752](https://rads.stackoverflow.com/amzn/click/com/0596806752)。

您的示例（第二个）的另一种选择是自动执行功能：

```
(function () {
   //attaching events and doing all other stuff
}()); 
```

首次加载页面时，自执行函数可帮助您进行一些初始化工作。你可以附加事件或/和做其他你应该做的事情。它可以防止您污染全局范围并多次执行 init。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:31:38.120

我通常会选择这样的东西。将整个代码包装在一个闭包中，并在将所有必需的方法和变量附加到一个命名空间对象之后返回一个命名空间对象。

```
var myApp = (function foo() {
    "use strict";
    var myApp = {

        a       : $('.aaa'),
        b       : $('.bbb'),
        c       : $('.ccc'),
        animal  : function () {
            //do stuff
        }
    };

    myApp.pet =  function () {
        //do stuff
    };

    return myApp;
}());

myApp.animal(); 
```

# javascript - 在javascript文件中生成url

> ID：12007158
> 
> 赞同：1
> 
> 时间：2012-08-17T13:51:49.903
> 
> 标签：javascript, ajax, url, grails

我想知道，这是在外部 javascript 文件中编写 url 的最佳方式。
示例：
我有一个执行 ajax 调用的 javascript，例如：

```
$(函数(){
    $('#myButton').click(function(){
        $('#content').html($.get('/my-controller/myaction'));
    });
});

```

在这种情况下，我必须在我的 javascript 文件中硬编码控制器的 url。
我正在使用 grails，它有一种创建 url 的好方法，我想使用它（如果控制器更改 url，我不必搜索所有 javascript 文件来更改它们）
可以是什么最好的方法是什么？
创建一个控制器来提供一个包含所有需要的 url 的 javascript 文件的视图可以是一个好的解决方案吗？
有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:00:05.237

在你的 html 中编码 url 怎么样？

如果点击触发器是一个链接，只需使用 href 属性：

```
<a href="/my-controller/myaction" id="myButton">Click</a>

$(function(){
    $('#myButton').click(function(){
        var url = $(this).attr('url');
        $('#content').html($.get(url));
    });
}); 
```

如果点击触发器是按钮或其他东西，请使用 data-X 属性：

```
<button id="myButton" data-url="/my-controller/myaction">Click</button>

$(function(){
    $('#myButton').click(function(){
        var url = $(this).data('url');
        $('#content').html($.get(url));
    });
}); 
```

它很好地将 JS 和数据分开，并且在禁用 JS 时可能很有用（至少对于链接而言）。

# sql - SQL 错误：表指定了多次

> ID：12007166
> 
> 赞同：3
> 
> 时间：2012-08-17T13:52:32.647
> 
> 标签：sql, database, postgresql

我正在尝试在 PostgreSQL 中执行以下 sql 指令，当我这样做时会发生以下错误：

> 表名“fat_unidades”指定了多次”。

有什么帮助吗？

```
SELECT  amb_recepcao.sequencial, amb_recepcao.cod_und_atend, atend.nome_fantasia as uni_atendimento
, amb_recepcao.cod_profissional, profissional.nom_pessoa as nom_profissional
, amb_recepcao.cod_atividade, fat_atividades.nom_atividade, amb_recepcao.tipo_pessoa
, amb_recepcao.cod_undpaciente, uni_pacie.nome_fantasia as nom_unidpaciente
, amb_recepcao.cod_paciente, pacie.nom_pessoa as paciente, amb_recepcao.cod_pessoa
, pessoas.nom_pessoa, amb_recepcao.cod_sintoma, amb_sintomas.nom_sintoma
, amb_recepcao.data_atendimento, amb_recepcao.hora_atendimento, amb_recepcao.motivos
, amb_recepcao.acoes_realizadas, amb_recepcao.senha_atendimento
FROM amb_recepcao
LEFT JOIN fat_unidades             ON ( fat_unidades.cod_unidade = amb_recepcao.cod_und_atend )
LEFT JOIN entidades atend          ON ( atend.cod_entidade = fat_unidades.cod_entidade )
LEFT JOIN fat_atividades           ON ( fat_atividades.cod_atividade = amb_recepcao.cod_atividade )
LEFT JOIN entidades uni_pacie      ON ( uni_pacie.cod_entidade = fat_unidades.cod_entidade )
LEFT JOIN pacientes                ON ( pacientes.cod_paciente = amb_recepcao.cod_paciente )
LEFT JOIN fat_unidades             ON ( fat_unidades.cod_unidade = amb_recepcao.cod_undpaciente )
LEFT JOIN pessoas    pacie         ON ( pessoas.cod_pessoa = pacientes.cod_pessoa )
LEFT JOIN pessoas                  ON ( pessoas.cod_pessoa = amb_recepcao.cod_pessoa )
LEFT JOIN amb_sintomas             ON ( amb_sintomas.cod_sintoma = amb_recepcao.cod_sintoma )
LEFT JOIN profissionais            ON ( profissionais.cod_profissional = amb_recepcao.cod_profissional )
LEFT JOIN pessoas     profissional ON ( pessoas.cod_pessoa = profissionais.cod_pessoa ) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T13:56:47.420

你已经加入了两次。如果您需要这样做，请为您的一个联接指定一个别名，

例如

```
LEFT JOIN fat_unidades AS f1 ON f1.cod_unidade ... 
```

重复连接在下面标记

```
**LEFT JOIN fat_unidades** ON ( fat_unidades.cod_unidade = amb_recepcao.cod_und_atend )   
LEFT JOIN entidades atend ON ( atend.cod_entidade = fat_unidades.cod_entidade ) 
LEFT JOIN fat_atividades ON ( fat_atividades.cod_atividade = amb_recepcao.cod_atividade ) 
LEFT JOIN entidades uni_pacie ON ( uni_pacie.cod_entidade = fat_unidades.cod_entidade ) 
LEFT JOIN pacientes ON ( pacientes.cod_paciente = amb_recepcao.cod_paciente ) 
**LEFT JOIN fat_unidades** ON ( fat_unidades.cod_unidade = amb_recepcao.cod_undpaciente ) 
LEFT JOIN pessoas pacie ON ( pessoas.cod_pessoa = pacientes.cod_pessoa )
LEFT JOIN pessoas ON ( pessoas.cod_pessoa = amb_recepcao.cod_pessoa ) 
LEFT JOIN amb_sintomas ON ( amb_sintomas.cod_sintoma = amb_recepcao.cod_sintoma ) 
LEFT JOIN profissionais ON ( profissionais.cod_profissional = amb_recepcao.cod_profissional ) 
LEFT JOIN pessoas profissional ON ( pessoas.cod_pessoa = profissionais.cod_pessoa ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T13:57:24.550

正如错误所述，您`fat_unidades`在源表中列出了两次相同的表。当您在数据表达式中提及时，数据库引擎无法判断您指的是哪个表，`fat_unidades`因为两个引用具有相同的名称。您必须在至少一个引用上使用具有不同名称的表别名，`fat_unidades`以便对该表的每个引用都具有不同的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T13:55:05.737

使用不同的表别名

# c# - 如何使用 mouseClick 事件覆盖 mouseLeave 事件

> ID：12007173
> 
> 赞同：0
> 
> 时间：2012-08-17T13:53:13.663
> 
> 标签：c#, .net

我想知道是否有人可以帮助我解决我正在为 windows c# 论坛工作的按钮效果。

所以我有两个相似的图像，一个有背景发光，另一个没有，来创建一个按钮。我正在使用`mouseEnter(glow)`and`mouseLeave(normal)`给一个效果很好的按钮。

我在同一个表单上有 8 个不同的按钮，它们有不同的图像。

我希望在鼠标单击按钮后继续 mouseEnter 事件，即发光效果，但我无法获得正确的解决方案。当点击不同的（下一个）按钮时，发光的按钮应该恢复正常。

想知道是否有人能够将我指向正确的方向，在网上进行了一些搜索却无法提出解决方案。

```
private void btnSong1_MouseEnter(object sender, EventArgs e)
{
    this.btnSong1.BackgroundImage = 
        ((System.Drawing.Image)(Properties.Resources.satisfactionH));
}

private void btnSong1_MouseLeave(object sender, EventArgs e)
{
    this.btnSong1.BackgroundImage = 
        ((System.Drawing.Image)(Properties.Resources.satisfaction));
}

private void btnSong1_Click(object sender, EventArgs e)
{
    nowPlaying1.Visible = Enabled;
    nowPlaying2.Visible = false;
    nowPlaying5.Visible = false;

    this.btnSong1.BackgroundImage = 
        ((System.Drawing.Image)(Properties.Resources.satisfactionH));

    axWindowsMediaPlayer1.URL = 
        @"C:\MediaFile\music\ArethaFranklin\(I Can't Get No) Satisfaction.mp3";
}

private void btnSong2_Click(object sender, EventArgs e)
{
    this.btnSong1.BackgroundImage = 
        ((System.Drawing.Image)(Properties.Resources.satisfaction));
    axWindowsMediaPlayer1.URL = @"C:\MediaFile\music\ArethaFranklin\Come To Me.mp3";
    nowPlaying1.Visible = false;
    nowPlaying2.Visible = Enabled;
    nowPlaying5.Visible = false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:26:42.353

您是否尝试过使用自己的按钮类。我做了一个快速演示`GlowingButton`。单击时播放给定的 songUrl，鼠标进入时发光并在离开或单击时重置背景。

```
// don't forget: using System.Runtime.InteropServices;
class GlowingButton : System.Windows.Forms.Button
{
    [DllImport("winmm.dll")]
    private static extern long mciSendString(string strCommand,
                                             StringBuilder strReturn,
                                             int iReturnLength,
                                             IntPtr hwndCallback);

    public string SongURL { get; set; }
    public GlowingButton() : base()
    {
        this.BackgroundImage = Winforms_Demo.Properties.Resources.bg;
        this.BackgroundImageLayout = System.Windows.Forms.ImageLayout.Stretch;
    }
    protected override void OnMouseEnter(EventArgs e)
    {
        base.OnMouseEnter(e);
        this.BackgroundImage = Winforms_Demo.Properties.Resources.bgGlow;
    }
    protected override void OnMouseLeave(EventArgs e)
    {
        base.OnMouseLeave(e);
        this.BackgroundImage = Winforms_Demo.Properties.Resources.bg;
    }
    protected override void OnClick(EventArgs e)
    {
        base.OnClick(e);
        this.BackgroundImage = Winforms_Demo.Properties.Resources.bg;

        if (!string.IsNullOrEmpty(SongURL))
        {
            mciSendString("open \"" + SongURL + "\" type mpegvideo alias MediaFile", null, 0, IntPtr.Zero);
            mciSendString("play MediaFile", null, 0, IntPtr.Zero);
        }
    }
} 
```

在您的表单中，您所要做的就是为**每个发光按钮设置一个 songUrl** **（**通过设计器或在您的源中）！

# javascript - 使用 jquerymobile、ajax 和 jquery bbq 构建移动网站是否可能/明智？

> ID：12007175
> 
> 赞同：0
> 
> 时间：2012-08-17T13:53:20.413
> 
> 标签：javascript, jquery, ajax, jquery-mobile, jquery-bbq

我有一个用于台式机/笔记本电脑的网站，使用 jquery 和 jquery bbq 构建。

我现在想制作这个网站的移动版本，并计划使用 jquerymobile。但是，我有点害怕在某些文档中看到 href="#" 链接，因为我已经在操纵位置哈希以使用 jquery bbq 提供后退/前进/书签。

这些技术是兼容的还是我正走向一个麻烦的世界？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:15:44.107

决定不将两者混为一谈，以保持我的移动应用程序简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:35:27.510

我看不到麻烦。这`href="#"`只是一种说这是一个不做任何事情的链接的唯一方式。
说`href="#"`instread 是一个古老的传统`href=""`。

# asp.net - DropDownList 显示 System.Data.DataRow.View

> ID：12007176
> 
> 赞同：0
> 
> 时间：2012-08-17T13:53:30.710
> 
> 标签：asp.net, sql

我正在使用 Visual Studio 2010 以及用于 ASP.NET 的 Infragistics WebDropDown 工具（这对我来说仍然是新的）。我使用“拖放”方法以及设置向导来进行设计和简化（尽管我更喜欢手动编程）。

我有一个 Web 用户控件（“ClientSelect.ascx”）。在该表单中，我添加了必要的 ScriptManager，并且还放入了 WebDropDown 工具。使用 WebDropDown 向导，我建立了 WebDropDown 的数据源（它添加了到数据库的连接）。向导允许您测试 SQL 查询，我得到的结果是正确的。

但是，当站点加载时，值是“System.Data.DataRowView”而不是实际值（“0001”、“0002”等）。无论如何要“ToString（）”这些结果。我只是没有看到我的查询如何返回正确的结果，但 WebDropDown 输出了其他内容。

这是我的代码：

```
 <asp:ScriptManagerProxy ID="ScriptManagerProxy1" runat="server">
    </asp:ScriptManagerProxy>

    <ig:WebDropDown ID="WebDropDown1" runat="server" Width="112px" 
     DataSourceID="SqlDataSource1" Height="20px">
    </ig:WebDropDown>

    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString5 %>" 
    SelectCommand="SELECT DISTINCT clientNum FROM myTable">
    </asp:SqlDataSource> 
```

提前感谢您的任何建议。

解答：我将查询更改为“SELECT DISTINCT clientNum AS clients FROM myTable”。然后我添加了属性 TextField = "clients"。感谢 MrZulu 和 ggonslav

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:04:07.977

`DataTextField="clientNum"`作为属性的地方`<ig:WebDropDown ...>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:58:38.913

您必须将 TextField 属性设置为**clientNum**。

链接在这里

[基础设施帮助步骤 15](http://help.infragistics.com/Help/NetAdvantage/ASPNET/2012.1/CLR4.0/html/WebDropDown_Binding_WebDropDown_to_a_Sql_Data_Source.html)

```
<ig:WebDropDown ID="WebDropDown1" runat="server" Width="112px"   
DataSourceID="SqlDataSource1" Height="20px"
 TextField ="clientNum" >  
</ig:WebDropDown> 
```

# forms - Symfony2 使用 FormBuilder 将属性添加到字段而不是标签

> ID：12007183
> 
> 赞同：1
> 
> 时间：2012-08-17T13:53:52.833
> 
> 标签：forms, symfony, formbuilder

如何仅使用 FormBuilder（而不是树枝表单主题）将属性添加到字段。当我使用

```
$builder->add('body',null,array('attr' => array('class' => 'tinymce'))); 
```

`tinymce`它也为标签添加了一个类。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-22T19:13:13.027

```
$builder
            ->add('email', EmailType::class ) //will display default label
            ->add('username', TextType::class,
                array(
                    'label' => false,
                    'attr' => array(
//                      'class' => 'myclassfrom.css', //<- this one is realy avesome
                        'placeholder' => 'UsernameExample',
                        'autofocus' => '',

                    ),
            )) 
```

# html - 网站的 css 和 js 文件被工作场所过滤器阻止

> ID：12007191
> 
> 赞同：1
> 
> 时间：2012-08-17T13:54:05.077
> 
> 标签：html, css, filter, proxies

我最近为一家小型营销和设计公司开发了一个新网站作为自由项目。一切似乎都运行良好，除了一个问题：在测试期间，我们发现各种工作过滤器代理背后的一些人正在获得无样式版本。CSS（可能还有一些 JS）文件似乎是唯一被阻止的文件。该网站本身没有被阻止。

我已经尝试了一些方法来解决这个问题。首先，我使用验证器验证了 CSS 代码是否正确。我还尝试直接在服务器上引用文件，文件路径中包含 www（而不是相对链接）。我还删除了 css 中的几条评论（其中一条以无害的方式使用了“显式”一词）。

后一种操作似乎解决了某些人的问题，但无论我们如何尝试，仍然有一个人无法看到该网站的样式版本。她每次都在清理缓存。我还尝试重命名文件并为每个步骤引用新版本，以确保她的工作过滤器最终缓存文件不是问题。仍然没有运气。

我在网上做了很多搜索，但除了我上面的尝试之外，几乎找不到任何有用的信息来解决这个问题。

我知道工作过滤器很棘手，但只有 CSS 会被阻止似乎令人沮丧和奇怪。此外，我的客户可能有他们自己的客户，他们有工作过滤器——我们需要确保网站对这些人来说不是一团糟。

谁能给我一些建议？

**编辑以添加更新**：我只是尝试在页面中移动样式，现在样式出现了......但有趣的事情（之前是真的，但不知何故我没有想到）是没有图像出现，甚至不是样式表中未指定的，而是直接在页面中指定的。所以我仍然不确定下一步该尝试什么。

# oop - 为什么依赖注入比使用工厂更好？

> ID：12007197
> 
> 赞同：4
> 
> 时间：2012-08-17T13:54:28.280
> 
> 标签：oop, language-agnostic, dependency-injection

我一直在阅读依赖注入，并且我理解在 XML 中指定依赖项的吸引力，就像在许多框架中所做的那样。我在一个大型系统上工作，我们通常调用工厂来获取具体对象，并且正在努力理解为什么如[这篇 Wikipedia 文章](http://en.wikipedia.org/wiki/Dependency_injection#Manually_injected_dependency)中所示的手动注入依赖项据说会更好。

在我看来，调用工厂更好，因为：

1.  调用代码不需要知道或关心是否存在特定的依赖项。
2.  如果向被调用者添加了新的依赖项，则调用代码不需要更改。
3.  调用代码不需要任何专门用于选择要注入的具体实例的逻辑。

在我看来，依赖注入仅在调用代码*必须*决定依赖的具体类时才提供好处。几乎就像“这是我的数据，现在处理它”。

有什么我错过的吗？

**更新：** 为了澄清，我们现有的代码大多直接调用工厂。所以要获得一个新的 Ball 对象，你会看到如下代码：

```
Ball myBall = BallFactory.getObject(); 
```

许多这些工厂被实现为允许新的具体对象类型的运行时注册 - 一个插件框架。

因此，在查看了一些初始注释之后，似乎使用 DI 我的调用代码通常不会传入 Ball 对象，而是传入 BallFactory。我想这样做的好处是该类可能更通用，因为它甚至没有与它使用的工厂耦合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:02:29.477

依赖注入有助于单元测试。它允许您分离和隔离类的功能，因为它的任何依赖项都可以注入（因此也可以模拟）到类中。如果依赖项访问外部资源（例如 DB），这将特别有用。

我最近读了一篇文章，展示了依赖注入在测试中的优势。它专门针对静态方法，但同样适用于工厂。

[http://misko.hevery.com/2008/12/15/static-methods-are-death-to-testability/](http://misko.hevery.com/2008/12/15/static-methods-are-death-to-testability/)

就像@deceze 说的那样，如果你注入你的工厂，你就会两全其美......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T04:48:52.053

两者都不比另一个“更好”；你可以单独使用依赖注入，也可以单独使用工厂，或者结合使用这些。

此外，您提到的关于工厂的所有 3 点对于依赖注入同样有效。请记住，可以在任何时间点注入依赖项，而不必立即通过“调用代码”进行注入。事实上，这就是 DI 框架为您所做的——它基本上是一个巨大的工厂，可以创建您的主应用程序对象并为您注入所有依赖项。

仅当您的代码需要能够在运行时创建依赖项的新实例时，显式使用工厂才有用。否则，在应用程序启动期间简单地使用 DI 框架注入所有静态依赖项要简单得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T08:27:14.060

结合使用依赖注入和抽象工厂通常很有用——但有两个不同的原因。使用（手动）**依赖注入**的原因是它允许您在单元测试期间注入一个特殊的对象。如果您的设计描述调用代码不应负责创建对象（如您的 1-2-3 项目符号），则提供的依赖项应是**抽象工厂**的实例。注入的对象将在需要时使用工厂创建对象。

假设您使用两个工厂来生成依赖项（这里只有一个依赖项，Dice），用于轻松和困难的双陆棋游戏：

```
public class EasyGameFactory implements GameFactory
{
  Dice createDice()
  {
    return new LuckyDice();
  }
}

public class NormalGameFactory implements GameFactory
{
  Dice createDice()
  {
    return new RandomDice();
  }
} 
```

出于单元测试的目的，您真的不希望使用任何 Dice 实现，因此您编写了 GameFactory 的特殊实现：

```
public class CustomGameFactory implements GameFactory
{
  private Dice mDice;

  public CustomGameFactory(Dice dice)
  {
    mDice = dice;
  }

  Dice createDice()
  {
    return mDice;
  }
} 
```

该工厂不必是您的生产代码树的一部分。您通过测试代码向工厂提供 Dice 的特殊实现：

```
public class TestBackgammon
{
  @Test public void shouldReturnDiceThrown() 
  {
    SettableDice dice = new SettableDice();
    Game game = new GameImpl(new CustomGameFactory(dice));

    dice.setDice(new int[] {4, 5});
    game.nextTurn();
    assertArrayEquals(new int[] {4, 5}, game.diceThrown());
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T14:14:35.020

是否使用依赖注入有点像 C 语言中 using`printf`和 using的区别`fprintf`。呼叫者以必须做出选择为代价获得了灵活性。当调用者不想要灵活性时（例如，如果您的程序的所有输出都进入标准输出，而不是标准错误或文件），灵活性是纯粹的负担，因为调用者总是必须传递相同的“正确”值。

如果您将依赖注入视为纯粹的负担，那意味着您的调用者并没有真正使用它。

您的第 1 点和第 3 点都说，“调用代码影响所发生事情的自由度较小”，这并不总是一个优势。测试代码特别受益于注入依赖项，但也可能存在调用者出于其他原因需要灵活性的情况。您使用 登录`printf`，还是通过在注入的记录器上调用函数进行登录？

第 2 点归结为您如何发展 API。是的，如果原始设计需要更改，那么通过使用固定的隐藏依赖项，您可以保护 API 不反映该更改。有时您可以使用新依赖项的默认值维护旧 API，并在某处添加带有额外参数的新方法/构造函数。

尽管如此，我使用过的语言中的标准库并不需要大量的依赖注入。所以你并不是唯一一个认为你的 API 不需要它的人，但我怀疑你可以从内部获得比现在更多的东西。例如，您可以在不连接到远程机器的情况下测试您的网络代码吗？如果没有，请考虑您的测试程序的这一部分是否会更容易、更快，并在可能的情况下提供更准确的诊断。

# multithreading - 这是比赛条件吗？

> ID：12007205
> 
> 赞同：9
> 
> 时间：2012-08-17T13:54:52.037
> 
> 标签：multithreading, race-condition

竞态条件的定义：竞态条件或竞态危害是系统或过程中的缺陷，其中过程的输出或结果出乎意料地严重依赖于其他事件的顺序或时间。

考虑以下伪代码：

```
 Global variable i initialized to 6;
    Thread 1: 
        acquire(lock l)
        increment global variable i, i.e. i++;

    Thread 2: 
       acquire(lock l)
       double the value of global var i, i.e.: i*=2; 
```

如果 T1 先获得锁 l，然后 T2，则 i 的值将是 14。另一方面，如果 T2 先获得锁 l，然后 T1，则 i 的值将是 13。

那么，这是否是竞争条件？

更新：经过多次评论和回答，意见仍然存在分歧。我的观点是“是的，这是一个竞争条件”类别。实际上，我在另一个问题上给出了这个例子作为竞争条件的情况。同时，我还在“不，这不是竞争条件”类别中看到了一些有趣的评论。我想我会解决并得出结论，这取决于一个人看待问题的角度/水平，这是否是一种竞争条件。但是，我仍在等待有趣的答案/评论。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T15:38:26.703

我认为示例算法是否具有竞争条件取决于算法的预期用途。

修改没有数据竞争`i`- 这些访问是序列化的，并且相对于彼此原子地发生。

但是，如果增量发生在乘法之前（反之亦然）对算法的正确性很重要，那么就会存在竞争，并且必须使用其他方式来同步算法的执行。如果算法应该是一种复杂的计算方式`i * 2 + 1`（就像使用线程执行计算一样荒谬），那么就会出现竞争条件。

考虑以下程序片段：

```
int data;

pthread_cond_t condvar = PTHREAD_COND_INITIALIZER;
pthread_mutex_t mux = PTHREAD_MUTEX_INITIALIZER;

void* wait_for_data(void*)
{
    pthread_mutex_lock( &mux);
    pthread_cond_wait( &condvar, &mux);

    puts("got the data: %d\n", data);

    pthread_mutex_unlock( &mux);

    return 0;
}

void* set_data(void*)
{
    pthread_mutex_lock( &mux);

    data = 42;

    pthread_cond_signal( &condvar);

    pthread_mutex_unlock( &mux);

    return 0;
} 
```

两个线程本质上是完全互斥的——没有数据竞争。但是，如果在等待`set_data()`条件变量之前发出信号，则永远不会完成。我认为由于条件变量的使用不当，大多数人会称其为竞争条件。`wait_for_data()``wait_for_data()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T13:59:50.350

不，这不对。因为它在读取和写入 i 之前锁定。因此，您示例中的读取和写入始终是一致的。当然，您应该在每次操作后解锁，但我猜您只是忘记在伪代码中添加它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T14:00:24.530

不，这是预期的执行顺序之一。竞争不会用某种锁来保护计数器，从而允许加载-修改-存储周期同时运行。

### 编辑0：

@Gheorghe，想想一个联合银行账户的例子，两个人同时在不同的银行办事处取钱。每个地点的职员都需要检查账户余额、发放现金并记下新余额。如果这对于余额来说不是“原子的”，即在此操作期间帐户没有“锁定”，那么他们最终可能会在他们两人之间获得比他们在银行中的更多的钱。银行不喜欢这样。

但是如果账户在被操纵时被锁定，输出是否取决于时间？是的，绝对 - 总和不会改变，但他们两个之间的分配可能不同。

重要的是受保护价值的一致性——无论这两个家伙以什么顺序和多少次从背后拿钱，他们得到的钱都不会比他们原来的多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T08:18:50.707

注意：我从 Java 的角度给出一个答案，因为这个问题源于[之前关于 Java 内存模型](https://stackoverflow.com/a/12006809/829571)的讨论。

围绕“竞争条件”的定义似乎有很多混淆，这就是为什么你会得到不同的答案。

如果您的意思是“数据竞争”，那么在 Java 的上下文中只有一个有效的定义，它由[Java 语言规范 17.4.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5-330)给出：

> 当一个程序包含两个冲突的访问（第 17.4.1 节）时，这些访问没有按发生前的关系排序，则称为包含数据竞争。

冲突访问在[17.4.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.1)中定义：

> 如果至少有一次访问是写入，则对同一变量的两次访问（读取或写入）称为冲突。

[在您的情况下，您的代码包含由17.4.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)定义的发生前关系：

> 监视器上的解锁发生在该监视器上的每个后续锁定之前。

**因此，在 Java 上下文中，您的代码中没有数据竞争 - 任何人说否则都是在使用非 Java 定义。**

其他人评论了“一般竞赛”，因为这两个代码中的任何一个都可以先运行，但这是一个算法问题：要么你的代码是可并行的，这无关紧要，要么不是，你应该按顺序运行它。但这是一个错误，而不是数据竞赛。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-17T13:58:34.737

是的。根据定义，它是。此外，您还会遇到可变波动性的问题。在这种情况下，无法保证哪个线程将变量从内存加载到哪个寄存器，然后将其保存到内存中。所以在某些情况下，一个线程可能会得到一个陈旧的值。在许多语言中，您必须以某种方式确保始终获取干净的副本。（在 Java 易失性中）

[http://www.freebsd.org/doc/en/books/developers-handbook/secure-race-conditions.html](http://www.freebsd.org/doc/en/books/developers-handbook/secure-race-conditions.html)

我认为这也是一个很好的定义。

阅读：[http ://dl.acm.org/citation.cfm?id=130623](http://dl.acm.org/citation.cfm?id=130623)

“已经隐含地考虑了两个不同的概念：一个与旨在确定性的程序（我们称之为一般竞争）有关，另一个与包含关键部分的非确定性程序（我们称之为数据竞争）有关。”

因此，如果您假设该程序始终产生相同的结果，那么我会说这是一场“普遍的比赛”。如果没有，你只是有非常奇怪的设计。

# jquery - 加载请求后jQuery触发器行为异常

> ID：12007206
> 
> 赞同：0
> 
> 时间：2012-08-17T13:55:04.380
> 
> 标签：jquery

我用 jQuery 创建了一个历史 api-ish 脚本和一个 AJAX 脚本来显示新闻提要，两者都在不同的脚本文件中。单击链接时，我需要加载新闻提要，并且由于我有一个刷新提要按钮，因此我刚刚尝试触发单击该按钮。

但是，在链接点击和触发点击之后加载新闻提要的行为很奇怪。它只是闪烁然后立即消失，因此不太确定发生了什么。我尝试将所有功能更改为 live 但仍然无济于事。

我应该补充一点，提要脚本适用于页面刷新和单击刷新提要按钮，因此当历史 api 脚本被绕过时。

我无法创建 jsfiddle，因为它引用了很多文件和数据库。

这是历史 API-ish 脚本：

```
$("a#click").click(function() {
    var addressValue = $(this).attr("href");
    $("#main").load(addressValue + " #load"); 
    $("#refreshFeed").trigger('click');
    return false;
}); 
```

和提要脚本：

```
//Get feed on load
$.get("phpscripts/getFeed.php",function(result){
    $("#newsFeed").html(result);
}); 

//Get feed on click
$("#refreshFeed").live('click', function(){
    $.get("phpscripts/getFeed.php",function(result){
        $("#newsFeed").html(result);
    }); 
}); 
```

注意：这两个脚本都是在文档准备好时触发的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:56:08.410

我不确定它是否像您要求 jquery 加载字符串值（addressValue）和元素（#load）一样工作，可能是 jquery 在 addressValue 中加载 href 并用元素（#load）覆盖，因此是 flash。尝试

```
alert(addressValue + $('#load')) 
```

要查看您正在解析的内容，那么我还会建议如果 addressValue 是页面或元素的地址，然后尝试

```
$('#main').load(addressValue) 
```

看看那里会发生什么，你可以弄清楚怎么走

# c++builder - 无法在 Borland C++ Builder 中使用 SetWindowsHookEx 和 LowLevelKeyboardProc

> ID：12007219
> 
> 赞同：2
> 
> 时间：2012-08-17T13:55:51.710
> 
> 标签：c++builder, setwindowshookex

我正在开发一个软件，它在运行时必须阻止一些键盘输入。由于我已经谈到了放弃这个愿望的一些问题，所以我不会在这里重复细节（为了更好地了解情况，请阅读以下内容：[How can I disable specific Windows hotkeys from inside a software using C++?](https://stackoverflow.com/questions/11352343/how-can-i-disable-specific-windows-hotkeys-from-inside-a-software-using-c/11994703#11994703)）

我现在的问题是我能够用 Qt 做我想做的事，现在我必须将它传递给 Borland C++ Builder 6，但是 Builder 的编译器拒绝了代码：

```
SWH_return = SetWindowsHookEx(WH_KEYBOARD_LL,LowLevelKeyboardProc,GetModuleHandle(NULL),0); 
```

指出

> [C++ 错误] FrmMain.cpp(155): E2034 无法将 'long (__stdcall *)(int,unsigned int,long)' 转换为 'int (__stdcall *)()'

这很奇怪，一旦 Qt 发现这行代码没有任何问题并且一切运行正常。问题在于“SetWindowsHookEx”中包含“LowLevelKeyboardProc”。我在代码中尝试了一些更改，但没有成功。

有人可以帮我解决这个问题吗？

谢谢，

莫默吉尔

注意：有关代码的更多详细信息，请访问我发布的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:43:07.367

我认为这与没有`STRICT`定义预处理器宏有关。

但是，简单的解决方法是将函数指针转换为`HOOKPROC`.

```
SWH_return = SetWindowsHookEx(WH_KEYBOARD_LL, (HOOKPROC)LowLevelKeyboardProc, GetModuleHandle(NULL), 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:15:38.790

问题解决了——尽管可能不像人们期望的那样......

Borland Builder c++ 6 是从 2002 年开始的，比较 Builder 的编译器版本的 winuser.h 文件（其中定义了 HOOKPROC）和 Qt 的 winuser.h 我注意到它们完全不同，正如人们所期望的那样距离微软发布 Builder 版本的文件已经 10 年了。

所以我要做的就是评论 Builder 的 winuser.h 行，其中 HOOKPROC 被声明和 ctrl+c/ctrl+v Qt 的 winuser.h 版本的 HOOKPROC 的定义，它工作正常。

不过，我不认为这将是解决这个问题的最“政治正确”的方法，但无论如何它确实有效。

谢谢，

莫默吉尔

# sed - 打印匹配和不匹配的行；awk：打印匹配组

> ID：12007221
> 
> 赞同：2
> 
> 时间：2012-08-17T13:55:59.133
> 
> 标签：sed, awk

1）如何使用 sed 将标记附加到与模式匹配的行上，同时打印与模式不匹配的行？

如果我这样做' `sed -n s/pattern/pattern mark/p`'，则不会打印所有不匹配的行。

[解决了]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:00:32.303

如果您不使用 抑制默认输出`-n`，sed 将打印出所有行：

```
sed 's/pattern/pattern mark/' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:00:30.583

对于 sed 问题，只需执行以下操作：

```
sed '/pattern/s/$/pattern marker/' 
```

将模式标记附加到匹配的行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:00:23.910

不能完全回答问题，但如果您想在以下行中添加一些文本，一种方法是使用以下`GNU`版本的 append 命令`sed`：

```
sed -e '/pattern/ a mark' infile 
```

# c# - 组合框未从视图模型更新为 .net 4.5 中的视图

> ID：12007222
> 
> 赞同：0
> 
> 时间：2012-08-17T13:56:01.820
> 
> 标签：c#, .net, wpf, mvvm

我在 wpf 中有一个 ComboBox，它在视图和视图模型之间双向绑定。在win7中的.net 4下运行一切都按预期工作，但在windows 8下运行我的应用程序，组合框似乎无法从视图模型中获得正确的选定项目。

进入视图时，组合框会从视图模型中询问所选项目
。所选项目被返回，我的覆盖“Equals”的方法返回 true。
然后视图中的组合框要么不注册，要么注册然后忽略它，接下来发生的事情是视图将视图模型中的“选定项”设置为“NULL”。

是否有另一种方法可以满足要求，或者它只是在.net 4.5 下运行.net 4 应用程序中的一个错误，我将不得不忍受？

这是来源。*注意*我绑定到项目类而不是直接绑定到枚举，因此我可以访问 [Description] 标记以获得更好的组合框中的项目名称。

**看法**

```
<Controls:KNComboBox Style="{DynamicResource FlowMenuComboBox}" SelectedItem="{Binding ItemsOrder}" ItemsSource="{Binding ItemsOrderValues}" Margin="10,0,0,10"
                                             DisplayMemberPath="Description" SelectedValuePath="{Binding Path=EnumObject}" DisplayString="Sort By:"/> 
```

**查看模型**

```
private ItemsOrderByItem _itemsOrder;
    public ItemsOrderByItem ItemsOrder
    {
        get
        {
            return _itemsOrder;
        }
        set
        {
            _itemsOrder = value;
            RaisePropertyChanged("ItemsOrder");
            //Methods Called Here Not Important To Question
        }
    }
    public List<ItemsOrderByItem> ItemsOrderValues
    {
        get
        {
            List<ItemsOrderByItem> enumItems = new List<ItemsOrderByItem>();
            foreach (ItemsOrderBy enumValue in Enum.GetValues(typeof(ItemsOrderBy)))
            {
                enumItems.Add(new ItemsOrderByItem(enumValue));
            }
            return enumItems;
        }
    } 
```

**枚举**

```
public enum ItemsOrderBy
{
    [Description("Name")]
    Name,
    [Description("Date Added")]
    DateAdded        
} 
```

**项目类**

```
public class ItemsOrderByItem
{
    public ItemsOrderByItem(ItemsOrderBy enumValue)
    {
        EnumObject = enumValue;
    }
    public ItemsOrderBy EnumObject;
    public string Description
    {
        get
        {
            return EnumExtension.GetEnumDescription<ItemsOrderBy>(EnumObject);
        }
    }

    public override string ToString()
    {
        return Description;
    }

    public override bool Equals(object obj)
    {
        if (obj is ItemsOrderByItem)
        {
            return ((ItemsOrderByItem)obj).EnumObject == EnumObject;
        }
        else
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:05:03.167

检查您帖子中的代码片段会发现几个问题：

1.  ItemsOrderValues 属性在每次被查询时都会返回一个新值。这相当于在不引发属性更改通知的情况下更改值。数据绑定客户端会感到困惑。

2.  {Binding Path=EnumObject} 不起作用。绑定路径使用属性；EnumObject 是一个字段。

3.  SelectedValuePath 的类型为字符串。与 EnumObject 的绑定（如果有效）会生成 ItemsOrderBy 类型的对象。在类型转换之后，这会将 SelectedValuePath 设置为“Name”（或者可能是“ItemsOrderBy.Name”）。这是合法的，但可能不是您想要的。该路径应用于 ItemsSource 中的项目，其类型为 ItemsOrderByItem；此类型没有名为“名称”的属性。

4.  ItemsOrderByItem 类具有可变的相等语义，即对于固定对象 x 和 y，Object.Equals(x, y) 的结果可以改变。这是因为 Equals 方法依赖于一个公开可变的字段 - EnumObject。这将混淆任何（合法地）假设一旦 x 和 y 测试 Equal，它们将保持 Equal 的代码。

5.  该类覆盖 Equals，但不覆盖 GetHashCode。这是被禁止的（请参阅任何一种方法的文档），因为每当在哈希表中使用实例时，它都会导致可怕的混乱。两个相等但具有不同哈希码的实例将破坏哈希表。[当你解决这个问题时，请记住确保对象的哈希码永远不会改变 - 这也是一个记录的要求。]

其中，最后一个可能对您的问题负有最大责任。WPF 使用哈希表来帮助表示选定项的集合，并且在 v4.5 中确切的用法已经改变。ItemsOrderByItem 类的不可靠散列行为很可能导致混淆。

如果修复这些编码问题仍然不能解决您的问题，请随时打开与 repro 项目的连接错误。

# mysql - MySQL错误？混合 LEFT 和 RIGHT 连接以列出类别内的文章，包括空类别

> ID：12007223
> 
> 赞同：0
> 
> 时间：2012-08-17T13:56:03.383
> 
> 标签：mysql, outer-join, isnull

我有文章，属于article_types，属于类别。每篇文章都有一个格式。

我想按类别列出特定作者发表的所有文章。

我想显示所有类别，即使是没有文章的类别。

所有文章都有一个 article_type 并且所有类别都包含文章类型。

我有一个在 MySQL 5.5.x 上完美运行但在 5.0 上运行良好的查询。这是一个 MySQL 错误，还是应该更改查询或两者兼而有之？

```
SELECT 
    a.article_id, a.article_time, a.article_notes f.format_name, at.article_type_name, c.category_name, c.category_description 

FROM 
    article AS a 
    LEFT JOIN article_type AS at ON at.advice_id = a.advice_id 
    LEFT JOIN format AS f ON f.format_id = a.format_id 
    RIGHT JOIN category AS c ON c.category_id = at.cateory_id 

WHERE 
    (a.author_id = 5 AND a.published = 1) 
    OR (a.author_id IS NULL) 

ORDER BY 
    c.category_name ASC, a.article_time DESC 
```

所需的输出（在简单的 php 循环之后）：

```
Category 1
  Article A (Article Type I) (Digital)
  Article B (Article Type I) (Print)
  Article E (Article Type II) (Digital)
Category 2
Category 3
  Article H (Article Type V) (Audio)
  Article M (Article Type IV) (Print) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:25:16.453

由于 WHERE 子句的这一部分，无法获得包含多个作者的完整类别列表：

```
OR (a.author_id IS NULL) 
```

我不得不删除它并包含第二个查询来检索完整的类别列表。

然后，我使用 PHP（或类似的）循环遍历每个类别，并在该循环中循环遍历每篇文章，创建一个新的数组/对象，其中包含该特定作者的所有类别和文章：

```
if(is_array($categories)) {
    if(is_array($articles)) {
        foreach($categories as $ck => $cv) {
            $category_set = false;
            foreach($article as $ak => $av) {
                if($av['category_name'] == $cv['category_name']) {
                    $articles_by_category[] = $article[$ak];
                    $category_set = true;
                    unset($article[$ak]);
                }
            }
            if($category_set == false) {
                $articles_by_category[] = $categories[$ck];
            }
        }
        $articles = $articles_by_category;
        unset($articles_by_category);
    } else {
        $articles = $categories;
    }
} 
```

不过，看看是否有人有纯 MySQL 解决方案会很有趣。

# javascript - 使用javascript动态更新数组元素

> ID：12007227
> 
> 赞同：0
> 
> 时间：2012-08-17T13:56:06.343
> 
> 标签：javascript

我想将元素从 $.each 循环更新到数组中，但它错误地将它们加载到数组中。它将所有用户放入一个元素中，将所有日期放入一个元素中，依此类推。代码如下：

```
 var array = [{
      user: "",
      user_id: "",
      date: "",
      profile_img: "",
      text: "",
      contentString: "",
      url: "",
      location: ""
    }];
    $.getJSON("http://search.twitter.com/search.json?q=%23euronews&rpp=5&include_entities=true&result_type=mixed&callback=?",

    function (data) {
      $.each(data.results, function (i, item) {
        var user = item.from_user;
        var user_id = item.from_user_id;
        var date = item.created_at;
        var profile_img = item.profile_image_url;
        var text = item.text;
        var contentString = text;
        var url = (item.entities.urls.length > 0 ? item.entities.urls[0].url : '');
       console.log(i);
       array.user=user;
       array.user_id=user_id;
       array.date=date;
       array.profile_img=profile_img;
       array.text=text;
       array.contentString=contentString;
       array.url=url;

      });
      console.log(array);
       }); 
```

我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:00:49.840

您不应该将更新代码放在该`for ... in`循环中。“i”值被传递到您的函数中。不需要`for`循环。

因此，只需摆脱围绕`array[i]`作业的循环。

此外，分配是错误的：

```
 array[i].user = user;
 array[i].user_id = user_id; 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:34:15.530

似乎您想将用户添加到`array`. 使用[`.push()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)方法和对象字面量，而不是覆盖数组中已存在的所有对象的属性：

```
$.each(data.results, function (i, item) {
    array.push( {
        user: item.from_user,
        user_id: item.from_user_id,
        date: item.created_at,
        profile_img: item.profile_image_url,
        text: item.text,
        contentString: text,
        url: item.entities.urls.length > 0 ? item.entities.urls[0].url : ''
    } );
});
console.log(array); 
```

要通过覆盖现有项目来更新数组，您可能需要使用

```
 array[i] = {…}; 
```

# java - 打包 JCE 无限强度策略文件；JCE的替代品？

> ID：12007231
> 
> 赞同：4
> 
> 时间：2012-08-17T13:56:19.027
> 
> 标签：java, encryption, cryptography, jce

我创建了一个 Java 应用程序，该应用程序需要分发给广泛的用户，这些用户确实安装了 JRE，但大多数人的 JRE 中没有 JCR Unlimited Strength Policy jar 文件（因为这些需要手动放入并且是'不与 JRE 安装捆绑在一起）。

现在，我在几个地方读到，由于许可限制，JCE 文件不能与需要部署的应用程序捆绑在一起，必须手动下载并放入 JRE。这是真的？如果是这样，我有没有办法运送这些文件！这样做的另一个问题是跟踪 JRE 版本 - 因为不同版本的 JRE 有不同的 JCE jar。所以我可能必须为 JRE 1.4 到 1.7 捆绑 JCE jar（这是我的应用程序支持的）。

JCE 无限强度策略文件是否有替代方案？BountyCastle 也需要这些文件。我对这些文件做的唯一事情是 AES256 加密。任何替代方案都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:21:24.400

Bouncy Castle*提供程序*需要这些文件，并且仅适用于使用这些策略文件的 JRE（但由于那是 Oracle，我猜你被卡住了）。

在绝望的时候，您可能希望使用 Bouncy Castle 轻量级 API（以 开头的类`org.bouncycastle`）进行加密。缺点当然是它需要重写，API 不是很好。轻量级 API 也不能用于插入到更高级别协议的实现中，例如 JSSE (SSL) 和 CMS。

或者，最后，您当然可以保持在受限规则的范围内。AES-128 是非常强大的东西（实际上，您可能想知道在实际用途中部署 AES-128 而不是 AES-258 有什么区别）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:01:46.387

需要这些文件才能在您的程序中进行高于某些国家/地区的进口法律允许的加密。

jre 默认不带无限制政策，但根据国家政策单独下载。

> 这样做的另一个问题是跟踪 JRE 版本 - 因为不同版本的 JRE 有不同的 JCE jar。所以我可能必须为 JRE 1.4 到 1.7 捆绑 JCE jar（这是我的应用程序支持的）。

你不需要这样做。在他的机器上安装 jre 的用户也将安装相应的文件，并且您使用 JCA/JCE 或 JSSE 的代码不应该受到影响。

现在我不知道您的应用程序携带 jre的*许可问题是什么，这些 jre 预先配置了您在目标系统中运行所需的一切，以及它是否是一个有效的替代方案*

# scala - Scala 模式匹配默认守卫

> ID：12007234
> 
> 赞同：5
> 
> 时间：2012-08-17T13:56:32.037
> 
> 标签：scala, pattern-matching

我想做很多案例陈述，每个陈述前面都有相同的警卫。我可以用不需要重复代码的方式来做吗？

```
"something" match {
   case "a" if(variable) => println("a")
   case "b" if(variable) => println("b")
   // ...
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T14:05:08.087

您可以创建一个提取器：

```
class If {
  def unapply(s: Any) = if (variable) Some(s) else None
}
object If extends If
"something" match {
  case If("a") => println("a")
  case If("b") => println("b")
  // ...
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-17T14:33:45.810

似乎 OR（管道）运算符的优先级高于守卫，因此以下工作：

```
def test(s: String, v: Boolean) = s match {
   case "a" | "b" if v => true
   case _ => false
}

assert(!test("a", false))
assert( test("a", true ))
assert(!test("b", false))
assert( test("b", true )) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-17T14:40:55.963

0__ 的回答很好。或者，您可以先匹配“变量”：

```
variable match {
  case true => s match {
    case "a" | "b" | "c" => true
    case _ => false
  }
  case _ => false
} 
```

# ant - ANT 脚本移动指定文件

> ID：12007236
> 
> 赞同：1
> 
> 时间：2012-08-17T13:56:34.590
> 
> 标签：ant, salesforce

我正在尝试编写一个简单的 ANT 脚本，将文件/文件夹复制到指定目录。例如通过运行：

```
ant deploy src/classes/myClass.class 
```

文件“myClass.class”从“src/classes/”复制到“deploy/src/classes/”。此外，这应该适用于指定的文件夹，以便运行：

```
ant deploy src/classes/ 
```

应该将所有文件从 src/classes 复制到“deploy/src/classes”。此外，在脚本运行之前目标文件夹将不存在，因此需要先“触摸”...

从环顾四周复制文件并不是一个真正的问题，但我无法弄清楚如何让它与参数一起工作（如上所述）......

有谁知道如何激活它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:46:00.240

Ant 不是计算机语言。它是一种矩阵依赖语言。

区别是微妙的：编程语言要灵活得多，但你必须告诉它要采取的每一步。矩阵依赖语言计算出执行顺序。

这可能是一个微妙但重要的区别。在标准 Ant 中，缺少基本的控制结构，如 while 循环、for 循环和 if/then 语句。

听起来你想要做的事情使用标准的计算机语言会容易得多。也许是 Python、Perl，甚至是一个 shell 脚本。

在命令行中键入“ant -help”，您会发现没有像使用常规编程语言那样将参数传递给 Ant 的真正方法。相反，您可以在 Ant 可以使用的命令行上设置*属性：*

```
$ant -Ddeploy.classfile=src/classes/myClass.class deploy 
```

-D 允许您在调用*部署*任务时设置属性。然后，您可以使用*deploy.classfile*属性在 Ant 中使用它*你的任务*目标。我粗略估计，即使是这样一个简单的*build.xml*文件也需要大约 20 到 30 行。尤其如此，您将为其提供一个类文件或目录，并且您必须以不同的方式处理它们，这需要第二个目标。不仅如此，而且很难理解工作流程。**

 **这是一个想法，为什么不首先在任务中使用`destdir`目标在目录中`<javac>`创建所需的`*.class`文件`deploy`。Ant 的主要实践之一是将您构建的文件与存储库中的文件分开。它使清理工作变得容易得多。另外，该`<javac>`任务知道不要为未更改的源文件重建类文件。

```
<target name="compile"
    description="Compile your source files">

    <property name="main.destdir" value="${basedir}/deploy/classes"/>
    <property name="main.srcdir" value="${basedir}/src"/>

    <path id="main.classpath">
        <fileset dir="${basedir}/lib/>
    </path>

    <javac srcdir="${main.srcdir}"
        destdir="${main.destdir}"
        classpathref="main.classpath"/>
</target> 
```

现在，您不必将文件从源目录复制到部署目录。更好的是，`<javac>`不会重新编译未更改的源文件。让 Ant 完成它所设计的工作，而对于其他一切，请使用良好的脚本语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T16:59:48.023

如果您在更改输入命令行字符串时没有问题，那么这里应该可以工作。

```
<?xml version="1.0" encoding="UTF-8" ?>
<project name="Deploy" default="copy">

    <!--
        This script is called in the following manner:

        ant deploy -Dsource.dir=src/classes     (to copy the entire directory)
        ant deploy -Dsource.dir=src/classes -Dsource.module=myClass.class
                                                (to copy one class)

    -->

    <!-- <property name="source.dir" value="src/com/ggl/unzip" />  -->
    <!-- <property name="source.module" value="myClass.class" />  -->

    <target name="copy">
        <condition property="source.module.text" value="all files">
            <not>
                <isset property="source.module" />
            </not>
        </condition>

        <condition property="source.module" value="**.*">
            <not>
                <isset property="source.module" />
            </not>
        </condition>

        <property name="source.module.text" value="${source.module}" />

        <echo>Copying ${source.module.text} from ${source.dir} to deploy/${source.dir}</echo>

        <copy todir="deploy/${source.dir}" overwrite="true" verbose="true">
            <fileset dir="${source.dir}">
                <include name="${source.module}" />
            </fileset>
        </copy>
    </target>

</project> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:33:29.303

要从控制台向 ant 提供值，您需要使用 ant-properties，您可以使用`-D`前缀传递它们，因此您必须将构建调用为：ant -Ddst=deploy -Dsrc=src/classes/（我也建议切换 src 和dst 位置 - 如在`cp`命令中）在 build.xml 中，您可以使用`${dst}`和访问此属性`${src}`。

我不适合你，那么你需要为 ant 创建新的 ant 入口点类并调用

```
ant -main <YourClass> arg2 arg3 
```

示例在[这里](http://ant.apache.org/manual/running.html)（第一个示例）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T14:12:46.517

为什么不在 shell 脚本中使用老式的好方法`cp`而不是 ant 脚本呢？`cp -r`将允许您递归复制目录...**

# c# - Windows Phone - 按钮标签绑定 - MSDN 是什么意思？

> ID：12007238
> 
> 赞同：0
> 
> 时间：2012-08-17T13:56:46.593
> 
> 标签：c#, xaml, binding, windows-phone

在这样的 XAML 中：

```
 <Button Tag="{Bindin Explain}"/> 
```

在视图模型中：

```
private string explain = "";
public string Explain
{
    get { return explain; }
    set
    {
        if (explain != value)
        {
            explain = value;
            NotifyPropertyChanged("Explain");
        }
    }
} 
```

但它不起作用，所以我从 MSDN 检查它：http: [//msdn.microsoft.com/en-us/library/system.windows.frameworkelement.tag%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.tag%28v=vs.95%29.aspx)

因为该值是字符串类型，所以不能被 Tag 属性绑定。

解释是什么？

> XAML 值
> 
> *   object* — Silverlight 对象或支持对象元素语法的自定义对象（支持类型必须是非抽象的，并且必须支持公共默认构造函数）。
> *   string — 字符串值（可以是真正的字符串，也可以是支持从字符串进行类型转换的对象类型的输入）。
> 
> 属性值
> 类型：System.Object — 预期值。此属性没有默认值。
> 
> 备注：
> 依赖属性标识符字段：TagProperty
> 
> 此属性类似于其他编程模型中的 Tag 属性。Tag 旨在提供一个预先存在的属性位置，您可以在其中存储有关任何 FrameworkElement 的一些基本自定义信息，而无需您从 FrameworkElement 或中间类派生。
> 
> 由于此属性采用对象，因此需要使用属性元素将 XAML 中的 Tag 属性设置为具有类型转换器的对象以外的任何内容，例如字符串。以这种方式使用的对象通常不在标准 Silverlight XAML 命名空间内，因此可能需要映射外部命名空间才能作为 XAML 对象元素引入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:11:22.983

您应该能够拥有比控件要求更具体的视图模型属性类型。并且“对象标签”尽可能不具体，所以它应该接受任何东西。

我敢打赌，这是因为 Dimitriy 所说的错字。如果没有，请尝试将 Mode=OneWay 添加到绑定中。我不记得默认情况下 silverlight 有两种或一种方式，但有时它也可以有所作为，因为双向绑定有更严格的要求。

* * *

编辑：MSDN 说：

> 由于此属性采用对象，因此需要使用属性元素将 XAML 中的 Tag 属性设置为具有类型转换器的对象以外的任何内容，例如字符串。

这个片段有一个非常奇怪的语法（至少对我来说，我不是英语母语）。理解其含义的关键在于：“属性元素用法”。让我标记句子的各个部分：

> 因为此属性需要一个对象 // ，所以在 XAML 中， // 需要使用属性元素 // 将 Tag 属性设置为 // 除了具有类型转换器的 // 对象之外的任何东西 // ，例如字符串。

它们的关键词是“XAML”和“属性元素”。你看，在 XAML 中有两个语法结构来设置属性。首先是“XML 属性”：

```
<TextBlock Text="my mom has a cat" Foreground="Violet" /> 
```

第二个是“XML 子元素”：

```
<TextBlock>
    <TextBlock.Text>
        my mom has a cat
    </TextBlock.Text>
    <TextBlock.Foreground>
        Violet
    </TextBlock.Foreground>
</TextBlock> 
```

通常，第一个简称为按属性或按属性，第二个称为按属性或元素。请注意，即使属性或子元素仅包含文本（字符串！），XAML 解析器也足够聪明，知道如何转换值。该`Text`属性是字符串类型，所以它会直接给出一个文本，而它`Foreground`是一个画笔。曾经尝试在代码中设置前景或背景或填充颜色？你不能直接这样做。而不是`Colors.Violet`您必须创建 ie a`new SolidColorBrush(Colors.Violet)`并将其分配给属性。那么如何分配**文本**“紫罗兰色”？:) 在 XAML 中，解析器只是默默地使用适当的转换器 a `Brush converter`，它将字符串转换为适当的 Brush。

有了`Tag`财产，有一件不好玩的事情。它是一个`object`. XAML 解析器如何知道您想要拥有的确切类型的对象？你写“125599”。好的。是 Int32 吗？还是字符串？还是十六进制RGB颜色？

这就是 MSDN 试图警告您的原因 - 由于语法模糊而失败。XAML 会将所有设置`Tag`为字符串的文本值处理。如果你想让它写一个整数或颜色，你必须准确地说出你想运行什么转换：

```
xmlns:sys="clr-namespace:System"
....
<!-- those two are strings -->
<TextBlock Tag="1255599" />
<TextBlock>
    <TextBlock.Tag>
        115599
    </TextBlock.Tag>
</TextBlock>
....
<!-- those will be read as Int32 -->
<TextBlock Tag="{sys:Int32 1255599}" />
<TextBlock>
    <TextBlock.Tag>
        <sys:Int32>115599</sys:Int32>
    </TextBlock.Tag>
</TextBlock> 
```

在后两者中，我命令 XAML 解析器从 System 命名空间创建 Int32 类型的对象。因此，文本将被解析为整数。

现在，看看这些例子：

```
<!-- I can put any object, right? -->
<TextBlock>
    <TextBlock.Tag>
        <TextBlock Foreground="Green">
           haha
        </TextBlock>
    </TextBlock.Tag>
</TextBlock>

<!-- I can put any object, right? -->
<TextBlock>
    <TextBlock.Tag>
        <MyClass>
              what happens to this text?
        </MyClass>
    </TextBlock.Tag>
</TextBlock> 
```

诡异的？但是，嘿，Tag 可以带任何对象。在第一个中，我命令 XAML 解析器创建一个文本块，设置文本和颜色，并将这样的对象作为标记值 - 一切都很清楚。但是看第二个。这里会发生什么？内部文本如何转换为“MyClass”？

问题是，没人知道。嗯，差不多。如果 MyClass 是 Int32，则启动字符串到整数转换器，因为 Int32 在 .Net 框架内的某处注册了 TYPE CONVERTER。如果 MyClass 是 TextBlock - 内部文本设置为 TextProperty，因为 TextBlock在 .Net 框架的某处注册了一个默认属性。还有一个MyClass？我们不知道，编译器会抱怨，除非它在自己的源代码中某处注册了类似的东西。

请看最后四个例子。请注意我如何通过内联和“详细”语法分配 Int32。这是因为 Int32 具有关联的类型转换器，因此 Int32 告诉框架如何将字符串转换为 Int32。请参阅 TextBlocks 和 MyCLass 我做不到！我无法将 Tag 属性设置为“List”或“Grid”或“MyClass”类的对象，因为它们没有关联的类型转换器。该框架会看到一个表达式 Tag="{abc:MyClass mom has a cat}" 但它不知道如何将“mom has a cat”转换为“MyClass”。

我希望现在：

> 因为此属性需要一个对象 // ，所以在 XAML 中， // 需要使用属性元素 // 将 Tag 属性设置为 // 除了具有类型转换器的 // 对象之外的任何东西 // ，例如字符串。

更清楚一点：在 XAML 中，如果要分配没有关联类型转换器的对象，则必须使用宽属性分配语法并明确指定对象构造。但是，如果一个对象**有一个类型转换器**，一个字符串就是这样的对象，那么你可以通过简单的属性语法来分配它。

免责声明：请注意，我没有运行上述任何代码。可能存在小错误，类可能选择不当并且可能无法正常工作，但一般机制是可以的。如果不是，请给我留言。

# php - EasyPHP 和 Windows 8

> ID：12007240
> 
> 赞同：4
> 
> 时间：2012-08-17T13:56:51.413
> 
> 标签：php, easyphp

在安装 Windows 8 时需要一些帮助。

我能够在 Windows 8 Consumer Preview 上安装 EasyPHP，但是当我尝试访问“http://127.0.0.1/”来访问我的本地网页时，我得到了一个

> Internet Explorer无法显示该网页

错误，它在任何其他浏览器中都不起作用。

# ms-access - Access 报告中的部分文本框格式

> ID：12007251
> 
> 赞同：0
> 
> 时间：2012-08-17T13:57:16.033
> 
> 标签：ms-access, textbox, formatting, report

我有一份报告，它从数据库中提取信息来填写各种“传奇”；我想知道是否有办法部分格式化文本框中的信息？就像是

```
=Formatting([Title], "green 10pt") & ": " & Formatting([Description], "blue 7pt") 
```

显然这不起作用，但我想知道Access中是否有类似的功能用于报告。我知道我可以为“描述”放置第二个文本框并更改其格式，但有几个原因我不能这样做。

如果有一个简单的方法，很好，如果没有，那也很好；我只是找不到任何文件说“不，不可能”或“是的，可能”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-30T21:37:06.813

我自己只是在学习如何做到这一点，但我玩过一些代码。在报表设计中，将控件的“文本格式”更改为“富文本”。然后你可以输入你的字符串。例如：'="***狐狸***从猎人身边跑掉了。" “狐狸”一词将是粗体、斜体和下划线。我正在查看其他代码，并且玩过一些代码，但这会让你开始。单词之前是变化的开始……，单词之后是变化的结束。这是 MS Access 的语法。

在上面，它显示了结果。语法`<b><i><u>fox</b></i></u>`

# ios - iOS 内部应用程序 - SSL 证书的分发

> ID：12007252
> 
> 赞同：1
> 
> 时间：2012-08-17T13:57:19.137
> 
> 标签：ios, ssl, certificate, distribution, mdm

在过去几个月里，我一直在研究我们正在开发的一个 iOS 应用程序，我发现这个网站非常宝贵。这是我无法找到答案的第一个问题，因此如果存在，我深表歉意。

似乎我们分发应用程序的最佳选择是通过 MDM。但是，该应用程序使用 SSL 证书（目前使用私钥作为身份验证过程的一部分，但在不久的将来它还将使用公钥来识别服务器）。我正在寻找一种将这些设备安装到设备上的好方法。

当前的方法是设置 HTTPS 服务器并从应用程序中下载它们。不过，如果可能的话，我宁愿通过 MDM 将它们推出。不幸的是，我能找到的唯一方法是创建一个包含证书的自定义 .ipa 文件；我想这是可能的，因为它只是少数知名用户，但这并不理想。你能推荐一个更好的方法吗？

我也在考虑将证书移动到钥匙串，这样我们就可以防止它被备份到 iTunes（根据当前的政策，这可能会发生未加密的情况，尽管我也希望改变这一点）。有什么想法吗？

最好的，兰斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:34:17.603

MDM 能够推出定制的配置文件。您可以将证书嵌入配置文件中，然后使用 MDM 将其推出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:11:48.067

如果您更喜欢通过 MDM 分发证书，那么您将需要创建一个包含该证书的应用程序版本。虽然您可以通过 MDM 自行推送证书，但该证书最终会出现在钥匙串中 Apple 的名称空间中，因此对您没有好处。

# symfony - Symfony2如何使用FormBuilder删除字段的标签

> ID：12007253
> 
> 赞同：2
> 
> 时间：2012-08-17T13:57:21.477
> 
> 标签：symfony

```
$builder->add('body','text',array('label' => FALSE)//default label is displayed
$builder->add('body','text',array('label' => '')//default label is displayed
$builder->add('body','text',array('label' => 0)//default label is displayed
$builder->add('body','text',array('label' => ' ')//empty label is displayed 
```

但我不需要渲染`label`标签。我`form_widget(form)`在视图中使用 a ，但不能使用 a`form_row(form.field1) ... form_row(form.field25)`来显示表单。我只想使用 FormBuilder 删除标签。这是可能的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T14:11:56.737

您可以使用自己的 twig-file 为您的字段扩展默认表单布局，如下所示：

```
<!-- import default layout from symfony -->  
{% use 'form_div_layout.html.twig' with field_label as base_field_label %}

<!-- overwrite the element you want to change (in this case default input-field -->
{% block field_row %}
    {% spaceless %}
        <div class="row">
            <!-- removing this line, you're nearly done -->
            {{ form_label(form) }}
            {{ form_widget(form) }}
        </div>
    {% endspaceless %}
{% endblock field_row %} 
```

然后在呈现表单的 twig 文件中设置这个新的表单主题：

```
{% form_theme form 'VendorNameBundle:Folder:backend_fields.html.twig' %} 
```

差不多就是这样。

如果您想知道所有默认值是什么，请查看存储库中的这个文件：[form_div_layout.html.twig](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-24T19:59:06.013

我刚刚用 sf2.4.6测试了这个**工作解决方案：**

```
$builder->add('body','text',array('label' => false); 
```

这个解决方案比

```
label => ' ' 
```

这只是渲染一个空间。此外，您无需将渲染拆分为 form_widget 和 form_label 以最终删除 form_label。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-22T19:07:39.170

更好的解决方案是：

[..Type.php]

```
$builder
            ->add('email', EmailType::class ) //will display default label
            ->add('username', TextType::class,
                array(
                    'label' => false,
                    'attr' => array(
//                      'class' => 'myclassfrom.css', //<- this one is realy avesome
                        'placeholder' => 'UsernameExample',
                        'autofocus' => '',

                    ),
            )) 
```

你所需要的只是把你的相关树枝

```
 {{ form_start(form) }}
                        {{ form_row(form.username) }}
 {{ form_end(form) }} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-27T20:50:23.277

我的表单中有一组集合字段（集合内的集合）。我对带有集合字段的条目标签有疑问。对于集合的每个条目，标签会自动生成为 [0]、[1]、... [N]。我唯一需要做的就是在模板中添加空白标签块：

```
{% form_theme form _self %}

{% block _myformname_person_entry_label %}
{% endblock _myformname_person_entry_label %}

{% block _myformname_person_entry_adress_entry_label %}
{% endblock _myformname_person_entry_adress_entry_label %} 
```

这不会覆盖模板或构建器类中 {% block _myformname_person_row %}、{% block _myformname_person_widget %} 或 {% block _myformname_person %} 块中指定的任何标签：

```
$builder->add('person', 'collection', array(
'type' => new PersonType(),
'label' => 'List of Employees:') 
```

在 Symfony 2.3 版上测试

# spring - spring - 一个上下文使用另一个上下文

> ID：12007258
> 
> 赞同：2
> 
> 时间：2012-08-17T13:57:46.233
> 
> 标签：spring, dependencies, applicationcontext

如何从另一个模块的弹簧上下文中**导入**一个弹簧上下文？

```
module2 --uses--> module1 
```

我有 module1 和 module2（在我的 maven 模型中），它们都是 spring 应用程序。这两个项目都位于同一个父目录中。

在 module1 我有 'module1/Bean1' 类（这是一个弹簧豆）

moodule2 应该使用 module1。因此，在 module2/src/main/resources/context2.xml 中，我尝试将“引用”放在 context1 中，如下所示：

上下文2.xml：

```
 <import resource="classpath*:module1/resources/context1.xml" /> 
```

所以，我期待在module2中使用这个代码：

```
ClassPathXmlApplicationContext appContext = new ClassPathXmlApplicationContext(
                        new String[] {"context2.xml"});
Bean1 bean1 = (Bean1) appContext.getBean("bean1"); // It uses bean defined in the module1 
```

但现在我有一个例外： **没有定义名为 'bean1' 的 bean**

-- context1.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-2.5.xsd">

    <context:annotation-config />
    <context:component-scan base-package="module1"/>    <!-- for @Component, @Service, @Repository being scanned in particular folder --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:20:35.360

如果您 context1.xml 在 /module1/src/main/resources/ 下，而不是

```
<import resource="classpath*:module1/resources/context1.xml" /> 
```

你应该使用

```
<import resource="classpath*:context1.xml" /> 
```

# asp.net - Global.asax URL 重写

> ID：12007259
> 
> 赞同：0
> 
> 时间：2012-08-17T13:57:46.530
> 
> 标签：asp.net, global-asax

以下在我的本地主机上工作正常，但在服务器上不行。我不断收到找不到页面的错误。有任何想法吗？我在 web.config 中也有一个自定义的 mime 类型设置，但这无关紧要。

```
'--------------------------------------------------------
'Sub Application_BeginRequest()
'--------------------------------------------------------
'.
'.
'.
Sub Application_BeginRequest(ByVal sender As Object, ByVal e As EventArgs)

    '----------------------------------------------------
    'Redirect
    '----------------------------------------------------
    '.
    '.
    '.
    If Request.RawUrl.Contains(".page") Then

        Context.RewritePath("/Default.aspx") ' TEST

    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:06:15.310

代替 ”/”

```
 Context.RewritePath("Default.aspx") ' TEST 
```

# zend-framework2 - 在哪里可以找到 module.config.php 的所有选项？

> ID：12007261
> 
> 赞同：5
> 
> 时间：2012-08-17T13:57:51.977
> 
> 标签：zend-framework2

我尝试了最新的 ZF2 可能性，但是很难找到可以在 module.config.php 中定义的所有选项

一个例子：哪些选项有 view_manager：我可以打开 Zend/Mvc/View/Http/ViewManager.php 和 grep 查找所有 $this->config[*] 以找到它们，但我确信有更多选项视图管理器。

任何指针将不胜感激。

TIA

**编辑：**见[http://akrabat.com/zend-framework-2/zendservicemanager-configuration-keys/](http://akrabat.com/zend-framework-2/zendservicemanager-configuration-keys/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:23:10.040

您不会找到关于 module.config.php**所有**可能选项的概述，因为您基本上可以覆盖模块配置中每个可能模块的每个可能配置。

如果您正在寻找某些对象的配置，您可以查看[官方文档](http://zf2.readthedocs.org/en/latest/modules/zend.view.quick-start.html#usage)（链接是 Zend\View 的配置）或从类文件本身中检查可能性。

由于 ZF2 很快就会离开 RC 状态，因此文档将在接下来的几个月内得到极大的改进。

# yql - YQL（雅虎查询语言）是否支持 CSV 的自定义分隔符？

> ID：12007266
> 
> 赞同：0
> 
> 时间：2012-08-17T13:57:59.493
> 
> 标签：yql, delimiter, csv

我知道[YQL](http://developer.yahoo.com/yql/)可以查询`CSV`（逗号分隔值）格式的文本文件。

但通常有相同简单格式的文本文件，但使用除`,`（逗号）以外的分隔符。例如，制表符分隔的文本文件很常见。接下来最常见的似乎是管道字符`|`。就我而言，我想查询以分号分隔的文件`;`。

我相信其他处理工具`CSV`通常可以选择其他分隔符。我很确定雅虎管道有这样的选择。雅虎查询语言呢？

**有没有办法在 YQL 中使用除分隔符以外的分隔符查询分隔文本文件`,`？**

如果没有，是否有错误或功能请求来添加对自定义分隔符的支持或自己添加此类支持的方法？

（我的用例是 Unicode 联盟发布的数据，它是由 . 分隔的许多平面文件`;`。主文件是[`UnicodeData.txt`](http://unicode.org/Public/UNIDATA/UnicodeData.txt)。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:36:19.647

> 有没有办法用 YQL 查询分号分隔的文本文件？

没有任何现有的数据表。创建自己的数据表并不难，您可以使用它以任何您喜欢的方式解析文件。有很多现有的 JavaScript 代码可以解析您可以使用的分隔文件。

> 如果没有，是否有错误或功能请求添加对逗号以外的分隔符的支持？

不是我知道的；虽然这主要是因为我不知道 YQL 平台有任何面向公众的错误跟踪器或票证系统。

# c# - LazyInitializer 与 Lazy 班级。何时使用每一个

> ID：12007267
> 
> 赞同：40
> 
> 时间：2012-08-17T13:58:01.240
> 
> 标签：c#

[LazyInitializer](http://msdn.microsoft.com/en-us/library/system.threading.lazyinitializer.aspx)和[Lazy<T>](http://msdn.microsoft.com/en-us/library/dd642331.aspx)类之间有什么区别？我知道他们都只会按需初始化对象。我什么时候需要使用它们中的每一个？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-20T05:02:13.613

我不确定你是否还在研究这个，但我不得不深入研究两者的细节，`Lazy<T>`最近`LazyInitializer.EnsureInitialized<T>()`，所以我想我应该分享我的发现。

首先，一些数字。我使用这两种方法对 1000 万个值的批次运行基准测试，测试内存使用情况`GC.GetTotalMemory(true)`并获取`Stopwatch`实例化、第一个值访问和后续值访问的时间：

```
Lazy<T> Memory Use:                  320,000,000 bytes (32B/instance)
EnsureInitialized<T>() Memory Use:   N/A

Lazy<T> Instantiation Time:          622.01 ms
EnsureInitialized<T>() Inst. Time:   N/A

Lazy<T> First Access:                1,373.50 ms
EnsureInitialized<T>() First Access: 72.94 ms

Lazy<T> Subsequent Accesses:         18.51 ms
EnsureInitialized<T>() Subsequent:   13.75 ms 
```

（我使用`LazyThreadSafetyMode.PublicationOnly`了，这看起来与默认情况下`Lazy<T>'s`采用的线程安全方法相同。）`LazyInitializer`

正如你所看到的，除非我以某种方式搞砸了我的测试（永远不会出错！），在这种情况下`LazyInitializer`，几乎所有可量化的方式都是优越的。它没有内存或实例化开销，而且创建和检索值都更快。

那么，为什么要使用`Lazy<T>`? 嗯，首先，这些是我在 x64 系统上的测试结果，在其他情况下你可能会得到不同的结果。

`Lazy<T>`也可以产生更清晰、更简洁的代码。 `return myLazy.Value;`比友好得多`return LazyInitializer.EnsureInitialized(ref myValue, () => GetValue(foo));`

此外，`Lazy<T>`如果您正在处理值类型或可能合法为`null`. 使用`LazyInitializer`时，您必须使用第二个布尔字段来跟踪值是否已初始化，从而加剧了代码清晰度问题。 `Lazy<T>`如果您想要更严格的线程安全性，使用起来也更简单。

从总体上看，对于很多应用程序来说，大部分开销可能可以忽略不计（尽管并非总是如此——我开始研究这个的原因是因为我正在处理一个涉及数百万非常小的延迟加载值的应用程序，并且每个实例 32 字节的开销`Lazy<T>`实际上开始变得不方便）。

最后，除非您的应用程序非常占用内存，否则我认为这通常取决于个人喜好。对于非空引用类型，我个人认为`LazyInitializer.EnsureInitialized<T>()`是一种更优雅的方法，但我也可以挖掘代码清晰度参数。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-17T14:21:18.393

`Lazy<T>`( [MSDN](http://msdn.microsoft.com/en-us/library/dd642331.aspx) ) 是一个通用包装器，它允许通过持有工厂方法 ( ) 并在访问属性 getter时调用它`T`来按需创建实例。`T``Func<T>``Value`

`LazyInitializer`- 具有一组静态方法的静态类，这只是一个使用[Activator.CreateInstance()](http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx)（反射）能够实例化给定类型实例的助手。它不保留任何本地私有字段，也不公开任何属性，因此没有内存使用开销。

值得注意的是，这两个类都`Func<T>`用作实例工厂。

[MSDN](http://msdn.microsoft.com/en-us/library/system.threading.lazyinitializer.aspx)`LazyInitializer`关于类的几句话：

> 这些例程避免需要分配专用的延迟初始化实例，而是使用引用来确保在访问目标时已对其进行初始化。

PS：我发现了一种有趣的方法来`LazyIntiializer`检查实例是否已经初始化，它只是将传入的引用与 a 进行比较`default(T)`，很好：

```
private static T EnsureInitializedCore<T>(ref T target, Func<T> valueFactory) 
    where T : class
{
    T t = valueFactory();
    if (t == null)
    {
       throw new InvalidOperationException(Environment.GetResourceString("Lazy_StaticInit_InvalidOperation"));
    }

    Interlocked.CompareExchange<T>(ref target, t, default(T));
    return target;
} 
```

对我来说似乎很奇怪，它每次在实际检查之前都会创建一个新实例：

```
T t = valueFactory(); 
// ... and only then does check 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-03T09:32:15.670

正如其他答案所说，

`Lazy<T>`

*   通常会提供更简洁的代码：只需在您访问它的任何地方进行初始化`x = new Lazy<T>(_ => new ...)`和使用。`x.Value`

*   `Value`如果多个线程同时访问未初始化`Lazy<T>`对象的属性，则允许使用不同的预定义选项来处理初始化和异常。

`LazyInitializer`

*   节省空间，也可能节省时间：无需`Lazy<T>`为您声明的每个变量初始化一个新对象。

*   允许您延迟提供初始化参数，直到*使用时间*：`LazyInitializer.EnsureInitialized(ref x, () => new X(initParameters))`

总之，您只*需要*在`LazyInitializer`空间（可能还有时间）有限的情况下使用，或者如果您无法在声明时指定所有初始化参数。

*我个人*更喜欢`Lazy<T>`尽可能，因为我发现它提供了更清晰的代码，而且我不必自己明确地处理初始化异常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T14:20:13.897

`LazyInitializer`允许您使用延迟初始化功能，而无需为每个延迟初始化的对象创建一个类。

[以下](http://msdn.microsoft.com/en-us/library/dd997286%28v=vs.100%29.aspx#Y5814)`LazyInitializer`是可以提供的好处。

`Lazy<T>`对于这种情况，使用产生的开销是否过多，取决于您自己的要求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T14:21:28.823

Lazy Initializing 的文档解释得很清楚。请参阅[**延迟初始化**](http://msdn.microsoft.com/en-us/library/dd997286.aspx)。简而言之，为您使用的每个实例`Lazy<T>`创建一个新类（构造的泛型）`T`，并为您贴标的每个`T`实例创建该类的新实例——*即使底层`T`从未初始化*。使用 的*静态*方法`LazyIntializer`进行编码可能会更复杂，但可以避免`Lazy<T>`包装器实例的开销。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-04T08:13:54.190

我认为这回答了您的问题：LazyInitialization System.Threading.ThreadLocal 的另一种方式

**它与 Lazy 相同，但唯一的区别是它以 Thread Local 为基础存储数据。因此，每个 Thread 上的值将是 Initialized object 的不同副本**。

更多细节来自：[http ://www.cshandler.com/2011/09/different-ways-of-lazy-initialization.html](http://www.cshandler.com/2011/09/different-ways-of-lazy-initialization.html)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-17T14:12:30.467

```
`LazyInitializer`  of an object means its object creation is deferred until it is ued first. 
```

创建这种形式的对象是为了提高性能并减少内存浪费。

而要定义一个惰性初始化类型，我们使用`Lazy<T>`（通用形式）`LazyInitializer`类

```
E.g:
 Lazy<Orders> _orders = new Lazy<Orders>(); 
```

如需进一步参考：

[http://msdn.microsoft.com/en-us/library/dd997286.aspx](http://msdn.microsoft.com/en-us/library/dd997286.aspx)

# iis-7.5 - HTTP 错误 500.19 - Internal Server Error 请求的页面无法访问，因为该页面的相关配置数据无效

> ID：12007271
> 
> 赞同：4
> 
> 时间：2012-08-17T13:58:12.833
> 
> 标签：iis-7.5

我重新安装了 Windows，现在正在配置一切以使我的机器重新启动并运行。我在导航到 www.mysite.com 时收到此错误： ![在此处输入图像描述](../Images/25faae2a1ce37a8f963cd5312d392141.png)

我查看了各种论坛，并为文件夹 c:\dropbpx\inetpub\mysite 授予了 IIS_IUSRS、IUSR、Everyone 和 NETWORK SERVICE 的完全权限，但我一直收到错误消息。我还在 %WINDIR%\System32\inetsrv\config\ 中的 applicationhost.config 上授予了 IIS_IUSRS 的完全权限

此外，当我通过 IIS 访问我的网站并单击“身份验证”时，我收到错误消息：执行此操作时出错。详细信息：文件名：\?\C:\Dropbox\inetpub\mysite\web.config 错误：

我网站的应用程序池设置为 ASP.NET v4.0

在这里查看我的 web.config

```
<?xml version="1.0" encoding="UTF-8"?>

<!--
For more information on how to configure your ASP.NET application, please visit  http://go.microsoft.com/fwlink/?LinkId=169433
-->

<configuration>

<connectionStrings>
<add name="conn1" connectionString="data source=(local);Initial Catalog=tt;User Id=sa;Password=dfsdf3454sdg;" providerName="System.Data.SqlClient" />
</connectionStrings>
<system.web.extensions>
<scripting>
  <webServices>
    <jsonSerialization maxJsonLength="5000000" />
  </webServices>
</scripting>
</system.web.extensions>

<system.web>
<httpRuntime maxRequestLength="5120000" requestValidationMode="2.0" />  
<compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />

<sessionState mode="InProc" timeout="60" />
<authentication mode="Forms">
  <forms name=".MyCookie" slidingExpiration="true" timeout="60" cookieless="AutoDetect" loginUrl="/login/" protection="All" defaultUrl="/">
    <credentials passwordFormat="SHA1" />
  </forms>
</authentication>
<roleManager domain="192.168.0.103" enabled="true" cacheRolesInCookie="true" cookieName=".ASPXROLES" cookieTimeout="60" cookiePath="/" cookieRequireSSL="false" cookieSlidingExpiration="true" cookieProtection="All" defaultProvider="AccessRoleProvider" createPersistentCookie="false" maxCachedResults="25">
  <providers>
    <clear />
    <add name="AccessRoleProvider" connectionStringName="conn1" applicationName="/wedding" type="Samples.AccessProviders.AccessRoleProvider" />
  </providers>
</roleManager>
<membership defaultProvider="AccessMembershipProvider" userIsOnlineTimeWindow="30">
  <providers>
    <clear />
    <add name="AccessMembershipProvider" type="Samples.AccessProviders.AccessMembershipProvider" connectionStringName="conn1" requiresQuestionAndAnswer="false" applicationName="/wedding" minRequiredPasswordLength="6" enablePasswordRetrieval="false" enablePasswordReset="true" requiresUniqueEmail="true" minRequiredNonalphanumericCharacters="0" passwordFormat="Hashed" />
  </providers>
</membership>
</system.web>
<system.webServer>
<!-- SEO-friendly URLS for IIS 7.0 (if you're using IIS 6.0 see above) -->
<validation validateIntegratedModeConfiguration="false" />
<modules runAllManagedModulesForAllRequests="true">
  <add type="aspnetforum.ForumSEOHttpModule, aspnetforum" name="ForumSEOHttpModule" />
</modules>
<handlers>
  <add name="ScriptCombiner" verb="POST,GET" path="ScriptCombiner.axd" preCondition="integratedMode" type="ScriptCombiner, App_Code" />
</handlers>
<security>
  <requestFiltering allowDoubleEscaping="true" />
</security> 
<defaultDocument>
  <files>
    <clear />
    <add value="default.aspx" />
    <add value="Default.htm" />
    <add value="Default.asp" />
    <add value="index.htm" />
    <add value="index.html" />
    <add value="iisstart.htm" />
  </files>
</defaultDocument>
    <staticContent>
        <mimeMap fileExtension=".kml" mimeType="application/vnd.google-earth.kml+xml" />
    </staticContent>
</system.webServer>
<system.serviceModel>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
<bindings>
  <basicHttpBinding>
    <binding name="VirtueleKassaWebServiceSoap" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="Transport">
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
    <binding name="VirtueleKassaWebServiceSoap1" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="https://secure.virtuelekassa.nl/webservice/VirtueleKassaWebservice.asmx" binding="basicHttpBinding" bindingConfiguration="VirtueleKassaWebServiceSoap" contract="virtuelekassa.VirtueleKassaWebServiceSoap" name="VirtueleKassaWebServiceSoap" />
</client>
  <services>
      <service name="RestService.weddingservice">
          <endpoint behaviorConfiguration="webHttp" binding="webHttpBinding" contract="RestService.Iweddingservice" />
      </service>
  </services>

<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="webHttp">
      <webHttp />
    </behavior>
  </endpointBehaviors>
</behaviors>
</system.serviceModel>
</configuration> 
```

还能是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T20:48:49.700

永远不要遗漏您认为不相关的 web.config 部分：这是我在 web.config 中的 urlrewrite 部分！我安装了它（http://www.microsoft.com/web/gallery/install.aspx?appid=urlrewrite2），现在它可以工作了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-19T19:32:31.390

检查以下 IIS 功能是否已打开。（应用程序开发功能）

![在此处输入图像描述](../Images/42e6978dde04330350d79d1ef33c0ec8.png)

如果应用程序开发功能下的功能未打开，请从控制面板打开 Windows 功能打开它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T06:07:10.500

> 那是因为您还没有在 IIS 中注册 ASP。
> 
> 转到 C:\Windows\Microsoft.NET\Framework\v4.0.30319 并执行 aspnet_regiis.exe
> 
> 转到 IIS，展开服务器，单击应用程序池。如果它不包含“ASP.NET v4.0”和“ASP.NET v4.0 Classic”文件，则 ASP 未在 IIS 中注册。
> 
> 使用命令提示符，转到 C:\Windows\Microsoft.NET\Framework\v4.0.30319 位置。键入 aspnet_regiis -i
> 
> 现在它将显示 ASP 正在注册。完成后在IIS下Application Pool下可以看到“ASP.NET v4.0”和“ASP.NET v4.0 Classic”文件

# ruby-on-rails-3 - Rails 3 渲染动作

> ID：12007277
> 
> 赞同：1
> 
> 时间：2012-08-17T13:58:57.300
> 
> 标签：ruby-on-rails-3, renderaction

在我正在开发的 Rails 3 应用程序中，我们允许用户“激活”一个帐户（通过输入优惠券代码），然后他们输入他们的信息，瞧，他们的帐户就创建好了。

我遇到了一个小问题，我不清楚如何在不重复代码的情况下解决（这似乎并不雄辩）。

这是我当前的激活控制器：

```
class ActivationsController < ApplicationController
  respond_to :html
  skip_before_filter :set_client, :only => [:welcome]

  def new
    @user = User.new
    @gc = get_group_code(params[:group_code])

    if @gc.nil? || @gc.group.school_info.blank?
      @countries = Country.all
      @school_types = SchoolType.all
      @states = State.all
    else
      @school_information = @gc.group.school_info
    end

    @user_type = UserType.find_by_type("Classroom Teacher")
  end

  def create
      @user = User.new(params[:user].except(:custom))

      if @user.save
        @group = Group.find(params[:group_id])
        @user.groups << @group
        @user.update_mail_chimp_sponsors
        UserMailer.welcome_email(@user, current_client).deliver
        sign_in @user
        redirect_to new_activation_welcome_path
      else
        render :new
      end
  end

  def welcome
    @user = current_user
  end

  private

    def get_group_code(code = "")
      group_code = GroupCode.find_by_code(code)

      unless group_code.nil?
        group_code.validate_code(current_client.name)
        group_code
      end
    end
end 
```

我遇到的问题在第 31 行（`render :new`）。当表单出现错误并且应用程序呈现`new`方法时，新方法中的实例变量对视图不可用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:03:26.080

Render :new 正是这样做的：它呈现 :new 视图。它不会在控制器中执行新方法，因此无论您调用什么方法 render :new 都必须设置 :new 模板所需的实例变量。

如果您不想复制代码，您可以将实例变量的设置移动到控制器中的私有方法。然后你可以从新方法调用私有方法，以及你渲染的任何其他方法：new。

# .htaccess - 简单的 htaccess url 转发不起作用

> ID：12007279
> 
> 赞同：0
> 
> 时间：2012-08-17T13:59:03.457
> 
> 标签：.htaccess

我正在尝试通过我在服务器上构建的 index.php 文件转发对[http://files.domain.com的所有 PDF 请求。](http://files.domain.com)首先，我只需要一个测试。所以我把这个htaccess放在一起：

```
RewriteEngine On
RewriteBase /
RewriteRule file2.pdf index.php [R] 
```

当我访问该 URL 时，它不会显示我的 index.php，而只会显示 404 错误。我不确定发生了什么...有什么建议吗？

我已经确认我的 .htaccess 和 index.php 位于正确的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:11:43.373

原来我的虚拟主机已`AllowOverride`设置为`NONE`：[http ://httpd.apache.org/docs/2.2/mod/core.html#allowoverride](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)

# c++ - 系统功能相关问题

> ID：12007282
> 
> 赞同：1
> 
> 时间：2012-08-17T13:59:09.493
> 
> 标签：c++, signals

在下面的代码中，当系统函数被执行（在 Linux 中并用 g++ 编译）时，它会将`SIGCHLD`信号发送到进程（从中调用它），这在 Solaris 代码中不会发生。我的意思是，如果我在 Solaris 中运行相同的代码，系统函数不会向调用它的进程发送任何信号。结果，我在 Linux 中的进程挂起。

```
#include <iostream>
using namespace std;
#include <cstdlib>
#include <signal.h>

void sigHandler(int sgnNbr)
{
    cout <<"Signal " << sgnNbr << "caught" << endl;
    system("echo $HOSTNAME");
    exit(1);
}

int main()
{
    signal(SIGCHLD,sigHandler);
    system("echo $HOSTNAME");
    return 0;
} 
```

我的问题是：

1.  为什么进程在上述情况下挂起？
2.  为什么系统函数在 Solaris 中不发送任何信号？

...以及我的最后一个问题，这与我的实际应用有关：

实际上，在我的实际应用程序中（其中单个信号处理程序用于处理大约四个信号），其他一些进程向我的进程发送 SIGABRT 信号，而在信号处理程序中，我正在使用系统函数杀死一个进程，结果它被挂起（这与上述情况类似）。有什么办法可以克服这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:09:51.650

来自[http://pubs.opengroup.org/onlinepubs/009604499/functions/system.html](http://pubs.opengroup.org/onlinepubs/009604499/functions/system.html)：

> system() 函数应忽略 SIGINT 和 SIGQUIT 信号，并应阻止 SIGCHLD 信号，同时等待命令终止。

Solaris 是正确的；Linux 不正确。

`system`程序挂起的最可能原因是在信号处理程序中调用是不安全的。有关异步信号安全功能的列表，请参见[http://pubs.opengroup.org/onlinepubs/009604499/functions/xsh_chap02_04.html#tag_02_04](http://pubs.opengroup.org/onlinepubs/009604499/functions/xsh_chap02_04.html#tag_02_04)。

要杀死另一个进程，您可以使用[`kill`](http://pubs.opengroup.org/onlinepubs/009604499/functions/kill.html)异步信号安全的 。

# postgresql - Postgresql SELECT 随机具有唯一值

> ID：12007297
> 
> 赞同：2
> 
> 时间：2012-08-17T14:00:26.483
> 
> 标签：postgresql, select, unique

我无法做出一个干净的选择

我有带有字段 id、providerid、deal_name 的 postgresql 表

我想使用唯一的 providerid 进行随机选择

```
SELECT * FROM deals ORDER BY random() LIMIT 10 
```

我如何设置它以返回 10 个具有唯一 providerid 的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:01:33.187

你的问题可以改写为：

“对于十个随机选择的供应商中的每一个，找到该供应商提供的一个随机选择的交易”？

如果是这样，那几乎可以告诉您该怎么做。您需要两层，一次通过随机选择十个供应商，然后通过一次通过每个供应商选择一个随机交易。

给定虚拟数据：

```
create table spam ( deal text, provider text );

insert into spam(deal,provider) 
SELECT prov_id||n::text, prov_id FROM (
    SELECT chr(x) AS prov_id from  generate_series(97, 92+26) x) y 
CROSS JOIN generate_series(1,10) n;

select provider FROM spam GROUP BY provider ORDER BY random() LIMIT 10; 
```

这是一个有效的方法：

```
SELECT
 (SELECT deal FROM spam WHERE spam.provider = sel_prov.provider ORDER BY random() LIMIT 1),
 sel_prov.provider
FROM (select provider FROM spam GROUP BY provider ORDER BY random() LIMIT 10) sel_prov; 
```

...几乎只需将上面的语句实现为 SQL。不知道快不快；你明白了。

如果上述改写不正确，请通过示例数据和示例或描述中的更多细节来澄清您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T20:00:41.047

如果@Craig Ringer 提出的改写是正确的：

> 对于十个随机选择的提供商中的每一个，找到该提供商提供的一个随机选择的交易

那么我可以建议另一种解决方案：

```
SELECT d.id, d.providerid, d.deal_name FROM (SELECT DISTINCT ON (providerid) providerid , id, deal_name FROM deals) d ORDER BY random() LIMIT 10; 
```

我希望它会有所帮助！

# android - ActionBarSherlock：如何绕过 4.x 设备的 Holo 主题？

> ID：12007298
> 
> 赞同：1
> 
> 时间：2012-08-17T14:00:26.573
> 
> 标签：android, android-layout, actionbarsherlock, android-theme

我试图绕过 4.x 设备的 Holo 主题（这样应用程序在 2.x 到 4.x 的所有版本上看起来都一样）。我已经尝试通过将 values-14/ 文件夹中的 theme.xml 更改为 values/ 中的那些，但操作栏消失了。有没有人设法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:17:10.183

自引入 Holo 以来，其他主题[不需要](http://android-developers.blogspot.de/2012/01/holo-everywhere.html)在设备上可用。这意味着：您将来会遇到只有 Holo 的设备。

如果您只想让您的应用在任何地方看起来都一样，您可以使用[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)，它将 Holo 主题移植到旧设备。

HoloEverywhere 与 ActionBarSherlock 配合得很好。

# objective-c - 如何在 GCDAsyncsocket 中设置 tcp_nodelay？

> ID：12007299
> 
> 赞同：4
> 
> 时间：2012-08-17T14:00:27.260
> 
> 标签：objective-c, ios, tcp, gcdasyncsocket

似乎标题是自我描述的。我想提高在我的应用程序中发送和接收数据的速度，我被告知将 tcp_nodelay 设置为 true。但我不知道如何使用 GCDAsyncSocket 做到这一点。谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:56:47.597

我没有使用*过 GCDAsyncSocket*，但是“GCDAsyncSocket.h”表明您可以使用该方法获取底层套接字描述符，该`socketFD`方法必须仅在调用中`performBlock:`调用。所以下面的代码可能会起作用：

```
[asyncSocket performBlock:^{
    int fd = [asyncSocket socketFD];
    int on = 1;
    if (setsockopt(fd, IPPROTO_TCP, TCP_NODELAY, (char*)&on, sizeof(on)) == -1) {
        /* handle error */
    }
}]; 
```

您可能需要添加

```
#include <netinet/tcp.h>
#include <netinet/in.h> 
```

到你的源文件来编译它。正如我所说，我还没有尝试过，但也许它有助于为您指明正确的方向。

# android - 检查软键盘是否关闭

> ID：12007301
> 
> 赞同：1
> 
> 时间：2012-08-17T14:00:30.787
> 
> 标签：android, opengl-es, input, android-softkeyboard, glsurfaceview

我有一个 GLSurfaceView 来渲染我的 GUI。在一种情况下，我需要用户输入一个数字，为​​了实现这一点，我使用了一个 FrameLayout，我的 GLSurfaceView 在顶部，另一个虚拟布局，后面有一个 EditText。当需要输入时，我聚焦 EditText 并强制显示软键盘。然后我听各种方法来结束输入，输入键，IME_ACTION_DONE，后退键等。

但是，我刚刚意识到这不起作用的一种情况。在某些键盘上，有一个“隐藏键盘”按钮根本不发送键码（有些会从该键发送回键码）。键盘刚刚关闭，我无法确定输入是否完成。并且 EditText 仍然是重点。

有什么方法可以捕捉到这个事件，或者有什么其他方法可以查看用户是否关闭了键盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:37:26.327

有时您必须跳出框框思考。在某些情况下，我找不到任何方法来查看用户是否隐藏了键盘。也许没有办法。所以我开始考虑这将如何在带有输入字段等的“正常”xml布局中工作。因为那时我从未想过这是一个问题。答案很简单。这些表格总是有一个“完成”、“保存”、“更新”或类似的按钮。

所以.. 我刚刚添加了一个按钮作为用户告诉我的应用他们完成输入的额外选项。:)

# c# - 构造函数/析构函数链接错误

> ID：12007304
> 
> 赞同：5
> 
> 时间：2012-08-17T14:00:36.530
> 
> 标签：c#, c++, windows, visual-studio, clr

我有一个项目（创建一个 dll），比如 test.dll，我没有在 dll 中导出类的构造函数和析构函数，比如 TestClass。这是因为我有一些工厂函数应该被调用来创建和销毁 TestClass 的对象。这种设计在我尝试使用来自 test.dll 的 TestClass 对象的地方创建的独立示例中运行良好。

但是，当我将此 test.dll（或在我的情况下为 .lib，因为我使用 Visual Studio）链接到我们的生产模块中的项目时，我得到了指向构造函数和析构函数的奇怪链接错误，它无法为 TestClass 找到它。我知道我不会在项目的任何地方调用 new/delete 或创建 TestClass 的任何堆栈实例。生产模块使用 C#/CLR/CLI 以及我认为的 C++。解决问题的唯一方法是为我导出 TestClass 的构造函数和析构函数。这是设计所不希望的。

这种情况有人熟悉吗？有人可以指出可能是什么问题吗？

这是我得到的错误：

```
Error   5264    error LNK2028: unresolved token (0A000BA3) "public: virtual __thiscall BE::TestClass::~TestClass(void)" (??1TestClass@BE@@$$FUAE@XZ) referenced in function "public: virtual void * __thiscall BE::TestClass::`vector deleting destructor'(unsigned int)" (??_ETestClass@BE@@$$FUAEPAXI@Z)  AMBestDetailBridge.obj  BEBase

Error   5373    error LNK2001: unresolved external symbol "public: virtual __thiscall BE::TestClass::~TestClass(void)" (??1TestClass@BE@@$$FUAE@XZ) AMBestDetailBridge.obj  BEBase 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:30:26.167

链接错误表明您正在通过 delete [] 调用析构函数，因此很可能在您的生产模块中，您有某些代码：

```
TestClass* pTest = ...
delete pTest;
TestClass* pTestArray = ...
delete[] pTest; 
```

当然，在智能指针的情况下，它可能不是那么明显：

```
SmartPtr<TestClass> spTest = ...
// delete called automatically when out of scope. 
```

在一个模块中分配并在另一个模块中删除将使您面临潜在风险 - 因为这两个模块可能使用不同的堆进行内存分配（比如您重新定义了新的运算符），幸运的是这个问题在链接时而不是运行时暴露出来。

# .htaccess - .htaccess / ModRewrite 问题

> ID：12007307
> 
> 赞同：1
> 
> 时间：2012-08-17T14:00:44.717
> 
> 标签：.htaccess

我一直在尝试将 .htaccess 重写用于我正在编写的链接缩短服务。

我正在尝试实现以下目标：

**URL:** [http://domain.com/keyhere](http://domain.com/keyhere) : 重定向到[http://domain.com/link.php?key=keyhere](http://domain.com/link.php?key=keyhere)

**URL：** [http](http://domain.com/keyhere+) ://domain.com/keyhere+ ：重定向到[http://domain.com/analytics.php?key=keyhere](http://domain.com/analytics.php?key=keyhere)

我已经实现了第一个，但无法使用尾随 + 重定向它

我的代码是：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !#
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ link.php?key=$1 [L] 
```

如果有人可以根据所需的重写规则为我指明正确的方向，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:05:24.503

该组`(.*)`是贪婪的，因此您需要第二条与`+`

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
# Also added non-existing directory condition
RewriteCond %{REQUEST_FILENAME} !-d
# What's this for??
#RewriteCond %{REQUEST_URI} !#

# Match everything up to + ,followed by + first...
RewriteRule ^([^+]*)\+$ analytics.php?key=$1 [L]

# Next rule matches everything when there is no +
RewriteRule ^([^+]*)$ link.php?key=$1 [L] 
```

该模式`[^+]*`意味着匹配零个或多个 ( `*`) 字符，但不包括 a `+`。当后面跟着`$`(字符串的结尾) 时，暗示字符串不包含`+`。

为了测试`+`字符串末尾是否存在 ，然后我们包括`\+$`. `+`必须转义，因为它是正则表达式中的特殊字符，但我们希望它的字面意义存在。因此`^([^+]*)\+$`意味着*捕获所有字符（`+` 直到`+`字符串末尾的*.

# java - 如何使用 JFileChooser 将 CSV 文件数据输入 JTable

> ID：12007308
> 
> 赞同：2
> 
> 时间：2012-08-17T14:00:47.297
> 
> 标签：java, swing, jtable, jfilechooser, opencsv

我目前正在尝试让我的程序将数据从用户定义的 CSV 文件输入到 JTable 中。但是，由于某种原因，它不能正常工作，每当我尝试加载或保存文件时，Netbeans 都会向调试器抛出一些异常。

```
private void openActionPerformed(java.awt.event.ActionEvent evt)
{                                     
    int returnVal = fileChooser.showOpenDialog(this);
    if (returnVal == JFileChooser.APPROVE_OPTION) {
        File file = fileChooser.getSelectedFile();
        try {
            // What to do with the file, e.g. display it in a TextArea
            CSVReader reader = new CSVReader(new FileReader( file.getAbsolutePath()));
            List myEntries = reader.readAll();
            table (myEntries.toArray());
        } catch (IOException ex) {
            System.out.println("problem accessing file"+file.getAbsolutePath());
        }
    } else {
        System.out.println("File access cancelled by user.");
    }
} 
```

这是我针对特定问题的代码。

我怎样才能使它正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:11:50.283

只有建议

1.  您可以将[Vector 或 Object[]](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#JTable%28%29)直接放入[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

2.  因为`java.util.List`你必须实现自定义[AbstractTableModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)，因为`JTable`它`XxxTableModel`是基于过早的`Vector or Object[]`

3.  `XxxTableModel`必须在[EventDispatchThread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)上完成所有更新

4.  为了获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)，其中的内容`CSV File`应该直接硬编码`java.util.List`到

5.  （视图）的所有数据`JTable`都存储到`XxxTableModel`（模型）中

# java - 我在哪里可以找到 com.ibm.ws.logging.object.hpel.WsLogRecord

> ID：12007312
> 
> 赞同：2
> 
> 时间：2012-08-17T14:00:57.183
> 
> 标签：java, websphere

今天我的一个实习生来找我，问他在哪里可以找到以下课程

```
com.ibm.ws.logging.object.hpel.WsLogRecord 
```

通常像 findjar.com 这样的东西会找到它，但在这种情况下它不能。我最终使用 Jar Explorer 在以下位置的 WAS 8 库中找到它，但该过程效率低下：

```
{server root}\plugins\com.ibm.hpel.logging.jar 
```

这篇文章的目的是提供关于在哪里可以找到它的洞察力，同时也询问当在线实用程序无法提供您需要的洞察力时，查找课程的最佳方法是什么。

谢谢，杰里米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:24:16.277

我在运行的 WebSphere 实例下找到它的方法是部署[一个 JSP，该 JSP 使用 DeveloperWorks 文章中描述的技术](https://www.ibm.com/developerworks/mydeveloperworks/blogs/Dougclectica/entry/revive_finding_a_java_class_in_your_servlet_container2)来定位提供特定类的 jar。

对于后代，这是[该 JSP](https://www.ibm.com/developerworks/mydeveloperworks/files/app/person/0100002GMN/file/7d5ae056-52dd-4831-a0fa-007697f5634c)的来源：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>Servlet Container Class Finder</title>
</head>
<body>
<h2>Servlet Container Class Finder</h2>
<p>Enter the fully-qualified name of a Java class
(e.g. org.apache.oro.text.regex.Perl5Compiler) in the field below. The
servlet will attempt to load the class and, if successful, query the
class' <em>java.security.CodeSource</em> for the location of the class
using the following methods:
    <pre>
    Class.forName(className).getProtectionDomain().getCodeSource()
    </pre>
</p>
<p>
<%
    String className = request.getParameter("className");
    String prefill = "";
    if (className != null)
    {
        prefill = className;
        if (className.trim().length() != 0)
        {
            try
            {
                java.security.ProtectionDomain pd = Class.forName(className).getProtectionDomain();
                if (pd != null)
                {
                    java.security.CodeSource cs = pd.getCodeSource();
                    if (cs != null)
                    {
                        out.println(cs);
                    }
                    else
                    {
                        out.println("No CodeSource found");
                    }
                }
                else
                {
                    out.println("No ProtectionDomain found");
                }
            }
            catch (Throwable t)
            {
                out.println(t);
            }
        }
    }
%>
</p>
<form method="post" action="<%= request.getRequestURI()%>">
    <p>
    Class Name: <input type="text" name="className" value="<%= prefill %>" size="40"/>
    <input type="submit" value="Submit"/>
    </p>
</form>
<p>
    Code taken from 
    <a href="http://www.ibm.com/developerworks/websphere/techjournal/0406_brown/0406_brown.html">
    this DeveloperWorks article</a>.
</p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:35:57.987

如果所有其他方法都失败了并且我无法使用 Eclipse Quick Type Hierarchy 找到该类，它显示了该类所在的 jar，我将使用以下几行的 shell 脚本：

```
for f in `find /path/to/websphere/lib -name "*.jar"` 
do    
   FOUND=`jar tvf $f | grep WsLogRecord`
   if [[ -n $FOUND ]]
   then
       echo "Found in $f:"
       echo $FOUND
   fi
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T14:17:22.413

我能够在 com.ibm.ws.logging.object.WsLogRecord 下找到 WsLogRecord（减去 hpel）。我用eclipse在com.ibm.ws.logging.object下查看，找不到hpel，但是找到了WsLogRecord。我能够使用 jd-eclipse 查看实际的课程。.class 中的注释给出了文件位置（C:\IBM\SDP\runtimes\base_v7\plugins\com.ibm.ws.runtime.jar）。看起来我在 findjar.com 上也找不到它，而 .jar 是 IBM 的开箱即用代码。我想这并不能回答如何在网上找到它，但我能够找到它，然后通过上述步骤查看课程。

# python - 在 listenFailure 后退出 Twisted-application

> ID：12007316
> 
> 赞同：1
> 
> 时间：2012-08-17T14:01:00.027
> 
> 标签：python, twisted

我刚刚开始学习扭曲并使用 Tcp4endpoint 类编写了一个小型 tcp 服务器/客户端。一切正常，除了一件事。

为了检测将不可用端口作为侦听端口提供给服务器的事件，我在端点延迟器中添加了一个 errback。触发了这个 errback，但是，我无法从 errback 退出应用程序。Reactor.stop 导致另一个失败，表明反应堆没有运行，而例如 sys.exit 触发另一个错误。后两者的输出仅在我执行 ctrl+c 和 gc 命中时才能看到。

我的问题是，有没有办法让应用程序在 listenFailure 发生后退出（干净）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:35:02.760

一个最小的示例将有助于使您的问题更清楚。然而，根据多年的 Twisted 经验，我有一个有根据的猜测。我想你写了一个这样的程序：

```
from twisted.internet import endpoints, reactor, protocol

factory = protocol.Factory()
factory.protocol = protocol.Protocol
endpoint = endpoints.TCP4ServerEndpoint(reactor, 8000)
d = endpoint.listen(factory)
def listenFailed(reason):
    reactor.stop()
d.addErrback(listenFailed)

reactor.run() 
```

你在正确的轨道上。不幸的是，您有订购问题。`reactor.stop`失败的原因`ReactorNotRunning`是`listen`Deferred 在你调用之前失败了`reactor.run`。也就是说，到你做的时候它已经失败了`d.addErrback(listenFailed`），所以`listenFailed`马上就被调用了。

对此有多种解决方案。一种是编写 .tac 文件并使用服务：

```
from twisted.internet import endpoints, reactor, protocol
from twisted.application.internet import StreamServerEndpointService
from twisted.application.service import Application

application = Application("Some Kind Of Server")

factory = protocol.Factory()
factory.protocol = protocol.Protocol
endpoint = endpoints.TCP4ServerEndpoint(reactor, 8000)

service = StreamServerEndpointService(endpoint, factory)
service.setServiceParent(application) 
```

这是使用运行的`twistd`，例如`twistd -y thisfile.tac`

另一种选择是使用服务所基于的低级功能`reactor.callWhenRunning`：

```
from twisted.internet import endpoints, reactor, protocol

factory = protocol.Factory()
factory.protocol = protocol.Protocol
endpoint = endpoints.TCP4ServerEndpoint(reactor, 8000)

def listen():
    d = endpoint.listen(factory)
    def listenFailed(reason):
        reactor.stop()
    d.addErrback(listenFailed)

reactor.callWhenRunning(listen)
reactor.run() 
```

# image - 如何使用 FTL（免费标记模板语言）将图像放在网页上？

> ID：12007318
> 
> 赞同：0
> 
> 时间：2012-08-17T14:01:02.850
> 
> 标签：image, templates, webpage, freemarker

我很想知道我们如何使用**FTL**（**免费标记模板语言**）放置图像？还有如何在**FTL**中更改字体颜色和样式？

any1 可以知道任何好的学习教程`FTL`吗？请分享链接...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T16:41:12.303

FTL 只是在服务器上生成文本，如 HTML、CSS 等，然后客户端（浏览器）只获取输出。因此，假设您使用 FTL 生成 HTML，您可以使用`<img src="...">`. 要了解 FreeMarker，当然可以访问[http://freemarker.org/docs/index.html](http://freemarker.org/docs/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T06:51:34.183

就像您将图像放入 HTML 页面一样。

```
<image src="images/someFile.png" class="someClass "/> 
```

FTL 是一种模板语言。因此所有基本语法和功能都与 html、jsp 或任何其他网页相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-15T20:33:31.343

Freemarker 允许您像往常一样分配图像的 src：

```
<img src="yourPath/yourImage.png" alt="..." /> 
```

或类似的东西：

```
<#--Where "imgUrl" is where the URL for your image is stored, and "alt" is where the alt text of the image is stored.-->
<img src=${imgUrl} alt=${alt} /> 
```

第二个选项在处理列表时特别有用。

# c++ - Glib::Regex 拾取 TextTag-s

> ID：12007319
> 
> 赞同：1
> 
> 时间：2012-08-17T14:01:10.427
> 
> 标签：c++, regex, gtk, glib

我正在尝试使用 Gtk::TextBuffer-s 使用 Glib::Regex 和 Gtk::TextView，并且尝试使用 Gtk::TextTag-s 进行语法突出显示。

我用于更新语法的代码（它在行首和行尾接收迭代器）

```
void MainWindow::update_syntax(const Gtk::TextBuffer::iterator& start, const Gtk::TextBuffer::iterator& end)    {
  std::vector<Glib::ustring> keywords;
  keywords.push_back("class");
  keywords.push_back("struct");
  Glib::MatchInfo info;
  auto regex = Glib::Regex::create(R"((\w+))");
  auto ok = regex->match(start.get_visible_text(end), info);
  std::map<Glib::ustring, std::pair<Glib::RefPtr<Gtk::TextMark>, Glib::RefPtr<Gtk::TextMark>>> marks;
  do {
    std::cout << "word: " << info.fetch(1) << std::endl;
    for (auto kw : keywords) {
      if (info.fetch(1) == kw) {
        int start_offset, end_offset;
        info.fetch_pos(1, start_offset, end_offset);
        std::cout << info.fetch(1) << " (at: [" << start_offset << ";" << end_offset << "])" << std::endl;
        marks["keyword"] = std::make_pair(
          this->m_buffer->create_mark(
            this->m_buffer->get_iter_at_offset(start.get_offset() + start_offset)
          ),
          this->m_buffer->create_mark(
            this->m_buffer->get_iter_at_offset(start.get_offset() + end_offset)
          )
        );
      }
    }
  } while(info.next());

  for (auto mark : marks) {
    this->m_buffer->apply_tag_by_name(mark.first, 
      mark.second.first->get_iter(), mark.second.second->get_iter());
  }
} 
```

所以流程是我创建一个简单的正则表达式，它应该匹配该行中的每个单词，然后创建一个标记映射，稍后将给出要设置标签的范围。我在这里使用 Gtk::Mark，因为每次修改缓冲区都会使迭代器失效。

为了说明这里出了什么问题，我将发布这个函数的一些调试输出，以及`on_insert`之前的一个插槽；

```
void MainWindow::on_insert(const Gtk::TextBuffer::iterator& pos,
  const Glib::ustring& text, int bytes)
{
  std::cout << text << " (added at[" << pos.get_offset() <<
  "]; with [" << bytes << "]bytes)" << std::endl << std::endl; 
```

因此，写入`class class`TextView 的输出导致第一个被突出显示，而第二个没有被选中，记录：

```
c (added at[1]; with [1]bytes)

word: c
l (added at[2]; with [1]bytes)

word: cl
a (added at[3]; with [1]bytes)

word: cla
s (added at[4]; with [1]bytes)

word: clas
s (added at[5]; with [1]bytes)

word: class
class (keyword at: [0;5])
  (added at[6]; with [1]bytes)

word: class
class (keyword at: [0;5])
word: r
c (added at[7]; with [1]bytes)

word: class
class (keyword at: [0;5])
word: rd
l (added at[8]; with [1]bytes)

word: class
class (keyword at: [0;5])
word: rd
a (added at[9]; with [1]bytes)

word: class
class (keyword at: [0;5])
word: rd
word: a
s (added at[10]; with [1]bytes)

word: class
class (keyword at: [0;5])
word: rd
word: as
s (added at[11]; with [1]bytes)

word: class
class (keyword at: [0;5])
word: rd
word: ass 
```

很容易注意到最后一行显示它移动了两个偏移量。可能是应用了标签。另外，这里不清楚的是：`word: rd`. 我`keyword`用作标签的名称。当这段代码仍然使用迭代器时，`info.fetch(1)`返回的`"keyword"`，那么正则表达式是否也匹配标签？

我希望有 Glib 和 Gtk 经验的人知道答案，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:11:29.617

我还没有使用过这个特定的 API ¹，但我认为你对对象的生命周期有疑问。 `iter->get_visible_text()`正在返回一个字符串对象，该对象在调用 . 后被销毁`regex->match()`。这是一个问题，因为`Glib::MatchInfo::next()`期望该字符串仍然存在²。这可能就是你在第二场比赛中得到垃圾的原因。我认为你会安全地做这样的事情：

```
....
auto visbuf = start.get_visible_text(end); 
auto ok = regex->match(visbuf, info);  // existing line
... 
```

1.  所以我可能满脑子都是废话。
2.  来自 Glib::MatchInfo::next() 文档：*匹配是在传递给 match 函数的字符串上完成的，因此在调用此函数之前不能释放它。*

# llvm - 如何检查给定指令是否在 LLVM 中使用数组

> ID：12007321
> 
> 赞同：0
> 
> 时间：2012-08-17T14:01:29.040
> 
> 标签：llvm

我想问的是，我们能否检查给定指令是否包含一个数组作为 LLVM 中的操作数。我正在写一个通行证并停留在这个阶段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:06:39.627

是的，您可以使用以下代码进行检查：

```
Instruction *I;
bool UsingArray = false;
for (unsigned num = 0; num < I->getNumOperands(); ++num)
  if (isa<ArrayType>(I->getOperand(num)->getType()))
    UsingArray = true; 
```

# c# - NHibernate BasicSample 与 Nhibernate 3.3

> ID：12007330
> 
> 赞同：1
> 
> 时间：2012-08-17T14:02:21.697
> 
> 标签：c#, asp.net, nhibernate, c#-4.0

我开始了一个新项目，对于这个项目我想使用 BasicSample（NHibernate 最佳实践，[http://www.codeproject.com/Articles/13390/NHibernate-Best-Practices-with-ASP-NET-1-2nd-Ed](http://www.codeproject.com/Articles/13390/NHibernate-Best-Practices-with-ASP-NET-1-2nd-Ed)）我以前没有用过这个，现在我遇到了问题。在这个项目中，我使用 NHibernate 3.3.1 并修改了 BasicSample 的源代码以使用我的实体。对于每个班级模型，我都会收到此错误（仅显示班级“月”）：

```
System.TypeInitializationException was unhandled by user code 
```

> Message=“嵌套”的类型初始化程序引发了异常。Source=Project.Data TypeName=Nested StackTrace：在 Project.Data\NHibernateSessionManager.cs 中的 Project.Data.NHibernateSessionManager.get_Instance()：在 App_Code\NHibernateSessionModule 中的 Project.Web.NHibernateSessionModule.BeginTransaction(Object sender, EventArgs e) 的第 28 行.cs:line 27 at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) InnerException: NHibernate.InvalidProxyTypeException Message=以下类型不得用作代理：Project.Core.Domain.Calendar.Month：方法 Equals 应为“公共/受保护的虚拟”或“

类看起来像：

```
public class Month : DomainObject<int>
{
    private Year _year;
    public Year Year
    {
        get { return _year; }
        set { _year = value; }
    }

    private string _monthName; 
    public string MonthName
    {
        get { return _monthName; }
        set { _monthName = value; }
    }

    private IList<Consumption> consumptions = new List<Consumption>();
    public IList<Consumption> Consumptions
    {
        get { return new List<Consumption>(consumptions).AsReadOnly(); }
        protected set { consumptions = value; }
    }

    public Month()
    { }

    public override int GetHashCode()
    {
        return (GetType().FullName + "|" +
                MonthName.GetHashCode()).GetHashCode();
    } 
```

有没有人知道问题可能是什么？我一直在交叉检查我的项目和 BasicSample 项目，但我找不到任何不匹配的东西。

2.有人可以为我解释如何使用 DaomainObject 中的 GetHashCode，因为我不知道如何在每个类中使用这个= 是否应该在此处添加类中的每个属性？

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:05:50.643

问题包含在您的异常堆栈跟踪中。您需要更仔细地阅读它们：

> 以下类型不能用作代理：
> Project.Core.Domain.Calendar.Month：方法 Equals 应该是“公共/受保护的虚拟”或“受保护的内部虚拟”
> Project.Core.Domain.Calendar.Month：方法 IsTransient 应该是'public/protected virtual' 或 'protected internal virtual'
> Project.Core.Domain.Calendar.Month：方法 get_Year 应该是 'public/protected virtual' 或 'protected internal virtual'
> Project.Core.Domain.Calendar.Month：方法 set_Year应该是“公共/受保护的虚拟”或“受保护的内部虚拟”

它所说的基本上是，你需要让所有`public`和`protected`你的类成员`virtual`，否则延迟加载将不起作用。

* * *

`GetHashCode`：
实例的哈希码在其生命周期内不应更改，因此不应包含可以更改的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T14:07:47.180

1.  NHibernate 默认使用延迟加载。它通过从您的实体创建代理类来执行它 - 从您的实体继承并覆盖它的成员。为了使它起作用，您需要将所有实体成员标记为`virtual`。这就是它在异常消息中抱怨的内容。

2.  至于`GetHashCode`，您应该在覆盖中实现它`DomainObject`并且仅`Id`在`GetHashCode`覆盖中使用。您还应该覆盖`Equals`. 在这里您可以找到原因：[NHibernate：覆盖 Equals 和 GetHashCode 的原因](https://stackoverflow.com/questions/5851398/nhibernate-reasons-for-overriding-equals-and-gethashcode)。

# javascript - 继承请求对象的 Javascript 错误

> ID：12007339
> 
> 赞同：0
> 
> 时间：2012-08-17T14:03:05.317
> 
> 标签：javascript, inheritance

出于试用的目的，我在阅读[了这篇关于继承的 mdn 文章](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Inheritance_Revisited)后，我想创建一个直接从 XMLHttpRequest 继承的对象，如下所示：

```
function Request( url ){
    XMLHttpRequest.call( this );
};

Request.prototype = Object.create( 
    new XMLHttpRequest(),{
    'constructor' : {
        'value' : Request,
        'enumerable' : true
    },

    'toString' : {
        'value' : function(){
            return '[Object Request]';
        },
        'enumerable' : true
    }
}); 
```

这本身不会造成任何麻烦，但是当我尝试使用实例时。在创建后调用继承的 .open(method, location) -method 使浏览器抛出此错误：

![错误截图](../Images/e729c014f0e8945b28fe1b2c97cdf2e3.png)

有谁知道为什么会抛出这个错误？我用其他对象尝试了这种继承技术，它工作得很好，那么为什么不使用 XMLHttpRequest 呢？

问候菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-18T12:47:59.873

大多数 DOM 构造函数不能被继承。我想知道你没有得到`WRONG_THIS_ERROR`……</p>

> 我尝试了这种与其他对象的继承技术，效果很好

它适用于函数构造函数，因为它们的[`.call`方法与使用](http://es5.github.io/#x15.3.4.4)[关键字](http://es5.github.io/#x11.2.2)[作为构造函数](http://es5.github.io/#x11.2.2)[`[[construct]]`](http://es5.github.io/#x13.2.2)调用时所做的事情相似。[`new`](http://es5.github.io/#x11.2.2)

> 为什么不使用 XMLHttpRequest？

因为它是一个原生对象，它`[[construct]]`会调用一些原生代码，而不是调用`[[call]]`函数体。实际上它的`[[call]]`行为将被定义为像以前一样工作`[[construct]]`，因此`XMLHttpRequest`可以在没有的情况下调用它，`new`但也会返回一个新实例。您可以尝试`xhr = XMLHttpRequest.call(anything)`- 它不会改变`anything`，但会返回一个新对象。

与其继承它（甚至扩展原生原型），不如围绕它构建一个包装器。

# c# - 本地报告渲染字体与 Windows DPI 设置

> ID：12007344
> 
> 赞同：0
> 
> 时间：2012-08-17T14:03:32.440
> 
> 标签：c#, .net, reporting-services, fonts, dpi

我有一个 C# 程序，它使用 .NET 2.0 Local Report Rendering 创建一个 SSRS2005 设计的 PDF。

我的一位用户难以阅读 1280 x 1024 分辨率的文本，因此她没有降低分辨率，而是将 DPI 设置更改为 125%。

当在她的 PC 上生成报告并打开它时，字体太大并且值不完全在列内。

除了将 DPI 设置恢复到 100% 并降低她的分辨率之外，有没有办法以编程方式满足这一要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:15:11.587

我能找到的最好的是微软的[这份](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371771(v=vs.85).aspx)白皮书。他们基本上告诉你通过做一些检查并相应地调整你的 GUI 来让你的应用程序“高 DPI 感知”。

* * *

以下 Stack Overflow 链接中的更多信息：

[创建 DPI 感知应用程序](https://stackoverflow.com/questions/4075802/creating-a-dpi-aware-application)

[如何在 .NET WinForms 应用程序中控制字体 DPI](https://stackoverflow.com/questions/185804/how-to-control-the-font-dpi-in-net-winforms-app)

# clojure - 如何在 Clojure 中更新参考映射中的记录？

> ID：12007347
> 
> 赞同：6
> 
> 时间：2012-08-17T14:03:45.033
> 
> 标签：clojure

鉴于以下情况：

```
(defrecord Person [firstname lastname])
(def some-map (ref {}))

(dosync
  (alter some-map conj {1 (Person. "john" "doe")})
  (alter some-map conj {2 (Person. "jane" "jameson")})) 
```

要将“joe”的名字更改为“nick”，我执行以下操作：

```
(dosync
  (alter some-map (fn [m]                   
                  (assoc m 1 
                       (assoc (m 1) :firstname "nick"))))) 
```

在 Clojure 中这样做的惯用方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T14:57:46.060

无需使用 update-in，对于这种情况， assoc-in 正是您想要的。

`(dosync (alter some-map assoc-in [1 :firstname] "nick"))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T14:56:17.767

编辑：对于您的示例`assoc-in`更好，因为您忽略了以前的值。在您实际需要先前值的情况下保留此答案：

`update-in`可以更新嵌套结构：

```
(alter some-map update-in [1 :firstname] (constantly "nick")) 
```

最后一个参数是要“替换”的值的函数（例如`assoc`，它不替换但返回一个新结构。）在这种情况下，旧值被忽略，因此`constantly`函数总是返回“nick”。

# ios - 关闭 UIPopoverController 不会卸载 contentController

> ID：12007348
> 
> 赞同：1
> 
> 时间：2012-08-17T14:03:46.143
> 
> 标签：ios, uiviewcontroller, uipopovercontroller

在我的主视图控制器中，我有两个 ivars 声明如下：

```
UIPopoverController* __popoverController;
HPSQuestionnaireEditorController* _questionnaireEditorController; 
```

然后我显示一个 UIPopOver 如下：

```
_questionnaireEditorController = [ [ HPSQuestionnaireEditorController alloc ] initWithNibName:nil bundle:nil ];
__popoverController.delegate = self;
[__popoverController setPopoverContentSize:CGSizeMake(400, 500)];
[_questionnaireEditorController setContentSizeForViewInPopover:CGSizeMake(400, 500)];
[__popoverController presentPopoverFromRect:editWrapper.frame inView:editWrapper.superview permittedArrowDirections:UIPopoverArrowDirectionLeft | UIPopoverArrowDirectionRight animated:YES ]; 
```

当需要关闭弹出框时，我手动执行以下操作：

```
[__popoverController dismissPopoverAnimated:YES ];
__popoverController = nil;
_questionnaireEditorController.view=nil;
_questionnaireEditorController=nil; 
```

我正在使用 ARC。

在 _questionnaireEditorController 我有以下内容：

```
- (void)viewWillUnload
{
    NSLog(@"HPSQuestionnaireEditorController viewWillUnload starting");
} 
```

但是，这永远不会运行。弹出框解除似乎并未实际卸载视图或其中托管的控制器。

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:10:33.990

你没有做错什么。UINavigationControllers、UIPopoverControllers 和 UITabBarControllers 不需要在离开屏幕时立即卸载视图。他们有缓存后端，可以保留它们，直到它完全没有必要或者他们需要内存。

如果您不需要卸载它，那么您会没事的。别担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:18:49.293

viewWillUnload（和 viewDidUnload）在你的视图控制器被释放时不一定被调用——它们通常只在响应内存警告时被调用。根据[UIViewController 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)，在这两种方法的描述中：

> 当内存不足的情况发生并且不需要当前视图控制器的视图时，系统可能会选择从内存中删除这些视图。

如果有任何必要的清理，请在 dealloc 中进行。如果清理只是包括将保留属性设置为 nil 并且您使用的是 ARC，则无需为 dealloc 操心。

# android - 如何从函数回调到android中的侦听器？

> ID：12007349
> 
> 赞同：0
> 
> 时间：2012-08-17T14:03:48.163
> 
> 标签：android

好的，我有一个登录类，如下面的片段

```
public class LoginClass {

    public void login() {
        login.authorize(username,password); 
            //run activity specific code here
    } 
```

}

这个类非常通用，但根据调用 LoginClass.login() 的活动，我希望执行不同的操作。

我见过一些实现，其中一个函数被传递到类中，然后这个函数在完成时运行。谁能给我一个简短的例子来说明如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:10:08.607

函数不是在 Android 上看到的 Java 中的第一类对象——你不能传递函数。当需要专门化时，Java 的意识形态要求从您的泛型类（可能是匿名的）派生。像这样：

```
class MyActivity
{

    void onCreate()
    {
        MyButton.addOnClickListener(
            new LoginClass()
            {
                //Just like LoginClass, but with one method overridden
                public void login()
                {
                    super.login(); //Call the base
                    ThenSomethingElse();
                }
            });
    }
} 
```

或者，您可以在登录类中创建钩子（在需要自定义操作时调用的函数）并覆盖活动中的钩子。这就是Java方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:11:17.700

您可以使用处理程序来提供回调机制。

在调用者中定义处理程序

```
Handler mHandler = new Handler()
{
 public void handleMessage(Message msg)
 {
 }
} 
```

将您的处理程序传递给登录函数：

```
LoginClass.login(mHandler); 
```

然后向处理程序发送一条消息：

```
public void login(Handler handler)
{
 handler.sendEmptyMessage(0);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T14:14:17.827

```
public class LoginClass {

    public void login(boolean b) {
        login.authorize(username,password); 
          if (b){
                 //do something
            }
          else {
                //do something
             }
    } 
```

只需使用构造函数参数即可。

```
Class 1
LoginClass loginClass = new LogonClass(false)

Class 2
LoginClass loginClass = new LogonClass(true) 
```

# java - 如何检查客户端是否连接到 tcp/ip 端口

> ID：12007351
> 
> 赞同：0
> 
> 时间：2012-08-17T14:04:01.447
> 
> 标签：java, sockets

我有一个应用程序（TCP-com 端口映射软件）充当服务器并侦听端口（2293）并映射到 COM1 的场景。还有另一个 java 应用程序，我必须检查是否有任何客户端连接在端口号（2293）上，如果已连接，则做一些有用的事情。我必须检查该软件正在侦听的端口（2293）是否已连接（而不是它是否打开或可访问）。

有什么方法可以检测到这种情况。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:07:44.127

如果它是基于 Windows 的系统，您应该尝试从命令提示符运行“netstat”。这应该显示所有具有开放端口的应用程序，以及这些端口是否正在侦听数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:13:59.170

该功能应该在服务器中。它知道没事。没有 Java API 可以让您从外部检测这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:09:46.673

Windows 运行 cmd

```
netstat -an |findstr ESTABLISHED |findstr :2293 
```

Linux 运行

```
netstat -an |grep ESTABLISHED |grep :2293 
```

# java - 将一组文档分成三组不相交的固定数量

> ID：12007354
> 
> 赞同：0
> 
> 时间：2012-08-17T14:04:10.800
> 
> 标签：java, python, bash, sampling

我有一组包含数千个文档的文档。我想把它分成3组，它们的数量不同但固定。我会怎么做？任何脚本 bash/python/java 或指向参考的链接都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:22:55.053

```
docs={'doc1','doc2','doc3','doc4','doc5','doc6','doc7','doc8','doc9','doc10','doc11','doc12'}
training=set()
test=set()
dev=set()
lis=list(docs)
print(lis)
try:
    for i in range(0,len(lis),3):
        print(lis[i])
        training.add(lis[i])
        test.add(lis[i+1])
        dev.add(lis[i+2])
except IndexError:
    pass

print(training,test,dev)

**output:**

    {'doc10', 'doc3', 'doc8', 'doc7'} {'doc1', 'doc11', 'doc9', 'doc4'} {'doc2', 'doc12', 'doc6', 'doc5'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:12:07.890

如果您可以随机获取文档，那么在 python 中，我会简单地在“ `set`”上使用列表切片：

```
 set_of_documents = ...  #somehow build the set
 list_of_documents = list(set_of_documents)
 training = list_of_documents[:ntraining] 
 development = list_of_documents[-ndev:]
 test = list_of_documents[ntraining:-ndev] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T14:23:51.953

给定`documents`包含您的数据的数组，以及一个`partitions`指定要放入每个列表的文档数的数组：

```
import random
def partition_docs(documents, partitions):
        if len(documents) != sum(partitions):
                raise ValueError("Need exactly %d documents for these partitions, have %d" % (sum(partitions), len(documents)))
        random.shuffle(documents)
        results = []
        start = 0
        for num in partitions:
                results.append(documents[start:start+num])
                start += num
        return results 
```

**解释**：`random.shuffle`完全随机化文档列表。然后，您只需获取连续的切片并将它们作为单独的列表返回。这很容易保证您拥有所需的文档数量，并确保分发尽可能随机。这也适用于将文档拆分为任意数量的列表。

**示例用法**：

```
documents = [random.choice("abcdefghijklmn") for _ in xrange(100)]
partitions = [10, 50, 40]

print partition_docs(documents, partitions)
print partition_docs(documents, partitions)
print partition_docs(documents, partitions)
print partition_docs(documents, partitions) 
```

输出：

```
[['b', 'n', 'm', 'l', 'c', 'j', 'l', 'e', 'i', 'f'], ['k', 'n', 'i', 'b', 'k', 'f', 'h', 'j', 'i', 'g', 'n', 'c', 'd', 'h', 'd', 'd', 'm', 'g', 'i', 'd', 'i', 'e', 'e', 'a', 'k', 'k', 'f', 'e', 'h', 'm', 'k', 'c', 'h', 'k', 'j', 'k', 'g', 'f', 'j', 'l', 'b', 'e', 'm', 'c', 'd', 'n', 'b', 'h', 'm', 'm'], ['a', 'g', 'f', 'f', 'm', 'k', 'n', 'a', 'n', 'f', 'd', 'j', 'h', 'h', 'k', 'g', 'h', 'k', 'i', 'l', 'm', 'h', 'm', 'i', 'c', 'i', 'c', 'g', 'm', 'l', 'a', 'j', 'g', 'd', 'd', 'n', 'b', 'b', 'n', 'k']]
[['m', 'n', 'e', 'a', 'k', 'b', 'm', 'd', 'k', 'f'], ['d', 'h', 'c', 'g', 'h', 'i', 'l', 'k', 'b', 'g', 'n', 'd', 'n', 'm', 'a', 'm', 'd', 'i', 'n', 'g', 'f', 'g', 'm', 'b', 'j', 'l', 'k', 'f', 'c', 'j', 'i', 'n', 'j', 'h', 'j', 'k', 'k', 'd', 'i', 'm', 'e', 'h', 'c', 'h', 'm', 'i', 'k', 'e', 'f', 'l'], ['m', 'i', 'h', 'j', 'l', 'b', 'e', 'k', 'k', 'h', 'd', 'h', 'm', 'n', 'k', 'f', 'c', 'l', 'g', 'm', 'f', 'n', 'c', 'i', 'd', 'a', 'e', 'f', 'b', 'a', 'd', 'g', 'k', 'n', 'j', 'b', 'i', 'c', 'h', 'g']]
[['f', 'f', 'l', 'g', 'c', 'k', 'i', 'k', 'm', 'h'], ['i', 'k', 'm', 'b', 'c', 'h', 'k', 'i', 'd', 'k', 'n', 'n', 'f', 'c', 'm', 'm', 'e', 'd', 'f', 'm', 'e', 'j', 'k', 'n', 'd', 'g', 'a', 'g', 'j', 'a', 'l', 'l', 'b', 'e', 'c', 'd', 'e', 'a', 'i', 'f', 'j', 'm', 'i', 'd', 'm', 'i', 'n', 'g', 'h', 'c'], ['g', 'h', 'h', 'k', 'k', 'i', 'n', 'n', 'i', 'd', 'l', 'b', 'l', 'f', 'a', 'j', 'b', 'g', 'm', 'n', 'k', 'm', 'g', 'j', 'j', 'm', 'h', 'h', 'c', 'k', 'b', 'd', 'e', 'b', 'n', 'k', 'f', 'h', 'h', 'd']]
[['h', 'k', 'b', 'l', 'h', 'g', 'g', 'n', 'm', 'c'], ['g', 'a', 'i', 'c', 'f', 'i', 'd', 'i', 'k', 'h', 'j', 'b', 'f', 'k', 'm', 'd', 'g', 'm', 'b', 'h', 'f', 'c', 'h', 'd', 'f', 'j', 'n', 'l', 'k', 'n', 'k', 'b', 'h', 'g', 'h', 'b', 'm', 'm', 'i', 'l', 'b', 'k', 'j', 'f', 'm', 'd', 'e', 'm', 'g', 'k'], ['d', 'e', 'm', 'f', 'a', 'l', 'n', 'd', 'j', 'i', 'd', 'n', 'g', 'n', 'k', 'c', 'a', 'c', 'j', 'e', 'f', 'h', 'c', 'i', 'j', 'k', 'm', 'd', 'h', 'e', 'm', 'e', 'a', 'i', 'i', 'l', 'k', 'k', 'n', 'n']] 
```

使用不同的分区：

```
partitions = [30, 30, 40]

print partition_docs(documents, partitions)
print partition_docs(documents, partitions)
print partition_docs(documents, partitions)
print partition_docs(documents, partitions) 
```

输出：

```
[['g', 'h', 'n', 'i', 'j', 'l', 'a', 'm', 'g', 'h', 'd', 'l', 'g', 'e', 'b', 'i', 'e', 'l', 'i', 'f', 'j', 'a', 'l', 'j', 'e', 'h', 'h', 'j', 'm', 'n'], ['c', 'm', 'g', 'm', 'c', 'e', 'i', 'e', 'm', 'k', 'f', 'e', 'h', 'c', 'k', 'i', 'f', 'd', 'm', 'b', 'm', 'i', 'k', 'd', 'l', 'j', 'f', 'n', 'd', 'l'], ['k', 'j', 'n', 'h', 'b', 'h', 'm', 'j', 'i', 'f', 'e', 'n', 'k', 'n', 'b', 'h', 'm', 'b', 'n', 'j', 'l', 'a', 'e', 'i', 'a', 'h', 'k', 'k', 'h', 'a', 'i', 'k', 'c', 'b', 'c', 'a', 'l', 'm', 'c', 'e']]
[['l', 'l', 'i', 'd', 'm', 'n', 'c', 'm', 'a', 'h', 'g', 'l', 'k', 'f', 'b', 'n', 'i', 'a', 'e', 'j', 'm', 'h', 'h', 'g', 'e', 'm', 'g', 'i', 'f', 'b'], ['n', 'c', 'i', 'e', 'h', 'j', 'i', 'h', 'k', 'c', 'h', 'g', 'j', 'a', 'k', 'n', 'b', 'a', 'm', 'j', 'b', 'c', 'l', 'k', 'j', 'd', 'k', 'c', 'm', 'e'], ['e', 'm', 'b', 'j', 'e', 'c', 'j', 'f', 'h', 'd', 'e', 'j', 'i', 'h', 'h', 'i', 'n', 'k', 'n', 'd', 'i', 'l', 'a', 'a', 'k', 'f', 'l', 'i', 'l', 'b', 'm', 'h', 'e', 'm', 'l', 'm', 'f', 'n', 'e', 'k']]
[['h', 'e', 'c', 'n', 'm', 'l', 'i', 'k', 'a', 'm', 'k', 'i', 'k', 'g', 'f', 'b', 'j', 'l', 'j', 'm', 'i', 'h', 'g', 'h', 'h', 'k', 'l', 'n', 'f', 'j'], ['m', 'j', 'e', 'm', 'a', 'd', 'm', 'l', 'g', 'i', 'e', 'm', 'i', 'j', 'f', 'e', 'f', 'j', 'd', 'b', 'c', 'l', 'n', 'j', 'j', 'e', 'c', 'k', 'm', 'e'], ['i', 'n', 'b', 'i', 'a', 'c', 'a', 'd', 'k', 'h', 'h', 'n', 'h', 'e', 'e', 'h', 'l', 'm', 'h', 'b', 'c', 'f', 'd', 'e', 'm', 'n', 'g', 'i', 'a', 'b', 'c', 'b', 'a', 'i', 'n', 'k', 'h', 'l', 'l', 'k']]
[['l', 'e', 'k', 'k', 'm', 'l', 'g', 'c', 'j', 'd', 'a', 'l', 'k', 'k', 'f', 'l', 'h', 'e', 'g', 'm', 'k', 'm', 'j', 'i', 'b', 'l', 'c', 'b', 'h', 'g'], ['e', 'j', 'd', 'm', 'f', 'f', 'e', 'e', 'n', 'm', 'b', 'h', 'j', 'h', 'm', 'j', 'j', 'i', 'i', 'f', 'e', 'l', 'n', 'i', 'd', 'h', 'a', 'a', 'h', 'i'], ['i', 'n', 'n', 'n', 'b', 'c', 'm', 'j', 'e', 'a', 'h', 'h', 'b', 'h', 'l', 'a', 'i', 'm', 'i', 'a', 'e', 'c', 'i', 'm', 'k', 'n', 'g', 'l', 'd', 'e', 'm', 'j', 'h', 'n', 'k', 'k', 'c', 'c', 'f', 'b']] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T15:19:05.130

如果这是出于机器学习的目的，我认为*不*使用切片是明智的，因为您可能会引入一些偏见（文档可能已按照某种逻辑进行排序）。所以我会选择 Claudiu shuffle 解决方案。

请注意，如果您只是想要满足某些比例而不是确切的集合大小，您可以计算每个文档属于每个集合的概率：

```
import random
def split(documents, prob_training=0.8, prob_test=0.1, prob_dev=0.1):
    #you may check some rules on input probabilities e.g. that they indeed *are* probabilities
    training = []
    test = []
    dev = []
    for document in documents:
        prob = random.random()
        if prob < prob_training:
            training.append(document)
        elif prob < prob_training + prob_test:
            test.append(document)
        elif prob < prob_training + prob_test + prob_dev:
            dev.append(document)
    return training, test, dev 
```

# .htaccess - 没有 RewriteMap 的 htaccess 小写

> ID：12007355
> 
> 赞同：1
> 
> 时间：2012-08-17T14:04:15.237
> 
> 标签：.htaccess

我需要将所有 url 重写为小写，但我无权访问 httpd.conf 来添加 RewriteMap。有没有办法在没有 RewriteMap 的情况下将 .htaccess 重写为小写？我尝试过的当前代码正在产生内部错误/500

```
#RewriteEngine On
#RewriteMap lowercase int:tolower
#RewriteCond $1 [A-Z]
#RewriteRule ^/(.*)$ /${lowercase:$1} [R=303,L]

RewriteEngine On
RewriteMap  lc int:tolower
RewriteCond %{REQUEST_URI} [A-Z]
RewriteRule (.*) ${lc:$1} [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:33:18.370

这对我有用。

```
Options +FollowSymlinks
RewriteEngine On
CheckSpelling On
CheckCaseOnly On 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-03T13:05:11.047

```
RewriteRule "(.*)A(.*)" "$1a$2" [N,R]
RewriteRule "(.*)B(.*)" "$1b$2" [N,R]
RewriteRule "(.*)C(.*)" "$1c$2" [N,R]
RewriteRule "(.*)D(.*)" "$1d$2" [N,R]
RewriteRule "(.*)E(.*)" "$1e$2" [N,R]
RewriteRule "(.*)F(.*)" "$1f$2" [N,R]
RewriteRule "(.*)G(.*)" "$1g$2" [N,R]
RewriteRule "(.*)H(.*)" "$1h$2" [N,R]
RewriteRule "(.*)I(.*)" "$1i$2" [N,R]
RewriteRule "(.*)J(.*)" "$1j$2" [N,R]
RewriteRule "(.*)K(.*)" "$1k$2" [N,R]
RewriteRule "(.*)L(.*)" "$1l$2" [N,R]
RewriteRule "(.*)M(.*)" "$1m$2" [N,R]
RewriteRule "(.*)N(.*)" "$1n$2" [N,R]
RewriteRule "(.*)O(.*)" "$1o$2" [N,R]
RewriteRule "(.*)P(.*)" "$1p$2" [N,R]
RewriteRule "(.*)Q(.*)" "$1q$2" [N,R]
RewriteRule "(.*)R(.*)" "$1r$2" [N,R]
RewriteRule "(.*)S(.*)" "$1s$2" [N,R]
RewriteRule "(.*)T(.*)" "$1t$2" [N,R]
RewriteRule "(.*)U(.*)" "$1u$2" [N,R]
RewriteRule "(.*)V(.*)" "$1v$2" [N,R]
RewriteRule "(.*)W(.*)" "$1w$2" [N,R]
RewriteRule "(.*)X(.*)" "$1x$2" [N,R]
RewriteRule "(.*)Y(.*)" "$1y$2" [N,R]
RewriteRule "(.*)Z(.*)" "$1z$2" [N,R] 
```

# visual-studio-2010 - 在 Visual Studio 2010 中 heat 项目不支持 -var 参数吗？

> ID：12007356
> 
> 赞同：2
> 
> 时间：2012-08-17T14:04:21.697
> 
> 标签：visual-studio-2010, wix, fragment, heat

我在使用命令时遇到问题

```
"$(WIX)bin\heat.exe" project "$(SolutionDir)\My.project.csproj" -dr FOLDER -cg filesUP -pog:Content -pog:Satellites -gg -g1 -sf -srd -suid -var "var.SourceDir" -out "$(ProjectDir)FilesFragment.wxs" 
```

输出文件忽略此参数***-var "var.SourceDir"***并使用***var.My.project.ProjectDir***

```
...
<Component Id="My.project.Content.Web.config" Directory="My.project.Content" Guid="10E9C2E0-2A35-4D6F-B12D-D66AE2E831D4">
    <File Id="My.project.Content.Web.config" Source="$(var.My.project.ProjectDir)\Web.config" />
</Component>
... 
```

Visual Studio 2010 返回此错误：

> 未定义的预处理器变量“$(var.My.project.ProjectDir)”。
> C:\My.project\My.project.Installer\FilesFragment.wxs

我进行了搜索，但只找到了**heat**与参数**dir**一起使用的示例。

我在文档中没有找到任何说明heat 项目不支持参数***-var的内容。***

有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:57:31.093

我发现的一种解决方案是不使用以下命令：

```
"$(WIX)bin\heat.exe" project "$(SolutionDir)\My.project.csproj" -dr FOLDER -cg filesUP -pog:Content -pog:Satellites -gg -g1 -sf -srd -suid -var var.SourceDir -out "$(ProjectDir)FilesFragment.wxs" 
```

删除参数`-var var.SourceDir`并在其位置设置环境变量`My.project.ProjectDir`并删除参数`-dr FOLDER`并在文件**Setup.wxs**中设置一个 id`My.project.Content`在其位置。

这样，命令应如下所示：

```
"$(WIX)bin\heat.exe" project "$(SolutionDir)\My.project.csproj" -cg filesUP -pog:Content -pog:Satellites -gg -g1 -sf -srd -suid -out "$(ProjectDir)FilesFragment.wxs" 
```

在我的用例中，到目前为止，我对这个解决方案没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:58:54.100

我在我的项目中使用这个选项没有问题。也许，引号是不必要的？尝试`-var var.SourceDir`代替`-var "var.SourceDir"`.

另一个猜测：你收获了一个项目（`heat.exe project`）。可能是这个选项忽略了`-var`开关，并用与项目相关的东西覆盖它。据我记得，`project`收割型在高温下效果不佳，不建议使用……您可以尝试运行`heat.exe dir`，看看它`-var`是否正确通过。

# c# - 替代多个 String.Replaces

> ID：12007358
> 
> 赞同：61
> 
> 时间：2012-08-17T14:04:38.543
> 
> 标签：c#, string, replace

我的代码`String.Replace`连续使用了几次：

```
mystring = mystring.Replace("somestring", variable1);
mystring = mystring.Replace("somestring2", variable2);
mystring = mystring.Replace("somestring3", variable1); 
```

我怀疑有更好更快的方法来做到这一点。你有什么建议？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-08-17T14:08:12.833

对于“简单”的替代方案，只需使用 StringBuilder....

```
StringBuilder sb = new StringBuilder("11223344");

string myString =
    sb
      .Replace("1", string.Empty)
      .Replace("2", string.Empty)
      .Replace("3", string.Empty)
      .ToString(); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-08-17T14:14:03.947

我们是否正在寻找方法让这*更难*理解正在发生的事情？

如果是这样，正则表达式是你的朋友

```
var replacements = new Dictionary<string,string>()
{
   {"somestring",someVariable1},
   {"anotherstring",someVariable2}
};

var regex = new Regex(String.Join("|",replacements.Keys.Select(k => Regex.Escape(k))));
var replaced = regex.Replace(input,m => replacements[m.Value]); 
```

直播：[http ://rextester.com/SXXB8348](http://rextester.com/SXXB8348)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-08-17T14:08:40.597

您至少可以链接语句：

```
mystring = mystring.Replace("somestring", variable1)
                   .Replace("somestring2", variable2)
                   .Replace("somestring3", variable3); 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-08-17T15:05:48.180

调用`Replace`3 次不仅是一个有效的答案，它可能是首选的答案：

RegEx 需要三个步骤：*解析、执行、公式化*。但是`String.Replace`是硬编码的，因此在许多情况下它具有出色的速度。复杂的 RegEx 不如格式良好的`Replace`语句链可读。（将[Jonathan](https://stackoverflow.com/a/12007974)的解决方案与[Daniel](https://stackoverflow.com/a/12007409)的解决方案进行比较）

如果您仍然不相信这`Replace`对您的情况更好，那就来一场比赛吧！并排尝试这两种方法，并使用 a`Stopwatch`查看您在使用数据时节省了多少毫秒。

但**[*不要*过早优化！](https://www.oreilly.com/library/view/c-coding-standards/0321113586/ch09.html)**任何开发人员都更喜欢可读性和可维护性，而不是执行速度快 3 毫秒的神秘意大利面条。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-17T14:45:50.220

本文[Regex: replace multiple strings in a single pass with C#](http://metadeveloper.blogspot.com.br/2008/06/regex-replace-multiple-strings-in.html)可能会有所帮助：

```
static string MultipleReplace(string text, Dictionary replacements) {
    return Regex.Replace(text, 
        "(" + String.Join("|", adict.Keys.ToArray()) + ")",
        delegate(Match m) { return replacements[m.Value]; }
    );
}

// somewhere else in code
string temp = "Jonathan Smith is a developer";
adict.Add("Jonathan", "David");
adict.Add("Smith", "Seruyange");
string rep = MultipleReplace(temp, adict); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-17T14:10:35.017

取决于您的数据的组织方式（您要替换的内容）或您拥有的数据数量；数组和循环可能是一个好方法。

```
string[] replaceThese = {"1", "2", "3"};
string data = "replace1allthe2numbers3";

foreach (string curr in replaceThese)
{
    data = data.Replace(curr, string.Empty);
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-07-09T09:17:13.847

如果您不想使用 RegEx，请将此类添加到您的项目中，
它使用扩展方法“MultipleReplace”：

```
public static class StringExtender
{
    public static string MultipleReplace(this string text, Dictionary<string, string> replacements)
    {
        string retVal = text;
        foreach (string textToReplace in replacements.Keys)
        {
            retVal = retVal.Replace(textToReplace, replacements[textToReplace]);
        }
        return retVal;
    }
} 
```

然后你可以使用这段代码：

```
 string mystring = "foobar";

 Dictionary<string, string> stringsToReplace = new Dictionary<string,string>();
 stringsToReplace.Add("somestring", variable1);
 stringsToReplace.Add("somestring2", variable2);
 stringsToReplace.Add("somestring3", variable1);

 mystring = mystring.MultipleReplace(stringsToReplace); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-11-14T18:28:01.640

我首选的方法是使用 的力量`Regex`来解决多次替换问题。这种方法的唯一问题是您只能选择一个`string`来替换。

以下将替换 all`'/'`或`':'`用 a`'-'`来生成有效的文件名。

```
Regex.Replace("invalid:file/name.txt", @"[/:]", "-"); 
```

# python - 需要让这个 irc 机器人与 BeautifulSoup 一起工作

> ID：12007362
> 
> 赞同：0
> 
> 时间：2012-08-17T14:05:09.923
> 
> 标签：python

除了从 .downloads 获得响应，我想要一个 url 来触发它并从 BeautifulSoup 获得响应，我对 python 很陌生，这就像我的第三个项目。

```
#!/usr/bin/env python

import botlib
import urllib
import BeautifulSoup

class StaffBot(botlib.Bot):
    def __init__(self, server, channel, nick, password=None):
        botlib.Bot.__init__(self, server, 6667, channel, nick)

        if password != None:
            self.protocol.privmsg("nickserv", "identify" % password)
    def __actions__(self):
        botlib.Bot.__actions__(self)

        if botlib.check_found(self.data, ".downloads"):
            username = self.get_username()

            self.protocol.privmsg(self.channel, "%s: response" % username)          

if __name__ == "__main__":
    StaffBot("irc.rizon.net", "#chan", "nick").run() 
```

以防万一我做错了.... [http://pastebin.com/AhrssPVW](http://pastebin.com/AhrssPVW)

我正在使用的 BeautifulSoup 脚本。

```
 soup = BeautifulSoup.BeautifulSoup(urllib.urlopen("url"))
print soup.title.string 
```

编辑

我想说的有点失败，我想用 website.net/viewtopic.php 替换 .downloads。因此，有人说该网站（如下所示）机器人回复了页面标题。

```
somone>>>website.net/viewtopic.php?f=6&t=10960                                                                                           
bot>>>WebsiteName &bull; Viewtopic - topicname 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:35:36.287

也许你为你的用户创建了一个命令

```
if botlib.check_found(self.data, "!download"):
  # must be !download <url>
  url = self.data.split()[1] # < i don't know if the library adds anything else to self.data
  soup = BeautifulSoup.BeautifulSoup(urllib.urlopen(url))
  print soup.title.string 
```

这要求您的用户在`!download`命令后包含一个 url。

所以房间里的用户可以输入`!download website.net/viewtopic.php` 你的机器人会检查它是否是一个下载命令`check_found(self.data, "!download")`。然后它需要获取下载 url。`split()`将字符串拆分为空白列表。而要获取的 url 将是列表中的第二项`[1]`。然后，您可以使用漂亮的汤来获取/解析该 url。

# c++ - C++ 在时间或取消后调用函数

> ID：12007363
> 
> 赞同：2
> 
> 时间：2012-08-17T14:05:13.990
> 
> 标签：c++, timeout, countdown

我正在寻找一种简单的跨平台方法来在一定时间后调用函数，并可以选择提前终止它。

类似于 javascript 如何使用`time = window.setTimeout("alert('Hello');", 500);`和`if(time) clearTimeout(time)`

这在没有任何额外（非标准）库或框架的基本 C++ 中是否可行？如果是这样，你能给我一个正确方向的指针吗？

--

我这样做的原因是我有一个数据库查询，前几次需要 3/4 秒并为此显示一个等待光标，但是在缓存查询并且光标闪烁等待和然后闪烁恢复正常！

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:41:55.017

一个简单的解决方案是跨越一个线程，其中包含要执行的函数、互斥体、取消标志和超时。线程函数将获取所有这些参数，在给定的超时时间内休眠，锁定互斥体并检查标志。如果未设置标志，将调用要执行的函数。

如果必须取消函数，则必须锁定互斥体，同时设置取消标志。

由于线程参数的处理可能变得复杂，我会将它们一起放入一个结构中，动态分配结构并在我可能取消函数调用并将一个 shared_ptr 传递给结构的地方保留实例或 shared_ptr线程函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:19:09.637

调用函数是阻塞操作。我可以想出几种方法来近似你想要的行为......

**时间切片：** 使函数执行一小段工作，逐步推进其总体目标。您可以重复调用它，直到 x 时间过去。

**多线程：** 在另一个线程中运行函数。但是，要在线程之间同步函数的结果可能需要了解您没有的多线程。如果您真的想在一段时间后终止操作，您可以强行关闭线程 - 但您可能不想这样做。你可能想让它完成，只要它完成（它不会阻塞主线程，所以它不应该惹恼用户）。

您使用的 GUI 库可能会使后面的选项变得容易，但我不知道您使用的是什么。

# ms-access - 2010 VBA - 传递类型作为参数

> ID：12007364
> 
> 赞同：2
> 
> 时间：2012-08-17T14:05:17.313
> 
> 标签：ms-access, vba

我有一种情况，我想将对象类型作为比较逻辑的参数传递。

例子：

```
Sub Some (val as Control, typ as Type, ....)
   ...
   if typeof val is typ then
      ...
   end if
   ...
End Sub 
```

我发现自己在多种方法中执行此逻辑模式，并希望将逻辑浓缩到一个位置而不是多个位置，以简化操作。

这是验证这种结构的正确方法还是有更好的方法来做这些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:33:19.150

这并没有花很长时间

如果您想将比较抽象为通用的，这应该可以让您找到正确的逻辑。

```
Public Sub CompareType(val as Control, typ as String)
   ...
   if TypeName(val) = typ then
      ...
   end if
   ...
End Sub 
```

基本上传递对象（val），如果您想进一步抽象，可以是变体，然后如果您知道将为该类型返回的字符串值，然后将其作为字符串值传递

## 工作示例：

在代码运行中：

```
...
AutoSizeControl CurrentDb, frm, "Textbox"
... 
```

模块声明：

```
Public Sub AutoSizeControl(ByRef db As Database, ByRef frm As Form, typ As String)
    Dim ctl As Control, i As Integer
    For i = 0 To (frm.Controls.Count - 1)
        Set ctl = frm.Controls(i)
        If TypeName(ctrl) = typ Then
            ctl.ColumnWidth = -2
        End If
    Next
End Sub 
```

希望这可以帮助其他可能需要这种抽象的人。

# java - 休眠查询优化

> ID：12007365
> 
> 赞同：1
> 
> 时间：2012-08-17T14:05:19.023
> 
> 标签：java, hibernate, hql

我有一段类似于以下的代码：

```
 public void doQuery(final Baz baz){
    final Query query = getSessionFactory().getCurrentSession().createQuery(
            "select distinct foo from Foo as foo "+
            "join foo.a as a"+
            "join foo.b as b "+
            "join b.c as c "+
            "where baz=:baz"
            );
    query.setParameter("baz", baz);
    final List<Foo> list = query.list();

    for (final Foo foo : list) {
        final Set<C> cSet = foo.getB().getCs();
        final String value = foo.getSomeValue();
        for (final C c : cSet) {                
            final Long key = c.getSomeLong();
            // Do stuff with key and value
        }
    }
  } 
```

每次执行 for 循环时，它都会在后台运行额外的休眠查询以提取额外的数据（因为对象被标记为延迟加载）。不需要将这些对象切换到 eager，因为使用 POJO 的其他类不需要该数据。

显然，上面的代码会造成瓶颈，这是我想避免的。是否有一种特定于休眠的方式（即没有本机 SQL）来修改查询以一次性只带回必要的数据？

我可以让查询返回一个 String[][]，其中 col1 作为键，col2 作为值，而不是返回 Foo

更新：

我将查询更改为只返回必要的键/值

“从...中选择不同的 c.id、foo.someValue

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:58:43.910

据我了解，您的问题是您不希望默认情况下渴望收集，但在这些具体案例/方法中，在一个查询中获取所有内容？！

这是休眠文档中有关此的片段：

> “获取”连接允许使用单个选择来初始化值的关联或集合以及它们的父对象。这在集合的情况下特别有用。它有效地覆盖了关联和集合的映射文件的外部连接和惰性声明。有关详细信息，请参阅第 19.1 节，“获取策略”。

```
from Cat as cat
    inner join fetch cat.mate
    left join fetch cat.kittens 
```

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)

# android - 单击按钮时如何开始新活动？

> ID：12007368
> 
> 赞同：-3
> 
> 时间：2012-08-17T14:05:25.903
> 
> 标签：android

> **可能重复：**
> [单击按钮时如何开始新活动](https://stackoverflow.com/questions/4186021/how-to-start-a-new-activity-when-click-on-button)

当我点击一个按钮时，我想让我的应用程序进入一个新屏幕？我需要为此进行新活动还是有其他方法？如果是活动，有人可以告诉我如何制作链接到活动的按钮吗？谢谢！

ps 请告诉我你说的代码进入了哪些文件，谢谢！

***编辑：我为我缺乏对网站搜索政策的认识而道歉，我对此并不陌生并道歉。感谢您将我链接到正确的位置的帮助。再次对不起各位。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:11:04.953

在 xml 按钮定义中

```
<Button
...
android:onClick="buttonClicked"
/> 
```

在活动中

```
public void buttonClicked( View v ){
Intent i = new Intent( this, NewActivity.class );
startActivity( i );
} 
```

干得好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:30:47.713

是的，要显示一个新屏幕 - 您需要创建一个新活动及其相应的布局 xml 文件。

假设您有两个活动：`FirstActivity`并且`SecondActivity`您想从前者打开后者。在这种情况下，您可以将按钮的事件侦听器设置`FirstActivity`为：

```
btnSecondScreen.setOnClickListener(
    new View.OnClickListener(){
        public void onClick(View v){
            startActivity(new Intent(FirstActivity.this, SecondActivity.class));
        }
    }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T14:19:48.433

我猜你已经定义了一个按钮。您需要做的就是：

```
//Here you define a lisener that will be fired every time you press on the button
Button btnOpenActivity = (Button) findViewById(R.id.YOUR_BUTTON_ID);
btnOpenActivity.setOnClickListener(new OnClickListener() { 
    public void onClick(View v) {
        //Here you start the activity, by creating and passing an Intent
        Intent activityIntent = new Intent (YOUR CONTEXT, SecondActivity.class);
        startActivity (activityIntent);
    }
}); 
```

而已。

因为看起来你是 Android 编程的初学者，所以我建议你去`TheNewBoston`youtube 上的频道。这是我学习android编程的地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T14:23:27.930

是的，您可以创建一个新的`Activity`. 或者你可以使用`Fragments`. `Activity`可能是最简单的方法，是的，可以通过单击按钮来完成：

```
 Button yourButton = (Button) findViewById(R.id.yourButtonId);

yourButton.setOnClickListener(new OnClickListener() { 
    public void onClick(View v) {

        Intent newIntent = new Intent (this, ActivityYouWantToStart.class);
        startActivity (newIntent);
    }
}); 
```

# asp.net - ASP.NET 中的临时变量

> ID：12007371
> 
> 赞同：0
> 
> 时间：2012-08-17T14:05:43.827
> 
> 标签：asp.net, iis-7

我有一个表格，它可以从包含 2000 多个名字和不断增长的名字的数据库中自动完成。这很好用，但是在用户键入和返回列表之间存在令人讨厌的延迟。我想在页面的生命周期内临时存储数据以加快速度。

使用静态变量似乎可行，但我害怕自动完成变量会过时。还有什么我可以用的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:14:16.133

您可以使用[`Caching.Cache`](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)该类来保存值 - 当您[插入](http://msdn.microsoft.com/en-us/library/41ttybaf)缓存时，您可以使用 a 将项目设置为过期`TimeSpan`，或者根据 SQL Server 的版本，您可以[`SqlDependency`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)直接使用它来跟踪数据库中的更改。

# javascript - 制作 javascript 按钮以隐藏或显示内容切换

> ID：12007374
> 
> 赞同：2
> 
> 时间：2012-08-17T14:06:05.747
> 
> 标签：javascript, toggle

我有两个按钮和两个包含不同信息的隐藏 div。我正在尝试研究如何在单击一个按钮时显示内容（我已经设法使这个工作正常），然后如果单击另一个按钮，旧的 div 会再次隐藏，新的 div 会打开。

本质上：

点击这里查看内容A！点击这里查看内容B！

当用户点击内容 A 时，会出现内容 A。当用户再次点击内容 A 时，内容 A 消失。

当用户点击内容 B 时，会出现内容 B。

用户也可以切换。例如，打开内容 A div，单击内容 B 按钮，然后加载内容 B，但内容 A 自行关闭。

**这是我正在使用的 JS：**

```
function ShowDiv() {
document.getElementById("myDiv").style.display = "";
}

function ShowDiv2() {
    document.getElementById("myDiv2").style.display = "";
    } 
```

**HTML**

```
<input type="button" name="answer" onclick="ShowDiv()" />
<input type="button" name="answer2" onclick="ShowDiv2()" />

<div id="myDiv" style="display: none;">Hi I'm content a!</div>
<div id="myDiv2" style="display: none;">Hi I'm content B!</div> 
```

目前，两个按钮都正确显示内容，但是当您尝试单击另一个时，什么也没有发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:14:01.837

如果您想要切换功能，只需将显示从“”更改为“无”并返回：

```
function ShowDiv() {
    document.getElementById("myDiv").style.display = "";
    document.getElementById("myDiv2").style.display = "none";
}

function ShowDiv2() {
    document.getElementById("myDiv2").style.display = "";
    document.getElementById("myDiv").style.display = "none";
} 
```

虽然我强烈建议使用[jquery](http://api.jquery.com/)库，它的[切换](http://api.jquery.com/toggle/)功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:13:47.847

尝试分配`*.style.display = "none";`

# asp.net - 如何在没有文本换行的情况下在浏览器中显示文本文件？

> ID：12007377
> 
> 赞同：1
> 
> 时间：2012-08-17T14:06:16.843
> 
> 标签：asp.net, html, jquery-ui, browser, text

我的 Web 应用程序生成文件。我有一个显示这些文件链接的网页。当我单击该链接时，我会在浏览器（IE8）中显示文件，但文本是换行的，因此难以阅读。要解决这个问题，我会在页面上“查看源代码”，然后关闭自动换行。

有什么方法可以将文本文件加载到 Bowser 中并保留换行符而不换行？我需要一个特殊的 Web 组件吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:26:07.083

这是与 IE8 相关的技术怪癖。我无法在 IE9 中重现它，因为 IE9 只是用记事本打开文件（或者可能是与 .xxx 扩展名关联的程序）。Microsoft[论坛](http://answers.microsoft.com/en-us/ie/forum/ie8-windows_other/viewing-txt-files-in-ie8/3e323f66-14dd-4d6b-bff9-38ed41cf9a8e)上有一个解决方法。这相当于将 Save As 类型从**HTML Document**更改为**All Files**。

# scripting - svg脚本的问题

> ID：12007378
> 
> 赞同：1
> 
> 时间：2012-08-17T14:06:19.350
> 
> 标签：scripting, svg, ecmascript-5

我正在尝试让一些基本的 ecma 脚本在我拥有的 svg 文档中工作。

```
<svg contentScriptType="text/ecmascript" width="957px"
     xmlns:xlink="http://www.w3.org/1999/xlink" zoomAndPan="magnify"
     contentStyleType="text/css" viewBox="-2998 -1920 6580 5780" height="841px"
     preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg"
     version="1.1" onload="init(evt)"">

<script type = "text/ecmascript">
    <![CDATA[
        function init(evt) {
            if (window.svgDocument == null) {
                svgDoc = evt.target.ownerDocument;
            }
        }

        function displayName(name) {
            svgDoc.getElementById("node_name").firstChild.data = name;
        }
    ]]> </script>

<text class = "label" id = "node_name" x="10" y="390"></text>

<circle fill-opacity="0.2" fill="#3ccb5d" r="40.0" cx="1568.2628"
class="46960" cy="-1518.6278" stroke="#000000"
stroke-opacity="0.5" stroke-width="1.0" 
onmouseover="displayName('Showing Nodes')"/>
</svg> 
```

但由于某种原因，每次我尝试从圆圈中触发 displayName 事件时，我都会在我的 svg 标签的最后一行（onload="init(evt)"）得到一个“无法设置属性“数据”为 null”，我不完全确定为什么。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:48:00.460

您应该真正使用 textContent，无论节点是否有子节点，它都可以使用，例如

```
function displayName(name) {
    svgDoc.getElementById("node_name").textContent = name;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:38:15.357

好的，所以我设法弄清楚了这个问题的答案，但这很违反直觉，我觉得我真的应该把它贴在这里。显然，这不起作用的原因是，如果文本标记之间没有任何内容，则其数据被视为 null 而不是空的。

```
Broken Code:    
    <text class = "label" id = "node_name" x="10" y="390"></text>
    getElementById('node_name').firstChild == null

Working Code:
    <text class = "label" id = "node_name" x="10" y="390"> </text>
    getElementById('node_name').firstChild == " " 
```

# javascript - 是什么让 new Date() / 1000 成为有效的 javascript？

> ID：12007379
> 
> 赞同：4
> 
> 时间：2012-08-17T14:06:20.010
> 
> 标签：javascript

我怎么能用一个数字“划分”一个对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T14:23:02.883

*延迟更新*
鉴于我的答案包含一些不完整且有时完全*错误*的信息，我认为最好纠正我的错误。虽然晚了，但还是这样：

几乎所有 JS 对象都有~~2~~ ***3 个***共同的方法：`valueOf()`对于日期对象，它映射回`getTime()`方法，该方法返回一个数字。这个数字是自 1970 年 1 月 1 日以来的毫秒数，许多编程语言使用这个日期作为日期的基础。它被称为 Unix Timestamp，日期被称为 Unix Epoch。万一你想知道。
另一种方法是`toString`，它返回一个字符串（显然）。
第三种方法是`hasOwnProperty`，它可以在原型链中追溯到`Object.prototype`，但这对于这个问题并不重要。

每当您比较 2 个值（对象与否）时，JS 都会强制两个操作数的类型，以便可以安全地比较这两个值（例如，`1 == '1'`将字符串强制`'1'`为 a `Number`）。
这种类型强制也适用于将对象或原始值连接到搅拌中，或者将表达式评估为奇异值时（例如，在您的控制台中， type `new Date;`，您会明白我的意思）。
对象的默认行为`Date`是被强制转换为字符串，`toString`方法被调用。

因此，`Date`实例没有什么不同。它们是对象，这意味着变量的值将是对对象的引用。但是，在您的表达式/语句中，您在`/`对象上使用算术运算符 ( )。在这种情况下，字符串没有多大意义，因此 JS 回退到该`valueOf`方法（有点，`Date`可以通过多种方式将 's 强制转换为数字）。这*确实*产生了 a `Number`，可以毫不费力地进行划分。当使用比较运算符、和时，
可以预期（并且确实可以观察到）相同的行为。 这意味着在大多数情况下，比较日期并使用它们生成输出是轻而易举的事：`>``<``<=``>=`

```
var d1 = new Date();
var d2 = new Date(1234567890123);
if (d1 > d2)
{
   //do stuff
} 
```

写完整的话是这样的：

```
Date.prototype.valueOf = Date.prototype.getTime; //<-- this isn't how its done, but think of the valueOf method as doing something similar

if (d1.getTime() > d2.getTime()) //OR:
if (d1.valueOf() > d2.valueOf()) 
```

除了比较之外，还有其他优点：

```
var d3 = new Date(d1 - 1000); //new date, 1 second before d1 
```

但是有一个权衡/陷阱：
与 JS 中的所有对象一样，使用`==`or`===`进行相等性检查一开始有点奇怪：

```
var a = new Date();
var b = new Date(a.valueOf());
console.log(a.toString() === b.toString());//true
console.log(a.valueOf() === b.valueOf());//true, to the milisecond
console.log(a == b);//false!
console.log(a === b);//false!! 
```

就像我说的：分配给对象的变量实际上并不保存该对象的值，而是引用它。由于两者都`a`引用`b`同一个对象的不同实例，所以它们是不相等的。同样因为它们都是对象（类型相同），所以没有类型强制。
把它想象成两座房子，除了地址之外，其他方面都是 100% 相等的。如果没有强制，你实际上是在说：
*“Fiction Street 1 和 Fiction Street 2 上有一个房子。这两个房子相等吗？”* 答案是响亮的不。

要解决此问题，您必须明确要求 JS通过手动将它们强制转换为另一种类型来*比较这些房屋的外观。*这比听起来容易得多：

```
console.log(a.valueOf() == b.valueOf());//true
//or shorter, still:
console.log(+(a) == +(b));
//coerce to strings, either call toString, or:
console.log((''+a) == (''+b)); 
```

同样，这乍一看似乎很愚蠢，但是通过这种方式，您至少可以测试两个变量是否确实*引用*了同一个实例。假设我们有 2 个对象占用内存，当我们真的只需要 1 个时，我们可以释放对这些实例之一的引用以进行 GC：

```
if (a !== b && +(a) === +(b))
{//their values are the same, but different instances
    b = a;//now b references the same object as a
}
console.log(a === b);//true
console.log(+(a) === +(b));// true again 
```

请注意，现在仍然有一些奇怪的东西会`Date`特别影响对象。尝试猜测以下语句会记录什么：

```
a.setTime(a.getTime() + 1000);//add 1 second
console.log(a == (b + 1000));
console.log(a === (b + 1000));
console.log((a-1000) == b);
console.log((a-1000) === +b); 
```

答案是：假、假、假、真。怎么来的？
第一种情况很简单：`+`运算符被重载，它还连接字符串，并且`Date`对象的默认行为是对`toString`自身的，因此`b+1000`被评估为`b.toString() + '1000'`.
接下来，使用*类型和值*检查`===`几乎总是错误的，因为没有强制进行。*然后，通过使用未*重载的算术运算符
减去 1000意味着左操作数仍将被计算为一个数字。然而，右操作数仍将恢复为被强制为字符串的错误行为。他们不相等。*`-`
最后一个示例将右操作数显式强制为一个数字，并产生 true。*

 *要解决`true`上述所有情况，以下是要写的内容

```
console.log(+a == (+b + 1000));
console.log(+a === (+b + 1000));
console.log((a-1000) == +b);
console.log((a-1000) === +b); 
```

简单地显式地强制你的`Date`实例，你应该没问题

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T14:11:08.793

因为当您使用除法运算符时，`new Date()`将隐式转换为数字（表示从 1970 年 1 月 1 日开始的该日期的总毫秒数）。该`+`运算符将不起作用，因为`+`在字符串中表示连接，而不是求和，并且当您尝试对 Date 求和时，它不会返回毫秒，但该日期的 toString()`*`会起作用，但由于 String 没有`*`运算符，它将起作用. 例如，尝试`new Date() * 2`.

有关 Date 全局对象的更多详细信息，请查看此处：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

**编辑：**我说日期将在带有 / 的表达式中转换为字符串，当然我错了。我已经更正了答案。下面有一些评论可以更清楚地说明我的答案。String 到 Number 的行为仍然有效，即表示有效数字的 String 可以进行乘法、除法和减法运算，但由于 sum 运算符用于连接字符串，因此不能相加。看一看：

```
console.log( "10" + "1" );
console.log( "10" - "1" );
console.log( "10" * "2" );
console.log( "10" / "3" );

console.log( 10 + "1" );
console.log( 10 - "1" );
console.log( 10 * "2" );
console.log( 10 / "3" );

console.log( "10" + 1 );
console.log( "10" - 1 );
console.log( "10" * 2 );
console.log( "10" / 3 ); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-17T14:24:11.383

当你对一个对象执行算术运算时，它的`valueOf`函数被隐式调用。

尝试以下操作以获得可以实际划分的对象：

```
function Foo() {

    this.valueOf = function() {
        return 500;
        };

    }

var bar = new Foo();
console.log(bar/1000); // -> 0.5 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T14:14:31.930

在除法之前日期对象将被转换为数字，这将给出从 1970 年 1 月 1 日开始的毫秒数

`new Date()/1000 => Number(new Date()) / 1000 = some number`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T14:11:48.863

大多数语言实际上用自己的内部语言将日期表示为一个数字。Javascript 使用的约定是自 1970 年 1 月 1 日以来的毫秒数，许多其他语言也有类似的约定。这与您可以以与计时方法相同的方式简单地相互减去日期的原因相同。*

# php - 如何在 PHP 上提交 SQLite3 更新？

> ID：12007382
> 
> 赞同：2
> 
> 时间：2012-08-17T14:06:31.103
> 
> 标签：php, sqlite

我正在尝试在 PHP 中使用 SQLite3，在我需要执行更新之前一切都很好。我想我错过了一个提交，但我没有找到如何去做的方法。

我的代码是：

```
$respostes = $_POST['respostes'];
$return = array();

$conn = new SQLite3( '/home/pi/boxberry/boxberry.db', SQLITE3_OPEN_READWRITE );

$res = $conn->query( 'SELECT numero, resposta FROM preguntes WHERE NOT correcta' );
while( $resposta = $res->fetchArray( SQLITE3_ASSOC ) )
{
    if( strstr( strtolower( $respostes ), strtolower( $resposta['resposta'] ) ) !== FALSE )
    {
        $conn->exec( 'UPDATE preguntes SET correcta = 1 WHERE numero = ' . $resposta['numero'] );
        $return['canvis'] = $conn->changes();
        $conn->exec( 'COMMIT' );
        $res = $conn->query( 'SELECT correcta FROM preguntes WHERE numero = ' . $resposta['numero'] );
        $tmp = $res->fetchArray( SQLITE3_ASSOC );
        $return['tmp'] = $tmp['correcta'];
    }
}

.... more stuff ...

echo json_encode( $return ); 
```

我想要的是从数据库中读取所有问题，并将`resposta`列中的答案与`$respostes`POST 收到的变量中的答案进行比较。这也很好用。然后，如果答案是正确的，我需要把这个正确性放到数据库中，`correcta`将这一行的列设置为 1。如果我显示查询然后我把它放在 SQLite3 控制台上它可以正常工作，但是当我重新检查它时在 PHP 上它一直为 0，即使`$conn->changes()`显示 UPDATE 影响了 1 行。

我检查了我能想到的一切，boxberry.db 文件对任何用户都是可读和可写的，我尝试使用默认的 SQLITE3_OPEN_READWRITE 打开它，我尝试添加一个 COMMIT 的执行，甚至将它放在同一个 exec用分号分隔的行...没有引发错误，但值不会改变。

将 SQLite 与 Python 一起使用，我发现我需要在 UPDATE 之后提交，但我找不到在 PHP 中执行此操作的方法。

该脚本返回如下内容： {"canvis":1,"tmp":0} 这意味着它应该是 1 变化，但是当数据库中的值应该是 1 时仍然是 0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T14:49:40.410

我建议为此使用 PDO 而不是 SQLite3 扩展：

```
$dbh = new PDO('sqlite:/home/pi/boxberry/boxberry.db');

$res = $dbh->query('SELECT numero, resposta FROM preguntes WHERE NOT correcta');
foreach($res as $resposta)
{
  if(FALSE !== strstr(strtolower($respostes), strtolower($resposta['resposta'])))
  {
    $updstmt = $dbh->prepare('UPDATE preguntes SET correcta = 1 WHERE numero = :numero');
    $updstmt->bindParam(':numero', $resposta['numero']);
    $updstmt->execute();
    $return['canvis'] = $updstmt->rowCount();

    $stmt = $dbh->prepare('SELECT correcta FROM preguntes WHERE numero = :numero');
    $stmt->bindParam(':numero', $resposta['numero']);
    $stmt->execute();
    $return['tmp'] = $stmt->fetchAll();
  }
} 
```

*这是未经测试的，但应该可以作为 OP 示例代码的替代品。*

通过使用 PDO，您不必担心 SQLite 中的提交语句，因为它们是自动处理的。如果您**希望**能够提交或回滚一组特定的查询，您可以使用[`PDO::beginTransaction`](http://php.net/manual/pdo.begintransaction.php)and `commit()`/ `rollBack()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T15:10:02.957

您不需要使用`SQLite3`扩展手动提交更改，但您可能需要使包含数据库文件的目录可写（可能设置它以便您的网络服务器软件具有写入权限）。仅仅使数据库文件本身可写对于 SQLite 来说并不总是足够的。

# asp.net-mvc-3 - 这种授权方案的最佳方式是什么？

> ID：12007384
> 
> 赞同：0
> 
> 时间：2012-08-17T14:06:42.033
> 
> 标签：asp.net-mvc-3

我有一个 ASP.NET MVC 3 应用程序和另一个采用另一种技术的应用程序。

基本上，用户只能在 2 应用程序上登录。当用户登录时，应用程序会在数据库中插入一行，其中包含用户 ID、会话 ID、会话创建日期和用户主机地址。

当我的用户想要转到第一个应用程序时，他单击一个链接，其中包含会话 ID（'MyController/AnAction?SessionID= 9d8bd5be-1e7c-4f32-96bc-3067efb0cf77'）。

ASP.NET MVC 将授权/拒绝会话。

如何在 ASP.NET MVC 端实现这一点？我读了一些关于`AutorizeAttribute`,的东西`MembershipProvider`，但我找不到我的解决方案。

例如，我编写了检查会话的代码，但找不到可以设置的位置`MyController.User`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:13:49.277

[ASP.NET MVC 3 身份验证/授权](https://stackoverflow.com/questions/5748726/asp-net-mvc-3-authentication-authorization)

第一个答案： [http ://www.bradygaster.com/custom-authentication-with-mvc-3.0](http://www.bradygaster.com/custom-authentication-with-mvc-3.0)

# php - 不需要的 短代码输出中的标签。wpautop 过滤器已被删除

> ID：12007386
> 
> 赞同：0
> 
> 时间：2012-08-17T14:07:02.490
> 
> 标签：php, wordpress, wordpress-theming, code-formatting

我为 Wordpress 编写了一个简单的短代码，它根据特定的内容搜索输出一组内部的另一个。

问题是，我不断收到这个

我的输出中的标签，这使我的代码有点混乱。虽然我可以忍受它，但我不能快乐地生活。

我已经添加了

```
remove_filter( 'the_content', 'wpautop' );
remove_filter( 'the_excerpt', 'wpautop' ); 
```

在我的主题的“functions.php”中。但结果是一样的。

简码代码如下：

```
$return = "<div class='tarimas-teaser-container'>";
$n = 0;
if ($wp_qry->have_posts()):
    while ($wp_qry->have_posts()): $wp_qry->the_post();
        $thumb = wp_get_attachment_image_src( get_post_thumbnail_id($wp_qry->post->ID), 'thumbnail');
        $return .= "<div class='tarimas-teaser-unit'><h4><a href='{$wp_qry->post->guid}'>{$wp_qry->post->post_title}</a></h4>";
        $return .= "<a href='{$wp_qry->post->guid}'><img src='{$thumb[0]}' width='{$a['ancho_img']}' height='{$a['alto_img']}' class='tarimas-teaser-img' /></a>$div_precio";
        $return .= "</div><!--tt-unit-->";
    endwhile;
endif;
$return .= "</div><!-- ttttt-container -->";

return $return; 
```

我什至在构造的代码上都没有换行符。然而我明白了：

```
<div class='tarimas-teaser-container'>
<div class='tarimas-teaser-unit'>
<h4><a href='http://www.tarimasterhurne.es/productos/roble-blanco-arena-1199020372/'>Roble Blanco Arena</a></h4>
<p><a href='http://www.tarimasterhurne.es/productos/roble-blanco-arena-1199020372/'><img src='http://www.tarimasterhurne.es/wp-content/uploads/2012/07/1199020372_main-150x150.jpg' width='100' height='100' class='tarimas-teaser-img' /></a>
<div class='precio mini'>10,93</div>
</div>
<p><!--tt-unit-->
<div class='tarimas-teaser-unit'>
<h4><a href='http://www.tarimasterhurne.es/productos/roble-marron-rojo-1199020368/'>Roble Marrón Rojo</a></h4>
<p><a href='http://www.tarimasterhurne.es/productos/roble-marron-rojo-1199020368/'><img src='http://www.tarimasterhurne.es/wp-content/uploads/2012/07/1199020368_main-150x150.jpg' width='100' height='100' class='tarimas-teaser-img' /></a>
<div class='precio mini'>11,03</div>
</div>
<p><!--tt-unit-->
<p><!-- ttttt-container --></p> 
```

这让我疯狂。再说一遍：我已经在 functions.php 中删除了 wp_autofilter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:23:31.517

是的，一些疯狂的插件。

检查每个插件...启用和禁用每个插件

# php - 将 Jquery 值传递给 PHP Query

> ID：12007392
> 
> 赞同：0
> 
> 时间：2012-08-17T14:07:34.467
> 
> 标签：php, jquery, ajax

我有一个带有 OndblClickRow 函数的 JQGrid，如下所示：

```
 ondblClickRow: function(rowid)
    {
        rowData = $("#bookings").getRowData(rowid);
                    var brData = rowData['bookref'];
                    console.log(brData);

        getGridRow(brData);

        //$("#cp-bookings-dialog").dialog({ hide: 'slide', height: 625, width: 733, title: 'Booking Reference: - '+ brData});
    }, 
```

这被传递给以下函数：

```
function getGridRow(brData) {

    $.post("bookings-dialog.php", { 'rowdata': brData } );
               $("#cp-bookings-dialog").load('bookings-dialog.php').dialog({ show: "slide", hide: 'slide', height: 625, width: 733, title: 'Booking Reference: - '+ brData});
    , 
```

加载 bookings.dialog.php 页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Title</title>
<?php

set_include_path($_SERVER['DOCUMENT_ROOT'] . "/onlinebookingv4/scripts/php/");
require_once('models/sql.php');

require_once('models/bookingdocket.php');

    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    try {
           $rowdata = $_POST['rowdata'];
           $query = ("SELECT * FROM tblbookings WHERE bookref = '$rowdata'");

        $stmt = $dbh->prepare($query);

        $stmt->execute();

        $row = $stmt->fetch(PDO::FETCH_BOTH);

           BookingDocket::set_id($row['id']);
           BookingDocket::set_bookref($row['bookref']);
           BookingDocket::set_bookdate($row['bookingdate']);
           BookingDocket::set_returndate($row['returndate']);
           BookingDocket::set_journeytype($row['journeytype']);
           BookingDocket::set_passtel($row['passengertel']);
           BookingDocket::set_returndate($row['returndate']);

        $stmt->closeCursor();

    }

    catch (PDOException $pe) {
        die("Error: " .$pe->getMessage(). " Query: ".$stmt->queryString);
    }

    $dbh = null;

?>
</head>

<body>
<div class="cp-tiles-wrapper-dlg">

<div class="cp-booking-info left">

    <p class="pno-margin">Booking Date: &nbsp;<strong>Booking Reference is = <? echo BookingDocket::get_bookref(); ?></strong></p>
    <p class="pno-margin">Query =  &nbsp;<strong><? echo $query; ?></strong></p>
    <p class="pno-margin">Journey: &nbsp;<strong></strong></p>
    <p class="pno-margin">Passenger Tel: &nbsp;<strong></strong></p>
    <p class="pno-margin">E-mail: &nbsp;<strong></strong></p>

</div>

</div>
</body>
</html> 
```

我要做的是传递“brData”，这是对 bookings-dialog.php 的预订参考，以便我可以通过预订参考从数据库中选择所有预订。

目前，当我双击一行时，在萤火虫控制台中我得到以下信息：

POST bookings-dialog.php 显示`SELECT * FROM tblbookings WHERE bookref = 'BR1278'`哪个是正确的

但它也显示：

获取正在显示的 bookings-dialog.php`SELECT * FROM tblbookings WHERE bookref = ''`

对我来说，这似乎被某种方式覆盖了，我可能错了。

有人知道我怎样才能让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:51:21.377

我们不想发回 HTML，我们想发回 JSON 之类的东西。我们的`#cp-bookings-dialog`元素应该有一个看起来像 -> 的 HTML 结构

```
<div id="cp-bookings-dialog">
  <div class="cp-tiles-wrapper-dlg">
    <div class="cp-booking-info left">
    </div>
  </div>
</div> 
```

然后我们将数据发送到服务器。您现有的代码实际上很好，我的评论假设了不同类型的操作。

```
$.post("bookings-dialog.php", { 'rowdata': brData } ); 
```

这是我必须做出假设的地方。在你完成你`set_var($_POST['var'])`的`BookingDocket`课程之后，我们应该只返回一个 JSON 编码的键值对数组，以便在我们的浏览器中解析，并用于更新对话框中的信息。

```
//for example, only showing the last two...
BookingDocket::set_passtel($row['passengertel']);
BookingDocket::set_returndate($row['returndate']);

//create a scope of variables to prepare and return
$booking_date = BookingDocket::get_bookref();
//query is already set, omitting it.
//making assumptions about data I cannot see
$journey = BookingDocket::get_journey();
$pass_tel = BookingDocket::get_tel();
$email = BookingDocket::get_email();

//formatting here is for example and not live usage
return json_encode(array("date" => $booking_data, 
                         "query" => $query, 
                         "journey" => $journey, 
                         "pass_tel" => $pass_tel, 
                         "email" => $email
                         )
                  ); 
```

所以现在我们返回一个 JSON 编码的数组，让我们回到 $.post 方法，看看我们现在能做什么。

```
//I prefer to write things out with $.ajax
$.ajax({
  url: 'booking-dialog.php',
  data: {'rowdata' : brData },
  dataType: 'json', //this is what we expect our returned data as
  success: function(data){
    //empty our dialog so we don't end up with duplicate content
    $('.cp-booking-info').empty();
    //we have told the browser to expect JSON back, no need to do any parsing
    //the date
    $('.cp-booking-info').append('<p class="pno-margin">Booking Date: '+data.date+'</p>');
    //the query
    $('.cp-booking-info').append('<p class="pno-margin">Query: '+data.query+'</p>');
    //the journey
    $('.cp-booking-info').append('<p class="pno-margin">Journey: '+data.journey+'</p>');
    //thepassenger tel
    $('.cp-booking-info').append('<p class="pno-margin">Passenger Tel: '+data.pass_tel+'</p>');
    //the email
    $('.cp-booking-info').append('<p class="pno-margin">Email: '+data.email+'</p>');

    //now let's manipulate our dialog and open it.
    $("#cp-bookings-dialog").dialog({ 
      show: "slide", 
      hide: 'slide', 
      height: 625, 
      width: 733, 
      title: 'Booking Reference: - '+ brData
    });
  }

}); 
```

这是我想象的系统如何工作的最快模型。

# date - 如何在批处理文件中将月份变量增加 1 步？

> ID：12007393
> 
> 赞同：0
> 
> 时间：2012-08-17T14:07:40.403
> 
> 标签：date, batch-file

我写了一个相当小的批处理文件，它为我做了一些日期计算。

但是，我偶然发现了一个小问题：

每当我尝试增加月份 var 时，它只是将 var 设置为所需的增量。代码：

```
: How much time should we add? Default is 1 month
SET timeadd=1

: Set the date variables to build needed format
SET YYYY=%date:~-4%
SET MM=%date:~3,2%
SET DD=%date:~0,2%

if not %MM%==12 (
    SET /A MM=MM+timeadd
    SET changed=1
) 
```

声明后，月份 var 今天（8 月 17 日）将是“08”。

然而，在 if 块之后，这个 var 将变为“1”。

我可以猜测这是一个转换问题（日期是一个字符串，时间加是一个整数），但是我真的不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:45:53.743

正如评论中所说，这是因为前导`0`表示八进制表示法（就像前导`0x`表示十六进制表示法一样），但是八进制编号系统从 01 运行到 07，所以没有八进制 08 或 09，而是 010和011。

十进制值 8 == 八进制值 010

十进制值 9 == 八进制值 011

要自己验证这一点，请在命令提示符处键入

```
c:\>set /a 010
c:\>set /a 011 
```

您的输出将是：

```
8
9 
```

========================================

我对此的解决方案是简单地检查任何前导`0`并删除它们。

```
if "%MM:~0,1%"=="0" set MM=%MM:~-1% 
```

做我需要做的任何数学魔术......

```
set /a MM=%MM% + 1 
```

...然后`0`在必要时重新添加前导。

```
set MM=0%MM%
set MM=%MM:~-2% 
```

请记住确保它不超过 12（在这种情况下）或低于 1。

# c# - vb6 到 C# 的转换。水晶报表 - 参数字段

> ID：12007396
> 
> 赞同：0
> 
> 时间：2012-08-17T14:07:50.183
> 
> 标签：c#, visual-studio-2010, vb6, crystal-reports, vb6-migration

我在 vb6 中有以下代码，我无法弄清楚如何将其转换为 C#（Visual Studio 2010）。

VB6 -

```
 crtPanelStudyAuditTrail.ParameterFields(0) = "GA_PANEL;" & Trim(txtPanelStudy) & ";True"
    crtPanelStudyAuditTrail.ParameterFields(1) = "GA_PANEL_LEG;" & Trim(txtPanelLeg) & ";True" 
```

C# 转换尝试-

```
 crtrptPanelStudyAuditTrail.DataDefinition.ParameterFields["GA_PANEL"].PromptText = "GA_PANEL;" + txtPanelStudy.ToString().Trim() + ";True";
    crtrptPanelStudyAuditTrail.DataDefinition.ParameterFields["GA_PANEL_LEG"].PromptText = "GA_PANEL_LEG;" + txtPanelLeg.ToString().Trim() + ";True"; 
```

每次打印时，我都会收到“缺少参数值错误”

打印部分是正确的，因为我有其他代码在其中转换公式字段并且打印正常。

关于如何转换参数字段行的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:11:01.067

目前您没有设置参数值，您正在设置提示文本。有多种以编程方式设置参数值的方法，这取决于您如何绑定报表、数据源等。下面我说明了 2 个选项，但它实际上取决于您的设置，哪个适合您。

```
// Assuming "GA_PANEL" is the name of your parameter this is the simplest way to set it but depends on how you are binding the report
crtrptPanelStudyAuditTrail.SetParameterValue("GA_PANEL", "GA_PANEL;" + txtPanelStudy.ToString().Trim() + ";True");   

// Second method gives more flexibility in the types of parameters such as date, discrete, multi, etc.
// Create a parameter value
var paramVal = new ParameterDiscreteValue();
paramVal.Value = "GA_PANEL;" + txtPanelStudy.ToString().Trim() + ";True");

// Clear the current and default values from your parameter
crtrptPanelStudyAuditTrail.ParameterFields["GA_PANEL"].CurrentValues.Clear();
crtrptPanelStudyAuditTrail.ParameterFields["GA_PANEL"].DefaultValues.Clear();

// Add your values to the parameter value collection
crtrptPanelStudyAuditTrail.ParameterFields["GA_PANEL"].CurrentValues.Add(paramVal);
crtrptPanelStudyAuditTrail.ParameterFields["GA_PANEL"].HasCurrentValue = true;

// Refresh your report 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:11:03.890

我对 VB6 了解不多，对 Crystal 也一无所知，但 C# 中的等效代码应如下所示：

crtrptPanelStudyAuditTrail.ParameterFields[0] = @"GA_PANEL;" + txtPanelStudy.Trim() + @";真";
crtrptPanelStudyAuditTrail.ParameterFields[1] = @"GA_PANEL_LEG;" + txtPanelLeg.Trim() + @";真";

您不需要转换 txtPanelStudy 和 txtPanelLeg，因为它们已经是字符串。

# .net - 匹配正则表达式中的字符（包括换行符），直到找到下一个匹配项

> ID：12007398
> 
> 赞同：0
> 
> 时间：2012-08-17T14:07:54.653
> 
> 标签：.net, regex

我正在尝试使用正则表达式解析日志文件，问题是一旦我打开 SingleLine 模式以便我可以包含多行错误，那么未来的匹配项将包含在第一个匹配项中而不是它们自己的匹配项中。

为了更好地解释，这里是一个日志文件的例子：

> 错误 16-08 11:09:59,015 - sdsdfsdfsdfsdfsdf
> 
> 错误 16-08 11:09:59,015 - sdsdfsdfsdfsdfsdf
> 
> 测试
> 
> 错误 16-08 11:09:59,015 - sdsdfsdfsdfsdfsdf
> 
> 错误 16-08 11:09:59,015 - sdsdfsdfsdfsdfsdf
> 
> 信息 16-08 11:09:59,015 - sdsdfsdfsdfsdfsdf
> 
> 测试 2
> 
> 错误 16-08 11:09:59,015 - sdsdfsdfsdfsdfsdf
> 
> 错误 16-08 11:09:59,015 – sdsdfsdfsdfsdfsdf

我正在使用以下正则表达式：

```
.{5} \d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3} - .+ 
```

这正确匹配每一行，但不包括已运行到新行的消息部分。但是当我打开单行模式时，只有一个匹配项（第一个），并且所有其他条目都包含在其中。

谁能指出我正确的方向？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:47:03.200

基本上这个解决方案背后的想法是告诉你的正则表达式不是要包含什么，而是要*在哪里停止*。

此正则表达式使用积极的前瞻来非贪婪地停止在您的正则表达式的下一次出现（或在整个字符串的末尾）

```
.{5} \d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3} - .+?
     (?=(.{5} \d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3})|\z) 
```

这还包括作为先前错误消息一部分的 INFO 行。这听起来有点错误，因此，如果您想将 INFO 行视为单个错误消息（不是前一个错误消息的一部分），您可以考虑使用此正则表达式

```
.{4,5} \d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3} - .+?
(?=.{4,5} \d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:56:24.670

从您的示例文本文件中看起来可能有一些空行。如果没关系，你应该可以使用这个正则表达式：

```
^(?:ERROR) \d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3} - (?:(?!ERROR|INFO)(?:[a-z0-9A-Z ,:\-\t]*)\n)+ 
```

如果这只是一个错误并且不需要空行，请将 last 替换`+`为`*`：

```
^(?:ERROR) \d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3} - (?:(?!ERROR|INFO)(?:[a-z0-9A-Z ,:\-\t]*)\n)* 
```

这与该`INFO`行不匹配，但您写道您只需要错误。如果还有其他一些消息格式（`WARNING`可能是这样），您必须将它们包含在此部分中：`(?!ERROR|INFO)`

由于您的正则表达式中没有匹配的组，因此我使用了`(?:...)`不匹配的变体。

# database - 在 Crystal Reports 中单行显示父子项

> ID：12007400
> 
> 赞同：1
> 
> 时间：2012-08-17T14:08:04.850
> 
> 标签：database, crystal-reports, crosstab, crystal-reports-2010

Crystal Reports 是否可以实现以下操作？

表 A

```
ID Boo  Far
1  Test 15
2  Tast 24 
```

表 B

```
Foo Bar ParentID
A   1   1
B   2   1
C   3   1
A   17  2
c   18  2 
```

我希望我的报告看起来像

```
ID Boo  Far A  B  C 
1  Test 15  1  2  3
2  Tast 24  17    18 
```

不使用交叉表？因为使用交叉表，我得到了标题 A、B、C，但无法显示 ID、Boo 和 Far 的标题。此外，我可以对每条记录的 A、B 和 C 进行行汇总，但我无法为所有记录创建所有 B 的列和。

我已经尝试过创建一个不错的分组，但这给了我这样的结果：

```
ID Boo  Far 
1  Test 15  
            Bar
            1
            2
            3 
```

这当然看起来很正常。但我（或者，客户......）不希望这样。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:55:41.273

在 {Table A.ID} 上创建一个组 将表 A 字段添加到组头部分；抑制组页脚部分

创建三个公式：

```
// {@a}
If {Table B.Foo}='A' Then {Table B.Bar}
Else 0

// {@b}
If {Table B.Foo}='B' Then {Table B.Bar}
Else 0

// {@c}
If {Table B.Foo}='C' Then {Table B.Bar}
Else 0 
```

添加到详细信息部分。隐藏详细信息部分

在每个公式上插入一个汇总字段。移动到组头部分；与列标题对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T16:22:33.533

您可以使用变量来跟踪表 A 中每个条目的 A、B、C 值。

1.  保留您已为 {TableA.ID} 设置的分组。将要显示的所有项目移动到组页脚中。
2.  在（现在为空的）组标题中，初始化/重新调整大小为 3 的数组。
3.  在（现在为空）详细信息部分中，有条件地更新数组，使得索引 1 包含“A”的值，2 包含“B”的值，等等。像这样：

    ```
    whileprintingrecords;
    numbervar array myArray;
    select {TableB.Foo}
     case 'A' : myArray[1]:={tableB.Bar}
     case 'B' : myArray[2]:={tableB.Bar}
     case 'C' : myArray[3]:={tableB.Bar}
     default : 0 //handle error case
    ```

4.  禁止显示组标题和详细信息部分，以便它们不会显示在您的报告中。
5.  现在，在组页脚中，您应该可以访问 tableB 中针对 tableA 中每个父记录的 A、B、C 的所有对应值。

注意：您的所有公式都需要使用`whileprintingrecords;`才能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:39:16.940

我会使用交叉表对象，但我不确定您的数据到底是什么样子。

讲话：

> 无法显示 ID、Boo 和 Far 的标题。

您可以将它们组合成一个新列以显示为行标题。它们不会像 A、B 和 C 那样显示为单独的列，而只是一个用于元组的列。

讲话：

> 我无法为所有记录创建所有 B 的列总和。

我引入了一个新行，最后排序，其中包含数据源中每个组的所有总和。

# html - 链接按钮的宽度在 div 菜单之外有效，但在内部无效？

> ID：12007403
> 
> 赞同：0
> 
> 时间：2012-08-17T14:08:12.983
> 
> 标签：html, css, drop-down-menu, hyperlink, width

请注意这个小提琴：http: [//jsfiddle.net/8nrPm/3/](http://jsfiddle.net/8nrPm/3/)

我通过添加以下内容设置了*动画*按钮的宽度：

```
.manimation a{
    width: 360px;text-align:center;border-bottom:9px solid #43cf61
} 
```

工作正常。现在，将鼠标悬停在***MORE***按钮上，那里有两个按钮，使用相同的技术设置宽度对这些按钮没有任何影响。

正如您在我的样式表中看到的那样，我通过添加以下内容为*Games*按钮设置了宽度：

```
.mgames a{
    width: 150px;text-align:center;font-style:normal;border-bottom:9px solid #e34328
} 
```

但是宽度没有影响。**为什么？如何设置它的宽度？**

我建议忽略小提琴[http://jsfiddle.net/8nrPm/3/](http://jsfiddle.net/8nrPm/3/)因为我确信一定有一些东西阻止了宽度的工作。另外，我尝试将其添加`!important`到其中，但没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:18:08.810

**锚**是一个`inline`元素。内联元素不是 take `width, height, vertical margin & padding`。像这样写：

```
.megadiv a{
 display:block;
} 
```

# apache - Vagrant 专员 shell 命令抱怨 sudo

> ID：12007404
> 
> 赞同：2
> 
> 时间：2012-08-17T14:08:16.297
> 
> 标签：apache, centos, vagrant

所以我有一个 CentOS 6.2 虚拟机，我正在设置它并想运行一个 shell 命令。机器完全启动后，我正在尝试启动 apache 和 mysql。vagrant 用户在 sudoers 文件中，我可以通过“vagrant ssh”执行启动 ssh 的 sudo 命令。

当我将 shell 命令添加到 vagrant 文件时，它会抱怨 vagrant 用户不在 sudoers 文件中。

有谁知道为什么会发生这种情况？

我知道我可以让服务器自动启动 apache，但我需要在安装共享文件夹后启动它。我正在使用 /vagrant 文件夹来存储虚拟主机和 apache 服务的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T21:01:22.400

Vagrant 不仅需要在 sudores 文件中，而且必须配置为无需密码即可使用。像这样

无业游民 ALL=(ALL) NOPASSWD: ALL

见这里： [https ://docs.vagrantup.com/v2/boxes/base.html](https://docs.vagrantup.com/v2/boxes/base.html)

向下滚动到无密码 sudo 部分

希望这可以帮助！

# python - 将 DataFrame 除以第一行

> ID：12007406
> 
> 赞同：13
> 
> 时间：2012-08-17T14:08:18.307
> 
> 标签：python, pandas

我已经检查了文档。我不明白索引 Pandas DataFrame 的方法。

我想将股票价格的 DataFrame 除以它们各自的初始值，以将不同的股票索引为 100。我想比较它们的表现。DataFrame 如下所示：

```
>>> IndexPrices
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 157 entries, 1999-12-31 00:00:00 to 2012-12-31 00:00:00
Freq: M
Data columns:
MSCI WORLD :G U$                        148  non-null values
S&P 500 COMPOSITE                       148  non-null values
DAX 30 PERFORMANCE                      148  non-null values
RUSSELL 2000                            148  non-null values
FTSE 100                                148  non-null values
US Treasury Bond Yields 30 Year Bond    148  non-null values
dtypes: float64(6) 
```

我有这样的东西，但它没有让我到任何地方。

```
IndexPrices.divide(IndexPrices[0:1]) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-17T14:20:05.537

```
In [193]: df
Out[193]:
   A  B  C  D
a  1  8  9  1
b  5  4  3  6
c  4  6  1  3
d  1  0  2  9

In [194]: df.divide(df.ix[0] / 100)
Out[194]:
     A    B           C    D
a  100  100  100.000000  100
b  500   50   33.333333  600
c  400   75   11.111111  300
d  100    0   22.222222  900 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-09-07T17:28:51.857

对于新版本的熊猫

```
In [1]: df
Out[1]:
                   SPY      Google        Gold        Xom
Date
2008-12-31   90.239998  153.250580   86.519997  79.830002
2009-01-02   92.959999  160.060059   86.230003  81.639999
2009-01-05   92.849998  163.412491   84.480003  81.629997
2009-01-06   93.470001  166.406265   85.129997  80.300003
2009-01-07   90.669998  160.403763   82.750000  78.250000
...                ...         ...         ...        ...
2012-12-24  142.350006  353.425262  160.619995  86.919998
2012-12-26  141.750000  353.111450  160.779999  87.070000
2012-12-27  141.559998  351.826263  161.160004  86.860001
2012-12-28  140.029999  348.697998  160.539993  85.099998
2012-12-31  142.410004  352.369232  162.020004  86.550003

[1007 rows x 4 columns]

In [2]: df.iloc[0]
Out[2]:
SPY        90.239998
Google    153.250580
Gold       86.519997
Xom        79.830002
Name: 2008-12-31 00:00:00, dtype: float64

In [3]: df.div(df.iloc[0])
Out[3]:
                 SPY    Google      Gold       Xom
Date
2008-12-31  1.000000  1.000000  1.000000  1.000000
2009-01-02  1.030142  1.044434  0.996648  1.022673
2009-01-05  1.028923  1.066309  0.976422  1.022548
2009-01-06  1.035793  1.085844  0.983934  1.005888
2009-01-07  1.004765  1.046676  0.956426  0.980208
...              ...       ...       ...       ...
2012-12-24  1.577460  2.306192  1.856449  1.088814
2012-12-26  1.570811  2.304144  1.858299  1.090693
2012-12-27  1.568706  2.295758  1.862691  1.088062
2012-12-28  1.551751  2.275345  1.855525  1.066015
2012-12-31  1.578125  2.299301  1.872631  1.084179

[1007 rows x 4 columns] 
```

# jquery - 在 iPhone 中禁用数字键盘上的解析

> ID：12007407
> 
> 赞同：2
> 
> 时间：2012-08-17T14:08:22.290
> 
> 标签：jquery, iphone, html, jquery-mobile, keyboard

我需要一个同时具有数字和 - 符号的键盘，因为缺少 input="tel" 我想我会使用 input="number" 代替，但是每当我完成输入时，它会将数字解析为另一种格式，例如：“19880522-3243”变为“19 880 522”。

有谁知道我如何获得带有“-”的数字键盘或禁用使用 input="number" 发生的解析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:11:18.627

正如 jQuery Mobile[文档](http://jquerymobile.com/test/docs/forms/textinputs/)中指定的那样。引用该网站：

> 在 jQuery Mobile 中，您可以使用现有的和新的 HTML5 输入类型，例如密码、电子邮件、电话、号码等。某些类型值在浏览器中的呈现方式不同。例如，Chrome 将范围输入呈现为滑块。jQuery Mobile 通过将类型动态更改为文本来标准化范围和搜索的外观。您可以使用页面插件的选项配置哪些输入类型降级为文本。
> 
> 如果在移动设备上使用这些更具体的输入类型，那么使用这些更具体的输入类型的一个主要优点是，提供了加速数据输入的专用键盘来代替标准文本键盘。在移动设备上尝试以下输入，以查看在各种平台上显示自定义键盘。

虽然文档中没有明确说明，但检查示例的来源表明可以使用`type=""`属性定义输入类型。试一试：

`<input type="tel" name="tel" id="tel" value="" />`

# hadoop - 如何在stand hadoop distritbuion 0.20.0中并行运行hadoop作业

> ID：12007412
> 
> 赞同：2
> 
> 时间：2012-08-17T14:08:52.817
> 
> 标签：hadoop, scheduling, jobs

头疼了好久，目前我的hadoop集群是这样的，我有40个salve节点要运行，每个slave节点我配置25个mapper 10个reducer，所以大概可以启动40*25=1000个mapper和400个reducer同时。好的，现在我有以下工作：</p>

job1：我配置运行 5 个映射器和 5 个减速器 job2：我配置运行 20 个映射器和 10 个减速器 job3：我配置运行 975 个映射器和 385 个减速器

假设我使用默认的 FIFO 作业调度，如果我连续提交 3 个映射器，这 3 个作业是否可以同时运行？以便最大限度地利用集群？

目前，我测试在mapper阶段，提交3个作业后似乎可以启动1000个mapper，但是在reducer阶段，它变得非常非常慢，所以我等待了很长时间，以上作业都没有完成，似乎他们挂在减速器阶段。

我不是很明白这其中的内在原因，谁能帮我解决这个问题，以便我可以提交工作并睡觉，然后明天早上我看到我所有的工作都按订单完成了？我需要使用公平的调度来使它工作吗？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:11:18.470

给出解决方案有点困难 - 但我会尝试给出找到解决方案的方向。1.如果集群中有足够的reduce槽——可能你的问题与并行作业执行无关。至少我一开始不会怀疑。
2\. 我建议使用 Fair Scheduler - 它是专门为并行执行和资源共享而构建的。
3\. 我建议单独测试每个作业，并且只有在每个作业运行良好之后 - 开始并行运行。
4\. 减速慢可能有很多原因，但我会检查以下（我所知道的）：
a）在映射器和减速器之间传递（并序列化）大量数据。查看文件系统字节写入计数器以识别它。
b) 存在严重的数据倾斜，大量数据来到单个reducer。

# c++ - C ++中的类与结构

> ID：12007413
> 
> 赞同：-3
> 
> 时间：2012-08-17T14:08:54.507
> 
> 标签：c++

> **可能重复：**
> [C++中的struct和class有什么区别](https://stackoverflow.com/questions/92859/what-are-the-differences-between-struct-and-class-in-c)

关键字 class 和 struct 在 C++ 中几乎是等价的，结构和类的唯一区别是结构成员默认具有公共访问权限，而类成员默认具有私有访问权限。

当一个类的所有成员变量都必须具有公共访问权限时，使用关键字 struct 而不是 class 是否有任何优势（内存使用、速度、优化等）。

编辑：

感谢大家和 SRN 指出我问的另一个链接是否知道任何内存使用情况、速度差异。在给出负面评价之前，请仔细阅读问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:10:05.377

不，您命名它：唯一的区别是默认访问级别。

例如，您可以前向声明 a `struct`，然后将其声明为 a `class`，反之亦然：

```
struct FooObject;

...

class FooObject { int x; }; // OK 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:10:29.853

不，它只是出于语义目的而受到某些人的青睐。

# jpa - 如何通过 JPA 存储树结构？

> ID：12007415
> 
> 赞同：2
> 
> 时间：2012-08-17T14:09:17.920
> 
> 标签：jpa, tree, unique-constraint, composite-primary-key

我想通过 JPA 存储树结构。该模型由两个实体类组成：`Tree`和`Vertex`。类`Vertex`基本上只包含顶点的名称，类`Tree`是一个名为的映射`parents`，它存储每个子顶点的父顶点（`child -> parent`）。

这种结构使我可以简单快速地访问给定子顶点是否具有父顶点以及实际父顶点（如果有）的信息。

我使用以下注释来指定 JPA（在我的例子中为 EclipseLink）应如何存储关系：

```
@MapKeyClass(Vertex.class)
@MapKeyJoinColumn(name = "child_id", nullable = false)
@OneToMany(targetEntity = Vertex.class, cascade = CascadeType.ALL)
@JoinTable(name = "bug_492_tree_parents", inverseJoinColumns = { @JoinColumn(name = "parent_id") })
private final Map<Vertex, Vertex> parents = Maps.newHashMap(); 
```

不幸的是，使用上面的映射，我无法存储具有相同父级的两个子顶点，例如`V = {parent, child1, child2}`and `E = {{child1, parent}, {child2, parent}}`（因此，`child1 -> parent`and `child2 -> parent`），因为我得到了完整性约束违规：

```
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '3-4' for key 'PRIMARY'
Error Code: 1062
Call: INSERT INTO bug_492_tree_parents (parent_id, tree_id, child_id) VALUES (?, ?, ?) 
```

这是由 JPA / EclipseLink 如何指定连接表中的主键引起的：

![主键定义不正确](../Images/64416d42de2dd8efd0eb1566c4706479.png)

不幸的是，EclipseLink 选择了复合键`(tree_id,parent_id)`作为主键。使用这个主键，不可能存储任何包含两个不同子顶点且父顶点相同的树，如上述简单示例中所示。

只有在手动修复主键（在 MySQL 数据库模式中）之后，`(tree_id,child_id)`我才能存储该树：

![固定主键](../Images/e65b4c8937b62393bbc6ec7fe54ef401.png)

我尝试了许多不同的映射；但是，我总是遇到一些（其他）问题。

最后，我的问题是：我应该或可以如何通过 JPA 存储那个简单的树结构？我必须选择不同的映射吗？我必须改变我的模型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T07:23:09.220

我不认为 JPA 可以做你想做的事情。

当将 Map 放入时，一个名为 E JPA 的实体希望您希望使用 V 的某个属性作为地图的 K，并在 E 和 V 之间而不是在 K 和 V 之间建立 OneToMany 关系。

最简单的解决方案是忘记您的 Map 并将 a`List<Vertex>`放入仅包含顶部节点的类中，并将 a`List<Vertex>`放入 Vertex 类中以用于顶点之间的子父关系。

如果您想要一个更像现在的结构，我认为您将不得不引入一个额外的实体，例如：

```
@Entity
VertexRelation {
    private Vertex parent;
    private Vertex child;
    ...
} 
```

然后你的 Map 可以变成 a`Map<Vertex, VertexRelation>`并且你可以`@MapKey(name="parent")`用来告诉 JPA 你想使用 parent 作为地图的键。

注意：使用附加实体只是一个想法，我自己从未尝试过。我总是使用类似于我对树木的第一个建议的东西。

# ruby-on-rails - 通过 HTTPS 将使用 Faraday 的 Rails 应用程序连接到 Java Web 服务

> ID：12007416
> 
> 赞同：1
> 
> 时间：2012-08-17T14:09:23.583
> 
> 标签：ruby-on-rails, ssl, oauth-2.0, faraday

首先，我将说明我正在尝试做的事情：我有一个用于开发/测试目的的自签名证书，供 Rails 应用程序需要向其发出请求的 Clojure/Jetty API 使用。我在 Clojure 中使用 clj-http 连接到它没有任何困难，它包装了 Apache HttpClient，并且可以传递 keystore、key-password、truststore 和 trust-password 的设置。我正在*尝试什么*做的是从本地运行的 Rails 应用程序向这个安全 API 发出 ssl 请求，无论这样做是什么好方法。

在解释了我要做什么之后，在我看来，实现这一点的最直接方法是将这些设置插入法拉第（顺便说一下，我需要使用法拉第，因为那是 oauth2 库使用的库发出 http 请求），但不出所料，这个 Ruby 库不支持绝对是 JVM 生态系统一部分的东西（而且这不是 JRuby 堆栈）。其配置设置包括 client_cert、client_key、c​​a_file、ca_path 和 cert_store。

非常感谢任何想法/建议！

# ajax - Wordpress ajax 不能让它工作总是返回 0

> ID：12007417
> 
> 赞同：0
> 
> 时间：2012-08-17T14:09:25.253
> 
> 标签：ajax, wordpress

我试图让一个 ajax 函数与 wordpress 一起工作，并且总是得到默认结果。我有functions.php（除了其他功能）

```
add_action('wp_ajax_count_results_cal', 'count_results');
add_action('wp_ajax_nopriv_count_results_cal', 'count_results');

function count_results(){
      echo 'test';
      die();
}

function my_theme_scripts() {
  wp_enqueue_script( 'jquery' );
  wp_enqueue_script( 'theme-plugins',get_template_directory_uri() . '/js/plugins.js' ,             array( 'jquery','jquery-ui-draggable','jquery-ui-dialog' ) );
  wp_enqueue_script( 'google-map','http://maps.google.com/maps/api/js?sensor=true',     array( 'jquery','jquery-ui-draggable','jquery-ui-dialog' ) );
  wp_enqueue_script( 'theme-script', get_template_directory_uri() . '/js/script.js', array( 'jquery','jquery-ui-draggable','jquery-ui-dialog' ) );
  wp_enqueue_script( 'ajax', get_template_directory_uri() . '/js/ajax.js', array( 'jquery') );

}    

add_action('init', 'my_theme_scripts'); 
```

在我的 ajax.js 文件中

```
jQuery(document).ready(function ($) {

$('#manufacturer,#make_date,#fuel_type,#transmission,#price_from,#price_to').on({
    change: function(){

        $.ajax({
            type: 'POST',
            url: '/wp-admin/admin-ajax.php',
        data: {
            action: 'count_results_cal',
            manufacturer : $("#manufacturer").val(),
            year : $("#make_date").val(),
            fuel : $("#fuel_type").val(),
            transmission : $("#transmission").val(),
            price_from: $("#price_from").val(),
            price_to : $("#price_to").val(),
            body_type : $("#body_type").val(),
            vat : $("#vat").val()
        },
        success: function(data, textStatus, XMLHttpRequest){
            $('#offers_found span').html(data);
        },
        error: function(MLHttpRequest, textStatus, errorThrown){
            alert(errorThrown);
        }
        });
}}); 
```

}); 我已经尝试了我能想到的一切，但没有结果。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:05:38.660

通过将 url 更改为完整地址 (http://.../) 来解决此问题

# ios - 在 iOS 中，如何在自定义动画期间延迟自动旋转（segue）

> ID：12007418
> 
> 赞同：4
> 
> 时间：2012-08-17T14:09:27.930
> 
> 标签：ios, cocoa-touch, orientation

在 iOS（版本 5 很好）中，我有一个自定义动画来翻转和缩放从一个 UIViewController 过渡到另一个 UIViewController 的图像：

```
TCFlipZoomSubviewSegue segue=[[TCFlipZoomSubviewSegue alloc] initWithIdentifier:@"SegueToMenuTable" source:self.iViewController destination:self.mViewController];
[segue perform]; 
```

在执行方法中我有：

```
[UIView animateWithDuration:3.75f
                      delay:0.0f
                    options:UIViewAnimationOptionAllowAnimatedContent
                 animations:^{
                   self.subviewTransformView.layer.transform=transform;
                 } completion:^(BOOL finished) {
                   [destination.parentViewController.view bringSubviewToFront:destination.view];
                 } 
```

一切正常，但是如果我在动画期间旋转设备，则会出现各种问题（布局混乱）。我想要的是在方向事件发生之前完成动画 - 这是 iPhone 中的标准行为 - 例如尝试在单击收件箱后立即旋转 MAIL 应用程序 - 它完成幻灯片转换然后旋转。Stocks 应用程序等也是如此。如果我使用标准的 Push 动画等，就会发生这种情况。但我有自己的动画要做。

那么他们是怎么做到的呢？

如何防止（即延迟或阻止）方向更改，直到我的动画完成？我可以通过在 shouldAutorotateToInterfaceOrientation: 中说 NO 来轻松停止更改：当我制作动画但之后我需要它来进行定向。我可以调用 attemptRotationToDeviceOrientation 但肯定有更好的方法 - segue 本身应该能够在不被中断的情况下完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T21:14:01.117

我认为您提到的方式可能是您必须这样做的方式 - 即返回 NO 到 shouldAutorotateToInterfaceOrientation:，然后在您的动画完成时调用尝试RotationToDeviceOrientation。如果用户在动画正在进行时尝试旋转，您可能需要设置某种标志，因此您会知道是否应该在动画结束时调用 attemptRotationToDeviceOrientation。

# java - 在Mollweide投影中获取我的世界地图中一个点的经度纬度

> ID：12007423
> 
> 赞同：6
> 
> 时间：2012-08-17T14:09:45.520
> 
> 标签：java, map, projection

我现在搜索了大约一天，但在 Javacode 中没有找到任何关于我的问题的示例。

我有一个大小为 2000*1400 像素的世界地图，带有“Mollweide”投影。如何找出地图中点 (500,300) 的经度和纬度？我想用Java对此进行编码。

我尝试使用“Java Map Projection Library”来做到这一点：

```
Point2D.Double pointonmap = null;
Point2D.Double latlon = null;
MolleweideProjection molproj=new MolleweideProjection();

pointonmap = new Point2D.Double (1400,1000);  

latlon=molproj.inverseTransform(pointonmap,new Point2D.Double ());

System.out.println("latlon: " + latlon.getX() + ", " + latlon.getY()); 
```

有人可以帮我吗？代码示例或提示。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-03-12T04:35:30.263

维基百科有你需要[的大部分信息：](https://en.wikipedia.org/wiki/Mollweide_projection#Mathematical_formulation)

[![在此处输入图像描述](../Images/084eff201f59c813b242f37fe59a0bae.png)](https://i.stack.imgur.com/0LB0N.gif)

像往常一样，这些公式假设了一些事情。它们以投影尺寸说话，该尺寸小于组件。[0,0] 位于中心，而不是左上角。Y 坐标上升而不是下降。结果是半径而不是度数。解决这些问题，它们将为您工作。

由于您没有提供链接，我假设您使用的是[GitHub 上](https://github.com/OSUCartography/JMapProjLib)的 Java 地图投影库。没有文档且时间有限，我无法 `inverseTransform`很好地理解来修复您的代码；但捆绑的 MapComponent 更易于编码：

```
map.addMouseListener( new MouseAdapter() { @Override public void mouseClicked( MouseEvent e ) {

   double x = e.getX() - map.getWidth() / 2, // Mouse X with [0,0] at centre.
          y = e.getY() - map.getHeight() / 2, // Mouse Y with [0,0] at centre.
          // Max Y of projected map, in pixel with [0,0] at centre.
          maxY = map.getMapExtension().getMaxY() *  map.getScaleToShowAll(), 
          sqrt2 = Math.sqrt( 2 ), // Can be optimised away, but let's be faithful.
          R = maxY / sqrt2, // Radius of projection, in pixel.
          theta = Math.asin( y / ( R * sqrt2 ) );
   int    delta_long = -lon0Slider.getValue(); // Longtitude shift from -180 to 180.

          // Find lat long in radius and converts to degree.
   double latInRad  = Math.asin( -( 2 * theta + Math.sin( 2 * theta ) ) / Math.PI ),
          latitude  = Math.toDegrees( latInRad ),
          longInRad = Math.PI * x / ( 2 * R * sqrt2 * Math.cos( theta ) ),
          longitude = Math.toDegrees( longInRad ) + delta_long;

   System.out.println( "Lat: " + latitude + ", Long: " + longitude );
} 
```

您可以将此代码粘贴到`ch.ethz.karto.gui.ProjectionSelectionPanel`. IDE 应该会报告 map 的两个方法是私有的，您需要先将它们更改为 public（或使用反射）。然后启动它，选择 Mollweide，单击地球并观察控制台。随意调整窗口大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-12T03:35:32.223

此答案使用来自英语维基百科关于[Mollweide 投影](https://en.wikipedia.org/wiki/Mollweide_projection "我是鼠标悬停文本！ 这不是很酷吗？")的条目的信息。我已经从那里逐字转录了这个公式。

简短的答案，因此您可以编写自己的代码：

获取地图的半径，r：
projectionWidth /(2 * √2)

得到theta，点在地图上的角度：
反正弦(y / (r * √2))

注意：反正弦是正弦的倒数。在 java 中使用 Math.asin(a)

获取纬度：
反正弦((2 * theta + sine(2 * theta)) / PI)

获取经度：
PI * x / (2 * R * √2 * cosine(theta)) + 中央经线。

或者你可以copyPasta这个。
它不是很有效；x 和 y 是双精度型，因为懒得写 typecast 避免缩小
no-setters no-getters all-vars public
all-world-one-love Dr. Bronner 的电视晚餐会为您解决问题
和
enoj

```
public class MolleweidePoint
{
    public double x, y, latitude, longitude;

    public MolleweidePoint(double projectionWidth, double x, double y)
    {
        double rootTwo = Math.sqrt(2);
        double r = projectionWidth / 2 / rootTwo;
        double theta = Math.asin(y / r / rootTwo);

        this.x = x;
        this.y = y;
        longitude = Math.PI * x / 2 / r / rootTwo / Math.cos(theta);
        latitude = Math.asin(2 * theta + Math.sin(2 * theta) / Math.PI);
    }
} 
```

在调用构造函数之后

```
MolleweidePoint ted = new MolleweidePoint(projection.width, 300, 500) 
```

`ted.longitude`您可以从和获得纬度和经度`ted.latitude`。此外，可能必须根据中央经线在投影上的位置调整经度。

# python - 显示进口商的详细信息

> ID：12007428
> 
> 赞同：6
> 
> 时间：2012-08-17T14:09:58.647
> 
> 标签：python, import

在 Django 中，我有一个发出折旧警告的包（django.views.generic.simple）。*如果此警告描述了从*何处进行导入，这将很有用，因此编码人员可以进入并更改文件，而无需逐步执行代码来查找它。

所以一般情况是

```
#file1.py
import file2.py

#file2.py
import warnings
warnings.warn(
'Package deprecated: imported from %s' % __importer__,
DeprecationWarning
) 
```

其中 __importer__ 是包含“file1.py”或一些此类引用的虚构属性。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T14:15:05.867

是的，这是通过使用`stacklevel`参数来完成的`warnings.warn`。有关更多信息，请参阅[文档](http://docs.python.org/library/warnings.html#warnings.warn)中的示例。

# jquery - 如何使用带有图像状态的 jQuery 可折叠 div 以及在页面加载时打开的 div？

> ID：12007430
> 
> 赞同：0
> 
> 时间：2012-08-17T14:10:05.490
> 
> 标签：jquery, image, html, expand, collapse

我是一名平面设计师，我一直在浏览 SO 和其他网站以找到解决我的问题的方法，但我找不到我想要的答案。

我有这个：

```
div.text 
```

我想在页面加载时打开，使用标题上的小箭头将状态标识为打开。我已经设法使用图像来识别状态，但我无法让它在页面加载时打开。

所以这是我的结构：

```
<div id="textcontent" class="width_fix">
    <p class="link"><a href="#" title"Revenir en haut de la page">haut de la page</a></p>
    <div class="heading">BIENVENUE
            <div class="fleche"></div>
    </div>
        <div class="text">
            <h1>L’INSTITUT SAO</h1>
            <br />Confiez votre beauté et votre bien-être aux soins chez Institut São. Pour le visage ou pour le corps, nos programmes professionnels répondent précisément à vos attentes et aux besoins de votre peau. Le résultat : une extraordinaire sensation de détente, une mise en beauté parfaite et un confort absolu.<br /><br />Offrez à votre beauté des soins qui apaisent les sens ! Visage ou corps, soins solaires ou maquillage, les produits à votre disposition transforment votre rituel de beauté en une expérience sans pareille.<br /><br />Modelages bienfaisants ou soins « bien être », programmes anti-cellulite ou cures intensives : les soins pour le corps vous font vivre une extraordinaire parenthèse de détente.<br /><br />À bientôt
        </div>
    </div>
    </div> 
```

这是我的 CSS：

```
#textcontent {
    position: relative;
    float: none;
    width: 924px;
    height: 250px;
    text-align: left;
    margin: 30px auto auto auto;
    display: inline-block;
}
#textcontent div.heading{
position:relative;
    font: 16px 'ITCAvantGardeStd-Demi', sans-serif;
color:#FFFFFF;
line-height:30px;
    padding: 0px 0px 0px 30px;
cursor: pointer;
    width: 830px;
    height: 25px;
background:url(../images/menus/menu_welcome-1.png) no-repeat;
}
#textcontent div.heading div.fleche{
color:#000000;
background:url(../images/buttons/fleche_icon.png) no-repeat;
float:right;
    margin: 8px 10px; auto auto;
    width: 9px;
    height: 10px;
}
#textcontent p.link{
font: 10px 'ITCAvantGardeStd-BkObl', sans-serif;
color:#722EA3;
line-height:12px;
    margin: 15px 10px 0px auto;
    width: 81px;
    height: 12px;
float:right;
}
#textcontent p.link a{
    text-decoration: none;
}
#textcontent div.text{
font: 12px 'ITCAvantGardeStd-Bk', sans-serif;
color:#000000;
line-height:12px;
    margin: 20px 50px auto 30px;
    width: 845px;
    height: 205px;
}
#textcontent div.text h1{
font: 20px 'ITCAvantGardeStd-Demi', sans-serif;
color:#722EA3;
line-height:12px;
} 
```

这是我在页眉上的脚本：

```
<!-- load general jquery -->
<script type="text/javascript" src="js/jquery.js"></script>
<!-- load general for small slider -->
<script type="text/javascript" src="js/jquery.cycle.all.min.js"></script>
<script type="text/javascript" src="js/scripts.js"></script>
<!-- load collapse expandble DIV -->
<script type="text/javascript">//<![CDATA[
$(window).load(function(){
    var $coll = $('.heading');
    $coll.click(function() {
var $this = $(this);
$(this).nextUntil('.heading').slideToggle('slow', function() {
    $this.next('.text').is(":hidden") ? $this.find('.fleche').css({
    'background-position': '0px -10px'
    }) : $this.find('.fleche').css({
    'background-position': '0px 0px'
    });
});
$this.toggleClass("expanded collapsed");
});
$coll.addClass('expanded').click();
});//]]>
</script> 
```

因此，当我的页面加载时，这将打开 div 然后立即将其关闭，但是当我单击...时效果很好

```
div.handling 
```

根据状态更改图像。问题是我希望它仅在单击时打开和关闭

```
div.handling 
```

为了让您知道，我正在使用其他代码，特别是用于 2 个不同画廊的 nivoSlider 和 jQuery.cycle。

你有什么解决方案让它工作吗？我非常感谢先进。

# ruby-on-rails-3 - Rails UJS data-disable-with return result

> ID：12007433
> 
> 赞同：2
> 
> 时间：2012-08-17T14:10:10.277
> 
> 标签：ruby-on-rails-3

我正在使用 Rails 3 的 UJS（顺便说一句，这很棒）。我有以下表单 HTML：

```
<form accept-charset="UTF-8" action="/users/invitation" class="simple_form form-invite" data-remote="true" method="post">
   <input class="btn btn-mini btn-invite" data-disable-with="Inviting" name="commit" type="submit" value="Invite">
</form> 
```

我正在使用`data-disable-with`按钮文本更改并且按钮在处理过程中被禁用。但是，我希望在通话完成后按钮文本更改为“已邀请”。

我正在使用以下内容：

```
 $(document).on "ajax:success", ".form-invite", (evt, data, status, xhr) ->
    el = $(this).find('.btn-invite')
    el.val("Invited")
    return 
```

这确实会更改按钮文本。但是，由于它是在`ajax:success`块内处理的，因此按钮文本恢复为“邀请”。有没有办法在使用 HTML 属性或 JavaScript 处理后定义按钮文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:20:47.720

我能够通过一个小技巧来解决这个问题：

```
$(document).on("ajax:success", ".form-invite", function(evt, data, status, xhr) {
  var el;
  el = $(this).find('.btn-invite');
  setTimeout((function() {
    return el.val("Invited");
  }), 1);
}); 
```

# assembly - 硬件如何运行装配？第一个汇编程序是如何编写的？

> ID：12007435
> 
> 赞同：10
> 
> 时间：2012-08-17T14:10:13.717
> 
> 标签：assembly

在上过关于编译器的课程并自己做了一个基本的课程后，我仍然对第一个编译器有挥之不去的怀疑。

从高到低，我看到运行在 C 或 C++ 中的代码通过它的编译器（比如说 gcc）转换为相应的汇编语言。此代码依赖于平台（假设我使用的是 intel x86 架构）。

现在问题来了，硬件如何运行程序集？

我记得在我的计算机组织类中，每个汇编语句都被转换为特定格式（取决于处理器），例如，像 mov ax,bx 这样的语句被转换为它的操作码，比如说 0110 101010 101000。假设汇编器解析我的汇编语言程序中的每条语句都将其转换为机器代码，那么第一个汇编程序是如何编写的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T14:18:04.850

其实我想你懂的。首先是标题问题，硬件如何运行程序集。硬件在机器代码或机器指令或任何术语上运行。正如您正确描述的那样，程序集是该机器代码的代表，并不总是但接近于一对一的关系，一条 asm 指令与一条机器指令。这些是位、一和零，硬件现在可以执行位描述的操作。

现在第一个汇编程序是如何编写的？用铅笔和纸。您通常在某种伪汇编中写下指令，因为您可能没有完全定义语言，然后根据编码写下位，汇编器会做同样的事情。然后使用某种机制将这些位输入计算机并告诉它运行。

最终，自然地，这对于大型程序来说变得乏味，因此您决定编写一个更大的程序来解析一种更易于编写的语言，然后用更复杂的语言和程序重复该过程。

即使在今天，这取决于团队以及他们如何做事以及测试指令解码器的个人工程师等。手工编写机器代码仍然会发生。最终，汇编程序被创建，你切换到它，有时会有一个更高级别的编译器，你切换到它来进行大部分编码，但在芯片开发世界中，你仍然非常了解，并且不时会修改机器代码级别的指令位。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T14:15:56.130

它在[前面板上](http://en.wikipedia.org/wiki/Front_panel)“切换”或从[纸带](http://en.wikipedia.org/wiki/Paper_tape)中读取。您可以计算出二进制文件并设置开关或手动制作孔，在您的脑海中转换操作码。传说 Seymour Cray 以这种方式进入了整个第一个 Cray OS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T15:14:07.300

“硬件”，主要是 CPU 和内存，几乎是一个有限状态机。它的状态/输出和输入大致是寄存器和内存的内容。

您的程序编译为 FSM“理解”的机器代码，驱动 FSM 从一个状态到另一个状态。这就是“硬件运行组装”的方式。

除非第一个汇编器/编译器是交叉编译的（在不同的平台上开发和编译），否则第一个是手动编写并翻译成机器代码，然后输入。

# php - 为什么 crypt() 返回具有相同盐的不同哈希？

> ID：12007443
> 
> 赞同：1
> 
> 时间：2012-08-17T14:10:55.307
> 
> 标签：php, encryption, hash, salt, crypt

```
public static function blowfish($password, $storedpass = false) {
    //if encrypted data is passed, check it against input ($info) 
      if ($storedpass) { 
            if (substr($storedpass, 0, 60) == crypt($password, "$2a$08$".substr($storedpass, 60))) { 
                return true; 
            }  else { 
                return false; 
            } 
      }  else { 
            //make a salt and hash it with input, and add salt to end 
            $salt = "143cd669b02e155c3cca6e";//substr(bin2hex(openssl_random_pseudo_bytes(22)), 0, 22);
            //for ($i = 0; $i < 22; $i++) { 
                //$salt .= substr("./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", mt_rand(0, 63), 1); 
            //} 

            //return 82 char string (60 char hash & 22 char salt) 
            return crypt($password, "$2a$08$".$salt).$salt; 
     }
}

print(substr($storedpass, 0, 60)."<br />");
print(crypt($password, "$2a$08$".substr($storedpass, 60))."<br />");
print(substr($storedpass, 60)); 
```

产生结果：

```
$2a$08$143cd669b02e155c3cca6eM3k8s9BdE4jErJXJ8wSxshJDPcJQVPW
$2a$08$143cd669b02e155c3cca6eEiYm6ilW1ZC1PBS07LOh2XSq1NODSKK
143cd669b02e155c3cca6e 
```

你可以看到我之前生成了一个 22 个字符的随机盐，我知道 PHPASS，mt_rand() 不是 CSPRNG 等等。让我感到困惑/担心的只是为什么 crypt()（给定 $password = ' admin') 即使使用静态盐也会生成不同的哈希。你可以看到我打印了 substr($storedpass, 60) 生成正确的盐，但是然后运行 ​​crypt() 函数（使用相同的参数来创建初始 $storedpass）它会生成不同的结果，破坏身份验证我的一个（相对较小且不是关键任务）应用程序......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:55:41.820

似乎您将 $password 参数作为（未定义）发送给函数。

这将生成此哈希：

```
$2a$08$143cd669b02e155c3cca6eM3k8s9BdE4jErJXJ8wSxshJDPcJQVPW 
```

但是（例如）如果你运行这个：

```
$password = 'admin';
echo $storedpass = blowfish($password)."<br />";

print(substr($storedpass, 0, 60)."<br />");
print(crypt('admin', '$2a$08$'.substr($storedpass, 60))."<br />");
print(substr($storedpass, 60));

if (blowfish($password, $storedpass) == true) {
    echo 1;
} 
```

那将输出：

```
$2a$08$143cd669b02e155c3cca6eEiYm6ilW1ZC1PBS07LOh2XSq1NODSKK143cd669b02e155c3cca6e
$2a$08$143cd669b02e155c3cca6eEiYm6ilW1ZC1PBS07LOh2XSq1NODSKK
$2a$08$143cd669b02e155c3cca6eEiYm6ilW1ZC1PBS07LOh2XSq1NODSKK
143cd669b02e155c3cca6e
1 
```

# python - 嵌套的 If/Else 控制流在不应该执行时被执行 - 可能是逻辑操作错误

> ID：12007444
> 
> 赞同：1
> 
> 时间：2012-08-17T14:10:58.467
> 
> 标签：python, string, if-statement, logic

我有这个代码：

```
def time24hr(tstr):

    if ('a' and ':') in tstr:
        if tstr[:2] == '12':
            tstr = tstr.replace('12', '00').replace(':','').replace('am','hr')
            return tstr

        elif len(tstr[:tstr.find(':')]) < 2:
        # If length of string's 'tstr' slice (that ends before string ':') is less than 2
            tstr = tstr.replace(tstr[:tstr.find(':')],'0' + tstr[:tstr.find(':')]).replace(':', '').replace('am','hr')
            # Replace one-character string with combination of '0' and this one-character string. Then remove colon, by replacing it with lack of characters and replace 'am' string with 'hr'.
            return tstr

        else:
            tstr = tstr.replace(':', '').replace('am', 'hr')
            return tstr

    elif ('p' and ':') in tstr:
        tstr = tstr.replace(':', '').replace('pm', 'hr')
        return tstr

    else:
        return "Time format unknown. Type correct time." 
```

当我执行此代码时，它应该`print time24hr('12:34am')`返回`0034hr`字符串。它也适用于此`print time24hr('2:59am')`，返回`0259hr`。但是当我在其中键入 string 时`12`，它会自动省略这部分代码`if ('a' and ':') in tstr:`或 this`elif ('p' and ':') in tstr:`并继续执行此部分：

```
if tstr[:2] == '12':
    tstr = tstr.replace('12', '00').replace(':','').replace('am','hr')
    return tstr 
```

因此，无论我输入`12:15am`or `12:15pm`，此代码如果找到`12`in 字符串，就会开始执行上述代码。`print time24hr('12:15pm')`返回`0015pm`但应该返回`0015hr`，并且只针对其中包含的字符串`am`。否则，不要更改`12`为`00`并返回 ie `1244hr`for `12:44pm`。

`if ('a' and ':') in tstr:`我的问题是，为什么那些逻辑检查`elif ('p' and ':') in tstr:`不起作用？此代码旨在成为此测验的解决方案-> [http://www.pyschools.com/quiz/view_question/s3-q8](http://www.pyschools.com/quiz/view_question/s3-q8)

==================================================== =================================

感谢您帮助我进行逻辑运算。

另外，我已经完成了上面提到的测验，这是工作代码：

```
def time24hr(tstr):

    if (len(tstr[:tstr.find(':')]) == 2) and (tstr[0] == '0'):
        tstr = tstr.replace(tstr[0], '')

    if ('a' in tstr) and (':' in tstr):
        if tstr[:2] == '12':
            tstr = tstr.replace('12', '00').replace(':', '').replace('am', 'hr')
            return tstr

        elif len(tstr[:tstr.find(':')]) < 2:
        # If length of string's 'tstr' slice (that ends before string ':') is less than 2
            tstr = tstr.replace(tstr[:tstr.find(':')], '0' + tstr[:tstr.find(':')]).replace(':', '').replace('am', 'hr')
            # Replace one-character string with combination of '0' and this one-character string. Then remove colon, by replacing it with lack of characters and replace 'am' string with 'hr'.
            return tstr

        else:
            tstr = tstr.replace(':', '').replace('am', 'hr')
            return tstr

    elif ('p' in tstr) and (':' in tstr):
        if tstr[:2] == '12':
            tstr = tstr.replace(':', '').replace('pm', 'hr')
            return tstr

        elif len(tstr[:tstr.find(':')]) < 2:
            PmDict = {'0':'12','1':'13', '2':'14', '3':'15', '4':'16', '5':'17', '6':'18', '7':'19', '8':'20', '9':'21', '10':'22', '11':'23'}
            tstr = tstr.replace(tstr[:tstr.find(':')], PmDict[tstr[:tstr.find(':')]]).replace(':', '').replace('pm', 'hr')
            # Replace every "number" (which is string literally) with it's corresponding "number" in 24HR format, found in 'PmDict' dictionary. Then, as in above cases, remove colon ':' by replacing it with lack of character or space and then replace 'pm' with 'hr'
            return tstr

    else:
        return "Time format unknown. Type correct time." 
```

如您所见，我没有根据 KISS 规则编写此代码 - 因为它有点复杂，但在 IMO 中运行良好。

可以在这里测试-> [http://doc.pyschools.com/console](http://doc.pyschools.com/console)

为大家干杯，感谢您的帮助:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T14:16:41.827

```
if ('a' and ':') in tstr: 
```

和

```
if ':' in tstr: 
```

希望这能让您深入了解问题似乎是什么。

可能替换为

```
if 'a' in tstr and ':' in tstr: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:30:20.390

您可以使用以下方法概括此测试是否存在多个元素`all`：

```
if all(ch in tstr for ch in 'a:'):
    etc... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:20:10.873

您的主要问题是您的代码检查子字符串包含不正确：您使用`in`不当。当你写

```
if ('a' and ':') in tstr: 
```

它首先评估`('a' and ':')`get`:`然后检查`if ':' in tstr`。这就是为什么第一个`if`块不断评估为真。发生这种情况是因为`and`它是一个布尔运算，并且`x and y`等价于`x if bool(x) else y`. 这个表达式在你进行`in`检查之前就被评估了。

您可以将该代码替换为

```
if ('a' in tstr) and (':' in tstr) 
```

（并对其他检查进行类似的操作）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T14:17:05.053

那么你的第一次检查：

```
('a' and ':') in tstr 
```

只是真正检查 ':' 是否在 tstr 中。究竟为什么会这样，我不确定，但如果您`('a' and ':')`在交互式 Python 中运行该语句，您会看到它返回 ':'。

您的第二次检查有同样的错误。

考虑使用

```
if ':' in tstr and 'a' in tstr: 
```

和

```
elif 'p' in tstr and ':' in tstr: 
```

不幸的是，Python 只能这么像英语 :)

# silverlight - 只有登录的用户可以从我们的服务器播放音频

> ID：12007452
> 
> 赞同：5
> 
> 时间：2012-08-17T14:11:19.013
> 
> 标签：silverlight, security, telerik, audio-streaming

我们制作了一个silverlight 应用程序，用户可以在其中通过telerik radmediaplayer 控件从他们的浏览器中预览音频文件。

这些文件位于网络服务器上，任何嗅探流量的人都可以下载该文件。我们希望**防止未登录的用户访问/下载这些文件**。

除了为应用程序提供某种临时有效的 url 并实现自定义 httphandler 之外……我们还有哪些选择？

如果我们的客户可以下载文件，这不是什么大问题，我们只是不希望世界其他地方也有访问权限。

任何想法都会受到欢迎！

[更新]我唯一能想到的是：

*   将文件托管在非公共文件夹中
*   如果用户请求预听文件，请将其复制到新名称 ([guid].mp3) 下的公共文件夹并返回它的 url
*   每 x 分钟清理一次公用文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:15:55.503

不要让 Web 服务器直接从目录中提供文件。将您的应用程序的一部分放在前面，并留下一个服务器端脚本来提供这些文件。将原始音频文件保留在 Web 根目录之外。

例如，您的客户端应用程序会像这样访问文件：

```
http://someserver/yourscript?audio_asset_id=12345 
```

的代码`yourscript`将验证会话数据，确保用户已登录，然后找出资产 ID 的真实路径`12345`，并将其内容回显给客户端。不要忘记包含正确的`Content-Type`标题。

Once the accessing of these assets is under your control, you can implement whatever security measures you like. If your sessions area already pretty well safe-guarded, this should be fine. I would also recommend implementing sane quotas. If you get 100 requests on an asset using the same session ID from multiple IP addresses... something isn't right.

# c# - 安装/删除 2013 beta 版本后损坏的 Excel 互操作 COM 程序集

> ID：12007454
> 
> 赞同：2
> 
> 时间：2012-08-17T14:11:35.487
> 
> 标签：c#, .net, excel, excel-interop, office-2013

我最近安装了 Microsoft Office 2013 beta 版本，同时已经安装了 2007。当我在 Visual Studio 2008 下打开基于 COM 的 Excel 互操作应用程序时，我注意到一些以前没有的警告。我尝试开始编译应用程序，它仍然可以工作，但是当我尝试使用使用 Excel 互操作的功能时，我收到了一个错误。

之后我立即卸载了 Office 2013，但错误仍然存​​在。我在 C:\Windows\assembly 文件夹中搞砸了，但仍然无法修复它。

之后，我继续卸载/重新安装 Office 2007。仍然没有运气。我再次卸载了 Office 2007，删除了所有有关互操作的程序集（包括策略程序集），重新安装了 Office 2007。仍然没有。

我尝试安装 PrimaryInteropAssembly。也没什么。

我别无选择……我该怎么办？

该应用程序仍然可以编译并且仍然可以在其他机器上运行。真的只是我的机器不能再运行了。

*这可能是题外话，我不确定这种东西适合哪种 Stack Exchange，但由于它与编程有关，而不是实际代码，所以我在这里试了一下。我认为在这个领域有能力的人更多地居住在 SO 而不是 SF*

**VS中的警告**

无法确定 COM 引用“Microsoft.Office.Interop.Excel”的依赖关系。Erreur lors du chargement de la bibliothèque/DLL du type。（HRESULT 异常：0x80029C4A (TYPE_E_CANTLOADLIBRARY)）

（法语部分翻译：“加载库/DLL 类型时出错。”）

**在开发机器上运行应用程序时的错误**

![在此处输入图像描述](../Images/c3418723334c19636006d5c601d1fec1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:11:02.933

我在[Microsoft MSDN 社区论坛](http://social.msdn.microsoft.com/Forums/eu/exceldev/thread/dd052f27-20d6-4b6b-9d8b-fe4fd9c6b9fc)上得到了答复。有一个注册表项要删除。

在那之后一切都恢复了正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:16:27.753

即使使用 MSDN 当前发布的 Office 2013，也会出现此问题；并且删除注册表项仍然可以修复它。

# javascript - 通过javascript获取移动设备硬件信息

> ID：12007459
> 
> 赞同：2
> 
> 时间：2012-08-17T14:11:54.600
> 
> 标签：javascript, android, ios, mobile, browser

通过 Javascript，您可以获得有关您的系统的硬件和其他组件的大量信息，如下[所示](http://browserspy.dk/)

使用移动设备，您不会获得那么多信息。我不是在问如何找出移动设备名称，这很容易，甚至不是 udid。我想知道，我是否可以访问某些设备特性，例如浏览器使用的某种已安装插件，或者该主题的新发展。

在[这个网站上](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.battery?redirectlocale=en-US&redirectslug=DOM%2Fwindow.navigator.mozBattery)我发现，我可以访问电池状态，或者`window.navigator.mozVibrate([200]);`我可以激活振动功能。到目前为止，两者都只适用于 firefox mobile (android)。

一个有趣的信息是关于内置摄像头，比如它有多少百万像素，或者它有闪光灯吗？或者内置什么样的 CPU（单核、双核或四核）？

总结一下：我可以通过 javascript 获得关于移动设备（iOS/Android/Windows Phone）的哪些硬件信息？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:26:02.230

您可以通过使用PhoneGap 获得关于设备的有限信息，即将PhoneGap 脚本放在您的服务器上，如果设备是移动的，则检查适当的值。检查此链接：[http ://docs.phonegap.com/en/2.0.0/cordova_device_device.md.html#Device](http://docs.phonegap.com/en/2.0.0/cordova_device_device.md.html#Device)

# objective-c - 由于 SQLite 错误代码，应用程序崩溃：11

> ID：12007462
> 
> 赞同：1
> 
> 时间：2012-08-17T14:12:12.440
> 
> 标签：objective-c, ios5, ios5.1

我的应用程序第一次或第二次崩溃并出现错误“abc.sqlite 已损坏。SQLite 错误代码：11，'数据库磁盘映像格式错误'，NSSQLiteErrorDomain = 11”我无法跟踪它。任何人请帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-08T11:27:17.003

（取自上述评论之一）

该应用程序崩溃了，因为它在不同的线程上加载，应用程序甚至在安装数据库之前就尝试检索数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-03T21:50:43.170

这不完全正确，我今天在我的 iphone 上遇到了同样的问题，连接到 macbook 并使用 xcode 将 db 从 iphone 带到 macbook。我使用 SQLite DB 浏览器，运行 PRAGMA 完整性检查，它在代码为 11 的页面之一上显示错误。幸运的是，我的表只有 10 条记录。奇怪的是，当我运行“select * from tableA”时，只返回 3 条记录。我能够通过重新编号一些记录 ID 意外地修复数据库，在保存更改时，那些丢失的记录神秘地出现......而损坏的记录消失了。

# nib - 无法在手写笔文件中找到笔尖

> ID：12007463
> 
> 赞同：7
> 
> 时间：2012-08-17T14:12:16.570
> 
> 标签：nib, stylus

我正在尝试在手写笔中使用 Nib CSS3 扩展。安装手写笔和笔尖（尝试本地和全球`-g`）。但是没有一个有效，当我这样做的时候

```
stylus styles.styl > build/styles.css

# styles.styl
@import "nib" 
```

我明白了

```
/usr/lib/node_modules/stylus/bin/stylus:502
              throw err;
                    ^
Error: styles.styl:1
 > 1| @import "nib"
   2| 
   3| body 
   4|   background: linear-gradient(top, white, black)

failed to locate @import file nib.styl

    at Evaluator.visitImport (/usr/lib/node_modules/stylus/lib/visitor/evaluator.js:659:21)
    at Evaluator.Visitor.visit (/usr/lib/node_modules/stylus/lib/visitor/index.js:28:40)
    at Evaluator.visit (/usr/lib/node_modules/stylus/lib/visitor/evaluator.js:75:18)
    at Evaluator.visitRoot (/usr/lib/node_modules/stylus/lib/visitor/evaluator.js:521:27)
    at Evaluator.Visitor.visit (/usr/lib/node_modules/stylus/lib/visitor/index.js:28:40)
    at Evaluator.visit (/usr/lib/node_modules/stylus/lib/visitor/evaluator.js:75:18)
    at Evaluator.evaluate (/usr/lib/node_modules/stylus/lib/visitor/evaluator.js:150:15)
    at Renderer.render (/usr/lib/node_modules/stylus/lib/renderer.js:69:26)
    at /usr/lib/node_modules/stylus/bin/stylus:496:15
    at fs.readFile (fs.js:176:14) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T07:24:19.407

是的，我想我错过了`-u`@Jonathan 指出的标志

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-18T20:39:14.197

自动转换的完整代码行将是：

```
stylus -w -u nib test.styl -o test.css 
```

# java - GAE、JDO、Jcache：无法将实体列表放入缓存

> ID：12007466
> 
> 赞同：1
> 
> 时间：2012-08-17T14:12:44.017
> 
> 标签：java, google-app-engine, jcache

我有一个返回实体列表的查询。当我尝试将此列表放入缓存时，我得到了熟悉的`java.lang.IllegalArgumentException`.

但是...我可以毫无问题地将列表中的每个项目都放入缓存中。即使我创建一个新`LinkedList`的，使用 for 循环将实体从获取的列表复制到这个新的并尝试将其放入缓存中，它也可以工作。

```
List<MyEntity> a = (List<MyEntity>) q.execute(getKey());

List<MyEntity> b = new LinkedList<MyEntity>();
for (MyEntity e : a)
        b.add(e);

cache.put(key, b); // this works
cache.put(key, a); // this doesn't 
```

那么我错过了什么？缓存其他查询有效，我不知道为什么这个不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:38:22.783

JDO 查询返回的最有可能`List`是不可序列化的，因为它是一个动态代理。

要制作副本，您可以简单地使用

```
List<MyEntity> b = new ArrayList<MyEntity>(a); 
```

注意：这会`a`从 的元素中创建一个新列表`b`，但不会创建元素的副本，因此它非常轻量级。

# opengl - OpenGL 动态对象运动模糊

> ID：12007469
> 
> 赞同：7
> 
> 时间：2012-08-17T14:13:00.057
> 
> 标签：opengl, motion-blur

我一直在关注如何根据相机移动进行模糊的 GPU Gems 3 教程。但是我也想实现基于对象移动的模糊。该解决方案在文章中介绍（请参阅下面的引用），但是我很好奇如何准确地实现它。

目前我将对象的矩阵乘以视图投影，然后再次分别用于前一个视图投影，然后将它们传递到像素着色器以计算速度而不仅仅是视图投影。

如果这实际上是正确的方法，那么为什么我不能简单地传入模型视图投影？我会假设它们是相同的值？

[GPU Gems 3 运动模糊](http://http.developer.nvidia.com/GPUGems3/gpugems3_ch27.html)

> 要为刚体动态对象生成速度纹理，请使用当前帧的视图-投影矩阵和最后一帧的视图-投影矩阵变换对象，然后以与后处理通道相同的方式计算视口位置的差异。应该通过将两个转换后的位置传递到像素着色器并在那里计算速度来计算每个像素的速度。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T21:56:13.170

看看我几个月前就这个主题所做的研究：http: [//www.stevenlu.net/files/motion_blur_2d/Fragment_shader_dynamic_blur.pdf](http://www.stevenlu.net/files/motion_blur_2d/Fragment_shader_dynamic_blur.pdf)

[![破塔标准渲染图](../Images/e123c31317ca72d50a390767a61b3bae.png)](https://i.stack.imgur.com/ECF5c.gif)
[（来源：[stevenlu.net](http://www.stevenlu.net/files/motion_blur_2d/60_noblur.gif)）]

[![塔粉碎的模糊渲染](../Images/adc3b2bf15405dc37ad04cfd711d0342.png)](https://i.stack.imgur.com/RIJ48.gif)
[（来源：[stevenlu.net](http://www.stevenlu.net/files/motion_blur_2d/60.gif)）]

遗憾的是，我在制作这种材料时没有实现纹理对象，但请发挥你的想象力。我正在开发一个游戏引擎，所以当它最终以游戏的形式出现时，你可以确定我会来这里发布面包屑。它主要解决如何在 2D 中以及在对象不重叠的情况下实现此效果。使用片段着色器“扫描”样本以生成“准确”的模糊并不是一个很好的方法。虽然随着样本数量的增加，效果接近像素完美，但必须生成覆盖扫描区域的几何图形必须使用一些“丑陋”的技术手动组装。

在全 3D 中，要知道动态对象在一帧的过程中会扫过哪些像素是一个相当困难的问题。即使使用静态几何体和移动相机，GPU Gems 文章提出的解决方案在快速移动经过物体时也是不正确的，因为它无法解决需要混合移动物体扫过的区域的问题......

也就是说，如果这种忽略扫描的近似是足够的（并且可能是），那么您可以做的是将其扩展到动态对象的方法是考虑它们的运动。您当然需要弄清楚细节，但请查看您链接的文章的第二个代码块中的第 2 行和第 5 行：它们是像素的当前和以前的屏幕空间“位置”。您只需以某种方式传入允许您计算每个像素的先前位置的矩阵，**同时考虑到**对象的动态运动。

应该不会太糟糕。在渲染动态对象的过程中，您发送一个额外的矩阵，表示其在最后一帧的运动。

**更新：** 我发现[这篇](https://casual-effects.com/research/McGuire2012Blur/McGuire12Blur.pdf)论文描述了一种优雅且高性能的方法，它为 3D 管道提供了某种高质量的物理正确模糊。出于性能原因，在渲染整个场景不超过一次的限制下，很难做得比这更好。

我注意到在一些示例中速度缓冲区的质量可能会更好。例如，一个旋转的轮子在速度空间中应该有一些曲线。我相信如果可以正确设置它们（可能需要自定义片段着色器来渲染速度...），它们将看起来直观正确，就像上面我对动态运动模糊的 2D 探索中看到的旋转立方体一样。

# css - 为什么我的 CSS 不能在 IE7 上正确显示？其他一切正常

> ID：12007479
> 
> 赞同：-1
> 
> 时间：2012-08-17T14:13:32.477
> 
> 标签：css, debugging, internet-explorer-7

我今天大部分时间都在试图弄清楚为什么我网站上的 css 在 IE7 中不能正常工作。您可以在[http://www.ecocamel.com上查看该网站](http://www.ecocamel.com)

当您使用淋浴喷头进入产品滚动页面时。..一切都是一团糟，鼠标悬停弹出窗口部分显示没有任何鼠标悬停，并且产品从容器中流出到右侧..

我尝试添加溢出：隐藏和位置：相对，这确实解决了很多问题..但它导致网站在其他浏览器上切断了部分左/右箭头......

所以我现在已经删除了所有内容。只是令人气愤的是它在所有其他浏览器上都能完美运行。如何在不影响其他浏览器的情况下找出修复它的最佳方法？我想我可以使用条件 IE7 语句添加溢出：隐藏/位置：相对内容，因此它不会影响其他浏览器..但这仍然不能正确解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:24:33.507

一个好的方法是使用条件注释。
你可以使用：

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="ie6"> <![endif]-->
<!--[if IE 7]>         <html class="ie7"> <![endif]-->
<!--[if IE 8]>         <html class="ie8"> <![endif]-->
<!--[if gt IE 8]><!--> <html>         <!--<![endif]--> 
```

在这种情况下，将额外的类放在 html 标记上，以便您为 IE6/7/8 设置显式样式

像：

```
div {color:#ff00ff}
.ie7 div {color:#00ff00;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:22:00.043

在使用条件 IE7 语句的情况下，虽然这似乎是一种糟糕的方式，但如果这是不重写 CSS 的唯一选择，那么这是最好的解决方案。

正如 GordonM 所提到的，我们很难在没有看到代码的情况下知道发生了什么。但是当您使用`position:relative`时，我可能会建议您尝试使用`z-index`，以便弹出窗口显示在所有内容之上（就像他们应该做的那样）。

除此之外，你是否正确地遵循了 CSS 盒子模型？我倾向于做的是在创建`div`or`p`标记时编写这些基本语句：

```
 div {
      float:left;
      width:100%;
      margin:10px;
} 
```

这是跨浏览器兼容的，因为我曾经为一家希望他们的网站只为所有浏览器使用一个 CSS 文件的机构工作。可以使用 HTML 和 CSS 构建网页，并使其在每个浏览器（不包括 IE6）上运行，而无需使用条件语句。但是我认为你已经/即将结束开发，你无法完全重写你的 CSS。所以先尝试 z-index 的想法，然后尝试将上面的代码应用到任何受影响的 div 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:24:54.223

Google "conditional css for IE" and you'll find a plethora of tutorials showing you how to create conditional CSS for only IE version x+ or specifically ie7.. even all browsers but IE. Most websites require some, if not a ton of IE tweaking. Also, look in to a reset.css to set all margins and paddings to 0 to help with consistency.

# elmah - 通过代码初始化 ELMAH 的 SMTP 设置

> ID：12007480
> 
> 赞同：5
> 
> 时间：2012-08-17T14:13:34.660
> 
> 标签：elmah

该应用程序包括：

*   ASP .NET MVC Web 应用程序
*   达尔
*   后台服务
*   图书馆项目

Web 应用程序和后台服务项目使用库项目来发送电子邮件。SMTP 设置包含在库项目本身的配置文件中。

在这种情况下，有没有办法绑定 ELMAH 以从库项目中获取 SMTP 设置？也许如果有一种方法可以通过代码（在 Application_Start 期间）配置 ELMAH，它将有助于实现预期目标。

非常感谢指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T14:37:03.687

[您可能会从[this article]](http://dotnetslackers.com/articles/aspnet/ErrorLoggingModulesAndHandlers.aspx "ELMAH + 电子邮件")中找到一些用处。

特别是关于通过电子邮件自动发送错误报告的部分可能对您有用。这是同一主题的更集中的链接：[[链接]](http://www.stormconsultancy.co.uk/blog/development/tools-plugins/setup-email-alerts-from-elmah-when-exceptions-are-raised/ "来自 elmah 的电子邮件提醒")

虽然这些展示了如何为您的 SMTP 设置设置静态地址，但我不确定我是否知道如何在运行时根据配置文件动态创建它们。如果我找到一种以更好的方式执行此操作的方法，我一定会编辑此答案或发表评论，但请查看链接，看看它们是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T14:50:52.373

您可以配置 elmah 以将错误报告发布到 HTML 地址。见[这篇文章](http://code.google.com/p/elmah/wiki/HowlingErrors)。

当您将其设置为发布到该地址时，您可以让任何后端捕获它并为您发送电子邮件。

您提到您正在使用 MVC，因此您可以将 elmah 发布到控制器操作，然后使用库项目中的 SMTP 设置发送电子邮件，因为您可以访问那里的引用。

# c++ - 将压缩帧写入 mpeg4 块 c++

> ID：12007486
> 
> 赞同：1
> 
> 时间：2012-08-17T14:14:01.587
> 
> 标签：c++, video, h.264, mp4, mpeg-4

我希望将已压缩的 (h264) 图像数据写入 MPEG-4 视频文件。由于需要优化此代码以在嵌入式平台上运行，因此代码应尽可能简单。最好只提供一些标题信息（如高度宽度格式fourcc等）和文件名和压缩数据，并将其转换为数据块并写入该文件。

所以我需要这些：

*   MPEG-4 标头信息（具体在哪里）

    *   是否有主标题或每个数据块只有标题
    *   单个视频流（矩形）需要哪些标头信息
    *   添加音频需要哪些标头信息
*   一个简单的 MPEG-4 文件编写器，不需要自己进行压缩，还允许添加音频帧。(c/c++)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:56:51.637

`.MP4`文件格式在 MPEG-4 Part 14 规范中描述。它不仅仅是主标题和子标题，它有一定的层次结构和所谓的盒子。您选择将数据写入`.MP4`文件的一些选择：

*   [FFmpeg](http://ffmpeg.org) (libavcodec,libavformat)——[相关Q](https://stackoverflow.com/questions/5107900/ffmpeg-how-to-write-video-to-a-file)及[相关代码链接](http://cekirdek.pardus.org.tr/~ismail/ffmpeg-docs/output-example_8c-source.html)
*   在 Windows 中通过 DirectShow API - [GDCL MP4 Multiplexer](http://www.gdcl.co.uk/mpeg4/)或许多类似的商业产品
*   在 Windows 中通过 Media Foundation API - [MPEG-4 文件接收器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757763%28v=vs.85%29.aspx)

# iframe - 调整网站大小以适应 iframe

> ID：12007488
> 
> 赞同：1
> 
> 时间：2012-08-17T14:14:14.877
> 
> 标签：iframe, web, resize

是的，我知道没有人喜欢 iframe，但这是场景。我有一个客户，他的网站永远不会改变。他的页面有一个宽度为 680 像素、高度为 600 像素的 iframe。他目前嵌入了一个宽度为 950 像素的网站。

我想知道的是是否有办法（我已经搜索过）自动设置网站以适应 iframe 框？

我可以访问子站点，但不能访问父站点，但我的客户实际上知道一些 html/css，因此我可以在我的服务器上建立一个测试链接并将代码（如果他需要的话）发送给他以应用于他的端。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:21:15.753

这不是一种“自动”方式，但您可以做的一件事是将一些 CSS 应用到小页面。如果您正在加载的页面没有更改，您可以应用特定于该页面的 CSS，这将更改元素的宽度，以及需要更改的任何其他内容。[这是关于 SO 的答案，](https://stackoverflow.com/a/217833/377628)它描述了如何为 iframe 执行此操作。

# grails - Grails 每用户数据库身份验证

> ID：12007491
> 
> 赞同：3
> 
> 时间：2012-08-17T14:14:18.783
> 
> 标签：grails, jdbc, groovy

首先，我知道最佳实践是在您的 Web 应用程序中使用单个数据库用户帐户，以利用连接池来保持应用程序良好且响应迅速。但是，由于要求（在任何情况下都不会更改），我必须使用他或她的数据库帐户对每个用户进行身份验证。

上下文是一个在 Android 上运行的仓库管理应用程序，但它的数据来自我*可能*会在 Grails 中编写的 Web 服务，除非这里的建议向我展示了更适合我要求的技术。由于应用程序的性质，用户可能只需要每天进行一次或两次身份验证，所以我想我可以简单地将连接保存在一个 HashMap 中，该 HashMap 由用户名的哈希码与密码连接。这应该允许应用程序保持与最佳实践相同或相似的性能水平。

现在，我的问题是使用持久的 Connection 对象。我知道如果没有大量定制，我将无法将它们与 GORM 一起使用，所以我计划将它们与 groovy.sql.Sql 一起使用，因为大部分业务逻辑都在 PL/SQL 包中，所以效果很好反正。

我的问题是 groovy.sql.Sql 类如何处理它的 Connection 对象？我会遇到连接被它关闭的问题，还是我可以安全地使用我的 HashMap 来持久化连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T16:18:34.263

groovy.sql.Sql 不会关闭您的连接。在类规范中，您可以找到：

> 如果此 SQL 对象是使用 Connection 创建的，则此方法将关闭连接。

所以 SQL 类真的是如果你想自己做事，不完全信任 Hibernate。虽然，我认为您可以将 Spring 的 UserCredentialsDataSourceAdapter 用于您的解决方案。它使用 ThreadLocal 为每个线程设置凭据，因此调用：`UserCredentialsDataSourceAdapter.setCredentialsForCurrentThread(String username, String password)`

会解决的。[您可以在这里](http://grails.1312388.n4.nabble.com/DB-Connection-per-session-with-same-username-password-credentials-td1340612.html)尝试其他方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:46:13.450

实际上，我只是发现了一些对这个问题的未来访问者可能有用的东西。在深入研究 Spring Framework 的文档时，我发现他们的 JDBC Extensions 实际上实现了代理身份验证（其中代理帐户用于建立连接，但为 SQL 执行的上下文提供了一个实际帐户）。不幸的是，截至 2012 年 8 月 17 日的实现不支持通过代理连接为用户使用密码，因此它目前对我不可用，但任何发现此问题的人都应该检查是否仍然如此。以下是链接：

[JDBC 扩展文档 v1.0.0.RC1](http://static.springsource.org/spring-data/data-jdbc/docs/1.0.0.RC1/reference/html/#orcl.connection.1)

[JDBC 扩展文档库](http://www.springsource.org/spring-data/jdbc-extensions)

# regex - 通过正则表达式替换部分文件路径

> ID：12007494
> 
> 赞同：1
> 
> 时间：2012-08-17T14:14:33.650
> 
> 标签：regex, perl, path

我尝试在 Perl 中替换文件全名的目录部分。类似于：在目录 'D:\Texts1' 中有文件名 'D:\Texts1\text1'，想用 'D:\Texts2' 替换它，然后文件名将是 'D:\Texts2\text1'。

我试试这段代码：

```
$filename = 'D:\Texts1\text1';
$i = 'D:\Texts1';
$o = 'D:\Texts2';
$filename =~ s'$i'$o'g; 
```

而且它没有生效。$filename 不会改变。我尝试使用类似的东西

```
$i = quotemeta('D:\Texts1'); 
```

但它也没有生效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T16:16:19.807

这里有几个有效的答案，我想和我一起编译一个全面的答案，以使这篇文章更容易阅读：

## 根本原因

```
$i = 'D:\Texts1'; 
```

当用作正则表达式模式时，应该转义“\” - 正则表达式引擎想要的是一些终极格式，例如：***D:\\Texts1***。所以这不起作用，但是，至少有 4 种不同的方法来构建这种格式，如下所示。

还要注意，当 ' 用作匹配或替换语句的分隔符时，变量插值将被禁用，这会呈现*$filename =~ s'$i'$o'g;* 几乎没用。所以第一步，把它改成使用 / 或 {}

## 解决方案 1

使用[quotemeta](http://perldoc.perl.org/functions/quotemeta.html)，这将有效地逃避“\”：

```
$filename = 'D:\Texts1\text1';
$i = quotemeta('D:\Texts1');
$o = 'D:\Texts2';
$filename =~ s/$i/$o/g; 
```

## 解决方案 2

使用 \Q .. \E，其效果与 quotemeta 类似：

```
$filename = 'D:\Texts1\text1';
$i = 'D:\Texts1';
$o = 'D:\Texts2';
$filename =~ s/\Q$i\E/$o/g; # or s/\Q$i/$o/g also works 
```

## 解决方案 3

显式转义字符串中的“\”，并使用[qr](http://perldoc.perl.org/functions/qr.html)将字符串引用为正则表达式模式。

```
$filename = 'D:\Texts1\text1';
$i = qr 'D:\\Texts1';
$o = 'D:\Texts2';
$filename =~ s/$i/$o/g; 
```

## 解决方案 4

转义到字符串准备好进行正则表达式的程度：

```
$filename = 'D:\Texts1\text1';
$i = 'D:\\\\Texts1';
$o = 'D:\Texts2';
$filename =~ s/$i/$o/g; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:20:22.817

里面是问题`\`。`D:\Texts1`您需要转义此元字符。为此，字符串应由`\Q`and包裹`\E`。

```
$filename =~ s/\Q$i\E/$o/g; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T14:20:30.967

这不会插入

```
$filename =~ s'$i'$o'g; 
```

尝试使用`/`而不是`'`，像这样：

```
$filename =~ s/$i/$o/g; 
```

那应该工作。`'`防止字符串插值，因此变量名称显示为字符串文字。另外，请确保使用`quotemeta`您之前所做的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T14:21:16.987

你需要添加`\Q`：

```
$filename =~s{\Q$i}{$o}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T14:48:55.063

实际上，您遇到了两个问题的组合：

*   单引号虽然作为正则表达式分隔符有效，但具有特殊含义：它们禁用变量插值。因此，您正在字符串中搜索文字模式`$i`（如果您启用了警告，您会得到一个线索——它告诉您变量 $i 和 $o 在您的程序中只使用一次）。
*   正如其他人指出的那样，您还需要`\Q...\E`构造 or`quotemeta()`以避免将变量中的特殊字符解释为正则表达式运算符。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-17T14:21:34.787

更新代码

```
use strict;
use warnings qw/all/;

my $filename = 'D:\Texts1\text1';
my $i = 'D:\\Texts1';
my $o = 'D:\\Texts2';
$filename =~ s/\Q$i\E/$o/;

print $filename; 
```

要开心！

# php - 准备好的sql请求INSERT INTO一个变量表

> ID：12007498
> 
> 赞同：0
> 
> 时间：2012-08-17T14:14:41.483
> 
> 标签：php, sql

我正在尝试执行一个准备好的 sql 请求，它应该将值插入到**变量表中**

这段代码会比我更明确：

```
$req = $db->prepare("INSERT INTO ? 
                    (    `id`, 
                         `parent_id`, 
                         `position`, 
                         `left`, 
                         `right`, 
                         `level`, 
                         `title`, 
                         `type`, 
                         `content`   ) 
                    VALUES (NULL, 
                         '2', 
                         'last', 
                         '3', 
                         '10', 
                         '2', 
                         ?, 
                         'default', ?);");

$req->execute(array($_SESSION["user_id"], $result["title"], $result["content"])); 
```

所有变量都已设置，我用一些回声检查了这一点。是否可以“插入”变量？

（每个用户都有自己的表，以其唯一的 id 命名，这就是为什么我不能直接在查询中写表名的原因）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:18:10.890

表名不能使用命名参数；如果你想这样做，你必须直接在你的 SQL 中包含名称：

```
INSERT INTO $tablename (.... 
```

但是 - 这仍然对 SQL 注入攻击开放。

如果您想存储这样的数据，我会将所有内容放入一个表中，然后添加一个额外的字段作为附加键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:17:55.850

不，你不能这样做，你需要像下面那样做。

```
$table = $_SESSION["user_id"];
$req = $db->prepare("INSERT INTO $table (`id`, `parent_id`, `position`, `left`, `right`, `level`, `title`, `type`, `content`) VALUES (NULL, '2', 'last', '3', '10', '2', ?, 'default', ?);");
$req->execute(array($result["title"], $result["content"])); 
```

# r - 计算大量矩阵的有效方法

> ID：12007501
> 
> 赞同：2
> 
> 时间：2012-08-17T14:14:58.313
> 
> 标签：r

我正在尝试编写一个执行以下操作的程序：

```
Given two intervals A and B, for every (a,b) with a in A and b in B
  create a variance matrix ymat, depending on (a,b)
  calculate the (multivariate normal) density of some vector y 
  with mean 0 and variance matrix ymat 
```

我了解到在 R 中使用循环是不好的，所以我想使用 outer()。这是我的两个功能：

```
y_mat <- function(n,lambda,theta,sigma) {
    L <- diag(n);
    L[row(L) == col(L) + 1] <- -1;
    K <- t(1/n * L - theta*diag(n))%*%(1/n * L - theta*diag(n));
    return(sigma^2*diag(n) + 1/lambda*K);
}

make_plot <- function(y,sigma,theta,lambda) { 
    n <- length(y)
    sig_intv <- seq(.1,2*sigma,.01);
    th_intv <- seq(-abs(2*theta),abs(2*theta),.01);

    z <- outer(sig_intv,th_intv,function(s,t){dmvnorm(y,rep(0,n),y_mat(n,lambda,theta=t,sigma=s))})

    contour(sig_intv,th_intv,z);
} 
```

方差矩阵的形状与这个问题无关。n 和 lambda 只是两个标量，sigma 和 theta 也是如此。

当我尝试

```
make_plot(y,.5,-3,10) 
```

我收到以下错误消息：

```
Error in t(1/n * L - theta * diag(n)) : 
    dims [product 25] do not match the length of object [109291]
In addition: Warning message:
In theta * diag(n) :
longer object length is not a multiple of shorter object length 
```

有人可以告诉我出了什么问题吗？我可能会以错误的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:21:04.277

的第三个参数`outer`应该是一个矢量化函数。用它包装就`Vectorize`足够了：

```
make_plot <- function(y, sigma, theta, lambda) { 
  n <- length(y)
  sig_intv <- seq(.1,2*sigma,.01);
  th_intv <- seq(-abs(2*theta),abs(2*theta),.01);

  z <- outer(
    sig_intv, th_intv,
    Vectorize(function(s,t){dmvnorm(y,rep(0,n),y_mat(n,lambda,theta=t,sigma=s))})
  )

  contour(sig_intv,th_intv,z);
} 
```

# css - CSS定位，链接对齐需要帮助

> ID：12007503
> 
> 赞同：0
> 
> 时间：2012-08-17T14:15:06.130
> 
> 标签：css, alignment, positioning

**在网站的所有分类页面中，顶部的链接菜单没有对齐**，请参阅示例链接 -[汽车金融](http://www.mycarhelpline.com/index.php?option=com_forms&view=pages&layout=finance&Itemid=6)部分。

*每当我们尝试将第三个链接放在顶部菜单左侧时-它会拆分到下一行

顶部菜单右侧的相同问题 - 任何第 4 个链接拆分到下一行*

我们尝试改变宽度 - 使用所有排列/组合 - 但没有帮助

**我们寻求的是**

*   .footer-top-box-left - 用于顶部菜单链接单元
*   .footer-top-box-right - 用于谷歌自定义搜索框

这样两者都在 1 行中

下面是用于的 css 代码 - pl 建议

```
#footer-container { 
   float:left;
   width:1000px;
   clear:both;
   background:#FFFFFF;
   text-align:center !important;
}   

#footer-container .footer-top-box {
   float:left;
   width:965px;
   margin:0 0 10px 5px;
   padding:0 5px 0 10px;
   height:33px;
   background:url(../images/footer-box-bg.gif) repeat-x;
   border:1px solid #e7e5e5;
}    

.footer-top-box .footer-top-box-left {
   float:left;
   width:300px;
   margin:0 0 0 5px;
   font: normal 10px Arial, Helvetica, sans-serif;
   color:#000000;
   text-align:left;
   padding:10px 0 0 0
}    

.footer-top-box-left img {
   margin:0 3px 0 3px;
}    

.footer-top-box .footer-top-box-right {
   float:right;
   width:500px;
   margin:0 5px 0 0 ;
   font: normal 10px Arial, Helvetica, sans-serif;
   color:#000000;
   text-align:right;
   padding:10px 0 0 0;
}    

.footer-top-box-right p {

margin:0;
padding:0;
font: normal 10px Arial, Helvetica, sans-serif;
color:#000000;
}    

.footer-top-box-right p a:link,
.footer-top-box-right p a:hover,
.footer-top-box-right p a:visited { 
   margin:0;
   padding:0;
   font: normal 10px Arial, Helvetica, sans-serif;
   color:#b60205;
   text-decoration:underline;
   text-align:justify;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:24:59.470

更改持有人 div 的宽度 - “footer-top-box-left”或“footer-top-box-right”，它应该可以工作。

使用您的 html 副本进行测试，在将“footer-top-box-left”从 300px 更改为 400px 宽度后，我能够在左侧添加第三个项目。

如果您想将框框作为单行，我建议您制作一个 div 并可能使用 float: right 用于必须向右对齐的菜单项。

# php - 每个会话不能有多个线程

> ID：12007504
> 
> 赞同：3
> 
> 时间：2012-08-17T14:15:14.550
> 
> 标签：php, ajax, session, long-polling, polling

我正在构建一些 webapp 并实现了长轮询（以及我的数据库中的命令队列），因此我的服务器可以异步向我的客户端发送命令等。命令被编码为 json 并通过 ajax 调用发送给客户端到服务器，并通过服务器到客户端的长轮询方式。

一切正常，直到我在 ajax.php 文件中包含我的“身份验证模块”。该模块包装会话内容并调用 session_start()。

问题是，我的长轮询例程最多可以等待 21 秒，然后再返回客户端。在此期间，服务器不会从同一会话运行任何内容。而是在长轮询 ajax 调用返回后立即执行。

我知道每个会话一次可能只有 1 个线程，并且请求排队。

现在的问题是：解决这个问题的最佳方法是什么？是否有一个设置允许每个会话有多个线程（在我的情况下，3 个就可以了）。或者我应该只是发送告诉客户他的 SessionID 是什么（我的数据库中有一些会话表，以跟踪哪个用户连接到哪个会话）。然后客户端可以将它与任何 ajax 调用一起发送，这样就可以绕过身份验证模块。

在后面的选项中，我担心它会因为最终的会话欺骗而引发一系列安全问题。我需要向每个会话发送一个“随机字符串”，以确保你不能太容易欺骗，但即便如此，它也不完美......

感谢您的遮阳篷:)

尼古拉斯·高蒂尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:40:39.273

众所周知的问题/事实是 PHP 在会话文件的使用期间锁定会话文件以防止出现竞争条件。

如果您查看 PHP 源代码 (ext/session/mod_files.c)，您可以看到该`ps_files_open`函数锁定会话文件并`ps_files_close`解锁它。

如果您`session_start()`在长时间运行的脚本开始时直接调用，并且没有显式关闭会话文件，它将被锁定直到脚本终止，PHP 将在脚本关闭期间释放所有文件锁定。

当您不使用会话时，您应该调用`session_write_close`将会话数据刷新到磁盘，并释放锁定，以便您的其他“线程”可以读取数据。

我相信你可以想象如果文件没有被锁定会发生什么。

```
T1: Open Session
T2: Open Session
...
T2: Write Data
T1: Write Data 
```

线程 2 写入的数据将被线程 1 完全**覆盖**，同时线程 1 想要写出的任何数据对线程 2 都是不可用的。

# html - 如何在IE7中删除链接周围的虚线边框

> ID：12007507
> 
> 赞同：22
> 
> 时间：2012-08-17T14:15:28.813
> 
> 标签：html, css, internet-explorer-7

单击时按钮和链接周围有边框。

![在此处输入图像描述](../Images/bffc666d922c2c887d5203314ee64ea4.png)

![在此处输入图像描述](../Images/03bcc3adb595a7f5f58c70383c85d542.png)

任何人都可以帮我解决删除它。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-17T14:20:03.880

你可以这样预设：

```
:focus{
    outline:0; /*removes the dotted border*/
} 
```

但请记住（出于可访问性的原因）将 CSS 文件中的“稍后”样式设置为更明显的样式。例如 ：

```
a:focus, a:active{
    color:#ff5500; /*different color than regular*/
}
input[type=submit]:focus, input[type=submit]:active{
    background-color:#444; /*different color than regular*/
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-07-11T11:41:32.993

试试这个

```
a:hover, a:active, a:focus {
  outline: 0;
 } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-17T14:18:04.867

它很难看，但大多数 IE 修复程序也是如此。

```
a:focus, *:focus {
    noFocusLine: expression(this.onFocus=this.blur());
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-17T14:42:52.560

首先，我可以看到您的一个标签是`IE7-bug`，而这实际上更像是一项功能。使用此点的目的`outline`是让用户能够使用鼠标滚轮或`tab`按键在各种控件之间导航。

在任何情况下，要在元素“聚焦”时定义元素的样式，请使用 CSS`:focus`选择器。简单地说，这个大纲的样式属性是`outline`; `outline: 0`将防止出现焦点轮廓。

**注意：**您可能只想在您的按钮上应用该规则，而不是在所有元素上应用该规则，因为某些用户可能习惯于看到一些指示焦点的东西，这使得使用上述方法更容易导航。

希望以任何方式有所帮助。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-07-18T11:47:00.280

`outline`IE7 不支持CSS 。该“浏览器”需要以下 CSS 表达式：

```
a {
    _noFocusLine: expression(this.hideFocus=true); 
} 
```

它也适用于较新的版本。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-17T14:18:44.380

这可以解决问题

```
a {
   outline:0;
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-05-17T06:59:38.767

这也将起作用

```
    一种
    {
        大纲样式：无；
    }

```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-01-07T10:01:50.957

a:link{大纲样式：无；}`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-08-17T14:18:14.460

尝试设置[大纲属性](https://developer.mozilla.org/en-US/docs/CSS/outline)：

```
a {
   outline: 0;
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-08-17T14:23:00.263

尝试

```
a {
     outline: none;
} 
```

始终尝试使用 css 重置。这将帮助您解决这样的问题。我使用[eric mayer css 重置工具](http://meyerweb.com/eric/tools/css/reset/)。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-05-21T07:59:50.270

将此规则应用于输入

```
input { outline : none ; } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-08-04T08:08:26.610

这是所有关于删除外线并将您的 CSS 放在所需类名下的代码。（IE 中的类名。）标签示例

```
a{
    _noFocusLine:expression(this.hideFocus=true);
    outline-style:none;
    outline:0; 
```

}

html 页面中所有标签的示例！

```
*{
    _noFocusLine:expression(this.hideFocus=true);
    outline-style:none;
    outline:0; 
```

}

html 页面中带有 myClassName 类的标签示例！

```
.myClassName{
    _noFocusLine:expression(this.hideFocus=true);
    outline-style:none;
    outline:0; 
```

}

html 页面中带有 id myidName 的标签的示例！

```
#myidName{
    _noFocusLine:expression(this.hideFocus=true);
    outline-style:none;
    outline:0; 
```

}

希望这有助于在主要浏览器中工作，如果不是它们太旧，那么还有多少人仍在使用这种旧浏览器的机会！

注意：`outline:none 0;`在较新的浏览器中也可以工作，但不是全部。但是`outline:0;`是通用的，在那些浏览器中不理解'none'并且你得到默认值，但是在所有使用这个大纲的浏览器中理解为0：。IE7 需要这个`_noFocusLine:expression(this.hideFocus=true);`

或使用 Javascript 其余的！

```
window.document.getElementById("myidName").blur();
window.document.getElementById("myidName").hideFocus=true;
window.document.getElementById("myidName").style.outline=0; 
```

或者

```
Obj=window.document.getElementById("myidName");
Obj.blur();
Obj.hideFocus=true;
Obj.style.outline=0; 
```

或检查元素是否存在！

```
if (window.document.getElementById("myidName")){
    Obj=window.document.getElementById("myidName");
    Obj.blur();
    Obj.hideFocus=true;
    Obj.style.outline=0;
} 
```

Javascript 可以解决 IE6 和 IE7 的问题，而其他 CSS 则不行！

* * *

## 回答 #13

> 赞同：-10
> 
> 时间：2012-08-17T14:17:39.110

您可以使用以下代码执行此操作：

```
 a:focus{
      border: none;
    } 
```

# android - 区域语言字体（Gurumukhi 或旁遮普语）在高于 2.2 的版本中不起作用

> ID：12007512
> 
> 赞同：1
> 
> 时间：2012-08-17T14:15:49.940
> 
> 标签：android, fonts

我在我的应用程序中使用了 gurumukhi(Punjabi) 字体。它在较低版本中运行良好，但在较高版本中却不行。我正在这样做

```
Typeface tf = Typeface.createFromAsset(getAssets(),"bulara_5.ttf");
                      Book_Data.setTypeface(tf);     
                      Book_Data.setText( XMLfunctions.getValue(e, "Pun")); 
```

谁能帮我。我怎样才能使它也支持更高版本。任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:55:40.683

我认为您这样做有误，我检查了一下，它在android 4上对我有用。

可能是你没有改变程序的语言，这是你问题的原因。请参阅此以了解您的应用程序的设置语言：

*   [在 Android 中以编程方式更改语言](https://stackoverflow.com/questions/2900023/change-language-programatically-in-android/9173571#9173571)

你可以看到这个问题来解决你的问题：

*   [我想在我的 Android 应用程序中显示地区语言（Gurumukhi）](https://stackoverflow.com/questions/11238909/i-want-to-show-the-reginonal-languagegurumukhi-font-in-my-android-app)

并检查您的资产中的字体名称（“bulara_5.ttf”），不要在资产文件夹中。名称必须是 bulara_5.ttf，它不是这样的 bulara_5.TTF。

# c# - 无法使用 asp.net 和 C# 访问 Microsoft Access 数据库

> ID：12007517
> 
> 赞同：0
> 
> 时间：2012-08-17T14:16:16.033
> 
> 标签：c#, asp.net, ms-access

这是我编写的代码，用于在单击按钮时向手风琴窗格添加一些文本：

```
protected void Button1_Click1(object sender, EventArgs e)
    {
        //Use a string variable to hold the ConnectionString.
        string connectString = "Provider=Microsoft.Jet.OLEDB.4.0;"
            + "Data Source=D:\\C#Samples\\StudentDetails\\WebRole1\\App_Data\\Students1.accdb";
        System.Data.OleDb.OleDbConnection cn = new System.Data.OleDb.OleDbConnection();
        cn.ConnectionString = connectString;
        //Create an OleDbConnection object, and then pass in the ConnectionString to the constructor.
        //OleDbConnection cn = new OleDbConnection(ConfigurationManager.ConnectionStrings["AccessConnectionString"].ConnectionString);
        try
        {
            //Open the connection.
            cn.Open();
        }
        catch (Exception ex)
        {
            AccordionPane1.Controls.Add(new LiteralControl("Open Error"));
        }

            string selectString = "SELECT * FROM BasicInfo";

            //Create an OleDbCommand object.
            //Notice that this line passes in the SQL statement and the OleDbConnection object
            OleDbCommand cmd = new OleDbCommand(selectString, cn);

            //Send the CommandText to the connection, and then build an OleDbDataReader.
            //Note: The OleDbDataReader is forward-only.

            try
            {
                OleDbDataReader reader=null;
                try
                {
                    reader = cmd.ExecuteReader();
                }
                catch (Exception es)
                {
                    AccordionPane1.Controls.Add(new LiteralControl(" datareader"));
                }
                string s = "s";
                reader.Read();
                s = reader["S_No"].ToString();

                AccordionPane1.Controls.Add(new LiteralControl(s));
                //Close the reader and the related connection.
                reader.Close();
                cn.Close();
            }
            catch (Exception ex)
            {
                AccordionPane1.Controls.Add(new LiteralControl(" Read Error"));
            }
    } 
```

我在 connectString 中指定的文件夹中有我的 access 2007 数据库。当我在浏览器中查看时，单击按钮我得到了所有三个例外： ![在此处输入图像描述](../Images/78f79396fb8af0d905be9021a29d9f0b.png)

打开数据库可能会出现什么问题？我是否需要进行任何其他更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:22:16.570

改变

> 提供者=Microsoft.Jet.OLEDB.4.0；

到

> 提供者=Microsoft.ACE.OLEDB.12.0

```
Provider=Microsoft.ACE.OLEDB.12.0;"
            + "Data Source=D:\\C#Samples\\StudentDetails\\WebRole1\\App_Data\\Students1.accdb 
```

希望它能解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:22:53.603

您的连接字符串可能是问题的原因

```
string ConnStr = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\abc.mdb;";

OleDbConnection MyConn = new OleDbConnection(ConnStr); 
```

这**对于访问 2007**还检查数据库的路径是否正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T14:24:57.950

您可以使用`|DataDirectory|` *代替*，`real path`并且必须更改`Provider=Microsoft.ACE.OLEDB.12.0`（如@MMK 所建议）

```
 string connectString = @"Microsoft.ACE.OLEDB.12.0;
       Data Source=|DataDirectory|\Students1.accdb;Persist Security Info=False;"; 
```

并始终使用正确`using`处理*IDisposable*对象的块。

```
using(OleDbConnection cn=new OleDbConnection())
{
 using(OleDbCommand cmd=new OleDbCommand())
 {
  cn.ConnectionString=connectionString;
  cmd.CommandText=selectString;
  cmd.Connection=cn;
  ...
 }
} 
```

# objective-c - 防止 UIImage 在调用 -drawInRect: 时调整大小

> ID：12007519
> 
> 赞同：2
> 
> 时间：2012-08-17T14:16:21.997
> 
> 标签：objective-c, ios, core-graphics, drawrect

我正在渲染 UIImage，并通过调用UIImage`- drawRect:`将其放入传入的文件中。它会自动调整大小并自行拉伸，这是我不想要的。我怎样才能保持它原来的大小？`CGRect``drawInRect: rect`

```
UIImage* left = [UIImage imageNamed: @"Map_info_bubble_left"];
UIImage* center = [UIImage imageNamed: @"Map_info_bubble_center"];
UIImage* right = [UIImage imageNamed: @"Map_info_bubble_right"];

UIImage* leftCapStretched = [left resizableImageWithCapInsets: UIEdgeInsetsMake(0, 20, 0, 0)];
UIImage* rightCapStretched = [right resizableImageWithCapInsets: UIEdgeInsetsMake(0, 0, 0, 15)];   

CGFloat fullWidth = leftCapStretched.size.width + center.size.width + rightCapStretched.size.width;

UIGraphicsBeginImageContextWithOptions(CGSizeMake(fullWidth, center.size.height), NO, 0);
[leftCapStretched drawAtPoint: CGPointMake(0, 0)];
[center drawAtPoint: CGPointMake(leftCapStretched.size.width, 0)];
[rightCapStretched drawAtPoint: CGPointMake(left.size.width + center.size.width, 0)];
UIImage* callout = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

[callout drawInRect: rect]; 
```

本质上发生的事情是中心图像在大写拉伸时应保持原始大小，但中心正在拉伸并且大写拉伸不够。我注意到，如果我乘以`fullWidth`2，它会将中心缩小到更接近应有的位置。

编辑：在阅读文档后更简单地询问，有没有办法防止 UIImage 在`drawInRect:`被调用时缩放以适应矩形？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:50:01.960

这可以简单地通过将图像大小属性传递给`drawInRect:`

前任：

```
[myImage drawInRect:CGRectMake(someOriginX, someOriginY, myImage.size.width, myImage.size.height)]; 
```

# java - 使用 sbt 测试番石榴代码时出现 IncompatibleClassChangeError

> ID：12007523
> 
> 赞同：3
> 
> 时间：2012-08-17T14:16:37.817
> 
> 标签：java, scala, maven, sbt, guava

我有一个使用 maven 和 sbt 的 Java 1.6 + Scala 2.9.2 项目。当我添加 guava Cache 类时，该项目开始在测试中抛出此异常：

```
java.lang.IncompatibleClassChangeError: 
class com.google.common.cache.CacheBuilder$3 has interface 
com.google.common.base.Ticker as super class 
```

做`sbt clean compile`的很好，但`sbt clean test`会抛出这个异常。

番石榴的版本是13.0

引发异常的模块有：

```
import com.google.common.cache.{CacheBuilder, Cache}
...
val cache: Cache[String, Integer] = CacheBuilder.newBuilder()  
     .maximumSize(5000).build() 
```

我的 sbt 依赖项是：

```
libraryDependencies ++= Seq(
    "org.scala-tools.testing" %% "scalacheck" % "1.9" % "test" changing(),
    "org.specs2" %% "specs2" % "1.9" % "test"
) 
```

Maven依赖项是：

```
<dependencies>
    <dependency>
      <groupId>org.apache.thrift</groupId>
      <artifactId>libthrift</artifactId>
      <version>0.8.0</version>
    </dependency>
    <dependency>
      <groupId>com.google.guava</groupId>
      <artifactId>guava</artifactId>
      <version>13.0</version>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-log4j12</artifactId>
      <version>1.6.6</version>
    </dependency>
    <dependency>
      <groupId>redis.clients</groupId>
      <artifactId>jedis</artifactId>
      <version>2.0.0</version>
      <type>jar</type>
    </dependency>
    <dependency>
      <groupId>com.googlecode.json-simple</groupId>
      <artifactId>json-simple</artifactId>
      <version>1.1</version>
    </dependency>
    <dependency>
      <groupId>org.apache.zookeeper</groupId>
      <artifactId>zookeeper</artifactId>
      <version>3.3.1</version>
    </dependency>
    <dependency>
      <groupId>org.scalatest</groupId>
      <artifactId>scalatest_2.9.1</artifactId>
      <version>1.8</version>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.8</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.mockito</groupId>
      <artifactId>mockito-all</artifactId>
      <version>1.9.0</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.hamcrest</groupId>
      <artifactId>hamcrest-all</artifactId>
      <version>1.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>com.novocode</groupId>
      <artifactId>junit-interface</artifactId>
      <version>0.8</version>
      <scope>test</scope>
    </dependency>
  </dependencies> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:03:42.633

Ticker 在 Guava 13 之前从接口更改为抽象类。

这发生在测试中而不是编译中的事实是一个很好的指标。

我认为早期版本的 Guava 最终会出现在您的测试类路径中，可能是作为传递依赖项。

您可以尝试使用[sbt-inspectr](https://github.com/eed3si9n/sbt-inspectr)来探索测试类路径并了解更多信息，或者您可以尝试排除以下内容：

```
"org.scala-tools.testing" %% "scalacheck" % "1.9" % "test" changing(), excludeAll(
    ExclusionRule(organization = "com.google.guava")
) 
```

# asp.net-mvc-3 - 无法在本地调试，因为 sql 连接字符串被忽略

> ID：12007527
> 
> 赞同：0
> 
> 时间：2012-08-17T14:16:43.927
> 
> 标签：asp.net-mvc-3, sql-server-2008, windows-server-2008, windows-8, visual-studio-2012

我目前正在尝试调试一个我作为副项目选择的解决方案，但我运气不佳。该解决方案取决于存储在我本地网络上的 MSSQL 服务器上的数据（用户 ID、页面内容等），但是当我在 VS2012 调试模式下执行解决方案时，连接失败。我收到的错误表明连接失败，并且用户被拒绝。

当我登录 SQL 服务器并检查事件日志时，我可以看到登录 ID 被拒绝的位置，但它被拒绝了，因为它不是我在连接字符串中指定的登录 ID。它似乎正在尝试使用我的 Windows 身份验证（在 Windows 8 中是实时 ID），这将不起作用，因为我的 Windows ID 没有（也不应该）访问服务器。

一些基本的连接字符串信息（所有数据都已更改以保护无辜者......也就是我可怜的服务器）

```
Data Source=myServer; Initial Catalog=myDB; User ID=myUsername; Password=myPassword; Integrated Security=false; 
```

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:20:37.827

在*整个解决方案*中搜索`myServer`. 这应该可以解决这个问题，因为连接字符串是在其他地方定义的并且它连接到同一个服务器。

# asp.net - 通过 ASP.net 中的 ID 属性访问服务器端控件

> ID：12007528
> 
> 赞同：2
> 
> 时间：2012-08-17T14:16:48.173
> 
> 标签：asp.net, vb.net, multidimensional-array, runatserver

在我的 default.aspx 页面上，我有一堆带有 ID 和 runat="server" 的 div：

```
<div id="serverOne" runat="server"></div>
<div id="serverTwo" runat="server"></div>
<!--etc...--> 
```

在后面的代码中，我声明了一个具有 2 个值的多维数组（或网格）——第一个是 IP 地址，第二个是服务器名称。

```
Dim servers = {{"10.0.0.0", "serverOne"}, {"10.0.0.1", "serverTwo"}} 
```

我的问题是，有没有一种方法可以使用数组中的值从后面的代码中定位我的 div？

```
For i As Integer = 0 To 1

     'This is what I want it to do:
     servers(i, 1).InnerHtml = "<span>Testing " & servers(i, 1) & "</span>"

Next 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:37:26.383

您可以使用`FindControl`页面上的方法执行此操作。但是，开箱即用`FindControl`只查看第一级子级，并没有进入子级的子级。为了处理这个问题，您需要使用一种帮助方法，该方法允许`FindControl`递归地搜索控件层次结构以找到您想要的。将此方法添加到您的代码后面，或者多个页面可以访问的某个共享类中：

```
Protected Function FindControlRecursive(control As Control, id As String)

    If (control.ID = id) Then
        Return control
    End If

    For Each ctl In control.Controls

        Dim foundControl = FindControlRecursive(ctl, id)

        If (foundControl IsNot Nothing) Then
            Return foundControl
        End If

    Next

    Return Nothing

End Function 
```

一旦你有了它，很容易`<div>`通过使用字符串 ID 属性找到你的。

```
For i As Integer = 0 To 1

    Dim div = CType(FindControlRecursive(Me, servers(i, 1)), HtmlGenericControl)
    div.InnerHtml = "<span>Testing " & servers(i, 1) & "</span>"

Next 
```

**参考：** [http ://forums.asp.net/t/1107107.aspx/1](http://forums.asp.net/t/1107107.aspx/1)

# java - 使方法可重用

> ID：12007533
> 
> 赞同：1
> 
> 时间：2012-08-17T14:17:20.547
> 
> 标签：java, oop

我今天早些时候问了一个类似的问题，但现在我被告知要求已经改变。

我有 3 个课程 - `Product`，`ProductOffering`（PO）和`ProductOfferingLists`（POL）。产品包含 PO，PO 包含 POL。所有这些类都扩展了一个名为 CMS 的抽象类。

我想将 PO 附加到 P，并将 POL 附加到 PO，但我正在寻找一种可重用的方法，因为除了类名之外，逻辑是相同的。

不幸的是，我的测试器类需要两个方法，而层次类需要强制转换来实现抽象 CMS 契约。

这让我发疯了。我怎样才能使它更可重用，所以我没有多种方法和铸造？

```
package puzzler;
import java.util.ArrayList;
import java.util.List;

public class Tester {
    public static void main(String[] args) {
        Product p = new Product();
        PO pa = new PO();
        POL po = new POL();

        List<PO> lpa = new ArrayList<PO>();
        List<POL> lpo = new ArrayList<POL>();

        attachChildToParent(lpa, p);
        attachChildToParent(lpo, pa);
    }

    static void attachChildToParent(List<PO> listChild, Product parent) {
        for (PO po : listChild) {
            parent.attach(po);
        }
    }

    static void attachChildToParent(List<POL> listChild, PO parent) {
        for (POL po : listChild) {
            parent.attach(po);
        }
    }
} 
```

CMS 类：

```
package puzzler;

abstract class CMS {
    abstract void attach(CMS childNode);
} 
```

产品类 - 拥有 PO 的层次结构的顶部：

```
package puzzler;
import java.util.List;

public class Product extends CMS {
    List<PO> lpo;

    public List<PO> getLpo() {
        return lpo;
    }

    public void setLpo(List<PO> lpo) {
        this.lpo = lpo;
    }

    @Override
    void attach(CMS childNode) {
        this.getLpo().add((PO)childNode);
    }
} 
```

产品提供，由产品拥有，反过来又拥有一个产品提供列表

```
package puzzler;
import java.util.List;

public class PO extends CMS {
    List<POL> lpol;

    public List<POL> getLpo() {
        return lpol;
    }

    public void setLpo(List<POL> lpol) {
        this.lpol = lpol;
    }

    @Override
    void attach(CMS childNode) {
        this.getLpo().add((POL)childNode);
    }
} 
```

PO 拥有的产品提供列表 (POL)

```
package puzzler;

public class POL extends CMS {
    @Override
    void attach(CMS childNode) {
        throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:51:24.780

（使用 Java 7 语法，但很容易适应 Java 6）

如下定义您的 CMS 类：

```
public abstract class CMS<C extends CMS<?>> {
    public abstract void attach(C childNode);
} 
```

然后您的 Product 类可以如下所示：

```
public class Product extends CMS<PO> {
    private List<PO> lpo = new ArrayList<>();

    public List<PO> getLpo() {
        return lpo;
    }

    public void setLpo(List<PO> lpo) {
        this.lpo = lpo;
    }

    @Override
    public void attach(PO childNode) {
        getLpo().add(childNode);
    }
} 
```

然后你的 PO 类可以如下所示：

```
public class PO extends CMS<POL> {
    private List<POL> lpol = new ArrayList<>();

    public List<POL> getLpo() {
        return lpol;
    }

    public void setLpo(List<POL> lpol) {
        this.lpol = lpol;
    }

    @Override
    public void attach(POL childNode) {
        getLpo().add(childNode);

    }
} 
```

然后你的 POL 类可以如下所示：

```
public class POL extends CMS<CMS<?>> {
    @Override
    public void attach(CMS<?> child) {
        throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

最后，您的 Tester 类可能如下所示：

```
public class Tester {
      public static void main(String[] args) {
            Product p = new Product();
            PO po = new PO();

            List<PO> pos = new ArrayList<PO>();
            List<POL> pols = new ArrayList<POL>();

            attachChildToParent(pos, p);
            attachChildToParent(pols, po);
        }

    private static <C extends CMS<?>> void attachChildToParent(List<C> childNodes, CMS<C> parent) {
        for (C childNode : childNodes) {
            parent.attach(childNode);
        }
    }
} 
```

只需要一种方法，不需要强制转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:21:55.687

只需将泛型与组合模式一起使用，例如

*   将 CMS 定义为接口
*   定义单个类 PO，按类型参数化
*   在 CMSImpl 或类似的东西中实现一次方法

[http://en.wikipedia.org/wiki/Generics_in_Java](http://en.wikipedia.org/wiki/Generics_in_Java)

[http://en.wikipedia.org/wiki/Composite_pattern](http://en.wikipedia.org/wiki/Composite_pattern)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:27:49.370

抽象类，如在实现类中使用的接口，需要在任何地方使用。

删除了额外的演员表和两种方法替换为一种。

```
import java.util.ArrayList;
import java.util.List;

public class Tester {
  public static void main(String[] args) {
    Product p = new Product();
    PO pa = new PO();
    POL po = new POL();

    List<CMS> lpa = new ArrayList<CMS>();
    List<CMS> lpo = new ArrayList<CMS>();

    attachChildToParent(lpa, p);
    attachChildToParent(lpo, pa);
  }

  static void attachChildToParent(List<CMS> listChild, CMS parent) {
    for (CMS po : listChild) {
      parent.attach(po);
    }
  }
}

abstract class CMS {
  abstract void attach(CMS childNode);
}

class Product extends CMS {
  List<CMS> lpo;

  public List<CMS> getLpo() {
    return lpo;
  }

  public void setLpo(List<CMS> lpo) {
    this.lpo = lpo;
  }

  @Override
  void attach(CMS childNode) {
    this.getLpo().add(childNode);
  }
}

class PO extends CMS {
  List<CMS> lpol;

  public List<CMS> getLpo() {
    return lpol;
  }

  public void setLpo(List<CMS> lpol) {
    this.lpol = lpol;
  }

  @Override
  void attach(CMS childNode) {
    this.getLpo().add(childNode);
  }
}
class POL extends CMS {
  @Override
  void attach(CMS childNode) {
    throw new UnsupportedOperationException("Not supported yet.");
  }
} 
```

# java - Hashtable over ConcurrentHashMap的具体用法

> ID：12007536
> 
> 赞同：3
> 
> 时间：2012-08-17T14:17:30.950
> 
> 标签：java, concurrency, hashtable, concurrenthashmap

`ConcurrentHashMap`在 1.5 中作为 java`java.util.concurrent`包的一部分引入。在此之前，拥有`threadsafe`地图的唯一方法是使用`HashTable`or `Collections.synchronizedMap(Map)`。

对于所有实际目的（多线程环境），`ConcurrentHashMap`足以满足需要，除了线程需要映射的***统一视图的一种情况。***

我的问题是，除了拥有地图的统一视图之外，还有其他情况`ConcurrentHashMap`不是一种选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:56:48.477

`Hashtable`自 Java 1.2 以来一直不鼓励使用 ，并且 的实用性`synchronizedMap`非常有限，并且由于锁定的粒度太细，几乎总是最终不足。但是，当您确实遇到单个更新是您需要的粒度大小的情况时，这`ConcurrentHashMap`是一个比`synchronizedMap`. 它具有更好的并发性、线程安全的迭代器（不，`synchronizedMap` **没有**这些——这是因为它的设计是围绕非线程安全映射的包装器）、更好的整体性能以及需要支付的额外内存重量很少这一切。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T15:04:16.580

这是一个延伸，但我会把它作为一个用例。

如果您需要一个线程安全的 Map 实现，您可以执行一些额外的复合操作，这些操作无法通过`ConcurrentMap`. 假设您要确保在添加第三个对象之前不存在另外两个对象。

```
Hashtable t = new Hashtable();

synchronized(t){
   if(!t.contains(object1) && !t.contains(object2)){
      t.put(object3,object3);
   }
} 
```

同样，这是一个延伸，但您将无法在确保原子性和线程安全的同时使用 CHM 实现这一点。因为 a`Hashtable`及其`synchronizedMap`对应部分的所有操作都在 Map 的实例上同步，这确保了线程安全。

归根结底，我很少（如果有的话）使用`synchronizedMap`/`Hashtable`我建议你也应该这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T14:44:13.080

据我了解，是`ConcurrentMap`替代线程安全的目的。不鼓励使用所有类。因此，您的问题的答案是“不，没有其他情况”。`HashTable``Collections.synchronizedMap()`

另请参阅：[ConcurrentHashMap 和 Collections.synchronizedMap(Map) 有什么区别？](https://stackoverflow.com/questions/510632)

# celery - Celery 组仅具有自上次检查以来已完成的结果

> ID：12007537
> 
> 赞同：0
> 
> 时间：2012-08-17T14:17:33.207
> 
> 标签：celery

在 Celery 2 中，我有一个 TaskSet，其设置如下：

```
for (item,jobId) in itemsAndJobs:
    tasks.append(waitForOutput.subtask((jobId,item)))
job = TaskSet(tasks)
result = job.apply_async() 
```

然后稍后，我将通过以下检查来检查 TaskSet 是否已完成：

```
job.ready() and job.successful() 
```

这工作得很好——waitForOutput 任务会慢慢移动，然后当它们都完成后，作业检查就会完成。我可以多次检查没有任何问题。

在 celery 3 中，我尝试了将其更改为组的快速而肮脏的方法，只需更改

```
TaskSet(tasks) 
```

至

```
group(tasks) 
```

除非我等到所有 waitForOutput 任务完成后才检查就绪并成功，否则这永远不会奏效。ready() 总是返回 false。我添加了一些日志记录和 30 秒的默认重试，这就是我所看到的 -

*   启动 5 个 waitForOutput 作业
*   检查 ready()，没有 waitForOutput 作业完成，ready 为 false
*   2 个 waitForOutput 作业完成
*   检查 ready()，ready 为 false，job.check_completed() 为 2
*   检查 ready()，ready 为 false，job.check_completed() 为 0
*   剩余 3 个 waitForOutput 作业完成
*   检查 ready()，ready 为 false，job.check_completed() 为 3

如果我使用 Celery 3 代码并从任务中导入 TaskSet 并使用它而不是组，我会看到相同的行为。

我很想被告知我只是错误地使用了组！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:20:11.993

我通过迁移到 Redis 作为我的结果后端解决了这个问题。使用 AMQP 作为结果后端似乎是一个错误。

# java - 每当其大小达到阈值时，是否所有类似字典的数据结构都需要重新散列？

> ID：12007539
> 
> 赞同：0
> 
> 时间：2012-08-17T14:17:34.710
> 
> 标签：java, dictionary, hashmap, hashtable

我想知道那些类字典的数据结构（Hashtable、HashMap、LinkedHashMap、TreeMap、ConncurrentHashMap、SortedMap 等）在其大小达到阈值时是否需要进行重新散列操作？由于每当我们调整表格大小时它真的很昂贵，所以我想知道在调整表格大小时是否还有其他不需要重新散列的东西或任何提高此类操作性能的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:25:36.093

SortedMap（TreeMap）不需要rehash，它被设计成红黑树，因此是自平衡的

为了提高性能，可能需要重新散列与封闭哈希相关的结构，但这是一种权衡。

所以它可以在不重新散列的情况下实现，这就是引入的负载因子参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:49:41.083

为了提高性能，估计基于应用程序的近似初始容量，并在为数据结构分配内存时选择正确的负载因子。

除非您实现自己的 HashMap，否则无法避免重新散列。

其他一些事实： 重新散列仅发生在 HashRelated 数据结构上，即 HashMap、HashTable 等。因此，所有非散列数据结构，如树形图、排序图（是一个接口，因此我们可以将其排除在外）在达到限制时不会重新散列。

当 ArrayList 达到阈值时，总是会重新调整大小。因此，如果您在数据结构之间有很多插入和删除，请使用链接列表。

# c# - 等待从弹出表单中获取信息

> ID：12007541
> 
> 赞同：8
> 
> 时间：2012-08-17T14:17:40.000
> 
> 标签：c#, multithreading, forms, wait

在初始化一个表单（主表单）时，它会调用另一个表单来获取一堆起始输入，然后传递大量信息：

```
Form3 getup = new Form3();
getup.Show();
example = getup.example; 
```

但是，我需要等待这个新的表单信息完成。

```
Form3 getup = new Form3();
getup.Show();
waitfordone();
example = getup.example; 
```

ATM，我尝试过使用 while 语句：

```
Form3 getup = new Form3();
getup.Show();
While(getup.visible=true)Console.WriteLine("waiting");
example = getup.example; 
```

但这会导致挂起......也就是说，它运行，然后冻结。我怀疑这是因为 while 循环正在吃掉所有的处理过程。所以，我尝试制作一个新线程

```
Form3 getup = new Form3();
Thread t = new Thread(getup.Show());
t.start();
While(getup.visible=false)Console.WriteLine("waiting"); // takes a little bit to open
While(getup.visible=true)Console.WriteLine("waiting"); //waits for close
example = getup.example; 
```

但这也会导致它挂起。也许出于同样的原因。我研究了自动重置事件。

我试过了：

```
AutoResetEvent invisible = new AutoResetEvent(false);
Form3 getup = new Form3();
void setup_invisible(object sender, EventArgs e)
{
    if (getup.Visible == false) invisible.Set();
}
public ... {
getup.VisibilityChanged += new EventHandle(setup_Invisible);
getup.show();
invisible.WaitOne();
... }
// and many other variations on this 
```

但唉，它打开form3，关闭它（因为线程已经完成？），然后挂在`invisible.WaitOne();`

有人可以解释一下如何做到这一点，阅读只会让我更加困惑。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T14:20:47.470

您可能需要一个对话框。

```
Form3 getup = new Form3();
getup.ShowDialog();
example = getup.example; 
```

这将暂停执行，并且仅在表单关闭后继续执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:20:56.597

你会想要使用事件：

```
Form3 getup = new Form3();
getup.Show();
getup.FormClosing += (sender, args) =>
{
  example = getup.example;
} 
```

当前方法立即完成很重要，以便 UI 线程可以继续其循环。通过附加到事件处理程序，您可以确保您的代码在需要时运行。“等待子窗体关闭”的整个概念本质上与winforms的设计背道而驰。

您还可以使表单成为对话框弹出窗口。

```
Form3 getup = new Form3();
getup.ShowDialog();
example = getup.example; 
```

这将工作得很好，不会意外冻结。

# android - AsyncTask 致命异常 #!

> ID：12007550
> 
> 赞同：0
> 
> 时间：2012-08-17T14:18:11.693
> 
> 标签：android, android-emulator, android-asynctask

每次我尝试为我的应用程序（android 运行时）运行注册活动时，我都会不断接近。以下是我得到的错误：

```
08-16 23:58:41.146: W/dalvikvm(4017): threadid=10: thread exiting with uncaught exception (group=0x4001d5a0)
08-16 23:58:41.156: E/AndroidRuntime(4017): FATAL EXCEPTION: AsyncTask #1
08-16 23:58:41.156: E/AndroidRuntime(4017): java.lang.RuntimeException: An error occured while executing doInBackground()
08-16 23:58:41.156: E/AndroidRuntime(4017):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-16 23:58:41.156: E/AndroidRuntime(4017):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
08-16 23:58:41.156: E/AndroidRuntime(4017):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
08-16 23:58:41.156: E/AndroidRuntime(4017):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
08-16 23:58:41.156: E/AndroidRuntime(4017):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
08-16 23:58:41.156: E/AndroidRuntime(4017):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
08-16 23:58:41.156: E/AndroidRuntime(4017):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
08-16 23:58:41.156: E/AndroidRuntime(4017):     at java.lang.Thread.run(Thread.java:1027)
08-16 23:58:41.156: E/AndroidRuntime(4017): Caused by: java.lang.NullPointerException
08-16 23:58:41.156: E/AndroidRuntime(4017):     at com.thryfting.www.RegisterActivity$register.doInBackground(RegisterActivity.java:124)
08-16 23:58:41.156: E/AndroidRuntime(4017):     at com.thryfting.www.RegisterActivity$register.doInBackground(RegisterActivity.java:1)
08-16 23:58:41.156: E/AndroidRuntime(4017):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-16 23:58:41.156: E/AndroidRuntime(4017):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
08-16 23:58:41.156: E/AndroidRuntime(4017):     ... 4 more
08-16 23:58:41.416: E/WindowManager(4017): Activity com.thryfting.www.RegisterActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4058b4c8 that was originally added here
08-16 23:58:41.416: E/WindowManager(4017): android.view.WindowLeaked: Activity com.thryfting.www.RegisterActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4058b4c8 that was originally added here
08-16 23:58:41.416: E/WindowManager(4017):  at android.view.ViewRoot.<init>(ViewRoot.java:277)
08-16 23:58:41.416: E/WindowManager(4017):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
08-16 23:58:41.416: E/WindowManager(4017):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
08-16 23:58:41.416: E/WindowManager(4017):  at android.view.Window$LocalWindowManager.addView(Window.java:433)
08-16 23:58:41.416: E/WindowManager(4017):  at android.app.Dialog.show(Dialog.java:265)
08-16 23:58:41.416: E/WindowManager(4017):  at com.thryfting.www.RegisterActivity$register.onPreExecute(RegisterActivity.java:106)
08-16 23:58:41.416: E/WindowManager(4017):  at android.os.AsyncTask.execute(AsyncTask.java:391)
08-16 23:58:41.416: E/WindowManager(4017):  at com.thryfting.www.RegisterActivity.onClick(RegisterActivity.java:78)
08-16 23:58:41.416: E/WindowManager(4017):  at android.view.View.performClick(View.java:2532)
08-16 23:58:41.416: E/WindowManager(4017):  at android.view.View$PerformClick.run(View.java:9293)
08-16 23:58:41.416: E/WindowManager(4017):  at android.os.Handler.handleCallback(Handler.java:587)
08-16 23:58:41.416: E/WindowManager(4017):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-16 23:58:41.416: E/WindowManager(4017):  at android.os.Looper.loop(Looper.java:150)
08-16 23:58:41.416: E/WindowManager(4017):  at android.app.ActivityThread.main(ActivityThread.java:4263)
08-16 23:58:41.416: E/WindowManager(4017):  at java.lang.reflect.Method.invokeNative(Native Method)
08-16 23:58:41.416: E/WindowManager(4017):  at java.lang.reflect.Method.invoke(Method.java:507)
08-16 23:58:41.416: E/WindowManager(4017):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-16 23:58:41.416: E/WindowManager(4017):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-16 23:58:41.416: E/WindowManager(4017):  at dalvik.system.NativeStart.main(Native Method) 
```

这是我的 AsyncTask 代码，如果我做错了什么，你能告诉我吗？

```
public void onClick(View v) {
        // TODO Auto-generated method stub
    switch(v.getId()){
    case R.id.btnRegister:       

        String userEmail   = inputEmail.getText().toString();
        String userPassword = inputPassword.getText().toString();
        String userFullName = inputPassword.getText().toString();

        //Check if all fields have been completed.
        if (userEmail.equals("") || userPassword.equals("") || userFullName.equals("")){
            Toast.makeText(getApplicationContext(), 
                    "You must fill in all of the fields.", Toast.LENGTH_SHORT).show();
            return;

        } 

        new register().execute();

        break;

    case R.id.link_to_login:
        Intent i = new Intent(getApplicationContext(), LoginActivity.class);
        startActivity(i);

        //Close Registration View
        finish();

        break;

        }

    }

    public class register extends AsyncTask<String, String, String>{

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            pDialog = new ProgressDialog(RegisterActivity.this);
            pDialog.setMessage("Joining Thryfting...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub

            // Register Button Click event
                    String name = inputFullName.getText().toString();
                    String email = inputEmail.getText().toString();
                    String password = inputPassword.getText().toString();
                    UserFunctions userFunction = new UserFunctions();
                    JSONObject json = userFunction.registerUser(name, email, password);

                    // check for login response
                    try {
                        if (json.getString(KEY_SUCCESS) != null) {

                            registerErrorMsg.setText("");

                            String res = json.getString(KEY_SUCCESS);

                            if(Integer.parseInt(res) == 1){
                                // user successfully registred
                                // Store user details in SQLite Database
                                DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                                JSONObject json_user = json.getJSONObject("user");

                                // Clear all previous data in database
                                userFunction.logoutUser(getApplicationContext());
                                db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));

                                // Launch Dashboard Screen

                                Intent dashboard = new Intent(getApplicationContext(), Timeline.class);

                                // Close all views before launching Dashboard
                                dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                startActivity(dashboard);

                                // Close Registration Screen
                                finish();
                            }else{
                                // Error in registration
                                //registerErrorMsg.setText("Error occured in registration");
                                Toast.makeText(getApplicationContext(), KEY_ERROR_MSG, Toast.LENGTH_SHORT).show();
                            }
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }

            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            pDialog.dismiss();
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:30:58.010

在你的`doInBackground`方法中，您需要返回 a`String`而不是`null`.

您还应该将新的移动`Intent`到`onPostExecute`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:24:38.657

您不能从 AsyncTask `doInBackground()`（或除 UI 线程之外的任何线程）访问 UI 组件。

示例：`Toast.makeText(...).show();`。

相反，您应该在`onProgressUpdate()`or中使用它`onPostExecute()`。

# xslt - VS2012 是否使用 XSLT 1.0？

> ID：12007553
> 
> 赞同：2
> 
> 时间：2012-08-17T14:18:15.210
> 
> 标签：xslt, visual-studio-2012

[以前的版本使用 XSLT 1](https://stackoverflow.com/a/4202068/57883)

VS2012中仍然是这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:21:06.490

> 以前的版本使用 XSLT 1
> 
> VS2012中仍然是这种情况吗？

是的。

# microsoft-sync-framework - 在集中式模型中同步框架和 SQL Server - 是否需要在中央服务器上安装 SF？

> ID：12007557
> 
> 赞同：0
> 
> 时间：2012-08-17T14:18:35.267
> 
> 标签：microsoft-sync-framework, centralized

大家好，请原谅新手的问题，我是 Microsoft Sync Framework 的新手。我在 Internet 上进行了广泛的研究，以便通过不同版本的 Sync Framework、SQL Server、Sync Services for ADO.NET、SyncAgent 与 SyncOrchestrator 等找到解决这个难题的方法，以及应该怎样做用在什么类型的场景中。不幸的是，在为如何正确编写 ASP.NET 2.0 C# Web 应用程序一整天苦苦挣扎之后，我仍然迷失了方向。

我目前的情况是这样的：我正在为一个大型部门开发应用程序，我不能指望在服务器端安装新东西会获得批准。我坚持使用 SQL Server 2008 并且（我相信），服务器上安装了 Sync Framework 1.0。但是，我可以自由地在将连接到服务器的客户端计算机上安装更高版本。这些将具有 SQL Server 2008 Express（不是 Compact），并且每个都将运行 Web 应用程序。在他们的本地主机 IIS 中。同步模型是集中式的，客户端只会连接到服务器进行双向同步（在星形网络拓扑中，我们是否称其为中心辐射模型？）但不会相互连接（没有点对点） - 同行合作）。

我已经准备好数据库的两侧进行同步（启用更改跟踪，为主键设置 GUID 数据类型等）

同步的核心，使两个节点之间的接口同步的程序，似乎完全是客户端的Web应用程序。对？

**问题：如果我想使用 Sync Framework v2.0 或 v2.1，我可以忽略服务器上安装的版本吗？换句话说，服务器端的 Sync Framework 是否还在做某事？SQL Server 上没有安装 Web 应用程序。**

不幸的是，我在网上找不到这个相当简单的问题的答案！非常感谢您的帮助！祝你有美好的一天！最诚挚的问候， Zyxy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:38:02.543

不，您不需要在中央服务器上安装同步框架。您需要的中央数据库只是一个连接字符串。只要您可以使用具有足够权限的登录名访问中央数据库，那么您就不需要在其上安装任何东西。同步应用程序可以在任何地方运行，只要它能够连接到中央服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:41:13.460

取决于您如何构建应用程序。

如果所有同步代码都在您的应用程序上，并且您只需将其指向中央 sql 服务器，则无需在服务器上安装同步框架。

但是，如果您决定使用 WCF，以便在服务器端拥有同步的服务组件，那么您需要在服务器上使用同步框架。您的客户端将拥有服务器端服务的代理，并且部分同步将在 wcf 服务的服务器端执行。

对于客户端的 SQL Express，如果您使用 VS Local Database Cache Project 项目或者您手动针对 SyncAgent/SQLCeClientSyncProvider/DbServerSyncProvider 进行编码，则 SQL Ce 是唯一受支持的客户端数据库。

如果您使用 SQL Express，则必须使用较新的 SyncOrchestrator/SqlSyncProvider 组合，但不使用内置的 SQL 更改跟踪。

# common-lisp - ASDF 初始化源注册表错误？

> ID：12007566
> 
> 赞同：0
> 
> 时间：2012-08-17T14:19:30.250
> 
> 标签：common-lisp, asdf, allegro-cl

我一直在对 ASDF2 猛烈抨击，只想进行健全性检查。当我 eval (asdf:initialize-source-registry) 没有参数或任何参数时，我没有得到任何价值。当我检查*source-registry*时，我得到一个空的哈希表。这是一个错误吗？

我在 Windows 7 上使用 AllegroCL Enterprise 64 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:58:10.310

这听起来对我来说大多是正确的。在我的 SBCL 初始化文件中，我有：

```
(pushnew #p"/home/paulnath/.asdf/" asdf:*central-registry* :test #'equal)
(push #p"/home/paulnath/.asdf/" asdf:*central-registry*) 
```

检查[ASDF 手册中的第 7.9](http://common-lisp.net/project/asdf/asdf.html#Controlling-where-ASDF-searches-for-systems)节。

检查 asdf.lisp 的源，源路径以 (values) 结尾，当然不返回任何值。所以我希望不返回任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T13:59:13.880

老问题，但是是的，这种行为是正确的。

如果您向 asdf::initialize-source-registry 提供参数，那么 asdf:: *source-registry*将（可能，您可能没有 .asd 文件...）不为空。另请注意，lisp 发行版可能会将自己的内容放入 asdf:: *source-registry*中。例如，SBCL 将其内部结构放入其中。

给出的答案并没有真正回答这个问题，因为 asdf:: *central-registry*是一种不同的（并且据说已被弃用，即使它优先于 asdf:: *source-registry*）机制。

# asp.net-mvc - 如何在 ASP MVC 中路由它

> ID：12007569
> 
> 赞同：0
> 
> 时间：2012-08-17T14:19:37.300
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

这是我的第一个 ASP MVC 项目，所以我不知道该怎么做。

我有一个名为 Admin 的部分，它有一个 Admin 控制器。我只是将它用于索引页面。

在管理部分，有不同的部分。假设公司和业务线

我想为他们自己的 CompanyController 和 LineOfBusinessController 中的人处理所有事情

我希望路由以 Admin 为前缀，即。管理员/公司，管理员/公司/添加

我通过在默认路由之前添加一个路由来实现这一点

```
routes.MapRoute(
            name: "Admin",
            url: "Admin/{controller}/{action}/{id}",
            defaults: new { controller = "Admin", action = "Index", id = UrlParameter.Optional }
        ); 
```

现在的问题是我所有的路由都选择了这个而不是默认的，这意味着其他所有的都变成了 Admin/Section 即 Admin/Home 等等.....

我尝试使用 Html.RouteLink 而不是 ActionLink 并且 URL 的格式正确，但是当我转到 Admin/Company 时它找不到，因为它假定 Company 在 AdminController

我怎样才能正确路由呢？

编辑

这是我的路线，然后是我的链接

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapRoute(
            name: "Admin",
            url: "Admin/{controller}/{action}/{id}",
            defaults: new { controller = "Admin", action = "Index", id = UrlParameter.Optional }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );            
    } 
```

链接

```
<li>@Html.ActionLink("Home", "Index", new { controller = "Home" }, ViewBag.SelectedNav == "Home" ? new { @class = "active" } : null)</li> 
```

链接结束 /Admin/Home

更新

由于我最终探索并最终使用了区域，因此没有在此处标记答案。在一个答案中提出了建议，但其余答案不正确，因此我不想误导任何人。感谢您的区域建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:23:17.343

在您的特定路由下方有通用路由。路由定义的顺序很重要。当 MVC 为请求找到匹配的路由时，它不会处理其余的。

```
routes.MapRoute(
            name: "Admin",
            url: "Admin/{controller}/{action}/{id}",
            defaults: new { controller = "Admin", action = "Index", 
                                               id = UrlParameter.Optional }
        );

routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index",
                       id = UrlParameter.Optional } // Parameter defaults
); 
```

此外，在这种情况下，您最好使用**区域。**当您想将应用程序[构建](http://sankarsan.wordpress.com/2012/04/14/asp-net-mvc-areasa-better-way-to-structure-the-application/)到不同的部分（如管理员/普通用户等）时，这是一种更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:45:29.690

因为我不知道链接行为应该是什么，所以我建议的最好方法是调试您的路由并查看哪个路由正在处理哪个 URL。

1) 进入 Visual Studio 并安装[RouteDebugger](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)

> PM> Install-Package routedebugger

2) 将一些代码添加到您的全局文件中

```
protected void Application_Start(object sender, EventArgs e)
{
  RegisterRoutes(RouteTable.Routes);
  RouteDebug.RouteDebugger.RewriteRoutesForTesting(RouteTable.Routes);
} 
```

3) 运行您的网站并请求您有问题的链接。

4) 检查您的结果并进行相应修改

* * *

编辑：看起来好像[RouteDebugger v2](http://haacked.com/archive/2011/04/12/routedebugger-2.aspx)现在是[RouteMagic](http://haacked.com/archive/2011/01/30/introducing-routemagic.aspx)

> PM> 安装包RouteMagic

你可以在[github上找到源代码](https://github.com/haacked/routemagic)

# php - 仅为登录进程运行“login_footer”挂钩

> ID：12007583
> 
> 赞同：0
> 
> 时间：2012-08-17T14:20:27.080
> 
> 标签：php, wordpress, login, hook

在 wp-login.php 中，我们有几个`action` 进程：'logout'、'register'、'retrievepassword'等......当然还有'login'。

我正在使用`login_footer`钩子在“登录表单”之后添加一些特殊功能

```
add_filter('login_footer', array($this, 'special_form')); 
```

我如何决定何时`login`运行进程？所以我可以避免`special form`在其他操作中显示（“注册”、“检索密码”等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:19:54.213

检查`wp-login.php`文件我们看到`$action`以这种方式找到的：

```
$action = isset($_REQUEST['action']) ? $_REQUEST['action'] : 'login'; 
```

因此，通过以下代码，我可以知道正在运行什么操作：

```
add_filter('login_init', array($this, 'login_init'));   
function login_init()
{
    $action              = isset($_REQUEST['action']) ? $_REQUEST['action'] : 'login';
    $this->login_running     = $action == 'login' ? true : false;
} 
```

为了在后续的钩子中使用它，比如`login_message`，`login_footer`等等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:20:33.853

使用“login_form_login”钩子。

```
add_action('login_form_login', array($this, 'enable_special_form'));

/*... */

function enable_special_form() {
    add_action('login_footer', array($this, 'special_form'));
} 
```

还有许多`login_form_*`其他 wp-login.php 操作的钩子 - login_form_logout、login_form_register 等等。

作为参考，在 WordPress 3.4.1 中 login_form_* 操作在 wp-login.php 的第 380 行执行，可用的操作列在第 357 行。

# testing - 捕获位图时出现 QTP 错误号 -2147467259

> ID：12007586
> 
> 赞同：1
> 
> 时间：2012-08-17T14:20:34.470
> 
> 标签：testing, vbscript, automated-tests, qtp

此功能曾经可以工作，但是现在我看到消息**“常规运行错误”**，然后：

> ```
> msgbox Err.Number 
> The error number is **-2147467259** 
> ```

声明就像

```
Browser("Browser").Page("Page").Image("Image").CaptureBitmap "c:\temp\test.png",True 
```

我不记得有任何变化，也不知道是什么导致了错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:09:34.087

好的，我得到了解决方案。因为现在有另一个屏幕连接到计算机。并且 Internet Explorer 在第二个屏幕上启动，而不是在主屏幕上启动。所以这个说法不能很好的执行。我让IE在主屏幕中打开，问题解决了。但是QTP能识别webedits还是很奇怪...

# android - PhoneGap Android ChildBrowser 插件和 YouTube - 无法播放任何视频

> ID：12007590
> 
> 赞同：1
> 
> 时间：2012-08-17T14:20:54.350
> 
> 标签：android, cordova, childbrowser

我们正在使用 PhoneGap/Cordova 1.8.1 (Android) 和最新版本的 ChildBrowser 插件。当我们在 ChildBrowser 中打开指向 youtube 的链接时，我们通常无法播放任何视频。到目前为止，这是我们的测试：

Android 2（旧 Droid 1）：移动 YouTube 网站出现，但根本不会播放任何视频（甚至不会切换到视频模式）。

Android 4 (Motorola Xoom)：移动网站出现，视频似乎正在播放，但只显示黑屏（无声音）；

Android 4 (Droid Razr Maxx)：移动网站出现，播放，但没有视频只有声音。

我们也有人用 Android 2 设备报告该视频会播放，但会将设备的方向从纵向更改为横向 - 然后在返回应用程序时，应用程序将保持横向固定（即使它设置为仅限肖像）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:24:01.013

是的，您应该在 Android 上使用 ChildBrowser.openExternal，因为它将启动您可以播放 YouTube 视频的 Android 浏览器。ChildBrowser.showWebPage 不会启动浏览器，而是创建自己的 Web 视图来显示远程端，因此它不是全功能的。

# .net - AE.Net.Mail - IMAP UID 跟踪以获取最新电子邮件

> ID：12007602
> 
> 赞同：1
> 
> 时间：2012-08-17T14:21:48.780
> 
> 标签：.net, email, imap, gmail-imap

我成功地使用 AE.Net.Mail 库从 imap 文件夹中检索消息。我现在正在尝试构建让我只检查我过去尚未检索到的消息的部分。如果我存储我检索到的最后一条消息的 UID（对于特定邮箱），我有点困惑如何使用它：

- 请求比 UID 更新的任何消息

- 请求最多 x 条消息（即 100 条）

我在“开始”和“结束”uid 中发送的库请求，但我更愿意只发送“开始”uid，然后限制返回多少 msg，或者不能为结束 UID 设置任何内容以防我想检索开始后的所有内容。

我看错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:51:25.393

IMAP 允许您发送“*”作为结束 UID。希望你的图书馆支持它。

原始命令如下所示：UID FETCH 739:* ([items])

不幸的是，可以返回的消息数量没有限制。如果你想这样做，你需要指定一个结束号，或者你想要的完整的消息序列。

# java - 使用 langdetect 进行 Java 语言检测 - 如何加载配置文件？

> ID：12007603
> 
> 赞同：6
> 
> 时间：2012-08-17T14:21:51.373
> 
> 标签：java, jar, classpath, language-detection

我正在尝试使用一个名为`langdetect`hosts [here](http://code.google.com/p/language-detection/)的 Java 库。使用起来再简单不过了：

```
Detector detector;
String langDetected = "";
try {
    String path = "C:/Users/myUser/Desktop/jars/langdetect/profiles";
    DetectorFactory.loadProfile(path);
    detector = DetectorFactory.create();
    detector.append(text);
    langDetected = detector.detect();
} 
catch (LangDetectException e) {
    throw e;
}

return langDetected; 
```

**除了**关于`DetectFactory.loadProfile`方法。当我将绝对文件路径传递给这个库时，它的效果很好，但最终我认为我需要将我的代码和`langdetect`' 的伴随`profiles`目录打包到同一个 JAR 文件中：

```
myapp.jar/
    META-INF/
    langdetect/
        profiles/
            af
            bn
            en
            ...etc.
    com/
        me/
            myorg/
                LangDetectAdaptor --> is what actually uses the code above 
```

我将确保`LangDetectAdaptor`位于内部的 which`myapp.jar`提供了它在运行时工作所需的 the`langdetect.jar`和`jsonic.jar`依赖项。`langdetect`但是我很困惑我需要传递什么`DetectFactory.loadProfile`才能工作：

*   `langdetect`JAR 随`profiles`目录一起提供，但您需要从 JAR 内部对其进行初始化。那么我是复制`profiles`目录并将其放入我的 JAR 中（就像我上面规定的那样），还是有办法将它保留在里面`langdetect.jar`但从我的代码中访问它？

在此先感谢您的帮助！

**编辑**：我认为这里的问题是这个目录`langdetect` *附带*`profiles`的，但是希望你从你的 JAR 中初始化它。API 可能会受益于稍作更改以仅考虑`profiles`其自己的配置，然后提供方法，例如`DetectFactory.loadProfiles().except("fr")`在您不希望它初始化法语等的情况下。但这仍然不能解决我的问题！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T05:51:42.427

我也有同样的问题。[您可以使用JarUrlConnection](http://docs.oracle.com/javase/7/docs/api/java/net/JarURLConnection.html) 和[JarEntry](http://docs.oracle.com/javase/7/docs/api/java/util/jar/JarEntry.html)从 LangDetect jar 加载配置文件。请注意，在此示例中，我使用的是 Java 7 资源管理。

```
 String dirname = "profiles/";
    Enumeration<URL> en = Detector.class.getClassLoader().getResources(
            dirname);
    List<String> profiles = new ArrayList<>();
    if (en.hasMoreElements()) {
        URL url = en.nextElement();
        JarURLConnection urlcon = (JarURLConnection) url.openConnection();
        try (JarFile jar = urlcon.getJarFile();) {
            Enumeration<JarEntry> entries = jar.entries();
            while (entries.hasMoreElements()) {
                String entry = entries.nextElement().getName();
                if (entry.startsWith(dirname)) {
                    try (InputStream in = Detector.class.getClassLoader()
                            .getResourceAsStream(entry);) {
                        profiles.add(IOUtils.toString(in));
                    }
                }
            }
        }
    }

    DetectorFactory.loadProfile(profiles);
    Detector detector = DetectorFactory.create();
    detector.append(text);
    String langDetected = detector.detect();
    System.out.println(langDetected); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-25T07:12:42.107

由于没有可用的 maven 支持，并且加载配置文件的机制并不完美（因为您需要定义文件而不是资源），所以我创建了一个 fork 来解决这个问题：

[https://github.com/galan/language-detector](https://github.com/galan/language-detector)

我邮寄了原作者，所以他可以分叉/维护更改，但没有运气 - 似乎该项目被放弃了。

这是一个现在如何使用它的示例（可以在必要时编写自己的配置文件）：

```
DetectorFactory.loadProfile(new DefaultProfile()); // SmProfile is also available
Detector detector = DetectorFactory.create();
detector.append(input);
String result = detector.detect();
// maybe work with detector.getProbabilities() 
```

我不喜欢 DetectorFactory 使用的静态方法，但我不会重写整个项目，您必须创建自己的 fork/pull 请求 :)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T14:27:30.170

看起来图书馆只接受文件。您可以更改代码并尝试向上游提交更改。或者将您的资源写入临时文件并让它加载。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-24T09:45:10.930

Mark Butler 提供的解决方案仍然有效并解决了我的问题，但是由于 jar 内容发生了变化，需要更新 dirname。Deepak 已经报告了这个问题，但我没有足够的声誉在评论中回复。这是您需要的两个声明。

为了加载简短的配置文件：

```
String dirname = "profiles/shorttext/"; 
```

为了加载长配置文件：

```
String dirname = "profiles/longtext/"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-20T07:35:23.187

为我设置工作目录解决了这个问题。

```
 String workingDir = System.getProperty("user.dir");
 DetectorFactory.loadProfile(workingDir+"/profiles/"); 
```

# android - 如何在果冻豆上堆叠通知？

> ID：12007607
> 
> 赞同：1
> 
> 时间：2012-08-17T14:22:07.357
> 
> 标签：android, notifications, android-4.2-jelly-bean

继[我之前的通知问题](https://stackoverflow.com/questions/11988073/why-does-jelly-bean-dont-show-the-second-row-in-a-notification)之后，我想测试 Jelly Bean 4.1 的新通知堆栈功能，如此处[所述](http://developer.android.com/design/patterns/notifications.html)。我已经发现，通知需要具有不同的 ID，否则旧通知将仅使用第二个通知的内容进行更新。如果我使用不同的 ID，我的通知将只是一个列表：

![通知列表](../Images/9e964b74eb33d5f19c99ff95c174efdd.png)

较小的辅助图标是使用 setSmallIcon() 设置的（请参见上面屏幕截图中的第一个通知），而较大的图标是使用 setLargeIcon() 设置的。我无法控制的是何时显示待处理通知的数量。它不受我的另一个问题中提到的[文本行的控制。](https://stackoverflow.com/questions/11988073/why-does-jelly-bean-dont-show-the-second-row-in-a-notification)

所以我的猜测是，Jelly Bean 会自动处理多个通知，但我该如何触发呢？也许有人可以在文档中给我一段代码或提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:04:01.240

您在问题中写下了答案：“否则旧通知将仅使用第二个通知的内容进行更新”。但是，您的应用程序需要知道“第二个通知”应该显示什么，以涵盖自用户上次与您的应用程序交互以来的所有事件。然后，“第二个通知”可以包含有关这两个事件的信息，而不仅仅是第二个事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T07:06:55.097

您必须对所有通知使用相同的通知 ID，然后只需使用新的静态编号更新每个通知。

# magento - Magento：需要设置脚本的信息

> ID：12007612
> 
> 赞同：2
> 
> 时间：2012-08-17T14:22:18.110
> 
> 标签：magento

我正在尝试创建一个安装脚本来在我的数据库表上安装自定义属性，并且我正在寻找有关以下内容的参考。我只需要知道他们在我列出的一些示例中的实际操作，这些示例是我在另一个问题上找到的，但我没有在其他任何地方找到任何信息。如果有人知道我在哪里可以读到这个，我会很感激的。

```
adminhtml_customer //to make the attribute can be created in backend only
customer_account_create //to make the attribute can be created in registration only
customer_account_edit // to make the attribute can be edited in the frontend only
customer_address_edit
customer_register_address
checkout_register
adminhtml_customer_address 
```

根据我列出的前 3 个样本，我可以猜测其他人做了什么，但我确实想弄错我的猜测，如果我没有列出其他人，我也很乐意得到这些信息.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:59:57.180

看一下核心代码 Pools( `/app/code/core/Mage`) 模块的设置脚本，可以找到很多很好的提示

# php - 恶魔般的卷曲引号

> ID：12007613
> 
> 赞同：3
> 
> 时间：2012-08-17T14:22:24.723
> 
> 标签：php, encoding

我有一个将页面转换为 JSON 格式的 InDesign 脚本。

然而，这带有智能的“卷曲”双引号，而不是普通的双引号（“”）。当然这会产生一个无效的 JSON 文件。

试图解决这个问题，因为我需要用 PHP 对这些文件进行一些其他操作，所以我尝试接受这个问题并在文件上传时解决它。

事实证明，该功能仅适用于（并非总是）在 Windows PC 中由 InDesign 生成的引号。如果您在 MAC 上运行脚本并上传文件，它根本不起作用，因为编码似乎不同。我已经尝试过其他解决方案，但是，它们根本不会产生任何结果。

这是脚本。

```
 function quoteReplacer($file)
    {

        $string = file_get_contents($file);

        $string = to_utf8($string);
        $bits = array('\xe2\x80\x9c', '\xe2\x80\x9d', '\xe2\x80\x98', '\xe2\x80\x99','â','â');
        $string = str_replace($bits,'"',$string);

        file_put_contents($file,$string); 

        //file_put_contents($file,$string);

    }

    function to_utf8( $string ) { 
            return iconv( 'CP1250', 'UTF-8', $string); 
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T14:29:44.970

该脚本应该可以工作：

```
// First, replace UTF-8 characters.
$text = str_replace(
 array("\xe2\x80\x98", "\xe2\x80\x99", "\xe2\x80\x9c", "\xe2\x80\x9d", "\xe2\x80\x93", "\xe2\x80\x94", "\xe2\x80\xa6"),
 array("'", "'", '"', '"', '-', '--', '...'),
 $text);
// Next, replace their Windows-1252 equivalents.
 $text = str_replace(
 array(chr(145), chr(146), chr(147), chr(148), chr(150), chr(151), chr(133)),
 array("'", "'", '"', '"', '-', '--', '...'),
 $text); 
```

替换所有可能阻塞 JSON 的奇怪字符。礼貌：[链接](http://www.toao.net/48-replacing-smart-quotes-and-em-dashes-in-mysql)。

`Command`或者，您可以让他们在所有工作站上通过按++ for MAC将其关闭，PC 上的等价物可能是++或者`Shift`您可以在[首选项](http://www.thegraphicmac.com/how-turn-curly-quotes-adobe-indesign)中找到它。`Option``the quote key next to Enter``ctrl``alt``shift``'`

# objective-c - 核心数据 - 处理动态属性

> ID：12007614
> 
> 赞同：1
> 
> 时间：2012-08-17T14:22:38.077
> 
> 标签：objective-c, core-data, nsdate

我需要一种方法来处理`NSManagedObject`子类中的动态属性。我现在要做的是检查一个对象的`date`（NSDate 类）属性是否通过`[NSDate now]`. 如果该日期是属性，则该对象被标记为`overdue`。

所以每当我需要显示一个对象是否过期时，我都需要进行上面的比较。所以这个属性可以切换过期和不过期的状态。一直做这个检查似乎有点不对劲。有没有办法自动做到这一点？IE。每次我从数据库中获取对象时，Core Data 都会为我执行上述方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:31:39.807

您不应该尝试保持过期状态，因为它取决于一个始终在变化的变量。如果需要根据下一个过期对象做某事，只需取出未过期的数据，按日期排序，找到下一个过期的即可。然后，当记录过期时，您可以执行 dispatch_after 来执行您的应用程序所做的任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:57:19.803

您可以通过使用 NSManagedObject 子类和瞬态属性来实现您正在寻找的东西。

您想要的动态属性可以通过制作“瞬态”属性来实现。您可以通过检查瞬态选项来使属性瞬态。瞬态属性不会持久保存到本地存储中。

使用新建文件向导为您的实体创建一个 NSManagedObject 子类，它位于“核心数据”类别下。

创建类时，只需为您的动态属性创建一个 getter 方法即可返回您想要的内容。

现在您可以在获取请求期间正常使用它。

# iphone - 制作收藏夹列表

> ID：12007617
> 
> 赞同：-3
> 
> 时间：2012-08-17T14:22:46.947
> 
> 标签：iphone, image

我有一个后台应用程序，您可以在其中浏览各种背景。我也想要一个收藏夹列表。但是当你在一个（n个任意的）背景视图控制器中，并且你按下了最喜欢的图标时，我如何实现当在背景的视图控制器中按下按钮时，它会显示在收藏夹视图控制器中？

所以简而言之，当您在背景中点击收藏图标时，收藏列表将在其中显示此图像。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:51:34.887

您可以为按下/未按下收藏夹条件定义一个布尔条件，并确定在另一个视图控制器上显示它。这只是一种方式，我相信你也可以探索其他方式。玩得开心编码！

# visual-studio-2012 - Visual Studio 2012 和 TFS 2010 中的自定义策略

> ID：12007626
> 
> 赞同：6
> 
> 时间：2012-08-17T14:23:10.457
> 
> 标签：visual-studio-2012, checkin-policy

我安装了 Visual Studio 2012 并连接到 TFS 2010。不幸的是，由于政策，我无法签入。我收到一个错误：

自定义路径策略中的内部错误。加载自定义路径策略时出错（策略程序集 'Microsoft.TeamFoundation.PowerTools.CheckinPolicies.CustomPathPolicy, Version=10.0.0.0, ...' 未注册。）。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T14:07:10.913

好的，在为 TFS11 安装 Power Tools 后，我没有这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:26:21.803

在团队资源管理器中，尝试右键单击`Team Members`个人设置并勾选“安装下载的自定义组件”和/或单击立即下载按钮

# c# - 关于ZedGraph，C#中TextObj的两个问题

> ID：12007631
> 
> 赞同：0
> 
> 时间：2012-08-17T14:23:16.893
> 
> 标签：c#, text, label, zedgraph

我在 Zedgraph 中使用散点图并尝试在其上添加趋势线。现在，我有两个问题：

1.  我应该如何确保包含方程和趋势线 R2 的 textobj 始终位于图形框内图形的左上角？我尝试使用图形比例的最大值和最小值来修复它，但到目前为止我没有成功。
2.  如何从图中删除 textobj？

我在下面添加了我的图表图片。

谢谢您的帮助

![在此处输入图像描述](../Images/a823319998386328031644ed34144fca.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T17:08:39.430

你可以试试这个，

```
 GraphPane pane;

    public Form1()
    {
        InitializeComponent();
        pane = zedGraphControl1.GraphPane;            
    }

    private void button_AddTxtObj_Click(object sender, EventArgs e)
    {            
        TextObj textEquation = new TextObj("Add your Text", pane.XAxis.Scale.Min+ (3*(pane.XAxis.Scale.MinorStep)), pane.YAxis.Scale.Max-pane.YAxis.Scale.MinorStep);            
        pane.GraphObjList.Add(textEquation);
        zedGraphControl1.Refresh();
    }

    private void button_ClearTxtObj_Click(object sender, EventArgs e)
    {
        pane.GraphObjList.Clear();
        zedGraphControl1.Refresh();
    } 
```

![在此处输入图像描述](../Images/13cce8f02246c688b061c7f58c84fdc3.png)

当您放大或缩小时，文本对象保持不变，因此您需要添加缩放事件来更新文本对象位置，1）清除文本对象 2）使用上述方法找到 x&y 位置 3）重绘文本对象：

```
private void zedGraphControl1_ZoomEvent(ZedGraphControl sender, ZoomState oldState, ZoomState newState)
    {

        // 1) clear the textobject
        // 2) use the above approach to find the x&y positions
        // 3) redraw the text object
    } 
```

希望能帮助到你...：）

# android - 在 Android 上创建比屏幕尺寸更小的后备缓冲区

> ID：12007634
> 
> 赞同：1
> 
> 时间：2012-08-17T14:23:20.760
> 
> 标签：android, opengl-es-2.0

使用 FBO 在屏幕外渲染不是一种选择，因为在我的硬件（HTC Desire、Adreno 200）上，仅仅切换渲染目标就会完全破坏帧率。这是所有 Adreno 的问题（如在这里看到的：[Framebuffer FBO 渲染到纹理非常慢，在 Android 上使用 OpenGL ES 2.0，为什么？](https://stackoverflow.com/questions/10729352/framebuffer-fbo-render-to-texture-is-very-slow-using-opengl-es-2-0-on-android)）。

那么有没有可能让Android创建一个小于屏幕的后备缓冲区，由硬件自动放大到Present的全屏尺寸？类似于它在 DirectX 中的工作方式？

我正在使用 OpenGL ES 2.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T01:08:22.227

相信使用surfaceHolder.setFixedSize()会达到你想要的效果。这使用 SurfaceFlinger 将 Window 的表面缩放到全屏大小。在某些 Android 设备上，此缩放将由硬件合成器完成，因此我建议保持绘制的窗口大小和缩放大小之间的比率合理，以避免出现伪影。

# ios - iOS：只有一个表格单元格，但屏幕满是单元格边框

> ID：12007637
> 
> 赞同：0
> 
> 时间：2012-08-17T14:23:27.337
> 
> 标签：ios, uitableview

我有一个包含 1 个单元格的表格视图，但是为填充整个屏幕的行显示了单元格边框。如果只有 1 个单元格，为什么 UITableView 会为所有这些单元格绘制单元格边框？我希望我的表格表现得像股票闹钟应用程序中的表格视图 - 它只绘制与表格一样多的单元格。知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:27:09.263

尝试设置表格页脚视图

```
tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T14:33:27.300

试试这个代码；

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 100)];
    view.backgroundColor = [UIColor whiteColor];
    return view;
} 
```

# c# - 如何使“var”全局或持久化？

> ID：12007640
> 
> 赞同：0
> 
> 时间：2012-08-17T14:23:31.527
> 
> 标签：c#, filesystems, var

我正在编写一个适用于文件系统的应用程序。当应用程序第一次启动时，它会运行一个快速例程将请求的文件和文件夹加载到内存中以供以后（时间密集型）处理。（见下面的代码）。在这一点上，它给了我将要处理多少文件的计数，这对于显示进度条很重要。

一旦我有了计数和文件数据，我需要存储数据以供以后处理（例如，作为全局变量或属性或类）。问题是它必须存储为“var”，因为它使用的是 LINQ。当我打破并检查变量时，它被存储为 SelectQueryOperator 和 AnonymousType 的相当复杂的组合。

我的第一个想法是继续遍历数据并将其转换为可以存储为 List<> 的简单数据（例如存储文件名和路径），但这样做实际上需要几分钟 - 最多 10 分钟或更长时间 - 到过程。无论如何，我稍后将不得不遍历所有这些数据以进行处理，而且我的用户不可能坐下来等待首先建立一个列表。

如何存储这些数据，以便以后可以访问它而不必先将其转换为其他东西？

```
var fileNames = 
from dir in Directory.EnumerateFiles(path, "*.*", SearchOption.AllDirectories)
select dir;

var fileContents = from file in fileNames.AsParallel() 
// Use AsOrdered to preserve source ordering 
let extension = Path.GetExtension(file)
let Text = File.ReadAllText(file)
select new { Text, FileName = file }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:27:22.343

> 问题是它必须存储为“var”，因为它使用的是 LINQ。

不，LINQ 没有任何*要求*您使用`var`. 基本上`var`允许您在方法中以强类型的方式使用匿名类型。

您需要做的就是将匿名类型转换为命名类型，您将获得*与*使用`var`. 您在使用时看到的不同之处`ToList`在于，在您*评估*查询之前，它实际上不会做任何事情——我怀疑您根本没有访问文件系统。（不清楚为什么你首先有一个查询表达式`Directory.EnumerateFiles`。）

要么您需要尽早加载数据，要么您不需要 - 从您的问题中并不清楚，但该`var`部分与该部分完全正交。

顺便说一句，在文件系统上使用并行处理可能会阻碍而不是帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:27:25.657

您不能`var`用于任何非局部变量。（[这就是原因。](http://blogs.msdn.com/b/ericlippert/archive/2009/01/26/why-no-var-on-fields.aspx)）如果您真的非常讨厌需要维护您的代码的人，您可以将其存储为`object`or`dynamic`并使用几种可能的黑客方法之一从已存储为的匿名类型中获取信息一个`object`，但这可能不是一个好主意。

真的，你最好的选择是创建一个具有`Text`和`FileName`属性的新类型并使用它而不是匿名类型。对于您的选择的未来开发人员来说，这是最简单和最不重要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T16:28:46.210

让我们稍微简化一下，并`var`在我们可以明确的地方明确说明..

```
var fileNames = 
from dir in Directory.EnumerateFiles(path, "*.*", SearchOption.AllDirectories)
select dir; 
```

这与以下内容完全相同：

```
var fileNames = Directory.EnumerateFiles(path, "*.*", SearchOption.AllDirectories); 
```

这与以下内容完全相同：

```
IEnumerable<string> fileNames = Directory.EnumerateFiles(path, "*.*", SearchOption.AllDirectories) 
```

现在为：

```
var fileContents = from file in fileNames.AsParallel() 
// Use AsOrdered to preserve source ordering 
let extension = Path.GetExtension(file)
let Text = File.ReadAllText(file)
select new { Text, FileName = file }; 
```

追求单行奇迹通常不会提高可读性，但为了便于讨论，它将有助于将我们的对象创建放在一个地方：

```
var fileContents = from file in fileNames.AsParallel() 
select new { Text = File.ReadAllText(file), FileName = Path.GetExtension(file) }; 
```

这是`ParallelQuery<T>`一个匿名的`T`。为了使我们可以存储它，我们需要停止使用匿名类：

```
private class NameAndContents
{
   public string Text{get;set;}
   public string FileName{get;set;}
}

ParallelQuery<NameAndContents> fileContents = from file in fileNames.AsParallel() 
select new NameAndContents{ Text = File.ReadAllText(file), FileName = Path.GetExtension(file) }; 
```

现在没有什么可以阻止您将其存储在 type 字段中`ParallelQuery<NameAndContents>`。

您可能希望通过两种方式检查此处的逻辑：

1.  的工作原理`Directory.EnumerateFiles`是，它需要知道给定迭代的值才能计算下一个迭代。（它基于`FindNextFile`Windows API 函数）。这使得它在并行化方面很差。`ReadAllText`很难预测平衡中涉及的内在等待有多少。我不仅会针对非并行版本对其进行测试，而且会在进行任何更改后重新测试，因为任何更改都会以新的方式打破这种平衡。

2.  这里最大的打击是`ReadAllText`。如果完全有可能将其替换为以更按需的方式使用文本的东西，那么它可能是一个巨大的胜利。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T14:26:44.200

预先加载所有数据并将其保留以供以后处理几乎总是错误的想法。你应该做的是一个一个地加载文件并在你去的时候处理它们，在这种情况下你不需要存储任何东西。

为了解决您的问题：您只需将操作结果投影到匿名类型以外的任何内容。例如，您可以创建一个类：

```
class FileData
{
    string FileName { get; set; }
    string Contents { get; set; }
}

var fileContents = from file in fileNames
                   select new FileData
                   {
                       FileName = Path.GetExtension(file),
                       Contents = File.ReadAllText(file)
                   }; 
```

只要您*不在*此变量上调用`.ToList()`或类似，您就可以即时枚举文件及其内容。

旁注：我删除了这个`.AsParallel()`调用，因为这个操作的瓶颈是文件系统，而不是 CPU。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T14:49:31.683

有什么问题

```
 List<string> files = Directory.EnumerateFiles(path, "*.*", SearchOption.AllDirectories).ToList(); 
```

您真的需要实际阅读每个文件吗？

顺便说一句， var 不是动态类型， var 只是编译器的简写“编译器，在这里为我写右边的类型，这样我就可以避免像这样的代码

```
List<type> a = new List<type>() 
```

任何时候你看到“var”，它都可以替换为实际类型。

我也看不出“AsParallel”在这里应该如何提供帮助。

# java - 检测逻辑连接器的最佳方法

> ID：12007644
> 
> 赞同：0
> 
> 时间：2012-08-17T14:23:51.620
> 
> 标签：java, regex

我正在尝试使用 Java 检测字符串（AND、OR、NOT）中的逻辑连接器。我想做的是：

*   给定一个字符串（例如 ((blue) AND (yellow) OR (pink)），将每个单词分开并将它们放在一个列表中。结果应该类似于 {"blue","yellow","pink"}

我知道为了匹配单词，我需要使用像 \b(AND|OR|NOT)\b 这样的正则表达式。但我不知道如何在连接符之后或之前返回每个单词。

其他问题：使用正则表达式有用还是我必须使用 contains()？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:31:23.923

这个怎么样？

```
String s = "((blue) AND (yellow) OR (pink))";
s = s.replaceAll("\\(|\\)", "");
String[] words = s.split("AND|OR|NOT");
System.out.println(Arrays.toString(words)); 
```

输出：

```
[blue ,  yellow ,  pink] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:31:13.900

```
string s="((blue) AND (yellow) OR (pink))";
s.split("\bAND\b|\bNOT\b|\bOR\b"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:31:22.910

您可以尝试使用`string.split("AND|OR|NOT");`.

编辑：哎呀，忘了\ b：

`string.split("\b(AND|OR|NOT)\b");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T14:37:21.770

解析这种字符串不是正则表达式的任务，正则表达式表示一个有限的预定义自动机。

您需要为此任务使用某种下推自动机。

[http://en.wikipedia.org/wiki/Pushdown_automaton](http://en.wikipedia.org/wiki/Pushdown_automaton)

最简单的方法是使用识别“逻辑字符串结构”的递归

`(...) AND (...)`或`(...) OR (...)`, `NOT (...)`, 等等...

并去掉括号，然后重复，直到你发现一个与这种结构不匹配的字符串。

这个字符串就是你要找的。

# python - 如何找出应用程序在缓存中使用对象引用？

> ID：12007647
> 
> 赞同：0
> 
> 时间：2012-08-17T14:24:04.880
> 
> 标签：python, caching, reference, del

我发现很难解释我的问题，因为问题不在代码本身之内。如果您需要更多输入来更好地理解以下内容，请告诉我。

我正在使用ArcGIS调用一堆python脚本，一个接一个。脚本通过导入或继承来使用相同的类。为了初始化类，我经常使用相同的名称。我不知道ArcGIS和python之间的通信是如何实现的。但我注意到我的脚本并不总是表现得像他们应该的那样。我想当我调用第二个脚本时，对对象的引用仍然存在（即使创建对象的脚本已经完成）。

首先：我怎样才能确定我的怀疑是真的？`del`其次，如果是这种情况：使用or销毁对所有对象的所有引用是个好主意`__del__`吗？做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-17T14:29:40.143

跟踪跟踪您的代码并使用调试器遍历它？判断它是否访问正确代码的最快方法。[Python 调试器](http://docs.python.org/library/pdb.html)

如果您阅读文档，您想要做的是使用断点来确保代码到达代码中的那个点。这是调试器的语法。

```
 b(reak) [[filename:]lineno | function[, condition]] 
```

# javascript - dojox DataGrid 不显示

> ID：12007657
> 
> 赞同：0
> 
> 时间：2012-08-17T14:24:49.963
> 
> 标签：javascript, dojo

我在 html 标记中声明了一个 contentPane/tabContainer。第三个选项卡包含一个 dojox.grid.DataGrid，默认情况下它是隐藏的。

在 findTask.execute 之后，设置了 dataStore 并填充了 dojox.grid.DataGrid，但我无法让它显示。

这是一个jsfiddle：

[http://jsfiddle.net/dbecker88/BhNEa/2/](http://jsfiddle.net/dbecker88/BhNEa/2/)

在 html 标记的底部，如果删除“searchStatus”div 并重新运行 jsfiddle，结果显示正常。

有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:08:22.290

原因是，ContentPane 布局容器会评估是否有单个子级或多个子级。它以不同的方式处理大小 - 并且会知道 'isSingleChild' 和 child == 小部件。如果它识别出一个小部件，它会调用它的 resize 函数。

为此，您需要手动调用 resize - 使用`ContentPane`网格的尺寸。这是一种方法，通过标记

```
 <div id="searchCol" dojoType="dijit.layout.ContentPane" title="Find Results">

<script event="onShow" type="dojo/connect">
  // onShow connect is 1 ms too early to connect, adding 'whenIdle'
  setTimeout(function() {
    dijit.byId('grid').resize(
        dojo.getMarginBox('searchCol')
    );
  },1);
</script>

          <!--REMOVE the searchStatus element and the dataGrid displays? -->
          <div id="searchStatus"></div>
          <!--REMOVE the searchStatus element and the dataGrid displays? -->

          <table data-dojo-type="dojox.grid.DataGrid" data-dojo-id="grid"  id="grid" data-dojo-props="rowsPerPage:'5', rowSelector:'20px'">
                  <thead>
                    <tr>
                      <th field="PARCELID">Parcel ID</th>
                      <th field="OWNERNME1" >Owner 1</th>
                      <th field="OWNERNME2">Owner 2</th>
                      <th field="RESYRBLT ">Year Built</th>
                      <th field="SITEADDRESS" width="100%">Address</th>
                    </tr>
                  </thead>
                </table>

          <button id="clearSearch" dojoType="dijit.form.Button" type="button" onclick="clearSearchResults()" title="Clear Search Results" label="Clear Results"
                    iconClass="clearSearchBtn" style="position:absolute; bottom:7px;cursor:pointer; visibility:hidden"></button>
      </div> 
```

当然，这将消耗完整大小，并且不会遗漏按钮和搜索状态。你需要一个计算来做到这一点。类似于：

```
var size = dojo.getMarginBox('searchCol');
size.h = size.h 
   - dojo.getMarginBox(dojo.byId('searchStatus')).h
   - dojo.getMarginBox(dojo.byId('clearSearch')).h;
dijit.byId('grid').resize(size); 
```

# java - 如何创建波动的亮度吓人/恐怖效果？

> ID：12007665
> 
> 赞同：0
> 
> 时间：2012-08-17T14:25:27.187
> 
> 标签：java, graphics, 2d

示例：[LIMBO](http://youtu.be/t1vexQzA9Vk)

该示例非常复杂，波动平稳，但我想知道是否有人可以提出使用 Java 2D 创建这种效果的好方法？我正要开始编写图像栅格数据处理算法，但我想我可能会节省很多时间先问你们。理想的结果是如果我可以在玻璃板上画一个波动的覆盖层。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:30:39.807

我不确定它是否满足您的所有需求，但为了避免重新发明轮子，我建议您看看[Processing](http://processing.org/)。它通常用作简单的多媒体开发环境，但其丰富的库也可以手动导入到传统的 Java 项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:49:09.130

如果您使用 JOGL 甚至[LWJGL 之](http://www.lwjgl.org/ "LWJGL")类的东西，那么您可以指定雾。您可以指定准确的颜色组合，以提供正确的效果，以及雾的出现位置和密度。在每个游戏循环中波动密度会给它你正在寻找的“脉冲”效果。

# c# - 做一个 LINQ 连接，然后分组，然后在两个不同的列上求和

> ID：12007671
> 
> 赞同：2
> 
> 时间：2012-08-17T14:25:59.217
> 
> 标签：c#, linq, join, group-by, sum

我在一个项目中使用 LINQ to SQL，我在执行 a`join`和 a`group by`来比较每个表中的两个字段时遇到问题。

这是我的查询的样子：

```
var q =
   (from ii in
        (from a in table1
         join b in table2 on a.BudgetUnitID equals b.BudgetUnitID
         select new { BT = a.Amount, BA = b.Amount, BUID = a.BudgetUnitID, BU = a.BudgetUnit.BudgetUnitName })
    group ii by new {ii.BUID} into g
    select new
    {
        BudgetUnit = g.Key,
        Budget = g.Sum(x => x.BA),
        Actual = g.Sum(x => x.BT),
        Variance = g.Sum(x => x.BA) - g.Sum(x => x.BT)
    }).ToList(); 
```

我将把它绑定到网页上的网格视图。我的问题是我没有在其中一列上得到正确的总数。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:36:42.313

您的问题可能是预算金额不正确，因为您正在为每个组合对它们求和。例如，如果您的预算数据如下所示：

```
Budget | Amount
Dev    | 2500 
```

和这样的订单项：

```
Budget | Amount
Dev    | 1000
Dev    | 750 
```

然后你在你的内部查询中将它们组合在一起，如下所示：

```
BA   | BT
2500 | 1000
2500 | 750 
```

然后将它们加在一起，这给了你

```
Budget | Actual
5000   | 1750 
```

在这种情况下，预算是应有的两倍，因为您将每个组合的所有条目加在一起。您想先对各个表求和，然后再将结果连接在一起，这样您的子查询数据中就不会出现这种“重复”问题：

```
var q =
   (from ii in
        (from a in table1 group a by a.BudgetUnitID into g
         select new { BudgetUnitID = g.Key, Amount = g.Sum(x => x.Amount) })
    join jj in
        (from b in table2 group b by b.BudgetUnitID into g
         select new { BudgetUnitID = g.Key, Amount = g.Sum(x => x.Amount) })
        on ii.BudgetUnitID equals jj.BudgetUnitID
         select new { Actual = ii.Amount, Budget = jj.Amount, Variance = jj.Amount - ii.Amount, BUID = ii.BudgetUnitID }
    ).ToList(); 
```

# jquery-ui - 单独文件中的 JQuery UI 对话框和 div

> ID：12007675
> 
> 赞同：1
> 
> 时间：2012-08-17T14:26:06.567
> 
> 标签：jquery-ui, dialog

我正在做一个项目，我想将 Jquery UI 用于某些表单，例如添加和更新内容而不是普通页面。我设计了对话框，设置了表单，但它仅在表单/div 与按钮位于同一文件中时才有效。顺便说一下，我正在为这个项目使用 CodeIgniter。

所以我有几个问题：

1.  JQuery UI 对话框是否支持使用来自不同文件的 div？（如果按钮与表单/div 不在同一个文件中）
2.  如果是这样，我如何使用位于不同文件中的 div（而不是将 div 与我几乎没有其他组件的按钮放在同一个文件中）？

例子：

## 索引.php

```
<body>
<input type="button" id="add_new"  value="add new" />
 </body> 
```

* * *

## 表单.php

```
<body>
<div id='"new_user_form'> 
        <input type="text" id="name" />
        <input type="text" id="username" />
        <input type="password" id="password" />
        <input type="button" id="add_user"  value="add new" />
</div> 
</body> 
```

* * *

## 自定义.js

```
$(document).ready(function () 
{
    $('# add_new ').click (function ()
    {

            $("# new_user_form ").dialog
            ({

                title: 'Add new user',
                height: 400,
                width: 600,
                resizable: false,
                modal: true,
                draggable: false,
                buttons:
                    [
                        {
                            text: 'add new',
                            id: ' add_user ',
                            click: function()
                            {
                                alert("Testing 123...");
                            }
                        },
                        {
                            text: 'cancel',
                            click: function()
                            {
                                $(this).dialog('close');
                            }
                        }

                    ]

            })

         })

      }) 
```

* * *

感谢阅读，希望有人可以帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:13:04.857

这是完全可能的，但我注意到一些错误：

*   你写了 id='"new_user_form'，它可以使 " 成为 id 的一部分。
*   此选择器 $('# add_new ') 和 $("# new_user_form ") 相同，修剪它。
*   您在可能尚未在 DOM 中的 div 上声明 .dialog()，因为您从 form.php 加载它。
*   不要在要附加的页面中使用正文，否则您可能会得到两个正文标签。

您可以使用类似的内容加载 form.php `.load("form.php")`，您必须从 form.php 中删除这些正文标签：

```
$("body").load("form.php",function()
{
    $("#new_user_form").dialog(
    {
        // your options
    });
}); 
```

或者您也可以声明一个对话框并在需要时替换其内容，您必须从 form.php 中删除 body 和 div 才能使用此代码：

```
<div id='new_user_form' style='display:none;'></div> <!-- somewhere in your index.php -->

// when document ready is triggered
$("#new_user_form").dialog(); 

// when you need it :
$("#new_user_form").load("form.php",function(){$("#new_user_form").dialog("open")}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:35:37.363

我不知道为什么 load() 函数不起作用，但我找到了解决此问题的更好方法。

我是怎么做到的：

users_view.php（以前的 index.php）

```
<body>
<input type="button" id="add_new"  value="add new" />

<div id="new_user_form">
   <?php $this->load->view('add_user_form'); ?>
</div>

</body> 
```

add_user_form.php（以前的 form.php）

```
 <div> 
    <input type="text" id="name" />
    <input type="text" id="username" />
    <input type="password" id="password" />
    <input type="button" id="add_user"  value="add new" />
    <input type="button" id="cancel"  value="cancel" />
 </div> 
```

自定义.js

```
$(document).ready(function ()
{

      $("#new_user_form").dialog
      ({

              title: 'Add new userт',
              height: 400,
              width: 600,
              resizable: false,
              modal: true,
              draggable: false,
              autoOpen: false

      })

      $('#add_new').click (function ()
      {
          $("#new_user_form").dialog("open");
      })

      $('#cancel').click(function()
      {
        $("#new_user_form").dialog("close");
      });
 }) 
```

感谢您的回答！我希望这对其他人有帮助:)

# php - 从 sql 创建表单并从单独的表中插入值

> ID：12007677
> 
> 赞同：0
> 
> 时间：2012-08-17T14:26:12.617
> 
> 标签：php, mysql

我在这里说实话 - 我很确定我不是从最好的方法来解决这个问题 我有一个我正在开发的调查软件，它允许所有者构建不同输入类型的问题（文本、复选框、无线电......）文本非常容易，它搜索了问题表并找到了包含文本、复选框、单选...和输出的字段 ans_type

```
 switch ($rowq['ans_type']) {
            case "text":
                echo '<tr bgcolor="#DDDDDD"  align="left" valign="middle"><td width="30"> </td> <td width="350">'.$rowq['question'].'</td><td width="350"><input class="tb8" type="text" name="quest[]" value="'.$rowa['answer'].'" size="40"></td></tr>';
            break; 
```

如您所见 - rowq 包含我的问题信息，而 rowa 包含答案信息。

我的问题出现在复选框和收音机上，我们可能有多个选项，目前我的表格是这样设置的，最多允许 15 个复选框和收音机选项

```
CREATE TABLE `question` (
 `sid` int(10) NOT NULL,
 `qid` double(10,1) NOT NULL,
 `question` varchar(500) NOT NULL,
 `ans_type` varchar(100) NOT NULL,
 `opt_one` varchar(200) DEFAULT NULL,
 `opt_two` varchar(200) DEFAULT NULL,
 `opt_three` varchar(200) DEFAULT NULL,
 `opt_four` varchar(200) DEFAULT NULL,
 `opt_five` varchar(200) DEFAULT NULL,
 `opt_six` varchar(200) DEFAULT NULL,
 `opt_seven` varchar(200) DEFAULT NULL,
 `opt_eight` varchar(200) DEFAULT NULL,
 `opt_nine` varchar(200) DEFAULT NULL,
 `opt_ten` varchar(200) DEFAULT NULL,
 `opt_eleven` varchar(200) DEFAULT NULL,
 `opt_twelve` varchar(200) DEFAULT NULL,
 `opt_thirteen` varchar(200) DEFAULT NULL,
 `opt_fourteen` varchar(200) DEFAULT NULL,
 `opt_fifteen` varchar(200) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1

CREATE TABLE `answers` (
 `surveyid` int(10) NOT NULL,
 `question` double(10,1) NOT NULL,
 `answer` varchar(50000) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

所以我需要首先确定这些类型的任何给定问题有多少可用选项 - 我想我可以让它只添加复选框如果 rowq['...'] != NULL 在每个 opt_numbers 这不能解决我的问题第二个问题 - 如果该调查已经填写并且该人正在编辑它，我需要检查他们已经选择的框（对于复选框，这可能是全部 15 它可能是 1 对于收音机自然它只会是一个）rowa ['answer'] 包含我的答案，这些答案将用“，”分隔

老实说，我不知道从哪里可以得到任何帮助 - 如果有更好的方法，包括更改我的数据库。

```
case "radio":

break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:37:39.770

我有一个看起来有点像你的系统。我的做法是让每个问题行都有一个 field`answerTypes`和一个 field `answers`。`answerTypes`是一个数组，它告诉可以对问题给出哪些答案。

系统循环遍历`answerTypes`数组并获取可以从 给出的适当答案`answers`，例如如果`answerTypes`是数组（1,3），则 answerTypes 是`radiobutton`和`text input`。

`answers`然后具有不同的所有“特定”设置`answerTypes`，例如文本输入的最大长度、复选框的不同名称和单选按钮的不同值。

我如何做的一个小代码片段：

> ```
>  foreach($q->answerTypes AS $type) { 
>           if($type == 1) { //radio buttons
>             $ans = $q->answers['radioButton'];
>             $return .= "<div class=\"radioButtonContainer\">";
>             $return .= "<table><tbody>";
>             foreach($ans AS $value=>$label) { 
>               $return .= "<tr><td><label for=\"radiobutton_{$value}\">{$label}</label> </td><td><input id=\"radiobutton_{$value}\" type=\"radio\" name=\"radioButton\" value=\"{$value}\"".(($_POST['radioButton'] == $value) ? ' checked' : '')."></td></tr>";
>             }
>             $return .= "</tbody></table>";
>             if(!empty($errl['radioButton'])) { 
>               $return .= error($errl['radioButton'], 0, false);
>             }
>             $return .= "</div>";
>           } elseif($type == 2) { //checkboxes
>             $ans = $q->answers['checkbox'];
>             $return .= "<div class=\"checkboxContainer\"><table><tbody>";
>             foreach($ans['boxes'] AS $name=>$label) { 
>               $return .= "<tr><td><label for=\"checkbox_{$name}\">{$label}</label> </td><td><input id=\"checkbox_{$name}\" type=\"checkbox\" name=\"checkbox_{$name}\" value=\"1\"".(($_POST['checkbox_'.$name] == "1") ? ' checked' : '')."></td></tr>";
>             }
>             $return .= "</tbody></table>";
>             if(!empty($errl['checkbox'])) { 
>               $return .= error($errl['checkbox'], 0, false);
>             }
>             $return .= "</div>";
>           } elseif($type == 3) { //text input
>             $ans = $q->answers['textInput'];
>             $return .= "<div class=\"textInputContainer\">";
>             if(!empty($ans['label'])) { 
>               $return .= "<div class=\"textInputLabel\"><label for=\"textInput\">{$ans['label']}</label></div>";
>             }
>             if(isset($errl['textarea'])) { 
>               $return .= error($errl['textarea'], 0, false);
>             }
>             $return .= "<input type=\"text\" onkeyup=\"countText($(this), $('#textInputChars'));\" id=\"textInput\" class=\"textInput\" name=\"textInput\" value=\"".htmlspecialchars($_POST['textInput'])."\"><br>
>             <span class=\"smallText\"><span id=\"textInputChars\">".number_format(strlen($_POST['textInput']))."</span>/".number_format($ans['maxChars'])."</span></div>";
>           } elseif($type == 4) { //textarea
>             $ans = $q->answers['textarea'];
>             $return .= "<div class=\"textareaContainer\">";
>             if(!empty($ans['label'])) { 
>               $return .= "<div class=\"textareaLabel\"><label for=\"textarea\">{$ans['label']}</label></div>";
>             }
>             if(isset($errl['textarea'])) { 
>               $return .= error($errl['textarea'], 0, false);
>             }
>             $return .= "<textarea onkeyup=\"countText($(this), $('#textareaChars'));\" id=\"textarea\" class=\"textarea\" name=\"textarea\">".htmlspecialchars($_POST['textarea'])."</textarea><br>
>             <span class=\"smallText\"><span id=\"textareaChars\">".number_format(strlen($_POST['textInput']))."</span>/".number_format($ans['maxChars'])."</span></div>";
>           }
>     } 
> ```

数据格式为：

> ```
>  [answerTypes] => Array
>     (
>         [0] => 1
>         [1] => 2
>         [2] => 3
>     )
> 
> [answers] => Array
>     (
>         [radioButton] => Array
>             (
>                 [a] => Radio button 1 //radio button name => radio button label
>                 [b] => Radio button 2
>                 [c] => Radio button 3
>             )
> 
>        [checkbox] => Array
>            (
>                [atLeast] => 0 //the minimum number of checkboxes that have to be checked
>                [boxes] => Array
>                    (
>                        [a] => Checkbox 1 //checkbox name => checkbox label
>                        [b] => Checkbox 2
>                    )
> 
>            )
> 
>        [textInput] => Array
>            (
>                [label] => Please fill in:
>                [maxChars] => 255
>                [required] => 1
>            )
> 
>    ) 
> ```

# doctrine-orm - Symfony 2 - Doctrine - oneToMany：从许多中删除

> ID：12007683
> 
> 赞同：0
> 
> 时间：2012-08-17T14:26:50.900
> 
> 标签：doctrine-orm, one-to-many, symfony-2.1, entities

我有两个实体：剧集和版本。当我试图删除一个版本时，得到一个异常：

> 注意：未定义索引：/var/www/Mendrock/vendor/doctrine/orm/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php 第 1561 行中的插曲

我已经检查了关系，但我没有发现错误。

我的实体： **剧集**

```
namespace Mendrock\Bundle\SagaBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Mendrock\Bundle\SagaBundle\Entity\Episode
 *
 * @ORM\Table(name="episode")
 * @ORM\Entity(repositoryClass="Mendrock\Bundle\SagaBundle\Repository\EpisodeRepository")
 */
class Episode {

    ...

    /**
     * 
     * @ORM\OneToMany(targetEntity="Version", mappedBy="episode", cascade={"remove", "persist"})
     */
    private $versions; 
```

**版本**

```
namespace Mendrock\Bundle\SagaBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Gedmo\Mapping\Annotation as Gedmo;

/**
 * Mendrock\Bundle\SagaBundle\Entity\EpisodeVersion
 *
 * @ORM\Table(name="version")
 * @ORM\Entity(repositoryClass="Mendrock\Bundle\SagaBundle\Repository\EpisodeVersionRepository")
 */
class Version {

    ...

    /**
     * @ORM\ManyToOne(targetEntity="Episode", inversedBy="versions", cascade={"persist"})
     * @ORM\JoinColumn(name="episode_id", referencedColumnName="id")
     */
    private $episode;

    ... 
```

**控制器**

```
 /**
    *
    * @Route("/versionConfirmeDelete/{id}", options={"expose"=true})
    * @Method("GET")
    * @Template()
    */
    public function versionConfirmeDeleteAction($id) {
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('MendrockSagaBundle:Version')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Version entity.');
        }

        $deleteForm = $this->createDeleteForm($id);

        return array(
            'entity' => $entity,
            'delete_form' => $deleteForm->createView(),
        );
    }

    /**
    * Deletes a Episode entity.
    *
    * @Route("/versionDelete/{id}")
    * @Method("POST")
    */
    public function versionDeleteAction(Request $request, $id) {
        $form = $this->createDeleteForm($id);
        $form->bind($request);

        if ($form->isValid()) {
            $em = $this->getDoctrine()->getManager();
            $entity = $em->getRepository('MendrockSagaBundle:Version')->find($id);
            $episode = $entity->getEpisode();
            if (!$entity) {
                throw $this->createNotFoundException('Unable to find Version entity.');
            }

            $em->remove($entity);
            $em->flush();
            $this->get('session')->setFlash('success', 'La version "' . $entity . '" de l\'épisode "'.$episode.'" à été supprimé !');
        } else {

            $this->get('session')->setFlash('error', 'Impossible de supprimer la version "' . $entity . '".');
        }

        return $this->redirect($this->generateUrl('mendrock_saga_default_episodes'));
    }
    #################################################################
    ### Commun     ##################################################
    #################################################################

    private function createDeleteForm($id) {
        return $this->createFormBuilder(array('id' => $id))
                        ->add('id', 'hidden')
                        ->getForm()
        ;
    } 
```

对我的问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:51:11.730

我发现了错误，这是该实体出现问题的另一个关系。属性名称不对应。

# xcode - XCode 4.4.1 - 什么是新的

> ID：12007684
> 
> 赞同：0
> 
> 时间：2012-08-17T14:26:52.483
> 
> 标签：xcode, macos, updates

我刚刚将我的 Xcode 从 4.4 更新到 4.4.1，但我似乎找不到他们对 Xcode 所做的更改。有人可以请教我吗？我只能找到 4.4 的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:36:51.747

这是 xcode 4.4 中的新功能；

[https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_4.html#//apple_ref/doc/uid/TP40011649-SW1](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_4.html#//apple_ref/doc/uid/TP40011649-SW1)

我认为 4.4.1 只是一个小问题的小修复，没什么大不了的！

# python - 加入python中的字符串列表并将每个字符串用引号引起来

> ID：12007686
> 
> 赞同：141
> 
> 时间：2012-08-17T14:26:54.433
> 
> 标签：python, string, list

我有：

```
words = ['hello', 'world', 'you', 'look', 'nice'] 
```

我希望有：

```
'"hello", "world", "you", "look", "nice"' 
```

用 Python 最简单的方法是什么？

* * *

## 回答 #1

> 赞同：244
> 
> 时间：2012-08-17T14:28:10.460

2021 年更新：在 Python3 中使用 f 字符串

```
>>> words = ['hello', 'world', 'you', 'look', 'nice']
>>> ', '.join(f'"{w}"' for w in words)
'"hello", "world", "you", "look", "nice"' 
```

原始答案（支持 Python 2.6+）

```
>>> words = ['hello', 'world', 'you', 'look', 'nice']
>>> ', '.join('"{0}"'.format(w) for w in words)
'"hello", "world", "you", "look", "nice"' 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2016-08-16T21:55:29.443

你可以试试这个：

```
str(words)[1:-1] 
```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2012-08-17T14:50:13.377

您也可以执行单个`format`呼叫

```
>>> words = ['hello', 'world', 'you', 'look', 'nice']
>>> '"{0}"'.format('", "'.join(words))
'"hello", "world", "you", "look", "nice"' 
```

更新：一些基准测试（在 2009 mbp 上执行）：

```
>>> timeit.Timer("""words = ['hello', 'world', 'you', 'look', 'nice'] * 100; ', '.join('"{0}"'.format(w) for w in words)""").timeit(1000)
0.32559704780578613

>>> timeit.Timer("""words = ['hello', 'world', 'you', 'look', 'nice'] * 100; '"{}"'.format('", "'.join(words))""").timeit(1000)
0.018904924392700195 
```

所以看起来这`format`实际上是相当昂贵的

更新 2：在@JCode 的评论之后，添加一个`map`以确保能够`join`正常工作，Python 2.7.12

```
>>> timeit.Timer("""words = ['hello', 'world', 'you', 'look', 'nice'] * 100; ', '.join('"{0}"'.format(w) for w in words)""").timeit(1000)
0.08646488189697266

>>> timeit.Timer("""words = ['hello', 'world', 'you', 'look', 'nice'] * 100; '"{}"'.format('", "'.join(map(str, words)))""").timeit(1000)
0.04855608940124512

>>> timeit.Timer("""words = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] * 100; ', '.join('"{0}"'.format(w) for w in words)""").timeit(1000)
0.17348504066467285

>>> timeit.Timer("""words = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] * 100; '"{}"'.format('", "'.join(map(str, words)))""").timeit(1000)
0.06372308731079102 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-17T14:30:42.427

```
>>> ', '.join(['"%s"' % w for w in words]) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-11-22T23:01:50.210

@jamylak 使用 F 字符串回答的更新版本（适用于 python 3.6+），我使用反引号表示用于 SQL 脚本的字符串。

```
keys = ['foo', 'bar' , 'omg']
', '.join(f'`{k}`' for k in keys)
# result: '`foo`, `bar`, `omg`' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-14T07:12:52.090

找到更快的方法

```
'"' + '","'.join(words) + '"' 
```

在 Python 2.7 中测试：

```
 words = ['hello', 'world', 'you', 'look', 'nice']

    print '"' + '","'.join(words) + '"'
    print str(words)[1:-1]
    print '"{0}"'.format('", "'.join(words))

    t = time() * 1000
    range10000 = range(100000)

    for i in range10000:
        '"' + '","'.join(words) + '"'

    print time() * 1000 - t
    t = time() * 1000

    for i in range10000:
        str(words)[1:-1]
    print time() * 1000 - t

    for i in range10000:
        '"{0}"'.format('", "'.join(words))

    print time() * 1000 - t 
```

结果输出是：

```
# "hello", "world", "you", "look", "nice"
# 'hello', 'world', 'you', 'look', 'nice'
# "hello", "world", "you", "look", "nice"
# 39.6000976562
# 166.892822266
# 220.110839844 
```

# ipad - ExtJS 4 子菜单需要在 iPad 上双击才能激活

> ID：12007688
> 
> 赞同：0
> 
> 时间：2012-08-17T14:27:01.647
> 
> 标签：ipad, extjs

尽管 Senscha 声称 ExtJS 在移动设备上不受支持，但它运行良好。我唯一的烦恼是弹出菜单的子菜单需要两次触摸（“点击”）才能激活。

似乎第一次触摸激活了菜单，第二次触摸激活了菜单选项本身。在具有多个选项的菜单中，单击任何选项一次会导致所有选项都可单击。

我有一个带有复选框的弹出菜单，它们有同样的问题。单击 1 激活（即蓝色背景）选项，单击 2 实际单击复选框。

我确信有一种方法可以告诉菜单的原型将第一次触摸注册为点击，但我一直找不到它。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:06:25.520

我不敢相信。我想我找到了办法！非常hacky，但它有效。

```
Ext.util.Observable.observe(Ext.menu.Item);
Ext.menu.Item.on('activate', function(obj, The, eOpts) {
    if (obj.checkHandler) obj.checkHandler(obj);
    if (obj.handler) obj.handler(obj);
    if (obj.checkHandler || obj.handler) {
        if (obj.up().closable) obj.up().close();
        if (obj.up().up().closable) obj.up().up().close();
    }
}); 
```

稍后，我将需要添加实际向上遍历树的代码以支持多级子菜单，现在一个是限制。

可以简单地调用菜单的 Click() 事件来替换这些古怪的东西，但这似乎不起作用。我试过了：

```
Ext.menu.Item.on('activate', function(obj, The, eOpts) {
    obj.fireEvent('click');
}); 
```

有各种参数，但没有运气。

# c# - 无法从 web api POST 读取正文数据

> ID：12007689
> 
> 赞同：14
> 
> 时间：2012-08-17T14:27:01.787
> 
> 标签：c#, asp.net, .net, asp.net-web-api

我正在尝试从新的 Asp.Net Web Api 中的请求中提取一些数据。我有一个这样的处理程序设置：

```
public class MyTestHandler : DelegatingHandler
{
    protected override System.Threading.Tasks.Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
    {
        if (request.Content.IsFormData())
        {
            request.Content.ReadAsStreamAsync().ContinueWith(x => {
                var result = "";
                using (var sr = new StreamReader(x.Result))
                {
                    result = sr.ReadToEnd();
                }
                Console.Write(result);
            });
        }

        return base.SendAsync(request, cancellationToken);
    }
} 
```

这是我的http请求：

```
POST http://127.0.0.1/test HTTP/1.1
Connection: Keep-Alive
Content-Length: 29
Content-Type: application/x-www-form-urlencoded
Expect: 100-continue
Host: 127.0.0.1

my_property=my_value 
```

问题是，无论我如何尝试从中读取信息，`request.Content`它总是空的。我试过了

```
request.Content.ReadAsStreamAsync
request.Content.ReadAsFormDataAsync
request.Content.ReadAs<FormDataCollection> 
```

也

```
 [HttpGet,HttpPost]
    public string Index([FromBody]string my_property)
    {
        //my_property == null
        return "Test";
    } 
```

如果有效，则没有。我无法从体内取出数据。我在 Windows 7 上的 IIS 内托管并使用 Fiddler 提交请求。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-17T16:32:11.083

问题是使用 Web Api 只能读取一次正文。我运行了一个 HTTP 模块，它记录了请求的所有详细信息并正在读取正文。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-06T13:10:18.987

这很丑陋，但是从最初的修补看来，实际上您可以替换 DelegatingHandler 中的 Content ...

```
protected override Task SendAsync(
          HttpRequestMessage request,
          CancellationToken cancellationToken)
      {                    
          Stream stream = new MemoryStream();

          request.Content.ReadAsStreamAsync().Result.CopyTo(stream);
          stream.Seek(0,SeekOrigin.Begin);

          // copy off the content "for later"
          string query = new StreamReader(stream).ReadToEnd();
          stream.Seek(0,SeekOrigin.Begin);

          // if further processing depends on content type
          // go ahead and grab current value
          var contentType = request.Content.Headers.ContentType;

          request.Content = new StreamContent(stream);
          request.Content.Headers.ContentType = contentType;

          return base.SendAsync(request, cancellationToken);
     } 
```

我不知道这是好还是坏（怀疑不好），但是....它似乎工作并遵循我见过的模型，推荐给那些需要修改请求标头和内容的人“在路上”一个委托处理程序。

您的里程可能会有很大差异。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-28T09:36:16.117

我的答案基于 brmore 的代码；

此函数可以安全地读取任何处理程序中的内容

```
private string SafeReadContentFrom(HttpRequestMessage request)
{
     var contentType = request.Content.Headers.ContentType;
     var contentInString = request.Content.ReadAsStringAsync().Result;
     request.Content = new StringContent(contentInString);
     request.Content.Headers.ContentType = contentType;
     return contentInString;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-12T08:20:47.593

这对我有用。

```
[HttpPost]
public IHttpActionResult Index(HttpRequestMessage request)
{
    var form = request.Content.ReadAsFormDataAsync().Result;
    return Ok();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T04:41:51.000

我遇到了同样的问题，最后选择不在日志中写入内容。我生活在记录内容类型和内容长度。

但尽可能将所有内容写入日志中始终是一个好主意。

但似乎目前使用 WebApi 我们无法实现这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-05T15:56:35.810

您可以先创建提供程序。`MultipartMemoryStreamProvider()` 然后`Request.Content.ReadAsMultipartAsync(provider)`; 然后阅读内容

```
public async Task<IHttpActionResult> Post(int id, string type)
{
    // Check if the request contains multipart/form-data.
    if(!Request.Content.IsMimeMultipartContent("form-data"))
        return BadRequest("Unsupported media type");

    try
    {
        var azureManager = new AzureManager();
        var imageManager = new ImageManager();
        var provider = new MultipartMemoryStreamProvider();

        await Request.Content.ReadAsMultipartAsync(provider);

        var assets = new List<Asset>();
        foreach (var file in provider.Contents)
        {
            var stream = await file.ReadAsStreamAsync();
            var guid = Guid.NewGuid();
            string blobName = guid.ToString();

            await azureManager.UploadAsync(blobName, stream);

            var asset = new Asset
            {
                PropertyId = id,
                FileId = guid,
                FileName = file.Headers.ContentDisposition.FileName.Trim('\"').ToLower(),
                FileSize = file.Headers.ContentLength ?? 0,
                MimeType = file.Headers.ContentType.MediaType.ToLower()
            };

            if (type == "photos")
            {
                asset.Type = AssetType.Photo;

                // Resize and crop copies to 16:9
                using (MemoryStream thumb = imageManager.ResizeImage(stream, 320, 180))
                {
                    await azureManager.UploadAsync(blobName, thumb, BlobContainers.Thumbs);
                }
                using (MemoryStream photo = imageManager.ResizeImage(stream, 1024, 576))
                {
                    await azureManager.UploadAsync(blobName, photo, BlobContainers.Photos);
                }
            }
            else
                asset.AssumeType();

            assets.Add(asset);
        }

        db.Assets.AddRange(assets);
        await db.SaveChangesAsync();

        return Ok(new { Message = "Assets uploaded ok", Assets = assets });
    }
    catch (Exception ex)
    {
        return BadRequest(ex.GetBaseException().Message);
    }
} 
```

# jquery - 如何获取 html 页面的一部分？

> ID：12007690
> 
> 赞同：2
> 
> 时间：2012-08-17T14:27:04.880
> 
> 标签：jquery, ajax

![这是警报框的输出](../Images/4d0de7cf8bdcf774489925c25c1d8fad.png)我正在尝试从 abc.php 获取类“mno”的 div 元素到 xyz.php

[http://pastebin.com/MhAqhZpd](http://pastebin.com/MhAqhZpd)有我正在使用的代码（不是整个代码只有 ajax 部分）

url 指向脚本，但第二个警告框不显示任何内容，甚至“NULL”也不显示——console.log 也没有给出任何内容。我是 ajax 的新手，所以可能会错过一些琐碎的事情，提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:29:28.590

如果您要访问的文件位于同一服务器中，请使用[http://api.jquery.com/load/ 。](http://api.jquery.com/load/)

```
$("div").load("abc.php div.mno"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:40:20.553

`$.load()`如果您不介意它非常不灵活，那就太好了，但是如果您想要功能更强大的东西，您实际上可以使用`$.get`or `$.post`。

例子：

```
var data = {'someParam':'someValue'};
$.post('abc.php', data, function(response){
    var myDiv = $('.mno', response); //get class .mno from response text
    alert(myDiv.html());
}); 
```

如果您使用它来获取下一页的搜索结果，这可能非常简洁，因此您希望将参数传递给下一页。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T14:32:49.883

您可以使用 jQuery 加载方法。.load() 方法与 $.get() 不同，它允许您指定要插入的远程文档的一部分。这是通过 url 参数的特殊语法实现的。如果字符串中包含一个或多个空格字符，则假定字符串中第一个空格之后的部分是确定要加载的内容的 jQuery 选择器。

```
$('div').load('abc.php div.mno'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T14:39:16.477

也许你可以这样：（我坚持你的问题在说什么！）

```
$.get('abc.php',function(data){
    var mnoDivHTML = $(data).find('div.mno').html(); //the html content of .mno div in abc.php
    $('div.yourclass').html(mnoDivHTML); //fill the desired div in the current page
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T14:43:49.010

另一种方法:) 只需将 load.html 替换为您想要加载的文档和 div，例如：mypage.php .somediv

```
<script type="text/javascript">    

$(document).ready(function(){
//var ajax = function(url){
//var url = 'load.html';
//$('.content').load(url);
//}
// Than you call it like THIS: ajax();
//$('.button').click(function(){
//$('.content').load('load.html')
//});
//response contains the text content that was returned from the ajax request
$(".content").load('load.html', function(response, error, xhr) {
if (error == "error") {
var msg = "Sorry but there was an error: ";
$("#error").html(msg + xhr.status + " " + xhr.statusText);

}
});
});
});
</script> 
```

# bash - 为什么 bash/ogr 将 shapefile 输出到输出目录中的各个文件夹中？

> ID：12007693
> 
> 赞同：0
> 
> 时间：2012-08-17T14:27:08.110
> 
> 标签：bash, loops, shapefile, ogr

我是 bash/ogr 的新手，似乎无法弄清楚为什么这个循环将 shapefile 输出到输出目录中的各个文件夹中。这是我的代码：

```
BASE=/home/user/J/cacti_mexico
INPUT=/home/user/J/cacti_mexico/shps
OUTPUT=/home/user/J/cacti_mexico/mexshps
SCRIPT=/home/user/J/cacti_mexico/scripts

cd $INPUT

while read line; do 
  echo $line 
  for file in $INPUT/$line.shp ; do 
    ogr2ogr $OUTPUT/$line $file
  done
done < $SCRIPT/cacti_mexico_names.txt 
```

该文件包含一个物种名称列表，一旦连接到它的末尾，就会`cacti_mexico_names.txt`从输入目录中提取这些名称。`.shp`如果有人能告诉我如何将所有 shapefile直接`ogr2ogr`输出到`$OUTPUT`，那就太好了。

**更新：**

ogr2ogr 将其第一个参数视为目录的名称，因此固定代码如下：

```
ogr2ogr $OUTPUT $file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T08:12:12.627

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

似乎 ogr2ogr 将其第一个参数视为目录的名称，而不是文件的名称。ogr2ogr $OUTPUT $file 会起作用吗？– 切普纳

# c# - 为什么 wcf 服务的回调这么慢（尤其是第一次）

> ID：12007697
> 
> 赞同：0
> 
> 时间：2012-08-17T14:27:16.817
> 
> 标签：c#, wcf, .net-4.0, callback, app-config

我有一个每秒向连接的客户端发送多个回调的服务。为什么当服务发送消息时客户端会在几秒钟或更长时间后收到它们？

以下是配置详细信息：

```
 <bindings>
                  <wsDualHttpBinding>
                    <binding name="WSDualHttpBinding_IMyService" receiveTimeout="00:30:00" 
    sendTimeout="00:30:00" useDefaultWebProxy="false" maxBufferPoolSize="2147483647" 
maxReceivedMessageSize="2147483647">

                      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" 
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                      <security mode="None"/>
                    </binding>
                  </wsDualHttpBinding>
                </bindings>
                <behaviors>
                  <serviceBehaviors>
                    <behavior name="Service1Behavior">
                      <serviceMetadata httpGetEnabled="True"/>
                      <serviceDebug includeExceptionDetailInFaults="True"/>
                      <serviceThrottling maxConcurrentCalls="10"
                                maxConcurrentInstances="10"
                                maxConcurrentSessions="5" />
                    </behavior>
                  </serviceBehaviors>
                </behaviors> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:15:57.987

您所描述的可能与线程创建时间有关。
请参阅此处：[WCF 服务可能会在负载下缓慢扩展](http://support.microsoft.com/kb/2538826)

“根据执行时间和收到的请求数量，您可能会注意到 WCF 执行时间对于每个收到的请求线性增加大约 500 毫秒，直到进程创建了足够的 IOCP 线程来服务请求或维持传入负载。”

文章中提供了一种解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:11:30.623

我正在处理同样的问题，查看这些链接以解决问题。

概述似乎是，开箱即用的 WCF 被“锁定”以防止 DoS 漏洞。本质上，您需要按照以下链接中的说明取消对服务的限制。

[http://theburningmonk.com/2010/05/wcf-improve-performance-with-greater-concurrency/](http://theburningmonk.com/2010/05/wcf-improve-performance-with-greater-concurrency/)

[http://blogs.msdn.com/b/wenlong/archive/2010/02/11/why-are-wcf-responses-slow-and-setminthreads-does-not-work.aspx](http://blogs.msdn.com/b/wenlong/archive/2010/02/11/why-are-wcf-responses-slow-and-setminthreads-does-not-work.aspx)

[http://weblogs.asp.net/sweinstein/archive/2009/01/03/creating-high-performance-wcf-services.aspx](http://weblogs.asp.net/sweinstein/archive/2009/01/03/creating-high-performance-wcf-services.aspx)

# git - 卡在 git rebase 和忽略/删除的文件不会被忽略

> ID：12007698
> 
> 赞同：0
> 
> 时间：2012-08-17T14:27:20.077
> 
> 标签：git, rebase, gitignore

好的，第一个问题：我不完全确定我对 git 很陌生，但我现在被分支困住了`master:REBASE`。**编辑**我正在使用 github 的 windows 客户端来下拉我从另一台电脑推送的一些更改。Git 错误提示我有未暂存的文件并且无法完成。我没有确切的信息，因为我不小心关上了窗户。我不知道如何度过这个难关。

第二个问题是取消跟踪文件 O`git rm --cached <filename>`实际上有 5 次，而这三个文件只是不断回来。我确保将整个目录添加到我的 .gitignore 中，这是我唯一遇到的三个问题。

**编辑**
.gitignore 内容

```
#################  
## Eclipse
#################

    *.pydevproject
    .project
    .metadata
    bin/
    tmp/
    *.tmp
    *.bak
    *.swp
    *~.nib
    local.properties
    .classpath
    .settings/
    .loadpath

    # External tool builders
    .externalToolBuilders/

    # Locally stored "Eclipse launch configurations"
    *.launch

    # CDT-specific
    .cproject

    # PDT-specific
    .buildpath

############
## Windows 
############

    # Windows image file caches
    Thumbs.db

    # Folder config file
    Desktop.ini

#########
#archives
#########
    *.zip

##############
#OOE Specifics
##############
#Generated files and directories
/txt
/signed 
/unsigned
/hi7
logindetails.csv
/timer/
config.php 
```

要忽略/删除的文件示例：

```
timer/jquery.timeentry-zh-CN.js  
timer/jquery.timeentry-pl.js  
timer/jquery.timeentry-ru.js
timer/jquery.timeentry-hu.js 
```

我也想将这些文件保存在工作目录中，我只是不想让它们被跟踪。

如果需要更多信息或澄清，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:29:13.390

`git rm -cached <file>`没有用，所以我确保它`.gitignore`是正确的，并从回购中删除了计时器目录。提交更改并推送到 github。然后我把计时器放回去，目录被忽略了。

至于变基问题，@twalberg 是正确`git rebase --abort`的，这正是我所需要的。

然后我恢复到最后一次正确的提交，瞧。

# python - argparse：使用强制参数的值设置可选参数

> ID：12007704
> 
> 赞同：21
> 
> 时间：2012-08-17T14:27:33.333
> 
> 标签：python, default-value, argparse

使用 Python 的[argparse](http://docs.python.org/dev/library/argparse.html)，我想添加一个可选参数，如果没有给出，则获取另一个（强制）参数的值。

```
parser.add_argument('filename',
                    metavar = 'FILE',
                    type    = str,
                    help    = 'input file'
                    )

parser.add_argument('--extra-file', '-f',
                    metavar = 'ANOTHER_FILE',
                    type    = str,
                    default = ,
                    help    = 'complementary file (default: FILE)'
                    ) 
```

我当然可以在解析参数后手动检查`None`，但是没有更pythonic的方法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-17T14:34:04.717

据我所知，没有比这更干净的方法了：

```
ns = parser.parse_args()
ns.extra_file = ns.extra_file if ns.extra_file else ns.filename 
```

（就像您在问题中提出的那样）。

您*可能可以*做一些[与此类似的自定义动作体操](https://stackoverflow.com/a/11455440/748858)，但我真的认为这不值得（或“pythonic”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T14:53:29.250

这与您的原始选项集的语义略有不同，但可能对您有用：

```
parse.add_argument('filename', action='append', dest='filenames')
parse.add_argument('--extra-file', '-f', action='append', dest='filenames')
args = parse.parse_args() 
```

这将替换为至少一个文件`args.filename`的列表，并将其参数附加到该列表。由于可以在位置参数之前在命令行上指定，因此您不能在.`args.filenames``-f``-f``args.filenames`

* * *

另一种选择是放弃该`-f`选项并进行`filename`多值位置参数：

```
parse.add_argument('filenames', nargs='+') 
```

同样，`args.filenames`将是至少一个文件名的列表。如果您的脚本有其他位置参数，这也会干扰。

# java - 在 MyServerHandler 中为 Netty websocket 写什么

> ID：12007706
> 
> 赞同：0
> 
> 时间：2012-08-17T14:27:55.750
> 
> 标签：java, websocket, netty

我已经编写了我的 websocket 服务器类并编写了 ServerPiplineFactory 类，但我不知道在 MyServerHandler 类中编写。MyServerHandler 类就像

```
 public class DiscardServerHandler extends SimpleChannelUpstreamHandler {

private static final String WEBSOCKET_PATH = "/websocket";

@Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
    Object msg = e.getMessage();
    //ctx.getChannel().write(msg);
    //msg.getClass();       
    if (msg instanceof HttpRequest) {
        //ctx.getChannel().write(msg);
    } else if (msg instanceof WebSocketFrame) {
        System.out.println("I am WebSocketFrame");          
    }

} 
```

所以我不知道如果我收到HttpRequest我应该写什么以及如何将它发送回浏览器。

所以如果在我的jsp文件中写下类似下面的东西

```
 </script>
   var WEBSOCKET_URL = "ws://localhost:8090/websocket";
   $(document).ready(function() {
   ws = new WebSocket(WEBSOCKET_URL);

  ws.onopen = function(event) {  
 alert("test");
 $('#status').text("Waiting...."); 
  };

  ws.onmessage = function(event) {
  var message = jQuery.parseJSON(event.data);
  alert(message);
 }

  var encoded = $.toJSON("test message");
  ws.send(encoded);

  });
  </script>
  <body>
  <p id="status">&nbsp;</p>
  </body> 
```

并调试这个jsp然后它转到messageReceived然后我不明白该怎么做然后websocket服务器如何与服务器通信。

因此，如果有人可以帮助我找到关于此的文档或对此进行一些解释，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:13:45.113

您将需要发出握手。查看 [1] 中的 websocket 示例。

[1] [https://github.com/netty/netty/blob/3/src/main/java/org/jboss/netty/example/http/websocketx/server/WebSocketServerHandler.java](https://github.com/netty/netty/blob/3/src/main/java/org/jboss/netty/example/http/websocketx/server/WebSocketServerHandler.java)

# security - MSMQ 安全阻止来自 Windows Server 2003 中 RPC 通信的通信

> ID：12007712
> 
> 赞同：1
> 
> 时间：2012-08-17T14:29:05.517
> 
> 标签：security, msmq, rpc

我在运行 Windows Server 2003 的服务器中创建了一个消息队列，并创建了一个能够发送消息的客户端程序，但我无法将它们拉回。要发送消息，我使用以下代码（请注意，我使用的是事务队列）：

```
 MessageQueueTransaction transaction = new MessageQueueTransaction();
    transaction.Begin();
    messageQueue.Send("Hello MSMQ!", "Title", transaction);
    transaction.Commit();
    transaction.Dispose(); 
```

要提取我尝试过的消息，但没有成功：

```
 MessageQueueTransaction transaction = new MessageQueueTransaction();
    try
    {
        transaction.Begin();
        MessageQueue queue = new MessageQueue(QUEUE_NAME);
        Message msg = queue.Receive(new TimeSpan(0, 0, 5), transaction);
        msg.Formatter = new XmlMessageFormatter(new Type[] { typeof(String) });
        Console.WriteLine(msg.Label + " - " + msg.Body);
        transaction.Commit();
    }
    catch (Exception e)
    {
        transaction.Abort();
        Console.WriteLine(e.Message);
    } 
```

在 queue.Receive() 调用中，我遇到了异常。我发现了很多类似的问题，我发现[这篇文章](http://blogs.msdn.com/b/johnbreakwell/archive/2010/03/24/understanding-how-msmq-security-blocks-rpc-traffic.aspx "本文")有三种可能的解决方案，但没有一个对我有用。我禁用了服务器上的防火墙，在注册表中创建了 DWORD 值，并且提供的解决方案之一似乎是特定于 Windows Server 2008。任何人都可以帮助我从 Windows Server 2003 中的 MSMQ 进行远程调用吗？

# javascript - 供应商前缀 CSS 变通办法的速度和大小（引导程序）

> ID：12007714
> 
> 赞同：0
> 
> 时间：2012-08-17T10:34:37.787
> 
> 标签：javascript, css, twitter-bootstrap

我正在使用 Twitter Bootstrap、H5BP 和其他一些零碎的东西开发一个网站，包括 Modernizr ......它引用了 Yepnope.js ......它引用了[Prefix Free](https://github.com/LeaVerou/prefixfree)。

（编译的）Bootstrap CSS 充满了供应商前缀的变通方法，我非常欣赏——我不想自己手动解决所有这些问题，但它也会让它变得臃肿。我足够熟练，可以省略不需要的 CSS，但我想知道如果在 CSS 中保留供应商前缀或使用 Prefix Free，是否会更快。

我通过网站上的 Yepnope.js 链接通过 Modernizr 找到了 Prefix Free，所以我可能会使用所有这三个，但老实说，我可能不会创建明确的规则来支持过时的浏览器（就像 Modernizr 一样）。

如果使用 Prefix Free 比保持 Bootstrap CSS 保持原样更快，我会支持 Prefix Free 的基本功能（IE 9+）。

如果我将 CSS 中的所有变通方法保留原样或剥离供应商前缀并通过 Prefix Free 动态添加它们，它会加载更快吗？

以前有人处理过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:23:03.907

我认为删除供应商特定 CSS 样式的唯一好处就是真正减小 CSS 文件的大小。浏览器使用浏览器特定样式的事实不会减慢渲染过程，浏览器也不会遇到不适合该浏览器的特定样式（基本上是 Firefox 遇到 IE 过滤器）。

但是，我认为如果您使用第三方脚本来生成您已从 Bootstrap 中删除的供应商特定样式，则加载页面需要更长的时间。据我所知，Bootstrap 已被优化为尽可能快。所以真的，我会避免破解它并删除供应商特定的样式。

# html - 无效的 PNG 图像文件：iDOT 未指向有效的 IDAT 块

> ID：12007717
> 
> 赞同：13
> 
> 时间：2012-08-17T14:29:30.010
> 
> 标签：html, objective-c, ipad, png, javax.imageio

我在应用程序中有一些 HTML 内容页面，我正在使用 UIWebView 来显示它们。其中一些页面中有一个 PNG 图像，它在 xcode 的调试控制台中生成以下消息：

```
ImageIO: PNG invalid PNG file: iDOT doesn't point to valid IDAT chunk 
```

图像仍然显示并且看起来正确。此外，这只发生在我在 iPad（第 3 代）上运行应用程序时。我的 iPhone 4 不显示此消息。

我的第一个想法是它是由文件名中的 ~ 字符引起的（我已将 ~ipad 标记添加到文件名中）。但是，删除 ~ 字符没有任何效果。

我已经进行了谷歌搜索，但我只得到 3 个结果。其中2个是中文的，谷歌的翻译似乎翻译得不好。其他结果似乎是和我有同样问题的人，但没有回复他[的帖子](http://www.1771.in/ios-funny-display-issue-with-ipad-3-retina-display-says-quotidot-doesnt-point-to-valid-idat-chunkquot.html)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T10:55:51.227

有同样的问题。解决方案：使用标准程序“颜色同步实用程序”，您可以从启动板加载。打开 png 文件并使用实用程序将其保存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-24T18:06:08.600

“清理”项目（xcode 菜单路径：product -> clean）为我解决了这个确切的问题。

没有用新名称重新保存 .png。

图像确实出现在模拟器中，但没有出现在测试设备上（ipod touch 5th gen.）

非常大的图像 4000 x 4000

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T18:04:36.220

奇怪的是，大约一个小时前我遇到了完全相同的问题。我没有找到失败的具体原因，但我认为我能够“修复”图像以使其正确显示而不会引发错误。

我刚刚在预览中打开它并从源中导出了一个新的 PNG 文件。一旦我用新创建的图像替换了项目文件中的坏图像，我清理、编译并按预期工作。

希望对你来说就这么简单...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-01T17:56:12.147

我的应用程序遇到了同样的问题。事实证明，用户上传到我的服务器并使用 php +imagemagik 编辑的图像被删除了。我使用以下命令编辑上传的图像：

```
convert $uploadfile -resize 300x300 -quality 30 -strip $uploadfile 
```

当我删除`-strip`参数时，错误消失了！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T22:45:03.853

您可能想检查您在另一个目录中是否有另一个同名文件。这就是对我造成此错误的原因..（重复的 Default.png）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-11-01T17:08:35.943

这里同样的问题。
1 - 关闭 XCode；
2 - 在 Photoshop 中打开图像；
3 - 以 80% 的质量重新保存（替换相同的图像）；
4 - 打开 XCode，清理它`CMD + SHIFT + K`；
5 - 再次在您的设备中构建它；

非常简单，为我工作。
以及对于你 ？

# sql - 使用 SQL Visual Basic 将日期和时间插入到访问中

> ID：12007723
> 
> 赞同：3
> 
> 时间：2012-08-17T14:29:44.737
> 
> 标签：sql, vb.net, ms-access

我正在尝试在 Visual Basic 中使用 SQL 将日期和时间值插入在 Access2002/3 模式下运行的 Access 2007 中。使用我的代码，我设法将文本字符串和数值插入到表中。但是，对于 DateTime 字段，会出现语法错误。Access 中的字段设置为日期/时间字段类型。

下面是我的第一个函数，它为数据库访问函数生成查询：

```
Public Function NewUpload(ByVal UploadType As String) As Single

    Dim UploadNumber As Single
    Dim ColumnString As String
    Dim ValueString As String

    If DatabaseConnection("SELECT ID_UPL FROM tabUpload", "Read Recordset") = "Error" Then GoTo close
    Do Until rdrOLEDB.Read = False
        If Val(rdrOLEDB.Item(0).ToString()) > UploadNumber Then UploadNumber = Val(rdrOLEDB.Item(0).ToString())
    Loop
    rdrOLEDB.Close()
    cnnOLEDB.Close()

    UploadNumber = UploadNumber + 1

    'Update Uploads table:
    ColumnString = "ID_UPL,DateTime,IDUser,DataCalc"
    ValueString = Format(UploadNumber, "0000") & ",#" & Now.ToLongDateString & " " & Now.ToLongTimeString & "#,'" & My.User.Name & "','" & UploadType & "'"
    If DatabaseConnection("INSERT INTO tabUpload(" & ColumnString & ") VALUES(" & ValueString & ")", "Non-Query") = "Error" Then GoTo Close

    NewUpload = UploadNumber 
```

关闭：cnnOLEDB.Close()

```
End Function 
```

这是连接到数据库的第二个函数

```
Public Function DatabaseConnection(ByVal Query As String, ByVal Task As String) As String
    'On Error GoTo Err

    cnnOLEDB.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & DataDirectoryName & DatabaseFileName
    cmdOLEDB.Connection = cnnOLEDB
    cmdOLEDB.CommandText = Query
    cnnOLEDB.Open()

    Select Case Task
        Case "Read Recordset"
            rdrOLEDB = cmdOLEDB.ExecuteReader()
            DatabaseConnection = "Read Recordset"
        Case "Read Scalar"
            DatabaseConnection = Str(cmdOLEDB.ExecuteScalar)
        Case "Non-Query"
            DatabaseConnection = Str(cmdOLEDB.ExecuteNonQuery())
            DatabaseConnection = "Non-Query"
    End Select

    Exit Function
Err:
    MsgBox("Database connection error.")
    DatabaseConnection = "Error"

End Function 
```

当我运行此代码时，我得到查询： `INSERT INTO tabUpload(IDUPL, DateTime, User, DataCalc) VALUES(0003, #17 August 2012 14:23:27#, 'UK\Pej', 'Calc')"`

我还尝试了 DateTime 的几种变体，使用格式和 now(Year) 给出 yyyy-mm-dd 等。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T14:32:52.910

datetime 和 user 都是保留字，必须用方括号括起来。否则，它将在该日期运行。

```
 INSERT INTO tabUpload(IDUPL, [DateTime], [User], DataCalc) 
 VALUES(0003, #17 August 2012 14:23:27#, 'UK\Pej', 'Calc')" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T15:07:31.660

您正在使用 Vb.Net`Now`并从中创建一个文字值，然后将该文字插入到您的日期/时间字段中。但是，Access db 引擎提供了自己的`Now()`函数，因此您可以在`INSERT`语句中使用该函数。

```
INSERT INTO tabUpload (IDUPL, [DateTime], [User], DataCalc)
VALUES(3, Now(), 'UK\Pej', 'Calc') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:33:40.893

尝试以 ODBC 规范格式插入日期：

```
Format (Date, "yyyy-mm-ddThh:nn:ss") 
```

这是[format 函数](http://office.microsoft.com/en-us/access-help/format-property-date-time-data-type-HA001232739.aspx?CTT=5&origin=HA001228839)的文档。

# python - 如何使用 python 在 mongodb 中查询不同的结果？

> ID：12007726
> 
> 赞同：7
> 
> 时间：2012-08-17T14:29:50.133
> 
> 标签：python, mongodb, mongoengine

我有一个包含多个文档的 mongo 集合，假设如下（假设汤姆在 2012 年有两位历史老师，无论出于何种原因）

```
{
"name" : "Tom"
"year" : 2012
"class" : "History"
"Teacher" : "Forester"
}

{
"name" : "Tom"
"year" : 2011
"class" : "Math"
"Teacher" : "Sumpra"
}

{
"name" : "Tom",
"year" : 2012,
"class" : "History",
"Teacher" : "Reiser"
} 
```

我希望能够查询“汤姆”曾经上过的所有不同的课程，即使汤姆有多个有多个老师的“历史”课程，我只想查询得到汤姆所在的最少数量的文档所有这些，并且“历史”出现一次，而不是让查询结果包含多个重复“历史”的文档。

我看了看： http: [//mongoengine-odm.readthedocs.org/en/latest/guide/querying.html](http://mongoengine-odm.readthedocs.org/en/latest/guide/querying.html)

并希望能够尝试类似的东西：

```
student_users = Students.objects(name = "Tom", class = "some way to say distinct?") 
```

虽然它似乎没有记录在案。如果这不是语法上正确的方法，那么这在 mongoengine 中是否可行，或者是否有某种方法可以使用 pymongo 等其他库来完成？或者我是否必须使用 Tom 查询所有文档，然后进行一些后处理以获得唯一值？对于任何情况，语法都会受到赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-17T14:41:40.380

首先，如 MongoDB 文档 on [Distinct](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)中所述，只能在某个字段（只有一个字段）上获得不同的值。

Mongoengine 的`QuerySet`类确实支持[distinct()](http://mongoengine-odm.readthedocs.org/en/latest/apireference.html?highlight=distinct#mongoengine.queryset.QuerySet.distinct)方法来完成这项工作。

所以你可以尝试这样的事情来获得结果：

```
Students.objects(name="Tom").distinct(field="class") 
```

该查询生成一个 BSON 文档，其中包含*Tom*参加的课程列表。

> **注意**注意返回值是单个文档，所以如果它超过最大文档大小（16 MB），你会得到错误，在这种情况下你必须切换到*map/reduce*方法来解决这类问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-14T23:07:12.207

```
import pymongo
posts = pymongo.MongoClient('localhost', 27017)['db']['colection']

res = posts.find({ "geography": { "$regex": '/europe/', "$options": 'i'}}).distinct('geography')
print type(res)
res.sort()
for line in res:
    print line 
```

参考[http://docs.mongodb.org/manual/reference/method/db.collection.distinct/](http://docs.mongodb.org/manual/reference/method/db.collection.distinct/) distinct 返回一个列表，将打印在 print type(res) 上，可以使用 res.sort() 对列表进行排序，之后它将打印排序列表的值。

您还可以在选择不同的值之前查询帖子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:59:06.927

```
student_users = Students.objects(name = "Tom").distinct('class') 
```

# ruby-on-rails-3 - Unicorn + Rack Lint 错误 - 内容标题

> ID：12007727
> 
> 赞同：3
> 
> 时间：2012-08-17T14:29:52.210
> 
> 标签：ruby-on-rails-3, rack, unicorn

在本地机器上运行 unicorn 时，我不断收到以下服务器错误：

```
E, [2012-08-17T10:25:11.961002 #95265] ERROR -- : app error: Content-Length header was 780958, but should be 781014 (Rack::Lint::LintError)
E, [2012-08-17T10:25:11.961578 #95265] ERROR -- : /Users/cscairns/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/lint.rb:19:in `assert'
E, [2012-08-17T10:25:11.961893 #95265] ERROR -- : /Users/cscairns/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/lint.rb:501:in `verify_content_length'
E, [2012-08-17T10:25:11.962173 #95265] ERROR -- : /Users/cscairns/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/lint.rb:525:in `each'
E, [2012-08-17T10:25:11.962806 #95265] ERROR -- : /Users/cscairns/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/body_proxy.rb:26:in `method_missing'
E, [2012-08-17T10:25:11.963116 #95265] ERROR -- : /Users/cscairns/.rvm/gems/ruby-1.9.3-p194/gems/unicorn-4.3.1/lib/unicorn/http_response.rb:41:in `http_response_write'
E, [2012-08-17T10:25:11.963416 #95265] ERROR -- : /Users/cscairns/.rvm/gems/ruby-1.9.3-p194/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:539:in `process_client'
E, [2012-08-17T10:25:11.963702 #95265] ERROR -- : /Users/cscairns/.rvm/gems/ruby-1.9.3-p194/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:606:in `worker_loop'
E, [2012-08-17T10:25:11.963985 #95265] ERROR -- : /Users/cscairns/.rvm/gems/ruby-1.9.3-p194/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:487:in `spawn_missing_workers'
E, [2012-08-17T10:25:11.964288 #95265] ERROR -- : /Users/cscairns/.rvm/gems/ruby-1.9.3-p194/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:137:in `start'
E, [2012-08-17T10:25:11.964744 #95265] ERROR -- : /Users/cscairns/.rvm/gems/ruby-1.9.3-p194/gems/unicorn-4.3.1/bin/unicorn:121:in `<top (required)>'
E, [2012-08-17T10:25:11.965043 #95265] ERROR -- : /Users/cscairns/.rvm/gems/ruby-1.9.3-p194/bin/unicorn:19:in `load'
E, [2012-08-17T10:25:11.965339 #95265] ERROR -- : /Users/cscairns/.rvm/gems/ruby-1.9.3-p194/bin/unicorn:19:in `<main>'
E, [2012-08-17T10:25:11.965624 #95265] ERROR -- : /Users/cscairns/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
E, [2012-08-17T10:25:11.966223 #95265] ERROR -- : /Users/cscairns/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

有没有人遇到同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:50:01.857

我在运行 unicorn 和 nginx 的 Rails 3.2 应用程序中也遇到了这个问题。我不认为使用 nginx vs. Apache vs. ??? 会很重要。

这解决了我的问题： [Rack::Lint Content-Length header error with unicorn/nginx](https://github.com/rack/rack/issues/309) 好奇这是否也适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:11:43.057

这个宝石 unicorn-rails 解决了这个问题：[https](https://github.com/samuelkadolph/unicorn-rails) ://github.com/samuelkadolph/unicorn-rails 。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T00:31:24.260

您的响应和内容长度不同，用于`bytesize`确定响应的长度，而不是`length`.

# php - php 警告 mysql_connect

> ID：12007728
> 
> 赞同：1
> 
> 时间：2012-08-17T14:29:52.183
> 
> 标签：php, mysql

我在连接 php 和 mysql 时遇到问题。Mysql 服务器和客户端运行良好。并且 mysql 套接字文件在

```
/var/mysql/mysql.sock 
```

但是在连接时：

```
$con = mysql_connect("localhost","root","pass"); 
```

它说

```
Socket operation on non-socket (trying to connect via unix:///var/mysql/mysql.sock) 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:30:29.563

利用

```
$con = mysql_connect("127.0.0.1","",""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:51:27.493

听起来您的实际 MySQL 套接字文件与 PHP 预期的位置不同。

根据 PHP，执行 a`phpinfo();`并查看套接字文件的位置应该是什么。

然后，您可以从它当前所在的位置对其进行符号链接。

# c# - 当 datagridview 填充数据时可以显示加载窗口吗？

> ID：12007729
> 
> 赞同：1
> 
> 时间：2012-08-17T14:30:05.953
> 
> 标签：c#, datagridview

我的应用由 3 个选项卡组成，每个选项卡都有一个 DGV，选项卡 1 和 2 在 DGV 中不包含那么多数据，但在选项卡 3 中它可以在 100-5000 行之间

我遇到的问题是，当我启动我的应用程序并移动到选项卡 3 时，需要一段时间才能显示任何内容。

我正在寻找一种在将数据添加到 DGV 时向用户显示加载表单的方法。

我将如何完成这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:32:56.997

开始在后台线程上加载数据并监视进度（显示为进度条）。如果您在主线程上执行此操作，则会挂起您的界面。

[有一篇好文章，但它是在 VB 中。](http://support.microsoft.com/kb/318604)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:34:23.857

长时间运行的操作应该在单独的工作线程中运行，通常是[BackgroundWorker](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&sqi=2&ved=0CE4QFjAA&url=http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx&ei=MVYuUOPWOsnlyAGg2IG4Dw&usg=AFQjCNFwLYOqQ7vrjVJ7SroICXQH-GDyEQ)类。这可以防止 UI 在所述操作期间锁定。您还可以选择在此线程运行时显示加载对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:40:38.587

这里的其他答案是正确的。但是由于您特别询问了加载窗口，因此我记得[Code Project](http://www.codeproject.com/Articles/14841/How-to-write-a-loading-circle-animation-in-NET)中的一个非常好的示例。

在我参与的一个项目中，我们采用了这个例子并使其独立。我们添加了名为 Start 和 Stop 的静态方法，Start 方法将创建一个线程，然后加载窗口，而 Stop 方法发出它需要正常关闭的窗体的信号。

希望这可以帮助！

# asp.net - IE9 上的 Azure 存储下载将文件扩展名更改为 ZIP

> ID：12007741
> 
> 赞同：0
> 
> 时间：2012-08-17T14:30:54.563
> 
> 标签：asp.net, internet-explorer-9, azure-storage

我允许用户使用 SAS 从 Windows Azure 存储池下载文件（参见[本讨论](https://stackoverflow.com/questions/12003790/azure-download-with-getsharedaccesssignature-of-large-file)）。正在构建 SAS，然后`Request.Redirect(targetURL)`调用 SAS 以重定向客户端的浏览器以下载文件。

这适用于使用 Chrome 下载文件（以扩展名 .dp 结尾的专有二进制文件）。

但是，当在 Internet Explorer 9 上下载相同的文件（使用相同的 URL）时，文件的扩展名被更改为 .zip（删除原来的 .dp）.... 一些用户仍然使用 IE9 :(

我检查了 blob 的内容类型，它是`application/octet-stream`（因此应该是正确的）。

为什么 IE9 会更改文件的扩展名，我该怎么做才能防止这种情况发生？我是否需要指示 Azure 将 .dp 文件保持原样（mime 类型），如果需要，我该如何配置？

编辑：我真的想使用重定向而不是 blob.openread()/response.write() 来避免网络服务器上的额外负载。

**更新 1**

我用 Fiddler 查看了下载请求的服务器回答，很明显 content-type 是正确的：

```
HTTP/1.1 200 OK
Content-Length: 60783
Content-Type: application/octet-stream
Last-Modified: Fri, 17 Aug 2012 13:25:24 GMT
ETag: 0x8CF4XXXE4DD2184
Server: Blob Service Version 1.0 Microsoft-HTTPAPI/2.0
x-ms-request-id: 21XXXXX-9e42-4ca8-a425-e84269d9f104
Date: Fri, 17 Aug 2012 16:49:05 GMT 
```

服务器的内容负载以

PK����nAQ������p����

*** FIDDLER：RawDisplay 被截断为 128 个字符。右键单击以禁用截断。***

IE 是否将“PK”解释为 PKZIP 并因此认为它是 ZIP 文件？

如何禁用（在客户端） - cf。下面的第一条评论不是诀窍......

亲切的问候，

罗比德萨特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:30:28.200

我怀疑这只是 IE 在做一些烦人的事情。我建议将内容类型更改为类似的内容`application/x-foobar`，也许将“foobar”替换为更有意义的内容。:-)

我还没有测试过，但我认为这足以让 IE 停止尝试猜测文件类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-18T19:49:59.503

您可以通过在末尾添加查询字符串参数来欺骗 IE，例如：&ext=.exe。

我们生成一个指向 .exe + sas 令牌的链接。因此，该链接可在短时间内访问。IE 无法识别该文件 https://.blob.core.windows.net/container/file.exe?sv=2014-02-14&sr=b&sig=1oRgEzi%2F5uXCPUiseHizadfasdfa0vEs%3D&st=2015-05-18T19%3A36 %3A42Z&se=2015-05-18T19%3A46%3A42Z&sp=r 实际上是一个可执行文件，并且没有文件扩展名保存它。但如果我这样做：https://.blob.core.windows.net/container/file.exe?sv=2014-02-14&sr=b&sig=1oRgEzi%2F5uXCPUiseHizadfasdfa0vEs%3D&st=2015-05-18T19%3A36%3A42Z&se= 2015-05-18T19%3A46%3A42Z&sp=r&ext=.exe（在末尾添加 &ext=.exe）IE 现在可以正确保存文件。

# c# - 在 DataVew RowFilter 上搜索特殊字符

> ID：12007743
> 
> 赞同：1
> 
> 时间：2012-08-17T14:31:08.340
> 
> 标签：c#, dataview, rowfilter

如何使用 RowFilter 搜索带有 & 号的字符串（或任何其他“特殊”字符。例如！"£$%^&*()）

当我尝试时，我收到以下错误：

Like 运算符中的错误：字符串模式 '%£(*$\&%' 无效

我的 RowFilter 的副本如下：

```
value="£(*$\&"; //I know this is rubbish, but I don't want the system to crash.

filterString = string.Format("Description LIKE '%{0}%'", value);

myDataView.RowFilter=filterString; 
```

提前致谢。

我正在使用 C# 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:47:32.093

可能这个可以帮助..

```
CheckValue("fefe[][]12#");
CheckValue("abvds");
CheckValue("#");
CheckValue(@"[][][][][]\\\\\][]");
CheckValue("^^^efewfew[[]");

public static string CheckValue(string value)
{
    StringBuilder sBuilder = new StringBuilder(value);

    string pattern = @"([-\]\[<>\?\*\\\""/\|\~\(\)\#/=><+\%&\^\'])";

    Regex expression = new Regex(pattern);

    if (expression.IsMatch(value))
    {
        sBuilder.Replace(@"\", @"\\");
        sBuilder.Replace("]", @"\]");
        sBuilder.Insert(0, "[");
        sBuilder.Append("]");
    }
    return sBuilder.ToString();
} 
```

还要检查[http://www.csharp-examples.net/dataview-rowfilter/](http://www.csharp-examples.net/dataview-rowfilter/)

# java - 在 Facelets 页面中显示异常堆栈跟踪

> ID：12007747
> 
> 赞同：8
> 
> 时间：2012-08-17T14:31:21.657
> 
> 标签：java, jsf, exception, jsf-2, facelets

我需要在我的 JSF 应用程序`error.xhtml`页面中显示异常堆栈跟踪。我知道用 JSP 页面来做这件事是多么简单。但是对于 JSF 2.0，我遇到了问题。

在我的`web.xml`我定义了一个 JSF 2.0 Facelets 页面作为错误页面：

```
<error-page>
    <exception-type>java.lang.Throwable</exception-type>
    <location>/faces/views/error.xhtml</location>
</error-page> 
```

发生错误时，我被重定向到此页面。我需要的是在这个 Facelets 页面中显示异常的堆栈跟踪。

我曾尝试使用：

```
<pre>
    <h:outputText value="${exception}"/>
</pre> 
```

但我没有得到任何输出。我一直在搜索互联网，但我没有找到解决方案。如何在 Facelets 页面中显示异常堆栈跟踪？

**编辑：**

我刚刚尝试过：

```
<c:forEach var="exeption" items="${exception.stackTrace}">
    <div>${exeption}</div>
</c:forEach>

<h:dataTable value="#{exception.stackTrace}"
             var="exception">
    <h:column>
        <h:outputText value="#{exception}"/>
    </h:column>
</h:dataTable> 
```

JSTL 不起作用，并且通过数据表进行交互也不起作用。我确信发生了异常，我在我的日志文件中看到了它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-17T14:58:25.830

它以请求属性的形式出现，其名称由[`RequestDispatcher.ERROR_EXCEPTION`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#ERROR_EXCEPTION)常量指定。

```
#{requestScope['javax.servlet.error.exception']} 
```

这为您提供了整个`Exception`对象。获取它的堆栈跟踪需要更多的工作。你基本上需要[创建一个自定义的 EL 函数](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function/7080174#7080174)，它基本上是这样的：

```
public static String printStackTrace(Throwable exception) {
    StringWriter stringWriter = new StringWriter();
    exception.printStackTrace(new PrintWriter(stringWriter, true));
    return stringWriter.toString();
} 
```

这样您就可以按如下方式使用它：

```
<pre>#{my:printStackTrace(requestScope['javax.servlet.error.exception'])}</pre> 
```

JSF 实用程序库[OmniFaces 也](http://omnifaces.org)提供此功能。另请参阅[`FullAjaxExceptionHandler`展示页面](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)。

# .net - 在默认浏览器中打开 URL 而不给它焦点

> ID：12007760
> 
> 赞同：0
> 
> 时间：2012-08-17T14:32:20.150
> 
> 标签：.net, windows, browser

我有一个 F# 应用程序，我需要在用户的默认浏览器中打开一个 URL。这一切都很好，通过以下方法处理得很好：

```
member this.openUrl (url:Uri) =
    ignore (System.Diagnostics.Process.Start(url.ToString())) 
```

然而，在打开 URL 时，浏览器会获得焦点，使用户远离我的程序。这是次优的，因为用户可能希望快速连续打开多个页面。在这种情况下，浏览器获得焦点，使用户不得不手动切换回我的应用程序。这扰乱了我的应用程序的预期工作流程。

有没有办法阻止默认浏览器在要求它打开 URL 时变为活动状态？

如果您担心用户体验，您可以假设我将添加一个禁用此行为的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:41:06.057

AppActive 可以满足您的需求。

```
Module Module1

    Sub Main()
        Dim processId As Integer = System.Diagnostics.Process.GetCurrentProcess().Id
        Console.WriteLine("Starting Google")
        System.Diagnostics.Process.Start("www.google.com")
        System.Threading.Thread.Sleep(1000)
        Console.WriteLine("Get Focus Back on Process {0}", processId)
        Microsoft.VisualBasic.Interaction.AppActivate(processId)
        Console.Write("Press any key")
        Console.ReadKey()
    End Sub

End Module 
```

不要忘记在 F# 中添加对 Microsoft.VisualBasic 的引用

AppActivate [http://msdn.microsoft.com/en-us/library/x9784w8e.aspx](http://msdn.microsoft.com/en-us/library/x9784w8e.aspx)

许多用户在从命令行运行控制台程序时遇到 AppActivate 问题。答案如下（来自 AppActivate 文档）：

*您只能将 AppActivate 用于拥有窗口的进程。大多数控制台应用程序不拥有窗口，这意味着它们不会出现在 AppActivate 搜索的进程列表中。从控制台应用程序运行时，系统会创建一个单独的进程来运行应用程序并将输出返回到控制台进程。因此，当您请求当前进程 ID 时，您将获得此单独进程的进程 ID，而不是控制台应用程序的进程 ID。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:09:37.957

你可能应该做这样的事情，
这段代码在 c# 中，但你可以轻松地将它移植到 f#

```
AutomationElement desktop = AutomationElement.RootElement;
AutomationElement mainForm = null;
do
{
    mainForm = desktop.FindFirst(TreeScope.Children,
        new PropertyCondition(AutomationElement.NameProperty, "MDSClientForm"));
    Thread.Sleep(100);
}
while (mainForm == null);
mainForm.setFocus() 
```

这使用了微软的[自动化 UI 框架](http://msdn.microsoft.com/en-us/library/ms747327.aspx)

# file - 如何在 Octave 中使用变量文件名将结构保存到文件中？

> ID：12007761
> 
> 赞同：7
> 
> 时间：2012-08-17T14:32:24.220
> 
> 标签：file, struct, save, octave

在 Octave 中，我想将一个结构保存到一个文本文件中，其中文件的名称是在脚本运行时确定的。用我的方法，我总是得到一个错误：

```
expecting all arguments to be strings. 
```

（对于固定文件名，这很好用。）那么如何使用变量文件名将结构保存到文件中？

```
clear all;
myStruct(1).resultA = 1;
myStruct(1).resultB = 2;
myStruct(2).resultA = 3;
myStruct(2).resultB = 4;

variableFilename = strftime ("result_%Y-%m-%d_%H-%M.mat", localtime(time()))

save fixedFilename.mat myStruct; 
% this works and saves the struct in fixedFilename.mat

save( "-text", variableFilename, myStruct); 
% this gives error: expecting all arguments to be strings 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T15:31:14.753

在 Octave 中，当使用 save 作为函数时，您需要执行以下操作：

```
myfilename = "stuff.txt";
mystruct = [ 1 2; 3 4]
save("-text", myfilename, "mystruct"); 
```

上面的代码将创建一个 stuff.txt 文件，并将矩阵数据放入其中。

上面的代码只有在 mystruct 是一个矩阵时才有效，如果你有一个字符串单元格，它将失败。对于那些，你可以自己滚动：

```
 xKey = cell(2, 1);
 xKey{1} = "Make me a sandwich...";
 xKey{2} = "OUT OF BABIES!";
 outfile = fopen("something.txt", "a");
 for i=1:rows(xKey),
   fprintf(outfile, "%s\n", xKey{i,1});
 end
 fflush(outfile);
 fclose(outfile); 
```

# html - - 转移到布局中的新行

> ID：12007762
> 
> 赞同：0
> 
> 时间：2012-08-17T14:32:27.153
> 
> 标签：html, css

我对每个商店元素使用 <li> 来显示按钮。但是每个 < li > 都从新行开始，所以我使用 float: left 来避免这种情况。

html:

```
<div id="main" >    
    <li><div id="block"><img src="blabla"></div></li>
    <li><div id="block"><img src="blabla"></div></li>
    <li><div id="block"><img src="blabla"></div></li>
    <li><div id="block"><img src="blabla"></div></li>
    <li><div id="block"><img src="blabla"></div></li>
</div> 
```

CSS：

```
#main{
    margin: 0px auto;
    width:940px;
    }

#block {
    height:286px;
    width:312px;
    white-space: nowrap;
    vertical-align:middle;
    display:table-cell;
    overflow: hidden;
    border-collapse: collapse;
    }

li {
        list-style-type:none;
        vertical-align:top;
        float:left;
        white-space: nowrap;
        width:313px;
        } 
```

但

我有![在此处输入图像描述](../Images/b916f842410a7efbe8a5510732e8c4a8.png)

我需要：![在此处输入图像描述](../Images/9d903338b52e068bf7d8373a8054602d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:34:04.947

给出#main overflow:auto 并将您的 LI 元素包含在 UL 标记中。

此外，您多次使用相同的 ID，这是不应该的。如果你想像这样使用它，你应该使用一个类而不是一个 ID。ID 是一个独特的标签，每个页面只能使用一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:44:41.767

首先尝试使您的代码验证。您的 html 代码根本无效。放置所有`<li>`内部`<ul>...</ul>`标签。不要使用`same id for multiple times`。你可以使用`class instead of that at multiple of times.`

# c# - 我应该在哪里存储对象集合以方便 DI / 测试？

> ID：12007765
> 
> 赞同：1
> 
> 时间：2012-08-17T14:32:39.167
> 
> 标签：c#, dependency-injection, factory-pattern

我试图找出存储从数据库中检索的对象集合的位置，这些对象集合是应用程序运行所必需的。例如，我正在尝试重新设计一个使用`Report`和`Parameter`对象的报告应用程序。这些对象以 XML 格式存储在数据库中。在最简单的级别，定义的集合可以存储为`Dictionary<string, string>`（对象键，对象定义 XML）。

我想实现一个工厂模式来处理从它们的 XML 定义创建这些对象。

```
IReport GetReport(string reportName)
IParameter GetParameter(string parameterName) 
```

这些方法要求工厂存储报告和参数的集合。

所以，我的问题是：

1.  工厂应该存储对象的集合还是只负责从定义中创建对象，将方法更改为`IReport GetReport(string reportDefinition)`
2.  如果工厂应该存储对象，我应该简单地将集合注入工厂类的构造函数吗？
3.  单元测试——如果我走#2的路线，我想我会把我的测试集合注入工厂，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:38:28.583

您的应用程序应该是持久无知的，因此您的报告工厂（或存储库对于数据存储的外观来说是一个更好的术语，实际上它是一个数据访问对象而不是真正的存储库）不应该采用报告定义格式。

Get 方法应采用报表的唯一标识符（这应该是报表名称吗？）并返回具有报表实体所有值的 DTO 类型。

您可以使用抽象工厂模式来实现存储库的不同实现，一个执行 XML 反序列化，一个模拟实现用于单元测试。

如果您已经有一个数据库作为数据存储，则您的存储库不需要将集合存储在内存中，尽管您可能希望将缓存添加到存储库，如果您的应用程序正在处理抽象，则更容易切换出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T14:44:17.943

您可以通过多种方式来构建它，这些方式都遵守[SRP（单一责任原则）](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

一种方法如下：有一个接口，`IReportLoadingService`，带有一个接收报告标识符并返回`IReport`实例的方法。

这个的实现`IReportLoadingService`可以有`IReportDefinitionRetrievalService`一个依赖，例如

```
public class ReportLoadingService : IReportLoadingService
{
    private readonly IReportDefinitionRetrievalService _definitionService;

    public ReportLoadingService(IReportDefinitionRetrievalService definitionService)
    {
        _definitionService = definitionService;
    }

    public IReport GetReport(string reportName)
    {
        var reportDefinition = definitionService.GetDefinition(reportName);
        return GenerateReportFromDefinition(reportDefinition);
    }

    private IReport GenerateReportFromDefinition(string definition)
    {
        // Logic to construct an IReport implementation
    }

} 
```

的实时实现`IReportDefinitionRetrievalService`将访问数据库并返回 XML。现在您`ReportLoadingService`负责填充`IReport`实例，而另一个服务负责实际获取报表定义。

对于单元测试，您可以创建一个 Mock`IReportDefinitionRetrievalService`来做任何您想做的事情（例如在字典中查找定义）。查看[Moq](http://code.google.com/p/moq/)以获得良好的模拟框架。它将允许您执行以下操作：

```
[Test]
public void GetReportUsesDefinitionService()
{
    var mockDefinitionService = new Mock<IReportDefinitionRetrievalService>();
    mockDefinitionService.Setup(s => s.GetDefinition("MyReportName")).Returns("MyReportDefinition");

    var loadingService = new ReportLoadingService(mockDefinitionService.Object);

    var reportInstance = loadingService.GetReport("MyReportName");

    // Check reportInstance for fields etc

    // Check the definition service was used to load the definition
    mockDefinitionService.Verify(s => s.GetDefinition("MyReportName"), Times.Once());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:48:05.063

> 1.工厂应该存储对象的集合还是应该只负责从定义中创建对象，将方法更改为IReport GetReport(string reportDefinition)

以上都不是。工厂是一个具体的实现选择器。它被实现为一个静态方法，它根据输入实例化一个具体的对象。您已经完成了与接口和名称正确解耦的工作。停在那里。

`static IReport GetReport(string reportName)`

`IReport concreteReport = Factory.GetReport("myReportName")`

通过单元测试来测试工厂是直截了当的。您可以创建一个报告名称数组，并`IReport`通过反射或一些任意已知的断言检查是否正确实现。依赖注入是一个完全不同的话题。

# mdx - MDX：如何合并两个维度的结果？

> ID：12007769
> 
> 赞同：4
> 
> 时间：2012-08-17T14:32:46.247
> 
> 标签：mdx

我是 MDX 的新手。现在我想结合来自 2 个不同维度的两个结果。我正在使用以下代码：

```
With 
 MEMBER [Measures].[Student Head Count].[Program1] AS
([Program1].[Program1].&[1])
MEMBER [Measures].[Student Head Count].[Program2] AS
([Program2].[Program2].&[1]) 

SELECT
NON EMPTY
{
[Measures].[Student Head Count].[Program1] ,
[Measures].[Student Head Count].[Program2]
}
ON COLUMNS

FROM [Current Student Overview] 
```

错误显示：

```
The Program1 calculated member cannot be created because its parent is at the lowest level in the Measures hierarchy. 
```

我知道“Student Head Count”处于最低级别，但我不知道如何修改语法。如果我将“Student Head Count”替换为“Test”，它也不起作用。此外，我尝试过的“联合”不起作用。任何人都可以帮助我修改或新的 MDX 吗？

我尝试使用以下脚本使用 Crossjoin：

```
SELECT
 NON EMPTY
{

 [Measures].[Student Head Count]
}
ON COLUMNS,
NON EMPTY
{
NONEMPTYCROSSJOIN({[Program1].[Program1].&[1]},{[Program2].[Program2] }),
NONEMPTYCROSSJOIN({[Program1].[Program1] },{[Program2].[Program2].&[1]})  
}
on 1

FROM [Current Student Overview] 
```

结果是：

![在此处输入图像描述](../Images/26895e018724bd632eed28c67bdaa040.png)

那么如何消除或隐藏性能点中的“全部”列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:01:34.623

Measure 维度上只有一个级别。您的度量名称应该是`[Measures].[Program21]`and `[Measures].[Program2]`。

您还可以像这样重写您的查询：

```
SELECT
NON EMPTY
{
    ([Program1].[Program1].&[1], [Program2].[Program2].&[1])
}
ON COLUMNS
FROM [Current Student Overview]
WHERE ([Measures].[Student Head Count]) 
```

在 Mdx 中，您不能合并来自不同维度的结果，但您可以使用[CrossJoin](http://msdn.microsoft.com/en-us/library/ms144816)函数进行叉积。

编辑：当您的集合中只有一个成员时，您不需要使用 CrossJoin。你可以做到`(member1, member2)`。

如果您不想看到`All`，可以使用如下查询：

```
WITH
 MEMBER [Measures].[Student Head Count Program1] AS
    ([Measures].[Student Head Count], [Program1].[Program1].&[1], [Program2].[Program2].[All])
MEMBER [Measures].[Student Head Count Program2] AS
    ([Measures].[Student Head Count], [Program1].[Program1].[All], [Program2].[Program2].&[1]) 
SELECT
NON EMPTY
{
    [Measures].[Student Head Count Program1] ,
    [Measures].[Student Head Count Program2]
}
ON COLUMNS
FROM [Current Student Overview] 
```

# java - Android中固定框架中的可拖动位图

> ID：12007772
> 
> 赞同：0
> 
> 时间：2012-08-17T14:32:51.690
> 
> 标签：java, android

我想创建一个具有固定框架和可拖动位图的 android 应用程序。其实我想要一些像facebook封面重新定位的东西！我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:52:13.207

您可以使用`crop`
see [here](https://stackoverflow.com/questions/1973359/android-crop-an-image-after-taking-it-with-camera-with-a-fixed-aspect-ratio)来学习如何实现`crop`
通过使用它，您可以根据需要固定框架的纵横比，并且可以根据需要在框架中拖动图像。

# opencv - 使用 OpenCV 从屏幕坐标计算世界坐标

> ID：12007775
> 
> 赞同：9
> 
> 时间：2012-08-17T14:32:54.033
> 
> 标签：opencv, kinect, camera-calibration, calibration

我已经用 OpenCV 计算了相机的内在和外在参数。现在，我想根据屏幕坐标 (u,v) 计算世界坐标 (x,y,z)。

我该怎么做？

注意，当我使用 kinect 时，我已经知道 z 坐标。

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-17T18:56:13.667

首先要了解如何计算它，如果您阅读一些有关针孔相机模型和简单透视投影的内容，它将对您有所帮助。如需快速浏览，请查看[此](http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/OWENS/LECT9/node2.html)。我会尝试更新更多。

因此，让我们从描述相机工作原理的相反开始：将世界坐标系中的 3d 点投影到图像中的 2d 点。根据相机型号：

P_screen = I * P_world

或（使用齐次坐标）

```
| x_screen | = I * | x_world |
| y_screen |       | y_world |
|    1     |       | z_world |
                   |    1    | 
```

在哪里

```
I = | f_x    0    c_x    0 | 
    |  0    f_y   c_y    0 |
    |  0     0     1     0 | 
```

是 3x4 内在矩阵，f 是焦点，c 是投影中心。

如果你解决了上面的系统，你会得到：

```
x_screen = (x_world/z_world)*f_x + c_x
y_screen = (y_world/z_world)*f_y + c_y 
```

但是，你想做相反的事情，所以你的答案是：

```
x_world = (x_screen - c_x) * z_world / f_x
y_world = (y_screen - c_y) * z_world / f_y 
```

z_world 是 Kinect 返回给您的深度，您从内在校准中知道 f 和 c，因此对于每个像素，您应用上述内容来获取实际的世界坐标。

**编辑1（为什么上面对应于世界坐标以及我们在校准过程中得到的外在因素是什么）：**

首先，检查[这个](http://www.cse.unr.edu/~bebis/CS791E/Notes/CameraParameters.pdf)，它很好地解释了各种坐标系。

您的 3d 坐标系是：对象 ---> 世界 ---> 相机。有一个转换将您从对象坐标系带到世界，另一个将您从世界带到相机（您所指的外在因素）。通常你会假设：

*   要么 Object 系统对应 World 系统，
*   或者，Camera 系统对应 World 系统

**1\. 用 Kinect 捕捉物体时**

当你使用 Kinect 捕捉物体时，传感器返回给你的是*与摄像头*的距离。这意味着 z 坐标已经在相机坐标中。通过使用上面的等式转换 x 和 y，您可以得到**相机坐标**中的点。

现在，世界坐标系由您定义。一种常见的方法是假设相机位于世界坐标系的 (0,0,0) 处。因此，在这种情况下，外部矩阵实际上对应于单位矩阵，而您找到的相机坐标对应于**世界坐标**。

*旁注：*因为 Kinect 返回的是相机坐标中的 z，所以也不需要从物体坐标系转换到世界坐标系。例如，假设您有一个不同的相机来捕捉人脸，并且对于每个点，它都会返回与鼻子的距离（您认为它是对象坐标系的中心）。在这种情况下，由于返回的值将在对象坐标系中，我们确实需要一个旋转和平移矩阵来将它们带到相机坐标系中。

**2\. 校准相机时**

我想您正在使用具有各种姿势的校准板使用 OpenCV 校准相机。通常的方法是假设棋盘实际上是稳定的，并且相机正在移动而不是相反（两种情况下的变换是相同的）。**这意味着现在世界坐标系对应于对象坐标系。**这样，对于每一帧，我们找到棋盘角并为其分配 3d 坐标，执行如下操作：

```
std::vector<cv::Point3f> objectCorners;

for (int i=0; i<noOfCornersInHeight; i++) 
{
    for (int j=0; j<noOfCornersInWidth; j++) 
    {
        objectCorners.push_back(cv::Point3f(float(i*squareSize),float(j*squareSize), 0.0f));
    }
} 
```

在哪里`noOfCornersInWidth`，取决于你的校准板`noOfCornersInHeight`。`squareSize`例如，如果 noOfCornersInWidth = 4、noOfCornersInHeight = 3 和 squareSize = 100，我们得到 3d 点

```
(0  ,0,0)  (0  ,100,0)  (0  ,200,0)    (0  ,300,0)
(100,0,0)  (100,100,0)  (100,200,0)    (100,300,0)
(200,0,0)  (200,100,0)  (200,200,0)    (200,300,0) 
```

所以，这里我们的坐标实际上是在**对象坐标系中**。（我们任意假设棋盘的左上角为（0,0,0），其余角的坐标均以此为准）。所以这里我们确实需要旋转和变换矩阵来把我们从物体（世界）带到相机系统。这些是 OpenCV 为每一帧返回的外在参数。

*总结一下**Kinect**案例：*

*   相机和世界坐标系统被认为是相同的，因此不需要外在。
*   不需要对象到世界（相机）的转换，因为 Kinect 返回值已经在相机系统中。

**编辑 2（在使用的坐标系上）：**

这是一个约定，我认为它还取决于您使用的驱动程序以及您返回的数据类型。例如，检查[那个](http://social.msdn.microsoft.com/Forums/en-US/kinectsdk/thread/df00cb09-8d74-4c0d-80bf-83b4604009a3/)、[那个](https://groups.google.com/forum/?fromgroups=#!topic/openni-dev/Plj8T_ZpLqw)和[那个](http://answers.ros.org/question/33091/doubts-about-interpreting-xyz-from-kinect/)。

*旁注：*如果您将点云可视化并对其进行一些操作，将会对您有很大帮助。您可以将您的点保存为 3d 对象格式（例如[ply](http://en.wikipedia.org/wiki/PLY_%28file_format%29)或[obj](http://en.wikipedia.org/wiki/Wavefront_.obj_file)），然后只需将其导入[Meshlab](http://meshlab.sourceforge.net/)之类的程序（非常易于使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:08:37.477

编辑 2（在使用的坐标系上）：

这是一个约定，我认为它还取决于您使用的驱动程序以及您返回的数据类型。例如，检查那个，那个和那个。

> 例如，如果您使用 microsoft sdk: 那么 Z 不是到相机的距离，而是到相机的“平面”距离。这可能会更改适当的公式。

# .net - 为什么不等待 Task.WhenAll 抛出 AggregateException？

> ID：12007781
> 
> 赞同：133
> 
> 时间：2012-08-17T14:33:25.200
> 
> 标签：.net, exception, asynchronous, tap

在这段代码中：

```
private async void button1_Click(object sender, EventArgs e) {
    try {
        await Task.WhenAll(DoLongThingAsyncEx1(), DoLongThingAsyncEx2());
    }
    catch (Exception ex) {
        // Expect AggregateException, but got InvalidTimeZoneException
    }
}

Task DoLongThingAsyncEx1() {
    return Task.Run(() => { throw new InvalidTimeZoneException(); });
}

Task DoLongThingAsyncEx2() {
    return Task.Run(() => { throw new InvalidOperation();});
} 
```

我希望`WhenAll`创建并抛出一个`AggregateException`，因为它正在等待的至少一个任务引发了异常。相反，我正在返回由其中一项任务引发的单个异常。

并不`WhenAll`总是创建一个?`AggregateException`

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2016-08-24T13:03:50.677

我知道这是一个已经回答的问题，但选择的答案并不能*真正*解决 OP 的问题，所以我想我会发布这个。

此解决方案为您提供聚合异常（即各种任务引发的*所有*异常）并且不会阻塞（工作流程仍然是异步的）。

```
async Task Main()
{
    var task = Task.WhenAll(A(), B());

    try
    {
        var results = await task;
        Console.WriteLine(results);
    }
    catch (Exception)
    {
        if (task.Exception != null)
        {
            throw task.Exception;
        }
    }
}

public async Task<int> A()
{
    await Task.Delay(100);
    throw new Exception("A");
}

public async Task<int> B()
{
    await Task.Delay(100);
    throw new Exception("B");
} 
```

关键是在等待之前保存对聚合任务的引用，然后您可以访问它的 Exception 属性，该属性包含您的 AggregateException（即使只有一个任务引发了异常）。

希望这仍然有用。我知道我今天遇到了这个问题。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2012-08-17T14:40:40.847

我不完全记得在哪里，但是我在某个地方读到了新的*async/await*关键字，它们将它们解包`AggregateException`到实际的异常中。

因此，在 catch 块中，您会得到实际的异常，而不是聚合的异常。这有助于我们编写更自然和直观的代码。

这也是为了更容易地将现有代码转换为使用*async/await*所需要的，其中许多代码需要特定的异常而不是聚合的异常。

**- 编辑 -**

知道了：

## [Bill Wagner 的异步入门](http://download.microsoft.com/download/5/4/B/54B83DFE-D7AA-4155-9687-B0CF58FF65D7/async-primer.pdf)

> 比尔瓦格纳说：（在**发生异常时**）
> 
> ...当您使用 await 时，编译器生成的代码会解开 AggregateException 并引发底层异常。通过利用 await，您可以避免处理 Task.Result、Task.Wait 和 Task 类中定义的其他 Wait 方法使用的 AggregateException 类型的额外工作。这是使用 await 而不是底层 Task 方法的另一个原因....

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2016-01-29T07:18:07.630

你可以遍历所有任务，看看是否有多个任务抛出了异常：

```
private async Task Example()
{
    var tasks = new [] { DoLongThingAsyncEx1(), DoLongThingAsyncEx2() };

    try 
    {
        await Task.WhenAll(tasks);
    }
    catch (Exception ex) 
    {
        var exceptions = tasks.Where(t => t.Exception != null)
                              .Select(t => t.Exception);
    }
}

private Task DoLongThingAsyncEx1()
{
    return Task.Run(() => { throw new InvalidTimeZoneException(); });
}

private Task DoLongThingAsyncEx2()
{
    return Task.Run(() => { throw new InvalidOperationException(); });
} 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2020-06-27T08:11:11.013

这里有很多好的答案，但我仍然想发表我的咆哮，因为我刚刚遇到了同样的问题并进行了一些研究。或者跳到下面[的 TLDR 版本](https://stackoverflow.com/questions/12007781/why-doesnt-await-on-task-whenall-throw-an-aggregateexception/62607500#62607500:~:text=A%20solution)。

### 问题

*等待`task`返回的 by`Task.WhenAll`只会引发`AggregateException`存储的第一个异常`task.Exception`，即使多个任务出现故障也是如此。*

当前的[文档`Task.WhenAll`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.whenall?view=netcore-3.1)说：

> 如果任何提供的任务在故障状态下完成，则返回的任务也将在故障状态下完成，其异常将包含来自每个提供的任务的未包装异常集的聚合。

这是正确的，但它没有说明上述等待返回任务时的“解包”行为。

我想，文档没有提到它，**因为这种行为不是特定于`Task.WhenAll`**.

它只是[`Task.Exception`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.exception?view=netcore-3.1)类型`AggregateException`，并且对于`await`延续，它总是被设计为它的第一个内部异常。这对大多数情况都很好，因为通常`Task.Exception`只包含一个内部异常。但是考虑一下这段代码：

```
Task WhenAllWrong()
{
    var tcs = new TaskCompletionSource<DBNull>();
    tcs.TrySetException(new Exception[]
    {
        new InvalidOperationException(),
        new DivideByZeroException()
    });
    return tcs.Task;
}

var task = WhenAllWrong();    
try
{
    await task;
}
catch (Exception exception)
{
    // task.Exception is an AggregateException with 2 inner exception 
    Assert.IsTrue(task.Exception.InnerExceptions.Count == 2);
    Assert.IsInstanceOfType(task.Exception.InnerExceptions[0], typeof(InvalidOperationException));
    Assert.IsInstanceOfType(task.Exception.InnerExceptions[1], typeof(DivideByZeroException));

    // However, the exception that we caught here is 
    // the first exception from the above InnerExceptions list:
    Assert.IsInstanceOfType(exception, typeof(InvalidOperationException));
    Assert.AreSame(exception, task.Exception.InnerExceptions[0]);
} 
```

在这里，一个实例`AggregateException`被解包到它的第一个内部异常`InvalidOperationException`，其方式与我们使用`Task.WhenAll`. `DivideByZeroException`如果我们不直接通过，我们可能无法观察到`task.Exception.InnerExceptions`。

Microsoft 的[Stephen Toub在](https://devblogs.microsoft.com/dotnet/author/toub/)[相关的 GitHub 问题](https://github.com/dotnet/runtime/issues/31494#issuecomment-553941135)中解释了这种行为背后的原因：

> 我试图说明的一点是，几年前，当这些最初被添加时，它已经被深入讨论过。我们最初按照您的建议做了，从 WhenAll 返回的 Task 包含一个包含所有异常的 AggregateException ，即 task.Exception 将返回一个 AggregateException 包装器，其中包含另一个 AggregateException 然后包含实际异常；然后当它被等待时，内部的 AggregateException 将被传播。我们收到的强烈反馈导致我们改变了设计：a) 绝大多数此类案例都有相当同质的异常，因此在聚合中传播所有内容并不那么重要，b) 传播聚合然后打破对捕获的预期对于特定的异常类型，c）对于有人确实想要聚合的情况，他们可以像我写的那样用两行明确地这样做。我们还就包含多个异常的任务的 await sould 行为进行了广泛的讨论，这就是我们着陆的地方。

另一件需要注意的重要事情是，这种展开行为很浅。即，它只会解开第一个异常`AggregateException.InnerExceptions`并将其留在那里，即使它恰好是 another 的实例`AggregateException`。这可能会增加另一层混乱。例如，让我们`WhenAllWrong`这样更改：

```
async Task WhenAllWrong()
{
    await Task.FromException(new AggregateException(
        new InvalidOperationException(),
        new DivideByZeroException()));
}

var task = WhenAllWrong();

try
{
    await task;
}
catch (Exception exception)
{
    // now, task.Exception is an AggregateException with 1 inner exception, 
    // which is itself an instance of AggregateException
    Assert.IsTrue(task.Exception.InnerExceptions.Count == 1);
    Assert.IsInstanceOfType(task.Exception.InnerExceptions[0], typeof(AggregateException));

    // And now the exception that we caught here is that inner AggregateException, 
    // which is also the same object we have thrown from WhenAllWrong:
    var aggregate = exception as AggregateException;
    Assert.IsNotNull(aggregate);
    Assert.AreSame(exception, task.Exception.InnerExceptions[0]);
    Assert.IsInstanceOfType(aggregate.InnerExceptions[0], typeof(InvalidOperationException));
    Assert.IsInstanceOfType(aggregate.InnerExceptions[1], typeof(DivideByZeroException));
} 
```

### 解决方案 (TLDR)

所以，回到`await Task.WhenAll(...)`，我个人想要的是能够：

*   如果只抛出一个异常，则获取一个异常；
*   `AggregateException`如果一个或多个任务共同抛出了多个异常，则获取一个；
*   避免必须保存`Task`唯一用于检查其`Task.Exception`;
*   正确传播取消状态（`Task.IsCanceled`），因为这样的事情不会那样做：`Task t = Task.WhenAll(...); try { await t; } catch { throw t.Exception; }`.

为此，我整理了以下扩展名：

```
public static class TaskExt 
{
    /// <summary>
    /// A workaround for getting all of AggregateException.InnerExceptions with try/await/catch
    /// </summary>
    public static Task WithAggregatedExceptions(this Task @this)
    {
        // using AggregateException.Flatten as a bonus
        return @this.ContinueWith(
            continuationFunction: anteTask =>
                anteTask.IsFaulted &&
                anteTask.Exception is AggregateException ex &&
                (ex.InnerExceptions.Count > 1 || ex.InnerException is AggregateException) ?
                Task.FromException(ex.Flatten()) : anteTask,
            cancellationToken: CancellationToken.None,
            TaskContinuationOptions.ExecuteSynchronously,
            scheduler: TaskScheduler.Default).Unwrap();
    }    
} 
```

现在，以下按我想要的方式工作：

```
try
{
    await Task.WhenAll(
        Task.FromException(new InvalidOperationException()),
        Task.FromException(new DivideByZeroException()))
        .WithAggregatedExceptions();
}
catch (OperationCanceledException) 
{
    Trace.WriteLine("Canceled");
}
catch (AggregateException exception)
{
    Trace.WriteLine("2 or more exceptions");
    // Now the exception that we caught here is an AggregateException, 
    // with two inner exceptions:
    var aggregate = exception as AggregateException;
    Assert.IsNotNull(aggregate);
    Assert.IsInstanceOfType(aggregate.InnerExceptions[0], typeof(InvalidOperationException));
    Assert.IsInstanceOfType(aggregate.InnerExceptions[1], typeof(DivideByZeroException));
}
catch (Exception exception)
{
    Trace.WriteLine($"Just a single exception: ${exception.Message}");
} 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2018-04-02T00:02:33.290

只是想我会扩展@Richiban 的答案，说您还可以通过从任务中引用它来处理 catch 块中的 AggregateException 。例如：

```
async Task Main()
{
    var task = Task.WhenAll(A(), B());

    try
    {
        var results = await task;
        Console.WriteLine(results);
    }
    catch (Exception ex)
    {
        // This doesn't fire until both tasks
        // are complete. I.e. so after 10 seconds
        // as per the second delay

        // The ex in this instance is the first
        // exception thrown, i.e. "A".
        var firstExceptionThrown = ex;

        // This aggregate contains both "A" and "B".
        var aggregateException = task.Exception;
    }
}

public async Task<int> A()
{
    await Task.Delay(100);
    throw new Exception("A");
}

public async Task<int> B()
{
    // Extra delay to make it clear that the await
    // waits for all tasks to complete, including
    // waiting for this exception.
    await Task.Delay(10000);
    throw new Exception("B");
} 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-04-17T04:44:58.187

你在想`Task.WaitAll`- 它抛出一个`AggregateException`.

WhenAll 只是抛出它遇到的异常列表中的第一个异常。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2018-12-14T17:43:42.307

这对我有用

```
private async Task WhenAllWithExceptions(params Task[] tasks)
{
    var result = await Task.WhenAll(tasks);
    if (result.IsFaulted)
    {
                throw result.Exception;
    }
} 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2014-09-04T07:31:19.463

在您的代码中，第一个异常是按设计返回的，如 [http://blogs.msdn.com/b/pfxteam/archive/2011/09/28/task-exception-handling-in-net-4-5 中所述。 aspx](http://blogs.msdn.com/b/pfxteam/archive/2011/09/28/task-exception-handling-in-net-4-5.aspx)

至于您的问题，如果您编写如下代码，您将收到 AggreateException：

```
try {
    var result = Task.WhenAll(DoLongThingAsyncEx1(), DoLongThingAsyncEx2()).Result; 
}
catch (Exception ex) {
    // Expect AggregateException here
} 
```

# touch - 如果我为移动目标编译代码，OpenLaszlo 鼠标事件会转换为触摸事件吗？

> ID：12007786
> 
> 赞同：1
> 
> 时间：2012-08-17T14:33:41.630
> 
> 标签：touch, mouseevent, openlaszlo, lzx

我想知道在以移动格式编译时，打开的 laszlo 鼠标按下事件是否会转换为触摸事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:37:20.287

是的，至少在 iPad 上。去年，出于研发目的，我在我的应用程序的 HTML5（又名 DHTML）模式下运行 OpenLaszlo 4.9.0 的 iPad2 上对此进行了测试，并确认以下内容有效：

1) 在 OpenLaszlo HTML5 模式下在应用程序中触摸屏幕上的按钮正确触发了按钮的 onclick 事件。

2) 在 OpenLaszlo HTML5 模式下用手指在触摸屏上拖放与在非触摸屏系统上用鼠标拖放具有相同的效果。

注：此仅在 iPad2 上测试，未在 Android、Windows Phone、Blackberry 等上测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T18:46:54.053

Flash 与移动设备无关（因为 Flash Player 刚刚从 Google Play 商店中删除），但如果您想构建原生应用程序，可以选择适用于 Android 和 iOS 的 Adob​​e AIR。在这种情况下，您必须使用 ActionScript3 API 开始捕获触摸事件。

# hibernate - 如何重新启动 Hibernate 处理的 PostgreSQL 序列？

> ID：12007793
> 
> 赞同：5
> 
> 时间：2012-08-17T14:34:16.583
> 
> 标签：hibernate, postgresql

我的任务是重新启动 PostgreSQL 数据库中许多不同串行列的序列。通常，我会简单地使用：

```
ALTER SEQUENCE serial RESTART WITH 105; 
```

然而，似乎 Hibernate 被用来处理数据库序列。我真的对Hibernate一无所知，但我的理解是hibernate_sequence是所有表的全局序列。那是对的吗？

我假设我需要执行以下操作，然后：

```
ALTER SEQUENCE hibernate_sequence RESTART WITH 105; 
```

但我不确定后果会是什么。假设我有表 A、B、C 和 D。这些表中的每一个都有一个序列类型的 ID 列。上面关于 hibernate_sequence 的 SQL 语句会重新启动所有表的 ID 列吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:48:05.430

首先，这里有一个潜在的问题：您将序列的值视为有意义的东西。请看答案的结尾。

现在，使用 Hibernate，它取决于用户如何配置映射。一个配置良好的 Hibernate 实例将使用与其他所有实例相同的序列。

不幸的是，大多数映射都不是很好——或者更确切地说，我认为 Hibernate 的默认行为很糟糕，应该始终被覆盖。使用的默认序列确实是`hibernate_sequence`所有表的共享序列。但是，完全有可能让*一些*表使用它们自己的序列，而其他表使用 shared `hibernate_sequence`，或者让所有表都正确地使用它们自己的序列。

要启用明确的答案，您需要发布您的映射。

如果您要更改其 ID 生成的表在其 Hibernate 映射中为其表使用正确的序列，您可以继续`ALTER SEQUENCE`使用该序列。如果您的映射是通过 JPA 进行的，则使用 a`@SequenceGenerator`和`@GeneratedValue`with完成`GenerationType.SEQUENCE`。如果它是通过或旧式 Hibernate 注释完成的，您需要查看手册`orm.xml`。`hbm.xml`或者，如果 Hibernate 是唯一写入数据库的客户端，请查看序列以查看它们是否正在使用`SELECT * FROM sequence_name`.

如果感兴趣的表的映射正在使用共享`hibernate_sequence`，那么如果不修复 Hibernate 映射，您可能无法做您想做的事情。您需要更改映射，以便感兴趣的表的映射使用不同的序列，然后``LOCK TABLE`将这些序列的起点设置为表中当前最大的行。

**序列**：为什么*需要*更改或重新启动序列？没关系，因为合成主键只是一个无意义的数字，您可以将其与其他无意义的数字进行比较。您要解决的问题是什么？

# c# - c# 按联系人状态和姓名对列表中的对象进行排序

> ID：12007794
> 
> 赞同：1
> 
> 时间：2012-08-17T14:34:22.233
> 
> 标签：c#, sorting, .net-3.5, instantmessenger

我有一个 BindingList 对象，其中保存了一些联系人。

```
 internal static BindingList<object> contactList; 
```

contactList 对象是更多类型。SktContact、FBContact、GContact。

这些联系人我在contactList_Changed 事件中添加到listBox。但我想按状态（首先在线）然后按字母顺序对它们进行排序。

我想要这样的想法：

```
 List<object> contactSorted = new List<object>();
  contactSorted = Global.contactList.ToList();

  contactSorted.OrderBy((status, name) => Converter.getContactAvailabilityStatus(contactSorted[?]), Converter.getContactName(contactSorted[?]));

  contactListBox.Items.AddRange(contactSorted.ToArray()); 
```

但我不知道我应该怎么做。我无法重新键入对象列表并选择要排序的属性。

我有从任何对象获取状态和名称的方法。但是如何使用它对联系人数组进行排序呢？

我正在使用自己的绘图**所有者绘制已修复**

```
 private void contactListBox_DrawItem(object sender, DrawItemEventArgs e) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:44:51.670

1.  感觉就像您可以为联系人类型使用接口：

    ```
    interface IContact
    {
        string Status { get; }
        string Name { get; }
    }

    class FBContact : IContact
    {
        public string Status
        {
            get
            {
                // Implement the status getter   
            }
        }
        public string Name
        {
            get
            {
                // Implement the contact name getter   
            }
        }
    } 
    ```

2.  然后就

    ```
    var unsortedList = Global.contactList;
    var contactSorted = unsortedList.Cast<IContact>()
                                    .OrderBy(x => x.Status)
                                    .ThenBy(x => x.Name);

    contactListBox.Items.AddRange(contactSorted.ToArray()); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T14:45:23.107

您可以做的是为您的联系人类实现一个接口。

```
public interface IContact{
    string Name {get;set;}
    int Status{get;set;}
} 
```

并将您的类声明更改为

```
public class SktContact: IContact {
    // Implementations
}
... 
```

之后，您可以使用接口名称声明您的列表

```
var contacts= new List<IContact>():
// Populate contacts to the list 
```

然后将列表排序为

```
var orderedList = contact.OrderByDescending(c=>c.Status).ThenBy(c=>c.name).ToList(): 
```

然后在使用列表项时，您可以使用 GetType() 方法来确定它们的类型并使用适当的代码来处理它们。

如果您无权访问联系人类的实现，您可以使用[适配器设计模式](http://www.dofactory.com/Patterns/PatternAdapter.aspx)使它们与您的代码兼容。

# r - 如何仅将一些正数转换为负数（条件重新编码）？

> ID：12007796
> 
> 赞同：2
> 
> 时间：2012-08-17T14:34:23.063
> 
> 标签：r, variables, data-management

我正在寻找一种方便的方法将正值（比例）转换为同一变量的负值，具体取决于另一个变量的值。

这是数据结构的样子：

```
id Item Var1  Freq 
1  P1   0    0.043
2  P2   1    0.078
3  P3   2    0.454
4  P4   3    0.543
5  T1   0    0.001
6  T2   1    0
7  T3   2    0.045
8  T4   3    0.321
9  A1   0    0.671
... 
```

更准确地说，如果 Var1 <= 1（例如 -0.043），我想将 Freq 的数字设为负数。

这是我尝试过的：

```
for(i in 1: 180) {
if (mydata$Var1 <= "1") (mydata$Freq*(-1))} 
```

或者

```
mydata$Freq[mydata$Var1 <= "1"] = -abs(mydata$Freq)} 
```

在这两种情况下，负号的设置都是正确的，但数字也会改变。

非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:40:32.750

```
new.Freq <- with(mydata, ifelse(Var1 <= 1, -Freq, Freq)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T14:40:57.227

尝试：

```
index <- mydata$Var1 <= 1
mydata$Freq[index] = -abs(mydata$Freq[index]) 
```

您尝试的代码中有两个错误：

*   您通过写作进行了字符比较`x <= "1"`- 这应该是数字比较，即`x <= 1`
*   尽管您要替换向量的一个子集，但您不会引用与替换相同的子集

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-24T13:28:15.533

它也可以用于处理两个变量，当一个变量具有负值并希望通过保留负值来组合它时，同样可以使用它在变量的开头放置 - 将其转换为负值（如上所述），例如 -Freq。

```
mydata$new_Freq <- with(mydata, ifelse(Var1 < 0, Low_Freq, Freq))

id Item Var1  Freq  Low_Freq
1  P1   0    1.043  -0.063
2  P2   1    1.078  -0.077 
3  P3   2    2.401  -0.068  
4  P4   3    3.543  -0.323
5  T1   0    1.001   1.333
6  T2   1    1.778   1.887 
7  T3   2    2.045   1.011
8  T4   3    3.321   1.000
9  A1   0    4.671   2.303

# Output would be:

id Item Var1  Freq  Low_Freq   new_Freq
1  P1   0    1.043  -0.063     -0.063
2  P2   1    1.078  -0.077     -0.077
3  P3   2    2.401  -0.068     -0.068
4  P4   3    3.543  -0.323     -0.323
5  T1   0    1.001   0.999      1.001
6  T2   1    1.778   0.887      1.778
7  T3   2    2.045   1.011      2.045
8  T4   3    3.321   1.000      3.321
9  A1   0    4.671   2.303      4.671 
```

# sql - 在 SQL 中将多列视为 1 以获取聚合

> ID：12007799
> 
> 赞同：1
> 
> 时间：2012-08-17T14:34:31.083
> 
> 标签：sql, unions

是否也可以计数？我的 UNION 为我提供了所有 4 列中的所有不同值，但现在我需要知道每个值在所有 4 列中出现的次数。如果可能，需要使用库存 SQL。

![在此处输入图像描述](../Images/8ebb94b56e7da97a6017b376c02e465d.png)

```
(SELECT DISTINCT classify1 AS classified FROM class) UNION
(SELECT DISTINCT classify2 AS classified FROM class) UNION
(SELECT DISTINCT classify3 AS classified FROM class) UNION
(SELECT DISTINCT classify4 AS classified FROM class)
ORDER BY classified 
```

回报：

A
B
C
D
E
F
H

需要：

一个 | 3
乙 | 3C
| 4D
| 3
E | 1
楼 | 1
小时| 1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:43:13.637

[SQL小提琴](http://sqlfiddle.com/#!3/4187c/5)

```
SELECT a.classified, COUNT(*)
FROM
(
  (SELECT classify1 AS classified FROM class) UNION ALL
  (SELECT classify2 AS classified FROM class) UNION ALL
  (SELECT classify3 AS classified FROM class) UNION ALL
  (SELECT classify4 AS classified FROM class)) a
GROUP BY a.classified 
```

### 结果

```
| 分类 | COLUMN_1 |
-------------------------
| 一个 | 3 |
| 乙| 3 |
| C | 4 |
| D | 3 |
| E | 1 |
| F | 1 |
| H | 1 |
```

当你使用时，`DISTINCT`你消除了额外的“A”`classify3`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:36:36.097

使用`UNION ALL`代替`UNION`，将结果嵌入到子查询中以执行聚合。

```
SELECT
  classified,
  COUNT(*)
FROM
(
  (SELECT classify1 AS classified FROM class) UNION ALL
  (SELECT classify2 AS classified FROM class) UNION ALL
  (SELECT classify3 AS classified FROM class) UNION ALL
  (SELECT classify4 AS classified FROM class)
)
  AS unified_data
GROUP BY
  classified
ORDER BY
  classified 
```

# ruby-on-rails - Rails：使用 Eval 调用另一个动作

> ID：12007802
> 
> 赞同：1
> 
> 时间：2012-08-17T14:34:44.720
> 
> 标签：ruby-on-rails, ruby, model-view-controller, controllers, realex-payments-api

我知道从控制器调用其他操作未被批准，但我得到的代码是使用 eval() 来做到这一点。

```
 if @payment.save
    eval("pay_with_#{params[:method]}")
  end 
```

方法参数已设置（其值为 realex）并且付款正在保存，但未调用 pay_with_realex 函数。这大概与eval（）有关吗？

你会建议什么作为替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:38:51.423

你可以使用`Object.send`

```
if @payment.save
    send("pay_with_#{params[:method]}")
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:41:25.497

在不了解您的控制器的情况下，我最初的想法是将“pay_with_”方法向下移动到您的@payment 类中，并将其子类化以处理不同的付款方式。

```
class Payment < ActiveRecord::Base

end

class PaymentRealEx < Payment
  def pay
    # your way of doing payment
  end
end

class PaymentController
  def create
    case params[:method]
    when "realex"
      @payment = PaymentReadEx.new
    end
    if @payment.save
      @payment.pay
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T16:12:17.823

您可以动态调用控制器中的其他方法，但由于各种原因，这不是一个好主意。您可以拥有私有控制器方法，然后根据条件调用它们，但您的代码将不是面向对象的。

但如果你必须这样做，

您可以使用 Object#send

```
if @payment.save
    send("pay_with_#{params[:method]}")
end 
```

或者你可以使用 method.call

```
if @payment.save
    method("pay_with_#{params[:method]}").call
end 
```

话虽如此，最好的方法是让支付方法是模型并根据您的参数调用它们，可能使用 STI。

# c# - 是否可以通过 ftp 获取文件版本？

> ID：12007803
> 
> 赞同：0
> 
> 时间：2012-08-17T14:34:50.117
> 
> 标签：c#, ftp, versioning

我的问题很简单。我在一个版本为 1.0.0.0 的 ftp 服务器上有一个 exe 文件。我想下载它，但前提是版本大于某个预设值。（所有这些都在 C# 桌面应用程序中）。

我在网上读到，如果不先下载文件，就无法通过 FTP 告诉文件的版本。它是否正确？（我宁愿不这样做，因为文件相当大，大部分时间都不需要下载）。

如果是，我看到推荐的解决方案是在 FTP 目录中创建一个包含目标 exe 文件版本的文本文件。显然它不会很大，因此可以快速下载。如果我不能直接获取 exe 版本，这是最好的解决方案吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T14:37:56.897

你不能，因为 FTP 没有文件版本的协议规范。根据您使用的 FTP 服务器，在 DIR 命令中您可能拥有有关文件的日期时间信息。所以是的，我认为拥有元数据文件是最好的更简单的解决方案。另一个更具挑战性的解决方案是制作一些 FTP 源代码以返回版本信息以及 DIR 命令，据我所知，ftp 协议对 dir 命令的细节完全没有限制，但这并不容易所以是让您评估收益并记住这是一个仅与您的服务器客户端对一起使用的解决方案。如果您不介意该协议，那么提供 Mercurial（或其他版本系统）存储库可能是最明智的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T14:36:36.533

不，不下载 exe，FTP 协议不支持此功能。

我会推荐版本文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T14:38:02.550

FTP 协议不支持任何版本检查。添加可以检查文件版本的 HTTP 服务。

# mysql - 左外连接sql中忽略的子句

> ID：12007805
> 
> 赞同：2
> 
> 时间：2012-08-17T14:35:23.110
> 
> 标签：mysql, sql

我在使用 sql 查询时遇到了一些问题。以下查询返回权限结果。它返回表中男性、说瑞典语并且在第 4 组中的成员。

```
SELECT DISTINCT Member.ID 
FROM Member
LEFT OUTER JOIN Experience ON Experience.MemberID = Member.ID
LEFT OUTER JOIN Qualification ON Qualification.MemberID = Member.ID
LEFT OUTER JOIN Language On Language.MemberID = Member.ID
LEFT OUTER JOIN Member_Interests ON Member_Interests.MemberID = Member.ID
LEFT OUTER JOIN Group_Members ON Group_Members.MemberID = Member.ID
WHERE 1=1 AND Gender = 'male' AND Language.Name IN ( 'Swedish' ) AND Group_Members.GroupID = 4 
```

但是，如果我排除直接在成员表上搜索的其他 where 条件，则 language.Name 将被忽略。IE。

```
SELECT DISTINCT Member.ID 
FROM Member
LEFT OUTER JOIN Experience ON Experience.MemberID = Member.ID
LEFT OUTER JOIN Qualification ON Qualification.MemberID = Member.ID
LEFT OUTER JOIN Language On Language.MemberID = Member.ID
LEFT OUTER JOIN Member_Interests ON Member_Interests.MemberID = Member.ID
LEFT OUTER JOIN Group_Members ON Group_Members.MemberID = Member.ID
WHERE 1=1 AND Language.Name IN ( 'Swedish' ) AND Group_Members.GroupID = 4 
```

上面的查询返回组 4 中的所有成员。瑞典语部分被简单地忽略，只要语言表中有一个名为瑞典语的语言，则返回所有用户。如果语言不在表中，则不返回任何用户。

我希望第二个查询只返回第 4 组中讲瑞典语的所有成员。有谁知道为什么这没有发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:46:46.583

将左联接表上的过滤器移至联接。

例如：

```
LEFT OUTER JOIN Language On Language.MemberID = Member.ID 
     and LanguageID in ('Swedish')
LEFT OUTER JOIN Group_Members ON Group_Members.MemberID = Member.ID 
     AND Group_Members.GroupID = 4 
...
WHERE 1=1 AND Gender = 'male' 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:58:43.693

您是否尝试过内部连接？

要不就

```
SELECT DISTINCT Member.ID 
FROM Member, Language
LEFT OUTER JOIN Experience ON Experience.MemberID = Member.ID
LEFT OUTER JOIN Qualification ON Qualification.MemberID = Member.ID
LEFT OUTER JOIN Member_Interests ON Member_Interests.MemberID = Member.ID
LEFT OUTER JOIN Group_Members ON Group_Members.MemberID = Member.ID
WHERE 1=1 AND Gender = 'male' AND Language.MemberID = Member.ID AND Language.Name IN ( 'Swedish' ) AND Group_Members.GroupID = 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:31:00.003

澄清：您最终想要什么，因为 LEFT JOIN 意味着无论左侧表和 WHERE 条件如何，但即使右侧表没有任何内容，也要抓取。将右侧表添加到 where 时，它​​实际上是作为内部连接创建的。您是否只想要明确的男性、瑞典语和第 4 组？如果是这样，我会使用普通连接

```
SELECT DISTINCT 
      M.ID 
   FROM Member M
      LEFT OUTER JOIN Experience E
         ON M.ID = E.MemberID 
      LEFT OUTER JOIN Qualification Q
         ON M.ID = Q.MemberID 
      LEFT OUTER JOIN Language L 
         ON M.ID = L.MemberID 
      LEFT OUTER JOIN Member_Interests MI
         ON M.ID = MI.MemberID 
      LEFT OUTER JOIN Group_Members GM
         ON M.ID = GM.MemberID 
   WHERE 
          1=1 
      AND M.Gender = 'male' 
      AND L.Name IN ( 'Swedish' ) 
      AND GM.GroupID = 4 
```

实际上从 LEFT JOIN 变为 INNER JOIN 只获取性别为男性、语言为瑞典语且组为 4 的记录。为了帮助更好地理解和交换查询，我展示了以下内容：

```
SELECT DISTINCT 
      M.ID 
   FROM Member M
      JOIN Language L 
         ON M.ID = L.MemberID 
         AND L.Name IN ('Swedish')
      JOIN Group_Members GM
         ON M.ID = GM.MemberID 
        AND GM.GroupID = 4
   WHERE 
          1=1 
      AND M.Gender = 'male' 
```

我删除了其他 LEFT JOIN 条目，因为它们与返回的不同成员“​​ID”值的最终请求无关。如果不使用为什么要加入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T15:53:29.283

如果您之前的查询给出了正确的结果。那么这个必须为你工作，你需要

```
SELECT DISTINCT Member.ID 
FROM Member
LEFT OUTER JOIN Experience ON Experience.MemberID = Member.ID
LEFT OUTER JOIN Qualification ON Qualification.MemberID = Member.ID
LEFT OUTER JOIN Language On Language.MemberID = Member.ID
LEFT OUTER JOIN Member_Interests ON Member_Interests.MemberID = Member.ID
LEFT OUTER JOIN Group_Members ON Group_Members.MemberID = Member.ID
WHERE 1=1 AND Gender IN ('male','female') AND Language.Name IN ( 'Swedish' ) 
AND Group_Members.GroupID = 4; 
```

试试看，有什么问题。请发表评论，否则请享受它:)

# qt - 创建具有固定高度的 Qt 布局

> ID：12007807
> 
> 赞同：19
> 
> 时间：2012-08-17T14:35:29.150
> 
> 标签：qt, layout

我想创建一个包含两种布局的 Qt 窗口，一种是固定高度，其中包含顶部的按钮列表，另一种是填充剩余空间的布局，该布局使小部件垂直和水平居中，如下图所示。

![示例 Qt 布局](../Images/a95b78669966a8e5d30d6c92a66e29cb.png)

我应该如何布置我的布局/小部件。我尝试了一些嵌套水平和垂直布局的选项，但无济于事

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-17T16:27:41.927

尝试使用 QHBoxLayout 使粉红色框成为 QWidget（而不仅仅是使其成为布局）。原因是 QLayouts 不提供固定大小的功能，但 QWidgets 提供。

```
// first create the four widgets at the top left,
// and use QWidget::setFixedWidth() on each of them.

// then set up the top widget (composed of the four smaller widgets):
QWidget *topWidget = new QWidget;
QHBoxLayout *topWidgetLayout = new QHBoxLayout(topWidget);
topWidgetLayout->addWidget(widget1);
topWidgetLayout->addWidget(widget2);
topWidgetLayout->addWidget(widget3);
topWidgetLayout->addWidget(widget4);
topWidgetLayout->addStretch(1); // add the stretch
topWidget->setFixedHeight(50);

// now put the bottom (centered) widget into its own QHBoxLayout
QHBoxLayout *hLayout = new QHBoxLayout;
hLayout->addStretch(1);
hLayout->addWidget(bottomWidget);
hLayout->addStretch(1);
bottomWidget->setFixedSize(QSize(50, 50));

// now use a QVBoxLayout to lay everything out
QVBoxLayout *mainLayout = new QVBoxLayout;
mainLayout->addWidget(topWidget);
mainLayout->addStretch(1);
mainLayout->addLayout(hLayout);
mainLayout->addStretch(1); 
```

如果你真的想要两个独立的布局——一个用于粉红色框，一个用于蓝色框——这个想法基本上是相同的，除了你将蓝色框变成它自己的 QVBoxLayout，然后使用：

```
mainLayout->addWidget(topWidget);
mainLayout->addLayout(bottomLayout); 
```

# python - 我应该如何命名我的类和函数，甚至是字符串？

> ID：12007811
> 
> 赞同：17
> 
> 时间：2012-08-17T14:35:46.233
> 
> 标签：python

正如您所说，我是 Python 新手。我已经阅读了各种文档，但我仍然无法弄清楚是否有`"naming best practices"`for **strings 函数，当然还有 classes**。

如果我想将一个类或函数命名为 SiteMap，使用 SiteMap 可以吗？例如，它应该是 Site_map 还是其他任何东西？

谢谢！

PS。非常感谢任何进一步的阅读资源！PS。我正在做网络应用程序开发（学习，最好说！）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-17T14:44:58.090

**命名约定：**

我使用了各种 Python 命名约定。这里的一致性当然很好，因为它有助于识别对象名称指向的类型。我认为我使用的约定基本上遵循[PEP8](http://www.python.org/dev/peps/pep-0008/)。

**1)**模块名称应该是小写的，带有下划线而不是空格。（并且应该是用于导入的有效模块名称。）

**2)**变量名和函数/方法名也应该是小写的，用下划线分隔单词。

**3）**类名应该是CamelCase（以大写字母开头，单词连在一起，每个都以大写字母开头）。

**4)**模块常量应该全部大写。

例如，您通常会拥有`module.ClassName.method_name`.

**5)** CamelCase 中主类名与模块名相同的模块名很烦人。（例如 ConfigParser.ConfigParser，应始终拼写为`configobj.ConfigObj`。）

**6)**此外，不属于公共 API 的变量、函数、方法和类应以单个下划线开头。（使用双下划线将属性设为私有几乎总是错误的——尤其是在可测试性方面。）

**空白**

最后，您应该始终在运算符周围和标点符号之后使用空格。方法和函数的默认参数除外。

例如 def function(default=argument): 和`x = a * b + c`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-17T14:37:05.607

[PEP8](http://www.python.org/dev/peps/pep-0008/)为 Python 指定了推荐的命名约定。在那里讨论的规则中，它提到`underscore_names`了函数和变量（无论它们的类型）以及`CamelCase`类。

# python - 如何为linux中的软件制作源代码包？

> ID：12007812
> 
> 赞同：2
> 
> 时间：2012-08-17T14:35:48.103
> 
> 标签：python, linux

我已经用 Python 编程语言制作了一个简单的软件。它有一些我编写的库和一些与程序一起使用的可执行文件。我想知道如何制作一个标准源包，包括该软件的文档和安装方法。

我知道一点，`MakeFiles`但我不知道我必须使用哪些标准来处理文件结构和其他事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:43:25.640

这是规范文档：

[http://packages.python.org/distribute/setuptools.html](http://packages.python.org/distribute/setuptools.html)

用于使用可以上传到 PyPI 或其他 Python 索引服务器的 setuptools 构建适当的包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T16:04:58.263

这是一个例子：

[http://packages.python.org/an_example_pypi_project/setuptools.html](http://packages.python.org/an_example_pypi_project/setuptools.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T21:45:59.697

我认为目录结构没有真正的标准。

我通常做的事情如下*：*

```
MyProject/
   |
   |
   |\ src/
   |   |
   |   |\ mypackage_1/
   |   |\ mypackage_2/
   |   |\ mymodule_1.py
   |    \ mymodule_2.py
   |
   |\ bin/
   |   |
   |   |\ my_script_1.py
   |    \ my_script_2.py
   |
   |\ doc/
   |   |
   |   |\ documentation_for_package_1/
   |   |\ documentation_for_package_2/
   |   |\ documentation_for_modules/
   |    \ documentation_for_scripts
   |
   |
    \ tests/
        |
        |\ tests_for_mypackage_1/
        |\ tests_for_mypackage_2/
        |\ tests_for_mymodule_1
        |\ tests_for_mymodule_2
         \ tests_for_scripts/ 
```

使用此目录树，使用 setuptools 或分发安装所有模块、包等应该不难。如果您只想使用 distutils，那么我认为这可能很重要。

# python - 从不可下标的可迭代对象中获取第 n 个元素的更好方法

> ID：12007820
> 
> 赞同：20
> 
> 时间：2012-08-17T14:36:32.890
> 
> 标签：python, iterator

有时一个可迭代对象可能是不可下标的。说返回`itertools.permutations`：

```
ps = permutations(range(10), 10)
print ps[1000] 
```

Python会抱怨`'itertools.permutations' object is not subscriptable`

当然，可以按次执行`next()`以`n`获得第 n 个元素。只是想知道有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-17T14:38:48.120

只需使用`nth`配方[`itertools`](http://docs.python.org/library/itertools.html#recipes)

```
>>> from itertools import permutations, islice
>>> def nth(iterable, n, default=None):
        "Returns the nth item or a default value"
        return next(islice(iterable, n, None), default)

>>> print nth(permutations(range(10), 10), 1000)
(0, 1, 2, 4, 6, 5, 8, 9, 3, 7) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-01-23T18:21:38.427

一个更具可读性的解决方案是：

```
next(x for i,x in enumerate(ps) if i==1000) 
```

# ios - 以编程方式将 Sqlite 表数据导出到 csv 文件

> ID：12007825
> 
> 赞同：2
> 
> 时间：2012-08-17T14:36:43.033
> 
> 标签：ios, sqlite, csv

> **可能重复：**
> [以编程方式将 Sqlite 表数据导出到 csv 文件 - xcode iOS 5（用于 ipad 应用程序）](https://stackoverflow.com/questions/11991857/exporting-sqlite-table-data-to-csv-file-programatically-xcode-ios-5-for-an-ip)

我正在开发一个简单的应用程序。我正在使用 sqlite 将数据保存到表中（本地，在应用程序文档文件夹中）。我想有问题地将此表数据导出为 csv 文件并将其通过电子邮件发送给某人。我的意思是我想在 iPad 中转换后物理访问 csv 文件....任何人都可以提供一个示例应用程序来下载吗？还是代码？请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T21:56:10.783

这应该给你一个好主意。假设一个有 2 行的表，此代码读取表中的所有值并将它们写入 and `NSString`，然后将其写入文档目录中的 CSV 文件。如果您需要说明如何使此代码适用于您的特定项目，请告诉我。

```
 NSString *csv = [[NSString alloc] init];

    sqlite3 *database;

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *sqLiteDb
    = [documentsDirectory stringByAppendingPathComponent:@"INSERT_DATABASE_NAME.sqlite3"];

    if(sqlite3_open([sqLiteDb UTF8String], &database) == SQLITE_OK) {
        const char *sqlStatement = [[NSString stringWithFormat:@"SELECT * FROM myTable"] UTF8String];
        sqlite3_stmt *compiledStatement;
        if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {

           while(sqlite3_step(compiledStatement) == SQLITE_ROW) { 
             //this assumes that there are two rows in your database you want to get data from   
             [csv stringByAppendingFormat:@"%@,%@\n", [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 0)], [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)]];
           }

          sqlite3_finalize(compiledStatement);
          sqlite3_close(database);
        }else{
            NSLog(@"database error");
        }
    }

NSError *error = nil;
[csv writeToFile:[documentsDirectory stringByAppendingPathComponent:@"myFile.csv"]
      atomically:YES encoding:NSUTF8StringEncoding error:&error];

[csv release]; 
```

# spring - 一个可以适应数据变化的 Spring DAO

> ID：12007828
> 
> 赞同：1
> 
> 时间：2012-08-17T14:36:46.683
> 
> 标签：spring, mongodb, architecture, dao

对于应用程序开发人员，我认为使用可以持久保存到底层数据存储（为了参数的 SQL 数据库）的域对象编写应用程序的传统范例是编写域对象，然后编写（或生成）表结构。域对象的外观与底层数据存储结构的外观之间存在紧密耦合。因此，如果您想向域对象添加一条信息，请将该字段添加到您的代码中，然后将一列添加到相应的数据库表中。都熟悉吗？

这对于具有良好定义结构的数据存储（我主要谈论 SQL 数据库，其中表和列是预定义和固定的）来说非常好，但是现在存在许多替代无处不在的 SQL 数据库并且这些通常不会以这种方式限制数据。例如，MongoDB 是一个*NoSQL*数据库，您可以将数据划分为*集合*，但除此之外没有数据结构。当您要添加新字段时，您无需定义新列。

现在问题来了：考虑到像 MongoDB 这样的数据存储的灵活性，如何在表示这些数据的域对象中实现类似的灵活性？因此，例如，如果我使用 Spring 并创建自己的域对象，当我向我的数据添加“middleName”字段时，如何避免必须向我的域对象添加“middleName”字段？我正在寻找某种机制/方法/框架来动态检查数据并在我的域对象中访问它，而不必每次都更改代码。欢迎所有想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:59:16.687

我认为你有几个选择：

1.  您可以使用动态编程语言并且没有域对象（例如 clojure）

2.  如果你固定使用 java，mongo java 驱动程序会返回 DBObject 中的数据，它本质上是一个 Map。所以默认行为已经提供了你想要的。只有当您使用 morphia（或 spring-data）之类的库将 DBObject 映射到域对象时，您才需要完全担心域对象。

但是，如果我使用 java，我会坚持通过 morphia 映射的域对象的标准约定，因为与好处相比，我认为添加字段是一个非常小的不便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T03:02:33.060

我认为这个问题本质上是自相矛盾的——
一方面，你想要拥有域对象，即代表你的问题域的数据（和行为）的对象。
另一方面，您说您不希望您的域对象受到数据更改的显式影响。
但是当你有代表你的问题域的对象时，你只想这样做——代表你的问题域。
因此，例如，如果添加了中间名，那么您对现实生活中的“用户”实体的表示*应该*改变以适应现实生活中的用户的这种变化；也许不仅通过将这条数据添加到您的对象，还添加一些相关的行为（中间名的验证，或与之相关的一些功能）。

本质上，我在这里想说的是，当您拥有（经典 OO）域对象时，您可能需要更改您的行为/功能以及您的数据，因为您没有任何自动方式来更改您的行为，自动更改数据的问题变得无关紧要。

如果您不希望与您的数据相关联的行为，那么您基本上拥有 DTO，@Kevin 的答案就是您要寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T03:08:19.150

老实说，这听起来更像是您正在寻找某种黑盒 DTO，就像您所描述的那样，根据数据“任意”添加或删除字段。这使我倾向于建议一个简单`Map`的工作。如果您的领域模型不断变化，那么您就不可能真正拥有领域驱动的设计。

# javascript - 为什么输出如下？

> ID：12007831
> 
> 赞同：2
> 
> 时间：2012-08-17T14:37:12.920
> 
> 标签：javascript, jquery

```
var obj = [ "one", "two", "three"];

$.each(obj, function() {
   console.log(this);
}); 
```

我得到的输出是

```
{ '0': 'o', '1': 'n', '2': 'e' }
{ '0': 't', '1': 'w', '2': 'o' }
{ '0': 't', '1': 'h', '2': 'r', '3': 'e', '4': 'e' } 
```

我想得到“一”“二”“三”，但我得到以下奇怪的结果，谁能解释一下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T14:39:43.467

`this`始终是一个对象。字符串对象由键/值对组成，其中键是索引，值是字符串中该索引处的字符。尝试`Object("foo")`自己创建这样的对象。

通过使用严格模式，您可以抑制：

```
$.each(obj, function() {
  "use strict";
  console.log(this);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T14:51:11.097

在 javascript（不仅仅是 jQuery）中，`this`是一个特殊关键字，指的是绑定到当前范围的对象（除非它已被更改）。在`$.each`函数内，循环函数（您传递的函数）的范围上下文绑定到您正在循环的项目。可能是这样，但它不可靠，也不是很有用或有趣。

观察：

```
var clams = { 'tomato!':'gross' };
var items = ["one", "two", "three"];

$.each(items, function (index, item) {
    console.log('this',this);
    console.log('item', item);    
}.bind(clams)); 
```

试试看：http: [//jsfiddle.net/LBfet/](http://jsfiddle.net/LBfet/)

虽然可以`this`在`$.each`循环中使用，但我建议按照文档提供的方式使用它，即您的循环函数支持签名`callback(indexInArray, valueOfElement)`。

文档：[http ://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

认为这是一个怪癖。

**更多阅读**

*   quirksmode 上的 this 关键字* - [http://www.quirksmode.org/js/this.html](http://www.quirksmode.org/js/this.html)
*   `jQuery.each`- [http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T15:00:34.483

这里发生的是 jQuery用于将回调内部的`.call`值设置为.`this``$.each`

调用时`.call`， 的值将`this`转换为对象（根据 JavaScript 规范：[http](http://es5.github.com/#x10.4.3) ://es5.github.com/#x10.4.3 ）。

jQuery 文档中也提到了这一点：http: [//api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

> 该值也可以通过`this`关键字访问，但 Javascript 将始终将`this`值包装为 Object，即使它是简单的字符串或数字值。

“严格模式”（仅适用于现代网络浏览器，因此不适用于 IE：[http](http://caniuse.com/#feat=use-strict) ://caniuse.com/#feat=use-strict ）实际上改变了这种行为并允许`this`成为原始模式（这在规范中有记录：[http://es5.github.com/#x15.3.4.4](http://es5.github.com/#x15.3.4.4)）：

```
$.each(obj, function() {
  "use strict";
  console.log(this);
}); 
```

您还可以使用`.valueOf()`将对象转换回其各自的原语：

```
$.each(obj, function() {
  console.log(this.valueOf());
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T14:50:30.243

一个 javascript 字符串，归根结底，是一个对象。这个对象被分解成一个字符数组。这就是为什么您可以在字符串对象（如数组）上调用一些相同的函数的原因。

任何时候你操作一个字符串字面量，在这种情况下，它都会变成一个字符串对象。字符串对象是一个字符数组。这将允许在使用以下函数时轻松大写：toUpperCase() & toLowerCase() - *（以及其他）*

`this`正如其他人所说，使用被引用为对象。这里有一个小测试代码来展示一个字符串如何像一个数组：

```
var testStr = "test";
var obj = [ "one", "two", "three"];
console.log(testStr.charAt[1]); // Will return 'e'
console.log(testStr[1]); // Will return 'e'
console.log(obj[1]); // Will return 'two'
console.log(testStr.length) // Will return 4
console.log(obj.length) // Will return 3 
```

在这种情况下，字符串文字`var testStr = "string"`是没有函数的原始数据类型。但是字符串对象用于使用函数和非原始数据类型来操作数据。

现在我将创建一个字符串对象并将其输出到控制台：（ *当您操作字符串文字时会发生这种情况，它会被转换为字符串对象）*

```
strTest = new String("TEST String");
console.log(strTest); 
```

你会得到：

```
String
0: "T"
1: "E"
2: "S"
3: "T"
4: " "
5: "S"
6: "t"
7: "r"
8: "i"
9: "n"
10: "g"
length: 11
__proto__: String
    anchor: function anchor() { [native code] }
    big: function big() { [native code] }
    blink: function blink() { [native code] }
    bold: function bold() { [native code] }
    camelCase: function (){return this.replace(/-\D/g,function(match){return match.charAt(1).toUpperCase();});}
    capitalize: function (){return this.replace(/\b[a-z]/g,function(match){return match.toUpperCase();});}
    charAt: function charAt() { [native code] }
    charCodeAt: function charCodeAt() { [native code] }
    checkAllAvailableTags: function (){var b=this,d;for(d in c)c.hasOwnProperty(d)&&(b=b.replace(d,c[d]));return b}
    clean: function (){return this.replace(/\s{2,}/g,' ').trim();}
    concat: function concat() { [native code] }
    constructor: function String() { [native code] }
    contains: function (string,s){return(s)?(s+this+s).indexOf(s+string+s)>-1:this.indexOf(string)>-1;}
    escapeRegExp: function (){return this.replace(/([.*+?^${}()|[\]\/\\])/g,'\\$1');}
    fixed: function fixed() { [native code] }
    fontcolor: function fontcolor() { [native code] }
    fontsize: function fontsize() { [native code] }
    hexToRgb: function (array){var hex=this.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return(hex)?hex.slice(1).hexToRgb(array):false;}
    hyphenate: function (){return this.replace(/\w[A-Z]/g,function(match){return(match.charAt(0)+'-'+match.charAt(1).toLowerCase());});}
    indexOf: function indexOf() { [native code] }
    italics: function italics() { [native code] }
    lastIndexOf: function lastIndexOf() { [native code] }
    length: 0
    link: function link() { [native code] }
    localeCompare: function localeCompare() { [native code] }
    match: function match() { [native code] }
    replace: function replace() { [native code] }
    rgbToHex: function (array){var rgb=this.match(/\d{1,3}/g);return(rgb)?rgb.rgbToHex(array):false;}
    search: function search() { [native code] }
    slice: function slice() { [native code] }
    small: function small() { [native code] }
    split: function split() { [native code] }
    strike: function strike() { [native code] }
    sub: function sub() { [native code] }
    substr: function substr() { [native code] }
    substring: function substring() { [native code] }
    sup: function sup() { [native code] }
    test: function (regex,params){return(($type(regex)=='string')?new RegExp(regex,params):regex).test(this);}
    toFloat: function (){return parseFloat(this);}
    toInt: function (){return parseInt(this,10);}
    toLocaleLowerCase: function toLocaleLowerCase() { [native code] }
    toLocaleUpperCase: function toLocaleUpperCase() { [native code] }
    toLowerCase: function toLowerCase() { [native code] }
    toString: function toString() { [native code] }
    toUpperCase: function toUpperCase() { [native code] }
    trim: function trim() { [native code] }
    trimLeft: function trimLeft() { [native code] }
    trimRight: function trimRight() { [native code] }
    valueOf: function valueOf() { [native code] }
    __proto__: Object 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T14:52:36.910

由于**这**是一个对象，您可以简单地使用 toString 方法来输出其内容。

```
$.each( obj, function() {
    console.log( this.toString() );
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T14:52:41.107

为什么输出是这样的：正如 pimvdb 所说：这是一个指向对象的指针。jQuery*将*匿名函数作为回调应用到每个值。如果那个值不是一个对象，jQ 会将它变成一个对象。因此，记录了三个对象。

再加上字符串对于计算机来说是*最难处理的事情*之一！它只是一系列（数组）字符。这就是为什么在 C 和许多其他语言中字符串类型不（不）存在的原因。字符串是一个数组，因为数组是 JavaScript 中的扩充对象（第一个版本甚至没有），所以你会得到你得到的输出。
不过，这并不是什么大问题：

```
obj = [ "one", "two", "three"];

$.each(obj, function()
{
   console.log(this+'');
}); 
```

解决了这个问题（有点）。但是 add `typeof this`，你会看到它仍然是一个对象， add `this instanceof String`，你会得到真实的。要摆脱那些讨厌的字符串对象（它们很讨厌），并获得干净的字符串常量：

```
obj = [ "one", "two", "three"];

$.each(obj, function(i,el) {
   console.log(el);
}); 
```

就是这样：jQ 不再将函数作为方法应用，而是将键和值对作为参数传递，其中 i 是键，v 是值。

# php - 从 PHP 扩展中获取运行脚本的名称

> ID：12007841
> 
> 赞同：1
> 
> 时间：2012-08-17T14:38:07.220
> 
> 标签：php, c, php-extension, php-internals

我正在为 PHP 编写一个小扩展。有没有办法在运行时知道正在运行的脚本文件的名称（例如`test.php`：）？也许一些全局或环境变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T16:42:01.740

您可以获取`$_SERVER['PHP_SELF']`（或任何其他 $_SERVER 变量，如果需要），如下所示：

```
// This code makes sure $_SERVER has been initialized
if (!zend_hash_exists(&EG(symbol_table), "_SERVER", 8)) {
    zend_auto_global* auto_global;
    if (zend_hash_find(CG(auto_globals), "_SERVER", 8, (void **)&auto_global) != FAILURE) {
        auto_global->armed = auto_global->auto_global_callback(auto_global->name, auto_global->name_len TSRMLS_CC);
    }
}

// This fetches $_SERVER['PHP_SELF']
zval** arr;
char* script_name;
if (zend_hash_find(&EG(symbol_table), "_SERVER", 8, (void**)&arr) != FAILURE) {
    HashTable* ht = Z_ARRVAL_P(*arr);
    zval** val;
    if (zend_hash_find(ht, "PHP_SELF", 9, (void**)&val) != FAILURE) {
        script_name = Z_STRVAL_PP(val);
    }
} 
```

该`script_name`变量将包含脚本的名称。

如果您想知道，初始化的第一个块`$_SERVER`是必要的，因为某些 SAPI（例如：Apache 处理程序）`$_SERVER`只会在用户脚本访问它时（即时）才初始化。如果没有该代码块，如果您`$_SERVER['PHP_SELF']`在脚本尝试访问之前尝试读取`$_SERVER`，您最终会得到一个空值。

显然，您应该在上面的代码中添加错误处理以防万一失败，这样您就不会在尝试访问时调用未定义的行为`script_name`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:43:09.553

尝试变量[$argv](http://php.net/manual/en/reserved.variables.argv.php)。该数组中的第一项包含脚本的名称。

**编辑**

对于 C 函数

`int main`需要两个参数`argc`和`argv`（见[这里](http://en.wikipedia.org/wiki/Main_function#C_and_C.2B.2B)）。与上述情况相同。ie`argv[0]`是命令名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-04T02:11:13.570

我试过这个脚本，但它对我不起作用。第一个声明：

`if (!zend_hash_exists(&EG(symbol_table), "_SERVER", 8)`

失败。我正在从 CLI 运行 PHP。但是，我确实通过我的 PHP 脚本设置了变量，当我通过同一个脚本使用 print_r($_SERVER) 时，我得到了一个完整的值数组。

我认为`zend_hash_exists()`在这种情况下，之前的否定是不必要的。

# php - php mysql搜索两个日期之间的生日

> ID：12007842
> 
> 赞同：2
> 
> 时间：2012-08-17T14:38:08.530
> 
> 标签：php, mysql, between

我需要从表中找出人们的生日......从今天起接下来的 7 天。我有一个查询..`SELECT * FROM`表`WHERE`dob`LIKE BETWEEN %-08-17 AND %-08-24`但它返回日期未在数据库中提交的记录.. 我的意思是条目是 0000-00-00 我已将生日以日期格式存储在表中。请帮助我找到错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T14:47:09.037

由于这是 mysql，我不知道**[DATE_FORMAT()](http://davidwalsh.name/format-date-mysql-date_format)**是否可以处理这个问题。但是试试这个。

```
SELECT * FROM users WHERE DATE_FORMAT(dob, '%c-%d') 
BETWEEN DATE_FORMAT('1983-08-17', '%c-%d') 
AND DATE_FORMAT('1983-08-24', '%c-%d') OR (MONTH('1983-08-17') > MONTH('1983-08-24')
AND (MONTH(dob) >= MONTH('1983-08-17') 
OR MONTH(dob) <= MONTH('1983-08-24'))) 
```

*任何年份都可以使用（只是为了完成日期格式），因为年份无关紧要*

**更新 1**

在 SQLFiddle.com 上对其进行了测试

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/c69d8/4 "点击重定向")

**更新 2**

我很抱歉我的第一个答案。老实说，我错过了阅读这一行`coming in next 7 days from today`。我认为这就是我被`Imre L`. 他有他的观点。我发布这样的答案的原因是因为我认为无论`year`. 所以这里是更新。

```
SELECT ....
FROM   ....
WHERE  DATE(dob) BETWEEN NOW() AND NOW() + INTERVAL 7 DAY 
```

希望现在很清楚。:D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:52:27.163

这将正确处理日期范围之间有一个月或一年变化的情况：

```
select *
  from people
 where (DAYOFYEAR(dob)+IF(DAYOFYEAR(CURDATE())>DAYOFYEAR(dob),1000,0)) 
       between DAYOFYEAR(CURDATE()) 
           and (DAYOFYEAR(CURDATE() + INTERVAL 7 DAY)+IF(DAYOFYEAR(CURDATE())>DAYOFYEAR(CURDATE() + INTERVAL 7 DAY),1000,0)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-25T07:11:23.090

通过将出生日期转换为今年的日期，您可以避免期间跨越月或年边界的问题。这将选择出生日期在下一周出现的所有行：

```
SELECT * FROM users
WHERE concat( year(now()), mid(dob,5,6) ) 
BETWEEN now() AND date_add(now(), interval 7 day) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-20T15:22:56.603

```
SELECT
str_to_date(DATE_ADD(dob, INTERVAL (YEAR(CURRENT_DATE()) - YEAR(dob)) YEAR), '%Y-%m-%d') BIRTHDAY,A.*
FROM app_membership A
WHERE str_to_date(DATE_ADD(dob, INTERVAL (YEAR(CURRENT_DATE()) - YEAR(dob)) YEAR), '%Y-%m-%d') 
      BETWEEN str_to_date('15-10-2017','%d-%m-%Y') and str_to_date('10-11-2017','%d-%m-%Y')
ORDER BY BIRTHDAY ASC; 
```

尝试这个。为我工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-18T04:08:37.667

让我们列出在 12 月 14 日至 8 月 24 日之间的任何月份/年份出生的人。我们知道它比另一个早一年。我们必须用前一年的月份数来计算。这很复杂，因为您在比较开始日期的月份和结束日期的月份时可能会遇到问题。但是，可以通过以下查询解决：

```
SELECT * FROM t_users WHERE (DATE_FORMAT(d_birth, '%m-%d') 
BETWEEN DATE_FORMAT('2017-12-14', '%m-%d') AND 
DATE_FORMAT('2018-08-24', '%m-%d'))

OR(MONTH('2017-12-31') >= MONTH('2018-08-24')
AND (MONTH(d_birth) >= MONTH('2017-12-31') 
OR MONTH(d_birth) <= MONTH('2018-08-24'))) 
```

# gwt - connection.getType() 在 ios 中返回 null

> ID：12007852
> 
> 赞同：0
> 
> 时间：2012-08-17T14:38:29.417
> 
> 标签：gwt, cordova, mgwt

我正在使用 gwt-Phonegap 版本 1.7.0。我已经构建了应用程序，它在 android 设备上运行良好。但是当我使用 Xcode 在 ios 中部署相同的应用程序时，phonegap.getconnection() 方法返回空值。

我需要在 xcode 中设置什么设置来获取连接信息吗？

请在这方面帮助我。谢谢和问候， Ganesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:35:26.647

要使 gwt phonegap 正常工作，您需要像这样初始化它：

```
final PhoneGap phoneGap = GWT.create(PhoneGap.class);

phoneGap.addHandler(new PhoneGapAvailableHandler() {

        @Override
        public void onPhoneGapAvailable(PhoneGapAvailableEvent event) {
                //start your app - phonegap is ready

        }
});

phoneGap.addHandler(new PhoneGapTimeoutHandler() {

        @Override
        public void onPhoneGapTimeout(PhoneGapTimeoutEvent event) {
                //can not start phonegap - something is for with your setup

        }
}); 
```

否则您将无法使用phonegap。（如果您直接使用phonegap，这基本上与在本机javascript中运行的启动机制相同）

# sql - 最终用户友好的 sql 查询在 excel 中运行

> ID：12007853
> 
> 赞同：1
> 
> 时间：2012-08-17T14:38:36.233
> 
> 标签：sql, oracle11g, odbc, excel-2003

我有一个 Oracle 11G 数据库和 sql developer 3.0.04。我有一个 SQL 查询，它为整个系统的用户收集有用的数据。查询提示输入两个值（使用“&”技巧），然后返回反映其选择的列数和行数。例如，在位置提示输入“2”，将使用 sql 查询仅提取该特定位置的相关数据。

我可以使用 Excel 2003 连接到数据库。（ODBC 连接）我想在服务器上存储一个 excel 文件，我的用户可以访问该文件以运行此查询 - （因为 sql developer 不适合这些用户，太复杂了)

我们安装了 Excel 2003。我需要做什么才能让用户从 excel 运行 sql 查询，这也会在 excel 中向他们显示结果？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:20:27.977

物有所值...

我建议只将此查询转换为 SQL Developer 中的*报告*。对于您的最终用户来说，这并不复杂——他们只需单击他们想要运行的报告，它就会运行（输出看起来像一个表格，如果/他们可以从那里选择，他们可以将其导出）。分发报告只需要您将其存储在共享驱动器上或通过电子邮件将其发送给他们（然后他们将其导入）——这比听起来容易得多，而且分发更新/附加报告也非常方便。例如，使用报告，您的用户将不必查看 SQL（除非他们真的想），并且提示将显示为带有简单英语消息的小对话框（无论您想让他们说什么）。

无论如何，您可能会发现这更容易支持/修改/维护，我认为您的用户应该对此感到满意（除非他们真的是脾气暴躁的类型...... :-)

# php - PHP 如果多个条件失败

> ID：12007854
> 
> 赞同：-5
> 
> 时间：2012-08-17T14:38:37.663
> 
> 标签：php, if-statement

我的代码的哪一部分不正确。它不断拒绝声明并且不会运行代码

```
if(!is_numeric($InvAMT) OR $ItemNM='0' OR $InvAMT='A0' OR $SuppUN=='')
   {
     // Run the Code
   }
 else
    {
     exit;
    } 
```

PS：我尝试用 || 替换 OR 还将每个条件放入单独的括号中，但都不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T14:39:36.140

在比较中你需要两个等号，否则你正在做一个作业：

```
$ItemNM == '0' 
```

所以完整的表达式是：

```
if( !is_numeric($InvAMT) OR $ItemNM == '0' OR $InvAMT == 'A0' OR $SuppUN == '') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T14:39:31.220

尝试：

```
if(!is_numeric($InvAMT) OR $ItemNM=='0' OR $InvAMT=='A0' OR $SuppUN=='') 
```

你在最后的检查中得到了正确的比较，但是前两个使用了赋值运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:41:23.123

没关系，我忘了在我的声明中添加第二个“=”

```
if(!is_numeric($InvAMT) or $ItemNM=='' or $InvAMT=='A0' or $SuppUN=='') 
```

# sql - SQL计算一张表中两个日期之间的天数

> ID：12007857
> 
> 赞同：4
> 
> 时间：2012-08-17T14:38:41.613
> 
> 标签：sql, tsql

我有一个表`dbo.Trans`，其中包含一个名为`bd_id`(varchar) 和`transfer_date`(Datetime) 的 id，还有一个标识符`member_id`pk 是`trns_id`并且是顺序的

重复`bd_id`并存`member_id`在于表中。

```
transfer_date       |bd_id| member_id | trns_id
2008-01-01 00:00:00 | 432 | 111       | 1  
2008-01-03 00:00:00 | 123 | 111       | 2  
2008-01-08 00:00:00 | 128 | 111       | 3  
2008-02-04 00:00:00 | 123 | 432       | 4
....... 
```

对于每个 member_id，我想获取日期之间的天数以及每个`bd_id`

EG，成员从直到`111`使用，所以返回应该是 然后下一个将是`432``2008-01-01``2008-02-01``2`
`5`

我知道该`DATEDIFF()`函数存在，但我不确定当日期在同一个表中时如何获得差异。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T14:45:32.003

你可以试试这样的。

```
select T1.member_id,
       datediff(day, T1.transfer_date, T3.transfer_date) as DD
from YourTable as T1
  cross apply (select top 1 T2.transfer_date
               from YourTable as T2
               where T2.transfer_date > T1.transfer_date and
                     T2.member_id = T1.member_id
               order by T2.transfer_date) as T3 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/77470)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:47:47.903

您必须选择所需的第一条和第二条记录，然后获取它们的日期并获取这两个日期的 DATEDIFF。

`DATEDIFF(date1, date2);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:47:08.717

您的问题是获得下一个会员日期。

这是一个使用相关子查询获取下一个日期的示例：

```
select t.*, datediff(day, t.transfer_date, nextdate) as Days_Between
from (select t.*,
             (select min(transfer_date)
              from trans t2
              where t.bd_id = t2.bd_id and
                    t.member_id = t2.member_id and
                    t.transfer_date < t2.transfer_date
             ) as NextDate
      from trans t
     ) t 
```

SQL Server 2012 有一个名为 lag() 的函数，它使这更容易表达。

# java - 提高jsp中的网页美感

> ID：12007862
> 
> 赞同：0
> 
> 时间：2012-08-17T14:38:56.530
> 
> 标签：java, jsp, jakarta-ee, jsp-tags

我正在设计一个登录页面。目前我的表单中只有字段集。我想改善它的外观。我正在使用 jsp。以下是代码。

我想在框架中显示登录。

```
<s:form action = "LogInAction" method="post">
  <fieldset>
    <legend>Login</legend>
    <s:textfield name="username" key="label.username"></s:textfield>
    <s:password name="password" key="label.password"></s:password>
    <s:submit method="execute" key="label.login" align="center" />
  </fieldset>
</s:form> 
```

# iphone - 带有 didSelectRowAtIndexPath 问题的长数组

> ID：12007866
> 
> 赞同：-2
> 
> 时间：2012-08-17T14:39:06.387
> 
> 标签：iphone, xcode, uitableview, didselectrowatindexpath

我有一个包含大量数据的数组，这些数据显示在 TableView 上。我正在尝试推送选定的行名。所以每次我都要写IF方法，而每一行都有相同的方法。有没有办法只推送选定的行？

从现在开始感谢。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    SecondViewController *DetailViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

    if ([[Brands objectAtIndex:indexPath.row] isEqual:@"A"]){

}

    if ([[Brands objectAtIndex:indexPath.row] isEqual:@"B"]){

}
.
.
. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:15:27.377

经过多次尝试，我找到了答案。再次感谢您的回复。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

SecondViewController *push = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

NSString *detail=[Brands objectAtIndex:indexPath.row];

label.text = detail; 
```

}

# sql-server-2005 - 将 Talbe 加入计数 > 1 的自身

> ID：12007867
> 
> 赞同：2
> 
> 时间：2012-08-17T14:39:07.997
> 
> 标签：sql-server-2005, join, uniqueidentifier, unique-constraint

我有一个`Personal`带有一`LastName`列和一个`MaybeUniqueID`. 我想输出一个带有一`LastName`列的表，其中设置在该列上的计数器`MaybeUniqueID`提供超过 1 行。

*   我想在一次独特的运行中完成所有事情，避免中间步骤输出。
*   我更喜欢不使用临时表或表变量，否则我想最多使用一个表变量（不是临时表），但我认为这不是必需的。
*   我正在使用 Microsoft SQL Server 2005。

`HAVING`我用不同的 SQL 语句（如or ）尝试了不同的场景`GROUP BY`，但我没有得到我想要的结果。请查看以下不起作用的摘要测试：

```
SELECT LastName
FROM   Personal
       JOIN
              (SELECT  MaybeUniqueID AS ID2,
                       COUNT(*)      AS CNT
              FROM     Personal
                       --WHERE CNT > 1
              GROUP BY MaybeUniqueID
              HAVING   cnt > 1
              ) AS MultiMaybeUniqueID
       ON     Personal.MaybeUniqueID = MultiMaybeUniqueID.ID2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:49:59.203

`HAVING cnt > 1`应该是`HAVING COUNT(*) > 1`。

列别名只能在子句中引用，`ORDER BY`不能在`HAVING`子句中引用。

虽然你也可以使用

```
;WITH T AS
(
SELECT LastName,
       COUNT(*) OVER (PARTITION BY MaybeUniqueID) AS Cnt
FROM Personal
)
SELECT LastName
FROM T 
WHERE Cnt > 1 
```

# java - 如何将包含属性文件的目录添加到 Ant build.xml？

> ID：12007868
> 
> 赞同：4
> 
> 时间：2012-08-17T14:39:07.493
> 
> 标签：java, ant, build

我正在尝试用 ant 构建一个“uberjar”，并且该项目有一个包含多个属性文件的配置目录。

如何将配置目录添加到 build.xml？

这是一个如何引用它的示例：

```
static private String CONFIG_DIR = "config/";
static public String CONFIG_FILE = "proj.properties";

File configFile = new File(CONFIG_DIR, CONFIG_FILE); 
```

config 目录中有多个属性文件。通常我会把它添加到类路径中：

```
java -classpath bin:lib/*:config some.project.Example 
```

这是我的 build.xml 目标，它不太正确：

```
<target name="uberjar" depends="compile">
  <jar jarfile="${babelnet.jar}">
    <fileset dir="${bin.dir}">
      <include name="**/*.class"/>
    </fileset>
    <zipgroupfileset dir="lib" includes="*.jar"/>
  </jar>
  <copy todir="config">
    <fileset dir="config">
      <include name="**/*.properties"/>
    </fileset>
      </copy>
</target> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T16:24:41.580

要在新的 jar 文件中包含属性文件，您可以将另一个嵌套添加`<fileset>`到`<jar>`任务中。

```
<target name="uberjar" depends="compile">
  <jar jarfile="${babelnet.jar}">
    <fileset dir="${bin.dir}">
      <include name="**/*.class"/>
    </fileset>
    <zipgroupfileset dir="lib" includes="*.jar"/>
    <fileset dir="${basedir}">
      <include name="config/*.properties"/>
    </fileset>
  </jar>
</target> 
```

另外，请参阅 stackoverflow 问题：***[如何从 jar 文件中读取文件？](https://stackoverflow.com/q/2271926/1164465)***

# objective-c - PhoneGap 插件：从未调用过 AudioEncode 成功回调

> ID：12007873
> 
> 赞同：2
> 
> 时间：2012-08-17T14:39:18.070
> 
> 标签：objective-c, ios, cordova, phonegap-plugins

我在 iOS 上使用 PhoneGap (Cordova) 的 AudioEncode 插件。在为较新版本的 Cordova 更新了几行之后，它似乎将 wav 文件正确编码为 m4a。在 Xcode 控制台中，我看到：

```
AVAssetExportSessionStatusCompleted
doing success callback 
```

看手机上的文件系统，wav文件确实变成了m4a。但是，成功回调（我将文件上传到服务器的地方）永远不会运行。这是插件中的相关代码：

```
-(void) doSuccessCallback:(NSString*)path {
    NSLog(@"doing success callback");
    NSString* jsCallback = [NSString stringWithFormat:@"%@(\"%@\");", self.successCallback, path];
    [self writeJavascript: jsCallback];
    [self.successCallback release];
} 
```

我在应用程序中的代码是这样的：

```
function encodeSuccess (path) {
    console.log('Audio encoded to M4A! Preparing to upload...')
    // file transfer code...
}

console.log('Preparing to encode audio file...')
window.plugins.AudioEncode.encodeAudio(entry.fullPath, encodeSuccess, fail) 
```

我假设`doSuccessCallback`插件中的功能需要更新，但我没有使用 Objective C 或 PhoneGap 插件的经验，所以我被困在这一点上。

有任何想法吗？

**更新**

在上面发布的 Objective C 函数中，我尝试了 logging `self.successCallback`，它记录为`<null>`. 然后我走到主`encodeAudio`函数的顶部，分配给`self.successCallback`( `[arguments objectAtIndex:1]`) 的参数也记录为`<null>`. 所以，在我看来，回调没有成功地传递到主函数中。

这是 AudioEncode.h 文件，也许有人可以在这里发现问题：

```
@interface AudioEncode : CDVPlugin {
    NSString* successCallback;
    NSString* failCallback;
}

@property (nonatomic, retain) NSString* successCallback;
@property (nonatomic, retain) NSString* failCallback;

- (void)encodeAudio:(NSArray*)arguments withDict:(NSDictionary*)options; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T23:54:02.850

好的，我通过仔细阅读[Cordova 插件开发指南](http://docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html)中的基本示例来解决这个问题。问题出在 的参数顺序上`cordova.exec()`，最近肯定发生了变化。

我计划在 GitHub 上使用插件的工作版本提交拉取请求，但现在，这是基本的解决方案。

在问这个问题之前，我已将 AudioEncode.h 中的导入更新`#import <PhoneGap/PGPlugin.h>`为：

```
#import <Cordova/CDVPlugin.h>
#import <Cordova/CDVPluginResult.h> 
```

任何对 的引用`PGPlugin`也应该更新为`CDVPlugin`，并且`PhoneGap`应该成为`cordova`。

这是问题的症结所在：在 AudioEncode.js 中，`cordova.exec()`（原始插件调用的地方`PhoneGap.exec()`）需要像这样调用：

```
AudioEncode.prototype.encodeAudio = function(audioPath, successCallback, failCallback) {
    cordova.exec(successCallback, failCallback, "AudioEncode", "encodeAudio", [audioPath]);
}; 
```

如果您不订购这样的参数，则不会传入回调（尽管 audioPath 是...）。查看文档以获取更多详细信息，但参数必须首先是两个回调，模块名称，模块操作，最后是额外参数数组。

然后，您需要读取主 encodeAudio 函数中的参数，如下所示：

```
self.callback = [[arguments objectAtIndex:0] retain];
NSString* audioPath = [arguments objectAtIndex:1]; 
```

请注意，现在只有一个回调对象，其中包含对成功和失败回调的引用。这意味着每当插件为`successCallback`和设置变量时`failCallback`，您现在只需要`callback`（例如`@synthesize callback`）。这也在 AudioEncode.h 文件中用`@interface`和声明`@property`。

现在，当实际触发回调并返回数据（在`doSuccessCallback`and`doFailCallback`函数中）时，您需要使用`CDVPluginResult`，如下所示：

```
CDVPluginResult* pluginResult = nil;
NSString* javaScript = nil;

pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString:path];
javaScript = [pluginResult toSuccessCallbackString:self.callback];

[self writeJavascript: javaScript];
[self.callback release]; 
```

在我在 GitHub 上获取更新的模块之前，这应该可以帮助任何人使插件正常工作。

# ffmpeg - FFmpeg RTP 流媒体错误

> ID：12007882
> 
> 赞同：4
> 
> 时间：2012-08-17T14:39:48.320
> 
> 标签：ffmpeg, streaming, live, rtp

我想通过 FFmpeg 播放视频文件，但出现此错误：

> RTP 复用器中仅支持一个流

当我写这个时，我得到了这个错误：

```
ffmpeg.exe -i SomeVideo.mp4 -f rtp rtp://127.0.0.1:11111 
```

我不知道怎么了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-09T18:28:10.043

您的 ffmpeg 命令创建*两个*流，一个用于视频，一个用于音频。改为这样做：

`ffmpeg -re -i SomeVideo.mp4 -vcodec copy -an -f rtp rtp://127.0.0.1:11111 -vn -acodec copy -f rtp rtp://127.0.0.1:11112`

然后端口`11111`有没有音频的视频 ( `-an`)。

然后端口`11112`有没有视频的音频 ( `-vn`)。

使用例如 读取每个流`ffplay rtp://127.0.0.1:11112`。

（其中一部分来自[http://lucabe72.blogspot.com/2010/04/rtp-streaming-with-ffmpeg.html](http://lucabe72.blogspot.com/2010/04/rtp-streaming-with-ffmpeg.html)的建议。）

## 编辑 2021/08

命令应该是 `ffmpeg -re -i SomeVideo.mp4 -vcodec copy -an -f rtp rtp://127.0.0.1:11111 -vn -acodec copy -f rtp rtp://127.0.0.1:11113`

*   11111 => 视频 RTP
*   11112 => 视频 RTCP 隐式
*   11113 => 音频 RTP
*   11114 => 音频 RTCP 隐式

因为 RTCP 端口会自动设置为 RTP 端口 + 1，否则播放时会出现绑定失败错误。

[https://ffmpeg.org/ffmpeg-protocols.html#rtp](https://ffmpeg.org/ffmpeg-protocols.html#rtp)

# php - 具有上一个/下一个的 PHP 随机数组

> ID：12007900
> 
> 赞同：0
> 
> 时间：2012-08-17T14:41:14.483
> 
> 标签：php, arrays, random

希望这对某人来说非常简单，但是我的 PHP 非常有限，所以这里是：

我设置了一个随机数组以在每次刷新页面时拉入不同的视频，并且我设置了一个“下一个”链接，如果按下该链接，则会刷新数组并输出“下一个”视频。问题是，它不是数组中的“下一个”视频，因为它正在通过随机函数传递，只是输出找到的任何一个。在大多数情况下，由于数组中只有四个视频，因此它是同一个视频。

每次访问该页面时，它都需要是一个随机视频，但如果按下“下一步”，它需要在循环中继续在数组中。

到目前为止，这是我的代码：

```
<div class="video-container">
            <?php
                $randomNumber = rand(0,4);
                $videoArray = array(
                    '<iframe src="http://player.vimeo.com/video/46808655?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff" width="650" height="366" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>',
                    '<iframe src="http://player.vimeo.com/video/46803192?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff" width="650" height="366" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>',
                    '<iframe src="http://player.vimeo.com/video/46811051?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff" width="650" height="366" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>',
                    '<iframe src="http://player.vimeo.com/video/46817110?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff" width="650" height="366" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>',
                    '<iframe src="http://player.vimeo.com/video/46822673?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff" width="650" height="366" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>',
                );
                echo $videoArray[$randomNumber];
                $current_index = array_search($randomNumber, $videoArray);
                $next = $current_index - +1;        
        ?>
    </div>
    <?php if ($videoArray > 0): ?>
        <a href="<?= $videoArray[$next] ?>">Next</a>
    <?php endif; ?> 
```

任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:53:32.807

首先，您应该只在数组中存储 url。

其次，您应该在 Next 链接中将下一个视频的 id 作为 url 参数传递。

```
<div class="video-container">
    <?php
            // Array with video urls
    $videoArray = array(
        'http://player.vimeo.com/video/46808655?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff',
        'http://player.vimeo.com/video/46803192?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff',
        'http://player.vimeo.com/video/46811051?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff',
        'http://player.vimeo.com/video/46817110?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff',
        'http://player.vimeo.com/video/46822673?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff'
        );

            // Verify if "videoid" has been passed and it is valid
    if (isset($_GET["videoid"])
        && is_numeric($_GET["videoid"])
        && ($_GET["videoid"] >= 0)
        && ($_GET["videoid"] < count($videoArray))
    {
        // videoid is valid, use it
        $videoid = $_GET["videoid"];
    }
    else
    {
        // videoid is invalid or not set, generate random videoid
        $videoid = rand(0, count($videoArray) - 1);
    }
    ?>
    <iframe src="<?php print($videoArray[$videoid]); ?>" width="650" height="366" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen>
    </iframe>
    <?php
    // calculate id for next video with overflow
    $nextid = $videoid + 1;
    if ($nextid >= count($videoArray))
        $nextid = 0;
    ?>
</div>
<a href="?videoid=<?php print($nextid); ?>">Next</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:47:38.020

像这样的东西怎么样：

```
<div class="video-container">
        <?php

            if (isset($_REQUEST["video"])) {
                $randomNumber = $_REQUEST["video"];
            } else {
                $randomNumber = rand(0,4);
            }

            $videoArray = array(
                '<iframe src="http://player.vimeo.com/video/46808655?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff" width="650" height="366" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>',
                '<iframe src="http://player.vimeo.com/video/46803192?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff" width="650" height="366" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>',
                '<iframe src="http://player.vimeo.com/video/46811051?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff" width="650" height="366" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>',
                '<iframe src="http://player.vimeo.com/video/46817110?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff" width="650" height="366" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>',
                '<iframe src="http://player.vimeo.com/video/46822673?title=0&amp;portrait=0&amp;byline=0&amp;color=ffffff" width="650" height="366" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>',
            );
            echo $videoArray[$randomNumber];
            $current_index = array_search($randomNumber, $videoArray);
            $next = $current_index - +1;        
    ?>
</div>
<?php if ($videoArray > 0): ?>
    <a href="<?php echo $_SERVER["PHP_SELF"] ?>?video=<?= $videoArray[$next] ?>">Next</a>
<?php endif; ?> 
```

如果使用名为 video 的参数调用脚本，它将选择该参数作为“随机”数字。

还有一些其他的调整可以添加，例如确保所选视频存在，以及考虑如果有人在最​​终视频上点击下一步该怎么办。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T14:46:27.987

你必须设置一个`$_GET`参数

```
<a href="play_video.php?v=<?=$next ?>">Next</a> 
```

和`randomNumber`：

```
<?php

     $videoArray = array(/*  */);

     if(isset($_GET['v']) && (int)$_GET['v'] < count($videoArray)){
         $randomNumber = (int)$_GET['v'];
     } else {
         $randomNumber = rand(0,4);
     }
     $current_index = $videoArray[$randomNumber];
     $next = $current_index+1;
     if($next >= count($videoArray)){ $next = 0; }
 ........ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T14:59:10.480

在脚本的任何输出之前，输入： `session_start();` 然后执行

> ```
> if(!isset($_SESSION['curVid'])) { 
>   $_SESSION['curVid'] = 0;
>   $_SESSION['videos'] = $videoArray;
>   shuffle($_SESSION['videos']);
> }
> if(isset($_GET['next'])) { 
>   $current = intval($_GET['next']);
>   if($current > count($_SESSION['videos'])) { 
>     $current = 0;
>   }
>   $_SESSION['curVid'] = $current;
> }
> $current = $_SESSION['curVid'];
> $video = $_SESSION['videos'][$current];
> $next = $_SESSION['curVid']+1;
> 
> echo "<a href=\"./?next={$next}\">Next video</a>"; 
> ```

# java - java inputstream没有读取前导十六进制字节

> ID：12007904
> 
> 赞同：0
> 
> 时间：2012-08-17T14:41:33.497
> 
> 标签：java, sockets

我有一个 Telnet 客户端定义为：

```
 TelnetClient telnet = new TelnetClient();
    telnet.connect(server, port); 
```

然后我得到输入流：

```
 InputStream in = telnet.getInputStream(); 
```

然后尝试循环读取上面的内容：

```
 while (true) {
    int TEST = in.read();
    } 
```

当我收到输入的“文本”部分时，一切似乎都很好......但我错过了（对我来说非常重要！）前导字节。这是我在端口上看到的情况的窥探：

```
 64: a88f ffff 3034 3131 3032 3030 3030 3030    ¨...041102000000
    80: 3030 322e 3031 3131 2e36 2e34 2020 3135    002.0111.6.4  15
    96: 2e39 2e33 2020 3030 3132 30                .9.3  00120 
```

注意“ffff”：这是我需要的主要部分（之前的一切都是垃圾：TCP 通信的一部分）。

但是，在打印我的“TEST”变量时，我只看到“041102...等”。

我也尝试过使用 BOMInputStream，但我也无法得到它。

=> 你知道我怎么能收到这些吗？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:16:22.010

实例提供的输入流`TelnetClient`只会提供数据字符。Telenet 协议信令内容将被`TelnetClient`代码过滤掉。

如果您想获取信令信息、选项等，您将需要使用`TelnetClient`API 中的其他方法。您可以尝试多种方法。例如，您可以注册一个选项处理程序，或一个通知处理程序，或者您可以注册一个“间谍流”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:54:26.813

如果您真的想查看所有数据，您应该只使用`Socket`而不是。`TelnetClient`

# asp.net - 数组循环顺序问题

> ID：12007909
> 
> 赞同：1
> 
> 时间：2012-08-17T14:41:46.260
> 
> 标签：asp.net, arrays, arraylist, associative-array, stringbuilder

嘿，我正在尝试以正确的格式将我的数组放入 ASP.net 网页中，以获取订单表。

顺序应该是：

```
model_number
comm_category
service
freight
sales_tax
sales
unit_price
price
id_price 
```

目前它输出如下：

```
model_number
price
unit_price
id_price
sales_tax
sales
service
freight
comm_category 
```

因此，我无法在此处使用我的代码以正确的顺序附加到我的字符串：

```
Public Sub AssocArray_To_String(ByRef Output As System.Text.StringBuilder, ByVal AssocArrayInput As AssocArray)
    For iParent As Integer = 0 To AssocArrayInput.Count - 1
        Dim intX As Integer = 0
        Dim arrParent As AssocArray = TryCast(AssocArrayInput.Item(iParent), AssocArray)
        If arrParent Is Nothing Then Continue For

        For iChild As Integer = 0 To arrParent.Count - 1
            Call buildItems(PHPConvert.ToString(arrParent.Keys(iChild)), PHPConvert.ToString(arrParent.Values(iChild)), intX)
            intX += 1
        Next iChild
    Next iParent
End Sub

Private Sub buildItems(ByVal nameOfItem As String, ByVal itemItself As String, ByVal intX As Integer)
    Dim tmpStuff As Decimal = 0.0
    Dim qty As Integer = 1
    Dim model_number As String = ""
    Dim comm_category As String = ""
    Dim service As Double = 0
    Dim freight As Double = 0
    Dim sales_tax As Double = 0
    Dim sales As Double = 0
    Dim unit_price As Double = 0
    Dim price As Double = 0
    Dim id_price As Double = 0

    If nameOfItem = "model_number" Then
        model_number = itemItself
        tableLoop += "<tr><td bgcolor=""#CCCCCC""><asp:Label ID=""item_count_" & intX & """ Text=""Label"">" & qty & "</asp:Label></td>"
        tableLoop += "<td bgcolor=""#CCCCCC""><asp:Label ID=""model_number_" & intX & """ Text=""Label"">" & model_number & "</asp:Label></td>"
    ElseIf nameOfItem = "comm_category" Then
        comm_category = itemItself
        tableLoop += "<td bgcolor=""#CCCCCC""><asp:Label ID=""comm_category_" & intX & """ Text=""Label"">" & comm_category & "</asp:Label></td>"
    ElseIf nameOfItem = "service" Then
        service = Format(Convert.ToDouble(itemItself), "$######.00")
        tableLoop += "<td bgcolor=""#CCCCCC""><asp:Label ID=""service_" & intX & """ Text=""Label"">" & service & "</asp:Label></td>"
    ElseIf nameOfItem = "freight" Then
        freight = Format(Convert.ToDouble(itemItself), "$######.00")
        tableLoop += "<td><asp:Label ID=""freight_" & intX & """ Text=""Label"">" & freight & "</asp:Label></td>"
    ElseIf nameOfItem = "sales_tax" Then
        sales_tax = Format(Convert.ToDouble(itemItself), "$######.00")
        tableLoop += "<td><asp:Label ID=""sales_tax_" & intX & """ Text=""Label"">" & sales_tax & "</asp:Label></td>"
    ElseIf nameOfItem = "sales" Then
        sales = Format(Convert.ToDouble(itemItself), "$######.00")
        tableLoop += "<td bgcolor=""#CCCCCC""><asp:Label ID=""sales_" & intX & """ Text=""Label"">" & sales & "</asp:Label></td>"
    ElseIf nameOfItem = "unit_price" Then
        unit_price = Format(Convert.ToDouble(itemItself), "$######.00")
        tableLoop += "<td bgcolor=""#CCCCCC""><asp:Label ID=""unit_price_" & intX & """ Text=""Label"">" & unit_price & "</asp:Label></td></tr>"
    ElseIf nameOfItem = "price" Then
        price = Format(Convert.ToDouble(itemItself), "$######.00")
        tableLoop += "<td><asp:Label ID=""amount_" & intX & """ Text=""Label"">" & price & "</asp:Label></td>"
    ElseIf nameOfItem = "id_price" Then
        id_price = Format(Convert.ToDouble(itemItself), "$######.00")
        tableLoop += "<td><asp:Label ID=""id_price_" & intX & """ Text=""Label"">" & id_price & "</asp:Label></td>"
    End If
End Sub 
```

最终结果是这样的：

```
<tr><td bgcolor="#CCCCCC"><asp:Label ID="item_count_0" Text="Label">1</asp:Label></td>
<td bgcolor="#CCCCCC"><asp:Label ID="model_number_0" Text="Label">TTN491-7BW</asp:Label></td>
<td bgcolor="#CCCCCC"><asp:Label ID="sales_1" Text="Label">3084.63</asp:Label></td>
<td><asp:Label ID="amount_2" Text="Label">3810</asp:Label></td>
<td><asp:Label ID="sales_tax_3" Text="Label">290.37</asp:Label></td>
<td><asp:Label ID="id_price_4" Text="Label">3810</asp:Label></td></tr>
<td bgcolor="#CCCCCC"><asp:Label ID="comm_category_5" Text="Label">X24</asp:Label></td>
<td bgcolor="#CCCCCC"><asp:Label ID="service_6" Text="Label">51</asp:Label></td>
<td><asp:Label ID="freight_7" Text="Label">384</asp:Label></td>
<td bgcolor="#CCCCCC"><asp:Label ID="unit_price_8" Text="Label">3135.63</asp:Label></td></tr> 
```

应该像这样输出：

```
<tr><td bgcolor="#CCCCCC"><asp:Label ID="item_count_0" Text="Label">1</asp:Label></td>
<td bgcolor="#CCCCCC"><asp:Label ID="model_number_0" Text="Label">TTN491-7BW</asp:Label></td>
<td bgcolor="#CCCCCC"><asp:Label ID="comm_category_5" Text="Label">X24</asp:Label></td>
<td bgcolor="#CCCCCC"><asp:Label ID="service_6" Text="Label">51</asp:Label></td>
<td><asp:Label ID="freight_7" Text="Label">384</asp:Label></td>
<td><asp:Label ID="sales_tax_3" Text="Label">290.37</asp:Label></td>
<td bgcolor="#CCCCCC"><asp:Label ID="sales_1" Text="Label">3084.63</asp:Label></td>
<td bgcolor="#CCCCCC"><asp:Label ID="unit_price_8" Text="Label">3135.63</asp:Label></td></tr>
<td><asp:Label ID="amount_2" Text="Label">3810</asp:Label></td>
<td><asp:Label ID="id_price_4" Text="Label">3810</asp:Label></td></tr> 
```

我怎样才能把数组按正确的顺序排列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:46:04.827

为什么你不只是简单地直接引用你需要的项目，而不是循环通过关联键（以任意顺序返回）：

```
Dim arrParent As AssocArray = TryCast(AssocArrayInput.Item(iParent), AssocArray)
If arrParent Is Nothing Then Continue For

Call buildItems("model_number", PHPConvert.ToString(arrParent.Values("model_number")), intX)
Call buildItems("comm_category", PHPConvert.ToString(arrParent.Values("model_number")), intX)
Call buildItems("service", PHPConvert.ToString(arrParent.Values("model_number")), intX)
Call buildItems("freight", PHPConvert.ToString(arrParent.Values("model_number")), intX)
'ETC 
```

或者更好的是，完全摆脱`BuildItems`并在上面的适当位置内联逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:49:09.907

你在打电话

```
For iChild As Integer = 0 To arrParent.Count - 1
        Call buildItems(PHPConvert.ToString(arrParent.Keys(iChild)), 
                        PHPConvert.ToString(arrParent.Values(iChild)),  
                        intX)
        intX += 1
Next iChild 
```

因此，您将始终获得 arrParent 中项目的顺序。所以你所要做的就是以正确的顺序手动调用 buildItems(...)

```
Call buildItems(PHPConvert.ToString("model_number"), 
                PHPConvert.ToString(arrParent.Values("model_number")),  
                        intX)
Call buildItems(PHPConvert.ToString("comm_category"), 
                PHPConvert.ToString(arrParent.Values("comm_category")),  
                        intX)

' and so on 
```

Furthermore I can't find a definition for `tableLoop` in buildItems. It seems that this is a **simple string variable**. You should make use of a **StringBuilder** as this class is way faster in concatenating strings! See [MSDN](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx).

# ssis - 执行 SSIS 包会产生巨大的数字。的临时文件，这使我用完了磁盘空间

> ID：12007910
> 
> 赞同：4
> 
> 时间：2012-08-17T14:41:47.740
> 
> 标签：ssis, sqlbulkcopy

我有一个 ssis 包，我使用 sql 作业将数据从一个数据库批量复制到另一个数据库。目的地是我们的集成服务器，我们有足够的空间用于数据库。但是当我运行这个工作（即包）时。它会在 localsettings/temp 文件夹中创建大量临时文件，顺序为 1GB mdf 文件，它会创建大约 20gb 的临时文件。我手动创建了这个包，没有使用导入导出向导。任何人都可以帮助我如何在执行时避免这个巨大的临时文件吗？如果需要任何进一步的细节，请提及。

注意：很多人说，如果我们使用导入导出向导创建一个包并为许多表设置优化，这将会发生。但是在这个包中，我只查询了一个表，并且在不使用导入导出向导的情况下手动创建。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T20:06:42.287

## 为什么包会创建临时文件？

SSIS 是一种内存 ETL 解决方案，除非它不能将所有内容都保存在内存中并开始交换到磁盘。

## 为什么要像@jeff hornby 建议的帮助那样重组包？

完全和部分阻塞的转换会强制数据流中的内存副本。假设您有 10 个桶，每个桶承载 1MB 的数据。当您使用阻塞转换时，当这些存储桶到达转换时，必须将数据从一个内存位置复制到另一个内存位置。现在，您的程序包总内存消耗翻了一番，因为在 union all 转换之前使用了 10MB 的数据，之后又使用了 10MB。

仅使用您需要的列。如果某个列不在您的目标中，请不要将其添加到数据流中。使用数据库执行排序和合并。在数据进入数据流之前将其转换为适当的类型。

## 还有什么可能导致临时文件使用

查找转换。我见过人们在使用`SELECT * FROM dbo.BillionRowTable`当前时间段所需的一两列时粉碎他们的 ETL 服务器。查找操作的默认行为是执行该源查询并将结果缓存在内存中。对于大型和/或深度的大型表，这可能会使您的数据流看起来甚至没有运行，因为 SSIS 正忙于流式传输和缓存所有这些数据作为预执行阶段的一部分。

二进制/LOB 数据。源表中有 (n)varchar(max)/varbinary(max) 或经典 BLOB 数据类型？对不起，这不会在记忆中。相反，数据流将携带一个指针并为每个对象写出一个文件。

并行处理过多。SSIS 很棒，因为您可以免费并行处理您的处理。除非你可以拥有太多的好东西。如果您有 20 个数据流都在空间中浮动且它们之间没有优先级，则集成服务引擎可能会尝试一次运行所有这些数据流。在它们之间添加一个优先约束，即使它只是在完成时（成功/失败时）强制*一些*操作序列化。在数据流中，您可以通过进行不相关的操作来引入相同的挑战。我的经验法则是，从任何来源或目的地开始，我应该能够到达所有其他来源/目的地。

## 我还可以做些什么？

检查盒子上还有什么正在使用内存。[您是否为 SQL Server 设置了合理的（非默认）最大内存值](http://thomaslarock.com/2012/06/breaking-news-microsoft-sql-server-will-do-what-you-tell-it-to-do/)？SSIS 之类的 RAM 就像一个胖孩子喜欢蛋糕一样，因此您需要平衡 SSIS 的内存需求与数据库本身——它们具有完全独立的内存空间。

每个数据流都可以设置 [BufferTempStoragePath 和 BlobTempStoragePath [2](https://stackoverflow.com/questions/10537884/what-is-the-actual-use-of-buffer-temp-and-blob-temp-in-ssis/10538806#10538806)。利用这一点并将其放在具有足够存储空间的驱动器上

最后，添加更多 RAM。如果您无法通过上述操作使软件包变得更好，请投入更多硬件并完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T14:52:57.057

如果您获得那么多临时文件，那么您的数据流中可能有很多阻塞转换。尝试消除以下类型的转换：聚合、模糊分组、模糊查找、行采样、排序、术语提取。此外，部分阻塞事务可能会产生相同的问题，但规模不同：数据挖掘查询、合并、合并连接、数据透视、术语查找、全部联合、反透视。您可能希望尽量减少这些转换。

问题可能是数据流中某处的排序转换（这是最常见的）。您可以通过在 SQL 语句中使用 ORDER BY 子句来消除这种情况。只需记住在数据源中设置 sorted 属性。

# php - 将 jQuery 包含到 Symfony2 中

> ID：12007911
> 
> 赞同：5
> 
> 时间：2012-08-17T14:41:49.057
> 
> 标签：php, jquery, symfony

我是 Symfony2 框架的新手，并不完全了解如何使用 javascript 以及如何以最佳方式包含它们。

我需要的是：在每个页面中包含 jQuery 脚本。

我所拥有的：我有这样的常见布局：

```
<!DOCTYPE html>
<html>
    <head>
        {% block javascripts %}{% endblock %}
    </head>
    <body>
        {% block body %}{% endblock %}

    </body>
</html> 
```

jquery.js 应该放在哪里。**web/bundles/jquery**呢？还是有一些特殊的官方 jquery 捆绑包？我应该使用asset() 以及如何使用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T15:21:01.280

假设您的 jquery.min.js 位于 `src/Acme/FooBundle/Resources/public/js/`

你可以使用

```
<script type="text/javascript" src="{{ asset('bundles/acmefoo/js/jquery.min.js') }}"></script> 
```

或者

```
{% javascripts
    '@AcmeFooBundle/Resources/public/js/jquery.min.js'
%}
    <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

进入你的树枝模板。

确保您之后安装了资产或运行此命令

```
php app/console assets:install web --symlink 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-12-25T22:24:28.007

有几种方法可以在 Symfony 项目中包含 jQuery。你可以：

## 1\. 使用前端包管理器（Bower）安装 jQuery

[Symfony 文档](http://symfony.com/doc/2.8/frontend/bower.html)指出：

> **Bower**是用于前端依赖项的依赖项管理工具，例如 Bootstrap 或**jQuery**。

如果尚未安装 Bower，您可以使用 npm 全局安装它（需要节点）：

```
npm install -g bower 
```

根据[Symfony 文档](http://symfony.com/doc/2.8/bundles/best_practices.html#vendors)：

> 捆绑软件不应嵌入以 JavaScript、CSS 或任何其他语言编写的第三方库。

因此，我们将 jQuery 直接存储在`web/`可公开访问的目录中。要告诉 Bower 在哪里安装软件包，请在 Symfony 项目根目录中创建一个*.bowerrc文件，其中包含以下内容：*

```
{
    "directory": "web/assets/vendor/"
} 
```

在您的项目根目录中执行`bower init`以创建*bower.json*，它将定义已安装的包。为每个问题键入 enter 以回答默认值（为模块类型选择“全局”）。

Bower 已准备好在您的项目中安装 jQuery：

```
bower install --save jquery 
```

现在您可以在模板中包含 jQuery：

```
<script src="{{ asset('assets/vendor/jquery/dist/jquery.min.js') }}"></script> 
```

*目前 Bower 没有[Composer 上的“锁定”功能](https://getcomposer.org/doc/01-basic-usage.md#installing-with-composer-lock)。这就是为什么您可能应该提交 Bower 下载的资产，而不是将该目录添加到您的 .gitignore 文件中。这可能会在未来发生变化：[bower/bower#1748](https://github.com/bower/bower/pull/1748)。*

## 2\. 用 Composer 安装 jQuery

即使 Composer 是 PHP 的依赖管理器，您也可以使用它来安装 jQuery。

为了使 Composer 能够安装 components [/jquery](https://packagist.org/packages/components/jquery)等组件，您首先需要添加[component-installer](https://github.com/RobLoach/component-installer)：

```
composer require robloach/component-installer 
```

然后修改您的*composer.json*文件以包括：

```
"require": {
    "components/jquery": "3.1.1"
},
"config": {
    "component-dir": "web/assets/vendor"
}, 
```

并执行`composer install`. `web/assets/vendor`这将在目录中安装 jQuery 。

然后，您可以在模板中包含 jQuery：

```
<script src="{{ asset('assets/vendor/jquery/jquery.min.js') }}"></script> 
```

## 3\. 包含来自 CDN 的 jQuery

以谷歌 CDN 为例：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script> 
```

关于使用 CDN 的优缺点，我建议您阅读[此页面](https://stackoverflow.com/questions/2180391/why-should-i-use-googles-cdn-for-jquery)。

## 在所有情况下：

为了确保您的脚本（需要 jQuery）能够正常工作，必须首先加载 jQuery。因此，根据您的页面加载要求，您应该：

*   在您需要之前包含 jQuery，或者
*   将其包含在`<HEAD>`, 或
*   在你的脚本中使用[defer](http://www.w3schools.com/tags/att_script_defer.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-20T23:22:29.817

为了纯洁。当然`<script>`标签应该是关闭的，所以正确的代码片段是：

```
<script type="text/javascript" src="{{ asset('bundles/acmefoo/js/jquery.min.js') }}"></script> 
```

和

```
{% javascripts '@AcmeFooBundle/Resources/public/js/jquery.min.js' %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

否则页面的全部内容将被视为`script`标签的内容，并显示为空白。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-13T17:24:46.323

要使用 composer 包实现，请导航到您的 symfony 包并运行以下命令。

**下载供应商包：**

你选择的包取决于你，我在这个例子中使用了一个流行的包（bmatzner/jquery-bundle）。

`php composer.phar require bmatzner/jquery-bundle:2.*`对于 jQuery 2.x

或者

`php composer.phar require bmatzner/jquery-bundle:1.*`对于 jQuery 1.x

**将 Bundle 添加到您的 AppKernel：**

```
/* /app/AppKernel.php */

class AppKernel extends Kernel
{
    public function registerBundles()
    {
        $bundles = [
            new Bmatzner\JQueryBundle\BmatznerJQueryBundle(),
    ///... 
```

**安装资产：**

`php bin/console assets:install --symlink web`

**要包含在模板中：**

```
<!-- /app/Resources/views/base.html.twig -->

<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>{% block title %}Welcome!{% endblock %}</title>
        {% block stylesheets %}{% endblock %}
        <script type="text/javascript" src="{{ asset('bundles/bmatznerjquery/js/jquery.min.js') }}"></script>
        <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />
    </head>
    <body>
        {% block body %}{% endblock %}
        {% block javascripts %}{% endblock %}
    </body>
</html> 
```

**清除缓存：**

```
php bin/console cache:clear --env=dev
php bin/console cache:clear --env=prod 
```

# hibernate - Hibernate 拦截器 - 将属性设置为 null

> ID：12007913
> 
> 赞同：0
> 
> 时间：2012-08-17T14:41:53.830
> 
> 标签：hibernate, interceptor

我实现了一个 Hibernate 拦截器（扩展 EmptyInterceptor）并实现了**onFlushDirty**方法，以便在保存该对象时将对象的属性设置为 null。代码如下所示：

```
public boolean onFlushDirty(...) {
// looking for the property index
int i = 0;
for (i=0; i<propertyNames.length; i++) {
  if ("someProperty".equals(propertyNames[i])) {
    break;
  }
}

// setting it to null
currentState[i] = null; 
```

不幸的是，即使我取消了对象，记录仍然保存到数据库中。奇怪的是，当我修改该对象时，更改将保存到数据库中。

对象和属性都是实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:42:34.120

我很确定在这种情况下没有调用拦截器......

您能否在保留数据时尝试此操作...

```
session.evict(entity);
session.update(entity); 
```

并发布调查结果。这将[强制](https://stackoverflow.com/questions/2370051/force-update-in-hibernate)休眠调用`onFlushDirty`.

还要放置`@Override`注释`onFlushDirty`以确保它被正确覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:25:32.530

问题在于即使在拦截器运行之前实体也已保存到数据库中。这是因为它是一个实体，需要在 hibernate 可以在另一个实体中引用它之前保存。

# sql - 如何将数组值直接插入到 jdbc 准备好的语句中

> ID：12007917
> 
> 赞同：1
> 
> 时间：2012-08-17T14:42:02.733
> 
> 标签：sql, jdbc, insert, sap-ase, java1.4

我正在尝试使用多个数组运行查询，所以我必须创建一个类似的查询

```
SELECT * FROM TABLE_NAME WHERE FIELD1 IN (?,?,?) AND FIELD2 IN(?,?,?) .... SO ON 
```

所以，每次我必须根据我拥有的每个数组的大小生成？的数量并将其放在那里。这对我来说似乎很老式。还有其他方法吗？就像直接插入一个值数组。

我正在使用 java v1.4。我在 1.6 中看到了有关创建 sql 数组的内容，但在 1.4 中没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:16:19.247

缺少任何 SQL 构建器库，您将不得不自己生成这些多个绑定值。据我所知，即使有 JDBC 数组支持，这通常也是不可能的，特别是对于 Sybase ASE。

通过 SQL 构建器库，我的意思是类似于[jOOQ](http://www.jooq.org)（我是其中的开发人员）：

```
String[]  array1 = {"1", "2", "3"};
Integer[] array2 = { 1 ,  2 ,  3 };

create.select()
      .from(TABLE_NAME)
      .where(FIELD1.in(array1))
      .and(FIELD2.in(array2))
      .fetch(); 
```

请注意，jOOQ 需要 Java 1.6

# .net - .net 4.5 下的列表/组合框背景和选定颜色

> ID：12007918
> 
> 赞同：14
> 
> 时间：2012-08-17T14:42:13.310
> 
> 标签：.net, wpf, windows-8

我有一个应用程序在 Windows 7 及更低版本上运行良好，目标是 .net 4 框架。
如果该应用程序现在安装在 Windows 8 中（运行 .net 4.5 但仍以 .net 4 为目标），它会为列表框或组合框中的选定项目显示蓝色背景，并为焦点项目显示白色背景。有没有办法删除这个？
我在我的 XAML 中使用以下内容来设置有问题的样式，这似乎解决了 Windows 8 之前的问题。

```
<ListBox.ItemContainerStyle>
                <Style TargetType="{x:Type ListBoxItem}">
                    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                    <Style.Resources>
                        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent"/>
                        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent"/>
                    </Style.Resources>
                </Style>
            </ListBox.ItemContainerStyle> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T17:16:42.857

我忘了回来告诉我我是如何解决这个问题的......原来你需要做的就是创建一个空白的项目容器样式并将它分配给你的列表框/组合框等......你可以使用它以及保持您可能正在使用的当前样式，例如 ListBox Style="{StaticResource CurrentStyle}" ItemContainerStyle="{StaticResource BlankListBoxContainerStyle}" /> 其中 BlankListBoxContainerStyle 类似于.....

```
<Style x:Key="BlankListBoxContainerStyle" TargetType="{x:Type ListBoxItem}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ListBoxItem}">
                <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="FocusVisualStyle"
            Value="{x:Null}"/>
</Style> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T21:12:35.057

您的应用程序会覆盖 SystemColors.HighlightBrushKey（和其他系统键）的值。这适用于通过引用系统颜色来定义其前景色/背景色的控件，就像它们在 Win7 默认主题 (Aero) 中所做的那样。
但是 Win8 默认主题 (Aero2) 对颜色的定义不同。所以你的覆盖没有效果。

主题不需要使用系统颜色。他们碰巧在 Win7/Aero 中这样做了，但这只是因为系统颜色被认为是足够的。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-28T20:09:02.437

重新阅读 frameworkcompatibility 的文档，我发现在为 .NET 4 编译并在 Windows 8 上运行时实际上不需要它。

[http://msdn.microsoft.com/en-us/library/system.windows.frameworkcompatibilitypreferences%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.frameworkcompatibilitypreferences%28v=vs.110%29.aspx)

但是我仍然有 Windows 7 中不存在的蓝色背景，我最终将问题追溯到一个列表视图，该列表视图的样式与我的列表框不同。我发现我实际上并不需要为元素选择元素的能力，因此将列表视图更改为项目控件解决了我的问题。

也可以看看：

[http://connect.microsoft.com/VisualStudio/feedback/details/750655/selected-listboxitem-does-not-have-a-background-of-controlbrushkey-when-app-is-unfocused](http://connect.microsoft.com/VisualStudio/feedback/details/750655/selected-listboxitem-does-not-have-a-background-of-controlbrushkey-when-app-is-unfocused)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T14:45:23.200

它被称为依赖于系统的默认主题，你并不是真的要搞砸它。您可以通过设置另一个[`Control.Template`](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.template.aspx).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-19T21:56:37.240

```
<Style.Triggers>
                <Trigger Property="IsSelected" Value="true">
                    <Setter Property="Effect">
                        <Setter.Value>
                            <DropShadowEffect Color="Red"
                              BlurRadius="0"
                              ShadowDepth="0" />
                        </Setter.Value>
                    </Setter>
                </Trigger> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-30T14:31:10.403

这是我想出的不涉及更改系统颜色或控制模板的方法。只需将 ListBox 包装在一个新的 UserControl 中。

```
public partial class StyledListBox : UserControl
{
    public DataTemplate ItemTemplate
    {
        get { return (DataTemplate)GetValue(ItemTemplateProperty); }
        set { SetValue(ItemTemplateProperty, value); }
    }

    public IEnumerable ItemsSource
    {
        get { return (IEnumerable)GetValue(ItemsSourceProperty); }
        set { SetValue(ItemsSourceProperty, value); }
    }

    public object SelectedItem
    {
        get { return GetValue(SelectedItemProperty); }
        set { SetValue(SelectedItemProperty, value); }
    }

    public StyledListBox()
    {
        InitializeComponent();
    }

    public static readonly DependencyProperty ItemTemplateProperty = DependencyProperty.Register("ItemTemplate", typeof(DataTemplate), typeof(StyledListBox), new FrameworkPropertyMetadata(null));
    public static readonly DependencyProperty ItemsSourceProperty = DependencyProperty.Register("ItemsSource", typeof(IEnumerable), typeof(StyledListBox), new FrameworkPropertyMetadata(null));

    public static readonly DependencyProperty SelectedItemProperty = DependencyProperty.Register("SelectedItem", typeof(object), typeof(StyledListBox), new FrameworkPropertyMetadata(null)
    {
        BindsTwoWayByDefault = true,
        DefaultUpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged
    });
} 
```

XAML：

```
<UserControl x:Class="StyledListBox"

     <ListBox ItemsSource="{Binding ItemsSource, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type common:StyledListBox}}}"
              SelectedItem="{Binding SelectedItem, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type common:StyledListBox}}}">

        <ListBox.ItemTemplate>
            <DataTemplate>
                <Border>
                    <Border.Style>
                        <Style TargetType="{x:Type Border}">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsSelected, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBoxItem}}}"
                                             Value="True">
                                    <Setter Property="Background" Value="Red" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>

                    <ContentPresenter ContentTemplate="{Binding ItemTemplate, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type StyledListBox}}}" />
                </Border>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</UserControl> 
```

然后只需像使用 ListBox 一样使用包装器 UserControl。您想要控制的任何其他 ListBox 属性都可以简单地以`ItemsSource`与`SelectedItem`我的示例相同的方式添加到包装器中。

# maven - 更改 Maven 运行集成测试的时间

> ID：12007919
> 
> 赞同：3
> 
> 时间：2012-08-17T14:42:30.550
> 
> 标签：maven, integration-testing, lifecycle, maven-surefire-plugin

我们有单元测试（mockito）和集成测试（内存数据库） 我们希望 maven*不*将集成测试作为“mvn install”的一部分运行。基本上我认为这意味着重新配置生命周期，以便在安装和部署之间进行集成测试。这可能吗？

这样做的原因是集成测试有点费时，所以我们不希望他们在开发人员每次安装时都运行。但是，例如，我们希望它们在项目发布之前运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:46:32.410

检查您用于运行集成测试（可能是故障安全）的插件的文档 - 只需排除测试，或将插件执行设置为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:49:28.253

集成测试是否只执行一个插件（如surefire）？如果是这样，[将插件执行绑定到不同的阶段](http://maven.apache.org/guides/mini/guide-configuring-plugins.html#Using_the_executions_Tag)可能更容易：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        ...
        <executions>
          <execution>
            <id>execution1</id>
            <phase>install</phase>
            <configuration>
            ...
            </configuration>
            <goals>
              <goal>test</goal>
            </goals>
          </execution> 
```

# android - Android通过PHP脚本将数据发布到mysql

> ID：12007920
> 
> 赞同：0
> 
> 时间：2012-08-17T14:42:40.023
> 
> 标签：android, mysql

我是android开发的新手。我正在尝试使用 android 的 HttpPost 通过 php 脚本将数据插入远程 Mysql 数据库。我已经添加了互联网许可。我收到强制关闭错误。我的代码如下：

```
 package com.regsiteration.regfi;

    import java.io.IOException;
    import java.util.ArrayList;
    import java.util.List;

    import org.apache.http.HttpResponse;
    import org.apache.http.NameValuePair;
    import org.apache.http.client.ClientProtocolException;
    import org.apache.http.client.HttpClient;
    import org.apache.http.client.entity.UrlEncodedFormEntity;
    import org.apache.http.client.methods.HttpPost;
    import org.apache.http.impl.client.DefaultHttpClient;
    import org.apache.http.message.BasicNameValuePair;

    import android.os.Bundle;
    import android.app.Activity;
    import android.view.Menu;

    public class Main extends Activity {

    public void postData() {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://xyz.com/folder/register.php");

        try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("email", "demo@ats.in"));
            nameValuePairs.add(new BasicNameValuePair("name", "robin hood"));
            nameValuePairs.add(new BasicNameValuePair("password", "1234590"));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httppost);

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
        } catch (IOException e) {
            // TODO Auto-generated catch block
        }
    } 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //postData();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    } 
```

请告诉我我错过了什么或做错了什么。提前致谢。这是我的 logcat 跟踪

```
08-17 20:16:49.530: I/dalvikvm(630): threadid=3: reacting to signal 3
08-17 20:16:49.654: I/dalvikvm(630): Wrote stack traces to '/data/anr/traces.txt'
08-17 20:16:49.779: D/AndroidRuntime(630): Shutting down VM
08-17 20:16:49.779: W/dalvikvm(630): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
08-17 20:16:49.799: E/AndroidRuntime(630): FATAL EXCEPTION: main
08-17 20:16:49.799: E/AndroidRuntime(630): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.regsiteration.regfi/com.regsiteration.regfi.Main}: android.os.NetworkOnMainThreadException
08-17 20:16:49.799: E/AndroidRuntime(630):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-17 20:16:49.799: E/AndroidRuntime(630):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-17 20:16:49.799: E/AndroidRuntime(630):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-17 20:16:49.799: E/AndroidRuntime(630):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-17 20:16:49.799: E/AndroidRuntime(630):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-17 20:16:49.799: E/AndroidRuntime(630):  at android.os.Looper.loop(Looper.java:137)
08-17 20:16:49.799: E/AndroidRuntime(630):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-17 20:16:49.799: E/AndroidRuntime(630):  at java.lang.reflect.Method.invokeNative(Native Method)
08-17 20:16:49.799: E/AndroidRuntime(630):  at java.lang.reflect.Method.invoke(Method.java:511)
08-17 20:16:49.799: E/AndroidRuntime(630):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-17 20:16:49.799: E/AndroidRuntime(630):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-17 20:16:49.799: E/AndroidRuntime(630):  at dalvik.system.NativeStart.main(Native Method)
08-17 20:16:49.799: E/AndroidRuntime(630): Caused by: android.os.NetworkOnMainThreadException
08-17 20:16:49.799: E/AndroidRuntime(630):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
08-17 20:16:49.799: E/AndroidRuntime(630):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
08-17 20:16:49.799: E/AndroidRuntime(630):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
08-17 20:16:49.799: E/AndroidRuntime(630):  at java.net.InetAddress.getAllByName(InetAddress.java:220)
08-17 20:16:49.799: E/AndroidRuntime(630):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
08-17 20:16:49.799: E/AndroidRuntime(630):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
08-17 20:16:49.799: E/AndroidRuntime(630):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
08-17 20:16:49.799: E/AndroidRuntime(630):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
08-17 20:16:49.799: E/AndroidRuntime(630):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
08-17 20:16:49.799: E/AndroidRuntime(630):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
08-17 20:16:49.799: E/AndroidRuntime(630):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
08-17 20:16:49.799: E/AndroidRuntime(630):  at com.regsiteration.regfi.Main.postData(Main.java:37)
08-17 20:16:49.799: E/AndroidRuntime(630):  at com.regsiteration.regfi.Main.onCreate(Main.java:50)
08-17 20:16:49.799: E/AndroidRuntime(630):  at android.app.Activity.performCreate(Activity.java:4465)
08-17 20:16:49.799: E/AndroidRuntime(630):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-17 20:16:49.799: E/AndroidRuntime(630):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-17 20:16:49.799: E/AndroidRuntime(630):  ... 11 more
08-17 20:16:49.960: I/dalvikvm(630): threadid=3: reacting to signal 3
08-17 20:16:49.970: I/dalvikvm(630): Wrote stack traces to '/data/anr/traces.txt'
08-17 20:16:50.340: I/dalvikvm(630): threadid=3: reacting to signal 3
08-17 20:16:50.350: I/dalvikvm(630): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:54:54.413

HTTPPost 类的构造函数接受一个 Uri 对象

所以试试这个：

```
URI url = new URI("http://xyz.com/folder/register.php");
HttpPost httppost = new HttpPost(url); 
```

[来源](http://developer.android.com/reference/org/apache/http/client/methods/HttpPost.html#HttpPost%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:56:56.610

```
Caused by: android.os.NetworkOnMainThreadException 
```

这是你的错误。在较新的 SDK 版本中，无法在 UI 线程上完成网络工作。您可以使用“覆盖”它

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
  StrictMode.setThreadPolicy(policy); 
```

# php - Magento - 在 ShopBy 块中重复选择的过滤器

> ID：12007925
> 
> 赞同：0
> 
> 时间：2012-08-17T14:42:59.347
> 
> 标签：php, magento

当我点击我的 ShopBy 块的任何过滤器时，除了 state.phtml 部分（“当前购物者：”）之外，一切都很好

例如，如果我点击“0,00 € - 99,99 € (150)”[价格]，在我的 ShopBy 块中我会看到：PRICE: 0,00 € - 99,99 € 三次！

你有想法吗？

*{Magento 版本。1.7.0.0}*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:01:04.537

我遇到过同样的问题。我将其缩小到我正在使用的 local.xml 文件。我重命名了它，以便它看起来像默认布局并且问题消失了。

我制作了一个自定义的 leftnav 并将其默认设置为：

```
<reference name="left">
              <block type="catalog/layer_view" name="leftNav" as="leftNav" template="page/html/sidemenu.phtml" before="left"/>               
            </reference> 
```

我将其更改为：

```
<reference name="left">
              <block type="catalog/navigation" name="leftNav" as="leftNav" template="page/html/sidemenu.phtml" before="left"/>               
            </reference> 
```

**type="catalog/navigation"**问题就消失了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:36:12.920

谢谢，事实上，我的问题是我的“”节点被不同的页面使用，并且不会同时加载。但我错了。

# import - SQL Server 2008 Express 32 位导入导出向导安装

> ID：12007935
> 
> 赞同：0
> 
> 时间：2012-08-17T14:43:25.827
> 
> 标签：import, sql-server-2008-express

我在 StackOverflow 上的第一篇文章，如果我无知，请见谅。

最近，出于工作目的，我一直在玩 MS Visual Web Developer，并且我已经在我的家庭和工作计算机上安装了 2008 Express 版本。

后来我才发现两台电脑的导入导出向导是不一样的：在工作中我有 64 位版本，在家里我有 32 位版本。这让我非常头疼，因为我希望依靠它的功能来导入仅在 32 位版本下提供的 Access 和 Excel 文件。

我的问题：有什么方法可以在工作中单独安装这个 32 位向导，而无需重新安装整个 MS VWD 应用程序？也许作为附加组件或服务包之类的？

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:57:17.870

如果您使用的是 SQL Server，请安装 SQL Server Management Studio 并通过它进行导入/导出。

[http://www.microsoft.com/en-us/download/details.aspx?id=7593](http://www.microsoft.com/en-us/download/details.aspx?id=7593)

# c++ - 在 C++ 中的线程内启动和停止循环

> ID：12007940
> 
> 赞同：2
> 
> 时间：2012-08-17T14:44:01.130
> 
> 标签：c++, multithreading, loops, c++11, stdthread

我需要从一个事件开始一个循环，然后从另一个事件中停止它。我的想法是当我按下按钮时调用函数 startDequeuing()，以便启动具有循环的线程，然后终止该循环，将函数 stopDequeuing() 中的“出队”变量设置为 false。

这是我第一次使用线程，当我启动循环时程序会锁定，我认为是因为变量“出队”被锁定并且无法从线程外部访问，对吗？

我怎么解决这个问题？？

这里有一些代码：

```
void CameraManager::startDequeuing(){
    dequeuing = true;
    std::thread dequeueThread(&CameraManager::dequeueLoop, this);
    dequeueThread.join();
}

void CameraManager::stopDequeuing(){
    dequeuing = false;
}

void *CameraManager::dequeueLoop(){
    while(dequeuing){
        highSpeedCamera->dequeue();
        highSpeedCamera->enqueue();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:50:11.473

使用线程的全部意义在于让多个函数并行运行。这里：

```
std::thread dequeueThread(&CameraManager::dequeueLoop, this);
dequeueThread.join(); 
```

您启动第二个线程并使第一个线程进入睡眠状态，等待生成的线程返回。所以你仍然只有一个线程在运行。如果您有这种 GUI 事件循环，您可能会锁定添加回调的可能性，当该事件循环为空时，该回调将被调用。这可能使您可以在不使用线程的情况下做您想做的事情。

解决方案可能如下所示：

```
void CameraManager::startDequeuing(){
    dequeuing = true;
    dequeueThread = std::thread(&CameraManager::dequeueLoop, this);
}

void CameraManager::stopDequeuing(){
    {
        std::lock_guard<std::mutex> lock( mutex );
        dequeuing = false;
    }
    dequeueThread.join();
}

bool CameraManager::keepOnDequeuing()
{
    std::lock_guard<std::mutex> lock( mutex );
    return dequeuing;
}

void *CameraManager::dequeueLoop(){
    while( keepOnDequeuing() ){
        highSpeedCamera->dequeue();
        highSpeedCamera->enqueue();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T14:50:43.157

你的程序死锁因为`join()`会阻塞直到你的线程函数完成；并且它永远不会在那个时候完成，因为它正在有效地执行`while(true)`。

你想`dequeueThread`成为你班级的一员。为什么您希望它仅在 范围内生存`startDequeuing`？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T21:03:03.547

定义`dequeing`为原子布尔值：

```
#include <atomic>
std::atomic_bool dequeing = false; 
```

它比使用互斥锁要快得多，并且可以获得相同的同步。

# css - CSS 布局：fixed-fluid-fixed，保持 200px 网格

> ID：12007947
> 
> 赞同：1
> 
> 时间：2012-08-17T14:44:21.923
> 
> 标签：css, responsive-design, fluid-layout

这是我关于 Stack Overflow 的第一个问题，所以我希望我遵守所有正确的礼仪！我正在尝试创建一个固定流体固定的布局，其中两个侧边栏始终为 200 像素，并且中心内容区域根据屏幕的侧面而变化。我已经让它与以下代码一起使用。

```
#page-container {
    margin: 15px;
}

#content-container {
    margin: 0 200px;
}

#left-sidebar{
    width: 185px;
    margin-top: 15px;
}

#right-sidebar{
    float:right;
    width: 185px;
    margin-top: 15px;
} 
```

我在中心使用同位素砌体布局（在 200 像素的列中工作） - 这就是为什么我希望中心区域是流动的。问题来了：我希望中心区域是流动的，但限制为 200 像素的倍数。因此，在 1024 屏幕上 - 侧边栏为 200 像素，中心为 600，留出 12 像素的边距。或者在 2880 的视网膜显示器上，侧边栏仍为 200 像素，中心为 2400 像素，留出 40 像素的边距。这可能吗？我现在正在网站上工作，所以它可能会在一天中发生变化，但布局应该保持不变：[http ://test.loeuf.com/wp/](http://test.loeuf.com/wp/)

# iphone - Cocos2d 更新泄漏内存

> ID：12007952
> 
> 赞同：0
> 
> 时间：2012-08-17T14:44:39.037
> 
> 标签：iphone, objective-c, memory, memory-leaks, cocos2d-iphone

我有一个奇怪的问题 - 我的应用程序仅在设备上泄漏内存，而不是在模拟器上。如果我在任何地方、任何场景中安排更新方法，它就会泄漏。尽管更新方法为空，但它仍在泄漏，其中除了 NSLog 之外什么都没有。怎么会这样？我什至在第一个似乎没有任何泄漏的场景上安排了更新，并安排了另一个空的并且它正在泄漏或不泄漏但分配了一些东西，结果是一样的 - 消耗的内存量正在增加，我的应用程序是很快就崩溃了。我可以通过使用 Instruments->Memory->Activity Monitor 或借助以下功能来检测泄漏：

```
void report_memory(void) 
{
struct task_basic_info info;
mach_msg_type_number_t size = sizeof(info);
kern_return_t kerr = task_info(mach_task_self(),
                               TASK_BASIC_INFO,
                               (task_info_t)&info,
                               &size);
if( kerr == KERN_SUCCESS ) 
{
    NSLog(@"Memory in use (in bytes): %u", info.resident_size);
} 
else 
{
    NSLog(@"Error with task_info(): %s", mach_error_string(kerr));
}
} 
```

谁能解释我发生了什么事？

# jquery - jQuery 如何获取除第一行之外的所有行 HTML？

> ID：12007956
> 
> 赞同：1
> 
> 时间：2012-08-17T14:44:48.847
> 
> 标签：jquery

我有一个表格，我想在其中获取除第一行之外的所有行的 HTML。

```
<table id="files-table">
     <tbody>
          <tr>
             <th class="text-left">Name</th>
             <th>Type</th>
             <th class="delete-th">Delete</th>
          </tr>
          <tr>
             <td class="text-left"><label class="label-none">a.docx</label></td>
             <td><label class="label-none">Manuscript</label></td>
             <td><input type="checkbox" class="del-cb"></td>
          </tr>
          <tr>
             <td class="text-left"><label class="label-none">test2.doc</label></td>
             <td><label class="label-none">Manuscript</label></td>
             <td><input type="checkbox" class="del-cb"></td>
          </tr>
      </tbody>
</table> 
```

当我使用

```
$('#files-table> tbody > tr').not(':first').html() 
```

我只得到第二行的 HTML，第三行的 HTML 在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:47:11.230

因为`html`方法返回`html`第一个匹配元素的内容。

> 获取匹配元素集中第一个元素的 HTML 内容。

您可以使用该`each()`方法，试试这个：

```
$('#files-table> tbody > tr').not(':first').each(function(){
   console.log($(this).html())
}) 
```

**[小提琴](http://jsfiddle.net/Hs4uB/)**

您可以定义一个变量并存储匹配元素的 html 内容：

```
var html = '';

$('#files-table> tbody > tr:not(":first")').each(function(){
   html += $(this).html()
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:50:12.823

这是因为您没有遍历每个 tr 对象-因此它只会返回第一个对象，即第二个对象`tr`

```
$('#files-table> tbody > tr').not(':first').each(function(){
    console.log($(this).html());
}); 
```

# javascript - 为什么身高不是100%？

> ID：12007959
> 
> 赞同：0
> 
> 时间：2012-08-17T14:45:01.250
> 
> 标签：javascript, html, iframe, bho

我正在开发一个 BHO 来拒绝访问被禁止的 URL。所以当我找到一些目标 URL 时，我只是取消导航并打开一个 iframe 到另一个 denied.html。但是由于某种原因，这个 iframe 的高度不是 100%。它出现在页面的 20% 左右。创建 iframe 的代码是：

```
 if pos('live.com', URL) > 0 then
    begin
      Cancel:= true;
      Document:= IE.Document as IHTMLDocument2;
      Document.body.innerHTML:= '';
      Document.body.style.height:= '100%';
      iFrame:= Document.createElement('iframe');
      iFrame.setAttribute('src', 'denied.html', 0);
      iFrame.setAttribute('position', 'absolute', 0);
      iFrame.style.height:= '100%';
      iFrame.style.width:= '100%';
      iFrame.style.left:= '0px';
      iFrame.style.top:= '0px';
      iFrame.style.border:= '0px';
      (Document.body as IHTMLDomNode).appendChild(iFrame as IHTMLDomNode);
    end; 
```

我正在使用 live.com 进行测试。和行：

```
Document.body.style.height:= '100%'; 
```

是因为我已经在互联网上读到这个问题可能是因为 html 不是 100% 的高度，所以我做了测试但继续不工作。有人对我有解决方案吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:50:24.827

将 html 和 body 都设置为 100%

```
html, body { height : 100% } 
```

# symfony - Symfony2 + Assetic：可以将编译后的 javascript 转储到布局中吗？

> ID：12007960
> 
> 赞同：1
> 
> 时间：2012-08-17T14:45:20.143
> 
> 标签：symfony, assetic

我正在开发一个简单的网站。我想为我的javascript 使用coffeescript，所以我使用Assetic 来编译它。

如何将已编译的 javascript 资产转储到网页本身而不是添加到外部文件的链接？这是一个移动应用程序，所以我想将网络流量保持在最低限度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:43:47.703

里面`{% javascripts %}`你只能使用`asset_url`。扩展不会设置任何其他内容。

# hibernate - 从多个表中获取休眠数据

> ID：12007963
> 
> 赞同：0
> 
> 时间：2012-08-17T14:45:22.560
> 
> 标签：hibernate

我有 3 张桌子。大师，孩子1，孩子2。

Master 与 child1 有一对多的关系。

Master与child2有一对多的关系。

child1 和 child2 之间没有关系。

我想使用休眠在单个查询中从所有 3 个表中检索数据。

```
Table - Master
   id    
   11
   12

Table - child1
   id    deposited_date      Master_child1_reltion_key
   2     2012-10-10                   11
   3     2012-10-10                   11
   4     2012-10-10                   11
   5     2011-01-01                   12
   6     2005-02-20                   13

Table - child2   
   id    phoneNo      phone_type        master_child2_relation_key
   15    1111111      personal              11
   16    2222222      office                11 
   17    3333333      home                  11 
   18    1010100      personal              12 
```

在表 child2 中，Master 表可以有 none、1、2 或 3 条记录。

我想从所有 3 个表中检索值。喜欢

```
 id     deposited_date    phoneno1     phoneno2     phoneno3
  11       2012-10-10      1111111      2222222       3333333
  12       2011-01-01      1010100
  13       2005-02-20 
```

是否可以在休眠中使用单个查询来检索数据，还是需要使用多个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:20:26.553

`Select master from master master left join fetch master.child1 left join fetch master.child2`

这会将 master 作为根，并带有两个填充的子列表？

至于`id=13`我不明白你怎么有一个`FK`不存在的问题`master`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T06:22:27.970

您可以使用 Criteria 从所有 3 个表中获取数据，如下所示：

```
Criteria crit = session.createCriteria(Master.class);
crit.setFetchMode("child1", FetchMode.JOIN);
crit.setFetchMode("child2", FetchMode.JOIN);
crit.setResultTransformer(criteria.DISTINCT_ROOT_ENTITY);
List<Master> masters = crit.list(); 
```

这里的**masters**将是 Master 与关联 child1 和 child2 实体的列表。

# javascript - 拖动和调整 CSS 转换元素的大小

> ID：12007971
> 
> 赞同：46
> 
> 时间：2012-08-17T14:45:37.787
> 
> 标签：javascript, jquery, css, transform

例如，如果我们 `-vendor-transform: rotate(40deg)`在一个 rectangle 上设置一个 css 属性`<div>`，所有突然的拖动和调整大小变得非常奇怪和有缺陷。

这是一个简单的 jQueryUI 示例：http: [//jsfiddle.net/Ja4dY/1/](http://jsfiddle.net/Ja4dY/1/)

您会注意到，如果您在变换时拖动或调整该矩形的大小，它会向上或向下跳跃，并且光标不会留在正确的位置。在我的真实代码中，我使用自定义代码来调整大小和拖动，但是我遇到了同样的问题。

好吧，“问题”当然是元素的方向会改变。所以左可以是右，上到下，中间有一些东西，Javascript代码仍然处理每个方向，因为它不会被*转换*。

所以，问题是：**我们如何补偿*变换*/*旋转*的元素？**

任何好的资源/书籍/博客也非常受欢迎。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-18T00:27:16.533

您可以使用 getComputedStyle() 获取应用于元素的当前变换矩阵。您可以使用它将当前鼠标位置转换为其在转换空间中的位置，并查看单击/拖动事件是否在元素边界和/或角内。很好的资源：

[http://www.useragentman.com/blog/2011/01/07/css3-matrix-transform-for-the-mathematically-challenged/](http://www.useragentman.com/blog/2011/01/07/css3-matrix-transform-for-the-mathematically-challenged/)

[http://www.eleqtriq.com/2010/05/css-3d-matrix-transformations/](http://www.eleqtriq.com/2010/05/css-3d-matrix-transformations/)

顺便说一句，正如您所经历的，这对代码来说并非易事。我们必须为 Sencha Animator 做这件事，它是一头野兽。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-20T20:40:37.737

问题是使元素可拖动的函数，无论是否使用 jQuery UI，都严重依赖于原生`getBoundingClientRect()`函数来确定元素的位置等。

应用 CSS3 变换（如旋转）时， jQuery UI 中使用的`getBoundingClientRect()`jQuery 函数的值或相等的`offset()`函数不再按预期工作，并且鼠标指针的位置变得混乱，因为元素的大小在旋转后突然错误.

要修复它，您需要添加某种帮助函数来重新计算值，并且有一个猴子补丁可用于此，它适用于 jQuery UI 的可拖动。

很难说如何使相同的补丁适用于自定义代码，但您可能必须以某种方式将其集成到您的自定义函数中，并且您需要进行一些编码，而且更难想出一些作为自定义代码开箱即用的辅助函数的东西没有见过，并且请注意，它涉及到进行这些计算，请参见下面的代码：

```
function monkeyPatch_mouseStart() {
     var oldFn = $.ui.draggable.prototype._mouseStart ;
     $.ui.draggable.prototype._mouseStart = function(event) {

            var o = this.options;

           function getViewOffset(node) {
              var x = 0, y = 0, win = node.ownerDocument.defaultView || window;
              if (node) addOffset(node);
              return { left: x, top: y };

              function getStyle(node) {
                return node.currentStyle || // IE
                       win.getComputedStyle(node, '');
              }

              function addOffset(node) {
                var p = node.offsetParent, style, X, Y;
                x += parseInt(node.offsetLeft, 10) || 0;
                y += parseInt(node.offsetTop, 10) || 0;

                if (p) {
                  x -= parseInt(p.scrollLeft, 10) || 0;
                  y -= parseInt(p.scrollTop, 10) || 0;

                  if (p.nodeType == 1) {
                    var parentStyle = getStyle(p)
                      , localName   = p.localName
                      , parent      = node.parentNode;
                    if (parentStyle.position != 'static') {
                      x += parseInt(parentStyle.borderLeftWidth, 10) || 0;
                      y += parseInt(parentStyle.borderTopWidth, 10) || 0;

                      if (localName == 'TABLE') {
                        x += parseInt(parentStyle.paddingLeft, 10) || 0;
                        y += parseInt(parentStyle.paddingTop, 10) || 0;
                      }
                      else if (localName == 'BODY') {
                        style = getStyle(node);
                        x += parseInt(style.marginLeft, 10) || 0;
                        y += parseInt(style.marginTop, 10) || 0;
                      }
                    }
                    else if (localName == 'BODY') {
                      x += parseInt(parentStyle.borderLeftWidth, 10) || 0;
                      y += parseInt(parentStyle.borderTopWidth, 10) || 0;
                    }

                    while (p != parent) {
                      x -= parseInt(parent.scrollLeft, 10) || 0;
                      y -= parseInt(parent.scrollTop, 10) || 0;
                      parent = parent.parentNode;
                    }
                    addOffset(p);
                  }
                }
                else {
                  if (node.localName == 'BODY') {
                    style = getStyle(node);
                    x += parseInt(style.borderLeftWidth, 10) || 0;
                    y += parseInt(style.borderTopWidth, 10) || 0;

                    var htmlStyle = getStyle(node.parentNode);
                    x -= parseInt(htmlStyle.paddingLeft, 10) || 0;
                    y -= parseInt(htmlStyle.paddingTop, 10) || 0;
                  }

                  if ((X = node.scrollLeft)) x += parseInt(X, 10) || 0;
                  if ((Y = node.scrollTop))  y += parseInt(Y, 10) || 0;
                }
              }
            }

                this.helper = this._createHelper(event);
                this._cacheHelperProportions();

                if($.ui.ddmanager)
                    $.ui.ddmanager.current = this;

                this._cacheMargins();

                this.cssPosition = this.helper.css("position");
                this.scrollParent = this.helper.scrollParent();

            this.offset = this.positionAbs = getViewOffset(this.element[0]);
                this.offset = {
                    top: this.offset.top - this.margins.top,
                    left: this.offset.left - this.margins.left
                };

                $.extend(this.offset, {
                    click: {
                        left: event.pageX - this.offset.left,
                        top: event.pageY - this.offset.top
                    },
                    parent: this._getParentOffset(),
                    relative: this._getRelativeOffset()
                });

                this.originalPosition = this.position = this._generatePosition(event);
                this.originalPageX = event.pageX;
                this.originalPageY = event.pageY;

                (o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));

                if(o.containment)
                    this._setContainment();

                if(this._trigger("start", event) === false) {
                    this._clear();
                    return false;
                }

                this._cacheHelperProportions();

                if ($.ui.ddmanager && !o.dropBehaviour)
                    $.ui.ddmanager.prepareOffsets(this, event);

                this.helper.addClass("ui-draggable-dragging");
                this._mouseDrag(event, true);

                if ( $.ui.ddmanager ) $.ui.ddmanager.dragStart(this, event);
                return true;
     };
 }
monkeyPatch_mouseStart(); 
```

这是一个[**FIDDLE**](http://jsfiddle.net/Ja4dY/111/)，显示它与 jQuery UI 的可拖动和可调整大小按预期工作！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-20T07:12:07.887

我找到了这个......这是一个工作示例加上信息、演示和下载链接。

[jquery-ui-rotation-using-css-transform](http://vremenno.net/js/jquery-ui-rotation-using-css-transform/) -> [live-demo](http://vremenno.net/examples/jquery-ui-rotation/)

他使用他自己的图书馆，但如果你对这个主题感兴趣，你可以阅读并了解他是如何获得它的。

欢呼，祝你好运。

转基因-

顺便说一句，网络是俄语的，但你可以用[谷歌翻译](http://translate.google.es/translate?sl=auto&tl=en&js=n&prev=_t&hl=es&ie=UTF-8&layout=2&eotf=1&u=http://vremenno.net/js/jquery-ui-rotation-using-css-transform/&act=url)来管理 ;-)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-24T00:00:52.390

它不是 jQuery 中的错误。只是不支持。如果您检查 jQuery UI 源代码，您会发现它不使用转换矩阵来计算转换后的对象和页面之间的差异。

您的示例以及可能每个 jQ UI 拖动实现都因 JQ UI 源代码中的 2 个方法（大约 314 行 jquery.ui.draggable.js 文件 v1.8.23 ）而受到此问题的影响。计算的偏移量与偏移量的变化无关，因为旋转是在元素中心完成的。

你必须计算出什么是变化。这是解决方法，快速而肮脏。这个想法是检查转换元素的边界框有什么不同。

在此处查看示例[http://jsfiddle.net/mjaric/9Nqrh/](http://jsfiddle.net/mjaric/9Nqrh/)

忽略前两次旋转的部分，它们只是为了最小化代码行。第三涉及计算差异的坐标系转换。执行平移后，它将向左和向上偏移（注意它在过滤器中首先）。

如果您想避免前两个旋转过滤器，您可以使用 2D 旋转公式编写代码：

x' = x cos f - y sin f

y' = y cos f + x sin f

其中 f 是旋转角度，但它不是那么简单，还包含更多代码行，您必须计算原始边界框的对角线角度，因为您需要 x 和 y 坐标与 x 进行比较的左上角的初始角度轴（正部分）。然后计算 xx' 和 yy' 的变化。但我预测一些与变化迹象有关的问题，编码/调试将需要比我现在更多的时间。抱歉，但我相信您在阅读这篇文章后可以弄清楚该怎么做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T15:08:31.807

如果我们覆盖 cursorAt 看起来会更好：

```
$("#foo").mousedown(function (e) { 
    var x = e.pageX - this.offsetLeft;
    var y = e.pageY - this.offsetTop;
    console.log(x);
    $("#foo").draggable("option", "cursorAt", {left: x, top:y});
}); 
```

更新小提琴：http: [//jsfiddle.net/johnkoer/Ja4dY/8/](http://jsfiddle.net/johnkoer/Ja4dY/8/)

​</p>

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T09:25:58.973

你说你对 JQuery 解决方案不感兴趣，

*   一种解决方案是；

    我建议您编写自己的拖动和调整大小功能。您可以处理旋转对象的大小调整和拖动，以将其顶部和左侧添加该度数的正弦和余弦。

*   另一种解决方案是；

    您可以使用 Raphael JS 等库来创建对象以进行变换、拖动和调整大小。Raphael JS 使用 svg！

    [有关 Raphael JS 的更多信息](http://raphaeljs.com/)

*   另一个解决方案是；

    如果不想使用 Raphael JS 之类的库，可以直接使用 SVG 和 JQuery

    [有关 SVG 的更多信息](http://www.w3schools.com/svg/svg_reference.asp)

现在不能写更多细节，我明天扩展这个解决方案。

现在希望这些帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-23T17:09:00.043

事实上，这似乎是 jQuery 中的一个错误。`div`一个简单的解决方法是：用一个可调整大小的容器包围`div`。将 设置`.draggable()`为外部`div`和`.resizable()`内部`div`。这似乎在 Ubuntu 上运行的 Chromium 中运行良好。[见小提琴](http://jsfiddle.net/bCUVp/1/)。

我已经为外部着色`div`，让您了解引擎盖下发生的事情。

# c# - 多项目应用，提供应用之间的发送信息

> ID：12007973
> 
> 赞同：0
> 
> 时间：2012-08-17T14:45:43.393
> 
> 标签：c#, .net-2.0, messaging

我正在编写一个基于服务的应用程序，以及其中的一个 UI 应用程序。我正在使用事件日志来记录我的错误，但其中一些错误很严重，用户应该注意。

我需要检查 UI 应用程序（Windows 应用程序项目）是否可用，并且正在运行......如果它正在运行，则通过基于服务的应用程序（Windows 服务项目）将错误直接发送到 UI。

现在，该怎么办？我应该采取两个步骤，首先检查 UI 是否正在运行，然后将诸如类实例或字符串或二进制数据（例如使用序列化）之类的信息发送到 UI，然后 UI 接收它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:49:07.050

我认为您的两个应用程序可以使用该`Socket`机制进行交互。

并检查“正在运行”位： [检查我的 Windows 应用程序是否正在运行](https://stackoverflow.com/questions/4722198/checking-if-windows-application-is-running)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:57:04.983

如果您不介意在您的项目中添加一个新的 dll，我建议您查看[log4net](http://logging.apache.org/log4net/)。有一个用于远程处理的附加程序，[RemotingAppender](http://logging.apache.org/log4net/release/sdk/log4net.Appender.RemotingAppender.html)，非常适合您的需要。您只需要找到一些关于如何在您的 UI 应用程序中实现“接收器”的示例。作为一个额外的好处，您可以使用相同的库附加到 EventLog 中，或附加到文件等中。

# cross-browser - Mozilla 插件，每次更新 Gecko SDK 时我都必须重新编译吗？

> ID：12007977
> 
> 赞同：0
> 
> 时间：2012-08-17T14:46:06.693
> 
> 标签：cross-browser, cross-platform, mozilla, npapi, gecko

我即将开始为我公司的主要产品线开发 Mozilla 插件。我的印象是我可以使用 Gecko SDK 构建，比如两个主要版本之前，这将涵盖人们合理使用的任何浏览器。我还假设这也将涵盖 Chrome 和 Opera（事实检查某人？）。

但是，我只是在阅读文档，然后发现：

> 对于 2.0 之前的 Gecko 版本，您应该为您希望定位的 Mozilla 的最早版本选择 Gecko SDK 版本。对于 Gecko 2.0 及更高版本，您必须为每个版本重新编译您的组件，因为不再支持跨版本兼容性。

有人请告诉我这并不意味着我认为它意味着什么。这是否意味着我将不得不无限期地为每个 Gecko 版本重新编译我的插件——即使在部署之后？Mozilla 的伟大团队似乎不会对我们造成这种影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T23:09:25.333

Gecko SDK 至少有两个非常不同的用途。引用[文档](https://developer.mozilla.org/en-US/docs/Gecko_SDK)：

> Gecko SDK，也称为 XULRunner SDK，是一组用于开发 XPCOM 组件的 XPIDL 文件、头文件和工具，然后可以使用 JavaScript 从 XUL 访问这些组件。
> 
> ...
> 
> Gecko SDK 包含所有必要的工具和头文件，用于制作可编写脚本的 NPAPI 插件，包括 xpidl 编译器/链接器和最新的 npapi.h。

您从本页引用的那句话适用于 SDK 的主要目的：构建可供 Firefox 扩展使用的原生 XPCOM 组件。这些XPCOM组件可以访问浏览器的内部接口，这就带来了接口稳定性的问题。从 Gecko 2.0 (Firefox 4) 开始，这个问题得到了解决，XPCOM 组件只能与一个 Firefox 版本一起使用。要使用不同的 Firefox 版本，需要使用更新版本的 Gecko SDK 重新编译。

文档并没有真正说清楚，但所有这些都不适用于仅通过固定接口与浏览器通信的 NPAPI 插件。我不确定编译 NPAPI 插件还需要多少 Gecko SDK，似乎它只是`npapi.h`和其他一些头文件。该文件并不[经常更改](http://hg.mozilla.org/mozilla-central/filelog/tip/dom/plugins/base/npapi.h)，更改主要限于常量。因此，针对较旧的 SDK 版本编译插件没有问题 - 唯一的副作用是您可能无法使用新的 NPAPI 功能。

也就是说，您应该能够使用[NPAPI SDK](http://code.google.com/p/npapi-sdk/)而不是 Gecko SDK。它的下载量要小得多，并且专门用于创建 NPAPI 插件。Gecko SDK 中的文件本质上是从 NPAPI SDK 复制的（请注意文件历史记录中的“同步到 npapi-sdk rNN”更改）。

# ios - UIlabel 使用大量内存和大量文本

> ID：12007978
> 
> 赞同：1
> 
> 时间：2012-08-17T14:46:18.287
> 
> 标签：ios, uitableview, uilabel

我有 UITable 视图，在合适的单元格中，我使用自己的标签和非常长的文本。结果这个 uilabel 花费了大约 100 mb。（在这种情况下 - 内存警告然后崩溃）。我该如何解决？提前致谢。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    UILabel *message;
    CGSize textSize;
    CGSize fullSize = CGSizeMake(300, 100000);
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) 
{
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    message = [[UILabel alloc] init];
    message.frame = CGRectMake(10, 30, 100, 20);
    message.font = [UIFont systemFontOfSize:12.0f];
    message.textAlignment = UITextAlignmentLeft;
    message.textColor = [UIColor whiteColor];
    message.tag = 103;
    message.numberOfLines = 100000;
    message.backgroundColor = [UIColor clearColor];
    [cell.contentView addSubview:message];
    [message release];
}
    else
{
    message = (UILabel *)[cell.contentView viewWithTag:103];
}
NSData *messageData = [[grandData objectAtIndex:indexPath.row] objectForKey:@"content"];
NSString *tempContent = [[NSString alloc] initWithData:messageData encoding:NSUTF8StringEncoding];
message.text = tempContent;   // text about 10000 symbols in length
[tempContent release];
   textSize = [message.text sizeWithFont:[UIFont systemFontOfSize:12] constrainedToSize:fullSize lineBreakMode:UILineBreakModeWordWrap];
message.frame = CGRectMake(10, 30, textSize.width, textSize.height + 6);

return cell;

} 
```

我使用消息标签（不是 cell.textLabel），因为有一些标签显示其他信息（我削减了多余的代码）。单元格的高度会根据文本的数量动态变化

```
 -(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:03:32.303

您正在泄漏内存。

创建时：

```
NSString *tempContent = [[NSString alloc] initWithData:messageData encoding:NSUTF8StringEncoding]; 
```

之后你不会释放`tempContent`。

您应该将代码更改为以下内容：

```
NSData *messageData = [[grandData objectAtIndex:indexPath.row]
                       objectForKey:@"content"];
NSString *tempContent = [[NSString alloc] initWithData:messageData   
                                              encoding:NSUTF8StringEncoding];
message.text = tempContent;   // text about 10000 symbols in length
[tempContent release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-15T10:02:27.290

尽管我使用 dequeueReusableCell，但我对 Swift 3 也有同样的问题

```
class StepTableViewCell: UITableViewCell {

    @IBOutlet weak var stepImageView: UIImageView!
    @IBOutlet weak var stepNumberLabel: UILabel!
    @IBOutlet weak var contentLabel: UILabel!
 }

    var fontSize = CGFloat(14)
  func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    customCell = tableView.dequeueReusableCell(withIdentifier: "StepCellWithoutImage", for: indexPath) as!  StepTableViewCell

                    customCell.stepNumberLabel.text = "\(cellInfo.index + 1)"
                    customCell.contentLabel.font =  UIFont.systemFont(ofSize: fontSize)
                    customCell.contentLabel.text = step.content
                    debugPrint(step.content?.count)

                    return  customCell

} 
```

问题实际上是当它尝试增加字体并重新加载 tableView

# css - 2列下拉菜单有问题

> ID：12007979
> 
> 赞同：0
> 
> 时间：2012-08-17T14:46:21.407
> 
> 标签：css, drop-down-menu, navigation

我无法让我的导航下拉列表排成两列。我创建了代码并将它们设置为菜单内的两个单独的 div，但它们似乎相互重叠，我无法让它们正确排列。这只是一个快速测试示例，试图找出我的问题。

**CSS**

```
#content{
background-color:#999;
width:1500px;
height:1500px;
}

#menu{
list style:none;
width:600px;
margin:30px auto 0px auto;
height: 25px;
padding:0px 20px 0px 20px;
}

#menu li{
float:left;
display:block;
text-align:left;
position:relative;
padding:4px 10px 4px 10px;
margin-right:7px;
margin-top:7px;
border:none;
}

#menu li a{
color:#000;
display:block;
outline:0;
text-decoration:none;
}

#menu li:hover .dropdown_2column{
left:-1px;
top:auto;
}

.dropdown_2column{
position:absolute;
width:400px;
left:-999em;
margin:4px auto;
text-align:left;
padding:5px 2px 10px 2px;
border: none;
/*background color*/
background:#888b81;
opacity:.5; /* FX/Opera/Safari/Chrome */
    -ms-filter:"alpha(opacity=50)"; /* IE8 */
    filter:alpha(opacity=50); /* IE6/IE7 */
}

.col_2{
display:inline;
float:left;
position:relative;
margin-left:2px;
margin-right:2px;
} 
```

**HTML**

```
<body>
<div id="content">
<ul id="menu">
<li><a href="#">about us</a></li>
<li><a href="#">newsletters</a></li>
<li><a href="#">projects</a>
 <div class="dropdown_2column">
   <ul class="col_2">
    <li><a href="#">Academic Review Follow-up</a></li>
    <li><a href="#">Assistive Technology</a></li>
    <li><a href="#">Autism</a></li>
    <li><a href="#">Behavior & Effective School-wide Discipline</a></li>
    <li><a href="#">Early Childhood</a></li>
    <li><a href="#">The Family Involvement Network (FIN)</a></li>
    <li><a href="#">I’m Determined</a></li>
    </ul>
  </div>
  <div class="dropdown_2column">  
    <ul class="col_2">
    <li><a href="#">Instructional Consultation Teams (ICT)</a></li>
    <li><a href="#">Intellectual Disabilities</a></li>
    <li><a href="#">Literary & Academic Instruction for Special Educators</a></li>
    <li><a href="#">Literacy for Middle and High Schools: Strategic Instruction Model    (SIM) and Content Literacy Continuum (CLC)</a></li>
    <li><a href="#">Secondary Transition</a></li>
    <li><a href="#">Standards-based Individualized Education Program (SB-IEP)</a></li>
    <li><a href="#">Standards of Learning (SOL) Enhanced Scope and Sequence (ESS)</a>                           </li>
    </ul>
  </div>
 </li>   
<li><a href="#">staff</a></li>
<li><a href="#">kihd library</a></li>
<li><a href="#">contact us</a></li>
</ul>
</div> 
```

# c# - 引发事件

> ID：12007982
> 
> 赞同：0
> 
> 时间：2012-08-17T14:46:25.593
> 
> 标签：c#

我有一个带有两个 RichTextBox 的表单，我想在一个中引发一个事件以触发表单上的一个事件，该事件会更新另一个 rtb 中的某些内容。

我必须在哪里定义 EventArgs 扩展类？我的代表是什么以及必须在哪里？这是从被引发的事件中调用的函数吗？这三个类（rtb1、rtb2、form1）是否需要在同一个命名空间中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:49:36.177

除了定义自己的委托之外，您几乎总是可以使用泛型`EventArgs`类，或者`Action`该类作为您的事件的委托。使用其中之一时，您根本不需要定义任何委托，它们已经由库定义。

委托不是被调用的函数，它只是定义事件调用的所有方法的签名。

这三个类不需要在同一个命名空间中，不。事实上，作为一般规则，几乎没有任何情况（无论如何我都想不到）会迫使您在同一个命名空间中拥有类以供它们执行某些操作。

# linux - linux shell脚本删除数字

> ID：12007985
> 
> 赞同：0
> 
> 时间：2012-08-17T14:46:29.460
> 
> 标签：linux, bash, shell

我想重命名 200 个文件实际上每个文件都这样命名：

```
00001-abcd-efgg?g.............
00002-xcvb-vbnv?b.............
00003-cbvc-hugh?j............. 
```

现在我想像这样重命名所有这些文件：

```
001
002
003
... 
```

所以我需要删除前 2 位数字，并删除第五位数字之后的所有内容。警告：我要重命名的每个文件中都有一个“？”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:51:58.970

```
for f in *
do
   mv "$f" "${f:2:3}"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:53:03.940

使用`rename`：

```
rename -nv 's,.*(\d{3}).*,$1,' * 
```

输出：

```
00001-abcd-efgg?g............. renamed as 001
00002-xcvb-vbnv?b............. renamed as 002
00003-cbvc-hugh?j............. renamed as 003 
```

`n`当您对输出满意时删除。

# sql - 在 postgresql 9.1.3 中执行类型转换函数与在 postgresql 8.2.22 中不同。串联工作不正常

> ID：12007988
> 
> 赞同：5
> 
> 时间：2012-08-17T14:46:35.280
> 
> 标签：sql, jdbc, casting, postgresql-9.1

我使用的是postgresql 8.2.22版本，然后我升级到postgresql 9.1.3，升级成功完成。

但是现在一些演员表的工作方式与以前不同！

**在 Postgres 8.2.22**

我运行这两个查询，它们都正常工作：

```
POSTGRES8222=# select TO_NUMBER('12345678',9999999999.99);

to_number
=========   
 12345678
(1 row)

POSTGRES8222=# select a ||'$'|| b from test;
 ?column?
----------
 1$abcdef
 2$ghijkl
 3$3456
(3 rows) 
```

**升级到 Postgres 9.1.3 后**

我运行相同的查询，现在它们抛出错误：

```
select TO_NUMBER('12345678',9999999999.99);

ERROR:  function to_number(unknown, numeric) does not exist
LINE 1: select TO_NUMBER('12345678',9999999999.99);
               ^
HINT:  No function matches the given name and argument types. You might 
need to add explicit type casts.

EXCEPTION
org.postgresql.util.PSQLException: ERROR: function to_number(numeric, numeric) 
does not exist

Hint: No function matches the given name and argument types. You might need 
to add explicit type casts.

Position: 150

select a ||'$'|| b from test;
ERROR:  operator is not unique: numeric || unknown
LINE 1: select a ||'$'|| b from test;
                 ^
HINT:  Could not choose a best candidate operator. You might need to 
add explicit type casts.

********** Error **********
ERROR: operator is not unique: numeric || unknown
SQL state: 42725
Hint: Could not choose a best candidate operator. You might need to  
add explicit type casts.
Character: 10 
```

为什么在 postgresql 中的转换不像以前那样工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T20:28:11.373

从 PostgreSQL 8.3 开始，自动转换的数量减少了。这有两个原因改变：

1.  引入了许多新的高性能类型，而自动转换阻止了这些类型以“一流”类型可以使用的方式使用文字。缩小解析器试图猜测数据类型的情况允许用户可以插入的新类型以更自然的方式使用。

2.  许多错误报告结果表明人们在没有意识到自动转换正在发生时意外获得了自动转换的“好处”，从而很难找到他们的应用程序编码错误。在 8.3 版本发布后，有大致相同数量的人发帖说该更改发现了他们自己代码中隐藏的错误，因为有人抱怨他们的代码现在需要在以前不需要的地方进行强制转换。

您似乎试图通过添加隐式类型转换来“解决”这个“问题”。这是一个雷区；我不推荐它。您将限制您可以安全使用的功能，并且您将没有其他人没有的古怪小错误，并且没有人可以轻松地帮助您。最好修复您的代码，不要假设这么多隐式转换。

可能让您感到困惑的一件事是，在 PostgreSQL 中，`'1.2'`它*不是*字符串文字。它是一个*未知*类型的文字：

```
test=# 选择 pg_typeof('1.2');
 pg_typeof
------------
 未知
(1 行)

```

PostgreSQL 尽可能地推迟解析字面量的类型，这对我描述的所有新数据类型都很有效。作为最后的手段，如果到了必须解析类型并且没有其他线索的时候，它会将其视为 type `text`。

```
test=# select pg_typeof(case when true then '1.2' else null end);
 pg_typeof
------------
 文本
(1 行)

test=# select pg_typeof(case when true then '1.2' else 2.3 end);
 pg_typeof
------------
 数字
(1 行)

```

问题 2，“aftertypecast”，失败了，因为你添加了所有隐式类型转换，有多个可能的运算符 || 可以根据它执行的隐式类型转换来选择*，*并且没有原则性的方法可以在它们之间进行选择。如果将该行更改为以下内容，它应该会再次起作用：

```
select a || '$'::text || b from test; 
```

我认为不添加那些隐式强制转换并从以下位置更改第一个问题代码会更干净、更安全：

```
select TO_NUMBER('12345678',9999999999.99); 
```

到：

```
select TO_NUMBER('12345678', '9999999999.99'); 
```

毕竟，第二个参数是*格式字符串*，而不是数字。如果要执行以下操作，则不能省略引用：

```
test=# select to_number('12,454.8-', '99G999D9S');
 to_number
------------
  -12454.8
(1 行)

```

# c - 返回指向指向字符串的结构的指针

> ID：12007989
> 
> 赞同：1
> 
> 时间：2012-08-17T14:46:39.233
> 
> 标签：c

这是在这种情况下创建字符串的正确方法吗？

```
Foo* create()
{
  Foo *foo = malloc(sizeof(Foo));
  foo->name = strdup("Foo");
  return foo;
} 
```

稍后我将不得不自己删除 foo 和 foo->name。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:59:56.110

~~对象分配并不完全正确（您应该转换为`Foo*`而不是转换为`mystruct`）。~~字符串分配是正确的，但可能不是您想要的。

该`strdup()`函数实际上需要`malloc()`您，并且仅当您想稍后修改字符串时才需要此构造（并且不要增加其长度！！！）。处理对象时不要忘记调用`free()`字符串。`Foo`

如果`foo->name`是用于只读目的，则声明`foo->name`为 a`const char *`并仅写入`foo->name = "Foo";`以对其进行初始化。

编辑：还要注意`strdup()`可能会返回`NULL`，你应该检查一下！如果是的话，我会`assert()`选择它，因为内存不足的错误是非常不可恢复的。不要试图处理此类错误。这对于分配`Foo`对象也很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:48:03.487

这是正确的，但您不必强制转换`malloc`（而且您不应该）的返回指针。

# java - 如何在 Java 中安全地擦除内存中的机密数据，并保证它不会被“优化”？

> ID：12007991
> 
> 赞同：8
> 
> 时间：2012-08-17T14:46:47.980
> 
> 标签：java, security

```
String secret="foo";
WhatILookFor.securelyWipe(secret); 
```

而且我需要知道它不会被java优化器删除。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T14:53:50.303

字符串不能被“擦除”。它是不可变的，缺少一些非常肮脏和危险的技巧，你无法改变它。

所以最安全的解决方案是首先不要将数据放入字符串中。改用 StringBuilder 或字符数组，或其他一些不可变的表示。（然后在完成后清除它。）

* * *

作为记录，有几种方法可以更改字符串的后备数组的内容。例如，您可以使用反射来找出对 String 的支持数组的引用，并覆盖其内容。但是，这涉及到执行 JLS 状态未指定行为的事情，因此您不能保证优化器不会做意外的事情。

* * *

我个人对此的看法是，您最好锁定您的应用程序平台，以便未经授权的人首先无法访问内存/内存转储。毕竟，如果平台没有得到适当的保护，“坏人”可能会在你删除之前获得字符串内容。对于少量的安全关键状态，可能需要这样的步骤，但是如果您有很多“机密”信息要处理，那么无法使用正常的字符串和字符串处理将是一个主要的麻烦。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T14:52:58.423

您将需要直接访问内存。

您真的无法使用 String 执行此操作，因为您无法可靠地访问该字符串，并且不知道它是否已在某处实习，或者是否创建了您不知道的对象。

如果你真的需要这个，你必须做类似的事情

```
public class SecureString implements CharSequence {
    char[] data;
    public void wipe() {
       for(int i = 0; i < data.length; i++) data[i] = '.'; // random char
    }
} 
```

话虽如此，如果您担心数据仍在内存中，您必须意识到，如果它曾经在内存中，那么攻击者可能已经得到了它。您真正保护自己免受的唯一事情是核心转储被刷新到日志文件中。

关于优化器，我非常怀疑它会优化操作。如果你真的需要它，你可以这样做：

```
public int wipe() {
    // wipe the array to a random value
    java.util.Arrays.fill(data, (char)(rand.nextInt(60000));
    // compute hash to force optimizer to do the wipe
    int hash = 0;
    for(int i = 0; i < data.length; i++) {
        hash = hash * 31 + (int)data[i];
    }
    return hash;
} 
```

这将强制编译器进行擦除。它使它的运行时间大约是两倍，但它是一个相当快的操作，并且不会增加复杂性的顺序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T14:52:09.447

使用“不安全”方法将数据存储在堆外。然后，您可以在完成后将其归零，并确保它不会被 JVM 推送到堆周围。

这是一篇关于不安全的好帖子：

[http://highlyscalable.wordpress.com/2012/02/02/direct-memory-access-in-java/](http://highlyscalable.wordpress.com/2012/02/02/direct-memory-access-in-java/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T14:57:44.797

如果您要使用字符串，那么我认为您担心它会出现在内存转储中。我建议`String.replace()`在关键字符上使用，以便在运行时使用 String 时，它会发生变化，然后在使用后超出范围，并且不会在内存转储中正确显示。但是，我强烈建议您不要将字符串用于敏感数据。

# c# - 使用数据库中的数据绘制图形

> ID：12007992
> 
> 赞同：0
> 
> 时间：2012-08-17T14:46:48.737
> 
> 标签：c#, mysql

我有存储在 MYSQL 中的数据库，我想从一个与我相关的表中提取值并将它们绘制在图表上。我想在c#中使用图表控件（可以在数据下的工具箱中找到）。我知道我必须首先从表中读取数据，但我必须在图表上绘制该数据。

例如我有这样的表：

列：id、名称、值、时间戳。

我有另一个表，它定义了特定变量名称的偏移量。我想使用该控制图绘制特定名称的值。

我开始编码，但我从未使用过图表控件，也不知道如何将数据库与它绑定（使用列表、数据集或数据表？）。这是代码：

```
 OdbcDataAdapter dAdapter1 = new OdbcDataAdapter(query1, connection);
            DataTable dTable1 = new DataTable();
            dAdapter1.Fill(dTable1);

            OdbcDataAdapter dAdapter2 = new OdbcDataAdapter(query2, connection);
            DataTable dTable2 = new DataTable();
            dAdapter2.Fill(dTable2);

            chartVariable.DataSource = bSource1;

            chartVariable.Titles.Add("Varibale Graph");
            int index = dTable1.Columns[2];
            for (int i = 0; i < dTable1.Rows.Count; i++)
            {
                chartVariable.Series[dTable1.Columns[0].ColumnName].Points[index];
            } 
```

# jquery-ui - jQuery-UI 切换速度似乎总是一样的

> ID：12007994
> 
> 赞同：0
> 
> 时间：2012-08-17T14:46:58.023
> 
> 标签：jquery-ui

我一直在尝试改变切换效果的速度。我已经检查了文档，但我似乎无法找出我做错了什么。我尝试过使用数字（即 3000、300）和文本（即慢、快），但我看不出有什么区别。我正在使用 jQuery 1.7.2 和 jQuery-UI 1.8.18。

这是我的 JavaScript 代码：

```
$(document).ready(function() {
    $('button').click (function () {
        $('.myDiv'). toggle ("bind", "", 3000);
    });
}); 
```

我的 HTML：

```
<div class="myDiv" style="width: 400px; height: 400px; background-color: blue;"> </div>
<button>Toggle</button> 
```

谁能帮我找出我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:49:52.590

持续时间作为第一个参数而`.toggle()`不是第三个参数。

`.toggle( [duration] [, easing] [, callback] )`