# StackOverflow 问答 12432000-12432999

# xaml - 如何在 WinRT 中为页面导航过渡设置动画？

> ID：12432003
> 
> 赞同：3
> 
> 时间：2012-09-14T21:09:25.427
> 
> 标签：xaml, animation, windows-runtime, transition, winrt-xaml

在 WinRT 中，当在 2 个 XAML 页面之间导航时

```
this.Frame.Navigate(typeof(AnotherPage)); 
```

如何淡出第一页并淡入第二页？我记得 Windows Phone 7 有一个在 XAML 中执行此操作的程序集。我怎样才能在 WinRT 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:52:30.770

这应该为页面中的所有元素添加快速淡入效果。它可能足以满足您的需求。

```
<Page>
    <Page.Transitions>
        <TransitionCollection>
            <ContentThemeTransition HorizontalOffset="0" VerticalOffset="0"/>
        </TransitionCollection>
    </Page.Transitions>
....
</Page> 
```

但我建议您保留水平和垂直偏移的默认值，它会模拟 WinRT 中的标准转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T21:32:25.287

您可以使用 ContentThemeTransition 应用内置的过渡效果。有关如何使用它的示例，请参阅[http://code.msdn.microsoft.com/windowsapps/Personality-Animations-3f857919 。](http://code.msdn.microsoft.com/windowsapps/Personality-Animations-3f857919)基本上，在你的 XAML 中是这样的......

```
<Page>
....
<Grid Background="Black">
        <Grid.ChildrenTransitions>
             <TransitionCollection>
                 <ContentThemeTransition/>
             </TransitionCollection>
        </Grid.ChildrenTransitions>
.... 
```

# objective-c - 如何将参数传递给基于 Phonegap 构建的应用程序

> ID：12432004
> 
> 赞同：7
> 
> 时间：2012-09-14T21:09:26.707
> 
> 标签：objective-c, ios, cordova, jquery-mobile

我正在编写一个使用 JQM 和 Phonegap 部署在 iOS 上的应用程序，我需要它通过处理对象“window.location.search”来读取输入参数，就像一个常见网站的 url 参数在 javascript 中所做的那样

在我的情况下，该应用程序将从网站启动，如下所示：

```
<a href="myapp://?arg1=1&arg2=2"> My App </a> 
```

这正在工作，我已经可以调用我的应用程序，我现在需要的是读取参数 arg1、arg2 等。我尝试读取 window.location.search 但没有运气。

我怎样才能做到这一点？我需要编写一些Objective C 代码吗？

任何建议，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T01:29:59.910

使用此链接的内容解决了我的问题：[https ://gist.github.com/859540](https://gist.github.com/859540)

代码是：

Objective-c部分：

在 MainViewController.m 中：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // perform any custom startup stuff you need to ...
        // process your launch options
    NSArray *keyArray = [launchOptions allKeys];
    if ([launchOptions objectForKey:[keyArray objectAtIndex:0]]!=nil) 
    {
               // we store the string, so we can use it later, after the webView loads
        NSURL *url = [launchOptions objectForKey:[keyArray objectAtIndex:0]];
        self.invokeString = [url absoluteString];
        NSLog(@amp;" launchOptions = %@",url); // if you want to see what is happening
    }
    // call super, because it is super important ( 99% of phonegap functionality starts here )
    return [super application:application didFinishLaunchingWithOptions:launchOptions];
}

- (void) webViewDidFinishLoad:(UIWebView*) theWebView 
{
     // only valid if ___PROJECTNAME__-Info.plist specifies a protocol to handle
     if (self.invokeString)
     {
        // this is passed before the deviceready event is fired, so you can access it in js when you receive deviceready
        NSString* jsString = [NSString stringWithFormat:@"var invokeString = \"%@\";", self.invokeString];
        [theWebView stringByEvaluatingJavaScriptFromString:jsString];
     }

     // Black base color for background matches the native apps
     theWebView.backgroundColor = [UIColor blackColor];

    return [super webViewDidFinishLoad:theWebView];
} 
```

在使用 cordova-1.7.0 的 index.html 文件中：

```
function onDeviceReady()
    {
        alert(invokeString);
    } 
```

警报返回：myapp://?arg1=1&arg2=2

只是用来调用它的相同字符串...... :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-26T12:23:44.690

我遇到了同样的问题，这些答案中的所有内容都令人困惑和额外的信息。

通过 2 个简单的步骤了解和解决问题：

1.  **信息丰富（如果您不关心后台发生的情况，可以跳过）：**转到项目的 Clases 文件夹中的 AppDelegate.m 并搜索“handleOpenUrl”，您应该会注意到那里的一些代码，其中包含解释发生了什么的注释。我不知道objective-c，但直观地说，那里的代码会查找window.handleOpenURL 函数并将其称为给它调用的url 的参数（例如'myapp:///?parameter=value'）

2.  **基本上你所要做的就是全局（在窗口对象中）定义函数handleOpenURL**

    ```
    function handleOpenURL (url) {
        alert(url);
    } 
    ```

请注意，这仅在您的应用程序打开时执行

```
<a href="myapp://">..</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:17:59.773

window.location 将是您的 phonegap index.html 文件的位置，而不是用于启动您的应用程序的 URL。

一些网络搜索表明有一个函数称为：

```
function handleOpenUrl(url) {
   alert("opened from url " + url);
} 
```

.. 可能会自动调用 . 不过，我这里没有我的开发机器来测试，对不起！

如果这在 Objective-C 中不起作用，请检查 AppDelegate.m 的 handleOpenUrl 方法，当您的应用程序使用 URL 方案打开时，该方法会被调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T07:20:16.423

您应该在 obj-c 中执行此操作，然后使用插件将其传递给 javascript 代码：首先在 obj-c 中执行此操作，您应该实现

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { 
    NSURL *urlToParse = [launchOptions objectForKey:UIApplicationLaunchOptionsURLKey];
        if (urlToParse) {
            [self application:application handleOpenURL:urlToParse];
        } 
        return YES;
} 
```

然后你可以访问这样的参数：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    if ([[url scheme] isEqualToString:@"myapp"]) {
        //in here you do whatever you need the app to do
        // e.g decode JSON string from base64 to plain text & parse JSON string
    }
 return YES; //if everything went well
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-30T13:41:38.010

```
function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.href);
  if(results == null)
     return "";
  else
     return results[1];
  }
Call this function like var para1 = getParameterByName("para1"); 
on pageshow event in jquery mobile.
$('#page').on('pageshow',function(event){
   var para1 = getParameterByName("para1");
}); 
```

# c# - 文件信息对象

> ID：12432005
> 
> 赞同：0
> 
> 时间：2012-09-14T21:09:28.957
> 
> 标签：c#

如果我`using System.IO;`已经运行了以下命令：

```
 string myPathway = @"R:\Hello.pdf"
    FileInfo x = new FileInfo(myPathway); 
```

有没有一种方法可以重用对象 x 但指向位于“mySecondPathway”的不同文件，还是创建一个新的 FileInfo 对象`y`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:10:55.117

```
FileInfo x = new FileInfo("R:\\Hello.pdf"); // you forgot to escape the backslash
x = new FileInfo("anotherFile.txt"); // just reassign it 
```

请注意，重新分配不会重新使用内存中的实际对象，而是`x`刚才引用的`anotherFile.txt`文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T21:11:39.813

没有办法重用`FileInfo`-object，你需要创建一个新的。`x`不过，您可以重新分配`x = new FileInfo(mySecondPath);`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T21:17:16.357

你不能。您必须创建一个新对象，但可以重用`x`，如`x = new FileInfo(mySecondPath);`

# c# - 显示超过一定数量的所有数组

> ID：12432009
> 
> 赞同：0
> 
> 时间：2012-09-14T21:09:50.537
> 
> 标签：c#, arrays, split

```
 Text = textBox.Text;

    if (Text.StartsWith("!say"))
    {
        string[] CurrentText = Text.Trim().Split(' ');
        label1.Text = CurrentText[1];
        label2.Text = CurrentText[2] += CurrentText[3];
    } 
```

我已经做了很多搜索，这可能很容易，但我找不到任何东西，但我希望将 CurrentText[2] 之后的任何内容放入`label2.Text`，而不仅仅是第二个和第三个，有没有办法做到这一点？另外，我怎样才能保持中间的空格（比如如果我把`"!say Hello Hello World!"`出来的

```
 label1 = Hello 
```

和

```
 label2 = Hello World! 
```

与空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:15:02.723

尝试

```
label2.Text = String.Join(" ", CurrentText.Skip(2).ToArray()); 
```

由于数组索引是从零开始的`CurrentText[0]`，`CurrentText[1]`因此必须跳过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:13:37.343

如果你只需要关心第一个“”，为什么不使用这个：

```
int index = Text.IndexOf(" ");

label1.Text = text.Substring(0, index);
label2.Text = text.Substring(index + 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:17:08.373

文本 = 文本框.文本；

```
if (Text.StartsWith("!say"))
{
    string[] CurrentText = Text.Trim().Split(' ');
    label1.Text = CurrentText[1];
    label2.Text = string.Join(", ", CurrentText.Skip(2).ToArray());
} 
```

这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T21:30:01.710

你是这个意思吗？

```
label2.Text += string.Join(" ", CurrentText, 1, CurrentText.Length-1); 
```

对我来说，在这种情况下，Linq 似乎有点矫枉过正。

# java - 如何在 Java 中为 Blowfish 加密算法添加时间戳？

> ID：12432014
> 
> 赞同：0
> 
> 时间：2012-09-14T21:10:02.437
> 
> 标签：java, encryption, cryptography, timestamp, blowfish

我在 Eclipse 中运行 Java，仅供参考。

我有明文，使用 Blowfish 加密并在另一端解密。我想添加一个时间戳，这样加密的文本每次对于相同的明文都是不同的。

如何将时间戳添加到 Java 中的河豚算法中，以便我可以在另一端解密它？

谢谢你。

这是我的加密代码：

```
import BlowfishJ.*;

public class EncryptBlowFishTest {
/**
 * @param args
 */
public static void main(String[] args) {

    long CBCIV = 0x0x765904567324590L;

    String pwd = "1234567890";
    int pwdLength = password.length();

    // generate key
            byte[] testkey = new byte[5];

            for (int i = 0; i < testkey.length; i++)
                testkey[i] = (byte) (i + 1);

    BlowfishCBC blowfishcbc = new BlowfishCBC(testkey, 0, testkey.length, CBCIV);

    byte[] tempBuffer = pwd.getBytes();

    // align to the next 8 byte border
            byte[] msgBuffer;
            int n = pwdLength & 7;

            if (n != 0) {
                msgBuffer = new byte[(pwdLength & (~7)) + 8];
                System.arraycopy(tempBuffer, 0, msgBuffer, 0, pwdLength);

                for (int i = pwdLength; i < msgBuffer.length; i++)
                    msgBuffer[i] = 0;
            }
            else {
                msgBuffer = new byte[pwdLength];
                System.arraycopy(tempBuffer, 0, msgBuffer, 0, pwdLength);
            }

            byte[] showCBCIV = new byte[BlowfishCBC.BLOCKSIZE];
            blowfishcbc.getCBCIV(showCBCIV, 0);

            blowfishcbc.encrypt(msgBuffer, 0, msgBuffer, 0, msgBuffer.length);

            String encryptedPwd = BinConverter.bytesToBinHex(msgBuffer);

            System.out.println(encryptedPwd);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:11:38.133

将时间戳作为纯文本的第一部分，然后加密所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T21:16:03.290

改为使用随机 IV。只需生成适当长度的随机字节序列并将其用作您的 IV。将未加密的 IV 与您的加密消息一起发送。

**使用随机 IV 是一种标准做法 (PKCS#5)。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T21:21:19.777

与 zmbq 类似，您可以`System.currentTimeMillis()`在加密之前简单地附加到文本。然后在解密时删除长。您可能希望使用分隔符使其更易于删除。

# c++ - 如何使用 Enterprise Architect 或 Rational Software Architect 从源代码创建类图？

> ID：12432016
> 
> 赞同：15
> 
> 时间：2012-09-14T21:10:09.907
> 
> 标签：c++, uml, enterprise-architect

我不精通 UML，但我想基于现有的 C++ 代码创建一个类图。其他 StackOverflow 问题表明，两个程序 - Enterprise Architect 和 Rational Software Architect - 相当擅长“逆向工程”C++ 代码（即，基于现有 C++ 代码创建 UML 类图）。

我已经下载了这两个应用程序的试用版。但是，我无法在理解如何在这些应用程序中创建类图方面取得任何进展。

在 Rational Software Architect 中，我创建了一个 UML 项目，但我在程序中找不到任何方法来选择和反向工程，我现有的 C++ 代码。

在 Enterprise Architect 中，我能够导入我的 C++ 代码，但是所有元素（类）都出现在图中的一条无用的、重叠的对角线上。我尝试了其他设置，例如圆形，但这些设置同样无法阅读，因为图表太大（由于属性和方法占用了大量空间）以至于没有任何平移和缩放有用。我想要隐藏除类名之外的所有内容（即，不显示任何方法或属性），以便所有 20 个类在一个屏幕上方便且清晰地显示。

但是，我无法找到隐藏除类名之外的所有内容的方法。相反，当我发现一个选项（在 Enterprise Architect 中）似乎它可能隐藏除类名之外的所有内容时，由于某种原因，这些元素都在类图中消失了，并且没有重复这些步骤以及删除和重新添加包使类图重新出现。

注意：我的 C++ 代码（至少是我选择导入 Enterprise Architect 的那些文件）只有大约 20 个类。

可悲的是，对这两个程序的文档进行的非常仔细的搜索只提供了一般性 - 据我所知，没有给出关于这两个程序的逆向工程的具体说明。

如果有人能告诉我创建清晰、易于导航的图表的基本步骤，我将不胜感激。仅显示类名的逆向工程（即 C++ 到 UML），因此使用 Enterprise Architect 或 Rational Software Architect 或任何其他工具，可以在一个屏幕上（清晰地）显示大约 20 个类这样做（我建议 EA 和 Rational 只是因为它们已在其他 StackOverflow 答案中突出显示为可用于此目的的最佳程序）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-17T08:23:39.750

这个答案适用于 EA。

您可以递归或不导入单个文件或整个目录。目录导入是迄今为止最常见的情况；单个文件导入不允许您自动创建图表。

当您导入源目录时，您可以选择为每个 UML 包创建图表，或者根本不创建图表。您还可以决定是否为每个源代码目录、命名空间（默认）或文件创建包。

如果您的代码仅包含 20 个类，那么它们很可能位于单个目录和/或命名空间中，因此请使用该选项（“导入源”对话框中的“包结构”）以获得正确数量的图表。

在同一个对话框中，有一个“新建图表选项”按钮，它会打开另一个配置对话框，您可以在其中选择图表是否应包含类的属性和/或操作。您还可以在可见性的基础上做出决定，例如仅显示公共成员。

此对话框仅影响创建时图表中显示的内容。成员仍然被导入，只是没有显示。这听起来像你所追求的。

您可以通过双击任何图表的空白区域或右键单击并选择“属性”来更改任何图表的显示选项。听起来你进入了这个对话框并改变了一些东西，但我真的不知道是什么。您描述的情况，您无法将显示恢复到原来的状态，这不是我在 EA 中遇到过的情况。

也可以通过在图表中右键单击它并选择功能可见性来选择每个类的显示选项。我不建议您在逆向工程图中使用它，我只是为了完整性而提及它。

您描述的布局，所有类都在无意义的对角线中，向我表明该图在创建后没有正确布局。图表创建是一个两步过程；首先将所有类放到上面，然后应用布局。

这很奇怪，因为 EA 会自动布置生成的图表，而我无法找到允许您取消选择此行为的选项。如果这种情况持续存在，请向 Sparx Systems 发送错误报告。您始终可以通过打开图表并从顶层图表菜单中选择布局图表来布置图表。

最后，如果您的类分布在不同的包**和**命名空间中，以便 EA 为它们生成多个图表，您将不得不手动合并它们。为此，请打开两个图表，在一个中选择所有 (Ctrl-A)，复制 (Ctrl-C) 并粘贴 (Ctrl-V) 到另一个，然后再次要求 EA 布局图表。

所以：

1.  在项目浏览器中右键单击一个空包，选择代码工程 - 导入源目录。
2.  在对话框中，选择根目录和源类型。
3.  勾选“为每个包创建逻辑图”并选择最适合您的源结构的包结构。
4.  单击“新建图表选项”并在新对话框中取消选中“显示属性”、“显示操作”和“显示属性方法”（如果适用）。
5.  确定两个对话框。
6.  如果创建了多个图表，请将所有类复制到一个图表中。
7.  如果布局看起来很糟糕，请选择图表 - 布局图表。

希望这可以帮助。

# tcl - 从 C 执行的代码中的 Tcl 命名空间

> ID：12432024
> 
> 赞同：0
> 
> 时间：2012-09-14T21:10:46.053
> 
> 标签：tcl

我有一个 Tcl 代码，它来自一个 C 应用程序，使用：

```
Tcl_Eval(tcl_interp, "source nmsp.tcl") 
```

一切运行良好。但是，不会保留命名空间范围。例如，以下文件：

```
#!/bin/sh

# namespace evaluation
namespace eval bob {
    namespace eval joe {
        proc proc1 {} {}
    }
    proc proc2 {} {
        puts "proc2"
    }
    proc ::proc3 {} {
        puts "proc3"
    }
    proc joe::proc4 {} {
        puts "proc4"
    }
}

puts "Namespace calling [info procs ::bob\::*]" 
```

单独运行时会产生以下输出：

```
Namespace calling ::bob::proc2 
```

但是当从 Tcl_Eval 采购时不会打印任何东西。事实上，proc2 过程可以在没有任何命名空间指定的情况下自行调用。

有谁知道可能是什么原因造成的？我真的很喜欢命名空间提供的封装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:19:24.953

对我来说似乎很好。

我创建了以下 Tcl 扩展来执行您的 Tcl_Eval：

```
#include <tcl.h>

static int
DotestCmd(ClientData clientData, Tcl_Interp *interp,
          int objc, Tcl_Obj *const objv[])
{
    return Tcl_Eval(interp, "source test_namespace.tcl");
}

int DLLEXPORT
Testnamespace_Init(Tcl_Interp *interp)
{
    if (Tcl_InitStubs(interp, "8.4", 0) == NULL) {
        return TCL_ERROR;
    }
    Tcl_CreateObjCommand(interp, "dotest", DotestCmd, NULL, NULL);
    return Tcl_PkgProvide(interp, "testnamespace", "1.0");
} 
```

在 Windows 上，我使用以下方法编译了它：

```
cl -nologo -W3 -O2 -MD -DNDEBUG -DUSE_TCL_STUBS -I\opt\tcl\include -c test_namespace.c
link -dll -release -out:testnamespace.dll test_namespace.obj \opt\tcl\lib\tclstub85.lib 
```

然后使用您在上面发布的内容创建了一个 test_namespace.tcl 文件。运行它会产生以下结果：

```
C:\opt\tcl\src>tclsh
% load testnamespace.dll Testnamespace
% dotest
Namespace calling ::bob::proc2
% 
```

进一步的反省表明事情与我对该脚本的期望一样：

```
% namespace children ::
::platform ::activestate ::bob ::tcl
% namespace children ::bob
::bob::joe
% 
```

如果这真的不适合你，你可能首先在你的 C 代码中做一些奇怪的事情。

*更新*

上面的例子是用一个编译的包来扩展 tcl。显然，OP 正在将 Tcl 嵌入到其他一些应用程序中。此处提供了执行此操作的一个简单示例，它也运行相同的命令以达到与上述相同的效果。实际上，当将 Tcl 嵌入到应用程序中时，代码应该使用 tclAppInit.c 文件并提供它自己的 Tcl_AppInit 函数。通过运行通常的 Tcl_Main，您可以获得处理事件（fileevents 或 after 命令所需）和交互式 shell 的全部功能。一个例子如下：

```
/* trivial embedding Tcl example */
#include <tcl.h>
#include <locale.h>

int
main(int argc, char *argv[])
{
    Tcl_Interp *interp = NULL;
    int r = TCL_ERROR;

    setlocale(LC_ALL, "C");
    interp = Tcl_CreateInterp();
    if (interp != NULL) {
        Tcl_FindExecutable(argv[0]);
        r = Tcl_Eval(interp, "source test_namespace.tcl");
        if (TCL_OK == r)
            r = Tcl_Eval(interp, "puts [namespace children ::bob]");
        Tcl_DeleteInterp(interp);
    }
    return r;
} 
```

运行上述：

```
C:\opt\tcl\src>cl -nologo -W3 -O2 -MD -I\opt\tcl\include test_namesp_embed.c -link -subsystem:console -release -libpath:\opt\tcl\lib tcl85.lib
test_namesp_embed.c

C:\opt\tcl\src>test_namesp_embed.exe test_namespace.tcl
Namespace calling ::bob::proc2
::bob::joe 
```

一个更好的嵌入方案，它使用 tclAppInit 来扩展一个普通的 Tcl 解释器：

```
#include <tcl.h>
#include <locale.h>

#define TCL_LOCAL_APPINIT Custom_AppInit
int
Custom_AppInit(Tcl_Interp *interp)
{
    return Tcl_Eval(interp, "source test_namespace.tcl");
}

#include "/opt/tcl/src/tcl.git/win/tclAppInit.c" 
```

构建和运行它也会产生与以前版本相同的输出：

```
C:\opt\tcl\src>cl -nologo -W3 -O2 -MD -I\opt\tcl\include test_namesp_embed.c -link -subsystem:console -release -libpath:\opt\tcl\lib tcl85.lib
C:\opt\tcl\src>test_namesp_embed.exe
Namespace calling ::bob::proc2
% namespace children ::bob
::bob::joe
% exit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:35:14.420

据我所知，您的代码无法生成您期望的消息的唯一方法是，如果当前命名空间在它被调用时不是全局命名空间。假设当前命名空间是`::foo`，第一个命名空间`namespace eval`将在其中工作，`::foo::bob`内部命名空间在`::foo::bob::joe`. 当然，不合格的过程定义会将其定义放在当前名称空间中。要检测是否确实如此，请将`namespace current`命令的输出添加到打印的消息中。

如果这是问题所在，请将外部更改`namespace eval`为使用完全限定名称：

```
namespace eval ::bob {    # <<<<<<< NOTE THIS HERE!
    namespace eval joe {
        proc proc1 {} {}
    }
    proc proc2 {} {
        puts "proc2"
    }
    proc ::proc3 {} {
        puts "proc3"
    }
    proc joe::proc4 {} {
        puts "proc4"
    }
} 
```

如果您正在编写一个 Tcl 包，*强烈建议*您这样做，即使您没有完全做到这一点，这也是一个好主意；您永远无法确定脚本将在什么上下文`source`中运行。（但内部`namespace eval`还可以；它在已知上下文中运行，外部`namespace eval`.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T22:28:29.450

麻烦各位了。我发现了问题。问题出在我的代码中。我完全忘记了以下程序：

```
rename proc _proc
_proc proc {name args body} {
    global pass_log_trace

    set g_log_trace "0"
    if {[info exists pass_log_trace]} {
        set g_log_trace $pass_log_trace
    }

    # simple check if we have double declaration of the same procedure
    if {[info procs $name] != ""} {
        puts "\nERROR: redeclaration of procedure: $name"
    }

    _proc $name $args $body

    if {$g_log_trace != 0} {
        trace add execution $name enter trace_report_enter
        trace add execution $name leave trace_report_leave
    }
} 
```

这个过程的主要目的是为我的代码中的所有过程添加入口和出口点跟踪器。出于某种原因，我仍在调查，它还删除了命名空间范围。

# c# - 休眠致命错误

> ID：12432027
> 
> 赞同：0
> 
> 时间：2012-09-14T21:11:11.880
> 
> 标签：c#, asp.net, nhibernate, mapping

当我执行此代码时，我有一个错误（System.InvalidCastException：无法将“AccountProxy”类型的对象转换为“System.String”类型。）

1.  我映射了数据库opengts（开源）的表（Account，AccountString，EventData，...）
2.  当我从 EventData.cs 调用函数时出现此错误

    IQuery 查询 = session.CreateQuery("FROM Eventdata"); IList pets = query.List(); 归还宠物；

堆栈跟踪：

```
[InvalidCastException: Impossible d'effectuer un cast d'un objet de type 'AccountProxy' en type 'System.String'.]
   (Object , Object[] , SetterCallback ) +431
   NHibernate.Bytecode.Lightweight.AccessOptimizer.SetPropertyValues(Object target, Object[] values) +20
   NHibernate.Tuple.Component.PocoComponentTuplizer.SetPropertyValues(Object component, Object[] values) +49
   NHibernate.Type.ComponentType.SetPropertyValues(Object component, Object[] values, EntityMode entityMode) +34
   NHibernate.Type.ComponentType.ResolveIdentifier(Object value, ISessionImplementor session, Object owner) +150
   NHibernate.Type.ComponentType.NullSafeGet(IDataReader rs, String[] names, ISessionImplementor session, Object owner) +42
   NHibernate.Loader.Loader.GetKeyFromResultSet(Int32 i, IEntityPersister persister, Object id, IDataReader rs, ISessionImplementor session) +93
   NHibernate.Loader.Loader.GetRowFromResultSet(IDataReader resultSet, ISessionImplementor session, QueryParameters queryParameters, LockMode[] lockModeArray, EntityKey optionalObjectKey, IList hydratedObjects, EntityKey[] keys, Boolean returnProxies) +92
   NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) +675
   NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) +129
   NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters) +116

[GenericADOException: could not execute query
[ select eventdata0_.deviceID as deviceID5_, eventdata0_.timestamp as timestamp5_, eventdata0_.statusCode as statusCode5_, eventdata0_.accountID as accountID5_, eventdata0_.latitude as latitude5_, eventdata0_.longitude as longitude5_, eventdata0_.gpsAge as gpsAge5_, eventdata0_.speedKPH as speedKPH5_, eventdata0_.heading as heading5_, eventdata0_.altitude as altitude5_, eventdata0_.transportID as transpo11_5_, eventdata0_.inputMask as inputMask5_, eventdata0_.outputMask as outputMask5_, eventdata0_.address as address5_, eventdata0_.DataSource as DataSource5_, eventdata0_.rawdata as rawdata5_, eventdata0_.distanceKM as distanceKM5_, eventdata0_.odometerKM as odometerKM5_, eventdata0_.geozoneIndex as geozone19_5_, eventdata0_.geozoneID as geozoneID5_, eventdata0_.creationTime as creatio21_5_ from eventdata eventdata0_ ]
[SQL: select eventdata0_.deviceID as deviceID5_, eventdata0_.timestamp as timestamp5_, eventdata0_.statusCode as statusCode5_, eventdata0_.accountID as accountID5_, eventdata0_.latitude as latitude5_, eventdata0_.longitude as longitude5_, eventdata0_.gpsAge as gpsAge5_, eventdata0_.speedKPH as speedKPH5_, eventdata0_.heading as heading5_, eventdata0_.altitude as altitude5_, eventdata0_.transportID as transpo11_5_, eventdata0_.inputMask as inputMask5_, eventdata0_.outputMask as outputMask5_, eventdata0_.address as address5_, eventdata0_.DataSource as DataSource5_, eventdata0_.rawdata as rawdata5_, eventdata0_.distanceKM as distanceKM5_, eventdata0_.odometerKM as odometerKM5_, eventdata0_.geozoneIndex as geozone19_5_, eventdata0_.geozoneID as geozoneID5_, eventdata0_.creationTime as creatio21_5_ from eventdata eventdata0_]]
   NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters) +213
   NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters) +18
   NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces, IType[] resultTypes) +79
   NHibernate.Hql.Ast.ANTLR.Loader.QueryLoader.List(ISessionImplementor session, QueryParameters queryParameters) +51
   NHibernate.Hql.Ast.ANTLR.QueryTranslatorImpl.List(ISessionImplementor session, QueryParameters queryParameters) +231
   NHibernate.Engine.Query.HQLQueryPlan.PerformList(QueryParameters queryParameters, ISessionImplementor session, IList results) +369
   NHibernate.Impl.SessionImpl.List(String query, QueryParameters queryParameters, IList results) +317
   NHibernate.Impl.SessionImpl.List(String query, QueryParameters parameters) +282
   NHibernate.Impl.QueryImpl.List() +163
   DATA1.EventdataExtensions.GetEventdata() in C:\Users\HP\Desktop\our_project\DATA1\Queries\Eventdata.cs:33
   MvcApplication7.Controllers.HistoriqueController.Index() in C:\Users\HP\Desktop\our_project\MvcApplication7\Controllers\HistoriqueController.cs:17
   lambda_method(Closure , ControllerBase , Object[] ) +62
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8841105
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

有什么建议么？如何纠正这个错误

数据实体类（摘自评论）：

```
public class MyClass
    {
        public virtual string DeviceID { get; set; }
        public virtual int Timestamp { get; set; }
        public virtual string Account { get; set; }
        public virtual int StatusCode { get; set; }
        public virtual double Latitude { get; set; }
        public virtual double Longitude { get; set; }
        public virtual int GpsAge { get; set; }
        public virtual double SpeedKPH { get; set; }
        public virtual double Heading { get; set; }

        public override bool Equals(object obj)
        {
            return true;
        }

        public override int GetHashCode()
        {
            return 0;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:35:33.663

您不显示映射，但基于错误消息和 MyClass 具有名为 Account 的字符串属性的事实，我猜您已经告诉 NHibernate 将 Account 类型的对象映射到此属性。由于该属性不是 Account 类型，因此这将失败。

# facebook - 以页面身份登录时，FB.Init 状态永远不会返回

> ID：12432048
> 
> 赞同：1
> 
> 时间：2012-09-14T21:12:23.417
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

首先我订阅`auth.authResponseChange`和`auth.statusChange`。

我的 Init 调用如下所示：

```
FB.init({
   appId  : app_id,
   status : true,
   cookie : true,
   channelUrl : 'http://domain.com/channel.html',
   frictionlessRequests:true,
   xfbml : false
}); 
```

当以用户身份登录时，它工作正常。

但是，当作为页面登录`auth.authResponseChange`并且`auth.statusChange`永远不会被调用时。我也尝试过设置`status: false`和调用`FB.getLoginStatus(callback_function)`，但从未调用过回调函数。

我很确定这是一个错误，但是**有解决方法**吗？

* * *

还值得一提 - 我在控制台中收到以下错误：

> 拒绝显示文档，因为 X-Frame-Options 禁止显示。

我将标题添加`X-Frame-Options: GOFORIT`到我的页面，但错误仍然存​​在。

* * *

以下 SO 问题是相关的，但答案并没有真正帮助：

*   [FB.INIT 即使有状态也不会强制登录：true js sdk](https://stackoverflow.com/questions/7252484/fb-init-not-forcing-login-even-with-statustrue-js-sdk)
*   [拒绝显示文档，因为 X-Frame-Options 禁止显示](https://stackoverflow.com/questions/9491540/refused-to-display-document-because-display-forbidden-by-x-frame-options)
*   [如何检测用户登录为页面，FB.getLoginStatus 不起作用？](https://stackoverflow.com/questions/10312395/how-to-detect-user-logged-as-page-fb-getloginstatus-doesnt-work)

上面的最后一个链接说调用 FB.login() 如果用户作为页面登录，它将自动警告用户。但是，**调用*login()*正是我试图避免做的事情。**

* * *

**稍后补充**：[Facebook 认为这个 bug 已经修复](https://developers.facebook.com/bugs/244490742333859)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T02:11:45.027

`getLoginStatus`无法为作为页面登录的用户工作的问题是一个已知问题，将在周二的推送中得到解决。

# jquery - 隐藏/显示 div (jQuery)

> ID：12432060
> 
> 赞同：1
> 
> 时间：2012-09-14T21:13:47.660
> 
> 标签：jquery, html, hide, show

嗨，我有这个演示：http: [//jsfiddle.net/SO_AMK/BcFVv/](http://jsfiddle.net/SO_AMK/BcFVv/)

我试图一次只显示 1 个 Div 而不是全部三个。我想要它，所以某个 div 只会在按下它的按钮时显示。

如您所见，它在开始时显示了所有 Div。按钮工作正常。

问题：如何从一开始就隐藏 Divs 2 和 3？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:17:55.890

ID 的命名应在数字前使用前导字母。

“ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_" )、冒号 (":") 和句点 (".")。” (W3C)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T21:18:44.960

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T21:15:48.947

试试这个：

```
$('#pages div').not('[id=1]').hide(); 
```

jsFiddle：http: [//jsfiddle.net/wqtT5/](http://jsfiddle.net/wqtT5/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T21:16:20.750

只需添加：`$("#pages div:not(#1)").css("display", "none");`​ 在 main 函数之外。

演示：http: [//jsfiddle.net/SO_AMK/BcFVv/1](http://jsfiddle.net/SO_AMK/BcFVv/1)

PS 请在就我的一个答案寻求我的帮助后至少等待十分钟，然后再发布新问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T21:18:41.617

您不应重复 HTML 元素 ID 或以数值开头的 ID。

我已将您的 JS Fiddle 更新如下：

[http://jsfiddle.net/benedict_w/BcFVv/3/](http://jsfiddle.net/benedict_w/BcFVv/3/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T21:35:38.937

Use the [tabs widget](http://jqueryui.com/demos/tabs/) from the [jquery-ui](http://jqueryui.com) library.

Here is how : [http://jsfiddle.net/BcFVv/7/](http://jsfiddle.net/BcFVv/7/)

# android - PhoneGap 和 Titanium4j Mobile 的区别

> ID：12432061
> 
> 赞同：2
> 
> 时间：2012-09-14T21:13:54.890
> 
> 标签：android, iphone, gwt, cordova

对于基于 GWT 的 iOS 和 Android 应用程序开发，我面临两种选择：

*   Cordova / PhoneGap + mgwt
*   Titanuim4j 移动 + Touch4j

有没有人成功整合其中之一或两者？你知道有什么好处和坏处吗？

谢谢你。

[编辑]

一：Touch4j 不支持 Firefox，因此如果您在 Windows 中使用 GWT 进行开发，您无法在开发模式下查看您的应用程序（没有适用于 Safari 或适用于 Windows 的 Chrome 的 GWT 插件）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T14:32:53.777

您的第二个项目的问题应该是关于 Titanium 和 Touch 之间的区别，您的决定可以归结为您希望根据您的要求使用哪种底层技术。从 10,000 英尺开始，Titanium 框架将尽可能多地转换为原生框架，而 Touch 严格来说是一个 HTML5 框架，可以在设备的 web 视图中运行——正如其他人已经提到的那样。

现在，从 Emitrom 的产品来看：

Titanium4j - 是 Titanium 框架的 Java 绑定。您将简单地将 GWT 用作将您的 Java 转换为 Javascript 的编译器，然后该 Javascript 由 Titanium 框架进一步翻译。使用 Titanium4j 时，您可以通过底层 Titanium 框架访问硬件。

Touch4j - 是 Touch 框架的 Java 绑定。此外，它确实包含一个 Cordova 软件包，因此您也可以访问硬件。GWT 编译器用于将所有 Java 转换为 Javascript，并且感谢 Cordova，所有这些都在设备的 web 视图中运行。Touch4j 已经被一些人誉为“最好的 GWT 移动框架”。见[http://www.sencha.com/forum/showthread.php?228405-GXT-Mobile](http://www.sencha.com/forum/showthread.php?228405-GXT-Mobile)

这里有 2 个将 Touch4j 应用程序部署到 iOS 和 Android 的教程：

[http://emitrom.com/touch4j/tutorials/hello-ios](http://emitrom.com/touch4j/tutorials/hello-ios)

[http://emitrom.com/touch4j/tutorials/hello-android](http://emitrom.com/touch4j/tutorials/hello-android)

Chrome 确实有一个适用于 Windows（和 Mac）的 GWT 插件，因此您应该能够使用它在 Titanium4j 或 Touch4j 中进行开发。后者的关键在于它是基于 webkit 的，因此它不适用于 Firefox。

我还可以给你一些关于 Titanium4j 和 Touch4j 的优缺点：

在 Titanium4j 中调试比在完全支持它的 Touch4j 中更难。此外，如果您正在寻找可以使用的小部件库，请坚持使用 Touch4j。

而现在，就像 Oracle 曾经说过的那样，“会烤你的面条”：Emitrom 正准备发布 Lienzo 框架。Lienzo 是 canvas 的 100% Java 实现，您基本上可以控制用户界面的各个方面。想想动画、转换、拖动、图像、视频、音频……简而言之，Lienzo 将让您能够使用 Javascript 在画布上做所有可以做的事情，但使用 Java。将此与我们的 Cordova 绑定配对，现在您可以将基于画布的应用程序推送到移动设备。不基于 webkit 的浏览器不走运的日子已经一去不复返了：现在每个遵循 HTML5 规范（包括画布）的浏览器都可以使用 Lienzo，无论是在设备上、浏览器上还是在桌面（通过 Air4j 等其他技术）。

无论如何，您是第一个听说 Lienzo 的人 :-) 将其视为丰富 UI 库、游戏、应用程序等的基础，所有这些都使用 Java 中的画布在封面下进行。Lienzo 将是免费和开源的。我们真的很兴奋，并希望在本月结束之前推出测试版。并非上述所有功能都会包含在第一个版本中，因此我们的路线图有很多事情要做。

全面披露：我是 Emitrom 的联合创始人之一。

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-15T06:51:05.707

phonegap 和 Titanium 有完全不同的方式，phonegap 一方面是使用 webview 组件来显示你的 html-javascript 代码，另一方面也是在你的代码和本机代码之间建立一座桥梁，另一方面 Titanium 将你的 javascript 代码编译为本机代码并且没有任何关系使用 webview 或 html5。

这些方法引起的一些主要区别是：

1.  phonegao 有很多性能问题，因为它在运行时渲染 html 代码。

2.  与 Titanium 不同，phonegap 可以受益于 html5 和 javascript 的全部功能，相比之下 Titanium 在这方面受到限制。3.phonegap 支持更广泛的设备。...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T10:39:41.503

Windows 上有一个适用于 Chrome 的 GWT DevMode。

请注意，您还可以将 Touch4j 与 PhoneGap 一起使用。Touch4j 有一个封装了 PhoneGap(Cordova) API 的“设备”模块。

# wpf - WPF中绑定到TabControl的ItemsSource

> ID：12432062
> 
> 赞同：2
> 
> 时间：2012-09-14T21:13:55.350
> 
> 标签：wpf, binding, datatemplate, tabcontrol, tabitem

我正在尝试创建一个用户控件，它代表我所称的工作区（来自 Josh Smith 的博客的参考）。工作区将显示在选项卡控件中。我的目标是使用选项卡式界面来管理我打开的各种文档，就像在 excal 工作簿的浏览器中一样。

每次用户打开一个新工作区时，该工作区都应该显示在选项卡控件中。每个工作区都采用用户控件的形式，每个工作区都有自己的视图模型。我希望 Tab Header 显示我的视图模型中的一个属性，我认为它可能必须通过我的用户控件作为属性公开。

到目前为止，在遇到许多问题之前，我最喜欢的最干净的解决方案是使用数据模板。基本上我做了以下事情：

```
<DataTemplate x:Key="WorkspaceItem">
            <DockPanel Width="120">
                <ContentPresenter 
                    Content="{Binding Title}" 
                    VerticalAlignment="Center" 
                    />
            </DockPanel>
        </DataTemplate>     

<DataTemplate DataType="{x:Type CustomerViewModel}">
   <workspace:CustomerWorkspace />
</DataTemplate>

<TabControl ItemsSource="{Binding Workspaces}"
            ItemTemplate="{StaticResource WorkspaceItem}"/> 
```

TabControl.ItemsSource 绑定到包含我所有工作区的 observablecollection(of Object)。

这很好用，除了两件事：

1.  如果我打开多个客户，那么我打开了多个工作区。由于 DataTemplate Recycling，当我从一个选项卡切换到另一个选项卡时，我会丢失状态。所以所有不受约束的东西都会失去状态。

2.  在不同工作区（使用不同数据模板）之间交换的性能非常缓慢。

所以...我在 SO 上找到了另一个用户的建议，将用户控件添加到 ObservableCOllection 并放弃数据模板。现在解决了丢失状态的问题之一。但是，现在我面临两个剩余的问题：

1.  如何在不使用 DataTemplate 的情况下设置 TabItem.Header 属性
2.  除非它们是相同的 DataTemplate，否则选项卡之间来回交换的速度仍然很慢。

然后我继续在我的代码隐藏中将 TabItem 添加到 ObservableCollection 并将 TabItem.Content 属性设置为用户控件的属性。由于我已经删除了 DataTemplates 的使用，因此速度问题和丢失状态问题现在都已消除。但是，我现在遇到了将 TabItem.header 绑定到应该显示在选项卡标题中的用户控件的自定义“标题”属性的问题。

因此，在这篇非常长的帖子之后，我的问题是：

1.  有没有办法使用数据模板并强制它们为集合中的每个项目创建一个新的实例，以防止回收和状态丢失。

    1a。有比我在上面帖子中提到的更好的选择吗？

2.  有没有办法通过 Xaml 而不是通过标签项的后端代码构造来完成所有这些工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T21:19:19.817

WPF 的默认行为是卸载不可见的项目，包括卸载`TabItems`不可见的项目。这意味着当您返回选项卡时，`TabItem`会重新加载，并且任何未绑定的内容（例如滚动位置、控件状态等）都将被重置。

[这里](http://web.archive.org/web/20101007170247/http://www.pluralsight-training.net/community/blogs/eburke/archive/2009/04/30/keeping-the-wpf-tab-control-from-destroying-its-children.aspx)有一个很好的站点，其中包含扩展 TabControl 并阻止它`TabItems`在切换选项卡时破坏它的代码，但是它现在似乎不再存在。

这是代码的副本，尽管我对其进行了一些更改。它在切换选项卡时保留`ContentPresenter`TabItems 的 ，并`TabItem`在您返回页面时使用它来重绘 。它占用了更多内存，但是我发现它的性能更好，因为 TabItem 不再需要重新创建它上面的所有控件。

```
// Extended TabControl which saves the displayed item so you don't get the performance hit of 
// unloading and reloading the VisualTree when switching tabs

// Obtained from http://eric.burke.name/dotnetmania/2009/04/26/22.09.28
// and made a some modifications so it reuses a TabItem's ContentPresenter when doing drag/drop operations

[TemplatePart(Name = "PART_ItemsHolder", Type = typeof(Panel))]
public class TabControlEx : System.Windows.Controls.TabControl
{
    // Holds all items, but only marks the current tab's item as visible
    private Panel _itemsHolder = null;

    // Temporaily holds deleted item in case this was a drag/drop operation
    private object _deletedObject = null;

    public TabControlEx()
        : base()
    {
        // this is necessary so that we get the initial databound selected item
        this.ItemContainerGenerator.StatusChanged += ItemContainerGenerator_StatusChanged;
    }

    /// <summary>
    /// if containers are done, generate the selected item
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    void ItemContainerGenerator_StatusChanged(object sender, EventArgs e)
    {
        if (this.ItemContainerGenerator.Status == GeneratorStatus.ContainersGenerated)
        {
            this.ItemContainerGenerator.StatusChanged -= ItemContainerGenerator_StatusChanged;
            UpdateSelectedItem();
        }
    }

    /// <summary>
    /// get the ItemsHolder and generate any children
    /// </summary>
    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        _itemsHolder = GetTemplateChild("PART_ItemsHolder") as Panel;
        UpdateSelectedItem();
    }

    /// <summary>
    /// when the items change we remove any generated panel children and add any new ones as necessary
    /// </summary>
    /// <param name="e"></param>
    protected override void OnItemsChanged(NotifyCollectionChangedEventArgs e)
    {
        base.OnItemsChanged(e);

        if (_itemsHolder == null)
        {
            return;
        }

        switch (e.Action)
        {
            case NotifyCollectionChangedAction.Reset:
                _itemsHolder.Children.Clear();

                if (base.Items.Count > 0)
                {
                    base.SelectedItem = base.Items[0];
                    UpdateSelectedItem();
                }

                break;

            case NotifyCollectionChangedAction.Add:
            case NotifyCollectionChangedAction.Remove:

                // Search for recently deleted items caused by a Drag/Drop operation
                if (e.NewItems != null && _deletedObject != null)
                {
                    foreach (var item in e.NewItems)
                    {
                        if (_deletedObject == item)
                        {
                            // If the new item is the same as the recently deleted one (i.e. a drag/drop event)
                            // then cancel the deletion and reuse the ContentPresenter so it doesn't have to be 
                            // redrawn. We do need to link the presenter to the new item though (using the Tag)
                            ContentPresenter cp = FindChildContentPresenter(_deletedObject);
                            if (cp != null)
                            {
                                int index = _itemsHolder.Children.IndexOf(cp);

                                (_itemsHolder.Children[index] as ContentPresenter).Tag =
                                    (item is TabItem) ? item : (this.ItemContainerGenerator.ContainerFromItem(item));
                            }
                            _deletedObject = null;
                        }
                    }
                }

                if (e.OldItems != null)
                {
                    foreach (var item in e.OldItems)
                    {

                        _deletedObject = item;

                        // We want to run this at a slightly later priority in case this
                        // is a drag/drop operation so that we can reuse the template
                        this.Dispatcher.BeginInvoke(DispatcherPriority.DataBind,
                            new Action(delegate()
                        {
                            if (_deletedObject != null)
                            {
                                ContentPresenter cp = FindChildContentPresenter(_deletedObject);
                                if (cp != null)
                                {
                                    this._itemsHolder.Children.Remove(cp);
                                }
                            }
                        }
                        ));
                    }
                }

                UpdateSelectedItem();
                break;

            case NotifyCollectionChangedAction.Replace:
                throw new NotImplementedException("Replace not implemented yet");
        }
    }

    /// <summary>
    /// update the visible child in the ItemsHolder
    /// </summary>
    /// <param name="e"></param>
    protected override void OnSelectionChanged(SelectionChangedEventArgs e)
    {
        base.OnSelectionChanged(e);
        UpdateSelectedItem();
    }

    /// <summary>
    /// generate a ContentPresenter for the selected item
    /// </summary>
    void UpdateSelectedItem()
    {
        if (_itemsHolder == null)
        {
            return;
        }

        // generate a ContentPresenter if necessary
        TabItem item = GetSelectedTabItem();
        if (item != null)
        {
            CreateChildContentPresenter(item);
        }

        // show the right child
        foreach (ContentPresenter child in _itemsHolder.Children)
        {
            child.Visibility = ((child.Tag as TabItem).IsSelected) ? Visibility.Visible : Visibility.Collapsed;
        }
    }

    /// <summary>
    /// create the child ContentPresenter for the given item (could be data or a TabItem)
    /// </summary>
    /// <param name="item"></param>
    /// <returns></returns>
    ContentPresenter CreateChildContentPresenter(object item)
    {
        if (item == null)
        {
            return null;
        }

        ContentPresenter cp = FindChildContentPresenter(item);

        if (cp != null)
        {
            return cp;
        }

        // the actual child to be added.  cp.Tag is a reference to the TabItem
        cp = new ContentPresenter();
        cp.Content = (item is TabItem) ? (item as TabItem).Content : item;
        cp.ContentTemplate = this.SelectedContentTemplate;
        cp.ContentTemplateSelector = this.SelectedContentTemplateSelector;
        cp.ContentStringFormat = this.SelectedContentStringFormat;
        cp.Visibility = Visibility.Collapsed;
        cp.Tag = (item is TabItem) ? item : (this.ItemContainerGenerator.ContainerFromItem(item));
        _itemsHolder.Children.Add(cp);
        return cp;
    }

    /// <summary>
    /// Find the CP for the given object.  data could be a TabItem or a piece of data
    /// </summary>
    /// <param name="data"></param>
    /// <returns></returns>
    ContentPresenter FindChildContentPresenter(object data)
    {
        if (data is TabItem)
        {
            data = (data as TabItem).Content;
        }

        if (data == null)
        {
            return null;
        }

        if (_itemsHolder == null)
        {
            return null;
        }

        foreach (ContentPresenter cp in _itemsHolder.Children)
        {
            if (cp.Content == data)
            {
                return cp;
            }
        }

        return null;
    }

    /// <summary>
    /// copied from TabControl; wish it were protected in that class instead of private
    /// </summary>
    /// <returns></returns>
    protected TabItem GetSelectedTabItem()
    {
        object selectedItem = base.SelectedItem;
        if (selectedItem == null)
        {
            return null;
        }

        if (_deletedObject == selectedItem)
        { 

        }

        TabItem item = selectedItem as TabItem;
        if (item == null)
        {
            item = base.ItemContainerGenerator.ContainerFromIndex(base.SelectedIndex) as TabItem;
        }
        return item;
    }
} 
```

我通常使用的 TabControl 模板如下所示：

```
<Style x:Key="TabControlEx_NoHeadersStyle" TargetType="{x:Type local:TabControlEx}">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type localControls:TabControlEx}">
                <DockPanel>
                    <!-- This is needed to draw TabControls with Bound items -->
                    <StackPanel IsItemsHost="True" Height="0" Width="0" />
                    <Grid x:Name="PART_ItemsHolder" />
                </DockPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

您还可以通过使用隐式`DataTemplate`而不是 来简化 XAML，`ItemTemplate`因为您的 ViewModel 将放置在您的`TabItem.Content`. 我也不太确定您对标题的要求是什么，但是如果我理解正确，您可以将标题设置为另一种隐式样式`TabItem`

```
<Window.Resources>
    <DataTemplate DataType="{x:Type CustomerViewModel}">
       <workspace:CustomerWorkspace />
    </DataTemplate>
</Window.Resources>

<TabControl ItemsSource="{Binding Workspaces}">
    <TabControl.Resources>
        <Style TargetType="{x:Type TabItem}">
            <Setter Property="Header" Value="{Binding HeaderProperty}" />
        </Style>
    </TabControl.Resources>
</TabControl> 
```

# sublimetext2 - 如何使用 Sublime Text 2 对 ctags 进行故障排除

> ID：12432064
> 
> 赞同：0
> 
> 时间：2012-09-14T21:14:10.557
> 
> 标签：sublimetext2, ctags, exuberant-ctags

我正在对 Sublime Text 2 进行测试，看看我是否应该长期使用它。为了切换到它，我需要具备的一个关键功能是能够使用热键跳转到我的代码中的符号定义。

我看到 ST2 有一个 ctags 插件，非常适合我正在寻找的东西。我已经安装了插件，但由于某种原因它不起作用。当我尝试使用 ctrl+alt+]、ctrl+alt+[ 或 ctrl+alt+left_click 跳跃时，我没有得到任何响应。

由于我还是 ST2 的新手，我什至不知道从哪里开始解决我的问题。是否有调试控制台或我可以查看的东西来获取有关它为什么不工作的更多信息？任何可以为我指明正确方向的提示将不胜感激。

顺便说一句，我的 ST2 安装在 Windows 7 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:34:10.767

根据[Sublime Text 2 的文档](http://docs.sublimetext.info/en/latest/basic_concepts.html#the-python-console-and-the-python-api)

> 要打开 Python 控制台，请按 Ctrl+` 或选择查看 | 在菜单中显示控制台。

# ios - 代码数据 iCloud 错误

> ID：12432065
> 
> 赞同：2
> 
> 时间：2012-09-14T21:14:12.157
> 
> 标签：ios, icloud

我正在为基于 ios 5 的 Core Data 应用程序添加 iCloud 支持。我可以在第一台设备上很好地安装该应用程序，并将数据上传到 iCloud。当我尝试在第二台设备上安装应用程序进行测试时，我收到此错误：

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFDictionary setObject:forKey:]：尝试插入零键”

这是我的相关 iCloud 代码：

// ** 注意：如果您修改此代码以供自己使用，则必须更改此变量： NSString *iCloudEnabledAppID = @"com.strikelabs.iXercise";

```
 // ** Note: if you adapt this code for your own use, you should change this variable:        
    NSString *dataFileName = @"Xercise.sqlite";

    // ** Note: For basic usage you shouldn't need to change anything else

    NSString *iCloudDataDirectoryName = @"Data";
    NSString *iCloudLogsDirectoryName = @"Logs";
    NSFileManager *fileManager = [NSFileManager defaultManager];        
    NSURL *localStore = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:dataFileName];

    NSURL *iCloud = [fileManager URLForUbiquityContainerIdentifier:nil];

    if (iCloud) {

        NSLog(@"iCloud is working");

        NSURL *iCloudLogsPath = [NSURL fileURLWithPath:[[iCloud path] stringByAppendingPathComponent:iCloudLogsDirectoryName]];

        NSLog(@"iCloudEnabledAppID = %@",iCloudEnabledAppID);
        NSLog(@"dataFileName = %@", dataFileName); 
        NSLog(@"iCloudDataDirectoryName = %@", iCloudDataDirectoryName);
        NSLog(@"iCloudLogsDirectoryName = %@", iCloudLogsDirectoryName);  
        NSLog(@"iCloud = %@", iCloud);
        NSLog(@"iCloudLogsPath = %@", iCloudLogsPath);

        if([fileManager fileExistsAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]] == NO) {
            NSError *fileSystemError;
            [fileManager createDirectoryAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName] 
                   withIntermediateDirectories:YES 
                                    attributes:nil 
                                         error:&fileSystemError];
            if(fileSystemError != nil) {
                NSLog(@"Error creating database directory %@", fileSystemError);
            }
        }

        NSString *iCloudData = [[[iCloud path] 
                                 stringByAppendingPathComponent:iCloudDataDirectoryName] 
                                stringByAppendingPathComponent:dataFileName];

        NSLog(@"iCloudData = %@", iCloudData);

        NSMutableDictionary *options = [NSMutableDictionary dictionary];
        [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
        [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];
        [options setObject:iCloudEnabledAppID            forKey:NSPersistentStoreUbiquitousContentNameKey];
        [options setObject:iCloudLogsPath                forKey:NSPersistentStoreUbiquitousContentURLKey];

        [psc lock];

        [psc addPersistentStoreWithType:NSSQLiteStoreType 
                          configuration:nil 
                                    URL:[NSURL fileURLWithPath:iCloudData] 
                                options:options 
                                  error:nil];

        [psc unlock]; 
```

据我所知，该错误发生在 addPersistentStoreWithType 期间。我在 iPhone 4S 和 iPad 2 上进行测试。无论我安装应用程序的顺序如何，第二台设备都会出现错误。

任何帮助，将不胜感激！

每当我的程序有 iCloud 实体并且该程序安装在设备上时，就会出现错误。

编辑：看起来这是固定的。您必须将 .nosync 作为 Core Data 的本地存储位置的后缀。

# php - Zend Framework 2 Doctrine 2 模块 - 控制器单元测试中没有服务定位器

> ID：12432082
> 
> 赞同：10
> 
> 时间：2012-09-14T21:15:42.497
> 
> 标签：php, doctrine-orm, phpunit, zend-framework2

这是我的情况。我正在开发 Zend Framework 2 应用程序。我正在使用 Doctrine 模块与 MySQL 数据库进行通信。它在应用程序中运行良好，我可以从控制器内的服务定位器加载实体管理器。

但是在我的控制器单元测试中，服务定位器不存在，因此所有处理数据库的测试都失败，并出现如下错误消息：

> 致命错误：`get()`在第 19 行的 /Users/richardknop/Projects/myproject/module/Api/src/Api/Controller/UserController.php 中调用非对象的成员函数

我已将问题缩小到这种方法：

```
$this->getServiceLocator() 
```

这适用于我的控制器，但在单元测试中返回 NULL。

这是我的 application.config.php：

```
<?php

return array(
    'modules' => array(
        'DoctrineModule',
        'DoctrineORMModule',
        'Api',
    ),
    'module_listener_options' => array(
        'config_glob_paths' => array(
            'config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' => array(
            './module',
            './vendor',
        ),
    ),
); 
```

我的带有数据库连接详细信息的 local.php 文件：

```
<?php

return array(
    'doctrine' => array(
        'connection' => array(
            'orm_default' => array(
                'driverClass' => 'Doctrine\DBAL\Driver\PDOMySql\Driver',
                'params' => array(
                    'host'     => 'localhost',
                    'port'     => '3306',
                    'user'     => 'root',
                    'password' => 'root',
                    'dbname'   => 'mydb',
                ),
            ),
        ),
    ),
); 
```

在我的 module.config.php 中，我有：

```
'doctrine' => array(
    'driver' => array(
        __NAMESPACE__ . '_driver' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'cache' => 'array',
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
        ),
        'orm_default' => array(
            'drivers' => array(
                __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
            ),
        ),
    ),
), 
```

在我的控制器中，我有这种方法来获取实体管理器：

```
private $_em;

private function _getEntityManager()
{
    if (null === $this->_em) {
        $this->_em = $this->getServiceLocator()->get('doctrine.entitymanager.orm_default');
    }
    return $this->_em;
} 
```

现在我的单元测试。这是引导文件：

```
<?php

chdir(dirname(__DIR__));
include __DIR__ . '/../init_autoloader.php';
return Zend\Mvc\Application::init(include 'config/application.config.php'); 
```

我的控制器测试的 setUp 方法如下所示：

```
public function setUp()
{
    $this->_controller = new UserTokenController;
    $this->_request = new Request;
    $this->_routeMatch = new RouteMatch(array('controller' => 'user'));
    $this->_event = new MvcEvent();
    $this->_event->setRouteMatch($this->_routeMatch);
    $this->_controller->setEvent($this->_event);
} 
```

示例控制器单元测试如下所示：

```
public function testGetListHttpStatusCode()
{
    $response = $this->_controller->dispatch($this->_request);
    $this->assertEquals(405, $response->getStatusCode());
} 
```

所有未连接到数据库的测试都通过了。我使用实体管理器的测试失败，但出现此错误：

> 致命错误：`get()`在第 19 行的 /Users/richardknop/Projects/myproject/module/Api/src/Api/Controller/UserController.php 中调用非对象的成员函数

这是第 19 行：

```
$this->_em = $this->getServiceLocator()->get('doctrine.entitymanager.orm_default'); 
```

它失败的原因是`$this->getServiceLocator()`返回**`NULL`**。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T21:03:58.763

不要在你的 bootstrap.php 中这样做

```
return Zend\Mvc\Application::init(include 'config/application.config.php');` in your 
```

但像这样：

```
chdir('/path/to/application/root');

// if you're using composer to install zf2
include_once 'vendor/autoload.php';
// if not using composer initialize your custom autoloading here

$configuration = include('config/application.config.php');
$serviceManager = new ServiceManager(new ServiceManagerConfig(
    isset($configuration['service_manager']) ? $configuration['service_manager'] : array()
));
$serviceManager->setService('ApplicationConfig', $configuration);
$serviceManager->setFactory('ServiceListener', 'Zend\Mvc\Service\ServiceListenerFactory');

$moduleManager = $serviceManager->get('ModuleManager');
$moduleManager->loadModules();
$serviceManager->setAllowOverride(true);

$application = $serviceManager->get('Application');
$event  = new MvcEvent();
$event->setTarget($application);
$event->setApplication($application)
    ->setRequest($application->getRequest())
    ->setResponse($application->getResponse())
    ->setRouter($serviceManager->get('Router')); 
```

然后你可以在你的测试用例中创建静态方法来设置和获取事件......

```
namespace My;

class TestCase extends \Some\Basic\TestCase
{
    protected static $_mvcEvent;

    public static function setMvcEvent(MvcEvent $e) {

        self::$_mvcEvent = $e;
    }

    public static function getMvcEvent() {

        return self::$_mvcEvent;
    }
} 
```

...并从 bootstrap.php 文件中注入它

```
My\TestCase::setMvcEvent($event); 
```

并在您的测试的 setUp 方法中简单地做这样的事情

```
$this->_controller = new UserTokenController;
$this->_controller->setEvent(self::getMvcEvent());
$this->_controller->setServiceLocator(
    self::getMvcEvent()->getApplication()->getServiceManager()
); 
```

还将来自事件->应用程序的请求等注入到这里的控制器中......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-16T12:50:03.493

只需从 \Zend\Test\PHPUnit\Controller\AbstractHttpControllerTestCase 扩展您的控制器

它是初始化服务定位器，并完成了许多其他控制器的工作。以及可用的控制器断言、响应断言、CSS 断言等。带有示例的详细信息请参见此处[http://framework.zend.com/manual/2.1/en/modules/zend.test.phpunit.html](http://framework.zend.com/manual/2.1/en/modules/zend.test.phpunit.html)

# c++ - 修改部分数组的最快方法

> ID：12432084
> 
> 赞同：0
> 
> 时间：2012-09-14T21:15:55.297
> 
> 标签：c++, performance, processing-efficiency

我想对 bool 数组的连续元素块执行 not 操作，然后读回完整的数组。我正在使用以下代码来执行操作。

```
bool arr[100000]={0};
cin>>x>>y;
for(i=x; i<=y; i++)
 arr[i]=!arr[i];

//Some other operations on the array

for(i=0; i<=100000; i++)
 arr+=arr[i]; 
```

这工作正常，但我正在尝试提高程序的速度。有没有更好的方法来执行相同的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:31:34.250

考虑使用位集。比较性能-也许会更好。

```
std::bitset<100000> arr;
cin>>x>>y;
for(i=x; i<=y; i++)
 arr.flip(i);

//Some other operations on the array
unsigned int carr = arr.count(); 
```

为了更优化（请测量并且不要相信），您可以使用您自己的 bitset<> 版本，这不是测试代码：

```
const size_t arr_bitlen = 100000;
typedef unsigned int arr_type;
const size_t arr_type_size = sizeof(arr_type);
const size_T arr_len = (arr_bitlen + arr_type_size - 1) / arr_type_size;
arr_type arr[arr_len] = { 0 };
cin>>x>>y;
unsigned int x_addr = x / arr_type_size;
unsigned int y_addr = y / arr_type_size;
unsigned int x_bit = x % arr_type_size;
unsigned int y_bit = y % arr_type_size;

if (0 == x_bit)
    for (i=x_addr; i<=y_addr; i++)
       arr[i] = ~arr[i]; // revert all bits (bools)
else {
  // deal with first element in range ( ....xxxx - change only x-s
  arr_type x_mask = ((1 << x_bit) - 1) << (arr_type_len - x_bit);
  arr[x_addr] ^= x_mask; 
  for (i = x_bit + 1; i < arr_type_size; ++i)
      arr[i] = ~arr[i]; // revert all bits (bools)
}
if (y_bit > 0) // try to invert 0..y_bit in arr[y_addr + 1] by yourself

//Some other operations on the array
see implementation of std::bitset<N>::count() - it is very clever - just copy it 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:20:04.693

既然我发表了关于使用 int（或者实际上是 int64）的评论，我不妨把它写下来，你可以评估它是否值得。会是这样的。请原谅任何错误，因为我只是在我的孩子们正在观看可笑的垃圾周六早上卡通片时将其放入浏览器中。

```
// I'm gonna assume 32-bit ints here.  Makes the other maths clearer.
// Sorry about all the '4' and '32' constants =P
const size_t arrLen = 100000 / 4 + 1;
int arr[arrLen];

//This gets filled with your data...
memset((void*)arr, 0, arrLen*4);

cin >> x >> y;
int leftMask = 0xffffffff >> (x % 32);      // "(x & 0x1f)" faster?
int rightMask = ~(0x7fffffff >> (y % 32));  // "(y & 0x1f)" faster?
x /= 32;                                    // "x >>= 5" faster?
y /= 32;                                    // "y >>= 5" faster?

if( x == y )
{
    // Intersect the masks
    leftMask &= rightMask;
    arr[x] = (arr[x] & ~leftMask) | (~arr[x] & leftMask);
}
else if( x < y )
{
    // Flip the left and right ends
    arr[x] = (arr[x] & ~leftMask) | (~arr[x] & leftMask);
    arr[y] = (arr[y] & ~rightMask) | (~arr[y] & rightMask);

    // Flip everything in between
    for( int i = x+1; i < y; i++ ) {
        arr[i] ^= 0xffffffff;  // Or arr[i] = ~arr[i] -- whichever is faster
    }
} 
```

上述循环的替代方案，如果它有任何区别......

```
// Flip everything in between
for( int *a = arr+x+1, *b = arr+y; a < b; a++ ) {
    *a = ~*a;
} 
```

练习是尝试使用 64 位整数。就个人而言，我认为这种方法比其他任何方法都快，除非你只翻转几位。

我的右手掩码中可能有一个位错误。如果有人发现它，请发表评论。脑袋空空的。=)

# api - 使用 Vimeo Plus 帐户，如何隐藏/删除嵌入视频中间的“播放”按钮？

> ID：12432087
> 
> 赞同：30
> 
> 时间：2012-09-14T21:16:05.907
> 
> 标签：api, vimeo

在搜索中，我遇到了这个说 Vimeo 还不支持它。但我想知道是否有人仍然找到解决它的聪明方法？

[https://vimeo.com/forums/topic:37769](https://vimeo.com/forums/topic:37769)

这是一张图片：

![在此处输入图像描述](../Images/0f2c64213284cac9b3aebe3ca371eb66.png)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2015-12-02T16:34:22.540

### 您现在可以删除所有控件

只是想更新任何对此有新看法的人。现在，通过使用实验性功能，似乎可以在没有任何控件的情况下嵌入视频：`background=1`

### 注意事项

1.  所有播放器切换和元素都将被关闭（包括播放/暂停按钮！）
2.  视频将自动循环播放。
3.  视频将设置为自动播放。
4.  视频将被静音。

然后您可以使用[js-api](https://developer.vimeo.com/player/js-api)来控制视频（暂停、播放等）。

### 示例嵌入代码

```
<iframe src="https://player.vimeo.com/video/76979871?background=1" 
   width="500" height="281" frameborder="0" webkitallowfullscreen 
   mozallowfullscreen allowfullscreen>
</iframe> 
```

请参阅此处的论坛帖子：[https ://vimeo.com/forums/help/topic:278001](https://vimeo.com/forums/help/topic:278001)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-05-21T21:47:24.133

**2020答案**

使用[Vimeo SDK](https://developer.vimeo.com/player/sdk)

将**控件**选项设置为**false**

```
var options = {
    id: '116582567',
    width: '800',
    controls: false
}

Player = new Vimeo.Player('video', options);
Player.play();
```

```
<script src="https://player.vimeo.com/api/player.js"></script>
<div id="video"></div>
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-11T09:43:20.940

在您的 Vimeo 帐户中，转到您要嵌入的视频，然后转到“设置”>“嵌入”。在那里启用“显示播放栏”选项。这将消除视频图像中间的播放按钮，但会在图像底部显示播放栏。据我所知，这是非此即彼的。我希望能够隐藏两者，因此您只需看到视频的干净海报框架并单击它即可开始播放。如果有人知道怎么做，请告诉我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-14T12:39:02.900

我希望这不违反 Vimeo 规则，但可以隐藏这些按钮。

```
<!-- Video original height is 280px -->
<style type="text/css" media="screen">
    #wrapper {
        overflow: hidden;
        position: relative;
        width: 500px;
        height: 560px;   /* height x 2 */
    }
    #wrapper iframe {
        position: absolute;
        left: 0px;
        top: -140px;  /* video height / 2 */
    }
</sytle>

<div id="wrapper">
    <iframe id="player1" 
        src="http://player.vimeo.com/video/83762493?loop=1&autoplay=1" 
        width="500" height="560" <!-- vide height x 2 -->
        frameborder="0">
    </iframe>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-19T13:54:46.847

您需要转到视频的设置，然后转到分发 > 视频文件链接。然后复制其中一种格式链接，例如`Standard def`.

[![在此处输入图像描述](../Images/e9e35404e6cc95fcba624a2ae47dd8e4.png)](https://i.stack.imgur.com/VmCZz.png) [![在此处输入图像描述](../Images/b756ccf413726fa6c1eb1c7cc67b5f26.png)](https://i.stack.imgur.com/iQZlF.png)

# javascript - 当加载网页调整以在加载时将 url 框隐藏在 androids 上时它调用了什么

> ID：12432089
> 
> 赞同：1
> 
> 时间：2012-09-14T21:16:17.390
> 
> 标签：javascript, android, html

它是如何完成的？我正在尝试让 android 浏览器顶部的 url 框在网页加载时消失，像 m.untappd.com 这样的页面似乎首先加载了页面，然后发生的最后一件事是稍微向下移动隐藏它-谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:40:00.530

hideURLbar() - 我不只是看这里

# javascript - jquery为新添加的元素设置一个属性为input和textarea

> ID：12432091
> 
> 赞同：-3
> 
> 时间：2012-09-14T21:16:21.023
> 
> 标签：javascript, jquery, dom, jquery-on

```
$("input:text,textarea").attr("autocomplete","off"); 
```

当新元素被添加到 dom 中时，让它工作的转折是什么。影响 input:text 和 textarea 在 $(document).ready 上执行规则后将此规则应用于新添加的元素

这就是答案，虽然不是那么完美。

```
$(function() {
$("body").on("focus", "input:text,textarea", function(){
if($(this).attr("autocomplete")!="off"){
$(this).attr("autocomplete","off");
}
});
}); 
```

感谢所有的反对票..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:19:25.620

我认为这里的问题是自动完成不是输入字段的有效属性。它是由 jQuery 插件添加的。

您需要使用 jquery UI 的插件语法将自动完成设置为打开和关闭

# emacs - 摆脱“对自由变量的引用”字节编译警告

> ID：12432093
> 
> 赞同：42
> 
> 时间：2012-09-14T21:16:22.867
> 
> 标签：emacs, elisp

我正在编写一个 emacs 主模式，它使用缓冲区局部变量来存储一些状态：

```
(defun foo-mode ()
  "My nice major mode"
  (interactive)
  (kill-all-local-variables)
  (setq mode-name "foo")
  (setq major-mode 'foo-mode)
  (set (make-local-variable 'foo-state) "bar"))

(defun foo-change-state ()
  (setq foo-state "baz")) 
```

这工作得很好，并且具有在任何不使用我的主要模式的缓冲区中，`foo-state`变量没有绑定的属性（在我看来这是一件好事，因为它避免了符号表的混乱）。

但是，对这样一段代码进行字节编译会产生以下警告：

```
Warning: assignment to free variable `foo-state' 
```

using消除了警告，但具有现在无处不在`defvar`的副作用，这在我看来是不可取的。`foo-state`

有没有办法摆脱警告，同时仍然不绑定每个缓冲区中的特定于模式的变量？或者当我认为这些变量不应该全局声明时我错了？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-15T02:24:14.077

做你想做的事情的官方方法是`(defvar foo-state)`. 注意没有第二个参数。另请注意，这样的声明仅适用于找到它的文件（或找到它的范围，如果它在函数内使用）。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-09-14T21:53:00.417

用 声明变量`defvar`。没有其他方法可以删除警告，这确实被认为是一种很好的做法。

您保持符号表整洁的意图是值得的，但您实际上并没有这样做。我认为您误解了 Emacs Lisp 中变量绑定的语义，因为您似乎相信通过不声明它将`foo-state`在任何不使用`foo-mode`. *事实并非如此*。

在 Emacs Lisp 中，名称（又名符号）是*全局*的。一旦`foo-state`第一次被评估，运行时就会为它创建一个新的符号对象`foo-state`并将其放入全局符号表（又名`obarray`）中。`foo-state`没有本地符号表，因此在哪里评估以及如何评估都无关紧要，在*任何地方*`foo-state`引用*相同*的符号对象（请参阅[创建符号](http://www.gnu.org/software/emacs/manual/html_node/elisp/Creating-Symbols.html)）。

 *每个符号对象都由组件（也称为单元格）组成，其中之一是*变量*单元格（请参阅[符号组件](http://www.gnu.org/software/emacs/manual/html_node/elisp/Symbol-Components.html)）。 `setq`修改系统的当前绑定，在没有词法绑定的顶层，这有效地改变了符号对象的变量单元格，从而改变了变量的*全局*值。`setq`同样，在哪里评估并不重要。实际上，如果有些`bar-mode`评估`(setq foo-state "bar")`，`foo-state`也必然会“酒吧”，`foo-mode`反之亦然。

`(defvar)`因此， over `(setq)`it的唯一效果是*记录*使用符号作为全局变量的意图，因此告诉其他人不要修改此变量，除非有意操作 of 的行为`foo-mode`。您可以将文档附加到变量，并标记为在缓冲区中定义（`C-h v foo-state`将提供跳转到定义的链接）。

由于 Emacs Lisp 缺少名称空间，并且默认情况下是动态范围的，因此文档对于避免模块之间的冲突至关重要。如果我写了一个`bar-mode`使用你的`foo-mode`我可能会不小心绑定到`foo-state`，调用`foo-change-state`然后看到我的模式行为不端，因为变量被无意覆盖。声明`foo-state`不会使这成为不可能，但它至少可以让我捕捉到错误，因为`C-h v foo-state`会揭示这个变量被另一个模式使用，所以我最好不要使用它，除非我真的打算操纵那个模式。

最后一句话：在所有上述文本中，“模式”都可以替换为 Emacs Lisp 文件。 `modes`在符号方面没有什么特别的。以上所有内容也适用于不声明模式但仅包含一堆函数的 Emacs Lisp。*

# c# - 用更复杂的场景理解 Ninject

> ID：12432096
> 
> 赞同：0
> 
> 时间：2012-09-14T21:16:41.380
> 
> 标签：c#, dependency-injection, ninject, ninject-2

我正在尝试使用 ninject 来.. 做好 ninject 的工作..

基本上没有发生注射。

在下面的代码中，我在“测试”中创建内核，并期望 IDrinkCan 实现以某种方式进入我的 CokeComsumer 类。

我想我在这里错过了一些东西..因为当我在 CokeConsumer 构造函数上放置一个断点时 IDrinkCan 为空。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Ninject;
using Ninject.Modules;
using NUnit.Framework;

namespace testThing
{
public class MyDependencyKernel
{
    public static IKernel DependencyKernel { get; internal set; }

    public MyDependencyKernel()
    {
        DependencyKernel = new StandardKernel(new MyNinjectModule());
    }

    public MyDependencyKernel(NinjectModule ninjectModule)
    {
        DependencyKernel = new StandardKernel(ninjectModule);
    }
}

public class MyNinjectModule : NinjectModule
{
    public override void Load()
    {
        Bind<IDrinkCan>().To<Coke>();
    }
}

public interface IDrinkCan
{
    void OpenCan(int canSize);
    void DrinkSome(int milliletres);
    bool IsEmpty();
}

public class Coke : IDrinkCan
{
    private int _capacity;
    private bool _isEmpty;

    public void OpenCan(int canSize)
    {
        _capacity = canSize;
    }

    public void DrinkSome(int milliletres)
    {
        if (!_isEmpty) _capacity -= milliletres;
        if (_capacity < 0) _isEmpty = true;
    }

    public bool IsEmpty()
    {
        return _isEmpty;
    }
}

public class CokeConsumer
{
    //[Inject]
    public IDrinkCan Drink { get; set; }

    [Inject] //drink is not being injected
    public CokeConsumer(IDrinkCan drink)
    {
        Drink = drink;
        Drink.OpenCan(330);
    }

    public CokeConsumer()
    {
        Drink.OpenCan(330);
    }

    public void DrinkSomeCoke(int amount)
    {
        Drink.DrinkSome(amount);
    }
}

[TestFixture]
public class SomeTestClass
{
    [Test]
    public void DoSomeTest()
    {
        MyDependencyKernel kernel = new MyDependencyKernel();

        CokeConsumer steve = new CokeConsumer();
        steve.DrinkSomeCoke(100);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:50:19.570

这是错误的！

```
[Test]
public void DoSomeTest()
{
    MyDependencyKernel kernel = new MyDependencyKernel();

    CokeConsumer steve = new CokeConsumer();
    steve.DrinkSomeCoke(100);
} 
```

我应该从内核中获取 CokeConsumer ！！！！

IE

```
var steve = kernel.DependencyKernel.Get<CokeConsumer>(); 
```

# python - 功能制作

> ID：12432097
> 
> 赞同：2
> 
> 时间：2012-09-14T21:16:44.767
> 
> 标签：python, functional-programming

> **可能的重复：**
> [功能制作](https://stackoverflow.com/questions/12428560/function-making)

```
>>> g=lambda x:x+1
>>> composition=lambda f,g:(lambda x:f(g(x)))
>>> f=g
>>> f=composition(f,g)
>>> f(9)
11
>>> f=composition(f,g)
>>> f=composition(f,g)
>>> f=composition(f,g)
>>> f(9)
14 
```

我没有使用函数 composition(f,g) ，而是执行了以下操作

```
>>> f=g
>>> f=lambda x:f(g(x))
>>> f(8)
RuntimeError: maximum recursion depth exceeded 
```

我只是打算用相应的 lambda 表达式替换函数组合。我对为什么 f=composition(f,g) 不产生递归但 f=lambda x:f(g(x)) 产生递归感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:25:15.613

对于第一个：

当您调用 时`composition(f, g)`，您正在围绕这些变量的内容创建一个闭包。返回的 lambda 正在寻找变量名`f`并`g`在其本地范围内 - 它们都是`g`对在第一行创建的 lambda 的引用。

对于第二个：

在第二个中，当`f`被调用时，它会`f`在其“本地”范围内查找，这实际上是全局范围 - 并找到*自己*，从而创建无限递归。

这里的关键是查找`f`发生在*执行*时，而不是在定义 lambda 时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:27:02.817

当你写这个：

```
f=lambda x:f(g(x)) 
```

生成的 lambda 表示“在调用 x 范围内的任何 g 的结果上调用范围内的任何 f”。

当你写这个：

```
f=composition(f, g) 
```

结果函数的意思是“调用组合的第一个参数是调用组合的第二个参数的结果”。

我不确定您需要更好地理解哪一部分细节才能弄清楚这一点，但我会猜测一下。Python 中的参数传递总是通过引用，而不是通过名称。因此，当您调用 composition(f, g) 时，您传入的是 f 所指的函数对象，而不是“变量”f。但是当你定义一个 lambda 时，它只发生在范围内，所以你指的是 f 本身。

附带说明一下，这也是 Guido 不喜欢人们使用 lambda 语法的部分原因。如果您像这样重写代码，发生的事情会更加明显：

```
def g(x): return x+1
def composition(f,g):
  def composed(x): return f(g(x))
  return composed
f=g
f=composition(f,g) 
```

# c# - 将 Silverlight 4 与 ODBC 一起使用

> ID：12432101
> 
> 赞同：0
> 
> 时间：2012-09-14T21:16:53.160
> 
> 标签：c#, silverlight, odbc, wcf-ria-services

我对 Silverlight 完全陌生，我想通过 ODBC 连接连接到 Netezza 数据库并拉取记录以在 Silverlight 中很好地显示。最简单的方法是什么？

从一些研究来看，创建 WCF RIA 服务似乎是大多数人所做的（[http://www.codeproject.com/Articles/354715/Creating-a-WCF-RIA-Services-Class-Library-for-a-Si](http://www.codeproject.com/Articles/354715/Creating-a-WCF-RIA-Services-Class-Library-for-a-Si) ) 但这个过程似乎有点复杂。来自 ASP.net 背景，我可以做一些更简单的事情，比如在代码隐藏中创建 ODBC 连接（使用 System.Data.ODBC 功能），执行查询，将返回的记录存储在 Datatable 中，然后将其绑定到一些银光控制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:36:49.423

通常，通过 ODBC、ADO.NET 等直接访问数据源并不是 Silverlight DNA 的一部分。Silverlight 是一种浏览器/客户端技术，在 Internet 上公开数据库确实不是一个好主意。这就是为什么主要方法是服务，例如 WCF RIA 服务器、WCF 数据服务等。

您还会注意到，所有远程调用都是异步的，再次强调客户端到服务器通过 Internet 的流程，并“鼓励”开发人员提供快速响应的用户体验。

使用 Silverlight Out-of-Browser（例如，在桌面上运行 Silverlight）[，您*可以*使用 COM+ 功能](http://justinangel.net/CuttingEdgeSilverlight4ComFeatures)做任何事情，但这不是表单数据类型应用程序的常用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T00:13:48.343

从技术上讲，您可以按照您的描述进行操作，但您确实不应该（在 ASP.net 或 Silverlight 中）。

通过直接针对数据库，您将失去安全性、代码重用、缓存、可测试性和许多其他因将“视图”与数据提供者分离而产生的好处的机会。

拥有多年经验和比我想象的更多脑力的人开发出像 MVC 和 MVVM（事实上的 Silverlight 标准）这样的模式有很多充分的理由。我强烈建议您阅读更多关于这些模式和“SOLID”设计原则的内容。

它将把你的开发带入一个全新的世界，你最终会成为一个更好的开发者。

# jquery - jQuery - 替换字符串中的字符，然后执行验证规则

> ID：12432103
> 
> 赞同：0
> 
> 时间：2012-09-14T21:16:58.970
> 
> 标签：jquery

试图弄清楚是否有更简洁或更优雅的方式来编写下面的代码。我用破折号替换文本框中的任何斜杠，然后使用自定义格式字符串将验证规则应用于文本框：

```
var bday = $("#home-birthday");
var bdayVal = bday.val();
bday
    .val(bdayVal
        .replace(/\//g, '-')
    )
;
bday
    .rules("add", {
        mydate: true
    })
; 
```

我有一些变化，但我想我会把它扔在这里，看看是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:23:02.527

```
$("#home-birthday").val(function(i, val) {
    return val.replace(/\//g, '-');
}).rules('add', {mydate: true}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:19:39.703

```
var bday = $("#home-birthday");
bday.val(
    bday.val().replace(/\//g, '-')
).rules(
    "add", 
    {mydate: true}
); 
```

# tfs - 标准分行计划中的服务分行

> ID：12432104
> 
> 赞同：2
> 
> 时间：2012-09-14T21:17:00.370
> 
> 标签：tfs, merge, branch

我有一个关于标准分支计划的非常简单的问题。

我了解分支，FI和RI等。我不太了解的是如何在实践中使用Servicing分支。

我的理解是在发布时，我将 Main -> R1.SP1 分支（例如，假设这是我的第一个版本），然后*立即*将 R1.SP1 分支到 R1。然后将 R1 设置为只读。这是我完全理解和喜欢的。

这是我不明白的：如何以及何时创建 R1.SP1、R1.SP2、R1.SP3？

随着时间的推移，我是否将 RI SP1 返回到 main，然后将 main 分支到 SP2/3/n？

换句话说，这些未来的 SP 如何为自己的发布/部署进行更改？

例如，如果客户报告 R1 中的错误，我应该从哪里签出代码以进行此更改，以及在哪里签入/提交更改/修复的代码？我要签到 SP1 分支吗？（因为 R1 分支是只读的）。然后呢？ 

我想我在问我的持续开发在哪里为 R1 创建未来的 SP 以及如何创建和准备它们自己的发布/部署？

一个非常简单的分步场景示例将是最有帮助/赞赏的。

如果我的问题不清楚，请告诉我，我会尽力修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T22:02:19.590

Not a TFS specialist, but what I read is:

> 1.  Developers only need to check in once based on which release vehicle the change is for (i.e. Hotfixes go into the product `HOTFIX` branch).
> 2.  No need for baseless merges. Create a natural merge path back to `MAIN` by creating a hierarchal branch structure based on your release vehicles.
> 3.  Reduce risk of regressions. By creating a parent/child branch relationship between `MAIN->SP->` and `HOTFIX` branches changes are naturally merged into future release (i.e. `Hotfixes` merge into the `SP` branch on their way to `MAIN`) reducing risk of bug regressions in future releases.
> 
> After the release branches are created changes from `MAIN` you should not merge (`FI`) into the release branches.
> **Changes should merge – one way – from `RELEASE` to `MAIN`.
> Also, changes should always merge through intermediate branches (i.e. `RELEASE` -> `HOTFIX` -> `SERVICEPACK` -> `MAIN`) to ensure that bug fixes remain consistent in subsequent releases**.

![Advanced branch Plan](../Images/49f0d172d68b634a2a7c5791aa997b00.png)

I think that last section explicitly mentions how the workflow of merges should go once a version has been released into production.
It should go back to main until enough has been consolidated in order to create a new set of ship vehicles (from servicing, where you choose a version to start your new SPx, to Hoyfix.spx, to release.spx)

* * *

The [OP user1448758](https://stackoverflow.com/users/1448758/user1448758) points out in the comment the article [**Where do I fix a production defect?**](http://blogs.msdn.com/b/billheys/archive/2011/03/22/where-do-i-fix-a-production-defect.aspx) which mentions:

> The `Release` branch is a child of the `hotfix` or `servicing` branch, rather than in a separate branching structure. **This allows you to have multiple active release sets (consisting of `Service` Pack, `Hotfix`, `Release` branches) for each of the minor or major releases you need to support in parallel**.
> The hotfix would be applied to the specific release the bug is found in, and then merged (RI) to `Main` and possibly into vNext development branches.
> 
> Since the development branches are working on `vNext` work after `vCurrent` is released, I discourage you from fixing defects found in `vCurrent` (post-release) in the `vNext` development branch.
> After you release `Sprint 1`, you should fix defects (post-release) in `Sprint 1` on the **`release`** side, and fix bugs (pre-release) in Sprint 2 on the `development` side (`vNext`).

**`Release` is a child of `hotfix`**. **At the time you create the release, the contents of `hotfix` and release are the same**.
`Release` is made read-only and `Hotfix` is available for making defect fixes against what was released.

> **The problem with inverting the structure, is you cannot move a `hotfix` to `Main` without going through `Release`, and doing so means you no longer have a copy of the code as released**.

# postgresql - 如何为 postgresql 9.2 安装额外的模块？像cube.control？

> ID：12432107
> 
> 赞同：0
> 
> 时间：2012-09-14T21:17:14.070
> 
> 标签：postgresql

我通过 macports 安装了 postgresql 9.2。通常我可以通过在我正在使用的数据库中运行“创建扩展”命令来安装扩展。虽然它适用于fuzzystrmatch，但我找不到适合立方体模块的文件。以下是我安装的模块。

```
select * from pg_available_extensions;
 name        | default_version | installed_version |                                  -
 adminpack          | 1.0             |                   | administrative functions for      PostgreSQL
 dblink             | 1.0             |                   | connect to other PostgreSQL databases from within a database
 file_fdw           | 1.0             |                   | foreign-data wrapper for flat file access
 fuzzystrmatch      | 1.0             | 1.0               | determine similarities and distance between strings
 lo                 | 1.0             |                   | Large Object maintenance
 pageinspect        | 1.0             |                   | inspect the contents of database pages at a low level
pg_buffercache     | 1.0             |                   | examine the shared buffer cache
pg_freespacemap    | 1.0             |                   | examine the free space map (FSM)
pg_stat_statements | 1.1             |                   | track execution statistics of all SQL statements executed
pg_trgm            | 1.0             | 1.0               | text similarity measurement and index searching based on trigrams
pgcrypto           | 1.0             |                   | cryptographic functions
pgrowlocks         | 1.0             |                   | show row-level locking information
pgstattuple        | 1.0             |                   | show tuple-level statistics
plpgsql            | 1.0             | 1.0               | PL/pgSQL procedural language
tablefunc          | 1.0             | 1.0               | functions that manipulate whole tables, including crosstab
uuid-ossp          | 1.0             |                   | generate universally unique identifiers (UUIDs)
(16 rows) 
```

我在哪里可以下载其他缺失的模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T23:19:23.443

如果您通过[https://postgresapp.com](https://postgresapp.com)安装它，它应该附带这些附加扩展以及 PostGIS 和 PLV8。

# javascript - 重置在 iframe 中经过 jquery 评估的 javascript

> ID：12432111
> 
> 赞同：0
> 
> 时间：2012-09-14T21:17:33.917
> 
> 标签：javascript, jquery, iframe, eval

我在 One-Page-App (javascript) 中使用 iframe，通过`postMessage`父文档向它发送 JSON 对象数据。

该数据的一部分在 iframe 内进行评估

```
js = $.globalEval(javascript_to_be_executed), $(window).load() 
```

现在，当我通过用 jQuery 替换`body`and`style`元素从内部重置 iframe 时`clear()`，评估的 javascript 似乎仍然在 iframe 内运行。我不想完全重新加载 iframe 以保持 http 请求最少，有什么办法可以重置 JS 吗？

# java - SWT - 表与 TableViewer

> ID：12432112
> 
> 赞同：7
> 
> 时间：2012-09-14T21:17:34.630
> 
> 标签：java, swt, jface, tableviewer

我正在使用 SWT 创建一个新项目。我将在项目中有 3 或 4 个不同的表。我对 SWT 相当陌生，我发现自己在问我应该只使用`Table`还是应该是`TableViewer`.

我想了解一些关于何时只使用 the`Table`以及何时使用 a`TableViewer`是最佳路线的良好指南。

1.  使用 a`TableViewer`而不是 a 有什么好处`Table`？
2.  所有的表都应该有一个`TableViewer`吗？
3.  如果我正在处理表格中的数据，这只是`Table`最好的方法吗？

只是真的想要一些清晰，所以当我创建项目时，我会以正确的方式去做。

**编辑**

我创建了一个`Tablemodel`用于我的第一个表的类。但是该`createColumns`方法专门针对该特定表。

是否可以有一个模板`TableViewer`类？
我可以更改方法以使其更适用于不同的表吗？

这是该方法的一个片段：

```
private void createColumns() {

  String[] titles = { "ItemId", "RevId", "PRL", "Dataset Name", "EC Markup" };
  int[] bounds = { 150, 150, 100, 150, 100 };

  TableViewerColumn col = createTableViewerColumn(titles[0], bounds[0], 0);
  col.setLabelProvider(new ColumnLabelProvider() {
     public String getText(Object element) {
        if(element instanceof AplotDataModel.AplotDatasetData)
           return ((AplotDataModel.AplotDatasetData)element).getDataset().toString();
        return super.getText(element); 
        }
     }); 

  col = createTableViewerColumn(titles[1], bounds[1], 1);
  col.setLabelProvider(new ColumnLabelProvider() {
     public String getText(Object element) {
        if(element instanceof AplotDataModel.AplotDatasetData)
           return ((AplotDataModel.AplotDatasetData)element).getRev().toString();
        return super.getText(element); 
        }
     }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T08:39:55.263

一般来说，我会建议一个`TableViewer`. 查看器将处理您必须自己使用`Table`. 删除、添加和移动项目以及自定义项目的显示方式更容易。使用查看器处理点击事件真的很容易。

在少数情况下，我会使用`Table`没有 a 的 a `TableViewer`。例如：当表格仅用于显示一组永不改变的静态项目时。在这种情况下，a`TableViewer`可能有点过头了。

但是，您应该记住，您的项目可能会增长，您可能需要这些“简单”表来做更多的事情，而不仅仅是显示静态项目。在这种情况下，您必须用查看器替换表格，这将是很多工作。

`Table`所以在使用没有 a之前请三思而后行`TableViewer`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:38:50.550

[http://sunnyshekhar.blogspot.com/2013/04/creating-swt-table-below-i-will-try-to.html](http://sunnyshekhar.blogspot.com/2013/04/creating-swt-table-below-i-will-try-to.html)

在这里，我试图解释如何在 swt 中创建表。我想在 swt 中创建表说起来容易做起来难。我们必须面对很多复杂的情况。实现有点难以理解。但是我们在 swt 中有很多自定义功能。还有一点需要注意的是，Swt 是 Os 之上的一层，所以在 Swt 中，我们使用 Os 提供给我们的任何东西。有时很难创建一个复选框并将其移动到单元格的中心。我在创建表格时遇到了很多类似的问题，但你总是有技巧或解决方法。在 Swt 中，我们有明确定义的类，如果你实现这些类，它们会提供各种方法来处理表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:50:29.870

我建议你`TableViewer`总是使用，除非你想做很多定制。

[http://www.eclipse.org/articles/article.php?file=Article-CustomDrawingTableAndTreeItems/index.html](http://www.eclipse.org/articles/article.php?file=Article-CustomDrawingTableAndTreeItems/index.html)

好文章开始

[http://www.vogella.com/articles/EclipseJFaceTable/article.html#tutorial_jfacetableviewer_usage](http://www.vogella.com/articles/EclipseJFaceTable/article.html#tutorial_jfacetableviewer_usage)

# image - Qt 创建和写入 16 位 png 图像

> ID：12432113
> 
> 赞同：1
> 
> 时间：2012-09-14T21:17:34.820
> 
> 标签：image, qt

是否可以使用 QT 创建和编写 16 位灰度 png 图像？我有一个整数数组，想将它写入一个 16 位缓冲区，创建一个 qimage 并写入它。我看到有一种称为深度的东西来设置位数，但找不到创建 16 位图像的语法。[http://doc.qt.io/qt-5/qimage.html#depth](http://doc.qt.io/qt-5/qimage.html#depth)

# php - 描述中替换的图像和超链接

> ID：12432116
> 
> 赞同：0
> 
> 时间：2012-09-14T21:17:58.033
> 
> 标签：php, html, replace

我有一个搜索表单，用户在其中输入关键字，并将结果与​​描述中的关键字显示为突出显示的文本，为了突出显示，我在该关键字上使用了另一个类。问题是，如果 some`hyperlink`或 some中有关键字`<img> tag`，它也会应用那个导致图像加载失败和链接不起作用的类。

这就是我获取结果并在有任何关键字时突出显示它们的方式。

```
if($_GET['key']){ 
        $key = $_REQUEST['key'];
$sql = "select * from tbl_feed WHERE title LIKE '%$key%' OR description like '%$key%'";
$rs  = $dbFun->selectMultiRecords($sql);
for($j=0;$j<count($rs);$j++){
        $title= mb_convert_encoding($rs[$j]['title'], "iso-8859-1","auto");
        $desc   = mb_convert_encoding($rs[$j]['description'],"iso-8859-1","auto");
        ?>
        <?php
      for($i = 0; $i < sizeof($arrKeywords); $i++){
                        $title = str_ireplace($arrKeywords[$i], "<font class=\"highlight\">" . $arrKeywords[$i] . "</font>", $title);
                        $desc = str_ireplace($arrKeywords[$i], "<font class=\"highlight\">" . $arrKeywords[$i] . "</font>", $desc);
                    }
      ?>

<a href="<?=$rs[$j]['link']?>" target="_blank"><strong><?=$title?></strong></a><BR />
<?=$rs[$j]['pubdate']?><BR /><BR />
<?=$desc?><BR /><BR /><BR />
<? }
} 
```

有什么方法可以跳过`html`替换标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:27:38.787

@托兰多

输出显示如下

```
Sub-header image reference:  Newsroom Main image:  35 Million Directors project will help inspire more travellers around the world to come and explore canada. [newsroom_additional_information]   35 Million Directors project will help inspire more travellers around the world to come and explore canada. Additional Information:  <p> <strong>Previous five news releases</strong></p> <p> <a href="http://en-corporate.canada.travel/content/news_release/q1-2012-international-market-insights-report">Q1 2012 International Market Insights. </a></p> <p> <a href="http://en-corporate.canada.travel/content/news_release/rendez-vous-canada-tiac-prime-strategies">Canadian Tourism Commission business notice: Rendez-vous canada event management.</a></p> <p> <a href="http://en-corporate.canada.travel/content/news_release/rendez-vous-canada-2012-edmonton">Rendez-vous canada 2012: ready to rev up big business for tourism.</a></p> <p> <a href="http://en-corporate.canada.travel/content/news_release/signature-experiences-collection-sec-48-businesses">Outside the ordinary in canada.</a></p> <p> <a href="http://en-corporate.canada.travel/content/news_release/signature-experiences-collection-global-marketing-platform">Signature Experiences Collection® members make international debut as Canadian Tourism Commission launches new global marketing platform</a></p> read more 
```

# android - 如何在 Android 中的 TextView 选定项中进行永久文本颜色更改？

> ID：12432122
> 
> 赞同：0
> 
> 时间：2012-09-14T21:18:21.230
> 
> 标签：android, textview, android-selector

我想在 TextView 上的按键上进行永久性颜色更改。

这是我的颜色选择器位于 res/color 文件夹中。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_selected="true" android:color="#a7524a"/>
<item android:state_focused="true" android:state_enabled="false" android:color="#a7524a"/>
<item android:state_pressed="true" android:color="#a7524a"/>
<item android:color="#595959"/>
</selector> 
```

在 TextView 中，我将其称为

```
android:textColor="@color/bright_text_dark_focused" 
```

它工作正常。当用户 a 按下 TextView 项目并释放时，我想使颜色更改永久化。默认情况下，它会在发布时变为默认颜色。

更新：

我已将颜色选择器更改为

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">      
<item android:state_focused="true" android:color="#a7524a"/>
<item android:state_pressed="true"  android:color="#a7524a" />   
<item android:color="#595959"/>    
</selector> 
```

这和以前一样。我已经添加了

```
android:textIsSelectable = "true" 
```

TextView 中的属性。然后选择属性上的背景颜色消失。但是当我点击这些项目时，文本颜色会变成永久性的。为什么会发生这种情况的任何线索？实际上我在列表视图中有这个文本视图。背景颜色属性来自 ListView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:22:56.507

我认为，如果您添加该行`<item android:state_enabled="true" android:color="@color/bright_text_dark_focused"/>`然后启用`TextView`on touch，它将保留。只要您从不禁用它，就是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T11:00:56.533

android:state_activated 必须解决您的问题：

```
<item android:state_activated="true" android:color="#fff"/> 
```

你也可以为你的 listView 设置这个：

```
mListView.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

当 listView 项目点击这个时：

```
mListView.setItemChecked(position, true); 
```

# mysql - MySQL/MyISAM 中的原子查询

> ID：12432123
> 
> 赞同：3
> 
> 时间：2012-09-14T21:18:24.443
> 
> 标签：mysql, myisam

假设我想使用带有 MyISAM 引擎的 MySQL 从表中选择一个最大值，然后插入一条新记录~~与这个最大值 + 1~~基于此值（对其应用转换后）。我不希望同时发生任何其他事务，这些事务将读取相同的最大值，然后尝试插入相同的新记录。

我该如何防止这种情况发生？

我需要[锁定](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)整个表，还是什么？

* * *

需要明确的是，我相当肯定我不能`AUTO_INCREMENT`在这里使用，除非我可以将它执行的操作重新定义为比“加一”复杂得多的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:23:07.617

```
LOCK TABLES `tbl` WRITE;
INSERT INTO `tbl` (`id`, `foo`) SELECT MAX(`id`)+1, 'bar' FROM `tbl`;
UNLOCK TABLES; 
```

`AUTO_INCREMENT`但如果它是标准主键/ID 类型字段，则应使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:21:54.957

让数据库为您完成工作，这样您就不必担心这一点。使用已经内置的[auto_increment功能。](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

# javascript - Uploadify 无法读取属性“queueData”

> ID：12432124
> 
> 赞同：3
> 
> 时间：2012-09-14T21:18:26.497
> 
> 标签：javascript, uploadify, swfupload

我不知道这是怎么回事。我有 2 个占位符元素，我用 uploadify 实例替换。2 个占位符 html 元素完全相同，它们被替换为完全相同的 uploadify 代码（使用 jquery .each 循环遍历 2 个占位符）。唯一的区别是他们有不同的ID。

其中一个工作得很好，另一个抛出异常“无法读取未定义的属性 queueData”。我签入了uploadify 代码，这是因为它找不到应该存储的swfupload。uploadify 中的相关代码在这里

```
if (flashInstalled) {
                // Create the swfUpload instance
                window['uploadify_' + settings.id] = new SWFUpload(swfUploadSettings);
                var swfuploadify = window['uploadify_' + settings.id];

                // Add the SWFUpload object to the elements data object
                $this.data('uploadify', swfuploadify); 
```

以及它试图从 $this.data 中检索它的部分

```
// Start uploading files in the queue
    upload : function() {

        var args = arguments;

        this.each(function() {
            // Create a reference to the jQuery DOM object
            var $this        = $(this),
                swfuploadify = $this.data('uploadify');

            // Reset the queue information
            swfuploadify.queueData.averageSpeed  = 0;
            swfuploadify.queueData.uploadSize    = 0; 
```

swfuploadify 显示为“未定义”。我在它发生时对其进行了调试，并且它设置数据的第一行肯定发生了，但是到第二部分发生时它还没有定义。我完全不明白这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-05T10:47:29.650

看起来很明显，但请检查您是否安装了闪存，我刚刚在我们的开发机器上遇到了确切的错误，这解决了问题。

# sitemap - 如何将站点地图添加到谷歌代码托管？

> ID：12432125
> 
> 赞同：1
> 
> 时间：2012-09-14T21:18:35.070
> 
> 标签：sitemap, google-code

我有一个托管在谷歌代码中的项目。
我想上传站点地图。可能吗？如何？
我设法创建了一个 sitemap.xml 文件，但似乎谷歌代码并没有给我上传它的方法。
有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-08T09:32:40.147

不，这是不可能的。站点地图不适用于 Google 代码。

# python - 在 Apache 2 中禁用缓存以进行 Python 开发

> ID：12432130
> 
> 赞同：2
> 
> 时间：2012-09-14T21:18:58.110
> 
> 标签：python, apache, caching, wsgi

在 Apache 2 上使用 mod-python mod-wsgi 在 Python 中进行开发。

一切运行良好，但如果我对我的 PY 文件进行任何更改，更改不会传播，直到我重新启动 Apache `/etc/init.d/apache2 restart`。

这很烦人，因为我每次在开发中都无法 SSH 并重新启动 Apache 服务。

**有什么方法可以禁用 Apache 缓存？**

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:31:06.927

从性能的角度来看，它是一个非常糟糕的设置，但我在 http.conf 中所做的设置`MaxRequestsPerChild`为 1。这具有每个 apache 进程在死前处理单个请求的效果。它会扼杀吞吐量（因此不要使用该设置运行基准测试，或在生产站点上使用它），但它具有为每个请求为 python 提供干净环境的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T21:42:12.787

If you are using mod_wsgi you can use the [`WSGIScriptReloading`](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIScriptReloading) directive to enable you to issue a `touch your.wsgi` command and cause WSGI to reload the ~~interpreter~~ process.

# c++ - 使用扩展类声明方法

> ID：12432131
> 
> 赞同：0
> 
> 时间：2012-09-14T21:19:10.060
> 
> 标签：c++, syntax, function-prototypes

关于声明函数的快速问题。可以说我有以下代码：

```
class a{
    int var;
    /* stuff*/
}

class b : a{
    /* other stuff*/
}

class c : a{
    /* more other stuff*/
}

class d{
    myFunctionThatWantsTheIntNamedVar(SubClassOfClassA SomeClassUnknownAtCompileTime);
} 
```

而 myFunctionThatWantsTheIntNamedVar() 就是想要在 a 的基类中声明的整数（称为 var）。类 d 中的函数可以传递类 b 或类 c 的实例，这在编译时是未知的（仅在运行时）。

有没有一种方法可以简洁地声明一个可以采用 b 类或 c 类并获得相同基变量的函数？

同时我所做的是在 d 类中声明两个方法，如下所示：

```
class d{
    myFunctionThatWantsTheIntNamedVar(c aClassCInstance);
    myFunctionThatWantsTheIntNamedVar(b aClassBInstance);
} 
```

这很好，但是这两种方法中的代码是相同的......而且根据我对面向对象编程的理解，如果代码相同，你应该能够将它组合成一个更好的功能。

对此有什么想法吗？只是在这里寻找最佳实践或其他建议，因为我在一家小公司工作并且有时很难获得反馈。

编辑：对不起，我的代码有错误，将其更改为：

```
myfunctionThatWantsTheInNamedVar(a aClassAInstance); 
```

至：

```
myfunctionThatWantsTheInNamedVar(c aClassCInstance); 
```

我的错。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T21:25:47.343

提供一个可以访问变量的公共访问器方法，并确保不要在 b 类和 c 类中隐藏它的名称。

```
class a{
    int var;
    /* stuff*/
 public:
  const int& getVar() const { return var; }
  int& getVar() { return var; }
}; 
```

然后引用一个`a`in oyur 函数：

```
class d{
 public:  // you probably want a public member function
    myFunctionThatWantsTheIntNamedVar(const a& theA) {
      int n = theA.getVar();
} 
```

然后你可以用`b`or`c`实例调用它：

```
b b0;
c c0;
d d0;
d0.myFunctionThatWantsTheIntNamedVar(b0);
d0.myFunctionThatWantsTheIntNamedVar(c0); 
```

请记住，在您的代码中，变量`var`是私有的，以及类`b`和`c`. 为此，您需要公开继承：

```
class b : public a { .... };
class c : public a { .... }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T21:22:56.687

```
class d{
    myFunctionThatWantsTheIntNamedVar(const a& anA);
} 
```

如果您确实要禁止 a 的实际实例，但允许任何派生类，则可以使用运行时类型标识来引发异常（如果它实际上是 a，而不是派生类）。

如果你在 a 中有一个纯虚函数没有实现（但需要 b 和 c 提供实现），那么你甚至不能实例化 a，所以不需要检查。但是，只有当你有理由这样做时——我不会为此建议一个这样的人工构造。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T21:25:37.263

为什么不这样：

```
class d{
   void myFunction(A a) {;}
}; 
```

如果你说你的两个函数的代码是相同的，这意味着它们没有使用 C 类和 B 类之间不同的任何东西。换句话说，你只使用 B 和 C 的共同点，这实际上是A类。

当然（A a）只是一个例子。您应该根据需要将参数声明为 (const A& a) 或 (A* pA)。另外，我假设它`var`在其层次结构之外以某种方式可见，或者通过将其公开或更好地，通过将​​其封装在公共访问器中。

# java - java.io.File.length() 为目录返回什么？

> ID：12432135
> 
> 赞同：2
> 
> 时间：2012-09-14T21:19:13.890
> 
> 标签：java, file, file-io

java.io.File.length() 的 javadoc 指出：

> 返回此抽象路径名表示的文件的长度。如果此路径名表示目录，则返回值未指定。

我一直在 Solaris 上进行测试，这似乎是基于目录中文件的数量，但它总是返回比包含“。”的文件\文件夹更大的数量。文件。

有谁知道这个值在 Solaris\Linux\OSX\Windows 上意味着什么？它可能是特定于操作系统的，但很高兴知道它是否有任何价值！

**编辑：**

我同意那些建议这不是应该用于“一次编写，随处运行”Java 方法的功能的评论，但是由于返回的值不是 0L（它可能在某些操作系统上，但不是 Solaris）我有兴趣知道该值所指的内容。

本机 Java 调用通常是直接的单个 OS 过程，因此无论值是指什么都有一定的意义，您可以免费获得它，而无需加载更多的 java.io.File(s)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:32:28.790

File.length 主要用于确定文件的大小。它永远不应该用于确定目录中的文件数。JavaDocs 状态未定义的事实应该已经触发了警钟。

如果您不知道目录中的文件数，则应使用[File.listFiles](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29)代替（或其替代方案之一）

# javascript - 在窗口调整大小时调整 iframe 的宽度

> ID：12432143
> 
> 赞同：1
> 
> 时间：2012-09-14T21:19:41.510
> 
> 标签：javascript, html, iframe

我想在侧边栏旁边放一个 iframe。侧边栏有一个 250px 的常量，我希望 iframe 的宽度填满屏幕的其余部分。所以它的宽度是窗口大小减去 250px。我需要这个动态改变。我坚持使用我现有的代码。

```
<script type="text/javascript">$(window).resize(function() {
  $('iframe').prepend(width:$(window).width()px;);

});

</script>
<div style="float:left;"><iframe src="iframe url" 
frameborder="0" 
noresize="noresize" id ="iframe"
style="position:absolute; background:transparent; width:75%;height:100%;top:38px;border:none;padding:0;" />
</iframe>
</div> 
```

这是 javascript 和 iframe。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:23:23.917

使用这个 JS：

```
$(function() {
   var newwidth = $(window).width() - 250;
   $('iframe').css({width: newwidth+'px'});
});

$(window).resize(function() {
   var newwidth = $(window).width() - 250;
   $('iframe').css({width: newwidth+'px'});
}); 
```

您还应该使周围的 DIV position:relative 使用绝对定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-30T08:57:43.097

如果屏幕更大，这将有助于填充您拥有的任何空间并保持原始尺寸： [https ://jsfiddle.net/koaab543/2/](https://jsfiddle.net/koaab543/2/)

我正在使用原始高度和宽度来计算比例。然后使用 css 获取限制为空间大小的当前宽度，并从中得出新的高度。

高度 / 宽度 = x / 当前宽度

```
function responseveIframe() {
  $('iframe').height(
    $('iframe').attr("height") / $('iframe').attr("width") * $('iframe').width()
  );
}

responseveIframe();

$(window).resize(function() {
  responseveIframe();
});
```

```
iframe {
  max-width: 100%;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<iframe width="854" height="480" src="https://www.youtube.com/embed/C0DPdy98e4c"></iframe>
```

# java - Java 和 AppStore 收据验证

> ID：12432147
> 
> 赞同：9
> 
> 时间：2012-09-14T21:20:02.603
> 
> 标签：java, ios, in-app-purchase

我正在尝试在服务器端验证付款收据。我得到了`{"status":21002, "exception":"java.lang.IllegalArgumentException"}`回报

这是代码：

```
private final static String _sandboxUriStr = "https://sandbox.itunes.apple.com/verifyReceipt";

public static void processPayment(final String receipt) throws SystemException
{
    final BASE64Encoder encoder = new BASE64Encoder();
    final String receiptData = encoder.encode(receipt.getBytes());

    final String jsonData = "{\"receipt-data\" : \"" + receiptData + "\"}";

    System.out.println(receipt);
    System.out.println(jsonData);

    try
    {
        final URL url = new URL(_sandboxUriStr);
        final HttpURLConnection conn = (HttpsURLConnection) url.openConnection();
        conn.setRequestMethod("POST");
        conn.setDoOutput(true);
        final OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
        wr.write(jsonData);
        wr.flush();

        // Get the response
        final BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        String line;
        while ((line = rd.readLine()) != null)
        {
            System.out.println(line);
        }
        wr.close();
        rd.close();
    }
    catch (IOException e)
    {
        throw new SystemException("Error when trying to send request to '%s', %s", _sandboxUriStr, e.getMessage());
    }
} 
```

我的收据如下所示：

```
{\n\t"signature" = "[exactly_1320_characters]";\n\t"purchase-info" =
"[exactly_868_characters]";\n\t"environment" = "Sandbox";\n\t"pod" =
"100";\n\t"signing-status" = "0";\n} 
```

带有 BASE64 编码收据的收据数据如下所示：

```
{"receipt-data" : "[Block_of_chars_76x40+44=3084_chars_total]"} 
```

有人有一个想法或示例代码，我如何从收据字符串中获取回复 JSON，在[这里](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html#//apple_ref/doc/uid/TP40008267-CH104-SW1)提到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-06T08:47:09.940

21002：问题出在 Java 中的 Base64 编码上。当我在 IOS 中进行编码并将其用作来自服务器的请求而没有在 Java 中进行任何编码时，它就起作用了。

```
switch (status) {
        case 21000:
            msg = "The App Store could not read the JSON object you provided";
            logger.info("\n  21000 : The App Store could not read the JSON object you provided. ");

        break;
    case 21002:
        msg = "The data in the receipt-data property was malformed.";
        logger.info("\n  21002 : The data in the receipt-data property was malformed..   ");
        break;
    case 21003:
        msg = "The data in the receipt-data property was malformed.";
        logger.info("\n  21003 : The receipt could not be authenticated. ");
        break;
    case 21004:
        msg = "TThe shared secret you provided does not match the shared secret on file for your account.";
        logger.info("\n  21004 : The shared secret you provided does not match the shared secret on file for your account. ");
        break;
    case 21005:
        msg = "The receipt server is not currently available.";
        logger.info("\n  21005 : The receipt server is not currently available. ");
        break;
    case 21006:
        msg = "This receipt is valid but the subscription has expired. When this status code is returned to your server, the receipt data is also decoded and returned as part of the response.";
        logger.info("\n  21006 : This receipt is valid but the subscription has expired. When this status code is returned to your server, the receipt data is also decoded and returned as part of the response. ");
        break;
    case 21007:
        msg = "This receipt is a sandbox receipt, but it was sent to the production service for verification.";
        logger.info("\n  21007 : This receipt is a sandbox receipt, but it was sent to the production service for verification. ");
        break;
    case 21008:
        msg = "This receipt is a production receipt, but it was sent to the sandbox service for verification.";
        logger.info("\n  21008 : This receipt is a production receipt, but it was sent to the sandbox service for verification. ");
        break;

    default:
        msg = "Active subscription.";
        logger.info("\n  0 : valid ....Active subscription. ");
        break;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-21T11:15:55.293

```
CloseableHttpClient client = HttpClients.createDefault();

JSONObject requestData = new JSONObject();
requestData.put("receipt-data", recept);
requestData.put("password", password);

HttpPost httpPost = new HttpPost("https://sandbox.itunes.apple.com/verifyReceipt");
StringEntity entity = new StringEntity(requestData.toString());
httpPost.setEntity(entity);
httpPost.setHeader("Content-type", "application/x-www-form-urlencoded");

CloseableHttpResponse response = client.execute(httpPost);
BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

StringBuffer result = new StringBuffer();
String line = "";
while ((line = rd.readLine()) != null) {
    result.append(line);
}
System.out.println(result.toString());
response.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:35:58.133

我不熟悉该服务，但是当内容类型或接受未正确设置的标头时，我在其他服务中看到了类似的错误。

尝试类似的东西

```
 con.setRequestProperty("Content-Type", "application/json");
 con.setRequestProperty("Accept", "application/json"); 
```

（或者他们所期待的任何东西。我假设是 json）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-21T10:45:23.777

对于稍后到达这里的每个人，请确保在您的 JSONObject 上调用 toString()。因此，如果您使用的是 resTemplate，请使用：

```
 JSONObject jsonObject = new JSONObject();
    jsonObject.put("receipt-data", "your-receipt");

    // This will result in a response with status 21002 (https://developer.apple.com/documentation/appstorereceipts/status)
    HttpEntity<JSONObject> httpEntityRequest = new HttpEntity<>(jsonObject);

    // call toString() makes it work!
    HttpEntity<String> httpEntityRequest = new HttpEntity<>(jsonObject.toString());

    ResponseEntity<String> response = restTemplate.postForEntity(appleVerifyReceiptUrl, httpEntityRequest, String.class); 
```

# jquery - 同时运行 jquery 滑块

> ID：12432148
> 
> 赞同：1
> 
> 时间：2012-09-14T21:20:26.440
> 
> 标签：jquery, jquery-ui

这是我的带有 html 的简单 jquery ui 代码。

```
$(document).ready(function(){
    $("img").click(function () {
          $(this).hide("slide", { direction: "left" }, 1000); 
          $(this).show("slide", { direction: "right" }, 1000); 
    });
}); 
```

这里是 html

```
<img src="images/logo.png"/> 
```

图像被隐藏然后又回来了，我希望这件事是同时的。

注意：您可能会提出一些类似的问题，我检查了其中一些，但没有一个对我有用。寻找一个简单的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:35:05.863

这可能不是最干净的方法，但您可以克隆该项目，然后为克隆的项目设置动画：

```
$("img").click(function() {
    var x = $(this).clone(true);

    $("body").append(x);

    $(this).hide("slide", {direction: "left"}, 1000, function() {
        $(this).remove();
    });
    x.show("slide", {direction: "right"}, 1000);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:10:25.690

这只是一个例子，需要调整，但我认为你可以理解。

HTML

```
<img id="img1" src="image1.jpg">
<img id="img2" src="image2.jpg"> 
```

CSS

```
img{
  width:250px;
  height:200px;
  position: absolute;
}
#img1{
  left:0;
}
#img2{
  left:250px;
} 
```

Javascript

```
$("#img1").click(function() { 
   $("#img1").animate({left: '-250px'},2000); 
   $("#img2").animate({left: '0'},2000); 
}); 
```

[例子](http://jsfiddle.net/jur4x/3htpr/7/) ​</p>

# ruby-on-rails - ruby on rails 在控制器中使用“create”方法，因为 GET 不起作用

> ID：12432149
> 
> 赞同：2
> 
> 时间：2012-09-14T21:20:32.153
> 
> 标签：ruby-on-rails, model-view-controller

**友谊控制器.rb**

```
class FriendshipsController < ApplicationController

  # POST /friendships
  # POST /friendships.json
  def create

    #@friendship = Friendship.new(params[:friendship])
    @friendship = current_user.friendships.build(:friend_id => params[:friend_id])

    respond_to do |format|
      if @friendship.save
        format.html { redirect_to user_profile(current_user.username), notice: 'Friendship was successfully created.' }
        format.json { render json: @friendship, status: :created, location: @friendship }
      else
        format.html { redirect_to user_profile(current_user.username), notice: 'Friendship was not created.' }
        format.json { render json: @friendship.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /friendships/1
  # DELETE /friendships/1.json
  def destroy
    @friendship = Friendship.find(params[:id])
    @friendship.destroy

    respond_to do |format|
      format.html { redirect_to friendships_url }
      format.json { head :no_content }
    end
  end
end 
```

当我去`http://localhost:3000/friendships?friend_id=1`我得到

```
Unknown action

The action 'index' could not be found for FriendshipsController 
```

我遵循了本教程：[http ://railscasts.com/episodes/163-self-referential-association](http://railscasts.com/episodes/163-self-referential-association)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:27:24.827

您可能将创建配置为 POST 而不是 GET。

```
 # POST /friendships
  # POST /friendships.json
  def create 
```

如果您使用脚手架创建控制器的骨架，情况也是如此。您可以在路由配置中更改此设置。但请注意，通过 GET 创建内容不再被视为完全符合 REST 范式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:38:14.990

正如在另一篇文章中提到的，这可能是由于 Rails 的默认脚手架将 POST 请求配置为创建。要解决此问题，您可以尝试类似的方法，尽管我不确定它是否会起作用。

```
 match "/friendships" => "friendships#create", :via => [:get]
   get   "/friendships" => "friendships#create" 
```

缺点是`GET`请求`/friendships`不会`index`像默认情况下那样给您操作。

也许你可以用这样的东西来解决这个问题：

```
match "/all_friendships", :to => "friendships#index", :via => :get, :as => :friendships 
```

# haskell - Int vs Word 常用？

> ID：12432154
> 
> 赞同：42
> 
> 时间：2012-09-14T21:21:09.377
> 
> 标签：haskell, type-safety

似乎取/返回的常见模式`Int`（即`ByteString.hGet`and `Data.List.length`）与使用强描述类型的 Haskell 模式相反，因为其中许多情况只能处理正数。使用会不会更好`Word`，或者这些功能是否有偏颇的原因`Int`？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-14T22:42:57.967

确实，Haskell 类型系统的表现力鼓励用户将精确的类型分配给他们定义的实体。但是，经验丰富的 Haskell 人员会欣然承认，必须在最终类型精度（此外，鉴于 Haskell 类型系统的当前限制并不总是可以实现）和便利性之间取得平衡。简而言之，精确类型仅在一定程度上有用。除此之外，它们通常只会造成额外的官僚主义，而收效甚微。

让我们用一个例子来说明这个问题。考虑阶乘函数。对于所有`n`大于 1 的因素， 的阶乘`n`是偶数，而 1 的阶乘并不是很有趣，所以让我们忽略那个。因此，为了确保我们在 Haskell 中对阶乘函数的实现是正确的，我们可能会想引入一种新的数字类型，它只能表示无符号偶数：

```
module (Even) where

newtype Even = Even Integer

instance Num Even where
  ...
  fromInteger x | x `mod` 2 == 0 = Even x
                | otherwise = error "Not an even number."

instance Integral Even where
  ...
  toInteger (Even x) = x 
```

我们将这个数据类型封装在一个不导出构造函数的模块中，使其抽象化，并使其成为所有相关类型类`Int`的实例。现在我们可以给阶乘以下签名：

```
factorial :: Int -> Even 
```

sure的类型`factorial`比我们刚刚说它返回时更精确`Int`。但是你会发现`factorial`用这样的类型定义真的很烦人，因为你需要一个乘法版本，将 an（偶数或奇数）`Int`与 an相乘`Even`并产生 and `Even`。`toInteger`更重要的是，您可能不得不在客户端代码中的调用结果中引入无关调用`factorial`，这可能是造成混乱和噪音的重要来源，而收效甚微。此外，所有这些转换函数都可能对性能产生负面影响。

另一个问题是，当引入一种新的、更精确的类型时，您通常最终不得不复制各种库函数。例如，如果您引入`List1 a`非空列表的类型，那么您将不得不重新实现许多`Data.List`已经提供的功能，但`[a]`仅限于此。当然，然后可以将这些函数方法`ListLike`设为类类型。但是你很快就会得到各种各样的临时类型类和其他样板文件，而且收益也不大。

最后一点是，不应将`Word`其视为`Int`. [Haskell 报告](http://www.haskell.org/onlinereport/haskell2010/haskellch6.html#x13-1350006.4)未指定实际大小`Int`，仅保证此类型应能够表示 [− 2 ^(29) , 2 ^(29) − 1] 范围内的整数。`Word`据说该类型提供未指定宽度的无符号整数。不能保证在任何符合要求的实现中 a 的宽度`Word`对应于 a 的宽度`Int`。

尽管我提出要防止过度类型扩散，但我确实承认引入一种`Natural`自然类型可能会很好。不过，最终，Haskell 是否应该有一个专门的自然数类型，除了`Int`,`Integer`和`Word*` 各种类型，很大程度上取决于口味。而目前的事态很可能在很大程度上只是历史的偶然。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-15T16:09:19.533

与 C 中的推理相同。使用更精确类型的原因是为了防止错误。在这种情况下，错误，例如尝试在没有意义的地方使用负数。但是在 C 中，`Word`上溢或下溢的行为`unsigned int`是回绕。`Word`如果您尝试在预期使用(or ) 的地方使用负数`unsigned int`，您不会让编译器对您大喊大叫，甚至不会在运行时出现异常。你得到一个很大的正数。您无法将其与任何其他（“合法”）大正数区分开来！

看这个：

```
Prelude Data.Word> -1 :: Word
4294967295 
```

不是让错误无法犯下，而是让它们无法被发现。使用`Int`(and `int`)，您至少可以手动检查负值。和`Word`，`unsigned int`你什么都没有。

有价值的是无符号类型，它通过抛出异常来对溢出或下溢做出反应。这仍然不会使错误成为不可能，但它会使它们更容易被发现。但是，它会以性能为代价。*我不知道是否可以在编译时排除它们，但这似乎并不容易。

* 至少，x86 需要额外的指令——在每次操作之后！-- 检查是否发生上溢或下溢。我不知道是否有一种“免费”的架构，虽然它会很好。或者也许是一个可区分的 NaN 值，就像我们对浮点数（可能不是[最负数](http://en.wikipedia.org/wiki/Two's_complement#The_most_negative_number)）所拥有的那样，它可以用来表示不可表示的值......

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-14T23:00:19.740

我的第一个猜测是，无符号算术有一些问题，如果你不注意的话会导致愚蠢的错误：

```
Prelude Data.Word> let x = 0 :: Word in if x - 1 > x then "Ouch" else "Ohayoo"
"Ouch" 
```

它会在看起来是正确的多态函数中出现一些问题：

```
Prelude Data.Word> let f acc x y = if x <= y then f (acc + 1) x (y - 1) else acc
Prelude Data.Word> :t f
f :: (Num a1, Num a, Ord a) => a1 -> a -> a -> a1 
```

使用标准长度函数：

```
Prelude Data.Word> let len' x = if null x then 0 else 1 + len' (tail x) :: Int
Prelude Data.Word> :t len'
len' :: [a] -> Int

Prelude Data.Word> f 0 0 (len' [1,2,3])
4 
```

并使用长度函数返回`Word`：

```
Prelude Data.Word> let len x = if null x then 0 else 1 + len (tail x) :: Word
Prelude Data.Word> :t len
len :: [a] -> Word

Prelude Data.Word> f 0 0 (len [1,2,3])
...diverges... 
```

而且，当然，如果这些函数返回`Word`而不是s `Int`，则需要不断将`Word`s 转换为`Int`s 以在其他常见地方使用它。

# apache-flex - Flex TabBar 选项卡的大小不会调整到低于其显示宽度

> ID：12432155
> 
> 赞同：0
> 
> 时间：2012-09-14T21:21:10.493
> 
> 标签：apache-flex, actionscript, tabbar

我们正在将一些 Flex3 代码重构为 Flex4 代码，但我遇到了 Spark TabBar 控件的问题。在 4.5 中，当将其调整到低于所有选项卡的宽度时，选项卡会缩小。我在 Flex4 上没有看到这一点，在进行了一些谷歌搜索之后，我似乎找不到解决方案。

似乎正在发生的事情是 TabBar 的 minWidth 被设置为所有按钮的总和加上它们之间的间隙。

有什么想法吗？将是最有帮助的。我认为这很容易，但无法解决。

```
<s:TabBar id="myTabBar" top="0" width="100%" dataProvider="{myTabs}" >
    <s:layout>
        <s:HorizontalLayout gap="1" variableColumnWidth="true" />
    </s:layout>
</s:TabBar> 
```

更新：
我想出了一个解决方案，但我不确定它是否是一个理想的解决方案。我采用了默认的 TabBarSkin 并进行了修改以添加测量方法。在 measure 方法中，我遍历选项卡，找到标签对象，并计算宽度。我用它来设置父组件的 maxWidth 。它似乎确实有效，但欢迎对这种方法提出任何意见。我还拿出了上面的布局标签。

```
 protected override function measure():void
        {
            //TODO Auto-generated method stub
            super.measure();

            // Calculate the maximum size of the button should stretch to and then set the host Component 
            // To the maxWidth.  This is accomplished by iterating through the children of the dataGroup 
            // and then getting the label components from labelDisplay.   Once you have that then we can 
            // get the PreferredBoundsWidth and add them all up.  The left and right values are added in as 
            // that is the spacing on each side of the label.  
            var totalButtonWidth:Number = 0;
            var tab:UIComponent;
            var calculatedWidth:Number;

            for (var i:int = 0; i < dataGroup.numElements; i++)
            {
                tab = dataGroup.getElementAt(i) as UIComponent;
                calculatedWidth = 0; 
                if (tab.hasOwnProperty("labelDisplay")) 
                {
                    var tabLabel:Label = (tab["labelDisplay"] as Label); 
                    calculatedWidth = tabLabel.getPreferredBoundsWidth() + tabLabel.left + tabLabel.right; 
                }
                totalButtonWidth = totalButtonWidth + calculatedWidth;

            }

            hostComponent.maxWidth = totalButtonWidth;
            trace("totalWidth is " + totalButtonWidth);
        } 
```

如果我记得，可以从 SDK 中获取皮肤并对其进行修改并重用它，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:04:44.880

是的，按照您在更新中所说的去做是绝对可以的。

但是，从头开始定义自己的皮肤可能比修改现有皮肤容易得多。看看[这个](http://help.adobe.com/en_US/flex/using/WSc2368ca491e3ff92-59bf082612135c9e688-8000.html#WS685c4ccbb85d340c37aa4c55121d51f471a-8000)文档。

# python - Amazon EC2 上的 BitNami DjangoStack

> ID：12432156
> 
> 赞同：0
> 
> 时间：2012-09-14T21:21:11.783
> 
> 标签：python, django, amazon-ec2, bitnami

我已经尝试了好几天了，我已经卸载并重新安装了至少 10 次。我在 Amazon EC2 上运行 BitNami DjangoStack。我已经正确安装了所有东西，我的所有设置文件都正确制作（我知道这一点是因为我在考虑将它们上传到 EC2 之前在我的本地服务器上运行了它们）并且由于某种原因我无法克服错误。我收到多个不同的错误，通常在我每次刷新页面后都会发生变化。当我知道它存在时，我会收到一个错误“模板不存在”，我的 TEMPLATE_DIR 设置正确，一切都正确，这几乎就像 Django 根本没有读取我的设置文件一样。

此外，当我进入 Django 管理面板时，有时我的“注册配置文件”部分会在那里，而其他时候则不会。我可以坐在那里刷新页面并观看该部分的来来去去。

并且当我刷新页面时，有时会出现“找不到页面”错误，它显示了 myproject.urls 中所有定义的 url，并且只显示了管理 url，这些显然不是指定的唯一 url...

我觉得 BitNami DjangoStack 很困惑，根本不知道如何工作。如果错误不断变化并且一切正常，那么每次页面刷新都无法正常工作，那么问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:44:07.760

我已经在 answers.bitnami.org 中回答了你以下问题：

如果 django 显示“模板不存在”，它可能正在查看错误的目录。您可以在“Template-loader postmortem”部分下启用调试模式（DEBUG = True）并阅读当您尝试访问受影响的网页时显示的日志。

请检查您是否按照“如何启动 Django 项目？”中的说明进行操作。在下面的链接上：

[http://wiki.bitnami.org/Components/Django](http://wiki.bitnami.org/Components/Django)

# imagemagick - 请帮我保存在 ImageMagick 中写入的额外图像

> ID：12432160
> 
> 赞同：1
> 
> 时间：2012-09-14T21:21:37.353
> 
> 标签：imagemagick

在 Windows ImageMagick 中，我必须先旋转图像，然后才能将其放置在页面上：

> 转换 .\source1.png -alpha set -background none -rotate 15 rotate.png

然后我把它放在页面上：

```
composite -compose over .\rotate.png -geometry +103+160 bg.png output.png 
```

我试图弄清楚如何不将“rotate.png”写入磁盘，而只是将其存储在内存中直到复合步骤。我试过了：

```
composite -compose over ( .\source1.png -alpha set -background none -rotate 15 ) .\source1shadow.png .\bg.png  output.png 
```

有没有办法使这项工作？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:29:52.313

答案是使用管道字符将图像写入 RAM：

转换 .\source1.png -alpha set -background none -rotate 15 png:- | 复合 -compose over -geometry +103+160 bg.png output.png

文档： [http ://www.imagemagick.org/script/command-line-processing.php](http://www.imagemagick.org/script/command-line-processing.php)

# c# - 关于在某个 Google Apps 域上实施 Google OpenID 的问题

> ID：12432164
> 
> 赞同：1
> 
> 时间：2012-09-14T21:22:18.893
> 
> 标签：c#, asp.net, google-apps, google-openid

我正在尝试实现 Google OpenID 登录

我有以下问题：

1.  我在哪里可以获得该行中变量 openidurl 的值

IAuthenticationRequest 请求 = openid.CreateRequest(openidurl);

2.. 我怎样才能只限制某个 Google Apps 域的登录？

代码如下：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        OpenIdRelyingParty openid = new OpenIdRelyingParty();
        var response = openid.GetResponse();
        if (response != null)
        {
            switch (response.Status)
            {
                case AuthenticationStatus.Authenticated:

                    var fetch = response.GetExtension<FetchResponse>();
                    string email = string.Empty;
                    if (fetch != null)
                    {
                        email = fetch.GetAttributeValue(WellKnownAttributes.Contact.Email);
                    }

                    //FormsAuthentication.RedirectFromLoginPage(response.ClaimedIdentifier, false);
                    Session["email"] = email;
                    Response.Redirect("profile.aspx");
                    break;
            }
        }
    }

    protected void OpenLogin_Click(object src, CommandEventArgs e)
    {
        string openidurl = "https://www.google.com/accounts/o8/id?id=initial_id"; //auxiliary initial id. ??????
        //The Request
        using (OpenIdRelyingParty openid = new OpenIdRelyingParty())
        {
            IAuthenticationRequest request = openid.CreateRequest(openidurl);

            var fetch = new FetchRequest();
            fetch.Attributes.AddRequired(WellKnownAttributes.Contact.Email);
            request.AddExtension(fetch);

            // Send your visitor to their Provider for authentication.
            request.RedirectToProvider();
        }
    }
} 
```

在此先感谢，这是我第一次使用 Google OpenID。

# python - 在 Python 中，我怎样才能使它只打印出列表中的一项？

> ID：12432166
> 
> 赞同：0
> 
> 时间：2012-09-14T21:22:21.500
> 
> 标签：python, graphing, trigonometry

这是使用泰勒级数找到-1和+1之间角度的正弦值，但我想做的是获取每个度数的值，打印它，转到下一个度数，然后打印， ETC...

```
def Fac(n):
    r=1
    for c in range(n,1,-1):
        r*=c #r=r*c
    return r

def Pow(x,n):
    r=1
    for c in range(0,n):
        r*=x
    return r

def Sign(i): #i will be the number of the term we are on for Taylor
    r=1
    for c in range(0,i):
        r*=-1
    return r

def Rad(a):
    return a*3.141592654/180

def SinTerm(x,n,i):
    y=Sign(i)*Pow(x,n)/Fac(n)
    return y

def main():
    for c in range(0,361):
        a=c
    i=3
    n=1
    sum=0
    for c in range(0,i):
        sum+=SinTerm(Rad(a),n,c)
        n+=2
    print "Taylor COSINE sum = ", sum

while True:
    main() 
```

我认为制作 range(0,361) 会分别显示所有值，但它会将 0-360 度的所有值相加。我将如何做到这一点，以便单独显示每个学位的 sin 值？我更喜欢能引导我走向正确方向的答案，而不是直接给出答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T21:28:32.183

您的问题是 for 循环中的缩进。仅`a=c`包含该行。你想缩进整个东西（而且，它看起来像循环`a`而不是`c`在外循环中）：

```
for a in range(0,361):
    i=3
    n=1
    sum=0
    for c in range(0,i):
        sum+=SinTerm(Rad(a),n,c)
        n+=2
    print "Taylor COSINE sum = ", sum 
```

# c# - 在 C# 中使用 GridView 连接到数据库

> ID：12432168
> 
> 赞同：1
> 
> 时间：2012-09-14T21:22:41.093
> 
> 标签：c#, sql, winforms, gridview

我想在 GridView 中显示结果，但我无法这样做。我正在尝试将我的 C# windows 窗体应用程序连接到我在 SQL 中创建的数据库。请告诉我是否还有其他需要在课堂上解决的问题。我没有收到任何错误，但是当我单击“查看所有运动员”时仍然没有得到任何结果。

```
namespace Olympics
{

  public partial class Form1 : Form
  {
    private string connectionString;

    public Form1()
    {
        InitializeComponent();
        connectionString = "Data Source=ddb04;Initial Catalog=Vikram;Integrated Security=SSPI;";
    }

    private void label1_Click(object sender, EventArgs e)
    {

    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    public class Athlete
    {
        private string Athlete_Firstname;
        private string Athlete_Lastname;
        private string Athlete_ID;
        private string countryname;

        public Athlete()
        {

        }

        public Athlete(string firstname, string lastname, string ID, string country)
        {
            Athlete_Firstname = firstname;
            Athlete_Lastname = lastname;
            Athlete_ID = ID;
            countryname = country;
        }

        public string firestname
        {
            get { return Athlete_Firstname; }
            set
            {
                Athlete_Firstname = value;

            }
        }

        public string lastname
        {
            get { return Athlete_Lastname; }
            set
            {
                Athlete_Lastname = value;

            }
        }

        public string ID
        {
            get { return Athlete_ID; }
            set
            {
                Athlete_ID = value;

            }
        }

        public string country
        {
            get { return countryname; }
            set
            {
                countryname = value;

            }
        }

    }

    private void seeAthletesButton_Click(object sender, EventArgs e)
    {
        //here I access my project's connectionm string...

        //string sql = "select Athlete_Firstname, Athlete_Lastname, Athlete_ID, Country from Athlete;";

        //here I create new SQLConnection Object...

        using (SqlConnection connection = new SqlConnection(connectionString))
        {

            connection.Open();
            //here I create new SQLCommand Object.

            using (SqlCommand command = new SqlCommand("select Athlete_Firstname, Athlete_Lastname, Athlete_ID, Country from Athlete;", connection))
            {
                //command.Open();
                SqlDataReader reader = command.ExecuteReader();
                List<Athlete> atheletes = new List<Athlete>();

                while (reader.Read())
                {

                    string atheleteFirstName = reader.GetString(0);    // Athlete_Firstname string
                    string atheleteLastName = reader.GetString(1);  // Athlete_Lastname string
                    string atheleteId = reader.GetString(2); // Athlete_ID int
                    string atheleteCountry = reader.GetString(3);

                    Athlete athelete = new Athlete();
                    athelete.firestname = atheleteFirstName;
                    athelete.lastname = atheleteLastName;
                    athelete.ID = atheleteId;
                    athelete.country = atheleteCountry;

                    atheletes.Add(athelete); // List of Athelete objects populated with values from database
                }
                DataGridView atheleteDataGRidView = new DataGridView();

                atheleteDataGRidView.DataSource = atheletes;

              }
        }
    }

    private void label4_Click(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {

    }

    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {

    }

    private void saveButton_Click(object sender, EventArgs e)
    {

        SqlConnection connection = new SqlConnection(connectionString);

        connection.Open();

        string sql = "insert into Athlete (Athlete_Firstname, Athlete_Lastname, Athlete_ID, Country) values (@firstName, @lastName, @athleteId, @country);";

        SqlCommand command = new SqlCommand(sql, connection);

        command.Parameters.Add("@firstName", SqlDbType.VarChar);
        command.Parameters["@firstName"].Value = firstName.Text;

        command.Parameters.Add("@lastName", SqlDbType.VarChar);
        command.Parameters["@lastName"].Value = lastName.Text;

        command.Parameters.Add("@athleteId", SqlDbType.VarChar);
        command.Parameters["@athleteId"].Value = athleteId.Text;

        command.Parameters.Add("@country", SqlDbType.VarChar);
        command.Parameters["@country"].Value = countryName.Text;

        command.ExecuteNonQuery();

        connection.Close();
    } 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:29:46.223

你需要写

```
atheleteDataGRidView.DataSource = atheletes;
atheleteDataGRidView.DataBind(); 
```

在私人无效seeAthletesButton_Click（对象发送者，EventArgs e）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:34:33.890

除了 Oedum 所说的之外，您正在访问 ID，当它不能被转换为字符串时，它会[`SqlDataReader.GetString`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getstring.aspx)抛出一个。[`InvalidCastException`](http://msdn.microsoft.com/en-us/library/system.invalidcastexception.aspx)但是您自己评论说它的 DataType 是`int`.

> 不执行任何转换；因此，检索到的数据必须已经是一个字符串。

所以这可能更好：

```
string atheleteId = reader.GetInt32(2).ToString(); // Athlete_ID int 
```

# jquery - 使用 knockout.js 转换表单

> ID：12432176
> 
> 赞同：1
> 
> 时间：2012-09-14T21:23:19.920
> 
> 标签：jquery, forms, knockout.js

我正在尝试使用 knockout.js 创建付款表单，我需要动态更改页面，因此我不需要使用显示和隐藏标签手动执行此操作。问题是我无法让数据收集部分与我的模板代码一致。

```
<div id="users-create" data-bind="template:'payForm'"></div>​

<script type="text/html" id="payForm">
<div id="content">
    <form data-bind='submit: saveUser'>
    <div> 
        <label for="name">
            name</label>
        <input id="namebox" type="text" name="firstname" class="required" data-bind="value: newUser().Name" />
    </div>

    <div>
        <label for="credit card">
            creditcard</label>
        <input id="cc-num" type="text" name="credit" class="required" data-bind="value: newUser().credit" />
    </div>

    <div style="margin-top:10px">
    <p><label for="Expiration Date">
            expiration date</label>
        <select id="monthbox" name="month" class="required" data-bind="options: Month, value: newUser().Month"></select> /
                <select id="yearbox"  name="year" class="required" data-bind="options: Year, value: newUser().Year" ></select>

    </p>
    </div>

    <div class="form-submit">
        <input type="submit" value="checkout" />
    </div>
    </form>
    </div>
</script>
<script type="text/html" id="confirmForm">
<div id="content">
<h1>Home Page</h1>
there should be a price and a confirmation that pops up after this.
</div>

</script> 
```

这是我的淘汰赛脚本

```
<script type="text/javascript">
var User = function () {    // it's your viewmodel
this.Name = ko.observable();
this.credit = ko.observable();
this.Month = ko.observable();
this.Year = ko.observable();
};

var UsersPage = function () {
var self = this;
self.Month = ko.observableArray(['1','2','3','4','5','6','7','8','9','10','11','12']);
self.Year = ko.observableArray(['2012','2013','2014','2015','2016','2017','2018','2019','2020','2021','2022','2021']);

self.users = ko.observableArray([new User()]);
self.newUser = ko.observable(new User());
self.saveUser = function () {
    alert(ko.toJSON(self.newUser()));
};

};

var myTemplates = function() {
this.template = ko.observable("payForm");
this.getTemplate = function(data) {
  return data.template();
};

this.toggle = function() {
this.template(this.template() === "payForm" ? "confirmForm" : "payForm");    
};

};

var main = {
  templates: new myTemplates(),
  users: new UsersPage(),
}

ko.applyBindings(new UsersPage());
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-27T22:34:50.673

您还可以使用 jQuery.payment [https://github.com/stripe/jquery.payment](https://github.com/stripe/jquery.payment)来帮助您进行验证和掩码输入。有一个 bindinghandler 可用于您的 ko 绑定，您可以在此处查看：[https： //github.com/stripe/jquery.payment/pull/123/files?short_path=04c6e90](https://github.com/stripe/jquery.payment/pull/123/files?short_path=04c6e90)

这是玩具绑定您的 html 输入的方式：

```
<input type="text" class="cc-exp" placeholder="MM/YYYY" data-bind="payment:{value:YourObservable ,format:'formatCardExpiry'}" 
```

# iphone - 我怎么知道触发 touchesBegan 的手指也是触发手势的手指？

> ID：12432177
> 
> 赞同：2
> 
> 时间：2012-09-14T21:23:20.277
> 
> 标签：iphone, ios, ipad, uigesturerecognizer

就我而言，手势是平底锅。示例代码表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:34:05.417

[`UIGestureRecognizer`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizer_Class/)有一个名为 的属性[`delaysTouchesBegan`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009279-CH1-SW7)。这是`YES`默认设置。打开后，您的视图将`-touchesBegan:withEvent:`在手势识别器转换为失败状态之前获得。因此，如果您保留该属性，`YES`则保证您收到的任何触摸`-touchesBegan:withEvent:`都不是待处理手势的一部分。

如果您关闭该属性（将其设置为`NO`），那么您可能会得到`-touchesBegan:withEvent:`. 在这种情况下，如果手势识别器随后识别出它的手势，您将收到`-touchesCancelled:withEvent:`这些触摸。如果您需要看起来像是立即响应触摸，但允许手势覆盖您（例如，如果触摸变成滑动），这很有用。

# java - 如何将字符串资源文件中的字符串数组放入 ListFragment 的 ListView？

> ID：12432182
> 
> 赞同：0
> 
> 时间：2012-09-14T21:23:42.403
> 
> 标签：java, android, arrays, android-listview, android-listfragment

据我了解，ListFragment 只是一个在其布局中自动具有 ListView 的片段。我的 XML 字符串资源文件中有一个字符串数组，并且我有一个扩展 ListFragment 的类，称为 UrlListFragment。

这是数组：

```
<string-array name="list_array">
    <item>http://www.microsoft.com</item>
    <item>http://www.xbox.com</item>
    <item>http://www.windowsphone.com</item>
</string-array> 
```

这是我的扩展 ListFragment：

```
public class UrlListFragment extends ListFragment {

private static String[] urlList;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {
        View view;
        Resources res = getActivity().getResources();
        urlList = res.getStringArray(R.array.list_array);
        view = super.onCreateView(inflater, container, savedInstanceState);
        return view;

    }
} 
```

如何将字符串数组添加到 ListFragment 以便数组中的每个条目都是列表中的条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:59:14.553

列表片段有一个`setAdapter()`方法。

您可以创建一个简单的适配器：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity().getApplicationContext(), android.R.layout.simple_list_item_1, urlList); 
```

然后，您只需要做：

```
setListAdapter(adapter); 
```

# javascript - javascript Date 函数只用了几年怎么办？

> ID：12432184
> 
> 赞同：2
> 
> 时间：2012-09-14T21:24:05.750
> 
> 标签：javascript, date

（编辑：我在下面的代码中使用 chrome 控制台）

我意识到 javascript Date() 已被弃用，但它对我目前正在处理的事情很有用；但是有一个奇怪的问题：

```
var x = new Date('999').getFullYear() 
```

返回 999

尽管

```
var x = new Date('1000').getFullYear() 
```

也返回 999，但是

```
var x = new Date('10000').getFullYear() 
```

返回 10000...

有谁知道为什么 4 位数字给出错误的 .getFullYear()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:30:10.693

看看[这个页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference/Global_Objects/Date)。您正在传递一个传递给此[解析方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)的字符串。除非您传递 3 个整数，否则第一个参数不是“年”。最后，虽然类本身没有被弃用，但它的一些成员是（包括`getYear()`哪些被`getFullYear()`你正在使用的替换）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T21:32:53.447

正如其他答案所暗示的那样，您不能`Date.parse`跨浏览器依赖，特别是如果您处理的是公元 1000 年之前的日期。

就 Chrome 而言，问题似乎在于浏览器如何处理时区。以下示例表明，在公元 1000 年之前，Chrome 会在其上解析您当地时区的日期；>= 1000 CE，它似乎首先以 UTC 解析日期，然后应用时区转换：

```
> new Date('1000')
"Tue Dec 31 999 16:00:00 GMT-0800 (PST)"
> new Date('999')
"Tue Jan 01 999 00:00:00 GMT-0800 (PST)" 
```

我倾向于将此视为一个错误，但也许 Chromium 团队认为这是一个功能:)。

底线是，如果您想要准确地解析多年的日期，尤其是古代年份，您需要自己做一些工作和/或使用图书馆。[Moment.js](http://momentjs.com/)和[Datejs](http://www.datejs.com/)都可能有所帮助，但我怀疑它们都不能很好地处理古代。Moment.js 似乎也有同样的问题（在 Chrome 中）：

```
> moment('999').year()
999
> moment('1000').year()
999 
```

我所知道的根据古代年份准确设置日期的最佳方法通常是 a) 始终使用 UTC，b) 手动设置日期：

```
var d = new Date();
d.setUTCFullYear('999');
d.getUTCFullYear(); // 999
d.setUTCFullYear('1000');
d.getUTCFullYear(); // 1000 
```

至少在 Chrome 中，这适用于字符串和整数。

您可能还对[`gregorian`Timemap.js 库中的解析器](https://code.google.com/p/timemap/source/browse/trunk/src/timemap.js#2613)感兴趣，它处理带有 AD、CE、BC 和 BCE 扩展的古代年份以及负数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T21:26:31.103

这个[小提琴](http://jsfiddle.net/CtUR7/) 在 Firefox 上另有说明。也许它与浏览器有关？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T21:28:13.677

`alert(new Date('999').getFullYear());``NaN`在 Firefox 15.0.1 上产生

嗯.. Chrome 21.0.1180.57 确实产生“999”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T21:34:47.930

```
var x = new Date('10000').getFullYear() 
```

将其更改为

```
var x = new Date(10000).getFullYear() 
```

您正在向`invalid datestring`日期构造函数发送一个。

# c# - 从 c# 调用 javascript 函数来替换 div

> ID：12432185
> 
> 赞同：2
> 
> 时间：2012-09-14T21:24:11.787
> 
> 标签：c#, asp.net, iframe

我在 c# 中有一个网页，在代码隐藏中我生成一个 url，在 aspx 页面上我想更新一个 iframe 以显示这个 url。

在寻找了一段时间的方法后，我发现我可以注册 javascript 来强制刷新 iframe，但现在我遇到了麻烦。

无论我尝试什么，url 似乎永远不会改变，保持在加载时定义的 url。

让我给你看一些代码，这样你就可以看到我在做什么，也许可以帮助我解决这个问题。

我有这个字符串，谁处理我想去的网址

```
public String currentMap = "google.com"; 
```

这是注册 javascript 的函数

```
protected void Page_Load(object sender, EventArgs e)
   {
        UtilityClass utility = new UtilityClass();
        this.Page.ClientScript.RegisterStartupScript(
            this.GetType(),
            "StartupScript",
            "Sys.Application.add_load(MyLoad);",
            true);} 
```

这注册了javascript函数，这个函数应该加载一个修改过的url，像这样

```
<script type="text/javascript">

   function MyLoad(sender) {
       $get('maps').innerHTML += "<%= currentMap %>";
   }</script> 
```

虽然我可以看到内部 html 是如何更新的（你可以看到我使用 =+ 运算符，因为我想看看我是否在页面中添加了一些东西），但是 currentMap 的值总是相同的，并且 iframe 确实没有得到更新。

我启动了一个函数，当我在 gridview 中单击一个对象时，这个函数会执行类似的操作。

```
currentMap = "<iframe src=\"somepages.html" id=\"viewerframe\"  width=\"100%\" height=\"450\"></iframe>"\""; 
```

我可以看到 iframe 更新，但该值仍保留在[http://google.com](http://google.com)（硬编码的测试值）。

我如何更新 div 使其在 iframe 中显示正确的 url？

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:07:51.890

要更新 iframe 的 src，您可以使用以下代码：

```
//Set upload frame source
        var uploadUrl = '/Profile/upload.aspx?id=' + $.url().param('id').replace('/', '');
        $('#uploadFrame').prop('src', uploadUrl); 
```

# ajax - 关于 Ajax 编码

> ID：12432187
> 
> 赞同：0
> 
> 时间：2012-09-14T21:24:20.890
> 
> 标签：ajax

我正在使用此代码从国家/地区代码呼叫城市

```
<script>

function getXMLHTTP() { 
        var xmlhttp=false;  
        try{
            xmlhttp=new XMLHttpRequest();
        }
        catch(e)    {       
            try{            
                xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch(e){
                try{
                xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                }
                catch(e1){
                    xmlhttp=false;
                }
            }
        }

        return xmlhttp;
    }

    function getCity(strURL) {      

        var req = getXMLHTTP();

        if (req) {

            req.onreadystatechange = function() {
                if (req.readyState == 4) {
                    // only if "OK"
                    if (req.status == 200) {                        
                        document.getElementById('citydiv').innerHTML=req.responseText;                      
                    } else {
                        alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                    }
                }               
            }           
            req.open("GET", strURL, true);
            req.send(null);
        }

    }
</script> 
```

但结果不幸显示在???????

编码有问题

我的主要编码是

```
<meta http-equiv="Content-Type" content="text/html; charset=windows-1256" /> 
```

我的问题是如何在函数中设置编码以使用我的主编码加载

此链接包含与我相同的问题

[AJAX 中的编码问题](https://stackoverflow.com/questions/5147247/encoding-problem-in-ajax)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:30:25.077

您应该尝试使用[**`UTF-8`**](http://en.wikipedia.org/wiki/UTF-8)编码：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

# ruby-on-rails - Ruby/Rails：将参数从 rake 任务传递给命令行应用程序

> ID：12432188
> 
> 赞同：0
> 
> 时间：2012-09-14T21:24:25.803
> 
> 标签：ruby-on-rails, ruby, pdftk

如何从 rake 任务中传递参数并从 Ruby/Rails 执行命令行应用程序？

具体来说，我正在尝试使用[pdftk](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)（我找不到类似的 gem）将一些 PDF 拆分为单独的页面。我想传递的参数在`< >`以下范围内：

```
$ pdftk <filename.pdf> burst output <filename_%04d.pdf> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:37:06.753

在您的 rake 任务的 ruby​​ 代码中：

```
`pdftk #{input_filename} burst output #{output_filename}` 
```

你也可以这样做：

```
system("pdftk #{input_filename} burst output #{output_filename}") 
```

`system()`只返回真或假。反引号或`%x()`返回系统调用生成的任何输出。通常首选反引号，但如果您不在乎，则可以使用`system()`. 我总是使用反引号，因为它更简洁。

更多信息在这里：[http ://rubyquicktips.com/post/5862861056/execute-shell-commands](http://rubyquicktips.com/post/5862861056/execute-shell-commands)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:39:40.203

例如：

```
filename = 'filename.pdf'
filename_out = 'filename_%04d.pdf'

`pdftk #{filename} burst output #{filename_out}` 
```

或者

```
system("pdftk #{filename} burst output #{filename_out}") 
```

`system`返回一个重新运行代码，反引号版本返回 STDOUT。

如果你需要标准输出和标准错误，你也可以使用`Open3.open3`：

```
filename = 'filename.pdf'
filename_out = 'filename_%04d.pdf'
cmd = "pdftk #{filename} burst output #{filename_out}"

require 'open3'
Open3.popen3(cmd){ |stdin, stdout, stderr|
  puts "This is STDOUT of #{cmd}:"
  puts stdout.read
  puts "This is STDERR of #{cmd}:"
  puts stderr.read
} 
```

# wpf - 自动调整网格列以占用父级中的剩余空间

> ID：12432189
> 
> 赞同：11
> 
> 时间：2012-09-14T21:24:31.360
> 
> 标签：wpf, grid

在 WPF 中，我有一段时间试图让网格正确调整大小。

我的网格有以下布局：

```
<ItemsControl HorizontalContentAlignment="Stretch">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="100"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" />
                    <Label Grid.Column="1"/>
                    <TextBox Grid.Column="2"/>
                    <Button Grid.Column="3"/>
                </Grid>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
</ItemsControl> 
```

问题是 Width="Auto" 似乎将该列调整为内容的宽度，而不是填充父容器中的额外空间。这会使其余列全部未对齐，并且每行末尾都有丑陋的空白。

我可能遗漏了一些简单的东西，但我似乎找不到合适的方法来适应列。

还是有更好的工作控制？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-14T21:40:47.507

`*`表示填充或分享。如果你有两个，`*`那么他们将平均分享宽度。

```
<ColumnDefinition Width="*"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:29:50.573

似乎我在多修修补补后找到了解决方案。

问题是：`<ColumnDefinition Width="Auto"/>`

这导致该列适合内容。我将其更改为：`<ColumnDefinition />`

这会导致列适合父容器中剩余的空白空间，无论内容大小如何。

# asp.net - MVC 4 - 在类库中使用 Razor 视图

> ID：12432191
> 
> 赞同：5
> 
> 时间：2012-09-14T21:24:34.477
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我正在尝试在类库项目中使用 MVC 4 Razor View。

我将 Web.Config 文件添加到我的类库根文件夹和视图文件夹中，但在我看来，@model 仍然无法识别。

我还在项目中添加了 Microsoft.AspNet.Mvc 包。

有谁知道如何解决这个问题？

这是我的 Web.Config 文件：

**1 - 视图文件夹**

```
<?xml version="1.0"?>

<configuration>
  <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections>

  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
  </system.web.webPages.razor>

  <appSettings>
    <add key="webpages:Enabled" value="false" />
  </appSettings>

  <system.web>
    <httpHandlers>
      <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
    </httpHandlers>

    <!--
        Enabling request validation in view pages would cause validation to occur
        after the input has already been processed by the controller. By default
        MVC performs request validation before a controller processes the input.
        To change this behavior apply the ValidateInputAttribute to a
        controller or action.
    -->
    <pages
        validateRequest="false"
        pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <controls>
        <add assembly="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
      </controls>
    </pages>
  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />

    <handlers>
      <remove name="BlockViewHandler"/>
      <add name="BlockViewHandler" path="*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
    </handlers>
  </system.webServer>
</configuration> 
```

**2 - 根文件夹**

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <httpRuntime targetFramework="4.5" />
    <compilation debug="true" targetFramework="4.5" />
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
</configuration> 
```

有谁知道我错过了什么？

谢谢你，

米格尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T23:32:07.567

您的项目必须是 Web 应用程序，智能感知才能正常工作。Web Application 只是一个特殊的类库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-23T06:08:07.387

事实证明，**简单的解决方案**是将其创建为**Web 应用程序**，但这可能并不适合所有人。

## 第一次尝试

我自己也有一个**类库**，我想在其中创建一些控件，但我想拥有一个**工作的 Razor View**，并具有**完整的智能**支持。诀窍是：

1.  **添加引用**（对于 MVC）
2.  在 ProjectGUID 之后将**ProjectTypeGuids**添加到 .csproj（编辑为文本）：`<ProjectTypeGuids>{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids>`
3.  添加一个**.cshtml razor 视图**文件（直到下一部分它才能正常工作）
4.  添加一个**Web.Config**文件（请参阅您的查看文件夹 web.config）
5.  **将项目属性构建**输出路径更改为**`bin\`**(not `bin\Debug`)
6.  清洁和构建解决方案

让你几乎在那里（评论提到 Bin 文件夹问题）： [https ://conficient.wordpress.com/2013/11/27/asp-net-razor-views-in-class-libraries/](https://conficient.wordpress.com/2013/11/27/asp-net-razor-views-in-class-libraries/)

另一个 Bin 指南包括： [http ://thetoeb.de/2014/01/05/enabling-mvc5-intellisense-in-a-classlibrary-project/](http://thetoeb.de/2014/01/05/enabling-mvc5-intellisense-in-a-classlibrary-project/)

但**唯一**的一点是，如果您要**避免拥有一个真正的 ASP.Net MVC 站点**。所以，现在你需要一些东西来运行它......并且有一些选项，但这超出了这个条目。

* * *

## 差不多好了

如果您只是希望您的视图被编译，并被许多其他真正的 ASP.Net MVC 项目重新用作项目，那么您可以只**使用 Razor Generator**，但即使仍然在这里，您可能不想将您的项目创建为一个类库，因为这样不好玩......

1.  为 Razor 生成器安装 VS 扩展
2.  **添加**新**的类库**项目
3.  将 NuGet 包添加到**RazorGenerator.Mvc库**
4.  将 NuGet 包添加到**PrecompiledMvc​​ViewEngineContrib库**
5.  **在您的库中创建一个 Views 文件夹**和一个**名为文件夹的控制器**，用于您希望它们访问的虚拟路径
6.  **将**任何**视图**移动到新的 \Views\ControllerName\ 文件夹
7.  将所有这些库视图设置为**自定义工具 RazorGenerator**（右键单击视图属性）
8.  **从您的真实 ASP.Net MVC Web 应用程序中**添加**对您的**库的引用****

 **从那里我经常有问题。除非我添加 Microsoft.CodeDom.Providers.DotNetCompilerPlatform nuget 包，否则我将被困在 C# 2.0 中。这是 4.5，所以对于 4.6.x，可以将 app.config 中的新 codedom 部分修改为

```
 <system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" warningLevel="4" compilerOptions="/langversion:6 /nowarn:1659;1699;1701">
        <providerOption name="CompilerVersion" value="v4.0"/>
      </compiler>
      <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.VBCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" warningLevel="4" compilerOptions="/langversion:14 /nowarn:41008 /define:_MYTYPE=\&quot;Web\&quot; /optionInfer+"/>
    </compilers>
  </system.codedom> 
```

现在您可以使用“var”作为隐式类型和其他现代 C# 功能。

接下来，尽管引用了 System.Linq 扩展方法，但我遇到了一个问题......生活并不完全正确......如果你想要这一切......但这是一个开始，如果这是你的道路想再往下走。

* * *

## 最简单的选择

但是，如果您接受**Razor Generator 工作人员的建议**，并**在常规 MVC Web 应用程序之上实际安装 Razor Generator**（只需将您的“**库**”创建为一个），那么几乎不需要这些工作......

1.  有一个主要的真实 MVC ASP.Net 站点
2.  创建一个新的 MVC ASP.Net 站点来充当您的“库”，这样您就不必再多费心了
3.  将 RazorGenerator.MVC 的 Nuget 包安装到“库”
4.  将 PrecompiledMvc​​ViewEngineContrib 的 Nuget 包安装到“库”
5.  将视图移动到库中的类似结构并标记为自定义工具 RazorGenerator
6.  从主站点引用您的“库”，这样就可以轻松完成所有工作。

美妙之处在于您引用的“库”具有将在您的主应用程序的应用程序启动时运行的应用程序启动代码，并且将注册 PreCompiledViewEngine，它知道虚拟路径，而不仅仅是物理路径。然后你的 RazorGenerator Custom Tool 视图将定义它们的虚拟路径，当视图路径被解析时，它可以找到它们。

* * *

关于该主题的不错参考： [https ://www.c-sharpcorner.com/UploadFile/97fc7a/article-precompiled-razor-view-using-razorgenerator-mvc-and/](https://www.c-sharpcorner.com/UploadFile/97fc7a/article-precompiled-razor-view-using-razorgenerator-mvc-and/)**

# jquery - 将鼠标悬停在 Div 上时获得白色背景（Jquery）

> ID：12432193
> 
> 赞同：-1
> 
> 时间：2012-09-14T21:25:06.453
> 
> 标签：jquery, background, hover

我在 Jquery 中使用了幻灯片功能。当我将鼠标悬停在 div 上时，它的背景颜色为白色。它是PNG图像还是CSS中的自制形状都没有关系。

我该如何摆脱这个？它发生在所有浏览器中，我在其他论坛上看到过这个问题，但没有正确的答案。

[http://jsfiddle.net/7yHR9/](http://jsfiddle.net/7yHR9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:57:00.410

我认为它*是*透明的——它只是没有做你认为它正在做的事情。

我已经放慢了你的动画，为容器 div 添加了背景颜色，并在默认 div 周围放置了一个边框；你会看到你正在做的是挤压上 div，而不是在它上面滑动圆角：

[http://jsfiddle.net/7yHR9/17/](http://jsfiddle.net/7yHR9/17/)

注意通过圆角可以看到粉红色（即圆角*是*透明的）

# perl - 将多个字符串作为 Perl 脚本的参数传递给一个选项

> ID：12432197
> 
> 赞同：1
> 
> 时间：2012-09-14T21:25:20.447
> 
> 标签：perl, arguments, command-line-arguments

> **可能重复：**
> [Getopt::Long 将带有空格的字符串放入变量中](https://stackoverflow.com/questions/7108429/getoptlong-getting-a-string-with-spaces-into-a-variable)

假设我有以下 Perl 脚本：

```
use 5.010;
use strict;
use warnings;
use Getopt::Std; 
use vars qw($opt_i $opt_o $opt_m); 
&getopts('i:o:m:'); 

say $opt_m 
```

如果我调用这个脚本

```
perl script.pl -i text -o string -m hello how are you, world? 
```

我没有得到“你好，世界，你好吗？” 在`$opt_m`. 如何捕获由空格分隔的字符串作为脚本的开关参数之一？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:29:49.013

您正在尝试构建字符串

```
hello how are you, world? 
```

因此，您必须使用构建该字符串的字符串文字。字符串文字的语法会因 shell 而异，但您可能可以使用以下任一方法构建该字符串：

```
hello\ how\ are\ you,\ world\?
'hello how are you, world?' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T21:27:47.530

您必须转义字符串的空格：

```
hello\ how\ are\ you,\ world\? 
```

# php - php标头重定向无法正常工作

> ID：12432198
> 
> 赞同：-3
> 
> 时间：2012-09-14T21:25:20.843
> 
> 标签：php, mod-rewrite, redirect

出于某种原因，一些人/浏览器重定向到错误的页面。他们被送到：

[http://www.site.com/page.php/http://www.site.com/page.php](http://www.site.com/page.php/http://www.site.com/page.php)

代替：

[http://www.site.com/page.php](http://www.site.com/page.php)

为什么是这样？

附言。我正在使用 MOD_REWRITE。这会有所作为吗？

重定向功能：

```
function KT_redir($url) {
    $protocol = "http://";
    $server_name = $_SERVER["HTTP_HOST"];
    if ($server_name != '') {
        $protocol = "http://";
        if (isset($_SERVER['HTTPS']) && ($_SERVER['HTTPS'] == "on")) {
            $protocol = "https://";
        }
        if (preg_match("#^/#", $url)) {
            $url = $protocol.$server_name.$url;
        } else if (!preg_match("#^[a-z]+://#", $url)) {
            $script = KT_getPHP_SELF();
            if (isset($_SERVER['PATH_INFO']) && $_SERVER['PATH_INFO'] != '' && $_SERVER['PATH_INFO'] != $_SERVER['PHP_SELF']) {
                $script = substr($script, 0, strlen($script) - strlen($_SERVER['PATH_INFO']));
            }
            $url = $protocol.$server_name.(preg_replace("#/[^/]*$#", "/", $script)).$url;
        }
        $url = str_replace(" ","%20",$url);
        if (KT_is_ajax_request()) {
            header("Kt_location: ".$url);
            echo "Redirecting to: " . $url;
        } else {
            header("Location: ".$url);
        }
    }
    exit;
} 
```

MOD_REWRITE

```
RewriteEngine on

RewriteCond %{HTTP_HOST} !^www\.site\.com$ [NC]
RewriteRule ^(.*)$ http://www.site.com/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T23:15:25.567

在您的 之前`else if (!preg_match)`，您需要添加一个 else if 检查以查看是否`$url`以 a 开头，`http`如果是，则不要附加任何内容。

# android - 如何找出在Android上的TextView中有多少行文本换行？

> ID：12432199
> 
> 赞同：3
> 
> 时间：2012-09-14T21:25:21.527
> 
> 标签：android, string, text, textview, word-wrap

我有一个包含多行的长字符串，并且行数因所使用的 Android 设备的大小而异。有没有办法知道文本换行到多少行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:28:52.197

您可以使用[Layout](http://developer.android.com/reference/android/text/Layout.html)类之一：

```
Layout layout = new StaticLayout(text, /* other stuff--see docs */);
int nLines = layout.getLineCount(); 
```

# grails - Grails 2.x schema-export 或类似命令能否为给定数据源的模式更新生成 DDL？

> ID：12432203
> 
> 赞同：4
> 
> 时间：2012-09-14T21:26:09.080
> 
> 标签：grails, ddl, schemaexport

Grails 模式导出在生成 DDL 以为特定数据库创建数据库模式方面做得很好。但是我想做的是让 grails 只输出 DDL 以更新到已创建的模式，而不是从头开始创建它的 DDL。

我认为这应该是可能的，因为如果您`dbCreate = "update"`在数据源中指定，grails 确实有能力实际更新模式。

但我只想让 grails 吐出它会运行的内容，而不是实际执行它，因此我可以通过 SQL 工具以受控方式自己执行它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T14:26:27.273

正如@GreyBeardedGeek 在评论中指出的那样，[数据库迁移插件](http://grails.org/plugin/database-migration)（现在默认包含）可以生成您正在寻找的“模式差异”，并且它比原版`dbCreate = "update"`所做的要多得多，因为 Grails 的本机数据库更新只依赖于 Hibernate 提供的东西，它可以做的更新*非常*保守。

特别是，您正在寻找的数据库迁移插件的一部分是[`dbm-update-sql`](http://grails-plugins.github.com/grails-database-migration/docs/manual/ref/Update%20Scripts/dbm-update-sql.html)脚本，它将为您提供它将运行以将数据库更新到当前模式版本的 SQL。

一般来说，我*强烈*建议使用数据库迁移插件之类的工具，因为它将您的数据库模式与您的应用程序代码捆绑在一起，您可以轻松地将它们一起版本化，并且它还包含许多工具，因此运行更新要少得多痛苦，并允许回滚和自定义脚本根据需要按摩事物。

# cognos - 如何汇总报表中所有记录的数据？

> ID：12432205
> 
> 赞同：0
> 
> 时间：2012-09-14T21:26:16.863
> 
> 标签：cognos, cognos-8

我有一个带有*部分*页脚的报告，其中总结了每个部分中的数据项计数。我还想要一个包含*整个报告*中所有项目计数的*整体*页脚。

 *我目前正在使用

```
 count([Value] for [Grouped Value]) 
```

这就是我可以获取分组*部分*的聚合函数信息的方式，但它似乎不适用于整个页脚；它输出最后一组中的项目数，而不是报告中的所有项目。

如何在 Cognos 中汇总/汇总*整个报表的信息？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:26:16.863

整体页脚中的数据项获取完整报告摘要信息所需的表达式为`for report`：

```
 count([Value] for report) 
```

如果您使用的是 Cognos 8，则该`for report`组件已经在 Components 下的 Data Item Expression 列表中：

![数据项表达式列表](../Images/02849887dc883e911b971d4ed48c9144.png)

我从[Cognos Summary Functions](http://www.itap.purdue.edu/ea/files/UnderstandingTheCognosSummaryFunctions.pdf)中发现了这一点。*

# nsis - 命令 AutoCloseWindow 在部分中无效

> ID：12432209
> 
> 赞同：1
> 
> 时间：2012-09-14T21:26:44.707
> 
> 标签：nsis

```
Section userSoftware

MessageBox MB_YESNO|MB_ICONQUESTION  "Insert user software DVD in to drive and click  Yes to install User Software or click No to Proceed" /SD IDNO IDYES yes IDNO no
    yes:
        AutoCloseWindow true 
        SetRebootFlag false 
        Call installUserSoftware
    no: 
        ;do nothing
SectionEnd 
```

部分：“userSoftware”错误：命令 AutoCloseWindow 在部分中无效

这是我在使用 AutoCloseWindow 时遇到的错误。我要做的就是在安装服务器软件后，如果用户选择安装客户端软件，服务器软件的安装应该会消失，而不要求用户点击完成按钮。

我给的代码我只是在测试 AutoCloseWindow 或 SetAutoClose 是如何工作的，但我所拥有的只是一个错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:03:18.377

`AutoCloseWindow`是一个类似于`Name`and的属性，`Installdir`并且必须放在函数和部分之外。如果要在运行时设置自动关闭标志，则必须使用`SetAutoClose`命令...

# php - 重定向保持哈希

> ID：12432212
> 
> 赞同：6
> 
> 时间：2012-09-14T21:27:09.687
> 
> 标签：php, .htaccess, hash

出于某种原因，当我使用`header("Location")`新页面重定向时会保留哈希。

所以如果你在`example.com/index.html#signup`

我重定向与

```
header("Location: /account.html");
exit; 
```

但随后它显示`example.com/account.html#signup`

为什么会发生这种情况，我该如何阻止它？IE`example.com/account.html`

* * *

笔记：

我正在使用 .htaccess 重定向`file.html`到`file.php`

```
RewriteRule ^([a-zA-Z0-9-_.]+)\.html$ $1.php [L] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T21:53:51.327

“如何停止它”的简单答案是在`Location`标头中指定一个空哈希：

```
header('Location: /account.html#'); 
```

但是，这种行为并不能得到全面保证。在我的快速测试中，它似乎适用于 WebKit 和 IE9。尽管如此，您还是偶然发现[了 HTTP 规范中的一个黑洞](https://stackoverflow.com/questions/2286402/url-fragment-and-302-redirects)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-15T05:52:50.837

我正在寻找适用于 Firefox 的答案。在我的猫保持喵喵叫的时候到处冲浪后，它引导我找到最终的解决方案：

`die('<script> window.location='your-url-without-hash';</script>');`

有时您想保留哈希，有时您不想保留，因为跨浏览器很重要，所以最好控制客户端浏览器重新加载并终止哈希。

# php - Doctrine：渴望加载惰性关系的关系？

> ID：12432216
> 
> 赞同：7
> 
> 时间：2012-09-14T21:27:31.470
> 
> 标签：php, orm, doctrine, doctrine-orm, lazy-loading

我正在使用 Doctrine 2 来绘制学术时间表。以下是关系的简化视图：

*   一个**类**有**事件**（一对多）
    *   一个**事件**有一个**类型**（多对一）
    *   **事件**有一个位置**（**多对一）

使用`$em->find()`我只能获取具有延迟加载关系的**类。**或者使用带有连接的 DQL，我可以急切地加载整个对象图。有没有介于两者之间的解决方案？

我想获取一个具有延迟加载关系的**类**，然后在某些条件下触发**事件**关系和所有**事件**属性的急切加载。所以当我调用类似的东西时`$class->getEventsHydrateAll()`，所有的**事件**和**事件类型**以及**事件位置**都会立即被水合。

我想我可以通过更新我的**事件模式来将****类型**和**位置**关系标记为`fetch="EAGER"`. 但我想控制这种深度水合作用何时发生。

这是我在我的**类**存储库中进行的一次尝试，但 Doctrine 正在运行单独的查询来查找每个**type**和**location**。

```
$query = $this->_em->createQuery('
        SELECT c FROM My\Entity\Class c
        WHERE c.id = :classId
');
$query->setParameter('classId', $classId)
      ->setFetchMode('My\Entity\Event', 'type', 'EAGER')
      ->setFetchMode('My\Entity\Event', 'location', 'EAGER');

try {
    return $query->getSingleResult();
} catch (\Doctrine\ORM\NoResultException $e) {
    return NULL;
} 
```

有谁知道 Doctrine 是否支持这一点？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-30T11:02:25.907

> **TL;博士：**
> 
> 您可以在类属性上使用 EAGER 标志，让它快速加载它的关系。[http://doctrine-orm.readthedocs.org/en/latest/reference/annotations-reference.html#manytoone](http://doctrine-orm.readthedocs.org/en/latest/reference/annotations-reference.html#manytoone)

我不确定这是否会对您有所帮助，但这就是我解决它的方法。

首先介绍一下我的情况。我目前正在创建一个 OAuth 2 实现，我希望在其上对范围进行细粒度控制。范围非常细化（例如电子邮件、用户名等），然后您可以为每个范围设置单独的权限，以进行读取、创建、编辑和删除。

这是一个松散地显示这种关系的数据库图：

![在此处输入图像描述](../Images/e3d80f92ed2761102ea0d1714d614944.png)

所以我的问题是，例如，我如何查看是否允许特定令牌**读取**（许可）**用户名**（范围）？

如果我加载令牌，然后获取它的所有权限，然后 foreach**读取**权限，我检查**用户名**范围，那么这就是大量的数据库访问。

测试代码：

```
$permissions = $this->getOAuthHelper()
                    ->getAccessToken($accessToken)
                    ->getPermissions();
$results = [];
foreach ($permissions as $permission) {
    $results[] = $permission->getScope()->getTitle();
}
return $results; 
```

查询日志：

```
150630 10:49:47    54 Connect   root@localhost on api
150630 10:49:51    54 Query     SELECT t0.id AS id1, t0.token AS token2, t0.token_expiration AS token_expiration3, t0.refresh AS refresh4, t0.created_at AS created_at5, t0.deleted_at AS deleted_at6, t0.user_id AS user_id7, t0.client_id AS client_id8 FROM oauth_access_tokens t0 WHERE t0.token = 'user-test-token' LIMIT 1
                   54 Query     SELECT t0.id AS id1, t0.access_permission AS access_permission2, t0.scope_id AS scope_id3 FROM oauth_permissions t0 INNER JOIN oauth_access_to_permissions ON t0.id = oauth_access_to_permissions.permission_id WHERE oauth_access_to_permissions.access_id = '1'
150630 10:49:52    54 Query     SELECT t0.id AS id1, t0.title AS title2, t0.brief AS brief3, t0.category_id AS category_id4 FROM oauth_scopes t0 WHERE t0.id = '1'
                   54 Query     SELECT t0.id AS id1, t0.title AS title2, t0.brief AS brief3, t0.category_id AS category_id4 FROM oauth_scopes t0 WHERE t0.id = '2'
                   54 Query     SELECT t0.id AS id1, t0.title AS title2, t0.brief AS brief3, t0.category_id AS category_id4 FROM oauth_scopes t0 WHERE t0.id = '3'
                   54 Query     SELECT t0.id AS id1, t0.title AS title2, t0.brief AS brief3, t0.category_id AS category_id4 FROM oauth_scopes t0 WHERE t0.id = '4'
                   54 Query     SELECT t0.id AS id1, t0.title AS title2, t0.brief AS brief3, t0.category_id AS category_id4 FROM oauth_scopes t0 WHERE t0.id = '5'
                   54 Query     SELECT t0.id AS id1, t0.title AS title2, t0.brief AS brief3, t0.category_id AS category_id4 FROM oauth_scopes t0 WHERE t0.id = '6'
                   54 Query     SELECT t0.id AS id1, t0.title AS title2, t0.brief AS brief3, t0.category_id AS category_id4 FROM oauth_scopes t0 WHERE t0.id = '7'
                   54 Query     SELECT t0.id AS id1, t0.title AS title2, t0.brief AS brief3, t0.category_id AS category_id4 FROM oauth_scopes t0 WHERE t0.id = '8'
                   54 Query     SELECT t0.id AS id1, t0.title AS title2, t0.brief AS brief3, t0.category_id AS category_id4 FROM oauth_scopes t0 WHERE t0.id = '9'
                   54 Query     SELECT t0.id AS id1, t0.title AS title2, t0.brief AS brief3, t0.category_id AS category_id4 FROM oauth_scopes t0 WHERE t0.id = '10'
                   54 Query     SELECT t0.id AS id1, t0.title AS title2, t0.brief AS brief3, t0.category_id AS category_id4 FROM oauth_scopes t0 WHERE t0.id = '11'
                   54 Query     SELECT t0.id AS id1, t0.title AS title2, t0.brief AS brief3, t0.category_id AS category_id4 FROM oauth_scopes t0 WHERE t0.id = '12'
                   54 Query     SELECT t0.id AS id1, t0.title AS title2, t0.brief AS brief3, t0.category_id AS category_id4 FROM oauth_scopes t0 WHERE t0.id = '13'
                   54 Quit 
```

但是，我们可以在这里看到，其中大部分是收集附加到权限的范围。我们可以在从权限到范围的关系上使用 eager 标志来获取具有权限的范围：

```
/**
 * @var Scope
 *
 * @ORM\ManyToOne(targetEntity="OAuthScope", fetch="EAGER")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="scope_id", referencedColumnName="id")
 * })
 */
protected $scope; 
```

注意`fetch="EAGER"`ManyToOne 注释上的标志。

现在，如果我们运行完全相同的代码：

```
150630 11:00:06    55 Connect   root@localhost on api
150630 11:00:10    55 Query     SELECT t0.id AS id1, t0.token AS token2, t0.token_expiration AS token_expiration3, t0.refresh AS refresh4, t0.created_at AS created_at5, t0.deleted_at AS deleted_at6, t0.user_id AS user_id7, t0.client_id AS client_id8 FROM oauth_access_tokens t0 WHERE t0.token = 'user-test-token' LIMIT 1
150630 11:00:11    55 Query     SELECT t0.id AS id1, t0.access_permission AS access_permission2, t0.scope_id AS scope_id3, t4.id AS id5, t4.title AS title6, t4.brief AS brief7, t4.category_id AS category_id8 FROM oauth_permissions t0 LEFT JOIN oauth_scopes t4 ON t0.scope_id = t4.id INNER JOIN oauth_access_to_permissions ON t0.id = oauth_access_to_permissions.permission_id WHERE oauth_access_to_permissions.access_id = '1'
                   55 Quit 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-26T12:48:54.463

我不确定，但我认为 getSingleResult 会覆盖水合模式。

尝试“执行”，如下例所示： http: [//docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#dql-temporarily-change-fetch-mode](http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#dql-temporarily-change-fetch-mode)

# emacs - Emacs 方案（方案模式）缩进

> ID：12432217
> 
> 赞同：3
> 
> 时间：2012-09-14T21:27:37.790
> 
> 标签：emacs, scheme, indentation, auto-indent

默认情况下，Emacs 中的方案模式使用一个空格缩进格式化代码：

```
(string-append
 "foo "
 "bar "
 "baz") 
```

我希望它至少有两个空格，即：

```
(string-append
  "foo "
  "bar "
  "baz") 
```

对于 Emacs 中的大多数模式，这很容易更改，但我还没有弄清楚如何为方案做这件事。我也查看了 scheme.el 的源代码，虽然其中有逻辑可以进行各种花哨的对齐，但我还没有找到一种自定义“标准缩进”的简单方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-15T00:20:13.993

您可以设置`lisp-indent-offset`为 2，但您几乎可以肯定不想这样做，除非您真的知道自己在做什么。

Lisp 风格的语言遵循与其他语言略有不同的缩进理念。当 S 表达式的第一个元素在左括号之后是单独的时，约定是将其余元素排列在同一列中：

```
(first-item
 second-item
 third-item fourth-item fifth-item
 sixth-item) 
```

当第二个元素与第一个元素在同一行时，约定是将以下元素与第二个元素对齐：

```
(first-item second-item
            third-item fourth-item fifth-item
            sixth-item) 
```

此约定适用于非特殊形式的 sexps，包括函数调用，例如对`string-append`. 由评估器和编译器专门解释的特殊形式，sexps，遵循稍有不同的缩进。提供表达式以进行评估的表单将缩进两个空格：

```
(lambda (value)
  (display value)
  (send-eof)) 
```

对于有经验的 Lisper，两个空格巧妙地表示该表达式是一种特殊形式，其两个空格缩进的子形式将按顺序计算。当你使用`define-syntax`or创建你自己的特殊表单`defmacro`时，你可以告诉 Emacs 以同样的方式缩进它们的子表单：

```
;; define a CL-style `unless` macro...
(defmacro unless (test &rest forms)
  `(or ,test (progn ,@forms)))

;; ...and tell emacs to indent its body forms with two spaces
;; (unless (= value 0)
;;   (display value)
;;   (send-eof))
(put 'unless 'lisp-indent-function 2) 
```

更改缩进级别会向读者发送有关正在发生的事情的错误信号，从而减损您的代码。如果你不喜欢 Emacs 如何缩进你的调用`string-append`，我建议切换到第二种形式，它会自动将字符串进一步向右缩进：

```
(string-append "foo "
               "bar "
               "baz") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T02:29:06.247

Variety in indentation styles is a source of problems. So while Emacs modes generally try to support most existing indentation styles, they don't necessarily make it easy to use a different style, since that would encourage people to invent new styles. You'll generally be better off learning to live with the "standard" indentation style: that will help you read other people's code and help other people read your code.

# javascript - 在 IE9 中使用 Javascript clearTimeout() 时如何防止“参数不是可选”错误？

> ID：12432229
> 
> 赞同：-2
> 
> 时间：2012-09-14T21:28:56.487
> 
> 标签：javascript, internet-explorer-9, settimeout

以下 Javascript 代码适用于除 IE9 以外的所有浏览器。解决方法是什么？

```
setTimeout('doSomething();clearTimeout();',500); 
```

调试器说它希望我将一个 ID 号传递给 clearTimeout()，而我所做的只是清除所有超时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T21:55:20.477

正如其他人所说，`clearTimeout()`没有任何争论不会做任何事情。`clearTimeout()`要求您指定要清除的超时。这适用于所有浏览器。也许只有 IE 报告错误，但它导致了所有问题。

也许你打电话的原因`clearTimeout()`是你认为`setTimeout()`需要清除它以防它不断被调用？这是不正确的——`setTimeout()`导致它的代码在给定的时间之后只被调用一次。

因此，由于您在超时已被触发后试图清除它，所以无论如何都没有什么要清除的。

有一个单独的命令`setInterval()`会触发重复超时。这需要清除以阻止它一遍又一遍地调用，但通常认为`setInterval()`无论如何使用它是一个坏主意，所以我不会在这里过多地讨论它。

您应该做的另一件事是避免`setInterval`使用字符串参数进行调用。只需指定要直接调用的函数即可。

简而言之，您的代码应如下所示：

```
setTimeout(doSomething,500); 
```

这应该足以让您的示例在所有浏览器中正常工作。

正如我所说，您不需要在您的情况下清除超时，但如果您确实需要在另一个实例中清除它，您将需要`setTimeout`（或`setInterval`）返回一个值。这个值是定时器的一个引用对象，这个引用就是你需要传入的`clearTimeout`。

IE：

```
var timer;
....
timer = setTimeout(doSomething,500);
....
....
//something happened, I need to cancel the timeout:
clearTimeout(timer); 
```

希望这有助于澄清事情。

# php - 带有 php 和 MySQLi 的递归菜单

> ID：12432230
> 
> 赞同：1
> 
> 时间：2012-09-14T21:29:03.903
> 
> 标签：php, mysql, mysqli

我有以下代码：

```
function menu($parent, $level){
global $dbc;

$result = $dbc->prepare('SELECT linktext, visible, sort FROM content WHERE parent =? ORDER BY sort');
$result->bind_param('s', $parent);
$result->execute();
$result->bind_result($menu_linktext, $menu_visible, $menu_sort);  
$total_records = $result->num_rows;

if($level > 0 && $total_records > 0){
echo '<ul>';
}
while($row = $result->fetch()){
echo "<li>";
echo '<a href="?page=' . $menu_linktext . '">' . $menu_linktext . '</a>'.$id;
//display this level's children
menu($id, $level+1);
echo "</li>\n";
}
if($level > 0 &&  $total_records > 0){
echo '</ul>';
 }
}
echo '<ul>' . menu(0,0) . '</ul>' 
```

它适用于一个链接（主页），然后在非对象错误上抛出对成员函数 bind_param() 的调用。

表的基本情况是：

```
￼page | linktext | visable | parent | sort
  1       Home       1         0      1
  2      Gallery     1         0      3
  3     About Us     1         0      2
  4    Contact Us    1         0      5
  5     Services     1         0      4
  6     Diving       0         5      1
  7     Angling      0         5      2
  8     Charters     0         5      3 
```

这是HTML结构：

```
 <ul class="sf-menu" id="nav">
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">Examples</a></li>
          <li><a href="gallery.html">A Page</a></li>
          <li><a href="#">Services</a>
            <ul>
              <li><a href="#">Diving</a></li>
              <li><a href="#">Angling</a>
              <li><a href="#">Charter</a></li>
            </ul>
          </li>
          <li><a href="contact.html">Contact Us</a></li>
        </ul> 
```

我想让基本菜单工作，然后处理链接的排序顺序。如果有人能提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:53:19.380

问题解决了！我将发布它是如何完成的，并且有人可以使用它。

```
function menu()
  {
    global $dbc;

  $result = $dbc->prepare('SELECT page, linktext, visable, parent FROM content WHERE visable > 0 ORDER BY parent,sort ASC');
  $result->execute();
  $result->bind_result($menu_page, $menu_linktext, $menu_visible, $menu_parent);

  while($result->fetch())
    {
        if($menu_parent == 0) $menu[$menu_page]=$menu_linktext;
        elseif(!empty($menu[$menu_parent])) $sub[$menu_parent][]=$menu_linktext;
    }

  $result->close();

  if(!empty($menu))
    {
        echo '<ul class="sf-menu" id="nav">';
        foreach($menu as $page=>$link)
          {
              echo "<li><a href='$link'>$link</a>";
              if(!empty($sub[$page]))
                {
                    echo '<ul>';
                    foreach($sub[$page] as $lnk) echo "<li><a href='$lnk'>$lnk</a></li>";
                    echo '</ul>';
                }
              echo '</li>';
          }
        echo '</ul>';
      } 
```

}

# c - 通过 RTSP 传输视频和音频

> ID：12432231
> 
> 赞同：2
> 
> 时间：2012-09-14T21:29:04.133
> 
> 标签：c, linux, rtsp, libavformat

我需要实现允许连接到两种类型的客户端的服务器。第一种类型必须将实时视频和音频流式传输到服务器。第二种类型必须从服务器流式传输此视频。我为视频选择了 h.264 编码，为音频选择了 vorbis ogg 编码。我想使用 RTSP 协议将视频从第一类客户端流式传输到服务器。我已经使用 ffmpeg 中的“libavformat”实现了客户端部分。我的代码如下所示。

```
#include "v_out_video_stream.h"

#include <stdint.h>
#ifdef __cplusplus
extern "C" {
#endif
#include <libavformat/avformat.h>
#include <libavutil/opt.h>
#include <libavutil/avstring.h>
#include <libavformat/avio.h>
#ifdef __cplusplus
}
#endif
#include <stdexcept>

struct VStatticRegistrar
{
    VStatticRegistrar( )
    {
        av_register_all( );
        avformat_network_init( );
    }
};

VStatticRegistrar __registrar;

struct VOutVideoStream::Private
{
    AVFormatContext * m_context;
    int m_audioStreamIndex;
    int m_videoStreamIndex;

    int m_videoBitrate;
    int m_width;
    int m_height;
    int m_fps;
    int m_audioSamplerate;
};

VOutVideoStream::VOutVideoStream( int videoBitrate, int width, int height, int fps, int audioSamplerate )
{
    d = new Private( );
    d->m_videoBitrate = videoBitrate;
    d->m_width = width;
    d->m_height = height;
    d->m_fps = fps;
    d->m_audioSamplerate = audioSamplerate;
    d->m_context = 0;
    d->m_audioStreamIndex = -1;
    d->m_videoStreamIndex = -1;
}

bool VOutVideoStream::connectToServer( const std::string& rtp_address, int rtp_port )
{
    assert( ! d->m_context );

    // initalize the AV context
    d->m_context = avformat_alloc_context();
    if( !d->m_context )
        return false;
    // get the output format
    d->m_context->oformat = av_guess_format( "rtsp", NULL, NULL );
    if( ! d->m_context->oformat )
        return false;

    // try to open the RTSP stream
    snprintf( d->m_context->filename, sizeof( d->m_context->filename ), "rtsp://%s:%d", rtp_address.c_str(), rtp_port );
    if( avio_open( &d->m_context->pb, d->m_context->filename, AVIO_FLAG_WRITE ) < 0 )
        return false;

    // add an H.264 stream
    AVStream *stream = avformat_new_stream( d->m_context, NULL );
    if ( ! stream )
        return false;
    // initalize codec
    AVCodecContext* codec = stream->codec;
    if( d->m_context->oformat->flags & AVFMT_GLOBALHEADER )
        codec->flags |= CODEC_FLAG_GLOBAL_HEADER;
    codec->codec_id = CODEC_ID_H264;
    codec->codec_type = AVMEDIA_TYPE_VIDEO;
    //codec->bit_rate = d->m_videoBitrate;
    codec->width = d->m_width;
    codec->height = d->m_height;
    codec->time_base.den = d->m_fps;
    codec->time_base.num = 1;
    d->m_audioStreamIndex = stream->index;

    stream = avformat_new_stream( d->m_context, NULL );
    if ( ! stream )
        return false;
    // initalize codec
    codec = stream->codec;
    if( d->m_context->oformat->flags & AVFMT_GLOBALHEADER )
        codec->flags |= CODEC_FLAG_GLOBAL_HEADER;
    codec->codec_id = CODEC_ID_VORBIS;
    codec->codec_type = AVMEDIA_TYPE_AUDIO;
    codec->sample_fmt = AV_SAMPLE_FMT_S16;
    codec->channels = 2;
    codec->bit_rate = d->m_audioSamplerate * codec->channels * 16;
    codec->sample_rate = d->m_audioSamplerate;
    d->m_videoStreamIndex = stream->index;
    // write the header
    return avformat_write_header( d->m_context, NULL ) == 0;
}

void VOutVideoStream::disconnect( )
{
    assert( d->m_context );

    avio_close( d->m_context->pb );
    avformat_free_context( d->m_context );
    d->m_context = 0;
}

VOutVideoStream::~VOutVideoStream( )
{
    if( d->m_context )
        disconnect( );
    delete d;
}

bool VOutVideoStream::send( VNetworkAbstractionLayer& nal )
{
    AVPacket p;
    av_init_packet( &p );
    p.data = nal.getPayload( );
    p.size = nal.getSize( );
    p.stream_index = nal.getType( ) == VNetworkAbstractionLayer::AUDIO_PACKET ? d->m_audioStreamIndex :
                                                                                d->m_videoStreamIndex;
    return av_write_frame( d->m_context, &p ) >= 0;
} 
```

VNetworkAbstractionLayer 是这样定义的：

```
#ifndef _V_NETWORK_ABSTRACTION_LAYER_H_
#define _V_NETWORK_ABSTRACTION_LAYER_H_

#include <cs/v_cs_global.h>

#include <stdint.h>
#include <cstring>
#include <boost/noncopyable.hpp>
#include <boost/enable_shared_from_this.hpp>

class VNetworkAbstractionLayer : public boost::enable_shared_from_this<VNetworkAbstractionLayer>,
                                 private boost::noncopyable
{
public:
    enum PacketType
    {
        AUDIO_PACKET,
        VIDEO_PACKET
    };

    ~VNetworkAbstractionLayer( ) {
        delete[] m_payload;
    }

    static VNetworkAbstractionLayerPtr factory( int size, const uint8_t* payload, PacketType type ) {
        return VNetworkAbstractionLayerPtr( new VNetworkAbstractionLayer( size, payload, type ) );
    }

    uint8_t* getPayload( ) {
        return m_payload;
    }
    int getSize( ) const {
        return m_size;
    }
    PacketType getType( ) const {
        return m_type;
    }

private:
    VNetworkAbstractionLayer( int size, const uint8_t* payload, PacketType type ) :
        m_size( size ),
        m_payload( new uint8_t[ size ] ),
        m_type( type )
    {
        memcpy( m_payload, payload, size );
    }

    int m_size;
    uint8_t *m_payload;
    PacketType m_type;
};

#endif // _V_NETWORK_ABSTRACTION_LAYER_H_ 
```

现在我需要实现服务器。但我在 libavformat 中没有找到任何“监听”方法。谁能解释我如何实现 RTSP 服务器。可能我可以使用任何其他图书馆吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:01:58.833

从头开始编写 RTSP/RTCP/RTP 堆栈非常复杂。您可以查看在 c++ 中实现此类堆栈的[live555库。](http://www.live555.com/liveMedia/)它适用于 ffmpeg/libav

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:12:23.613

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T04:20:06.897

您也可以使用[https://net7mma.codeplex.com/](https://net7mma.codeplex.com/)作为您的服务器！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-15T03:57:35.313

您可以使用[VLC](http://www.videolan.org)作为您的流媒体服务器。

# ios - iOS UIATarget 在点击（）之后检测何时加载 UIViewController？

> ID：12432232
> 
> 赞同：3
> 
> 时间：2012-09-14T21:29:29.150
> 
> 标签：ios, ios-ui-automation

我正在为我的 iOS 应用程序编写自动化测试，我试图弄清楚当视图控制器完全加载并在屏幕上时如何在 javascript 脚本中检测......

所以现在例如脚本点击一个按钮：

```
target.frontMostApp().mainWindow().buttons()["loginButton"].tap(); 
```

然后，一旦应用程序登录（可能需要几秒钟或更短的时间），我需要按另一个按钮。

现在，我通过简单地延迟使其工作：

```
target.delay(3); 
```

但我希望能够检测下一个视图控制器何时加载，以便我知道我可以访问刚刚加载的新屏幕上的元素。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T04:59:59.540

有一些方法可以实现：

1.  调整库

    [https://github.com/alexvollmer/tuneup_js](https://github.com/alexvollmer/tuneup_js)

    我真的建议检查一下。他们有一些有用的包装函数来编写更高级的测试。编写了一些方法来扩展`UIAElement`类。他们有`waitUntilVisible()`方法。

    但是元素本身可能为零。这不是能见度的问题，只是还没有出现在屏幕上。

2.  `UIATargetInstance.pushTimeout(delay)`和`UIATargetInstance.popTimeout()`

    苹果文档说：

    > 为了在这种情况下提供一些灵活性并让您更好地控制时间，UI 自动化提供了一个超时期限，在此期间它会在失败之前反复尝试执行指定的操作。如果操作在超时期间完成，则该行代码将返回，您的脚本可以继续。如果操作在超时期间未完成，则会引发异常。默认超时时间为 5 秒，但您的脚本可以随时更改它。

    您也可以使用`UIATarget.delay(delay);`函数，但这会延迟下一条语句的执行，而不必等待查找元素。`setTimeout(delay)`也可用于在 UIAutomation 决定找不到元素之前全局设置超时。

    Apple 的指南在这里解释了对框架的更多理解。[http://developer.apple.com/library/IOS/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/UsingtheAutomationInstrument/UsingtheAutomationInstrument.html](http://developer.apple.com/library/IOS/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/UsingtheAutomationInstrument/UsingtheAutomationInstrument.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:31:40.007

在大多数情况下，简单地识别特定于下一个视图控制器的元素就足够了。然而，元素的描述必须是新 UI 独有的。

IE `target.frontmostApp().mainWindo().navigationBar()["My Next View"];`

脚本应该延迟，直到可以识别元素或达到超时（请参阅 参考资料`pushTimeout` `popTimout`）。

在某些情况下，可能需要指定元素是可见的。

`.withValueForKey(1, "isVisible")`

也可以用来`waitForInvalid`做相反的事情（等待前一个 UI 中的某些内容消失）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:17:40.983

[在此处](https://github.com/alexvollmer/tuneup_js/blob/master/uiautomation-ext.js)搜索调整库

参考函数 waitUntilVisible 相同。您可以包含其他文件以支持其中的功能。希望它有所帮助。

# c# - 用正则表达式查找和替换字符串中的数字

> ID：12432237
> 
> 赞同：5
> 
> 时间：2012-09-14T21:29:48.147
> 
> 标签：c#, regex

我想要实现的是将字符串中的数字替换为从`(match * int)`.

所以字符串输入看起来像：

```
500g Flour
14g Salt
7g Dry yeast
45ml Olive oil
309ml Water 
```

结果应该是这样的：

```
1000g Flour
28g Salt
14g Dry yeast
90ml Olive oil
618 ml Water 
```

`row["ingredients"]`是一个`DataRow`。

这就是我所在的位置：

```
System.Text.RegularExpressions.
        Regex.Replace(row["ingredients"].ToString(), 
                      @"[^/d]", Delegate(Match match) { return match * 2; },
                      RegexOptions.Multiline); 
```

非常感谢任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:32:44.450

第一个问题是您的正则表达式只匹配不是数字的字符。

**更正：**它使用正斜杠而不是反斜杠，因此它匹配任何不是斜杠或广告的东西

将您的正则表达式更改为`@"\b(\d+)"`

[这是dotnetfiddle.net](https://dotnetfiddle.net/E0wkUz)上的一个工作示例

```
using System;
using System.Text.RegularExpressions;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var string1 = "500g Flour 14g Salt 7g Dry yeast 45ml Olive oil 309ml Water";

            var result = Regex.Replace(string1, @"\b(\d+)", Doubler, RegexOptions.Multiline);

            Console.WriteLine(result);

            Console.ReadKey();
        }

        private static string Doubler(Match match)
        {
            return (Convert.ToInt32(match.Value)*2).ToString();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:34:25.993

`[^/d]`表示“除斜线或字母之外的任何字符`d`”。

要匹配数字，请使用`\d+`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:28:28.027

将不同类型的数据保存到数据行中不是好的做法。在您的示例中：“500 克面粉”- 这里有成分值、测量类型、成分名称。我建议创建代表这一行的小型数据类，所有类型的数据都将是该类的属性。
好处是无视的：
- 无需用正则表达式魔术替换
- 易于扩展和修改

使用正则表达式所需的只是为提供的数据行创建正确的解析器。但可以肯定的是，它比替换技巧更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T17:05:50.693

```
void Main()
{
  string ingredients =
@"500g Flour
0.5g Salt
7g Dry yeast
45ml Olive oil
309ml Water";

  string pattern = @"(?:[0-9]+\.?[0-9]*|\.[0-9]+)";

  int multiple = 2;

  Regex.Replace(ingredients, pattern, m => (Convert.ToDecimal(m.Value)*multiple).ToString()).Dump();
} 
```

我在 LINQPad 中执行此操作，因此不必担心仅用于输出结果的 Dump()。我将 salt 更改为 0.5 只是为了表明它适用于非整数。该模式是我能想到的用于匹配整数和小数（小数点前有或没有任何数字）的最佳模式，因此它将匹配 17、3.141592 或 .5

# ruby-on-rails - 如何在 Mongoid 中找到字段数组计数大于一定数量的所有记录？

> ID：12432243
> 
> 赞同：2
> 
> 时间：2012-09-14T21:30:02.660
> 
> 标签：ruby-on-rails, mongoid

我基本上有一个`User`对象，其中定义的是一个数组`field` `phone_numbers`。我想获取我的数据库中`phone_numbers`计数大于的所有用户对象`1`。

是否有资源可以了解此类查询？我在网上找不到任何有用的东西，因为大多数结果都是为了更简单的查询。

代码：

```
class Location
  include Mongoid::Document

  field :name
  field :phone_numbers, type: Array
end 
```

我尝试了以下但没有奏效：

```
Location.where("this.phone_numbers.count < 1").count 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:55:51.630

将无法通过查询检查此信息...在您的文档中创建一个字段，该字段将保留`phone_numbers`数组的计数，每次像这样更新您保存文档的值

```
class Location
   include Mongoid::Document

   field :name
   field :phone_numbers, type: Array
   field :phone_number_count, type: Integer

   after_save do |location|
      if location.phone_numbers.blank?
         location.phone_number_count = 0
      else
         location.phone_number_count = location.phone_numbers.size 
      end
      location.save
   end
end 
```

然后您可以运行查询

```
Location.where(:phone_number_count.gt => 1).enteries 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-02T13:41:49.613

`phone_numbers[0]`此查询搜索字段中是否存在任何对象

```
Location.where(:"phone_numbers.0".exists => true).count 
```

此查询解决了您的电话号码计数大于 1 的问题；如果存在该字段`phone_numbers[0]`，则表示数组中至少有电话号码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T23:17:54.333

尝试这个：

```
Location.where(:phone_numbers.gte => '1').count 
```

# c# - 为什么通用列表 AddRange 返回 void 而不是列表？

> ID：12432248
> 
> 赞同：14
> 
> 时间：2012-09-14T21:30:24.270
> 
> 标签：c#

```
namespace System.Collections.Generic
  public List<T>    
    public void AddRange(IEnumerable<T> collection) 
```

似乎不返回某些东西可能是一个有意的设计决定。我被这个期望 AddRange 是“流利的”咬了。

我只是好奇是否有人知道设计动机，如果有的话，什么都不返回？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-14T21:33:35.770

该`AddRange`方法是在 .NET 2.0 中添加的，在 LINQ 出现之前，当时“流畅性”根本不流行。当时，没有人期望`AddRange`返回任何东西。另外，在那个版本的 .NET 中，没有 List 对象的初始化程序，所以你**必须**Add() 一堆项目到列表中。AddRange 提供了一种快捷方式，无需逐个循环和添加对象。

等效的 LINQ 方法是`IEnumerable<T>.Concat()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T22:24:15.073

其他答案（基本上）是正确的，但它们都没有解决*为什么* `AddRange`可能会返回某些东西的两种可能性。

这样做的一个原因是创建一个流畅的 API，如下所示：

```
list.Add(1).Add(2).Add(3);
list.AddRange(aGroupOfNumbers).AddRange(theNextGroupOfNumbers); 
```

为了实现这一点，列表只是在改变列表的方法的末尾返回自身。正如 Trisped 所指出的，在引入`StringBuilder`泛型之前就这样做`List<T>`了。

正如 Felix K. 所暗示的那样，返回某些东西的另一个原因是类型是不可变的。如果一个列表是不可变的，它就*不能*在方法结束时返回自己，因为它不能改变自己；并且它不能再次返回 void，因为它不能自我变异。为了反映方法契约定义的更改，列表必须创建一个包含更改的新实例，然后当然必须将该新实例返回给调用者。当涉及到集合时，人们有时很难想到这一点，但是有一种非常著名的类型就是这样表现的：`System.String`. 正如 db 所说，没有人期望列表返回任何内容，因为“经典”命令式编程风格在改变数据结构时使用 void 方法。

命名空间的设计者`System.Collections.Generic`可能没有想过为他们的类型提供流畅的 API，但如果他们这样做了，我可以看到他们可能会如何决定反对它。当然，StringBuilder 中的流式 API 的情况比`List<T>`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T21:37:01.050

该列表不是结构，因此它会发生变异，如果您想要一个避免变异的列表，您必须编写自己的列表或使用 Linq 或只使用以下代码：

```
List<T> newList = new List<T>(originalList);
newList.AddRange(...); 
```

或者在构造列表时（`IEnumerable<T>.Concat()`在构造函数处）使用 Linq。有很多方法可以避免突变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T21:37:14.990

该[`AddRange`](http://msdn.microsoft.com/en-us/library/z883w3dc.aspx)方法添加`collection`到[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)调用该函数的实例。

因此，您不需要返回任何内容，因为结果已经存在。

当时，如果要完成的工作没有创建新对象，那么什么都不会返回。唯一想到的例外是[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)类，其中大多数成员方法返回指向调用实例的指针。这是为了启用命令链接，并在文档中特别提到。

# c - C中的字符串复制导致分段错误

> ID：12432251
> 
> 赞同：3
> 
> 时间：2012-09-14T21:30:46.580
> 
> 标签：c, string, segmentation-fault

我正在尝试使用 strcpy 函数将字符串复制到另一个 char 指针变量中。但我总是遇到分段错误。这是我的代码。

```
/* strcat example */
#include <stdio.h>
#include <string.h>

int main()
{
  char str[100]="";
  char *pch3;
  strcpy(pch3,"Ravi");
  //strcat(str,pch3); //Segmnetation fault.
  puts(pch3);
  return 0;
} 
```

如果我在这个中做同样的事情，我仍然会遇到分段错误。

```
 else
      {
         misc_rec_cnt++;
         fp1=fopen("breast-cancer-wisconsin-miscellaneous.data","a");
         fprintf(fp1,"%s",line2);
         fclose(fp1);
         fp2=fopen("missingSCNs.data","a");
         pch2=strtok(line2,",");
         fprintf(fp2,"%s\n",pch2);
         fclose(fp2);

         //pch3=(char *)malloc(sizeof(char)*strlen(line3));
         pch3 = strtok(line3,",");
         while(pch3!=NULL)
         {
             if(strcmp(pch3,"?") == 0)
             {
                strcat(str1,"0");
                strcat(str1,",");
             }
             else
             {
                //strcat(str1,pch3);
                strcat(str1,",");
             }
             pch3 = strtok(NULL,",");
         }
         strlen1=strlen(str1);
         memcpy(str2,str1,strlen1-1);
         fp3=fopen("breast-cancer-wisconsin-miscellaneous-cleansed.data","a");
         fprintf(fp3,"%s\n",str2);
         fclose(fp3);
      } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:31:55.737

您需要先分配空间，`pch3`然后再复制到它。用于在复制**之前**`malloc`创建一个足够大的 char 数组以容纳源字符串的元素。您当前正在做的是声明一个 char 指针而不是对其进行初始化。因此，它指向的内存位置可能在任何地方——这意味着你可能不应该尝试写入它——这就是你得到段错误的原因。Using将允许您分配一个可以安全写入的内存区域，这将解决您的问题（假设调用成功）。您不能只是将数据写入随机内存位置而不会出现段错误和访问冲突。**`malloc``malloc`**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T21:31:53.843

`pch3`是一个字符指针，但它*没有任何与之关联的存储，*这是导致问题的原因。调用[`malloc()`](http://linux.die.net/man/3/malloc)分配一些`pch3`指针可以指向的内存，你应该没问题。

此时，您有一个未初始化的 char 指针，只是指向未知的地方。所以试试这个：

```
 pch3 = (char *)malloc(sizeof(char) * 100); /* 100 just as an example */ 
```

本[教程](http://www.daniweb.com/software-development/c/threads/282296/malloc-in-c-short-tutorial)可能会有所帮助或这个 SO 问题：[Allocating char array using malloc](https://stackoverflow.com/questions/3115564/allocating-char-array-using-malloc)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T21:35:32.187

`pch3`是一个未分配的指针，因此您正在将数据写入一个不存在的位置。你的意思是把它分配给`str`?

```
char str[100]="";
char *pch3;
pch3 = str;
strcpy(pch3,"Ravi"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T21:32:14.277

我建议您在将数据复制到随机位置之前先分配内存。

```
strcpy(pch3=(char*)malloc(sizeof("Ravi")),"Ravi"); 
```

但最好检查它是否没有返回空指针。**

# html - 元素周围的括号样式边框

> ID：12432252
> 
> 赞同：2
> 
> 时间：2012-09-14T21:30:47.923
> 
> 标签：html, css, image, border

我正在寻找一种在`<h2>`标题周围实现括号样式边框的方法；我附上了一张图片，准确地显示了我想要完成的事情。

我能想到的实现这种效果的唯一方法是使用图像，但我不确定该怎么做（我所有的`<h2>`s 都具有不同的长度/高度，或者是否有更好的方法。

非常感谢任何提示和见解。

**我不想复活这个，但我可以期待什么作为更新图像中显示的问题的解决方案？右边的线太靠右了，还有文字上下的一些不透明问题。。

![括号边框](../Images/33c54950ef5aa31bc216e30c64579abe.png)

更新：![更新的图像](../Images/202e5dbc5903a656ddd07d1da4cd8aa9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:35:42.140

[工作 jsFiddle 示例。](http://jsfiddle.net/9CHuH/1/)

使用以下内容。您只需要更改文本的字体或将其替换为图像，并且可能更改边框的颜色以匹配您的。对于 HTML：

```
<div id="h2pre"></div>
<h2>
    <div id="h2inpre"></div>
    <div id="h2cont">Ready for the event of a lifetime?<br/>
    We'd love to hear from you.
    </div>
    <div id="h2inpos"></div>
</h2>​ 
```

对于 CSS：

```
h2{
   text-align:center;  
   position:relative;    
   margin-left:50%;
   left:-150px
}

div{ float:left; }

#h2inpre, #h2inpos{
   background-color:#fff;
   height:50px;
   width:20px;
   border-bottom:1px solid #FFA500;
   border-top:1px solid #FFA500;
}

#h2inpre{
       border-left:1px solid #FFA500;   
}

#h2inpos{
     border-right:1px solid #FFA500;   
    clear:right;
}

#h2cont{
 font-family:"Arial",sans-serif;
 padding:5px;
 background-color:#fff;
}

#h2pre{
   height:1px;
    width:100%;
    background-color:#FFA500;
    margin-top:25px;
    position:absolute;
    float:none;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:59:24.793

html:

```
<h2 class="bracket"><span class="text">Ready for the event of a lifetime?<br>We'd love to hear from you.</span></h2> 
```

CSS：

```
.bracket {
  position: relative;
  text-align: center;
  color: #999;
  font-size: 1.2em;
}
.bracket:before {/* vertical stripe */
  content: " ";
  border-top: solid 1px orange;
  position: absolute;
  bottom: 50%;
  left: 0;
  right: 0;
}
.bracket .text {
  position: relative;
  display: inline-block;
  background: #fff;
  padding: .2em 1em;
  max-width: 80%;/* force that at least some of vertical stripe is still shown */
}

.bracket .text:before {/*left bracket*/
  content: " ";
  border: solid 1px orange;
  border-right: 0px;
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: .4em;
  right: 0;
}

.bracket .text:after {/*right bracket*/
  content: " ";
  border: solid 1px orange;
  border-left: 0px;
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: .4em;
  right: 0;
} 
```

演示：http: [//jsbin.com/ibiyal/2](http://jsbin.com/ibiyal/2)

您可能需要修改文本块的填充以及左右括号的宽度。

唯一的缺点是它只适用于纯色背景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T21:51:24.423

这是完全可能的。看看：[http ://tinkerbin.com/zQ1VWLLi](http://tinkerbin.com/zQ1VWLLi)

的HTML...

```
<h2 class="box">
  <span>Ready for the event of a lifetime? <br/> We'd love to hear from you.</span>
</h2> 
```

CSS...

```
h2:before,
h2 span:before,
h2 span:after {
  content: "";
  position: absolute;
}

h2 {
  position: relative;
  font: 16px/1.2em cambria;
  text-align: center;
}

h2:before {
  top: 50%;
  height: 1px; width: 100%;
  background-color: orange;
}

h2 span {
  display: block;
  width: 50%;
  padding: 7px;
  margin: 0 auto;
  position: relative;
  background: /*same as background where it sits*/;
  border: 1px solid orange;
}

h2 span:before,
h2 span:after {
  left: 7%; right: 7%;
  height: 1px;
  background: /*same as background where it sits*/;
}

h2 span:before {
  top: -1px;
}

h2 span:after {
  bottom: -1px
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T22:01:22.723

你可以用 HTML 和 CSS 做到这一点。

## CSS

```
#container { 
   position: relative; 
   height: 43px; 
} 
#bracks { 
   background-color: #fff; 
   margin:0 auto; 
   border: 1px solid black; 
   width: 200px; 
   height: 40px; 
   position: relative; 
 }

#text { 
   background-color: #fff; 
   position: absolute; 
   width: 150; 
   left: 15; 
   height: 22px; 
   top: -1; 
   padding: 10px; 
   text-align: center;
 }

 #strike {  
   position: absolute; 
   top: 21; 
   width: 100%; 
   border-top: 1px solid black; 
 } 
```

## HTML

```
<div id="container">
  <div id="strike">&nbsp;</div>
  <div id="bracks">
    <div id="text">Some text here.</div>
  </div>
</div> 
```

# c# - 如何在 C#/.NET 中隐藏 ScrollBar 箭头

> ID：12432253
> 
> 赞同：2
> 
> 时间：2012-09-14T21:30:54.913
> 
> 标签：c#, .net, scrollbar

我想在我的应用程序中使用 ScrollBar，但我不希望出现默认的结束箭头；我希望能够使用其他“外部”控件来激活滚动条。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:52:05.417

请不要 - 当文档太长而无法通过拖动滚动条滚动并且用户缺少鼠标滚轮或使用它的方法时，滚动条箭头是必不可少的辅助功能，那么滚动的唯一方法是单击箭头纽扣。

（Apple 侥幸逃脱，因为他们所有的现代硬件都支持触摸滚动，但我们 Windows 阵营没有那么奢侈）

# ios - 在 iOS 上使用 API v2 发布到 tumblr 返回错误

> ID：12432256
> 
> 赞同：5
> 
> 时间：2012-09-14T21:31:06.643
> 
> 标签：ios, api, oauth, tumblr

我最近让 oAuth 为我的 iOS 应用程序工作以登录 Tumblr。现在我无法使用新的 API 调用发布。我能够生成请求并准备 Autorization 标头，但仍然出现错误。

这是我的网址：

> [http://api.tumblr.com/v2/blog/my_blog.tumblr.com/post?tweet=no&tags=my%2C%20app&state=published&type=text&title=Hello&body=I%2520finally%2520got%2520this%2520to%2520work](http://api.tumblr.com/v2/blog/my_blog.tumblr.com/post?tweet=no&tags=my%2C%20app&state=published&type=text&title=Hello&body=I%2520finally%2520got%2520this%2520to%2520work)

这是我的授权标头，其中 x 代替了敏感信息：

> 授权 = "OAuth realm=\"\", oauth_consumer_key=\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\", oauth_token=\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\", oauth_signature_method=\"HMAC-SHA1\", oauth_signature=\"XXXXXXXXXXXXXXXXXXXXXXXXX\", oauthXXX6620777 \", oauth_nonce=\"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\", oauth_version=\"1.0\"";

我收到错误：

> {"meta":{"status":400,"msg":"Bad Request"},"response":{"errors":["Post 不能为空。"]}}

这个事情谁有经验？我已经在两天内工作了至少 20 个小时。

任何帮助是极大的赞赏。

编辑：我还尝试在 url 中包含授权数据（即 oauth_token、oauth_consumer_key），基本上是在标题中找到的内容。当我这样做时，我得到一个 401“未授权”错误，我知道这是不正确的，因为我刚刚成功调用了需要有效授权的“http://api.tumblr.com/v2/user/info”。

找到解决方案，请参阅[此处](http://www.iphonedevsdk.com/forum/iphone-sdk-development/107860-using-oauth-with-tumblr.html#latest)的说明。

# mysql - HeidiSQL 连接到 mysql 服务器 - 丢失连接...服务器在读取初始

> ID：12432260
> 
> 赞同：5
> 
> 时间：2012-09-14T21:31:38.603
> 
> 标签：mysql, heidisql

刚接触数据库，不知道从哪里开始排除故障 -

我目前正在使用 HeidiSQL 连接到托管在 Amazon Web Service - EC2 上的外部 MySQL 数据库服务器。

我可以使用带有设置的 HeidiSQL 访问数据库：MySQL（SSH 隧道）主机名/IP：127.0.0.1 用户：（用户）密码：（pw）端口 3306

在 SSH 隧道选项卡中：plink.exe 位置设置为 putty.exe sshhost + 端口：（我的主机 ip）端口 22 私钥文件：（已设置）本地端口：3307

使用此配置，我能够登录到我的数据库。我的问题是当我尝试使用我自己的腻子命令使用端口转发来执行此操作时：

在 Putty 中：我设置 SSH>tunnels - 源端口：3307，目标（我的主机 ip）：3306 本地和自动。我使用我的密码和 hostip 进行连接

回到 HeidiSQL，我把我的设置放到：MYSL (TCP/IP) 主机名：localhost 用户：（用户）密码（pw）端口 3307

并尝试连接。我收到以下错误：SL ERROR (2013): Lost connection to MySQL server at 'reading initial communication packet'，系统错误：0

根据我的阅读，这意味着我的 ssh 隧道正在工作，但还有其他问题。我现在不知道为什么这不起作用。我没有正确设置其他东西吗？给自己做防火墙？我的最终目标是使用相同的端口转发思想连接另一个应用程序以使用 ODBC 或 JDBC 与数据库进行通信。是否有日志可以检查某处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-08T15:20:57.773

你必须设置

```
AllowTcpForwarding yes
PermitTunnel yes 
```

在 /etc/ssh/sshd_config

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T22:57:49.077

好像您正在尝试这样做： [http](http://realprogrammers.com/how_to/set_up_an_ssh_tunnel_with_putty.html) ://realprogrammers.com/how_to/set_up_an_ssh_tunnel_with_putty.html 它应该可以工作。我假设 ssh 服务器和 mysql 服务器正在远程机器上运行。

> 在 Putty 中：我设置 SSH>tunnels - 源端口：3307，目标（我的主机 ip）：3306 本地和自动。我使用我的密码和 hostip 进行连接

它应该是：设置 SSH>tunnels - 源端口：3307，目标 127.0.0.1:3306 本地和自动。

heidisql：MYSL (TCP/IP) 主机名：localhost 用户：（用户）密码（pw）端口 3307

请注意，如果您在本地计算机上运行 MySQL 服务，则在您尝试侦听的端口 (3307 ) 上，即使本地服务已关闭，您也会收到 2013 错误！在这种情况下，请使用任意未使用的端口。

此外，如果远程 mysql 服务器的用户表（mysql 数据库）仅限于某些主机，这将不起作用。除非您发现服务器如何识别自己（计算机名称）并将他添加到用户表中，否则您只需使用“%”通配符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-25T09:07:49.530

请按照以下步骤解决我在连接到 Live 服务器时遇到的问题：

1.  找到您的 IP（谷歌 - 我的 ip 是什么）。
2.  转到 Live Server 的 C-Panel。
3.  转到 C-Panel 中的远程 MySQL。
4.  添加您从第 1 步获得的 IP 地址并保存。
5.  现在尝试通过 Heidi SQL 进行连接。

请让我知道它是否有帮助。

# compass-sass - Sass/Compass - 仅在参数不是默认值时生成规则？

> ID：12432268
> 
> 赞同：0
> 
> 时间：2012-09-14T21:32:22.690
> 
> 标签：compass-sass, sass

我的一个 SCSS 包含文件中有这样的内容：

```
$inputBorderRadius: 0 !default;

.input {
  @include border-radius($inputBorderRadius);
} 
```

这很好用；我可以覆盖`$inputBorderRadius`之前的代码，包括上面的代码，一切都按照我期望的方式运行。

我想知道的是，`border-radius`如果（例如）`$inputBorderRadius`为空，是否有办法告诉 SASS 根本不生成规则。就我而言，我只是不想生成像`border-radius: 0`指定默认值那样的多余规则。

我知道该`@if`指令，但文档说：

> 请注意，控制指令是一项高级功能，不建议在日常造型过程中使用。

我在想这一切都错了吗？我对 SASS 相当陌生，所以我希望这不是一个太多的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T22:43:37.373

您只想使用该`null`值代替`0`. Null 现在在 Sass 3.2 中可用，并且当它是唯一值时不会输出该属性。

您也可以更轻松地接受该警告。您不想在正常使用中被控制指令冲昏头脑，但是当您需要它们时它们不会伤害任何东西。对于更简单的情况也有一个有用的`if($test, $true, $false)`功能。

# python - python：将发出的命令存储在日志文件中

> ID：12432277
> 
> 赞同：4
> 
> 时间：2012-09-14T21:33:38.233
> 
> 标签：python, command-line-arguments, logfiles

我正在执行一个组合了不同参数的程序。我需要准确跟踪程序在命令行中提供了哪些参数。我正在维护一个日志文件，我需要在其中存储这些发出的命令以及结果摘要。

例如，我可能会在不同时间发出以下命令。

```
$python myprog.py -i input.txt -o output.txt -x 2 -y 3 -z 9
$python myprog.py  input.txt -o output.txt -x 2  -z 9
$python myprog.py -i input.txt -o output.txt -x 2 -y 3 
$python myprog.py -i input.txt -o output.txt  -z 9 
```

如何将这些命令存储到我的日志文件中？

我这样做是因为我可能需要使用完全相同的选项重新执行相同的程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:37:40.280

您可以使用该模块`sys`将所有参数作为列表获取，`argv`. 要将它们记录到文本文件中，您可以使用以下代码：

```
import sys
logfile = open("logfile.txt", "w")
logfile.write(" ".join(sys.argv))
logfile.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T21:38:24.990

您可以使用[日志记录模块](http://docs.python.org/library/logging.html)：

```
import logging
import sys
logger = logging.getLogger(__name__)

if __name__ == '__main__':
    logging.basicConfig(filename = '/tmp/command.log', level = logging.INFO,
                        format = '%(asctime)s %(message)s',
                        datefmt = '%Y-%m-%d %H:%M:%S')

    logger.info(sys.argv) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:37:58.270

您可以从 捕获程序内部的参数`sys.argv`，并将它们附加到日志文件中。

```
import datetime
import sys
if __name__ == '__main__':
    now = datetime.datetime.now().ctime()
    with open('logfile', 'a') as log:
        log.write("Invoked at %s with args: %s\n" % (now, sys.argv) 
```

# actionscript-3 - Flex 条件验证

> ID：12432278
> 
> 赞同：0
> 
> 时间：2012-09-14T21:33:47.367
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex4.5

我正在尝试对 mxml 文件中的三个字段进行验证。其中两个是必需的，一个不是。我只想在输入内容时验证邮政编码字段。如果它是空白的，那么我想允许启用“提交”按钮，只要正确设置了其他两个必填字段。代码：

```
<mx:EmailValidator id="emailValidator" 
                       property="text" source="{ownerName}"
                       valid="emailValidator_validHandler(event)"
                       invalid="emailValidator_validHandler(event)"/>
    <mx:ZipCodeValidator id="zipCodeValidator"
                         property="text" source="{zip}"
                         required="false"
                         valid="zipCodeValidator_validHandler(event)"
                         invalid="zipCodeValidator_validHandler(event)"/>

    <mx:Validator id="roomNameValidator" 
                  property="text" source="{roomName}"
                  valid="roomNameValidator_validHandler(event)"
                  invalid="roomNameValidator_validHandler(event)"/>
        [Bindable]
        private var isRoomNameValid:Boolean;
        [Bindable]
        private var isOwnerValid:Boolean;
        [Bindable]
        private var isZipValid:Boolean;

        protected function emailValidator_validHandler(event:ValidationResultEvent):void
        {
            isOwnerValid = (event.type==ValidationResultEvent.VALID);
        }

        protected function zipCodeValidator_validHandler(event:ValidationResultEvent):void
        {
            isZipValid = (event.type == ValidationResultEvent.VALID);
        }
        protected function roomNameValidator_validHandler(event:ValidationResultEvent):void
        {
            isRoomNameValid = (event.type==ValidationResultEvent.VALID);
        } 
```

然后我尝试设置提交按钮的启用属性：

```
 enabled = "{isOwnerValid &amp;&amp; isRoomNameValid &amp;&amp zip.text.length>0?isZipValid:true}" 
```

但它不起作用。即使邮政编码字段显示红色边框，我仍然可以在邮政编码字段中提交错误数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T00:17:12.233

这不能回答您的问题，但您可能需要认真考虑使用某种类型的 MVC。启用的函数中的所有逻辑都有代码味道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T02:22:56.123

编辑：我之前的建议可能导致无限循环:-)

我建议使用文本框的更改方法来执行验证，如下所示：

```
protected function changeHandler(event:Event):void
{
    submitButton.enabled = Validator.validateAll(validators.source);
}

<mx:ArrayCollection id="validators">
    <mx:EmailValidator id="emailValidator"
                   property="text" source="{ownerName}" />        
    <mx:ZipCodeValidator id="zipCodeValidator"
                   property="text" source="{zip}"
                   required="false" />
    <mx:Validator id="roomNameValidator" 
                   property="text" source="{roomName}" />
</mx:ArrayCollection>

<mx:Label text="Owner Name:" />
<mx:TextInput id="ownerName" change="changeHandler(event)" />
<mx:Label text="Zip Code:" />
<mx:TextInput id="zip" change="changeHandler(event)" />
<mx:Label text="Room Name:" />
<mx:TextInput id="roomName" change="changeHandler(event)" />
<mx:Button id="submitButton" label="Submit" enabled="false" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T03:15:56.993

首先，由于邮政编码不是强制性的，您应该将其初始化为`true`：

**[可绑定] var isZipValid:Boolean = true;**

* * *

现在有一个解决方案：

```
protected function zipCodeValidator_validHandler(event:ValidationResultEvent):void
{
    isZipValid = (zip.text.length == 0) || (event.type == ValidationResultEvent.VALID);
} 
```

然后在您的提交按钮中

```
enabled = "{isOwnerValid && isRoomNameValid && isZipValid}" 
```

* * *

另一种解决方案是：仅当邮政编码不为空时才启用作为验证器本身，您应该将其初始化为 true ：

```
<mx:ZipCodeValidator id="zipCodeValidator"
                 property="text" source="{zip}"
                 required="false"
                 valid="zipCodeValidator_validHandler(event)"
                 invalid="zipCodeValidator_validHandler(event)"
                 enabled="{zip.text.length > 0}"/> 
```

[可绑定] var isZipValid:Boolean = true;

# ruby-on-rails - 我将如何更改 rails 项目目录？

> ID：12432281
> 
> 赞同：0
> 
> 时间：2012-09-14T21:34:04.070
> 
> 标签：ruby-on-rails, ruby, windows

我在 Windows 上使用 Ruby，当我使用 rails 创建项目时，它会将文件夹放在我的用户目录中，我想指定另一个位置。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T22:06:37.290

当您说`rails new`：

```
> rails new /some/path/where/you/want/your/app 
```

这应该像其他任何地方一样在 Windows 中工作。

您总是可以说`rails --help`或`rails command --help`获得有关使用该`rails`命令的一些快速帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:35:17.927

用于`cd`在生成项目之前移动到您想要的目录。

# javascript - jQuery 自动完成性能

> ID：12432282
> 
> 赞同：1
> 
> 时间：2012-09-14T21:34:09.463
> 
> 标签：javascript, jquery, caching, autocomplete

我已经实现了 jQuery UI 自动完成功能并且遇到了明显的性能问题。

最初，我让它对输入的每个字符发送一个新查询（但必须输入至少 3 个）。

我的数据库已编入索引，有 50k 行数据（5 列）。我在数据库级别没有性能问题。

我决定尝试的一种技术是缓存 JSON 并将自动完成指向它而不是数据库。这很完美......最多2000行左右。除此之外，它变得缓慢而不稳定。

如果有人对技术有建议，我将不胜感激。

这里有一些代码可以让您了解 Javascript。

```
// First, setup some data to iterate over. 
// My thought is to query the DB once, and build this list in memory to avoid autocomplete hitting the database each keystroke.        

var data = []; 
    data.push({value: "Person 1", label: "Person 1"});
    data.push({value: "Person 2", label: "Person 2"});

$("#searchBox").autocomplete({
    source: data;
    minChars: 3;
    delay: 0;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:38:32.277

50k 行！！！！网络几乎肯定是你的瓶颈。使用 TOP 或 LIMIT（不知道您使用的是什么数据库）当然，用户永远不会扫描 50,000 个结果，只是在他们继续输入时带回前 10 个结果。

编辑

啊，我误读了您的问题，该表有 50k 行，而不是您要返回 50k 行 Doh！但是你确实提到了缓存 2k 行，所以......只需使用 TOP 限制结果并逐步提高直到它变得太慢，找到适合的折衷方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-30T18:26:49.213

我不使用服务器端的任何数据库，所有索引都存储在平面文件中，并且只向客户端发送“应答窗口”。

您可以使用我的解决方案，在此处获取源代码：http: [//enumer.org/ac-dist.tgz](http://enumer.org/ac-dist.tgz)

这工作非常快，可以处理巨大的字典：10M+ 记录OK。

在 Apache WEB 服务器下工作，在类 Unix 操作系统上使用 FastCGI 模块。我的演示在旧机器上运行：Celeron-300 DeskPro，这个硬件足以让你以你看到的速度快速工作。

服务器部分用 C++ 编写，客户端：JavaScript+Ajax。

源代码可根据要求免费提供。

# webdriver - 回发页面最小化浏览器 - Selenium WebDriver

> ID：12432288
> 
> 赞同：1
> 
> 时间：2012-09-14T21:34:52.010
> 
> 标签：webdriver, selenium-webdriver

我有一个下拉菜单很少的网页，当下拉项目更改时，它会刷新页面并重新加载。

所以现在我正在针对该页面编写脚本，我注意到每当我的脚本从下拉列表中选择文本时，我的浏览器都会被最小化。

我的问题，是否有任何设置可以确保我的浏览器在运行脚本时最大化？

这是下拉菜单中 SelectText 的代码：

```
 public void SelectText(By locator, string txt)
     {
            IWebElement element = driver.FindElement(locator);
            SelectElement selectelement = new SelectElement(element);
            selectelement.SelectByText(txt);    
     } 
```

我在用

```
IE 8
Selenium 2 WebDriver 
C# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T11:18:03.023

我强烈怀疑浏览器实际上被放到了 Z 顺序的底部，而不是最小化。也就是说，它被推到桌面上打开的窗口堆栈的底部。如果您有其他应用程序正在运行，并且它们正在以最大化的方式运行，则 IE 看​​起来好像已被最小化，但实际上并非如此。已知某些行为会导致 IE 以这种方式运行，但目前还没有人能够弄清楚原因。

最大化 IE 窗口并不能解决问题。不过，您可以使用最大化 IE 窗口

```
// WARNING! Untested code written from memory
// without the benefit of an IDE. Not guaranteed
// to be syntactically correct. 
driver.Manage().Window.Maximize(); 
```

# java - 带 --java 标志和不带标志的 jruby AOT 类之间的区别

> ID：12432296
> 
> 赞同：2
> 
> 时间：2012-09-14T21:35:42.260
> 
> 标签：java, jruby, javac, jruby-java-interop

当我使用 将 ruby​​ 文件编译为 java 类时，使用 just和 with （生成 java 文件）和 just`jrubyc`编译时会得到不同的输出。为什么？`jrubyc``jrubyc --java``javac`

例子：

第一种方法：

```
jrubyc --java myscript.rb
javac -cp .:./jruby-complete.jar myscript.java 
```

第二种方法：

```
jrubyc myscript.rb 
```

我希望生成的类完全相同，但事实并非如此。幕后在做什么`jrubyc`？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T07:54:38.643

`jrubyc myscript.rb`编译 Ruby 文件以供 JRuby 使用，并且不能从 Java 中使用，因此名称为 AOT。用于编译它的代码是用于转换为字节码的普通 JRuby 编译器。您只能使用`myscript.class`JRuby 脚本中的结果，例如使用`require 'myscript'`. 使用时`javap`：

```
ubuntu@ubuntu:/tmp$ javap myscript
Compiled from "myscript.rb"
public class myscript extends org.jruby.ast.executable.AbstractScript {
  public myscript();
  public static org.jruby.runtime.builtin.IRubyObject __file__(myscript, org.jruby.runtime.ThreadContext, org.jruby.runtime.builtin.IRubyObject, org.jruby.runtime.builtin.IRubyObject[], org.jruby.runtime.Block);
  public org.jruby.runtime.builtin.IRubyObject __file__(org.jruby.runtime.ThreadContext, org.jruby.runtime.builtin.IRubyObject, org.jruby.runtime.builtin.IRubyObject[], org.jruby.runtime.Block);
  public static org.jruby.runtime.builtin.IRubyObject class_0$RUBY$MyScript(myscript, org.jruby.runtime.ThreadContext, org.jruby.runtime.builtin.IRubyObject, org.jruby.runtime.Block);
  public static org.jruby.runtime.builtin.IRubyObject method__1$RUBY$run(myscript, org.jruby.runtime.ThreadContext, org.jruby.runtime.builtin.IRubyObject, org.jruby.runtime.Block);
  public static org.jruby.runtime.builtin.IRubyObject method__1$RUBY$run(myscript, org.jruby.runtime.ThreadContext, org.jruby.runtime.builtin.IRubyObject, org.jruby.runtime.builtin.IRubyObject[], org.jruby.runtime.Block);
  public static org.jruby.runtime.builtin.IRubyObject class_0$RUBY$MyScript(myscript, org.jruby.runtime.ThreadContext, org.jruby.runtime.builtin.IRubyObject, org.jruby.runtime.builtin.IRubyObject[], org.jruby.runtime.Block);
  public org.jruby.runtime.builtin.IRubyObject load(org.jruby.runtime.ThreadContext, org.jruby.runtime.builtin.IRubyObject, boolean);
  public static void main(java.lang.String[]);
} 
```

我们看到扩展类继承`org.jruby.ast.executable.AbstractScript`并定义了很多内部方法，所以很明显这段代码是供 JRuby 的 AST 使用的。

这就是`jrubyc`提供两个额外选项的原因：`--java`和`--javac`：第一个生成 Java 源代码，使用 将代码包装到 JRuby 脚本中`ScriptingContainer`，就像您通常使用原始脚本一样；第二种直接产生编译后的Java类。此代码使用特定的 Java 生成器代码，该代码使用指令，例如为`java_signature`Java 方法提供 Java 所期望的正确签名。再次使用`javap`时：

```
ubuntu@ubuntu:/tmp$ jrubyc --javac myscript.rb
ubuntu@ubuntu:/tmp$ javap MyScript
Compiled from "MyScript.java"
public class MyScript extends org.jruby.RubyObject {
  public static org.jruby.runtime.builtin.IRubyObject __allocate__(org.jruby.Ruby, org.jruby.RubyClass);
  public MyScript();
  public java.lang.Object run();
  static {};
} 
```

该类以大写 M 开头，并继承`RubyObject`. 类中定义的方法将公开以供 Java 使用。

[使用 JRuby：将 Ruby 引入 Java在第 4 章，](https://media.pragprog.com/titles/jruby/toc.pdf) *JRuby 编译器*中对这两种形式进行了很好的描述。

# c# - 多个 ProgressBar 的多线程更新

> ID：12432299
> 
> 赞同：2
> 
> 时间：2012-09-14T21:36:06.023
> 
> 标签：c#, multithreading, user-interface, progress-bar, invoke

我开发了一个可以处理数据的应用程序（在我的例子中，图像算法在视频上执行）。我开发了不同`ProcessingMethod`的s。

有时会并行处理多个视频。每个进程在单独的线程中运行。

我有一个带有几个`ProgressBar`s 的 GUI，一个用于处理数据的每个线程。

有什么好的更新方法`ProgressBar`？

目前，我的 GUI 正在创建所有处理线程，并`ProgressBar`为每个线程创建一个。然后我将这些`ProgressBar`s 传递给线程，线程将它们传递给`ProcessingMethod`. 然后`ProcessingMethod`将更新`ProgressBar`（使用`Invoke()`）。

我有不同`ProcessingMethod`的s。在每种方法中，我都有复制粘贴代码来更新`ProgressBar`. 虽然我是编程新手，但我知道复制粘贴不好。

有什么好办法让它变得更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:38:10.297

创建一个名为的方法，该方法`UpdateProgressBar`将进度条及其值作为参数，并用`Invoke`. 您将通过调用具有不同参数的单个函数来替换复制粘贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:30:20.083

查看 BackGroundWorker 组件。它旨在从 GUI 运行线程，并带有进度指示的安全回调。

# ios - Xcode 最佳音频实践

> ID：12432300
> 
> 赞同：1
> 
> 时间：2012-09-14T21:36:07.443
> 
> 标签：ios, xcode, audio, soundeffect

在我的应用程序中创建音频提示的最佳做法是什么，它将音频的不同部分附加在一起以提出问题？

前任。“什么是”+“富”？“什么是”+“酒吧”？

我使用使用 AudioServicesPlaySystemSound() 的音频工具箱开发了一个“AudioQueue”对象，它运行良好。通过警报系统播放此类音频有什么问题吗？如果是这样，我的选择是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:41:28.093

If you mean to use this is an Audio CAPTCHA I don't recommend it, since Audio has been hacked in the past.

[http://arstechnica.com/security/2012/05/google-recaptcha-brought-to-its-knees/](http://arstechnica.com/security/2012/05/google-recaptcha-brought-to-its-knees/)

However, for general use I don't see anything wrong with it, other than it being potentially annoying.

If you tell a little more about the circumstances, we could evaluate weather this is a reasonable implementation choice.

# javascript - 单击时触发事件，复选框 + 标签除外

> ID：12432301
> 
> 赞同：0
> 
> 时间：2012-09-14T21:36:22.487
> 
> 标签：javascript, jquery

我有一个表格行，单击时会触发一个事件。行内有（未显示）复选框+其样式标签。

我想要的是防止（我猜是 :not 或 .not() 但无法弄清楚）如果单击复选框/标签则执行。

**HTML：**

```
<center>
<table>
    <tr class='pend'>
        <td><input type="checkbox" id="bb"/> <label for="bb">X</label></td>
        <td>&nbsp;</td>
        <td>some text</td>
    </tr>
</table>
</center> 
```

**CSS：**

```
center {
margin-top:20px;
}

input[type=checkbox] + label {
    width:10px;
    height:10px;
    background-color:red;
}

input[type=checkbox] {
    display:none;
}

table tr {
height:40px;
    background-color:gray;
}

table td {
padding:5px;
} 
```

**JS：**

```
$('.pend').on('click',function(){
    $(this).append('text');
    return false;
}) 
```

JSFIDDLE：http: [//jsfiddle.net/ySuGB/2/](http://jsfiddle.net/ySuGB/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:42:34.870

您需要防止单击复选框/标签时事件冒泡。

见下文，

```
//                     V-- Is the TD containing the checkbox and the label.
$('.pend :checkbox').parent().on('click', function(event) {
    event.stopPropagation()
}); 
```

**演示：http:** [//jsfiddle.net/ySuGB/12/](http://jsfiddle.net/ySuGB/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:43:35.517

e.stopPropagation() 是您所需要的。

[http://jsfiddle.net/jNDYJ/](http://jsfiddle.net/jNDYJ/)

```
$('.pend input:checkbox').add('.pend label[for=bb]').click(function(e){
    e.stopPropagation();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:43:00.000

您可以检查事件目标是否为标签（等）：

```
$('.pend').on('click',function(e){
  if(e.target.tagName=='LABEL')
    return false;
  $(this).append('text');
  return false;
})​ 
```

[http://jsfiddle.net/ySuGB/9/](http://jsfiddle.net/ySuGB/9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T21:43:48.093

```
$('.pend').on('click',function(){
    var $this = $(this);
    $this.off('click');
    $this.find('td:eq(2)').append('text');
})​ 
```

# r - R：从位串中创建 True/False

> ID：12432318
> 
> 赞同：2
> 
> 时间：2012-09-14T21:37:47.363
> 
> 标签：r

在一个文件中，我有一个参数列表，其中设置了以下字符串，其中 0=false 和 1=true。我可以创建一些简单的脚本来分割字符中的字符串，然后为每个字符定义设置一个带有真/假的向量，但想知道在基本包或 CRAN 包中是否默认没有此类功能。

位串示例：00000000000000000000100000001000000000000000000000000000000000000001

字符串可能很长，我必须解析它们的负载，所以很高兴看看是否有一些函数可以以不错的速度做到这一点:-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T21:46:01.233

如果您可以确定所有字符都是 0 或 1，那么这应该很快：

```
x <- "00000000000000000000100000001000000000000000000000000000000000000001"
charToRaw(x) == charToRaw("1")
#  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
# [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE
# [25] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
# [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
# [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
# [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T21:43:43.010

```
as.logical(as.numeric(strsplit(x, "")[[1]])) 
```

例如：

```
> x = "00001111"
> as.logical(as.numeric(strsplit(x, "")[[1]]))
[1] FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE 
```

# java - JTabbedPane 选定组件始终为空

> ID：12432319
> 
> 赞同：3
> 
> 时间：2012-09-14T21:37:49.093
> 
> 标签：java, swing, bufferedimage, jtabbedpane

```
getTabbedPane().addTab("Ground", pnlGround);

public BufferedImage getSelectedImage() { 
    return ((SpritePane) getTabbedPane().getSelectedComponent()).getSelectedImage();
} 
```

`getTabbedPane().getSelectedComponent()`正在返回 null。在我选择 JTabbedPane 旁边的 JPanel 后直接调用它，这是我能想出该方法返回 null 组件的唯一原因；因为选项卡已打开但没有焦点。

然而，我要找到一种方法来获取 JTabbedPane 中打开的选项卡。

此外，`getTabbedPane().getComponentAt(i)`始终返回 null。有 6 个选项卡。

getSelectedIndex() 正在返回正确的索引，但如果我将它传入，它仍然说该组件为空。

PS SpritePane 只是 JPanel 的一个子类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:43:18.253

If you want to get the active/selected tab try

```
int idx = getTabbedPane().getSelectedIndex(); 
```

You can then get the component of the tab (e.g. a panel) with

```
Componennt c = getTabbedPane().getComponent(idx); 
```

# ios - pjsip发送短信如何

> ID：12432321
> 
> 赞同：7
> 
> 时间：2012-09-14T21:38:01.870
> 
> 标签：ios, c, sms, sip, pjsip

到目前为止，我正在尝试通过 pjsip 发送短信，但没有运气。

该帐户已在服务器上注册，并且我收到了注册成功响应，但我找不到任何展示如何发送短信的好教程。

我在网上找到了这本书，但它仍然没有给我任何关于如何使用这个库的例子： [http ://www.scribd.com/doc/90092246/Pjsip-Dev-Guide#outer_page_48](http://www.scribd.com/doc/90092246/Pjsip-Dev-Guide#outer_page_48)

我知道我应该使用：

```
pjsip_endpt_create_request(pjsip_endpoint *endpt, const pjsip_method method, const pj_str_t *target, const pj_str_t *from, const pj_str_t *to, , const pj_str_t *call_id, int cseq, const pj_str_t *text, pjsip_tx_data **p_tdata);

pjsip_endpt_acquire_transport(pjsip_endpoint *endpt, pjsip_transport_type_e type, const pj_sockaddr_t *remote, int addr_len, const pjsip_tpselector *sel, pjsip_transport **p_tp) 
```

但除了这些，我不知道。

注意：我不想要即时消息，如果可能的话，我希望将文本作为 SMS 传递。它需要在 pjsip 中完成，没有其他库（不幸的是没有灵活性）。

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T17:37:35.617

好的，我在这里再次回答我自己与 pjsip 相关的问题。我希望这个库有适当的文档，其中函数调用可以更好地解释它们的作用。

让我感到困惑的一件事是本开发人员指南中有：[http ://www.pjsip.org/release/0.5.4/PJSIP-Dev-Guide.pdf](http://www.pjsip.org/release/0.5.4/PJSIP-Dev-Guide.pdf)

有2个主题。1 是消息元素以及如何创建请求。另一个是即时通讯。我不确定 SMS 需要哪个。原来，它是即时通讯。

唯一需要的功能是：

```
pjsua_im_send(pjsua_acc_id acc_id, const pj_str_t *to, const pj_str_t *mime_type, const pj_str_t *content, const pjsua_msg_data *msg_data, void *user_data); 
```

**第一个**变量 acc_id 是在应用程序 SIP 注册开始时初始化的。

**第二个**变量是您希望将消息发送到的号码。我这样初始化它：

```
"sip:16476804556@sipserverdomain.com" 
```

**第三个**变量用于发送 MIME。我没有用这个。所以它是NULL。

**第四个**变量是消息体本身。

例如：

```
pj_str_t text;
const char *msgText = [@"Hello there!" UTF8String];

text = pj_str((char*)msgText); 
```

然后我将：传递`&text`给函数。

**第五个**变量是味精数据。再次，没有使用它。它是空的。

**第六个**变量是用户数据。这个也没用过。空值。

最后，这是函数调用的样子：

```
 pjsua_im_send(app._sip_acc_id, &to, NULL, &text, NULL, NULL); 
```

希望这可以帮助有类似问题的人！-c0d3Junk13

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T23:11:48.680

SMS 本质上是发送到 phonenumber@serviceprovider.com 的电子邮件。我没有使用过 pjsip，但是我可以使用[Chilkat](http://www.chilkatsoft.com/email-library.asp)库很容易地传递 SMS。例如发送电子邮件的代码，您可以在他们的网站上找到它。

# ios - UITableView 动态高度

> ID：12432338
> 
> 赞同：1
> 
> 时间：2012-09-14T21:39:32.510
> 
> 标签：ios, uitableview

我的 ViewController 中有一个 UITableView ，它的行有自定义内容。每个单元格的高度根据单元格的内容使用`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`方法动态计算。

但是如何设置 UITableView 的高度呢？因为如果我的表只包含一行，那么在行之后我会在我的表中看到一个大空格？是否有任何属性可以根据其内容动态增加或减少表格的高度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:41:08.130

将`contentSize`根据您拥有的行数和节数进行调整，如果您想更改表格视图的实际大小，您应该调整`frame`属性

如果只有几行时的白色背景困扰着你，你最好在桌子上放一个 backgroundView 或颜色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T04:24:08.123

试试 contentSize 方法，它继承自 UITableView 的超类 UIScrollView。但是，您可能会发现 contentSize 返回的值不正确或过时，因此您可能应该首先调用 layoutIfNeeded 来重新计算表格的布局。

```
[tableView layoutIfNeeded]; 
```

// 允许您在绘制周期发生之前执行布局。//-layoutIfNeeded 提前强制布局。所以它会正确返回大小。就像做梦之前做的一样。

```
CGSize tableSize=tableView.contentSize; 
```

# twitter-bootstrap - 语法错误，找不到要导入的文件或无法读取：compass_twitter_bootstrap

> ID：12432339
> 
> 赞同：1
> 
> 时间：2012-09-14T21:39:32.803
> 
> 标签：twitter-bootstrap, ruby-on-rails-2

我想使用 compass_twitter_bootstrap。这是我所做的：

1)

我的宝石文件：

```
gem 'compass'
gem 'compass-rails'
gem 'compass_twitter_bootstrap' 
```

2)

我的 compass.rb 在 config 文件夹下：

```
require 'compass_twitter_bootstrap'
project_type = :rails
http_path = "/"
css_dir = "public/stylesheets"
sass_dir = "public/stylesheets/sass" 
```

3)

我在 public/stylesheets/sass 下创建了一个 scss 文件，并添加了 @import "compass_twitter_bootstrap"; 在文件的顶部。

4)

我还将 stylesheet_link_tag 添加到我的 html.erb 文件中。

但是当我运行服务器时，我得到了这个错误：

```
语法错误，找不到要导入的文件或无法读取：compass_twitter_bootstrap

加载路径：my_project_directory/public/stylesheets/sass
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:17:53.187

这是 Rails 应用程序还是 Rails 插件？

如果它是 Rails 插件，[这个 Stackoverflow 问题](https://stackoverflow.com/questions/13630456/sass-import-directive-when-used-in-rails-engine-cant-find-assets-in-plugins/13631079#13631079)解释说它与 Dummy 应用程序在 Gemfile 中查找的内容有关。基本上，不要`group :assets`像在 Rails 应用程序中那样使用。不要`group __anything__`用于那件事。

不会加载组中的任何内容，因为 Bundler.require（test/dummy/config/application.rb 的第 5 行）不接受任何参数。将其与 Rails 应用程序中的相应代码行进行比较，该应用程序采用 Rails.env 组（即：production 或 :development 或 :test），有时还有 :assets。

`Bundler.require`当然，另一种选择是为您要包含的 Gemfile 中的每个组传递一个 arg 。如果这样做，请确保包含 :default。

在 11/29 当天晚些时候添加：

澄清一下，错误的真正原因是 @import 指令在 CSS 中的含义与在 Sass 中的含义不同。我上面的回答确实解决了当您希望将文件解析为 Sass 时为什么将文件解析为 CSS 的问题。要将其解析为 Sass，需要包含 sass-rails gem。除了上面的答案之外，这可能还有其他原因，所以即使您正在使用 Rails 应用程序并且问题不在于 Bundler 是否在 :assets 组中包含 gem，sass-rails 可能还有其他原因不包括在您期望的情况下。检查您的 Gemfile 以确保 sass-rails 在那里，如果它在一个组中，请尝试将其移出以查看是否会改变事情。

# php - 评估目的 | SQL转换？

> ID：12432341
> 
> 赞同：2
> 
> 时间：2012-09-14T21:39:38.717
> 
> 标签：php, mysql

我将我的 sql 查询存储为字符串，然后稍后在 PDO 中使用它们，如下所示。

有一行我不明白：

```
eval("\$query = \"$query\";"); 
```

从 docs..eval 应该运行一个字符串作为 PHP 代码。为什么我不能`$query`直接使用？运行一串 SQL 是什么意思？

此代码有效。我只是不知道`eval()`声明是为了什么。

请注意，这是安全`eval()`的，因为输入不是用户定义的。

```
 "arc_id" =>                 "SELECT id FROM credentials WHERE email=?",
    "arc_id_from_hash" =>       "SELECT id FROM credentials WHERE pass=?",
    "signin_pass" =>            "SELECT pass FROM credentials WHERE email=?",
    "signin_validate" =>        "SELECT id, hash FROM credentials WHERE email=? AND pass=?"
);
public function __construct()  
{
    $this->db_one = parent::get();
}
public function _pdoQuery($fetchType, $queryType, $parameterArray=0) // needs review
{
    $query=$this->sql_array[$queryType];

    // what?

    eval("\$query = \"$query\";");

    // if not input parameters, no need to prep

    if($parameterArray==0)
    {
        $pdoStatement = $this->db_one->query($query); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:47:48.613

该代码按名称查找查询，例如`arch_id`-> `'SELECT id ..'`，然后在`eval`.

推测查询*可能*包含将被插值的变量。例如，原始值可能是`'SELECT id WHERE food = "$taste"'`然后在 中被评估为双引号字符串文字`eval`并导致插值，`$taste`因此存储回的结果`$query`可能是`'SELECT id WHERE food = "yucky"'`。

鉴于数据，它似乎是以前开发人员留下的“太聪明”的垃圾。摆脱它。（如果将来需要类似的东西，虽然我建议严格使用占位符，但考虑非`eval`替代机制。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T21:53:29.400

```
eval("\$query = \"$query\";"); 
```

这是一个变量替换器/模板引擎。

它正在用`$query`它们的值替换内部的变量。

我建议不要为此使用，使用or`eval`可能会更好。`preg_replace``str_replace`

作为参考，这是我问的一个问题：[PHP eval $a="$a"?](https://stackoverflow.com/questions/5340442/php-eval-a-a)

# javascript - “边界半径”值的 Javascript/jQuery 正则表达式

> ID：12432345
> 
> 赞同：1
> 
> 时间：2012-09-14T21:40:26.860
> 
> 标签：javascript, jquery, regex, css

我正在使用 jQuery 角插件来`border-radius`支持跨浏览器。这是我的功能：

```
if(!Modernizr.borderradius){ 
    var s = document.styleSheets;
    for(var i = 0; i<s.length;i++){ 
        var r = s[i].rules || s[i].cssRules;
        for(var x=0;x<r.length;x++) {
            var t = r[x].cssText || r[x].style.cssText;
            if(t.search("radius")>0) $(r[x].selectorText).corner();
        }
    }
} 
```

基本上，我正在检索任何设置了边界半径的元素。

我需要一个更好的正则表达式，比如这个：

> 边界（-）？（顶部|底部）？（-）？（左|右）？-半径：（。+？）；

检测任何变化`border-radius`并检索其值。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:45:37.307

我想你正在寻找...

```
\bborder(?:-(?:top|bottom))?(?:-(?:left|right))?-radius\s*:\s*([^;"']*) 
```

# c# - 一起使用 StreamWriter 和 FileSystemWatcher

> ID：12432350
> 
> 赞同：-1
> 
> 时间：2012-09-14T21:41:25.253
> 
> 标签：c#, .net, vb.net, filesystemwatcher, streamwriter

我有一个程序使用`FileSystemWatcher`该类监视目录的更改。我有一些其他客户使用`StreamWriter`. “有时”，在 filesystemwatcher created 事件中，当我尝试访问文件时，出现错误。

这很难调试，因为它不会经常发生。客户端通过将流封闭在一个`Using`块中来正确关闭流。错误出现在“此应用程序无法使用该文件，因为它正在被另一个进程使用”的行上。我不太明白这一点，当客户端使用相同的代码将文件写入目录时，为什么错误只会偶尔出现。有时，手动复制会引发错误，而大多数时候它会通过。

有问题的目录不是网络目录，而是本地目录。请建议。

客户代码

```
using (StreamWriter ss = new StreamWriter(input)) {
    ss.WriteLine(args(0));
    ss.Close();
} 
```

监控应用程序事件代码

```
public void Temp()
{
FileSystemWatcher fs = new FileSystemWatcher();

fs.Path = GlobalStatics.PathWorkOrders;
fs.IncludeSubdirectories = false;
fs.Filter = "*.wo";
fs.EnableRaisingEvents = true;

fs.Created += CreatedEvent;
}

public void CreatedEvent(object sender, System.IO.FileSystemEventArgs e)
    {
        string guidStr = Path.GetFileNameWithoutExtension(e.FullPath);

        using (StreamReader sr = new StreamReader(e.FullPath))
        {
            //Processing
            sr.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:50:26.320

没有代码有点难，但我猜你看到的是竞争条件。这是我认为大多数时候发生的事情。

*   进程 A 正在使用 StreamWriter 更新文件，锁定文件。
*   进程 A 完成更新并关闭文件。
*   FileSystemWatcher 唤醒并处理文件。

    有时，由于您无法控制的时间问题，顺序会有些不同：

*   进程 A 正在使用 StreamWriter 更新文件，锁定文件。

*   FileSystemWatcher 唤醒并处理文件。
*   进程 A 完成更新并关闭文件。

    由于文件被锁定，您的观察者无法处理它。

    如果您遇到该异常，您应该稍后再试一次。

编辑：查看代码后，我的回答仍然有意义。

# regex - How to use regex function in R to identify elements and create output message if elements exist

> ID：12432351
> 
> 赞同：1
> 
> 时间：2012-09-14T21:41:24.833
> 
> 标签：regex, r

I am very new to R and not an experienced programmer so if my question sounds amateurish please forgive me. In short, I want to identify any characters other than integers in a vector and create an object with an output message "error" for any that are found.

Here is the code that I am working with:

```
##create dataframe
fireplaces <- data.frame(num.fireplaces <- c(0:5, "one", "two", "NA", "N/A", "zero", "none"), fireplace.exists <- c(TRUE, TRUE,TRUE, TRUE, TRUE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE))

##use grep function to identify unwanted character strings (in this case, any element that is not an integer)
fail <- grep("[^[:digit:]]", (num.fireplaces), value=TRUE)

##use gsub function to replace unwanted strings with messaging. **Problem** messaging is repeated with each character in the string
gsub("[^[:digit:]]", "Error", (num.fireplaces), ignore.case = FALSE, perl = FALSE, fixed = FALSE, useBytes = FALSE)

## This is the error message that I would like to show as output if non-integer elements are found in the vector "num.fireplaces"
"Error" 
```

I realize that I am all over the place with this and may be a little out of my league. I'm hoping someone can help me with this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:58:06.463

我建议使用`ifelse`and `grepl`：

```
ifelse(grepl("^[0-9]+",num.fireplaces),num.fireplaces,"Error")
[1] "0"     "1"     "2"     "3"     "4"     "5"     "Error" "Error" "Error" "Error" "Error" "Error" 
```

但是请注意，您原来的正则表达式没有按您预期的方式工作，所以我用一个更简单的例子代替。

# sql - Proper syntax for exec of SQL Server stored procedure from within Excel 2007

> ID：12432355
> 
> 赞同：0
> 
> 时间：2012-09-14T21:41:40.253
> 
> 标签：sql, sql-server, excel, stored-procedures

Let's skip to the command text box on the definitions tab of the connection properties.... my command type is SQL.

I can execute `spDuplicatesAnalysis` from within SSMS. I have tried a numbee things with no luck, including ...

```
exec spDuplicatesAnalysis
dbo.spDuplicatesAnalysis 
```

So how should the actual command txt read ?

Thx!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T21:42:20.523

**Calling stored procedures from Excel VBA**

1.  Open a new Excel workbook
2.  Name one of the tabs "Data" (or change the code below)
3.  Open the VB Editor (Alt+F11)
4.  Add a new module
5.  Set a reference to Microsoft ActiveX Data Objects (choose highest version number available) ![Setting Reference to Microsoft ActiveX Data Objects](../Images/4be3e9500b0edd36cb6c67b49ff91426.png)
6.  Add the following code to your module

    ```
    Sub ExecStoredProcedureFromExcelVBA()

    Dim cn As ADODB.Connection
    Dim rs As ADODB.Recordset
    Dim connectString As String
    Dim custState As String
    Dim tgt As Worksheet

    Set tgt = ThisWorkbook.Sheets("Data")
    custState = "TX"

    ' Clear the target worksheet
    tgt.UsedRange.Clear

    ' Set the connection string
            connectString = "Provider=SQLOLEDB;Data Source=.;" & _
                 " Initial Catalog=Sandbox;Integrated Security = SSPI"

    ' Create the adodb objects
    Set cn = New ADODB.Connection
    Set rs = New ADODB.Recordset

    ' Open the connection and execute the stored procedure
    cn.Open connectString
    cn.spGetCustomersForState custState, rs

    ' Check for results
    If rs.state = 1 Then
        If Not rs.EOF Then
            ' Write the contents of the recordset to our target
            tgt.Range("a1").CopyFromRecordset rs
        rs.Close
        End If
    End If

    ' Clean up after ourselves
    If CBool(cn.state And adStateOpen) Then cn.Close
    Set cn = Nothing
    Set rs = Nothing

    End Sub 
    ```

7.  Modify the module to reference the database, stored procedure, and parameters you want to work with

8.  Run the code

# linux - UNIX - need help in grep command

> ID：12432356
> 
> 赞同：1
> 
> 时间：2012-09-14T21:41:44.493
> 
> 标签：linux, unix, grep

I am trying to change the copyrights in a repository, i mean change the old copyrights to new copyrights for example copyrights 2008 to copyrights 2012,

so what i want to do is to find,

1.  How many files have 2 copyrights
2.  How many files do not have any copyrights in them
3.  How many files have single, old copyrights in them

I was able to achieve questions 2 by using `grep -vir copyright *`, and question 3 by using `grep -rni copyright *`

how do I list out all the files with 2 copyrights in them?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:58:35.597

想必3、4或更多的版权和2一样麻烦？

您可以使用`grep`计数，然后再次过滤掉 1 的计数：

```
grep -irc copyright * | grep -v '^ *1 ' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:45:25.020

Use [uniq](http://linux.die.net/man/1/uniq) with the `-c` flag. i.e. `grep copyright * | uniq -c | egrep -v '^1'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:02:26.900

用于`xargs`获取所有文件的版权行数：

```
ls * | xargs -I % sh -c "echo %; grep -c 'copyright' %" 
```

# sql-server-2008 - SQL Server 2008 中的数学：舍入和截断

> ID：12432357
> 
> 赞同：0
> 
> 时间：2012-09-14T21:41:48.907
> 
> 标签：sql-server-2008

我正在寻找 SQL Server 2008 中的基本 SQL 查询

```
number   Result 
-----    ------
 0.38     0        (As it is less than 0.5)
 2.66     3        (As it is more than 2.5)
 3.8      4        (As it is more than 3.5)
 11.97    12       (As it is more than 11.50) 
```

我不知道如何使用 trunc、floor 和其他此类方法修复它

任何帮助都会有所帮助。

谢谢 ！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:52:17.427

我想你想要类似的东西：

```
SELECT number, ROUND(number,0) as Result FROM Table_name 
```

检查此[SQL ROUND()](http://www.w3schools.com/sql/sql_func_round.asp)函数和[此](http://msdn.microsoft.com/en-us/library/ms175003.aspx)以获取更多信息。

# pdf - PDF doc in Iframe not displaying in IE9 - IE9 asks to open or save only

> ID：12432358
> 
> 赞同：2
> 
> 时间：2012-09-14T21:41:57.897
> 
> 标签：pdf, iframe, internet-explorer-9

I have a pdf file that is called inside an iframe. I call the full absolute path of the pdf in the iframe. It displays correctly in all browsers. Except in IE9\. IE 9 just asks if you want to open or save the PDF. Then after you open or save it, a blank white space appears inside iframe.

Please help if you have any suggestions.

Thank you

# mono - 使用 CFB-8 模式的 Mono.Security.Cryptography RijndaelManaged 类问题

> ID：12432365
> 
> 赞同：2
> 
> 时间：2012-09-14T21:42:52.730
> 
> 标签：mono, monodevelop

我写信是为了报告密码学问题。使用. `RijndaelManaged`_ `System.Security.Cryptography`对我来说，使用`RijndaelManaged`( `CFB-8`FeedbackSize = 8) 模式而不使用填充 ( `PaddingMode.None`) 很重要。此类设置配置使加密数据大小等于解密数据大小。

不幸的是，Mono (Mono Compiler for MVS2010 IDE v2.0.8152) 编译的代码在数据加密时抛出异常并显示消息：

```
[Unhandled Exception: System.Security.Cryptography.CryptographicException: invalid block length at Mono.Security.Cryptography.SymmetricTransform.FinalEncrypt]. 
```

我使用原生 Visual Studio 2010 编译器在 Windows XP 和 Windows 7 下使用 .NET framework 4.0 进行了测试。我发现本**机 Microsoft .NET 编译器不会抛出任何异常**，并且代码示例运行良好。

下面我粘贴了两个示例（复制代码），一个用于引发异常的 Mono，另一个用于本机 C# 编译器，在这种情况下没有异常。此外，我还粘贴了在线编译器的链接来测试代码。

**为什么 Mono 编译器会抛出此异常？**

* * *

Mono 代码示例（用于测试的在线编译器，在线[编译](http://www.compileonline.com/compile_csharp_online.php)）

```
using System;
using System.IO;
using System.Text;
using System.Security.Cryptography;

namespace Dela.Mono.Examples
{
   public class HelloWorld
   {
      public static void Main(string[] args)
      {
         string plainText = "This will be encrypted.";
            string plainText2 = "";

            RijndaelManaged aesAlg = new RijndaelManaged();

            aesAlg.BlockSize = 128;
            aesAlg.KeySize = 256;
            aesAlg.Mode = CipherMode.CFB;
            aesAlg.FeedbackSize = 8;
            aesAlg.Padding = PaddingMode.None;

            aesAlg.GenerateKey();
            aesAlg.GenerateIV();

            ICryptoTransform encryptor = aesAlg.CreateEncryptor();

            MemoryStream msEncrypt = new MemoryStream();
            using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write)) {
                using (StreamWriter swEncrypt = new StreamWriter(csEncrypt)) {
                    swEncrypt.Write(plainText);
                }
            }

            Console.WriteLine(msEncrypt.ToArray().Length); 
            Console.WriteLine(System.Text.Encoding.UTF8.GetString(msEncrypt.ToArray()));

            byte[] customArray = msEncrypt.ToArray();

            ICryptoTransform decryptor = aesAlg.CreateDecryptor();

            MemoryStream msDecrypt = new MemoryStream(customArray);
            using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read)) {
                using (StreamReader swDecrypt = new StreamReader(csDecrypt)) {
                    plainText2 = swDecrypt.ReadToEnd();
                }
            }

            Console.WriteLine(plainText2.Length); 
            Console.WriteLine(plainText2);

      }
   } 
} 
```

* * *

本机 C# 代码示例（用于测试的在线编译器，在线[编译](http://rextester.com/runcode)）

```
// Rextester.Program.Main is the entry point for your code. Don't change it.

using System;
using System.IO;
using System.Text;
using System.Security.Cryptography;

namespace Rextester
{
    public class Program
    {
        public static void Main(string[] args)
        {
            string plainText = "This will be encrypted.";
            string plainText2 = "";

            RijndaelManaged aesAlg = new RijndaelManaged();

            aesAlg.BlockSize = 128;
            aesAlg.KeySize = 256;
            aesAlg.Mode = CipherMode.CFB;
            aesAlg.FeedbackSize = 8;
            aesAlg.Padding = PaddingMode.None;

            aesAlg.GenerateKey();
            aesAlg.GenerateIV();

            ICryptoTransform encryptor = aesAlg.CreateEncryptor();

            MemoryStream msEncrypt = new MemoryStream();
            using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write)) {
                using (StreamWriter swEncrypt = new StreamWriter(csEncrypt)) {
                    swEncrypt.Write(plainText);
                }
            }

            Console.WriteLine(msEncrypt.ToArray().Length); 
            Console.WriteLine(System.Text.Encoding.UTF8.GetString(msEncrypt.ToArray()));

            byte[] customArray = msEncrypt.ToArray();

            ICryptoTransform decryptor = aesAlg.CreateDecryptor();

            MemoryStream msDecrypt = new MemoryStream(customArray);
            using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read)) {
                using (StreamReader swDecrypt = new StreamReader(csDecrypt)) {
                    plainText2 = swDecrypt.ReadToEnd();
                }
            }

            Console.WriteLine(plainText2.Length); 
            Console.WriteLine(plainText2);
        }
    }
} 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:06:04.073

该错误已修复。可以从单 GIT 存储库中获取源代码。

主：e094d3dc0cf186f1de32d5340d847dc18aeca0e2

单声道 2-10：98e4842eb19dfd60000ada19e9bfb265fad7c84b

# android - Open Graph action after scanning QR code with mobile phone won't get accepted

> ID：12432373
> 
> 赞同：3
> 
> 时间：2012-09-14T21:43:43.463
> 
> 标签：android, facebook, facebook-graph-api, mobile

We have built a mobile app that allows the user to do something on our website by scanning a QR code. In order to do this, the user has to perform the physical act of scanning the QR code shown on our website with his mobile phone using our mobile app. The user of our mobile app has connected it to his Facebook account.

We have created an Open Graph action that is called after the user scans the QR code, so that he can show off to his friends that he just did something on our website. We have submitted this Open Graph action several times to Facebook. Sometimes it would be denied ("Changes needed") suggesting that we are calling the Open Graph action automatically through our application, without having the user do something, which is not true. At other times our application would just sit there (once for over a week), so we would cancel it and resubmit. At each time we resubmitted, we worked on the description of the application, so that it would be more clear to the person who would review it.

Unfortunately, it got rejected again.

Now we have resubmitted the application, including a link to a video: [http://www.youtube.com/watch?v=zOUjtqp9W20](http://www.youtube.com/watch?v=zOUjtqp9W20)

We don't know how to make it even clearer. I hope that someone from Facebook could help us out here or at least explain why our application gets rejected all the time. We're not doing anything automatically. The Open Graph action will be called ONLY when the user performs a physical act of scanning the QR code.

App ID: 391528964237936 Open Graph action ID: 413103948747104

I would appreciate any help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:11:36.850

> 我们不会自动做任何事情。

也可能是这样，但是……</p>

> 仅当用户执行扫描 QR 码的物理行为时，才会调用 Open Graph 操作。

*……这是用户期望*的一种行为吗？

我怀疑，如果它对用户来说足够清楚，*仅仅*扫描二维码就已经触发在 Facebook 上发布一个动作。

仅扫描二维码的行为是否可以被视为同意在 Facebook 上发布内容？扫描是否*明确表达*了用户分享某些东西的意愿？

我对此表示怀疑。我不认为我自己会对这种情况感到高兴。

在首先获得用户的明确同意后*可能*就可以了——这是一个非常明确且绝不会被误解的选择加入该功能。但我在你的视频中没有看到类似的东西；它只是说需要扫描代码才能登录到您的应用程序 - 没有提到任何内容已经通过这样做发布。

* * *

对我来说，这似乎是用户期望的普遍问题。

单击链接/按钮是触发操作的“通常”方式。但是那些往往有一个上下文，它描述了如果我点击会发生什么。我在您的二维码中看不到任何此类上下文。

然后，此外，通常会提供二维码来传递信息——我看到一些有趣的东西，可能是广告，然后扫描二维码以获取有关产品/促销/活动的更详细信息。我*永远不会*期望仅这一点就让我*参与*了任何事情。

恕我直言，触发动作的二维码不是好的应用行为。它“违反”了我的用户期望，因此我发现拒绝你的行为是可以理解的。

# android - Activity launching on initial open after install

> ID：12432374
> 
> 赞同：1
> 
> 时间：2012-09-14T21:43:45.960
> 
> 标签：android, android-activity, manifest, launcher

Ok so first off, the issue is when i install my app and open it, it is starting a activity without being declared in my manifest as here below.

```
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" /> 
```

I know that this above declare the a activity to be the activity ran when the app is launched, therefore should be the only one. Well i have some source code that i didn't originally write, Its for a launcher replacement app, therefore inside the source code i cant figure out how it is being launcher when its not declared in the manifest for this activity to be ran from the intial start, Its declare, but there isnt even a intent filter for it.

Is there some sort of java code you can declare a activity to be ran when the app is launched for the first time??? thats mainly my question.

Here The source im working with

classic.java

```
import java.util.Locale;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.ComponentName;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.DialogInterface.OnClickListener;
import android.content.DialogInterface.OnKeyListener;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.KeyEvent;
import android.widget.Toast;

   public class classic extends Activity {
/** Called when the activity is first created. */

private static String mPackageName = Constants.PACKAGE_LAUNCHER;
private ComponentName mCn = null;
private Activity currentActivity = null;
private boolean mApplyTheme = false;
private AlertDialog mConfirmDialog = null;
private ProgressDialog mProgressDialog = null;

private final String GOLAUNCHER_PKG_NAME = "com.gau.go.launcherex";
AttachInfo mAi = null;

class CustomAlertDialog extends AlertDialog {
    public CustomAlertDialog(Context context) {
        super(context);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        boolean ret = super.onKeyDown(keyCode, event);
        finish();
        return ret;
    }
}

@Override
 public void onCreate(Bundle savedInstanceState) 
  {
    super.onCreate(savedInstanceState);
 }

private Handler mHandler  = new Handler() 
{   
      public void handleMessage(Message msg) 
      {   
           super.handleMessage(msg);  

           AlertDialog.Builder localBuilder2 = new AlertDialog.Builder(
                    classic.this);
            localBuilder2.setTitle("Go Launcher EX not Found");
            localBuilder2
            .setMessage("Do you want to vist the Go Launcher EX on Google Play?");
            localBuilder2.setIcon(R.drawable.golauncherex);
            localBuilder2.setPositiveButton("Yes",
                    new DialogInterface.OnClickListener() {
                public void onClick(
                        DialogInterface  paramDialogInterface,
                        int paramInt) {
                    Intent localIntent = new Intent(
                            "android.intent.action.VIEW").setData(Uri
                                    .parse("market://details?id=com.gau.go.launcherex"));
                    classic.this.startActivity(localIntent);
                }
            });
            localBuilder2.setNegativeButton("No",
                    new DialogInterface.OnClickListener() {
                public void onClick(
                        DialogInterface paramDialogInterface,
                        int paramInt) {
                }
            });
            localBuilder2.show();

      }
};

  @Override
  protected void onResume() {
    super.onResume();
    currentActivity = this;
    ThemeUtils.sendInactiveApplyThemeFlagBroadcast(this);

    if (isExistGO(GOLAUNCHER_PKG_NAME)) 
    {
        final Result result = new Result();
        displayStartGoLauncherDialog(result);
        setVisible(false);
        return;
    }

   setVisible(false);
   mAi = MergeUtil.getAttachInfo(this);

    // åˆ¤æ–­é™„åŠ çš„æ˜¯åœ°å�€è¿˜æ˜¯apk
    if(mAi != null && mAi.IsAttachApk())
    {
        // å�¯åŠ¨å�ˆå¹¶
        MergeUtil.DoMergeFileTask(mHandler, this);
        setVisible(false);
        return;
    }

    AlertDialog.Builder localBuilder2 = new AlertDialog.Builder(
            classic.this);
    localBuilder2.setTitle("Go Launcher EX not Found");
    localBuilder2
    .setMessage("Do you want to vist the Go Launcher EX on Google Play?");
    localBuilder2.setIcon(R.drawable.golauncherex);
    localBuilder2.setPositiveButton("Yes",
            new DialogInterface.OnClickListener() {
        public void onClick(
                DialogInterface paramDialogInterface,
                int paramInt) {
            Intent localIntent = new Intent(
                    "android.intent.action.VIEW").setData(Uri
                             .parse("market://details?id=com.gau.go.launcherex"));
            classic.this.startActivity(localIntent);
        }
    });
    localBuilder2.setNegativeButton("No",
            new DialogInterface.OnClickListener() {
        public void onClick(
                DialogInterface paramDialogInterface,
                int paramInt) {
        }
    });
    localBuilder2.show();

  }

  private boolean isExistGO(String packageName) {

    Result result = GoLauncherUtils.isGoLauncherExist(this);
    mPackageName = result.packageName == null ? Constants.PACKAGE_LAUNCHER
            : result.packageName;
    mCn = result.componentName;
    return result.isExist;

    }

private void startGOLauncher(String packageName) throws Throwable {
    GoLauncherUtils.startGoLauncher(this, packageName, mCn);
}

private void displayStartGoLauncherDialog(final Result result) {

       String dialogtitle = null;
       String dialogmsg = null;
       String dialogok = null;
       String dialogcancel = null;

        String language = Locale.getDefault().getLanguage(); // zh
        if(language.equals("zh"))
        {
            dialogtitle = "ä¿¡æ�¯";
            dialogmsg = "ç‚¹å‡»ç¡®å®šç«‹åˆ»å�¯ç”¨æ¡Œé�¢æ”¯æŒ�è½¯ä»¶";
            dialogok = "ç¡®å®š";
            dialogcancel = "å�–æ¶ˆ";
        }
        else
        {
            dialogtitle = "Go Launcher EX";
            dialogmsg = "Press OK button to launch GO Launcher EX";
            dialogok = "OK";
            dialogcancel = "Cancel";
        }

    mConfirmDialog = new AlertDialog.Builder(this)
            .setTitle(dialogtitle)
            .setMessage(dialogmsg)
            .setPositiveButton(dialogok, new OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int   which) {
                    // NotificationActivity.this.finish();
                    startGoLauncher(
                            result.packageName ==   null      ? Constants.PACKAGE_LAUNCHER
                                    :  result.packageName,
                            result.componentName);
                }
            })
            .setNegativeButton(dialogcancel,
                    new OnClickListener() {

                        @Override
                        public void  onClick(DialogInterface dialog,
                                int which) {
                            classic.this.finish();
                        }
                    }).setOnKeyListener(new OnKeyListener() {

                @Override
                public boolean onKey(DialogInterface dialog, int  keyCode,
                        KeyEvent event) {
                    if (keyCode == KeyEvent.KEYCODE_BACK) {
                        classic.this.finish();
                    }
                    return false;
                }
            }).show();
}

  private void startGoLauncher(final String packageName,
        final ComponentName componentName) {
    mApplyTheme = true;
    new AsyncTask<Void, Void, Boolean>() {

        @Override
        protected void onPreExecute() {
            String msg = null;

            String language = Locale.getDefault().getLanguage(); // zh
            if(language.equals("zh"))
            {
                msg = "GOæ¡Œé�¢EXå�¯ç”¨ä¸­ï¼Œè¯·ç¨�å�Ž";
            }
            else
            {
                msg = "Applying The Galaxy S3 Theme, Please Wait";
            }

            mProgressDialog = ProgressDialog.show(
                    classic.this,
                    null,
                    msg, 
                    true);
        }

        @Override
        protected Boolean doInBackground(Void... v) {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            classic.this.finish();
            try {
                GoLauncherUtils.startGoLauncher(classic.this,
                        packageName, componentName);
            } catch (Throwable e) {
                return false;
            }
            return true;
        }

        protected void onPostExecute(Boolean success) {
            if (mProgressDialog != null) {
                mProgressDialog.dismiss();
            }
            if (!success) {

                String msg = null;

                String language = Locale.getDefault().getLanguage();     
 // zh
                if(language.equals("zh"))
                {
                    msg = "GOæ¡Œé�¢å�¯ç”¨å¤±è´¥ï¼Œè¯·é‡�æ–°å®‰è£…GOæ¡Œé�¢";
                }
                else
                {
                    msg = "Start GO Launcher EX failed, please reinstall GO Launcher EX";
                }

                Toast.makeText(
                        classic.this,
                        msg, 
                        Toast.LENGTH_LONG).show();
            }
        };
    }.execute();
}

@Override
protected void onStop() {
    super.onStop();
    if (mApplyTheme) {
        mApplyTheme = false;
        ThemeUtils.sendApplyThemeBroadcast(this);
    }
}

@Override
protected void onDestroy() {
    if (mProgressDialog != null) {
        mProgressDialog.dismiss();
        mProgressDialog = null;
    }
    if (mConfirmDialog != null) {
        mConfirmDialog.dismiss();
        mConfirmDialog = null;
    }
    super.onDestroy();
}

 } 
```

GoLauncherUtils.java

```
import java.util.List;

import android.app.ActivityManager;
import android.app.ActivityManager.RunningServiceInfo;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;

public class GoLauncherUtils {

public static final String NAME_GOLAUNCHER = "go_launcher";
public static final String KEY_UNINSTALLED = "uninstalled";

  public static void startGoLauncher(Context context, String packageName,
        ComponentName componentName) throws Throwable {
PackageManager packageMgr = context.getPackageManager();
    Intent launchIntent = packageMgr.getLaunchIntentForPackage(packageName);
    if (launchIntent != null) {
        try {
            context.startActivity(launchIntent);
        } catch (Throwable t1) {
            t1.printStackTrace();
            if (componentName != null) {
                Intent intent = new Intent(Intent.ACTION_MAIN);
                //intent.addCategory(Intent.CATEGORY_LAUNCHER);
                intent.setComponent(componentName);
                try {
                    context.startActivity(intent);
                } catch (Throwable t2) {
                    t2.printStackTrace();
                    throw t2;
            }
            } else {
            throw t1;
        }
    }
    } else {
        if (componentName != null) {
            Intent intent = new Intent(Intent.ACTION_MAIN);
            //intent.addCategory(Intent.CATEGORY_LAUNCHER);
            intent.setComponent(componentName);
            try {
                context.startActivity(intent);
            } catch (Throwable t) {
                t.printStackTrace();
                throw t;
            }
        }
    }
  }

public static void downloadGoLauncher(Context context , final String aUrl) {

    Intent intent = new Intent();
intent.setClass(context, GoDownloadService.class);
    String fileName = "GO Launcher EX";         
    intent.putExtra("downloadFileName", fileName);
    intent.putExtra(Constants.DOWNLOAD_URL_KEY, aUrl);
    context.startService(intent);
}

public static Result isGoLauncherExist(Context context) {
    Result result = new Result();
    PackageManager pm = context.getPackageManager();

    // Launcher
    Intent intent = new Intent("android.intent.action.MAIN");
    intent.addCategory("android.intent.category.HOME");
    intent.addCategory("android.intent.category.DEFAULT");
    List<ResolveInfo> infos = pm.queryIntentActivities(intent, 0);

int launcherSz = infos.size();
    for (int i = 0; i < launcherSz; i++) {
        ResolveInfo info = infos.get(i);
        if (null == info || null == info.activityInfo
            || null == info.activityInfo.packageName) {
            continue;
        }
        String packageStr = info.activityInfo.packageName;
        if (packageStr.contains(Constants.PACKAGE_LAUNCHER)) {
            result.packageName = packageStr;
            result.componentName = new ComponentName(packageStr,
                    info.activityInfo.name);
            result.isExist = true;
            return result;
        }
    }
    return result;
}

public static boolean isGoLauncherRunning(Context context) {
    ActivityManager am = (ActivityManager) context
            .getSystemService(Context.ACTIVITY_SERVICE);
    // List<RunningAppProcessInfo> infos = am.getRunningAppProcesses();
    // for (RunningAppProcessInfo info : infos) {
    // System.out.println("---------------running process: "
    // + info.processName);
    //
    // if
    // ("com.gau.go.launcherex".equals(info.importanceReasonComponent.getPackageName()))
    // {
    // goLauncherRunning = true;
    // break;
    // }
    // }

    List<RunningServiceInfo> infos = am.getRunningServices(500);
    for (RunningServiceInfo info : infos) {
        if (Constants.PACKAGE_LAUNCHER
                .equals(info.service.getPackageName())) {
            return true;
        }
    }
    return false;
}

public static boolean isGoLauncherUninstalled(Context context) {
    SharedPreferences sp = context.getSharedPreferences(NAME_GOLAUNCHER,
            Context.MODE_PRIVATE);
    return sp.getBoolean(KEY_UNINSTALLED, false);
}

public static void setGoLauncherUninstalled(Context context,
        boolean uninstalled) {
    SharedPreferences sp = context.getSharedPreferences(NAME_GOLAUNCHER,
            Context.MODE_PRIVATE);
    Editor editor = sp.edit();
    editor.putBoolean(KEY_UNINSTALLED, uninstalled);
    editor.commit();
}

 } 
```

All i need help with is just disabling anything starting onstartup of the application, i only need this to be used when i send a intent over to it from a button click from another activity. please any help with find where i can disable this from the intial startup would be awesome.

# windows - 如何解决 TPrintDialog 不保存设置？

> ID：12432378
> 
> 赞同：1
> 
> 时间：2012-09-14T21:44:12.840
> 
> 标签：windows, delphi, delphi-2010

我在应用程序中使用 TPrintDialog，在打印之前，我用对话框提示用户，用户更改她/他想要的任何设置，然后单击`OK`。

问题是，当应用程序关闭并重新启动时，页面大小与之前选择的（Letter）不同但设置为 A4 - 这是 Windows 问题吗？这发生在 Windows XP SP3（32 位）上，在 Windows 7 Ultimate（64 位）上发生相反的情况，默认情况下，页面大小“Letter”被选中，如果用户选择 A4 并关闭应用程序，重新启动，“Letter”被选中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T00:02:29.427

操作系统不会为应用程序保留打印机设置，它只保留默认设置。同样，VCL 在这方面没有表现出任何努力。应用程序启动后第一次需要打印机时，它会检索该特定打印机的默认设置。因此，您需要实现保存和应用设置的方式。

这是一些简单的代码，可以在显示打印对话框之前将纸张类型设置为“Letter”：

```
var
  Device: array[0..540] of Char;
  Driver, Port: array[0..1] of Char;
  DevMode: THandle;
  PDevMode: PDeviceMode;
begin
  Printer.GetPrinter(Device, Driver, Port, DevMode);
  PDevMode := GlobalLock(DevMode);
  PDevMode.dmPaperSize := DMPAPER_LETTER;
  Printer.SetPrinter(Device, Driver, Port, DevMode);
  GlobalUnlock(DevMode);

  PrintDialog1.Execute();
end; 
```

同样，您可以从 DeviceMode 结构中获取纸张类型或其他设置，并将它们保存到注册表 fi，同时关闭应用程序以供以后使用。

# user-interface - 让 UI 表单在 GAS 中的 HTML 表中呈现

> ID：12432380
> 
> 赞同：0
> 
> 时间：2012-09-14T21:44:22.387
> 
> 标签：user-interface, google-apps-script, google-sites

在 Google 协作平台中，我试图添加一个由文本框和提交按钮组成的简短表单，作为 html 表格内的一行中的一个单元格。表格中每一行的表格副本。我正在尝试为每个表行收集输入数据。

HTML 文件：

```
<html>
  ...
  function showForm(){ // https://developers.google.com/apps-script/gui_builder#including
    var app=UiApp.createApplication();
    app.add(app.loadComponent("myGui"));
    return app;
  }
  ...
  <table><tr><td><?=showForm()?></td></tr></table>
  ...
</html> 
```

然后，我使用 HtmlService.createTemplateFromFile() 方法从我的 .gs 文件中的 doGet() 函数调用 .html 文件。

表格正确呈现，除了我希望表单出现的地方，我得到的是文本/字符串“UiApplication”而不是文本框+提交按钮组合。

我在正确的轨道上吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:39:37.107

这是错误的轨道。

您不能混合和匹配来自**HtmlService**和**UiApp**的组件。GUI Builder 是一个打包的**UiApp**组件。

只需坚持使用 FlexTable 并使用您的构建器组件填充表格单元格。但不要忘记设置前缀：

```
var flextab = app.createFlexTable();
for (row=0; ...)
  for (col=0; ...)
    flextab.setWidget(row, col, app.loadComponent("myGui", {"prefix": "row"+row+"col"+col}); 
```

顺便说一句 - 您的网络应用程序中只能有一个**UiInstance**。只调用`UiApp.createApplication()`一次。如果您以后需要**UiInstance**，您可以随时使用`UiApp.getActiveApplication()`.

# php - Flex PHP data service types are not casting

> ID：12432381
> 
> 赞同：1
> 
> 时间：2012-09-14T21:44:22.830
> 
> 标签：php, apache-flex, class, casting, dataservice

I'm having an issue with returning native PHP classes from Flex 4.6 data services.

When I return a PHP class(CustomerDataResponse) with an array of another PHP class(CustomerData), I cannot cast the CustomerData classes in PHP. The Data Servive wizards detect the classes correctly, and testing the service works fine, but the customers array seems to be filled with an array of Objects when I hit it in the debugger, not an array of CustomerData.

If I change the PHP to return stdClass() with the same members and re-run the data wizard, I have to give names to the classes, but the casting works correctly.

Also, the casting of cr.lastResult works fine, only cr.customers.getItemAt(0) seems to be an object and NOT a custoemrdata. I've also confirmed that yes, getITemAt(0) is not null.

Any suggestions? I can use stdClass, but the PHP classes are much nicer to work with.

PHP Classes (trimmed for brevity)

CustomerData.php

```
class CustomerData {
    public $name;
    public $phoneNumber;

    function __construct(){
        //initialize some values
    }
} 
```

CustomerDataResponse.php:

```
require_once 'CustomerData.php';
class CustomerDataResponse {

    public $message;
    public $status;
    public $customers;

    function __construct() {
        $this->message = "";
        $this->customers = array(); //Array of CustomerData types
    }
} 
```

CustomerService.php

```
require_once("Models/CustomerDataResponse.php");

class CustomerInfoService {
    private $customerDataResponse;

    public function __construct() {
        $this->customerDataResponse = new CustomerDataResponse();
    }

    public function getCustomerData(){ //Called from Flex App
        $this->customerDataResponse->customers[] = new CustomerData();
        return $this->customerDataResponse;
    } 
```

FlexApp:

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               initialize="initializeHandler(event)">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;
            import mx.rpc.CallResponder;
            import mx.rpc.events.ResultEvent;

            import services.customerinfoservice.CustomerInfoService;

            import valueObjects.CustomerData;
            import valueObjects.CustomerResponseData;

            private var cr:CallResponder = new CallResponder();
            private var service:CustomerInfoService = new CustomerInfoService()

            protected function initializeHandler(event:FlexEvent):void{
                cr.addEventListener(ResultEvent.RESULT,handleResult);
                cr.token = service.getCustomerData();
            }

            protected function handleResult(event:ResultEvent):void{
                var crd:CustomerResponseData = cr.lastResult as CustomerResponseData; //This works fine
                var cd:CustomerData = crd.customers.getItemAt(0) as CustomerData; //This leaves cd NULL

                trace(cd.name); //Dies here: Cannot access a property or method of a null object reference
            }

        ]]>
    </fx:Script>
</s:Application> 
```

# javascript - regex solution needed to debug strange behavior of jquery ajax calls

> ID：12432382
> 
> 赞同：1
> 
> 时间：2012-09-14T21:44:28.550
> 
> 标签：javascript, jquery, ajax, regex, replace

I am using jquery ajax calls, to send text to the server.

The text (user input), that is sendt to the server, may contain questionmarks. If there is just one questionmark "?" its no problem, but if there are two questionmarks "??" side by side, then the ajax call stops working propperly.

text example:

> Is this a text example?? yes it is...

will produce:

> Is this a text examplejQuery17205792287601360849_1347644361296 yes it is...

I think the root of this problem is the caching of the ajax call:

> cache Default: true, false for dataType 'script' and 'jsonp'
> 
> If set to false, it will force requested pages not to be cached by the browser. Setting cache to false also appends a query string parameter, "_=[TIMESTAMP]", to the URL.

Anyhow two ?? side by side in a text string sendt by an jquery ajax call with json makes the query string parameter to show up in the original text instead of the two ??

Now what is the best solution for this?

Can anyone help me write a str.replace function with regex that ensures that there are not two ?? side by side in the textstring...?

Thx!

```
// text will be stored in the database via ajax call
$.ajax ({
    type: "POST",
    url: "ajax/ajax_special_functions.php",
    data: data_string,
    dataType: "json",
    success: function(recive_obj) {

        // Some more code...
    }
}); 
```

The text is contained in data_string... If there are two ?? in the text, the ajax call is still fired und the data is transmitted to the server, but the callback function will never get fired...

Update: **I have solved this problem temporarely with a regex str replace - If someone discouvers a more clean way to solve this problem, please let me know.**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:50:53.977

```
if( /^(?=.*\?\?).+/.test(textstring) ) {
    // process the string or throw exception ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:51:16.940

我会接受 Kevin B 的建议，但如果你真的想要一个，这里是正则表达式：

```
str = str.replace(/\?+/g, '?'); 
```

# python - Python: convert values between 0 and 1 to color range red to blue

> ID：12432383
> 
> 赞同：2
> 
> 时间：2012-09-14T21:44:37.443
> 
> 标签：python, colors, interpolation

I know this is very similar to a [previous question](https://stackoverflow.com/questions/10901085/python-range-values-to-pseudocolor) that I had posted, I cannot figure out how to modify it to suit this problem.

I have a array of values between 0 and 1\. I want to convert these values to RGB color array ranging from red (0) to blue (1). The solution suggested in the previous question converted values to HSV tuples first, and then used `colosys.hsv_to_rgb()` to convert to RGB values.

This was fine if I wanted to generate colors between red and green. I could interpolate the hue value linearly. However, when the extreme colors are red and blue, the intermediary values take on green color because green hue lies between red and blue. Is there a way I can avoid this and get colors only in the vicinity of red and blue?

I know I can linearly interpolate RGB values directly, but that does not give a good color spectrum. So please tell me a solution using HSV space.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:51:06.680

将您的 0-1 输入缩放为 0-(-120) 输出，将模数乘以 360，并将其用作您的色调（或 0-(-0.3333...) 和 1.0 视情况而定）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T21:56:02.033

色调是一个循环值，因此，如果将总色调范围添加到任何颜色的色调（模其最大值，使其仍在范围内），您将获得完全相同的颜色。因此，与其从红色增加到蓝色，不如将其从红色减少到蓝色。HSV 是一种圆柱形颜色模型。

![在此处输入图像描述](../Images/88679ff177f86201e098a91c525100b0.png)

# java - Embedded-Jetty 和 Maven 中的 ClassNotFound

> ID：12432402
> 
> 赞同：0
> 
> 时间：2012-09-14T21:46:27.143
> 
> 标签：java, jsp, maven, jetty

为了进行一些表面测试，我为 JUnit-Tests 启动了一个嵌入式 Jetty。我的测试从服务器调用一些页面。当从 eclipse 做这个测试时，一切正常，类路径是由“mvn eclipse:eclipse”创建的。

当使用“mvn test”运行这些测试时，jsp 编译器会引发很多 ClassNotFoundExceptions：javax.servlet.、javax.servlet.jsp 甚至我自己生成的一些类。servlet 直接回答的所有请求都可以正常工作。

在我的测试用例中做类似 System.out.println(HttpServlet.class) 的工作也很好。所以 Jetty-JSP 编译器在编译时似乎有些“特殊”。

有人知道如何说服 Jetty 编译我的 JSP 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T02:16:34.223

有一个 Maven 插件：

[http://wiki.eclipse.org/Jetty/Feature/Jetty_Jspc_Maven_Plugin](http://wiki.eclipse.org/Jetty/Feature/Jetty_Jspc_Maven_Plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:22:58.853

如果您查看[一个码头模块的 pom，](http://central.maven.org/maven2/org/eclipse/jetty/jetty-servlets/8.1.7.v20120910/jetty-servlets-8.1.7.v20120910.pom)您会看到：

```
<dependency>
    <groupId>org.eclipse.jetty.orbit</groupId>
    <artifactId>javax.servlet</artifactId>
    <scope>provided</scope>
</dependency> 
```

它依赖于自己的 servlet-api 类。

因此，也许如果您在项目 pom 中指定对真实 servlet-api 的依赖项，它将起作用：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>javax.servlet-api</artifactId>
    <version>3.0.1</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T13:10:25.970

毕竟问题似乎出在 maven 依赖管理中（或者我允许 maven 做的事情）。

我的类路径中有很多 javax 工件（jsp-2.1、2.2.3、2.2.1、servlet 2.5、3.0、3.0.glassfish 样式）。因此，在我清理了依赖项之后，一切正常。现在我明白了为什么来自 maven-.build 的码头没有启动。最后我不明白为什么码头出现在日食中；）

# xcode - 如何更新工具栏中的条形按钮项

> ID：12432405
> 
> 赞同：0
> 
> 时间：2012-09-14T21:46:45.353
> 
> 标签：xcode, uinavigationbar, uitoolbar, playback, ios

我在导航栏上的应用程序中有一个播放控制器，很容易在其实现文件中找到。所以我尝试添加一个工具栏并将播放控件移动到该工具栏，但我不知道如何以编程方式引用它，因此无法更新用于指示音乐是否可以暂停或播放的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T08:57:33.437

您可以通过多种方式做到这一点，一种是通过设置 UIBarButtonItem 的图像不要与按钮的 backgroundImage 混淆。您可以像这样添加条形按钮：

UIBarButtonItem *barButton1 = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"camera.png"] style:UIBarButtonItemStylePlain target:self action: @selector(pressButton1:)];

图像应该是大小约为 30 x 30 的灰度图像，类似于标签栏图标。在界面文件中声明条形按钮，可以这样设置图片：

[barButton1 setImage:[UIImage imageNamed:@"Chats.png"]];

您可以这样做的另一种方法是使用自定义 UIButton ，如下所示：

button1 = [UIButton buttonWithType:UIButtonTypeCustom]; button1.frame = CGRectMake(0, 0, 64, 30); [button1 setBackgroundImage:[UIImage imageNamed:@"camera.png"] forState: UIControlStateNormal]; [button1 setBackgroundImage:[UIImage imageNamed:@"Chats.png"] forState: UIControlStateSelected]; [button1 setTitle:@"Camera" forState:UIControlStateNormal]; button1.titleLabel.font = [UIFont boldSystemFontOfSize:12]; [button1 addTarget:self action:@selector(pressButton1:) forControlEvents: UIControlEventTouchUpInside];

UIBarButtonItem *barButton1 = [[UIBarButtonItem alloc] initWithCustomView:button1];

在界面文件中声明button1，然后你可以像这样改变图像：

[button1 setSelected:TRUE];

# parameters - 如何强制 JVM 64 位使用超过 4GB 的堆空间？

> ID：12432409
> 
> 赞同：1
> 
> 时间：2012-09-14T21:47:21.590
> 
> 标签：parameters, jvm, heap-memory

这是相当令人费解的，64 位操作系统，64 位 JDK，16GB 的 RAM，我无法使用超过 4GB 的堆。这是我启动程序的方式（我的程序在 Scala 中，但它基于 JVM）：

```
/usr/lib64/jvm/java/bin/java -d64 -Xms512m -Xmx10g ...jars go on 
```

当我读取程序中的总内存时（`Runtime.getRuntime().totalMemory()`）......读数为“4242MB”。

**问题**——如何强制 JVM 使用我已经提供的内存量（10 GB）？

`java -version`说：

```
java version "1.6.0_29"
Java(TM) SE Runtime Environment (build 1.6.0_29-b11)
Java HotSpot(TM) 64-Bit Server VM (build 20.4-b02, mixed mode) 
```

## 更新 1

`maxMemory`返回“9102MB”，所以现在存在差异的问题（1GB 和 5GB），以及如何使用所有最大内存（我的程序崩溃，因为它需要 2 个 ~3GB 的块，总共 4GB 是不够的）。

## 更新 2

现在，我把分配前后的所有读数都放了下来，令人惊讶的是，总内存的第一个读数是 4GB，第二个也是，但第三个读数达到了 8GB。我很高兴，总内存会突然增加，因为它解决了我的问题，但我不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:58:26.233

`10g`虚拟机只会在真正需要时尝试使用所有这些。由于您已指定`-Xmx10g`，这是它将尝试使用的最大内存。程序在需要的时候无法分配超过4g吗？

并检查输出

```
Runtime.getRuntime().maxMemory() 
```

# php - AJAX加载的jQuery弹出窗口中的表单提交按钮不起作用

> ID：12432414
> 
> 赞同：1
> 
> 时间：2012-09-14T21:47:34.277
> 
> 标签：php, jquery, html, ajax

晚上，

我已经阅读了一些与此问题相关的其他线程，但我仍然无法解决它。

我在网页上有一个“报告”按钮，单击该按钮会弹出一个带有 jQ​​uery 的弹出框，该框通过 AJAX 显示另一个页面。这工作正常。

问题是：提交按钮不起作用。奇怪的是，它似乎可以在 iOS Safari 上运行，但不能在桌面浏览器上运行。

该表单有 3 个单选按钮和一个文本区域，当用户单击提交按钮时，它应该将值发送到接收它们的 PHP 页面，并确认表单已提交以显示在 AJAX 页面中，而无需重新加载任何内容。

这是设置的[小提琴](http://jsfiddle.net/ZXr2M/)。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:02:18.953

在您的小提琴示例中，您使用了：

```
var queryString = $('#reportform').formSerialize(); 
```

你应该使用：

```
var queryString = $('#reportform').serialize(); 
```

jQuery 中没有 formSerialize() 方法。

# php - 部署一个小型 PHP + MySQL 服务

> ID：12432415
> 
> 赞同：0
> 
> 时间：2012-09-14T21:47:42.373
> 
> 标签：php, mysql, sql, deployment, create-table

我正在为我的客户端部署一个小型 PHP + MySQL 服务，并且想知道设置数据库的正确方法是什么：

*   我应该使用托管服务提供商控制面板并创建数据库架构吗？
*   或者我应该将 SQL`CREATE`脚本放在我的 PHP 中以在“初始化阶段”运行？托管服务提供商甚至允许 PHP 创建表吗？

这是一个非常小的站点，一个很小的信息页面和一个用于从数据库中获取数据的 Web 服务页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:50:03.527

这可能取决于您的托管服务提供商提供的服务 - 我个人会使用至少应该提供 phpMyAdmin 的控制面板。然后，您可以从开发数据库中导出架构并将其导入实时版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:50:50.073

我通常将所有部署任务卸载到安装脚本中。通过这种方式，您可以在几秒钟内完成部署，并且可以在必要时重复。我不知道限制脚本修改数据库的方法（除了 mysql 用户权限，通常由您定义）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T21:51:07.393

根据您的托管服务提供商，您可以获得许多数据库。最差的是1个数据库，有一个固定的名字，大多数做5个或更多，有能力创建自己的数据库名。通常带有前缀。

尽管您可以通过 PHP 提供任何 SQL 语句，但我会从主机商那里获得面板。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T22:05:42.087

为什么要为安装添加 PHP 的复杂性？

只需使用原始 SQL。更简单。将其发射到数据库中。

使用 PHP 作为界面。创建表/存储过程/触发器等是一次性事件。

# sql - 对象 'server' 数据库 'master' 上的不安全装配权限被拒绝

> ID：12432416
> 
> 赞同：10
> 
> 时间：2012-09-14T21:47:46.050
> 
> 标签：sql, sql-server, sql-server-2005, permissions, .net-assembly

如何为此添加权限：

```
unsafe assembly permission was denied on object 'server' database 'master' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T22:41:59.613

检查并确认您用于创建程序集的帐户是该特定 SQL 实例上的系统管理员。您必须是系统管理员才能根据[MSDN安装不安全的程序集](http://msdn.microsoft.com/en-us/library/ms189524.aspx)

# ruby-on-rails-3 - Ruby on Rails + PostgreSQL 应用程序无法在 AWS EC2 上启动。错误是：“无法加载此类文件——pg_ext (LoadError)”

> ID：12432418
> 
> 赞同：3
> 
> 时间：2012-09-14T21:47:49.063
> 
> 标签：ruby-on-rails-3, postgresql, rubygems, amazon-web-services, pg

我首先安装所有这些依赖项：

```
sudo yum install ruby19 ruby19-devel gem rubygems19-devel make gcc postgresql9 postgresql9-devel postgresql9-server 
```

然后我切换到root用户并运行

```
bundle install 
```

我收到绿色成功消息：

```
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

但是，当我 cd 到目录并运行时

```
rails s -p80 
```

我得到了所有这些并且它无法启动（我仍然是 root，因为如果我不是 root，绑定将无法工作到端口 80）：

```
/usr/local/share/gems/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- pg_ext (LoadError)
    from /usr/local/share/gems/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
    from /usr/local/share/gems/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /usr/local/share/gems/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from /usr/local/share/gems/gems/pg-0.14.0/lib/pg.rb:4:in `<top (required)>'
    from /usr/local/share/gems/gems/bundler-1.2.0/lib/bundler/runtime.rb:68:in `require'
    from /usr/local/share/gems/gems/bundler-1.2.0/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /usr/local/share/gems/gems/bundler-1.2.0/lib/bundler/runtime.rb:66:in `each'
    from /usr/local/share/gems/gems/bundler-1.2.0/lib/bundler/runtime.rb:66:in `block in require'
    from /usr/local/share/gems/gems/bundler-1.2.0/lib/bundler/runtime.rb:55:in `each'
    from /usr/local/share/gems/gems/bundler-1.2.0/lib/bundler/runtime.rb:55:in `require'
    from /usr/local/share/gems/gems/bundler-1.2.0/lib/bundler.rb:128:in `require'
    from /home/user/TransForm/config/application.rb:7:in `<top (required)>'
    from /usr/local/share/gems/gems/railties-3.2.8/lib/rails/commands.rb:53:in `require'
    from /usr/local/share/gems/gems/railties-3.2.8/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /usr/local/share/gems/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
    from /usr/local/share/gems/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

也许有一种简单的方法可以从一开始就正确部署它，而不是搞乱错误的废话？我需要 PostgreSQL。除了这个 AWS EC2 实例之外，这个应用程序在任何地方都可以使用，所以我知道我的 Gemfile 是正确的。任何线索都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:43:17.377

打开`irb`并输入`require "pg"`它是否有效？如果没有，则检查目录`pg_ext`中是否存在`/usr/local/share/gems/gems/pg-0.14.0/lib/`。您可以手动安装 postgresql gem，使用

```
gem install pg 
```

如果这仍然不起作用，请确保您使用的是最新版本的 ruby​​ 和最新版本的 ruby​​gems 使用`gem environment`命令。如果是旧版本，您可以使用[rvm安装最新版本](https://rvm.io/rvm/install/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T09:39:45.053

```
 use gem pg 
            than 
             bundle install
             bundle update
               please not use any version of pg 
       I face this error and solved by this 
```

# c# - 使用 C# 在 mysql 中插入大量流数据

> ID：12432419
> 
> 赞同：1
> 
> 时间：2012-09-14T21:47:52.527
> 
> 标签：c#, .net, mysql, multithreading, insert

我使用Mysql，我需要插入大量数据。数据以 5k 行列表的形式流式传输到我的服务器。我需要插入超过 3k 个请求，这意味着 3k 个请求 * 5k 行 = 15 000 000 行。

我所做的是使用创建线程并使用这些线程插入，因为数据在异步事件中以 5k 数据包的形式出现。数据响应是根据我的请求生成的。

记住这种情况，最好的方法是什么？

ThreadPooling 用于线程管理或简单的多线程应用程序，并且线程会在插入中受益，因为我需要在单个表中插入（Innodb 引擎）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:04:22.370

您可以在服务器上缓存传入的请求。将一些缓冲数据保留在内存中，直到收到*N*个请求（以后可以对其进行微调）。一旦你得到这些，你只需使用一些批量插入例程将数据刷新到 MySql 中。做一个大的插入通常比做许多小的插入要快得多。

您可以使用[`ConcurrentBag`](http://msdn.microsoft.com/en-us/library/dd381779.aspx)类将数据保存在服务器上。这是一个线程安全的集合。

此外，您可能需要根据时间使缓存过期。这将涵盖您收到一些请求*n < N*然后客户端停止发送数据的情况。无论如何，您都希望刷新它，而不是永远等到下一个即将到来的请求完全填满缓存。

# wordpress - 301 从特定 .html 页面重定向到新的永久链接结构失败

> ID：12432420
> 
> 赞同：0
> 
> 时间：2012-09-14T21:47:55.613
> 
> 标签：wordpress, .htaccess, redirect, permalinks

我已经在网上搜索了一个多小时，试图找出为什么我的 .htaccess 文件没有按预期工作，但所有关于 .htaccess 的文档和问题似乎都说一切都应该没问题。我现在正在使用一个 wordpress 网站，需要将一些旧链接重定向到 *.html 文件到新的永久链接（因为命名约定已经完全改变了）。所以我的 .htaccess 文件看起来像这样：

```
# Redirects for old URLs
redirect 301 /contact_us http://rpcdev.thisisforge.com/contact/
redirect 301 /about_us http://rpcdev.thisisforge.com/about/
redirect 301 /clients http://rpcdev.thisisforge.com/work/
redirect 301 /clients/event.html http://rpcdev.thisisforge.com/work/event-retail-design/
redirect 301 /clients/identity.html http://rpcdev.thisisforge.com/work/identity-branding/
redirect 301 /clients/web.html http://rpcdev.thisisforge.com/work/web-design/
redirect 301 /clients/corp_lit.html http://rpcdev.thisisforge.com/work/brochures-publications/

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

前三个工作正常，它是来自特定 .html 页面的那些不是。我尝试将代码放在 WOrdPress 代码的上方和下方，并且尝试切换 301 的顺序，因此 .html 重定向是第一个，而不是最后一个。但这无济于事。奇怪的是，有时 corp_lit.html 重定向可以正常工作，但其他的则不行。我看不出这有什么押韵或理由！

我的浏览器或操作系统（Windows s7）是否从 .htaccess 或其他东西中缓存 301，从它们可能输入错误时回来？我尝试在命令提示符下清空浏览器缓存并刷新 DNS，但无济于事。

拉任何帮助非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:51:45.840

Redirect 指令将路径节点链接在一起，因此您的第一个 /clients 重定向正在应用而不是以下重定向，请尝试将其更改为使用 RedirectMatch

```
 RedirectMatch 301 ^/clients/?$ http://rpcdev.thisisforge.com/work/ 
```

# actionscript-3 - AS3 - 自动裁剪技术？

> ID：12432423
> 
> 赞同：0
> 
> 时间：2012-09-14T21:48:39.043
> 
> 标签：actionscript-3, bitmapdata

我想知道是否有人知道一种用于自动裁剪图像（即 BitmapDatas）的良好且最好快速的技术，类似于 GIMP 的做法？这基本上意味着裁剪图像以尽可能多地去除不必要的背景，这样您就剩下一个包含实际图像的矩形。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:54:57.693

看看 BitmapData 的[getColorBoundsRect()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#getColorBoundsRect%28%29)方法，如果你传递了正确的参数，它会为你做这件事。

还可以查看[PlasticSturgeon](http://plasticsturgeon.com/2010/09/as3-get-visible-bounds-of-transparent-display-object/)解释使用该功能的优秀文章。

# php - 如果未选中复选框，则删除数据库条目

> ID：12432424
> 
> 赞同：0
> 
> 时间：2012-09-14T21:48:52.523
> 
> 标签：php, mysql

我有一个表格，允许通过选中可以正常工作的复选框将工程师添加到工作中。但是，我希望用户通过取消选中另一个表单上的复选框来删除工程师。

该表（多对多表）有 3 列 id_ce（主键）、call_ce（外键）和engineer_ce（外键）。我希望表单检查复选框是否为空，以及是否检查表中是否有带有 call_ce 和 Engineer_ce 的条目，如果存在则将其删除，但我失败了。

这是我目前所拥有的......

```
foreach($_POST['engineer'] as $engineer_id){
    if(!isset($_POST['engineer'])){
        $sql = "SELECT * FROM calls_engineers WHERE call_ce = '$diary_id' AND engineer_ce = '$engineer_id'";
        $result = mysql_query($sql)or die(mysql_error());
        if(mysql_num_rows($result) > 0){
            $sql = "DELETE FROM calls_engineers WHERE engineer_ce = '$engineer_id'";
            $result = mysql_query($sql)or die(mysql_error());
        }   
    }
} 
```

我怀疑问题可能是未选中的复选框未发布，因此它们不会通过 foreach 循环，但我不确定另一种方法。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:55:04.107

您可以在页面上放置一个带有工程师 ID 的隐藏字段。说，它会被称为`engineer_on_page`

现在你可以

```
foreach($_POST['engineer_on_page'] as $engineer_id) {
     if(!in_array($engineer_id, $_POST['engineer'])){
          //do delete here
     }
} 
```

我希望复选框看起来类似于：

```
<input type="checkbox" name="engineer[]" value="[engineer_id]"/> 
```

和隐藏字段

```
<input type="hidden" name="engineer_on_page[]" value="[engineer_id]"/> 
```

您也可以像这样指定复选框字段：

```
<input type="checkbox" name="engineer[[engineer_id]]" value="[engineer_id]"/> 
```

实际 ID在哪里`[engineer_id]`（1、2、3 等）

在第二种情况下，您可以使用

```
 if(!isset($_POST['engineer'][$engineer_id])){
          //do delete here
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-18T06:57:11.673

/* 通过罗希特·巴亚尔 */

$checkbox1=$_POST['stu2']; $chk="";

```
/* print_r($_POST['stu3']); */
$order1=$_POST['stu3'];

  if(isset($_POST['subject']))
  {

$string = implode(',', $checkbox1);

 echo $del="delete from student_subject where sub_id not in ($string)";
 mysql_query($del);

  }
  //   mysql_query($del);

 foreach ($checkbox1 as $key => $chk1)
 {  
  $chk .= $chk1.",";  

 $check="SELECT * FROM student_subject WHERE sub_id = '".$chk1."' AND form_id='".$_GET['sub']."'";
 $rs = mysql_query($check);
 $data = mysql_fetch_array($rs);
 mysql_num_rows($rs);
 if($data[0] > 1)
  {
 echo "Subject is Already Exists<br/>";

  }

else
  {

  if(isset($_POST['subject']))
  {
     $a= "sub_id='".$chk1."'";

     echo $ins = "insert into student_subject set form_id='".$_POST['stu1']."',
                                    ".$a.",
                     order_no='".$chk1."'";

  }
if (mysql_query($ins))
{
    echo "Now New subject Is Added<br/>";
}
else
{
    echo "Error adding user in database<br/>";
} 
```

} }

?>

# facebook - ServiceStack OAuth - 注册而不是登录

> ID：12432426
> 
> 赞同：2
> 
> 时间：2012-09-14T21:49:13.057
> 
> 标签：facebook, login, oauth, servicestack

在 servicestack OAuth 实现中，我只看到了自动登录的可能性，例如。脸书账号。

但是是否有能力通过 facebook 登录来支持注册过程。我想要的是让用户登录到 facebook 应用程序，然后加载他们的姓名、姓氏和电子邮件，并在我的网站上预填真正注册所需的文本框（因为我还必须进行手机验证等）我不想要用户在使用 facebook 登录时获得授权和身份验证。对于完整的站点访问，只有凭据登录应该是有效的。

**编辑：**我找到了解决方案。

在 FacebookProvider.cs

```
public override bool IsAuthorized(IAuthSession session, IOAuthTokens tokens, Auth request = null)
{
    if (request != null)
    {
        if (!LoginMatchesSession(session, request.UserName)) return false;
    }
    return tokens != null && session.UserName!=null && !string.IsNullOrEmpty(tokens.AccessTokenSecret);
} 
```

问题是**&& session.UserName!=null**部分。所以我们可以检查用户是否使用凭据登录，这将是 !=null 并且用户可以使用所有服务。如果没有，这将是 ==null 并且他只能从会话中获取 facebook 信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T22:35:28.447

[SocialBootstrap API](http://bootstrapapi.apphb.com)项目显示了通过覆盖[其自定义用户会话的 OnAuthenticated() 挂钩来](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/Models/CustomUserSession.cs)处理成功身份验证后的回调的示例：

我已经退出，重写了一些并突出了一些重要的部分：

```
public class CustomUserSession : AuthUserSession
{
    public override void OnAuthenticated(IServiceBase authService, 
                    IAuthSession session, 
                    IOAuthTokens tokens, 
                    Dictionary<string, string> authInfo)
    {
        base.OnAuthenticated(authService, session, tokens, authInfo);

        //Populate matching fields from this session into your own MyUserTable
        var user = session.TranslateTo<MyUserTable>();
        user.Id = int.Parse(session.UserAuthId);
        user.GravatarImageUrl64 = CreateGravatarUrl(session.Email, 64);

        foreach (var authToken in session.ProviderOAuthAccess)
        {
            if (authToken.Provider == FacebookAuthProvider.Name)
            {
                user.FacebookName = authToken.DisplayName;
                user.FacebookFirstName = authToken.FirstName;
                user.FacebookLastName = authToken.LastName;
                user.FacebookEmail = authToken.Email;
            }
            else if (authToken.Provider == TwitterAuthProvider.Name)
            {
                user.TwitterName = authToken.DisplayName;
            }
        }

        //Resolve the DbFactory from the IOC and persist the user info
        using (var db = authService.TryResolve<IDbConnectionFactory>().Open())
        {
            //Update (if exists) or insert populated data into 'MyUserTable'
            db.Save(user);
        }

    }

    //Change `IsAuthorized` to only verify users authenticated with Credentials
    public override bool IsAuthorized(string provider)
    {
        if (provider != AuthService.CredentialsProvider) return false;
        return base.IsAuthorized(provider);
    }
} 
```

基本上，这个用户定义的自定义逻辑（每次成功验证后都会触发）从 UserSession 中提取数据并将其存储在自定义的“MyUserTable”中。

我们还覆盖了`IsAuthorized`仅接受已通过 CredentialsAuth 进行身份验证的用户的含义。

您可以使用这些数据来完成其余的注册。

## 其他可能的自定义

ServiceStack 的内置 Auth 持久化 AuthData 并自动为您填充 Session。如果您想添加额外的验证断言，您可以简单地使用您自己的自定义 [Authentication] 属性，而不是包含额外的自定义逻辑。查看内置[AuthenticateAttribute 的实现作为指南](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/AuthenticateAttribute.cs)。

# java - Javamail 和 Javafx。阅读和显示邮件嵌入图像

> ID：12432432
> 
> 赞同：2
> 
> 时间：2012-09-14T21:49:44.690
> 
> 标签：java, jakarta-mail, javafx

我使用名为 WebEngine (javafx) 的控件来显示 javamail 下载的邮件内容。当内容是纯文本或带有图像 src=http 链接的 html 时很好，但是当邮件具有嵌入图像（在 src 中有内容 id）时，控件不显示此图像（当然因为不知道它在哪里）。显示电子邮件的最佳控件是什么？如何做到这一点，当图像存储在内存中时。也许在 WebEngine 中加载邮件不是一个好主意......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:58:45.707

您需要一个[URLStreamHandler](http://docs.oracle.com/javase/7/docs/api/java/net/URLStreamHandler.html)来处理“cid” URL 协议并从 MIME 消息的适当部分提供数据。我相信您需要通过创建[URLStreamHandlerFactory](http://docs.oracle.com/javase/7/docs/api/java/net/URLStreamHandlerFactory.html)并调用[URL.setURLStreamHandlerFactory 方法](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#setURLStreamHandlerFactory%28java.net.URLStreamHandlerFactory%29)来配置 URLStreamHandler 。我记得的诀窍是，没有办法获得默认的 URLStreamHandlerFactory 以便您的版本可以委托给所有其他 URL 协议的默认版本。

或者，您可以将所有附件保存到磁盘，然后在显示之前处理 html 内容，以将所有 cid: 引用转换为 file: 引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:37:40.797

我的猜测是 WebEngine 没有解码和显示多部分 mime 编码的消息，例如您试图在收到的邮件中处理的内容。如果我没记错的话，一些像 IE 这样的浏览器也没有处理多部分 mime 编码的消息（也许仍然没有）。

您可以做的是使用[Mime4J](http://james.apache.org/mime4j/index.html)之类的东西自己解码多部分消息，然后根据从多部分消息中获得的解码 mimetype 在控件（或必要的外部应用程序）中显示解码的内容部分。

*   [WebView](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html)将能够显示一堆 mime 类型，如 text/html、text/plain、image/jpeg 等。
*   pdf 可以使用[JPedalFX PDF Viewer](http://www.idrsolutions.com/jpedalfx-viewer/)显示。
*   text/plain 可以由[Label](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Label.html)呈现。
*   [ImageView](http://docs.oracle.com/javafx/2/api/javafx/scene/image/ImageView.html)可以呈现各种 image/* mime 类型。
*   任何 JavaFX 控件本身不支持的 word 文档和其他格式可以写入文件并通过[HostServices.showDocument](http://docs.oracle.com/javafx/2/api/javafx/application/HostServices.html#showDocument%28java.lang.String%29)或[DeskTop.open 启动](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#open%28java.io.File%29)。

# shopify - Shopify 为 webhook POST 返回“主题不能为空白”，即使我提供了一个

> ID：12432435
> 
> 赞同：1
> 
> 时间：2012-09-14T21:49:59.573
> 
> 标签：shopify

我正在尝试在这里创建一个 webhook：

```
curl --header "X-Shopify-Access-Token: <token>" -d '{"webhook": {"topic": "orders/create", "address": "http://www.google.com/", "format": "json"}}' https://test-store-402.myshopify.com/admin/webhooks.json 
```

这是为了便于阅读而漂亮打印的 JSON：

```
{
    "webhook": {
        "topic": "orders/create",
        "address": "http://www.google.com/",
        "format": "json"
    }
} 
```

它返回此错误：

```
{"errors":{"topic":["can't be blank","Invalid topic specified. Topics allowed: orders/create, orders/updated, orders/paid, orders/cancelled, orders/fulfilled, orders/partially_fulfilled, app/uninstalled, customer_groups/create, customer_groups/update, customer_groups/delete, products/create, products/update, products/delete, collections/create, collections/update, collections/delete, carts/create, carts/update"],"address":["can't be blank"]}} 
```

我已经确认：

*   题目拼写正确
*   根据[文档，JSON 请求有效负载正确地包装在“webhook”（单数）中](http://api.shopify.com/webhook.html)
*   我已将 JSON 复制并粘贴到 jsonlint.com 以检查 JSON 是否有效

困惑...没有看到与此相关的任何其他问题，我一定是在做一些非常明显的错误 - 否则每个人都会遇到这个问题。

**更新**：我通过传入`Content-type: application/json`标题让它在命令行上工作。但是现在我`curl_exec`在 PHP 中遇到了问题。我有以下 CURLOPT 集：

```
CURLOPT_RETURNTRANSFER: true
CURLOPT_SSL_VERIFYPEER: false
CURLOPT_FOLLOWLOCATION: true
CURLOPT_MAXREDIRS: 10
CURLOPT_CUSTOMREQUEST: 'POST'
CURLOPT_HTTPHEADER: array {
    0 => string 'X-Shopify-Access-Token: <token>'
    1 => string 'Content-type: application-json' (length=30) 
```

请注意，我可以做 GET 就好了`curl`- 只有 POST 返回这个令人困惑的响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T23:07:18.477

让它在 curl_exec 中工作。这是我正在使用的：

```
CURLOPT_RETURNTRANSFER: true
CURLOPT_SSL_VERIFYPEER: false
CURLOPT_FOLLOWLOCATION: true
CURLOPT_MAXREDIRS: 10
CURLOPT_CUSTOMREQUEST: 'POST'
CURLOPT_HTTPHEADER: array {
    0 => string 'X-Shopify-Access-Token: <token>'
    1 => string 'Content-type: application-json' (length=30)
CURLOPT_POSTDATA: '{"webhook":{"topic":"orders/updated","address":"http://www.google.com","format":"json"}}' 
```

我认为问题可能是我在上面的更新中遗漏了 CURLOPT_POSTDATA 。

# xml - 使用 XPath 查找连续的兄弟姐妹

> ID：12432438
> 
> 赞同：4
> 
> 时间：2012-09-14T21:50:28.833
> 
> 标签：xml, xpath, nokogiri

这是 XPath 专家的一个简单点！:)

文件结构：

```
<tokens>
  <token>
    <word>Newt</word><entityType>PROPER_NOUN</entityType>
  </token>
  <token>
    <word>Gingrich</word><entityType>PROPER_NOUN</entityType>
  </token>
  <token>
    <word>admires</word><entityType>VERB</entityType>
  </token>
  <token>
    <word>Garry</word><entityType>PROPER_NOUN</entityType>
  </token>
  <token>
    <word>Trudeau</word><entityType>PROPER_NOUN</entityType>
  </token>
</tokens> 
```

忽略文档的语义不可能性，我想拉出[["Newt", "Gingrich"], ["Garry", "Trudeau"]]，即：当连续有两个token的entityTypes为PROPER_NOUN时，我想从这两个标记中提取单词。

我已经做到了：

```
"//token[entityType='PROPER_NOUN']/following-sibling::token[1][entityType='PROPER_NOUN']" 
```

...它可以找到两个连续的 PROPER_NOUN 令牌中的第二个，但我不确定如何让它与它一起发出第一个令牌。

一些注意事项：

*   如果可以简化问题，我不介意对 NodeSet 进行更高级别的处理（例如，在 Ruby / Nokogiri 中）。
*   如果有三个或更多连续的 PROPER_NOUN 标记（称为 A、B、C），理想情况下我想发出 [A、B]、[B、C]。

## 更新

这是我使用高级 Ruby 函数的解决方案。但是我厌倦了所有那些在我脸上踢沙子的 XPath 恶霸，我想知道真正的 XPath 编码人员是如何做到的！

```
def extract(doc)
  names = []
  sentences = doc.xpath("//tokens")
  sentences.each do |sentence| 
    tokens = sentence.xpath("token")
    prev = nil
    tokens.each do |token|
      name = token.xpath("word").text if token.xpath("entityType").text == "PROPER_NOUN"
      names << [prev, name] if (name && prev)
      prev = name
    end
  end
  names
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:19:23.273

**这个 XPath 1.0 表达式**：

```
 /*/token
      [entityType='PROPER_NOUN'
     and
       following-sibling::token[1]/entityType = 'PROPER_NOUN'
      ]
       /word 
```

**选择所有“first-in-pair noun-words”**

**这个 XPath 表达式**：

```
/*/token
  [entityType='PROPER_NOUN'
 and
   preceding-sibling::token[1]/entityType = 'PROPER_NOUN'
  ]
   /word 
```

**选择所有“第二对名词词”**

您必须生成实际对，取两个生成的结果节点集中的每一个的第 k 个节点。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
  "/*/token
      [entityType='PROPER_NOUN'
     and
       following-sibling::token[1]/entityType = 'PROPER_NOUN'
      ]
       /word
  "/>
==============
  <xsl:copy-of select=
   "/*/token
      [entityType='PROPER_NOUN'
     and
       preceding-sibling::token[1]/entityType = 'PROPER_NOUN'
      ]
       /word
  "/>
 </xsl:template>
</xsl:stylesheet> 
```

**简单地评估两个 XPath 表达式并输出**这两个评估的结果（使用合适的分隔符来可视化第一个结果的结尾和第二个结果的开头）。

**应用于提供的 XML 文档时：**

```
<tokens>
  <token>
    <word>Newt</word><entityType>PROPER_NOUN</entityType>
  </token>
  <token>
    <word>Gingrich</word><entityType>PROPER_NOUN</entityType>
  </token>
  <token>
    <word>admires</word><entityType>VERB</entityType>
  </token>
  <token>
    <word>Garry</word><entityType>PROPER_NOUN</entityType>
  </token>
  <token>
    <word>Trudeau</word><entityType>PROPER_NOUN</entityType>
  </token>
</tokens> 
```

**输出是**：

```
<word>Newt</word>
<word>Garry</word>
==============
  <word>Gingrich</word>
<word>Trudeau</word> 
```

**并且两个结果的组合（压缩）**（您将在您最喜欢的 PL 中指定）是：

```
["Newt", "Gingrich"] 
```

和

```
["Garry", "Trudeau"] 
```

**当对这个 XML 文档应用相同的转换时**（注意我们现在有一个三元组）：

```
<tokens>
  <token>
    <word>Newt</word><entityType>PROPER_NOUN</entityType>
  </token>
  <token>
    <word>Gingrich</word><entityType>PROPER_NOUN</entityType>
  </token>
  <token>
    <word>Rep</word><entityType>PROPER_NOUN</entityType>
  </token>
  <token>
    <word>admires</word><entityType>VERB</entityType>
  </token>
  <token>
    <word>Garry</word><entityType>PROPER_NOUN</entityType>
  </token>
  <token>
    <word>Trudeau</word><entityType>PROPER_NOUN</entityType>
  </token>
</tokens> 
```

**现在的结果是**：

```
<word>Newt</word>
<word>Gingrich</word>
<word>Garry</word>
==============
  <word>Gingrich</word>
<word>Rep</word>
<word>Trudeau</word> 
```

并压缩这两个结果会产生正确的、想要的最终结果：

```
["Newt", "Gingrich"],

["Gingrich", "Rep"], 
```

和

```
["Garry", "Trudeau"] 
```

**请注意**：

*可以*使用单个 XPath 2.0 表达式生成想要的结果。如果您对 XPath 2.0 解决方案感兴趣，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T23:10:58.093

I'd do this in two steps. First step is to select a set of nodes:

```
//token[entityType='PROPER_NOUN' and following-sibling::token[1][entityType='PROPER_NOUN']] 
```

This gives you all the `token`s that start a 2-word pair. Then to get the actual pair, iterate over the node list and extract `./word` and `following-sibling::token[1]/word`

Using XmlStarlet ( [http://xmlstar.sourceforge.net/](http://xmlstar.sourceforge.net/) - awesome tool for quick xml manipulation) the command line is

```
xml sel -t -m "//token[entityType='PROPER_NOUN' and following-sibling::token[1][entityType='PROPER_NOUN']]" -v word -o "," -v "following-sibling::token[1]/word" -n /tmp/tok.xml 
```

giving

```
Newt,Gingrich
Garry,Trudeau 
```

XmlStarlet will also compile that command line to xslt, the relevant bit is

```
 <xsl:for-each select="//token[entityType='PROPER_NOUN' and following-sibling::token[1][entityType='PROPER_NOUN']]">
    <xsl:value-of select="word"/>
    <xsl:value-of select="','"/>
    <xsl:value-of select="following-sibling::token[1]/word"/>
    <xsl:value-of select="'&#10;'"/>
  </xsl:for-each> 
```

Using Nokogiri it could look something like:

```
#parse the document
doc = Nokogiri::XML(the_document_string)

#select all tokens that start 2-word pair
pair_starts = doc.xpath '//token[entityType = "PROPER_NOUN" and following-sibling::token[1][entityType = "PROPER_NOUN"]]'

#extract each word and the following one
result = pair_starts.each_with_object([]) do |node, array|
  array << [node.at_xpath('word').text, node.at_xpath('following-sibling::token[1]/word').text]
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T00:12:54.423

XPath 返回一个节点或节点集，但不返回组。所以你必须确定每个组的开始，然后抓住其余的。

```
first = "//token[entityType='PROPER_NOUN' and following-sibling::token[1][entityType='PROPER_NOUN']]/word"
next = "../following-sibling::token[1]/word"

doc.xpath(first).map{|word| [word.text, word.xpath(next).text] } 
```

输出：

```
[["Newt", "Gingrich"], ["Garry", "Trudeau"]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T18:20:16.657

单独的 XPath 不足以完成这项任务。但在 XSLT 中这很容易：

```
<xsl:for-each-group select="token" group-adjacent="entityType">
  <xsl:if test="current-grouping-key="PROPER_NOUN">
     <xsl:copy-of select="current-group">
     <xsl:text>====</xsl:text>
  <xsl:if>
</xsl:for-each-group> 
```

# javascript - 如何从完整的 URL 中获取 Slideshare 的嵌入 ID？

> ID：12432440
> 
> 赞同：4
> 
> 时间：2012-09-14T21:50:34.520
> 
> 标签：javascript, embed

我想让用户在我的网站上添加 Slideshare 演示文稿和 Youtube 视频。我不希望他们费力寻找嵌入代码，我想自己生成它，所以我确定大小和协议，他们只需要复制他们在地址栏中看到的 URL。

用 Youtube 很容易，我只需要提取视频 ID。使用 Slideshare 似乎并不容易，因为完整的 URL 不包含嵌入演示文稿时使用的 id。

所以基本上，我想知道如何从这个

[http://www.slideshare.net/guest196e23/joel-spolsky-100-things-keynote](http://www.slideshare.net/guest196e23/joel-spolsky-100-things-keynote)

至

[http://www.slideshare.net/slideshow/embed_code/4053571](http://www.slideshare.net/slideshow/embed_code/4053571)

或者更准确地说，从“guest196e23/joel-spolsky-100-things-keynote”到“4053571”

我想要一个客户端（javascript）解决方案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T11:54:34.740

您可以使用 Node.js 和 JSDOM 轻松实现这一目标

```
jsdom.env(
  "http://www.slideshare.net/DonaldDerek/build-your-own-raspitv-with-nodejs-socketio",
  ["http://code.jquery.com/jquery.js"],
  function (errors, window) {
    var $ = window.$ , 
        presentation = $(".twitter_player").attr('value')

    if(presentation === undefined){
      res.json({error:true})  
    }
    else{
      res.json({presentation_embed:presentation, error:false})
    }
  }
) 
```

然后只需在 AJAX 回调中捕获响应。

# jquery - 不正确地实施Jquery？

> ID：12432441
> 
> 赞同：2
> 
> 时间：2012-09-14T21:50:38.577
> 
> 标签：jquery, local, jsfiddle

我正在努力实现这一目标：http: [//jsfiddle.net/BcFVv/2/](http://jsfiddle.net/BcFVv/2/)

这是我的本地代码，但它不能正常工作：

我错过了什么吗？错误地实现了库？错误地包装了函数？

```
<!--- CSS --->
<style type="text/css">
    .mydivhide {
        display: none
    }​
</style>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

</head>

<body>

<!--- JQUERY --->

<script type="text/javascript">
    $(document).ready(function() {
        $("#buttons a").click(function() {
          var id = $(this).attr("id");
          $("#pages div").css("display", "none");
          $("#pages div#" + id + "").css("display", "block");
    });​
});​
</script>​​​​

<div id="buttons">
     <a href="#" id="1" class="mybutton myred">Div 1</a>
     <a href="#" id="2" class="mybutton myblue">Div 2</a>
     <a href="#" id="3" class="mybutton myblue">Div 3</a>
</div>

<div id="pages">
    <div id="1" class="mydivshow">1111</div>
    <div id="2" class="mydivhide">2222</div>
    <div id="3" class="mydivhide">3333</div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:59:31.920

两件事：首先，**没有两个元素应该具有相同的** `id`. 此外，`id`**s 不能以数字开头。**
[这是](http://jsfiddle.net/BcFVv/9/)一个演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:02:25.970

尝试用 Class 替换 id，然后尝试使用 div

```
$(document).ready(function() {
        $("#buttons a").click(function() {
          var id = $(this).attr("id");
            console.log(id)
          $("#pages div").hide();
          $("#pages div." + id).show();
    });
});​ 
```

[小提琴](http://jsfiddle.net/sushanth009/ms986/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:17:28.280

进行了这些修复/改进：

1.  使 HTML 中的 id 值是唯一的，而不是数字。
2.  更改了选择器以匹配新的 HTML id 值
3.  切换到`.hide()`哪个`.show()`更简单。
4.  简化获取 id 以不使用 jQuery，因为它没有用。
5.  从新按钮 id 中提取数字，以便它可以用来识别所需的页面。

工作演示：http: [//jsfiddle.net/jfriend00/JHK4a/](http://jsfiddle.net/jfriend00/JHK4a/)

这是生成的代码：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#buttons a").click(function() {
             var id = this.id.replace("b", "");
             $("#pages div").hide();
             $("#p" + id).show();
        });
    });
</script>

<div id="buttons">
     <a href="#" id="b1" class="mybutton myred">Div 1</a>
     <a href="#" id="b2" class="mybutton myblue">Div 2</a>
     <a href="#" id="b3" class="mybutton myblue">Div 3</a>
</div>

<div id="pages">
    <div id="p1" class="mydivshow">1111</div>
    <div id="p2" class="mydivhide">2222</div>
    <div id="p3" class="mydivhide">3333</div>
</div>​ 
```

# node.js - Node.js - 以 CPU 核心为目标

> ID：12432442
> 
> 赞同：17
> 
> 时间：2012-09-14T21:50:39.653
> 
> 标签：node.js

**你如何启动一个节点进程，以特定的 CPU 内核为目标？**

我见过节点集群，但我有兴趣在不同的核心上启动两个不同的进程。

我假设从命令行启动节点时有一种方法可以做到这一点，即：

> 节点 myapp.js

如果有区别，我很想知道如何在 Windows 和 linux 中执行此操作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-21T00:41:03.430

一般来说，调度程序会在没有任何帮助的情况下完成这项工作。在野外，我只见过一种情况很重要......

我们在一个 8 核的机器上部署了一个节点服务，在负载测试期间，我们做了一个最奇怪的观察……该服务实际上在 7 个工作人员的情况下比在 8 个工作人员的情况下表现更好。稍后进行一些调试，我们发现所有的网络中断都是由核心 0 处理。我使用了 15 个工作人员，因此与其他核心相比，核心 0 将分担 1/2 的负载。最终，我认为我们最终选择了 7 名工人，因为它更简单、更可预测，而且复杂性不值得获得约 7% 的理论吞吐量。

话虽如此，要在 linux 上设置 CPU 亲和性：

```
$ taskset -pc 3089
pid 3089's current affinity list: 0,1

$ taskset -p 3089
pid 3089's current affinity mask: 3 # core 0 = 0x1, core 1 = 0x2

$ taskset -pc 1,2,3 3089 
pid 3089's current affinity list: 0,1
pid 3089's new affinity list: 1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T22:09:16.540

在 linux 上，您可以使用[`taskset`](http://linuxcommand.org/man_pages/taskset1.html)给定的 CPU 亲和性来运行节点。有关在 Windows 中使用该命令执行相同操作的信息，请参阅[这篇文章。](https://stackoverflow.com/questions/10829974/taskset-equivalent-in-windows)`start`

# sql - 将列设置为等于 Oracle SELECT 中的值

> ID：12432444
> 
> 赞同：1
> 
> 时间：2012-09-14T21:50:50.113
> 
> 标签：sql, oracle

我想选择一列并将其设置为 0。在 SQL 中我只是这样做：SELECT Dealer_Fee = 0。

我必须使用更新吗？当我在 Oracle 中尝试同样的事情时，我得到“FROM 关键字未在预期的地方找到”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T22:02:37.287

我不确定您要做什么以及您提到的构造在哪种 SQL 方言中有效。如果您只想检索一些值并将其放在 Oracle 中的命名列中，则必须使用[DUAL](http://docs.oracle.com/cd/E11882_01/server.112/e26088/queries009.htm#sthref2275)表。尝试这个：

```
SELECT 0 AS dealer_fee FROM dual; 
```

另一方面，如果您使用 T-SQL 并将值放入变量中，则需要使用 PL/SQL [SELECT INTO](http://dba-oracle.com/t_pl_sql_plsql_select_into_clause.htm)子句，如下所示：

```
SELECT 0 INTO dealer_fee from dual; 
```

如果不尝试更详细地解释您要达到的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:51:57.867

1) 在 Oracle 中，您必须在 SELECT 中指定 FROM 子句，这与 MS sqlserver 不同，您可以省略 FROM 子句。

2) 如果你想更新一个特定的值，你必须使用 UPDATE 子句而不是 SELECT。

hth

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:56:24.460

您应该使用该`Update`语句。请访问详细解释更新语句的这个 oracle 参考：[更新语句](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/update_statement.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T21:56:36.253

看看[Oracle中](http://psoug.org/reference/update.html)[的参考资料`UPDATE`](http://psoug.org/reference/update.html)：

```
UPDATE <table_name>
SET <column_name> = <value> 
```

# python - 在mongodb中搜索短语的有效方法是什么

> ID：12432448
> 
> 赞同：1
> 
> 时间：2012-09-14T21:51:03.600
> 
> 标签：python, mongodb, search, knuth-morris-pratt

搜索包含不完全匹配的单词的短语的最佳方法是什么，例如：

```
description = "a cell phone that have an external memory" 
```

我想搜索：

```
search = "a good phone" 
```

是否有使用 mongodb 的提示，或者我是否使用来自 python 的 Knuth-Morris-Pratt 字符串匹配（这会杀死服务器）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:56:46.573

MongoDB 并不是真正适合这样的骗子。[我建议您使用SphinxSearch](http://sphinxsearch.com/)或[Solr](http://lucene.apache.org/solr/)等外部服务来满足您的搜索需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T22:31:04.833

您可以使用[MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)构建搜索索引，然后在结果集合中搜索。

您的 map 函数将首先将描述拆分为单个单词。应该丢弃非常常见的单词，例如“a”或“the”。然后它会对每个单词进行一次发射。*键*是单词，*值*是当前处理的文档的_id。

然后，您的 reduce 函数将用于收集包含每个单词的所有文档。它将返回所有数组合并为一个并删除重复项的键。

然后，此 MapReduce 作业的结果集合将包含描述中出现的每个单词的一个文档。这些文档将包含单词和一个数组，其中包含它出现的文档的_id。添加索引时，您可以非常快速地搜索它。

此 MapReduce 作业需要执行一次以构建搜索索引。当数据库中已经有大量数据时，这将需要一段时间。每当添加或删除文档或更改文档描述时，您都必须执行增量 MapReduce 以更新搜索索引。这种增量 MapReduce 将比初始的快得多，因此自动执行该操作应该是可行的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T23:43:27.650

这里没有人真正参考过搜索的文档页面：[http ://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo](http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo)

避免无法扩展的方法（例如 Map Reduce 和 Regex）的一个好方法是在您的文档中实际存储一组关键字。

您将决定如何添加等词以及要删除哪些停用词，一旦完成，您只需将其推入文档本身的一个大数组中。

Map reduce 有时被认为是一种不好的方法，因为它不会出于性能和线程原因以及正则表达式，因为它在 90% 的情况下对索引的使用非常糟糕，除非有前缀。我已经看到一个简单的正则表达式杀死了很多 mongodb 服务器，所以我知道它是多么糟糕。

我确实同意其他所有人的观点，尽管您应该真正研究外部 FTS 技术。我个人很喜欢 Sphinx：[http](http://sphinxsearch.com/) ://sphinxsearch.com/ ，因为它的速度、可扩展性和灵活性。但是，我使用了其他搜索技术，例如 Solr，它们都非常好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T22:00:04.483

只想为[Elastic Search](http://www.elasticsearch.org)添加一个插件。他们有大量的[客户端库](http://www.elasticsearch.org/guide/appendix/clients.html)，包括几个用于 python 的。

Solr 和 ElasticSearch 都是基于 Apache Lucene 构建的，但 ElasticSearch 相对于 Solr、IMO 有一些优势，首先是它使用 JSON 而不是 XML。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T22:42:38.850

对于 mongo db 字段的简单正则表达式搜索，您可以使用`find`查询`"$regex"`表达式。

在 pymongo 那将是`db.your_collection.find({"description": {"$regex": "<insert regex here>"}})`.

这会让你开始。正如其他人所说，MongoDB 不一定喜欢你这样打败它。您可能需要考虑更强大的解决方案来进行大量搜索。

**请考虑在您的数据库中进行正则表达式搜索的性能影响。**

在此处阅读 MongoDB 参考资料[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-21T10:05:49.313

mongo 3.0+：只需在带有短语的字段上使用文本索引。 [https://docs.mongodb.org/v3.0/core/index-text/](https://docs.mongodb.org/v3.0/core/index-text/)

# windows - 如何使用我的 Windows 笔记本电脑重命名数十个文件中的变量？

> ID：12432458
> 
> 赞同：0
> 
> 时间：2012-09-14T21:51:50.517
> 
> 标签：windows, rename

我想使用我的 Windows 7 笔记本电脑执行以下操作。我有一个项目目录。我想在目录中的所有文件和所有子目录中的所有文件中将变量 MY_APP 重命名为 SOME_OTHER_APP。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:55:12.873

如果您的 IDE 支持重构，只需使用它来重命名变量。大多数现代 IDE 都支持这一点。

如果没有，只需对目录中的所有文件进行搜索和替换。这仅在您的原始变量名称不是在其他上下文中的代码中常见的名称时才有效（例如，如果变量是“i”并且您也有许多“i”局部变量）。

# windows - 计划任务登录重复

> ID：12432463
> 
> 赞同：2
> 
> 时间：2012-09-14T21:52:34.817
> 
> 标签：windows, command-line, scheduled-tasks

我需要设置一个 Windows 计划任务，该任务在登录时运行并以给定的时间间隔重复（例如，对于这种情况，每小时一次）。

基本上，我想通过命令行执行此操作：[https ://dl.dropbox.com/u/19514611/Capture.PNG](https://dl.dropbox.com/u/19514611/Capture.PNG)

微软的 schtasks.exe 页面（在这里找到：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb736357%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb736357%28v=vs.85%29.aspx)）似乎暗示你不能设置任何通过命令行重复 ONLOGON 事件，但可以通过向导。这是准确的吗？

编辑：

经过进一步研究，我发现我可以将此配置导出为 XML 并使用 xml 构建任务。这是我应该做的吗？它将需要一些东西来解析并为每个用户生成一个新的 xml 文件（不太理想），我宁愿通过命令行来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-17T20:33:47.137

我意识到这个线程很旧，但最近遇到了同样的问题。诀窍是在初始创建命令之后运行更改命令。以下将任务更改为每 1 分钟运行一次。

```
SCHTASKS.exe /Create /SC ONLOGON /TN "Your Task Name" /TR "c:\path\executableoftask.exe" /RU SomeUser /RP SomePassword

SCHTASKS.exe /Change /RI 1 /TN "Your Task Name" /RU SomeUser /RP SomePassword 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T05:00:32.130

```
SCHTASKS /CREATE /U username /P password /SC ONLOGON /TN "Your Task Name" /TR c:\path\executableoftask.exe /RI HOURLY 
```

# javascript - 下载前通知 Safari 扩展

> ID：12432470
> 
> 赞同：1
> 
> 时间：2012-09-14T21:53:04.943
> 
> 标签：javascript, dom-events, safari-extension

我正在开发 Safari 扩展程序，我希望在出现下载窗口之前通知它。由于没有下载事件，我想我必须处理响应标头，但我也无法访问它们。我想知道这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:15:16.083

根据我修补 Safari 和 Chrome 扩展的有限经验，我相信您需要监听一个页面来触发这些事件中的一个（或两个）：`beforeLoad`和`beforeNavigate`. [关于阻止内容](https://developer.apple.com/library/safari/#documentation/Tools/Conceptual/SafariExtensionGuide/MessagesandProxies/MessagesandProxies.html#//apple_ref/doc/uid/TP40009977-CH14-SW9)的部分对处理进行了`beforeLoad`很好的描述，并[在此处](https://developer.apple.com/library/safari/#documentation/Extensions/Reference/SafariBeforeNavigateEventClassRef/SafariBeforeNavigateEvent.html#//apple_ref/doc/uid/TP40010860)进行了描述。`beforeNavigate`

对于这些事件中的任何一个，您都需要确定相关 URL 是下载文件还是普通 Web 文件。我怀疑您可以快速检查常见的下载文件类型，例如 .zip、.mp3 等，但唯一可以确定的方法可能是执行您自己的简短 HTTP 请求并分析响应，正如您在问题中指出的那样.

警告：没有用于检测下载的 API，因为扩展几乎无法控制用户计算机上的文件。这意味着下载通常应该不在扩展的范围内，而是由平台原生应用程序负责。

# python - 从 C 线程调用 Python 代码

> ID：12432471
> 
> 赞同：10
> 
> 时间：2012-09-14T21:53:10.773
> 
> 标签：python, c, multithreading, python-3.x, cpython

当从 C（或 C++）线程调用 Python 代码时，我对如何确保线程安全感到非常困惑。

[Python 文档](http://docs.python.org/c-api/init.html#non-python-created-threads)似乎在说这样做的惯用语是：

```
PyGILState_STATE gstate;
gstate = PyGILState_Ensure();

/* Perform Python actions here. */
result = CallSomeFunction();
/* evaluate result or handle exception */

/* Release the thread. No Python API allowed beyond this point. */
PyGILState_Release(gstate); 
```

事实上，这个[stackoverflow 的答案](https://stackoverflow.com/a/4975906/469408)似乎也证实了这一点。但是一位评论者（享有很高的声誉）却说不然。评论者说你应该使用`PyEval_RestoreThread()`/ `PyEval_SaveThread()`。

文档似乎证实了这一点：

```
PyThreadState* PyEval_SaveThread()

Release the global interpreter lock (if it has been created and 
thread support is enabled) and reset the thread state to NULL, 
returning the previous thread state (which is not NULL). If the lock 
has been created, the current thread must have acquired it. (This 
function is available even when thread support is disabled at compile 
time.)

void PyEval_RestoreThread(PyThreadState *tstate)

Acquire the global interpreter lock (if it has been created and thread 
support is enabled) and set the thread state to tstate, which must not 
be NULL. If the lock has been created, the current thread must not have 
acquired it, otherwise deadlock ensues. (This function is available even 
when thread support is disabled at compile time.) 
```

文档描述这一点的方式，似乎`PyEval_RestoreThread()`/`PyEval_SaveThread()`基本上是一个互斥锁/解锁习语。因此，在从 C 调用任何 Python 代码之前，您首先需要锁定 GIL，然后再解锁它，这是有道理的。

那么它是哪一个？从 C 调用 Python 代码时，我应该使用：

`PyGILState_Ensure()/PyGILState_Release()`

**或者**

`PyEval_RestoreThread/PyEval_SaveThread`?

真正的区别是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T22:24:43.320

首先，您几乎不想调用`PyEval_RestoreThread`/ `PyEval_SaveThread`。相反，您想调用包装宏`Py_BEGIN_ALLOW_THREADS`/ `Py_END_ALLOW_THREADS`。该[文档](http://docs.python.org/c-api/init.html#releasing-the-gil-from-extension-code)是为这些宏编写的，这就是您找不到它的原因。

无论如何，无论哪种方式，您都不要使用线程函数/宏来获取 GIL；获得 GIL 后，您可以使用它们临时释放 GIL。

那么，你为什么要这样做呢？好吧，在简单的情况下，您不会；你只需要`Ensure`/ `Release`。但有时您需要保留 Python 线程状态直到稍后，但不需要保留 GIL（甚至明确不需要*保留*GIL，以允许其他线程继续运行，以便它可以向您发出信号）。正如文档所解释的，最常见的原因是执行文件 I/O 或大量 CPU 密集型计算。

最后，在任何情况下您都想调用函数而不是宏？是的，如果你想访问隐藏的 PyThreadState。如果你想不出一个你可能想要的原因，你可能没有。

# android - 关闭片段时删除操作栏菜单项

> ID：12432481
> 
> 赞同：2
> 
> 时间：2012-09-14T21:54:39.793
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

我正在使用本页示例部分的代码[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

在横向模式下，活动并排显示两个片段，并且在旋转时，它会启动一个包含“详细”片段的新活动。

问题是，如果我从细节片段向操作栏添加一个菜单项，然后将屏幕旋转到纵向以在新活动中启动细节片段然后退出活动，即使提供菜单的片段仍然显示菜单项项目已被删除。

我尝试在 onResume 中使用 FragmentTransaction 删除详细信息片段，然后调用 invalidateOptionsMenu()，但它不会删除菜单项。

我正在使用 ActionBarSherlock，我也尝试过 supportInvalidateOptionsMenu()

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:58:28.210

我以为我正在删除片段，但我没有。删除onResume中的片段后，我的问题就解决了。

# gridview - 尝试将文本框中的值分配给 devexpress gridview

> ID：12432483
> 
> 赞同：0
> 
> 时间：2012-09-14T21:54:43.070
> 
> 标签：gridview, textbox, devexpress

我有一个文本框和一个按钮。单击按钮时，我想将该值分配给gridview。

但是，我不想通过存储过程或对数据库表的任何更新来执行此操作..我只想要前端，然后单击将值发送到数据库的打印按钮。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:57:47.863

您可以创建一个临时表并在该表中定义列。

将网格绑定到该表。

单击按钮后，您可以将值添加到现有的值表并再次绑定网格。

如果您需要更多帮助，请告诉我。

谢谢。

# javascript - 重定向后android javascript将不起作用

> ID：12432489
> 
> 赞同：2
> 
> 时间：2012-09-14T21:55:11.303
> 
> 标签：javascript, android, redirect, webview

我`mWebView.addJavascriptInterface(this, XXX)`用来让java输入代码herescript在webview上执行。

当我正在浏览的网页发送重定向时，问题就出现了。我能够捕获它并在同一个 web 视图中显示新的 URL，但 javascript 将不起作用。

我发现的唯一解决方案是创建一个新意图，在新活动上加载新页面。

```
public class QBrowser extends Activity {

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.qbrowser_main);
    mWebView = (WebView) findViewById(R.id.webview);

    webSettings.setJavaScriptEnabled(true);

    mWebView.setWebChromeClient(new MyWebChromeClient());

    mWebView.setWebViewClient(new WebViewClient() {   
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
                    // BEGIN: THE WORK AROUND I DONT LIKE
            Intent intent = new Intent("com.bcnquark.client.qbrowser.QBROWSER");
            intent.putExtra("URL", url);
            startActivity(intent);
            finish();
            // END:THE WORK AROUND I DONT LIKE
            return true;
        }});

    Intent intent = getIntent();
    String url = intent.getStringExtra("URL");
        mWebView.addJavascriptInterface(this, "XXXX");
    }

    mWebView.loadUrl(url);
}
} 
```

# android - 安卓键盘记录器

> ID：12432498
> 
> 赞同：3
> 
> 时间：2012-09-14T21:56:32.380
> 
> 标签：android, keylogger

我正在为 Android 编写考试应用程序。该应用程序的功能之一是捕获用户键入的所有内容的键盘记录器。我不明白如何实现键盘记录器的功能，如果可以捕获用户键入的所有内容，不幸的是我在网络中发现的代码很少。谁能帮我？感谢关注

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T22:09:17.047

我可能错了，但我相信您的应用程序只能捕获在应用程序内部进行的那些输入。我不认为 Android 让您能够从您的应用程序中捕获所有应用程序中的所有关键事件。因此，您只能获取那些特别针对您的应用程序的关键事件。

**编辑：**我在互联网上环顾四周，似乎有一些*不道德*的做法。您可以创建**自己的自定义键盘**并从那里捕获输入。实现这一点的另一种方法是**`service`**在后台运行一个**`KeyListener`**活动来捕获关键事件。

# c++ - 函数模板中的奇怪错误

> ID：12432509
> 
> 赞同：-1
> 
> 时间：2012-09-14T21:57:45.527
> 
> 标签：c++, templates

我正在学习 C++ 中的函数模板，所以我编写了一个简单的函数来删除重复项。但是编译器会抛出以下错误。

`removeDup is not a function or static data member`

```
using namespace std;  
template <typename T>  
void removeDup(std::vector<T>& vec)  
{  
        std::sort(vec.begin(), vec.end());  
        vec.erase(std::unique(vec.begin(), vec.end()), vec.end());  
} 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T22:06:32.300

来自编译器的错误通常是相关的。例如，如果您不匹配大括号，可能会导致许多不在范围内的标识符。很多时候，第一个是根本原因，很容易忽视其余的。在这种情况下，重要的是后面的错误，而第一个错误远非显而易见。

未能包含堆栈使 removeDup 让编译器感到困惑，它首先抱怨 removeDup。

添加后的代码对我来说编译得很好：

```
#include <vector>
#include <algorithm> 
```

前`using namespace std;`

没有这些包括，这是我从 gcc 4.2 (silly Mac) 得到的错误：

```
template.cpp:6: error: variable or field ‘removeDup’ declared void
template.cpp:6: error: ‘vector’ is not a member of ‘std’
template.cpp:6: error: expected primary-expression before ‘&gt;’ token
template.cpp:6: error: ‘vec’ was not declared in this scope 
```

第一行与以下内容非常接近：

```
removeDup is not a function or static data member 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T22:11:17.887

这对我来说很好：

```
#include <vector>
#include <algorithm>
#include <iostream>

using namespace std;  
template <typename T>  
void removeDup(std::vector<T>& vec)  
{  
        std::sort(vec.begin(), vec.end());  
        vec.erase(std::unique(vec.begin(), vec.end()), vec.end());  
}  

int main()
{

    int values[] = {1,2,3,3,3};
    vector<int> ints(values, values + 5);
    removeDup(ints);

    for (vector<int>::iterator it=ints.begin(); it!=ints.end(); ++it)
        cout << " " << *it;
    return 0;
}

$ g++ c.cpp
$ ./a.out
1 2 3 
```

# xml - 是否可以在布局文件中指定商店视图

> ID：12432511
> 
> 赞同：0
> 
> 时间：2012-09-14T21:57:49.120
> 
> 标签：xml, magento, layout

我有一个商店的意见：英语，拉脱维亚语。

我想对两个商店视图做出反应，在一个 local.xml 中为每个视图调用一个不同的模板

像这样

```
<?xml version="1.0"?>
<layout version="0.1.0">
    <English>
        <!-- do stuff... -->
    </English>
    <Latvian>
        <!-- do stuff... -->
    </Latvian>
</layout> 
```

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:12:55.087

更好的方法是为两个商店视图创建两个单独的主题。`System->Design`然后通过或 through将这些分配给商店视图`System-> Configuration-> Design->Themes`。这样，您可能拥有两个`layout.xml`文件，并且可以更好地控制皮肤等。

但是，如果您只想单独`layout.xml`使用该`System-> Configuration-> Design->Themes->Layout`选项。

# sql-server - T-SQL - 将日期时间更改为日期数据类型？

> ID：12432515
> 
> 赞同：15
> 
> 时间：2012-09-14T21:58:32.343
> 
> 标签：sql-server, tsql

我在使用数据类型`BirthDate`的表中有一个列。`datetime`目前，这些值类似于 format `1987-12-30 00:00:00.000`。

我想更新该表的所有行，将它们更改为以下`date`数据类型的格式：`1987-12-30`

我可以运行 SELECT ...

```
SELECT CONVERT(date, BirthDate) FROM CUSTOMERLIST 
```

但这只是影响显示。我希望它更新整个列并更改该属性的数据类型。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-14T22:00:43.037

您将需要到[`ALTER`](http://msdn.microsoft.com/en-us/library/ms190273.aspx)表：

```
ALTER TABLE CUSTOMERLIST ALTER COLUMN BirthDate date not null 
```

请参阅[带有演示的 Sql Fiddle](http://sqlfiddle.com/#!3/366a8/1)

# javascript - Jquery/Js - 在Repeater的Gridview中查找列 - 隐藏它们

> ID：12432518
> 
> 赞同：0
> 
> 时间：2012-09-14T21:58:38.937
> 
> 标签：javascript, jquery, .net, asprepeater

我不确定是否要从这个开始，所以如果您需要更多信息，请询问。

我有一个 .aspx 页面。它上面有一个asp:repeater，并且在那个repeater 中有一个asp:gridview。

每个中继器显示不同产品的详细信息。然后，该中继器中的每个网格视图都有 x 列来显示名称、价格等。列数各不相同，但开头有 4 个，总是相同的。

我在后面的代码中获得了这 4 列的名称，并将它们添加到页面顶部的“选择”（下拉）中。

这个想法是在这 4 列中一次只显示 1 列，即在下拉列表中选择的那一个。

让我们假设我的老板是一个“非常灵活的人”并且不想改变页面的结构，即转发器和网格视图，并希望我使用一些 js/jquery 来完成这个（客户端 - 即不是另一个调用db.——所有信息都位于页面上，在客户端上显示或隐藏）。

**我尝试过的......**

```
var singleValues = document.getElementById('<%= deliveryoption.ClientID %>').value; 
```

从下拉列表中获取值——这部分有效。注意：将使用此值与列标题（位于“th”标签中）进行比较。

注意：整个表有一个 CSS 类 gridDetails 和列 td 和标题是 th - 显然......：P

现在....以下似乎有效

* * *

```
$('.gridDetails td').click(function () {

var singleValues = document.getElementById('<%= deliveryoption.ClientID %>').value;

var col = $(this).prevAll().length; //$(this).index; // does the same...?

var header = $(this).parents('table').find('th:nth-child(' + (col + 1) + ')');

alert(header.text());  // for testing ....

var rowIndex = col + 1;

if (header.text() == singleValues) {

$('td:nth-child(' + rowIndex + '), th:nth-child(' + rowIndex + ')').hide();

} 
```

* * *

问题是它发生`click`在桌子上。

How can I change this to be on the event of `onchange` for the drop down. I know 'how' to do that in the code to bind to the drop down lol, what I mean is, the reference to `this` in the code is then the drop down, which won't find the column etc....

Just to be clear: - there is a runat=server div around the outside - then there is a repeater - then 1 or more gridviews inside the repeater

I have read about the `.proxy()` in jquery but I don't think this will help in this case...

I think that is it... let me know if I missed anything...

Thanks in advance

Cheers Robin

edit

The page

```
<div>
<select name="deliveryoption" id="deliveryoption" runat="server" onchange="test()">

</select>
</div>
<div id="outsidediv" runat="server" style="margin: 5px">
<asp:Repeater ID="SizeSelectionRepeater" runat="server" OnItemDataBound="SizeSelectionRepeater_ItemDataBound">
    <ItemTemplate>
        <table cellpadding="3">
            <tr>
                <td>
                    <asp:Label ID="LabelProductCode" runat="server"></asp:Label>
                </td>
                <td>
                    <asp:Label ID="LabelPackageQuantity" runat="server"></asp:Label>
                </td>
            </tr>
        </table>
        <asp:Panel ID="SizeSelectionPanel" runat="server">
        </asp:Panel>
        <asp:GridView ID="SizeSelectionGridView" runat="server" CssClass="gridDetails" OnRowDataBound="SizeSelectionGridView_RowDataBound"
            AutoGenerateColumns="false" Width="100%">
            <Columns>
                <asp:TemplateField HeaderText="Price">
                    <ItemTemplate>
                        <div style="vertical-align: middle;">
                            <asp:Label ID="PriceLabelSpecial" runat="server" Width="30%" Style="display: inline;"></asp:Label>
                            <asp:Label ID="PriceLabel" runat="server"></asp:Label>
                        </div>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Add to Cart">
                    <ItemTemplate>
                        <table width="300px" style="border-style: none;">
                            <tr>
                                <td valign="middle" style="border-style: none;">
                                    <asp:LinkButton ID="ButtonAdd" runat="server" Width="120px" Height="22px" 
                                    CssClass="buynow">Buy now</asp:LinkButton>
                                </td>
                            </tr>
                        </table>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
        <br />
    </ItemTemplate>
</asp:Repeater>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:48:40.020

As I understand, you can just do something like this:

```
$('#<%= deliveryoption.ClientID %>').change(function(){
    var singleValues = $(this).val();
    var thOfColumnThatShouldBeHidden = $(".gridDetails th:contains('" + singleValues + "')");
}) 
```

Everything else you already have. Now you can find `col` using `thOfColumnThatShouldBeHidden` the same way you do it now, but without using `$(this)` To find required TH I'm using [`:contains()`](http://api.jquery.com/contains-selector/) selector

# c++ - 如何使用进度对话框在 wxWidgets 中下载文件？

> ID：12432519
> 
> 赞同：0
> 
> 时间：2012-09-14T21:59:09.607
> 
> 标签：c++, dialog, download, progress-bar, wxwidgets

我这里有一些代码可以生成 wxProgressDialog 并从 Internet 下载文件，但我不知道如何在文件下载时更新进度条。我一直在寻找这方面的文档，但令人惊讶的是，我找不到与我想要完成的任务类似的东西。

```
void Downloader::Download(void)
{
    wxProgressDialog dlgProgress(_T("Downloading..."),
                                 _T("Please wait while your file downloads."));

    wxURL dl(Url);
    if (dl.GetError() == wxURL_NOERR)
    {
        wxInputStream *in = dl.GetInputStream();
        if (in && in->IsOk())
        {
            wxFFileOutputStream out(mPath);
            in->Read(out);
        }
        delete in;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T10:54:38.490

查看 wxWidgets 发行版中的“对话框”示例，您会发现可以调用[Update()](http://docs.wxwidgets.org/trunk/classwx_generic_progress_dialog.html#a1d542cea96c531d85c32d6612bd55a02)或[Pulse()](http://docs.wxwidgets.org/trunk/classwx_generic_progress_dialog.html#ab5ecf227eebaa1aadb5f5c553e4a4ee5)来更新对话框。

# php - MySQL 和 PHP 按首字母排序地址，而不是数字

> ID：12432520
> 
> 赞同：0
> 
> 时间：2012-09-14T21:59:22.700
> 
> 标签：php, mysql

好的，所以我为一家房地产公司制作了一个 MySQL 数据库，并让它运行并显示结果。现在我试图让结果以 ASC 顺序显示，但是在编写时，

```
`$query="SELECT * FROM info ORDER BY Address ASC"; ` 
```

它按地址中的数字排序，因此 100 Zebra Street 位于 200 Apple Way 之前，这是我预期的。但我想要的结果是查询按街道名称中的第一个字母排序。

有没有一种简单的方法来实现这一点，或者我应该将字段分开，这样一列是数字，下一列是街道名称？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T22:01:50.520

如果可能，我建议您将列分开。如果您打算处理地址的某些部分，那么从逻辑上讲，您应该将其分解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:10:33.670

是的，这可以实现。此处概述了解决方案：

[stackoverflow.com/questions/3011288/order-by-letters-and-not-numbers-of-a-field](https://stackoverflow.com/questions/3011288/order-by-letters-and-not-numbers-of-a-field)

尽管将其拆分为多个列更实用且更有效。

# powershell - 如何在powershell中编写“start /b /min FeedDemon.exe”

> ID：12432525
> 
> 赞同：2
> 
> 时间：2012-09-14T21:59:40.393
> 
> 标签：powershell

我将如何在 powershell 中编写以下 windows 命令？

```
start /b /min FeedDemon.exe 
```

当我在命令行上运行它时，它可以很好地最小化窗口并且在启动脚本中运行良好。但是在powershell中，当我尝试时，我无法得到相同的结果：

```
start-process -FilePath FeedDemon.exe -WindowStyle Minimized 
```

*我仍在学习 powershell（和一般的 Windows），所以请保持温和。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T22:20:11.897

`/b`参数 to`start`表示程序应该在不弹出新控制台窗口的情况下运行。直接转换为 powershell 将是

```
Start-Process FeedDemon.exe -NoNewWindow -WindowStyle Minimized 
```

如果这不起作用，只需将其称为 Powershell 中的老式方式

```
cmd.exe /c start /b /min FeedDemon.exe 
```

# java - Spring aop java.lang.NoClassDefFoundError

> ID：12432526
> 
> 赞同：7
> 
> 时间：2012-09-14T21:59:50.277
> 
> 标签：java, spring, aop, noclassdeffounderror

我的 aop 配置有问题。这是我的 spring xml 配置的一部分：

```
<bean id="conLogger" class="com.pomkine.pXMPP.connection_service.ConnectionLogger"/>

<aop:config>
    <aop:aspect ref="conLogger">
        <aop:pointcut id="connect"
                      expression= "execution(* com.pomkine.pXMPP.connection_service.connectionManager.connect(..))" />
        <aop:after pointcut-ref="connect"
                   method="connected"/>
    </aop:aspect>
</aop:config> 
```

这是我的主要方法：

```
public static void main (String [] args) {
    ApplicationContext ac = new ClassPathXmlApplicationContext("com/pomkine/pXMPP/connection_service/connection-manager.xml");
    connectionManager cm=(connectionManager)ac.getBean("connectionManager");
    try {
        cm.connect();
        cm.disconnect();
      } catch (XMPPException e) {
        e.printStackTrace();
    }

} 
```

当我运行它时，我得到了 NoClassDefFoundError 异常。

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'connect': Instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: org/aspectj/weaver/reflect/ReflectionWorld$ReflectionWorldException 
```

无法弄清楚问题是什么。将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-14T22:05:43.883

这个问题：[Missing Spring AOP library in STS](https://stackoverflow.com/questions/6475313/new-to-spring-missing-aop-libraries-in-sts-help)似乎解决了一个类似的问题（缺少库），也是这个[Spring 论坛线程](http://forum.springsource.org/showthread.php?43141-AspectJ-And-Spring)中的一个问题。

你的类路径上有提到的罐子吗？

```
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>2.2</version>
</dependency>
<dependency>  
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>1.6.11</version>
</dependency> 
```

# java - 如何为 Java 7 中的现有国家代码向 java.util.Currency 添加新货币？

> ID：12432527
> 
> 赞同：10
> 
> 时间：2012-09-14T21:59:52.087
> 
> 标签：java, jvm, currency, java-7

例如，中国货币有`ISO 4217`代码`CNY`。由于该货币的全球自由交易受到限制，因此还有第二种“离岸”货币等值，称为`CNH`. 维基百科对这一切有一些[总结](http://en.wikipedia.org/wiki/Renminbi#CNH)。

在`Java 7`中，有一种[方法可以更新](http://docs.oracle.com/javase/7/docs/technotes/guides/intl/enhancements.7.html#currency)`ISO 4217`JVM 附带的三字母代码集。但是，它不能用于向现有国家代码添加单独的货币代码：它将替换`CNY`为`CNH`，这对我的目的没有好处。

如何在不覆盖的情况下将`CNH`（不在`ISO 4217`列表中）添加到可用货币集合中？ `Java 7``CNY`

换句话说，我怎样才能获得一个国家的多个货币代码？

注意这个问题：[How do I add the new currency code to Java?](https://stackoverflow.com/questions/9982537/how-do-i-add-the-new-currency-code-to-java) 被*询问并回答*了**Java 6**。但是替换策略`java.util.CurrencyData`不起作用，因为该文件不再存在。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T21:59:52.087

这里的关键是[作为 Java 7 一部分的更改，](https://blogs.oracle.com/naotoj/entry/currency_enhancements_in_jdk71)允许更新货币列表，而无需通过替换名为 .jar 的文件来重建 rt.jar `currency.data`。使用这种方法而不是`currency.properties`覆盖方法，您可以添加新的货币代码，而不会影响来自同一国家的其他货币代码。

剩下没有说的是如何实际构建一个新的`currency.data`. 该文件是从名为 的文件中生成的，该文件`CurrencyData.properties`可以在 java/util 中的 OpenJDK 源代码中找到。

我所做的是复制`CurrencyData.properties`在[OpenJDK 源代码](http://download.java.net/openjdk/jdk7/)( `openjdk\jdk\src\share\classes\java\util`) 中找到的内容，并更改了以下行：

```
BZD084-CAD124-CDF976-CHF756-CLF990-CLP152-CNY156-COP170-CRC188-CSD891-CUP192-\ 
```

至

```
BZD084-CAD124-CDF976-CHF756-CLF990-CLP152-CNH156-CNY156-COP170-CRC188-CSD891-CUP192-\ 
```

`GenerateCurrencyData.java`然后我在源代码分发中抓取了文件`openjdk\jdk\make\tools\src\build\tools\generatecurrencydata`。此实用程序以与 CurrencyData.properties 相同的格式从 System.In 获取输入，并将其转换为 currency.data 文件。我做了一点改动，使它使用 FileInputStream 而不是 System.In：

```
currencyData.load(System.in); 
```

至

```
currencyData.load(new FileInputStream(fileName)); 
```

在您编辑的 CurrencyData.properties 文件上运行它，并将原始 .data 文件放在安全的地方后，将生成的 currency.data 文件放入您的 JRE\lib 目录，您现在可以运行使用 .data 的代码`Currency.getInstance("CNH")`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-25T12:49:16.773

对于@sharakan 的回答：您可能还需要添加新更改的货币，在我的情况下为 BYN

BY=BYR;2016-07-01-00-00-00;BYN

格式：OLD_CUR;DATE_OF_CHANGE;NEW_CUR

希望它会帮助某人。

# xml - 定义列表创建

> ID：12432529
> 
> 赞同：0
> 
> 时间：2012-09-14T22:00:01.227
> 
> 标签：xml, xslt

尝试使用 XSLT 在我的 XML 中创建定义列表。

这是我的输入的示例：

```
<p>

    <i>word1</i> definition text here <br />
    <br />
       <i>word1</i> definition text here <br />
    <br />
       <i>word1</i> definition text here <br />
    <br />
       <i>word1</i> definition text here <br />
    <br />
       <i>word1</i> definition text here <br />

</p> 
```

上述 XML 中的“此处的定义文本”是我想要标记并包含在输出中的未标记文本节点。我想要的输出说明如下：

```
<dl>
   <di>
      <dt>word1</dt>
      <dd>definition text here<dd>
   <di>
<dl> 
```

到目前为止，我的模板不起作用：

```
<xsl:template match="p">

        <dl>
             <dt>
                <xsl:value-of select="./i/node()"/>
            </dt>

             <dd>
              <xsl:sequence select="./text()" />
            </dd>
        </dl>

    </xsl:template> 
```

任何人都知道一个快速简便的方法来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:24:55.947

You need to emit one `di` element for each `i` in the input, not one for each `p` in the input. So first of all, move your code to a template for `i`.

In your input, each `i` is immediately followed by a single text node containing the text to be tagged as `dd`. This has to be embedded within the `di` element, so it needs to be handled within the template for `i`, something like this (not tested):

```
<xsl:template match='i'>
  <di>
    <dt><xsl:value-of select="."/></dt>
    <dd><xsl:value-of select="following-sibling::text()[1]"/></dd>
  </di>
</xsl:template>
<xsl:template match="p/text() | p/br"/> 
```

If some definitions have embedded markup, you'll need a more complicated way to populate the `dd` element, but sufficient unto the day is the evil thereof. You asked for something quick and easy.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T02:28:27.337

**This transformation**:

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="p">
     <dl>
       <di><xsl:apply-templates/></di>
     </dl>
 </xsl:template>

 <xsl:template match="i">
  <dt><xsl:value-of select="."/></dt>
 </xsl:template>

 <xsl:template match="text()[preceding-sibling::*[1][self::i]]">
  <dd><xsl:value-of select="normalize-space()"/></dd>
 </xsl:template>
</xsl:stylesheet> 
```

**when applied on the provided XML document** (it was severely malformed -- corrected here):

```
<p>
    <i>word1</i> definition text here 
    <br />
    <br />
    <i>word2</i> definition text here
    <br />
    <br />
    <i>word3</i> definition text here
    <br />
    <br />
    <i>word4</i> definition text here
    <br />
    <br />
    <i>word5</i> definition text here
    <br />
</p> 
```

**produces the wanted, correct result**:

```
<dl>
   <di>
      <dt>word1</dt>
      <dd>definition text here</dd>
      <dt>word2</dt>
      <dd>definition text here</dd>
      <dt>word3</dt>
      <dd>definition text here</dd>
      <dt>word4</dt>
      <dd>definition text here</dd>
      <dt>word5</dt>
      <dd>definition text here</dd>
   </di>
</dl> 
```

**and it displays in the browser as**:

word1

definition text here

word2

definition text here

word3

definition text here

word4

definition text here

word5

definition text here

# android - Android 不会在运行时崩溃时转储错误跟踪

> ID：12432531
> 
> 赞同：0
> 
> 时间：2012-09-14T22:00:05.517
> 
> 标签：android, eclipse, runtime-error, android-logcat

我可以在 LogCat 中看到运行时错误跟踪的唯一方法是当我编辑/保存对代码的更改并且 Eclipse 弹出窗口询问我是否要断开设备连接时。

你如何让它在崩溃时默认显示跟踪？（事实上​​，我看到的只是空白的缺少源代码页面，它试图向我展示不存在的 Android 源代码）

编辑：此示例在实际设备上。使用模拟器时，我根本找不到查看错误跟踪的方法

解决方法：现在我的解决方法是崩溃，我执行快捷键+退格键+ctrl-s 并提示“热代码交换失败”对话框，然后单击“断开连接”，运行时错误最终显示在 LogCat 中。此外，我更加小心将异常跟踪转储到我的 Try/Catches 中的 LogCat

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:52:19.437

为了在 Eclipse 中打开 LogCat 或任何各种窗口，点击左下角的图标并选择您需要的任何一个。然后，您可以在永久独立窗口中的屏幕上实时观看内部运作。

# scala - 尝试在 Ubuntu 10.04 上安装 Scala 时出现 libjansi 问题

> ID：12432538
> 
> 赞同：2
> 
> 时间：2012-09-14T22:00:51.687
> 
> 标签：scala, ubuntu-10.04, apt-get

当我做

```
apt-get install scala 
```

> 以下软件包具有未满足的依赖关系。scala：取决于：libjansi-java，但它不可安装 E：损坏的包

虽然当我做 apt-cache show scala 我得到

> 架构：全部版本：2.7.7.dfsg-4ubuntu1 依赖：scala-library (= 2.7.7.dfsg-4ubuntu1), openjdk-6-jre | java6-runtime 文件名：pool/universe/s/scala/scala_2.7.7.dfsg-4ubuntu1_all.deb

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T06:23:44.627

这似乎是默认存储库中包含的非常古老的 Scala。

按照这些说明安装带有所有好东西[的 Typesafe Stack 。](http://typesafe.com/stack/download#deb)这是 Scala 和相关工具的官方发行版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T14:17:11.673

你可以试试：

```
sudo apt-get -f install 
```

没有任何包名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-19T04:58:40.663

scala：取决于：libjansi-java，但未安装如果您最近安装了 Scala，并且 Java 后台处理正在运行，请等待 10-20 分钟并使用

## sudo apt-get 更新

在此时间间隔之后，您可以尝试安装任何您希望自动解决此依赖性问题的东西。其作品

# vb.net - 使用 itemDatabound 的中继器内的下拉列表 findbyvalue

> ID：12432541
> 
> 赞同：0
> 
> 时间：2012-09-14T22:01:12.643
> 
> 标签：vb.net, drop-down-menu, repeater, itemdatabound

我正在尝试设置一个中继器，该中继器具有下拉菜单，这些下拉菜单的值是在使用 linq 从数据库填充的数组绑定数据时选择的。

我遇到的问题是每个下拉列表在渲染时都具有相同的选定值，这也恰好是数组中的最后一个值。我需要每个选定的值与它的标签相对应，该标签存储在先前提交的表中。

func.ConfigurePastClientSetting(label.Text, krmid) 返回一个值，该值等于 ddl 内部的值之一，该值已从过去的表单提交存储在数据库中。

```
Private Sub rptDropDownInfo_ItemDataBound(sender As Object, 
                e As System.Web.UI.WebControls.RepeaterItemEventArgs) _
                Handles rptDropDownInfo.ItemDataBound
Dim selected As New List(Of String)
If e.Item.ItemType = ListItemType.Item Or e.Item.ItemType = ListItemType.AlternatingItem Then
        Dim ddl As DropDownList = e.Item.FindControl("ddlEloquaValues")
        Dim column As EbmsColumnLabel = DirectCast(e.Item.DataItem, EbmsColumnLabel)
        ddl.Items.AddRange(ddlELQ.Items.OfType(Of ListItem)().ToArray())
        ddl.ClearSelection()
        ddl.Items.FindByValue(func.ConfigurePastClientSetting(column.displayname, krmid)).Selected = True
selected.Add(ddl.SelectedItem.Value)
    End If
End Sub 
```

如果我删除 ddl.ClearSelection 我会得到一个“下拉列表错误中不能有多个选定值。这是标记：

```
 <asp:Repeater ID="rptDropDownInfo" runat="server">
                <HeaderTemplate><table><tr><td style="width:60px;padding-left:20px;">KRM</td><td></td><td>Eloqua</td></tr></table></HeaderTemplate>
                <ItemTemplate>
                <tr>
                    <asp:Label ID="lblColumnNames" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "DisplayName") %>'></asp:Label><td>map to</td>
                        <asp:DropDownList ID="ddlEloquaValues" runat="server">
                        </asp:DropDownList>
                    <td>
                        <asp:Label ID="lblWarningLabels" runat="server" Text=""></asp:Label></td></tr>
                </ItemTemplate>
                </asp:Repeater> 
```

我尝试检查 first(0) ddl.SelectedValue 并得到数组中的最后一项：

```
Private Sub Page_PreRender(sender As Object, e As System.EventArgs) Handles Me.PreRender
    If IsPostBack Then
        Dim ddl As DropDownList = rptDropDownInfo.Items(0).FindControl("ddlEloquaValues")
        Dim check = ddl.SelectedItem.Value
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:31:16.343

似乎您所有的 DDL 都共享相同的 ListItems 实例。

因此，在项目上设置 Selected=true 会为共享它的所有 DDL 选择它。这也是您在删除 ClearSelection 时遇到问题的原因

您应该创建新的 ListItems，例如让您的 Linq 查询通过 Select 实例化新的 ListItems，而不是返回现有的 ListItems）

希望这会有所帮助。

```
ddl.Items.AddRange(ddlELQ.Items.OfType(Of ListItem)().ToArray())
ddl.Items.FindByValue(func.ConfigurePastClientSetting(column.displayname, krmid)).Selected = True 
```

selected.Add(ddl.SelectedItem.Value)

应该是（对不起，C# 语法）：

```
ddl.Items.AddRange(ddlELQ.OfType<ListItem>().Select(li=>new ListItem(){Text = li.Text,Value = li.Value}).ToArray())
ddl.SelectedIndex = ddl.Items.IndexOf(ddl.Items.FindByValue(func.ConfigurePastClientSetting(column.displayname, krmid))); 
```

如果你想防止多重绑定，你应该删除 ClearSelection()，用 ddl.Items.Clear() 替换它。

# asp.net - Response.Redirect() 将 Response.RedirectLocation 设为 NULL

> ID：12432545
> 
> 赞同：1
> 
> 时间：2012-09-14T22:01:24.587
> 
> 标签：asp.net

我有一组 Asp.Net 应用程序，它们都共享一个通用的 HttpModule，其中包含如下代码：

```
public class MyModule : IHttpModule
{
    public void Dispose()
    {
    }
    public void Init( HttpApplication context )
    {
        context.Error += new EventHandler( context_Error );
    }
    private void context_Error( object sender, EventArgs e )
    {
        var lastError = HttpContext.Current.Server.GetLastError();
        doSomeStuffWithError(lastError);
        var response = HttpContext.Current.Response;
        var redirect = GetErrorRedirect(lastError);
        response.Redirect(redirect, true);
    }
} 
```

这对我的所有应用程序都很好，除了一个。在无法正常工作的情况下， response.Redirect(...) 似乎不起作用。Asp.Net 不是我期望的重定向，而是重定向到其标准错误页面。我检查了此应用程序的配置，并没有发现任何错误或与其他应用程序有显着差异。

在调查这个问题时，我用另外一行代码修改了错误处理程序，如下所示：

```
private void context_Error( object sender, EventArgs e )
{
    var lastError = HttpContext.Current.Server.GetLastError();
    doSomeStuffWithError(lastError);
    var response = HttpContext.Current.Response;
    var redirect = GetErrorRedirect(lastError); 
    //setting a break point here, i've verified that 'redirect' has a value in all cases
    response.Redirect(redirect, true);

    var wtf = response.RedirectLocation;
    //inspecting the value of 'wtf' here shows that it is null for one application, but equal to 'redirect' in all others.

} 
```

当我在“wtf”上设置断点时，我看到了一些奇怪的行为。对于有效的应用程序，wtf 包含与重定向相同的值。但是，对于我无法运行的应用程序，wtf 为空。

任何人对什么会导致 wtf 以这种方式为空有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T05:54:15.657

您正在使用的重载`Response.Redirect`将调用`Response.End`并抛出`ThreadAbortException`. 它在[文档](http://msdn.microsoft.com/en-us/library/a8wa7sdt%28v=vs.100%29.aspx)中这么说。因此，在其他应用程序中“它有效”这一事实很有趣，因为它不应该`var wtf = response.RedirectLocation;` 在调试会话期间执行，它为 null 也不足为奇，因为它可能有某种原因允许在调试期间执行该行。

此外，如果您将Web.config 中的[设置](http://msdn.microsoft.com/en-us/library/h0hfz6fc%28v=vs.100%29.aspx)`mode`设置为 On 或 RemoteOnly ，它当然会执行默认错误页面，除非您在重定向**之前**清除错误。这是设计使然。`<customErrors>`

 ****如果您在调用后**需要执行附加代码，请作为第二个参数`Response.Redirect`传递以避免调用并使用[清除错误](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.clearerror%28v=vs.100%29.aspx)。`false``Response.End``HttpContext.Current.ClearError()`

根据您的示例，我会像这样重写您的 HttpModule：

```
public class MyModule : IHttpModule
{
    public void Dispose()
    {
    }
    public void Init( HttpApplication context )
    {
        context.Error += new EventHandler( context_Error );
    }
    private void context_Error( object sender, EventArgs e )
    {
        var context = HttpContext.Current;
        var lastError = context.Server.GetLastError();

        doSomeStuffWithError(lastError);

        var response = context.Response;
        var redirect = GetErrorRedirect(lastError);

        context.ClearError();

        // pass true if execution must stop here
        response.Redirect(redirect, false);

        // do other stuff here if you pass false in redirect
    }
} 
```**

# xcode - xCode 3.2.6。音频单元编程。IIR 滤波器

> ID：12432550
> 
> 赞同：0
> 
> 时间：2012-09-14T22:02:21.150
> 
> 标签：xcode, audio, filter

我叫安东尼奥，来自意大利。
我正在尝试使用 xCode 3.2.6 创建一个音频单元，从 [这个链接](https://developer.apple.com/library/mac/#documentation/MusicAudio/Conceptual/AudioUnitProgrammingGuide/Tutorial-BuildingASimpleEffectUnitWithAGenericView/Tutorial-BuildingASimpleEffectUnitWithAGenericView.html#//apple_ref/doc/uid/TP40003278-CH5-SW4)的示例开始。
这是我的第一个 AU 项目，我没有其他示例可循。
我的项目包含一个 IIR 陷波滤波器。我制作的算法工作正常（我在 Matlab 上测试过），但 AU 不能正常工作（在 AU Lab 上测试过）。.mp3 文件听起来经过过滤，但与方波（我猜是耳朵）之类的东西重叠。
该噪声的频率似乎与 f0 参数成正比。
这是 .cpp 文件代码：

```
// Filtro.cpp

#include "Filtro.h"
#define pi  3.1415926535

//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

COMPONENT_ENTRY(Filtro)

//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//  Filtro::Filtro
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Filtro::Filtro (AudioUnit component) : AUEffectBase (component) {
    CreateElements ();  
    Globals () -> UseIndexedParameters (kNumberOfParameters);
    SetParameter (kParameter_Gain, kDefaultValue_Gain);
    SetParameter (kParameter_f0, kDefaultValue_f0);
    SetParameter (kParameter_Q, kDefaultValue_Q);

//    code for setting default values for the audio unit parameters

}

//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//  Filtro::GetParameterInfo
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

#pragma mark ____Parameters

ComponentResult Filtro::GetParameterInfo (
                                               AudioUnitScope          inScope,
                                               AudioUnitParameterID    inParameterID,
                                               AudioUnitParameterInfo  &outParameterInfo       
                                               ) {
    ComponentResult result = noErr;
    outParameterInfo.flags =    kAudioUnitParameterFlag_IsWritable        
    | kAudioUnitParameterFlag_IsReadable;
    if (inScope == kAudioUnitScope_Global) {                             
        switch (inParameterID) {
            case kParameter_Gain:                                      
                AUBase::FillInParameterName (
                                         outParameterInfo,
                                         kParamName_Gain,
                                         false
                                         );
            outParameterInfo.unit = kAudioUnitParameterUnit_Decibels;
            outParameterInfo.minValue = kMinimumValue_Gain;
            outParameterInfo.maxValue = kMaximumValue_Gain;
            outParameterInfo.defaultValue = kDefaultValue_Gain;
            break;
        case kParameter_f0:                                        // 9
            AUBase::FillInParameterName (
                                         outParameterInfo,
                                         kParamName_f0,
                                         false
                                         );
            outParameterInfo.unit = kAudioUnitParameterUnit_Hertz;
            outParameterInfo.minValue = kMinimumValue_f0;
            outParameterInfo.maxValue = kMaximumValue_f0;
            outParameterInfo.defaultValue = kDefaultValue_f0;
            outParameterInfo.flags |= kAudioUnitParameterFlag_DisplayLogarithmic;
            break;
        case kParameter_Q:                                        // 9
            AUBase::FillInParameterName (
                                         outParameterInfo,
                                         kParamName_Q,
                                         false
                                         );
            outParameterInfo.unit = kAudioUnitParameterUnit_Generic;
            outParameterInfo.minValue = kMinimumValue_Q;
            outParameterInfo.maxValue = kMaximumValue_Q;
            outParameterInfo.defaultValue = kDefaultValue_Q;
            outParameterInfo.flags |= kAudioUnitParameterFlag_DisplayLogarithmic;
            break;

        default:
            result = kAudioUnitErr_InvalidParameter;
            break;

    }

} else {

    result = kAudioUnitErr_InvalidParameter;

}

return result;

}

//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//  Filtro::GetPropertyInfo
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
OSStatus            Filtro::GetPropertyInfo (           AudioUnitPropertyID inID,
                                                AudioUnitScope      inScope,
                                                AudioUnitElement    inElement,
                                                UInt32              &outDataSize,
                                                Boolean             &outWritable)
{
        return AUEffectBase::GetPropertyInfo (inID, inScope, inElement, outDataSize, outWritable);
}

//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//  Filtro::GetProperty
  //~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
OSStatus            Filtro::GetProperty(        AudioUnitPropertyID inID,
                                            AudioUnitScope      inScope,
                                            AudioUnitElement    inElement,
                                            void                *outData )
    {
    return AUEffectBase::GetProperty (inID, inScope, inElement, outData);
}

    #pragma mark ____FiltroEffectKernel

//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

//    Filtro::FiltroKernel::FiltroKernel()

//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Filtro::FiltroKernel::FiltroKernel (AUEffectBase *inAudioUnit) :

AUKernelBase (inAudioUnit), mSamplesProcessed (0), mCurrentScale (0) // 1
{

    mSampleFrequency = GetSampleRate ();

}

//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//  Filtro::FiltroKernel::Reset()
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
void Filtro::FiltroKernel::Reset() {
    mCurrentScale        = 0;           
    mSamplesProcessed    = 0;           
}

//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//  Filtro::FiltroKernel::Process 
void Filtro::FiltroKernel::Process (const Float32   *inSourceP,                                      
                                          Float32         *inDestP,                                         
                                          UInt32          inSamplesToProcess,                             
                                          UInt32          inNumChannels,                                    
                                          bool            &ioSilence                                        
                                          ) {
if (!ioSilence) {                                                       
    const Float32 *sourceP = inSourceP;
    Float32  *destP = inDestP, inputSample, outputSample;
    Float32 Fs= mSampleFrequency;
    int f0;
    float   w0, alpha, b0, b1, b2, a0, a1, a2;
    float gain, dBgain, Q, coeff[5], x[5]={0,0,0,0,0} , out = 0;    

    dBgain = GetParameter (kParameter_Gain);                        //Get parameter from interface
    if (dBgain < kMinimumValue_Gain) dBgain = kMinimumValue_Gain;   //Check the right range
    if (dBgain > kMaximumValue_Gain) dBgain = kMaximumValue_Gain;
    f0 = GetParameter (kParameter_f0);          
    if (f0 < kMinimumValue_f0) f0 = kMinimumValue_f0;
    if (f0 > kMaximumValue_f0) f0 = kMaximumValue_f0;
    Q = GetParameter (kParameter_Q);            
    if (Q < kMinimumValue_Q) Q = kMinimumValue_Q;
    if (Q > kMaximumValue_Q) Q = kMaximumValue_Q;

    w0      = 2*pi*f0/Fs;
    alpha   = sin(w0)*sinh(log(2)/(log(exp(1))*2) * Q * w0/sin(w0));
    b0      = 1;
    b1      = -2*cos(w0);
    b2      = 1;
    a0      = 1 + alpha;
    a1      = -2*cos(w0);
    a2      = 1 - alpha;
    coeff[0] = b0/a0;
    coeff[1] = b1/a0;
    coeff[2] = b2/a0;
    coeff[3] = -a1/a0;
    coeff[4] = -a2/a0;      

    //----------------------------------------------------------------------------------------------//
    //  y(n) = b0/a0 * x(n) + b1/a0 * x(n-1) + b2/a0 * x(n-2) * -a1/a0 * y(n-1) * -a2/a0 * y(n-2)   //
    //----------------------------------------------------------------------------------------------//

    for (int i = inSamplesToProcess; i > 0; --i) {
       int index = static_cast<long>(mSamplesProcessed * mCurrentScale) % 512;  //?

        if ((mNextScale != mCurrentScale) && (index == 0)) {      //?? 
            mCurrentScale = mNextScale;
            mSamplesProcessed = 0;

        }

        if ((mSamplesProcessed >= sampleLimit) && (index == 0)) {  // ??
            mSamplesProcessed = 0;

        }   

        gain            = pow(10, dBgain/20);
        inputSample     = *sourceP;
        x[0]            = inputSample;      //x(n)
        x[3]            = outputSample;     //y(n-1)    
        for (int h = 0; h < 5; h++) {       // Processing output sample
           out = out+x[h]*coeff[h];     
        }
        for (int h = 4; h > 0; h--) {
            x[h]=x[h-1];                    //I/O array shifting
        }
        outputSample        = out * gain;
        out                 = 0;
        *destP              = outputSample;
        sourceP             += 1;
        destP               += 1;
        mSamplesProcessed   += 1;
    }
}
} 
```

这就是头文件：

```
// Filtro.h

#include "AUEffectBase.h"

#include "AUEffectBase.h"
#include "FiltroVersion.h"

#if AU_DEBUG_DISPATCHER
    #include "AUDebugDispatcher.h"
#endif

#ifndef __Filtro_h__
#define __Filtro_h__

#pragma mark ____Filtro Parameter Constants

static CFStringRef kParamName_Gain      = CFSTR ("Gain");  
static const double kDefaultValue_Gain   = 0;
static const double kMinimumValue_Gain   = -40;
static const double kMaximumValue_Gain   = 0;

static CFStringRef kParamName_f0      = CFSTR ("f0");  
static const int kDefaultValue_f0   = 1048;
static const int kMinimumValue_f0   = 50;
static const int kMaximumValue_f0   = 20000;

static CFStringRef kParamName_Q      = CFSTR ("Q");  
static const double kDefaultValue_Q   = 0.1;
static const double kMinimumValue_Q   = 0.001;
static const double kMaximumValue_Q   = 10;

// parameter identifiers
enum {                                                                    // Defines     constants for identifying the parameters; defines the total number of parameters
kParameter_Gain         = 0,
kParameter_f0           = 1,
kParameter_Q            = 2,
kNumberOfParameters     = 3
};

#pragma mark ____Filtro
class Filtro : public AUEffectBase
{
public:
    Filtro(AudioUnit component);
#if AU_DEBUG_DISPATCHER
    virtual ~Filtro () { delete mDebugDispatcher; }
#endif

    virtual AUKernelBase *      NewKernel() { return new FiltroKernel(this); }

    virtual OSStatus            GetParameterInfo(AudioUnitScope         inScope,
                                             AudioUnitParameterID   inParameterID,
                                             AudioUnitParameterInfo &outParameterInfo);

virtual OSStatus            GetPropertyInfo(AudioUnitPropertyID     inID,
                                            AudioUnitScope          inScope,
                                            AudioUnitElement        inElement,
                                            UInt32 &            outDataSize,
                                            Boolean &           outWritable );

virtual OSStatus            GetProperty(AudioUnitPropertyID     inID,
                                        AudioUnitScope          inScope,
                                        AudioUnitElement        inElement,
                                        void *                  outData);

virtual bool                SupportsTail () { return false; }   // FIND

/*! @method Version */
virtual OSStatus        Version() { return kFiltroVersion; }

//      virtual ComponentResult GetPresets (CFArrayRef *outData) const;
//      virtual OSStatus NewFactoryPresetSet (const AUPreset &inNewFactoryPreset);   

protected:
    class FiltroKernel : public AUKernelBase {

    public:
        FiltroKernel (AUEffectBase *inAudioUnit); // 1
        virtual void Process (
                          const Float32    *inSourceP,
                          Float32          *inDestP,
                          UInt32           inFramesToProcess,
                          UInt32           inNumChannels,       // equal to 1
                          bool             &ioSilence
                          );
    virtual void Reset();

private:
    Float32  mSampleFrequency;                    
    long     mSamplesProcessed;                 
    enum     {sampleLimit = (int) 10E6};         
    float    mCurrentScale;                       
    float    mNextScale;                          
    };
};
#endif#include "FiltroVersion.h"

#if AU_DEBUG_DISPATCHER
    #include "AUDebugDispatcher.h"
#endif

#ifndef __Filtro_h__
#define __Filtro_h__

#pragma mark ____Filtro Parameter Constants

static CFStringRef kParamName_Gain      = CFSTR ("Gain");  
static const double kDefaultValue_Gain   = 0;
static const double kMinimumValue_Gain   = -40;
static const double kMaximumValue_Gain   = 0;

static CFStringRef kParamName_f0      = CFSTR ("f0");  
static const int kDefaultValue_f0   = 1048;
static const int kMinimumValue_f0   = 50;
static const int kMaximumValue_f0   = 20000;

static CFStringRef kParamName_Q      = CFSTR ("Q");  
static const double kDefaultValue_Q   = 0.1;
static const double kMinimumValue_Q   = 0.001;
static const double kMaximumValue_Q   = 10;

// parameter identifiers
enum {                                                                    // Defines     constants for identifying the parameters; defines the total number of parameters
kParameter_Gain         = 0,
kParameter_f0           = 1,
kParameter_Q            = 2,
kNumberOfParameters     = 3
};

#pragma mark ____Filtro
class Filtro : public AUEffectBase
{
public:
    Filtro(AudioUnit component);
#if AU_DEBUG_DISPATCHER
    virtual ~Filtro () { delete mDebugDispatcher; }
#endif

    virtual AUKernelBase *      NewKernel() { return new FiltroKernel(this); }

    virtual OSStatus                GetParameterInfo(AudioUnitScope         inScope,
                                             AudioUnitParameterID   inParameterID,
                                             AudioUnitParameterInfo &outParameterInfo);

virtual OSStatus                GetPropertyInfo(AudioUnitPropertyID     inID,
                                            AudioUnitScope          inScope,
                                            AudioUnitElement        inElement,
                                            UInt32 &            outDataSize,
                                            Boolean &           outWritable );

virtual OSStatus            GetProperty(AudioUnitPropertyID     inID,
                                        AudioUnitScope          inScope,
                                        AudioUnitElement        inElement,
                                        void *                  outData);

virtual bool                SupportsTail () { return false; }

/*! @method Version */
    virtual OSStatus        Version() { return kFiltroVersion; }

protected:
    class FiltroKernel : public AUKernelBase {

    public:
        FiltroKernel (AUEffectBase *inAudioUnit); 
    virtual void Process (
                          const Float32    *inSourceP,
                          Float32          *inDestP,
                          UInt32               inFramesToProcess,
                          UInt32           inNumChannels,   // equal to 1
                          bool             &ioSilence
                          );
    virtual void Reset();

    private:
        Float32  mSampleFrequency;                    
        long     mSamplesProcessed;                   
        enum     {sampleLimit = (int) 10E6};          
    float    mCurrentScale;                      
    float    mNextScale;                          
    };
};
#endif 
```

非常感谢。我希望我的英语不要太差。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T02:15:58.447

您的过滤器实现对我来说看起来不正确。也许这很好，但很难遵循。例如，看起来您正在将存储的 x 值转换为存储的 y 值，即使您在下一个循环中清除了它，也有点难以理解。

您可能想在这里查看我是如何做到的：http: [//blog.bjornroche.com/2012/08/basic-audio-eqs.html](http://blog.bjornroche.com/2012/08/basic-audio-eqs.html)更干净！

此外，您是在处理单声道样本还是多声道音频，因为您的 Process 功能看起来只能按照您对单声道音频的预期工作。（我最近与 AU 合作的时间不足以通过查看您的代码自己回答这个问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T22:25:22.947

问题解决了！！！3 天后，我找到了避免变量重置每个音频帧的正确方法。我只是将这些状态变量声明到 Filtro.h 文件底部的第四行，然后我将它们初始化为 Filtro.cpp 文件中的“AUKernelBase (inAudioUnit)”。我希望它可以对其他人有所帮助。再见。

# android - 如何使用将自定义可绘制对象应用于 RadioButton？

> ID：12432553
> 
> 赞同：87
> 
> 时间：2012-09-14T22:02:30.437
> 
> 标签：android

看起来我们可以在 RadioButton 中使用以下内容：

```
android:button="@drawable/myCustomStateBackground" 
```

但是那个drawable只占据了radiodrawable通常会去的地方。理想情况下，我希望我的整个按钮背景都是有状态的。所以当按下时，我希望整个按钮看起来像卡在按下状态。为此，我希望我可以做类似的事情：

```
android:button="null"
android:background="@drawable/myCustomStateBackground" 
```

但是背景drawable不知道推送状态，就像按钮属性一样。有办法解决吗？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-09-14T22:21:18.503

给你的单选按钮一个自定义样式：

```
<style name="MyRadioButtonStyle" parent="@android:style/Widget.CompoundButton.RadioButton">
    <item name="android:button">@drawable/custom_btn_radio</item>
</style> 
```

**custom_btn_radio.xml**

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="true" android:state_window_focused="false"
          android:drawable="@drawable/btn_radio_on" />
    <item android:state_checked="false" android:state_window_focused="false"
          android:drawable="@drawable/btn_radio_off" />

    <item android:state_checked="true" android:state_pressed="true"
          android:drawable="@drawable/btn_radio_on_pressed" />
    <item android:state_checked="false" android:state_pressed="true"
          android:drawable="@drawable/btn_radio_off_pressed" />

    <item android:state_checked="true" android:state_focused="true"
          android:drawable="@drawable/btn_radio_on_selected" />
    <item android:state_checked="false" android:state_focused="true"
          android:drawable="@drawable/btn_radio_off_selected" />

    <item android:state_checked="false" android:drawable="@drawable/btn_radio_off" />
    <item android:state_checked="true" android:drawable="@drawable/btn_radio_on" />
</selector> 
```

用你自己的替换drawables。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-06-26T09:38:05.380

您应该设置`android:button="@null"`而不是`"null"`.

你离得太近了！

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2013-07-30T10:39:12.737

完整的解决方案：

```
<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/radio0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:button="@drawable/oragne_toggle_btn"
        android:checked="true"
        android:text="RadioButton" />

    <RadioButton
        android:id="@+id/radio1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:button="@drawable/oragne_toggle_btn"
        android:layout_marginTop="20dp"
        android:text="RadioButton" />

    <RadioButton
        android:id="@+id/radio2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:button="@drawable/oragne_toggle_btn"
        android:layout_marginTop="20dp"
        android:text="RadioButton" />
</RadioGroup> 
```

选择器 XML

```
<?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@drawable/orange_btn_selected" android:state_checked="true"/>
<item android:drawable="@drawable/orange_btn_unselected"    android:state_checked="false"/>

 </selector> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-02-26T12:46:07.377

如果您想更改单选按钮的唯一图标，那么您只能添加`android:button="@drawable/ic_launcher"`到您的单选按钮，并且为了使点击变得敏感，那么您必须使用选择器

```
 <?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@drawable/image_what_you_want_on_select_state" android:state_checked="true"/>
<item android:drawable="@drawable/image_what_you_want_on_un_select_state"    android:state_checked="false"/>

 </selector> 
```

并设置到你的收音机`android:background="@drawable/name_of_selector"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-14T11:08:47.067

以编程方式，添加背景图像

minSdkVersion 16

```
RadioGroup rg = new RadioGroup(this);
RadioButton radioButton = new RadioButton(this);
radioButton.setBackground(R.drawable.account_background);
rg.addView(radioButton); 
```

# android - 我可以在操作栏中嵌入可滚动的标签吗？

> ID：12432555
> 
> 赞同：0
> 
> 时间：2012-09-14T22:02:39.010
> 
> 标签：android, android-actionbar, swipe, android-tabs, android-scrollable-tabs

我想要一个布局，其中屏幕空间在较小的屏幕上很重要，但我希望用户能够在两个标签之间滑动。在这些较小的屏幕设备上，我不想用这样的[可滚动标签小部件](http://developer.android.com/design/building-blocks/tabs.html#scrollable)浪费一整行：

![可滚动标签](../Images/a52b504791777cf5f96189843fc3893d.png)

但[固定标签](http://developer.android.com/design/building-blocks/tabs.html#fixed)不会向用户提供他们可以滑动的指示：

![固定标签](../Images/a5cb587ccb9614edff9acbddf3edf27f.png)

用户通常需要查看两个选项卡才能完成任务。目前有什么方法可以在主操作栏中嵌入支持“滑动切换选项卡”的选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:09:50.263

不仅可以支持使用标准操作栏固定选项卡进行滑动，它还是一个[设计指南](http://developer.android.com/design/patterns/actionbar.html#elements)：

> 使用固定选项卡支持两个或三个应用程序视图之间的快速更改。固定选项卡应始终允许用户通过在内容区域上向左或向右滑动来在视图之间导航。

![在此处输入图像描述](../Images/28145548a16f3d2eeeabdd5574d42102.png)

可滚动标签与固定标签不同，因为标签栏本身可以滚动以查看比给定显示更多的标签：

![在此处输入图像描述](../Images/a05c2a45b6be6cecc07c3866d3487393.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:09:43.770

您可以将选项卡与 a`ViewPager`和 a一起使用`FragmentPagerAdapter`。

像这样将它们链接在一起：

```
 @Override
 public void onPageSelected(int position) {
     getSupportActionBar().setSelectedNavigationItem(position);
 }

 @Override
 public void onTabSelected(Tab tab, FragmentTransaction ft) {
     mViewPager.setCurrentItem(tab.getPosition());
 } 
```

有关更详细的示例，请查看此[答案](https://stackoverflow.com/a/12258287/1117415)。

# c++ - boost::bind 返回一个函数对象，它是需要指针的函数的参数

> ID：12432556
> 
> 赞同：1
> 
> 时间：2012-09-14T22:02:44.490
> 
> 标签：c++, linux, boost, bind, function-pointers

我正在 Linux 上进行关于 boost::bind 的 C++ 编码。

boost::bind 的返回数据类型是一个函数对象，它是另一个函数 bridge_set_pound_var_func 的输入参数。

但是，bridge_set_pound_var_func 的输入参数必须是函数指针。bridge_set_pound_var_func 的接口不能改变。

代码如下：

```
#include <boost/bind.hpp>
#include <iostream>
using namespace boost;

class myA
{
 public:

     int bridge_set_pound_var_func( int (*pound_var_func)(const char *, char *, void *), void *arg ) { std::cout << "bridge_set_pound_func is called " << std::endl ; return 0; }
 };

 class myC
 {
  public:
        myA *myOA;
        int func(const char * poundVar , char * t1, void * t2);

        int myCCall() { myOA->bridge_set_pound_func( (boost::bind(&myC::func, this)), (void *)this ); return 0;}

 };

 int myC::func(const char * poundVar , char * t1, void * t2)
 {
     std::cout << "myC::func is called " << std::endl;
     return 1;

  }

 int main()
 {
      myC myCO ;
      myC *m1p = &myCO ;
      m1p->myCCall() ;

      return 0 ;
 }

 // EOF 
```

我得到编译错误：

```
 error: no matching function for call to 

 'myA::bridge_set_pound_func(boost::_bi::bind_t<int (&)(const char*, char*, void*), boost::_mfi::dm<int ()(const char*, char*, void*), myC>, boost::_bi::list1<boost::_bi::value<myC*> > >, void*)'

  note: candidates are: int myA::bridge_set_pound_func(int (*)(const char*, char*, void*), void*) 
```

任何帮助将不胜感激。

## 而且，bridge_set_pound_var_func 的接口不能更改，因为它需要被许多其他函数调用。

这是有效的新代码。但是，“myC::func is called”没有打印出来，为什么？

```
#include <boost/bind.hpp>
#include <boost/function.hpp>

#include <iostream>
using namespace boost;

class myA
{
 public:

 int bridge_set_pound_var_func( const boost::function3<int, const char *, char *, void *> f, void *arg )  { std::cout << "bridge_set_pound_var_func is called " << std::endl ; return 0; }

};

 typedef  int (*funcPtr)(const char *, char *, void *) ;

 typedef boost::function0<int&> boostBindFuncType;

 class myC
 {
  public:
   myA *myOA;
   int func(const char * poundVar , char * t1, void * t2);

   int myCCall()
   {

     std::cout << "myCCall is called " << std::endl;
     myOA->bridge_set_pound_var_func( (boost::bind(&myC::func, this, _1, _2, _3)), (void *)this );

     return 0;

   }

 };

 int myC::func(const char * poundVar , char * t1, void * t2)
 {
  std::cout << "myC::func is called " << std::endl;
  return 1;

 }

 int main()
 {
    myC myCO ;
    myC *m1p = &myCO ;
    m1p->myCCall() ;

   return 0 ;
 } 
```

我无法更改被许多其他函数调用的 bridge_set_pound_var_func 的接口。是否可以将 boost::bind 返回的函数对象转换为函数指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T01:30:20.253

传统上，`void *`传递给回调的最后一个参数是用户定义的数据。如果是这种情况，您可以创建一个帮助函数，让您传递函子。唯一的麻烦是您需要确保用户数据存在，直到不再调用回调 - 这在很大程度上取决于您的程序结构。我只是要泄漏对象，因为这是确保它继续存在的最简单方法。（尽管您也会遇到包含`myC`对象的存在问题）。

```
class myC
{
  public:
    myA *myOA;

    //NOTE: I've removed the void* ptr here, which should be user data.
    // If you still need it you'll need to bind it away at functor creation time.
    int func(const char * poundVar , char * t1);

    int myCCall()
    {
      //TODO: Fix this intentional leak.
      boost::function<int(const char*, char*)> * fn = new boost::function<int(const char*,char*)>( boost::bind(&myC::func,this) );
      //Call our helper function instead of `set_pound_func`.
      set_pound_func_with_functor(myOA, fn );
      return;
    }
};

// Function that is really passed to `set_pound_func` when 
// set_pound_func_with_functor is called.
// It converts the user data back to a boost function and calls it.
int pound_func_with_functor(const char* d1, char* d2, void* user_data)
{
  boost::function<int(const char*,char*)> * fn = static_cast< boost::function<int(const char*, char*) >( user_data );
  return (*fn)(d1,d2);
}

//Helper function to make set_pound_func work with boost functions instead.
//NOTE: You are required to ensure the fn argument exists for long enough...
void set_pound_func_with_functor( myA * myOA, boost::function<int(const char *, char *)> & fn )
{
   myOA->bridge_set_pound_var_func( &pound_func_with_functor, &fn );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T22:28:21.710

没有办法将`boost::bind`结果转换为函数指针。

利用`boost::function`

```
int bridge_set_pound_var_func
( const boost::function<int(const char *, char *, void *)>& f, void *arg ) 
```

称为

```
myOA->bridge_set_pound_var_func( (boost::bind(&myC::func, this, _1, _2, _3)),
(void *)this ); 
```

或使用`template parameter`

```
template<typename Func>
int bridge_set_pound_var_func( const Func& f, void *arg ) 
```

像第一种情况一样打电话。

您不能将`boost::bind`or的结果转换`boost::function`为函数指针。

我认为阅读这将是有趣的。

[将 boost::function 降级为普通函数指针](https://stackoverflow.com/questions/282372/demote-boostfunction-to-a-plain-function-pointer)

在你的情况下 - 你不能使用`target`，所以，看看伊恩的回答

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:07:41.970

唯一可以作为函数指针传递的是函数。没有函数对象，没有 lambda，什么都没有。只是全局函数。

# c# - 在泛型的具体实例化中限制类型

> ID：12432557
> 
> 赞同：1
> 
> 时间：2012-09-14T22:02:53.063
> 
> 标签：c#, c#-4.0

在泛型类的具体实例化期间，是否可以将类型限制为类层次结构的子集。

例如，如果我在创建具体工厂时有一个抽象工厂类，我可以将放入工厂的类型限制为一组有限的类型。

```
public abstract class AbstractFactory<K,V>

public sealed class CornerProcessorFactory : AbstractFactory<XYZ, Type> 
```

当我声明 CornerProcessorFactory 时，我想限制传递给层次结构中特定基类或接口的类型，但仍然将值类型作为类型而不是实例化类传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:08:09.333

使用类似的东西：

```
public sealed class CornerProcessorFactory<T> : AbstractFactory<XYZ, T> where T: ISomething 
```

如果您只想对 CornerProcessorFactory 进行限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:12:36.403

这是示例代码

```
public abstract class AbstractFactory<K,V>{}

public sealed class CornerProcessorFactory<K,V> : 
    AbstractFactory<K, V> 
    where K : IFoo 
    where V : struct{ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:52:21.030

您可以使用 where 关键字来限制您的类型参数：

```
public abstract class AbstractFactory<TKey, TValue> : SomeOtherGenericClass<TKey>
   where TKey: class, new()
   where TValue: struct 
```

所以在这里，我说 TKey 必须是引用类型并包含默认构造函数，而 TValue 必须是值类型。您还可以指定它从类派生或实现接口。就像是：

```
 where TKey: IMyInterface 
```

或者

```
 where TKey: MyBaseClass 
```

所以在第一个中，我基本上要求作为我的 T 传入的任何东西都必须实现 IMyInterface。在第二个中，我要求作为 T 传入的任何内容都必须从 MyBaseClass 派生

# javascript - 增量css3淡入淡出

> ID：12432560
> 
> 赞同：1
> 
> 时间：2012-09-14T22:03:41.130
> 
> 标签：javascript, jquery, css, timeout

我该怎么做？我只是出于性能原因尝试使用 css3（淡入可能会有点不稳定）。

现在它们都同时发生。

```
function fadeInPlaylist(elem) {
    elem.css('opacity',1);
}

$(window).load(function() {
   $('.playlist').each(function(i) {
      setTimeout(fadeInPlaylist($(this)),2500*i);
   });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T22:13:34.540

你打错电话`setTimeout`了。

`setTimeout(fadeInPlaylist($(this)),2500*i);`

应该：

`setTimeout(function(){fadeInPlaylist($(this));},2500*i);`

此外，这是一个工作小提琴：http: [//jsfiddle.net/q7Wa8/](http://jsfiddle.net/q7Wa8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:28:17.300

如果您真的只需要使用 CSS3，请使用以下代码：

```
@keyframes reset {
    0% { opacity: 0; }
    100% { opacity: 0; }
}
@keyframes fade-in {
    0% { opacity: 0; }
    60% { opacity: 0; }
    100% { opacity: 1; }
}
.playlist {
    animation-name: reset, fade-in;
    animation-duration: 2.5s;
    animation-timing-function: ease-in;
    animation-iteration-count: 1;
    animation-delay: 0, 0;
} 
```

但是你会有兼容性问题。这是跨浏览器代码，在 IE 中不起作用：

```
@keyframes reset { 0% { opacity: 0; } 100% { opacity: 0; } }
@keyframes fade-in { 0% { opacity: 0; } 60% { opacity: 0; } 100% { opacity: 1; } }
@-webkit-keyframes reset { 0% { opacity: 0; } 100% { opacity: 0; } }
@-webkit-keyframes fade-in { 0% { opacity: 0; } 60% { opacity: 0; } 100% { opacity: 1; } }
@-moz-keyframes reset { 0% { opacity: 0; } 100% { opacity: 0; } }
@-moz-keyframes fade-in { 0% { opacity: 0; } 60% { opacity: 0; } 100% { opacity: 1; } }
@-o-keyframes reset { 0% { opacity: 0; } 100% { opacity: 0; } }
@-o-keyframes fade-in { 0% { opacity: 0; } 60% { opacity: 0; } 100% { opacity: 1; } }
.playlist {
    animation-name: reset, fade-in;
    animation-duration: 2.5s;
    animation-timing-function: ease-in;
    animation-iteration-count: 1;
    animation-delay: 0, 0;
    -webkit-animation-name: reset, fade-in;
    -webkit-animation-duration: 2.5s;
    -webkit-animation-timing-function: ease-in;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-delay: 0, 0;
    -moz-animation-name: reset, fade-in;
    -moz-animation-duration: 2.5s;
    -moz-animation-timing-function: ease-in;
    -moz-animation-iteration-count: 1;
    -moz-animation-delay: 0, 0;
    -o-animation-name: reset, fade-in;
    -o-animation-duration: 2.5s;
    -o-animation-timing-function: ease-in;
    -o-animation-iteration-count: 1;
    -o-animation-delay: 0, 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:15:55.080

您可以使用`fadeTo`with`delay`但如果您想按照自己的方式进行操作，请尝试以下操作：

```
function fadeInPlaylist() {
    $(this).css('opacity',1);
}

$(window).load(function() {
   $('.playlist').each(function(i, e) {
     setTimeout(function(){ fadeInPlaylist.call(e); }, 1000 * i);
   });
}); 
```

**演示：http:** [//jsbin.com/oyazof/1/edit](http://jsbin.com/oyazof/1/edit)

**编辑：**

如果你想用 CSS3 转换来做，你可以只添加一个类而不是从 jQuery 更改 css。

**jQuery：**

```
function fadeInPlaylist() {
  $(this).addClass('opacity');
} 
```

**CSS：**

```
.opacity {
  -webkit-transition: opacity .5s ease-in-out;
  -moz-transition: opacity .5s ease-in-out;
  -ms-transition: opacity .5s ease-in-out;
  -o-transition: opacity .5s ease-in-out;
  transition: opacity .5s ease-in-out;
  opacity: 1;
} 
```

**带有 CSS3 过渡的演示：http:** [//jsbin.com/oyazof/3/edit](http://jsbin.com/oyazof/3/edit)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-14T22:13:15.750

只是改变：

```
elem.css('opacity',1); 
```

到：

```
elem.fadeTo('fast', 1); 
```

# clojure - 如何获取 clojure 函数参数的元数据？

> ID：12432561
> 
> 赞同：4
> 
> 时间：2012-09-14T22:03:46.957
> 
> 标签：clojure, metadata

有没有办法在clojure中为函数的参数获取元数据？[实际上，此问题](https://stackoverflow.com/questions/5592306/how-do-i-dynamically-find-metadata-for-a-clojure-function)中发布的答案*通常*不起作用：

```
user> (defn foo "informative dox!" [] 1)
#'user/foo
user> (defmacro get-docs [func] `(:doc (meta (var ~func))))
#'user/get-docs
user> (get-docs foo)
"informative dox!"
user> (get-docs (identity foo))
; Evaluation aborted.
user> (defn process-docs [f] (let [docs (get-docs f)] (reverse docs)))
; Evaluation aborted. 
```

倒数第二行不起作用，因为您无法调用`var`list `(identity foo)`，最后一行甚至无法编译，因为编译器抱怨无法解析`f`。

我发现这个问题的大多数解决方案都依赖于你可以访问函数定义中的符号或类似的东西，这样你就可以做类似的事情`(resolve 'f)`or `(var f)`。但是我想要一些我可以*在函数的参数上*使用的东西，你不知道这些信息。

从本质上讲，我想要一个表达式来代替下面的问号来获取元数据`#'map`：

```
(let [x map] (??? x)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T23:35:43.810

尽管可能，但它是满口的：

```
(let [x map]
   (:doc (meta (second (first (filter #(and (var? (second %))
                                            (= x (var-get (second %))))
                                      (ns-map *ns*))))))) 
```

产生所需的结果：

```
"Returns a lazy sequence consisting of the result of applying f to the
 set of first items of each coll, followed by applying f to the set
 of second items in each coll, until any one of the colls is\n  exhausted.  Any remaining items in other colls are ignored. Function
 f should accept number-of-colls arguments." 
```

在引擎盖下命名空间本质上是名称到变量的映射，变量包含函数。您可以**在这些 var 的内容中搜索与您正在寻找的函数匹配的内容，**然后查看它的关联 var 并从该 var 中获取元数据。

# java - 使用 EWS Java API 检索约会的计费信息

> ID：12432563
> 
> 赞同：0
> 
> 时间：2012-09-14T22:03:53.880
> 
> 标签：java, exchange-server, exchangewebservices, appointment, ewsjavaapi

我在计费信息中有信息，我想使用 EWS Java API 进行检索。这是我到目前为止所拥有的

```
public List<String> findAppointments() throws Exception
{
    SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    Date startDate1 = formatter.parse("2012-08-26 12:00:00");
    Date endDate1 = formatter.parse("2012-10-06 13:00:00");   
    ExchangeService service = createService();
    CalendarFolder cf = CalendarFolder.bind(service, WellKnownFolderName.Calendar);
    FindItemsResults<Appointment> findResults = cf.findAppointments(new CalendarView(startDate1, endDate1));
    List<String> calList = new ArrayList<String>();

    ExtendedPropertyDefinition BillingInfo = new ExtendedPropertyDefinition(DefaultExtendedPropertySet.Common, "34101" , MapiPropertyType.String );
    PropertySet propertySet = new PropertySet(BasePropertySet.FirstClassProperties, BillingInfo);

    for (Appointment appt : findResults.getItems()) {
        appt = (Appointment)Item.bind(service, new ItemId(appt.getId()), propertySet);
        for(ExtendedProperty extendedProperty : appt.getExtendedProperties()) {
            System.out.println("extendedProperty :" + extendedProperty.getValue());
        }
    }
} 
```

我被困在将约会项目绑定到属性集上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:36:34.483

有任务获得相同的财产。下面是另一个 API 的示例，但逻辑应该相同：

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

import com.independentsoft.exchange.And;
import com.independentsoft.exchange.Appointment;
import com.independentsoft.exchange.AppointmentPropertyPath;
import com.independentsoft.exchange.FindItemResponse;
import com.independentsoft.exchange.IsGreaterThanOrEqualTo;
import com.independentsoft.exchange.IsLessThanOrEqualTo;
import com.independentsoft.exchange.ItemShape;
import com.independentsoft.exchange.MapiPropertyType;
import com.independentsoft.exchange.PropertyId;
import com.independentsoft.exchange.Service;
import com.independentsoft.exchange.ServiceException;
import com.independentsoft.exchange.StandardFolder;
import com.independentsoft.exchange.StandardPropertySet;

public class Test {

    public static void main(String[] args)
    {
        try
        {
            Service service = new Service("https://myserver/ews/Exchange.asmx", "username", "password");

            SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
            Date startTime = dateFormat.parse("2012-09-15 00:00:00");
            Date endTime = dateFormat.parse("2012-09-16 00:00:00");

            IsGreaterThanOrEqualTo restriction1 = new IsGreaterThanOrEqualTo(AppointmentPropertyPath.START_TIME, startTime);
            IsLessThanOrEqualTo restriction2 = new IsLessThanOrEqualTo(AppointmentPropertyPath.END_TIME, endTime);
            And restriction3 = new And(restriction1, restriction2);

            PropertyId billingInformationPropertyId = new PropertyId(0x8535, StandardPropertySet.COMMON, MapiPropertyType.STRING);

            ItemShape shape = new ItemShape(AppointmentPropertyPath.getAllPropertyPaths());
            shape.getPropertyPaths().add(billingInformationPropertyId);

            FindItemResponse response = service.findItem(StandardFolder.CALENDAR, shape, restriction3);

            for (int i = 0; i < response.getItems().size(); i++)
            {
                if (response.getItems().get(i) instanceof Appointment)
                {
                    Appointment appointment = (Appointment) response.getItems().get(i);

                    System.out.println("Subject = " + appointment.getSubject());
                    System.out.println("StartTime = " + appointment.getStartTime());
                    System.out.println("EndTime = " + appointment.getEndTime());                    

                    if (appointment.getExtendedProperty(billingInformationPropertyId) != null)
                    {
                        System.out.println("Billing Information = " + appointment.getExtendedProperty(billingInformationPropertyId).getValue());
                    }
                }
            }
        }
        catch (ServiceException e)
        {
            System.out.println(e.getMessage());
            System.out.println(e.getXmlMessage());

            e.printStackTrace();
        }
        catch (ParseException e)
        {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-07T13:59:19.877

问题是此扩展属性仅在联系人模式中可用。您将无法在约会模式中访问它。

[Exchange Server 协议主属性列表](https://docs.microsoft.com/en-us/openspecs/exchange_server_protocols/ms-oxprops/f6ab1613-aefe-447d-a49c-18217230b148)

2.42 PidLidBilling

说明：指定联系人的计费信息。

# image - 从指纹读取器（delphi）获取图像

> ID：12432565
> 
> 赞同：3
> 
> 时间：2012-09-14T22:03:59.183
> 
> 标签：image, delphi, usb, fingerprint

如何从 Microsoft 指纹读取器 (USB) 获取原始图像到 delphi？是否有免费的组件、SDK 或者是否可以直接从 delphi 中直接使用代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:48:50.363

[GriauleBiometrics Fingerprint SDK](http://www.griaulebiometrics.com/en-us/fingerprint_sdk)是一个可以满足您需求的库。支持微软指纹读取器。

不是免费的，但有 30 天试用版。

# aptana3 - 在 aptana 3 中设置编码

> ID：12432566
> 
> 赞同：2
> 
> 时间：2012-09-14T22:04:06.807
> 
> 标签：aptana3

我刚刚为最新的 Mac OS X 下载了**Aptana 3.2.2**（独立版本）。我不知道如何为我的特定 html 文档**设置编码**（最好是 UTF-8）。在 Aptana 2 和 Visual Studio 中，这很容易捕获，但我现在已经扫描了 Aptana 3.2.2 中的所有菜单，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:31:57.697

假设 linux 的版本与 Mac OS X 的版本相似，请尝试在 App Explorer 中右键单击特定文件，然后转到 Properties（或在编辑要更改编码的文件时尝试 Alt + Enter）。在标签资源的底部，您有“文本文件编码”，您可以在其中调整此设置。此外，如果您想为整个项目设置编码，请从顶部菜单转到项目 -> 属性，这将允许您为一堆文件更改它。

# php - php语法问题

> ID：12432573
> 
> 赞同：0
> 
> 时间：2012-09-14T22:05:04.427
> 
> 标签：php

我这里的语法有这个问题，但我不知道它是什么..

你能帮帮我吗？它必须在网址中...我想我表达它的方式可能有任何错误，因为当我使用纯网址时它可以工作..

谢谢！

```
$url='http://testext.i-movo.com/api/receivesms.aspx?".$str_from.$str_zip.$phone.$str_time.$date1.$str_msg';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$output = curl_exec($ch);
curl_close($ch);
return $output; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:06:13.423

代替

```
$url='http://testext.i-movo.com/api/receivesms.aspx?".$str_from.$str_zip.$phone.$str_time.$date1.$str_msg'; 
```

和

```
$url="http://testext.i-movo.com/api/receivesms.aspx?".$str_from.$str_zip.$phone.$str_time.$date1.$str_msg; 
```

**更新**
我们实际上还需要查看分配给您的变量的值，并且可能是您正在使用的 API 的链接。URL 的参数可能需要看起来像

```
"from=" . $str_from . "&zip=" . $zip .. // etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:07:06.047

您不想将字符串连接放在引号内 - 而是在引号外进行。您将变量（查询参数）连接到字符串文字（URL）和字符串文字，而不是整个事物，由引号定义。因此，取出最后的单引号，并更改字符串文字周围的引号以使其匹配。

至于使用哪个引号，PHP 中单引号和双引号之间的区别（或其中一个区别，但可能是最相关的）是使用双引号，您可以将变量放在字符串中，它们将被替换为值，而使用单引号时，值的名称将按字面意思表示。所以如果 $name 是 "Andrew" 而你做到了

```
"My name is $name" 
```

字符串将是`My name is Andrew`. 但是，如果你这样做了

```
'My name is $name' 
```

变量名不会被其值替换，结果字符串将是`My name is $name`

在您的情况下，您有两个选择。第一种是使用字符串连接，你使用的引号无关紧要（这个例子也可以使用单引号）：

```
"http://testext.i-movo.com/api/receivesms.aspx?" . $str_from . $str_zip . $phone . $str_time . $date1 . $str_msg 
```

第二个是在字符串中使用变量替换，看起来像

```
"http://testext.i-movo.com/api/receivesms.aspx?$str_from$str_zip$phone$str_time$date1$str_msg" 
```

另外，我在这里假设您的变量（$str_from 除外）都具有`&key=value`. 在您的查询参数中（即问号后面指定您传递的选项的部分），您必须用 & 分隔键/值对，并且键和值本身必须按照我上面指定的方式编写。所以你会希望最终结果看起来像

`http://testext.i-movo.com/api/receivesms.aspx?from=whatever&zip=27703&phone=5551234567&time=143295438&date=septemberfourteenth`

# c# - 没有外键的 NHibernate 映射参考

> ID：12432578
> 
> 赞同：4
> 
> 时间：2012-09-14T22:05:42.970
> 
> 标签：c#, nhibernate, nhibernate-mapping

我在 NHibernate 中有这样的映射情况：

```
ClassA
mapping.Id(x => x.Id).Column("rowid").GeneratedBy.Identity().Unique();

ClassB
mapping.Id(x => x.Id).Column("rowid").GeneratedBy.Identity().Unique();
mapping.References<ClassA>(x => x.ClassA).Nullable(); 
```

当 NHibernate 生成数据库模式时，即使我在映射声明中指定了“Nullable”属性，它也会在这些表之间创建一个外键。显然，如果我尝试保存我的对象，我会得到一个外键约束错误，如果我手动从数据库中删除外键，它就像一个魅力。

在这种情况下如何告诉 NHibernate 不要创建外键脚本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T22:09:19.540

我认为您应该在映射文件中使用该`foreign-key="none"`属性。`hbm.xml`

# java - 比较数组的元素

> ID：12432580
> 
> 赞同：-5
> 
> 时间：2012-09-14T22:06:02.180
> 
> 标签：java, arrays

嗨，假设我有一个数组`v1[] = {1, 3, 4, 5}`and `v2[] = {5, 3, 4, 6}`。我想比较 v1 和 v2 的元素，并获得最大值作为输出（最佳解决方案）。如果 V1 和 V2 是我尝试过的数组的长度

```
for(i = 0; i <=n; i++) //for items of an array

for( j = V1; i >= 0; i--) //for items in v1

  for( k = V2; j >= 0; j--) //for itemns in v2

    if(v1[i] <= j && v2[i] <= k)
      int V1 = v1[i];
      int V2 = v2[i]; 
```

但不能正常工作。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T00:09:38.500

如果你想要两个数组中的最大元素，你可以尝试这样的事情：

```
int max = v1[0];

for(int index = 1; index < v1.length; index++){
    if(v1[index] > max)
        max = v1[index];
}
System.out.println("v1 = "+max);

max = v2[0];
for(int index = 1; index < v2.length; index++){
    if(v2[index] > max)
        max = v2[index];
}
System.out.println("v2 = "+max); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:54:26.267

正如您所说，您希望分别获得每个循环的最大值，您正在寻找的是：

```
int maxInV1 = v1[0];
for(int index = 1; index < v1.length; index++) {
    if(v1[index] > maxInV1) {
        maxInV1 = v1[index];
    }
}

int maxInV2 = v2[0];
for(int index = 1; index < v2.length; index++) {
    if(v2[index] > maxInV2) {
        maxInV2 = v2[index];
    }
} 
```

请注意，有更有效的解决方案可用，但考虑到代码中的整体混乱，我认为您应该首先学习这种基本方法。很抱歉，您在问题中发布的代码远非解决方案，因为其中存在许多问题。

另请注意，这是@Sujay 答案的略微修改版本，只需使用两个不同的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:41:05.013

您可以简单地对两个数组进行排序并获得最大（最后一个索引元素）值并像这样比较它们

```
int[] v1= {1, 3, 4, 5};
 Arrays.sort(v1);
 int v1Max = v1[v1.length-1];

 int[] v2 = {5, 3, 4, 6};
 Arrays.sort(v2);
 int v2Max = v2[v2.length-1];
 if(v1Max>v2Max) { 
 System.out.println(v1Max);
  }
  if(v2Max>v1Max) {
      System.out.println(v2Max);
   } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-15T05:58:48.017

即使你的循环和不工作的东西可能按原样工作（我真的不知道，因为我不想浪费我的时间......其他人已经回答了所提出的问题），你的循环永远不会正常工作，因为你没有牙套...

由于您的 for 循环和 if 语句中有多行，因此您必须拥有它们..

```
for(i = 0; i <=n; i++) { //for items of an array

    for( j = V1; i >= 0; i--) { //for items in v1

        for( k = V2; j >= 0; j--) { //for itemns in v2

            if(v1[i] <= j && v2[i] <= k) {
                int V1 = v1[i];
                int V2 = v2[i];
            }
        }
    }
} 
```

是接近工作的唯一方法......我什至怀疑它会。我现在可以告诉你，这个问题不需要 3 个 for 循环......

事实上，@Sujay 已经给出了一种方法，只需 2 个即可。

# php - 为什么我的 PDO 查询失败？

> ID：12432582
> 
> 赞同：1
> 
> 时间：2012-09-14T22:06:31.363
> 
> 标签：php, mysql, pdo, prepared-statement

使用 WampServer 和 phpMyAdmin。

这是代码：

```
function createRecord(){
 $id=null;
 var_dump("ID: ",$id);
 $length=0;
 $dbh=$this->dbConnect();
 var_dump("DBH: ", $dbh);
 $dbh->beginTransaction();
 //try{
  var_dump("DBH: ", $dbh);
  //$dbh->beginTransaction();
  $insertInSets=$dbh->prepare("INSERT INTO 'sets' () VALUES ()"); // PDO Statement object.  ID is generated via autoincrement.
  var_dump("InsertInSets: ", $insertInSets);
  $id=$dbh->lastInsertId();
  var_dump("ID: ",$id);
  $insertInClosures=$dbh->prepare("INSERT INTO 'closures' (ancestor,descendant,length) VALUES (:ancestor,:descendant,:length)");
  var_dump("InsertInClosures: ", $insertInClosures);
  $insertInClosures->bindParam(":ancestor", $id); //<- This is line 22
  $insertInClosures->bindParam(":descendant", $id);
  $insertInClosures->bindParam(":length", $length);
  //$dbh->commit();
  exit; 
```

我尝试了有和没有`try`和交易。无论如何，我得到以下信息：

`Fatal error: Call to a member function bindParam() on a non-object in C:\wamp\www\Projetv0.2\Class_SetDAO.php on line 22`

var_dumps 的输出如下：

```
string 'ID: ' (length=4)
null

string 'DBH: ' (length=5)
object(PDO)[8]

string 'DBH: ' (length=5)
object(PDO)[8]

string 'InsertInSets: ' (length=14)
boolean false

string 'ID: ' (length=4)
string '0' (length=1)

string 'InsertInClosures: ' (length=18)
boolean false 
```

为什么查询不起作用....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:08:46.043

`'sets'`没有被解析为表名；SQL 认为它是一个字符串。

如果您使用的是 MySQL，请尝试将撇号切换为反引号。其他系统可能使用（ANSI 标准）双引号。

或者，完全摆脱引号。 `sets`不是我曾经使用过的任何 SQL 风格的关键字，所以如果你使用这些风格中的任何一种，你根本不需要引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:09:48.583

列名和表名应封装在 (`)

```
INSERT INTO `sets` () VALUES () 
```

# java - Android 与多个活动共享首选项

> ID：12432585
> 
> 赞同：15
> 
> 时间：2012-09-14T22:06:59.633
> 
> 标签：java, android, android-activity, sharedpreferences

1.  如何检索从以前的活动中保存的共享首选项？
2.  我是否需要启用文件写入或其他一些清单修改？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-14T23:16:03.513

您不需要任何特殊的清单修改来实现这一点。

假设您已经保存了首选项，您可以随时阅读这些首选项，如下所示。

1.  写入共享首选项文件：

    > ```
    >  SharedPreferences prefs = getSharedPreferences("your_file_name", MODE_PRIVATE);
    >   SharedPreferences.Editor editor = prefs.edit();
    >   editor.putString("yourStringName", "this_is_the_saved_value");
    >   editor.commit(); // This line is IMPORTANT. If you miss this one its not gonna work! 
    > ```

2.  从共享首选项文件中读取：

    > ```
    >  SharedPreferences prefs = getSharedPreferences("your_file_name",
    >   MODE_PRIVATE); String string = prefs.getString("yourStringName",
    >   "default_value_here_if_string_is_missing"); 
    > ```

您可以使用默认文件来保存/读取您的首选项。只需将上面两个代码片段的第一行替换为以下内容：`SharedPreferences prefs = getDefaultSharedPreferences(getApplicationContext());`

就是这样！[在这里](http://developer.android.com/guide/topics/data/data-storage.html#pref)查看 Android 开发者专用页面。

希望它有用。让我知道。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-14T22:13:00.337

除了确保两个活动都写入/读取同一个文件之外，您不需要做任何特别的事情。在后台，首选项只是存储为 XML 文件。

所以，你的选择是：

1) 使用两个活动中的[PreferenceManager.getDefaultSharedPreferences()](http://developer.android.com/reference/android/preference/PreferenceManager.html#getDefaultSharedPreferences%28android.content.Context%29)写入默认文件。

2) 使用[Context.getSharedPreferences()](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29)指定自定义文件名，并在两个活动中使用相同的名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T22:29:26.080

共享首选项就是这样，共享的。只要您在通过调用 Editor.commit() 编辑首选项后正确保存首选项，它们将在未来可用。

# c# - .NET 2.0 API 调用是否默认在 .NET 4.0 运行时上工作，还是需要额外的设置步骤？

> ID：12432592
> 
> 赞同：0
> 
> 时间：2012-09-14T22:07:48.373
> 
> 标签：c#, .net, .net-4.0, .net-2.0

如果我项目中的 C# 前端团队制作了一个仅执行 .NET 2.0 API 调用但安装到具有 .NET 4.0 的计算机上的独立程序，它会默认工作还是他们必须对设置或设置做些什么？构建过程（如选中某些复选框）以使其工作？

看，我假设如果我只进行 .NET 2.0 API 调用，它应该只在 .NET 4.0 上“工作”。

第 2 部分是——用户拥有 .NET 4.0 和 .NET 1.1，但没有 .NET 2.0。我认为 .NET 2.0 应该可以工作，因为它有 .NET 4.0。对？

背景——我是一名 Linux/PHP 开发人员，自 2001 年以来就没有接触过 C#。我的技能已经过时了。我想，我项目中客户的 C# 前端团队需要一些帮助来理解兼容性，所以我的客户要求我提出这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:17:07.890

如果您的计算机上安装了 .NET 4.0，.NET 2.0 应该可以工作。我从这个链接得到这个：[.NET Framework 中的版本兼容性](http://msdn.microsoft.com/en-us/library/ff602939%28v=vs.100%29.aspx)。但请记住，有些对象已从 2.0 和 4.0 更改。它们可能不具有所有相同的属性和方法。参考 MSDN 文档总是一件好事。

编辑新链接：关于项目的 web.config/app.config 文件中元素的另一个很好的参考：[supportedRuntime](http://msdn.microsoft.com/en-us/library/w4atty68%28v=vs.100%29.aspx)

# ruby - 这看起来像红宝石时间平等错误吗？

> ID：12432594
> 
> 赞同：3
> 
> 时间：2012-09-14T22:07:53.410
> 
> 标签：ruby, time, equality

为什么`false`在第二个比较中？我没有加载任何库。

```
puts RUBY_DESCRIPTION
t = Time.now
t1 = Time.at(t.to_f)
t2 = Time.at(t.to_f)
puts( t1 == t2 )
puts( t == t1 )
puts( t.to_f == t1.to_f )
printf "%.64f\n%.64f\n%.64f\n", t, t1, t2 
```

输出：

```
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0]
true
false
true
1347661545.4348440170288085937500000000000000000000000000000000000000000000
1347661545.4348440170288085937500000000000000000000000000000000000000000000
1347661545.4348440170288085937500000000000000000000000000000000000000000000 
```

我`true`在 1.8.7 上得到了所有的 s。这是怎么回事？

据我所知，我更新了脚本以显示浮动是相同的。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T22:32:45.007

来自 Time.to_f 上的文档：“请注意，IEEE 754 双精度不足以表示从纪元开始的纳秒数。” 为了说明@oldrinb 的评论：

```
puts RUBY_DESCRIPTION # ruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux]
t = Time.now
p t.subsec #=> (40189433/100000000); # a Rational, note the last digits 33
p t.to_f   #=> 1347661635.4018943   # last digit missing 3 
```

[Time#subsec 文档](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-subsec)：“#to_f 和 subsec 的最低数字不同，因为 IEEE 754 双精度不足以表示有理数。准确的值由 subsec 返回。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:33:11.173

我敢打赌，这是一个经典的浮点精度问题。具体来说，当您调用 时`#to_f`，您可能会丢失原始对象中存在的精度。

如果您比较`#nsec`每个对象的值，您可以很容易地看到这一点：

```
1.9.3p194 :059 > t = Time.now
 => 2012-09-14 15:29:59 -0700
1.9.3p194 :060 > t2 = Time.at(t.to_f)
 => 2012-09-14 15:29:59 -0700
1.9.3p194 :062 > t.nsec
 => 489932427
1.9.3p194 :063 > t2.nsec
 => 489932537 
```

可能成功的原因`Time.at(t.to_f) == Time.at(t.to_f)`是两者在输入中具有相同的浮点精度损失，因此它们的输入确实是相同的。

因此，总而言之，这是错误的行为，但它不是错误/本身/，因为它与浮点算术的基本警告有关。

# wpf - f# 中的 UIElement.add_MouseDown 来自哪里？

> ID：12432595
> 
> 赞同：3
> 
> 时间：2012-09-14T22:07:53.237
> 
> 标签：wpf, f#

我试图理解为什么以下代码有效（取自[http://jyliao.blogspot.com/2007/10/learning-wpf.html](http://jyliao.blogspot.com/2007/10/learning-wpf.html)）：

```
open System
open System.Windows
open System.Windows.Input

(* From Chap 1 - HandleAnEvent.cs *)
let WindowOnMouseDown sender (args:MouseButtonEventArgs) =
   let win = unbox<Window> sender
   let str = sprintf "Window clicked with %A button at point (%A)" args.ChangedButton (args.GetPosition win)
   MessageBox.Show(str)|>ignore

let win = new Window()
win.Title <- "Handle an Event"
win.add_MouseDown(new MouseButtonEventHandler(WindowOnMouseDown))

#if COMPILED
[<STAThread()>]
do 
    let app =  new Application() in
    app.Run(win) |> ignore
#endif 
```

我不明白的部分是对`add_MouseDown`. 当我将鼠标悬停在 VS 中的调用上时，它告诉我该方法来自 UIElement 类，但我在 .NET 类库中找不到对该方法的任何引用。

在 F# 中，我希望调用是：

```
win.MouseDown.AddHandler (new MouseButtonEventHandler(WindowOnMouseDown)) 
```

当我进行此更改时，弹出的消息框不再显示您单击的窗口内的坐标。相反，它显示的坐标与窗口内鼠标单击的位置无关，但随着您在屏幕上移动窗口而改变。因此，该参数似乎`sender`指的是窗口以外的某些 UI 元素。

有谁明白为什么使用 add_MouseDown 有效（以及该方法的存在记录在哪里），以及为什么使用 AddHandler 不起作用？

我正在使用 VS2010、F# 2.0、.NET 3.0 库。

**更新：**

啊，我刚刚意识到我*错了*，使用 AddHandler 与使用 add_MouseDown 的工作方式不同。我实际上一直在做的是使用两种不同的方法一个接一个地添加两个事件处理程序：

```
win.add_MouseDown(new MouseButtonEventHandler(WindowOnMouseDown))
win.MouseDown.AddHandler (new MouseButtonEventHandler(WindowOnMouseDown)) 
```

这会弹出两个消息窗口，第一个显示窗口内的正确位置，第二个显示另一个愚蠢的位置。但是，如果我真的将 add_MouseDown 调用替换为 addHandler 调用，那么我会得到相同的结果。

所以对于这一部分，我认为我真正的问题是为什么第二个事件处理程序报告不同的位置。但也许这最好作为一个单独的问题来处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:29:36.190

我不确定为什么它不起作用，但是您可以通过将闭包传递给来完成同样的事情`Add`：

```
let win = Window()
win.MouseDown.Add(fun args ->
  let str = sprintf "Window clicked with %O button at point (%O)" args.ChangedButton (args.GetPosition(win))
  MessageBox.Show(str) |> ignore) 
```

现在很清楚`win`指的是什么（并且不需要拆箱）。`sender`无论如何，这比无类型参数要好。也许它会按预期工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:09:45.157

`add_MouseDown`*是事件的添加*访问器的名称`MouseDown`。
在 C# 中，此方法通过编写`win.MouseDown += ...`.
在 VB.Net 中，它被称为`AddHandler(win, AddressOf ...)`.

F# 没有用于添加事件处理程序的特殊语法，因此您需要显式调用它。

# python - SqlAlchemy：检查/反映有关关系的信息

> ID：12432596
> 
> 赞同：6
> 
> 时间：2012-09-14T22:08:02.360
> 
> 标签：python, reflection, sqlalchemy

我有一个 sqlalchemy 类`R`，它实现了另外两个类之间的 am:n 关系`A`和`B`. 所以`R`有两个整数列`source_id`，`target_id`其中包含引用实例的 id。并且`R`有两个属性`source_obj`，`target_obj`它们是通过`relationship`. 它或多或少与文档中[的](http://docs.sqlalchemy.org/en/latest/orm/relationships.html#association-object)描述相同。

我想要做的是从`R`. 我正在使用 sqlalchemy 0.8 并尝试使用`inspect()`方法 on `R.source_obj`，但我只得到一个`InstrumentedAttribute`似乎没有太大帮助的方法。至少我无法提取任何有用的信息或找到任何有关它的文档。

任何帮助将不胜感激！我如何得到`A`和`B`来自`R`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-08T02:34:50.237

尝试这样的事情。我也在处理这个并且找不到任何文档，认为这可以帮助你开始。

```
from sqlalchemy import inspect

i = inspect(model)
for relation in i.relationships:
    print(relation.direction.name)
    print(relation.remote_side)
    print(relation._reverse_property)
    dir(relation) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T23:23:58.320

我花了一天的大部分时间来解决同样的问题，并且我能够编写一个列表理解，它接收一个表，然后吐出一个通过关系或外键连接的表名列表。您需要将该字符串转换为对实际类的引用，否则它工作得很好。

```
relationship_list = [str(list(column.remote_side)[0]).split('.')[0] for column \
                    in inspect(table).relationships] 
```

通过删除`.split('.')[0]`，您可以获得连接引用的实际列的列表。理解很丑陋，但它有效。希望这可以帮助其他正在寻找与我相同的东西的人！

# json - 如何在 geoXml3 中使用 networkLink 更新？

> ID：12432603
> 
> 赞同：0
> 
> 时间：2012-09-14T22:08:29.007
> 
> 标签：json, google-maps-api-3, kml, geoxml3

我尝试了很多使用networklink标签..更新谷歌地图Api v3中的内容..但谷歌支持告诉我谷歌地图不支持网络更新..仅在地球上。

所以我找到了geoXml3 api ..但没有文档..最近我在[http://code.google.com/p/geoxml3/source/browse/branches/polys/geoxml3.js](http://code.google.com/p/geoxml3/source/browse/branches/polys/geoxml3.js) 中找到了实现networklink的，这里是geoxml3.js 代码的一部分：

```
 *// Apply the link
    if ((networkLink.link.refreshMode === 'onInterval') &&
        (networkLink.link.refreshInterval > 0)) {
      // Reload at regular intervals
      setInterval(parserName + '.parse("' + networkLink.link.href + '")',
                  1000 * networkLink.link.refreshInterval);
    } else if (networkLink.link.refreshMode === 'onChange') {
      if (networkLink.link.viewRefreshMode === 'never') {
        // Load the link just once
        doc.internals.parser.parse(networkLink.link.href, doc.internals.docSet);
      } else if (networkLink.link.viewRefreshMode === 'onStop') {
        // Reload when the map view changes
      }* 
```

有人用过或正在用吗？是否有一些使用 geoxml3 api 的网络链接示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:07:19.440

我的网络链接测试用例：

1.  [http://www.geocodezip.com/geoxml3_test/v3_geoxml3_local_network_link_test.html](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_local_network_link_test.html)
2.  [http://www.geocodezip.com/geoxml3_test/v3_geoxml3_local_network_link_test_local.html](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_local_network_link_test_local.html)

使用 geoxml3 的主要警告是，如果没有代理，一切都需要在同一个域中。

您可能会调查[geoxml-v3](http://code.google.com/p/geoxml-v3/)，它是更成熟的 GeoXml（来自 Google Maps API v2）的 Google Maps API v3 的端口。

# java - Troubles with a piechart applet

> ID：12432605
> 
> 赞同：-1
> 
> 时间：2012-09-14T22:08:46.203
> 
> 标签：java, applet, japplet

Alright the deal is I am trying to use the drawPie method to create my pie chart in an applet. After attempting google searches I find multiple tutorials that explain part of the process but not all of it. While trying to knit together partial information I am not getting the results I want.

```
 import java.awt.Color;
    import java.awt.Graphics;
    import java.awt.Graphics2D;

    import javax.swing.JApplet;
    import javax.swing.JComponent;

public class JLW_PieApplet extends JApplet {

class PieData extends JComponent {
    PieValue[] slices = new PieValue[4];

    PieData() {
        slices[0] = new PieValue(35, Color.red);
        slices[1] = new PieValue(33, Color.green);
        slices[2] = new PieValue(20, Color.pink);
        slices[3] = new PieValue(12, Color.blue);

    }

    public void paint(Graphics g) {
        drawPie((Graphics2D)g, getBounds(), slices);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:19:59.743

Ther isn't such method in Swing called drawPie. Without the contents of this method, we have no idea of how to help you

Try having a read through [2D Graphics](http://docs.oracle.com/javase/tutorial/2d/index.html) and have a look at [Ellipse2D](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Ellipse2D.html) in particular

The other problem I can see is you don't call `super.paint(g)` in your paint method. This is VERY, VERY, VERY important

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:19:51.710

You have a `PieData` component within your applet but you never add it, so you need to add it in `init` and bring in `drawPie` from your [link](http://www.exampledepot.com/egs/java.awt/Pie.html) above:

```
public class JLW_PieApplet extends JApplet {

   public void init() {
      add(new PieData());
   }

   class PieData extends JComponent {
      PieValue[] slices = new PieValue[4];

      PieData() {
         slices[0] = ...
      }

      @Override
      protected void paintComponent(Graphics g) {
         super.paintComponent(g);
         drawPie((Graphics2D) g, getBounds(), slices);
      }

      public void drawPie(Graphics2D g, Rectangle area, PieValue[] slices) {
      ... 
```

# jquery - 使用表单的 jQuery UI 对话框

> ID：12432606
> 
> 赞同：0
> 
> 时间：2012-09-14T22:08:46.517
> 
> 标签：jquery, forms, jquery-ui, dialog

我有以下代码：

**HTML**

```
<form action="" method="post" accept-charset="utf-8" class="button-to-delete">
    <input type="submit" name="delete" value="Delete" class="btn btn-danger" />
</form>

<div class="hidden-dialog" title="Delete product">
    <p>Are you sure that you want to delete thi product?</p>
    <p>Green Lantern T-Shirt</p>
</div> 
```

**CSS**

```
.hidden-dialog   { display: none; }​ 
```

**JavaScript**

```
$(document).ready(function() {
    var dialog = $('form.button-to-delete + div.hidden-dialog').dialog({
        resizable: false,
        autoOpen: false,
        modal: true,
        buttons: {
            'Yes!' : {
                class: 'btn btn-danger',
                text: 'Yes!',
                click: function () {
                    $(this).prev('form.button-to-delete').submit(true);
                }
            },
            'No!' : {
                class: 'btn',
                text: 'No!',
                click: function () {
                    $(this).dialog("close");
                }
            }
        }
    });

    $('form.button-to-delete').submit(function() {
        var targetURL = $(this).attr("href");

        dialog.dialog('open');
        return false;
    }); 
}); 
```

这是 jsFiddle 版本：http: [//jsfiddle.net/mdJZ8/1/](http://jsfiddle.net/mdJZ8/1/)

因此，当我单击表单按钮时，会出现一个带有消息和两个按钮的 jQuery UI 对话框：“是！” 和不！”。“不！” 按钮正常工作。“是！” 另一方面，按钮没有。它应该提交表单，但它没有。我怀疑问题出在`return false`声明中。但是，如果我删除该语句，则对话框会出现片刻，并且表单会被提交，而不会让用户有机会选择一个选项。如何修复此代码，使其仅在用户单击“是！”时才提交表单 请问按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:17:21.027

我想您可以将 JS 替换为：

```
 $(document).ready(function() {

 var dialog = $('form.button-to-delete + div.hidden-dialog').dialog({
    resizable: false,
    autoOpen: false,
    modal: true,
    buttons: {
        'Yes!' : {
            class: 'btn btn-danger',
            text: 'Yes!',
            click: function () {
                return true;
            }
        },
        'No!' : {
            class: 'btn',
            text: 'No!',
            click: function () {
                $(this).dialog("close");
                return false;
            }
        }
    }
});

$('form.button-to-delete').submit(function() {
    var targetURL = $(this).attr("href");

    return dialog.dialog('open');
}); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:31:38.213

如何关闭模态对话框的可见性？

```
$(document).ready(function() {
  var dialog = $('form.button-to-delete + div.hidden-dialog').dialog({
    resizable: false,
    autoOpen: false,
    modal: true,
    buttons: {
        'Yes!' : {
            class: 'btn btn-danger',
            text: 'Yes!',
            click: function () {
                $(this).prev('form.button-to-delete').submit();
            }
        },
        'No!' : {
            class: 'btn',
            text: 'No!',
            click: function () {
                $(this).dialog("close");
            }
        }
    }
  });

  $('form.button-to-delete').submit(function() {
    var targetURL = $(this).attr("href");

    if($('div.hidden-dialog').is(':visible')) {
      return true;
    }

    dialog.dialog('open');
    return false;

  }); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:42:14.880

我发现出了什么问题。我需要做的是使用以下语句：

```
$('form.button-to-delete').unbind("submit").submit(); 
```

这是完整的 jQuery 脚本：

```
$(document).ready(function() {    
    var dialog = $('form.button-to-delete + div.hidden-dialog').dialog({
        resizable: false,
        autoOpen: false,
        modal: true,
        buttons: {
            'Yes!' : {
                class: 'btn btn-danger',
                text: 'Yes!',
                click: function () {
                    $('form.button-to-delete').unbind("submit").submit();
                }
            },
            'No!' : {
                class: 'btn',
                text: 'No!',
                click: function () {
                    $(this).dialog("close");
                }
            },
        }
    });

    $('form.button-to-delete').submit(function() {
        var targetURL = $(this).attr("href");

        dialog.dialog('open');
        return false;
    });
}); 
```

# database - 南迁移模式迁移不起作用

> ID：12432608
> 
> 赞同：0
> 
> 时间：2012-09-14T22:09:05.673
> 
> 标签：database, django, django-south

为了确保我在当前的 django 项目中正确设置了设置，我执行了以下操作：

*   向南添加到 installed_apps
*   manage.py syncdb（使用 windows）
*   manage.py convert_to_south 应用

我还没有对我的数据库进行更改，但无论我是否这样做，我都会运行：

*   manage.py schemamigration app --auto

我收到以下错误：

```
Traceback (most recent call last):
  File "manage.py", line 17, in <module>
    execute_from_command_line(sys.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 443, in execute
_from_command_line
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 382, in execute

    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 196, in run_from_ar
gv
    self.execute(*args, **options.__dict__)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "C:\Python27\lib\site-packages\south\management\commands\schemamigration.py", line 98, i
n handle
    old_orm = last_migration.orm(),
  File "C:\Python27\lib\site-packages\south\utils.py", line 62, in method
    value = function(self)
  File "C:\Python27\lib\site-packages\south\migration\base.py", line 418, in orm
    return FakeORM(self.migration_class(), self.app_label())
  File "C:\Python27\lib\site-packages\south\orm.py", line 46, in FakeORM
    _orm_cache[args] = _FakeORM(*args)
  File "C:\Python27\lib\site-packages\south\orm.py", line 125, in __init__
    self.models[name] = self.make_model(app_label, model_name, data)
  File "C:\Python27\lib\site-packages\south\orm.py", line 318, in make_model
    field = self.eval_in_context(code, app, extra_imports)
  File "C:\Python27\lib\site-packages\south\orm.py", line 236, in eval_in_context
    return eval(code, globals(), fake_locals)
  File "<string>", line 1
    SouthFieldClass(default=datetime.datetime(2012, 9, 14, 20, 46, 3, 957000, tzinfo=<UTC>))
                                                                                     ^
SyntaxError: invalid syntax 
```

**这是怎么回事？** 它不允许我使用架构迁移。搜索了很多地方并删除和重置数据库以及所有内容，似乎无法找出问题所在。

问题已解决：

不知道 south_migrationhistory 的位置。我一直想知道一些额外的信息挂在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T22:15:37.740

看看这里：[http ://south.aeracode.org/ticket/1069](http://south.aeracode.org/ticket/1069)

它是在较新的 South 版本中修复的错误。看来您使用的是 South(<=0.7.3) 的过时版本

# ios - 将大纹理渲染到较小的渲染缓冲区

> ID：12432609
> 
> 赞同：2
> 
> 时间：2012-09-14T22:09:06.573
> 
> 标签：ios, opengl-es

我有一个 852x640 的渲染缓冲区和一个 1280x720 的纹理。当我渲染纹理时，它会被裁剪，而不仅仅是拉伸。我知道纵横比需要更正，但我怎样才能得到它以便完整的纹理显示在渲染缓冲区中？

```
//-------------------------------------
    glGenFramebuffers(1, &frameBufferHandle);
    glBindFramebuffer(GL_FRAMEBUFFER, frameBufferHandle);

    glGenRenderbuffers(1, &renderBufferHandle);
    glBindRenderbuffer(GL_RENDERBUFFER, renderBufferHandle);

    [oglContext renderbufferStorage:GL_RENDERBUFFER fromDrawable:(CAEAGLLayer *)self.layer];

    glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_WIDTH, &renderBufferWidth);
    glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_HEIGHT, &renderBufferHeight);

    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, renderBufferHandle);
//-------------------------------------

static const GLfloat squareVertices[] = {
    -1.0f, 1.0f,
    1.0f, 1.0f,
    -1.0f,  -1.0f,
    1.0f,  -1.0f
};

static const GLfloat horizontalFlipTextureCoordinates[] = {
    0.0f, 1.0f,
    1.0f, 1.0f,
    0.0f,  0.0f,
    1.0f,  0.0f,
};

size_t frameWidth = CVPixelBufferGetWidth(pixelBuffer);
size_t frameHeight = CVPixelBufferGetHeight(pixelBuffer);

CVReturn err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, 
                                                            videoTextureCache,
                                                            pixelBuffer,
                                                            NULL,
                                                            GL_TEXTURE_2D,
                                                            GL_RGBA,
                                                            frameWidth,
                                                            frameHeight,
                                                            GL_BGRA,
                                                            GL_UNSIGNED_BYTE,
                                                            0,
                                                            &texture);

if (!texture || err) {
    NSLog(@"CVOpenGLESTextureCacheCreateTextureFromImage failed (error: %d)", err);  
    return;
}

glBindTexture(CVOpenGLESTextureGetTarget(texture), CVOpenGLESTextureGetName(texture));

glViewport(0, 0, renderBufferWidth, renderBufferHeight); // setting this to 1280x720 fixes the aspect ratio but still crops

glBindFramebuffer(GL_FRAMEBUFFER, frameBufferHandle);

glUseProgram(shaderPrograms[PASSTHROUGH]);

// Update attribute values.
glVertexAttribPointer(ATTRIB_VERTEX, 2, GL_FLOAT, 0, 0, squareVertices);
glEnableVertexAttribArray(ATTRIB_VERTEX);
glVertexAttribPointer(ATTRIB_TEXTUREPOSITON, 2, GL_FLOAT, 0, 0, horizontalFlipTextureCoordinates);
glEnableVertexAttribArray(ATTRIB_TEXTUREPOSITON);

glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

// Present
glBindRenderbuffer(GL_RENDERBUFFER, renderBufferHandle);
[oglContext presentRenderbuffer:GL_RENDERBUFFER]; 
```

**编辑**

我仍然遇到问题。我已经包含了更多的来源。基本上，我需要将整个原始输入纹理显示在宽屏上，同时将原始纹理写入磁盘。

当渲染到较小的纹理时，事物会自动缩放，渲染缓冲区不是这样吗？

我想我可以再通过一个较小的纹理，但这会减慢速度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:51:51.227

首先，`glViewport(0, 0, renderBufferWidth, renderBufferHeight);`坚持`852x640`。问题出在您的`squareVertices`- 看起来它保留了代表纹理大小的坐标。您需要将其设置为等于渲染缓冲区大小。

这个想法是将纹理映射到您的`squareVertices`矩形上。因此，您可以渲染映射到任何大小的矩形的任何大小的纹理 - 纹理图像将被缩放以适合矩形。

[更新：方形顶点]

在您的情况下，它应该是：

```
{
0.0f, (float)renderBufferWidth/frameHeight,
(float)renderBufferWidth/frameWidth, (float)renderBufferHeight/frameHeight,
0.0f,  0.0f,
(float)renderBufferWidth/frameWidth,  0.0f,
}; 
```

但这并不是共同的好解决方案。从理论上讲，屏幕上的矩形大小是由顶点位置和变换矩阵决定的。在屏幕上渲染之前，每个顶点都与矩阵相乘。看起来你没有设置 OpenGL[投影矩阵](http://www.khronos.org/opengles/documentation/opengles1_0/html/glOrtho.html)。使用正确的正交投影，您的顶点应该具有像素等效位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:37:45.023

由于我是 OpenGL 的新手，记得要映射的纹理应该是 2 乘 2 的幂。例如，图像分辨率应该是...... 256x256、512x512。然后您可以使用 gl.glScalef(x,y,z); 缩放图像 根据您的要求相应地发挥作用。相应地获取高度和宽度并将它们放入您的 scalef 函数中。试试这个，我希望这有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T03:22:22.093

试试这些功能。我的答案可以从[info@songhoa.ca.com得到验证](http://www.songho.ca/opengl/gl_fbo.html)

```
glGenFramebuffers() 
```

*   void glGenFramebuffers(GLsizei n, GLuint* ids)

    *   要创建的帧缓冲区数
*   void glDeleteFramebuffers(GLsizei n, const GLuint* ids)

    *   指向 GLuint 变量或数组以存储多个 ID 的指针。它返回未使用的帧缓冲区对象的 ID。ID 0 表示默认帧缓冲区，即窗口系统提供的帧缓冲区。

*`glDeleteFramebuffers()`FBO不再使用时可以调用删除。*

```
glBindFramebuffer() 
```

**创建 FBO 后，必须先对其进行绑定，然后才能使用它。**

*   void glBindFramebuffer（GLenum 目标，GLuint id）

    *   第一个参数是目标应该是 GL_FRAMEBUFFER。

    *   第二个参数是帧缓冲区对象的 ID。

*一旦绑定了 FBO，所有 OpenGL 操作都会影响当前绑定的帧缓冲区对象。对象 ID 0 是为默认窗口系统提供的帧缓冲区保留的。因此，为了取消绑定当前帧缓冲区（FBO），请在`glBindFramebuffer()`.*

* * *

尝试使用这些，或者至少**[访问对](http://www.songho.ca/opengl/gl_fbo.html)**您有很大帮助的链接。抱歉，我在 OpenGL 方面没有经验，但我想提供链接，并解释这 2 个功能。我认为您可以使用这些信息来编写代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T09:20:49.870

哦，男孩，所以答案是这一直有效；）事实证明，iPhone 4 上的高分辨率预设模式实际上比中等分辨率预设覆盖的区域更少。这让我陷入了一个循环，直到 Brigadir 建议我应该首先做什么，检查 GPU 快照。

我也通过破解 GPUImage 框架中的适当代码来解决纵横比问题。[https://github.com/bradLarson/GPUImage](https://github.com/bradLarson/GPUImage)

# c# - 如何序列化 ICollection 作为列表 到 XML？

> ID：12432619
> 
> 赞同：0
> 
> 时间：2012-09-14T22:10:02.473
> 
> 标签：c#, reflection, xmlserializer

我正在尝试将 List 动态序列化为 Xml。我可以这样做，只要我没有 ICollection 作为 T 的属性。

我想在将 ICollection 类型写入 Xml 之前将其动态覆盖到 List 中。

这就是我到目前为止所拥有的。

```
List<-XmlElementAttribute-> attrToConvertList = new List<-XmlElementAttribute->();

foreach (var propertyInfo in typeof(T).GetProperties())
{
    if (propertyInfo.PropertyType.Name == "ICollection`1")
    {
        XmlElementAttribute attrToConvert = new XmlElementAttribute();
        attrToConvert.ElementName = propertyInfo.Name;
        attrToConvert.Type = typeof(List<>);
        attrToConvert.Type = attrToConvert.Type.MakeGenericType(propertyInfo.PropertyType.GetGenericArguments()[0]);
        attrToConvertList.Add(attrToConvert);
    }
}
XmlAttributeOverrides overrides = new XmlAttributeOverrides();
XmlAttributes attributesToConvert = new XmlAttributes();

foreach (var xmlElementAttribute in attrToConvertList)
    attributesToConvert.XmlElements.Add(xmlElementAttribute);

overrides.Add(typeof(T), attributesToConvert);
XmlSerializer serializer = new XmlSerializer(typeof(List<T>), overrides); 
```

我收到无法序列化类型 ICollection 的错误，因为它是一个接口。我的印象是，我对 XmlAttributeOverrides 所做的事情应该将 ICollection 覆盖为类型列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:31:08.193

我通过使用 Newton.Json 序列化对象解决了我原来的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:39:21.763

XML 序列化不处理接口，显然 XmlAttributeOverride 不允许您绕过该行为。您可以更改属性的类型，或创建一个类型，仅用于序列化，其中属性为`List<T>`.

例子：

```
class RealClass
{
    ICollection<int> SomeInts { get; set; }
}

class MySerializationClass
{
    private readonly RealClass _wrappedObject;
    public SerializationClass() : this(new RealClass()) { }
    public SerializationClass(RealClass wrappedObject)
    {
        _wrappedObject = wrappedObject;
    }
    public List<T> SomeInts
    {
        get { return new List<T>(_wrappedObject.SomeInts); }
        set { _wrappedObject.SomeInts = value; }
    }
} 
```

您也可以使用显式接口成员实现来执行此操作，并在大多数代码中使用该接口：

```
interface IHaveSomeInts
{
    ICollection<int> SomeInts { get; set; }
}

class TheClass : IHaveSomeInts
{
    public List<T> SomeInts { get; set; }
    ICollection<T> IHaveSomeInts.SomeInts
    {
        get { return SomeInts; }
        set { SomeInts = new List<T>(value); }
    }
} 
```

将 an 分配`ICollection<T>`给 an 时`IList<T>`，我可能会`as`查看是否可以只转换对象而不是创建新对象，以避免不必要地创建列表。

# json - GWT - JSNI - 传递 json 对象

> ID：12432621
> 
> 赞同：3
> 
> 时间：2012-09-14T22:10:07.320
> 
> 标签：json, gwt, double-quotes, jsni

我有一个像下面这样的json-

```
String sdata = "[{ name : "AAPL", data:[[1112832000000,43.56],[1112918400000,43.74],[1113177600000,41.92],[1113264000000,null],[1113350400000,null]], tooltip: {valueDecimals: 2}}]"; 
```

我正在使用 JSNI 将它从 java 传递给 javascript。

```
public static native JavaScriptObject drawStock(Element element,String cname, String sdata) /*-{
       var 图表 = 新 $wnd.Highcharts.StockChart({
           图表 ： {
               renderTo : 元素
           },

           范围选择器：{
               已选择：1
           },

           标题 ： {
               文本：cname
           },

           series : sdata //=====这是应该分配 json 的地方。

           });

返回图表；

}-*/;

```

上面的本机函数不能按预期工作，因为“我相信”，sdata 变量有一个双引号，因此不被 javascript 视为 json 对象。

如何将不带引号的 java 中的 json 对象传递给 javascript 本机接口函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:22:44.363

在 java 中使用 safeEval 函数进行安全评估。

JavaScriptObject jsdata= JsonUtils.safeEval(sdata.toString());

drawStock（元素，cname，jsdata）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:10:33.723

在您的示例中，您分配`series`给包含 JSON 对象的**字符串**，而不是对象本身。要将其转换为对象，请使用`eval`：

```
series: eval(sdata) 
```

# facebook - Spectrum XMPP 网关和 Facebook 平台身份验证

> ID：12432622
> 
> 赞同：3
> 
> 时间：2012-09-14T22:10:22.500
> 
> 标签：facebook, xmpp, ejabberd, gateway

我是 Jappix XMPP 网络客户端的创始人，我需要这个非常重要的东西来实现与 Jappix 相关的项目目的。

我想通过 Spectrum Gateway 登录 Facebook Chat，这样我就可以通过我的 XMPP 帐户与我的 Facebook 朋友聊天，在一个使用 BOSH 的 JS 和 JSJaC 编码的 Web 客户端上。

Spectrum 已设置，FB 应用程序也可以，在 Spectrum 配置文件中设置了应用程序密码。

客户端，我可以很好地完成 FB 身份验证并获得 FB userID + accessToken。

在 Spectrum FB 注册页面上，用户名和密码字段中要附加哪些内容？

我试过了：

1.  用户名：userID@chat.facebook.com
2.  密码：accessToken

但它没有连接，我在 Spectrum 日志中看到它在身份验证过程中失败，用户名或密码无效，所以我相信我在生成凭据时做错了。

有什么建议吗？

# asp.net - ASP.NET MVC 3 中的签名程序集

> ID：12432624
> 
> 赞同：0
> 
> 时间：2012-09-14T22:10:25.173
> 
> 标签：asp.net, asp.net-mvc-3

我有一个已签名的类库，已添加到 ASP.NET MVC 3 应用程序中。

当我在托管服务器上部署应用程序时，它说，无法加载类型“....”我在签名程序集中拥有的类型的名称。

我是否需要将 .pfx 文件也复制到 asp.net 应用程序的 bin 中？

谢谢

# c# - C# Datagridview - 检查行被选中

> ID：12432627
> 
> 赞同：14
> 
> 时间：2012-09-14T22:10:32.287
> 
> 标签：c#, winforms, datagridview

我在我的 C# 程序中有这段代码，但是当单击某些按钮时它会抛出一个合适的结果，因为 DataGridView 中没有选择行（我使用 ClearSelection 方法）：

```
string selectedUser = usersGrid.SelectedRows[0].Cells[1].Value.ToString(); 
```

我可以在上述行之前进行某种检查以确保选择了一行吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-14T22:17:21.773

```
if (usersGrid.SelectedRows.Count > 0) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-14T22:18:14.877

我将尝试一下我认为您正在尝试做的事情，请在下面尝试

```
private void myButton_Click(object sender, EventArgs e)
{
    foreach (DataGridViewRow row in usersGrid.Rows)
    {
        if (this.usersGrid.SelectedRows.Count == 1)
        {
         // get information of 1st column from the row
         string selectedUser = this.usersGrid.SelectedRows[0].Cells[0].ToString();
        }
    }
} 
```

还可以执行以下操作并查看链接

设置[DataGridView.MultiSelect](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.multiselect.aspx) = false 和[DataGridView.SelectionMode](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.selectionmode.aspx) = FullRowSelect。这将使用户一次只能选择一行。

# iphone - NSManagedObjectMOdel 无法在 iOS 5 及更高版本上初始化

> ID：12432631
> 
> 赞同：0
> 
> 时间：2012-09-14T22:11:34.223
> 
> 标签：iphone, ios, ios5, core-data

我有一个项目在我为 iOS 4.x 构建它时运行良好，但是当我为 iOS 5.x 构建它时它失败了。澄清一下，4.x 构建将在 iOS 5.1 上运行良好，但是当我针对 5.0 或 5.1 构建时，我得到了下面描述的崩溃。

```
- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel == nil)
    {
        __managedObjectModel = [[NSManagedObjectModel mergedModelFromBundles:nil] retain];  //crash  
    }

    return __managedObjectModel;
} 
```

我检查了文档，据说提供`nil`的参数应该默认为主包。任何人都知道 CoreData 是否有任何改变会导致这种情况发生？

对于它的价值，我已经运行了“分析”工具，没有报告内存泄漏或任何异常情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:00:00.720

我设法想出了一个解决方法。我创建了一个新的单视图项目，然后复制生成的代码以将托管对象模型初始化到我的新项目中。我的预感是它`[[NSManagedObjectModel mergedModelFromBundles:nil]`在 iOS 5.1 SDK 中的工作方式不同，也许它无法找到我的数据模型，因为它没有存储在项目根目录中，而是一个单独的“数据”文件夹中。

```
- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil)
    {
        return __managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"PreferencesModel" withExtension:@"momd"];
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return __managedObjectModel;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:55:32.903

您实际上并没有描述崩溃或提供任何错误消息，但以下 StackOverflow 问题提供了可能有帮助的崩溃解决方案：

[由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'* -[__NSArrayM insertObject:atIndex:]: object cannot be nil](https://stackoverflow.com/q/7966149/558933)

# c++ - 利用 BST 的优先级队列 - 有趣的输出

> ID：12432632
> 
> 赞同：2
> 
> 时间：2012-09-14T22:11:37.863
> 
> 标签：c++, data-structures

我为我的数据结构类编写了一个使用二叉搜索树的优先级队列。它产生的输出对于某些输入是正确的，而对于其他输入则不正确。 **正确的输出：**

输入元素数量：5

输入第 1 个，共 5 个：1

输入第 2 个，共 5 个：2

输入第 3 个，共 5 个：3

输入第 4 个，共 5 个：4

输入第 5 个，共 5 个：5

输出 5 个中的第 1 个：5

输出 5 个中的第 2 个：4

输出 5 个中的第 3 个：3

输出 5 个中的第 4 个：2

输出 5 个中的第 5 个：1

按任意键继续 。. .

**输出不正确**

输入元素数量：5

输入第 1 个，共 5 个：-56

输入第 2 个，共 5 个：4

输入第 3 个，共 5 个：56

输入第 4 个，共 5 个：21

输入第 5 个，共 5 个：32

输出 5 个中的第 1 个：56

输出 5 个中的第 2 个：4

输出 5 个中的第 3 个：-56

输出 5 个中的第 4 个：-56

输出 5 个中的第 5 个：-56

按任意键继续 。. .

测试.cpp

```
#include <iostream>
#include "CTree.h"
#include "PriorityQueueBST.h"
using namespace std;

int main()
{

    int num, input, output;
    cout << "Enter number of elements: ";
    cin >> num;
    PriorityQueueBST p;
    for (int x = 0; x < num; x++)
    {
        cout << "Enter number " << x + 1  
            << " of " << num << ": ";
        cin >> input;
        p.Enqueue(input);
    }
    for (int y = 0; y < num; y++)
    {
        cout << "Outputting number " << y + 1  
            << " of " << num << ": ";
        if(p.IsEmpty())
        {
            break; //we are done (this is an error!)
        }
        output = p.Dequeue();
        cout << output << endl;
    }

    system("pause");
    return 0;
    //CTree* tr = new CTree();
    //
    //for (int i = 0; i < 3; i++)
    //  tr->Add();

    //tr->View();
    //system("pause");

    //return 0;
} 
```

BST 声明

```
//#ifndef CTREE_H
//#define CTREE_H
//using namespace std;

struct TreeNode
{
    int info;
    TreeNode* leftLink;
    TreeNode* rightLink;
};

class CTree
{
public:
    CTree();
    ~CTree();
    void Add(int);
    void View();
    bool IsEmpty();
    int DeleteLargest(TreeNode*);
    TreeNode *tree;
private:    
    void AddItem( TreeNode*&, TreeNode*);
    void DisplayTree(TreeNode*);
    void Retrieve(TreeNode*&, TreeNode*,bool&);
    void Destroy(TreeNode*&);
};

//#endif 
```

BST 实施

```
#include <iostream>
#include <string>

using namespace std;

#include "CTree.h"

CTree::CTree()
{
    tree = NULL;
}

CTree::~CTree()
{
    Destroy(tree);
}

void CTree::Destroy(TreeNode*& tree)
{
    if (tree != NULL)
    {
    Destroy(tree->leftLink);
    Destroy(tree->rightLink);
    delete tree;
    }
}

bool CTree::IsEmpty()
{
    if(tree == NULL) 
    {
        return true;
    }
    else
    {
        return false;
    }
}

void CTree::Add(int dataToEnter)
{
    TreeNode* newPerson = new TreeNode();
    /*cout << "Enter the person's name: ";
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
    cin.getline(newPerson->name, 20);*/
    //cout << "Enter the person's contribution: ";
    //cin >> newPerson->info;
    /*bool found = false;*/

    newPerson->info = dataToEnter;
    newPerson->leftLink = NULL;
    newPerson->rightLink = NULL;

    /*Retrieve(tree, newPerson, found);
     if (found)
         cout << "info allready entered\n";
     else*/
         AddItem(tree, newPerson);
}

void CTree::View()
{
    if (IsEmpty())
    {
        cout<<"The list is empy";
    }
    else
    {
        DisplayTree(tree);

    }

};

void CTree::AddItem( TreeNode*& ptr, TreeNode* newPer )
{
        if (ptr == NULL)
        {
            ptr = newPer;
        }
        else if ( newPer->info < ptr->info)
            AddItem(ptr->leftLink, newPer); 
        else
            AddItem(ptr->rightLink, newPer); 
}
void CTree::DisplayTree(TreeNode* ptr)
{
    if (ptr == NULL)
                    return;
    DisplayTree(ptr->rightLink);
    cout << ptr->info << endl; //cout<<ptr->name<<" "<<"$"<<ptr->info <<endl;
    DisplayTree(ptr->leftLink); 
}
void CTree::Retrieve(TreeNode*& ptr, TreeNode* newPer, bool& found)
{
    {
        if (ptr == NULL)
        {
            found = false; // item is not found.
        }
        else if ( newPer->info < ptr->info)
        {
            Retrieve(ptr->leftLink, newPer, found);
        }
             // Search left subtree.
        else if (newPer->info > ptr->info)
        {
            Retrieve(ptr->rightLink, newPer, found);// Search right subtree.
        }   
        else
        {
            //newPer.info = ptr->info; // item is found.
            found = true;
        }
    }
}

int CTree::DeleteLargest(TreeNode* tr)
{
    int largest = tr->info;
    TreeNode* prev = NULL;

    while (tr->rightLink != NULL)
    {
        prev = tr;
        tr = tr->rightLink;
        largest = tr->info;
    }

    if (prev != NULL && prev->rightLink != NULL)
    {
        delete prev->rightLink;
        prev->rightLink = NULL;
    }

    return largest;
}
//
//int CTree::DeleteLargest(TreeNode* tr)
//{
//  int largest = 0;
//  TreeNode* prev = NULL;
//
//  
//  while (tr->rightLink != NULL)
//  {
//      prev = tr;
//      tr = tr->rightLink;
//      largest = tr->info;
//  }
//
//  prev->rightLink = NULL;
//      
//  return largest;
//}

/*

    if (tr == NULL)
    {
        cout <<  "The tree is empty"<<endl;
    }
    else if (tr->rightLink == NULL)
    {
        largest = tr->info;
        prev->rightLink = NULL;
    }
    else
    {
        prev = tr;
        tr = tr->rightLink;
        largest = DeleteLargest(tr);    
    }

    */ 
```

PQ 声明

```
//#include <iostream>
//using namespace std;
//#include "SortedLinkedList.h"

#ifndef PRIORITYQUEUESLL__H
#define PRIORITYQUEUESLL__H

class PriorityQueueBST
{
    public:
        PriorityQueueBST();
        ~PriorityQueueBST();
        void Enqueue(int);
        int Dequeue();
        bool IsEmpty();

    private:
        CTree* ourTree;
        //sslNode* head;
};

#endif 
```

PQ 实施

```
#include <iostream>
using namespace std;
#include "CTree.h"
#include "PriorityQueueBST.h"

PriorityQueueBST::PriorityQueueBST()
{
    ourTree = new CTree();
    //head = NULL;
}

PriorityQueueBST::~PriorityQueueBST()
{

}

void PriorityQueueBST::Enqueue(int dataToEnter)
{
    ourTree->Add(dataToEnter);
}

int PriorityQueueBST::Dequeue()
{

    //check for empty??
    return ourTree->DeleteLargest(ourTree->tree);
}

bool PriorityQueueBST::IsEmpty()
{
    return ourTree->IsEmpty();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T22:26:47.263

在`DeleteLargest`中，考虑如果树看起来像

```
 4
       / \
      /   \
     2     7
    / \   /
    1  3  5 
```

和

```
int CTree::DeleteLargest(TreeNode* tr)
{
    int largest = tr->info;
    TreeNode* prev = NULL;

    while (tr->rightLink != NULL)
    {
        prev = tr;
        tr = tr->rightLink;
        largest = tr->info;
    }

    if (prev != NULL && prev->rightLink != NULL)
    {
        delete prev->rightLink;
        prev->rightLink = NULL;
    }

    return largest;
} 
```

你找到了 7，但是把 5 从树上剪下来，然后它就丢失了。而当根节点的右子树已经被完全删除后，`tr->rightLink`从头`NULL`开始，所以`prev`仍然存在`NULL`，什么都没有被删除。

对于第一种情况，您必须在删除 之前`tr`将 的左孩子嫁接到的右侧。第二种情况稍微复杂一些。由于在不更改函数签名的情况下无法更改包含，因此无法删除传入的根节点。您必须通过复制其左子节点的值、重新链接其子节点并删除原来的左孩子。`prev``tr``CTree`

¹ 好吧，当然还有其他可用的方法，但我能想到的只是复制`info`和删除不同的节点。

# android - android微调器没有正确调整大小

> ID：12432636
> 
> 赞同：0
> 
> 时间：2012-09-14T22:12:48.630
> 
> 标签：android, xml, layout, spinner

![我的](../Images/12e1e9a08e99a91675d996f01a46bcce.png)

以上是我的应用程序中的“详细信息”线性布局。如您所见，微调器似乎比“Level 1”和“Per Level”下降了一点。我已经弄乱了 xml 以尝试将所有内容放在一个共同的基础上，而无需微调器掉落，但我就是想不通。我尝试将微调器高度设置为“fill_parent”，它确实在同一基线上，但微调器内没有显示任何文本。有人对该怎么做有任何想法吗？

它们所在布局的 XML：

```
<LinearLayout
        android:id="@+id/details"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:baselineAligned="false"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/blank"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="2" />

        <TextView
            android:id="@+id/levelOne"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/level_1" />

        <TextView
            android:id="@+id/perLevel"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/per_level" />

        <Spinner
            android:id="@+id/spinner1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

    </LinearLayout> 
```

这是我在微调器内的文本的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@+id/spinnerDisplay"
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
android:textSize="12sp">

</TextView> 
```

我在我的类中使用它来填充我想要的文本大小：

```
spinLevels = (Spinner) view.findViewById(R.id.spinner1);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(getActivity(), R.array.LevelChosen, R.layout.spinner_item);      
spinLevels.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T23:18:41.933

在`Spinner`XML 中，添加以下行：

```
android:layout_gravity="center_vertical" 
```

这应该在布局中垂直居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T23:18:43.950

我想通了，我只需要从细节布局中删除“android:baselineAligned="false"。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-30T20:30:29.263

以上都没有奏效。对我有用的是“权重”

```
android:layout_width="fill_parent"
android:layout_weight="1" 
```

# python - 在 PyQt 中设置 Windows 任务栏图标

> ID：12432637
> 
> 赞同：34
> 
> 时间：2012-09-14T22:12:49.553
> 
> 标签：python, windows, pyqt, icons, taskbar

我正在 Python 的 PyQt4 中开发一个应用程序，但找不到如何更改任务栏图标。我在 Qt 的 Designer 中制作了 .ui 文件，我可以在其中更改`windowIcon`属性。但这不是我要找的。我想更改 Windows 任务栏中应用程序图标的外观。现在它是一个窗口图标中的 Python 徽标。

我在 SO:[链接](https://stackoverflow.com/questions/1551605/how-to-set-applications-taskbar-icon)上找到了一些信息，但这对我没有多大帮助。

我试过：

```
app = QtGui.QApplication([])
app.setWindowIcon(QtGui.QIcon('chip_icon_normal.png'))
app.exec_() 
```

但图标保持不变。

我要更改的内容，显示图片：（这是在主窗口/对话框或应用程序上调用 setWindowIcon 完成的，如上所示。）

![任务栏图标变化](../Images/fd91147fd4d262f4aeeb5d86fe021088.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-21T00:31:30.270

此问题是由 Windows 平台上处理任务栏图标的一些特殊性引起的。

有关详细信息，请参阅[此答案](https://stackoverflow.com/a/1552105/984421)以及使用`ctypes`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-24T10:32:50.507

在我看来，问题可能是由于缺少大小合适的图标引起的。以下设置在 PyQT4 中对我有用：

```
# set app icon    
app_icon = QtGui.QIcon()
app_icon.addFile('gui/icons/16x16.png', QtCore.QSize(16,16))
app_icon.addFile('gui/icons/24x24.png', QtCore.QSize(24,24))
app_icon.addFile('gui/icons/32x32.png', QtCore.QSize(32,32))
app_icon.addFile('gui/icons/48x48.png', QtCore.QSize(48,48))
app_icon.addFile('gui/icons/256x256.png', QtCore.QSize(256,256))
app.setWindowIcon(app_icon) 
```

我在 Windows 7 中有一个任务栏图标，并且在所有窗口中都有正确的图标，而没有对 ui 文件进行任何更改。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-15T00:52:49.597

您需要在窗口上调用 setWindowIcon(...) ，而不是在应用程序上。

这是一个对我有用的例子：

```
#!/usr/bin/env python3

import os
import sys
import subprocess
import os.path

from PyQt4 import QtGui
from PyQt4 import QtCore

class MyWin(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(MyWin, self).__init__(parent)
        self.setWindowTitle("My Window")
        self.setWindowIcon(QtGui.QIcon('test_icon.png'))
        self.show()

def main(args):
    app = QtGui.QApplication([])

    ww= MyWin()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main(sys.argv[1:]) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-21T05:57:25.170

对我来说，以下代码适用于更改任务栏图标和窗口图标

```
win.setWindowIcon(QIcon('logo.png')) 
```

# iphone - 如何匹配两个随机数，然后在 xcode 界面生成器中打印匹配，使用目标 c

> ID：12432640
> 
> 赞同：0
> 
> 时间：2012-09-14T22:12:54.837
> 
> 标签：iphone, objective-c, ios, xcode, interface-builder

我正在尝试我的第一个 iphone 应用程序。我现在被困住了。我有两个显示单独随机数的标签。我使用按钮和 IBAction 生成数字，然后将它们传递给标签。现在我需要确定两个数字何时匹配，然后在另一个标签上打印“匹配”。我正在尝试各种不同的东西，但不知何故我错过了一些东西。如果有人可以帮助解释如何从代码角度解释如何执行此操作并将其连接到界面构建器中，那就太棒了！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:17:19.777

在获取并显示随机数的方法中，您只需比较它们并相应地更改第三个标签中的文本。

```
- (IBAction)buttonPressed {
    // Generate the 2 random numbers and show them in the labels here.

    // Then compare them and show the result in the third label:
    if (randomNumber1 == randomNumber2) {
        thirdLabel.text = @"Match";
    } else {
        thirdLabel.text = @"No Match";
    }
} 
```

# magento - 无法修改 Magento 事件观察者中的响应，即使观察者正在触发

> ID：12432643
> 
> 赞同：5
> 
> 时间：2012-09-14T22:13:12.247
> 
> 标签：magento, magento-1.7

我正在尝试使用观察者来修改添加到购物车控制器操作的响应，但仅限于 AJAX 请求的上下文中。

我的观察者**被**调用并且我的 JS 正在检索数据，我已经通过`die()`在我的观察者函数中放入 a`cartAdd()`并验证响应开发者控制台来验证这一点，我正在使用它来查看我从 Magento 响应的结果。所以JS不是这里的问题。

我的主要问题是我似乎无法通过正常功能修改响应。我通过使用获取请求`$observer->getEvent()->getControllerAction()->getResponse()`，然后通过`setHeader()`、 或`setBody()`或任何其他修改响应的函数对其进行更改，但对响应绝对没有影响！

有人知道为什么我无法修改观察者的响应吗？

在 /app/code/local/mynamespace/mymodule/etc/config.xml 中：

```
<frontend>
....
    <events>
        <controller_action_predispatch_checkout_cart_add>
            <observers>
                <mymodule_cart_add>
                    <type>singleton</type>
                    <class>mymodule/observer</class>
                    <method>cartAdd</method>
                </mymodule_cart_add>
            </observers>
        </controller_action_predispatch_checkout_cart_add>
    </events>
</frontend> 
```

在 /app/code/local/mynamespace/mymodule/Model/Observer.php 中：

```
public function cartAdd(Varien_Event_Observer $observer)
{
    $controllerAction = $observer->getEvent()->getControllerAction();
    if($controllerAction->getRequest()->isAjax()) {
        $response = $controllerAction->getResponse();
        // I've even tried using:
        // $response = Mage::app()->getResponse();
        $response->setHeader('HTTP/1.1','403 Forbidden'); //using this because i will need it in my final code and it will make it immediatly obvious the response has been changed
        $response->setHeader('Content-type', 'application/json');
        $response->setBody('hello world!!!!');
        // this is to stop the product from being added to the cart
        $controllerAction->setFlag('', Mage_Core_Controller_Varien_Action::FLAG_NO_DISPATCH, true);
    }
} 
```

*请注意：我知道这段代码根本不会 AJAXify 添加到购物车（这是我的最终目标）。目前我只是想解决这个问题*

我最终只是获得了由于运行添加到购物车操作而最终进入的页面内容：

![我在控制台中看到的数据示例，如我的 JS 代码所示](../Images/791797d5db0c8c08b462bf0e4ad681fc.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T00:03:03.577

将产品添加到购物车时，管理员可配置的行为可以将人员发送到购物车页面或将他们重定向回产品页面。请参阅**系统 > 配置 > 结帐 > 购物车：将产品重定向到购物车**字段后。

这种重定向行为是通过重定向来完成的，该重定向将取代动态`controller_action_predispatch_checkout_cart_add`事件中设置的任何重定向；[参考。](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Checkout/controllers/CartController.php#L209)`Mage_Checkout_CartController::addAction()`的[最后一点逻辑](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Checkout/controllers/CartController.php#L209)。不过，不要害怕！Magento 核心开发人员也需要覆盖此行为，因此如果在对象上设置了标志，则可以通知**Mage_Checkout**购物车控制器的`addAction()`方法绕过正常的重定向行为。`checkout/session`不仅有一个钩子和支持逻辑使它工作，而且实际上有一个来自核心的工作示例——对开发人员来说总是一件好事。

就在`addAction()`方法中的最终重定向逻辑之前，购物车控制器的`addAction()`方法调度[`checkout_cart_add_product_complete`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Checkout/controllers/CartController.php#L205)事件。[该事件](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Wishlist/etc/config.xml#L87)由**Mage_Wishlist**观察者观察。快速回顾该方法的[相关最终逻辑](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Wishlist/Model/Observer.php#L137)`Mage_Wishlist_Model_Observer::processAddToCart()`显示了如何防止购物车控制器的`addAction()`方法重定向 - 即通过`no_cart_redirect`在对象上设置标志`checkout/session`，从而保留响应对象上设置的重定向。

在这种情况下还有一个考虑因素。很可能应该保留**Mage_Wishlist观察者的行为，即：将产品从愿望清单添加到购物车后，客户可能会被重定向到愿望清单中的下一个产品。**这是观察者处理顺序很重要的情况之一。为确保保留**Mage_Wishlist**模块的添加到购物车行为，其他使用该`checkout_cart_add_product_complete`事件的模块应在**Mage_Wishlist**观察者之前触发。在自定义模块的声明文件中，应将 Mage_Wishlist 模块设置为依赖于自定义模块，这将确保自定义模块的观察者将在**Mage_Wishlist**模块之前触发：

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Custom_Module>
            <active>true</active>
            <codePool>local</codePool>
        </Custom_Module>
        <Mage_Wishlist>
            <depends>
                <Custom_Module />
            </depends>
        </Mage_Wishlist>
    </modules>
</config> 
```

如果**Mage_Wishlist**模块不是一个因素，那么要使用的更好的目标事件将是动态生成的`controller_action_postdispatch_checkout_cart_add`事件，它是通用事件之前的最后一个目标`controller_front_send_response_before`事件。

# html - window.location.reload 刷新主窗口

> ID：12432646
> 
> 赞同：0
> 
> 时间：2012-09-14T22:13:26.687
> 
> 标签：html, dom, window, reload

以下是在页面上，当我单击它时 - 我不希望页面刷新，但只刷新此链接打开的新窗口 - 我想刷新新打开的页面，而不是主窗口。

单击链接会正确打开新窗口，但也会刷新主窗口（链接所在的位置）。这是不可取的，我想知道如何阻止它这样做。

```
<a href="" onclick="window.open('URL','mywin');mywin.location.reload();">clik to open new window</a>

<a href="" onclick="window.open('URL','mywin');">clik to open new window</a> 
```

请建议。

如下所示，但不起作用：事实上它正在打破新窗口，新窗口显示为空白窗口！

```
<a href="" onclick="mywin = window.open('URL','mywin');mywin.location.reload();">clik to open new window</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T22:19:04.673

这是在新窗口中打开链接的正确方法。如果 javascript 不可用，该链接仍然有效。

```
<a href="http://URL" onclick="window.open(this.href,'popupwindow');return false;">Click Me</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:18:29.073

`mywin`是窗口名称，而不是变量。
您需要将返回的 wobject 存储`window.open()`在全局变量中：

```
onclick="window.mywin = window.open('URL','mywin');"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T23:18:46.580

主窗口重新加载的问题很可能是这`href=""`条线。这可能会导致浏览器导航到它当前所在的页面（并因此刷新）。您应该添加`return false;`到 js，并且可能还采用更标准的链接目标，例如`href="#"`它将导航到同一页面的顶部而无需刷新（尽管这仍然会被`false`返回取消）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T23:26:43.873

朋友们，这样做解决了：

```
<a href="#" onclick="window.open('URL','mywin');">clik to open new window</a> 
```

# mysql - MySQL - 选择从给定日期开始的所有事件加上给定日期之前的最新事件

> ID：12432649
> 
> 赞同：0
> 
> 时间：2012-09-14T22:13:41.747
> 
> 标签：mysql

例如，如果我有

```
Event
------
id
start_date
end_date
... 
```

我可以用：

```
SELECT * FROM event WHERE start_date > NOW() 
```

但我还想在 start_date BEFORE now 中包含最近的一个事件。所以我将其修改为：

```
(SELECT * FROM event WHERE start_date < NOW() ORDER BY start_date DESC LIMIT 1)
UNION ALL  
(SELECT * FROM event WHERE start_date > NOW()) 
```

这给了我想要的结果，但我想知道是否有更直接的方法来完成这个，也许不需要使用额外的 UNION 和 SELECT，因为我的实际查询对连接更复杂，我不想重复它。有没有更好的方法来编写该查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T00:14:42.343

你可以这样做：

```
SELECT * FROM event WHERE start_date >= (
  SELECT MAX(start_date) FROM event WHERE start_date < NOW()
) 
```

# jquery - 如何在鼠标悬停事件中向谷歌地图添加标记

> ID：12432650
> 
> 赞同：-1
> 
> 时间：2012-09-14T22:14:05.307
> 
> 标签：jquery, google-maps-api-3

您能否看看我对这个示例的尝试：http: [//jsfiddle.net/Behseini/dbw7n/10/](http://jsfiddle.net/Behseini/dbw7n/10/) 并让我知道如何在鼠标悬停事件中向地图添加和删除标记？我不想添加任何信息窗口。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T23:16:49.340

[Google Maps Api 3 仅删除选定的标记](https://stackoverflow.com/questions/8521766/google-maps-api-3-remove-selected-marker-only)

```
var id;
var markers = {};
var addMarker = function() {
    marker = new google.maps.Marker({
        position: latlng,
        map: map,
        draggable: true
    });
    map.panTo(latlng);
    id = marker.__gm_id;
    markers[id] = marker;

    google.maps.event.addListener(marker, "rightclick", function(point) {
        id = this.__gm_id;
        delMarker(id);
    });
};

var delMarker = function(id) {
    marker = markers[id];
    marker.setMap(null);
};

$('#over_map').on('hover', function(e) {
    e.type == 'mouseenter' ? addMarker() : delMarker(id);
}); 
```

[http://jsfiddle.net/ARTsinn/dbw7n/14/](http://jsfiddle.net/ARTsinn/dbw7n/14/)

# java - 使用依赖库为虚拟对象制作可运行的 .jar

> ID：12432653
> 
> 赞同：1
> 
> 时间：2012-09-14T22:14:36.670
> 
> 标签：java, eclipse, maven

使用依赖库为虚拟对象制作可运行的 .jar。

有人可以概述我必须采取的步骤来制作一个带有依赖库的可运行.jar，以便使用 Maven 和 Eclipse 进行虚拟化。

我想使用 Maven 加载依赖的 jar，但将使用 eclipse 来完成我所有的编码......可以这样做吗？我开始了一个项目，但是 Eclipses 在我的 pom.xml 文件中没有看到依赖库，所以我在编码时遇到了错误。

这是我的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.runnablejar</groupId>
    <artifactId>RunnableJAR</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>RunnableJAR</name>
    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>

    </dependencies>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <configuration>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                    <archive>
                        <manifest>
                            <mainClass>fully.qualified.MainClass</mainClass>
                        </manifest>
                    </archive>
                </configuration>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

</project> 
```

而且我不知道为什么这段代码在日食中给了我错误

```
package org.runnablejar.RunnableJAR;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

/**
 * Hello world!
 *
 */
public class App 
{
    private static Log log = LogFactory.getLog(App.class.getName());

    public static void main( String[] args )
    {
        System.out.println( "Hello World!" );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:28:23.627

您可以：

1.  使用 Eclipse 的[m2eclipse](http://www.sonatype.org/m2eclipse) Maven 插件使项目具有 Maven 意识，
2.  使用[`mvn eclipse:eclipse`](http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html)maven 目标生成正确的`.classpath`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:18:08.223

谷歌告诉我这个[问题](https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven)可能会有所帮助。它似乎指向[Maven Assembly Plugin](http://maven.apache.org/plugins/maven-assembly-plugin/)。那是你要找的吗？

# php - wordpress 菜单和查看功能

> ID：12432656
> 
> 赞同：0
> 
> 时间：2012-09-14T22:14:58.627
> 
> 标签：php, wordpress

我花了几个小时寻找一种方法，让管理员可以看到自定义管理菜单，以及我创建的自定义用户角色，称为版主。该菜单仅对管理员而非版主显示。我怎样才能让它显示为两种用户类型？

**函数.php**

```
add_role( 'moderator', 'Moderator', array(
        'read' => true,
        'add_users'
    ));

    add_action('admin_menu', 'staff_menu');

    function staff_menu() {
       add_menu_page('Staff Menu: Options', 'Staff Menu', 'add_users', 'staff', 'staff_page', "favicon.ico", 3);
    }

    function staff_page(){
       echo "Staff Page Test will have options here";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:20:14.737

你忘了给`add_users`a 的值`true`。的[文档`add_user`](http://codex.wordpress.org/Function_Reference/add_role)表明您需要传递一个值，可能是一个布尔值。

```
add_role( 'moderator', 'Moderator', array(
        'read' => true,
        'add_users' => true
    )); 
```

* * *

**更新：**检查*管理员*角色是否仍然具有该`add_users`功能。

```
$admin_role = get_role('admin');
var_dump($admin_role->has_cap('add_users')); 
```

# asp.net - 浏览器请求慢

> ID：12432657
> 
> 赞同：1
> 
> 时间：2012-09-14T22:15:18.507
> 
> 标签：asp.net, asp.net-ajax

我有一个存在性能问题的 ASP.net\AJAX 4.0 表单应用程序。该应用程序托管在 go daddy 共享托管服务器上。间歇性地（大约一半时间）页面请求会挂起很长一段时间。我对其进行了大量跟踪，发现在请求到达服务器之前就发生了挂断。我已经设置了 ASP.net 跟踪以吐出在 application.begin_request 事件期间收集的时间戳。我观察到的典型场景的一个示例是，我在 00 秒时请求页面并在 30 秒时获得响应。ASP.net 跟踪告诉我 application.begin_request（通过时间戳）从 27 秒开始，整个页面周期不到 3 秒就完成了。

我还使用 Internet Explorer 9 F12 调试功能进行了跟踪，如果我查看计时选项卡（详细视图），我观察到所有挂断时间都发生在 Internet Explorer 调用的“开始”事件中 - 描述是“从最初创建请求到发送请求的时间”。

所以我的问题是，有人知道什么会导致请求间歇性地在浏览器中被阻止吗？它不会发生在开发中（仅来自托管站点），并且会发生在多种类型的浏览器和多台 PC 中 - 因此它不会与特定的浏览器环境隔离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T00:02:45.193

假设您的跟踪是准确的，那么这是一个折腾 - 尽管（仅）基于您发布的内容，但这似乎是一个网络问题。在指责之前，做尽职调查 - 例如`trace route`（测试每个“跳跃”的延迟），`nslookup`（测试 DNS 解析）和“显而易见的” - 例如您自己的网络环境 - 您在测试时是否在 WLAN 上？这些都是*间歇性*问题的“可能”。

# binding - Knockout 复合绑定路径

> ID：12432658
> 
> 赞同：1
> 
> 时间：2012-09-14T22:15:20.450
> 
> 标签：binding, path, knockout.js, composite

嗨，我正在尝试绑定到淘汰赛对象中的项目：

以下行不起作用

```
<span data-bind="text:selectedItem.details"></span> 
```

我尝试将其更改为在 selecteItem 后加上括号：

```
<span data-bind="text:selectedItem().details"></span> 
```

，它仍然没有工作。

与：一起使用，但是有效：

```
<div data-bind="with:selectedItem">
    <span data-bind="text:details" />
</div> 
```

我究竟做错了什么？如何在 Knockout 中使用复合绑定路径。谢谢

# python - 将字符串百分比转换为浮点数的干净方法是什么？

> ID：12432663
> 
> 赞同：42
> 
> 时间：2012-09-14T22:15:41.693
> 
> 标签：python, string, python-2.7, python-3.x

我查看了标准库和 StackOverflow，并没有找到类似的问题。那么，有没有办法在不滚动我自己的功能的情况下执行以下操作？如果有人在没有内置方法的情况下编写了一个漂亮的函数，则可以加分。

```
def stringPercentToFloat(stringPercent)
    # ???
    return floatPercent

p1 = "99%"
p2 = "99.5%"
print stringPercentToFloat(p1)
print stringPercentToFloat(p2)

>>>> 0.99
>>>> 0.995 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-09-14T22:18:10.463

使用`strip('%')`, 作为：

```
In [9]: "99.5%".strip('%')
Out[9]: '99.5'               #convert this to float using float() and divide by 100

In [10]: def p2f(x):
    return float(x.strip('%'))/100
   ....: 

In [12]: p2f("99%")
Out[12]: 0.98999999999999999

In [13]: p2f("99.5%")
Out[13]: 0.995 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-14T22:18:47.343

```
float(stringPercent.strip('%')) / 100.0 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-29T06:51:36.437

我编写了以下方法，该方法应始终将输出返回到与输入完全相同的精度，并且没有其他答案中的浮点错误。

```
def percent_to_float(s):
    s = str(float(s.rstrip("%")))
    i = s.find(".")
    if i == -1:
        return int(s) / 100
    if s.startswith("-"):
        return -percent_to_float(s.lstrip("-"))
    s = s.replace(".", "")
    i -= 2
    if i < 0:
        return float("." + "0" * abs(i) + s)
    else:
        return float(s[:i] + "." + s[i:]) 
```

## 解释

1.  从末尾去掉“%”。
2.  如果 percent 没有“.”，只需将其除以 100 即可返回。
3.  如果百分比是负数，去掉“-”并重新调用函数，然后将结果转换回负数并返回。
4.  去掉小数位。
5.  将（小数点所在的索引）减`i`2，因为我们要将小数点左移 2 个空格。
6.  如果`i`是负数，那么我们需要用零填充。
    *   **示例：**假设输入为“1.33%”。为了能够将小数位向左移动 2 个空格，我们需要用零填充。
7.  转换为浮点数。

* * *

测试用例（[在线试用](https://repl.it/@HatScripts/percenttofloat)）：

```
from unittest.case import TestCase

class ParsePercentCase(TestCase):
    tests = {
        "150%"              : 1.5,
        "100%"              : 1,
        "99%"               : 0.99,
        "99.999%"           : 0.99999,
        "99.5%"             : 0.995,
        "95%"               : 0.95,
        "90%"               : 0.9,
        "50%"               : 0.5,
        "66.666%"           : 0.66666,
        "42%"               : 0.42,
        "20.5%"             : 0.205,
        "20%"               : 0.2,
        "10%"               : 0.1,
        "3.141592653589793%": 0.03141592653589793,
        "1%"                : 0.01,
        "0.1%"              : 0.001,
        "0.01%"             : 0.0001,
        "0%"                : 0,
    }
    tests = sorted(tests.items(), key=lambda x: -x[1])

    def test_parse_percent(self):
        for percent_str, expected in self.tests:
            parsed = percent_to_float(percent_str)
            self.assertEqual(expected, parsed, percent_str)

    def test_parse_percent_negative(self):
        negative_tests = [("-" + s, -f) for s, f in self.tests]
        for percent_str, expected in negative_tests:
            parsed = percent_to_float(percent_str)
            self.assertEqual(expected, parsed, percent_str) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-09-24T01:21:05.507

只需 在解析之前将`%` by 替换为：`e-2``float`

```
float("99.5%".replace('%', 'e-2')) 
```

它更安全，因为如果没有`%`使用，结果仍然是正确的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-17T06:25:29.503

其他方式： `float(stringPercent[:-1]) / 100`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-16T19:10:19.757

根据@WKPlus 的回答，该解决方案考虑了小数点为点`.`或逗号的语言环境`,`

```
float("-3,5%".replace(',','.')[:-1]) / 100 
```

# asp.net-mvc-3 - 在 JQUERY 对话框上刷新验证码图像

> ID：12432666
> 
> 赞同：0
> 
> 时间：2012-09-14T22:15:49.483
> 
> 标签：asp.net-mvc-3, jquery

我在下面有一个**jquery 模型**对话框。当用户单击页面上的其中一个链接时，会出现带有验证码的对话框。当用户输入无效验证码时，验证码图像*应刷新*并显示新文本。但这并没有发生。下面是代码片段：

```
<div id="model">   
    <img id="captchaImage" src="@Url.Content("~/CaptchaImage.ashx?text=" + ViewBag.EncryptedCaptcha)" />  
    <input id="captchText" type="text" value="" />
    <a href="#"id="verfiyCaptcha">Validate</a>
</div> 
```

当用户点击验证时，文本通过**$.getJSON**发送到 MVC 控制器。控制器返回包装在 JSON 对象 Captcha 中的 isCpatchValid 和 encryptedText。如果验证码文本无效，我会在下面完成：

> $("#captchaImage").attr("src", "~/CaptchaImage.ashx?text=" + Captcha.encryptedText);

在 Chrome 调试器上，我可以看到控制器正在返回正确的加密文本。但是上面的这条线并不认为可以刷新 captch 图像。我怀疑这是由于异步调用。

有人可以帮助我如何刷新 Jauery 对话框上的验证码图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:32:55.907

您不能在 javascript 中使用“~”功能。那是 .NET 的事情。您需要将其包装在 .NET 调用中，例如：

```
attr("src", "@Url.Content("~/CaptchaImage.ashx")?text=" + Captcha.encryptedText) 
```

或者如果这个 JS 在一个单独的文件中，你可以在视图上定义一个变量，然后在 JS 文件中使用它，比如：

```
** in the view **
var CAPTCHA_IMAGE_URL = "@Url.Content("~/CaptchaImage.ashx")";

** in the JS file **
attr("src", CAPTCHA_IMAGE_URL + "?text=" + Captcha.encryptedText) 
```

# mysql - 查询具有多个可能匹配值的字段的最快方法

> ID：12432672
> 
> 赞同：0
> 
> 时间：2012-09-14T22:16:36.377
> 
> 标签：mysql

我有 2 张桌子。

第一个表称为`professions`，并按 ID 索引。所以现在每个职业都有一个与之关联的唯一 ID。

我的第二个表被称为`contacts`，在那里我有一个`profession`字段，现在只保存与某个专业相关联的 ID。

我的问题是，如果我的联系人有多个与它相关的职业怎么办。

查询表和存储联系人职业的最佳方法是什么。我不想做的是创建一个字段来为我拥有的每个职业存储一个 0 或 1 个整数。原因是因为我想动态增长专业表，并在我查询时让数字反映我网站上的任何动态变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:20:42.960

你有一个多对多的关系。要在 MySQL 中实现这一点，您应该使用链接表。所以`professions`and`contacts`应该在每个表中都有一个 id，但没有外键，然后您创建一个名为`profession_contact_links`or 的新表，包含它自己的 id 和`profession_id`and `contact_id`，它们都是各个表的外键。然后你可以有许多联系人与每个职业相关联，并且许多职业与每个联系人相关联。要在一个选择中将两个主表连接在一起，您将需要两个连接，它们是什么将取决于您要选择的确切内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T22:23:07.937

此建模问题的标准解决方案称为链接表。

基本上，它是一个包含链接的两个表的 id 的表，因此您将拥有一个包含 to 列的链接表和一个主键，即这两个列：

```
(profession_id, contact_id) 
```

或其他顺序......没那么重要，但顺序会影响性能，您最常搜索的关键是您首先想要的。

然后，您可以使用`SELECT ... IN (...)`或`SELECT ... JOIN ...`来查询您所追求的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T22:25:08.770

根据你想要什么以及你想如何找到它，我建议`rlike`或`in`

`SELECT ... FROM <table> WHERE <column name> RLIKE "^id1|id2|id3$"`

这将找到**包含**这三个术语中的任何一个的任何单元格

或使用

`SELECT ... FROM <table> Where <column name> IN ('id1','id2','id3')`

这将找到**等于**这三个之一的任何单元格。

# eclipse - Eclipse 上的 Groovydocs

> ID：12432674
> 
> 赞同：1
> 
> 时间：2012-09-14T22:16:52.887
> 
> 标签：eclipse, groovy

我的环境：OSX 10.7.4 Eclipse SDK

版本：4.2.0 版本号：I20120608-1400

有谁知道如何通过 Eclipse 生成 groovydocs？我找不到任何插件来帮助我生成它们。我安装了 Groovy-Eclipse（必需）和 Groovy Eclipse SDK（可选）。

如果您有任何解决方案，请解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T03:29:27.283

您将需要从命令行运行它们。如果您想要一些 Eclipse 集成，您可以将它们作为外部工具运行。您可以在此处创建外部工具：

![在此处输入图像描述](../Images/17af29f2a07d31fc3e1f5ee2a4343606.png)

在弹出的对话框中，指定 groovydoc 的路径。在参数部分，放置这个（以及你想要的任何其他选项）：

```
${folder_prompt:running groovydoc?:/Default/file/path} 
```

这将打开一个指定默认文件路径的文件夹提示。文件夹的选择将用作 groovydoc 调用的参数。

# jquery - jQuery for html table 根据其他单元格值更改单元格内容

> ID：12432675
> 
> 赞同：2
> 
> 时间：2012-09-14T22:16:58.897
> 
> 标签：jquery, forms, html-table

我有一个类似的表，但有很多行：

```
<table width=400px id=mytable>
 <tr>
  <td>test one</td>
  <td>yes</td>
  <td>success</td>
 </tr>
 <tr>
  <td>test two</td>
  <td>yes</td>
  <td>none</td>
 </tr>
</table> 
```

这些值由数据库动态填充。如果每行中的第二个 td 的值为 yes，我如何将第三个 td 的值更改为“进行中”？该值为 yes，因为用户已提交测试但测试正在进行中，并且 td3 的值为 none 直到数据库填充 td3。

我有一点我用过的 jquery，但是它只是搜索和替换基于单元格的文本，而不是说下一个单元格。

```
$(function() {
    $('#mytable td').each(function() {
        var html = $(this).html();
        $(this).html(
        html.replace(/0/,'<b>success</b>')
             .replace(/1/,'<b>failed</b>')
        );
    });
}); 
```

我也一直在使用这段代码，但这不适合我想要做的，因为它只根据 .eq(x) 位置更新某些 TD。

```
$(document).ready(function() {
    $('#mytable').find('td').eq(4).text('changeme');
}); 
```

我的表可以有大约 20 行，我想为我表中的每个 2nd td 执行此操作

理想情况下，我想要一个 throbber，但一旦我可以解释第二个 td 值，这应该是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:23:05.207

此代码将通过 td，查看单元格是否具有值“无”，如果是，则将下一个单元格的值设置为“进行中”：

```
$(function() {
    $('#mytable td').each(function() {
        var html = $(this).html();
        if (html == "none")
            $(this).next().html("in progress");
        });
}); 
```

根据以下评论更新代码：

```
$(document).ready(function() {
    $('td').each(function() {
        if ($(this).html() == "yes" && $(this).next().html() == "none") {
            $(this).next().html("in progress");
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:23:10.700

```
$('table tr').each(function(){
    $('td:eq(1):contains(yes)', this).next().text('in progress')
}) 
```

[http://jsfiddle.net/CYdVs/](http://jsfiddle.net/CYdVs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:24:01.307

试试这个

```
$('#mytable td').each(function() {
    var html = $(this).html();
    if(html === 'none'){
        $(this).next('td').text('in progress');
}
}); 
```

见工作[小提琴](http://jsfiddle.net/mbkXk/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T22:26:59.707

检查这个[小提琴](http://jsfiddle.net/sushanth009/mgjZG/)

```
$(function() {
    var secondCells = $('tr').find('td:eq(1)');
    console.log(secondCells)
    $.each(secondCells, function(i) {
        if( $(this).text() == 'none'){
            console.log($(this).next())
           $(this).next().text('Processing..');
        }
    });
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T22:30:24.677

此示例将遍历每一行中的第二个 td，如果值为“无”，则将下一个单元格替换为“进行中”：

```
$("#mytable td:nth-child(2)").each(function(index, elem)
{
    if($(elem).html() === "none")
    {
        $(elem).next().html("in progress")
    }
});​ 
```

[jsFiddle](http://jsfiddle.net/752NU/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-14T22:27:14.767

您可以使用 each() 运行一个循环，使用它运行一个计数器并检查每次计数器是偶数还是奇数。

[CSS-Tricks.com : 检查是偶数还是奇数](http://css-tricks.com/snippets/javascript/check-if-number-is-evenodd/)

不过，肯定有更好的方法来做到这一点。

# android - 在 Android 上使用 Python 检索 WiFi 数据

> ID：12432679
> 
> 赞同：1
> 
> 时间：2012-09-14T22:17:15.193
> 
> 标签：android, python, wifi, sl4a, android-wireless

我希望使用 Python 在 Android 上获取我的 WiFi 信号强度。我似乎找不到任何不是操作系统特定的 Python wifi 监控模块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T22:33:37.310

鉴于您尝试做的事情的性质，您将不得不使用 Android 特定的 wifi 库，它可能存在也可能不存在。这是我能找到的最接近的东西，它包括一个 wifi_scan() 函数，它将返回信号强度。

[http://python-for-android.readthedocs.org/en/latest/android/](http://python-for-android.readthedocs.org/en/latest/android/)

# c# - “无法加载文件或程序集'System.Device，Version = 2.0.5.0 ...”我该怎么办？

> ID：12432683
> 
> 赞同：0
> 
> 时间：2012-09-14T22:17:22.333
> 
> 标签：c#, windows-phone-7, console, .net-assembly

当我测试这段代码时：

```
Console.WriteLine(SwearJarController.GetLocation()); 
```

我得到错误：

SwearJarController 指的是一个单独的项目，下面是相关代码：

```
static string baseUri = "http://maps.googleapis.com/maps/api/geocode/xml?latlng={0},{1}&sensor=false";

    public static string GetLocation()
    {
        GeoCoordinateWatcher watcher = new GeoCoordinateWatcher();
        var myPosition = watcher.Position;
        double latitude = -45.856633;
        double longitude = 170.500646;

        if (!myPosition.Location.IsUnknown)
        {
            latitude = myPosition.Location.Latitude;
            longitude = myPosition.Location.Longitude;
        }

        RetrieveFormatedAddress(latitude, longitude);

        return currentLocation;
    }

    public static void RetrieveFormatedAddress(double latitude, double longitude)
    {
        string strlat = Convert.ToString(latitude);
        string strlon = Convert.ToString(longitude);

        string requestUri = string.Format(baseUri, strlat, strlon);

        WebClient wc = new WebClient();
        {
            wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
            wc.DownloadStringAsync(new Uri(requestUri));
        }

    }

    public static string currentLocation = "Unknown";

    static void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        try
        {
            var xmlElm = XElement.Parse(e.Result);
            var status = (from elm in xmlElm.Descendants()
                          where elm.Name == "status"
                          select elm).FirstOrDefault();
            if (status.Value.ToLower() == "ok")
            {
                var res = (from elm in xmlElm.Descendants()
                           where elm.Name == "formatted_address"
                           select elm).FirstOrDefault();
                currentLocation = res.Value;
            }
            else
            {
                currentLocation = "Unknown";
            }
        }
        catch
        {
            currentLocation = "Unknown";
        }
    } 
```

这可能是因为控制器是 WP7 应用程序，但测试器是控制台应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:20:50.757

是的。正因为如此，但[在这里你有](http://dotnetcatch.wordpress.com/2010/07/26/unit-testing-nunit-a-wp7-project/)如何从控制台尝试（单元测试方式）。

基本上您需要更改`ProjectTypeGuids`节点以匹配 WP7 应用程序，保存文件然后重新加载项目。将节点更改为：

```
<ProjectTypeGuids>
    {C089C8C0-30E0-4E22-80C0-CE093F111A43};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}
</ProjectTypeGuids> 
```

然后您可以成功引用 WP7 程序集。

# html - 防止水平滚动条出现在溢出的div中

> ID：12432688
> 
> 赞同：1
> 
> 时间：2012-09-14T22:17:51.057
> 
> 标签：html, css

我试图防止在 div`.boxB`溢出时出现滚动条，但我不确定为什么我的代码不起作用。换句话说，我只在浏览器宽度小于boxB的宽​​度时才尝试删除水平滚动条。这样，滚动条只会在浏览器宽度小于时出现`.boxA`。

[http://imgur.com/yQDFG](http://imgur.com/yQDFG)

浅蓝色代表屏幕。黄色是背景 div，水色是宽度超过屏幕宽度的前景 div。在这种情况下，我不希望出现滚动条。我用过`overflow-x:hidden`，但这并没有奏效。

HTML：

```
<div class="boxA">boxA  
  <div class="boxB">boxB</div>
</div> 
```

CSS：

```
.boxA {
    background: yellow;
    width: 800px;
    height: 600px;
}

.boxB {
    background: aqua;
    width: 1000px;
    height: 400px;
        overflow-x: hidden;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T22:22:43.400

可能，`overflow-x: hidden;`必须用于.boxA？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:20:37.730

你只需要写

```
overflow: hidden 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:24:30.527

试试这个CSS：

```
.boxA {
    background: yellow;
    width: 800px;
    height: 600px;
    overflow-x: hidden;
}

.boxB {
    background: aqua;
    width: 1000px;
    height: 400px;

} 
```

`overflow`必须在包含太大内容的标签上（在您的情况下 - `boxA`wraps `boxB`）。所以，如果你不想让东西跑到包装纸外面 - 你必须穿上`overflow`包装纸

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T22:33:54.097

在您的 HTML 代码中，boxeA 是父级，Box B 是子级。

CSS 属性**溢出**是这样使用的：

```
.boxeA
 {
     overflow: hidden;
 } 
```

将阻止 boxeB 的一部分（它是 boxeA 的子级）在比它自己的父级大时显示。

boxeA 就像 boxeB 上的面具。

在您提供的网址中，为了防止水箱完全显示，您必须将水箱作为浅蓝色箱的子代，并为浅蓝色箱提供如下 CSS 属性：

```
.light_blue
 {
     overflow: hidden;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T22:56:07.673

现在我明白了你想要什么，这是一个可能的解决方案：

[http://jsfiddle.net/dy8g5/3/](http://jsfiddle.net/dy8g5/3/)

参数：

1.  .boxB 必须在 .boxA 之外可见，并且没有水平滚动条。

2.  如果浏览器宽度小于 .boxB 的宽度，则浏览器不应有水平滚动条

解决方案是使用媒体查询隐藏水平滚动条，如果浏览器宽度小于 .boxB 的宽度

```
@media all and (max-width: 1001px) {
  body {
    overflow-x: hidden;
  }
}

@media all and (max-width: 801px) {
  body {
    overflow-x: visible;
  }
}

.boxA {
    background: yellow;
    width: 800px;
    height: 600px;
}

.boxB {
    background: aqua;
    width: 1000px;
    height: 400px;
    overflow-x: hidden;
} 
```

# java - Java Bitshift 替换 Math.pow

> ID：12432694
> 
> 赞同：4
> 
> 时间：2012-09-14T22:18:11.337
> 
> 标签：java, math, pow

我需要用 bitshift 替换 Java 中的 Math.pow。

```
for (int i = n - 1; i >= 0; i--)
    Math.pow(16, n - i - 1) 
```

其中 n 是十六进制数的长度。
13304fb 意味着 n = 7。
它基本上是将十六进制转换为十进制。

现在我需要用 Bitshift 替换那个 Math.pow。我想不通，因为 n 可以随心所欲地大。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T22:22:48.073

1.  `16^(n - i -1)`=`2^(4 * (n - i -1))`
2.  `2^x`=`1 << x.`

因此：`16^(n-i-1)`=`1 << (4 * (n -i -1))`

（使用`^`符号表示“的力量”，而不是 XOR）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T12:11:52.197

更通用的方式：

```
public static double posIntPow(final double pVal, final int pPow) {
    double ret = 1;
    double v1, v2;
    int n = pPow;
    v1 = pVal;
    if ((n & 1) == 1) {
        ret = pVal;
    }
    n = n >>> 1;
    while (n > 0) {
        v2 = v1 * v1;
        if ((n & 1) == 1) {
            ret = ret * v2;
        }
        v1 = v2;
        n = n >>> 1;
    }
    return ret;
} 
```

# silverlight - 在 Silverlight 中使用 ObservableCollections 获取主详细信息

> ID：12432696
> 
> 赞同：1
> 
> 时间：2012-09-14T22:18:21.260
> 
> 标签：silverlight, observablecollection, master-detail

在 Silverlight 项目中使用 MVVM，我希望能够通过使用 ObservableCollections 作为 Master/Detail 配置的数据源来利用 INotifyPropertyChanged 接口。对于主列表的来源，我想使用 ObservableCollection 从我的数据库中检索最少数量的字段以最小化加载时间，并为我的 Detail 视图使用不同的 ObservableCollection，其中包括所有用于编辑的字段。使用两个不同的 ObservableCollection 执行此操作似乎破坏了使用 ObservableCollection 的 INotifyPropertyChanged 优势，因为更改是针对与用于主列表的不同的 ObservableCollection 进行的。有没有办法最小化列表的数据加载时间并仍然利用 INotifyPropertyChanged？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:28:23.520

ObservableCollections 通知集合中的更改 - 如添加/删除。它们不处理对象内的属性。对象本身必须实现 INotifyPropertyChanged。

添加到集合中的对象是通过引用添加的。这意味着如果您更新对象......它会被更新。哪个/多少个列表包含该对象不会有任何区别。

# mysql - 重复一条 UPDATE SQL 语句

> ID：12432716
> 
> 赞同：0
> 
> 时间：2012-09-14T22:20:38.107
> 
> 标签：mysql, sql-update, inner-join, repeat

我在一棵树中有几个元素（Jquery Nested Sortable）。在这棵树中有两种可能的类型。当我将一个节点拖到另一个具有不同类型的节点时，我想将该项目及其子项更新为其新的父项。我让它与一些 php 代码一起工作，但我不想执行太多的 sql 更新。所以我决定让数据库来做它的工作。

我正在尝试在 sql 中重复更新功能。但我无法让它工作。我希望有一个人可以帮助我：

```
REPEAT 
UPDATE elements a, elements b 
    SET a.type=b.type 
    WHERE a.parent_id=b.id 
    AND a.type<>b.type 
    AND a.parent_id<>0
UNTIL ROW_COUNT()=0 
END REPEAT; 
```

更新语句就像一个魅力，但只有一次。我希望查询一次又一次地运行，直到找不到更改（row_count）。

--- 更新：对 WojtusJ 评论的反应我在 PhpMyAdmin 的 SQL 窗口中尝试了以下操作：

```
DROP PROCEDURE IF EXISTS UpdateElements()

CREATE PROCEDURE UpdateElements();
BEGIN
DECLARE cnt;
REPEAT 
    SELECT count(*) AS cnt INTO @cnt 
    FROM elements AS a 
        JOIN elements AS b 
            ON (a.parent_id=b.id AND a.type<>b.type AND a.parent_id<>0);

    UPDATE elements a, elements b 
        SET a.type=b.type 
    WHERE a.parent_id=b.id 
        AND a.type<>b.type 
        AND a.parent_id<>0;
UNTIL @cnt=0 END REPEAT;
END

CALL UpdateElements() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:51:37.207

如果我没记错的话，这里使用 ROW_COUNT() 函数是错误的。您可能应该检查其他语句是否有任何更改。试试这个：

```
DECLARE cnt INT;
REPEAT 
    SELECT count(*) AS cnt INTO @cnt 
    FROM elements AS a 
        JOIN elements AS b 
            ON (a.parent_id=b.id AND a.type<>b.type AND a.parent_id<>0);

    UPDATE elements a, elements b 
        SET a.type=b.type 
    WHERE a.parent_id=b.id 
        AND a.type<>b.type 
        AND a.parent_id<>0;
UNTIL @cnt=0 END REPEAT; 
```

编辑：当然，您应该将上述代码放在“CREATE PROCEDURE proc_name BEGIN ... END”中，然后使用 CALL 语句运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T19:08:57.970

谢谢大家的回复。我不知道如何创建例程。

在 phpMyAdmin 的 SQL 窗口中，我做了以下操作（感谢 WojtusJ）

```
DROP PROCEDURE IF EXISTS UpdateElements $$

CREATE PROCEDURE UpdateElements ()
BEGIN
DECLARE cnt INT;
REPEAT 
    SELECT count(*) AS cnt INTO @cnt 
    FROM elements AS a 
    JOIN elements AS b 
        ON (a.parent_id=b.id AND a.type<>b.type AND a.parent_id<>0);

UPDATE elements a, elements b 
    SET a.type=b.type 
WHERE a.parent_id=b.id 
    AND a.type<>b.type 
    AND a.parent_id<>0;
UNTIL @cnt=0 END REPEAT;
END $$ 
```

将分隔符更改为 $$（就在 SQL 窗口下方）

输入此例程后，可以在新的空白 phpMyAdmin SQL 窗口（或您的 php 脚本）中调用它

```
CALL UpdateElements 
```

# c# - 列表框中的 WebBrowser URI

> ID：12432719
> 
> 赞同：2
> 
> 时间：2012-09-14T22:20:49.807
> 
> 标签：c#, browser

如何从列表框中的 webbrowser 获取 URI？此代码添加 20 URI 而不是 1：

```
private void webBrowser1_DocumentCompleted(object sender, 

WebBrowserDocumentCompletedEventArgs e)
{
    radListControl1.Items.Add(webBrowser1.Url.AbsoluteUri.ToString());
} 
```

或者

```
private void webBrowser1_Navigated(object sender, WebBrowserNavigatedEventArgs e)
{
    radListControl1.Items.Add(webBrowser1.Url.AbsoluteUri.ToString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:32:43.720

```
 if (!radListControl1.Items.Contains(webBrowser1.Url.ToString()))
     radListControl1.Items.Add(webBrowser1.Url.ToString()); 
```

因为这个事件在单页加载中被多次触发......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:52:14.197

您需要检查事件提供的 URI 与浏览器中的 URI：

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
   if (e.Url.Equals(webBrowser1.Url)) 
    // this is the real one
} 
```

编辑：实际上，[它已经被回答了](https://stackoverflow.com/questions/3239204/webbrowser-documentcompleted-event-fired-more-than-once)。

# java - 在递归调用中获取函数的顺序号

> ID：12432724
> 
> 赞同：3
> 
> 时间：2012-09-14T22:21:31.947
> 
> 标签：java, recursion

在递归调用中检索函数顺序的最简单方法是什么。例如，如果我们有一个递归函数，它会一直调用自己，直到找到基本情况，然后一次返回一个函数。返回的第一个函数的顺序为 0，第二个函数的返回顺序为 1，依此类推...检索订单信息的简单方法是什么？比如说，当它是三阶功能时，我想做一些特别的事情。

编辑：我希望堆栈顶部的函数为零。

Edit2：我要解决的问题是返回按顺序遍历二叉树的第 n 个元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T22:26:36.580

如果您从一个看起来像这样的递归函数开始

```
void recursive(int p1, String p2, long p3) {
    ...
    if (someCondition) {
        recursive(nextP1, nextP2, nextP3);
    }
} 
```

将其更改为：

```
void recursive(int p1, String p2, long p3, int level) {
    ...
    if (someCondition) {
        recursive(nextP1, nextP2, nextP3, level+1);
    }
} 
```

现在通过调用从零开始

```
recursive(initialP1, initialP2, initialP3, 0); 
```

`level`将显示`recursive`您上面的调用次数。

**编辑：（**顶部为零）

您还可以转换函数以返回其级别以实现“顶部为零”策略：

```
int recursive(int p1, String p2, long p3) {
    if (baseCase) {
        return 0;
    }
    ...
    int level = 0;
    if (someCondition) {
        level = 1+recursive(nextP1, nextP2, nextP3);
    }
    return level;
} 
```

请注意，在这种情况下，`level`直到最后一次递归调用返回后，您才能找到您的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T22:36:35.517

dasblink 为您提供的案例与您建议的实施方式相反，因为随着递归的深入，级别计数器会上升（增量）。

如果您希望它随着递归的深入而减少，这意味着您事先知道确切的递归深度。

在大多数情况下，如果您知道确切的递归深度，您将不会使用递归，您将使用循环（for、while、repeat/until 等）。事实上，在这种情况下使用递归并不是最优的，因为递归堆栈被分配（更高的内存消耗）并且循环效率更高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:35:35.197

*   如果级别 0 应该是最后一次“嵌套调用”，那么它通常是类似于停止问题的不可判定问题，因为您不能只说“在 3 次嵌套调用之后，函数将返回一个值”。只有通过模拟特定函数的计算才能向前看。

*   如果 level 0 应该是第一次调用，那么它非常简单，您可以使用 level 作为方法的参数并递增它。

顺便说一句，有趣的问题，请参阅[http://en.wikipedia.org/wiki/Halting_problem](http://en.wikipedia.org/wiki/Halting_problem)

# mongodb - 对嵌套的对象数组进行排序

> ID：12432727
> 
> 赞同：23
> 
> 时间：2012-09-14T22:22:23.803
> 
> 标签：mongodb, sorting, nested

我正在寻找一种对嵌套对象数组进行排序的方法。

这是一个例子：

```
{
  answers : [
    { name : 'paul',  state : 'RU' },
    { name : 'steve', state : 'US' }, 
    { name : 'mike',  state : 'DE' }, 
    ...
  ]
} 
```

假设现在我想找到数组的所有`name`, `answers`，但我怎样才能按升序对它们进行排序呢？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-14T22:42:19.710

我会按照你想要的顺序存储它。或者在您将其拉出后，在客户端对其进行排序。

如果这些都不可能，您可以使用[聚合框架](https://docs.mongodb.org/manual/reference/operator/aggregation/)：

```
> db.test.insert({answers: [
...                 {name: 'paul', state: 'RU'},
...                 {name: 'steve', state: 'US'}, 
...                 {name: 'mike', state: 'DE'}]});
> db.test.insert({answers: [
...                 {name: 'paul', state: 'RU'},
...                 {name: 'steve', state: 'US'}, 
...                 {name: 'xavier', state: 'TX'}]});

db.test.aggregate([
  {$unwind: "$answers"}, 
  {$sort: {"answers.name":1}}, 
  {$group: {_id:"$_id", answers: {$push:"$answers"}}}
]); 
```

产生：

```
{
  "result" : [
  {
    "_id" : ObjectId("5053b2477d820880c3469364"),
    "answers" : [
      {
        "name" : "paul",
        "state" : "RU"
      },
      {
        "name" : "steve",
        "state" : "US"
      },
      {
        "name" : "xavier",
        "state" : "TX"
      }
    ]
  },
  {
    "_id" : ObjectId("5053af9f7d820880c3469363"),
    "answers" : [
      {
        "name" : "mike",
        "state" : "DE"
      },
      {
        "name" : "paul",
        "state" : "RU"
      },
      {
        "name" : "steve",
        "state" : "US"
      }
    ]
  }
],
  "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-16T20:00:21.933

这在这种情况下可能没有帮助，但我想我会添加这个。您还可以选择在写入时对其进行排序，这对于您不必以多种方式排序的非规范化集合往往更好。

在为用户创建提要时，我在我的应用程序中发现了这种情况。

```
Meteor.users.helpers({
  'addToFeed': function (gameId, pushData) {
    check(pushData, FeedSchema);
    Meteor.users.update({
      _id: this._id,
      "games.gameId": gameId
    }, {
      $push: {
        "games.$.feed": {
          $each: [pushData],
          $sort: { timestamp: -1 }
        }
      }
    });
  }
}); 
```

我发现它非常方便，因为您可以使用`find()`它，默认情况下它会按您的规格排序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-31T18:42:33.763

从 开始`Mongo 4.4`，[`$function`](https://docs.mongodb.com/master/reference/operator/aggregation/function/index.html)聚合运算符允许应用自定义 javascript 函数来实现 MongoDB 查询语言不支持的行为。

例如，为了按其中一个字段对对象数组进行排序：

```
// {
//   "answers" : [
//     { "name" : "steve",  "state" : "US" },
//     { "name" : "xavier", "state" : "FR" },
//     { "name" : "paul",   "state" : "RU" }
//   ]
// }
db.collection.aggregate(
  { $set:
    { "answers":
      { $function: {
          body: function(answers) { return answers.sort((a, b) => a.name > b.name); },
          args: ["$answers"],
          lang: "js"
      }}
    }
  }
)
// {
//   "answers" : [
//     { "name" : "paul",   "state" : "RU" },
//     { "name" : "steve",  "state" : "US" },
//     { "name" : "xavier", "state" : "FR" }
//   ]
// } 
```

这会在适当的位置修改数组，而无需应用昂贵`$unwind`的`$sort`和`$group`阶段的组合。

`$function`接受3个参数：

*   `body`，这是要应用的函数，其参数是要修改的数组。
*   `args`，其中包含`body`函数作为参数的记录中的字段。在我们的例子`"$answers"`中。
*   `lang`，这`body`是编写函数的语言。仅`js`当前可用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-12-09T12:28:54.157

我在更新嵌套数组时找到了一个解决方案，我们也可以对其进行排序，更新后我们将有一个排序数组，然后我们不需要在 find 上排序

```
db.students.update(
   { _id: 1 },
   {
     $push: {
       quizzes: {
         $each: [ `enter code here`{ id: 3, score: 8 }, { id: 4, score: 7 }, { id: 5, score: 6 } ],
         $sort: { score: 1 }
       }
     }
   }
) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-14T22:47:43.343

执行 find() 后，您可以在返回值上使用 sort()。

```
db.collection.find({},{"answers.name":1}).sort({"answers.name":1}) 
```

该查找将提取集合中所有文档的名称字段。然后排序将按名称对它们进行升序排序。

[http://www.mongodb.org/display/DOCS/Sorting+and+Natural+Order](http://www.mongodb.org/display/DOCS/Sorting+and+Natural+Order)

# php - 缺少 php SimpleXML 属性

> ID：12432739
> 
> 赞同：6
> 
> 时间：2012-09-14T22:23:32.180
> 
> 标签：php, simplexml

我在这里有以下 xml 文档：编辑：（请参阅下面的示例）

我正在使用 php/SimpleXML 将其转换为要读取的对象：

```
$xmlContent = file_get_contents($path . '/test.xml');
$tablesRaw = new SimpleXMLElement($xmlContent);
echo '<pre>';
print_r($tablesRaw);
echo '</pre>'; 
```

当我 print_r 看到字段的属性但不显示可接受值的属性时。这是原始 xml 的示例（我需要 value 属性）：

```
<acceptable-value value="0">
    Unknown
</acceptable-value> 
```

这是我在 print_r 时看到的：

```
[acceptable-values] => SimpleXMLElement Object
                                            (
                                                [acceptable-value] => Array
                                                    (
                                                        [0] => 
                    Unknown

                                                        [1] => 
                    Invalid

                                                        [2] => 
                    Deleted

                                                        [3] => 
                    Valid/Good

                                                        [4] => 
                    Inactive

                                                    )

                                            ) 
```

为什么没有显示属性的任何线索？提前致谢。

编辑：请求一些 xml：

```
<field name="Address1Type" type="String"/>
<field name="Address2Street1" type="String"/>
<field name="Address2Street2" type="String"/>
<field name="Address2Type" type="String"/>
<field name="Address3Street1" type="String"/> 
<field name="Status" type="Integer" access="R">
            <acceptable-values>
                <acceptable-value value="0">
                    Unknown
                </acceptable-value>
                <acceptable-value value="1">
                    Invalid
                </acceptable-value>
                <acceptable-value value="2">
                    Deleted
                </acceptable-value>
                <acceptable-value value="3">
                    Valid/Good
                </acceptable-value>
                <acceptable-value value="4">
                    Inactive
                </acceptable-value>
            </acceptable-values>
        </field> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T12:30:12.970

这里的简单答案是不要`print_r()`与 SimpleXML 对象一起使用。因为它们是非 PHP 数据的包装器，所以通常会显示“整个”对象的函数并不能真正反映您正在查看的内容。

使用 SimpleXML 访问属性的方法是使用属性名称，就好像它是一个数组键 ( `$node['attribute']`)；这并不**意味着**在某个地方有一个带有该键的数组，它是变相的函数调用。

如果您想了解在编写 SimpleXML 代码时正在查看哪些节点，请查看我编写的[这个`simplexml_dump()`函数](https://github.com/IMSoP/simplexml_debug)（欢迎提供反馈）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T04:29:07.633

首先，您必须获取 SimpleXMLElement 对象。在这种情况下：

```
$xmlContent = file_get_contents($path . '/test.xml');
$tablesRaw = new SimpleXMLElement($xmlContent);
$elements = $tablesRaw->table[22]->fields->field[31]->{'acceptable-values'}->children(); 
```

现在，您可以遍历每个`acceptable-value`对象并使用以下`attributes()`方法：

```
foreach($elements as $element) {
    echo $element->attributes()->value . " ";
    echo trim($element[0]) . "\n";
} 
```

使用您的 XML，将打印：

```
0 Unknown
1 Invalid
2 Deleted
3 Valid/Good
4 Inactive 
```

它不依赖于数组索引，因为调用`attributes()`获取元素的实际属性。并`->value`获取名称为“value”的属性。

# qt4 - PyQt4 将对话框窗口居中的最佳方法是什么？

> ID：12432740
> 
> 赞同：6
> 
> 时间：2012-09-14T22:23:57.203
> 
> 标签：qt4, python-2.7, pyqt4, window-position

当我`.show()`打开一个对话框时，它通常会显示在左边一点，我不知道为什么。我想将所有打开的对话框居中，所以我使用了：

```
qr = dlgNew.frameGeometry()
cp = QtGui.QDesktopWidget().availableGeometry().center()
qr.moveCenter(cp)
dlgNew.move(qr.topLeft()) 
```

并且：

```
sG = QtGui.QApplication.desktop().screenGeometry()
x = (sG.width()-dlgMain.width()) / 2
y = (sG.height()-dlgMain.height()) / 2

dlgMain.move(x,y)
dlgMain.show() 
```

我的问题是，哪种是正确/更好的使用方式，有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T22:53:48.833

如果您没有明确指定位置，Qt 将让操作系统的窗口管理器决定将窗口放置在哪里。在您的情况下，“向左一点”是您的窗口管理器决定的。

至于这两种方法，有一些不同之处。

首先，`.availableGeometry()`与`.screenGeometry()`. `.screenGeometry()`为您提供屏幕的整个矩形。其中`.availableGeometry()`，返回*可用*的矩形。这是排除某些永久组件（如 Windows 中的任务栏）的区域。（[解释差异的文档](http://doc.qt.nokia.com/4.7-snapshot/qdesktopwidget.html#screen-geometry)）

其次，`.frameGeometry()`与`width()/height()`. `.frameGeometry()`返回窗口在屏幕上占据的总面积。另一方面，`width()/height()`返回不包括窗口框架、标题栏等的窗口*内*`width`的和。（[解释差异的文档](http://doc.qt.nokia.com/4.7-snapshot/application-windows.html#window-geometry)）`height`

 *考虑到这些，我想说第一种方法更合适。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-22T08:45:08.537

根据文件；

> 对话框始终是顶级小部件，但如果它有父级，则其默认位置位于父级顶级小部件的顶部（如果它本身不是顶级）。它还将共享父级的任务栏条目。

我不确定您是否只想在启动时将*主窗口*居中，但如果您想将**模态对话框**居中，您可以简单地通过调用**使主窗口成为模态对话框的父窗口...**

```
setParent (self, QWidget parent) 
```

或者从 init 开始

```
__init__ (self, QWidget parent =YOUR_MAIN_WINDOW_HERE) 
```

希望有帮助！*

# java - Android ActionBarSherlock 自定义顶栏？

> ID：12432743
> 
> 赞同：0
> 
> 时间：2012-09-14T22:24:21.527
> 
> 标签：java, android, actionbarsherlock

如何将自定义 ActiobbarSherlock 应用于我的活动。我正在寻找这样的[东西](http://www.google.com.pk/imgres?q=android%20foursquare%20application%20screens&hl=en&safe=off&sa=X&biw=1360&bih=654&tbm=isch&prmd=imvnsa&tbnid=lfklBUoSthRN-M%3a&imgrefurl=http://www.avc.com/a_vc/2012/07/feature-friday-android-sharing.html&docid=xZbJXrViXMnkYM&imgurl=http://www.avc.com/.a/6a00d83451b2c969e20167689f65f5970b-500wi&w=500&h=889&ei=Bq5TUOW9AYXo0QGszIHoAg&zoom=1&iact=hc&vpx=346&vpy=243&dur=1219&hovh=300&hovw=168&tx=89&ty=162&sig=109393412952342310549&page=1&tbnh=132&tbnw=73&start=0&ndsp=25&ved=1t:429,r:10,s:0,i:101)。我知道四方应用程序使用 SherlockActionBar 我该怎么做？

这是我现在的风格...

```
<style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.ActionBar">
     <item name="android:background">#449def</item>
    <item name="background">#0099CC</item>
    <item name="android:titleTextStyle">@style/Theme.ActionBar.TitleTextStyle</item>
    <item name="icon">@drawable/ic_launcher</item>
    <item name="backgroundSplit">@drawable/gray_seprator</item>
      <item name="android:displayOptions">showTitle|homeAsUp</item>
     <item name="displayOptions">showTitle|homeAsUp</item>
</style> 
```

亲切的问候

# arrays - 如何将array1中的部分元素与array2中的元素匹配？

> ID：12432750
> 
> 赞同：1
> 
> 时间：2012-09-14T22:25:42.707
> 
> 标签：arrays, perl, element, matching

我有一个关于匹配数组元素部分的问题。

我有两个数组：

@1 = SMITH SMIT MITH SMI MIT ITH（部分姓氏 SMITH）

@2 = 150,000 个姓氏的列表

我需要在@2 中搜索@1 中的元素，然后从@2 打印整个匹配的姓氏。

例如：

如果 SMITHERS 在 @2 中：打印“SMITHERS”（因为 SMITH、SMIT、MITH、SMI、MIT、ITH 匹配）

如果 MITCHELL 在 @2 中：打印“MITCHELL”（因为 MIT 匹配）

如果 SCHMITTY 在 @2 中：打印“SCHMITTY”（因为 MIT 匹配）

如果 JONES 在 @2: 空白（因为没有匹配项）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:45:18.730

```
use feature qw( say );

my @a1 = qw( SMITH SMIT MITH SMI MIT ITH );
my @a2 = qw( SMITHERS MITCHELL SCHMITTY JONES );

my $pat =
   join '|',
     map quotemeta,
      sort { length($b) <=> length($a) }
        @a1;

my $re = qr/$pat/;

for (@a2) {
   say if /$re/;
} 
```

顺便说一句，`@a1`可以如下创建足够精确的：

```
use feature qw( say );

my $a1 = 'SMITH';
my @a2 = qw( SMITHERS MITCHELL SCHMITTY JONES );

my $pat =
   join '|',
     map quotemeta,
      $a1 =~ /(?=(...))./sg;

my $re = qr/$pat/;

for (@a2) {
   say if /$re/;
} 
```

# php - 致命错误：调用未定义的函数 empty()

> ID：12432751
> 
> 赞同：4
> 
> 时间：2012-09-14T22:25:47.680
> 
> 标签：php

知道为什么我会收到这个奇怪的错误吗？“致命错误：调用未定义的函数 empty()”

```
function newpart($name,$country,$bday_day,$bday_month,$bday_year,$gender,$pass1,$pass2,$email,$option1,$secondOption1,$secondOptionLevel1){ 

        $this->name = $name;
        $this->country = $country;
        $this->bday_day = $bday_day;
        $this->bday_month = $bday_month;
        $this->bday_year = $bday_year;
        $this->gender = $gender;
        $this->pass1 = $pass1;
        $this->pass2 = $pass2;
        $this->email = $email;
        $this->option1 = $option1;
        $this->secondOption1 = $secondOption1;
        $this->secondOptionLevel1 = $secondOptionLevel1;

        if( empty($this->name) || empty($this->pass1) ){
            $this->errorCount++;
        }

    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-09-10T21:49:42.917

我有同样的致命错误......

在“空”这个词之前，我确实按`alt`+`space`而不是`space`在我的编辑器中。有一个假的空白区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:28:38.223

我唯一能想到的是您使用的 php 版本早于 php 3。虽然我无法想象您在运行 php3 的服务器上。Empty() 在 php 3 中出现。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-14T22:27:46.707

如果未设置变量，您可能会收到此错误。始终在使用 时`empty()`，也使用`isset()`。我想它会为你解决的。

# javascript - 单击复选框后如何调用控制器方法？

> ID：12432753
> 
> 赞同：5
> 
> 时间：2012-09-14T22:26:10.800
> 
> 标签：javascript, asp.net, .net, asp.net-mvc, asp.net-mvc-3

是否可以`CheckBox`像它一样在点击时调用控制器方法`ActionLink`？基本上，我想替换这个`ActionLink`：

```
@Html.ActionLink("Switch status", "SwitchTaskIsComplete", "Task", new {
    taskId = task.TaskId, 
    isComplete = !task.IsComplete, 
    userId = Model.UserId
}, null) 
```

使用 a `@Html.CheckBox`，它调用相同的方法

```
SwitchTasksIsComplete(int taskId, bool isComplete, int userId) 
```

of并在每次单击时`TaskController`使用其`checked`属性作为参数。`isComplete`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T22:40:09.260

`onclick`您可以为此使用 HTML ：

```
@Html.CheckBox("mycheckbox", new { onclick="triggerLink()" }) 
```

使用`@Url.Action`而不是`@Html.ActionLink`只获取 URL：

```
<script>
    function triggerLink() {
        var theUrl = '@Url.Action("SwitchTaskIsComplete", "Task", new {taskId = task.TaskId, isComplete = !task.IsComplete, userId = Model.UserId}, null)';
        window.location = theUrl;
    }
</script> 
```

* * *

您还可以将整个表达式内联到属性中：

```
@{
    var url = Url.Action("SwitchTaskIsComplete", "Task", new {taskId = task.TaskId, isComplete = !task.IsComplete, userId = Model.UserId}, null);
}
@Html.CheckBox("mycheckbox", new { onclick="window.location = '" + url + "'" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-02T11:18:42.347

```
@{
    var url = Url.Action("action", "controller");
}
<label class="some-style">
   <input type="checkbox" onclick="window.location='@url'" />
   <span class="Some-other-style">Your Label</span>
</label> 
```

该解决方案使用 url 操作实现了一个常规的 html 复选框表达式，每当单击文本框时，该操作都会提交给控制器。如果您需要知道复选框的状态，您还可以包含一个值。

# c# - 为什么工具提示不显示？

> ID：12432754
> 
> 赞同：0
> 
> 时间：2012-09-14T22:26:17.623
> 
> 标签：c#, winforms, datagridview, tooltip

我在我的应用程序中添加了一个工具提示。

在我希望它显示提示/工具提示的控件（DataGridView）中，我在“Tooltip on”属性中添加了措辞。但是我的措辞没有显示（准确地说，什么都没有）。

为什么？

我在相关按钮上添加了措辞，它工作得很好。也许 DGV 本身无法处理工具提示？

**添加**

这是演示问题的完整示例

```
using System;
using System.Drawing;
using System.Windows.Forms;

static class Program
{
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        var form = new Form {
            Controls = {
                new Button { Name = "button", Location = new Point(10, 10) },
                new DataGridView { Name = "dgv", Location = new Point(10, 50) },
            },
        };

        var tooltip = new ToolTip();
        tooltip.SetToolTip(form.Controls["button"], "Button Tooltip");
        tooltip.SetToolTip(form.Controls["dgv"], "DGV Tooltip");

        Application.Run(form);
        GC.KeepAlive(tooltip); // it's cheaper than implementing IContainer on the form for this demo
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-22T12:52:49.427

If you set the datagridviews ShowCellToolTips to false, and then add a general tooltip control to the form and set a text value it will display it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T22:38:02.730

你的帖子真的很难理解你想要什么。我希望您想要 DataGridView 的工具提示，而不是每个单元格或行的工具提示。

如果您想要控件上的工具提示，而不是单元格上的工具提示，请尝试以下操作：

```
DataGridView.ShowCellToolTips = False

toolTip1.SetToolTip(DataGridView, "My DataGridView"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:51:55.030

我在这里找到了答案：[DataGridView ToolTipText 未显示](https://stackoverflow.com/questions/389439/datagridview-tooltiptext-not-showing)

```
private void dgvPlatypus_CellToolTipTextNeeded(object sender,   DataGridViewCellToolTipTextNeededEventArgs e)
{
    e.ToolTipText = "j. cutworm is a punk";
} 
```

# php - 使用浏览器中的 shell_exec 将参数从 php 传递给 python

> ID：12432757
> 
> 赞同：1
> 
> 时间：2012-09-14T22:26:42.257
> 
> 标签：php, python, browser, crash, command

我有一个简单的 php 脚本，它将几个变量传递给并使用 shell_exec 命令运行 python 脚本。当我从 shell 运行这个 php 脚本时，它工作得很好。但是，当我从浏览器运行 php 脚本时，它会导致服务器崩溃。我已经用 exec 和 shell_exec php函数试过了。为什么我从 shell 或浏览器运行脚本很重要？

作为记录，我可以从浏览器成功运行其他命令，例如“tar -xcpvf path.tar.gz”

这是浏览器遇到问题的php脚本：

```
 <?php
    $inputs = array(    
    'location' => "Los Angeles",
    'date' => '11/01/2012',
    );
    $cmd = 'python simple.py '.$inputs['location'].' '.$inputs['date'];
    $results = shell_exec($cmd);
    echo $results;      
    ?> 
```

任何帮助都感激不尽。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T23:36:01.887

没有错误日志，我不能确定，但​​看起来你没有引用你的参数。因此，您传递给 shell_exec 的实际命令是：

```
python simple.py Los Angeles 11/01/2012 
```

你（大概）想要的是这个：

```
python simple.py "Los Angeles" "11/01/2012" 
```

为此，您的 $cmd 行应如下所示：

```
$cmd = 'python simple.py "'.$inputs['location'].'" "'.$inputs['date'].'"'; 
```

# php - PHP - 多卷曲 - 抓取数据/内容

> ID：12432761
> 
> 赞同：0
> 
> 时间：2012-09-14T22:27:24.287
> 
> 标签：php, dom, xpath, curl, web-scraping

我已经开始使用 curl、dom、xpath 构建单个 Curl 会话，并且效果很好。

我现在正在构建一个基于 curl 的刮板，用于在一个流程中从多个站点中获取数据，并且脚本正在回显我输入的单个短语..但它不会拾取变量。

```
do{
    $n=curl_multi_exec($mh, $active);
}while ($active);

foreach ($urls as $i => $url){  
    $res[$i]=curl_multi_getcontent($conn[$i]);      
    echo ('<br />success');
} 
```

所以这确实会像有 url 一样多次回显成功文本.. 但实际上这不是我想要的.. 我想像使用单个 curl 会话一样分解 html..

我在单次 curl 会话中做了什么：

```
//parse the html into a DOMDocument
$dom = new DOMDocument();
@$dom->loadHTML($res);

// grab all the on the page
$xpath = new DOMXPath($dom);         
$product_img = $xpath->query("//div[@id='MAIN']//a");

for ($i = 0; i < $product_img->length; $i++){
    $href = $product_img->item($i);
    $url = $href->getAttribute('href');
    echo "<br />Link : $url";
} 
```

这个 dom 解析/xpath 适用于单会话 curl，但在我运行 multicurl 时不起作用。在 Multicurl 上，我可以为会话中的 URL 执行 curl_multi_getcontent，但这不是想要的。我想获得与在单个会话中使用 Dom / Xpath 获取的相同内容。我能做些什么 ？

**编辑**

看来我的 getAttribute 有问题。这是我无法抓取的图像的链接。抓取时显示链接，但随后引发错误：

*致命错误：在非对象上调用成员函数 getAttribute()*

查询：

```
// grab all the on the page
$xpath = new DOMXPath($dom);
$product_img = $xpath->query("//img[@class='product']");
$product_name = $xpath->query("//img[@class='product']"); 
```

这是有效的：

```
for ($i = 0; i < $product_name->length; $i++) {
    $prod_name = $product_name->item($i);
    $name = $prod_name->getAttribute('alt');
    echo "<br />Link stored:  $name";
} 
```

这不起作用：

```
for ($i = 0; i < $product_img->length; $i++) {
    $href = $product_img->item($i);
    $pic_link = $href->getAttribute('src');
    echo "<br />Link stored:  $pic_link";
} 
```

知道我做错了什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:08:16.303

出于某种奇怪的原因，只有那个`src`不能正常工作。
这个问题可以认为是“已解决”。

# bash - 选择嵌套语句

> ID：12432764
> 
> 赞同：0
> 
> 时间：2012-09-14T22:27:49.400
> 
> 标签：bash

我写了这样的东西

```
 #!/bin/bash
PS3='Select an option and press Enter: '
select tree_1 in Date Host Users Quit
do
    case $tree_1 in
        Date)
            select tree_1_1 in Date1 Date2
            do
                case $tree_1_1 in
                    Date1) date;;
                    Date2) date;;
            esac
    done
        Host)  hostname;;
        Users)  who;;
        Quit)  break;;
    esac
done 
```

执行后我有

./1menu：第 14 行：意外标记 `)' 附近的语法错误

./1menu: line 14: `Host) 主机名;;'

你能告诉我问题出在哪里吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T22:33:32.383

你还没有终止你的`Date`案子。您需要`;;`在内部 case 语句之后添加：

```
Date)
    select tree_1_1 in Date1 Date2
    do
        case $tree_1_1 in
            Date1) date;;
            Date2) date;;
        esac
    done
    ;;   # you're missing this terminator 
```

# javascript - HTML5 Canvas 固定画线

> ID：12432766
> 
> 赞同：0
> 
> 时间：2012-09-14T22:27:59.300
> 
> 标签：javascript, html, animation

我有一个画布，我正在使用 setInterval 绘制一条线，因此它是动画的。现在它从 20,20 开始并在 200,20 结束动画。理想情况下，我希望画布上的点永远不会移动，所以看起来线条正在绘制但画布正在移动。最好的例子是一辆正在行驶的汽车，它在背景移动时保持在框架中，或者在你跟随正在燃烧的保险丝燃烧时认为不可能的任务。

有没有办法移动整条线？这样我可以在添加到行时将行移到左侧。如果不是这样，制作一个巨大的画布并在线条绘制时将其向左移动会更好吗？创建这样的动画的最佳方法是什么？

# box2d - Box2D Flash 2.1 - 创建多个实体

> ID：12432774
> 
> 赞同：0
> 
> 时间：2012-09-14T22:28:35.863
> 
> 标签：box2d

我知道如何创造一个身体并将其添加到世界中。但是，假设我想向世界添加许多相同的身体。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T23:13:03.657

简单地 - 将您的代码放入一个循环中，您会很高兴。
**但是**，如果您想稍后将您的代码重用于其他简单对象，并使您的编程技能更强，您应该使用**设计模式**，例如结构方法。
在您的情况下，编写将采用一些参数（主体类型、位置、尺寸等）的函数，并返回指向您新创建的主体的链接。这将解决您的问题 - 您将拥有一个功能，可以针对不同的身体类型（圆形、多边形、凸面）执行所有工作人员。
特别是针对您的具体问题-您应该将每个级别的主体参数存储在 XML 文件中，然后编写可以解析此参数并使您的世界充满主体的方法；）享受吧！

# javascript - 使用 jquery 触发函数传递额外参数时出现问题

> ID：12432777
> 
> 赞同：0
> 
> 时间：2012-09-14T22:28:44.320
> 
> 标签：javascript, jquery, jquery-ui

我在使用 jquery 触发函数传递额外参数时遇到问题。额外的参数没有通过。代码 ：

```
//click event binding with button goes here
$("#b").bind({ click: 
   function (e, x, y) { 
   alert(x + " " + y);   //here`s the problem, showing undefined (expecting top & left  
}                        //offset() of dropped button 
});

//here making the button draggable for drag drop functionality (applying jquery-ui)
$("#b").draggable({ helper : "clone" });

//here creating a droppable area ( here i am dropping a draggable button)
$(".droppable").live({ mouseenter: function () {
    $(this).droppable({
        accept: "#b",              // accepting only button whose id = b
        drop: function (ev, ui) {
            alert("dropped");      //alert is showing means droppable works fine  
            var y = ui.offset.top;
            var x = ui.offset.left;
            ui.draggable.trigger("click", [x , y]); // here i am triggering the click event
        }                                           // for button and passing x and y as an     
    });                                             // extra parameter 
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:59:31.503

我绘制了这种情况，它对我来说很好（使用相同的代码）。

什么是可拖放的元素？我的是：

```
 <div id="b" style="width:200px;height:200px;background-color:red"></div>

    <div class="droppable" style="width:400px;height:200px;background-color:green"></div> 
```

我的建议：

在获得偏移值后添加`console.log(x, y)`- 可拖动元素有可能没有它们（并且值未定义）

通过以下方式更改您的点击处理程序，以便您可以处理用户点击和触发点击：

```
function (e, x, y) { 
                if(typeof x !== "undefined" && typeof y !== undefined) {
                    // do trigger logic
                    return;
                }
                // do click logic
            } 
```

# php - 我可以在 iFrame 中加载域，当您单击链接时，它会在父窗口中打开，而不是 iframe？

> ID：12432779
> 
> 赞同：0
> 
> 时间：2012-09-14T22:28:57.600
> 
> 标签：php, javascript, iframe

与 Stumbleupon 类似，如果您加载随机域（我不拥有的域）并希望该页面内的链接不仅在 iframe 内更改，而且在父 url 上更改。

如果这很难理解这里有更多的外行术语：

URL：`mywebsite.com/reddit.com` 在我的网站上打开 iframe，显示：reddit.com 点击 iframe 中的链接（显示 reddit.com）。

与其在 iframe 中加载新页面，不如在父窗口中加载`mywebsite.com/reddit.com/newlink`

然后它将在我的网站中打开 iframe，但允许我跟踪正在查看的 URL，从而允许我执行特定于站点的功能。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:35:03.940

简而言之，它不可能发生。外部站点用于打开与其站点相关的链接。没有办法做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:36:44.463

您可以将链接目标设置为`_top`.`<a href='www.someothersite.com' target='_top'>Link</a>`

编辑：对不起，误读了一些东西。您不能通过 iframe 编辑其他站点上的页面来更改链接的目标。这就是为什么在像谷歌图片或偶然发现的地方，他们在角落里有一个“X”，可以把你带到 iframe 中的页面。

如果您可以修改外部页面，这将是一个主要的网络钓鱼安全风险，因为任何人都可以创建一个页面，该页面只是您银行的 iframe，但会收集您在用户名/密码框中键入的任何内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T22:57:48.977

在过去，如果您制作带有框架的页面，您可以指定链接将您带到哪个部分。修改不受您控制的链接是可能的，而是一项半任务。

要使用框架，您可以在标签中指定 target=。每个框架都在创建时命名，以使其变得容易。

这是一个古老的方法。希望能帮助到你

# interface - java 中的接口 - MyClass 不是抽象的，并且不会覆盖 MyClass 错误中的抽象方法 eq(Object)

> ID：12432780
> 
> 赞同：2
> 
> 时间：2012-09-14T22:29:11.850
> 
> 标签：interface, overriding

我知道有一个 Comparable 接口，试图弄清楚如何编写自己的接口。

## 这是界面

```
public interface MyComparable {
    public boolean lt(Object other);
} 
```

## 和一个实现它并打包一个 int 的类（是的，我知道有一个 Integer 类）

```
public  class  MyInteger implements MyComparable {
    private int value;

    public MyInteger(int v)
    {   value = v;  }

    public void set(int v)
    {   value = v;  }

    public int get()
    {   return value;   }

    public boolean lt(MyInteger other)
    {   return get() < other.get(); } 
} 
```

我得到“MyInteger 不是抽象的，并且不会在 MyInteger 错误中覆盖抽象方法 eq(Object)”。MyComparable 没有声明 eq 方法。所以它来自超类，但我不明白。

# uitableview - iOS6 中的 IBAForms 问题

> ID：12432781
> 
> 赞同：1
> 
> 时间：2012-09-14T22:29:19.793
> 
> 标签：uitableview, ios6

我有一个使用[IBAForms](https://github.com/ittybittydude/IBAForms)的应用程序。在 XCode 4.5GM iOS6 模拟器中运行时，我发现应用程序在重置时经常`IBAFormViewController`挂起`formDataSource`。请注意，它不会发生在 FIRST 上`setFormDataSource`，但它确实会发生在后续调用`setFormDataSource`.

我将问题缩小到 IBAForms 用来使屏幕外表格视图单元格与 UIResponder 链（“ `hiddenCellCache`”）一起使用的 hack。基本上，当单元格被 UITableView 重新设置为 nil 时，它们会将自己置于隐藏窗口中。

当我禁用此过程（如下所示的更改）时，我的挂起消失了。

我的理论是 iOS6 表格视图有一些新的优化来清理隐藏的单元格，这些单元格现在不知何故与 IBAForms 的 hiddenCellCache 不兼容。 **但我想更好地理解这一点。**

作为参考，以下是我对 IBAForms 所做的更改。如果它们被证明运行良好，我会将它们提交回 GitHub 上的项目。

IBAFormFieldCell.m：

```
// change is to remove an assert on hiddenCellCache
- (void)didMoveToWindow {
    if (self.window == nil) {

        [self.hiddenCellCache addSubview:self];
    }
} 
```

IBAFormViewController.m：

```
// this setter also sets the datasource of the tableView and reloads the table
- (void)setFormDataSource:(IBAFormDataSource *)dataSource {
    if (dataSource != formDataSource_) {

        //$$TS modified to work with iOS6
        for (IBAFormFieldCell* c in self.hiddenCellCache.subviews)
        {
            c.hiddenCellCache = nil;
            [c removeFromSuperview];
        }

        IBAFormDataSource *oldDataSource = formDataSource_;
        formDataSource_ = [dataSource retain];
        IBA_RELEASE_SAFELY(oldDataSource);

        self.tableView.dataSource = formDataSource_;
        [self.tableView reloadData];
    }
} 
```

我的问题是：

*   健全性检查 - 这对其他人来说是个问题吗？
*   导致它在iOS6中中断的hiddenCellCache hack是什么？

**编辑**：这是另一个更简单的“修复”。当我在分析器中运行应用程序时，我注意到在挂起期间应用程序将所有时间都花在 UITableViewCell layoutSubviews 中。我还是不明白为什么。

```
- (void) layoutSubviews
{
    if ( self.superview == self.hiddenCellCache )
        return;

    [super layoutSubviews];
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-17T19:56:55.323

-(void)layoutSubviews 方法似乎可以解决问题。谢谢汤姆斯威夫特。

# c# - Object.GetType() 抛出错误

> ID：12432783
> 
> 赞同：0
> 
> 时间：2012-09-14T22:29:31.950
> 
> 标签：c#, asp.net

我有这样的电话，

```
SomeList.Fetch(x => SomeCondition).OrderBy(x => x.GetType().GetProperty(sort).GetValue(x, null)) 
```

我得到一个`Object reference not set to an instance of an object at System.Object.GetType()`.

知道可能是什么原因造成的吗？这种情况很少发生，并且仅在生产中发生。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:32:08.737

如果您希望这不是在生产中而是在开发中发生，请通过 Fetch 在您的列表中添加一个空项目。这就是异常的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:43:20.813

您在那里的一系列事件导致您强制对可能不存在的项目进行操作。考虑在调用任何属性之前添加 .Where(condition)。这样，如果该项目不存在，它将不会尝试对其执行操作，从而避免 null 错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T23:05:34.203

这应该可以修复您的空引用异常：

```
SomeList.Fetch(x => SomeCondition)
  .Where(i => null!=i)
  .OrderBy(x => x.GetType().GetProperty(sort).GetValue(x, null)) 
```

# facebook - 如何避免对可选字段进行验证

> ID：12432785
> 
> 赞同：0
> 
> 时间：2012-09-14T22:29:42.537
> 
> 标签：facebook, xfbml

我创建了一个带有验证的 XFBML 表单。有几个字段对于最终用户是可选的。但是一旦启用验证，表单就会期望所有字段都被填写。那么，如何跳过可选字段的必需验证。

代码目前看起来像：

```
<fb:registration redirect-uri="http://www.sakshum.org/FbBloodDonorRegister" fields='[{"name":"name"},{"name":"first_name"},{"name":"last_name"}, {"name":"gender"}, {"name":"birthday"},{"name":"email"}, {"name":"cellPhone", "description":"Cell Number", "type":"text"}, {"name":"homePhone", "description":"Home Number", "type":"text"}, {"name":"officePhone", "description":"Office Number", "type":"text"}, {"name":"primaryAddress", "description":"Primary Address", "type":"text"}, {"name":"area", "description":"Locality/Village/Area", "type":"text"},{"name":"location"}]'  onvalidate="validated" width="530">
</fb:registration>
<script> 
function validated(form) {
    errors = {};    
    if(form.cellPhone.trim().length != 10){
        errors.cellPhone = "Cell number is required and should be 10 of digits";
    }

    if(form.homePhone.trim().length > 0){
        if(form.homePhone.trim().length != 10)
            errors.homePhone = "Home number should be 10 of digits";
    }   

    if(form.officePhone.trim().length > 0){
        if(form.officePhone.trim().length != 10)
            errors.officePhone = "Office number should be 10 of digits";
    }   

    if(form.homePhone.trim().length > 0 || form.officePhone.trim().length > 0){
        if(form.homePhone.trim() == form.officePhone.trim() || form.homePhone.trim() == form.cellPhone.trim() || form.officePhone.trim() == form.cellPhone.trim()){
            errors.homePhone = "Cell number, office number and home number cannot be same";
            errors.officePhone = "Cell number, office number and home number cannot be same";
        }
    }

  return errors;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T23:48:48.923

看起来像 Facebook 的一个已知错误[https://developers.facebook.com/bugs/139030226234017?browse=search_50551341bcf073b68986277](https://developers.facebook.com/bugs/139030226234017?browse=search_50551341bcf073b68986277)

# php - 用 PHP 替换 CDATA 中的某些内容

> ID：12432787
> 
> 赞同：-1
> 
> 时间：2012-09-14T22:29:57.707
> 
> 标签：php, regex, cdata

我想`chr(10)`用`&#xA;`PHP 替换

`<!CDATA[[Text
test
test]]>`

但我在正则表达式方面很差。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:42:00.410

为什么使用正则表达式？

```
$final = str_replace( chr(10), '&#xA;', $cdata ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T23:01:07.493

```
$xml = "cc\n<!CDATA[[Text\ntest\ntest]]>\naa\nbb\n";
$callback = function($m) {
    return '<!CDATA[[' . preg_replace("~" . chr(10) . "~s", '&#xA;', $m[1]) . ']]>';
};
echo preg_replace_callback('~<!CDATA\[\[(.+?)\]\]>~s', $callback, $xml); 
```

ps你可能不用preg_replace_callback就可以做到，但它看起来比将所有逻辑都放入preg_replace更好......

# algorithm - 将二叉最小堆原地转换为二叉搜索树

> ID：12432789
> 
> 赞同：1
> 
> 时间：2012-09-14T22:30:11.760
> 
> 标签：algorithm, heap, binary-search-tree

> **可能重复：**
> [将最大堆转换为二叉搜索树](https://stackoverflow.com/questions/4966014/convert-a-maximum-heap-to-a-binary-search-tree)

**在不使用额外空间的情况下，尽可能高效地将最小堆转换为二叉搜索树。（允许递归）。**

这个问题一直让我发疯。*必须*有一种方法可以使用 min-heap 属性来比蛮力更有效地执行此操作。例如，给定这个最小堆：

```
 [1, 7, 6, 9, 8, 21, 15] =

                1
             /     \  
           7        6
          / \      / \
         9   8   21   15 
```

我们立即知道，根据定义，根将是我们二叉搜索树中最左边的节点。我们还知道，最小堆中任何节点的右子节点都不会违反 BST 属性（parent.right > parent）。

我们如何利用这些事实有效地就地创建 BST？

# java - 如何使用 Java.awt 镜像图像

> ID：12432791
> 
> 赞同：1
> 
> 时间：2012-09-14T22:30:22.977
> 
> 标签：java, image, awt, graphics2d

我有一个要在 Java 中完成的任务，我这辈子都想不通。我应该使用 Graphics2D 和 Java.AWT。在 x 轴和 y 轴上镜像图像。

当前代码是：

```
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Color;
public class DrawingImages
{
private Picture newCanvas = null;
private Graphics g = null;
private Graphics2D g2 = null;
private Picture pic1 = null;
private Picture pic2 = null;
private Color color = null;
private Pixel sourcePixel, targetPixel = null;
private Color sourceColor, targetColor = null;

DrawingImages(Picture canv, Color col)
{
    Picture sourcePicture = new Picture("WashingtonMonument.jpg");
    newCanvas = canv;
    newCanvas.setAllPixelsToAColor(Color.BLACK);
    for(int y = sourcePicture.getHeight()-1; y >0; y=y-1)
    {
        for(int x = sourcePicture.getWidth() - 1; x > 0; x = x - 1)
        {
            sourcePixel = sourcePicture.getPixel(x,y);
            sourceColor = sourcePixel.getColor();
            targetPixel = newCanvas.getPixel(x+sourcePicture.getWidth() -1,y+sourcePicture.getHeight()- 1);
            targetPixel.setColor(sourceColor);         
        }
    }

    g = newCanvas.getGraphics();
    g2 = (Graphics2D)g;  
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:58:20.040

图片来源于什么？`Image`? 如果是这样，您可以使用`Image.scale(-1, -1)`直接镜像图像。

如果没有，您可以`AffineTransform.getScaleInstance(-1, -1)`直接在`Graphics`上下文中使用 a，但您必须翻译图像的位置

您还可以查看[AffineTransform.rotate() - 我如何同时进行 xlate、旋转和缩放？](https://stackoverflow.com/questions/11911610/affinetransform-rotate-how-do-i-xlate-rotate-and-scale-at-the-same-time/11911758#11911758)它使用这种技术

# php - PHP, wamp, 共享本地文件, href='c:\path\file.doc',

> ID：12432793
> 
> 赞同：0
> 
> 时间：2012-09-14T22:30:23.893
> 
> 标签：php, wamp, share, href, local

Wampserver 2.2
PHP

`$path`在 www-root 之外。

```
$path = 'file:///c:/path/files'<br />
$file = 'file.txt'<br />

echo "< a href='$path/$file'> . $file . < /a>< br />"; 
```

我如何使这个可以访问，以便访问者可以下载`$file`？当我点击链接时什么都没有发生。这是一个小而简单的文档管理系统的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:38:30.057

你混淆了两个概念：

*   **服务器**上存储文件的文件路径
*   **客户端**在哪里可以找到该文件的 URL

抽象出这两个位置是网络服务器更重要的功能之一。

如果要从www-root**外部提供文件，则需要在 www-root****内**创建一个帮助脚本，用于下载。如果您用 PHP 编写此代码，请查看 `fpassthru()`or`readfile()`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:38:42.690

外人无法通过提供链接访问您计算机上的文件！这将是一个巨大的安全问题！

在此处查看此答案 [允许用户在 webroot 之外下载文件](https://stackoverflow.com/questions/3884677/allow-users-to-download-files-outside-webroot)

# android - 在表中显示来自 DB 的数据。安卓

> ID：12432794
> 
> 赞同：1
> 
> 时间：2012-09-14T22:30:30.197
> 
> 标签：android

我正在寻找一种简单的方法来在手机屏幕上显示数据库中的数据。最好我想创建一个表（不是数据库表，而是屏幕上的表），它会显示我想要的所有数据。有什么简单的方法吗？我唯一的想法是使用自定义 listView，但我不确定它是否会按我的意愿工作。我不想能够与表格交互，只是为了能够显示数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:10:25.393

使用 a`CursorAdapter`将查询绑定`Cursor`到您的`ListView`. 确保您`Cursor`在后台线程上查询`CursorLoader`响应最快的用户体验。

# button - 登录。表单返回按钮发布数据

> ID：12432796
> 
> 赞同：0
> 
> 时间：2012-09-14T22:31:00.250
> 
> 标签：button, post, back

我正在使用 post 方法创建登录表单。它工作正常。注销按钮工作正常。但是当我按下浏览器的返回按钮并到达用户提交 ID 和密码的登录页面时，重新发送选项就在那里。然后它再次重新发送ID和密码..我该如何克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:32:51.143

您只需使用 javascript 或服务器端代码将用户重定向回第一页。不要依靠必须回到历史才能到达那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:33:07.107

你不能。你为什么要这样做呢？您需要做的就是使用一些 javascript 重定向用户：

```
<script>
window.location = "http://www.yoursite.com/login"
</script>
<noscript>
<a href="http://www.yoursite.com/login">Back to login page</a>
</noscript> 
```

noscript 标签适用于禁用 javascript 或根本没有它的人。

# android - 如何在线程中使用和设置自定义列表视图适配器？

> ID：12432801
> 
> 赞同：0
> 
> 时间：2012-09-14T22:31:26.967
> 
> 标签：android, multithreading, parameters, progress-bar, adapter

我是 android 开发的菜鸟，我试图在 onCreate 期间填充列表视图时显示进度条。我正在尝试使用自定义适配器，但 eclipse 说我的构造函数未定义。具体来说，“构造函数 MainActivity.UserItemAdapter(new Thread(){}, int, ArrayList) 未定义”它建议我将自定义适配器上的上下文参数更改为线程。理想情况下，我想解决这个问题而不必更改我的构造函数，因为我在代码的其他地方使用它。任何帮助是极大的赞赏。这是我的代码。

创建时：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    dialog = ProgressDialog.show(MainActivity.this, "Loading", "Loading, please wait..");
    Thread t = new Thread() {
        public void run() {
        //getting data for listview...   

    ListView listView = (ListView) findViewById(R.id.ListViewId);
    listView.setAdapter(new UserItemAdapter(this, R.layout.listitem, tweets));//<--error here constructor is undefined.

    handler.post(new Runnable() {
        public void run() {
            dialog.dismiss();                
          };              
      });        
    }           
 };
t.start();      
} 
```

我的自定义适配器：

```
public class UserItemAdapter extends ArrayAdapter<Tweet> {
    private ArrayList<Tweet> tweets;

    public UserItemAdapter(Context context, int textViewResourceId, ArrayList<Tweet> tweets) {
        super(context, textViewResourceId, tweets);
        this.tweets = tweets;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:47:51.140

`this`在这种情况下指的是 Thread 对象。用户要么`getApplicationContext()`要么`MyActivity.this`。

# python - 执行python脚本时的奇怪行为

> ID：12432803
> 
> 赞同：0
> 
> 时间：2012-09-14T22:31:56.363
> 
> 标签：python, dataframe, pandas

我不知道你们中是否有人有过这样的行为，但是在调试我的代码之后，我注意到我的代码发生了一件非常奇怪的事情。基本上，我在某个索引（“日期”）处使用 pandas 数据帧（具有 2 个分层列）中包含的值填充一个 numpy 数组（“vols”），但是如果我尝试在脚本中执行这段代码：

```
 for i in range(capEndDates_size):
      for j in range(strike_size):         
       vols[i,j] = float(df[capEndDates[i]][strikes_list[j]].ix[date]) 
```

我无法用索引“日期”的数据框中包含的变量正确填充变量“vols”的所有值，而是在我期望值的地方得到一些“nan”。有趣的是，如果我在解释器中执行这段代码，这是正确的（即在我正在使用的 IDE 的 Spyder 编辑器上按 f9）！我通过重复这些行两次（即强制脚本执行两次）找到了这个错误的解决方法。我的解决方案是这样的：

```
 for i in range(capEndDates_size):
      for j in range(strike_size):         
       vols[i,j] = float(df[capEndDates[i]][strikes_list[j]].ix[date])

   for i in range(capEndDates_size):
      for j in range(strike_size):         
       vols[i,j] = float(df[capEndDates[i]][strikes_list[j]].ix[date]) 
```

这真的是不可接受的。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:02:13.387

`import pdb; pdb.set_trace()`为什么不尝试在分配给`vols`if是 NaN 之后插入一个硬断点 ( )`vols[i,j]`并以这种方式进行调试？

# windows - Windows 便携式设备是否支持 TWAIN 驱动程序？

> ID：12432810
> 
> 赞同：0
> 
> 时间：2012-09-14T22:32:49.007
> 
> 标签：windows, image, twain, wpd

我正在开发一个必须支持 TWAIN 的应用程序，但额外的设备支持也可能是有益的。目前，我预计不需要比一次获取单个图像的能力更高级的了。

[我在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms630371%28v=vs.85%29.aspx)读到WIA 支持 twain，并且[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/dd389004%28v=vs.85%29.aspx)WPD 可以暴露给 WIA 接口。但是，我找不到任何关于 TWAIN 的 WPD 支持的直接文档。

我想知道的是我是否可以只实现对 Windows 便携式设备的支持，并“免费”获得对 WIA 和 TWAIN 的支持？如果是这样，WPD 的 TWAIN 支持中是否有任何“陷阱”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:10:40.757

WIA 和 WPD 兼容层适用于使用 TWAIN 访问 WIA 或 WPD 驱动程序的应用程序。以 WIA 或 WPD 编写的应用程序将使用各自的 API 来访问驱动程序，独立于 TWAIN。换句话说，您可以按顺序将 TWAIN 视为 WIA 和 WPD 之上的一层。因此，您实际上无法使用 WPD 编写应用程序来获得 TWAIN 支持。

WPD 对 WIA 和 TWAIN 的支持仅限于数码相机。WPD 没有扫描仪支持。WIA 确实支持扫描仪，但它再次位于 TWAIN 之下。

# c# - 传球类型

> ID：12432816
> 
> 赞同：1
> 
> 时间：2012-09-14T22:33:08.720
> 
> 标签：c#, generics

我在第三方组件中有一个方法，可以像下面的代码一样调用它：

```
ICustomer log = Axis.GetInstance<ICustomer>(); 
```

由于我不想将上述第三方组件直接暴露给所有调用者，我决定创建一个调用第三方“Axis.GetInstance()”的包装器方法，我的问题是如何传递类型 T 并调用泛型方法中的方法

调用代码：

```
var result = Util.MyCustomWrapper<ICustomer>();

public class Util
{
  public static T MyCustomWrapper<T>()
  {

    1.call Axis.GetInstance<T>(); // **how to pass the type T**
    2.return T

  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T22:36:41.437

该方法可以像您编写的那样调用：

```
public static T MyCustomWrapper<T>()
{
    return Axis.GetInstance<T>();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:41:11.777

```
public class Util
{
    public static T MyCustomWrapper<T>()
    {
        T customer = Axis.GetInstance<T>(); 
        return customer;
    }
} 
```

加上要编译的其他类型

```
public interface ICustomer { }
public class Axis
{
    public static T GetInstance<T>() 
    {
        throw new NotImplementedException();
    }
} 
```

# sql-server-2008 - 如何在sql server中查找重复索引

> ID：12432827
> 
> 赞同：0
> 
> 时间：2012-09-14T22:33:57.103
> 
> 标签：sql-server-2008

> **可能重复：**
> [用于查找冗余索引的 T-SQL](https://stackoverflow.com/questions/3283666/t-sql-for-finding-redundant-indexes)

如何在表中查找重复索引，例如在 a、b 列上创建非聚集索引名称 FX_LOCATION_ID，并且在表中的同一列 a、b 上再次有一个名为 FX_LOCATION_ID1 的非聚集索引。现在我想找到重复索引在数据库中的所有表上，是否有人有任何我可以使用的方便的 sql 脚本。

# wcf - IClientMessageInspector CorrelationState

> ID：12432837
> 
> 赞同：3
> 
> 时间：2012-09-14T22:35:34.283
> 
> 标签：wcf

我找不到太多关于 IClientMessageInspector 接口的 BeforeSendRequest 方法的返回值的信息。我发现的所有示例总是返回 null。根据 MSDN 上的描述，一旦调用 AfterReceiveReply，此方法的返回值将作为相关性状态参数传回。但是，MSDN 还指出，最佳实践是为相关状态使用 GUID。

这句话让我有些困惑，因为我将其解释为我应该只对相关状态使用 GUID。我想要做的是使用请求的 xml 内容作为状态，这样如果回复是错误的，我可以同时记录请求和回复。如果回复是错误的，我只想记录请求。

有没有人有使用相关状态的经验？我可以将它用于我想要使用的用途吗？它似乎在测试中起作用，但由于我在这方面发现的信息数量有限，我担心可能存在某种我没有看到的陷阱。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T08:24:29.293

CorrelationState，顾名思义，旨在帮助您找到发送的请求和接收的回复之间的相关性。因此，由于 GUID 是唯一标识符，因此 MSDN 建议将其用作关联状态。

在 BeforeSendRequest 和 AfterReceiveReply 方法中，您可以记录相关状态值和 Messages 对象（使用 CreateBufferCopy / CreateMessage 和其他 Message 类操作），并在发送的请求和接收的回复之间进行匹配。

请注意，在此解决方案（以及任何其他纯 WCF 解决方案，顺便说一句）中，只有在回复错误时才能记录请求。这是因为在 WCF 管道中没有你同时拥有请求和回复的位置。

正如您所提到的，这样做的唯一机会是使用消息（作为字符串或消息对象 - 再次使用 Message 类操作）作为相关状态。如果您的服务逻辑可以为相同的输入获得成功回复和错误回复（例如，如果您的逻辑依赖于数据库或其他服务等外部资源），这不一定是一个好主意。

# jquery - 通过 id 将变量设置为另一个变量

> ID：12432843
> 
> 赞同：0
> 
> 时间：2012-09-14T22:36:03.590
> 
> 标签：jquery, google-maps-api-3

我正在使用谷歌地图，我正在尝试创建一个侧边栏来启用不同的 KML 覆盖。我已将KML图层放入与按钮ID标签相同的变量中以按下以激活它们，希望将该ID称为变量，然后可以在setMap函数中使用。
不确定这是否真的可行

在这个脚本中，我正在尝试制作它，以便您按下 ID 标记为“kml1”的元素，设置 testvar='kml1'，然后能够将 testvar.setMap(the_Map) 代替kml1.setMap(the_Map), as testvar==kml1

jQuery

```
kml1 = new google.maps.KmlLayer("http://www.domain.com/map_overlay1.txt", {
            preserveViewport: true,
        });
        kml2 = new google.maps.KmlLayer("http://www.odomain.com/map_overlay2.txt", {
            preserveViewport: true,
        });

    $(document).ready(function() {
        $('.kml_item').toggle(
                function() {
                    for (i=0; i<50; i++) {
                        testvar = this.id
                        if (testvar == 'kml' + i) {
                            testvar.setMap(the_Map);
                            break;
                        }
                    }
                },
                function() {
                    for (i=0; i<50; i++) {
                        testvar = this.id
                        if (testvar == 'kml' + i) {
                            testvar.setMap(null);
                            break;
                        }
                    }
            );
    }) 
```

关联的 HTML

```
<div id="kml1" class="kml_item">KML 1</div>
            <div id="kml2" class="kml_item">KML 2</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:42:05.453

尝试一个`.click()`功能

```
 $('#kml1').click(function(){
      new google.maps.KmlLayer("http://www.domain.com/map_overlay1.txt", {
            preserveViewport: true,
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:43:48.793

我想你可以通过一些调整得到你想要的。

```
// These kml objects will be attached to the global window object at
// window.kml1
// or
// window['kml1']
var kml1 = new google.maps.KmlLayer("http://www.domain.com/map_overlay1.txt", {
        preserveViewport: true,
    });
var kml2 = new google.maps.KmlLayer("http://www.odomain.com/map_overlay2.txt", {
        preserveViewport: true,
    });

$(document).ready(function() {
    $('.kml_item').click(function() {
        // Access the various kml objects and set the_Map
        var kml = window[this.id]
        if(kml.getMap()) {
            kml.setMap(null);
        }
        else {
            kml.setMap(the_Map);
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T00:02:47.603

不确定在这个网站上回答你自己的问题是否真的是犹太教，但我想出了另一种方法，尽管我确实相信我最初使用 ID 标签作为变量的问题在我处理它的方式上是无法解决的。我没有将每个 KML 层放在一个单独的变量中，而是将它们放在一个数组中。为可点击的 div 提供一个标题标签编号，允许该函数进行计数，直到数组项与 div 的标题编号匹配，并将该项从数组中放置到地图上。

KML 数组

```
kml_arr = [
            new google.maps.KmlLayer("http://www.domain.com/map_overlay1.txt", {
            preserveViewport: true,
        }),
            new google.maps.KmlLayer("http://www.domain.com/map_overlay2.txt", {
            preserveViewport: true,
        })
        ] 
```

jQuery

```
$(document).ready(function() {
        $('.kml_item').toggle(
                function() {
                    $(this).animate({backgroundColor: '#ffffff'}, 200);
                    for (i=0; i<50; i++) {
                        if (i == this.title) {
                            kml_arr[i].setMap(the_Map);
                            break;
                        }
                    }
                },
                function() {
                    $(this).animate({backgroundColor: '#d0d0d0'}, 200);
                    for (i=0; i<50; i++) {
                        if (i == this.title) {
                            kml_arr[i].setMap(null);
                            break;
                        }
                    }
                }
            );
    }) 
```

关联的 HTML

```
 <div title="0" id="kml1" class="kml_item">KML 1</div>
            <div title="1" id="kml2" class="kml_item">KML 2</div> 
```

# linq - LINQ to Objects 和排序顺序

> ID：12432844
> 
> 赞同：0
> 
> 时间：2012-09-14T22:36:06.187
> 
> 标签：linq, sorting, arraylist

我正在尝试使用包含自定义对象的 ArrayList。数组列表已排序。我正在使用 LINQ to 对象来搜索多个字段。LINQ to objects 搜索将使用底层排序，还是将扫描整个数组列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:41:48.400

LINQ 扩展方法不会利用底层排序。这些方法是为在 IEnumerable 上工作而编写的，因此不能对基础集合进行任何假设。从实现来看，一些 LINQ 方法将检查输入是否为 ICollection，如果是则调用相应的方法（我相信 Count() 以这种方式工作）可能避免进行线性扫描，但在这种情况下有LINQ 无法检测到您的数组是否已排序，因此它无法利用这一事实。

此外，如果您正在执行 myList.Where(o => o.Prop1 < 2 && o.Prop2 == 3) 之类的操作，则传递给 Where() 的 Func<> 对 LINQ 完全不透明，因此不可能即使它确实知道列表已排序，也可以找出正在检查的属性。

# android - 从谷歌地图获取静态地图 - 我有内存泄漏吗？

> ID：12432850
> 
> 赞同：0
> 
> 时间：2012-09-14T22:36:41.357
> 
> 标签：android, google-maps, memory-leaks, bitmap, eclipse-memory-analyzer

这是我的第一个 Android 应用程序，它运行良好，但我已经开始在我的 LogCat 中获取 GC_CONCURRENT 消息。我读过这是垃圾收集器，它似乎每次在 log cat 中报告时都会释放大约 %6-%7 （似乎是 4-5 次）。现在我不确定这是否意味着我有泄漏？

我安装了 MAT 插件，这就是它向我展示的内容：

[http://imageshack.us/a/img694/5589/suspectandroid.png http://imageshack.us/a/img694/5589/suspectandroid.png](http://imageshack.us/a/img694/5589/suspectandroid.png)

[http://imageshack.us/a/img820/4295/domtreeandroid.png http://imageshack.us/a/img820/4295/domtreeandroid.png](http://imageshack.us/a/img820/4295/domtreeandroid.png)

似乎表明我正在使用与位图相关的东西占用超过 %60 的内存？

这是我获取位图的代码：

```
public void LoadMap()
{
    Thread web = new Thread() 
    {
        public void run() 
        {

            try 
            { 
                Location loc = locMan.getLastKnownLocation(LocationManager.GPS_PROVIDER);
                String mapURL = MAP_URL + "center=" + loc.getLatitude() + "," + loc.getLongitude() +"&zoom=" + MAP_ZOOM + "&size=" + MAP_SIZE + "&maptype=" + MAP_TYPE + "&sensor=true";

                map = BitmapFactory.decodeStream((InputStream)new URL(mapURL).getContent());

                Message msg = Message.obtain();
                msg.what = 1;
                handler.sendMessage(msg);
            } catch (Exception e) { Log.i("ERROR:", "" + e.toString());
            }
        }
    }; web.start();

}

private Handler handler = new Handler()  
{
  @Override
  public void handleMessage(Message msg) 
  {
    switch(msg.what)
    {
    case 1:
        SetMap();
        break;
    }
  }
};

public void SetMap()
    {    
        imgView = (ImageView)findViewById(R.id.imageView1);
        imgView.setImageBitmap(map);
    } 
```

现在它给了我一个警告，处理程序应该是静态的，以防止潜在的内存泄漏，但我不确定这是否对我有影响？或者从服务器加载地图后如何更新我的 UI。

# iphone - 尝试设置手势识别时崩溃

> ID：12432853
> 
> 赞同：3
> 
> 时间：2012-09-14T22:36:50.593
> 
> 标签：iphone, ios, ipad, uigesturerecognizer

我试图在我的代码中设置一个点击手势，当我尝试确定坐标时我遇到了崩溃。任何帮助，将不胜感激。

```
2012-09-14 17:25:49.149 valhalla[16469:707] tap detected
2012-09-14 17:25:49.159 valhalla[16469:707] -[UITapGestureRecognizer translationInView:]: unrecognized selector sent to instance 0x37bf10
2012-09-14 17:25:49.165 valhalla[16469:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITapGestureRecognizer translationInView:]: unrecognized selector sent to instance 0x37bf10'
*** First throw call stack:
(0x3104c88f 0x3611d259 0x3104fa9b 0x3104e915 0x3104f788 0x7a4a1 0x31870637 0x31800d65 0x31a31479 0x3177cf55 0x3177baa3 0x317887e9 0x31788627 0x317881f5 0x3176e695 0x3176df3b 0x313e222b 0x31020523 0x310204c5 0x3101f313 0x30fa24a5 0x30fa236d 0x313e1439 0x3179ccd5 0x75307 0x752c8)

#import "GLViewController.h"
#import "GLView.h"

@implementation GLViewController

- (void)loadView {

    CGRect applicationFrame = [[UIScreen mainScreen] applicationFrame];

    GLView *glView = [[[GLView alloc] initWithFrame:applicationFrame] autorelease];
    self.view = glView;
    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc]
                                         initWithTarget:self action:@selector(handleSingleTap:)];
    singleTap.numberOfTapsRequired = 1;
    [self.view addGestureRecognizer:singleTap];
    [singleTap release];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // We can run in landscape mode
    return (UIInterfaceOrientationIsLandscape(interfaceOrientation));
}

/*- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    //[self.view becomeFirstResponder];
    //[self.view setReturnKeyType:UIReturnKeyDone];
}*/
- (void)didReceiveMemoryWarning
{ 
    // default behavior is to release the view if it doesn't have a superview.

    // remember to clean up anything outside of this view's scope, such as
    // data cached in the class instance and other global data.
    [super didReceiveMemoryWarning];
}

- (void) handleSingleTap: (UIPanGestureRecognizer *) uigr
{
    NSLog(@"tap detected");
    CGPoint translation = [uigr translationInView:self.view];
    CGPoint finalPosition = self.view.center;
    finalPosition.x += translation.x;
    finalPosition.y += translation.y;

}

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T22:53:00.483

您声明了 UITapGestureRecognizer 但您的方法正在转换为 UIPanGestureRecognizer

```
- (void) handleSingleTap: (UIPanGestureRecognizer *) uigr 
```

UITapGestureRecognizer 不声明translationInView。这就是您的应用程序崩溃的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T22:56:36.830

你想不`locationInView:`使用`translationInView:`

# css - 高级边框样式 - CSS 还是图像？

> ID：12432854
> 
> 赞同：0
> 
> 时间：2012-09-14T22:37:08.237
> 
> 标签：css, border

![在此处输入图像描述](../Images/c47b6e6f11e83c4e7fa83b63b10ae617.png)

我正在尝试使 div 的边框看起来像这样，具有透明度、阴影和内部虚线边框。有没有办法用 CSS/jQuery 做到这一点，或者我最好只使用图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:42:49.333

试试**HTML**

```
<div id="rounded">    
    ​&lt;div id="yellow">
        <div id="dashed"></div>
    </div>
</div>​​​​​​​​​​​​​​​ 
```

和**CSS**

```
#rounded {
    background-color: gray;
    width: 400px;
    height: 400px;
    padding: 10px;
}
#yellow {
    background-color: #F7EFE2;
    height: 96%;
    padding: 10px;
}
#dashed {
    width: 100%;
    border: 1px dashed #E8C55F;
    height: 100%;
} 
```

[在此处](http://jsfiddle.net/LXS3V/)查看实时示例 ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:40:24.110

你可以写

```
border-style:dashed; 
```

如果你需要更多检查[这个](http://www.w3schools.com/css/tryit.asp?filename=trycss_border-style)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T22:41:10.180

虽然您可以使用 CSS3/HTML 5 来实现，但如果框的大小是固定的，我会使用图像。CSS3 仅在现代浏览器中受支持，而在较旧的浏览器中也支持图像。

如果这是一个弹出窗口，那么这会改变一些事情，你会想要以其他方式而不是图像来做阴影。

# android - 使用 Chrome 远程调试时向 Android 中的 Chrome 发送新 URL

> ID：12432858
> 
> 赞同：4
> 
> 时间：2012-09-14T22:37:54.837
> 
> 标签：android, google-chrome-devtools

当连接到设备并使用 Chrome 开发者工具远程调试时，有没有办法告诉您的设备访问一个新的 URL，而不仅仅是选择一个已经缩略图的页面？

提前致谢，

马丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T22:01:53.120

You can pick one of the pages that are thumbnailed (i.e. one of the open tabs), and in the developer tools for that page, go to the console tab and type:

window.location.href = "[http://google.com](http://google.com)"

...where you replace [http://google.com](http://google.com) with your desired URL. (see [How to get browser to navigate to URL in Javascript?](https://stackoverflow.com/questions/1226714/how-to-get-browser-to-navigate-to-url-in-javascript))

If you don't want to navigate one of the existing pages, one way I know of is via telling android (via ADB) to open a URL, with the default browser set to Chrome in Android. That should open a new tab. See [Need command line to start web browser using adb](https://stackoverflow.com/questions/3512198/need-command-line-to-start-web-browser-using-adb)

# c - 返回数组的安全性

> ID：12432866
> 
> 赞同：1
> 
> 时间：2012-09-14T22:38:53.603
> 
> 标签：c, arrays, function, memory-management, software-design

假设以下函数：

```
float *dosomething(const float *src, const int N)
{
    float *dst = (float *)malloc(sizeof(float) * N);
    if(!dst)
    {
        printf("Cannot allocate memory\n");
        exit(EXIT_FAILURE);
    }
    for(int i = 0; i < N; i++)
           dst[i] = src[i] * 2;          
    return dst;
} 
```

在这种情况下，如果我们想使用它，我们不需要预先分配内存吗？

现在，只是另一种情况：

```
void dosomething(float *dst, const float *src, const int N)
{
    for(int i = 0; i < N; i++)
        dst[i] = src[i] * 2;
} 
```

在最后一种情况下，我们需要预先分配内存。所以我分享它，我想知道哪个是返回数组的最佳方法。它们中的哪一个为图书馆或班级的用户提供了更多的安全性？最推荐哪种方法？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:55:06.110

什么是更好的实践或更好的想法取决于您实际尝试做的事情。

像`char *strdup(const char *s)`(POSIX) 这样的函数的实现方式与第一种情况类似，它接受一个字符串作为参数，为另一个相同长度的内存分配内存，然后将源复制到新的内存中。这很*方便*，并且使您免于手动执行为字符串副本分配缓冲区的常见操作。您可以假设这就像调用`malloc`然后`strcpy`/ `memcpy`。

然后你有一个类似的函数`char *strcpy(char *dest, const char *src)`，就像第二种情况一样，你可以控制字符串将被复制到哪里。这样，您就不会被迫将字符串复制到动态分配的、不是您选择的内存中。

如果您需要创建和初始化某种动态结构（列表、树等），第一种方法可能会派上用场，但第二种方法也足以让您控制正在使用的内存；您可以在堆上使用动态分配的内存，或者在堆栈上使用局部变量等。

就个人而言，我通常会采用第二种方式，因为我可以更好地控制要初始化的变量，而且我不会被迫使用新`malloc`的内存（如果我希望我的局部变量被初始化怎么办？ ）。然后，您始终可以编写一个包装函数，该`malloc`函数使用新分配的内存作为目标调用然后调用您的函数。

这完全取决于您和您的设计以及您想要实现的目标，没有正确和错误的方法，只要您记住分配的内存，您就不应该有任何问题。我不会说两者中的任何一个都更“安全”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:46:41.787

没有正确的答案。

C 语言本质上是不安全的，即只有复制并返回副本才能使数据安全。从而向调用者隐藏原始的真实位置。

更重要的是如何处理共享数据的内存解除分配，这通常表明该方法更正确。

在示例中，您引用的唯一数据是调用者已经传递（并且已经拥有）的数据。所以你分配内存，对数据做一些事情并将分配的内存返回给调用者的事实很好。只需记录该函数的工作方式（就像 strdup() 在 C 字符串上工作，调用者负责对任何返回的非 NULL 指针使用 free() ）。

FWIW，您不会“共享”数据。调用者调用函数代表它对数据进行处理，一旦函数返回，就不再发生访问。如果存在（由函数）保留的内存指针（或其他数据），则将这种情况描述为共享数据是正确的。因为在将来的某个时候，可能会以某种方式使用保留的内存指针（或其他数据）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T22:57:02.563

没有明确的“这个比另一个好”。我从来没有真正考虑过这些事情，只是做任何想到的事情。对于手头的问题，这可能是更“自然”的解决方案。如果结果证明它是“坏的”......好吧，幸运的是我们不是通过在石碑上雕刻来编程。

在您的情况下，根本不了解该软件，没有什么“感觉”更好。这实际上很常见。您在编程中所做的几乎所有事情都可以以不同的方式完成，并且通常除了个人喜好或只是随机的“这就是我首先想到的”之外没有实际的区别。

例如，您的第二个解决方案让调用者复制到现有内存，这可能是更大对象的一部分。另一方面，他每次都必须提供目标内存。尽管这也可能意味着通过仅使用一个内存块进行多次调用来节省分配。对于简单的情况，第一个解决方案似乎稍微方便一些，但在这种情况下会“锁定”用户：总是分配一个新的内存块。

# c++ - 引用可以代替指针吗？

> ID：12432868
> 
> 赞同：2
> 
> 时间：2012-09-14T22:39:09.330
> 
> 标签：c++, linked-list

更具体地说，我想知道为什么我们在典型的链表实现中使用指针。以下节点的实现可能会导致任何问题吗？

```
template <typename T>
class Node {
    T data;
    Node<T>& next;
    Node<T>& prev;
}; 
```

有什么理由我们应该在这里使用指针而不是引用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T22:41:25.383

创建引用后不能设置引用，这使得非可变链表实现有些棘手。（您需要将引用包装在要更改引用时可以重新创建的对象中）。

也无法在引用上设置 NULL 值，因此表示列表的结尾需要一些想象力。

可能更好地坚持链接列表中的指针，甚至更好，使用`std::list<>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:44:02.350

左值引用不能替换指针；他们做不同的事情。

左值引用必须用左值初始化，并且左值引用将在其生命周期的剩余时间内引用该对象。不能反弹。这为您的列表节点带来了两个直接问题。

你如何开始列表？您想构造一个没有“先前”的节点，但`prev`必须使用`Node`对象初始化该成员。您可以想象使用who is it self 来表示列表`Node`的`prev`头部，但这解决了左值引用的糟糕选择。（例如`Node<T> emptylist = { T(), emptylist, emptylist }; //eurgh`）

其次，你如何操作列表？您无法更改 的绑定，`next`这`prev`意味着更改列表的唯一方法是构建一组全新的节点并复制每个`data`元素。

# css - 两个浮动 div 旁边的非浮动 div

> ID：12432869
> 
> 赞同：0
> 
> 时间：2012-09-14T22:39:12.683
> 
> 标签：css

我有一个容器，它有两个浮动的子 div（切换黄色背景以查看它们）。我想在这两个下方添加第三个（红色），没有任何浮动，但它延伸到所有容器。任何想法为什么？

JSFIDDLE：http: [//jsfiddle.net/RrQff/2/](http://jsfiddle.net/RrQff/2/)

**HTML**

```
<center>
<div id='container'>
    <div class="big"></div>
    <div class="big"></div>
    <div id='extra'>abc<div>       
<div>
</center> 
```

**CSS**

```
#container {

    height:400px;
    width:400px;
    background-color:gray;
}

.big {
    height:350px;
   /* background-color:yellow;*/
}

#container > div:first-child {border-right:1px solid black;}

#container > div {
width:199px;
float:left;

}

#extra {

    background-color:red;
    width:80% !important;
    float:none !important;
    margin-top:20px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:44:49.430

添加`clear: both;`到您的`#extra`div 的 css 中，如下所示：

```
#extra {
    background-color:red;
    width:80% !important;
    float:none !important;
    margin-top:20px;
    clear: both;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:42:43.223

添加 CSS 清除：

```
#extra {
  clear: both;
  background-color:red;
  width:80% !important;
  float:none !important;
  margin-top:20px;
} 
```

试试这个：http: [//jsfiddle.net/RrQff/5/](http://jsfiddle.net/RrQff/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:44:49.510

更好的解决方案是对所有 3 个 Div 使用 display: inline-block 或：

```
> #container{ position: relative;}
> #container .big:first {position: absolute; top: ... left: ...}
> #container div+div { top: ..left } $container #extra { position: absolute; right: 0; top: 0} } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T22:47:54.563

您需要清除 div。尝试这样做：

```
<center>
<div id='container'>
    <div class="big">div one (floated)</div>
    <div class="big">div two (floated)</div>
    <div class="clear" style="clear:both" />
    <div id='extra'>third div (which i want below floated ones)<div>        
<div>
</center> 
```

在两个浮动 div 下方插入 clear:both div

# asp.net-mvc - 无法上传文件/图像

> ID：12432877
> 
> 赞同：0
> 
> 时间：2012-09-14T22:41:02.400
> 
> 标签：asp.net-mvc, file-upload

我正在制作一个简单的表单，用户将在其中输入一些数据并选择要上传的文件。但我不能让它工作..由于某种原因，当我点击保存时，文件没有进入控制器。

这是一些代码。

```
@using (Ajax.BeginForm("Add", "Category", null, new AjaxOptions
{
UpdateTargetId = "upload-message",
InsertionMode = InsertionMode.Replace,
HttpMethod = "POST",
OnSuccess = "uploadSuccess"
}, new { id = "AddCategoryForm", enctype = "multipart/form-data" }))
{
<div class="editorLabel">
    @Html.LabelFor(m=>m.CategoryName)
</div>
<div class="editorText">
    @Html.TextBoxFor(m=>m.CategoryName)
</div>
<div class="editorLabel">
    @Html.LabelFor(m => m.Description)
</div>
<div class="editorText">
    @Html.TextAreaFor(m => m.Description)
</div>

<div class="editorLabel">
    @Html.LabelFor(m => m.IconPath)
</div>
<div class="editorText">
    <input type="file" id="file" name="file" />
</div>
<div class="editorLabel">
    @Html.LabelFor(m => m.IsActive)
</div>
<div class="editorText">
    @Html.CheckBoxFor(m=>m.IsActive)
</div>
<p>
    <input type="submit" id="submit" value="Save" />
</p> 
```

}

控制器：

```
[HttpPost]
    public ActionResult Add(HttpPostedFileBase file,CategoryViewModel model)
    {
        if (ModelState.IsValid)
        {
            System.IO.FileInfo info = new FileInfo(file.FileName);
            string ext = info.Extension;
            //other code
         }
      } 
```

在控制器中，文件始终为空。我哪里做错了？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T00:03:20.993

首先**交换**控制器的参数，使其如下所示：

```
[HttpPost]
public ActionResult Add(CategoryViewModel model, HttpPostedFileBase file) 
```

例如. [_](https://stackoverflow.com/questions/10402094/uploading-image-in-asp-net-mvc-3)

如果由于某种原因这不起作用，请将您上传的文件**作为模型**( `CategoryViewModel`) 的一部分并具有控制器签名，如下所示：

```
[HttpPost]
public ActionResult Add(CategoryViewModel model) 
```

例如. [_](http://blogs.planetcloud.co.uk/mygreatdiscovery/post/Handling-file-uploads-in-complex-view-models.aspx) 这样文件将作为模型的一部分返回，您将其提取为模型的属性之一。这会起作用（它对我有用）。

希望这可以帮助。

# mysql - 每组选择一个特定的行？

> ID：12432884
> 
> 赞同：2
> 
> 时间：2012-09-14T22:41:37.370
> 
> 标签：mysql

我有一个名为 rating 的表，看起来像这样

> ```
> 评级 | 皮西德 | 用户
>    8 12 6
>    7 12 6
>    9 15 7
>    5 16 7
>    9 17 8
>    10 2 8
>    7 18 3
>    10 22 12
> 
> ```

我想根据 picid 对评级进行分组，但只选择每个用户评级最高的 picid。我已经有这样的查询：

```
SELECT *, AVG(rating) AS total FROM ratings
  GROUP BY picid ORDER by total DESC 
```

现在查询将输出如下信息：

> ```
> 评级 | 皮西德 | 用户
>  7.5 12 6
>    9 15 7
>    5 16 7
>    9 17 8
>    10 2 8
>    7 18 3
>    10 22 12
> 
> ```

所以它成功地根据 picid 对评级进行了分组，但我只想要每个用户最高的一个。我希望它输出如下信息：

> ```
> 评级 | 皮西德 | 用户
>  7.5 12 6
>    9 15 7
>    10 2 8
>    7 18 3
>    10 22 12
> 
> ```

看看它是如何只允许每个用户获得最高评价的 picid 的？我怎样才能修改我的查询来做到这一点？

如果您需要对我的要求进行更多说明，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T23:06:33.387

您首先必须计算每个`(Picid,User)`组合的平均评分，然后找到该具体化结果的[分组最大值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)：

```
SELECT Rating, PicID, User
FROM (
  SELECT   AVG(Rating) AS Rating, Picid, User
  FROM     ratings
  GROUP BY Picid, User
) t1 NATURAL JOIN (
  SELECT   MAX(Rating) AS Rating, User
  FROM     (
    SELECT   AVG(Rating) AS Rating, User
    FROM     ratings
    GROUP BY Picid, User
  ) t
  GROUP BY User
) t2 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/60a4b/21)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:55:34.473

我认为这不是最好的方法，但它有效：

```
SELECT MAX(total) as maxTotal, picid, User 
FROM 
   (SELECT *, AVG(rating) AS total 
    FROM ratings 
    GROUP BY picid 
    ORDER BY total DESC) as a 
GROUP BY User 
ORDER BY maxTotal desc; 
```

你可以使用这个[sqlfiddle](http://sqlfiddle.com/#!2/f4b42/9)来尝试其他的。

# iphone - iOS5 到 iOS4 崩溃 - ViewControllers

> ID：12432886
> 
> 赞同：1
> 
> 时间：2012-09-14T22:41:50.073
> 
> 标签：iphone, objective-c, xcode, ios5, ios4

目前我正在尝试让我的应用程序可用于 iOS4，以增加我们可以接触到的人数。

我们已经从 StoryBoard 移出，现在改用 .xib 文件。

现在，唯一能阻止这种情况的是这个错误：

```
2012-09-14 18:32:42.705 CrunchCalculator[7037:11303] -[CategoryViewController presentViewController:animated:completion:]: unrecognized selector sent to instance 0x6b42230
2012-09-14 18:32:42.707 CrunchCalculator[7037:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[CategoryViewController presentViewController:animated:completion:]: unrecognized selector sent to instance 0x6b42230'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x013625a9 __exceptionPreprocess + 185
    1   libobjc.A.dylib                     0x00ef1313 objc_exception_throw + 44
    2   CoreFoundation                      0x013640bb -[NSObject(NSObject) doesNotRecognizeSelector:] + 187
    3   CoreFoundation                      0x012d3966 ___forwarding___ + 966
    4   CoreFoundation                      0x012d3522 _CF_forwarding_prep_0 + 50
    5   CrunchCalculator                    0x0002e560 +[OpenCalcViewController openCalcView:fromViewController:] + 8256
    6   CrunchCalculator                    0x0002fe0a -[CategoryViewController openCalc:] + 106
    7   UIKit                               0x002554fd -[UIApplication sendAction:to:from:forEvent:] + 119
    8   UIKit                               0x002e5799 -[UIControl sendAction:to:forEvent:] + 67
    9   UIKit                               0x002e7c2b -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 527
    10  UIKit                               0x002e67d8 -[UIControl touchesEnded:withEvent:] + 458
    11  UIKit                               0x004e84de _UIGestureRecognizerSortAndSendDelayedTouches + 3609
    12  UIKit                               0x004e8c53 _UIGestureRecognizerUpdateObserver + 927
    13  CoreFoundation                      0x0134389b __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 27
    14  CoreFoundation                      0x012d86e7 __CFRunLoopDoObservers + 295
    15  CoreFoundation                      0x012a11d7 __CFRunLoopRun + 1575
    16  CoreFoundation                      0x012a0840 CFRunLoopRunSpecific + 208
    17  CoreFoundation                      0x012a0761 CFRunLoopRunInMode + 97
    18  GraphicsServices                    0x014b61c4 GSEventRunModal + 217
    19  GraphicsServices                    0x014b6289 GSEventRun + 115
    20  UIKit                               0x00263c93 UIApplicationMain + 1160
    21  CrunchCalculator                    0x0000276a main + 170
    22  CrunchCalculator                    0x000026b5 start + 53
)
terminate called throwing an exception(lldb) 
```

通常我用它来打开另一个视图：

```
 UIViewController *controller;
    controller = [[CategoryViewController alloc]initWithNibName:@"CategoryViewController" bundle:nil];
    controller.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:controller animated:YES];
    [controller release]; 
```

但在这种情况下，我使用以下代码从不同的文件（为了提高效率）调用一个函数：

```
#import "AllofTheFiles.h"

+ (void)openCalcView: (NSString *)nameOfView fromViewController:(UIViewController *)controller {

    NSUserDefaults *saveSpot = [NSUserDefaults standardUserDefaults];

    UIViewController *modalController;

    if ([nameOfView isEqualToString:@"Tax"]) {

        modalController= [[TAXViewController alloc]initWithNibName:@"TAXViewController" bundle:nil];

    }else if ([nameOfView isEqualToString:@"Rent"]){

        modalController= [[RENTViewController alloc]initWithNibName:@"RENTViewController" bundle:nil];

    }  //... cut other else if's to save space

modalController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[controller presentViewController:modalController animated:YES completion:nil];
[modalController release]; 

} 
```

我怎样才能解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T22:45:00.800

`presentViewController:animated:completion:`仅适用于 iOS5 及更高版本，因此您会遇到崩溃。

将最后一部分更改为：

```
modalController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
//do we support the new way of presenting a modal viewController?
if ([controller respondsToSelector:@selector(presentViewController:animated:completion:)])
{   //yes->so do it!
    [controller presentViewController:modalController animated:YES completion:NULL];
}
else
{   //nope->we seem to be running on something prior to iOS5, do it the old way!
    [controller presentModalViewController:modalController animated:YES];
}
[modalController release]; 
```

这将首先检查是否支持呈现 viewController 的新方式。为了确保这在将来可以正常工作，如`presentModalViewController:`标记为已弃用，我们仅在新方法不可用时使用该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:52:42.000

您可能需要提供导航控制器和/或使用 presentModalViewController，请尝试以下操作：

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:modalController];
navController.modalPresentationStyle = UIModalPresentationPageSheet;
navController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[controller  presentModalViewController:navController animated:YES completion:nil];
[modalController release];
[navController release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:15:21.307

Till 的解决方案是最好的。
但是，如果像我一样，您的代码中有许多 present/DismissModalViewController: 调用，并且不想一遍又一遍地重复`respondsToSelector`测试和`is deprecated`警告，只需添加 UIViewController：

```
@implementation UIViewController (iOS4Compatibility)

- (void)presentViewController:(UIViewController *)viewControllerToPresent animated:(BOOL)flag {
    if([self respondsToSelector:@selector(presentViewController:animated:completion:)])
        [self presentViewController:viewControllerToPresent animated:flag completion:nil];
    else
        [self presentModalViewController:viewControllerToPresent animated:flag];
}

- (void)dismissViewControllerAnimated:(BOOL)flag {
    if([self respondsToSelector:@selector(dismissViewControllerAnimated:completion:)])
        [self dismissViewControllerAnimated:flag completion:nil];
    else
        [self dismissModalViewControllerAnimated:flag];
}

@end 
```

# c - 为什么我的角色没有使用 scanf （C语言）扫描

> ID：12432890
> 
> 赞同：-1
> 
> 时间：2012-09-14T22:42:10.647
> 
> 标签：c, scanf

在下面的代码中，我的角色没有存储在角色中......谁能告诉我出了什么问题？：

```
char z;
printf("A  or B ?\n ");
scanf("%c",&z);
printf("%c",z); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:58:14.390

在想要的字符之前读取另一个虚拟字符：

```
char dumy;
scanf("%c%c",&dumy,&z); 
```

# r - 生成列名以迭代 R 中的数据框

> ID：12432893
> 
> 赞同：3
> 
> 时间：2012-09-14T22:42:34.863
> 
> 标签：r

我是 R 新手，所以请多多包涵……我设法加载了一个数据框，并且标题有“data$xy1”和“data$xy2”等列。我想以编程方式生成列名以提取每一列并绘制直方图。简而言之，我想构造'data$xy' + n，我将在其中迭代n。我试过 cat 并得到：

```
as.name(cat("data$x.y", i, sep="."))
data$x.y.1Error in as.name(cat("data$x.y", i, sep = ".")) : 
invalid type/length (symbol/0) in vector allocation 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T22:48:39.757

```
names(data) 
```

应该得到你的列名

如果您想要每列数据的直方图

```
for(i in names(data)){
  png(paste(i,'.png',sep=""))
  hist(data[,which(names(data)==i)],
       main=paste(i,"some other stuff"),
       xlab=paste(i,"some more stuff") 
      )
  dev.off()
} 
```

这将在您的工作目录中植入一堆名称如 xy1.png 的 .png 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T22:59:05.107

```
df <- data.frame(x = rnorm(5), x1 = rnorm(5), x2 = rnorm(5))

> df
           x         x1          x2
1  1.2222897  0.3904347 -0.05835815
2 -1.7002094 -1.5195555 -0.79265835
3  0.5570183 -1.3191265  0.26198408
4 -0.2457016  0.1461557 -0.05567788
5 -0.7689870 -0.6361940 -0.80780107

library(plyr)
library(reshape2)
library(ggplot2)
# melting the data.frame turns your data.frame from wide to tall
# d_ply takes a data frame, applies a function each variable (in this case column) 
# creates a plot, writes it to disk but returns nothing.
d_ply(melt(df), .(variable), function(x){
    pl <- qplot(x$value, geom = "histogram", main = unique(x$variable))
    # Change the png to jpg, eps or pdf if you prefer a different format
    ggsave(pl, file = paste0(unique(x$variable),".png"))
    })

# Now we can see that my working dir has 3 plots, each named after a column
> dir(pattern = "png")
[1] "x.png"  "x1.png" "x2.png" 
```

# for-loop - 用于删除图形适配器的多个注册表项的脚本

> ID：12432898
> 
> 赞同：2
> 
> 时间：2012-09-14T22:42:57.117
> 
> 标签：for-loop, cmd, findstr

目标是创建一个批处理文件，该文件将删除多个版本的显卡驱动程序的注册表项。它应该在 HKLM\System\CurrentControlSet\Control\Video 注册表项和子项中搜索制造商名称，并将结果写入列表或设置多个变量，然后删除每个变量。

这是我的原始脚本，似乎可以正常工作。

```
:loop reg
for /f "delims=\, tokens=6" %%r in ('reg query HKLM\System\CurrentControlSet\Control\Video /s /f atikmdag') do set rVAR=%%r
for %%r in (%rVAR%) do reg delete HKLM\System\CurrentControlSet\Video\%%r /f
if not exist "reg query HKLM\System\CurrentControlSet\Control\Video /s /f atikmdag" goto xfiles
goto loop reg

:xfiles
rest of script 
```

变量 %%r 将是显卡的 GUID，例如 {3662D7D0-8848-4091-9116-06D253535481}

问题是我需要删除多个驱动程序版本的注册表项，并且搜索字符串“atikmdag”不会返回所有结果。

我试过这个 reg 查询 HKLM\System\CurrentControlSet\Control\Video /s /v DriverDesc /f "ati"

但它会返回“DriverDesc”的所有现有条目，而不仅仅是在数据字段中具有“ati”的条目。我想也许 /s 会覆盖 /f，我不确定。

TIA 寻求帮助。-M

# php - 动态获取函数名

> ID：12432901
> 
> 赞同：0
> 
> 时间：2012-09-14T22:43:08.973
> 
> 标签：php

我需要动态调用我的函数名称。

```
$myFunction = isset($somecondition) ? "function1(100,100)" : "function(300,300)"; 
```

那么我需要调用该方法

```
$myclass->$myFunction; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T23:07:12.273

您不能将函数调用存储在这样的字符串中。您可以分别存储函数名称和参数，但最好使用简单的 if 语句并使用特定参数调用任一方法。

```
if($someCondition){
    $myClass->function1(100, 100);
} else {
    $myClass->function(300, 300);
} 
```

任何其他方式都可以将函数名称和参数存储在变量中并使用`user_call_func_array()`，但您仍然需要像上面这样的 if 语句，或者另一个选项是使用两个三元语句，就像在 remy 的答案中一样，只是用另一个三元语句在`function1`和之间切换`function`. 这种方法不太理想，因为您正在处理两个三元语句，而不是使用上面的 if 语句处理一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:49:53.203

您正在搜索[call_user_func_array](http://php.net/manual/en/function.call-user-func-array.php)方法

```
call_user_func_array(
    array($myClass, isset($somecondition) ? 'function1' : 'function'), 
    isset($somecondition) ? array(100, 100) : array(300, 300)
); 
```

*无法命名函数函数，因此他的代码存在更多问题；）*

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-14T22:45:16.750

括号不见了

```
$myclass->$myFunction(); 
```

# php - 如何对包含的文件（例如 .css）使用相对路径

> ID：12432913
> 
> 赞同：8
> 
> 时间：2012-09-14T22:44:43.170
> 
> 标签：php, css, path, header

我有一个`header.php`包含`.css`文件链接的文件。

当我“包含”`header.php`到不同文件夹中的另一个 php 文件时，新的 php 文件的`.css`href`header.php`不正确。

我应该如何`href`在我的`.css`文件中声明`header.php`它以包含对于 php 文件所在的任何文件夹都是正确的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-14T22:52:12.543

这是许多大型应用程序在安装时尝试设置“根 URI”常量/变量的原因。

如果您的应用程序位于域/子域的根目录中，则可以工作，但如果不是（ ）`/css/style.css`，它将失败`/appName/css/style.css`

将绝对 URI 与其他配置常量/变量一起存储到“根”脚本文件夹，构建绝对链接变得轻而易举。

```
define( 'SCRIPT_ROOT', 'http://localhost/yourApplication' );
// ...
echo '<link rel="stylesheet" type="text/css" href="'.SCRIPT_ROOT.'/css/style.css">'; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-03T19:17:53.880

我可以看到希望为 href 链接生成动态和相对路径的一个原因，那就是如果您在具有不同路径的多个域或站点上运行您的项目。（例如，您的项目可在[http://myproject.example.org/](http://myproject.example.org/)和[http://example.org/myprojecttest/](http://example.org/myprojecttest/)上获得）。如果不是这种情况，我建议直接指定您的 css 包含相对于根文件夹：

```
<link href="/css/style.css" /> 
```

如果这确实适用于您，请尝试以下操作：

**在每个需要 header.php 的顶级文档**中，添加一个 $ROOT 变量，该变量指示顶级文档相对于根的位置。例如：

```
$ROOT = './'; 
```

或者

```
$ROOT = '../'; 
```

或者

```
$ROOT = '../../'; 
```

现在，在 header.php 文件中，您可以使用：

```
<link href="<?php echo $ROOT; ?>css/style.css" /> 
```

这允许您创建一个 header.php 文件，该文件适用于任何相对路径的任何页面。

**完整示例**

包含的文件（/path/header.php）

```
<html><body>
<head>
    <link href="<?php echo $ROOT; ?>css/style.css" />
[...] 
```

文件 1（/path/index.php）：

```
<?php
$ROOT = './';
include 'header.php';
?> 
```

文件 1（/path/admin/index.php）：

```
<?php
$ROOT = '../';
include '../header.php';
?> 
```

文件 3（/path/admin/test/magic.php）：

```
<?php
$ROOT = '../../';
include '../../header.php';
?> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-17T14:16:17.577

你有几个选择，我试图在这里收集

**基础href**

```
<head>
<base href="http://www.mysite.com/" />
</head> 
```

它的作用是将所有 href 设置为指向特定路径。使用此设置，`<link rel='stylesheet' href='css/mycss.css' />`即使您的页面位于深处，您也可以使用并成功加载 mycss.css 文件`http://www.mysite.com/pages/2012/public/secret_folder/myownphpfile.php`

**绝对路径**

您始终可以使用绝对路径，但稍后更改文件文件夹可能会很痛苦。

```
<link rel='stylesheet' href='http://www.mysite.com/css/mycss.css' /> 
```

**定义的拍子**

正如@Discomatt 所说，使用 PHP 定义的路径是保持工作正常的一种简单方法。不利的一面；你必须使用 PHP。如果你仍然使用它，没有问题^^

```
define('CSSDIR', 'http://www.mysite.com/css/);
<link rel='stylesheet' href='<?= CSSDIR ?>mycss.css' /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-26T12:21:00.797

看看这个答案以加载相对于当前 js 文件的 css：
[https ://stackoverflow.com/a/56580810/4865307](https://stackoverflow.com/a/56580810/4865307)

使用这个技巧，您只需调用 c1CssImport() 来包含基于相对 url 的 css 文件：

```
c1CssImport('./ui.css'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T22:49:23.700

编写css文件的绝对路径，如：

> `<link href="http://site.com/css/style.css" />`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T22:47:15.790

像这样：

```
<link rel="stylesheet" href="/css/style.css" /> 
```

第一个`/`说“转到根目录并从那里查看”。这是一个相对路径。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-05T17:28:26.843

根据[汤姆的回答](https://stackoverflow.com/a/12461205/2219970)，我做了`base url`一个 PHP的组合`define`（为了减少打字）。

PHP中的某处：

```
define("HOST_BASE", "http://example.com/"); 
```

然后在头文件中：

```
<base href="<?php echo HOST_BASE ?>"> 
```

基本标签对我来说是新的，我担心兼容性，但它似乎运作良好。在 MDN 上有[更多关于它的信息](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base)。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-03-20T05:49:07.370

只需**定义**您的基本 URL 并将其连接到 CSS 或 JavaScript 参考中。

如下定义。

```
define ('host_address','http://localhost:85/grc/');
define('css', host_address.'styles/'); 
```

我已经通过**host_address**和**CSS**定义了基本 URL，并如下使用它们。

```
<link rel="stylesheet" href='.css.'custom.css> 
```

# ruby-on-rails-3 - FactoryGirl + RSpec + Rails 3 引擎“未定义的方法”

> ID：12432922
> 
> 赞同：0
> 
> 时间：2012-09-14T22:45:18.133
> 
> 标签：ruby-on-rails-3, factory-bot, rspec-rails

我在开发 Rails 3 可安装引擎时一直尝试使用 FactoryGirl，当在规范中调用工厂时，它返回以下错误：

```
NoMethodError: undefined method `foo_bar=' for #<Foo::Baz:0x007fed6e3e2700> 
```

**楷模**

Foo::酒吧

```
module Foo
  class Bar < ActiveRecord::Base
    has_many :bazs
  end
end 
```

富::巴兹

```
module Foo
  class Baz < ActiveRecord::Base
    belongs_to :bar
  end
end 
```

**工厂**

```
FactoryGirl.define do
  factory :foo_bar, class: Foo::Bar do
    ...
  end

  factory :foo_baz, class: Foo::Baz do
    foo_bar
  end
end 
```

查看其他主题[FactoryGirl + RSpec + Rails 3 'undefined method ='](https://stackoverflow.com/questions/4949319/factorygirl-rspec-rails-3-undefined-method-attribute)并按照答案进行操作，但仍然无效。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:00:56.687

问题是由 FactoryGirl 调用 create 在我的规范中使用错误的关联名称引起的。

```
FactoryGirl.create(:foo_baz, foo_bar: @bar, created_at: 1.day.ago) 
```

在 jimworm 提供的帮助下，它指示我查看规范，因此我修改了如下所示的调用。

```
FactoryGirl.create(:foo_baz, bar: @bar, created_at: 1.day.ago) 
```

这解决了这个问题。

谢谢你，jimworm 的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:52:27.260

关联在 factory_girl 中指定为`association :factory_name`。

# c# - 相交 N 个 SortedLists 在c#中

> ID：12432926
> 
> 赞同：1
> 
> 时间：2012-09-14T22:46:05.807
> 
> 标签：c#, linq

我有 N 个 SortedLists，每一个都有一个对象集合，这些对象包含一个它们排序的 int ID。我需要找到所有列表中存在的对象集。

我的第一个想法是按大小对列表进行排序，从最小的子集开始，然后我可以取每个列表和 .Intersect() 其他列表，但对于大型列表和效率，我想利用它们已排序的事实。我猜有一些算法是最优的——也许数据库引擎会使用像哈希连接这样的算法。我只是不知道哪种算法最好。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T22:52:08.830

相交或多或少*是*一个散列连接。如果数据已排序，您可以改为进行嵌套循环合并，但我认为没有任何库方法可以为您执行此操作，并且编写该方法有点麻烦。

另一种基于散列的方法是 Distinct。为什么不连接列表并使用 Distinct？这将把它缩小到一个哈希表。

使用 Distinct / hash 逻辑，并且仅在它确实导致性能问题时才寻求优化。嵌套循环方法可能会更慢，并且无论如何，如果 Distinct（或其他基于散列的）方法足够快，您不希望花费大量时间编写它。

例子：

```
var result = list1.Concat(list2).Concat(list3).Distinct(); 
```

如果您在编译时不知道列表的数量，请尝试以下操作：

```
IEnumerable<IEnumerable<T>> lists = // a sequence of lists
var result = lists.Aggregate(Enumerable.Empty<T>(), (a, b) => a.Concat(b)).Distinct(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T22:56:40.093

您可以并行遍历列表，为每个列表使用一个索引。从一个列表中的索引处选择一个值，然后只要其他列表在其索引处的值较小，就可以推进其他列表。如果您发现一个列表缺少该值，请从该列表中获取下一个更高的值并开始寻找它。

当您推进所有列表并在所有列表中找到值时，您就有了一个可以添加到结果中的值。推进所有列表并重新开始寻找价值。重复直到到达所有列表的末尾。

这似乎可以完成这项工作：

```
public static SortedList<int, T> MultiIntersect<T>(params SortedList<int, T>[] lists) {
  SortedList<int, T> result = new SortedList<int, T>();
  int[] index = new int[lists.Length];
  bool cont;
  do {
    int list = 0;
    int value = lists[list].Keys[index[list]];
    while (list < lists.Length) {
      while (index[list] < lists[list].Count && lists[list].Keys[index[list]] < value) index[list]++;
      if (index[list] == lists[list].Count) {
        return result;
      } else if (lists[list].Keys[index[list]] > value) {
        value = lists[list].Keys[index[list]];
        list = 0;
      } else {
        list++;
      }
    }
    result.Add(value, lists[0].Values[index[0]]);
    cont = true;
    for (var i = 0; i < index.Length; i++) {
      index[i]++;
      cont &= index[i] < lists[i].Count;
    }
  } while(cont);
  return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:54:37.233

这种方法怎么样？

```
HashSet<YourType> hashSet = new HashSet<YourType>(list1);
hashSet.IntersectWith(list2);
hashSet.IntersectWith(list3);
...
hashSet.IntersectWith(listn);
List<YourType> intersection = hashSet.ToList(); 
```

恕我直言，应该足够有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T23:12:15.107

我认为是代码中的 Guffas 建议。对不起数组，它们打字速度更快。

```
void Main()
{
var lists = new [] {new[] {1, 1, 2, 3, 4, 5, 6, 9, 11, 13},
                    new[] {1, 1, 5, 6, 7, 13},
                    new[] {1, 1, 6, 8, 9, 13},
                    };

var mergedSet = lists[0];
for(var i = 1; i < lists.Length; i++)
{
    mergedSet = Merge(lists[i], mergedSet);
}
}

int[] Merge (int[] sla, int[] slb)
{
int ixa = 0, ixb = 0;
List<int> result = new List<int>();
while(ixa < sla.Length && ixb < slb.Length)
{
    if (sla[ixa] < slb[ixb]) { ixa++; } 
    else if (sla[ixa] > slb[ixb]) { ixb++; } 
    else { result.Add(sla[ixa]); ixa++; ixb++; }
}

return result.ToArray();
} 
```

按大小对输入进行排序并从最小列表开始可能会带来一些额外的性能，但如果最小列表包含总集合中的最小值和最大值，则仍将遍历所有列表中的所有项目。

我认为可读性可能有利于其他地方建议的使用 linq 查询的效率可能较低的方法。

# java - BlueJ 中的 Appletviewer 无法启动

> ID：12432927
> 
> 赞同：0
> 
> 时间：2012-09-14T22:46:10.447
> 
> 标签：java, applet, bluej, appletviewer

所以我像往常一样在左下角运行一个小程序，上面写着“在appletviewer中执行小程序”停留在那里并且appletviewer永远不会打开。当我右键单击类时，“运行小程序”是红色的，如果这很重要的话。我已经卸载了我计算机上所有与 Java 相关的东西，并多次重新安装了 JDK 7 以及 BlueJ，但我仍然得到 appletviewer 没有弹出的结果。我一直在尝试的小程序类直接来自我教科书的网站，所以我猜代码没有问题。该小程序可以与我学校其他所有人的计算机一起正常工作。那么我该怎么做才能让appletviewer工作呢？

这是该类的代码：

```
import javax.swing.JApplet;
import java.awt.*;

public class Snowman extends JApplet
{
public void paint (Graphics page)
{
  final int MID = 150;
  final int TOP = 50;

  setBackground (Color.cyan);

  page.setColor (Color.blue);
  page.fillRect (0, 175, 300, 50);  // ground

  page.setColor (Color.yellow);
  page.fillOval (-40, -40, 80, 80);  // sun

  page.setColor (Color.white);
  page.fillOval (MID-20, TOP, 40, 40);      // head
  page.fillOval (MID-35, TOP+35, 70, 50);   // upper torso
  page.fillOval (MID-50, TOP+80, 100, 60);  // lower torso

  page.setColor (Color.black);
  page.fillOval (MID-10, TOP+10, 5, 5);   // left eye
  page.fillOval (MID+5, TOP+10, 5, 5);    // right eye

  page.drawArc (MID-10, TOP+20, 20, 10, 190, 160);   // smile

  page.drawLine (MID-25, TOP+60, MID-50, TOP+40);  // left arm
  page.drawLine (MID+25, TOP+60, MID+55, TOP+60);  // right arm

  page.drawLine (MID-20, TOP+5, MID+20, TOP+5);  // brim of hat
  page.fillRect (MID-15, TOP-20, 30, 25);        // top of hat
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:42:13.080

确保在运行之前导入小程序类。这可能与您的问题有关。导入 java.applet。*; 导入 java.awt。*;

# java - 在java中访问我的方法所在的类

> ID：12432932
> 
> 赞同：1
> 
> 时间：2012-09-14T22:47:04.277
> 
> 标签：java, class

我有一个名为 Game 的类和一个带有以下代码的按钮

```
public Game(){
    (some code..)
    btn_start.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e)
                {
                               (some code..)
                    timer_task = new MyTask();
                               (some code..)
                }
            });
        }
} 
```

我的问题是 MyTask 需要一个“游戏”类型的对象（出于各种原因）。如何将我的 actionListener 方法所在的类发送到 MyTask()？Java中有这样的东西吗？

我尝试使用`.this`，但它说它指的是`ActionListener`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T22:51:13.543

尝试`Game.this`改用

这基本上告诉 Java 使用外部类`this`引用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:55:19.787

您可能需要考虑在您的类中使用私有方法`Game`来创建`MyTask`. 就像是

```
public void someMethod()
{
    ...
    btn_start.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e)
        {
            handleStart();
        }
    });
    ...
}

private void handleStart()
{
    (some code..)
    timer_task = new MyTask(this);
    (some code..)
} 
```

# python - python RE vs html5 RE

> ID：12432934
> 
> 赞同：0
> 
> 时间：2012-09-14T22:47:35.173
> 
> 标签：python, regex, html

看来我在 python 中遇到了一个错误：（Python 2.7.3（默认，2012 年 4 月 10 日，23:24:47）[MSC v.1500 64 位（AMD64）] on win32）

```
>>> re.match("0[5-7][5-9][0-9]{7}", "0775123456") #match
<_sre.SRE_Match object at 0x0000000002D3FC60>

>>> re.match("0[5-7][5-9][0-9]{7}", "077512345") #dont match

>>> re.match("0[5-7][5-9][0-9]{7}", "07751234567") #match!
<_sre.SRE_Match object at 0x0000000002D3F920>

>>> re.match("0[5-7][5-9][0-9]{7}","07751234567777777777777777777777777777777777777777777777") #match!!
<_sre.SRE_Match object at 0x0000000002D3FC60> 
```

所以我必须使用美元符号来“精确地”限制数字！我认为这是一个错误，因为在 HTML5 验证中，{7} 表示“完全”7 位数字，而在 python 中，它似乎表示“至少”，这是使用美元符号的行为方式：

```
>>> re.match("0[5-7][5-9][0-9]{7}$", "0775123456") #match
<_sre.SRE_Match object at 0x0000000002D3F920>

>>> re.match("0[5-7][5-9][0-9]{7}$", "07751234567") #dont match

>>> re.match("0[5-7][5-9][0-9]{7}$", "077512345") #dont match 
```

这发生在所有其他正则表达式中，不仅精确的数字匹配，还必须添加美元！

这是一个错误吗？还是设计使然？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T22:53:57.113

这是设计使然。`re.match`匹配字符串的开头，而不是`re.search`匹配字符串中的任何位置。字符串后面的额外字符将被忽略。有关详细信息，请参阅[http://docs.python.org/library/re.html#match 。](http://docs.python.org/library/re.html#match)

其他也使用正则表达式的语言，例如 grep 和 perl，其行为相同。正则表达式主要用于搜索文本。

如果您想执行完全匹配，您必须指定美元符号，正如您自己也指出的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T22:54:43.193

状态的文档[`re.match()`](http://docs.python.org/library/re.html#re.match)：

> *如果字符串开头*的零个或多个字符与正则表达式模式匹配...</p>

（强调我的。）

这意味着匹配完成后字符串中的所有字符都将被忽略。例如，以下内容也可以工作：

```
>>> re.match("0[5-7][5-9][0-9]{7}", "0775123456abc")
<_sre.SRE_Match at 0x10ee2e8b8> 
```

正则表达式并没有真正指定匹配必须锚定的位置（如果在任何地方）。例如，Python 也有[`re.search()`](http://docs.python.org/library/re.html#re.search)默认情况下不在开头锚定的。您始终可以使用`^`和`$`元字符显式指定锚定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T22:56:37.483

正如其他人所说......不是一个错误，你的正则表达式并没有说明为什么 '$' 似乎可以修复它，但这个例子应该：

```
import re

print 'food: ',
print re.match('fo{2}d', 'food')     # match found!

print 'fooood: ',
print re.match('fo{2}d', 'fooood')   # no match! 
```

*之后的*任何内容*`{}`都会为您提供所需的行为，如果您希望字符串在数字之后结束，那么在此处添加*任何内容*`$`都是合适的。*

# ios - 部分渲染的 UITableView 标头

> ID：12432948
> 
> 赞同：1
> 
> 时间：2012-09-14T22:48:56.757
> 
> 标签：ios, cocoa-touch, uitableview

我正在`UITableView`从一个数组中填充一个 - 让我们调用它`sections`。`numberOfSectionsInTableView`返回，`sections.count`除了特殊情况 - 如果`sections.count`是 0，我返回 1（1 是应该返回的最小节数`numberOfSectionsInTableView`）。在这种情况下，我`nil`作为节标题返回，所以`UITableView`看起来是空的。

将新项目添加到 my`dataSource`时，我手动插入新行。我还检查是否需要新部分，如果需要，我将其添加到`sections`并插入新部分。但这是我的“特殊情况”导致问题的地方。

将第一项添加到第一部分时，我不想添加新部分（因为一直以来都至少有一个部分）。所以，我只是插入行。

行动画插入似乎是正确的，但我得到一个奇怪的半载标题：

![在此处输入图像描述](../Images/0539c6d7f0f4d3f358fc7c3b1325056b.png)

我真正需要做的就是在`UITableView`插入第一行时重新加载标题。但我不想通过简单地重新加载表格视图或部分来丢失插入动画。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T01:19:49.370

我认为您正在寻找[`-reloadSections:withRowAnimation:`](https://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/reloadSections%3awithRowAnimation%3a).

添加或删除第 0 节的特殊情况后，您可以调用：

```
[self.tableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

希望有帮助。

# javascript - 使用geoxml3 json对象模拟更新方法？

> ID：12432949
> 
> 赞同：0
> 
> 时间：2012-09-14T22:48:59.500
> 
> 标签：javascript, json, google-maps-api-3, kml, geoxml3

遵循 geoXML3 api.. 在每个 KML 解析一个 JSON 对象映射后创建所有标签。

那么是否有可能获取该 JSON 对象，进行一些修改，例如更新或删除某些元素.. 并创建一个新的 kml（动态）并以视觉方式显示更改？

我多次尝试修改 Json 对象，但所有在 json 中的修改都不会影响渲染的 kml .. 所以解决方案是创建一个新的 kml 并显示..（**但是如何？**）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:03:51.593

geoxml3 是一个 KML 解析器，它没有创建 KML 的能力。您可以添加代码来遍历其包含本机 Google Maps API 对象的数组并创建表示它们的 KML。

如果要修改呈现的 Google Maps API 对象，它们存储在数组中，您可以获取对它们的引用并动态修改它们。

我没有一个完整的示例（至少我记得），它遍历本地 Google Maps API 对象并创建 KML，但此页面将为`<coordinates>`单个多边形创建片段：

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_winding_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/crues_450_windingFix_kml.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_winding_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/crues_450_windingFix_kml.xml)

# c++ - 为什么我的 fstream 被隐式删除？

> ID：12432952
> 
> 赞同：11
> 
> 时间：2012-09-14T22:49:19.427
> 
> 标签：c++, class, inheritance, fstream

我正在使用一些 HID 设备，所有这些设备都有派生自以下基类的类（在*main.h*中）：

```
class HIDDevice {
    public:
        hid_device *device;

        virtual void read(std::fstream)=0;
        virtual void write(std::fstream)=0;
}; 
```

这是从它派生的设备类之一（*device.h*）：

```
class MyDevice : public HIDDevice {
    public:
        void read(std::fstream);
        void write(std::fstream);
}; 
```

...以及实施示例：

```
void MyDevice::read(std::fstream file) {
    // Read from card and write to file
    response = send_command(READ_DEVICE);
    file.write((char *)&response[0], response.size());
} 
```

...和来电者：

```
fstream file (filename, ios::binary | ios::in);
dev->read(file); 
```

当我尝试编译时，出现以下错误：

> main.cpp:294:27: 错误: 使用已删除的函数 'std::basic_fstream::basic_fstream(const std::basic_fstream&)'<br> 在源/main.cpp:24:0: /usr/ 包含的文件中include/c++/4.6/fstream:761:11: error: 'std::basic_fstream::basic_fstream(const std::basic_fstream&)' 被隐式删除，因为默认定义格式不正确：

...我不知道为什么，可能是因为我对 C++ 还很陌生，而且我做了一些愚蠢的事情。

将参数更改回引用（使用＆），我收到以下错误：

> /main.o:(.rodata._ZTV13MyDevice[vtable for MyDevice]+0x18): undefined reference to `MyDevice::write(std::basic_fstream >&)'

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-14T22:50:48.553

`std::fstream`尝试通过引用折腾那些s。

```
class MyDevice : public HIDDevice {
    public:
        void read(std::fstream&);
        void write(std::fstream&);
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-13T14:49:35.473

仅供参考，我有相同的编译器错误，但以不同的方式创建它，这对我来说并不明显。出于习惯，我写道：

```
auto stream = fstream(output, iOS::out | iOS::binary); 
```

当然，它会创建一个临时 fstream 对象并将其复制到流中。这在 Xcode 6 中使用 clang 有效，但不适用于 GCC 4.9.2。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T22:55:09.413

`HIDDevice`方法签名意味着`fstream`s 是按值传递的。这反过来意味着必须在调用站点使用复制构造函数创建原始流对象的副本。正是这个具有规范签名的复制构造函数`std::basic_fstream::basic_fstream(const std::basic_fstream&)`。

编译器告诉您，由于某种原因（这与`basic_fstream`您的标准库使用的实现的细节有关）它无法自动生成此复制构造函数，因此它无法完成您的隐式命令来制作流的副本。

正如其他人已经说过的那样，通常的操作方式（这也将防止此处的错误）是通过引用而不是通过值传递参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T22:51:18.783

`&std::fstream`作为参数将通过引用传递它，以便在任何地方用作相同的对象。这避免了实现尝试创建另一个实例，然后在函数结束时关闭流（因为复制的对象正在被破坏）。

确保在成员函数的声明和实现中（即在类中和主体所在的位置）都更改了这一点。

# google-maps - 圆形叠加投影失真

> ID：12432954
> 
> 赞同：0
> 
> 时间：2012-09-14T22:49:24.367
> 
> 标签：google-maps, google-maps-api-3, kml, google-earth, google-earth-plugin

我目前正在使用 KML 文件中的“GroundOverlay”函数来显示圆形图像。我知道圆的直径是 48 度，当我将它覆盖在地球上时，我希望它看起来像一个圆。不过，它不是一个完美的圆圈，而是扭曲的，在两极最为明显。我认为失真的原因是 GoogleEarth 假设我的原始图像使用了地图投影，因此 GE “取消投影”了我的图像，从而产生了失真。有没有办法通过关闭投影通过 KML 或地图 API 将我的圆形图像覆盖为圆形？或者在我调用 GroundOverlay 之前，我唯一的选择是将圆形图像投影到简单的圆柱形投影中吗？如果存在，我真的更喜欢第一个选项。

# boolean - Arduino 高 低

> ID：12432955
> 
> 赞同：24
> 
> 时间：2012-09-14T22:49:28.337
> 
> 标签：boolean, arduino

我有一个 Arduino，我想知道 HIGH 和 LOW 到底是什么意思，就实际值而言……它们是有符号的整数吗？无符号整数？无符号字符？？？他们的价值观是什么？我猜 HIGH 和 LOW 可能是无符号整数，所有位分别设置为 1 和 0，但我不确定。我希望能够使用 HIGH 和 LOW 进行按位运算，或者将 HIGH 或 LOW 以外的值传递给 digitalWrite。另外，我如何将整数转换为 HIGH 或 LOW 以便我可以做到这一点？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-14T22:52:01.630

看看`hardware/arduino/cores/arduino/Arduino.h`（至少在 Arduino 1.0.1 软件中）第 18 和 19 行：

```
 #define HIGH 0x1
 #define LOW  0x0 
```

意思是，这些定义是十六进制整数值，您可以对它们进行任何您想要的按位运算 - 但是，目前我还不清楚这有多大意义。还要记住，这些值可能会在以后发生变化——这会使对它们的按位操作更加不明智。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-12-04T12:15:34.743

将我的两分钱添加到[编码的答案](https://stackoverflow.com/a/12432975/671366)中：

`Arduino.h`(1.0) 的第 18--25 行是：

```
#define HIGH 0x1
#define LOW  0x0

#define INPUT 0x0
#define OUTPUT 0x1

#define true 0x1
#define false 0x0 
```

因此，`HIGH <==> OUTPUT <==> true <==> 0x1`和`LOW <==> INPUT <==> false <==> 0x0`。然后，`HIGH <==> !LOW`还有`LOW <==> !HIGH`……

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-09-14T23:04:05.047

如果您想将其他值传递给 digitalWrite() 您可以查看函数原型

```
void digitalWrite(uint8_t, uint8_t); 
```

所以任何整数值（嗯，从 0 到 255）都可以。不知道 digitalWrite() 的行为会是什么，如果您将其传递给除 HIGH 和 LOW 之外的值。

由于 HIGH 和 LOW 是简单定义的常量，因此您不能将整数转换为它们（该操作也没有意义）。看来您可以在任何预期 HIGH 和 LOW 的地方使用整数。

但实际上这样做是一个坏主意，原因有很多 - HIGH 和 LOW 的定义可能会改变（不太可能但可能），从类型的角度来看它没有意义。相反，您应该在程序中使用逻辑来确定应该将 HIGH 还是 LOW 传递给函数调用，然后实际传递常量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-11T03:30:51.903

digitalWrite() 的第一个参数是一个引脚号。

digitalWrite() 的第二个参数将：

1.  将高电平（3.3 或 5 V）或低电平（0 V）写入二进制输出或
2.  启用 (HIGH) 或禁用 (LOW) 二进制输入上的内部上拉电阻。

任何一个参数的按位运算都没有意义。也许您需要使用analogWite()？

请参阅文档：[digitalWrite()](http://arduino.cc/en/Reference/digitalWrite) [常量](http://arduino.cc/en/Reference/Constants)

# python - 已打开文件的 Python 搁置

> ID：12432960
> 
> 赞同：2
> 
> 时间：2012-09-14T22:49:56.257
> 
> 标签：python

是否可以对已打开的文件使用搁置？我想做类似下面的事情，但是 shelve.open 不接受文件描述符。

```
 f = open('file.shelve')
 s = shelve.open(f) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T23:00:10.553

shelve 基于[dbm](http://docs.python.org/dev/library/dbm.html#module-dbm)，不提供 fd 接口。不幸的是，dbm 不太可能提供一个，因为它依赖于`rename`数据库一致性的原子性。

# c++ - 静态分区 tbb::parallel_for

> ID：12432961
> 
> 赞同：5
> 
> 时间：2012-09-14T22:49:57.723
> 
> 标签：c++, multithreading, tbb

我有一个数据集，我想以`tbb::parallel_for`size 的间隔使用它`interval_size`。我的函子消耗的每个间隔都应该是`interval_size`，除了最后一个部分间隔，当`interval_size`不均匀划分我的数据集时，它可能会更小。

有没有办法使用 TBB 以这种方式进行静态分区？该测试产生的间隔比`interval_size`我的系统小：

```
#include <tbb/parallel_for.h>
#include <iostream>

struct body
{
  void operator()(const tbb::blocked_range<size_t> &r) const
  {
    std::cout << "range size: " << r.end() - r.begin() << std::endl;
  }
};

int main()
{
  size_t num_intervals = 4;
  size_t interval_size = 3;

  // consume num_intervals plus a partial interval in total
  size_t n = num_intervals * interval_size + (interval_size - 1);
  tbb::parallel_for(tbb::blocked_range<size_t>(0, n, interval_size),
                    body(),
                    tbb::simple_partitioner());

  return 0;
} 
```

输出：

```
$ g++ test_parallel_for.cpp -ltbb
$ ./a.out 
range size: 3
range size: 2
range size: 2
range size: 3
range size: 2
range size: 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T11:10:32.393

该行为的原因是简单的分区程序按以下标准对您的范围进行分区：

> ceil(grainsize/2) <= chunksize <= grainsize

当与`tbb::blocked_range(i, j, grainsize)`和 chunksize 一起使用时，是您的范围的大小。

您可以在*3.2.5 Partitioner Summary下查看*[教程](http://threadingbuildingblocks.org/uploads/81/91/Latest%20Open%20Source%20Documentation/Tutorial.pdf)以获取更多信息。

 *没有简单的方法可以使用 TBB 获得固定大小的块大小（您可以使用 OpenMP 轻松实现这一点）。那是因为这违背了 TBB 的概念。TBB 试图从你那里抽象出所有这些东西，调度程序确保你的线程在运行时被尽可能地使用。*

# git - Git 与 stash pop 混淆

> ID：12432962
> 
> 赞同：3
> 
> 时间：2012-09-14T22:50:14.930
> 
> 标签：git, git-flow

我现在遇到了一些麻烦，我正在使用 git flow 并创建了一个名为`feature/newbranch`并且我正在开发的功能。我想隐藏我的更改并将它们保存到，`feature/newbranch`所以我认为我所要做的就是：

```
git stash  (in develop)
git checkout 'feature/newbranch'
git stash pop 
```

这会在我的新分支中进行更改，但是当我开始开发时

```
git checkout develop 
```

我所有隐藏的更改仍然存在。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T23:02:34.573

在您提交之前，不会将任何内容放入分支中。您在这里所做的是将存储的内容放入工作树中。

您应该通过阅读以下问题的最佳答案获得更好的主意：[Git 中 HEAD / Working Tree / Index 之间的区别](https://stackoverflow.com/questions/3689838/difference-between-head-working-tree-index-in-git)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T22:56:35.827

未提交的更改仅存在于工作目录中，并且不绑定到特定的分支。如果要将隐藏的更改应用于分支，请使用`git stash apply`git stash pop 代替。`git stash pop`将自动丢弃最近的存储，而 git stash apply 仅应用它，但不会删除它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T22:57:03.063

不，`git stash pop` 只尝试应用您上次保存的补丁/更改`git stash`。它不会对当前分支提交任何更改。如果你弄脏了你的工作树，即使你切换分支它也会保持肮脏。有时您甚至无法切换树枝，因为树木很脏。

要在切换分支之前清理当前工作树，您应该执行`git reset --hard`

# xcode - 使用 Xcode 缩进 Objective-C 文字

> ID：12432963
> 
> 赞同：16
> 
> 时间：2012-09-14T22:50:35.327
> 
> 标签：xcode, indentation, auto-indent, objective-c-literals

Xcode 认为：

```
NSArray *persons = @[
    @{
        @"name": @"Bob",
        @"pet": @"cat"
    },
    @{
        @"name": @"Alice",
        @"pet": @"dog"
    }
]; 
```

最好像这样缩进：

```
NSArray *persons = @[
@{
@"name": @"Bob",
@"pet": @"cat"
},
@{
@"name": @"Alice",
@"pet": @"dog"
}
]; 
```

你能教 Xcode 缩进 Objective-C 文字吗？

还有其他选择吗？

**注意：**我已经知道我可以“强制”缩进`cmd``opt``]`，但是在复制/粘贴时这**会**消失并且不会解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T01:44:51.877

[使用http://bugreport.apple.com](http://bugreport.apple.com)打开一个错误。

如果你也将它提交给 OpenRadar，Apple 以外的人可以阅读它。我可以向您指出有关您的特定问题的错误报告：http: [//openradar.appspot.com/12394453](http://openradar.appspot.com/12394453)

报告此问题的人越多，Apple 给予的优先级越高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T20:34:05.793

Xcode 5 自动缩进如下：

```
NSArray *persons = @[
                     @{
                         @"name": @"Bob",
                         @"pet": @"cat"
                         },
                     @{
                         @"name": @"Alice",
                         @"pet": @"dog"
                         }
                     ]; 
```

# css - 使用 css3 放大图像（基于 wabkit 的问题）

> ID：12432966
> 
> 赞同：1
> 
> 时间：2012-09-14T22:50:53.340
> 
> 标签：css, webkit, zooming, transitions

这是下面代码的问题。我想用 css 创建类似缩放的效果。我在某些事件上使用 jquery 添加类 zoomIn 或 zoomOut，这现在并不重要。

问题在于，在 Chrome 和 Safari（基于 webkit）中，放大和缩小从 0 开始。例如，在 Firefox 中，过渡从当前图像高度开始，在这种情况下延伸到 1160 像素。然而，webkit 浏览器似乎处理不同的事情并开始从 0 到 1160px 的转换

我没有聪明的方法来解决这个问题，所以请帮忙

干杯

图像还有一类“完整”

```
.full       {display:block;position:absolute;width:100%;top:0;left:0;}

.zoomIn{ 
 top:0;left:0;
 box-sizing: border-box;
  -webkit-transition: all 0.2s ease-in; 
  -o-transition: all 0.2s ease-in; 
  -moz-transition: all 0.2s ease-in; 
  transition: all 0.2s ease-in; 
  height: 1160px !important;
  left: 50%;
  margin-left: -960px !important;
  margin-top: -670px !important;
  top: 50%;
  width: 1920px;
  -webkit-transform: scale(1.2);
  -moz-transform: scale(1.2);
  -o-transform: scale(1.2);
  transform: scale(1.2);
  -ms-transform: scale(1.2);

  }

.zoomOut { 
  -webkit-transition: all 0.2s ease-in; 
   -o-transition: all 0.2s ease-in;  
   transition: all 0.2s ease-in; 
   -moz-transition: all 0.2s ease-in; 
   -moz-transform: scale(1);
   margin-left: 0 ;margin-top: 0;
   -webkit-transform: scale(1);
   -o-transform: scale(1);
   transform: scale(1);
   -ms-transform: scale(1);

  } 
```

# c# - 切换按钮 winform 的外观

> ID：12432969
> 
> 赞同：0
> 
> 时间：2012-09-14T22:51:29.420
> 
> 标签：c#, winforms, button

我在面板中有一个按钮列表（动态生成）。在我的应用程序中，当单击其中一个按钮时，它的外观应该会改变。如果用户更改他们的选择并单击列表中的另一个按钮，则新按钮会更改外观，而旧按钮将返回其默认外观。
单击完全不相关的按钮可确认选择。

我该怎么做？改变外观并不是真正的问题，但知道有一个先前的选择和恢复是。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:07:12.387

为面板中的所有按钮创建一个按钮单击事件处理程序并在那里处理所有更新：

```
private void MyToggleButton_Click(object sender, EventArgs e) {
    // Set all Buttons in the Panel to their 'default' appearance.
    var panelButtons = panel.Controls.OfType<Button>();
    foreach (Button button in panelButtons) {
        button.BackColor = Color.Green;
        // Other changes...
    }

    // Now set the appearance of the Button that was clicked.
    var clickedButton = (Button)sender;
    clickedButton.BackColor = Color.Red;
    // Other changes...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T23:21:39.513

有一个存储当前按钮的变量，确保在分配新单击的按钮之前更改先前分配的按钮的颜色

```
 private Button currentBtn = null; 
```

为按钮创建一个公共事件处理程序

```
 protected void b_Click(object sender, EventArgs e)
    {
        Button snder  = sender as Button;

        //for the first time just assign this button
        if (currentBtn == null)
        {
            currentBtn = snder;
        }
        else //for the second time and beyond
        {
            //change the previous button to previous colour. I assumed red
            currentBtn.BackColor = System.Drawing.Color.Red;

            //assign the newly clicked button as current
            currentBtn = snder;
        }

        //change the newly clicked button colour to "Active" e.g green
        currentBtn.BackColor = System.Drawing.Color.Green;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T23:01:27.840

你能不使用变量来存储当前选择的按钮吗

伪代码

按钮 b = selectedButton

在点击事件中

如果 b != 发件人

恢复 b

b = 新选择的按钮

# php - 一件物品 | 设计注意事项

> ID：12432970
> 
> 赞同：0
> 
> 时间：2012-09-14T22:51:29.880
> 
> 标签：php, javascript

我将我的 PHP 代码和 JS 代码视为一个有凝聚力的单元。我想通过在客户端上创建一个类似于下面结构的对象来开始交互。

通过这样做，我只需要绕过一个对象。有时会填充所有字段，有时仅填充 2 个或更多字段。

因此，通过权衡一些浪费的对象属性，我只需要关心将 o_p 传递给客户端和服务器上的 MVC 中的不同模块。

我有将 JavaScript 转换为 JSON 到 PHP 的函数。

这是一种有效的方法吗？

```
Mo.o_p = function (type) {
    return {

        // current result or data about the data

        result :  0,

        // send client data

        client :  {
            model :  type,
            page  :  {},
            args  :  {}
        },

        // returned server data

        server :  {
            bookmarks  :  {},
            tweets    :  {},
            smalls    :  {}
        }
    };
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:20:19.113

如果您的模型需要这些属性并且为空是您的应用程序的重要信息，我认为那里没有问题。另一方面，如果您的客户端和服务器对象不一定由不同的进程连接和处理，则无需耦合它们。仅仅传递一些空属性不应该是性能问题。

# ios - Xcode facebook登录错误已关闭

> ID：12432983
> 
> 赞同：2
> 
> 时间：2012-09-14T22:52:31.237
> 
> 标签：ios, xcode, facebook

嗨，我正在[http://developers.facebook.com/](http://developers.facebook.com/)上阅读和阅读教程。

关于登录 Facebook 并从应用程序发布 Feed，我的问题是我根本无法登录 Facebook。

我无法让它工作。这很糟糕，很烦人，并且没有明确的教程/解释。

我试图从我的应用程序登录，当 safari 打开然后 URL 就像疯了一样闪烁..

而且我没有收到错误，为什么？

有没有关于登录的 CLEAR 教程？

它在模拟器上工作得很好，但在设备上却不行。

我现在在 Xcode 4.5 beta 上，但它也不适用于 4.4。

我需要帮助！

**[关闭]**

**编辑**：我修好了！我太愚蠢了……我在 7 天之内就为了登录 FB 而苦苦挣扎，然后我改变了（**设备上允许使用 Cookie**），一切正常！

该死的设备只需要一些饼干..大声笑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T23:08:36.453

我大约 2 周前刚刚更新到最近的 FB sdk。这是我的做法：

```
//FB recommends to put these two in the app delegate in their sample apps but you can place them other places
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    NSArray *permissions = [NSArray arrayWithObjects:@"publish_actions", nil];
    return [FBSession openActiveSessionWithPermissions:permissions
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                         NSLog((@"session.state is %d",session.state));
                                         if(session.state==513){
                                             [AppPrefererences sharedAppPrefererences].faceBookLoggedIn=YES;
                                             NSLog((@"facebookLogin pref has been set to yes from inside appDelegate"));
                                         }
                                         else{
                                             [AppPrefererences sharedAppPrefererences].faceBookLoggedIn=NO;
                                         }
                                     }];
}

- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
    // FBSample logic
    // We need to handle URLs by passing them to FBSession in order for SSO authentication
    // to work.
    return [FBSession.activeSession handleOpenURL:url];
}

    //Then whereever you want to initiate the log in (i use mine in a tableView)
      AppDelegate  *appDelegate =(AppDelegate*) [[UIApplication sharedApplication]delegate];

 if (![appDelegate openSessionWithAllowLoginUI:NO]) {
                    [appDelegate openSessionWithAllowLoginUI:YES];
                    facebookLoginLabel.text=@"Facebook Log Out";
                    [AppPrefererences sharedAppPrefererences].faceBookEnabled=YES;
                }
                else{
                    facebookLoginLabel.text=@"Facebook Log In";
                    [AppPrefererences sharedAppPrefererences].faceBookLoggedIn=NO;
                    [FBSession.activeSession closeAndClearTokenInformation];                    
                } 
```

然后无论你想在哪里发布，你都这样做：

```
 [FBRequestConnection startForPostStatusUpdate:@"any thing you want to post"
                                    completionHandler:^(FBRequestConnection *connection, id result, NSError *error){}]; 
```

而且，也不要忘记设置 FBLoginViewDelegate

如果您有任何问题，请告诉我！希望能帮助到你！

# php - 使用 PHP 和 MySQL 编码/解码只返回几个字符的结果

> ID：12432985
> 
> 赞同：0
> 
> 时间：2012-09-14T22:52:45.910
> 
> 标签：php, mysql, amazon-ec2, rackspace-cloud

所以这个问题可能是许多事情之一。这是我的情况。

我使用 ec2 服务器作为我的主机网站，它通过机架空间负载平衡器连接到机架空间数据库（它们不允许从机架空间外部的源连接到数据库）。

无论如何，我的问题是我试图在插入时对我的 mysql 表进行编码并在选择时对其进行解码。这是我用来进行插入的代码：

```
function mysql_insert_sanitize_encrypt_store($databaseName,$names,$values,$link){
$query="INSERT INTO ".$databaseName." (";
foreach($names as $name){
$query=$query.$name.",";
}
$query[strlen($query)-1]=")"; //replace trailing comma with parenthesis 
$query=$query." VALUES (";
foreach($values as $value){
$sanivalue=filter_var($value,FILTER_SANITIZE_URL);
$query=$query."ENCODE('".$sanivalue."','encryptionstring'),";
}
$query[strlen($query)-1]=")";
echo $query;
if(mysql_query($query,$link)){
return 1;
}
} 
```

生成这样的查询：

```
INSERT INTO PublishedItems (PublisherUrl,Age,option,experience,goals,gender,minstaken,Item) VALUES (ENCODE('https://www.google.com/profiles/100571329423938175195','encryptionstring'),ENCODE('18-30,30-45','encryptionstring'),ENCODE('15-30','encryptionstring'),ENCODE('novice,amateur','encryptionstring'),ENCODE('Loseweight','encryptionstring'),ENCODE('male','encryptionstring'),ENCODE('120','encryptionstring'),ENCODE('[[{"name":"MW350","value":""},{"name":"MD350","value":""}]]','encryptionstring')) 
```

这将作为成功插入返回。

当我尝试再次获取数据时，我使用以下代码：

```
$query="select ".$decryptionQueries[$count++]." FROM ".$DBName;
mysql_free_result($result);
$result=mysql_query($query,$link);
echo "</br>";
echo $query;
echo "</br>";
echo "decrypted result --->";
var_dump($result);
echo "</br>";
echo "</br>============".$DBName."============UNENCRYPTED=========</br>";
while($row=mysql_fetch_array($result)){
echo "</br>";
var_dump($row);
echo "</br>";
echo "<pre>" . print_r(get_defined_vars(),true) . "</pre>";
} 
```

其中解密查询定义如下：

$`decryptionQueries=array("DECODE(PublisherUrl, 'encryptionstring'), DECODE(Age,'encryptionstring'), DECODE(option,'encryptionstring'), DECODE(experience,'encryptionstring'), DECODE(goals,'encryptionstring'), DECODE(gender,'encryptionstring'),DECODE(minstaken,'encryptionstring'), DECODE(Item,'encryptionstring')","DECODE(User,'encryptionstring'), DECODE(Age,'encryptionstring'), DECODE(option,'encryptionstring'), DECODE(experience,'encryptionstring'), DECODE(goals,'encryptionstring'),DECODE(gender,'encryptionstring'), DECODE(Injuries,'encryptionstring'), DECODE(availperday,'encryptionstring'), DECODE(Item,'encryptionstring')");`

这会生成如下查询：

```
select DECODE(PublisherUrl, 'encryptionstring'), DECODE(Age,'encryptionstring'), DECODE(option,'encryptionstring'), DECODE(experience,'encryptionstring'), DECODE(goals,'encryptionstring'), DECODE(gender,'encryptionstring'),DECODE(minstaken,'encryptionstring'), DECODE(Item,'encryptionstring') FROM PublishedItems 
```

但是在显示数据时，rows 变量的定义变量条目如下所示：

```
[row] => Array
        (
            [0] => h
            [DECODE(PublisherUrl, 'encryptionstring')] => h
            [1] => 18-3
            [DECODE(Age,'encryptionstring')] => 18-3
            [2] => 15-3
            [DECODE(option,'encryptionstring')] => 15-3
            [3] => 
            [DECODE(experience,'encryptionstring')] => 
            [4] => 
            [DECODE(goals,'encryptionstring')] => 
            [5] => male
            [DECODE(gender,'encryptionstring')] => male
            [6] => 1
            [DECODE(minstaken,'encryptionstring')] => 1
            [7] => [
            [DECODE(Item,'encryptionstring')] => [ 
```

我的问题是：为什么这只返回存储在数据库中的部分字符串？或者为什么它只存储部分字符串？我的代码出了什么问题？它与编码和解码有关吗？

当输入没有首先编码并且只是从数据库中选择时，它会正确且完整地返回，所以我认为它与编码和解码有关。

你认为是什么问题？

编辑：

遍历其中一个表的行给出以下输出（我只是 var_dumped 行）

```
============PublishedItems============ENCRYPTED=========

array(9) { ["PublisherUrl"]=> string(1) "A" ["Age"]=> string(3) "7b?" ["option"]=> string(3) "7C?" ["experience"]=> string(0) "" ["goals"]=> string(0) "" ["gender"]=> string(4) " ¬'" ["minsTaken"]=> string(1) "7" ["Item"]=> string(1) "-" ["DateSubmitted"]=> string(19) "2012-09-14 21:05:57" } 

array(9) { ["PublisherUrl"]=> string(1) "A" ["Age"]=> string(3) "7b?" ["option"]=> string(3) "7C?" ["experience"]=> string(0) "" ["goals"]=> string(1) " " ["gender"]=> string(5) " ¬'#" ["minsTaken"]=> string(1) "7" ["Item"]=> string(1) "-" ["DateSubmitted"]=> string(19) "2012-09-14 21:10:41" } 

array(9) { ["PublisherUrl"]=> string(1) "A" ["Age"]=> string(3) "7b?" ["option"]=> string(3) "7C?" ["experience"]=> string(0) "" ["goals"]=> string(1) " " ["gender"]=> string(5) " ¬'#" ["minsTaken"]=> string(1) "0" ["Item"]=> string(1) "-" ["DateSubmitted"]=> string(19) "2012-09-14 21:16:55" } 

array(9) { ["PublisherUrl"]=> string(1) "A" ["Age"]=> string(3) "7b?" ["option"]=> string(3) "7C?" ["experience"]=> string(0) "" ["goals"]=> string(1) " " ["gender"]=> string(4) " ¬'" ["minsTaken"]=> string(1) "7" ["Item"]=> string(1) "-" ["DateSubmitted"]=> string(19) "2012-09-14 22:34:14" } 

array(9) { ["PublisherUrl"]=> string(53) "https://www.google.com/profiles/100571329423938175195" ["Age"]=> string(3) "45+" ["option"]=> string(7) "below15" ["experience"]=> string(6) "novice" ["goals"]=> string(10) "Loseweight" ["gender"]=> string(4) "male" ["minsTaken"]=> string(3) "120" ["Item"]=> string(59) "[[{"name":"MW484","value":""},{"name":"MD484","value":""}]]" ["DateSubmitted"]=> string(19) "2012-09-14 22:49:41" } 

array(9) { ["PublisherUrl"]=> string(53) "https://www.google.com/profiles/100571329423938175195" ["Age"]=> string(3) "45+" ["option"]=> string(8) "below15," ["experience"]=> string(6) "novice" ["goals"]=> string(10) "Loseweight" ["gender"]=> string(4) "male" ["minsTaken"]=> string(3) "120" ["Item"]=> string(117) "[[{"name":"MW310","value":""},{"name":"MD310","value":""}],[{"name":"MW900","value":""},{"name":"MD900","value":""}]]" ["DateSubmitted"]=> string(19) "2012-09-14 22:50:19" } 

array(9) { ["PublisherUrl"]=> string(1) "A" ["Age"]=> string(2) "vS" ["option"]=> string(0) "" ["experience"]=> string(0) "" ["goals"]=> string(0) "" ["gender"]=> string(4) " ¬'" ["minsTaken"]=> string(1) "7" ["Item"]=> string(1) "-" ["DateSubmitted"]=> string(19) "2012-09-14 23:50:32" } 
```

请注意，某些字符串未加密，我将其作为控件执行，这表明问题出在编码插入，但我想不出用于插入的查询字符串（请参阅第二个代码片段）如何只插入部分消息。解密后，这些字符串会给出部分字符串，如果是完整的，那将是正确的。

此外，这里是表的声明：

```
create table PublishedItemss (PublisherUrl char(150),Age char(5),option char(8),experience char(20), goals char(50), gender char(8), minsTaken int, item TEXT,DateSubmitted timestamp NOT NULL DEFAULT NOW())'; 
```

# java - ORMLite 可以与服务器一起使用吗？

> ID：12432988
> 
> 赞同：0
> 
> 时间：2012-09-14T22:53:06.400
> 
> 标签：java, ormlite

我希望我的 java 应用程序客户端连接到我的远程服务器。我可以为此使用 ORMLite 吗？该文档提到了spring框架。但是a）我不确定如何使用它，b）我不确定它是否适用于这个应用程序。

通过服务器连接我的意思是我想使用 DAO 从我的服务器上的数据库中轮询和推送数据（我确信大多数客户端/服务器都会这样做）。 ![在此处输入图像描述](../Images/71de67bd965e1fa6dd78d608ccda349e.png)

* * *

编辑：回应格雷的跟进。

* * *

在进一步讨论我的困惑之前，我应该说明我对交互类所做的事情的理解。

### JDBC连接源

是客户端（ConnectionSource 的发起者）和主机（无论是本地数据库还是基于服务器）之间的桥梁。

### 道

提供用于轻松创建 SQL 查询的工具的界面。

现在我仍然不完全理解的是`DAO`与`JdbcConnectionSource`我的服务器的交互。应用程序是否`DAO`生成完全“编译”的 SQL 语句并将其分派给应用程序`ConnectionSource`以传输到主机？然后服务器在收到 SQL 请求后会正确委派它 - 处理请求，收集数据并返回它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T12:10:33.943

我不是 100% 确定你的意思，但这里有一些关于[ORMLite](http://ormlite.com/)和远程处理的一般信息。ORMLite 当然可以联系服务器上的远程数据库。您需要做的就是指定指向远程系统的 JDBC URL：

```
// you can change the database type, hostname, and the database name
String databaseUrl = "jdbc:mysql://host.name.j256.com/databaseName";
ConnectionSource connectionSource = new JdbcConnectionSource(databaseUrl);
... 
```

您当然可以为此使用 Spring，但这不是必需的。如果您打算使用某种 HTTP、RMI 或其他远程处理机制联系服务器，那么您将不得不为此编写客户端/服务器包装器。除了 JDBC 提供的远程处理之外，ORMLite 不提供任何远程处理。

希望这可以帮助。

* * *

**编辑：**

`JDBCConnectionSource`是`ConnectionSource`使用[JDBC](http://en.wikipedia.org/wiki/Java_Database_Connectivity)与数据库对话的接口的实现。还有一个`AndroidConnectionSource`在 AndroidOS 下使用直接数据库调用。

令人震惊的`ConnectionSource`是，它是数据库连接的来源。[您可以通过查看其 javadocs](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/support/ConnectionSource.html)来了解各种方法。最常用的方法是： `getReadOnlyConnection()`、`getReadWriteConnection()`和`releaseConnection`。这本身不会做任何远程处理。它允许 JDBC 执行与数据库服务器的实际连接和远程处理，无论是本地还是远程。

该`Dao`界面提供了对数据库执行所有操作的工具。它使用`ConnectionSource`获取到数据库的连接，执行操作（插入、删除、更新、选择），然后释放数据库连接。

> 现在我仍然不完全理解的是 DAO 和 JdbcConnectionSource 与我的服务器的交互。应用程序 DAO 是否生成完全“编译”的 SQL 语句并将其分派给应用程序 ConnectionSource 以传输到主机？

不会。ORMLite 生成执行操作所必需的 SQL，它从 获取到数据库的连接`ConnectionSource`，它编译 SQL 并使用连接设置任何参数，它使用连接执行语句，处理结果，然后释放连接。

# ruby-on-rails-3 - 为什么我得到 NilClass:Class 的未定义方法“model_name”？

> ID：12432996
> 
> 赞同：0
> 
> 时间：2012-09-14T22:54:49.350
> 
> 标签：ruby-on-rails-3

当我访问用户的个人资料页面时，我得到了这个。所以 localhost:3000/users/1 例如...

我在第 1 行得到它

```
1: <%= form_for(@micropost) do |f| %>
2:   <%= render 'shared/error_messages', object: f.object %>
3:   <div class="field no-indent">
4:     <%= f.text_area :content, placeholder: "What's something else you want to buy?" %> 
```

那么我有两个微博表格，一个在这里

```
<%= form_for(@micropost, :html => { :id => "sale" }) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field no-indent">
    <%= f.text_area :content, placeholder: "What's something else you want to buy?" %>
    <%= hidden_field_tag 'micropost[kind]', "sale" %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

另一个在这里

```
<%= form_for(@micropost) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field no-indent">
    <%= f.text_area :content, placeholder: "What's something else you want to buy?" %>
    <%= hidden_field_tag 'micropost[kind]', "purchase" %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

这是我的路线。

```
SampleApp::Application.routes.draw do
  resources :users do
    resources :comments
    member do
      get :following, :followers
    end
  end
  resources :sessions, only: [:new, :create, :destroy]
  resources :microposts, only: [:create, :destroy] do
    resources :comments
    resources :kind
  end
  resources :relationships, only: [:create, :destroy]

  root to: 'static_pages#home'

  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete

  match '/help',    to: 'static_pages#help'
  match '/about',   to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact' 
```

这是页面本身的代码（用户显示）

```
 <section>
        <%= render 'shared/user_info' %>
      </section>

      <section>
        <div id= "purchases">
          <%= render 'shared/micropost_form_purchase' %>
        </div>
        <div id="sales">
          <%= render 'shared/micropost_form_sale' %>
        </div>
      </section>

<% provide(:title, @user.name) %>
<div class="row">
  <aside class="span4">
    <section>
      <h1>
        <%= gravatar_for @user %>
        <%= @user.name %>
      </h1>
    </section>
  </aside>
  <div class="span8">

    <% if @user.microposts.any? %>
      <h3>Purchases I am interested in (<%= @user.microposts.count %>)</h3>
      <ol class="microposts">
        <%= render @microposts %>
      </ol>
      <%= will_paginate @microposts %>
    <% end %>
  </div>
</div> 
```

我也不明白如何将空对象传递给表单？表单的全部意义不在于创建对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T23:08:24.003

根据我今天偶然发现的文章，您传递给的对象`form_for`（在这种情况下为@micropost）可能是 nil 或空的。

这是提到的文章：[http ://schneems.com/post/31460949407/raise-hell-better-programming-through-error-messages](http://schneems.com/post/31460949407/raise-hell-better-programming-through-error-messages)

# c# - ILGenerator.DeclareLocal() 采用尚未编译的类的类型

> ID：12432998
> 
> 赞同：8
> 
> 时间：2012-09-14T22:54:56.900
> 
> 标签：c#, compiler-construction, cil, reflection.emit

在为自己的语言制作编译器的过程中，我尝试使用 Reflection.Emit 框架生成一些 MSIL 代码。`int`当我声明局部变量时，它工作正常。但是，当我想声明一个尚未编译的类型的局部变量时，我遇到了麻烦，因为它`DeclareLocal()`需要一个`Type`作为参数。那是我未编译的类，比如说`A`，仍然需要使用

```
 assemblyBuilder = Thread.GetDomain().DefineDynamicAssembly(assemName, AssemblyBuilderAccess.RunAndSave);
 module = assemblyBuilder.DefineDynamicModule(Filename); 
 module.DefineType(name, TypeAttributes.Public | TypeAttributes.Class) 
```

那么我将如何编译以下程序

```
class A {
    void M() { B b = new B(); }
}
class B
    void M() { A a = new A(); }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T23:35:49.010

您在这里需要的主要洞察力`TypeBuilder`来自`Type`. 因此，即使您尚未最终确定类型（通过调用`CreateType()`），您也可以使用它来声明另一种类型的局部变量。

我遇到的另一个障碍是`GetConstructor()`在未完成`TypeBuilder`的情况下不起作用（它会引发异常）。但是如果显式创建默认构造函数，则可以通过`ConstructorBuilder`.

```
static void Main()
{
    var assemblyBuilder = AppDomain.CurrentDomain.DefineDynamicAssembly(
        new AssemblyName("foo"), AssemblyBuilderAccess.RunAndSave);
    var module = assemblyBuilder.DefineDynamicModule("foo.dll");
    var aType = module.DefineType(
        "A", TypeAttributes.Public | TypeAttributes.Class);
    var bType = module.DefineType(
        "B", TypeAttributes.Public | TypeAttributes.Class);
    var aCtor = aType.DefineDefaultConstructor(MethodAttributes.Public);
    var bCtor = bType.DefineDefaultConstructor(MethodAttributes.Public);
    CreateMethodM(aType, bType, bCtor);
    CreateMethodM(bType, aType, aCtor);
    aType.CreateType();
    bType.CreateType();
    assemblyBuilder.Save("foo.dll");
}

static void CreateMethodM(
    TypeBuilder thisType, Type otherType, ConstructorInfo otherCtor)
{
    var method = thisType.DefineMethod(
        "M", MethodAttributes.Private, typeof(void), Type.EmptyTypes);
    var il = method.GetILGenerator();
    var local = il.DeclareLocal(otherType);
    il.Emit(OpCodes.Newobj, otherCtor);
    il.Emit(OpCodes.Stloc, local);
    il.Emit(OpCodes.Ret);
} 
```

# javascript - 为jQuery函数中的外部变量赋值

> ID：12432999
> 
> 赞同：1
> 
> 时间：2012-09-14T22:55:02.123
> 
> 标签：javascript, jquery, scope

这是我的代码：

```
var resultSet;

db.transaction(function (tx){
    tx.executeSql('SELECT * FROM table WHERE name = ?', [name], function (tx, results) {
        resultSet = results;
    });
});

console.log(resultSet); 
```

记录的是“未定义”。

我希望得到的是分配给“resultSet”的 SQLResultSet 对象“results”。

我确定我误解了 JavaScript 中的作用域。但这似乎应该有效，我找不到类似的问题。

谢谢你的时间！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:57:38.013

要么 要么`transaction`是`executeSql`一个异步函数，这意味着任何涉及其结果的东西都必须包含在回调函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:57:52.707

在查询有机会返回之前，您正在调用`console.log()`with 。`resultSet`

将调用移动`log()`到查询回调中：

```
db.transaction(function(tx) {
    tx.executeSql('SELECT * FROM table WHERE name = ?', [name], function(tx, results) {
        console.log(results);
    });
}); 
```