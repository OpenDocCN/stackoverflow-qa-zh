# StackOverflow 问答 12113000-12113999

# javascript - 动态 jQuery 验证

> ID：12113003
> 
> 赞同：0
> 
> 时间：2012-08-24T16:11:52.477
> 
> 标签：javascript, jquery-validate

我有一个包含 10 个输入/选择的表单（ASP.NET MVC3）

验证，验证由数据属性和 jquery.validate.min.js 和 jquery.validate.unobtrusive.min.js 完成（我不使用任何自定义 .submit() 函数）

逻辑是根据其他字段中的选定值，某些字段必须是必需的，而不是必需的。

问题是：如何启用/禁用对来自 JavaScript 的特定输入的验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:08:11.033

$("#myform").validate({ 忽略：".ignore" })

[http://docs.jquery.com/Plugins/Validation/validate](http://docs.jquery.com/Plugins/Validation/validate)

# actionscript-3 - 在内部函数中引用自己的构造函数

> ID：12113004
> 
> 赞同：1
> 
> 时间：2012-08-24T16:11:55.753
> 
> 标签：actionscript-3, scope, actionscript, closures, flash-player-11

这是一个从复杂类中提炼出来的玩具示例：

```
public class MyClass {
    public function MyClass() {
         trace('Created');
    }

    public static function makeObjectAsync(callback:Function):void {
        inner();

        function inner():void {
            var object:MyClass = new MyClass(); // line 10
            callback(object);
        }
    }
} 
```

调用静态函数后：

```
MyClass.makeObjectAsync(function(object:Myclass):void { ... }) 
```

以下运行时异常发生在第 10 行：

```
TypeError: Error #1007: Instantiation attempted on a non-constructor. 
```

为什么会这样，我该怎么办？

### 编辑

看来这`new (MyClass)()`行得通。现在我可能更困惑了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:49:15.423

不太清楚为什么要诚实。它与匿名函数继承的范围有关，具体取决于它们的声明方式。

不过，我有 2 个解决方案给你。

1.  如果您的 makeObject 方法不是静态的，它会起作用。

2.  以另一种方式声明您的匿名函数：

    ```
    public static function makeObjectAsync(callback:Function):void {
        var inner : Function = function():void {
            var object:MyClass = new MyClass();
            callback(object);
        };

        inner();
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:20:38.153

您不应该将变量称为“**对象**”。你为什么嵌套你的内部函数？你为什么不只是：

```
public static function makeObjectAsync(callback:Function):void {
    callback(new MyClass());
} 
```

或者如果你真的想要那个嵌套函数：

```
public static function makeObjectAsync(callback:Function):void {
    inner();

    function inner():void {
        callback(new MyClass());
    }
} 
```

而且您无法再次调用该类的构造函数，请使用在构造函数中调用的函数然后再次调用它。有了这个，您不是引用构造函数，而是创建类的新实例。

# c++ - 自引用 C++ 类型有什么用处？

> ID：12113005
> 
> 赞同：0
> 
> 时间：2012-08-24T16:11:57.373
> 
> 标签：c++, reference

自引用类型的用例是什么？

通过自我引用类型，我的意思是：

```
class T { 
  T *ptr; // member variable that references the type of the class
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:17:12.983

我能想到的一个例子是[链表](http://en.wikipedia.org/wiki/Linked_list)。

[从这里](http://learningcppisfun.blogspot.de/2005/10/sample-linked-list.html)借来的例子：

```
#include<iostream>
struct Node{
  int data;
  Node* next;
};
void InsertAfter(Node **head, int value){
  if(*head==NULL){
    Node* temp=NULL;
    temp = new Node;
    temp->data = value;
    temp->next = NULL;
    *head = temp;
  }else{
    Node *temp = new Node;
    temp->data = value;
    temp->next = (*head)->next;
    (*head)->next = temp;
  }
}
void DeleteAfter(Node **head){
  if(*head==NULL){
    return;
  }else{
    Node *temp = NULL;
    temp = (*head)->next;
    (*head)->next = (*head)->next->next;
    delete temp;
    temp=NULL;
  }
}
int DeleteAll(Node **head,int value){
  int count=0;
  Node *p = NULL;
  Node *q = (*head);
  if(*head==NULL){
    count =0;
  }else{
    while((q)!=NULL){
      if((q)->data==value){
        Node *temp = NULL;
        temp = q;
        if ( p!=NULL){
          p->next = q->next;
        }else{
          (*head) = q->next;
        }
        q = q->next;
        delete temp;
        temp = NULL;
        ++count;
      }else{
        p = q;
        q = q->next;
      }
    }
  } 
  return count;
}
void DisplayList(Node *head){
  if(head!=NULL){
    std::cout << head->data << "\n";
    while(head->next!=NULL){
      std::cout <<  head->data << "\n";
      head = 
      head->next;
    }

    std::cout << "\n\n";
}
int main(){
  Node *head=NULL;
  InsertAfter(&head,10);
  InsertAfter(&head,10);
  InsertAfter(&head,20);
  InsertAfter(&head,10);
  DisplayList(head);
  DeleteAfter(&head);
  DisplayList(head);
  int a = DeleteAll(&head,10);
  std::cout << "Number Of Nodes deleted 
                having value 10 = " << 
                a <<"\n\n";
  DisplayList(head);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T16:13:57.000

它是构建链表或树层次结构的最有效方法之一。

```
#include <iostream>

class linked_ints {
public:
  linked_ints() : next(nullptr), x(0) {}
  linked_ints* next;
  int x;
};

void print(linked_ints* b) {
  if(b == nullptr) return;
  do {
    std::cout << b->x << std::endl;
  } while((b = b->next));
}

int main()
{
  linked_ints x, y, z;
  x.next = &y; y.next = &z;

  print(&x);

  return 0;
} 
```

# ruby-on-rails - 使用 Capistrano 部署生产和开发环境

> ID：12113007
> 
> 赞同：1
> 
> 时间：2012-08-24T16:12:11.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capistrano

我已经设置 Capistrano 在生产服务器上部署我的 Rails 应用程序，这工作正常。

我现在需要能够在开发服务器上部署相同的应用程序。为此，我在 config.deploy.rb 中创建了 2 个任务：

```
desc "Run on development server" 
task :dev do 
  server "development_server", :web, :app, :db, :primary => true
end 

desc "Run on production server" 
task :production do 
  server "production_server", :web, :app, :db, :primary => true
end 
```

这样做，要在 dev 上执行部署，我需要使用：

帽开发部署

但是，我没有设法告诉 Capitrano 在正确的环境上运行捆绑包，它使用“--without development test”选项，而我需要“--without test production”

```
failed: "rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell '1.9.3' -c 'cd /var/be/releases/20120824155742 && bundle install --gemfile /var/be/releases/20120824155742/Gemfile --path /var/be/shared/bundle --deployment --quiet --without development test'" on 192.168.1.10 
```

知道如何执行此操作吗？

另外，我如何有选择地在开发或生产环境中开始精简？我是否需要为每个任务创建一个任务，或者有什么特殊的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T17:03:16.023

最好的方法是使用 Capistrano Multistage 扩展。[这个 Wiki](https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension)会比我如何使用它解释得更好。我唯一遇到的小问题是：`require 'capistrano/ext/multistage'`不需要`require 'capistrano'`。

# android - 安卓谷歌地图蓝屏

> ID：12113009
> 
> 赞同：3
> 
> 时间：2012-08-24T16:12:30.720
> 
> 标签：android, google-maps

我在 Android 上加载 Google 地图时出现蓝屏。我不知道我做错了什么，这是我获取位置的代码：

```
MapView mapView = (MapView) findViewById(R.id.mapDire);
Route route = directions(new GeoPoint((int)(2*1E6),(int)(34*1E6)),
  new GeoPoint((int)(3*1E6),(int)(36*1E6))); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-22T14:29:48.463

我认为可以是两件事

*   您的坐标为 0,0，地图在海洋中打开
*   您的 API 密钥有问题

在第一种情况下，尝试缩小很多次并尝试查看某个大陆。

在第二次尝试阅读文档或/并尝试此[链接](http://www.youtube.com/watch?v=awX5T-EwLPc)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-04T08:12:21.693

我在我的应用程序中遇到了这个问题，并在`onlocationchanged`方法中查看下面的代码并解决它。

```
LatLng myCoordinates = new LatLng(location.getLatitude(), location.getLongitude());
         mMap.moveCamera(CameraUpdateFactory.newLatLng(myCoordinates));

    mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(location.getLatitude(), location.getLongitude()), 17.0f));

    marker.setPosition(myCoordinates); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T16:13:47.180

通常蓝屏意味着您的 Google API 密钥不起作用。

[GoogleMaps - 实际地图未显示](https://stackoverflow.com/q/11104155/933756)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T16:28:55.883

如果您的地图未显示，仅显示网格/空白屏幕，那是因为您的地图 API 密钥丢失或不正确。注册 Google Android Map API。

试试这个[链接](https://developers.google.com/android/maps-api-signup)了解更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-27T14:49:10.287

您看到蓝屏的原因可能有 3 个

1.  您的 Long/Lat 指向水域 - 或 Ocean 区域，总是没有任何问题，只是您 Long/Lat 指向蓝色的水。
2.  你的 Long/Lat 是错误的，什么都没有出现
3.  您的 API 密钥错误，可以在您的 Android 清单文件 *目录中更正：Android/app/src/main/AndroidManifest.xml*

# spring - Scala、@ResponseBody 和 Map

> ID：12113010
> 
> 赞同：2
> 
> 时间：2012-08-24T16:12:31.297
> 
> 标签：spring, scala, spring-mvc

我在 spring3 项目中试验 Scala，当我返回带有 @ResponseBody 的地图时，我没有得到我期望的结果。我在 java 中包含了一个工作示例以及我在 scala 中的尝试

```
// This is Java
@RequestMapping(value="/pbx.admin", method=RequestMethod.GET)
public @ResponseBody Map<String, Object> getInfo2(HttpServletRequest request, Model model){
    Map<String, Object> map = new HashMap<String, Object>();
    map.put("pbx", "admin");
    map.put("method", "s");
    return map;
} 
```

java 返回 json 并定义了 pbx & 方法，这是我所期望的。

```
// This is Scala
@RequestMapping(value= Array("/pbx.admin"), 
  method=Array(RequestMethod.GET))
@ResponseBody
def getInfo2() = {
  Map("pbx" -> "admin", "method" -> "s")
} 
```

scala返回一些不同的东西：

```
{
    empty: false,
    traversableAgain: true
} 
```

为了获得我的地图键/值，我需要做什么？

为了获得额外的荣誉，有没有更好的“scala 方式”来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T16:39:04.950

Spring MVC 框架不是用 Scala 构建的，它不识别 Scala 的`Map`. 您必须转换`scala.collection.Map`为`java.util.Map`. 您可以使用隐式转换：

```
import collection.JavaConversions._

def getInfo2(): java.util.Map[String, String] = {
  Map("pbx" -> "admin", "method" -> "s")
} 
```

或手动转换：

```
import collection.JavaConverters._

def getInfo2() = {
  Map("pbx" -> "admin", "method" -> "s").asJava
} 
```

注意进口，它们很重要。

我怀疑 Spring 可以被黑客入侵以接受 Scala 集合，但显然不是开箱即用的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-21T07:26:19.997

Spring MVC 使用 Jackson。您需要将 Jackson scala 模块注册为映射器。这增加了对杰克逊的 scala 支持，使其能够识别集合。

例子：

```
 import com.fasterxml.jackson.databind.ObjectMapper
    import com.fasterxml.jackson.module.scala.ScalaModule
    import com.fasterxml.jackson.module.scala.DefaultScalaModule  
    class ScalaObjectMapper extends ObjectMapper  {
        {
            registerModule(DefaultScalaModule)
        }
    } 

```

然后你需要将它添加到你的消息转换器

```
 <mvc:annotation-driven>
            <mvc:message-converters>
                <bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
                    <property name="objectMapper">
                    <bean class="com.petzfactor.packwall.web.module.ScalaObjectMapper"></bean>
                </property>
            </bean>
        </mvc:message-converters>
    </mvc:annotation-driven> 

```

该模块位于[https://github.com/FasterXML/jackson-module-scala的 github 上](https://github.com/FasterXML/jackson-module-scala)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T23:08:31.620

Scala 模块需要序列化 ​​scala 对象，例如 Collections、Option 和 case 类。这是一种仅通过修改 Spring 上下文来注册 Jackson Scala 模块的方法。

```
<mvc:annotation-driven>
    <mvc:message-converters>
        <bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
            <property name="objectMapper" ref="objectMapperWithScala"/>
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven>
<bean name="scalaModule" class="com.fasterxml.jackson.module.scala.DefaultScalaModule"/>
<bean name="objectMapper" class="com.fasterxml.jackson.databind.ObjectMapper"/>
<bean name="objectMapperWithScala" factory-bean="objectMapper" factory-method="registerModule">
    <constructor-arg ref="scalaModule"/>
</bean> 
```

# java - 过滤器还是什么？-- 进入Spring应用前检查文件

> ID：12113013
> 
> 赞同：1
> 
> 时间：2012-08-24T16:12:38.623
> 
> 标签：java, spring, jsp, jakarta-ee, servlets

我们正在为当前的spring应用程序开发一个新功能：当用户尝试登录主页时，我们首先需要检查xml文件中的标签（如db版本左右）以确定用户是否可以直接到主页。如果版本是最新的，则运行 spring 应用程序，否则重定向到另一个页面让用户升级数据库然后重新启动应用程序（手动）。

我认为有两种解决方案：

1.  使用弹簧制作此功能，以便让弹簧 mvc 处理其余部分。

2.  在错误版本时重定向到升级页面的 servlet 级别之前进行过滤。甚至懒得进入spring应用程序。

那么哪一个听起来更合理呢？请分享任何想法，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:24:33.477

我认为`Filters`在这里使用是多余的，因为`Filters`在每个请求中都会检查，并且您只需要在用户登录时检查一次。

因此，最好的方法应该是在用户登录后根据 XML 标记检查方便地重定向（我认为这是您的第一个建议）。

# c# - 将 xml 反序列化为对象时出错：System.FormatException 输入字符串格式不正确

> ID：12113014
> 
> 赞同：20
> 
> 时间：2012-08-24T16:12:43.000
> 
> 标签：c#, xml, silverlight, xml-serialization, xml-deserialization

您好，提前感谢您的帮助。尝试使用 XmlSerializer 和 StringReader 将 XElement 反序列化为对象时遇到问题。我的反序列化代码是这样的：

```
/*deseierialize a single RegisterServerObject instance from xml*/
        static RegisterServerObject DeserializeSingleServerFromXml(XElement serverElement)
        {
            XmlSerializer deserializer = new XmlSerializer(typeof(RegisterServerObject));
            RegisterServerObject server;
            using (var reader = new StringReader(serverElement.ToString()))
                server = (RegisterServerObject)deserializer.Deserialize(reader);

            return server;
        } 
```

我知道异常所揭示的读者内容是：

```
<Server>
  <ServerID>11</ServerID>
  <GroupID />
  <ParentID>15</ParentID>
  <ServerName>IAProd1</ServerName>
  <User>admin</User>
  <UID>123</UID>
  <PWD>password</PWD>
  <Domain>InputAccel</Domain>
  <Location>Left</Location>
  <AssociatedModules>
    <Module>
      <ModId>1</ModId>
      <ServerId>11</ServerId>
      <ModName>TestModA</ModName>
      <ModuleStatus>1</ModuleStatus>
    </Module>
    <Module>
      <ModId>2</ModId>
      <ServerId>11</ServerId>
      <ModName>TestModB</ModName>
      <ModuleStatus>1</ModuleStatus>
    </Module>
    <Module>
      <ModId>9</ModId>
      <ServerId>11</ServerId>
      <ModName>TestModI</ModName>
      <ModuleStatus>1</ModuleStatus>
    </Module>
    <Module>
      <ModId>10</ModId>
      <ServerId>11</ServerId>
      <ModName>TestModJ</ModName>
      <ModuleStatus>1</ModuleStatus>
    </Module>
  </AssociatedModules>
</Server> 
```

我的 RegisterServerObject 类如下所示：

```
[XmlRoot("Server")]
    public class RegisterServerObject
    {
        public RegisterServerObject() { }

        public int ServerID { get; set; }

        public int GroupID { get; set; }

        public int ParentID { get; set; }

        public string ServerName { get; set; }

        public string User { get; set; }

        public int Uid { get; set; }

        public string Domain { get; set; }

        public string Location { get; set; }

        public List<RegisterModuleObject> AssociatedModules { get; set; }

    } 
```

并且冒着信息过载的风险，我得到的确切异常消息是：

```
System.InvalidOperationException: There is an error in XML document (4, 4). ---> System.FormatException: Input string was not in a correct format.
   at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
   at System.Xml.XmlConvert.ToInt32(String s)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderRegisterServerObject.Read3_RegisterServerObject(Boolean isNullable, Boolean checkType)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderRegisterServerObject.Read4_Server()
   --- End of inner exception stack trace ---
   at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, Object events)
   at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle)
   at System.Xml.Serialization.XmlSerializer.Deserialize(TextReader textReader)
   at SL_xMonitor_Frontend_RefactorV1.Views.RegisteringNewChildWindowV2.DeserializeSingleServerFromXml(XElement serverElement)
   at SL_xMonitor_Frontend_RefactorV1.Views.RegisteringNewChildWindowV2.modXmlClient_getAssociatedModulesCompleted(Object sender, getAssociatedModulesCompletedEventArgs e)
   at SL_xMonitor_Frontend_RefactorV1.XMLServersAndModulesServiceReference.XMLTablesAndModulesServiceClient.OngetAssociatedModulesCompleted(Object state)} 
```

为了实例化类，将 xml 元素的值（可能是 ParentID）转换为 int 似乎存在问题，但我不确定为什么会这样。预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-24T16:31:44.360

问题是该属性`GroupID`被声明为整数，但其值为空 ( `<GroupID/>`)。一种解决方案是更改 XML 以使该元素的值是有效整数：

```
<GroupID>0</GroupID> 
```

另一种解决方案是将该值反序列化为字符串，并转换为该类型的用户可以使用的整数：

```
 [XmlRoot("Server")]
    public class RegisterServerObject
    {
        public RegisterServerObject() { }

        public int ServerID { get; set; }

        [XmlIgnore]
        public int GroupID { get; set; }
        [XmlElement(ElementName = "GroupID")]
        public string GroupIDStr
        {
            get
            {
                return this.GroupID.ToString();
            }
            set
            {
                if (string.IsNullOrEmpty(value))
                {
                    this.GroupID = 0;
                }
                else
                {
                    this.GroupID = int.Parse(value);
                }
            }
        }

        public int ParentID { get; set; }

        public string ServerName { get; set; }

        public string User { get; set; }

        public int Uid { get; set; }

        public string Domain { get; set; }

        public string Location { get; set; }

        [XmlArray(ElementName = "AssociatedModules")]
        [XmlArrayItem(ElementName = "Module")]
        public List<RegisterModuleObject> AssociatedModules { get; set; }
    }

    public class RegisterModuleObject
    {
        public int ModId { get; set; }
        public int ServerId { get; set; }
        public string ModName { get; set; }
        public int ModuleStatus { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T16:47:03.160

首先你需要设置`XmlIgnore`属性的`GroupID`属性

```
[XmlRoot("Server")]
public class RegisterServerObject
{
   . . .
   [XmlIgnore]
   public int GroupID { get; set; }
   . . .
} 
```

然后您可以创建将用于反序列化的适配器：

```
[XmlRoot("Server")]
public class RegisterServerObjectAdapter : RegisterServerObject
{
    [XmlElement("GroupID")]
    public string GroupIDNew
    {
        get { return GroupID.ToString(); }
        set
        {
            int outInt;
            int.TryParse(value, out outInt);
            GroupID = outInt;
        }
    }
} 
```

最后我修改`DeserializeSingleServerFromXml`了一些方法

```
 static RegisterServerObject DeserializeSingleServerFromXml(XDocument serverElement)
    {
        var deserializer = new XmlSerializer(typeof(RegisterServerObjectAdapter));
        return (RegisterServerObject)deserializer.Deserialize(serverElement.CreateReader(ReaderOptions.OmitDuplicateNamespaces));
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T16:34:04.393

可能是它遇到问题的 GroupID。由于没有提供 GroupID 的值，我相信它会尝试将它作为`string.Empty`显然不会设置为`int`属性的 a 传递。

您可以尝试以下方法：

```
[XmlIgnore]
public int GroupID 
{
    get { !string.IsNullOrEmpty(GroupIDAsText) ? int.Parse(GroupIDAsText) : 0; }
    set { GroupID = value; }
}

[XmlAttribute("GroupID")
public int GroupIDAsText { get; set; } 
```

.

# lua - Lua 与 table.sort

> ID：12113016
> 
> 赞同：0
> 
> 时间：2012-08-24T16:12:49.253
> 
> 标签：lua

```
local t = {{15,6},{11,8},{13,10}} 
```

我需要在第二个数字上按顺序显示表格

例子：

1 -> {13,10} -- 为什么 10 > 8

2 -> {11,8} -- 为什么 8 > 6

3 -> {15,6}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:16:11.670

[`table.sort`](http://www.lua.org/manual/5.1/manual.html#pdf-table.sort)接受一个用于比较两者的函数（`<`如果没有提供，则使用它）。所以只需传递一个函数，该函数将被调用以对元素进行比较。

```
local t = {{15,6},{11,8},{13,10}}

table.sort(t, function(lhs, rhs) return lhs[2] < rhs[2] end) 
```

# regex - 如何替换锚标记的所有 href 属性中的文本？

> ID：12113022
> 
> 赞同：0
> 
> 时间：2012-08-24T16:13:15.113
> 
> 标签：regex, coldfusion

我需要替换所有 href 值中的文本。我认为正则表达式是这样做的方法，但我不是正则表达式专家。关于如何使用 ColdFusion 执行以下操作的任何想法？

```
<a href="http://www.replace-this-link.com"></a> 
```

所以改为：

```
<a href="{replaced}"></a> 
```

谢谢！

这是问题的更新：我有这段代码，需要以下模式：

```
<cfset matches = ReMatch('<a[^>]*href="http[^"]*"[^>]*>(.+?)</a>', arguments.htmlCode) /> <cfdump var="#matches#">
<cfset links = arrayNew(1)>
<cfloop index="a" array="#matches#">
<cfset arrayAppend(links, rereplace(a, 'need regex'," {clickurl}","all"))>
</cfloop>
<cfdump var="#links#"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:37:07.160

以下是使用[jSoup HTML 解析器](http://jsoup.org)的方法：

```
<cfset jsoup = createObject('java','org.jsoup.Jsoup') />

<cfset Dom = jsoup.parse( InputHtml ) />

<cfset Dom.select('a[href]').attr('href','{replaced}') />

<cfset NewHtml = Dom.html() /> 
```

（在 CF9 和更早版本上，这需要将 jsoup 的 jar 放在 CF 的 lib 目录中，或者使用[JavaLoader](http://javaloader.riaforge.org)。）

使用 HTML 解析器通常比使用正则表达式更好，尤其是因为它更易于维护和理解。

这是使用正则表达式的一种*不完美的方法：*

```
<cfset NewHtml = InputHtml.replaceAll
    ( '(?<=<a.{0,99}?\shref\s{0,99}?=\s{0,99}?)(?:"[^"]+|''[^'']+)(["'])'
    , '$1{replaced}$1'
    )/> 
```

这有望证明为什么使用诸如jsoup之类的工具绝对是要走的路……

*（顺便说一句，上面使用的是 Java 正则表达式引擎（通过[string.replaceAll](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll)），因此它可以使用 CF 的内置正则表达式（rereplace/rematch/etc）中不存在的lookbehind 功能）*

* * *

**更新，基于您提供的新代码示例...**

这是一个如何使用 jsoup 来完成您正在做的事情的示例 - 它可能仍需要一些更新（取决于 {clickurl} 最终将要做什么），但它目前的功能与您的示例代码尝试的功能相同：

```
<cfset jsoup = createObject('java','org.jsoup.Jsoup') />

<cfset links = jsoup.parse( Arguments.HtmlCode )

    <!--- select all links beginning http and change their href --->
    .select('a[href^=http]').attr('href',' {clickurl}')

    <!--- get HTML for all links, then split into array. --->
    .outerHtml().split('(?<=</a>)(?!$)')
    />

<cfdump var=#links# /> 
```

中间部分都是一个 cfset，但为了清楚起见，我将其拆分并添加了注释。（如果您愿意，当然可以使用多个变量和 3 个以上的 cfset 来执行此操作。）

Again, it's not a regex, because what you're doing involves parsing HTML, and regex is not designed for parsing tag-based syntax, so isn't very good at it - there are too many quirks and variations with HTML and describing them in a single regex gets very complicated very quickly.

# php - 通过 PHP 连接 Ftp

> ID：12113024
> 
> 赞同：0
> 
> 时间：2012-08-24T16:13:19.737
> 
> 标签：php, ftp

我必须连接到 moteng 站点 ftp。我已尝试使用以下代码，但我没有连接。

```
$ftp_server="ftp://dropbox.moteng.com/";
$ftp_user_name="xxxx";
$ftp_pass="xxxx";
$conn_id = ftp_connect($ftp_server);
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_pass); 
```

这里登录结果为空。

但相同的登录详细信息在浏览器中工作。

请帮助完成此任务。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T16:15:48.370

直接来自手册：

`The FTP server address. This parameter shouldn't have any trailing slashes and shouldn't be prefixed with ftp://.`

你犯了两个错误，有一个斜杠，并在它前面加上`ftp://`

# java - 删除 class= 属性

> ID：12113025
> 
> 赞同：23
> 
> 时间：2012-08-24T16:13:23.917
> 
> 标签：java, android, simple-framework

我正在使用简单的 xml 库：[http ://simple.sourceforge.net/home.php](http://simple.sourceforge.net/home.php)

@ElementList 注释有问题：如果我像这样使用此注释：

```
@ElementList
protected List<Element> elements; 
```

我的 XML 文件还有一个属性：

```
<elements class="java.util.ArrayList"> 
```

如何删除属性`class="....."`？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-27T15:39:14.347

Attribute 告诉 Simple您使用哪个`class`实现。`List`如果它丢失，Simple 将自己寻找一个合适的类。

一种解决方案是使用`ArrayList`而不是`List`：

```
@ElementList
protected ArrayList<Element> elements; 
```

现在 Simple 不会添加类属性。

另一种方式：

```
@Path("elements")
@ElementList(inline=true)
protected List<Element> elements; 
```

这内联您的列表（不使用*元素*-Tag），但将其放入“新”*元素*-Tag

# matlab - 在 MATLAB 中使用 Geoshow 进行颜色映射

> ID：12113028
> 
> 赞同：2
> 
> 时间：2012-08-24T16:13:30.463
> 
> 标签：matlab, contour

我正在 MATLAB 中的墨卡托（平面）世界地图上绘制轮廓。

我很成功，但是当我使用

```
geoshow('landareas.shp','FaceColor', [0.5 1.0 0,5]) 
```

它消除了地图上的等高线图。

我的代码是：

```
axesm('mercator','MapLatLimit',[-50 90],'MapLonLimit',[0 250])

frame on;

grid on;

plotm(lat,long,'k')

contourfm(x,y,z) 
```

反正有没有申请

```
geoshow('landareas.shp','Display',[0.5 1.0 0.5]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:52:34.703

我不知道您到底想达到什么目标，所以如果我的回答方向错误，我们可以详细说明。

我使用此代码生成带有`contourfm`and的地图`'landareas'`：

```
load geoid;
figure(1) 
axesm ('mercator','MapLatLimit',[-50 90],'MapLonLimit',[0 250])
contourfm(geoid,geoidrefvec, 'LineStyle', 'none');
geoshow('landareas.shp', 'FaceColor', [0.5 1.0 0.3]); 
```

![在此处输入图像描述](../Images/ef269e3a1bd89e7faa46d16c8b7df210.png)

您`geoid`可以拥有自己的地图，但要注意网格点的数量。据我所知，它们必须是 180x360。

一注。您可以考虑使用`coast`而不是`landareas`因为`contourfm`生成所有颜色图并且`'landareas'`也有颜色。因此，如果它适合您，您可以只放置海岸线：

```
load geoid;
figure(2)
axesm ('mercator','MapLatLimit',[-50 90],'MapLonLimit',[0 250])
contourfm(geoid,geoidrefvec, 'LineStyle', 'none');
load coast
plotm(lat, long,'black') % plot the coast on the map 
```

![带海岸的contourfm](../Images/9168f3a1ff54c493a9bc4cd04fef44e6.png)

# primefaces - 使用 @ViewScoped bean 和 s:viewAction 的 primefaces 文件上传

> ID：12113029
> 
> 赞同：0
> 
> 时间：2012-08-24T16:13:37.613
> 
> 标签：primefaces, seam3, view-scope

我正在使用 JBoss 7.1.1.Final、Seam 3.1、CDI、JSF 2、Primefaces 3.4RC1。我有一个包含以下 s:viewAction 的页面：

```
<f:metadata>
            <f:viewParam name="entryId" value="#{selectedEntry}" />
            <s:viewAction
                action="#{entryActionManager.selectEntryById(selectedEntry)}" />
</f:metadata> 
```

entryActionManager 是@ViewScoped，因此在加载页面时会检索entryId GET 参数，并在此@ViewScoped bean 中加载相应的条目。

此外，我在同一页面上有以下 fileUpload 组件：

```
<h:form id="uploadForm" enctype="multipart/form-data">
            <p:fileUpload update=":files:filesTable"
                fileUploadListener="#{bean.uploadFile}" 
                mode="advanced" sizeLimit="2000000" >
            </p:fileUpload>         
    </h:form> 
```

事实证明，如果我想上传文件，@ViewScoped bean 将会死掉并且 s:viewAction 会再次被执行。但是，由于某种原因，它不再具有 GET 参数（entryId），因此它失败了。

我试图设置：

```
<context-param>
    <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
    <param-value>false</param-value>
</context-param> 
```

但它不起作用。您知道任何解决方法吗？一种选择是使用@ConversationScoped，但我更喜欢使用@ViewScoped

谢谢

# mysql - 使用 Spring MVC 连接数据库的最佳方式

> ID：12113030
> 
> 赞同：0
> 
> 时间：2012-08-24T16:13:37.077
> 
> 标签：mysql, spring, hibernate, jpa, spring-mvc

我做了一些研究，但我还没有得出最终结论。

拥有 Spring MVC + tomcat 时连接到 MySQL DB 的最佳方式是什么？

是 Hibernate、JPA、JDBC 还是 Hibernate/JPA？

谢谢，萨拉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T16:26:18.643

[JPA](http://en.wikipedia.org/wiki/Java_Persistence_API)更像是一个标准。[Hibernate](http://www.hibernate.org/)是 JPA 的一种实现，这意味着 Hibernate 是使用 JPA 进行数据库连接的一种可能方式。Eclipselink 是另一种流行的 JPA 实现。（早期版本的 Hibernate 不是 JPA，但您可能不想使用 JPA 之前的 Hibernate。）

所以这些将是选项：

*   休眠/JPA
*   Eclipselink/JPA
*   JDBC

[JDBC](http://en.wikipedia.org/wiki/Java_Database_Connectivity)是一种低级的方法，使用起来麻烦很多，但也比较灵活，有时可以达到更好的性能。我会放弃 JDBC，直到你遇到 JPA 无法解决的问题。

除非您提供有关项目的更多详细信息，否则很难在 Hibernate 和其他 JPA 实现之间进行选择。有一件事是肯定的，Hibernate 很受欢迎（在 SO 上也是如此），如果您遇到特定问题，您将能够获得帮助。

我建议去 Hibernate/JPA。

# javascript - Javascript 继承代码学院

> ID：12113034
> 
> 赞同：0
> 
> 时间：2012-08-24T16:13:54.933
> 
> 标签：javascript, inheritance

使用下面给出的代码，我正在尝试输出 choc 的值和类型，而巧克力的类型和牛奶却未定义。有人可以帮我理解如何输出类型吗？我已经为此工作了一段时间，但它并没有点击我。谢谢！

```
// we set up a base class
function Candy() {
    this.sweet = true;
}

// create a "Chocolate" class with a "type" argument
Chocolate = function(type){
    this.type = type;
};

// say that Chocolate inherits from Candy

Chocolate.prototype = new Candy();

// create a "choc" object using the Chocolate constructor 
// that has a "type" of "milk"

var choc = new Object();
choc.type = "milk";

// print the sweet and type properties of choc
console.log(choc.sweet);
console.log(choc.type); 
```

//////这是我改成的，还是不行//////////

```
// we set up a base class
function Candy() {
    this.sweet = true;
}

// create a "Chocolate" class with a "type" argument
Chocolate = function(type){
    this.type = type;
};

// say that Chocolate inherits from Candy

Chocolate.prototype = new Candy();

// create a "choc" object using the Chocolate constructor 
// that has a "type" of "milk"

var choc = new Chocolate();
choc.type = "milk";

// print the sweet and type properties of choc
console.log(choc.sweet);
console.log(choc.type); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T16:17:27.297

查看代码的最后四行（它不使用上面的任何内容）：

```
// create a "choc" object using the Chocolate constructor 
// that has a "type" of "milk"

var choc = new Object();
choc.type = "milk";

// print the sweet and type properties of choc
console.log(choc.value);
console.log(choc.type); 
```

您既没有创建`Chocolate`对象，也没有打印`sweet`属性（因此得到`undefined`for `value`）。

相反，使用

```
var choc = new Chocolate("milk");
console.log(choc.sweet); // true
console.log(choc.type); // "milk" 
```

您更新的代码对我有用。

# haskell - 奇怪的 Haskell/GHC 输出

> ID：12113037
> 
> 赞同：3
> 
> 时间：2012-08-24T16:14:10.687
> 
> 标签：haskell

有人可以向我解释这个输出吗？我是 Haskell 的新手，不知道为什么会这样。

```
import Data.Char

o=ord 'f'

main=do print (o==102)
    print (mod (102^2087) 9797)
    print (mod (o^2087) 9797) 
```

输出：

```
xxx:~/Arbeitsfläche$ runhaskell st.hs
True
5253
0 
```

GHC 版本 7.4.1，Ubuntu

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T16:26:09.380

这是因为`o`has 类型`Int`的范围有限，因此`(mod (o^2087) 9797)`也是`Int`. 但是，常量`102`是通用数值类型 ( `Num a => a`) 和`(mod (102^2087) 9797)`通用整数类型 ( `Integral a => a`)。当这个泛型整数类型必须解析为具体类型时，这发生在应用 时`print`，默认解析是选择`Integer`无界整数类型。此解决方案的详细信息在[Haskell 2010 报告的](http://www.haskell.org/onlinereport/haskell2010/)[4.3.4 模糊类型和重载数值运算](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-790004.3.4)的默认值部分中进行了描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:23:59.327

首先，[`ord`](http://zvon.org/other/haskell/Outputchar/ord_f.html)是一个函数，它返回一个字符的数字表示，在本例中为 102。

1.  您的第一行 ( `print (o==102)`) 正在检查是否`o`等于`102`它，因此输出`True`。

2.  第二行 ( `print (mod (102^2087) 9797)`) 将两个参数应用于[`mod`](http://zvon.org/other/haskell/Outputprelude/mod_f.html)函数。`mod`当第一个参数除以第二个参数时，该函数返回余数。这是[整数除法](http://mathworld.wolfram.com/IntegerDivision.html)，因此不允许使用小数部分。插入符运算符 ( `^`) 表示采用[指数](http://rosettacode.org/wiki/Exponentiation_operator#Haskell)。即“102 的 2087 次方”。

3.  最后一行 ( `print (mod (o^2087) 9797)`) 与第二行相同，但参数不同。

希望这很清楚！

# sql-server-2008 - 使用参数化存储过程使用新 XML 更新 XML 列

> ID：12113040
> 
> 赞同：0
> 
> 时间：2012-08-24T16:14:25.777
> 
> 标签：sql-server-2008

这对我来说是尝试在 SQL Server 2008 数据库中使用 XML 列的新事物。我看过一些与此相关的帖子，但我觉得很难。

让我以最简单的形式提出我的问题。

1.  我有一个数据库表 dbo.cXML，其中包含 EmailID(nVarchar(128))、ClientID(int) 和 cycleXML(XML) 列。

2.  我的中间件组件实现了复杂的业务逻辑，逻辑处理后吐出XML。

3.  现在我有一个需要以下内容的要求：

a) 带有参数的存储过程，用于对上表执行检查，以查看给定的 EmailID 和客户端 ID 是否已经存在 XML。如果存在记录，请使用更新查询来更新整个 XML，否则只需插入 XML。

b) 一个存储过程，能够根据请求将完整的 XML 发送回我的中间件组件。

有人可以帮我理解伪代码。感谢你的帮助。

谢谢，亚加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:01:24.573

不完全确定您的要求 3b 是什么意思，但这对您有帮助吗？？？

```
IF EXISTS (SELECT 1 FROM dbo.cXML WHERE EmailID = @YourEmailID AND ClientID = @YourClientID)
BEGIN
    UPDATE dbo.cXML
    SET cycleXML = @YourXML
    WHERE EmailID = @YourEmailID AND ClientID = @YourClientID
END
ELSE BEGIN
    INSERT INTO dbo.cXML (EmailID, ClientID, cycleXML)
    SELECT @YourEmailID, @YourClientID, @YourXML
END 
```

# php - Zend Navigation with Smarty

> ID：12113042
> 
> 赞同：0
> 
> 时间：2012-08-24T16:14:57.203
> 
> 标签：php, zend-framework, smarty, zend-navigation

我想使用 Zend_Navigation 在 Smarty 模板中创建面包屑。

到目前为止我做了什么：

```
$config = new Zend_Config_Xml(APPLICATION_PATH.'/configs/navigation.xml');
$navigation = new Zend_Navigation($config); 
```

如何在模板中使用 $navigation？

通常在布局导航中

```
$this->navigation()->breadcrumbs()->setLinkLast(false)->setMinDepth(0)->render(); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:52:10.577

也许是这样：

```
$smarty->assign('breadcrumbs', $this->navigation()->breadcrumbs()->setLinkLast(false)->setMinDepth(0)->render()); 
```

然后使用

```
$breadcrumbs 
```

在你的 smarty 模板中

# asp.net - “Internet Explorer 无法显示网页”而不是 YSOD？

> ID：12113043
> 
> 赞同：0
> 
> 时间：2012-08-24T16:14:59.433
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, iis, iis-7

在 Internet Explorer 9 中测试我的 ASP.NET MVC 3 应用程序时，我收到一般的“Internet Explorer 无法显示网页”错误，而不是黄屏。但是，错误会被抛出到事件查看器。我怎样才能恢复我的黄屏，以便在错误发生时可以在浏览器中看到我的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:34:46.113

阅读您对 Josh 的评论我想知道它的 WebForms + MVC 而不是 MVC + WebForms 项目，如果是这样的话，我在这里找到了一些信息[http://forums.asp.net/t/1510043.aspx/3/10](http://forums.asp.net/t/1510043.aspx/3/10)可能会解决这个问题。为方便起见，我总结了以下有用的部分。

尝试将其添加到 web.config 的处理程序部分：

```
<add name="ASP.NET MVC" path="*.mvc" verb="*" modules="IsapiModule" scriptProcessor="C:\Windows\Microsoft.NET\Framework\v4.0.21006\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" preCondition="classicMode,runtimeVersionv4.0,bitness32" /> 
```

然后在你的 global.asax 文件中：

```
routes.MapRoute(
            "Default",                                              // Route name
            "{controller}.mvc/{action}/{id}",                          // URL with parameters
            new { controller = "Home", action = "Index", id = "" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:18:54.647

首先，您是否在 IE 中选中了不显示错误消息的选项？其次，您是否在 web.config 中捕获错误？第三，您是否将 IIS 设置为向客户端返回错误消息？

# c# - 字符串操作的更好选择 - .NET

> ID：12113044
> 
> 赞同：3
> 
> 时间：2012-08-24T16:15:01.943
> 
> 标签：c#, string

我正在`string`为 C# 中的一个项目处理大量数据。我对应该使用哪种方法来处理我的`string`数据感到困惑。

第一种方法：

```
StringBuilder myString = new StringBuilder().Append(' ', 1024);

while(someString[++counter] != someChar)
    myString[i++] += someString[counter]; 
```

第二种方法：

```
String myString = new String();

int i = counter;
while(soumeString[++counter] != someChar);
myString = someString.SubString(i, counter - i); 
```

两者中哪一个会更快（和高效）？考虑到我正在使用的字符串是巨大的。

字符串已经在`RAM`. 字符串的大小可以从 32MB 到 1GB 不等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T16:18:44.070

您应该使用`IndexOf`而不是在循环中进行单个字符操作，并将整个字符串块添加到结果中：

```
StringBuilder myString = new StringBuilder();
int pos = someString.IndexOf(someChar, counter);
myString.Append(someString.SubString(counter, pos)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T16:22:02.370

对于“巨大”的字符串，采用流式方法而不是将整个内容加载到内存中可能是有意义的。为了获得最佳的原始性能，您有时可以通过使用指针数学来搜索和捕获字符串片段，从而加快速度。

为了清楚起见，我说的是两种完全不同的方法。

**1 - Stream**
OP 没有说明这些字符串有多大，但将它们加载到内存中可能是不切实际的。也许它们是从文件、连接到数据库的数据读取器、活动网络连接等中读取的。

在这种情况下，我会打开一个流，向前读取，在 a 中缓冲我的输入，`StringBuilder`直到满足条件。

**2 - Unsafe Char Manipulation**
这要求你*有*完整的字符串。您可以非常简单地获取字符串开头的 char*：

```
// fix entire string in memory so that we can work w/ memory range safely
fixed( char* pStart = bigString ) 
{
    char* pChar = pStart; // unfixed pointer to start of string
    char* pEnd = pStart + bigString.Length;
} 
```

您现在可以递增`pChar`和检查每个字符。您可以根据自己的选择缓冲它（例如，如果您想检查多个相邻字符）或不缓冲它。一旦确定了结束内存位置，您现在就有了可以使用的数据范围。

[c# 中的不安全代码和指针](http://msdn.microsoft.com/en-us/library/t2yzs44b)

**2.1 - 更安全的方法**

**如果**您熟悉不安全代码，它会非常快速、富有表现力和灵活。如果不是，我仍然会使用类似的方法，但没有指针数学。这类似于@supercat 建议的方法，即：

*   获取一个字符 []。
*   一个字一个字地通读。
*   在需要的地方缓冲。`StringBuilder`对此有好处；设置初始大小并重用实例。
*   在需要的地方分析缓冲区。
*   经常转储缓冲区。
*   当缓冲区包含所需的匹配项时，对缓冲区执行某些操作。

*以及对不安全代码的强制性免责声明：*绝大多数情况下，框架方法是更好的解决方案。它们是安全的、经过测试的，并且每秒调用数百万次。不安全的代码将所有责任都推给了开发人员。它不做任何假设；成为一个优秀的框架/操作系统公民取决于您（例如，不覆盖不可变字符串、允许缓冲区溢出等）。因为它不做任何假设并去除了保护措施，所以它通常会产生性能提升。由开发人员决定是否确实有好处，并决定这些好处是否足够显着。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T18:17:34.467

根据 OP 的要求，这是我的测试结果。

假设：

*   大字符串已经在内存中，不需要从磁盘读取
*   目标是不使用任何本机指针/不安全块
*   “检查”过程非常简单，不需要像 Regex 这样的东西。现在简化为单个字符比较。下面的代码可以很容易地修改为一次考虑多个字符，这对两种方法的相对性能应该没有影响。

    ```
    public static void Main()
    {
        string bigStr = GenString(100 * 1024 * 1024);

        Stopwatch sw = Stopwatch.StartNew();
        for (int i = 0; i < 10; i++)
        {
            int counter = -1;
            StringBuilder sb = new StringBuilder();
            while (bigStr[++counter] != 'x')
                sb.Append(bigStr[counter]);
            Console.WriteLine(sb.ToString().Length);
        }
        sw.Stop();
        Console.WriteLine("StringBuilder: {0}", sw.Elapsed.TotalSeconds);

        sw = Stopwatch.StartNew();
        for (int i = 0; i < 10; i++)
        {
            int counter = -1;
            while (bigStr[++counter] != 'x') ;

            Console.WriteLine(bigStr.Substring(0, counter).Length);
        }
        sw.Stop();
        Console.WriteLine("Substring: {0}", sw.Elapsed.TotalSeconds);
    }

    public static string GenString(int size)
    {
        StringBuilder sb = new StringBuilder(size);
        for (int i = 0; i < size - 1; i++)
        {
            sb.Append('a');
        }
        sb.Append('x');
        return sb.ToString();            
    } 
    ```

结果（发布版本，.NET 4）：

**StringBuilder** ~7.9 秒

**子串**~1.9 秒

StringBuilder 的速度始终慢 > 3 倍，具有各种不同大小的字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T16:30:42.567

有一个`IndexOf`操作可以更快地搜索`someChar`，但我假设您找到所需长度的实际功能比这更复杂。在这种情况下，我建议复制`someString`到 a `Char[]`，进行搜索，然后使用`new String(Char[], Int32, Int32)`构造函数生成最终字符串。索引 a将比索引 a或that`Char[]`更有效，除非您希望通常只需要字符串的一小部分，将所有内容复制到将是“胜利”（当然，除非您可以简单地使用类似的东西）。`String``StringBuilder``Char[]``IndexOf`

即使字符串的长度通常比感兴趣的长度大得多，您最好还是使用`Char[]`. 将 预初始化`Char[]`为某个大小，然后执行以下操作：

```
字符 [] 温度 = 新字符 [1024]；
诠释我=0；
while (i < theString.Length)
{
  int subLength = theString.Length - i;
  if (subLength > temp.Length) // 可以对 subLength 施加其他约束，前提是
    subLength = temp.Length; // 它大于零。
  theString.CopyTo(i, temp, 0, subLength);
  ...对数组做一些事情
  i+=子长度；
}

```

完成后，您可以使用单个 SubString 调用来构造一个包含原始字符的字符串。如果您的应用程序需要创建一个字符与原始字符不同的字符串，您可以使用 a `StringBuilder`and，在上述循环中，使用该`Append(Char[], Int32, Int32)`方法将处理后的字符添加到其中。

另请注意，当上述循环构造时，可以决定`subLength`在循环中的任何点减少，只要它不减少到零。例如，如果要查找字符串是否包含由括号括起来的 16 位或更少位的质数，则可以从扫描开括号开始；如果找到它，并且正在寻找的数据可能会超出数组，则设置`subLength`为 open-paren 的位置，然后重新循环。这种方法将导致少量的冗余复制，但不会太多（通常没有），并且无需跟踪循环之间的解析状态。一个非常方便的模式。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-24T16:20:53.720

在操作字符串时，您总是希望使用 StringBuilder。这是因为字符串是不可变的，所以每次都需要创建一个新对象。

# java - 我可以在 ActionListener 上使用 get 和 set 吗？为什么不工作？

> ID：12113045
> 
> 赞同：2
> 
> 时间：2012-08-24T16:15:12.730
> 
> 标签：java, concurrency, actionlistener

见下文：

/*这是我的主要*/

```
package br.com.general;

public class Main {

    public static void main(String[] args) {

        Wind w = new Wind();
        w.start();

        while(true){
            //System.out.printf("%b\n", w.button());
            if(w.button()){
                System.out.printf("xx %b\n", w.button());
            }
        }

    }

} 
```

/*这是我的一键式 JFrame 窗口*/

```
package br.com.general;

import javax.swing.JButton;
import javax.swing.JFrame;

public class Wind extends JFrame{

    private static final long serialVersionUID = 1L;
    Act a = new Act();

    public Wind() {
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        JButton B = new JButton("on");

        getContentPane().setLayout(null);  

        B.setBounds(10, 10, 50, 30);
        B.addActionListener(a);

        add(B);
        setSize(100, 100);
    }

    public void start() {
        setVisible(true);
    }
    public boolean button(){
        return(a.button());
    }
    public void buttonOk(){
        a.zero();
    }
} 
```

/*最后这是我的按钮的 ActionListener */

```
package br.com.general;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class Act implements ActionListener {
    boolean s;
    public void actionPerformed(ActionEvent ae) {
        s = true;

    }
    public boolean button(){
        return(s);
    }
    public void zero(){
        s = false;
    }
} 
```

如果你运行，你会看到它不起作用，但如果你删除“//”并启用“System.out.printf(”%b\n", w.button() );" 它开始运行......为什么？有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T23:21:44.323

这个问题问得好！在理想情况下，无论第一个代码是否`System.out.println(…)`被注释掉，您的代码都可以毫无问题地运行。

问题在于 Java 优化了您的代码，并且*并不*`s`总是在类中检索您的标志的当前值`Act`。

为了规避这种（在这种情况下是错误的）优化，您可以使用`volatile`修饰符：`volatile boolean s;`. 这要求 JVM*始终*从内存中检索实际值并防止对其进行缓存，请参阅[*The Java Tutorials*](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html)[中的 Atomic Access](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html)*。*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T23:27:38.773

看起来你有一个消耗所有资源的硬无限循环。您可能应该在循环中插入小延迟（例如，10-100 毫秒）。这可以使用 Thread.wait() 方法来完成。在您的情况下，延迟是由 System.out.printf() 产生的，因为控制台输出非常慢。*

# gradle - 在 gradle 中发布到常春藤存储库时如何解决 flatDir 瞬态依赖关系？

> ID：12113048
> 
> 赞同：1
> 
> 时间：2012-08-24T16:15:15.057
> 
> 标签：gradle, ivy

我有一个由 gradle 构建的项目，该项目将工件发布到本地常春藤存储库。从历史上看，我们纯粹将 gradle 与 flatDir 存储库一起使用，因为我们希望将所有内容都保留在本地。但是，我开始看到使用 ivy 比到处复制生成的工件的好处。

我可以轻松地将工件发布到 ivy，但其他使用存储库来拉取此工件的项目在其瞬态 flatDir 依赖项上失败。

我正在尝试找出处理这些瞬态依赖关系的最佳方法。很明显，任何使用工件的人都需要它们，因为它们有工件使用的类。我应该将我的工件的瞬态依赖项发布到 ivy 吗？最好的方法是什么？

我已经尝试（我认为是 hack）将 flatLib 目录中的 jar 声明为工件本身：

```
group 'utils'

repositories {
    flatDir {
        dirs 'lib'
        name 'librepo'
    }
}

dependencies {
    compile ":antlr:3.4"
    // ...
}

artifacts {
    project.repositories.librepo.dirs.each { dir ->
        dir.eachFile {
            if (it.isFile()) {
                archives file(it)
            }
        }
    }
} 
```

但是，包含工件的项目会失败，因为 flatDir 文件被上传到与主工件相同的组（在本例中为“utils”），但在依赖项部分中定义为没有组，因此 ivy 中的条目也是如此。 xml 没有 org 值，即

```
<dependency org="" name="antlr" rev="3.4" conf="compile->default"/> 
```

我想我错过了一些东西，对于如何混合 flatDir 和 ivy 的任何帮助将不胜感激。

我是否应该将 flatDir 依赖项迁移到 ivy 以便它们正确解析，然后我可以更改我的构建以仅使用它发布到的 ivy 存储库作为源？我真的想不出更好的方法，但如果我这样做，它会产生相当大的影响，因为每个依赖项都必须从主项目目录的 lib 目录中移出到 ivy，而我只是真的想使用 ivy 存储库来管理我们生成的工件，而不是第三方库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:16:39.140

为了完整起见，我找不到合适的解决方案，最终在[本文](http://www.drillio.com/en/software-build/apache-ivy/create-local-repository-guide/)的帮助下也将所有 lib/jar 移动到了 ivy 。尽管如此，这个问题最终还是为我赢得了风滚草奖！

# python - 如何自动销毁django测试数据库

> ID：12113050
> 
> 赞同：59
> 
> 时间：2012-08-24T16:15:23.567
> 
> 标签：python, database, django, testing, hudson

我目前正在尝试使用 Hudson CI 自动化 Django 测试，并且正在努力寻找一个选项，如果它已经存在，它将自动销毁测试数据库（通常它会要求确认销毁它，自动测试显然无法提供）。

我们欢迎所有的建议！

干杯，R

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-08-24T16:54:31.060

使用 --help 查看测试命令的文档：

```
>>> ./manage.py test --help   
Usage: ./manage.py test [options] [appname ...]

Runs the test suite for the specified applications, or the entire site if no apps are specified.

[...]

--noinput             Tells Django to NOT prompt the user for input of any
                      kind. 
```

并使用 --noinput 默认销毁测试数据库；）

# ios - 有没有办法不需要使用 Core Data iOS 重新生成模型

> ID：12113053
> 
> 赞同：0
> 
> 时间：2012-08-24T16:15:55.290
> 
> 标签：ios, core-data, model

假设我在 Model.xcdatamodeld 中生成了一个实体（用户），其属性为 firstName、lastName、dateCreated 等。然后我生成了一个User.h，User.m

后来我意识到我忘了在 User 模型中添加一个额外的属性。

现在，每次我添加新属性时都必须删除 User.h 和 User.m，因为不知何故编译器无法识别我输入的新属性。

有没有办法注意删除生成的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:22:17.043

如果您只是添加一个新属性，只需在您正在生成的文件中添加一个新属性，并在实现文件上添加@dynamic propertyName。

在一个不相关的注释上：确保将类前缀分配给从模型生成为 NSManagedObject 子类的类。“用户”可能是一个系统类，您会收到随机的运行时错误消息和崩溃。

# php - 在一个查询中插入后获取数据库行

> ID：12113054
> 
> 赞同：0
> 
> 时间：2012-08-24T16:15:58.133
> 
> 标签：php, mysql, sql, database

目前我有一个脚本，可以将数据添加到数据库中。

输入数据后，我想立即获取该行。

例如，如果我有这样的查询，其中有两个单独的：

```
 $sql = "INSERT INTO  table SET columnA '".$this->db->escape($columnA)."'";
    $query = $this->db->query($sql);
    $sql = "SELECT * FROM table";
    $query = $this->db->query($sql);
    return $query->db->row; 
```

我希望能够在插入后立即获取该数据库行。我必须进行全新的查询还是有更快的方法？如果有帮助，我正在使用 OpenCarts API。

谢谢彼得

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T16:20:51.853

```
INSERT INTO table (a,b,c) VALUES ('a','b','c');
SELECT * FROM table WHERE your_table_primary_key = LAST_INSERT_ID(); 
```

PHP：

```
$sql  = "INSERT INTO  table SET columnA '".$this->db->escape($columnA)."';";
$sql .= "SELECT * FROM table WHERE your_table_primary_key = LAST_INSERT_ID();"
$query = $this->db->query($sql);
return $query->db->row; 
```

# mysql - 访问：CrossTab 查询增加数据文本“长度”？

> ID：12113055
> 
> 赞同：1
> 
> 时间：2012-08-24T16:16:02.343
> 
> 标签：mysql, database, ms-access, text, string-length

我目前有一个紧迫的问题。

我有一个 mysql 后端 MSAccess 前端。我刚刚对我的数据库进行了规范化，因为旧结构需要太多维护，而且理论上是糟糕的设计。

我最近发现了 CrossTab Query，发现它是天赐之物。

然而，一个小问题……刚刚引起了我的注意。其中一列显示一个文本字段。这个文本字段是一个没有设置长度的 mysql "TEXT" 数据类型。

然而，这些文本字段的 CrossTab 呈现似乎确实有一个固定的长度。

有没有办法增加 CrossTab 的文本集长度？我似乎找不到一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:28:23.187

我相当确定交叉表中的字符限制为 255 个字符，但是，您可以将保存的交叉表连接到表或查询以引用全文。您可以在 Jet/ACE 后端使用 Access，但我没有使用 MySQL 进行测试。

# java - 库 api 设计：多种方法的额外参数

> ID：12113057
> 
> 赞同：0
> 
> 时间：2012-08-24T16:16:04.853
> 
> 标签：java, api, oop

我正在为现有的 REST API 编写 Java API 库。

REST API 有一些 postOperations（getPosts、getUserPosts、getGlobalPosts 等）所以我有一个 postOperations 类来公开它。现在我需要在所有操作中添加添加一组参数（generalParameters）的选项。

您认为更好的解决方案是什么？

1.  为当前函数添加一个参数，这意味着有时用户将不得不传递 null（实际上是 80% 的时间）。
2.  为每个获取 2 个参数的操作添加一个重载函数（这意味着向该类添加 6-7 个重载方法）

我知道这两种方式都有效。在大多数应用程序中这不是主要问题，但是在编写其他人会使用的库时，它对我来说似乎更重要。

你怎么看？什么是更好的公开 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:19:10.067

我会做这样的事情：

```
public void handle(some parameters) {
    //handle params
}
public void handle() {
    handle(null, null, -1, w/e);
} 
```

根据您的编辑：

此处的代码使用选项 2；如果您添加另一个不接受任何内容但为它们传递 null 的重载方法，它们将永远不必传递 null 值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:08:04.227

在这两个选择之间，我更喜欢＃1，除非向后兼容性是一个问题。我认为让图书馆用户了解参数并迫使他们就是否提交参数做出明智的决定是件好事。

另一种方法是使用上下文对象进行更细粒度的控制。与其将 generalParameters 视为数据结构，不如将它们视为上下文的属性：

```
class PostOperations {
  public void getPosts() {
    return getPostContext().getPosts();
  }

  public void getPostContext() {
    return new PostContext();
  }
}

class PostContext {
  public void setGeneralProperty1() {...}
  public void setGeneralProperty2() {...}
  public void getPosts() {...}
} 
```

您可以决定如何对各种 get*Post 方法进行建模。根据它们在您的系统中的含义，您可以让 PostContext 拥有所有这些方法，或者您可以在 PostContext 上设置一个影响其 getPosts() 行为的状态（例如`PostContext.setUserOnly(true)`），或者您可以使用类层次结构对其进行建模（例如`class UserPostContext extends PostContext`）

# python - Windows Python 2.5 Traceback.py 无类型错误

> ID：12113059
> 
> 赞同：0
> 
> 时间：2012-08-24T16:16:10.703
> 
> 标签：python, windows, trace, python-2.5

您好，我在 Windows 上运行 Python 2.5，每当我的应用程序出现异常而不是看到调试信息时，我都会在 traceback.py 文件本身中收到错误。任何人都知道此 mb 补丁或替换文件的修复程序。

```
Traceback (most recent call last):
  File "C:\Python25\lib\logging\__init__.py", line 744, in emit
    msg = self.format(record)
  File "C:\Python25\lib\logging\__init__.py", line 630, in format
    return fmt.format(record)
  File "C:\Python25\lib\logging\__init__.py", line 426, in format
    record.exc_text = self.formatException(record.exc_info)
  File "C:\Python25\lib\logging\__init__.py", line 398, in formatException
    traceback.print_exception(ei[0], ei[1], ei[2], None, sio)
  File "C:\Python25\lib\traceback.py", line 126, in print_exception
    lines = format_exception_only(etype, value)
  File "C:\Python25\lib\traceback.py", line 176, in format_exception_only
    stype = etype.__name__
AttributeError: 'NoneType' object has no attribute '__name__' 
```

===编辑===

在邮件列表中发现同样的错误似乎是过时的答案

[http://mail.python.org/pipermail/python-dev/2006-September/068975.html](http://mail.python.org/pipermail/python-dev/2006-September/068975.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:17:44.030

可能的原因：

1.  `logging.exception()`没有活动异常时调用
2.  `exc_info=1`当没有活动异常时，使用 调用日志记录函数。
3.  使用日志功能调用`exc_info=(None, None, None)`日志功能（例如，如果手动执行异常日志记录）。

您不应该`logging.exception`在 except 块之外使用。

异常是由`None`传递给 的异常类型引起的`traceback.print_exception`，这意味着没有要处理的活动异常。

同时，您链接到的新闻组帖子表明，标准库中的回归导致了特定的回溯。您可能想尝试将您的 Python 升级到 2.5.1，它解决了这个特定问题。

# backbone.js - Backbone.ModelBinder：为什么我必须点击提交两次？

> ID：12113062
> 
> 赞同：0
> 
> 时间：2012-08-24T16:16:11.407
> 
> 标签：backbone.js, backbone-events

我正在使用 Backbone 和 Backbone.ModelBinder。

我有一堆通过 BackboneModelBinder 绑定的文本字段。一切都按预期工作，但是当我对文本字段进行更改并且在点击“保存”按钮之前没有先取消关注该字段（单击输入字段）时，我必须点击“保存”按钮两次 - 一次取消关注字段，然后第二次实际触发保存按钮处理程序（应该第一次触发）

（保存是一个标准的 html 按钮，其中绑定了主干事件）。

有谁知道为什么会这样？

我希望这是有道理的：|

感谢您的任何帮助或指导

-柯克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:27:02.867

这是因为 ModelBinder 默认情况下将新值设置为模型在“模糊”或“更改”事件上的属性（这取决于输入的类型）。您可以通过更改源代码来修改此行为，在这两种方法中添加 keyup 作为绑定事件：

```
 _bindViewToModel:function () {
        $(this._rootEl).delegate('', 'change keyup', this._onElChanged);
        // The change event doesn't work properly for contenteditable elements - but blur does
        $(this._rootEl).delegate('[contenteditable]', 'blur keyup', this._onElChanged);
    },

    _unbindViewToModel: function(){
        if(this._rootEl){
            $(this._rootEl).undelegate('', 'change keyup', this._onElChanged);
            $(this._rootEl).undelegate('[contenteditable]', 'blur keyup', this._onElChanged);
        }
    }, 
```

# sharepoint-2010 - Sharepoint 托管元数据权限

> ID：12113067
> 
> 赞同：1
> 
> 时间：2012-08-24T16:16:39.547
> 
> 标签：sharepoint-2010, taxonomy

我的网站上有一个托管元数据字段字段，它指向术语库​​。这看起来像我在下面显示的内容。是否可以允许网站所有者使用该术语库中的所有内容标记页面，但限制其他所有人仅标记“主页”下方的内容（即他们可以使用“IT”、“我们的服务”、“HR”标记页面？等但不是“家”）？

基本上，我将任何带有“主页”标签的内容“汇总”到我网站的主页上，并且我不希望任何老用户能够将内容放到主页上。

提前致谢

```
Internet
   Home
       HR
          What we do
          Opening hours
       IT
          Our services
      etc. 
```

# python - Python单例类成员变量不允许重新分配其值？

> ID：12113069
> 
> 赞同：1
> 
> 时间：2012-08-24T16:16:51.403
> 
> 标签：python, singleton

我有一个 config.py 单例模块，其中包含：

```
class Singleton:
    """"""
    def __init__(self, name, bases, namespace):
        self._obj=type( name, bases, namespace )()

    def __call__(self):
        return self._obj

class ConfigObj(object):
    """"""
    __metaclass__ = Singleton

    def __init__(self):
        """"""
        self._dataOne = '0010'
        self._dataTwo = None

        print self._dataOne

    def setData(self,val)
        """"""
        self._dataTwo = val

    def getData(self)
        """"""
        return self._dataTwo

def Config():
    """Create instance of config singleton"""
    ConfigObj()

def ConfigSetData(val):
    """Set config data"""
    ConfigObj().setData(val)

def ConfigGetData():
    """Get config data"""
    return ConfigObj().getData() 
```

我有一个 suite.py 模块，其中包含：

```
Config()
ConfigSetData('22')
print ConfigGetData() 
```

运行时，会按预期创建单例“ConfigObj”，并且单例对象 ID 仍然存在。在调试期间，似乎 self._dataTwo 被重新分配。

但是，当调用 ConfigGetData() 函数时，它显示 self._dataTwo 的值仍被分配为 None 并且打印语句失败并出现“非类型”异常。

关于如何对 self._dataTwo 进行更改的任何建议都受到欢迎？

# c++ - 如果仅部分覆盖重载函数，则多态性不起作用

> ID：12113074
> 
> 赞同：6
> 
> 时间：2012-08-24T16:17:12.963
> 
> 标签：c++, inheritance, polymorphism, overloading

今天我感觉自己像个菜鸟：

```
class Base
{
public:
    virtual void foo(int)=0;
    virtual void foo(int, int) {}
    virtual void bar() {}
};

class Derived : public Base
{
public:
    virtual void foo(int) {}
};

void main()
{
    Derived d;
    d.bar(); // works
    d.foo(1); // works
    d.foo(1,2); // compiler error: no matching function call
} 
```

我希望`d`继承`foo(int, int)`自`Base`，但事实并非如此。那么我在这里错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T16:19:35.147

这是因为同名的基函数被隐藏了。

您需要使用`using`未覆盖的功能：

```
class Derived : public Base
{
public:
    using Base::foo;
    virtual void foo(int) {}  //this hides all base methods called foo
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T16:19:17.377

它被称为`Name hiding`。`Base::foo(int, int)`你通过提供隐藏`Derived::foo(int)`

# java - 在java中，我如何获得滑块改变的值？

> ID：12113082
> 
> 赞同：0
> 
> 时间：2012-08-24T16:17:40.297
> 
> 标签：java, swing, jslider

我有`JSlider`一个最小值为 0，最大值为 100。它的当前值为 0。

在运行时如何获得滑块移动的每个值？例如，使用我当前的代码，如果我将滑块从 0 快速更改为 16，它会显示如下输出：

```
0
1
2
3
4
7
16 
```

它跳过了 8 到 15，因为我将滑块直接从 7 快速移动到了 16。但我不希望这种情况发生。我希望打印滑块在其运动中遇到的每个值。

我还希望程序捕获滑块在其运动中的最后一个值。

这是我的代码：

```
p1.addChangeListener(new ChangeListener() 
{ 
   @Override public void stateChanged(ChangeEvent e) 
   { 
      if (p1.getValueIsAdjusting())
      { 
        System.out.println(p1.getValue()); 
      } 
   } 
}); 
```

谁能解释为什么这没有打印每个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:35:48.020

大多数人有相反的问题，他们只想要最终的 JSlider 值而不是中间值。

在 Swing 中不能保证每个中间值都会调用您的更改侦听器。

保留之前的JSlider值，确定最终值，自己计算中间结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T00:44:19.597

> 在运行时如何获得滑块移动的每个值？

由于 a`JSlider`实际上是一维的，我建议：

1.  获取起始值
2.  获取最终值
3.  从用于滑块的模型中获取介于两者之间的每个值。

第 3 点的结果似乎是您问题的答案。

当然，既然这是一个微不足道的答案，那么它就会提出 64 美元的问题......

*您想为用户提供什么应用程序功能？* 像您向最终用户解释它一样解释它，以获得更好的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T16:54:22.807

如果我没记错的话，对`getValueIsAdjusting()`你看到的行为负责。当用户拖动滑块时，它可以避免不必要的代码执行。

如果删除该`if`子句，您应该会看到每个值。

# android - DownloadManager - 如果文件已存在，则重命名下载

> ID：12113087
> 
> 赞同：0
> 
> 时间：2012-08-24T16:18:03.867
> 
> 标签：android, file, rename, exists

```
public void onClick(DialogInterface dialog, int id) {

    Uri u = Uri.parse(url);
    File f = new File("" + u);

    DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));
    request.setTitle("");
    request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, f.getName());

    // just my bullshit here please correct here                    
    if (f.exists()) {
        File sdcard = Environment.getExternalStorageDirectory();
        File from = new File(sdcard,f.getName());
        File to = new File(sdcard,"*"+f.getName());
        from.renameTo(to);
    }

    DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
    manager.enqueue(request);

                    } 
```

我有这个小代码，然后当单击它从 url 下载文件但是当文件已经下载并且具有相同的名称时它只是显示失败，我如何检查文件是否已经存在并让 DownloadManager 以不同的名称下载该文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:38:47.857

默认情况下，当`DownloadManager`文件存在时重命名文件。它将`-[NUMBER]`在文件名的末尾附加一个。

于是`hello.jpg`转向`hello-1.jpg`。

也许看看[这个例子](http://www.vogella.com/blog/2011/06/14/android-downloadmanager-example/)。我使用它并且它有效。

# jquery - $.each 和 ko.utils.arrayForEach 之间的区别

> ID：12113093
> 
> 赞同：8
> 
> 时间：2012-08-24T16:18:31.413
> 
> 标签：jquery, knockout.js

我试图了解 $.each 和 ko.utils.arrayForEach 之间的区别，还有比数组迭代更多的东西吗？

我正在使用 ko.utils.arrayForEach 因为我正在使用淘汰赛 js，但我只是好奇。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T16:59:33.013

`ko.utils.arrayForEach`不依赖于 jQuery，只是编写如下内容的捷径：

```
for (var i = 0, j = myArray.length; i < j; i++) {
    someMethod(myArray[i]);
} 
```

它仅适用于数组。jQuery 不是 Knockout 的严格依赖。如果它可用，那么 Knockout 将在几个地方使用它（字符串到 DOM 解析和事件处理）。

`$.each`需要 jQuery（显然）并且旨在更加灵活。它可以遍历对象以及数组中的属性并使用 jQuery 对象。它还会在您循环时为您提供索引。

# java - 找不到mail.jar，Netbeans

> ID：12113094
> 
> 赞同：2
> 
> 时间：2012-08-24T16:18:31.997
> 
> 标签：java, netbeans, netbeans-7

签出一个 java 项目，我收到*mail.jar 无法找到*的警报。

我认为这与`javax.mail`库有关，但我对 java 不是很熟悉。

这是一个标准的java库吗？如果是这样，我在哪里可以找到它？以及如何将其链接到我的 netbeans 项目中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T18:57:26.860

`javax.mail`正如您所提到 的，JavaMail API 已打包在其中。

针对您的问题：

> 这是一个标准的java库吗？

它在 Java SE 中是可选的，并且包含在 Java EE 中。这是来自[Oracle 关于 JavaMail API 的文档](http://www.oracle.com/technetwork/java/javamail/index.html)。

> 如果是这样，我在哪里可以找到它？

您可以从 Oracle 下载 JavaMail API JAR：[JavaMail API](http://www.oracle.com/technetwork/java/javamail/index-138643.html)

我下载了 JavaMail 1.4.5。它以 ZIP 文件的形式出现，并且`mail.jar`文件中包含一个`javamail1_4_5.zip`文件。

`mail.jar`包含 JavaMail API 和实现。

> 以及如何将其链接到我的 netbeans 项目中？

由于我没有关于您的 Java 项目的任何具体信息或详细信息，因此我无法向您提供有关要下载哪个确切版本的 JavaMail API 以及如何将其集成到您的 NetBeans 项目中的更多信息。但是，您应该能够从我上面提供的链接中获得几乎任何现代版本的 JavaMail API。

# .net - 需要帮助四舍五入到小数点后 2 位

> ID：12113096
> 
> 赞同：20
> 
> 时间：2012-08-24T16:18:39.883
> 
> 标签：.net, vb.net, math-functions

为什么当我执行以下操作时...

```
Math.Round(0.75, 1, MidpointRounding.AwayFromZero) 
```

我得到 0.8

但是当我执行以下操作时...

```
Math.Round(0.575, 2, MidpointRounding.AwayFromZero) 
```

我没有得到 0.58。相反，我得到 0.57。我想要任何 5 及以上的四舍五入，所以 0.575 应该是 0.58。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-24T16:29:44.073

问题是您不能将 0.575 完全表示为二进制浮点数（例如双精度数）。虽然我并不确切知道，似乎最接近的表示可能只是有点低，所以在四舍五入时它使用真实的表示并向下舍入。

如果您想避免此问题，请使用更合适的数据类型。`decimal`会做你想做的事：

```
Math.Round(0.575M, 2, MidpointRounding.AwayFromZero) 
```

结果：`0.58`

0.75 正确的原因是它很容易用二进制浮点表示，因为它是简单的 1/2 + 1/4（即 2^-1 +2^-2）。通常，任何 2 的有限幂和都可以用二进制浮点数表示。例外情况是您的 2 的幂跨越的范围太大（例如 2^100+2 不能完全表示）。

编辑添加：

[在 C# 中为输出格式化双精度值](https://stackoverflow.com/questions/1421520/formatting-doubles-for-output-in-c-sharp)可能有助于理解为什么很难理解 0.575 并不是真正的 0.575。接受的答案中的 DoubleConverter 将显示 0.575 作为精确字符串`0.5749999999999999555910790149937383830547332763671875`您可以从中看出为什么舍入给出 0.57。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-24T17:09:12.410

该`System.Math.Round`方法使用的`Double`结构，正如其他人指出的那样，容易出现浮点精度错误。当我遇到这个问题时，*我*发现的简单解决方案是使用该`System.Decimal.Round`方法，它不会遇到同样的问题并且不需要将变量重新定义为小数：

```
Decimal.Round(0.575, 2, MidpointRounding.AwayFromZero) 
```

结果：0.58

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T16:36:49.680

这是由于双精度/小数缺乏精度引起的（即 - 该函数不会*总是*给出您期望的结果）。

请参阅以下链接：[MSDN on Math.Round](http://msdn.microsoft.com/de-de/library/f5898377.aspx)

这是相关的报价：

> 由于将十进制值表示为浮点数或对浮点值执行算术运算可能导致精度损失，因此在某些情况下，Round(Double, Int32, MidpointRounding) 方法可能不会按照指定的方式舍入中点值通过 mode 参数。这在以下示例中进行了说明，其中 2.135 舍入为 2.13 而不是 2.14。发生这种情况是因为该方法在内部将值乘以 10 位，并且在这种情况下，乘法运算会损失精度。

# android - 我可以在 Android 上将 AlarmManager 与 LocalBroadcastManager 一起使用吗？

> ID：12113103
> 
> 赞同：11
> 
> 时间：2012-08-24T16:19:01.230
> 
> 标签：android, alarmmanager, localbroadcastmanager

我有这个代码：

```
private AlarmManager alarmManager = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
private PendingIntent alarmIntent = PendingIntent.getBroadcast(this, 0, new Intent("my action-name"), 0);

alarmManager.setInexactRepeating((int)AlarmManager.ELAPSED_REALTIME_WAKEUP,     SystemClock.elapsedRealtime() + autoUpdateIntervalInMinutes * 60 * 1000,  autoUpdateIntervalInMinutes * 60 * 1000, alarmIntent); 
```

但我想为 LocalBroadcastManager 更改此设置。这可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T16:36:01.443

不，这是不可能的，因为`LocalBroadcastManager`只针对你自己的进程，而`AlarmManager`'s 的后端在不同的进程中运行。这就是为什么无法创建`PendingIntent`与`LocalBroadcastManager`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-17T19:47:03.987

但是您可以注册一个 BroadcastReceiver，它基本上将“全局”广播转换为 LocalBroadcast：

```
public class AutoUpdateBroadcastReceiver extends BroadcastReceiver {

  private static final String TAG = AutoUpdateBroadcastReceiver.class.getSimpleName();

  @Override
  public void onReceive(Context context, Intent intent) {
    Log.d(TAG, ".onReceive");
    LocalBroadcastManager lbm = LocalBroadcastManager.getInstance(context);
    lbm.sendBroadcast(intent);
  }
} 
```

# jquery - 使用 jquery 更新所有内容

> ID：12113104
> 
> 赞同：0
> 
> 时间：2012-08-24T16:19:03.707
> 
> 标签：jquery

[JSF](http://jsfiddle.net/sureshmonster/namVk/1/)中。当我单击第二个 img 然后单击下一步时，它不会更新。我想同时更新 next() 和 img 。这可能吗 ？

html:

```
<div class="myclass selected">
Content 1
</div>
<div class="myclass">
Content 2
</div>
<div class="myclass">
Content 3
</div>

<ul>
  <li><img src="http://www.lillehammer.com/ImageVault/Images/id_2122/scope_66/ImageVaultHandler.aspx" /></li>
  <li><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Valued_image_seal.svg/40px-Valued_image_seal.svg.png" /></li>
  <li><img src="http://www.iconico.com/i/icoImageFilterPro100.gif" /></li>
</ul>

<a class="next">next</a> 
```

​ CSS：

```
.myclass {display:none;}

img {height: 20px; width: 20px; position: relative; display: block; margin: 20px; float: left;}
​ 
```

javascript:

```
$('img', 'ul').on('click', function() {
    $(".myclass").eq($(this).parent('li').index()).show()
                 .siblings('div').hide();
});

$('.selected').show();

$(".next").click(function(){
    var selected = $('.selected');
    selected.removeClass('selected');
    selected.hide();

    var next = selected.next(".myclass");
    if(next.length === 0) {
        next = $(".myclass").first();
    }
    next.addClass('selected');
    next.show();

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:29:28.760

```
$('img', 'ul').on('click', function() {
    $(".myclass").eq($(this).parent('li').index()).show()
                 .siblings('div').hide();
});

$('.selected').show();

$(".next").click(function(){
    if ($('.myclass:visible').length) {
        var curr = $('.myclass:visible'),
            next = curr.next('.myclass').length?curr.next('.myclass'):$('.myclass').first();

        curr.hide();
        next.show();
    }else{
        $('.myclass').first().show();
    }
}); 
```

[**小提琴**](http://jsfiddle.net/namVk/2/) ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:35:22.207

看来你想要这个：

```
$('img', 'ul').on('click', function() {
    $(".myclass").eq($(this).parent('li').index()).addClass('selected').show()
                 .siblings('div').hide();
});

$('.selected').show();

$(".next").click(function(){
    var selected = $('.selected');
    selected.removeClass('selected');
    selected.hide();

    var next = selected.next(".myclass");
    if(next.length === 0) {
        next = $(".myclass").first();
    }
    next.addClass('selected');
    next.show();

}); 
```

[http://jsfiddle.net/namVk/6/](http://jsfiddle.net/namVk/6/)

# php - PHP GET请求不起作用

> ID：12113105
> 
> 赞同：1
> 
> 时间：2012-08-24T16:19:08.157
> 
> 标签：php, xml, curl, get

当我`http://rest.example.com/account/get-balance/27e3xxx/7vvU4c95trfxxxx`在浏览器中输入并回车时，我得到以下 XML 响应。

```
<?xml version = "1.0" encoding = "UTF-8" standalone = "yes" ?>
<accountBalance>
    <creditLimit>0.0</creditLimit>
    <quotaEnabled>true</quotaEnabled>
    <value>2.0</value>
</accountBalance> 
```

但是当我在 PHP 中尝试相同的 URL 时，它会发送未找到的响应页面（**哎呀！那个页面不存在。**）。以下是我尝试的几种方法...

使用 SimpleXML

```
$content = simplexml_load_file($this->request_uri); 
```

使用文件方法

```
$content = file_get_contents($this->request_uri); 
```

使用卷曲

```
 // create a new cURL resource
    $ch = curl_init();

    // set URL and other appropriate options
    curl_setopt($ch, CURLOPT_URL, $this->request_uri);
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');
    curl_setopt($ch, CURLOPT_HEADER, 0);

    // grab URL and pass it to the browser
    $content = curl_exec($ch);

    // close cURL resource, and free up system resources
    curl_close($ch); 
```

*   `$this->request_uri`= 我在浏览器中粘贴的相同 URL。我哪里错了？请帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:31:03.013

从浏览器传输到服务器的信息不仅仅是 URI：

```
http://rest.example.com/account/get-balance/27e3xxx/7vvU4c95trfxxxx 
```

通过只传递URI而不传递从浏览器传递的其他信息，您可以正常得到不同的结果。在您的情况下，很明显您会得到不同的结果。

了解当您使用浏览器请求该 URI 时传递给服务器的其他信息。其他信息称为请求行、请求标头和正文。在 GET 请求中，请求正文通常为空，因此您只需关注请求行和标头，请参阅：

*   [**5 请求**——超文本传输​​协议的一部分——HTTP/1.1 RFC 2616 Fielding 等。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html)

如果您的浏览器具有能够显示整个请求信息以进行调试的所谓*网络工具* ，请联系您的浏览器的技术文档（例如，Chromium 有这个，对于 Firefox 有它的 Firebug 扩展）。

然后，您可以使用[PHP 的 HTTP 包装器上下文选项^(*Docs*)](http://php.net/manual/en/context.http.php)或[Curl 扩展轻松模仿请求，它是无穷无尽的选项^(*Docs*)](http://php.net/manual/en/function.curl-setopt.php)数组来实现您想要的。

# javafx-2 - JavaFX - 带分隔符的切换按钮

> ID：12113112
> 
> 赞同：6
> 
> 时间：2012-08-24T16:19:26.207
> 
> 标签：javafx-2

Java FX Scen Builder 包含一种非常特殊形式的切换按钮。几个按钮在视觉上由一条小的垂直线连接并分隔：

![在此处输入图像描述](../Images/ce0acb8b440ef271fe214dc39ff79a0d.png)

我想知道这是怎么做到的。有人知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T17:30:19.410

这是一个[ToggleButton的](http://docs.oracle.com/javafx/2/ui_controls/toggle-button.htm)[HBox](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/HBox.html)，都具有相同的[ToggleGroup](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ToggleGroup.html)和自定义 css。

[在Ensemble](http://www.oracle.com/technetwork/java/javafx/samples/index.html)示例应用程序（Ensemble 将其称为药丸按钮）中有一个显示类似控制组的[源代码示例。](http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html#SAMPLES/Controls/Buttons/Pill%20Button)我认为 Ensemble 示例源许可证是 BSD，因此您应该能够在您的应用程序中使用它。转到 Ensemble，在 Ensemble 示例应用程序中搜索，单击 Pill Button 示例上的“*保存 NetBeans 项目...* ”按钮，然后在 NetBeans 中打开生成的项目，完整代码、css 和支持图像文件将包含在项目。`Pill`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-05T14:17:21.323

作为自定义 CSS 的一种更简单的替代方案，[Controls FX 项目](http://fxexperience.com/controlsfx/)提供了分段按钮控件，它允许像 OP 所要求的那样对按钮进行可视化分组。

它是 BSD 许可的，所以我想在大多数情况下可以安全使用。该库还有许多其他有用且设计良好的控件。

分段按钮如下所示：

[![在此处输入图像描述](../Images/0d01e61291ec680005062bb5fc89e3a8.png)](https://i.stack.imgur.com/R5V26.png)

使用非常简单：

```
ToggleButton tb1 = new Button("Red");
ToggleButton tb1 = new Button("Green");
ToggleButton tb1 = new Button("Blue");

SegmentedButton seg = new SegmentedButton();
seg.getButtons().addAll(tb1,tb2,tb3);
hbox.getChildren().add(seg); 
```

它允许指定选择是否应该互斥。对于第二个 bwhaviour（非互斥），将分段按钮的组设置为 null ：

```
seg.setToggleGroup(null); 
```

来源： [http ://controlsfx.bitbucket.org/org/controlsfx/control/SegmentedButton.html](http://controlsfx.bitbucket.org/org/controlsfx/control/SegmentedButton.html)*

# c - 行，列，深度值的多维数组索引？

> ID：12113116
> 
> 赞同：2
> 
> 时间：2012-08-24T16:19:35.483
> 
> 标签：c, math

我有一些值是多维数组的偏移量，如下所示：

```
static const int TILE_SIZE = 32;
int Offset2D = (y * TILE_SIZE) + (x * TILE_SIZE);
int Offset3D = (y * TILE_SIZE) + (x * TILE_SIZE) + (z * TILE_SIZE); 
```

现在我想做的是将偏移量转换为 x,y,z 对，如下所示：

```
void ConvertBack(int offset,int size,int& x,int& y,int& z)
{
    //What's wrong with this code ?
    x = offset / size;
    y = offset % size;
    z = ??; //How to get Z?
} 
```

或者

```
//Get back offsets from any dimension ?

void ConvertBackComplex(unsigned int offset,int size,int* vector,int len)
{
    for (int i = 0;i < len;i++)
    {
        vector[i] = offset ?... ?
    }
} 
```

......到目前为止，我所有的尝试都失败了......所以我真的很欢迎任何帮助！......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T16:43:00.613

首先，我认为您的索引系统有点偏离。排列不同的 x、y 和 z 值的方式可以给出相同的偏移量。因此，首先，假设 TILE_SIZE 是数组的多少个单元格存储给定点的数据：

```
myArray = new arr[xSize*ySize*zSize*TILESIZE]
int offset2D = (x*ySize*zSize + y*zSize)*TILE_SIZE;
int offset3D = (x*ySize*zSize + y*zSize + z)*TILE_SIZE; 
```

要从偏移中返回 x,y,z，只需执行以下操作：

```
temp = offset/TILE_SIZE;
x = temp/(ySize*zSize);
y = (temp%(ySize*zSize))/zSize;
z = (temp%(ySize*zSize))%zSize; 
```

对于多个维度：

```
temp = offset/TILE_SIZE;
sizeProduct = 1;
for(int k=1; k<numDims; ++k)
{
    sizeProduct*=size[k];
}
for(int i=0; i<numDims; ++i)
{
    vector[i]=temp/sizeProduct;
    temp = temp % sizeProduct;
    if((i+1)<numDims)
    {
        sizeProduct/=sizes[i+1];
    }
} 
```

要计算多个维度的数组大小：

```
int arraySize = TILE_SIZE;
for(int i=0; i<numDims; ++i)
{
    arraySize*=sizes[i];
} 
```

要计算多个维度的数组索引（假设向量是您的坐标数组）：

```
int index =0;
sizeProduct = 1;
for(int k=1; k<numDims; ++k)
{
    sizeProduct*=size[k];
}
for(int i=0; i<numDims; ++i)
{
    index+=sizeProduct*vector[i];
    if((i+1)<numDims)
    {
        sizeProduct/=sizes[i+1];
    }
}
index*=TILE_SIZE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:40:01.683

假设所有尺寸都很`TILE_SIZE`长，那么您的偏移计算是错误的。假设我有一个数组`a`，它模拟了所有维度都`TILE_SIZE`长的 3d 数组：

```
int a[TILE_SIZE * TILE_SIZE * TILE_SIZE]; 
```

然后`p`带有坐标的点`(x, y, z)`会有这样的偏移：

```
int p_offset = z * (TILE_SIZE * TILE_SIZE)
             + y * (TILE_SIZE)
             + x; 
```

然后逆向计算：

```
int p_z = p_offset / (TILE_SIZE * TILE_SIZE);
int p_y = (p_offset - p_z * (TILE_SIZE * TILE_SIZE)) / TILE_SIZE;
int p_x = p_offset % TILE_SIZE; 
```

您可以选择不同的维度顺序，`(x, y, z)`但必须保持一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T17:00:22.950

假设维度从 X 到 Y 到 Z（如 X 表示最低维度）：

您不能使用单个函数将 2D 和 3D 偏移计算回坐标。

对于 2D：

```
void ConvertBack2D(int offset, int x_len, int &x, int &y)
{
    y = offset / x_len;
    x = offset % x_len;
} 
```

对于 3D：

```
void ConvertBack3D(int offset, int x_len, int y_len, int &x, int &y, int &z)
{
    z = offset / (x_len * y_len);
    y = (offset - (x * x_len * y_len)) / y_len;
    x = (offset - (x * x_len * y_len)) % x_len;
} 
```

# javascript - ExtJS Grid 未从 Ext.data.XmlStore 加载数据

> ID：12113119
> 
> 赞同：1
> 
> 时间：2012-08-24T16:19:39.720
> 
> 标签：javascript, extjs, grid, xmlstore

我有一个网格，我试图从 XmlStore 填充它，它是从 Xml 字符串填充的。到目前为止，商店似乎可以很好地加载 XML，但我无法让网格加载商店。（即 grid.getStore().getCount() 始终为 0。

```
// create the Data Stores for use by the grid
Ext.define('InterfaceModel', {
    extend: 'Ext.data.Model',
    fields: [
        { name: 'id', mapping: 'id' },
        { name: 'InterfaceName', mapping: 'InterfaceName' },
        { name: 'TX_OCTETS', mapping: 'TX_OCTETS' },
        { name: 'TX_BAD_OCTETS', mapping: 'TX_BAD_OCTETS' },
        { name: 'TX_FRM', mapping: 'TX_FRM' },
        { name: 'TX_BAD_FRM', mapping: 'TX_BAD_FRM' },
        { name: 'TX_MCAST', mapping: 'TX_MCAST' },
        { name: 'TX_BCAST', mapping: 'TX_BCAST' },
        { name: 'TX_PAUSE', mapping: 'TX_PAUSE' }
    ],
    idProperty: 'id'
}); 
```

我的 XML 如下：

```
var gridData = '<?xml version="1.0" encoding="UTF-8"?> <Interfaces> <Interface> <id>1</id> <InterfaceName>GMAC1</InterfaceName> <TX_OCTETS>123234</TX_OCTETS> <TX_BAD_OCTETS>234</TX_BAD_OCTETS> <TX_FRM>234234</TX_FRM> <TX_BAD_FRM>2341</TX_BAD_FRM> <TX_MCAST>23</TX_MCAST> <TX_BCAST>56</TX_BCAST> <TX_PAUSE>8</TX_PAUSE></Interface> <Interface> <id>2</id> <InterfaceName>GMAC2</InterfaceName> <TX_OCTETS>123234</TX_OCTETS> <TX_BAD_OCTETS>234</TX_BAD_OCTETS> <TX_FRM>234234</TX_FRM> <TX_BAD_FRM>2341</TX_BAD_FRM> <TX_MCAST>23</TX_MCAST> <TX_BCAST>56</TX_BCAST> <TX_PAUSE>8</TX_PAUSE></Interface></Interfaces>';

var gridDataXml = (new DOMParser()).parseFromString(gridData,'text/xml');

console.log ('xml', gridDataXml);  // everything looks fine 
```

然后我使用内存代理 XML 阅读器定义我的商店：

```
var eioaGridStore = new Ext.data.XmlStore({
    model: 'InterfaceModel',
    autoLoad: true,
    proxy: {
        type: 'memory',
        reader: {
            type: 'xml',
            root: 'Interfaces',
            record: 'Interface',
            idProperty: 'id'
        }
    }
}); 
```

然后将解析后的 XML DOM 加载到存储中：

```
eioaGridStore.loadRawData(gridDataXml); 
```

如果我在商店里 getCount()，它会正确响应 2。

从 Web Inspector 查看商店显示 2 个数组（我想成为网格中的行）（请原谅格式）

```
store 
Object
data: Object
allowFunctions: false
events: Object
generation: 3
getKey: function (record) {
hasListeners: Object
items: Array[2]
0: Object
data: Object
dirty: false
events: Object
hasListeners: Object
id: "InterfaceModel-1"
internalId: "1"
modified: Object
phantom: false
raw: Element
store: Object
stores: Array[1]
__proto__: Object
1: Object
length: 2
__proto__: Array[0]
keys: Array[2]
length: 2
map: Object
sorters: Object
__proto__: Object
events: Object
eventsSuspended: 0
filters: Object
groupers: Object
hasListeners: Object
model: function i() {return this.constructor.apply(this,arguments)||null;}
modelDefaults: Object
pageSize: 25
proxy: Object
removed: Array[0]
sorters: Object
totalCount: 2
__proto__: Object 
```

我的网格组件如下：

```
createGrid: function () {
    var me = this;

    return {
        id: 'eioaGrid',
        xtype: 'grid',
        border: true,
        store: this.eioaGridStore,
        columns: [{
            header: 'Interface',
            dataIndex: 'InterfaceName',
            align: 'center',
            sortable: true,
            tooltip: 'Axxia Interface'
        }, {
            text: 'OCTETS',
            sortable: false,
            width: 100,
            tooltip: 'Total number of octets in all frames.',
            columns: [{
                header: 'TX',
                width: 50,
                align: 'center',
                sortable: true,
                dataIndex: 'TX_OCTETS',
                tooltip: 'Transmitted'
            }]
        }, {
            text: 'BAD OCTETS',
            sortable: false,
            width: 100,
            tooltip: 'Total number of octets in all bad frames.',
            columns: [{
                header: 'TX',
                width: 50,
                align: 'center',
                sortable: true,
                dataIndex: 'TX_BAD_OCTETS',
                tooltip: 'Transmitted'
            }]
        }, {
            text: 'FRAMES',
            sortable: false,
            width: 100,
            tooltip: 'Total number of frames.',
            columns: [{
                header: 'TX',
                width: 50,
                align: 'center',
                sortable: true,
                dataIndex: 'TX_FRM',
                tooltip: 'Transmitted'
            }]
        }, {
            text: 'BAD FRAMES',
            sortable: false,
            width: 100,
            tooltip: 'Total number of bad frames.',
            columns: [{
                header: 'TX',
                width: 50,
                align: 'center',
                sortable: true,
                dataIndex: 'TX_BAD_FRM',
                tooltip: 'Transmitted'
            }]
        }, {
            text: 'MULTICAST',
            sortable: false,
            width: 100,
            tooltip: 'Multicast Frames: good non-pause frames with a multicast destination address which is not the broadcast address.',
            columns: [{
                header: 'TX',
                width: 50,
                align: 'center',
                sortable: true,
                dataIndex: 'TX_MCAST',
                tooltip: 'Transmitted'
            }]
        }, {
            text: 'BROADCAST',
            sortable: false,
            width: 100,
            tooltip: 'Broadcast Frames: good frames with the broadcast destination address.',
            columns: [{
                header: 'TX',
                width: 50,
                align: 'center',
                sortable: true,
                dataIndex: 'TX_BCAST',
                tooltip: 'Transmitted'
            }]
        }, {
            text: 'PAUSE',
            sortable: false,
            width: 100,
            tooltip: 'Pause Frames: pause frames internally generated by the MAC.',
            columns: [{
                header: 'TX',
                width: 50,
                align: 'center',
                sortable: true,
                dataIndex: 'TX_PAUSE',
                tooltip: 'Transmitted'
            }]
        }]
    };
} 
```

后来，我通过网格的存储获取计数（），它返回为空。

```
console.log('grid store count', Ext.getCmp('eioaGrid').store.getCount()); 
```

有任何想法吗？现在已经被难住了几天，我要疯了！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:06:52.627

只是一个疯狂的猜测，因为我没有加载您的代码，但可能会从商店定义中删除自动加载，因为您是手动执行的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T04:21:19.520

我刚刚找到它......我在设置网格存储时对 this.eioaGridStore 的引用：不在范围内（未定义）......现在一切正常。

# entity-framework - 在 n 层分布式应用程序上传递 Entity Framework 4.3 CF 中部分加载、断开连接的对象的模式？

> ID：12113120
> 
> 赞同：0
> 
> 时间：2012-08-24T16:19:40.933
> 
> 标签：entity-framework

我有一个 EF 域模型来在我的 ASP.NET MVC 控制器和我的服务层之间传递信息。MVC Controller 与数据源断开连接，完全依赖服务进行加载。

我正在使用 EF 4.3 和 Code First。

因此，我不在我的应用程序的 MVC 层中使用 EF 延迟加载功能。因此，许多对象都是“部分加载”的，因为我不需要数据并且加载它效率低下。

但是，我在开发过程中经常遇到空引用异常，因为没有办法静态地知道这一点，除非制作大量仅代表正在传递的数据的 DTO。

我不喜欢创建很多 DTO，因为这会产生更多的代码和映射问题，并且不一定会减少可能导致的错误数量。但我怀疑这是让我的代码更干净的唯一真正方法。

除了 DTO 之外，是否存在一种设计模式来解释断开连接的 n 层实体框架应用程序？

# sharepoint-2010 - 无法查看恢复的网站页面

> ID：12113121
> 
> 赞同：0
> 
> 时间：2012-08-24T16:19:45.950
> 
> 标签：sharepoint-2010, backup, sharepoint-designer, restore

我通过 VirtualBox 机器制作了 SharePoint 2010 网站的原型。我已经成功地备份了整个农场（所有元素都备份没有错误）。之后，我在另一个 VirtualBox 快照和真实机器上恢复了备份，没有错误（所有元素都成功恢复）。但是，在浏览某些子站点及其页面时，我收到以下错误：

## “/”应用程序中的服务器错误。

```
<nativehr>0x80070012</nativehr><nativestack>stswel.dll: (unresolved symbol, module offset=00000000000CADB7) at 0x000007FEEEB6ADB7
stswel.dll: (unresolved symbol, module offset=00000000000F7F3F) at 0x000007FEEEB97F3F... 
```

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

[

```
COMException (0x80070012): <nativehr>0x80070012</nativehr><nativestack>stswel.dll: (unresolved symbol, module offset=00000000000CADB7) at 0x000007FEEEB6ADB7
stswel.dll: (unresolved symbol, module offset=00000000000F7F3F) at 0x000007FEEEB97F3F
stswel.dll: (unresolved symbol, module offset=00000000000F945B) at 0x000007FEEEB9945B
owssvr.dll: (unresolved symbol, module offset=00000000000B460F) at 0x000007FEEE2C460F
owssvr.dll: (unresolved symbol, module offset=00000000000C07CC) at 0x000007FEEE2D07CC
mscorwks.dll: (unresolved symbol, module offset=00000000002BF827) at 0x000007FEF76AF827
Microsoft.SharePoint.Library.ni.dll: (unresolved symbol, module offset=00000000000E6D39) at 0x000007FEEEA16D39
Microsoft.SharePoint.ni.dll: (unresolved symbol, module offset=0000000001A4F67D) at 0x000007FEF2F6F67D
Microsoft.SharePoint.ni.dll: (unresolved symbol, module offset=0000000001A1E9B6) at 0x000007FEF2F3E9B6
Microsoft.SharePoint.ni.dll: (unresolved symbol, module offset=0000000001C0779E) at 0x000007FEF312779E
Microsoft.SharePoint.ni.dll: (unresolved symbol, module offset=0000000001C080E4) at 0x000007FEF31280E4
Microsoft.SharePoint.ni.dll: (unresolved symbol, module offset=0000000001F22EAC) at 0x000007FEF3442EAC
Microsoft.SharePoint.ni.dll: (unresolved symbol, module offset=0000000001FD0545) at 0x000007FEF34F0545
Microsoft.SharePoint.ni.dll: (unresolved symbol, module offset=0000000001FD2FBE) at 0x000007FEF34F2FBE
System.Web.ni.dll: (unresolved symbol, module offset=00000000002C467F) at 0x000007FEF08C467F
System.Web.ni.dll: (unresolved symbol, module offset=00000000002C447B) at 0x000007FEF08C447B
System.Web.ni.dll: (unresolved symbol, module offset=00000000002C432A) at 0x000007FEF08C432A
Microsoft.SharePoint.ni.dll: (unresolved symbol, module offset=0000000001FCFE7A) at 0x000007FEF34EFE7A
Microsoft.SharePoint.ni.dll: (unresolved symbol, module offset=0000000001F21816) at 0x000007FEF3441816
Microsoft.SharePoint.ni.dll: (unresolved symbol, module offset=0000000001F22D20) at 0x000007FEF3442D20
Microsoft.SharePoint.ni.dll: (unresolved symbol, module offset=0000000001FCFF46) at 0x000007FEF34EFF46
Micros</nativestack>]
   Microsoft.SharePoint.Library.SPRequestInternalClass.GetFileAndMetaInfo(String bstrUrl, Byte bPageView, Byte bPageMode, Byte bGetBuildDependencySet, String bstrCurrentFolderUrl, Int32 iRequestVersion, Boolean& pbCanCustomizePages, Boolean& pbCanPersonalizeWebParts, Boolean& pbCanAddDeleteWebParts, Boolean& pbGhostedDocument, Boolean& pbDefaultToPersonal, Boolean& pbIsWebWelcomePage, String& pbstrSiteRoot, Guid& pgSiteId, UInt32& pdwVersion, String& pbstrTimeLastModified, String& pbstrContent, Byte& pVerGhostedSetupPath, UInt32& pdwPartCount, Object& pvarMetaData, Object& pvarMultipleMeetingDoclibRootFolders, String& pbstrRedirectUrl, Boolean& pbObjectIsList, Guid& pgListId, UInt32& pdwItemId, Int64& pllListFlags, Boolean& pbAccessDenied, Guid& pgDocid, Byte& piLevel, UInt64& ppermMask, Object& pvarBuildDependencySet, UInt32& pdwNumBuildDependencies, Object& pvarBuildDependencies, String& pbstrFolderUrl, String& pbstrContentTypeOrder) +0
   Microsoft.SharePoint.Library.SPRequest.GetFileAndMetaInfo(String bstrUrl, Byte bPageView, Byte bPageMode, Byte bGetBuildDependencySet, String bstrCurrentFolderUrl, Int32 iRequestVersion, Boolean& pbCanCustomizePages, Boolean& pbCanPersonalizeWebParts, Boolean& pbCanAddDeleteWebParts, Boolean& pbGhostedDocument, Boolean& pbDefaultToPersonal, Boolean& pbIsWebWelcomePage, String& pbstrSiteRoot, Guid& pgSiteId, UInt32& pdwVersion, String& pbstrTimeLastModified, String& pbstrContent, Byte& pVerGhostedSetupPath, UInt32& pdwPartCount, Object& pvarMetaData, Object& pvarMultipleMeetingDoclibRootFolders, String& pbstrRedirectUrl, Boolean& pbObjectIsList, Guid& pgListId, UInt32& pdwItemId, Int64& pllListFlags, Boolean& pbAccessDenied, Guid& pgDocid, Byte& piLevel, UInt64& ppermMask, Object& pvarBuildDependencySet, UInt32& pdwNumBuildDependencies, Object& pvarBuildDependencies, String& pbstrFolderUrl, String& pbstrContentTypeOrder) +589

[SPException]
   Microsoft.SharePoint.SPGlobal.HandleComException(COMException comEx) +27254482
   Microsoft.SharePoint.Library.SPRequest.GetFileAndMetaInfo(String bstrUrl, Byte bPageView, Byte bPageMode, Byte bGetBuildDependencySet, String bstrCurrentFolderUrl, Int32 iRequestVersion, Boolean& pbCanCustomizePages, Boolean& pbCanPersonalizeWebParts, Boolean& pbCanAddDeleteWebParts, Boolean& pbGhostedDocument, Boolean& pbDefaultToPersonal, Boolean& pbIsWebWelcomePage, String& pbstrSiteRoot, Guid& pgSiteId, UInt32& pdwVersion, String& pbstrTimeLastModified, String& pbstrContent, Byte& pVerGhostedSetupPath, UInt32& pdwPartCount, Object& pvarMetaData, Object& pvarMultipleMeetingDoclibRootFolders, String& pbstrRedirectUrl, Boolean& pbObjectIsList, Guid& pgListId, UInt32& pdwItemId, Int64& pllListFlags, Boolean& pbAccessDenied, Guid& pgDocid, Byte& piLevel, UInt64& ppermMask, Object& pvarBuildDependencySet, UInt32& pdwNumBuildDependencies, Object& pvarBuildDependencies, String& pbstrFolderUrl, String& pbstrContentTypeOrder) +27641455
   Microsoft.SharePoint.SPWeb.GetWebPartPageContent(Uri pageUrl, Int32 pageVersion, PageView requestedView, HttpContext context, Boolean forRender, Boolean includeHidden, Boolean mainFileRequest, Boolean fetchDependencyInformation, Boolean& ghostedPage, Byte& verGhostedPage, String& siteRoot, Guid& siteId, Int64& bytes, Guid& docId, UInt32& docVersion, String& timeLastModified, Byte& level, Object& buildDependencySetData, UInt32& dependencyCount, Object& buildDependencies, SPWebPartCollectionInitialState& initialState, Object& oMultipleMeetingDoclibRootFolders, String& redirectUrl, Boolean& ObjectIsList, Guid& listId) +1750
   Microsoft.SharePoint.ApplicationRuntime.SPRequestModuleData.FetchWebPartPageInformationForInit(HttpContext context, SPWeb spweb, Boolean mainFileRequest, String path, Boolean impersonate, Boolean& fGhostedPage, Byte& verGhostedPage, Guid& docId, UInt32& docVersion, String& timeLastModified, SPFileLevel& spLevel, String& masterPageUrl, String& customMasterPageUrl, String& webUrl, String& siteUrl, Guid& siteId, Object& buildDependencySetData, SPWebPartCollectionInitialState& initialState, String& siteRoot, String& redirectUrl, Object& oMultipleMeetingDoclibRootFolders, Boolean& objectIsList, Guid& listId, Int64& bytes) +26195281
   Microsoft.SharePoint.ApplicationRuntime.SPRequestModuleData.FetchWebPartPageInformation(HttpContext context, String path, Boolean impersonate, Boolean& fGhostedPage, Byte& verGhostedPage, Guid& docId, UInt32& docVersion, String& timeLastModified, SPFileLevel& level, String& masterpageUrl, String& customMasterPageUrl, String& webUrl, String& siteUrl, Guid& siteId, Object& buildDependencySetData) +388
   Microsoft.SharePoint.ApplicationRuntime.SPDatabaseFile.EnsureContentFetched(HttpContext context, SPRequestModuleData requestData) +364
   Microsoft.SharePoint.ApplicationRuntime.SPVirtualFile.GetFile(String virtualPath, Boolean fetchContent) +101
   Microsoft.SharePoint.ApplicationRuntime.SPVirtualPathProvider.GetFile(String virtualPath) +78
   System.Web.Hosting.VirtualPathProvider.GetFileWithCheck(String virtualPath) +31
   System.Web.UI.DependencyParser.ParseFile(String physicalPath, VirtualPath virtualPath) +219
   System.Web.UI.DependencyParser.GetVirtualPathDependencies() +10955063 
```

通过 SharePoint 设计器导入的某些资源文件也不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:07:58.220

此问题是由于特定子站点的 v4.master 母版页已损坏（并且在恢复后丢失......由于某种原因）。在 SharePoint Designer 中打开还原的子网站时，会出现相应的设计时错误消息。

# jquery - jQuery 选择检查无法正常工作

> ID：12113122
> 
> 赞同：0
> 
> 时间：2012-08-24T16:20:05.753
> 
> 标签：jquery

[http://jsfiddle.net/Y7dcX/3/](http://jsfiddle.net/Y7dcX/3/)

我试图提醒一个“时间盒”在 2seats 和 4seats 选择中都可以有 0 值。

这几乎可以正常工作，如果您在第二个“时间框”（黑色边框下的那个）的 2seats 中选择一个值，然后在第一个“timebox”的 4seats 中选择一个值，然后按提交->那么它仍然会给出错误警报？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:39:04.113

您在两个不同的地方有相同的错误。在您的`.each()`声明中，使用`this`而不是再次引用该类。这搞砸了价值的检索。

改变：

```
if( $(this).val() == 0 && $('.seats_free_2tables').closest("tr").next().find('.seats_free_4tables').val() == 0 ) 
```

至

```
if( $(this).val() == 0 && $(this).closest("tr").next().find('.seats_free_4tables').val() == 0 ) 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/Y7dcX/4/)**

为了说明这一点，请更改`$('.seats_free_2tables').closest("tr")`为`$(this ).closest("tr")`和`$('.seats_free_4tables').closest("tr").``$(this).closest("tr").`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:32:33.590

请检查您的最后一个原始 html 代码。我看到它如下所示。

```
</table></form> 
```

它应该像下面这样

```
</form> </table> 
```

# r - 将 MatLab 转换为 R - 数组乘法和复共轭转置

> ID：12113124
> 
> 赞同：0
> 
> 时间：2012-08-24T16:20:10.560
> 
> 标签：r, matlab, translate, transpose

我正在尝试将 MatLab 中的代码翻译成 R，但我被困在以下行：

```
SqO=U.* sqrt(D)*V' 
```

我觉得我很接近：

```
SqO<-Conj(t(U%*%sqrt(D)*V)) 
```

...但输出仍然不匹配。如果有帮助，所有变量（Sq0、U、D 和 V）都是 20x20 矩阵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:12:40.457

根据 HighPerformanceMark 所写的翻译应该是：

```
SqO=U.* sqrt(D)*V'  # Matlab

SqO <- U* sqrt(D) %*% t(V)  # R 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:34:28.287

嗯，我不是 R 方面的专家，但我确实知道一点 Matlab。Matlab 中的子表达式

```
U.* sqrt(D) 
```

`U`对 的和平方根进行逐个元素的乘法运算`D`。即 element `(i,j)`in`U`乘以 element `(i,j)`in `sqrt(D)`；所以这不是通常的矩阵乘法。那是你的`U%*%sqrt(D)`工作吗？ `sqrt(D)`也对单个元素进行操作，即`sqrt(D)~=D^(1/2)*D^(1/2)`.

然后Matlab代码将前面运算的结果乘以`V`(如果`V`是实数数组)的转置；再次，我的 R 太弱了，无法知道您是否已完成此操作或等效操作。

# python - Python。操作系统系统。使用 runas 启动程序

> ID：12113125
> 
> 赞同：1
> 
> 时间：2012-08-24T16:20:12.777
> 
> 标签：python, uac

当我开始

```
os.system('"runas /user:USERNAME "C:/Python27/python.exe shell.py""') 
```

它在控制台中一遍又一遍地迭代。

我需要从电脑所有者那里启动一个程序来提升权限，因为程序将在 Win7 上使用，这导致关心 UAC。

我决定采用一种在内部启动程序的方式，但具有提升的权限并立即退出。

我用了这段代码

```
import os 
import sys
import win32com.shell.shell as shell 
ASADMIN = 'asadmin'
if sys.argv[-1] != ASADMIN: 
     script = os.path.abspath(sys.argv[0])
params = ' '.join([script] + sys.argv[1:] + [ASADMIN]) 
shell.ShellExecuteEx(lpVerb='runas', lpFile=sys.executable, lpParameters=params) 
```

` 但在我的情况下，没有以 ShellExecuteEx 开头。而不是 ShellExecuteEx 我使用 runas 命令放置 os.system，该命令在控制台字符串中一遍又一遍地迭代 runas /user:USERNAME "C:/Python27/python.exe shell.py"。

```
import os
import sys
import win32com.shell.shell as sh    ASADMIN = '/user:@'
os.system('"runas /user:=@COMPANY_NAME "C:/Python27/python.exe shell.py""')
sys.exit(0)
if sys.argv[-1] != ASADMIN:
    script = os.path.abspath(sys.argv[0])
    params = ' '.join([ASADMIN] + ['c:\\Python27\\python.exe', script] + sys.argv[1:])
    sh.ShellExecuteEx(lpVerb='runas', lpFile=sys.executable, lpParameters=params)
    sys.exit(0) 
```

这是我的代码。

# c# - 无论如何要计算或获取在 ProgressBar 中显示的序列化时间吗？

> ID：12113126
> 
> 赞同：1
> 
> 时间：2012-08-24T16:20:13.687
> 
> 标签：c#, .net, serialization, progress-bar, binaryformatter

我使用 C# .net 4.0 并没有看到任何可能的方法，但也许你知道吗？:)
我以这种方式进行序列化：

```
public static void SaveCollection<T>(string file_name, T list)
{
    BinaryFormatter bf = new BinaryFormatter();
    FileStream fs = null;

    try
    {
        fs = new FileStream(Application.StartupPath + "/" + file_name, FileMode.Create);
        bf.Serialize(fs, list);
        fs.Flush();
        fs.Close();
    }
    catch (Exception exc)
    {
        if (fs != null)
            fs.Close();

        string msg = "Unable to save collection {0}\nThe error is {1}";
        MessageBox.Show(Form1.ActiveForm, string.Format(msg, file_name, exc.Message));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:11:41.533

因此，假设您实际上事先知道对象图的大小，这本身可能很困难，但我们假设您这样做:)。你可以这样做：

```
public class MyStream : MemoryStream {
    public long bytesWritten = 0;
    public override void Write(byte[] buffer, int offset, int count) {                
        base.Write(buffer, offset, count);
        bytesWritten += count;
    }

    public override void WriteByte(byte value) {
        bytesWritten += 1;
        base.WriteByte(value);
    }
} 
```

然后你可以像这样使用它：

```
BinaryFormatter bf = new BinaryFormatter();
var s = new MyStream();
bf.Serialize(s, new DateTime[200]); 
```

这将为您提供写入的字节，因此您可以使用它来计算时间。注意：您可能需要覆盖流类的更多方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:29:01.817

我不相信有。我的建议是计算序列化需要多长时间（重复测量数百或数千次），平均它们，然后将其用作计算序列化进度的常数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T16:47:14.980

您可以启动一个以特定频率运行的计时器（例如每秒 4 次，但这实际上与您想要更新进度的频率无关）计算当前传输数据所需的时间，然后估计剩余的时间时间。例如：

```
private void timer1_Tick(object sender, EventArgs e)
{
    int currentBytesTransferred = Thread.VolatileRead(ref this.bytesTransferred);
    TimeSpan timeTaken = DateTime.Now - this.startDateTime;

    var bps = timeTaken.TotalSeconds / currentBytesTransferred;
    TimeSpan remaining = new TimeSpan(0, 0, 0, (int)((this.totalBytesToTransfer - currentBytesTransferred) / bps));
    // TODO: update UI with remaining
} 
```

这假设您正在`this.bytesTransferred`另一个线程上更新并且您的目标是 AnyCPU。

# c++ - 执行某些代码后可以显式调用构造函数吗？

> ID：12113127
> 
> 赞同：1
> 
> 时间：2012-08-24T16:20:13.673
> 
> 标签：c++, constructor

我想在调用第二个构造函数之前做一些处理。例如：

```
 class Foo {
    Foo(){ displayWindow(); }

    //This is possible
    Foo(int bar) : Foo() { windowSize = bar; }

    //But how do I do processing before calling the second constructor?
    Foo(int bar, int baz) {
        addLabel(baz); // prototype = void addLabel(int)
        Foo(bar);
    }
}
```

我将如何做到这一点（不使用初始化函数）？

编辑：我更新了示例。现在它显示默认构造函数必须最后出现。如果没有，displayWindow 将不会考虑任何更新的变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T16:27:18.403

像这样：

```
Foo(int bar, int baz) :
    Foo(initializeAnotherStaticLibrary(bar, baz) == -1 ? bar : baz)
{
} 
```

（请注意，委托构造函数是仅在 C++11 及更高版本中支持的功能。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:44:11.397

如果有合理的默认值，请使用它们。这会回避如何调用其他构造函数的整个问题，因为只有一个。:)

```
class Foo {
  public:
    Foo(int bar = 100, int baz = 0) {
        if (baz) addLabel(baz);
        displayWindow();
        windowSize = bar;
    }
}; 
```

虽然我质疑`displayWindow()`无论如何调用构造函数的想法。除了在你完全初始化*自己*之前开始工作的丑陋之外......如果对象还没有被构建完会发生什么？（例如，如果你有一个 的子类`Foo`，它的构造函数将在此之后运行——如果你有任何虚拟的东西，vtables 可能不会指向你认为它们应该指向的位置......）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-24T18:30:12.453

我发现这可以通过放置操作符实现：

```
 class Foo {
    Foo(){ displayWindow(); }

    //This is not possible either, since "type 'Foo' is not a direct base of 'Foo'"
    Foo(int bar) : Foo() { windowSize = bar; }

    //This is the solution using the placement operator
    Foo(int bar, int baz) {
        addLabel(baz);
        new (this) Foo(bar);
    }
}
```

我听说这有一些警告，如果有人能指出它们，我将不胜感激。

# clojure - Incanter 中嵌套逻辑回归的分步过程

> ID：12113130
> 
> 赞同：5
> 
> 时间：2012-08-24T16:20:32.417
> 
> 标签：clojure, incanter

在 R 中找到[这个非常有用的指南后](https://stackoverflow.com/questions/5906272/step-by-step-procedure-on-how-to-run-nested-logistic-regression-in-r)，我想知道如何在 Incanter 中做类似的事情。对于 Incanter 来说相对较新，如果有人能重现[这个答案](https://stackoverflow.com/a/5906456/445639)，那就太好了。

除了说明嵌套模型之外，关于该答案的讨论还包括一些关于如何迭代生成非嵌套模型列表的很好的讨论。我很好奇在 Clojure/Incanter 中最惯用的方法是什么。

# c# - C# Activator createInstance 用于扩展类

> ID：12113131
> 
> 赞同：1
> 
> 时间：2012-08-24T16:20:37.580
> 
> 标签：c#, inheritance, activator, extending, createinstance

我有一个基类，如下所示：

```
public Data()
    {
        id = num++;
        SetVariables();
    }
    //fill every Variable varNames, parseInduction, noise, seperator in Children Classes
    public Data(String line)
    {
        //first declare all variables in sub classes
        if (id == 0)
            throw new NotSupportedException("You are not allowed to use this constructor for creating the first instance!");
        id = num++;
        SetVariables();
        parseLine(line);
    } 
```

而且我还有一个扩展这个类的子类。

```
class DienstGruppe : Data
{
    protected override void SetVariables(){
        varNames = new String[] {"id", "name"};
        parseInduction = "DienstGruppen = {";
        parseEnd = "};";
        beginOfDataLine = "<";
        endOfDataLine = ">";
        noise = new String[] { "\"" };
    }
} 
```

我尝试使用 Activator.CreateInstance() 函数创建一个对象，如下所示：

```
Data myData = (Data)Activator.CreateInstance(this.GetType(), new object[] { line }); 
```

注意：this.GetType() 是由扩展类在Data 的一个函数中使用的，用来获取当前类的Type。

但这会导致一个问题。奇怪的是，我收到一个错误，该类（在我的情况下为 DienstGruppe）没有构造函数。我猜c#中的继承与java中的继承不一样。那么我该如何解决这个问题呢？

它适用于“数据”。

问候， 多米尼克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T17:07:42.887

除了 Pavel 的回答（关于在子类中要求具有适当签名的构造函数是正确的）之外，可能值得指出您为什么需要这样做。

`Section 1.6.7.1`根据C# 语言规范，在 C# 中，构造函数不是继承的。

> 与其他成员不同，实例构造函数不是继承的，并且一个类除了在类中实际声明的实例构造函数之外没有实例构造函数。如果没有为类提供实例构造函数，则自动提供一个没有参数的空实例构造函数。

您似乎认为继承在 C# 中的工作方式与 Java 不同，但在这种情况下，Java 的行为方式相同。请参阅`Section 8.8`Java 规范。

> 构造函数声明不是成员。它们永远不会被继承，因此不会被隐藏或覆盖。

有关此决定背后的可能原因的更多信息，请参阅[此 StackOverflow 问题。](https://stackoverflow.com/questions/426484/why-are-constructors-not-inherited)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T16:24:08.577

您应该在 DienstGruppe 中编写构造函数以从基类继承它，如下所示：

```
public DienstGruppe(String line) : base(line) { } 
```

所以它需要子类中的构造函数。

# wcf-data-services - 来自 SAML 的 ClaimsIdentity 中的 NameClaimType

> ID：12113133
> 
> 赞同：0
> 
> 时间：2012-08-24T16:20:39.983
> 
> 标签：wcf-data-services, wif, saml

我试图在 WCF 数据服务/REST/OData 服务器的上下文中了解 WIF 的世界。我有一个在单元测试项目中运行的破解版 SelfSTS。当单元测试开始时，它会启动 WCF 服务，该服务会生成我的 SAML 令牌。这是正在生成的 SAML 令牌：

```
<saml:Assertion MajorVersion="1" MinorVersion="1" ... >
  <saml:Conditions>...</saml:Conditions>
  <saml:AttributeStatement>
    <saml:Subject>
      <saml:NameIdentifier Format="EMAIL">4bd406bf-0cf0-4dc4-8e49-57336a479ad2</saml:NameIdentifier>
      <saml:SubjectConfirmation>...</saml:SubjectConfirmation>
    </saml:Subject>
    <saml:Attribute AttributeName="emailaddress" AttributeNamespace="http://schemas.xmlsoap.org/ws/2005/05/identity/claims">
      <saml:AttributeValue>bob@bob.org</saml:AttributeValue>
    </saml:Attribute>
    <saml:Attribute AttributeName="name" AttributeNamespace="http://schemas.xmlsoap.org/ws/2005/05/identity/claims">
      <saml:AttributeValue>bob</saml:AttributeValue>
    </saml:Attribute>
  </saml:AttributeStatement>
  <ds:Signature>...</ds:Signature>
</saml:Assertion> 
```

（我知道我的 NameIdentifier 的格式并不是真正的 EMAIL，这是我尚未清理的内容。）

在我的实际服务器中，我放了一些从 Pablo Cabraro / Cibrax 借来的[代码。](http://weblogs.asp.net/cibrax/archive/2010/04/15/integrating-wif-with-wcf-data-services.aspx)这段代码似乎运行 A-OK，尽管我承认我不明白发生了什么。我注意到，稍后在我的代码中，当我需要检查我的身份时，`Thread.CurrentPrincipal.Identity`它是 的一个实例`Microsoft.IdentityModel.Claims.ClaimsIdentity`，它具有所有属性的声明，以及一个 nameidentifier 声明，该声明具有我在 saml:Subject 中的 NameIdentifier 元素中的值。它还有一个属性`NameClaimType`，指向“http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name”。如果`NameClaimType`映射到 nameidentifier 会更有意义，不是吗？我该如何做到这一点？还是我期待名称声明的错误？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:01:19.937

NameClaimType 的值可以在 Web.config 中指定，允许您将其设为最适合用作 IIdentity.Name 的任何内容。

[http://msdn.microsoft.com/en-us/library/system.security.claims.claimsidentity.nameclaimtype.aspx](http://msdn.microsoft.com/en-us/library/system.security.claims.claimsidentity.nameclaimtype.aspx)说

> NameClaimType 属性指定用于为此身份提供名称的声明类型 (Claim.Type)。该名称是通过 Name 属性访问的。

和[http://msdn.microsoft.com/en-us/library/ee517298.aspx](http://msdn.microsoft.com/en-us/library/ee517298.aspx)状态

> ClaimsIdentity.NameClaimType。NameClaimType 属性旨在用于接收方选择用于 IIdentity.Name 的声明值。

也就是说，它允许 Name 属性表示在给定情况下最有意义的任何内容 - 这可能通常是 nameidentifier 声明类型，尽管在您的情况下它被设置为 name。

# facebook - Facebook Graph API：如何在特定用户的状态中搜索某个关键字？

> ID：12113137
> 
> 赞同：0
> 
> 时间：2012-08-24T16:20:52.033
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我希望能够搜索/过滤某个关键字的用户状态。我以为我可以做这样的事情：

```
graph.facebook.com/_user_id_/statuses?q=term 
```

甚至：

```
graph.facebook.com/_user_id_/search?q=term&type=status 
```

但这些都不起作用，我找不到任何关于此的文档。我知道我可以用 FQL 做到这一点，但是 Graph API 的 statuses 方法也会给我*喜欢*和*评论*每个状态。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:56:24.787

您可以使用 FQL 来做到这一点，只需一个多查询即可完成：

```
{
'posts_w_keyword': 'SELECT post_id, actor_id, message FROM stream WHERE source_id = me()
                     AND strpos(message, "keyword") > -1',
'post_comments':   'SELECT post_id, from_id, text FROM comment WHERE post_id IN
                     (SELECT post_id FROM #posts_w_keyword)',
'post_likes':      'SELECT post_id, user_id FROM like WHERE post_id IN
                     (SELECT post_id FROM #posts_w_keyword)'
} 
```

# java - 如何在 ant 上显示 system.out（在控制台中）？

> ID：12113139
> 
> 赞同：0
> 
> 时间：2012-08-24T16:20:54.313
> 
> 标签：java, ant, build, classpath, system.out

我能够在 ant 上构建 java 程序，并且已经正确配置。但是我想知道如何使用 Ant 在控制台上看到 System.out.println / System.out.print ？

**注意：**我没有使用过蚂蚁，我正在尝试探索。我希望我的问题不是愚蠢的？

简单的程序

```
 package antTesting;
    public class Helloworld
    {

        /**
         * @param args
         */
        public static void main( String[] args )
        {
            System.out.println( " hello there !!!! " );

        }

    } 
```

build.xml 相同

```
<?xml version="1.0"?>
<project name="Ant-Test" default="main" basedir=".">
  <!-- Sets variables which can later be used. -->
  <!-- The value of a property is accessed via ${} -->
  <property name="src.dir" location="src" />
  <property name="build.dir" location="build" />
  <property name="dist.dir" location="dist" />
  <property name="docs.dir" location="docs" />

  <!-- Deletes the existing build, docs and dist directory-->
  <target name="clean">
    <delete dir="${build.dir}" />
    <delete dir="${docs.dir}" />
    <delete dir="${dist.dir}" />
  </target>

  <!-- Creates the  build, docs and dist directory-->
  <target name="makedir">
    <mkdir dir="${build.dir}" />
    <mkdir dir="${docs.dir}" />
    <mkdir dir="${dist.dir}" />
  </target>

  <!-- Compiles the java code (including the usage of library for JUnit -->
  <target name="compile" depends="clean, makedir">
    <javac srcdir="${src.dir}" destdir="${build.dir}">
    </javac>

  </target>

  <!-- Creates Javadoc -->
  <target name="docs" depends="compile">
    <javadoc packagenames="src" sourcepath="${src.dir}" destdir="${docs.dir}">
      <!-- Define which files / directory should get included, we include all -->
       <fileset dir="${src.dir}">
                <include name="**" />
           </fileset>
    </javadoc>
  </target>

  <!--Creates the deployable jar file  -->
  <target name="jar" depends="compile">
    <jar destfile="${dist.dir}\de.vogella.build.test.ant.jar" basedir="${build.dir}">
      <manifest>
        <attribute name="Main-Class" value="test.Main" />
      </manifest>
    </jar>
  </target>

  <target name="main" depends="compile, jar, docs">
    <description>Main target</description>
  </target>

</project> 
```

当我`run > ant`

在 CMD 上

```
Picked up JAVA_TOOL_OPTIONS: -agentlib:jvmhook
Picked up _JAVA_OPTIONS: -Xrunjvmhook -Xbootclasspath/a:C:\PROGRA~2\HP\Sprinter\
bin\JAVA_S~1\classes;C:\PROGRA~2\HP\Sprinter\bin\JAVA_S~1\classes\jasmine.jar
Buildfile: C:\Users\ms025226\workspace\TestingWorld\build.xml

clean:
   [delete] Deleting directory C:\Users\ms025226\workspace\TestingWorld\build
   [delete] Deleting directory C:\Users\ms025226\workspace\TestingWorld\docs
   [delete] Deleting directory C:\Users\ms025226\workspace\TestingWorld\dist

makedir:
    [mkdir] Created dir: C:\Users\ms025226\workspace\TestingWorld\build
    [mkdir] Created dir: C:\Users\ms025226\workspace\TestingWorld\docs
    [mkdir] Created dir: C:\Users\ms025226\workspace\TestingWorld\dist

compile:
    [javac] C:\Users\ms025226\workspace\TestingWorld\build.xml:26: warning: 'inc
ludeantruntime' was not set, defaulting to build.sysclasspath=last; set to false
 for repeatable builds
    [javac] Compiling 1 source file to C:\Users\ms025226\workspace\TestingWorld\
build

jar:
      [jar] Building jar: C:\Users\ms025226\workspace\TestingWorld\dist\de.vogel
la.build.test.ant.jar

docs:
  [javadoc] Generating Javadoc
  [javadoc] Javadoc execution
  [javadoc] Loading source file C:\Users\ms025226\workspace\TestingWorld\src\Hel
loworld.java...
  [javadoc] Constructing Javadoc information...
  [javadoc] Standard Doclet version 1.6.0_31
  [javadoc] Building tree for all the packages and classes...
  [javadoc] Building index for all the packages and classes...
  [javadoc] Picked up JAVA_TOOL_OPTIONS: -agentlib:jvmhook
  [javadoc] Picked up _JAVA_OPTIONS: -Xrunjvmhook -Xbootclasspath/a:C:\PROGRA~2\
HP\Sprinter\bin\JAVA_S~1\classes;C:\PROGRA~2\HP\Sprinter\bin\JAVA_S~1\classes\ja
smine.jar
  [javadoc] Building index for all classes...

main:

BUILD SUCCESSFUL
Total time: 2 seconds 
```

当我为类路径定义**目标**时，我收到一个错误

```
<!-- to printoutputs -->    
  <target name="Helloworld" description="Hello world">
        <java classname="antTesting.Helloworld">
            <arg value="arg1"/>
            <arg value="arg2"/>         
        </java>
 </target>

  <target name="main" depends="compile, jar, docs, Helloworld">
    <description>Main target</description>
  </target> 
```

**错误：**

```
Helloworld:
     [java] Could not find antTesting.Helloworld. Make sure you have it in your classpath
     [java]     at org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:138)
     [java]     at org.apache.tools.ant.taskdefs.Java.run(Java.java:764)
     [java]     at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:218)
     [java]     at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:132)
     [java]     at org.apache.tools.ant.taskdefs.Java.execute(Java.java:105)
     [java]     at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)
     [java]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
     [java]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
     [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
     [java]     at java.lang.reflect.Method.invoke(Method.java:597)
     [java]     at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
     [java]     at org.apache.tools.ant.Task.perform(Task.java:348)
     [java]     at org.apache.tools.ant.Target.execute(Target.java:357)
     [java]     at org.apache.tools.ant.Target.performTasks(Target.java:385)
     [java]     at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1337)
     [java]     at org.apache.tools.ant.Project.executeTarget(Project.java:1306)
     [java]     at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
     [java]     at org.eclipse.ant.internal.launching.remote.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32)
     [java]     at org.apache.tools.ant.Project.executeTargets(Project.java:1189)
     [java]     at org.eclipse.ant.internal.launching.remote.InternalAntRunner.run(InternalAntRunner.java:423)
     [java]     at org.eclipse.ant.internal.launching.remote.InternalAntRunner.main(InternalAntRunner.java:137)
     [java] Java Result: -1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:40:24.833

如果你想从 Ant 执行你的类，你没有在任何地方指定它，在你的脚本中添加这样的东西：

```
<target name="Helloworld" description="Hello world">
    <java classname="your.package.Helloworld">
        <arg value="arg1"/>
        <arg value="arg2"/>
        ...
    </java>
</target> 
```

元素`<arg value="..."/>`被传递给您的**主要**方法数组参数：`main( String[] args )`

现在将目标`Helloworld`作为依赖项添加到其他目标或从运行选项中选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T14:31:34.267

您需要 System.out 还是使用日志记录（Apache Commons、SLF4J...）更有趣？

# xml - 字符串 eq 中的未初始化值 $4 - Perl

> ID：12113146
> 
> 赞同：1
> 
> 时间：2012-08-24T16:21:18.703
> 
> 标签：xml, regex, perl

```
@files = glob "*.xml";

undef $/;
for $file (@files) {
    $indent = 0;
    open FILE, $file or die "Couldn't open $file for reading: $!";
    $_ = readline *FILE;
    close FILE or die "Couldn't close $file: $!";

    # Remove whitespace between > and < if that is the only thing separating them
    s/(?<=>)\s+(?=<)//g;

    # Indent
    s{  # Capture a tag <$1$2$3>,
        # a potential closing slash $1
        # the contents $2
        # a potential closing slash $3
        <(/?)([^/>]+)(/?)> 

        # Optional white space
        \s*

        # Optional tag.
        # $4 contains either undef, "<" or "</"
        (?=(</?))?
    }
    {
        # Adjust the indentation level.
        # $3: A <foo/> tag. No alteration to indentation.
        # $1: A closing </foo> tag. Drop one indentation level
        # else: An opening <foo> tag. Increase one indentation level
        $indent +=
            $3 ?  0 :
            $1 ? -1 :
                  1;

        # Put the captured tag back into place
        "<$1$2$3>" .
        # Two closing tags in a row. Add a newline and indent the next line
        ($1 and ($4 eq "</") ?
            "\n" . ("  " x $indent) : 
        # This isn't a closing tag but the next tag is. Add a newline and
        # indent the next line.
        $4 ?
            "\n" . ("  " x $indent) :
        # This isn't a closing tag - no special indentation. I forget why
        # this works.
            ""
        )
    # /g repeat as necessary
    # /e Execute the block of perl code to create replacement text
    # /x Allow whitespace and comments in the regex
    }gex;

    open FILE, ">", $file or die "Couldn't open $file for writing: $!";
    print FILE or die "Couldn't write to $file: $!";
    close FILE or die "Couldn't close $file: $!";
} 
```

我正在使用此代码正确缩进一堆 xml 文件。但是，当我执行时，我得到：

```
Use of uninitialized value $4 in string eq at C:/Users/souzamor/workspace/Parser/xmlreformat.pl line 25. 
```

并且`line 25`是：

```
# $4 contains either undef, "<" or "</" 
```

我不知道为什么会这样，而且我是新手`Perl`。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T16:28:37.233

The`$4`指的是正则表达式中的第四个捕获括号，在这种情况下：`(?=(</?))?`. 正如评论所说，这可能是未定义的，因为`?`最后的意思是“这个东西可能存在，但也可能不存在”。

如果您以某些方式使用未定义的值（通过`undef`Perl 中的特殊值发出信号），包括在与 的字符串比较中`eq`，您会收到来自 Perl 的警告。您可以轻松检查变量是否使用`defined($var)`.

在您的特定情况下`$4`，在此短语中使用：

```
($1 and ($4 eq "</") ? "\n" . ("  " x $indent) : 
 $4                  ? "\n" . ("  " x $indent) :
                       "" 
```

修复警告就像用以下代码替换这些测试一样简单：

```
($1 and defined($4) and ($4 eq "</") ? "\n" . ("  " x $indent) : 
$4                                   ? "\n" . ("  " x $indent) :
                                       "" 
```

请注意，在这种特殊情况下，您不必检查`defined($4)`第二行，但这也不会造成伤害。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:34:00.157

除非那里没有决赛：

```
(?=(</?))? 
```

如果最后一个问号允许匹配进行替换，那么`$4`将是`undef`。例如（使用 Perl 5.10 或更好的版本，对于旧版本应该可以安全地使用`||`而不是`//`）：

```
(($4 // '') eq "</") 
```

您只需要提防这种情况或关闭警告即可。您不能将捕获移动到零宽度前瞻之外，因为它将始终设置`$4`为空字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T16:43:16.750

所以这个运行时错误告诉你，给定你当前的输入， $4 没有价值，但你仍然在访问它。

所以这些行：

```
 # Optional tag.
 # $4 contains either undef, "<" or "</" 
```

正在撒谎。如果 $4 是 undef，您将收到关于未定义值而不是未初始化值的投诉。

在您执行此 s{}{} 语句时，$4 不匹配任何内容。

除非您必须编写 XML 漂亮打印机，否则您应该从 CPAN 获得一台。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-24T16:26:17.063

如果它工作正常，那么您可以忽略警告。更改此行

```
close FILE or die "Couldn't close $file: $!"; 
```

至

```
 close FILE or die "Couldn't close $file: $!";
 no warnings 'uninitalized'; 
```

但是使用一些 xml 解析器库来解析 xml 会更好/更好...

问候，

# css - CSS：如何在奇怪的情况下强制换行？

> ID：12113150
> 
> 赞同：0
> 
> 时间：2012-08-24T16:21:41.307
> 
> 标签：css, word-wrap

看看这个小提琴，[它试图在黄色 div 中包装文本而不设置其宽度或外部 div 宽度 - 仅使用内部 div 的宽度](http://jsbin.com/atocaz/6/edit)

我可以做些什么来实现这一目标吗？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:41:02.237

尽管为什么不将`#h`'s width 设置为 100 是没有意义的，但您可以试试这个：

```
#a{
    background-color: grey;
    padding:5px;
    display: table;
}
#b{
    width: 100px !important;
    background-color: orange;
    line-height: 15px;
    padding:5px;
    display: table-cell;
}
#h{
    background-color: yellow;
    line-height: 15px;
    padding:5px;
    display: table-row;
} 
```

如果您告诉我们为什么您不想`#h`明确定义 's 宽度，我认为我们可以为您提供更多帮助，但我希望这对您有所帮助。

# parsing - 是否可以使用 Menhir 创建一个非常宽松的语法？

> ID：12113154
> 
> 赞同：1
> 
> 时间：2012-08-24T16:21:58.727
> 
> 标签：parsing, ocaml, peg, menhir

我正在尝试解析 Verilog 的一些点点滴滴——我主要对提取模块定义和实例感兴趣。

在verilog中，模块定义如下：

```
module foo ( ... ) endmodule; 
```

并且模块以两种不同的可能方式之一实例化：

```
foo fooinst ( ... );
foo #( ...list of params... ) fooinst ( .... ); 
```

此时我只对查找已定义或实例化模块的名称感兴趣；'foo' 在上述两种情况下。

鉴于此 menhir 语法 (verParser.mly)：

```
%{ 

  type expr =   Module of expr 
           | ModInst of expr
           | Ident of string 
           | Int of int
           | Lparen 
           | Rparen  
           | Junk 
           | ExprList of expr list

%}

%token <string> INT
%token <string> IDENT
%token  LPAREN RPAREN MODULE TICK OTHER HASH EOF

%start expr2
%type <expr> mod_expr
%type <expr> expr1
%type <expr list> expr2

%%

mod_expr:
  | MODULE IDENT LPAREN    { Module ( Ident $2) }
  | IDENT IDENT LPAREN     { ModInst ( Ident $1) }
  | IDENT HASH  LPAREN     { ModInst ( Ident $1) };

junk: 
  |  LPAREN {  }
  |  RPAREN {  }
  |  HASH { } 
  |  INT {  };

expr1:
  | junk* mod_expr junk* { $2 } ;

expr2: 
  | expr1* EOF { $1 }; 
```

当我在 menhir 解释器中尝试这个时，它可以很好地提取模块实例：

```
MODULE IDENT LPAREN
ACCEPT
[expr2:
  [list(expr1):
    [expr1:
      [list(junk):]
      [mod_expr: MODULE IDENT LPAREN]
      [list(junk):]
    ]
    [list(expr1):]
  ]
  EOF
] 
```

它适用于单个模块实例化：

```
IDENT IDENT LPAREN
ACCEPT
[expr2:
  [list(expr1):
    [expr1:
      [list(junk):]
      [mod_expr: IDENT IDENT LPAREN]
      [list(junk):]
    ]
    [list(expr1):]
  ]
  EOF
] 
```

但是，当然，如果有一个 IDENT 出现在其中任何一个之前，它将 REJECT：

```
IDENT MODULE IDENT LPAREN IDENT IDENT LPAREN
REJECT 
```

...当然，在这些defs之前的实际verilog文件中会有标识符。

我试图不必完全指定 Verilog 语法，而是希望慢慢地、增量地构建语法，以最终解析越来越多的语言。

如果我将 IDENT 添加到垃圾规则中，则可以解决上述问题，但是模块实例化规则不起作用，因为现在垃圾规则正在捕获 IDENT。

是否可以创建一个非常宽松的规则来绕过我不想匹配的内容，或者通常要求您必须创建一个完整的语法才能实际执行此类操作？

是否可以创建一个让我匹配的规则：

```
MODULE IDENT LPAREN stuff* RPAREN ENDMODULE 
```

其中“stuff*”最初匹配除 RPAREN 之外的所有内容？

就像是 ：

```
stuff: 
  | !RPAREN { } ; 
```

我过去使用过允许这样的构造的 PEG 解析器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:12:53.420

我认为 PEG 更适合宽松的、非详尽的语法。看了一下[peg/leg](http://piumarta.com/software/peg/)并能够非常快速地整理出一个腿语法来完成我需要做的事情：

```
start   = ( comment | mod_match | char)

line    = < (( '\n' '\r'* ) | ( '\r' '\n'* )) > { lines++;  chars += yyleng; }
module_decl =    module  modnm:ident lparen ( !rparen . )* rparen   {  chars += yyleng; printf("Module    decl: <%s>\n",yytext);}
module_inst = modinstname:ident ident lparen { chars += yyleng; printf("Module Inst: <%s>\n",yytext);}
         |modinstname:ident hash lparen { chars += yyleng; printf("Module Inst: <%s>\n",yytext);} 

mod_match = ( module_decl | module_inst ) 
module     =  'module' ws                { modules++;    chars +=yyleng; printf("Module: <%s>\n", yytext);  } 
endmodule  = 'endmodule' ws              { endmodules++; chars +=yyleng; printf("EndModule: <%s>\n", yytext); } 

kwd = (module|endmodule)
ident   = !kwd<[a-zA-z][a-zA-Z0-9_]+>-    { words++;  chars += yyleng;  printf("Ident: <%s>\n", yytext);  }

char    = .                 { chars++; }
lparen  =  '(' - 
rparen  =  ')' - 
hash    =  '#' 

- =  ( space | comment )*
ws = space+
space = ' ' | '\t' | EOL
comment = '//' ( !EOL .)* EOL
          | '/*' ( !'*/' .)* '*/' 
EOF = !.
EOL = '\r\n' | '\n' | '\r' 
```

[Aurochs](https://github.com/berke/aurochs)可能也是一种选择，但我担心 Aurochs 生成的解析器的速度和内存使用情况。peg/leg 用 C 语言生成一个解析器，应该非常快。

# python - Python 生成器表达式 if-else

> ID：12113162
> 
> 赞同：4
> 
> 时间：2012-08-24T16:22:19.157
> 
> 标签：python, generator-expression

我正在使用 Python 解析一个大文件。我想做的是

```
If condition =True
   append to list A
else 
   append to list B 
```

我想为此使用生成器表达式 - 以节省内存。我正在输入实际代码。

```
def is_low_qual(read):
    lowqual_bp=(bq for bq in phred_quals(read) if bq < qual_threshold)  
    if iter_length(lowqual_bp) >  num_allowed:
        return True
    else:
        return False  

lowqual=(read for read in SeqIO.parse(r_file,"fastq") if is_low_qual(read)==True)
highqual=(read for read in SeqIO.parse(r_file,"fastq") if is_low_qual(read)==False)

SeqIO.write(highqual,flt_out_handle,"fastq")
SeqIO.write(lowqual,junk_out_handle,"fastq")

def iter_length(the_gen):
    return sum(1 for i in the_gen) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T16:30:50.080

您可以与and`itertools.tee`结合使用：`itertools.ifilter``itertools.ifilterfalse`

```
import itertools
def is_condition_true(x):
    ...

gen1, gen2 = itertools.tee(sequences)
low = itertools.ifilter(is_condition_true, gen1)
high = itertools.ifilterfalse(is_condition_true, gen2) 
```

`tee`即使序列本身是生成器，使用也可确保函数正常工作。

但是请注意，如果和以不同的速率消耗（例如，如果在使用之前耗尽），它`tee`本身可能会使用相当多的内存（最多为 size 的列表）。`len(sequences)``low``high``low``high`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:31:07.267

我认为您正在努力避免两次迭代您的集合。如果是这样，这种方法有效：

```
high, low = [], []
_Nones = [high.append(x) if is_condition_true() else low.append(x) for x in sequences] 
```

这可能不是建议的，因为它使用列表理解来解决副作用。这通常是反pythonic。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T16:46:59.830

只是添加一个更一般的答案：如果您主要关心的是内存，您应该使用*一个*循环遍历整个文件的生成器，并处理每个项目的低或高。就像是：

```
for r in sequences:
    if condition_true(r):
        handle_low(r)
    else:
        handle_high(r) 
```

如果您需要在使用之前收集所有高/低元素，那么您无法防范潜在的内存命中。原因是您在阅读它们之前无法知道哪些元素是高/低的。如果你必须先处理低，而事实证明所有元素实际上都是高的，你别无选择，只能将它们存储在一个列表中，这将占用内存。使用一个循环执行此操作可以让您一次处理一个元素，但您必须平衡这一点与其他问题（即，以这种方式执行此操作有多麻烦，这将取决于您正在尝试做什么与数据）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T16:31:58.840

这很难优雅地做到。这是可行的：

```
from itertools import tee, ifilter, ifilterfalse
low, high = [f(condition, g) for f, g in zip((ifilter, ifilterfalse), tee(seq))] 
```

请注意，当您从一个生成的迭代器（例如`low`）中消费项目时， tee 中的内部双端队列必须扩展以包含您尚未消费的任何项目`high`（包括，不幸的是，那些`ifilterfalse`将拒绝的项目）。因此，这可能不会像您希望的那样节省内存。

这是一个使用尽可能少的额外内存的实现：

```
def filtertee(func, iterable, codomain=(False, True)):
    it = iter(iterable)
    deques = dict((r, deque()) for r in codomain)
    def gen(mydeque):
        while True:
            while not mydeque:          # as long as the local deque is empty
                newval = next(it)       # fetch a new value,
                result = func(newval)   # find its image under `func`,
                try:
                    d = deques[result]  # find the appropriate deque, and
                except KeyError:
                    raise ValueError("func returned value outside codomain")
                d.append(newval)        # add it.
            yield mydeque.popleft()
    return dict((r, gen(d)) for r, d in deques.items()) 
```

这会将 a`dict`从函数的 codomain 返回到生成器，该生成器提供在 下采用该值的项目`func`：

```
gen = filtertee(condition, seq)
low, high = gen[True], gen[False] 
```

请注意，您有责任确保`condition`仅返回`codomain`.

# c# - 扩展方法解决方案

> ID：12113163
> 
> 赞同：2
> 
> 时间：2012-08-24T16:22:23.677
> 
> 标签：c#, .net, extension-methods

我有一些代码来指示我的**WinForm**上的字段何时发生更改。

如果[Control](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.aspx)是[TextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.aspx)，我会根据 Control 的 Text 是否等于默认（或初始）值来更改[ForeColor](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.forecolor.aspx)和[BackColor 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.backcolor.aspx)

```
private void LastName_Changed(object sender, EventArgs e) {
  if (sender.Equals(txtLastName)) {
    if (emp0.LastName != txtLastName.Text) {
      txtLastName.ForeColor = changedTxtFont;
      txtLastName.BackColor = changedTxtBack;
      btnOK.Enabled = true;
    } else {
      txtLastName.ForeColor = systemTxtFont;
      txtLastName.BackColor = systemTxtBack;
    }
    AuthenticationReset();
  }
} 
```

如果 Control 是[DateTimePicker](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.aspx)或[ComboBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx)，我真的不能这样做（没有可见的 ForeColor 或 BackColor），所以我更改了与 Control 关联的 Label。

```
private void TrainDate_Changed(object sender, EventArgs e) {
  if (sender.Equals(dtTrainDate)) {
    DateTime trainDate = Global.SqlDate(emp0.TrainDate);
    if (trainDate != dtTrainDate.Value) {
      lblTrainDate.ForeColor = changedLblFont;
      lblTrainDate.BackColor = changedLblBack;
      btnOK.Enabled = true;
    } else {
      lblTrainDate.ForeColor = systemLblFont;
      lblTrainDate.BackColor = systemLblBack;
    }
    AuthenticationReset();
  }
} 
```

我想创建某种[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)，可以根据控件是什么以及值是否已更改来更改控件的 ForeColor 和 BackColor。

这是一个尝试，但`this`在代码中的使用无效，并且扩展方法不会出现在我想要使用它们的任何控件上。

```
public static class ColorChange {

  public static Color ForeColorChange(this Color owned, bool changed) {
    if (this is TextBox) {
      return changed ? Color.Red : SystemColors.WindowText;
    } else {
      return changed ? Color.Red : SystemColors.ControlText;
    }
  }

  public static Color BackColorChange(this Color owned, bool changed) {
    if (this is TextBox) {
      return changed ? Color.Yellow : SystemColors.Window;
    } else {
      return SystemColors.Control;
    }
  }

} 
```

有没有办法接近我正在尝试做的事情，或者这不是扩展方法的用途？

我想结束这样的事情：

```
private void TrainDate_Changed(object sender, EventArgs e) {
  if (sender.Equals(dtTrainDate)) {
    DateTime trainDate = Global.SqlDate(emp0.TrainDate);
    if (trainDate != dtTrainDate.Value) {
      lblTrainDate.ForeColorChange(true);
      lblTrainDate.BackColorChange(true);
      btnOK.Enabled = true;
    } else {
      lblTrainDate.ForeColorChange(false);
      lblTrainDate.BackColorChange(false);
    }
    AuthenticationReset();
  }
} 
```

**解决方案：**

使用下面检查的答案，我编写了以下扩展方法：

```
public static class ColorChange {
  public static void AlteredText(this Control owned, bool changed) {
    if (owned is TextBox) {
      owned.ForeColor = changed ? Color.Red : SystemColors.WindowText;
      owned.BackColor = changed ? Color.Yellow : SystemColors.Window;
    } else {
      owned.ForeColor = changed ? Color.Red : SystemColors.ControlText;
      owned.BackColor = SystemColors.Control;
    }
  }
} 
```

以下是我将如何使用它：

```
private void TrainDate_Changed(object sender, EventArgs e) {
  if (sender.Equals(dtTrainDate)) {
    DateTime trainDate = Global.SqlDate(emp0.TrainDate);
    if (trainDate != dtTrainDate.Value) {
      lblTrainDate.AlteredText(true);
      btnOK.Enabled = true;
    } else {
      lblTrainDate.AlteredText(false);
    }
    AuthenticationReset();
  }
} 
```

我希望其他人也能从中受益。〜乔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T16:26:20.667

您已经为`Color`类定义了扩展方法，而不是`Control`，这就是它不会显示控件的原因。此外，您的方法可能想要检查`owned`您需要传入的控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:26:57.703

使用 your`owned`而不是`this`.. 哦，正如 Rowland Shaw 所说，`Control`而不是`Color`.

所以你的代码最终应该是

```
public static Color ForeColorChange(this Control owned, bool changed) {
  if (owned is TextBox) {
    return changed ? Color.Red : SystemColors.WindowText;
  } else {
    return changed ? Color.Red : SystemColors.ControlText;
  }
}

public static Color BackColorChange(this Control owned, bool changed) {
  if (owned is TextBox) {
    return changed ? Color.Yellow : SystemColors.Window;
  } else {
    return SystemColors.Control;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T16:29:12.757

这扩展了 Control 而不是 Color（需要在静态类中定义）：

```
public static void ForeColorChange(this Control owned, bool changed) {
  if (owned is TextBox) {
    owned.ForeColor = changed ? Color.Red : SystemColors.WindowText;
  } else {
    owned.ForeColor = changed ? Color.Red : SystemColors.ControlText;
  }
}

public static void BackColorChange(this Control owned, bool changed) {
  if (owned is TextBox) {
    owned.BackColor = changed ? Color.Yellow : SystemColors.Window;
  } else {
    owned.BackColor =  SystemColors.Control;
  }
} 
```

用法：

```
TextBox box = ...;
box.ForeColorChange(true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T16:29:37.950

如果要在文本框上调用扩展方法，则必须在命名空间的顶层执行此操作：

```
public static class Extensions
{
  public static void myExtensionMethod(this Textbox textbox)
  {
    //Do what you want to do
  }
} 
```

然后可以通过您的文本框访问它：

```
Textbox myTextbox = new Textbox();
myTextbox.myExtensionMethod(); 
```

如果需要，您还可以将参数传递给您的扩展方法。

# objective-c - 如何使用保存其名称的字符串访问常量

> ID：12113167
> 
> 赞同：1
> 
> 时间：2012-08-24T16:22:36.253
> 
> 标签：objective-c, macos, cocoa

我有一个定义几百个常量的 .h 文件。让我们假设这是其中之一：

```
#define KDSomeItem      1 
```

我知道 Objective-C 运行时 API 可用于检索实例变量名称列表：就像在这个问题中详述的那样：[How do I list all fields of an object in Objective-C?](https://stackoverflow.com/questions/1213901/how-do-i-list-all-instance-variables-of-a-class-in-objective-c) 我也知道 getter`[object valueForKey:theName]`可用于访问我之前的问题中发现的 ivars：[如何使用保存其名称的字符串访问属性/变量](https://stackoverflow.com/questions/12109762/how-to-access-a-property-variable-using-a-string-holding-its-name)

我的问题是可以用常量做类似的事情吗？那就是我可以：

a) 以编程方式获取所有常量的列表

b）如果我有一个字符串保存其名称，则访问一个常量

例如，如果我有一个这样的字符串，`NSString * theName = @"KDSomeItem";`我可以使用这个字符串来评估我的常量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:26:39.153

您将无法做到这一点：与实例变量不同，`#define`-d 常量在预处理器处理完它们后不会留下痕迹。它们不会留下任何元数据 -甚至在 Objective C 编译器正确分析您的代码之前，`KDSomeItem`程序主体中的所有实例都将被替换。`1`

如果您需要在运行时使用常量名称，则需要自己构建所有必要的元数据。为此，您可能需要查看预处理器的“字符串化”运算符：

```
#define STR(X) #X 
```

此宏可应用于预处理器常量，并生成带有其名称的 C 字符串文字：

```
const char *nameOfKDSomeItem = STR(KDSomeItem); // same as "KDSomeItem" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:28:11.937

没有。您的常量是一个预处理器宏。它以文本形式替换到您使用它的源代码中。

# eclipse - Eclipse java.lang.ClassNotFoundException - 类最肯定在构建路径上

> ID：12113171
> 
> 赞同：0
> 
> 时间：2012-08-24T16:22:45.880
> 
> 标签：eclipse, tomcat7, classnotfoundexception, buildpath

我无法在我的 Tomcat 7.0 服务器上启动我的 Eclipse JSF 项目，因为我不断收到这个 ClassNotFound 错误，但我可以清楚地导航到 src 文件夹中的类，并且我已经确认包含的包在项目构建路径上。我还应该寻找什么来解决这个问题？昨天还好好的，现在关了电脑，今天又回来了，结果发现这个。。

# javascript - 如何将 jquery ui 与 requirejs 一起使用

> ID：12113172
> 
> 赞同：40
> 
> 时间：2012-08-24T16:22:45.827
> 
> 标签：javascript, jquery-ui, requirejs

我想`addClass`在我的应用程序中使用 jQuery UI 的功能。

除此之外，我使用的是普通的 jQuery、下划线、主干，所有这些都与 requirejs 一起分层。

我已经像这样配置了 jQuery UI：

```
require.config({

    deps: ["main"],

    paths: {
        "text": "lib/text"
        , "jquery": "lib/jquery"
        , "jquery-ui": "lib/jquery-ui"
        , "underscore": "lib/underscore"
        , "backbone": "lib/backbone"
        , "bootstrap": "lib/bootstrap"
        , "templates": "../templates"
    },

    shim: {
        "jquery-ui": {
            exports: "$",
            deps: ['jquery']
        },
        "underscore": {
            exports: "_"
        },
        "backbone": {
            exports: "Backbone",
            deps: ["underscore", "jquery"]
        },
        "bootstrap": ['jquery']
    }

}); 
```

在我做的应用程序中：

```
define(['jquery', 'underscore', 'backbone'], function($, _, Backbone) {
    $('div').addClass('white');
}); 
```

不幸的是，这只是正常`addClass`的，而不是来自 jQuery UI 的动画。

PS：我使用完整的 jQuery 版本。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-24T16:26:09.270

您需要包括 jquery-ui：

```
define(['jquery-ui', 'backbone'], function() {
    $('div').addClass('white');
}); 
```

jquery 应该是自动需要的，因为它是 jquery-ui 的依赖项

此外，这些脚本都不返回任何内容，但它们的变量被分配给窗口对象。无需分配它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T16:26:34.707

尝试

```
define(['jquery', 'jquery-ui', 'underscore', 'backbone'], function($, ui, _, Backbone) {
    // $.ui should be defined, but do
    // $.ui = ui if its not
    $('div').addClass('white');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T18:38:10.673

有时您只需要一小部分 jQuery UI。例如，我最近需要可排序的，但如果我试图加载整个东西，那么我`$.button()`在 jquery-ui 和`$.button()`bootstrap 之间会发生冲突。jQuery UI 现在支持 AMD，所以我使用 RequireJS 的构建工具 r.js 来构建我需要的子集。

# javascript - html5 canvas - 如何拉伸文本？

> ID：12113177
> 
> 赞同：5
> 
> 时间：2012-08-24T16:23:07.517
> 
> 标签：javascript, jquery, html, canvas

在我的`html 5`画布中，我绘制文本（必须在 1 行），但它需要是恒定的字体大小和样式，并且我拥有的空间宽度也是恒定的。因此，文本需要适合该空间，但是当文本太长并超出空间时会出现问题。

那么有没有办法可以水平拉伸/压缩文本？（就像在 PhotoShop 中一样）

将其转换为图像然后更改图像的宽度之类的东西？不确定这是否是最好的方法...

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T16:44:27.693

您可以`measureText`先确定文本的大小，然后根据需要缩放画布：http: [//jsfiddle.net/eGjak/887/](http://jsfiddle.net/eGjak/887/)。

```
var text = "foo bar foo bar";
ctx.font = "30pt Arial";

var width = ctx.measureText(text).width;
if(width <= 100) {
    ctx.fillText(text, 0, 100);
} else {
    ctx.save();
    ctx.scale(100 / width, 1);
    ctx.fillText(text, 0, 100);
    ctx.restore();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T16:26:41.250

一个简单的解决方案是在另一个（内存中）画布中绘制文本，然后使用 drawImage 将画布内容粘贴到真实的目标画布中。

像这样的东西（让它可以根据您的需要进行参数化，这里以 100 到 80 的比例拉伸）：

```
var tempimg = document.createElement('canvas');
tempimg.width = 100;
tempimg.height = 10;
oc = tempimg.getContext('2d');
oc.fillText(...)
yourdestcontext.drawImage(tempimg, 0, 0, 100, 10, x, y, 80, 10); 
```

# java - 无法使用 Netbeans 7.1.2 访问 servlet 中的文件资源

> ID：12113179
> 
> 赞同：1
> 
> 时间：2012-08-24T16:23:24.437
> 
> 标签：java, servlets, netbeans

我正在运行 Netbeans 7.1.2，我正在尝试访问 servlet 中的一些文本文件：

```
package com.optimizations.cutting;

@WebServlet(name = "Servlet", urlPatterns = {"/Servlet"})
public class Servlet extends HttpServlet {
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

    System.out.println("in servlet "+System.currentTimeMillis());

    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {

        DataManager dm = new DataManager();
        SheetInfo si = dm.loadSheetInfoCSV("sheetInfo.csv");
        ArrayList<Piece> pieces = dm.loadPiecesCSV("res/pieces4.csv");
.... 
```

我已将`sheetInfo.csv`和`pieces4.csv`文件放置在我能想到的任何地方，并尝试在前面加上反斜杠（`/sheetInfo.csv`或`/res/pieces4.csv`）来访问它们

当我说“我能想到的所有地方”时，我的意思是：当前目录（源包），旁边`Servlet.java`以及我创建的所有其他文件（包括`DataManager.java`使用它的文件）。我也在`"Add folder"`- `Properties window`> `Sources`->中做了`Package Folder`。（添加了 2 个文件夹，只是为了确保）。所以我亲爱的文件同时在 3 个地方：

*   `src/java/com/optimizations/cutting` 旁边`Servlet.java`和`DataManager.java`

*   `src/java/res`

*   `src/resources` 但我还是会得到

    ```
    SEVERE: java.io.FileNotFoundException: resources/pieces4.csv (No such file or directory)

    at java.io.FileInputStream.open(Native Method)

    at java.io.FileInputStream.<init>(FileInputStream.java:138)

    at java.io.FileInputStream.<init>(FileInputStream.java:97)

    at java.io.FileReader.<init>(FileReader.java:58)

    at com.optimizations.cutting.DataManager.loadPiecesCSV(DataManager.java:98)` 
    ```

我还重新启动了服务器（Glassfish 3.1.2）

（也许这看起来很傻，但我还需要知道我应该在哪里以及如何放置我的文件，以便可以从客户端和服务器访问它们 - 我的 servlet 将创建一些图像（.jpg）并存储它们（在哪里？）和将文件名发送回.jsp，然后将它们显示在颜色框中）

提前致谢。

**编辑**

在 DataManager.java 中添加了更多错误行和调用：

```
public SheetInfo loadSheetInfoCSV(String filename){
    ....
    br = new BufferedReader( new FileReader(filename));
    String strLine = "";            

    //read comma separated file first line
    if ((strLine = br.readLine()) != null)
    .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:01:33.183

异常表明您正在使用它`FileInputStream`来获取`InputStream`它。当资源涉及类路径资源（您尝试将其放入的所有位置都是类路径的一部分）时，这不是正确的方法。您应该将类​​路径资源作为类路径资源使用`ClassLoader#getResourceAsStream()`，而不是作为本地磁盘文件系统资源使用`FileInputStream`。

如果资源文件`foo.ext`与您尝试加载资源的类（即`DataManager`类）放在同一个包中，那么您可以`InputStream`通过其唯一文件名使用 get an 它，如下所示：

```
InputStream input = getClass().getResourceAsStream("foo.ext"); 
```

或者当您在`static`上下文中时：

```
InputStream input = DataManager.class.getResourceAsStream("foo.ext"); 
```

如果资源`foo.ext`被放置在与您尝试加载资源的类不同的包中，例如`com.example`包，那么您可以`InputStream`通过其类路径相对路径获取它，如下所示，其中前导斜杠`/`将您带到类路径的根：

```
InputStream input = getClass().getResourceAsStream("/com/example/foo.ext"); 
```

同样在这里，只要类是由可以访问相同包结构的相同加载的，`getClass()`就可以用 arbitraty 代替。`Foo.class``ClassLoader`

另一种方法是使用`ClassLoader`从当前线程获得的上下文。它可以访问*一切*。您只能指定类路径相对路径，它始终相对于类路径的根目录（因此`/`不应使用前导斜杠）：

```
InputStream input = Thread.currentThread().getContextClassLoader().getResourceAsStream("com/example/foo.ext"); 
```

# sql-server-2008 - 前一天的 SQL 表结果不准确

> ID：12113181
> 
> 赞同：0
> 
> 时间：2012-08-24T16:23:28.540
> 
> 标签：sql-server-2008, datetime-format

我在包设置中运行了以下查询，该设置在包含以下列的表中获取前一天的记录：

```
url, author, dateadded 
```

现在添加的日期为日期时间格式，如下 2012-08-23 23:58:42.000 和查询如下：

```
SELECT [authorUrl],[author],
[dateadded]
FROM [Feeds].[dbo].[DataFeed]
where dateadded  > dateadd(day,datediff(day, 0, getdate()-1), 0)  
and dateadded  < dateadd(day,datediff(day, 0, getDate()), 0) 
```

现在，此查询的计数与以下查询的计数不匹配，我必须每天更改以插入日期：

```
SELECT [authorUrl]
  ,[author]
       ,[dateadded]
FROM [Feeds].[dbo].[DataFeed]
where dateadded > '2012-08-22 23:59:59' and dateadded < '2012-08-23 23:59:59' 
```

我在这里缺少什么吗？

也许我应该强调 date added 列是我编辑的（从应用程序插入），而不是 sql 本身自动插入的日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:41:26.470

停止对日期范围使用奇怪的边缘和不必要的复杂表达式。由于您是 2008 年，因此获得昨天的正确方法是：

```
DECLARE @d DATE = SYSDATETIME();

SELECT ... FROM ... 
  WHERE DateAdded >= DATEADD(DAY, -1, @d) 
  AND DateAdded < @d; 
```

或者，您可以利用 SQL Server 2008 使该查询成为 sargable 的事实（这在您能想象到的几乎所有其他情况下都不起作用）：

```
SELECT ... FROM ...
  WHERE CONVERT(DATE, DateAdded) 
    = DATEADD(DAY, -1, CONVERT(DATE, SYSDATETIME())); 
```

# php - Concrete5 用户属性

> ID：12113182
> 
> 赞同：1
> 
> 时间：2012-08-24T16:23:34.957
> 
> 标签：php, concrete5

我想出了如何单独解决这个问题

显示用户属性：

```
<?php
 //Create a User object (of the current User)  
 $u = new User();  
 //Creat a UserInfo object with the user ID  
 $ui = UserInfo::getByID($u->getUserID());  
 //Get the Value of your user Attribute  
 $value = $ui->getAttribute('name');  
 //Print it out  
 echo $value;  
?> 
```

显示页面所有者：

```
<?php 
 $ownerID = $cobj->getCollectionUserID();
 $uia = UserInfo::getByID($ownerID);
 $ownerName = $uia->getUserName();
 echo $ownerName 
?> 
```

但我不知道如何把它们放在一起，所以它显示属性（'name'）；页面所有者的

你们能帮忙吗

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:31:26.157

在使用代码移动一点之后。我发现我只需要移动

```
$cobj->getCollectionUserID(); 
```

进入

```
$ui = UserInfo::getByID($u->getUserID()); 
```

所以完成的代码：

```
<?php                   
 //Creat a UserInfo object with the Owner 
 $ui = UserInfo::getByID($cobj->getCollectionUserID() );  
 //Get the Value of your user Attribute  
 $value = $ui->getAttribute('name');  
 //Print it out  
 echo $value;  
?> 
```

# java - 日志记录应该有多深？

> ID：12113183
> 
> 赞同：3
> 
> 时间：2012-08-24T16:23:37.143
> 
> 标签：java, validation, logging

要绘制一个场景，请考虑以下*逻辑省略服务*

```
public class Service {
   private Validator validator;

   public void submit(Foo foo) {
      if (!validator.isValid(foo)) {
         log.warn("invalid foo");
      } ...
   }
} 
```

```
public interface Validator {
   boolean isValid(Foo foo);
} 
```

问题是**只有**它`Validor`自己知道验证失败的*原因。*我只看到了两种可行的方法来调整这个*原因*。无论是`Validator`

*   记录失败条件本身
*   返回一个包含字符串**原因**和布尔值**isValid**的复杂对象。

前者很好，但会让人`Service`不知道是否实际执行了日志记录，而后者引入了烦人的冗余和更复杂的用法。

哪个更喜欢，或者，有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:33:37.823

您必须问自己一个问题：您的客户是否关心验证失败的原因？答案是：*这取决于*. 在许多情况下，您希望准确地告知最终用户验证失败的原因。在这种情况下，返回“复杂”的验证结果对象（这里不要使用异常！），本质上是包装字符串或代码的集合（以允许[i18n](/questions/tagged/i18n "显示标记为“i18n”的问题")）。该`ValidationResult`对象将是一个业务对象，而不是一些二等助手。

在其他情况下，您只想根据对象是否有效做出决定。调用代码（客户端）不太关心验证的内部逻辑。它是有效的还是无效的。然后走直线`boolean`法。出于调试目的，在验证方法中添加日志记录。根据您的需要打开/关闭它们。

你知道最好的部分是什么吗？您可以有两种方法并使用更适合客户端代码的方法。显然，不太复杂的`boolean`方法只委托给更复杂的方法并提供更简单的*视图*：

```
boolean isValid(Foo foo) {
    validate(foo).isValid();
}

ValidationResult validate(Foo foo) {
    //logging and "real" validation
} 
```

# iphone - iOS 异步 NSURLConnection 在与调用它的视图不同的视图上触发行为

> ID：12113184
> 
> 赞同：0
> 
> 时间：2012-08-24T16:23:41.317
> 
> 标签：iphone, ios, ipad

我和我的团队目前是 Objective-C 的新手开发人员（不到 3 个月），致力于开发一个简单的基于选项卡的应用程序，该应用程序具有网络功能，其中包含一个带有表格视图和每个选项卡中相应详细视图的导航控制器。目标是 iOS 4 sdk。

在网络方面，我们有一个作为 Singleton 的类，它处理每个视图的 NSURLConnection，以便检索每个表视图所需的数据。

该功能运行良好，我们可以正确检索数据，但前提是用户在请愿结束或再次按下同一请愿的按钮（例如：登录按钮）之前不更改视图。否则，可能会发生不同的错误。例如，只应在其中一个导航控制器的根视图上显示的错误消息出现在详细视图上，反之亦然。

我们怀疑问题在于我们目前仅在 Singleton 上处理“活动视图”的单个委托，我们应该更改它以支持基于本机邮件应用程序的行为，您可以在其中更改视图，而数据在每个视图中都被要求分别正确加载和更新。

我们查看了 stackoverflow 和其他网站，但没有找到合适的方法来遵循。我们正在考虑使用 NSOperationQueue 并将 NSURLConnections 包装在 NSOperation 上，但我们不确定这是否是正确的方法。

是否有人对处理多个异步 NSURLConnections 以更新多个视图（包括父视图和子视图）的正确方法有任何建议，几乎同时在用户交互的同时进行？理想情况下，我们不想按照我们的建议阻止 UI 或禁用按钮。

感谢您的时间！

编辑 - 忘了补充，我们客户端设置的项目限制之一是我们只能使用原生 iOS sdk 网络框架，而不能使用 ASIHTTPRequest 框架或类似框架。同时，我们也忘了补充一点，我们没有上传任何信息，我们只是从 WS 中检索它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:30:35.787

一个建议是使用 NSOperations 和 NSOperationsQueue。这种安排的好处是您可以快速取消任何正在进行的或排队的工作（如果说用户点击后退按钮。

在 github 上有一个项目，[NSOperation-WebFetches-MadeEasy](https://github.com/dhoerl/NSOperation-WebFetches-MadeEasy)，它使这变得尽可能轻松。你在你的类中加入了一个类——OperationsRunner——它在 OperationsRunner.h 中带有一个“如何使用我”，以及两个骨架 NSOperations 类，一个是另一个的子类，子类显示如何获取图像。

我相信其他人会发布其他解决方案——这几乎是一个开始的问题，因为有大量的库和项目这样做。也就是说，OperationsRunner 是 100 多行代码，操作也差不多，所以它真的很容易阅读、理解、使用和修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:21:42.350

你说你的单身人士有一个代表。当多个对象对结果感兴趣时，委派是不合适的。如果您希望继续使用单例获取数据，则必须将模式切换为基于通知​​。您的单身人士将负责确定哪个连接对应于哪个任务，并选择要发布的适当通知。

如果您仍然需要这方面的帮助，请告诉我，我会尝试发布一些示例代码。

# r - 在 rscript 中加载 Rdata 文件

> ID：12113185
> 
> 赞同：4
> 
> 时间：2012-08-24T16:23:44.033
> 
> 标签：r

我正在尝试在 rscript 中加载 .Rdata 文件来操作数据等。

当我在 R 控制台 int 中执行此操作时：

```
load("R.RData")
x<-Data ##Data is the object in R.data file 
```

但是当我把它放在一个脚本中时，我得到了错误：

```
 object of type 'environment' is not subsettable 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T16:26:33.327

您可以创建环境并将数据加载到环境中。

```
tmpenv <- new.env()
load("R.RData", envir=tmpenv)
x <- tmpenv$Data 
```

# java - 渲染 Play framework 2.0.2 模板的一部分

> ID：12113192
> 
> 赞同：3
> 
> 时间：2012-08-24T16:24:14.473
> 
> 标签：java, scala, playframework, playframework-2.0

我是 Play 新手（老实说，我也是 MVC 新手）。我遇到了一个看起来不应该那么难的问题。

我刚刚发现了这个同名的帖子： [Rendering a part of a Play framework 2.0 template](https://stackoverflow.com/questions/11153615/rendering-a-portion-of-a-play-framework-2-0-template)

但我似乎无法让这个工作。

我有一个模板（索引），其中包含另一个模板（行），我想在单击按钮时呈现该模板（索引）。这是我的索引模板中的表格：

```
@form(routes.Application.getNextRows()) {<input type="submit" value="Next Rows!">} 
```

这是getNextRows：

```
public static Result getNextRows() {
    return ok(views.html.tags.rows.render(rowsIterator.next()));
} 
```

这就是我认为我有问题的地方，但我不知道我应该如何进行那个调用，或者我应该返回什么（没有得到一些 NullPointerException）。

这是需要重新渲染的位（在索引中）：

```
<table cellspacing="0"  style="table-layout:fixed"  border="2">
    <col width="50%">
    <col width="45%">
    <col width="5%">
    @tags.rows(rowsIterator.first())
</table> 
```

因此，当我单击按钮时，我需要传入一个新的行元素，而不是“rowsIterator.first()” 大概我做错了什么，或者错过了一些明显的调用来解决这个问题。

感谢您的帮助（如果很明显我错过了一些更大的概念，请随时教育我）。

* * *

查看 Zentasks 示例，我看到这样的代码，它似乎使页面的一部分重新加载。知道这是如何工作的吗？

```
<a class="name" href="#@routes.Tasks.index(project.id)">@project.name</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:58:20.983

很抱歉没有为您提供完整的解决方案，但恕我直言，您应该首先深入了解基础知识。

您的操作方法返回整个页面，而不仅仅是其中的一部分，因为它是完整的 HTTP 响应。这意味着您在该操作中调用的任何内容都是您的浏览器将呈现的内容。`getNextRows`需要一个参数来查找下一行。要仅更改页面的一部分，您需要 AJAX。

单击按钮应使用下一组行重新呈现索引页面。`rows`作为参数添加到索引模板。使用这些行调用您的行模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T06:38:10.720

从静态字段中获取该状态的几种可能性（肯定不会很好）：

*   将所有行返回给客户端，让它在 JavaScript 中完成其余的工作（如果数据过多，则效果不佳）
*   存储会话中最新行的编号（在 cookie 中）
*   显式处理行号并让客户端在需要下一个时返回它
*   进行RESTful 分页（请参阅REST[集合](https://stackoverflow.com/questions/924472/paging-in-a-rest-collection)中的分页和[REST Web 应用程序中的分页](https://stackoverflow.com/questions/776448/pagination-in-a-rest-web-application)）
*   尝试利用分布式缓存

# entity-framework-4.1 - context.SaveChanges() 不更新 SqlServer 数据库中的数据

> ID：12113193
> 
> 赞同：2
> 
> 时间：2012-08-24T16:24:15.963
> 
> 标签：entity-framework-4.1

当我调用`context.SaveChanges()`更新特定产品时，更新未在数据库中注册。我也没有收到任何运行时错误。我只注意到我的产品目录没有更新。我仍然看到相同的价值观。当我运行调试器时，我注意到数据库的连接状态是关闭的。

这是实现 context.SaveChanges() 的类

```
namespace SportsStore.Domain.Concrete
{
   public class EFProductRepository : IProductRepository
   {
       private EFDbContext context = new EFDbContext();

       public IQueryable<Product> Products
       {
           get { return context.Products; }
       }

       public void SaveProduct(Product product)
       {
           if (product.ProductID == 0)
           {
               context.Products.Add(product);
           }

           context.SaveChanges();
       }
   }
 }

namespace SportsStore.Domain.Concrete
{
   public  class EFDbContext : DbContext
   {
     public DbSet<Product> Products { get; set; }
   }
}

namespace SportsStore.Domain.Entities
{
    public class Product
    {

      [HiddenInput(DisplayValue=false)]
      public int ProductID { get; set; }

      public string Name { get; set; }

      [DataType(DataType.MultilineText)]
      public string Description { get; set; }

      public string Category { get; set; }

      public decimal Price { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:50:17.943

在`EFProductRepository`类中，在方法中调用`context.SaveChanges()`方法之前`SaveProduct`，可以使用以下方法之一将更改持久化到数据库中。

```
public void SaveProduct(Product product)
{
    if (product.ProductID == 0)
    {
       context.Products.Add(product);
    }
    //One approach to persist changes to database
    //var productInDB = context.Products.Single(x => x.ProductID ==product.ProductID);
    //context.Entry(productInDB).CurrentValues.SetValues(product);
    //context.SaveChanges();

    //Alternate Approach
    if (product.ProductID != 0)
    {
       context.Entry(product).State = System.Data.EntityState.Modified;
    }
    context.SaveChanges();
} 
```

# android - 如何在动态微调器中检索所选项目的 ID？

> ID：12113195
> 
> 赞同：5
> 
> 时间：2012-08-24T16:24:19.820
> 
> 标签：android, sqlite, object, spinner

我有一个微调器，其中填充了`Category`从数据库中检索到的对象。Categories 表有`_id`和`category_name`列。我想在微调器中显示类别名称，但是当用户选择一个项目时，我需要它来检索所选项目的 ID。我尝试了以下方法：

声明变量（在类级别）：

```
int currCategoryId;

ArrayAdapter<String> adapter;

NotesManager manager = new NotesManager(this);
ArrayList<Category> arrListCategories; 
ArrayList<String> arrListCategoriesString = new ArrayList<String>();

Spinner spCategories; 
```

在方法中实例化它们`onCreate`：

```
manager.getAllCategories();
    arrListCategories = manager.getAllCategories();

    for (int i = 0; i < arrListCategories.size(); i++) 
    {
        Category currCategory = arrListCategories.get(i);
        arrListCategoriesString.add(currCategory.getCategory_name().toString());            
    }

    adapter=new ArrayAdapter<String> (this, android.R.layout.simple_spinner_item, arrListCategoriesString);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spCategories.setAdapter(adapter);
    spCategories.setOnItemSelectedListener(spinnerListener); 
```

这是我试过的 spinnerListener：

```
OnItemSelectedListener spinnerListener = new OnItemSelectedListener() 
    {       
        public void onItemSelected(AdapterView<?> parent, View view, 
                int pos, long id) {
            // An item was selected.
            //currCategory = (String) parent.getItemAtPosition(pos).toString(); 
            //selectedCategory = 
            Category selectedCategory = (Category)spCategories.getItemAtPosition(pos);
            currCategoryId = selectedCategory.getId();

        }

        public void onNothingSelected(AdapterView<?> arg0) {    

        }                   
    }; 
```

但在这种情况下，应用程序崩溃，我得到一个“

> 在此行字符串不能转换为类别”：`Category selectedCategory = (Category)spCategories.getItemAtPosition(pos);`

我也试过这个：

```
currCategoryId = view.getId(); 
```

但是然后不是 1 或 2（取决于我选择的类别，目前我有 2 个），我得到一个很长的数字......

我该如何解决？如何检索所选对象的 ID？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T16:44:26.947

我会使用 a`SimpleCursorAdapter`因为它存储多个列，而不是`ArrayAdapter`只存储一个列。

**首先**更改`NotesManager.getAllCategories()`以返回`Cursor`使用：

```
"SELECT _id, category_name FROM Table;" 
```

如果需要，您可以按字母顺序排列结果：

```
"SELECT _id, category_name FROM Table ORDER BY category_name;" 
```

**接下来**将其直接绑定`Cursor`到您的 Spinner：

```
Cursor cursor = manager.getAllCategories();
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, cursor, new String[] {"category_name"}, new int[] {android.R.id.text1});
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spCategories.setAdapter(adapter); 
```

**最后**在你的`OnItemSelectedListener`一切准备就绪并等待：

```
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    // The parameter id already refers to your Category table's id column, 
} 
```

无需额外*`get()`调用*或*将*光标转换为列表！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T16:38:09.327

无论如何，您不能使用`ArrayAdapter`它，因为它仅适用于字符串（不是类别）。因此，为什么您会遇到强制转换异常。由于您的 Category`ArrayList`和 String `ArrayList`（用于`ArrayAdapter`）的顺序相同，因此只需使用

```
Category selectedCategory = arrListCategories.get(pos); 
```

在你的`onItemSelected()`方法中

# nsis - 从 DVD、NSIS 安装

> ID：12113196
> 
> 赞同：0
> 
> 时间：2012-08-24T16:24:20.023
> 
> 标签：nsis

我需要提示用户插入第二张光盘以继续安装。我可以提示用户插入光盘，但如何检测用户是否插入了光盘，如果已插入，我需要从 DVD 运行 setup.exe 文件。

```
MessageBox MB_YESNO|MB_ICONQUESTION  "Insert disc to install User Software or Click No to    proceed" /SD IDNO IDYES yes IDNO no
    yes:
        Call installUserSoftware
no: 
   ;do nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T22:39:43.883

如果您在其他问题的答案中使用代码，您现在应该有足够的关于枚举和检测驱动器的信息。

要检测正确的驱动器，您需要在光盘上查找特定内容，它可以像`IfFileExists`在具有已知名称的文件上使用一样简单，或者尝试从您知道存在于驱动器上的具有特定值的 .ini 文件中读取某些内容( `ReadINIStr`)。您甚至可以使用 .exe 或 .dll 检查版本信息`GetDLLVersion`。

# java - Java 在运行期望脚本时抛出 Process exitValue: 127

> ID：12113200
> 
> 赞同：2
> 
> 时间：2012-08-24T16:24:32.097
> 
> 标签：java, bash, cygwin, expect

我正在尝试一种新方法来解决我一直卡住的问题。而不是使用 expect4j 进行我的 SSH 连接，（我想不出阻止消费者运行和关闭问题的方法，如果你知识渊博并且感觉圣洁，请参阅过去的帖子以获取更多信息，）我要去尝试使用期望脚本。我有一个运行时 exec 编码到 button.onclick，见下文。为什么我得到 127 退出值？我基本上只需要这个expect脚本来ssh，运行一组expect并发送，给我读数，就是这样......

我正在使用cygwin。不确定这是否与为什么这不起作用有关……我的 sh-bang 线是否指向正确的位置？我的 cygwin 安装是完整安装，所有软件包都在 C:\cygwin 中。

为什么我得到 127 退出值而不是从我的服务器读取，我该如何缓解这种情况？

```
try
    {            
        Runtime rt = Runtime.getRuntime();
        Process proc = rt.exec( new String [] {"C:\\cygwin\\bin\\bash.exe", "C:\\scripts\\login.exp"});
        InputStream stdin = proc.getInputStream();
        InputStreamReader isr = new InputStreamReader(stdin);
        BufferedReader br = new BufferedReader(isr);
        String line = null;
        System.out.println("<OUTPUT>");
        while ( (line = br.readLine()) != null)
            System.out.println(line);
        System.out.println("</OUTPUT>");
        int exitVal = proc.waitFor();            
        System.out.println("Process exitValue: " + exitVal);
    } catch (Throwable t)
      {
        t.printStackTrace();
      }

#!/usr/bin/expect -f
spawn ssh userid@xxx.xxx.xxx.xxx password
match_max 100000
expect "/r/nDestination: "
send -- "xxxxxx\r"
expect eof 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T17:34:19.107

问题是您使用 bash 来执行期望脚本。您需要使用expect 来执行一个expect 脚本，或者bash 来通过一个shell 命令行来执行一个expect 脚本（即`Process proc = rt.exec( new String [] {"C:\\cygwin\\bin\\bash.exe", "-c", "C:\\scripts\\login.exp"});`，注意`"-c"`我插入的那个），它利用了脚本顶部的魔法shebang。或者更好，只使用shebang：`Process proc = rt.exec( new String [] {"C:\\scripts\\login.exp"});`

退出值 127 是一个特殊的退出值，它告诉您“找不到命令”。这是有道理的，因为您期望脚本包含许多不存在系统二进制文件或 shell 内置程序的单词。

# python - 我通过brew安装了python 2.7.3，但是virtualenv总是使用2.7.1，为什么？

> ID：12113202
> 
> 赞同：1
> 
> 时间：2012-08-24T16:24:43.453
> 
> 标签：python, virtualenv, homebrew, mac-frameworks

系统默认python为：

```
$ /usr/bin/python --version
Python 2.7.1 
```

我`$PATH`是

```
export PATH=/opt/local/bin:/opt/local/sbin:/usr/local/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/X11/bin 
```

我`python 2.7.3`通过安装`homebrew`，

```
$ brew install python --universal --framework 
```

并将其链接起来，

```
$ cd /System/Library/Frameworks/Python.framework/Versions
$ sudo mv Current _Current
$ sudo ln -s /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/Current 
```

但是当我制作一个virtualenv时，它仍然是`2.7.1`

```
$ python --version
Python 2.7.3

$ virtualenv venv
$ cd venv;source bin/activate
(venv) $ python --version
Python 2.7.1 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:22:08.087

来自 virtualenv 的帮助信息：

```
 -p PYTHON_EXE, --python=PYTHON_EXE
                        The Python interpreter to use, e.g.,
                        --python=python2.5 will use the python2.5 interpreter
                        to create the new environment.  The default is the
                        interpreter that virtualenv was installed with 
```

您可能使用 Python 2.7.1 安装了 virtualenv，它按设计工作。您可以使用 -p 选项在虚拟环境中使用另一个版本。

# asp.net - 使用 GData .NET Analytics API 时引发异常

> ID：12113204
> 
> 赞同：1
> 
> 时间：2012-08-24T16:24:53.257
> 
> 标签：asp.net, google-api, gdata

我在尝试从 GoogleAnalytics API 获取几天前运行良好的代码时遇到问题。

为此，我引用了以下 DLL：

```
Google.GData.Analytics.dll
Google.GData.Client.dll
Google.GData.Extensions.dll 
```

我正在使用以下代码：

```
Dim visits As String = String.Empty
Dim username As String = "myuser@mydomain.com"
Dim pass As String = "mypassword"

Const dataFeedUrl As String = "https://www.google.com/analytics/feeds/data"
Dim query As AccountQuery = New AccountQuery()
Dim service As AnalyticsService = New AnalyticsService("MyWebAnalyticsService")
service.setUserCredentials(username, pass)
Dim accountFeed As AccountFeed = service.Query(query) ''----------> Exception thrown in this line: GDataRequestException Execution of request failed: https://www.google.com/analytics/feeds/accounts/default 
```

我认为这与阻止我正在使用的帐户有关，但事实并非如此，因为我验证了为另一个分析帐户注册该站点并且仍然无法正常工作。

正如我所说，这段代码一直在完美运行，但昨天突然停止了。

你能帮我找出问题所在吗？也许用户凭据的设置方式已经改变，我遗漏了一些东西。

非常感谢您的帮助。

' **----Update----** 我设法使它工作，现在我可以查询所需域的访问。代码如下：

```
Dim visits As String = String.Empty
Dim username As String = "myuser@mydomain.com" 
Dim pass As String = "mypassword" 
```

'按照[https://developers.google.com/analytics/resources/articles/gdata-migration-guide](https://developers.google.com/analytics/resources/articles/gdata-migration-guide)上的说明（在 Google API 控制台中创建项目）生成您的密钥 '一旦将其设置为请求我们的 GA 服务的查询字符串

```
Dim gkey As String = "key=yourkeystring" 
```

'设置新的 URI 以检索提要数据并将其附加到生成的密钥

```
Dim dataFeedUrl As String = "https://www.google.com/analytics/feeds/data?" & gkey 
```

'在我们的服务实例上创建和验证

```
Dim service As AnalyticsService = New AnalyticsService("MyAnaliticsService")
service.setUserCredentials(username, pass) 
```

'使用您想要访问的帐户的配置文件 ID，您可以找到它
'登录您的分析帐户，在列表中选择所需的域（蓝色链接）单击管理员按钮，然后在配置文件选项卡上找到profile
'配置子选项卡，在这种情况下，您会在此处找到配置文件 ID，长度为 8 个字符 id 12345678

```
Dim query1 As DataQuery = New DataQuery(dataFeedUrl)
With query1            
    .Ids = "ga:12345678" 
    .Metrics = "ga:visits"
    .Sort = "ga:visits"
    .GAStartDate = DateTime.Now.AddMonths(-1).AddDays(-2).ToString("yyyy-MM-dd")
    .GAEndDate = DateTime.Now.ToString("yyyy-MM-dd")
    .StartIndex = 1
End With 
```

'使用基于前一个查询生成的数据馈送来获取访问

```
Dim dataFeedVisits As DataFeed = service.Query(query1)

For Each entry As DataEntry In dataFeedVisits.Entries
    Dim st As String = entry.Title.Text
    Dim ss As String = entry.Metrics(0).Value
    visits = ss
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:37:41.740

我有同样的问题，看起来谷歌最近关闭了提要。在另一个帖子中回答。[问题 com.google.gdata.util.ResourceNotFoundException: Not Found with Google Analytic](https://stackoverflow.com/questions/12104712/issue-com-google-gdata-util-resourcenotfoundexception-not-found-with-google-ana)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:39:43.590

请确保您在[API 控制台](https://code.google.com/apis/console/)中注册了您的项目，并且您将 API 密钥与您的请求一起发送。

如果这不是问题，检查内部异常将为您提供有关错误的更多详细信息。作为替代方案，您可以使用 Fiddler 来捕获 HTTP 请求和响应。后者将包含更具描述性的错误消息。

# generics - EJB - 如何使用具有多个持久性单元的 CRUD 代码

> ID：12113213
> 
> 赞同：1
> 
> 时间：2012-08-24T16:25:37.047
> 
> 标签：generics, jakarta-ee, persistence, ejb, entitymanager

我想为我的 EJB 配备 CRUD 方法。

我有许多实体和**多个持久性单元**。

我想实现一次我的 CRUD 方法并在不同的持久性单元上调用它们。

我尝试使用继承来实现这一点，但它不起作用。

CRUD 类是：

```
public class FormEBean<T> {

    protected EntityManager em;

    public EntityManager getEm() {
        return em;
    }

    public void setEm(EntityManager em) {
        this.em = em;
    }

    public String create(T entity) {
        try {
            em.persist(entity);
            em.flush();
            return null;
        } catch (Exception ex) {
            return ex.getLocalizedMessage();
        }
    }

    public void create(List<T> entityList) {
        for (T entity : entityList) {
            em.persist(entity);
        }
    }

    public void edit(T entity) {
        em.merge(entity);
    }

    public void edit(Set<T> entitySet) {
        Iterator<T> it = entitySet.iterator();
        while (it.hasNext()) {
            T entity = it.next();
            em.merge(entity);
        }
    }

    public void remove(T entity) {
        em.remove(em.merge(entity));
    }

    public void remove(T[] listaDaRimuovere) {
        for (T entity : listaDaRimuovere) {
            em.remove(em.merge(entity));
        }
    }

    public void remove(List<T> listaDaRimuovere) {
        for (T entity : listaDaRimuovere) {
            em.remove(em.merge(entity));
        }
    }
} 
```

所以我尝试了这种方式：

```
@Stateless
@Remote(MyEBeanRemote.class)
public class MyEBean extends FormEBean<MyEntityClass> implements MyEBeanRemote {

    @PersistenceContext(unitName = "siat-ejbPU")
    private EntityManager em;

    // code here
} 
```

即使我没有任何错误，CRUD 函数对我的数据库也没有影响。

相反，如果我将它们直接插入到 MyEBean 中，它会按预期运行。

我不想`@PersistenceContext(unitName = "siat-ejbPU")`在 FormEBean 中使用，因为 EJB 可以使用不同的持久性单元。

有没有办法解决这个问题？

有没有一种模式可以用来重用我的代码？

**编辑：**

这个问题的目的是找到一种解决方案，在属于不同 EJB 模块并具有不同持久性单元的 EJB 中最大化 CRUD 代码重用。

在无状态会话 bean 中使用泛型方法似乎是一个很好的解决方案，但仅用于在同一持久性单元中为 EJB 重用 CRUD 代码。

什么解决方案可以独立于持久性单元（如果存在）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:19:40.870

您好，您可以使用 setter 方法：

```
@Stateless
@Remote(MyEBean.class)
public class MyEBean extends FormEBean implements MyEBeanRemote {

    final Logger logger = LoggerFactory.getLogger(MyEBean.class);

    @PersistenceContext(unitName = "siat-ejbPU")
    @Override
    public void setEmCrud(EntityManager em) {
        super.setEmCrud(em)
    } 
```

为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T22:44:43.163

您需要使您的 CRUD 方法通用（*创建/编辑/删除*）。

名为*FormEBean的类***不**应该是通用的。

如果您将方法设为通用而不是类，您可以实现它们一次并将它们与任何实体类一起使用。通用的 crud 方法可能看起来像这样：

```
public <T> T create(T someEntity) {
    em.persist(someEntity);
    return someEntity;
}

public <T> void create(Collection<T> entities) {
    for (T entity : entities) {
        em.persist(entity);
    }
}

public <T> void edit(T entity) {
    em.merge(entity);
}

public <T> void edit(Collection<T> entities) {
    for (T currentEntity : entities) {
        em.merge(currentEntity);
    }
} 
```

将它们放在您的会话 bean 中，并在任何地方使用它们来对任何实体进行操作。

```
/**
 *  Example managed bean that uses our
 *  stateless session bean's generic CRUD
 *  methods.
 *
 */

class ExampleManagedBean {

    @EJB
    MyCrudBeanLocal crudBean;

    public void createStuff() {
        // create two test objects
        Customer cust   =  createRandomCustomer();
        FunkyItem item  =  createRandomItem();
        // use generic method to persist them
        crudBean.create(cust);
        crudBean.create(item);
    }
} 
```

这个答案完全符合我的描述并提供了示例代码：

*   [用于简单 CRUD 的 EJB 3 会话 Bean 设计](https://stackoverflow.com/questions/2946283/ejb-3-session-bean-design-for-simple-crud)

另一个例子：

*   [具有通用方法的 EJB](http://www.java2s.com/Code/Java/EJB3/EjbWithGenericMethod.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T16:55:11.193

我找到了解决问题的解决方案。

它基于 jahroy 的回答，但使用继承来处理多个持久性单元。

通用代码是一个基类（不是泛型但具有泛型方法）：

```
 public class FormEBean {

        final Logger logger = LoggerFactory.getLogger(FormEBean.class);

        protected EntityManager emCrud;

        public EntityManager getEmCrud() {
            return emCrud;
        }

        public void setEmCrud(EntityManager em) {
            emCrud = em;
        }

        public <T> String create(T entity) {
            String exception = null;
            try {
                emCrud.persist(entity);
                emCrud.flush();
            } catch (Exception ex) {
                //ex.printStackTrace();
                exception = ex.getLocalizedMessage();
            }
            return exception;
        }

        public <T> void create(List<T> entityList) {
            for (T entity : entityList) {
                emCrud.persist(entity);
            }
        }

        public <T> void edit(T entity) {
            emCrud.merge(entity);
        }

        public <T> void edit(Set<T> entitySet) {
            Iterator<T> it = entitySet.iterator();
            while (it.hasNext()) {
                T entity = it.next();
                emCrud.merge(entity);
                emCrud.flush();
            }
        }

        public <T> void remove(T entity) {
            emCrud.remove(emCrud.merge(entity));
        }

        public <T> void remove(T[] listaDaRimuovere) {
            for (T entity : listaDaRimuovere) {
                emCrud.remove(emCrud.merge(entity));
            }
        }

        public <T> void remove(List<T> listaDaRimuovere) {
            for (T entity : listaDaRimuovere) {
                emCrud.remove(emCrud.merge(entity));
            }
        }
     } 
```

...这是界面：

```
public interface FormEBeanRemote {
    public void setEmCrud(EntityManager em);
    public <T> String create(T entity);
    public <T> void create(List<T> entityList);
    public <T> void edit(T entity);
    public <T> void edit(Set<T> entitySet);
    public <T> void remove(T entity);
    public <T> void remove(T[] listaDaRimuovere);
    public <T> void remove(List<T> listaDaRimuovere);
} 
```

EJB（无状态会话 bean）如下所示：

```
@Stateless
@Remote(MyEBean.class)
public class MyEBean extends FormEBean implements MyEBeanRemote {

    final Logger logger = LoggerFactory.getLogger(MyEBean.class);

    @PersistenceContext(unitName = "siat-ejbPU")
    private EntityManager em;

    public EntityManager getEm() {
        return em;
    }

    public void setEm(EntityManager em) {
        this.em = em;
    }

    @PostConstruct
    public void postConstruct() {
        this.setEmCrud(em);
    } 
```

...在哪里

```
@Remote
public interface MyEBeanRemote extends FormEBeanRemote {
......
} 
```

请注意，EJB 使用 postConstruct 方法来设置 entityManager，它被委托在特定的持久性单元上执行 CRUD 操作。

到目前为止，它就像一个魅力。

如果有人发现任何陷阱，请告诉我。

# c# - 如何获取触发命令的键？

> ID：12113214
> 
> 赞同：1
> 
> 时间：2012-08-24T16:25:37.797
> 
> 标签：c#, wpf, .net-4.0, command

我想将多个键绑定到一个命令，如下所示：

```
SwitchViewCommand.InputGestures.Add(new KeyGesture(Key.F7));
SwitchViewCommand.InputGestures.Add(new KeyGesture(Key.F8)); 
```

接下来在事件处理程序中，我想根据按下的键切换视图：

```
private void SwitchViewCommand_Executed(object sender, ExecutedRoutedEventArgs e)
{
     // if F7 then do something, if F8 then do something else
} 
```

但我找不到确定密钥的方法。我在调试器中检查了事件参数，但没有看到任何有用的东西。有可能还是我需要为每种情况创建一个单独的命令？

# jquery-mobile - jQuery Mobile 可折叠面板和 KNockjs 可观察数组

> ID：12113216
> 
> 赞同：3
> 
> 时间：2012-08-24T16:25:40.323
> 
> 标签：jquery-mobile, knockout-2.0

有人可以帮我弄清楚为什么我的可折叠面板不会展开吗？我使用 jquery mobile 的 html 标记似乎正在工作。数据通过 foreach 循环绑定到可折叠集，但面板不会展开。

html:

```
<div data-role="collapsible-set" class="ui-block-a" data-bind="foreach: opportunityData"> 
    <div data-collapsed="true" data-role="collapsible" >
        <h3>
            <span data-bind="text: name" />
        </h3>
        <p data-bind="text: company" />
    </div>
</div> 
```

JS：

```
function OpportunityViewModel() {

        var self = this;
        self.opportunityData = ko.observable([]);

        $.ajax({
            url: 'url....',
            type: 'GET',
            async: true,
            cache: false,
            crossDomain: true,
            dataType: 'jsonp',
            success: function (data) {
                self.opportunityData(data)
            },
            error: function (jqXHR, textStatus, ex) {
                alert(textStatus + "," + ex + "," + jqXHR.responseText);
            }
            }); //end ajax call
        }; //end viewmodel       

        ko.applyBindings(new OpportunityViewModel());           
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:00:15.097

我刚刚找到了解决方案，只需创建一个**新的外部 div** ，然后将**foreach**放入该 div：

```
<div data-bind="foreach: opportunityData">
   <div data-role="collapsible-set" class="ui-block-a" > 
       <div data-collapsed="true" data-role="collapsible" >
           <h3>
               <span data-bind="text: name" />
           </h3>
           <p data-bind="text: company" />
       </div>
   </div>
</div> 
```

# mootools - MooTools 链式函数不会执行

> ID：12113219
> 
> 赞同：2
> 
> 时间：2012-08-24T16:25:53.723
> 
> 标签：mootools

我正在使用 MooTools，并且我有以下似乎无法执行的代码。我期望它将`#bar`元素的宽度增加到`50px`，然后`alert()`用“hi！”，然后继续增加`#bar`to的宽度`200px`。无论出于何种原因，它在“嗨！”之后停止。并且不会继续执行。这是怎么回事？

```
var myFx = new Fx.Tween($('bar'), {
duration: '500ms',
transition: 'sine:out',
link: 'chain'
});

myFx.start('width', '50').chain(
function() { alert('hi!'); },
function() { myFx.start('width', '200'); }
); 
```

[小提琴](http://jsfiddle.net/nUWsU/7/) ​</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T20:28:47.610

那是因为您的第二个函数没有调用 myFx 类的方法 - 这意味着它不会推进链。

chain 是 Fx 类的一个 mixin。如果你做一个动画，它会自动尝试`callChain`。因为你什么都不做，所以在警报下面添加这个：

```
this.callChain(); 
```

这将正常工作。也许文档需要更改，因为它现在并不明显。[http://jsfiddle.net/dimitar/nUWsU/8/](http://jsfiddle.net/dimitar/nUWsU/8/)

# objective-c - 从 NSDictionary 将实例变量初始化为键/值对？

> ID：12113224
> 
> 赞同：3
> 
> 时间：2012-08-24T16:26:15.707
> 
> 标签：objective-c, initialization, nsdictionary, nsobject, kvc

我将 NSObject 子类的公共接口定义为，

```
@interface MyObject : NSObject
{
    NSString *_key1;
    NSString *_key2;
    NSString *_key3;
}
- (id)initWithDict:(NSDictionary *)dict;
@end 
```

是否有实现 initWithDict: 方法的技巧，以便我可以传递定义为的 NSDictionary

> {“key1”：“value1”，“key2”：“value2”，“key3”：“value3”}

init 方法可以设置相关的实例变量及其对应的“值”吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T16:29:27.630

你必须使用[KVC](http://www.google.ch/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCEQFjAA&url=http%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2FCocoa%2FConceptual%2FKeyValueCoding%2FArticles%2FKeyValueCoding.html&ei=cas3UMLuE4L_4QSnmoDwCQ&usg=AFQjCNFzXmy29jbiaowDZpHPhfDCPYPW9g&sig2=Vglw64w-z9O-tpruHyR1aA)。

```
NSDictionary *dict = @{@"key1" : @"value1", @"key2" : @"value2", @"key3" : @"value3"};
for (NSString *key in [dict allKeys]) {
   [self setValue:dict[key] forKey:key];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:41:50.200

除了 DrummerB 答案之外，如果您有如下嵌套对象，

```
@interface InnerObject : NSObject
{
    NSString *innerKey1;
}
@interface MyObject : NSObject
{
    NSString *key1;
    NSString *key2;
    NSString *key3;
    InnerObject *innerObj; 
} 
```

您也可以通过以下方法为 iVar innerKey1 设置值：

```
MyObject *obj = [[MyObject alloc]init];
obj.innerObj = [[InnerObject alloc]init];
[obj setValue:yourValue forKeyPath:innerObj.innerKey1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-05T18:43:22.097

您还可以像这样从字典中初始化实例变量/属性：

```
[self setValuesForKeysWithDictionary:dictionary]; 
```

这是关于 setValuesForKeysWithDictionary 的官方 Apple 文档：

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/#//apple_ref/occ/instm/NSObject/setValuesForKeysWithDictionary](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/#//apple_ref/occ/instm/NSObject/setValuesForKeysWithDictionary)：

# vim - 为什么 不使用 noremap ！？

> ID：12113232
> 
> 赞同：0
> 
> 时间：2012-08-24T16:26:35.500
> 
> 标签：vim

我有这个映射：

```
noremap! <F6> <c-o> :SCCompile<cr> 
```

但是当我`F6`在插入模式下按下时，它只是在缓冲区中输入“：SCCompile\n”，而不是进入正常模式来执行命令。

它适用于`map!`但不适用于`noremap!`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:07:32.153

有趣的是，您说它可以使用，`map!`因为我也无法使用它`map!`。我们可能使用不同的版本；但是，执行此操作的适当方法是`<C-o>`像这样删除空格：

```
noremap! <F6> <c-o>:SCCompile<cr> 
```

`<c-o>`在插入模式下，需要一个普通命令和一个空格。

# java - 为什么Java实现读取文件如此困难

> ID：12113235
> 
> 赞同：7
> 
> 时间：2012-08-24T16:26:41.213
> 
> 标签：java

我真的不知道，为什么这对于读取包含很多类的文件来说如此复杂和困难

*   输入流
*   数据输入流
*   输入流
*   缓冲区读取器

下面有什么好处？这里的哲学是什么？

```
private static String fileToString(String filename) throws IOException
{
    InputStream resourceAsStream;
    resourceAsStream        = "".getClass().getResourceAsStream(filename);
    DataInputStream in      = new DataInputStream(resourceAsStream);
    BufferedReader reader   = new BufferedReader(new InputStreamReader(in));
    StringBuilder builder   = new StringBuilder();
    String line;    
    // For every line in the file, append it to the string builder
    while((line = reader.readLine()) != null)
    {
        builder.append(line);
    }
    return builder.toString();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T16:33:18.213

如果你想读取一个有路径的文件，你甚至可以这样做：

```
List<String> lines = Files.readAllLines(Paths.get("/path/to/your/file"), charset); 
```

注意：需要 Java 7+

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-24T16:38:42.610

哲学是灵活性之一。使用不同类型的数据流，您可以轻松地从 I/O 源一次读取和写入不同类型的数据，例如字节、文本行或整个用户定义的对象。

来自[Java 教程 - I/O 流](http://docs.oracle.com/javase/tutorial/essential/io/streams.html)：

> I/O 流表示输入源或输出目标。一个流可以表示许多不同类型的源和目标，包括磁盘文件、设备、其他程序和内存阵列。
> 
> 流支持多种不同类型的数据，包括简单字节、原始数据类型、本地化字符和对象。有些流只是简单地传递数据；其他人以有用的方式操纵和转换数据。

从课程线索[课程开始：基本 I/O](http://docs.oracle.com/javase/tutorial/essential/io/)以获得对 Java I/O 的良好概述。

* * *

如果您想查看如何简化 Java 中各种数据类型的 I/O 的具体示例，我建议您查看Sedgewick & Wayne[标准库中的](http://introcs.cs.princeton.edu/java/stdlib/)[In.java](http://introcs.cs.princeton.edu/java/stdlib/In.java.html)和[Out.java](http://introcs.cs.princeton.edu/java/stdlib/Out.java.html)类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T16:28:49.570

好吧，既然你说了两次 InputStream，它实际上只有 3 件事；​​）但这是因为你可以存储不同的东西（序列化对象、图像、文本等），所以它们都有一个共同的基础（InputStream） . 然后，对于基本文本，您有一个新类 BufferedReader 来处理这种特定类型的文件存储/读取。最后，BufferReader 只是为了提高效率；你可能不想要它，所以它是可选的

此外，Johan Sjöberg 是正确的，那里不需要 DataInputStream，只需执行以下操作：

```
BufferedReader reader   = new BufferedReader(new InputStreamReader(resourceAsStream)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T16:34:10.313

不必太难，检查[Project Lombok](http://projectlombok.org/)：这是通过简单包含单个 jar 文件读取文件的样子：

```
@Cleanup InputStream in = new FileInputStream("File.txt");
byte[] b = new byte[10000];
while (true) {
 int r = in.read(b);
 if (r == -1) break;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T16:45:54.810

您可以稍微缩短代码，省略不必要的`DataInputStream`，您可以使用 a[`FileReader`](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/FileReader.html)代替：

```
private static String fileToString(String filename) throws IOException {
    BufferedReader reader   = new BufferedReader(new FileReader(filename));
    StringBuilder builder   = new StringBuilder();
    String line;    
    // For every line in the file, append it to the string builder
    while((line = reader.readLine()) != null)
        builder.append(line);
    return builder.toString();
} 
```

[我还在http://rosettacode.org/wiki/Read_entire_file#Java](http://rosettacode.org/wiki/Read_entire_file#Java)找到了以下单行代码：

```
new Scanner(new File("foo"), "UTF-8").useDelimiter("\\A").next(); 
```

# java - Jackson @JsonRawValue 获取地图的价值

> ID：12113237
> 
> 赞同：6
> 
> 时间：2012-08-24T16:26:53.243
> 
> 标签：java, json, jackson

我有以下 Java bean 类，使用 Jackson 将其转换为 JSON。

```
 public class Thing {
    public String name;

    @JsonRawValue
    public Map content = new HashMap();
  } 
```

`content`是一张地图，其值将是来自另一个来源的原始 JSON。例如：

```
String jsonFromElsewhere = "{ \"foo\": \"bar\" }";

Thing t = new Thing();
t.name = "test";
t.content.put("1", jsonFromElsewhere); 
```

所需生成的 JSON 是：

```
{"name":"test","content":{"1":{ "foo": "bar" }}} 
```

但是使用`@JsonRawValue`结果：

```
{"name":"test","content":{1={ "foo": "bar" }}} 
```

我需要的是一种`@JsonRawValue`仅指定 Map 值的方法。杰克逊有可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T21:22:29.420

正如 StaxMan 指出的那样，实现自定义`JsonSerializer`.

```
public class Thing {
    public String name;

    @JsonSerialize(using=MySerializer.class)
    public Map<String, String> content = new HashMap<String, String>();
}

public class MySerializer extends JsonSerializer<Map<String, String>> {
    public void serialize(Map<String, String> value, JsonGenerator jgen, SerializerProvider provider) throws IOException, JsonProcessingException {
        jgen.writeStartObject();
        for (Map.Entry<String, String> e: value.entrySet()) {
            jgen.writeFieldName(e.getKey());
            // Write value as raw data, since it's already JSON text
            jgen.writeRawValue(e.getValue());
        }
        jgen.writeEndObject();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T18:47:54.650

不，你可以很容易地创建自定义`JsonSerializer`来做到这一点。

此外，也许宁愿只使用一次性 POJO：

```
public class RawHolder {
   @JsonProperty("1")
   public String raw;
}

public class Thing {
   public String name;
   public RawHolder content;
} 
```

# javascript - 如何抓取相关图像

> ID：12113241
> 
> 赞同：-2
> 
> 时间：2012-08-24T16:27:02.007
> 
> 标签：javascript, html, parsing, dom, scrape

如果我查看 Amazon Button 以将项目添加到他们网站上的列表中 - 你可以在这里看到它：

[http://www.amazon.co.uk/wishlist/get-button](http://www.amazon.co.uk/wishlist/get-button)

它是如何工作的？我很确定它会以某种方式刮掉页面，但它似乎可以获取每张图片，无论是 flash 图像、jpg 还是其他任何东西，即使相关网站使用相对 img src 而不是绝对完整网站 url

下面的示例页面，所有显示的图像都是 jpg，这很酷，但所有 img src 都是相对含义，在它们之前没有“http://blah.com”

[http://gadgets.guardianoffers.co.uk/p-788-Casio-Solar-Powered-Edifice-Watch.html](http://gadgets.guardianoffers.co.uk/p-788-Casio-Solar-Powered-Edifice-Watch.html)

除了解析 html 源代码之外，还有更好的方法来获取图像吗？

或者如果他们没有立即受到打击，他们是否只是做了一百万次假设？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:43:56.617

它看起来像是解析页面的 HTML 并查找语义上标识为主要图像、名称和价格的内容。例如，如果您查看一个没有任何电子商务产品的页面，例如：[http](http://www.theglobeandmail.com/) ://www.theglobeandmail.com/ ，它将页面 h1 元素作为产品名称和主图像（首页故事图像) 作为产品图片。

所以他们在幕后做了很多猜测。使用 HTML 5 语义标记，您可以为此类事物建立标准，但除非每个人都在使用它，否则您只是在进行有根据的猜测。

# ruby-on-rails-3 - 为什么 Time.zone.parse 比 DateTime.parse 慢这么多？

> ID：12113243
> 
> 赞同：3
> 
> 时间：2012-08-24T16:27:14.160
> 
> 标签：ruby-on-rails-3, parsing, time, activesupport

在我的系统（*）上，`Time.zone#parse`几乎比`DateTime#parse`.

由于 DateTime.parse 已经知道如何处理时区，在什么情况下您想使用 Time.zone.parse？

这是基准文件：

```
module ParseTimeBenchmark
  extend self

  N = 100000
  TS_WO = "2010-01-01 12:03:04"
  TS_W = "2010-01-01 12:03:04 -8:00"

  def string_parser(s) ; s.to_datetime ; end
  def datetime_parser(s) ; DateTime.parse(s) ; end
  def time_zone_parser(s) ; Time.zone.parse(s) ; end

  # sanity check
  if ((s = string_parser(TS_W)) == datetime_parser(TS_W)) && (s == time_zone_parser(TS_W))
    puts("datetimes compare equal")
  else
    puts("warning: datetimes do not compare equal")
  end

  Benchmark.bmbm do |x|
    x.report("string_parser without zone") { N.times { string_parser(TS_WO) }}
    x.report("string_parser with zone") { N.times { string_parser(TS_W) }}
    x.report("datetime_parser without zone") { N.times { datetime_parser(TS_WO) }}
    x.report("datetime_parser with zone") { N.times { datetime_parser(TS_W) }}
    x.report("time_zone_parser without zone") { N.times { time_zone_parser(TS_WO) }}
    x.report("time_zone_parser with zone") { N.times { time_zone_parser(TS_W) }}
  end

end 
```

和结果

```
>> load '/Users/r/Developer/sketches/parse_time_benchmark.rb'
datetimes compare equal
Rehearsal -----------------------------------------------------------------
string_parser without zone      3.390000   0.030000   3.420000 (  3.412754)
string_parser with zone         4.000000   0.020000   4.020000 (  4.028964)
datetime_parser without zone    2.980000   0.020000   3.000000 (  3.001507)
datetime_parser with zone       3.420000   0.020000   3.440000 (  3.436074)
time_zone_parser without zone   9.050000   0.050000   9.100000 (  9.101839)
time_zone_parser with zone     11.950000   0.050000  12.000000 ( 12.012977)
------------------------------------------------------- total: 34.980000sec

                                    user     system      total        real
string_parser without zone      3.470000   0.020000   3.490000 (  3.495296)
string_parser with zone         4.070000   0.020000   4.090000 (  4.099520)
datetime_parser without zone    3.000000   0.010000   3.010000 (  3.030422)
datetime_parser with zone       3.460000   0.030000   3.490000 (  3.491748)
time_zone_parser without zone   9.190000   0.060000   9.250000 (  9.254589)
time_zone_parser with zone     11.960000   0.050000  12.010000 ( 12.015786)
=> true 
```

(*) 我的系统：Ruby 1.9.3 (x86_64-darwin10.8.0)、Rails 3.2.2、Active Resource 3.2.2

# jenkins - Jenkins 参数化选择

> ID：12113247
> 
> 赞同：0
> 
> 时间：2012-08-24T16:27:35.143
> 
> 标签：jenkins

在 Jenkins 中，我想创建一个具有两个参数的作业。第一个提供了环境选择（如 DEV、TEST、PROD）。选择环境后，我希望第二个参数显示所选环境中的服务器列表。因此用户可以选择全部或特定服务器进行安装。是否可以在 Jenkins 或其任何插件中执行此操作？基本上我希望在选择第一个选择框时更新第二个选择框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:02:37.970

使用 Jenkins 中的默认参数化构建选项是不可能的。可能有另一个插件可以做到这一点（有很多社区贡献的插件），但我不知道有一个。

但是，我已经编写了几个自定义 Jenkins 插件来从本质上自定义构建页面 UI，以满足我公司特定的需求。编写一个 Jenkins 插件一开始似乎很吓人，但如果你了解 Java 和 Maven，实际上并不难。如果您不知道其中任何一个，那么您将需要找到知道的人。 [https://wiki.jenkins-ci.org/display/JENKINS/Plugin+tutorial](https://wiki.jenkins-ci.org/display/JENKINS/Plugin+tutorial)

这是一个类似的问题和类似的答案：[Hudson or Jenkins Parameterized Builds using dynamic selections](https://stackoverflow.com/questions/6398031/hudson-or-jenkins-parameterized-builds-using-dynamic-choices)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-05T12:08:50.687

我不认为通过插件也可以使用很多动态选择参数。但是你可以试试这个插件来得到你想要的。[扩展选择参数插件](https://wiki.jenkins.io/display/JENKINS/Extended+Choice+Parameter+plugin)来实现你想要的。但不完全是你想要的。希望这可以帮助。

# c++ - 通过c ++ xll的sql连接

> ID：12113248
> 
> 赞同：0
> 
> 时间：2012-08-24T16:27:38.280
> 
> 标签：c++, sql, visual-studio-2008, excel-2007, xll

我正在尝试用 c++ 编写一个 xll 来与 sql server 交互。程序编译好。我在 c++ 代码中有以下简单的行

```
database.test(){
              ....
    sql::Driver *driver;
    sql::Connection *con;
    sql::Statement *stmt;
    sql::ResultSet *res;
    con = driver->connect("NJROS1LD120", "mysql","mysql01"); 
              ... } 
```

现在，当我尝试打开 excel 时，我在 excel 单元格中收到垃圾字符，第一行显示“此程序无法在 DOS 模式下运行”。如果我注释掉 con = driver->connect("NJROS1LD120", "mysql","mysql01"); 我可以在插件中看到函数 database.test()。

无法弄清楚出了什么问题。这将是非常好的人来帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T03:26:03.360

你离家很远。查看[http://xll.codeplex.com](http://xll.codeplex.com)。至少它可以让你创建一个没有可怕的 DOS 模式错误的插件。您是否尝试使用 ODBC 驱动程序连接到 MySQL 数据库？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T21:24:23.637

您很可能缺少 dll。使用dependency walker 找出缺少的dll。我假设您使用的是 mysql cpp 连接器，因此您需要确保 libmysql.dll 和 mysqlcppconn.dll 都可以找到。

# c# - 在 unitTest 中托管 Web 服务

> ID：12113250
> 
> 赞同：0
> 
> 时间：2012-08-24T16:27:45.230
> 
> 标签：c#, .net, wcf, unit-testing

我想在单元测试中使用`ServiceHost`.

然后在构建机器上运行它们。

是否可以托管这样的网络服务？如果是的话，它是怎么做的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:16:26.797

当然，`ServiceHost`如果它是自托管的 wcf 服务，您只需像使用它一样使用它。我通常在测试夹具/类设置/拆卸中执行此操作。

以 NUnit 为例：

```
[TestFixture]
public class MyTests
{
    private ServiceHost service;

    [TestFixtureSetUp]
    public void FixtureSetUp()
    {
        service = new ServiceHost(typeof(MyService));
        service.Open();
    }

    [Test]
    public void ThisIsATest()
    {
        using (var client = new MyServiceClient())
            client.DoStuff(); // test whatever
    }

    [TestFixtureTearDown]
    public void FixtureTearDown()
    {
        if (service != null)
        {
            if (service.State == CommunicationState.Opened)
                service.Close();
            else if (service.State == CommunicationState.Faulted)
                service.Abort();
        }
    }
} 
```

您还需要将任何 WCF XML 配置复制到测试程序集的 app.config 中。

但是要注意的一件事是单元测试框架的线程模型。如果您的测试运行程序可以同时运行多个测试类，那么您可能会尝试在同一个端口上多次打开同一个服务，并且它可能会失败。

最后一点，我通常会将启动和不启动实际 WCF 服务的测试分开。将不使用 WCF 的测试放入单独的“单元测试”程序集中，该程序集在没有依赖关系的情况下运行并且运行速度很快，而将使用 WCF 的测试放入“集成测试”程序集中。当然，这只是一个建议，而不是规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T17:20:29.307

这确实是可能的，实际上与在控制台应用程序中托管 WCf 服务相同！将您的 app.config 添加到 UT 程序集并像往常一样继续。（当然，您也可以通过编程方式进行配置）。同样，您在代码中为主机创建客户端。

在设置方法上实例化并打开您的主机和客户端，您可以按测试或按课程执行此操作，具体取决于您寻求的隔离级别。

所以你看，你不必有一个单独的部署阶段。

说了以上所有内容，我实际上不鼓励您在单元测试中使用服务。关于单元测试的最佳实践之一是它们应该运行得非常快。在 UT 中调用 Web 服务（甚至是本地服务）的成本很高。

此外，这与*UNIT*测试的语义相矛盾。您应该测试一小部分功能。并努力模拟出外部依赖项，例如数据库访问、外部服务甚至其他类。如果您愿意，我很乐意详细说明并参考更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T16:58:14.437

我认为这里的问题是 UnitTests 通常只是一组由其他框架（NUnit、xUnit、...）执行的二进制文件。

您可以尝试在 TestSuite 设置上启动另一个线程并在该线程上运行 WCF，但我相信它更多地涉及这种方法，并且测试套件可能也不喜欢它。

我要做的是在你的 WCF 服务的构建机器上设置一个部署步骤到 IIS，或者在运行 UnitTests 之前重新部署到 Windows 服务托管的 WCF。

# python - Python中元组的元素操作

> ID：12113252
> 
> 赞同：8
> 
> 时间：2012-08-24T16:27:53.257
> 
> 标签：python, python-3.x

是否有任何内置函数允许在 Python 3 中对元组进行元素操作？如果不是，执行这些操作的“pythonic”方式是什么？

示例：我想获取 和 之间的百分比差异`a`并将`b`它们与某个阈值进行比较`th`。

```
>>> a = (1, 2, 4)
>>> b = (1.1, 2.1, 4.1)
>>> # compute pd = 100*abs(a-b)/a = (10.0, 5.0, 2.5)
>>> th = 3
>>> # test threshold: pd < th => (False, False, True) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T16:35:19.150

没有内置方法，但有一个非常简单的方法：

```
[f(aItem, bItem) for aItem, bItem in zip(a, b)] 
```

. . . `f`您要按元素应用的功能在哪里。对于您的情况：

```
[100*abs(aItem - bItem)/aItem < 3 for aItem, bItem in zip(a, b)] 
```

如果您发现自己经常这样做，尤其是对于长元组，您可能需要查看`Numpy`，它提供了一个功能齐全的向量运算系统，其中许多常见的向量函数（基本运算、三角函数等）按元素应用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T16:35:56.850

地图功能

```
>>> a = (1, 2, 4)
>>> b = (1.1, 2.1, 4.1)
>>> map(lambda a,b: 100*abs(a-b)/a < 3, a, b)
[False, False, True] 
```

**编辑**

当然，您可以使用列表推导而不是地图，例如 BrenBarn 所做的 [http://docs.python.org/tutorial/datastructures.html#nested-list-comprehensions](http://docs.python.org/tutorial/datastructures.html#nested-list-comprehensions)

**EDIT 2** zip 已删除，感谢 DSM 指出不需要 zip

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-24T16:48:58.273

为什么不使用 NumPy？

```
import numpy as np
a = np.array([1,2,4])
b = np.array([1.1, 2.1, 4.1])

pd = 100*abs(a-b)/a # result: array([ 10\. ,   5\. ,   2.5])
th = 3
pd < th # result: array([False, False,  True], dtype=bool) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T16:32:57.910

我不知道这样的操作，也许 Python 的一些函数式编程特性会起作用（map？reduce？），尽管将[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)（或如果不需要列表的生成器）放在一起相对简单：

```
[100*abs(j-b[i])/j < 3 for i,j in enumerate(a)]
[False, False, True] 
```

感谢@delnan 为原始、更明确/详细的版本指出了一个非常好的简化：

```
[True if 100*abs(j-b[i])/j < 3 else False for i,j in enumerate(a)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T16:35:42.643

我会说 Pythonic 的方式是列表理解：

何时`a = (1, 2, 4)`和`b = (1.1, 2.1, 4.1)`

然后，在一行中：

```
TEST = [100*abs(a[i]-b[i])/a[i] > th for i in range(len(A))] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T16:43:18.360

```
def pctError(observed, expected):
    return (observed-expected)/expected * 100.0

a = (1, 2, 4)
b = (1.1, 2.1, 4.1)
th = 3

pctErrors = map(lambda t:pctError(*t), zip(a,b))
# returns [-9.091, -4.76, -2.44]

map(lambda x: x < th, pctErrors)
[x < th for x in pctErrors]
# both return [True, True, True]

# or if you always need absolute % errors
map(lambda x: abs(x) < th, pctErrors)
[abs(x) < th for x in pctErrors]
# both return [False, False, True] 
```

# c++ - C++ 通过 Outlook 发送 HTML 电子邮件

> ID：12113255
> 
> 赞同：0
> 
> 时间：2012-08-24T16:28:04.643
> 
> 标签：c++, windows, outlook-2007

[客观的]

基本的 C++ 控制台应用程序需要能够通过 Outlook 2007（最小化运行）发送 HTML 电子邮件 - 不需要附件。此方法适用于纯文本，我不确定是否可以对其进行修改以适应 HTML 的要求。我在某处读到，也许你可以引用一个附件，它会变成身体。我只是不确定下一步该怎么做。建议？

[我到目前为止所拥有的]

```
BOOL SendMail(CHAR *lpszFrom, CHAR *lpszTo, CHAR *lpszSubject, CHAR *lpszMessage)
{
   BOOL bSent = FALSE;

   HINSTANCE hMAPI = ::LoadLibrary(_T("mapi32.dll"));
   if(0==hMAPI) return bSent;

   typedef ULONG (FAR PASCAL *PFN_MAPILogon)(ULONG,LPTSTR,LPTSTR,FLAGS,ULONG,LPLHANDLE);
   typedef ULONG (FAR PASCAL *PFN_MAPISendMail)(LHANDLE,ULONG,lpMapiMessage,FLAGS,ULONG);
   typedef ULONG (FAR PASCAL *PFN_MAPILogoff)(LHANDLE,ULONG,FLAGS,ULONG);

   PFN_MAPILogon MAPILogon = (PFN_MAPILogon)::GetProcAddress(hMAPI,"MAPILogon");
   PFN_MAPISendMail MAPISendMail = (PFN_MAPISendMail)::GetProcAddress(hMAPI,"MAPISendMail");
   PFN_MAPILogoff MAPILogoff = (PFN_MAPILogoff)::GetProcAddress(hMAPI,"MAPILogoff");

   const BOOL bFunctionsLoaded = (0!=MAPILogon)&&(0!=MAPISendMail)&&(0!=MAPILogoff);
   ASSERT(bFunctionsLoaded);

   if(bFunctionsLoaded)
   {

      LHANDLE session = 0;
      VERIFY(SUCCESS_SUCCESS==MAPILogon(0,0,0,MAPI_NEW_SESSION,0,&session));
      ASSERT(0!=session);

      MapiRecipDesc recipient;
      ::ZeroMemory(&recipient,sizeof(recipient));
      recipient.ulRecipClass = MAPI_TO;
      recipient.lpszName = lpszTo;

      MapiMessage message;
      ::ZeroMemory(&message,sizeof(message));
      message.lpszSubject = lpszSubject;
      message.lpszNoteText = lpszMessage;
      message.nRecipCount = 1;
      message.lpRecips = &recipient;

      bSent = SUCCESS_SUCCESS == MAPISendMail(session,0,&message,0,0);

      VERIFY(SUCCESS_SUCCESS==MAPILogoff(session,0,0,0));

   }

   ::FreeLibrary(hMAPI);

   return bSent;
} 
```

被叫...

```
SendMail("from","to","subject","body"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:21:56.707

看起来 MAPI 不适合 HTML 电子邮件。

[http://support.microsoft.com/kb/268440](http://support.microsoft.com/kb/268440)

我已经通过 MFC 发送了 HTML 电子邮件，但这不是 MAPI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T21:13:42.330

我发送了同样的要求 - 我发现附加 html 文件会导致 html 文件在电子邮件正文中使用。

下面的代码是在这个网站（某处）上找到的，效果很好。

## 代码

```
bool SendMail(HWND hWndParent, std::string strAttachmentFileName,  std::string strSubject,std::string& err)
{
    // The attachment must exist as a file on the system
    // or MAPISendMail will fail, so......
    if (strAttachmentFileName.empty())
        return false;

    // You may want to remove this check, but if a valid
    // HWND is passed in, the mail dialog will be made
    // modal to it's parent.
    //if (!hWndParent || !::IsWindow(hWndParent))
    //   return false;

    HINSTANCE hMAPI = ::LoadLibraryA("MAPI32.DLL");
    if (!hMAPI)
        return false;

    // Grab the exported entry point for the MAPISendMail function
    ULONG (PASCAL *SendMail)(ULONG, ULONG_PTR, 
            MapiMessage*, FLAGS, ULONG);
    (FARPROC&)SendMail = GetProcAddress(hMAPI, 
            "MAPISendMail");

    if (!SendMail)
        return false;

    //  TCHAR szFileName[_MAX_PATH];
    // TCHAR szPath[_MAX_PATH];
    // TCHAR szSubject[_MAX_PATH];
    // ::strcpy(&szFileName[0], strAttachmentFileName.c_str());
    // ::strcpy(&szPath[0], strAttachmentFileName.c_str());
    // ::strcpy(&szSubject[0], strSubject.c_str());

    MapiFileDesc fileDesc;
    ::ZeroMemory(&fileDesc, sizeof(fileDesc));
    fileDesc.nPosition = (ULONG)-1;
    fileDesc.lpszPathName = (char *)strAttachmentFileName.c_str();
    fileDesc.lpszFileName = (char *)strAttachmentFileName.c_str();

    MapiMessage message;
    ::ZeroMemory(&message, sizeof(message));
    message.lpszSubject = (char *)strSubject.c_str();//&szSubject[0];//szSubject;
    message.nFileCount = 1;
    message.lpFiles = &fileDesc;

    // Ok to send
    int nError = SendMail(0, (ULONG_PTR)hWndParent, 
            &message, MAPI_LOGON_UI|MAPI_DIALOG, 0);

    if (nError != SUCCESS_SUCCESS && 
            nError != MAPI_USER_ABORT && 
            nError != MAPI_E_LOGIN_FAILURE)
        err =  "error";
    return false;
    err="ok";
    return true;
} 
```

# c++ - C++ Inventory & Item Crafting System - 将“stuff”转换为 hash_tag “garblygook”并反转 hash_tags 以获得真正的“stuff”

> ID：12113256
> 
> 赞同：1
> 
> 时间：2012-08-24T16:28:07.203
> 
> 标签：c++, hash, tags

我正在为游戏创建一个项目制作系统，并且需要能够获取玩家可以选择的任何随机选择的项目，并将任何选择的项目转换为 hash_tag，然后可以将其与所有可能的项目组合中的所有 hash_tags 进行比较，寻找正确的匹配。这应该是获得我正在寻找的结果的最简单和最快的方法，但是在做这种事情的所有其他方法中（我几乎都经历过），哈希标签是我的一件事我从来没有稍微碰过。我什至不知道从哪里开始，并且可以使用很多帮助。

基本上它需要做的是允许玩家选择他或她拥有的任何东西，将选择的东西组合成一个 hash_tag 并检查该数字的哈希标签板。该数字是否导致“有效组合”或“这不是有效组合”无关紧要，只要哈希标签板上所有可能的混合都可用。

另一方面，如果存在有效匹配并添加新项目，显然会有一些代码用于挑选和删除它们，但这不是我需要帮助的。（尽管任何对此有建议的人我都会很高兴听到他们的声音！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:51:07.090

从到目前为止我收集到的内容中，您有一个有序的输入列表（正在制作的项目），并且正在寻找一个返回哈希的函数（可能是为了便于比较和存储）并且还具有可逆的属性。

对于一般情况，只要您的哈希具有的位数少于您的输入数据哈希就会产生冲突，并且由于这些冲突，向后转换将是不可能的，这样的事情就不可能存在。

一个好的开始是为每个项目选择唯一的标识符并使​​用这些标识符的列表（如果顺序与制作无关，则按大小排序）作为哈希。比较仍然会很快。

# android - 如何使滑动抽屉覆盖Android中的其他元素？

> ID：12113260
> 
> 赞同：0
> 
> 时间：2012-08-24T16:28:22.867
> 
> 标签：android, android-layout

我正在尝试实现一个滑动抽屉，其中处理程序是一个按钮/文本。其背后的主要原因是节省空间。我希望实现的是抽屉将在原始视图的顶部打开内容。但实际发生的是抽屉在我的原始视图中使用了相对空间（按钮+内容）。

我希望下面的图片能更仔细地解释它。所以我在抽屉里有一个扬声器图标作为处理程序。我希望它只占用那些 20dp 左右的空间。当我点击扬声器时，抽屉内容会覆盖下面的数据。当您再次单击扬声器时，抽屉关闭。现在，如果我模拟这种情况，抽屉仅在蓝色矩形指示的区域中打开/关闭。 ![在此处输入图像描述](../Images/f30eff0ffc9943b3334e7336689f6890.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T16:38:00.083

从您的屏幕截图来看，您的滑动抽屉位于 LinearLayout 内。

因此它不能做你正在寻找的东西。（因为 LinearLayout 中的项目将线性列出 - 因此不会覆盖）

这里的文档：http: [//developer.android.com/reference/android/widget/SlidingDrawer.html](http://developer.android.com/reference/android/widget/SlidingDrawer.html)说你应该只在相对或框架布局中使用滑动抽屉（因为这些允许覆盖）：

> SlidingDrawer 应该用作布局内的叠加层。这意味着 SlidingDrawer 只能在 FrameLayout 或 RelativeLayout 中使用。

我会推荐以下结构：

```
Relative Layout
-Sliding Drawer (id: slidingDrawer, aligned to parent top)
-Linear Layout (id: contentLyout, aligned as below id:slidingDrawer)
--TextView (id: deviceTitle)
--ScrollView (id: contentScroll)
---LinearLayout (I can't see the rest of your layout) 
```

# html - jRecorder - jQuery

> ID：12113263
> 
> 赞同：2
> 
> 时间：2012-08-24T16:28:45.257
> 
> 标签：html

我想使用 html5 录制声音，我也尝试过 jRecorder-jQuery。从文档中，它提到二进制文件保存在浏览器缓存中。我的问题是它在哪里？我检查了 Chrome 的缓存，但看不到临时文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:54:50.920

> **主机（强制）：**发布录制的 WAV 文件的 PHP 文件 http 位置。

那是来自 jRecorder 文档（[http://www.sajithmr.me/jrecorder/index.html](http://www.sajithmr.me/jrecorder/index.html)），**似乎该文件没有保存在本地**，而是通过发布请求发送到主机设置上提到的 php 页面。

## 在 jRecorder 设置中添加：

```
'host': 'acceptfile.php?filename=hello.wav' 
```

并将 更改为`acceptfile.php`将处理已发布文件的 php 脚本。

## 用于处理 wav 文件的示例 php 脚本（也来自文档）：

```
 $upload_path = dirname(__FILE__). '/';

   //here assume that filename parameter is passed. or your can write $filename= 'test.wav';
   $filename = $_REQUEST['filename'];

   $fp = fopen($upload_path."/".$filename.".wav", "wb");

   fwrite($fp, file_get_contents('php://input'));

   fclose($fp);

   exit('done'); 
```

此脚本会将音频文件（wav）保存在脚本文件夹中。

# c++ - 功能无法访问

> ID：12113275
> 
> 赞同：5
> 
> 时间：2012-08-24T16:29:28.177
> 
> 标签：c++

我有

```
// file BoardInitializer.h
#include <stdio.h>
#include <tchar.h>
#include <string>
#include <iostream>

using namespace std;
class BoardInitializer
{
    static int *beginBoard;
    static int *testBoard;
    static void testBoardInitialize();
}

// file mh.cpp
#include "BoardInitializer.h"

int main(int argc, char* argv[])
{
    BoardInitializer.testBoardInitialize();
    return 0;
} 
```

我`BoardInitializer::testBoardInitialize`在`mh.cpp`. 但我收到错误“功能无法访问”。怎么了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T16:32:01.367

类具有隐式`private`访问，您需要`public:`在方法之前添加显式语句。此外，它是一种静态方法，需要使用`::`运算符来解决。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-24T16:35:22.827

`class`C++ 中a 的默认保护级别是`private`（其他是`public`and `protected`）。这意味着您的所有成员和您的成员函数都是私有的，并且只能由该类的其他成员函数或该类的朋友（函数或类）访问。

函数 main 两者都不是，您最终会遇到错误。

C++ 提供了一个方便的快捷方式（或 C legacy cruft，取决于你的世界观）`struct`，它的默认保护级别是 `public`.

```
class my_class {
public:
  int my_int;      
}; 
```

或者

```
struct my_struct {
  int my_int;
}; 
```

应该显示差异。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-24T16:31:42.177

默认情况下，类元素是私有的。写这个：

```
class BoardInitializer
{
public:
    static int *beginBoard;
    static int *testBoard;
    static void testBoardInitialize();
}; 
```

默认情况下，结构元素是公共的。写这个：

```
struct BoardInitializer
{
    static int *beginBoard;
    static int *testBoard;
    static void testBoardInitialize();
}; 
```

静态类元素必须使用`::`操作符访问。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-24T16:32:08.830

`public:`您忘记通过在类定义的开头添加来公开该函数。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-24T16:33:22.567

默认情况下，类属性是私有的。您必须将 public: 添加到您的班级。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-07T15:21:05.497

正如大家所指出的，类成员默认为`private`. 如果你想让它可以访问，只需让它们`public`.

如果您仍想保护/抽象/隐藏您的数据成员（此处`*beginBoard`和`testBoard`），只需将函数设为`public`：

```
class BoardInitializer {
    static int *beginBoard;
    static int *testBoard;
 public:
   static void testBoardInitialize();
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-22T23:44:18.577

另一种可能性（对于将来来这里的人）是您`public`在继承时忘记了关键字。也就是说，你应该有`class Base: public Derived`.

# java - 我如何知道 Observer 类在 Java 中发送的通用对象？

> ID：12113283
> 
> 赞同：1
> 
> 时间：2012-08-24T16:29:41.407
> 
> 标签：java, generics, observer-pattern

我正在使用 Java 实现 Observer / Observable 模式。但是，我在代码的观察者部分遇到了问题。

**可观察的**

```
public class Model extends Observable {

   public void notify() {
       this.setChanged();
       this.notifyObservers(new ArrayList<A>());
       this.notifyObservers(new ArrayList<B>());
   }
} 
```

**观察者**

```
public class View implements Observer {

    @Override
    public void update(Observable observable, Object object) {
        // TODO: If object is ArrayList<A>?
        System.out.println("A");
        // TODO: If object is ArrayList<B>?
        System.out.println("B");
    }
} 
```

我将如何填写 TODO 注释以检查 ArrayList 上的泛型？这甚至可能吗？（如果可能的话，我宁愿在不实现更多类的情况下这样做。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:32:55.820

您可以使用`instanceof`来查看您的对象是什么类型，但您正在滥用该模式。
这个想法是`Observable`有一个定义良好的接口，所有`Observer`需要知道的是使用 API 来传递通知。不应该在代码中混入
逻辑来知道究竟*是什么。* 从你的问题听起来对我来说，你有 2 个，他们应该让他们自己的听众*对他们特别感兴趣以*获取通知。没有一个结合`Observable`
`Observable`

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T16:36:20.530

一个 Observable 应该发送一种且只有一种类型的数据。

```
public class ModelA extends Observable {

   public void notify() {
       this.setChanged();
       this.notifyObservers(new ArrayList<A>());
   }
}

public class ModelB extends Observable {

   public void notify() {
       this.setChanged();
       this.notifyObservers(new ArrayList<B>());
   }
} 
```

您的另一种选择是将 ArrayList<A> 和 ArrayList<B> 放入一个类中。你可以用那个类通知你的观察者。*

# bash - 如何从 bash 脚本中引用重定向文件？

> ID：12113286
> 
> 赞同：3
> 
> 时间：2012-08-24T16:29:44.040
> 
> 标签：bash, redirect

我想编写一个 bash 脚本 myscript 以便发出以下命令：

我的脚本 > 文件名.txt

将返回其输出被重定向到的文件名 filename.txt。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:38:38.727

使用`lsof`：

```
outfile=$(lsof -p $$ | awk '/1w/{print $NF}')
echo $outfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:13:13.140

如果您在 Linux 上运行，请检查`/proc/self/fd/1`链接到的位置。

例如，脚本可以执行以下操作：

```
#!/bin/bash
readlink /proc/self/fd/1 
```

然后运行它：

```
$ ./myscript > filename.txt
$ cat filename.txt
/tmp/filename.txt 
```

请注意，如果要将输出文件的值保存到变量或其他内容中，则不能使用，`/proc/self`因为它在 subshel​​l 中会有所不同，但您仍然可以使用`$$`：

```
outputfile=$(readlink /proc/$$/fd/1) 
```

# ios - Xcode 找不到安装此版本的软件映像，但 BUILD SUCCEEDED

> ID：12113288
> 
> 赞同：3
> 
> 时间：2012-08-24T16:29:55.787
> 
> 标签：ios, xcode

我正在尝试将我的应用程序部署在具有 iOS 4.2.1 的 iPod Touch（第 2 代）上。以下是开发细节：

XCode 版本：4.2.1 (4D502)

iOS SDK：5.0：（9A334）

部署目标：4.0

我使用 XCode 成功安装了配置文件。但是，在管理器窗口的设备选项卡中，它显示以下错误：

Xcode 找不到安装此版本的软件映像。

我的设备列在项目窗口的左上角。当我在选择设备的情况下运行我的应用程序时，它显示“构建成功”。但是我的设备上没有安装该应用程序！！！

我认为我设备上的 Xcode 版本和 iOS 版本之间存在一些不匹配。

在这种情况下请帮助我，因为这让我发疯。 ![组织者视图](../Images/35b2ba68e54b92b6c618fbb81ce6f6d5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:54:39.820

别担心。Xcode 通常将您的 iDevice 的固件文件存储在本地文件夹中以供开发人员使用（查看是否是设备问题等）。它的意思是 4.2.1 固件不在 Xcode 的文件夹中。这不是问题。

# c# - 在 TFS 中存储未来更改的正确方法是什么？（直到某一天才能实施）

> ID：12113292
> 
> 赞同：3
> 
> 时间：2012-08-24T16:30:25.320
> 
> 标签：c#, tfs

我在一家受政府实体监管的公司工作。他们每年都会指定某些规范，并且经常进行需要更改大部分代码库的更改。

话虽如此，我们喜欢提前进行更改，以避免在最后一刻实施的压力和匆忙。

**将代码与所有其他相关代码一起存储在存储桶中的最佳方法是什么，以便我们在等待截止日期时仍然可以进行功能和错误修复？**

*从主存储库创建一个私有分支会起作用吗？*–**卡洛斯菲盖拉**

我不确定。这是一个团队的努力，所以私人也允许他们工作吗？我们都创建单独的私人分支机构还是一个大型分支机构？我最大的担忧是尝试将所有这些更改与最新的错误修复和功能合并。似乎这将是一场噩梦。如果私人分支机构对此有所帮助，我会调查他们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T16:53:22.113

您应该创建一个单独的（我们称之为**feature**）分支。进行更改并不断地从 Main 合并到此功能分支，这样当您准备好合并回 Main 时就不会遇到巨大的合并问题。当您准备好合并和实施更改时，从您的功能分支合并到 Main，然后最终合并到发布分支。

![在此处输入图像描述](../Images/0955f4e1c9982f3ef5bcff6ed20fa753.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T17:05:55.050

这属于*配置管理*的范畴。您应该阅读[Brad Appleton 的](http://bradapp.blogspot.com/)书[*Software Configuration Management Patterns: Effective Teamwork, Practical Integration*](http://www.scmpatterns.com/)。我不一定同意一切，但他有一些很好的建议。

![在此处输入图像描述](../Images/d7860c3837703730c3e05bdbc56863b1.png)

CM 的其他好资源是[CM Crossroads](http://www.cmcrossroads.com/)，还有 USENET 新闻组[comp.software.config-mgt](https://groups.google.com/forum/?fromgroups#!forum/comp.software.config-mgmt)。

有几种方法可以做事：

*   **在发布（或发布候选）时在主干和分支上开发。**

    这种方法的优点是正在进行的开发已经在主干中。唯一需要做的合并是将错误修复从一个版本传播到主干和其他版本。

*   **每个版本的分支。在分支上开发，发布时合并到主干。**

    在这种方法中，当开始发布版本时，会从主干中切出一个新分支。当工作“准备好发布”时，它会合并回主干，因此主干代表发布的时间表。这里的优点是后备箱及其历史保持相当干净。所有的错误开始等都保存在分支中。缺点，特别是如果同时工作多个版本，则合并回主干可能会很痛苦，如果两个版本在主干中相互踩踏——就像是一种竞争条件。

*   **每个功能的分支。组装功能以组成一个版本。**

    这与上面类似，但更细化。同样的优点/缺点也适用。

对于您想要做的事情，我会从您现有的“已发布”代码线中创建一个新分支。在新代码行中进行待定更改。当需要将其推出时，将其合并回主代码线 - 基本上是您的新功能的一个分支。

另一种方法是在当前代码库中实现“暗”的新功能，并使用配置开关让您在选择时启用它们。这样可以避免分支并让您轻松打开该功能。这确实需要额外的 QA 工作，因为他们需要对所有内容进行回归测试，以确保在“暗”模式下，系统仍然按照进行更改之前的方式工作。当然，他们还必须在启用时测试新更改，以确保它们正常工作。

# offset - div内联块中的H2奇怪的偏移量

> ID：12113296
> 
> 赞同：9
> 
> 时间：2012-08-24T16:30:38.247
> 
> 标签：offset, css

我有一个`<a>`周围的 a`<div>`也有一些图像，一个`<h2>`和一段文字。`<a>`都是`inline-block`。_ 每当 H2 延伸到两条线时，下一条线`<a>`就会偏移。下面是一个截图。

![看](../Images/daa698bde68c490d326e737b7ea69ce7.png)

HTML：

```
<a href="#">
    <div>
        <div class="imgOverflow">
           <img src="/hello/there">
        </div>
        <h2>This is the title</h2>
        <p>This is a paragraph</p>
    </div>

</a> 
```

CSS：

```
a {
    display:inline-block;
    font-size:16px;
    border:1px solid grey;
    width:260px;
    margin:5px;
    color:black;
    overflow: hidden;
}
div {
    display:block;  
    padding:5px;
    width:250px;
    height:300px;
}   
p {
    font-size:12px;
    text-align:justify;
 }
h2 {
    margin:5px 0 10px 0;
    font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
}
.imgOverflow {
    margin:-5px 0 0 -5px;
    width:260px;
    padding:0;
    overflow:hidden;
    height:130px;
    display:block;
} 
```

如果有人知道某种 CSS 属性来避免这种情况，那将非常有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-24T16:43:15.083

我猜那是因为您的`a`元素垂直对齐到底部，并且您的一些`h2`元素跨越两行，而最后一个元素只有一行。尝试这个：

```
a { 
display:inline-block;
font-size:16px;
border:1px solid grey;
width:260px;
margin:5px;
color:black;
overflow: hidden;
vertical-align: top; /* Notice this line */
} 
```

[一个工作示例](http://jsfiddle.net/4BhCS/)

**编辑**

此编辑是在 imray 的问题之后进行的。

将近 2 年后，我在 Ubuntu 12.04 LTS - Chrome 33.0.1750.152 中再次测试了代码，这个问题已经得到答复，并发现 - 现在 - 当你删除`vertical-align`属性时，代码也能正常工作。但是，如果您删除该`overflow`属性，那么您将看到显示中断。

现在，想象以下情况：

```
This is our container:
------------------------------------------------
|                     Element 2:               |
|    Element 1:       --------------------     |
|    -------------    | Lorem ipsum dolor|     |
|    | Lorem ips |    | sit amet         |     |
|    -------------    --------------------     |
------------------------------------------------ 
```

当默认值打开`element 1`并且`element 2`将与其容器的基线对齐并且此基线更改 - 显然 - 根据容器的高度，最终由其子项的高度确定 - 如果未另行指定。

显然，在撰写本文时 - 由于浏览器的 css 实现往往会随时间而变化，删除`vertical-align: bottom`和保留`overflow: hidden`似乎可以使代码工作 - 未在其他浏览器中测试 - 但再次简单地将它们对齐到顶部，应该可以解决问题完全是因为当你对齐到顶部时，下一行中的元素将对齐到行的顶部。

# cocoa - NSUserNotificationCenter 关闭通知

> ID：12113300
> 
> 赞同：20
> 
> 时间：2012-08-24T16:30:55.960
> 
> 标签：cocoa, nsnotificationcenter, osx-mountain-lion, nsusernotification

我正在尝试将新的 Mountain Lion NSUserNotificationCenter 用于我的应用程序（实际上并不太难）。发布通知就像一个魅力通过

```
NSUserNotification *userNotification = [[NSUserNotification alloc] init];
userNotification.title = @"Some title";
userNotification.informativeText = @"Some text";

[[NSUserNotificationCenter defaultUserNotificationCenter] deliverNotification:userNotification]; 
```

但是，一旦应用程序获得焦点，我想关闭屏幕上的所有通知。例如，就像新的消息应用程序那样。在后台收到新消息时，会显示通知。当应用再次激活时，它们会自动关闭并从屏幕和通知中心消失。

为了复制这一点，我在`NSApplicationDidBecomeActiveNotification`通知中注册了一个方法，该方法也被成功调用。我在那里打电话`[NSUserNotificationCenter defaultUserNotificationCenter] removeAllDeliveredNotifications]`。

但是，这会导致已在通知中心收集的通知被删除，而右上角显示的相应“气泡”仍会显示。

迭代所有传递的通知并单独删除它们具有完全相同的效果，就像 using`scheduleNotification`而不是`deliverNotification`.

我是唯一一个遇到这种情况的人，还是我错过了以编程方式关闭通知的屏幕部分和通知中心部分的东西？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-03T23:19:20.413

Messages 应用程序可能正在使用私有 NSUserNotificationCenter`_removeAllDisplayedNotifications`或`_removeDisplayedNotification:`方法。

您可以尝试使用这些方法来测试这是否是您要查找的内容。只需添加这个类别接口来声明方法：

```
@interface NSUserNotificationCenter (Private)
- (void)_removeAllDisplayedNotifications;
- (void)_removeDisplayedNotification:(NSUserNotification *)notification;
@end 
```

不幸的是，由于这些是未记录的方法，因此您不能在通过 App Store 分发的应用程序中使用它们。如果这确实是您正在寻找的，那么您应该[提交一个错误](https://bugreport.apple.com)并要求这些方法成为公共 API 的一部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-27T07:24:51.490

从 10.9 开始，以下方法会删除所有显示的通知：

```
// Clear a delivered notification from the notification center. If the 
// notification is not in the delivered list, nothing happens.
- (void)removeDeliveredNotification:(NSUserNotification *)notification;

// Clear all delivered notifications for this application from the 
// notification center.
- (void)removeAllDeliveredNotifications; 
```

自 10.8 以来，这种行为似乎发生了变化，因为在调用这些方法时也会删除任何显示的通知（感谢 @0xced 的澄清）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-22T22:44:39.170

`removeDeliveredNotification`正在为我删除显示的通知（在 10.11 上），`identifier`必须设置通知上的警告。

# jquery - rails：使用 jquery-ui-timepicker-addon.js

> ID：12113306
> 
> 赞同：0
> 
> 时间：2012-08-24T16:31:09.940
> 
> 标签：jquery, ruby-on-rails

我正在尝试使用[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)插件。

在我的 gemfile 中，我有（并且我确保安装了 gem）：

```
gem 'jquery-rails' 
```

我将 jquery-ui-timepicker-addon.js 下载到 app/assets/javascripts 目录中

我将 CSS 部分添加到 app/assets/stylesheets/application.css.erb

我在 app/assets/javascript/application.js 中添加了以下内容：

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui
//= require jquery-ui-timepicker-addon

$(
  function() {
    $('.date_with_hours_and_minutes').datetimepicker(
      {dateFormat: 'yy-mm-dd hh:mm'}   )
  }
); 
```

在我看来，我有：

```
<%= f.text_field :start_date_time, id: "date_with_hours_and_minutes" %> 
```

我没有收到任何错误，但我也没有看到日期时间选择器。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:47:57.193

尝试

```
$('#date_with_hours_and_minutes').datetimepicker( 
```

你需要攻击id

**更新**

除了上述之外，我注意到您正在尝试使用 dateFormat 来处理时间，我想知道是否需要 timeFormat 来代替：

```
$('#date_with_hours_and_minutes').datetimepicker({
  dateFormat: 'yy.mm.dd',
  timeFormat: 'hh:mm'
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:15:32.557

使用以下之一

将附加事件更改为`id: date_with_hours_and_minutes`而不是类，因为您在字段上定义了 id

```
 $('.date_with_hours_and_minutes').datetimepicker({
      dateFormat: 'yy-mm-dd'
  }) 
```

到

```
$('#date_with_hours_and_minutes').datetimepicker({
  dateFormat: 'yy-mm-dd'
}) 
```

或者如果视图上有很多日期时间选择器

给他们上课

```
<%= f.text_field :start_date_time, class: "date_with_hours_and_minutes" %>

$('.date_with_hours_and_minutes').datetimepicker({
      dateFormat: 'yy-mm-dd '
}); 
```

# python - 实现带有冲突的散列函数

> ID：12113310
> 
> 赞同：1
> 
> 时间：2012-08-24T16:31:29.253
> 
> 标签：python, hash

对于一个演示项目，我想创建一个碰撞概率非常高的散列函数。简单的事情就可以了，因为该项目的目的不是安全 - 而是演示哈希冲突。

任何人都可以帮助我开始使用算法或示例实现，或者只是指出我正确的方向吗？

我在 Python 中执行此操作，尽管这可能无关紧要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T16:42:49.160

您可以使用字符串中字符的总和。这是我在高中第一次学习 BASIC 时教给我的第一个哈希函数，我马上就遇到了碰撞问题，不得不弄清楚如何处理它。

```
sum(ord(c) for c in text) 
```

换位很容易通过交换字符串甚至单词来实现。为了更有趣，您还可以使其不区分大小写：

```
sum(ord(c) for c in text.lower()) 
```

我什至会给你最后一个碰撞示例：Jerry Kindall -> Dilan Kyrjer :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:48:47.587

想到的一种算法是使用字符串的第一个字母进行散列。

就像是

```
hash[ord(text[0]) - ord('a')] = text 
```

因此，以相同字母开头的任何内容都将被散列在一起。如您所见，这是很多冲突。

另一个想法是根据字符串的长度进行散列。

```
hash[len(text)] = text 
```

您可以使用 hayden 在上面的评论中建议的内容，并通过将长度取模某个数字来引起进一步的冲突。例如。

```
hash[len(text) % 5] = text 
```

# c# - 将第二个 RenderTarget2D 绘制到后台缓冲区会覆盖第一个

> ID：12113311
> 
> 赞同：1
> 
> 时间：2012-08-24T16:31:35.827
> 
> 标签：c#, xna, xna-4.0

我的问题是我试图将两个不同的 RenderTarget2D 绘制到屏幕上，但只显示最后绘制的一个。该代码类似于以下代码，并被调用两次，一次由需要使用该`Draw`方法绘制的类的每个实例调用：

```
public override void Draw()
{
  gfxDevice.SetRenderTarget(myRenderTarget);
  gfxDevice.Clear(Thistle);

  //pseudocode
  foreach (something in a list)
  { spritebatch.begin();
    spritebatch.DrawString(something);
    spritebatch.end();
  }

  //reset to the backbuffer 
  gfxDevice.SetRenderTarget(null);
  gfxDevice.Clear(backgroundColor)  //Here is what I thought the offending line was

  //draw the RenderTarget to backbuffer
  spriteBatch.Begin();
  spriteBatch.Draw(myRenderTarget, rect, this.backgroundColor);
  spriteBatch.End(); 
```

我认为解决方案是在`graphicsDevice`每次`Draw()`调用该方法时停止清除，但如果我不这样做，除了新绘制的渲染目标之外的所有东西都会被绘制成丑陋的紫色。像这样：![在此处输入图像描述](../Images/9fb42d633568d183945dcc3f0ac68a8c.png)

[由于这个问题](https://stackoverflow.com/questions/3270507/changing-rendertarget-results-in-purple-screen)`End()`，我认为紫色是精灵批处理的结果

**为了正确绘制两个 RenderTargets，我需要更改什么，这意味着两个小部件都被绘制，以及正确的`Color.Thistle`背景？**

理想情况下，屏幕看起来像两者的组合：![这个](../Images/913641b617fb10f4e7577f5cab8f4a20.png)和![这个](../Images/df3ca5775e5f99e222bcd653c0484c92.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T16:47:12.937

您是正确的，您需要删除`gfxDevice.Clear(backgroundColor)`呼叫。如果您绘制到后台缓冲区，然后清除后台缓冲区，那么显然您在清除之前绘制的任何内容都不会出现！

你想*在渲染任何东西之前*清除后台缓冲区，即在帧的开头。

**编辑**

在对提供的源代码进行了更彻底的查看之后，我想我知道这里实际发生了什么——这是使用渲染目标的棘手问题之一。

实际上，您看到的奇怪紫色并不是由`SpriteBatch.End()`. 这是 XNA 重置其内存时渲染目标自动清除的颜色。

XNA 何时清除渲染目标的内存？ *每当该渲染目标作为活动目标设置到图形设备上时。* 因此，无论何时调用`SetRenderTarget(null)`，XNA 都会清除后缓冲区的内存并将其重置为可爱的紫色。

为避免这种情况，您需要*在将任何内容绘制到 backbuffer 之前绘制**所有*渲染目标。然后，将后台缓冲区设置为您的活动渲染目标，并一次绘制您之前更新的所有渲染目标。

# silverlight - Silverlight 5 绑定 - 为什么这不起作用？

> ID：12113312
> 
> 赞同：0
> 
> 时间：2012-08-24T16:31:36.747
> 
> 标签：silverlight, data-binding, silverlight-5.0

我可以像这样在代码隐藏中绑定一个组合框：

```
 private void comboBox1_Loaded(object sender, RoutedEventArgs e)
    {
        var combo = sender as ComboBox;
        App.SchedulerVM = new ScheduleViewModel();
        combo.DataContext = App.SchedulerVM;
        combo.ItemsSource = App.SchedulerVM.Frequency;
    } 
```

这有效 - 我的组合框包含 SchedulerVM 对象中频率列表中的项目。

但是，我不想在代码隐藏中做任何这些。但是我之前在 WP7 中这样做的方法在这里不起作用。如果我在上面的 Loaded 方法中注释掉最后一行并尝试在 XAML 中设置 ItemsSource，它不起作用 - 没有任何显示：

```
<ComboBox Name="comboBox1" Loaded ="comboBox1_Loaded" ItemsSource="{Binding 
Frequency}" /> 
```

这也不起作用：

```
<ComboBox Name="comboBox1" Loaded ="comboBox1_Loaded" ItemsSource="{Binding 
App.SchedulerVM.Frequency}" /> 
```

也不是这个：

```
<ComboBox Name="comboBox1" Loaded ="comboBox1_Loaded" ItemsSource="{Binding 
SchedulerVM.Frequency}" /> 
```

理想情况下，DataContext 也不必在此控件的代码隐藏中显式设置，它将从 LayoutRoot 继承，我已在代码隐藏中设置它。但这是我在这里进行故障排除的第 2 步。

我究竟做错了什么？'

谢谢！

**编辑** ScheduleViewModel 如下所示：

```
namespace SchedulerUI.ViewModels
{
public class ScheduleViewModel : INotifyPropertyChanged
{
    //private properties
    private Schedule _thisSchedule; 

    //public properties
    public Schedule ThisSchedule
    {
        get { return _thisSchedule; }
        set
        {
            if (value != _thisSchedule)
            {
                NotifyPropertyChanged("ThisSchedule");
            }

            _thisSchedule = value;
        }
    }

    public List<string> Frequency = new List<string>();
    public string Test;

    //constructors
    public ScheduleViewModel()
    {
        Frequency.AddRange(new string[] { "Daily", "Weekly", "Monthly" });
        Test = "This is only a test.";
    }

    //INotifyPropertyChanged Implementation
    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (null != handler)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
}
} 
```

这是整个 XAML：

```
<UserControl x:Class="SchedulerUI.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300" d:DesignWidth="400">

<Grid x:Name="LayoutRoot" Background="White" Loaded="LayoutRoot_Loaded">

        <ComboBox Height="23" HorizontalAlignment="Left" Margin="34,41,0,0" Name="comboBox1" Loaded ="comboBox1_Loaded" VerticalAlignment="Top" Width="120" ItemsSource="{Binding Frequency}" />
        <TextBox BorderBrush="Black"  HorizontalAlignment="Left" Margin="34,41,0,0" Width="100" Height="100" DataContext="LayoutRoot.DataContext"  Text="{Binding  Test}" /> 

</Grid>
</UserControl> 
```

这是整个代码隐藏：

```
namespace SchedulerUI
{
public partial class MainPage : UserControl
{
    public MainPage()
    {
        InitializeComponent();
        App.SchedulerVM = new ScheduleViewModel();
        comboBox1.DataContext = App.SchedulerVM;
        List<string> testlist = App.SchedulerVM.Frequency;
        string teststring = App.SchedulerVM.Test;
    }

    private void LayoutRoot_Loaded(object sender, RoutedEventArgs e)
    {
        //App.SchedulerVM = new ScheduleViewModel();
        //var root = sender as Grid;
        //if (root != null)
        //{
        //    root.DataContext = App.SchedulerVM;
        //}
    }

    private void comboBox1_Loaded(object sender, RoutedEventArgs e)
    {
        //var combo = sender as ComboBox;
        //App.SchedulerVM = new ScheduleViewModel();
        //combo.DataContext = App.SchedulerVM;
        //combo.ItemsSource = App.SchedulerVM.Frequency;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:07:50.960

您的绑定不起作用，因为：

*   当您设置`ItemsSource`它`XAML`首先执行并尝试绑定错误/空`DataContext`
*   然后`Loaded`引发事件，这将设置正确`DataContext`但您已经存在的绑定不会自动刷新。

如果您必须`DataContext`在代码隐藏中设置，请在您的视图构造函数中进行：

```
public YourView()
{
    InitializeComponent();
    combo.DataContext = App.SchedulerVM;
} 
```

然后以下绑定应该起作用：

```
<ComboBox Name="comboBox1" ItemsSource="{Binding Frequency}" /> 
```

WPF/Silverlight 中的数据绑定需要 **公共属性**。当前`Frequency` **是您的视图模型上的一个公共字段**，将其更改为一个属性，并且一切都应该工作：

```
private List<string> frequency = new List<string>();
public List<string> Frequency { get { return frequency; } set { frequency = value; } 
```

这就是为什么它在你的初始加载事件中起作用的原因，因为你没有在那里使用数据绑定，但你只是设置了`combo.ItemsSource`.

# asp.net - 报告查看器查询

> ID：12113314
> 
> 赞同：1
> 
> 时间：2012-08-24T16:31:41.730
> 
> 标签：asp.net, asp.net-mvc, reporting-services, ssrs-2008

我正在开发一个 mvc .net 应用程序，我想创建一个带有参数的报告 (.rdlc)。问题是我找不到用于创建数据集的查询选项。 ![在此处输入图像描述](../Images/a7b542c8a0ec0f22217177b5a324e4cc.png)

# java - 在 WebLogic 中配置 JMS 消息大小：weblogic.socket.MaxMessageSizeExceededException

> ID：12113315
> 
> 赞同：4
> 
> 时间：2012-08-24T16:31:43.567
> 
> 标签：java, jms, weblogic

我目前有两个客户端（生产者/消费者），我正在尝试通过 JMS 发送一个大文件。我成功地生成文件并将其发送到 JMS 服务器，没有任何问题。问题是当我尝试使用消息时，我得到以下异常：

```
Aug 24, 2012 11:25:37 AM client.Client$1 onException
SEVERE: Connection to the Server has been lost, will retry in 30 seconds. weblogic.jms.common.LostServerException: java.lang.Exception: weblogic.rjvm.PeerGoneException: ; nested exception is: 
    weblogic.socket.MaxMessageSizeExceededException: Incoming message of size: '10000080' bytes exceeds the configured maximum of: '10000000' bytes for protocol: 't3'
<Aug 24, 2012 11:25:37 AM CDT> <Error> <Socket> <BEA-000403> <IOException occurred on socket: Socket[addr=127.0.0.1/127.0.0.1,port=7001,localport=51764]
 weblogic.socket.MaxMessageSizeExceededException: Incoming message of size: '10000080' bytes exceeds the configured maximum of: '10000000' bytes for protocol: 't3'.
weblogic.socket.MaxMessageSizeExceededException: Incoming message of size: '10000080' bytes exceeds the configured maximum of: '10000000' bytes for protocol: 't3'
    at weblogic.socket.BaseAbstractMuxableSocket.incrementBufferOffset(BaseAbstractMuxableSocket.java:174)
    at weblogic.rjvm.t3.MuxableSocketT3.incrementBufferOffset(MuxableSocketT3.java:351)
    at weblogic.socket.SocketMuxer.readFromSocket(SocketMuxer.java:983)
    at weblogic.socket.SocketMuxer.readReadySocketOnce(SocketMuxer.java:922) 
```

我相信这与我在 WebLogic 中的 MaxMessage 大小设置有关，而不是代码问题（但我当然可能是错的）。这是我对最大消息大小的设置 ![WebLogic 设置](../Images/83f972cffdd4937dfa01fb077a1e23bf.png)

我不确定为什么会收到此异常，因为此协议的最大消息大小大于异常声称的大小...有什么想法吗？

我也尝试添加服务器启动参数 -Dweblogic.MaxMessageSize=200000000，但无济于事。 ![在此处输入图像描述](../Images/1451c2674a3631e7312f8d4985313d95.png)

这是我设置 MessageListener 和消息使用者本身的一些代码。

```
public boolean setClient(MessageListener listener) {

        try {
            Properties parm = new Properties();
            parm.setProperty("java.naming.factory.initial",
                    "weblogic.jndi.WLInitialContextFactory");
            parm.setProperty("java.naming.provider.url", iProps.getURL());
            parm.setProperty("java.naming.security.principal", iProps.getUser());
            parm.setProperty("java.naming.security.credentials",
                    iProps.getPassword());
            ctx = new InitialContext(parm);
            final QueueConnectionFactory connectionFactory = (QueueConnectionFactory) ctx
                    .lookup(iProps.getConFactory());
            connection = connectionFactory.createQueueConnection();
            ((WLConnection) connection)
                    .setReconnectPolicy(JMSConstants.RECONNECT_POLICY_ALL);
            ((WLConnection) connection).setReconnectBlockingMillis(30000L);
            ((WLConnection) connection).setTotalReconnectPeriodMillis(-1L);
            session = connection.createQueueSession(false,
                    Session.AUTO_ACKNOWLEDGE);
            queue = (Queue) ctx.lookup(iProps.getQueue());
            // The following code in the switch statement is the only code that
            // differs for the producer and consumer.
            switch (cType)
                {
                case PRODUCER: {
                    producer = (WLMessageProducer) session
                            .createProducer(queue);
                    // Setting to send large files is done in WebLogic
                    // Administration Console.
                    // Set
                    producer.setSendTimeout(60000L);
                    break;
                }
                case CONSUMER: {
                    consumer = session.createConsumer(queue);
                    if (listener != null) {
                        consumer.setMessageListener(listener);
                    }else{
                        log.warning("A Message listener was not set for the consumer, messages will not be acknowledged!");
                    }
                    break;
                }
                default:
                    log.info("The client type " + cType.toString()
                            + " is not currently supported!");
                    return false;
                }

            connection.setExceptionListener(new ExceptionListener() {
                @Override
                public void onException(JMSException arg0) {
                    Logger log2 = new MyLogger().getLogger("BPEL Client");
                    if (arg0 instanceof LostServerException) {
                        log2.severe("Connection to the Server has been lost, will retry in 30 seconds. "
                                + arg0.toString());
                    } else {
                        log2.severe(arg0.toString());
                    }

                }
            });
            shutdownListener = new ShutdownListener(connection, session, producer, consumer);

            connection.start();
            log.info("Successfully connected to " + iProps.getURL());
            return true;
        } catch (JMSException je) {
            log.severe("Could not connect to the WebLogic Server, will retry in 30 seconds. "
                    + je.getMessage());
            try {
                Thread.sleep(30000L);
            } catch (InterruptedException e) {
                log.warning(e.toString());
            }
            return setClient(listener);
        } catch (Exception e) {
            log.severe("Could not connect to the WebLogic Server, will retry in 30 seconds. "
                    + e.toString());
            try {
                Thread.sleep(30000L);
            } catch (InterruptedException ie) {
                log.warning(ie.toString());
            }
            return setClient(listener);

        }
    } 
```

这是消息监听器：

```
public class ConsumerListener implements MessageListener {
    private Logger log;
    private File destination;
    private Execute instructions;

    public ConsumerListener(Execute instructions, File destination) {
        this.instructions = instructions;
        this.destination = destination;
        log = new MyLogger().getLogger("BPEL Client");
    }

    @Override
    public void onMessage(Message arg0) {

        try {
            if (arg0.getJMSRedelivered()) {
                log.severe("A re-delivered message has been received, and it has been ignored!"
                        + arg0.toString());
            } else {
                try {
                    if (arg0 instanceof TextMessage) {
                        consumeMessage((TextMessage) arg0);

                    } else if (arg0 instanceof BytesMessage) {
                        consumeMessage((BytesMessage) arg0);
                    } else {
                        log.warning("Currently, only TextMessages and BytesMessages are supported!");
                    }
                } catch (JMSException e) {
                    log.severe(e.toString());
                } catch (IOException e) {
                    log.severe(e.toString());
                } catch (Throwable t) {
                    log.severe(t.toString());
                }
            }
        } catch (JMSException e) {
            log.severe(e.toString());
        }
    }

    /**
     * Unwraps the JMS message received and creates a file and a control file if
     * there are instructions present.
     *
     * @param textMessage
     *            JMS message received to be consumed.
     * @throws JMSException
     * @throws IOException
     */
    protected void consumeMessage(TextMessage textMessage) throws JMSException,
            IOException {
        // ***All properties should be lowercase. for example fileName
        // should be
        // filename.***
        String fileName = textMessage.getStringProperty("filename");
        if (fileName == null || fileName.isEmpty()) {
            fileName = textMessage.getStringProperty("fileName");
        }
        if (fileName != null && !fileName.isEmpty()) {
            // Check if the
            // file name is equal to the shutdown file. If it
            // is, shutdown the consumer. This is probably not a good way to
            // do this, as the program can no longer be shutdown locally!

            // We have a file in the queue, need to create the file.
            createFile(destination.getAbsolutePath() + "\\" + fileName,
                    textMessage.getText());
            log.info("Done creating the file");
            String inst = textMessage.getStringProperty("instructions");
            // If there are instructions included, then create the
            // instruction file, and route the message based on this file.
            if (inst != null && !inst.isEmpty()) {
                // We need to rout the file.
                log.info("Instructions found, executing instructions");
                String[] tokens = fileName.split("\\.");
                String instFileName = "default.ctl";
                if (tokens.length == 2) {
                    instFileName = tokens[0] + ".ctl";
                }
                File controlFile = createFile(destination.getAbsolutePath()
                        + "\\" + instFileName, inst);
                Control control = new Control(controlFile);
                instructions.execute(control);
                log.info("Done executing instructions");
            } else {
                log.info("No instructions were found");
            }
            log.info("Done consuming message: " + textMessage.getJMSMessageID());
        }

    }

    /**
     * Unwraps the JMS message received and creates a file and a control file if
     * there are instructions present.
     *
     * @param bytesMessage
     *            The bytes payload of the message.
     * @throws JMSException
     * @throws IOException
     */
    protected void consumeMessage(BytesMessage bytesMessage)
            throws JMSException, IOException {
        // ***All properties should be lowercase. for example fileName
        // should be
        // filename.***
        log.info("CONSUME - 1");
        String fileName = bytesMessage.getStringProperty("filename");
        if (fileName == null || fileName.isEmpty()) {
            fileName = bytesMessage.getStringProperty("fileName");
        }
        if (fileName != null && !fileName.isEmpty()) {
            // Check if the
            // file name is equal to the shutdown file. If it
            // is, shutdown the consumer. This is probably not a good way to
            // do this, as the program can no longer be shutdown locally!

            // We have a file in the queue, need to create the file.
            byte[] payload = new byte[(int) bytesMessage.getBodyLength()];
            bytesMessage.readBytes(payload);
            createFile(destination.getAbsolutePath() + "\\" + fileName, payload);
            log.info("Done creating the file");
            String inst = bytesMessage.getStringProperty("instructions");
            // If there are instructions included, then create the
            // instruction file, and route the message based on this file.
            if (inst != null && !inst.isEmpty()) {
                // We need to rout the file.
                log.info("Instructions found, executing instructions");
                String[] tokens = fileName.split("\\.");
                String instFileName = "default.ctl";
                if (tokens.length == 2) {
                    instFileName = tokens[0] + ".ctl";
                }
                File controlFile = createFile(destination.getAbsolutePath()
                        + "\\" + instFileName, inst);
                Control control = new Control(controlFile);
                instructions.execute(control);
                log.info("Done executing instructions");
            } else {
                log.info("No instructions were found");
            }
            log.info("Done consuming message: "
                    + bytesMessage.getJMSMessageID());
        }

    }

    /**
     * Creates a file with the given filename (this should be an absolute path),
     * and the text that is to be contained within the file.
     *
     * @param fileName
     *            The filename including the absolute path of the file.
     * @param fileText
     *            The text to be contained within the file.
     * @return The newly created file.
     * @throws IOException
     */
    protected File createFile(String fileName, String fileText)
            throws IOException {
        File toCreate = new File(fileName);
        FileUtils.writeStringToFile(toCreate, fileText);
        return toCreate;
    }

    /**
     * Creates a file with the given filename (this should be an absolute path),
     * and the text that is to be contained within the file.
     *
     * @param fileName
     *            The filename including the absolute path of the f ile.
     * @param fileBytes
     *            The bytes to be contained within the file.
     * @return The newly created file.
     * @throws IOException
     */
    protected File createFile(String fileName, byte[] fileBytes)
            throws IOException {
        File toCreate = new File(fileName);
        FileUtils.writeByteArrayToFile(toCreate, fileBytes);
        return toCreate;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T06:12:34.470

您还必须从 WLS 控制台增加最大消息大小，如**所有托管服务器**的屏幕截图所示。

之后执行重新启动，问题将得到解决。

此外，还有第二种替代解决方案。根据[Oracle Tuning WebLogic JMS Doc](http://docs.oracle.com/cd/E11035_01/wls100/perform/jmstuning.html)：

> **调整消息最大限制**
> 
> 如果推送给消费者的消息的总大小大于当前协议的最大消息大小（默认大小为 10 MB，并且使用控制台基于每个 WebLogic Server 实例配置，使用 Dweblogic.MaxMessageSize 对每个客户端进行配置命令行属性），消息传递失败。
> 
> **在客户端上设置最大消息大小**
> 
> 在发送和接收大型消息时，除了 WebLogic Server 实例之外，您可能还需要配置 WebLogic 客户端。要在客户端上设置最大消息大小，请使用以下命令行属性：
> 
> **-Dweblogic.MaxMessageSize**
> 
> *注意：此设置适用于传送到客户端的所有 WebLogic Server 网络数据包，而不仅仅是 JMS 相关数据包*。

**编辑：**

可以通过执行以下一项或多项操作来解决此问题。

> *   配置系统属性 -Dweblogic.MaxMessageSize
> *   使用 WLS 控制台为管理员和所有托管服务器增加最大消息大小。WLS 控制台中的步骤是：服务器/协议/常规
> *   从 WLS 控制台增加最大消息大小。WLS 控制台中的步骤是：队列/配置/阈值和配额/最大消息大小

**应用**weblogic.MaxMessageSize**属性的**过程****

 **> 保留 setDomainEnv 文件的备份。停止所有服务器。在每个 setDomainEnv 文件中添加 -Dweblogic.MaxMessageSize=yourValue，更具体地说，在 EXTRA_JAVA_PROPERTIES 行中添加。然后先启动 ADMIN，当 ADMIN 处于 RUNNING 状态时，再启动 MANAGED 服务器。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T08:08:15.633

在我的情况下，设置 -Dweblogic.MaxMessageSize 解决了这个问题。我的问题是邮件大小的最大限制应该是多少？我们不能继续增加消息大小来解决这个问题。除了某些其他值之外，还有什么方法可以优化这个值？**

# c - C++ 错误“函数的参数太少”

> ID：12113317
> 
> 赞同：-2
> 
> 时间：2012-08-24T16:31:45.063
> 
> 标签：c, function, pointers

我有一个显示错误的 C++ 程序：

```
too few arguments to function void split(char*, char**, int, int, int*) 
```

代码：

```
#include <iostream>
#include <stdlib.h>
using namespace std;

void split(char* lin, char** word, int i, int w, int* c);

int main() {
  char line[80] = "myline";
  int n = 5;
  char **word;
  split(line, word, 1, 1);         //Error is here.

  return 0;
}
void split(char* lin, char** word, int i,int w, int* c)
{
   //statements
} 
```

谁能告诉我怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T16:38:38.927

函数 split 接受 5 个参数，没有默认参数。您尝试使用 4 个参数调用它。那是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:42:33.233

最后两次调用`split()`时，您只使用 4 个参数调用它，因为其中一个参数太少了。如果您愿意，也可以为 4 个参数定义它，但目前情况并非如此

# javascript - div 切换脚本

> ID：12113319
> 
> 赞同：0
> 
> 时间：2012-08-24T16:31:50.773
> 
> 标签：javascript, jquery

抱歉，我没有很好地解释这一点，我已经设置了我在 jsfiddle 中的内容......

[http://jsfiddle.net/greggb/Ya2wX/](http://jsfiddle.net/greggb/Ya2wX/)

基本上我想要做的是在打开第一个 div 之后，第二个选项卡锚（两个）将在打开下一个 div 之前关闭第一个 div？

谢谢，格雷格。

```
 $(document).ready(function() {
      $('.example2').hide().before('');
      $('a#toggle-example2').click(function() {
           $('.example2').slideToggle(500);
           return false;
      });
 });

 $(document).ready(function() {
      $('.item1').hide().before('');
      $('a#toggle-item1').click(function() {
           $('.item1').slideToggle(500);
           return false;
      });
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:33:47.333

```
$('a#toggle-item1').click(function() { 
```

id 应该唯一标识页面中的一个元素。. . .如果您将 ID 'toggle item 1' 用于其他 div，这将不起作用。. . .try 使用唯一的 id 或类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:37:09.300

可能有更短的方法，但这应该有效（演示：http: [//jsfiddle.net/6N4kJ/13/](http://jsfiddle.net/6N4kJ/13/)）：

```
// When item 1 is clicked           
$('#item1').click(function() {
    // if item 2 is visible
    if ($('.item2').is(':visible')) {
        // hide (toggle) item2, and when finished..
        $('.item2').slideToggle(500, function() {
            // toggle item1
            $('.item1').slideToggle(500);
        });
    // else, just hide item1
    } else {
        $('.item1').slideToggle(500);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T16:35:31.920

```
 $(document).ready(function() {
      $('.item1').hide();
      $('.item1').click(function() {
           $('.item1').not(this).hide();
           $(this).slideToggle(500);
           return false;
      });
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T16:36:11.197

在元素上设置一个`toggle_item`类，然后执行：`<a>`

```
<a href="#" class="toggle-item">link 1</a>
<div class="item">content 1</div>

<a href="#" class="toggle-item">link 2</a>
<div class="item">content 2</div> 
```

js：

```
$(function() {
      $('.item').hide();
      $('a.toggle-item').click(function() {
           $(this).next('.item').slideToggle(500);
           return false;
      });
}); 
```

[小提琴](http://jsfiddle.net/awCmz/)

# extjs - 将悬停效果应用于 ExtJs 中的容器

> ID：12113325
> 
> 赞同：5
> 
> 时间：2012-08-24T16:32:02.590
> 
> 标签：extjs, extjs4

为什么这么难？我不能使用 CSS，否则我已经完成了。我有一个由容器、图像和标签组成的“按钮”，并且单击事件对容器运行良好。然而 - 做一些简单的事情，比如改变悬停时的背景颜色让我现在讨厌 ExtJs，必须有一种更简单的方法来做到这一点。

这是我到目前为止所得到的：

```
Ext.create('Ext.container.Container', {
                 layout: 'hbox',
                 style: { backgroundColor: '#ddd', margin: "5px 0px 5px 5px", padding: "3px", width: "150px", fontSize: "8pt" },
                 listeners: {
                    render: function (c) {
                       c.el.on('click', function () { alert('Downloading Report'); });

                       c.el.on('mouseover', function () {
                          //alert("mouseover");
                          Ext.apply(this, { style: { backgroundColor: '#aaa'} });
                       }
                       );

                       c.el.on('mouseout', function () {
                          //alert("mouseout");
                          Ext.apply(this, { style: { backgroundColor: '#ddd'} });
                       }
                       );
                    },
                    scope: this
                 },
                 items: [
                    { xtype: 'image', src: "resources/images/icons/monoDownload32.png", style: { margin: "2px", maxWidth: "32px"} },
                    {
                       xtype: 'label',
                       text: 'MS Excel Report',
                       style: { margin: "2px", fontSize: "8pt" }
                    }
                 ]
              }) 
```

已调用警报，但未应用样式。有没有更简洁的方法来做这么简单的事情？或者在这种情况下是否有更好的控制可以达到相同的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T17:09:29.863

很遗憾你不能使用 CSS。如果可以，那`overCls`将是要走的路：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-cfg-overCls](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-cfg-overCls)

除此之外，您的方法非常接近。将样式对象应用到 el 上不会做任何事情，因为 Ext 不知道你这样做了。相反，您想致电`setStyle`或`applyStyles`

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-method-applyStyles](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-method-applyStyles)

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-method-setStyle](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-method-setStyle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T05:48:17.207

我认为您正在寻找的行为被捕获

[http://docs.sencha.com/extjs/4.2.0/#!/api/Ext.view.View](http://docs.sencha.com/extjs/4.2.0/#!/api/Ext.view.View)

# javascript - 如何获取自页面加载以来更改的 div 的当前高度？

> ID：12113327
> 
> 赞同：0
> 
> 时间：2012-08-24T16:32:09.923
> 
> 标签：javascript, jquery, height

### 我想要的是

根据 CURRENT 内容确定准确的 .results div 的高度。

### 背景

当我浏览我的网站时，结果 div 会根据搜索等动态内容进行更新。我能够获得结果 div 的高度，但这只是我可以获得的初始值。

### 更新 div 的代码

```
$results.unbind();
$results.empty();
$results.html(newContents); 
```

### 我试过的

请注意，我打印出这些值，以便我可以在 firebug 中检查它。

```
var $results = $('.results');          /* Prints out: */
console.log($results.height());        /* 18          */
console.log($results[0].scrollHeight); /* 18          */
console.log($results[0].clientHeight); /* 18          */
console.log($results.css('height');    /* 18px        */
console.log($results.attr('height');   /* undefined   */ 
```

高度远远超出页面底部，因此 18px 绝对不准确。我如何获得真正的价值？

### 可能的解决方案？

ryanulit 帮助我弄清楚 .height() 应该适合我正在做的事情。所以这导致我认为正确处理事件存在一些问题。应用程序中有很多地方返回 false 而不是调用 event.preventDefault()。问题是当你返回 false 时，除了 event.preventDefault() 之外，它还会调用 event.stopPropagation()。

### 更新

我没有找到任何似乎会影响高度的 return false 。但是，我确实发现直接在 html 中使用 style="height:0px;" 设置高度 正确更新高度。我不知道还能尝试什么，所以我现在很难过......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:35:14.783

查看[`.height()`](http://api.jquery.com/height/)jquery的功能。

这是一个 jsfiddle，显示它实际上正在改变：http: [//jsfiddle.net/EvybH/2](http://jsfiddle.net/EvybH/2)

**更新**

这`height: 0px;`让我思考，所以我在小提琴中进行了测试并更新了：http: [//jsfiddle.net/EvybH/3](http://jsfiddle.net/EvybH/3/) ​​/ 。

如果您在 css 中设置特定高度，看起来 .height() 属性将始终返回该值。检查小提琴。您可以设置`min-height: 18px`是否要给 div 一个默认高度，然后允许它展开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:49:30.943

正如之前的两张海报所说， .height() 应该可以工作，但是如果它不起作用，我相信会打电话

```
.height(currentElement.height).height() 
```

将返回一个刷新的高度（虽然非常 hacky 并且可能不鼓励）。

编辑： currentElement 是具有动态高度的元素

# batch-file - 批处理文件的 IF 语句中的变量不打印 (ECHO)

> ID：12113328
> 
> 赞同：2
> 
> 时间：2012-08-24T16:32:13.520
> 
> 标签：batch-file

由于某种原因，我无法在 IF 语句中打印 %NetVerClientOrFull% 。这真的很奇怪，因为它有时会，有时甚至在我不改变任何东西时也不会。我已经在多台机器上进行了测试，结果相同。如果我在 IF 语句中使用 %NetVer% ，则始终打印。有什么想法吗？

ECHO 客户端还是完整版？%NetVerClientOrFull%（应显示 Client 或 Full，有时会显示）

```
@echo off
  set frameworkDirectory=Reg query "HKLM\Software\Microsoft\NET Framework Setup\NDP"
  FOR /F "TOKENS=6 DELIMS=\." %%A IN ('%frameworkDirectory%') DO set NetVer=%%A
  ECHO The most current version of the .NET Framework installed is: %NetVer% 

  if "%NetVer%"=="v4" (
  set clientOrFullDirectory=Reg query "HKLM\Software\Microsoft\NET Framework Setup\NDP\v4"
  FOR /F "TOKENS=7 DELIMS=\." %%A IN ('%clientOrFullDirectory%') DO set NetVerClientOrFull=%%A
  ECHO Client or Full? %NetVerClientOrFull%

  )

pause 
```

要添加到这一点，它似乎在我的第三次运行中有效，没有任何意义：

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\Nick>C:\Users\Nick\Desktop\FrameworkVersionChecker.bat
The most current version of the .NET Framework installed is: v4
Client or Full?
Press any key to continue . . .

C:\Users\Nick>C:\Users\Nick\Desktop\FrameworkVersionChecker.bat
The most current version of the .NET Framework installed is: v4
Client or Full?
Press any key to continue . . .

C:\Users\Nick>C:\Users\Nick\Desktop\FrameworkVersionChecker.bat
The most current version of the .NET Framework installed is: v4
Client or Full? Full
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:33:35.743

这是因为解析器在**读取**块时扩展变量，而不是在执行语句时。您在块内的语句`if ()`会看到变量，因为它们是**在进入**此块之前设置的。这个问题，以及如何克服它（通过使用延迟扩展）在`set`帮助中得到了很好的解释。只需`help set`从命令行执行 - 甚至包括类似的示例。这里也有解释：[windows batch SET inside IF not working](https://stackoverflow.com/questions/9102422/windows-batch-set-inside-if-not-working)

为什么它会在第三次（及后续）运行时打印？您不使用`setlocal`- 因此，当您下次执行批处理时，它将看到上次运行中设置的变量。删除或备注`@echo off`，并从新启动的控制台执行您的批处理。您将看到变量是如何扩展的，以及为什么它只在第 3 次以后才起作用。

# java - Python字典转换成Java Map？

> ID：12113329
> 
> 赞同：-1
> 
> 时间：2012-08-24T16:32:15.177
> 
> 标签：java, python

所以我有以下代码，它是一个python字典数组

```
userInfo.append({"userType":"blah",
         "userFN":"blah", 
         "userLN": "blah", 
         "userEmail":"blah@blah.com"}) 
```

我想将它转换为Java，现在我理解的最好方法是制作一个地图，然后为它创建集合。现在我做了语法，但我不确定这是否是最好的方法

```
Map <String,String> userMap = new HashMap<String,String>();
HashSet<Map<String, String>> userMaps = new HashSet<Map<String,String>>();
...
userMap.put ("userType", "blah");
userMap.put("userFN", "blah");
userMap.put("userLN", "blah");
userMap.put("userEmail", "blah");
userMaps.add(userMap); 
```

这是最好的方法吗？注意：我没有运行此代码，因为我正在转换相当多的代码块，并且希望在调试之前尽可能多地进行转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:43:40.380

首先，如果您要使用 Java，您应该利用它是静态类型的这一事实。除非您的用户对象将充满任意属性，否则为它创建一个类是个好主意。

```
public class User {
  private String firstName;
  private String lastName;
  // etc.

  public User(String firstName, String lastName /*etc.*/){
    this.firstName = firstName;
    this.lastName = lastName;
    // etc.
  }
} 
```

此外，您`userInfo`可能是一个数组，因此请使用 ArrayList 而不是 Set。

```
ArrayList<User> userInfo = new ArrayList<User>();
userInfo.add( new User("Some", "Guy" /*...*/) ); 
```

# java - Java Play2 - 通用模板？

> ID：12113336
> 
> 赞同：7
> 
> 时间：2012-08-24T16:32:58.363
> 
> 标签：java, templates, scala, playframework, playframework-2.0

是否可以创建通用模板？

伪代码：

```
@(myForm: Form[T]) 
```

所以我可以像这样重用它们：

```
@inputText(
                myForm("title"), 
                '_label -> "title"

            ) 
```

*   如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T18:47:39.630

为此使用魔术下划线：

```
@(form: Form[_]) 
```

这在 Scala 中称为存在类型，大致意思是“存在类型参数但我不在乎它是什么”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T19:10:29.170

我不喜欢这种`@(form: Form[_])`方法，因为它把类型安全抛到了窗外。

传入 时`ok(form.render(userform))`，您`@form("lastNme")`在模板中不会从编译器获得任何帮助，但如果在测试期间未捕获，您将收到运行时错误。

我正在做的是为常见形式（例如会员注册和会议注册，或联赛统计和球队统计等）提供接口（或 play 2 scala 中的特征）；这样，在编译时，粗手指的错别字等就会被捕获。

是的，要处理的样板越多，但是从围栏的动态语言方面来看，我处理运行时错误越少越好......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T18:08:35.653

你试过了吗？

在`app/views`包中创建新的 vie：`pseudo.scala.html`

```
@(someParam: String)
<h1>This is my pseudo template</h1>
<div>And there is some param: <b>@someParam</b></div> 
```

然后在任何其他视图中，您可以像这样使用它：

```
...
<div>@pseudo("param pam pam")</div>
... 
```

当然你的参数不需要是`String`唯一的，所以你可以通过那里`Form[T]`，，，`List[T]`或其他任何东西。

# javascript - 使用 javascript 防止额外的弹出窗口

> ID：12113337
> 
> 赞同：0
> 
> 时间：2012-08-24T16:33:00.297
> 
> 标签：javascript, checkbox, popup, alert

我有一条针对我网站用户的警告消息：

```
alert("Message to users"); 
```

此消息出现在每个继承模板的页面上。

我想为用户创建一个选项，以使用 javascript 停止其他警报消息。我想到的是消息下方的复选框以停止其他消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:40:16.463

Firefox 在浏览器中内置了此功能。我认为这是您要复制的功能？

这里有两个不同的问题。您是在问如何创建警报框，或者如何存储设置？

如果您询问如何创建警报框，您可以使用以下几种方法：

1.  使用该选项创建您自己的自定义警报框。
2.  使用确认框而不是警报。

选项 1：看起来[@dystroy](https://stackoverflow.com/questions/12113337/prevent-additional-popups-with-javascript/12113582#12113582)提供了一个如何使用 jQuery 执行此操作的示例。

选项2：它将弹出一个确定/取消按钮。您可以将消息设置为：

> “给用户的消息”
> 
> 您想
> 从现在开始阻止这些弹出窗口吗？
> 
> 确定 取消

如果他们点击确定，以某种方式存储设置以防止弹出窗口再次发生。

或者，如果您希望用户能够在默认情况下单击“确定”而不阻止它们，则可以将消息更改为“按取消以防止将来出现这些弹出窗口”之类的内容。

如果您希望此设置在页面加载之间保持不变，则必须将其存储在数据库、cookie、会话变量或其他东西中。

您的代码可能如下所示：

```
if (/* check the setting to see if we should display a message */)
{
    var r = confirm("Message to users\n\nPress Cancel to prevent these popups in the future");
    if (!r)
    {
        // do something to store this setting
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:50:56.493

这是一个演示：http: [//jsfiddle.net/jR8hk/](http://jsfiddle.net/jR8hk/)

每次运行或重新加载页面时，都会在一秒钟后出现警报。

但是，如果您选中该复选框，您将永远不会再看到警报。正如我在评论中建议的那样，它通过使用[localStorage在本地计算机中设置首选项来工作。](https://developer.mozilla.org/en-US/docs/DOM/Storage)

这是部分：

**HTML：**

```
<div id=alert>
    THIS IS A MESSAGE !
    <br><br><input type=checkbox id=alert_cb> SHUT UP
    <br><input type=button id=alert_close value = close>
</div>
<p>
    <br>normal content    <br>normal conten    <br>normal content    <br>normal conten    <br>normal content    <br>normal conten    <br>normal content    <br>normal conten    <br>normal content    <br>normal conten    <br>normal content    <br>normal conten    <br>normal content    <br>normal conten    <br>normal content    <br>normal conten    <br>normal content    <br>normal conten    <br>normal content    <br>normal conten    <br>normal contenttttttttttt
</p> 
```

**CSS：**

```
#alert {
    display:none;
    background-color: red;
    z-index:2;
    position: fixed;
    left: 40px;
    right: 40px;
    top: 40px;
    height: 100px;
}​ 
```

**JavaScript：**

```
setTimeout(function(){
    if (!localStorage['stop_please']) $('#alert').show('slow'); 
}, 1000);

$('#alert_close').click(function(){
    if ($('#alert_cb').is(':checked')) localStorage['stop_please'] = "pleeeeaaaaase";
    $('#alert').hide();
});​ 
```

如果还不够漂亮，您可能需要调整 css。

# android - 2个字符串的部分比较

> ID：12113339
> 
> 赞同：0
> 
> 时间：2012-08-24T16:33:21.443
> 
> 标签：android, string, equals

我正在寻找一种方法来比较 2 个字符串部分。我需要用一个例子来说明这一点。

基本字符串是“平等”。我需要检查的字符串拼写错误：“equallaty”。我想确认这是部分正确的，因此输入，即使在语法上不正确，也与基本字符串相同。

现在我当然可以将字符串解析为 char 数组。现在我可以检查每一个字符，但如果我检查前 4 个字符，它们将是正确的，即使只有 2 个错误，其余的也会是错误的。所以我要使用的检查是至少 70% 的字符应该匹配。

有人能帮助我走上正轨吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:36:00.190

将字符串与编辑距离度量（如[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance) ）进行比较。这样的指标基本上计算了使字符串相等所需的更改次数。如果更改的数量相对于字符串的总大小来说很小，那么您可以认为字符串相似。

# google-chrome - Chrome 内联安装测试而不验证域？

> ID：12113341
> 
> 赞同：2
> 
> 时间：2012-08-24T16:33:23.653
> 
> 标签：google-chrome, google-chrome-extension, chrome-web-store

如何在企业内部开发环境中测试 Chrome 内联安装？

Chrome 内联安装需要验证站点。**在我的情况下验证整个域是不可行**的，所以我需要一些其他的想法。否则，端到端测试将是一场噩梦，因为您总是需要将其推送到生产站点以验证与内联安装相关的更改。

# java - 直接从 Java 中的 Google Drive 读取

> ID：12113343
> 
> 赞同：1
> 
> 时间：2012-08-24T16:33:46.153
> 
> 标签：java, file-io, google-drive-api, google-api-java-client

请我需要以编程方式读取存储在 Google Drive 中的文件的内容。我期待着某种
`InputStream is = <drive_stuff>.read(fileID);`
帮助？如果我可以使用某种方式写回文件，我也会很感激

`OutputStream dos = new DriveOutputStream(driveFileID);`
`dos.write(data);`

如果这种方便的方法对于 Drive 可以提供的东西来说太多了，我想就如何直接从 java.io.InputStream / OutputStream / Reader / Writer 读/写 Drive 而无需创建临时本地文件提出建议我要发送到驱动器的数据的副本。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:09:26.807

这是我的应用程序中的一个（不完整）片段，可能会有所帮助。

```
 URL url = new URL(urlParam);
        HttpURLConnection connection = (HttpURLConnection) url
                .openConnection();
        connection.setDoOutput(true);
        connection.setRequestMethod("GET");
        connection
                .setRequestProperty("Authorization",
                        "OAuth "+accessToken);

        String docText = convertStreamToString(connection.getInputStream()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:47:34.333

请查看 Google Drive SDK[文档](https://developers.google.com/drive/examples/java)中提供的 DrEdit Java 示例。此示例说明如何授权和构建读取元数据、文件数据和将内容上传到 Google Drive 的请求。

这是一个代码片段，展示了如何使用`ByteArrayContent`将媒体上传到存储在字节数组中的 Google Drive：

```
/**
 * Create a new file given a JSON representation, and return the JSON
 * representation of the created file.
 */
@Override
public void doPost(HttpServletRequest req, HttpServletResponse resp)
    throws IOException {
  Drive service = getDriveService(req, resp);
  ClientFile clientFile = new ClientFile(req.getReader());
  File file = clientFile.toFile();

  if (!clientFile.content.equals("")) {
    file = service.files().insert(file,
        ByteArrayContent.fromString(clientFile.mimeType, clientFile.content))
        .execute();
  } else {
    file = service.files().insert(file).execute();
  }

  resp.setContentType(JSON_MIMETYPE);
  resp.getWriter().print(new Gson().toJson(file.getId()).toString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-18T09:02:51.277

// 构建一个新的授权 API 客户端服务。驱动服务 = getDriveService();

```
 // Print the names and IDs for up to 10 files.
    FileList result = service.files().list()
         .setPageSize(10)
         .setFields("nextPageToken, files(id, name)")
         .execute();

    List<File> files = result.getFiles();
    if (files == null || files.size() == 0) {
        System.out.println("No files found.");
    } else {
        System.out.println("Files:");
        for (File file : files) {
            System.out.printf("%s (%s)\n", file.getName(), file.getId());
            String fileId = file.getId();

                Export s=service.files().export(fileId, "text/plain");
                InputStream in=s.executeMediaAsInputStream();
                InputStreamReader isr=new InputStreamReader(in);
                BufferedReader br = new BufferedReader(isr);
                String line = null;

                StringBuilder responseData = new StringBuilder();
                while((line = br.readLine()) != null) {
                    responseData.append(line);
                }
                System.out.println(responseData);
            } 
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-14T13:25:49.467

使用 google-api-services-drive-v3-rev24-java-1.22.0：

要读取文件的内容，请确保`DriveScopes.DRIVE_READONLY`在`GoogleAuthorizationCodeFlow.Builder(...)`凭据授权方法/代码中进行设置。

您将需要`fileId`您要阅读的文件。你可以做这样的事情：然后
`FileList result = driveService.files().list().execute();`
你可以迭代你想要阅读的`result`。`file``fileId`

一旦你这样做了，阅读内容将是这样的：

```
ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
driveService.files().get(fileId).executeMediaAndDownloadTo(outputStream);
InputStream in = new ByteArrayInputStream(outputStream.toByteArray()); 
```

# c# - 如何使用 MSBuild 在单个应用程序套件包中组装多个 .NET 可执行文件？

> ID：12113347
> 
> 赞同：0
> 
> 时间：2012-08-24T16:33:58.520
> 
> 标签：c#, visual-studio-2010, msbuild, packaging

我有多个解决方案，每个解决方案都有多个项目。

我想要做的是将这些项目的一个子集从可能不同的解决方案组装到一个“包”中，并按原样进行部署。

我可以编辑每个项目并更改它的输出文件夹，但这会适得其反，尤其是其中一些项目是不同目标包之间的共享依赖项。这会造成繁琐的混乱并且非常容易出错。

理想情况下，我也希望在最终包中如何组装这些方面有一些自由，也许这个应用程序放在包的根文件夹中，但也许这个其他可执行文件将放在最终包的子文件夹中。

最后，与我合作的团队对 MSBuild 并不熟悉，因此最终的解决方案应该可以从 VisualStudio 中使用。

我正在考虑创建一个任务来扫描项目依赖项并简单地将每个输出文件夹的内容复制到专门项目的输出文件夹中（将包含该任务）。如有必要，可以通过属性文件对最终目的地进行微调。

有没有更好的办法 ？

* * *

包我只是指包含所有工件的文件夹，它们可能是可执行文件、DLL、资源、配置文件等。但是，我仍然希望将它们作为单独的实体保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:48:13.733

我假设您正在尝试获取没有外部 dll 的单个可执行文件。为此，请使用 exe 上的编译后事件来调用`ILMerge`以将 exe 和 dll 组合成一个 exe。

[http://www.microsoft.com/en-us/download/details.aspx?id=17630](http://www.microsoft.com/en-us/download/details.aspx?id=17630)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T16:29:21.513

我最终创建了一个新的输出文件夹，在其中复制了项目构建的输出。然后其他依赖于第一个项目的项目将提取内容并与他们的内容合并，然后再处理他们自己的额外输出文件夹以沿着依赖关系树重复该过程。

这确保了所有工件都遵循最终应用程序的构建，而不仅仅是 DLL。

我当时需要它，然后将整个内容打包在一次点击存档中。

它也适用于构建系统，因为该额外文件夹被压缩为下游项目可以使用和合并的人工制品。虽然不是很干净，但足以满足我的需要。事后看来，我可能已经利用 nuget 以更清洁和可维护的方式实现相同的结果。

# jquery - 从 observableArray 中显示特定数量的元素并隐藏其余元素

> ID：12113352
> 
> 赞同：4
> 
> 时间：2012-08-24T16:34:11.070
> 
> 标签：jquery, html, knockout.js

例如，我想显示我的 10 个项目`observableArray`并隐藏其余项目，当我向数组的开头添加一个新元素时，隐藏第 10 个元素，并且用户能够单击显示更多项目。

## 这是我当前的标记

**Javascript：**

```
var itemViewModel = {
    item: {},
    isLoaded: ko.observable(false),
    comments: ko.observableArray([]),
    loadcontent: function (getID) {
        $.ajax({
            url: '/api/item/details/' + getID,
            dataType: 'json',
            success: function (data) {
                itemViewModel.item = data;
                itemViewModel.comments([]);
                $.each(data.Comments, function (index, thisComment) {
                    itemViewModel.comments.push(thisComment);
                });
                itemViewModel.comments.sort(function (a, b) {
                    return new Date(a.DateTime) == new Date(b.DateTime)
                        ? 0 : (new Date(a.DateTime) < new Date(b.DateTime) ? 
                        1 : -1)
                });
                itemViewModel.isLoaded(true);
                itemDetailBindings();
            }
        });
    },
    showComment: function (ele) {
        if (ele.nodeType === 1) $(ele).hide().fadeIn()
    }
};
//Item detail element bindings
var itemDetailBindings = function () {
    // Add auto expand to textarea
    $('#this-text-is-comment').TextAreaExpander(50, 200);
    //Add comment
    $('#this-text-is-comment').bind('keypress', function (e) {
        if (e.keyCode == 13) {
            e.preventDefault();
            if ($(this).val() != "") {
                addComment($("#this-text-is-comment").val(), $("#hidden-item-id").val());
                $(this).val('');
            };
        }
    });
};
var addComment = function (cText, getID) {
    $.ajax({
        url: '/api/comment/create',
        type: 'POST',
        dataType: 'json',
        data: { comment1: cText, itemid: getID },
        success: function (data) {
            itemViewModel.comments.splice(0, 0, data);
        }
        /*error: function (xhr, status) {
        switch (status) {
        case 404:
        alert('File not found');
        break;
        case 500:
        alert('Server error');
        break;
        case 0:
        alert('Request aborted');
        break;
        default:
        alert('Unknown error ' + status);
        }
        }*/
    });
}; 
```

**HTML：**

```
<div class="comment-list clearfix" data-bind="template: {foreach: comments, afterAdd: showComment }">
    <div class="comment-container clearfix">
        <div class="left-side">
            <img src="../../content/u/2012.08.17.634808075593134766.jpg" />
        </div>
        <div class="right-side clearfix">
            <div class="top">
                <span class="user-name" data-bind="text: User.FullName"></span><span class="time-posted"
                    data-bind="text: $.datepicker.formatDate('yy-mm-dd', new Date(DateTime))"></span>
            </div>
            <div class="middle clearfix">
                <div class="body">
                    <p data-bind="text: Comment1">
                    </p>
                </div>
            </div>
        </div>
    </div>
</div> 
```

* * *

**对于陈述者：**我不知道如何在 ko.js 中做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T22:12:27.140

我碰巧遇到了[计算过滤数组](http://www.strathweb.com/2012/07/knockout-js-pro-tips-working-with-observable-arrays/)（请参阅tip2），但经过思考后，您可以简单地通过结合[Computed Observables](http://knockoutjs.com/documentation/computedObservables.html)和[Javascript `slice()`method](http://www.w3schools.com/jsref/jsref_slice_array.asp)来做到这一点。

在以下示例中，您将绑定到`filteredComments`. `self.comments()`是评论的主要列表，该数组被*排序*然后*切片*以显示第一个评论数（`self.commentsShown()`）。

```
self.filteredComments = ko.computed(function() {
    return self.comments()
        .sort(compareComments) // important to sort before slicing
        .slice(0, self.commentsShown());
}); 
```

[有关完整的工作示例，请参见小提琴](http://jsfiddle.net/chrismoutray/LsxCm/)。它允许排序/过滤的评论列表，添加到评论数组的开头（不是过滤数组）并*显示更多*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:46:57.340

问题是我找不到如何访问`observableArray`这里是我的解决方案。

`visible: $parent.comments.indexOf($data) < 2`

# jquery - 更改 img src 值

> ID：12113356
> 
> 赞同：0
> 
> 时间：2012-08-24T16:34:23.730
> 
> 标签：jquery, image, src

我希望我网页的访问者能够在单击链接时更改我网页的背景。我在 javascript 和 jquery 方面的技能很少，并且不确定如何实现这一点。显示我的背景我使用以下CSS：

```
#background {
    width: 100%; 
    height: 100%; 
    position: fixed; 
    left: 0px; 
    top: 0px; 
    z-index: -1;
}

.stretch {
    width:100%;
    height:100%;
} 
```

和 html -

```
<img src="images/backgrnd.jpg" class="stretch" id="background" alt="" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:37:48.820

在 jquery 中更改图像的 src 属性很简单：

```
$('#background').attr('src', 'images/newimage.jpg'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:37:50.723

这些方面的东西：

```
$('#somelink').click(function(){
    $('#background').prop('src', 'images/newbackground.jpg');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T16:38:59.190

```
$("#background").attr("src", "images/new_background.jpg"); 
```

# cocoa - 如何检查 NSDate 是否介于两次之间？

> ID：12113363
> 
> 赞同：0
> 
> 时间：2012-08-24T16:34:58.353
> 
> 标签：cocoa, nsdate

我正在制作一个 Cocoa 应用程序，我希望它能够进行每日更新。（此应用程序仅供个人使用）我希望它每天在特定时间进行更新，所以我将计算机设置为在那个时间唤醒。我在我的应用程序中设置了一个通知观察器，如果应用程序收到计算机唤醒通知，它将执行此功能：

```
- (void) receiveWakeNote: (NSNotification*) note
{
   [self conductBeginning];
} 
```

我应该添加什么以确保唤醒通知发生在特定时间之间，例如 16:00 和 16:15 之间，然后只执行

```
[self conductBeginning]; 
```

线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:59:09.527

```
NSDate *now = [NSDate date];

NSUInteger units = NSHourCalendarUnit | NSMinuteCalendarUnit;
NSDateComponents *components = [[NSCalendar currentCalendar] components:units
                                                               fromDate:now];
if (components.hour == 16 && components.minute <= 15)
    NSLog(@"it's time"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:47:27.003

像这样的东西：

```
NSDate * aDate = ...;
NSDate * bDate = ...;

NSTimeInterval a = [aDate timeIntervalSinceNow];
NSTimeInterval b = [bDate timeIntervalSinceNow];
NSTimeInterval min = a > b ? b : a;
NSTimeInterval max = a < b ? b : a;
NSTimeInterval now = CFAbsoluteTimeGetCurrent();

bool result = now >= min && now <= max; 
```

# html - 嵌套的 DIV 缩小到内容

> ID：12113380
> 
> 赞同：1
> 
> 时间：2012-08-24T16:36:02.730
> 
> 标签：html, css, internet-explorer

我正在尝试使用一种已知的方法使我的 DIV 在另一个 DIV 中水平居中，而不知道嵌套 DIV 上的内部 DIV 的宽度（缩小到内容方法）。

**这是HTML：**

```
<div class="my-container">
    <div class="my-wrapper">
        <div class="item">
            <span>My Item</span>
        </div>
    </div>
</div> 
```

**这是CSS：**

```
div.my-container {
    width: 300px;
    height: 100px;
    padding: 100px 0 0 0;
    border: 1px solid #000;
}

div.my-wrapper {
    background-color: blue;
    text-align: center;
}

div.item {
    display: inline-block;
    padding: 0 20px;
    background-color: pink;
}

div.item span {
    display: inline-block;
    height: 50px;
    background-color: red;
} 
```

**jsFiddle 上的测试用例：http:** [//jsfiddle.net/ThZxx/2/](http://jsfiddle.net/ThZxx/2/)

在所有浏览器中看起来都很好：

![](../Images/d9511165c83eec3181ce995e4256c23d.png)

除了 Internet Explorer 7：

![](../Images/e2267cafbe32526d37010dcf6c8cc4e3.png)

看起来粉红色的 DIV *(div.item)*没有缩小到内容并占用父容器中的所有可用空间。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:41:14.793

这是 IE7 的问题，因为它不支持`display: inline-block`. 您必须为 IE 添加条件样式，将其更改为`display: inline`.

```
<!--[if IE 7]>
div.item { display: inline; }
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:40:55.523

将 div.item 更改为：

```
div.item {
    display: inline-block;
    padding: 0 20px;
    background-color: pink;
    *display: inline;
    zoom: 1;
} 
```

在额外的显示样式前添加 * 可防止其他浏览器使用该样式。只有 IE 会解析并应用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T16:42:04.837

IE7 不能正确理解 inline-block，但是有一个简单的 hack 可以通过添加 zoom:1 来修复它；和*显示：内联；到你的CSS，像这样：

```
div.item {
    display: inline-block;
    padding: 0 20px;
    background-color: pink;
    zoom:1;
    *display: inline;
} 
```

您可以在此处阅读有关此问题的更多信息以及修复方法：http: [//flipc.blogspot.ca/2009/02/damn-ie7-and-inline-block.html](http://flipc.blogspot.ca/2009/02/damn-ie7-and-inline-block.html)

# java - 如何将实时变化的数据获取到本地服务器？

> ID：12113385
> 
> 赞同：1
> 
> 时间：2012-08-24T16:36:22.653
> 
> 标签：java, jakarta-ee, timestamp, real-time, localserver

我们必须开发一个本地服务器，它将加载存储在工业服务器中的行业实时数据（特别是时间戳数据点，如锅炉温度、压力值等），我们希望获取它们和用它填充我们的服务器，数据不会在服务器端流式传输，因此如何连续获取它并填充服务器......

随着时间的推移，我们只想存储过去 2-3 天的历史数据，欢迎任何关于服务器和用于获取数据的后端进程的建议，我们不知道要开始..请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:51:12.867

正如其他人所说，
您需要提供有关您打算如何填充服务器的更多信息。
你有什么 API 用于“实时服务器”？
我研究了太阳能设备的管理系统
（即，从太阳能发电的设备——如果我没记错的话，它们被称为光伏电池）。
在我的例子中，这些设备有一个 FTP 访问，它为我提供了基于时间的信息的文件。
我构建了一个使用以下技术的 Java 服务器：

A. [Apache tomcat Web 容器](http://tomcat.apache.org/)- 这个 Web 容器一方面允许我保存 Java 逻辑，另一方面向客户公开基于 HTTP 的接口。
Java 逻辑位于[Servlet](http://docs.oracle.com/javaee/5/api/javax/servlet/Servlet.html) - 公开处理 HTTP 请求的方法（并允许使用响应对象写入返回的数据）。

B. servlet有一个init方法，我用它来进行一些初始化，比如启动一个[quartz](http://quartz-scheduler.org/)周期性任务来探测设备的ftp服务器。

C. 我使用了一个数据库（[postgresql](http://www.postgresql.org/)数据库，它是一个开源数据库）来存储应用程序的配置，以及存储结果。
D. 我使用另一个周期性任务将旧数据归档到归档表中，因此主数据表将保存相对较新的数据。

我在几天内运行了一次归档任务，它简单地检查了“太”旧的记录，将它们插入归档表，然后从主数据表中删除它们。为了有效地执行此操作，我决定使用我在数据库上编码的[函数。](http://www.postgresql.org/docs/9.1/static/sql-createfunction.html)
E. 为了从应用程序访问数据库，我使用了[Hibernate](http://www.hibernate.org/)对象关系映射技术。
这项技术允许我定义表之间的映射以及它们与 java 对象的关系，并为我提供了生成的创建、读取（按 id）、删除和更新的 SQL 语句。
使用 HQL 查询语言，我编写了一些更复杂的查询。

F. 对于演示/客户端 - 我使用了普通的[JSP](http://www.oracle.com/technetwork/java/javaee/jsp/index.html)。

您可以选择其他替代方案，例如：
GWT、Apache Wicket、JSF

您可以考虑使用一些[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)框架在逻辑和表示之间进行一些分离。这样的框架可以是：
Spring-MVC、Struts 等等。

总而言之，您必须了解Java为您提供了多种技术，您必须很好地定义需求，然后开始研究哪种技术可以满足您的需求。

# spring - Spring方面转发并取消先前的请求

> ID：12113394
> 
> 赞同：0
> 
> 时间：2012-08-24T16:37:04.947
> 
> 标签：spring, interceptor, aspect

这是我的问题

我想在任何 spring 控制器调用之前拦截请求，检查和修改请求 URI。之后它必须调用另一个 SPRING 控制器方法。

我使用了 mvc:interceptors 但是我想用注释来配置它，这就是我需要@Aspect 解决方案的原因。一切正常，但控制器调用了两次，用于原始请求和新请求。使用拦截器我返回 false 并取消它，我该如何处理 Aspect 类？谢谢

这是我的代码：

```
@Component
@Aspect
public class TestAspect {

    @Before("execution(* mycontroller.*(..))  &&" + "args(request,response)")
    public void interceptUrl(HttpServletRequest request, HttpServletResponse response) {

        System.out.println("@Aspect is running!");
        System.out.println(request.getRequestURI());

        if (request.getAttribute("client") == null) {
            request.setAttribute("client", "test");
            request.getRequestDispatcher("/newpath/contact").forward(request, response);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:42:57.190

您应该考虑`@Around`建议而不是`@Before`. 在这种情况下，您可以简单地不执行原始请求链。

# c - pthread_spin_trylock 在多线程应用程序的 sigsegv 处理程序中是否安全？

> ID：12113399
> 
> 赞同：1
> 
> 时间：2012-08-24T16:37:33.753
> 
> 标签：c, linux, pthreads, race-condition, segmentation-fault

我正在尝试在 SIGSEGV 上实现一个处理程序，它将收集一些信息，例如进程 ID、线程 ID 和回溯，并将这些信息写入文件/管道/套接字。

问题在于，如果一个线程经历了 SIGSEGV，那么其他线程将很快跟进的可能性（可能相当高）​​。如果两个线程碰巧到达了他们同时写出报告的代码位，那么他们将交错写入（到同一个文件）。

我知道我应该只使用 async-signal-safe 功能，如我在[此处](https://stackoverflow.com/questions/5945775/how-to-get-more-detailed-backtrace)`signal(7)` 看到的至少两个案例和[此处](http://cvmfs.googlecode.com/svn/branches/diskless/cvmfs/src/monitor.cc)的最佳答案中链接的视频，其他人曾经解决此问题。`pthread_spin_trylock`

**这是防止上述问题的安全方法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:48:36.000

在大多数系统上`pthread_spin_trylock`，将使用原子比较和交换（至少在 x86 上是中断安全的 CAS 指令（不能代表其他人））来实现。

我可能会自己使用 CAS 来确保会发生这种情况。这是它的 gcc 文档：http: [//gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Atomic-Builtins.html](http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Atomic-Builtins.html)

和示例代码：

```
 static int lock = 0; // global scope 
```

在您的信号处理程序中：

```
 if (__sync_bool_compare_and_swap(&lock, 0, 1)) {
     // Got the lock
 } else
     pthread_exit(); // terminate this thread 
```

# c++ - 为 Visual Studio 2012 编译 Qt 4.8.x

> ID：12113400
> 
> 赞同：43
> 
> 时间：2012-08-24T16:37:39.240
> 
> 标签：c++, qt, visual-studio-2012

我应该采取哪些步骤来为 Visual Studio 2012 编译 Qt（版本 4.8.x）？

我已经仔细遵循了[这个问题](https://stackoverflow.com/questions/5601950/how-to-build-qt-for-visual-studio-2010)的已接受答案中的说明（适用于 VS 2010），但是 WebKit 模块无法编译（我不确定在编译过程中是否记录了错误消息）。

我也看到了[这个问题](https://stackoverflow.com/questions/10863466/how-to-set-visual-studio-2012-rc-compiler-for-qt-instead-of-mingw)，它提出了同样的问题，但是对于 VS 2012 RC（这就是为什么我认为这不会是一个重复的问题）。此外，回答者说他已经为 VS 2011 Beta 编译了 Qt，因此它可能不适用于 VS 2012 (RTM)。编译需要*很多*时间，这就是为什么我还没有尝试过。

我意识到的至少一个问题`win32-msvc2012`是`Qt\mkspecs`. 我是否应该只创建该目录并从中复制文件`win32-msvc2010`，可能需要进行一些修改？

另一个子问题是我是否应该在开始编译之前对 Qt 源代码进行一些修改。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-10-26T11:10:55.020

Qt 4.8.3 与 Visual Studio 2012 x64（也应与 4.8.2 一起使用）

1.  安装[草莓 Perl](http://strawberryperl.com/)

2.  [从http://qt-project.org/downloads](http://qt-project.org/downloads)下载 Qt 4.8.3 源代码

3.  去`mkspecs\win32-msvc2010`。打开`qmake.conf`和改变：

    ```
    QMAKE_COMPILER_DEFINES  += _MSC_VER=1600 WIN32 
    ```

    至：

    ```
    QMAKE_COMPILER_DEFINES  += _MSC_VER=1700 WIN32 
    ```

4.  `qt-everywhere-opensource-src-4.8.3-x64\src\3rdparty\webkit\Source\JavaScriptCore\wtf\HashSet.h`用[这个`HashSet.h`](https://bitbucket.org/Vertexwahn/bluego/src/56dbe84212222ec6954d8d327a5e443106bcc447/deploy/BlueGo0.0.4/qt4.8.3vs2012patch/HashSet.h?at=default)代替。

5.  启动“VS2012 x64 Native Tools 命令提示符”

6.  切换到 Qt 4.8.3 源目录（包含 的目录`configure.exe`）

7.  跑：

    ```
    configure -mp -opensource -nomake demos -nomake examples -platform win32-msvc2010 
    ```

8.  其次是：

    ```
    nmake 
    ```

我编写了一个名为 BlueGo 的工具，它会自动下载 Qt 4.8.3 并使用 VS2012 x64 构建它：http://bluego.vertexwahn.de [（](http://bluego.vertexwahn.de)也适用于 VS2010 x64）（它只是自动执行我上面描述的操作）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-19T09:18:18.563

Qt 4.8.4 需要的调整比上面 Vertexwahn 描述的要少。

*   在从存档中提取 Qt 之后，仍然必须修复 HashSet（参见[Vertexwahn 的修复）。](https://bitbucket.org/Vertexwahn/bluego/src/56dbe84212222ec6954d8d327a5e443106bcc447/deploy/BlueGo0.0.4/qt4.8.3vs2012patch/HashSet.h?at=default)
*   虽然开箱即用地支持平台 win32-msvc2012（在 64 位环境中也适用于 64 位，不要问他们为什么将其命名为 Win32）。

所以只需替换 HashSet.h 并编译。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-30T17:52:23.570

仅使用以下更改创建一个 win32-msvc2012 目录对我不起作用，需要进行更多编辑。您已经链接的线程中描述了究竟是什么。

我做了什么，我去了win32-msvc2010。

在那里，打开 qmake.conf 并更改

QMAKE_COMPILER_DEFINES += _MSC_VER=1600 WIN32

至

QMAKE_COMPILER_DEFINES += _MSC_VER=1700 WIN32

然后我可以使用 win32-msvc2010 进行配置。

另外，我使用了这些更改：[http](http://qt-project.org/forums/viewthread/17771) ://qt-project.org/forums/viewthread/17771（alzi 的版本）

# actionscript-3 - Flash 打印 - 打印时 Chrome 会忽略 Sprite

> ID：12113403
> 
> 赞同：3
> 
> 时间：2012-08-24T16:37:53.533
> 
> 标签：actionscript-3, flash, google-chrome, actionscript

**快速总结**
我们有一个 Flash 应用程序 (AS3)，它使用户能够阅读、交互和打印其中嵌入的内容。我们最近注意到，当从 Chrome 打印时，会省略内容并打印空白页（注意，空白页也会出现在 Chrome 的打印预览中）。我们在 Chrome 版本“21.0.1180.83”（使用 Flash 版本“ **11.3.31.230** ”）中发现了这个问题。这在任何其他浏览器中都无法重现。

**技术细节**
每页内容都表示为一个 Sprite。为了正确呈现内容，我们进行了一些缩放/调整大小。我们使用位图来实现这一点。我们创建一个新的 BitmapData 对象**(bMapData)**并绘制页面的精灵。我们使用**(bMapData)**并用它创建一个新的位图对象**(bMap)**。最后，我们创建一个新的 Sprite 对象**(sObj)**并添加**(bMap)**作为其子对象。打印**(sObj)**呈现空白页。

我已经包含了一些可用于重现此的示例代码：

```
 private function printAsBitmap(sprite:Sprite):void{
        var bitmapData:BitmapData = new BitmapData(sprite.width, sprite.height, false, 0xffffff);
        bitmapData.draw(sprite);

        var bitmap:Bitmap = new Bitmap(bitmapData);

        var newSprite:Sprite = new Sprite();
        newSprite.addChild(bitmap);

        printSprite(newSprite);
    }

    private function printSprite(clip:Sprite) {

        var printJob:PrintJob = new PrintJob();
        var jobOptions:PrintJobOptions = new PrintJobOptions();     
        jobOptions.printAsBitmap=false;
        var numPages:int = 0;
        var printArea:Rectangle;
        var printHeight:Number;
        var printY:int = 0;

        if ( printJob.start() ) {

            /* Resize movie clip to fit within page width */
            if (clip.width > printJob.pageWidth) {
                clip.width = printJob.pageWidth;
                clip.scaleY = clip.scaleX;
            }

            /* Store reference to print area in a new variable! Will save on scaling calculations later... */
            printArea = new Rectangle(0, 0, printJob.pageWidth/clip.scaleX, printJob.pageHeight/clip.scaleY);

            numPages = Math.ceil(clip.height / printJob.pageHeight);

            /* Add pages to print job */
            for (var i:int = 0; i < numPages; i++) {
                //printJob.addPage(clip, printArea);
                printJob.addPage(clip,null,jobOptions);
                printArea.y += printArea.height;
            }

            /* Send print job to printer */
            printJob.send();

            /* Delete job from memory */
            printJob = null;

        }

    } 
```

有人对“解决方法”有建议吗？

任何和所有的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:21:07.433

谢谢你的文件，

我已经抓住了它，就像我说的那样 - 打印内容必须在舞台上 - 以下是您修改后的打印方法：

```
private function print(clip:Sprite) {
        if (!clip) return;//safety

        var printJob:PrintJob = new PrintJob();
        var jobOptions:PrintJobOptions = new PrintJobOptions();     
        jobOptions.printAsBitmap=false;
        var numPages:int = 0;
        var printArea:Rectangle;
        var printHeight:Number;
        var printY:int = 0;

        if (stage)
            stage.addChild(clip);//add to stage for print

        if ( printJob.start() ) {

            /* Resize movie clip to fit within page width */
            if (clip.width > printJob.pageWidth) {
                clip.width = printJob.pageWidth;
                clip.scaleY = clip.scaleX;
            }

            /* Store reference to print area in a new variable! Will save on scaling calculations later... */
            printArea = new Rectangle(0, 0, printJob.pageWidth/clip.scaleX, printJob.pageHeight/clip.scaleY);

            numPages = Math.ceil(clip.height / printJob.pageHeight);

            /* Add pages to print job */
            for (var i:int = 0; i < numPages; i++) {
                //printJob.addPage(clip, printArea);
                printJob.addPage(clip,null,jobOptions);
                printArea.y += printArea.height;
            }

            /* Send print job to printer */
            printJob.send();

            /* Delete job from memory */
            printJob = null;

        }

        if (stage && stage.contains(clip))
            stage.removeChild(clip);//once done remove from stage

    } 
```

当我修改它时，我可以在谷歌上打印出来，

此致

# android - 为什么这个循环无法通过我的第一个 MediaPlayer

> ID：12113404
> 
> 赞同：1
> 
> 时间：2012-08-24T16:37:58.030
> 
> 标签：android, loops, media-player, android-mediaplayer, playlist

我有 3 个 MediaPlayers：Track 0、Track 1 和 Track 2。我希望每首曲目在结束前开始一次，一旦最后一首曲目结束，我想回到歌曲 0 并重新开始循环。这是我做的没有做到这一点的循环：

```
public void myMusic() {
    while (y > 0) {
        music.get(track).start();

        if (music.get(track).isPlaying() == false) {
            music.get(track).stop();
            track++;

            if (track == 3) {
                track = 0;
                for (int i = 0; i < 3; i++) {
                    try {
                        music.get(i).prepare();
                    } catch (IllegalStateException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                    music.get(i).seekTo(0);
                }
            }
        }
        y--;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:29:56.910

I think you have to close the first if block befor you check if track==3\. But this is just a suggestion i dont try it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:01:54.900

坦率地说，我会放弃整个循环的概念并使用`OnCompletionListener`. 像这样的东西可能会起作用——我还没有测试过这个，只是从我疯狂的脑袋里画出来的，但把它当作概念性的：

```
private class LoopingCompletionListener implements OnCompletionListener {
    private int index;
    private int count;
    private int[] ids;
    private Resources res;

    public LoopingCompletionListener(int[] musicIds, Resources res) {
        //start on the second ID since you start the player with
        //the first one
        index = 1;
        count = musicIds.length();
        this.ids = ids;
        this.res = res;
    }

    @Override
    public void onCompletion(MediaPlayer mp) {
        //Basically, just keep it between 0-2 -- this might need tweaking
        index = ((index + 2) % count) - 1;

        AssetFileDescriptor afd = res.openRawResourceFd(ids[index]);
        FileDescriptor fd = afd.getFileDescriptor();

        mp.reset();
        mp.setDataSource(fd, afd.getStartOffset(), afd.getLength());
        mp.prepare();
        mp.start();
    }
}

//Meanwhile, in onCreate()...
int[] musicIds = { R.raw.track01, R.raw.track02, R.raw.track03 };

MediaPlayer mediaPlayer = MediaPlayer.create(this, musicIds[0]);
mediaPlayer.setOnCompletionListener(
        new LoopingCompletionListener(musicIds, getResources());
mediaPlayer.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:03:33.783

如果我不得不猜测，`isPlaying()`只有`false`当您将 MediaPlayer 状态设置为暂停或停止时。换句话说，您不能简单地依靠它来确定音乐何时到达流的末尾来确定何时完成。

另外，从文档中：

> 请注意，从 Started 状态到 Paused 状态的转换（反之亦然）在播放器引擎中异步发生。在对 isPlaying() 的调用中更新状态可能需要一些时间，对于流式内容可能需要几秒钟。

因此，对于这样的用例，它是一个不可靠的指标。

你可以做的是利用`MediaPlayer.OnCompletionListener`. 为每个可用的 MediaPlayer 注册一个，完成后，您可以进入下一个 MediaPlayer。

所以是这样的：

```
public class PlayUponCompleteListener implements MediaPlayer.OnCompletionListener {
   WeakReference<MediaPlayer> mNextPlayer;

   public PlayUponCompleteListener(MediaPlayer mp) {
     mNextPlayer = new WeakReference<MediaPlayer>(mp);
   }

   @Override
   public void onCompletion(MediaPlayer mp) {
     mp.stop();
     mp.reset();
     if(mNextPlayer.get() != null) {
       mNextPlayer.start();
     }
   }
} 
```

然后，像这样注册它们：

```
mp1.setOnCompletionListener(new CompletionListener(mp2));
mp2.setOnCompletionListener(new CompletionListener(mp3));
mp3.setOnCompletionListener(new CompletionListener(mp1)); 
```

# javascript - 我可以在 JavaScript 中判断访问者的语言环境是遵循美国风格还是世界其他地区的风格？

> ID：12113409
> 
> 赞同：1
> 
> 时间：2012-08-24T16:38:12.260
> 
> 标签：javascript, date, localization

在 JavaScript 中是否有一种不显眼的方式来判断访问者的语言环境是使用美国的月-日-年惯例还是世界其他地方的日-月-年惯例？新的 Date().toLocaleDateString() 是否会将月份放在正确的位置，以便在计算机的语言环境中如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:45:34.060

```
var language = window.navigator.userLanguage || window.navigator.language; 
```

IE 的 userLanguage 和其他一切的语言。en-US 将是英语美国。

# php - 下拉过滤器不起作用

> ID：12113410
> 
> 赞同：3
> 
> 时间：2012-08-24T16:38:15.187
> 
> 标签：php, codeigniter

我在 Stackoverflow 上看到了一个过滤器示例，我会尝试在我的 codeigniter 上实现它，但是当我单击 go 按钮时它不会过滤它。它总是返回我`no user found`这是什么问题？

控制器

```
public function filter($page=0,$offset=5,$search=''){

        $user = $this->session->userdata('user_id');
        $position = $this->session->userdata('user_position');

        if($position =='admin'){

            $search = $this->input->post('search');
            $row = $this->m_user->getAllFilterUsers($offset,$page,$search);
            $data['usersTable'] = $row->result();
            $data['pagination'] = $this->m_user->getUsersFilterPages($search);
            $data['offset'] = $offset;
            $data['page'] = $page;
            $data['search'] = $search;
            $data['title'] = 'Manage Users';
            $this->load->view('vadminuserfilter',$data);

        }
        else{
            $this->session->set_flashdata('error','Page Not Found.');
            redirect('cuser/displayClientPage');
            return;
        }

    } 
```

模型

```
 public function getAllFilterUsers($offset,$count,$search){

        if($search!=''){
            $this->db->where('user_position','client');
            $this->db->where('user_status',$search);
        }
                        $this->db->where('user_position','client');
                        $this->db->where('user_status','active');
                        $this->db->order_by('user_id', 'desc'); 
          $UsersQuery = $this->db->get('tb_user',$offset,$count);

            if($UsersQuery->num_rows>0){
                return $UsersQuery;
            }

            else{

                $this->session->set_flashdata('message','No User Found');   
                redirect('cuser/filter','refresh');
            }           
    }

    public function getUsersFilterPages($search){

        $this->db->where('user_position','client');
        $this->db->where('user_status',$search);
        $Pagesquery = $this->db->get('tb_user');
            $config['base_url'] = site_url('cuser/filter');
            $config['total_rows']= $Pagesquery->num_rows();
            $config['per_page'] = 5;

            $config['first_link'] = 'First'; 
            $config['prev_link'] = 'Previous';
            $config['next_link'] = 'Next';
            $config['last_link'] = 'Last';  
            $this->pagination->initialize($config);

    return $this->pagination->create_links();   

    } 
```

看法

```
<?php echo form_open('cuser/filter'); ?>
Filter By:
<?php $dropdown = array('active'=>'active','inactive'=>'inactive');?>
<?php echo form_dropdown('search', $dropdown); ?> 
 <input name="Submit" type="submit" class="button" <?php echo form_submit('submit','Go');?>
<?php echo form_close(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:14:21.290

只需检查模型的 getAllFilterUsers 函数。$offset 的值为 5，$count 的值为 0。但是你使用..

```
this->db->where('user_position','client');
$this->db->where('user_status','active');
$this->db->order_by('user_id', 'desc'); 
$UsersQuery = $this->db->get('tb_user',$offset,$count); 
```

这意味着..

```
Select * from tb_user where user_position = 'client' and 'user_status' = 'active' order by user_id desc limit 5,0 
```

此查询始终返回空集您的查询应该是..

```
Select * from tb_user where user_position = 'client' and 'user_status' = 'active' order by user_id desc limit 0,5 
```

所以，你的代码片段应该是

```
this->db->where('user_position','client');
$this->db->where('user_status','active');
$this->db->order_by('user_id', 'desc'); 
$UsersQuery = $this->db->get('tb_user',$count,$offset); 
```

最后的功能是...

```
public function getAllFilterUsers($offset,$count,$search){

        if($search!=''){
            $this->db->where('user_position','client');
            $this->db->where('user_status',$search);
        }
                        this->db->where('user_position','client');
                        $this->db->where('user_status','active');
                        $this->db->order_by('user_id', 'desc'); 
          $UsersQuery = $this->db->get('tb_user',$count,$offset);

            if($UsersQuery->num_rows>0){
                return $UsersQuery;
            }

            else{

                $this->session->set_flashdata('message','No User Found');   
                redirect('cuser/filter','refresh');
            }           
    } 
```

而已

# ruby-on-rails - tinymce setContent 不适用于 erb

> ID：12113411
> 
> 赞同：2
> 
> 时间：2012-08-24T16:38:17.023
> 
> 标签：ruby-on-rails, tinymce, erb

在我的 Web 应用程序中，我使用 tinymce 编辑器来允许用户创建 html 电子邮件。我已经包含了一个功能，他们可以将模板保存到数据库中，以便他们可以将其用于多封电子邮件并在他们想要的任何地方访问它。但是，当我尝试将存储在数据库中的内容加载回编辑器时，它只会插入 html 字符串。我想要它，以便呈现 html，以便他们可以看到模板，就像他们保存模板时一样。

我认为问题与 ERB 有关，因为当我传入普通字符串时它工作正常，但是当我使用 ERB 使用实例变量时，它只是将内容设置为 html 字符串，格式不正确。这是我的代码：

```
tinyMCE.init({
    mode : "textareas",
    theme : "advanced",
    ...
    oninit : "loadTemplate"
});

function loadTemplate() {
    tinyMCE.activeEditor.setContent("<%= @template %>");
} 
```

这只会放在`<strong>Text Here</strong>`编辑器中，但是：

```
tinyMCE.init({
    mode : "textareas",
    theme : "advanced",
    ...
    oninit : "loadTemplate"
});

function loadTemplate() {
    template = "<strong>Text Here</strong>";
    tinyMCE.activeEditor.setContent(template);
} 
```

工作得很好，并将**Text Here**放在编辑器中。这里发生了什么导致这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T16:42:50.667

如果`@template`包含 HTML 字符串，rails 会自动转义它。为防止转义，请尝试添加`raw`，如下所示：

```
<%= raw @template %> 
```

# javascript - 动态注入 javascript 文件 - 为什么大多数示例都附加到头部？

> ID：12113412
> 
> 赞同：5
> 
> 时间：2012-08-24T16:38:22.853
> 
> 标签：javascript, dom, optimization, micro-optimization

在我遇到的几乎每个使用 javascript 动态注入脚本的示例中，它都以：

```
document.getElementsByTagName("head")[0].appendChild(theNewScriptTag) 
```

甚至[yepnope.js 也会](https://github.com/SlexAxton/yepnope.js/blob/master/yepnope.js)在页面中的第一个脚本之前附加新脚本，例如：

```
var firstScript = doc.getElementsByTagName( "script" )[ 0 ];
firstScript.parentNode.insertBefore( theNewScriptTag, firstScript ); 
```

**我的问题是：为什么不将其附加到文档正文中？**

```
document.body.appendChild(theNewScriptTag); 
```

在我看来，涉及的 DOM 遍历`getElementsByTagName`——甚至整个“insertAfter = parent.insertBefore”技巧——正在浪费资源。

将脚本动态添加到最底部是否有害？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T16:56:45.607

说真的，为什么我搜索时没有显示？ [document.head, document.body 附加脚本](https://stackoverflow.com/questions/7557868/document-head-document-body-to-attach-scripts)

评论链接到一个完美的解释：[添加脚本元素的荒谬案例](http://www.jspatterns.com/the-ridiculous-case-of-adding-a-script-element/)。

本质上，您有几种选择：

*   ### 钩到头

    ```
    document.getElementsByTagName('head')[0].appendChild(js) 
    ```

    1.  **专业版**- 大多数页面都有头部
    2.  **Con** - 如果不是，则不总是自动生成；遍历
*   ### 钩在身体上

    ```
    document.body.appendChild(js); 
    ```

    1.  **Pro** - 最短，无需遍历
    2.  **Con** - 如果不从直接子级执行 IE7 中的“操作中止”错误`body`
*   ### 钩到`documentElement`

    ```
    var html = document.documentElement;
    html.insertBefore(js, html.firstChild); 
    ```

    1.  **Pro** - 永远存在，最少的遍历
    2.  **骗局**——[或者是吗？](http://www.stevesouders.com/blog/2010/05/11/appendchild-vs-insertbefore/#comment-2084)（如果第一个孩子是评论则失败）
*   ### 挂钩到第一个脚本

    ```
    var first = document.getElementsByTagName('script')[0];
    first.parentNode.insertBefore(js, first); 
    ```

    1.  **Pro** - 很可能总是从脚本调用您的动态负载
    2.  **Con** - 如果不存在以前的脚本，将失败；遍历

所以，结论是——你可以做任何事情，但你必须考虑你的观众。如果您可以控制加载程序的执行位置，则可以使用`document.body`. 如果您的加载程序是其他人使用的库的一部分，您必须根据您使用的方法给出具体说明，并为滥用您的规范的人做好准备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-24T09:26:11.240

我相信你总是可以使用`document.write(...)`它，它不会依赖于任何元素的存在或被其他脚本操纵。

就像是：

```
document.write(unescape("%3Cscript src='my_file.js' type='text/javascript'%3E%3C/script%3E'")); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-24T16:43:05.620

您可以在页面底部添加脚本。

使用 insertBefore 将它添加到头部的好处是使其异步加载。是的，新浏览器现在支持 async 属性，但要与旧浏览器（IE8 及以下）一起使用，将其附加到头部是异步加载它的唯一方法

[更多关于它](http://friendlybit.com/js/lazy-loading-asyncronous-javascript/)

# bash - -bash 语法错误“fi”

> ID：12113415
> 
> 赞同：0
> 
> 时间：2012-08-24T16:38:29.227
> 
> 标签：bash, shell

我正在尝试使用 ssh 创建符号链接。这是我正在使用的命令。

```
cd /home
for homedir in *
do if [ -d ${homedir} ]
ln -s /etc/cpbackup-exclude.conf ${homedir}/cpbackup-exclude.conf
fi
done 
```

输入 fi 后出现此错误。"-bash: 意外标记 'fi' 附近的语法错误

我不确定有什么问题？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T16:41:22.080

该`if`命令的语法是：

```
if test-commands; then
  consequent-commands;
[elif more-test-commands; then
  more-consequents;]
[else alternate-consequents;]
fi 
```

* * *

`then`在您的代码中添加关键字：

```
if [ -d ${homedir} ]
then
    ln -s /etc/cpbackup-exclude.conf ${homedir}/cpbackup-exclude.conf
fi 
```

顺便说一句，您可以缩进代码以使其易于阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:41:44.247

`then`我认为您可能需要if 语句中的条件后关键字。

[请参阅此处](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html)的文档。

# css - CSS3 PIE 样式选择

> ID：12113419
> 
> 赞同：2
> 
> 时间：2012-08-24T16:38:46.130
> 
> 标签：css, select, css3pie

CSS3 Pie 在样式选择标签时有一些奇怪的功能。边框半径和框阴影似乎应用了效果，然后将非样式选择框置于效果之上。这是以前有人遇到过并解决过的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T13:23:46.633

我实际上遇到了这个问题，但想出了一个解决办法。

最初，与

```
behavior: url(stylesheets/PIE.htc); 
```

选择首先会打开，但如果我在验证期间使用 javascript 在其上应用了一类错误以使边框和背景颜色变为红色，它将不再正确打开。要让它仍然正常工作，您需要向选择添加 3 个额外的饼图属性。添加后

```
.ie select{
behavior: url(stylesheets/PIE.htc);
-pie-poll:false;
-pie-track-hover:false;
-pie-track-active:false; 
} 
```

我能够让它正常工作并 100% 正常运行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T22:47:03.330

你的意思是这样设计吗？[http://jsfiddle.net/Tmzjz/1/](http://jsfiddle.net/Tmzjz/1/)

如果在 IE7/8 中选中此项，选择框将无法正常工作。

当您需要选择框的圆角和框阴影时，最好使用 javascript 方法 - [http://cssglobe.com/custom-styling-of-the-select-elements/](http://cssglobe.com/custom-styling-of-the-select-elements/)

# java - 实例化一个接受泛型集合的对象

> ID：12113420
> 
> 赞同：4
> 
> 时间：2012-08-24T16:38:58.507
> 
> 标签：java, generics, abstract-class

我正在学习 Java 泛型，我正在尝试修改我开发的一些代码作为练习。

特别是，我开发了一个`ArrayVisualizer`类，它使用 Sedgewick 的 StdDraw 库来可视化和动画化动态数组的行为。我有自己的支持泛型的动态数组类，并且我正在尝试将使用扩展`ArrayVisualizer`到与该数组类似的任何东西。

简而言之，我的问题是：如何处理包含其他泛型类型的泛型类型？

这是我的思考过程：

*   我开始制作这个界面：

```
public interface IterableCollection<Item> {
    void add(Item i);

    Item get(int index) throws IndexOutOfBoundsException; // These can be slow for LinkedList implementations
    void set(int index, Item value) throws IndexOutOfBoundsException;

    int capacity();
    int size(); // Capacity and size can be the same for LinkedList implementations
} 
```

*   然后，我希望我的`ArrayVisualizer`类将任何实现此接口的类作为参数。经过一番谷歌搜索，我发现你不能写

```
public class ArrayVisualizer<T implements IterableCollection<?> > 
```

但你必须使用扩展。

但是，即使我写了我也不能在我的函数中使用 T 类。

例如，如果我尝试泛化此函数，则会出现编译器错误：

```
public static void draw(T<String> vector) throws Exception 
```

就像我必须指定 T 也是通用的，但我找不到声明它的方法。我尝试了以下方法，但没有一个有效：

```
public class ArrayVisualizer<T<?> implements IterableCollection<?> >
public class ArrayVisualizer<T<S> implements IterableCollection<S> > 
```

**资源：**我已经上传了我的代码的工作非通用版本作为参考。

*   [动态数组.java](http://pastebin.com/aSdTfjz0)

*   [ArrayVisualizer.java](http://pastebin.com/c6CADJkQ)（这需要一些间隔字符串作为输入）

*   [InteractiveArrayVisualizer.java](http://pastebin.com/2sUAbSVa)（这个不允许选择单元格的值，但您可以通过单击下一个空白点来填充它们，您可以通过单击最后一个打开的单元格来清空它们。这意味着使用调试助手用于动态数组的大小调整问题）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T16:49:10.543

您的`ArrayVisualizer`类*必须*同时指定集合类型和元素类型。你*不能*`T<String>`像在 Java 中那样量化。（其他语言可以做到，但 Java 不行。）

所以，像......

```
class ArrayVisualizer<E, T extends IterableCollection<E>> {
  public void draw(T vector) { ... }
} 
```

（虽然如果我是你，我会尝试使用预建`Iterable`或`Collection`界面而不是我自己的`IterableCollection`界面......）

# c# - 尝试解析 html 以进行 pdf 转换时出现 ItextSharp 错误

> ID：12113425
> 
> 赞同：13
> 
> 时间：2012-08-24T16:39:10.737
> 
> 标签：c#, itext, html-parsing, html-agility-pack, xmlworker

我正在使用 ItextSharp 模块将下面列出的 html 转换为 pdf 页面。

```
 <div style="font-size: 18pt; font-weight: bold;">
    mma<br>mmar</div><br> <br>
    <div style="font-size: 14pt;">Click to View Pricing
    </div>
    <br>
    <div>
    <table>
    <tr><td> <a href="http://www.mma.com/fci" style="color: Blue; font-size: 10pt; text-decoration: underline;"> FCI</a>:</td> 
<td><a href="http://www.mma.com/access/?pn=78211-014" style="color: Blue; font-size: 10pt; text-decoration: underline;"> 78211-014</a></td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-009" 
style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-009</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-006" 
style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-006</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-007" 
style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-007</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-003" 
style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-003</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-005" 
style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-005</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-008"
 style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-008</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-004" 
style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-004</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-012" 
style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-012</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-007LF" 
style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-007LF</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-015LF" 
style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-015LF</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-003LF"
 style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-003LF</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-009LF" 
style="color: Blue; font-size: 10pt; text-decoration:
underline;">78211-009LF</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-005LF" 
style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-005LF</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-010LF" 
style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-010LF</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-006LF"
 style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-006LF</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-014LF"
 style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-014LF</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-004LF" 
style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-004LF</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-012LF"
 style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-012LF</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-008LF"
 style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-008LF</td></tr><tr><td></td> <td>
<a href="http://www.mma.com/access/?pn=78211-011LF" 
style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-011LF</td></tr><tr><td></td> <td><a href="http://www.mma.com/access/?pn=78211-013LF" 
style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-013LF</td></tr><tr><td></td> <td><a href="http://www.mma.com/access/?pn=78211-010" style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-010</td></tr><tr><td></td>
<td><a href="http://www.mma.com/access/?pn=78211-015"
 style="color: Blue; font-size: 10pt; text-decoration: underline;">78211-015</td></tr><tr><td> 
<a href="http://www.mma.com/souriau" 
style="color: Blue; font-size: 10pt; text-decoration: underline;"> Souriau</a>:</td>
 <td><a href="http://www.mma.com/access/?pn=24JR124-3" style="color: Blue; font-size: 10pt; text-decoration: underline;"> 24JR124-3</a></td></tr></table></div> 
```

生成上述 html 的 C# 代码：

```
 var html = new StringBuilder(@"<div style=""font-size: 18pt; font-weight: bold;"">Authorized Distributor</div><br> <br><div style=""font-size: 14pt;"">Click to View Pricing, Inventory, Delivery & Lifecycle Information:</div><br>");
            List<MfrBrandView> mfrBrands = MfrBrandView.Load(fileId);
            var uniquesuppliers = mfrBrands.GroupBy(t => new {t.Manufacturer,t.SupplierVirtualDirectory}).Select(g => g.First());
            html.Append("<div><table>");
            foreach (var uniquesupplier in uniquesuppliers)
            {
                var mfrPartNums =
                    mfrBrands.Where(t => t.ManufacturerId == uniquesupplier.ManufacturerId).Select(
                        t => t.ManufacturerPartNumber).ToList();
                html.AppendFormat(@"<tr><td> <a href=""http://www.mma.com/{0}"" style=""color: Blue; font-size: 10pt; text-decoration: underline;""> {1}</a>:</td> <td><a href=""http://www.mma.com/access/?pn={2}"" style=""color: Blue; font-size: 10pt; text-decoration: underline;""> {2}</a></td></tr>", uniquesupplier.SupplierVirtualDirectory, uniquesupplier.MouserizationLabel, mfrPartNums[0]);

                for (int i = 1; i < mfrPartNums.Count(); i++)
                {
                    html.AppendFormat(
                        @"<tr><td></td> <td><a href=""http://www.mma.com/access/?pn={0}"" style=""color: Blue; font-size: 10pt; text-decoration: underline;"">{0}</td></tr>",
                        mfrPartNums[i]);
                }
            }
            html.Append("</table></div>");
            return html.ToString(); 
```

html形成后生成页面的代码：

```
PdfWriter writer = null;
            PdfDocument doc = null;
            //PdfReader reader = new PdfReader(content);
           // reader.Info["Title"]

            try
            {
                doc = new PdfDocument();
                doc.SetPageSize(PageSize.LETTER);
                writer = PdfWriter.GetInstance(doc, content);
                writer.CloseStream = false;
                doc.Open();
                doc.NewPage();

                foreach (IElement element in iTextSharp.text.html.simpleparser.HTMLWorker.ParseToList(new StringReader(html), null))
                {
                    doc.Add(element);
                }
            } 
```

下面是我得到一个异常的地方，说***“无法将*** ***'iTextSharp.text.html.simpleparser.CellWrapper'类型的对象转换为'iTextSharp.text.Paragraph'***。” **`iTextSharp.text.html.simpleparser.HTMLWorker.ParseToList(new StringReader(html), null)`**

我要解析的 html 有问题吗？有没有更好的方法来做到这一点？非常感谢您的帮助。非常感谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-29T15:59:46.880

`HTMLWorker'[已被弃用](http://itext-general.2136553.n4.nabble.com/iText-PDF-using-HTML-Worker-issue-td4655474.html)，取而代之的是[XMLWorker](http://developers.itextpdf.com/faq/category/parsing-xml-and-xhtml)。这是一个使用上面使用的 HTML 片段测试的工作示例：

```
StringReader html = new StringReader(@"
<div style='font-size: 18pt; font-weight: bold;'>
Mouser Electronics <br />Authorized Distributor</div><br /> <br />
<div style='font-size: 14pt;'>Click to View Pricing, Inventory, Delivery & Lifecycle Information:
</div>
<br />
<div>
<table>
<tr><td></td><td>
<a href='http://www.mouser.com/access/?pn=78211-009' 
style='color: Blue; font-size: 10pt; text-decoration: underline;'>78211-009</a></td></tr>
</table></div>    
");      
using (Document document = new Document()) {
  PdfWriter writer = PdfWriter.GetInstance(document, STREAM);
  document.Open();
  XMLWorkerHelper.GetInstance().ParseXHtml(
    writer, document, html
  );
} 
```

使用时，`XMLWorker`您需要使用格式良好的 HTML——毕竟它是一个 XML 解析器。您上面问题的示例`HTML`没有结束`<a>`或`<br>`标签。[像HtmlAgilityPack](https://www.nuget.org/packages/HtmlAgilityPack)这样的`HTML`解析器 将解决这些问题，并将其转为：

```
<div><img src='a.gif'><br><hr></div> 
```

进入这个：

```
<div><img src='a.gif' /><br /><hr /></div> 
```

只有几行代码：

```
var hDocument = new HtmlDocument()
{
    OptionWriteEmptyNodes = true,
    OptionAutoCloseOnEnd = true
};
hDocument.LoadHtml("<div><img src='a.gif'><br><hr></div>");
var closedTags  = hDocument.DocumentNode.WriteTo(); 
```

`XMLWorker`可[作为 nuget 包提供](https://www.nuget.org/packages/itextsharp.xmlworker/)，或[在 sourceforge 单独下载](https://github.com/itext/itextsharp/releases/tag/5.5.9)。

**有关`XMLWorker`**. **[_](https://stackoverflow.com/questions/35594030)** **_**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T18:10:41.770

试试下面的代码

```
 &lt;a href="http://www.abcd.com"&gt;&lt;/a&gt; 
```

在这里，我们将 < 替换为`&lt`; 和 > 与`&gt`; 所以我的变得`&lt;a&gt;`和变得 `&lt;/a&gt;`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-14T12:53:29.623

这是您需要做的步骤

1- 从 nuget 的 Itextsharp 安装 itext sharp 和 XMLWorker

2-然后使用内联 CSS 将您的设计放入 html（此处为 Invoice.html）

3-确保所有标签都像断点或 td 一样正确结束（这里我之前遇到了错误）

4-这里的图片不会在本地显示，所以我不浪费时间在服务器上上传图片并提供服务器路径来访问 Image.U 可以研究更多以在本地运行它。

```
Document doc = new Document();

PdfPTable tableLayout = new PdfPTable(4);

PdfWriter writer= PdfWriter.GetInstance(doc, new FileStream(Server.MapPath("~/Admin/T13.pdf"), FileMode.Create));                 

doc.Open();

string contents = File.ReadAllText(Server.MapPath("~/Admin/invoice.html"));

StringReader sr = new StringReader(contents);

XMLWorkerHelper.GetInstance().ParseXHtml(writer, doc, sr);  

doc.Close(); 
```

# iphone - 设置 NSDocumentDirectory 使其不备份到 iCloud

> ID：12113426
> 
> 赞同：1
> 
> 时间：2012-08-24T16:39:18.897
> 
> 标签：iphone, objective-c, ios, icloud

我正在尝试标记我的应用程序 NSDocumentDirectory 的整个文件夹，以便将其从 iCloud 备份中排除，但是当我转到终端并运行时：xattr -plxv com.apple.MobileBackup 我收到此错误：没有这样的 xattr： com.apple.MobileBackup

提前感谢您提供的任何帮助。

这是我正在使用的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions 
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSURL *pathURL= [NSURL fileURLWithPath:documentsDirectory];

    [self addSkipBackupAttributeToItemAtURL:pathURL];
}

- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    if (&NSURLIsExcludedFromBackupKey == nil) { // iOS <= 5.0.1
        const char* filePath = [[URL path] fileSystemRepresentation];

        const char* attrName = "com.apple.MobileBackup";
        u_int8_t attrValue = 1;

        int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
        return result == 0;
    } else { // iOS >= 5.1

        NSLog(@"%d",[URL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:nil]);
        return [URL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:nil];
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T18:03:09.473

如何在 iOS 应用程序的文件夹上运行终端？你是说模拟器里？

苹果肯定会从主 Documents 文件夹中忽略或删除该属性。您应该做的是 Apple 告诉开发人员要做的事情（来自[File Systems Programming Guide](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)）：

> 以以下两种方式之一处理支持文件——应用程序下载或生成并可以根据需要重新创建的文件：
> 
> *   在 iOS 5.0 及更早版本中，将支持文件放在*<Application_Home>*`/Library/Caches`目录中，以防止它们被备份
>     
>     
> *   在 iOS 5.0.1 及更高版本中，将支持文件放在*<Application_Home>*`/Library/Application Support`目录中并对其应用 com.apple.MobileBackup 扩展属性。此属性可防止将文件备份到 iTunes 或 iCloud。如果您有大量支持文件，您可以将它们存储在自定义子目录中，并将扩展属性仅应用于该目录。

所以你在里面为你的文件创建一个新目录`Application Support`，并将属性应用到那个目录。

**编辑：**嗯，似乎信息已过时，文档尚未更新。从[iOS 5.1 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-5_1/_index.html)：

> iOS 5.1 引入了一个新的 API 来标记不应备份的文件或目录。对于`NSURL`对象，添加 `NSURLIsExcludedFromBackupKey`属性以防止相应的文件被备份。对于`CFURLRef objects`，使用相应的 `kCFURLIsExcludedFromBackupKey`属性。
> 
> 如前所述，在 iOS 5.1 及更高版本上运行的应用程序必须使用更新的属性，而不是 `com.apple.MobileBackup`直接添加扩展属性。扩展属性已被弃用，并且在未来的版本中可能会删除对它的`com.apple.MobileBackup`支持。

事实证明，您可以在[Technical Q&A QA1719](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)中获得执行此操作的实际代码。

另外，我发现我需要至少在模拟器中创建应用程序支持目录。希望这段代码有帮助：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // got to make sure this exists
    NSFileManager *manager = [NSFileManager defaultManager];
    NSString *appSupportDir = [self applicationAppSupportDirectory];
    if(![manager fileExistsAtPath:appSupportDir]) {
        __autoreleasing NSError *error;
        BOOL ret = [manager createDirectoryAtPath:appSupportDir withIntermediateDirectories:NO attributes:nil error:&error];
        if(!ret) {
            LTLog(@"ERROR app support: %@", error);
            exit(0);
        }
    }
    ...
}

- (NSString *)applicationAppSupportDirectory
{
    return [NSSearchPathForDirectoriesInDomains(NSApplicationSupportDirectory, NSUserDomainMask, YES) lastObject];
} 
```

# gwt - 无法取消选中 smartgwt listgrid 中的复选框

> ID：12113429
> 
> 赞同：0
> 
> 时间：2012-08-24T16:39:22.160
> 
> 标签：gwt, checkbox, smartgwt, listgrid

我一整天都在头疼，但找不到解决方案，我希望有人能帮助我。

我正在尝试创建一个带有复选框的简单 SmartGWT ListGrid，由于某种原因，我只能选中复选框，但不能取消选中它们。
一旦checkbok被选中，就无法取消选中它。
在我用来创建网格的代码下方。
在这里，我首先实例化稍后通过调用服务器填充的网格。
知道我做错了什么吗？初始化有什么问题吗？
提前致谢！！

```
[...]

ListGrid hotelsGrid = new ListGrid();

hotelsGrid.enableHiliting(false);
hotelsGrid.setCanSort(false);
hotelsGrid.setCanResizeFields(false); 
hotelsGrid.setShowHeader(false);
hotelsGrid.setAutoFitData(Autofit.BOTH);
hotelsGrid.setStyleName("selectGrid");
hotelsGrid.setCanEdit(false);
hotelsGrid.setShowHover(false);
hotelsGrid.setShowRollOver(false);
hotelsGrid.setShowSelectedStyle(false);
hotelsGrid.setSelectionAppearance(SelectionAppearance.CHECKBOX);

[...]

private void initGrid(String[] sParams){

ListGridField flagField = new ListGridField("flagField", "Status", 40);
flagField.setAlign(Alignment.CENTER);
flagField.setType(ListGridFieldType.IMAGE);
flagField.setImageURLPrefix("flags/");
flagField.setImageURLSuffix(".png");

ListGridField textField = new ListGridField("textField", "Meaning");

hotelsGrid.setFields(flagField, textField);
hotelsGrid.setData(getSelectRecords(sParams));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:56:16.070

目前尚不清楚您上面的代码示例如何与可点击的复选框相关 - 您的代码没有尝试创建带有复选框的字段？

要获得一个可点击的复选框，您需要做的就是声明一个“布尔”类型的字段和`setCanToggle(true)`. `setCanToggle(true)`允许一键切换，而无需为任何其他字段启用编辑。

# objective-c - 由于没有连接，如何检测 didFailWithError 被调用？

> ID：12113431
> 
> 赞同：0
> 
> 时间：2012-08-24T16:39:41.963
> 
> 标签：objective-c, ios, restkit

有没有办法告诉我何时调用 Restkit didFailWithError 函数的原因是缺少与服务器的连接？

```
-(void) objectLoader:(RKObjectLoader *)objectLoader didFailWithError:(NSError *)error{

//What should I do here to know the server could not be reached?

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:19:04.717

在`NSURLConnection` `didFailWithError`我使用此代码的方法中，它可能适用于`RESTKit`，但我不确定。我想我会发布这个，所以你至少可以检查一下（它可能会有所帮助）:)

```
if (error)
{
    NSLog(@"%@", [NSString stringWithFormat:@"Connection failed! Error code: %d - %@ %@", error.code, error.localizedDescription, [error.userInfo objectForKey:NSURLErrorFailingURLStringErrorKey]]);

    if (error.code == -1009)
    {
        // This is the case that a connection failed based on bad connectivity
    }
} 
```

需要帮助请叫我 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:15:58.890

您应该可以查看`NSError` [类参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/Reference/Reference.html)。

您将在哪里找到以下相关方法：

```
-(NSUInteger)code;

//A string containing the localized description of the error.
-(NSString *)localizedDescription; 
```

因此，您将检查`NSError`您收到的此方法的返回值。

# css - 字体大小 em 在某些设备上显示不同

> ID：12113436
> 
> 赞同：3
> 
> 时间：2012-08-24T16:40:06.790
> 
> 标签：css, mobile, windows-mobile, standards, web-standards

我正在为主要为移动设备设计的网络创建一个聊天程序。我的问题是，为了尽可能适合移动设备，我放弃了像素字体大小`em`，但是在我的带有 Firefox 的台式电脑上，`li`文本显示非常小，并且在 iPad 上也是如此。在我的诺基亚 Lumia 800 windows 手机上，它显示得更大。

我的 CSS：

```
* { margin:0; padding:0; font-family:arial; }
body > div { width:auto; margin:10px; }
h1 { font-size:1.5em; }
h2 { font-size:4em; text-align:center; }
h2#signIn > a { color:#aaaaaa; }
h2#signIn > a:hover { color:#000000; }
h3 { text-align:left; font-weight:normal; margin:10px; }

ul { list-style:none; }
ul > li { font-size:0.8em; font-weight:normal; padding:5px; text-align:center; }

a { color:#000000; text-decoration:none; font-variant:small-caps; }
a:hover { color:#aaaaaa; }
div.fieldContainer { display:block; border:1px solid #000000; padding:5px; }
span.yell, span.wire { font-variant:small-caps; }
span.wire { color:#aaaaaa; }

input[type="text"], input[type="password"]
{
    width:100%; margin:0;
    font-size:2em; border:0;
}

input[type="button"]
{
    width:100%; padding:10px; font-size:2em;
    font-variant:small-caps; letter-spacing:2px;
    border:1px solid #000000; background-color:#dddddd;
}

#messages
{
    width:100%; height:200px;
    border:0; padding:0; margin:0;
    overflow:auto; font-size:0.9em;
}

span.msgTime { font-size:0.7em; }

.fromMe { color:#aaaaaa; }
.fromYou { color:#000000; }
.clear { clear:both; } 
```

如您所见，列表元素使用 0.8em。我意识到存在浏览器不一致的情况，但这真的不可避免吗？

我还使用它来确保网页的比例正确显示：

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;"> 
```

**更新 1**

我认为值得一提的是，所有其他相对字体大小看起来都不错，它似乎只是在移动浏览器中不同的列表元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T16:44:47.460

`em`是相对于当前字体大小的度量。如果浏览器都有不同的默认基本字体大小，那么它们的外观会有所不同。尝试使用`pt`它仍然适用于不同尺寸的屏幕并且不像固定的那样`px`。

[http://www.w3schools.com/cssref/css_units.asp](http://www.w3schools.com/cssref/css_units.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:44:27.133

每个浏览器都有自己的默认样式表，用于设置基本文本大小。Ems 是根据默认文本大小更改大小的相对单位。试着给你`body`的 a `font-size:16px`，作为一个例子，看看这是否不会使文本以相同的大小显示。

为了更清楚，这里有一个链接可以帮助解释为什么我建议在元素上使用像素大小`body`，并且**只**在那个元素上使用。[http://www.alistapart.com/articles/fluidgrids/](http://www.alistapart.com/articles/fluidgrids/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T14:23:11.373

在 css 文件第 1 行显示

```
* { margin:0; padding:0; font-family:arial; } 
```

将其替换为

```
* { margin:0; padding:0; font-family:arial; font-size: 1em; } 
```

它会工作的！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-24T16:52:32.277

如果您希望让每个浏览器使用其默认字体大小，大概适合设备，根本不要设置正文字体大小，也不要`meta`像现在一样使用标签来防止缩放。

如果您认为“一刀切”是您的方式，那么以像素或点为单位设置字体大小（不同的方法），而不是尝试使用`em`单位来实现。

# java - eclipse插件内的图像路径

> ID：12113439
> 
> 赞同：1
> 
> 时间：2012-08-24T16:40:21.423
> 
> 标签：java, jar, eclipse-plugin, filepath

我正在尝试通过以下方式（来自 eclipse FAQ 网站上的教程）引用 eclipse 插件（例如图标）中的图像：

```
Bundle bundle = Platform.getBundle(PLUGIN_ID);
Path path = new Path("icons/doodledebug-icon.png");
URL fileURL = FileLocator.find(bundle, path, null);
URL resolved = null;
try {
    resolved = FileLocator.resolve(fileURL);
} catch (IOException e) {
    throw new RuntimeException(e);
}
ImageDescriptor imageDescriptor = ImageDescriptor.createFromURL(resolved); 
```

这在测试时工作正常，即在运行时 eclipse 应用程序中。但是在创建更新站点并使用此站点时会导致错误。该路径似乎在语法上不正确：

`C:\Program Files\eclipse EE indigo\file:\C:\Users\Me\.eclipse\org.eclipse.platform_3.7.0_1202875443\plugins\DoodleDebugServer-Plugin_1.0.0.201208241809.jar!\icons\doodledebug-icon.png`

为什么在 jar 中执行时会中断，或者我应该如何正确执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:45:03.980

假设图标目录在项目的根目录，我相信你可以在路径的前面添加一个斜杠：

```
Path path = new Path("/icons/doodledebug-icon.png"); 
```

# apache - 从 iPhone 访问本地 Apache 子域

> ID：12113441
> 
> 赞同：3
> 
> 时间：2012-08-24T16:40:36.567
> 
> 标签：apache, testing, subdomain, localhost, remote-debugging

我目前可以通过在 iPhone 上的 Safari 中输入我的 IP 来访问我的本地主机，但我有一个想要访问的移动子域 (m.mysite.local)。如何从我的 iPhone 访问此子域？

谢谢！

# c++ - 递归类型真的是构建非连续任意大小数据结构的唯一方法吗？

> ID：12113444
> 
> 赞同：8
> 
> 时间：2012-08-24T16:40:42.117
> 
> 标签：c++, 语言不可知论, c++, data-structures, language-agnostic

我刚刚注意到一个[问题](https://stackoverflow.com/q/12113005/430766)，询问在 C++ 中哪些递归数据类型（“自引用类型”）有好处，我很想大胆地声称

> 这是构建可以接受任意大型数据集合而不使用连续内存区域的数据结构（更准确地说是容器）的唯一方法。

也就是说，如果您没有随机访问数组，您将需要某种方式（在逻辑上）对该类型中的类型进行引用（显然，`MyClass* next`您可以说不是拥有一个成员，`void* next`但它仍然指向一个`MyClass`对象或派生的类型）。

但是，我对绝对陈述很谨慎——仅仅因为我想不出某些东西并不意味着它不可能，所以**我忽略了某些东西**吗？是否存在*既不*使用类似于链表/树的机制组织*也不*专门使用连续序列的数据结构？

* * *

***注意****：这被标记为[c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")和[语言不可知论](/questions/tagged/language-agnostic "显示标记为“与语言无关”的问题")，因为我对 C++ 语言特别感兴趣，但也对理论方面感兴趣。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T17:18:57.390

> 这是构建可以接受任意大型数据集合而不使用连续内存区域的数据结构（更准确地说是容器）的唯一方法。

想了一会儿，这个说法似乎是对的。事实上，这是不言而喻的。

假设我在*非连续*内存中有一组元素。还假设我目前在 element `e`。现在的问题是，我怎么知道集合中的*下一个元素？*有什么办法吗？

给定`e`集合中的一个元素，*只有*两种方法可以*计算*下一个元素的位置：

*   如果我假设它处于偏移位置`sizeof(e)`而不管是什么`e`，那么这意味着下一个元素从当前元素结束的地方开始。但这意味着该集合位于*连续的*内存中，这在本次讨论中是禁止的。

*   元素`e`本身告诉我们下一个元素的位置。它可以存储地址本身或偏移量。无论哪种方式，它都在使用自我参照的概念，这在本次讨论中也是被禁止的。

正如我所看到的，这两种方法的**基本思想**是*完全相同*的：它们都实现了自引用。唯一的区别是，在前者中，自引用是隐式实现的，使用`sizeof(e)`as *offset*。这种隐式自引用由语言本身支持，并由编译器实现。在后者中，很明显，一切都由程序员自己完成，因为现在*偏移量*（或指针）存储在元素本身中。

因此，我看不到任何第三种实现自我引用的方法。如果不是自引用，那么将使用什么*术语*来描述计算下一个元素到元素的位置`e`。

所以我的结论是，你的说法是绝对正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T17:00:30.507

问题是动态分配器本身正在管理连续存储。想想用于图灵机或冯诺依曼架构的“磁带”。所以要认真考虑这个问题，你可能需要开发一种新的计算模型和新的计算机架构。

如果你认为忽略底层机器的连续内存是可以的，我相信有很多解决方案是可能的。我首先想到的是容器的每个节点都标有与其在内存中的位置无关的标识符。然后，为了找到相关节点，扫描所有内存，直到找到标识符。如果在并行机器中有足够的计算元素，这甚至不是特别低效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T17:19:53.407

这是一个证明的草图。

鉴于*程序*的大小必须是**有限**的，程序中定义的所有类型必须只包含有限多个*成员*，并且只能引用有限多个*其他类型*。这同样适用于任何程序入口点和在程序初始化之前定义的任何对象。

在没有**连续数组**的情况下（它是具有*运行时自然数的类型的**乘积*，因此大小不受限制），所有类型都必须通过上述类型的组合来获得；类型的派生（pointer-to-pointer-to- ）仍然受到程序大小的限制。除了连续数组之外，**没有**其他工具可以用类型组合运行时值。*`A`*

 ***> 这有点争议；如果例如映射被认为是原始的，那么可以使用其键是自然数的映射来近似数组。当然，任何映射的*实现*都必须使用自引用数据结构（B 树）或连续数组（哈希表）。

接下来，如果类型**是非递归**的，那么任何类型链（`A`引用`B`引用`C`...）都必须终止，并且长度不能大于程序中定义的类型数。*因此，程序可引用*的数据的总大小限制为每种类型的大小乘以程序中定义的*名称*数量（在其入口点和静态数据中）的乘积。

即使函数是递归的也是如此（严格来说，这违反了对递归类型的禁令，因为函数是类型）；*在程序中的任何一点立即可见*的数据量仍然限于每种类型的大小乘以该点可见名称的数量的乘积。

一个例外是，如果您将“容器”存储在**递归函数调用堆栈中**；但是，这样的程序将无法在不*展开*堆栈并且必须重新读取数据的情况下随机遍历其数据，这有点失格。

最后，如果可以**动态创建类型**，则上述证明不成立；例如，我们可以创建一个 Lisp 样式的列表结构，其中每个单元格都是不同的类型：`cons<4>('h', cons<3>('e', cons<2>('l', cons<1>('l', cons<0>('o', nil)))))`. 这在大多数静态类型语言中是不可能的，尽管在某些动态语言中是可能的，例如 Python。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T16:46:35.597

该说法不正确。简单的反例是`std::deque`用 C++ 编写的。基本数据结构（对于与语言无关的部分）是指向数据数组的指针的连续数组。实际数据存储在*绳索*（非连续块）中，它们通过连续数组链接。

* * *

这可能会超出您的要求，具体取决于*不使用连续内存区域*的含义。我使用的解释是存储的数据不连续，但是这种数据结构依赖于中间层的数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T17:04:18.850

我认为更好的措辞是：

```
It's the only way to construct data structures (more precisely containers) that can accept 
arbitrary large data collections without using memory areas of determinable address. 
```

我的意思是普通数组用于`addr(idx)=idx*size+inital_addr`获取元素的内存地址。但是，如果将其更改为类似`addr(idx)=idx*idx*size+initial_addr`的内容，则数据结构的元素不会存储在连续的内存区域中，而是在存储元素的位置之间存在很大差距。因此，它不是连续记忆。***

# jquery - 使用 jQuery 从 Telerik 下拉列表中删除项目

> ID：12113448
> 
> 赞同：0
> 
> 时间：2012-08-24T16:41:04.153
> 
> 标签：jquery, asp.net-mvc, telerik

我知道如何使用 jquery 将项目添加到 Telerik ddl，但是如何删除值？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:57:34.690

这是带有添加/删除/禁用项目的 RadComboBox 的演示......

[http://demos.telerik.com/aspnet-ajax/combobox/examples/programming/addremovedisableitemsclientside/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/combobox/examples/programming/addremovedisableitemsclientside/defaultcs.aspx)

基本上 - 你需要先得到组合框本身。这是代码：

```
var combo = $find("<%= RadComboBox1.ClientID %>"); 
```

假设您要删除组合框中当前选定的项目。您需要先抓取如下物品：

```
var comboItem = combo.get_selectedItem(); 
```

现在要从组合框中删除上述项目，我们首先需要获取项目集合，然后通过传递我们要删除的项目来调用集合的 remove 方法。这是相同的代码片段：

```
if(comboItem)
        { 
            combo.trackChanges();
            combo.get_items().remove(comboItem);
            combo.commitChanges();
        } 
```

这是从组合框中删除项目的另一个示例 - 这次我们按名称搜索项目：

```
var combo = $find("<%= RadComboBox1.ClientID %>");
var items = combo.get_items();
var comboItem = combo.findItemByText("Paris");
combo.trackChanges();
items.remove(comboItem); 
combo.commitChanges(); 
```

这是 ComboBox 客户端 API 的文档（免责声明：我是 Telerik 的一部分）：

[http://www.telerik.com/help/aspnet-ajax/combobox-client-side-radcomboboxitemcollection.html](http://www.telerik.com/help/aspnet-ajax/combobox-client-side-radcomboboxitemcollection.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-01-21T06:34:09.107

这将从下拉列表中删除所有项目。

var combo2 = $find('<%= drp_Year.ClientID%>');
combo2.get_items().clear()

[https://a2zcode.com/Removing-Items-from-Telerik-Drop-down-list-using-jQuery](https://a2zcode.com/Removing-Items-from-Telerik-Drop-down-list-using-jQuery)

# android - 无法在 Ubuntu 11.10 上启动 Android 模拟器 - 确保正确设置 SDK 目录

> ID：12113452
> 
> 赞同：1
> 
> 时间：2012-08-24T16:41:25.243
> 
> 标签：android, eclipse, android-emulator, ubuntu-11.10

我刚刚在 Ubuntu 11.10 上为 Android 开发配置了 eclipse。
当我尝试启动模拟器时，它会显示以下错误。

![在此处输入图像描述](../Images/008249914e9d79834e95aa02443c7610.png)

控制台说：

```
[2012-08-24 22:15:12 - Test two] Android Launch!
[2012-08-24 22:15:12 - Test two] adb is running normally.
[2012-08-24 22:15:12 - Test two] Performing com.project.test.two.MainActivity activity launch
[2012-08-24 22:15:12 - Test two] Automatic Target Mode: launching new emulator with compatible AVD 'avd14'
[2012-08-24 22:15:12 - Test two] Launching a new emulator with Virtual Device 'avd14'
[2012-08-24 22:15:12 - Test two] Launch canceled! 
```

我还安装了**ARM EABI v7a 系统映像**API 级别 14 (4.0)
SDK 平台，还按照 SDK 管理器中的说明安装了 Google API 和示例 SDK。

Android SDK 工具：20.0.3
Android SDK platform-tools 14

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-11T14:04:03.390

在您的终端中运行此命令 chmod +x /sdk/tools/android 它对我来说适用于同样的问题。尝试这个。

# javascript - 确定变量中的元素数

> ID：12113462
> 
> 赞同：0
> 
> 时间：2012-08-24T16:42:06.877
> 
> 标签：javascript, jquery

如果我有一个包含一些 html 标签的 js 变量，我如何确定变量内的标签数量？像这样的东西：

```
contents = "<p>something</p><p>something else</p>";
$(contents).find("p").length > 2; 
```

基本上，我正在做一个`$(".someClass").each()`并遍历一堆元素 - 当我遇到一个`<p>`标签时，我将它放入带有 .html() 的变量中，现在我需要知道变量内部的内容以做出另一个决定，但我的方法以上不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T16:44:21.883

更改`.find`为`.filter`。

`.find`搜索孩子，但在你的字符串中，所有`<p>`标签都是父母，它们不是任何东西的孩子。

# java - 扩展 AndroidTestCase 时缺少文件，TestCase 工作正常

> ID：12113463
> 
> 赞同：0
> 
> 时间：2012-08-24T16:42:21.237
> 
> 标签：java, android, junit, android-testing

我有一个 Android 测试项目，它将几个文件写入 sdcard，其层次结构为：

```
appresults
 |
 +--- gen
 |
 +--- results 
```

如果我让我的 Test.java 文件扩展`AndroidTestCase`，我的测试将正确运行，但是当我这样做时`adb pull`，一些文件将丢失，即结果目录中的任何内容。奇怪的是，gen 目录中的文件会涓涓细流进来。也就是说，我会做得到`adb pull`4，然后再次运行它，得到 8，依此类推，直到它们都出现。

但是，如果我让我的 Test.java 文件扩展`TestCase`，`adb pull`会发现所有文件都没有问题。

我`tearDown()`无所事事地认为`super.tearDown()`可能是`AndroidTestCase`场景中的差异，但这并没有帮助。

我在测试方法的最后添加了日志，查询我缺少的文件的名称、大小和最后修改时间，据我所知，它返回了适当的值，直到我的测试运行的最后一秒，该文件是当下。

我还注意到`AndroidTestCase`做了一个额外的`testAndroidTestCaseSetupProperly`，但从[我所看到](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/test/AndroidTestCase.java#AndroidTestCase)的，所有这些都是确保上下文不为空：

```
public void  [More ...] testAndroidTestCaseSetupProperly() {
     assertNotNull("Context is null. setContext should be called before tests are run",
             mContext);
 } 
```

所以我想我的问题是，是否会`AndroidTestCase`为`Android 4.0.3.`您清理文件？如果是这样，为什么它会清理一些文件而不清理其他文件？

* * *

根据请求，下面是显示我在做什么的代码：

```
File myPath = new File("some path");
FileOutputStream fos = new FileOutputStream(myPath);
OutputStreamWriter out = new OutputStreamWriter(fos, "UTF-8");
out.append("abcde");
out.close();
if (myPath.exists()) {
    Log.w(TAG, "Name: " + myPath.getAbsoluteFilePath());
    Log.w(TAG, "Size: " + myPath.length());
} 
```

该代码将返回两个警告，例如：

`Name: some path`和`Size: 5`

表明a）文件是在正确的位置创建的，并且b）大小正确，写入成功。但是一旦我的测试退出，bam，`adb pull`那个目录上就没有输出了。（结果一）

# javascript - 在 Knockout.js 模型中创建项目之间的关系

> ID：12113465
> 
> 赞同：1
> 
> 时间：2012-08-24T16:42:30.503
> 
> 标签：javascript, knockout.js

**jsFiddle**：http: [//jsfiddle.net/brandondurham/g3exx/](http://jsfiddle.net/brandondurham/g3exx/)

**如何在我的模型中创建各种 observableArrays 之间的关系？**例如，在我的模型中，我有一个`cartItems`数组，该数组中的每个项目都有一个嵌套`itemFreebies`数组和一个`itemType`属性。客户只有在他们的购物车中有订阅时`"itemType" : "subscription"`（

创建这些类型的条件关系的最佳方法是什么？

这是我在模型中使用的对象：

```
{
    "cartItems" : [
        {
            "itemName" : "Product 1",
            "itemDesc" : "Product 1 description",
            "itemType" : "subscription",
            "itemPrice" : 299,
            "itemFreebies" : false
        }, {
            "itemName" : "Product 2",
            "itemDesc" : "Product 2 description",
            "itemType" : "desktop",
            "itemPrice" : 4499,
            "itemFreebies" : [{
                "freebieName" : "Product 2 freebie",
                "freebieDesc" : "Product 2 freebie description",
                "freebieOriginalPrice" : 99
            }]
        }, {
            "itemName" : "Product 3",
            "itemDesc" : "Product 3 description",
            "itemType" : "desktop",
            "itemPrice" : 8999,
            "itemFreebies" : [{
                "freebieName" : "Product 3 freebie",
                "freebieDesc" : "Product 3 freebie description",
                "freebieOriginalPrice" : 99
            }]
        }, {
            "itemName" : "Product 4",
            "itemDesc" : "Product 4 description",
            "itemType" : "desktop",
            "itemPrice" : 99,
            "itemFreebies" : [{
                "freebieName" : "Product 4 freebie",
                "freebieDesc" : "Product 4 freebie description",
                "freebieOriginalPrice" : 99
            }]
        }, {
            "itemName" : "Product 5",
            "itemDesc" : "Product 5 description",
            "itemType" : "webfont",
            "itemPrice" : 49,
            "itemFreebies" : false
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:56:18.347

我会从这样的事情开始：

```
$(function () {
    ​var CartViewModel = {
        var self = this;

        self.cartItems = ko.observableArray([]);

        self.eligibleForFreebies = ko.computed(function() {
            return ko.utils.arrayFirst(self.cartItems(), function(cartItem) {
                // I forgot the () after itemType in the original post
                return (cartItem.itemType() === 'subscription');
            });
            // Note: ko.utils.arrayFirst will either return the item in 
            //      question, or it will return undefined or null… 
            //      I forget which, but either will result in 
            //      eligibleForFreebies evaluating to false
        });
    };

    var Product = function() {
        var self = this;

        self.itemName = ko.observable();
        self.itemDesc = ko.observable();
        self.itemType = ko.observable();
        self.itemPrice = ko.observable();
        self.itemFreebies = ko.observableArray([]);
    };

    var Freebie = function() {
        var self = this;

        self.freebieName = ko.observable();
        self.freebieDesc = ko.observable();
        self.freebieOriginalPrice = ko.observable();
    }

    ko.applyBindings(new CartViewModel());
    // load data
}); 
```

​</p>

将产品加载到 CartViewModel 中的 cartItems observableArray 中。

依赖的 observable (ko.computed) 值`eligibleForFreebies`将决定是否允许免费赠品。

当购物车不符合条件时，您甚至可能不需要从产品中删除免费赠品 - 只需检查`eligibleForFreebies`并从显示、发票等中包含或排除赠品。（这可能会让您省去检索的麻烦）用户添加订阅后的免费赠品，但我想这取决于您的情况。）

希望这有助于您开始使用此功能，但如果您有任何问题，请告诉我。

**更新：**我[分叉了你的小提琴](http://jsfiddle.net/yUpWe/29/)并稍微修改了你的代码......好吧，我主要是移动它，但我确实添加了一些功能。

请注意，如果您从购物车中删除订阅项目，所有免费赠品都会从购物车显示中消失——但我没有从对象中删除它们！

如果一个人添加了一种将订阅项目重新添加到购物车的方法，那么免费赠品就会重新出现。

有机会时请看一下，如果您需要我解释任何事情，请告诉我。

# perl - Perl- 从 txt 文件中提取每一行并存储到不同的变量中

> ID：12113466
> 
> 赞同：1
> 
> 时间：2012-08-24T16:42:31.307
> 
> 标签：perl

我使用 perl 脚本读取了一个 txt 文件，但我想知道如何使用模式匹配将 txt 文件中的每一行存储到 perl 脚本中的不同变量中。我可以使用 ~^>gi 匹配一行，但它使用 >gi 显示 txt 文件中的两行（即第 1 行和第 3 行），我还想将两个单独的 DNA 序列读入不同的变量。考虑下面我的例子。

文件.txt

```
 >gi102939
 GATCTATC
 >gi123453
 CATCGACA 
```

perl 脚本：

```
#!/usr/local/bin/perl

open (MYFILE, 'file.txt');

@array = <MYFILE>;
($first, $second, $third, $fourth, $fifth) = @array;
chomp $first, $second, $third, $fourth, $fifth;
print "Contents:\n @array";

 if (@array =~ /^>gi/) 
 {  
   print "$first";
 }

close (MYFILE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:49:47.557

假设`>gi..`在输入中是唯一的，填充一个散列，其中每个键与一个序列相关联：

```
#!/usr/bin/perl    
use warnings;
use strict;
my %hash;
my $last;
while (<DATA>) {
  chomp;
  if (/^>gi/) {
    $last = $_; 
  } else {
    $hash{$last} = $_; 
  }
}
foreach my $k (keys %hash) {
  print "$k => $hash{$k}\n";
}
__DATA__

>gi102939
GATCTATC
>gi123453
CATCGACA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:53:13.743

请*始终* `use strict`在程序的顶部，并在第一次`use warnings`使用时声明您的变量`my`。当您寻求帮助时，这尤其适用，因为这样做经常会发现可能被忽略的简单问题。

就目前而言，您的程序会将文件读入`@array`并打印出来。该测试`if (@array =~ /^>gi/) { ... }`将在数组上强制标量上下文，因此将数组中的元素数量（大概是`5`）与正则表达式模式进行比较并失败。

你到底想达到什么目的？将文件读入数组会将每一行放入不同的标量变量中 - 变量是数组的元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T16:57:31.867

这个单行代码读取数据库并提取一个元素：

```
perl < file.txt -e '@array=<>;chomp @array;%hash=@array;print $hash{">gi102939"}' 
```

结果：

```
GATCTATC 
```

# ios - 图像上的抗锯齿和插值质量 - 图像不显示

> ID：12113476
> 
> 赞同：1
> 
> 时间：2012-08-24T16:42:51.027
> 
> 标签：ios, xcode, uiimage, interpolation, cgcontext

我从互联网上获取我的图像并将其添加到我的 tableView imageView 中。我的工作就像一个魅力，但是当图片太大时，它会变得像素化。因此我实施了插值质量和抗锯齿。但是当我使用其中任何一种方法时，图像都不会显示。我没有收到 0x0 错误或类似的错误。所以我很困惑。

```
UIImage *image_ = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:TableText7]]];
CGSize newSize = CGSizeMake(image_.size.width,image_.size.height);
UIGraphicsBeginImageContext(newSize);
CGContextSetInterpolationQuality(UIGraphicsGetCurrentContext(), kCGInterpolationHigh);
CGContextSetShouldAntialias(UIGraphicsGetCurrentContext(), true); 

image_ = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

[cell.imageView setImage:image_];
[cell setNeedsLayout]; 
```

# sqlite - 如何从数据库中检索android中的特定行

> ID：12113478
> 
> 赞同：1
> 
> 时间：2012-08-24T16:42:59.317
> 
> 标签：sqlite

我正在开发 bmi 计算器应用程序，在这个应用程序中，我将人员的详细信息存储到 sqlite 数据库中。但问题是当我试图使用活动中的搜索按钮获取任何人的记录时。 .帮我更正活动中的代码

在数据库中我使用了以下代码..

```
public Cursor getContact(String candidate) throws SQLException

{

    //db.
Cursor  mCursor =db.query(true,TABLE_NAME,new String[]{CANDIDATE_NAME,CANDIDATE_FATHER,CANDIDATE_HEIGHT,CANDIDATE_WEIGHT,CANDIDATE_BMI},CANDIDATE_NAME+"=?", null, null, null, null, null);

if (mCursor != null) {
    mCursor.moveToFirst();
   }
return mCursor;
}   
} 
```

在检索记录的活动中，我使用了以下代码..

```
try{
dbadapter.open();
EditText et=(EditText)findViewById(R.id.et);
st=et.getEditableText().toString();
//int n=Integer.parseInt(st);
Cursor c=dbadapter.getContact(st);

    //c.moveToFirst();
//TextView tv1=(TextView)findViewById(R.id.tv1);
Toast.makeText(getApplicationContext(),"Name : "+c.getString(0)+"\n" +"Father's Name : "+c.getString(1)+"\n"+"Height : "+c.getString(2)+"\n"+"Weight : "+c.getString(3)+"\n"+"BMI : "+c.getString(4),5000).show();
    //Toast.makeText(getApplicationContext(), "searching", 5000).show();

dbadapter.close(); 
```

活动中的上述代码不起作用请花点时间更正代码并提前感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T14:25:55.433

您似乎缺少 sqlite 查询的参数。在线上：

`Cursor mCursor =db.query(true,TABLE_NAME,new String[]{CANDIDATE_NAME,CANDIDATE_FATHER,CANDIDATE_HEIGHT,CANDIDATE_WEIGHT,CANDIDATE_BMI},CANDIDATE_NAME+"=?", null, null, null, null, null);`

如果方法参数是您的候选名称`null`，则替换第一个。`new String[]{candidate)``candidate`

# c++ - 在 geany for windows7 中使用终端和编译器

> ID：12113481
> 
> 赞同：0
> 
> 时间：2012-08-24T16:43:05.503
> 
> 标签：c++

我们如何将终端和编译器集成到 windows7 中的 geany 消息窗口，以便我可以执行 c++ 程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:19:50.837

我会很快解决这个问题，因为这是一个经常被问到的问题。

首先需要安装编译器（gcc和g++），然后，需要编辑Windows 7的%PATH%环境变量，添加gcc.exe和g++.exe所在的目录即可。而且，瞧。

这是另一个相关的问题：[Geany compile](https://stackoverflow.com/questions/11588806/geany-compiling)

对于您的终端问题，我不知道 VTE 插件是否可用于 Windows。您绝对应该使用它而不是 windows cmd... 通常，执行程序是通过按 F5 完成的。

# sockets - Netty 允许不同程序多次绑定同一个端口

> ID：12113485
> 
> 赞同：7
> 
> 时间：2012-08-24T16:43:16.993
> 
> 标签：sockets, bind, netty

我是套接字编程的菜鸟。也许我在问一个基本问题。请多多包涵。我编写了一个示例 netty 服务器并从控制台启动它。它运行良好。我遇到的问题是，当我从两个控制台窗口运行同一服务器时，我希望其中一个会抛出“地址已在使用”异常。它不这样做，我不明白为什么。请帮忙。

```
 public static void main(String[] args) {
    ChannelFactory cf = new NioServerSocketChannelFactory(Executors.newFixedThreadPool(100), new MemoryAwareThreadPoolExecutor(1000,2048,25096,2,TimeUnit.SECONDS));
    //ChannelFactory cf = new OioServerSocketChannelFactory(Executors.newFixedThreadPool(100), Executors.newCachedThreadPool());

    ServerBootstrap bootstrap = new ServerBootstrap(cf);
    bootstrap.setPipelineFactory(new ChannelPipelineFactory() {

        @Override
        public ChannelPipeline getPipeline() throws Exception {
            return Channels.pipeline(new ChannelHandler("test"));
        }
    });

    bootstrap.setOption("child.keepAlive", true);
    bootstrap.setOption("child.tcpNoDelay", true);      
    bootstrap.setOption("child.reuseAddress", true);
    bootstrap.setOption("child.connectTimeoutMillis", 30000);
    //NEVER bootstrap.setOption("child.readWriteFair", true);
    //bootstrap.setOption("disconnect", true);
    bootstrap.setOption("tcpNoDelay", true);
    bootstrap.setOption("reuseAddress", true);
    bootstrap.setOption("connectTimeoutMillis", 30000);
    bootstrap.setOption("readWriteFair", true);
    bootstrap.bind(new InetSocketAddress(9998));        
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:56:33.960

总结上面的许多评论：

该`bootstrap.setOption("reuseAddress", true);`选项将允许绑定到已绑定的`ip:port`组合。这通常用于在服务器崩溃/被杀死时能够重新启动服务器（因此当套接字仍处于`TIME_WAIT`状态时）。

在 Windows 中，可能有两个完全不同的程序绑定完全相同的`ip:port`. 因此，即使在您的应用程序中，您`bootstrap.setOption("reuseAddress", false);`仍然有可能让另一个应用程序（即恶意）`SO_REUSEADDR`成功绑定到您的`ip:port`.

有关更多详细信息，请参见此处：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms740621 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740621(v=vs.85).aspx)

# iphone - 访问表格视图中的所有单元格（Xcode、iPhone）

> ID：12113489
> 
> 赞同：0
> 
> 时间：2012-08-24T16:43:45.090
> 
> 标签：iphone, xcode, uitableview

我使用带有按钮的自定义单元格。在编辑模式下，我需要按钮消失。我在编辑状态更改时调用此方法：

```
-(void)setButtonsVisibility:(BOOL)visibility {
    UIButton *currButton;
    for (int i = 0; i <= [array count] - 1; i++) {
        currButton = (UIButton *)[_tableView viewWithTag:10000+i];
        if (currButton) {
            [currButton setAlpha:visibility];
        }
    }
} 
```

它工作得很好。但是这种方法不适用于现在不可见的单元格。例如，当表格中的单元格超过 10 个时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:20:14.383

如果您正确地重用单元格，那么内存中唯一存在的 UITableViewCell 将是可见的 10 个。

最简单的解决方案是向实例添加一个`BOOL`标志`UITableViewDataSource`，指示是显示还是隐藏按钮。然后可见的 ~10 将由您现有的方法正确更新，并且在`tableView:cellForRowAtIndexPath:`滚动后将调用的 中，您可以将按钮上的 alpha 属性设置为标志的值。

# java - 将文件内容存储到数组中

> ID：12113490
> 
> 赞同：0
> 
> 时间：2012-08-24T16:43:46.423
> 
> 标签：java, arrays

我的刽子手程序有问题。我真的认为我需要做的超出了我对 java 的理解。这是我的代码

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.FileNotFoundException;
import java.util.Scanner;
import java.util.Random;

public class HangmanProject
{
    public static void main(String[] args) throws FileNotFoundException
    {
        String scoreKeeper; // to keep track of score
        int guessesLeft; // to keep track of guesses remaining
        String[] wordList = new String[25];
        final Random generator = new Random();
        Scanner keyboard = new Scanner(System.in); // to read user's input
        System.out.println("Welcome to Nick Carfagno's Hangman Project!");
        // Create a scanner to read the secret words file
        Scanner wordScan = null;
        try
        {
            wordScan = new Scanner(new BufferedReader(new FileReader("words.txt")));
            while (wordScan.hasNext())
            {
            }
        }
        finally
        {
            if (wordScan != null)
            {
                wordScan.close();
            }
        }
        // get random word from array
        class pickRand
        {
            public String get(String[] wordList)
            {
                int rnd = generator.nextInt(wordList.length);
                return wordList[rnd];
            }
        }
        System.out.println(wordList);
    }
} 
```

我能够让程序读取文件然后打印到屏幕上，但我不知道如何将文件中的单词存储到数组中。我根本没有进步，所以请尝试尽可能彻底。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:48:28.680

1）到目前为止，您所拥有的看起来还不错：）

2）由于您不确切知道您将拥有多少或几个单词，所以您不需要“数组”。使用“ArrayList”可能会更好。数组是“固定的”。列表是“变量”。

3）对于您阅读的每个“单词”，只需将“.add（）”它添加到您的数组列表中

瞧！完毕。

这是一个完整的例子：

*   [http://www.daniweb.com/software-development/java/threads/311569/readingwriting-arraylist-fromto-file#](http://www.daniweb.com/software-development/java/threads/311569/readingwriting-arraylist-fromto-file#)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:51:24.097

您需要将读取的行保存在一个`String`对象中并将其分配给数组的某个字段。例如：

```
wordList[0] = myString; 
```

这会将值分配给`myString`数组的第一个字段。

# javascript - Backbone.js ModelBinder 将默认事件更改为 keyup

> ID：12113492
> 
> 赞同：1
> 
> 时间：2012-08-24T16:43:59.830
> 
> 标签：javascript, events, backbone.js, observer-pattern

在我的 Backbone.js 应用程序的开发过程中 - 我注意到我的视图中有很多样板代码，所以我决定搜索一个 Model Binder 库，

最好的选择似乎是： [Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)

...但问题是它不允许我从默认的“模糊”事件切换到内容可编辑输入的“keyup”。

我试图修改库的源代码，但它有点忽略了我从“模糊”到内容可编辑字段的“keyup”的 2 次更改，并且仍然退回到“模糊”事件。

有没有人遇到过类似的问题，或者可以帮助我解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:14:31.533

您在源代码中的哪个位置进行了更改？

我已尝试编辑此[提交](https://github.com/Survos/Backbone.ModelBinder/commit/0b2eef74c78c6483bb0f251b62ec98dbd87d0628)中看到的两行，并且可以正常工作...

```
 _bindViewToModel:function () {
        $(this._rootEl).delegate('', 'change keyup', this._onElChanged);
        // The change event doesn't work properly for contenteditable elements - but blur does
        $(this._rootEl).delegate('[contenteditable]', 'blur keyup', this._onElChanged);
    },

    _unbindViewToModel: function(){
        if(this._rootEl){
            $(this._rootEl).undelegate('', 'change keyup', this._onElChanged);
            $(this._rootEl).undelegate('[contenteditable]', 'blur keyup', this._onElChanged);
        }
    }, 
```

# numpy - ValueError 在 SciPy 中取两个稀疏矩阵的点积

> ID：12113498
> 
> 赞同：3
> 
> 时间：2012-08-24T16:44:29.310
> 
> 标签：numpy, scipy, sparse-matrix

我试图取两个 lil_matrix 稀疏矩阵的点积。分别为 100,000 x 50,000 和 50,000 x 100,000。

```
from scipy import sparse
a = sparse.lil_matrix((100000, 50000))
b = sparse.lil_matrix((50000, 100000))

c = a.dot(b) 
```

并收到此错误：

```
 File "/usr/lib64/python2.6/site-packages/scipy/sparse/base.py", line 211, in dot
 return self * other
 File "/usr/lib64/python2.6/site-packages/scipy/sparse/base.py", line 247, in __mul__
 return self._mul_sparse_matrix(other)
 File "/usr/lib64/python2.6/site-packages/scipy/sparse/base.py", line 300, in      _mul_sparse_matrix
 return self.tocsr()._mul_sparse_matrix(other)
 File "/usr/lib64/python2.6/site-packages/scipy/sparse/compressed.py", line 290, in _mul_sparse_matrix
 indices = np.empty(nnz, dtype=np.intc)
 ValueError: negative dimensions are not allowed 
```

关于可能发生的事情的任何想法 - 在大约 64GB 内存的机器上运行它，并在执行点时使用大约 13GB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T09:27:42.573

这是一个糟糕的错误消息，但“问题”很简单，就是你得到的矩阵太大（有太多的非零元素，而不是它的维度）。

Scipy 用于`int32`存储`indptr`和`indices`用于稀疏格式。这意味着您的 sparsematrix 不能有更多（大约）2^31 个非零元素。也许您可以将 scipy 中的代码更改为使用`int64`or `uint32`，如果这不仅仅是一个玩具问题。但也许使用稀疏矩阵不是解决这个问题的最佳解决方案？

**编辑：**这在新的 scipy 版本 AFIAK 中得到了解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T11:58:58.593

只是为了添加到@seberg 的答案。

在 github.com/scipy/scipy 上有两个与此相关的问题。

[问题 #1833](https://github.com/scipy/scipy/issues/1833#ref-issue-13651914)（标记为 2013 年 4 月关闭）和[问题 #442](https://github.com/scipy/scipy/pull/442)，由于缺少一些测试等，一些拉取请求尚未合并（2013 年 11 月 - SciPy 版本 0.13.1）。您应该能够将它们拉入您自己的安装和编译支持更大稀疏矩阵的版本。

# c# - 在捕捉视图中更改网格定义

> ID：12113500
> 
> 赞同：0
> 
> 时间：2012-08-24T16:44:52.650
> 
> 标签：c#, xaml, grid, windows-8, microsoft-metro

我的 Windows 8 c#/xaml 应用程序有 3 个大网格，里面有内容。每一个都完全填满了屏幕。这个系统非常适合我的目的，直到用户抢购我的应用程序。

那么是否可以完全更改网格定义，或者将所有文本框、按钮和列表视图拉到另一个“捕捉”网格中？最后一个只是一个想法。

```
private void pageRoot_SizeChanged(object sender, SizeChangedEventArgs e)
    {
        if (ApplicationView.Value == ApplicationViewState.Snapped)
        {
            ????
        }
        else
        {
            Grid1.Width = Windows.UI.Xaml.Window.Current.Bounds.Width;
            Grid2.Width = Windows.UI.Xaml.Window.Current.Bounds.Width;
            Grid3.Width = Windows.UI.Xaml.Window.Current.Bounds.Width;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:59:54.257

这是 MVVM 变得非常方便的场景。通过创建两个单独的视图，每个视图用于捕捉、填充和全屏，您可以相对轻松地在它们之间进行切换。

您的另一个选择是使用新的 FlipView 控件。Contoso Cookbook 示例应用程序中有一个很好的示例，可以在 Windows 8 Dev Camp in a Box 中找到。

[http://bit.ly/win8RCdevcamp](http://bit.ly/win8RCdevcamp)

下面是来自 Contoso 动手实验室的示例代码：

```
<FlipView.ItemTemplate>
    <DataTemplate>
        <UserControl Loaded="StartLayoutUpdates" Unloaded="StopLayoutUpdates">
            <ScrollViewer x:Name="scrollViewer" Style="{StaticResource VerticalScrollViewerStyle}" Grid.Row="1">

                <!-- Vertical StackPanel for item-detail layout -->
                <StackPanel Orientation="Vertical" Margin="20,0,20,0">
                    <StackPanel Orientation="Vertical">
                        <TextBlock FontSize="20" FontWeight="Light" Text="{Binding Title}" TextWrapping="Wrap"/>
                        <Image x:Name="image" Width="260" Margin="0,12,0,40" Stretch="Uniform" Source="{Binding Image}" HorizontalAlignment="Left"/>
                    </StackPanel>
                    <StackPanel Orientation="Vertical">
                        <TextBlock FontSize="20" FontWeight="Light" Text="Ingredients" Margin="0,0,0,16"/>
                        <TextBlock FontSize="16" FontWeight="Light" TextWrapping="Wrap" Text="{Binding Ingredients, Converter={StaticResource ListConverter}}" />
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
        </UserControl>
    </DataTemplate>
</FlipView.ItemTemplate> 
```

如您所见，对于每个 FlipView，都引用了不同的显示状态。我建议您查看动手实验室以更具体地了解您的情况，或者查看包含 FlipView 控件的 HTML 和 XAML 示例的其他示例：http: [//code.msdn.microsoft.com/windowsapps/ FlipView-control-sample-18e434b4](http://code.msdn.microsoft.com/windowsapps/FlipView-control-sample-18e434b4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:22:16.423

在您的场景中，当我检测到对快照的更改并加载具有快照优化体验的页面时，我将导航到不同的页面，而不是尝试动态更新复杂页面的布局。

# android - Android在数据库中获取上下文

> ID：12113505
> 
> 赞同：3
> 
> 时间：2012-08-24T16:45:23.403
> 
> 标签：android, database, android-context

我有一个数据库，我创建了一个`Database`类`private static class DbHelper extends SQLiteOpenHelper`来帮助我管理我的数据库。

这个数据库是从四个不同的活动中访问的。

我有这个`public void onCreate(SQLiteDatabase db)`，它是创建我的数据库表并向这些表添加值的原因。由于程序仅在用户第一次运行应用程序时进入此处，因此我想创建一个`ProgressDialog`.

这就是我所拥有的：

```
Override
public void onCreate(SQLiteDatabase db) {

    ProgressDialog progresso = ProgressDialog.show(context, "Info", "Loading DB" );
    // Code to create the tables and add the values
    progress.dismiss();
} 
```

有2个问题。

第一的：

由于可以从 4 个不同的活动中访问它，我如何获取上下文？制造：

```
Context context = getAplicationContext(); 
```

第二：

为什么我不能使用 strings.xml 中的字符串？我不能这样做：

```
ProgressDialog progresso = ProgressDialog.show(context, getString(R.string.driProgressTitle), getString(R.string.driProgressMessage) ); 
```

**更新**

```
public class Database {
    ProgressDialog progresso;
    private DbHelper DBHelper;
    private final Context Context;
    private SQLiteDatabase BaseDados;

    private static class DbHelper extends SQLiteOpenHelper {

        public DbHelper(Context context) {
            super(context, BD_NAME, null, BD_VERSION);
            // TODO Auto-generated method stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {

        // Whanted to show here the progress dialog
        new loadDB().execute();

        // Creates the table and adds the values

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVesion) {
            db.execSQL("DROP TABLE IF EXISTS MYTABLE");
            onCreate(db);
        }

    }

    public Database(Context c) {
        Context = c;
    }

    public Database open() throws SQLException {
        DBHelper = new DbHelper(Context);
        BaseDados = DBHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        DBHelper.close();
    }

    public Cursor getData(int tipo, long groupId, String query[]) {
        // Performs the querys to my database
    }
    return null;
}

    public class loadDB extends AsyncTask<Void, Void, Integer> {

        @Override
        protected Integer doInBackground(Void... params) {
            progresso = ProgressDialog.show(Context, Context.getString(R.string.ProgressTitle), Context.getString(R.string.ProgressMessage) );
            return 1;
        }

        @Override
        protected void onPostExecute(Integer result) {
            progresso.dismiss();
            super.onPostExecute(result);
        }
    }
} 
```

使用上面的代码，我`No enclosing instance of type Database is accessible. Must qualify the allocation with an enclosing instance of type Database (e.g. x.new A() where x is an instance of Database).`在`new loadDB().execute();`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T17:06:50.983

你不能从构造函数访问上下文吗？

```
SQLiteOpenHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version)

SQLiteOpenHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version, DatabaseErrorHandler errorHandler) 
```

**编辑：**

你的代码：

```
public DbHelper(Context context) {
        super(context, BD_NAME, null, BD_VERSION);
        // TODO Auto-generated method stub
    } 
```

此时您可以访问上下文..您可以执行一些操作，例如添加一个名为 context 的字段，然后执行以下操作：

```
Context context;
public DbHelper(Context context) {
        super(context, BD_NAME, null, BD_VERSION);
        // TODO Auto-generated method stub
        this.context = context;
    } 
```

现在，您可以在课堂上的任何地方访问上下文？假设在 onCreate 之前调用了构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:36:05.350

使用 Loader 从 DB 读取数据。不要用 UI 的东西弄乱背景类

```
onCreateLoader(.. 
   //you can start progress

onLoadFinished(..
   // you can stop it 
```

您还可以从推荐的后台线程读取数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T17:01:02.750

该`onCreate(SQLiteDatabase)`方法仅在您第一次调用`getReadableDatabase()`or时被调用`getWritableDatabase`（即第一次打开时），而不是在应用程序第一次运行时调用（当然，您可以首先通过简单地打开数据库然后关闭它来实现）。

我不确定给它应用程序上下文是否会起作用，因为progressDialog 需要显示在当前运行的活动中。

与其尝试在第一次访问数据库时精确显示进度条，不如让您当前的 Activity 在它访问数据库本身的任何时候显示一个。这样，对数据库的第一次访问就会被定期访问所掩盖。

如果您不想显示所有数据库访问的进度条，那么您可以再次打开和关闭数据库并让您的活动在打开它之前显示一个进度条，并在您关闭它时删除进度条（不做数据库中的任何内容，除了让`onCreate()`运行）。

除非您的数据库结构非常大，否则您可能甚至看不到进度条。创建表不需要很长时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T17:19:20.150

要显示用户进度，您必须在单独的线程中运行您的工作，否则 GUI 将冻结，直到数据库工作完成，并且用户可能会收到*“活动没有响应，强制关闭”*消息。

使用`Application`class 来存储有关是否已创建数据库的全局标志。

任何开始的活动都会检查这个标志，如果数据库没有被初始化，它会创建一个`AsyncTask`，在构造函数中传递 db 和它自己的上下文。`AsyncTask`将有三种方法：

1.  onPreExecute ：在此处显示您的对话框。使对话框不可取消，因此用户无法跳过它。
2.  doInBackground ：这里的数据库构建代码。（调用数据库助手类方法）
3.  onPostExecute ：关闭对话框。现在用户可以与 Activity 交互。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T17:01:54.533

您无法访问应用程序的上下文，因为 SQLiteOpenHelper 不包含这些方法（与 Activity 不同）

我对您的建议是使用 DbHelper 类来设置数据库并管理任何 sql 事务。让它的构造函数获取一个上下文对象，然后在扩展 Activity 的类中创建它的实例，将上下文传递给构造函数。

在活动和 sqlliteOpenHelper 之间放置一个数据访问对象类也是一种很好的做法，它也可以管理数据库对象的打开、关闭和发出事务

# vim - Vim 中有这么多热键 - 那么如何为您的自定义操作选择热键呢？

> ID：12113507
> 
> 赞同：2
> 
> 时间：2012-08-24T16:45:42.187
> 
> 标签：vim

在 Vim 中，您经常需要为您自己的自定义操作分配一个键。但是默认情况下，有很多组合键已经映射了一个动作。当您需要将自定义操作分配给一个时，您如何选择自由组合键？

在这些情况下，我通常会迷路，只是将我的操作分配给自定义命令而不是键，例如 :docoolstuff 而不是简单的按键。

而且，顺便说一句，您是否经常重新映射默认操作以在此组合键上使用自定义操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T16:51:09.923

就个人而言，我将自定义命令绑定到`leader - {key}`. 例如：

```
let mapleader = ','
nnoremap <leader>s       : so $MYVIMRC<CR>
nnoremap <leader>v       : tabe $MYVIMRC<CR> 
```

我可以按在新标签页`,v`中打开。`vimrc`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T17:09:30.130

我使用`F1`-`F12`对我来说足够可靠。这比大多数人需要的钥匙多。较高的键在我的静态设置中，较低的键用于一次性绑定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T13:33:26.563

不要忘记 alt-gr+key，它为您提供了一组全新的字符来绑定。但是，正如公认答案中所建议的那样，mapleader 是最标准的做法。

# ios - 如何制作不启动我的应用程序的 UILocalNotification

> ID：12113508
> 
> 赞同：0
> 
> 时间：2012-08-24T16:45:43.637
> 
> 标签：ios

我正在使用 UILocalNotification 让用户知道一些事情。但是，这是给他的便条，不需要在我的应用程序中执行任何操作。

我设置：

```
localNotification setAlertAction:nil]; 
[localNotification setHasAction: NO]; 
```

因此，它仅显示在主屏幕的顶部。但是，如果用户点击它，我的应用程序就会启动。

有没有办法创建一个本地通知，当它被点击时它不会启动我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T04:57:54.883

如果用户单击本地通知警报，iOS 将启动关联的应用程序。这是处理本地通知的预期行为。我不相信你可以改变它。

# html - 多个表格中的 CSS 定位

> ID：12113518
> 
> 赞同：0
> 
> 时间：2012-08-24T16:46:56.240
> 
> 标签：html, css

我有一堆控件，每行呈现一个（如中继器）。每个控件都呈现自己的表格。所以输出看起来像这样：

```
<div>
    <table><tr><td>Product1</td><td>Produce1 Description 1</td></tr></table>
    <table><tr><td>Product1</td><td>Produce1 Description 1</td></tr></table>
    <table><tr><td>Product1</td><td>Produce1 Description 1</td></tr></table>
</div> 
```

问题是我得到的结果如下所示：

```
Shoes      Shoes Description
Black T-Shirt      Black Medium Sized T-Shirt
Green Jeans    Green Medium sized Jeans 
```

我需要在每个渲染控件上使第一个和第二个表格单元格的大小相同。是否可以在不硬编码显式像素量的情况下做到这一点（因为可以调整窗口大小）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:51:12.013

不要为每一行创建单独的表。将它们合并到一个大表中，只要确保正确关闭它们，行仍然会增量呈现。就像是：

```
<div>
    <table>
    <tr><td>Product1</td><td>Produce1 Description 1</td></tr>
    <tr><td>Product1</td><td>Produce1 Description 1</td></tr>
    <tr><td>Product1</td><td>Produce1 Description 1</td></tr>
    </table>
</div> 
```

另一种方法（可能更简洁）是使用**CSS**表格：

```
<div class = "tablecontainer">
    <div class = "rowcontainer"><div class = "cell">Product 1</div><div class = "cell">Product 1 Description</div></div>
     <div class = "rowcontainer"><div class = "cell">Product 2</div><div class = "cell">Product 2 Description</div></div>
    <div class = "rowcontainer"><div class = "cell">Product 3</div><div class = "cell">Product 3 Description</div></div>
</div> 
```

CSS：

```
.tablecontainer {
    display: table;
}
.rowcontainer {
    display: table-row;
}
.cell {
    display: table-cell;
} 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:03:54.787

这是适用于我的解决方案：

```
<html>
<head>
<style type="text/css">         
    .FirstColumn    
        { 
            width: 40%; 
            display:inline-block;
        }
    .SecondColumn    
        {
            width: 60%; 
            display:inline-block;
        }
</style>
</head>
<body>
    <form id="form1" runat="server">     
        <div style="width:100%">
            <div style="width:100%">
                <span class="FirstColumn">Some long product name.</span><span class="SecondColumn">Product 1 Descriptione.</span>
            </div>
            <div style="width:100%">
                <span class="FirstColumn">Product name.</span><span class="SecondColumn">Product 1 Long Descriptione.</span>
            </div>
            <div style="width:100%">
                <span class="FirstColumn">Product.</span><span class="SecondColumn">Product 1 Suprt Long Descriptione.</span>
            </div>
        </div>  
</body>
</html> 
```

# php - 获取 PhpExcel 中的单元格背景颜色

> ID：12113520
> 
> 赞同：4
> 
> 时间：2012-08-24T16:46:58.763
> 
> 标签：php, phpexcel

我在我的项目中使用 Excel5。我已经尝试过以下代码：

```
$objPHPExcel->getActiveSheet()->getStyle('A1')->getFill()->getStartColor()->getARGB(); 
```

和

```
$objPHPExcel->getActiveSheet()->getStyle('A1')->getFill()->getEndColor()->getARGB(); 
```

但这些代码返回错误的颜色。`getStartColor()`总是返回`FFFFFFFF`and而不是红色`FF000000`。`getEndColor()`

我不知道缺少什么。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T17:42:03.293

setReadDataOnly(TRUE) 表示仅读取单元格中的***数据***，但不读取任何样式...并且由于背景颜色是样式的一部分，因此阅读器在加载文件时将忽略背景颜色...如果填充样式不是加载，然后调用 $objPHPExcel->getActiveSheet()->getStyle('A1')->getFill() 将返回默认填充样式和颜色。

使用 setReadDataOnly(FALSE) 加载文件，您应该会发现它有效

**编辑**

这超出了 PHPExcel 的范围......所有内容都通过 DDE 填充，包括大部分样式，因此底层填充颜色是普通的（由 PHPExcel getFill 颜色调用返回），直到外部可执行文件 TOS.exe 填充数据并相应地设置样式。您唯一的选择是使用 COM，以便在 MS Excel 本身中执行工作簿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:26:51.323

你的第二个代码：

```
$objPHPExcel->getActiveSheet()->getStyle('A1')->getFill()->getEndColor()->getARGB(); 
```

有效，它只返回一个颜色十六进制代码（FF0000）。

RGB = 红色 蓝色 绿色 = xx xx xx

FF0000 实际上是红色的。

# url - 修改轴 web 服务的 wsdl 端口名称或肥皂地址位置

> ID：12113522
> 
> 赞同：0
> 
> 时间：2012-08-24T16:47:04.143
> 
> 标签：url, wsdl, axis2, endpoint

这个问题与axis2 webservice有关。生成的 wsdl 包含以下端口和地址详细信息：

```
<wsdl:service name="ServiceName">
    <wsdl:port name="ServiceNameHttpSoap11Endpoint" binding="ns:ServiceNameSoap11Binding">
    <soap:address location="http://ipaddress/webServiceProject/services/ServiceName.ServiceNameHttpSoap11Endpoint/" /> 
    </wsdl:port>
</wsdl:service> 
```

我的要求是将地址位置编辑为简单的东西（没有 ServiceNameHttpSoap11Endpoint） 是否有任何设置来自定义生成的 wsdl ？我所做的就是右键单击 Eclipse 中的项目并选择“创建 Web 服务”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:22:19.317

您可以将服务端点用作

```
http://ipaddress/webServiceProject/services/ServiceName 
```

这也是对的。但是在 wsdl 中，服务端点以 wsdl 端口结束。两者都是正确的。

# javascript - 将 .live 或 .on 添加到 jquery 函数

> ID：12113523
> 
> 赞同：0
> 
> 时间：2012-08-24T16:47:07.310
> 
> 标签：javascript, jquery

我有一些 JavaScript 可以提取我的购物车中有多少物品并将其放在 span.cartTotal 中以获得更好的样式。我需要代码才能工作，因此它可以立即提取信息，而我无需刷新页面即可查看更新。我假设代码需要添加 jquery .live 或 .on 。任何帮助深表感谢。谢谢

```
$(function(){         
    if ($('#catCartSummary .cartSummaryItem').html() != 'Shopping cart is empty.') {
         var summary = $('#catCartSummary .cartSummaryItem').text().split(" ");
         var total = summary[0];
      $('span.cartTotal').html(total);
    }else{
      $('span.cartTotal').html("0");
    }
}); 
```

更多信息：我添加到购物车类是 .productSubmitInput

我从下面这个动态创建的代码中提取信息。此购物车总数会在 cartSummaryItem 中自动更新。当有人添加到购物车时，我只需要我的新样式总数来更新它。我尝试了以下建议，但它们似乎不起作用。我可能只是添加了一些错误的东西。

```
<td class="cartSummaryItem">
1 item(s), Total: $10.95 
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:52:47.720

评论说什么，基本上

也 - 使用 .on 而不是 .live，因为 .live 已被弃用

像这样的东西：

```
function updateTotals() {
 if ($('#catCartSummary .cartSummaryItem').html() != 'Shopping cart is empty.') {
         var summary = $('#catCartSummary .cartSummaryItem').text().split(" ");
         var total = summary[0];
      $('span.cartTotal').html(total);
    }else{
      $('span.cartTotal').html("0");
    }
}

$(function(){
  updateTotals(); // <-- initial load update

  $('some_selector').on('click',function(){

    // do stuff like adding items to cart or w/e...

    updateTotals();

  });
}); 
```

# jquery - jQuery Mobile + Backbone 点击事件触发两次

> ID：12113533
> 
> 赞同：4
> 
> 时间：2012-08-24T16:47:45.033
> 
> 标签：jquery, jquery-mobile, backbone.js, touch-event

这是我在视图中定义事件的地方：

```
events : {
            "tap #exerciseProgressBarContainer" : 'progressBarClick'
        }, 
```

这是行动：

```
 progressBarClick : function() {
        // start?
        if(this.curWorkoutExercise.isTimed() && !this.curExerciseStartTime) {
            HTMLHelper.endGlow(this.$('#exerciseProgressBarContainer .progressBar.overlay'));
            this.startExerciseProgressTimer();
        }
        // done?
        else {
            this.stopExerciseProgressTimer();

            // save the log
            this.addCurExerciseLog();

            this.startBreak();
            this.nextAction();
        }
    }, 
```

基本上，在第一次点击时，用户启动进度计时器，在启动后，另一个点击完成。我的 iPhone 和我的 Android 上发生的事情是 tap 事件触发**两次**，使进度条的开始和停止同时进行。任何想法为什么会发生这种情况以及如何解决它？注意：我已经尝试过`tap`使用`vclick`.

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T19:24:40.907

我最终使用 `e.stopPropagation()` 和 停止了事件传播`e.preventDefault()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T21:24:08.347

为什么不使用“touchend”事件？

顺便提一句。当您的脚本在运行时被触发时失败时，这是一个好主意，以确保它在运行时不会被触发。如果有人因为不耐烦而点击了两次怎么办？

在某些情况下，您可以为此使用 jquery 的函数 .one()。在大多数情况下，您需要更大的灵活性，您可以通过简单的变量检查来解决它。

# c++ - 按值传递的结构，在 C -> C++ 回调函数 (gcc 4.1) 期间损坏

> ID：12113536
> 
> 赞同：1
> 
> 时间：2012-08-24T16:48:03.080
> 
> 标签：c++, c, linux, gcc, callback

场景是这样的。我看到一个结构在按值传递到回调函数时被损坏，从 C API 到 C++ 一个（通过静态方法）。

库 A：基于 C 的 API，通过 gcc 构建 库 B：基于 C++ 的 API，通过 g++ 构建

库 A 构建为带有 -fPIC 的静态库。库 B 构建为共享库，链接库 A，也使用 -fPIC 构建。

在库 A 中定义的是一个结构：

```
typedef struct doomed_struct
{
    uint32_t field1;
    uint32_t field2;
    CHILD_STRUCT1 field3;
    CHILD_STRUCT2 field3;
} DOOMED_STRUCT; 
```

和一个回调函数：

```
typedef void (_CALLBACK_FUNC *FUNCTION)(uint32_t arg1, uint8_t arg2,
    uint8_t arg3, DOOMED_STRUCT arg4); 
```

C++ API 在类中定义了一个静态方法，并将其交给 C API 进行回调。当这个回调被调用时，简单的类型化 arg1,2,3 可以很好地完成它，但是结构中的字段是垃圾，并且每次执行都会改变。

我也尝试将 C++ API 的函数更改为`extern "C"`静态函数，但没有运气。

如果我在 C API 中存根一个 C 函数并调用它只是为了测试，那么该结构将被很好地复制而不会损坏。

令人沮丧的部分？这一切都适用于 Linux 和 QNX 上的 MSVC8/9/10、gcc 4.4.x（32 和 64 位）。几年后回到 gcc 4.1，这会弹出。

如果我更改回调函数以通过指针而不是副本传递结构，它工作正常！唉，C API 有 ABI 限制，不能修改。

它闻起来像是某种调用约定或结构布局问题，但我不知道要为这样的事情转动什么旋钮。总体而言，该结构为 16 个字节，因此它不会对我产生堆栈问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:30:45.827

这似乎与优化级别有关。代码正在使用 -O0 构建并且失败，现在使用 -O1 它可以工作。没有兴趣深入挖掘！

# jquery - 怎么打电话？当我在 1 页中有 2 个不同形式的相同元素名称时

> ID：12113538
> 
> 赞同：1
> 
> 时间：2012-08-24T16:48:06.503
> 
> 标签：jquery

这是情况。

1.  我在 1 页中有 2 个表格（表格 A、表格 B）
2.  两种形式都有一个使用相同名称='ClientID'的输入元素（基于数据库动态生成。
3.  到目前为止，我可以使用下面的 jquery 代码来形成不同的形式。

    ```
    $("form[name='FormA']").submit(function(){
        alert("FormA");
    });
    $("form[name='FormB']").submit(function(){
        alert("FormB");
    }); 
    ```

4.  所以现在在这两种形式下都有一个输入元素，比如

    ```
    <input type='text' name='ClientID' value=''> 
    ```

5.  现在我如何调用 FormA ClientID 或 FormB ClientID ？就像是 ...

    ```
    $("form[name='FormA']").submit(function(){
        $(this + ":input[name='ClientID']).val(); ???
    }); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:50:08.520

```
$("form[name='FormA']").submit(function(){
    $("input[name='ClientID']", this).val();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:50:25.813

例如，使用[`find`](http://api.jquery.com/find/)方法：

```
$("form[name='FormA']").submit(function() {
    var value = $(this).find("input[name='ClientID']").val();
}); 
```

# bash - bash，用另一个变量替换变量的一部分

> ID：12113540
> 
> 赞同：3
> 
> 时间：2012-08-24T16:48:09.133
> 
> 标签：bash, substitution

```
#!/bin/bash

SUNDAY_MENU=面包
MONDAY_MENU=苹果

今天=星期一

ECHO "I want ${${TODAY}_MENU}" # 不起作用，替换错误

ECHO "I want ${`echo $TODAY`_MENU}" # 不起作用，替换错误

```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T16:52:33.673

像这样使用[变量间接](http://mywiki.wooledge.org/BashFAQ/006#Indirection)：

```
varname=${TODAY}_MENU
echo ${!varname} 
```

但是，如果您使用的是 Bash 4 或更高版本，则最好使用[关联数组](http://mywiki.wooledge.org/BashFAQ/006#Associative_Arrays)：

```
menu=([sunday]=bread [monday]=apples)
echo ${menu[$TODAY]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:49:28.733

我使用 eval 函数

```
#!/bin/bash

SUNDAY_MENU=BREAD
MONDAY_MENU=APPLES

TODAY=MONDAY

eval TODAY_MENU=\$\{${TODAY}_MENU\}

echo "I want ${TODAY_MENU}" 
```

# css - 浮动中心内容，左侧固定徽标

> ID：12113546
> 
> 赞同：0
> 
> 时间：2012-08-24T16:48:39.203
> 
> 标签：css

对不起，只是无法得到这个'

这里：[http](http://www.crownoilfield.com/) : //www.crownoilfield.com/ 它看起来如我所愿，除了 1040 像素以下的浏览器窗口，顶部徽标浮动在公司名称下方。

```
<div id="top_wide">
   <div id="crownlogo"><img name="crown_logo6p32" src="images/crown_logo6p32.gif" >
   </div>
   <div id="top">
      <div id="logo"> <img src="images/crown_oilfield_svc_4.png" ></div>

#top_wide {
color:#474327;
    font-size:36px;
}
#crownlogo {
float:left;
padding:0px;
padding-left:5px;
display: table-cell;
}
#crownlogo img {
margin:0;
    }   
#top {
    position:relative;
height:82px; 
width:1040px;
background-repeat:no-repeat;
margin-left:auto;
margin-right:auto;
display: table-cell;
vertical-align:middle;
display: inline-block;
display: table;
}
#logo {
width:620px;
float:left;
color:#474327;
display: table-cell;
vertical-align:middle;
font-size:xx-large;
margin-top:20px;
margin-left:-77px; 
```

}

谢谢，编

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:02:13.723

尝试这个：

```
#top {
    position: relative;
    height: 82px;
    width: 1040px;
    background-repeat: no-repeat;
    display: block;
    margin-left: 165px;
    clear: right;
}
#logo {
    width: 620px;
    float: left;
    color: #474327;
    vertical-align: middle;
    font-size: xx-large;
    margin-top: 20px;
} 
```

# ios - 网页加载需要几秒钟的时间 即使预加载设置为“无”，标签仍然存在

> ID：12113547
> 
> 赞同：1
> 
> 时间：2012-08-24T16:48:39.807
> 
> 标签：ios, html, uiwebview

如果我在 iOS 的 UIWebView 中加载一个网页，其中包含一些将 src 设置为外部页面的标签，那么页面加载大约需要 3-5 秒。如果我删除音频标签，那么它几乎会立即加载。

同样，如果 src 设置为 file:// 则它会立即加载，但如果设置为 http:// 则有很长的延迟。

问题是我尝试添加 preload="none" 但它没有任何区别，如果浏览器正在进行某种网络访问，不应该将 preload 设置为 none 已经禁用它？

（就影响加载时间而言，预加载的设置没有区别）。

有人知道我可以用来消除延迟的任何解决方法吗？

# wpf - 如何将两种以上的样式应用于 wpf 中的一个控件？

> ID：12113548
> 
> 赞同：0
> 
> 时间：2012-08-24T16:48:40.057
> 
> 标签：wpf, xaml

```
<Window.Resources>
<Style x:Key="Style_1" TargetType="{x:Type Button}">
    <Setter Property="Background" Value="Green"/>
</Style>
<Style x:Key="Style_2" TargetType="{x:Type Button}">
    <Setter Property="Foreground" Value="White"/>
</Style>
<Style x:Key="Style_3" TargetType="{x:Type Button}">
    <Setter Property="BorderBrush" Value="Red"/>
</Style> 
```

```
<Grid x:Name="LayoutRoot">
    <Button Content="MultyStyles" Margin="160,136,248,222"/> 
```

现在我想将以上**三种样式**应用到一个控件中。我可以将两种样式应用于一个控件，如下所示。

```
<Window.Resources>
<Style x:Key="Style_1" TargetType="{x:Type Button}">
    <Setter Property="Background" Value="Green"/>
</Style>
<Style x:Key="Style_2" TargetType="{x:Type Button}" BasedOn="{StaticResource Style_1}">
    <Setter Property="Foreground" Value="White"/>
</Style>
<Style x:Key="Style_3" TargetType="{x:Type Button}">
    <Setter Property="BorderBrush" Value="Red"/>
</Style> 
```

```
<Grid x:Name="LayoutRoot">
    <Button Content="MultyStyles" Margin="160,136,248,222" Style="{StaticResource Style_2}"/>
</Grid> 
```

但我不知道将两种以上的样式应用于一个控件。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:29:00.863

您只能使用已经使用过的 BasedOn 逻辑来执行此操作。作为一个选项，如果在您的项目中有意义，您可以使用触发器来更改样式。

# ruby-on-rails - 运行 Rails 服务器或 Node 服务器时看不到任何内容

> ID：12113550
> 
> 赞同：0
> 
> 时间：2012-08-24T16:48:45.467
> 
> 标签：ruby-on-rails, apache, node.js

我遇到了一个大问题，我可以运行我的 Rails 或 Node 服务器，但是当我查看浏览器时，Chrome 告诉我无法访问 localhost 页面。

我尝试修改 C://Windows/System32/drivers/etc/hosts 中的主机文件

我已将评论删除到：127.0.0.1 localhost ::1 localhost

但是，当这些行在 Apache 的注释中起作用时，什么也没有发生，但 Rails 或 Node 却没有。

我没有任何代理，我尝试了不同的端口，我不知道还能做什么。

我会很感激任何建议

# ios - 与多个开发人员进行代码签名

> ID：12113551
> 
> 赞同：6
> 
> 时间：2012-08-24T16:48:49.167
> 
> 标签：ios, certificate, push-notification

因此，我正在与其他一些开发人员合作开发一个启用了推送通知的 iOS 应用程序。我们有一个支持推送的配置文件，我们每个人都有自己的开发人员证书来签署代码。据我所知，所有标准的东西。

我们遇到的问题是，当您想在手机上运行应用程序时，Xcode 要求您在项目和/或目标设置（在代码签名身份下）中选择一个开发证书。如果我选择我的开发证书并将更改检查到 git，那么它将无法在其他任何人的开发环境中运行，因为他们的钥匙串中没有我的证书。所以每个人都在不断地更改项目文件，以便它可以与他们的证书一起使用。

有没有办法解决这个问题？我意识到有自动配置文件选择选项，但这不适用于推送通知。如果您尝试得到错误

```
Failed to obtain push notification token: Error Domain=NSCocoaErrorDomain Code=3000
"no valid 'aps-environment' entitlement string found for application" 
```

当手机尝试注册以接收其推送令牌时。

这肯定已经解决了。这是如何运作的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T17:01:39.910

为每个开发人员制作单独的构建配置并推送一次，然后让每个开发人员创建自己的方案来使用他们的构建设置。方案不会进入项目文件夹，也不会被 git 弄乱。

这是一个分步指南：

1.  创建“调试”构建配置的副本，根据需要命名： ![重复调试配置](../Images/5793b5782d29ddf5ec8c861a74295ce0.png)

2.  为新配置设置所需的代码签名设置： ![设置代码签名](../Images/2604bfd3790c0ccf25ce1a716791996f.png)

3.  *（此时您可以提交/推送您的更改，以下步骤不会影响项目文件）*创建一个新方案，根据需要命名：
    ![创建新方案](../Images/651203ee362c1a0ce99308fc6053abcd.png)

4.  为“测试”选择您的构建配置（和/或任何其他情况，只需为它们添加新配置）： ![选择您的配置](../Images/6a032037d9de60708c1fee53ba5f46b6.png)

5.  赚几百万。

# mysql - MySQL 使用 ON 子句连接和存储表

> ID：12113552
> 
> 赞同：0
> 
> 时间：2012-08-24T16:48:53.727
> 
> 标签：mysql, inner-join

尝试在 PID 上连接存储在数据库中的两个表，并将新表存储在新表中，如下所示。

```
CREATE TABLE mod_table_INPUT_TARGET 
SELECT * 
FROM mod_table_DMRF 
INNER JOIN mod_table_2 
    ON mod_table_DMRF.tDMRF_ACE_ID = mod_table_2.t2_ACE_ID; 
```

> 错误 1005 (HY000): 无法创建表 'py_db.mod_table_INPUT_TARGET' (errno: 139)

我不明白mysql错误。所有列在两个表中都有不同的名称。

编辑：我想创建一个新表 mod_table_INPUT_TARGET，它是通过加入 mod_table_2 和 mod_table_DMRF 制作的，加入 ACE_ID。我正在使用innodb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:27:06.240

我的列太多，超出了行内存限制。由于减少到最重要的列，我可以运行该语句。

# google-app-engine - Google App Engine HRD 迁移 - 数据读取不返回任何内容

> ID：12113554
> 
> 赞同：0
> 
> 时间：2012-08-24T16:49:09.243
> 
> 标签：google-app-engine, python-2.7

按照说明从 GAE 应用程序从主/从迁移到高复制数据存储 (HRD) 后，应用程序没有返回任何数据存储读取。我可以使用“数据存储查看器”查看数据并且它们在那里（迁移成功）。我没有更改任何代码。只是想知道我是否需要设置或配置任何数据存储读取发生。我在开发机器上的“日志控制台”中没有看到任何错误，在服务器的“日志”中也没有看到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:18:36.593

几天后问题自行解决。现在应用程序正在返回正确的数据。这可能只是迁移的一个小故障。我有另一个 GAE 应用程序卡在迁移过程中。在 SO 上搜索，我发现其他遇到同样问题的人。

# django - django评分应用，负分

> ID：12113561
> 
> 赞同：1
> 
> 时间：2012-08-24T16:49:37.253
> 
> 标签：django, django-models, django-apps

# 模型.py

```
class Restaurant(models.Model)
    food_rating = RatingField(range=2, weight=5,can_change_vote = True,allow_delete = True,allow_anonymous = True)
    service_rating = RatingField(range=2, weight=5,can_change_vote = True,allow_delete = True,allow_anonymous = True)
    ambience_ratiing = RatingField(range=2, weight=5,can_change_vote = True,allow_delete = True,allow_anonymous = True) 
```

# 查看.py代码

```
r = Restaurant.objects.get(pk=1)
r.food_rating.add(score = -1 , user = request.user , ip_address =request.META.get('HTTP_REFERER'))
print r.food_rating.score 
```

# 错误

```
djangoratings.exceptions.InvalidRating: -1 is not a valid choice for food_rating 
```

# 怀疑

我的 food_rating 字段有资格获得两个分数，我应该如何更改分数以便我可以实现投票赞成和投票反对功能，在投票赞成时，我应该能够在现有分数上加 1，而在投票反对时我应该可以减去一票，请帮助，提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:59:33.927

问题来自[这个脚本](https://github.com/dcramer/django-ratings/blob/master/djangoratings/fields.py#L141)：

```
if score < 0 or score > self.field.range:
    raise InvalidRating("%s is not a valid choice for %s" % (score, self.field.name)) 
```

简短的回答：将要用于显示的 [-x:y] 间隔转换为代码中的 [-x+x:y+x] 以避免此问题。如果您想要 [-5:5]，请使用 [-5+5:5+5]，即 [0:10]。如果你想要 [-50:100] 然后使用 [-50+50:100+50] = [0:150] 等等......这是一个简单的公式，对于程序员来说应该不是问题；）

长答案：要么你分叉 djangoratings，要么你打开一个问题，要求添加一个启用负面评级的设置......他可能会拒绝它，因为简单的间隔转换解决方法，这里有一些更具体的例子：

```
class Restaurant(models.Model):
    # blabla :)

    ambience_rating = RatingField(range=5, weight=5,can_change_vote = True,allow_delete = True,allow_anonymous = True)

    def get_adjusted_ambiance_rating(self):
        return self.ambience_rating - 3 
```

因此，如果 ambience_rating 为“1”（最低分数），get_adjusted_ambiance_rating() 将返回 -2。

如果 ambience_rating 为“5”（最高分），get_ambiance_rating_with_negative() 将返回 2。

根据您的需要调整此示例/技巧。

您可能应该为所有评级创建一个方法：

```
def get_adjusted_rating(self, which):
    return getattr(self, '%s_rating' % which) - 3 
```

可以这样调用：

```
restaurant.get_adjusted_rating('ambiance')
restaurant.get_adjusted_rating('food')

# etc ... 
```

也许是一个模板过滤器：

```
@register.filter
def get_adjusted_rating(restaurant, which):
    return restaurant.get_adjusted_rating(which) 
```

可以这样使用：

```
{{ restaurant|get_adjusted_rating:"ambiance" }}
{{ restaurant|get_adjusted_rating:"food" }}

{# etc, etc #} 
```

[有关模板过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#)的更多详细信息。

# javascript - 在数组上使用 JavaScript 推送时定义索引

> ID：12113564
> 
> 赞同：1
> 
> 时间：2012-08-24T16:50:02.707
> 
> 标签：javascript

在 JavaScript 中创建新数组时，我通常使用`push`，但我需要定义要添加到数组中的每个对象的索引。

例如：

```
 var array = [];
     _.each(items, function(item) {
        array.push(item);
     }); 
```

有了上面的内容，我没有定义添加到数组中的每个项目的索引。

我试过这个：

```
 var array = [];
     _.each(items, function(item) {
        array[item.id] = item;
     }); 
```

但我最终得到一个空数组。任何帮助都会很棒！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:52:17.993

由于您使用的是 underscore.js，因此您可以将迭代器函数定义为

```
function(item, index){
  ..
} 
```

它会为你填写索引变量。

```
var items = ['a', 'b', 'c'];
_.each(items, function(d, i){ console.log(d, i); });
// a 0
// b 1
// c 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:53:42.253

我们需要查看数据。

具体来说，什么是“item.id”？它是一个整数值吗？

你真的是想使用一个对象，它与哈希表 / 相似 / 吗？

# c++ - C++ 基类如何知道哪个类派生自它？

> ID：12113567
> 
> 赞同：1
> 
> 时间：2012-08-24T16:50:06.310
> 
> 标签：c++, oop

> **可能重复：**
> [找出类及其子类中的类类型](https://stackoverflow.com/questions/12077471/find-out-the-class-type-inside-the-class-and-its-children)

我有一个在基类中调用的方法，出现了一个新的要求，现在在这个方法中我需要知道它是从哪个子类派生的，你们碰巧知道这是否可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T16:54:17.370

这就是虚函数的用途。在派生类中重写虚函数意味着基类不必了解派生类型的任何信息。一般来说，如果基类必须知道派生类，则反映了设计错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:54:00.920

您可以使用[RTTI](http://en.wikipedia.org/wiki/Run-time_type_information)找出答案：

```
DerivedClass *p = dynamic_cast<DerivedClass*>(this);
if (p != null) { ...use p... } 
```

不过，您可能不想这样做。使用基类的重写方法几乎总是有更好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T16:54:27.333

不可能以可靠的方式找出答案！想想在运行时加载的共享库，你会如何应对这样的事情？

采用上述答案中的方法时

```
DerivedClass *p = dynamic_cast<DerivedClass*>(this);
if (p != null) { ...use p... } 
```

对于在编译时不知道派生类的情况，您将无法做出反应，因为您不知道它们的类型。

C++ 没有强烈的反射概念，所以我会回答“不”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T17:44:25.350

这是一个示例来说明 PeteBecker 答案背后的想法：

```
#include <cstdio>    

class Base {

public:

    virtual char const * type () const = 0;

};

class DerivedA : public Base {

public:

    char const * type () const
    {
        return "A";
    }

};

class DerivedB : public Base{

public:

    char const * type () const
    {
        return "B";
    }

};

int main ()
{
    Base * a = new DerivedA();
    Base * b = new DerivedB();

    fprintf(stderr, "a has type '%s'\n", a->type());
    fprintf(stderr, "b has type '%s'\n", b->type()); 

    delete a;
    delete b;

    return 0;
} 
```

看看[http://ideone.com/HaAnY](http://ideone.com/HaAnY)的输出。

# javascript - 如何禁用鼠标滚轮

> ID：12113572
> 
> 赞同：1
> 
> 时间：2012-08-24T16:50:22.207
> 
> 标签：javascript

在某些情况下我需要禁用鼠标滚轮，我的代码适用于 FF 和 Chrome，但它不适用于 IE (7,8,9)

```
$("div").mouseout(function() { 
    document.onmousewheel = null;
    if(window.addEventListener){
        document.removeEventListener('mousewheel', scroll, false);
        document.removeEventListener('DOMMouseScroll', scroll, false);
    }
}); 
```

（不适用于 IE，但我阅读了 1 篇`document.onmousewheel = null;`适用于 IE 的文章）谢谢

# javascript - 将动态键值对传递给函数

> ID：12113575
> 
> 赞同：2
> 
> 时间：2012-08-24T16:50:33.267
> 
> 标签：javascript, backbone.js, eval

我可能忽略了某些东西，或者只是一个菜鸟，但是，我无法将键值对传递给 javascript 函数。

我正在编写一个使用 Backbone.View 和 Backbone.Paginator.clientPager 集合的过滤器模块。我向 clientPager 添加了一个名为 whereExpanded() 的函数，该函数在不修改/渲染任何内容的情况下搜索整个集合。

```
Backbone.Paginator.clientPager.prototype.whereExpanded = function(attrs) {
  return _.filter(this.origModels, function(model) {
    var key;
    for (key in attrs) {
      if (attrs[key] !== model.get(key)) {
        return false;
      }
  });
}; 
```

如您所见，它获取`attrs`变量并对其进行循环。我希望能够将键值对传递给它，但是键和值必须是动态的。

```
collection.whereExpanded(filterByField, filterByValue) 
```

`filterByField`是我希望过滤的 Backbone.Model 的属性，是我要过滤`filterByValue`的属性的值。我已经尝试过使用 `eval()`，但我似乎也无法让它发挥作用。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T17:48:14.473

你不需要`eval`这个，你可以用更好的方式构建一个对象：

```
var attrs = { };
attrs[filterByField] = filterByValue; 
```

只需一点点努力，您就可以让您的函数以各种不同的方式被调用：

```
whereExpanded({ k1: v1, k2: v2 });
whereExpanded('k1', v1);
whereExpanded('k1', v1, 'k2', v2); 
```

你只需要用这样[`arguments`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/arguments)的东西来解析自己：

```
argv  = [].slice.call(arguments);
attrs = {};
if(argv.length == 1 && _(argv[0]).isObject()) {
    attrs = argv[0];
}
else if(argv.length % 2 == 0) {
    for(var i = 0; i < argv.length; i += 2) {
        attrs[argv[i]] = argv[i + 1];
    }
}
else {
    throw 'Bad argument list';
} 
```

`attrs`这将为您留下您`_.filter`所期望的键/值对。

参数解析演示：http: [//jsfiddle.net/ambiguous/e5kkc/](http://jsfiddle.net/ambiguous/e5kkc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:42:08.590

看起来 eval() 最终确实起作用了。我是个菜鸟。

`eval("collection.whereExpanded({" + filterByField + ": " + filterByValue + "})")`

# apache - （.htaccess）如何将波浪号用户站点修改为同一站点内的子文件夹

> ID：12113578
> 
> 赞同：0
> 
> 时间：2012-08-24T16:50:42.713
> 
> 标签：apache, .htaccess, redirect, subdirectory, tilde

我已经在这个问题上工作了几个晚上，但没有运气。我正在尝试使用 (.htaccess) 将 Web 请求从：cobweb.seas.gwu.edu/~mpnl 重写为：cobweb.seas.gwu.edu/~mpnl/joomla

我最新的（.htaccess）文件如下：

```
# turn on Rewrite
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(www.)?cobweb.seas.gwu.edu/~mpnl$
RewriteCond %{REQUEST_URI} !^/joomla/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /joomla/$1 [L]

RewriteRule ^(/)?$ joomla/index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:00:43.670

您不能匹配带有 %{HTTP_HOST} 变量的 URI 路径，只能匹配主机。您需要将该`~mpnl`部分作为重写基础或作为请求 URI 的一部分包含在内：

```
RewriteEngine on

# remove the "/~mpnl" from the end of this line, add a [NC]
RewriteCond %{HTTP_HOST} ^(www.)?cobweb.seas.gwu.edu$ [NC]
# add a "/~mpnl" to here
RewriteCond %{REQUEST_URI} !^/~mpnl/joomla/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# remove the leading slash before "joomla"
RewriteRule ^(.*)$ joomla/$1 [L]

# add a condition to this:
RewriteCond %{REQUEST_URI} !^/~mpnl/joomla/
RewriteRule ^(/)?$ joomla/index.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-30T17:22:10.933

要在 URI 中使用 a[重写](https://httpd.apache.org/docs/current/mod/mod_rewrite.html)请求[`UserDir`](https://httpd.apache.org/docs/trunk/howto/public_html.html)，您必须设置 a [`RewriteBase`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase)：

```
RewriteBase /~mpnl/ 
```

# javascript - jQuery .bind 或 .on 不会绑定到新记录

> ID：12113579
> 
> 赞同：-1
> 
> 时间：2012-08-24T16:50:43.907
> 
> 标签：javascript, jquery

我有一个按钮可以在 div 中创建新记录，每个记录旁边有一个关闭按钮来删除它们。

删除按钮将删除随页面加载的记录。但不适用于新的 .append 记录。

我不明白为什么 .click 事件不会绑定到新记录。

这是一个 jsFiddle 示例[http://jsfiddle.net/ukkpower/kqxsL/1/](http://jsfiddle.net/ukkpower/kqxsL/1/)

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:56:44.863

尝试这个：

```
$(document).on('click','.cart-popup__del',function()
{
    $(this).closest('.cart-popup__list-wrap').remove();

    return false;
}); 
```

**[演示](http://jsfiddle.net/kqxsL/3/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:56:58.317

您不能将`.click`事件用于动态添加的内容，`.on`而是使用它，它是一个[实时事件](http://api.jquery.com/on/)

```
$("recordWrapper").on("click","#closeButton",function(){
    $(this).parent().remove();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T17:01:09.160

```
$(".cart-popup__list-wrap").on('click',".cart-popup__del", function() { 
```

# iphone - 在 iPhone SDK 中串联 stringByAppendingString 是否安全且正确？

> ID：12113583
> 
> 赞同：0
> 
> 时间：2012-08-24T16:50:57.450
> 
> 标签：iphone, objective-c, xcode, nsstring, concatenation

有没有更好的方法来实现在一行中连接多个字符串？或者在这样做时有任何建议。

```
NSString *string1 = @"one";
NSString *string2 = @"one";
NSString *string3 = @"one";
NSString *appendedText = @"";

[appendedText = [[string1 stringByAppendingString: string2] stringByAppendingString: string3] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:14:26.143

安全合适吗？当然。

假设您有：

```
NSString *a = @"hay";
NSString *b = @"bee";
NSString *c = @"see"; 
```

您可以使用`stringByAppendingString:`将它们全部连接起来：

```
cat = [a stringByAppendingString:[b stringByAppendingString:c]]; 
```

您可以使用`stringByAppendingFormat:`将它们全部连接起来：

```
cat = [a stringByAppendingFormat:@"%@%@", b, c]; 
```

您可以使用`stringWithFormat:`：

```
cat = [NSString stringWithFormat:@"%@%@%@", a, b, c]; 
```

您可以将它们放在一个数组中，然后使用`componentsJoinedByString:`：（只是为了好玩，使用[数组文字语法](https://stackoverflow.com/questions/9693647/is-there-some-literal-dictionary-or-array-syntax-in-objective-c)）

```
array = @[ a, b, c];
cat = [array componentsJoinedByString:@""]; 
```

您可以将它们收集在一个可变字符串中：

```
NSMutableString *temp = [a mutableCopy];
[temp appendString:b];
[temp appendString:b];
cat = [temp copy]; // if you want to make sure result is immutable 
```

所有这些方法都可以。这是我选择使用的建议：

1.  使用使您的代码清晰易读的任何一个。
2.  当您的应用程序正常运行时，请使用 Instruments 对其进行分析。
3.  *只有当您发现字符串连接导致性能问题*时，才考虑使用不同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:56:57.797

您可以使用`stringByAppendingFormat:`

`[string1 stringByAppendingFormat:@"%@%@",string2,string3]`

[这](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)是一个参考

你也有[NSMutableString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsmutablestring_Class/Reference/Reference.html)但就语法而言，它看起来差不多

丹尼尔

# grep - 在 grep 中转义空格

> ID：12113586
> 
> 赞同：0
> 
> 时间：2012-08-24T16:51:08.720
> 
> 标签：grep

```
tail /mnt/mysqld_log/mysql_error_log.err  | grep -e `date +'%y%m%d' --date='4 hour ago'` | more

120824 11:25:06 [ERROR] /usr/libexec/mysqld: Table '.zone_assoc' is marked as crashed and should be repaired
120824 18:03:23 [ERROR] /usr/libexec/mysqld: Incorrect key file for table '.ad_zone_assoc.MYI'; try to repair it
120824 18:08:38 [ERROR] /usr/libexec/mysqld: Incorrect key file for table '.ad_zone_assoc.MYI'; try to repair it 
```

以上按预期工作，并显示了今天的结果。但以下不起作用。

```
tail /mnt/mysqld_log/mysql_error_log.err  | grep -e `date +'%y%m%d %k' --date='4 hour ago'` | more

grep: 18: No such file or directory 
```

我试图逃离这个空间，但效果不佳。

```
tail /mnt/mysqld_log/mysql_error_log.err  | grep -e `date +'%y%m%d\ %k' --date='4 hour ago'` | more

grep: Trailing backslash 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:01:05.273

您需要`date`用引号将命令包装起来：

```
tail /mnt/mysqld_log/mysql_error_log.err  | grep -e "`date +'%y%m%d %k' --date='4 hour ago'`" | more 
```

该空间被解释为您尝试从中读取的文件，通过将其括在引号中，这不会发生。

# spring - Spring MVC 根据计算更新字段

> ID：12113591
> 
> 赞同：1
> 
> 时间：2012-08-24T16:51:36.883
> 
> 标签：spring, spring-mvc

我有带有弹簧表单字段的页面。它们是使用命令绑定的。表单中的几个字段需要根据其他字段的计算进行更新。这些字段可以由用户修改。我怎样才能做到这一点？我考虑在网页中使用 onchanged 在模型中触发 java 计算。但我不知道如何从模型访问方法以及如何从页面读取字段。我注意到，当页面提交时，该字段由 setter 更新。如果我想在依赖字段发生变化时计算“实时”，那就太晚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:14:12.560

如果您需要在服务器（java模型）上完成这些计算...我建议使用输入的`onChange`事件，如您所说，使用 AJAX 将值发送到服务器并在那里计算，再次将结果返回给客户端以实时更新 UI .

通过这种方法，您将获得您想知道的“活的东西”。

# java - 如何使用 Hibernate HQL 或 Criteria 内部连接两个表？

> ID：12113592
> 
> 赞同：3
> 
> 时间：2012-08-24T16:51:42.893
> 
> 标签：java, hibernate, hql, hibernate-criteria

```
@Entity
public class doctor {
   @Id
   private int id;
   private String username;
   private String password;
   private String phone;
   private String email;

   @OneToMany(targetEntity = patient.class, cascade = CascadeType.ALL, mappedBy = "doctor")
   @Cascade(value = org.hibernate.annotations.CascadeType.ALL)
   private Collection<patient> patients = new ArrayList<patient>();
}

@Entity
public class patient {
   @Id
   private int id;
   private String name;
   private String surname;
   private String phone;
   private int systolic;
   private int diastolic;

   @ManyToOne
   private doctor doctor;
} 
```

现在我只能通过这个标准检索医生信息：

```
Criteria query = session.createCriteria(doctor.class);
query.createCriteria("patients", "p");
query.add(Restrictions.eq("p.phone", phone));
List<doctor> doctorList = (ArrayList<doctor>) query.list(); 
```

我如何通过给患者电话、他的医生信息和一些患者信息来使用休眠标准进行检索？

> 类似： phone=3423423424 ，然后 answear 是：
> 
> -------------医生信息----------------------------------患者信息（收缩压、舒张压）-----------

```
 1 "Dr dre" sdfssd 243242 drdre@gmail.com  160 170 
```

`160 170`患者信息在哪里

如果没有标准，使用 HQL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:56:28.957

您想要的是以下内容。

使用休眠标准 API：

```
Criteria query = sessionFactory.getCurrentSession().
createCriteria(Patient.class, "patient");
query.setProjection(Projections.projectionList().
add(Projections.property("patient.doctor")).
add(Projections.property("patient.systolic")).
add(Projections.property("patient.diastolic")));
query.add(Restrictions.eq("patient.phone", phone));
return query.list(); 
```

使用 HQL（实际上只是 JPQL）：

```
select p.doctor, p.systolic, p.diastolic from Patient p where p.phone = ?1 
```

您在结果中得到的是 Type 的值`List<Object[]>`。还可以添加`@Cascade(value=CascadeType.SAVE_UPDATE)`到`doctor`您`Patient`班级的字段中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:00:50.583

你有双向映射，所以你可以从每个医生那里得到他的病人，从每个病人那里你可以得到他的医生信息。如果您需要一个包含患者的列表而不是医生列表，只需为患者创建类似的标准。`session.createCriteria(patient.class)`，有必要的限制。你不必急于求成。在大多数情况下，我们不需要急切的获取。如果您需要休眠会话之外的对象，最好初始化（Hibernate.initialize）集合或代理。

顺便说一句，当您命名 java 类时使用驼峰式大小写。这是广泛使用的约定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T17:55:55.960

您的查询仅返回医生信息（而不是患者信息）的原因是因为[对于 OneToMany 关系，FetchType 默认设置为 LAZY](http://docs.oracle.com/javaee/5/api/javax/persistence/OneToMany.html)，如果您将 fetch 类型指定为 EAGER，hibernate 也会返回患者。

```
@OneToMany(targetEntity = patient.class, cascade = CascadeType.ALL, mappedBy = "doctor", fetch = FetchType.EAGER) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T10:55:26.460

如果您使用的是 HibernateTemplate

```
String hql = "from Boo where id in (:listParam)";
String[] params = { "listParam" };
Object[] values = { list};
List boos = getHibernateTemplate().findByNamedParam(hql, params, values); 
```

引用自[春季论坛](http://forum.springsource.org/archive/index.php/t-29104.html)

# php - 仅在字段已填写时显示链接

> ID：12113593
> 
> 赞同：0
> 
> 时间：2012-08-24T16:51:43.823
> 
> 标签：php, wordpress, field, href

在我的 Wordpress 网站的作者页面上，我使用此代码显示作者的 twitter URL：

```
<a href=”http://twitter.com/<?php the_author_meta(‘twitter’); ?>” target=”_blank”&gt;Twitter</a> 
```

这段代码的问题在于，即使用户没有在他们的后端配置文件中填写 Twitter 字段，它仍然会显示链接。我怎样才能让它只在用户填写他们的推特**时才显示？**

我认为一个基本的 PHP IF 语句将是解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:53:45.520

简单的。您可以使用它`get_the_author_meta`来获取它的值`meta`（而不是`the_author_meta`打印值）。然后，将其与`""`(empty string) 进行比较，如果它不为空 - 回显链接，否则....，我们没有其他 - 它只是不会打印链接。

```
<?php if(get_the_author_meta('twitter') != ""): ?>
<a href="http://www.twitter.com/<?php the_author_meta('twitter'); ?>" target="_blank">Twitter</a>
<?php endif; ?> 
```

# android - 广播接收器没有响应

> ID：12113595
> 
> 赞同：0
> 
> 时间：2012-08-24T16:51:52.237
> 
> 标签：android

当广播接收器在 10 秒内未完成执行时，谁能告诉我最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:23:42.850

山姆是对的。所有长时间的处理都不能在 UI(Main) 线程上完成。[以 AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)为例。

# java - mysql的一句话中可能有3个插入？

> ID：12113599
> 
> 赞同：0
> 
> 时间：2012-08-24T16:52:25.583
> 
> 标签：java, mysql, database

我想知道是否可以这样做：

```
INSERT INTO capacitacion .pedido (fecha, total, folio) 
VALUES ( ? , ? , ?) 
AND 
INSERT INTO capacitacion.articulo (precio, descripcion, codigoBarras) 
VALUES (?,?,?) 
AND 
INSERT INTO capacitacion.pedidodetalle (pedidoId, articuloId, cantidad,subtotal) 
VALUES (?,?,?,?); 
```

并且都在一个班级内使用一个cicle？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:54:59.803

不，您必须使用多个插入语句。

但是，您可以使用以下示例使用一个插入语句将多行添加到表中：

```
INSERT INTO table (col1,col2,col3) VALUES(val1,val2,val3),(val4,val5,val6),(val7,val8,val9); 
```

我知道您最终不会使用它，但在这里您可以看到使用`table`上面提供的值将 3 行插入到表“”中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:56:00.537

不，不是那种语法，你必须按照以下方式做一些事情：

```
"INSERT INTO capacitacion .pedido (fecha, total, folio) VALUES ( ? , ? , ?); INSERT INTO capacitacion.articulo (precio, descripcion, codigoBarras) VALUES (?,?,?); INSERT INTO capacitacion.pedidodetalle (pedidoId, articuloId, cantidad,subtotal) VALUES (?,?,?,?);" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T17:14:48.647

使用事务。

伪：

```
transaction.start();
insert 1;
insert 2;
insert 3;
transaction.commit(); 
```

我现在无法访问 NetBeans 来测试这个

# linux - 如何让 Vim 忽略文本内容中的反斜杠？

> ID：12113601
> 
> 赞同：3
> 
> 时间：2012-08-24T16:52:30.827
> 
> 标签：linux, vim, vi

我刚刚开始使用 Vim（并且到目前为止很喜欢它）所以请多多包涵...

我正在编辑一个 web.config 文件，需要删除双引号之间的值。通常我会使用 di" 来完成这项任务，但双引号内的最后一个字符是反斜杠，因此 Vim 似乎将其解释为后续引号的转义字符。

即在字符串中：

```
<add key="MyPath" value="C:\Apps\Site\" /> 
```

将光标设置在“MyPath”上方并点击 di“按预期工作。将其设置在路径值之上不会......是否有一些设置可以处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T16:57:41.700

将光标放在上方`C`并执行`dt"`应该可以。`dt`删除最多（不包括）以下字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T17:14:32.890

您可以清除引号转义字符：

```
:set quoteescape= 
```

从那里开始，`di"`您的第二个属性按预期工作。

# c# - 字典支持重复的多维键？

> ID：12113605
> 
> 赞同：6
> 
> 时间：2012-08-24T16:52:42.790
> 
> 标签：c#, .net, dictionary

我有一个`List<Thing> things`，其中`Thing`需要通过查找两个变量`T1 f1`和的组合来经常检索多个 s `T2 f2`，它们是值类型。我现在这样做的方式很简单`things.Where(t => t.Field1 == f1 && t.Field2 == f2)`。但是，我经常进行很多这样的查找，并且需要一种更有效的方法。

幸运的是，`things`不需要删除或添加元素，所以我想到了在构造时解析列表并添加到`Dictionary<T1, Lookup<T2, Thing>>`. 但是，这感觉很混乱，尤其是在添加解析的情况下。如果我需要查找更多字段，它会变得非常棘手。三个字段看起来像`Dictionary<T1, Dictionary<T2, Lookup<T3, Thing>>>`。

我的下一个想法是制作一个`Lookup<Tuple<T1,T2,T3,...>,Thing>`. 但在这种情况下，我不确定键是否真的有效，因为 Tuple 是一种引用类型。

即使我做了一个`Lookup<ValueType<T1,T2,T3,...>,Thing> things`，查找语句也会`things[new ValueType<T1,T2,T3,...>(f1, f2, f3, ...)]`很丑陋（我仍然不确定我是否可以信任这些键）。

有没有更优雅的解决方案来保持哈希表的性能优势，并且我可以简单地输入类似的东西`IEnumerable<Thing> found = things[f1, f2, f3, ...];`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:11:18.547

`Lookup<Tuple<T1,T2,T3,...>,Thing>`将起作用，因为`Tuple`覆盖`Equals`和`GetHashCode`.

为了使查找语法不那么难看，您可以使用`Tuple.Create`支持类型推断的 which。您的代码变为`things[Tuple.Create(f1, f2, f3, ...)]`. 如果这仍然太难看，那么添加一个将各个值作为参数的辅助方法是微不足道的。

我还考虑为键创建自己的不可变类（或值类型），这样你就可以得到干净的字段名称而不是`ItemX`. 您只需要覆盖`Equals`并`GetHashCode`始终如一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T17:09:03.070

您可以创建多个查找，然后将它们相交以进行搜索。这是一个有点过于简单的例子，但它应该说明这个想法：

```
class Test {
    public string A { get; set; }
    public string B { get; set; }
    public string C { get; set; }
}

var list = new List<Test> {
    new Test {A = "quick", B = "brown", C = "fox"}
,   new Test {A = "jumps", B = "over", C = "the"}
,   new Test {A = "lazy", B = "dog", C = "quick"}
,   new Test {A = "brown", B = "fox", C = "jumps"}
,   new Test {A = "over", B = "the", C = "lazy"}
,   new Test {A = "dog", B = "quick", C = "brown"}
,   new Test {A = "fox", B = "jumps", C = "over"}
,   new Test {A = "the", B = "lazy", C = "dog"}
,   new Test {A = "fox", B = "brown", C = "quick"}
,   new Test {A = "the", B = "over", C = "jumps"}
,   new Test {A = "quick", B = "dog", C = "lazy"}
,   new Test {A = "jums", B = "fox", C = "brown"}
,   new Test {A = "lazy", B = "the", C = "over"}
,   new Test {A = "brown", B = "quick", C = "dog"}
,   new Test {A = "over", B = "jumps", C = "fox"}
,   new Test {A = "dog", B = "lazy", C = "the"}
};
var byA = list.ToLookup(v => v.A);
var byB = list.ToLookup(v => v.B);
var byC = list.ToLookup(v => v.C);
var all = byA["quick"].Intersect(byB["dog"]);
foreach (var test in all) {
    Console.WriteLine("{0} {1} {2}", test.A, test.B, test.C);
}
all = byA["fox"].Intersect(byC["over"]);
foreach (var test in all) {
    Console.WriteLine("{0} {1} {2}", test.A, test.B, test.C);
} 
```

这打印

```
quick dog lazy
fox jumps over 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T17:03:10.317

您是否考虑过使用带有某种字段组合的哈希表作为键？我对您的数据集知之甚少，无法说明这是否可行。因为密钥需要是唯一的。但是，由于您没有使用哈希表进行添加或删除，因此在内存中查找的速度大约是您可以获得的最快速度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T17:03:22.733

如果我猜对了，您可以使用`Hashtable`with `Tuple`，例如：

```
 // populate Hastable
        var hash = new Hashtable();            
        var tuple = Tuple.Create("string", 1, 1.0);
        hash.Add(tuple,tuple);

        // search for item you want
        var anotherTuple = Tuple.Create("string", 1, 1.0);
        // result will be tuple declared above
        var result = hash[anotherTuple]; 
```

更复杂的解决方案（如果需要重复键）：

```
public class Thing
{
    public int Value1 { get; set; }

    public double Value2 { get; set; }

    public string Value3 { get; set; }

    // preferable to create own Equals and GetHashCode methods
    public Tuple<int, double>  GetKey()
    {
       // create key on fields you want 
       return Tuple.Create(Value1, Value2);
    }
} 
```

用法

```
 var t1 = new Thing() {Value1 = 1, Value2 = 1.0, Value3 = "something"};
 var t2 = new Thing() {Value1 = 1, Value2 = 2.0, Value3 = "something"};
 var hash = new [] { t1, t2 }.ToLookup(item => item.GetKey());

 var criteria = new Thing() { Value1 = 1, Value2 = 2.0, value3 = "bla-bla-bla" };
 var r = hash[criteria.GetKey()]; // will give you t1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T17:12:40.663

Linq Where 或 Dictionary of Dictionaries 可能是你会得到的最漂亮的。但这可能更多是您如何组织数据的问题。

EG 这永远不会是访问人员数据的好方法：

```
people["FirstName"]["LastName"] 
```

这通常会更好，所以尝试想出一个更简单的密钥。

# python - 如何使用 web.py 模块

> ID：12113607
> 
> 赞同：0
> 
> 时间：2012-08-24T10:09:39.957
> 
> 标签：python

嗨，我正在编写简单的 Web 服务器...

这是代码框架。

```
url = ('/comment','HandleComment','/question','HandleQuestion','/post','HandlePost')

class HandleAll:
      .
      .

webApi = web.application(urls, globals())
if __name__ == "__main__":
     webApi.run() 
```

而不是使用 3 个不同的类（HandleComment、HandleQuestion、HandlePost），我想检查 if 语句中调用了哪个 URL

有谁能够帮我..？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T20:15:47.957

它有点违背了使用*web.py*的目的，但当然可以只使用一个处理程序：

```
import web

urls = ('/.*', 'Root')

class Root:
    def GET(self):
        url = web.url()
        if   url == '/comment':  pass
        elif url == '/question': pass
        elif url == '/post':     pass

    def POST(self):
        if web.url() == '/post':
            pass

app = web.application(urls, globals())
if __name__ == "__main__":
     app.run() 
```

如果每个处理程序的类语法不符合您的喜好，也许您应该试一试[Bottle](http://bottlepy.org/docs/dev/)。

# linux - shell中的浮点舍入

> ID：12113612
> 
> 赞同：6
> 
> 时间：2012-08-24T16:53:19.040
> 
> 标签：linux, bash, floating-point

```
$ printf "%0.2f\n" 41.495
41.49
$ printf "%0.2f\n" 41.485
41.49
$ printf "%0.2f\n" 41.475
41.47
$ printf "%0.2f\n" 41.465
41.47
$ printf "%0.2f\n" 41.455
41.46
$ printf "%0.2f\n" 41.445
41.44
$ printf "%0.2f\n" 41.435
41.44
$ printf "%0.2f\n" 41.425
41.42
$ printf "%0.2f\n" 41.415
41.42
$ printf "%0.2f\n" 41.405
41.40 
```

为什么第二位小数为奇数的数字没有正确四舍五入，而偶数却是？此外，.445 永远不会四舍五入有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T17:22:48.983

它与浮点有关，但与双精度无关。

当你写

```
printf "%0.2f\n" 41.495 
```

在您的系统上，`printf`首先舍`41.495`入到最接近的 x87 80 位浮点数 [1]。这是如何运作的？首先将 41.495 写入二进制：

```
b101001.0111 11101011100001010001 11101011100001010001 11101011100001010001 ... 
```

（分开的组无限重复）。现在我们将这个数字四舍五入为 64 位二进制数字：

```
b101001.0111111010111000010100011110101110000101000111101011100001 
```

这是实际由 printf 格式化的数字。用十进制写，就是：

```
41.4949999999999999990285548534529880271293222904205322265625 
```

如您所见，它仅比 41.495 小一点，所以当 printf 将其四舍五入为两位小数时，它会*向下*舍入并被`41.49`打印。

现在看 41.485；在四舍五入到 64 位二进制数字后，我们得到值：

```
41.48500000000000000055511151231257827021181583404541015625 
```

它只比 41.485 大一点，所以 printf*向上*取*整*。

在我的系统上，printf 管理中有一个警告：

> 由于浮点数从 ASCII 转换为浮点然后再转换回来，浮点精度可能会丢失。

* * *

1.  bash 并非在所有操作系统上都使用 x87 格式（事实上，它甚至不是在所有架构上都可用）；在其他一些系统上，这些值将被解释为双精度值（因此四舍五入为 53 位而不是 64 位），结果会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T16:59:35.917

我认为它与[IEEE 双精度浮点](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)类型有关。总而言之，任何十进制数在内部都用指数和分数分量表示，但不是用小数表示，而是用二进制表示。这不是 100% 的解释，文章解释得更好，但基本上浮点数的表示“接近”它们的样子，不一定完全是你输入的内容。因此，四舍五入也会有点奇怪。

阅读维基文章。那应该有帮助。如果您需要精确性，请查看不使用此标准的其他数字表示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T17:26:17.810

您的 shell 或 printf 命令可能正在使用扩展精度浮点，例如 Intel 的 80 位浮点。`printf`直接在某些 shell 中实现，并可作为单独的可执行文件使用，例如在`/usr/bin/printf`.

最接近 41.495 的单精度值（在 IEEE 754 中）是 41.494998931884765625。因此，当文本“41.495”被解释为单精度值时，它正好代表 41.494998931884765625。当这个值被四舍五入到小数点后两位小数时，它是 41.49，因为“499…”是向下四舍五入的。

最接近 41.495 的扩展精度值是 41.4949999999999999990285548534529880271293222904205322265625。因此，当解释文本“41.495”时，它正好代表 41.4949999999999999990285548534529880271293222904205322265625。如果将其四舍五入到小数点后两位小数，则为 41.49。

最接近 41.485 的扩展精度值是 41.48500000000000000055511151231257827021181583404541015625。四舍五入后为 41.49。

最接近 41.475 的扩展精度值是 41.474999999999999998612221219218554324470460414886474609375。四舍五入后为 41.47。

最接近 41.465 的扩展精度值是 41.4650000000000000001387778780781445675529539585113525390625。四舍五入后为 41.47。

最接近 41.455 的扩展精度值是 41.45500000000000000166533453693773481063544750213623046875。四舍五入后为 41.46。

最接近 41.445 的扩展精度值是 41.444999999999999999722444243843710864894092082977294921875。四舍五入后为 41.44。

最接近 41.435 的扩展精度值是 41.4350000000000000012490009027033011079765856266021728515625。四舍五入后为 41.44。

最接近 41.425 的扩展精度值是 41.4249999999999999993061106096092771622352302074432373046875。四舍五入后为 41.42。

最接近 41.415 的扩展精度值是 41.415000000000000000832667268468867405317723751068115234375。四舍五入后为 41.42。

最接近 41.405 的扩展精度值是 41.4049999999999999988897769753748434595763683319091796875。四舍五入后为 41.40。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T18:01:43.100

您可以让 bash 准确地向您展示它在内部所做的事情：`printf "%0.20f\n" 41.495`通过反复试验，注册不同表示的下一个最小数字是: `printf "%0.20f\n" 41.495000000000000001`，它实际上比双精度更精确。实际上，这都是 printf 命令。bash 实际上并不理解浮点数。

# javascript - 在 Android 浏览器中将图像渲染为数据流

> ID：12113616
> 
> 赞同：11
> 
> 时间：2012-08-24T16:53:36.147
> 
> 标签：javascript, android, html5-canvas

我组装了一个小型[**测试网络应用程序**](http://picselbocs.com/projects/gc2/)，它将 HTML 画布转换为图像（通过使用 Nihilogic 的*canvas2image* JavaScript 库），然后用生成的图像替换画布并显示一条消息，通知用户触摸（长）该图像以便将其保存到他们的手机中。

我遇到的问题是 Android 的默认 Web 浏览器（“Internet”）不会呈现代表图像的 base64 编码数据流，而是显示一个问号符号。有没有办法解决这个问题？如果是，那么如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T04:21:04.723

使用自定义 ContentProvider 并覆盖 openFile() 以将流作为 Tempfile 返回。

您可以使用 URI 作为 html A 标签中的 src。

```
<a src="Example://file"></a> 
```

```
public class ExampleProvider extends ContentProvider {

    @Override
    public ParcelFileDescriptor openFile(Uri uri, String mode) throws FileNotFoundException {         
        //Get your bitmap
        Bitmap bmp = BitmapFactory.decodeResource(getContext().getResources(), R.drawable.file_example);
        File tempFile = null;
        try {
            //Create the tempfile form a stream
            tempFile = File.createTempFile("tempfile", ".thumb", getContext().getCacheDir());
            BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream(tempFile));
            bmp.compress(Bitmap.CompressFormat.JPEG, 100, out);
            out.close();
            if(mode.equals("r")) {
              return ParcelFileDescriptor.open(tempFile, ParcelFileDescriptor.MODE_READ_ONLY);
            }
        }
        catch(IOException e)  {
            LOGGER.error("Couldn't generate temp file for thumb view, guid:" + guid, e);
        }
        finally {
            if(tempFile != null {
                //The unix filesystem automatically deletes the file once all handles are gone
                tempFile.delete();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:29:36.593

基于@goldenparrot 图像的评论可以看到

```
<img src="data:image/png;base64,BASE64_STRING_HERE" /> 
```

（以及建议的 css 背景图像）当加载页面时已经存在 base64 数据时。但是，当动态输入完全相同的数据字符串时，由于某种原因，它不起作用。即使是带有 base64 数据的静态加载图像也存在问题：它不会以任何方式对长按做出反应，因此无法下载。我使用的是安卓 2.3.6。

编辑：您也可以尝试添加额外的下载链接

```
<a href="data:application/octet-stream;base64,BASE64_STRING_HERE">download file</a> 
```

但这对我不起作用。Android 只是将该文件的内容显示为文本。普通桌面网络浏览器确实打开了“下载文件”对话框，但没有建议该文件的任何扩展名，因此用户必须手动添加它。

另请参阅[浏览器/HTML 强制从 src="data:image/jpeg;base64..." 下载图像](https://stackoverflow.com/questions/10473932/browser-html-force-download-of-image-from-src-dataimage-jpegbase64)

我的测试 html 页面是[http://kuitsi.bitbucket.org/stackoverflow12113616.html](http://kuitsi.bitbucket.org/stackoverflow12113616.html)

# android - 包含长文本视图时，滚动视图在 ics (android 4.0) 上非常慢

> ID：12113623
> 
> 赞同：4
> 
> 时间：2012-08-24T16:54:04.117
> 
> 标签：android, textview, scrollview

这是我的问题，我正在开发一个新闻应用程序，我使用滚动视图包装一个文本视图来显示新闻的内容。但是我发现当文本视图很长时，android 4.0 ics 上的滚动非常慢，并且文本越长，滚动越慢。在 android 2.3 设备上，事情进展得和预期一样快。

我不知道这是否真的是一个系统错误，因为我[在 android 项目上发现了类似的问题](http://code.google.com/p/android/issues/detail?id=22514)

这是我的布局：

```
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ScrollView
        android:id="@id/lst_news_details"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/list_background"
        android:fadingEdge="none"
        android:gravity="center" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="10dp"
                android:layout_marginLeft="15dp"
                android:layout_marginRight="15dp"
                android:layout_marginTop="10dp"
                android:orientation="vertical" >

                <TextView
                    android:id="@id/tv_news_details_title"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    style="@style/Detail_Title"/>

                <TextView
                    android:id="@id/tv_news_details_category"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    style="@style/Detail_Category"/>

                <TextView
                    android:id="@id/tv_news_details_created_at"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="10dp"
                    style="@style/Detail_Time"/>

                <include layout="@layout/detail_horizontal_divideline" />

                <ImageView
                    android:id="@id/img_news_details_image"
                    style="@style/Detail_Picture"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="6dp"
                    android:layout_gravity="center_horizontal"
                    android:contentDescription="@string/image_contentDescription"/>

                <TextView
                    android:id="@id/tv_news_details_context"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="10dp"
                    android:layout_gravity="center_horizontal"
                    style="@style/Detail_Content"/>

            </LinearLayout>

            <View
                android:layout_width="match_parent"
                android:layout_height="10dip" />

        </LinearLayout>

    </ScrollView>

     <!-- actionbar shadow -->
    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/action_bar_shadow"
        >
    </LinearLayout>

</FrameLayout> 
```

还有我的 style.xml

```
<style name="Detail_Title">
     <item name="android:textColor">@color/list_item_title</item>
     <item name="android:textSize">18sp</item>
     <item name="android:shadowColor">@color/list_item_text_shadow</item>
     <item name="android:shadowDx">0</item>
     <item name="android:shadowDy">2</item>
     <item name="android:shadowRadius">2</item>
 </style>

 <style name="Detail_Category">
     <item name="android:textColor">@color/list_item_category</item>
     <item name="android:textSize">14sp</item>
     <item name="android:shadowColor">@color/list_item_text_shadow</item>
     <item name="android:shadowDx">0</item>
     <item name="android:shadowDy">2</item>
     <item name="android:shadowRadius">2</item>
 </style>

 <style name="Detail_Time">
     <item name="android:textColor">@color/list_item_time</item>
     <item name="android:textSize">14sp</item>
     <item name="android:shadowColor">@color/list_item_text_shadow</item>
     <item name="android:shadowDx">0</item>
     <item name="android:shadowDy">2</item>
     <item name="android:shadowRadius">2</item>
 </style>

 <style name="Detail_Content">
     <item name="android:textColor">@color/detail_content_text</item>
     <item name="android:textSize">16sp</item>
     <item name="android:autoLink">all</item>
     <item name="android:shadowColor">@color/list_item_text_shadow</item>
     <item name="android:shadowDx">0</item>
     <item name="android:shadowDy">2</item>
     <item name="android:shadowRadius">2</item>
 </style>

 <style name="Detail_Picture">
    <item name="android:layout_gravity">center</item>
    <item name="android:gravity">center</item>
    <item name="android:background">@drawable/image_frame</item>
 </style> 
```

顺便说一句，我已经设置

`android:minSdkVersion="7"` `android:targetSdkVersion="14"`

但是还没有设置硬件加速标志。

有什么解决办法吗？请帮助我，谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T03:00:47.267

好吧，我自己找到了解决方案

只需`android:hardwareAccelerated="false"`在 manifest.xml 中设置

还是很迷茫，等待解释。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T03:39:53.613

请注意，您可以`android:hardwareAccelerated="false"`为特定活动（甚至特定视图）添加如下所示：http: [//developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)如果您想保留其余部分您的应用程序硬件加速。

# mysql - MYSQL - 在具有分组依据的查询中获取特定值的计数

> ID：12113624
> 
> 赞同：0
> 
> 时间：2012-08-24T16:54:08.410
> 
> 标签：mysql, sql

我试图获得一个值出现在列中的次数，但只有在它被分组之后。我会在下面解释——

这个查询让我得到这些结果 -

```
select id_seed, id_campaign, id_chat from messages where id_campaign = 140 group by id_chat;
+------------+-------------+----------------------------------------+
| id_seed    | id_campaign | id_chat                                |
+------------+-------------+----------------------------------------+
| 4102593936 |         140 | 0d60b2a4a79938b07ac39b977a96efc4CCC140 |
| 4102593936 |         140 | 1118cb4436f5e5d03f4805d0b9e8bf3eCCC140 |
| 4075174669 |         140 | 12d59be001fc6d795c2da5f9456b41afCCC140 |
| 4102593936 |         140 | 2032e80ca46bca4a5d97f2da92e9f7b1CCC140 |
| 4102593936 |         140 | a6ab87684aa1a90dff7ea61cf618d3f9CCC140 |
| 4075174669 |         140 | ace48ab48c4409e6307a2dc55856ce72CCC140 |
| 4075174669 |         140 | d09d4cf87e5d8b2c3efcfea1fd94f9eaCCC140 |
| 4102593936 |         140 | d2f5fc4c1d7d9d95cfd4846234f6aad3CCC140 |
| 4102593936 |         140 | d5b6712b51878a2f37e7004bc5b57171CCC140 |
+------------+-------------+----------------------------------------+ 
```

我几乎在这里找到了我要找的东西，但由于某种原因，它没有加在一起。

```
select distinct count(id_seed) as c, id_seed from messages where id_campaign = 140 group by id_chat, id_seed;
+---+------------+
| c | id_seed    |
+---+------------+
| 1 | 4075174669 |
| 5 | 4102593936 |
| 1 | 4102593936 |
| 2 | 4075174669 | 
```

我想在 group by 执行后获取每个值在 id_seed 列中出现的次数。我很接近并且距离很远，但仍然卡住了。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:59:20.917

```
SELECT
    COUNT(*),
    id_seed
FROM
    (
        select 
            id_seed
        from 
            messages 
        where 
            id_campaign = 140 
        group by 
            id_chat
    )
GROUP BY
    id_seed 
```

# perl - 如何添加文本块

> ID：12113627
> 
> 赞同：0
> 
> 时间：2012-08-24T16:54:14.297
> 
> 标签：perl, sed

我正在尝试在看起来相似的巨大文本文件中添加 nagios 服务检查。我想搜索每个主机名（作为模式）并在四行之后附加新的服务检查块。该脚本应该能够在每次出现 host_name 之后附加新的服务检查块。

```
 OR 
```

想在两个连续的行上搜索两个模式，并在文本文件中每次出现时在两个搜索到的模式之间插入下面的文本块。

P1 - notification_options d,r P2 - }

我只知道 sed 的基础知识，任何帮助都将不胜感激。

```
define service{
            use                     new
            host_name               new
            active_checks_enabled   0
            check_freshness         0
            service_description     new
            check_command           new
            check_period            24x7
} 
```

* * *

```
define host{
    use                     linux
    host_name               lotus
    alias                   lotus
    address                 10.1.1.1
    notification_options    d,r
}
define service{
            use                     linux
            host_name               lotus
            active_checks_enabled   0
            check_freshness         0
            service_description     Host Alive
            check_command           check-host-alive
            check_period            24x7
}

define service{
            use                     linux
            host_name               lotus
            active_checks_enabled   0
            check_freshness         0
            service_description     CPU
            check_command           check_cpu!95!100
            check_period            24x7
            notification_options    w,c,r
}

define host{
    use                     linux
    host_name               palm
    alias                   palm
    address                 10.1.1.2
    notification_options    d,r
}
define service{
            use                     linux
            host_name               palm
            active_checks_enabled   0
            check_freshness         0
            service_description     Host Alive
            check_command           checki_host
            check_period            24x7
}

define service{
            use                     linux
            host_name               palm
            active_checks_enabled   0
            check_freshness         0
            service_description     CPU
            check_command           check_cpu!95!100
            check_period            24x7
            notification_options    w,c,r
}

define host{
    use                     linux
    host_name               geeko
    alias                   geeko
    address                 10.1.1.3
    notification_options    d,r
}
define service{
            use                     linux
            host_name               geeko
            active_checks_enabled   0
            check_freshness         0
            service_description     Host Alive
            check_command           check_alive
            check_period            24x7
}

define service{
            use                     linux
            host_name               geeko
            active_checks_enabled   0
            check_freshness         0
            service_description     CPU
            check_command           check_cpu!95!100
            check_period            24x7
            notification_options    w,c,r
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:01:45.523

除非您需要定期执行此操作，否则听起来您确实想在文本编辑器中定义一个宏并使用一些巧妙的搜索和替换技巧，或者，如果您确实需要一遍又一遍地执行此操作，您可能想研究模板处理解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T00:41:53.573

这可能对您有用（GNU sed）：

```
cat <<\! >service.txt
> active_checks_enabled   0
> check_freshness         0
> service_description     Host Alive
> check_command           check-host-alive
> check_period            24x7
> }
> !
sed -i -e '/define host{/,/}/{/define host/h;/use/H;/host_name/H;/}/{G;s/host/service/;r service.txt' -e '}}' huge_text_file.txt 
```

# sql - 在一个查询中平均一列两次

> ID：12113635
> 
> 赞同：0
> 
> 时间：2012-08-24T16:54:34.180
> 
> 标签：sql, tsql

我有一个包含以下内容的表：

```
ID   Node   LoadTime   DateTimeCST   Failed
----------------------------------------- 
```

我正在尝试编写一个返回下表的查询（节点为 DISTINCT）。

```
Node    TodaysAverageLoadTime    HistoricalLoadTime
---------------------------------------------------- 
```

所以，我基本上试图取过去 24 小时的 LoadTime 平均值，然后是 LoadTime 的另一个平均值，该平均值是 LoadTime 表中所有数据的平均值。这是我用来获取今天平均值的查询。

```
SELECT DISTINCT Node, AVG(LoadTime)
FROM dbo.Table
WHERE Failed != 1
AND DATEDIFF(day, DateTimeCST, GETDATE()) = 0 
GROUP BY Node 
```

我需要在此查询中添加什么来平均所有记录的 LoadTime？任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:02:44.057

由于 TodaysAverageLoadTime 和 HistoricalLoadTime 的记录识别标准不同，因此不能在单个查询中完成。但是你可以模拟如下：

```
SELECT 
       Node,
       ISNULL(TodaysAvgLoadTime, 0)
       ISNULL(HistoricalLoadTime, 0)
FROM 
        (
            SELECT 
                 Node, 
                 AVG(LoadTime) 'TodaysAvgLoadTime'
            FROM 
                 dbo.Table
            WHERE 
                 Failed != 1
            AND  DATEDIFF(day, DateTimeCST, GETDATE()) = 0 
            GROUP BY Node
        ) AS A
        FULL OUTER JOIN
        (
            SELECT 
                 Node, 
                 AVG(LoadTime) 'HistoricalLoadTime'
            FROM 
                 dbo.Table
            WHERE 
                 Failed != 1
            GROUP BY Node
        ) AS B
        ON A.Node = B.Node 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:04:03.520

您可以使用多个子查询来获取数据并在它们之间进行连接。所以像：

```
SELECT Node, t1.avg, t2.avg FROM
    (SELECT DISTINCT Node, AVG(LoadTime) AS avg
    FROM dbo.Table, 
    WHERE Failed != 1
    AND DATEDIFF(day, DateTimeCST, GETDATE()) = 0 
    GROUP BY Node) t1, 
    (SELECT DISTINCT Node, AVG(LoadTime) AS avg
    FROM dbo.Table, 
    WHERE Failed != 1
    GROUP BY Node) t2
WHERE t1.node = t2.node 
```

# jquery-ui - 按属性取消元素拖动

> ID：12113638
> 
> 赞同：0
> 
> 时间：2012-08-24T16:54:43.220
> 
> 标签：jquery-ui, jquery-ui-sortable

我需要通过它们的属性来禁用某些元素的拖动。我愿意

```
$( ".main_table tbody" ).sortable({
    start: function(event, ui) {
        var level = ui.item.attr('level')
        $( ".main_table tbody" ).sortable("option", "cancel", '[level!='+level+']');
    }
}); 
```

但它： 1\. 适用`cancel`于`stop`; 2\. 适用`cancel`于所有元素。[http://fiddle.jshell.net/vQL8h/](http://fiddle.jshell.net/vQL8h/)所以我需要在拖动第一行或第二行时禁用 8,9 上的拖动

# c++ - 在类类型向量中引用对象的成员

> ID：12113644
> 
> 赞同：2
> 
> 时间：2012-08-24T16:55:13.540
> 
> 标签：c++, class, vector, reference

好吧，伙计们，这个问题整天困扰着我，我似乎找不到解决方案。我知道这是一个很长的帖子，但我会非常感谢你能提供的任何帮助。我正在开发一个聊天机器人程序，该程序从 .dat 文件中读取以填充关键字库。采用面向对象的方法，我定义了一个名为“Keyword”的类，类定义如下所示：

```
class Keyword
{
public:   
    //_Word holds keyword 
    vector<string> _Word;
    //_Resp holds strings of responses
    vector<string> _Resp;
    //_Antymn holds words that are the opposite to keyword
    vector<string> _Antymn;

    // Constructor
    Keyword()
    {
        // Clears members when new instance created
        _Word.clear();
        _Resp.clear();
        _Antymn.clear();
    }
}; 
```

因此，每次在 .dat 文件中找到新关键字时，都必须创建 class 关键字的新实例。为了存储关键字的所有这些实例，我创建了另一个向量，但这次是关键字类型并将其称为库：

```
typedef vector<Keyword> Lib;
Lib library;// this is the same as saying vector<Keyword> library 
```

现在这是我遇到的问题：在用户输入字符串后，我需要检查该字符串是否包含库中的关键字，即我需要查看 _Word 中的字符串是否出现在用户输入中。从您拥有的向量层次结构中查看它：

```
The top level --> libary //*starting point
                 --> Keyword
                    --> _Word
                      -->"A single string" <-- I want to reference this one
                    --> _Resp
                      -->"Many strings"
                    --> _Antymn
                      -->"Many strings" 
```

呸！我希望这是有道理的。这是我开始写的代码：

```
size_t User::findKeyword(Lib *Library)
{
    size_t found;
    int count = 0;

    for(count = 0; count<Library->size(); count++)
    {
      found = _Input.find(Library->at(count)); // this line needs to reference _Word from each keyword instance within library
      if(found!= string.npos)
        return found;
    }

    return 0;
} 
```

我也尝试使用“operator []”方法，但这似乎也没有达到我想要的效果。有谁有想法吗 ？如果做不到，我会非常惊讶。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:13:29.700

先说一堆问题：

*   在任何命名空间中保留以下划线后跟大写字母开头的标识符
*   构造函数中的`clear()`调用`Keyword`毫无意义，可能对优化有害

为什么是`word_`一个`vector`？我虽然它是一个关键字。

```
struct Keyword
{
    // real words as identifiers, no underscores 
    //anywhere if they are public
    std::string word;
    std::vector<std::string> respones;
    std::vector<std::string> antonym;
};

typedef std::vector<Keyword> Lib;

/// finding a keyword
#include <algorithm>

Lib::iterator findKeyword(const Lib& l, const std::string& x) {
  return std::find_if(begin(l), end(l), 
                      [](const Keyword& kw) { return kw.word == x; })
  // if stuck on non C++11 compiler use a Functor
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T17:09:03.070

您必须将代码更改为：

```
for(count = 0; count<Library->size(); count++)
{
    for(int j = 0; j < Library->at(count)._Word.size(); ++j){
        found = _Input.find(Library->at(count)._Word[j]);
                                              ^^^^^^^^^
        if(found!= string.npos)
             return found;
    }
} 
```

为了访问成员变量并遍历您的字符串向量。`Library->at(count)`是类的对象`Keyword`。我假设这`_Input.find()`需要一个字符串作为参数。

如果您的`Keyword`实例只存储一个关键字，您不妨将其更改为`string _Word`，这样您就不需要第二个循环了。

```
for(count = 0; count<Library->size(); count++)
{
    found = _Input.find(Library->at(count)._Word);
    if(found!= string.npos)
        return found;
} 
```

并强制执行其他评论：您不应`_`在变量名中使用初步的 -underscore，因为它们是由实现保留的。

# dart - 如何通过镜像 API 获取静态方法的具体对象？

> ID：12113647
> 
> 赞同：7
> 
> 时间：2012-08-24T16:56:00.060
> 
> 标签：dart, dart-mirrors

我有这样的事情：

```
class MyClass
{
   static void DoSomething(arg1, arg2){...}
} 
```

通过反射，我可以得到这个类的 ClassMirror。从这一点开始，我将如何获得具体的静态函数以便调用它。

请注意，我尝试使用：

```
ObjectMirror.invoke('DoSomething', [arg1, arg2]); 
```

这最初似乎可以工作，但它不支持将复杂类型作为参数传递，这个静态函数需要一个复杂类型作为它的参数之一。

理想情况下，我想获得代表静态方法的“函数”对象，以便可以直接调用它。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T18:07:30.953

一种。目前的情况是暂时的。计划是镜像 API 将为您使用镜像包装参数。

湾。API 最终可能会支持 getProperty 方法，该方法将为您提供函数对象的 Future。但是，您不会直接获得 Function 对象，因此在这种情况下这并不会产生任何影响。

C。核心思想是 API 从根本上适用于镜像。为了使它更有用，它应该接受非镜像作为输入并将它们包装在镜像中。它总是会返回镜像，并且在某些情况下会返回这些镜像。这样 API 在远程和本地情况下的工作方式相同。

d。了解镜子的资源：

1.  [http://www.bracha.org/mirrors.pdf](http://www.bracha.org/mirrors.pdf)（学术论文，坚持不懈）
2.  [http://www.hpi.uni-potsdam.de/hirschfeld/events/past/media/100105_Bracha_2010_LinguisticReflectionViaMirrors_HPI.mp4（Dart](http://www.hpi.uni-potsdam.de/hirschfeld/events/past/media/100105_Bracha_2010_LinguisticReflectionViaMirrors_HPI.mp4) 之前的视频，讨论了早期的镜像系统）
3.  [http://gbracha.blogspot.com/2010/03/through-looking-glass-darkly.html](http://gbracha.blogspot.com/2010/03/through-looking-glass-darkly.html)（我在镜子上的一篇旧的 pre-dart 博客文章）
4.  [http://www.wirfs-brock.com/allen/posts/228（Allen](http://www.wirfs-brock.com/allen/posts/228) Wirfs-Brock 的博客。Allen 是 90 年代 Smalltalk 的镜像先驱）
5.  [http://www.wirfs-brock.com/allen/posts/245](http://www.wirfs-brock.com/allen/posts/245)

您还可以[搜索我的博客](http://gbracha.blogspot.com/)或[Allen Wirf-Brock 的](http://www.wirfs-brock.com/allen/)有关该主题的帖子。

# c# - 制表符分隔的数据文件上的 Linq2sql 查询

> ID：12113649
> 
> 赞同：0
> 
> 时间：2012-08-24T16:56:11.450
> 
> 标签：c#, linq, tsv

如何在制表符分隔的数据源上使用 Linq2SQL 查询？

我喜欢创建一个通用代码库，其中 2 个 tsv 文件可以包含任意列数，并且一旦将 linq 查询传递给程序，它就会输出结果数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:58:34.577

您不能将 LINQ to SQL 用于与 SQL 服务器数据库进行通信。也许您的意思是一般意义上的 LINQ，在这种情况下，我会引导您访问： http: [//www.codeproject.com/Articles/25133/LINQ-to-CSV-library](http://www.codeproject.com/Articles/25133/LINQ-to-CSV-library)

这在技术上适用于逗号分隔值，但修改它以使用 TSV 应该非常简单。

# php - 将 SQL 数组返回到 div 时出现幻列

> ID：12113650
> 
> 赞同：-1
> 
> 时间：2012-08-24T16:56:12.477
> 
> 标签：php, mysql, foreach, count

我刚刚开始使用 PHP 和 mySQL（现在大约 4 天）并且一直在尝试找到解决这个问题的方法......

我有一组从 mySQL 数据库返回的项目。我让这些流入一组 4 个“ul”列和一类“模型”，它将结果数除以 4 并返回“li”，无法弄清楚为什么我在结尾。我曾尝试将“ul”放入 foreach 语句中，但这也没有返回所需的结果。

谢谢你的帮助。

这是php：

```
<grid>
  <ul class="models">
    <?php

    $c = count($model);

    $s = ($c / 4); // change 4 to the number of columns you want to have.

    $i=1;

    foreach ($model as $models): ?>
      <li>
        <a href="model/?id=<?php htmlout($models['sn']); ?>" class="id<?php htmlout($models['sn']); ?>">
          <div class="<?php htmlout($models['callout']); ?>"></div>
          <div id="description">
             <h2><?php htmlout($models['firstname']); ?> <?php htmlout($models['lastname']); ?>
             </h2>
             <h3><span class="number">40</span> photo sets</h3>
             <h3><span class="number">756</span> images</h3>
             <p><?php htmlout($models['rightstext_left']); ?>
                <?php htmlout($models['firstname']); ?>
                <?php htmlout($models['rightstext_right']); ?>
             </p>
          </div>
       </a>
    </li>
    <?php if($i != 0 && $i % $s == 0)
    {
        ?>
  </ul>
  <ul class="models">
    <?php
    }
    $i++; ?>
    <?php endforeach; ?>
  </ul>
</grid> 
```

的HTML

```
<grid>    
**excluded**
<ul class="models">
<li>
   <a href="model/?id=AZWW5RJE" class="idAZWW5RJE">
   <div class="exclusive"></div>
   <div id="description">
      <h2>Model 19</h2>
      <h3><span class="number">1</span> attribute</h3>
      <h3><span class="number">6</span> attributes</h3>
      <p>textleft name textright</p>
    </div>
   </a>
</li>
<li>
   <a href="model/?id=AZWW5RJE" class="idAZWW5RJE">
   <div class="exclusive"></div>
   <div id="description">
      <h2>Model 19</h2>
      <h3><span class="number">1</span> attribute</h3>
      <h3><span class="number">6</span> attributes</h3>
      <p>textleft name textright</p>
    </div>
   </a>
</li>
<li>
   <a href="model/?id=AZWW5RJE" class="idAZWW5RJE">
   <div class="exclusive"></div>
   <div id="description">
      <h2>Model 19</h2>
      <h3><span class="number">1</span> attribute</h3>
      <h3><span class="number">6</span> attributes</h3>
      <p>textleft name textright</p>
    </div>
   </a>
</li>
<li>
   <a href="model/?id=AZWW5RJE" class="idAZWW5RJE">
   <div class="exclusive"></div>
   <div id="description">
      <h2>Model 19</h2>
      <h3><span class="number">1</span> attribute</h3>
      <h3><span class="number">6</span> attributes</h3>
      <p>textleft name textright</p>
    </div>
   </a>
</li>
<li>
   <a href="model/?id=AZWW5RJE" class="idAZWW5RJE">
   <div class="exclusive"></div>
   <div id="description">
      <h2>Model 19</h2>
      <h3><span class="number">1</span> attribute</h3>
      <h3><span class="number">6</span> attributes</h3>
      <p>textleft name textright</p>
    </div>
   </a>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:52:08.207

我稍微改变了你的逻辑。由于您使用模数，因此从以下开始会更有意义`$i = 0`

当您进行模运算时，您希望确保有一个整数，因此请尝试：

```
$s = ceil($c / 4); 
```

然后在你的中使用它`if`来测试你是否在一个元素的末尾`<ul>`，并确保你没有在最后一次迭代中创建一个：

```
<?php if ($i % $s == $s - 1 && $i != $c - 1) 
```

# objective-c - 您如何找出在 Instruments 中保留对象的原因？

> ID：12113652
> 
> 赞同：15
> 
> 时间：2012-08-24T16:56:21.253
> 
> 标签：objective-c, ios, xcode, memory-management, instruments

我最近将我的 iOS 项目转换为 ARC。其中一个视图控制器没有调用它的 dealloc 方法，也没有根据 Instruments 被释放。

我已经仔细检查了我的所有属性并将适当的属性设置为弱。我还确保将视图控制器作为委托的任何东西都在 viewWillDisappear 上取消设置，但视图仍然保留在内存中。

我是 Instruments 的新手：我怎么知道是什么保留了这种观点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-24T17:50:25.773

好吧，如果您真的被卡住并且程序很复杂（或抽象，在 ARC 的情况下），您可以拿出大炮：

*   打开你的 Xcode 项目
*   选择可执行文件（如果需要）
*   按`cmd+i`（简介）
*   在 Le Wizard 中选择“泄漏”工具（如果需要）
*   按 Return 开始分析
*   锻炼你的应用
*   在仪器中按“停止”
*   验证选择了“分配”工具
*   单击并按住名为“统计”的弹出按钮
*   选择对象列表项
*   在 Objects List 的记录中找到您感兴趣的分配
*   选择该分配/对象
*   单击该分配的表格视图单元格中地址右侧的“详细箭头”
*   现在您可以看到与分配相关的所有事件（分配、空闲、引用计数操作）
*   按下`cmd+shift+e`以获取详细信息
*   浏览此列表中的事件，并找到您寻求的不平衡。

# django - Django：从 ModelForm 中保存用户提交的数据以供管理员审查并在以后提交

> ID：12113654
> 
> 赞同：3
> 
> 时间：2012-08-24T16:56:24.283
> 
> 标签：django, django-forms

我的 Django 站点上有一个表单（使用 ModelForm 制作），用户可以在其中提交一些数据来创建新对象或修改现有对象。但是，这些数据在提交到数据库之前需要由我们的员工审核，有时会在以后批量审核。

我知道我可以`.save(commit=False)`在我的表单处理视图中使用它来返回一个尚未保存到数据库中的对象。但是有没有办法从多个用户提交的内容中收集所有这些对象以供以后查看？理想情况下，我会有一个管理页面，其中包含带有“提交”或“拒绝”按钮的提交摘要列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:22:43.603

没有开箱即用的方法来做到这一点（至少不是内置于 Django），因此您需要自己创建逻辑，这应该非常简单。一些需要考虑的方法：

1.  有第二个模型/表格来保存您的表单，然后为审阅功能创建一个视图，将任何已批准的记录复制到第一个表格中。

2.  避免使用第二个模型/表，并在模型/表中添加一个`approved = BoolField(default=False)`字段。设置`objects`为过滤的[自定义管理](https://docs.djangoproject.com/en/dev/topics/db/managers/)器，`default=True`因此您的其余代码默认情况下只会看到已批准的记录。让第二个经理做相反的事情，即过滤未批准的记录。使用第二个管理器，为审核功能创建一个视图，该视图会翻转`approved`到`True`任何获得批准的内容。

3.  如果使用上述第二种方法，您想使用 Django 的管理站点进行审查，请为您的模型创建一个[代理](https://docs.djangoproject.com/en/dev/topics/db/models/#proxy-models)，该代理默认使用第二个管理器来过滤未批准的记录。然后，您可以使用管理员的内联显示和编辑功能一目了然地查看记录并根据需要单击批准。

# php - PHP中的动态常量？

> ID：12113663
> 
> 赞同：7
> 
> 时间：2012-08-24T16:56:58.093
> 
> 标签：php

有没有办法动态创建类的常量？我知道这听起来有点奇怪，但让我解释一下我想要做什么：

*   我有一个 Enum 类，其属性由静态`const`定义定义
*   这个类扩展了 PHP SplEnum 类
*   我不想在代码中输入这些定义中的每一个，而是让一个静态初始化程序进入数据库并提取枚举值

也许是这样的：

```
class myEnum extends SplEnum {
    public static function init () {
        $myNameValuePair = DB_Functions::get_enum_list();
        foreach ( $myNameValuePair as $name => $value) {
            $const = array ( self , $name );
            $const = $value;
        }
    }
} 
```

我认识到这实际上不起作用，因为它没有设置 CONST 而是设置静态变量。也许我的整个想法都是胡思乱想，并且有更好的技术。无论如何，非常感谢任何实现最终目标的方法。

**更新**

我认为对我的目标更明确一点可能会有所帮助，因为我认为完全有可能我对常量的使用不是一个好的。基本上我想要实现的是枚举列表的典型要求：

1.  **约束函数签名**。我希望能够请求一组值作为函数的输入。例如：

    公共函数 do_something ( ENUM_Types $type ) {}

2.  **简单紧凑**。在代码中使用时允许使用简单而紧凑的语法。例如，使用常量我可能会写一个条件语句，例如：

    if ( $my_var === ENUM_Types::TypeA ) {}

3.  **动态枚举**。我希望通过前端管理这个枚举并存储在数据库中（我正在使用 wordpress 管理屏幕，以防万一有人关心）。在运行时，应该将这个“列表”从数据库中取出，并作为枚举（或实现上述目标的类似结构）提供给代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T21:27:20.093

将您的“枚举”值包装在一个单例中并实现（非静态）魔术`__get`方法：

```
<?php
class DynamicEnums {

  private static $singleton;

  private $enum_values;

  public static function singleton() {
    if (!self::$singleton) {
        self::$singleton = new DynamicEnums();
    }
    return self::$singleton;
  }

  function __construct() {
    $this->enum_values = array( //fetch from somewhere
        'one' => 'two',
        'buckle' => 'my shoe!',
    );
  }

  function __get($name) {
    return $this->enum_values[$name]; //or throw Exception?
  }

  public static function values() {
    return self::singleton()->enum_values; //warning... mutable!
  }
} 
```

对于奖励积分，创建一个返回单例的（非 OO）函数：

```
function DynamicEnums() {
    return DynamicEnums::singleton();
} 
```

“DynamicEnums”的消费者看起来像：

```
echo DynamicEnums::singleton()->one;
echo DynamicEnums()->one;            //can you feel the magic?
print_r(DynamicEnums::values()); 
```

[编辑] 更像枚举。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T22:53:09.010

> 问：有没有办法动态创建类的常量？

答案是“是”，但不要那样做：）

```
class EnumFactory {

   public static function create($class, array $constants) {
       $declaration = '';
       foreach($constants as $name => $value) {
           $declaration .= 'const ' . $name . ' = ' . $value . ';';
       }
       eval("class $class { $declaration }");
   }

}

EnumFactory::create('darkSide', array('FOO' => 1, 'BAR' => 2));
echo darkSide::FOO . ' ' . darkSide::BAR; 
```

* * *

下一个问题...

> 问：约束函数签名。我希望能够请求一组值作为函数的输入。例如：`public function do_something ( ENUM_Types $type ) {}`

根据[手册](http://php.net/manual/en/language.oop5.typehinting.php)，在这种情况下`$type`必须是`ENUM_Types`该类的一个实例。但是对于常量是不可能的（它们不能包含对象）。

但是等等......我们可以使用这样的技巧：

```
class Enum {

    protected static $_constantToClassMap = array();
    protected static function who() { return __CLASS__; }

    public static function registerConstants($constants) {
        $class = static::who();
        foreach ($constants as $name => $value) {
            self::$_constantToClassMap[$class . '_' . $name] = new $class();
        }
    }

    public static function __callStatic($name, $arguments) {
        return self::$_constantToClassMap[static::who() . '_' . $name];
    }

}

class EnumFactory {

    public static function create($class, $constants) {
        $declaration = '';
        foreach($constants as $name => $value) {
            $declaration .= 'const ' . $name . ' = ' . $value . ';';
        }

        eval("class $class extends Enum { $declaration protected static function who() { return __CLASS__; } }");
        $class::registerConstants($constants);
    }

}

EnumFactory::create('darkSide', array('FOO' => 1, 'BAR' => 2));
EnumFactory::create('aaa', array('FOO' => 1, 'BAR' => 2));

echo (aaa::BAR() instanceof aaa) ? 'Yes' : 'No'; // Yes
echo (aaa::BAR() instanceof darkSide) ? 'Yes' : 'No'; // No 
```

之后我们可以使用“类型提示”：

```
function doSomething(darkSide $var) {
    echo 'Bu!';
}

doSomething(darkSide::BAR());
doSomething(aaa::BAR()); 
```

* * *

> 问：简单紧凑。在代码中使用时允许使用简单而紧凑的语法。例如，使用常量我可能会写一个条件语句，例如：`if ( $my_var === ENUM_Types::TypeA ) {}`

您可以以这种形式使用伪常量的值：

```
if (darkSide::FOO === 1) {} 
```

* * *

> 问：动态枚举。我希望通过前端管理这个枚举并存储在数据库中（我正在使用 wordpress 管理屏幕，以防万一有人关心）。在运行时，应该将这个“列表”从数据库中取出，并作为枚举（或实现上述目标的类似结构）提供给代码。

您可以通过将数组传递给来初始化您的枚举`EnumFactory::create($class, $constants)`：

```
EnumFactory::create('darkSide', array('FOO' => 1, 'BAR' => 2)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T16:59:21.853

你可以做类似 Const = $$constant 的事情。然后你可以设置 $contant = 不管。或者您可以使用受保护的属性，因为您希望它是动态的，而常量不是。例子：

```
class Foo {

protected $test = '';

function set($bar){
    $this->test = $bar;
}
function get($bar){
    return $this->test;
}

}

$foobar = new Foo();
$foobar->set('test');
echo $foobar->get('test'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T20:35:16.323

我不推荐它，但 eval() ...请不要。

我修改了自动加载器以自动定义丢失或拼写错误的异常类型。原因：您可以捕获未捕获的异常，但在您的异常类中实例化错字时无法从 PHP_FATAL 中恢复。

# cross-browser - 有没有办法像使用 MacOS 一样在 Windows 上测试网站

> ID：12113664
> 
> 赞同：0
> 
> 时间：2012-08-24T16:56:59.730
> 
> 标签：cross-browser, cross-platform

正如我最近发现的那样，即使在两个操作系统上使用相同的浏览器，网页在 Windows 和 MacOS 中的显示也会不同。有没有可以在PC上模仿MacOS的插件或应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:59:22.443

您可以使用在线工具进行跨浏览器测试。

他们很多。

例如 ：

[http://crossbrowsertesting.com/](http://crossbrowsertesting.com/)（你必须付费）

[http://spoon.net/browsers/](http://spoon.net/browsers/)（现在不适用于 Safari）

[https://browserlab.adobe.com/](https://browserlab.adobe.com/)（需要注册）

免责声明：我不再使用这些网站，我不确定它们是否足够好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:00:38.717

我使用[Adob​​e Browserlab](https://browserlab.adobe.com/en-us/index.html)和[BrowserShots](http://browsershots.org/)。这两项服务都会对您输入的任何面向公众的 URL 进行屏幕截图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T17:04:03.707

试试[https://browserlab.adobe.com/en-us/index.html#](https://browserlab.adobe.com/en-us/index.html#) 一个免费的跨浏览器测试工具

如果这不是您需要的，您可以尝试一些付费服务 [http://www.smashingmagazine.com/2011/08/07/a-dozen-cross-browser-testing-tools/](http://www.smashingmagazine.com/2011/08/07/a-dozen-cross-browser-testing-tools/)

# c# - 有没有一种巧妙的方法来处理这个空对象引用？

> ID：12113671
> 
> 赞同：1
> 
> 时间：2012-08-24T16:58:05.640
> 
> 标签：c#

所以我有一个 Retrieve() 函数，它要么给我一个对象，要么给我一个空值（如果找不到那个对象）。我正在使用带有该对象的布尔属性的 if 语句。它是这样设置的。

```
if(Retrieve(index).IsForm == true) {} 
```

这样做的问题是，如果它没有找到一个对象，它会抛出一个空引用异常。当然，有一些方法可以解决这个问题，但我觉得没有一个是简洁的。有一个尝试...捕获，但是当我期望错误时，这似乎毫无意义。我可以先检查对象是否为空`if(Retrieve(index) != null)`，但这似乎添加了不必要的嵌套。有没有聪明的方法来处理这个？我想过使用空合并运算符，但在这种情况下它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:00:36.673

您可以调用该方法两次：

```
if(Retrieve(index) != null && Retrieve(index).IsForm == true) { } 
```

或者您可以将这些行分开并将结果存储在 if 之前：

```
var result = Retrieve(index);
if(result != null && result.IsForm == true) { } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T17:03:53.237

您可以编写一个`IsForm`函数来为您执行这两项操作：

```
bool IsForm(int index)
{
    var result = Retrieve(index);
    return result != null && result.IsForm;
}

if (IsForm(index))
    ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T17:02:47.713

空对象模式在这里会很有帮助。它使您的调用代码保持干净，但确实添加了一个额外的类。

```
class NullWhatever : Whatever
{
    public NullWhatever() { IsForm = false; } 
}

Whatever Retrieve(...) 
{
     ...
     return new NullWhatever();  // instead of null
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T17:09:42.337

您可以创建一个 Nullable_IsForm 扩展方法。然后你可以检查空条件。

```
public static class RetrieveExtension
{
    public static bool? Nullable_IsForm(this Retrieve retrieved)
    {
        if(retrieved == null)
        {
            return null;
        }
        else
        {
            return retrieved.IsForm;
        }
    }
} 
```

然后在您的代码中，您将根据`bool`值检查它

```
if(Retrieve(index).Nullable_IsForm == true) 
{}
else if (Retrieve(index).Nullable_IsForm == false) 
{}
else if (Retrieve(index).Nullable_IsForm == null ) 
{} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T17:02:06.313

我认为没有更简洁的方法可以做到这一点，不。

我能想到的最短的是：

```
if(Retrieve(index)!=null && Retrieve(index).IsForm == true) {} 
```

但我不喜欢这样，因为它会`Retrieve(index)`多次调用。我会去

```
var foo = Retrieve(index);
if(foo!=null && foo.IsForm == true) {} 
```

但这显然没有做任何聪明或更简洁的事情。它可能比某些替代方案更有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T17:04:29.020

你可以把这两个条件放在同一个`if`：

```
if(Retrieve(index)!= null && Retrieve(index).IsForm == true) {} 
```

由于短路，如果空值检查失败，则不会评估表达式的其余部分。

# cakephp - CakePHP 魔术 findBy 方法进行比较

> ID：12113672
> 
> 赞同：0
> 
> 时间：2012-08-24T16:58:09.170
> 
> 标签：cakephp, php, magic-methods, cakephp-2.2

我们有地块和可以种植到地块中的豆子。

我绝对决心使用以下内容来查找所有者拥有的所有地块，其中包含一个 bean。

$plots = $this->Plot->findAllByOwnerAndBean_id(uid, '> 0');

但是，它给了我 SQL `WHERE`Plot`.`所有者`= '15' AND`Plot `.`bean_id`= '> 0'`

[这表明这可能是不可能](https://stackoverflow.com/questions/8725495/cakephp-2-0-4-findby-magic-methods-with-conditions)的，但我不认为这是确定的。（可能，甚至与 2.2 相关？）它可能是，所以问题有两个方面：

我如何从 findBy 中得到我想要的东西，如果我真的不能，我怎么能避免比以下代码更少的代码，我可以确认这些代码有效？

```
$plots = $this->Plot->find('all', array(
     'conditions' => array(
        'owner'     => uid,
        'bean_id >' => 0
      )
    )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:51:26.343

我不知道如何使用魔术方法（可能与 DboSource::expression() 一起使用，但如果它的用户输入你必须自己清理它）。但是，您可以在模型中创建一个辅助方法。

```
class Plot extends AppModel {

    public function findAllByOwnerAndBeanId($owner, $beanId) {
        return $this->find('all', array(
            'conditions' => array(
                'owner'     => $owner,
                'bean_id >' => $beanId,
             ),
        ));
    }

} 
```

编辑：您可以尝试以下方法，但请注意它未经测试。

```
$ds = $this->Plot->getDataSource();
$plots = $this->Plot->findAllByOwnerAndBean_id($uid, $ds->expression('> ' . intval($userInputtedBeanId))); 
```

可能`Sanitize::escape()`比 intval 更好。

# php - 在 mysql 查询中使用 PHP 表单，Q2

> ID：12113674
> 
> 赞同：-2
> 
> 时间：2012-08-24T16:58:33.317
> 
> 标签：php, mysql, html, forms

继我之前提出的一个问题（得到了非常有帮助的回答 - 谢谢）之后，我有一个后续问题。

我设法将一个表单放入我的页面，该表单成功链接到另一个页面，并过滤了结果。然后我在下面直接添加了另一个表单（作为第二个搜索过滤器），但第二个表单不起作用。代码是：

```
<p style="margin-left:20px;">Search by:<br />
<form action="ordersfiltered.php" method="post">
order_no: <input type="int" name="order_no" />
<input type="Submit" />
</form>
<form action="ordersfiltered_name.php" method="post">
name: <input type="text" name="name" />
<input type="Submit" />
</form></p> 
```

就像我说的，如果我在第一个框中输入 order_no 并单击“提交”，那么我会进入另一个页面，并相应地过滤结果。但是，当我在第二个框中输入名称时，我得到的页面包含所有表格标题等，但没有结果。作为参考，我在“ordersfiltered.php”页面上的相关代码是：

```
$result = mysql_query("SELECT * FROM orders WHERE order_no = " . $_POST["order_no"]); 
```

（注意，我意识到我不应该使用 SELECT * - 它在我要更改的列表中）。这工作正常。

我在“ordersfiltered_name.php”上的代码是：

```
$result = mysql_query("SELECT * FROM orders WHERE name = " . $_POST["name"]); 
```

任何想法为什么第一个有效但第二个无效？

另外 - 如果可能的话，我想修改它添加类似 WHERE name LIKE '%...%' 的内容，以防用户没有输入整个内容。

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:00:39.310

我认为这与它`order_no`是一个数字并且`name`是一个字符串的事实有关。字符串必须用引号括起来。

因此，改变：

```
$result = mysql_query("SELECT * FROM orders WHERE name = " . $_POST["name"]); 
```

至：

```
$name =  mysql_real_escape_string($_POST['name']);
$result = mysql_query("SELECT * FROM orders WHERE name = '". $name ."'"); 
```

您还需要检查`$_POST['name']`没有任何引号。

编辑 1.你总是可以`or die(mysql_error())`在你的`mysql`命令之后使用。然后，您将能够看到这些命令不起作用的原因。

`$_POST[..]`编辑 2.在查询中使用它是非常危险的。您应该首先检查它的值并确保“清理”它。

编辑 3.Another 注意，考虑移动到`PDO`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:04:12.593

您说先前提出的问题有一些有用的答案，尽管您似乎没有使用其中任何一个：[在 mysql 查询中使用 PHP 表单](https://stackoverflow.com/questions/12098031/using-php-forms-in-mysql-queries)（我不会从那里重复所有有效点......）。

也就是说，您缺少已发布变量的引号和转义：

```
$result = mysql_query("SELECT * FROM orders WHERE name = '" . mysql_real_escape_string($_POST["name"])) . "'"; 
```

# vba - MS Access如何在列表框中加粗选择项目

> ID：12113676
> 
> 赞同：0
> 
> 时间：2012-08-24T16:58:35.517
> 
> 标签：vba, ms-access

我需要以粗体显示列表框中的项目，这些项目在数据库中至少有一个子项目。如何使列表框中的项目以粗体显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:06:19.393

我建议您改用子表单。列表框没有那种级别的控制。

# ios - Master Detail项目的Popover大师......如何让它不显示？

> ID：12113677
> 
> 赞同：0
> 
> 时间：2012-08-24T16:58:41.180
> 
> 标签：ios, uipopovercontroller, master-detail

我正在使用 Master 详细项目的 Master 作为弹出框，但是在我向详细视图添加子视图的一种情况下，我不希望用户能够滑出 masterview 弹出框，无论如何要隐藏或暂时禁用弹出框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:08:07.600

您可以检查您的弹出框是否可见，并在收到将显示弹出框的通知时将其关闭：

```
- (void)splitViewController:(UISplitViewController*)svc
         popoverController:(UIPopoverController*)pc 
 willPresentViewController:(UIViewController *)aViewController{
  if ([pc isPopoverVisible]) {
     [pc dismissPopoverAnimated:YES];
  }
} 
```

启动 iOS5，如果您在委托控制器（通常是详细视图控制器）中实现 splitViewController:shouldHideViewController:inOrientation 方法，您可以防止主控制器显示在弹出窗口上：

```
- (BOOL)splitViewController:(UISplitViewController *)svc
   shouldHideViewController:(UIViewController *)vc
              inOrientation:(UIInterfaceOrientation)orientation
{
  return NO;
} 
```

我相信最后一个解决方案更多的是您正在查看的内容。

# iphone - 验证应用程序上传时 Xcode 4.4 中的 SSL 连接错误

> ID：12113678
> 
> 赞同：1
> 
> 时间：2012-08-24T16:59:00.947
> 
> 标签：iphone, ssl, upload, itunes, xcode4.4

我无法通过 Xcode Organizer 的应用程序加载器将应用程序上传到 iTunes。在验证期间，我在验证期间收到“SSL 连接错误”并且上传失败。

我试过了，重置 safari，重新启动。重启路由器。现在我难住了。

我知道我的 ISP 最近升级了我的宽带链接，它应该正在经历一个稳定期。但我无法上传任何大小的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:35:29.953

这个问题不是由 Xcode 引起的。这是我的宽带网络在上传时丢弃数据包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T11:44:45.010

重新启动 Xcode 对我有用。我还听到人们重新启动他们的 WiFi。

# qt - 配置 Qt Creator 以在 Windows 上使用 Boost

> ID：12113679
> 
> 赞同：12
> 
> 时间：2012-08-24T16:59:08.420
> 
> 标签：qt, boost, qt-creator

我想在 Windows 上的 Qt Creator 中使用 C++ 的 boost。我按照以下说明进行操作：

[http://www.boost.org/doc/libs/1_51_0/doc/html/bbv2/installation.html](http://www.boost.org/doc/libs/1_51_0/doc/html/bbv2/installation.html)

所以我跑了`.\bootstrap.bat`然后`./b2 install --prefix=C:\Boost`我添加`C:\Boost\bin`到你的`PATH`环境变量中。

我想让 Qt Creator 现在“看到”提升，但我在网络上找不到任何资源。有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-22T18:42:39.287

好吧，我终于设法在 Windows 7 中使用 Qt Creator 2.7.1、Qt 4.8.4 和 Boost 1.54编译了一些在[Boost Filesystem 教程中找到的 Boost Filesystem 示例。](http://www.boost.org/doc/libs/1_54_0/libs/filesystem/doc/tutorial.html)这是我的 qmake 项目文件。

```
TEMPLATE = app
CONFIG += console
CONFIG -= app_bundle
CONFIG -= qt

SOURCES += main.cpp

win32 {
    INCLUDEPATH += C:/boost/include/boost-1_54
    LIBS += -LC:/boost/lib \
            -lboost_serialization-mgw46-mt-d-1_54 \
            -lboost_filesystem-mgw46-mt-d-1_54 \
            -lboost_system-mgw46-mt-d-1_54
} 
```

请注意使用“/”而不是“\”。

我的 Boost 库使用 MinGW 编译到“c:\boost”目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-12T09:14:17.217

我将根据我找到的其他答案来回答这个问题。

首先，您需要使用与 QtCreator 使用的相同编译器（通常是 mingw）编译的 boost 库。如果您使用预构建的 boost 库（通常使用 msvc 编译），库将链接但会出现未定义的引用错误。

所以，你需要自己编译boost库。为此，请按照下列步骤操作：

1.  将 mingw 二进制文件添加到 PATH。转到`Control panel > System > Advanced settings > Environmet variables`并设置`path`变量。就我而言，该值为`c:\Qt\Tools\mingw\bin`.

2.  打开终端，进入解压boost的目录。运行这个：`bootstrap.bat gcc`

3.  现在运行这个：`b2 link=shared toolset=gcc`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-24T10:02:22.013

我想你已经让自己有点困惑了。

您提到的链接适用于 Boost Build 系统，而不适用于 Boost 库。[www.boostpro.com 上有一个](http://www.boostpro.com/download/)用于库文件的完整安装程序，它可以让您更快地启动和运行，但是如果它不能正常工作，[这里](http://andres.jaimes.net/718/how-to-install-the-c-boost-libraries-on-windows/)有一个关于自己构建它的指南。

构建它们之后的下一步是让 Qt 意识到它们。您通常在每个项目的基础上执行此操作，通过 Qt Creator 调整设置或直接编辑`.pro`项目的文件。我更喜欢编辑它，`.pro`因为它是我学习的方式，如果你沿着这条路线走，你需要让它知道`INCLUDEPATH`头文件的`LIBS`路径和库的路径。很多 Boost 只是头文件，所以根据您使用的部分，您可能需要也可能不需要该`LIBS`部分。

# timer - 如何在 VxWorks 中访问 Freescale P2020 的备用时基寄存器 64 位定时器寄存器

> ID：12113690
> 
> 赞同：0
> 
> 时间：2012-08-24T16:59:45.470
> 
> 标签：timer, embedded, vxworks, powerpc

在 VxWorks 中如何配置和读取该寄存器？也就是说，它在什么地址，我写什么地址来配置它的递增率。

我们没有使用 RTP，所以不存在内核空间问题。只需要将速率写入某个控制地址，然后定期读取 64 位无符号整数定时器。

在我们的应用中，我们需要一个高分辨率的 64 位定时器，软件将使用它来进行一般的定时测量。

示例代码会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:30:21.790

这取决于您的应用程序想要对计时器做什么以及它将发生的环境。我没有使用那个特定的芯片，所以我不能告诉你*如何*使用寄存器。

如果您想要的是类似时间戳的功能，您可以在操作之前和之后读取计数器并在两者之间进行区分，那么 VxWorks 板支持包通过 sysTimestamp 系列函数提供该功能。请参阅文档。

但是，如果 sysTimestamp 不满足您的要求，但您仍想访问寄存器以读取当前时间**并且**您的代码在内核空间中运行（与用户空间 AKA RTP 相比），那么您只需定义一个函数即可返回时间戳...

```
uint64 myTimestamp() {
   uint64 ts;
   ts = *read & massage the register*
     *deal with overflows, etc... *

   return ts;
} 
```

另一方面，如果您的应用程序在 RTP 的上下文中运行，那么事情会变得更加复杂，因为 RTP 就像 Windows 中的进程一样，不能直接访问硬件功能。

一种可能性是将物理内核内存页面映射到 RTP，以便它可以直接访问寄存器。非常气馁，因为您在系统的保护机制中打开了一个漏洞。您还可以专门实现自定义系统调用来读取时间戳寄存器。

这两种解决方案都需要使用 vxWorks 的中高级技能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-05T12:26:19.290

要访问时基寄存器，您可以编写一些汇编代码来访问它：

```
.global TBL_get
.global TBU_get
TBL_get:
    mfspr   r3, 268
    blr
TBU_get:
    mfspr   r3, 269
    blr 
```

这将访问时基寄存器的低位然后是高位并返回一个参数。

不要忘记`.h`像这样在文件中定义函数：

```
uint32 TBL_get (void);
uint32 TBU_get (void); 
```

然后调用这两个函数并连接从函数返回的变量。

# install4j - 是否可以使用 install4j 'Set a Value' 操作更新 Windows 注册表中的 REG_BINARY 值

> ID：12113693
> 
> 赞同：2
> 
> 时间：2012-08-24T17:00:17.977
> 
> 标签：install4j

我已经 install4j 创建了一个 Windows 服务，但我需要将重启延迟设置为一个值。此值存储在`REG_BINARY`字段中。

有没有办法在创建 Windows 服务时设置故障重启延迟。如果没有，有没有办法`REG_BINARY`在 Windows 注册表中设置一个值，以便我可以在 install4j 创建服务后设置这个值？

注意：我尝试使用十六进制数字设置“值”字段，就像通过 Windows regedit 显示的那样（即 00 00 00 00 03 00 14 00 00 EA 00 00 EA 00 等），但它最终将注册表值从`REG_BINARY`类型到`REG_SZ`类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:55:29.453

> 有没有办法在创建 Windows 服务时设置故障重启延迟。

目前没有。

> 如果没有，有没有办法在 Windows 注册表中设置一个 REG_BINARY 值，这样我就可以在 install4j 创建服务后设置这个值？

“在 Windows 注册表中设置值”操作不支持此操作，但您可以使用 API 执行此操作：

```
byte[] value = ...;
WinRegistry.setValue(RegistryRoot.HKEY_LOCAL_MACHINE, 
    "keyName", "valueName", value); 
```

该值必须是 type`byte[]`才能创建 type 的注册表项`REG_BINARY`。

# mysql - 获取每组分组结果的前 n 条记录

> ID：12113699
> 
> 赞同：174
> 
> 时间：2012-08-24T17:00:44.050
> 
> 标签：mysql, sql, greatest-n-per-group, mysql-variables

以下是最简单的示例，尽管任何解决方案都应该能够扩展到需要许多 n 顶级结果：

给定下面这样的表格，其中包含人员、组和年龄列，您将如何**获得每个组中年龄最大的 2 人？**（组内的关系不应产生更多结果，但按字母顺序给出前 2 个）

```
+--------+--------+-----+
| 人 | 集团 | 年龄 |
+--------+--------+-----+
| 鲍勃 | 1 | 32 |
| 吉尔 | 1 | 34 |
| 肖恩 | 1 | 42 |
| 杰克 | 2 | 29 |
| 保罗 | 2 | 36 |
| 劳拉 | 2 | 39 |
+--------+--------+-----+

```

期望的结果集：

```
+--------+--------+-----+
| 肖恩 | 1 | 42 |
| 吉尔 | 1 | 34 |
| 劳拉 | 2 | 39 |
| 保罗 | 2 | 36 |
+--------+--------+-----+

```

* * *

**注意：**这个问题建立在前一个问题的基础上——[为每组分组的 SQL 结果获取具有最大值的记录](https://stackoverflow.com/q/12102200/165673)——用于从每组中获取单个顶行，并从@Bohemian 获得了一个很好的 MySQL 特定答案：

```
select * 
from (select * from mytable order by `Group`, Age desc, Person) x
group by `Group` 
```

希望能够以此为基础，尽管我不知道如何。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-08-24T17:25:29.170

这是执行此操作的一种方法，使用`UNION ALL`（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/4c0a5/18)）。这适用于两个组，如果您有两个以上的组，那么您需要指定`group`数量并为每个组添加查询`group`：

```
(
  select *
  from mytable 
  where `group` = 1
  order by age desc
  LIMIT 2
)
UNION ALL
(
  select *
  from mytable 
  where `group` = 2
  order by age desc
  LIMIT 2
) 
```

有多种方法可以做到这一点，请参阅本文以确定适合您情况的最佳路线：

[http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)

编辑：

这也可能对您有用，它会为每条记录生成一个行号。使用上面链接中的示例，这将仅返回那些行号小于或等于 2 的记录：

```
select person, `group`, age
from 
(
   select person, `group`, age,
      (@num:=if(@group = `group`, @num +1, if(@group := `group`, 1, 1))) row_number 
  from test t
  CROSS JOIN (select @num:=0, @group:=null) c
  order by `Group`, Age desc, person
) as x 
where x.row_number <= 2; 
```

看[演示](http://rextester.com/UPG27258)

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-08-24T22:55:03.487

在其他数据库中，您可以使用`ROW_NUMBER`. MySQL 不支持`ROW_NUMBER`，但您可以使用变量来模拟它：

```
SELECT
    person,
    groupname,
    age
FROM
(
    SELECT
        person,
        groupname,
        age,
        @rn := IF(@prev = groupname, @rn + 1, 1) AS rn,
        @prev := groupname
    FROM mytable
    JOIN (SELECT @prev := NULL, @rn := 0) AS vars
    ORDER BY groupname, age DESC, person
) AS T1
WHERE rn <= 2 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/60d7b/5)

* * *

**编辑**我刚刚注意到 bluefeet 发布了一个非常相似的答案：+1 给他。然而，这个答案有两个小优点：

1.  这是一个单一的查询。变量在 SELECT 语句中初始化。
2.  它处理问题中描述的关系（按名称的字母顺序）。

所以我会把它留在这里，以防它可以帮助某人。

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2012-08-24T17:40:10.303

试试这个：

```
SELECT a.person, a.group, a.age FROM person AS a WHERE 
(SELECT COUNT(*) FROM person AS b 
WHERE b.group = a.group AND b.age >= a.age) <= 2 
ORDER BY a.group ASC, a.age DESC 
```

**[演示](http://sqlfiddle.com/#!2/22cbf/1)**

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2012-08-24T17:37:59.533

如何使用自连接：

```
CREATE TABLE mytable (person, groupname, age);
INSERT INTO mytable VALUES('Bob',1,32);
INSERT INTO mytable VALUES('Jill',1,34);
INSERT INTO mytable VALUES('Shawn',1,42);
INSERT INTO mytable VALUES('Jake',2,29);
INSERT INTO mytable VALUES('Paul',2,36);
INSERT INTO mytable VALUES('Laura',2,39);

SELECT a.* FROM mytable AS a
  LEFT JOIN mytable AS a2 
    ON a.groupname = a2.groupname AND a.age <= a2.age
GROUP BY a.person
HAVING COUNT(*) <= 2
ORDER BY a.groupname, a.age DESC; 
```

给我：

```
a.person    a.groupname  a.age     
----------  -----------  ----------
Shawn       1            42        
Jill        1            34        
Laura       2            39        
Paul        2            36 
```

比尔·卡尔文 (Bill Karwin) 的回答让我深受启发，[为每个类别选择前 10 条记录](https://stackoverflow.com/questions/176964/select-top-10-records-for-each-category)

另外，我正在使用 SQLite，但这应该适用于 MySQL。

另一件事：在上面，为了方便，我用`group`列替换了列。`groupname`

**编辑**：

跟进 OP 关于缺少平局结果的评论，我增加了 snuffin 的回答以显示所有平局。这意味着如果最后一个是平局，则可以返回超过 2 行，如下所示：

```
.headers on
.mode column

CREATE TABLE foo (person, groupname, age);
INSERT INTO foo VALUES('Paul',2,36);
INSERT INTO foo VALUES('Laura',2,39);
INSERT INTO foo VALUES('Joe',2,36);
INSERT INTO foo VALUES('Bob',1,32);
INSERT INTO foo VALUES('Jill',1,34);
INSERT INTO foo VALUES('Shawn',1,42);
INSERT INTO foo VALUES('Jake',2,29);
INSERT INTO foo VALUES('James',2,15);
INSERT INTO foo VALUES('Fred',1,12);
INSERT INTO foo VALUES('Chuck',3,112);

SELECT a.person, a.groupname, a.age 
FROM foo AS a 
WHERE a.age >= (SELECT MIN(b.age)
                FROM foo AS b 
                WHERE (SELECT COUNT(*)
                       FROM foo AS c
                       WHERE c.groupname = b.groupname AND c.age >= b.age) <= 2
                GROUP BY b.groupname)
ORDER BY a.groupname ASC, a.age DESC; 
```

给我：

```
person      groupname   age       
----------  ----------  ----------
Shawn       1           42        
Jill        1           34        
Laura       2           39        
Paul        2           36        
Joe         2           36        
Chuck       3           112 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2017-12-07T13:57:12.963

当您有大量行并且 Mark Byers/Rick James 和 Bluefeet 解决方案在我的环境（MySQL 5.6）上不起作用时，Snuffin 解决方案似乎执行起来很慢，因为 order by 在执行 select 之后应用，所以这里是一个变体Marc Byers/Rick James 解决此问题的解决方案（使用额外的叠瓦选择）：

```
select person, groupname, age
from
(
    select person, groupname, age,
    (@rn:=if(@prev = groupname, @rn +1, 1)) as rownumb,
    @prev:= groupname 
    from 
    (
        select person, groupname, age
        from persons 
        order by groupname ,  age desc, person
    )   as sortedlist
    JOIN (select @prev:=NULL, @rn :=0) as vars
) as groupedlist 
where rownumb<=2
order by groupname ,  age desc, person; 
```

我在一个有 500 万行的表上尝试了类似的查询，它在不到 3 秒的时间内返回结果

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-04-08T03:20:34.757

如果其他答案不够快试试[这个代码：](http://mysql.rjweb.org/doc.php/groupwise_max#top_n_in_each_group)

```
SELECT
        province, n, city, population
    FROM
      ( SELECT  @prev := '', @n := 0 ) init
    JOIN
      ( SELECT  @n := if(province != @prev, 1, @n + 1) AS n,
                @prev := province,
                province, city, population
            FROM  Canada
            ORDER BY
                province   ASC,
                population DESC
      ) x
    WHERE  n <= 3
    ORDER BY  province, n; 
```

输出：

```
+---------------------------+------+------------------+------------+
| province                  | n    | city             | population |
+---------------------------+------+------------------+------------+
| Alberta                   |    1 | Calgary          |     968475 |
| Alberta                   |    2 | Edmonton         |     822319 |
| Alberta                   |    3 | Red Deer         |      73595 |
| British Columbia          |    1 | Vancouver        |    1837970 |
| British Columbia          |    2 | Victoria         |     289625 |
| British Columbia          |    3 | Abbotsford       |     151685 |
| Manitoba                  |    1 | ... 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2012-08-24T17:48:35.567

看一下这个：

```
SELECT
  p.Person,
  p.`Group`,
  p.Age
FROM
  people p
  INNER JOIN
  (
    SELECT MAX(Age) AS Age, `Group` FROM people GROUP BY `Group`
    UNION
    SELECT MAX(p3.Age) AS Age, p3.`Group` FROM people p3 INNER JOIN (SELECT MAX(Age) AS Age, `Group` FROM people GROUP BY `Group`) p4 ON p3.Age < p4.Age AND p3.`Group` = p4.`Group` GROUP BY `Group`
  ) p2 ON p.Age = p2.Age AND p.`Group` = p2.`Group`
ORDER BY
  `Group`,
  Age DESC,
  Person; 
```

SQL 小提琴：[http ://sqlfiddle.com/#!2/cdbb6/15](http://sqlfiddle.com/#!2/cdbb6/15)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-12-05T14:25:07.323

在 SQL Server`row_numer()`中是一个强大的功能，可以很容易地得到结果，如下所示

```
select Person,[group],age
from
(
select * ,row_number() over(partition by [group] order by age desc) rn
from mytable
) t
where rn <= 2 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-03-10T03:27:29.807

我想分享这个，因为我花了很长时间寻找一种简单的方法来在我正在处理的 java 程序中实现它。这并不能完全给出您正在寻找的输出，但它很接近。mysql 中调用的函数`GROUP_CONCAT()`非常适合指定每个组中返回多少结果。使用`LIMIT`或任何其他尝试这样做的奇特方式`COUNT`对我不起作用。因此，如果您愿意接受修改后的输出，这是一个很好的解决方案。假设我有一张名为“学生”的表，其中包含学生 ID、性别和 gpa。可以说我想为每个性别获得前 5 个 gpa。然后我可以这样写查询

```
SELECT sex, SUBSTRING_INDEX(GROUP_CONCAT(cast(gpa AS char ) ORDER BY gpa desc), ',',5) 
AS subcategories FROM student GROUP BY sex; 
```

请注意，参数 '5' 告诉它要连接到每行的条目数

输出看起来像

```
+--------+----------------+
| Male   | 4,4,4,4,3.9    |
| Female | 4,4,3.9,3.9,3.8|
+--------+----------------+ 
```

您还可以更改`ORDER BY`变量并以不同的方式对其进行排序。所以如果我有学生的年龄，我可以用'age desc'替换'gpa desc'，它会起作用！您还可以将变量添加到 group by 语句以在输出中获取更多列。所以这只是我发现的一种非常灵活的方法，如果你只列出结果就可以了。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-03-28T09:04:56.187

MySQL有一个非常好的答案[- How To Get Top N Rows per Each Group](http://www.sqlines.com/mysql/how-to/get_top_n_each_group)

根据引用链接中的解决方案，您的查询将类似于：

```
SELECT Person, Group, Age
   FROM
     (SELECT Person, Group, Age, 
                  @group_rank := IF(@group = Group, @group_rank + 1, 1) AS group_rank,
                  @current_group := Group 
       FROM `your_table`
       ORDER BY Group, Age DESC
     ) ranked
   WHERE group_rank <= `n`
   ORDER BY Group, Age DESC; 
```

和`n`是您的表的名称在哪里。`top n``your_table`

我认为参考文献中的解释非常清楚。为了快速参考，我将在此处复制并粘贴：

> 目前 MySQL 不支持可以在组内分配序列号的 ROW_NUMBER() 函数，但作为一种解决方法，我们可以使用 MySQL 会话变量。
> 
> 这些变量不需要声明，可以在查询中用于计算和存储中间结果。
> 
> @current_country := country 此代码对每一行执行并将国家列的值存储到@current_country 变量。
> 
> @country_rank := IF(@current_country = country, @country_rank + 1, 1) 在这段代码中，如果 @current_country 相同，我们增加排名，否则将其设置为 1。对于第一行 @current_country 为 NULL，因此排名为也设置为 1。
> 
> 为了正确的排名，我们需要 ORDER BY country, population DESC

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-29T07:13:57.903

```
SELECT
p1.Person,
p1.`GROUP`,
p1.Age  
   FROM
person AS p1 
 WHERE
(
SELECT
    COUNT( DISTINCT ( p2.age ) ) 
FROM
    person AS p2 
WHERE
    p2.`GROUP` = p1.`GROUP` 
    AND p2.Age >= p1.Age 
) < 2 
ORDER BY
p1.`GROUP` ASC,
p1.age DESC 
```

[参考leetcode](https://leetcode.com/problems/department-top-three-salaries/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-14T09:14:21.480

```
WITH cte_window AS (
SELECT movie_name,director_id,release_date,
ROW_NUMBER() OVER( PARTITION BY director_id ORDER BY release_date DESC) r
FROM movies
)   
SELECT * FROM cte_window WHERE r <= <n>; 
```

上面的查询将为每个导演返回最新的 n 部电影。

# java - Java中Command、printf（类型和方法）的使用触发错误

> ID：12113700
> 
> 赞同：0
> 
> 时间：2012-08-24T17:00:53.707
> 
> 标签：java

Eclipse 中是否有任何快捷方式可以导入所有必需的类？组合键？

例如，我使用了关键字 Command，但我不确定要导入什么，因为它无法将 Command 识别为类型。我也有这个错误：`printf(String, Object[])`Console 类型中的方法不适用于 arguments `(String, int)`。

我认为它需要我导入一些包含我正在使用的一些方法的包，这些方法不在默认包中。任何帮助表示赞赏。谢谢！山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:46:40.463

您需要确保 Eclipse 使用至少 Java 5 的源代码级别，否则不会实现 var-args。

# c# - 如何在基本控制器的 OnActionExecuting 方法中重定向

> ID：12113703
> 
> 赞同：0
> 
> 时间：2012-08-24T17:00:55.750
> 
> 标签：c#, asp.net-mvc, redirect

在控制器的 OnActionExecuting 上，我正在尝试进行永久重定向。代码如下所示：

```
protected override void OnActionExecuting(ActionExecutingContext filterContext) {
  var resolvedUrl = "http://www.cnn.com";
  filterContext.Result = new RedirectResult(resolvedUrl);
  filterContext.Result.ExecuteResult(filterContext);
  return;
} 
```

它不会立即重定向，因为该方法在基类中，并且在 return 语句之后，`OnActionExecuting`调用了继承类的方法。

问题：我如何进行重定向并停在那里，而不是在继承的类中做任何事情。谢谢。

注意：在子类（从基类继承的）中，我`base.OnActionExecuting(filterContext);`在它的`OnActionExecuting`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:27:35.453

您不应在操作过滤器中调用 ExecuteResult()。将 filterContext.Result 设置为非空值足以防止 MVC 管道调用进一步的过滤器。

应改为将子类类型更改为：

```
base.OnActionExecuting(filterContext);
if (filterContext.Result != null) {
  return; // something got short-circuited
} 
```

# sql - 我无法提出 SQL 查询

> ID：12113705
> 
> 赞同：2
> 
> 时间：2012-08-24T17:01:00.117
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有 2 张桌子：媒体和画廊。媒体包含数千条不同类型的病毒媒体记录，如视频、图片、游戏等。画廊包含与媒体表中的图片记录组相关联的画廊 ID 列表。

![我的桌子](../Images/6975691259583c9bb87328838c1443bf.png)

目前，我有一个查询，它将返回 Gallery 表中的 Gallery 记录列表，并将 MediaThumb 与 Media 表中相应的 GalleryIds 组关联。这是该查询：

```
SELECT a.GalleryID, a.GalleryTitle, a.GalleryDate, MAX(b.MediaThumb) AS MediaThumb
FROM Galleries a
INNER JOIN Media b
ON a.GalleryID = b.GalleryID
GROUP BY a.GalleryID, a.GalleryTitle, a.GalleryDate
order by a.GalleryID desc 
```

我现在想提出的是一个查询，它返回画廊记录列表以及 MediaTypeID = 1 或 2 或 3 的媒体表中的所有记录。

我不太擅长复杂的 SQL，可以使用某种方向/帮助。我什至不确定我想要的是否可能。我需要将上面的查询与 Media 表中的记录交织在一起。希望你们中的一些 SQL 大师可以伸出援助之手！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T17:06:54.467

如果您想要图库和最大缩略图以及关联的媒体行，请使用：

```
; WITH CTE AS (
SELECT a.GalleryID GalleryID_A, a.GalleryTitle, a.GalleryDate, b.*,  
ROW_NUMBER() OVER (PARTITION BY  a.GalleryID, a.GalleryTitle, a.GalleryDate 
                    ORDER BY b.MediaThumb DESC) AS Rn
FROM Galleries a
INNER JOIN Media b
ON a.GalleryID = b.GalleryID
Where b.MediaTypeID in (1,2,3)
)
SELECT * FROM CTE where Rn = 1 
```

上述查询的示例数据和结果 - [http://sqlfiddle.com/#!3/09e4f/1](http://sqlfiddle.com/#!3/09e4f/1)

根据我们在聊天中的讨论更新了查询：

```
WITH CTE AS (
SELECT a.GalleryID GalleryID_A, a.GalleryTitle, a.GalleryDate, b.*,  
ROW_NUMBER() OVER (PARTITION BY  a.GalleryID, a.GalleryTitle, a.GalleryDate 
                    ORDER BY b.MediaThumb DESC) AS Rn
FROM Media b
INNER JOIN Gallery A
ON a.GalleryID = b.GalleryID
), 
CTE2 AS
(
SELECT a.GalleryID GalleryID_A, a.GalleryTitle, a.GalleryDate, b.*,  
1 Rn
FROM Media b
LEFT OUTER JOIN Gallery A
ON a.GalleryID = b.GalleryID
)
SELECT * FROm CTE where rn = 1
UNION ALL
SELECT * FROM CTE2 WHERE rn = 1 and galleryid is null
order by mediaid 
```

上面的小提琴 - [http://sqlfiddle.com/#!3/72935/12](http://sqlfiddle.com/#!3/72935/12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:06:09.230

您只需要使用连接而不分组...左外连接将确保所有画廊都被拾取...即。没有任何相应媒体的画廊也会被选中。

```
SELECT a.*, b.*
FROM Galleries a
Left outer JOIN Media b ON a.GalleryID = b.GalleryID
Where b.MediaTypeID in (1,2,3) 
```

# c# - System.DirectoryServices.Interop.UnsafeNativeMethods.IAds.GetInfo() 处的 FileNotFoundException

> ID：12113706
> 
> 赞同：9
> 
> 时间：2012-08-24T17:01:01.537
> 
> 标签：c#, .net

我有这行简单的代码：

```
var entry = new DirectoryEntry("WinNT://DOMAIN/MachineName, Computer");
Console.WriteLine(entry.Guid); 
```

实际上，路径是由命令行提供的。这个简单的控制台应用程序是为测试而编译的，在我的测试中我发现：

*   连接到我自己的 Windows 7 PC 可以工作。
*   连接到网络上的任何其他 Windows XP 机器都可以。
*   连接到网络上的任何其他 Windows 7 计算机失败，并显示：

> 未处理的异常：System.IO.FileNotFoundException：找不到网络路径。
> 
> 在 System.DirectoryServices.Interop.UnsafeNativeMethods.IAds.GetInfo() 在 System.DirectoryServices.DirectoryEntry.RefreshCache() 在 System.DirectoryServices.DirectoryEntry.FillCache(String propertyName) 在 System.DirectoryServices.DirectoryEntry.get_NativeGuid() 在 System.DirectoryServices .DirectoryEntry.get_Guid() 在 GetDirectoryEntryProperties.Program.Main(String[] args) 在 D:\GetDirectoryEntryProperties\Program.cs:line 15

有任何想法吗？

我是所有机器的管理员，但是我确实遇到了另一个由设备锁定服务引起的问题，它导致了`UnauthorizedAccessException`询问，但在这种情况下，我什至无法读取机器的 Guid。

事件日志显示没有任何用处。

卢克

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-02-11T20:08:12.410

对于不同的情况，我遇到了相同的错误消息。也许我找到的解决方案也可以帮助你。

升级到 Windows 10 后，我的电脑在启动时弹出错误，看起来就像您发布的一样。这是 System.DirectoryServices.Interop.UnsafeNativeMethods.IAds.GetInfo() 处的 FileNotFoundException。

解决方案是将两个字符串从一个注册表位置复制到另一个。

```
Copy these strings: RegisteredOwner and RegisteredOrganization

From: HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion

To: HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\Windows NT\CurrentVersion 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T14:21:58.360

我只想感谢 Bryan Roach，我能够解决我的问题。我还意识到我可以将我的 C# 项目 Build 设置为 Platform Target x64 并避免错误，因为它会搜索 64 位注册表区域。但是，我觉得任何 CPU 和能够解决问题的程序本身更适合我的应用程序。

```
string ServerName = "REMOTE_COMPUTER";
PrincipalSearcher pSearch = new PrincipalSearcher();
pSearch.QueryFilter = new UserPrincipal(new PrincipalContext(ContextType.Machine, ServerName, null, ContextOptions.Negotiate));

try
{
    foreach (UserPrincipal userUP in pSearch.FindAll())
    {
         //Missing Registry Keys will error on pSearch.FindAll();
         //Either Build > Platform Target == x64 or deal with it.
    }
}
catch(FileNotFoundException ex)
{
    if(ex.Source.Equals("Active Directory") && 
       ex.TargetSite.MemberType.ToString().Equals("Method") && 
       ex.TargetSite.Name.Equals("GetInfo"))
    {
        //It's possible the registry keys haven't been moved to x86 location on a 64 bit machine:
        //From: HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion (64 bit)
        //To: HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\Windows NT\CurrentVersion (32 bit compatability area)
        //String Properties need to be present:  RegisteredOwner, RegisteredOrganization
        try
        {
            Hack_Fixx64RegistryForGettingLocalAccounts(ServerName);
            //Recall function or whatever to try again with fixed registry.
        }
        catch
        { }
    }
} 
```

然后对于将注册表项复制到正确位置的功能：

```
private void Hack_Fixx64RegistryForGettingLocalAccounts(string ServerName)
{
    RegistryKey remoteKey = RegistryKey.OpenRemoteBaseKey(RegistryHive.LocalMachine, ServerName, RegistryView.Registry64);
    if(remoteKey != null)
    {
        //Get keys stored on 64 bit location
        RegistryKey x64regkey = remoteKey.OpenSubKey(@"SOFTWARE\Microsoft\Windows NT\CurrentVersion");
        string regOwner = Convert.ToString(x64regkey.GetValue("RegisteredOwner", ""));
        string regOrganization = Convert.ToString(x64regkey.GetValue("RegisteredOrganization", ""));
        //Add missing keys on 64 bit OS in correct location for 32 bit registry area. The Wow6432Node is for 32-bit apps that run on 64-bit window versions.
        remoteKey = RegistryKey.OpenRemoteBaseKey(RegistryHive.LocalMachine, ServerName, RegistryView.Registry32);
        if(remoteKey != null)
        {
            RegistryKey x86regkey = remoteKey.OpenSubKey(@"SOFTWARE\Microsoft\Windows NT\CurrentVersion", true);
            x86regkey.SetValue("RegisteredOwner", regOwner);
            x86regkey.SetValue("RegisteredOrganization", regOrganization);
        }
    }
} 
```

# visual-studio - 如何在 VS.NET 的单行中声明具有内联变量的内联对象

> ID：12113712
> 
> 赞同：0
> 
> 时间：2012-08-24T17:01:17.483
> 
> 标签：visual-studio

我想在 VS.NET 中声明一个对象，其中包含几个变量（属性），以便创建该对象的列表。我知道创建一个具有所需属性的类会起作用，但是有一种方法可以用一个方法来完成吗？

```
 Dim person As Object = New Object() {Name = "", Lastname = ""}

    Dim myList As New List(Of person)
    myList.Add(New person(Name = "x", LastName = "x1")) 
```

或者也许为了解决我的主要问题，如果你知道一种创建允许重复键的哈希表或字典的方法会很棒。

非常感谢你的帮助。

更新注意：我不能使用 LINQ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:05:05.087

> 我知道创建一个具有所需属性的类会起作用，但是有一种方法可以用一个方法来完成

您可以使用[Collection Initializers](http://msdn.microsoft.com/en-us/library/dd293617.aspxn)在一个“行”中对其进行初始化 -

```
Dim myList As New List(Of Person) From { New Person(Name = "x", LastName = "x1") } 
```

> 或者也许为了解决我的主要问题，如果你知道一种创建允许重复键的哈希表或字典的方法会很棒。

这通常是通过制作一个字典来完成的，其中值是一个集合，即：

```
Dictionary(Of String, List(Of String)) 
```

这将允许您创建一个字典，其中每个 String 键可以包含多个字符串值。

# c - 错误 C2106：'='：左操作数必须是 VS2008 上 c 中的左值

> ID：12113713
> 
> 赞同：0
> 
> 时间：2012-08-24T17:01:19.073
> 
> 标签：c, visual-studio-2008, compiler-errors

嗨，我在 Visual Studio 2008 上尝试此代码时无法找到编译错误的原因。我试图通过函数查看 char* 返回值的示例。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
static char* getActiveModuleType(void);
void main()
{
char getActiveModuleBuff[128];
//error C2106: '=' : left operand must be l-value
getActiveModuleBuff = getActiveModuleType();
printf("Active module in well formatted (2): %s\n",getActiveModuleBuff);

    exit(0);
 }
 char* getActiveModuleType(void)
 {
char activeModule[128];
int tempBuffLen=0;
int nbActivemodule = 0;
char moduleA        = 1;
char moduleB        = 1;
char moduleC        = 0;
char moduleD        = 1;
int i = 0;
if(moduleA==1) {activeModule[i] ='A'; activeModule[i+1]=','; i= i+2;}
if(moduleB==1) {activeModule[i] ='B'; activeModule[i+1]=','; i= i+2;}
if(moduleC==1) {activeModule[i] ='C'; activeModule[i+1]=','; i= i+2;}
if(moduleD==1) {activeModule[i] ='D'; activeModule[i+1]=','; i= i+2;}

printf(" Active module in : %s\n",activeModule);
//let get get the last ',' value trucated
tempBuffLen = strlen(activeModule);
nbActivemodule = tempBuffLen/2;
if((tempBuffLen == 0) && (nbActivemodule ==0)){
        memcpy(activeModule,"NoActiveModule",14);
        return activeModule;
}
if(activeModule[tempBuffLen-1]==',')
    activeModule[tempBuffLen-1] = '\0';
printf(" Active module in well formatted : %s\n",activeModule);

return activeModule;
} 
```

我无法找到此代码中出现此错误 C2106 的原因。
需要帮助。
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:02:39.077

```
char getActiveModuleBuff[128];
getActiveModuleBuff = getActiveModuleType(); 
```

您不能为 C 中的数组赋值。

用于`memcpy`复制数组或`strcpy`/`strncpy`用于复制字符串。

也在：

```
 char* getActiveModuleType(void)
 {
     char activeModule[128];
     /* ... */
     return activeModule;
 } 
```

数组对象在`activeModule`函数结束时被销毁。在函数返回后访问它是未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:11:15.390

除了ouah所说的。

不要返回数组。相反，让您的函数写入作为参数传递给它的数组，并返回结果代码。

`getActiveModuleType`将函数原型更改为`void getActiveModuleType(char *activeModule)`. 这将使函数将您的数组作为参数并且不返回任何内容。

然后，删除`activeModule`from`getActiveModuleType`的声明，因为它已经声明为参数。

之后`memcpy(activeModule,"NoActiveModule",14);`，替换`return activeModule;`为`return;`，因为您的函数不返回任何内容（void）。这将使您的函数在失败时退出。

最后`getActiveModuleType`，删除`return activeModule;`行，因为该函数不返回任何内容。

并且，在您的`main`函数中，替换`getActiveModuleBuff = getActiveModuleType();`为`getActiveModuleType(getActiveModuleBuff);`.

# objective-c - Objective-C ARC 中的 (nonatomic, readwrite, retain) 和 (nonatomic, strong)

> ID：12113718
> 
> 赞同：2
> 
> 时间：2012-08-24T17:01:38.090
> 
> 标签：objective-c, ios, xcode, automatic-ref-counting, llvm

有什么区别吗？

假设它们和ARC中一样，retain应该换成strong？

所以我可以说它们是一样的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T17:05:25.550

不，没有区别。根据我[在这里](https://stackoverflow.com/questions/9162926/ios-property-declaration-clarification/9163058#9163058)的回答：

> *   `retain / strong`：（自动保留/释放设置值，确保值不会意外释放）（默认为 ARC 和对象类型）

此外， readwrite 是属性的默认设置，因此这不是必需的，并且您已经指定`nonatomic`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:06:32.023

strong 替换了 retain 和类似的功能。如果它的对象弱替换分配（说引用对象但不增加其引用计数），则两者之间的非原子是相同的

# css - 为什么 CSS @font-face 规则似乎只适用于某些字体？

> ID：12113720
> 
> 赞同：3
> 
> 时间：2012-08-24T17:01:41.493
> 
> 标签：css, fonts, font-face

我去了以下网站查看一些可爱的自定义字体：

[http://www.fontspace.com/category/ninja](http://www.fontspace.com/category/ninja)

如果我尝试使用以下 CSS 使用“Last Ninja”字体，它就不起作用（该字体在我的浏览器中看起来就像 Times New Roman）：

```
@font-face {
  font-family: LastNinja;
  src: url("/lastninja.ttf") format("truetype");
}

h1 {
  font-family: LastNinja;
} 
```

但是，如果我对“Japonesa”字体使用相同的代码，它可以工作：

```
@font-face {
  font-family: Japonesa;
  src: url("/japonesa.ttf") format("truetype");
}

h1 {
  font-family: Japonesa;
} 
```

我在 Chrome 和 Firefox 上都试过了。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:14:41.643

我试过了，也有同样的问题。字体似乎损坏或不标准，甚至[http://www.fontsquirrel.com](http://www.fontsquirrel.com)拒绝转换字体。

编辑：[CodeAndMore](http://fontface.codeandmore.com/)服务能够转换这种字体（它只转换为 svg 格式）。[预览](http://fontface.codeandmore.com/fonts/lastninja.html),[下载](http://fontface.codeandmore.com/fonts/lastninja1345828581.zip)

编辑 2：**解决方案使用任何**[字体转换器](http://www.freefontconverter.com/)
将字体从 .ttf 转换为 .ttf，并改用转换后的 .ttf。这对我有用，在 Chrome 中测试过。

# eclipse - Maven app-assembler、程序集和类路径：配置目录冲突

> ID：12113724
> 
> 赞同：3
> 
> 时间：2012-08-24T17:02:01.087
> 
> 标签：eclipse, maven, appassembler

我正在使用 app-assembler Maven 插件来创建我的 Java 应用程序的安装。我希望一些数据（属性和一些用户生成的数据）在文件系统中而不是在任何 Jar 文件中可用。

`config`app-assembler 允许我通过将目录添加到类路径来做到这一点。

`config`运行我的一些测试需要同一个目录的内容。因此，我在我的 Maven 配置中将该目录声明为资源。

这是断开连接发生的地方：如果我将配置目录资源的 targetPath 设置为“config”，则程序集（而不是 app-assembler）插件很容易将其拾取进行打包，但类路径 URL 会有所不同在部署的应用程序和 Eclipse 之间：部署的应用程序会认为 URL 是`classpath:/default.properties`，而在 Eclipse 内部 URL 是`classpath:/config/default.properties`。如果我将 targetPath 设为空（直接安装`classes`在 Eclipse 和部署环境之间的类路径 URL 匹配，但没有很好的方法可以在装配插件配置中挑选出配置数据。

目前我正在使用第二个选项，并将`config`所有内容放入目录中，`classes`这不是一个类。

更好的解决方案可能是在 Maven 中创建另一个类路径目录，类似于`classes`and `test-classes`，但我不知道该怎么做。

所以我有两个问题：

*   我是否在资源、程序集和应用程序组装器插件中遗漏了一些明显的东西？
*   或者如果我不是，那么如何`config`在 Maven/Eclipse 环境中将目录添加到类路径中，就像在部署环境中由 app-assembler 脚本添加一样？

使用的版本：Maven3、app-assembler 1.2.2、

# spring - 如何告诉 Spring 缓存不要在 @Cacheable 注释中缓存空值

> ID：12113725
> 
> 赞同：80
> 
> 时间：2012-08-24T17:02:02.153
> 
> 标签：spring, caching, memcached

有没有办法指定如果方法返回 null 值，那么不要将结果缓存在 @Cacheable 注释中这样的方法？

```
@Cacheable(value="defaultCache", key="#pk")
public Person findPerson(int pk) {
   return getSession.getPerson(pk);
} 
```

更新：这是去年 11 月提交的关于缓存空值的 JIRA 问题，尚未解决： [[#SPR-8871] @Cachable 条件应允许引用返回值 - Spring Projects 问题跟踪器](https://jira.springsource.org/browse/SPR-8871)

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-04-02T22:12:42.027

万岁，从 Spring 3.2 开始，框架允许使用 Spring SPEL 和`unless`. 来自围绕 Cacheable 的 java doc 的注释：

[http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/cache/annotation/Cacheable.html](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/cache/annotation/Cacheable.html)

> 公共抽象字符串，除非
> 
> 用于否决方法缓存的 Spring 表达式语言 (SpEL) 属性。
> 
> 与 condition() 不同，此表达式在方法被调用后进行评估，因此可以引用结果。默认为“”，这意味着缓存永远不会被否决。

重要的方面是`unless`在调用方法之后进行评估。这是非常有意义的，因为如果密钥已经在缓存中，该方法将永远不会被执行。

因此，在上面的示例中，您只需进行如下注释（#result 可用于测试方法的返回值）：

```
@Cacheable(value="defaultCache", key="#pk", unless="#result == null")
public Person findPerson(int pk) {
   return getSession.getPerson(pk);
} 
```

我想这种情况是由于使用了可插入的缓存实现，例如允许缓存空值的 Ehcache。根据您的用例场景，这可能是可取的，也可能不是可取的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T17:52:04.540

**更新**此答案现在已过时，对于 Spring 3.2 及更高版本，请参阅 Tech Trip 的[答案](https://stackoverflow.com/a/15775379/241986)，OP：随时将其标记为已接受。

我不认为这是可能的（即使 Spring 中有条件缓存驱逐可以在方法调用后执行，`@CacheEvict`参数*beforeInvocation*设置为 false，这是默认值）检查`CacheAspectSupport`类表明返回的值之前没有存储在任何地方`inspectAfterCacheEvicts(ops.get(EVICT));`通话。

```
protected Object execute(Invoker invoker, Object target, Method method, Object[] args) {
    // check whether aspect is enabled
    // to cope with cases where the AJ is pulled in automatically
    if (!this.initialized) {
        return invoker.invoke();
    }

    // get backing class
    Class<?> targetClass = AopProxyUtils.ultimateTargetClass(target);
    if (targetClass == null && target != null) {
        targetClass = target.getClass();
    }
    final Collection<CacheOperation> cacheOp = getCacheOperationSource().getCacheOperations(method, targetClass);

    // analyze caching information
    if (!CollectionUtils.isEmpty(cacheOp)) {
        Map<String, Collection<CacheOperationContext>> ops = createOperationContext(cacheOp, method, args, target, targetClass);

        // start with evictions
        inspectBeforeCacheEvicts(ops.get(EVICT));

        // follow up with cacheable
        CacheStatus status = inspectCacheables(ops.get(CACHEABLE));

        Object retVal = null;
        Map<CacheOperationContext, Object> updates = inspectCacheUpdates(ops.get(UPDATE));

        if (status != null) {
            if (status.updateRequired) {
                updates.putAll(status.cUpdates);
            }
            // return cached object
            else {
                return status.retVal;
            }
        }

        retVal = invoker.invoke();

        inspectAfterCacheEvicts(ops.get(EVICT));

        if (!updates.isEmpty()) {
            update(updates, retVal);
        }

        return retVal;
    }

    return invoker.invoke();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-02T02:47:21.850

如果 Spring 注解

```
@Cacheable(value="defaultCache", key="#pk",unless="#result!=null") 
```

不行，你可以试试：

```
@CachePut(value="defaultCache", key="#pk",unless="#result==null") 
```

这个对我有用。

# php - 将图像从磁盘导入 MySQL 数据库时图像损坏

> ID：12113729
> 
> 赞同：1
> 
> 时间：2012-08-24T17:02:21.297
> 
> 标签：php, mysql, image, store

首先，感谢您看这个。请允许我解释一下：

我在磁盘上有图像，我想将它们放入数据库中的 longblob 字段中。我读过这通常是不鼓励的，但这仍然是我的应用程序中需要的东西。

要导入图像，我的班级中有以下代码：

```
$file_handle = fopen("$folder_path/$image","rb");
$file_content = fread($file_handle,filesize("$folder_path/$image"));

$image_record["file_name"] = $image;
$image_record["file_folder_id"] = $folder_data["folder_id"];
$image_record["file_owner_id"] = $this->current_user_data["user_id"];
$image_record["file_mime_type"] = mime_content_type("$folder_path/$image");
$image_record["file_binary"] = addslashes($file_content);

if($this->db_insert("file", $image_record))
{

    $this->view_file($this->load_file($image));
    echo header("Content-type:".$image_record["folder_type"]);
    $this->view_file($this->load_file($image));
    echo stripslashes($image_record["folder_binary"]);
} 
```

看来，当我尝试将二进制文件保存到数据库时，图像数据被该进程损坏了。

使用完全相同的代码，$db->insert() 语句在另一个具有几乎相同数据库架构的网站上工作得很好，除了它工作的事实，存储引擎是 InnoDB 而不是 MyISAM。

if 语句中的代码始终显示图像，因此我对读取文件或显示文件时发生的数据损坏表示怀疑。

请帮助我了解发生了什么。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-24T17:16:45.980

您应该对图像进行 base64 编码并将它们存储在一个长文本字段中，至少这是我所做的，我发现它工作得很好。此外，当从您的数据库中获取 base64 记录时，您可以将 base64 字符串回显到图像 src 属性中......这是文档： http: [//php.net/manual/en/function.base64-encode。 php](http://php.net/manual/en/function.base64-encode.php)

# javascript - 延迟一个 JQuery 点击监听器

> ID：12113733
> 
> 赞同：0
> 
> 时间：2012-08-24T17:02:42.963
> 
> 标签：javascript, jquery, html

这真让我抓狂。我正在尝试将侦听器应用于 div，以便在单击它时显示自定义下拉菜单（另一个 div）。这就是我试图在 JQuery 中完成这项工作的方式：

```
$('#fakeFont').click(function(){
    $('#fontSelect').removeClass('hidden');
    $('html').one('click', function(){
        $('#fontselect').addClass('hidden');
    });
}); 
```

问题是我应用于 html 的侦听器正在识别第一次点击。在此先感谢任何知道如何解决此问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:06:11.070

尝试停止传播：

```
$('#fakeFont').click(function(e){
    e.stopPropagation();
    $('#fontSelect').removeClass('hidden');
    $('html').one('click', function(){
        $('#fontselect').addClass('hidden');
    });
}); 
```

# javascript - 如果为空，表单提交不会显示错误消息

> ID：12113736
> 
> 赞同：1
> 
> 时间：2012-08-24T17:02:47.443
> 
> 标签：javascript, html, forms

如果我尝试提交空表单，我会尝试显示错误消息。下面的代码显示了应该发生的事情。

```
 function prepareEventHandlers() {
document.getElementById("frmContact").onsubmit = function () {
    if (document.getElementById("email").value == '') {
        document.getElementById("errorMessage").innerHTML = 'Please provide at least an email address!';
        return false;
    }
    else {
        document.getElementById("errorMessage").innerHTML = '';
        return true;
    }
};
}

window.onload = function () {
prepareEventHandlers();
} 
```

这是我的cshtml方面的代码：

```
<form id="frmContact" method="post">
<fieldset>
<legend>Personal Information</legend>
<p>email and other elements here.</p>
<div>
<input type="checkbox" name="checkbox1" checked="false" />
Remind me later <br />
</div>
<p><span id="errorMessage"></span></p>
<input type="submit" value="Send" id="send"/>
</fieldset>
</form>
<script src="http://localhost:53734/Scripts/JScript3.js"></script> 
```

我尝试调试它，但它没有在点击时调用 prepareEventHandlers 方法。另外，尝试将脚本标签粘贴在表单上方，但这也没有做任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:14:23.500

您的表单没有电子邮件的输入元素。您的 JavaScript 正在寻找带有电子邮件 ID（可能是输入）的元素，`document.getElementById("email").value`但您的表单缺少它。

改变：

```
<p>email and other elements here.</p> 
```

到：

```
<p><input id="email" /></p> 
```

然后你的代码工作正常。**[jsFiddle 示例](http://jsfiddle.net/j08691/KKCnF/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:15:35.333

您必须有一个具有相应 ID 的元素才能进行验证。. .这里您没有电子邮件 id 元素，但您正在尝试验证

尝试以下

```
<input type="text" id="email"/> 
```

[这是小提琴](http://jsfiddle.net/ED2BF/)

# haskell - 随机排列大型列表（超过 1 亿个元素）

> ID：12113737
> 
> 赞同：1
> 
> 时间：2012-08-24T17:02:53.503
> 
> 标签：haskell

我不在乎以“功能性”的方式来做。但我确实需要它处于线性时间（而不是 O(n log n)），而且我真的更喜欢类型签名保持不变（即，不添加额外的类型约束）。这是我到目前为止所拥有的，但我不断收到堆栈溢出：

```
import Control.Monad
import Control.Monad.ST
import Data.Array.ST
import Data.STRef
import System.Random

randomPermute :: RandomGen g => [a] -> g -> ([a],g)
randomPermute l rgen = runST $ newListArray (1,n) l >>= body rgen where
  n = length l
  body :: RandomGen g => g -> STArray s Int e -> ST s ([e],g)
  body rgen arr = do
    rgenRef <- newSTRef rgen
    let pick i j   = do vi <- readArray arr i
                        vj <- readArray arr j
                        writeArray arr j vi
                        return vj
        rand lo hi = do rgen <- readSTRef rgenRef
                        let (v,rgen') = randomR (lo,hi) rgen
                        writeSTRef rgenRef rgen'
                        return v
    rv <- forM [1..n] $ \i -> do
        j <- rand i n
        pick i j
    rgen <- readSTRef rgenRef
    return (rv,rgen)

ascCount x = sum $ map oneIfBig $ zip x $ tail x where
  oneIfBig (x,y) = if x<y then 0 else 1

main = do
  -- Using String types just for testing
  res <- getStdRandom $ randomPermute $ map show [1..1000000]
  putStrLn $ show $ ascCount res 
```

现在我对命令式语言的处理告诉我应该有一种方法可以避免一起使用堆栈。但是在 Haskell 中，我似乎无法弄清楚如何。如果我使用未装箱的数组，我发现了一些可行的方法。但就像我说的，我不希望添加额外的约束。有任何想法吗？

编辑：如果有人可以向我解释上面的代码如何消耗堆栈空间，以及为什么我不能简单地避免使用尾递归调用，我也会很感激。我尝试在某些地方使用热切评估，但没有帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T17:34:09.860

随机列表排列可以在 /O(n)/ 中完成（假设你有一个随机输入数组），通过向量包，使用[`backpermute`](http://hackage.haskell.org/packages/archive/vector/0.9.1/doc/html/Data-Vector-Unboxed.html#g:17)操作。

```
backpermute :: Unbox a => Vector a -> Vector Int -> Vector a

/O(n)/
Yield the vector obtained by replacing each element i of the index vector by xs!i. This is equivalent to map (xs!) is but is often much more efficient. 
```

IE

```
 backpermute <a,b,c,d> <0,3,2,3,1,0> = <a,d,c,d,b,a> 
```

[您可以通过许多包](http://www.haskell.org/haskellwiki/Numeric_Haskell:_A_Vector_Tutorial#Random_numbers)创建有效的随机向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T23:35:47.743

我想我自己找到了一个线性时间解决方案，所以我想我应该在这里添加它。显然，从 forM 或 replicateM 等一元函数生成列表是个坏主意。它们耗尽了堆栈空间。相反，我将循环仅用于纯粹的命令式处理，然后将数组转换为循环外的列表。代码粘贴在下面。

如果有人感兴趣，这里有一篇很棒的 useenix 帖子[，](http://okmij.org/ftp/Haskell/perfect-shuffle.txt)它以纯粹的功能方式做同样的事情，但使用 O(n log n) 时间。

```
randomPermute :: RandomGen g => [a] -> g -> ([a],g)
randomPermute x rgen = (body,rgen2) where
  (rgen1,rgen2) = split rgen
  body = elems $ runST $ do
    g   <- newSTRef rgen1
    arr <- newArray x
    let newInd st = do
          (i,rgen') <- liftM (randomR (st,n-1)) (readSTRef g)
          writeSTRef g rgen'
          return i
    forM_ [0..n-1] $ \i -> do
      j <- newInd i
      p <- readArray arr i
      q <- readArray arr j
      writeArray arr j p
      writeArray arr i q
    unsafeFreeze arr
  n = length x
  newArray :: [a] -> ST s (STArray s Int a)
  newArray x = newListArray (0,length x-1) x 
```

# windows - 下拉选择控件 - Windows 8 Metro - XAML

> ID：12113739
> 
> 赞同：10
> 
> 时间：2012-08-24T17:03:06.903
> 
> 标签：windows, xaml, drop-down-menu, controls, microsoft-metro

我想要下图中的下拉菜单：

![](../Images/ce71b27383b995042dfb6901f7047867.png) ![](../Images/22d755f4cef1437086eab27d4fbb75ee.png)

我不知道我是如何得到它们的。我想这些是某种组合框，但我不确定。谁能帮助我并提供 xaml 代码？！谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T10:54:11.023

我想您正在寻找**组合框**：[Windows 8 商店控件列表 (MSDN)](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465351.aspx)。要使用：

```
 <ComboBox x:Name="comboBox1" SelectionChanged="ComboBox_SelectionChanged" Width="100">
    <x:String>Item 1</x:String>
    <x:String>Item 2</x:String>
    <x:String>Item 3</x:String>
    </ComboBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:41:40.790

您将不得不使用弹出窗口。以下链接可能对您有所帮助

[http://rahulpnath.com/blog/windows-8-series-drop-down-button/](http://rahulpnath.com/blog/windows-8-series-drop-down-button/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:42:25.940

这些看起来像放置在某些弹出窗口中的列表框。Callisto 有一个我没见过的[Menu](https://github.com/timheuer/callisto/blob/master/src/Callisto/Controls/Menu/Menu.cs)控件，但从它的名称来看 - 它可能很相似（我认为你应该将它放在[Flyout](https://github.com/timheuer/callisto/blob/master/src/Callisto/Controls/Flyout/Flyout.cs)控件中）。

# wcf - 具有验证的互操作 netbeans wcf

> ID：12113741
> 
> 赞同：0
> 
> 时间：2012-08-24T17:03:13.310
> 
> 标签：wcf, netbeans, interop, microsoft-metro

我正在构建一个使用 Wcf 服务的应用程序，我需要它与 java 互操作。现在我使用 netbeans Metro 作为客户端。当使用 basichttpbinding 而不做一些特殊的事情（标准 wcf 应用程序）时，一切顺利。

当我尝试引入用户名并通过验证时，我陷入了真正的地狱。主要问题是认证和 ws 协议。- 所以我决定使用新的快速绑定来帮助我使用本教程： [http](http://webservices20.blogspot.be/2011/06/test-drive-shiny-new-wcf-interop.html) ://webservices20.blogspot.be/2011/06/test-drive-shiny-new-wcf-interop.html 我试过了一次又一次地失败。

所以我的问题是。

- 有没有一种方法可以使用简单的用户名密码验证方法，而不会让我从认证中得到所有的混乱？

- 是否有适用于 netbeans 的教程或工作解决方案

如果我真的需要，我会购买一个 ssl，但出于测试目的，我真的想避免这种情况。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T20:30:14.060

最简单的方法是使用您已经开始使用的 basichttpbinding。

将用户名和密码作为消息的一部分发送。

Basichttpbinding 可以使用 SSL 加密（传输安全），您应该使用它，这样您的用户名和密码就不会以明文形式通过网络发送。

# javascript - ExtJS 面板追加 html

> ID：12113744
> 
> 赞同：1
> 
> 时间：2012-08-24T17:03:21.860
> 
> 标签：javascript, dom, extjs, extjs4

我有一个使用这个配置对象创建的 extjs4 面板。

```
{ 
    title : 'Messages',
    region : 'north',
    height : 200,
    minSize : 75,
    maxSize : 250,
    cmargins : '0 0 5 0',
    html : '<i>Chat started on ' +  Ext.Date.format(dt, EI.datePattern)  + '</i>'
} 
```

现在我想在上面附加更多的 html。例如我想追加

```
<p><span class="user">me:</span><span class="how are you?"></span></p> 
```

有时我可以追加使用

```
 thePanel.body.insertHtml("beforeEnd", chatHtml); 
```

但我看到有时`.body`是不设置！所以我不能执行上面的代码。正确的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T22:17:08.523

面板的主体元素在面板的渲染事件触发后才可用。`childEls`这对于在任何组件的配置下列出的所有元素都是相同的。

有几种不同的方式可以呈现元素。这不是一个完整的列表。

1.  如果组件是容器的子项，则该组件将在父容器呈现时呈现。使用配置时使用卡片布局的容器（例如选项卡面板）是一个例外`deferredRender`。

2.  如果组件*不是*容器的子组件，但它正在使用`renderTo`配置，则即使它被隐藏，它也会在构造时呈现。

3.  如果一个非浮动组件正在使用该`autoRender`配置，该组件将在第一次显示时呈现，例如使用`panel.show()`. 如果它同时使用两者`autoRender`，`autoShow`那么它将在构造时呈现。

4.  windows等浮动组件默认为`autoShow: false`and `autoRender: true`，所以在调用之前不会渲染`win.show()`。如果设置`autoShow`为 true，它将在创建时呈现。

5.  使用配置的浮动组件`renderTo`将在创建时呈现并保持隐藏，除非也`autoShow`如上所述使用。

听起来您的面板是窗口的子面板，对吗？要使该面板立即呈现但保持隐藏状态，`renderTo: Ext.getBody()`请在父窗口上进行设置。

或者，您仍然可以在`panel.html`呈现面板之前访问该属性，并且任何更改都将在显示窗口时反映出来。因此，如果您需要访问内部内容但不能保证面板已被渲染，您可能会执行以下操作：

```
if (panel.body) {
    panel.body.insertHtml("beforeEnd", chatHtml);
} else {
    panel.html += chatHtml;
} 
```

最后一件事。如果你设置一个面板的配置然后渲染它，在你的原始内容之后`html`会有一个额外的 div 。`clearEl`在渲染之后调用`panel.body.insertHtml()`将把新的 HTML 放在这个 div 之后。这对你来说可能是也可能不是问题，但我想我还是会提到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:28:54.753

尝试使用 thePanel.getTargetEl()

从来源：

```
getTargetEl: function() {
    var me = this;
    return me.body || me.protoBody || me.frameBody || me.el;
} 
```

# ruby-on-rails-3 - Rails 模型使用 API 而不是数据库

> ID：12113749
> 
> 赞同：13
> 
> 时间：2012-08-24T17:03:50.367
> 
> 标签：ruby-on-rails-3, api, single-responsibility-principle

我正在重构一个当前使用数据库和 ActiveRecord 的 rails 应用程序，以便它使用 JSON API (Sinatra) 而不是数据库。

重构模型的最佳方法是什么？API 将返回所有与数据库相同的信息。事实上，它是同一个数据库，但为了可扩展性和需要访问数据的多个应用程序，我们需要将其转换为 API。理想情况下，只有模型需要更改，理想情况下我可以在 rails 应用程序中保留一些验证。

如何更改模型，以便它们通过 API 调用而不是 ActiveRecord 数据库调用来检索和保存实例？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-19T12:32:51.313

我认为您正在寻找类似[ActiveResource的东西](https://github.com/rails/activeresource)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-12T18:44:51.790

对于**Rails 4** ，请查看：

[https://github.com/whichdigital/active-rest-client](https://github.com/whichdigital/active-rest-client)

> 此 gem 用于以 ActiveRecord 样式访问 REST 服务。ActiveResource 已经为此存在，但它在资源命名不遵循 Rails 约定的情况下不起作用，它没有内置缓存，并且通常不那么灵活。

# wpf - 如何与 UserControl 类型对象的 Observable 集合绑定

> ID：12113764
> 
> 赞同：1
> 
> 时间：2012-08-24T17:05:08.607
> 
> 标签：wpf, data-binding, user-controls, telerik, observablecollection

我被困在 WPF 中的数据绑定问题上。以下是场景。

我有一个绑定到type的**Telerik** 。`RadTileView``ObservableCollection``MyItem`

```
public class MyItem : UserControl
    {
        public string Title { get; set; }
        public string Content { get; set; }
    } 
```

`ObservableCollection`正在被填充，

```
 private ObservableCollection<MyItem> items_ = null;
        public ObservableCollection<MyItem> TileItems
        {
            get 
            {
                if (items_ == null)
                {
                    items_ = new ObservableCollection<MyItem>();
                    items_.Add(new MyItem() { Title = "ABC", Content = "Test Content" });
                    items_.Add(new MyItem() { Title = "DEF", Content = "Test Content1" });
                    items_.Add(new MyItem() { Title = "GHI", Content = "Test Content2" });
                }

                return items_;
            }
            set 
            {
                items_= value;
                OnPropertyChanged("TileItems");
            }
        } 
```

而且`XAML`是

```
<DataTemplate x:Key="headerTemplate">
                        <TextBlock Text="{Binding Title, Converter={StaticResource debugconv}}"></TextBlock>
                    </DataTemplate>

<telerik:RadTileView x:Name="WidgetTileView"
                                      ItemsSource="{Binding TileItems}" ColumnWidth="Auto"
                              ItemTemplate="{StaticResource headerTemplate}">
                </telerik:RadTileView> 
```

当我运行上面的代码时，它显示三个空`RadTileView`但它们是空的，如图 ![空瓷砖](../Images/85adc0da937d39a14b0debc1447be3c0.png)

如果我改变`MyItem`as

```
 public class MyItem
    {
        public string Title { get; set; }
        public string Content { get; set; }
    } 
```

然后它开始按预期工作，如图 ![正确的 RadTileView](../Images/a1ca12824b944b9e031da84a8b2db283.png)

`MyItem`当我从继承时，我无法弄清楚数据绑定有什么问题`UserControl`？

**编辑：** 我的要求是在内容区域显示自定义用户控件，在`RadTileView`标题区域显示标题文本`RadTileView`，如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:07:52.410

如果项目不是数据，则控件将不会使用数据模板，简单明了。如果该类应该是数据，请不要继承（如果这样做，您也会破坏模型-视图-分离）*。*`UserControl`

该项目仅被评估为一个实体，`RadTileView`因此如果项目作为一个整体被认为是可显示的，则忽略数据模板。如果您必须这样做，则将 移动`UserControl`到一个属性并在 中使用它`ContentTemplate`（它只包含与包含 的属性的`ContentPresenter`绑定）。`Content``UserControl`

如果你想坚持模型-视图分离，你不应该从任何与 UI 相关的类继承并且你`Content`应该包含数据，然后可以在你想要的模板中进行模板`ContentTemplate`化`UserControls`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:19:13.323

我认为你不能这样做，因为你正在绑定 UIElements。因此，WPF 会将它们用作其项目，而不是您的类属性。

# php - PHP 到 MySql 选择查询不起作用

> ID：12113765
> 
> 赞同：0
> 
> 时间：2012-08-24T17:05:15.400
> 
> 标签：php, mysql

我正在尝试获取一个 php 页面以从数据库中检索，我是 php 新手，我已经用谷歌搜索并阅读过，但我只是没有得到它。我有一个链接到 php 的 htm 页面，因为我试图根据选中的复选框和在条件框中提交的信息返回一些数据。这是我到目前为止所拥有的，我一直在搞乱一些试图让它工作的查询，所以如果我能让一个工作，我就可以让剩下的做我想做的事。我知道我的代码可能不符合标准，但这不是我的职业，我只是一个试图让他的项目工作的学生。请引导我朝着正确的方向前进。

编辑：这是我拥有的一个学校项目，我必须使用他们在他们的服务器上拥有的东西，在这种情况下恰好是 mysql。我没有得到任何回报，没有错误或任何东西。当我从我的 htm 页面转到我的 php 页面时，什么也没有发生。我只是觉得我可能不得不从运行一个简单的查询开始，只是为了调试以确保我可以得到任何东西，然后从那里进行修改。我以前从未使用过复选框，也从未运行过查询，所以我不得不相信这就是我的错误所在。我所有的插入和更新语句都在我的其他页面上工作，但是代码用于选择语句并将它们放入变量的方式让我非常困惑。

我的htm页面：

```
 <html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<span class="spanFormat"><form><input type="button" value="Create a New Ticket" onClick="window.location.href='listinput.htm'"></form></span>
<span class="spanFormat"><form><input type="button" value="Resolve a Ticket" onClick="window.location.href='resolution.htm'"></form></span>
<span class="spanFormat"><form><input type="button" value="Search for a Ticket" onClick="window.location.href='searchinput.htm'"></form></span>
<span class="spanFormat"><form><input type="button" value="View Documentation" onClick="window.location.href='documentation.htm'"></form></span>
<?php 

    DEFINE('DB_USER',);
    DEFINE('DB_PASSWORD',);
    DEFINE('DB_NAME',);
    DEFINE('DB_HOST','localhost');

    $con = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);

    if(!$con){
    die('Could not connect: '.mysql_error());
    }
    $db_selected = mysql_select_db(DB_NAME, $con);
    if(!$db_selected){
    die('can\'t use'. DB_NAME . ':'.mysql_error());
    }
    ?>
    <form action="searchinput.php" method="post">
<p>
        How would you like to search?<br/>

        <input type="checkbox" name="formDoor[]" id="Ticket_ID"   value="Ticket_ID" />By Ticket Number<br />
        <input type="checkbox" name="formDoor[]" id="Last_Name"   value="Last_Name" />By Last Name<br />
        <input type="checkbox" name="formDoor[]" id="Station_ID"   value="Station_ID" />By Station ID<br />
        <input type="checkbox" name="formDoor[]" id="Date"   value="Date" />By Date<br />
        <input type="checkbox" name="formDoor[]" id="Description" value="Description" />By Description
    </p>

    <td>Criteria</td>
    <td><input type=text name="Criteria" size=30> </td>
    </form>
    <input type=submit name="submit" value="Search">
    </body>
</html> 
```

这是我的php：

```
 <html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<span class="spanFormat"><form><input type="button" value="Create a New Ticket" onClick="window.location.href='listinput.htm'"></form></span>
<span class="spanFormat"><form><input type="button" value="Resolve a Ticket" onClick="window.location.href='resolution.htm'"></form></span>
<span class="spanFormat"><form><input type="button" value="Search for a Ticket" onClick="window.location.href='searchinput.htm'"></form></span>
<span class="spanFormat"><form><input type="button" value="View Documentation" onClick="window.location.href='documentation.htm'"></form></span>
<?php

    DEFINE('DB_USER',);
    DEFINE('DB_PASSWORD',);
    DEFINE('DB_NAME',);
    DEFINE('DB_HOST','localhost');

    $con = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);

    if(!$con){
    die('Could not connect: '.mysql_error());
    }
    $db_selected = mysql_select_db(DB_NAME, $con);
    if(!$db_selected){
    die('can\'t use'. DB_NAME . ':'.mysql_error());
    }

    extract($_POST);

    $Ticket_ID = ($_POST['Criteria']);
    $Last_Name = ($_POST['Criteria']);
    $Station_ID = ($_POST['Criteria']);
    $Date = ($_POST['Criteria']);
    $Description = ($_POST['Criteria']);

if(isset($_POST['$Ticket_ID'])) 
{$sql = "select Ticket_ID, customer.Customer_ID, First_Name, Last_Name, Phone_Num, Email, stations.Station_ID, Room_ID, Floor_ID, building.Building_ID, Location, incident_sheet.Description, Summary, assign_groups.Group_ID, assign_groups.Description, resolutions.Resolution_ID, resolutions.Description from customer,stations,resolutions,assign_groups, building, incident_sheet WHERE customer.Customer_ID=incident_sheet.Customer_ID AND stations.Station_ID = customer.Station_ID AND building.Building_ID=stations.Building_ID AND resolutions.Resolution_ID = incident_sheet.Resolution_ID AND assign_groups.Group_ID = incident_sheet.Group_ID AND customer.Customer_ID = ($_POST[Criteria]);";

$result = mysql_query($sql, $con);

while($row = mysql_fetch_array($result))
{
$Ticket_ID = $row['Ticket_ID'];

echo
}
}
if(IsChecked('formDoor[]','Last_Name'))
{ $select_query = "select I.Ticket_ID, I.Customer_ID, I.Description, I.Date, C.Station_ID, C.First_Name, C.Last_Name, C.Phone_num, C.Email, S.Building_ID, S.Floor_ID, S.Room_ID, B.Location, A.Assign_Groups, R.Resolutions;
from incident_sheet I, customer C, stations S, building B, assign_groups A, resoultions R;
where I.Customer_ID = C.Customer_ID,
and C.Station_ID = S.Station_ID,
and S.Building_ID = B.Building_ID,
and I.Group_ID = A.Group_ID,
and I.Resoultion_ID = R.Resoultion_ID,
order by Last_Name;"
}
if(IsChecked('formDoor[]','Station_ID'))
{ $select_query = "select I.Ticket_ID, I.Customer_ID, I.Description, I.Date, C.Station_ID, C.First_Name, C.Last_Name, C.Phone_num, C.Email, S.Building_ID, S.Floor_ID, S.Room_ID, B.Location, A.Assign_Groups, R.Resolutions;
from incident_sheet I, customer C, stations S, building B, assign_groups A, resoultions R;
where I.Customer_ID = C.Customer_ID,
and C.Station_ID = S.Station_ID,
and S.Building_ID = B.Building_ID,
and I.Group_ID = A.Group_ID,
and I.Resoultion_ID = R.Resoultion_ID,
order by Station_ID;"
}
if(IsChecked('formDoor[]','Date'))
{ $select_query = "select I.Ticket_ID, I.Customer_ID, I.Description, I.Date, C.Station_ID, C.First_Name, C.Last_Name, C.Phone_num, C.Email, S.Building_ID, S.Floor_ID, S.Room_ID, B.Location, A.Assign_Groups, R.Resolutions;
from incident_sheet I, customer C, stations S, building B, assign_groups A, resoultions R;
where I.Customer_ID = C.Customer_ID,
and C.Station_ID = S.Station_ID,
and S.Building_ID = B.Building_ID,
and I.Group_ID = A.Group_ID,
and I.Resoultion_ID = R.Resoultion_ID,
order by Date;"
}
if(IsChecked('formDoor[]','Description'))
{ $select_query = "select I.Ticket_ID, I.Customer_ID, I.Description, I.Date, C.Station_ID, C.First_Name, C.Last_Name, C.Phone_num, C.Email, S.Building_ID, S.Floor_ID, S.Room_ID, B.Location, A.Assign_Groups, R.Resolutions;
from incident_sheet I, customer C, stations S, building B, assign_groups A, resoultions R;
where I.Customer_ID = C.Customer_ID,
and C.Station_ID = S.Station_ID,
and S.Building_ID = B.Building_ID,
and I.Group_ID = A.Group_ID,
and I.Resoultion_ID = R.Resoultion_ID,
order by Description;"
}
?>
<h3>This is the current ticket information: </h3>
    <p>

    <table>
        <tr>
        <td>First Name:</td>
        <td><?php echo ("$First_Name"); ?></td>
        </tr>
        <tr>
            <td>Last Name:</td>
            <td><?php echo "$Last_Name"; ?></td>
        </tr>
        <tr>
            <td>Email:</td>
            <td><?php echo "$Email"; ?></td>
        </tr>
        <tr>
            <td>Phone Number:</td>
            <td><?php echo "$Phone_Num"; ?></td>
        </tr>
        <tr>
            <td>Building:</td>
            <td><?php echo "$Building_ID"; ?></td>
        </tr>
        <tr>
            <td>Floor:</td>
            <td><?php echo "$Floor_ID"; ?></td>
        </tr>
        <tr>
            <td>Room:</td>
            <td><?php echo "$Room_ID"; ?></td>
        </tr>
        <tr>
            <td>Group:</td>
            <td><?php echo "$Group_ID"; ?></td>
        </tr>
        <tr>
            <td>Description:</td>
            <td><?php echo "$Description"; ?></td>
        </tr>

    </table>

    </p>
    </body>
    </html> 
```

非常感谢您为使其正常工作提供的任何帮助，感谢您抽出宝贵时间查看此内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T01:37:12.670

你没有忘记定义这个值，对吧？不显示调试信息的服务器不会向您显示任何内容（可能是 500 错误页面）

```
DEFINE('DB_USER',<something>);
DEFINE('DB_PASSWORD',<something>);
DEFINE('DB_NAME',<something>);
DEFINE('DB_HOST','localhost'); 
```

# debugging - Chrome 开发者工具：缺少脚本选项卡

> ID：12113769
> 
> 赞同：25
> 
> 时间：2012-08-24T17:05:27.427
> 
> 标签：debugging, gwt, google-chrome

Web 浏览器 - chrome 版本 21.0.1180.82 和版本 23.0.1244.0 canary 操作系统 - mac osx 10.8

它应该是什么样子：

![在此处输入图像描述](../Images/8ff9e98a4a73c3c1ba274ee791c579a0.png)

在我看来，选项卡导航器中的“脚本”选项卡已替换为“源”图标。这给我带来了问题，因为我无法在超级开发模式下调试我的 GWT 应用程序。（我选择了“启用源地图”选项）

我还禁用了所有扩展。

欢迎任何建议

谢谢，

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-07T16:59:54.747

脚本选项卡已重命名为`Sources`如下所示：

![Chrome 23 示例](../Images/dd87fe775ba7169bba49fae3873daf9d.png)

要查看所有脚本/js 文件的列表，您需要使用弹出窗口（如图 2 所示）

chrome 23 就是这种情况，但将来可能会再次发生变化。

# rank - J 动词等级和加法

> ID：12113777
> 
> 赞同：4
> 
> 时间：2012-08-24T17:06:14.807
> 
> 标签：rank, j

我有一个 2x3 数组

```
a =. 2 3 $  2 3
   a
2 3 2
3 2 3 
```

我想使用 +/ 将所有元素加在一起得到 15。

所以

```
+/a
5 5 5 
```

嗯。这显然是在添加列。我知道 +/ 等级是 _ _ _ （即无穷大）并且 a 是等级 2。不幸的是，我无法将其转化为想象它为什么要添加列。（我正在阅读“J for C Programmers”）

所以只是为了好玩我做了：

```
+/"1 a
7 8 
```

所以现在它正在添加行。显然，我将 +/ 的等级更改为 1，它小于 2（a 的等级），这意味着......我不知道。为什么我现在要通过将形式无穷大切换为 1 来添加行？

关于什么

```
+/"0 a
2 3 2
3 2 3 
```

所以现在我们只是添加一个没有任何内容的单元格，所以我们得到一个等于原始 a 的数组。同样我不知道为什么，虽然我几乎可以通过一个论点来达到这里：动词等级小于（名词）等级，所以我们使用这个值，它是零，所以我们添加 0-cells， IE。我们依次单独添加每个单元格。

再一次祝你好运：

```
+/"2 a
5 5 5 
```

我再次添加列。我不知道当动词等级发生变化时选择添加哪些行/列/单元格的机制。我们正在添加列，但从我的观点来看，我们可以很容易地添加行。

如果可能的话，我想解释一下。正如我所说，我正在阅读一些文学作品，但我仍然觉得很难。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T18:28:28.213

当您有一个 n 数组时，您可以使用适当的等级访问每个嵌套“级别”。

### 名词的等级/形状

首先你有**原子**（等级0）：

```
a =: 1 
```

它们的形状 ( `$a`) 是空的。

然后你有**列表**（排名 1），它们只是一些放在一起的原子：

```
b =: a,a,a
b =: 3 # a
b =: 3 $ a 
```

它们的形状 ( `$b`) 是列表的长度。

```
$b
3 
```

然后，**表格**（排名 2）：列表放在一起（[缝合](http://www.jsoftware.com/help/dictionary/d321.htm)或其他）：

```
c =: b,.b,.b 
```

它们的形状是一个 2 项列表：行、列。

```
$c
3 3 
```

然后，直到**rank-n 数组**（rank n）。

### 动词的等级

动词的等级是一个稍微不同的故事。这是动词将应用的等级。所以，当你用 box-0 ( `<"0`) 一个名词时，你*总是*把这个名词的原子装箱，当你用 box-1 ( `<"1`) 时，你*总是*把名词的列表装箱，等等。例如：

```
 ]n =: 2 3 4 $ i.24
 0  1  2  3
 4  5  6  7
 8  9 10 11

12 13 14 15
16 17 18 19
20 21 22 23 
```

0级：

```
<"0 n
┌──┬──┬──┬──┐
│0 │1 │2 │3 │
├──┼──┼──┼──┤
│4 │5 │6 │7 │
├──┼──┼──┼──┤
│8 │9 │10│11│
└──┴──┴──┴──┘

┌──┬──┬──┬──┐
│12│13│14│15│
├──┼──┼──┼──┤
│16│17│18│19│
├──┼──┼──┼──┤
│20│21│22│23│
└──┴──┴──┴──┘ 
```

1级：

```
 <"1 n
┌───────────┬───────────┬───────────┐
│0 1 2 3    │4 5 6 7    │8 9 10 11  │
├───────────┼───────────┼───────────┤
│12 13 14 15│16 17 18 19│20 21 22 23│
└───────────┴───────────┴───────────┘ 
```

2级：

```
 <"2 n
┌─────────┬───────────┐
│0 1  2  3│12 13 14 15│
│4 5  6  7│16 17 18 19│
│8 9 10 11│20 21 22 23│
└─────────┴───────────┘ 
```

3级：

```
 <"3 n
┌───────────┐
│ 0  1  2  3│
│ 4  5  6  7│
│ 8  9 10 11│
│           │
│12 13 14 15│
│16 17 18 19│
│20 21 22 23│
└───────────┘ 
```

在此示例中，高于 3 的等级与 3 相同。

*您还可以使用负排名，顺便说一句，它从最高排名倒数。*

*您也可以混合排名。*

### 求和

您现在可以看到，改变 的等级如何改变`+/`求和的结果。例如，对`+/"1`每个 rank-1 列表求和：

```
 <"1 n
┌───────────┬───────────┬───────────┐
│0 1 2 3    │4 5 6 7    │8 9 10 11  │
├───────────┼───────────┼───────────┤
│12 13 14 15│16 17 18 19│20 21 22 23│
└───────────┴───────────┴───────────┘
   +/"1 n
 6 22 38
54 70 86 
```

要对 rank-n 数组求和，您必须执行 n `+/`s：

```
(+/^:3) n
276
+/+/+/ n
276 
```

或者您可以在求和之前解开 ( `,`) 数组：

```
+/,n
276 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T10:45:18.070

短语`+/"1`and`+/`似乎作用于矩阵的行和列，但这并不是对它们作用的准确描述，也无助于真正了解等级概念的简单性和强大功能。

让我们从理解这个短语开始`+/`（我们现在只限于单子形式，即只有一个正确的论点）。该短语由副词组成`/`，在这种情况下，副词将动词置于其左侧，`+`并将其插入右侧参数的项目之间。列表/向量的*项目*是列表中的数字/原子，因此`+/ 3 4 5 6`实际上只是`3 + 4 + 5 + 6`. 表/矩阵（等级 2）的项目是它的行（等级 1），等级 3 数组的项目是它的表（等级 2）

```
 ]a=: i. 2 3
0 1 2         NB. 1st item of a
3 4 5         NB. 2nd item of a

   ]b=: i. 2 3 4 
 0  1  2  3
 4  5  6  7   NB. 1st item of b
 8  9 10 11

12 13 14 15
16 17 18 19   NB. 2nd item of b
20 21 22 23 
```

请记住在其正确参数的项目之间`+/`插入：`+`

```
 +/ i. 2 3
3 5 7 
```

本质上只是：

```
 0 1 2 + 3 4 5
3 5 7 
```

和：

```
 +/ i. 2 3 4
12 14 16 18
20 22 24 26
28 30 32 34 
```

只是将两个矩阵相加

```
 (i. 3 4) + (12 + i. 3 4)
12 14 16 18
20 22 24 26
28 30 32 34 
```

那么秩连词是如何`"`适应的呢？我发现考虑它的最简单方法是，您可以使用它来控制一次将多少正确参数提供给动词。So`+/"1`与 相同`+/`，但任何正确的参数一次只会被馈送到`+/`列表/向量/行。所以：

```
 +/"1 i. 2 3 
```

一次将矩阵馈送`i. 2 3`到`+/`一行。`+/`然后将`+`在行的项目之间插入，评估表达式，然后移动到下一个块，将每个块的结果附加到一起。换句话说，实际的计算看起来像这样

```
 +/"1 i. 2 3 -->
   (+/ 0 1 2) , (+/ 3 4 5) -->
   (0 + 1 + 2) , (3 + 4 + 5)
3 12

   +/"1 i. 2 3 4   NB. Feed right arg to +/ a row-at-a-time
 6 22 38           NB. + inserted between items of each row
54 70 86           NB. result has row for each item (matrix) in original argument

   +/"2 i. 2 3 4   NB. feed right arg to +/ a table/matrix-at-a-time
12 15 18 21        NB. + inserted between rows of each matrix
48 51 54 57

   +/"0 i. 2 3 4   NB. feed right arg to +/ an atom at a time
0  1  2  3         NB. this is essentially an identity function because
4  5  6  7         NB. the sum of a number is itself: (+/ 3) is just 3.
8  9 10 11

12 13 14 15
16 17 18 19
20 21 22 23 
```

# java - 不能使用 Axis2 自上而下方法为二维数组使用自动生成的包装类

> ID：12113779
> 
> 赞同：0
> 
> 时间：2012-08-24T17:06:20.033
> 
> 标签：java, web-services, axis2, wrapper

我使用来自 WSDL 的自顶向下方法创建了一个带有 Axis2 版本 1.6 的 Web 服务。有一段时间一切正常（即部署了 Web 服务）。然后我开始实现axis2生成的Web服务框架。当我到达一个应该返回 a 的方法时，问题就出现了`String[][]`，当然它是被包装的，因为 Axis2 将返回对象生成为包装对象。原来包装类包含一个类 ( `StringArrayArray`)。当我尝试设置时，`StringArrayArray`我意识到这是另一个包装器，当我去检查如何将值设置为 a`StringArrayArray`时，它只包含一种设置方法`setValue(org.apache.axiom.om.OMElement[] value)`。我到处找了，我仍然不知道如何使用那个接口来返回`String[][]`我需要返回的东西。在另一个返回一个`String[]`（这被包装为 a `StringArray`）我发现只需创建一个`StringArray`类型的对象并将其设置为`StringArray.setValue(String[])`有效。不幸的是，它与`String[][]`.

我需要知道如何让它工作，以便能够在 web 服务中返回数据。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:42:11.433

您不能将 String[] 视为 String[][] 数组吗？本质上，它们是相同的，只是迭代不同。

# c# - 如何强制转换泛型类型以适应另一个泛型方法

> ID：12113780
> 
> 赞同：7
> 
> 时间：2012-08-24T17:06:19.063
> 
> 标签：c#, generics

我在 A 类中有一个方法

```
public IList<T> MyMethod<T>() where T:AObject 
```

我想在另一个泛型类 B 中调用这个方法。这个 T 没有任何约束。

```
public mehtodInClassB(){
    if (typeof(AObject)==typeof(T))
    {
      //Compile error here, how can I cast the T to a AObject Type
      //Get the MyMethod data
        A a = new A();
        a.MyMethod<T>();
    }
} 
```

C类继承自AObject类。

```
B<C> b = new B<C>();
b.mehtodInClassB() 
```

有什么想法吗？

**在你的提醒之后......更新：**

是的。我真正想做的是

```
typeof(AObject).IsAssignableFrom(typeof(T)) 
```

不是

```
typeof(AObject)==typeof(T)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T17:11:00.707

如果您知道这`T`是一个`AObject`，为什么不直接提供`AObject`作为类型参数`MyMethod`：

```
if (typeof(AObject).IsAssignableFrom(typeof(T)))
{
  //Compile error here, how can I cast the T to a AObject Type
  //Get the MyMethod data
    d.MyMethod<AObject>();
} 
```

如果`AObject`不能作为类型参数提供，则必须`T`在调用方法中设置相同的约束：

```
void Caller<T>() where T: AObject
{
    // ...

    d.MyMethod<T>();

    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:09:11.700

你不能这样做，除非你对包含方法施加相同的约束。泛型是在编译时检查的，所以你不能做出这样的运行时决定。

或者，您可以使用反射来调用该方法，它只需要更多的代码。

有关如何执行此操作的更多信息，请参阅此 SO 问题：[如何使用反射调用泛型方法？](https://stackoverflow.com/questions/232535/how-to-use-reflection-to-call-generic-method)

# javascript - 这里有更优雅/干燥/可维护的 JS 解决方案吗？

> ID：12113782
> 
> 赞同：0
> 
> 时间：2012-08-24T17:06:26.653
> 
> 标签：javascript, jquery, oop

我最初是通过在编写这段代码时尝试使用 JS 最佳实践来开始我的任务的，但我很挣扎，所以我只是把它写成一个大杂烩来让它工作，然后试图在事后清理它。（你可能会争辩说这不是一个好主意，但这是我现在能做的最好的事情。）

我的老板建议我尝试使用自定义触发器和事件，但这似乎并不是最好的方法。我还阅读[了 Rebecca Murphy 关于 OOJS 的这篇文章](http://rmurphey.com/blog/2009/10/15/using-objects-to-organize-your-code/)，似乎它可能有答案，但我就是无法到达那里。

请记住，虽然我绝对是专门寻找一种更优雅（并且更少依赖于嵌套的 if 语句）的方式来编写这个并且绝对感谢任何关于这件事的帮助，但我也在寻找可以提供帮助的模式我在这里解决了我更大的文体缺陷并成为一个更好的程序员。例如，我知道这是遍历 DOM 的最笨拙和最慢的方法。

一个重要的注意事项：在这种情况下，我无法控制很多标记（除了将类添加为 JS/CSS 挂钩），因为它是由 SimpleForm Ruby gem 生成的（由于我的低，我无法链接到它分数）。CSS 是无关紧要的。所以它真的只是JS。

**语境**

根据选择或单选按钮选择显示/隐藏某些内容。

编辑：对不起，我的 HTML 在这里变得很奇怪，所以我只是做了一个[jsFiddle](http://jsfiddle.net/UySfb/1/)。

编辑 2：我们使用的是 jQuery 1.6.4，所以如果你想知道我为什么使用`.delegate`而不是`.on`，那就是原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:22:14.537

您还可以通过删除重复的代码来显示/隐藏项目来保持干燥。这是一个非常简单的改进方法：

```
function changeElements (show_elements, hide_elements) {
    if (show_elements === null) {
        // code to hide all
    }

    container.siblings(show_elements).slideDown();
    container.siblings(hide_elements).slideUp();
} 
```

然后要使用该功能，只需给它分别显示和隐藏的选择器：

```
changeElements('.deceased', '.living, .other-illnesses, .cancer-info'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:29:02.410

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T17:14:11.143

有几点很明显：

1.  不要`$(this)`重复评估 - 只做一次，然后缓存结果
2.  同样对于`selected.index()`
3.  对 and使用简单的包装器`.slideUp`，`.slideDown('fast')`这样您就不会一遍又一遍地重复这些操作，并且可以在需要时仅在一个地方更改动画。

最后一个块可以这样写：

```
var $next = $(this).closest('.control-group').next();
if ($(this).val() === 'true') {
    $next.slideUp();
} else {
    $next.slideDown();
} 
```

事实上，整个`if`块可以这样写，虽然有些人可能觉得这有点*太*简洁了：

```
$next[$(this).val() === 'true') ? 'slideDown' : 'slideUp'](); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T17:15:20.953

两件小事（除了提到的两个 Alnitak）：

1）不要使用现场（见[http://bitovi.com/blog/2011/04/why-you-should-never-use-jquery-live.html](http://bitovi.com/blog/2011/04/why-you-should-never-use-jquery-live.html)，或任何关于该主题的SO帖子）

2）`$(document).ready(function(){`可以只是`$(function(){`

除此之外，您的代码基本上没有任何问题，老实说，对于这么小的一部分，我认为您可能想多了。如果您对这些元素中的每一个都使用说 Backbone 视图，那么您可能想要切换到事件驱动的方法，但这对于像您所拥有的那样小/简单的东西来说太过分了。

# javascript - 更改graphiti中的默认连接路由器？

> ID：12113783
> 
> 赞同：0
> 
> 时间：2012-08-24T17:06:26.897
> 
> 标签：javascript, graphiti-js

当您在 graphiti 中连接两个端口（通过鼠标拖动）时，将使用默认连接路由器。如何将其更改为 bezierConnectionRouter ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:41:45.353

您可以在代码开头使用以下内容 draw2d.Connection.DEFAULT_ROUTER = new draw2d.layout.connection.ManhattanBridgedConnectionRouter(); （或您需要的其他类型的路由器）

# android - OpenGL ES 2 表面上的尺寸

> ID：12113784
> 
> 赞同：0
> 
> 时间：2012-08-24T17:06:30.937
> 
> 标签：android, opengl-es

我已经阅读了一些关于 OpenGL 是什么以及 OpenGL 如何在代码中工作的教程，但我根本不明白你是如何使用它的，就像你使用画布一样。

在所有教程中，他们向我展示了 OpenGL 能够绘制我想要的任何对象，但总是使用诸如“1.0f、1.0f、0.0f”、“-1.0f、-1.0f、0.0f”之类的顶点示例和“0.0f，0.0f，0.0f”。我假设浮点数代表像素，这意味着我的顶点在 A (1px/1px/0px)、B (0px/0px/0px) 和 C (-1px,-1px,-1px) 上。因此，如果我从附近（例如 0/0/-10）查看我的新三角形，那么我可以看到它。如果我从远处（例如 0/0/-500）查看它，那么我看不到它，因为它只有几个 px² 大。我对吗？

如果我是对的，所有这些浮点数都代表像素。意味着如果我从足够远的地方查看我的 OpenGL-Surface，我可以看到屏幕及其原始尺寸的像素，不是吗？那么我如何确定距离，我必须在“GLU.gluLookAT（GL，x，y，DISTANCE，...）”中设置？以及如何将坐标平面移动到屏幕的左上角或更好的左下角？

如果我能够做到这一点，我的视点 (GLU.gluLookAt(...)) 位于 x=screen_width / 2、y=screen_height / 2 和 z=?。在那种情况下，我不会看到直接在我“下方”的对象，只是在尺寸上，以及所有其他对象（例如在 x=0、y=0、z=0 或 x=screen_width 上， y=screen_height, z=0) 从其他方向？我的意思是，我不会看到它们以另一种方式变形/成形吗？

我只想使用 OpenGL，因为它更快，并且因为我想学习如何处理它，但我想在我的对象上拥有相同的视图，就像在画布上一样。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:19:25.177

这些浮点数不代表像素。它们只是 OpenGL 坐标系中的单位。最终绘制的像素是图形处理管道对输入数据执行的转换的组合，您通常不直接控制它们。

# c# - 数据绑定Datagridview上的IComparer排序

> ID：12113790
> 
> 赞同：1
> 
> 时间：2012-08-24T17:06:51.470
> 
> 标签：c#, winforms, datagridview

我有一个数据绑定的 DataGridView，我正在尝试使用 IComparer 对其进行排序。

当我尝试应用我的排序时，我收到此错误：

> DataGridView 控件是数据绑定的。控件不能使用比较器来执行排序操作。

我的排序技术基于[此链接](http://msdn.microsoft.com/en-us/library/ms171608.aspx)。

仅供参考，我试图通过使用它们的标签值来比较位图。

```
public int Compare(object x, object y)
{
    DataGridViewRow DataGridViewRow1 = (DataGridViewRow)x;
    DataGridViewRow DataGridViewRow2 = (DataGridViewRow)y;

    // Try to sort based on the tag 
    int CompareResult = System.String.Compare(
        DataGridViewRow1.Cells[1].Tag.ToString(),
        DataGridViewRow2.Cells[1].Tag.ToString());

    return CompareResult * sortOrderModifier;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:17:51.407

据我所知，无法使用链接文章中显示的方法对数据绑定 DatagridView 进行排序。

您要做的是对底层容器进行排序。如果您使用的是 DataTable，则无法直接对其进行排序。

您可以做的是使用 Linq 的 OrderBy 并将其传递给您的自定义比较器。之后，在您的 linq 查询上调用 AsDataView() 并将您的 DataGridView 绑定到此 DataView。

像这样的东西：

```
 RowComparer comp = new RowComparer();
 var query = northwindDataSet.Customers.AsEnumerable().OrderBy(q => q, comp);
 DataView dv = query.AsDataView();

 customersBindingSource.DataSource = dv; 
```

请注意，我在此示例中使用了 DataTable 和 BindingSource，但您应该明白了 :-)

希望这可以帮助

# objective-c - 是否有用于 flagsChanged: 的 KeyUp: 方法？

> ID：12113795
> 
> 赞同：2
> 
> 时间：2012-08-24T17:07:36.883
> 
> 标签：objective-c, nsresponder

我已经`- (void)flagsChanged:(NSEvent *)theEvent`在我的应用程序中实现了该方法。当我按住 [alt] 键时，它工作正常。该方法仅在按下键时发送，但在我再次松开时不会发送。`- (void)keyUp:(NSEvent *)theEvent`不会被调用。无论如何可以查看 [alt] 键何时释放？

这是代码：

```
- (void)flagsChanged:(NSEvent *)theEvent
{
    if([theEvent modifierFlags] & NSAlternateKeyMask)
    {
        NSLog(@"alt is down!!!");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T17:27:31.647

好的。我真的需要更多地测试代码。记录 NSEvent 后，我​​注意到该`keyUp`方法已经实现（感谢[Jonathan Grynspan](https://stackoverflow.com/users/265530/jonathan-grynspan)在评论中指出）。

所以现在我的代码是：

```
- (void)flagsChanged:(NSEvent *)theEvent
{
    if([theEvent modifierFlags] & NSAlternateKeyMask)
    {
        NSLog(@"alt is down!!!");
    }
    else if([theEvent keyCode] == 58)
    {
        NSLog(@"alt is up!!!");
    }
} 
```

这现在工作正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-05T14:51:45.837

您的代码因正确的 alt 而损坏。`NSAlternateKeyNask`已弃用。

```
- (void)flagsChanged:(NSEvent *)theEvent {
    if ([theEvent modifierFlags] & NSEventModifierFlagOption) {
        NSLog(@"alt is down!!!");
    } else if ([theEvent modifierFlags] | NSEventModifierFlagOption) {
        NSLog(@"alt is up!!!!!");
    }
} 
```

请注意，这些事件将在任何掩码更改时触发，例如，如果您按下`alt`然后`cmd`会有 2 个“key down”alt 事件。

# url-routing - 无法让 MiniProfiler 与 Asp.net Webform 一起使用

> ID：12113796
> 
> 赞同：1
> 
> 时间：2012-08-24T17:07:36.513
> 
> 标签：url-routing, webforms, mvc-mini-profiler

我是 MiniProfiler 的新手，并尝试让它工作。按照说明操作后，我遇到了错误 405：“不允许使用 HTTP 动词 POST 访问路径 '/Faconnect.Portal/mini-profiler-resources/results'。”

当我尝试直接链接时：

```
http://localhost/mini-profiler-resources/results?id=b5183613-a22a-4c59-836a-d5f066de30ef 
```

它给了我错误：找不到页面

所以我的假设是路由不适用于我的网站。（当我启动 MiniProfiler demo webforms 应用程序时它可以工作）

我已经包含了以下配置

```
 <modules runAllManagedModulesForAllRequests="true"/>
      <add name="MiniProfiler" path="mini-profiler-resources/*" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
      <add name="UrlRoutingModule1" path="mini-profiler*.js" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
      <add name="UrlRoutingModule2" path="mini-profiler*.css" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
      <add name="UrlRoutingModule3" path="mini-profiler*.tmpl" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" /> 
```

我正在使用 Windows XP、Visual Studio 2010、Cassini、ASP.net 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T04:34:47.983

经过几个小时的努力，我找到了背后的原因。我的网站具有以下格式

```
http://localhost:9999/App.Module1/... 
```

这里的问题是“。” 在路径中。Cassini 或 MiniProfiler 以某种方式禁止它，我不知道。去掉那个小家伙，问题就解决了。

# google-app-engine - GAE HRD 迁移后如何清理应用程序

> ID：12113803
> 
> 赞同：3
> 
> 时间：2012-08-24T17:08:06.073
> 
> 标签：google-app-engine, migration

我有许多应用程序要从 GAE 主/从迁移到 GAE HRD。

迁移后，我有“旧”和“新”GAE 应用程序，类似于：

foo.appspot.com（主/从） foo-hrd.appspot.com（HRD）

我使用控制台，以便对 foo.appspot.com 的请求神奇地重定向到 foo-hrd.appspot.com

任何人都可以验证在所有这些之后使用 GAE 控制台删除 foo.appspot.com是*安全的。*具体来说，我可以在迁移后删除我的旧应用程序，但是当我删除我的旧应用程序时，旧 URL foo.appspot.com 不会“消失”？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:28:39.560

从[这里](https://developers.google.com/appengine/docs/adminconsole/migration)的文档- 特别是：

*“重要提示：作为最后一步，您将使旧应用程序 ID 成为新应用程序 ID 的“别名”；因此，如果用户在 old-name.appspot.com 上浏览您的应用程序，他们将看到您的新应用程序（您可能会认为是 new-name.appspot.com）。迁移后，您无需将用户指向或将文档更新到新 URL。执行此迁移时，您不会产生任何计费费用。”*

我由此推断您可以安全地删除旧文件。关于您的旧网址 - 只要您正确设置了新网址，您似乎就可以删除它。这是关于后一个问题的[讨论](http://productforums.google.com/forum/#!topic/apps/cJhiIbeq-zU)，您可能会觉得有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:21:48.417

如果您担心，该 URL 将永远无法重复使用：“但是，一旦您的应用程序被实际删除，您就无法恢复其状态或数据。仅保留其应用程序 ID（并且永远不能重复使用）。”

此外，禁用应用程序需要 72 小时才能永久删除它 - 让您有足够的时间来识别任何意外后果。

这里有更多信息，虽然我确定你已经检查过了？： [https ://developers.google.com/appengine/docs/adminconsole/applicationsettings#Disable_or_Delete_Your_Application](https://developers.google.com/appengine/docs/adminconsole/applicationsettings#Disable_or_Delete_Your_Application)

# jquery - 如何在fancybox中移动关闭按钮？

> ID：12113806
> 
> 赞同：0
> 
> 时间：2012-08-24T17:08:11.000
> 
> 标签：jquery, fancybox, fancybox-2

我需要在 fancybox 2 脚本中更改关闭按钮的位置。想不通怎么弄。请帮忙。 [http://squaretwo.ru/fancybox.jpg](http://squaretwo.ru/fancybox.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:17:02.327

fancybox 关闭按钮由 css 文件（jquery.fancybox.css）管理，因此请尝试更改它的属性（顶部和右侧）以将其放在您想要的位置，这是我的关闭按钮 css：

```
.fancybox-close {
    position: absolute;
    top: -18px;
    right: -18px;
    width: 36px;
    height: 36px;
    cursor: pointer;
    z-index: 8040;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:13:13.233

我是怎么做的：

```
#fancybox-close {
    right: 20px !important;
    top: 12px !important;
} 
```

# facebook - Facebook 提要帖子的链接在当前浏览器窗口中打开

> ID：12113810
> 
> 赞同：0
> 
> 时间：2012-08-24T17:08:57.377
> 
> 标签：facebook, facebook-graph-api, facebook-android-sdk

我正在尝试使用 Android SDK 发布链接。

单击我的帖子锚不会打开新的浏览器窗口，而是使用当前选项卡（facebook 个人资料/新闻提要）。这会导致用户丢失他/她的 faecbook 浏览器选项卡。

在我看来，这不像预期的行为。其他应用程序（youtube、NewYorkTimes）确实会打开一个新标签。也许它是某种相关的，我的应用程序的**站点 url**和**画布 url**都设置为提要的链接属性指向的相同 URL。

检查锚的来源，我发现它缺少`target='_blank'`HTML 属性（youtube 视频帖子确实具有该属性）。

## 编辑：

也许我没有说清楚......这里的问题不在于将提要发布到用户墙上的阶段。该问题仅在使用**提要对话框**成功发布后，在用户墙上单击该帖子（帖子的附加图片或链接）时发生。这样做时，您将被重定向到当前浏览器选项卡上的链接地址（Facebook 外）。

## 编辑2：

我正在使用别人的代码，它是一个 Cordova (Phonegap) facebook 插件。

@Malione，我使用的完整代码可以在[https://github.com/mgcrea/cordova-facebook-connect](https://github.com/mgcrea/cordova-facebook-connect)下找到。

我复制粘贴了一个可能是相关功能的功能（位于 下`src\com\facebook\android\Facebook.java`），并添加了 2 条日志行，它们也可能有帮助：

```
 /**
 * Cordova interface to display a dialog
 */
public PluginResult dialog(final JSONArray args, final String callbackId) throws JSONException, FileNotFoundException, MalformedURLException, IOException {
    Log.d(CLASS, "dialog() :" + args.toString());
    JSONObject params = args.getJSONObject(0);
    PluginResult pluginResult = new PluginResult(PluginResult.Status.NO_RESULT);

    final String method = params.has("method") ? params.getString("method") : "feed";
    JSONObject optionsObject = (JSONObject)params.get("params");
    final Bundle options = new Bundle();
    Iterator<?> keys = optionsObject.keys();
    while( keys.hasNext() ){
        String key = (String)keys.next();
        options.putString(key, optionsObject.getString(key));
        //if(optionsObject.get(key) instanceof JSONObject)
    }

    final FacebookConnect me = this;
    Runnable runnable = new Runnable() {
        public void run() {
            Log.d("Roei ------->>>>>>>Dialog options:", options.toString());
            Log.d("Roei ------->>>>>>>Dialog context:", me.cordova.getContext().toString() );
            me.getFacebook().dialog(me.cordova.getContext(), method, options, new RegularDialogListener(me, callbackId));
        };
    };
    pluginResult.setKeepCallback(true);
    this.cordova.getActivity().runOnUiThread(runnable);

    return pluginResult;
} 
```

这是日志文件的输出：

```
08-28 20:21:18.015: D/CordovaLog(25340): picture: https://surf-space.com/wp-content/uploads/spots/user_reports/default/surf-report.jpg
08-28 20:21:18.015: D/CordovaLog(25340): : Line 1172087949 : picture: https://surf-space.com/wp-content/uploads/spots/user_reports/default/surf-report.jpg
08-28 20:21:18.015: I/Web Console(25340): picture: https://surf-space.com/wp-content/uploads/spots/user_reports/default/surf-report.jpg at :1172087949
08-28 20:21:18.025: D/dalvikvm(25340): GC_CONCURRENT freed 395K, 49% free 3328K/6471K, external 598K/1065K, paused 6ms+3ms
08-28 20:21:18.035: D/FacebookConnect(25340): dialog() :[{"method":"feed","params":{"picture":"https:\/\/surf-space.com\/wp-content\/uploads\/spots\/user_reports\/default\/surf-report.jpg",
"method":"feed","description":"Wave height: 1.3 Meters<center \/>Surf conditions: Fine<center \/>","link":"https:\/\/surf-space.com\/spots\/israel\/","name":"Roei Bahumi posted a surf report for: Neurim, Netanya"}}]
08-28 20:21:18.035: D/Roei ------->>>>>>>Dialog options:(25340): Bundle[{picture=https://surf-space.com/wp-content/uploads/spots/user_reports/default/surf-report.jpg, method=feed, description=Wave height: 1.3 
Meters<center />Surf conditions: Fine<center />, name=Roei Bahumi posted a surf report for: Neurim, Netanya, link=https://surf-space.com/spots/israel/}]
08-28 20:21:18.035: D/DroidGap(25340): This will be deprecated December 2012
08-28 20:21:18.035: D/Roei ------->>>>>>>Dialog context:(25340): com.surf_space.surf_space4.MainActivity@405eb938
08-28 20:21:18.035: D/DroidGap(25340): This will be deprecated December 2012
08-28 20:21:19.897: W/InputManagerService(171): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@40a82a20
08-28 20:21:28.125: D/FacebookConnect(25340): RegularDialogListener::onComplete() Bundle[{post_id=839443974_490613954283080}]
08-28 20:21:28.155: D/CordovaLog(25340): FacebookConnect.dialog:{"post_id":"839443974_490613954283080"}
08-28 20:21:28.155: D/CordovaLog(25340): : Line 1172088957 : FacebookConnect.dialog:{"post_id":"839443974_490613954283080"}
08-28 20:21:28.155: I/Web Console(25340): FacebookConnect.dialog:{"post_id":"839443974_490613954283080"} at :1172088957 
```

这是您正在谈论的代码的一部分吗？您是否看到发送到 facebook 的数据中缺少某些内容？

如果没有，您能否将我引导至 Facebook Android SDK 文档页面，该页面解释了如何设置`target='_blank'`，甚至显示了这样做的示例请求，我将不胜感激（并且还将知道在代码中寻找什么）。

# r - 使用 ggplot2 facet_wrap 在地理点上绘制图形

> ID：12113817
> 
> 赞同：3
> 
> 时间：2012-08-24T17:09:12.267
> 
> 标签：r, ggplot2

我想知道这是否对ggplot要求太多。我正在尝试使用 facet_grid 在与它们相关的地理区域上绘制一些图表结果似乎在正轨上，但是在正确缩放比例以及摆脱未使用的网格框时存在一些问题。我想知道是否有人知道如何调整它以使其工作？

该示例基于内置的美国州数据集。

任何帮助表示赞赏！

```
 # My failed attempt to regional summary graphs plotted over the region centroid (to overlay onto map):
# example based on the States dataset

require(ggplot2)

# Approx centroid coordinates for the US regions - I created these as the information is missing from the dataset
lat <- c(32L, 42L, 42L, 32L, 42L, 42L, 43L, 32L, 32L, 32L, 42L, 42L, 43L, 43L, 43L, 43L, 32L, 32L, 43L, 32L, 43L, 43L, 43L, 32L, 43L, 42L, 43L, 42L, 43L, 43L, 42L, 43L, 32L, 43L, 43L, 32L, 42L, 43L, 43L, 32L, 43L, 32L, 32L, 42L, 43L, 32L, 42L, 32L, 43L, 42L)
lon <- c(-88L, -114L, -114L, -88L, -114L, -114L, -73L, -88L, -88L, -88L, -114L, -114L, -91L, -91L, -91L, -91L, -88L, -88L, -73L, -88L, -73L, -91L, -91L, -88L, -91L, -114L, -91L, -114L, -73L, -73L, -114L, -73L, -88L, -91L, -91L, -88L, -114L, -73L, -73L, -88L, -91L, -88L, -88L, -114L, -73L, -88L, -114L, -88L, -91L, -114L)

region.centres <- data.frame(lon = lon, lat = lat)

state.x77 <- data.frame(state.x77)
state.x77$State <- row.names(state.x77)
region <- data.frame(Region = as.character(state.region))
data <- data.frame(c(data.frame(state.x77), region, region.centres))

# I can plot a random summary graph for each region:

p <- ggplot(data, aes(Income, colour = 'red')) +
  geom_density(alpha = 0.2)

# But trying to plot onto centroid nearly works but results in loss of geographical positional accuracy
# and includes various graphs that fill the empty grid slots but are not necessary
p + facet_grid(lat ~ lon, space = "free", drop=T)

# How can I get uniform discrete graphs to sit over the centroid for each region? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:06:54.640

也许注释比分面更适合您的用例。在您自己的代码之后尝试以下操作。注释需要大量手动操作，但应该可以完成工作。

```
library(maps)
states = data.frame(map("state", plot=FALSE)[c("x", "y")])
data.south = subset(data, lon == -88 & lat == 32)
overlay = qplot(data.south$Income, geom="density", color="red")
plot = (ggplot(states, aes(x, y))
        + geom_path()
        + annotation_custom(grob=ggplotGrob(overlay),
                            xmin=-88-2,
                            xmax=-88+2,
                            ymin=32-6,
                            ymax=32+6))

print(plot) 
```

`annotation_custom`在`ggplot2`0.9.0 中添加。看

[http://cloud.github.com/downloads/hadley/ggplot2/guide-col.pdf](http://cloud.github.com/downloads/hadley/ggplot2/guide-col.pdf)

# c - 在 if 语句中无法重新分配内存

> ID：12113819
> 
> 赞同：0
> 
> 时间：2012-08-24T17:09:19.673
> 
> 标签：c, if-statement, realloc

当尝试重新分配内存时，我在使用此代码时崩溃：

```
//value of i is currently 4096
while((c = recv(sock, htmlbff + q, MAXDATASIZE, 0)) > 0)
{
    if((i - q) < MAXDATASIZE)
    {
            i *= 2;
            if(!(tmp = realloc(htmlbff, i)))
            {
                free(htmlbff);
                printf("\nError! Memory allocation failed!");
                return 0x00;
            }
            htmlbff = tmp;
    }
    q += c;
} 
```

它由于内存泄漏而崩溃....但是以下代码不会崩溃：

```
while((c = recv(sock, htmlbff + q, MAXDATASIZE, 0)) > 0)
{
    if((i - q) < MAXDATASIZE)
    {
        i *= 2;
        if(!(tmp = realloc(htmlbff, i)))
        {
            free(htmlbff);
            printf("\nError! Memory allocation failed!");
            return 0x00;
        }
    }
    htmlbff = tmp;
    q += c;
} 
```

移出`htmlbff = tmp;`if 语句如何解决这个问题？在 if 语句中似乎没有设置`htmlbff`为`tmp`...我非常困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T22:20:19.953

```
/*
 * I assume these exist, and more or less fit the requirements described.
 * They don't have to be these specific numbers, but they do need to have
 * the specified relationships in order for the code to work properly.
 */
#define MAXDATASIZE 4096    /* any number here is ok, subject to rules below */
int i = 4096;               // i >= MAXDATASIZE, or the first recv can trigger UB
char *htmlbff = malloc(i);  // ITYK you can't realloc memory that wasn't malloc'd
int q = 0;                  // q <= i-MAXDATASIZE

/* maybe other code */

while((c = recv(sock, htmlbff + q, MAXDATASIZE, 0)) > 0)
{
    /*
     * You've already just read up to MAXDATASIZE bytes.
     * if (i-q) < MAXDATASIZE, then **your buffer is already too small**
     * and that last `recv` may have overrun it.
     */
    if((i - q) < MAXDATASIZE)
    {
        ... reallocate htmlbff ...
    }
    /* Then you bump q...but too late.  lemme explain in a sec */
    q += c;
} 
```

假设您连续两次接收 4096 个字节。会发生什么：

1.  第一次读取读取 4096 个字节，从`htmlbff + 0`.
2.  由于`q`还是0，`i - q`== 4096，所以没有分配。
3.  `q`增加了 4096。
4.  第二次读取获得 4096 字节，从`htmlbff + 4096`. 但是等等，因为我们没有在上次迭代中调整它的大小，它`htmlbff`只有 4096 字节大，并且*整个读取都溢出了缓冲区！*
5.  如果幸运的话，溢出会导致段错误并且程序会死掉。如果你不是，那么 CPU 只是士兵，从这里开始的任何行为都是未定义的。在这一点上，甚至诊断进一步的问题也没有什么意义，因为 $DEITY 知道代码刚刚破坏了什么。

试试这个...

```
while((c = recv(sock, htmlbff + q, MAXDATASIZE, 0)) > 0)
{
    /* **First**, bump `q` past the stuff you just read */
    q += c;

    /*
     * **Now** check the buffer.  If i-q is too small at this point, the buffer is
     * legitimately too small for the next read, and also hasn't been overrun yet.
     */
    if((i - q) < MAXDATASIZE)
    {
        /* This temp pointer **really** should be limited in scope */
        char *double_sized;

        /* Note that otherwise, i'm using the "broken" resize code.
         * It should work fine.
         */
        i *= 2;
        if(!(double_sized = realloc(htmlbff, i)))
        {
            free(htmlbff);
            printf("\nError! Memory allocation failed!");
            return 0x00;
        }
        htmlbff = double_sized;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:55:10.377

您不能使用小于数据的缓冲区接收数据，然后重新分配它以适应更大的数据。

你需要重写你的代码：

```
buffer = malloc(MAXDATASIZE)
size_t received = 0    
while ((size_t sz = recv(sock, buffer+received, MAXDATASIZE-received, 0) > 0)
{
       received += sz 
}
buffer = realloc(buffer, received); 
```

我更改了变量名称，并为澄清而冗长。您的代码的奇怪行为可能是随机的，并且两个代码都是错误的。您可以在这里了解更多信息：[http ://en.wikipedia.org/wiki/C_dynamic_memory_allocation](http://en.wikipedia.org/wiki/C_dynamic_memory_allocation)

# c++ - 运行时检查失败 #3 - 变量 'menuChoice' 正在使用而未初始化

> ID：12113822
> 
> 赞同：0
> 
> 时间：2012-08-24T17:09:41.263
> 
> 标签：c++, runtime

时间错误，我无法弄清楚一切看起来都很好。这是我的主要内容：

```
#include "DoublyLinkedList.h"
#include "Stats.h"
#include <iostream>
#include <string>
using namespace std;

DoublyLinkedList<int>* statsList = new DoublyLinkedList<int>;

int main()
{
    Stats stats;
    bool exit = false;
    int menuChoice;
    while (!exit)
    {

        switch (menuChoice)
        {
        case 1:
        cout << "Insert";
        {

        stats.Details();

        }
            break;
        case 2:
        cout << "Delete";
        {
        }

            break;
        case 3:

            break;
        case 5:

            break;
        case 6:

            break;
        case 7:
            exit = true;
        default:
            break;
        }
    }

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:11:58.480

```
int menuChoice;
while (!exit)
{

    switch (menuChoice) 
```

你期望`menuChoice`成为什么？1？0? 42？

这是从未初始化的行为读取的未定义行为，您应该感谢它警告您的运行时，从而防止潜在的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:10:20.457

你从来没有设置`menuChoice`任何东西。您声明它并立即使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T17:12:46.637

您使用未初始化的变量。这种调试检查是件好事，但是如果您将项目切换到发布版本 - 您的代码将取决于“月相”。因此，在使用之前，请始终将变量初始化为某个值。

# .net - WCF (.NET 4.0) 是否提供检索网页 HTML 的功能？

> ID：12113825
> 
> 赞同：0
> 
> 时间：2012-08-24T17:09:44.353
> 
> 标签：.net, html, wcf, web-services, http

WCF (.NET 4.0) 是否提供检索网页 HTML 的功能？如果没有，在 .NET 4.0 中最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:36:58.630

如果您尝试获取 HTML 内容（用于缓存等），Eric J 是对的。如果您打算将网页的某些部分提取为数据，您可能需要查看 HTML Agility Pack。 [http://htmlagilitypack.codeplex.com/wikipage?title=示例](http://htmlagilitypack.codeplex.com/wikipage?title=Examples)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:15:41.873

您可以使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)检索 web paqe 的 HTML

```
using (WebClient web = new WebClient())
{
    var data = web.DownloadData(myURL);
} 
```

WebClient 存在一些限制，例如无法设置下载时间和不一致的进度事件。我编写了自己的子类来改进它。这是有用的代码。请注意，我正在处理的代码中有一个错误（请参阅[WebClient Subclass Disposed during Event Handler, Result is ObjectDisposedException](https://stackoverflow.com/q/12095948/141172)）。该错误的一个简单修复方法是在我的问题中提到的行周围放置一个 try/catch，但我试图了解该问题中的核心问题。

```
public class MyWebClient : WebClient, IDisposable
{
    public int Timeout { get; set; }
    public int TimeUntilFirstByte { get; set; }
    public int TimeBetweenProgressChanges { get; set; }

    public long PreviousBytesReceived { get; private set; }
    public long BytesNotNotified { get; private set; }

    public string Error { get; private set; }
    public bool HasError { get { return Error != null; } }

    private bool firstByteReceived = false;
    private bool success = true;
    private bool cancelDueToError = false;

    private EventWaitHandle asyncWait = new ManualResetEvent(false);
    private Timer abortTimer = null;
    private bool isDisposed = false;

    const long ONE_MB = 1024 * 1024;

    public delegate void PerMbHandler(long totalMb);

    public event PerMbHandler NotifyMegabyteIncrement;

    public MyWebClient(int timeout = 60000, int timeUntilFirstByte = 30000, int timeBetweenProgressChanges = 15000)
    {
        this.Timeout = timeout;
        this.TimeUntilFirstByte = timeUntilFirstByte;
        this.TimeBetweenProgressChanges = timeBetweenProgressChanges;

        this.DownloadFileCompleted += new System.ComponentModel.AsyncCompletedEventHandler(MyWebClient_DownloadFileCompleted);
        this.DownloadProgressChanged += new DownloadProgressChangedEventHandler(MyWebClient_DownloadProgressChanged);

        abortTimer = new Timer(AbortDownload, null, TimeUntilFirstByte, System.Threading.Timeout.Infinite);
    }

    protected void OnNotifyMegabyteIncrement(long totalMb)
    {
        if (NotifyMegabyteIncrement != null) NotifyMegabyteIncrement(totalMb);
    }

    void AbortDownload(object state)
    {
        cancelDueToError = true;
        this.CancelAsync();
        success = false;
        Error = firstByteReceived ? "Download aborted due to >" + TimeBetweenProgressChanges + "ms between progress change updates." : "No data was received in " + TimeUntilFirstByte + "ms";
        asyncWait.Set();
    }

    void MyWebClient_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
    {
        if (cancelDueToError || isDisposed) return;

        long additionalBytesReceived = e.BytesReceived - PreviousBytesReceived;
        PreviousBytesReceived = e.BytesReceived;
        BytesNotNotified += additionalBytesReceived;

        if (BytesNotNotified > ONE_MB)
        {
            OnNotifyMegabyteIncrement(e.BytesReceived);
            BytesNotNotified = 0;
        }
        firstByteReceived = true;
        if (!isDisposed) abortTimer.Change(TimeBetweenProgressChanges, System.Threading.Timeout.Infinite);
    }

    public bool DownloadFileWithEvents(string url, string outputPath)
    {
        asyncWait.Reset();
        Uri uri = new Uri(url);
        this.DownloadFileAsync(uri, outputPath);
        asyncWait.WaitOne();

        return success;
    }

    void MyWebClient_DownloadFileCompleted(object sender, System.ComponentModel.AsyncCompletedEventArgs e)
    {
        if (cancelDueToError || isDisposed) return;
        asyncWait.Set();
    }

    protected override WebRequest GetWebRequest(Uri address)
    {            
        var result = base.GetWebRequest(address);
        result.Timeout = this.Timeout;
        return result;
    }

    void IDisposable.Dispose()
    {
        isDisposed = true;

        if (asyncWait != null) asyncWait.Dispose();
        if (abortTimer != null) abortTimer.Dispose();

        base.Dispose();
    }
} 
```

# eclipse-plugin - osgi相关的一些疑惑

> ID：12113828
> 
> 赞同：4
> 
> 时间：2012-08-24T17:10:04.200
> 
> 标签：eclipse-plugin, osgi

我是 OSGI 框架的新手。我浏览了这些站点并阅读了有关 OSGI 框架的信息。坦白说，我什么都不懂。以下是我的疑惑

1.  OSGi 应该提供模块化。我们不能通过普通的罐子来实现模块化吗？
2.  *OSGi 具有动态*组件模型是什么意思？
3.  捆绑包可以安装、启动、停止、更新等。为什么我们要安装捆绑包？为什么我们不能像访问其他普通 jar 一样直接访问？

我完全糊涂了。有人可以回答我吗？如果有可能也举一些例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T18:16:55.433

1.  不，JAR 是类的开放容器，不提供运行时封装。见[http://www.slideshare.net/bjhargrave/why-osgi](http://www.slideshare.net/bjhargrave/why-osgi)
2.  动态意味着可以在 VM/OSGi 框架运行时更改包的生命周期。也就是说，您无需重新启动系统即可安装/启动/停止/更新/卸载捆绑软件。
3.  您想要做这些事情来管理捆绑包的生命周期。不必以动态方式使用 OSGi。您可以将其用于模块化和服务，同时仅在启动框架之前预先安装捆绑包。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T06:50:15.730

我对模块的定义是一个*封装单元*（即它隐藏了内部细节），它通过*契约*（即一组预定义的可能交互）与其他模块通信。JAR 文件不是模块，因为它不具备这些属性。没有封装，所有内部实现细节都是可见的，可以从外部访问。没有合同，您只需将 JAR 文件放在类路径中，并希望它提供您想要的功能。

动态意味着可以*在运行时*安装、升级或卸载 OSGi 包（模块） 。这对于升级正在运行的系统或跨大型网络有效地部署软件非常有用。

必须安装捆绑包，因为在我们使用软件之前总是必须安装它。JAR 文件也必须安装！只是安装方式略有不同，即 JAR 文件被添加到类路径中，而捆绑包是使用`install`命令安装的（这也可以通过脚本编写或从 API 调用）。OSGi 让我们可以更好地控制这个过程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-26T14:07:54.580

我试图在 OSGi 博客中回答你的第一个问题：http: [//blog.osgi.org/2013/08/dear-prudence-cant-we-achieve.html](http://blog.osgi.org/2013/08/dear-prudence-cant-we-achieve.html)

下周，将回答下一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T06:41:11.183

除了 Bundles 作为真正的模块这一点（在所有其他答案中都已处理）之外，还有一些其他特性使 OSGi 非常强大：

1.  **服务层**使您能够在运行时动态连接您的*对象*。结合[声明式服务，您将获得一个非常强大且灵活的编程模型，并具有](http://wiki.osgi.org/wiki/Declarative_Services)[IOC](http://en.wikipedia.org/wiki/Inversion_of_control)的所有优点。
2.  [**Extender Model**](http://blog.osgi.org/2007/02/osgi-extender-model.html)提供了一种更高层次的IOC，可以为可扩展性创造巨大的收益。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T19:51:53.713

阅读有关 OSGi 规范的实现可能会有所帮助。

如果您使用过 Eclipse，那么您已经体验过 OSGi 的一些优势，甚至可能不知道。

这是对 Equinox 基础知识的一个很好的描述。

[http://www.vogella.com/articles/OSGi/article.html](http://www.vogella.com/articles/OSGi/article.html)

# debugging - NOOK调试时隐藏/删除USB模式弹出窗口

> ID：12113837
> 
> 赞同：0
> 
> 时间：2012-08-24T17:11:02.843
> 
> 标签：debugging, nook

我正在使用 NOOK 彩色设备调试我的 Android 应用程序。

当我将 USB 连接到 NOOK Color 时，会弹出窗口“USB 模式”，其中包含文本“您现在可以安全地将文件从 PC 移动到 NOOKcolor...”并阻止与设备的任何交互。

我可以运行我的应用程序，但在断开 USB 之前我无法与之交互。如果我断开 USB 连接，我显然无法再进行调试（我正在使用 ADB 使用 Eclipse 调试我的应用程序）。我怎样才能删除这个愚蠢的窗口？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T23:36:11.423

弹出与您的 NOOK（内部和外部存储）关联的任何已安装的 USB 驱动器，对话框就会消失。

汤姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T23:02:20.857

在 Mac 上，您可以转到 finder 并单击设备的弹出按钮。adb 仍然会识别这个角落。类似地从 Windows 单击安全地从系统托盘中删除硬件。

# c# - 在验证方法中使用 .xsd 文件

> ID：12113838
> 
> 赞同：3
> 
> 时间：2012-08-24T17:11:03.120
> 
> 标签：c#, xsd

我创建了一个类来验证一些 XML。在那个类中，我有一个验证方法。我还有一个 .xsd 文件，其中包含我的 XML 模式。我被告知要使用此文件，我必须“将 xsd 文件加载到字符串中”

如何将 xsd 文件加载到字符串中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T17:25:50.040

没有更多上下文，我不知道`Load the xsd file into a string`实际意味着什么，但是有更简单的方法来验证 XML。

```
var xDoc = XDocument.Load(xmlPath);
var set = new XmlSchemaSet();

using (var stream = new StreamReader(xsdPath))
{
    // the null here is a validation call back for the XSD itself, unless you 
    //  specifically want to handle XSD validation errors, I just pass a null and let 
    //  an exception get thrown as there usually isn't much you can do with an error in 
    //  the XSD itself
    set.Add(XmlSchema.Read(stream, null));                
}

xDoc.Validate(set, ValidationCallBack); 
```

然后你只需要`ValidationCallBack`在你的类中调用一个方法作为任何验证失败的处理程序（你可以随意命名它，但是`Validate()`上面的方法的委托参数必须引用这个方法）：

```
public void ValidationCallBack(object sender, ValidationEventArgs e)
{
    // do something with any errors
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T17:17:45.587

您可以尝试使用此代码

```
 XmlReaderSettings settings = new XmlReaderSettings();
        settings.Schemas.Add("....", "youXsd.xsd");
        settings.ValidationType = ValidationType.Schema;
        settings.ValidationEventHandler += new ValidationEventHandler(YourSettingsValidationEventHandler);

        XmlReader books = XmlReader.Create("YouFile.xml", settings);

        while (books.Read()) { }

       //Your validation
       static void YourSettingsValidationEventHandler(object sender, ValidationEventArgs e)
       {

       } 
```

2 如果您只想加载，可以使用 StreamReader 和 ReadToEnd

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T17:17:15.967

将整个文件读入字符串非常容易：

```
string schema;
using(StreamReader file = new StreamReader(path)
{
    schema = file.ReadToEnd();
} 
```

希望这对您的追求有所帮助。

# android - ListView 项目特定动画

> ID：12113844
> 
> 赞同：1
> 
> 时间：2012-08-24T17:12:06.987
> 
> 标签：android, android-listview, android-animation

我想为 Listview 中的三个项目设置动画，以便三个项目开始作为堆栈排序，其中第一个项目在顶部，第二个在中间，第三个在底部。顶部然后从顶部向上移动，中间一个停留，然后第三个从第二个后面滑下来。我已经管理了动画，但还没有弄清楚 z 顺序。我在适配器中分别为这三个项目应用动画，但是由于这些项目之间没有分组感，因此不保持 z 顺序。是否可以控制列表视图中的哪个孩子首先被绘制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:26:19.743

我不认为这很容易做到。您可以为每一行设置动画（列表数据行通常称为`row`not `item`），但每行将以相同的方式进行动画处理，因此无法满足您的需求。当然，您可能可以实现您的目标，但这需要更多的编码。如果你有固定数量的行（即 3）你确定你需要列表视图吗？也许用 3 个线性布局（或任何东西）构建您的布局，然后您可以轻松地将不同的动画分别应用于每个布局

# string - InStr 找不到子字符串

> ID：12113845
> 
> 赞同：1
> 
> 时间：2012-08-24T17:12:12.693
> 
> 标签：string, excel, vba, contains, select-case

我有以下代码：

```
Columns("F:F").Select

For Each cell In Selection
    Select Case cell
        Case InStr(1, cell, ",") <> 0
            MsgBox ("found")
        Case IsEmpty(cell) Or Null
            MsgBox ("empty")
        Case Else
            Stop
    End Select
Next 
```

在 F:FI 列中，按顺序排列如下：`"Marc Jacobs", "", "Renolds, Bob"`InStr 未找到任何正确的 case 语句。

1.  对于“Marc Jacobs”，我接到 Case Else 电话（正确电话）
2.  对于“”，我得到了找到的消息（应该是空消息）
3.  对于“Renolds，Bob”，我收到 Case Else 电话（应该收到找到的消息）

这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T17:23:02.067

您使用 Select Case 语法的方式似乎是问题所在。您的每个案例都包含一个计算。因此，VB 将在进行“选择案例”比较之前对每个案例进行计算。

例如：对于您的第一个循环，cell="Renolds, Bob"。因此，您的第一个 Case 条件会将 InStr(1,cell,",") 评估为 8，并将 (8<>0) 评估为 True。但是，“Renolds, Bob”不等于 (InStr(1,cell,",") <> 0) '，它等于 True。奇怪的是，当 VBA 将 "" 转换为布尔值以便可以比较它们时，"" 转换为 True。

你可能想写的是

```
For Each cell in Selection
    If InStr(1, cell, ",") <> 0 Then
        MsgBox("found")
    ElseIf IsEmpty(cell)
        MsgBox("empty")
    Else
        Stop
    End If
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T21:42:39.267

您也可以使用 Select...Case 语句：

```
For Each cell In Selection
Select Case True
    Case InStr(1, cell, ",") <> 0
        MsgBox ("found")
    Case IsEmpty(cell) 
        MsgBox ("empty")
    Case Else
        Stop
End Select
Next 
```

# android - 在 android 开发“R 无法解析为变量”和布局中出现错误

> ID：12113846
> 
> 赞同：3
> 
> 时间：2012-08-24T17:12:12.537
> 
> 标签：android, android-layout

我刚开始android编程，很多天以来我都陷入了这个问题，每当我开始一个新项目时，每次遇到这5个错误时，我都不知道该怎么处理它们，我尝试设置整个SDK和eclipse设置但我仍然收到这些错误，任何人都知道如何摆脱这些错误？？？

1.  `R cannot be resolved to a variable`
2.  检索项目的父项时出错：未找到与给定名称匹配的资源`'android:Theme.Holo.Light.DarkActionBar'`，`styles.xml/example/res/values-v14`第 3 行 Android AAPT 问题
3.  检索项目的父项时出错：未找到与给定名称匹配的资源`'android:Theme.Light'`。`styles.xml/example/res/values`第 3 行 Android AAPT 问题
4.  检索项目的父项时出错：未找到与给定名称匹配的资源`'android:Theme.Holo.Light'.styles.xml/example/res/values-v11` 第 3 行 Android AAPT 问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-03T05:36:31.963

对于那些偶然发现这个问题的人，这里有一个解决方案：在你的`project.properties`, 将`target=android-x`where x < 11 更改为 some x >= 11 eg `target=android-14`，因为 holo 是在 android-11 (Honeycomb) 中首先引入的。

**编辑：**

更正，x>=14`android:Theme.Holo.Light.DarkActionBar`才能工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:21:13.537

对于错误号 2,3 和 4。在您的 styles.xml 文件中删除`parent="android:Theme"`，我以下列方式使用

**样式.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style name="CustomWindowTitleBackground">

    </style>

    <style name="MyTheme" parent="android:Theme">
        <item name="android:windowTitleSize">65dip</item>
        <item name="android:windowTitleBackgroundStyle">@style/CustomWindowTitleBackground</item>
    </style>
</resources> 
```

我希望这将解决您的第一个错误。万一您的第一个错误无法清除意味着，只需清理您的应用程序然后运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T17:18:05.010

清理你的项目：项目->清理

另外，请确保您没有导入“android.R”。Eclipse 有时会在您管理导入时添加它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T17:18:28.067

当您向项目添加资源时，您必须更新与其关联的 XML 文件。它将在一个文件夹中，可能`res`在该文件夹中命名将是其他几个被调用的文件夹`drawable` `layout`，`values`它们里面有 XML 文件，当您向项目添加图片或字符串等资源时需要更新这些文件。

我可能有错误的文件夹，自从我在 Android 中编程已经有一段时间了。

# c# - 可以在独立应用程序中使用 Outlook.Application.Explorer 对象吗？

> ID：12113847
> 
> 赞同：3
> 
> 时间：2012-08-24T17:12:27.443
> 
> 标签：c#, outlook

MSDN 站点上的所有信息似乎都假定正在创建使用这些对象的 Outlook 加载项。但是，我想知道是否可以创建`Explorer`包含`MailItems`等的新对象或引用对象，这些对象可以在**独立应用程序**中使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T16:26:44.737

**是的，您可以在独立应用程序**中使用 Office 集成。这称为[使用 PIA 的办公自动化](http://msdn.microsoft.com/en-us/library/4eb92bst%28v=vs.80%29.aspx)。只需添加对**Microsoft.Office.Interop.Outlook.dll**的程序集引用（*C:\Program Files (x86)\Microsoft Visual Studio 10.0\Visual Studio Tools for Office\PIA\Office12\Microsoft.Office.Interop.Outlook.dll*） . 在代码中，您只需要引用一个[`Outlook.Application`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.application.aspx)实例。

```
Outlook.Application app = new Outlook.Application();
Outlook.Explorer explorer = app.ActiveExplorer();
explorer.Display(); // display explorer
Outlook.MailItem mailItem = app.CreateItem(Outlook.OlItemType.olMailItem);
mailItem.Display(); // create mail message 
```

您还需要确保[正确处理 COM 资源](http://www.add-in-express.com/creating-addins-blog/2008/10/30/releasing-office-objects-net/)。

# postgresql - postgresql：根据其他不完整数据排除数据

> ID：12113850
> 
> 赞同：1
> 
> 时间：2012-08-24T17:12:37.977
> 
> 标签：postgresql, filter, null

在此数据中 - 有多个与时间序列数据关联的 DATA_ID 值。我正在尝试从任何 DATA_ID 值中排除所有数据，这些值返回 NULL 值以用于任何时间戳值。

换句话说，如果 DATA_ID 值（及其数据）对于所有时间戳值都有完整（不是任何 NULL）值，我只想返回它们。

## 示例查询如下：

```
SELECT   
My.Table.DATA_ID,   
MY.Table.timestamp,   
My.Table.USE

FROM   
My.TABLE

WHERE timestamp BETWEEN '2012-06-01 00:00:00' AND '2012-06-02 23:59:59'

-- Something here that says exclude all data from DATA_ID(s)
-- with any missing USE data,   i.e. USE=NULL

ORDER BY DATA_ID, timestamp 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:25:13.810

假设我正确理解了您的问题，并且您想要排除包含空值的整批样本（由相等的 data_id 和时间戳确定）。

```
SELECT   
My.Table.DATA_ID,
MY.Table.timestamp,
My.Table.USE

FROM
My.TABLE o

WHERE timestamp BETWEEN '2012-06-01 00:00:00' AND '2012-06-02 23:59:59'

and not exists (select 1 from my_table i
  where i.use is null
  and i.data_id = o.data_id
  and i.timestamp BETWEEN '2012-06-01 00:00:00' AND '2012-06-02 23:59:59')

ORDER BY DATA_ID, timestamp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T10:11:34.290

简单的事情是这样的：

```
CREATE FUNCTION missing_info(MY.TABLE) 
RETURNS BOOL 
LANGUAGE SQL AS
$$ select $1.use is null -- chain conditions together with or. 
   -- no from clause needed.  no where clause needed.
$$; 
```

然后你可以添加：

其中 (My.Table).missing_info 不正确；

由于您需要更改缺少哪些信息的逻辑，您只需在函数中更改它，一切仍然有效。

这是一种派生信息的封装，其中 ORDBMS 之类的 PostgreSQL 真正大放异彩。

编辑：重新阅读您的示例，看起来您正在寻找的是 IS NULL 运算符。但是，如果您需要重用某种逻辑，请参阅上面的示例。NULL 从不“等于” NULL（因为我们不能说两个未知值是否相同）。但是 IS NULL 会告诉您它是否为 NULL。

# php - 父类不会从子类中的覆盖方法中捕获异常

> ID：12113855
> 
> 赞同：0
> 
> 时间：2012-08-24T17:12:43.530
> 
> 标签：php, oop, exception, inheritance, slim

[我对Slim 框架](http://www.slimframework.com/)有这个问题。我有具有渲染方法的类模板，如果路由处理程序返回，我希望 Slim 渲染此类的对象

```
$app->get('/test', function() {
    return new Template('main', function() use ($error) {
        return array(
            'content' => "Hello"
        );
    });
}); 
```

它工作我创建了子类（在 System.php 中）

```
class System extends Slim {
   function __constructor() {
       Slim::__construct();
   }
   private function auto_render_fun($callable) {
        $app = $this;
        return function() use ($callable, $app) {
            $args = func_get_args();
            $ret = call_user_func_array($callable, $args);
            if ($ret instanceof Template) {
                //render Template - Slim ignore return value
                $app->response()->body($ret->render());
            }
        };
    }
    protected function mapRoute($args) {
        $last = count($args)-1;
        $args[$last] = $this->auto_render_fun($args[$last]);
        return Slim::mapRoute($args);
    }
} 
```

我想用 notFound 做同样的事情

```
$app->notFound(function () use ($app) {
    $response = $app->response();
    $response['Content-Type'] = 'text/html';
    return new Template('main', function() {
        return array('content' => new Template('error_404', null));
    });
}); 
```

所以我重写了 notFound 函数来包装 Closure 并呈现它的返回值

首先我尝试使用更小的代码

```
public function notFound($callable = null) {
    if (!is_null(($callable))) {
        $this->router->notFound($this->auto_render_fun($callable));
    } else {
        Slim::notFound();
    }
} 
```

我也试试这个（复制和修改旧代码）。

```
public function notFound($callable = null) {
    if ( !is_null($callable) ) {
        $this->router->notFound($this->auto_render_fun($callable));
        //            $this->router->notFound($callable);    // old line
    } else {
        ob_start();
        $customNotFoundHandler = $this->router->notFound();
        if ( is_callable($customNotFoundHandler) ) {
            call_user_func($customNotFoundHandler);
        } else {
            call_user_func(array($this, 'defaultNotFound'));
        }
        $this->halt(404, ob_get_clean());
    }
} 
```

但它不起作用的原因是它`Slim_Exception_Stop`假设被 Slim 缓存在这里是调用`$this->notFound();` [https://github.com/codeguy/Slim/blob/master/Slim/Slim.php#的代码行L1160](https://github.com/codeguy/Slim/blob/master/Slim/Slim.php#L1160) 它在里面 try..catch。

这是堆栈跟踪（我将它缓存在 notFound 函数中 - 但它应该在 Slim 类中处理）。

```
Slim_Exception_Stop in file libs/Slim/Slim/Slim.php at 862
0: Slim->stop() in libs/Slim/Slim/Slim.php at 882
1: Slim->halt(integer, string) in libs/System.php at 187
2: System->notFound() in libs/Slim/Slim/Slim.php at 1161
3: Slim->call() in libs/Slim/Slim/Middleware/Flash.php at 84
4: Slim_Middleware_Flash->call() in libs/Slim/Slim/Middleware/MethodOverride.php at 91
5: Slim_Middleware_MethodOverride->call() in libs/Slim/Slim/Middleware/PrettyExceptions.php at 65
6: Slim_Middleware_PrettyExceptions->call() in libs/Slim/Slim/Middleware/PrettyExceptions.php at 65
7: Slim_Middleware_PrettyExceptions->call() in libs/Slim/Slim/Slim.php at 1098
8: Slim->run() in index.php at 573 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:19:45.870

好的，我找到了原因，异常处理了，但没有内容。我错误地认为它与类有关，但只是 Slim 代码有错误。

```
public function halt( $status, $message = '' ) {
    $this->cleanBuffer();
    $this->response->status($status);
    $this->response->body($message);
    $this->stop();
} 
```

函数覆盖您在处理程序中使用的数据，如下所示

```
$app->notFound(function() {
   $app->response()->body('Error');
}); 
```

不起作用，找不到功能应该是这样的

```
public function notFound($callable = null) {
    if (!is_null(($callable))) {
        $this->router->notFound($this->auto_render_fun($callable));
    } else {
        $customNotFoundHandler = $this->router->notFound();
        if (is_callable($customNotFoundHandler)) {
            call_user_func($customNotFoundHandler);
        } else {
            call_user_func(array($this, 'defaultNotFound'));
        }
        $this->response->status(404);
        $this->stop();
    }
} 
```

# asp.net-mvc - Asp.Net mvc 嵌套动作 HTTPPOST

> ID：12113859
> 
> 赞同：3
> 
> 时间：2012-08-24T17:13:05.583
> 
> 标签：asp.net-mvc, http-post, child-actions

我有一个奇怪的问题。我的观点 ：

```
@{
   ViewBag.Title = "Index";
}

<h2>Index</h2>
@using(Html.BeginForm())
{
     <input type="submit"  value="asds"/>
}
@Html.Action("Index2") 
```

我的控制器：

```
public class DefaultController : Controller
{
    //
    // GET: /Default1/

    [HttpPost]
    public ActionResult Index(string t)
    {
        return View();
    }

    public ActionResult Index()
    {
        return View();
    }

    //
    // GET: /Default1/

    [HttpPost]

    public ActionResult Index2(string t)
    {
        return PartialView("Index");
    }

            [ChildActionOnly()]
    public ActionResult Index2()
    {
        return PartialView();
    }
} 
```

当我单击`[HttpPost]Index(string t)`执行按钮时，这很好。但是在那之后`[HttpPost]Index2(string t)`被执行了，这对我来说真的很奇怪，因为我已经发布了用于`Index`行动的数据，而不是用于`Index2`. 我的逻辑告诉我，`[ChildActionOnly()]ActionResult Index2()`而不是`HttpPost`一个。

为什么会这样？如何在不重命名操作的情况下覆盖此行为`[HttpPost]Index2`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T06:46:20.793

这是默认行为。这是设计使然。如果您无法更改 POST操作名称，您可以编写一个自定义操作名称选择器，即使当前请求是 POST 请求`Index2`，也会强制使用 GET操作：`Index2`

```
public class PreferGetChildActionForPostAttribute : ActionNameSelectorAttribute
{
    public override bool IsValidName(ControllerContext controllerContext, string actionName, MethodInfo methodInfo)
    {
        if (string.Equals("post", controllerContext.HttpContext.Request.RequestType, StringComparison.OrdinalIgnoreCase))
        {
            if (methodInfo.CustomAttributes.Where(x => x.AttributeType == typeof(HttpPostAttribute)).Any())
            {
                return false;
            }
        }
        return controllerContext.IsChildAction;
    }
} 
```

然后用它装饰你的两个动作：

```
[HttpPost]
[PreferGetChildActionForPost]
public ActionResult Index2(string t)
{
    return PartialView("Index");
}

[ChildActionOnly]
[PreferGetChildActionForPost]
public ActionResult Index2()
{
    return PartialView();
} 
```

# jquery - 如何设置fancybox iframe的宽度

> ID：12113860
> 
> 赞同：0
> 
> 时间：2012-08-24T17:13:05.973
> 
> 标签：jquery, fancybox

我正在将图像的链接传递给 PHP 文件，以便[根据此处的解决方案将所述图像返回到花哨的 iFrame](https://stackoverflow.com/questions/12074798/passing-a-dynamic-href-into-fancybox-iframe)

不幸的是，无论我通过什么尺寸的图像，iframe 的宽度都不会根据内容大小而改变，iframe 的宽度保持在 850 像素左右，但高度会发生变化。

我什至将图像样式设置为愚蠢的值，宽度：150 像素高度：150 像素，但 iframe 宽度保持在 850 像素，左上角有一个缩略图大小的图像。

试图结合jfk[的解决方案](https://stackoverflow.com/questions/10769151/fancy-box-work-with-iframes-in-beforeshow-function/10776520#10776520)，但 ifrme 要求相同的宽度。

我如何编写 iframe 代码以便根据图像大小设置高度和宽度？

```
$(document).on('click', '.Images', function(e) {
e.preventDefault();
var Href = 'GetImg.php?img=' + $(this).attr("href");
$.fancybox.open({
    href: Href,
    type: 'iframe',
    padding: 5
  });
}); 
```

​ 感谢冬青

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:15:50.327

您可以设置花式框宽度。做这样的事情：

```
$.fancybox.open({
    href: Href,
    width: 500,
    type: 'iframe',
    padding: 5
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:39:33.293

因为您使用的是 iframe，所以您有一个嵌套在父窗口中的子窗口。Javascript 安全性可防止父窗口在被 iframe 屏障分隔时直接访问子窗口的文档对象模型。快速的解决方案是更改您的幻想框属性，以便将弹出窗口视为内联 div 而不是 iframed 窗口。Fancybox 然后可以自动查询内联窗口的高度和宽度属性并自动调整大小。

但是，如果您需要通过 iframe 实现弹出窗口，那么您将希望将单独的窗口视为来自不同的域。在子窗口中，您设置了一个 postMessage()，其操作类似于将信息发布到另一台服务器的 api 调用。在父窗口中，您设置了一个侦听器，该侦听器将响应请求并根据它接收到的值进行操作。postMessage() 的 HTML5 规范将允许两个窗口以这种方式通信。您可以将 postMessage() 请求放在子窗口的 $(document).ready() 函数堆栈中，并将监听器放在 fancybox 调用的 onComplete() 函数堆栈中。

[http://viget.com/extend/using-javascript-postmessage-to-talk-to-iframes](http://viget.com/extend/using-javascript-postmessage-to-talk-to-iframes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T17:15:56.353

你有没有尝试给出宽度和高度参数？

[http://fancybox.net/api](http://fancybox.net/api)

# machine-learning - 高斯过程多类分类

> ID：12113868
> 
> 赞同：3
> 
> 时间：2012-08-24T17:13:32.930
> 
> 标签：machine-learning, classification

是否可以使用 GPML (http://www.gaussianprocess.org/gpml/) 工具箱进行多类分类？（我使用的数据集有来自 3 个不同类别的大约 7000 个训练样本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:24:51.907

您始终可以使用二元分类器进行多类分类。值得注意的是，通过进行全对比较，简单的多数票给出了非常可靠的答案。然而，对于 n 个类的问题，它需要 O(n2) 的二进制分类器应用。但这对 3 个班级来说不是问题。

# python - scipy.ndimage.interpolation.rotate 中的“轴”参数

> ID：12113869
> 
> 赞同：5
> 
> 时间：2012-08-24T17:13:33.930
> 
> 标签：python, numpy, scipy

我不太明白`axes`以下旋转函数中的参数：

```
scipy.ndimage.interpolation.rotate(input, angle, axes=(1, 0), reshape=True, output=None, order=3, mode='constant', cval=0.0, prefilter=True) 
```

文档中给出的解释如下：

> 轴：2个整数的元组，可选
> 
> 定义旋转平面的两个轴。默认是前两个轴。

两个轴可以定义一个旋转平面吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T17:50:27.817

Ndimage 用于处理多维图像。一个 n 维图像将有 n 个轴。要进行旋转，您需要选择两个轴来定义要在其中进行旋转的平面。这是轴参数允许您指定的内容。

轴从 0 开始编号。它在文档中不是 100% 明确的，但我的解释是，这里的“轴”的含义与 Numpy 中的一般含义相同，即 n 维数据结构的维度，其中零是行，一是列，等等。所以 (1, 0) 表示“第一和零维”。

传递 (1, 1) 将毫无意义，因为它指定了相同的轴两次。传递 (0, 1) 与传递 (1, 0) 相同，但通过以相反的顺序传递轴，您将改变旋转方向。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-13T14:39:20.530

经过几次测试：旋转轴可以解释如下：

如果我们使用给定轴的数字： 0 -- x 轴；1 -- y轴；2——z轴；

axes = (1,0) 和 (0,1) 是一样的，即 x 任意 y 轴。旋转平面为xy平面。

axes = (1,2) 和 (2,1) 是一样的，即 y 任意 z 轴。旋转平面为yz平面。

axes = (2,0) 和 (0,2) 是一样的，即 x 任意 z 轴。旋转平面为xz平面。

# php - .png 文件如何具有查询字符串？

> ID：12113877
> 
> 赞同：0
> 
> 时间：2012-08-24T17:14:28.920
> 
> 标签：php, html, png, query-string

我正在开发一个保存为 php 页面的网站。图像标签具有以下 src 值：

```
<img src="xxxxx.png?src=http://xxxx.com/xxx/xxx.png&amp;h=192&amp;w=334&amp;zc=1"> 
```

我到处搜索试图破译这个。第一部分`src="xxxx.png`是图像在本地文件中的位置。我猜这`?src=xxx`是对服务器的调用以重新发送备用图像？第二张图片与第一张相同，只是稍大一些。关于开发人员正在完成什么的任何猜测？

同样，我不确定我是否理解同一个调用中的高度和宽度`h=192&amp;w=334&amp;zc=1`......

欣赏任何见解。

# command-line - 如何在命令行中提取多个 .gz 日志文件

> ID：12113878
> 
> 赞同：0
> 
> 时间：2012-08-24T17:14:30.200
> 
> 标签：command-line, compression

我有多年的日志文件，这些文件都在 .gz 文件中。有没有我可以使用的命令一次将这些全部提取到他们的当前目录中？我尝试解压缩 *.gz 但不起作用。还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:20:53.087

外壳脚本？

```
#!/bin/ksh

TEMPFILE=tempksh_$$.tmp                                          #create a file name
> $TEMPFILE                                                      #create a file w/ name

ls -l | grep '.*\.gz$' \                                         #make dynamic shell script
      | awk '{printf "unzip %s;\n", $9;}' \                      #with unzip cmd for each item
      >>  $TEMPFILE                                              #and write to TEMPFILE

chmod 755 $TEMPFILE                                              #give run permissions
./$TEMPFILE                                                      #and run it
rm -f $TEMPFILE                                                  #clean up 
```

未经测试，但我想你明白了....

实际上有点摆弄并且变得更简单......

```
 set -A ARR *.gz;
 for i in ${characters[@]}; do `unzip $i`; done;
 unset ARR; 
```

# java - 在android应用程序中显示从远程数据库中获取的数据？显示位

> ID：12113885
> 
> 赞同：0
> 
> 时间：2012-08-24T17:14:49.110
> 
> 标签：java, android, mysql, json

可能是一个菜鸟问题，但希望我将来也能学会如何做到这一点。

我已经连接到服务器上的 mysql 数据库，连接正常，一切正常。问题是我不知道如何将这些数据放入表格中供我在布局中使用（表格布局是最好的方法吗？我不希望它填满整个布局，我希望能够在表格上方和下方添加文本）。下面的代码将数据打印到 logcat 中。你可以自己看，这是很基本的。我一直在通过各种教程学习如何做到这一点。显然这不是我想要的。

有没有人对我应该放在这里的代码有什么建议，以便在应用程序收到数据后我可以实际使用我的数据。它已经是 JSON 格式，如下所示。下面的代码有效，这不是我想要的。我看到的教程已经实现了 HTTP 连接并一起使用了 ArrayAdaptors，但我已经完成了 HTTP POST 位并且不想更改它，因为它花了我很长时间。

```
// PARSE STRING
            try {
                jArray = new JSONArray(result);
                JSONObject json_data = null;

                System.out.println("Length " + jArray.length());
                Log.d("DB", "Length " + jArray.length());

                for (int i = 0; i < jArray.length(); i++) {

                    json_data = jArray.getJSONObject(i);
                    drivername = json_data.getString("Driver_full_name");
                    drivesfor = json_data.getString("Drives_for");

                    System.out.println(drivername + "&" + drivesfor);
                }
            } catch (JSONException e1) {
                Log.d("DB", "Error somewhere");
                CurrentSeasonDrivers.this.runOnUiThread(new Runnable() { 
                    public void run() {
                        Toast.makeText(CurrentSeasonDrivers, "Could not convert data to string", Toast.LENGTH_LONG).show(); } });
            } 
```

任何建议表示赞赏！我的完整代码包括 HTTP 连接，向您展示我是如何设置的：http: [//pastebin.com/MsKc1xPg](http://pastebin.com/MsKc1xPg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:23:15.270

如果你有通用模式的表格数据，你可能想使用 ListView 来显示它。每一行都可以是您想要的任何内容，使用 ListView 可以自动解决您的问题，即您需要显示更多行数据。而 HTTP POST 根本与它无关。一旦你得到你的数据，它来自哪里就无关紧要了。将其放入数据库，放入数组，ArrayList等并显示。ListView 可能是一种方式。

# ruby - Rails 3 和 Bootstrap 2.1.0 - 无法修复我的页脚

> ID：12113886
> 
> 赞同：0
> 
> 时间：2012-08-24T17:14:55.877
> 
> 标签：ruby, twitter-bootstrap, ruby-on-rails-3.2, ruby-1.9.3, twitter-bootstrap-rails

我有带有引导程序 2.1.0 的 Rails 应用程序（`twitter-bootstrap-rails`为此我使用 gem）。但我无法获得工作页脚。除非我向下滚动页面，否则它是不可见的。我不知道如何解决这个问题。

**应用程序.html.haml**

```
!!!
%html
  %head
    %title MyApp
    = stylesheet_link_tag    "application", :media => "all"
    = javascript_include_tag "application"
    = csrf_meta_tags
    %meta{ :name => "viewport", :content => "width=device-width, initial-scale=1.0"  }
  %body
    %div{ :class => "wrapper" }
      = render 'layouts/navbar_template'

      %div{ :class => "container-fluid" }
        - flash.each do |key, value|
          = content_tag( :div, value, :class => "alert alert-#{key}" )
        %div{ :class => "row-fluid" }
          %div{:class => "span10"}
            =yield
          %div{:class => "span2"}
            %h2 Test sidebar

    %footer{ :class => "footer" }
      = debug(params) if Rails.env.development? 
```

**bootstrap_and_overrides.css.less**

```
@import "twitter/bootstrap/bootstrap";
body { 
    padding-top: 60px;
}

@import "twitter/bootstrap/responsive";

// Set the correct sprite paths
@iconSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings.png');
@iconWhiteSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings-white.png');

// Set the Font Awesome (Font Awesome is default. You can disable by commenting below lines)
// Note: If you use asset_path() here, your compiled boostrap_and_overrides.css will not 
//       have the proper paths. So for now we use the absolute path.
@fontAwesomeEotPath: '/assets/fontawesome-webfont.eot';
@fontAwesomeWoffPath: '/assets/fontawesome-webfont.woff';
@fontAwesomeTtfPath: '/assets/fontawesome-webfont.ttf';
@fontAwesomeSvgPath: '/assets/fontawesome-webfont.svg';

// Font Awesome
@import "fontawesome";

// Your custom LESS stylesheets goes here
//
// Since bootstrap was imported above you have access to its mixins which
// you may use and inherit here
//
// If you'd like to override bootstrap's own variables, you can do so here as well
// See http://twitter.github.com/bootstrap/less.html for their names and documentation
//
// Example:
// @linkColor: #ff0000;

//MY CSS IS HERE.
html, body {
    height: 100%;
}
footer {
    color: #666;
    background: #F5F5F5;
    padding: 17px 0 18px 0;
    border-top: 1px solid #000;
}
footer a {
    color: #999;
}
footer a:hover {
    color: #efefef;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 10px;
    margin-bottom: -10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:38:44.470

检查此页面和源代码可能会有所帮助

[http://www.martinbean.co.uk/bootstrap/sticky-footer/](http://www.martinbean.co.uk/bootstrap/sticky-footer/)

还可以查看这里的讨论，他们提出了一种设置粘性页脚的方法

[https://github.com/twitter/bootstrap/issues/306](https://github.com/twitter/bootstrap/issues/306)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T21:51:04.243

尝试将以下 CSS 添加到您的页脚。无论用户滚动到页面的哪个位置，“固定位置”都会在同一位置显示您的页脚。“底部 0”将沿着屏幕底部对齐页脚。

```
position: fixed;
bottom:0; 
```

希望这可以帮助！:)

# jquery - 工具提示中的 jQuery 文本编辑器

> ID：12113889
> 
> 赞同：0
> 
> 时间：2012-08-24T17:15:19.913
> 
> 标签：jquery, tooltip, text-editor

我正在寻找一个简单的 jQuery 文本编辑器（最好），一旦你选择了一些文本，它只会作为工具提示弹出。它的外观和行为应该是这样的：http: [//i.imgur.com/dRa3z.jpg](http://i.imgur.com/dRa3z.jpg)

这样的编辑器存在吗？
如果没有，是否有任何其他 jQuery 文本编辑器支持嵌入到工具提示中，而不仅仅是用作文本区域包装器？

*（截图来自一个名为 Byword 的 Mac 应用）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-18T14:00:31.687

好吧，已经2年了。仍然有一些正在搜索的人会发现这很有用

[https://github.com/raphaelcruzeiro/jquery-notebook](https://github.com/raphaelcruzeiro/jquery-notebook)

希望这就是你要找的。

# java - String.valueOf(int value) 给出错误

> ID：12113891
> 
> 赞同：2
> 
> 时间：2012-08-24T17:15:21.917
> 
> 标签：java, string, type-conversion

我正在尝试将 a 转换`int`为 a`String`以便可以将`String`值放入 SQLite 游标中。我尝试了多种语法和方法，但似乎没有一个对我有用。

尝试`MangaItemDB()`转换任何`Int`类型以及`boolean`.

我已经浏览了几篇[类似这样](https://stackoverflow.com/questions/3028974/android-cannot-invoke-tostring-on-the-primitive-type-int)的文章，但没有一篇对我有用。

这是我的代码：

```
public class MangaItem {

private int _id;
private String mangaName;
private String mangaLink;
private static String mangaAlpha;
private static int mangaCount;
private static int alphaCount;

private boolean mangaComplete = false;

public MangaItem MangaItemDB(int id, String mangaName, String mangaLink, String mangaAlpha, String mangaCount, String alphaCount, String mangaComplete) {
    MangaItem MangaItemDB = new MangaItem();
    MangaItemDB._id = id;
    MangaItemDB.mangaName = mangaName;
    MangaItemDB.mangaLink = mangaLink;
    MangaItemDB.mangaAlpha = mangaAlpha;
    MangaItemDB.mangaCount = String.valueOf(int mangaCount);
    MangaItemDB.alphaCount = Integer.toString(getAlphaCount());
    MangaItemDB.mangaComplete = String.valueOf(getMangaComplete());
    return MangaItemDB;

}

public void incrementMangaCount() {
    mangaCount++;
}

public int getMangaCount() {
    return mangaCount;
}

public void incrementAlphaCount() {
    alphaCount++;
}

public int getAlphaCount() {
    return alphaCount;
}

public boolean setMangaComplete(boolean mangaComplete) {
    return true;
}

public boolean getMangaComplete() {
    return mangaComplete;
}

/**
 * @return the mangaName
 */
public String getMangaName() {
    return mangaName;
}

/**
 * @param mangaName the mangaName to set
 */
public void setMangaName(String mangaName) {
    this.mangaName = mangaName;
}

/**
 * @return the mangaLink
 */
public String getMangaLink() {
    return mangaLink;
}

/**
 * @param mangaLink the mangaLink to set
 */
public void setMangaLink(String mangaLink) {
    this.mangaLink = mangaLink;
}

/**
 * @return the mangaAlpha
 */
public String getMangaAlpha() {
    return mangaAlpha;
}

/**
 * @param mangaAlpha the mangaAlpha to set
 */
public void setMangaAlpha(String mangaAlpha) {
    this.mangaAlpha = mangaAlpha;
}

/**
 * @return the _id
 */
public int get_id() {
    return _id;
}

/**
 * @param _id the _id to set
 */
public void set_id(int _id) {
    this._id = _id;
}

} 
```

行：

```
 MangaItemDB.mangaCount = String.valueOf(mangaCount);
    MangaItemDB.alphaCount = Integer.toString(getAlphaCount());
    MangaItemDB.mangaComplete = String.valueOf(getMangaComplete()); 
```

都给出“类型不匹配：无法从 String 转换为 Int”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T17:17:02.763

```
MangaItemDB.mangaCount = String.valueOf(int mangaCount); 
```

该代码甚至不应该编译。调用方法时不应传递参数类型，而是调用方法时只需传递参数：

```
MangaItemDB.mangaCount = String.valueOf(mangaCount); 
```

**如果您有所有**编译错误，请发布它们，这样我们就不必猜测它们了。

**编辑**
你状态：

```
MangaItemDB.mangaCount = String.valueOf(mangaCount);
MangaItemDB.alphaCount = Integer.toString(getAlphaCount());
MangaItemDB.mangaComplete = String.valueOf(getMangaComplete()); 
```

> 都给出“类型不匹配：无法从 String 转换为 Int”

这表明您正在尝试将字符串分配给 int 变量，因此似乎不需要将结果转换为字符串。为什么不简单地将整数分配给整数，将布尔值分配给布尔值呢？

```
MangaItemDB.mangaCount = mangaCount;
MangaItemDB.alphaCount = getAlphaCount();
MangaItemDB.mangaComplete = getMangaComplete(); 
```

另外，为什么要使用静态变量？这样做的理由是什么？有时您会想要使用静态变量，但大多数情况下您的变量应该是实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:22:59.900

```
MangaItem mangaItemDB = new MangaItem();
MangaItemDB._id = id;
MangaItemDB.mangaName = mangaName;
MangaItemDB.mangaLink = mangaLink;
MangaItemDB.mangaAlpha = mangaAlpha;
MangaItemDB.mangaCount = String.valueOf(int mangaCount);  //change to mangaItemDB .setMangaCount(String.valueOf(mangaCount));
MangaItemDB.alphaCount = Integer.toString(getAlphaCount());
MangaItemDB.mangaComplete = String.valueOf(getMangaComplete()); 
```

见上面的代码，非常糟糕的做法。您应该使用 getter 和 setter 方法，例如：

```
mangaItemDB.setMangaCount(String.valueOf(mangaCount)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T17:35:11.047

因为 MangaCount 和 Alpha 计数是静态的，所以您不希望在非静态上下文中设置它们 - 本质上您什么都不做。如果您希望 MangaItem 保存这些值，请制作 MangaCount 和 AlphaCount 的非静态版本。

MangaComplete() 返回一个布尔值，因此您不需要解析它。

静态变量和方法是您只需要一种用于类的变量和方法，非静态变量和方法是特定于类的 - 它们只能从对象本身使用。似乎设置和获取 MangaCount+AlphaCount 应该是静态的。

# python - Python从http表单提交中确定文件类型

> ID：12113897
> 
> 赞同：0
> 
> 时间：2012-08-24T17:15:48.443
> 
> 标签：python

我想做一个图像表单提交，我想验证提交的图像是一个图像服务器端，它正在运行 python。有没有一种简单的方法可以在纯 python 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:20:19.617

一种简单而天真的方法是使用 libmagic（例如[https://github.com/ahupp/python-magic](https://github.com/ahupp/python-magic)上的那个）。更好的方法是使用 PIL [http://www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/) ，但它不是原生 Python 并且是一个非常广泛的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:43:06.777

使用[PIL](http://www.pythonware.com/products/pil/)：

```
import sys
import Image

for infile in sys.argv[1:]:
    try:
        im = Image.open(infile)
        print infile, im.format, "%dx%d" % im.size, im.mode
    except IOError:
        pass 
```

从文档：

> Python 图像库支持多种图像文件格式。要从磁盘读取文件，请使用 Image 模块中的 open 函数。您不必知道打开文件的文件格式。该库会根据文件的内容自动确定格式。

# c++ - Getter 在 C++ 中返回二维数组

> ID：12113902
> 
> 赞同：2
> 
> 时间：2012-08-24T17:16:11.790
> 
> 标签：c++, arrays, function, 2d, getter

这是我关于 SO 的第一篇文章，尽管我已经在这里呆了一段时间。我在这里遇到了一个返回二维数组的函数的问题。我在我的 Game 类中定义了一个私有 2d int 数组属性*int board[6][7]*，但我不知道如何为这个属性创建一个公共 getter。

这些是我的 game.h 的相关部分：

```
#ifndef GAME_H
#define GAME_H

class Game
{
public:
    static int const m_rows = 6;
    static int const m_cols = 7;

    Game();
    int **getBoard();

private:
    int m_board[m_rows][m_cols];

};

#endif // GAME_H 
```

现在我想要的是 game.cpp 中的类似内容（因为我认为不带括号的数组名称是指向第一个元素的指针，显然它不适用于二维数组）：

```
int **Game::getBoard()
{
    return m_board;
} 
```

这样我就可以把它放在我的 main.cpp 中：

```
Game *game = new Game;
int board[Game::m_rows][Game::m_cols] = game->getBoard(); 
```

任何人都可以帮助我，我应该在我的 game.cpp 中放什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T17:24:47.433

您不能按值将数组传入和传出函数。但是有多种选择。

(1) 使用`std::array<type, size>`

```
#include <array>

    typedef std::array<int, m_cols> row_type;
    typedef std::array<row_type, m_rows> array_type;
    array_type& getBoard() {return m_board;}
    const array_type& getBoard() const {return m_board;}
private:
    array_type m_board; 
```

(2) 使用正确的指针类型。

```
 int *getBoard() {return m_board;}
    const int *getBoard() const {return m_board;}
private:
    int m_board[m_rows][m_cols]; 
```

An`int[][]`不涉及任何指针。它不是指向指向整数数组的指针数组的指针，而是整数数组的数组。

```
//row 1               //row2
[[int][int][int][int]][[int][int][int][int]] 
```

这意味着`int*`所有这些都指向一个。要获得行偏移量，您需要执行以下操作：

```
int& array_offset(int* array, int numcols, int rowoffset, int coloffset)
{return array[numcols*rowoffset+coloffset];}

int& offset2_3 = array_offset(obj.getBoard(), obj.m_cols, 2, 3); 
```

# c - Char值加一

> ID：12113903
> 
> 赞同：1
> 
> 时间：2012-08-24T17:16:13.820
> 
> 标签：c

我有以下代码：

```
char buf[] = {0x45, 0x76, 0x72, 0x23, 0x12};
int main(void)
{
    int i;
    for (i = 0; i<=sizeof(buf); ++i){
      printf("%c\n", buf[i]); 
    }
} 
```

我想要做的是`buf[i]`在打印出来并让 0x45 读取 0x46。本质上，如何在每个值通过 for 循环时将其加 1？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T17:17:51.430

采用`+`

```
for (i = 0; i<sizeof(buf); ++i){
  printf("%c\n", buf[i] + 1); //  print the incremented value
  //printf("%c\n", buf[i]++); //  increment the printed value

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T17:18:41.480

你加1：

```
#include <stdio.h>

char buf[] = { 0x45, 0x76, 0x72, 0x23, 0x12 };
int main(void)
{
    int i;
    for (i = 0; i < sizeof(buf); i++)
      printf("%c\n", buf[i] + 1);
} 
```

就如此容易！

如果您想要更改和打印缓冲区中的值，那么您可能会使用`++buf[i]`.`buf[i] + 1`

请注意，如果`char`是有符号类型并且存储在数组的某个元素中的值等价于`0xFF`，则向其添加 1 是未定义的行为（尽管您很可能会打印 ASCII NUL `'\0'`）。

# android - Android 没有出现在 Eclipse -> Preferences (OS X 10.5.8)

> ID：12113906
> 
> 赞同：2
> 
> 时间：2012-08-24T17:16:38.647
> 
> 标签：android, eclipse, macos

我已经尝试过 Eclipse Classic 4.2、3.5、3.7.2 和 Java EE。我尝试在每个版本上安装 ADT 插件，大多数似乎都没有问题。但是当 Eclipse 重新启动时，Android 首选项永远不可用（尽管这些文件显然在我的插件文件夹中）。我什至尝试过 eclipse -clean park，但没有运气。

伙计，到目前为止，设置进展顺利......有什么想法吗？

# linux - 相同的程序在不同的控制台中表现不同

> ID：12113908
> 
> 赞同：0
> 
> 时间：2012-08-24T17:16:45.520
> 
> 标签：linux, gcc, environment-variables, environment

我写了一个文本模式批处理 C++ 程序，从今天开始给我带来了一些麻烦。

*   可执行文件正常工作并且没有改变。
*   环境没有改变；甚至没有重新启动。
*   当我从某个控制台启动程序时，一切都很好。
*   **当我从新控制台启动程序时，一切仍然正常，但我只得到日志文件的前两行，即使执行完成。**
*   传递给可执行文件的参数是相同的。
*   可执行文件不以任何方式与控制台交互。
*   两个控制台的环境变量是一样的。
*   从远程计算机以 root 身份运行时，一切正常，日志文件完整。
*   当我的用户从另一个会话再次登录时，一切都很好了。
*   注销并再次登录时，一切都很好。

那么，会不会是从某个时刻开始，新游戏机出现了一些问题导致了这个问题？

这可能是我的 Linux 安装的问题吗？

或者，更现实地说，问题可能取决于我的程序吗？

谢谢！

环境：
- Linux OpenSuse 11.4
- gcc 4.5.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:54:55.473

这是另一个放入调试工具箱的工具。

尝试命令“reset”——阅读手册页了解详细信息。

简而言之，它将控制台重置为已知状态。有可能您的日志文件可能包含尝试与 tty 交互的控制字符，从而导致难以跟踪的问题。

您可能还想查看命令“脚本”，该命令将所有控制台活动捕获到 at et 文件以供检查。

# jquery - JQuery datetimepikcer (Trent Richardson) 无法更新时间选项

> ID：12113914
> 
> 赞同：-1
> 
> 时间：2012-08-24T17:17:13.857
> 
> 标签：jquery, time, datetimepicker

使用这个插件，我可以像这样将 datetimepicker 控件初始化为日期和时间的特定格式

```
$.datepicker.regional['cur'] = { dateFormat: 'yy-mm-dd', showSecond: true, timeFormat: curtimeFormat };
$.datepicker.setDefaults($.datepicker.regional['cur']);
var datetimeParams = { showSecond: true, timeFormat: curtimeFormat };
$('#sampledateSett').datetimepicker(datetimeParams); 
```

但是，我的任务是让用户更改格式并继续以他指定的格式向他显示示例日期。我有 2 个用于日期和时间格式的单独控件，以及我在每次更改其值时运行的函数：

```
function TranslateAndSetTimeFormat(sqlDateFormat, sqlTimeFormat, dtcontrol) {
    var dtoptions = { dateFormat: sqlDateFormat, timeFormat: sqlTimeFormat, ampm: showampm, showSecond: false };
    $.datepicker.setDefaults(dtoptions);        
    dtcontrol.datetimepicker(dtoptions);        
    dtcontrol.datetimepicker("setDate", (new Date()));
} 
```

我发现当这个函数执行时日期的格式变成了新的格式，但是时间格式仍然停留在初始化控件的任何地方。需要有关如何应用新的 timeFormat 选项或如何重新初始化此控件的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:55:56.110

使用 datetimepicker("destroy") 选项允许使用新选项重置它。在这里找到答案：[在 JQuery UI DatePicker 中动态更改选项失败](https://stackoverflow.com/questions/4373072/change-option-dynamically-in-jquery-ui-datepicker-fails)

# django - 使用 nginx+gunicorn+django 的间歇性 502s

> ID：12113917
> 
> 赞同：6
> 
> 时间：2012-08-24T17:17:26.033
> 
> 标签：django, http, ssl, nginx, gunicorn

在过去的几周里，我们收到了越来越多的 502 错误。目前，我们的堆栈是由小型 RDS 实例支持的 m1.large EC2 实例上的 nginx + gunicron + django。

随着请求负载的增加，它们似乎变得更加频繁。我会在使用浏览器时看到随机的 502，但是我们命中 api (Tasty Pie) 的命令行脚本通常会在第二次或第三次请求时失败。但是，如果我在脚本发出请求之前将睡眠功能添加到脚本中，那么该请求就可以了，但接下来会出现 502。请注意，我们将摘要身份验证与请求库和休眠包装器一起使用——因此是 401、200 模式。

为了使调试更加棘手，当 Gunicorn 使用 --debug 选项运行时，问题会自行解决。如果我删除 --debug 选项但将我的 Gunicorn 工作人员明确限制为 1，则错误仍然存​​在。

我的 nginx.conf：

```
user www-data;
worker_processes 4;
pid /var/run/nginx.pid;

events {
    worker_connections 768;
    # multi_accept on;
}

http {

    ##
    # Basic Settings
    ##

    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    # server_tokens off;

    # server_names_hash_bucket_size 64;
    # server_name_in_redirect off;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    ##
    # Logging Settings
    ##

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    ##
    # Gzip Settings
    ##

    gzip on;
    gzip_disable "msie6";

        gzip_proxied any;
        gzip_types application/x-ghi-packedschemafeatures-v1
        gzip_http_version 1.1;
        gzip_comp_level 1;
        gzip_min_length 500;

        proxy_buffering on;
        proxy_http_version 1.1;

    ##
    # Virtual Host Configs
    ##

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
} 
```

虚拟主机文件：

```
 server {
      listen 80;
      server_name pipeline.ourdomain.com;
      location / {
        rewrite ^ https://$server_name$request_uri permanent;
      }
}

server {
      listen 443;
      server_name pipeline.ourdomain.com;
      ssl on;
      ssl_protocols SSLv3 TLSv1;
      ssl_ciphers ALL:-ADH:+HIGH:+MEDIUM:-LOW:-SSLv2:-EXP;
      ssl_session_cache shared:SSL:10m;
      ssl_certificate     /etc/ssl/certs/ourdomain.com.combined.crt;
      ssl_certificate_key /etc/ssl/private/ourdomain.com.key;

      root /var/www/;
      location /static/ {
               alias /var/www/production/pipeline/public/;
      }

      location / {
             proxy_pass_header Server;
             proxy_set_header Host $http_host;
             proxy_redirect off;
             proxy_set_header X-Real-IP $remote_addr;
             proxy_set_header X-Scheme $scheme;
             proxy_set_header X-Forwarded-Protocol https;
             proxy_connect_timeout 240;
             proxy_read_timeout 280;
             proxy_pass http://localhost:8000/;
      }
      error_page 500 502 503 504 /static/50x.html;

} 
```

独角兽指挥部

```
#!/bin/bash
set -e
LOGFILE=/var/log/gunicorn/ea_pipeline.log
LOGDIR=$(dirname $LOGFILE)

SETTINGS=production_settings
# user/group to run as
USER=ubuntu
GROUP=ubuntu
DJANGO_PATH=$(dirname $(readlink -f $0))/../
cd $DJANGO_PATH
echo $(pwd)
. ../env/bin/activate
test -d $LOGDIR || mkdir -p $LOGDIR
exec ../env/bin/gunicorn_django \
     --user=$USER --group=$GROUP --log-level=debug \
     --preload \
     --workers=4 \
     --timeout=90 \
     --settings=$SETTINGS \
     --limit-request-line=8190 \
     --limit-request-field_size 0 \
     --pythonpath=$DJANGO_PATH \
     --log-file=$LOGFILE production_settings.py 2>>$LOGFILE 
```

访问日志示例：

```
67.134.170.194 - - [24/Aug/2012:00:28:17 +0000] "GET /api/v1/storage/ HTTP/1.1" 401 5 "-" "python-requests/0.13.8 CPython/2.7.3 Linux/3.2.0-29-generic"
67.134.170.194 - - [24/Aug/2012:00:28:18 +0000] "GET /api/v1/storage/ HTTP/1.1" 200 326 "-" "python-requests/0.13.8 CPython/2.7.3 Linux/3.2.0-29-generic"
67.134.170.194 - - [24/Aug/2012:00:28:18 +0000] "GET /api/v1/customer/?client_id=lamb_01 HTTP/1.1" 502 18 "-" "python-requests/0.13.8 CPython/2.7.3 Linux/3.2.0-29-generic"
67.134.170.194 - - [24/Aug/2012:00:29:41 +0000] "GET /api/v1/storage/ HTTP/1.1" 502 18 "-" "python-requests/0.13.8 CPython/2.7.3 Linux/3.2.0-29-generic" 
```

Nginx 错误日志：

```
2012/08/24 00:28:18 [error] 16490#0: *3 connect() failed (111: Connection refused) while connecting to upstream, client: 67.134.170.194, server: pipeline.ourdomain.com, request: "GET /api/v1/customer/?client_id=lamb_01 HTTP/1.1", upstream: "http://127.0.0.1:8000/api/v1/customer/?client_id=lamb_01", host: "pipeline.ourdomain.com"
2012/08/24 00:29:41 [error] 16490#0: *7 connect() failed (111: Connection refused) while connecting to upstream, client: 67.134.170.194, server: pipeline.ourdomain.com, request: "GET /api/v1/storage/ HTTP/1.1", upstream: "http://127.0.0.1:8000/api/v1/storage/", host: "pipeline.ourdomain.com" 
```

Gunicorn 日志示例：

```
2012-08-24 17:03:13 [8716] [INFO] Starting gunicorn 0.14.3
2012-08-24 17:03:13 [8716] [DEBUG] Arbiter booted
2012-08-24 17:03:13 [8716] [INFO] Listening at: http://127.0.0.1:8000 (8716)
2012-08-24 17:03:13 [8716] [INFO] Using worker: sync
2012-08-24 17:03:13 [8735] [INFO] Booting worker with pid: 8735
2012-08-24 17:03:13 [8736] [INFO] Booting worker with pid: 8736
2012-08-24 17:03:13 [8737] [INFO] Booting worker with pid: 8737
2012-08-24 17:03:13 [8738] [INFO] Booting worker with pid: 8738
2012-08-24 17:03:21 [8738] [DEBUG] GET /api/v1/storage/
Assertion failed: ok (mailbox.cpp:84)
2012-08-24 17:03:21 [8738] [INFO] Parent changed, shutting down: <Worker 8738>
2012-08-24 17:03:21 [8738] [INFO] Worker exiting (pid: 8738)
Error in sys.exitfunc:
2012-08-24 17:03:21 [8737] [DEBUG] GET /api/v1/storage/
2012-08-24 17:03:22 [8838] [INFO] Starting gunicorn 0.14.3
2012-08-24 17:03:22 [8838] [ERROR] Connection in use: ('127.0.0.1', 8000)
2012-08-24 17:03:22 [8838] [ERROR] Retrying in 1 second.
2012-08-24 17:03:22 [8737] [INFO] Parent changed, shutting down: <Worker 8737>
2012-08-24 17:03:22 [8737] [INFO] Worker exiting (pid: 8737)
Error in sys.exitfunc:
2012-08-24 17:03:22 [8736] [DEBUG] GET /api/v1/customer/
2012-08-24 17:03:23 [8736] [INFO] Parent changed, shutting down: <Worker 8736>
2012-08-24 17:03:23 [8736] [INFO] Worker exiting (pid: 8736)
Error in sys.exitfunc:
2012-08-24 17:03:23 [8838] [ERROR] Connection in use: ('127.0.0.1', 8000)
2012-08-24 17:03:23 [8838] [ERROR] Retrying in 1 second.
2012-08-24 17:03:24 [8735] [DEBUG] GET /api/v1/upload_action/
2012-08-24 17:03:24 [8838] [ERROR] Connection in use: ('127.0.0.1', 8000)
2012-08-24 17:03:24 [8838] [ERROR] Retrying in 1 second.
2012-08-24 17:03:24 [8735] [INFO] Parent changed, shutting down: <Worker 8735>
2012-08-24 17:03:24 [8735] [INFO] Worker exiting (pid: 8735)
Error in sys.exitfunc:
2012-08-24 17:03:25 [8838] [DEBUG] Arbiter booted
2012-08-24 17:03:25 [8838] [INFO] Listening at: http://127.0.0.1:8000 (8838)
2012-08-24 17:03:25 [8838] [INFO] Using worker: sync
2012-08-24 17:03:25 [8907] [INFO] Booting worker with pid: 8907
2012-08-24 17:03:25 [8908] [INFO] Booting worker with pid: 8908
2012-08-24 17:03:25 [8909] [INFO] Booting worker with pid: 8909
2012-08-24 17:03:25 [8910] [INFO] Booting worker with pid: 8910 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-29T16:37:28.023

这是一个非常古老的帖子。但是我在 NGinx+Gunicorn+Flask 设置中遇到了完全相同的问题。在每 300 个左右的请求中，我也会遇到与您相同的日志的 502 错误。将 gunicorn 工作类型更改为异步为我解决了这个问题（我选择了 gthread）。希望这个答案会对某人有所帮助。

如何更改设置：[http ://docs.gunicorn.org/en/stable/settings.html#worker-class](http://docs.gunicorn.org/en/stable/settings.html#worker-class)

如何选择您的工人类型： [http ://docs.gunicorn.org/en/latest/design.html#choosing-a-worker-type](http://docs.gunicorn.org/en/latest/design.html#choosing-a-worker-type)

这里有一个很好的解释： [单个 Flask 进程接收多少并发请求？](https://stackoverflow.com/questions/10938360/how-many-concurrent-requests-does-a-single-flask-process-receive)

# jquery - 使用 twitter bootstrap 创建一个粘性导航栏？

> ID：12113926
> 
> 赞同：5
> 
> 时间：2012-08-24T17:18:07.903
> 
> 标签：jquery, css, twitter-bootstrap

我正在尝试引入一个导航栏，当不再可见时，它采用固定的标题定位。我开始使用这个线程：[Replicating Bootstraps main nav and subnav](https://stackoverflow.com/questions/9179708/replicating-bootstraps-main-nav-and-subnav)。

从那时起，我到达了：http: [//jsfiddle.net/yTqSc/2/](http://jsfiddle.net/yTqSc/2/)。

**问题**：

每当导航栏处于其*原始*位置时，锚链接将超出其目标（其中隐藏目标标题），但一旦它被固定就不会。我可以修复超调（我参考了[http://nicolasgallagher.com/jump-links-and-viewport-positioning/demo/](http://nicolasgallagher.com/jump-links-and-viewport-positioning/demo/)），但是当导航栏被修复时，我最终会使用链接产生过大的间隙。

无论导航栏是否固定，任何人都可以建议如何获得一致的结果？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T18:06:42.890

这是你想要的？

```
<div class="navbar navbar-fixed-top"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T22:47:25.083

您没有任何用于 navbar-fixed-top 的 CSS。此外，您需要在向上滚动时进行处理。

见演示 [http://jsfiddle.net/yTqSc/39/](http://jsfiddle.net/yTqSc/39/)

JavaScript

```
$(document).scroll(function(){
var elem = $('.subnav');
if (!elem.attr('data-top')) {
    if (elem.hasClass('navbar-fixed-top'))
        return;
     var offset = elem.offset()
    elem.attr('data-top', offset.top);
}
if (elem.attr('data-top') <= $(this).scrollTop() )
    elem.addClass('navbar-fixed-top');
else
    elem.removeClass('navbar-fixed-top');
}); 
```

CSS

```
.subnav {
    background:#FFF;
}
.navbar-fixed-top {
    position:fixed;
} 
```

或者使用 Waypoints jquery 插件来处理粘性元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T15:14:32.813

很好，但我疯狂地在底部而不是顶部实现粘性导航，如下所示： http: [//golkhaneh.tv3.ir/](http://golkhaneh.tv3.ir/)

怎么能这样做？

# html - ASP.NET MVC 中 CSS 中的根目录

> ID：12113927
> 
> 赞同：4
> 
> 时间：2012-08-24T17:18:10.877
> 
> 标签：html, css, asp.net-mvc, asp.net-mvc-4, appharbor

我有一个使用一些 css 文件的 ASP.NET MVC 4.5。css 指的是一些图像。

css 文件位于此路径中：

```
WebSiteRoot\Content\css\services\File.CSS 
```

该图像位于此路径中：

```
\WebSiteRoot\Content\img\servicesbubble\image.png 
```

CSS有这个调用：

```
background:transparent url('../../img/servicesbubble/image.png') no-repeat 0px 0px; 
```

当我在 localhost 中运行该应用程序时，它可以工作。但是当我上传到主机（Appharbor）时它不起作用。为什么？引用应用程序根目录的最佳方法是什么？

在服务器中，http get 被尝试到这个错误的 URL

```
WebSite.com/img/servicesbubble/desktop.png 
```

**更新：**我正在使用称为捆绑的 .NET 框架 4.5 功能将这些 CSS 与另一个 CSS 合并。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:32:39.700

您的 CSS 文件路径似乎发生了变化。我看到的与您的网站相关的两个 CSS 文件是[http://tulpepwebsite.apphb.com/Content/css/servicescss?v=sdm08D5sRu2I00dA0phyVTYZ_QU8Nfp27wHtmmE0Gzk1](http://tulpepwebsite.apphb.com/Content/css/servicescss?v=sdm08D5sRu2I00dA0phyVTYZ_QU8Nfp27wHtmmE0Gzk1)和[http://tulpepwebsite.apphb.com/Content/GeneralCSS?v=9kvtUcooQua0D4nQT8wZ-4_Gm6Oc -J5SkjMxwKiyQ1](http://tulpepwebsite.apphb.com/Content/GeneralCSS?v=9kvtUcooQua0D4nQT8wZ-4_Gm6OcRd-J5SkjMxwKiyQ1)。（另一个来自谷歌字体服务。）你需要弄清楚为什么会这样。

编辑：好的，我要猜一猜。您可能正在使用[新的 ASP.NET 4.5 捆绑功能](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)。但是，如果您这样做，将 CSS 苍蝇捆绑在不同的目录中是没有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T17:36:35.813

您的问题实际上来自您将 css 缩小到与最初存在的 CSS 不同的目录这一​​事实。

更具体地说：**http** : //tulpepwebsite.apphb.com/Content/css/servicescss ?v=sdm08D5sRu2I00dA0phyVTYZ_QU8Nfp27wHtmmE0Gzk1

所以 ../../ 把你放在[http://tulpepwebsite.apphb.com/Content](http://tulpepwebsite.apphb.com/Content)

CSS 文件中的 URL 总是相对于 CSS 文件本身的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T17:33:44.690

您的 CSS 位置与您想象的不同：

```
WebSiteRoot\Content\css\File.CSS 
```

代替

```
WebSiteRoot\Content\css\services\File.CSS 
```

# javascript - 5 位数字的正则表达式集，后跟一个逗号（尾随逗号可选）

> ID：12113935
> 
> 赞同：1
> 
> 时间：2012-08-24T17:18:57.193
> 
> 标签：javascript, regex

我有以下正则表达式：

```
(\d{5}[,]) 
```

这符合以下条件：

```
12005,11111,11111, 
```

但是如何使尾随逗号可选？

**编辑：**

可接受的结果是：

```
12005,

11111,11111,

12005

11111,11111 
```

不可接受：

```
123456

123456,

12345,123456

123456,123456 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T17:22:49.870

```
(\d{5})(?:,|$) 
```

应该做的伎俩。

为了打破这一点，

*   `\d{5}`- 5 位数
*   `(?:...)`- 只用括号括起来`|`
*   `,`- 文字逗号
*   `$`- 输入结束
*   `,|$`- 逗号或输入结束。

需要该`|$`部分来避免虚假匹配未用逗号分隔的数字组，例如`"01234567889"`.

* * *

要查看它的实际效果，请尝试

```
 JSON.stringify(
     ["01234", "01234,", "01234,56789", "01234,56789", "", "0123456789"]
     .filter(
         function (s) {
             return /^(?:(\d{5})(?:,|$))+$/.test(s);
         })) 
```

它使用更大的 RegExp 来匹配这些组中的一个或多个，因此发出

> ```
> ["01234","01234,","01234,56789","01234,56789"] 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T17:23:00.137

```
(\d{5}[,]?) 
```

将匹配

```
12005,11111,11111, 
```

或者

```
12005,11111,11111 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T17:33:02.383

为确保不匹配 6 位或更多位数字中的 5 位数字，请使用字边界断言 ( `\b`) 和行首断言 ( `^`)，如下所示：

```
(?:\b|^)(\d{5})(?:,|$) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T17:22:45.363

也许是这样：

```
((?:\d{5},)*\d{5}) 
```

如果一组 5 个数字或多个以逗号分隔的数字将起作用。或者您可以完全明确并在其上打出开头和结尾：

```
^((?:\d{5},)*\d{5})$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T17:24:45.817

`\d{5}[,]*`- 0 或更多或`\d{5}[,]?`- 0 或 1。

# bash - bash：在：找不到命令

> ID：12113942
> 
> 赞同：2
> 
> 时间：2012-08-24T17:19:24.243
> 
> 标签：bash, shell

这是我正在使用的代码：

```
cd /home
if [ -d ${homedir} ]
   then ln -s /etc/cpbackup-exclude.conf ${homedir}/cpbackup-exclude.conf
fi
done 
```

现在我收到了这个错误：

```
bash: In: command not found 
```

我正在尝试`cpbackup-exclude`为所有帐户创建一个符号链接。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T17:38:24.687

你打错`ln (LN)`了 as`In (IN)`或类似的东西。正确的命令是`ln`，如“Lima November”。该命令`ln`是“链接”一词的缩写，它是该命令的主要功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T17:23:51.450

$PATH 变量可能在脚本执行期间未正确设置。尝试使用 ln 命令的绝对路径。通常这是`/bin/ln`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-24T17:22:06.863

使用绝对路径：

```
/usr/bin/ln 
```

您的 ln 实用程序可能会在这里。

# python - 在 python 中添加到 XML 文件

> ID：12113945
> 
> 赞同：2
> 
> 时间：2012-08-24T17:19:29.573
> 
> 标签：python, xml

我想使用 python 添加到 XML 文件的末尾。

该文件的结构如下：

```
<?xml version="1.0" ?>
<dic>
  <word-data>
    ...
  </word-data>
</dic> 
```

我想添加另一个元素，使文件看起来像这样：

```
<?xml version="1.0" ?>
<dic>
  <word-data>
    ...
  </word-data>
  <word-data>
    ...
  </word-data>
</dic> 
```

现在是编程部分！

我目前正在做的是使用此函数将列表“编码”为 xml：

```
def make_xml(List):
    doc = Document();

    main = doc.createElement('dic')
    doc.appendChild(main)
    for l in List:
        parent = doc.createElement('word-data')
        main.appendChild(parent)

        for i in l:
            node = doc.createElement(i[0])
            node.appendChild(doc.createTextNode(str(i[1])))
            parent.appendChild(node)
    return doc 
```

其中一个列表如下所示：

```
List = [[['parent', 'node'],['parent', 'node'],['parent', 'node']]] 
```

现在我的问题是如何将它添加到现有 XML 文件中的 doc 节点。我想过把文件变成一个列表*然后*把文档变成一个新的列表，但是我不知道该怎么做，我认为它可能效率低下。

无论如何，任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:37:07.077

如果您想要附加到 xml 文件，请使用 Python 的 xml 模块之一，例如内置`xml.minidom` [http://docs.python.org/library/xml.dom.minidom.html](http://docs.python.org/library/xml.dom.minidom.html)

我对示例代码中的各种循环和嵌套列表结构有点困惑，但是根据您提供的输出示例，我认为您想要的是：

```
from xml.dom.minidom import parse
def make_xml(filename, elements):
    dom = parse(filename)
    top_element = dom.documentElement

    for elmnt in elements:
        parent = doc.createElement('word-data')
        top_element.appendChild(parent)
        parent.appendChild(doc.createTextNode(elmnt))
    return dom

new_dom = add_to_xml_file('old_file.xml', ['foo','bar','baz'])

# save file
new_dom.writexml(open('new-bigger-file.xml','w')) 
```

# android - GoogleAdView - 无法在 Eclipse 中安装

> ID：12113947
> 
> 赞同：0
> 
> 时间：2012-08-24T17:19:46.313
> 
> 标签：android, eclipse, adsense

我对 android 应用程序中的广告感到困惑。有 Adsense、AdMob、AdWhirl……我应该使用哪一个来在我的 android 应用程序中展示广告？某处我读到 Adsense 处于测试阶段，某处 Admob 已弃用，应该使用 Adsense，某处我应该使用 Admob，因为它已被重写，现在正在使用 Adsense 背景。

所以我终于使用了这个解决方案： [https ://developers.google.com/adsense-for-mobile-apps/docs/android/?hl=pl](https://developers.google.com/adsense-for-mobile-apps/docs/android/?hl=pl)

但找不到指向 GoogleAdView.jar 的链接（我有 sdk android-sdk_r18-linux）。所以我从：[http](http://www.java2s.com/Code/Jar/g/DownloadGoogleAdViewjar.htm) ://www.java2s.com/Code/Jar/g/DownloadGoogleAdViewjar.htm 下载。我在我的项目中创建了文件夹“libs”，并将其添加到项目属性-> java 构建路径-> 库-> 添加外部 jar 中。我清理项目。Java 代码正在编译，但布局预览无法加载此控件，出现错误“无法实例化以下类：com.google.ads.GoogleAdView”。但是当我在模拟器上运行我的应用程序时，我会看到广告，当我将我的应用程序发送给朋友时，他也会在他的智能手机上看到它。

所以我的问题是： 1\. 本教程是最新的吗？2\. 为什么eclipse在布局预览中不加载GoogleAdView？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T01:24:14.100

1.  没有当前的方法是使用 AdMob SDK [https://developers.google.com/mobile-ads-sdk/](https://developers.google.com/mobile-ads-sdk/)
2.  这是来自谷歌产品论坛的 xml 视图部分的答案[http://productforums.google.com/forum/#!category-topic/adsense/i-have-an-active-account-working-with-adsense/295ohH_m8jc](http://productforums.google.com/forum/#!category-topic/adsense/i-have-an-active-account-working-with-adsense/295ohH_m8jc)

# java - 单击表格行时如何下载文件

> ID：12113949
> 
> 赞同：-2
> 
> 时间：2012-08-24T17:19:51.633
> 
> 标签：java, javascript, css, jsf, jsf-2

我需要帮助在 JSF 页面中实现文件下载。到目前为止，我设法创建了这个：

![在此处输入图像描述](../Images/870230dad152b791f09e372208567634.png)

```
 <?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
    </h:head>
    <h:body>
        <h1><img src="resources/css/images/icon.png" alt="DX-57" /> Settings Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:100%; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>
        </div>  
        <div id="logodiv" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Glassfish"  style="position:relative"  value="resources/images/logo_glassfish_settings.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsdiv" style="width:350px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                    <div id="settingsHashMap" style="width:1050px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                        <h:form id="form" >
                            <p:growl id="growl" showDetail="true" sticky="true" />
                            <!-- The sortable data table -->
                            <h:dataTable onmouseover="addOnclickToDatatableRows();" id="dataTable" headerClass="columnHeader" value="#{GlassfishController.dataList}" binding="#{table}" var="item">
                                <!-- Check box -->
                                <h:column>
                                    <f:facet name="header">
                                        <h:selectBooleanCheckbox style="margin-left: 0px;" value="#{GlassfishController.mainSelectAll}" class="checkall" >
                                            <f:ajax listener="#{GlassfishController.selectAll}" render="@form" />
                                        </h:selectBooleanCheckbox>
                                    </f:facet>
                                    <h:selectBooleanCheckbox  onclick="highlight(this)" value="#{GlassfishController.selectedIds[item.filename]}" >
                                        <!-- if the user deselects one row deselect the main checkbox -->
                                        <f:ajax listener="#{GlassfishController.deselectMain}" render="@form" />
                                    </h:selectBooleanCheckbox>
                                    <!-- Click on table code -->  
                                    <h:outputLink id="lnkHidden" onclick="document.getElementById('form:btnHello').click(); return false;" style="text-decoration:none; color:white; background-color:black">
                                    </h:outputLink>
                                </h:column>
                                <!-- Row number -->
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="№" />                                    
                                    </f:facet>
                                    <h:outputText value="#{table.rowIndex + GlassfishController.firstRow + 1}" />
                                </h:column>                                
                                <h:column>
                                    <f:facet name="header">
                                        <h:commandLink value="File Name" actionListener="#{GlassfishController.sort}" style="text-decoration:none; color:white; background-color:black">
                                            <f:attribute name="sortField" value="filename" />
                                            <f:ajax render="@form" />
                                        </h:commandLink>
                                    </f:facet>
                                    <h:outputText value="#{item.filename}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:commandLink value="Size" actionListener="#{GlassfishController.sort}" style="text-decoration:none; color:white; background-color:black">
                                            <f:attribute name="sortField" value="size" />
                                            <f:ajax render="@form" />
                                        </h:commandLink>
                                    </f:facet>
                                    <h:outputText value="#{item.size} bytes" />
                                </h:column>

                            </h:dataTable>

                            <!-- The paging buttons -->
                            <h:commandButton value="first" action="#{GlassfishController.pageFirst}"
                                             disabled="#{GlassfishController.firstRow == 0}" >
                                <f:ajax render="@form" execute="@form"></f:ajax>
                            </h:commandButton>&nbsp;

                            <h:commandButton value="prev" action="#{GlassfishController.pagePrevious}"
                                             disabled="#{GlassfishController.firstRow == 0}" >
                                <f:ajax render="@form" execute="@form"></f:ajax>
                            </h:commandButton>&nbsp;

                            <h:commandButton value="next" action="#{GlassfishController.pageNext}"
                                             disabled="#{GlassfishController.firstRow + GlassfishController.rowsPerPage >= GlassfishController.totalRows}" >
                                <f:ajax render="@form" execute="@form"></f:ajax>
                            </h:commandButton>&nbsp;    

                            <h:commandButton value="last" action="#{GlassfishController.pageLast}"
                                             disabled="#{GlassfishController.firstRow + GlassfishController.rowsPerPage >= GlassfishController.totalRows}" >
                                <f:ajax render="@form" execute="@form"></f:ajax>
                            </h:commandButton>&nbsp;

                            <h:outputText value="Page #{GlassfishController.currentPage} / #{GlassfishController.totalPages}" />
                            <br />

                            <!-- The paging links -->
                            <ui:repeat value="#{GlassfishController.pages}" var="page">
                                <h:commandLink value="#{page}" actionListener="#{GlassfishController.page}"
                                               rendered="#{page != GlassfishController.currentPage}" style="text-decoration:none;color:white;">
                                    <f:ajax render="@form" execute="@form"></f:ajax>   
                                </h:commandLink>
                                <h:outputText value="#{page}" escape="false"
                                              rendered="#{page == GlassfishController.currentPage}" style="text-decoration:none;color:gray;"/>
                            </ui:repeat>
                            <br />

                            <!-- Set rows per page -->
                            <h:outputLabel for="rowsPerPage" value="Rows per page" />
                            <h:inputText id="rowsPerPage" value="#{GlassfishController.rowsPerPage}" size="3" maxlength="3" />
                            <h:commandButton value="Set" action="#{GlassfishController.pageFirst}" >
                                <f:ajax render="@form" execute="@form"></f:ajax>
                            </h:commandButton>&nbsp;
                            <h:message for="rowsPerPage" errorStyle="color: red;" />

                            <!-- hidden button -->
                            <h:commandButton id="deleterow" value="HiddenDelete" action="#{GlassfishController.deleteSelectedIDs}" style="display:none">
                                <f:ajax render="@form"></f:ajax>
                            </h:commandButton>

                            <!-- the delete button -->
                            <h:button value="Delete" onclick="deletedialog(this, 'Do you want to delete the selected rows?'); return false;" />

                            <script type="text/javascript" src="resources/js/tabs.js"></script>

                            <h:commandLink id="btnHello" value="Download Files"  
                                           action="#{GlassfishController.downloadFile}">  
                            </h:commandLink>
                        </h:form>                    
                    </div> 

                </div>                    
            </div>  
        </div>
    </h:body>
</html>

// Execute the download procedure
    public void executeDownload(String filename) throws IOException{
        int DEFAULT_BUFFER_SIZE = 10240;
        String filePath = "/opt/glassfish3/glassfish/domains/domain1/logs/" + filename;

        FacesContext context = FacesContext.getCurrentInstance();
        HttpServletResponse response = (HttpServletResponse) context.getExternalContext().getResponse();
        File file = new File(filePath);
        if (!file.exists())
        {
            response.sendError(HttpServletResponse.SC_NOT_FOUND);
            return;
        }
        response.reset();
        response.setBufferSize(DEFAULT_BUFFER_SIZE);
        response.setContentType("text");
        response.setHeader("Content-Length", String.valueOf(file.length()));
        response.setHeader("Content-Disposition", "attachment;filename=\""
                + file.getName() + "\"");
        BufferedInputStream input = null;
        BufferedOutputStream output = null;
        try
        {
            input = new BufferedInputStream(new FileInputStream(file),
                    DEFAULT_BUFFER_SIZE);
            output = new BufferedOutputStream(response.getOutputStream(),
                    DEFAULT_BUFFER_SIZE);
            byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
            int length;
            while ((length = input.read(buffer)) > 0)
            {
                output.write(buffer, 0, length);
            }
        }
        finally
        {
            input.close();
            output.close();
        }
        context.responseComplete();
    } 
```

有一个我无法解决的问题，我需要帮助。当我单击下载按钮时，我可以成功下载日志文件。单击文件时，我想将文件下载到 JSF 表中。你能帮我实现它吗？或者你能给我一些建议吗？

最好的祝愿

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T03:24:03.907

根据您的评论，您可以使用 commandLink/commandButton 在同一页面中调用另一个 commandLink/commandButton。请记住，这些组件的行为类似于普通的 HTML 组件。发布此行为的示例

```
<h:form id="frmTest">
    <h:commandLink value="I will call the commandButton below me"
        onclick="document.getElementById('frmTest:btnHello').click(); return false;" />
    <br />
    <h:commandButton id="btnHello" value="I'm the commandButton below the commandLink"
        action="#{bean.someAction}" />
</h:form> 
```

* * *

编辑：根据您对问题的评论，您有几种方法可以将参数传递给您的 commandButton 操作。我将向您展示一个使用 JavaScript 的。逻辑很简单：

*   使用`<h:inputHidden>`标签组件，其值将是您要下载的文件的名称。
*   在发送`onclick`事件之前，用你需要的值填充这个隐藏的组件。
*   让 HTML 请求继续其工作。

```
<h:form id="frmTest">
    <h:commandLink id="hidFileName" value="#{bean.fileToDownload}" />
    <h:commandLink value="I will call the commandButton below me"
        onclick="document.getElementById('frmTest:hidFileName').value='#{bean.fileName}'; document.getElementById('frmTest:btnHello').click(); return false;" />
    <br />
    <h:commandButton id="btnHello" value="I'm the commandButton below the commandLink"
        action="#{bean.someAction}" />
</h:form> 
```

# objective-c - 从表选择中消除弹出框

> ID：12113951
> 
> 赞同：0
> 
> 时间：2012-08-24T17:19:56.280
> 
> 标签：objective-c

如果这与其他线程重复，我很抱歉。我已经仔细研究了十几个，几个小时，但似乎没有一个完全适用于我的情况。即；

1.  一个按钮显示一个弹出框
2.  弹出框包含一个表格视图，嵌套在导航控制器中
3.  用户导航到导航控制器的第二级（第二个 tableViewController），然后进行选择
4.  做出选择后，弹出框应关闭，并将 indexPath.row 传递回原始屏幕。

重要的是，我正在使用故事板和转场来做到这一点（这可能是问题的一部分！）

我已经尝试实现自定义委托方法来做到这一点，但我陷入了无可救药的纠结之中。主要是因为

a) 实际的代表在两层之外，我在传达这个“链上”时遇到了麻烦，事实上。b) [segue destinationViewController] 是导航控制器。我不确定如何钩入它包含的实际 tableViews，以检索或设置属性（例如委托）

这对任何人都有意义吗？回想起来，这个问题几乎和我一样被迷惑了。如果你能破译它，并有任何建议，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:25:47.883

您可以使用导航控制器 ( ) 的 viewControllers 属性访问实际的视图控制器（具有您的表格视图`segue.destinationViewController`）。一旦你有一个指向这个视图控制器的指针，设置它的委托。然后在 中`tableView:didSelectRowAtIndexPath`，通知委托人选择了某些内容，委托人可以关闭弹出框。

**编辑：**这可能在您的 prepareForSegue 中：

```
UINavigationController *navigationController = (UINavigationController *)segue.destinationViewController; // cast the destination to UINavigationController

SpeciesTableViewController *speciesViewController = [navigationController.viewControllers lastObject];
speciesViewController.delegate = self; 
```

`viewControllers`关于UINavigationController 属性的Apple 文档：

> 当前在导航堆栈上的视图控制器。. . . 根视图控制器在数组中的索引 0 处，后视图控制器在索引 n-2 处，顶部控制器在索引 n-1 处，其中 n 是数组中的项目数。

使用 segue 时，根视图控制器是唯一的视图控制器，因此 lastObject 始终返回根视图控制器。

现在，请记住，当您在 SpeciesTableViewController 中选择一个物种时，您会触发一个 segue，并且必须设置 SpeciesDetailViewController 的委托。在 SpeciesDetailViewController 中`didSelectRowForIndexPath`，您可以向代理发送消息以关闭弹出框。

# jquery - 在 div 标签中动态传递 ID

> ID：12113960
> 
> 赞同：0
> 
> 时间：2012-08-24T17:20:36.630
> 
> 标签：jquery, html, jquery-ui

嗨，我在 div 类“父级”中有 id:“network”，这里我有 forloop，它会生成许多 IP。当我单击特定的父 IP 时，它应该调用它的子 div。如何动态生成 id，以便我可以将子 div 放在 for 循环中。还是有其他方法可以做到这一点？

```
<div class="parent">
//$i= 1;
foreach($octetets as $octet){

echo "<a href='javascript:void(0);' id='network' value='$octet'>+".$octet.".0.0.0</a> <br />";
//$i++;
 }

<div class="child">
<?php
echo "<a href='javascript:void(0);'  id='network_test' ></a>";  
?>
</div>
</div> 
```

我正在使用 jquery 单击父 IP

```
$(".msg_head").click(function(){
$(this).next(".parent").slideToggle(600);
});

$(".child #network_test").click(function(){
$(this).next(".child").slideToggle(600);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:28:39.560

这样做：

```
$(document).ready(function() {
    $('.parent #network').click(function() {
        // Here you manipulate the child div
    });
}); 
```

示例：添加更多链接；

```
$(document).ready(function() {
    $('.parent #network').click(function() {
        $('.child').append('<a href="#" id="network_test">Child ' + $(this).text() + '</a><br />');
    });
}); 
```

# ios - Core Data：删除一个实体类型的所有对象，即清空一个表

> ID：12113961
> 
> 赞同：10
> 
> 时间：2012-08-24T17:20:51.413
> 
> 标签：ios, sqlite, core-data

以前有人问过这个问题，但是没有描述的解决方案足够快，可以满足我的应用程序需求。

在我们设置的通信协议中，每次执行同步时，服务器都会发送一组新的所有客户。早些时候，我们一直以 plist 的形式存储。现在想用Core Data。

可能有数千个条目。单独删除每个需要很长时间。有没有办法删除 Core Data 中特定表中的所有行？

```
delete from customer 
```

sqlite 中的这个调用会立即发生。在 iPad1 上，在 Core Data 中单独浏览每一个可能需要 30 秒。

关闭 Core Data 是否合理，即删除持久性存储和所有托管对象上下文，然后放入 sqlite 并对表执行删除命令？在此过程中没有其他活动正在进行，因此我不需要访问数据库的其他部分。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-24T20:45:16.963

Dave DeLong 几乎是所有方面的专家，所以我觉得我在告诉耶稣如何在水上行走。当然，他的职位是从 2009 年开始的，那是很久以前的事了。

但是，Bot 发布的链接中的方法不一定是处理大量删除的最佳方法。

基本上，该帖子建议获取对象 ID，然后遍历它们，对每个对象调用 delete。

问题是，当您删除单个对象时，它还必须处理所有关联的关系，这可能会导致进一步的获取。

因此，如果您必须像这样进行大规模删除，我建议调整您的整体数据库，以便您可以隔离特定核心数据存储中的表。这样您就可以删除整个商店，并可能重建您想要保留的小部分。这可能是最快的方法。

但是，如果要删除对象本身，则应遵循此模式...

在自动释放池中批量删除，并确保预取任何级联关系。所有这些加在一起，将最大限度地减少您实际访问数据库的次数，从而减少执行删除所需的时间。

在建议的方法中，归结为...

1.  获取所有要删除的对象的 ObjectIds
2.  遍历列表，并删除每个对象

如果你有级联关系，你会遇到很多额外的数据库行程，IO真的很慢。您希望尽量减少必须访问数据库的次数。

虽然最初听起来可能违反直觉，但您希望获取的数据比您认为要删除的数据多。原因是所有这些数据都可以通过几个 IO 操作从数据库中获取。

因此，在您的获​​取请求中，您要设置...

```
[fetchRequest setRelationshipKeyPathsForPrefetching:@[@"relationship1", @"relationship2", .... , @"relationship3"]]; 
```

其中这些关系代表所有可能具有级联删除规则的关系。

现在，当您的提取完成时，您将拥有所有将被删除的对象，以及由于这些对象被删除而将被删除的对象。

如果您有一个复杂的层次结构，您希望尽可能提前预取。否则，当您删除一个对象时，Core Data 将不得不为每个对象单独获取每个关系，以便它可以管理级联删除。

这将浪费大量时间，因为您将执行更多的 IO 操作。

现在，在您的 fetch 完成后，您将遍历对象并删除它们。对于大型删除，您可以看到一个数量级的加速。

此外，如果您有很多对象，请将其分成多个批次，并在自动释放池中进行。

最后，在单独的后台线程中执行此操作，这样您的 UI 就不会挂起。您可以使用单独的 MOC，连接到持久存储协调器，并让主 MOC 处理 DidSave 通知以从其上下文中删除对象。

虽然这看起来像代码，但将其视为伪代码......

```
NSManagedObjectContext *deleteContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateConcurrencyType];
// Get a new PSC for the same store
deleteContext.persistentStoreCoordinator = getInstanceOfPersistentStoreCoordinator();

// Each call to performBlock executes in its own autoreleasepool, so we don't
// need to explicitly use one if each chunk is done in a separate performBlock
__block void (^block)(void) = ^{
    NSFetchRequest *fetchRequest = //
    // Only fetch the number of objects to delete this iteration
    fetchRequest.fetchLimit = NUM_ENTITIES_TO_DELETE_AT_ONCE;
    // Prefetch all the relationships
    fetchRequest.relationshipKeyPathsForPrefetching = prefetchRelationships;
    // Don't need all the properties
    fetchRequest.includesPropertyValues = NO;
    NSArray *results = [deleteContext executeFetchRequest:fetchRequest error:&error];
    if (results.count == 0) {
        // Didn't get any objects for this fetch
        if (nil == results) {
            // Handle error
        }
        return;
    }
    for (MyEntity *entity in results) {
        [deleteContext deleteObject:entity];
    }
    [deleteContext save:&error];
    [deleteContext reset];

    // Keep deleting objects until they are all gone
    [deleteContext performBlock:block];
};

[deleteContext preformBlock:block]; 
```

当然，您需要进行适当的错误处理，但这是基本思想。

如果要删除的数据太多以至于会破坏内存，请分批获取。不要获取所有属性。预取关系以最小化 IO 操作。使用 autoreleasepool 来防止内存增长。修剪上下文。在后台线程上执行任务。

如果您有一个非常复杂的图，请确保为整个对象图中的所有实体预取所有级联关系。

请注意，您的主要上下文必须处理 DidSave 通知，以使其上下文与删除保持同步。

**编辑**

> 谢谢。很多好点。除了为什么要创建单独的 MOC 之外，所有的解释都很好？关于不删除整个数据库，而是使用 sqlite 从特定表中删除所有行的任何想法？- 大卫

您使用单独的 MOC，因此在执行长删除操作时不会阻止 UI。请注意，当实际提交到数据库时，只有一个线程可以访问数据库，因此任何其他访问（如获取）都会阻止任何更新。这是将大型删除操作分成块的另一个原因。小部分的工作将为其他 MOC 提供一些访问商店的机会，而无需等待整个操作完成。

如果这会导致问题，您还可以实现优先级队列（通过`dispatch_set_target_queue`），但这超出了本问题的范围。

至于在 Core Data 数据库上使用 sqlite 命令，Apple 多次表示这是一个坏主意，您不应该在 Core Data 数据库文件上运行直接 SQL 命令。

* * *

最后，让我注意这一点。根据我的经验，我发现当我遇到严重的性能问题时，通常是由于设计不佳或实施不当造成的。重新审视你的问题，看看你是否可以重新设计你的系统以更好地适应这个用例。

如果您必须发送所有数据，也许可以在后台线程中查询数据库并过滤新数据，以便将数据分成三组：需要修改的对象、需要删除的对象和需要插入的对象。

这样，您只需更改需要更改的数据库。

如果数据几乎每次都是全新的，请考虑在这些实体拥有自己的数据库的地方重构您的数据库（我假设您的数据库已经包含多个实体）。这样您就可以删除该文件，然后从一个新的数据库重新开始。这很快。现在，重新插入数千个对象不会很快。

您必须跨商店手动管理任何关系。这并不难，但它不像同一家商店内的关系那样自动。

如果我这样做，我将首先创建新数据库，然后拆除现有数据库，用新数据库替换它，然后删除旧数据库。

如果你只是通过这种批处理机制来操作你的数据库，并且你不需要对象图管理，那么也许你想考虑使用 sqlite 而不是 Core Data。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-16T03:59:58.937

# iOS 9 及更高版本

使用`NSBatchDeleteRequest`. 我在模拟器中对一个拥有超过 400,000 个实例的 Core Data 实体进行了测试，删除几乎是瞬间完成的。

```
// fetch all items in entity and request to delete them
let fetchRequest = NSFetchRequest(entityName: "MyEntity")
let deleteRequest = NSBatchDeleteRequest(fetchRequest: fetchRequest)

// delegate objects
let myManagedObjectContext = (UIApplication.sharedApplication().delegate as! AppDelegate).managedObjectContext
let myPersistentStoreCoordinator = (UIApplication.sharedApplication().delegate as! AppDelegate).persistentStoreCoordinator

// perform the delete
do {
    try myPersistentStoreCoordinator.executeRequest(deleteRequest, withContext: myManagedObjectContext)
} catch let error as NSError {
    print(error)
} 
```

请注意， @Bot 链接到[的答案](https://stackoverflow.com/a/1383645/3681880)和@JodyHagins 提到的答案也已更新为此方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T17:42:48.687

实际上，您唯一的选择是单独删除它们。我使用大量对象执行此方法，并且速度非常快。这是某人通过仅加载托管对象 ID 来执行此操作的一种方式，因此它可以防止任何不必要的开销并使其更快。

[核心数据：删除实体所有实例的最快方法](https://stackoverflow.com/questions/1383598/core-data-quickest-way-to-delete-all-instances-of-an-entity)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-24T17:28:10.677

是的，删除持久存储并从头开始是合理的。这发生得相当快。您可以做的是从持久存储协调器中删除持久存储（使用持久存储 URL），然后使用持久存储的 url 从目录文件夹中删除数据库文件。我是使用 NSFileManager 的 removeItemAtURL 完成的。

编辑：要考虑的一件事：确保禁用/释放当前的 NSManagedObjectContext 实例，并停止任何其他可能正在使用相同持久存储的 NSManagedObjectContext 做某事的线程。如果上下文尝试访问持久存储，您的应用程序将崩溃。

# c++ - 数组复制函子示例：改进/替代？

> ID：12113965
> 
> 赞同：0
> 
> 时间：2012-08-24T17:21:38.290
> 
> 标签：c++

**问题**

实现一个适用于标量和数组的复制函子“接口”。

```
CopyFunctor::operator()(T& dest, const T& src); 
```

作为一个例子，我想概括一个排序函数来处理元素数组和“内联”数组的数组。

```
template <typename T, typename CopyFunctor> sort(T array[]);

int array_of_elements[] = {7, 3, 5, 2};
sort(array_of_elements);
// after sorting: {2, 3, 5, 7}

int array_of_arrays[] = {  3, 1,   2, 4,   7, 6,   5, 8};
// inlined arrays are: {3, 1}, {2, 4}, {7, 6}, {5, 8}
// these 'inlined' arrays are fixed-sized
// after sorting using first element as key: { 2, 4,   3, 1,   5, 8,    7, 6}   
// thus, the second element should be moved with the first element 
```

在 sort(T array[]) 内部，为了将元素（或元素组）从位置 i 交换到位置 j，我们可以以完全相同的方式调用函子，无论 a 是元素数组还是“内联数组”数组'：

```
template <typename T, typename CopyFunctor> sort(T array[], CopyFunctor copy) {

 // ...

   // swap a[i] and a[j]
   copy(b, a[i]);
   copy(a[i], a[j]);
   copy(a[j], b);

 // ...

 } 
```

这里 b 要么是一个标量，要么是一个大到足以容纳 a 内的一个“内联”数组的数组。（对于这个例子，我可能想要一个交换函子，但在我更复杂的用例中，我需要一个复制函子。）

**假设**

一旦内联数组的数组被初始化，它就*永远不会*被调整大小。

**示例代码**

```
#include <cstdio>
#include <cstring>
using namespace std;

template <typename T>
struct ScalarSetter {
    void operator()(T& a, const T& b) const {
        a = b;
    }
};

template <typename T>
struct ArraySetter {
    size_t _n;
    ArraySetter(size_t n) : _n(n) {}
    void operator()(T& a, const T& b) const {
        std::memcpy(&a, &b, sizeof(T)*_n);
    }
};

int main(int argc, char* argv[]) {

    {
      ScalarSetter<float> copy;
      float a = 1.0;
      float b = 2.0;
      copy(a, b);
      printf("a = %f\n", a);
      /* output:
       * a = 2.00000
       */
    }

    {
      size_t n = 3;
      ArraySetter<float> copy(n);
      float c[] = {.1, .2, .3, .4};
      float d[] = {.4, .5, .6, .7};
      copy(c[0], d[0]);
      for (size_t i = 0; i < n+1; ++i) {
        printf("c[%d] = %f\n", i, c[i]);
      }
      /* output:
       * c[0] = 0.400000
       * c[1] = 0.500000
       * c[2] = 0.600000
       * c[3] = 0.400000
       */
    }

    return 0;
} 
```

由于我实际上使用的是 Cuda/C++，我或多或少被迫使用内联数组。

上面的示例代码编译、运行并通过了 valgrind 内存测试。但是我觉得在 ArraySetter::operator()(...) 中找到指向输入参数的指针有点不舒服。

（*编辑*：我认为如果内联数组不连续，代码会中断......对（动态）分配的数组的连续性有任何保证吗？）

是否有另一种方法可以实现与标量和数组一起使用的一致复制函子“接口”？

# performance - 带有 sql lite 的 JPA/Hibernate - 性能

> ID：12113966
> 
> 赞同：1
> 
> 时间：2012-08-24T17:21:47.120
> 
> 标签：performance, hibernate, sqlite, jpa, orm

我有一个关于 JPA/Hibernate 性能的问题。

我们正在构建 Web 应用程序，目标之一是存储问题及其答案。对于这两件事，我们都有类层次结构，并且`@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)`.

这些问题都引用了他们的答案，每个问题都存储在某个列表中。

我观察到使用萤火虫，当我向列表中添加新问题并使用时，`entityManager.merge`我需要等待大约一秒钟才能得到响应。我认为等待简单添加请求的响应需要很长时间。

是因为继承策略，还是我不应该使用`entityManager.merge`并尝试编写自己的查询。

也许性能低是因为我使用的是 sql lite 数据库（sql lite 仅用于测试，在生产中将使用 postgre）？

或者这种性能对于 ORM 解决方案来说是相当标准的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T04:42:03.067

我经常使用 sqlite（有时甚至用于生产），性能有时甚至比传统的客户端服务器连接更好。

也许您应该调试您的应用程序并启用您正在使用的 JPA 提供程序的日志记录，以查看实际上是否应归咎于继承模型。

但是，如果您正确地完成了继承，那么我认为这不是问题。如果您粘贴有关如何声明类的代码，这将有所帮助。

如果这种情况持续存在，我也会查看分析器。

# c - 设计一个 O(N) 算法，从包含 1 和 0 的 2D 矩阵[N][N] 中找出没有 1

> ID：12113969
> 
> 赞同：0
> 
> 时间：2012-08-24T17:21:56.797
> 
> 标签：c, arrays, algorithm

假设一个二维`[n][n]`矩阵只包含 1 和 0。任何一行中的所有 1 都应该在 0 之前。任何行中 1 的数量`i`至少应为 1 行中的第 1 行`(i+1)`。找到一种方法并编写 ac 程序来计算 2D 矩阵中 1 的个数。算法的复杂度应该是 O(n)。

这个问题来自 Cormen's Algorithm Book，下面是我对这个问题的实现。请指出我算法中的错误和/或提出更好的方法。谢谢！

```
#include <stdio.h>
#include <stdlib.h>

int **map;
int getMatrix();

main()
{
    int n,i,j,t;
    j=0;
    n=getMatrix();
    i=n-1;  
    int sum[n];
    for(t=0;t<n;t++)
        sum[t]=0;
    int count=0; 
    while ( (i>=0) && (j<n) )
    {
        if ( map[i][j] == 1 )
        {
            j++;
            count=count+1;
        }
        else
        {
            if (i==(n-1))
            {
                sum[i]=count;
                count=0;
                            i--;
            }   
            else            
            {
                sum[i]=sum[i+1]+count;
                count=0;            
                i--;
            }
        }
    }
    for (t=0;t<n;t++)
    { 
        if ((t==(n-1)) && (sum[t]==0))
            sum[t]=0;
        else if ((sum[t]==0) && (sum[t+1]>0))  
            sum[t]=sum[t+1];
    }
    int s=0;
    for (t=0;t<n;t++)
        s=s+sum[t];
    printf("\nThe No of 1's in the given matrix is %d \n" ,s);
}

int getMatrix()
{
    FILE *input=fopen("matrix.txt","r");
    char c;
    int nVer=0,i,j;
    while((c=getc(input))!='\n')
        if(c>='0' && c<='9')
            nVer++;
    map=malloc(nVer*sizeof(int*));
    rewind(input);
    for(i=0;i<nVer;i++)
    {
        map[i]=malloc(nVer*sizeof(int));
        for(j=0;j<nVer;j++)
        {
            do
            {
                c=getc(input);
            }while(!(c>='0' && c<='9'));                  
            map[i][j]=c-'0';
        } 
    }
    fclose(input);
    return nVer;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:44:42.420

当你第一次描述你想要做什么时，更容易发现问题。无论如何，在我看来你有一个问题，你设置

`i == (n-1),`在初始化阶段，如果 statmnet 正确并且您不减少 i，则每次输入此内容时，

```
if (i==(n-1))
                {
                sum[i]=count;
                count=0;

                **i--;**
            }   
            else            
            {
                sum[i]=sum[i+1]+count;
                count=0;            
                i--;
            } 
```

# html - pre(html tag) 和 white-space 之间的区别：pre 换行省略

> ID：12113974
> 
> 赞同：4
> 
> 时间：2012-08-24T17:22:25.957
> 
> 标签：html, css

我认为 pre(html tag) 就像'white-space:pre'一样活跃。但事实并非如此。

```
<pre>
aaa
bbb
</pre>

<p style="white-space:pre;">
aaa
bbb
</p> 
```

`<pre>`忽略第一个和最后一个`\n`。但`<p>`保留第一个`\n`并忽略最后一个。为什么？

[jsfiddle测试](http://jsfiddle.net/zmmbreeze/EkfYe/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T19:12:19.647

HTML 标准规定：

> 注意：在 HTML 语法中，紧跟在 pre 元素开始标记之后的前导换行符会被去除。

在这里阅读：http: [//www.whatwg.org/specs/web-apps/current-work/multipage/grouping-content.html#the-pre-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/grouping-content.html#the-pre-element)

因此，该`<pre>`元素包含此特殊规则。似乎如果其他类型的元素有`white-space:pre`设置，则该规则不适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:29:03.567

The `<pre>`-Tag displays the content with a monospace font, wich means that every character has the same width.

It is easier to read instead of the standard-font of the browser, used in the `<p style="white-space:pre;">`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T17:29:13.080

Actually, they are the same. The reason you're getting the space on top for `<p>`s is because by default `<p>` adds an empty line above itself so that you can distinguish between paragraphs. `<pre>` doesn't do that, so you get no extra space there.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T19:13:29.650

HTML`pre`元素和 CSS 设置`white-space: pre`是完全不同的结构；将两者混淆是类别错误。但是您似乎指的是关于换行符的渲染差异。

[根据规范](http://www.w3.org/TR/html401/appendix/notes.html#h-B.3.1)，紧跟在开始标签后面的换行符应该被忽略，所以

```
<pre>
aaa
bbb
</pre> 
```

应该相当于

```
<pre>aaa
bbb
</pre> 
```

`p`如果被替换`pre`或添加了一些样式，这不应该以任何方式改变。但是浏览器并不总是遵守规则，这就是其中一种情况。

他们只是以不同的方式对待元素。士气是你应该避免使用`pre`元素以及`white-space: pre`，如果你使用它们，请继续关注这个变化。需要时，不要紧跟在开始标记后面的换行符，而是空格和换行符（如果你想在开始处有一个空行）。

# php - 在php中读取已删除的记录

> ID：12113975
> 
> 赞同：-1
> 
> 时间：2012-08-24T17:22:33.333
> 
> 标签：php

我有这样的代码，用户从列表框中选择 field1 并单击提交以删除所选值的所有数据。

```
$sql = "delete from table where field1 = '$parameter' ;
mssql_query ($sql); 
```

成功删除即提交后，我想显示类似“从表中删除 153 条记录”之类的文本

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:24:41.680

使用[`mssql_rows_affected()`](http://www.php.net/manual/en/function.mssql-rows-affected.php)：

```
$sql = "delete from table where field1 = '$parameter' "; //added closing quotes
mssql_query ($sql);
echo "Deleted " . mssql_rows_affected($database_link) . " records from table."; //where `$database_link` is the variable that contains the `mssql_connect` statement 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:25:23.617

通过调用[mssql_rows_affected](http://www.php.net/manual/en/function.mssql-rows-affected.php)：

```
$sql = "delete from table where field1 = '$parameter'";
mssql_query ($sql);

echo 'Deleted ' . mssql_rows_affected($link) . ' row(s)'; 
```

`$link`您的数据库连接在哪里。

# php - Smarty 输出滤波器

> ID：12113981
> 
> 赞同：0
> 
> 时间：2012-08-24T17:22:50.900
> 
> 标签：php, smarty, tidy

Smarty Templating for php 让您编写每次调用`fetch()`或被`display()`调用的输出过滤器。Smarty 也使用输出缓冲区，你不能创建自己的（当另一个缓冲区仍然处于活动状态时，你不能有一个输出缓冲区）。

我的问题是，我想在完成后对整个文档进行整理，而不是在显示模板时分段进行。我无法将我正在使用的软件重写到只使用一次显示或获取的程度，但我仍然需要使用输出过滤器/整洁，然后将输出刷新到 smarty 中，一次在整个文档上. 但我认为 smarty 没有办法做到这一点。

我的代码工作正常：

```
function tidy_html(&$output, &$smarty){
     $config = array(
           'indent'         => true,
           #'output-html'   => true,
           'wrap'           => 0,
           'drop-proprietary-attributes'    =>    false,
           'indent-cdata' => true,
           'indent-spaces' => 5,
           'tab-size' => 5,
           'show-warnings' => true
         #'markup' => false ,
         #'sort-attributes' => 'alpha',
         #'char-encoding' => 'utf8'
    );
    try {
        $tidy = new tidy;
        $tidy->parseString($output, $config, 'utf8');
        $tidy->cleanRepair();

    } catch (Exception $e) {
        $tidy = $output;
    }
    return $tidy;
}

$view->register_outputfilter('tidy_html'); 
```

但是，因为它在作为`fetch()`或被`display()`调用的部分上运行，如果右括号表示该文件中不存在表格，它会为我关闭它们并破坏布局，破坏我的网站。它的大部分显示都很好，只是在早期关闭表格和一些 div 框时有问题，因为这个软件是如何设置的，它将页面放入块中并在每个块上调用 display。如果该块包含表格的各个部分，它会提前关闭它们，从而导致布局损坏。至少我认为这是正在发生的事情，任何帮助将不胜感激。也许有可能在输出缓冲区被刷新之前抓住它，即使聪明人也在控制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:06:50.113

我在模板中打开了 php 标签，并将其放在任何请求调用的文件的开头：

```
{php}
    ob_start('tidy_html_buffer');
{/php} 
```

这在文件的末尾：

```
{php}
    ob_end_flush();
{/php} 
```

这是回调函数：

```
function tidy_html_buffer(&$output){
    $config = array(
        'indent'         => true,
        #'output-html'   => true,
        'wrap'           => 0,
        'drop-proprietary-attributes'    =>    false,
        'indent-cdata' => true,
        'indent-spaces' => 5,
        'tab-size' => 5,
        'show-warnings' => true
        #'markup' => false ,
        #'sort-attributes' => 'alpha',
        #'char-encoding' => 'utf8'
    );
    try {
        $tidy = new tidy;
        $tidy->parseString($output, $config, 'utf8');
        $tidy->cleanRepair();

    } catch (Exception $e) {
        if(!empty($e)) print_r($e);
        $tidy = $output;
    }
    #print_r($tidy);
    return $tidy;
} 
```

由于 gzip 压缩已打开，因此您无法从早期刷新中获得性能优势，因此这可以以最小的开销或性能损失实现结果，尤其是在缓存之后。

# date - 将日期格式：“Wdy, DD-Mon-YY HH:MM:SS GMT”解析为 D 语言中的 struct Date

> ID：12113982
> 
> 赞同：1
> 
> 时间：2012-08-24T17:22:54.940
> 
> 标签：date, d

我有一个这种格式的日期：`Wdy, DD-Mon-YY HH:MM:SS GMT`我需要对其进行解析并将其转换为`struct std.date.Date`或等价于。我通过使用`split()`s 调用编写了一个非常简单的函数（请查看我的代码下方）。

问题在于性能——我正在寻找一种更快的算法来做到这一点。拆分令牌后，我使用`to!int(tok)`转换为`int`并放入结构中。有没有最好的方法呢？如果不太复杂，请建议内置 D 函数或一些外部模块。

注意：我是一名 C 程序员，从 D 编程语言开始。因此，您将看到一些 C-way 解决方案。

```
struct MyDate {
  int day;
  int month;
  int year;
  int hour;
  int minute;
  int second;
  //int ms;

};

int index_of_month(string mont) 
{

  immutable string[] months = ["jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec"];

  for(int i = 0, len = months.length; i < len; ++i)
    if(months[i] == mont) 
      return i;

  return -1;
}

void main()
{
  //date format Wdy, DD-Mon-YY HH:MM:SS GMT
  string d = "Sun, 24-Aug-2014 15:00:24 GMT";
  string[] parts = split(d, " ");
  string[] _date = split(parts[1], "-");
  string[] _hour = split(parts[2], ":");

  debug { 
    for(int i = 0; i < parts.length; ++i)
      writefln("[%d]: %s", i, parts[i]);

  } else {

    //Handling erros goes here
    //...

    //I write my onw date struct because
    // std.date.Date cannot be compiled 
    // even by using -d flag; and std.datetime.Date is not equivalent to.
    // NOTE: I think that I will have problems when try to compare it 
    // to Clock.currTime()..
    MyDate date;

    //as you can seed below, I did a lot of 
    // string to integer conversion;
    // I don't know much aboud D, but I think
    // that it's so slow. I'm looking for a best 
    // solution(in perfomance questions).
    date.day    =  to!int(_date[0]); // 0 .. 31 min/max 2 digits.

    //I know about enum Month from std.datatime;
    // but there is no(as far as I know) equivalent to Enum.GetValues()/Enum.GetNames()
    // of C#.NET and .indexOf(), so I write my onw implemantation...
    date.month  =  index_of_month(toLower(_date[1])); // 1 .. 12 min/max 2 digits.

    //maybe do it by using e.g(C-way), 
    // int n = 0; n = (n * 10) + (_date[2][0] - '0'); n = (n * 10) + (_date[2][0] - '0'); and so..
    // and lave the compiler do promotion 
    // can be better?
    date.year   =  to!int(_date[2]); // min 2, max 4 digits. 
    date.hour   =  to!int(_hour[0]); // 0 .. 23 min/max 2 digits.
    date.minute =  to!int(_hour[1]); // 0 .. 59 min/max 2 digits.
    date.second =  to!int(_hour[2]); // 0 .. 59 min/max 2 digits.

    writefln("date.day = %d\n"
         "date.month = %d\n"
         "date.year = %d\n"
         "date.hour = %d\n"
         "date.minute = %d\n"
         "date.second = %d\n",
         date.day, date.month,
         date.year, date.hour,
         date.minute, date.second);

  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T12:51:35.580

这就是我想出的：

```
import std.stdio;
import std.format;
import std.string;
import std.datetime;
import std.algorithm;

enum MONTHS = ["jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec"];

int month_to_index(string month) {
    return cast(int)MONTHS.countUntil(month.toLower());
}

void main() {
    string date = "Sun, 24-Aug-2014 15:00:24 GMT";

    string a;
    int day;
    string month;
    int year;
    int hour;
    int minute;
    int second;
    string tz;

    date.formattedRead("%s, %d-%s-%d %d:%d:%d %s", &a, &day, &month, &year, &hour, &minute, &second, &tz);

    DateTime dt = DateTime(year, month.month_to_index(), day, hour, minute, second);

    writeln(dt);
} 
```

`std.datetime`真的需要某种`strptime`and `strftime`。

# less - 是否可以让 LESS 解析器在链接标签中的多个 LESS 文件中创建共享范围？

> ID：12113988
> 
> 赞同：1
> 
> 时间：2012-08-24T17:23:10.277
> 
> 标签：less

对不起，可怕的问题措辞，让我解释一下。

对于我正在处理的项目，我想管理服务器上我的 LESS 文件的各种依赖项。由于项目的结构方式（不同的组件以不同的方式符号链接），仅使用 @import 来构建依赖项等会受到更多限制。

理想情况下，我只想在该部分中吐出所需的 LESS 文件列表，例如：

```
<link rel='stylesheet/less' href='/path/to/some/file.less' type='text/css' media='all' />
<link rel='stylesheet/less' href='/path/to/some/other-file.less' type='text/css' media='all' /> 
```

然后，例如，如果在 file.less 中定义了变量或 mixin，我希望能够在 other-file.less 中使用它。

据我所知，这是行不通的。每个 LESS 文件似乎都存在于其自己的范围内，而其中一个文件中的变量等在另一个文件中不可用。

这个对吗？范围是否完全限于单个文件和其中的任何 @imports？我有理由确定它是，但不完全是。

目前，我的解决方法比我想的要复杂：我正在构建依赖项服务器端，然后将它们快速组合成一个巨大的、单一的 development.less 文件。（请注意，出于生产目的，我有一个编译和缩小我的 less 的构建过程，以便我直接提供 CSS）。

我已经查看了 LESS 源代码中的 browser.js 以获取线索，但我想我会先在这里询问这是否可能甚至是可取的。我对这种行为有点惊讶，因为这不是多个 javascript 文件和内联代码的工作方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T00:45:34.820

## 为什么它不起作用

每个`<link>`LESS 文件都会对该文件进行*预处理*并将其解析为*纯 CSS 输出*。html 本身的“范围”中没有任何变量或任何东西，因此第二个`<link>`无法使用任何东西。这就是为什么一个人无法阅读另一个人。

## 可能的帮助

**使用 LESS 1.5** an`@import`可以仅作为参考（因此不会将直接输出编译到文件中）。所以你`other-file.less`可以这样做：

```
@import (reference) file.less; 
```

获得它所需的依赖关系。

# time-series - 平移时动态加载浮点时间序列的数据

> ID：12113990
> 
> 赞同：0
> 
> 时间：2012-08-24T17:23:17.043
> 
> 标签：time-series, flot, panning

我正在成功地使用 Flot 来绘制我正在处理的时间序列项目的使用情况。浮动图从过去 24 小时开始，并允许平移和缩放。

数据每 15 分钟在服务器上采样一次，转换为 json，并通过 AJAX 的忙轮询由浮点图下载（它检查更改）。

几个月后，我有这么多数据（当然），数组变得相当大。我想限制从服务器下载的 json 只包含浮点图的可见光谱。限制初始下载很容易，但我不知道如何处理平移和缩放。我已经有绑定到平移和缩放的事件处理程序，但它们会在每次移动时触发（尤其是平移）。

是否可以检测平移开始和结束的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:57:04.507

[编辑因为我错过了你已经绑定了处理程序的事实]

如果您已经在捕获 plotpan 事件，则可以对其进行反跳。添加一个计时器，该计时器在平移后触发一定时间（例如 500 毫秒），并在每次 plotpan 触发时重置。这样，动作只在许多连续事件结束时运行一次。

一个非常简单的例子：

```
var delay = null;
element.on("plotpan", function() {
    if (delay) clearTimeout(delay);
    delay = setTimeout(function() {
        // do your stuff here
        delay = null;
    }, 500);
}); 
```

# google-chrome-extension - 用于透明标签或 Windows 的 Google Chrome 扩展

> ID：12113992
> 
> 赞同：5
> 
> 时间：2012-08-24T17:23:40.057
> 
> 标签：google-chrome-extension, browser-tab

是否可以创建允许页面控制的窗口不透明度的浏览器扩展？不是为了让页面上的各种元素具有给定的不透明度，而是为了让人们看到浏览器页面后面的其他窗口（如桌面）。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T01:26:37.407

不，这在扩展中是不可能的。这种透明度将在窗口管理器级别处理，并且需要特定于平台的代码。这意味着 Chrome 必须添加此功能并将其公开为扩展 API（[目前不存在此类功能](https://stackoverflow.com/q/3191160/163956)），或者您必须编写插件。

# git - github中的重复文件夹

> ID：12113994
> 
> 赞同：15
> 
> 时间：2012-08-24T17:24:00.280
> 
> 标签：git, github

我有一个使用 git 跟踪的应用程序，并且存储库在 github 上很热。

在我的本地计算机中，文件夹和文件如下：

![在此处输入图像描述](../Images/89707657f5519c07e27ca49792b1a12b.png)

当我在 Github 中看到该应用程序时，我看到该文件夹`TulpepWebSite`​​重复了。

![在此处输入图像描述](../Images/5934a668f8701daed30d0f3bd7e79274.png) 为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-24T17:27:57.130

Git 区分大小写，但 Windows 不区分大小写。因此，这两个目录在 Git 的视图中并不重复。

如果您在过去某个时候将 TulpepWebsite 重命名为 TulpepWebSite，那么 TulpepWebsite 下的所有文件都将被 git 以旧名称跟踪，而您添加的任何新文件都将以新名称跟踪。

要解决这个问题，我只需将文件夹 git-mv 到其他内容，提交，然后 git-mv 将其恢复为旧名称并再次提交。这有望强制所有路径使用一致的案例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T17:29:08.693

它们不是重复的：TulpepWebsite 和 TulpepWebSite（注意大写的 S）。

您可能重命名了该文件夹，而 git 可能没有删除现在不存在的文件夹...使用 git status 检查这一点，然后通过运行 git rm TulpepWebsite/ 手动从 git 中删除该文件夹

# c# - 如何将 ListBox 中的项目作为 GridView 的标题

> ID：12113995
> 
> 赞同：0
> 
> 时间：2012-08-24T17:23:59.657
> 
> 标签：c#, asp.net

我有一个`ListBox`, on_button 单击，我希望 中的所有项目都`ListBox`显示为`GridView`. 这是我尝试过的代码：

```
protected void DONE4_Click(object sender, EventArgs e)
    {
        Panel7.Visible = true;

        DataTable dt = new DataTable();
        for (int i = 0; i < ListBox1.Items.Count; i++)
        {
            dt.Columns.Add(ListBox1.Items[i].ToString());
        }
        GridView2.DataSource = dt;
        GridView2.DataBind();

        foreach (GridViewRow grdRow in GridView2.Rows)
        {
            DropDownList bind_dropdownlist = new DropDownList();                                                    // defining the property of the DropDownList as bind_dropdownlist
            bind_dropdownlist = (DropDownList)(GridView2.Rows[grdRow.RowIndex].Cells[0].FindControl("Pro_List"));   // finding the  DropDownList from the gridiew for binding
            SqlDataAdapter mydata = new SqlDataAdapter("SELECT DISTINCT Profile_Instance FROM Profile_Master", con);
            DataSet dset = new DataSet();                                                                           // binding the DropDownList with the dataset ds
            mydata.Fill(dset, "Table");
            bind_dropdownlist.DataSource = dset;
            bind_dropdownlist.DataTextField = "Profile_Instance";                                                   // set the DropDownList's DataTextField as designation which display the designation in the dropdownlist after fetching the data from database
            bind_dropdownlist.DataBind();
            bind_dropdownlist.Items.Insert(0, new ListItem("---Choose Profile---", "-1"));
        }
    } 
```

我希望 中的所有项目都`ListBox`显示为 中的标题字段`GridView`。

上面的代码没有给出任何错误，但是运行时它不起作用。任何人都可以帮我解决这个问题吗？

这是我的设计代码`GridView`：

```
<asp:Panel ID="Panel7" runat="server">
        <asp:GridView ID="GridView2" runat="server" CellPadding="4" ForeColor="#333333" 
            GridLines="None" style="text-align: center; font-size: small">

            <Columns>
            <asp:TemplateField HeaderText="">
                <ItemTemplate>
                    <asp:DropDownList ID="Pro_List" runat="server">
                        <asp:ListItem>--Select--</asp:ListItem>                          
                    </asp:DropDownList>
                </ItemTemplate>
            </asp:TemplateField>
            </Columns>
        </asp:GridView>
    </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:27:32.627

设置好DataSource后，调用`DataBind`方法看看会发生什么

```
GridView2.DataSource = dt;
GridView2.DataBind(); 
```

## 编辑

下面的代码工作得很好。经测试。

如果网格中没有数据，它甚至不会显示任何内容，除非您为网格提供 EmptyText 字段属性值。

```
DataTable dt = new DataTable();
DataRow rw = default(DataRow);
for (int i = 0; i < ListBox1.Items.Count; i++)
{
    dt.Columns.Add(ListBox1.Items[i].ToString(),
                                   System.Type.GetType("System.String"));             
}
//Simply adding 10 rows
//Replace this hard coded loop with your looping 
// over your data to add rows.
for (int j = 0; j < 10; j++)
{
    rw = dt.NewRow();
    for (int i = 0; i < ListBox1.Items.Count; i++)
    {
        rw[ListBox1.Items[i].ToString()] = "Hello there";
    }              
    dt.Rows.Add(rw);
}
GridView1.DataSource = dt;
GridView1.DataBind(); 
```

[此链接](http://sdrv.ms/TZMN6v)中提供了工作示例。

# sql - 查询匹配列最多的记录，不匹配的列有空格？

> ID：12113997
> 
> 赞同：0
> 
> 时间：2012-08-24T17:24:15.617
> 
> 标签：sql, sql-server-2008-r2

**问题**

我正在尝试在 SQL Server 中编写一个存储过程来查找最佳匹配记录。给定 5 个输入参数 @A、@B、@C、@D 和 @E（均为 varchar50），它们对应于表中的 5 列 A、B、C、D 和 E，我想找到记录最匹配的列。所选记录中不匹配的每一列都应包含一个空格“ ”。

例如，如果我输入“Sony”、“PlayStation”、“Controller”、“Black”、“Damaged”，并且我的表包含以下列：

```
"Sony"  "Playstation"  "Unit"   "Black"  "Damaged"
"Sony"  "Playstation"  " "      " "      " " 
```

它应该返回第二行，因为 2 个参数匹配并且对于不匹配的 3 个参数，有空格。我不想返回第一行，因为即使 4 个参数匹配，中间的参数也不匹配，而且它不是空格。如果它是一个空格，第一排将是赢家。

**我的方法**

我无法透露各种细节，但我的基本方法（注意我是 SQL 新手）是测试从最特定到最不特定的每个组合。所以我的查询看起来像这样：

```
-- start with most specific
SELECT * FROM dbo.Items WHERE
   A = @A
   B = @B
   C = @C
   D = @D
   E = @E

-- if no matches, try next
IF @@ROWCOUNT = 0
SELECT * FROM dbo.Items WHERE
   A = @A
   B = @B
   C = SPACE(1)
   D = @D
   E = @E

... etc. 
```

就我而言，我只需要真正测试 16 种配置，因为其中一些排列永远不会存在。即便如此，这似乎是实现我想要的一种非常低效的方式。最重要的是，它甚至不起作用。由于正在进行一些自动修剪，因此与空格进行比较似乎是有问题的。无论如何，我目前的方法似乎效率低下并且不起作用 - 所以我向你寻求帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:46:28.327

像这样的东西？

```
-- Temp table to play with
SELECT 1 AS Id, 'Sony' AS A, 'Playstation' AS B, 'Unit' AS C, 'Black' AS D, 
    'Damaged' AS E
INTO #Items
UNION SELECT 2, 'Sony', 'Playstation', ' ', ' ', ' '

-- The query
DECLARE @a nvarchar(50), @b nvarchar(50), @c nvarchar(50), @d nvarchar(50), @e 

nvarchar(50)
SET @a = 'Sony'
SET @b = 'Playstation'
SET @c = 'Controller'
SET @d = 'Black'
SET @e = 'Damaged'

SELECT TOP 1 I.*
FROM (
    SELECT ID,
        CASE WHEN @a = a THEN 1 WHEN a = ' ' THEN 0 ELSE NULL END AS AResult,
        CASE WHEN @b = b THEN 1 WHEN b = ' ' THEN 0 ELSE NULL END AS BResult,
        CASE WHEN @c = c THEN 1 WHEN c = ' ' THEN 0 ELSE NULL END AS CResult,
        CASE WHEN @d = d THEN 1 WHEN d = ' ' THEN 0 ELSE NULL END AS DResult,
        CASE WHEN @e = e THEN 1 WHEN e = ' ' THEN 0 ELSE NULL END AS EResult
    FROM #Items
) IW
INNER JOIN #Items I ON I.ID = IW.ID
WHERE AResult IS NOT NULL AND BResult IS NOT NULL AND CResult IS NOT NULL 
    AND DResult IS NOT NULL AND EResult IS NOT NULL
ORDER BY AResult + BResult + CResult + DResult + EResult DESC 
```

那应该返回这个值：

```
"Sony"  "Playstation"  " "      " "      " " 
```

如果您将我玩过的临时表更改为：

```
SELECT 1 AS Id, 'Sony' AS A, 'Playstation' AS B, ' ' AS C, 'Black' AS D, 
    'Damaged' AS E
INTO #Items
UNION SELECT 2, 'Sony', 'Playstation', ' ', ' ', ' ' 
```

那么你应该得到

```
"Sony"  "Playstation"  " "   "Black"  "Damaged" 
```

最后，如果您的临时表示例有这个：

```
SELECT 1 AS Id, 'Sony' AS A, 'Playstation' AS B, 'Unit' AS C, 'Black' AS D, 
    'Damaged' AS E
INTO #Items
UNION SELECT 2, 'Sony', 'Playstation', 'Unit', ' ', ' ' 
```

不会返回任何内容，因为两者在第三列中都有“单位”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:31:46.750

我会对 5 个比较中的每一个（AE 列之间）进行评分，然后将分数相加。

当 colA = colA 在任何行上时，它的得分为 1。

当 colA <> colA 并且第二行的 colA = ' ' 时，得分为 0。

保留剩余的行不计分（colA 分数的空值）

最佳匹配将具有最高分数，并且在任何列中都没有空分数。

说得通？

这是用于设置列分数的示例更新语句：

```
update table
set scoreAcol = scoreA, scoreAcol = scoreB, scoreCcol = scoreC, scoreDcol = scoreD, scoreEcol = scoreE
from
    (select
    case when cola = @a then 1 when cola= ' ' then 0 end as scoreA,
    case when colb = @b then 1 when colb= ' ' then 0 end as scoreb,
    case when colc = @c then 1 when colc= ' ' then 0 end as scorec,
    case when cold = @d then 1 when cold= ' ' then 0 end as scored,
    case when cole = @e then 1 when cole= ' ' then 0 end as scoree) s
from table 
```

我假设您将在再次评分之前将所有非空分数设置为空。

要合计一行的分数，只需

```
update table set score = scoreAcol + scoreBcol + scoreCcol + scoreDcol + scoreEcol 
```

任何空值都会导致该`score`值为空。然后要查找得分最高的比赛，您可以按`score`降序排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T17:52:41.217

在 SQl Server 中，您可以使用 CTE 和 Nullif 类似的东西（未经测试）

```
declare @a int = 1
, @B int = 2
, @c int= 3
, @d int= 4
, @E int- 5 
```

;with counts (id, ACount, BCount,CCount,DCount,ECount) AS (select id, sum(case when A= @a or nullif(a, '') is null then 1 else 0 end) as ACount , sum(当 b= @b 或 nullif(b, '') 为 null 然后 1 else 0 end) 为 bCount 时的情况，sum(当 c= @c 或 nullif(c, '') 为 null 然后 1 else 0 end) 为cCount , sum(case when d= @d or nullif(d, '') is null then 1 else 0 end) as dCount , sum(case when e= @e or nullif(e, '') is null then 1 else 0 end) 作为来自 dbo.items 的 eCount)

, totals (id,Totalcount) AS (select id, max(ACount+BCount+CCount+DCount+ECount) as totalCount from counts where Acount<>0 and BCount<>0 and CCount<>0 and DCount<> 0 and ECount <>0 按 id 分组）

select i.id, ia, ib, ic, id, ie from dbo.items i join totals t on i.id = t.id 当然参数可以是它们的真实定义。

# file - 如何查看 sinatra 目录中的文件列表？

> ID：12113999
> 
> 赞同：1
> 
> 时间：2012-08-24T17:24:24.087
> 
> 标签：file, sinatra

我在 Sinatra 上运行一个项目，现在它有很多文件和子目录，所以我想查看这些文件及其各自目录的列表。例如，我在地址栏中输入“localhost:4567/landing/”，其中landing 是一些页面的容器，但它却抛出了“Sinatra 不知道这个小曲”。有没有办法做到这一点。我希望你明白我在问什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T18:46:51.827

Sinatra 不处理本地文件系统，它处理 HTTP 路由。例如，`'/'`in`get '/' do`指的是您网站的根 url，而不是您网站的根目录。为了列出本地文件，您需要使用 Ruby`Dir`类，如下所示：

```
#!/usr/bin/env ruby

require 'rubygems'
require 'sinatra'

get '/' do
   Dir.entries('.').map { |e| "<p>#{e}</p>" }
end 
```

**编辑：**当然，直接使用文件系统是很危险的，即使使用路由也是如此，所以我建议您通过阅读一些内容来更好地了解幕后发生的事情。