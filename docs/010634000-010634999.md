# StackOverflow 问答 10634000-10634999

# java - Selecting JTable row without user interaction

> ID：10634007
> 
> 赞同：1
> 
> 时间：2012-05-17T10:29:52.930
> 
> 标签：java, swing, jtable, selection

I want to select JTable zeroth row be selected by default

I am using following code but it gets the zeroth to be focused, not selected

```
jtblProduct.setCellSelectionEnabled(true);
jtblProduct.changeSelection(0, 0, false, false);
jtblProduct.requestFocus();
jtblProduct.scrollRectToVisible(new Rectangle(jtblProduct.getCellRect(0, 0, true))); 
```

When I get the selected row by using the following code it returns -1, which means none selected.

```
jtblProduct.getSelectedRow() 
```

Please provide me the way to select the zeroth row by default.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:37:02.233

*   我对此没有任何问题，意思是

    一个）`table.changeSelection(row, col, false, false);`

    或者

    b)`table.getSelectedRow()`

*   也许一切都取决于如何设定值`ListSelectionModel`

*   为了获得更好的帮助，请尽快使用[SSCCE编辑您的问题](http://sscce.org/)

代码

```
import java.awt.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.table.DefaultTableModel;

public class TableSelectionGood implements ListSelectionListener {

    private JTable[] tables;
    private boolean ignore = false;

    public TableSelectionGood() {
        Object[][] data1 = new Object[100][5];
        Object[][] data2 = new Object[50][5];
        //Object[][] data3 = new Object[50][5];
        for (int i = 0; i < data1.length; i++) {
            data1[i][0] = "Company # " + (i + 1);
            for (int j = 1; j < data1[i].length; j++) {
                data1[i][j] = "" + (i + 1) + ", " + j;
            }
        }
        for (int i = 0; i < data2.length; i++) {
            data2[i][0] = "Company # " + ((i * 2) + 1);
            for (int j = 1; j < data2[i].length; j++) {
                data2[i][j] = "" + ((i * 2) + 1) + ", " + j;
            }
        }
        /*for (int i = 0; i < data3.length; i++) {
            data3[i][0] = "Company # " + (i * 2);
            for (int j = 1; j < data3[i].length; j++) {
                data3[i][j] = "" + (i * 2) + ", " + j;
            }
        }*/
        String[] headers = {"Col 1", "Col 2", "Col 3", "Col 4", "Col 5"};
        DefaultTableModel model1 = new DefaultTableModel(data1, headers);
        DefaultTableModel model2 = new DefaultTableModel(data2, headers);
        //DefaultTableModel model3 = new DefaultTableModel(data3, headers);
        final JTable jTable1 = new JTable(model1);
        jTable1.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        final JScrollPane sp1 = new JScrollPane();
        sp1.setPreferredSize(new Dimension(600, 100));
        sp1.setViewportView(jTable1);
        final JTable jTable2 = new JTable(model2);
        jTable2.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        final JScrollPane sp2 = new JScrollPane();
        sp2.setPreferredSize(new Dimension(600, 100));
        sp2.setViewportView(jTable2);
        /*final JTable jTable3 = new JTable(model3);
        jTable3.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        final JScrollPane sp3 = new JScrollPane();
        sp3.setPreferredSize(new Dimension(600, 100));
        sp3.setViewportView(jTable3);
        TableSelectionGood tableSelection = new TableSelectionGood(jTable1, jTable2, jTable3);*/
        TableSelectionGood tableSelection = new TableSelectionGood(jTable1, jTable2);
        JPanel panel1 = new JPanel();
        //panel1.setLayout(new GridLayout(3, 0, 10, 10));
        panel1.setLayout(new GridLayout(2, 0, 10, 10));
        panel1.add(sp1);
        panel1.add(sp2);
        //panel1.add(sp3);
        JFrame frame = new JFrame("tableSelection");
        frame.add(panel1);
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    public TableSelectionGood(JTable... tables) {
        for (JTable table : tables) {
            table.getSelectionModel().addListSelectionListener(this);
        }
        this.tables = tables;
    }

    private JTable getTable(Object model) {
        for (JTable table : tables) {
            if (table.getSelectionModel() == model) {
                return table;
            }
        }
        return null;
    }

    private void changeSelection(JTable table, String rowKey) {
        int col = table.convertColumnIndexToView(0);
        for (int row = table.getRowCount(); --row >= 0;) {
            if (rowKey.equals(table.getValueAt(row, col))) {
                table.changeSelection(row, col, false, false);
                return;
            }
        }
        table.clearSelection();
    }

    @Override
    public void valueChanged(ListSelectionEvent e) {
        if (e.getValueIsAdjusting() || ignore) {
            return;
        }
        ignore = true;
        try {
            JTable table = getTable(e.getSource());
            int row = table.getSelectedRow();
            String rowKey = table.getValueAt(row, table.convertColumnIndexToView(0)).toString();
            for (JTable t : tables) {
                if (t == table) {
                    continue;
                }
                changeSelection(t, rowKey);
                JViewport viewport = (JViewport) t.getParent();
                Rectangle rect = t.getCellRect(t.getSelectedRow(), 0, true);
                Rectangle r2 = viewport.getVisibleRect();
                t.scrollRectToVisible(new Rectangle(rect.x, rect.y, (int) r2.getWidth(), (int) r2.getHeight()));
                System.out.println(new Rectangle(viewport.getExtentSize()).contains(rect));
                System.out.println(table.getSelectedRow());
            }
        } finally {
            ignore = false;
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                TableSelectionGood tableSelection = new TableSelectionGood();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:39:12.340

你试过jtable吗？[setRowSelectionInterval](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setRowSelectionInterval%28int,%20int%29) (..) ?

评论补充：也可以试试 jtable。[addRowSelectionInterval](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#addRowSelectionInterval%28int,%20int%29) (..)。

# .net - Windows 8 平板电脑上的快速入门

> ID：10634012
> 
> 赞同：3
> 
> 时间：2012-05-17T10:30:11.803
> 
> 标签：.net, windows-8, windows-runtime

我想为 Windows 8 平板电脑开发应用程序。我现在有：

1.  Windows 8 消费者预览机
2.  VS 工作室 2011

我想知道：

*   我从哪里开始？
*   为 Windows 8 桌面开发的应用程序是否会像在 Windows 8 平板电脑中一样使用？
*   我在哪里可以得到模拟器之类的东西来测试它们？
*   我可以为 Windows 8 平板电脑应用程序提供一些 hello world 示例吗？我是为 Windows 8 桌面做的，但它会像在选项卡上一样工作吗？
*   我需要在这个 WINRT 出现的地方使用 WInRT 的开发环境有什么区别？
*   当我选择新的 Metrostyle 应用程序时，它会自动切换到 winrt 而不是 .net？

winrt vs .net 有很多困惑（当我们真正开始在消费者预览版上使用 VS 2011 时）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T16:32:03.563

除了外形尺寸和可用功能之外，台式机和平板电脑 Windows 8 机器之间没有区别。好吧，其中一些平板电脑将在 ARM 硬件（Windows 的 Windows RT SKU）上运行，因此如果您使用任何本机代码，您需要将另一个平台纳入您可能想要支持的平台（x86、x64 ， 手臂）。

开始 - 只需在 Visual Studio 11 中创建一个空白 Metro Style App 项目并使用 F5 运行它。Metro 风格应用程序使用 Windows 运行时（简称 WinRT）而不是“桌面应用程序”使用的 WinAPI/Win32。使用 WinAPI 的桌面应用程序仍可在非 ARM 设备上使用，但不能在 Windows 应用商店中出售（尽管您可以在自己的网站上出售它并在应用商店中展示它）。

这里有一些你可以开始的[学习资源](http://blog.xyzzer.me/2012/01/16/beginning-winrt-development-part-2-learning-resources/)。我建议从构建会议视频开始。

*   [http://dev.windows.com](http://dev.windows.com) – Windows 开发中心主页
*   [http://channel9.msdn.com/Events/Build/Build2011?sort=sequential&direction=desc&term=&t=windows%2Bruntime](http://channel9.msdn.com/Events/Build/Build2011?sort=sequential&direction=desc&term=&t=windows%2Bruntime) – 在 Windows 运行时构建 2011 会议视频
*   [http://msdn.microsoft.com/en-us/library/windows/apps/br211377.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211377.aspx) – Windows 运行时参考
*   [http://code.msdn.microsoft.com/windowsapps](http://code.msdn.microsoft.com/windowsapps) – Metro 风格应用示例
*   [http://social.msdn.microsoft.com/Forums/en-US/category/windowsapps](http://social.msdn.microsoft.com/Forums/en-US/category/windowsapps) – MSDN 论坛 – Windows Metro 风格应用
*   [http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp) – MSDN 论坛 – 使用 C# 或 VB 构建 Metro 风格的应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:40:30.763

您可以继续使用带有 windows 8 RTM 的 VS2012 。

VS 2012 本身包含模拟器，但你总是选择本地机器在你自己的机器上部署你的应用程序以获得应用程序的外观和感觉

# c# - 在没有回发的下拉列表选择中使文本框只读

> ID：10634013
> 
> 赞同：1
> 
> 时间：2012-05-17T10:30:13.627
> 
> 标签：c#, asp.net, textbox, postback, twitter-bootstrap

是否可以在选择组合框时使文本框只读，而不发回网页？我正在创建一个疾病表格，如果用户选择没有看过医生，我希望将特定的文本框设为只读。回发事件的问题是回发后它不会打开模态窗口，只有再次单击按钮时才会打开。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:36:46.023

要在 javascript 中使文本框只读，请使用以下代码。在组合框事件上调用此代码。

asp代码：

```
<asp:DropDownList ID="ddl1" runat="server" AutoPostBack="true" onselectedIndexChanged="func()" Width="150px"> 
```

JS代码：

```
 function func()
    {
    var el = document.getElementById('txt');
      this.setAttribute('readonly');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:59:21.260

试试这个

```
<asp:DropDownList ID="dropDownID" runat="server" onselectedIndexChanged="myFunction()" > 
```

将以下代码放在表单或内容控件内的 aspx 文件中

```
<script type="text/javascript">
    function myFunction()
    {
        var dropDown= document.getElementById("<%=dropDownID.ClientID %>")
        var ddlSelectedValue= dropDown.options[dropDown.selectedIndex].value;
        if(ddlSelectedValue=="desiredValue")
        {
          var textBox = document.getElementById("<%=textBoxId.ClientID %>");
          textBox.disabled=true;
        }
    }
</script> 
```

请付出一些努力让它发挥作用。

# php - 我们可以在 php 中的另一个类中创建一个类的对象吗？

> ID：10634014
> 
> 赞同：8
> 
> 时间：2012-05-17T10:30:16.743
> 
> 标签：php, class, object

我们可以在 php 中的另一个类中创建一个类的对象吗？我在 php 中做了一个小应用程序，现在我试图以类-方法-对象的方式转换整个代码。我现在很困惑。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-20T11:51:53.630

你可以这样做，但是否应该取决于这两个类的生命周期以及它们之间的关系。基本上，您可以在[Composition](https://secure.wikimedia.org/wikipedia/en/wiki/Object_composition)和[Aggregation](https://secure.wikimedia.org/wikipedia/en/wiki/Aggregation_%28object-oriented_programming%29#Aggregation)之间进行选择。

## 作品

当创建的对象的生命周期等于或小于将使用它的对象时，您使用组合，例如

```
class A 
{
    private $belongsToAOnly;

    public function __construct()
    {
        $this->belongsToAOnly = new IBelongToA;
    }
} 
```

在这种情况下`A`“拥有” `IBelongToA`。当`A`被摧毁时，`IBelongToA`也被摧毁。它不能独立存在，很可能只是`A`. 它可以是类似ValueObject[或](http://martinfowler.com/eaaCatalog/valueObject.html)[`Money`](http://martinfowler.com/eaaCatalog/money.html)其他一些数据类型。

来自 Craig Larman 的“应用 UML 和模式”：

> 复合体负责创建和删除它的部分 - 通过它自己创建/删除部分，或者通过与其他对象协作。与此约束相关的是，如果复合材料被破坏，它的部分必须被破坏，或者附加到另一个复合材料上”

## 聚合

当创建的对象的生命周期较长时，您使用聚合：

```
class A 
{
    private $dbAdapter;

    public function __construct(DbAdapter $dbAdapter)
    {
        $this->dbAdapter = $dbAdapter;
    }
} 
```

与 Composition 不同，这里没有所有权的含义。`A`使用`DbAdapter`，但当`A`被破坏时仍然`DBAdapter`存在。这是一种“使用”关系，而不是“拥有”关系。

## 创建者模式 (GRASP)

[可以在 GRASP](https://secure.wikimedia.org/wikipedia/en/wiki/GRASP_%28object-oriented_design%29#Creator)中的创建者模式中找到一个很好的启发式来决定一个对象何时可以在运行时创建另一个对象

> *   B 的实例包含或组合聚合了 A 的实例
> *   B 的实例记录 A 的实例
> *   B 的实例密切使用 A 的实例
> *   B 的实例具有 A 实例的初始化信息并在创建时传递它。

或者，您可以在需要创建某些东西的实例并聚合工厂实例时创建工厂，这将使您更清晰[地分离协作者和创建者](http://misko.hevery.com/2008/08/21/where-have-all-the-singletons-gone/)。

## 可测试性

在对象中创建对象产生的一个问题是它们难以测试。当您进行单元测试时，您通常不想重新创建和引导整个系统环境，而是专注于单独测试那个特定的类。为此，您可以使用[Mock Objects](http://www.phpunit.de/manual/3.6/en/test-doubles.html)替换该类的依赖项。使用合成时不能这样做。

因此，根据一个类的协作者所做的事情，您可能想要决定始终使用聚合，因为这样您就可以一直有效地进行[依赖注入](https://secure.wikimedia.org/wikipedia/en/wiki/Dependency_injection)，这将允许您轻松交换一个类的协作者，例如替换他们和 Mocks。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-17T10:38:26.990

是的，你可以，但这会增加代码耦合并使测试更加困难。
我建议在类之外创建它并将其作为参数传递（称为依赖注入）。

```
class Foo
{
}

class Bar
{
  public function __construct(Foo $foo)
  {
    $this->foo = $foo;
  }
}

$foo = new Foo();
$bar = new Bar($foo); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T10:54:29.640

是的，你可以做到..

这是一个例子..

```
a.php
<?php
    class a{
        public function function_1(){
           echo "b";
        }
     }
?>

b.php
<?php
     include_once ("a.php");
     class b{
        public function function_b(){
             $a = new a;
             $a->function_1();
        }
      }
      $b= new b;
      $b->function_b();
 ?> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-17T10:34:06.600

是的，您可以从另一个类中的特定类创建对象。

```
class SomeClass{

}
class SomeOtherClass {
     function hello(){
         $o = new SomeClass;
     }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-17T10:33:12.500

是的，你也可以在一个类中定义一个函数。您可以在 php 中的类中完成所有操作，请将您的代码发布在您感到困惑的地方。

示例：类中的对象。

```
class Foo
{
   public $bar; // another object!

   public __construct()
   {
      $this->bar = new Bar();
    }
} 
```

（全局）类中的函数

```
<?php
    class Foo
    {
        public function __construct()
        {
            function __construct()
            {
                echo "Yes, I'm a global function!";
            }
        }
    }

    new Foo();
    __construct();

?> 
```

# perl - 如何根据模式将输出文件拆分为多个块

> ID：10634021
> 
> 赞同：0
> 
> 时间：2012-05-17T10:30:47.197
> 
> 标签：perl

我有一个包含以下内容的输出文件。我想根据“模式”将它分成块并存储在一个数组中。

```
Sample output:
100 pattern
line 1
line 2
line 3
101 pattern
line 4
102 pattern   
line 5
line 6
 ... 
```

*第n*^次和第 ( *n* +1)^次“模式”出现之间的内容是一个块：

```
Block 1:
100 pattern
line 1
line 2
line 3

Block 2:
101 pattern
line 4

Block 3:
102 pattern   
line 5
line 6 
```

基本上我正在跨行搜索模式并将其间的内容存储到数组中。

请让我知道如何在 perl 中实现

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:00:02.547

假设您的*模式*是包含单词的完整行`pattern`（而普通行不包含），并且您希望数组元素是整个块：

```
my @array;
my $i = 0;

for my $line ( <DATA> ) {
    $i++ if ( $line =~ /pattern/ );
    $array[$i] .= $line;
}

shift @array unless defined $array[0];  # if the first line matched the pattern 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:40:36.450

我知道您已经接受了一个答案，但我想通过读取数据并使用正则表达式来拆分它来展示您如何做到这一点。

```
#!/usr/bin/perl

use strict;
use warnings;

use 5.010;

my $input = do { local $/; <DATA> };

my @input = split /(?=\d+ pattern)/, $input;

foreach (0 .. $#input) {
  say "Record $_ is: $input[$_]";
}

__DATA__
100 pattern
line 1
line 2
line 3
101 pattern
line 4
102 pattern   
line 5
line 6 
```

# grails - Grails 过滤器序列

> ID：10634023
> 
> 赞同：0
> 
> 时间：2012-05-17T10:30:49.420
> 
> 标签：grails, filter

在我的 Grails 应用程序中，我有两个过滤器来保护我的所有控制器的每个操作（控制器：' *'，操作：'* '）。如何指定 filter1 在 filter2 之前执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:03:43.257

您可以在过滤器类中指定*dependsOn属性，如下所示：*

```
class SecondFilters {
    def dependsOn = [FirstFilters]
    def filters = { ... }
} 
```

# java - 无法为数据库操作正确获取项目对象

> ID：10634036
> 
> 赞同：-1
> 
> 时间：2012-05-17T10:31:26.140
> 
> 标签：java

我迫切需要一些帮助。我正在做一个 StockManagement 项目。由于错误，我无法将项目插入到数据库中：

> org.bil.service.StockManagerImpl.actionPerformed 的线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常（StockManagerImpl.java:163）

我无法解决它。我的代码很长，但我认为这将帮助您找到问题所在。

```
public class StockManagerImpl implements ActionListener
{
    Date entryDate;
    int itemNo;
    String itemName;
    double unitPrice;
    double qty;
    double totalPrice;
    String supplier;
    String remarks;
    JTextField txtEntryDate;
    JTextField txtItemNo;
    JTextField txtItemName;
    JTextField txtUnitPrice;
    JTextField txtQty;
    JTextField txtTotalPrice;
    JTextField txtSupplier;
    JTextField txtRemarks;
    JButton BttnSaveAdded;

    StockManagerDAO stockManagerDAO;

    Toolkit kit = Toolkit.getDefaultToolkit();
    Dimension screenSize = kit.getScreenSize();
    int screenHeight = screenSize.height;
    int screenWidth = screenSize.width;
    Image img = kit.getImage("images/icon.JPG");

    JFrame newFrame;
    public void addNewItem() {

        newFrame = new JFrame("Add New");
        newFrame.setSize(220, 250);
        newFrame.setResizable(false);
        newFrame.setIconImage(img);

        JLabel lblEntryDate = new JLabel("Item EntryDate: ");
        JLabel lblItemNo = new JLabel("Item No: ");
        JLabel lblItemName = new JLabel("Item Name: ");
        JLabel lblUnitPrice = new JLabel("Item UnitPrice: ");
        JLabel lblQty = new JLabel("Item Qty: ");
        JLabel lblTotalPrice = new JLabel("Item TotalPrice: ");
        JLabel lblSupplier = new JLabel("SupplierDetails: ");
        JLabel lblRemarks = new JLabel("Remarks: ");
        JLabel lblEmpty1 = new JLabel("");
        JLabel lblEmpty2 = new JLabel("");
        //txtEntryDate = new JTextField(10);
        //  JFormattedTextField txtEntryDate = new JFormattedTextField(new SimpleDateFormat("d-M-yyyy"));
        //  txtEntryDate.setValue(new Date());

        txtEntryDate = new JFormattedTextField(new SimpleDateFormat("d-M-yyyy"));
        txtItemNo = new JTextField(10);
        txtItemName = new JTextField(10);
        txtUnitPrice = new JTextField(10);
        txtQty = new JTextField(10);
        txtTotalPrice = new JTextField(10);
        txtSupplier = new JTextField(10);
        txtRemarks = new JTextField(10);

        JButton bttnAdd = new JButton("Save");
        JButton bttnCancel = new JButton("Cancel");

        bttnAdd.addActionListener(this);
        bttnCancel.addActionListener(this);

        JPanel centerPane = new JPanel();
        JPanel bottomPane = new JPanel();

        centerPane.add(lblEntryDate);
        centerPane.add(txtEntryDate);
        centerPane.add(lblItemNo);
        centerPane.add(txtItemNo);
        centerPane.add(lblItemName);
        centerPane.add(txtItemName);
        centerPane.add(lblUnitPrice);
        centerPane.add(txtUnitPrice);
        centerPane.add(lblQty);
        centerPane.add(txtQty);
        centerPane.add(lblTotalPrice);
        centerPane.add(txtTotalPrice);
        centerPane.add(lblSupplier);
        centerPane.add(txtSupplier);
        centerPane.add(lblRemarks);
        centerPane.add(txtRemarks);
        bottomPane.add(bttnAdd);
        bottomPane.add(bttnCancel);
        centerPane.setLayout(new GridLayout(0, 2));

        newFrame.getContentPane().add(centerPane, BorderLayout.CENTER);

        newFrame.getContentPane().add(bottomPane, BorderLayout.SOUTH);
        newFrame.setLocation(screenWidth / 4, screenHeight / 4);
        newFrame.show();
        System.out.println("Show AddItem Window");
    }

    @Override
    public void actionPerformed(ActionEvent e) {
      if(e.getActionCommand()=="Save")
      {
            System.out.println("Enterered ActionListener for AddItem");  
            entryDate = (Date)((JFormattedTextField) txtEntryDate).getValue();
            if(txtItemNo.equals(""))
            {
                itemNo = 0;
            }
            try
            {
            itemNo = Integer.parseInt(txtItemNo.getText());
            unitPrice = Double.parseDouble(txtUnitPrice.getText());
            qty = Double.parseDouble(txtQty.getText());
            }
            catch(NumberFormatException ne)
            {
                System.out.println("Integer .ParseInt error" + ne);
            }
            itemName = txtItemName.getText();
            totalPrice = unitPrice * qty;
            supplier = txtSupplier.getText();
            remarks = txtRemarks.getText();

          if (txtItemName.equals(""))
          {
                JOptionPane.showMessageDialog(null, "Please enter Item name.");
                 }
                if (txtUnitPrice.getText() == "") {
                JOptionPane.showMessageDialog(null,
                        "Please enter UnitPrice for the item");
                     }
                 if (txtQty.getText() == "") {
                 JOptionPane.showMessageDialog(null,
                        "Please enter Quantity of item to be added");
               }    else {

                Items item = new Items(entryDate, itemNo, itemName, unitPrice, qty,
                        totalPrice, supplier, remarks);
                stockManagerDAO.addNewItem(item);
                JOptionPane.showMessageDialog(null, "Item Saved");
               }
        if(e.getActionCommand()=="Cancel")
        {
            newFrame.setVisible(false);
        }
      }
    }
    }

Items.java
public class Items
{
       Date entryDate;
       int itemNo;
       String itemName;
       double unitPrice;
       double qty;
       double totalPrice;
       String supplier;
       String remarks;

      // default constructor
      public Items()
      {       
        entryDate = new Date() ;
        itemNo = 0;
        itemName="";
        unitPrice=0;
        qty=0;
        totalPrice=0;
        supplier="";
       remarks="";
      }

    public Items(Date entryDate,int itemNo,String itemName,double unitPrice,double qty,double totalPrice,String supplier,String remarks)
    {
        this.entryDate = entryDate;
        this.itemNo = itemNo;
        this.itemName = itemName;
        this.unitPrice = unitPrice;
        this.qty =qty;
        this.totalPrice=totalPrice;
        this.supplier=supplier;
        this.remarks=remarks;
    } 
    //getter and setter methods

} 
```

希望这两个类足以解决问题。请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:37:00.560

我没有看到任何初始化`stockManagerDAO`，所以它是`null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:37:20.593

您正在访问一个没有有效对象值（有`null`值）的变量，因此您的异常。您需要检查第 163 行`StockManagerImpl`（它在其 actionPerformed() `method) and see what variables can be null at that point. Once identified the variables in question, protect the operation with an excplicit check on whether it is`null` 中：

```
if (var != null) {
  // use var
} 
```

或者更改代码以确保此时它不能为空

# javascript - call a function onclick a button in html5

> ID：10634038
> 
> 赞同：2
> 
> 时间：2012-05-17T10:31:28.027
> 
> 标签：javascript, android, html, touch

I want to call a function by touching a button in HTML5\. I haveange in a canvas drawn a rect.

Here is my code:

```
<body>
<canvas id="canvas" width="200" height="300"></canvas>
<button id="as" type="button">Left</button></body>
<script>
    var inc=10;
    var c=document.getElementById("canvas");
    ctx = c.getContext("2d");
    ctx.fillRect(x,0,150,75);
    function moveLeft(){ x+=inc }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:53:20.577

既然你提到了“触摸”，我想我们需要一个计时器。画布绘制例程也需要一些修复。这是我的版本：

```
<html><body>
<canvas id="canvas" width="200" height="300" style='border:1px solid black'></canvas>
<button id="as" type="button" onmouseover='startMove()' onmouseout='stopMove()'>Left</button></body>
<script>
    var c=document.getElementById("canvas");
    var ctx = c.getContext("2d");
    var inc = 10;
    var timer = 0;
    var x = 100;
    function moveLeft(){ if ( x > 0 ) x-=inc; drawCtx(); }
    function drawCtx(){ ctx.clearRect(0,0,200,300); ctx.fillStyle='black'; ctx.fillRect(x,0,50,75); }
    function startMove(){ stopMove(); timer = setInterval(moveLeft, 1000);  }
    function stopMove(){ clearInterval(timer); }
    drawCtx();
</script> 
```

这样做是当您将鼠标悬停在它上面时，它将开始每秒调用一次 moveLeft（1000 毫秒间隔），直到您移开鼠标。

代码不是很好，但它可以工作，我希望它足够简单，可以理解这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T11:06:23.847

这是一个移动所有方向和边界检查的示例：

HTML：

```
<canvas id="canvas"></canvas><br>
<button type="button" onclick="moveRect(0, -10);">move up</button><br>
<button type="button" onclick="moveRect(-10, 0);">move left</button>
<button type="button" onclick="moveRect(+10, 0);">move right</button><br>
<button type="button" onclick="moveRect(0, +10);">move down</button> 
```

JS：

```
var c = null, ctx = null, x = 0, y = 0;
var width = 150, height = 75;

function moveRect(x2, y2) {
    ctx.clearRect(x, y, width, height);
    x += x2;
    if (x < 0) x = 0;
    else if (x > c.width - width) x = c.width - width;
    y += y2;
    if (y < 0) y = 0;
    else if (y > c.height - height) y = c.height - height;
    ctx.fillRect(x, y, width, height);
}

window.onload = function() {
    c = document.getElementById("canvas");
    ctx = c.getContext("2d");
    x = 0;
    moveRect(0, 0);
} 
```

CSS：

```
#canvas {
    width: 200;
    height: 300px;
    border: 1px solid red;
} 
```

另请参阅[此示例](http://jsfiddle.net/yDnBR/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:50:58.640

您可以提供填充样式以使您的矩形可见或绘制边框。其次，您想将事件附加到按钮以移动画布上绘制的矩形。可以通过此代码完成，并且可以根据您的需要对代码进行建模。[在 JsFiddle 上使用 Javascript](http://jsfiddle.net/8YSX9/)的[演示和在 JsFiddle 上使用 jQuery 的演示](http://jsfiddle.net/ZUFvd/2/)

```
x =200;
$('#as').click(function()
{    
    var inc=10;
    var c=document.getElementById("canvas");
    //c.style.backgroundColor = "#ff0000";
    ctx = c.getContext("2d");    

    ctx.fillStyle="#ff0000";    
    ctx.fillRect(x+5,0,15,75);

    ctx.fillStyle="#ffffff";    
    ctx.fillRect(x,0,15,75);
    x-=5;
}
);​ 
```

# mongodb - 来自 Mongoid 标准对象的 MongoDB 查询

> ID：10634045
> 
> 赞同：1
> 
> 时间：2012-05-17T10:32:00.523
> 
> 标签：mongodb, mongoid

标准中是否有一种方法可以打印标准生成的实际 MongoDB 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:01:01.190

如果您检查 Mongoid Criteria 实例，您将看到“选择器”（基本上）直接映射到 MongoDB 选择器。然而 Mongoid Criteria 可以被链接并被延迟评估，因此链接和延迟评估的结果在您执行实际的 DB 操作之前不可用。因此，如果您想查看最终结果，您应该查看相应的日志。对于测试，这是 log/test.log，对于“rails c”控制台，这是 log/development.log——这是标准的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-21T14:59:25.993

将条件添加到查询中，然后您可以使用`toString()`.

```
Query query = new Query();
query.addCriteria(criteria);
query.toString(); 
```

# android - 通过代理网络使用 http-client 进行流式传输的最佳性能方式

> ID：10634047
> 
> 赞同：2
> 
> 时间：2012-05-17T10:32:04.127
> 
> 标签：android, sockets, httpclient, android-mediaplayer

我正在使用具有代理身份验证的网络，需要用户名/密码进行身份验证。我想流式传输音乐，我知道`MediaPlayer`只能从直接网络流式传输。现在，我想使用`HttpClient`或其他网络类来下载媒体并在下载时在本地播放，我知道`HttpClient`通过代理网络使用下载：

```
String M_url = "http://printf.ir/music/01.wma";

DefaultHttpClient request = new DefaultHttpClient();
request.getCredentialsProvider().setCredentials(
    AuthScope.ANY,
    new NTCredentials(proxyUser, proxyPassword,
              proxyAddress, proxyDomain));
HttpHost p = new HttpHost(proxyAddress, proxyPort);
request.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY,p);

URL url = new URL(M_url);
HttpGet httpGet = new HttpGet(new URI(url.getProtocol(), url.getHost(),
              url.getPath(), url.getQuery(), null));

byte[] buffer = new byte[5 * 1024];
int readBytes = 0;

InputStream in = request.execute(httpGet).getEntity().getContent();

while ( (readBytes = in.read(buffer, 0, 1024)) != -1){
     //buffer is completed
} 
```

如何将缓冲区字节链接到`MediaPlayer`对象并成功播放媒体？请给我一个最佳性能解决方案。

感谢您的提前:)

# php - 带 Sagepay 的 Codeigniter 和 $_GET 变量

> ID：10634048
> 
> 赞同：0
> 
> 时间：2012-05-17T10:32:06.440
> 
> 标签：php, codeigniter, input, get, opayo

我正在将 Sagepay 集成到我的 Codeigniter v2.1 应用程序中 - 出于某种原因，我在获取 $_GET 查询字符串中从 Sagepay 返回的加密数据时遇到问题。

每当我尝试 $_GET 中的变量时，它都会返回 FALSE，类似地，$_GET 数组本身会返回一个空数组。

网址如下：

```
http://mydomain.com/packages/payment_status/success/?crypt=IgAdEBkXOhwsHRAATkVESF5RQkNDSEJEW1BWSVpDWVNDQUFXXVJXVCI1ICAOLApZFEJMIUVMRiMvSVoxMFxeMTMjW0kuQDAkXjBGIVoiK0FAUzcwQRhINxsTABAASTkuSDcbEwAQADATEQ8NA09EVUNEVl9OMAcXVCQGAB4KHA0cEwAMHBpWEg8XTyEBBhARBRYIEQNcUjELNQMRBioAT0VVQE1OUFpCLiQnJiVGSzYrJzogPTEqVDUqKiFPPzUxMDxWKiAoNlQ1ARcGExYdNgoBAQkHSTgqOikuJjctNjBQNQEXGzEbARYmExYbCBtPOionOTcxLSwqNlImJUYkAB0RAwZJKDIgNS0rIEk1HQMHNR8BU1RJQTA2FhcDFws3GxMAEABJOCo6Jyc3Ny42MFAmDxYLJg0VFkkgLD0lST4VFgdAMgwJDRsBSVVDREBDLwkABxoRTkZDVUBUXw==

    $crypt = $this->input->get('crypt');
    var_dump($crypt); // returns FALSE 
```

我打开了以下配置设置：

```
$config['uri_protocol'] = "QUERY_STRING";
$config['enable_query_strings'] = TRUE;
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-?'; // to allow the '?' character in the url 
```

谁能建议我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:45:15.367

激活查询字符串时，应使用此语法

```
index.php?c=controller&m=method 
```

欲了解更多信息，请阅读：

[http://codeigniter.com/user_guide/general/urls.html](http://codeigniter.com/user_guide/general/urls.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:47:39.143

Codeigniter 不使用 $_GET 或 $_POST 变量。

`$this->input->get()`和`$this->input->post()`

是您访问它们的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:47:57.177

试试这个：

```
$config['uri_protocol'] = "PATH_INFO";
$var = $this->input->xss_clean($_REQUEST['var']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T12:03:45.157

最后用了这个方法.. MY_Controller.php

```
function current_url() {
$CI =& get_instance();

$url = $CI->config->site_url($CI->uri->uri_string());
return $_SERVER['QUERY_STRING'] ? $url.'?'.$_SERVER['QUERY_STRING'] : $url; 
```

}

// 在我的控制器中 $parts = parse_url(current_url());

```
 if (isset($parts['query']) && is_array($parts))
    {
        parse_str($parts['query'], $querystring);
        krumo($querystring);
    } 
```

现在这似乎很好:) 谢谢 - 已将 uri 设置更改为 PATH_INFO 并对 htaccess 文件进行了一些调整。

# iphone - cocos2d-x如何将plist读入数组

> ID：10634050
> 
> 赞同：6
> 
> 时间：2012-05-17T10:32:12.610
> 
> 标签：iphone, ios, cocos2d-iphone, plist, cocos2d-x

我想使用 cocos2d-x (c++) 读取 plist 这是我的 plist：

```
<array>
    <dict>
        <key>x</key>
        <integer>0</integer>
        <key>y</key>
        <integer>0</integer>
    </dict>
    <dict>
        <key>x</key>
        <integer>140</integer>
        <key>y</key>
        <integer>12</integer>
    </dict>
    <dict>
        <key>x</key>
        <integer>120</integer>
        <key>y</key>
        <integer>280</integer>
    </dict>
    <dict>
        <key>x</key>
        <integer>40</integer>
        <key>y</key>
        <integer>364</integer>
    </dict>
<array> 
```

它基本上是一个由 (x, y) 坐标组成的字典数组。我的原始阅读代码是：

```
NSString *path = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"w%i", world] ofType:@"plist"];
NSMutableArray* points = [NSMutableArray arrayWithContentsOfFile:path]; 
```

但现在我需要将它翻译成 c++ 中的 cocos2d-x。我用谷歌搜索了一些文章，但它们都是关于将 plist 读入字典的。我需要一个数组。

编辑：：：

现在我改变了我的 plist 格式：

```
<dict>
    <key>11x</key>
    <integer>0</integer>
    <key>11y</key>
    <integer>0</integer>
    <key>12x</key>
    <integer>140</integer>
    <key>12y</key>
    <integer>12</integer>
<dict> 
```

我该怎么办？？？我仍然得到同样的错误：

```
CCDictionary<std::string, CCObject*>* dict = CCFileUtils::dictionaryWithContentsOfFile(plistPath);
int x = (int)dict->objectForKey("11x");
int y = (int)dict->objectForKey("11y"); 
```

不会工作。请先试用一下。看看你是否可以从示例 plist 中读取一个 int

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T10:49:11.343

尝试以下代码行

```
//const char *pszPath = CCFileUtils::fullPathFromRelativePath(plistName);
//consider that file is in resource bundle..
// CCDictionary<std::string, CCObject*> *plistDictionary=CCFileUtils::dictionaryWithContentsOfFile("testplist.plist");
// CCArray *testitems = (CCArray*)plistDictionary->objectForKey("root"); 
```

**编辑**

或者你也可以试试这个...

```
 CCDictionary<std::string, CCObject*> *plistDictionary = CCFileUtils::dictionaryWithContentsOfFile("testplist.plist");
 CCMutableArray<CCObject*> *testitems = (CCMutableArray<CCObject*>*)plistDictionary->objectForKey("root");
 CCLog("COUNT: %d", testitems->count()); 
```

**编辑-2**

如果 root 是字典，请尝试以下代码

```
 var1 = atoi(valueForKey("blendFuncSource", dictionary));
    var2 = atoi(valueForKey("blendFuncDestination", dictionary)); 
```

看看里面`CCParticleSystem.cpp`的课，你可能会得到击球手的想法。检查`bool CCParticleSystem::initWithDictionary(CCDictionary<std::string, CCObject*> *dictionary)`课内`CCParticleSystem.cpp`_

问候， 尼基尔

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T10:56:59.893

请参阅此处是[从文件中读取字典的链接](http://www.cocos2d-x.org/embedded/cocos2d-x/d0/ddc/classcocos2d_1_1_c_c_file_utils.html)。
要读取数组，我找不到任何东西，所以你可以做的就是将你的 plist 更改为

```
<dict> <key>root</key>
  <array>
    <dict>
        <key>x</key>
        <integer>0</integer>
        <key>y</key>
        <integer>0</integer>
    </dict>
    <dict>
        <key>x</key>
        <integer>140</integer>
        <key>y</key>
        <integer>12</integer>
    </dict>
    <dict>
        <key>x</key>
        <integer>120</integer>
        <key>y</key>
        <integer>280</integer>
    </dict>
    <dict>
        <key>x</key>
        <integer>40</integer>
        <key>y</key>
        <integer>364</integer>
    </dict>
  <array>
</dict> 
```

然后

```
CCDictionary<std::string, CCObject*> *dict = CCFileUtils::dictionaryWithContentsOfFile("yourFile.plist");
CCArray *testitems = (CCArray*)dict->objectForKey("root"); 
```

感谢[OMGPOP](https://stackoverflow.com/users/767653/omgpop)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T10:37:28.460

当您阅读 dict 并使用`ObjectForKey("BLA")`时，您可以将其类型转换为`CCString*`这样的：

```
 CCString* tmpStr = (CCString*)(yourDict->ObjectForKey("KEY"));
    int x = tmpStr->toInt(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-13T01:19:00.110

你也可以使用

```
Array* items = Array::createWithContentsOfFile("name.plist"); 
```

# php - 带有 IN() 条件的 WordPress 准备好的语句

> ID：10634058
> 
> 赞同：18
> 
> 时间：2012-05-17T10:33:02.580
> 
> 标签：php, mysql, wordpress, prepared-statement, in-clause

我在这样的字符串中有三个值：

```
$villes = '"paris","fes","rabat"'; 
```

当我将它输入到这样的准备好的语句中时：

```
$sql    = 'SELECT distinct telecopie FROM `comptage_fax` WHERE `ville` IN(%s)';
$query  = $wpdb->prepare($sql, $villes); 
```

`echo $query;`显示：

```
SELECT distinct telecopie FROM `comptage_fax` WHERE `ville` IN('\"CHAPELLE VIVIERS \",\"LE MANS \",\"QUEND\"') 
```

它不是将字符串写为三个单独的值——它只是一个带有双引号的字符串。

如何在 WordPress 中正确实现具有多个值的准备好的语句？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-17T10:45:05.630

试试这个代码：

```
// Create an array of the values to use in the list
$villes = array("paris", "fes", "rabat");    

// Generate the SQL statement.
// The number of %s items is based on the length of the $villes array
$sql = "
  SELECT DISTINCT telecopie
  FROM `comptage_fax`
  WHERE `ville` IN(".implode(', ', array_fill(0, count($villes), '%s')).")
";

// Call $wpdb->prepare passing the values of the array as separate arguments
$query = call_user_func_array(array($wpdb, 'prepare'), array_merge(array($sql), $villes));

echo $query; 
```

*   [`implode()`](http://php.net/manual/en/function.implode.php)
*   [`array_fill()`](http://php.net/manual/en/function.array-fill.php)
*   [`call_user_func_array()`](http://php.net/manual/en/function.call-user-func-array.php)
*   [`array_merge()`](http://php.net/manual/en/function.array-merge.php)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-04-16T14:58:15.170

WordPress 已经为此提供了一个功能，请参阅[esc_sql()](https://codex.wordpress.org/Function_Reference/esc_sql)。下面是这个函数的定义：

> 转义数据以在 MySQL 查询中使用。通常你应该使用 wpdb::prepare() 来准备查询。有时，转义是必需的或有用的。**一个例子是准备一个用于 IN 子句的数组。**

你可以像这样使用它：

```
$villes = ["paris", "fes", "rabat"];
$villes = array_map(function($v) {
    return "'" . esc_sql($v) . "'";
}, $villes);
$villes = implode(',', $villes);
$query = "SELECT distinct telecopie FROM `comptage_fax` WHERE `ville` IN (" . $villes . ")" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-06-03T21:40:54.713

**功能：**

```
function escape_array($arr){
    global $wpdb;
    $escaped = array();
    foreach($arr as $k => $v){
        if(is_numeric($v))
            $escaped[] = $wpdb->prepare('%d', $v);
        else
            $escaped[] = $wpdb->prepare('%s', $v);
    }
    return implode(',', $escaped);
} 
```

**用法：**

```
$arr = array('foo', 'bar', 1, 2, 'foo"bar', "bar'foo");

$query = "SELECT values
FROM table
WHERE column NOT IN (" . escape_array($arr) . ")";

echo $query; 
```

**结果：**

```
SELECT values
FROM table
WHERE column NOT IN ('foo','bar',1,2,'foo\"bar','bar\'foo') 
```

可能会或可能不会更有效，但它是可重复使用的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-08-17T12:47:07.553

首先是一组现代的非 WordPress 技术，使用 mysqli 准备好的语句，数组中的值数量未知。第二个片段将是 WordPress 的等价物。

让我们假设输入数据的索引数组是不受信任的并且可以从`$_GET['villes']`. 准备好的语句是现代标准，专业开发人员更喜欢旧的/不受信任的转义技术。接下来的代码片段将返回具有`ville`数组中指定值之一的行。如果数组未声明或为空，它将返回数据库表中的所有行。

**原生 PHP 技术**：

```
$sql = "SELECT DISTINCT telecopie FROM comptage_fax";
if (!empty($_GET['villes'])) {
    $count = count($_GET['villes']);
    $commaDelimitedPlaceholders = implode(',', array_fill(0, $count, '?'));
    $stmt = $conn->prepare("$sql WHERE ville IN ($commaDelimitedPlaceholders)");
    $stmt->bind_param(str_repeat('s', $count), ...$_GET['villes']);
    $stmt->execute();
    $result = $stmt->get_result();
} else {
    $result = $conn->query($sql);
} 
```

从这一点开始，您可以访问不同`telecopie`值的行（从技术上讲，这是一个可迭代的结果集对象），就像使用简单的`foreach()`.

```
foreach ($result as $row) {
    echo $row['telecopie'];
} 
```

* * *

**使用 WordPress 的辅助方法**，语法更简单，因为变量绑定和查询执行由以下人员处理`get_results()`：

```
$sql = "SELECT DISTINCT telecopie FROM comptage_fax";
if (!empty($_GET['ville']) {
    $commaDelimitedPlaceholders = implode(',', array_fill(0, count($_GET['ville']), '%s'));
    $sql = $wpdb->prepare("$sql WHERE ville IN ($commaDelimitedPlaceholders)", $_GET['ville']);
}
$result = $wpdb->get_results($sql, ARRAY_A); 
```

从这一点来看，`$result`是关联数组的索引数组——特别是因为`ARRAY_A`. `$result`不是第一个原生 php 片段中的结果集对象。这意味着您可以`array_`在数据上使用经典的循环语言构造函数或完整的函数。

有用的参考资料：

*   [https://developer.wordpress.org/reference/classes/wpdb/prepare/](https://developer.wordpress.org/reference/classes/wpdb/prepare/)
*   [https://developer.wordpress.org/reference/classes/wpdb/get_results/](https://developer.wordpress.org/reference/classes/wpdb/get_results/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-01-24T18:21:32.943

这是我`IN (...)`清理`$wpdb`.

1.  我使用一个辅助函数来传递列表的每个值，`$wpdb->prepare()`以确保它被正确转义。
2.  准备好的值列表通过 插入到 SQL 查询中`sprintf()`。

**辅助函数：**

```
// Helper function that returns a fully sanitized value list.
function _prepare_in ( $values ) {
    return implode( ',', array_map( function ( $value ) {
        global $wpdb;

        // Use the official prepare() function to sanitize the value.
        return $wpdb->prepare( '%s', $value );
    }, $values ) );
}; 
```

示例用法：

```
// Sample 1 - note that we use "sprintf()" to build the SQL query!
$status_cond = sprintf(
    'post_status IN (%s)',
    _prepare_in( $status )
);
$posts = $wpdb->get_col( "SELECT ID FROM $wpdb->posts WHERE $status_cond;" );

// Sample 2:
$posts = $wpdb->get_col( sprintf( "
    SELECT ID
    FROM $wpdb->posts
    WHERE post_status IN (%s) AND post_type IN (%s)
    ;",
    _prepare_in( $status ),
    _prepare_in( $post_types )
) ); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-05-17T10:46:12.133

该[`prepare`](http://codex.wordpress.org/Class_Reference/wpdb#Protect_Queries_Against_SQL_Injection_Attacks)函数还接受一个`array`作为第二个参数。

您可以尝试`$villes`像这样转换：

**当前的**

```
<?php
$villes = '"paris","fes","rabat"';
? 
```

**将其更改为**

```
<?php
$villes = array("paris","fes","rabat");
?> 
```

现在，尝试传递`$villes`给 prepare 函数，看看它是否有效。希望能帮助到你。

# xml - xslt 使用带有根元素的命名空间属性添加“ns0”，如何避免这种情况？

> ID：10634061
> 
> 赞同：2
> 
> 时间：2012-05-17T10:33:09.237
> 
> 标签：xml, xslt

我正在使用 xsl:element 的命名空间属性在结果 XML 中放置一个命名空间。它将命名空间放在那里，但像这样：

```
xmlns:ns0="http://...." 
```

并将 <root> 作为 <ns0:root>。我想放置没有“ns0”的命名空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:27:46.797

> ```
> <xsl:element name="myroot" namespace="xmlns.mynamespace.com/import">;
>   <xsl:attribute name="version">
>     <xsl:text>2.0</xsl:text>
>   </xsl:attribute>
>   <xsl:apply-templates />
> </xsl:element> 
> ```

**只需将其重写为**：

```
<myroot xmlns="xmlns.mynamespace.com/import" version="2.0">
  <xsl:apply-templates />
</myroot> 
```

# sql - 需要 SQL 查询帮助才能从父子表中获取数据

> ID：10634062
> 
> 赞同：1
> 
> 时间：2012-05-17T10:33:10.083
> 
> 标签：sql, oracle

我的 oracle 数据库中有一个表，如下所示：

```
FolderID    Name    ParentFolderID
1200        A       1000
1201        B       1000
1202        C       1000
1203        D       1000
1204        E       1200
1205        F       1200
1206        G       1201
1207        H       1205
1208        I       1205
1209        J       1205 
```

在此表中，文件夹 id 1000 有孩子 1200、1201、1202、1203。文件夹 id 1200 有孩子 1204、1205。1201 有孩子 1206。而 1205 有孩子 1207、1208 和 1209。我要找的是得到我传递给查询的文件夹 ID 的所有子文件夹 ID。如果我通过 1000，它应该返回所有子行和子子行。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:50:40.247

```
select folderid, name
from the_unknown_table
start with folderid = 1000
connect by prior folderid = parentfolderId; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:55:20.837

尝试[CONNECT BY](http://www.tufyta.com/oracle-connect-by-soyagaci-sorgulama)查询，例如；

```
SELECT 
folderid, 
name
FROM the_unknown_table
START WITH  folderid = :first_folder_id
CONNECT BY PRIOR folderid = parentfolderId; 
```

如果你想在一列中用逗号分隔所有内容`SYS_CONNECT_BY_PATH`

```
SELECT 
folderid, 
SYS_CONNECT_BY_PATH(folderid,',') my_path,
name
FROM the_unknown_table
START WITH  folderid = :first_folder_id
CONNECT BY PRIOR folderid = parentfolderId; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:09:11.210

标准 SQL 方式（相当于 connect by/prior）使用递归 CTE：

```
DROP SCHEMA opa CASCADE;
CREATE SCHEMA opa;

SET search_path='opa';

CREATE TABLE parents
    ( id    INTEGER NOT NULL PRIMARY KEY 
    , zname text
    , parent_id INTEGER REFERENCES parents (id)
    );  
INSERT INTO parents(id,zname,parent_id) VALUES
(1000        , '@',       NULL)
,(1200        , 'A',       1000)
,(1201        , 'B',       1000)
,(1202        , 'C',       1000)
,(1203        , 'D',       1000)
,(1204        , 'E',       1200)
,(1205        , 'F',       1200)
,(1206        , 'G',       1201)
,(1207        , 'H',       1205)
,(1208        , 'I',       1205)
,(1209        , 'J',       1205)
    ;   

WITH RECURSIVE zopa AS (
    SELECT p0.id AS opa_id, p0.id AS id
      , p0.zname AS zname, p0.parent_id  AS parent_id
    FROM  parents p0
    WHERE NOT EXISTS (
        SELECT * FROM parents nx WHERE nx.id = p0.parent_id)
    UNION
    SELECT 
        zp.opa_id AS opa_id
        , p1.id AS id
        , p1.zname AS zname
        , p1.parent_id AS parent_id
    FROM parents p1
    JOIN zopa zp ON zp.id = p1.parent_id
    )   
select *
FROM zopa ct
WHERE ct.opa_id = 1000
    ; 
```

结果：

```
NOTICE:  drop cascades to table opa.parents
DROP SCHEMA
CREATE SCHEMA
SET
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "parents_pkey" for table "parents"
CREATE TABLE
INSERT 0 11
 opa_id |  id  | zname | parent_id 
--------+------+-------+-----------
   1000 | 1000 | @     |          
   1000 | 1202 | C     |      1000
   1000 | 1200 | A     |      1000
   1000 | 1201 | B     |      1000
   1000 | 1203 | D     |      1000
   1000 | 1205 | F     |      1200
   1000 | 1204 | E     |      1200
   1000 | 1206 | G     |      1201
   1000 | 1209 | J     |      1205
   1000 | 1207 | H     |      1205
   1000 | 1208 | I     |      1205
(11 rows) 
```

# java - 使用带有填充的 DES 使用提供的密钥进行加密

> ID：10634065
> 
> 赞同：1
> 
> 时间：2012-05-17T10:33:17.773
> 
> 标签：java, encryption, padding, des

我想使用给定密钥使用 DES 加密帧。

我使用的填充样式是 PKCS5Padding。如果要添加 2 个字节，则使用 02 02 填充字符串，如果要添加 3 个字节以形成 8 的倍数，则使用 03 03 03 填充字符串。但我的要求是用我的特定字节填充字符串。例如，如果要添加 2 个字节，则添加 30 30 和 3 个字节，然后添加 30 30 30（十六进制 0 的值为 30）。另外，我必须知道添加了多少填充字节。我应该遵循哪种填充技术以及如何使用它？

以下是我的加密代码：

```
byte[] keyValue = new byte[]{(byte) 0x30, (byte) 0x30, (byte) 0x30, (byte) 0x30, (byte) 0x30, (byte) 0x16,(byte) 0x05, (byte) 0x12};
myKeySpec = new DESKeySpec(keyValue);
mySecretKeyFactory = SecretKeyFactory.getInstance("DES");
key = mySecretKeyFactory.generateSecret(myKeySpec);

Cipher cipher = Cipher.getInstance("DES/CBC/PKCS5Padding");
IvParameterSpec iv2 = new IvParameterSpec(new byte[8]);
cipher.init(Cipher.ENCRYPT_MODE, key, iv2);
byte[] plainText = function.HexStringToByteArray(payloadRecv);
byte[] encryptedText = cipher.doFinal(plainText); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:54:29.683

不要`PKCS5Padding`在密码规范中选择。选择`NoPadding`。在加密之前，您必须自己将填充添加到数据中。解密后（同样不使用填充），您必须检查最后一个字节以了解要删除和删除的填充字节数。

基本上，只需按照您的描述编写代码即可。

# jsf - 有什么方法可以删除 jsf 中特定组件的子组件？

> ID：10634067
> 
> 赞同：0
> 
> 时间：2012-05-17T10:33:20.160
> 
> 标签：jsf, icefaces

我正在使用 jsf 1.2 和 icefaces 1.8

我有一个弹出窗口，我正在构建一个向导。

使用 ac:forEach 我在第 2 步中为用户显示一些输入。问题是当返回第 1 步时，选择另一个选项并在第 2 步中显示另一组输入，一些**输入组件的初始 id**被保留...

有什么办法可以删除主 div 的孩子吗？

我的结构是这样的：

```
 <ice:panelGroup binding="#{addServiceResourcesBean.wrapperDiv}">

      <c:forEach
                    var="index"
                    begin="0"
                    end="#{addServiceResourcesBean.attribsListSize}"
                    step="1"
                    varStatus="status">

          //inputs rendered
     </c:forEach>
    </ice:panelGroup> 
```

我只是希望从 wrapperDiv 中删除所有子级将强制 jsf 循环使用其他 ID 从头开始​​重新创建它们...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:33:08.817

这对我有用，只需打电话`getChildren`，然后`clear`：

```
<h:form id="form1">
  <h:panelGroup id="panel1">
      .... forEach ...

  </h:panelGroup>
</h:form> 
```

```
String clientId = "form1:panel1";
UIComponent comp = FacesContext.getCurrentInstance().getViewRoot().findComponent(clientId);
// here there is the call
comp.getChildren().clear(); 
```

# android - JSOUP：-1 错误加载 URL

> ID：10634072
> 
> 赞同：3
> 
> 时间：2012-05-17T10:33:37.237
> 
> 标签：android, parsing, jsoup

我想解析网站上的一段。*我想解析post* div中的第一段：

![在此处输入图像描述](../Images/a431c79d4f127eb3abf43ad7933f0d4e.png)

**我正在使用 AsyncTask 来检索数据。这是 doInBackground 函数：**

```
@Override
protected Elements doInBackground(String... url) {
    Document doc = null;
    try {
        doc = Jsoup.connect(url[0]).timeout(10*1000).get();
        return doc.select("div.post > p");
    } catch (Exception e) {
        e.printStackTrace();
    }
    return new Elements();
} 
```

**但是我总是在 Logcat 中得到这个：**

> java.io.IOException：-1 错误加载 URL [http://www.vaccinestoday.eu/diseases/disease/rabies/](http://www.vaccinestoday.eu/diseases/disease/rabies/)
> 
> 在 org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:414) 在 org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:391) 在 org.jsoup.helper.HttpConnection.execute(HttpConnection .java:157) 05-17 at org.jsoup.helper.HttpConnection.get(HttpConnection.java:146) 05-17 at com.c0dehunter.aZDR.diseaseActivity$getDataTask.doInBackground(diseaseActivity.java:46) at com. c0dehunter.aZDR.diseaseActivity$getDataTask.doInBackground(diseaseActivity.java:1) at android.os.AsyncTask$2.call(AsyncTask.java:185) 05-17 10:22:32.937: at java.util.concurrent.FutureTask$ Sync.innerRun(FutureTask.java:305) at java.util.concurrent.FutureTask.run(FutureTask.java:137) 05-17 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068) at java。 util.concurrent.ThreadPoolExecutor$Worker。在 java.lang.Thread.run(Thread.java:1096) 处运行（ThreadPoolExecutor.java:561）

如果你点击链接，你会看到你可以正常打开它。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:16:48.250

我运行了你的连接，它运行得很好。我不能对你的查询说同样的话。它并没有给你带来你想要的东西。所以我增强了它：

```
doc.select("div[class=post-entry] > p");
doc.select("div.post-entry > p"); 
```

其中任何一个基本上都会得到所有的帖子。从现在开始，你可以继续单飞，不是吗？还有什么需要的，直接问吧。

# url-rewriting - Magento SEO 友好的 URL 模块仅重写类别，产品显示旧 URL

> ID：10634073
> 
> 赞同：1
> 
> 时间：2012-05-17T10:33:40.230
> 
> 标签：url-rewriting, magento-1.6

我在 Magento 1.6 上启用了 SEO 友好的 URL，它非常适合类别。但是产品 URL 显示的是旧的 URL 格式。

我当前的产品 URL 如下所示：

> [http://example.com/catalog/product/view/id/123/s/uppa-baby-vista-stroller/category/133/](http://example.com/catalog/product/view/id/123/s/uppa-baby-vista-stroller/category/133/)

我应该是这样的：

> [http://example.com/uppa-baby-vista-stroller.html](http://example.com/uppa-baby-vista-stroller.html)

我已经重新索引了目录并清除了缓存，但它并没有用 SEO 更友好的 URL 版本重写产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T14:53:42.107

问题是没有发生 URL 重写，

**您正在运行企业版 1.13 吗？**

如果是，那么您的问题很可能是 Magento 的重新索引没有自动发生。在 1.13 中，使用 cron 作业进行重新索引。您必须将 cron 设置为在本地服务器上运行，以便它自动运行。要检查它是否已设置，请转到 System->Index Management 并查看上次发生产品 url 重新索引的时间。重新索引设置 URL 重写，您可以检查数据库以确认从未发生重新索引（特别是在企业版中，查看表 enterprise_url_rewrite、enterprise_url_rewrite_redirect 和 enterprise_url_rewrite_redirect_rewrite。查看这些表是否针对您的每个产品进行了重写） . 如果您的产品在这些表中似乎没有进行 url 重写，那么就不会发生重新索引。我的猜测是，如果您运行的是 EE 1.13，这就是您的问题。按照此链接设置 cron。

[如何为重新索引设置 cron 作业](https://stackoverflow.com/questions/15355005/how-to-set-cron-job-for-reindex)

**如果您在 EE 1.13 或任何版本的 Community edition 之前运行 Magento**，请确保启用了 SEO 友好 URL 并且您已重新编制索引。如果这仍然不起作用，请确保 Magento Core 代码没有被修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:14:15.170

我假设您是磁电机的默认代码。启用 SEO 友好 URL 后，不要忘记从 Magento 管理员重新索引。

# java - Maven clean install 等于 mvn clean 和 mvn install 之后？

> ID：10634079
> 
> 赞同：6
> 
> 时间：2012-05-17T10:34:18.967
> 
> 标签：java, performance, maven, installation

我有多模块 Maven 项目。发现：

mvn clean - 需要 3 分钟后

mvn install - 需要 18 分钟。

所以我想 mvn clean install 应该需要 21 分钟，但需要将近 30 分钟！也一样：

```
mvn clean install 
```

和

```
mvn clean
mvn install 
```

? 谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:44:00.560

AFAIK，是的，虽然我对启动/解决/等有点惊讶。需要*那么*多时间。

诸如操作系统缓存、JVM 启动/优化/等等之类的东西都会在差异中发挥作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:46:58.910

举个例子

```
framework
    framework-utils
 foundation
    foundation-model
    foundation-api
    foundation-core

 The call order of my modules:
 1\. mvn clean / mvn install:   [clean] framework-utils [clean] 
 foundation-model [clean] foundation-api [clean] foundation-core 
 [install] framework-utils [install] foundation-model [install] 
 foundation-api [install] foundation-core
 2\. mvn clean install: [clean] framework-utils [install] 
 framework-utils [clean] foundation-model [install] foundation-model 
 [clean] foundation-api [install] foundation-api [clean] 
 foundation-core [install] foundation-core 
```

# iphone - 在 iOS 中等待多个事件？

> ID：10634083
> 
> 赞同：2
> 
> 时间：2012-05-17T10:34:27.570
> 
> 标签：iphone, ios, synchronization, grand-central-dispatch

什么相当于 iOS 中 Win32 的 WaitForMultipleObjects 函数？

这大致是我想要的：

```
NSCondition *condition1;
NSCondition *condition2;
NSCondition *condition3;

wait_for_conditions([NSArray arrayWithObjects: condition1, condition2, condition3, nil], 
^{
    // Some code which must be executed when all conditions were fired
});

// in some other places of program:
[condition1 signal];

// ...
[condition2 signal];

// ...
[condition3 signal]; 
```

在 iOS 中实现这一点的方法是什么？

编辑：我并不一定要使用 NSCondition，任何其他同步的东西都可以（我刚刚用谷歌搜索并找到了 NSCondition）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:46:11.797

您可以为每个具有唯一通知名称的条件创建一个 NSNotifications。然后对于每个通知都会调用相同的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:23:13.057

那这个呢？

```
void async(void (^block)())
{
    [NSThread detachNewThreadSelector:@selector(invoke) toTarget:[block copy] withObject:nil];
}

__attribute__((sentinel(NULL)))
void wait_for_conditions(void (^block)(), NSCondition *condition, ...)
{
    va_list args;
    va_start(args, condition);

    NSMutableArray *conditions = [NSMutableArray array];

    do {
        [conditions addObject:condition];
    } while ((condition = va_arg(args, NSCondition *)));

    va_end(args);

    NSCondition *overallCondition = [NSCondition new];

    for (int i = 0; i < conditions.count; i++) {
        NSCondition *cond = [conditions objectAtIndex:i];

        async(^{
            [cond lock];
            [cond wait];
            [cond unlock];

            [overallCondition lock];
            [overallCondition signal];
            [overallCondition unlock];
        });
    }

    for (int i = 0; i < conditions.count; i++) {
        [overallCondition lock];
        [overallCondition wait];
        [overallCondition unlock];
    }

    if (block)
        block();
} 
```

显然，这具有有效地使线程加倍的缺点，但我不知道是否有更简单的方法来实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:25:14.843

好的，我最终使用了我自己的解决方案，使用 GCD 的块通知组。我还使用了串行队列（而不是并发），它保证我们只创建 1 个额外的线程。

```
@interface WaitCondition : NSObject
    - (void) fire;
@end

@implementation WaitCondition {
    BOOL fired;
    NSCondition *condition;
}

- (id) init
{
    if ((self = [super init])) {
        condition = [NSCondition new];
    }
    return self;
}

- (void) fire
{
    [condition lock];
    [condition signal];
    fired = YES;
    [condition unlock];
}

- (void) wait
{
    [condition lock];
    while (!fired) {
        [condition wait];
    }
    [condition unlock];
}

@end

void Dispatch_NotifyForConditions(NSArray *conditions, dispatch_block_t completion)
{
    dispatch_queue_t queue = dispatch_queue_create("notify_queue", NULL);
    dispatch_group_t group = dispatch_group_create();

    for (WaitCondition *condition in conditions)
    {
        NSCAssert([condition isKindOfClass:[WaitCondition class]], @"Dispatch_NotifyForConditions: conditions must contain WaitCondition objects only.");
        dispatch_group_async(group, queue, ^{
            [condition wait];
        });
    }

    dispatch_group_notify(group, queue, completion);

    dispatch_release(queue);
    dispatch_release(group);
} 
```

# c# - RunWorkerAsync 在完成时关闭 BackgroundWorker

> ID：10634084
> 
> 赞同：2
> 
> 时间：2012-05-17T10:34:34.323
> 
> 标签：c#, .net, multithreading, asynchronous, backgroundworker

我有一个后台工作人员，需要根据选中的复选框数量多次调用 - 我已经编写了这个来获取复选框值并将它们放入`List`.

```
List repSelected = new List();
```

这被填充，然后像这样迭代：

```
foreach (string rep in repSelected)
{
    backgroundWorker1.RunWorkerAsync(rep);
    backgroundWorker1.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundWorker1_RunWorkerCompleted);
}
```

异步的 DoWork 代码如下所示：

```
BackgroundWorker worker = sender as BackgroundWorker;
string rep = e.Argument.ToString();

if (worker.CancellationPending == true)
{
    e.Cancel = true;
}
else
{
    DirectoryExists(rep);
    ProcessRunner(rep); //Rars some large files - expensive
}
```

然后该进程运行 WorkerComplete，问题是当该进程返回执行 Worker 的下一次迭代时，它会崩溃，说该 Worker 很忙——即使该 Worker 已返回其 WorkerCompleted 状态。

如何确保在循环的下一次迭代之前关闭线程？

注意：我对包含后台工作人员有一个条件，`!backgroundWorker1.IsBusy()`但这（显然）只是跳过了剩余的迭代而没有执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:42:07.613

如果您想按顺序处理每个项目，则没有理由为每个任务使用单独的后台工作程序。所以最好将 foreach 循环移到 DoWork 方法中。但是如果要并行处理所有项目，则需要为每个项目创建一个后台工作人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:43:02.730

来自 MSDN：

> 如果后台操作已经在运行，再次调用 RunWorkerAsync 将引发 InvalidOperationException。

因此，您不能使用 a`BackgroundWorker`来维护任务**队列**（并且您按顺序推送所有任务而无需等待前一个任务完成）。您对此有不同的解决方案，例如，如果您想继续使用，`BackgroundWorker`您可以这样做：

```
backgroundWorker1.RunWorkerAsync(repSelected); 
```

然后改变你的`DoWork`方法如下：

```
BackgroundWorker worker = sender as BackgroundWorker;

foreach (string rep in (IEnumerable<string>)e.Argument)
{
    if (worker.CancellationPending == true)
    {
        e.Cancel = true;
        return;
    }
    else
    {
        DirectoryExists(rep);
        ProcessRunner(rep); //Rars some large files - expensive
    }
} 
```

作为替代方案，您可以考虑更改执行此任务的方式，例如使用`System.Threading.Tasks.Task`或`ThreadPool`（直接或间接，大多数并行操作将排队到池中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T10:44:28.097

您的 foreach 代码将立即触发所有元素的工作。这就是你得到异常的原因。

如果要按顺序启动 Worker，只能在启动时调用 RunWorkerAsync 一次，然后为每个 WorkerComplete-event 调用。但是为什么不在工作代码中进行处理 foreach 呢？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T10:46:40.423

BackgroundWorker 真的很忙，因为当第一次调用 时`backgroundWorker1.RunWorkerAsync(rep);`，它不等待任何东西，然后立即调用第二个、第三个、... 调用。

您应该在每次调用时创建 BackgroundWorker，然后就可以了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T11:10:18.947

你可以使用parallel.foreach 和多个backgroundworkers；

```
Parallel.ForEach(YourListofStrings,
                 (q) =>
                 {
                     BackgroundWorker worker = new BackgroundWorker();
                     worker.DoWork += new DoWorkEventHandler(worker_DoWork);
                     worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(worker_RunWorkerCompleted);
                     worker.RunWorkerAsync(q);
                 }); 
```

# c# - 带有javascript确认功能的必填字段验证器未验证

> ID：10634088
> 
> 赞同：1
> 
> 时间：2012-05-17T10:34:43.253
> 
> 标签：c#, javascript, asp.net, validation

我正在使用必填字段验证器，它验证文本框并单击提交按钮我必须要求确认，并且我使用 java 脚本的确认（）函数。问题是当我在确认框页面回发中按确定时，当我将文本框留空时，必填字段验证器不会停止页面。从 stackoverflow 阅读帖子后，我使用自定义验证器来停止页面，但我不能这里是代码。

```
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" ControlToValidate="TextBox1" ValidationGroup="one" runat="server" ErrorMessage="RequiredFieldValidator"></asp:RequiredFieldValidator>
    <asp:TextBox ID="TextBox1" runat="server" ValidationGroup="one"></asp:TextBox>
    <asp:Button ID="Button1" runat="server" Text="Button" 
        OnClientClick="validate();"  ValidationGroup="one" onclick="Button1_Click"/>
    <asp:CustomValidator ID="CustomValidator1" ValidateEmptyText="true" runat="server" ValidationGroup="one" ErrorMessage="CustomValidator"></asp:CustomValidator>

    <script type='text/javascript'>   
           function validate() {
            var cv = document.getElementById('MainContent_CustomValidator1');
            if (cv) {
                cv.isValid = confirm('are you sure want to update record ?');
            }
     }  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:44:18.067

```
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" ControlToValidate="TextBox1" ValidationGroup="one" runat="server" ErrorMessage="RequiredFieldValidator"></asp:RequiredFieldValidator>
    <asp:TextBox ID="TextBox1" runat="server" ValidationGroup="one"></asp:TextBox>
    <asp:Button ID="Button1" runat="server" Text="Button" 
        OnClientClick="return validate();"  ValidationGroup="one" onclick="Button1_Click"/>
    <asp:CustomValidator ID="CustomValidator1" ValidateEmptyText="true" runat="server" ValidationGroup="one" ErrorMessage="CustomValidator" ClientValidationFunction="TextBox1Client"></asp:CustomValidator> 
```

* * *

```
 <script type='text/javascript'>   
        function validate() {
          if(confirm('are you sure want to update record ?')){
          return true;
          }
          else
          {
          return false;
          }
       }
//you need to add a custom validot client function also  
       function TextBox1Client(sender, args) {
       //write your custom code here
        args.IsValid = false;
        //OR
        args.IsValid =true;
       }
    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:08:06.797

试试这个代码使用 Page_ClientValidate

```
 <asp:Button ID="Button1" runat="server" Text="Button" 
        OnClientClick="Javascript:if(Page_ClientValidate('one')){return validate();}"  ValidationGroup="one" onclick="Button1_Click"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:41:08.830

像这样更正您的代码

```
if(confirm('are you sure want to update record ?')==false){
  return false;
} 
```

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-24T16:40:20.487

JavaScript 区分大小写，试试这个：

```
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" ControlToValidate="TextBox1" ValidationGroup="one" runat="server" ErrorMessage="RequiredFieldValidator"></asp:RequiredFieldValidator>
<asp:TextBox ID="TextBox1" runat="server" ValidationGroup="one"></asp:TextBox>
<asp:Button ID="Button1" runat="server" Text="Button" 
    OnClientClick="validate();"  ValidationGroup="one" onclick="Button1_Click"/>
<asp:CustomValidator ID="CustomValidator1" ValidateEmptyText="true" runat="server" ValidationGroup="one" ErrorMessage="CustomValidator"></asp:CustomValidator>

<script type='text/javascript'>   
       function validate() {
        var cv = document.getElementById('MainContent_CustomValidator1');
        if (cv) {
            cv.IsValid = confirm('Are you sure want to update record?');
        }
 }  </script> 
```

您没有将 IsValid 中的 i 大写。

# oracle - Oracle 导出导入

> ID：10634091
> 
> 赞同：1
> 
> 时间：2012-05-17T10:34:58.063
> 
> 标签：oracle, import, export

我在一家拥有两个 Oracle 数据库的公司工作，我们称它们为 LIVE 和 TEST。每晚执行一次导出，为每天的数据库拍摄快照，然后删除并使用现有的表创建脚本重新创建 TEST，导入最终将导出的数据从 LIVE 放入新的 TEST 环境。

我的问题是，

1.  这真的是最好的方法吗？
2.  有什么更好的方法？
3.  任何展示这些方式的 URL 都会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:48:56.833

1.  代替导入/导出使用[Datapump](http://www.orafaq.com/wiki/Datapump)

2.  检查[Oracle GoldenGate](http://www.oracle.com/technetwork/middleware/goldengate/overview/index-086263.html)

3.  检查[Oracle 流](http://www.oracle.com/technetwork/database/information-management/streams-fov-11g-134280.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:57:20.800

如果您使用的是企业版，那么您也可以查看可传输表空间，它的优点是可以准确地保留数据文件的物理状态，因此性能测试更加真实。

# objective-c - NSThread 不加载选择器方法

> ID：10634093
> 
> 赞同：0
> 
> 时间：2012-05-17T10:35:03.290
> 
> 标签：objective-c, cocoa, nsthread

在一个类的初始化方法中，我这样声明线程：

```
NSThread* myThread = [[[NSThread alloc] initWithTarget:self selector:@selector(m_run_thread) object:nil] autorelease];
[myThread start]; 
```

我还有一个设置为 NO 的布尔值。稍后在代码中，我将布尔值设置为 YES。

bool_run_progress_thread = 是；

m_run_thread方法的内容如下：

```
-(void) m_run_thread
{
    if (bool_run_progress_thread)
    {
         //do processing here
     }

bool_run_progress_thread = NO;
} 
```

问题是从未访问过 m_run_thread 方法。我究竟做错了什么？

PS我还尝试使用以下（和更旧的）方法设置线程：

```
[NSThread detachNewThreadSelector:@selector(m_run_thread) 
                         toTarget:self 
                       withObject:nil]; 
```

...但也无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:27:11.730

“......我只让它展示一次”是的，这正是它应该的样子。启动后，线程从开始到结束运行一次（暂时忽略这里的错误），到达结束时，线程基本上已经死了。

如果您希望线程重复执行，您必须自己为此做好准备：

```
- (void) m_run_thread
{
    for (;;) 
    {
        if (bool_run_progress_thread)
        {
            //do processing here
            bool_run_progress_thread = NO;
        }
    }
} 
```

但是这段代码仍然有很多问题：本质上，当运行时，代码形成了一个繁忙的等待循环。假设这`bool_run_progress_thread`仅在短时间内是正确的，那么后台线程应该大部分时间都在休眠。Insead，如果您按原样尝试代码，它将消耗 CPU 时间（以及大量时间）。

对此更好的方法将涉及[条件变量](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSCondition_class/Reference/Reference.html)：

```
@class Whatsoever 
{
    NSCondition* cvar;
    BOOL doProgress;
    ...
}
...
@end 
```

和

```
- (void) m_run_thread
{
    for (;;) 
    {
        [cvar lock];

        while (!doProgress) 
        {
            [cvar wait];
        }

        doProgress = NO;
        [cvar unlock];

        ... do work here ...
    }
} 
```

为了触发执行，你会这样做：

```
- (void) startProgress 
{
    [cvar lock];
    doProgress = YES;
    [cvar signal];
    [cvar unlock];    
} 
```

这样做还可以解决另一个微妙的问题：对全局标志（您的`bool_run_progress_thread`、我的`doProgess`）所做更改的可见性。根据处理器及其内存顺序，在没有特殊保护的情况下所做的更改可能会或可能不会（永远）对其他线程可见。这个问题也由`NSCondition`.

# jquery - 如何使用 JQuery 验证在 MVC 中的表中动态创建的字段

> ID：10634096
> 
> 赞同：0
> 
> 时间：2012-05-17T10:35:20.047
> 
> 标签：jquery, validation

我在 MVC 应用程序中有一个 HTMLtable，我在其中动态创建/删除行。单击页面中的保存按钮时，我只想使用模型中提到的 JQuery 进行所有验证。谁能帮我验证动态创建的字段？

```
var firstName;
    $('#tableId tr:visible').has("td").each(function (row) {
        $(this).find('input,select,checkbox')
            .each(function (col) {
                $ctl = $(this);
                if ($ctl.is('input:text')) {
                    firstName = $ctl.val();
                    $ctl.rules('add', { required: true, messages: { required: 'First Name field is required'} });
                }
            });
    });
    var val = $("#formDealFeeRates").validate();
    val.showErrors();
    alert(val.valid()); 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:54:46.333

您可以使用 的`.form()`方法`$.validate()`在某些点进行验证检查，而无需事先进行。

这可能不太清楚，但本质上，而不是这样做：

```
var val = $("#formDealFeeRates").validate();
val.showErrors();
alert(val.valid()); 
```

你可以这样做：

```
$('#tabeId').on('submit', function(e){
    e.preventDefault();
    if ($(this).validate().form())
    {
        //this is valid, run save code here
    }
    else
    {
        //this is not valid. but you don't need to
        //do anything, validate will show the usual error messages.
    }
}); 
```

这样做会考虑到在初始`$('form').validate()`调用后添加的任何字段，因为每次提交表单时都会重新执行检查。

希望这有帮助/有意义

文档：[http ://docs.jquery.com/Plugins/Validation/Validator/form](http://docs.jquery.com/Plugins/Validation/Validator/form)

# opengl-es - LookAt 目标位置是否与 z = 0 或 z = 1000 或 -1000 无关？

> ID：10634099
> 
> 赞同：1
> 
> 时间：2012-05-17T10:35:36.883
> 
> 标签：opengl-es, glulookat

我正在 OpenGL ES 中尝试 LookAt，

```
 gluLookAt(512, 384, 2000,
              512, 384, 0,
              0.0f, 1.0f, 0.0f); 
```

第二行是目标的位置......所以我想知道，如果我将`z`from更改`0`为`1000`or `-1000`，不应该看到什么不同吗？结果都是一样的，这是为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:18:06.983

从 gluLookAt 的 OpenGL 规范中，它将输入声明为：

```
gluLookAt(GLdouble eyeX , GLdouble eyeY , GLdouble eyeZ , 
          GLdouble centerX , GLdouble centerY , GLdouble centerZ , 
          GLdouble upX , GLdouble upY , GLdouble upZ ); 
```

您当前的值仅`center`沿`z`平面移动矢量，因此您实际上是从`eye`矢量向下看。根据您正在渲染的内容，您可能根本看不到任何变化（立方体从顶部或底部看起来都是一样的）。

尝试更改您的`x`and`y`值，以将相机移动到它不垂直于您要查看的矢量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:10:59.790

由于相机和目标的 x 和 y 坐标相同，因此更改 z 坐标根本不会影响视图所在的方向，为此，只有方向才是重要的。

# iphone - 如何在导航栏中移动条形按钮项

> ID：10634111
> 
> 赞同：1
> 
> 时间：2012-05-17T10:36:10.473
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller

我有一个自定义栏按钮项，我想将其向下微调 5 个像素。我将如何使用以下代码来做到这一点。我试图设置“y”点，但不断收到语法错误。

```
 [self.navigationController setNavigationBarHidden:NO animated:YES];

     UIImage *image = [UIImage imageNamed:@"arrow_back.png"];
     UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

     [self.navigationController.navigationBar addSubview:imageView];

    [imageView release];

     UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
     [button setImage:buttonImage forState:UIControlStateNormal];

     //set the frame of the button to the size of the image (see note below)
     button.frame = CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height);

    [button addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];

     //create a UIBarButtonItem with the button as a custom view
     UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:button];
     self.navigationItem.leftBarButtonItem = customBarItem;

    [customBarItem release];
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:00:27.407

UIBarButton 项目不从 UIView 继承，因此没有可以直接调整的“框架”属性，因此您需要使用不同的方法。

尝试：

```
 [self.navigationItem.leftBarButtonItem setBackgroundVerticalPositionAdjustment:5 forBarMetrics:UIBarMetricsDefault]; 
```

# ios - 电影播放完毕后，电影播放器 会出现白屏

> ID：10634114
> 
> 赞同：1
> 
> 时间：2012-05-17T10:36:24.843
> 
> 标签：ios, mpmovieplayercontroller

我有一个 MPMoviePlayer，其控件已被隐藏。我有自定义滑块来来回移动视频和控制速度的控件。

现在，每当它到达终点时，我都会看到一个白屏。应用程序不会崩溃，但我看不到视频。

我尝试调试并意识到 moviPlayer 实例仍然存在，但 naturalSize 报告为零。

剩下的一切都在那里，包括 contentURL 属性。

播放器发布视频了吗？

**更新：** 该错误仅出现在 iOS4 上，而不出现在 iOS5 上。任何人都知道我们可能错过的两个版本中的电影播放器​​发生了哪些变化。

# powershell - Powershell中的“$？”是什么？

> ID：10634115
> 
> 赞同：68
> 
> 时间：2012-05-17T10:36:25.917
> 
> 标签：powershell

`$?`Powershell中的含义是什么？

* * *

编辑：[TechNet](http://technet.microsoft.com/en-us/library/hh847768.aspx)以重言式回答，没有解释“成功”或“失败”的含义。

> 美元？
> 包含上次操作的执行状态。如果最后一个操作成功则包含 TRUE，如果失败则包含 FALSE。

我假设 $? 会简单地测试 $LastExitCode 是否为 0，但我发现了一个[反例](https://stackoverflow.com/questions/10666101/powershell-lastexitcode-0-but-false-redirecting-stderr-to-stdout-gives-nat)$? 为假，但 $LastExitCode 为真。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-17T10:40:01.760

`true`如果最后一个命令成功，则返回，否则返回`false`。

然而，有一些警告和不明显的行为（例如，“成功”的确切含义）。我强烈建议阅读[这篇文章](https://web.archive.org/web/20190425110754/https://devblogs.microsoft.com/scripting/powershell-error-handling-and-why-you-should-care/)以获得更全面的治疗。

例如，考虑调用 Get-ChildItem。

```
PS> Get-ChildItem 

PS> $? 
    True 
```

美元？将`True`在调用 Get-ChildItem 成功时返回。

但是，如果您在不存在的目录上调用 Get-ChildItem，则会返回错误。

```
PS> Get-ChildItem \Some\Directory\Which\Does\Not\Exist
    Get-ChildItem : Cannot find path 'C:\Some\Directory\Which\Does\Not\Exist' because it does not exist.

PS> $?
    False 
```

美元？将返回`False`这里，因为之前的命令不成功。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T22:48:46.730

`$?`将包含`$false`最后一个命令是否导致错误。`$true`如果没有，它将包含。在**PowerShell v1**时代，这是进行错误处理的常用方法。例如，在脚本中，如果您想检查文件是否存在，如果不存在则打印自定义消息，您可以执行以下操作：

```
Get-Item -Path john -ErrorAction silentlycontinue;
if( -not $?)
{
    'could not find file.';
     exit
 }` 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-24T00:08:35.690

您还可以使用`$LastExitCode`参数访问最后一个命令退出代码。

```
# run some command
# ...
if ((! $?) -and $ErrorAction -eq "Stop") { exit $LastExitCode } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-11T04:05:55.783

我在 Windows Server 2019 中遇到过，$? 生成标准错误时可以设置为 false。在我的示例中，docker-compose 通过标准错误记录警告，因此尽管以 0 退出，$? 表示失败。

# java - 在 UiApplication 中使用 invokeLater()

> ID：10634119
> 
> 赞同：0
> 
> 时间：2012-05-17T10:36:47.987
> 
> 标签：java, blackberry-jde, uiapplication, invokelater

我可以在黑莓的 UiApplication 中包含我的 try catch 块和 invokeLater 语句吗？

使用invokeLater 方法的确切目的是什么？它是如何被调用的？

这是代码

```
 UiApplication.getUiApplication().invokeLater(new Runnable() 
    {
        public void run() 
       {
             try{
                  //Statements
                 }
             catch()
             {
             }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:09:05.167

是的，您可以在 run-method 中包含自己的`try-catch`-blocks。[invokeLater](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/Application.html#invokeLater%28java.lang.Runnable%29)和[invokeAndWait](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/Application.html#invokeAndWait%28java.lang.Runnable%29)的目的是使从[事件线程](http://docs.blackberry.com/en/developers/deliverables/29251/Event_thread_1593335_11.jsp)外部影响 UI 的事情成为可能：*事件线程是拥有事件锁的线程，这意味着该线程负责执行所有用于绘制和处理的代码事件。只有事件线程可以处理传入事件并更新关联应用程序的 UI。*

当您调用其中一个 invokeLater 方法或 invokeAndWait 时，您的 Runnable 将排队等待在事件线程内运行。使用invokeLater，调用该方法的代码可以继续运行，Runnable 迟早会在事件线程中运行。使用 invokeAndWait，调用该方法的线程将等到 Runnable 在事件线程中运行后再继续。

# java - JSF：在两个视图之间传递数据

> ID：10634130
> 
> 赞同：1
> 
> 时间：2012-05-17T10:37:15.413
> 
> 标签：java, jsf

我是一名法国计算机科学专业的学生，​​我有一个小型 JSF 项目供学校使用。我有点菜鸟，我尝试在 2 个视图之间传递数据，但我失败了。

首先，我有一个视图，它在数据表中列出了我的所有客户。在这个数据表中，我有一个显示客户资料的链接。对于这两个视图，我都使用一个 CustomerController，它是一个 requestscoped managedbean。

在我使用全局 sessionscoped 控制器之前，但我认为这不是传递数据的好方法。

然后我找到了这篇文章：[JSF Best Practices](http://www.oio.de/public/java/jsf-best-practices-javaserver-faces-session-tips.htm)，它推荐使用在视图之间传递对象。我没能成功。

最后我从 Stackoverflow 也发现了这个问题：[f:setPropertyActionListener 设置空值而不是](https://stackoverflow.com/questions/8116382/fsetpropertyactionlistener-sets-null-value-instead-of-intended-value)使用 的预期值

我的问题是：传递数据的最佳方式是什么？以及如何管理它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T10:44:49.597

BalusC的[这篇文章对此](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)进行了解释。您需要将所选项目的 id 发送到第二个视图`h:link`，然后使用`<f:event>`.

# iphone - 脸书发布

> ID：10634133
> 
> 赞同：0
> 
> 时间：2012-05-17T10:37:27.617
> 
> 标签：iphone, objective-c, ios, facebook, facebook-graph-api

我正在尝试从我的应用程序在我的 facebook 墙上发布一条消息。第一次发布成功。但是，在第二次和连续两次中，我收到“操作无法完成。（FacebookErrDomain：10000）”。请帮助我。

PS：我没有使用ARC，最终没有静态变量。尝试实现 facebook 的 SSO 功能。

我在应用程序中调用了三个方法，

```
-(void)signintoFacebook{
    if (![self.facebook isSessionValid]) {
        NSArray *permissions=[NSArray arrayWithObjects:@"read_stream",@"publish_stream", nil];
        [self.facebook authorize:permissions];
        NSLog(@"first permission");
    }else{
        NSLog(@"second");
        if ([self.delegate respondsToSelector:@selector(signedIntoFacebook)]) {
            [self.delegate signedIntoFacebook];
        }
    }
}

-(void)postToFacebook{
    NSMutableDictionary *params = [NSMutableDictionary dictionary];
        [params setObject:@"Good Morning..!!" forKey:@"message"];
       [self.facebook requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self];

} 
```

第一篇文章效果很好。在第二次尝试中，我的错误消息被此方法捕获

```
-(void)request:(FBRequest *)request didFailWithError:(NSError *)error{
    NSLog(@"The request failed to load %@",[error localizedDescription]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:56:49.573

试试这个方法你会得到更多的信息

```
- (void)request:(FBRequest *)request didFailWithError:(NSError *)error {
    NSLog(@"%@", [error localizedDescription]);
    NSLog(@"Err details: %@", [error description]);
}; 
```

请检查`Err details:`

我认为您有错误代码 506，此错误是重复的状态消息

如果您再次发送相同的消息，则会生成错误，如果您想发送相同的消息，则使用一个技巧

您注销 facebook 并再次登录，发送消息然后不会生成错误。

# php - 改进好友列表查询：计算共同好友

> ID：10634138
> 
> 赞同：6
> 
> 时间：2012-05-17T10:38:00.050
> 
> 标签：php, mysql, database-design

我的数据库中有两张表，一张用于保存用户信息（users_table），另一张用于跟踪朋友

用户表：

```
id    username      avatar  
1         max       max.jpg  
2         jack      jack.jpg 
```

朋友表：

```
id    u1_id      u2_id  
1         1          2  
2         1          3 
```

在每个用户个人资料中，我都会显示他/她的朋友列表

这是我的查询

```
select u.id,
    u.username,
    u.avatar
from friends_table f
join users_table u on f.u1_id = u.id || f.u2_id = u.id
where u.id <> $profile_id
    and (f.u1_id = $profile_id || f.u2_id = $profile_id) 
```

此查询选择个人资料所有者的朋友 ($profile_id)

并将他们与用户表连接起来以获取每个朋友的用户名和头像

现在我想计算每个朋友和个人资料所有者之间的共同朋友是否可以在一个查询中进行，或者我应该为每个已建立的朋友做一些长且可能很慢的查询（这只是一个例子，它可能有一些语法错误 ）：

```
 foreach ( $friends_list_query_resul as $qr ){
       $friend_id = $qr['id'];

       $mutual_count = mysql_query
    ( "select count(*) from friends_table where 
    ($u1_id = $friend_id || $u2_id = $friend_id )
               && 

    ( $u1_id IN ( SELECT `u1_id`,`u2_id` from friends_table where
     ($u1_id = $profile_id || $u2_id = $profile_id ) )

||

      $u2_id IN ( SELECT `u1_id`,`u2_id` from friends_table where
     ($u1_id = $profile_id || $u2_id = $profile_id ) )

       ")
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:44:55.743

您的第一个查询也可以写成：

```
select distinct u.id,
        u.username,
        u.avatar
    from users_table u where u.id in 
        (select case when u1_id=$profile_id then u2_id else u1_id end 
        from friends_table f where case when u1_id=$profile_id 
        then u1_id else u2_id end =$profile_id); 
```

可以用类似的方式将共同好友查询写成单个查询：

```
select u.id, (select count(f.id) from friends f where 
    case when f.u1_id=u.id then u2_id else u1_id end in 
        (select distinct case when u1_id=$profile_id then u2_id else u1_id end 
        from friends where case when u1_id=$profile_id then u1_id else u2_id 
        end =$profile_id) 
    and u1_id=u.id or u2_id=u.id and 
    (u1_id <> $profile_id and u2_id <> $profile_id)) 
as mutual_frnds from user u where u.id <> $profile_id; 
```

但您可能希望在使用前对其中任何一个进行性能测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T22:05:24.377

您只需要一个查询：

```
select id, username, avatar, -- ...
(
  select count(*)
  from friends_table f1
  inner join friends_table f2 on f1.u2_id = f2.u1_id and f2.u2_id = f1.u1_id
  where f1.u1_id = users_table.id
)
as mutual_friend_count
from users_table 
```

子查询的含义是：

给我用户参与的“朋友的朋友”关系的计数，使得第一个朋友关系的目标是第二个朋友关系的来源，第二个朋友关系的目标是第一个朋友关系的来源一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:49:28.070

首先，我不明白为什么要这么复杂的查询来检索用户的朋友......应该简单地通过这个查询来实现：

```
select u.id,
    u.username,
    u.avatar
from friends_table f
left join users_table u on f.u2_id = u.id
where f.u1_id = $profile_id 
```

说明：登录用户是 id 相同的用户`f.u1_id`。因此我们只选择 id 在 中的朋友`f.u2_id`。

然后，要计算我朋友的共同朋友，我们可以使用如下查询：

```
select count(*) as mutual_count, f.u1_id as mutual_friend_id
from friends_table f
where f.u1_id IN (select f.u2_id from friends_table where f.u1_id = {$profile_id}) 
```

其中 $profile_id 是登录用户的 ID...

它是否正确？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T14:48:55.420

我决定为表中的每个朋友关系添加两行。

```
id    u1_id      u2_id  
1         10         20  
2         20         10 
```

它使这个过程更容易和更快。

# zend-validate - Zend_Validate_Float 无法验证零

> ID：10634145
> 
> 赞同：1
> 
> 时间：2012-05-17T10:38:25.100
> 
> 标签：zend-validate

这是一段代码，它不会将零作为输入值。但它确实可以很好地验证浮点和整数值。我尝试过设置语言环境，但这似乎也不起作用。

```
$commNotEmpty = new Zend_Validate_Float();
$commNotEmpty->setMessage('Please enter a numeric value');

$this->comm = new Zend_Form_Element_Text('comm');
$this->comm->class ='full_width';
$this->comm->addValidators(array($commNotEmpty)); 
```

# icons - 谷歌地图 API V3 圆圈图标

> ID：10634146
> 
> 赞同：1
> 
> 时间：2012-05-17T10:38:25.380
> 
> 标签：icons, maps, geometry

我在谷歌地图上有可编辑的圆圈覆盖，我需要将用于操作圆圈的默认白色方形图标更改为不同的图像。这甚至可能吗？如果可以，怎么做？谢谢帮助。

# iphone - iphone故事板标签栏控制器变胖

> ID：10634147
> 
> 赞同：2
> 
> 时间：2012-05-17T10:38:26.143
> 
> 标签：iphone

我有一个问题，我的 iphone 项目，我的故事板`Tab Bar Controller`，变得不同，就像图片一样。

当我删除标签栏控制器连接并重新连接变得正常时，我保存了项目，但是当我打开它时，标签栏控制器变得不同，我该如何解决这个问题，谢谢！

![在此处输入图像描述](../Images/15d69857ada69c98db1df7bacfdbe434.png)

状态栏消失的时候，`Tab Bar Controller`变胖了。

# asp.net-mvc-3 - 具有 Role 和 AllowAnonymous 覆盖的管理员角色全局过滤器？

> ID：10634155
> 
> 赞同：0
> 
> 时间：2012-05-17T10:38:59.207
> 
> 标签：asp.net-mvc-3, authorize-attribute

我根据[Rick Anderson 的文章](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)设置了一个全局过滤器，要求所有方法都需要登录。现在我想更进一步，要求所有操作仅授权给“管理员”角色，除非被文章中的 AllowAnonymous 属性或 [Authorize(Roles="Staff")] 覆盖，然后允许“Staff”和“管理员”访问。

我尝试在 LogonAuthorize 属性构造函数中添加角色：

```
 public LogonAuthorize()
    {
        this.Roles = "Admin";
    } 
```

..但这将所有操作限制为管理员，我不能在操作上使用 Authorize 属性覆盖。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:55:35.797

很快就想通了：O

我创建了另一个授权属性：

```
public sealed class OverrideAuthorize : AuthorizeAttribute
{
} 
```

并将其用作 LogonAuthorize 中的测试：

```
 public override void OnAuthorization(AuthorizationContext filterContext)
    {
        bool skipAuthorization = filterContext.ActionDescriptor.IsDefined(typeof(AllowAnonymousAttribute), true)
        || filterContext.ActionDescriptor.ControllerDescriptor.IsDefined(typeof(AllowAnonymousAttribute), true)
        || filterContext.ActionDescriptor.IsDefined(typeof(OverrideAuthorize), true)
        || filterContext.ActionDescriptor.ControllerDescriptor.IsDefined(typeof(OverrideAuthorize), true);

        if (!skipAuthorization)
        {
            base.OnAuthorization(filterContext);
        }
    } 
```

现在我只需要使用 OverrideAuthorize（或 AllowAnonymous）标记我列入白名单的操作：

```
 [OverrideAuthorize(Roles = "Staff, Administrator")]
    public ActionResult Index()
    {
        return View();
    } 
```

因此，LogonAuthorize 属性默认适用于所有控制器和操作，并且需要角色“Admin”，但它仅在未定义 AllowAnonymous 或 OverrideAuthorize 时授权。

# sql-server - 从运行在 GNU/Linux 上的 Tcl 访问 Microsoft SQL Server

> ID：10634158
> 
> 赞同：1
> 
> 时间：2012-05-17T10:39:06.637
> 
> 标签：sql-server, linux, connection-string, tcl

我正在寻找一个资源来解释如何使用连接字符串，作为来自 Linux 的客户端。我在 Linux 环境中使用**tcl**并获得一个连接字符串，它应该将我连接到 Microsoft SQL 服务器。

您知道如何使用连接字符串连接到服务器以及如何从 Linux 进行连接的好资源吗？

我在网上找到的所有资源都在谈论创建服务器字符串，根本没有涉及 Linux 的使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T12:42:39.847

您的问题*本身*没有意义：“连接字符串”是编程语言或数据库服务器不固有的概念。连接字符串与数据库*连接库*有关，通常它们甚至在这些库使用的不同*数据库驱动程序*之间有所不同。

现在回到正题。就个人而言，我将[tclodbc](http://wiki.tcl.tk/tclodbc)与[FreeTDS](http://www.freetds.org/)驱动程序一起使用。[此处](http://www.freetds.org/userguide/odbcconnattr.htm)解释了如何为 FreeTDS ODBC 驱动程序构建连接字符串。

我不直接使用连接字符串；相反，我在文件中使用在系统范围内配置的“ODBC 源” `/etc/odbc.ini`（由`unixodbc`Debian 中打包的 as 管理）。基本上，该文件包含如下条目：

```
[SERVER1]
Description = MS SQL Server on server1.domain.local
Driver      = /usr/lib/odbc/libtdsodbc.so
Servername  = SERVER1 
```

并且该`/etc/freetds/freetds.conf`文件包含这样的匹配条目：

```
[SERVER1]
    host = server1.domain.local
    port = 1433
    tds version = 7.0
    client charset = UTF-8 
```

现在，在我的 Tcl 代码中，我有这样的东西：

```
set source SERVER1
database connect dbconn $source $user $password
... 
```

# odata - OData 请求显示在 Fiddler (SharePoint & Silverlight 5) 中

> ID：10634160
> 
> 赞同：0
> 
> 时间：2012-05-17T10:39:21.250
> 
> 标签：odata, fiddler, silverlight-5.0

我有一个 Silverlight 5 应用程序，它调用 OData 服务（SharePoint 2010 中包含的 OOTB 服务）以从列表中拉回数据。该站点使用 Windows 身份验证进行保护。当我运行测试时，系统会提示我登录，但结果总是说结果集中返回的结果为零。

现在这很奇怪。我知道列表中有数据（当我手动插入 OData 请求 URL 时，我看到结果在浏览器中返回）。当我在运行测试时观看 Fiddler 时，我看到一些对 clientaccesspolicy.xml 的请求（都导致 401 响应）......然后我登录并成功获取了 clientaccesspolicy.xml 文件。但是，即使应用程序说它运行查询并返回零结果，我也没有在 Fiddler 中看到实际的 OData 服务请求（在成功调用 clientaccesspolicy.xml 后什么都没有。

代码如下所示：

```
private DataServiceCollection<InstructorsItem> _dataCollection = new DataServiceCollection<InstructorsItem>();

private Action<IEnumerable<Instructor>> _callbackWithData;

/// <summary>
/// Retrieves a list of instructors from the data service.
/// </summary>
public void GetInstructors(Action<IEnumerable<Instructor>> callback) {
  // save callbacks
  ResetCallbacks();
  _callbackWithData = callback;

  // get the instructors
  var query = from instructor in IntranetContext.Instructors
              select instructor;

  // execute query
  RunQuery(query);
}

/// <summary>
/// Retrieves instructors from the data source based on the specified query.
/// </summary>
/// <param name="query">Query to execute</param>
private void RunQuery(IQueryable<InstructorsItem> query) {
  // clear the collection & register the load completed method
  _dataCollection.Clear();
  _dataCollection.LoadCompleted += OnLoadDataCompleted;

  // fire the load
  _dataCollection.LoadAsync(query.Take(5));
}

/// <summary>
/// Handler when the data has been loaded from the service.
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
void OnLoadDataCompleted(object sender, LoadCompletedEventArgs e) {
  // remove the event handler preventing double loads
  _dataCollection.LoadCompleted -= OnLoadDataCompleted;

  // convert the data to a generic list of objects
  var results = _dataCollection.ToList<InstructorsItem>();

  // TODO: convert results to local objects
  List<Instructor> convertedResults = new List<Instructor>();
  foreach (var item in results) {
    convertedResults.Add(new Instructor() { 
      SharePointId = item.Id,
      Name = item.Title
    });
  }

  // run the callback
  _callbackWithData(convertedResults);
} 
```

这是触发它的测试运行器的样子：

```
[TestMethod]
[Asynchronous]
[Description("Test loading instructors from the OData Intranet service.")]
public void TestGetInstructors() {
  bool asyncCallCompleted = false;
  List<Instructor> result = null;

  // call data service
  _dataService.GetInstructors(asyncResult => {
    asyncCallCompleted = true;
    result = new List<Instructor>(asyncResult);
  });

  // run test when call completed
  EnqueueConditional(() => asyncCallCompleted);
  EnqueueCallback(
    () => Assert.IsTrue(result.Count > 0, "Didn't retrieve any instructors."));
  EnqueueTestComplete();
} 
```

我一生都无法弄清楚（1）为什么当它说没有错误时我没有看到查询出现在 Fiddler 中，实际上它说运行测试时错误为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:56:43.883

如果您在同一台机器上运行服务器和客户端，则没有外部 HTTP 流量，因此 Fiddler 没有什么可以获取的。

# r - 在指定长度的数据框中识别和删除组

> ID：10634163
> 
> 赞同：0
> 
> 时间：2012-05-17T10:39:26.853
> 
> 标签：r

我想知道是否有人可以提供帮助。我有一个简单的数据框：

```
 spp rep ac.temp            sr ink.temp flux.type      flux             unit
1  Ecklonia   1      19 Ecklonia:1:19     10.1         R 0.1614302 mg O2 gDW-1 hr-1
2  Ecklonia   1      19 Ecklonia:1:19     19.0         R 0.6558070 mg O2 gDW-1 hr-1
3  Ecklonia   1      19 Ecklonia:1:19     24.7         R 0.8777117 mg O2 gDW-1 hr-1
4  Ecklonia   1      19 Ecklonia:1:19     28.9         R 2.3192236 mg O2 gDW-1 hr-1
5  Ecklonia   1      20 Ecklonia:1:20     10.3         R 0.5050336 mg O2 gDW-1 hr-1
6  Ecklonia   1      20 Ecklonia:1:20     20.8         R 1.2928442 mg O2 gDW-1 hr-1
7  Ecklonia   1      20 Ecklonia:1:20     24.8         R 1.8159838 mg O2 gDW-1 hr-1
8  Ecklonia   1      20 Ecklonia:1:20     29.8         R 2.8463946 mg O2 gDW-1 hr-1
9  Ecklonia   1      21 Ecklonia:1:21     10.3         R 0.5214549 mg O2 gDW-1 hr-1
10 Ecklonia   1      21 Ecklonia:1:21     19.5         R 0.9994689 mg O2 gDW-1 hr-1 
```

我想删除列 data$sr 的唯一组合（不仅仅是显示的组合）长度小于 3 个元素的行。

有人知道这样做的自动方式吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:14:45.007

这有帮助吗？

```
a <- read.table(textConnection("
1  Ecklonia   1      19 Ecklonia:1:19     10.1         R 0.1614302 mg O2 gDW-1 hr-1
2  Ecklonia   1      19 Ecklonia:1:19     19.0         R 0.6558070 mg O2 gDW-1 hr-1
3  Ecklonia   1      19 Ecklonia:1:19     24.7         R 0.8777117 mg O2 gDW-1 hr-1
4  Ecklonia   1      19 Ecklonia:1:19     28.9         R 2.3192236 mg O2 gDW-1 hr-1
5  Ecklonia   1      20 Ecklonia:1:20     10.3         R 0.5050336 mg O2 gDW-1 hr-1
6  Ecklonia   1      20 Ecklonia:1:20     20.8         R 1.2928442 mg O2 gDW-1 hr-1
7  Ecklonia   1      20 Ecklonia:1:20     24.8         R 1.8159838 mg O2 gDW-1 hr-1
8  Ecklonia   1      20 Ecklonia:1:20     29.8         R 2.8463946 mg O2 gDW-1 hr-1
9  Ecklonia   1      21 Ecklonia:1:21     10.3         R 0.5214549 mg O2 gDW-1 hr-1
10 Ecklonia   1      21 Ecklonia:1:21     19.5         R 0.9994689 mg O2 gDW-1 hr-1"), header=F)

a[a$V5 %in% names(table(a$V5))[table(a$V5) >= 3],] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:15:25.677

您可以`?table`用来计算元素的出现次数。

```
## create example dataframe
df <- data.frame(rep=rep(1, 16),
                sr=c(rep("Ecklonia:1:19", 4),
                    rep("Ecklonia:1:20", 3),
                    rep("Ecklonia:1:21", 2),
                    rep("Ecklonia:1:22", 4),
                    rep("Ecklonia:1:23", 2),
                    "Ecklonia:1:24"),
                stringsAsFactors=FALSE);

## count occurrence of elements in column "sr"
x <- table(df$sr);

## keep only elements which occure at least 3 times
keep <- df$sr %in% names(x)[x >= 3];

df[keep, ] 
```

# spring - JTA EntityManager 不能使用 getTransaction() [Spring + Hibernate + EntityManager]

> ID：10634164
> 
> 赞同：2
> 
> 时间：2012-05-17T10:39:41.810
> 
> 标签：spring, hibernate, jpa, entitymanager

我正在使用 Spring + JPA + Hibernate + EntityManager 与数据库通信。我收到*“A JTA EntityManager cannot use getTransaction()* ”错误。请提供您的见解并帮助我解决问题。

**豆类.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans default-autowire="byName"
    ... xmlns definitions...
      xsi:schemaLocation="...">

    <context:component-scan base-package="com.mycompany.myproject" />

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" />
    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

    <bean id="myDAO" class="com.mycompany.myproject.dao.myDAO" />

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <tx:annotation-driven />
</beans> 
```

**持久性.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence ... xmlns definitions xsi:schemaLocation="..." version="1.0">
    <persistence-unit name="TEST_DS">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:/TEST_DS</jta-data-source>
        <class>com.twinspires.exchange.model.Test</class>
        <properties>
            <property name="hibernate.archive.autodetection" value="class, hbm" />
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
            <property name="hibernate.hbm2ddl.auto" value="validate" /> <!-- create-drop update -->
            <property name="hibernate.cache.use_query_cache" value="true" />
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.cache.provider_class" value="org.hibernate.cache.HashtableCacheProvider" />
              <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.JBossTransactionManagerLookup"/>             
        </properties>
    </persistence-unit>
</persistence> 
```

**异常堆栈跟踪（摘录）**

```
15:47:43,340 INFO  [STDOUT] DEBUG: org.springframework.transaction.annotation.AnnotationTransactionAttributeSource - Adding transactional method 'getName' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
15:47:43,343 INFO  [STDOUT] DEBUG: org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:47:43,356 INFO  [STDOUT] DEBUG: org.springframework.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.twinspires.exchange.dao.PicDAO.getName]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
15:47:44,114 INFO  [STDOUT] DEBUG: org.springframework.orm.jpa.JpaTransactionManager - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@c629e5] for JPA transaction
15:47:44,124 INFO  [STDOUT] DEBUG: org.springframework.orm.jpa.JpaTransactionManager - Could not rollback EntityManager after failed transaction begin
15:47:44,125 INFO  [STDOUT] java.lang.IllegalStateException: A JTA EntityManager cannot use getTransaction()
15:47:44,125 INFO  [STDOUT]     at org.hibernate.ejb.AbstractEntityManagerImpl.getTransaction(AbstractEntityManagerImpl.java:818)
15:47:44,126 INFO  [STDOUT]     at org.springframework.orm.jpa.JpaTransactionManager.closeEntityManagerAfterFailedBegin(JpaTransactionManager.java:412)
15:47:44,127 INFO  [STDOUT]     at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:381)
15:47:44,128 INFO  [STDOUT]     at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
15:47:44,129 INFO  [STDOUT]     at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
15:47:44,129 INFO  [STDOUT]     at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
15:47:44,130 INFO  [STDOUT]     at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
15:47:44,131 INFO  [STDOUT]     at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
15:47:44,131 INFO  [STDOUT]     at $Proxy175.getName(Unknown Source) 
```

以下是我的道课：-

```
public class MyDao implements IMyDao {
      @PersistenceContext(unitName = "TEST_DS")
      private EntityManager entityManager;

      @Transactional
      public String getName() {            
            final Query query = entityManager.createQuery("from TestTable");
            final Object obj = query.getResultList().get(0);
            return obj == null ? "Empty" : (String) obj;
      }
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T11:28:45.213

从 persitence.xml 中删除 jta-datasource，将数据源配置为 bean j2ee:jdni-lookup 并将其注入 LocalContainerEntityManagerFactoryBean

从 persistence.xml 中删除它

```
<jta-data-source>java:/TEST_DS</jta-data-source> 
```

将事务类型配置为资源本地

```
 <persistence-unit name="TEST_DS" transaction-type="RESOURCE_LOCAL"> 
```

更改为 beans.xml

```
<j2ee:jndi-lookup id="dataSource"  jndi-name="java:/TEST_DS"/>

 <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
   <property name="dataSource" ref="dataSource"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T10:31:14.000

首先我想告诉你我有同样的问题。对此进行研究后，我发现此页面包含您的帖子以及“gkamal”的答案。

我认为答案是说，如果您尝试在应用程序中使用**“全局”** JTA 事务并且它不起作用，那么不要使用它，而是使用**“本地”** JDBC 事务。

但是如果你需要使用全局 JTA 事务，那么你必须使用它。

好吧，我将为您提供我在研究中找到的解决方案。

有些属性依赖于应用程序服务器。我使用 glassfish，这个解决方案工作正常，但我认为您使用的是 JBOSS（由于您在 persistence.xml 的 jta-data-source 中使用的值）我将为 JBOSS AS 编写值，但在 JBOSS 中因为我没有证明它，我只是在 glassfish 中证明它。

在您的 persistence.xml 中，您必须放置另一个属性：

```
<property name="hibernate.transaction.jta.platform" value="org.hibernate.service.jta.platform.internal.JBossStandAloneJtaPlatform"/> 
```

此属性的值取决于 AP 服务器。

在 beans.xml 文件中，您必须查看实体管理器工厂和事务管理器。此外，您已在 web.xml 中指出您在应用程序中引用了哪些持久性单元。

**豆类.xml**

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="TEST_DS"/>
</bean> 
```

在您的事务管理器中，您正在使用实体管理器工厂，但您不必这样做。您必须以这种方式指示您的应用服务器使用的事务管理器和用户事务

```
<bean id="txManager" class="org.springframework.transaction.jta.JtaTransactionManager">
        <property name="transactionManagerName" value="java:appserver/TransactionManager"/>
        <property name="userTransactionName" value="java:comp/UserTransaction"/>
    </bean> 
```

这些属性的值取决于应用服务器（我使用 glassfish）。我认为您必须使用 jboss ap 的值：

```
 <property name="transactionManagerName" value="java:/TransactionManager"/>
        <property name="userTransactionName" value="UserTransaction"/> 
```

但我没有证明。

最后，在 glassfish 我必须放入 beans.xml （我不知道为什么）下面的 bean（我认为在 jboss ap 中没有必要，但你可以证明它）

```
<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" > 
        <property name="persistenceUnits"> 
            <map> 
                <entry key="TEST_DS" value="persistence/TEST_DS"/> 
            </map> 
        </property> 
    </bean> 
```

在您的**web.xml**中，您需要引用您的应用程序将使用的持久性单元。

```
<persistence-unit-ref>
    <persistence-unit-ref-name>persistence/TEST_DS</persistence-unit-ref-name>
    <persistence-unit-name>TEST_DS</persistence-unit-name>
</persistence-unit-ref> 
```

我希望解决方案对您有所帮助。这个对我有用。

# android - 如何使用 Apache Tomcat 使用 PostgreSQL 在 Java 中创建 Web 服务

> ID：10634167
> 
> 赞同：-1
> 
> 时间：2012-05-17T10:39:55.497
> 
> 标签：android, web-services, postgresql, soap, wsdl2java

我想知道如何创建网络服务。我是一名安卓开发者。哪种方法适用于 android web 服务，实际上我们在 PostgreSQL 中使用服务器端 apache tomcat 所以请给我关于这个问题的任何想法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T12:54:57.010

Presuming that by "web service" you mean one of the most common methods currently used, REST-style HTTP+JSON or HTTP+XML, you probably want to use [JAX-RS](http://en.wikipedia.org/wiki/Java_API_for_RESTful_Web_Services) ([JSR311](http://jcp.org/en/jsr/detail?id=311)). This is part of the [Java EE](http://www.oracle.com/technetwork/java/javaee/tech/index.html) specification, and the easiest way to get going is to just use [JBoss AS 7](http://www.jboss.org/as7) which bundles it. JAX-RS implementations are also easy to use with Tomcat if you prefer Tomcat. You want [RESTEasy](http://www.jboss.org/resteasy/) or [Jersey](http://jersey.java.net/); either should be fine. Check out the [Java EE tutorial for JAX-RS](http://docs.oracle.com/javaee/6/tutorial/doc/giepu.html), the [Jersey getting started guide](http://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e8), and the [RESTEasy documentation](http://docs.jboss.org/resteasy/docs/2.3.3.Final/userguide/html/index.html).

If, in fact, you want some other kind of web service like [XML-RPC](http://en.wikipedia.org/wiki/XML-RPC), [SOAP](http://en.wikipedia.org/wiki/SOAP) or [CORBA](http://en.wikipedia.org/wiki/Common_Object_Request_Broker_Architecture) (edit: as your post tags suggest), then (a) reconsider, they're being superceded for a reason and (b) if you must use them, look into implementations specific to the binding technology you must use. I'd suggest that you examine [JAX-WS](http://jax-ws.java.net/) for SOAP+WSDL, but I haven't worked with it myself so I have nothing further to offer. I know the [NetBeans IDE](http://netbeans.org/) offers some kind of old-school SOAP/JAX-WS web services support, but again haven't looked into it.

I expect it'll be way easier to work with JAX-RS in Android than it will be to work with SOAP. A JAX-RS client doesn't need to be anything more than a HTTP client library and an XML or JSON parser/writer - though client libraries that target REST-style APIs exist and make them even easier to work with.

Do you really need SOAP? Or do you just need any kind of web based client/server communication? What exactly are you trying to achieve with this? Where does PostgreSQL come into it?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:52:05.503

我不完全确定这里要问什么，我发现这个问题现在很可能会被关闭，但是这里有。

如果您在 Android 中实现 SOAP 客户端时遇到问题，请参阅[Stack Overflow 中的这个问题](https://stackoverflow.com/questions/297586/how-to-call-soap-web-service-with-android)。投票率最高的答案表明 Android 没有任何本机 SOAP 库，但您可以使用类似[kSOAP 2](http://ksoap2.sourceforge.net/)的东西。

如果困扰您的是服务器部分，请参阅[本教程](http://www.roseindia.net/webservices/buildingsimplewebservice.shtml)。这是一篇冗长的文章，并且严重依赖图像，所以我什至不会尝试对其进行总结。尝试使用那里（和其他地方）提供的说明来实施您的服务，一旦您有一些代码要向我们展示，请返回 Stack Overflow。

# layout - 在 chrome 中的显示表格元素内定位绝对值时 1px 间隙

> ID：10634168
> 
> 赞同：0
> 
> 时间：2012-05-17T10:39:55.527
> 
> 标签：layout, css

这是我在这里的第一个问题。

我试图让一个元素在具有固定宽度和高度的父元素内垂直对齐。在父框内还有一个标题，需要绝对定位在底部。

在处理它时，检查跨浏览器问题我发现 chrome 有所不同。在 FF、IE 8 和 9 中，它可以正常工作，如果您在 Chrome（现在为 19）中打开示例，它会给父级提供 1px 的间隙，如您所见。

[问题的交互式示例 - CSSDeck](http://cssdesk.com/yq74n)

[我怎么看 - 1px 的差距](http://i.imgur.com/RTqJL.png)

我试过删除空白，还有很多东西，但我无法删除那个间隙......

这是一个错误吗？如果您可以帮助我消除差距，或者以一种可以跨浏览器（ie8+）工作的干净方式获得相同的结果，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:02:58.227

请参阅我的示例小提琴：http: [//jsfiddle.net/tnRem/](http://jsfiddle.net/tnRem/)

基本上我删除`display: table`并`#outer`设置`height: 250px`和`box-sizing: border-box;`（仅适用于 IE8+）为`#inner`.

我用 Chrome 19.0.1084.46、Fx12 和 IE8 试过

# android - 如何通过其值而不是位置设置微调器默认值？

> ID：10634180
> 
> 赞同：59
> 
> 时间：2012-05-17T10:40:46.740
> 
> 标签：android, spinner, simplecursoradapter, android-spinner

我在数据库中有 1-50 条记录。我正在使用游标获取这些数据，并使用简单游标适配器将这些值设置为 Spinner。现在我需要的是我想设置一个值，比如第 39 个值作为默认值。但不是通过它的位置，我想通过它的价值来设定。

我知道如何通过其位置设置微调器默认值

```
 spinner.setSelection(39) 
```

将微调器设置为该值。

但我不知道通过数据库中的值（文本）设置微调器默认值。我知道数据库中的值。例如，“书籍”是微调器中的价值之一。我需要将微调器默认设置为书籍。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-05-17T11:43:12.637

如果您要设置微调器值，`arraylist`或者`array`您可以使用值的索引来设置微调器的选择。

```
String myString = "some value"; //the value you want the position for

ArrayAdapter myAdap = (ArrayAdapter) mySpinner.getAdapter(); //cast to an ArrayAdapter

int spinnerPosition = myAdap.getPosition(myString);

//set the default according to value
spinner.setSelection(spinnerPosition); 
```

请参阅链接[如何按值而不是按位置设置 Spinner 的选定项？](https://stackoverflow.com/questions/2390102/how-to-set-selected-item-of-spinner-by-value-not-by-position)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-11T14:30:54.683

最后，我通过以下方式解决了这个问题，其中微调器的位置可以通过它的字符串得到

```
private int getPostiton(String locationid,Cursor cursor)
{
    int i;
    cursor.moveToFirst(); 
    for(i=0;i< cursor.getCount()-1;i++)
    {  

        String locationVal = cursor.getString(cursor.getColumnIndex(RoadMoveDataBase.LT_LOCATION));  
        if(locationVal.equals(locationid))
        { 
            position = i+1;  
            break;
        }
        else
        {
            position = 0;
        }
        cursor.moveToNext();  
    } 
```

调用方法

```
 Spinner location2 = (Spinner)findViewById(R.id.spinner1);
    int location2id = getPostiton(cursor.getString(3),cursor);
    location2.setSelection(location2id); 
```

我希望它对某人有所帮助..

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-04-21T09:44:31.153

将字符串与索引中的值进行比较

```
private void selectSpinnerValue(Spinner spinner, String myString)
     {
         int index = 0;
         for(int i = 0; i < spinner.getCount(); i++){
             if(spinner.getItemAtPosition(i).toString().equals(myString)){
                 spinner.setSelection(i);
                 break;
             }
         }
     } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-28T08:19:26.180

我就是这样做的：

```
String[] listAges = getResources().getStringArray(R.array.ages);

        // Creating adapter for spinner
        ArrayAdapter<String> dataAdapter =
                new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, listAges);

        // Drop down layout style - list view with radio button
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        // attaching data adapter to spinner
        spinner_age.getBackground().setColorFilter(ContextCompat.getColor(this, R.color.spinner_icon), PorterDuff.Mode.SRC_ATOP);
        spinner_age.setAdapter(dataAdapter);
        spinner_age.setSelection(0);
        spinner_age.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
                String item = parent.getItemAtPosition(position).toString();

                if(position > 0){
                    // get spinner value
                    Toast.makeText(parent.getContext(), "Age..." + item, Toast.LENGTH_SHORT).show();
                }else{
                    // show toast select gender
                    Toast.makeText(parent.getContext(), "none" + item, Toast.LENGTH_SHORT).show();
                }
            }
            @Override
            public void onNothingSelected(AdapterView<?> parent) {
            }
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-25T04:41:45.060

你可以像这样轻松地做到这一点。

```
String cls=student.getStudentClass();
class_spinner.setSelection(classArray.indexOf(cls),true); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-09T04:06:34.957

如果您用于微调器的列表是一个对象，那么您可以像这样找到它的位置

```
private int selectSpinnerValue( List<Object> ListSpinner,String myString) 
{
    int index = 0;
    for(int i = 0; i < ListSpinner.size(); i++){
      if(ListSpinner.get(i).getValueEquals().equals(myString)){
          index=i;
          break;
      }
    }
    return index;
} 
```

使用：

```
 int index=selectSpinnerValue(ListOfSpinner,StringEquals);
    spinner.setSelection(index,true); 
```

# javascript - 弹出窗口卸载问题

> ID：10634184
> 
> 赞同：1
> 
> 时间：2012-05-17T10:41:30.017
> 
> 标签：javascript, jquery

我有一个弹出窗口，当用户同时打开和关闭弹出窗口时，它给出了脚本错误。下面的代码用于弹出窗口。

```
 <html>
    <head>
   <script src="../../StaticContent/Scripts/jquery-1.7.2.min.js"
        type="text/javascript"></script>

    <script src="../../StaticContent/Scripts/jquery-ui-1.8.20.custom.js"
        type="text/javascript"></script>
            <script type="text/javascript" language="javascript">
             function CloseWarning() {
                        return "Do you want to close the window";
                    }
function onload()
{
}
        </script></head>
            <body onbeforeunload="return CloseWarning();" onload="onload();">

              //Some html

            <script type="text/javascript" language="javascript">
                $(document).ready(
                    function() {
            //Some code
            });
            </script>
            </body>
            </html> 
```

我试过调试，它在 $(document).ready() 行给出错误。我认为由于在完全加载 HTML 之前关闭弹出窗口会导致此问题。

有什么线索？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:51:22.980

你`()()`在函数声明中有双重。改变如下。

```
 function CloseWarning(){
                    return "Do you want to close the window";
                } 
```

# javascript - AJAX 无法在本地主机上运行

> ID：10634185
> 
> 赞同：2
> 
> 时间：2012-05-17T10:41:31.743
> 
> 标签：javascript, ajax

我正在尝试使 AJAX 示例正常工作，但无法正常工作。你能在 XAMPP 上运行它吗？

我有三个文件，message.txt、index.html、ajaxtest.js。当您单击超链接时，它应该会弹出一个带有 message.txt 内容的弹出窗口。（所有文件都在同一个目录中）

索引.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
  <head>
  <title> Using XMLHttpRequest</title>
  <script type="text/javascript" src="ajaxtest.js"></script>
  </head>
  <body>
    <p>
      <a href="message.txt" onclick="grabFile(this.href); return false;">
Click here
</a>
</p>
</body>
</html> 
```

ajaxtest.js

```
function getHTTPObject() {
  var xhr = false;
  if (window.XMLHttpRequest) {  //see if a XMLHttpRequest exists
    xhr = new XMLHttpRequest();  //if it exists change "xhr" to a new instance of the object
  }
  else if (window.ActiveXObject) {  //see if ActiveX exists (for IE)
    try {  //Allows newer versions of IE to use the newer ActiveX object
      xhr = new ActiveXObject("Msxml2.AMLHTTP");  //if it exists change "xhr" to a new instance of the object
    }
    catch(e) { //catches an error and resets "xhr" to false
      try {  //Allows older versions of IE to fall back onto the older version using "try...catch"
        xhr = new ActiveXObject("Microsoft.XMLHTTP");  //if it exists change "xhr" to a new instance of the object
      }
      catch(e) {
        xhr = false;
      }
    }
  }
  return xhr;
}

function grabFile(file) {
  var request = getHTTPObject();
  if (request) {
    request.onreadystatechange = function() {
      displayResponse(request);
    };
    request.open("GET", file, true);
    request.send(null);
  }
}

function displayResponse(request) {
  if (request.readyState == 4) {
    if (request.status == 200 || request.status == 304) {
      alert(request.responseText);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:56:20.283

出于安全原因，JavaScript 对客户端文件系统的访问受到限制！你可以[在这里阅读更多](http://en.wikipedia.org/wiki/JavaScript#Security)

如果您使用的是 google chrome，则必须使用以下`-allow-file-access-from-files`命令启动可执行文件：

```
chrome.exe -allow-file-access-from-files 
```

FireFox 可能有类似的配置

更新：查看您的代码，我认为您正在`request.status`与`OK`(200) 和`Not Modified`(304) 标头进行比较！这些是从 Web 服务器返回的 HTTP 响应标头，因此当您在 Web 服务器上运行代码时，您**必须**检查响应标头，否则，当使用`file:///`协议在本地运行时，您总是会得到`0`响应标头

这是一个解决方法，您可以检查域，如果您在本地运行，则无需检查响应状态：

```
function displayResponse(request) {
  if (request.readyState == 4) {
    if (!document.domain || request.status == 200 || request.status == 304) {
      alert(request.responseText);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:23:26.110

正如我已尝试使用您的示例，您的请求对象没有达到状态 4 并再次使用。在下面的代码之前检查 request.status ，它总是得到 0 值。这就是为什么你的脚本没有提醒 response 。

```
if (request.status == 200 || request.status == 304) {
  alert(request.responseText);
} 
```

检查您的解决方案： http: [//www.ibm.com/developerworks/web/library/wa-ajaxintro3/](http://www.ibm.com/developerworks/web/library/wa-ajaxintro3/)

希望有所帮助。

# php - 如何使用复选框在php中进行多个查询？

> ID：10634186
> 
> 赞同：0
> 
> 时间：2012-05-17T10:41:32.277
> 
> 标签：php, mysql, forms

我正在构建一个简单的应用程序，其基本任务是批准从 MySQL 表中列出的内容。列表项很长，例如 15 到 20 项。我想在列表项上放置一个复选框，并允许用户检查多个项目并单击提交按钮以批准所选项目。

我在表格上做了一个基本的标志列来设置 0 或 1 来表示批准或不批准。在我现有的系统中，用户必须单击链接并转到特定页面并单击批准才能批准该项目。我想通过允许用户选中复选框并选择多个条目来一次性批准这些项目来缩短流程时间。

![在此处输入图像描述](../Images/164f0f24a0b0d2be7daaecba236dbe38.png)

这是我的桌子，项目是 YouTube 链接，因此管理员可以查看视频，如果视频很好，他/她可以通过选中复选框来批准它。

这是特定于批准项目的当前页面的 php 代码

```
<?php 
$msg = "";
$idForm = $_GET['id'];

if( isset( $_POST['submit'] ) ){
    $msg= approveVideo($idForm);
}
?> 
```

批准视频功能：

```
function approveVideo($id) {
    $message ="";
    $query= "UPDATE locus_videos SET set_flag='1' WHERE id='{$id}'";

    if(mysql_query($query)) {
        $message ="Video Approved ";
    }else {
        die("failed: " . mysql_error());    
    }

    return $message;

} 
```

php 文件的表格格式：

```
<table width="100%" height="487" border="0" cellpadding="5" cellspacing="5"> 
```

" 方法="POST">

```
 <table width="100%" border="0" cellspacing="5" cellpadding="5"> 
```

上传者姓名视频链接

"> " 目标="_blank">

```
 </form>
</td> 
```

在我当前的版本中，当用户单击视频链接时，此链接将重定向到特定页面，并且只有他可以从那里批准视频（YouTube 链接）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:02:55.267

相当容易。对于要批准的每个内容，您都需要一组复选框（如下）。将每个复选框的值作为内容id

```
<input type="checkbox" id="chk_1" name="**band[]**" value="ABC" /> ABC <br/>
<input type="checkbox" id="chk_2" name="**band[]**" value="PQR" /> PQR <br/>
<input type="checkbox" id="chk_3" name="**band[]**" value="XYZ" /> XYZ <br/> 
```

现在上面的复选框将被封装在你的 . 当您提交表单并检查 POSTed 数组（即 $_POST）时，它将包含以下条目

Array ("band" => Array("0" => ABC, 1 => PQR.); );

使用 php 的 implode 函数将其转换为逗号分隔的 php 字符串，并将此字符串传递给 Update 查询的 WHERE 的 IN 子句。

有两件事很重要。

1）您需要使用我在上面的示例中使用的复选框数组。

2）您需要将复选框的 value 属性设置为内容 id 或内容表的主键。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T11:28:45.817

有两种方法，具体取决于您是只想“批准”行，还是“批准”和“拒绝”行。

第一的：

```
<table>
    <thead>
        <tr>
            <td>&nbsp;</td>
            <td>Url</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><input type="checkbox" name="Approve[]" value="1" /></td>
            <td>http://www.youtube.com/...</td>
        </tr>
        <tr>
            <td><input type="checkbox" name="Approve[]" value="2" /></td>
            <td>http://www.youtube.com/...</td>
        </tr>
        <tr>
            <td><input type="checkbox" name="Approve[]" value="3" /></td>
            <td>http://www.youtube.com/...</td>
        </tr>
    </tbody>
</table> 
```

如您所见，有一个名为“Approve[]”的复选框，每行都有一个不同的值。该值是表的 ID 列。

在您的 PHP 中，您将使用以下内容：

```
function approveVideos($ids)
{
    $message = '';
    $query = 'update locus_videos set set_flag = 1 where id in (' . implode(',', $ids) . ')';
    if(mysql_query($query)) 
    {
        $message ="Videos Approved ";
    }
    else 
    {
        die("failed: " . mysql_error());    
    }
    return $message;
}

$ids = $_POST['Approve'];
approveVideos($ids); 
```

第二：

```
<table>
    <thead>
        <tr>
            <td>&nbsp;</td>
            <td>Url</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><input type="hidden" name="Approve[1]" value="0" /><input type="checkbox" name="Approve[1]" value="1" /></td>
            <td>http://www.youtube.com/...</td>
        </tr>
        <tr>
            <td><input type="hidden" name="Approve[2]" value="0" /><input type="checkbox" name="Approve[2]" value="1" /></td>
            <td>http://www.youtube.com/...</td>
        </tr>
        <tr>
            <td><input type="hidden" name="Approve[3]" value="0" /><input type="checkbox" name="Approve[3]" value="1" /></td>
            <td>http://www.youtube.com/...</td>
        </tr>
    </tbody>
</table> 
```

在 PHP 中，您将执行以下操作：

```
function setVideoFlag($id, $flag = 1)
{
    $message = '';
    $query = 'update locus_videos set set_flag = ' . $flag . ' where id = ' . $id;
    if(mysql_query($query)) 
    {
        $message ="Video " . ($flag == 1 ? 'Approved' : 'Disapproved');
    }
    else 
    {
        die("failed: " . mysql_error());    
    }
    return $message;
}

foreach($_POST['Approve'] as $id => $flag)
{
    setVideoFlag($id, $flag);
} 
```

我希望这有帮助吗？

加文

# spring - Spring bean 初始化 - Clojure

> ID：10634189
> 
> 赞同：2
> 
> 时间：2012-05-17T10:41:42.853
> 
> 标签：spring, clojure

我有一个使用spring bean初始化初始化的clojure类。

我的setter方法如下

> (defn -setCompanyName [货币] (println (str "company : " company)))

bean初始化如下

> ```
> <bean id="company" class="test.Company"
>         p:companyName="orce"/> 
> ```

我收到以下错误。

> bean 类 [test.Company] 的无效属性“companyName”：Bean 属性“companyName”不可写或具有无效的 setter 方法。setter 的参数类型是否与 getter 的返回类型匹配？

有谁知道这个问题的根本原因。

问候伊苏鲁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:56:17.543

这个特定问题有几个可能的原因，所以如果没有你的所有代码，很难说出失败的原因。

这是对我有用的代码：

```
(ns test)

(gen-class
   :main false
   :name test.Company
   :methods [[setCompanyName [String] void]])

(defn -setCompanyName [this company] (println (str "company : " company))) 
```

笔记：

*   你**不需要**任何吸气剂
*   该方法的签名在 :methods 向量中指定。
*   你的函数应该有一个额外的“this”参数
*   gen-class 宏根据宏的参数生成一个类，所以根本**不**看-setCompanyName 函数定义。

我发现 javap 命令对查看 gen-class 生成的内容非常有用：

```
javap.exe -classpath classes/ test.Company
public class test.Company extends java.lang.Object{
    public static {};
    public test.Company();
    public java.lang.String toString();
    public boolean equals(java.lang.Object);
    public java.lang.Object clone();
    public int hashCode();
    public void setCompanyName(java.lang.String);
} 
```

我还建议您查看[http://clojuredocs.org/clojure_core/clojure.core/gen-class](http://clojuredocs.org/clojure_core/clojure.core/gen-class)上的第二个示例，了解如何管理状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-22T02:11:59.413

你不需要另一个函数参数吗？第一个充当“this”指针。我现在无法测试这个，因为我在我的手机上。

# deployment - 如何从命令行设置 ClickOnce 应用程序的 PublishUrl

> ID：10634192
> 
> 赞同：7
> 
> 时间：2012-05-17T10:41:51.580
> 
> 标签：deployment, command-line, msbuild, clickonce

我正在开发 ClickOnce 应用程序。我正在尝试使用以下命令从命令行发布它：

```
msbuild Project.csproj /t:Publish /p:configuration=release; 
```

问题是我想设置一些其他属性以及配置，例如“PublishUrl”等。

我试过这个：

```
msbuild Project.csproj /t:Publish /p:configuration=release;publishurl="\\sdmm\publish\" 
```

它构建成功，但该项目的输出将被复制到 app.publish 文件夹中应用程序的调试文件夹中。

我该怎么处理这件事？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T07:10:49.493

您可以从命令行设置您想要的任何属性，但在此之前，您需要在一些文本编辑器（记事本等）中打开您的 .csproj 文件。找到要编辑的属性。在您的情况下，它是发布网址。从 csproj 文件中删除此属性。

然后你可以这样做

```
msbuild /target:clean,publish /p:publishurl=c:\publish_location\ 
```

您必须在发布之前清理项目。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-17T12:21:23.157

尝试将您的目标更改为

> msbuild /目标：清理，重建，发布

因为如果仅使用“发布”目标，您要覆盖的属性 (PublishUrl) 未嵌入到应用程序文件中。

# parsing - LL(2) 不是 LL(1) 的语言

> ID：10634197
> 
> 赞同：15
> 
> 时间：2012-05-17T10:42:09.737
> 
> 标签：parsing, grammar

为了进一步了解解析器和语法，我正在寻找一个（希望是简单的）LL(2) 但不是 LL(1)的*语言示例。*也就是说，一种可以由 LL(2) 文法生成但不能由任何 LL(1) 文法生成的语言。

那门课有有用的语言吗？即我们能想象一种计算机语言是 LL(2) 但不是 LL(1) 吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-18T18:24:35.070

Gunther的回答中链接的书中提到的示例：

```
S -> a S A | epsilon
A -> a^k b S | c 
```

是描述不是 LL(k) 的 LL(k+1) 语言的语法。尤其，

```
S -> a S A | epsilon
A -> a b S | c 
```

是描述不是 LL(1) 的 LL(2) 语言的语法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-17T17:47:10.083

[Grune 和 Jacobs 的Parsing Techniques](http://dickgrune.com/Books/PTAPG_2nd_Edition/)提供了一个示例。这本书的旧版本可在网上获得

[http://dickgrune.com/Books/PTAPG_1st_Edition/BookBody.pdf](http://dickgrune.com/Books/PTAPG_1st_Edition/BookBody.pdf)

示例在第 181 页。

# iphone - 对 PHP 服务器的 HTTP POST 请求，其中注册详细信息加密为 HTTP 参数

> ID：10634198
> 
> 赞同：0
> 
> 时间：2012-05-17T10:42:15.523
> 
> 标签：iphone

如何使用加密为 HTTP 参数的注册详细信息将 HTTP POST 请求发布到 PHP 服务器。您可以根据我的要求向我发布示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:03:54.247

你可以使用`ASIHTTPRequest`，你可以这样：

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:someUrl];
[request setRequestMethod:@"POST"];
[request setPostValue:@"..." forKey:@"user"];
[request setPostValue:@"..." forKey:@"password"];
[request setDelegate:self];
[request startAsyncrhonous]; 
```

有请求的委托方法，例如请求完成或失败

```
- (void)requestFinished:(ASIHTTPRequest *)request 
{
   NSLog(@"Response %d ==> %@", request.responseStatusCode, [request responseString]);
}

- (void)requestFailed:(ASIHTTPRequest *)request 
{
   NSLog(@"Response %d ==> %@", request.responseStatusCode, [request responseString]);
} 
```

您可以随时下载[ASIHTTPRequest](http://github.com/pokeb/asi-http-request)，也可以访问[文档](http://allseeing-i.com/ASIHTTPRequest/)以获取更多帮助。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:19:14.603

```
NSURL *url = [NSURL URLWithString:@"http://xyz"];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url
                                                       cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];

NSString *req;

    req = [NSString stringWithFormat:@"Name=%@&Password=%@",userName,pass];// userName and pass are string

[request setHTTPMethod:@"POST"];
[request setHTTPBody: [req dataUsingEncoding:NSISOLatin1StringEncoding]];
NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:request delegate:self];
[connection start]; 
```

下面是一个代表，它将带来数据

```
-(void)connection:(NSURLConnection*)connection didReceiveData:(NSData *)data
{
NSError *erro;
NSDictionary *jsonData = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&erro];

NSLog(@"your data in dictionary is = %@",jsonData);

} 
```

希望对你有帮助 ！！！

# google-maps - 在 Google 地图中查找多个位置的中心

> ID：10634199
> 
> 赞同：37
> 
> 时间：2012-05-17T10:42:24.873
> 
> 标签：google-maps

我刚刚复制了这个[问题](https://stackoverflow.com/questions/3059044/google-maps-js-api-v3-simple-multiple-marker-example)的代码并应用了我的纬度和经度。但是，纬度和经度将是动态的，并且`center`地图的 将根据位置的纬度和经度而变化。

以下是另一个问题的代码

```
<!DOCTYPE html>
<html>

    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <title>Google Maps Multiple Markers</title>
        <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
    </head>

    <body>
        <div id="map" style="width: 500px; height: 400px;"></div>
        <script type="text/javascript">
            var locations = [
                ['Bondi Beach', -33.890542, 151.274856, 4],
                ['Coogee Beach', -33.923036, 151.259052, 5],
                ['Cronulla Beach', -34.028249, 151.157507, 3],
                ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
                ['Maroubra Beach', -33.950198, 151.259302, 1]
            ];

            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 10,
                center: new google.maps.LatLng(-33.92, 151.25),
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            var infowindow = new google.maps.InfoWindow();

            var marker, i;

            for (i = 0; i < locations.length; i++) {
                marker = new google.maps.Marker({
                    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                    map: map
                });

                google.maps.event.addListener(marker, 'click', (function(marker, i) {
                    return function() {
                        infowindow.setContent(locations[i][0]);
                        infowindow.open(map, marker);
                    }
                })(marker, i));
            }
        </script>
    </body>

</html> 
```

所以我的问题是，当有动态位置时，我怎么知道地图的中心。我试过留下`center`空白，但地图没有加载。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-05-17T14:52:28.810

首先，您可以通过包含所有动态生成的位置来创建[LatLngBounds对象。](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)使用 extend 方法来包含这些点。然后您可以使用 getCenter 方法获取边界的中心。

**更新：**

代码：

```
var bound = new google.maps.LatLngBounds();

for (i = 0; i < locations.length; i++) {
  bound.extend( new google.maps.LatLng(locations[i][2], locations[i][3]) );

  // OTHER CODE
}

console.log( bound.getCenter() ); 
```

**插图：**

![在此处输入图像描述](../Images/fdf4368878b01e0402fb3e558e7cbe2b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T15:55:03.520

我通过平均纬度和平均经度并使用这些平均值作为我的中心来做到这一点。

例子：

```
self.adjustPosition = function () {
    var lat = 0, lng = 0;

    if (self.nearbyPlaces().length == 0) {
        return false;
    }

    for (var i = 0; i < self.nearbyPlaces().length; i++) {
        lat += self.nearbyPlaces()[i].latitude;
        lng += self.nearbyPlaces()[i].longitude;
    }

    lat = lat / self.nearbyPlaces().length;
    lng = lng / self.nearbyPlaces().length;

    self.map.setCenter(new window.google.maps.LatLng(lat, lng));
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T14:32:57.083

这种方法不起作用，因为它将平均数字而不是数字的“中间”（纬度/经度）。可以这样想，您在美国有 6 个点，在加利福尼亚州有 1 个点，在东海岸有 5 个点，分布在南北。东海岸的 5 权重是地图右侧（东）的平均值，而您的中心点将在乔治亚州周围（从东到西）。如果你想避免使用 getCenter，你会想找到东方向的最高点和最低点（纬度 +/- 和经度 +/-），并在遇到极端情况后找到每个方向的中间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-09T17:00:27.750

```
private LatLng computeCentroid(List<LatLng> points) {
double latitude = 0;
double longitude = 0;
int n = points.size();

for (LatLng point : points) {
    latitude += point.latitude;
    longitude += point.longitude;
}

return new LatLng(latitude/n, longitude/n); 
```

}

# android - LINUX 中的 Android SDK Manager 代理设置

> ID：10634202
> 
> 赞同：9
> 
> 时间：2012-05-17T10:42:32.387
> 
> 标签：android, ubuntu, proxy, android-sdk-2.3

我正在尝试在工作防火墙后面的 Ubuntu 中安装 Android SDK，并且收到“无法连接到 dl-ssl.google.com”消息。这是一个已知问题，但我看到的每个解决方案都涉及代理设置和选择“强制 http”选项。看起来这在 Windows 中很简单，但是我想知道如何在 LINUX 中做同样的事情。我可以设置 Eclipse 代理设置，但我认为 android sdk 管理器不会使用它。某处有配置文件吗？

提前致谢。

马克

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-19T13:54:53.627

解决方案是设置一个本地代理来执行身份验证并创建文件 ~/.android/androidtool.cfg 以将 android 重定向到本地代理，如下所示。

```
### Settings for Android Tool
#Tue Jun 12 01:34:55 PDT 2012
http.proxyPort=3128
sdkman.monitor.density=108
http.proxyHost=127.0.0.1
sdkman.show.update.only=true
sdkman.ask.adb.restart=false
sdkman.force.http=true
sdkman.show.updateonly=true 
```

此文件可能已存在条目，例如

```
http.proxyPort=
http.proxyHost=127.0.0.1\:3128 
```

对我来说，这在我将其更改为上面显示的形式之前不起作用：

```
http.proxyPort=3128
http.proxyHost=127.0.0.1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-15T11:07:30.380

只是为了帮助那里的人。

我能够通过以下过程将 SDK Manager 与代理设置一起使用

1.  转到外壳（对于 ubuntu，Ctrl+Alt+T）
2.  从 sdk\tools 目录运行“android”。（例如 /mySDKDir/tools/android）
3.  这将启动 SDK 管理器。在主菜单上，转到工具 -> 选项以设置代理设置。
4.  选择相关软件包并下载/安装。SDK 管理器将使用指定的代理设置。

问候

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T10:55:58.397

如果您运行此命令：

```
export HTTP_PROXY=http://my_proxy:port/ 
```

在运行`android`or之前的 shell`eclipse`中，SDK 工具应该尊重这一点。

如果您希望它在帐户范围内永久生效，请将上述行添加到`~/.bashrc`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-27T22:08:59.197

我能够使用我的实际代理信息编辑 ~/.android/androidtool.cfg，保存我必须使用代理的 IP 地址（有效）而不是主机名（无效）的事实。似乎 Linux 中的 Android SDK 管理无法解析名称。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-10T16:30:58.520

我将 android androidtool.cfg Windows 的设置复制到 Linux 文件，它运行良好

# android - 如何在android中显示每秒动态变化的当前时间

> ID：10634231
> 
> 赞同：13
> 
> 时间：2012-05-17T10:45:14.400
> 
> 标签：android

我需要在文本视图中显示当前时间，并且时间在 android 中每秒动态变化（如数字时钟）。我已经用谷歌搜索但我没有得到帮助。如果有人对此有想法，请帮助我谢谢提前。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-17T10:54:48.563

这是代码..

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    Thread myThread = null;

    Runnable myRunnableThread = new CountDownRunner();
    myThread= new Thread(myRunnableThread);   
    myThread.start();

}

public void doWork() {
    runOnUiThread(new Runnable() {
        public void run() {
            try{
                TextView txtCurrentTime= (TextView)findViewById(R.id.myText);
                    Date dt = new Date();
                    int hours = dt.getHours();
                    int minutes = dt.getMinutes();
                    int seconds = dt.getSeconds();
                    String curTime = hours + ":" + minutes + ":" + seconds;
                    txtCurrentTime.setText(curTime);
            }catch (Exception e) {}
        }
    });
}

class CountDownRunner implements Runnable{
    // @Override
    public void run() {
            while(!Thread.currentThread().isInterrupted()){
                try {
                doWork();
                    Thread.sleep(1000); // Pause of 1 Second
                } catch (InterruptedException e) {
                        Thread.currentThread().interrupt();
                }catch(Exception e){
                }
            }
    }
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-12-03T19:46:20.083

使用文本时钟。这将动态更改而无需单独的代码。

```
 <TextClock
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:id="@+id/textClock"
            android:layout_weight="0.11"
            android:textStyle="bold"
            android:textSize="22sp"
            android:format24hours="hh:mm:ss a  EEE MMM d"/>

    TextClock textClock = (TextClock) findViewById(R.id.textClock);
    textClock.setFormat12Hour(null);
    //textClock.setFormat24Hour("dd/MM/yyyy hh:mm:ss a");
    textClock.setFormat24Hour("hh:mm:ss a  EEE MMM d"); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-09-10T11:30:58.303

使用 CountDownTimer 类，为 CountDownTimer life 传递一个巨大的值（这里我给了 1000000000）。

示例代码::

```
CountDownTimer newtimer = new CountDownTimer(1000000000, 1000) { 

            public void onTick(long millisUntilFinished) {
                Calendar c = Calendar.getInstance();
                textView.setText(c.get(Calendar.HOUR)+":"+c.get(Calendar.MINUTE)+":"+c.get(Calendar.SECOND));
            }
            public void onFinish() {

            }
        };
        newtimer.start(); 
```

在关闭 Activity 时，调用以下函数

```
newtimer.cancel(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-17T10:54:43.833

您可以将`Thread`Class 与 sleep(1000) 一起使用；或者你可以使用`TimerTask`类。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-17T10:46:34.120

[`Chronometer`](http://developer.android.com/reference/android/widget/Chronometer.html)在 Android 中使用类。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-17T10:55:59.480

为此，您应该尝试 Chronometer，这样您就可以实现您的目标，祝您好运

Chronometer 的示例代码在这里：

在 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  >
<TextView
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="@string/hello"
  />
<Chronometer
 android:id="@+id/chronometer"
 android:layout_gravity="center_horizontal"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
 />
<Button
 android:id="@+id/buttonstart"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="Start"
 />
<Button
 android:id="@+id/buttonstop"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="Stop"
 />
<Button
 android:id="@+id/buttonreset"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="Reset"
 />
</LinearLayout> 
```

在java文件中

```
package com.exercise.AndroidChronometer;

import android.app.Activity;
import android.os.Bundle;
import android.os.SystemClock;
import android.view.View;
import android.widget.Button;
import android.widget.Chronometer;

public class AndroidChronometer extends Activity {
   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       final Chronometer myChronometer = (Chronometer)findViewById(R.id.chronometer);
       Button buttonStart = (Button)findViewById(R.id.buttonstart);
       Button buttonStop = (Button)findViewById(R.id.buttonstop);
       Button buttonReset = (Button)findViewById(R.id.buttonreset);

       buttonStart.setOnClickListener(new Button.OnClickListener(){

   @Override
   public void onClick(View v) {
    // TODO Auto-generated method stub
    myChronometer.start();
   }});

       buttonStop.setOnClickListener(new Button.OnClickListener(){

   @Override
   public void onClick(View v) {
    // TODO Auto-generated method stub
    myChronometer.stop();

   }});

       buttonReset.setOnClickListener(new Button.OnClickListener(){

   @Override
   public void onClick(View v) {
    // TODO Auto-generated method stub
    myChronometer.setBase(SystemClock.elapsedRealtime());

   }});

   }
} 
```

# c# - 将文件逐字存储在数组中

> ID：10634234
> 
> 赞同：-4
> 
> 时间：2012-05-17T10:45:26.753
> 
> 标签：c#

我正在尝试制作一个 C# 代码以从记事本文件中读取，那么如何将它逐字存储在数组中或如何使其读取并停止在某个特殊标记处？
例如
read$ from$ file$
并且它应该存储在数组中作为 从 文件中
读取

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:48:40.170

```
File.ReadAllLines("file.txt").Split("$") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:47:58.253

使用以下代码。

```
String[] tokens = File.ReadAllText("file.txt").Split('$'); 
```

令牌字符串数组将为您提供所需的字符串值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:47:00.797

按你说的保存。在使用“$”检索拆分数据时。它会给你数组。

```
string[] strarr = mytxtdata.Split('$'); 
```

# sql-server - SQL Server 2000 的 TSQLUnit？

> ID：10634237
> 
> 赞同：0
> 
> 时间：2012-05-17T10:45:36.993
> 
> 标签：sql-server, tsql, unit-testing, sql-server-2000, tsqlunit

我需要一个用于 SQL Server 2000 的测试框架（是的，我知道）。

我最好将 tSQLt 与 Red Gate Test 一起使用，但它不适用于 SQL 2000，因为它需要 CLR（以及其他问题）。

那里的很多信息表明SQL Server 2000 支持[TSQLUnit](http://sourceforge.net/apps/trac/tsqlunit/)（曾经？），但 sourceforge 上的版本都包含不受支持的语法。

具体来说，helper proc`tsu_FakeTable`包含这个局部变量：

```
DECLARE @cmd VARCHAR(MAX); 
```

我担心`VARCHAR(8000)`这是一个等待发生的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:53:21.870

您愿意考虑替代框架吗？例如[DbFit](http://gojko.net/fitnesse/dbfit/)（现在作为[fitSharp](http://fitsharp.github.com/)项目的一部分进行维护），它支持 SQL 2000。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:59:32.933

糟糕，该过程`tsu_FakeTable`是一组辅助函数的一部分，而不是 TSQLUnit 本身的一部分。

# jvm - Java 1.4.1 上的堆转储

> ID：10634246
> 
> 赞同：1
> 
> 时间：2012-05-17T10:46:18.317
> 
> 标签：jvm, solaris, heap-dump, jdk1.4

无论如何，我可以在 Solaris 9 上使用 java 1.4.1 进行堆转储吗？

我正在使用一个非常旧的应用程序服务器和 java 版本，并且想进行堆转储。我将在生产中使用它，所以 hprof 可能不是一个选择。有什么工具可以安装吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:48:50.620

JDK 1.4 和 1.4.1 的 HPROF[似乎存在](http://performance.netbeans.org/articles/hat-howto/)错误

> 警告：JDK 1.4 和 JDK 1.4.1 在 hprof 中包含一个错误。您不能将这些版本与 HAT 一起使用。

因此您可以考虑从 JDK 1.4.2 升级到最新更新

这样，您可以使用[backported `jmap`for Solaris](http://java.sun.com/j2se/1.4.2/ReleaseNotes.html#142_09)来进行堆转储，如此[处](https://serverfault.com/a/125451/7149)所述。

# java - 如何从网络摄像头捕获图像同时已经使用 Java Gstreamer 从网络摄像头流式传输？

> ID：10634247
> 
> 赞同：0
> 
> 时间：2012-05-17T10:46:18.613
> 
> 标签：java, webcam, gstreamer, java-gstreamer

我正在将 gstreamer 库用于需要能够从网络摄像头捕获图像的 Java 项目。

我已经有了显示网络摄像头流的代码，只是不知道如何通过按下旁边的按钮来捕获图像。

我已经搜索了互联网，但只能找到显示流或捕获图像的代码片段，但没有一个说明两者......我试图合并这些代码片段，但这对我不起作用任何一个。

我该怎么做才能让它工作？

```
public class WebcamPanel extends JPanel {

    private static Pipeline pipe; 

    public WebcamPanel(){

        String[] args = {};
        args = Gst.init("Webcam", args); 

        pipe = new Pipeline("pipeline");

        final Element videosrc = ElementFactory.make("dshowvideosrc", "source"); 
        final Element videofilter = ElementFactory.make("capsfilter", "flt"); 
        videofilter.setCaps(Caps.fromString("video/x-raw-yuv, width=320, height=240")); 

        setLayout(new GridBagLayout());
        final GridBagConstraints c = new GridBagConstraints();

        JButton takePic = new JButton();
        takePic.setPreferredSize(new Dimension(50,50));

        c.gridx = 0;
        c.insets = new Insets(0,10,0,0);
        add(takePic,c);

        c.gridx = 2;
        c.gridwidth = GridBagConstraints.REMAINDER;
        c.insets = new Insets(0,40,0,0);

        SwingUtilities.invokeLater(new Runnable() { 
            public void run() { 
                VideoComponent videoComponent = new VideoComponent(); 
                Element videosink = videoComponent.getElement(); 
                // This gives 2nd window with stream from webcam 
                // Element videosink = ElementFactory.make("xvimagesink", "sink"); 
                pipe.addMany(videosrc, videofilter, videosink); 
                Element.linkMany(videosrc, videofilter, videosink); 

                videoComponent.setPreferredSize(new Dimension(320, 240)); 
                add(videoComponent,c);
                videoComponent.setVisible(true);
                // Start the pipeline processing 
                pipe.setState(State.PLAYING); 
            }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:21:21.860

你看过camerabin2吗？这将为您实现整个相机工作流程（取景器、图像捕捉、视频捕捉、效果......）。基本方法是打开第二个流并从中捕获选定的图像（例如，使用阀门！jpegenc！multifilesink 并为所选图像打开阀门）或使用输出选择器到图像保存管道或使用缓冲探针（hacky）。

# jquery - 我的表没有使用 Jquery 的 tablesorter 插件进行排序

> ID：10634253
> 
> 赞同：0
> 
> 时间：2012-05-17T10:46:35.663
> 
> 标签：jquery, backbone.js, tablesorter

我使用backbone.js 创建了一个简单的联系人管理器，并使用Jquery saveit 和loadit 插件存储了我的数据，并在表格中显示了数据。现在我想按名字对表格进行排序，所以我使用了 jquery 的 tablesorter 插件，但它不起作用我已经阅读了 tablesorter 的所有文档但没有成功。这是我在视图的渲染功能中写的

```
$("tlist").tablesorter({ 

    // sort on the first column and third column, order asc 
        sortList: [[0,0],[2,0]] 
}); 
```

我的桌子看起来像这样

```
 first name      last name     phoneno  
--------------------------------------------
 Nitish          pakhare       4545454  
 Ashish          sharma        45454 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:53:47.733

`$("tlist")``$(".tlist")`如果它是一个类或者`$("#tlist")`它是一个 ID ，则它不是一个有效的选择器。

# php - 解析 xml 文件 - PHP - html 标签

> ID：10634255
> 
> 赞同：0
> 
> 时间：2012-05-17T10:46:48.793
> 
> 标签：php, xml-parsing, html

### **已解决**：我使用 nl2br 来达到我的目标。

我使用 SofeeXmlParser 解析 xml 文件。除其他外，该文件还包括说明。我需要在新行的描述中添加一些句子。是否可以？

这种描述的输出看起来：

```
(
    [value] =>  
TEXT TEXT TEXT TEXT TEXT 

Text text text, text text text text text text.   

 Text text text, text text text text text text.  Text text text, text text text     

 Text text text, text text text text text text.    Text text text, text text text text text text.    Text text text, text text text text text text.   

 TEXT TEXT TEXT.     
  ) 
```

我将 xml 文件的输出放入 mysql，然后我想在我的网站上显示它，但我想在新行中有一些句子，就像在这个输出中一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:06:20.483

使用`nl2br()`php 函数放置`<br />`每个新行出现

[nl2br php函数](http://php.net/manual/en/function.nl2br.php)

例子：

```
echo nl2br($arrayData['value']);
// this will replace all the new line character with <br /> 
```

# c# - 使用方法参数作为泛型类型参数

> ID：10634260
> 
> 赞同：2
> 
> 时间：2012-05-17T10:47:19.247
> 
> 标签：c#, linq, generics, expression

我有一个包含搜索参数的类（SearchParameters），然后我使用一个名为 Querybuilder 的通用类基于这些创建一个 linq 查询。这将返回结果并且一切正常。

结果显示在 GridView 中，我目前正在为 gridivew 实现自定义排序，我将要搜索的字段添加到 SearchParameters 对象（使用流畅的界面）

```
SearchParameters=SearchParameters.SortResultsBy(e.SortExpression,e.NewSortOrder.ToString()); 
```

我需要将列的数据类型用作我的 AddOrderByClause() 方法的通用参数：

```
 public void AddOrderByClause<D>(string field, Type sourceDateType)
    {
        var orderExpression = Expression.Lambda<Func<T, D>>(Expression.Property(resultExpression, field), resultExpression);

        rootExpression = Expression.Call(
              typeof(Queryable),
              "OrderBy",
              new Type[] { typeof(T), typeof(D) },
       rootExpression,
       orderExpression);

    } 
```

我可以很容易地找到列的数据类型，但是如何将它传递给`AddOrderByClause()`（通用参数 D）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:03:05.750

```
public void AddOrderByClause<D,E>(string field, E sourceDataType)
{
    .....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:03:25.810

使用反射获取方法*AddOrderByClause*，然后使用**MakeGenericMethod**获取泛型。这是一般的想法（有点模糊，因为我不知道你所有的类型都叫什么名字）。

```
Type MyTypeParameter;    // TODO set this to type parameter D
Type type;               // TODO set this to the type that contains the method "AddOrderByClause"
MethodInfo method = type.GetMethod("AddOrderByClause");
MethodInfo genericMethod = method.MakeGenericMethod(typeof(MyTypeParameter));
genericMethod.Invoke(MyClassInstance, FieldParam, SourceDataParam); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:17:16.800

> > 但是我如何将它传递给 AddOrderByClause() （通用参数 D）？

似乎您已经有了列的数据类型，并且您正在弄清楚如何将其传递给通用方法

下面是例子

首先修改 AddOrderByClause 以接受 T （稍后在您的函数中使用）

```
public void AddOrderByClause<D,T>(String field)
{
....
} 
```

然后像这样调用 AddOrderByClause

```
 var data = SearchParameter;// Use actual data if SearchParameter is not correct
 AddOrderByClause<D,date.GetType()>(fieldData);// assuming fieldData is something different 
 var data = SearchParameter;// Use actual data if SearchParameter is not currect 
```

# node.js - 无法将套接字作为对象存储在数组中

> ID：10634261
> 
> 赞同：0
> 
> 时间：2012-05-17T10:47:22.010
> 
> 标签：node.js, socket.io

我正在尝试将所有连接的套接字存储在一个数组中，如`

```
var basket = {};

io.sockets.on('connection', function (socket) {
  socket.on("register", function(user_profile) {
    basket[user_profile.id] = socket.id;
  });
 socket.on(SEND_INVITE,function(invitation_details){
         var to = basket[invitation_details.invitee];
          io.sockets.socket(to).emit(RECIEVE_INVITE,invitation_details);
    });
}); 
```

`

但我不知道代码有什么问题，只有最后加入的客户才被存储在篮子里。请帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T11:56:39.420

这就是我在我创建的项目中所做的。我使用用户名作为键，使用 socket.id 作为值。然后在客户端哈希中，我使用 socket.id 作为键，使用套接字作为值。这使我可以很容易地根据用户名向“有效”用户发送消息。

## 存储套接字细节，并发出消息

```
var validUsers = {};
var clients = {};

io.sockets.on('connection', function (socket)
{    
  var hs = socket.handshake;
  if(hs.session)
  {
    if(hs.session.username)
    {
        clients[socket.id] = socket; // add the client data to the hash
        validUsers[hs.session.username] = socket.id; // connected user with its socket.id
    }
  }
    ...

  clients[validUsers[username]].emit('move-story', data); 
} 
```

## 身份验证 + 获取会话

```
//Auth the user
io.set('authorization', function (data, accept) {
  // check if there's a cookie header
  if (data.headers.cookie) {
    data.cookie = parseCookie(data.headers.cookie);
    data.sessionID = data.cookie['express.sid'];

    //Save the session store to the data object
    data.sessionStore = sessionStore;

    sessionStore.get(data.sessionID, function(err, session){
      if(err) throw err;

      if(!session)
      {
        console.error("Error whilst authorizing websocket handshake");
        accept('Error', false);
      }
      else
      {
        console.log("AUTH USERNAME: " + session.username);
        if(session.username){
          data.session = new Session(data, session);
          accept(null, true);
        }else {
          accept('Invalid User', false);
        }
      }
    })
  } else {
    console.error("No cookie was found whilst authorizing websocket handshake");
    return accept('No cookie transmitted.', false);
  }
}); 
```

# java - 使用 Java Swing 在选项卡式窗口中显示的输出

> ID：10634265
> 
> 赞同：0
> 
> 时间：2012-05-17T10:47:35.783
> 
> 标签：java, swing

我在java中为linux开发了一个任务管理器。现在的输出显示在控制台中，而选项卡式窗口则单独出现（这是使用 java swing 完成的）。现在我希望控制台的输出显示在选项卡式窗口中。我该怎么做？我使用过一些课程。一个用于任务管理器功能，另一个用于 GUI。我已经在下面粘贴了一些人的编码来帮助我。

```
**TabbedPaneDemo1.java**

package components;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintStream;
import java.io.Writer;
import java.util.Iterator;
import java.util.List;

/*
 * TabbedPaneDemo.java requires one additional file:
 *   images/middle.gif.
 */

import javax.swing.JTabbedPane;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JFrame;
import javax.swing.JComponent;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.JTextField;
import javax.swing.JTextArea;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.TextArea;
import java.awt.event.KeyEvent;
import java.io.BufferedReader;
import java.io.FileOutputStream;
import java.io.InputStreamReader;
import java.io.PrintStream;

public class TabbedPaneDemo1
{

public static void main(String args[]) throws Exception
{
    try
    {   
        TextArea textarea = new TextArea();
        TabbedPaneDemo obj = new TabbedPaneDemo();
        obj.fn();
        String line;
        String result = "";
        FileOutputStream out;
        //FileOutputStream out; // declare a file output object
        PrintStream p;
        Process p1 = Runtime.getRuntime().exec("tasklist.exe");
        out = new FileOutputStream("myfile.txt");//write to a file//
        p = new PrintStream( out );
        BufferedReader input = new BufferedReader(new InputStreamReader(p1.getInputStream()));//read form a file//
        while ((line = input.readLine()) != null)
        {
            System.out.println(line);
            //textarea.append(line + "\n");
            result += line+"\n";
            p.println (line);
            //textarea.setVisible(true);    
        }
        //msgBox(result);
        p.close();
        input.close();   
    }
    catch(Exception e)
    {

    }
}
    public static void msgBox(String msg) {
    javax.swing.JOptionPane.showConfirmDialog((java.awt.Component)
    null, msg, "WindowsUtils",
    javax.swing.JOptionPane.DEFAULT_OPTION);
    }
}

**TabbedPaneDemo.java**

package components;

import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.KeyEvent;

import javax.swing.ImageIcon;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

import javax.swing.JTabbedPane;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JFrame;
import javax.swing.JComponent;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.JTextField;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.KeyEvent;

public class TabbedPaneDemo extends JPanel {
Integer i;
public TabbedPaneDemo() {
    super(new GridLayout(1, 1));

    JTabbedPane tabbedPane = new JTabbedPane();
    ImageIcon icon = createImageIcon("images");

    JComponent panel1 = makeTextPanel("tasklist");
    tabbedPane.addTab("tasks", icon, panel1,
            "ta");
    tabbedPane.setMnemonicAt(0, KeyEvent.VK_1);

    JComponent panel2 = makeTextPanel("windows");
    tabbedPane.addTab("wins", icon, panel2,
            "wi");
    tabbedPane.setMnemonicAt(1, KeyEvent.VK_2);

    add(tabbedPane);`enter code here`
        tabbedPane.setTabLayoutPolicy(JTabbedPane.SCROLL_TAB_LAYOUT);    
    }
    protected JComponent makeTextPanel(String text)
    {
        JPanel panel = new JPanel(false);
        JLabel filler = new JLabel(text);
        filler.setHorizontalAlignment(JLabel.CENTER);
        panel.setLayout(new GridLayout(1, 1));
        panel.add(filler);
        return panel;
    }
    protected static ImageIcon createImageIcon(String path) {
        java.net.URL imgURL = TabbedPaneDemo.class.getResource(path);
        if (imgURL != null) {
            return new ImageIcon(imgURL);
        } else {
            System.err.println("Couldn't find file: " + path);
            return null;
        }
    }
    private static void createAndShowGUI() {
        JFrame frame = new JFrame("TabbedPaneDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new TabbedPaneDemo(), BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }
    public static void fn() {
        SwingUtilities.invokeLater(new Runnable() {
            public void run()
            {
        UIManager.put("swing.boldMetal", Boolean.FALSE);
        createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:57:17.417

如果您使用 swing 创建一个[`JTabbedPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)，使用内容更新它的最简单方法可能是像这样向它添加一个 JTextArea ：

```
tab.add(textarea); 
```

然后`textarea`用你希望它显示的任何内容更新

```
textarea.setText(); // or append(); 
```

要通过流从控制台添加输入，请执行以下操作：

```
BufferedReader input = new BufferedReader(
    new InputStreamReader(consoleProcess.getInputStream()));

String text;

while ((text = input.readLine()) != null)
{
    textarea.append(text + "\n");
}
input.close(); 
```

# jax-rs - 如何在 Restful Jax-rs 中发送图像

> ID：10634275
> 
> 赞同：3
> 
> 时间：2012-05-17T10:48:36.947
> 
> 标签：jax-rs

我想从 Java 服务器（Restful Jax-rs）发送图像。我的客户是安卓。

```
@GET
public Response getUserImage() {
byte[] image =new byte[1024];
return Response.ok(image, MediaType.APPLICATION_OCTET_STREAM).header("content-attachment; filename=image_from_server.png") .build(); 
```

但是这里有一个下载框来了。所以我想在没有下载框的情况下下载，当我在浏览器上运行请求 URL 时，它应该会自动打开。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T15:58:41.913

我相信那是因为你指定了`application/octet-stream`.

我认为你应该使用`image/jpeg`or `image/png`。

```
@GET
@Produces({"image/png"})
public Response getUserImage() {

    final byte[] image = ...;
    // say your image is png?

    return Response.ok().entity(new StreamingOutput(){
        @Override
        public void write(OutputStream output)
           throws IOException, WebApplicationException {
           output.write(image);
           output.flush();
        }
    }).build();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T09:20:46.033

您可以使用 base 64 编码对图像进行编码，将 base 64 编码字符串包装在 xml 或 json 中，然后将其发送出去。在其余客户端上提取 base 64 编码字符串并对其进行解码以获得最终图像。这也保留了所有文件元数据，但唯一的缺点是图像大小增加了 30%。我已经尝试过使用 Restlet rest api，我很确定它也可以通过 JAX-RS。

# php - php - 如何重定向到 100% 确保 REFERRAL 在重定向后被清除

> ID：10634277
> 
> 赞同：2
> 
> 时间：2012-05-17T10:48:42.120
> 
> 标签：php, redirect

如何重定向用户并确保 HTTP_REFERER 在到达名为 redirect.php 的页面后不会转移到下一页。

程序流程如下：

1) 在[http://example.com/index.php](http://example.com/index.php)页面上（包含指向 redirect.php 的链接）

2) 用户点击redirect.php的链接，它会发送header('Location: [http://otherlocation.com/index.php](http://otherlocation.com/index.php) ');

3）我需要防止 otherlocation.com 从看到 HTTP_REFERER`http://example.com/index.php`

我试过了：

```
 header('Location:redirect.php'); 
```

这不起作用，因为 HTTP_REFERER 填充了第一页 ( [http://example.com/index.php](http://example.com/index.php) ) 中的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:58:31.783

根据浏览器填写 HTTP_REFERER，而不是服务器端

您可以尝试通过重定向用户

```
<meta http-equiv="refresh" content="2;url=http://otherlocation.com/index.php" />
<script>document.location = 'http://otherlocation.com/index.php';</script> 
```

浏览器此时未填写 HTTP_REFERER（恕我直言）

在Firefox这不起作用:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:49:43.497

使用 PHP 重定向向浏览器发送标头请求。试试这个。

```
header('Location:redirect.php',true,302);
exit; 
```

上面的代码会将`HTTP_REFERRER`跟踪设置为当前页面。因此从上一页删除跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:54:34.237

您可以使用

```
header("Location:redirect.php"); 
```

或者如果你想要一些延迟或倒计时，你可以使用。

```
// 5 is the seconds of the delay to go to the page you've entered.

header("refresh: 5; redirect.php"; 
```

# python - 获取不在括号内的 Wikipedia 文章中的第一个链接

> ID：10634278
> 
> 赞同：7
> 
> 时间：2012-05-17T10:48:56.833
> 
> 标签：python, parsing, dom

所以我对[这个理论](http://funnycrave.com/the-wikipedia-philosophy-game/22651/)很感兴趣，如果你去一个随机的维基百科文章，重复点击不在括号内的第一个链接，在 95% 的情况下，你最终会看到关于[哲学](http://en.wikipedia.org/wiki/Philosophy)的文章。

我想用 Python 编写一个脚本，为我获取链接，最后打印一个很好的列表，列出访问过的文章（`linkA -> linkB -> linkC`）等。

我设法获得了网页的 HTML DOM，并设法去掉了一些不必要的链接和导致消歧页面的顶部描述栏。到目前为止，我得出的结论是：

*   DOM 以您在某些页面右侧看到的表格开始，例如[Human](http://en.wikipedia.org/wiki/Human)中。我们想忽略这些链接。
*   有效的链接元素都有一个`<p>`元素作为它们的祖先（通常是父或祖父，如果它在一个`<b>`。通向消歧页面的顶部栏似乎不包含任何`<p>`元素。
*   无效链接包含一些特殊的单词，后跟一个冒号，例如`Wikipedia:`

到目前为止，一切都很好。但正是括号吸引了我。在文章中关于[人类](http://en.wikipedia.org/wiki/Human)的文章中，不在括号内的第一个链接是“/wiki/Species”，但脚本会在其中找到“/wiki/Taxonomy”。

我不知道如何以编程方式进行此操作，因为我必须在父/子节点的某种组合中查找可能并不总是相同的文本。有任何想法吗？

我的代码可以在下面看到，但这是我很快就编出来的东西，而且我并不十分自豪。然而，它被评论了，所以你可以看到我的想法（我希望:)）。

```
"""Wikipedia fun"""
import urllib2
from xml.dom.minidom import parseString
import time

def validWikiArticleLinkString(href):
    """ Takes a string and returns True if it contains the substring
        '/wiki/' in the beginning and does not contain any of the
        "special" wiki pages. 
    """
    return (href.find("/wiki/") == 0
            and href.find("(disambiguation)") == -1 
            and href.find("File:") == -1 
            and href.find("Wikipedia:") == -1
            and href.find("Portal:") == -1
            and href.find("Special:") == -1
            and href.find("Help:") == -1
            and href.find("Template_talk:") == -1
            and href.find("Template:") == -1
            and href.find("Talk:") == -1
            and href.find("Category:") == -1
            and href.find("Bibcode") == -1
            and href.find("Main_Page") == -1)

if __name__ == "__main__":
    visited = []    # a list of visited links. used to avoid getting into loops

    opener = urllib2.build_opener()
    opener.addheaders = [('User-agent', 'Mozilla/5.0')] # need headers for the api

    currentPage = "Human"  # the page to start with

    while True:
        infile = opener.open('http://en.wikipedia.org/w/index.php?title=%s&printable=yes' % currentPage)
        html = infile.read()    # retrieve the contents of the wiki page we are at

        htmlDOM = parseString(html) # get the DOM of the parsed HTML
        aTags = htmlDOM.getElementsByTagName("a")   # find all <a> tags

        for tag in aTags:
            if "href" in tag.attributes.keys():         # see if we have the href attribute in the tag
                href = tag.attributes["href"].value     # get the value of the href attribute
                if validWikiArticleLinkString(href):                             # if we have one of the link types we are looking for

                    # Now come the tricky parts. We want to look for links in the main content area only,
                    # and we want the first link not in parentheses.

                    # assume the link is valid.
                    invalid = False            

                    # tables which appear to the right on the site appear first in the DOM, so we need to make sure
                    # we are not looking at a <a> tag somewhere inside a <table>.
                    pn = tag.parentNode                     
                    while pn is not None:
                        if str(pn).find("table at") >= 0:
                            invalid = True
                            break
                        else:
                            pn = pn.parentNode 

                    if invalid:     # go to next link
                        continue               

                    # Next we look at the descriptive texts above the article, if any; e.g
                    # This article is about .... or For other uses, see ... (disambiguation).
                    # These kinds of links will lead into loops so we classify them as invalid.

                    # We notice that this text does not appear to be inside a <p> block, so
                    # we dismiss <a> tags which aren't inside any <p>.
                    pnode = tag.parentNode
                    while pnode is not None:
                        if str(pnode).find("p at") >= 0:
                            break
                        pnode = pnode.parentNode
                    # If we have reached the root node, which has parentNode None, we classify the
                    # link as invalid.
                    if pnode is None:
                        invalid = True

                    if invalid:
                        continue

                    ######  this is where I got stuck:
                    # now we need to look if the link is inside parentheses. below is some junk

#                    for elem in tag.parentNode.childNodes:
#                        while elem.firstChild is not None:
#                            elem = elem.firstChid
#                        print elem.nodeValue

                    print href      # this will be the next link
                    newLink = href[6:]  # except for the /wiki/ part
                    break

        # if we have been to this link before, break the loop
        if newLink in visited:
            print "Stuck in loop."
            break
        # or if we have reached Philosophy
        elif newLink == "Philosophy":
            print "Ended up in Philosophy."
            break
        else:
            visited.append(currentPage)     # mark this currentPage as visited
            currentPage = newLink           # make the the currentPage we found the new page to fetch
            time.sleep(5)                   # sleep some to see results as debug 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:04:17.063

[我在 Github ( http://github.com/JensTimmerman/scripts/blob/master/philosophy.py](http://github.com/JensTimmerman/scripts/blob/master/philosophy.py) )上找到了一个 python 脚本来玩这个游戏。它使用 Beautifulsoup 进行 HTML 解析并解决括号问题，他只是在解析链接之前删除括号之间的文本。

# internet-explorer - 在 extjs 中，当拖放“offsetWidth”为空或不是 IE7 的对象错误时

> ID：10634282
> 
> 赞同：1
> 
> 时间：2012-05-17T10:49:15.027
> 
> 标签：internet-explorer, extjs, drag-and-drop, extjs4.1

我正在拖放到面板，它在 IE8、Chrome 和 Firefox 中运行良好，但对于 Ie7，我收到此错误 - “'offsetWidth' 为空或不是对象”

当我调试它指向以下代码时，

```
 getLocation: function (i) {
        if (!this.isTypeOfDD(i))
        { return null }
        if (i.getRegion)
        { return i.getRegion() }
        var g = i.getEl(), m, d, c, o, n, p, a, k, h;
        try { m = Ext.Element.getXY(g) }
        catch (j) { }
        if (!m) { return null }
        d = m[0];
        c = d + g.offsetWidth;
        o = m[1];
        n = o + g.offsetHeight;
        p = o - i.padding[0];
        a = c + i.padding[1];
        k = n + i.padding[2];
        h = d - i.padding[3];
        return new Ext.util.Region(p, a, k, h)
    } 
```

特别是 g.offsetWidth，其中 g 也是未定义的，并且 i 的类型为“Ext.dd.DropZone”，它有时只出现。我正在尝试解决它。同时，如果有人有一些线索，请与我分享。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:52:46.950

我通过添加条件检查解决了这个问题。到目前为止它工作正常。

```
getLocation: function (i) {
    if (!this.isTypeOfDD(i))
    { return null }
    if (i.getRegion)
    { return i.getRegion() }
    var g = i.getEl(), m, d, c, o, n, p, a, k, h;
    if(g!=null){
    try { m = Ext.Element.getXY(g) }
    catch (j) { }
    if (!m) { return null }
    d = m[0];
    c = d + g.offsetWidth;
    o = m[1];
    n = o + g.offsetHeight;
    p = o - i.padding[0];
    a = c + i.padding[1];
    k = n + i.padding[2];
    h = d - i.padding[3];       
    return new Ext.util.Region(p, a, k, h)
    }
} 
```

# backbone.js - 如何触发fetch方法以及如何设置url

> ID：10634283
> 
> 赞同：1
> 
> 时间：2012-05-17T10:49:21.803
> 
> 标签：backbone.js

我正在根据@20100 对这个问题的回答重新设计我的主干应用程序[The best way to fetch and render a collection for a given object_id](https://stackoverflow.com/questions/10632527/the-best-way-to-fetch-and-render-a-collection-for-a-given-object-id/10632912#comment13783029_10632912)。

请阅读对代码的评论，因为我认为更清楚，而且我的问题在较小的尺寸下看起来更好。

* * *

```
// My View
define([
    "js/collections/myCollection",
    "js/models/myFeed"
], function (MyCollection, MyModel) {
    var MyView = Backbone.View.extend({

        tagName: 'ul',

        initialize: function () {
            this.collection = new MyCollection();
            this.collection.on('add', this.onAddOne, this);
            this.collection.on('reset', this.onAddAll, this);

            // when I make myView = new MyView(_.extend( {el:this.$("#myView")} , this.options));
            // myView.render is not called
            // in order to trigger the render function I make the following… but probably there is a better way … 
            var that = this;
            this.collection.fetch({
                success: function () {
                    that.render();
                }
            });

        }
    });

    return MyView;
}); 
```

* * *

```
// MyCollection
define([
    "js/models/myModel"
], function (MyModel) {

    var MyCollection = Backbone.MyCollection.extend({
        model: MyModel, // add this
        url: function () {
            var url = "http://localhost/movies";

            return url; 
           // if I look to the GET request the url is without idAttribute
           // how can I attach the idAttribute to this url?
           // should bb takes care of this?

        }
    });

    return MyCollection;
}); 
```

* * *

```
//MyModel
define([
], function () {

    var MyModel = Backbone.MyModel.extend({
        idAttribute: 'object_id'
    });

    return MyModel
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:16:36.287

有两条路你想探索

**使用您的模型数据预填充您的集合**

在您的示例中，您已经在执行此操作，但是您正在获取一个集合，集合 URL 是`http://localhost/movies`，如果您想要一个单独的模型，请查看下一点

**仅在需要时获取每个单独的模型**

假设您尝试在未预填充的集合上获取 ID 并且一次加载 1 个模型，您将不得不通过向您的集合添加一个方法来以自定义方式解决这个问题与此类似

```
getOrFetch: function(id, options) 
{
    var model;
    if (this.get(id)) 
    {
        model = this.get(id);
    } 
    else 
    {
      model = new this.model({
        id: id
      });
      this.add(model);
      model.fetch(options);
    }
    return model;
} 
```

或添加该功能，`Backbone.Collection.prototype.getOrFetch`以便您可以在需要时在每个 Backbone Collection 上使用它。

# jquery - 如何在窗口加载功能上在jquery中对图像进行连续动画移动

> ID：10634284
> 
> 赞同：0
> 
> 时间：2012-05-17T10:49:25.087
> 
> 标签：jquery, jquery-animate

我看过这个[网站](http://www.logartis.info/site2011/.)今天

实际上它是内置在闪存中的。但是我想在 jQuery 中移动上述闪存中的树，将其固定在我的页面中的固定位置，或者在 jquery 中移动浏览器中的鸟。可以做到吗？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:55:39.947

```
 <script type="text/javascript">
    $(document).ready(function(){
        $('#banner li:first-child').nextAll('li').hide();   
    /*  $('#banner li:gt(0)').hide();*/
        setInterval(function(){
        $('#banner li:first-child').fadeOut(3000).next('li').fadeIn(3000).end().appendTo('#banner');
        }, 3000);
    });
    </script>

    <style>
    ul#banner {
        padding:0px;
        margin:0px;
        background:#fff;
        position:absolute;
        top:97px;
        left:185px;
    }
    ul#banner li {
        list-style:none;
        font-family:Arial, Helvetica, sans-serif;
        background:#fff;
        display:block;
        position:absolute;
        left:0;
        top:0;
        width:980px;
        height:451px;
    }
    ul#banner li h1 {
        position:absolute;
        top:20px;
        left:435px;
        font-weight:normal;
        z-index:1;
    }
    .relative {
        position:relative;
    }

    </style>
<body>
    <ul id="banner">
            <li>&nbsp;</li>
            <li><img src="pic2.jpg" alt="" /></li>
            <li>
              <h1>Willkommen...</h1>
              <img src="pic3.jpg" alt="" /></li>
            <li>
              <h1>Willkommen...</h1>
            </li>
            <li>&nbsp;</li>
            <li>
              <h1>...in einer neuen Sphare!</h1>
              <img src="pic6.jpg" alt="" /></li>
          </ul>
    </body> 
```

# visual-studio-2010 - Office PIA Visual Studio 2010 参考资料

> ID：10634291
> 
> 赞同：2
> 
> 时间：2012-05-17T10:49:52.217
> 
> 标签：visual-studio-2010, reference, ms-office

当我在项目文件 XML 中从 Visual Studio 引用任何 Office 12 PIA 时，引用指向 Office 14，尽管当您在 Visual Studio 中查看引用的属性时，它声称路径是 Office 12 PIA，如下面的 XML 和屏幕截图中的“HintPath”。

有人可以解释这种行为吗？这是绑定重定向吗？

我猜这是因为我在 GAC 中有 Office 14 PIA，所以 Visual Studio 使用了最新版本的程序集。保持引用不变并将应用程序部署到没有 Office 14 PIA 的目标计算机有什么影响？应用程序会使用 Office 12 PIA 吗？

如果我的目标是 Office 12 环境并且应用程序自动重定向到 Office 14，我是否应该担心在使用 Office 14 PIA 时代码将停止运行？

```
<Reference Include="Microsoft.Office.Interop.Excel, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <EmbedInteropTypes>True</EmbedInteropTypes>
  <HintPath>..\..\..\..\Program Files\Microsoft Visual Studio 10.0\Visual Studio Tools for Office\PIA\Office12\Microsoft.Office.Interop.Excel.dll</HintPath>
</Reference> 
```

![PIA 参考](../Images/8fcbfe488622b04192371b941a1c0fa0.png)

[http://msdn.microsoft.com/en-us/library/15s06t57.aspx](http://msdn.microsoft.com/en-us/library/15s06t57.aspx)

[http://msdn.microsoft.com/en-us/library/2fc472t2(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/2fc472t2(v=vs.80).aspx)

> 在全局程序集缓存中安装和注册 Office PIA（使用 Office 或通过安装 PIA 的可再发行包）时，绑定重定向程序集也仅安装​​在全局程序集缓存中。这些程序集有助于确保在运行时加载正确版本的主互操作程序集。例如，当引用 2007 Microsoft Office 主互操作程序集的解决方案在具有相同主互操作程序集的 Microsoft Office 2010 版本的计算机上运行时，绑定重定向程序集指示 .NET Framework 运行时加载 Microsoft Office 2010 版本的主要互操作程序集。

# asp.net - 在 ASP.Net MVC 应用程序中组合图像？

> ID：10634293
> 
> 赞同：0
> 
> 时间：2012-05-17T10:50:22.343
> 
> 标签：asp.net, asp.net-mvc, image

我们需要从一系列现有的 jpg 中创建一个 jpg 图像。用户可以使用 JQuery 在我们的应用程序前端选择一系列部件。然后我们需要获取所有部分并将它们展平以创建单个图像。

所有部分都将存在于图像目录中。例如，第 1 部分是覆盖所有其他部分的基础图像。然后我们可以选择第 8 部分 - 将始终出现在基础图像顶部的某个点。然后我们可以选择第 15 部分，它也将出现在某个点。除了基本图像之外，任何部分都不能与任何其他部分相交。

关于如何实现这一目标的任何建议？任何可以提供帮助的好的 Nuget 包等

谢谢

格雷姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:01:39.617

这一切都在`System.Drawing`命名空间中为您服务。

首先创建一个要绘制的[位图。](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)从该位图创建一个[图形](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.fromimage.aspx)对象。 [加载](http://msdn.microsoft.com/en-us/library/system.drawing.image.fromfile.aspx)每个图像。然后使用[DrawImage](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.drawimage)将每一个绘制到目标上。使用[Save](http://msdn.microsoft.com/en-us/library/9t4syfhh.aspx)方法完成。

# c# - 组合框更新问题

> ID：10634297
> 
> 赞同：0
> 
> 时间：2012-05-17T10:50:41.047
> 
> 标签：c#

## 更新

我有一个应用程序，它根据从另一个组合框中选择的值更新组合框。例如，状态组合框列表将根据从“国家”组合框中选择的国家来填充。状态组合框的数据源是基于 MySQL 的数据集数据库。问题是，如果首先选择一个国家，状态组合框加载正常，但如果我选择另一个国家，状态组合框填充：

```
 System.Data.DataViewManagerListItemTypeDescriptor 
```

我研究并发现问题与我无法更新组合框的数据源有关，但我必须这样做，因为值存储在不同的表中，并且需要不同的查询。那么，我怎样才能清除数据源/解决这个问题呢？

我已经更新了帖子以在下面添加我的代码（首先是第一个组合框的代码，它根据此处选择的值填充下一个组合框：

```
 private void cboDisp1_SelectedIndexChanged(object sender, EventArgs e)
    {

        cboProd1.Enabled = false;
        cboProd1.Invalidate();
        string dispensation1;
        dispensation1 = cboDisp1.SelectedValue.ToString();
        if (dispensation1 == "1")
        {

        }
        else
        { cboProd1.Enabled = true;
        LoadDispensationCode(dispensation1,"1");
         }
    } 
```

此代码显示了填充第二个组合框的部分方法：

```
 private void LoadDispensationCode(string text_id,string line_no)
    {
        string txt_id=text_id;
        string ln_no=line_no;
        //MessageBox.Show(txt_id, "Value");
        txt_id = text_id;
        if (txt_id == "1")
        { }
        if
            (txt_id == "2")
        { LoadConsultation("1","1"); }
        if(txt_id=="3")
        {
            LoadDrug(ln_no);
            }....... 
```

此代码显示了根据对 MySQL 数据库的查询填充数据集并加载组合框的方法。

```
 private void LoadDrug(string line_no)
    {  
        string ln_no;
        ln_no = line_no;
        //MessageBox.Show(ln_no,"value of text");
        if (ln_no =="1")
        {
         try
            {
                MySqlConnection connection = HopeDB.GetConnection();
                String selectStatement = "Select id,code from drugs order by id";
                MySqlCommand command = new MySqlCommand(selectStatement, connection);
                MySqlDataAdapter adapter = new MySqlDataAdapter();
                DataSet ds = new DataSet();
                adapter.SelectCommand = command;
                adapter.Fill(ds, "drugs");
                adapter.TableMappings.Add("Table", "drugs");

                   cboProd1.DisplayMember = "drugs.code";
                cboProd1.ValueMember = "drugs.id";
                cboProd1.DataSource = ds;
                connection.Close();

            }
            catch (Exception ex)
            { MessageBox.Show(ex.Message, ex.GetType().ToString()); }

        } 

    } 
```

此代码是生成另一个数据集的另一种方法。

```
 private void LoadVaccine(string line_no)
    {

        string ln_no = line_no;
        if (ln_no == "1")
        {

            try
            {
                MySqlConnection connection = HopeDB.GetConnection();
                String selectStatement = "Select id,code from vaccines order by id";
                MySqlCommand command = new MySqlCommand(selectStatement, connection);
                MySqlDataAdapter adapter = new MySqlDataAdapter();
                DataSet ds = new DataSet();
                adapter.SelectCommand = command;
                adapter.Fill(ds, "vaccines");
                adapter.TableMappings.Add("Table", "vaccines");

                cboProd1.DisplayMember = "vaccines.code";
                cboProd1.ValueMember = "vaccines.id";
                cboProd1.DataSource = ds;
                //cboStateIDFNo.Enabled =false;
                //cboVisitType.Enabled =false;
                //cboStatus.Enabled = false;
                connection.Close();
            }
            catch (Exception ex)
            { MessageBox.Show(ex.Message, ex.GetType().ToString()); }
        } 
    } 
```

如前所述，当第一个组合框发生更改并调用另一种方法时，我需要使用来自不同数据集的新数据更新组合框的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:11:27.690

我认为您不能将`ComboBox`s 绑定到数据集，因为您无法指定 DataMember。在这种情况下，您应该将 ComboBox.DataSource 设置为有问题的数据表，然后设置显示/值成员：

```
cboProd1.DataSource = ds.Tables["drugs"];
cboProd1.DisplayMember = "code";
cboProd1.ValueMember = "id"; 
```

试试看，让我们知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:00:52.203

取决于您如何更新组合框数据源。

```
CountryComboBox_SelectedIndexChanged(...)
{
    string[] states = GetStates(CountryComboBox.SelectedItem.ToString());
    StateComboBox.DataSource = states;
} 
```

这应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:04:09.963

我会避免直接将您的组合框绑定到此处的数据集，而是创建一个小的额外处理层，只是为了检查您的 UI。

**伪代码如下：**

所以而不是

```
//bind directly to dataset/query
comboBox.DataSource = dsCountries; 
```

就像是

```
 public void Load()
    {
        //set up combobox, bind to countries
        ComboBox comboBox = new ComboBox();
        comboBox.DataSource = GetCountries(ds);
        comboBox.DisplayMember = "Name";

        //when comboBox selection changed, load countries based on selected object
        comboBox.SelectedIndexChanged += (o, s) =>
        {
            var countrySelected = (Country)comboBox.SelectedItem;

            //populate countries based on selection
        };
    }

    /// <summary>
    /// Build a list of countries, based upon the rows in a resulting dataset
    /// </summary>
    /// <param name="set"></param>
    /// <returns></returns>
    public List<Country> GetCountries(DataSet set)
    {
        List<Country> result = new List<Country>();

        foreach (DataRow row in set.Tables[0].Rows)
        {
            result.Add(new Country()
            {
                ID = (int)row.ItemArray[0],
                Name = (string)row.ItemArray[1]
            });
        }

        return result;
    } 
```

# php - php注册mysql不是一个有效的资源

> ID：10634298
> 
> 赞同：0
> 
> 时间：2012-05-17T10:50:51.417
> 
> 标签：php, mysql, transactions

好的帮助..我的注册页面在本地服务器上工作，但现在说两条mysql行在其在线时无效..为什么它在上线时会改变？粘贴的代码都是相关的。出于某种原因，它不喜欢交易..和电子邮件检查 mysql 位

```
include 'Connect.php'; //Connects to database
//When form is submit:-
if(isset($_POST['submit']))
{         
                        // On submit, retrieve table values for php.                 
                        $Firstname = mysql_real_escape_string($_POST['firstname']);
                        $Surname = mysql_real_escape_string($_POST['surname']);
                        $Password = mysql_real_escape_string($_POST['password']); 
                        $PasswordCheck = mysql_real_escape_string($_POST['passwordcheck']); 
                        $Email = mysql_real_escape_string($_POST['email']); 
                        $EmailCheck = mysql_real_escape_string($_POST['emailcheck']); 

                    //CHECKS. 
                    //Check username is available by retrieving any same values from the DB table.          
                    $CheckEmailAvailable = mysql_query("SELECT * FROM 'user_details' WHERE Email = '$Email'");
                    echo $CheckEmailAvailable;
                    // $result = mysql_query("SELECT * FROM $tbl WHERE Email='$email' and LoginPassword='$password'");
                    $Results = mysql_fetch_array($CheckEmailAvailable);

                    //If Username field is blank.
                    if($Email == null )
                    {               
                        echo "You must enter an email address.";
                        $url = htmlspecialchars($_SERVER['HTTP_REFERER']);
                        echo "<br/><br/>";
                        echo "<a href='$url'>Click Here To Return</a>";
                        die();                      
                    }

                    //If RESULTS is any value other than NULL, die.
                    if($Results != null )
                    {               
                        echo "Email already taken. Please try another.";
                        $url = htmlspecialchars($_SERVER['HTTP_REFERER']);
                        echo "<br/><br/>";
                        echo "<a href='$url'>Click Here To Return</a>";
                        die();                  
                    }

                    //If Password and PasswordCheck fields in reg do not match, die.
                    if($Password != $PasswordCheck) 
                    {
                        echo "The passwords you have entered do not match. Please try again.";
                        $url = htmlspecialchars($_SERVER['HTTP_REFERER']);
                        echo "<br/><br/>";
                        echo "<a href='$url'>Click Here To Return</a>";
                        die();
                    }

                    //If Password field is NULL (i.e. blank) die.
                    if($Password == Null)
                    {
                        echo "Your password must not be blank.";
                        $url = htmlspecialchars($_SERVER['HTTP_REFERER']);
                        echo "<br/><br/>";
                        echo "<a href='$url'>Click Here To Return</a>";
                        die();
                    }

                    //If Email and EmailCheck are not equal, die.
                    if($Email != $EmailCheck)
                    {                                                                        
                        echo "The email addresses you have entered do not match. Please try again.";
                        $url = htmlspecialchars($_SERVER['HTTP_REFERER']);
                        echo "<br/><br/>";
                        echo "<a href='$url'>Click Here To Return</a>";
                        die();

                    }

                    //ELSE add data to DB.
                    else
                    {
                    //BEGIN TRANS
                    mysql_query("BEGIN TRAN");

                    //TABLE ADD.
                    $sql=mysql_query("INSERT INTO `user_details` (`Firstname`, `Surname`, `Email`, `Password`) VALUES ('$Firstname', '$Surname', '$Email', '$Password')")
                    or mysql_query("ROLLBACK TRAN") . die(mysql_error("Error registering, the database may be down, please try again later."));

                    //COMMIT transaction, to ensure data is added properly.
                    mysql_query("COMMIT TRAN");
                    header( 'Location: RegSucc.php' ) ;
                    }   
                } ?>
              <html> 
            <!--Registration Form-->
            <form name="form1" method="post" style="margin-left: 28%" action="Register.php">
                <table width="100%" border="0" cellpadding="3" cellspacing="1">
                <tr>
                    <td colspan="3"><strong>Register Account</strong></td>
                </tr>
                <tr>
                    <td style="width: 83px">First Name:</td>
                    <td>:</td>
                    <td><input name="firstname" type="text"/></td>
                </tr>
                <tr>
                    <td style="width: 83px">Surname:</td>
                    <td>:</td>
                    <td><input name="surname" type="text"/></td>
                </tr>
                <tr>
                    <td style="width: 83px">Email Address:</td>
                    <td>:</td>
                    <td><input name="email" type="text"/></td>
                </tr>
                <tr>
                    <td style="width: 83px">Email Address Confirmation:</td>
                    <td>:</td>
                    <td><input name="emailcheck" type="text"/></td>
                </tr>
                <tr>
                    <td style="width: 83px">Password:</td>
                    <td>:</td>
                    <td><input name="password" type="password"/></td>
                </tr>
                <tr>
                    <td style="width: 83px">Verify Password:</td>
                    <td>:</td>
                    <td><input name="passwordcheck" type="password"/></td>
                </tr>
                <tr>
                    <td style="width: 83px">&nbsp;</td>
                    <td>&nbsp;</td>
                    <td><input type="submit" name="submit" value="Register"/></td>
                </tr>
                </table>
            </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:58:51.363

查询

```
SELECT * FROM 'user_details' WHERE Email = '$Email' 
```

是无效的。表示表名时，最好使用反引号，但使用引号是行不通的！

```
SELECT * FROM `user_details` WHERE Email = '$Email' 
```

在您的本地主机上，它可能被设置为使用引号。但是，这不是“应该”的方式，服务器的安装可能会有所不同。故事的寓意：不要走捷径或使用丑陋的代码。不要忘记反引号表名或列，不要使用 PHP 短标签等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:06:17.790

```
$sql=mysql_query("INSERT INTO `user_details` (`Firstname`, `Surname`, `Email`, `Password`) VALUES ('$Firstname', '$Surname', '$Email', '$Password')") 
```

应该

```
$sql=mysql_query("INSERT INTO user_details (Firstname, Surname, Email, Password) VALUES ('$Firstname', '$Surname', '$Email', '$Password')") 
```

还

```
SELECT * FROM 'user_details' WHERE Email = '$Email' 
```

应该

```
SELECT * FROM user_details WHERE Email = '$Email' 
```

就是这样...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:17:29.257

更改此行

```
$CheckEmailAvailable = mysql_query("SELECT * FROM 'user_details' WHERE Email = '$Email'"); 
```

到

```
$CheckEmailAvailable = mysql_query("SELECT * FROM user_details WHERE Email = '".$Email."'"); 
```

The problem is that when you moved to another server online (I can guess you were developing on Windows[which is case insensitive in MySQL], and your online server is Linux[case sensitive in MySQL]

If your string contains a variable to be evaluated and parsed, the use of single quotes around that variable name, within the double quote containing that string, is not so reliable most times. The best approach, (from personal experiences) is to do a concatenation.

# erlang - 如何在 Erlang 进程中保存状态？

> ID：10634299
> 
> 赞同：7
> 
> 时间：2012-05-17T10:50:56.040
> 
> 标签：erlang

我正在学习 Erlang，并试图弄清楚我如何能够并且应该在进程中保存状态。

例如，我正在尝试编写一个程序，它给出文件中的数字列表，告诉我该文件中是否出现数字。我的方法是使用两个过程

*   **缓存**将文件的内容读入一个集合，然后等待数字检查，然后回复它们是否出现在集合中。

    ```
    is_member_loop(Data_file) ->
        Numbers = read_numbers(Data_file),
        receive
            {From, Number} ->
                From ! {self(), lists:member(Number, Numbers)},
                is_member_loop(Data_file)
        end. 
    ```

*   **客户端**将数字发送到*缓存*并等待`true`or`false`响应。

    ```
    check_number(Number) ->
        NumbersPid ! {self(), Number},
        receive
            {NumbersPid, Is_member} ->
                Is_member
        end. 
    ```

这种方法显然是幼稚的，因为每个请求都会读取文件。然而，我在 Erlang 还很陌生，我不清楚在不同请求之间保持状态的首选方式是什么。

我应该使用流程字典吗？对于那种进程状态，我不知道有什么不同的机制吗？

## 更新

*正如user601836*所建议的，最明显的解决方案是将一组数字作为参数传递给`is_member_loop`而不是文件名。这似乎是 Erlang 中的一个常见习语，在精彩的在线书籍[Learn you some Erlang](http://learnyousomeerlang.com/more-on-multiprocessing#state-your-state)中有一个很好的例子。

但是，我认为，对于我想在我的过程中保留的更复杂的状态，这个问题仍然存在。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T12:10:36.183

简单的解决方案，您可以将`is_member_loop(Data_file)`数字列表而不是文件名传递给您的函数。

处理状态的最佳解决方案是使用 gen_server。要了解更多信息，您应该查看[记录](http://www.erlang.org/doc/reference_manual/records.html)和[gen_server 行为](http://www.erlang.org/doc/man/gen_server.html)（[这](http://spawnlink.com/articles/an-introduction-to-gen_server-erlybank/index.html)也可能有用）。

在实践中：

1) 从基于 gen_server 行为的模块 (yourmodule.erl) 开始 2) 在 gen_server 的 init 函数中读取文件并将其作为状态字段传递：

```
init([]) ->
    Numbers = read_numbers(Data_file),
{ok, #state{numbers=Numbers}}. 
```

3) 编写一个函数，用于触发对 gen_server 的调用

```
check_number(Number) ->
    gen_server:call(?MODULE, {check_number, Number}). 
```

4）编写代码以处理从您的函数触发的消息

```
handle_call({check_number, Number}, _From, #state{numbers=Numbers} = State) ->
    Reply = lists:member(Number, Numbers)},
{reply, Reply, State};

handle_call(_Request, _From, State) ->
    Reply = ok,
{reply, Reply, State}. 
```

5) 从 yourmodule.erl 函数导出`check_number`

```
-export([check_number/1]). 
```

关于第 4 点需要解释两点：

a) 我们使用模式匹配提取记录状态中的值

b) 如您所见，我离开了通用句柄调用，否则每当收到与 {check_number, Number} 不同的消息时，您的 gen_server 将由于错误的模式匹配而失败

注意：如果您是 erlang 新手，请不要使用进程字典

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:59:42.883

不确定这是多么地道，因为我还不是 Erlang 专业人士，但我会使用[ETS](http://www.erlang.org/doc/man/ets.html)来处理这个问题。基本上，

```
read_numbers_to_ets(DataFile) ->
    Table = ets:new(numbers, [ordered_set]),
    insert_numbers(Table, DataFile),
    Table.

insert_numbers(Table, DataFile) ->
    case read_next_number(DataFile) of
    eof -> ok;
    Num -> ets:insert(numbers, {Num})
    end. 
```

然后你可以定义你`is_member`的

```
is_member(TableId, Number) ->
    case ets:match(TableId, {Number}) of
    [] -> false; %% no match from ets
    [[]] -> true %% ets found the number you're looking for in that table
    end. 
```

而不是采用 a `Data_file`，您`is_member_loop`将采用表的 id 进行查找。

# photoshop-script - 如何使用 PS 脚本从 psd 文件中获取字体样式

> ID：10634302
> 
> 赞同：0
> 
> 时间：2012-05-17T10:51:03.007
> 
> 标签：photoshop-script

现在我想使用 Photoshop 脚本从 PSD 文件中获取字体样式，但我失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T17:12:56.237

字体样式是指斜体、粗体等吗？您可以使用以下方法提取字体名称：

```
for (var i = app.activeDocument.layers.length -1; i >= 0; i--)
{
  var tempLayer = app.activeDocument.artLayers[i]

  if (tempLayer.kind == 'LayerKind.TEXT')
  {
    var textContents = tempLayer.textItem.contents;
    var fontSize = tempLayer.textItem.size;
    var fontFace = tempLayer.textItem.font;
    alert (fontFace)
    -- will return something like Arial MT Bold
  }
} 
```

您可能还想查看这篇文章以及 [PS 文本内容](http://www.ps-scripts.com/bb/viewtopic.php?f=9&t=4660&sid=b2cf95f95ea6c877d73caef543e3346b)

# regex - 带有正则表达式的 Linux Commad Line Zip

> ID：10634303
> 
> 赞同：2
> 
> 时间：2012-05-17T10:51:03.527
> 
> 标签：regex, linux, command-line, zip

我有数千个 jpg 文件，它们都称为 1.jpg、2.jpg、3.jpg 等。我需要压缩它们的范围，我想我可以用正则表达式来做到这一点，但到目前为止还没有任何运气。

这是命令

```
 zip images.zip '[66895-105515]'.jpg 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T11:10:02.137

我非常确定不可能将这样的数字范围与正则表达式匹配（数字范围，是的，但不是整个多位数字），因为正则表达式在字符级别上工作。但是，您可以使用“seq”命令生成文件列表并使用“xargs”将它们传递给“zip”：

```
seq --format %g.jpg 66895 105515 | xargs zip images.zip 
```

我在 Linux 下用一堆虚拟文件测试了这个命令，它工作正常。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T11:02:49.553

与 ls 和 bash range ( `{m..n}`) 运算符一起使用，如下所示：

```
ls {66895..105515}".jpg" 2>/dev/null | zip jpegs -@ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T10:59:24.330

您需要管道一些东西 - 列出文件，按正则表达式过滤，压缩每个列出的文件。

```
ls | grep [66895-10551] | xargs zip images.zip 
```

编辑：哎呀，没有用多位数字进行测试。正如denisw 提到的，这种方法行不通。

# iphone - Xcode 说：“身份 ___ 不受信任。” 并且不允许我提交我的应用程序

> ID：10634304
> 
> 赞同：2
> 
> 时间：2012-05-17T10:51:04.917
> 
> 标签：iphone, ios, xcode, app-store-connect, xcode4.3

我一直在尝试向 iTunes 商店提交应用程序的噩梦……最新的大量时间浪费是当我尝试从“组织者”验证或分发我的档案时收到的错误消息。

确切的信息是： ![身份不受信任。 检查您是否已安装 WWDR 中间证书。](../Images/f86d3eda1831d181dc5d76b511113009.png)

我的 Xcode 是 4.3.2 版。我很确定我的 WWDR 已安装，因为这从来都不是问题。为了安全起见，我还尝试重新安装它。

最令人沮丧/困惑的部分是我两周前刚刚成功提交了我的应用程序，但没有任何改变。我的应用因元数据原因被拒绝。我解决了这些问题，重新安装了我的一个插件，现在这个。

有什么建议么？即使是指向一些有用文档的链接也会很棒。我发现 Apple 开发人员文档非常令人困惑且对联合国没有帮助。

**EDIT1：** 我想我可能已经更接近这个问题了。我更改了一些构建设置，现在我的构建失败并出现以下错误： `Code Sign error: Certificate identity 'iPhone Distribution: [my name]' appears more than once in the keychain. The codesign tool requires there only be one.`我想解决这个问题，但我不清楚应该在哪里设置哪个代码签名配置文件。根据我是单击“项目”图标还是“目标”图标，有不同的设置，其中每一个都有四个不同的选择。所有这些都需要代码签名吗？谁能给我一个工作配置的例子？

**EDIT2：** 我想我可能发现了问题。有一个小注释说我的分发配置文件没有配置门户。我一直在下载和安装新的 .mobileprovision 文件，但它们都说“开发者”。我想只需要弄清楚下载一个新的分发配置文件。

**解决方案：** 感谢 Saad 的一些指示（见下文），我发现了问题所在。我正在使用自动选择选项进行代码签名，并且唯一的分发配置文件具有无效的配置文件。这发生得非常安静，我不知道为什么。当我回到配置门户创建新的分发配置文件时，我才注意到它。安装后，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:52:11.233

您的配置文件设置不正确

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:58:05.347

> `Code Sign error: Certificate identity 'iPhone Distribution: [my name]' appears more than once in the keychain. The codesign tool requires there only be one.`

打开应用程序 > 实用程序 > 钥匙串访问并搜索您的分发证书。有时 Xcode Organizer 决定为您生成一个新证书并使您的旧证书无效，但不会将其从您的钥匙串中删除。删除过期/较旧的证书并退出/重新启动 Xcode（首先进行备份，以防万一，通过拖动到桌面或导出）。那至少应该可以解决您的部分问题。

至于配置文件，如果这仍然是个问题，我会手动进入 iOS 开发中心并为您的应用下载 App Store 分发配置文件，删除所有其他配置文件，直到您弄清楚这一点。在处理证书/配置文件时退出并重新启动 Xcode 是我一直必须做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:04:54.327

项目标识符和您的个人资料标识符必须匹配

# python - 在 Python 中的文件中存储 ascii 查找表

> ID：10634310
> 
> 赞同：1
> 
> 时间：2012-05-17T10:51:31.700
> 
> 标签：python, encoding, escaping, ascii

我现在有一个用 python 硬编码的查找表，看起来像：

```
 lookup = {
       "\x85": u'...', # ...
       "\x91": u"'",
       ...
   } 
```

我想将映射移动到外部文件以使其更易于管理，但无法找到存储 x 转义字符代码并将其读回的方法。我最终选择了 '\x85'与'\ x85'。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T10:55:17.003

如果您像这样格式化文件：

```
{
       "\x85": u'...',
       "\x91": u"'"
} 
```

然后您可以使用[`ast.literal_eval()`](http://docs.python.org/library/ast.html#ast.literal_eval)将查找表放入您的程序中：

```
In [10]: ast.literal_eval(open('lookup.txt').read())
Out[10]: {'\x85': u'...', '\x91': u"'"} 
```

如果您想使用自定义格式，您可以只存储键的十六进制 ASCII 代码（例如`85`，`91`等），并在阅读时转换它们：

```
In [17]: chr(int('91', 16))
Out[17]: '\x91' 
```

# ruby-on-rails - 为什么我在 Heroku 上迁移数据库时收到初始化的 Carrierwave 上传器错误

> ID：10634311
> 
> 赞同：1
> 
> 时间：2012-05-17T10:51:34.933
> 
> 标签：ruby-on-rails

我正在尝试将带有 Carrierwave 的 Rails 应用程序部署到 Heroku。

当我跑步时，`heroku run rake db:migrate --app myapp`我得到`rake aborted! uninitialized constant Activity::IconUploader`.

Activity 是一个模型，它包含

`mount_uploader :icon, IconUploader, :mount_on => :icon_file_name`

我有一个文件 app/uploaders/icon_uploader.rb 其中包含

```
class IconUploader < CarrierWave::Uploader::Base
  more or less default content
end 
```

我有 config/initializers/carrierwave.rb 它定义了在 Amazon S3 上存储文件的雾凭证并将缓存目录设置为 tmp 允许 Carrerwave 在 Heroku 上工作。

上传器在我的本地开发环境中完美运行。

为什么我在 Heroku 上收到此错误？

我可以采取哪些步骤来追踪源头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:19:03.953

我能想到的可能性：

1.  此文件未添加到您的 git 存储库（但在本地存在）
2.  您需要将以下代码添加到您的自动加载路径
3.  像这个问题（https://github.com/jnicklas/carrierwave/issues/399）

请注意，您不应该这样做：

**配置/应用程序.rb**

```
config.autoload_paths += %W(#{config.root}/app/uploaders) 
```

# java - java tomcat：java.lang.NullPointerException

> ID：10634312
> 
> 赞同：0
> 
> 时间：2012-05-17T10:51:36.037
> 
> 标签：java, jsp

您好，我有一个工作高效的 web 应用程序的开发版本，这让我很头疼。当我登录时，我收到以下错误，而 admin.jsp 正在尝试显示文件夹结构。

```
 org.apache.jasper.JasperException: Exception in JSP: /admin/admin.jsp:133

130:    GenDisplay display = null;
131:    if(null==oldDisplay || true==oldDisplay.checkIsOld()) {
132:        display = new GenDisplay(oldDisplay);
133:        display.genTree(((CompanySession)ppa).getRootOrdner(), ((CompanySession)ppa).getRootType(), user.getUID(), out);
134:        ((CompanySession)ppa).setGenDisplay(display);   
135:    } else {
136:        display = oldDisplay;

Stacktrace:
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:451)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:373)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:329)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)

root cause

java.lang.NullPointerException
    ppa.admin.GenDisplay.getKey(GenDisplay.java:185)
    ppa.admin.GenDisplay.isOpen(GenDisplay.java:161)
    ppa.admin.GenDisplay.genSubTree(GenDisplay.java:49)
    ppa.admin.GenDisplay.genSubTree(GenDisplay.java:57)
    ppa.admin.GenDisplay.genSubTree(GenDisplay.java:57)
    ppa.admin.GenDisplay.genSubTree(GenDisplay.java:57)
    ppa.admin.GenDisplay.genTree(GenDisplay.java:42)
    org.apache.jsp.admin.admin_jsp._jspService(admin_jsp.java:606)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:331)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:329)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729) 
```

这是第 606 行代码块附近的 admin_jsp.java 以生成错误：

```
GenDisplay oldDisplay = ((CompanySession)ppa).getGenDisplay();
    GenDisplay display = null;
    if(null==oldDisplay || true==oldDisplay.checkIsOld()) {
        display = new GenDisplay(oldDisplay);
        display.genTree(((CompanySession)ppa).getRootOrdner(), ((CompanySession)ppa).getRootType(), user.getUID(), out);
        ((CompanySession)ppa).setGenDisplay(display);   
    } else {
        display = oldDisplay;
    }
    //out.println(((CompanySession)ppa).getRootOrdner());
    //
    int currentOrdner = ((CompanySession)ppa).getRootOrdner();
    int currentOrdnerType = ((CompanySession)ppa).getRootType();
    if(null!=oldDisplay) {
    currentOrdner = oldDisplay.getCurrentOrdner();
    currentOrdnerType = oldDisplay.getCurrentOrdnerType();
    } else {
        display.openOrdner(((CompanySession)ppa).getRootOrdner(), ((CompanySession)ppa).getRootType());
} 
```

所以我排序传递给 display.genTree() 的变量之一是 null，这就是 NullPointerException 的原因。这个开发完全是从工作生产版本复制的，为什么在这里抛出错误而不是在生产版本上？我很困惑。有人有想法吗？提前致谢！

ps：我比较了java版、tomcat版、编译器版。我为两个 tomcat 重新建立了相同的设置。我比较了 mysql 服务器版本和设置。它们几乎是相同的版本和设置。与所涉及的软件没有主要版本差异。我尝试了较新版本的tomcat（6,7）并得到了不同的错误，所以这让我更加困惑。我真的需要帮助，因为我没有编写 webapp，而且我是 java 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:15:15.337

问题不在于生成的 servlet 代码。NPE 发生在 `ppa.admin.GenDisplay.getKey(GenDisplay.java:185`) 一个变量 (null) 被取消引用，因此您需要查看第 185 行中发生的情况并找出应该设置变量的位置。追溯这一点将显示开发和生产的差异（例如：环境变量或文件系统权限）。

# ms-access-2007 - 如何根据访问中的组合框更改使用数据库值填充文本框

> ID：10634313
> 
> 赞同：-1
> 
> 时间：2012-05-17T10:51:47.833
> 
> 标签：ms-access-2007

我是 Access 和 vb 的新手，我没有得到我想得到的结果，希望我能在你们的帮助下解决

->我的访问数据库包含一个表，其中包含以下字段 **名**姓氏**中间名**电话

我有两个组合框和两个文本框

1.  组合框 - 它填充名字并基于此选择，另一个组合框必须填充姓氏，我在 Me.Combo2.Requery 的帮助下成功完成了

但我不知道如何在文本框中填写中间和电话

在这里，我无法将记录集和连接字符串与我的表映射并将结果获取到文本框值，任何人都可以帮助解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:45:50.567

你还没有说连接字符串来自哪里或为什么。Access 的最大优势在于它快速且简单，在大多数情况下，您不需要连接字符串。

首先，选择您的表格，然后选择创建表格。这将创建一个绑定到表的*单个表单。*您可以先创建一个查询并选择它。

这就对了。您有一个显示数据的表单。关键是表单的属性表，您可以通过切换到设计视图并双击表单左上角的小方块来找到它，就在表单名称下方。属性表将在记录源属性下的数据选项卡上显示表或查询的名称。当然，您可以手动设置此属性。

![表单属性表](../Images/1b5daa2d47338fc164c545b82575378e.png)

您现在可以添加一个组合框来选择记录，但您不必这样做，表单底部有导航按钮。

要在表单上添加选择记录的组合框，您必须首先使用上述步骤将记录集绑定到表单。接下来，确保为工具箱选择向导。除非您取消选择它，否则它将被选中。现在从工具箱中选择组合框，它将打开向导。

![组合框向导](../Images/536a970440b03e67b85177aed3f55819.png)

选择在我的表单上查找记录，然后按下一步选择相关的 ID 字段/列以及您需要的任何其他字段。向导完成后，在 MS Access 2010（可能在 2007 年）中，它将添加一个嵌入式宏来查找您的记录，而在早期版本中，它将添加代码。向导设置的其他属性将如下所示：

```
Row Source : SELECT ID, Firstname, Lastname FROM Table1
Column Count : 3
Column Widths : 0cm;2.54cm;2.54cm 
```

您的表应该有一个 ID，如果没有，请在开始之前添加一个。选择此选项时，向导不会添加控件源，因为不需要它，实际上，将控件源添加到查找记录的组合中将是一场灾难。再次，您可以手动执行此操作。查找记录的代码可能类似于：

```
Private Sub MyCombo_AfterUpdate()
    With Me.Recordset
        .FindFirst "ID=" & Me.MyCombo
    End With
End Sub 
```

这是因为组合的绑定列设置为 1，即选择语句的第一个字段，即 ID。

该组合包括另外两个字段/列，您可以通过将文本框的控制源设置为：

```
= MyCombo.Column(2) ''Lastname 
```

从零开始计算列的位置：

```
Row Source : ID (0), Firstname (1), Lastname (2) 
```

级联组合完全是另一个故事，您可以在此处阅读[如何在 Access 2002 或 Access 2003 中同步表单上的两个组合框，](http://support.microsoft.com/kb/289670)以及[在此 Access Database 架构中填充下拉列表的简单方法吗？](https://stackoverflow.com/questions/927256/is-there-a-simple-way-of-populating-dropdown-in-this-access-database-schema/927588#927588)

# android - Adobe air 可以制作高级 Android 应用程序吗？

> ID：10634316
> 
> 赞同：0
> 
> 时间：2012-05-17T10:51:56.040
> 
> 标签：android, air, adobe

我需要开发具有大量滑动图形和 3d 动画的应用程序，以便以非常互动和花哨的方式显示代表产品的图片。

这是我正在尝试做的示例[http://www.youtube.com/watch?v=ZKCAPSzgoHM&feature=related](http://www.youtube.com/watch?v=ZKCAPSzgoHM&feature=related)

我听说 adobe air 可以完美地完成这项工作，是真的吗？应用当然不只是滑动，它会连接到服务器，同步一些数据，日志信息等等

那么，完成这项任务的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:57:03.757

简短的回答，是的，可以。是的，这是真的。

长答案，因为AIR3.2 stage3d被引入空中平台。现在 AIR（就像 flash 播放器一样）可以先于 gpu 渲染复杂的 3d 内容。Molehill 是 AS3 3d 框架的新代号，你肯定会在上面找到很多资料。

我建议您更多的是使用在 Molehill 之上构建的库/框架（这实际上只是一组具有低级样式语法的原语）。Flare3d、Starling（用于 2d）、Away3d（4.0 或更高版本）只是少数几个名称。使用这个库可以让您快速开发您的想法。您提到的所有其他任务（连接、日志、同步）在空中很容易完成。

现在选择 AIR 平台在 android 上进行移动开发的缺点。由于 3d 的引入是最近才推出的，因此很难准确地说出支持的设备以及简单回退到常见 3d 渲染系统的设备（即占用 cpu 的设备，因此对于移动设备来说不是一个好的选择）。如果您的目标是针对上一代设备，您会很好，并且您会发现 AIR + flash 平台工具在开发速度方面有很大的优势。

# c++ - 如何在派生视图类中实现 CView::OnUpdate

> ID：10634317
> 
> 赞同：0
> 
> 时间：2012-05-17T10:51:57.810
> 
> 标签：c++, mfc

第三个参数`OnUpdate`是指向的指针`CObject`。指针必须在实现它自己的视图类中向下转换`OnUpdate`。检查演员表是否成功的最佳方法是什么？使用`CObject::IsKindOf`或`dynamic_cast`？在 MFC 项目中使用 RTTI 可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:40:32.137

如果您使用向导创建了视图，那么它将在您的视图类的头文件中放置一个 DECLARE_DYNCREATE。如果您手动创建它，我会确保它在视图头文件的类定义中有一个 DECLARE_DYNCREATE（或者至少一个 DECLARE_DYNAMIC 或 DECLARE_SERIAL——DECLARE_SERIAL 对于视图类来说通常是多余的）。

然后，当您想要向下转换时，请使用 DYNAMIC_DOWNCAST 宏并在返回时测试非 NULL。

CView* pView = DYNAMIC_DOWNCAST(CView, pObject); // 是一种用法

不要听信不要使用 MFC 宏的建议，因为它不可移植……如果您正在编写 CView 派生类，它已经不可移植——除非您使用 Wind/U 之类的工具包，然后 DYNAMIC_DOWNCAST 将是便携。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:22:57.223

`CObject::IsKindOf()`仅当使用 , 或 ( 声明它们) 声明类`DECLARE_DYNAMIC`但 `DECLARE_DYNCREATE`不需要`DECLARE_SERIAL`RTTI`CView`支持时才有效。

虽然`dynamic_cast`与 RTTI 支持一起使用，但它包含一些开销并且可执行文件大小略有增加，[请检查此](https://stackoverflow.com/questions/5408106/rtti-overhead-in-c)..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:50:25.317

我在工作中使用 dynamic_cast 并且没有问题。检查转换成功非常简单：CDerivedView* pView = dynamic_cast(pViewObj); 如果（！pView）{断言（0）；返回; }

此外，我们尽量不使用 MFC 的宏，因为它们是不可移植的——例如 MFC 本身。我认为，好的程序不能几乎不依赖于它所使用的库。

# python - 'self' 隐式更改 Python 迭代中的先前数据项

> ID：10634321
> 
> 赞同：0
> 
> 时间：2012-05-17T10:52:27.513
> 
> 标签：python, iteration, self

我有一个关于在 Python中使用**self变量的问题。**请看下面的例子：

```
from copy import deepcopy
class IntClass:
    props = {}
    def __init__(self, keys, values):
        indx = 0
        for key in keys:
            self.props[key] = values[indx]
            indx += 1
def display(self):
    for key in self.props.keys():
        print 'key=%s value=%s' %(key,self.props[key])

class IntGen:
    def gen(self, keys, values):
        for vs in values:
            yield [keys, vs]

    def start(self, keys, values):
        self.loader = self.gen(keys, values)

    def nextItem(self):
        return self.loader.next()

keys = ['k1', 'k2', 'k3']
values = [['v1.1', 'v1.2', 'v1.3'], ['v2.1', 'v2.2', 'v2.3'], ['v3.1', 'v3.2', 'v3.3']]

holder = []
intGen = IntGen()
intGen.start(keys, values)
while True:
    try:
        a = intGen.nextItem()
        holder.append(deepcopy(IntClass(a[0],a[1])))
    except StopIteration:
        break

for h in holder:
    h.display() 
```

根据我的理解，结果应该是：

```
key=k3 value=v3.3
key=k2 value=v3.2
key=k1 value=v3.1
key=k3 value=v2.3
key=k2 value=v2.2
key=k1 value=v2.1
key=k3 value=v1.3
key=k2 value=v1.2
key=k1 value=v1.1 
```

但是，我得到如下：

```
key=k3 value=v3.3
key=k2 value=v3.2
key=k1 value=v3.1
key=k3 value=v3.3
key=k2 value=v3.2
key=k1 value=v3.1
key=k3 value=v3.3
key=k2 value=v3.2
key=k1 value=v3.1 
```

在我看来，在 While 循环中，当我尝试创建 IntClass 的新实例时，**该新实例已修改存储在前一个循环中创建的实例的 props 属性中的值**，最后导致持有者包含具有相同数据的所有实例。

任何人都可以指出我的答案吗？看起来**自**变量有问题，但我不知道如何修复它。

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:55:22.433

You put the line `props = {}` directly in the class definition. This will cause all instances of the class to share the same dictionary.

If you want each instance to have its own dictionary, put `self.props = {}` in `__init__` instead.

# javascript - 每次使用不同的 html

> ID：10634325
> 
> 赞同：0
> 
> 时间：2012-05-17T10:52:41.603
> 
> 标签：javascript, html

我有 3 个不同的 html 页面作为我的 index.html。我希望用户每次访问我的地址时都能看到不同的页面。所以每个 html 都可以看到相同的可能性。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:28:44.507

如果它们与（实际上是代码片段）位于同一目录中`indexOne.html`，则以下 PHP 代码片段将提供`indexTwo.html`或。`indexThree.html``index.php`

```
<?php

$pages = array( 'indexOne.html', 'indexTwo.html', 'indexThree.html' );
$page = $pages[ rand( 0, count( $pages ) - 1 ) ];
include $page;

?> 
```

但正如大卫所说，这样做可能不是一个好习惯。但是，您可以在 HTML 页面中包含该片段，例如每次只提供一个随机产品。如果您真的想要网站上的动态内容，那么为您的自定义内容使用数据库可能是个好主意。

# android - 如何在广告网络之间随机切换？

> ID：10634326
> 
> 赞同：0
> 
> 时间：2012-05-17T10:52:44.697
> 
> 标签：android

我有一个应用程序，我想添加一些公司的广告，例如tapjoy，inneractive...如何使它们随机更改？

UPD：我想展示一些广告公司的广告。例如，在屏幕 A 中它是 Tapjoy，在同一个屏幕中 10-15 分钟后它会转到 Moblicx，再过几分钟它将是 Leadbolt...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:59:02.343

使用[AdWhirl](https://www.adwhirl.com/)。[开发者资源](https://www.adwhirl.com/home/dev)中有与 Android 应用程序集成的说明。

# c# - 单列 DGV 接受剪贴板数据

> ID：10634327
> 
> 赞同：0
> 
> 时间：2012-05-17T10:52:46.117
> 
> 标签：c#, .net, winforms, datagridview

我已经设置了一个窗体。目前它有一个 DataGridView 链接到 SQL Server 数据库中的单个表。我可以浏览表中的当前数据。

如何进行设置，以便用户可以将 Excel 工作表中的单列数据复制并粘贴到 DGV 中？

如果在 Excel 中，我在 A1 中有“x”，在 A2 中有“y”，那么在粘贴到 DGV 时必须保留行数，即对于本示例，它仍将超过 2 行

我试图从[Code Project](http://www.codeproject.com/Articles/36850/DataGridView-Copy-and-Paste)改编以下内容。if 失败就行 if `(oCell.Value.ToString() != sCells[i])`with a `NullReferenceException was unhandled`What is I doing wrong? 我在做什么错？

```
 private void uxChargeBackDataGridView_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
    {
        PasteClipboard();
       //uxChargeBackDataGridView.Rows[e.RowIndex].Cells[e.ColumnIndex].Value = Clipboard.GetText();
    }

    private void PasteClipboard()
    {
        try
        {
            string s = Clipboard.GetText();
            string[] lines = s.Split('\n');
            int iFail = 0, iRow = uxChargeBackDataGridView.CurrentCell.RowIndex;
            int iCol = uxChargeBackDataGridView.CurrentCell.ColumnIndex;
            DataGridViewCell oCell;
            foreach (string line in lines)
            {
                if (iRow < uxChargeBackDataGridView.RowCount && line.Length > 0)
                {
                    string[] sCells = line.Split('\t');
                    for (int i = 0; i < sCells.GetLength(0); ++i)
                    {
                        if (iCol + i < this.uxChargeBackDataGridView.ColumnCount)
                        {
                            oCell = uxChargeBackDataGridView[iCol + i, iRow];
                            if (!oCell.ReadOnly)
                            {
                                if (oCell.Value.ToString() != sCells[i])
                                {
                                    oCell.Value = Convert.ChangeType(sCells[i],
                                                          oCell.ValueType);
                                    oCell.Style.BackColor = Color.Tomato;
                                }
                                else
                                    iFail++;
                                //only traps a fail if the data has changed 
                                //and you are pasting into a read only cell
                            }
                        }
                        else
                        { break; }
                    }
                    iRow++;
                }
                else
                { break; }
                if (iFail > 0)
                    MessageBox.Show(string.Format("{0} updates failed due" +
                                    " to read only column setting", iFail));
            }
        }
        catch (FormatException)
        {
            MessageBox.Show("The data you pasted is in the wrong format for the cell");
            return;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:01:36.387

非常简单，可以解决问题：

```
private void gridView_CellDoubleClick(object sender, DataGridViewCellEventArgs e) 
{
    gridView.Rows[e.RowIndex].Cells[e.ColumnIndex].Value = Clipboard.GetText();
} 
```

编辑*

如果您想粘贴到多个单元格而不是单个单元格，请查看此博客文章：

[http://happysoftware.blogspot.co.uk/2011/07/c-code-snippet-paste-to-datagridview.html](http://happysoftware.blogspot.co.uk/2011/07/c-code-snippet-paste-to-datagridview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:33:54.787

请参阅这些：[如何将数据从剪贴板粘贴（Ctrl+V、Shift+Ins）到 DataGridView（DataGridView1）C#](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/e9cee429-5f36-4073-85b4-d16c1708ee1e/) 并[复制并粘贴到 DataGridView 单元格（C#）](https://stackoverflow.com/questions/1527728/copy-and-paste-into-a-datagridview-cell-c)

```
private void form1_KeyUp(object sender, KeyEventArgs e)
{
    //if user clicked Shift+Ins or Ctrl+V (paste from clipboard)
    if ((e.Shift && e.KeyCode == Keys.Insert) || (e.Control && e.KeyCode == Keys.V))
    {
       /// your paste copy/paste code here
    }
} 
```

有很多参考 SO Thread 和关于此主题的另一篇文章遵循这些来实现您的任务.. [DataGridView 复制和粘贴](http://www.codeproject.com/Articles/36850/DataGridView-Copy-and-Paste)
[复制粘贴在 Datagridview 控件中](http://www.codeproject.com/Articles/208281/Copy-Paste-in-Datagridview-Control)
[DataGridView DataBound 复制、粘贴、拖动、拖放](http://jrwren.wrenfam.com/blog/2007/09/08/datagridview-databound-copy-paste-drag-drop/)
[行复制/粘贴功能在 DataGridview（Windows 应用程序）](https://stackoverflow.com/questions/2089689/row-copy-paste-functionality-in-datagridviewwindows-application)

[获取 DataGridView 中选定行的单元格内容](https://stackoverflow.com/questions/5746319/get-cell-contents-of-a-selected-row-in-a-datagridview)
[如何：获取 Windows 窗体 DataGridView 控件中选定的单元格、行和列](http://msdn.microsoft.com/en-us/library/x8x9zk5a.aspx)

希望这有帮助..

# javascript - 在 bash 脚本中使用 cURL 进行 Javascript 登录

> ID：10634330
> 
> 赞同：3
> 
> 时间：2012-05-17T10:52:56.427
> 
> 标签：javascript, bash, http, curl, libcurl

我正在尝试编写一个 bash 脚本，我需要在其中登录到一个使用 javascript 形式的网站。我从未使用过 cURL，因此将不胜感激。我知道我需要使用 cookie 并且我有 http 标头，但我不知道我需要用这些做什么。

标题是

```
Response Headers

Cache-Control   no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Content-Length  0
Content-Type    text/html;charset=UTF-8
Date    Thu, 17 May 2012 11:25:15 GMT
Expires Tue, 01 Jan 1980 00:00:00 GMT
Last-Modified   Thu, 17 May 2012 11:25:16 GMT
Pragma  no-cache
Server  Apache-Coyote/1.1
X-Powered-By    Servlet 2.4; JBoss-4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA  date=200807181417)/JBossWeb-2.0

Request Headers    
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Content-Type    application/x-www-form-urlencoded; charset=UTF-8
Cookie  SMLOGOUT=true; JSESSIONID=8D5757001A594D5CBB07C9250D1CB2B7; JSESSIONIDSSO=A0569CD1D6C981989F0FE691E9AFC314
Host    https:/example.com
Referer https://example.com
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0
X-WCF-Fragment  true 
```

任何帮助或指出我正确的方向将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:04:25.317

从请求标头可以很容易地看出您正在发送一些发布数据。但是你没有提供。我给你一个简单的例子，说明如何将 http 请求转换为 curl 命令。

假设您有这个请求，您在其中发布 2 个表单变量`var1`并`var2`发布到`http://www.example.com/form.url`. 请求看起来像这样，

```
POST /form.url HTTP/1.1
Host: www.example.com
Accept:  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding: gzip, deflate
Content-Type: application/x-www-form-urlencoded; charset=UTF-8

var1=val1&var2=val2 
```

当它转换成卷曲的样子时，

```
curl -d 'var1=val1&var2=val2' \
--header 'Accept:  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' \
--header 'Accept-Encoding gzip, deflate' \
--header 'Content-Type: application/x-www-form-urlencoded; charset=UTF-8' \
'http://www.example.com/form.url' 
```

笔记：

1.  这样，您可以添加尽可能多的标题。但最好只添加必要的标题。因为`curl`将为您传递大多数标题（例如`Host`，，，`User-Agent`等`Content-Type`）`Accept`。

2.  如果你想管理 cookie`cookie.txt`在当前目录中添加一个文件， `-b cookie.txt -c cookie.txt`命令切换到 curl。方法，

    ```
    -b/--cookie <name=string/file> Cookie string or file to read cookies from (H)
    -c/--cookie-jar <file> Write cookies to this file after operation (H) 
    ```

3.  `-d`switch 代表将在请求正文中传递的数据字符串。

    ```
    -d/--data <data>   HTTP POST data (H) 
    ```

现在我希望你能建立你的命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:29:35.950

在 http 中，有两种方式向 URL 发送数据：

*   邮政
*   得到

在*GET*中，数据作为 URL 的一部分发送。您可能会看到如下所示的 URL：

```
http://foo.com/bar/barfoo/script.js?param1=this&param2=that&param3=the_other 
```

此 URL 正在向位于 的 JavaScript 发送数据`http://foo.com/bar/barfoo/script.js`。它向该脚本发送以下参数：

*   `param1`=*`this`*
*   `param2`=*`that`*
*   `param3`=*`the_other`*

在*POST*操作中，数据以不同方式发送，并且未在 URL 本身中编码。这种情况在使用网络表单时经常发生（比如你正在尝试做的事情）。您可以使用`--form`参数 in`curl`来传递 POST 数据，就像您在 HTTP 表单中使用的词一样。

从 CURL 管理：

```
-F/--form <name=content>
    (HTTP) This lets curl emulate a filled-in form in which a user has
    pressed the submit  button.  This  causes  curl  to  POST  data using
    the Content-Type multipart/form-data according to RFC 2388\. This
    enables uploading of binary files etc. To force the 'content' part to
    be  a  file, prefix the file name with an @ sign. To just get the
    content part from a file, prefix the file name with the symbol <. The
    difference between @ and <  is  then  that  @  makes  a  file  get
    attached  in  the  post as a file upload, while the < makes a text
    field and just get the contents for that text field from a file.

Example, to send your password file to the server, where 'password' is the
name of  the  form- field to which /etc/passwd will be the input:

    curl -F password=@/etc/passwd www.mypasswords.com

To  read content from stdin instead of a file, use - as the filename. This
goes for both @ and < constructs.

You can also tell curl what Content-Type to use by using 'type=', in a
manner similar to:

    curl -F "web=@index.html;type=text/html" url.com

  or

    curl -F "name=daniel;type=text/foo" url.com

You can also explicitly change the name field of a file upload part by
setting filename=, like this:

    curl -F "file=@localfile;filename=nameinpost" url.com 
```

希望这个对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T11:04:05.967

抱歉，curl 不支持 javascript。

考虑

*   手动破译 javascript 并在 perl/ruby/python 脚本中复制行为
*   使用[硒](http://seleniumhq.org/)

# jquery - 使用 jQuery Mobile 的动态输入文本框？

> ID：10634331
> 
> 赞同：1
> 
> 时间：2012-05-17T10:52:58.597
> 
> 标签：jquery, jquery-mobile

我想根据用户使用 jQuery Mobile 从选择菜单中选择的值添加动态输入文本字段。

我正在创建一个应用程序，当用户选择孩子的数量时，应该显示两个新的输入框，询问该孩子的姓名和生日。

这两个框应根据用户选择的值显示，例如；如果用户选择 2，则应显示四个输入框。

我还想知道如何使用 jQuery Mobile 从这些输入框中读取值。这是一些HTML代码

```
 <li data-role="fieldcontain"> 
       <label for="children" class="select">Number of Kids</label>
       <select name="children" id="children" data-mini="true">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
       </select> 
   </li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:17:44.120

To create the number of inputs based on how many children are selected you could do the following:

```
$(document).on('pageinit',function(){ // use this instead of dom ready, .on is dependent upon jQuery 1.7 + use bind or delegate if you have older version
    $('#children').on('change',function(){ // this function runs each time the select menu is changed
        children = $(this).val(); //set variable for number of children

        while(i <= children){ //loop through as long as i is less than number of children
            $('form').append('<label>Name</label><input type="text" name="child'+i+'Name" /><label>Age</label><input type="text" name="child'+i+'Age" />'); // append the input to form
            i++ // add one to our incremnt variable  
        }

        $('.ui-content').append('<input type="submit" value="Submit" />'); // add our submit button on end
        $('.ui-page').trigger('create'); // then tell JQM to recreate page because we added new content
    });
});​ 
```

Here is a working example for that -> [http://jsfiddle.net/codaniel/CDUth/1/](http://jsfiddle.net/codaniel/CDUth/1/)

As for reading the values you can see that i used .val(). That is the easiest way of reading a specific input. Check documentation for more examples-> [http://api.jquery.com/val/](http://api.jquery.com/val/)

You can also serialize the whole form like with serialize(). Read more here -> [http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:57:38.197

这是 codaniel 所拥有的稍微改进的版本。他很好，但是在附加提交按钮时几乎没有“错误”，如果你改回让我们说 1 个孩子，输入的数量不会改变。

```
var html = '';
$('#children').on('change', function() {
   children = $(this).val();
   html = '';

   for (var i = 0; i < children; i++) {
        html += '<label>Name</label><input type="text" id="textName' + i + '" name="child' + i + 'Name" /><label>Age</label><input type="text" name="child' + i + 'Age" id="textAge' + i + '" />';
   }

   $('#kidsFields').html(html);
   $('#kidsFields').append('<input type="submit" value="Submit" />');

   $('.ui-page').trigger('create');
}); 
```

[http://jsfiddle.net/HwFFU/1/](http://jsfiddle.net/HwFFU/1/)

至于阅读价值观，在不知道你想用它们做什么的情况下很难帮助你。但正如 Codaniel 所说，最简单的方法是遍历输入并使用 .val() 来获取里面的文本！

# java - 如何从选定的联系人中提取电话号码？

> ID：10634332
> 
> 赞同：0
> 
> 时间：2012-05-17T10:53:05.927
> 
> 标签：java, android, android-contacts

```
public class ImportContactsActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button pickContact = (Button) findViewById(R.id.contacts);
    pickContact.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {

            Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
            startActivityForResult(intent, 1);
        }
    });
}

public void onActivityResult(int reqCode, int resultCode, Intent data) {

    super.onActivityResult(reqCode, resultCode, data);

    switch (reqCode) {
    case (1) :
      if (resultCode == Activity.RESULT_OK) {
        Uri contactData = data.getData();
        Cursor c =  managedQuery(contactData, null, null, null, null);

        if (c.moveToFirst()) {
          String name = c.getString(c.getColumnIndexOrThrow(People.NAME));
          TextView contactView = (TextView) findViewById(R.id.contactView);
          contactView.setText(name.toString());
        }
      }
      break;
    }
} 
```

我正在开发一个 Android 应用程序，我正在将电话联系人导入我的应用程序，在用户单击所选联系人后，联系人将显示在 TextView 中，电话号码将存储在 sharedpreferences 中......我可以知道如何实现它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:58:56.377

你有没有尝试过？

```
Uri contactData = data.getData();
Cursor cursor =  managedQuery(contactData, null, null, null, null);
cursor.moveToFirst();
      String name = cursor.getString(cursor.getColumnIndexOrThrow(People.NAME));
      String number = cursor.getString(cursor.getColumnIndexOrThrow(People.NUMBER));
      String email = cursor.getString(cursor.getColumnIndexOrThrow(People.PRIMARY_EMAIL_ID));
      contactName.setText(name);
      contactNumber.setText(number);
      contactEmail.setText(email); 
```

对于存储在[`SharedPreferences`](http://developer.android.com/guide/topics/data/data-storage.html#pref)..

```
 // We need an Editor object to make preference changes.
  // All objects are from android.context.Context
  SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
  SharedPreferences.Editor editor = settings.edit();
  editor.putString("phonenumber", number);

  // Commit the edits!
  editor.commit(); 
```

上面的代码只是为了理解..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:22:42.230

以下链接的可能副本

[从 android 联系人选择器获取联系人信息](https://stackoverflow.com/questions/3044545/get-contact-info-from-android-contact-picker)

参考上面的链接。已经详细回答了。

# search - Solr 标题搜索失败

> ID：10634336
> 
> 赞同：0
> 
> 时间：2012-05-17T10:53:28.353
> 
> 标签：search, solr, title

我正在索引 Solr 中少数产品的标题字段。

但是当我搜索时，我没有得到这些标题作为回应。

例如。我将以下内容存储为标题：狒狒打字 T 恤

但是当我在下面搜索时，我没有得到任何结果！！！

1)title:狒狒 2)title:(狒狒打字 T 恤) 3)title:(狒狒*)

另一方面，如果我这样搜索，我会得到很多结果

1）标题：（T恤）

我已经索引了许多包含单词 Tshirt 的标题，但我想搜索一个失败的特定标题..!!

我不知道 Solr 是否忽略了第一个单词，或者它正在做一些随机的事情。

我的问题基本上是：如果我有一个包含很多单词的搜索标题，我想将它与包含最多常用词的标题相匹配。

怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:34:29.833

Solr 本身就是这样工作的。你不必改变任何东西。您必须小心如何在 schema.xml 中设置字段，即如何完成分析。

您可以使用`Solr's admin > Analysis`界面查看您的标题字段（索引时）和查询（搜索时）是如何处理（标记化，转换）的。

请记住，为了发生匹配，双方需要相同的单词（大小写和所有内容）（索引和查询）。

要打开您的索引并查看 Solr 如何实际索引您的数据，请使用[Luke](http://code.google.com/p/luke/)。

# c++ - 什么可以阻止 TBPF_INDETERMINATE 进度条显示在任务栏中？

> ID：10634340
> 
> 赞同：1
> 
> 时间：2012-05-17T10:54:00.840
> 
> 标签：c++, winapi, windows-7, progress-bar, taskbar

我正在尝试实现新的 Windows 7 任务栏进度条。我设法使用以下代码使其与 TBPF_NORMAL 状态一起工作：

```
CoCreateInstance(CLSID_TaskbarList, NULL, CLSCTX_INPROC_SERVER, IID_PPV_ARGS(&taskbarList));

HRESULT c = taskbarList->SetProgressState(hWnd, TBPF_NORMAL);
if (c != S_OK) MessageBox("ERROR");
taskbarList->SetProgressValue(hWnd, 5, 10); 
```

但是，如果我尝试使用 TBPF_INDETERMINATE 完全相同的代码，它不会显示任何内容并且也没有错误：

```
CoCreateInstance(CLSID_TaskbarList, NULL, CLSCTX_INPROC_SERVER, IID_PPV_ARGS(&taskbarList));

HRESULT c = taskbarList->SetProgressState(hWnd, TBPF_INDETERMINATE);
if (c != S_OK) MessageBox("ERROR"); 
```

有谁知道可能导致这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T02:16:31.227

好的，看来是我的系统配置有问题。我在这里发布答案，因为不清楚为什么一个进度条动画会起作用，而另一个则不起作用。

在系统属性/性能选项中，我禁用了“任务栏和开始菜单中的动画”。此选项显然禁用了“不确定”动画，但不是常规动画。通过重新启用该选项，不确定的动画将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:52:39.073

这也发生在我身上。在代码中，我有一个显示表单 B 的表单 A（在 OnLoad 事件中的表单 B 调用 SetProgressState），然后表单 A 调用方法关闭到自身，当它处于不确定模式时它没有显示任何内容！

出乎意料的是，如果我先关闭Form A，然后再显示Form B，问题就解决了！

我希望这可以帮助那些对此感到头疼的人。

# java - 如何在 web.xml 中过滤除请求应用程序引擎开发控制台之外的所有内容

> ID：10634342
> 
> 赞同：2
> 
> 时间：2012-05-17T10:54:19.417
> 
> 标签：java, google-app-engine, jersey, servlet-filters, web.xml

我想过滤对我的球衣 servlet 的所有请求，所以我这样做：

```
<filter-mapping>
   <filter-name>jersey</filter-name>
   <url-pattern>*</url-pattern>
</filter-mapping> 
```

不幸的是，这有捕获开发控制台的副作用（http://localhost:8888/_ah/admin）

有没有办法可以从过滤器中排除匹配“/_ah/*”的路径？

或者也许是实现相同目标的更好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T11:16:30.933

感谢@adarshr 的建议，我开始考虑扩展 Jersey 过滤器 servlet，以便我可以跳过某些路径。那时我意识到它已经支持忽略路径作为初始化参数。

```
<init-param>
    <param-name>com.sun.jersey.config.property.WebPageContentRegex</param-name>
    <param-value>/(js|css|(WEB-INF/jsp)|_ah)/.*</param-value>
</init-param> 
```

（我什至已经在从某个地方粘贴代码而没有阅读它之后使用它！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:08:19.083

我建议有一个 servlet，您可以使用它来配置所有过滤器映射。因此 servlet 将处理所有查询并相应地重新路由它们，因为 web.xml 不允许正则表达式映射。

我们使用 Google Guice 的 guiceServlet 来做同样的事情：

然后在`configureServlets`我们执行以下操作：

```
 serveRegex("/(?!_ah).*").with(JerseyGateway.class); 
```

您可以在[此处](https://stackoverflow.com/questions/2857279/google-guice-on-google-appengine-mapping-with-working-ah)查看有关该主题的许多建议。

# ruby-on-rails - Rails 多对多关联的多个数据库

> ID：10634343
> 
> 赞同：0
> 
> 时间：2012-05-17T10:54:26.253
> 
> 标签：ruby-on-rails, many-to-many, associations, multiple-databases

我有具有多对多关联的模型，例如通过 RoleAssignment 连接的用户和角色

DB1 中的表：

```
users
role_assignments 
```

DB2 中的表：

```
roles 
```

我可以使用 访问 DB1 中的用户`role_one.users`，但无法使用 访问 DB2 中的角色`user_one.roles`。它给出了一个例外

```
ActiveRecord::StatementInvalid: Mysql2::Error: Table 'db2_development.role_assignments' doesn't exist: 
SELECT `roles`.* FROM `roles` INNER JOIN `role_assignments` ON `roles`.`id` = `role_assignments`.`role_id` 
WHERE `role_assignments`.`user_id` = 1 
```

有谁知道如何从用户访问角色，或者如何让 rails 知道 role_assignments 驻留在 DB1 中而不是 DB2 中？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:55:08.550

Solved my problem using `table_name_prefix` as shown at [http://emphaticsolutions.com/2009/11/23/has_many_through_across_databases.html](http://emphaticsolutions.com/2009/11/23/has_many_through_across_databases.html)

```
class ActiveRecord::Base
  def self.table_name_prefix
    "app_name_development."
  end
end

class ExternalActiveRecord < ActiveRecord::Base
  self.abstract_class = true
  establish_connection "external_development"

  def self.table_name_prefix
    "external_app_name_development."
  end
end 
```

then

```
class Role< ExternalActiveRecord
  ...
end 
```

and

```
class User < ActiveRecord::Base
  ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:42:13.190

我自己没有做过，但是您可以将 activerecord 子类化以维护多个数据库连接。请参阅此博客文章：

[http://www.messaliberty.com/2009/02/ruby-how-to-use-multiple-databases-with-activerecord/](http://www.messaliberty.com/2009/02/ruby-how-to-use-multiple-databases-with-activerecord/)

# cakephp - 如何获取相关对象名称？

> ID：10634344
> 
> 赞同：1
> 
> 时间：2012-05-17T10:54:27.803
> 
> 标签：cakephp

我有一个问题，我试图解决几个小时。假设我有一个书籍模型、一个作者模型和一个国家模型。

查看书籍条目时，页面底部有相关对象。在这种情况下，作者。

该页面向我显示了作者的相关数据，作者的姓名和其他详细信息显示良好。但是，该国家/地区显示为 country_id。

有没有办法可以将其更改为国家名称？

更新：

我有这三个表： Book HMBM Authors H Country

一本书可能由许多作者撰写（用于选集）

一个作者可以写很多书

作者可能居住在一个国家

一个国家可能会接待可能的作者。

书：

```
public $hasAndBelongsToMany = array(
    'Author' => array(
        'className' => 'Author',
        'joinTable' => 'author_books',
        'foreignKey' => 'book_id',
        'associationForeignKey' => 'author_id',
        'unique' => '',
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    )
); 
```

作者：

```
public $hasMany = array(
    'Book' => array(
        'className' => 'Book',
        'foreignKey' => 'book_id',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    )
public $belongsTo = array(
    'Country' => array(
        'className' => 'Country',
        'foreignKey' => 'country_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ) 
```

国家：

```
public $hasMany = array(
    'Author' => array(
        'className' => 'Author',
        'foreignKey' => 'country_id',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:08:38.927

如果一本书有作者，而作者有国家，那么您需要的数据在 ORM 的机制之外，以避免对数据库的递归调用。调用`$this->Book->recursive = 2`您的控制器方法以增加递归限制。

# excel - 你能用excel引用外部宏吗？

> ID：10634345
> 
> 赞同：2
> 
> 时间：2012-05-17T10:54:29.137
> 
> 标签：excel, vba

我有一个相当复杂的宏，我需要在多个不同的 Excel 工作表上运行，这个宏会定期更新，每当进行更改时，都需要在每个单独的 Excel 工作表中进行更改。有没有办法让每个 excel 文档都引用一个宏？

例如，如果我有这样的层次结构：

```
 DOCUMENTS:
       -xlsheet1.xls
       -xlsheet3.xls
       -xlsheet2.xls
       MACROS:
            -macro1.bas 
```

每张工作表中有一个按钮在单击时运行macro1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T11:20:44.203

我建议要么将该宏移动到您的个人文件中，要么创建一个加载项

* * *

**使用个人文件**

**主题**：从中央文件部署 Excel 宏

**链接**： http: [//office.microsoft.com/en-us/excel-help/deploy-your-excel-macros-from-a-central-file-HA001087296.aspx](http://office.microsoft.com/en-us/excel-help/deploy-your-excel-macros-from-a-central-file-HA001087296.aspx)

*从上面的链接引用*：

> 您是否曾经想在所有 Excel 工作表中使用这个非常方便的宏？你可以。本专栏介绍如何将宏放在名为 personal.xls 的文件中，并在每次启动 Excel 时使它们可用。

虽然它说它适用于 Microsoft Excel 2002，但它适用于所有 excel 版本。

* * *

**创建加载项**

**主题**：**创建 Excel 插件**

**链接**：[http ://www.ozgrid.com/VBA/excel-add-in-create.htm](http://www.ozgrid.com/VBA/excel-add-in-create.htm)

*从上面的链接引用*：

> 用户经常问我“分发宏的最佳方式是什么？” 我的答案毫无疑问是通过 Excel 加载项。毕竟，这就是插件的用途。对于那些不确定 Excel 加载项是什么的人来说，它只不过是一个已保存为加载项的 Excel 工作簿，文件>另存为 \Microsoft Excel 加载项 (*.xla)。保存并重新打开后，工作簿将被隐藏，只能通过 Visual Basic 编辑器在“项目资源管理器”中看到。它的隐藏方式与 Personal.xls 不同，因为可以通过 Windows>Unhide 看到（并使其可见）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T19:38:07.553

个人文件非常适合在单台计算机上跨任意数量的工作簿使用宏。在具有多个用户的网络环境中，您可以通过在其中包含宏的单个工作簿并对所有其他工作簿进行编码以在启动时打开和隐藏此工作簿来模拟个人文件。

# facebook - Facebook UI 方法提要未在墙贴上显示图片

> ID：10634353
> 
> 赞同：2
> 
> 时间：2012-05-17T10:54:50.337
> 
> 标签：facebook, facebook-javascript-sdk

我正在使用以下功能在用户的墙上发帖。一切正常，我检查并重新检查了 $post[image] 的实际 URL [https://mydomain.com/fb/uploads/image.jpg](https://mydomain.com/fb/uploads/image.jpg)，但是当我调用该函数时，帖子成功在墙上但是没有图片。

```
function postToFeed() {
   var obj = {
      method: 'feed',
      link: '<?php echo $post[link]; ?>',
      picture: '<?php echo $post[image];?>',
      name: '<?php echo $post[name]; ?>',
      caption: '<?php echo $post[caption]; ?>',
      description: '<?php echo $post[description]; ?>'
    };

    function callback(response) {
       alert("Picture Shared!!!");
    }

    FB.ui(obj, callback);
  } 
```

# asp.net-mvc - MVC Controller vs IHttpHandler 还是其他建议？

> ID：10634355
> 
> 赞同：1
> 
> 时间：2012-05-17T10:54:58.017
> 
> 标签：asp.net-mvc, ihttphandler

我正在开发一个中级广告服务器，我将 IHttpHandler 用于广告处理程序（广告处理程序插入一些日志、数据库连接并在最后获得字符串响应）。

我想确定哪个比其他的低，哪个性能更好。或者你有什么其他的推荐吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:23:50.560

由于在 IIS 请求管道中调用 IHttpHandler 的时间有多早，自定义 IHttpHandler 在原始速度方面总是比 MVC 快。但是，根据您正在执行的操作，MVC 可能更直接且更易于维护，而对性能的影响可以忽略不计。

为了提供更好的建议，最好更多地了解您在做什么。

# jquery - ipad点击的下拉菜单

> ID：10634367
> 
> 赞同：1
> 
> 时间：2012-05-17T10:55:48.173
> 
> 标签：jquery, html, css

我正在使用基于 css3 的下拉菜单。它基于 css 中提到的悬停工作。但我需要在 ipad 上完成这项工作，因为 ipad 不考虑悬停下拉菜单在 ipad 上不起作用。

ipad有什么值得一提的吗？如果我们只能更改我现有的 CSS，那就太好了。

```
 <!DOCTYPE html>
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <title>menu</title>
<style>
/* Main menu */
.menu
{
    width: 100%;
    margin: 0;
    padding: 10px 0 0 0;
    list-style: none;  
    background: #111;
    background: -moz-linear-gradient(#444, #111); 
    background: -webkit-gradient(linear,left bottom,left top,color-stop(0, #111),color-stop(1, #444));  
    background: -webkit-linear-gradient(#444, #111);    
    background: -o-linear-gradient(#444, #111);
    background: -ms-linear-gradient(#444, #111);
    background: linear-gradient(#444, #111);
    -moz-border-radius: 50px;
    border-radius: 50px;
    -moz-box-shadow: 0 2px 1px #9c9c9c;
    -webkit-box-shadow: 0 2px 1px #9c9c9c;
    box-shadow: 0 2px 1px #9c9c9c;
}
.menu li
{
    float: left;
    padding: 0 0 10px 0;
    position: relative;
    line-height: 0;
}
.menu a 
{
    float: left;
    height: 25px;
    padding: 0 25px;
    color: #999;
    text-transform: uppercase;
    font: bold 12px/25px Arial, Helvetica;
    text-decoration: none;
    text-shadow: 0 1px 0 #000;
}
.menu li:hover > a
{
    color: #fafafa;
}
.menu li:hover > ul
{
    display: block;
}

/* Sub-menu */
.menu ul
{
    list-style: none;
    margin: 0;
    padding: 0;    
    display: none;
    position: absolute;
    top: 35px;
    left: 0;
    z-index: 99999;    
    background: #444;
    background: -moz-linear-gradient(#444, #111);
    background: -webkit-gradient(linear,left bottom,left top,color-stop(0, #111),color-stop(1, #444));
    background: -webkit-linear-gradient(#444, #111);    
    background: -o-linear-gradient(#444, #111); 
    background: -ms-linear-gradient(#444, #111);    
    background: linear-gradient(#444, #111);
    -moz-box-shadow: 0 0 2px rgba(255,255,255,.5);
    -webkit-box-shadow: 0 0 2px rgba(255,255,255,.5);
    box-shadow: 0 0 2px rgba(255,255,255,.5);   
    -moz-border-radius: 5px;
    border-radius: 5px;
}
.menu ul ul
{
  top: 0;
  left: 150px;
}

.menu ul li
{
    float: none;
    margin: 0;
    padding: 0;
    display: block;  
}
.menu ul li:last-child
{   
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;    
}
.menu ul a
{    
    padding: 10px;
    height: 10px;
    width: auto;
    height: auto;
    line-height: 1;
    display: block;
    white-space: nowrap;
    float: none;
    text-transform: none;
}
.menu ul a:hover
{
    background: #0186ba;
    background: -moz-linear-gradient(#04acec,  #0186ba);    
    background: -webkit-gradient(linear, left top, left bottom, from(#04acec), to(#0186ba));
    background: -webkit-linear-gradient(#04acec,  #0186ba);
    background: -o-linear-gradient(#04acec,  #0186ba);
    background: -ms-linear-gradient(#04acec,  #0186ba);
    background: linear-gradient(#04acec,  #0186ba);
}

.menu ul li:first-child > a
{
    -moz-border-radius: 5px 5px 0 0;
    border-radius: 5px 5px 0 0;
}

.menu ul li:first-child a:hover
{
    border-bottom-color: #04acec; 
}

.menu ul ul li:first-child a:hover
{
    border-right-color: #04acec; 
    border-bottom-color: transparent;   
}

.menu ul li:last-child > a
{
    -moz-border-radius: 0 0 5px 5px;
    border-radius: 0 0 5px 5px;
}

/* Clear floated elements */
.menu:after 
{
    visibility: hidden;
    display: block;
    font-size: 0;
    content: " ";
    clear: both;
    height: 0;
}

</style>
        </head>
        <body>
        <ul class="menu">
                <li><a href="#">Home</a></li>
                <li>
                    <a href="#">Categories</a>
                        <ul>
                        <li><a href="#">CSS</a></li>
                        <li><a href="#">menu2</a></li>
                        <li><a href="#">menu 3</a></li>
                        <li><a href="#">menu 4menu2menu2menu2menu2</a></li>
                        </ul>
                </li>
                <li><a href="#">Work</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Contact</a></li>
        </ul>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:22:46.603

当触发 touchstart 和 touchend 事件时，尝试将类应用于 li。并在你的 CSS 中使用该 (.hover) 以及 :hover 伪事件

例如在你的js中：

```
if((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) || (navigator.userAgent.match(/iPad/i))) {
    $(".menu li a").bind('touchstart', function(){
        $(this).addClass('hover');
    });

    $(".menu li a").bind('touchend', function(){
        $(this).removeClass('hover');
    });
} 
```

# sql-server - 在视图中使用 UNION select

> ID：10634370
> 
> 赞同：2
> 
> 时间：2012-05-17T10:56:00.803
> 
> 标签：sql-server, union, distinct, sql-view

我需要检查一个特定用户是否已经被引用到我们的一个事务表（我们大约有 10 个事务表）。我建议使用包含所有已引用用户的视图，然后开发团队可以通过该表进行选择，以找出他们正在寻找的数据是否存在，

所以这是我对视图的查询：

```
SELECT DISTINCT user_ID
FROM transaction_table_1

UNION

SELECT DISTINCT user_ID
FROM transaction_table_2

UNION

SELECT DISTINCT user_ID
FROM transaction_table_3

UNION

SELECT DISTINCT user_ID
FROM transaction_table_4

[...] 
```

现在它有效，但我的问题是，这是个好主意吗？该要求要求我只提供一个脚本（或视图）而不是存储过程，我认为使用 SP 会更好，因为我可以为每个表执行一个快速的 IF EXIST() 语句并检查是否参数 user 存在于任何表中，但他们真的希望它只是一个他们可以检查的脚本（并且不使用变量）。

你们能不能给我一个更好的方法来满足这个要求，这对性能的影响会更小，因为这可能不是这个要求的优化解决方案。

TIA，隆美尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:00:11.773

好吧，你可以删除`DISTINCT`因为`UNION`已经成功了:)

```
SELECT user_ID
FROM transaction_table_1

UNION

SELECT user_ID
FROM transaction_table_2

UNION

SELECT user_ID
FROM transaction_table_3

UNION

SELECT user_ID
FROM transaction_table_4 
```

但是由于您必须使用视图，所以我不知道如何使其有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:10:44.593

从性能的角度来看，我会稍微不同地构建查询：

```
SELECT DISTINCT user_ID
FROM (

    SELECT user_ID
    FROM transaction_table_1

    UNION ALL

    SELECT user_ID
    FROM transaction_table_2

    UNION ALL

    SELECT user_ID
    FROM transaction_table_3

    ...
) x 
```

这会将需要执行的唯一索引扫描的数量减少到 1 - 而不是每次`UNION`执行a 时都有一个

# jquery - 使用 jQuery 从 Web 应用程序发布到 Twitter 到用户的时间轴

> ID：10634372
> 
> 赞同：0
> 
> 时间：2012-05-17T10:56:01.630
> 
> 标签：jquery, twitter

我有一个在 Twitter 中注册的网络应用程序，因此有一个应用程序 ID。我想用它来将网站上的内容发布到用户的时间线（代表他们，他们自己的内容）。我让它在服务器端工作，但我想知道 jQuery 在客户端的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:09:25.667

对于 jQuery，使用[jQuery.post()](http://api.jquery.com/jQuery.post/)方法。像这样的东西应该工作：

```
$.post("/myTwitterUpdater.php", 
       { 'status': 'Hello world!' }); 
```

这是假设在服务器端您的脚本被命名`myTwitterUpdater.php`，并且它接受名为 的参数中的状态更新`status`。如果需要，添加您自己的身份验证机制作为附加参数或其他内容。然后，服务器应该使用 Twitter [REST API](https://dev.twitter.com/docs/api)，更准确地说是它的[POST 状态/更新](https://dev.twitter.com/docs/api/1/post/statuses/update)资源，将您的状态更新转发到 Twitter。（你说你已经让它工作了，但对于其他感兴趣的人，只需谷歌搜索“ [twitter oauth php example](https://www.google.com/search?q=twitter%20oauth%20php%20example) ”，或者用你选择的语言替换 PHP。）

Twitter 的 OAuth 身份验证最好留给服务器处理。用 JavaScript很难[做到，](https://stackoverflow.com/questions/2550128/interacting-with-restful-apis-via-javascript)但[并非不可能](https://stackoverflow.com/questions/1221371/application-that-uses-oauth-and-javascript)。

# uml - Enterprise Architect：“DataType”类是干什么用的？

> ID：10634374
> 
> 赞同：1
> 
> 时间：2012-05-17T10:56:07.357
> 
> 标签：uml, modeling, enterprise-architect

我在网上找到了这个：

![在此处输入图像描述](../Images/7a018cf44fd867cd9e9655bafca5d12c.png)

我不明白“DataType”的用途是什么？

我的意思是，这个类的所有属性都可以添加到 AD_Street 类作为属性，如名称、类型和几何形状。

什么时候应该使用这个类？

“FeatureType”和“DataType”有什么区别？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:11:00.253

来自 Enterprise Architect UML Dictionary 书：

“数据类型是一种特定类型的分类器，类似于类，只是数据类型不能拥有子数据类型，数据类型的实例仅由其值标识。例如，人类的实例是Helen 对象，但整数数据类型的实例是 12。”

我希望这能有所帮助！

# javascript - Wordpress 页面内容不显示

> ID：10634383
> 
> 赞同：1
> 
> 时间：2012-05-17T10:56:44.610
> 
> 标签：javascript, css, wordpress

我设置了一个带有启动页面的 wordpress 网站，但是一旦你点击一个页面，网站上就不会出现任何内容

[http://www.dawaf.co.uk/es/](http://www.dawaf.co.uk/es/)

[http://www.dawaf.co.uk/es/fashion-beauty](http://www.dawaf.co.uk/es/fashion-beauty)

```
@font-face {
    font-family: 'BebasRegular';
    src: url('fonts/BEBAS___-webfont.eot');
    src: url('fonts/BEBAS___-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/BEBAS___-webfont.woff') format('woff'),
         url('fonts/BEBAS___-webfont.ttf') format('truetype'),
         url('fonts/BEBAS___-webfont.svg#BebasRegular') format('svg');
    font-weight: normal;
    font-style: normal;

}

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
    border: 0;
    font-family: BebasRegular;
    font-size: 100%;
    font-style: inherit;
    font-weight: inherit;
    margin: 0;
    outline: 0;
    padding: 0;
    vertical-align: baseline;
}

#page {
    margin: 100px 0 0 0;
    background: transparent;
}

body {
    background: #FFF;
}

/*Menu
------------------------------------------------------------ */
#access div {
    margin: 0px;
}

#access {
    background: transparent;
    -webkit-box-shadow: none;
    box-shadow: none;
    width: 185px;
    margin: 0px 20px 6px;
    position: relative;
    top: -65px;
    left: 6px;
}

#access ul {
    font-size: 12px;
}

#access a {
    color: #737373;
    line-height: 27px !important;
}

#access li:hover > a, #access a:focus {
    background: transparent;
}

#access .current-menu-item > a, #access .current-menu-ancestor > a, #access .current_page_item > a, #access .current_page_ancestor > a {
    font-weight: normal;
    color: #000;
}

/*Header
------------------------------------------------------------ */
#branding {
    border-top: none;
}

.logo {
    width: 300px;
    height: 132px;
    top: -100px;
    position: relative;
    left: 8px;
}

/*Splash Page
------------------------------------------------------------ */
body.home.page.page-id-17 nav#access {
    display: none;
}

#branding #searchform {
    display: none;
}

#colophon {
    display: none;
}

.nopassword, .nocomments {
    display: none;
} 
```

启动页面在 header.php 中设置

```
<?php
/**
 * The Header for our theme.
 *
 * Displays all of the <head> section and everything up till <div id="main">
 *
 * @package WordPress
 * @subpackage Twenty_Eleven
 * @since Twenty Eleven 1.0
 */
?><!DOCTYPE html>
<!--[if IE 6]>
<html id="ie6" <?php language_attributes(); ?>>
<![endif]-->
<!--[if IE 7]>
<html id="ie7" <?php language_attributes(); ?>>
<![endif]-->
<!--[if IE 8]>
<html id="ie8" <?php language_attributes(); ?>>
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html <?php language_attributes(); ?>>
<!--<![endif]-->
<head>
<meta charset="<?php bloginfo( 'charset' ); ?>" />
<meta name="viewport" content="width=device-width" />

<title><?php
    /*
     * Print the <title> tag based on what is being viewed.
     */
    global $page, $paged;

    wp_title( '|', true, 'right' );

    // Add the blog name.
    bloginfo( 'name' );

    // Add the blog description for the home/front page.
    $site_description = get_bloginfo( 'description', 'display' );
    if ( $site_description && ( is_home() || is_front_page() ) )
        echo " | $site_description";

    // Add a page number if necessary:
    if ( $paged >= 2 || $page >= 2 )
        echo ' | ' . sprintf( __( 'Page %s', 'twentyeleven' ), max( $paged, $page ) );

    ?></title>

<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo( 'stylesheet_url' ); ?>" />
<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" />
<!--[if lt IE 9]>
<script src="<?php echo get_template_directory_uri(); ?>/js/html5.js" type="text/javascript"></script>
<![endif]-->
<?php
    /* We add some JavaScript to pages with the comment form
     * to support sites with threaded comments (when in use).
     */
    if ( is_singular() && get_option( 'thread_comments' ) )
        wp_enqueue_script( 'comment-reply' );

    /* Always have wp_head() just before the closing </head>
     * tag of your theme, or you will break many plugins, which
     * generally use this hook to add elements to <head> such
     * as styles, scripts, and meta tags.
     */
    wp_head();
?>
</head>

<body <?php body_class(); ?>>
<div id="page" class="hfeed">
    <header id="branding" role="banner">

            <?php
                // Check to see if the header image has been removed
                $header_image = get_header_image();
                if ( ! empty( $header_image ) ) :
            ?>
            <a href="<?php echo esc_url( home_url( '/' ) ); ?>">
                <?php
                    // The header image
                    // Check if this is a post or page, if it has a thumbnail, and if it's a big one
                    if ( is_singular() &&
                            has_post_thumbnail( $post->ID ) &&
                            ( /* $src, $width, $height */ $image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), array( HEADER_IMAGE_WIDTH, HEADER_IMAGE_WIDTH ) ) ) &&
                            $image[1] >= HEADER_IMAGE_WIDTH ) :
                        // Houston, we have a new header image!
                        echo get_the_post_thumbnail( $post->ID, 'post-thumbnail' );
                    else : ?>
                    <img src="<?php header_image(); ?>" width="<?php echo HEADER_IMAGE_WIDTH; ?>" height="<?php echo HEADER_IMAGE_HEIGHT; ?>" alt="" />
                <?php endif; // end check for featured image or standard header ?>
            </a>
            <?php endif; // end check for removed header image ?>

            <?php
                // Has the text been hidden?
                if ( 'blank' == get_header_textcolor() ) :
            ?>
                <div class="only-search<?php if ( ! empty( $header_image ) ) : ?> with-image<?php endif; ?>">
                <?php get_search_form(); ?>
                </div>
            <?php
                else :
            ?>
                <?php get_search_form(); ?>
            <?php endif; ?>

<div class="logo"><img src="http://www.dawaf.co.uk/es/wp-content/themes/child/images/es-logo.png"></div>

            <nav id="access" role="navigation">
                <h3 class="assistive-text"><?php _e( 'Main menu', 'twentyeleven' ); ?></h3>
                <?php /*  Allow screen readers / text browsers to skip the navigation menu and get right to the good stuff. */ ?>
                <div class="skip-link"><a class="assistive-text" href="#content" title="<?php esc_attr_e( 'Skip to primary content', 'twentyeleven' ); ?>"><?php _e( 'Skip to primary content', 'twentyeleven' ); ?></a></div>
                <div class="skip-link"><a class="assistive-text" href="#secondary" title="<?php esc_attr_e( 'Skip to secondary content', 'twentyeleven' ); ?>"><?php _e( 'Skip to secondary content', 'twentyeleven' ); ?></a></div>
                <?php /* Our navigation menu.  If one isn't filled out, wp_nav_menu falls back to wp_page_menu. The menu assiged to the primary position is the one used. If none is assigned, the menu with the lowest ID is used. */ ?>
                <?php wp_nav_menu( array( 'theme_location' => 'primary' ) ); ?>
            </nav><!-- #access -->
    </header><!-- #branding -->

    <div id="main"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:10:05.407

只需检查推杆，只需更改并查看位置，

```
#branding {
  z-index:0;
  position:absolute;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:47:58.460

答案在下面，当我在萤火虫中这样做时它对我有用

```
#access{
 display: block !important;
} 
```

# javascript - 降级 NodeJs 版本和 express 版本

> ID：10634388
> 
> 赞同：7
> 
> 时间：2012-05-17T10:56:58.920
> 
> 标签：javascript, node.js, express

目前我正在做一个nodejs项目。我已经安装了处于 alpha 阶段的 Express 3.X，并且我的节点版本也是 0.7.2-pre。我目前正在尝试通过 npm 降级我的 express 版本，但似乎我也必须降级我的节点版本。

实现这一目标的最佳方法是什么？我如何降级我的节点版本。非常感谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-17T11:05:30.663

为了简化节点版本管理，您可以使用名为[n的 npm 包](https://github.com/visionmedia/n)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T11:06:10.773

有一些工具可以让你安装多个版本的 Node - 例如[NVM](https://github.com/creationix/nvm) - 所以你可以做到这一点。

但是，要回答这个问题，恐怕您需要重新安装 Node。值得庆幸的是，从源代码安装非常容易，虽然有点慢。只需按照[GitHub 页面](https://github.com/joyent/node)上的安装说明进行操作即可。

# xml - 使用 JDOM 编辑 XML 文件

> ID：10634391
> 
> 赞同：0
> 
> 时间：2012-05-17T10:57:02.417
> 
> 标签：xml, xml-namespaces, jdom

我想添加`xmlns:atom`到 XML 文件的根元素，该文件已经存在，我只想通过添加`xmlns`. 其余文件保持不变。例如，我有`<rss version="2.0">`文件，我想将其转换为`<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">`使用 JDOM。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:33:29.973

将输入文件加载为 JDOM 文档后，您可以：

```
document.getRootElement().addNamespaceDeclaration(
    Namespace.getNamespace("atom", "...")); 
```

然后，当您输出文档时，它将具有附加的命名空间声明。

确保为您的命名空间使用正确的 URI……而不是“……”……

请参阅[addNamespaceDeclaration](http://www.jdom.org/docs/apidocs/org/jdom2/Element.html#addNamespaceDeclaration%28org.jdom2.Namespace%29)的文档：

# javascript - Spotify web-api 暂停事件监听器

> ID：10634392
> 
> 赞同：0
> 
> 时间：2012-05-17T10:57:12.250
> 
> 标签：javascript, metadata, spotify, asp.net-web-api

我们正在为 spotify 创建一个广告客户页面。

使用 Spotify web-api 搜索和播放曲目时，是否可以听听用户是否在 Spotify 中暂停了该曲目。Facebook 似乎已经做到了这一点，但我不确定如何做到这一点，或者是否有任何文档。

如果有人能指出我正确的方向，那就太好了！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:15:04.663

总之，不，除非您在 Apps API 中编写应用程序。

Web API 根本不支持播放控制——我假设您实际上是在启动`spotify:`URI 或`open.spotify.com`HTTP URL。不幸的是，没有相应的 URL 来实际控制播放。

# c# - 在方法参数上设置名称

> ID：10634395
> 
> 赞同：3
> 
> 时间：2012-05-17T10:57:25.073
> 
> 标签：c#, reflection.emit

我`Reflection.Emit`用来做一个exe。到目前为止，我已经可以创建一个有效的 CIL PE。（它只是向 Console.WriteLine 输出一个字符串。）但是 main 方法的参数是自动生成的（A_0）。

```
.method public static void  Main(string[] A_0) cil managed
{
  .entrypoint
  // Code size       12 (0xc)
  .maxstack  1
  IL_0000:  nop
  IL_0001:  ldstr      "Cafe con pan"
  IL_0006:  call       void [mscorlib]System.Console::WriteLine(string)
  IL_000b:  ret
} // end of method Program::Main 
```

将其与相应 C# 程序中的代码进行对比

```
.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  // Code size       13 (0xd)
  .maxstack  8
  IL_0000:  nop
  IL_0001:  ldstr      "Cafe con pan"
  IL_0006:  call       void [mscorlib]System.Console::WriteLine(string)
  IL_000b:  nop
  IL_000c:  ret
} // end of method Program::Main 
```

参数名称是 args。我怎样才能给论点命名？我用于使该方法看起来像这样的代码：

```
Il = System.reflection.Emit
Re = System.Reflection
tb = Reflection.Emit.TypeBuilder

Il.MethodBuilder meth = tb.DefineMethod(
                "Main", // name
                Re.MethodAttributes.Public | Re.MethodAttributes.Static,
                // method attributes
                typeof(void),   // return type
                new Type[] { typeof(String[]) }); // parameter types

Il.ILGenerator methIL = meth.GetILGenerator();
methIL.Emit(Il.OpCodes.Nop);
methIL.Emit(Il.OpCodes.Ldstr, "Cafe con pan");
Type [] args = new Type []{typeof(string)};
Re.MethodInfo printString = typeof(Console).GetMethod("WriteLine", args);
methIL.Emit(Il.OpCodes.Call, printString);
methIL.Emit(Il.OpCodes.Ret); 
```

我已经检查了 `TypeBuilder.DefineMethod`文档是否有任何线索可以做到这一点，因为它是拥有此类信息的合乎逻辑的地方，但无济于事。
有人有建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T11:03:56.680

看起来[`MethodBuilder.DefineParameter`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.methodbuilder.defineparameter)允许您指定参数名称：

> 设置此方法的参数属性**和参数名称**，或此方法的返回值。返回可用于应用自定义属性的 ParameterBuilder。

# powershell - 在 PowerShell 中获取 USB 驱动器的驱动器号

> ID：10634396
> 
> 赞同：6
> 
> 时间：2012-05-17T10:57:28.790
> 
> 标签：powershell, usb, wmi

我看过 C# 和其他一些语言的文章，这些文章解释了如何实现我正在寻找的东西，但我不知道如何转换它们。

*   以下链接说明了如何获取答案：
    [如何获取 USB 设备的驱动器号？](https://stackoverflow.com/questions/6653205/how-can-i-get-the-drive-letter-of-an-usb-device)
    Win32_DiskDrive-> Win32_DiskDriveToDiskPartition -> Win32_DiskPartition -> Win32_LogicalDiskToPartition -> Win32_LogicalDisk

*   GEOCHET 的答案还解释了如何实现答案，但又不是在 PowerShell 中：[如何找到 USB 驱动器号？](https://stackoverflow.com/questions/123927/how-to-find-usb-drive-letter)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T12:01:45.843

Try:

```
gwmi win32_diskdrive | ?{$_.interfacetype -eq "USB"} | %{gwmi -Query "ASSOCIATORS OF {Win32_DiskDrive.DeviceID=`"$($_.DeviceID.replace('\','\\'))`"} WHERE AssocClass = Win32_DiskDriveToDiskPartition"} |  %{gwmi -Query "ASSOCIATORS OF {Win32_DiskPartition.DeviceID=`"$($_.DeviceID)`"} WHERE AssocClass = Win32_LogicalDiskToPartition"} | %{$_.deviceid} 
```

Tested with one and more than one USB device plugged-in.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-06T09:45:32.243

我知道这个主题已经被放弃了一段时间，但因为它是我经常回来的东西，我想我会更新一些东西。

如果使用 Windows 7 及更高版本，更简单的解决方案是：

```
Get-WmiObject Win32_Volume -Filter "DriveType='2'" 
```

如果你想避免幻数：

```
Get-WmiObject Win32_Volume -Filter ("DriveType={0}" -f [int][System.IO.DriveType]::Removable) 
```

参考资料：
[https ://docs.microsoft.com/en-us/previous-versions/windows/desktop/vdswmi/win32-volume](https://docs.microsoft.com/en-us/previous-versions/windows/desktop/vdswmi/win32-volume)
[https://docs.microsoft.com/en-us/dotnet/api/system.io .drivetype](https://docs.microsoft.com/en-us/dotnet/api/system.io.drivetype)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-29T08:32:36.593

从 PowerShell v3.0 开始，Microsoft 引入了一些`Get-Cim*`命令，这些命令比丑陋的`Get-WmiObject`ASSOCIATORS 查询方法更容易：

```
Get-CimInstance -Class Win32_DiskDrive -Filter 'InterfaceType = "USB"' -KeyOnly | 
    Get-CimAssociatedInstance -ResultClassName Win32_DiskPartition -KeyOnly |
    Get-CimAssociatedInstance -ResultClassName Win32_LogicalDisk |
    Format-List * 
```

或者：

```
Get-CimInstance -Class Win32_DiskDrive -Filter 'InterfaceType = "USB"' -KeyOnly |
    Get-CimAssociatedInstance -Association Win32_DiskDriveToDiskPartition -KeyOnly |
    Get-CimAssociatedInstance -Association Win32_LogicalDiskToPartition |
    Format-List * 
```

上面的命令是等价的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-23T20:16:51.253

```
get-volume | where drivetype -eq removable | foreach driveletter

volume | ? drivetype -eq removable | % driveletter 
```

# magento - Magento 管理类别切换菜单错误

> ID：10634399
> 
> 赞同：0
> 
> 时间：2012-05-17T10:57:38.570
> 
> 标签：magento, categories, magento-1.6

我点击了管理中的类别菜单，但它给了我这个关于萤火虫的错误。

toolbarToggle 未定义 toolbarToggle.stop();

请帮我。

注意：我的 magento 从 1.4 更新到 1.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:30:27.610

这是一个 JavaScript 错误。转到`app/design/adminhtml/default/default/template/catalog/category/edit.phtml`注释掉第 75 行 ( `toolbarToggle.stop();`) 和第 94 行 ( `toolbarToggle.start()`)。

请注意，您将破解核心文件！您可以覆盖这些文件，但我认为它将在下一个版本中修复（然后这些黑客将被覆盖）。

# java - 是否有一个 Iterable 允许 Iterable.remove() 被另一个实例调用？

> ID：10634408
> 
> 赞同：2
> 
> 时间：2012-05-17T10:58:37.323
> 
> 标签：java, collections, guava

是否有用于 List 对象的 Guava 迭代器（或方法），它允许两个迭代器实例存在 - 在同一内存范围内 - 同时允许 remove() 操作？（奖励点：如果它适用于集合）。

示例用例：通过集合的外部和内部迭代，其中内部循环可能决定删除一个元素，而外部循环随后会跳过它。

想象一下，通过减少循环中要比较的元素数量并消除在最后从列表中删除空集的需要，它将如何使以下概念代码（使用 Guava 静态导入）受益：

```
private <T> Set<Set<T>> disjointify(Collection<Set<T>> sets) {
    List<Set<T>> disjoint = newArrayList(sets);
    for (Set<T> set1 : disjoint) {
        for (Set<T> set2 : filter(disjoint, not(equalTo(set1)))) {
            if (!intersection(set1, set2).isEmpty()) {
                // this wouldn't be safe for a Set<Set<T>>
                set1.addAll(set2);
                set2.clear();
            }
        }
    }
    return newHashSet(filter(disjoint, NO_EMPTIES));
}
private static final Predicate<Set<?>> NO_EMPTIES = new Predicate<Set<?>>() {

    @Override
    public boolean apply(Set<?> input) {
        if (input == null || input.isEmpty()) {
            return false;
        }
        return true;
    }
}; 
```

注意：可以很容易地想象创建实现——尤其是对于 LinkedList——我只是问这里是否已经存在。

作为记录，如果一个高效的 Iterable 确实已经存在，并且适用于 Sets，那么用例将如下所示（我创建了自己的非常低效的 Iterable 来实现这一点，但它有 50 行长而且效率低得可笑 - 所以我使用上面的原始代码）：

```
private <T> void disjointify(Set<Set<T>> sets) {
    for (Set<T> set1 : nestable(sets)) {
        Iterator<Set<T>> it = filter(nestable(sets), not(equalTo(set1))).iterator();
        while (it.hasNext()) {
            Set<T> set2 = it.next();
            if (!intersection(set1, set2).isEmpty()) {
                set1.addAll(set2);
                it.remove();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:56:11.330

标准库中似乎不存在这样的实现。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T11:09:07.793

为什么不用 NO_EMPTIES 过滤外观？由于在迭代期间对过滤器进行评估，因此过滤列表/外部循环中不会返回任何新的空集。

否则，我不这么认为。你会得到一个`ConcurrentModificationException`外循环。

# java - 如果应用程序在后台，如何运行活动？

> ID：10634412
> 
> 赞同：0
> 
> 时间：2012-05-17T10:58:58.683
> 
> 标签：java, android

我正在编写网络应用程序，如果应用程序在后台，我在启动活动时遇到问题。我想在一些数据进入网络时开始活动。在我的活动 A 中有一个接收器，当它从服务器接收到一些答案时，它必须运行活动 B。但是如果应用程序在后台，活动 B 没有启动并且方法 onCreate() 不会执行。它仅在用户返回 App 时执行。但这并不是我真正想要的，因为在活动 B 中我需要启动计时器并且我需要启用 GPS 和其他一些工作。除此之外，活动 B 也接收一些数据，如果 B 不存在 - 这个接收器将永远不会收到任何东西。我尝试了 IntentServise，但它不起作用 - 结果与没有他时相同。有任何想法吗？感谢您提供任何信息:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:22:49.920

当您的应用程序处于后台时，您的接收器可能没有获得意图，例如，如果您在 onDestroy 方法中取消注册它...尝试在清单中声明您的广播接收器。在广播接收器类中，使用 starActivity 调用行为 B。这对我有用。

如果您仍然有一些问题，也许您应该提供一些源代码（例如您正在使用意图的函数）来澄清您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:23:12.600

您不能强制活动从后台返回。您可以使用状态栏为用户显示通知。还想一想，这是一个移动设备，有人可以在谈话中或在汽车中使用 GPS 作为导航。

# android - android - 我如何使用“android:layoutDirection”？

> ID：10634414
> 
> 赞同：10
> 
> 时间：2012-05-17T10:59:03.530
> 
> 标签：android, android-layout

似乎android 4为linearLayout提供了**“android** ：layoutDirection”，为textView提供了“ **android：textDirection”**，但是当我选择它们时，我得到一个编译错误，它不能像这样识别它们：

`error: No resource identifier found for attribute 'layoutDirection' in package 'android'`

我也无法在互联网上找到有关这些属性的更多信息。它们是什么意思，为什么我不能使用它们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T16:14:33.797

如果您将项目属性更改为 API 级别 17，它将起作用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-07T06:21:13.840

可能会帮助你。

```
Note: To enable right-to-left layout features for your app, you must set supportsRtl to "true" and set targetSdkVersion to 17 or higher. 
```

[http://developer.android.com/guide/topics/resources/providing-resources.html#table2](http://developer.android.com/guide/topics/resources/providing-resources.html#table2)

# android - Android 方向更改 -> 数据库已删除

> ID：10634416
> 
> 赞同：1
> 
> 时间：2012-05-17T10:59:21.517
> 
> 标签：android, sqlite

我在改变方向时遇到了一些问题。当我的应用程序更改其方向时，数据库将被清除。是我做错了什么还是只是它的默认行为，我必须使用 onSaveInstanceState() 恢复和保存数据库

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T03:19:29.273

如果您要在 中重新创建数据库`onCreate`，那么您将看到此行为，除非您还实现`onSaveInstanceState`或`onRestoreInstanceState`使用`SavedInstanceState`arg`onCreate`来恢复您之前保存的内容（或两者兼而有之）。

Save/RestoreInstanceState 的全部意义在于系统需要在用户不知情的情况下终止并重新创建您的活动，因此您需要保持一直在运行的错觉。最有可能发生这种情况的两种情况是

1.  在方向改变
2.  如果您的活动在后台并且系统内存不足。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:17:37.457

打开您的 manifest.xml 文件并更改 Activity<> 标记如下：然后检查

```
 <activity
            android:configChanges="keyboardHidden|orientation"></activity> 
```

# java - 图像调整大小以适合 JPanel

> ID：10634417
> 
> 赞同：5
> 
> 时间：2012-05-17T10:59:22.910
> 
> 标签：java, image, swing, jpanel

我有 JPanel，它将加载图像。

由于图像的宽度和高度与 JPanel 不同，我想让图像调整大小并适合 JPanel。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T11:10:44.157

阅读这篇文章[Image.getScaledInstance() 的危险](https://community.oracle.com/docs/DOC-983611)

现在**，如果您仍然喜欢**，您可以使用类似的东西，

```
Image scaledImage = originalImage.getScaledInstance(jPanel.getWidth(),jPanel.getHeight(),Image.SCALE_SMOOTH); 
```

在将图像加载到您的 JPanel 之前，这可能就像[在这个答案中](https://stackoverflow.com/a/8530698/977676)讨论的那样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-29T23:41:31.390

我知道这已经很老了，但也许这对其他人有帮助

使用这个类而不是普通的 JLabel 并在使用 setIcon(#) 时传递一个 ImageIcon；

```
private class ImageLabel extends JLabel{
    private Image _myimage;

    public ImageLabel(String text){
        super(text);
    }

    public void setIcon(Icon icon) {
        super.setIcon(icon);
        if (icon instanceof ImageIcon)
        {
            _myimage = ((ImageIcon) icon).getImage();
        }
    }

    @Override
    public void paint(Graphics g){
        g.drawImage(_myimage, 0, 0, this.getWidth(), this.getHeight(), null);
    }
} 
```

# c# - 在 C# MVC3 中跨控制器重用会话

> ID：10634419
> 
> 赞同：4
> 
> 时间：2012-05-17T10:59:24.497
> 
> 标签：c#, asp.net-mvc-3, session

我正在使用 MVC3 在 C# 中创建一个网站。该网站是使用 Web 服务的客户端。Web 服务对每个用户使用唯一的会话 ID，该 ID 作为每个服务调用中的最后一个参数给出。登录时会获得会话 ID。

我能够获取会话 ID 并将其保存在我的用户控制器的属性中：

```
private string Sid
{
    get
    {
        var sid = Session["Sid"];
        return sid == null ? "" : sid.ToString();
    }
    set
    {
        Session["Sid"] = value;
    }
} 
```

在我的其他控制器中，我能够获得具有类似属性的会话 id（只是没有设置器），但是当它要求用户控制器做一些事情时，它访问自己的属性以获取 id，会话为空。

似乎会话没有在控制器之间传输，但我不知道该怎么做。我想从一个中心位置访问会话，而不是在每个控制器中都有属性，但我不知道该怎么做。

经过三天的搜索谷歌一直无法给我答案。你有什么想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T11:13:42.887

为什么不创建一个在`OnActionExecuting`方法中创建 Session 变量的 Base Controller，然后让所有其他 Controller 继承自该 Base Controller，如下所示：

```
public class BaseController : Controller
{
    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        Session["Sid"] = Session.SessionID;
        base.OnActionExecuting(filterContext);
    }        
}

public class HomeController : BaseController
{
    public ActionResult Index()
    {
        ViewBag.Name = Session["Sid"];
        return View();
    }
}

public class TestController : BaseController
{
    public ActionResult Index()
    {
        ViewBag.Name = Session["Sid"];
        return View();
    }
} 
```

希望这可以帮助！

## 编辑

根据您在下面的评论，我相信您正在寻找（？）：

```
public class BaseController : Controller
{
    public string Sid
    {
        get
        {
            var sid = Session["Sid"];
            return sid == null ? "" : sid.ToString();
        }
        set
        {
            Session["Sid"] = value;
        }
    }
}

public class HomeController : BaseController
{
    public ActionResult Index()
    {
        Sid = "2343432233aaaa";
        ViewBag.Name = Session["Sid"];
        return View();
    }
}

public class TestController : BaseController
{
    public ActionResult Index()
    {
        ViewBag.Name = Session["Sid"];
        return View();
    }
} 
```

您可以将我设置的位置替换`Sid`为从您的服务生成的 SessionId

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T09:27:13.087

您所描述的行为非常出乎意料；Session 肯定是一样的，所以还有其他原因导致了这种行为。

但是，处理此问题的“通常”方法是创建自定义 SessionWrapper。SessionWrapper 是一个具有公共属性的静态类，最重要的是，它是您访问会话的单点——因此所有控制器都将使用这个类来写入/读取会话。

一个非常简单的版本看起来像这样：

```
public static class SessionWrapper
{
    public string Sid 
    { 
        get 
        { 
            var sid = Session["Sid"]; 
            return sid == null ? "" : sid.ToString(); 
        } 
        set 
        { 
            Session["Sid"] = value; 
        } 
    }
} 
```

# android - 在 Android 中获取日期和时间差的天、小时、分钟和秒

> ID：10634420
> 
> 赞同：5
> 
> 时间：2012-05-17T10:59:30.020
> 
> 标签：android

我需要获取当前日期和未来日期之间的差异，在 android 中以天、小时、分钟和秒为单位。就像当前日期和时间是 17/05/2012 03:53:00 而未来的日期是 18/05/2012 04:55:00。

我需要将差异显示为剩余时间 = 天：1、小时：1 和分钟 2。

任何形式的帮助将不胜感激。提前谢谢了。

问候， 穆纳扎 K

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-17T11:12:17.800

你可以这样做

```
 c_date=18/05/2012 04:55:00\.  and  saved_date=17/05/2012 03:53:00

   long diffInMillisec = c_date.getTime() -saved_date.getTime();
   long diffInSec = TimeUnit.MILLISECONDS.toSeconds(diffInMillisec);
   seconds = diffInSec % 60;
   diffInSec/= 60;
   minutes =diffInSec % 60;
   diffInSec /= 60;
   hours = diffInSec % 24;
   diffInSec /= 24;
   days = diffInSec;` 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-17T11:06:00.397

您可以减去两个日期，然后计算差异。有点像这样：

```
long difference = calendar.getTimeInMillis()-currentTime;

    long x = difference / 1000;
    seconds = x % 60;
    x /= 60;
    minutes = x % 60;
    x /= 60;
    hours = x % 24;
    x /= 24;
    days = x; 
```

你可以减去你已经计算的时间。你得到时间，得到休息，做分钟，等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T11:28:13.263

我最近实现了同样的事情，我使用了 JodaTime。您可以从此处下载 jar 并将其包含在您的 Android 应用程序中：http: [//joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

```
//Create your taget date    
Calendar cal = Calendar.getInstance();
    cal.clear();
    cal.set(Calendar.YEAR, 2012);
    cal.set(Calendar.MONTH, Calendar.JULY);
    cal.set(Calendar.DATE, 15);
    cal.set(Calendar.HOUR_OF_DAY, 8);
    Date startDate = cal.getTime();

//Use JodaTime to calculate difference
    Period period =  getTimePassedSince(startDate);

//Extract values and display
    daysTV.setText("" + Math.abs(period.getDays()));
    hoursTV.setText("" + Math.abs(period.getHours()));
    minsTV.setText("" + Math.abs(period.getMinutes()));
    secsTV.setText("" + Math.abs(period.getSeconds()));

    ...
    public static Period getTimePassedSince(Date initialTimestamp){
            DateTime initDT = new DateTime(initialTimestamp.getTime());
            DateTime now = new DateTime();
            Period p = new Period(initDT, now, PeriodType.dayTime()).normalizedStandard( PeriodType.dayTime());
            return p;
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-17T12:25:31.027

从所有这些回复中，这就是我想出的

```
fun hoursBetween(date: Date): Long = TimeUnit.MILLISECONDS.toHours(date.time - Date().time)
fun minutesBetween(date: Date): Long = TimeUnit.MILLISECONDS.toMinutes(date.time - Date().time) % 60
fun secondsBetween(date: Date): Long = TimeUnit.MILLISECONDS.toSeconds(date.time - Date().time) % 60 
```

希望能帮助到你 ;）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T11:07:31.223

使用[`Date`](http://developer.android.com/reference/java/util/Date.html)类。

使用`getTime()`方法，您可以获得 2 个日期的毫秒数。`Date`然后，您可以使用两个日期之间减法的毫秒数创建另一个对象。并且您将拥有自第一个`Date`.

# iphone - NSBlockOperation 泄露 ARC

> ID：10634421
> 
> 赞同：2
> 
> 时间：2012-05-17T10:59:31.190
> 
> 标签：iphone, objective-c, nsblockoperation

我在引用块本身内部的“NSBlockOperation”时遇到了麻烦。我需要检查操作是否被取消，并且在启用 ARC 的项目中运行时，似乎对“searchOperation”的任何访问都会泄漏。

这段代码基本上什么都不做，它显示了启用 ARC 的项目中的泄漏，而在非 ARC 项目中工作正常。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.searchQueue = [[NSOperationQueue alloc] init];
    self.searchQueue.maxConcurrentOperationCount = 1;

    __block NSBlockOperation *searchOperation = [NSBlockOperation blockOperationWithBlock:^{
        if (searchOperation.isCancelled) return;
    }];

    [self.searchQueue addOperation:searchOperation];
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T11:10:51.270

您已声明 searchOperation`__weak`以避免保留周期：

```
__weak NSBlockOperation *searchOperation;
NSBlockOperation *tmp = [NSBlockOperation blockOperationWithBlock:^{
    if (searchOperation.isCancelled) return;
}];
searchOperation = tmp; 
```

另一种可能的解决方案：使用后在块内将 searchOperation 设置为 nil。

# ios - 文件从文档文件夹中神秘删除

> ID：10634422
> 
> 赞同：2
> 
> 时间：2012-05-17T10:59:37.633
> 
> 标签：ios, ipad

我们有一个用于 iPad 的 iOS 应用程序，它有奇怪的行为。我们将应用程序的状态存储在文档文件夹中的 XML 文件中。每隔一段时间，我们的测试人员就会报告说，当应用程序崩溃时，磁盘上的文件也会被删除。这很奇怪，因为我不知道是什么原因造成的。有关如何调试此问题的任何指针。

这个问题很复杂，因为这是随机发生的，而且只发生在某些 ipad（通常是 iPad2）上。我们正在使用 NSData initWithcontentOfFile。

这可能与文件的内存映射有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:44:57.170

确保您正在原子地编写

# ssis - 与 SSIS 中的临时表相比，更新主表时执行 SQL 任务出错

> ID：10634424
> 
> 赞同：2
> 
> 时间：2012-05-17T10:59:43.877
> 
> 标签：ssis

我已经用**Lookup分离了 Matching 行，并通过****ODLEDB Destination**将匹配的数据存储到一个临时表中。

完成数据流任务后，它在***Execute SQL Task***上出现错误。

*属性设置为*
`ResultSet: "NONE";
ConnectionType:"OLEDB";
Connection:"myDatabase";
SQLType: "Direct Input"`

***SQL语句***

```
Update dbo.[Payment_Transaction] 
SET pt.[Date] = tt.[Date], pt.[FromCurrency]=tt.FromCurrency], pt.[ToCurrency]=tt.[ToCurrency], pt.[TransRate]=tt.[TransRate], pt.[TransType] =tt.[TransType], pt.[TransAmount]=tt.[TransAmount] 
FROM dbo.[Payment_Transaction] pt INNER JOIN  [##temp_table] tt ON pt.[ID] = tt.[ID] 
```

得到**错误**说
`"Possible failure reasons: Problems with the query, "ResultSet" property not set correctly, parameters not set correctly, or connection not established correctly"`。

任何人都可以在可能拧干的地方遮住任何灯吗？

谢谢，

贾希德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:55:17.590

嗨，我猜是 tmp 表相关所以...尝试在连接管理器上设置 RetainSameConnection=TRUE，并在所有使用临时表的任务上设置 DelayValidation=TRUE。设置 RetainSameConnection=TRUE 可确保临时表在连接管理器时不会消失创建它的任务已完成。设置 DelayValidation=TRUE 可确保任务在创建表之前不会尝试检查表是否存在。

[http://consultingblogs.emc.com/jamiethomson/archive/2006/11/19/SSIS_3A00_-Using-temporary-tables.aspx](http://consultingblogs.emc.com/jamiethomson/archive/2006/11/19/SSIS_3A00_-Using-temporary-tables.aspx)

干杯，马里奥

# html - DIV 属性 TAB=...（不是 tabIndex！）

> ID：10634425
> 
> 赞同：0
> 
> 时间：2012-05-17T10:59:47.823
> 
> 标签：html

去年我在某处读到 tab 属性可以与任何 HTML 标记一起使用，理论上是为了通过按 TAB 键设置通过元素的顺序，但也用于其他一些目的，即分配一个数字值。再也找不到对它的任何引用，只有规范中提到的 tabIndex，但它不适用于 div，而“tab”在 IE、FF、Ch 和 Op 下工作得很好！

# iis-7 - 如何远程重启 IIS7 应用程序池

> ID：10634432
> 
> 赞同：3
> 
> 时间：2012-05-17T11:00:16.190
> 
> 标签：iis-7, application-pool

如何远程重启 IIS7 应用程序池

请注意，源计算机和目标计算机在 windows 2008 Server R2 中运行 IIS7，因此必须使用 Powershell。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T00:42:01.007

在远程计算机上，您需要运行以下命令来重新启动 IIS7 应用程序池：

```
Invoke-Command -ComputerName "webserver_computerName" -Credential $credentials_from_last_step -ScriptBlock { Add-PSSnapin WebAdministration; Restart-WebItem 'IIS:\AppPools\DefaultAppPool' } 
```

请使用此[链接](http://darrell.mozingo.net/2010/08/26/controlling-iis7-remotely-with-powershell/)，它可以帮助您使用 PowerShell 远程控制 IIS7。

有关 Restart-WebItem 的更多信息在[这里](http://technet.microsoft.com/en-us/library/ee807823.aspx)：

Restart-WebItem => 重新启动应用程序池或网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T14:40:50.397

您也可以只更改 web.config 文件（添加空格或进行更改）。这将导致应用程序池被回收，因为应用程序配置文件中可能存在更改。

# objective-c - 如何知道对象地址是否为 0x0？

> ID：10634436
> 
> 赞同：3
> 
> 时间：2012-05-17T11:00:28.587
> 
> 标签：objective-c, ios

我想检查我的对象地址是否为 0x0。如何在目标c中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T11:03:05.387

只需将参考比较为

```
if (obj == nil) 
```

或者

```
if (obj == NULL) 
```

或者

```
if (obj == 0) 
```

或者

```
if (!obj) 
```

您可以使用它们中的任何一个，它们都是相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T11:03:06.730

```
if(object == nil){

// it means memory for this object is not allocated 

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T11:02:31.910

您可以像这样测试 nil 指针：

```
if (!myObject) {
    // myObject is nil (0x0).
} 
```

或者像这样：

```
if (myObject == nil) {
    // myObject is nil (0x0).
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T11:03:12.453

该地址等于 nil，因此您必须将其与`nil`

# liferay-6 - 如何覆盖默认的 Liferay 登录身份验证？

> ID：10634437
> 
> 赞同：1
> 
> 时间：2012-05-17T11:00:34.140
> 
> 标签：liferay-6

我正在使用 Liferay 6.1，我想覆盖默认的 Liferay 登录身份验证并设置我的自定义身份验证。

到目前为止，我所做的是，我创建了一个钩子插件并在 portal.properties 文件中设置了以下属性

```
auth.pipeline.pre=com.liferay.portal.security.auth.MyCustomAuthenticator
auth.pipeline.enable.liferay.check=false 
```

其中 MyCustomAuthenticator 是我的自定义身份验证器类（它实现了 Authenticator）。

目前，Liferay 会首先检查此自定义身份验证，但随后又会转到 Liferay 本身进行进一步的 Liferay 身份验证。

我想覆盖这个 Liferay 验证。请帮我解决这个问题。这是我的身份验证器类：

```
public class MyCustomAuthenticator implements Authenticator {  

  public int authenticateByEmailAddress(long arg0, String arg1, String arg2, Map<String, String[]> arg3, Map<String, String[]> arg4) throws AuthException {  

    System.out.println("succeeded by mail");  
    return SUCCESS;  
  }  

 public int authenticateByScreenName(long arg0, String arg1, String arg2, Map<String, String[]> arg3, Map<String, String[]> arg4) throws AuthException {  

    System.out.println("succeeded by screen name");  
    return SUCCESS;  
  }  

 public int authenticateByUserId(long arg0, long arg1, String arg2, Map<String, String[]> arg3, Map<String, String[]> arg4) throws AuthException {  

    System.out.println("succeeded by user id");  
    return SUCCESS;  
  }  

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T08:22:06.673

在 portal-ext.properties 中添加以下属性，然后重新启动服务器

```
auth.pipeline.enable.liferay.check=false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:31:56.900

在您的钩子项目中记住文件portal.properties

```
place auth.pipeline.pre =com.liferay.portal.security.auth.MyCustomAuthenticator 
auth.pipeline.enable.liferay.check = false 
```

以及在门户网站扩展属性中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-06T14:08:58.257

我以同样的方式制作了一个钩子，在我的钩子 portal.properties 覆盖中使用了这两行，并且在 portal-ext.properties 中进行了很好的衡量：

```
auth.pipeline.pre=com.liferay.portal.security.auth.MyCustomAuthenticator
auth.pipeline.enable.liferay.check=false 
```

但是，即使帐户已经存在，它似乎也不想登录 Liferay。我能够让它完全工作并完全跳过 Liferay 身份验证。我只需要覆盖portal.properties 的钩子，我从portal-ext 中删除了这两行。在您的自定义身份验证器中，而不是仅仅返回成功，(com.liferay.portal.security.auth.Authenticator.SUCCESS)

您想返回 SKIP_LIFERAY_CHECK 。这与 SUCCESS 相同，只是要确保身份验证管道知道跳过 liferay 检查。

This should force it to work. I believe the source code (for Liferay 6.2 ga5) does not properly take into account the "Skip Liferay Check" property, and this essentially forces it.

# java - GWT 的 java.io 实现？

> ID：10634439
> 
> 赞同：3
> 
> 时间：2012-05-17T11:00:37.843
> 
> 标签：java, gwt, stream

是否有任何开源库提供部分或全部 java.io 类和接口的实现？具体来说，我正在寻找以下实现：

*   `InputStream`
*   `DataInput`
*   `DataOutput`
*   `DataInputStream`
*   `DataOutputStream`
*   `ByteArrayInputStream`
*   `ByteArrayOutputStream`

如果我从头开始编写应用程序，我会避免使用它们，但我正在将现有的 Java 应用程序移植到 GWT。更改现有代码以避免使用这些类根本不切实际。

由于没有一个类涉及文件 I/O，我认为为 GWT 实现这些特定类应该非常简单。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:33:04.070

[它不是一个独立的库，但 Google 确实为他们的Quake 2 port](http://code.google.com/p/quake2-gwt-port/source/browse/src/com/google/gwt/corp/emul/java/io/)实现了一点 java.io。

# perl - 使用 WWW::Mechanize 在亚马逊网站上导航表单

> ID：10634444
> 
> 赞同：-1
> 
> 时间：2012-05-17T11:00:50.697
> 
> 标签：perl

我正在使用[`WWW::Mechanize`](https://metacpan.org/module/WWW%3a%3aMechanize)自动将我的电子邮件地址添加为首选地址。经过很多困难后，我可以登录该页面，但是当我尝试将电子邮件地址添加为允许的电子邮件地址时，它不起作用。连链接都不显示。我究竟做错了什么？亚马逊页面的链接是[这个](https://www.amazon.com/gp/digital/fiona/manage?ie=UTF8&%2aVersion%2a=1&%2aentries%2a=0#pdocSettings)。

我的代码：

```
use WWW::Mechanize;
use HTTP::Cookies;
use HTML::Form;
use WWW::Mechanize::Link;

my $bot = WWW::Mechanize->new();
$bot->agent_alias( 'Linux Mozilla' );

$bot->cookie_jar( HTTP::Cookies->new(file           => "cookies.txt",
                                     autosave       => 1,
                                     ignore_discard => 1, ) );
# Connect to the login page
my $response = $bot->get( 'https://www.amazon.com/gp/css/homepage.html/' );

# Get the login form. You might need to change the number.
$bot->form_number(3);

# Enter the login credentials.
$bot->field( email => 'email' );
$bot->field( password => 'pass' );
$response = $bot->click();

#print $response->decoded_content;
$bot->get( 'https://www.amazon.com/gp/digital/fiona/manage?ie=UTF8&*Version*=1&*entries*=0#pdocSettings' );
my @links = $bot->find_all_links( tag => "a" );

foreach (@links)
{
  print $_->text()."\n" ;
} 
```

我的篡改数据是这个

```
Referer=https://www.amazon.com/gp/digital/fiona/manage?ie=UTF8&%2AVersion%2A=1&%2Aentries%2A=0

POSTDATA=sid=183-7190983-6755358&newEmail=myid%40mailhost.com 
```

编辑：搜索后我意识到它`WWW::Mechanize`可能无法实现这一点，因为它缺乏 JavaScript 支持。我决定使用[`WWW::Scripter`](https://metacpan.org/module/WWW%3a%3aScripter)插件。有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:30:36.703

您在其他帖子中找到了问题的答案：[Calling a link from perl](https://stackoverflow.com/questions/10646505/calling-a-link-from-perl/10653681#10653681)

对于与此类似的未来任务，我建议您执行以下解决方法：

*   安装谷歌浏览器（如果你还没有的话）
*   将浏览器导航到要模拟的表单页面
*   在提交按钮上单击鼠标右键并选择*“检查元素”*
*   切换到*“网络”*选项卡
*   点击表单上的提交按钮
*   请参阅*“网络”*表中的信息，尤其是*“标题”*和*“响应”*子选项卡中的信息。

通过这种调试你会发现服务器和浏览器之间的通信是准确的，包括cookies、referer、请求方法、url、提交数据等。

# php - REST 应用程序 POST 和重定向

> ID：10634446
> 
> 赞同：0
> 
> 时间：2012-05-17T11:01:02.313
> 
> 标签：php, rest

通常在 POST 请求之后需要重定向到新的 url（至少它是构建明显的 Web 应用程序的正确做法）。

收到并完成 POST 后如何处理 RESTfull 应用程序？我应该用新的 url 发送给客户端 302 Header 吗？

还有一个与 REST 方法相关的问题：分页、排序和过滤通用 GRID 怎么样？我说的是通常的 javascript 网格，它具有搜索、排序、过滤和分页等功能，它如何适用于 REST 方法（它是 GET ？）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T11:19:23.553

在创建资源的 POST 请求之后，实际上有一个专用的状态码要返回：[201 Created](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.2)。它伴随着一个`Location`指向新报告的响应的 HTTP 标头。

至于分页，通常的方法是使用 GET 查询参数定义要检索的数据子集。例如，要检索员工列表的前 50 个条目，请求可能如下所示：

```
GET /employees?entries=50 
```

接下来的 50 个像这样：

```
GET /employees?start=50&entries=50 
```

等等。

# c - 停止服务前的 WTSSendmessage

> ID：10634450
> 
> 赞同：0
> 
> 时间：2012-05-17T11:01:13.860
> 
> 标签：c, winapi, service, windows-services, window

一旦用户尝试停止服务，我试图显示一个消息框。

为此，我使用了 API……一旦事件发生`WTSSendmessage`，我就调用了该函数……`SERVICE_CONTROL_STOP`

我在上面的步骤中正确吗？因为一旦用户尝试停止服务，我就没有收到消息框..

请指导我...

下面是我的代码片段::

```
case SERVICE_CONTROL_STOP:
    WTSSendMessage = (fptr1)GetProcAddress(hinstLib, "WTSSendMessage");
    BOOL ret = WTSSendMessage(WTS_CURRENT_SERVER_HANDLE, dwSession, lpszTitle, 12 ,lpszText, 7 ,MB_YESNO|MB_ICONINFORMATION, 0, &res, TRUE);

    ServiceStatus.dwCurrentState = SERVICE_STOP_PENDING;
    SetServiceStatus( serviceStatusHandle, &serviceStatus );
    SetEvent( stopServiceEvent );
    return; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:40:33.770

按照我在您之前的问题中向您展示的[MSDN 文章](http://msdn.microsoft.com/en-us/gg465093)中的描述使用 WTSGetActiveConsoleSessionId() 。该文章包含您需要的所有代码。

我还敦促您对 API 调用进行错误检查。在没有这种帮助的情况下诊断错误比需要的更难。

# jsp - 如何使用jsp中的参数修剪url中的空格？

> ID：10634458
> 
> 赞同：0
> 
> 时间：2012-05-17T11:01:55.577
> 
> 标签：jsp, url, trim

在我的应用程序中，当最终用户单击超链接时，将执行 javascript 函数。它会生成请求。但是使用参数时，会在参数之间生成带有空格的 url。

如何修剪网址中的空格？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:17:22.180

URL 不得包含文字空格。您应该使用内置的 javascript 函数[encodeURI](http://www.w3schools.com/jsref/jsref_encodeURI.asp)对 url 进行编码。

```
<script type="text/javascript">

    var uri="my test.asp?name=ståle&car=saab";
    document.write(encodeURI(uri)+ "<br />");

</script> 
```

或者更好地使用[encodeURIComponent](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)，因为您想对 URL 参数进行编码。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:06:28.540

理想情况下，您应该检查生成此类 url 的 JavaScript 代码，参数之间有空格。这是不正确的。因此，您应该修改生成 url 的 javascript 代码，而不是尝试修剪 url。

# actionscript-3 - as3 将字符串解析为 URLVariables

> ID：10634461
> 
> 赞同：1
> 
> 时间：2012-05-17T11:02:27.563
> 
> 标签：actionscript-3, urlvariables

例如，如果一个字符串是

```
data = "success=0" 
```

或者

```
data = "success=1&registration=20"; 
```

如何将所有变量解析为 URLVariables 类对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:07:55.510

```
var urlVars:URLVariables = new URLVariables(data); 
```

或者

```
urlVars.decode(data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:06:25.637

如果我没记错的话，这将解决您的问题。

```
var urlvar:URLVariables = new URLVariables(data); 
```

# asp.net - 上载到 Web 服务器时，asp 站点将无法正常工作？

> ID：10634467
> 
> 赞同：0
> 
> 时间：2012-05-17T11:02:41.877
> 
> 标签：asp.net, web-config

```
 <?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="rde_410978ConnectionString" connectionString="Data Source=SQL2008.net.dcs.hull.ac.uk;Initial Catalog=rde_410978;Integrated Security=True"
      providerName="System.Data.SqlClient" />
  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
</configuration> 
```

这是我的配置文件。我通过构建 > 发布网站将其发布到服务器。

由于大学已经设置了服务器并且它对其他人正常工作，因此没有任何错误是由于服务器造成的。

错误：

```
Configuration Error 
Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: Unrecognized attribute 'targetFramework'. Note that attribute names are case-sensitive.

Source Error: 

Line 16: 
Line 17:   <system.web>
Line 18:     <compilation debug="false" strict="false" explicit="true" targetFramework="4.0" />
Line 19: 
Line 20:     <authentication mode="Forms">

Source File: C:\RDEUsers\NET\410978\web.config    Line: 18 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:46:51.770

你检查过IIS吗？

有时 IIS 设置为不同的框架。

[http://technet.microsoft.com/en-us/library/cc754523(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc754523(v=ws.10).aspx)

这是一个类似的问题和解决方案：

[http://forums.asp.net/t/1491204.aspx/1](http://forums.asp.net/t/1491204.aspx/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:49:54.480

我认为这是因为部署环境的 .net 版本，我认为它不是 4.0。

如果他们列出了相同的目标框架，例如 4.0，请与其他人一起检查。

# c# - 如何使部分代码每 5 秒处理一次

> ID：10634470
> 
> 赞同：0
> 
> 时间：2012-05-17T11:02:57.243
> 
> 标签：c#, events, timer, gps, handler

我有一个具有事件处理程序的函数。它正在读取 gps 位置，并且每次读取位置时我将数据放入数据库中，问题是我在一秒钟内有 3 个输入。

例如，如何使某些部分代码每 5 秒执行一次？

我曾尝试做 timer_tick，但我不知道该怎么做，因为这是带有事件处理程序的函数。

这是我的功能：

```
private void GPS_PositionReceived(string Lat, string Lon)
{
    arrLon = Lon.Split(new char[] { '°', '"' }, StringSplitOptions.RemoveEmptyEntries);
    dblLon = double.Parse(arrLon[0]) + double.Parse(arrLon[1], new System.Globalization.NumberFormatInfo()) / 60;
    deciLon = arrLon[2] == "E" ? dblLon : -dblLon;
    arrLat = Lat.Split(new char[] { '°', '"' }, StringSplitOptions.RemoveEmptyEntries);
    dblLat = double.Parse(arrLat[0]) + double.Parse(arrLat[1], new System.Globalization.NumberFormatInfo()) / 60;
    deciLat = arrLat[2] == "N" ? dblLat : -dblLat;

                ...  //code
} 
```

我希望这部分代码每 5 秒使用一次。

哦，是的，这是事件处理程序：

```
GPS.PositionReceived += new NmeaInterpreter.PositionReceivedEventHandler(GPS_PositionReceived); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:07:58.883

我想你想说的是你的方法每秒被调用 3 次，而实际上你只希望它每 5 秒被调用一次？正确的。

如果是这样，存储一个

```
DateTime lastDBUpdate 
```

变量，每次写入数据库时​​，更新此时间戳。

然后你可以使用像

```
if(DateTime.Now.Subtract(lastDBUpdate).TotalSeconds < 5) { return; } 
```

作为您方法的第一行。

```
// Timestamp of last update time
// Default to very old timestamp on init so it always runs once straight away
private DateTime lastDBUpdate = DateTime.MinValue;

private void GPS_PositionReceived(string Lat, string Lon)
{
    // Throttle this method
    if(DateTime.Now.Subtract(lastDBUpdate).TotalSeconds < 5) return;

    // your existing code

    // Update the timestamp 
    lastDBUpdate = DateTime.Now;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:07:07.153

只需使用计时器，[检查这个](http://www.dotnetperls.com/timer)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T11:08:16.637

您总是可以有一个静态/类级别的变量来指示上次保持 GPS 位置的时间。

```
Public DateTime LastGPSInsert {get; set;}

...

if((DateTime.Now - LastGPSInsert).TotalSeconds > 5)
{
    //Do Insert
    LastGPSInsert = DateTime.Now;
}
//Skip insert 
```

# actionscript-3 - 无法使用 Flash cs3 和 AS3 在 Red 5 服务器上保存视频

> ID：10634477
> 
> 赞同：0
> 
> 时间：2012-05-17T11:03:05.467
> 
> 标签：actionscript-3, webcam, red5, flash-cs3, netconnection

我正在尝试捕获我的网络摄像头，然后尝试将其保存到 red5 服务器，然后我想将其取回（这是下一部分）。我可以使用 Flash 在我的网页上播放网络摄像头，但是我无法将视频录制到 red5 服务器。每次我遇到异常

```
ArgumentError: Error #2126: NetConnection object must be connected.
    at flash.net::NetStream/flash.net:NetStream::construct()
    at flash.net::NetStream$iinit()
    at WebCam_fla::MainTimeline/click1()
onBWDone 
```

**我的AS3如下：**

```
BtnStart.addEventListener(MouseEvent.CLICK, click1);
BtnStop.addEventListener(MouseEvent.CLICK, click2);
var camera;
var video;
var bandwidth:int = 100;
var quality:int = 100;
var nc:NetConnection;
var ns:NetStream;
function click1(event:MouseEvent):void 
{

camera=Camera.getCamera();
camera.setMode(320,240,10000);
video = new Video(camera.width, camera.height);
video.attachCamera(camera);
video.smoothing;
txtCameraName.text=camera.name;
nc = new NetConnection();
nc.client = { onBWDone: function():void{ trace("onBWDone") } };
addChild(video);

nc.connect("rtmp://localhost/oflaDemo");
ns = new NetStream(nc); 
ns.attachCamera(camera);
ns.publish( "file1", "record" );

}   

function click2(event:MouseEvent):void
{

    if(video)
    {
    video.visible=false;
    }
} 
```

谁能告诉我我在这里犯了什么错误。请大家帮帮我。我是否必须做任何其他事情才能做到这一点。我是否必须更改我在 **nc.connect(" rtmp://localhost/oflaDemo");** .这是给我错误的行。请帮助。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T03:37:51.500

我在建立连接之前犯了创建流的错误。因此对代码进行了轻微更改以检查是否建立了连接，然后只使用连接创建流。这解决了我的问题。干杯:)

# apache - Apache .htaccess - 以下几行的含义是什么

> ID：10634482
> 
> 赞同：0
> 
> 时间：2012-05-17T11:03:16.073
> 
> 标签：apache

从那里我可以获得有关 apache .htaccess 作为初学者的所有知识

以下几行是什么意思：

重写引擎开启

RewriteRule ^([a-z0-9-_]*)$ index.php?do=$1 [NC]

重写规则 ^([a-z0-9-_]*)/$ index.php?do=$1 [NC]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:05:07.397

结帐文档 atL

[http://httpd.apache.org/docs/current/howto/htaccess.html](http://httpd.apache.org/docs/current/howto/htaccess.html)

您提到的命令是重写引擎“一个基于规则的重写引擎，用于动态重写请求的 URL”的一部分。

来自文档：
RewriteEngine 指令
描述：启用或禁用运行时重写引擎
语法：RewriteEngine on|off

亲切的问候，
博

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:44:22.437

这意味着 URL 将被重写，即：

[http://yourdomain.com/whatever](http://yourdomain.com/whatever)

将在内部翻译成如下内容：

[http://yourdomain.com/index.php?do=whatever](http://yourdomain.com/index.php?do=whatever)

# java - 为什么 Java HashMap 变慢了？

> ID：10634483
> 
> 赞同：2
> 
> 时间：2012-05-17T11:03:21.397
> 
> 标签：java, hashmap, bufferedreader

我尝试使用文件内容构建地图，我的代码如下：

```
 System.out.println("begin to build the sns map....");
    String basePath = PropertyReader.getProp("oldbasepath");
    String pathname = basePath + "\\user_sns.txt";
    FileReader fr;
    Map<Integer, List<Integer>> snsMap = 
            new HashMap<Integer, List<Integer>>(2000000);
    try {
        fr = new FileReader(pathname);
        BufferedReader br = new BufferedReader(fr);
        String line; 
        int i = 1;
        while ((line = br.readLine()) != null) {
            System.out.println("line number: " + i);
            i++;

            String[] strs = line.split("\t");
            int key = Integer.parseInt(strs[0]);
            int value = Integer.parseInt(strs[1]);
            List<Integer> list = snsMap.get(key);
            //if the follower is not in the map
            if(snsMap.get(key) == null) 
                list = new LinkedList<Integer>();
            list.add(value);
            snsMap.put(key, list);
            System.out.println("map size: " + snsMap.size());
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    System.out.println("finish building the sns map....");
    return snsMap; 
```

**该程序起初非常快，**但当打印的信息是：

```
 map size: 1138338
 line number: 30923602
 map size: 1138338
 line number: 30923603 
 .... 
```

我试图用两个 System.out.println() 子句来判断 BufferedReader 和 HashMap 而不是 Java 分析器的性能。有时获取行号信息后需要一段时间才能获取地图大小的信息，有时获取地图大小后需要一段时间才能获取行号信息的信息。我的问题是：这让我的程序变慢了？大文件的 BufferedReader 或大地图的 HashMap？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:10:26.553

如果您从 Eclipse 内部对此进行测试，您应该意识到写入 stdout/stderr 的**巨大**性能损失，因为 Eclipse 在控制台视图中捕获该输出。在紧密循环中打印始终是一个性能问题，即使在 Eclipse 之外也是如此。

但是，如果您抱怨的是处理 3000 万行后出现的速度下降，那么我敢打赌这是内存问题。首先，由于强烈的 GC'ing，它变慢了，然后它与`OutOfMemoryError`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T11:07:40.627

您将不得不使用一些分析工具检查您的程序，以了解为什么它很慢。一般来说，文件访问比内存操作慢得多（除非你在内存中受到限制并进行过多的 GC），所以猜测是读取文件在这里可能会更慢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T11:32:45.373

**在进行分析之前，您将不知道什么是慢的，什么不是。**

最有可能的是，`System.out`将显示为瓶颈，然后您将不得不再次在没有它们的情况下进行分析。`System.out`是寻找性能瓶颈的*最糟糕*的事情，因为这样做通常会增加更严重的瓶颈。

您的代码的一个明显优化是移动该行

```
snsMap.put(key, list); 
```

进入`if` 声明。您只需要在创建*新*列表时放置它。否则，看跌期权只会用自己替换当前值。

与`Integer`对象相关的 Java 成本（尤其是 Java Collections API 中整数的使用）主要是内存（以及**垃圾收集**！）问题。有时，您可以通过使用**[GNU trove](http://trove.starlight-systems.com/)**等原始集合获得显着收益，这取决于您可以如何调整代码以有效地使用它们。Trove 的大部分优势在于内存使用。绝对尝试重写您的代码以使用`TIntArrayList`和`TIntObjectMap`来自 GNU trove。我也会避免使用链表，尤其是对于原始类型。

粗略估计，a`HashMap<Integer, List<Integer>>`每个条目至少需要 3*16 字节。双向链表再次需要每个存储条目至少 2*16 字节。1m 个键 + 30m 个值 ~ 1 GB。还没有包括开销。使用 GNU trove `TIntObjectHash<TIntArrayList>`，每个键应该是 4+4+16 个字节，每个值应该是 4 个字节，所以 144 MB。两者的开销可能相似。

Trove 使用较少内存的原因是这些类型专门用于原始值，例如`int`. 它们将`int`直接存储值，因此每个使用 4 个字节来存储。

Java 集合`HashMap`由许多对象组成。它大致看起来像这样：有一些`Entry`对象分别指向一个键和一个值对象。这些*必须*是对象，因为泛型在 Java 中的处理方式。在您的情况下，键将是一个`Integer`对象，它使用 16 个字节（4 个字节标记，4 个字节类型，4 个字节实际`int`值，4 个字节填充）AFAIK。这些都是 32 位系统估计。因此，单个条目`HashMap`可能需要大约 16（条目）+ 16（整数键）+ 32（但为空的 LinkedList）字节的内存，所有这些都需要考虑用于垃圾回收。

如果你有很多`Integer`对象，它只*需要*4 倍的内存，就好像你可以使用`int`原语存储所有东西一样。这是您为在 Java 中实现的干净 OOP 原则所付出的代价。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T11:07:40.863

最好的方法是使用分析器（例如，JProfile）运行您的程序并查看哪些部分运行缓慢。例如，调试输出也会减慢您的程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T11:11:48.927

Hash Map 并不慢，但实际上它是地图中最快的。HashTable 是地图中唯一的线程安全的，有时可能很慢。

重要提示：在您读取数据后关闭 BufferedReader 和 File ...这可能会有所帮助。

例如：br.close() file.close()

请从任务管理器中检查您的系统进程，可能有太多进程在后台运行。

有时 Eclipse 是真正的资源重，所以尝试从控制台运行它来检查它。

# function - 需要：返回超过 1 个输出的匿名函数的 Matlab 示例

> ID：10634491
> 
> 赞同：24
> 
> 时间：2012-05-17T11:04:03.427
> 
> 标签：function, matlab, arguments, anonymous-function

我使用匿名函数进行简单的数据值转换。匿名函数使用以下语法定义

```
sqr = @(x) x.^2; 
```

我想要一个简单的匿名函数，它可以返回多个输出，如下所示。. .

```
[b,a] = myAnonymousFunc(x); 
```

Matlab 文档表明这是可能的，但它没有给出定义此类函数所需的语法示例。

[http://www.mathworks.co.uk/help/techdoc/matlab_prog/f4-70115.html#f4-71162](http://www.mathworks.co.uk/help/techdoc/matlab_prog/f4-70115.html#f4-71162)

定义这样一个函数的语法是什么[**在一行中，就像我帖子顶部的代码示例**]？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-17T11:13:31.827

这能满足您的需要吗？

```
>> f = @(x)deal(x.^2,x.^3);
>> [a,b]=f(3)
a =
     9
b =
    27 
```

在此示例中，您需要确保仅`f`使用两个输出参数进行调用，否则会出错。

**编辑**

至少对于最新版本的 MATLAB，您可以使用以下`~`语法仅返回一些输出参数：

```
>> [a,~]=f(3)
a =
     9
>> [~,b]=f(3)
b =
    27 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-12-17T01:08:15.750

如果您不想使用 tilde ~ 跳过输出，也不想输出元胞数组，那么您只需要一个辅助匿名函数：

```
 deal2 = @(varargin) deal(varargin{1:nargout});
 myAnonymousFunc = @(x) deal2(x.^2, x.^3); 
```

那么您可以只获得第一个输出参数或第一个和第二个输出参数：

```
x = 2;
[b,a] = myAnonymousFunc(x)
b = myAnonymousFunc(x) 
```

结果：

> b = 4
> 
> a = 8
> 
> b = 4

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-17T11:13:34.370

如果被调用的函数返回多个输出，则可以从匿名函数获得多个输出。有关此操作的示例，请参阅 MathWorks 网站上的此[博客文章。](http://blogs.mathworks.com/loren/2007/01/31/multiple-outputs/)

有两种方法可以从匿名函数中获取多个输出：

*   调用返回多个输出的函数

    从链接到的博客文章中，他们使用[`eig`](http://www.mathworks.co.uk/help/techdoc/ref/eig.html)这样的功能

    ```
    fdoubleEig = @(x) eig(2*x)
    [e, v] = fdoubleEig(magic(3)) 
    ```

*   或者，您可以构造一个匿名函数，该函数使用该[`deal`](http://www.mathworks.co.uk/help/techdoc/ref/deal.html)函数返回多个输出。

    这是我编的一个：

    ```
    >>> f = @(x, y, z) deal(2*x, 3*y, 4*z)
    >>> [a, b, c] = f(1, 2, 3)

    a = 
         2
    b = 
         6
    c = 
         12 
    ```

**编辑**：正如 Sam Roberts 所指出的，在我链接到的博客文章中，使用时必须使用正确数量的输出参数`deal`，否则会引发错误。解决此问题的一种方法是返回结果单元格。例如

```
>>> f = @(x, y, z) {2*x, 3*y, 4*z}

>>> t = f(1, 2, 3)

>>> [a, b, c] = t{:}

    a = 
         2
    b = 
         6
    c = 
         12 
```

# xml - XSLT 1.0 将不同的 xsl 动态导入到主 xsl

> ID：10634493
> 
> 赞同：0
> 
> 时间：2012-05-17T11:04:08.290
> 
> 标签：xml, xslt-1.0

我正在使用 XSL 1.0 版本。我有一个 master.xsl，它将 xml 作为输入并在 html 中创建。它将生成带有标签和值的 html 文件。

现在我想生成带有不同语言标签的html。假设输入中的语言代码是“EN”，标签应该是英语，否则应该是其他语言。

我尝试使用

```
<xsl:importhref="en.xsl" 
 use-when="system-property('xsl:languageCode')='EN'"/> 
```

但它不适用于 XSL 1.0。

在 XSLT 中是否有任何其他方法可以做到这一点，或者是否有更好的非 xslt 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:27:46.120

use-when 属性需要 XSLT 2.0。

答案是反转您的导入层次结构。与其将专用代码 (en.xsl) 导入到包含通用代码 (master.xsl) 的模块中，不如反其道而行之（让 en.xsl 导入 master.xsl）。然后将专用模块 en.xsl 设为样式表入口点。

# html - 如何将 href 也显示为文本？

> ID：10634494
> 
> 赞同：10
> 
> 时间：2012-05-17T11:04:08.103
> 
> 标签：html, anchor, href

我想得到与下面相同的结果，但没有重复（相同的链接出现两次）：

```
<html>
<body>
<a href="http://www.w3schools.com">http://www.w3schools.com</a>
</body>
</html> 
```

在没有 Javascript 的情况下可以在静态 HTML 中使用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2020-08-04T07:41:56.223

`attr`通过使用 CSS 中的函数，您可以使用 CSS 选择器执行此操作而无需重复。

在您的样式表中，您可以添加以下内容：

```
a::after {
    content: attr(href);
} 
```

对于您在问题中的示例：

```
<html>
<style>
a::after {
        content:  attr(href);
}
</style>
<body>
    <a href="http://www.w3schools.com">Some text</a>
</body>
</html> 
```

并在 之后显示链接`Some text`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T11:06:41.567

HTML 标准^((a))仅允许将某些内容放置在`href`URL 本身中，并且“请使用文本描述作为链接”标记不是其中之一。

你是对的，它会节省很多重复，尽管大多数人可能认为链接的文本描述应该比链接更易于阅读。例如，您不希望在您的网页中看到以下内容：

> [`http://www.google.com/patents?id=vmidAAAAEBAJ&printsec=frontcover&dq=database&hl=en&sa=X&ei=tN-0T-TtKu3TmAWNq7DiDw&ved=0CDUQ6AEwAA`](http://www.google.com/patents?id=vmidAAAAEBAJ&printsec=frontcover&dq=database&hl=en&sa=X&ei=tN-0T-TtKu3TmAWNq7DiDw&ved=0CDUQ6AEwAA)

话虽如此，您*可以*使用 CSS 来做到这一点，特别是通过使用`after`将包含文本`href`属性的元素添加到文档中。我建议将其限制为特定的类，这样您就不会修改`a`您拥有的每个标签，例如：

```
<html>
    <style>
        .add-link::after {
            content: " (" attr(href) ")";
        }
    </style>
    <body>
        <a class="add-link" href="http://www.example.com">Link added</a>
        <p />
        <a href="http://www.example.com">No link added</a>
    </body>
</html> 
```

第一个链接将添加链接文本，第二个则不会。不幸的是，这并不能解决巨大的 URI（见上文）作为文本放置在页面上的问题，但您至少可以选择不附加`add-link`类）：

> ![](../Images/8a0d73ab419d15fe218c68b1e7a53c47.png)

* * *

^((a)) : HTML5 标准在此处指定 A 元素[，](http://www.w3.org/TR/html5/links.html#attr-hyperlink-href)[在此处](http://www.w3.org/TR/html5/the-a-element.html#the-a-element)指定URI 规范。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T11:06:35.307

你不能，你要么必须使用 JavaScript，要么保持原样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T11:09:14.200

不，没有办法仅使用静态 html 删除重复项。

这也不是必需的。许多网页使用 PHP 或类似的东西，用 PHP 制作链接很容易:)

PHP 示例：

```
<a href="<?php echo $item->link; ?>"><?php echo $item->link; ?></a> 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-17T11:08:53.623

实际上格式化链接的一种好方法是：

```
<html>
<body>
<a href="http://www.w3schools.com">w3schools.com</a>
</body>
</html> 
```

# java - 如何在特定浏览器（如 Android 中的 Chrome 或 Firefox）中的 Web-View 中加载应用程序

> ID：10634497
> 
> 赞同：3
> 
> 时间：2012-05-17T11:04:27.467
> 
> 标签：java, android

我是 Android 新手，我正在做一个应用程序，我需要在平板电脑上的 Web-View 中加载我们现有的应用程序。在平板电脑中，当我使用 Web-View 加载我的应用程序时，我的应用程序正在默认浏览器中加载。

如何在平板电脑上的 Web 视图中的特定浏览器 [如 Chrome 或 Firefox] 中加载我的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:14:33.680

> 在平板电脑中，当我使用 Web-View 加载我的应用程序时，我的应用程序正在默认浏览器中加载。

`WebView`是您放置在您的一项活动的 UI 中的小部件。它不是默认浏览器。

如果您正在调用`loadUrl()`，`WebView`并且它正在调出默认浏览器，那是因为 Web 服务器正在发出重定向。您可以在您的应用程序中添加一个`WebViewClient`来处理此问题，如下所述：[https ://stackoverflow.com/a/8941605/115145](https://stackoverflow.com/a/8941605/115145)

> 如何在平板电脑上的 Web 视图中的特定浏览器 [如 Chrome 或 Firefox] 中加载我的应用程序？

如果您确实想将内容加载到 Web 浏览器中，您可以让*用户*选择*用户*希望使用的浏览器。通常，这将在您启动 URL 时自动发生（例如，通过`startActivity()`on an `ACTION_VIEW` `Intent`）——如果有多个浏览器，并且他们没有设置默认值，用户将看到一个选择器来选择他们想要的浏览器使用。

# android - 在 sdcard 中制作文件夹并受密码保护：android

> ID：10634499
> 
> 赞同：8
> 
> 时间：2012-05-17T11:04:43.233
> 
> 标签：android

我将视频和图像保存在一个文件夹中..现在我想将此文件夹设置为受密码保护，这意味着在打开此文件夹时需要输入密码才能查看其中的文件，
希望在这里能得到任何相关的答案。 .如果还有其他可能的请建议..

```
 try {
                        dirName = "/mydirectory/";
                        fileName = new Long(
                                SystemClock.currentThreadTimeMillis())
                                .toString()
                                + ".png";
                    } catch (NullPointerException e) {
                        // TODO: handle exception
                    }
                    try {
                        if (android.os.Environment
                                .getExternalStorageState()
                                .equals(android.os.Environment.MEDIA_MOUNTED)) {
                            File sdCard = Environment
                                    .getExternalStorageDirectory();
                            File dir = new File(sdCard.getAbsolutePath()
                                    + dirName);
                            dir.mkdirs();

                            File file = new File(storedImagePath);

                            os = new FileOutputStream(file, true);

                            byte[] byteArray = receivedImageData.getBytes();

                            byteArray = Base64.decode(byteArray, 0);

                            os.write(byteArray);
                            os.flush();
                            os.close();

                        } else {

                        }

                    } catch (Exception e) {

                    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T11:20:39.433

我想建议一种不同/可行的方法，**加密您的文件**！

看看[这个答案！](https://stackoverflow.com/q/2743741/977676)

即使您成功实施了密码保护（哇！），这也是缺点，

1.  这只会在您的应用程序运行时提供保护。
2.  SD 卡应该被传输（因此您的应用程序无法始终保护 SD 卡上的文件）。

# uilabel - UILabel 和 UILabel 文本的不透明度不同

> ID：10634501
> 
> 赞同：4
> 
> 时间：2012-05-17T11:04:48.880
> 
> 标签：uilabel, xcode4.3

我有一个`UILabel`不透明度已通过使用更改为空白的`[UIColor clearColor]` 我现在想将标签中文本的不透明度更改为可能的完整级别。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T11:02:54.380

使用以下代码更改`UILabel`文本的不透明度

```
[headerLabel setAlpha:0.5]; 
```

快乐编码..:)

# algorithm - 如何在合并排序中控制我的算法的堆栈溢出

> ID：10634503
> 
> 赞同：1
> 
> 时间：2012-05-17T11:04:52.160
> 
> 标签：algorithm, c#-4.0, stack-overflow

嗨，我仍然不知道为什么我的代码让我的堆栈溢出它的接缝，我的合并排序算法的下限和上限改变了不应该做的地方..

```
 int[] arr = new int[10];
    private void button1_Click(object sender, EventArgs e)
    {
        merge_sort(0, 9);
    }

    private void merge_sort(int left, int right)
    {
        if (left > right)
            merge(left, right, (left + right) / 2);
        else
            merge_sort((left + right) / 2 + 1, right);
        merge_sort(left, (left + right) / 2);

    }
    void merge(int low, int high, int mid)
    {
        int i, j, k, t;
        j = low;
        for (i = mid + 1; i <= high; i++)
        {
            while (arr[j] <= arr[i] && j < i)
                j++;
            if (j == i)
                break;
            t = arr[i];
            for (k = i; k > j; k--)
                arr[k] = arr[k - 1];
            arr[j] = t;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:13:18.507

您的 merge_sort 递归方法将永远不会结束，因为**总是调用最后一行**再次调用 merge_sort ......它是无限递归的，这应该会导致 stackoverflow。

```
private void merge_sort(int left, int right)
{
    if (left > right)
    merge(left, right, (left + right) / 2);
 else
    merge_sort((left + right) / 2 + 1, right);
 merge_sort(left, (left + right) / 2);  //<-- this is your problem!
} 
```

我认为（也许）你想这样做：

```
private void merge_sort(int left, int right)
{
    if (left > right)
    merge(left, right, (left + right) / 2);
 else
 {
    merge_sort((left + right) / 2 + 1, right);
    merge_sort(left, (left + right) / 2)
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:10:02.177

你有

```
merge_sort((left + right) / 2 + 1, right); 
```

我认为应该是

```
merge((left + right) / 2 + 1, right); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:43:07.673

我已经像这样更改了我的代码。堆栈溢出问题已解决，但我没有得到正确的结果！！！

```
 private void merge_sort(int left, int right)
    {
        if (left > right)
            merge(left, right, (left + right) / 2);
        else
        {
            merge_sort((left + right) / 2 + 1, right);
            merge(left, right, (left + right) / 2+1);

        }

    } 
```

最近我发现如何通过更改我的部分代码来控制它，但我仍然不明白是什么问题！！！！这是更改：

```
 private void merge_sort(int low, int high)
    {

int mid;
        if (low != high)
        {
            mid = (low + high) / 2;
            merge_sort(low, mid);
            merge_sort(mid + 1, high);
            merge(low, mid, high);
        } 
```

# hadoop - HBase UI 不显示任何区域服务器

> ID：10634505
> 
> 赞同：0
> 
> 时间：2012-05-17T11:05:01.473
> 
> 标签：hadoop, hbase

我以分布式模式运行 hbase。Hbase 在所有节点上启动区域服务器 java 进程，但 web ui 不显示它们

[http://s1.ipicture.ru/uploads/20120517/16DXTnsU.png](http://s1.ipicture.ru/uploads/20120517/16DXTnsU.png)

这是 hbase-site.xml

```
<configuration>
<property>
    <name>hbase.zookeeper.quorum</name>
    <value>10.3.6.44</value>
</property>
<property>
    <name>hbase.zookeeper.property.dataDir</name>
    <value>/home/hadoop/hdfs/zookeeper</value>
</property>
<property>
   <name>hbase.rootdir</name>
     <value>hdfs://10.3.6.44:9000/hbase</value>
</property>
<property>
    <name>hbase.cluster.distributed</name>
    <value>true</value>
</property> 
```

顺便说一句，hadoop 集群运行正常，可以看到所有的数据节点

* * *

非常感谢您的帮助。问题出在 dns 和 hosts 文件上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:06:33.287

将此属性添加到您的 hbase-site.xml 文件中，看看它是否适合您

```
 name - hbase.zookeeper.property.clientPort
  value - 2181 
```

# c# - 如何终止在 C# 中的 foreach 循环中启动的线程

> ID：10634506
> 
> 赞同：2
> 
> 时间：2012-05-17T11:05:02.330
> 
> 标签：c#, windows, multithreading, service

我为我的 Windows 服务中的每个循环启动了多个线程。我没有提到这些线程的任何名称。我怎样才能终止这些线程。我使用以下代码来创建线程。

```
 new Thread(() =>
            {
                foreach (MyClass detail in MyclassList)
                {
                    DoWork(detail);
                }

            }).Start(); 
```

通过启动这些线程，我为每个细节创建了一个调度任务。我可以在调度完成后处理这个线程吗？如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T11:09:14.063

强行终止线程*绝不*是一个好主意。您真正应该做的是在循环中放置一些经过适当设计的“我应该继续”检查，您可以在外部将其设置为“否”。*如何*做到这一点更多地取决于上下文......例如：

```
 int shouldExit = 0;
        new Thread(() =>
        {
            foreach (MyClass detail in MyclassList)
            {
                if(Thread.VolatileRead(ref shouldExit) != 0) break;
                DoWork(detail);
            }
        }).Start();
        ...
        // to terminate loop:
        Thread.VolatileWrite(ref shouldExit, 1); 
```

然而，有无数种方法可以整理出线程安全的退出测试。唯一有点棘手的事情是保持某种上下文以访问被检查的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:27:38.360

首先，我会使用`Task`类而不是直接创建一个新线程。然后，我会使用内置的 TPL 取消机制。这是它的样子。

```
var cts = new CancellationTokenSource();
var token = cts.Token;

var task = Task.Factory.StartNew(
  () =>
  {
    foreach (MyClass detail in MyclassList)
    {
      ct.ThrowIfCancellationRequested();
      DoWork(detail);
    }
  }, cts.Token); 

// Do other stuff here.

cts.Cancel(); // Request cancellation. 
```

# javascript - Jira Gadget - 在配置屏幕上重新加载 AJAX

> ID：10634507
> 
> 赞同：2
> 
> 时间：2012-05-17T11:05:06.903
> 
> 标签：javascript, ajax, jira, jira-plugin

在任何地方都找不到解决方案，我真的希望这是可能的。

我正在编写一个 Jira 小工具，我有一个包含 2 个字段的配置屏幕。一是快速查找项目选择器；您键入并找到项目，然后单击所需的项目。

第二个字段是组件。您可以选择要作为过滤依据的项目组件。但是，每个项目的组件都不同，因此 Component 字段由“config”部分的“args”部分的小工具中指定的 AJAX 调用填充。

唯一的问题是这个 AJAX 只在第一次加载小工具时被调用；即：在选择项目之前，结果始终是“选择项目”。

我需要一种方法来在所选项目发生更改时重新运行此 AJAX 调用。

这可能吗？还是有替代解决方案？我尝试使用计时器来检查更改，但也存在一些问题；主要是我无法访问/更改组件下拉框字段。该小工具将拒绝加载。

更新：以下是小工具的 Javascript。如您所见，我添加了一个`refreshComponents()`Javascript 方法，该方法可以检索给定项目 ID 的组件，但是我无法将其附加到适当的事件。此外，我似乎无法使用 jQuery 或普通 JS 等直接更改页面上的任何组件

```
<div id="chart_div" style="overflow: auto;"></div>

        <script type="text/javascript">

                var gadget = this;
                google.load('visualization', '1.0', {'packages':['corechart']});

                var oldProject = "initiated";
                var globalGadget;
                function timedComponentUpdate()
                {
                    //alert(globalGadget.getPref("projectId"));
                    //setTimeout("timedComponentUpdate()",3000);
                }

                function refreshComponents(idString)
                {
                    //refetch components
                    var url = "__ATLASSIAN_BASE_URL__/rest/severity-gadget/1.0/severity-issues/getComponents.json";
                    url += "?projectId=" + idString; 
                    alert(url);

                    var xmlhttp;
                    if (window.XMLHttpRequest)
                        xmlhttp=new XMLHttpRequest();
                    else
                    {
                        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    xmlhttp.onreadystatechange=function()
                        {
                            if (xmlhttp.readyState==4)
                            {
                                //document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
                                alert(xmlhttp.responseText);
                            }
                        }

                    xmlhttp.open("GET",url,true);
                    xmlhttp.send();
                }

                function drawChart(args, bugtype, comp) {
                    //setup for whether were getting opened or closed
                    var axisTitle;
                    var compTitle;
                    var chart;

                    if(bugtype == "Bug")
                        axisTitle = "Bug";
                    else
                        axisTitle = "Issue";

                    if(comp == "All")
                        compTitle = "";
                    else
                        compTitle = " - Component: " + comp;

                    var wVar = gadgets.window.getViewportDimensions().width-20;
                    var hVar = wVar/3;
                    var hVar = hVar*2;

                    // Create the data table.
                    var data = new google.visualization.DataTable();
                    data.addColumn('string', 'Issues');
                    data.addColumn('number', 'Trivial');
                    data.addColumn('number', 'Minor');
                    data.addColumn('number', 'Major');
                    data.addColumn('number', 'Critical');
                    data.addColumn('number', 'Blocker');

                    AJS.$(args.weeks).each(function() {
                        data.addRow(["Week "+this.number,
                            parseInt(this.issues[0]),
                            parseInt(this.issues[1]),
                            parseInt(this.issues[2]),
                            parseInt(this.issues[3]),
                            parseInt(this.issues[4])
                        ]);
                    });

                    var options = {'title':'Weekly '+axisTitle+' Backlog' + compTitle,
                          'width':wVar,
                          'height':hVar,
                           axisFontSize:4,
                           isStacked:true,
                           fontName: '"Arial"'
                    };

                    chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
                    chart.draw(data, options);
                }

                var gadget = AJS.Gadget(
                    {
                        baseUrl: "__ATLASSIAN_BASE_URL__",
                        useOauth: "/rest/gadget/1.0/currentUser",
                        config: {
                            descriptor: function(args)
                            {
                                document.getElementById("chart_div").innerHTML = "";

                                var gadget = this;
                                var projectPicker = AJS.gadget.fields.projectOrFilterPicker(gadget, "projectId", args.projectOptions);

                                //bh
                                oldProject = this.getPref("projectId");
                                //refreshComponents(this.getPref("projectId"));

                                return {
                                    theme : function()
                                    {
                                        if (gadgets.window.getViewportDimensions().width < 450)
                                        {
                                            return "gdt top-label";
                                        }
                                        else
                                        {
                                            return "gdt";
                                        }
                                    }(),
                                    fields: [
                                        AJS.gadget.fields.nowConfigured(),
                                        projectPicker,
                                        AJS.gadget.fields.days(gadget, "weeksPrevious"),
                                        {
                                            userpref: "issueType",
                                            label: "Issue Type:",
                                            description:"Choose which issue type you would like",
                                            type: "select",
                                            selected: this.getPref("issueType"),
                                            options:[
                                                {
                                                    label:"Any",
                                                    value:"Any"
                                                },
                                                {
                                                    label:"Bug",
                                                    value:"Bug"
                                                }
                                            ]
                                        },
                                        {
                                            userpref: "component",
                                            label: "Component:",
                                            description:"Choose which issue type you would like",
                                            type: "select",
                                            selected: this.getPref("component"),
                                            options:args.components
                                        }
                                    ]
                                };
                            },
                            args: function()
                            {
                                return [
                                {
                                    key: "components",
                                    ajaxOptions: function() {
                                        var ajaxProject = this.getPref("projectId");
                                        if(ajaxProject == "")
                                            ajaxProject = "null";

                                        return {
                                            url: "/rest/severity-gadget/1.0/severity-issues/getComponents.json",
                                            data:
                                            {
                                                projectId : ajaxProject
                                            }
                                        }
                                    }

                                }

                                ];
                            }()
                        },
                        view: {
                            onResizeReload: true,
                            onResizeAdjustHeight: true,
                            template: function(args) {
                                var gadget = this;

                                gadget.getView().empty();

                                drawChart(args.issueData, this.getPref("issueType"), this.getPref("component"));

                                gadget.resize();
                            },
                            args: [{
                                key: "issueData",
                                ajaxOptions: function() {
                                    return {
                                         url: "/rest/severity-gadget/1.0/severity-issues.json",
                                         data:  {
                                            projectId : gadgets.util.unescapeString(this.getPref("projectId")),
                                            weeksPrevious: this.getPref("weeksPrevious"),
                                            issueType: this.getPref("issueType"),
                                            component: this.getPref("component"),
                                            backlog: true
                                        }
                                    };
                                }
                            }]
                        }
                    }
                );
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-19T09:59:39.390

我认为您需要将您的组件字段转换为[Callback Builder](https://developer.atlassian.com/display/GADGETS/Field+Definitions#FieldDefinitions-CallbackBuilder)。

在回调函数中，您需要做一些事情：

1.  通过 AJAX 请求检索选项
2.  呈现下拉菜单
3.  附加事件处理程序以在发生特定事件时刷新列表

您的新组件字段可能看起来像这样......我假设您已经获得了 jQuery 为简洁起见。

```
{
    userpref: "component",
    label: "Component",
    id: "component_field_id"
    description: "Choose which issue type you would like",
    type: "callbackBuilder",
    callback: function(parentDiv){

        function renderOptions(options){
            // Remove elements from the parentDiv and replace them
            // with new elements based on the options param
            // You can use gadget.getPref('component') to ensure you
            // mark the right option as selected
        }

        function getOptions(){
            $.ajax({
                 url: "__ATLASSIAN_BASE_URL__/rest/severity-gadget/1.0/severity-issues/getComponents.json",
                 data: {
                     // You might be able to get hold of the selected value
                     // from the gadget object instead of like this
                     projectId: $("#filter_projectOrFilterId_id").val() 
                 }
            }).done(renderOptions);
        }

        // Retrieve and render options on gadget load
        getOptions();

        // Retrieve and render options on an event
        $(parentDiv).on("update-options", getOptions);
    }
} 
```

此外，您需要在项目选择字段值更改时触发事件。在您的 JS 代码中的其他地方（不在小工具定义中）您需要放置这样的代码，但您需要确认项目/过滤器选择器的 CSS 选择器：

```
$(document).on("change", "#filter_projectOrFilterId_id", function(){
    $("#component_field_id").trigger("update-options");
}); 
```

我没有对此进行测试，但这就是我尝试实现您所要求的方式的方式。

# c# - 在运行时在字符串中添加带有按钮和 texbox 的用户控件

> ID：10634510
> 
> 赞同：0
> 
> 时间：2012-05-17T11:05:11.987
> 
> 标签：c#, asp.net, user-controls

我有一个带有 %{login}% 或 %{menu}% 等标记的模板

我也有相关的用户控制登录和菜单

html 字符串模板来自数据库，我的问题是，如果我使用 Page.RenderControl 或 Server.Execute 方法呈现用户控件，我显然会出现错误“texbox/button 必须放在带有 runat=server 的表单标签内”

登录和菜单用户控件在 asp.net 控件中，那么，如何以编程方式用用户控件替换我的令牌，让登录和菜单中的 asp.net 控件功能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:40:56.030

以编程方式，您可以读取您的字符串，并将标记转换为适当的控件（您可能已经这样做了），并且这样做，您将实例化控件的实例并将其添加到现有的控件集合中，最常见的是占位符控件。

以下是有关该主题的一些阅读材料：[ASP.NET 中的动态控件](http://www.4guysfromrolla.com/articles/081402-1.aspx)

# c# - WinForms 和处理自定义控件

> ID：10634512
> 
> 赞同：4
> 
> 时间：2012-05-17T11:05:16.617
> 
> 标签：c#, .net, winforms, controls, dispose

我有以下课程：

```
public class NewListBox : ListBox
    {
        public NewListBox()
        {
        }

        private ImageList _myImageList;

        public ImageList ImageList
        {
            get { return _myImageList; }
            set { _myImageList = value; }
        }
     } 
```

我对处置此对象是否会触发处置对象上的字段（例如 ImageList）感兴趣，还是我应该实现（覆盖）Dispose 方法并自己完成这项工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T11:11:01.530

您应该将 ImageList 添加到控件的 Components 集合中，然后 Dispose 的基类实现将 Dispose 该集合中的所有内容，您不必自己重写 Dispose。

如果您有任何 IDisposable 但不是组件的成员，那么您将必须在您的控件中覆盖 Dispose 并自己处理它们。

（我在从 System.ComponentModel.Component 派生的对象的严格意义上使用术语组件）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T11:15:53.240

这篇[文章](http://www.albahari.com/valuevsreftypes.aspx)很有帮助，在内存处理部分。

所有实现 IDisposable 的类（包括所有 Windows 窗体控件）都有一个 Dispose 方法。当不再需要对象以释放内存以外的资源时，必须调用此方法。发生这种情况有两种方式：

*   手动（通过显式调用 Dispose）
*   自动：通过将对象添加到 .NET 容器，例如 Form、Panel、TabPage 或 UserControl。容器将确保在处理它时，它的所有成员也是如此。当然，容器本身必须被处置（或者反过来，成为另一个容器的一部分）。对于 Windows 窗体控件，我们几乎总是将它们添加到容器中——因此依赖于自动处置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T11:52:11.063

这里有很多不同的答案..

我强烈建议阅读[垃圾收集器基础知识和性能提示](http://msdn.microsoft.com/en-us/library/ms973837.aspx) 如果你有两个选择：

*   手动处理 ImageList，因此资源将很快释放（但不会立即释放）
*   什么都不做：下次垃圾收集器分析你形成的世代时，资源将被释放。如果您的表单已关闭，并且没有任何内容保留对您的表单的引用，那么您的表单将被释放，然后由于不再有引用指向 ImageList，ImageList 将被释放。资源将被释放，但比第一种情况要晚一些。

除非您的 ImageList 中有数千张大图像（或者如果您创建/关闭表单数百次），您不会注意到这两种情况之间有任何区别

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-20T17:00:41.060

根据您发布的代码，您没有使用 Designer 来实现此控件。因此，您将没有设计器提供的`Dispose(bool disposing)`方法或`System.CompononetModel.IContainer components`可以添加额外控件的成员。我不确定 ListBox 如何处理其`Controls`属性，但如果它允许您在其中注册您的`ImageList`实例`Controls.Add(ImageList)`，那应该会让您获得自动`Dispose()`行为。

您的另一个选择是覆盖`Control.Dispose(bool)`如下：

```
protected override void Dispose(bool disposing)
{
    // Only call Dispose() on members if invoked through a direct
    // call to `Dispose()`. (If disposing is false, that means
    // we are invoked through the finalizer and we should *only*
    // free up unmanaged resources that we *directly* own).
    if (disposing)
    {
        ImageList.Dispose();
    }

    base.Dispose(disposing);
} 
```

# php - DOM 文档 - 如何在没有内部标签的情况下获取标签内的文本

> ID：10634526
> 
> 赞同：1
> 
> 时间：2012-05-17T11:06:05.837
> 
> 标签：php, dom

假设我有一个包含以下 html 的 dom_document，并且它被放入一个名为`$dom_document`

```
<div>
  <a href='something'>some text here</a>
  I want this
</div> 
```

我想要的是检索 div 标签内的文本（'我想要这个'），而不是 a 标签。我要做的是：

```
$dom_document->nodeValue; 
```

不幸的是，对于这个声明，我有一个标签。希望有人可以提供帮助。先感谢您。干杯。马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:16:04.553

您可以为此使用 XPath：

```
$xpath = new DOMXpath($dom_document);
$textNodes = $xpath->query('//div/text()');

foreach ($textNodes as $txt) {
    echo $txt->nodeValue;
} 
```

# android-camera - V4l2：缓冲区的Enque，Deque和Queue（ing）之间的区别？

> ID：10634537
> 
> 赞同：3
> 
> 时间：2012-05-17T11:07:01.817
> 
> 标签：android-camera, linux-device-driver, embedded-linux, v4l2

我是**v4l2**中的菜鸟，并试图找出`ioctl`在相机图像捕获期间进行的各种调用之间的区别。我正在关注来自 linuxtv.org 站点的[此 pdf](http://linuxtv.org/downloads/presentations/summit_jun_2010/20100206-fosdem.pdf)，我想知道以下内容之间的区别：

**缓冲区的查询、入队、出队和队列（ing）**。从相机获取原始数据是否有特定的顺序？在流式传输和捕获模式的情况下，序列是否会有所不同？

任何人都可以解释一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:06:13.740

以下状态机描述了 V4​​L2 缓冲区的生命周期：

![在此处输入图像描述](../Images/7b9df166d1f414d2868e76e672e16906.png)

流式传输和捕获的顺序相同。
它只是在捕获期间只执行一次 Q/DQ 以获得一个缓冲区（即单个“帧”）。流式传输会重复执行此操作。

本系列 V4L2 文章中的详细信息...
[**第 1 部分：Video4Linux2 API**](http://lwn.net/Articles/203924/)
**[第 2 部分：注册和 open()](http://lwn.net/Articles/204545/)**
**[第 3 部分：基本 ioctl() 处理](http://lwn.net/Articles/206765/)**
**[第 4 部分：输入和输出](http://lwn.net/Articles/213798/)**
**[第 5a 部分：颜色和格式](http://lwn.net/Articles/218798/)**
**[第 5b 部分：格式协商](http://lwn.net/Articles/227533/)**
**[第 6a 部分：基本帧 I/O](http://lwn.net/Articles/235023/)**
**[第 6b 部分：流式 I/O](http://lwn.net/Articles/240667/)**
**[第 7 部分：控件](http://lwn.net/Articles/247126/)**

# iphone - UIPopOverViewControler 中的解雇问题

> ID：10634539
> 
> 赞同：1
> 
> 时间：2012-05-17T11:07:15.217
> 
> 标签：iphone, ios, ios5, uipopovercontroller

我`popovercontroller`要显示一个搜索页面，它很好地显示了搜索页面，当用户点击弹出框内的单元格时，它会在里面显示相应的页面`popovercontroller`，我不想要它，所以我放了`NSNotification`用于显示的`popover`，它工作正常，但我有一个问题，但导航没有发生在那里`popovercontroller`，只有解雇发生。这是我创建弹出框的代码

```
-(void)revealRightSidebar:(id)sender
{
    searchpage* popoverContent = [[searchpage alloc]
                                  init];    
    UINavigationController *navigationController = [[[UINavigationController alloc] initWithRootViewController:popoverContent] autorelease];

    //resize the popover view shown
    //in the current view to the view's size
    popoverContent.contentSizeForViewInPopover =
    CGSizeMake(320,650);

    //create a popover controller
    self.popup = [[UIPopoverController alloc]
                              initWithContentViewController:navigationController];

    [self.popup presentPopoverFromRect:_btnsearch.frame
                                            inView:self.view
                          permittedArrowDirections:UIPopoverArrowDirectionAny
                                          animated:YES];

    //release the popover content

    [popoverContent release];    

    [self resetReadViewToVerse:1];
} 
```

在`viewDidLoad`这个页面的方法中，我把通知

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(dismissThePopover) name:@"popoverShouldDismiss" object:nil];
} 
```

在 searchpage 我把这段代码导航到相应的搜索结果页面

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{          
     ParallelReadViewController *detailViewController = [[ParallelReadViewController alloc] initWithNibName:@"ParallelReadViewController" bundle:nil];

     //detailViewController.firstString = firstString;
     // ...
     // Pass the selected object to the new view controller.

     [self.navigationController pushViewController:detailViewController animated:YES];

     [detailViewController release];   
     delegate.selectedBook = [[searchResults objectAtIndex:indexPath.row] objectForKey:@"book"];
     delegate.selectedChapter = [[searchResults objectAtIndex:indexPath.row] objectForKey:@"chapter"];
     delegate.selectedVerse = [[searchResults objectAtIndex:indexPath.row] objectForKey:@"verse"];
     [delegate reloadVerses];
     [[NSNotificationCenter defaultCenter] postNotificationName:@"popoverShouldDismiss" object:nil];
} 
```

但是当我删除通知时，它会导航到`parallelReadViewController`页面中的相应搜索，但在其`popover`本身中，这里是`popover`关闭，但没有导航。请帮我这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:00:51.710

您必须`navigationController`在类中声明`AppDelegate`。使用它`navigationController`来推送所需的视图。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath  
{                 
    ParallelReadViewController *detailViewController = [[ParallelReadViewController alloc] initWithNibName:@"ParallelReadViewController" bundle:nil];         
   //detailViewController.firstString = firstString;       
   // ...   
   // Pass the selected object to the new view controller. 
   [delegate.navigationController pushViewController:detailViewController animated:YES];          
   [detailViewController release];
   delegate.selectedBook = [[searchResults objectAtIndex:indexPath.row] objectForKey:@"book"];
   delegate.selectedChapter = [[searchResults objectAtIndex:indexPath.row] objectForKey:@"chapter"];
   delegate.selectedVerse = [[searchResults objectAtIndex:indexPath.row] objectForKey:@"verse"];
   [delegate reloadVerses];
   [[NSNotificationCenter defaultCenter] postNotificationName:@"popoverShouldDismiss" object:nil];
} 
```

希望这可以帮助你......

# android - 标头 android 9patch

> ID：10634541
> 
> 赞同：0
> 
> 时间：2012-05-17T11:07:21.627
> 
> 标签：android, xml, header, nine-patch

我想为 Android 创建一个全屏标题。我创建了 70 * 480 px (& 9patch) 的图像。我能怎么做？我尝试使用银河选项卡..但它没有水平填充屏幕。这是代码：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:foo="http://schemas.android.com/apk/res/aaa.bbb"
    android:id="@+id/db1_root" 
    android:orientation="vertical"  
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:background="@drawable/background">
 <ImageView 
                android:src="@drawable/header" 
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="top"
                    >
</ImageView> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:12:19.347

您需要设置 android:scaleType 和可选的 android:adjustViewBounds。使用这两个属性来获得所需的效果。

[http://developer.android.com/reference/android/widget/ImageView.html#attr_android:scaleType](http://developer.android.com/reference/android/widget/ImageView.html#attr_android:scaleType)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:23:29.717

使用此代码将您的 ImageView 添加到 xml 文件

```
 <shush.android.util.AspectImageView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/header" /> 
```

添加这个类：

```
package shush.android.util;

import android.content.Context;
import android.util.AttributeSet;
import android.view.View;

/**
 * @author Sherif elKhatib
 *
 */
public class AspectImageView extends View {

    public AspectImageView(Context context) {
        super(context);
    }

    public AspectImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public AspectImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int width = MeasureSpec.getSize(widthMeasureSpec);
        int height = width * getBackground().getIntrinsicHeight()
                / getBackground().getIntrinsicWidth();
        setMeasuredDimension(width, height);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:09:35.717

试试这个

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:foo="http://schemas.android.com/apk/res/aaa.bbb"
android:id="@+id/db1_root" 
android:orientation="vertical"  
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:background="@drawable/background">
<ImageView 
            android:src="@drawable/header" 
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_gravity="top"
                >
</ImageView> 
```

# iphone - iPhone：.caf 文件可以保存在照片库中吗？

> ID：10634553
> 
> 赞同：0
> 
> 时间：2012-05-17T11:08:09.237
> 
> 标签：iphone, objective-c

是否可以保存。`caf`文件到**照片库**？

在我的应用程序中，用户可以录制他们的声音并将其上传到远程服务器。所以我想知道是否可以将录制的语音文件保存到照片库中，以便用户可以查看以前录制的声音文件并上传？

我尝试使用`ALAssetsLibrary`by 保存 .caf：-

```
NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/recordTest.caf",DOCUMENTS_FOLDER]];
ALAssetsLibrary *lib = [[ALAssetsLibrary alloc] init];

[lib writeVideoAtPathToSavedPhotosAlbum:url completionBlock:^(NSURL *assetURL, NSError *error){
        if (error) 
        {
            NSLog(@"%@",error);
        } 
        else 
        {

        }
        }]; 
```

但它会产生错误......

> Error Domain=ALAssetsLibraryErrorDomain Code=-3302 "Invalid data" UserInfo=0x184b80 {NSLocalizedRecoverySuggestion=尝试不同的数据，NSLocalizedFailureReason=写入此资产时出现问题，因为数据无效，无法查看或播放。，NSLocalizedDescription=无效数据， NSUnderlyingError=0x1834a0 "无效数据"}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:11:37.223

答案是**`NO`**。无法将 .caf 文件存储到照片库。

# javascript - jQuery从左到右减小宽度

> ID：10634559
> 
> 赞同：1
> 
> 时间：2012-05-17T11:08:21.130
> 
> 标签：javascript, jquery

您好，我有一个宽度为 500 像素的 DIV。

我正在尝试将动画的宽度从 500px 减小到 0px，然后再从 0px 减小到 500px。

唯一的问题是，DIV 从右向左减少。

我想要相反的东西。

从一开始，宽度将从左到右减小和动画，然后从右到左从 0px 增加到 500px。

我怎么能用 jQuery 做到这一点？

谢谢你的帮助

**已编辑**

```
function animateText(px) {
  $('#slidetext').animate({
   'width' : px
  });
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:19:41.523

这是可能的，但你需要使用，在[这里](http://jsfiddle.net/An7K4/1/)`position: absolute`看我的小提琴

```
function animateText(px) {
    $('#slidetext').animate({
       left: $("#slidetext").width(),
       width: px
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:19:44.490

你在为此努力吗

[jsFiddle](http://jsfiddle.net/ranganadh/WQGvE/1/)

```
$("#div2").animate({
          'width':'50%',
          'left':'49%'
},1000);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:20:12.883

看这个例子小提琴：http: [//jsfiddle.net/TC9Mn/](http://jsfiddle.net/TC9Mn/)

这个想法是将你的元素包装在一个容器中，`position: relative`并分配给你想要动画`position: absolute`和`right: 0`

这样宽度从左到右变化

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T11:34:34.037

试试这个，这可以在`css3`不使用任何 javascript/jquery 代码的情况下完成。下面是我的小提琴。
使用`@keyframe`和`animation`属性 [http://jsfiddle.net/eQMyq/2/](http://jsfiddle.net/eQMyq/2/)

# akka - 在 Akka (Java) 中，我怎样才能让我的主管记录任何捕获的异常？

> ID：10634560
> 
> 赞同：3
> 
> 时间：2012-05-17T11:08:30.600
> 
> 标签：akka

Akka 文档解释了如何从一个参与者（[http://doc.akka.io/docs/akka/snapshot/java/logging.html](http://doc.akka.io/docs/akka/snapshot/java/logging.html)）中登录。但是如何从主管内部登录？

我基本上想记录主管捕获的任何异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:35:56.817

我想我找到了答案，并意识到我的问题可能不对。我需要 SupervisorStrategy 来实际记录异常。当我创建我的主管 UntypedActor 时，它可以定义一个 SupervisorStrategy，它应该能够访问封闭的 UntypedActor 的（最终）记录器。

# javascript - 限制用户在双击 w/css 和 javascript 时选择内容

> ID：10634561
> 
> 赞同：0
> 
> 时间：2012-05-17T11:08:33.980
> 
> 标签：javascript, html, css

这是html：

```
<body>
    <div id="screen">
        <div id="d1">blabla</div>
        <div id="d2">blabla</div>
    </div>
</body> 
```

“屏幕” div 包含 100% 的屏幕。包含内容的所有其他 div 都包含在其中。现在，当我双击“屏幕” div 的一些空白区域时，里面的 div 的所有文本/图像都被选中，这是我不希望发生的事情。有什么办法可以避免这种情况吗？

我试过了：

```
<div id="screen" ondblclick="return false;"> 
```

和

```
<div id="screen" ondblclick="unselect(this);"> 
```

js在哪里：

```
function unselect(element) {
    if (document.selection) {
        var range = window.document.selection.createRange();
        range.collapse();
        range.select();
    } else {
        element.selectionEnd = element.selectionStart;
    }
} 
```

但两者都没有工作。

编辑：这种奇怪的行为似乎只发生在火狐（歌剧，铬，即是好的）。

EDIT2：将问题归结为css。如果其中一个内部 div 具有用户选择：无，那么就会发生这种情况。一定是firefox的bug。

# java - 静态类型的跨操作系统 Web 平台：Java、Mono 等等？

> ID：10634562
> 
> 赞同：7
> 
> 时间：2012-05-17T11:08:38.630
> 
> 标签：java, .net, types, open-source

我很欣赏这个问题可能由于其开放式性质而被关闭，但我仍然很好奇。

如果我想使用静态类型语言开发一个跨平台的 Web 应用程序，我的选择是什么？我知道 Mono 和 Java，但还有什么？

*（当我说跨平台时，我指的是 Windows 和至少一种常见的 Linux 风格）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T11:29:23.850

您可以对客户端和服务器部分使用单一语言：

1.  爪哇
2.  C＃
3.  谷歌的围棋
4.  斯卡拉
5.  GWT（Java 框架）
6.  Haskell 网络框架

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T11:34:31.857

有几个高性能的 Haskell Web 框架强调强大的静态正确性：

*   [折断](http://snapframework.com/)
*   [是的](http://www.yesodweb.com/)
*   [快乐堆栈](http://www.happstack.com/)

目标是依靠类型系统来提供高度优化的代码，并且运行时失败的可能性为零。

引用 Yesod 网站：

> 将运行时错误转化为编译时错误
> 
> Yesod 相信让编译器成为你的盟友而不是你的敌人的哲学。我们*尽可能使用类型系统来强制执行*，从生成正确的链接，到避免 XSS 攻击，再到处理字符编码问题。一般来说，如果您的代码编译，它的工作原理。而不是到处声明类型，而是让编译器通过类型推断为您找出它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T11:31:09.523

如果您的意思是静态类型，那么不幸的是没有那么多选择。Google 的[Go](http://golang.org/)语言似乎开始向 Web 应用领域发展（Google 的 App Engine 和[GoWeb](http://code.google.com/p/goweb/)等项目都支持 Go ），但这些努力可能还不是很成熟。

[Scala](http://www.scala-lang.org/)可能是另一种可能的选择。虽然它也在 JVM 上运行，但由于语言的高级特性（参见例如[Lift](http://liftweb.net/)），它的 Web 框架非常不同，可能值得单独看一下。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T11:36:38.467

除了 Java 和 C#（通过 mono），您还可以使用
**[Wt (C++ Web Toolkit)](http://www.webtoolkit.eu/wt)**形式的（现代）C++ 。现在 C++ 的 C 向后兼容部分不是强类型的，但是 C++ 程序是类型安全的。

如果你想要真正强大的类型安全，你可以使用 Haskell 和**[Yesod](http://www.yesodweb.com/)**。Yesod 的目标是使用强类型来防止 Web 应用程序编程中的常见错误。例如，URL 是经过类型检查的。如果不提供正确的参数，您将无法构建应用程序内链接。渲染网页时用户内容的转义是另一种情况，其中使用 Haskell 编译器确保字符串在包含在渲染页面中之前正确转义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T11:20:52.647

我相信[Ruby](http://en.wikipedia.org/wiki/Ruby_%28programming_language%29)是强类型的，所以[Ruby on Rails](http://rubyonrails.org/)是一个不错的选择。

# installation - 创建一个包含覆盖整个窗口的位图的 NSIS 页面

> ID：10634568
> 
> 赞同：0
> 
> 时间：2012-05-17T11:08:47.527
> 
> 标签：installation, nsis

**什么是创建 NSIS 欢迎页面的最佳方法，该页面具有覆盖整个对话框（主 HWND）窗口的位图图像？**

最好的方法是：

*   使用 MUI2 并指定常量 MUI_WELCOMEFINISHPAGE_BITMAP 和 MUI_WELCOMEFINISHPAGE_BITMAP_NOSTRETCH？我已经尝试过了，图像位于下一个/上一个按钮和欢迎文本的顶部。是否有可以用来更改图像窗口的 z-index 的函数调用？
*   创建我自己的自定义窗口？我知道如何做到这一点以及如何创建复选框、按钮等窗口，但不知道如何创建图像窗口（我想我创建了一个静态或标签窗口然后为此设置位图？）
*   也许插件 SkinnedControls 有办法做到这一点？我已经尝试将皮肤应用于按钮，但没有找到任何可以在 SkinnedControls 中创建带有大位图的欢迎屏幕的东西。另外，安装程序在单击下一步时不断崩溃（我认为与 Unicode 版本有关吗？）。
*   也许另一种我不知道的方式？

您能否建议创建包含覆盖整个对话框的位图的欢迎页面的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:19:34.307

这个问题与这个问题非常相似：[Alter the z-index of windows on a NSIS MUI2 Page](https://stackoverflow.com/questions/10645433/alter-the-z-index-of-windows-on-a-nsis-mui2-page)所以请先阅读。

正如我所说：创建整个背景非常棘手（它需要大量编码），但我可以向您推荐这个解决方案： [NSIS 的图形安装程序，](http://graphical-installer.com/)用于创建看起来很酷的安装程序。

# python-2.7 - Python中的libsvm：出现错误

> ID：10634569
> 
> 赞同：2
> 
> 时间：2012-05-17T11:08:52.250
> 
> 标签：python-2.7, svm, libsvm

我是 Python 新手。我想在我的项目中使用 svm。我使用的是 libsvm 3.12，但是当我这样做时..

```
from svm import * 
```

然后我收到以下错误：

```
回溯（最近一次通话最后）：

  文件“C:/Python27/main.py”，第 31 行，在
    从 svm 导入 *
  文件“C:/Python27\svm.py”，第 12 行，在
    libsvm = CDLL(find_library('libsvm'))
  文件“C:\Python27\lib\ctypes\__init__.py”，第 353 行，在 __init__
    self._handle = _dlopen(self._name, mode)

WindowsError: [错误 193] %1 不是有效的 Win32 应用程序

```

我该怎么办？

该`libsvm` `README`文件建议我复制`libsvm.dll`到`system32`我所做的文件夹中..但我仍然收到错误消息。我正在使用 64 位 Python。也许这导致了问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T18:36:37.040

我只是有同样的问题。

正如 Velociraptors 在[VLC Python Bindings 中发布的那样——错误 193](https://stackoverflow.com/questions/5007455/vlc-python-bindings-error-193)：

> 我猜测问题是试图从 64 位进程加载 32 位 DLL。您可以使用 32 位 Python 构建来修复它。

[我们通过从http://www.lfd.uci.edu/~gohlke/pythonlibs/#libsvm](http://www.lfd.uci.edu/~gohlke/pythonlibs/#libsvm)下载 libSVM for python 解决了这个问题

# javascript - javascript声明并插入多维数组

> ID：10634570
> 
> 赞同：1
> 
> 时间：2012-05-17T11:08:52.483
> 
> 标签：javascript, multidimensional-array, dynamic-arrays

我现在在javascript中的多维数组有点傻。但在我的程序中，我必须使用它。我想使用 javascript 声明一个动态的 3 列和 m 行数组，然后在循环中我需要向该数组插入一些元素。最后我想显示那个数组。

```
 var x = new Array();
    for (var y=0; y<=counter; y++) {
    x[y] = new Array (3);
x[y][0]='a';
x[y][1]='b';
x[y][2]='c';
    } 
```

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:45:44.610

数组根据需要增长，因此声明数组的长度没有意义。你开始的很好。 [http://books.google.ca/books?id=4RChxt67lvwC&pg=PA141&lpg=PA141&dq=JS+array+grow+as+needed?&source=bl&ots=tgY8BlGXm8&sig=_3jcH1LTmYi9QiXxn9pHROpbN1s&hl=en&sa=X&ei=7v60T_XwA4AegwQoEX=页面JS%20array%20grow%20as%20needed%3F&f=false](http://books.google.ca/books?id=4RChxt67lvwC&pg=PA141&lpg=PA141&dq=JS+array+grow+as+needed?&source=bl&ots=tgY8BlGXm8&sig=_3jcH1LTmYi9QiXxn9pHROpbN1s&hl=en&sa=X&ei=7v60T_XwA4ThggfGuoEX&ved=0CEoQ6AEwAQ#v=onepage&q=JS%20array%20grow%20as%20needed%3F&f=false)

[http://www.codingforums.com/showthread.php?t=5198](http://www.codingforums.com/showthread.php?t=5198)

只是提醒一下，它将创建一个比计数器大 1 的数组。这是你的 for 循环中的 b/c，你有 y<=counter 和 y 从 0 开始。如果你希望长度为计数器，请将其更改为

```
 y<counter 
```

为了显示数组，您可能需要考虑 for 嵌套循环。

JS

```
for(var i=0; i<x.length; i++)
  for (var j=0; j<3; j++)
    alert(x[i][j]); 
```

其中 x 是对数组的引用。如果您想一次打印整个数组，请考虑从数组中的元素创建一个字符串并打印它

```
function displayArray(x){
var stringArray='';
 for(var i=0; i<x.length; i++)
  for (var j=0; j<3; j++)
    stringArray+= x[i][j];
 alert(stringArray); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:12:46.257

像这样的东西？

```
var x = [
    [
        [1, 2, 3],
        [4,5,6]
    ],
    [
        [7, 8, 9]
    ]   
];

alert(x[0][1][2]); 
```

这就是为什么 JavaScript 的变量语法并不总是像人们想象的那样的原因之一。与 Java 相比：

```
String[][][] x = new String[5][5][5]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:13:53.410

可能是这样的？

```
var sDataArray=MultiDimensionalArray(7,2); 
alert(sDataArray[0][0]); 

function MultiDimensionalArray(iRows,iCols) 
{ 
var i; 
var j; 
   var a = new Array(iRows); 
   for (i=0; i < iRows; i++) 
   { 
       a[i] = new Array(iCols); 
       for (j=0; j < iCols; j++) 
       { 
           a[i][j] = ""; 
       } 
   } 
   return(a); 
} 
```

在行中动态可能你想要一个数组列表？您还可以做一个方法来添加一行，并增加数组大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T11:22:24.613

```
try something like this..

var cols = 3;
var rows = 5;

createArray(cols,rows);

function createArray(cols,rows) {
    var newArray = [];
    for(i=0;i<cols;i++) {
        newArray[i] = [];
        for(j=0;j<rows;j++) {       
            newArray[i][j] = "["+i+"]"+"["+j+"]";
        }

    }   
    return newArray;
} 
```

# c++ - 运行时检查失败 #2 - 变量“B”周围的堆栈已损坏

> ID：10634573
> 
> 赞同：0
> 
> 时间：2012-05-17T11:08:58.930
> 
> 标签：c++, multidimensional-array, matrix-inverse

这个错误不断出现，但我没有看到代码有问题（它在 c++ 中）程序应该找到 2x2 矩阵的逆矩阵

```
#include <iostream>

using namespace std;

int main() { 
    float d;
    float A[2][2], B[2][2];

    do {
        cout << "please enter valid parameters in for 11,12,21,22" << endl;

        for(int i = 0; i < 2; i++) {
            for(int j = 0; j < 2; j++)
                cin >> A[i][j];
        }

        d = (A[1][1] * A[2][2]) - (A[1][2] * A[2][1]);
    } while(d == 0);

    B[1][1] = A[2][2] * (1.0 / d);
    B[1][2] = A[1][2] * (-1.0 / d);
    B[2][1] = A[2][1] * (-1.0 / d);
    B[2][2] = A[1][1] * (1.0 / d);

    for(int k = 0; k < 2; k++) {
        for(int h = 0; h < 2; h++) 
            cout << B[k][h] << " ";
        cout << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:22:50.620

您正在索引 B 和 A 从 1 到 2 ，而不是从 0 到 1 使用它。

# css - Css在actionscript中不显示

> ID：10634577
> 
> 赞同：0
> 
> 时间：2012-05-17T11:09:08.440
> 
> 标签：css, apache-flex, actionscript

无法理解为什么 display:none 不能在 flex 中使用 css。

有一个CSS规则：

```
.hideLabel .ToolbarButtonLabel {
  display:none;
  color: red;
} 
```

我的元素的文本

```
new Label() 
```

变红了！但是“显示：无”不起作用！同时官方文档 ( [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/StyleSheet.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/StyleSheet.html) ) 说 CSS 属性 CSS 属性支持的值是内联、块和无。

是否可以通过css隐藏元素？

# flash - 如何在 Google Chrome 扩展程序中查看 Flash 的请求标头？

> ID：10634586
> 
> 赞同：0
> 
> 时间：2012-05-17T11:09:31.520
> 
> 标签：flash, google-chrome, google-chrome-extension, chromium, sniffing

我有 Chrome 的扩展来寻找请求和响应标头。我为此使用*webRequest.onSendHeaders*、*webRequest.onHeadersReceived*和*webRequest.onCompleted*事件。但我没有看到加载 Flash 的标题。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:11:28.187

Flash 对象有`PercentLoaded()`方法。像这样使用它：

```
var testMovie = document.testMovie;

function waitUntilLoaded() 
{
    if(testMovie.PercentLoaded() == 100) {
        doSomething();//flash is loaded
    } else {
        setTimeout('waitUntilLoaded()',10);  
    }
}
waitUntilLoaded(); 
```

为此，您可能需要一个内容脚本。

# c++ - 迭代指针的 std::vector 时出错

> ID：10634597
> 
> 赞同：1
> 
> 时间：2012-05-17T11:10:04.980
> 
> 标签：c++, visual-c++

我需要复制一个包含指向类的指针的 std::vector。功能是：

```
Clone::Clone( const Clone &source )
{
    m_pDerivate.clear();

    std::vector<Derivate *>::const_iterator it;
    it = source.m_pDerivate.begin();
    for (it = source.m_pDerivate.begin(); it != source.m_pDerivate.end(); ++it) {
        m_pDerivate.push_back(new Derivate(it));
    }
} 
```

Derivate 构造函数是：

```
Derivate::Derivate( const Derivate &source )
{
    _y = source._y; 
    _m = _strdup(source._m);
} 
```

但是当我编译时，我得到以下错误......

```
 cannot convert parameter 1 from 'std::_Vector_const_iterator<_Myvec>' to 'const Derivate &' 
```

...在该行中：

```
m_pDerivate.push_back(new Derivate(it)); 
```

如果我换行...

```
m_pDerivate.push_back(new Derivate((const Derivate &)(*it))); 
```

...编译正常，但 Derivate 构造函数没有正确接收数据。

你能帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T11:11:43.080

您需要取消引用迭代器和指针：

*   `*it`是类型`Derivate*`
*   `**it`是类型`Derivate`

改变：

```
m_pDerivate.push_back(new Derivate(it)); 
```

至：

```
m_pDerivate.push_back(new Derivate(**it)); 
```

# iphone - NSDictionary 里面的 NSDictionary

> ID：10634599
> 
> 赞同：0
> 
> 时间：2012-05-17T11:10:07.450
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

我有以下代码：

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
NSMutableDictionary *golferIconsu = [userDefaults objectForKey:@"golferIconsFirstScene"];

NSMutableDictionary *golferIconsSceneOne = [[NSMutableDictionary alloc]initWithDictionary:golferIconsu];

NSMutableDictionary *savedScoreCards;

NSMutableDictionary *currentScoreCard;
[currentScoreCard setObject:golferIconsSceneOne forKey:@"golferIconsFirstScene"];

NSMutableDictionary *GI = [currentScoreCard objectForKey:@"golferIconsFirstScene"];

[savedScoreCards setObject:currentScoreCard forKey:@"1"];

NSLog([golferIconsSceneOne objectForKey:@"30101"]);
NSLog([GI objectForKey:@"30101"]); 
```

最后，我的日志中打印的所有内容都是第一个`NSLog`电话，而不是第二个电话。例如：

```
NSLog([golferIconsSceneOne objectForKey:@"30101"]); 
```

这会打印出我存储在该字典中的字符串。

这个：

```
NSLog([GI objectForKey:@"30101"]); 
```

根本不打印任何东西。

我怎样才能让`NSDictionary`GI 具有与 完全相同的属性，但我需要使用包含`golferIconsSceneOne`的 来做到这一点？`currentScoreCardDictionary``golferIconsSceneOne`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:20:38.637

在其中设置对象之前初始化您的字典。

```
NSMutableDictionary *savedScoreCards = [[NSMutableDictionary alloc] init];
NSMutableDictionary *currentScoreCard = [[NSMutableDictionary alloc] init]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:30:34.573

像这样初始化一个并将其设置为另一个

```
NSMutableDictionary *savedScoreCards = [[NSMutableDictionary alloc] init];
NSMutableDictionary *currentScoreCard = [[NSMutableDictionary dictionaryWithDictionary:savedScoreCards]; 
```

# c++ - C ++ 11线程不适用于虚拟成员函数

> ID：10634603
> 
> 赞同：5
> 
> 时间：2012-05-17T11:10:30.670
> 
> 标签：c++, multithreading, c++11

我试图让一个类运行一个线程，该线程将在循环中调用一个名为 Tick() 的虚拟成员函数。然后我尝试派生一个类并覆盖base::Tick()。

但是在执行时，程序只是调用基类的 Tick 而不是覆盖一个。任何解决方案？

```
#include <iostream>
#include <atomic>
#include <thread>
#include <chrono>

using namespace std;

class Runnable {
 public:
  Runnable() : running_(ATOMIC_VAR_INIT(false)) {

   }
  ~Runnable() { 
    if (running_)
      thread_.join();
  }
  void Stop() { 
    if (std::atomic_exchange(&running_, false))
      thread_.join();
  }
  void Start() {
    if (!std::atomic_exchange(&running_, true)) {
      thread_ = std::thread(&Runnable::Thread, this);
    }
  }
  virtual void Tick() {
    cout << "parent" << endl;
  };
  std::atomic<bool> running_;

 private:
  std::thread thread_;
  static void Thread(Runnable *self) {
    while(self->running_) {
      self->Tick();
      std::this_thread::sleep_for(std::chrono::milliseconds(100));
    }
  }
};

class Fn : public Runnable {
 public:
  void Tick() {
    cout << "children" << endl;
  }
};

int main (int argc, char const* argv[])
{
  Fn fn;
  fn.Start();
  return 0;
} 
```

输出：

```
parent 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T11:15:32.963

在使用完对象之前，您不能让对象超出范围！`return 0;`结束`main`原因`fn`超出范围。因此，当您开始调用`tick`时，无法保证该对象甚至不再存在。

（其中的逻辑`~Runnable`完全被破坏了。在析构函数内部为时已晚——对象已经至少部分被破坏了。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T11:34:51.973

使用继承作为线程*控制的父和子**实现*函数的方法通常是一个坏主意。这种方法的常见问题来自于构造和破坏：

*   如果线程是从父（控件）中的构造函数启动的，那么它可能会在构造函数完成之前开始运行，并且线程可能会在完整对象完全构造之前调用虚函数

*   如果线程在父级的析构函数中停止，那么当控件加入线程时，线程正在对不再存在的对象执行方法。

在您的特定情况下，您遇到的是第二种情况。程序开始执行，并在`main`第二个线程中启动。此时主线程和新启动的线程之间存在竞争，如果新线程更快（不太可能，因为启动线程是一项昂贵的操作），它将调用`Tick`将分派给最终覆盖器的成员方法`Fn::Tick`。

但是如果主线程更快，它将退出范围`main`，并开始销毁对象，它将完成对象的销毁，并在线程`Fn`的构造过程中。如果主线程足够快，它将到达第二个线程之前，并在那里等待第二个线程调用*现在*最终的覆盖器，即. 请注意，这是*未定义的行为*，并且不能保证，因为第二个线程正在访问一个正在被销毁的对象。`Runnable``join``join``Tick`*`Runnable::Tick`*

 **此外，还有其他可能的顺序，例如，第二个线程可以`Fn::Tick`在主线程开始销毁之前调度到，但在主线程销毁`Fn`子对象之前可能无法完成函数，在这种情况下，您的第二个线程将调用死对象的成员函数。

您应该遵循 C++ 标准中的方法：将*控制*与*逻辑*分离，完全构造将要运行的对象并在构造期间将其传递给线程。请注意，这是 Java 的情况`Runnable`，建议在扩展`Thread`类时使用它。请注意，从设计的角度来看，这种分离是有意义的：*线程*对象管理执行，而*可运行*对象是要执行的代码。线程不是*股票代码*，而是控制*股票代码*执行的东西。在你的代码`Runnable`中不是可以运行的东西，而是可以运行的*东西*碰巧从它派生的其他对象。**

# wicket - 如何定义自定义检票口标签

> ID：10634606
> 
> 赞同：5
> 
> 时间：2012-05-17T11:10:41.517
> 
> 标签：wicket

我找不到像 wicket:include 之类的 wicket 标签？谁能建议我什么？我想在 html 文件中包含/注入原始源代码？如果没有这样的实用程序，有什么建议来开发它吗？

**更新** 我正在寻找类似 jsp:include 的东西。预计此包含将在服务器端处理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T12:02:12.623

To do this, you'll need to implement your own [IComponentResolver](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/markup/resolver/IComponentResolver.html).

This [blog article](http://sanityresort.blogspot.com/2011/08/creating-custom-wicket-tag-resolver.html) shows an example somewhat resembling what you're after.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T14:25:12.747

是您想要包含的原始标记还是 Wicket 内容？

如果它是原始标记，即使是简单的标记也`Label`可以为您做到这一点。如果您调用`setEscapeModelStrings( false)`，模型的字符串值将直接复制到标记中。（不过要注意潜在的 XSS 攻击。）

“包括” Wicket 标记是通过`Panel`s（或偶尔`Fragment`s）完成的

更新：如果你添加更多关于你需要解决的实际问题的细节，我们很有可能找到一个更“邪恶”的解决方案，毕竟 JSP 和 Wicket 是两个不同的世界，一个人的思维方式行不通在另一个很好。

# c - 外置 uvc -usb Camera - yuv420 或 yuv422 中原始数据的默认格式是什么？

> ID：10634611
> 
> 赞同：3
> 
> 时间：2012-05-17T11:10:54.403
> 
> 标签：c, image-processing, camera, yuv

从外部 uvc-usb 兼容相机捕获的数据的默认格式是什么。是**yuv420**还是**yuv422**还是取决于相机传感器。任何一个都可以指向与一种格式到另一种格式的转换算法相关的文档。Rgds，软软的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:16:35.577

USB 视频类支持一种压缩 4:2:2 YUV 格式 (YUY2) 和一种平面 4:2:0 YUV 格式 (NV12)。（[http://www.usb.org/developers/devclass_docs/USB_Video_Class_1_1_090711.zip](http://www.usb.org/developers/devclass_docs/USB_Video_Class_1_1_090711.zip)）。默认值取决于实现（它也可以为您提供 MPEG2 或 h264 流）。

我将解释转换背后的想法，之后可以对其进行优化：

YUV422图片有每2个亮度点（Y），与它们的色度（U和V）一起存储，如下所示：YUYV YUYV YUYV YUYV YUYV YUYV

YUV420 是平面的，所以你首先拥有所有的 Y，然后是所有的 U，然后是所有的 V。U 和 V 平面也减半（每隔一行被忽略），只有一个特定的 U（和 V）值由 2 共享同一行中的点，它也与下一行中它们下方的 2 个点共享。

# cakephp - 元素在没有布局的情况下呈现

> ID：10634615
> 
> 赞同：1
> 
> 时间：2012-05-17T11:11:12.270
> 
> 标签：cakephp, cakephp-2.0

我有`books/index`控制器和视图。视图如下所示：

```
abcdef
123445
<?php echo $this->element('categorytree'); ?>
xyz
999 
```

我有`elements/categorytree`元素：

```
<?php
    function my_function() { echo '123'; } 
    echo 'element is here!';
?> 
```

当我在浏览器中访问书籍/索引时，该元素在没有布局的情况下呈现，因此源输出为：

```
abcdef
123445
element is here!
xyz
999 
```

当我删除元素中的函数声明时，问题就消失了——整个布局都被渲染了——所以问题是当我在元素内声明任何 php 函数时，如果这个元素被任何视图“获取”，那么只有这个元素在没有布局的情况下被渲染.

这个问题突然出现了，不知道是什么原因...之前我使用element中声明的函数，没有任何问题...

- - - - - - - - - 解决了

哇，这很奇怪 - 问题是由`<!-- -->`$this->element() 之后的标签引起的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:52:41.440

尽管您已经找到了问题的解决方案，但我只想指出，在您的视图中定义函数是一种可怕的做法。一种更好更简洁的方法是创建一个[自定义助手](http://book.cakephp.org/2.0/en/views/helpers.html#creating-helpers)，然后简单地使用它。

视图根本不是编写函数或类的地方。

# .net - 使用 ADO.NET 可单元测试存储库生成器时如何调用 ObjectContext.Refresh()

> ID：10634620
> 
> 赞同：0
> 
> 时间：2012-05-17T11:11:37.183
> 
> 标签：.net, entity-framework, entity-framework-4, t4, objectcontext

我正在使用“<strong>ADO.NET Unit Testable Repository Generator”（[在此处描述](http://blog.johanneshoppe.de/2010/10/walkthrough-ado-net-unit-testable-repository-generator/)）来生成实体类。除了数据库对象的类之外，此 T4 模板会自动生成以下类：

1.  **< *MyEntities* >.cs** - 功能具体的对象上下文
2.  **<我的实体> *BaseRepositoryTest.cs***
3.  **< *MyEntities* >Mock.cs** - 实现上下文接口的具体模拟上下文对象。
4.  **<我的实体> *Mock.ObjectSet.cs***
5.  **< *MyModelRepository* > .Context.cs**
6.  **<我的实体> *PartialRespository.cs***
7.  **I< *MyEntities* >.cs** - 专用对象上下文的接口。

我不完全确定其中一些课程的用途。

我正在使用一个执行所有数据库访问/更新操作的管理器类。

```
// Contains all Methods that access the database 
public class DataManager
{
    private IMyEntities _context;

    public DataManager()
        : this(new MyEntities())
    {
    }

    public bool AddOrder(Order order)
    {
      _context.Orders.AddObject(order);
      _context.SaveChanges();
    }
  ...
  } 
```

我想在调用时检查并发异常`_context.SaveChanges()`。理想情况下，我想`_context.Refresh()`在并发问题的情况下打电话。但是，自动生成的 ObjectContext 类`IMyEntities`确实有一个类似的方法`ObjectContext.Refresh()`

我究竟做错了什么？如何调用 Refresh()？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:43:47.347

AFAIK 这不能完成，因为`IMyEntities`不继承`ObjectContext`。但`MyEntities`确实如此。

当我改变

> 私人 IMyEntities _context;

至

> 私人 MyEntities _context;

我可以`ObjectContext.Refresh()`使用`_context.Refresh()`.

# node.js - 我可以将我自己的 ID 提供给 nodejs 中的连接套接字吗

> ID：10634626
> 
> 赞同：2
> 
> 时间：2012-05-17T11:11:54.383
> 
> 标签：node.js

我正在尝试实现一个多用户通信应用程序。我想用他的 id 来识别用户的套接字，所以我可以将套接字的 id 设置为用户的 id

```
socket.id=user.userId; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:21:50.370

这可能会帮助你

```
io.sockets.on('connection', function (socket) {    
    console.log("==== socket  ===");
    console.log(socket.id);
    socket.broadcast.emit('updatedid', socket.id);
}); 
```

您可以在客户端保存套接字 ID。当您想要 1-1 消息（私人聊天）时，请使用更新的套接字 id。像这样的东西：

```
io.sockets.socket(id).emit('private message', msg, mysocket.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:17:55.813

您可以这样做，但使用不与 Node.js 或任何其他框架键冲突的属性

```
socket.myappsuperuserid = user.userId; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T11:37:18.490

这里

客户端

```
var socket = io.connect();
     socket.on('connect', function () {
          console.log("client connection done.....");
          socket.emit('setUserId','random value');
}); 
```

在服务器端

```
io.sockets.on('connection', function (socket) {
       socket.on('setUserId',function(uId){
             socket.userId = uId;
        });
}); 
```

这可能会有所帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-20T10:16:26.053

在 socket.io 中，当用户连接时，socket.io 会生成一个唯一的 socket.id，它基本上是一个随机唯一的不可猜测的 id。我要做的是在我连接后调用socket.join（'userId'）。基本上在这里，我用我的 userId 为这个套接字分配了一个房间。然后每当我想向这个用户发送一些东西时，我都会喜欢这个 io.to(userId).emit('my message', 'hey there?')。希望这有帮助。

# c# - 如何从 ASP.NET 预编译中排除文件夹？

> ID：10634627
> 
> 赞同：1
> 
> 时间：2012-05-17T11:12:03.633
> 
> 标签：c#, asp.net, .net, iis

我正在试验[ClientBuildManager.PrecompileApplication](http://msdn.microsoft.com/en-us/library/system.web.compilation.clientbuildmanager.precompileapplication%28v=vs.90%29.aspx)以[强制编译我的 ASP.NET 站点](https://stackoverflow.com/q/10618600/57428)。

我添加了一个[ClientBuildManagerCallback](http://msdn.microsoft.com/en-us/library/system.web.compilation.clientbuildmanagercallback%28v=vs.90%29.aspx)并跟踪对方法的所有调用`ReportProgress()`。显然，预编译将遍历`Content`站点的其他一些子文件夹，我没有视图，因此没有要预编译的内容，因此进入这些目录是浪费时间。

有没有办法从预编译中排除特定文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:08:03.817

并不是说我知道并且查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms229863%28v=vs.80%29.aspx)似乎支持这一点。为了做你想做的事，我认为你必须编写一个 MSBuild 任务，这当然会破坏你试图用 ClientBuildManager.PrecompileApplication 做的事情。

# c++ - size_t 和 off_t 的用法有什么区别？

> ID：10634629
> 
> 赞同：42
> 
> 时间：2012-05-17T11:12:04.197
> 
> 标签：c++, linux

除了每种类型可以容纳的值的大小之外，和之间的主要**使用**区别是什么？类型用于绝对大小而类型用于偏移量只是一种约定吗？还是比这更深？`size_t``off_t``size_t``off_t`

我正在编写一个包装类来启用大型文件的写入，`mmap`并且我想知道最好的类型用于它们的参数。鉴于我想写入 > 4GB 的文件，我很想对所有内容都使用 size_t，但这是最佳做法吗？（或者我应该`off64_t`为某些功能使用某些类型？）

例如，我的`writeAt`函数是否应该声明为：

```
MMapWriter::writeAt(off64_t offset, const void* src, size_t size) 
```

或者

```
MMapWriter::writeAt(size_t offset, const void* src, size_t size) 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-17T11:21:05.863

`size_t`用于对象，`off_t`用于文件。

`mmap`几乎按照定义合并了这两个概念。我个人认为我会使用`size_t`，因为无论它是什么，映射文件也是（虚拟）内存中的一个数组。

`size_t`是标准的 C++，`off_t`是 Posix，并且`off64_t`是一个 GNU 扩展，与函数`fopen64`,`ftello64`等一起使用。我*认为*它应该始终与 64 位 GNU 系统上的类型相同`off_t`，但不要在没有检查的情况下押注你的公司。

如果相关，`off_t`则已签名，`size_t`而未签名。但是签名对应的`size_t`是`ptrdiff_t`，所以当你需要一个签名类型时，它并不意味着你应该使用`off_t`or `off64_t`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-17T11:21:53.130

`size_t`是 C++（和 C）标准的一部分，指的是`sizeof`表达式的类型。 `off_t`由 Posix 标准定义，指的是文件的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-17T12:10:25.077

这种情况的良好经验法则。使用任何导致您使用最少显式转换的函数签名，无论是 c 样式还是 c++ 样式。如果必须强制转换，c++ 风格更安全，因为它可以执行的强制转换类型受到更多限制。

这样做的好处是，如果您移植到类型不匹配的平台（无论是有符号、大小或字节序问题等），您应该在编译时而不是在运行时捕获大部分错误。铸造是将三角形物体挤压成圆孔的大锤方法（或多或少你告诉编译器保持安静，我知道我在做什么）。

试图在运行时找到铸造问题可能会很痛苦，因为它很难重现。最好在编译时而不是运行时发现问题。编译器是你的朋友。

# jquery - 如何设置 jquerymobile 框架对话框自定义高度/宽度？

> ID：10634630
> 
> 赞同：0
> 
> 时间：2012-05-17T11:12:06.613
> 
> 标签：jquery, html, jquery-plugins, jquery-mobile

我在我的网络应用程序中使用 jquerymobile，我必须在对话框中打开 html 页面。我正在使用下面的代码打开 html 页面。

```
> <a href="chart.html" data-rel="dialog" data-transition="pop"
> data-icon="false">Open HTML Page</a> 
```

页面以默认高度和宽度打开，但我如何设置对话框的自定义高度和宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:29:56.140

高度由内容设置。要调整宽度，您可以覆盖以下 css 类。请务必将此样式放在 JQM 样式表之后。

```
.ui-dialog-contain {
    width: 92.5%; /* Change to whatever you want */
    max-width: 500px;
    margin: 10% auto 15px auto;
    padding: 0;
} 
```

# c# - XNA TCP Socket多次发送丢包

> ID：10634637
> 
> 赞同：1
> 
> 时间：2012-05-17T11:12:35.617
> 
> 标签：c#, windows-phone-7, tcp, xna

我为 Windows Phone 7 开发了一款不错的免费游戏，名为 Domination，尽管发布较早，但还是相当成功的！

现在，我正在开发一个在线多人游戏版本，它考虑到有趣的功能，现在我已经接近尾声了，我遇到了一个大问题。

奇怪的数据包丢失，或类似的东西。

我有一个重现问题的样本。

我有一个服务器。我有一个 Win Form 客户端 我有一个 XNA 客户端

重现问题的步骤：

1）你启动服务器，win form和游戏（你需要一个模拟器和WP7 SDK）

2) 现在，您按下 GO 按钮，表单将打开到服务器的 TCP 通道

3）现在，你按下模拟器上的屏幕，表单将打开到服务器的 TCP 通道

4）现在，每次你按下屏幕模拟器，或者win表单上的GO按钮，服务器都会在正确的客户端上向你发送50条消息

好吧，问题是

1）win form 通常会收到 50 条消息，很少会在一次通信中丢失 10 个数据包，但这很罕见

2) 模拟器，总是丢失 30-40-45 条消息！！！！！！

我尝试了其他方法，但没有任何改变..

一个提示，如果我放置一个 Thread.Sleep(10) ，其中 10 是 10 毫秒，对于每个服务器发送，它工作得很好！！

任何人都可以帮助我吗？我只是不知道把头放在哪里！

样品可以在这里找到：

[http://uploading.com/files/d7e7939c/Projects.zip/](http://uploading.com/files/d7e7939c/Projects.zip/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:25:54.067

没有消息丢失。他们都被接收了。您的代码只是没有正确解释接收到的数据。如果您查看接收到的*字节*数，那将是正确的。如果您查看接收到的字节中的数据，那将是正确的。其余的取决于您的代码。

TCP 提供字节流服务。这意味着你会得到你发送的相同字节。如果您需要将这些字节“粘合”到消息中，那么您必须编写代码来执行此操作。如果您*发送*30 个字节，您可能会收到 30 个字节，或者 10 个字节然后是 20 个字节，或者 1 个字节 30 次，或者介于两者之间的任何内容。如果您先发送 5 个字节，然后再发送 3 个字节，您可能会收到 5 个字节，然后是 3 个字节。或者您可能会收到 8 个字节。或者您可能会收到 1 个字节 8 次。

*您*必须定义消息格式。*您*必须对发件人进行编码才能以该格式发送消息。*您*必须对接收者进行编码以识别它何时收到完整的消息。

发生的事情是您发送“FOO”，然后发送“BAR”并接收“FOOBAR”。在这个过程中，除了“FOO”和“BAR”之间的界限之外，什么都没有丢失。但是，TCP 没有消息边界的概念。如果你需要它们，你必须对它们进行编码。例如，您可以发送“3FOO3BAR”。现在，无论它是如何接收的，接收者都知道“FOO”是一条消息，而“BAR”是另一条消息。另一种选择是“foo\nbar\n”（foo newline bar 换行符）。接收者在接收到换行符时就知道它有一个完整的消息。

但是，无论您如何定义应用程序级消息，您都必须实际编写代码来执行此操作。它不会自己发生。

# ios - 在 ipad 上安装应用程序时崩溃，在模拟器中运行良好

> ID：10634641
> 
> 赞同：0
> 
> 时间：2012-05-17T11:12:53.487
> 
> 标签：ios, cocoa, ipad, crash

我在我的应用程序中遇到以下问题（请帮助我）：

```
 *** Terminating app due to uncaught exception 'CALayerInvalidGeometry', reason: 'CALayer position contains NaN: [1.07157e-08 nan]'
    *** Call stack at first throw:
    (
        0   CoreFoundation                      0x3126a64f __exceptionPreprocess + 114
        1   libobjc.A.dylib                     0x32b12c5d objc_exception_throw + 24
        2   CoreFoundation                      0x3126a491 +[NSException raise:format:arguments:] + 68
        3   CoreFoundation                      0x3126a4cb +[NSException raise:format:] + 34
        4   QuartzCore                          0x32c6f61d _ZL18CALayerSetPositionP7CALayerRKN2CA4Vec2IdEEb + 140
        5   QuartzCore                          0x32c6f58b -[CALayer setPosition:] + 38
        6   QuartzCore                          0x32c6f4d7 -[CALayer setFrame:] + 390
        7   UIKit                               0x35a31455 -[UIView(Geometry) setFrame:] + 188
        8   UIKit                               0x35a51743 UIViewCommonInitWithFrame + 594
        9   UIKit                               0x35a514a1 -[UIView initWithFrame:] + 84
        10  CaCaCard                            0x0000683b -[CaCaCardsAppViewController shouldAutorotateToInterfaceOrientation:] + 510
        11  UIKit                               0x35a6eead -[UIViewController _isSupportedInterfaceOrientation:] + 48
        12  UIKit                               0x35a6ee6f -[UINavigationController _doesTopViewControllerSupportInterfaceOrientation:] + 46
        13  UIKit                               0x35a6ee37 -[UINavigationController shouldAutorotateToInterfaceOrientation:] + 14
        14  UIKit                               0x35a6edbf -[UINavigationController _isSupportedInterfaceOrientation:] + 54
        15  UIKit                               0x35a6fbbb -[UIViewController window:shouldAutorotateToInterfaceOrientation:] + 46
        16  UIKit                               0x35a6f857 -[UIWindow _shouldAutorotateToInterfaceOrientation:] + 194
        17  UIKit                               0x35a6f4a3 -[UIWindow setAutorotates:forceUpdateInterfaceOrientation:] + 366
        18  UIKit                               0x35a6f0ad -[UIWindow setDelegate:] + 168
        19  UIKit                               0x35a6efa9 -[UIViewController _tryBecomeRootViewControllerInWindow:] + 64
        20  UIKit                               0x35a6d611 -[UIViewController viewDidMoveToWindow:shouldAppearOrDisappear:] + 460
        21  UIKit                               0x35a6d3e5 -[UINavigationController viewDidMoveToWindow:shouldAppearOrDisappear:] + 36
        22  UIKit                               0x35a4c5a7 -[UIView(Internal) _didMoveFromWindow:toWindow:] + 506
        23  UIKit                               0x35a4c32f -[UIView(Hierarchy) _postMovedFromSuperview:] + 106
        24  UIKit                               0x35a31c1b -[UIView(Internal) _addSubview:positioned:relativeTo:] + 678
        25  UIKit                               0x35a3196b -[UIView(Hierarchy) addSubview:] + 22
        26  CaCaCard                            0x00004bcf -[CaCaCardsAppAppDelegate application:didFinishLaunchingWithOptions:] + 318
        27  UIKit                               0x35a61821 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 772
        28  UIKit                               0x35a5bb65 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 272
        29  UIKit                               0x35a307d7 -[UIApplication handleEvent:withNewEvent:] + 1114
        30  UIKit                               0x35a30215 -[UIApplication sendEvent:] + 44
        31  UIKit                               0x35a2fc53 _UIApplicationHandleEvent + 5090
        32  GraphicsServices                    0x31d37e77 PurpleEventCallback + 666
        33  CoreFoundation                      0x31241a97 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 26
        34  CoreFoundation                      0x3124383f __CFRunLoopDoSource1 + 166
        35  CoreFoundation                      0x3124460d __CFRunLoopRun + 520
        36  CoreFoundation                      0x311d4ec3 CFRunLoopRunSpecific + 230
        37  CoreFoundation                      0x311d4dcb CFRunLoopRunInMode + 58
        38  UIKit                               0x35a5ad49 -[UIApplication _run] + 372
        39  UIKit                               0x35a58807 UIApplicationMain + 670
        40  CaCaCard                            0x000028e7 main + 70
        41  CaCaCard                            0x0000289c start + 40
    )
    terminate called after throwing an instance of 'NSException'
    Program received signal:  “SIGABRT”.
    warning: Unable to read symbols for /Developer/Platforms/iPhoneOS.platform/DeviceSupport/4.3.5 (8L1)/Symbols/Developer/usr/lib/libXcod

eDebuggerSupport.dylib (file not found).
(gdb) 

-(void) viewWillAppear:(BOOL)animated
//-----------------------------------
{   
    if ( self.interfaceOrientation == UIInterfaceOrientationPortrait ||
        self.interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown  )
    {
        [NSThread sleepForTimeInterval:0.5];

        [UIView beginAnimations:@"View Flip" context:nil];
        [UIView setAnimationDuration:1.25];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

        [[UIApplication sharedApplication] setStatusBarOrientation:
         UIInterfaceOrientationLandscapeRight];

        UIScreen *screen = [UIScreen mainScreen];
        CGFloat screenWidth = screen.bounds.size.width;
        CGFloat screenHeight = screen.bounds.size.height;
        UIView *navView = [[self navigationController] view];
        navView.bounds = CGRectMake(0, 0, screenHeight, screenWidth);
        navView.transform = CGAffineTransformIdentity;
        navView.transform = CGAffineTransformMakeRotation(degreesToRadian(90));
        navView.center = CGPointMake(screenWidth/2.0, screenHeight/2.0);

        [UIView commitAnimations];

    }

    fontSelected = NO;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:49:50.600

问题是您在某些时候设置的帧大小无效。可能是某个地方的值为零的矩形。

从您的代码中，我怀疑您在询问屏幕尺寸时会得到一些意想不到的值。

也不要使用那些旧的动画功能。使用基于块的动画。好多了。

# jsf-2 - 访问使用泛型定义的方法时 JSF 视图参数失败

> ID：10634644
> 
> 赞同：1
> 
> 时间：2012-05-17T11:13:14.703
> 
> 标签：jsf-2

我发现了一些尝试使用视图参数设置值的奇怪行为。下面的代码不起作用...在使用 view 参数提交表单时，未设置 id 值。但是，如果从 getId 和 setId 方法中删除注释，则正确设置了 id 值。访问泛型时 JSF EL 是否存在问题，或者我做错了什么？谁能解释这种行为？

有趣的是，我没有收到任何异常......该值根本没有设置。实际上，甚至连抽象类中的 setId 方法都没有调用。

```
public abstract class AbstractBusinessObjectAction<E, ID extends    Serializable>  {

  protected abstract BusinessObjectManager<E, ID> getBusinessObjectManager();

  public  ID getId() {
    ID id = getBusinessObjectManager().getId();
    return id;
  }

  public void setId(final ID id) {
    getBusinessObjectManager().setId(id);
  }
}

@Named("configuration")
@ConversationScoped
public class ConfigurationAction extends AbstractBusinessObjectAction<ConfigurationParameter, Long> {

  @Inject
  private ConfigurationParameterManager manager;

  protected BusinessObjectManager<ConfigurationParameter, Long> getBusinessObjectManager() {
    return manager;
  }

//  public Long getId() {
//    Long id = super.getId();
//    return id;
//  }

//  public void setId(Long id) {
//    super.setId(id);
//  }
} 
```

以下是 .xhtml 中的一个例外：

```
<f:metadata>
    <f:viewParam id="entityIdParam" name="entityId" value="#{configuration.id}"  />
</f:metadata> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:16:37.927

添加转换器解决了这个问题。

```
<f:viewParam id="entityIdParam" name="entityId" value="#{configuration.id}" >
  <f:converter converterId="javax.faces.Long" />
</f:viewParam> 
```

据我所知，原因如下：

因为 id 属性是`ID extends Serializable`抽象类中的类型，所以 JSF 尝试安装一个不存在的 Serializable 转换器。当我取消注释指示的方法时，代码工作的原因是 JSF 正确地检测到它需要基于“id”属性的属性方法`javax.faces.Long`的显式声明的转换器。`Long`

感谢@Damian 的提示！

# drupal-7 - 分类菜单 - 术语翻译

> ID：10634645
> 
> 赞同：1
> 
> 时间：2012-05-17T11:13:15.413
> 
> 标签：drupal-7, drupal-taxonomy

我有 2 种语言和 2 个不同类别的网站。我想在两种语言上使用分类菜单，但我只想将这些术语翻译成我的语言并使用分类作为菜单。

编辑分类时，我有 3 个选项可供选择：

**本地化。**

*术语对所有语言都是通用的，但它们的名称和描述可能是本地化的。*

这似乎是我正在寻找的解决方案：我想要翻译术语广告只需添加节点并选择类别。但这不起作用。

**翻译。**

*每种语言都允许使用不同的术语，并且可以翻译。*

这也不起作用。

**固定语言。**

*术语将具有全球语言，并且它们只会显示在该语言的页面中。*

我不想有 2 个不同的术语，我想翻译一个术语，所以这个解决方案不适合我。

When I say that it's not working I mean, that on when other language is selected, whole page is translated into this language, but not taxonomy menu. 我记得我写了自己的块来显示它，但后来我不得不为每个术语添加翻译路径。

drupal中是否有可能：

1.  基于分类的菜单（例如：分类有术语：自行车和汽车）？

2.  翻译的术语和显示在菜单中取决于当前站点语言（对于 en：Bikes/Cars，对于法语：Vélo/Auto）？

3.  分类术语的翻译路径（自行车 => 自行车，汽车 => 汽车，Vélo => velo，汽车 => 汽车）？

如何管理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:16:20.873

如果我理解您的问题，本地化术语是您应该使用的选择，但请记住在更改分类翻译设置后在 admin/build/translate/refresh 上刷新您的翻译界面。对于基于分类的菜单，您可以使用[TaxonomyMenu](http://drupal.org/project/taxonomy_menu)，对于本地化的菜单地址，i18nmenu 是一个不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-13T13:02:12.510

它仅适用于重新引入该`Add item for Vocabulary`选项的 7.x-2.x 版本。

[https://drupal.org/node/1034310](https://drupal.org/node/1034310)

但也检查一下：

[https://drupal.org/node/1665308](https://drupal.org/node/1665308)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-15T14:59:04.960

这是一个相当古老的问题，但对于与问题（2）有相同问题的人来说：

**默认情况下，链接到内容类型的分类法不会显示翻译**（即使您已经翻译了分类法）要显示本地化版本，您必须更改显示选项。

转到结构 > 内容类型 >（内容类型）单击“管理显示”。在那里，您可以选择更改格式，例如。链接 -> 链接（本地化）

# php - 如何在 $$variable 中调用数组

> ID：10634649
> 
> 赞同：2
> 
> 时间：2012-05-17T11:13:32.993
> 
> 标签：php

```
$var = "array";
$$var=array("1","2"); 
```

如何在`$$var`不使用的情况下调用数组`foreach`？我想要一个类似的方法`$$var[0]`，但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:16:00.580

像这样使用它：

```
echo ${$var}[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T11:17:52.213

当你运行这段代码时：

```
$var = "array";
$$var = array("1","2"); 
```

...与此相同：

```
$array = array("1","2"); 
```

所以你可以这样做：

```
echo $array[0]; 
```

...或这个：

```
echo ${$var}[0]; 
```

如果您*必须*使用可变变量 - 并且 99.99% 的时间数组是更好的解决方案 - 为了清晰和消除歧义，您应该始终使用大括号。

有关详细信息，请参阅[变量变量](http://php.net/manual/en/language.variables.variable.php)参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:23:03.210

你需要一些花括号：

```
${$var[1]} 
```

或者

```
${$var}[1] 
```

取决于您访问的变量。

# http - 当缓存达到限制时，浏览器如何清理缓存？

> ID：10634651
> 
> 赞同：0
> 
> 时间：2012-05-17T11:13:39.627
> 
> 标签：http, caching, browser, lru

我试图在网上查找此信息，但找不到有关该信息的好信息。你知道描述它是如何工作的吗？1.它是某种LRU算法吗？2.所有浏览器是否共享相同的“清理算法”？

谢谢！谢伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:15:18.483

浏览器简单地使用 LRU 机制并抛出“旧”页面。

# objective-c - 不调用 UITableView 委托

> ID：10634661
> 
> 赞同：5
> 
> 时间：2012-05-17T11:14:03.370
> 
> 标签：objective-c, ios5

我有一个带有外部委托控制器的表格视图。尽管内容表视图数组被很好地填充，
`numberOfSectionsInTableView:`并且 `-tableView: numberOfRowsInSection:`被调用，
但`-tableView: cellForRowAtIndexPath:`未被调用。

已发布的表视图以这种方式设置：

```
CompeticionViewController.h

....

@property (retain, nonatomic) IBOutlet UITableView *calendarioTable;
@property (strong, nonatomic)  calendarioViewController *calendarioController;

....

calendarioTable = [[UITableView alloc] init];

            calendarioController  = [[calendarioViewController alloc] init];

            [calendarioTable setDelegate:calendarioController];

            [calendarioTable setDataSource:calendarioController];

            calendarioController.calendarioArray = [[NSMutableArray alloc] init];

            [calendarioController.calendarioArray addObjectsFromArray: self.calendarioarray];

            [calendarioTable reloadData]; 
```

编辑：

```
calendarioViewController.m

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [calendarioArray count];

} 
```

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T13:48:26.683

在 .xib 文件中链接委托和数据源与文件的所有者或写入

```
tableview.delegate=self

tableview.datasource=self; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:07:03.693

你已经习惯`IBOulet`了，`tableview`为什么你`allocating`把它当成它的`not need memory already allocated`。

现在签入`xib`您的视图控制器，它`tableview`是`binded`及其`delegate`提供`datasource`给`file owner`.

-----------------------------------------**或**-------- --------------------------------------

`add`这条线在`viewDidLoad method`

```
yourtableview.delegate=self

yourtableview.datasource=self; 
```

现在，在使用`IBOulet`for之后，`tableview`您将把它与文件所有者和 ViewController 绑定`interface implements`，`<UITableViewDelegate>`并且`<UITableViewDataSource>` `protocols`

现在`check array`你`providing`要`tableview`拥有`content`它

**编辑**：添加或代码并完成格式化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:13:16.597

确保您的 CompeticionViewController 接口实现了`<UITableViewDelegate>`和`<UITableViewDataSource>`协议。

# c# - 允许进程自动继续的 MessageBox

> ID：10634663
> 
> 赞同：4
> 
> 时间：2012-05-17T11:14:13.363
> 
> 标签：c#, .net, ssis

我希望显示一个消息框，并且程序继续运行，而不是等待我在此消息框上单击“确定”。可以做到吗？

```
else
{
    // Debug or messagebox the line that fails
    MessageBox.Show("Cols:" + _columns.Length.ToString() + " Line: " + lines[i]);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T11:22:56.283

```
//You need to add this if you don't already have it

using System.Threading.Tasks; 
```

//那么这里是你的代码，它将运行主线程的异步；

```
Task.Factory.StartNew( () =>
{
   MessageBox.Show("This is a message");

 }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T11:16:24.457

首先，正确的解决方案是将消息框替换为普通窗口（或表单，如果您使用的是 winforms）。那会很简单。示例 (WPF)

```
<Window x:Class="local:MyWindow" ...>
    <Grid>
        <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center"
                   Text="{Binding}" />
        <Button HorizontalAlignment="Right" VerticalAlignment="Bottom"
                   Click="SelfClose">Close</Button>
    </Grid>
</Window>

...
class MyWindow : Window
{
    public MyWindow(string message) { this.DataContext = message; }
    void SelfClose(object sender, RoutedEventArgs e) { this.Close(); }
}

...
new MyWindow("Cols:" + _columns.Length.ToString() + " Line: " + lines[i]).Show(); 
```

如果您想要一个快速而简单的解决方案，您可以从一次性线程中调用消息框：

```
Thread t = new Thread(() => MessageBox("lalalalala"));
t.SetApartmentState(ApartmentState.STA);
t.Start(); 
```

（不确定是否`ApartmentState.STA`真的需要）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T11:20:40.290

用这个

```
this.Dispatcher.BeginInvoke(new Action(() => { MessageBox.Show(this, "text"); })); 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T11:20:52.990

```
using System.Threading;    

static void MessageThread()
{
    MessageBox.Show("Cols:" + _columns.Length.ToString() + " Line: " + lines[i]);
}

static void MyProgram()
{
    Thread t = new Thread(new ThreadStart(MessageThread));
    t.Start();
} 
```

这将在它自己的线程中启动 MessageThread 函数，以便我调用的其余代码`MyProgram`可以继续。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-17T11:20:58.873

你想要的是无模式的形式。这里有一些[信息](http://msdn.microsoft.com/en-us/library/aa984358%28v=vs.71%29.aspx)和[样品](http://www.thejoyofcode.com/Modeless_Dialogs_in_WinForms.aspx)给你。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-17T11:15:45.257

您需要使用多线程来完成此任务，其中一个线程（主线程）将进行处理，另一个将用于显示消息框。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-05T14:35:16.330

您也可以考虑使用委托。

以下片段来自我刚刚完成的内容：-

```
namespace YourApp
{
  public partial class frmMain : Form
  {
    // Declare delegate for summary box, frees main thread from dreaded OK click
    private delegate void ShowSummaryDelegate();
    ShowSummaryDelegate ShowSummary;

    /// <summary>
    /// Your message box, edit as needed
    /// </summary>
    private void fxnShowSummary()
    {
      string msg;

      msg = "TEST SEQUENCE COMPLETE\r\n\r\n";
      msg += "Number of tests performed: " + lblTestCount.Text + Environment.NewLine;
      msg += "Number of false positives: " + lblFalsePve.Text + Environment.NewLine;
      msg += "Number of false negatives: " + lblFalseNve.Text + Environment.NewLine;

      MessageBox.Show(msg);
    }

    /// <summary>
    /// This callback is used to cleanup the invokation of the summary delegate.
    /// </summary>
    private void fxnShowSummaryCallback(IAsyncResult ar)
    {
      try
      {
        ShowSummary.EndInvoke(ar);
      }
      catch
      {
      }
    }

    /// <summary>
    /// Your bit of code that wants to call a message box
    /// </summary>
    private void tmrAction_Tick(object sender, EventArgs e)
    {
      ShowSummary = new ShowSummaryDelegate(fxnShowSummary);
      AsyncCallback SummaryCallback = new AsyncCallback(fxnShowSummaryCallback);
      IAsyncResult SummaryResult = ShowSummary.BeginInvoke(SummaryCallback, null);
    }

    // End of Main Class
  }
} 
```

# ruby-on-rails - cap deploy:update_code 失败后调用哪个任务？

> ID：10634666
> 
> 赞同：4
> 
> 时间：2012-05-17T11:14:32.713
> 
> 标签：ruby-on-rails, capistrano

我遇到了 capistrano 的问题，因为当 update_code 或符号链接失败时，我需要更改发布路径中某些目录的权限（或弄清楚如何使用 sudo 进行回滚）。

我在 "deploy:rollback", task 和 "deploy:rollback:code", task 之前尝试过，但这些似乎都不是由 update_code 运行的。这是 update_code 任务内部的吗？

我想另一种选择是让 update_code -> rm -rf [releases] 以 sudo 运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T20:27:51.740

这张图片应该对您有所帮助，它是部署时执行任务的顺序：

![在此处输入图像描述](../Images/b6346b9e769b213cb40ccea514904eed.png)

# html - 细弦内的红宝石

> ID：10634667
> 
> 赞同：2
> 
> 时间：2012-05-17T11:14:38.173
> 
> 标签：html, ruby, erb, slim-lang

在 erb 文件中，我可以执行类似的操作

```
<tr class="<%= cycle('list_line_odd', 'list_line_even') %>"> 
```

这条线在苗条文件中的外观如何？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T08:56:34.633

或者：

```
tr[class=cycle('list_line_odd', 'list_line_even')] 
```

或者

```
tr class=cycle('list_line_odd', 'list_line_even') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:25:01.793

```
tr[class="#{cycle('list_line_odd', 'list_line_even')}"] 
```

# android - 如何检查我是否已经在 android 应用程序中登录了 salesforce？

> ID：10634668
> 
> 赞同：0
> 
> 时间：2012-05-17T11:14:38.890
> 
> 标签：android, salesforce

情况： 1.我有用户登录表单，用户使用该表单登录应用程序，同时我们登录到salesforce。2.下次用户打开应用程序时，他不应该得到登录表单，而是直接进入主屏幕。3\. 在这个主屏幕中，我有一个按钮调用同步，它从 SF 检索数据，但为此我必须检查我是否已经登录 SF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:33:10.257

如果您不使用 oAuth，您可能应该考虑使用它。但是，假设您不是，为什么不尝试使用您拥有的会话 ID 请求用户自己的用户记录，如果由于会话 ID 无效而失败，那么您可以再次登录？

除了这样做之外，可能还有一种测试方法，所以我鼓励您阅读 API 的文档。

# javascript - 在 jquery 中使用 next 和 prev()

> ID：10634675
> 
> 赞同：0
> 
> 时间：2012-05-17T11:15:37.167
> 
> 标签：javascript, jquery

```
<label for="a1">First:</label>
<input id="a1" class="first" type="text" name="a1" value="123">
<label for="b1">Second:</label>
<input id="b1" class="second" type="text" name="b1"> <br />
<label for="a2">First:</label>
<input id="a2" class="first" type="text" name="a2"value="3424">
<label for="b2">Second:</label>
<input id="b2" class="second" type="text" name="b2"> <br />
<label for="a3">First:</label>
<input id="a3" class="first" type="text" name="a3"value="1235">
<label for="b3">Second:</label>
<input id="b3" class="second" type="text" name="b3"> <br />

$('.second').click(function(){
   var get_first = // ???
   $(this).val(get_first);
}) 
```

例如，我想 - 如果我点击输入 b3 那么这个值现在是来自 a3 的值。我怎样才能在一堂课中使用下一个和上一个？

[http://jsfiddle.net/Bgkrz/](http://jsfiddle.net/Bgkrz/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:26:25.960

我不确定我能想到这样做的原因，但假设我正确理解了您的要求，那么这应该可以工作（目前未经测试）：

```
$('input:text').focus(
    function(){
        var that = $(this);
        that.val(that.prevAll('input:text:first').val());
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/gyUHk/1/)。

参考：

*   [`:first`选择器](http://api.jquery.com/first-selector/)。
*   [`prevAll()`](http://api.jquery.com/prevAll/).
*   [`:text`选择器](http://api.jquery.com/text-selector/)。
*   [`val()`](http://api.jquery.com/val/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:40:13.187

检查这个[小提琴](http://jsfiddle.net/ranganadh/Bgkrz/2/)

使用`jQuery.prevAll()`它将以相反的顺序返回数组，您可以在此处找到零索引处的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:24:12.717

你可以试试这个[JsFiddleDemo](http://jsfiddle.net/Bgkrz/1/)

```
$('.second').click(function(){
   var get_first = $(this).prev().prev().val();
   $(this).val(get_first);
}) 
```

# matlab - print() 出错：“未分配输出参数“varargout”（可能还有其他参数）”

> ID：10634678
> 
> 赞同：0
> 
> 时间：2012-05-17T11:15:56.530
> 
> 标签：matlab, printing

我一直在尝试在 MATLAB 中编写一个简单的脚本来绘制图像，询问用户是否要将其打印到文件中，并且（如果是）执行此操作。但是，我遇到了一个奇怪的`print()`函数错误。这是我的代码：

```
plot(X, Y, 'red');

choice = input('Do you want to print to file this 2D image ? [y/n] ', 'y');

if(choice=='Y' || choice=='y')
{
    print(hFig, '-dpng', strcat(filename, '.png'));
} 
```

`if`如果正在运行，它会在语句中停止并出现错误：

> ==> 打印错误 161 err.message='';
> 
> ？？？在调用“C:\Programmi\MATLAB\R2010a\toolbox\matlab\graphics\print.m>print”期间未分配输出参数“varargout”（可能还有其他参数）。
> 
> ==> 直方图在 30 print(hFig, '-dpng', strcat(filename, '.png'));

为什么会出现此错误，如何避免此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T12:04:35.973

您的`if`代码在 MATLAB 中看起来很奇怪，`{`用于元胞数组和元胞数组索引，而不是用于代码结构。此外，must的第二个参数不是你所拥有的。`}``{``}``input``'s'``'y'`

固定代码：

```
choice = input('Do you want to print to file this 2D image ? [y/n] ', 's');

if(choice=='Y' || choice=='y')
    print(hFig, '-dpng', strcat(filename, '.png'));
end 
```

**编辑：**一直询问直到用户用“y”、“Y”、“n”或“N”回应：

```
choice = '';
while ~ismember(choice, {'y', 'Y', 'n', 'N'})
    choice = input('Do you want to print to file this 2D image ? [y/n] ', 's');
end

if(choice=='Y' || choice=='y')
    print(hFig, '-dpng', strcat(filename, '.png'));
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:46:19.457

太混乱了！因为打印命令没有任何输出参数！！！

我不清楚，但我认为首先检查 hFig 分配。您可以使用

```
hFig=figure;
plot(X, Y, 'red');
% ... 
```

如果你想创建一个图形并在其中绘制任何你想要的东西。由于错误表明您的输出参数未分配，因此请检查“文件名”或者您可以使用

```
[filename '.png'] 
```

反而。

我希望这对你有帮助。现在我没有 MATLAB，我无法为你测试它。

PS：看到这个：[为什么我得到错误'??? 在调用‹function›期间未分配输出参数‹variable›（可能还有其他）。?](http://www.mathworks.com/support/solutions/en/data/1-FA99V6/index.html?solution=1-FA99V6)

# c# - 通过接口枚举 - 性能损失

> ID：10634679
> 
> 赞同：14
> 
> 时间：2012-05-17T11:15:57.190
> 
> 标签：c#, performance, list, ienumerable

我和我的同事有一点争议（这非常接近圣战:)），关于通过 indeces **VS**通过枚举器访问列表的性能。为了操作一些事实，我编写了以下测试：

```
 static void Main(string[] args)
    {
        const int count = 10000000;

        var stopwatch = new Stopwatch();

        var list = new List<int>(count);

        var rnd = new Random();

        for (int i = 0; i < count; i++)
        {
            list.Add( rnd.Next());
        }

        const int repeat = 20;

        double indeces = 0;
        double forEach = 0;

        for (int iteration = 0; iteration < repeat; iteration++)
        {
            stopwatch.Restart();
            long tmp = 0;
            for (int i = 0; i < count; i++)
            {                    
                tmp += list[i];
            }

            indeces += stopwatch.Elapsed.TotalSeconds;
            stopwatch.Restart();
            foreach (var integer in list)
            {            
                tmp += integer;
            }

            forEach += stopwatch.Elapsed.TotalSeconds;
        }

        Console.WriteLine(indeces /repeat);
        Console.WriteLine(forEach /repeat);

    } 
```

实际上，它只是访问元素。

正如我所料，索引访问速度更快。这是在我的机器上发布版本的结果：

```
 0.0347//index access
    0.0737//enumerating 
```

但是，我决定稍微改变一下测试：

```
 //the same as before
        ...
        IEnumerable<int> listAsEnumerable = list;
        //the same as before
        ...
        foreach (var integer in listAsEnumerable)
        {                
            tmp += integer;
        }
        ... 
```

现在输出如下：

```
 0.0321//index access
    0.1246//enumerating (2x slower!) 
```

如果我们通过接口枚举同一个列表，性能会 慢**2 倍**！

## 为什么会发生这种情况？

**这**意味着“通过接口枚举比枚举实际列表慢 2 倍”。

我的猜测是运行时使用不同`Enumerator`的 s：第一个测试中的列表和第二个测试中的通用列表。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-17T11:21:10.387

使用时`List<T>`，`foreach`实际上并不使用`IEnumerable<T>`接口；相反，它使用`List<T>.Enumerator`，这是一个`struct`。在微不足道的层面上，这意味着更少的间接 - 不必取消引用，并使用静态调用而不是虚拟调用 - 以及更直接的实现。

这些差异非常小，在任何明智的现实生活示例中，差异都是噪音。**但是，如果只**`foreach`测试性能，它可能会稍微引人注目。

对此进行扩展：`foreach`实际上并不需要-`IEnumerable[<T>]`它可以**纯粹**在`GetEnumerator()`///模式上工作`.MoveNext()`；这在 2.0 中的泛型之前尤其重要。`.Current``.Dispose()`

但是，这只有在变量类型为`List<T>`（具有自定义`GetEnumerator()`方法）时才有可能。一旦你有`IEnumerable<T>`，它必须使用`IEnumerator<T>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T11:27:11.770

你可以在这里看到代码：

```
static void Main()
{

    List<int> list = new List<int>(Enumerable.Range(1,10000));

    int total = 0;
    foreach (var i in list)
    {
        total += i;
    }
    IEnumerable<int> enumerable = list;
    foreach (var i in enumerable)
    {
        total += i;
    }
    Console.ReadLine();
} 
```

这会生成这个 IL。注意两者的区别

```
System.Collections.Generic.List`1/Enumerator<int32> 
```

和

```
System.Collections.Generic.IEnumerable`1<int32> 
```

并注意它是一个`ValueType`（结构）：

```
.method private hidebysig static void  Main() cil managed
{
  .entrypoint
  // Code size       146 (0x92)
  .maxstack  2
  .locals init ([0] class [mscorlib]System.Collections.Generic.List`1<int32> list,
           [1] int32 total,
           [2] int32 i,
           [3] class [mscorlib]System.Collections.Generic.IEnumerable`1<int32> enumerable,
           [4] valuetype [mscorlib]System.Collections.Generic.List`1/Enumerator<int32> CS$5$0000,
           [5] bool CS$4$0001,
           [6] class [mscorlib]System.Collections.Generic.IEnumerator`1<int32> CS$5$0002)
  IL_0000:  nop
  IL_0001:  ldc.i4.1
  IL_0002:  ldc.i4     0x2710
  IL_0007:  call       class [mscorlib]System.Collections.Generic.IEnumerable`1<int32> [System.Core]System.Linq.Enumerable::Range(int32,
                                                                                                                                  int32)
  IL_000c:  newobj     instance void class [mscorlib]System.Collections.Generic.List`1<int32>::.ctor(class [mscorlib]System.Collections.Generic.IEnumerable`1<!0>)
  IL_0011:  stloc.0
  IL_0012:  ldc.i4.0
  IL_0013:  stloc.1
  IL_0014:  nop
  IL_0015:  ldloc.0
  IL_0016:  callvirt   instance valuetype [mscorlib]System.Collections.Generic.List`1/Enumerator<!0> class [mscorlib]System.Collections.Generic.List`1<int32>::GetEnumerator()
  IL_001b:  stloc.s    CS$5$0000
  .try
  {
    IL_001d:  br.s       IL_002d
    IL_001f:  ldloca.s   CS$5$0000
    IL_0021:  call       instance !0 valuetype [mscorlib]System.Collections.Generic.List`1/Enumerator<int32>::get_Current()
    IL_0026:  stloc.2
    IL_0027:  nop
    IL_0028:  ldloc.1
    IL_0029:  ldloc.2
    IL_002a:  add
    IL_002b:  stloc.1
    IL_002c:  nop
    IL_002d:  ldloca.s   CS$5$0000
    IL_002f:  call       instance bool valuetype [mscorlib]System.Collections.Generic.List`1/Enumerator<int32>::MoveNext()
    IL_0034:  stloc.s    CS$4$0001
    IL_0036:  ldloc.s    CS$4$0001
    IL_0038:  brtrue.s   IL_001f
    IL_003a:  leave.s    IL_004b
  }  // end .try
  finally
  {
    IL_003c:  ldloca.s   CS$5$0000
    IL_003e:  constrained. valuetype [mscorlib]System.Collections.Generic.List`1/Enumerator<int32>
    IL_0044:  callvirt   instance void [mscorlib]System.IDisposable::Dispose()
    IL_0049:  nop
    IL_004a:  endfinally
  }  // end handler
  IL_004b:  nop
  IL_004c:  ldloc.0
  IL_004d:  stloc.3
  IL_004e:  nop
  IL_004f:  ldloc.3
  IL_0050:  callvirt   instance class [mscorlib]System.Collections.Generic.IEnumerator`1<!0> class [mscorlib]System.Collections.Generic.IEnumerable`1<int32>::GetEnumerator()
  IL_0055:  stloc.s    CS$5$0002
  .try
  {
    IL_0057:  br.s       IL_0067
    IL_0059:  ldloc.s    CS$5$0002
    IL_005b:  callvirt   instance !0 class [mscorlib]System.Collections.Generic.IEnumerator`1<int32>::get_Current()
    IL_0060:  stloc.2
    IL_0061:  nop
    IL_0062:  ldloc.1
    IL_0063:  ldloc.2
    IL_0064:  add
    IL_0065:  stloc.1
    IL_0066:  nop
    IL_0067:  ldloc.s    CS$5$0002
    IL_0069:  callvirt   instance bool [mscorlib]System.Collections.IEnumerator::MoveNext()
    IL_006e:  stloc.s    CS$4$0001
    IL_0070:  ldloc.s    CS$4$0001
    IL_0072:  brtrue.s   IL_0059
    IL_0074:  leave.s    IL_008a
  }  // end .try
  finally
  {
    IL_0076:  ldloc.s    CS$5$0002
    IL_0078:  ldnull
    IL_0079:  ceq
    IL_007b:  stloc.s    CS$4$0001
    IL_007d:  ldloc.s    CS$4$0001
    IL_007f:  brtrue.s   IL_0089
    IL_0081:  ldloc.s    CS$5$0002
    IL_0083:  callvirt   instance void [mscorlib]System.IDisposable::Dispose()
    IL_0088:  nop
    IL_0089:  endfinally
  }  // end handler
  IL_008a:  nop
  IL_008b:  call       string [mscorlib]System.Console::ReadLine()
  IL_0090:  pop
  IL_0091:  ret
} // end of method Program2::Main 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T11:22:40.293

如果您查看这两个版本的 IL，您将看到第一个版本使用类型的迭代器`System.Collections.Generic.List<System.Int32>+Enumerator`- 嵌套`struct`，它针对迭代列表进行了优化。

第二个版本使用 的通用实现`System.Collections.Generic.IEnumerator<System.Int32>`，效率较低，因为它不会通过为列表中的当前项目保留私有索引来“作弊”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T11:22:39.043

我怀疑使用 for 而不是 foreach 可以提高性能（至少对于原始类型）。据我所知，如果您在同一个数组上执行 for 和 foreach ，它们几乎是等效的（不是任何其他结构，如列表，这本身会产生一些开销）。

foreach 和 for 的性能取决于您正在运行的结构类型和 foreach。

请检查; [For 和 Foreach 比较](http://blogs.msdn.com/b/kevin_ransom/archive/2004/04/19/116072.aspx)

# javascript - jQuery 中的 AJAX 请求混淆

> ID：10634682
> 
> 赞同：0
> 
> 时间：2012-05-17T11:16:09.250
> 
> 标签：javascript, jquery

我无法理解为什么 jquery AJAX 没有从 ajax 页面获取数据。有人可以帮忙吗。

```
<script type="text/javascript">

$(function() {
    $('#lms_id').change(function(){
        if ($(this).val() != "") {
        //    alert("1");
        } else {
        //    alert("0");
        }
    });

    $('#lms_user_role_id').change(function(){
        if (($(this).val() == "7" || $(this).val() == "8")) {
            $('#t_lms_dealers').show();
        } else {
            $('#t_lms_dealers').hide();
        }
    });
});

      function loadAjax(message)
      {
      //alert(message);
      //$.get("<?php echo $App['wwwroot'].'er.php' ?>?activity="+message);
      $.get("http://www.abc.loc/er.php");

      }
      </script> 
```

在 loadAjax 函数中，alert 很好，但只有 AJAX 部分不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:27:41.850

你怎么知道它“不工作”？

```
$.get("http://www.abc.loc/lmsapi/LMS_L2/templates/admin/user/tpl.user_dealer.php"); 
```

即便如此，这句话也无济于事。您需要在其中放置一个处理程序：

```
$.get(
    "http://www.abc.loc/lmsapi/LMS_L2/templates/admin/user/tpl.user_dealer.php",
    function (data) {
        alert("Retrieved :"+data);
    }
); 
```

您还应该使用某种浏览器开发工具（例如，**firebug**），它可以让您实时跟踪请求。最后，纯 jquery`get`缺少错误处理程序；您可能想改用：

```
$.ajax ({
    url: "http://www.abc.loc/lmsapi/LMS_L2/templates/admin/user/tpl.user_dealer.php",
    success: function (data) {
        alert(data);
    },
    error: function (xhr, err, code) {
        alert("Error: "+err);
    }
}); 
```

并阅读查询文档：

[http://api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:37:53.140

如果我没有错，第二种可能性是您正在尝试“跨域 ajax 调用”，如果是，那么您必须为 $.ajax 调用设置标题“Access-Control-Allow-Origin”和“crossDomain：true”。

# scala - Scalatra——请求正文中的字节数组/图像流

> ID：10634686
> 
> 赞同：2
> 
> 时间：2012-05-17T11:16:27.000
> 
> 标签：scala, bytearray, http-post, scalatra

Internet上有大量文档如何以其他语言在HTTP POST请求中发送文件流，但在Scalatra中没有。

主题：我想通过 Scalatra post() 以字节数组或文件流的形式发送图像（对不起，草率的术语，我绝对是新手）。我已经有后端 Java 函数，它们采用字节数组，将其转换回 .jpg 图像并将其存储在服务器上。我不清楚的是如何在 Scalatra 中执行此操作的确切语法。

这就是我的帖子请求的样子：

```
 val imageInBytes = ... //obtain image in bytes
    post("/images", ("image" -> imageInBytes)) 
```

但是，Eclipse 说重载方法 post 不能应用于 (String, (String, Array[Byte]))

在服务器端：

```
 post("/images"){
           contentType = "image/jpeg"  //for displaying the image
           val imInBytes = params("image")  //obtain data from request body
           //do something with it.
     } 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:53:27.230

您需要对图像字节进行 base64 url​​ 编码，然后您可以从 params 包中获取它。

您还可以将原始图像发布到端点，然后读取 inputStream。

# vb.net - 覆盖 Visual Basic 标签文本

> ID：10634690
> 
> 赞同：0
> 
> 时间：2012-05-17T11:16:42.057
> 
> 标签：vb.net, label

我正在从收发器将温度值读取到串行端口中，并且我希望该值更改我的 Visual Basic 表单中标签的值。这个值每隔几秒就会改变一次。我正在使用下面的代码：

```
Me.dataReceived.Text &= [text] 
```

其中 dataReceived 是我正在使用的标签，[text] 是我从串口读取的数据。这会导致显示数据，但不是覆盖标签，而是一个接一个地写入值。（数据已附加）。我试图在 = 之前删除 & 但这没有用，因为什么也没出现。关于我能做什么的任何想法？

我正在使用的代码如下：

```
'To receive data into the text field
Private Sub SerialPort1_DataReceived(ByVal sender As Object, ByVal e As System.IO.Ports.SerialDataReceivedEventArgs) Handles SerialPort1.DataReceived

    While (SerialPort1.IsOpen)
        ReceivedText(SerialPort1.ReadExisting())    'This is called automatically every time  data is received at the Serial Port
    End While

End Sub

Private Sub ReceivedText(ByVal [text] As String)

    Dim temperature As String

    'This function compares the creating Thread's ID with the calling Thread's ID
    If Me.dataReceived.InvokeRequired Then
        Dim x As New SetTextCallback(AddressOf ReceivedText)
        Me.Invoke(x, New Object() {(text)})
    Else
        'To output to the text box:
        Me.dataReceived.Text = text

        'To output to the label
        temperature = text
        Me.temp.Text = text
        hmd.Text = temperature

    End If
   End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T11:18:48.127

如果要覆盖旧值，则不应使用`&=`而只是`=`分配新值：

```
Me.dataReceived.Text = newText 
```

`&=`是相同的`Me.dataReceived.Text = Me.dataReceived.Text & newText`

来自[MSDN](http://msdn.microsoft.com/en-us/library/fz1zs43f.aspx)：

> 运算符将`&=`其右侧的 String 表达式连接到其左侧的 String 变量或属性，并将结果分配给其左侧的变量或属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:18:32.540

试试这个：

```
If (text IsNot Nothing) AndAlso (text.Trim().Length <> 0) Then
    Me.dataReceived.Text = text
End If 
```

我对 SerialPort 类不太熟悉，但我会尽力解释发生了什么。当有新数据通过串口进来时，串口会引发数据接收事件。然后，您的代码会读取所有已收到的现有数据。当您调用 ReadExisting 方法时，它只返回到目前为止已收到的内容。它不会在返回之前等待所有数据进入。然后它调用 ReceivedText 方法，该方法将某些控件的值设置为接收到的文本。InvokeRequired 和 Invoke 调用只是为了让您回到 UI 线程。显然 SerialPort 的 DataReceived 事件可能会在单独的线程上引发，因此您需要返回 UI 线程，然后才能对表单上的任何控件执行任何操作。我建议的更改只是检查以确保在更改文本框的值之前收到的文本不为空或为空。该代码的奇怪之处在于它继续从串行端口读取，直到它不再打开。我不认为你会想要那样做。相反，我认为在每个 DataReceived 事件中，您只需调用 ReadExisting 一次，然后期望在下次收到更多数据时再次引发它。通过在循环中连续调用 ReadExisting，如果没有更多数据要读取，它必须返回空字符串或空字符串，这就是文本框被空白的原因。该代码的奇怪之处在于它继续从串行端口读取，直到它不再打开。我不认为你会想要那样做。相反，我认为在每个 DataReceived 事件中，您只需调用 ReadExisting 一次，然后期望在下次收到更多数据时再次引发它。通过在循环中连续调用 ReadExisting，如果没有更多数据要读取，它必须返回空字符串或空字符串，这就是文本框被空白的原因。该代码的奇怪之处在于它继续从串行端口读取，直到它不再打开。我不认为你会想要那样做。相反，我认为在每个 DataReceived 事件中，您只需调用 ReadExisting 一次，然后期望在下次收到更多数据时再次引发它。通过在循环中连续调用 ReadExisting，如果没有更多数据要读取，它必须返回空字符串或空字符串，这就是文本框被空白的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:18:49.077

`&=`正在连接你的文字。用于`=`覆盖标签。

```
Me.dataReceived.Text = text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T13:51:33.317

我不确定发生了什么，但它可能`text`在设置`dataReceived.Text`. 试试这个，

```
Private Sub ReceivedText(ByVal datatext As String)
     Me.Invoke(Sub()   
                    'To output to the text box:
                    Me.dataReceived.Text = datatext

                    Me.temp.Text = datatext
                    hmd.Text = datatext
               End Sub)
    End If
End Sub 
```

我改为`text`因为`datatext`可能`text`与表单本地`text`属性混淆。我还将标签/文本框的文本属性设置移动到使用 lambda 的调用中（请注意，此语法是新语法，仅适用于 VB 2010）。我觉得您的调用语句可能没有正确传递字符串值。我还删除了对 的检查`InvokeRequired`，因为调用在这两种情况下都有效，而且看起来你可能只是每次都在进行线程调用。

如果它为您编译，它应该可以工作。如果没有，它可能`RecievedText`永远不会被调用。设置一些断点并单步执行代码以查看它`datatext`有一个值并且`ReceivedText`实际被调用。

# eclipse - Flash/Flex Builder (Eclipse) - 带有 Subclipse 1.8 的 TortoiseSVN 1.7 - IDE 中没有 svn 选项？

> ID：10634692
> 
> 赞同：1
> 
> 时间：2012-05-17T11:16:51.543
> 
> 标签：eclipse, apache-flex, tortoisesvn, flash-builder, subclipse

我已经检查了从存储库文件夹到本地文件夹的许多 Flex 项目`C:/CodeBase/trunk`。

当我将项目导入 FB（或 Eclipse）时，任何文件都没有 SVN 详细信息。没有团队选项，最后更新，文件上的 SVN 图标。

我正在使用 TortoiseSVN 1.7 和 Subclipse 1.8。我认为问题可能是最新的 TortoiseSVN`.svn`在根文件夹中只存储一个文件，而不是在每个文件夹`CodeBase/trunk`中存储一个文件的旧系统。`.svn`

任何人都知道修复或你遇到过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:21:06.773

尝试 Team > Share Project 并设置存储库详细信息。这将使 SCM 细节对 eclipse 可见。

# python - Python：对 ping 脚本进行故障排除

> ID：10634693
> 
> 赞同：0
> 
> 时间：2012-05-17T11:16:52.523
> 
> 标签：python

我碰到了另一面“墙”...我有以下脚本，它似乎在 Windows 上运行良好，但是当我将它移到 Linux 时，它似乎失去了功能。

注意：我添加了打印行语句以进行故障排除。

以下脚本在 I 时输出 hostsFile 的内容，`print lines`然后在 I 时依次打印每一行`print line`。但是当它执行 ping 时，它似乎直接跳转到文件中的最后一个主机。我想知道我是否遗漏了一些明显的东西（我还在学习 python 作为新手）。

```
import sys, os, platform, subprocess

plat = platform.system()
scriptDir = sys.path[0]
hosts = os.path.join(scriptDir,'hosts.txt')
hostsFile = open(hosts, "r")
lines = hostsFile.readlines()
print lines
if plat == "Windows":
        for line in lines:
                line = line.strip( )
                ping = subprocess.Popen(
                        ["ping", "-n", "1", "-l", "1", "-w", "100", line],
                        stdout = subprocess.PIPE,
                        stderr = subprocess.PIPE
                )
        out, error = ping.communicate()
        print out
        print error

elif plat == "Linux":
        for line in lines:
                print line
                line = line.strip()
                ping = subprocess.Popen(
                        ["ping", "-c", "1", "-s", "1", "-l", "1",line],
                        stdout = subprocess.PIPE,
                        stderr = subprocess.PIPE
                )
        out, error = ping.communicate()
        print out
        print error

hostsFile.close() 
```

任何想法/帮助表示赞赏。

提前谢谢了。

问候，

米宾

编辑：感谢 Wooble 的帮助......正确的代码应该是（注意间距）：

```
import sys, os, platform, subprocess

plat = platform.system()
scriptDir = sys.path[0]
hosts = os.path.join(scriptDir,'hosts.txt')
hostsFile = open(hosts, "r")
lines = hostsFile.readlines()
if plat == "Windows":
        for line in lines:
                line = line.strip( )
                ping = subprocess.Popen(
                        ["ping", "-n", "1", "-l", "1", "-w", "100", line],
                        stdout = subprocess.PIPE,
                        stderr = subprocess.PIPE
                )
                out, error = ping.communicate()
                print out
                print error

if plat == "Linux":
        for line in lines:
                line = line.strip()
                ping = subprocess.Popen(
                        ["ping", "-c", "1", line],
                        stdout = subprocess.PIPE,
                        stderr = subprocess.PIPE
                )
                out, error = ping.communicate()
                print out
                print error

hostsFile.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:39:31.630

如图所示，此代码不适用于 Windows 或 Linux。您需要在循环内移动 ping.communicate() ，否则它将仅在循环完成后执行。

你的 for 循环应该是这样的：

```
for line in lines:
    print line
    line = line.strip()
    ping = subprocess.Popen(
                ["ping", "-c", "1", "-s", "1", "-l", "1",line],
                stdout = subprocess.PIPE,
                stderr = subprocess.PIPE
          )
    out, error = ping.communicate()
    print out 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:38:30.690

问题是你在`for`循环之后只调用了一次通信。在脚本中的那个点，变量`ping`引用了循环中对 subprocess 的最后一次调用。

您可以使用空的“hosts.txt”文件来体验这一点。你甚至不会进入循环，所以你会得到一个 NameError：`NameError: name 'ping' is not defined`

你应该在循环中调用它！

**更新**：示例：

```
for line in lines:
    print line
    line = line.strip()
    ping = subprocess.Popen(
        ["ping", "-c", "1", "-s", "1", "-l", "1",line],
        stdout = subprocess.PIPE,
        stderr = subprocess.PIPE
    )
    out, error = ping.communicate()
    print "out:", out
    print "error:", error 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:42:27.027

我相信这就是你所追求的：

```
import sys, os, platform, subprocess

plat = platform.system()
scriptDir = sys.path[0]
hosts = os.path.join(scriptDir,'hosts.txt')
hostsFile = open(hosts, "r")
lines = hostsFile.readlines()
print lines
if plat == "Windows":
        for line in lines:
                line = line.strip( )
                ping = subprocess.Popen(
                        ["ping", "-n", "1", "-l", "1", "-w", "100", line],
                        stdout = subprocess.PIPE,
                        stderr = subprocess.PIPE
                )
                out, error = ping.communicate()
                print out
                print error

elif plat == "Linux":
        for line in lines:
                print line
                line = line.strip()
                ping = subprocess.Popen(
                        ["ping", "-c", "1", "-s", "1", "-l", "1",line],
                        stdout = subprocess.PIPE,
                        stderr = subprocess.PIPE
                )
                out, error = ping.communicate()
                print out
                print error

hostsFile.close() 
```

注意 print 语句增加的缩进，应该在 for 循环中。我刚刚在我的机器上尝试过这个，它正在为 hosts.txt 中的每个结果打印一个 ping - 我假设这就是你想要的？

# java - 特定行和列的自定义单元格渲染器

> ID：10634695
> 
> 赞同：3
> 
> 时间：2012-05-17T11:17:08.257
> 
> 标签：java, swing, jtable, renderer

puuuuuuf，我开始喜欢摇摆 :) 我正在尝试编写一个 cellRenderer 来自定义渲染除第一行和第一列中的所有单元格之外的所有单元格。所以我写了以下内容：

```
public class CustomTableCellRenderer extends DefaultTableCellRenderer {
        public Component getTableCellRendererComponent(JTable table, Object obj, boolean isSelected, boolean hasFocus, int row, int column) {
            Component cell = super.getTableCellRendererComponent(table, obj, isSelected, hasFocus, row, column);

            if(row >0&&column>0){
                cell.setBackground(Color.GREEN);
            }

            return cell;
        }
    } 
```

并将渲染器设置如下：

```
scheduleTable.setDefaultRenderer(Object.class, new CustomTableCellRenderer()); 
```

但由于某种原因，这种方法将渲染器应用于所有单元格。所以他们都是绿色的。如果我做错了什么，你能帮我吗？

提前致谢！

## 添加

```
scheduleTable = new JTable() {
                    @Override
                    public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                        Component comp = super.prepareRenderer(renderer, row, column);
                        int modelRow = convertRowIndexToModel(row);
                        int modelColumn = convertColumnIndexToModel(column);
                        if (modelColumn != 0 && modelRow != 0) {
                            comp.setBackground(Color.GREEN);
                        }
                        return comp;
                    }
                }; 
```

这段代码也使所有表格都变绿了。

这段代码：

```
scheduleTable = new JTable(tableModel) {
                    @Override
                    public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                        Component comp = super.prepareRenderer(renderer, row, column);
                        int modelRow = convertRowIndexToModel(row);
                        int modelColumn = convertColumnIndexToModel(column);

                            if (modelRow != 0 && modelColumn != 0) {
                                setBackground(Color.GREEN);
                            } else {
                                setBackground(Color.WHITE);
                            }

                        return comp;
                    }
                }; 
```

给我以下结果;(
![在此处输入图像描述](../Images/79190142c863799ec2c12c4a60a34486.png)

以下情况我有不同`n`的表达方式`row != 0 && column != 0`：
![在此处输入图像描述](../Images/8c50392cf3d036c3ed0a109417c6bfe3.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T11:31:40.553

*   您可以使用[prepareRenderer](https://stackoverflow.com/a/6901508/714968)，最简单，更舒适`XxxCellRenderer`

*   很好的代码示例是@camickr的[表格行渲染](http://tips4java.wordpress.com/2010/01/24/table-row-rendering/)

编辑：

```
if (modelColumn != 0 || modelRow != 0) { 
```

![在此处输入图像描述](../Images/927ffda1192bb7eb5733014fecb01cb4.png)

与`if (modelColumn != 0 && modelRow != 0) {`

![在此处输入图像描述](../Images/7036bfb546722883b1aa43444d827232.png)

从代码

```
import java.awt.*;
import java.awt.font.TextAttribute;
import java.util.Map;
import javax.swing.*;
import javax.swing.border.Border;
import javax.swing.border.CompoundBorder;
import javax.swing.border.EmptyBorder;
import javax.swing.border.MatteBorder;
import javax.swing.table.*;

public class TablePrepareRenderer extends JFrame {

    private static final long serialVersionUID = 1L;
    private JTable table;

    public TablePrepareRenderer() {
        Object[] columnNames = {"Type", "Company", "Shares", "Price", "Boolean"};
        Object[][] data = {
            {"Buy", "IBM", new Integer(1000), new Double(80.50), false},
            {"Sell", "MicroSoft", new Integer(2000), new Double(6.25), true},
            {"Sell", "Apple", new Integer(3000), new Double(7.35), true},
            {"Buy", "Nortel", new Integer(4000), new Double(20.00), false}
        };
        DefaultTableModel model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        table = new JTable(model) {

            private static final long serialVersionUID = 1L;
            private Border outside = new MatteBorder(1, 0, 1, 0, Color.red);
            private Border inside = new EmptyBorder(0, 1, 0, 1);
            private Border highlight = new CompoundBorder(outside, inside);

            @Override
            public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                int modelRow = convertRowIndexToModel(row);
                int modelColumn = convertColumnIndexToModel(column);
                if (!isRowSelected(modelRow)) {
                    if (modelColumn != 0 || modelRow != 0) {
                        comp.setBackground(Color.GREEN);
                    } else {
                        comp.setBackground(table.getBackground());
                    }
                }
                return comp;

                /*Component comp = super.prepareRenderer(renderer, row, column);
                JComponent jc = (JComponent) comp;
                Map attributes = (new Font("Serif", Font.PLAIN, 12)).getAttributes();
                //attributes.put(TextAttribute.WEIGHT, TextAttribute.WEIGHT_BOLD);
                attributes.put(TextAttribute.STRIKETHROUGH, TextAttribute.STRIKETHROUGH_ON);
                if (!isRowSelected(row)) {
                comp.setForeground(Color.black);
                comp.setBackground(row % 2 == 0 ? Color.white : Color.orange);
                int modelRow = convertRowIndexToModel(row);
                String type = (String) getModel().getValueAt(modelRow, 0);
                if (type.equals("Sell")) {
                comp.setFont(new Font(attributes));
                comp.setForeground(Color.red);
                } else {
                comp.setFont(new Font("Serif", Font.BOLD, 12));
                }
                } else {
                comp.setFont(table.getFont());
                }
                jc.setBorder(BorderFactory.createCompoundBorder(jc.getBorder(), BorderFactory.createEmptyBorder(0, 0, 0, 5)));
                return comp;*/
            }
        };
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        getContentPane().add(scrollPane);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                TablePrepareRenderer frame = new TablePrepareRenderer();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:39:24.600

使用行和列值而不转换为模型

# php - 从 Joomla 中的 URL 捕获会话 ID

> ID：10634708
> 
> 赞同：0
> 
> 时间：2012-05-17T11:17:56.017
> 
> 标签：php, joomla

我正在尝试从 URL 捕获会话 ID，以便 ID 将在整个站点中跟随用户，然后在他们填写表单时被捕获。

URL 看起来像这样。

[http://www.mysite.co.za/?campaign=the_campaign_name](http://www.mysite.co.za/?campaign=the_campaign_name)

然后我将此代码插入到我的 Joomla 模板文件的顶部：

```
session_start();
$_SESSION['campaign']=$_GET['campaign']; 
```

这会捕获会话（the_campaign_name）吗？这是否会与 Joomla 一起使用，因为我知道 Joomla 使用自己的会话 ID？

当我检查会话时，我只得到一个显示其会话的 PHPSESSID。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:44:27.437

如果这对任何人有帮助，这似乎对我有用：

```
<?php

    if (isset($_GET['campaign'])) {
        $campaign = $_GET['campaign'];
    }

    setcookie('CampaignName', $campaign);
?> 
```

不确定这是否是正确的方法，但它在 Joomla 上对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:20:35.827

是的，它应该可以工作，joomla 是 PHP。你想要做的是PHP，如果你想检查所有创建的会话变量然后尝试

```
session_start();
var_dump($_SESSION); 
```

**更新：**

根据您需要像这样在joomla中设置和访问会话变量的文档，joomla似乎将会话变量存储在数据库中。

设置会话变量

```
$session =& JFactory::getSession();
$session->set('campaign', $_GET['campaign']); 
```

获取会话变量

```
$session =& JFactory::getSession();
echo $session->get('campaign'); 
```

似乎 joomla 在初始化时出于某种安全原因破坏了常规会话变量，他们说，这是 joomla 文档中的链接，可以帮助您[http://docs.joomla.org/How_to_access_session_variables_set_by_an_external_script](http://docs.joomla.org/How_to_access_session_variables_set_by_an_external_script)

希望这可以帮助。并始终记住通过适当的验证来清理用户输入。在使用它之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T00:49:50.463

既然你在使用 Joomla，为什么不使用 Joomla 框架呢？

设置：

```
JFactory::getSession()->set('campaign', JRequest::getVar('campaign'), $optional_namespace); 
```

要得到：

```
JFactory::getSession()->get('campaign', $optional_default_value, $optional_namespace); 
```

# javascript - 使用 $.post 有字符限制吗？

> ID：10634712
> 
> 赞同：-1
> 
> 时间：2012-05-17T11:18:29.153
> 
> 标签：javascript, jquery, servlets

我正在使用 jquery $.post 方法将字符串发送到 servlet。

```
var temp = "hsad d jad a....sad";
var str="testServlet?param="+temp;
$.post(str, function(data) {
    alert("saved");
}); 
```

当字符较少时，testServlet 会收到一个调用`temp`，比如 5000。但是当它有更多的字符时。字符即> 5000 它不被调用。Firebug 说“已中止”。我不明白为什么。

我认为这可能是因为上面的代码是以表格形式发送`temp`的，`get`所以我这样写 -

```
var temp = "hsad d jad a....sad";
var str="testServlet";
$.post(str, {param:temp}, function(data) {
    alert("saved");
}); 
```

但在这种情况下，servlet 被调用但 param 为空。
1.以上两种方法有区别吗？
2\. 如果第一种方法是 get 那么为什么 jquery 有 $.get ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T11:48:36.053

最大 URL 长度有限制，取决于 Web 浏览器、Web 服务器等当您在 url 中传递一些参数时，即使您使用 POST 请求，也会出现参数过长的问题。

在您的代码中，只有**{param:temp}**将存储在请求正文中。**str**是 url，所以它有最大长度限制。

# forms - 如何让容器在 LWUIT 中填写表格

> ID：10634713
> 
> 赞同：1
> 
> 时间：2012-05-17T11:18:32.577
> 
> 标签：forms, java-me, containers, lwuit

我有一个, 以便能够在 Y 轴中一个`Form`接一个`BoxLayout`地添加不同的自定义控件

但是`Component`我需要在屏幕底部添加一个，但是由于我正在使用，`BoxLayout`所以我无法将其大小固定到屏幕底部

所以我认为我可以设置`Container`控件来填充父级`Form`

所以问题是如何在 LWUIT 中`Container`填写父级`Form`

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T23:10:06.613

你为什么不尝试在`BorderLayout`中添加一个`Form`？

您可以放置`Containers`​​ CENTER 和 SOUTH 位置，它们让您可以根据需要放置控件（BoxLayout Axis Y 在中心）。

那是你要的吗？

# javascript - 如何使用 jQuery 设置文本节点值

> ID：10634719
> 
> 赞同：2
> 
> 时间：2012-05-17T11:19:12.593
> 
> 标签：javascript, jquery, html, string

我有一个这样的 HTML 结构：

```
<div class="votes">
    <b>5</b> Votes
    <a id="vote-' + element_id +'" href="#" class="vote-btn"></a>
</div> 
```

我已经设法在 5 即投票后使用：

```
var voteTextNode = $(this).parent('div').contents().filter(function() {
                    return this.nodeType == 3;  
                });
var voteText = voteTextNode.text(); 
```

现在我想改变这个文本来投票，这是各自的票数。我试过这个：

```
voteNewText = ( newCount == '1' ) ? 'Vote' : 'Votes';
voteTextNode.text(voteNewText); 
```

但这对我不起作用。我还尝试了此链接中的代码： [如何使用 jQuery 获取、操作和替换文本节点？](https://stackoverflow.com/questions/4046482/how-can-i-get-manipulate-and-replace-a-text-node-using-jquery) 但它也对我不起作用告诉我我做错了什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T11:38:56.353

如您所见，jQuery 并不是真正用于处理文本节点的。您`var voteTextNode`将是一个 jQuery 实例，包含一组文本节点。您几乎无法使用 来操作它们`.text()`，这会在其中添加一些新的 TextNode。

然而，这应该工作：

```
 $(this).parent('div').contents().each(function() {
     // iterate over all child nodes
     if (this.nodeType == 3)
        this.data = "Vote";
 }); 
```

但是使用普通的 dom 方法可能会更清楚：

```
 var countTextNode, voteTextNode;
 $(this).parent('div').find('b').each(function() {
      countTextNode = this.firstChild;
      voteTextNode = this.nextSibling;
 });
 return function setVotes(num) {
      countTextNode.data = num;
      votTextNode.data = num == 1 ? 'Vote' : 'Votes';
 }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T11:23:51.867

把它放在一个跨度

```
<div class="votes">
    <b>5</b> <span id="votesTxt">Votes</span>
    <a id="vote-' + element_id +'" href="#" class="vote-btn"></a>
</div> 
```

进而

```
$("#votesTxt").text(( newCount == '1' ) ? 'Vote' : 'Votes'); 
```

**编辑**如果您不想使用 span 则只需更改 b 标记后元素的文本：

```
$("#votes b:first")[0].nextSibling.data = (( newCount == '1' ) ? 'Vote' : 'Votes'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T12:13:51.273

将其视为 DOM 树：您可能想要的是使用类“votes”获取`<b>`每个元素中的第一个元素`<div>`，然后更改紧随其后的文本节点中的文本。jQuery 擅长选择和迭代元素，所以如果你愿意，可以在这部分使用它。获得`<b>`元素后，切换到常规 DOM。这是一个例子：

演示：http: [//jsfiddle.net/Qq3T7/](http://jsfiddle.net/Qq3T7/)

代码：

```
$("div.votes").find("b:first").each(function() {
    this.nextSibling.data = ($(this).text() == "1") ? " Vote" : " Votes";
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T11:24:09.373

你能改变最初的标记吗？如果您只是将要更改的文本包装在标签中，您将更轻松地执行此操作：

```
<span id="votetext">Vote</span> 
```

然后您可以轻松设置文本：

```
$('#votetext').text('Votes'); 
```

# c# - 在 C# 中覆盖 bool ProcessKeyPreview

> ID：10634728
> 
> 赞同：0
> 
> 时间：2012-05-17T11:19:33.927
> 
> 标签：c#, winforms

我使用以下这些代码来处理用户控件中的按键。但我想知道如何为按键的用户控制做同样的事情。

```
const int WM_KEYDOWN = 0x100;
const int WM_KEYUP = 0x101;

protected override bool ProcessKeyPreview(ref Message m)
{
    if (m.Msg == WM_KEYDOWN && (Keys)m.WParam == Keys.A)
    {
        messagebox.show("You have pressed A");
    }

    return base.ProcessKeyPreview(ref m);
} 
```

我想在按键中为 keychar 执行此操作。

这些代码只是给我例如键。A 不能让我工作例如 keychar ='A'

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T12:07:58.647

KeyPress 事件与 KeyDown 和 KeyUp 事件非常不同。您只能使用 ProcessKeyPreview 和 ProcessCmdKey 等覆盖来覆盖 KeyDown 事件处理。

这种覆盖只看到*虚拟*键，在任何人的键盘上都是一样的。KeyDown 的默认处理然后通过应用用户选择的特定键盘布局的 Windows 内的代码发送虚拟键。如果这会产生一个打字键，比如韩语键盘上的“a”或“A”或我不知道什么，那么*就会*产生一个 KeyPress 事件。它直接传递给具有焦点的控件，您只能通过为其 KeyPress 事件实现事件处理程序来在控件处拦截它。

上一段中的 I-don't-know-what 子句是重要部分。尝试拦截键入键通常没有意义。除了“a”和“A”之间的区别之外，还有 20 亿潜在的软件用户在他们的生活中从未输入过“A”。目前尚不清楚您*为什么*要这样做，所以我不能建议另一种方法。

# java - 原因：实际参数类 不能通过方法调用转换为Class

> ID：10634732
> 
> 赞同：0
> 
> 时间：2012-05-17T11:19:48.920
> 
> 标签：java, class, junit, selenium-webdriver

我目前正在使用 JAVA 对 selenium webdriver 进行一些测试。我在尝试执行它们时遇到了问题。我会告诉你我得到了什么：

*   ie_home_com.java

在它上面使用 javac 之后，类就创建好了，好的：

*   ie_home_com.java
*   ie_home_com.class

现在，我将通过 check_nrpe 和 NSClient++ 从 Nagios 启动测试。因此，我创建了一个**ie_home.java**文件，该文件应该启动该类来执行测试。它的内容是：

```
import junit.framework.Test;
import junit.framework.TestSuite;

public class ie_home_com {

    public static Test suite() {
        TestSuite suite = new TestSuite();
        suite.addTestSuite(ie_home_com.class);
        return suite;
    }

    public static void main(String[] args) {
        junit.textui.TestRunner.run(suite());

    }
} 
```

尝试在命令提示符下使用**java ie_home.java**启动它时，出现以下错误：

```
C:\SELENIUM\nav\logitravelcom>java ie_home.java
Error: Could not find or load main class ie_home.java 
```

如果我尝试在其上使用**javac**，我会得到：

```
C:\SELENIUM\nav\logitravelcom>javac ie_home.java
ie_home.java:4: error: class ie_home_com is public, should be declared in a file
 named ie_home_com.java
public class ie_home_com {
       ^
ie_home.java:8: error: method addTestSuite in class TestSuite cannot be applied
to given types;
                suite.addTestSuite(ie_home_com.class);
                     ^
  required: Class<? extends TestCase>
  found: Class<ie_home_com>
  reason: actual argument Class<ie_home_com> cannot be converted to Class<? exte
nds TestCase> by method invocation conversion
2 errors 
```

问题是什么？我对 Java 很陌生，无法弄清楚问题所在。

请注意，我的**CLASSPATH**是：

```
C:\SELENIUM\SERVER\junit-4.10.jar;C:\SELENIUM\SERVER\selenium-server-standalone-2.21.0.jar 
```

我的**路径**是：

```
%JAVA_HOME%;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\ 
```

我的**JAVA_HOME**是：

```
C:\Program Files\Java\jdk1.7.0_04\bin;C:\SELENIUM\SERVER\junit-4.10.jar;C:\SELENIUM\SERVER\selenium-server-standalone-2.21.0.jar 
```

任何帮助都将不胜感激。非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:42:55.033

尝试将 ie_home.java 中的 ie_home_com 类重命名为 ie_home。Java 编译器期望文件名与类名相同。

# c# - asp.net页面的pdf查看器控件？

> ID：10634733
> 
> 赞同：0
> 
> 时间：2012-05-17T11:19:57.453
> 
> 标签：c#, asp.net, c#-4.0, pdf-viewer

我想在我的 asp.net(C#) 网页中显示 PDF 文件。我为 .net 网页找到了很多 pdf 查看器。但我想做的还不止这些。我的意思是，我已经使用 C# 以编程方式检索了 PDF 文件中的书签，然后显示在 TreeView 中。所以，每当用户单击任何节点时，我都想选择（突出显示）显示在 PDF 中的 PDF 文件的适当范围查看器。

例如，请参阅我的附件图片... ![在此处输入图像描述](../Images/94ec036623079d8d120f034dc56968c9.png)

请引导我摆脱这个问题......

谢谢和问候，
P.SARAVANAN

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:33:08.307

也许你可以从这篇文章中得到一些想法：http: [//www.codeproject.com/Articles/41933/ASP-NET-PDF-Viewer-User-Control-Without-Acrobat-Re](http://www.codeproject.com/Articles/41933/ASP-NET-PDF-Viewer-User-Control-Without-Acrobat-Re)

# objective-c - 水平准确度到底是什么意思？

> ID：10634734
> 
> 赞同：16
> 
> 时间：2012-05-17T11:20:04.380
> 
> 标签：objective-c, ios, cllocationmanager, cllocation

我正在使用位置服务开发 iOS 应用程序。有实验物理学的背景，我想知道`horizontalAccuracy`in a `location`found in 到底`locationManager:didUpdateToLocation:fromLocation:`代表什么。文档有点稀疏...

我假设精度给出了基于高斯（或泊松？）分布的置信区间。因此，以一定的概率，实际位置在半径为 的圆内`horizontalAccuracy`，但也可能在该区域之外。那么问题来了：这个概率有多大？如果`horizontalAccuracy`对应于 1σ，我将有 68% 的概率在该圆圈内`horizontalAccuracy`，但反过来看，在近三分之一的情况下，实际位置将在该区域之外。因此，在某些情况下，我宁愿使用 2σ ( `2*horizontalAccuracy`) 甚至 3σ ( `3*horizontalAccuracy`) 来计算。

简而言之：是否有任何迹象表明，置信区间`horizontalAccuracy`有哪些？

评论所有回答“Apple 说它在内部”的人：嗯 - 测量不能准确。它必须具有一定程度的不确定性。如果您经常重复测量，您将获得结果分布——可能是高斯分布。这个高斯有一定的宽度，它对应于测量的不确定性水平。更频繁地测量位置将减少不确定性，从而提高准确性，但永远不会为您提供保证实际位置的明显间隔。您只会得到一个概率。但如果准确度是 3sigma，我们有 99.7% - 这几乎是肯定的。简而言之-我怀疑Apple的文档。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-21T17:02:29.807

我一直在寻找相同的信息，但找不到任何答案。我唯一的指针是，在 Android 上，他们使用 1σ：

[http://developer.android.com/reference/android/location/Location.html#getAccuracy%28%29](http://developer.android.com/reference/android/location/Location.html#getAccuracy%28%29)

对于所有非信徒，此链接还解释了准确性的工作原理。

我的猜测是，在 iOS 上也是如此，但没有办法确定——除了询问编写代码的人；）

**编辑：**

经过一番玩耍并检查位置更新与物理位置后，它似乎更可能是 iOS 上的 3σ。有两个观察结果让我相信这是真的：

*   在 Android 上，来自 WiFi 三角测量的位置通常报告为具有 20 到 50 米之间的精度。在 iOS 上，它介于 65 到 165 米之间。
*   在测量报告位置与设备物理位置之间的距离时，到目前为止每次都在报告的精度范围内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-06T21:19:55.857

iOS 文档没有指定包含概率，但 android 报告了一个 sigma 水平精度，他们将其定义为表示真实位置在圆圈内的概率为 68%。

他们的解释是位置误差服从正态分布，因此 +/- one-sigma 表示 68% 的概率。然而，68% 是一维正态分布的概率。在二维中，一个 sigma 误差表示 39% 的圆内包含概率（距离误差遵循瑞利分布，即具有两个自由度的 chi 分布）。

有两种可能的解释。

1.  圆圈确实代表了 68% 的包含概率，在这种情况下，android 开发人员将一维 sigma 缩放了大约 1.5 倍，因此圆圈恰好代表 68%。在这种情况下，他们选择 68% 是完全任意的。
2.  圆圈实际上代表 39% 的遏制概率。在这种情况下，如果将一维高斯替换为二维高斯及其相关概率，则它们的描述将是正确的。

我认为第二种解释的可能性更大。

iOS：[https ://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocation_Class/index.html#//apple_ref/occ/instp/CLLocation/horizo​​ntalAccuracy](https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocation_Class/index.html#//apple_ref/occ/instp/CLLocation/horizontalAccuracy)

安卓：http: [//developer.android.com/reference/android/location/Location.html#getAccuracy%28%29](http://developer.android.com/reference/android/location/Location.html#getAccuracy%28%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-04T05:38:31.087

这表示位置的准确性级别。示例：如果horizo​​ntalAccuracy 为0 表示高准确度，500 表示horizo​​ntalAccuracy 表示低准确度。位置服务提供商根据蜂窝、WiFi（在 WiFi 连接的情况下）和 GPS 的综合最佳价值更新位置。因此，位置值将根据覆盖范围而波动。您可以使用此水平精度对其进行过滤。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-17T11:54:27.513

X 的水平精度表明您的水平位置可以偏离 X 米。请记住，可以使用 GPS、蜂窝塔三角测量或 wifi 位置数据找到位置。CLLocationManager 通过这 3 种方法为您提供最准确的位置。并且说它有可能最多偏离 X 米。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-05-17T11:49:56.193

[文档](http://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/occ/instp/CLLocation/horizontalAccuracy)稀疏的方式是什么？

> 位置的不确定性半径，以米为单位。（只读）
> 
> 该位置的纬度和经度标识圆的中心，该值表示该圆的半径。负值表示该位置的经纬度无效。

所以你的位置在圈内。它不在圆外，否则半径会更大。您对置信区间的假设是不正确的。

# java - 简单记录器 apache 常见

> ID：10634738
> 
> 赞同：0
> 
> 时间：2012-05-17T11:20:19.793
> 
> 标签：java, logging

我需要使用 Apache common simplelog 将日志写入文本文件，而不是将其打印到 System.err 中。

我在 write 方法中使用 FileWriter，它创建文件但不打印缓冲区中的数据。

```
protected void log(int type, Object message, Throwable t) {

    StringBuffer buf = new StringBuffer();

    if(showDateTime) {
        Date now = new Date();
        String dateText;
        synchronized(dateFormatter) {
            dateText = dateFormatter.format(now);
        }
        buf.append(dateText);
        buf.append(" ");
    }

    switch(type) {
        case SimpleLog.LOG_LEVEL_TRACE: buf.append("[TRACE] "); break;
        case SimpleLog.LOG_LEVEL_DEBUG: buf.append("[DEBUG] "); break;
        case SimpleLog.LOG_LEVEL_INFO:  buf.append("[INFO] ");  break;
        case SimpleLog.LOG_LEVEL_WARN:  buf.append("[WARN] ");  break;
        case SimpleLog.LOG_LEVEL_ERROR: buf.append("[ERROR] "); break;
        case SimpleLog.LOG_LEVEL_FATAL: buf.append("[FATAL] "); break;
    }

    if( showShortName) {
        if( shortLogName==null ) {

            shortLogName = logName.substring(logName.lastIndexOf(".") + 1);
            shortLogName =
                shortLogName.substring(shortLogName.lastIndexOf("/") + 1);
        }
        buf.append(String.valueOf(shortLogName)).append(" - ");
    } else if(showLogName) {
        buf.append(String.valueOf(logName)).append(" - ");
    }

    buf.append(String.valueOf(message));

    if(t != null) {
        buf.append(" <");
        buf.append(t.toString());
        buf.append(">");

        java.io.StringWriter sw= new java.io.StringWriter(1024);
        java.io.PrintWriter pw= new java.io.PrintWriter(sw);
        t.printStackTrace(pw);
        pw.close();
        buf.append(sw.toString());
    }

    write(buf);

}

protected void write(StringBuffer buffer) {

      System.err.println(buffer.toString());// want to print to a file rather than to err

     FileWriter file=new FileWriter(new File("d:/log.txt"));
     file.write(buffer.toString());   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:36:02.007

您需要[刷新流](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/Writer.html#flush%28%29)：

```
file.flush() 
```

或者，如果您真的完成了对文件的写入，则需要[关闭 writer](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/Writer.html#close%28%29)。：

```
file.close() 
```

`close()`在关闭之前刷新流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:54:29.007

This defeats the purpose of SimpleLog IMHO. If you want more complicated features, such as writing to a file instead of the console, you're better off plugging in log4j, or just use the jdk logging to back commons-logging. Either approach would keep the file writing options (file name, size limit, rollover, formatting) in configuration instead of in code.

# php - 在php中获取当前第一天和最后一天

> ID：10634739
> 
> 赞同：3
> 
> 时间：2012-05-17T11:20:20.527
> 
> 标签：php

我如何获取并显示我们所在这一周的第一天和最后一天的日期。

所以在本周它将输出：

```
2012-05-14  -  2012-05-20 
```

（今天是 2012-05-17）

怎么能简单地做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T11:23:59.497

尝试使用[strtotime](http://php.net/strtotime)

```
$first = date('Y-m-d',strtotime("last monday"));
$last = date('Y-m-d',strtotime("next sunday")); 
```

其他例子

```
strtotime('monday this week');
strtotime('sunday this week'); 
```

# php - PHP数组打印语句

> ID：10634740
> 
> 赞同：0
> 
> 时间：2012-05-17T11:20:26.487
> 
> 标签：php

这是我的代码：

```
 if(is_file($userName.".txt")) {
            $userDetails = explode(',', file_get_contents($userName.".txt"));
            print($userDetails[0]);
            if ($password == $userDetails[0]) {
                print('Correct login');
            } else {
                print('Incorrect login');
            }
        } 
```

而且我有以下文件： Simon.txt 具有以下内容： simonpassword,4,1 如果 $userName 是“Simon”，则在运行代码时，为什么会打印出 4 而不是 simonpassword 在该行： print( $userDetails[0])?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:29:29.093

```
<?
$userName = "Simon";
$password = "simonpassword";
if(is_file($userName.".txt")) {
        $userDetails = explode(',', file_get_contents($userName.".txt"));
        print($userDetails[0]);
        if ($password == $userDetails[0]) {
            print('Correct login');
        } else {
            print('Incorrect login');
        }
    }
?> 
```

这是西蒙.txt

```
simonpassword,4,1 
```

它有效。

# git - 使用子树合并策略，历史没有合并

> ID：10634742
> 
> 赞同：4
> 
> 时间：2012-05-17T11:20:27.170
> 
> 标签：git, subtree

我正在尝试通过“子树合并”将外部 SVN 存储库用作我的存储库中的子树。我相信这应该保持库中文件的历史完整，但它不起作用 - 来自合并到我的主分支中的子树的库没有历史记录，但在我添加它们时提交 - 这是一个历史记录来说明我的意思，正是我将要达到的状态如下。

```
lappy8086:YACYAML jamie$ git log --graph 
* commit 0cc6c4e5061741e67d009f3375ce1d2bcd3ab540
| Author: James Montgomerie
| Date:   Thu May 17 12:04:43 2012 +0100
| 
|     Subtree-merge in libYAML (from a git-svn checkout).
|  
* commit b5af5af109d77f6adafebc3dcf5a4796a5035a2e
Author: James Montgomerie
Date:   Thu May 17 11:47:32 2012 +0100

First commit, add .gitignore. 
```

这就是我正在做的尝试让它发挥作用：

```
# check out SVN repo
git svn clone http://svn.pyyaml.org/libyaml/branches/stable libYAML

# create my repo
mkdir YACYAML
cd YACYAML
git init
touch .gitignore
git add .gitignore
git commit -m "First commit, add .gitignore"

# Fetch from git-svn repo I got earlier
git remote add libyaml-svn ../libYAML/
git fetch libyaml-svn
git checkout -b libyaml-svn libyaml-svn/master

# Switch back to master, and try to merge in subtree
git checkout master
git read-tree --prefix=libYAML/ -u libyaml-svn/master
git commit -m "Merge in libYAML as subtree (from git-svn checkout of SVN repo)" 
```

这“有效”，但是，正如我所说，当我查看我的历史记录时，我希望从 libYAML 存储库中看到完整的历史记录，但我没有 - 如上所述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T05:39:06.247

`git log [--follow] <filename>`当合并包括子目录内的树的重新父级时，行为方式似乎不一致，就像这样`git subtree`做一样。

我进行了一些实验，如果您在第一个子树合并之前在源代码行上引入合成的重新父级提交，那么历史开始通过`git log --follow <filename>`.

我可以看到的选项：

1.  修复以跟随合并*期间*`git log`发生的重命名
**   更改`git subtree`为为每个添加创建*两个*提交，首先在一个提交中重新设置树，然后在之后合并重新设置的提交*   `.git/info/grafts`通过使用and完成 #2 手动解决问题`git filter-branch`*

 *解决方法：

```
$ git log --grep git-subtree-mainline
commit 8789f3c80122d1fc52ff43ab776a7b186f51c3c6
Merge: 0c11300 4757376
Author: John Sumsion <email>
Date:   Wed Apr 17 09:43:21 2013

    Add 'some-subdir/' from commit 'f54875a391499f910eeb8d6ff3e6b00f9778a8ab'

    git-subtree-dir: some-subdir
    git-subtree-mainline: 0c113003278e58d32116c8bd5a60f2c848b61bbb
    git-subtree-split: f54875a391499f910eeb8d6ff3e6b00f9778a8ab
$ git checkout -b fix 
Switched to a new branch 'fix'
$ mkdir -p some-subdir
$ git mv <files> some-subdir
$ git commit -m "Re-parenting files before subtree merge to preserve 'git log --follow' history"
$ echo <orig_merge> <orig_parent> <fixed_merge_parent> >> .git/info/grafts
$ git filter-branch --index-filter true --tag-name-filter cat master 
```

以下提交是：

*   `orig_merge`: 8789f3c80122d1fc52ff43ab776a7b186f51c3c6
*   `orig_parent`: 0c113003278e58d32116c8bd5a60f2c848b61bbb
*   `fixed_merge_parent`: 沙从`git commit`

不幸的是，`git subtree`在第一个子树合并之后合并到 via 中的后续更改似乎不会被报告 via，`git log --follow <filename>`即使第一个子树合并被综合地重新设置为父级。

出于某种原因，我似乎记得这在 Git 1.7.x 时间范围内运行良好，但这是我没有时间研究的遥远过去的模糊记忆。以上是在 Git 1.8.3.2 中观察到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:35:56.007

好吧，一个答案是安装 git-subtree 并将其用于：

```
git subtree add --prefix=libYAML/ ../libYAML master 
```

这导致我手动执行它正在寻找（和预期）：

```
lappy8086:YACYAML jamie$ git log --graph
*   commit 453d464cfc140c798d0dea85ab667fe16250181d
|\  Merge: 9fb083d 0ca365a
| | Author: James Montgomerie 
| | Date:   Thu May 17 14:32:36 2012 +0100
| | 
| |     Add 'libYAML/' from commit '0ca365adeb5711bf918d4401e98fce00bab8b3ec'
| |     
| |     git-subtree-dir: libYAML
| |     git-subtree-mainline: 9fb083d923011dd990222da2a58eda42e5220cde
| |     git-subtree-split: 0ca365adeb5711bf918d4401e98fce00bab8b3ec
| |   
| * commit 0ca365adeb5711bf918d4401e98fce00bab8b3ec
| | Author: xi
| | Date:   Sun May 29 05:52:36 2011 +0000
| | 
| |     Bumped the version number and updated the announcement.
| |     
| |     git-svn-id: http://svn.pyyaml.org/libyaml/branches/stable@374 18f92427-320e-0410-9341-c67f048884a3
| |   
| * commit 210b313e5ab158f32d8f09db6a8df8cb9bd6a982
| | Author: xi
| | Date:   Sun May 29 05:29:39 2011 +0000
| | 
| |     Added support for pkg-config.
| |     
| |     git-svn-id: http://svn.pyyaml.org/libyaml/branches/stable@373 18f92427-320e-0410-9341-c67f048884a3
...etc... 
```

我仍然想知道在不依赖 git-subtree 的情况下执行此操作的正确方法。*

# c++ - .Net DLL 与 C++ DLL

> ID：10634743
> 
> 赞同：3
> 
> 时间：2012-05-17T11:20:28.000
> 
> 标签：c++, .net, dll

如何在不查看代码的情况下区分 .NET DLL 和 C++ dll。从任何 PE 文件浏览器查看 DLL 后，我们可以通过查看导出表或 DLL 的其他部分来识别它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:47:38.907

你也许可以使用corflags

对于 .NET c# DLL，我得到

Microsoft (R) .NET Framework CorFlags 转换工具。版本 4.0.30319.1 版权所有 (c) Microsoft Corporation。版权所有。

版本：v4.0.30319 CLR 标头：2.5 PE：PE32 CorFlags：1 ILONLY：1 32BIT：0 签名：0

对于 C++ DLL，我得到

corflags：错误 CF008：指定的文件没有有效的托管标头

**** 更新 ****

我可能误解了这个问题。这是一个关于类似问题的好问题。 [如何测试 Windows DLL 文件以确定它是 32 位还是 64 位？](https://stackoverflow.com/questions/495244/how-can-i-test-a-windows-dll-to-determine-if-it-is-32bit-or-64bit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:54:06.770

事实上，通过查看 Image 文件可以清楚地表明这一点，并由[Portable Executable format specification](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463119.aspx)记录。如果 Directory[IMAGE_DIRECTORY_ENTRY_COM_DESCRIPTOR] 存在（不是 EMPTY），则图像是托管的 (.NET)，否则图像是非托管的。

# java - 在 Linux 机器上使用 java 调用 Excel 宏

> ID：10634752
> 
> 赞同：0
> 
> 时间：2012-05-17T11:20:52.447
> 
> 标签：java, linux, excel, vbscript, vba

我不太确定这是否可能，但它就在这里，我写了一个 excel 宏，我通过 vbs 调用这个宏。这是相同的片段。

```
Dim objExcel, objWorkbook, ad, FilePath
Set objExcel = CreateObject("Excel.Application")
objExcel.Visible = True
For Each ad In objExcel.AddIns
    If ad.Name = "hello.xla" Then
        FilePath = ad.Path & "\hello.xla"
        Exit For
    End If
Next
objExcel.Workbooks.Open (FilePath)
Set objWorkbook = objExcel.Workbooks.Open(WScript.Arguments(0))
objExcel.Run "Test"
objWorkbook.Close
objExcel.Quit
Set objWorkbook = Nothing
Set objExcel = Nothing
WScript.Echo "Finished."
WScript.Quit 
```

我能够做到这一点。现在我用java调用这个vb脚本`Runtime.getRuntime().exec("cmd /c start calling.vbs");`

那么可以在linux服务器上运行这个excel宏吗？我知道我们不能在 linux 机器上调用 vbs 文件，而且打开和格式化 excel 可能是不可能的，因此可能有一种解决方法或其他方式在 linux 机器中调用它，可能使用 sh 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:22:10.137

理论上，您可以在其中安装 Excel 和 Visual Basic，`wine`然后查看您的宏是否在那里运行。然后你可以尝试执行`Runtime.getRuntime().exec("wine cmd /c start calling.vbs");`

实际上，这听起来像是一种非常复杂的方式，会让自己*严重*受伤。

如果您希望它在 Linux 上*可靠*运行，请远离 Excel 和 Visual Basic，并开始使用服务器技术而不是旧的办公技术。

# java - One-to-many relationship: Update removed children with JPA 2.0

> ID：10634755
> 
> 赞同：3
> 
> 时间：2012-05-17T11:20:55.207
> 
> 标签：java, jpa, jpa-2.0, entity-relationship, one-to-many

I have a bidirectional one-to-many relationship.

0 or 1 **client** <-> List of 0 or more **product orders**.

That relationship should be set or unset on both entities: On the client side, I want to set the List of product orders assigned to the client; the client should then be set / unset to the orders chosen automatically. On the product order side, I want to set the client to which the oder is assigned; that product order should then be removed from its previously assiged client's list and added to the new assigned client's list.

I want to use pure JPA 2.0 annotations and one "merge" call to the entity manager only (with cascade options). I've tried with the following code pieces, but it doesn't work (I use EclipseLink 2.2.0 as persistence provider)

```
@Entity
public class Client implements Serializable {
    @OneToMany(mappedBy = "client", cascade= CascadeType.ALL)
    private List<ProductOrder> orders = new ArrayList<>();

    public void setOrders(List<ProductOrder> orders) {
        for (ProductOrder order : this.orders) {
            order.unsetClient();
            // don't use order.setClient(null);
            // (ConcurrentModificationEx on array)
            // TODO doesn't work!
        }
        for (ProductOrder order : orders) {
            order.setClient(this);
        }
        this.orders = orders;
    }

    // other fields / getters / setters
}

@Entity
public class ProductOrder implements Serializable {
    @ManyToOne(cascade= CascadeType.ALL)
    private Client client;

    public void setClient(Client client) {
        // remove from previous client
        if (this.client != null) {
            this.client.getOrders().remove(this);
        }

        this.client = client;

        // add to new client
        if (client != null && !client.getOrders().contains(this)) {
            client.getOrders().add(this);
        }
    }

    public void unsetClient() {
        client = null;
    }

    // other fields / getters / setters
} 
```

Facade code for persisting client:

```
// call setters on entity by JSF frontend...
getEntityManager().merge(client) 
```

Facade code for persisting product order:

```
// call setters on entity by JSF frontend...
getEntityManager().merge(productOrder) 
```

When changing the client assignment on the order side, it works well: On the client side, the order gets removed from the previous client's list and is added to the new client's list (if re-assigned).

BUT **when changing on the client side, I can only add orders** (on the order side, assignment to the new client is performed), but it just ignores when I remove orders from the client's list (after saving and refreshing, they are still in the list on the client side, and on the order side, they are also still assigned to the previous client.

Just to clarify, I **DO NOT want to use a "delete orphan" option**: When removing an order from the list, it should not be deleted from the database, but its client assignment should be updated (that is, to null), as defined in the Client#setOrders method. How can this be archieved?

* * *

**EDIT**: Thanks to the help I received here, I was able to fix this problem. See my solution below:

The client (**"One" / "owned" side**) stores the orders that have been modified in a temporary field.

```
@Entity
public class Client implements Serializable, EntityContainer {

    @OneToMany(mappedBy = "client", cascade= CascadeType.ALL)
    private List<ProductOrder> orders = new ArrayList<>();

    @Transient
    private List<ProductOrder> modifiedOrders = new ArrayList<>();

    public void setOrders(List<ProductOrder> orders) {
    if (orders == null) {
        orders = new ArrayList<>();
    }

    modifiedOrders = new ArrayList<>();
    for (ProductOrder order : this.orders) {
        order.unsetClient();
        modifiedOrders.add(order);
        // don't use order.setClient(null);
        // (ConcurrentModificationEx on array)
    }

    for (ProductOrder order : orders) {
        order.setClient(this);
        modifiedOrders.add(order);
    }

    this.orders = orders;
    }

    @Override // defined by my EntityContainer interface
    public List getContainedEntities() {
        return modifiedOrders;
} 
```

On the **facade**, when persisting, it checks if there are any entities that must be persisted, too. Note that I used an interface to encapsulate this logic as my facade is actually generic.

```
// call setters on entity by JSF frontend...
getEntityManager().merge(entity);

if (entity instanceof EntityContainer) {
    EntityContainer entityContainer = (EntityContainer) entity;
    for (Object childEntity : entityContainer.getContainedEntities()) {
        getEntityManager().merge(childEntity);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T13:16:51.017

JPA does not do this and as far as I know there is no JPA implementation that does this either. JPA requires you to manage both sides of the relationship. When only one side of the relationship is updated this is sometimes referred to as "object corruption"

JPA does define an "owning" side in a two-way relationship (for a OneToMany this is the side that does NOT have the mappedBy annotation) which it uses to resolve a conflict when persisting to the database (there is only one representation of this relationship in the database compared to the two in memory so a resolution must be made). This is why changes to the ProductOrder class are realized but not changes to the Client class.

Even with the "owning" relationship you should always update both sides. This often leads people to relying on only updating one side and they get in trouble when they turn on the second-level cache. In JPA the conflicts mentioned above are only resolved when an object is persisted and reloaded from the database. Once the 2nd level cache is turned on that may be several transactions down the road and in the meantime you'll be dealing with a corrupted object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:23:44.133

You have to also merge the Orders that you removed, just merging the Client is not enough.

The issue is that although you are changing the Orders that were removed, you are never sending these orders to the server, and never calling merge on them, so there is no way for you changes to be reflected.

You need to call merge on each Order that you remove. Or process your changes locally, so you don't need to serialize or merge any objects.

EclipseLink does have a bidirectional relationship maintenance feature which may work for you in this case, but it is not part of JPA.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T11:02:39.833

Another possible solution is to add the new property on your ProductOrder, I named it `detached` in the following examples.

When you want to detach the order from the client you can use a callback on the order itself:

```
@Entity public class ProductOrder implements Serializable { 
  /*...*/

  //in your case this could probably be @Transient
  private boolean detached;  

  @PreUpdate
  public void detachFromClient() {
    if(this.detached){
        client.getOrders().remove(this);
        client=null;
    }
  }
} 
```

Instead of deleting the orders you want to delete you set detached to true. When you will merge & flush the client, the entity manager will detect the modified order and execute the @PreUpdate callback effectively detaching the order from the client.

# android - 在删除级联android 2.2

> ID：10634762
> 
> 赞同：2
> 
> 时间：2012-05-17T11:21:14.457
> 
> 标签：android, sqlite, cascade, cascading-deletes

我有 2 张桌子：

表格1-`create table table1(_id integer primary key, content text not null );`

表 2-`create table table2(_id integer primary key, id_parent integer, content text not null , CONSTRAINT [FK_table2_id_parent] FOREIGN KEY (id_parent) REFERENCES table1 (_id) ON DELETE CASCADE );`

但是`DELETE CASCADE`没有做任何事情......有人知道我做错了什么吗？

[编辑：

当我尝试从 table1 中删除行时，我可以，但是当我查找 table2 时，记录都在那里......即使是那些拥有从 Table1 中不再存在的 id_parent 的人。]

我使用的是安卓 2.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T12:21:20.933

首先确保您使用的创建表命令在语法和逻辑上是正确的。

如果是，那么这是由于以下原因：

声明和定义外键并不能真正应用它们。 **您需要明确地对数据库中的外键约束。**

```
if (!db.isReadOnly()) {
            // Enable foreign key constraints
            db.execSQL("PRAGMA foreign_keys=ON;");
        } 
```

# java - 如何将字节数组转换为位图并通过 Web 服务器流式传输图像？

> ID：10634763
> 
> 赞同：3
> 
> 时间：2012-03-20T20:57:42.637
> 
> 标签：java

我正在从事的项目是在[Arduino](http://en.wikipedia.org/wiki/Arduino) UNO 和[Video Experimenter shield](http://nootropicdesign.com/ve/)的帮助下从安全摄像头捕获帧。然后我通过串行端口将帧作为字节数组发送。我想问一下，我如何使用 Java 将这个字节数组转换回一个图像，然后通过 Web 服务器流式传输这个图像 - 或者甚至将这个图像制作成视频然后流式传输它？

我堆积的代码是这样的：

```
//Handle an event on the serial port. Read the data and save the image.

public synchronized void serialEvent(SerialPortEvent oEvent) {

    if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {

        try {
            System.out.println("Got it!");
            int available = input.available();
            byte[] chunk = new byte[available];
            input.read(chunk, 0, available);
            InputStream in = new ByteArrayInputStream(chunk);
            BufferedImage image = ImageIO.read(in);
            ImageIO.write(image, "BMP", new File ("/home/zuss/images/image.BMP"));

        } catch (Exception e) {
            System.err.println(e.toString());
        } 
     }
} 
```

这将返回到我的终端窗口：`java.lang.IllegalArgumentException: image == null!` 只要 arduino 正在将数据发送到串行端口，就会持续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-18T11:41:30.910

您的代码应如下所示：

```
InputStream in = new ByteArrayInputStream(chunk);
OutputStream out = new FileOutputStream(new File ("/home/zuss/images/image.BMP"));
byte[] buffer = new byte[4096];
int read = in.read(buffer);
while(read >= 0 ) {
    out.write(buffer, 0, read);
    read = in.read(buffer);
} 
```

# c++ - __cxa_finalize 和 __attribute__

> ID：10634767
> 
> 赞同：4
> 
> 时间：2012-05-17T11:21:40.443
> 
> 标签：c++, linux

据我所知，`__cxa_finalize`退出主函数时会调用一个程序（在 Linux 中用 C++ 编写）。我创建了一个共享库并在主函数中使用这个库。当主程序加载/卸载这个库时，我想采取一些措施。我在创建共享库时发现该函数`__attribute__`可以用于该目的（我猜这个函数应该在共享库代码中实现）

我添加了类似的东西：

```
void __attribute__ ((constructor)) my_load(void);

void __attribute__ ((destructor)) my_unload(void); 
```

我在以下链接中实现了函数 my_load 和 my_unload：http: [//tdistler.com/2007/10/05/implementing-dllmain-in-a-linux-shared-library](http://tdistler.com/2007/10/05/implementing-dllmain-in-a-linux-shared-library)

问题是在退出主函数时这些函数的处理顺序究竟是什么？`my_unload()`功能或`__cxa_finalize`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:27:34.637

[构造函数/析构函数属性的 gcc 文档](http://gcc.gnu.org/onlinedocs/gcc-4.7.0/gcc/Function-Attributes.html#Function-Attributes)说：

> 您可以提供一个可选的整数优先级来控制构造函数和析构函数的运行顺序。具有较小优先级编号的构造函数在具有较大优先级编号的构造函数之前运行；相反的关系适用于析构函数。因此，如果您有一个分配资源的构造函数和一个释放相同资源的析构函数，则这两个函数通常具有相同的优先级。**构造函数和析构函数的优先级与命名空间范围 C++ 对象的优先级相同。**

然而，在我使用 gcc-4.7.0 的测试中，构造函数在 C++ 全局对象构造函数之前运行，而在 C++ 全局对象析构函数之后的析构函数运行，无论声明/定义的顺序如何，两者都在同一个翻译单元中。

**更新：** Ian Lance Taylor 报告未指定具有构造函数属性和 C++ 全局构造函数的函数的执行顺序。见[http://gcc.gnu.org/ml/gcc-help/2012-05/msg00118.html](http://gcc.gnu.org/ml/gcc-help/2012-05/msg00118.html)

在 C++ 中，您可以确保某个对象在任何其他全局对象之前被初始化，并在多个翻译单元中使用[Schwarz Counter](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Nifty_Counter)习惯用法被销毁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:13:45.390

> 当主程序加载/卸载这个库时，我想采取一些措施。

考虑使用静态类实例来做到这一点，它会更加干净和便携。

基本上，您编写一个在其构造函数中进行初始化工作（并在析构函数中完成）的类，然后声明该类的静态实例。然后动态链接器会为您做所有事情。

LLVM 有很好的[类模板](http://llvm.org/docs/doxygen/html/Registry_8h_source.html)，它使用这种技术来自动管理插件注册表，我建议向它学习。

# android - Android MediaPlayer 给出空异常

> ID：10634769
> 
> 赞同：1
> 
> 时间：2012-05-17T11:21:58.730
> 
> 标签：android, media-player

有人可以帮我解决这个奇怪的问题吗，我想从 SDCard 播放音频文件，这是代码，我知道这是正确的文件路径，但 MediaPlayer 给了我一个空异常。任何帮助将不胜感激！

```
File file = new File(android.os.Environment.getExternalStorageDirectory()+"/rockstar.mp3");
MediaPlayer m = MediaPlayer.create(getApplicationContext(), Uri.fromFile(file));
m.start(); 
```

这是堆栈

java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:30:57.743

你不缺`.getAbsolutePath()`吗？

```
File file = new File(android.os.Environment.getExternalStorageDirectory().getAbsolutePath()+"/rockstar.mp3"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:36:33.767

请务必在您的 中添加正确的权限`AndroidManifest.xml`，即`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`. 在 LogCat 中记录您的路径 uri 以查看一切是否正确，然后像这样启动您的媒体播放器：

```
 MediaPlayer player = new MediaPlayer();
   player.setDataSource("mnt/sdcard/music.mp3");
   player.prepare();
   player.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T22:47:04.880

试试这个：

```
String path = Environment.getExternalStorageDirectory().getAbsolutePath();
path+="/music.mp3"
mp.setDataSource(path)
mp.prepare();
mp.start(); 
```

# c# - 如何从 SQlite 和 .net 4.0 开始？

> ID：10634774
> 
> 赞同：1
> 
> 时间：2012-05-17T11:22:34.427
> 
> 标签：c#, wpf, sqlite

我正在创建一个应用程序，我只是将数据存储在 DB 中并从 DB 获取数据。我正在将 SQLite 用于数据库。

MainWindows.xaml.cs 文件

```
using System.Data.SQLite;

namespace SQLiteSample
 {
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
     public partial class MainWindow : Window
     {
         private SQLiteCommand sql_cmd;
        private DataSet DS = new DataSet();
        private DataTable DT = new DataTable();
        private SQLiteDataAdapter DB;
        string myConnectionString = "Data Source=C:\\Documents and Settings\\20024509\\My     Documents\\SQLite\\Enum.db";
        SQLiteConnection myConnection = new SQLiteConnection();

        public MainWindow()
        {
             InitializeComponent();

          }

        private void LoadData()
        {
            try
            {
                myConnection.ConnectionString = myConnectionString;
                myConnection.Open();
                sql_cmd = myConnection.CreateCommand();
                string CommandText = "select EmpID,EmpName from Employee_Info";
                DB = new SQLiteDataAdapter(CommandText, myConnection);
                DS.Reset();
                 DB.Fill(DS);
                DT = DS.Tables[0];
                // grid1.DataSource = DT;
                 myConnection.Close();
             }
             catch (Exception e)
             {
                 myConnection.Close();
             }
           }

         private void SaveData()
         {
             SQLiteConnection myConn = new SQLiteConnection(myConnectionString);
             string myInsertQuery = "INSERT INTO Employee_Info(EmpID,EmpName,EmpAge,EmpSalary) Values(503453535, 'DEVELOPMENT',32987654)";
             SQLiteCommand sqCommand = new SQLiteCommand(myInsertQuery);
              sqCommand.Connection = myConn;
              myConn.Open();
             try
             {
                 sqCommand.ExecuteNonQuery();
              }
              finally
             {
                  myConn.Close();
              }

             }

          private void  FromDB_Click(object sender, RoutedEventArgs e)
           {
             LoadData();
           }

           private void ToDB_Click(object sender, RoutedEventArgs e)
          {
              SaveData();
          }
          }
  } 
```

我从“http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki”(Setups for 32-bit Windows (.NET Framework 4.0)) 下载了 Binary for .net 并安装它。

然后在我的 wpf 应用程序中添加参考。但它仍然给出异常

```
"{"'The invocation of the constructor on type 'SQLiteSample.MainWindow' 
that matches the specified binding constraints threw an exception.' 
Line number '3' and line position '9'."}" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T13:32:05.777

确保将项目编译为 x86 而不是 AnyCPU。SQLite 的位数问题非常有名，我经常建议初学者使用 C#-sqlite（它在所有模式下都可以正常工作，因为它是用纯 C# 编写的），

[http://code.google.com/p/csharp-sqlite/](http://code.google.com/p/csharp-sqlite/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:05:26.590

看看下面的链接。

[http://web.archive.org/web/20100208133236/http://www.mikeduncan.com/sqlite-on-dotnet-in-3-mins/](http://web.archive.org/web/20100208133236/http://www.mikeduncan.com/sqlite-on-dotnet-in-3-mins/)

使用 wpf 数据网格绑定数据将数据表转换为数据视图

dt.DefaultView；

# wpf - 具有三列的网格拆分器

> ID：10634783
> 
> 赞同：0
> 
> 时间：2012-05-17T11:22:53.257
> 
> 标签：wpf

每当我们移动红色 gridsplitter 时，它都不会改变绿色列的大小。

```
 <Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Name="c1"  ></ColumnDefinition>
        <ColumnDefinition Name="c2"  Width="auto" ></ColumnDefinition>
        <ColumnDefinition Name="c3"  Width="200"  ></ColumnDefinition>
        <ColumnDefinition Name="c4" Width="auto" ></ColumnDefinition>
        <ColumnDefinition Name="c5"    Width="200" ></ColumnDefinition>

    </Grid.ColumnDefinitions>
    <Border Name="t1" Grid.Column="0" Background="Transparent" ></Border>
    <Border Name="t2" Grid.Column="2" Background="CadetBlue" ></Border>
    <Border Name="t3" Grid.Column="4" Background="Green" ></Border>
    <GridSplitter Name="gd1" Grid.Column="1" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" Width="3" ></GridSplitter>
    <GridSplitter Name="gd2" Background="red" Grid.Column="3" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Width="3"></GridSplitter>
    </Grid>

    </Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:30:01.557

我认为这就是你想要的：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="auto"/>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="auto"/>
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <Border Grid.Column="0" Background="Transparent"/>
    <Border Grid.Column="2" Background="CadetBlue"/>
    <Border Grid.Column="4" Background="Green"/>

    <GridSplitter Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Width="3"/>

    <GridSplitter Grid.Column="3" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Width="3" Background="red"/>        
</Grid> 
```

# ruby-on-rails - Rails：在哈希中计算键值的最佳实践

> ID：10634784
> 
> 赞同：2
> 
> 时间：2012-05-17T11:22:54.783
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个用户模型，它有一个带有哈希的元列，例如 {"version"=>"1.0", "country"=>"UK"}

计算任何键中每个值的最佳实践/有效方法是什么？所以我可能想弄清楚有多少记录有国家=英国或美国或法国等。我事先不知道每个键中的所有可能值......

我想我可以在一个大循环中做到这一点

```
User.all.each do |user|
  user.meta["country"] .......... 
```

但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T11:36:01.100

是的，有`group_by`

```
arr = [{"version" => "1.0", "country" => "UK"},
       {"version" => "1.0", "country" => "France"},
       {"version" => "1.0", "country" => "UK"},
       {"version" => "1.0", "country" => "USA"},
       {"version" => "1.0", "country" => "France"},
       {"version" => "1.0", "country" => "UK"}]
grouped = arr.group_by {|el| el["country"]}
#=> {"UK"=>[{"version"=>"1.0", "country"=>"UK"}, 
#           {"version"=>"1.0", "country"=>"UK"}, 
#           {"version"=>"1.0", "country"=>"UK"}], 
#    "France"=>[{"version"=>"1.0", "country"=>"France"}, 
#               {"version"=>"1.0", "country"=>"France"}], 
#    "USA"=>[{"version"=>"1.0", "country"=>"USA"}]}
grouped.map {|k,v| [k, v.length]}
# => [["UK", 3], ["France", 2], ["USA", 1]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:29:01.323

如果您在 sql DB 中有序列化值，那么使用这些值来迭代它们是唯一的方法。但是一些 NOSQL BD 允许使用 BD 的工具（如 mongo）迭代这些值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:27:50.403

您可以这样做来计算所有拥有 meta['country'] == 'UK' 的用户

```
User.all.inject{|count, u| count += 1 if u.meta['country'] == 'UK'} 
```

# entity - MSXML 解析器和外部实体

> ID：10634789
> 
> 赞同：0
> 
> 时间：2012-05-17T11:23:14.783
> 
> 标签：entity, external, msxml

我正在使用大型 XML 文件，我希望将其拆分为多个文件。然后使用 MSXML 解析器的 C++ 程序将 XML 文件转换为多个二进制文件。问题发生在我尝试使用将文档拆分为多个文件时

```
<!Entity foo SYSTEM "foo.xml">
...
<mytag> &foo; </mytag> 
```

我已经通过 IE 打开了文档，它确实合并了文档，并且我看到了与整个文档相同的内容。但是当我运行我的程序时，它只是警告我 node &foo 无法解析（因为我没想到文档中有这样的 nie）。因此，MSXML 解析器只是将 &foo 作为子节点保留，但没有用 foo.xml 中的文本替换它。如何使用 MSXML 解析器以与 IE 相同的方式实现外部实体解析？只是不想在我的程序中知道文档拆分了。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T06:45:20.517

您是否关闭了[ProhibitDTD](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762632%28v=vs.85%29.aspx)并打开了[resolveExternals](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762283%28v=vs.85%29.aspx)属性？出于安全原因，MSXML6 默认将所有功能设置为关闭。

# php - 我应该使用 mysql_*、PDO 和 Prepared 语句的组合而不仅仅是 PDO 吗？

> ID：10634791
> 
> 赞同：0
> 
> 时间：2012-05-17T11:23:17.827
> 
> 标签：php, mysql

我正在做一个电子商务 CMS，我所有的 SQL 查询都是 mysql_* 函数。由于它们已经过时，我想合并 PDO 的/准备好的声明。

从安全角度来看，我应该只对涉及用户输入的查询使用 PDO/prepared 语句吗？我可以只对没有用户输入的查询使用 mysql_* 函数吗？

此外，我一直在谷歌搜索“PDO 与准备好的声明”，但没有成功，看看有什么区别。有什么区别还是它们是一样的？

我也被建议使用 MySQLi。我可以在没有 MySQLi 的情况下坚持使用 PDO 吗？

非常感谢您的建议。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:28:30.133

> 因为它们已经过时了

从何时起？它们没有被弃用。

所有 mysql 、mysqli 和 PDO 最终都做同样的事情，但方式却截然不同。对相同的数据使用三个不同的 API 并不是一个好主意 - 使用一个并学习如何有效地使用它。当然，您可以成为所有这些方面的专家，但不要在同一个项目中混搭 - 其他人可能想查看您的代码。

如果您正在处理一个中型到大型项目，那么定义您自己的抽象层 - 这样您使用哪个都没有关系。（请注意，尽管大肆宣传使应用程序可跨不同 DBMS 移植并不像使用抽象层那么简单）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:26:02.803

PDO*是*一个准备好的语句库（或者至少你可以用它做准备好的语句），所以这就是你找不到任何差异的原因。

关于 mysql_ vs mysqli_ vs PDO 问题；这只是个人喜好。我会说：坚持其中之一，但如果您的代码库已经很大，我会说：保持原样，只需使用 PDO/Mysqli 编写新部分。

# spring - 将pdf存储到应用程序文件中并提取到浏览器Spring MVC

> ID：10634799
> 
> 赞同：0
> 
> 时间：2012-05-17T11:23:56.657
> 
> 标签：spring, spring-mvc, file-upload

你好，我设法创建了一个表单，让我有机会上传文件。代码如下：

应用程序上下文.xml：

```
 <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <!-- one of the properties available; the maximum file size in bytes -->
    <property name="maxUploadSize" value="100000"/>
 </bean> 
```

表格：

```
 <%@page contentType="text/html;charset=UTF-8" %>
 <%@page pageEncoding="UTF-8" %>
 <%@ page session="false" %>
 <%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>

<html>
 <head>
     <META http-equiv="Content-Type" content="text/html;charset=UTF-8">
     <title>Upload Example</title>
 </head>
 <body>
    <form:form modelAttribute="uploadItem" method="post" enctype="multipart/form-data">
        <fieldset>
            <legend>Upload Fields</legend>

            <p>
                <form:label for="name" path="name">Name</form:label><br/>
                <form:input path="name"/>
            </p>

            <p>
                <form:label for="fileData" path="fileData">File</form:label><br/>
                <form:input path="fileData" type="file"/>
            </p>

            <p>
                <input type="submit" />
            </p>

        </fieldset>
    </form:form>
  </body>
</html> 
```

该模型：

```
public class UploadItem
{
private String name;
private CommonsMultipartFile fileData;

public String getName()
{
  return name;
}

public void setName(String name)
{
  this.name = name;
}

public CommonsMultipartFile getFileData()
{
  return fileData;
}

public void setFileData(CommonsMultipartFile fileData)
{
 this.fileData = fileData;
} 
```

}

控制器：

```
@Controller
@RequestMapping(value = "/upload")
public class UploadController
{
@RequestMapping(method = RequestMethod.GET)
public String getUploadForm(Model model)
{
  model.addAttribute(new UploadItem());
  return "upload/uploadForm";
}

@RequestMapping(method = RequestMethod.POST)
public String create(UploadItem uploadItem, BindingResult result)
{
if (result.hasErrors())
{
  for(ObjectError error : result.getAllErrors())
  {
    System.err.println("Error: " + error.getCode() +  " - " + error.getDefaultMessage());
  }
  return "upload/uploadForm";
}

return "redirect:/app/"; 
```

} }

现在我的问题是如何将上传文件存储到应用程序中的文件夹中。我希望将用户在文本框中给出的名称作为名称。以及如何提取 pdf 文件并将其打开到浏览器中？什么我应该添加现有代码吗？我不知道该怎么做。请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:49:59.253

您只需要在控制器方法中再添加一个参数，例如**HttpServletRequest request**。

之后，您需要使用下面提到的行获取方法中的真实路径。

```
request.getServletContext().getRealPath("your directory name here"); 
```

您需要在应用程序根文件夹中创建一个目录。并替换上面行中的名称。

然后使用您获得的真实路径创建一个 File 对象。之后，请写下一行。

```
uploadItem.getFileDate.transferTo(you file object created above); 
```

你完成了。我认为这应该为你工作。

希望对您有所帮助。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:42:55.863

如果您要为文件指定另一个名称，则它不会替换现有文件。如果文件名相同，那么它肯定会替换。很明显。

第二件事是当您定义**produces={"application/pdf"}**时，您还需要使您的jsp页面具有这种内容类型。

# php - php 从谷歌图像搜索中提取此图像结果的最佳猜测？

> ID：10634801
> 
> 赞同：4
> 
> 时间：2012-05-17T11:24:06.163
> 
> 标签：php, image, search, curl

我有一个要求，我必须在谷歌上反向查找图像并提取打印在“此图像的最佳猜测：”标题上的名称。不，我对网上现有的 curl 代码进行了一些修改，并走到了这一步：

```
<?php

function fetch_google($terms="sample search",$numpages=1,$user_agent='Mozilla/5.0 (Windows NT 6.1; rv:8.0) Gecko/20100101 Firefox/8.0')  
{
    $searched="";
    for($i=0;$i<=$numpages;$i++)
    {
        $ch = curl_init();
        $url="http://www.google.com/searchbyimage?hl=en&image_url=".urlencode($terms);
        curl_setopt ($ch, CURLOPT_URL, $url);
        curl_setopt ($ch, CURLOPT_USERAGENT, $user_agent);
        curl_setopt ($ch, CURLOPT_HEADER, 0);
        curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt ($ch, CURLOPT_REFERER, 'http://www.google.com/');
        curl_setopt ($ch,CURLOPT_CONNECTTIMEOUT,120);
        curl_setopt ($ch,CURLOPT_TIMEOUT,120);
        curl_setopt ($ch,CURLOPT_MAXREDIRS,10);
        curl_setopt ($ch,CURLOPT_COOKIEFILE,"cookie.txt");
        curl_setopt ($ch,CURLOPT_COOKIEJAR,"cookie.txt");
        $searched=$searched.curl_exec ($ch);
        curl_close ($ch);
    }

    $xml = new DOMDocument();
    @$xml->loadHTML($searched);
    foreach($xml->getElementsByTagName('div') as $div)
    {
        if(strpos($div->nodeValue,"Best guess for this image:"))
            return $div->nodeValue;
    } 
}

$content = fetch_google("http://media.il.edmunds-media.com/aston-martin/as/03/de/aston-martin_front_03-de-as_1_276.jpg",1);
echo $content."<br>";

?> 
```

但它给了我很多文字，我无法获得确切的 div。因为“a”没有类属性，所以我必须这样做。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:49:01.800

您可以改用 preg_match 。

当您从 CURL 获取 HTML 时，您可以使用 Regex 来匹配文本：

```
function fetch_google($terms="sample search",$numpages=1,$user_agent='Mozilla/5.0 (Windows NT 6.1; rv:8.0) Gecko/20100101 Firefox/8.0')  
{
    $searched="";
    for($i=0;$i<=$numpages;$i++)
    {
        $ch = curl_init();
        $url="http://www.google.com/searchbyimage?hl=en&image_url=".urlencode($terms);
        curl_setopt ($ch, CURLOPT_URL, $url);
        curl_setopt ($ch, CURLOPT_USERAGENT, $user_agent);
        curl_setopt ($ch, CURLOPT_HEADER, 0);
        curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt ($ch, CURLOPT_REFERER, 'http://www.google.com/');
        curl_setopt ($ch,CURLOPT_CONNECTTIMEOUT,120);
        curl_setopt ($ch,CURLOPT_TIMEOUT,120);
        curl_setopt ($ch,CURLOPT_MAXREDIRS,10);
        curl_setopt ($ch,CURLOPT_COOKIEFILE,"cookie.txt");
        curl_setopt ($ch,CURLOPT_COOKIEJAR,"cookie.txt");
        $searched=$searched.curl_exec ($ch);
        curl_close ($ch);
    }

    $matches = array();
    preg_match('/Best guess for this image:[^<]+<a[^>]+>([^<]+)/', $searched, $matches);
    return (count($matches) > 1 ? $matches[1] : false);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T05:42:45.890

如果要使用 DOMDocument ，可以通过以下修改获取值。

```
 <?php

function fetch_google($terms="sample search",$numpages=1,$user_agent='Mozilla/5.0 (Windows NT 6.1; rv:8.0) Gecko/20100101 Firefox/8.0')  
{
    $searched="";
    for($i=0;$i<=$numpages;$i++)
    {
        $ch = curl_init();
        $url="http://www.google.com/searchbyimage?hl=en&image_url=".urlencode($terms);
        curl_setopt ($ch, CURLOPT_URL, $url);
        curl_setopt ($ch, CURLOPT_USERAGENT, $user_agent);
        curl_setopt ($ch, CURLOPT_HEADER, 0);
        curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt ($ch, CURLOPT_REFERER, 'http://www.google.com/');
        curl_setopt ($ch,CURLOPT_CONNECTTIMEOUT,120);
        curl_setopt ($ch,CURLOPT_TIMEOUT,120);
        curl_setopt ($ch,CURLOPT_MAXREDIRS,10);
        curl_setopt ($ch,CURLOPT_COOKIEFILE,"cookie.txt");
        curl_setopt ($ch,CURLOPT_COOKIEJAR,"cookie.txt");
        $searched=$searched.curl_exec ($ch);
        curl_close ($ch);
    }

    $xml = new DOMDocument();
    @$xml->loadHTML($searched);
    if(true == ($topblock = $xml->getElementByID('topstuff')))
    {

        foreach($topblock->getElementsByTagName('div') as $div){

            if(strstr(strtolower($div->nodeValue), "guess")){
                foreach($div->getElementsByTagName('a') as $a){
                    $last = $a->nodeValue;
                }
            }
        }
    }

    return $last; 
}

$content = fetch_google($_GET['img'],1);
echo $content."<br>";

?> 
```

# dom - 将对象或函数添加到 html dom 元素（特别是画布）

> ID：10634804
> 
> 赞同：1
> 
> 时间：2012-05-17T11:24:15.267
> 
> 标签：dom, javascript-objects, javascript, onload-event

我正在尝试像在 jquery 中一样将我自己的对象参数添加到画布元素中（就像它将 element_id.draggable、element_id.resizable 等添加到 dom 元素中一样）。我的一段代码如下所示：

```
window.addEventListener("DOMContentLoaded",handler,false);
function handler()
{
     HTMLCanvasElement.prototype.animateLine=function(x1,x2,y1,y2,params) {
     if(params)
             init(this,x1,x2,y1,y2,params.lineColour,params.lineWidth,params.divisions,params.totalTime,params.callback);
     else
             init(this,x1,x2,y1,y2);
     };
} 
```

这样当用户声明一个canvas标签时，就可以直接调用`canvas_id.animateLine()`执行上述函数。

但是出现的问题是，当用户在 body onload 或 window onload 中调用 animateLine() 时，它不起作用（说 animateLine 未定义）。

我想知道这是实现这个的正确方法吗？另外，由于我也必须在 body/window onload 上调用它，因此如何从上面的代码中删除错误？

**编辑：更新代码以在 DOM 就绪时调用函数，如果用户在 DOM 就绪时调用 animateLine，它仍然不起作用。有什么解决办法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:18:00.530

You seem to have 2 problems: You don't really add your init function to `window.onload`, you'd need to remove the `()` after `onload`. Also, it would could be that it is just overwritten by an other assignment. Use proper event listeners instead.

Second, your function is only executed once. It waits for `onload`, then looks around for all `canvas` elements it can find (at that time) and adds a (different) function to each of them.

If you really would want to add a function to every canvas element ever existing (you could dynamically create them), you would need to add your methods to `HTMLCanvasElement.prototype`. Yet, there is a good article about [*What’s wrong with extending the DOM*](http://perfectionkills.com/whats-wrong-with-extending-the-dom/). Read it and use another solution, e.g. the proposed object wrappers. If you use jQuery or some lib like that, you could write `animateLine` as a plugin for that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:14:44.837

将函数分配给事件的正确方法如下：

```
window.onload = function() {...}; 
```

此外，将东西（函数、对象、数组等）直接附加到 DOM 元素也不好。更好地创建一个对元素进行操作的“接口”：

```
function ACanvas(id){

    //internal reference
    var canvas = document.getElementById('id');

    //the public interface
    return {
        draw : function(){
            //drawing logic that operates on "canvas"
        },
        erase : function(){
            //erase logic that operates on "canvas"
        }
    }
}

var myCanvas = ACanvas('mycanvasid'); //wrap the element
myCanvas.draw();                      //operate
myCanvas.erase();                     //operate 
```

# extjs - Sencha 1.1 选择器 - xtype 未注册

> ID：10634805
> 
> 赞同：0
> 
> 时间：2012-05-17T11:24:15.597
> 
> 标签：extjs, picker

我正在尝试使用其 xtype 将选择器添加到 Sencha 中的工具栏（根据 sencha 文档，'picker'）-但我不断从 Chrome 开发人员工具中收到此错误：

“未捕获尝试创建组件使用尚未注册的 xtype：picker"

这是我的代码：

```
{xtype: 'picker', width:160,
                slots:[
                    {
                        xtype: 'pickerslot',
                        name: 'states',
                        data: statusStore.data.items
                    }
                ],
                cancelButton: false,
                doneButton: false,
                listeners:{
                    pick : function(field, value) {
                        selectedStatus = value.states;
                    },
                    afterrender : function(picker) {
                        if (FPA.stores.DataProvider.listItemsStore) {
                            //Ext.ComponentMgr.get('statList').setValue(FPA.stores.DataProvider.listItemsStore.status);
                        } else {
                            // Ext.ComponentMgr.get('statList').setValue(statusStore.data.get(0));
                        }
                    }
                }}, 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:26:49.903

试试`Ext.reg('picker',Ext.Picker);`上面的 xreate 语句，看看是否能解决你的问题。Sencha touch 1.1 文档*很棒*

# c# - Filehelpers CSV 解析。如何使用 FieldQuoted 属性？

> ID：10634806
> 
> 赞同：8
> 
> 时间：2012-05-17T11:24:31.073
> 
> 标签：c#, parsing, csv, filehelpers

我有一个 CSV，看起来像：

```
a,b,c
a,b,c
a,"b,c",d 
```

我正在用属性标记分隔类中的第二个字段：

```
[FieldQuoted('"', QuoteMode.OptionalForBoth, MultilineMode.AllowForRead)]
public String ExchangeRate; 
```

但是第 3 行仍然“b，c”被解析为 2 个单独的值。

你知道我在做什么错吗？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T16:18:37.773

我看不出你的代码有什么问题。我刚刚检查过：以下程序运行良好：

```
[DelimitedRecord(",")]
public class MyClass
{
    public string Field1;
    [FieldQuoted('"', QuoteMode.OptionalForBoth, MultilineMode.AllowForRead)]
    public string ExchangeRate;
    public string Field3;
}

class Program
{
    static void Main(string[] args)
    {
        var engine = new FileHelperEngine<MyClass>();
        string fileAsString = @"a,b,c" + Environment.NewLine +
                              @"a,b,c" + Environment.NewLine + 
                              @"a,""b,c"",d";
        MyClass[] validRecords = engine.ReadString(fileAsString);

        // Check the ExchangeRate values for rows 0, 1, 2 are as expected
        Assert.AreEqual("b", validRecords[0].ExchangeRate);
        Assert.AreEqual("b", validRecords[1].ExchangeRate);
        Assert.AreEqual("b,c", validRecords[2].ExchangeRate);

        Console.ReadKey();
    }
} 
```

# geolocation - 使用 twitter4j 获取用户位置的地点对象

> ID：10634809
> 
> 赞同：1
> 
> 时间：2012-05-17T11:24:42.703
> 
> 标签：geolocation, twitter, geocoding, twitter4j

Twitter 提供了一个 API，用于获取任何给定位置的地点对象。根据[https://dev.twitter.com/docs/api/1/get/geo/search](https://dev.twitter.com/docs/api/1/get/geo/search)上的 Twitter API 文档：

“给定纬度和经度对、IP 地址或名称，此请求将返回所有有效地点的列表，这些地点可在更新状态时用作 place_id。”。

API 返回一个地点对象。我对获取该地点的边界坐标特别感兴趣，该坐标可以是包含在地点对象中的点或多边形。然后，我将使用它来检查用户的位置是否位于其他位置，例如纽约。

现在，任何用户都可以使用 twitter API 获取他的个人资料。API 返回一个包含用户位置的 json 对象，该位置基本上是一个字符串，例如“旧金山，CA”。可以将此位置传递给上述地理搜索 api，以获取定义用户位置的多边形的坐标。

我正在使用 twitter4j 库来做同样的事情。方法 'searchPlaces()' 对应于 twitter 的 /geo/search API，并将 GeoQuery 对象作为参数。但是，GeoQuery 对象只有两个采用 GeoLocation 的构造函数，即纬度、经度信息或 IP 地址。

[https://github.com/twitter/twitter4j/blob/master/twitter4j-core/src/main/java/twitter4j/GeoQuery.java](https://github.com/twitter/twitter4j/blob/master/twitter4j-core/src/main/java/twitter4j/GeoQuery.java)

从 GET geo/search API 可以看出，所有参数都是可选的。但是，在 GeoQuery 类中仅提供两个构造函数会强制其中一个提供纬度和经度值或 IP 地址。相反，我拥有的是用户个人资料中用户位置的字符串。

有人可以帮我解释一下为什么 twitter4j 和 twitter API 之间存在这种差异。另外，有人可以建议一些其他方法来查找某个 twitter 用户是否来自纽约。

PS：任何对用户位置进行地理编码以获得纬度、经度的尝试也需要 GeoQuery 对象，该对象又需要经度、经度，我似乎也无法弄清楚如何做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-11T13:39:32.993

我也遇到过这种情况。一种解决方法是：

```
GeoQuery geo = new GeoQuery((String)null);
geo.setQuery("New York") 
```

# python - 当 NTEventLogHandler 抛出异常时，如何使用 Python 2.7 写入 Windows 系统日志

> ID：10634811
> 
> 赞同：3
> 
> 时间：2012-05-17T11:24:55.317
> 
> 标签：python, windows, logging

我正在尝试使用 Pythons (2.7) 将数据写入 Windows 7 上的系统日志`logging.handlers.NTEventLogHandler`。这不起作用，因为显然有一些注册表访问被拒绝。该软件将在没有任何特殊访问权限的情况下运行。有什么办法可以使这项工作？

这是我得到的例外：

```
Python 2.7.1 (r271:86832, Nov 27 2010, 18:30:46) [MSC v.1500 32 bit (Intel)] on
win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import logging
>>> from logging import handlers
>>> syslog = handlers.NTEventLogHandler("Something")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "c:\Python27\lib\logging\handlers.py", line 917, in __init__
    self._welu.AddSourceToRegistry(appname, dllname, logtype)
  File "c:\Python27\lib\site-packages\win32\lib\win32evtlogutil.py", line 35, in
 AddSourceToRegistry
    "SYSTEM\\CurrentControlSet\\Services\\EventLog\\%s\\%s" % (eventLogType, app
Name))
pywintypes.error: (5, 'RegCreateKey', 'Access is denied.') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T14:35:25.793

在 Windows 上使用 sysLog 需要“Python 的 Win32 扩展”。你确定你已经安装了吗？[1]

来自文档 [2]：位于 logging.handlers 模块中的 NTEventLogHandler 类支持将日志消息发送到本地 Windows NT、Windows 2000 或 Windows XP 事件日志。在使用它之前，您需要安装 Mark Hammond 的 Python Win32 扩展。

[1] [http://sourceforge.net/projects/pywin32/](http://sourceforge.net/projects/pywin32/)

[2] [http://docs.python.org/2/library/logging.handlers.html](http://docs.python.org/2/library/logging.handlers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-13T16:50:28.147

在我的情况下，答案是为我的帐户调整 regedit 中的权限。在我的情况下，记录到应用程序事件日志，我必须添加完全控制权限

**HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\EventLog\Application**

仅设置读取权限不起作用，因为授权用户 ACE 已经设置了该权限。此外，每次执行都必须保持设置权限（这不仅仅是一次设置）。

或者，如果您可以仅以管理员身份运行代码，您将避免此错误，因为管理员组已经对这些密钥具有完全控制权。

# jquery - 验证器插件错误在启动时可见

> ID：10634812
> 
> 赞同：0
> 
> 时间：2012-05-17T11:25:02.230
> 
> 标签：jquery, asp.net, jquery-validate

我正在将 jquery 验证器插件（[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)）与 asp.net 应用程序一起使用。
这是我的元素：

```
<input id="chbConfirmDetails" type="checkbox" runat="server" class="required" />
<br />
<label for="<%=chbConfirmDetails.ClientID %>" class="alert">Please select this checkbox.</label> 
```

问题是带有错误的标签在启动时可见而不是隐藏。我可以添加一个类来隐藏标签，但验证器插件不应该解决这个问题吗？

为什么错误没有隐藏？

**更新：** 我明确添加标签，因为我希望将错误消息放置在特定位置，而不是在输入之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:36:23.620

您不需要为验证消息添加*任何显式标记：插件会在发生错误时负责生成它。*因此，仅输入字段就应该是您所需要的：

```
<input id="chbConfirmDetails" type="checkbox" runat="server" class="required" /> 
```

当您配置验证时，您可以控制插件如何生成错误标记 - 要添加“警报”类，您需要确保它在您的调用中设置`.validate()`，例如：

```
$("form").validate({
   errorClass: "alert"
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:36:53.823

您可以删除此行：

```
<label for="<%=chbConfirmDetails.ClientID %>" class="alert">Please select this checkbox.</label> 
```

验证器插件本身在验证返回 false 时附加错误标签，并指定了某些类。

您需要 dd 自定义 errorPlacement 回调来放置错误消息，例如

```
errorPlacement: function(error, element) {
            if (element.type == 'checkbox') {
                error.insertAfter(element); //something like this, just an example
            }
            else {
                error.insertAfter(element);
            }
        } 
```

# jquery - 功能工作窗口调整大小

> ID：10634817
> 
> 赞同：1
> 
> 时间：2012-05-17T11:25:32.053
> 
> 标签：jquery, html

这是我的代码

```
var bodyWidth = ($(document).width()/2);
console.log(bodyWidth);
$('.freeshipping').css('right',bodyWidth); 
```

它很好，但我想要这个函数体调整大小和页面刷新。如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:27:40.913

```
$(window).resize(function(){
    var bodyWidth = ($(document).width()/2);
    console.log(bodyWidth);
    $('.freeshipping').css('right',bodyWidth);
}); 
```

**更新：**调用函数一次：

```
$(window).resize((function(){
   var bodyWidth = ($(document).width()/2);
   console.log(bodyWidth);
   $('.freeshipping').css('right',bodyWidth);

   return arguments.callee;
})());​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:27:22.193

```
$(window).on('resize', function() {
   var bodyWidth = ($(document).width()/2);
   console.log(bodyWidth);
   $('.freeshipping').css('right',bodyWidth);
}); 
```

如果您还需要执行一次（没有显式调整大小操作）链接该`trigger()`方法

```
$(window).on('resize', function() {
   var bodyWidth = ($(document).width()/2);
   console.log(bodyWidth);
   $('.freeshipping').css('right',bodyWidth);
}).trigger('resize'); 
```

由于您的目标是 DOM 元素`$('.freeshipping')`，因此请务必将此代码段包装在 domready 事件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:27:11.273

尝试这个

```
 $(window).resize(function() {
     var bodyWidth = ($(document).width()/2);
    console.log(bodyWidth);
    $('.freeshipping').css('right',bodyWidth);
    }); 
```

更多信息：[http ://api.jquery.com/resize/](http://api.jquery.com/resize/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T11:35:30.987

好的，所以每个人都回答了很好的问题，但是！这是另一个示例：

```
 //store temporarily the existing method
    var resize = $.fn.resize;

    //overwrite $(window).resize with your method
    $(window).resize(function () {

        //here you do your stuff
        stuff.setWidth(param);

        //call the original
        resize;
    }); 
```

不同之处在于您已经有一个`$(window).resize(function () { /* ... */ });`不想松散的方法，只是为了扩展。我在编写自己的 jQuery 插件时遇到了这个问题。我不得不考虑用户/开发人员添加的现有 $(window).resize() 方法。因此，通过这种方式，我可以保留它并运行更新我自己的插件所需的方法/功能。

# c - C Linux 跟踪所有函数调用，包括库中的函数

> ID：10634820
> 
> 赞同：3
> 
> 时间：2012-05-17T11:25:44.750
> 
> 标签：c, linux

我有类似的程序

```
int main()
{
  char *ptr = malloc(2);
  free(ptr);
} 
```

所以我只想跟踪程序内部发生的所有函数调用，直到系统调用

喜欢

```
malloc
   |____ libc( sme_fn)
           |
           |__sme_system_call 
```

你能告诉一些方法来得到这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:20:52.150

As you know, "system calls" come in two flavors:

*   Calls directly to the operating system ("open", "close", "fork", "exec", "exit", etc)

*   Standard C runtime functions for the platform ("printf()", "malloc()", "free(), etc.)

You can view the former with "[strace](http://www.aboutlinux.info/2006/05/strace-very-powerful-troubleshooting.html)".

You can view (at least calls into) the latter with [gdb](http://www.yolinux.com/TUTORIALS/GDB-Commands.html).

You can look at the complete implementation, and all internals, directly from the source code:

*   [Gnu C Library](http://www.gnu.org/software/libc/)

*   [Linux kernel](http://www.kernel.org/)

Finally, if you're having issues with "malloc()", "[valgrind](http://www.cprogramming.com/debugging/valgrind.html)" is (one of several) very, very useful tools to consider.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:11:34.187

如果您使用 gcc，请使用 -pg 编译，然后使用 gprof 命令。

或者，如果您在 Linux 上，您可以使用[oprofile](http://oprofile.sourceforge.net/news/)执行类似的操作而无需重新编译。

这两种工具都应该为您提供调用图，这是您正在寻找的。

# android - 从 Android 应用程序向 Facebook 提要添加内容

> ID：10634821
> 
> 赞同：0
> 
> 时间：2012-05-17T11:25:49.827
> 
> 标签：android, facebook

我做了一个小例子，通过 Android 应用程序向 facebook 提要发布消息。效果很好，但我只想在帖子中添加更多内容，例如 Facebook 页面的图标、链接和更多内容。

我怎样才能将这些参数添加到我的 facebook 对话框中以发布它们？

```
public class MainActivity extends Activity 
{

   Facebook facebook = new Facebook("Here i got my app id.");

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

      // Posting my message, maybe here i could add paramterers like icon and a link etc..?
      facebook.dialog(MainActivity.this, "feed", new PostDialogListener());
   }

   @Override
   public void onActivityResult(int requestCode, int resultCode, Intent data) 
   {

    super.onActivityResult(requestCode, resultCode, data);
    facebook.authorizeCallback(requestCode, resultCode, data);

   }

 public abstract class BaseDialogListener implements DialogListener {
        @Override
        public void onFacebookError(FacebookError e) {

    e.printStackTrace();
}
@Override
public void onError(DialogError e) {
        e.printStackTrace();
    }
    @Override
    public void onCancel() {
    }

  }

    public class PostDialogListener extends BaseDialogListener {
        @Override
        public void onComplete(Bundle values) {
            final String postId = values.getString("post_id");
            if (postId != null) {
               ki("Message posted on the wall.");
            } else {
                ki("No message posted on the wall.");
            }
            }
        }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:34:10.150

```
private void publishPhoto(String imageURL) {
    Log.d("FACEBOOK", "Post to Facebook!");

    try {

        JSONObject attachment = new JSONObject();
        attachment.put("message", Utils.s(R.string.fb_message));
        attachment.put("name", Utils.s(R.string.fb_name));
        attachment.put("href", Utils.s(R.string.url_dotzmag));
        attachment.put("description", Utils.s(R.string.fb_description));

        JSONObject media = new JSONObject();
        media.put("type", "image");
        media.put("src", imageURL);
        media.put("href", Utils.s(R.string.url_dotzmag));
        attachment.put("media", new JSONArray().put(media));

        JSONObject properties = new JSONObject();

        JSONObject prop1 = new JSONObject();
        prop1.put("text", "Dotz App on Android Market");
        prop1.put("href", Utils.s(R.string.url_android_market));
        properties.put("Get the App for free", prop1);

        JSONObject prop2 = new JSONObject();
        prop2.put("text", "Dotz Tuning on Facebook");
        prop2.put("href", Utils.s(R.string.url_facebook_fanpage));
        properties.put("Visit our fanpage", prop2);

        attachment.put("properties", properties);

        Log.d("FACEBOOK", attachment.toString());

        Bundle params = new Bundle();
        params.putString("attachment", attachment.toString());
        mFacebook.dialog(mActivity, "stream.publish", params, new PostPhotoDialogListener());
        //mAsyncRunner.request("me/feed", params, "POST", new WallPostRequestListener(), null);

    } catch (JSONException e) {
        Log.e("FACEBOOK", e.getLocalizedMessage(), e);
    }
}
public class PostPhotoDialogListener extends BaseDialogListener {

    public void onComplete(Bundle values) {
        final String postId = values.getString("post_id");
        if (postId != null) {
            Log.d("FACEBOOK", "Dialog Success! post_id=" + postId);
            Toast.makeText(mActivity, "Successfully shared on Facebook!", Toast.LENGTH_LONG).show();
            /*
            mAsyncRunner.request(postId, new WallPostRequestListener());
            mDeleteButton.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    mAsyncRunner.request(postId, new Bundle(), "DELETE",
                            new WallPostDeleteListener(), null);
                }
            });
            */
        } else {
            Log.d("FACEBOOK", "No wall post made");
        }
    }
} 
```

# php - php爆炸产品数组抛出错误

> ID：10634825
> 
> 赞同：0
> 
> 时间：2012-05-17T11:26:15.823
> 
> 标签：php, mysql, foreach, explode

我已经建立了一个“订单”页面，该页面应该非常简单，需要一个 for each 循环来从数据库生成过去的订单。在每个循环中，需要一个分解来分离每个项目（，），然后另一个分解来从每个项目中提取细节（-）。我想知道是否有人能告诉我为什么在我的 foreach 循环的每次迭代结束时收到错误消息“警告：mysql_num_rows() 需要参数 1”？这对我来说特别令人困惑，因为代码仍然有效，如果错误是真的，我认为它不应该。

```
<?php
$sql = "SELECT * FROM orders WHERE store='$user'";  
$res = mysql_query($sql);

$arrOrders = array();
while ($row = mysql_fetch_array($res)) {
    array_push($arrOrders, $row);
}
?>

<table width="85%" align="center" border="0" cellpadding="5">
    <?php if (count($arrOrders) > 0) { ?>
    <?php foreach ($arrOrders as $key => $value) { ?>
        <tr>
            <td valign="top" style="font-weight: bold">
                ID #<?=$value['id']?>
            </td>
            <td valign="top" style="font-weight: bold">
                Status: <?=$value['status']?>
            </td>
            <td valign="top" style="font-weight: bold">
                Order #<?=$value['order_ref']?>
            </td>
            <td align="left" valign="top" style="font-weight: bold">
                <?php
                $tmpProds = explode(',', $value['products']);
                foreach ($tmpProds as $key2 => $value2) {
                        $tmpProdInfo = explode('-', $value2);

                $sql2 = 'SELECT * FROM products_full WHERE id = ' . $tmpProdInfo[0];
                $res2 = mysql_query($sql2);

                if (mysql_num_rows($res2) > 0) { // THIS IS THE ROW THAT THE ERROR MESSAGE POINTS TO
                echo $tmpProdInfo[1] + $tmpProdInfo[2] . ' x <a href="item_details.php?id=' . mysql_result($res2, 0, 'id') . '">' . mysql_result($res2, 0, 'alpha_code') . ' (' . trim(mysql_result($res2, 0, 'description')) . ')</a><br /><br />';
                        }
                    }
                ?>
            </td>
        </tr>
        <tr>
            <td width="100%" colspan="5" align="center">
                <hr style="width: 100%" />
            </td>
        </tr>
    <?php } ?>
    <?php } else { ?>
    <tr>
        <td width="100%" align="center">
            There are currently no complete orders.
        </td>
    </tr>
    <?php } ?>
  </table> 
```

在此先感谢，我想我已经包含了所有相关的内容，但如果需要其他任何内容，请告诉我。

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:30:11.417

尝试这个：

```
$sql2 = 'SELECT * FROM products_full WHERE id = '.$tmpProdInfo[1].'';
if (count($res2) > 0) 
```

另外，请注意，当您想使用 MySQL_num_rows 时，您应该包含连接。见手册：

```
$link = mysql_connect("localhost", "mysql_user", "mysql_password");
mysql_select_db("database", $link);

$result = mysql_query("SELECT * FROM table1", $link);
$num_rows = mysql_num_rows($result); 
```

# java - 将字符串转换为没有第二个数组的整数数组

> ID：10634826
> 
> 赞同：2
> 
> 时间：2012-05-17T11:26:20.463
> 
> 标签：java, arrays, split, java.util.scanner

我有一个字符串作为输入，它是一组数字，它们之间有空格，例如：

```
"30 129 48 29 110 90" 
```

我想要做的是获取该字符串并将其作为整数输入到数组中，而无需首先使用将数字存储为字符串的第二个数组。这就是我知道该怎么做：

```
String line = input.nextLine();
String[] arr = line.split(" ");
int[] array = new int[arr.length];

for (int i = 0; i < arr.length; i++){
    array[i] = Integer.parseInt(arr[i]);
} 
```

我不想制作 2 个数组来完成这项工作，而是以某种方式在 for 循环中一次完成，我只是想要这样，因为它对我的眼睛更好，我喜欢编写干净的代码，我会以后可以轻松改正。

编辑：在jogabonito的回答之后，这就是我设法做的

```
Scanner input = new Scanner(System.in);

    System.out.printf("Input: ");

    StringTokenizer line = new StringTokenizer(input.nextLine());
    int[] numbers = new int[line.countTokens()];

    for (int i = 0; line.hasMoreTokens(); i++){
        numbers[i] = Integer.parseInt((String)line.nextElement());
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T11:36:54.170

您当前的方法很好，但是如果您希望“可以”使用[StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)来做到这一点。创建一个大小由 确定的 int[] `countElements()`，然后在 while 循环中执行`Integer.parseInt(tokenizer.nextElement())`

测试代码：

```
 String input = "30 129 48 29 110 90";
    StringTokenizer tokenizer = new StringTokenizer(input);
    int count = tokenizer.countTokens();
    int x[] = new int[count];
    int i=0;
    while (tokenizer.hasMoreElements()) {
        x[i++] = Integer.parseInt((String)tokenizer.nextElement());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:32:49.867

您可以使用[扫描仪](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)：

```
Scanner sc = new Scanner(System.in);
while sc.hasNextInt()
   int i = sc.nextInt(); 
```

我不知道它是否更具可读性，或者即使它的性能更好。但这肯定是另一种方式。而且你不能事先知道有多少个整数，所以你需要使用一个列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T11:58:16.470

您确定要使用数组而不是[Collection](http://en.wikipedia.org/wiki/Java_collections_framework)吗？

我认为大致如下

```
String input = "30 129 48 29 110 90";
List<Integer> list = new ArrayList<Integer>();

for (String token: input.split(" ")) {
    list.add( Integer.valueOf( token ) );
} 
```

您当然可以将列表转换为数组：

```
Integer[] array = list.toArray( new Integer[] {} ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T11:30:56.910

> 我只是想要那样，因为它对我的眼睛更好，而且我喜欢编写干净的代码，以后我可以很容易地纠正它。

在这种情况下，不要改变任何事情。你所拥有的可能是可读的。

# jsf - javax.faces.el.ReferenceSyntaxException：缺少结束引号

> ID：10634827
> 
> 赞同：0
> 
> 时间：2012-05-17T11:26:24.260
> 
> 标签：jsf, weblogic, el

我有一个在 OCJ4 服务器上运行良好的 jsf1.1 应用程序。我现在已经将它部署到 weblogic12。

但我在 EL 上遇到错误

javax.faces.el.ReferenceSyntaxException：缺少结束引号。

谁能帮我解决这个问题..？

```
<f:loadBundle basename="com.ApplicationResources" var="msgs"/>
  <% response.setHeader("Cache-Control","no-store"); response.setDateHeader ("Expires", 0); %>
    <f:view>
      <html>
        <head>
          <meta http-equiv="Content-Type" content="text/html; charset=windows-1252"/>
          <link href='../stylesheet/vim_stylesheet.css' rel='stylesheet' type='text/css'/>
          <title>
            <h:outputText value="#{msgs[\'vim.common.vim\']} #{msgs[\'vim.pageheader.dashboard\']}"/>
          </title> 
```

我得到了例外

```
javax.faces.el.ReferenceSyntaxException: Missing closing quote. 
Expression: '#{msgs[\'vim.common.vim\']} #{msgs[\'vim.pageheader.dashboard\']}' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:49:18.703

摆脱`\`

```
<h:outputText value="#{msgs['vim.common.vim']} #{msgs['vim.pageheader.dashboard']}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:44:37.120

如果您使用的是 JSF 2.0，那么您不必将您的 msgs 放入`<h:outputText >`，这就 `#{msgs['vim.common.vim']} #{msgs['vim.pageheader.dashboard']}`足够了（您还应该删除反斜杠）

如果没有，请尝试将其拆分为两个输出文本，我不确定您是否可以组合这样的表达式。

# jquery - 带有照片网站的交互式平面图

> ID：10634830
> 
> 赞同：0
> 
> 时间：2012-05-17T11:26:29.993
> 
> 标签：jquery, css, html, architecture, blueprint

我正在尝试创建一个页面，其中可以看到公寓的平面图，并且将鼠标悬停在不同的区域上。

我的第一种方法是创建一个以平面图为背景的 div。
在那个 div 里面我添加了 100 个更小的 div，所有的尺寸都是 10%x10%。（10 上，10 下）

这实际上显示了平面图顶部的小矩形 div，我的想法是让 jquery 根据用户将悬停的 div 显示不同的图片或选项。

我对这种方法的问题是我无法将主 div 的尺寸限制为平面图图像的纵横比，这并不方便，因为我想要一个适用于我可能上传的多个计划的解决方案。

我的另一种方法是将图像包含在带有 img 标签的主 div 中，并在其顶部显示较小的 div，但我无法使用 css 做到这一点，我所做的任何事情都会将小 div 放在 img 之后

我可以实现的任何其他想法/方式？有没有办法将 div 限制为其背景图片的比例？第二种方法的合适CSS是什么？为了在背景中显示一个img标签，然后在它上面显示100div？

提前thanx，如果我的描述不清楚，请要求澄清

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:38:13.730

听起来像是制作[图像地图](http://reference.sitepoint.com/html/map)的目的。

# wpf - WPF选项卡控件动态加载另一个xbap

> ID：10634831
> 
> 赞同：1
> 
> 时间：2012-05-17T11:26:35.657
> 
> 标签：wpf, xbap

我的任务是开发一个可以动态加载另一个 xbap 的 Tab 控件。我认为可能的唯一方法是将 WebBrowser 对象添加到选项卡，并使该浏览器导航到第二个 xbap。所以结构将是一个包含 xbap 的浏览器，其中包含另一个带有另一个 xbap 的浏览器。

这是该结构的最佳实践吗？

谢谢！

# android - 如何在 Android 上监听通知栏的 onClick 事件？

> ID：10634837
> 
> 赞同：1
> 
> 时间：2012-05-17T11:27:14.627
> 
> 标签：android, notifications

好吧，我有一个简单的通知。但是当我在通知栏中点击它时，我只是打开了我的应用程序。那么我怎么知道我的应用程序是通过通知点击打开的，或者我如何在点击后打开特定的活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T00:36:26.670

通知上没有 onClick 事件。它只是启动一个附加到特定通知对象的预打包**PendingIntent 。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:32:52.460

我认为您在`Statusbar Notification`. 当您单击通知项时，将`Intent`调用以下内容。

```
 Context context = ctx.getApplicationContext();
    Intent notificationIntent = new Intent(ctx, ctx.getClass());
    PendingIntent contentIntent = PendingIntent.getActivity(ctx, 0, notificationIntent, 0);
    notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent); 
```

如果您想`Activity`打开特定的，请调用上面的特定类`Intent`

# android - ActionBar 未缩放到 ActionBar 高度

> ID：10634840
> 
> 赞同：0
> 
> 时间：2012-05-17T11:27:24.443
> 
> 标签：android, background-image, android-actionbar

我有一个我不明白的问题：

我刚刚在我的应用程序上设置了一个 ActionBar（目标 SDK 11，主题 Holo.Light）。但是，当我以 XML 或 setBackgroundDrawable(d) 方式设置背景时，背景不会缩放到 ActionBar 高度：

- 如果drawable太小，它会被拉伸以填充动作栏的高度。- 但如果它太高，它不会缩回并会覆盖在布局的其余部分上。

我刚刚遵循了 android dev 中提供的指南，并且还尝试通过 DrawableBitmap 进行设置，但结果相同。

非常感谢您的任何回答。

```
<resources>
<!-- the theme applied to the application or activity -->
<style name="CustomActivityTheme" parent="@android:style/Theme.Holo">
    <item name="android:actionBarStyle">@style/MyActionBar</item>
    <!-- other activity and action bar styles here -->
</style>

<!-- style for the action bar backgrounds -->
<style name="MyActionBar" parent="@android:style/Widget.Holo.ActionBar">
    <item name="android:background">@drawable/ab_background</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:15:27.337

重复我理解你的意思：

*   如果图像是“小”，那么它会被拉伸以填充 ActionBar - 这是必需的行为，对吗？
*   如果图像“大于小”，则它与 ActionBar 区域重叠 - 这不是必需的行为，对吗？

您设置为背景的 Drawable 是什么？是9补丁吗？您是否正确设置了可拉伸区域？

# android - 安卓按钮错误

> ID：10634842
> 
> 赞同：0
> 
> 时间：2012-05-17T11:27:26.737
> 
> 标签：android, button

我用三个按钮制作了一个应用程序。一个打电话，一个发邮件，第三个发短信。第一次成功后，我注意到电子邮件按钮没有响应。我试图找到一个eroor，但不能。所以我切换了代码，以便电子邮件按钮发送短信，短信按钮发送电子邮件。现在应该发送短信的电子邮件按钮再次没有响应。有任何想法吗？

```
import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
 import android.telephony.SmsManager;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class ContactDaveActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

}

public void buttonhandler(View view)
{
    switch(view.getId())
    {
    case R.id.button1:
    {
        try {
            Intent callIntent = new Intent(Intent.ACTION_CALL);
            callIntent.setData(Uri.parse("tel:xxxxxxxxxx"));
            startActivity(callIntent);
        }
        catch(ActivityNotFoundException activtyException)
        {
            Throwable e = null;
            Log.e("dialingexample", "Call failed", e);
        }
        break;
    }
    case R.id.button2:
    {
        Intent i = new Intent(Intent.ACTION_SEND);
        i.setType("text/plain"); 
        String s = "xyz@gmail.com";
        i.putExtra(Intent.EXTRA_EMAIL, new String[]{s });
        startActivity(Intent.createChooser(i, "Send mail..."));
        break;

    }
    case R.id.button3:
    {
        String phoneNumber = "+xxxxxxxx";
        Intent smsIntent = new Intent(Intent.ACTION_SENDTO);
        smsIntent.addCategory(Intent.CATEGORY_DEFAULT);
        smsIntent.setType("vnd.android -dir/mms-sms");
        smsIntent.setData(Uri.parse("sms:"+phoneNumber));
        startActivity(smsIntent);
        break;
    }

} 
```

} }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:30:35.567

你有`android:onClick="buttonhandler"`你的 main.xml 文件吗？

并检查 all,button1,button2,button3

```
<Button android:id="@id/button1" android:onClick="buttonhandler" ... />

<Button android:id="@id/button2" android:onClick="buttonhandler" ... />

<Button android:id="@id/button3" android:onClick="buttonhandler" ... /> 
```

# speech-recognition - 无法在 Win 7 x64 上正确安装 MS Speech Platform 11

> ID：10634843
> 
> 赞同：4
> 
> 时间：2012-05-17T11:27:33.523
> 
> 标签：speech-recognition, microsoft-speech-platform

所以我正在尝试为 TTS 和 SR 启动并运行 MS Speech Platform 11 + SDK + Russian Language

1.  安装 SpeechPlatformRuntime.x64.msi
2.  安装 MicrosoftSpeechPlatformSDK.x64.msi --- 两者都转到正确的“程序文件”文件夹。
3.  安装 MSSpeech_SR_ru-RU_TELE.msi
4.  安装 MSSpeech_TTS_ru-RU_Elena.msi --- 两者都进入“Program Files (x86)”文件夹。- 可以吗？

似乎没有，因为当我查看 SpeechRecognitionEngine.InstalledRecognizers() 它返回 2 项：

```
MS-1033-80-DESK
Microsoft Speech Recognizer 8.0 for Windows (English - US)
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Speech\Recognizers\Tokens\MS-1033-80-DESK

MS-2057-80-DESK
Microsoft Speech Recognizer 8.0 for Windows (English - UK)
HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Speech\\Recognizers\\Tokens\\MS-2057-80-DESK 
```

但我从未安装过这个识别器。我查看了 Win 7 组件，但找不到与此相关的任何内容。

所以问题是：

1.  是否需要在 x64 程序文件中安装语言？如果是这样，该怎么做？
2.  如何配置识别器和合成器以查看 ru-RU 语言？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T20:04:29.260

终于我明白了。我不知道为什么这么复杂。可能是我做错了什么。无论如何，它可以工作并且位于正确的位置。所以，这是我的解决方案：

1.  安装[x64_SpeechPlatformRuntime\SpeechPlatformRuntime.msi](https://www.microsoft.com/en-us/download/details.aspx?id=27225)
2.  安装[x64\MicrosoftSpeechPlatformSDK.msi](https://www.microsoft.com/en-us/download/details.aspx?id=14373)
3.  使用 Orca（[此处](http://www.itninja.com/blog/view/downloading-installing-and-using-ms-orca)的安装说明）修改`MSSpeech_SR_ru-RU_TELE.msi`，以及您要安装的其他语言：

    1.  转到`View`-> `Summary Information`，然后设置`Platform: x64`.

    2.  转到`Directory`表，并更改所有出现：

        > CommonFilesFolder -> CommonFiles64Folder
        > 
        > 通用 -> CommonFiles64Folder

4.  安装选定的语言。

5.  将文件`Microsoft.Speech.dll`放入项目的“Externals”文件夹并从那里引用此 dll。（如果没有这个技巧，我找不到如何从 VS 引用这个 DLL 的方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-12T10:03:57.927

我找到了一个很好的方法来修复那些“运行时语言”（版本 11）。

我使用的是 Windows 7 64 位，当我第一次尝试安装这些语音语言时，它们没有在系统中列出。所以我搜索了一个解决方案...

我找到了一个法国网站，解释说我们需要修改一些注册表项。这种方法是有效的，但它很长，它会在你的注册表中留下很多未使用的键......

那么，为什么不直接从源头修复错误呢？MSI 安装程序文件！

**所需工具：**

为此，您需要一个**MSI 编辑器**。我正在使用“ **InstEd 1.5** ”，它似乎非常适合我们需要做的事情......而且它是免费的！

您可以在以下网址下载：[www.instedit.com](http://www.instedit.com)

**脚步：**

对于这个例子，我将修复这个文件：“ **MSSpeech_TTS_en-US_Helen.msi** ”
它与任何其他“运行时语言”的过程相同。

1.  首先，**卸载**所有“不工作”的运行时语言。

2.  使用**“InstEd 1.5”**打开**MSSpeech_TTS_en-US_Helen.msi**

***   选择“**表格**”选项卡。

    *   单击名为：“**注册表**”的表

    *   您将看到**注册表**项列表。它应该是这样的：** 

 **"SOFTWARE\Microsoft\Speech Server\v11.0\Voices\Tokens\TTS_MS_en-US_Helen_11.0" "SOFTWARE\Microsoft\Speech Server\v11.0\Voices\Tokens\TTS_MS_en-US_Helen_11.0\Attributes"

6.  **选择所有**行 ( **Ctrl+A** )

7.  **右键单击**选择然后**“剪切行”**（或使用 **Ctrl+Shift+X**）

8.  打开您最喜欢的**文本编辑器**并在其中**粘贴**。

9.  使用您的文本编辑器，您需要将**“Speech Server\v11.0”**的每个字符串替换为**“Speech”**（使用**Ctrl+H**和“ **Replace All** ”）

10.  在您的文本编辑器中：**全选**( **Ctrl+A** ) 并**复制**( **Ctrl+C** )

11.  返回**“InstEd 1.5”**

12.  **右键单击**“注册表窗口”然后**“粘贴行”**

13.  **保存**您的固定 MSI 文件！

14.  **安装**您的固定 MSI 文件！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-19T17:18:09.587

我结合了hkurabko和弗兰克爱因斯坦的答案。

因此，更有用的 Orca，它可以一次替换每一行的 Keys 列中的值：单击编辑 -> 替换，键入必要的 - 全部替换。

如果您不想添加“Externals”dll，则需要安装两个版本的 SpeechPlatformRuntime：x64 和 x86。

它适用于 Windows 10 1703（创作者更新）。**

# actionscript-3 - spark数据网格组件的alternatingItemColors属性的Flex错误

> ID：10634846
> 
> 赞同：0
> 
> 时间：2012-05-17T11:27:40.340
> 
> 标签：actionscript-3, apache-flex

我想为数据网格设置备用颜色。我写了以下代码

```
"<s:DataGrid width="777" horizontalCenter="0" textAlign="center"  id="inv_dg" height="170" alternatingItemColors="#FFFFFF, #000000" fontSize="12" fontFamily="Times New Roman" dataProvider="{obj.rtlist}">" 
```

但它给了我一个错误，说“无法解析 spark 组件数据网格的交替项颜色”。我也想在数据网格中设置对象值，但我不确定我所做的方式是否正确。它不工作。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:59:05.553

对于数据网格：-

使用alternatingRowColors 作为火花组件，即： -

```
alternatingRowColors="[#FFFFFF, #000000]" 
```

和alternatingItemColors 用于mx 组件，即：-

```
alternatingItemColors="[#0000FF, #FF0000]". 
```

希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:59:27.513

您还需要将属性设置为数组，在您的情况下，这将是：

```
[#FFFFFF, #000000] 
```

# objective-c - XCODE：如何从设备获取/验证准确的时间戳

> ID：10634852
> 
> 赞同：2
> 
> 时间：2012-05-17T11:27:59.260
> 
> 标签：objective-c, ios, date

是否可以在没有互联网连接的情况下获得 NTP 或准确的时间戳？我不能使用/不信任带有 [NSDate date] 的设备时间戳，因为它可以由用户修改，并且我的应用程序将通过修改系统日期和时间被黑客入侵。

除此之外，有没有办法检查系统日期是否已被用户更改或未设置为“自动”，而不是获得准确的时间戳。

感谢和问候，

翁

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-17T13:16:44.600

如果您想收集与特定时区相关的当前日期，您可以使用以下内容：

```
 //create calendar
NSCalendar *calendar = [NSCalendar currentCalendar];

//set calendar time zone
[calendar setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];

//gather date components
NSDateComponents *components = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:[NSDate date]]; 
```

这有点令人费解，但 iOS 上的 NSDate 在夏令时方面似乎仍然存在问题，所以这为我节省了很多时间（双关语不是故意的：P）。

# facebook - 我如何知道当前用户喜欢的相应链接？

> ID：10634853
> 
> 赞同：0
> 
> 时间：2012-05-17T11:28:00.107
> 
> 标签：facebook, facebook-like, facebook-fql

我制作了一个页面标签应用程序。应用程序显示一些项目，每个项目都有一个like 按钮。Like 按钮附加到相应的 url 项。我需要向喜欢的用户显示那些收集了 10 多个喜欢的元素中的一些文本。所以，我写了这段代码：

```
// Get a link statistics
$link_stat = $fb->api(
    array(
        'method' => 'fql.query',
        'query' => 'SELECT like_count FROM link_stat WHERE url="http://myurl.com/item1.html"'
    )
);

if ((int)$link_stat[0]['like_count'] > 10)
{
    //Get like by current user_id and link object_id
    $like = $fb->api(
        array(
            'method' => 'fql.query',
            'query' => 'SELECT user_id, object_id FROM like WHERE user_id=me() AND object_id IN (SELECT id FROM object_url WHERE url="http://myurl.com/item1.html")'
        )
    );

    var_dump($like);
} 
```

我根据请求许可 *user_likes* 和 *read_stream* 运行此代码，但它输出`array(0) { }`. 一个问题是，我怎么知道当前用户点赞了对应的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:39:36.840

哦，嘘……我没有注意到有一个表**[url_like](https://developers.facebook.com/docs/reference/fql/url_like/)**（或最近出现的？）。我做了这个 FQL 查询，它返回了所需的响应：

```
SELECT user_id FROM url_like WHERE user_id = me() AND url = "http://myurl.com/item1.html" 
```

奇皮尔科，非常感谢！=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:16:06.607

您可以尝试重写您的查询以另一种方式进行。查看您的网址是否存在于用户的点赞中。

这对我有用：

```
SELECT url, id, type, site FROM object_url WHERE id IN (SELECT object_id FROM like 
       WHERE user_id=me()) AND strpos(url, "myurl.com/item1") >= 0 
```

# android - 在方向更改时重新创建 Android 片段

> ID：10634854
> 
> 赞同：16
> 
> 时间：2012-05-17T11:28:06.687
> 
> 标签：android, android-fragments, android-orientation

我正在开发一个基本上具有 ActionBar 的应用程序。当我的应用程序启动时，Activity 会创建片段并将它们附加到每个选项卡，因此当我切换时，我会得到不同的视图。

当我尝试旋转设备时出现问题。经过一番挣扎，我注意到 Android 会自动重新创建之前添加的片段，如下所示：

```
SummaryFragment.onCreate(Bundle) line: 79   
FragmentManagerImpl.moveToState(Fragment, int, int, int) line: 795  
FragmentManagerImpl.moveToState(int, int, int, boolean) line: 1032  
FragmentManagerImpl.moveToState(int, boolean) line: 1014    
FragmentManagerImpl.dispatchCreate() line: 1761 
DashboardActivity(Activity).onCreate(Bundle) line: 864  
... 
```

然后我像往常一样重新创建片段。因此，我拥有了我希望能够正常工作的“真实”片段，以及它们的“隐藏”Android 创建的片段，这些片段使我的应用程序崩溃。我怎样才能避免这种行为？我已经尝试在 SummaryFragment 中调用 setRetainInstance(false)。

谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-17T12:57:45.880

您需要检查 savedInstanceState [编辑：在您的父活动中]，如果它存在，请不要创建您的片段。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    if (savedInstanceState == null) {
         // Do your oncreate stuff because there is no bundle   
    }
// Do stuff that needs to be done even if there is a saved instance, or do nothing
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:35:12.753

如果两个方向都有类似的 ui（没有特定的布局文件），则可以 `android:configChanges="keyboardHidden|orientation"`在清单文件中设置活动。

如果不提供您将片段添加到选项卡的源代码，我会尽力帮助您改进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:36:33.520

创建活动时，请检查以确保它不存在。如果它存在，什么也不做……Android 会为你重新创建它。

```
private void initFragment() {
        FragmentManager fragMgr = getSupportFragmentManager();
        if (fragMgr.findFragmentByTag(LEADERBOARD_FRAG_TAG) != null) { return; }
        frag = new HdrLeaderboardFragment();
        FragmentTransaction ft = fragMgr.beginTransaction();
        ft.replace(R.id.leaderboard_fragment_wrapper, frag, LEADERBOARD_FRAG_TAG);
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
        ft.commit();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-17T04:42:39.357

我不确定是否有更好的解决方案，但这是我在最新程序中所做的。

当系统在方向更改时自动创建片段时，如果您想在宿主活动中跟踪它们，请在宿主活动的`OnAttachFragment()`方法中捕获它们。它们默认获取参数，因此您可以使用它们来找出它是哪个片段。

```
 public void onAttachFragment(Fragment fragment) {
    super.onAttachFragment(fragment);
    if (fragment != null) {
        if(fragment.getArguments() != null) {
            switch (fragment.getArguments().getString(ARG_PARAM1)) {
                case FragmentATag:
                    if (myFragmentA != fragment) {
                        myFragmentA = (FragmentA) fragment;
                    }                     
                    break;
                case FragmentBTag:
                    if (myFragmentB != fragment) {
                        myFragmentB = (FragmentB) fragment;
                    }                        
                    break;                  
            }
        }
     }
   } 
```

# sql - SELECT TOP 对面

> ID：10634855
> 
> 赞同：16
> 
> 时间：2012-05-17T11:28:06.670
> 
> 标签：sql, sql-server

Transact-SQL 有一个方便的`SELECT TOP 4 [whatever] FROM.........`

我想做一个 SELECT 查询，返回表中的最后一个“n”条目，而不是第一个。

这是我用来返回表中输入的前四个项目的查询，使用 SELECT TOP：

```
sql = "SELECT TOP 4 [news_title], [news_date_added], [news_short_description],
[news_ID] FROM [Web_Xtr_News] WHERE ([news_type] = 2 OR [news_type] = 3) AND
[news_language] = '" + Language + "' ORDER BY [news_ID] ASC" 
```

我需要返回最后四个。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-17T11:30:00.803

将表格的顺序从 更改`ASC`为`DESC`。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-17T13:22:44.060

正是这样：[http ://www.sqlfiddle.com/#!3/6c813/1](http://www.sqlfiddle.com/#!3/6c813/1)

```
with bottom as(  
  select top 4 *
  from tbl
  order by n desc
)
select * 
from bottom
order by n 
```

数据源：

```
|  N |
|----|
|  1 |
|  2 |
|  3 |
|  4 |
|  5 |
|  6 |
|  7 |
|  8 |
|  9 |
| 10 | 
```

输出：

```
|  N |
|----|
|  7 |
|  8 |
|  9 |
| 10 | 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-17T11:29:49.593

继续使用 TOP，并颠倒顺序：

```
SELECT TOP 4 [news_title],
             [news_date_added],
             [news_short_description],
             [news_ID]
FROM   [Web_Xtr_News]
WHERE  ([news_type] = 2
         OR [news_type] = 3)
       AND [news_language] = @Language
ORDER  BY [news_ID] DESC 
```

（当然，它被重写为使用参数。您的原始版本容易受到[SQL 注入](https://en.wikipedia.org/wiki/SQL_injection)的攻击。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T11:29:54.253

您可以通过在查询末尾使用`DESC`而不是来反转排序。`ASC`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-29T13:31:35.683

从列表中选择批次的一种快速方法是创建一个唯一标识符，如（ROW ID）作为（1、2、3 等）并创建一个嵌套查询。

```
Select *
from
(select
   row_number() as id
   ,column1
   ,column2
from
  table1
)as D
where D.id (<>=! between) 
```

# c# - C#从不同的弹出表单列表中计算所选项目

> ID：10634856
> 
> 赞同：0
> 
> 时间：2012-05-17T11:28:09.143
> 
> 标签：c#, forms, collections, listbox, hashtable

有3种相关形式：

1.  Form1：Main（包含一个名为 lst_main 的列表框）并标记为“总价”
2.  Form2 = CategoryForm（有5个按钮，打开一个新的subCategoriesform
3.  Form3 = SubCategoriesForm(s)：正如我提到的，这个表单有 5 个，每个表单都有一个包含一些项目的列表框，以及价格，例如“棕色 T 恤”，它的成本为 50 等）

用户根据所选类别从“subCategoriesform”列表中进行选择，最后他从不同子类别中选择的所有项目都应显示在主列表框（位于主窗体的列表框）中，并且所有相关价格都应为 SUM并显示为“总价”。

我想用 Hashtable 来做，你觉得呢？有什么干净的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:11:10.573

首先想到的是在每种形式中制作一些公开列表并以主要形式获取它们

```
//some where in Main Form
Form2 _frm=new Form2();
listofall.Concat(_frm.listofform2); //listofall is list of Main Form
//Make same to all other forms 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:14:12.013

为您的表单提供前一个表单可用于获取选择的业务属性。在下面的示例中，它只允许选择单个项目。但是您可以调整它以允许用户在关闭表单之前选择项目列表。

```
public class BaseSelectionForm : Form
{
    public string Selection { get; protected set; }
}

public class MainForm : Form
{
    public List<string> Selections { get; set; }

    private void ButtonClick(object sender, EventArgs e)
    {
        using (var dialog = new CategoryForm())
        {
            if (dialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {
                Selections.Add(dialog.Item);
                this.DialogResult = System.Windows.Forms.DialogResult.OK;
            }
            else
            {
                this.DialogResult = System.Windows.Forms.DialogResult.Cancel;
            }
        }
    }
}

public class CategoryForm : BaseSelectionForm 
{
    private void ButtonClick(object sender, EventArgs e)
    {
        using (var dialog = new SubCategoryForm())
        {
            if (dialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {
                Selection = "This Category Name > " + dialog.Item;
                this.DialogResult = System.Windows.Forms.DialogResult.OK;
            }
            else
            {
                this.DialogResult = System.Windows.Forms.DialogResult.Cancel;
            }
        }
    }
}

public class SubCategoryForm : BaseSelectionForm 
{
    private void ButtonClick(object sender, EventArgs e)
    {
        Selection = "Brown Shirt / $34.00";
        this.DialogResult = System.Windows.Forms.DialogResult.OK;
    }
} 
```

# php - PHP中数字的反转未显示正确的输出

> ID：10634862
> 
> 赞同：2
> 
> 时间：2012-05-17T11:28:42.370
> 
> 标签：php

我制作了一个程序来反转数字，但每次`0`都会附加到结果中。

```
$num = 675;
$rev = 0;

while($num > 0) {
$temp = $num % 10;
$rev = ($rev *  10) + $temp;
$num = (int) $num / 10;
}

echo $rev;   //result is 5760 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T11:34:35.690

你的问题是这一行：

```
$num = (int) $num / 10; 
```

这与以下内容相同：

```
$num = ((int) $num) / 10; 
```

所以它实际上并没有投射结果。使用额外的括号：

```
$num = (int) ($num / 10); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T04:33:12.907

这是你完整的代码。

```
<?php
$n = 3456;
$reverse = 0;
while ($n > 0)
{
  $reverse = $reverse * 10;
  $reverse = $reverse + $n%10;
  $n = (int)($n/10);
}
echo $reverse;
?> 
```

输出将是 6543

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T11:34:59.257

在php中你可以做`$rev = (int)strrev($num);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-16T13:24:27.623

如何使用`strrev`：

```
$>cat r.php
<?php
$num=675;

$rev= (int) strrev("{$num}");

echo "{$num} : {$rev}".PHP_EOL;
?>

$>php r.rev
675 : 576 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T11:33:10.603

你可以通过你的目标来实现这个......

```
$num = 675;
$num_array = str_split($num);
$final_num_array = array_reverse($num_array);
$rev_num = implode("",$final_num_array); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-17T11:34:31.573

你可以尝试这样的事情：

```
<?php
    $num = 675;
    $strNum = (string) $num;
    $revStrNum = strrev($strNum);
    $revNum = (int) $revStrNum;
    echo $revNum; //Output 576 when I tried it
?> 
```

注意，我使用了字符串函数[strrev()](http://php.net/manual/en/function.strrev.php)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-22T16:59:24.900

这 100% 有效：-

```
 $mac = 123;
 $step1 = strrev((string)$mac);
 $step2 = (int)$step1;

 echo $mac." and ".$step2*2;//checking 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-08T06:57:20.017

很简单，试试这个：

```
$num = 4321;
$rev = 0;

while($num > 1) {
    $temp = $num % 10;  
    $num = (int) $num / 10;
    echo $temp;
} 
```

输出：

```
1234 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-05T08:39:20.863

$num = 675; $rev = 0;

```
while($num > 1) { //do $num value lent-1
$temp = intval($num) % 10;
$rev = intval($rev) *  10 + $temp;
$num =  intval($num)/ 10;
}

echo $rev; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-17T11:38:03.643

这是我在网上找到的一个数字反转器：

```
<?php 
$num=6541020; 
$revnum=0; 
do{ 
    $revnum=($revnum *10)+($num % 10); 
    $num=(int)($num / 10 ); 
}while($num>0); 
echo $revnum; 
?> 
```

来源：[http ://www.weberdev.com/get_example.php3?ExampleID=4879](http://www.weberdev.com/get_example.php3?ExampleID=4879)

# c# - 将拆分字符串交错为列表c#

> ID：10634863
> 
> 赞同：2
> 
> 时间：2012-05-17T11:28:43.133
> 
> 标签：c#, asp.net-mvc

目前我需要将字符串交错到单个列表中，但我不知道该怎么做。

我目前使用的代码是这样的（我还没有走得很远）：

```
 public PartialViewResult Interleave(string details, string ids)
    {
            List<string> detailList = details.Split(',').ToList();
            List<string> idlist = ids.Split(',').ToList();
            return PartialView("_ConceptDetail1", detailList)     
    } 
```

有没有标准的方法来交错列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T11:33:55.107

也许您想将两者压缩在一起，然后可以使用[`Enumerable.Zip`](http://msdn.microsoft.com/en-us/library/dd267698.aspx)：

```
String[] details = details.Split(',');
String[] ids = ids.Split(',');
List<String> idDetails = ids.Zip(details, (id, detail) => id + " " + detail)
                        .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:55:17.843

基于`Zip`'s implementation，我想我会制作自己的扩展方法：

```
 static IEnumerable<T> Interleave<T>(this IEnumerable<T> first, IEnumerable<T> second)
    {
        using (IEnumerator<T> enumerator = first.GetEnumerator())
        {
            using (IEnumerator<T> enumerator2 = second.GetEnumerator())
            {
                while (enumerator.MoveNext() && enumerator2.MoveNext())
                {
                    yield return enumerator.Current;
                    yield return enumerator2.Current;
                }
            }
        }
        yield break;
    } 
```

# php - 我们如何重写网站的源代码

> ID：10634867
> 
> 赞同：-1
> 
> 时间：2012-05-17T11:28:56.710
> 
> 标签：php, regex

我想和你讨论一下我们的需求，比如我们有一个程序可以获取网站的源代码。我们只想插入一些 php 函数。请看下面的代码。

```
 <?php 
$url = "http://www.xyz.com" ;
function status($url){
//// here we check the particular url in our database and return the value.
}
$source = file_get_contents($url);
$insert = "<div id='status'>".status($url)."</div>" ;

?> 
```

如果下面提到了特定 url 的源代码。

```
<html>
 <head>
 </head>
  <body>
    <div>
    <p>please look at the URL is <a href="http://www.abc.com">Good Example</a>.</p>
 </div>
  </body>
  </html> 
```

函数实现后源代码应该是这样的。（请看下面。）

```
 <html>
 <head>
 </head>
  <body>
   <div>
  <p>please look at the URL is <a href="http://www.abc.com">Good Example</a><div id="status">Checked URL</div>.</p>
 </div>
 </body>
 </html> 
```

**结论**：- 我们必须检查源代码的每个 url（仅在 body 标记中）。使用我们实现的名为**status()**的函数修改源代码；

我是完成这项任务的初学者。

谢谢PP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:33:13.250

请阅读允许操作 HTML 的[DOMDocument类](http://php.net/manual/en/class.domdocument.php)

# c++ - 如果在 C++ 中长度大于 n，则跳过读取 INI 文件中的行

> ID：10634877
> 
> 赞同：0
> 
> 时间：2012-05-17T11:29:43.617
> 
> 标签：c++, mfc, ini, getline

如果 INI 文件中有超过 1000 个字符，我想跳过读取一行。这是我正在使用的代码：

```
#define MAX_LINE 1000
char buf[MAX_LINE];
CString strTemp;
str.Empty();
for(;;)
{
    is.getline(buf,MAX_LINE);
    strTemp=buf;
    if(strTemp.IsEmpty()) break;
    str+=strTemp;

    if(str.Find("^")>-1)
    {
        str=str.Left( str.Find("^") );
        do
        {
            is.get(buf,2);
        } while(is.gcount()>0);
        is.getline(buf,2);
    }
    else if(strTemp.GetLength()!=MAX_LINE-1) break;

}
//is.getline(buf,MAX_LINE);
return is; 
```

...

我面临的问题是，如果字符超过 1000，如果似乎陷入无限循环（无法读取下一行）。如何让 getline 跳过该行并读取下一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:25:30.633

```
const std::size_t max_line = 1000;  // not a macro, macros are disgusting

std::string line;
while (std::getline(is, line))
{
  if (line.length() > max_line)
    continue;
  // else process the line ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:42:15.913

`getline`如果失败，如何检查和中断的返回值？

..或者如果`is`是 istream，你可以检查一个 eof() 条件来打破你。

```
#define MAX_LINE 1000
char buf[MAX_LINE];
CString strTemp;
str.Empty();
while(is.eof() == false)
{
    is.getline(buf,MAX_LINE);
    strTemp=buf;
    if(strTemp.IsEmpty()) break;
    str+=strTemp;

    if(str.Find("^")>-1)
    {
        str=str.Left( str.Find("^") );
        do
        {
            is.get(buf,2);
        } while((is.gcount()>0) && (is.eof() == false));
        stillReading = is.getline(buf,2);
    }
    else if(strTemp.GetLength()!=MAX_LINE-1)
    {
        break;
    }
}
return is; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:34:18.710

对于完全不同的东西：

```
std::string strTemp;
str.Empty();
while(std::getline(is, strTemp)) { 
    if(strTemp.empty()) break;
    str+=strTemp.c_str(); //don't need .c_str() if str is also a std::string

    int pos = str.Find("^"); //extracted this for speed
    if(pos>-1){
        str=str.Left(pos);
        //Did not translate this part since it was buggy
    } else
        //not sure of the intent here either
        //it would stop reading if the line was less than 1000 characters.
}
return is; 
```

这使用字符串以方便使用，并且对行没有最大限制。它也将`std::getline`用于动态/魔法一切，但我没有翻译中间的位，因为它对我来说似乎非常有问题，而且我无法解释意图。

中间的部分只是一次读取两个字符，直到它到达文件的末尾，然后由于您没有检查返回值，因此之后的所有内容都会做一些奇怪的事情。由于完全错误，我没有解释它。

# cakephp - 弹出窗口并在关闭时将值返回到主页

> ID：10634878
> 
> 赞同：0
> 
> 时间：2012-05-17T11:29:46.757
> 
> 标签：cakephp

由于我的表单包含许多操作，我想调用一个弹出窗口来执行一些操作。但是提交后会弹出窗口。我必须替换父窗口中的 div。
1）如何调用模态的弹出窗口？

2）父窗口如何知道子窗口已关闭？（以便我可以用新数据替换 div）
请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:01:07.273

您可以使用此[链接中显示的 jquery 模态窗口](http://jqueryui.com/demos/dialog/#modal-form)

在链接中使用模态窗口时，您可以看到有一个`event`名为`beforeClose`. 在这种情况下，您可以使用回调函数来更新父窗口中的 div。

# iphone - 将 Wordpress 评论获取到 iPhone

> ID：10634879
> 
> 赞同：0
> 
> 时间：2012-05-17T11:29:48.670
> 
> 标签：iphone, wordpress, ios5, comments

我对这个功能特别感兴趣：我想从基于 Worpress 的博客中获取所有评论。我查看了 Wordpress iOS 应用程序，但它看起来对我来说太复杂了。有人可以给我一些提示，说明实现这一目标的步骤是什么。（我假设首先我需要以某种方式登录，然后使用 XML-RPC 调用一个方法）

如果可能，请不要向我推荐 Wordpress iOS 应用程序，因为它对我来说有点太复杂了。

谢谢你。

# php - 如果密钥正确，如何将亚马逊密钥保存在数据库中？

> ID：10634886
> 
> 赞同：2
> 
> 时间：2012-05-17T11:30:03.413
> 
> 标签：php, api, amazon-s3, amazon-web-services

我正在学习 Amazon S3 PHP API，我想保存我的 Amazon 密钥（如果这些密钥对登录 Amazon 帐户有效），或者如果用户通过以下代码输入错误的密钥则提醒用户：

```
$awsaccesskey = 'xxxxxxxxxxx';
$awssecretkey = 'xxxxxxxxxx/xxxxxxxxx';

$s3_object = new S3($awsaccesskey, $awssecretkey ); 
```

现在，我如何检查这些密钥是有效还是无效，如果正确，将它们保存在数据库中，例如：

```
if('keys valid')
{
    //save in database
}
else
{
    // entered keys are invalid, plz check your keys
} 
```

如果键有效或无效，对象是否返回任何错误？

我不知道如何获得身份验证响应，有人可以提出解决方案吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:49:22.660

你可以试试这个

```
$s3 = new S3('aws_access_key', 'aws_secret_key');

$return = @$s3->putBucket('mybucket');
if($return)
{
   echo 'valid keys';
   //now you can save key in your db
   //delete created bucket
   $s3->deleteBucket('mybucket');
 }
 else
 {
   echo "You entered invalid Amazon access credentials";
 } 
```

# .htaccess - 将错误输入的 URL 重定向到主域

> ID：10634889
> 
> 赞同：0
> 
> 时间：2012-05-17T11:30:16.933
> 
> 标签：.htaccess

我需要将我输入错误的网址重定向到主域..

例如，如果用户键入**mistyped.domain.com**或**domain.com/mistyped**（不存在）。它应该显示**domain.com**的内容，但地址栏中的 url 应该与**mistyped.domain.com**或**域相同。 com/输入错误**

注意：我用谷歌搜索并尝试了一些 .htaccess 但它只是重定向。**地址栏中的 url 不一样只是domain.com**不是
mistyped.domain.com **。**

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:22:37.043

下面的代码有效

```
./mysite.com
    dirs and folders

./m.mysite.com
    drwxr-xr-x main_site -> ../mysite.com 
```****

# c# - 如果我调用继承的重载会调用什么方法？

> ID：10634890
> 
> 赞同：2
> 
> 时间：2012-05-17T11:30:17.433
> 
> 标签：c#, inheritance, methods, overloading

可以说我有这个：

```
class A { }
class B : A { }
class C : B { }

class Foo
{
    public void Bar(A target) { /* Some code. */ }
}

class AdvancedFoo : Foo
{
    public void Bar(B target)
    {
        base.Bar(target);
        // Some code.
    }
}

sealed class SuperiorFoo : AdvancedFoo
{
    public void Bar(C target)
    {
        base.Bar(target);
        // Some code.
    }
} 
```

如果我运行，将调用哪个重载`new SuperiorFoo().Bar(new C())`，为什么？我猜它会被级联调用，但我不知道为什么以及是否保证了这种行为。

**更新**

那么，`base.`两者都适用于`Foo`和`AdvancedFoo`for `SuperiorFoo`，那么将调用哪一个，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T11:33:48.823

修改了我的答案，因为问题已经修改。

快速跟踪显示以下内容：

```
Entering SuperiorFoo.Bar()
Entering AdvancedFoo.Bar()
Entering Foo.Bar()
Leaving Foo.Bar()
Leaving AdvancedFoo.Bar()
Leaving SuperiorFoo.Bar() 
```

让我们谈谈会发生什么：

1.  SuperiorFoo.Bar() 调用它的基本方法。由于 SF.Bar() 继承自 AdvancedFoo，它的基本方法是 AdvancedFoo.Bar()。

2.  AdvancedFoo.Bar() 然后调用它的基类，即 Foo.Bar()，因为 AdvancedFoo 继承自 Foo()。

流程不会从 SF.Bar() 跳转到 Foo.Bar() 因为您可能需要中间类的行为。

如果我们从 AdvancedFoo 中删除该方法，则遍历略有不同。SuperFoo.Bar() 仍然会调用它的基方法，但是由于 AdvancedFoo 不再隐藏 Foo.Bar() 方法，所以逻辑会跳转到 Foo.Bar() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:35:35.053

它将继续调用 SuperiorFoo 中的 Bar() 方法，直到它因 StackOverflowException 而崩溃。如果你想调用 Bar() 的基本方法（即 AdvancedFoo 中的方法），你需要使用这个：

```
base.Bar(target); 
```

编辑：

看起来原始帖子中的代码已更改。现在发生的事情是，SuperiorFoo 的 'Bar' 将调用 AdvancedFoo 的 'Bar'，而 AdvancedFoo 的 'Bar' 将调用 Foo 的 'Bar'，然后代码将被终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:43:36.620

虽然 KingCronus 基本上指出你有一个无限循环。签名将首先尝试根据对象的确切类型匹配到适当的方法，然后应该从那个开始......

```
class Foo
{
    public void Bar(A target) { /* Some code. */ }
}

class AdvancedFoo : Foo
{
    public void Bar(B target)
    {
        base.Bar( (A)target );
        // continue with any other "B" based stuff
    }
}

sealed class SuperiorFoo : AdvancedFoo
{
    public void Bar(C target)
    {
        base.Bar( (B)target ); 
        // continue with any other "C" based stuff
    }
} 
```

通过类型转换为“其他”类型（即：B 或 A），它将上升到适当的链......

# javascript - 为什么获取 LocalStorage 项目会产生“未定义”？

> ID：10634892
> 
> 赞同：0
> 
> 时间：2012-05-17T11:30:26.170
> 
> 标签：javascript, cordova, local-storage, accelerometer

我们正在使用 PhoneGap 开发一个使用 iPhone 加速度计的计步器应用程序。

以下是我们当前正在运行的代码的副本：

```
<!DOCTYPE html>
<html>

<head>
  <title>Accelerometer</title>

  <script type="text/javascript" charset="utf-8" src="js/cordova-1.7.0rc1.js"></script>

  <script type="text/javascript" charset="utf-8">
    // The watch id references the current `watchAcceleration`
    var watchID = null;
    var stepCount = 0;
    window.localStorage.setItem('exp');
    var expGain = 0;
    var totalExp = window.localStorage.getItem('exp');
    var userAge = window.localStorage.getItem('age');
    var handicap = 0;

    if (userAge <= 10) {
      handicap = 10;
    } else if (userAge > 10) {
      handicap = 5;
    }

    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap is ready
    //e7
    function onDeviceReady() {
      startWatch();
    }

    // Start watching the acceleration
    //
    function startWatch() {

      // Update acceleration every 5 seconds
      var options = {
        frequency: 1000
      };

      watchID = navigator.accelerometer.watchAcceleration(onSuccess, onError, options);
    }

    // Stop watching the acceleration
    //
    function stopWatch() {
      if (watchID) {
        navigator.accelerometer.clearWatch(watchID);
        watchID = null;
      }
    }

    //count steps and calculate experience gained
    function countSteps(accelx, timestamp, expGain, totalExp) {
      var element = document.getElementById('accelerometer');
      //var accCount = Math.round(acceleration.x);
      //stepCount = stepCount + Math.abs(accCount);
      stepCount = stepCount + 1;
      expGain = stepCount * handicap;
      totalExp = totalExp + expGain;
      //window.localStorage.setItem('exp', totalExp);       
      element.innerHTML = '<br>Step Count: ' + stepCount + '<br/>' +
        'Acceleration X: ' + Math.abs(accelx) + '<br />' +
        'Timestamp: ' + timestamp + '<br />' +
        'Experience: ' + totalExp + '<br />';
    }

    // onSuccess: Get a snapshot of the current acceleration
    //
    function onSuccess(acceleration) {
      var element = document.getElementById('accelerometer');
      var accelx = Math.round(acceleration.x)
      var timestamp = acceleration.timestamp
      //element.innerHTML = 'Acceleration X: ' + Math.abs(accelx) + '<br />' +
      //'Acceleration Y: ' + acceleration.y + '<br />' +
      //'Acceleration Z: ' + acceleration.z + '<br />' + 
      //'Timestamp: '      + acceleration.timestamp + '<br />';
      if (Math.abs(accelx) > 1) {
        countSteps(accelx, timestamp, expGain, totalExp);
      }
    }

    // onError: Failed to get the acceleration
    //
    function onError() {
      alert('onError!');
    }
  </script>
  <link media="only screen and (max-device-width: 480px)" href="css/iPhone.css" rel="stylesheet" type="text/css">
</head>

<body>
  <div id="accelerometer">Waiting for accelerometer...</div>
  <button onclick="startWatch();">Start Watching</button>
  <button onclick="stopWatch();">Stop Watching</button>
  <br />
  <p><a href="index.html">back</a>
  </p>
</body>

</html> 
```

问题是：我们不断在`"undefined"`我们的结果旁边获得`window.localStorage.setItem('exp');`. 我们整天都在努力尝试解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:34:19.490

`setItem`接受两个参数（一个键和一个值）。如果不指定参数，`undefined`则为默认值。

`window.localStorage.setItem('exp');`方法`window.localStorage.setItem('exp', undefined);`

如果您希望它具有其他值，则需要指定它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T11:33:47.233

localStorage.setItem 不需要第二个参数吗？你有没有尝试过：

```
window.localStorage.setItem("exp",""); 
```

# file - Outlook VB 宏 - 我在做什么错？

> ID：10634893
> 
> 赞同：-1
> 
> 时间：2012-05-17T11:30:26.467
> 
> 标签：file, email, vba, outlook

我正在尝试将一些文件从文件夹发送到固定的电子邮件地址，这些文件需要在单独的电子邮件中发送，文件名是随机的。

这个话题让我开始：

[将单个电子邮件发送给预定义的一组人，其中包含文件夹中的所有文件](https://stackoverflow.com/questions/5681236/send-individual-emails-to-predefined-set-of-people-with-all-files-in-a-folder)

我稍微修改了代码以满足我的需要，但是当我运行宏时它没有发送文件。我确定这是一个简单的错误，但我的知识有限！

这是我的代码：

```
Option Explicit

Const SOURCE_FOLDER As String = "C:\Users\Me\Desktop\Test"
Const RECIP_A As String = "me@hotmail.com"
Const EMAIL_BODY As String = "Please find attached file. Thanks and Regards, ABC"

Sub SendPDFs()
    On Error GoTo ErrorHandler

    Dim fileName As String
    fileName = Dir(SOURCE_FOLDER)

    Do While Len(fileName) > 0
        Call CreateEmail(SOURCE_FOLDER & fileName)
        fileName = Dir
    Loop

ProgramExit:
    Exit Sub
ErrorHandler:
    MsgBox Err.Number & " - " & Err.Description
    Resume ProgramExit
End Sub

Function CreateEmail(fileName As String)
    Dim olApp As Outlook.Application
    Dim msg As Outlook.MailItem

    ' create email
    Set olApp = Outlook.Application
    Set msg = olApp.CreateItem(olMailItem)

    ' set properties
     With msg
        .Body = EMAIL_BODY
        .Recipients.Add (RECIP_A)

        .Attachments.Add fileName
        .Send
    End With
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:39:45.217

啊! 代码的唯一问题是

> Const SOURCE_FOLDER As String = "C:\Users\Me\Desktop\Test"

将其更改为

```
Const SOURCE_FOLDER As String = "C:\Users\Me\Desktop\Test\" 
```

现在试试看。我尝试并测试了它并且它有效。

还要确保您已添加对 Outlook 对象库的引用。

# android - Android：在标签栏活动中没有调用 onActivityResult - zxing

> ID：10634895
> 
> 赞同：1
> 
> 时间：2012-05-17T11:30:31.650
> 
> 标签：android, tabs, zxing

我正在使用标签栏活动，并且正在调用第三方库（zxing）以使用 startActivityForResult 进行条码扫描，但从 zxing 库返回后未调用 onActivityResult。当我在正常活动中使用相同的代码时，它工作得非常好。

我知道这个问题是因为使用标签栏活动，但我不明白如何解决这个问题。有什么解决办法吗？我尝试浏览堆栈溢出但徒劳无功。任何帮助是极大的赞赏！

谢谢！

# css - 如何以编程方式滚动带有自己滚动条的 div？

> ID：10634898
> 
> 赞同：38
> 
> 时间：2012-05-17T11:30:38.237
> 
> 标签：css, html

我有一个带有用于内容的内部 DIV 的 HTML 页面。内部 DIV 有自己的滚动条。我想自动滚动到 DIV 中的某个位置。

我怎样才能做到这一点？（请注意，我不想自动滚动 Window 滚动条 - 我已经知道该怎么做）

需要一个跨平台的解决方案

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-17T11:34:39.727

div 有一个`scrollTop`你可以设置的属性（和它的朋友，`scrollLeft`）。

*   [jsFiddle 演示](http://jsfiddle.net/AgLyU/)

*   [`scrollTop`在 MDN 上](https://developer.mozilla.org/en/DOM/element.scrollTop)

*   [`scrollLeft`在 MDN 上](https://developer.mozilla.org/en/DOM/element.scrollLeft)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T11:36:25.253

有这种`.scrollTo()`方法可以帮助您滚动浏览您的 div。尝试了解更多信息，请访问[此处](http://www.roseindia.net/javascript/javascript-scrollto-method.shtml)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T11:43:18.070

只要 JavaScript 是可以接受的，我就[使用 jQuery 创建了一个演示](http://jsfiddle.net/cchana/MjPBk/)，它使用了一个已知元素，其 ID 位于`div`.

```
$(function() {
    var testOffset = $('#test').offset(),
        scrollOffset = $('#scroll').offset();
    $('#scroll').scrollTop(testOffset.top - scrollOffset.top);
});​ 
```

如果您只知道像素方面的距离，而不是特定元素，它可以适用于：

```
$(function() {
    $('#scroll').scrollTop(100);
});​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T11:39:50.990

添加一个 div （要滚动的地方）：

```
<div id="#scroll-here">Test..</div> 
```

并添加这样的链接：

```
<a href="#scroll-here">Scroll to Test</a> 
```

如果你想要一个平滑的滚动，你可以检查[这个](http://www.sycha.com/jquery-smooth-scrolling-internal-anchor-links)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T11:46:34.030

我建议看一下[scrollTo jQuery 插件](http://flesler.blogspot.co.uk/2007/10/jqueryscrollto.html)。这是一个非常方便的插件，可让您在任何元素中为滚动设置动画。我在[jsFiddle](http://jsfiddle.net/FDbAX/1/)中设置了一个小例子来演示它是如何工作的。该示例显示了如何“滚动到”第`p`一个中的第三个`div`，然后是第二个`p`中的第二个`div`。值得注意的一件事是，为确保`position().top`正确，您需要将包含设置`div`为具有`position: relative;`. 希望这不是太大的问题。:)

# json - 具有不同对象中的对象的 JSON 数组

> ID：10634901
> 
> 赞同：1
> 
> 时间：2012-05-17T11:30:50.270
> 
> 标签：json

我搜索了许多网站，但找不到解决问题的方法。基本上我的要求有点棘手，有时我自己觉得这是不可能的。谁能帮我？

我的要求是我有 3 个从接口继承的类。我现在想创建一个具有以下结构的 JSON 数组：

```
interface i {
}

class A implements i {
    field l;  
    field 2;
} 
```

首先感谢您对解决我的问题的兴趣，我在问题中提到的所有对象都是数据库持久性对象。我有联系人对象、通讯对象和地址对象，都是db持久化对象一个联系人有多个通讯和多个地址。因此，联系人保留在一个表中，并在 2 个不同的表中保留通信和地址，参考联系人的唯一标识符，例如

联系表：

id 名字 姓氏

3 xyz abc

通讯表：

id 联系人号码

1 3 999999999

地址表：

id contactid 地点 1 3 印度

在数据库中持久化后，我想创建 json 数组，我想将其发送到服务器的请求中。

```
final Collection<Syncable> collection = new ArrayList<Syncable>();
        collection.add(contact);
        collection.add(comm);
        collection.add(address);

        result =  HttpRestUtil.post(url,*** new Gson().toJson(collection)***,JSON,header ); 
```

Gson().toJson(collection) 在字符串中返回一个 json，我想在服务器端发送它。字符串看起来如下

```
[{"firstname":"xyz","lastname":"abc"},         //contact          
 {"number":"99999999"},                        //communication
 {"place":"india"}                             //address
] 
```

但我的服务器已实现，它采用格式的 json

```
 [ {"firstname":"xyz",
 "lastname":"abc",
 {"number":"999999999"}
 {"place":"india"}
}] 
```

服务器被这样编码，整个 json 被反序列化为联系人、通信、地址的对象

我希望这次我的问题很清楚，再次感谢

```
class B implements i {
    field 3;
    field 4;
}

class C implements i {
    field 5;
    field 6; 
} 
```

现在我想要一个格式如下的 JSON 数组，这个 JSON 的类型是 A

```
[
    "field1": "value",
    "field2": "value",
    "objectB": "{ 'field3':'value','field4':'value'}",
    "objectC": "{ 'field5':'value','field6':'value'}"
] 
```

我的要求是B，C类应该是A类的字段。

一种可以给我解决方案的方法是使 B 和 C 类成为 A 的内部类，但我的对象结构不允许这样做。对此高度赞赏的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:47:10.300

我有几个问题/意见：

*   如果您的 JSON 旨在表示您的 A 类，它应该是一个对象，而不是一个数组。将括号切换为花括号。

*   如果 B 和 C 的实例存储在 A 实例的字段中，您应该更新您的类模型以反映这一点。目前，它们只是三个不同的类别。根据您发布的 JSON，您的所有字段都是字符串。如果您将类型信息添加到类声明中的字段，将会有所帮助。

*   发布您用来生成 JSON 的代码不会有什么坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:42:59.587

我还没有找到任何解决我上述问题的方法，为了得到一个解决方案，我不得不改变我的对象结构，现在我得到了我需要的 json 格式。

我已将我的联系人对象更改为包含通信和地址作为字段

```
public class Contact
{
      String firstName;
      String lastName;
      Communication comm[];
      Address address[];
} 
```

通信和地址是两个不同的类

设置联系人对象的值后

```
 new Gson().toJson(contact); 
```

给了我我需要的 json 字符串

参考：

[http://en.wikipedia.org/wiki/GSON](http://en.wikipedia.org/wiki/GSON)

# android - 辅助功能和 Android WebView

> ID：10634908
> 
> 赞同：23
> 
> 时间：2012-05-17T11:31:23.883
> 
> 标签：android, webview, accessibility, android-a11y

是否为 Android WebView 启用了辅助功能？谁能告诉如何使 WebView 可访问？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-11T17:47:12.537

Android webview 可访问性是通过 Honeycomb 及更高版本中的 javascript 注入启用的（正如[alanv 所指出的那样](https://stackoverflow.com/questions/10634908/accessibility-and-android-webview/11420380#comment16603846_11420380)）。*用户*必须通过以下方式启用它：

*   打开辅助功能模式，包括 4.0+ 中的“通过触摸探索”。
*   启用“增强的 Web 可访问性”，或者在旧设备上启用“注入 Web 脚本”。

这是通过通过`<script>`标签将 javascript 注入每个加载的页面来实现的。请注意，您必须小心，因为并非所有内容都能很好地使用此 javascript，并且在某些边缘情况下注入会失败。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-29T17:53:15.343

您可以扩展 WebView 类以实现 Accessibility API 方法。

[http://developer.android.com/guide/topics/ui/accessibility/apps.html#custom-views](http://developer.android.com/guide/topics/ui/accessibility/apps.html#custom-views)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T00:47:33.030

我也在 4.0 设备上遇到了这个问题。我最终在 WebView 上放置了一个 TextView，使 TextView 背景和文本透明。TextView 的文本内容被设置为 WebView 的内容，所有 HTML 标记都被删除。

我知道，这是一个最不优雅的解决方案，但是嘿，它有效....

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T19:21:10.027

不，`WebView`至少从 Android 4.0 版开始，无法从内置 TalkBack 服务访问。相反，盲人用户被[指示使用类似](https://eyes-free.googlecode.com/svn/trunk/documentation/android_access/apps.html)[Android 的 Mobile Accessibility 的](http://www.codefactory.es/en/products.asp?id=415)东西，它提供了一个语音浏览界面。我建议将您的内容提供给其他进程，允许盲人用户在他们选择的浏览器中查看内容。我通过开始查看内容的意图来做到这一点：

```
public static void loadUrlInBrowser(Context c, Uri uri) {
    Intent i = new Intent(Intent.ACTION_VIEW);
    i.setDataAndType(uri, "text/html");
    c.startActivity(i);
} 
```

或者，您可以设置 WebView 的内容描述。请注意，这似乎仅适用于 4.0 之前的 android 版本。我发现 4.0 设备要么[说 WebView](https://stackoverflow.com/questions/11123904/android-talkback-keeps-saying-webview)，要么什么都不说。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-30T03:58:36.030

我知道如何通过 Accessibility API 访问 Web 视图内容，当 AccessibilityNodeInfo.getText() 为 null 或“null”时，调用 AccessibilityNodeInfo.getContentDescription()。

简单的代码：

```
private String getTextOrDescription(AccessibilityNodeInfo info) {
    String text = String.valueOf(info.getText());

    if (isEmptyOrNullString(text)) {
        text = String.valueOf(info.getContentDescription());
    }
    return text;
}

private boolean isEmptyOrNullString(String text) {
    if (TextUtils.isEmpty(text) || text.equalsIgnoreCase("null")) {
        return true;
    }
    return false;
} 
```

getContentDescription() 可以获取网页视图内容。

对不起我糟糕的英语。

# android - 如何检测 Xperia Play 中打开的滑块

> ID：10634916
> 
> 赞同：2
> 
> 时间：2012-05-17T11:31:40.870
> 
> 标签：android, cocos2d-iphone, cocos2d-x, sony

我正在开发一个关于 xperia play 的游戏。谁能告诉我如何检测为设备打开的滑块。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:59:44.053

也许有更复杂的解决方案，但您可以在清单中添加到您的活动 android:configChanges="keyboardHidden" 。

并使用 onConfigurationChanged 方法处理打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:00:14.037

检查日志猫。如果在滑块打开时触发了任何广播，您可能需要使用广播接收器。查看广播接收器的[本教程](http://www.vogella.com/articles/AndroidServices/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:20:59.707

要检测 Xperia PLAY 的游戏手柄滑入/滑出，请使用以下配置常量：NAVIGATIONHIDDEN_*

有关配置的更多信息，请访问：http: [//developer.android.com/reference/android/content/res/Configuration.html](http://developer.android.com/reference/android/content/res/Configuration.html)

# c++ - 如何在 C 或 C++ 中进行字符串实习？

> ID：10634918
> 
> 赞同：12
> 
> 时间：2012-05-17T11:31:42.707
> 
> 标签：c++, c, string-interning

[`intern()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29)C 或 C++ 中是否有类似Java 中的方法？如果没有，如何在 C 或 C++ 中进行[字符串实习？](http://en.wikipedia.org/wiki/String_interning)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-17T11:50:39.250

`boost::flyweight< std::string >`似乎正是您正在寻找的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T12:18:33.703

> C 中是否有类似 Java 中的 intern() 方法？

不在标准 C 库中。

> 如果没有，如何在C中进行字符串实习？

我很害怕。第一个问题是“字符串”在 C 中不是一个定义明确的东西。相反，你有`char *`，它可能指向一个以零结尾的字符串，或者可能只是表示一个字符位置。然后你会遇到一些字符串嵌入到其他东西中的问题......或者存储在堆栈中。两者都使实习变得不可能和/或毫无意义。然后，有一个问题是 C 字符串文字不能保证被实习......以 Java 保证它的方式。最后，还有一个问题，即实习是等待发生的存储泄漏......如果语言没有被垃圾收集。

话虽如此，在 C 中（尝试）实现实习的方法是创建一个哈希表来保存实习字符串。您需要将其作为一个先决条件，即您不能实习字符串，除非它是在其自己的堆节点中分配的文字或字符串。为了解决存储泄漏问题，您需要一个每个字符串的引用计数来检测何时可以丢弃一个内部字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T13:02:53.130

字符串实习在具有值语义的语言中意味着什么？实习是一种强制对象标识以引用具有值标识的字符串的机制。它与使用引用语义并使用对象标识作为默认比较函数的语言相关。C++ 默认使用值语义，而像`std::string`这样的类型没有标识，所以实习没有意义。

一些实现（例如 g++）可能在幕后对字符串数据使用某种形式的引用语义。这样的实现*可以* 提供某种类型的数据实习，作为扩展。（据我所知，G++ 不会，但会自动“实习”空字符串。）

大多数其他实现甚至在内部都不使用引用语义。您将如何使用小字符串优化（如 MS）来实习实现？在某些情况下，数据实际上在类中，并且*没有*动态分配的内存。

# mysql - 如何将变量传递给存储过程的主体语句？

> ID：10634919
> 
> 赞同：1
> 
> 时间：2012-05-17T11:31:54.270
> 
> 标签：mysql, sql, stored-procedures

我有一张桌子`books`。

```
+-------+-----------+------------+
| serial| book_name | book_author|
+-------+-----------+------------+
| 1     | Star Wars |     1      |
| 2     | Java      |     2      |
| 3     | Alimals   |     3      |
| 4     | Star Wars |     1      |
+-------+-----------+------------+ 
```

我想使用存储过程来选择`book_name`；

我的存储过程如下所示：

```
USE books;
DELIMITER //
CREATE PROCEDURE doselect(col VARCHAR(50), tab VARCHAR(50), cond INT(5))
BEGIN
    SET @x = NULL;
    SET @col = col;
    SET @tab = tab;
    SET @cond = cond;
    SET @x = (SELECT @col FROM @tab WHERE b_id = @cond);

END //
DELIMITER ; 
```

然后我称之为：

```
CALL doselect('book_name', 'books', 3) 
```

但身份证不起作用。它没有看到变量`@tab`。错误是：

> 表**书。@tab**不存在。

我还使用了这个 SELECT 条件的变体：

```
SET @x = (SELECT 'col' FROM 'tab' WHERE b_id = 'cond'); 
```

同样的错误，但现在没有`@`：

> 表**books.tab**不存在。

在这种情况下如何正确传递变量？如何让它看到我的变量？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:39:36.303

使用您的选择和所有变量构造字符串，然后 Exec(string) 运行您的选择。

```
CREATE PROCEDURE spName
    @Var VARCHAR(50)
AS
  SET NOCOUNT ON;

  DECLARE @sql VARCHAR(8000)

  SET @sql = 'SELECT
      X, Y + '' - '' + Z as ''Some alias''
FROM ' + @Var + '..TableName '

      exec (@sql)
GO 
```

# android - SetText 从对话框内容到 EditTextBox？

> ID：10634920
> 
> 赞同：0
> 
> 时间：2012-05-17T11:31:57.440
> 
> 标签：android

我正在使用我定制为显示列表的customDialog。我的要求是在我的应用程序中有Edittext的地方。我需要显示这个对话框。我在editext中使用Textwatcher，而用户输入一个数字，就像用户输入1时将它传递给那个对话框类并完成了一些功能来制作一个像 10,100,1000,10000 这样的列表。

现在，一旦用户从此列表中选择了任何数字，我想将其设置为 Editext。我该怎么做？我要尝试一整天吗？

```
public static void amount_dialog(final Activity activity,String str)
{
     amount=str;

     sequence_number();//from this method am generating list and setting it into my Arraylist

     dialog=new  Dialog(activity,R.style.CustomDialogTheme);    

     dialog.setContentView(R.layout.customdialog);

     ListView listView=(ListView) dialog.findViewById(R.id.listView12);              
     adapter=new ArrayAdapter<String>(activity,R.layout.list2,R.id.list_text1, strings);
     listView.setAdapter(adapter);  
     listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            selected_amount=adapter.getItem(arg2);

            dialog.dismiss();

        }
    });

     dialog.getWindow().getAttributes().windowAnimations = R.style.DialogAnimation;

     dialog.show();
     dialog.setCanceledOnTouchOutside(true);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:39:23.160

只需将 EditText 对象传递给此方法，在 OnitemClickListener 中，您就可以使用 Arraylist 中的值将文本设置为 EditText。

```
public static void amount_dialog(final Activity activity,String str,EditText edittextObject)
{
     amount=str;

     sequence_number();//from this method am generating list and setting it into my Arraylist

     dialog=new  Dialog(activity,R.style.CustomDialogTheme);    

     dialog.setContentView(R.layout.customdialog);

     ListView listView=(ListView) dialog.findViewById(R.id.listView12);              
     adapter=new ArrayAdapter<String>(activity,R.layout.list2,R.id.list_text1, strings);
     listView.setAdapter(adapter);  
     listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            selected_amount=adapter.getItem(arg2);
             edittextObject.setText("get the value from arraylist here");
            dialog.dismiss();

        }
    });

     dialog.getWindow().getAttributes().windowAnimations = R.style.DialogAnimation;

     dialog.show();
     dialog.setCanceledOnTouchOutside(true);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:43:24.433

我假设您作为参数传递的活动是包含您的 EditText 的活动。所以你可以做这样的事情：

```
EditText editText = (EditText)activity.findViewById(theIDofYourTextEdit);
editText.setText(selectedAmount); 
```

在您的 onItemClick 方法中。

我希望这有帮助

# objective-c - 沿直线路径和拐角拖动 UIView

> ID：10634921
> 
> 赞同：1
> 
> 时间：2012-05-17T11:32:05.850
> 
> 标签：objective-c, ios, cocoa-touch

我想要的模式是汽车中的变速杆。它由大约 9 条 90 度角的直线组成，我需要用户沿着这些直线拖动 UIView。

我的第一种方法是检查视图中心的坐标，如果满足某些条件，则适当地启用/禁用 x/y。这导致了一个冗长复杂的 if 语句，维护起来会很麻烦。它在大多数情况下都有效 - 偶尔会卡住，但我知道我需要做些什么来修复它。

我的第二个想法是在我的路径周围构建一个非常简单的矩形集合，中间有一个足够宽的空间，以允许一个正方形，我将锚定到我想要移动的视图上。然后我就可以使用碰撞检测来保持沿路径的视图。这似乎适用于非常基本的块状路径，但不适用于更复杂的路径。

还有其他方法可以达到我想要的效果吗？

顺便说一句，这是我对第一个场景的超级粗略和低效的测试：

```
//  The reason we aren't using if else is because we want to allow both x and y movement if they are on a corner.
if(knob.center.x >= 218 && knob.center.x <= 240 && knob.center.y == 140) { 
    //  First line
    canMoveX = TRUE;
    if(translation.x + knob.center.x < 218) { 
        translation.x = knob.center.x - 218; 
    }
    else if(translation.x + knob.center.x > 240) { 
        translation.x = 240 - knob.center.x;
    }

}
if(knob.center.x == 240 && knob.center.y >= 140 && knob.center.y <= 230) { 
    //  Second Line
    canMoveY = TRUE;
    if(translation.y + knob.center.y < 140) { translation.y = knob.center.y - 140; }
    else if(translation.y + knob.center.y > 230) { translation.y = 230 - knob.center.y; }

}

if(knob.center.x >= 224 && knob.center.x <= 240 && knob.center.y == 230) { 
    //  Third Line
    canMoveX = TRUE;
    if(translation.x + knob.center.x < 224) { translation.x = knob.center.x - 224; }
    else if(translation.x + knob.center.x > 240) { translation.x = 240 - knob.center.x; }

} 

if(knob.center.x == 224 && knob.center.y >= 230 && knob.center.y <= 285) { 
    //  Fourth Line
    canMoveY = TRUE;
    if(translation.y + knob.center.y < 230) { translation.y = knob.center.y - 230; }
    else if(translation.y + knob.center.y > 285) { translation.y = 285 - knob.center.y; }

} 

if(knob.center.x >= 205  && knob.center.x <= 224 && knob.center.y == 285) { 
    //  Fifth Line
    canMoveX = TRUE;
    if(translation.x + knob.center.x < 205) { translation.x = knob.center.x - 205; }
    else if(translation.x + knob.center.x > 224) { translation.x = 224 - knob.center.x; }

}  

if(knob.center.x == 205 && knob.center.y >= 285 && knob.center.y <= 337) { 
    //  Sixth Line
    canMoveY = TRUE;
    if(translation.y + knob.center.y < 285) { translation.y = knob.center.y - 285; }
    else if(translation.y + knob.center.y > 337) { translation.y = 337 - knob.center.y; }

} 

if(knob.center.x >= 133 && knob.center.x <= 205 && knob.center.y == 337) { 
    //  Seventh Line
    canMoveX = TRUE;
    if(translation.x + knob.center.x < 133) { translation.x = knob.center.x - 133; }
    else if(translation.x + knob.center.x > 205) { translation.x = 205 - knob.center.x; }
}        

if(canMoveX) {
    [piece setCenter:CGPointMake([piece center].x + translation.x, [piece center].y)];
    [gesture setTranslation:CGPointZero inView:[piece superview]];
}
if(canMoveY) {
    [piece setCenter:CGPointMake([piece center].x, [piece center].y + translation.y)];
    [gesture setTranslation:CGPointZero inView:[piece superview]];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:46:04.073

是的，你可以在没有太多这些 if..elses 的情况下制作动画，你将不得不实现 Core Animation 的 CAKeyFrameAnimation 来描绘沿着 brezier path 的动画。

您将必须定义一条路径，并且为了查看我已经绘制了一条曲线来表示路径，然后是沿着路径动画的对象，最后是动画：-

```
 UIBezierPath *yourPath= [UIBezierPath bezierPath];
    [yourPath moveToPoint:P(x, y)];
    [yourPath addCurveToPoint:P(x1, y1) controlPoint1:P(x, y) controlPoint2:P(x, y)];
//You will have to use addCurveToPoint to add  next turn.

    CAShapeLayer *yourFollowPath= [CAShapeLayer layer];
    yourFollowPath.path = yourPath.CGPath;
    yourFollowPath.strokeColor = [UIColor redColor].CGColor;
    yourFollowPath.fillColor = [UIColor blackColor].CGColor;
    yourFollowPath.lineWidth = 50.0;
    [self.view.layer addSublayer:yourFollowPath];

    CALayer *moveObject= [CALayer layer];
    moveObject.bounds = CGRectMake(x, y, width, height);
    moveObject.position = P(objXPOs, objYPos);
    moveObject.contents = (id)([UIImage imageNamed:@"YouImageOfObjectToMove"].CGImage);
    [self.view.layer addSublayer:moveObject];

    CAKeyframeAnimation *animate = [CAKeyframeAnimation animationWithKeyPath:@"Animating"];
    animate .path = yourPath.CGPath;
    animate .rotationMode = kCAAnimationRotateAuto;
    animate .repeatCount = HUGE_VALF;
    animate .duration = 11;

[moveObjectaddAnimation:animate forKey:@"gogogo"]; 
```

这段代码仅供参考，给你一个想法，对于实际的程序，你必须给出坐标。

根据我们的讨论：-

您可以通过从对象处的用户获取接触点来实现上述代码的逻辑（因为您已经定义了路径）。您可以实现 UIGestureRecognizer 甚至 touchesBegan 或 UItouch 的 touchesEnded 以获取类似事件的拖动，然后动画如果用户仍在触摸 else 呼叫

```
[yourView.layer removeAllAnimations]; 
```

并获取最新的接触点，然后如果触摸恢复，则从该点创建另一个 brezierPath。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:11:30.400

我无法找到完全解决我的问题的解决方案，所以我被迫使用条件和点。如果有人有更好的解决方案，我将非常乐意在未来将其标记为正确。

# matlab - 在子图中对齐 ylabel

> ID：10634923
> 
> 赞同：6
> 
> 时间：2012-05-17T11:32:13.490
> 
> 标签：matlab

我有几个子图（一个在另一个之下），每个子图的 y 轴都有不同的值（比如第一个是 1:5，第二个是 10:1000 等）

所以结果是每个 ylabel 会有不同的对齐方式。有没有办法来解决这个问题？例如 - 将所有 ylabels 向左对齐？还是有其他解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:28:02.933

尝试这个：

```
xpos = -18 % (find this out from get(yl,'pos') on the desired label x-location)
yl=ylabel('Label Here')
pos=get(yl,'Pos')
set(yl,'Pos',[xpos pos(2) pos(3)]) 
```

同样，对每个子图执行此操作。您会发现 x 位置始终保留，其他位置为默认位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:08:50.160

定位 ylabel 使用

```
 ylabel('my label', 'position',[x y z]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-29T20:17:51.470

在这里回答了 [pyplot axes labels for subplots](https://stackoverflow.com/questions/6963035/pyplot-axes-labels-for-subplots)

利用

`ax1.get_yaxis().set_label_coords(-0.1,0.5) ax2.get_yaxis().set_label_coords(-0.1,0.5)`

它将在与原始子图相同的 y 坐标处对齐。

# php - 断言一个函数被调用

> ID：10634925
> 
> 赞同：1
> 
> 时间：2012-05-17T11:32:29.937
> 
> 标签：php, phpunit

使用 phpunit 进行测试时，我想断言一个函数调用：

给定一个类：

```
Class TimeWrapper {
  public function time() {
    return time();
  }
} 
```

及其单元测试：

```
Class TimeWrapperTest extends PHPUnit_FrameworkTestCase {
  public function testTime() {
    //Pseudocode as example of a possible solution:
    $this->assertCallsFunction("time");
  }
} 
```

我正在专门寻找一种方法来测试全局函数的调用。

FWIW：使用 rspec，我使用[Message Expectations](http://rubydoc.info/gems/rspec-mocks/frames)。我希望在 PHPUnit 中实现类似或完全相同的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:38:54.577

如果目标是验证`TimeWrapper`调用内置 PHP 函数`time`，则需要使用[runkit](http://php.net/manual/en/book.runkit.php)扩展。这将允许您将内置函数替换为您自己的版本来记录呼叫。您需要启用`runkit.internal_override`设置`php.ini`以允许您重命名内部函数。

```
class TimeWrapperTest extends PHPUnit_Framework_TestCase {
    static $calledTime;

    function setUp() {
        self::$calledTime = false;
    }

    function testTimeGetsCalled() {
        $fixture = new TimeWrapper;
        try {
            runkit_function_rename('time', 'old_time');
            runkit_function_rename('new_time', 'time');
            $time = $fixture->time();
            self::assertTrue('Called time()', $calledTime);
        }
        catch (Exception $e) {
            // PHP lacks finally, but must make sure to revert time() for other test
        }
        runkit_function_rename('time', 'new_time');
        runkit_function_rename('old_time', 'time');
        if ($e) throw $e;
    }
}

function new_time() {
    TimeWrapperTest::$calledTime = true;
    return old_time();
} 
```

如果您不能使用扩展或者只是想避免这种诡计，您可以修改`TimeWrapper`以允许您覆盖在运行时调用的函数。

```
class TimeWrapper {
    private $function;

    public function __construct($function = 'time') {
        $this->function = $function;
    }

    public function time() {
        return call_user_func($this->function);
    }
} 
```

使用上面的测试用例而不调用`runkit_function_rename`并传递`new_time`给`TimeWrapper`构造函数。这里的缺点是每次调用`TimeWrapper::time`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:08:43.737

不确定是否已经为此目的做了一些事情。

但是如果你想自己实现它，你可以看看[xdebug 代码覆盖率](http://xdebug.org/docs/code_coverage)

# php - 带有一些自定义搜索字段的数据表

> ID：10634940
> 
> 赞同：0
> 
> 时间：2012-05-17T11:33:54.117
> 
> 标签：php, forms, search, datatable

我第一次实现了数据表插件，显然是在 stackoverflow 成员的帮助下。再次感谢他们。现在我关心的问题如下：我有一个页面，其中包含一些搜索字段，例如名称文本字段、用户名文本字段、类别下拉列表、年龄范围等，以及一个用于搜索的提交按钮。默认情况下，所有记录都将显示，并且通过使用数据表，我可以对它们进行升序或降序排序。我仅通过 css 删除了插件的默认搜索字段（显示：无）。现在，当我通过该搜索表单搜索记录时，我的记录列表应该使用该数据表插件实现。但我无法做到这一点。请帮助我如何处理。自定义搜索如下：

```
<form name="search_user_form" id="search_user_form" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="GET" > 

    <table width="100%" border="0" align="center" cellpadding="5" cellspacing="0" class="form_table" id="searching_parameter" >
                        <tr>
                            <td>Name : <input type="text" class="textbox_small" name="search_name" id="search_name" value="<?php echo $_REQUEST['search_name']; ?>" /></td>
                            <td>Username : <input type="text" class="textbox_small" name="search_username" id="search_username" value="<?php echo $_REQUEST['search_username']; ?>" /></td>
                        </tr>
                        <tr>
                            <td>Email : <input type="text" class="textbox_small" name="search_email" id="search_email" value="<?php echo $_REQUEST['search_email']; ?>" /></td>
                            <td>Age &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <!--<input type="text" class="textbox_small" name="search_age" id="search_age" value="<?php echo $_REQUEST['search_age']; ?>" />-->

                           <input type="text" size="3" value="<?php echo $_REQUEST['min_age']; ?>" name="min_age" id="min_age" maxlength="2" onKeyPress="return numbersonly(event, false)" > &nbsp;&nbsp;
                           To  &nbsp;&nbsp;<input type="text" size="3" value="<?php echo $_REQUEST['max_age']; ?>" name="max_age" id="max_age" maxlength="2" onKeyPress="return numbersonly(event, false)" >                        

                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">Privilege:
                       <select class="soring_select" name="search_privilege" id="search_privilege" style="height:28px;">
                            <option value="0" <?php echo $selection_agent;?>>Agent</option>
                            <option value="1" <?php echo $selected_admin;?>>Admin</option>
                            <option value="2" <?php echo $selected_supeadmin;?>>Superadmin</option>
                            <option value="3" <?php echo $selected_owner;?>>Owner</option>
                            <option value="all" <?php echo $selected_no;?>>All Privilege</option>
                        </select>
                      </td>
                    </tr>
                    <tr>
                        <td colspan="2"><input type="submit" name="search_user_btn" id="search_user_btn" value="Search">&nbsp;&nbsp;<input type="reset" value="Cancel" /></td>
                    </tr>
                </table>
            </form> 
```

对于插件：

```
$('#example').dataTable( {
                            "bProcessing": true,
                            "bServerSide": true,
                        "sAjaxSource": "datatabledb.php?query=<?php (isset($_REQUEST['search_user_btn']))?$search_sql:'';?>",
                            "bJQueryUI": true,
                            "sPaginationType": "full_numbers",
                            "sDom": 'T<"clear">lfrtip',
                            "oTableTools": {
                                "aButtons": [

                                    {
                                        "sExtends": "csv",
                                        "sButtonText": "Save to CSV"
                                    }
                                ]
                            }       

                        } ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:59:48.597

您可以从数据表 MultiFilter 开始，但您应该在按下提交按钮后以键/值对的形式传递数据：

[http://datatables.net/plug-ins/api#fnMultiFilter](http://datatables.net/plug-ins/api#fnMultiFilter)

您可以通过以下方式调用它：

```
var defaultFilter = {"name":"john","username":"userjohn"};
oTable.fnMultiFilter(defaultFilter); 
```

对于范围，你应该做一些事情来改变 API。

# foreman - 工头没有反映变化

> ID：10634944
> 
> 赞同：4
> 
> 时间：2012-05-17T11:34:07.890
> 
> 标签：foreman

我使用这篇文章来设置 facebook 应用程序开发的开发环境： [https](https://devcenter.heroku.com/articles/facebook#create_an_app) : //devcenter.heroku.com/articles/facebook#create_an_app 除了 FOREMAN 之外，一切都很好：问题是 - 每次我对脚本进行更改时，当我想在本地查看这些更改时 - Foreman 并没有反映这些更改。只有在我重新启动它之后，它才会“看到”变化。有没有人遇到过同样的情况或者知道是什么问题？如果是 - 请帮助。

# vb.net - xaml 包的文件扩展名

> ID：10634946
> 
> 赞同：0
> 
> 时间：2012-05-17T11:34:11.337
> 
> 标签：vb.net, file-extension, textrange

我尝试使用 TextRange 保存富文本框中的数据以保存为 xamlpackage 格式，但是我的问题是基本的，文件应该具有什么扩展名，如果我使用 Xaml，正常的 wpf xaml 文件将无法按原样打开不是 xamlpackages，你能告诉我 xamlpackage 的正确扩展名吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:55:30.870

XAML 文件独立于扩展名。

扩展在 VS 中用于与 XAML 设计器和 XAML 编译器相关联（将其编译为 BAML 和 .cs 文件）

如果您需要加载/保存 XAML，您应该查看[XAMLReader](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlreader.aspx)、[XAMLWriter](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlwriter.aspx)类。

在 XAMLReader、XAMLWriter 中，您可以指定具有任何扩展名的文件以加载/保存 XAML 格式的数据。

# c#-4.0 - 来自另一个 DLL 实现错误的控制台应用程序接口

> ID：10634948
> 
> 赞同：0
> 
> 时间：2012-05-17T11:34:20.010
> 
> 标签：c#-4.0, console-application

我在 DLL 中有一个接口，并在用于测试的控制台应用程序中实现它

我的界面如下

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Gemini.Data.Interfaces
{
    public interface IUser
    {
        IEnumerable<IUserDetails> UserProfiles { get; set; }
        string AdUserName { get; set; }
    }

    public interface IUserDetails
    {
        int UserId { get; set; }
        string DisplayUserName { get; set; }
        string OfficeCode { get; set; }
        string UserEmail { get; set; }
        string AdLogin { get; set; }
        bool? LastActiveUser { get; set; }
        Gemini.Data.App_Consts.Access_Rights UserAccess { get; set; }
        bool IsPM { get; set; }
        bool IsSPM { get; set; }
        bool IsVdbUser { get; set; }
        DateTime? LastModified { get; set; }
        DateTime? LastLoginUse { get; set; }
        int? LastModifiedBy { get; set; }
    }
} 
```

当我尝试在测试应用程序中使用它时，我得到以下信息

> 命名空间“Gemini.Data.Interfaces”中不存在类型或命名空间名称“IUser”（您是否缺少程序集引用？）

控制台应用程序如下

```
using System;
using System.Collections.Generic;
using Gemini.Data.Interfaces;

namespace ConsoleApplication2
{
    public class User : Gemini.Data.Interfaces.IUser
    {
        private IEnumerable<IUserDetails> _UserProfiles = null;
        #region IUser Members

        public IEnumerable<IUserDetails> UserProfiles
        {
            get { return _UserProfiles; }
            set { _UserProfiles = value; }
        }

        public string AdUserName { get; set; }

        #endregion

    }
    class Program
    {
        static void Main(string[] args)
        {

            User u = new User();
            Gemini.Data.Main.UserDetails ud = new Gemini.Data.Main.UserDetails(u, "Qpirate");
        }

    }

} 
```

Visual Studio 似乎引用了接口，我可以在类上调用 Go To Definition。

有人知道我可以尝试的其他东西吗？

我已经检查了控制台应用程序的目标是与 DLL 相同的 .NET Framework。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:47:43.417

同样的问题发生在我身上一次，我发现程序集名称和控制台应用程序名称在我的情况下是相同的。

要进行故障排除，我建议首先确保 dll 和控制台应用程序的程序集名称不同。

如果这不能解决，请尝试指定不同的命名空间（项目选项卡中的默认命名空间和重命名现有命名空间）。

如果还是不行，可以尝试先将dll的代码合并到app中，然后一个一个的移动。我希望你的代码库很小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:07:37.003

我最终只是删除了旧的解决方案并重新开始，但我注意到的一件事是，当我创建控制台应用程序时，目标框架是“.NET Framework 客户端配置文件”

# mysql - Rails 3.2.3 MySQL 5.5.1 Mysql2 gem 安装因 ld 不兼容而失败

> ID：10634949
> 
> 赞同：3
> 
> 时间：2012-05-17T11:34:23.140
> 
> 标签：mysql, ruby-on-rails-3, gem, ubuntu-11.04, mysql2

我有一个干净的构建系统如下

Ubuntu 11.04

虚拟机 1.13.5

红宝石 1.9.3p194

导轨 3.2.3

宝石 1.8.24

MySql 5.5.24-1 (安装在/usr/local)

我正在尝试安装 mysql2 gem (0.3.11) 并遇到以下问题：

```
 pal@smurf01:~$ sudo gem install mysql2
   [sudo] password for pal: 
   Building native extensions.  This could take a while...
   ERROR:  Error installing mysql2:
        ERROR: Failed to build gem native extension.

        /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
   checking for rb_thread_blocking_region()... yes
   checking for rb_wait_for_single_fd()... yes
   checking for mysql.h... yes
   checking for errmsg.h... yes
   checking for mysqld_error.h... yes
   creating Makefile

   make
   compiling client.c
   client.c: In function 'rb_raise_mysql2_error':
   client.c:98:3: warning: ISO C90 forbids mixed declarations and code
   client.c: In function 'rb_mysql_client_socket':
   client.c:590:3: warning: ISO C90 forbids mixed declarations and code
   compiling mysql2_ext.c
   compiling result.c
   linking shared-object mysql2/mysql2.so
   /usr/bin/ld: skipping incompatible /usr/local/mysql/lib/libmysqlclient_r.so when searching for -lmysqlclient_r
   /usr/bin/ld: skipping incompatible /usr/local/mysql/lib/libmysqlclient_r.a when searching for -lmysqlclient_r
   /usr/bin/ld: cannot find -lmysqlclient_r
   collect2: ld returned 1 exit status
   make: *** [mysql2.so] Error 1

   Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.3.11 for inspection.
   Results logged to /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.3.11/ext/mysql2/gem_make.out
 pal@smurf01:~$ 
```

第一个问题：有人在 Ubuntu 上使用 MySql 5.5.1 运行 Rails mysql2 吗？我让它在另一个 5.1 的系统上运行。gem 描述在支持的 MySql 版本上是模糊的。

第二个问题：有人遇到过这个问题吗？在过去一年左右的时间里，我与 mysql2 gem 解决了各种库问题，但这似乎有所不同。

任何帮助都将不胜感激。

顺便说一句：恢复到 MySql 5.1 是一个有效的解决方案！

问候

彼得

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-29T02:08:16.240

或者只是`apt-get install libmysqlclient-dev`然后`gem install mysql2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T11:54:14.967

所以问题似乎是缺少库和一些链接。执行以下操作解决了该问题。

获取新的并安装由 Nathan Rennie Waldock 提供的 libmysqlclient-dev deb 包

```
 wget http://ppa.launchpad.net/nathan-renniewaldock/ppa/ubuntu/pool/main/m/mysql-5.5/libmysqlclient-dev_5.5.24-1~ppa1~natty_amd64.deb./;l
 dpkg -i libmysqlclient-dev_5.5.24-1~ppa1~natty_amd64.deb 
```

然后创建一些 mysql2 需要的链接，因为它似乎无法遵循 mysql 路径

```
cd /usr/lib/
ln -s /usr/local/mysql-5.5.24-linux2.6-x86_64/lib/libmysqlclient_r.a .
ln -s /usr/local/mysql-5.5.24-linux2.6-x86_64/lib/libmysqlclient_r.so .
ln -s /usr/local/mysql-5.5.24-linux2.6-x86_64/lib/libmysqlclient_r.so.18 .
ln -s /usr/local/mysql-5.5.24-linux2.6-x86_64/lib/libmysqlclient_r.so.18.0.0 . 
```

现在愉快地安装mysql2 gem

```
sudo gem install mysql2
  Fetching: mysql2-0.3.11.gem (100%)
  Building native extensions.  This could take a while...
  Successfully installed mysql2-0.3.11
  1 gem installed
  Installing ri documentation for mysq2l-0.3.11...
  Installing RDoc documentation for mysql2-0.3.11... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:05:13.553

我也有这个问题...

当我`dpkg -r mysql-devel`尝试这样做时，我做`apt-get install libmysqlclient-dev`了一个错误，说：

> 解压 libmysqlclient-dev（来自 .../libmysqlclient-dev_5.5.24-0ubuntu0.12.04.1_i386.deb）... dpkg：错误处理 /var/cache/apt/archives/libmysqlclient-dev_5.5.24-0ubuntu0.12.04。 1_i386.deb (--unpack): 试图覆盖 '/usr/bin/mysql_config'，它也在包 mysql-devel 5.5.28-2 中

这样做后，`gem install mysql2`工作！耶 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T08:17:37.593

在 Ubuntu 12.04 中也使用已接受答案中提到的 ppa 遇到了同样的问题。但我的系统上也没有名称为 _r 的 libmysqlclient 文件。谷歌搜索我发现包构建器已经开始从文件中删除 _r 后缀，所以这可能发生在 11.10 和 12.04 之间。

此外，路径与曾经提到的路径有些不同，因此这些是我必须创建的符号链接：

```
ln -s /usr/lib/x86_64-linux-gnu/libmysqlclient.a ./libmysqlclient_r.a
ln -s /usr/lib/x86_64-linux-gnu/libmysqlclient.so ./libmysqlclient_r.so
ln -s /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18 ./libmysqlclient_r.so.18
ln -s /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18.0.0 ./libmysqlclient_r.so.18.0.0 
```

# android - 如何动态识别表行ID

> ID：10634956
> 
> 赞同：0
> 
> 时间：2012-05-17T11:34:47.503
> 
> 标签：android, dynamic

我必须找出表格行ID。为此，我正在编写代码

```
match1[i].setTextSize(12);
            match1[i].setPadding(10,0,0,0);
            tr.addView(match1[i]);
            Log.e("TAG", "ID: "+match1[i].getId());
            match1[i].setOnClickListener(new OnClickListener() {       
                public void onClick(View arg0) {

                    Toast.makeText(SAXParserActivity.this, ""+tr.getId(),
                            Toast.LENGTH_SHORT).show();
                    Log.e("TAG", " clicked ID: "+tr.getId());
                }
            });
     t1.addView(tr, tableRowParams); 
```

其中 match1 是文本视图。一切正常，但问题在于单击表格行。对于每一行，我得到-1 id，但在点击之前，id 是正确的。请提出错误在哪里，解析后如何随机显示数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:48:45.663

试试这个片段：

```
final View row=contact_table.getChildAt(i);
row.setOnClickListener(new OnClickListener(){
   public void onClick(View v){
    row_id=contact_table.indexOfChild(row);
   }
}); 
```

其中 contact_table 是您的 TableLayout 对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:53:21.547

由于光标总是指向第一行之前，这意味着 -1。您应该使用“moveToFirst()”到达第一行

```
eg: 

   for(cursor.moveToFirst() ; !cursor.isAfterLast(); cursor.moveToNext()){

            // Do whatever u want with the data obtained
} 
```

# mysql - mysql数据库中插入海量数据的优化技术

> ID：10634963
> 
> 赞同：0
> 
> 时间：2012-05-17T11:35:07.883
> 
> 标签：mysql

我想在 mysql 表中插入大约 81000 行，但是这样做需要很长时间，插入这么多行需要 9.5 分钟，而仅选择这些值需要 7.5 分钟。有谁知道如何优化插入查询？

而且我也不明白为什么游标显示的行数比表中的总行数多一行。??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:55:10.300

尝试[在插入之前锁定表](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)（并在之后解锁）。

您也可以使用[扩展插入](http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html#option_mysqldump_extended-insert)。

这可以加快插入速度。

至于选择，我想说您可能正在做一个没有索引的复杂查询。但是您需要更加明确，如果没有更多信息，我们无法为您提供太多帮助。

# java - 创建按钮 GUI 面板

> ID：10634969
> 
> 赞同：0
> 
> 时间：2012-05-17T11:35:32.517
> 
> 标签：java, swing

我正在尝试为游戏创建一个棋盘，我首先制作了一个框架，然后如果用户//输入行和列作为数字并按下开始按钮，它应该删除所有//框架上的内容并添加一个面板到处都有按钮的网格布局

这是代码（问题是框架被清除并且没有出现）

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class Frame extends JFrame implements ActionListener{
    private static final long serialVersionUID = 1L;

    JButton newButton;
    JButton Start;
    JTextArea row;
    JTextArea col;
    JLabel background;
    JLabel rows;
    JLabel columns;
    JLabel Error;
    JPanel myPanel;
    JCheckBox box;

    public Frame()
    {
                //adding frame

                setTitle("DVONN Game");
            setSize(1000, 700);
            setVisible(true);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setLayout(null);
        //making start button
        Start = new JButton(new ImageIcon("Start"));
        Start.setBounds(500, 30, 300, 300);
        Start.setOpaque(true);
        Start.addActionListener(this);

            //make background
        background = new JLabel();
        background.setBounds(0, -300, 2000, 1500);
        background.setIcon(Color.BLUE));

        rows = new JLabel("Enter the rows");
        columns = new JLabel("Enter the columns");
        rows.setForeground(Color.WHITE);
        columns.setForeground(Color.WHITE);
        rows.setBounds(10,10,100,30);
        columns.setBounds(10,45,105,30);

        row = new JTextArea();
        col = new JTextArea();
        row.setBounds(120,10,100,30);
        col.setBounds(120,45,100,30);

        Error = new JLabel("Enter numbers plz!");
                Error.setBounds(10, 100, 400, 30);
        Error.setForeground(Color.RED);
        Error.setVisible(true);

        box = new JCheckBox("Enable Random Filling");
        box.setBounds(10, 200, 150, 20);
        box.setVisible(true);

        myPanel = new JPanel();
        myPanel.setBounds(30, 30, 700, 500);
        myPanel.setVisible(true);

        newButton = new JButton();
        newButton.setOpaque(true);

        getContentPane().add(box);
        getContentPane().add(rows);
        getContentPane().add(columns);
        getContentPane().add(row);
        getContentPane().add(col);
        getContentPane().add(Start);
        getContentPane().add(background);

        this.validate();
        this.repaint();

    }

    public static void main(String[]args)
    {
        new Frame();
    }

      //adding actions for start button

      public void actionPerformed(ActionEvent e) {

        boolean flag = true;
        String r1 = row.getText();
        String c1 = col.getText();
        int x = 0,y = 0;

        try{
            x = Integer.parseInt(r1);
            y = Integer.parseInt(c1);
        } catch(NumberFormatException l) {
            flag = false;
        }

        int size = x * y;

        if (flag == true) {
            this.getContentPane().removeAll();
            this.validate();
            this.repaint();

            myPanel.setLayout(new GridLayout(x, y));

            while(size != 0)
            {
                myPanel.add(newButton);
                size --;
            }

            this.getContentPane().add(myPanel);

        } else {

            this.getContentPane().add(Error);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:35:58.843

这段代码有几个问题

1.  是否真的需要发布那么多代码。一个简单的用户界面，只需按下一个按钮，然后应该出现另一个组件就足够了[SSCCE](http://sscce.org)
2.  `null`布局的使用。请学会使用`LayoutManager`s
3.  每个 Swing 组件在层次结构中只能包含一次。所以这个循环是没有用的，因为你一遍又一遍地添加相同的组件（更不用说负大小会导致无限循环）

    ```
    while(size != 0){
      myPanel.add(newButton);
      size --;
    } 
    ```

4.  您是否尝试过调试以查看是否`size`实际上是`>0`. 由于您默默地忽略`ParseException`s 您最终可能会得到一个`size`将`0`清理内容窗格并且不添加任何内容的结果
5.  然后按照 goldilocks 的建议进行操作，并`validate`在添加组件后调用。`Container#add`查看方法 的javadoc

    > 此方法更改与布局相关的信息，因此使组件层次结构无效。如果容器已显示，则必须随后验证层次结构以显示添加的组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:38:24.450

调用`validate()`and`repaint()` *在*添加新元素之后而不是在删除旧元素之后。

您不需要调用`setVisible()`单个组件，`pack()`在 Frame 本身之后调用它，并且您不应该在构造函数中使用`validate()`and `repaint()`。即，将它们替换为：

```
pack();
setVisible(true); 
```

或者您可以在调用构造函数后对对象执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:39:29.583

尝试更换

```
 public static void main(String[]args)
{
    new Frame();
} 
```

经过

```
 public static void main(String[]args)
{
    new Frame().setVisible(true);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T11:45:26.743

删除构造函数中的调用`this.setVisible`并将其设为您的主要方法。

```
public static void main(String[] args) {  
    final Frame fr = new Frame();

    java.awt.EventQueue.invokeLater(new Runnable() {
         public void run() {
             fr.setVisible(true);
         }
    });
} 
```

这将确保框架元素在可见之前就位。

# linux - sgslufread：读取时出现硬错误，操作系统错误 = 104 Linux

> ID：10634973
> 
> 赞同：0
> 
> 时间：2012-05-17T11:35:57.670
> 
> 标签：linux, operating-system

当我这样做时，我在 LINUX 中遇到了问题

> ldapsearch -p 6567 "iispsid=BBEU68843256" iispoffername

它的错误

> sgslufread：读取时出现硬错误，操作系统错误 = 104 ldap_bind：无法联系 LDAP 服务器

这同样适用于 UNIX。这个硬错误是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-18T07:01:54.923

Oracle Internet Directory (OID) ldapbind 给出： sgslufread: Hard error on read, OS error = 10054 我们使用 Cisco 负载平衡路由器（LBR 或 CSS）并尝试做一个简单的 ldapbind -p 389 -h 机器会给出以下错误：sgslufread：读取时出现硬错误，操作系统错误 = 10054（在 Windows 上） sgslufread：读取时出现硬错误，操作系统错误 = 104（在 linux 上） ldap_bind：无法联系 LDAP 服务器

（可能还看到 sgslufread: Hard error on read, OS error = 194 ）

事实证明，LBR 配置了第 5 层负载平衡（它执行 URL 检查）。*通过在内容内容 layer5 协议 tcp vip 地址 xxx.xxx.xxx.xxx 添加服务 server1 端口 389 url "/* "中添加 url "/" 开启

问题是我们有 LDAP 流量，而不是 HTTP 流量。Layer5 (url "/ *") 用于 HTTP 流量。删除 url "/* " 解决了这个问题。

在使用 F5 负载均衡器通过端口 636 上的 LDAPS（SSL 加密）进行连接时，我也收到了同样的错误。在这种情况下，解决方案是关闭端口 636 的 F5 LDAP 监视器。出于某种原因，F5 不喜欢监控 OID SSL LDAP 端口。

# html - CSS - 将 div 对齐到文本框的右侧

> ID：10634977
> 
> 赞同：2
> 
> 时间：2012-05-17T11:36:04.743
> 
> 标签：html, css

```
 <div id="header">
        <div id="search" style="float:right;width:250px;padding:20px 6px 6px 6px;">
            <form action="/" method="get" id="frmSiteSearch" name="frmSiteSearch">
                <input type="text" id="searchbox" name="keyword" size="20"/>
                <div style="width:22px;height: 19px; float:left;background-color:green;">
                </div>
            </form>
        </div>          
    </div> 
```

和一个[jsbin 这里](http://jsbin.com/igodip/3)。

我想让带有绿色背景的 div 出现在文本框的右侧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T11:38:55.213

将输入向左浮动：

```
<input type="text" id="searchbox" name="keyword" size="20" style="float:left;"/> 
```

[这里的例子](http://jsbin.com/igodip/9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T11:39:23.677

这是[http://jsfiddle.net/Jams/Xns64/](http://jsfiddle.net/Jams/Xns64/)链接

```
 <div id="header">
        <div id="search" style="float:right;width:250px;padding:20px 6px 6px 6px;">
            <form action="/" method="get" id="frmSiteSearch" name="frmSiteSearch">
                <input type="text" id="searchbox" style="float:left;" name="keyword" size="20"/>
                <div style="width:22px;height: 19px; float:left;background-color:green;">
                </div>
            </form>
        </div>          
    </div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T11:41:56.343

看代码

```
<style>     
#searchbox, #button {
  float:left;
  width:150px;
  height:19px;
}

    #button {
  width:20px;
  background:green;
}   
  </style>

        <div id="header">
            <div id="search" style="float:right;width:250px;padding:20px 6px 6px 6px;">
                <form action="/" method="get" id="frmSiteSearch" name="frmSiteSearch">
                    <input type="text" id="searchbox" name="keyword" size="20"/>
                    <div id="button">
                    </div>
                </form>
            </div>          
        </div> 
```

[http://jsbin.com/igodip/11/edit](http://jsbin.com/igodip/11/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T11:41:13.573

更正绿色 div 的代码：

```
<div style="width:22px;height: 19px; float:right;background-color:green;"> 
```

# sql-server-2008 - SQL Server 2k8 使用视图对“不相关”表进行全文搜索？

> ID：10634978
> 
> 赞同：0
> 
> 时间：2012-05-17T11:36:05.903
> 
> 标签：sql-server-2008, full-text-search, full-text-catalog

我对全文搜索很陌生，我真的很想知道在多个不相关的表中执行“站点搜索”样式全文搜索的最佳方法（我计划在 4 个表中执行此操作）。我正在考虑使用这样的视图：

```
CREATE VIEW [dbo].[Search] WITH SCHEMABINDING
    AS

        SELECT   p.ProductId AS ItemId
            ,'Product' AS ItemType
            ,p.Title AS ItemTitle
            ,p.LongDescription AS LongDescription
            ,p.Price AS Price
    FROM dbo.Product AS p
    WHERE p.IsActive = 1

    UNION

    SELECT   a.ArticleId AS ItemId
            ,'Article' AS ItemType
            ,a.ArticleTitle AS ItemTitle
            ,a.Contents AS LongDescription
            ,NULL AS Price
    FROM dbo.Article AS a
    WHERE a.IsActive = 1 
```

但是在研究索引的正确语法时，我意识到“a”我需要一个唯一索引，而“b”显然不能使用 Unions 视图来创建全文索引......

我看到的另一种方法是为每个表创建一个 FTI，然后在存储过程中，将它们联合到一个 tmp 表中，然后选择具有 Order By 等级的 tmp 表。

我真的很感激这方面的一些指导，我发现的大部分内容都与多个相关表有关，在这些表中加入一个视图就足以解决这个问题。

编辑：

@Joe 好心地回答了这个我已经忘记并实际上以某种方式解决的问题，但担心它有点啰嗦，似乎这可能是他建议的两种方式中最合乎逻辑的，这就是我我正在使用 - 我完全忘记了我必须将它分页到......我认为客户不会对无穷无尽的结果列表感到兴奋......

我的一位同事还提出了他见过的另一种技术，即在表中抛出元数据，然后将结果缓存在另一个表中，然后在该表中进行全文搜索，如果你知道你的元数据将是另外的，您还需要将其键入原始表格以立即或显示实际结果（如果需要的话，可以说全文）

```
 CREATE PROCEDURE [dbo].[up_Search]
     @Term VARCHAR(100)
    ,@Skip INT = 0
    ,@Take INT = 10
AS
DECLARE @Search TABLE
(
     ItemId INT
    ,ItemType VARCHAR(50)
    ,ItemTitle VARCHAR(100)
    ,LongDescription VARCHAR(MAX)
    ,Price DECIMAL(10,2)
    ,SearchRank INT
)

INSERT INTO @Search SELECT * FROM (

    SELECT   p.ProductId AS ItemId
            ,'Product' AS ItemType
            ,p.Title AS ItemTitle
            ,p.LongDescription AS LongDescription
            ,p.Price AS Price
            ,KEY_TBL.RANK AS SearchRank
    FROM dbo.Product AS p
    INNER JOIN CONTAINSTABLE(dbo.Product, Title, @Term) AS KEY_TBL ON p.ProductId = KEY_TBL.[KEY]
    WHERE p.IsActive = 1

    UNION

    SELECT   a.ArticleId AS ItemId
            ,'Article' AS ItemType
            ,a.ArticleTitle AS ItemTitle
            ,a.Contents AS LongDescription
            ,NULL AS Price
            ,KEY_TBL.RANK AS SearchRank
    FROM dbo.Article AS a
    INNER JOIN CONTAINSTABLE(dbo.Article, ArticleTitle, @Term) AS KEY_TBL ON a.ArticleId = KEY_TBL.[KEY]
    WHERE a.IsActive = 1

    UNION    

    SELECT   n.NewsId AS ItemId
            ,'News' AS ItemType
            ,n.NewsTitle AS ItemTitle
            ,n.Contents AS LongDescription
            ,NULL AS Price
            ,KEY_TBL.RANK AS SearchRank
    FROM dbo.News AS n
    INNER JOIN CONTAINSTABLE(dbo.News, NewsTitle, @Term) AS KEY_TBL ON n.NewsId = KEY_TBL.[KEY]
    WHERE n.IsActive = 1

    UNION

    SELECT   b.BusinessId AS ItemId
            ,bt.Title AS ItemType
            ,b.Title AS ItemTitle
            ,b.LongDescription AS LongDescription
            ,NULL AS Price
            ,KEY_TBL.RANK AS SearchRank
    FROM dbo.Business AS b
    INNER JOIN CONTAINSTABLE(dbo.Business, Title, @Term) AS KEY_TBL ON b.BusinessId = KEY_TBL.[KEY]
    INNER JOIN dbo.BusinessType AS bt ON b.BusinessTypeId = bt.BusinessTypeId
    WHERE b.IsActive = 1
) AS tmp;

WITH SearchCT AS
(
    SELECT   ItemId
            ,ItemType
            ,ItemTitle
            ,LongDescription
            ,Price
            ,SearchRank
            ,ROW_NUMBER() OVER (ORDER BY SearchRank DESC) AS RowNumber
            ,COUNT(*) OVER () AS RecordCount
    FROM @Search
)
SELECT ItemId, ItemType, ItemTitle, LongDescription, SearchRank, RowNumber, RecordCount
FROM SearchCT
WHERE RowNumber BETWEEN @Skip + 1 AND (@Skip + @Take)
ORDER BY RowNumber 
```

返回 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:53:40.770

我认为您可以在这里采取两种基本方法：

1) 将四个表聚合成一个表并在该表上进行搜索。您需要为此表上的主键提供唯一标识符。因此，表结构将类似于您正在考虑的索引视图，并且看起来像这样：

```
CREATE TABLE AggregatedTable
(
    Id int IDENTITY(1,1) primary key,
    ItemId int,
    ItemType nvarchar(50),
    ItemTitle nvarchar(255),
    LongDescription nvarchar(max),
    IsActive int
) 
```

然后，您需要在 LongDescription 列上创建全文索引。

这种方法的优点是您可以在单个查询中对单个表进行全文搜索，例如：

```
SELECT Id, ItemId, ItemType, ct.RANK      
    FROM dbo.AggregateTable AS a INNER JOIN 
    CONTAINSTABLE (AggregateTable , *, '(light NEAR aluminum)',   1033) AS ct
        ON a.ItemId= ct.[KEY]
WHERE IsActive = 1
ORDER BY ct.RANK desc 
```

这种方法的缺点是： 1\. 您必须定期运行作业以将 4 个基表中的数据加载到聚合表中 2\. 您将使用两倍的磁盘空间

第二种方法是将数据保存在四个单独的表中，然后编写 FTS 查询，将来自四个表的结果联合起来。您应该能够按相关性对结果进行排名，然后获取前 N 个最相关的结果。您必须编写如下查询：

```
SELECT   p.ProductId AS ItemId, 'Product' AS ItemType, ct.RANK 'Rank'       
    FROM dbo.Product AS p INNER JOIN 
    CONTAINSTABLE (Product, *, '(light NEAR aluminum)',   1033) AS ct
        ON p.ProductId = ct.[KEY]
WHERE p.IsActive = 1
UNION
SELECT   a.ArticleId AS ItemId, 'Article' AS ItemType, ct.RANK  
      CONTAINSTABLE (Article, *, '(light NEAR aluminum)',   1033) AS ct
        ON p.ProductId = ct.[KEY]  
    FROM dbo.Article AS a
    WHERE a.IsActive = 1
    ORDER BY 'Rank' DESC
UNION ... other two tables 
```

这种方法的优点是您不需要将四个表中的内容聚合到一个表中的作业。

缺点是您的查询更复杂，因为它们需要 UNION 来自四个查询的结果。

我倾向于第二种方法。我认为这更直接且更易于维护，并且 UNION 查询易于构建。

# .htaccess - 图像重定向重写

> ID：10634985
> 
> 赞同：0
> 
> 时间：2012-05-17T11:36:43.933
> 
> 标签：.htaccess, mod-rewrite

我有这个链接
`http://www.mydomain.com/images/silver-star-17282117.gif`
，我想把它转换成
`http://www.mydomain.com/images/silver-star.gif`
我正在使用这个 rewriterule
`RewriteRule ^/images/silver-star-([0-9]+).gif$ http://www.mydomain.com/images/silver-star.gif [NC,L,R=301]`。
我无法弄清楚为什么这不起作用。谢谢您的帮助！

# c# - 在静态类上调用重载的泛型方法

> ID：10634988
> 
> 赞同：2
> 
> 时间：2012-05-17T11:37:00.467
> 
> 标签：c#, .net, asp.net-mvc-3, reflection, html-helper

我正在尝试调用[InputExtensions](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.aspx)静态类上的方法，以便为`HtmlHelper`该类上的方法创建重载。

所以无论如何，我仍然无法调用`InputExtensions`该类的方法。这是我用来执行此操作的部分代码：

```
 Type inputExtensions = typeof(InputExtensions);
    MethodInfo methodInfo = null;
    MethodInfo genericMethod = null;
    switch (propertyViewingMode.ViewingLevel)
    {
        case 1:
            methodInfo = inputExtensions.GetMethod(methodName, new Type[] { typeof(HtmlHelper<TModel>), typeof(Expression<Func<TModel, TProperty>>), typeof(Object) });
            genericMethod = methodInfo.MakeGenericMethod(typeof(TModel), typeof(TProperty));
            result = genericMethod.Invoke(null, new object[] { helper, expression, new { @class = "readOnly", @readonly = "read-only" } }) as MvcHtmlString;
            break;
        case 2:
            methodInfo = inputExtensions.GetMethod(methodName, new Type[] { typeof(HtmlHelper<TModel>), typeof(Expression<Func<TModel, TProperty>>) });
            genericMethod = methodInfo.MakeGenericMethod(typeof(TModel), typeof(TProperty));
            result = genericMethod.Invoke(null, new object[] { helper, expression }) as MvcHtmlString;
            break;
        default:
            result = new MvcHtmlString(String.Empty);
            break;
    } 
```

问题是`methodInfo`始终为空，这意味着`Type.GetMethod`找不到我要调用的方法。

**更新：**请注意，当我没有为该`GetMethod`方法提供`Type[]`数组时，它会抛出一个异常，告诉我调用不明确。

**更新2：**这是我试图调用的方法：

```
TextBoxFor<TModel, TProperty>(HtmlHelper<TModel>, Expression<Func<TModel, TProperty>>, Object) 
```

**回答：**

```
 Type inputExtensions = typeof(InputExtensions);
    IEnumerable<MethodInfo> methods = null;
    MethodInfo genericMethod = null;
    MethodInfo methodInfo = null;
    switch (propertyViewingMode.ViewingLevel)
    {
        case 1:
            methods = inputExtensions.GetMethods().Where(m => m.IsGenericMethod && m.Name.Equals(methodName))
                                                        .Where(x => x.GetParameters().Count() == 3);
            methodInfo = methods.FirstOrDefault(x => x.GetParameters()[2].ParameterType.FullName == "System.Object");
            if (methodInfo != null)
            {
                genericMethod = methodInfo.MakeGenericMethod(new[] { typeof(TModel), typeof(TProperty) });
                result = genericMethod.Invoke(null, new object[] { helper, expression, new { @class = "readOnly", @readonly = "read-only" } }) as MvcHtmlString;
            }
            break;
        case 2:
            methods = inputExtensions.GetMethods().Where(m => m.IsGenericMethod && m.Name.Equals(methodName))
                                                        .Where(x => x.GetParameters().Count() == 2);
            methodInfo = methods.FirstOrDefault();
            if (methodInfo != null)
            {
                genericMethod = methodInfo.MakeGenericMethod(new[] { typeof(TModel), typeof(TProperty) });
                result = genericMethod.Invoke(null, new object[] { helper, expression }) as MvcHtmlString;
            }
            break;
        default:
            result = new MvcHtmlString(String.Empty);
            break;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:15:33.970

不幸的是，这似乎是不可能的...... [http://blogs.msdn.com/b/yirutang/archive/2005/09/14/466280.aspx](http://blogs.msdn.com/b/yirutang/archive/2005/09/14/466280.aspx)

您唯一能做的就是迭代所有具有给定名称的方法并自己分析参数类型:(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T11:48:47.070

我相信你想要：

```
BindingFlags.Public | BindingFlags.Static 
```

编辑：

尝试在调试模式下迭代方法，直到找到所需的方法，然后您可以检查参数以确保它们都对齐。

```
typeof(A).GetMethods().Where(m => m.IsGenericMethod); 
```

# shell - sed 命令根据给定规则编辑流

> ID：10634991
> 
> 赞同：1
> 
> 时间：2012-05-17T11:37:08.350
> 
> 标签：shell, sed, awk, tr

我有一个这样的输入流：

```
afs=1;bgd=1;cgd=1;djh=1;fgjhh=1; 
```

现在我必须编辑流的规则是：（1）如果我们有

```
"djh=number;" 
```

将其替换为

```
"djh=number," 
```

(2)否则将“string=number;”替换为

```
"string," 
```

我可以将案例 2 处理为：

```
sed 's/afs=1/afs,/g;s/dbg=1/dbg,/g;..... so on for rest 
```

如何照顾条件1？

“djh”数字可以是任意数字（1,12,100），其他数字始终为 1。

我使用的所有双引号仅供参考；输入流中不存在双引号。“afs”也可以是“Afs”。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:01:16.187

```
sed -e 's/;/,/g; s/,djh=/,@=/; s/\([a-z][a-z]*\)=[0-9]*,/\1,/g; s/@/djh/g' 
```

This does the following

1.  replace all `;` by `,`
2.  replace `djh` with `@`
3.  remove `=number` from all lower cased strings
4.  replace `@` with `djh`

This results in `afs,bgd,cgd,djh=1,fgjhh,` for your input. Of course you could substitute djh with any other character that makes it easy to match the other strings. This is just illustrating the idea.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:01:34.657

This might work for you:

```
echo "afs=1;bgd=1;cgd=1;djh=1;fgjhh=1;" |
sed 's/^/\n/;:a;/\n\(djh=[0-9]*\);/s//\1,\n/;ta;s/\n\([^=]*\)=1;/\1,\n/;ta;s/.$//'
afs,bgd,cgd,djh=1,fgjhh, 
```

Explanation:

This method uses a unique marker (`\n` is a good choice because it cannot appear in the pattern space as it is used by sed as the line delimiter) as anchor for comparing throughout the input string. It is slow but can scale if more than one exception is needed.

*   Place the marker in front of the string `s/^/\n/`
*   Name a loop label `:a`
*   Match the exception(s) `/\n\(djh=[0-9]*\)/`
*   If the exception occurs substitute as necessary. Also *bump* the marker along `/s//\1,\n/`
*   If the above is true break to loop label `ta`
*   Match the normal and substitute. Also *bump* the marker along `s/\n\([^=]*\)=1;/\1,\n/`
*   If the above is true break to loop label `ta`
*   All done remove the marker `s/.$//`

or:

```
echo "afs=1;bgd=1;cgd=1;djh=1;fgjhh=1;" | 
sed 's/\<djh=/\n/g;s/=[^;]*;/,/g;s/\n\([^;]*\);/djh=\1,/g'
afs,bgd,cgd,djh=1,fgjhh, 
```

Explanation:

This is fast but does not scale for multiple exceptions:

*   Globaly replace the exception string with a new line `s/\<djh=/\n/g`
*   Globaly replace the normal condition `s/=[^;]*;/,/g`
*   Globaly replace the `\n` by the exception string `s/\n\([^;]*\);/djh=\1,/g`

N.B. When replacing the exception string make sure that it begins on a word boundary `\<`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:01:35.453

```
echo 'afs=1;bgd=1;cgd=1;djh=1;fgjhh=1;' | 
sed -e 's/\(djh=[0-9]\+\);/\1,/g' -e 's/\([a-zA-Z0-9]\+\)=1;/\1,/g' 
```

# synchronization - Java，EJB，Lock - 私有字段的同步？

> ID：10634992
> 
> 赞同：1
> 
> 时间：2012-05-17T11:37:15.973
> 
> 标签：synchronization, locking, ejb-3.1

我有一个后续问题： [EJB 3.1 容器管理并发与同步](https://stackoverflow.com/questions/7178947/ejb-3-1-container-managed-concurrency-vs-synchronized)

锁是仅防止对持久性上下文中的数据的并发访问等，还是还为私有字段提供同步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:12:49.823

最容易想象`java.util.concurrent.ReadWriteLock`容器正在调用的 per-bean`lock()`以及在or`unlock()`上的方法调用，具体取决于为方法配置的内容。因此，实例变量受到保护。`readLock()``writeLock()``@Lock`

但是，请注意容器管理的`@PersistenceContext`字段不是“共享”状态，因为容器实际上注入了一个代理对象。该代理上的每个方法调用`EntityManager`都将委托给每个事务`EntityManager`。由于事务不是跨线程共享的，因此即使 bean`@ConcurrencyManagement(BEAN)`在没有其他同步的情况下使用也是线程安全的。

# java - 使用 GTKLookAndFeel 的具有 JLabel 样式的 JTextField

> ID：10634993
> 
> 赞同：5
> 
> 时间：2012-05-17T11:37:17.820
> 
> 标签：java, swing, ubuntu, look-and-feel, uimanager

我需要一个具有 JLabel 样式的 JTextField（换句话说，我需要一个 JLabel 但我希望能够选择文本）。

```
JTextField value = new JTextField(valueText);
value.setEditable(false);
value.setBorder(BorderFactory.createEmptyBorder);
value.setForeground(UIManager.getColor("Label.foreground"));               
value.setFont(UIManager.getFont("Label.font"));
value.setBackground(UIManager.getBackground("Label.background"));
... 
```

它在 Windows 和 Mac 上运行良好：

![JTextField 类似于 JLabel (Mac)](../Images/ba634df7b2ae761095deb3183242b767.png)

但在 Ubuntu (GTKLookAndFeel) 上，我得到下一个结果：

![JTextField 类似于 JLabel (Ubuntu)](../Images/fea6667d81adc141812b2ff054b0f554.png)

其中“By”是 JTextField，“Size”是 JLabel

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:48:57.017

我认为`setBorder(null);`要重置 GTK L&F 的默认值`Borders`/来自`UIMananager`GTK L&F，或者直接将此值设置`UIMananager`为`JTextField`

编辑：

[您必须更改 BorderUIResource，与此处为 FontUIResource 演示](https://stackoverflow.com/questions/9958004/change-font-at-runtime)的方式相同

编辑2：

![在此处输入图像描述](../Images/e5bf45879e9d389a54057dcc648f878d.png)并在 1.5 秒![在此处输入图像描述](../Images/fb265566254220455167e75e059b701f.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.Border;
import javax.swing.border.LineBorder;
import javax.swing.plaf.BorderUIResource;

public class SystemFontDisplayer extends JFrame {

    private static final long serialVersionUID = 1L;
    private JFrame frame = new JFrame("Nimbus UIDeafaults and Font");
    private javax.swing.Timer timer = null;
    private JTextField testTextField = new JTextField("testTextField");
    private JButton testButton = new JButton("testButton");

    public SystemFontDisplayer() {
        frame.setLayout(new GridLayout(4, 0, 20, 20));
        testTextField.setBorder(null);
        frame.add(testTextField);
        frame.add(testButton);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(200, 105);
        frame.pack();
        frame.setVisible(true);
        start();
    }

    private void start() {
        timer = new javax.swing.Timer(1500, updateCol());
        timer.setRepeats(false);
        timer.start();
    }

    public Action updateCol() {
        return new AbstractAction("text load action") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                Border border = new LineBorder(Color.red, 2);
                final BorderUIResource res = new BorderUIResource(border);
                UIManager.getLookAndFeelDefaults().put("TextField.border", new BorderUIResource(border));
                UIManager.getLookAndFeelDefaults().put("Button.border", new BorderUIResource(border));
                SwingUtilities.updateComponentTreeUI(frame);

                /*Border border = new LineBorder(Color.red, 2);
                try {
                LookAndFeel lnf = UIManager.getLookAndFeel().getClass().newInstance();
                final BorderUIResource res = new BorderUIResource(border);
                UIDefaults uiDefaults = lnf.getDefaults();
                uiDefaults.put("TextField.border", res);
                uiDefaults.put("Label.border", res);
                uiDefaults.put("Button.border", res);
                UIManager.getLookAndFeel().uninitialize();
                UIManager.setLookAndFeel(lnf);
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }
                UIDefaults defaults = UIManager.getDefaults();
                BorderUIResource res = new BorderUIResource(border);
                defaults.put("TextField.border", res);
                defaults.put("Label.border", res);
                defaults.put("Button.border", res);
                SwingUtilities.updateComponentTreeUI(frame);*/
            }
        };
    }

    public static void main(String arg[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                SystemFontDisplayer systemFontDisplayer = new SystemFontDisplayer();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:11:15.373

最后我使用 JEditorPane 而不是 JTextField 得到了预期的结果：

```
JEditorPane value = new JEditorPane();
value.setText(valueText);
... 
```

似乎 GTK 外观不允许在 JTextField 中使用自定义背景： [http ://bugs.sun.com/view_bug.do?bug_id=6531760](http://bugs.sun.com/view_bug.do?bug_id=6531760)

# asp.net-mvc-3 - 使用具有成员资格的 Windows Azure 和 ASP.NET MVC

> ID：10634995
> 
> 赞同：0
> 
> 时间：2012-05-17T11:37:23.473
> 
> 标签：asp.net-mvc-3, asp.net-membership, azure-sql-database

我有一个 ASP.NET WebForms 应用程序。我一直在迁移它以使用 ASP.NET MVC。在这个过程中，我不得不去掉我的会员代码并使用更新的实现。目前，我成功地将 SQL 表配置文件提供程序与 Windows Azure 一起使用： http: [//code.msdn.microsoft.com/Using-the-SQL-Table-4c220996/view/SourceCode#content](http://code.msdn.microsoft.com/Using-the-SQL-Table-4c220996/view/SourceCode#content)

我的挑战是，会员资格的等价物是什么？考虑到 SqlMembershipProvider 不能与 ASP.NET MVC 一起使用，我不确定现在要使用什么。我需要对我的用户进行身份验证。有人可以告诉我我可以对托管在 SQL Azure 上的表使用什么“DefaultMembershipProvider”吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:32:57.940

您需要将 SQL Azure 与您的 webrole 一起使用才能使其正常工作。Sql Azure 数据库有 Asp.net 成员资格/角色等表，然后成员资格和角色提供程序将正常工作，无需进一步更改提供程序。而且您肯定可以在 Windows Azure 上将 SQLMembershipProvider 与 MVC3 ASP.NET Web 角色和 SQL Azure 一起使用。您可以在互联网上找到有关如何一起使用它的文章：

[http://romikoderbynew.com/2011/02/02/using-autofac-mvc3-sqlmembershipprovider-and-entity-framework-in-windows-azure-and-sql-azure/](http://romikoderbynew.com/2011/02/02/using-autofac-mvc3-sqlmembershipprovider-and-entity-framework-in-windows-azure-and-sql-azure/)

如果希望如此讨论中所述，您也可以创建自己的： [ASP.NET MVC3 Custom Membership Provider - The members provider name specified is invalid](https://stackoverflow.com/questions/4587187/asp-net-mvc3-custom-membership-provider-the-membership-provider-name-specified)

# nlp - 使用哪些方法来识别文本所用的语言？

> ID：10634998
> 
> 赞同：2
> 
> 时间：2012-05-17T11:37:25.603
> 
> 标签：nlp

如果我有给定的文本（无论是长文本还是短文本），您通常使用哪些方法检测它是用哪种语言编写的？

很清楚：

*   你需要一个训练语料库来训练你使用的模型（例如神经网络，如果使用的话）

我最容易想到的是：

*   检查文本中使用的字符（例如，平假名仅用于日语，元音变音可能仅用于欧洲语言，ç 用于法语、土耳其语……）
*   将检查增加到两个或三个字母对以查找语言的特定组合
*   查找字典以检查哪些单词出现在哪种语言中（可能只有没有词干，因为词干取决于语言）

但我想还有更好的方法可以走。我不是在寻找现有的项目（这些问题已经得到解答），而是在寻找像 Hidden-Markov-Models、Neural Networks 之类的方法……任何可能用于此任务的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:20:52.637

在我正在开发的产品中，我们使用基于字典的方法。计算训练语料库中所有单词的第一个相对概率，并将其存储为模型。

然后逐字处理输入文本以查看特定模型是否提供最佳匹配（比其他模型好得多）。

在某些情况下，所有模型都提供了非常糟糕的匹配。

几个有趣的点：

1.  由于我们正在使用社交媒体，因此尝试了标准化和非标准化匹配（在这种情况下，标准化是从符号中删除变音符号）。非标准化匹配具有更高的权重
2.  这种方法在非常短的短语（1-2 个单词）上效果不佳，特别是当这些单词在少数语言中存在时，这是少数欧洲语言的情况

此外，为了更好地检测，我们正在考虑添加您所描述的每个字符模型（某些语言具有某些独特的字符）

顺便说一句，我们使用 ICU 库来拆分单词。适用于欧洲和东方语言（目前我们支持中文）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:16:30.500

检查*Cavnar 和 Trenkle*算法。

# jquery - ajax异步解决方案

> ID：10634999
> 
> 赞同：0
> 
> 时间：2012-05-17T11:37:48.940
> 
> 标签：jquery, ajax

我一次发送几个ajax请求。但如您所知，结果到达时间与您发送请求的时间无关。现在，这对我来说是个问题。

这就是我现在所面对的。

当我单击使用 HTMLElement 制作的 TAB 按钮时，它会发送 ajax 调用。

如果我在单击其他选项卡后单击该选项卡。两个请求一起出现，我不知道哪个可以先回复我。但不幸的是，最后一个有时比第一个 ajax 请求更早到达。

然后，我的 html 标记出现混乱，所以我的问题是有什么方法可以让 ajax 调用按常规顺序到达。

```
initialize : function() { //<!-- this function call AJAX request
    this.getActivatedDeviceList();
    this.getDeActivatedDeviceList();
    this.getLostOrStolenDeviceList();
    this.getWaitingDeviceList();
}, 
```

* * *

```
getActivatedDeviceList : function() {
    var url = "/monitor/device/getActivatedDeviceJson/" + TopMenu.CURRENT_TAB + "/";
    this.loadTemplateAndFillUp(url, "#activatedDeviceTemplate", "#activatedDevice");
},

getDeActivatedDeviceList : function() {
    var url = "/monitor/device/getDeactivatedDeviceJson/" + TopMenu.CURRENT_TAB + "/";
    this.loadTemplateAndFillUp(url, "#deactivatedDeviceTemplate", "#deactivatedDevice");
},

getLostOrStolenDeviceList : function() {
    var url = "/monitor/device/getLostOrStolenDeviceJson/" + TopMenu.CURRENT_TAB + "/";
    this.loadTemplateAndFillUp(url, "#lostOrStolenDeviceTemplate", "#lostOrStolenDevice");
},

getWaitingDeviceList : function() {
    var url = "/monitor/device/getWaitingDeviceJson/" + TopMenu.CURRENT_TAB + "/";
    this.loadTemplateAndFillUp(url, "#waitingDeviceTemplate", "#waitingDevice");
},

loadTemplateAndFillUp : function(url, templateElement, appendElement) {
    $.ajax({ //<!--This ajax call fires upon initialize function
          url : url,
          dataType : 'json',
          beforeSend : function(xhr) {
              $(appendElement).children(".zoom").attr("src", "/monitor/img/icon/loading.gif");
          },
          complete : function(xhr) {
              setTimeout(
                  function() {
                      $(appendElement).children(".zoom").attr("src", "/monitor/img/btn/btn_zoom.png")
                  }, 
                  500
              );

              $(appendElement).find("table.dataBoxTable").tableScroll({height:DeviceManager.TABLE_HEIGHT});
              DeviceManager.columnAutoFit(appendElement);
              DeviceManager.addListenerAndHandler();
          },
          success : function(data) {
              $(templateElement).tmpl(data).appendTo(appendElement); //<!--This jquery template get messed up by ajax arrival order.
          },
          async: true
    });
}, 
```

我希望你能听懂我的英语。非常感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:25:34.007

**客户端：** 在客户端有一个计数器，即 ajaxCounter = 0; 并在 ajax 调用中增加计数器，然后将计数器作为参数发送给调用。

现在由于进行了两次调用，因此 ajaxCounter 为 2

**服务器端：** 始终返回作为参数接收的 ajaxCounter。因此，对于第一个 ajax 调用，返回的将是 1。所以对于第二个 ajax 调用，返回的将是 2。

**客户端：** 在客户端检查ajaxCounter == counterReturnedFromClient是否。如果相等，则执行完整方法，否则忽略。