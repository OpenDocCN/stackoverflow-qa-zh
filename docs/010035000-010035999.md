# StackOverflow 问答 10035000-10035999

# java - 使用 Java 将媒体放入 Access 数据库

> ID：10035005
> 
> 赞同：1
> 
> 时间：2012-04-05T19:45:47.840
> 
> 标签：java, sql, database, eclipse, ms-access

我正在使用 Access 数据库作为连接用 Java 制作电子邮件系统。获取媒体/文件（.gif、.au、.mpeg 和 .txt）附件并将其上传到访问数据库的最佳方式是什么？数据库中的字段必须具有什么数据类型？我认为我必须将文件转换为二进制文件才能存储它们，我不知道如何检索它们，以便我可以在 Java GUI 中打开它们。任何人都可以解释如何做到这一点，以便我可以将它添加到我的程序中，或解释任何替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T19:54:36.850

如果您希望将实际的二进制文件存储在 Access 数据库中，那么 OLE OBJECT 确实是您唯一的选择。

您可能能够使用`setBlob`并`getBlob`使用它。

# c++ - 用 C++ 创建一个基本的 UDP 聊天程序

> ID：10035009
> 
> 赞同：2
> 
> 时间：2012-04-05T19:46:08.293
> 
> 标签：c++, udp, client-server, chat, winsock2

我目前在 C++ 中有一个基本的聊天程序，它使用 WinSock2.h 和 UDP。目前，用户能够向服务器发送消息，而服务器只是将相同的消息发回。我想知道我从这里去哪里（我不是要代码）。我想知道我应该如何继续将消息发送到另一个也连接到服务器的客户端。

如果我需要解释我已经做了什么，请告诉我。

非常感谢所有建议。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T19:48:39.290

您将有一个当前连接的用户列表，当用户发送消息时，它会将其发布给所有连接的用户。

您的服务器将跟踪谁已连接，并删除那些断开连接的人。当有人连接或断开连接时，它会向所有当前连接的用户发送通知，告诉他们这个通知。

所有这些都不是特定于 UDP 的，事实上，对于这种类型的消息传递，TCP 可能会更好，因为您不必担心消息被丢弃。UDP 应该只用在性能最重要的地方，比如实时游戏、语音聊天。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T19:50:47.123

当您说“已连接”（在客户端的上下文中）时-您到底是什么意思？因为你说你在你的程序中使用了 UDP。

在 UDP 协议中没有“连接”状态，除非你实现它。
然而，在 TCP 协议中，有（在协议本身内实现）。

此外，“**广播**”消息的基本思想很简单——**保留已连接客户端的列表**。
连接时添加客户端。断开连接时将其从列表中删除。
然后，当您想向所有人发送消息时，您只需遍历此列表即可。

同样，您必须先接收这些断开/连接事件，然后才能跟踪“已连接”客户端。

如果您使用 TCP 而不是 UDP，那么您就设置好了。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T19:51:40.677

基本上，就像 Matthew 说的，您需要存储与服务器的所有当前连接。当套接字连接时，您可以存储对该套接字的引用。现在，每当客户端发送消息时，您都可以将其重新广播到所有套接字。现在您还必须处理套接字断开连接的时间，因为您不想存储一堆关闭的套接字。

# python - 在 django 中使用 jQuery 进行 Ajax 头像预览

> ID：10035010
> 
> 赞同：1
> 
> 时间：2012-04-05T19:46:11.187
> 
> 标签：python, html, ajax, django

我一直在尝试遵循教程。但它不想为我工作。我正在尝试显示一个简单的（或者我认为是这样的）头像预览。问题是它不会加载或接受头像。如果我能对此有另一种看法，也许可以告诉我我做错了什么；我会非常感激。

**模板：（**表格为大型整体用户信息表格）

```
<form class="inline" enctype="multipart/form-data" method="POST" action="/profile/edit/{{ role }}/" id="avatarLoadForm">
     <input type="hidden" name="next" value="/account/settings/">
     {% csrf_token %}
     {% if user_info_form.errors %}{{ user_info_form.errors }}{% endif %}
     <div>
          <label class="form-label" for="id_avatar">Your Picture</label>
          <div id="preview" class="inline-block img-frame thick">   
               <img src="{% if profile.avatar %}{% thumbnail profile.avatar 120x120 crop %}{% else %}{{ DEFAULT_AVATAR }}{% endif %}" id="thumb" alt="" alt="sample-pic" />
          </div>
          {{ user_info_form.avatar }}
     </div>
     <div id="edit-name">
          <label class="form-label" for="id_first_name">Name</label>
          {{ user_info_form.first_name }}
          {{ user_info_form.last_name }}
 ... And so on (other info not relevant)... 
```

**js：**

```
(function() {
        var thumb = $('img#thumb');    
        new AjaxUpload('imageUpload', {
            action: $('#avatarLoadForm').attr('action'),
            name: 'avatar',

            onSubmit: function(file, extension) {
                $("#preview").html('<img id="loader" src="{{ STATIC_URL }}images/ajax-loader.gif" alt="Uploading...."/>');            
            },
            onComplete: function(file, response) {
                thumb.load(function(){
                    $("#preview").html('');
                    thumb.unbind();
                });
                thumb.attr('src', response);
            }
        }); 
```

**视图.py**

```
@login_required        
def edit_profile(request, profile_type):
    if profile_type == 'investor':
        profile = InvestorProfile.objects.get(user=request.user)
    elif profile_type == 'manager':
        profile = ManagerProfile.objects.get(user=request.user)
    context = base_context(request)
    if request.method == 'POST':
        notify = "You have successfully updated your profile."
        user_info_form = UserInfoForm(request.POST, request.FILES)
        if user_info_form.is_valid():
            user_info_form.save(request.user, profile_type)
            response = simplejson.dumps({"status": "Upload Success"})
        return HttpResponse (response, mimetype='application/json')
    else:
        initial = {}
        initial['first_name'] = request.user.first_name
        initial['last_name'] = request.user.last_name
        initial['email'] = request.user.email
        initial['about'] = profile.about
        initial['country'] = profile.country
        initial['about'] = profile.about
        user_info_form = UserInfoForm(initial=initial)
    context['user_info_form'] = user_info_form
    context['profile_type'] = profile_type
    context['profile'] = profile
    return render_to_response('settings/base.html', context, context_instance=RequestContext(request)) 
```

***编辑：*** **Forms.py：**

```
class UserInfoForm(forms.Form):
    first_name = forms.CharField(widget=forms.TextInput(attrs={'class':'input-text'}), max_length=30)
    last_name = forms.CharField(widget=forms.TextInput(attrs={'class':'input-text'}), max_length=30)
    email = forms.EmailField(widget=forms.TextInput(attrs={'class':'input-text'}))
    about = forms.CharField(widget=forms.Textarea(attrs={'class':'input-text'}), required=False)
    country = forms.CharField(max_length=50, widget=forms.Select(choices=countries.COUNTRIES))
    avatar = forms.ImageField(required=False)
    #avatar = forms.ImageField(widget=forms.ClearableFileInput(attrs={'id':'imageUpload'}),required=False)
    investor_type = forms.CharField(max_length=4, widget=forms.Select(choices=choices), required=False) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T20:30:09.883

为了将来参考，您应该将 Avatar 定义为具有自己的字段的模型，无论它是否是缩略图。但是你试过了吗

```
 <img src="{% if profile.user %}{% thumbnail avatar 120x120 crop %}{% else %}{{ DEFAULT_AVATAR }}{% endif %}" id="thumb" alt="" alt="sample-pic" /> 
```

# java - Java序列化没有按我的预期工作

> ID：10035012
> 
> 赞同：2
> 
> 时间：2012-04-05T19:46:18.527
> 
> 标签：java, serialization

我正在尝试`ArrayList<Prescription>`使用`ObjectOutputStream`

这是`Prescription`课程：

```
import java.io.Serializable;
import java.util.Calendar;

public class Prescription implements Serializable {

    private static final long serialVersionUID = 4432845389029948144L;

    private String name;
    private String dosage;
    private int originalQuantity = 0;
    private int quantityRemaining = 0;
    private String prescribingPharmacy;

    private long dateStarted = 0;

    private boolean taken_AM = false;
    private boolean taken_Noon = false;
    private boolean taken_PM = false;

    private boolean taken_Mon = false;
    private boolean taken_Tue = false;
    private boolean taken_Wed = false;
    private boolean taken_Thu = false;
    private boolean taken_Fri = false;
    private boolean taken_Sat = false;
    private boolean taken_Sun = false;

    public Prescription(){
        this.name = "Unknown";
    }

    public Prescription(String name, String dosage, int quantity, String pharmacy){
        this.name = name;
        this.dosage = dosage;
        this.originalQuantity = quantity;
        this.quantityRemaining = quantity;
        this.prescribingPharmacy = pharmacy;
        this.dateStarted = Calendar.getInstance().getTimeInMillis();
    }

    public void setTaken(boolean AM, boolean Noon, boolean PM){
        this.taken_AM = AM;
        this.taken_Noon = Noon;
        this.taken_PM = PM;
    }

    public void setTaken(boolean Mon, boolean Tue, boolean Wed, boolean Thu,
        boolean Fri, boolean Sat, boolean Sun){
        this.taken_Mon = Mon;
        this.taken_Tue = Tue;
        this.taken_Wed = Wed;
        this.taken_Thu = Thu;
        this.taken_Fri = Fri;
        this.taken_Sat = Sat;
        this.taken_Sun = Sun;
    }

    public String getName(){
        return this.name;
    }

} 
```

然而，当我尝试这样做时，我`NotSerializableException`在`Prescription`课堂上得到了一个。这对我来说没有任何意义，因为我只使用原始数据类型和`String`.

这是我用来进行序列化的函数：

```
public boolean saveToFile(){
    try {
        FileOutputStream fos = this.context.openFileOutput(LIST_SAVE_NAME, Context.MODE_PRIVATE);
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(this.pList);
        oos.close();
    } catch(FileNotFoundException e){
        e.printStackTrace();
        return false;
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T20:00:58.350

编码：

```
public static void main(String[] args) {
    try {
        List<Prescription> d = new ArrayList<Prescription>();
        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(new File("C:\\temp\\Prescription.dat")));
        d.add(new Prescription());
        oos.writeObject(d);
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

在您发布的课程中没有任何例外，所以有些事情您没有告诉我们:-)

# tsql - T SQL - 如何从 SQL 表中的字段或列中获取一些数据

> ID：10035014
> 
> 赞同：0
> 
> 时间：2012-04-05T19:46:29.260
> 
> 标签：tsql

我需要从列中获取一些数据。

例如，我在 peter@msn.com 之类的列中有数据。我想获得 msn.com。

我怎样才能得到那个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T19:49:24.080

试试这个：

```
DECLARE @a VARCHAR(100) = 'peter@msn.com'
SELECT RIGHT(@a, LEN(@a) - CHARINDEX('@', @a)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T19:47:46.320

```
SELECT SUBSTRING(Columnname,7,LEN(Columnname)); 
```

# java - 来自“then”块的“to SearchPage”调用

> ID：10035022
> 
> 赞同：0
> 
> 时间：2012-04-05T19:47:26.587
> 
> 标签：java, grails, groovy, spock, geb

为什么下面的 Geb 测试失败并出现以下错误。我不能调用`to SearchPage`then 块吗？

```
Condition not satisfied:

to SearchPage
|
null

    at test.LogoutSpec.Verify that the logout takes the user to login page(LogoutSpec.groovy:35)

def "Verify that the logout takes the user to login page"()
    {
        given: "I successfully logged in to the application"
        to LoginPage
        loginForm.with
        {
            loginClientCode = "testingclient"
            loginSystemCode = "testingsystem"
            loginUserId = "abc"
            loginPassword = "password1"
        }
        loginButton.click()

        at SearchPage
        section == "Search Applications"

        when: "I click Log Out link from user panel"
        userPanel.logOutLink.click()

        then: "I am redirected to the LoginPage"
        at LoginPage

        and: "My session is invalidated"
        //TODO how to verify this
        to SearchPage
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T04:44:05.740

该`then`块用于断言。如果这有帮助，您可以添加另一个 when-then 并放入`to SearchPage`块中`when`。

# ruby - Ruby if 语法（两个表达式）

> ID：10035023
> 
> 赞同：3
> 
> 时间：2012-04-05T19:47:29.937
> 
> 标签：ruby, syntax, if-statement

假设您正在使用这样`if`的 Ruby 语法：

```
if foo == 3: puts "foo"
elsif foo == 5: puts "foobar"
else puts "bar"
end 
```

有没有办法让Ruby在if语句中执行两件事，比如：

```
if foo == 3
    puts "foo"
    foo = 1
elsif foo = ... 
```

我怎样才能做到这一点，以便我可以使用第一种语法放入两条语句？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T19:49:25.480

```
if foo == 3: puts "foo"; puts "baz"
elsif foo == 5: puts "foobar"
else puts "bar"
end 
```

但是，我建议不要这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T19:50:05.797

Ruby 允许用分号分隔一行中的语句，因此您可以：

```
if foo == 3: puts "foo"; puts "bar"
elsif foo == 5: puts "foobar"
else puts "bar"
end 
```

为了整洁，我可能会终止这两个语句`;`：

```
if foo == 3: puts "foo"; puts "bar";
elsif foo == 5: puts "foobar"
else puts "bar"
end 
```

除非你有充分的理由，否则我不会这样做，因为它会影响可读性。具有多个语句的普通`if`块更容易阅读。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T02:25:37.740

我认为 case 语句看起来比 if 语句好得多：

```
case foo
when 3
  puts "foo"
when 5
  puts "foobar"
else
  puts "bar"
end 
```

这允许每个条件有多个语句。

# asp.net - 两个浏览器上的相同页面和不同的会话 - ASHX

> ID：10035025
> 
> 赞同：0
> 
> 时间：2012-04-05T19:47:43.420
> 
> 标签：asp.net, session, ashx

我有 ASHX，用户在其中上传产品图片，并将上传的文件名保存在会话 [“up_pro_image”] 中。在提交时，我读取会话值并使用文件进行操作。但是如果他打开了两个页面并在两个页面上都添加了产品怎么办，我会从会话中丢失一个文件名。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:08:57.907

您可以将事件写入数据库，而不是将其保存到会话中。每个文件都可以有一个名为“IsProcessed”的标志。然后，您的代码可以查询数据库中所有未处理的文件，处理它们，然后将标志设置回数据库中。

# ldap - 如何进行 LDAP 查询，只返回所有级别的 OU=Groups 组？

> ID：10035030
> 
> 赞同：2
> 
> 时间：2012-04-05T19:48:01.140
> 
> 标签：ldap, ldap-query

如果我正在寻找 all `Groups`，我会得到太多垃圾。

如果我试图缩小基数，我得到的太少了。

这是一个例子：

```
CN=A Team,OU=Groups,OU=Americas,DC=example,DC=com
CN=B TEAM,OU=Groups,OU=EMEA,DC=example,DC=com
CN=C Team,OU=Legacy Groups,DC=example,DC=com
CN=D Team,OU=Groups,OU=Bangalore,OU=APAC,DC=example,DC=com
CN=E Team,OU=Common Groups,DC=example,DC=com 
```

我正在寻找一个`filter`返回 ABDE（没有 C）的 LDAP - 主要逻辑是让我得到所有最后一个`OU=Groups`或`OU=Common Groups`

我目前的搜索正在使用：

```
 Search base: CN=Users,DC=citrite,DC=net
 Filter: (objectCategory=Group) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T09:54:07.453

首先，在 Microsoft Active Directory 上不可能在单个搜索中执行此操作，这是因为 AD 不完全兼容 LDAP。

符合 LDAP 的服务器支持`extensible-match`提供必要过滤的过滤器。来自[RFC4511](https://www.rfc-editor.org/rfc/rfc4511#section-4.5)：

> 如果 dnAttributes 字段设置为 TRUE，则匹配附加地应用于条目的可分辨名称中的所有 AttributeValueAssertions，并且如果可分辨名称中至少有一个属性或子类型过滤器项评估为 TRUE，则它评估为 TRUE . dnAttributes 字段的存在是为了减轻对通用匹配规则（例如单词匹配）的多个版本的需求，其中一个适用于条目，另一个适用于条目和 DN 属性。

请注意，*可扩展匹配*过滤器技术仅适用于符合 LDAP 的服务器，而 AD 不是其中之一。

例如，我将以下条目添加到服务器：

```
dn: ou=legacy groups,o=training
objectClass: top
objectClass: organizationalUnit
ou: legacy groups

dn: ou=common groups,o=training
objectClass: top
objectClass: organizationalUnit
ou: common groups

dn: ou=groups,o=training
objectClass: top
objectClass: organizationalUnit
ou: groups

dn: cn=a,ou=common groups,o=training
objectClass: top
objectClass: groupOfUniqueNames
uniqueMember: uid=user.0,ou=people,o=training
cn: a

dn: cn=b,ou=groups,o=training
objectClass: top
objectClass: groupOfUniqueNames
uniqueMember: uid=user.0,ou=people,o=training
cn: b

dn: cn=c,ou=legacy groups,o=training
objectClass: top
objectClass: groupOfUniqueNames
uniqueMember: uid=user.0,ou=people,o=training
cn: c 
```

添加上述条目后，在以下搜索中检查过滤器：

```
ldapsearch --propertiesFilePath ds-setup/11389/ldap-connection.properties \
    --baseDN o=training \
    --searchScope sub '(|(ou:dn:=groups)(ou:dn:=common groups))' 1.1

dn: ou=common groups,o=training

dn: cn=a,ou=common groups,o=training

dn: ou=groups,o=training

dn: cn=b,ou=groups,o=training 
```

请注意，`ou=common groups`返回`ou=groups`, 及其下属，但不返回 `ou=legacy groups`和下属。

*此示例使用 ldapsearch 命令行工具的现代语法。如果用户使用的是旧的 OpenLDAP 版本的 ldapsearch，命令行工具的参数会有些不同，但这并不重要。重要的是过滤器。*

# sass - 使用 SASS 使用元素扩展选择器

> ID：10035031
> 
> 赞同：0
> 
> 时间：2012-04-05T19:48:13.643
> 
> 标签：sass

我正在研究 SCSS 样式表，并且我有一个看起来像这样的规则：

```
.footer-link-row {
    color: red;
    ul& {
        padding: 0;
    }
} 
```

我希望将`ul&`行编译到选择器`ul.footer-link-row`。但是，此选择器返回编译器错误，并使用`&ul`compiles to `.footer-link-row ul`. 选择这样的东西的正确方法是什么？

--已添加--
澄清一下，我想要的最终 CSS 是：

```
.footer-link-row {
    color: red;
}
ul.footer-link-row {
    padding: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:12:13.530

您想要以下内容：

```
ul {
  padding: 0;
  .footer-link-row {
    color: red;
  }
} 
```

和号用于要求两个选择器匹配

```
a { text-decoration: none;
  &:hover { border-width: 1px }
}
// compiles to 
a {
  text-decoration: none;
}
a:hover {
  border-width: 1px;
} 
```

如果你想要 ul.footer-link-row 试试

```
ul {
  &.footer-link-row {
    padding: 0;
  }
  .footer-link-row {
    color: red;
  }
} 
```

您的澄清表明您需要两个范围。

```
ul {
  &.footer-link-row {
    padding: 0;
  }
}

.footer-link-row {
  color: red;
} 
```

# java - 用java在pc上使用macbook键盘

> ID：10035033
> 
> 赞同：0
> 
> 时间：2012-04-05T19:48:22.580
> 
> 标签：java, sockets, io

我有一台 Windows PC 连接到我的电视，但由于某些原因我无法使用它的键盘，所以我决定使用我的 macbook 键盘 + 一些 Java。我已经实现了一个小套接字应用程序，它将我的键盘输入发送到 serversocket 上的 pc，但是如何在 Windows 应用程序（Visual Studio、记事本、浏览器等）中使用它在 PC 端的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:16:12.567

该类[`java.awt.Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)可用于生成鼠标和键盘事件。

# android - 布局xml文件android中找不到资源错误

> ID：10035036
> 
> 赞同：4
> 
> 时间：2012-04-05T19:48:37.990
> 
> 标签：android, xml, layout, resources

我经常在 xml 文件中收到此错误。这是xml文件中的代码

```
 <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:layout_centerHorizontal="true"
        android:layout_above="@id/tRowMain"   // in this line i get error resource not found that matches given name
        android:textColor="@color/selectLevel"
        android:id="@+id/tvOnOption"
        android:text="Select Mode"
        />      
    <TableRow android:layout_width="fill_parent" android:id="@+id/tRowMain"
    android:layout_height="wrap_content" android:gravity="center" android:layout_centerVertical="true" android:layout_centerHorizontal="true" > 
```

//然后我签入 R.java 文件，并且该名称的 id 在那里

```
public static final class id {
        public static final int ibtn_retry=0x7f060006;
        public static final int rLayoutMain=0x7f060000;
        public static final int tRowMain=0x7f060002;

    } 
```

请帮我弄清楚这有什么问题......

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T19:53:38.280

您应该在使用`@+id/tRowMain`ID 的第一个位置使用语法，而不一定是第一个将其定义为元素 ID 的位置。

改变：

`android:layout_above="@id/tRowMain"`至`android:layout_above="@+id/tRowMain"`

和

`android:id="@+id/tRowMain"`至`android:id="@id/tRowMain`

换句话说，在决定是否使用`@+id`or`@id`时，将 id 分配给哪个属性并不重要。总是`@+id`在您第一次在 XML 中提及您的 ID 时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T19:54:13.383

```
android:layout_above="@+id/tRowMain" 
```

如果它不起作用，请删除您的 R.java 文件。会重新生成

# c# - 在不应使用 zip 时使用 ICSharpCode.SharpZipLib.Zip 子文件夹

> ID：10035039
> 
> 赞同：2
> 
> 时间：2012-04-05T19:49:04.890
> 
> 标签：c#, compression, zip, sharpziplib

我正在使用图书馆`ICSharpCode.SharpZipLib.Zip`；

我的代码如下：

*   路径是根。`\\ALAWP\\THIS\\ACORD\\`
*   我将它们压缩到`ZIPDirectory`

但是，当它完成时，文件没有被命名`acord_combined.txt`，而是被称为`ACORD\acord_combined.txt`

我究竟做错了什么？

```
public void CleanRoot()
{
    DirectoryInfo RootDi = new DirectoryInfo(FilePrep.RootDirectory);
    string ZipDirectory = FilePrep.RootDirectory + "\\processed\\AceKey"+ DateTime.Now.ToString("yyyyMMdd_H;mm;ss") +".zip";

    ZipOutputStream NewZipOutput = new ZipOutputStream(File.Create(ZipDirectory));

    foreach (FileInfo fi in RootDi.GetFiles("acord*.*"))
    {
        Compress(ref NewZipOutput, fi);
        //MoveFile(fi.FullName,ZipDirectory);
    }

    NewZipOutput.Finish();
    NewZipOutput.Close();
}

public void Compress(ref ZipOutputStream ZipFolder, FileInfo fi)
{
    try
    {
       FileStream fsFileToBeZipped = fi.OpenRead();

       ZipEntry entry = new ZipEntry(fi.FullName);
       ZipFolder.PutNextEntry(entry);
       int size = 2048;
       byte[] buffer = new byte[size];

       while (true)
       {
          size = fsFileToBeZipped.Read(buffer, 0, buffer.Length);

          if (size > 0)
             ZipFolder.Write(buffer, 0, size);
          else
             break;
       }   //end while ( true )

       fsFileToBeZipped.Close();

       //prepare and delete file
       fi.Attributes = FileAttributes.Normal;
       //fi.Delete();
   }   //end try
   catch (Exception e)
   {
        Console.WriteLine("Error zipping File.  Error - " + e.Message);
   }   //end catch
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:30:11.797

你的问题就在这里

```
new ZipEntry(fi.FullName); 
```

zipEntry 的参数是 zip 文件中的路径，而不是压缩数据的完整路径。通常 zip 库（例如 7zip 和 SharpZip）公开了一种创建“入口路径”的方法，但写入 zip 的实际数据来自完整路径。

可能你想要的是

```
 new ZipEntry(Path.GetFileName(fi.fullName)) 
```

# ruby-on-rails - 如何判断急切加载是否有效？

> ID：10035040
> 
> 赞同：0
> 
> 时间：2012-04-05T19:49:12.157
> 
> 标签：ruby-on-rails, eager-loading, nested-resources

所以我有一个充满帖子的论坛帖子，我想急切地从帖子和那些用户角色中加载用户，以减少数据库查询的总数（这似乎是做事的最佳方式）

（为了让事情变得更有趣，论坛和帖子是嵌套资源，如果有区别的话）

```
def show
  @forum = Forum.find(params[:forum_id])
  @posts = @forum.posts.includes(:user => :role).where('id = ? OR parent_post_id =?',params[:id], params[:id])
end 
```

页面呈现，但我无法通过查看控制台来判断它是否真的减少了查询数量。控制台对 CACHE 的查询数量似乎略有减少，但 Load 调用保持稳定。我这样做对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:53:08.157

是的，我想是的，如果急切加载成功，查询数会减少。如果您使用的是 MYsql，我建议您使用“query_reviewer”。（[https://github.com/dsboulder/query_reviewer](https://github.com/dsboulder/query_reviewer)）它​​将显示您为打开页面执行了多少查询。

# security - 具有两因素身份验证的 SVN

> ID：10035041
> 
> 赞同：2
> 
> 时间：2012-04-05T19:49:19.663
> 
> 标签：security, svn, authentication

我在一个具有严格安全要求的组织工作，有时甚至过于严格。我的项目团队正在尝试创建一个 SVN 存储库，但我们在设置一个以满足我们的需求和安全要求时遇到了困难。

我们的 IT 部门要求我们使用两因素身份验证来验证自己。每个开发人员都有一个 RSA 令牌，必须使用该令牌通过 SSH 登录到存储库主机。令牌上显示的值每分钟更改一次，每个值只能使用一次。

开发人员需要存储密码的能力。这使我们无法使用`svn+ssh`登录到存储库。由于 RSA 令牌每分钟更改一次，因此我们无法存储 SSH 密码。更糟糕的是，RSA 令牌会使我们每分钟减少一次 SVN 操作。这是完全不可接受的，特别是因为我们有将多个 SVN 操作链接在一起的脚本。

我们试图通过打开带有端口转发的 SSH 隧道来进行妥协。我们将打开一条隧道，`ssh user@hostmachine -L 3690:localhost:3690`用于将本地机器上的所有 SVN 请求转发到`svnserve`正在运行进程的安全机器。这意味着我们可以使用双重身份验证登录，然后在我们的实用程序中使用单独的 SVN 用户名和密码（可以存储）。

不幸的是，我们注意到我们不需要隧道。主机名可见的任何计算机都可以使用端口 3690。这对 IT 来说是不可接受的，我们的系统管理员认为这`svnserve`是问题所在，所以她想知道我们是否必须回到`svn+ssh`.

有没有可行的解决方案？我们的系统管理员正确吗？是否有一个选项`svnserve`会强制它只监听来自本地主机的流量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T21:28:35.777

利用：

`svnserve -dr /my/repo --listen-host 127.0.0.1`

这样服务将只监听环回接口。当您使用 ssh 连接时，请使用：

`ssh -L3690:127.0.0.1:3690 user@svnserver.mycompany.com`

另见：

```
vince@f12 ~ > svnserve --help
usage: svnserve [-d | -i | -t | -X] [options]

Valid options:
  -d [--daemon]            : daemon mode
  -i [--inetd]             : inetd mode
  -t [--tunnel]            : tunnel mode
  -X [--listen-once]       : listen-once mode (useful for debugging)
  -r [--root] ARG          : root of directory to serve
  -R [--read-only]         : force read only, overriding repository config file
  --config-file ARG        : read configuration from file ARG
  --listen-port ARG        : listen port
                             [mode: daemon, listen-once]
  --listen-host ARG        : listen hostname or IP address
                             [mode: daemon, listen-once]
  -T [--threads]           : use threads instead of fork [mode: daemon]
  --foreground             : run in foreground (useful for debugging)
                             [mode: daemon]
  --log-file ARG           : svnserve log file
  --pid-file ARG           : write server process ID to file ARG
                             [mode: daemon, listen-once]
  --tunnel-user ARG        : tunnel username (default is current uid's name)
                             [mode: tunnel]
  -h [--help]              : display this help
  --version                : show program version information 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:29:26.147

svnserve 可能有仅在 localhost 上侦听的选项，但这听起来像是防火墙配置问题。

如果端口 3690 不能从外部访问，则应被防火墙阻止。svnserve 或其他任何东西是否在该端口上侦听都无关紧要。svnserve 然后可以继续在 3690 上侦听，但只会接收来自 localhost 的连接，因为其他连接被防火墙阻止。

# c# - 如何使用c#代码更改ppt表格单元格的背景颜色？

> ID：10035042
> 
> 赞同：2
> 
> 时间：2012-04-05T19:49:20.647
> 
> 标签：c#

我在下面编写了一段代码，以使用 c# 代码更改 ppt 表格单元格的背景颜色，但没有任何反应：

```
//creating powerpoint aaplication
PowerPoint.Application pptApp = new PowerPoint.Application();
pptApp.Visible = Office.MsoTriState.msoTrue;
var pptPresent = pptApp.Presentations;
var fileOpen = pptPresent.Open(@file, Office.MsoTriState.msoFalse, Office.MsoTriState.msoTrue, Office.MsoTriState.msoTrue);
// getting first slide
PowerPoint.Slide objSlide = fileOpen.Slides[1];
PowerPoint.Shapes item = objSlide.Shapes;
// getting first shape
var shape1 = item[1];
// check if shape is table
if (shape1.HasTable == Office.MsoTriState.msoTrue)
{
    // change the table cell to red color
    shape1.Table.Cell(2, 5).Shape.Fill.BackColor.RGB = System.Drawing.Color.Red.ToArgb();
    // make it visible
    shape1.Fill.Visible = Office.MsoTriState.msoTrue;
}
// saving the ppt
fileOpen.SaveAs(openFolder + subStr + ".pptx",PowerPoint.PpSaveAsFileType.ppSaveAsDefault,Office.MsoTriState.msoTrue);
// close the ppt
fileOpen.Close(); 
```

上面的代码没有按预期工作，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T20:30:28.007

要更改单元格颜色，需要使用 ForeColor 而不是 BackColor。绘制颜色可能无法按预期工作。要改变这一点，请使用 ColorTranslator。

```
shape1.Table.Cell(2, 5).Shape.Fill.ForeColor.RGB = System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.Red); 
```

# emscripten - 错误：未知参数：Emscripten 中的“-nostdsysteminc”

> ID：10035045
> 
> 赞同：3
> 
> 时间：2012-04-05T19:49:23.237
> 
> 标签：emscripten

我正在阅读 emscripten 的教程 - [https://github.com/kripken/emscripten/wiki/Tutorial](https://github.com/kripken/emscripten/wiki/Tutorial)

到目前为止，我已经下载了源代码并安装了依赖项并适当地设置了我的 .emscripten 设置文件。

以下是设置：

```
# This file will be copied to ~/.emscripten if that file doesn't exist. Or, this is     that copy.
# IMPORTANT: Edit the *copy* with the right paths!

#EMSCRIPTEN_ROOT = os.path.expanduser('~/Dev/emscripten') # this helps projects using emscripten find it
EMSCRIPTEN_ROOT = os.path.expanduser('~/softwares/kripken-emscripten-12e45ea')

#LLVM_ROOT = os.path.expanduser('~/Dev/llvm-3.0/cbuild/bin')
LLVM_ROOT = os.path.expanduser('/usr/bin')

# See below for notes on which JS engine(s) you need
NODE_JS = 'node'
SPIDERMONKEY_ENGINE = [os.path.expanduser('~/Dev/mozilla-central/js/src/js'), '-m', '-n']
V8_ENGINE = os.path.expanduser('~/Dev/v8/d8')

TEMP_DIR = '/tmp'

########################################################################################################

# Pick the JS engine to use for running the compiler. This engine must exist, or
# nothing can be compiled.
#
# Recommendation: If you already have node installed, use that. Otherwise, build v8 or
#                 spidermonkey from source. Any of these three is fine, as long as it's
#                 a recent version (especially for v8 and spidermonkey).

COMPILER_ENGINE = NODE_JS
#COMPILER_ENGINE = V8_ENGINE
#COMPILER_ENGINE = SPIDERMONKEY_ENGINE

# All JS engines to use when running the automatic tests. Not all the engines in this list
# must exist (if they don't, they will be skipped in the test runner).
#
# Recommendation: If you already have node installed, use that. If you can, also build
#                 spidermonkey from source as well to get more test coverage (node can't
#                 run all the tests due to node issue 1669). v8 is currently not recommended
#                 here because of v8 issue 1822.

JS_ENGINES = [NODE_JS, SPIDERMONKEY_ENGINE] 
```

但是，当我使用以下命令在测试目录中的测试程序中运行 emcc 时：

```
./emcc tests/hello_world.cpp 
```

我收到错误消息：

```
error: unknown argument: '-nostdsysteminc'
emcc: compiler frontend failed to generate LLVM bitcode, halting 
```

我无法理解为什么会发生此错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:49:45.317

您可能正在使用 3.0 之前的 clang 版本。

要检查您的版本，请运行：

```
clang --version 
```

我发现我的版本是 2.8，因为我是在 Ubuntu 11.04 上通过 apt-get 安装的；一旦我更新到 clang 3.0，这个错误就消失了。

# c# - 字典 ContainsKey 方法

> ID：10035048
> 
> 赞同：1
> 
> 时间：2012-04-05T19:49:45.490
> 
> 标签：c#, dictionary, contains

请解释为什么字典的“getAt”方法失败

```
List<BString> infoKeys = new List<BString>(infoDict.Keys); 
if (infoKeys.Contains(TorrentFileKeyWords.FILES_KEY) == true) //"files"
{   
        List<BaseType> multiFiles = ((BList)dict[TorrentFileKeyWords.FILES_KEY]).Value; <<< this fails 
```

所以 infoDict 是 infoDict 上的`Dictionary<String, BString>` Contains。Keys 用于查找特定项目（BString 类型）但第 4 行失败......没有 sens

我不使用 c#.. 所以我必须重写哪些方法（现在我有：GetHashCode、==、！= 和等于）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T19:56:38.000

您不需要将您的复制`Keys`到新列表来执行查找。实际上，您可以使用以下方法检查字典中是否存在键*并*在单个操作中检索其关联值`TryGetValue`：

```
BList bList;
if (dict.TryGetValue(TorrentFileKeyWords.FILES_KEY, out bList))
{
    List<BaseType> multiFiles = bList.Value;
    // use multiFiles here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T19:54:50.010

我怀疑问题是您`infoDict`在一个地方使用，而`dict`在另一个地方使用......

目前尚不清楚为什么您要从 的 键创建列表，`infoDict`而不仅仅是调用`ContainsKey`，或者（更好地）使用`TryGetValue`开始。此外，我建议*不要*为您的类型名称添加“B”前缀。

# objective-c - Xcode 中的调试属性

> ID：10035050
> 
> 赞同：0
> 
> 时间：2012-04-05T19:49:49.170
> 
> 标签：objective-c, ios, xcode

所以我有一些我正在使用的示例代码中使用的属性。尤其是 UIView 类的“标签”属性。现在我设置了这个属性，如果我`NSLog`设置了，或者根据标签的值设置控制语句，我可以看到我设置的值在那里，并且按预期执行。

但是，如果我将鼠标悬停在 .tag 上以查看存在哪个标记值，我从 Xcode 中什么也得不到。没有弹出显示值。然后我转到自动/本地/所有窗口并尝试“添加表达式...”（似乎这是设置传统“监视”变量的唯一方法，如果有其他方法，请告诉我）。无论如何，所以我将我的 object.tag 放入“监视”窗口，它是空白的。没有价值。它不是零，它什么都不是，就好像它不存在一样。

当然，如果我将鼠标悬停在“object.tag”的“object”部分上，那么我会弹出一个带有展开三角形的对象，然后我会去寻找“_tag”（这似乎是底层实例变量）。

那么这有什么难的呢？为什么仅将鼠标悬停在调试期间无法查看标签属性？这与 Xcode 开发中的属性有关吗？

我正在运行 Xcode 4.3.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:31:46.933

`tag`与任何其他 Objective-C 属性一样，该属性是一种语法糖。事实上，属性被实现为访问器方法，而访问器方法又被转换为`objc_msgSend()`函数调用。这种机制与访问结构字段完全不同。

调试器基本上可以显示结构中的任何字段，因为它不需要任何特殊知识并且没有任何后果。只需要结构定义。另一方面，获取 Objective-C 属性的值需要在进程上下文中执行代码。您可以在调试器控制台中手动执行此操作，但调试器不会自动执行此操作。

我认为这在理论上仍然可以*在孤立的情况下*进行，但非常困难。考虑执行访问器方法更改对象的内部状态的情况。例如，调用`-[UIViewController view]`（访问其`view`属性）会导致加载视图。可能还会调用委托方法等。在这种情况下，将鼠标悬停在 IDE 中的属性上会改变进程的执行状态，从而使调试本身成为一个笑话。

# javascript - jQueryUI 对话框错误？

> ID：10035058
> 
> 赞同：1
> 
> 时间：2012-04-05T19:50:26.020
> 
> 标签：javascript, jquery, jquery-ui, dialog, overlay

这是 jQueryUI 对话框中的错误，还是有某种原因会发生这种情况？

## [JSFiddle](http://jsfiddle.net/6wXer/)

那个小提琴上的标题栏太大了。

请注意，如果您调整大小，它会弹回正确的位置。

作为记录，html：

```
<div id="wrapper"><textarea></textarea></div> 
```

CSS：

```
#wrapper {
    float: left;
    width: 40%;
    height: 30%;
    font-size: 15px;
}​ 
```

js：

```
$('<div title="the title">content</div>').dialog();​ 
```

有没有办法解决？我可以手动调用`resize`回调吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T19:53:51.647

尝试更新的样式表。**[jsFiddle 示例](http://jsfiddle.net/j08691/6wXer/4/)**。您正在链接到 ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css，最新的是 1.8.18 (http://ajax.googleapis.com/ajax /libs/jqueryui/1.8.18/themes/base/jquery-ui.css）。

# c# - 如何在安装时在 Visual Studio 部署项目中添加包含可执行路径的注册表值

> ID：10035061
> 
> 赞同：1
> 
> 时间：2012-04-05T19:50:59.837
> 
> 标签：c#, visual-studio, deployment, properties, installation

我知道 [TARGETDIR] 会给我安装**目录**，但我也想要*可执行文件的名称*。我认为它应该类似于 [TARGETDIR][OUTPUTPATH] 或者可能只是 [OUTPUTPATH]，但我在安装程序属性中找不到包含我正在安装的可执行文件名称的任何内容。

我需要这些信息在安装时放入注册表。我知道我可以通过我的项目中的自定义操作来做到这一点，但如果可以的话，我宁愿只使用安装程序属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:37:38.787

我认为 [AssemblyPath] 可能有效
（如果我没记错的话，不要在我面前测试它）

# apache-flex - 如何在现有的 flex 对象中添加额外的名称-值对

> ID：10035062
> 
> 赞同：0
> 
> 时间：2012-04-05T19:51:00.463
> 
> 标签：apache-flex, object

伙计们，我有一个关于向 Flex 中的现有对象添加额外的名称-值对的问题；

我有一个对象类型的 object1，我声明了一个新的 object2 = object1 加上一些额外的名称-值对，有没有办法将新的名称-值对附加到现有对象？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:00:38.813

如果我正确理解您的问题，object2 是指向 object1 的引用指针；因此，对 object2 的更改会影响 object1：

```
package
{
    import flash.display.Sprite;

    public class X extends Sprite
    {
        public function X()
        {
            var object1:Object = {a: "1", b: "2"};

            var object2:Object = object1;

            object2.c = 3;

            trace("Object 2:");
            for (var name:String in object2)
            {
                trace("Name: " + name + " = " + object2[name]);
            }

            trace("Object 1:");
            for (var name:String in object1)
            {
                trace("Name: " + name + " = " + object1[name]);
            }
        }
    }
} 
```

...输出：

```
Object 2:
Name: a = 1
Name: c = 3
Name: b = 2
Object 1:
Name: a = 1
Name: c = 3
Name: b = 2 
```

如果您询问是否可以克隆对象或动态类，您可以使用如下函数：

```
public function cloneObject(object:Object):Object
{
    var newObject:Object = {};

    for (var name:String in object)
    {
        newObject[name] = object[name];
    }

    return newObject;
} 
```

# web - 我的 VS 2005 网站项目是什么版本？

> ID：10035063
> 
> 赞同：1
> 
> 时间：2012-04-05T19:51:04.417
> 
> 标签：web, visual-studio-2005, web-site-project

我认为这会更容易验证，但我已经有一段时间没有使用 VS 2005 了。我有一个网站（不是*Web 应用程序*）项目，我正在尝试解决其中的一些错误，并且我想验证 .net 运行时版本。

我发现的唯一提示是在属性页的参考部分。有对 System.Windows.Forms v 2.0.0.0 的引用。这是我的答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:58:57.947

我相信是的，但请检查您的`Web.config`文件。由于网站没有 .vbproj 文件，`Web.config`因此是此处唯一相关的文件。这是 VS 存储您在属性页中看到的引用的地方。

# python - Django-admin-tools 媒体/CSS 样式未加载

> ID：10035066
> 
> 赞同：1
> 
> 时间：2012-04-05T19:51:22.837
> 
> 标签：python, django, django-admin-tools

我正在尝试使用 mod_wsgi 和 Apache2 部署我的 Django 项目，但我无法弄清楚为什么没有加载管理 CSS 样式。我已经使用 Django-admin-tools 作为应用程序来增强管理界面的外观，并且它在开发服务器上运行良好，但是在部署过程中出现了样式问题。

服务器上的项目路径是：

```
'/srv/www/myapp/'
'/srv/www/myapp/media/admin_tools/css|js|images' 
```

setting.py 包含：

```
MEDIA_ROOT = '/srv/www/myapp/media/' 
# also tried MEDIA_ROOT = '/srv/www/myapp/media/admin_tools/'

MEDIA_URL = 'http://myserverip:80/media/'
STATIC_ROOT = '/srv/www/myapp/static'
STATIC_URL = '/static/'
ADMIN_MEDIA_PREFIX = '/media/'  
# also tried ADMIN_MEDIA_PREFIX = '/media/admin_tools/'

STATICFILES_DIRS = (
'/srv/www/myapp/projectstatic' )

TEMPLATE_DIRS = (
'/srv/www/myapp/templates' )

INSTALLED_APPS = (
'admin_tools',
'admin_tools.theming',
'admin_tools.menu',
'admin_tools.dashboard',
'django.contrib.auth',
#Many other applications )

ADMIN_TOOLS_INDEX_DASHBOARD = 'myapp.dashboard.CustomIndexDashboard'
ADMIN_TOOLS_APP_INDEX_DASHBOARD = 'myapp.dashboard.CustomAppIndexDashboard'
ADMIN_TOOLS_THEMING_CSS = '/srv/www/myapp/media/admin_tools/css/theming.css'
ADMIN_TOOLS_MENU = 'myapp.menu.CustomMenu' 
```

网址.py：

```
urlpatterns = patterns('',
url(r'^admin_tools/', include('admin_tools.urls')),
) 
```

django.wsgi: (这个文件的路径是'/srv/www/myapp/apache/django.wsgi')

```
import os
import sys

path = '/srv/www/'

if path not in sys.path:
    sys.path.insert(0, '/srv/www/')

sys.path = ['/srv/www/myapp'] + sys.path
sys.path.append('/usr/local/lib/python2.7/dist-packages/registration/backends')
os.environ['DJANGO_SETTINGS_MODULE'] = 'myapp.settings'
print >> sys.stderr, sys.path

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:17:18.323

在“/srv/www/myapp/apache/”目录中，您可能需要创建另一个 conf 文件。对于这个例子，我将使用 apache_django_wsgi.conf。在该文件中获取 /etc/apache2/httpd.conf 中的所有内容并复制到 apache_django_wsgi.conf 并将其替换为

```
LoadModule wsgi_module modules/mod_wsgi.so
include "/srv/www/myapp/apache/apache_django_apache.conf" 
```

现在提供管理文件：在 apache_django_apache.conf 中为您的管理文件添加和别名：示例

```
Alias /admin_media/ /path/to/admin_media
<Directory "admin_media">
Order allow,deny
Options Indexes
Allow from all
IndexOptions FancyIndexing
</Directory> 
```

# macos - NSData 大小和 NSUserDefaults

> ID：10035070
> 
> 赞同：1
> 
> 时间：2012-04-05T19:51:52.367
> 
> 标签：macos, cocoa, nsuserdefaults

是否有任何理由将 NSData 对象说 ~50MB 存储到 NSUserDefaults 中可能是个坏主意？

文档中没有任何关于它的[内容](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)，但是每当我看到使用 NSUserDefaults 时，它通常用于相当少量的数据。我认为存储在 NSUserDefaults 中比存储在文件中更简单，所以我想尽可能使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T19:57:54.640

1.  由于 NSUserDefaults 将对象存储为属性列表，因此它可能会使用文本 (XML) 格式的 plist 而不是二进制的。在这种情况下，NSData 会将整数描述发送到文件中，该文件比其实际大小大 2 倍，因为它实际上是数据的十六进制表示（加上空格填充等......）

2.  它在概念上被滥用/滥用。用户默认值是用户的默认值。也就是说，它们应该用于存储首选项/设置，而不是整个文件。这就是文件处理 API（C stdio 函数、NSFileHandle 等）的任务

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T19:58:03.117

因为将 50 MB 的二进制数据与属性列表相互转换是非常低效的。在这种情况下，直接文件 IO 是唯一明智的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T20:18:07.930

您的应用程序`NSUserDefaults`域作为 XML 属性列表写入磁盘。当 XML plist 包含 NSData 时，数据以十六进制文本表示（加上一些空格以提高可读性）——数据中的每个字节变成两个文本字符，因此 50 MB 数据变成 100 MB。

更重要的是，属性列表不是随机访问文件：如果您（或者在这种情况下，Apple 的实现`NSUserDefaults`）想要读取磁盘上属性列表中的值，则读取并解析整个文件以创建一个`NSDictionary`. 如果您进行更改并希望将其保留到磁盘，则整个字典将被序列化并写入文件。因此，读取和解析或序列化和写入 100 MB 文件比 1 kB 文件花费更长的时间。这将在您（或 Apple 框架中的某些代码，因为它们`NSUserDefaults`有时在内部使用）调用`-[NSUserDefaults synchronize]`时发生，这可能在您的应用程序的生命周期中多次发生。

如果您已经拥有一个 NSData，那么您自己将其放入文件中并不难——这就是`-[NSData initWithContentsOfFile:]`目的`-[NSData writeToFile:atomically:]`。（在应用程序的 docs 目录中获得读/写路径只需一两行；有关几个示例，请参阅 Xcode 项目模板。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T20:23:49.773

任何其他访问用户默认值的应用程序都必须花费时间来读取和解析您的 100 MBytes。

# asp.net - ASP.net 视图状态

> ID：10035072
> 
> 赞同：2
> 
> 时间：2012-04-05T19:52:00.613
> 
> 标签：asp.net, .net, .net-3.5

asp.net 在哪里测试视图状态是否有效，如果它无效会发生什么？

我必须自己验证 ViewState 吗？

ASP.NET 3.5

BR 谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T20:05:40.057

> asp.net 在哪里测试视图状态是否有效，如果它无效会发生什么？

如果 ViewState 无效，您将收到异常。

ViewState 在页面回发时进行验证，并且发生在 Page_Load（下图中的 LoadViewState 绿色框）事件引发之前。[在这里阅读。](http://msdn.microsoft.com/en-us/library/ms972976.aspx)更多细节

![在此处输入图像描述](../Images/720b0fa4502047b7628f4c591234ab8c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:06:56.270

我只能推荐你阅读这篇关于 ViewState 和 ASP.NET 生命周期的优秀文章。它让我大开眼界，我认为它会帮助您了解 ViewState 的工作原理。它有一个关于验证和安全性的部分：

[http://msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

# c# - 如何在 Xna 中整体移动模型？

> ID：10035073
> 
> 赞同：1
> 
> 时间：2012-04-05T19:52:01.867
> 
> 标签：c#, model, matrix, xna-4.0, blender

我有一个在 Blender 中制作的模型，里面有单独的网格。当我将它放入 Xna 项目并尝试通过矩阵平移移动模型时，所有单独的网格都会朝着不同的方向移动。我的代码基本上单独更新每个网格。我应该使用更好的代码来使模型的网格一起移动吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:10:29.100

如果你这样称呼：

```
 private void DrawModel(Model model, Matrix worldMatrix)
    {
        //Matrix array for number of bones
        Matrix[] modelTransformations = new Matrix[model.Bones.Count];

        //Put bones into matrix array
        model.CopyAbsoluteBoneTransformsTo(modelTransformations);

        //for every model
        foreach (ModelMesh mesh in model.Meshes)
        {
            foreach (BasicEffect effect in mesh.Effects)
            {
                //Add default lighting
                effect.EnableDefaultLighting();

                //Set default postion
                effect.World = modelTransformations[mesh.ParentBone.Index] * worldMatrix;

                //Set view
                effect.View = camera.viewMatrix;

                //Set projection
                effect.Projection = camera.projectionMatrix;
            }

            //Draw Model
            mesh.Draw();
        }
    } 
```

然后像这样翻译你输入的世界矩阵：

```
modelWorld *= Matrix.CreateTranslation(XDir, YDir, ZDir); 
```

你应该没有问题。至少，我是这样做的。

# function - 如何在 Matlab 中使用函数 text() 更改字体的颜色？

> ID：10035074
> 
> 赞同：1
> 
> 时间：2012-04-05T19:52:13.797
> 
> 标签：function, matlab, text, colors

```
marker={'r','b','g'};
for i=1:size(X,3)
    for r=1:size(X,1)
        for c=1:size(X,2)
            text(X(r,c,i),Y(r,c,i),Z(r,c,i),num2str(dof(c,r,i)))
        end
    end
end 
```

对于 的每个值`i`，我想使用不同的颜色`marker`来绘制`num2str(dof(c,r,i))`。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:01:56.183

我现在在错误的计算机上（没有用于测试的 matlab），但是

> 文本（X（r，c，i），Y（r，c，i），Z（r，c，i），num2str（dof（c，r，i）），'颜色'，标记{i}）

应该管用。但是，如果 size(X,1)>3 这种方式会有问题。

# c++ - java lwuit 移植到 C++

> ID：10035075
> 
> 赞同：0
> 
> 时间：2012-04-05T19:52:14.317
> 
> 标签：c++, lwuit

我在 lwuit-incubator (https://svn.java.net/svn/lwuit-incubator~svn trunk/telmap.) 中找到了一个 lwuit 到 c++ 的端口。但由于缺少一些标头，我无法编译它文件，如 "cmpl.h" 、 "TMArray.h" 、 "TMVector.h" "SmartPointer.h" 。

以前有没有人尝试过使用 c++ 实现来实现 lwuit？或者在搁浅的 c++ 中是否有 lwuit 的等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T12:02:29.327

我建议您为此使用[代号一](http://www.codenameone.com)（免责声明：我们编写了代号一）。

据我所知，Telmap 之外没有人使用该端口，该端口是基于 LWUIT 1.1+ 的，该版本已经很长了，并且在应用商店或 Windows 市场上获得该级别的东西的机会几乎为零。

该端口不支持垃圾收集，仅使用引用计数，Telmap 使用它来针对 JVM 实现非常糟糕的旧 Symbian 设备。

# android - 如何在模拟器本身查看存储在 sdcard 中的数据？

> ID：10035077
> 
> 赞同：1
> 
> 时间：2012-04-05T19:52:29.573
> 
> 标签：android, sqlite, android-emulator

我有一个将数据存储在应用程序数据库中的应用程序...我编写了代码以将应用程序数据发送到在模拟器中创建的 sdcard...数据文件已传输到 sd 卡，我可以在 eclipse 中查看...但是我如何在**模拟器**中看到该文件？？它保存在哪里？

我用来转移的代码如下

```
 try 
                        {
                            File sd = Environment.getExternalStorageDirectory();
                            File data = Environment.getDataDirectory();

                            if (sd.canWrite()) 
                            {
                                String currentDBPath = "\\data\\sharath.android.trail\\databases\\griet1";
                                String backupDBPath = "sdcard_db";
                                File currentDB = new File(data, currentDBPath);
                                File backupDB = new File(sd, backupDBPath);

                                if (currentDB.exists()) {
                                    FileChannel src = new FileInputStream(currentDB).getChannel();
                                    FileChannel dst = new FileOutputStream(backupDB).getChannel();
                                    dst.transferFrom(src, 0, src.size());
                                    src.close();
                                    dst.close();
                                }
                                boolean bool=true;
                                if(bool == true)
                                {
                                    Toast.makeText(Trial1Activity.this, "Backup Complete", Toast.LENGTH_SHORT).show();
                                    bool = false;
                                }
                            }               
                        } 
                        catch (Exception e) {
                            Log.w("Settings Backup", e);
                        }
                    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T19:56:14.440

如果您在 Eclipse 中工作，Android 插件中有一个内置的文件资源管理器。你可以通过去访问它

窗口 > 显示视图... > 其他 > Android > 文件资源管理器

# c# - 编辑主键

> ID：10035080
> 
> 赞同：3
> 
> 时间：2012-04-05T19:52:44.207
> 
> 标签：c#, asp.net, asp.net-mvc-3

如果表只包含一个主键字段，有没有办法在 MVC3 中编辑主键。例如，我有一个控制台表，其中我将控制台名称作为主键，我希望能够编辑它并更改它并保存编辑后的值。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T19:58:46.823

作为一般规则，您永远不应该编辑主键。SQL Server 中的主键通常有一个聚集的唯一索引，因此编辑主键意味着您可能必须重建索引（可能不是每次，但取决于偏差）。

相反，我会创建一个假主键，例如 SQL Server 中的 IDENTITY 列，并在 Name 列上放置一个 UNIQUE 约束。如果您的表变大，在 int 列上检索项目也将比在 varchar() 列上检索更快。

**更新：** 因为我被告知我没有回答这个问题（即使这是公认的答案），所以可以更改 SQL Server 中的主键值。但这在技术上不是编辑操作，因为参照完整性可能会阻止真正的编辑（我没有尝试过，所以请随意进行自己的实验！）

操作将是这样的：

1.  使用新的 PK 值向主表添加新行
2.  运行更新操作以将所有 FK 值更改为新的 PK 值
3.  删除旧的PK行

我也会在事务中运行所有这些。但我再次声明，我不建议采取这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:12:52.260

正如 aKzenT 指出的那样，在定义主键时，最好始终使用自动编号/身份或序列 (Oracle)。b-tree 处理器查找和连接数字键的效率要高得多，尤其是当文本键长到几个字节时。更小的键也会导致需要搜索的 b-tree 页面更少。

另一个重要原因是无法修改自动生成的密钥。使用可修改的文本键时，外键必须使用 CASCADE UPDATE，许多（例如 Oracle、DB2）RDBMS 不以声明方式支持，并且必须使用触发器定义，这非常复杂。

在您的情况下，用自动生成的主键替换文本键将消除问题。

# git - Git：是否可以将位于外部目录中的文件添加到 git 存储库？

> ID：10035084
> 
> 赞同：8
> 
> 时间：2012-04-05T19:53:05.653
> 
> 标签：git

当我试着想一个简单的例子时，我想到了一个常见的 web 结构。如果结构是这样的：

```
/www
   |-- scripts
       |-- js
           `shared_code.js
       `-- css
           `shared_style.css
   |-- images
   `-- cgi-bin/
       |-- projectA
           |-- .git
           |-- foo.php
           `-- foo.pl
       `-- projectB
           |-- .git
           |-- bar.php
           `-- bar.pl 
```

是否可以将 js/css 脚本添加到 git 存储库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:15:25.733

不可能按照您的要求去做（无论如何这都是不可取的）。但是，您可能会查看*submodules*。您的`projectA`and`projectB`将包含一个名为`scripts`. 当然，这意味着您必须将其制成`scripts`自己的存储库，但这可能是一件好事。您可以在此处阅读子模块：

[https://git-scm.com/book/en/v2/Git-Tools-Submodules](https://git-scm.com/book/en/v2/Git-Tools-Submodules)

# mysql - 我可以使用多个字段作为 MySQL 中的 IGNORE 限定符来执行 INSERT IGNORE 吗？

> ID：10035085
> 
> 赞同：4
> 
> 时间：2012-04-05T19:53:14.577
> 
> 标签：mysql, select, insert, indexing

我有一个如下所示的 MySQL 表：

```
`id` int(10) unsigned NOT NULL AUTO_INCREMENT,
`company_id` int(8) unsigned NOT NULL,
`term_type` varchar(255) NOT NULL DEFAULT '',
`term` varchar(255) NOT NULL DEFAULT '', 
```

我希望能够做到这一点...

```
INSERT IGNORE INTO table ( company_id, term_type, term )
VALUES( a_company_id, 'a_term_type', 'a_term' ) 
```

...但是当 company_id、term_type 和 term 的相同组合已经存在时，我希望忽略插入。我知道，如果我在尝试插入重复值时在单个字段上有唯一索引，则插入将被忽略。有没有办法做我正在尝试的组合？我可以使用多列索引吗？

我试图避免`SELECT`在每次插入之前检查这个组合。当我将数亿行数据处理到这个表中时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T19:58:23.390

也许是这样的：

```
ALTER TABLE table ADD UNIQUE (company_id, term_type,term); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T19:57:44.883

如果使用 IGNORE 关键字，则执行 INSERT 语句时发生的错误将被视为警告。例如，如果没有 IGNORE，复制表中现有 UNIQUE 索引或 PRIMARY KEY 值的行会导致重复键错误并且语句被中止。使用 IGNORE，行仍然没有插入，但不会发出错误。

因此，如果您有一个多列主键 - 它可以工作。

# c# - 使用 WCF 将 SQL Azure 连接到 Windows Phone 7

> ID：10035086
> 
> 赞同：0
> 
> 时间：2012-04-05T19:53:21.857
> 
> 标签：c#, wcf, windows-phone-7, azure-sql-database

我是 windows phone 7 编程的新手，但我真的很累，因为我花了 3 天时间解决一个问题。我搜索了所有互联网并得到了一些很好的解释，但没有运气 - 它不适用于我的程序。

我在 SQL Azure 中创建了一个名为**dbo.Messenger**的表，其结构如下：

*   id（PK，不为空）
*   类别（nvarchar（30），空）
*   消息（nvarchar（最大），空）
*   描述（nvarchar（200），空）

然后我为它做 WCF wchich 应该给我一个它的列表：

> ```
>  [OperationContract]
>         List<NoteDto> GetNotes(); 
> ```

```
 public List<NoteDto> GetNotes()
    {
        using (var context = new WP7mgrEntities())
        {
            var notes = (from eachNote in context.Messenger
                         orderby eachNote.id ascending
                         select new NoteDto
           {
               id = eachNote.id,
               category= eachNote.category,
               description= eachNote.description,
               message= eachNote.message,
           }
                ).ToList();
            return notes;
        }
    } 
```

当然在额外的类 NoteDto 上为每个 DataMember 获得了这样的：

```
 [DataMember] 
    public int id {get; set; } 
```

因此，在此之后，我制作了 wp7 应用程序，这些应用程序获得列表框，也应该在我单击 button2 后填充

```
 <ListBox Height="431" HorizontalAlignment="Left" Margin="12,199,0,0" Name="listBox1" VerticalAlignment="Top" Width="438"
                 ItemsSource="{Binding Notes}">
         <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding category}"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>         
        </ListBox> 
```

而这背后的代码：

```
 private void button2_Click(object sender, RoutedEventArgs e)
    {
        Service1Client client = new Service1Client();
        client.GetNotesCompleted += new EventHandler<GetNotesCompletedEventArgs>(client_GetNotesCompleted);
        this.Notes = new ObservableCollection<NoteDto>();

    }
    private ObservableCollection<NoteDto> _notes;
    public ObservableCollection<NoteDto> Notes
    {
        get { return _notes; }
        set { _notes = value;
        this.RaisePropertyChanged("Notes");
        } 
    } 
```

公共事件 PropertyChangedEventHandler PropertyChanged；私有无效 RaisePropertyChanged(string propertyName) { PropertyChangedEventHandler propertyChanged = this.PropertyChanged; if ((propertyChanged != null)) { propertyChanged(this, new PropertyChangedEventArgs(propertyName)); } }

```
 void client_GetNotesCompleted(object sender, GetNotesCompletedEventArgs e)
    {this.Notes = e.Result; } 
```

当我单击按钮 2 时，我的列表框没有被数据库中的记录填充。
任何想法 ？请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:37:57.747

你使用什么样的绑定？回想一下，只有 wshttpbinding 不适用于 WP7。另一方面，为什么不使用 WCF 数据服务将此类数据库公开为[OData](http://odata.org)。

[一探究竟。](http://robseder.wordpress.com/2011/06/06/wcf-data-services-odata-wp7-and-ef/)

希望有帮助，

# rvm - RVM 不会安装在 Ubuntu 11.10 上

> ID：10035094
> 
> 赞同：0
> 
> 时间：2012-04-05T19:54:05.177
> 
> 标签：rvm, ubuntu-11.10

我正在运行 Ubuntu 11.10，并且正在尝试安装 RVM。

我输入“bash < <(curl -s [https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer](https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer) )”然后按回车，没有任何反应。它暂停一秒钟，然后返回到命令提示符。

RVM 未安装。我运行 rmv-v 并得到 The program 'rvm' current not installed。

没有错误。

有什么想法吗？

谢谢。

杰森

更新：我从 curl 中删除了 -s 选项，现在我看到了一些消息。具体来说：

0curl: (60) SSL证书问题，验证CA证书是否OK。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败

更新 2：我重新安装了 Git，现在当我运行 curl-config --ca 时，我得到：

curl-config --ca /etc/ssl/certs/ca-certificates.crt

我从 curl.haxx.se 下载了 cacert.pem 文件，并用它创建了一个新的 ca-certificates.crt 文件。

但是，我仍然得到：

0curl: (60) SSL证书问题，验证CA证书是否OK。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败

不知道除了禁用检查之外还能尝试什么，我宁愿不这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:47:02.117

[https://rvm.io](https://rvm.io)上的 SSL 证书已过期。看起来 RVM 已迁移到新域。见：[https ://github.com/wayneeseguin/rvm/issues/889](https://github.com/wayneeseguin/rvm/issues/889)

# c - c，我如何检测另一个进程是否正在写入文件

> ID：10035098
> 
> 赞同：2
> 
> 时间：2012-04-05T19:54:23.127
> 
> 标签：c, file-io, fopen

我确实在 c 下使用 fopen 打开大文件，并带有一种观察到的文件夹逻辑。我想在文件完全复制到我观察到的文件夹后立即打开（或至少读取）文件。

我如何检测另一个进程是否正在写入文件？使用标准c可以吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:14:38.993

使用标准 C 没有办法做到这一点。您可以做的最好的事情是启发式地注意文件何时停止更改，例如读取文件的最后几个块，休眠*n*秒，然后再次读取块并与之前的读取进行比较。您也可以尝试只观察文件末尾的查找指针以查看它何时停止移动，但对于大文件（大小大于带符号长的大小），需要 POSIX 函数 ftello() 才能便携。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-05T20:30:56.737

这有点“粗鲁”，但您可以继续尝试以写入模式打开它；只要它被其他文件写入，`fopen`就会失败。像这样的东西：

```
FILE* f;
while( (f = fopen( fname, "w" )) == NULL ) {
  sleep( 100 );  // we want to be moderately polite by not continually hitting the file
} 
```

# coldfusion - 哪些 ColdFusion 论坛应用程序旨在嵌入到现有应用程序中？

> ID：10035101
> 
> 赞同：2
> 
> 时间：2012-04-05T19:54:26.577
> 
> 标签：coldfusion, forum

我希望将论坛“嵌入”到现有网站中。我已经与 Ray 讨论了如何使用 Galleon（一个很棒的基于 CF 的论坛）来做这件事，而且它是可行的。

作为尽职调查的一部分，我想知道是否有任何现有的基于 ColdFusion 的论坛软件在设计时考虑了嵌入性；换句话说，论坛软件不是为了作为独立应用程序运行而构建的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:40:01.150

Marc，如果您正在寻找 Mura CMS 网站的插件，您应该查看 Meld 论坛 - [https://github.com/meldsolutions/Meld-Forums](https://github.com/meldsolutions/Meld-Forums)。免费、开源等

# ruby-on-rails - 控制器动作中定义的实例变量@variable 怎么可以从它的视图中调用呢？

> ID：10035103
> 
> 赞同：1
> 
> 时间：2012-04-05T19:54:28.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3

`@variable`如何从控制器的视图中调用控制器操作中定义的实例变量？

喜欢

```
class UsersControllers
  def index
     @whythiscolavery=User.all
  end
end 
```

现在在 /views/users/index.html.haml 为什么`@whythiscolavery` 在控制器操作中定义的视图中可以直接访问变量？

这个查询让我在一次重要的采访中失败了。

```
@whythiscolavery.each do   
     user.name
 end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-30T11:05:55.377

引用 Rails 3 中的 Obie Fernandez 的话：

> Rails 实现控制器到视图数据切换的方式是通过实例变量。通常，控制器操作会初始化一个或多个实例变量。然后视图可以使用这些实例变量。
> 
> 在选择实例变量以在控制器和视图之间共享数据时存在一些讽刺意味（对于新手来说可能会感到困惑）。实例变量存在的主要原因是对象（无论是 Controller 对象、String 对象等）可以保留它们不与其他对象共享的数据。当你的控制器动作被执行时，一切都发生在控制器对象的上下文中——例如，DemoController 或 EventController 的一个实例。上下文包括代码中的每个实例变量都属于控制器实例的事实。
> 
> 渲染视图模板时，上下文是不同对象的上下文，即 ActionView::Base 的实例。该实例有自己的实例变量，并且无法访问控制器对象的变量。
> 
> 因此，从表面上看，实例变量对于两个对象共享数据的方式来说是最糟糕的选择。然而，有可能让它发生——或者让它看起来发生。Rails 所做的是遍历控制器对象的变量，并为每个变量创建一个视图对象的实例变量，具有相同的名称并包含相同的数据。
> 
> 对于框架来说，这是一种劳动密集型的工作：就像手动复制购物清单一样。但最终的结果是，对于程序员来说，事情变得更容易了。如果您是 Ruby 纯粹主义者，您可能会因为实例变量用于连接对象而不是分离对象而感到畏缩。另一方面，作为一个 Ruby 纯粹主义者还应该理解这样一个事实，即您可以在 Ruby 中做很多不同的事情——比如在循环中复制实例变量。所以没有什么真正不像Ruby的。从程序员的角度来看，它确实在控制器和它正在呈现的模板之间提供了无缝连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T21:09:27.113

视图基本上是控制器的方法，因此它们可以像普通的普通旧 ruby​​ 类一样访问实例变量。如果你有课

```
class Donut
  def show
    @delicious = "very very delicious"
  end

  private
  def render_show
    "donuts are #{@delicious}"
  end
end

Donut.new.show 
```

Erb（和 haml，以及 js 和所有其他渲染）以相同的方式处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T01:09:47.090

控制器中的方法是公共操作（除非它们受到保护）。在该操作中分配的实例变量在该视图中可用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T21:29:01.037

因为在[Ruby On Rails MVC 架构](http://guides.rubyonrails.org/getting_started.html#the-mvc-architecture)和[“约定优于配置”](http://en.wikipedia.org/wiki/Convention_over_configuration)中，实例变量跨越模型/视图/控制器和助手。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T19:57:37.817

用于此的 haml 语法为：

```
-@whythiscolavery.each do |user|
  = user.name 
```

erb 语法是

```
<%= @whythiscolavery.each do |user| %>
  <%= user.name %>
<% end %> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T20:50:30.190

如果您询问如何从视图访问变量，niiru 的答案很好，但 erb 语法示例中的额外“=”符号除外。它应该是：

```
<% @whythiscolavery.each do |user| %>
  <%= user.name %>
<% end %> 
```

如果您问*为什么该变量可能在视图中可用*，那是因为控制器使它们对视图可用（它们被复制到视图中）。这个设计缺陷（保持状态）促使 gem 的 decent_exposure 的创建：[https ://github.com/voxdolo/decent_exposure](https://github.com/voxdolo/decent_exposure)

# php - 是否可以将变量跟踪回其 extract() 函数？

> ID：10035111
> 
> 赞同：3
> 
> 时间：2012-04-05T19:54:56.370
> 
> 标签：php, drupal

我正在使用 Drupal 主题，我看到很多看起来像是用`extract()`. 是否可以追溯，看看那个数组在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:07:57.473

我认为您指的是传递给模板文件的变量，这些变量实际上是从数组中提取的。

在 Drupal 7 中执行此操作的代码位于[theme_render_template()](http://api.drupal.org/api/drupal/includes!theme.inc/function/theme_render_template/7)中。

```
function theme_render_template($template_file, $variables) {
  extract($variables, EXTR_SKIP); // Extract the variables to a local namespace
  ob_start(); // Start output buffering
  include DRUPAL_ROOT . '/' . $template_file; // Include the template file
  return ob_get_clean(); // End buffering and return its contents
} 
```

该函数从[theme()](http://api.drupal.org/api/drupal/includes!theme.inc/function/theme/7)调用，它执行以下代码。

```
// Render the output using the template file.
$template_file = $info['template'] . $extension;
if (isset($info['path'])) {
  $template_file = $info['path'] . '/' . $template_file;
}
$output = $render_function($template_file, $variables); 
```

`$render_function`默认设置为`'theme_render_template'`，但其值使用以下代码设置（在 中`theme()`）。

```
// The theme engine may use a different extension and a different renderer.
global $theme_engine;
if (isset($theme_engine)) {
  if ($info['type'] != 'module') {
    if (function_exists($theme_engine . '_render_template')) {
      $render_function = $theme_engine . '_render_template';
    }
    $extension_function = $theme_engine . '_extension';
    if (function_exists($extension_function)) {
      $extension = $extension_function();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T19:58:17.250

只需回显变量，如果**未**`$GLOBALS`设置数组，您可能会找到它的来源。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T20:06:04.910

我不熟悉 Drupal，所以这只是一个建议，但如果 drupal 具有模板结构，或者如果数组是从控制器传递的，那么可能会使用提取，您可以`get_defined_vars`在视图中使用来获取所有变量及其可能那里有一个数组，您可以与您知道的在同一数组或类似数组中的变量交叉引用。

```
<?php 
$vars = get_defined_vars();
print_r($vars);
//or maybe
print_r($this);
?> 
```**

# http - 服务器向另一台服务器发出长 http 请求时出现 HTTP 400 错误

> ID：10035122
> 
> 赞同：1
> 
> 时间：2012-04-05T19:56:03.147
> 
> 标签：http, urlconnection, http-status-code-400, large-data

我有一个场景，我从 HTTP 客户端点击了 cacheRefresh.do URL。它到达 App Server A，A 刷新自己的缓存，然后向 App Server B 发送请求（我使用的是 URLConnection），以刷新其缓存。（我知道这是一个糟糕的设计，但我们别无选择）

现在，当我的请求是刷新小缓存（小响应时间）时，一切看起来都很好，我得到了 200。

但是当我的请求是刷新大缓存时，我得到了 400。

在这种情况下，服务器 A 和 B 也会刷新，但为什么我会得到 400 作为响应？任何想法 ？

下面是控制器代码：

```
@SuppressWarnings("unused")
public ModelAndView handleRequest(final HttpServletRequest request, final HttpServletResponse response)
        throws Exception {

    final long cacheRefreshStartTime = System.currentTimeMillis();

    final String action = request.getParameter("action");
    // Init to 74 since this is the static length that will be appended.
    final StringBuffer result = new StringBuffer(74);
    final String[] cacheKeys = request.getParameterValues("cacheKeys");
    String[] cacheElement = request.getParameterValues("cacheElement");
    final String refreshByKeyRegion = request.getParameter("refreshByKeyRegion");
    final String refreshByKeyRegionKeys = request.getParameter("refreshByKeyRegionKeys");
    final String refreshPartnerInstanceCache = request.getParameter("refreshPartnerInstanceCache");
    LOG.debug(" cacheKeys for refresh " + Arrays.toString(cacheKeys));

    try {
        if (action.equalsIgnoreCase("ALL")) {
            performancLogger.info("Cache Refresh requested action=" + action);
            this.refreshAllCache();
        } else if (action.equalsIgnoreCase("SPECIFIC")) {
            performancLogger.info("Cache Refresh requested action=" + action + " keys="
                    + Arrays.toString(cacheKeys));
            this.refreshSpecificCache(cacheKeys);
        } else if (action.equalsIgnoreCase("cacheElement")) {
            if (refreshByKeyRegion != null && refreshByKeyRegion.length() > 0 && refreshByKeyRegionKeys != null
                    && refreshByKeyRegionKeys.length() > 0) {
                cacheElement = new String[] { refreshByKeyRegion + "," + refreshByKeyRegionKeys };
            }
            performancLogger.info("Cache Refresh requested action=" + action + " element="
                    + Arrays.toString(cacheElement));
            this.refreshCacheElements(cacheElement);
        }
        if (!request.getServerName().contains("localhost") && refreshPartnerInstanceCache != null
                && refreshPartnerInstanceCache.equals("true")) {
            refreshPartnerInstanceCache(request);
        }
        result.append("Cache refresh completed successfully.");

        if (cacheKeys != null) {
            result.append(" Keys - ");
            result.append(this.formatArrayAsString(cacheKeys));
        }
    } catch (final Exception e) {
        result.append("Cache refresh failed.");
        if (cacheKeys != null) {
            result.append(" Keys - ");
            result.append(this.formatArrayAsString(cacheKeys));
        }
    }

    if (action != null) {
        performancLogger.info("Cache Refresh competed total refresh time = "
                + formatElapsedTime(System.currentTimeMillis() - cacheRefreshStartTime));
    }

    return new ModelAndView(IVRControllerNames.CACHE_REFRESH_STANDARD_VIEW, "displayInfo", this
            .getDisplayInfo(result));
} 
```

请求标头：

```
POST xxxxx.do HTTP/1.1
Host: xxxxx
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.3) Gecko/20100401 Firefox/3.6.3
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive: 115
Connection: keep-alive
Referer: http://xxx/yyy/zzz/cacheView.do
Cookie: JSESSIONID=xxxxx.x.x 
```

请求正文：

```
Content-Type: application/x-www-form-urlencoded 
Content-Length: 134 
action=SPECIFIC&refreshPartnerInstanceCache=true&cacheKeys=xxxx&cacheKeys=xxx&Refresh=yyyy 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:33:20.177

在您的操作中，您似乎有几个具有相同名称的键。

```
action=SPECIFIC&refreshPartnerInstanceCache=true&**cacheKeys**=xxxx&**cacheKeys**=xxx&Refresh=yyyy 
```

清理它并给他们唯一的 ID。

此外，它们似乎没有进行 urlencoded，如果您的密钥包含有趣的字符，这可能会导致麻烦。请参阅[如何使用 HttpWebRequest 在 POST 中转义 URL 编码的数据](https://stackoverflow.com/questions/3089177/how-to-escape-url-encoded-data-in-post-with-httpwebrequest)

# android - Android：更改默认活动时出现错误

> ID：10035125
> 
> 赞同：0
> 
> 时间：2012-04-05T19:56:08.180
> 
> 标签：android, android-activity, default

更改清单中的默认活动后，我的应用程序出现问题。这是我更改后的清单。据我所知，它在语法上是正确的。

```
<application android:icon="@drawable/icon" android:label="@string/app_name">
    <uses-library android:name="com.google.android.maps" />
    <activity android:name=".loginActivity"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="CouncilPlannerActivity"></activity>
    <activity android:name="MainTabActivity"></activity>
    <activity android:name="MapTabActivity" android:theme="@android:style/Theme.NoTitleBar"></activity>
    <activity android:name="NodeFormActivity"></activity>
    <activity android:name="viewNewsActivity"></activity>
</application> 
```

问题是当我将应用程序部署到我的设备时，它第一次运行良好。但是，当我使用主页按钮关闭应用程序时，它拒绝再次打开。单击设备应用程序列表中的图标不会执行任何操作。

如果我将默认活动更改为最初的活动，它可以正常工作。这是一个错误还是对我缺少的默认活动的另一个引用？

如果这有所作为，我正在 Android 2.2 上进行开发。

当我尝试打开应用程序时，我刚刚注意到 logcat 吐出一个错误：“Permission Denied: checkComponentPermission() reqUID10064”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:06:16.130

您可能需要在此处发布有问题的 loginActivity，以便我们查看活动中是否存在任何问题。否则，请仔细检查 loginActivity 是否与其他活动在同一个包中，如果不是，您需要将清单的“.loginActivity”部分更改为其与主包的相对位置，即“somename.loginActivity”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:06:54.070

我认为问题出在 loginActivity 类中。在这种情况下，您可能会检查已经登录的用户并完成活动吗？

# android - Sending SQLite database table to SQL server database

> ID：10035128
> 
> 赞同：0
> 
> 时间：2012-04-05T19:56:22.373
> 
> 标签：android, sql, sql-server, sqlite

So I have a local SQLite table "breadcrumbs" being created on the Android device. How do I go about getting that table's data to store in another external SQL Server database table?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:00:58.750

If you are able to copy the sqlite db file out from Android device to a Windows machine, you can use sqlite command to dump data to a SQL script with INSERTs. Run the script your Sql Server.

[Exporting data from SQLite 3](https://stackoverflow.com/questions/4389930/exporting-data-from-sqlite-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:05:47.767

If you want to try something new, you can use entity framework and reflection to achieve that. 1.Use a code generator to generate the model code and the mapping code. 2.use the method DbContext.Database.CreateDatabase() create the database structure in sql server 3.use foreach, reflection and DbContext.Set.Add(TModel) to transmit the data from sqlite to sql server.

# google-app-engine - NDB 十进制属性

> ID：10035133
> 
> 赞同：0
> 
> 时间：2012-04-05T19:57:24.150
> 
> 标签：google-app-engine

我正在尝试将我的应用程序从旧的 App Engine db 迁移到 ndb。事情进展顺利，直到我开始收到与我的自定义 Decimal 属性相关的奇怪错误。在旧数据库中，我使用了 Nick Johnson 的代码 (http://goo.gl/fpKNs)。我对与 ndb 兼容的函数名称进行了一些更改，但大部分仍然存在。这是我的修改版本：

```
class DecimalProperty(db.Property):
    def _validate(self, value):
        if not isinstance(value, (Decimal, str)):
            raise datastore_errors.BadValueError('Expected decimal or string, got %r' % (value,))

        return Decimal(value)

    def _db_set_value(self, v, unused_p, value):
        if not isinstance(value, (str, Decimal)):
            raise TypeError('DecimalProperty %s can only be set to string values; received %r' % (self._name, value))
        v.set_stringvalue(str(value))

    def _db_get_value(self, v, unused_p):
        if not v.has_stringvalue():
            try:
                return Decimal(v)
            except ValueError:
                return None

        return Decimal(v.stringvalue()) 
```

这是一个示例回溯：

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "U:\Hefner\Dropbox\Public\Projects\GHI\dev\rpc.py", line 68, in get
    result = func(*args)
  File "U:\Hefner\Dropbox\Public\Projects\GHI\dev\rpc.py", line 278, in getDonations
    response = utilities.getAllDonations(self, settings_key, query_cursor)
  File "U:\Hefner\Dropbox\Public\Projects\GHI\dev\GlobalUtilities.py", line 361, in getAllDonations
    query = models.Donation.gql("WHERE settings_key = :s ORDER BY time_created DESC", s=settings_key)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\ndb\model.py", line 2885, in _gql
    *args, **kwds)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\ndb\query.py", line 1318, in gql
    qry = _gql(query_string)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\ndb\utils.py", line 136, in positional_wrapper
    return wrapped(*args, **kwds)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\ndb\query.py", line 1366, in _gql
    if prop._name != name:
AttributeError: 'str' object has no attribute '_name' 
```

我可能错了，但似乎十进制属性返回的是字符串而不是属性的实例，我不知道该怎么做。当我在我的模型类中注释掉时`amount_donated = DecimalProperty()`，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T05:27:34.997

看起来您粘贴在 ld db 代码中...

无论如何，请参阅这些文档：[https ://developers.google.com/appengine/docs/python/ndb/subclassprop](https://developers.google.com/appengine/docs/python/ndb/subclassprop)

您想使用 _to_base_type() 和 _from_base_type()。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:41:42.400

这就是我用于 DecimalProperty 的东西，用于存储货币，物有所值。

```
class DecimalProperty(ndb.IntegerProperty):
    # Decimal property ideal to store currency values, such as $20.34 
    # See https://developers.google.com/appengine/docs/python/ndb/subclassprop
    def _validate(self, value):
        if not isinstance(value, (Decimal, str, unicode, int, long)):
            raise TypeError('Expected a Decimal, str, unicode, int or long an got instead %s' % repr(value))

    def _to_base_type(self, value):
        return int(Decimal(value) * 100)

    def _from_base_type(self, value):
        return Decimal(value)/Decimal(100) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-09T17:00:13.450

bustrofedon 给出的答案包含舍入问题和错误。这是 a 的更好实现`CurrencyProperty`：

```
class CurrencyProperty(ndb.IntegerProperty):
    def _validate(self, value):
        if not isinstance(value, (Decimal, float, str, unicode, int, long)):
            raise TypeError("value can't be converted to a Decimal.")

    def _to_base_type(self, value):
        return int(round(Decimal(value) * 100))

    def _from_base_type(self, value):
        return Decimal(value) / 100 
```

# php - 新的（相对）代码点火器：一些基本问题

> ID：10035137
> 
> 赞同：0
> 
> 时间：2012-04-05T19:57:49.270
> 
> 标签：php, codeigniter, templates

我是在 iPad 上输入的，如果简洁有点粗鲁，请原谅我。我的问题是：

在视图中拥有简单的逻辑是否可以？例如，

```
<HTML>
<!-- ... Stuff
-->
<?php if($this->session->userdata('authorized'): ?>
<p>You are authorized</p>
<?php else: ?>
<p>You are not authorized</p>
<?php endif; ?>  // Question 1, is this the proper use of an endif:?
<!-- .. Stuff
->>
</HTML>

/* Starting to type the rest of message on my laptop.  Big thank yous to the coders on
   this site   who made my pc login transfer my unsaved, half typed iPad post */ 
```

以上只是代码中的一个剩余注释，它会使有限的 php 使用看起来很难看。我想让它被看到。

无论如何，关于问题#2：

在视图中使用这样的简单条件是否合适？

感谢阅读，再次问好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:26:14.233

使用[Language 类](http://codeigniter.com/user_guide/libraries/language.html)来存储您的“您已获得授权”和“您未获得授权”文本。在控制器中进行会话检查，并将正确的语言值传递给数据数组中的视图。

**编辑：来自 STONYFTW 的附加问题：**

对于一些更复杂的代码应该采取什么方法，例如：？

```
 <?php if(!$this->session->userdata('isLoggedIn')): ?>
          <div id="login_form">
              <?php echo form_open('login/validateCredentials'); ?>
              <?php echo form_input('username', 'Username'); ?>
              <?php echo form_password('password', 'Password'); ?>
              <?php echo form_submit('submit', 'Log In'); ?>
              <div id="login_form_link_container">
                  <?php echo anchor('login/register', 'Register')." ".anchor('login/recover','Forgot Pass?'); ?>
              </div>
          </div>
   <?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T21:14:12.420

我建议您在控制器中为每种情况使用不同的视图：

```
// In the controller
if($this->session->userdata('authorized')
  $this->load->view('not_autorized.php');
else
  $this->load->view('view.php'); 
```

所以你得到干净的代码和视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T20:08:24.537

在回答第一个问题时：这是正确使用 a 的方法`endif`，所有这些都是 codeigniter 有效和推荐的方式。

关于第二个问题，这个方法可以在视图文件中使用；但是我建议在`$data`传递给页面的数组中使用它，这意味着它将被访问为`$authorised`; 我这样说是因为它对前端设计师来说更有意义。

`$data`可以在[此处](http://codeigniter.com/user_guide/tutorial/static_pages.html)找到有关数组的信息，只需导航到“向控制器添加逻辑”。

我希望这对你有帮助。

# vb.net - 在 Visual Basic 中监视屏幕区域的某种颜色

> ID：10035140
> 
> 赞同：0
> 
> 时间：2012-04-05T19:58:00.567
> 
> 标签：vb.net, screen-scraping

我正在设计一个播放器应用程序来配合我们的电话系统。当我们的呼叫者接听电话时，它会记录每个电话。他们可以转到列表模块，找到录音并双击，打开我的播放器。我遇到的问题是，如果接听者接到另一个电话，我的播放器不知道它会继续播放。我正在寻找一种方法来监视特定区域的屏幕，当它看到黄色或红色而不是蓝色时，它会暂停我的播放器。

电话系统没有我可以连接的任何 API，所以我必须尝试另一种方式。

屏幕分辨率永远不会改变，他们接听电话的队列按钮将始终是静态的。当他们接到电话时，一小块区域会从背景颜色蓝色变为黄色或红色，以表示有来电。

有什么建议么？

**根据下面的答案编辑最终代码并[在 Visual Basic 中使用 GetPixel/GetDC 提出内存泄漏问题](https://stackoverflow.com/q/10048733/832563)

```
Private Function CheckforCall()
    Dim hDC As IntPtr = GetDC(0)
    Try
        Dim queue1 As Integer = GetPixel(hDC, 40, 573)
        Dim queue2 As Integer = GetPixel(hDC, 140, 573)
        Dim queue3 As Integer = GetPixel(hDC, 240, 573)
        Dim queue4 As Integer = GetPixel(hDC, 340, 573)
        Dim queue5 As Integer = GetPixel(hDC, 440, 573)

        If queue1 <> 9990727 Then
            lblRinger.Text = "In Calls GOT CALL"
            Return True
        ElseIf queue2 <> 9990727 Then
            lblRinger.Text = "Admin GOT CALL"
            Return True
        ElseIf queue3 <> 9990727 Then
            lblRinger.Text = "Overflow GOT CALL"
            Return True
        ElseIf queue4 <> 9990727 Then
            lblRinger.Text = "Bi-Lingual GOT CALL"
            Return True
        ElseIf queue5 <> 9990727 Then
            lblRinger.Text = "Intercom GOT CALL"
            Return True
        Else
            lblRinger.Text = "No Call"
            Return False
        End If

    Catch ex As Exception
        Return False
    Finally
        ReleaseDC(0, hDC)
    End Try

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:11:07.937

我很确定这就是你想要的：

[http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel.aspx)

祝你好运！

编辑：

我忘了您必须提供设备上下文 ( `hDC`) 才能`GetPixel`工作。有时很难处理需要的窗口句柄 ( `hWnd`) `GetDC`，因此您可以简单地使用`GetDC(0)`.

代码无耻地从[http://www.vbforums.com/showthread.php?t=491397](http://www.vbforums.com/showthread.php?t=491397)窃取：

```
Declare Auto Function FindWindow Lib "user32" ( _
  ByVal lpClassName As String, _
  ByVal lpWindowName As String) As IntPtr

Declare Function GetDC Lib "user32" (ByVal hWnd As IntPtr) As IntPtr
Declare Function ReleaseDC Lib "user32" (ByVal hwnd As IntPtr, ByVal hdc As IntPtr) As IntPtr

Private Declare Function GetPixel Lib "gdi32" (ByVal hdc As IntPtr, ByVal X As Int32, ByVal Y As Int32) As Int32

Public Function GetColorAt(ByVal X As Int32, ByVal Y As Int32) As Int32

    Dim hWnd As IntPtr
    Dim hDC As IntPtr

    hWnd = FindWindow(vbNullString, "RagII")

    hDC = GetDC(hWnd)

    Dim lColor As Int32 = GetPixel(hDC, X, Y)  

    ReleaseDC(hWnd, hDC)

    Return lColor
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:17:46.430

您可以使用`PrintWindow`Win32 API 中的函数来获取特定窗口的位图。然后，您可以使用以下命令从此位图中读取像素`Bitmap.GetPixel`：

您需要使用以下命令导入此（可能还有更多功能）`DllImport`：

```
<DllImport("user32.dll")> _
Private Shared Function PrintWindow(hwnd As IntPtr, hdcBlt As IntPtr, nFlags As UInteger) As Boolean 
```

这是一个捕获窗口的小示例代码：

```
Using bm As New Bitmap(width, height, System.Drawing.Imaging.PixelFormat.Format16bppRgb555)
    Dim g As Graphics = Graphics.FromImage(bm)
    Dim hdc As IntPtr = g.GetHdc()
    PrintWindow(hwnd, hdc, 0) 'hwnd is the window handle of the phone application
    g.ReleaseHdc(hdc)
    g.Flush()
    Return Image.FromHbitmap(bm.GetHbitmap())
End Using 
```

**但是：**尝试看看是否真的没有其他方法可以解决这个问题。捕获屏幕将是一个脆弱的解决方案，它只能等待调用软件的下一次更新。

# silverlight - 添加 DependencyObject 以从代码隐藏中控制

> ID：10035142
> 
> 赞同：0
> 
> 时间：2012-04-05T19:58:05.987
> 
> 标签：silverlight

我想从后面的代码中将 DependencyObject 添加到控件中。我已经在网上搜索并搜索了如何做到这一点，但绝对没有成功。DependencyObject 有一个 DependencyProperty。我还想从代码隐藏中设置此属性。

图表：ChartBehaviors 直接继承自 DependencyObject。这是我自己写的一门课。Chart 控件是第三方控件。

charting:ChartBehaviors.FloatingTooltip 是 DependencyProperty。这也是我自己写的一个类。

这是它在 XAML 中的样子。我想在后面的代码中执行此操作，以便我可以打开和关闭“行为”。

```
<charting:Chart>
   <charting:ChartBehaviors.FloatingTooltip>
      <charting:FloatingTooltipBehavior
         TooltipTemplate="{StaticResource tooltipTemplate}" />
  </charting:ChartBehaviors.FloatingTooltip>
</charting:Chart> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:09:46.670

好吧，您基本上实例化了必要的依赖对象并使用适当的方法将其添加到控件中。例如，要将 TextBlock 添加到 StackPanel，您可以这样编写：

```
TextBlock txtMyText = new TextBlock();
stackPanel.Children.Add(txtMyText); 
```

如果您想将某些行为添加到图表中，您应该在代码中获取图表对象并查找诸如 Behaviors 之类的属性。然后你要么分配一个行为（如果它是一种行为而已），要么将它添加到堆栈面板中：

```
Chart myChart;
myChart.Behavior = new FloatingTooltipBehavior(); 
```

在不知道组件的情况下很难说出确切的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:08:04.730

您可以只在对象上使用 SetValue 方法（假设您为图表提供了 chart1 的 id）。

```
var behave = new FloatingTooltipBehavior();
chart1.SetValue(ChartBehaviors.FloatingTooltipProperty, behave); 
```

另一种解决方案是在您的行为中添加一个 Enabled 属性，然后从后面的代码中设置它。

# java - Eclipse、java 和 dotCMS 日志记录问题

> ID：10035144
> 
> 赞同：0
> 
> 时间：2012-04-05T19:58:19.690
> 
> 标签：java, eclipse, dotcms

我被分配了追踪网页在 dotCMS 下崩溃的原因的任务。该页面显示了一个错误堆栈跟踪，其描述表明它与 SQL 相关。我可以访问远程文件系统并且能够提取 java 文件。当传递给 getResults 方法时，它正在生成的 sql 失败。我想看看那个 sql 字符串的值。

也许我可以通过 java 创建一个具有该值的文本文件。以前的程序员（离开公司）告诉我，我需要关闭服务器、清理插件、部署插件并重新启动服务器，以便将源代码重新编译成 jar 文件。我现在不知道该怎么做……我想知道这些措施是否应该只在我部署修复程序时才采取。

我知道 Eclipse 具有日志记录功能，因为我涉足了 Android。我不知道是否有办法以某种方式远程连接到文件。我找到了一个使用 dotcms 设置 eclipse的[教程。](http://dotcms.com/docs/1.9/SettingUpADevelopmentEnvironmentInEclipse)但是，它希望我查看我机器的官方 dotcms 源代码。我想我不明白远程连接如何与 eclipse 一起工作，以及 eclipse 是否甚至可以帮助解决这个问题。菜鸟问题肯定！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:35:16.157

当您想从 Eclipse 中运行 dotCMS 时，这并不难。请记住，dotCMS 只是其中部署了默认主机的 tomcat（dotCMS 应用程序）。您可以在此处下载 dotCMS 源代码：http: [//dotcms.com/downloads/index.dot](http://dotcms.com/downloads/index.dot)。启动eclipse并添加一个tomcat服务器（此时为tomcat 6.0.26），将tomcat文件夹指向dotCMS安装文件夹中的tomcat目录。您可以通过这种方式从 eclipse 启动 tomcat。

如果您需要调试这些插件，则必须部署这些插件。下面我详细描述它，但 dotCMS 在他们的官方网站上也有一个页面：http: [//dotcms.com/plugins/plugin-faq.dot#HowInstall](http://dotcms.com/plugins/plugin-faq.dot#HowInstall)

*   确保您可以访问部署 dotCMS 的服务器。在意味着远程桌面的 windows 上，在 linux 上你需要 ssh。如果您在本地系统上的 eclipse 中运行它，那么您当然已经设置好了。
*   登录服务器后，确保您的系统上安装了 apache ant。您可以通过在命令行（在 Windows 上的 dos 框中）键入“ant -version”来检查您是否拥有它。如果你安装了它，你会看到这样的东西：

> 2010 年 3 月 11 日编译的 Apache Ant 版本 1.8.0

*   如果你没有安装它，你可以在这里下载它：http: [//ant.apache.org/bindownload.cgi](http://ant.apache.org/bindownload.cgi)
*   安装 ant 并确保将 /bin 文件夹放在 PATH 上，这样您就可以从所有目录调用 ant
*   现在检查您是否安装了 JAVA jdk。您将需要一个 jdk 而不仅仅是一个 jre，因为构建插件包括将 java 文件编译成类。您可以通过在命令行中键入“javac”来检查是否安装了 jdk。如果没有，请从此处安装最新的 java jdk：[http ://www.oracle.com/technetwork/java/javase/downloads/jdk-7u3-download-1501626.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk-7u3-download-1501626.html)
*   安装 jdk 并确保 PATH 上的 /bin 文件夹 os
*   现在停止 dotCMS
*   转到 dotCMS 文件夹的根目录并使用以下命令取消部署插件：

> ant 卸载插件

*   现在构建插件

> 蚂蚁构建插件。

*   最后部署它们

> 蚂蚁部署插件

您的插件现在已重新部署。您可以重新启动 dotCMS。

# html - HTML5 Canvas - 2d 线框球体

> ID：10035150
> 
> 赞同：1
> 
> 时间：2012-04-05T19:58:54.193
> 
> 标签：html, canvas, html5-canvas

我正在寻找在 2D Canvas 中绘制 3D 线框球体。无论如何，我都不是数学忍者，所以我想知道是否有人知道一种简单的方法来使用 lineto 弧连接在 Canvas 中绘制一个并使用 :math:

我将不胜感激任何帮助。

像这样的东西：http://en.wikipedia.org/wiki/File: [Sphere_wireframe_10deg_6r.svg](http://en.wikipedia.org/wiki/File:Sphere_wireframe_10deg_6r.svg)

我希望这是一个简单的等式，但如果你知道它不是（即绘制将是很多代码），我会很感激知道这一点，因为我可能需要重新考虑我想要做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:07:24.840

对您来说最简单的方法可能是查看 SVG 文件的源代码（[此处](http://upload.wikimedia.org/wikipedia/commons/7/7e/Sphere_wireframe_10deg_6r.svg)）并使用画布命令重新创建这些路径。

如果你想要一个实际的 3d 球体，投影到 2d 空间，我建议使用像 Three.js 这样的库

您还可以查看我在这里完成的一些数学运算：[swarms](http://jsfiddle.net/ctrlfrk/hNaYu/103/) _3d 和 Matrix 模块应该是您所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-10T19:04:32.487

这一次 SO 没有帮助我，所以我帮助了自己，这就是：纯 HTML5 + JavaScript 可配置渲染或线框球体。

我从这篇[出色的帖子](http://www.bitstorm.it/blog/en/2011/05/3d-sphere-html5-canvas/)开始，然后继续。基本上我从 Qt3D 收集了一些顶点生成代码并适应了 JS。

我不是 100% 确定轮换函数是否正确，但如果您发现错误，欢迎您回帖。

为了更清楚，我已经区分了 Z 位置，并在前面画了白色，在后面画了灰色。

这是结果（16 个环 x 32 个切片）和相关[的 jsFiddle 链接](https://jsfiddle.net/ajehLusz/2/)

```
Enjoy 
```

[![在此处输入图像描述](../Images/53991752eecb79bc6b9235dd433f62c2.png)](https://jsfiddle.net/ajehLusz/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T22:37:57.643

看看这个：http: [//jsfiddle.net/aJMBp/](http://jsfiddle.net/aJMBp/)

你应该画很多这样的线来创建一个完整的球体。这是一个很好的起点，给我 5 分钟，我会看看我是否可以改进它来绘制一个球体。

越来越好：http: [//jsfiddle.net/aJMBp/1/](http://jsfiddle.net/aJMBp/1/)

好的，这超出了我的能力范围。然而，这里的另一个小改进：http: [//jsfiddle.net/aJMBp/2/](http://jsfiddle.net/aJMBp/2/)

# javascript - DOM API 是否提供实现 Node 接口的 HTMLTitle 对象？

> ID：10035153
> 
> 赞同：0
> 
> 时间：2012-04-05T19:59:01.573
> 
> 标签：javascript, dom

DOM API 是否提供实现 Node 接口的 HTMLTitle 对象？

document.title 仅返回标题的字符串部分。

```
typeof(document.title)
"string" 
```

而其他属性如`document.head`is `HTMLHeadElement`object 和`document.doctype`is `DocumentType`Object 都实现了 Node 接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:20:24.653

[document.title](http://www.whatwg.org/specs/web-apps/current-work/#document.title)给你一个字符串，如前所述。

如果你想要标题元素，只需使用`document.getElementsByTagName`

`var title = document.getElementsByTagName("title")[0]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:04:15.693

`document.title`表示当前文档的标题**字符串**。可以通过以下方式访问元素的接口：

```
var tit = document.createElement('title') 
```

[`typeof`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/typeof)不是获取内部类名的正确方法。改用[`Object.prototype.toString`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/toString#Using_toString%28%29_to_detect_object_class)：

```
Object.prototype.toString.call(tit);
// returns "[object HTMLTitleElement]" 
```

# ruby-on-rails - UJS 不适用于 Rails 3 中的 XMLHttpRequest 上传

> ID：10035154
> 
> 赞同：1
> 
> 时间：2012-04-05T19:59:04.113
> 
> 标签：ruby-on-rails, xmlhttprequest, multipartform-data, ujs

我在 Rails 中有一个应用程序，用户可以在其中发布新帖子。在表单中，我正在传递，`:remote => true`所以当记录插入数据库时​​，帖子会使用 javascript 附加到视图中。到目前为止，这一切正常。

最近我读到[这篇关于如何使用 HTML5 (](http://html5doctor.com/drag-and-drop-to-server/) [formData](http://www.w3.org/TR/2010/WD-XMLHttpRequest2-20100907/#the-formdata-interface) )拖放和自动上传的文章。

我以这样的方式实现了这一点：

*   拖放，工作
*   发送附件并将其交给 Carrierwave，有效
*   创建带有附件的新帖子，工作

只有像以前一样，当创建帖子时，Rails 会渲染`create.js.erb`并预先添加新创建的帖子，这不再起作用。帖子是在数据库中创建的，如果我点击重新加载，帖子会正常显示。`create.js.erb`但是未执行前面的 javascript 操作。

`application.js`

```
var doc = document.documentElement;

doc.ondrop = function(event) {
  event.preventDefault();

  var files    = event.dataTransfer.files,
      formData = new FormData(),
      xhr      = new XMLHttpRequest();

  formData.append('authenticity_token', $('meta[name="csrf-token"]').attr('content'));

  for (var i=0; i < files.length; i++) {
    formData.append('post[image]', files[i]);
  };

  xhr.open('POST', '/posts', true);
  xhr.onload = function() {
    if (xhr.status === 200) {
      console.log('all done: ' + xhr.status);
    } else {
      console.log('Something went wrong...');
    }
  };

  xhr.setRequestHeader('accept', '*/*;q=0.5, text/javascript');
  xhr.send(formData);

} 
```

`posts_controller.rb`

```
def create
  @post = Post.create!(params[:post])
end 
```

`create.js.erb`

```
$('<%= j render @post %>').hide().prependTo('.posts').fadeIn(); 
```

终端显示它作为JS处理的请求：

`Processing by PostsController#create as JS`

并且我的部分和 ujs 文件也被渲染：

`Rendered posts/_post.html.erb (6.4ms)`

`Rendered posts/create.js.erb (7.9ms)`

* * *

**编辑**

好吧，我发现了我的问题，这是我没有在这里讨论的问题。我还使用[Pusher](http://pusher.com/)将帖子发布给所有正在收听的客户。不知何故，[Pusher gem](http://github.com/pusher/pusher-gem)阻止了 UJS 在浏览器中呈现。

所以上面的代码*确实*适用于 Rails 3。我希望我可以帮助想要尝试 HTML5 拖放上传的人。

# asp.net-mvc-3 - 在 MVC3 项目中使用 API 控制器

> ID：10035155
> 
> 赞同：3
> 
> 时间：2012-04-05T19:59:12.187
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, asp.net-web-api

我正在使用 Vs2010 和 MVC4 进行项目。（主要是 API 控制器）。现在该项目已准备好部署到生产环境中。问题是客户端不想使用 MVC4，即使有来自 Microsoft 的上线许可证。我在 MVC4 的这个项目中使用的唯一新功能是 webAPI。

1.  我可以在 MVC3 中使用 API 控制器吗？
2.  如果是，我如何在 MVC3 项目中实现 API 控制器？
3.  如果我从 webAPI 的角度降级到 MVC3 会遇到什么麻烦（比如：routing，hhtpconfiguration）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T07:09:14.803

1.  是的
2.  您可以使用 Nuget 为您的 MVC3 项目获取 Web API
3.  不要以为你会有任何麻烦，Web API 有独立于 MVC dll 的独立 dll

# .net - Windows API 根据未使用变量的名称导致不同的结果？

> ID：10035157
> 
> 赞同：3
> 
> 时间：2012-04-05T19:59:17.173
> 
> 标签：.net, vb.net, winapi, memory

我对 .Net 编程的了解都告诉我，我在这里看到的行为是完全不可能的。那么有人可以解释一下这里发生了什么吗？简单代码：

```
Structure WKSTA_USER_INFO_1
    Dim wkui1_username As Integer
    Dim wkui1_logon_domain As Integer
    Dim wkui1_logon_server As Integer
    Dim wkui1_oth_domains As Integer
End Structure

Declare Function NetWkstaUserGetInfo Lib "Netapi32" (ByVal reserved As Integer, ByVal level As Integer, ByRef lpBuffer As Integer) As Integer
Declare Sub lstrcpyW Lib "kernel32" (ByRef dest As Byte, ByVal src As Integer)
Declare Sub RtlMoveMemory Lib "kernel32" (ByRef dest As WKSTA_USER_INFO_1, ByRef src As Integer, ByVal Size As Integer)
Declare Function NetApiBufferFree Lib "Netapi32" (ByVal Buffer As Integer) As Integer

Function GetDomain() As String
    Dim ret As Integer
    Dim wk1 As WKSTA_USER_INFO_1
    Dim pwk1 As Integer

    Dim test As String = ""

    ret = NetWkstaUserGetInfo(Nothing, 1, pwk1)
    RtlMoveMemory(wk1, pwk1, Len(wk1))

    ret = NetApiBufferFree(pwk1)

    Return "test"
End Function 
```

当我在这里放一个断点时，我看到在 RtlMoveMemory 之后，我的 wk1 包含一个指向用户名的指针，而其他所有的都是 0。这是一致的。现在，如果我更改`Dim test As String = ""`为`Dim login As String = ""`并再次运行它，wk1 包含指向用户名和登录域的指针。

如果我将其更改为`Dim login As String`，它包含一个仅指向用户名的指针。根据我将该（完全未使用的）变量名称更改为的内容，我会得到不同的结果。这怎么可能？

我一直认为，你选择什么命名你的变量可能无关紧要。声明一个变量，然后从不使用它，不可能与根本没有变量不同。

我已经在 2 台计算机上尝试过，结果一致（一台在 .Net 3.5 上，另一台在 4.0 上）。但是，当我尝试将其转换为 C# 时，我无法重现它。

顺便说一句，我知道我可以使用 System.Environment 来获取我需要的有关当前用户信息的信息；这是自动升级的旧 VB6 代码（我对其进行了一些编辑以使其更简单）。我只是想了解这种行为是如何发生的。显然，我花了很多年时间假设关于 .Net 的一些事情并不完全正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:07:09.083

解决方案，在 Raymond Chen 的帮助下：

RtlMoveMemory 的声明应该将 src 作为 ByVal 传递，而不是作为 ByRef。因为我传递的 src 是一个指向内存位置的指针，所以通过 ByRef 传递它会导致它传递存储我的指针的内存地址......换句话说，我的变量声明的位置。因此，周围有其他变量或不同命名的变量会产生不同的结果。

关于为什么在原始 VB6 代码中传递 ByRef... 的注释，它没有在声明中指定 ByVal，而 ByRef 是 VB6 中的默认值。因此，声明本身期待 ByRef。但是，对 API 的调用指定它正在传递变量 ByVal。这是您在 .Net 中无法做到的；你必须像声明所期望的那样传递它。因此，自动升级程序将 ByRef 添加到声明中，这确实使声明与 VB6 相同，但它忽略了调用中的 ByVal。

# iphone - 恢复存储在网站上的应用内购买的购买按钮？

> ID：10035158
> 
> 赞同：0
> 
> 时间：2012-04-05T19:59:18.420
> 
> 标签：iphone, in-app-purchase, storekit

如果当前用户对这些购买的计数是从网站存储和检索的，那么在应用内购买的消耗品和非自动更新订阅是否需要调用 restoreCompletedTransactions 的恢复购买按钮？

我认为在这种情况下不需要“恢复购买”按钮。在我的应用程序中，每当用户想要使用 In App Purchased 消耗品或订阅时，该应用程序都会联系网站并下载用户当前的 In App Purchased 消耗品/订阅计数。这些 In App Purchased 产品只能在 Internet 连接的情况下使用，因此如果没有 Internet 访问权限，则用户无法使用 In App Purchased 消耗品/订阅。

我了解用户拥有多台设备并且在一台设备上购买了应用内购买的消耗品/订阅并希望在另一台设备上使用这些产品的情况，但我在这里询问的情况并非如此。

如果 In App Purchased 项目存储在网站上并且 In App Purchased 项目在购买它们的同一设备上使用，是否需要恢复购买按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T06:55:06.573

我认为，如果您存储用户购买的所有历史记录，并让他在需要时使用他所做的所有购买，那么您的应用程序中就不需要额外的恢复按钮。

# php - 如何在javascript中获取复选框批量值

> ID：10035161
> 
> 赞同：-1
> 
> 时间：2012-04-05T19:59:51.290
> 
> 标签：php, javascript

我想获取 youtube 的所有详细信息，所以如果用户勾选复选框，我想在 javascript 中获取视频的完整详细信息，我已经完成，但只有我可以从你的管名，你的管名，例如$name="Geet - Episode 456 - Clip 1 [2011 年 11 月 24 日] *HQ* " 所以 alert(name) 只显示 Geet 。为什么？我需要全名。这是我的代码：我做错了。

```
 <?php

     $watch="youtubelink";
     $thumbnail="youyubeimage";
     $val="somevalue";
     $name="youtubename";
     //eg:$name="Geet - Episode 456 - Clip 1 [24th November 2011] *HQ*";
    $results=$watch.",".$thumbnail.",".$val.",".$name;
     ?>
      <input type="checkbox" name="checkbox[]" id="checkbox[]" class="addbtn" value=<?php echo $results;?>  /> 
```

这是我的js：

```
 function chkbox()
      { 
      $('[name^=checkbox]:checked').each(function() { 
     var ckballvalue=($(this).val());   
     var fields = ckballvalue.split(/,/); 
     var link = fields[0];
     var thumbnail = fields[1];
     var name = fields[3];
     //var description = fields[4];
     var categ = fields[2]; 
    alert(name);
     var data = {
     action: 'my_action',
     link:link,
     thumbnail:thumbnail,
     name:name, 
     categ:categ

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:11:58.163

您从 PHP 生成的 html 需要具有引用的属性：

```
value="<?php echo $results;?>"

// which will end up as:
value="Geet - Episode 456 - Clip 1 [24th November 2011] HQ" 
```

那是：

```
<input type="checkbox" name="checkbox[]" id="checkbox[]" class="addbtn" value="<?php echo $results;?>" /> 
```

否则你有：

```
value=Geet - Episode 456 - Clip 1 [24th November 2011] HQ 
```

所以这个`value`属性只到第一个空格。（如果您在浏览器中使用“查看源代码”，您会看到不同之处。）

# python - 如何使用 python 以易于放入 excel 的格式将集合列表打印到文件中，消除所有不需要的字符？

> ID：10035165
> 
> 赞同：2
> 
> 时间：2012-04-05T20:00:21.370
> 
> 标签：python, excel, list, printing, set

我一直在使用

```
for item in dictlist:
    print>>working_outfile, item 
```

将***集合******列表***打印到 .txt 文件并使用 excel 打开它，然后我可以将列表转换为逗号分隔的文件，从而创建电子表格。

 *问题是，当我打开这个时，我一直在手动替换第一个左括号和右括号、所有撇号、“set [”和右括号字符，以清理展开的外观床单。

关于如何修复此打印的任何建议或指示，以便该程序的其他用户不必学习如何查找和替换所有这些字符？

编辑：它最终使输出看起来像这样：

> ('aaa' | set(['stuff' | 'eggs' | 'spam']))
> 
> ('bbb' | set(['stuff' | 'eggs' | 'spam']))
> 
> ('ccc' | set(['stuff' | 'spam']))

在哪里 | 是下一个单元格

而且我要：

> 啊！东西| 鸡蛋| 高分辨率照片| CLIPARTO 垃圾邮件
> 
> bbb | 东西| 鸡蛋| 高分辨率照片| CLIPARTO 垃圾邮件
> 
> 抄送 | 东西| 垃圾邮件

打印字典列表的示例是：

> [('gcagag', set(['FlyingFox mef2d 上游 a1', '长臂猿 mef2a 上游 a1', '大象 mef2d 上游 a1', '大猩猩 mef2c 上游 a1', '长臂猿 mef2c 上游 a1', '猴子 mef2d 上游 a1' , '大猩猩 mef2a 上游 a1', '恒河猴 mef2c 上游 a1', 'MouseLemur mef2d 上游 a1', 'BrownBat mef2d 上游 a1', '海豚 mef2d 上游 a1', '功夫熊猫！mef2d 上游 a1', '犰狳mef2d 上游 a1'、'黑猩猩 mef2d 上游 a1'、'黑猩猩 mef2d 上游 a1'、'狨猴 mef2d 上游 a1'、'兔子 mef2d 上游 a1'、'EuroShrew mef2d 上游 a1'、'羊驼 mef2d 上游 a1'、'黑猩猩 mef2c上游 a1', 'EuroHedgeHog mef2d 上游 a1', '狗 mef2d 上游 a1'、'鼠标 mef2d 上游 a1'、'长臂猿 mef2d 上游 a1'、'大鼠 mef2d 上游 a1'、'大猩猩 mef2d 上游 a1'、'猩猩 mef2d 上游 a1'、'人类 mef2d 上游 a1']) , ('aaataa', set(['鼠标 mef2c 上游 a1', '羊驼 mef2a 上游 a1', '马 mef2a 上游 a1', '负鼠 mef2a 上游 a1', '长臂猿 mef2a 上游 a1', 'MouseLemur mef2a 上游 a1' , '大象 mef2a 上游 a1', 'GuineaPig mef2a 上游 a1', '大鼠 mef2d 上游 a1', '海豚 mef2a 上游 a1', '大猩猩 mef2a 上游 a1', '恒河猴 mef2c 上游 a1', '老鼠 mef2a 上游 a1', '狗 mef2c 上游 a1'，'人类 mef2a 上游 a1'，'黑猩猩 mef2a 上游 a1'，'猩猩 mef2a 上游 a1']))]

请注意这里有 2 个项目及其关联的集合。实际的 dictlist 有 500-40000 个项目，所以这只是一个小切口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:13:16.033

看起来您有一个元组列表，其中每个元组由一个字符串和一个集合组成。因此，要正确使用 CSV 编写器，您需要每个元组都是“扁平的”：

```
import csv
writer = csv.writer(open('output.csv', 'wb'))

for item in mydata:  # mydata is your list of tuples, so item is a tuple
    row = [item[0]] + list(item[1])
    writer.writerow(row) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T20:03:44.467

您可以使用 csv 模块。[http://docs.python.org/library/csv.html#csv.writer](http://docs.python.org/library/csv.html#csv.writer)

```
>>> import csv
>>> spamWriter = csv.writer(open('eggs.csv', 'wb'), delimiter=',')
>>> spamWriter.writerow(['Spam', 'Lovely Spam', 'Wonderful Spam']) 
```

与您的代码相关（在查看 print dictlist 的输出后更新）。

```
>>> import csv
>>> spamWriter = csv.writer(open('eggs.csv', 'wb'), delimiter=',')
>>> for item in dictlist:
        tmp = [item(0)]       
        tmp.extend(item[1])
        spamWriter.writerow(tmp) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T20:08:47.890

如果您只想将数字列表作为 CSV，您可以执行以下操作

```
>>> somelist=[set(random.sample(xrange(1,100),4)) for i in range(1,5)]
>>> out = repr(somelist).translate(None,"([)]").replace("set","")
'8, 98, 91, 10, 27, 3, 85, 37, 64, 33, 11, 69, 32, 83, 85, 38' 
```

然后，您可以将字符串写入文件。

或者，如果您的字符串可能包含作为表示的一部分添加的字符，您也可以将集合扩展为数字或字符串的列表

```
>>> somelist=[set(random.sample(xrange(1,100),4)) for i in range(1,5)]
>>> [e for s in somelist for e in s]
[17, 43, 63, 97, 16, 65, 58, 11, 49, 10, 91, 95, 41, 20, 85, 70]
>>> 
```

您也可以使用[csv](http://docs.python.org/library/csv.html#csv.writer)模块将数据写入文件

来自 OP 的评论，因为他想要不同行中的集合，这是一个更新

```
>>> fin=open('somecsv.csv', 'wb')
>>> csvwriter = csv.writer(open('somecsv.csv', 'wb'), delimiter=',')
>>> for s in somelist:
    csvwriter.writerow(list(s))
>>> fin.close() 
```*

# python - Django：从*相关*模型中自动保存 OneToOneField？

> ID：10035167
> 
> 赞同：2
> 
> 时间：2012-04-05T20:00:40.203
> 
> 标签：python, django, django-models

考虑两个模型（忽略明显的逻辑问题）：

```
class Owner(m.Model):
    id = m.IntegerField(primary_key=True)

class Pet(m.Model):
    owner = m.OneToOneField(Owner, related_name="pet", primary_key=True) 
```

创建新的`Owner`时，是否可以`.pet`自动保存它们？

目前，情况如下：

```
>>> o = Owner()
>>> o.pet = Pet()
>>> o.save()
>>> o.id
42
>>> o.pet.id
None
>>> o.pet.owner_id
None
>>> o.pet.owner == o
True 
```

但我希望（并期望？）`o.pet`在保存过程中保存`o`。

笔记：

*   如果您要建议压倒一切`Owner.save`：应该如何处理这种情况`commit=False`？
*   将`OneToOneField`from移动到`Pet`to`Owner`是不可取的，因为它会导致不太明智的数据库模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:10:14.030

如果我正确理解了这个问题，您可以使用它`django.db.models.signals.post_save`来实现预期的结果而无需覆盖`Owner.save()`：

```
from django.db.models.signals import post_save

post_save.connect(save_pet_handler, sender=Owner, dispatch_uid="my_unique_identifier")

def save_pet_handler(sender, instance, created, **kwargs):
    ... 
```

一旦`o.save()`被调用，将触发一个信号来调用`save_pet_handler`，然后您可以在其中`o.pet`保存或更新，这取决于 的布尔值`created`。

# java - IOException：读取结束已死

> ID：10035168
> 
> 赞同：2
> 
> 时间：2012-04-05T20:00:41.857
> 
> 标签：java, pipe, ioexception

什么情况下读完会死在夫妻`PipedOutputStream`和`PipedInputStream`？我没有关闭任何管道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T19:33:00.223

我在我的代码中遇到`java.io.IOException: Read end dead`并找出了原因。在下面发布示例代码。如果您运行代码，您将收到“Read end dead”异常。如果仔细观察，消费者线程会从流中读取“hello”并终止；同时生产者休眠 2 秒并尝试写入“世界”但失败。此处解释了一个相关问题：http: [//techtavern.wordpress.com/2008/07/16/whats-this-ioexception-write-end-dead/](http://techtavern.wordpress.com/2008/07/16/whats-this-ioexception-write-end-dead/)

```
class ReadEnd {
public static void main(String[] args) {
    final PipedInputStream in = new PipedInputStream();
    new Thread(new Runnable() { //consumer
        @Override
        public void run() {
            try {
                byte[] tmp = new byte[1024];
                while (in.available() > 0) {         // only once...
                    int i = in.read(tmp, 0, 1024);
                    if (i < 0)
                        break;
                    System.out.print(new String(tmp, 0, i));
                }
            } catch (IOException e) {
                e.printStackTrace();
            } finally {

            }
        }
    }).start();
    PipedOutputStream out = null;
    try {

        out = new PipedOutputStream(in);
        out.write("hello".getBytes());
        Thread.sleep(2 * 1000);
        out.write(" world".getBytes()); //Exception thrown here

    } catch (IOException e) {
        e.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } finally {
    }
} 
```

}

# java - 如何在 android 2.2.2 (Froyo) 中使用 BitmapRegionDecoder 代码？

> ID：10035169
> 
> 赞同：30
> 
> 时间：2012-04-05T20:00:50.223
> 
> 标签：java, android, graphics, android-ndk, backport

我正在阅读关于 SO[的另一个问题的答案](https://stackoverflow.com/a/4903455/882146)，其中@RomainGuy 评论说，可以（如果我的解释不正确，请纠正我）从更高版本的 android 到早期版本的反向移植代码。具体来说，我对将 BitmapRegionDecoder 的代码从 Android 版本 2.3.3 (Gingerbread) 反向移植到版本 2.2.2 (Froyo) 感兴趣。

我宁愿更笼统地问这个问题，因为什么是最佳实践/将代码从较新版本的 Android 反向移植到较旧版本时应该避免什么，但 stackoverflow 暗示我的问题可能因为过于主观而被关闭。

也许如果对该主题有足够的兴趣，这个问题可以“变形”成一个更普遍的问题..可能是一个社区维基？

无论如何，我都希望能深入了解这是如何完成的……无论是针对我的用例还是更一般的建议。从 java 类中调用本机方法是否会使问题复杂化（必然涉及 NDK）？

如果确实有可能（并且合理）以这种方式挑选和反向移植代码，我认为许多人会发现知道如何做非常有用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T21:52:02.280

正如@hackbod 提到的那样`BitmapRegionDecoder`，它基于外部`skia`库。然而，这可能是一个好处。

让我们检查一下原始来源：

*   `BitmapRegionDecoder.java`. 主要定义本地方法的包装器：

    ```
    private static native Bitmap nativeDecodeRegion(int lbm,
        int start_x, int start_y, int width, int height,
        BitmapFactory.Options options);
    private static native int nativeGetWidth(int lbm);
    private static native int nativeGetHeight(int lbm);
    private static native void nativeClean(int lbm);
    // ...multiply nativeNewInstance overloads follow 
    ```

    类不使用我们需要反向移植的任何新的 Java API。

*   `BitmapRegionDecoder.cpp`. 它包含的头文件包括`Froyo`除了这两个之外的头文件：

    *   `AutoDecodeCancel.h`. 它用于的唯一行：

        ```
        AutoDecoderCancel   adc(options, decoder); 
        ```

        此类处理`SkDecoder`实例生命周期。这是一小段代码，可以很好地向后移植。

    *   `SkBitmapRegionDecoder.h`

        正如文件名所述，这是一个核心组件。事实上，之前的一切都是围绕它的一种包装。好消息是我们可能不需要向后移植它，因为它应该可以`skia`从 中获取整个库`Gingerbeard`并在其下编译它，`Froyo`因为它是外部的并且不包含任何新的依赖项。

PS我实际上并没有深入研究代码，所以如果我忽略了任何内容，请纠正我。

### 更新：

我们需要的源代码位于分支上的以下存储库`froyo-release`中`gingerbread-mr4-release`：

*   [外部skia库存储库](https://github.com/android/platform_external_skia)
    *   头文件在`include/core`和`include/images`
*   [Android 框架基础](https://github.com/android/platform_frameworks_base)
    *   Java代码：`graphics/java/android/graphics/BitmapRegionDecoder.java`
    *   本机代码：`core/jni/android/graphics/...`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-31T00:55:22.673

如果某些代码可以存在于您要移植到的 SDK 之上，您可以反向移植*一些代码。*

你不能向后移植任何东西。例如，您不能向后移植内核功能。:)

在这种情况下，没有简单的解决方案来向后移植它。它的实现位于 Skia 和 jpeg 解码器之上，它们都是本机代码。您将需要自己实现该代码。您可以尝试从平台复制/粘贴代码，并使用 JNI 将其与您的代码粘合在一起，但这将是大量工作，并留下您需要继续维护的本机代码。

抱歉，没有简单的解决方案。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-07-20T17:47:45.787

您应该考虑[**BitmapRegionDecoderCompat**](https://github.com/bonnyfone/brdcompat)，它是标准[BitmapRegionDecoder](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html) (API 10+)的**API 8+版本。**

## 特征

*   它**在运行 API < 10 的设备上**使用基本的 Java/Android 后备以“兼容”模式运行（这意味着它不会像 API 10+ 的本机 JNI 实现那样高效/快速，但它会避免丑陋的样板和手动后备）。
*   它**在 API 10+ 上运行时使用本机 JNI 实现**。
*   它添加了额外的常用方法，例如**`decodeBestRegion()`**，根据您的参数（重力、大小）提取“最佳”图像子区域。此方法也适用于 API < 10。

## 下载

为了在您的项目中使用它，您可以手动下载该库并将其添加为*AAR*文件：

[![下载](../Images/782197c7084c43d3627ef98a412feda2.png)](https://bintray.com/bonnyfone/maven/org.bonnyfone.brdcompat/_latestVersion)

或者您可以在**build.gradle**中添加依赖项（需要*jCenter*存储库）：

```
dependencies {
    //...your dependecies
    compile 'org.bonnyfone:brdcompat:0.1'
} 
```

## 用法

如文档中所述，为了迁移到 BRDCompat，您只需将基类名称从更改`BitmapRegionDecoder`为`BitmapRegionDecoderCompat`：

```
//BitmapRegionDecoder brd = BitmapRegionDecoder.newInstance(...);
BitmapRegionDecoderCompat brd = BitmapRegionDecoderCompat.newInstance(...); 
```

# testing - 为什么使用 "ab" 对 Apache2 进行负载测试时并发级别没有预期的那么高？

> ID：10035172
> 
> 赞同：0
> 
> 时间：2012-04-05T20:01:10.513
> 
> 标签：testing, load, apache2, status

我在我的 CentOS 5.8 VPS 服务器（2GB RAM，2GHz 处理器）上运行 Apache2/PHP，并尝试进行基本负载测试。由于我使用的是 Apache 的标准安装，因此我假设使用的是 prefork 模型。这是配置：

```
<IfModule prefork.c>
StartServers      20
MinSpareServers    5
MaxSpareServers   20
ServerLimit      256
MaxClients       256
MaxRequestsPerChild  4000
</IfModule> 
```

我用 ab 做了一个简短的测试：

ab -q -c 100 -n 10000 mysite.com

同时我正在检查 mysite.com/server-status 并且我从未见过当前正在处理的请求数量超过 10。这怎么可能？

根据我的计算，并发请求的数量应该超过 10，理想情况下是 100。我在这里遗漏了什么还是 Apache 2 服务器状态报告错误？

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:38:51.787

你是对的，你可以看到超过 10 个请求。实际上，您可以处理更多 256 个并发请求。

但是，这里没有足够的信息来说明*为什么*您没有看到超过 10 个连接。以下是一些可能性：

*   与被测主机的慢速连接可能会减少并行连接的数量。
*   正在测试的 URL 后面的慢速应用程序可能会减少并行连接的数量
*   /client/ 中的限制可能会限制并行连接的数量。“ab”应该提供一些关于它能够达到的并发级别的报告。
*   您可能会在 Apache 配置的其他地方不小心将“MaxClients”设置为较低的值
*   ...或者您可能有其他一些 Apache 配置问题。

要提供更具体的答案，您可以考虑发布“ab”输出和整个 Apache 配置的尽可能完整的副本。

# php - 使用 PHP 包含可以在包含页面中定义包含页面吗？

> ID：10035174
> 
> 赞同：0
> 
> 时间：2012-04-05T20:01:28.563
> 
> 标签：php

> **可能重复：**
> [获取包含文件中当前 PHP 脚本的名称](https://stackoverflow.com/questions/1074944/get-name-of-current-php-script-in-include-file)
> [包含的 PHP 文件可以知道它是从哪里包含的吗？](https://stackoverflow.com/questions/5204830/can-an-included-php-file-know-where-it-was-included-from)

这个标题有意义吗？:)

您能从包含的页面中确定`PHP`您放入的`<?php include 'SomeFile.php'; ?>`页面吗？

在要“ `INCLUDED`”的页面中是否有基于抓取它的目的地的 if 语句？

我这样说对吗？

谢谢大家！

## 解决方案：

## PAGEMAIN1.php

```
<?php
$MAIN2 ='';
$MAIN1 = 'MAIN1';
include 'PAGE1.php';
include 'PAGE2.php';
include 'PAGE3.php';
include 'PAGE4.php';
?> 
```

## PAGEMAIN2.php

```
<?php
$MAIN1 ='';
$MAIN2 = 'MAIN2';
include 'PAGE1.php';
include 'PAGE2.php';
include 'PAGE3.php';
include 'PAGE4.php';
?> 
```

## PAGE1.php

```
<?php
$PAGE1 = 'PAGE1';
if($MAIN1 == 'MAIN1'){
    echo '(This is PAGE 1 being "INCLUDED" in MAIN 1)<br>';
    }
if($MAIN2 == 'MAIN2'){
    echo '(This is PAGE 1 being "INCLUDED" in MAIN 2)<br>';
    }
?> 
```

## PAGE2.php

```
<?php
$PAGE2 = 'PAGE2';
if($MAIN1 == 'MAIN1'){
    echo '(This is PAGE 2 being "INCLUDED" in MAIN 1)<br>';
    }
if($MAIN2 == 'MAIN2'){
    echo '(This is PAGE 2 being "INCLUDED" in MAIN 2)<br>';
    }
?> 
```

## PAGE3.php

```
<?php
$PAGE3 = 'PAGE3';
if($MAIN1 == 'MAIN1'){
    echo '(This is PAGE 3 being "INCLUDED" in MAIN 1)<br>';
    }
if($MAIN2 == 'MAIN2'){
    echo '(This is PAGE 3 being "INCLUDED" in MAIN 2)<br>';
    }
?> 
```

## PAGE4.php

```
<?php
$PAGE4 = 'PAGE4';
if($MAIN1 == 'MAIN1'){
    echo '(This is PAGE 4 being "INCLUDED" in MAIN 1)<br>';
    }
if($MAIN2 == 'MAIN2'){
    echo '(This is PAGE 4 being "INCLUDED" in MAIN 2)<br>';
    }
?> 
```

## PAGEMAIN1.php 的输出

```
(This is PAGE 1 being "INCLUDED" in MAIN 1)
(This is PAGE 2 being "INCLUDED" in MAIN 1)
(This is PAGE 3 being "INCLUDED" in MAIN 1)
(This is PAGE 4 being "INCLUDED" in MAIN 1) 
```

## PAGEMAIN2.php 的输出

```
(This is PAGE 1 being "INCLUDED" in MAIN 2)
(This is PAGE 2 being "INCLUDED" in MAIN 2)
(This is PAGE 3 being "INCLUDED" in MAIN 2)
(This is PAGE 4 being "INCLUDED" in MAIN 2) 
```

以防万一你想知道。;） 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:06:07.783

您可以做的是创建一个在包含子页面的所有页面中使用的全局变量。然后，您可以在子页面中检查您所在的页面。那有意义吗？;-)

**第 1 页：**

```
<?php
   $THISPAGE = "page1";
   include("subpage.php");
?> 
```

**第2页：**

```
<?php
   $THISPAGE = "page2";
   include("subpage.php");
?> 
```

**子页面：**

```
<?php
   if ($THISPAGE == "page1")
      ...
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:05:15.660

有一组[魔术常数](http://php.net/manual/en/language.constants.predefined.php)可用于获取此类信息，但我认为它们无法涵盖您想要的内容。你是否在追求类似的东西：

主文件.php：

```
<?php include('included.php'); ?> 
```

包含的.php：

```
this page was included from <?php echo __PARENTFILE __ ?> 
```

这将输出

```
this page was included from mainfile.php 
```

注意：**PARENTFILE**不存在且不起作用。只是为了弄清楚这是否是OP的意思。

# java - 通过 Java 以编程方式运行 ANT

> ID：10035188
> 
> 赞同：0
> 
> 时间：2012-04-05T20:02:30.913
> 
> 标签：java, ant, metrics

我有一个要求，我必须通过[Metrics Plugin](http://metrics.sourceforge.net/)从不同的 Java 项目（在 Eclipse 中配置）中提取指标。我正在尝试使用 ANT 构建脚本来自动化这个过程。

我制作了一个 Java 实用程序项目，它将：

1.  创建这些构建文件
2.  将它们放在 Eclipse 中配置的各个 Java 项目中
3.  尝试执行它们。

当 build.xml 正常运行时，当我尝试以编程方式运行它们时，出现以下错误：

```
Exception in thread "main" ProjectHelper.parse() must be implemented in a helper plugin org.apache.tools.ant.ProjectHelper
at org.apache.tools.ant.ProjectHelper.parse(ProjectHelper.java:277)
at com.metrics.generator.MetricsGenerator.runAntScripts(MetricsGenerator.java:69)
at com.metrics.generator.MetricsGenerator.doAutomate(MetricsGenerator.java:43)
at com.metrics.generator.MetricsGenerator.main(MetricsGenerator.java:30) 
```

我假设 parse() 方法无法正常工作，但我不明白为什么。手动运行 build.xml（这意味着 XML 文件已正确创建）。为了让 Eclipse 运行此构建，我必须进行的唯一修改是转到运行 > 外部工具 > 外部工具配置 > JRE 并选择“在与工作区相同的 JRE 中运行”

构建文件如下：

```
<project basedir="." default="init" name="projectName">
    <target name="init">
        <tstamp/>
    </target>

    <target depends="init" name="build">
        <eclipse.refreshLocal depth="infinite" resource="projectName"/>
        <metrics.enable projectName="projectName"/>
        <eclipse.build BuildType="full" ProjectName="projectName" errorFormat="xml" errorOut="errors.xml" failOnError="true"/>
        <metrics.export file="outputFile" projectName="projectName"/>
        </target>
</project> 
```

注意：[projectName] 和 [ouputFile] 目前是在创建时提供的，我只是在这篇文章中省略了它们。仅供参考，我正在使用 Eclipse Indigo。失败的代码如下所示：

```
private void runAntScripts(File[] projectFolders){
    BuildLogger logger = new DefaultLogger();
    logger.setOutputPrintStream(System.out);
    logger.setErrorPrintStream(System.out);
    logger.setMessageOutputLevel(Project.MSG_INFO);

    Project metricsProject  = new Project();
    metricsProject.addBuildListener(logger);

    ProjectHelper helper = new ProjectHelper();
    metricsProject.addReference("ant.projectHelper", helper);

    File buildFile;

    int totalFolders = projectFolders.length;
    for(int index = 0; index < totalFolders; index++){

        buildFile = new File(projectFolders[index], buildXMLFileName);

        if(buildFile.isFile()){
            helper.parse(metricsProject, buildFile);
            metricsProject.setProperty("ant.file", buildFile.getAbsolutePath());

            metricsProject.init();
            metricsProject.setBaseDir(projectFolders[index]);
            metricsProject.executeTarget("build");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T20:37:50.747

其中一个问题可能是您获取`ProjectHelper`实例的方式。尝试：

```
ProjectHelper helper = ProjectHelper.getProjectHelper(); 
```

在添加引用和设置属性`Project.init()` *之后*调用似乎也没有任何意义。为每个构建文件创建一个新项目并在调用 and 之前调用可能会`init` *更*干净。`addReference``setProperty`

# python - Python list 在一瞬间给出错误，但在另一瞬间没问题

> ID：10035192
> 
> 赞同：1
> 
> 时间：2012-04-05T20:02:38.550
> 
> 标签：python, list

```
a=[2,3,4,9a] #error
a=[2,3,4,9b] # error
.
.
.
a=[2,3,4,9j] # okay
a=[2,3,4,9k] # error
.
.
a=[2,3,4,9z] # error 
```

我明白为什么其他人会出错，但为什么`a=[2,3,4,9j]`还可以

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T20:04:15.000

`9j`是虚数（复数），因此它是有效的文字。其他的不是。可能你想要字符串，在这种情况下你应该用引号（单引号或双引号）写`'9a'`,`'9b'`等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T20:15:34.140

请参阅文档的[这一部分](http://docs.python.org/library/stdtypes.html#numeric-types-int-float-long-complex)：

> 有四种不同的数字类型：**纯整数、长整数、浮点数和复数**。[...]
> 
> 数字由数字文字或内置函数和运算符创建。未经修饰的整数文字（包括二进制、十六进制和八进制数）会产生纯整数，除非它们表示的值太大而无法表示为纯整数，在这种情况下，它们会产生长整数。带有**'L'**或**'l'**后缀的整数文字产生**长整数**（'L' 是首选，因为 1l 看起来太像十一了！）。包含小数点或指数符号的数字文字产生浮点数。**将“j”**或**“J”**附加到数字文字会产生一个**实部为零的复数**。

因此，这两个实际上是有效的表达式：

```
a=[2,3,4,9j] # okay
a=[2,3,4,9l] # no error 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T20:05:09.240

您偶然发现了 python 中的复数符号。出于某种原因，`j`用于代替`i`虚数。

# javascript - 如何使用 WebKit 开发工具调试 JavaScript 中的用户输入问题？

> ID：10035193
> 
> 赞同：0
> 
> 时间：2012-04-05T20:02:51.837
> 
> 标签：javascript, jquery, safari, webkit

我有一个问题，在多次更改选择下拉列表后，用户输入的输入被加倍、三倍、四倍等。这是一个小视频，展示了我的困境并提出了问题：[http ://screencast.com/t/7Gb01nGe787p](http://screencast.com/t/7Gb01nGe787p)

本质上，问题是如何在给定这样的情况下正确调试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:34:33.527

我认为你如何调试很大程度上取决于你的代码的结构。

如果您正在使用小部件（jquery UI 的东西、插件、外部库等），您可以随时搜索并查看它是否是已知的错误/问题。除此之外，检查配置（我已经被配置不正确多次烧毁）可能会有所帮助。还要检查冲突代码，例如您可能定义的可能干扰小部件行为的事件。在 webkit 控制台中操作对象对此特别有用，因为您可以更轻松地找出您的代码在什么情况下可以工作，在什么情况下不能工作，而不必依赖于操作 UI。

如果你没有使用其他人写的东西，那么在我看来调试会更容易一些。对我来说，这真的归结为缩小我正在寻找的范围。如果您有任何与您的问题相关的事件（onKeyUp 或其他），请将其记录下来。Console.log 可以发挥很大作用，尤其是在处理 UI 状态时，断点也可以。我不确定这是否一定是最好的方法，但我发现它在正确的情况下非常有用。

如果你真的被卡住了，你总是可以变得激烈并开始删除你的代码片段。听起来可能不是很好，但如果你真的被卡住了，似乎无法找到代码的哪一部分有问题，它至少会给你一个指示符，告诉你应该去哪里看。同样，这不是最漂亮的解决方案，但它在不止一个场合为我省去了很多麻烦。

希望这可以帮助。

# java - 使用 Mysql 的登录和安全系统

> ID：10035194
> 
> 赞同：0
> 
> 时间：2012-04-05T20:02:56.007
> 
> 标签：java, mysql

我需要为学校的一个项目制作一个具有安全性和登录系统的 java 程序

我正在考虑在具有安全级别的java中使用枚举作为安全角色：

```
public enum Role {

lECTOR(0), COORDINATOR(1), ADMINISTRATOR(2);

private int securityLevel;

Role(int securityLevel) {
    this.securityLevel = securityLevel;
}

public int returnSecurityLevel() {
    return securityLevel;
} 
```

在mysql中我正在考虑制作两个表

```
table users with a userid, username, password and security_id

roles with a security_id, rolename  this table I would link to the enum 
```

根据安全级别，我会说特定用户可以或不能做什么。

这是否是一种好的工作方式，任何建议都更受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:12:46.200

您应该考虑是否真的需要一个单独的枚举表。也许只是在用户表中有一个列。

将其保留为单独表的唯一原因是用户可以具有多个角色。

# c# - 委托分配给什么方法

> ID：10035197
> 
> 赞同：1
> 
> 时间：2012-04-05T20:03:04.577
> 
> 标签：c#, delegates

这是我在

```
private SavePreferenceCallback savePreferenceHandler;

public SavePreferenceCallback SavePreferenceHandler
{
  get
  {
    return savePreferenceHandler;
  }
  set
  {
    savePreferenceHandler = value;
  }
} 
```

然后在调试代码时遇到这样的一行：

```
savePreferenceHandler(); 
```

我不知道如何走得更远，看什么？它正在运行什么方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T20:04:42.197

按下`F11`进入代码，你会发现，基本上。或者您可以随时检查 的值`savePreferenceHandler`以查看它所代表的方法（或方法）。

侧节点：如果您使用的是 C# 3 或更高版本，则可以使该属性变得相当简单：

```
public SavePreferenceCallBack SavePreferenceHandler { get; set; } 
```

你也可以考虑把它变成一个*事件*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:05:28.940

如果您想知道将调用什么方法，可以将鼠标悬停在变量`savePreferenceHandler`上，调试器将显示分配的方法。

![在此处输入图像描述](../Images/61590e4b6a5042fafbfcd72c9438720b.png)

您还可以在属性设置器中放置断点以查看分配的方法。

最后，您可以`F11`在调用该方法时使用并进入该方法。

# jquery - jQuery 选项卡和表单域

> ID：10035198
> 
> 赞同：0
> 
> 时间：2012-04-05T20:03:08.947
> 
> 标签：jquery, forms

我向我的 jQuery UI 选项卡学习和调试日提出的另一个问题......

预计我有 20 个选项卡，上面有几个输入字段。

用户在选项卡之间切换并在不同选项卡的输入字段中输入一些数据。

在最后一个选项卡上会有一个复选按钮。

1.  检查不同选项卡中的值并跳转到带有空或错误填写的表单字段的选项卡的最佳方法是什么？

2.  我有一些可行的解决方案来解决后退按钮主题。点击后退按钮将用户返回到他不是第一个选项卡的最后一个选项卡。但是，如果用户点击后退按钮，如何避免选项卡中的用户输入（值尚未存储在数据库中，这将在单击检查按钮后完成）丢失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:30:10.457

首先，尝试发布一些代码，以便我们可以使用更具体的内容。其次，由于您要提交表单，我将假设所有字段都可以在`form`标签内找到。请注意，我还将假设您只使用文本字段。

您可以尝试以下方法：http: [//jsfiddle.net/J4bas/1/](http://jsfiddle.net/J4bas/1/)

使用它，您可以在 if 条件中找到包含有问题的输入字段的选项卡。然后可以使用此处找到的技术：[以编程方式选择和加载 jquery 选项卡](https://stackoverflow.com/questions/970838/selecting-loading-a-jquery-tab-programatically)

以编程方式加载选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:08:29.187

使用本地存储将表单数据保存到他们的浏览器，而无需打扰数据库。这是一个可以提供帮助的[jquery插件](http://archive.plugins.jquery.com/plugin-tags/localstorage)

# xcode - 重新安装 Xcode

> ID：10035203
> 
> 赞同：0
> 
> 时间：2012-04-05T20:03:26.513
> 
> 标签：xcode

我删除了应用程序文件夹中的 Xcode 文件并清空了垃圾箱。我从来没有正确卸载它。现在我想重新安装它，但安装过程中出现未知错误。有没有办法修复它以正确安装 Xcode？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:08:04.917

（假设 Xcode 4.2 或更低版本）
将系统时间设置为 2012 年 1 月 1 日或更早（但不要太早），因为签署包的证书已过期。

# javascript - 尝试将 facebook like 按钮添加到 sencha 工具栏

> ID：10035209
> 
> 赞同：1
> 
> 时间：2012-04-05T20:04:00.993
> 
> 标签：javascript, html, sencha-touch, sencha-touch-2

喜欢按钮没有显示。

**代码快照**

**我的 html 文件：**

```
.
.
.
<body>

    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
.
.
. 
```

**我的.js文件：**

```
 .
 .
 .
var navtoolbar = {
xtype : 'toolbar',
title : Ext.String.ellipsis(titlevalue,20,true),
docked : 'top',
items : [backButton,spacer,
{xtype:'container',html:'<div class="fb-like" data-href="http://test.com" data-send="true" 
data-layout="button_count" data-width="450" data-show-faces="true"></div>'}]
};
 .
 .
 . 
```

在我的应用程序的另一部分，我能够显示类似按钮（不在工具栏上）。

```
this.getItems().items[0].setHtml('<div class="category-title" >'+this.getDataList()._contentTitle+' </div><div class="fb-like" data-href="http://test.com" data-send="true" data-layout="button_count" data-width="450" data-show-faces="true"></div>'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:49:23.213

这是应该添加的代码，以便在您的工具栏中获取 facebook 按钮：

```
FB.XFBML.parse();//facebook 
```

# php - 输入到MySql，刷新值，并在php上运行公式而不刷新页面。阿贾克斯？

> ID：10035212
> 
> 赞同：0
> 
> 时间：2012-04-05T20:04:12.480
> 
> 标签：php, ajax, forms, submit

我正在修改购物车。在产品输入页面上，我在价格字段上方添加了两个字段 ( `$vendor`& )。`$percentup`这个想法是供应商价格乘以百分比创造零售`price(Price = vendorprice * percentage)`。我还想离开零售价字段手动输入价格。所有信息都被添加到 MySQL。

我在页面顶部有这个代码来做数学：

```
<?php $price_update=( (($vendor*$percentup)/100) + $vendor )?>
<?php if ($price_update > $price) $price=$price_update ?> 
```

现在我必须提交页面

```
<a onclick="$('#form').submit();" class="button"> 
```

然后返回页面以更新值，然后第二次提交对价格字段的更改以反映。

根据我对 AJAX 的了解，这听起来像是为 AJAX 构建的一个功能，但我不知道该怎么做。

在删除所有这些步骤的同时，是否有一些简单的代码可以完成上述操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T00:30:34.757

尝试使用 jQuery，更容易更快地完成任务：http: [//api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/)

也许您还想看看jQuery 方法`.post()`，`.load()`因为它们很可能会满足您的需求，因为它们具有快速的学习曲线。

* * *

OTOH，我强烈建议学习处理 AJAX 调用的独立于库的方式，因为这是关于“网络如何工作”的宝贵知识，并且可以让您免于使用比您需要的更多的东西。遵循这个简单的教程，例如：

[http://www.tizag.com/ajaxTutorial/](http://www.tizag.com/ajaxTutorial/)

# c# - 为什么此代码适用于 SQL Server Express 但*不适用于* SQL Server CE？

> ID：10035220
> 
> 赞同：0
> 
> 时间：2012-04-05T20:05:04.240
> 
> 标签：c#, sql-server, entity-framework, sql-server-ce, nullreferenceexception

`NullReferenceException`当我的目标提供程序是 SQL Server CE，但使用 SQL Server Express 时，我得到了一个。`return...`当我尝试访问`Comments`. 模型非常简单，可以从代码中推断出来。谢谢你的帮助！顺便说一句，我正在使用实体框架代码优先 4.3 和 SQL Server CE 4.0。

*   使用与 SQL Server Express 相同的代码作为提供程序 = 运行良好

*   使用与 SQL Server CE 相同的代码作为提供程序 = 异常错误

此外，我对 SQL Server CE 没有任何问题。它可以在我的机器上运行，并且我已经使用实体框架代码优先甚至 asp.net 授权完成了单表操作。我从来没有在相关实体上做过任何这样的嵌套添加/删除，所以我很好奇为什么这不起作用..

```
 db.Persons.Add(new Person()
            {
                FullName = "JC Viray",
                Comments = new List<Comment>(){
                         new Comment(){CommentContent="Hello!"},
                         new Comment(){CommentContent="World!"}
            }
            });

            db.SaveChanges();

            return db.Persons.FirstOrDefault().Comments.FirstOrDefault().CommentContent; 
```

让我感到困惑的是，在 SQL Server Express 中，如果我检查数据，就会出现注释。

在 SQL Server CE 中，只有`Persons`表有数据，而`Comments`表为空。

编辑：

如果有帮助，这里是模型：

```
 public class Person
{
    [Key]
    public int PersonId { get; set; }
    public string FullName { get; set; }

    public virtual ICollection<Comment> Comments { get; set; }
}

public class Comment
{
    [Key]
    public int CommentId { get; set; }
    public string CommentContent { get; set; }

    [ForeignKey("Person")]
    public int PersonId { get; set; }
    public virtual Person Person { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:37:22.050

问题在于：**SQL CE 错误详细信息比使用 SQL Server Express 作为提供程序时要模糊得多，**因此会造成混乱和模糊的方向。

**SQLCE 异常详细信息类似于：**

*空异常*

**SQLExpress 异常详细信息类似于：**

*自创建数据库以来，支持“MyContext”上下文的模型已更改。考虑使用 Code First 迁移来更新数据库 (http://go.microsoft.com/fwlink/?LinkId=238269)。*

解决方案是：通过添加以下代码**来同步模型：**

`Database.SetInitializer(new DropCreateDatabaseAlways<MyContext>());`

# encryption - 在 CloudPageBlob 中添加 *at rest* 加密？（不是传输加密）

> ID：10035223
> 
> 赞同：1
> 
> 时间：2012-04-05T20:05:12.697
> 
> 标签：encryption, azure, azure-storage, tde

当数据处于静止状态时，如何向 CloudPageBlob 读取和写入添加[透明加密/解密？](http://en.wikipedia.org/wiki/Disk_encryption_theory)HTTPS 只是在传输中加密......

假设我在我的桌面上运行代码并且只是使用 HTTP 来访问 blob 存储。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T06:19:07.583

好吧，据我了解，您希望在将内容传输到网络之前为内容添加额外的加密。

[要实现这一点，您必须围绕存储服务 REST API](http://msdn.microsoft.com/en-us/library/windowsazure/dd135733.aspx)创建自己的包装器，而不是使用Microsoft 提供的[存储客户端库。](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.aspx)只有使用您自己的 REST 调用者，您才能在将内容设置为[Request Body](http://msdn.microsoft.com/en-us/library/windowsazure/dd179451.aspx)之前对其进行加密/解密。然后，当您下载 blob 时，您必须从[Response Body](http://msdn.microsoft.com/en-us/library/windowsazure/dd179440.aspx)解密它们。这样您就可以实现“透明加密”。在某种程度上是透明的，因为从应用程序的角度来看，您只需调用 EncryptedBlobStorageClient.UploadBlob(path_to_local_file)。但这并不是真正透明的，因为它存在于您的应用程序中，并且您不能在没有您的应用程序的情况下使用加密的 blob。

但是，如果您希望此加密/解密存在于 Blob 服务端点上 - 这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T09:20:21.627

使用 Azure Blob 存储无法在服务器端透明地执行此操作。但是，可以使用 Amazon S3 执行此操作：

[http://aws.typepad.com/aws/2011/10/new-amazon-s3-server-side-encryption.html](http://aws.typepad.com/aws/2011/10/new-amazon-s3-server-side-encryption.html)

这通过请求标头非常简单地完成，并且没有额外费用:o)

如果您可以移动您的应用程序，或者至少将其存储移动到 S3，您可以使用它。

# php - 自动从数据库中删除退回的电子邮件地址？

> ID：10035225
> 
> 赞同：1
> 
> 时间：2012-04-05T20:05:24.053
> 
> 标签：php, mysql, linux, apache, email

我们的数据库中有一个很大的电子邮件地址列表，人们从这些地址中注册了我们其中一个网站的时事通讯。

我们有一个 cron 作业，它使用 PHP 从数据库中获取电子邮件地址并发送时事通讯。

当一封电子邮件被退回时，cron 作业管理员会收到一封关于它的电子邮件。

如果我们想要一个脚本来自动从数据库中删除退回的电子邮件地址，那么实现它的最佳方法是什么？有没有办法记录退回的电子邮件，然后让脚本解析日志，然后删除错误的电子邮件地址？或者有没有办法通过 PHP 测试退回的电子邮件地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:07:46.937

您要做的是选择一个“通用”退回电子邮件地址（例如，bounce@example.com）。您想将标题“Return-Path”设置为“bounce@example.com”。

然后，您有一个外部进程检查“bounce@example.com”收件箱中的消息。请勿将此电子邮件帐户用于除退回之外的任何其他用途。

您将在此收件箱中收到退回邮件、休假消息和其他类型的电子邮件。你只需要*训练*你的解析器在电子邮件中寻找某些模式。您的模式列表起初并不全面，但您需要不时手动查看此收件箱，以便进一步*训练*您的解析器。

您的解析器可以很简单，并寻找简单的子字符串甚至正则表达式。在大多数情况下，不需要正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:26:39.290

你需要的是反弹解析器。

您可以通过 POP3 或 IMAP 接收退回电子邮件，甚至可以从文件中读取（如果您可以配置自己的 MTA）。退回电子邮件将被发送到“返回路径”标题中指定的电子邮件地址。

据我所知，PHP 没有好的开源反弹解析器。你可以自己写。您可以从从 mailman 发现解析器开始（用 python 编写）。

# linux - 最大驻留集大小没有意义

> ID：10035232
> 
> 赞同：36
> 
> 时间：2012-04-05T20:05:33.290
> 
> 标签：linux, memory

我正在尝试测量 Linux 中正在运行的程序的内存消耗。我写了一个C程序来分配1G内存，然后用时间输出它的“Maximum resident set size”：

```
/usr/bin/time -f '%Uu %Ss %er %MkB %x %C' ./takeMem 1000000000

0.85u 0.81s 1.68r **3910016kB** 0 ./takeMem 1000000000 
```

从 开始`man time`，我应该解释为此类程序的“最大驻留集大小”占用 3.9G 内存，尽管该程序仅分配了 1G 内存。它没有任何意义。

谁能知道发生了什么导致“最大驻留集大小”如此之高？

C 代码非常简单：

```
#include <stdio.h>
#include <stdlib.h>
int main(int argc, char *argv[])
{
    int memLength = atoi(argv[1]);
    fprintf(stderr, "Allocating %d memory...", memLength);
    unsigned char* p = new unsigned char[memLength];
    fprintf(stderr, "Done\n");                                                                                                                                                       
    while (true) {
        int i = rand() % memLength;
        char v = rand() % 256;
        p[i] = v;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-12T22:34:48.683

我不久前偶然发现了这个。这是 GNU 时代的一个错误，值太大了 4 倍，因为它假定页面大小并将其转换为 kB，即使它首先已经是 kB。你可能想检查：

[http://groups.google.com/group/gnu.utils.help/browse_thread/thread/bb530eb072f86e18/83599c4828de175b](http://groups.google.com/group/gnu.utils.help/browse_thread/thread/bb530eb072f86e18/83599c4828de175b)

[http://forums.whirlpool.net.au/archive/1693957](http://forums.whirlpool.net.au/archive/1693957)

# branch - TFS - 如何创建分支

> ID：10035235
> 
> 赞同：15
> 
> 时间：2012-04-05T20:05:45.953
> 
> 标签：branch

有人知道如何在 Team Foundation Server 中创建分支吗？有没有一步一步的文件？我正在使用 TFS 2010

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T20:07:18.437

简单的。

在 TFS 中选择一个文件夹并右键单击。那里有分支/合并选项。

我喜欢这份文件 - 非常容易阅读

[http://howstevegotburnedtoday.com/2006/10/19/document-from-vss-to-tfs-an-introduction-to-team-foundation-server-version-control-from-a-visual-sourcesafe-users-看法/](http://howstevegotburnedtoday.com/2006/10/19/document-from-vss-to-tfs-an-introduction-to-team-foundation-server-version-control-from-a-visual-sourcesafe-users-perspective/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-14T16:30:45.160

我也在使用 VS 2010 Premium，我和你有同样的问题。由于您选择的答案的链接已损坏，因此我决定在 VS 2010 中与 TFS 共享我的分支程序：

1.  我打开了通常显示在 VS 2010 右侧的“团队资源管理器”窗口
2.  我双击“源代码管理”
3.  这在我的主 VS 视图中打开了“源代码管理资源管理器”。
4.  我右键单击要分支的文件夹并选择“分支”上下文菜单选项
5.  提交新创建的分支

# eclipse - Eclipse 无法识别断点

> ID：10035242
> 
> 赞同：3
> 
> 时间：2012-04-05T20:06:08.680
> 
> 标签：eclipse, debugging

在设置断点时，我在 Eclipse 中遇到了这个奇怪的错误，它刚好重叠在它上面，而没有通过调用该方法的断点。我知道它一直绕过它，因为唯一被调用的方法是在很多断点上。

有没有人遇到过这种问题或知道解决方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T06:04:17.893

确保未启用“运行 > 跳过所有断点”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T20:08:20.670

可能有很多原因：

最常见的：

*   .java 和 .class 不同步
*   运行时 JVM 的错误版本
*   从生成的类中删除调试信息
*   类路径不匹配，例如 eclipse 编译到 bin/ 并且您的运行时从 classes/ 中选择类（假设您也从命令行编译）
*   Eclipse 安装错误

首先尝试使用 clean 函数清理项目

> 项目 > 清洁...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-21T07:48:49.393

请检查您是否在 xml 文件中声明了任何 bean。如果是这样，请检查他们是否被评论，我们需要取消他们的评论。

在我的情况下，我的 xml 文件中有一个针对该特定 bean 的 bean 声明，并且在服务器启动时没有加载它。所以我的调试点没有启用。

我已取消注释我的 bean 条目，然后我可以检查调试点并且它正在工作。

希望它会有所帮助。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-09T17:42:18.030

重新启动eclipse，这次我能够正确调试。奇怪的错误我不确定知道原因和结果。

# google-maps - 在几何列中查询（由 kml 文件创建）？

> ID：10035250
> 
> 赞同：1
> 
> 时间：2012-04-05T20:06:55.037
> 
> 标签：google-maps, kml, google-fusion-tables

如果您查询

> 包含忽略大小写

然后查询将返回数据，但速度很慢。

如何在融合表的几何列中进行查询？

我用谷歌地图创建了一个 kml 文件，该文件被导入到谷歌融合表中。当我尝试在列中搜索经度和纬度`geometry`以返回经度和纬度在折线内的一个或多个点中匹配的区域的名称时。

在我的例子中，几何列存储一条折线，如下所示：

当前单元格值：

```
<LineString><coordinates>
-99.832771,16.88472,0.0
-99.832703,16.88558,0.0
-99.832703,16.88558,0.0
-99.831383,16.885441,0.0 
..... 
</coordinates></LineString> 
```

现在我尝试查询`tableid = 3427749`：

```
http://fusiontables.googleusercontent.com/fusiontables/api/query?sql=
SELECT name FROM 3427749 
WHERE ST_INTERSECTS('geometry',RECTANGLE(LATLNG(32.618591,-115.441528),LATLNG(31.954109,-115.212509))) 
```

并返回*void*但如果您尝试在矩形中绘制相同的坐标，您可以很好地看到它，如果您查看表格，该区域包含我的查询的有效坐标。

绘制同一区域：

* * *

```
 var boudns = new google.maps.LatLngBounds(new google.maps.LatLng(32.618591, -115.441528),    new google.maps.LatLng(31.954109,-115.212509));

 var rectOptions = {
          strokeColor: "#000000",
          strokeOpacity: 0.6,
          strokeWeight: 2,
          fillColor: "#000000",
          fillOpacity: 0.2,
          bounds: boudns
        };
 rect.setOptions(rectOptions);

 var myOptions = {
      center: new google.maps.LatLng(23.926013,-101.90918),
      zoom: 5,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
 map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

 rect.setMap(map);

//You need implement a div with id map_canvas and put the code in `<script>` tags. 
```

* * *

怎么了？请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:59:55.467

您在搜索 RECTANGLE 中的纬度有误。

来自[FT SELECT 参考文档](https://developers.google.com/fusiontables/docs/developers_reference#Select)

```
The syntax is: RECTANGLE(<lower_left_corner>, <upper_right_corner>) 
```

你有：

```
ST_INTERSECTS('geometry',RECTANGLE(LATLNG(32.618591,-115.441528),LATLNG(31.954109,-115.212509))) 
```

纬度 32.618591 > 31.954109 当我切换这些纬度并运行您的查询时，我得到了一个名字“Mexicali - El Faro”

# java - 在 jQuery 对话框中重新加载 Spring MVC 响应页面

> ID：10035252
> 
> 赞同：0
> 
> 时间：2012-04-05T20:07:02.760
> 
> 标签：java, javascript, jquery, spring-mvc, dialog

我正在尝试将带有 jQ​​uery 的表单提交到 Spring MVC 控制器方法，并将响应页面加载到对话框的 div 标记中。

**对话框中的 jquery**

```
$("#findbtn").click(function() {
    $("#content").load($("#searchform").submit());
}); 
```

**形式**

```
 <form id="searchform" method="POST" action="/select">
                <input type="text" id="csearch" name="csearch" /><input
                    type="button" id="findbtn" />
    </form> 
```

控制器方法

```
@RequestMapping(value = "select", method = RequestMethod.POST)
public String getSelection(Model model, @RequestParam("csearch") String find) {

    model.addAttribute("list", list);
    return "/select";
} 
```

问题是响应页面显示为新页面，而不是在对话框中。有没有办法在对话框中加载它。

注意：响应页面 (/select) 恰好与对话框中当前加载的页面相同。这意味着我想用相同的页面重新加载对话框的内容，除了列表不同。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:57:52.227

您没有`load`正确使用 JQuery（而且它不是您想要做的正确方法）。`$.load()`接受一个 URL，你提供了一个 dom 元素。

网上有很多[“jquery ajax form submit”的例子。](http://www.google.com/search?q=jquery%20ajax%20form%20submit)

```
$.ajax({type:'POST', url: '/select', data:$('#searchform').serialize(), success: function(response) {
    $('#content').html(response);
}}); 
```

# facebook - 如何防止 facebook 操作在测试期间出现在新闻源中？

> ID：10035253
> 
> 赞同：0
> 
> 时间：2012-04-05T20:07:03.167
> 
> 标签：facebook

我正在开发一个 facebook 应用程序，并希望防止从我们的开发站点生成的喜欢/故事/等出现在客户用户的新闻提要中，因为我不希望开发站点被公开。没有告诉我们的用户“测试后立即删除！”，我应该如何处理这种情况？

# c# - WCF/REST 我的 POST 有什么问题吗？

> ID：10035255
> 
> 赞同：1
> 
> 时间：2012-04-05T20:07:07.207
> 
> 标签：c#, wcf, web-services, rest

当我使用我的 Windows 窗体应用程序发布（第二次代码和平）时，当我使用 buttonclick 2 进入我的数据网格中获取学生集合时，没有任何显示我可以对成员进行硬编码并且获取没有问题，但我不能发布？当我为我的帖子单击 button1 时，我得到的回复在消息框中显示 OK？所以不太清楚我做了什么......

```
 [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "")]
    void AddStudent(Student student);

            XDocument xDoc = XDocument.Load(uri);
            var students = xDoc.Descendants("Student")
                .Select(n => new
                {
                    StudentNo = n.Element("StudentID").Value,
                    Firstname = n.Element("FirstName").Value,
                    Surname = n.Element("LastName").Value
                })
                .ToList();

            dataGridView1.DataSource = students;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:24:43.357

您是否在每次呼叫激活模式下运行？如果是这样，每个客户端请求都会获得一个新的专用服务实例，因此您`List<>`每次都被重新创建为空。

请参阅此[参考文章](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx)。您必须在调用之间保留您的列表，无论是在缓存还是数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:37:32.747

您的服务正在执行您在代码中编写的内容。`ListStudents`不断返回相同的学生列表，`AddStudent`对列表不做任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T20:28:42.110

您的 AddStudent 未添加到列表中

```
public void AddStudent(Student student)
{
    student.StudentID.ToString();
    student.FirstName.ToString();
    student.LastName.ToString();
} 
```

GetStudentCollection 返回相同的硬编码值。

```
static List<Student> students = new List<Student>();
public void AddStudent(Student student)
{
   students.Add(student);

}

public List<Student> GetStudentCollection()
{
    return students;
} 
```

# iphone - 没有在 Xcode 中调用 didReceiveData

> ID：10035256
> 
> 赞同：1
> 
> 时间：2012-04-05T20:07:12.883
> 
> 标签：iphone, objective-c, xcode, web-services, soap

NSURL 委托 didReceiveData 方法没有被调用，但是 didReceiveResponse 和 didFinishLoading 被调用了。我浏览了许多在线帖子，但无法获得任何关于为什么我没有收到任何数据的线索。有人可以告诉我我在代码中发生了什么。任何帮助表示赞赏。这是我的代码：

```
- (IBAction)buttonClicked:(id)sender {
NSString *soapMsg = 
[NSString stringWithFormat:
 @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
 "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xlmns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
 "<soap:Body>\n"
 "<GetAllCarsJson xmlns=\"http://cscserver2.carrollu.edu/tshah2/\">\n"
 "</GetAllCarsJson>\n"
 "</soap:Body>\n"
 "</soap:Envelope>"]; 

//---print it to the Debugger Console for verification---
//NSLog(@"%@",soapMsg);
NSURL *url = [NSURL URLWithString:@"http://cscserver2.carrollu.edu/tshah2/CarService.asmx"];
NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];

//---set the headers---
NSString *msgLength = [NSString stringWithFormat:@"%d",[soapMsg length]];
[req addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[req addValue:@"http://cscserver2.carrollu.edu/tshah2/GetAllCarsJson" forHTTPHeaderField:@"SOAPAction"];
[req addValue:msgLength forHTTPHeaderField:@"Content-Length"];

//---set the HTTP method and body---
[req setHTTPMethod:@"POST"];
[req setHTTPBody: [soapMsg dataUsingEncoding:NSUTF8StringEncoding]];

//[activityIndicator startAnimating];
conn = [[NSURLConnection alloc] initWithRequest:req delegate:self];
[conn start];

NSLog(@"Connection = %@", conn);
if (conn) 
{
    //webData = [[NSMutableData data] ];
    webData = [[NSMutableData alloc] initWithCapacity:2048];
    //[[NSMutableData data] retainArguments];
}
}

- (void) connection:(NSURLConnection *) connection didReceiveResponse:(NSURLResponse *)response
{
    NSLog(@"soapMsg1: %d", [webData length]);
    //webData = [[NSMutableData alloc] initWith:
    [webData setLength:0];
}

- (void) connection:(NSURLConnection *) connection didReceiveData:(NSData *)data
{
    NSLog(@"DONE1111");
    [webData appendData:data];
    //NSLog(webData);

}

- (void) connection:(NSURLConnection *) connection didFailWithError:(NSError *)error
{
    NSLog(@"ConnectionFailed");
    //[webData release];
    //[connection release];
}

- (void) connectionDidFinishLoading:(NSURLConnection *) connection
{
    NSLog(@"DONE. Received Bytes: %d", [webData length]);
    NSString *theXML = [[NSString alloc] initWithBytes:[webData mutableBytes] length:             [webData length] encoding:NSUTF8StringEncoding];

    //shows the XML
    NSLog(theXML);
    //[theXML release];
    //[activityIndicator stopAnimating];
    //[connection release];
    connection = nil;
    webData =nil;

}

- (void) dealloc
{
    //[activityIndicator release];
    //[xmlParser release];
    //[soapResults release];
    //[super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:21:55.687

检查 http 响应代码。使用 NSHTTPURLResponse 类的 - (NSInteger)statusCode 方法。是200还是其他？

# linq - 包含使用 Lambda 表达式

> ID：10035261
> 
> 赞同：5
> 
> 时间：2012-04-05T20:07:57.937
> 
> 标签：linq, entity-framework, lambda, linq-to-entities

在基于字符串的重载中，`Include`我们指定包含一个集合，然后简单地通过按正确顺序指定相关导航属性来向下一级引用：

```
query.Include("Level1Collection.Level2Reference"); 
```

但是为什么在`Include`使用 lambda 表达式的重载时，我们还必须使用`Select`语句来指定上述查询：

```
query.Include(e => e.Level1Collection.Select(l1 => l1.Level2Reference)). 
```

为什么以下工作不起作用：

```
query.Include.(e => e.Level1Collection.Level2Reference) 
```

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T20:28:07.213

因为编译器没有识别出上下文已经将集合属性的含义从集合更改为集合中对象的替代。而且由于编译器不会根据上下文进行更改，智能感知也不会。

当您输入 Include 一个字符串语句时，它知道它必须使用反射来知道无论如何要包含哪些属性，并且编译时没有类型检查。底层方法知道，当它在字符串中的集合属性后面看到一个点时，它应该解析集合中对象的属性以获取下一个引用的属性，而不是集合本身（在本例中为“Level2Reference”）。

或者换句话说：这很神奇。:)

# php - 使用 Codeigniter 表单助手有意义吗？

> ID：10035266
> 
> 赞同：3
> 
> 时间：2012-04-05T20:08:24.927
> 
> 标签：php, codeigniter

我认为它很容易通过仅通过 html 创建表单并且不使用表单助手。使用表单助手有什么好处？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T20:57:08.953

使用表单助手，您可以获得很多好处：

*   激活 xss/csrf 保护
*   清理帖子数据
*   多语言标签
*   验证
*   唯一的数据库验证
*   简单的表格修改
*   轻松设置表单字段值

我建议你看看：

[表单验证](http://codeigniter.com/user_guide/libraries/form_validation.html)

[表单助手](http://codeigniter.com/user_guide/helpers/form_helper.html)

[朗帮手](http://codeigniter.com/user_guide/helpers/language_helper.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T02:30:12.227

我发现它有帮助主要有两个原因：

1.  `form_open()`可以为您做很多事情，例如解析操作 URL、添加 CSRF 隐藏字段等。如果您稍后决定要启用/禁用 CSRF，如果您虔诚地使用该功能，这是一个简单的布尔开关。

2.  `form_dropdown()`是救命稻草，特别是如果您想重新填充现有值或提供默认值。我很少想到手动编写此逻辑比提供数据数组和默认值更容易。

除此之外，其他功能很重要，取决于您如何使用验证等。

因为它是一个**助手，所以只有在对你有***帮助*时才使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T20:13:51.120

他们帮助您制作表格。如果你能做到，那就去做吧，我发现任何自动生成的程序都比帮助更有害。这是因为他们经常使用廉价的样式来获得他们想要的东西。从本质上讲，他们永远不会选择*最好*的解决方案，而是选择最简单的解决方案。

另外，请阅读常见问题解答，因为我认为社区不会喜欢这种问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T20:22:37.727

我认为使用表单助手的主要好处是它可以帮助验证规则、清理输入和添加对 XSS 的保护。

# ruby-on-rails-3 - 如何让 rails-ckeditor 显示公用文件夹中已有的文件？

> ID：10035267
> 
> 赞同：1
> 
> 时间：2012-04-05T20:08:28.313
> 
> 标签：ruby-on-rails-3, ckeditor

我正在使用 FCk 编辑器，最近使用（[https://github.com/galetahub/rails-ckeditor](https://github.com/galetahub/rails-ckeditor)）转移到 ckeditor。

但我没有找到一种方法来显示我的`/public/images/`. 由于 rails-ckeditor 的浏览会根据 ckeditor-assets 表中输入的记录显示数据。

我如何使用它在点击浏览时显示已经存在的图像？

# regex - VBA Regex .Replace 方法中允许多少个参数？

> ID：10035270
> 
> 赞同：0
> 
> 时间：2012-04-05T20:08:45.740
> 
> 标签：regex, vba, parameters, replace, backreference

！我正在使用 VBA 正则表达式的替换方法，想知道它可以接受多少个参数？我已经看到提供了许多不同选项的 msdn 页面，但我不确定该使用哪个。这是该页面的链接：[MSDN 页面：Regex.Replace 方法](http://msdn.microsoft.com/en-us/library/h0y2x3xs%28v=vs.71%29.aspx)

如果可能的话，我希望能够在“替换为”参数中使用反向引用和其他 VBA 正则表达式。

例如，我目前只能这样做（文字替换）

```
 RE6a = RE.Replace(strData, " ") 
```

我想这样做，例如：

```
 RE6a = RE.Replace(strData, \s) 
```

或者

```
 RE6a = RE.Replace(strData, \1 \3 \4) 
```

如何在 VBA 正则表达式中执行此操作？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:24:16.243

VBA 没有正则表达式。要使用它们，您必须首先引用一个正则表达式库。

如果发生这种情况是因为您引用了 Microsort VBScript 正则表达式库，那么您将在[文档](http://msdn.microsoft.com/en-us/library/k9z80300%28v=vs.85%29.aspx)中找到答案：

```
' Swap first pair of words.
MsgBox(ReplaceTest("(\S+)(\s+)(\S+)", "$3$2$1")) 
```

# objective-c - Obj C - 可用窗口区域

> ID：10035276
> 
> 赞同：0
> 
> 时间：2012-04-05T20:09:10.460
> 
> 标签：objective-c, user-interface, window, size, resize

看来，当我在 mac 应用程序中发送一个窗口时：

```
 NSRect frame = sender.window.frame;
NSLog(@"\nHeight and width of window frame: (%f,%f).\nThe x and y origin of the window frame: (%f,%f). ", frame.size.height, frame.size.width, frame.origin.x, frame.origin.y);
frame.origin.y -= 22;
frame.size.height += 22;
[sender.window setFrame:frame display:YES animate:NO]; 
```

尽管它看起来延伸得更长，但没有一个 UI 元素（按钮）识别窗口有更多空间。他们无法进入开辟的新空间。

我有几个按钮应该留在窗口的按钮上，我将以下内容与上面的代码结合使用以将它们保持在一起：

```
CGRect quitBF = quitButton.frame;
quitBF.origin.y -= 5; // new y coordinate
quitButton.frame = quitBF;
CGRect loadBF = loadButton.frame;
loadBF.origin.y -= 5; // new y coordinate
loadButton.frame = loadBF;
CGRect saveBF = saveButton.frame;
saveBF.origin.y -= 5; // new y coordinate
saveButton.frame = saveBF;
CGRect resetBF = resetButton.frame;
resetBF.origin.y -= 5; // new y coordinate
resetButton.frame = resetBF; 
```

然而，当它们到达窗口的旧尺寸时，它们开始消失。就连窗口也显得更长了。谢谢你。

编辑：查看了窗口本身的自动调整大小。意识到问题与窗口内的 NSView 有关。该视图包含所有 UI 元素，并且它似乎在窗口更改时不会更改。现在唯一的问题是，我不知道如何从底部而不是从顶部扩展视图。（增加顶部和移动原点不起作用，因为所有 UI 元素都随 NSView 移动）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T05:20:07.740

问题可能是您如何设置自动调整大小。如果您仅激活顶部支柱，它应该按照您的意愿运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:56:59.260

按钮正在消失，因为视图的原点没有跟上窗口的移动。以下让它无缝地移动窗口并一起查看......因为我没有正确设置链接，但它可以正常工作：

```
 [mainWindow disableScreenUpdatesUntilFlush];
[mainWindow disableFlushWindow];

NSRect frame = sender.window.frame;
NSRect viewFrame = mainView.frame;

viewFrame.size.height += 25;
frame.size.height += 25;
frame.origin.y -= 25;

[sender.window setFrame:frame display:YES animate:NO];
mainView.frame = viewFrame;

[mainWindow enableFlushWindow]; 
```

# ios - xcode - phonegap

> ID：10035277
> 
> 赞同：0
> 
> 时间：2012-04-05T20:09:22.587
> 
> 标签：ios, xcode, cordova, vimeo

有谁知道如何获取以下代码并使其在 phonegap 中工作？

```
// Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    //return (interfaceOrientation == UIInterfaceOrientationPortrait);
    if(UIInterfaceOrientationIsPortrait(interfaceOrientation)) {
        return(YES);
    }

    if(UIInterfaceOrientationIsLandscape(interfaceOrientation)) {
        return([movieController isFullscreen]);
    }

return(NO);
} 
```

我试图基本上允许本机 ios 媒体播放器旋转到横向模式，但让我的应用程序的其余部分处于纵向模式。关于我如何做到这一点的任何想法？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:28:02.247

查看 your_project_name-Info.plist “支持的界面方向”和“支持的界面方向（iPad）”

# pyjamas - 睡衣事件处理

> ID：10035279
> 
> 赞同：0
> 
> 时间：2012-04-05T20:09:33.367
> 
> 标签：pyjamas

我很难理解 Pyjamas/GWT 事件处理系统。我目前正在使用最新的 0.8 睡衣进行测试。我不确定最好的事件处理结构是什么，因为我从未做过 GUI 编程。

到目前为止，我对找到的文档不太满意。有人知道睡衣或 GWT 的好参考吗？

我的主要困难来自于理解诸如 onClick、onMouseleave 等监听器的来源？它们是如何触发的？它们在哪里定义？我定义它们吗？

事件处理系统的分层结构是什么？

我知道这些是非常笼统的问题，但我真的只是在寻找正确方向的观点。

谢谢您，我感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:04:40.063

我建议您在示例文件夹中研究源代码。从这个[http://pyjs.org/book/output/Bookreader.html#Getting%20Started开始](http://pyjs.org/book/output/Bookreader.html#Getting%20Started)

有一些对我有帮助的链接：http: [//gwt.google.com/samples/Showcase/Showcase.html](http://gwt.google.com/samples/Showcase/Showcase.html)

[http://pyjs.org/examples/](http://pyjs.org/examples/)

在示例文件夹中还有一个很好的示例`showcase`，它为您提供了所有 API 和一些有用的代码示例 /localhost/somedir/showcase/output/Showcase.html

由于 API 相似，您可以随时查看它们的书籍（特别有助于理解回调等）：

[http://www.amazon.com/Beginning-Google-Web-Toolkit-Professional/dp/1430210311/ref=sr_1_12?ie=UTF8&qid=1334659695&sr=8-12](https://rads.stackoverflow.com/amzn/click/com/1430210311)

[http://www.amazon.com/Google-Toolkit-Applications-Ryan-Dewsbury/dp/0321501969/ref=sr_1_7?ie=UTF8&qid=1334659695&sr=8-7](https://rads.stackoverflow.com/amzn/click/com/0321501969)

对于 Django 和睡衣 [http://www.derekschaefer.net/2011/02/08/pyjamas-django-pure-win/](http://www.derekschaefer.net/2011/02/08/pyjamas-django-pure-win/)

但是，我同意除了 hello world 示例之外，还非常需要更好的介绍教程。我自己也在为此苦苦挣扎。祝你好运

附言。我创建了似乎可行的小回调示例。如果人们在这里纠正我并编辑此示例以对人们更有用，我会很高兴。我在这里要做的就是使用 2 个页面进行导航（由 2 个类表示：Intro 和 Outro）

```
    导入 pyjd
    从 pyjamas.ui.VerticalPanel 导入 VerticalPanel  
    从 pyjamas.ui.RootPanel 导入 RootPanel
    从 pyjamas.ui.SimplePanel 导入 SimplePanel
    从 pyjamas.ui.DockPanel 导入 DockPanel
    从 pyjamas.ui.Hyperlink 导入超链接
    从 pyjamas.ui.Button 导入按钮
    从 pyjamas.ui.HTML 导入 HTML
    从睡衣导入窗口

    类站点（SimplePanel）：
        def onModuleLoad(self):
            SimplePanel.__init__(self)

            self.panel = DockPanel()
            self.intro = 介绍（）
            self.outro = Outro()
            self.index = HTML('index')
            self.curPage = self.index

            vp=垂直面板（）
            vp.add(self.index)

            self.link1 = Hyperlink('菜单项 1')
            self.link2 = Hyperlink('菜单项 2')
            self.link1.addClickListener(getattr(self, 'onLINK1'))
            self.link2.addClickListener(getattr(self, 'onLINK2'))

            self.panel.add(self.link1, DockPanel.WEST)
            self.panel.add(self.link2, DockPanel.WEST)

            self.panel.add(self.index, DockPanel.CENTER)
            RootPanel().add(self.panel)

        def onLINK1(self):
            self.panel.remove(self.curPage, DockPanel.CENTER)
            self.panel.add(self.intro, DockPanel.CENTER)
            self.curPage = self.intro

        def onLINK2（自我）：
            self.panel.remove(self.curPage, DockPanel.CENTER)
            self.panel.add(self.outro, DockPanel.CENTER)
            self.curPage = self.outro

    类介绍（SimplePanel）：
        def __init__(self):
            SimplePanel.__init__(self)
            self.vp = VerticalPanel()
            self.html = HTML('这是介绍')
            self.button = Button('点击我', self)
            self.vp.add(self.html)
            self.vp.add(self.button)
            self.setWidget(self.vp)

        def onClick(self):
            Window.alert('onClick Intro')

    Outro 类（SimplePanel）：
        def __init__(self):
            SimplePanel.__init__(self)
            self.vp = VerticalPanel()
            self.html = HTML('这是结尾')
            #我们可以这样做
            self.button1 = Button('click me1', getattr(self, 'onBUTTON1'))
            self.button2 = Button('点击 me2')
            #或者设置监听器
            self.button2.addClickListener(getattr(self,'onBUTTON2'))
            self.vp.add(self.html)
            self.vp.add(self.button1)
            self.vp.add(self.button2)
            self.setWidget(self.vp)

        def onBUTTON1(self):
            Window.alert('来自 button1 的你好')
        def onBUTTON2(self):
            Window.alert('来自 button2 的你好')

    如果 __name__ == '__main__'：
        pyjd.setup('./Site.html')
        应用程序 = 网站（）
        app.onModuleLoad()
        pyjd.run()  

```

# python - 如何判断两个网页内容是否相似？

> ID：10035280
> 
> 赞同：3
> 
> 时间：2012-04-05T20:09:36.330
> 
> 标签：python, nlp, machine-learning, text-mining, semantic-analysis

给定 2 个 html 源，我想首先使用类似的东西从中提取主要[内容](http://code.google.com/p/boilerpipe/)。还有[其他更好的库](http://tomazkovacic.com/blog/122/evaluating-text-extraction-algorithms/)吗？我正在专门寻找 Python/Javascript 的库？

一旦我有两个提取的内容，我想返回一个介于 0 和 1 之间的分数，表示它们有多相似，例如来自 CNN 和 BBC 的关于同一主题的新闻文章将具有更高的相似度分数，因为它们是关于相同的主题或网页Amazon.com 和 Walmart.com 上的相同产品也会获得高分。我怎样才能做到这一点？是否有现有的图书馆已经这样做了？我可以使用哪些好的库？基本上我正在寻找[自动摘要](http://en.wikipedia.org/wiki/Automatic_summarization)、[关键字提取](http://en.wikipedia.org/wiki/Terminology_extraction)、[命名实体识别](http://en.wikipedia.org/wiki/Named_entity_recognition)和[情感分析](http://en.wikipedia.org/wiki/Sentiment_analysis)的组合。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T20:36:44.330

您的问题中有很多内容。我将尝试为您提供一个库，否则会向您推荐可以解决您的任务的算法（您可以使用 Google 搜索，您将获得许多 python 实现）

**第 1 点**。要从 html (http://nltk.googlecode.com/svn/trunk/doc/book/ch03.html) 中提取主要内容以及其他与 NLP 相关的内容，您可以查看 NLTK。它是用 Python 编写的。您还可以查看一个名为 BeautifulSoup 的库，它很棒 (http://www.crummy.com/software/BeautifulSoup/)

**第 2 点**。当你说：

一旦我有两个提取的内容，我想返回一个介于 0 和 1 之间的分数，表示它们有多相似......

为此，我建议您可以使用任何无监督学习聚类技术来聚类您的文档集。由于您的问题属于基于距离度量的聚类，因此您应该很容易对相似的文档进行聚类，然后根据它们与聚类质心的相似性为它们分配分数。尝试 K-Means 或自适应共振理论。在后者中，您不需要提前定义集群的数量。或者，正如 larsman 在他的评论中指出的那样，您可以简单地使用 TF-IDF (http://www.miislita.com/term-vector/term-vector-3.html)

**第 3 点**。当你说：

基本上，我正在寻找自动摘要、关键字提取、命名实体识别和情感分析的组合

对于自动总结，使用非负矩阵分解

对于关键字提取，使用 NLTK

对于命名实体识别，使用 NLTK

对于情绪分析，使用 NLTK

# facebook - Graph API：检索用户共享的所有帖子

> ID：10035285
> 
> 赞同：0
> 
> 时间：2012-04-05T20:09:53.353
> 
> 标签：facebook, facebook-graph-api, facebook-fql

有没有办法检索特定用户重新共享的所有帖子？我正在尝试获取我的朋友重新分享的所有帖子的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:40:36.687

是的。Graph API url`/me/friends`将为您提供您的朋友及其 id 的列表。`/[id]/feed`将向您显示用户的墙（您`[id]`用他们的 ID 替换）。

[API 文档](https://developers.facebook.com/docs/reference/api/)是一个有用的资源，Graph [API Explorer](https://developers.facebook.com/tools/explorer)工具也是如此，您可以在其中试用并查看它的实际效果。

# android - 如何为打开新活动构建字符串

> ID：10035286
> 
> 赞同：0
> 
> 时间：2012-04-05T20:09:56.673
> 
> 标签：android

我正在尝试制作一个简单的程序，可以在点击列表中的项目时打开一个新活动。为了节省一些编码，我尝试了这个：

```
package info.test.htas;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class xfelt extends ListActivity {

String[] bygning = getResources().getStringArray(R.array.bygning_array);

public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    setContentView(R.layout.xfelt); 
    ListView lv = (ListView)findViewById(R.id.xfelt);
    lv.setAdapter(new ArrayAdapter<String>(
            this, android.R.layout.simple_list_item_1, 
            bygning));
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {

    if("Byg. 1".equals(bygning[position]))
        {startActivity(byg1.class);}
    else if("Byg. 2".equals(bygning[position]))
        {startActivity(byg2.class);}
    else if("Byg. 3".equals(bygning[position]))
    {startActivity(byg3.class);}
    else if("Byg. 4".equals(bygning[position]))
    {startActivity(byg4.class);}
    else if("Byg. 5".equals(bygning[position]))
    {startActivity(byg5.class);}        
}

} 
```

但是编译器无法识别该`startActivity`函数。怎么来的？

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:12:14.203

尝试`startActivity(new Intent(this, byg2.class))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:15:46.257

您需要致电：

```
startActivity(new Intent(this, byg1.class)); //and so on with byg2, byg3, byg4... 
```

# database - 使用 Intermapper 进行 Postgres 监控

> ID：10035287
> 
> 赞同：1
> 
> 时间：2012-04-05T20:10:00.357
> 
> 标签：database, postgresql, monitoring, probe

有人知道一个 Intermapper 探针来测试一个 SQL 数据库是否存在并且被踢吗？

计划 B：有人知道编写这样一个探针的基本步骤吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T17:56:05.803

根据维基百科，[InterMapper](http://en.wikipedia.org/wiki/InterMapper)支持 SNMP。[pgsnmpd](http://pgsnmpd.projects.postgresql.org/)是一个现成的 PostgreSQL SNMP 代理。您可以开箱即用地连接两者。

否则：InterMapper 据说是用 Java 编写的。它还将自己的数据存储在 PostgreSQL 中。从一开始就**调用**一个通用的 JDBC 探针或至少一个 PostgreSQL。所以最好的解决方案是打电话给他们并说服他们默认提供这样的探测——如果他们在某个地方还没有这样做的话。

关于计划 B：[支持页面](http://www.intermapper.com/support/product-documentation.aspx)有一个文档描述了创建自定义探针的过程。快速浏览它会留下三个选项：

*   定义你自己的探测类型——通过修改一些 XML
*   使用基本上调用外部程序的“命令行探针”。在 Linux/Unix 上，编写一个`psql`用于连接数据库并发出一些愚蠢命令的脚本似乎也并不复杂。
*   他们有 Nagios 对命令行探针的支持，并且有很多[Nagios-PostgreSQL](http://exchange.nagios.org/directory/Databases/Plugins/PostgresQL)插件可用。

当然，您可以使用[贡献的探针](http://www.intermapper.com/support/probes.aspx)页面来获得足够的示例——“应用程序监控探针”部分中的 MS-SQL 探针可能是一个好的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:31:48.523

今天我不能帮助你使用 Intermapper，但编程部分取决于“活着和踢”对你意味着什么。

一种相当安全的编程方法是让一个 cron 作业在一个事务中将一行写入表中，然后在另一个事务中将其读回。您可能只需要一个时间戳。这应该从客户端计算机运行，而不是在服务器本身上运行。

写入失败*应该*会引发错误，但我想可能会有一些深奥的失败场景可能不会发生。然而，读回同一行应该是生活的确凿证据。

这样的程序会告诉您 dbms 正在运行和处理，并且有一个特定的数据库在线。您可能需要也可能不需要更多。有些人可能需要知道处理这些 SQL 语句需要多长时间，而时间过长意味着在用户开始调用之前需要您的注意。

对数据库权限的更改可能会引发错误警告。例如，如果傻瓜升级撤销了您写入心跳表的权限，那么写入该表的程序应该会失败并出现权限错误。

如果您的要求不那么严格，您可以只检查正在运行的服务器守护程序。

所有这些事情都可以通过 cron 作业完成，失败时发送电子邮件或 SMS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-26T19:47:01.213

Intermapper 可以使用 Nagios 探针（参见 Set Probe->Miscellaneous->Nagios Plugin 下）。您可以购买对您更有意义的探针并将其安装为 Nagios 插件。

# c++ - 使用 Qt 读取、写入和搜索文本文件

> ID：10035288
> 
> 赞同：0
> 
> 时间：2012-04-05T20:10:12.073
> 
> 标签：c++, qt

我（再次）被 Qt 困住了，我正在尝试从文本文件中读取文本。以下是文本文件包含的内容：

```
1001 James Bark
1002 Jeremy Parker
1003 Seinfeld Parker
1004 Sigfried FonStein
1005 Rabbun Hassan
1006 Jenniffer Jones
1007 Agent Smith
1008 Mister Anderson 
```

不要问名字是从哪里来的。我需要能够索引此文件并将其添加到表中。截至目前，该表如下所示：

```
|--------------------------------|
|          |First Name|Last Name | 
|--------------------------------|
|1001      |          |          |  
|--------------------------------| 
|          |          |          |
|--------------------------------|      
|          |          |          |
|--------------------------------|      
|          |          |          |      
|--------------------------------| 
```

但它需要看起来像这样

```
 |--------------------------------|
    |          |First Name|Last Name | 
    |--------------------------------|
    |1001      |James     |Bark      |  
    |--------------------------------| 
    |1002      |Jeremy    |Parker    |
    |--------------------------------|      
    |1003      |Seinfeld  |FonStein  |
    |--------------------------------|      
    |1004      |Rabbun    |Hassan    |      
    |--------------------------------| 
```

桌子部分和放入物品不是问题。问题在于读取格式类似于顶部示例的文本文件。另外，我不需要这样格式化。我可以有 3 个不同的文本文件，其中 ID、Fname 和 Lname 分隔在这些文件中。这会很麻烦，但如果我必须这样做，我会的。

所以我的问题是我到底如何通过这个文件索引并获取这些值？

这是一个函数：

```
Function(){
    QString fileName = "C:\\Users\\Gabe\\SeniorProj\\Students.txt";
    QFile mFile(fileName);

    if(!mFile.open(QFile::ReadOnly | QFile::Text)){
        qDebug() << "Could not open file for reading";
        return;
    }

    QTextStream in(&mFile);
    QString mText = in.readAll();

    mFile.flush();
    mFile.close();
    } 
```

这段代码是我从某处的一些教程中获得的。一切正常，我检查了我是否可以访问该文件，一切都很好。但是如何处理它......我有一个等于所有文本的字符串。这不是很有用。所以我尝试了我在 c++ 中使用的东西，比如`mFile.nextInt();`那个函数不存在！！！

如何在文本文件中搜索 Qt 中的特定内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T21:05:30.690

如果名称可以包含空格，这种文件格式会给您带来很多麻烦，因为您无法知道名字或最后一个名称是否包含两个部分。考虑使用其他字符作为分隔符，例如：

```
1001;James;Bark
1002;Jeremy;Parker
1003;Seinfeld;Parker 
```

然后一次读取一行（参见 QTextStream 的文档）并将 QString 拆分为 QStringList：

```
QTextStream stream(stdin);
QString line;    
do {
    line = stream.readLine();
    QStringList parts = line.split(";", QString::KeepEmptyParts);
    if (parts.length() == 3) {
        QString id        = parts[0];
        QString firstName = parts[1];
        QString lastName  = parts[2];
    }        
} while (!line.isNull()); 
```

# iphone - iPhone 有没有办法使用命令行生成 .app 文件？

> ID：10035289
> 
> 赞同：1
> 
> 时间：2012-04-05T20:10:13.873
> 
> 标签：iphone

我刚刚升级了我的 Xcode ide。我有3个登录名。在我没有升级 Xcode 的登录中，无论我做什么，模具都将不再构建应用程序文件。我删除了文件，进行了清理，并构建了几次。

我想知道是否可以使用命令行构建应用程序文件?????? 或者有人知道如何解决这个问题吗？？？泰德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:20:03.653

您可以使用该`xcodebuild`命令从命令行构建项目。但是，尚不清楚您的实际问题是什么，如果您的项目无法构建，那么构建 using 不太可能`xcodebuild`改变这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:19:19.067

转到命令行并尝试`man xcodebuild`. 它应该向您显示所有选项。

# java - 连接到 SQL Server 时出现 SQL 异常

> ID：10035291
> 
> 赞同：2
> 
> 时间：2012-04-05T20:10:26.980
> 
> 标签：java, sql-server-2008, jdbc

我知道这是一个重复的问题。我发现了与他们非常相似的问题和解决方案，但我仍然对此感到震惊。

我正在使用 eclipse 将我的 java 应用程序与 microsoft sql server 2008 数据库连接起来。以下是我的代码

```
 import java.sql.*;
public class ConnectionTest2 {
  public static void main(String [] args) {
    try {
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        String connectionUrl = "jdbc:sqlserver://localhost:1433;databaseName=Sample;integratedSecurity=true";
        Connection con = DriverManager.getConnection(connectionUrl,"","");
        System.out.println("Connected");
        } catch (SQLException e) {
            System.out.println("SQL Exception: "+ e.toString());
        } 
catch (ClassNotFoundException cE) {
            System.out.println("Class Not Found Exception: "+ cE.toString());
        }
  }
} 
```

我通过进入 sql server 配置管理器并在 IPALL 下将端口号设置为 1433 来启用 tcp/ip 和 VIA。

我已经尝试了很多方法，但我无法找到以下错误的解决方案

> SQL 异常：com.microsoft.sqlserver.jdbc.SQLServerException：与主机 localhost、端口 1433 的 TCP/IP 连接失败。错误：“连接被拒绝：连接。验证连接属性。确保 SQL Server 实例正在主机上运行并在端口接受 TCP/IP 连接。确保与端口的 TCP 连接未被防火墙阻止."。

我还禁用了 Windows 防火墙，但无法连接。

请帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T22:26:06.483

我遇到了这个问题，我通过为服务器实例启用 TCP/IP 协议来解决它。你可以这样做

1.  打开 SQL Server 配置管理器
2.  展开 SQL Server 网络配置
3.  选择 MSSQLSERVER 的协议
4.  启用 TCP/IP

在此之后，您需要重新启动 SQL Server 服务才能使其生效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T20:13:28.043

这就是它所说的：连接被拒绝。你试过'telnet 1433'吗？

# c++ - 使用带有 libcxx 的套接字函数 bind() 编译代码失败

> ID：10035294
> 
> 赞同：13
> 
> 时间：2012-04-05T20:10:28.290
> 
> 标签：c++, c++11, bind

我正在使用新的 libcxx 库，并且我有一个调用套接字函数的代码`bind()`。问题是，当我键入`using namespace std;`编译器时，以下代码会出现错误：

```
int res = bind(sockfd, (struct sockaddr *)&myAddr, sizeof(myAddr)); 
```

使用 clang (svn build) 的错误：

```
error: no viable conversion from '__bind<int &, sockaddr *, unsigned long>' to 'int'
 int res = bind(sockfd, (struct sockaddr *)&myAddr, sizeof(myAddr)); 
```

我认为问题在于`using namespace std;`将函数`std::bind()`从标头`<functional>`带到范围（尽管不包括标头）。由于我正在使用使用整个命名空间 std 的第三方库，因此我无法轻松地将类名更改为完全限定名。

我想知道这是否是库实现中的问题，或者 C++11 中是否有一些新规则可能会破坏使用`bind()`. 对此的任何想法将不胜感激。

谢谢

罗马

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-05T20:23:30.030

这在库的实现中不是问题。C++11 中引入了自己的**[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)**函数`namespace std`，用于将参数绑定到函数，并支持一点高阶编程。

拥有的原因`namespace std`是为了帮助防止新的库函数和类对现有代码造成重大更改。这样做的原因是所有东西都有一个以 开头的名称`std::`，这可以防止名称冲突。

但是，如果您`using namespace std;`在程序中编写代码，那么您将面临像这样的潜在重大变化，因为 free 函数`bind`和函数`std::bind`不一定能消除歧义。

要解决此问题，您可以调用`bind`as`::bind`以明确它在全局命名空间中，或者您可以删除`using namespace std;`程序顶部的 。

希望这可以帮助！

# php - PHP POST Rest Service，保存通过 $_FILES 发送的图像

> ID：10035299
> 
> 赞同：0
> 
> 时间：2012-04-05T20:10:52.460
> 
> 标签：php, rest, file-upload, curl

我制作了一个很大程度上基于[本教程](http://www.gen-x-design.com/archives/create-a-rest-api-with-php/)的 REST 服务。我还制作了一个很大程度上基于[本教程](http://www.gen-x-design.com/archives/making-restful-requests-in-php/)的 REST 请求库。（基本上，一堆`switch`on `$_SERVER['REQUEST_METHOD']`）。该 api 还使用 cURL 发出请求。

```
protected function executePost ($ch)
{
    if (!is_string($this->requestBody))  
    {  
        $this->buildPostBody();  
    }  

    curl_setopt($ch, CURLOPT_POSTFIELDS, $this->requestBody);  
    curl_setopt($ch, CURLOPT_POST, 1);  

    $this->doExecute($ch); 
}

protected function doExecute (&$curlHandle)
{
    $this->setCurlOpts($curlHandle);  
    $this->responseBody = curl_exec($curlHandle);  
    $this->responseInfo = curl_getinfo($curlHandle);  

    curl_close($curlHandle);  
} 
```

我有 2 个简单的 HTML 表单，一个带有 get 方法，一个带有 post 方法。当我将其中一个与简单的输入文本一起使用时，效果很好。我毫无问题地获取/返回服务中的值。

但我需要从 HTML 表单发送图像，在我的服务中接收它，然后将其保存在服务器上。

这是我午餐时对服务进行查询的部分。

```
print_r($_FILES);
//move_uploaded_file( $_FILES["image1"]["tmp_name"], "Images/" . $_FILES["image1"]["name"] ); when uncommented, This line actually works and save the image in my folder.

include("RestUtils.php");

$request = new RestRequestOperator('http://localhost:8080/REST/RestControler.php/user/1', 'POST', $_FILES);  
$request->execute(); 
```

在我的服务中，我收到图像信息，即 tmp_name 和名称。当我尝试使用 move_uploaded_file( 和正确的参数保存图像时，它不起作用。

我意识到在 tmp 文件夹中保存“短时间”的图像文件有某种魔力。当我打电话给我的服务时，图像已经被删除了？

总结：我想知道是否可以将图像发送到 PHP REST API 并将其保存在他们的服务器上。

编辑：我在服务中添加。

```
if(file_exists($_POST["image1"]["tmp_name"] )){
     echo "file EXISTS<br>";
}else echo "NOPE.<br>";

if(is_uploaded_file($_POST["image1"]["tmp_name"] )){
     echo "is_uploaded_file TRUE<br>";
}else echo "is_uploaded_file FALSE<br> .";

if(move_uploaded_file( $_POST["image1"]["tmp_name"], "Images/" .$_POST["image1"]["name"] )){
     echo "move_uploaded_file SUCCESS ";
}else echo "NOT move_uploaded_file"; 
```

输出：文件 EXISTS ， is_uploaded_file FALSE，NOT move_uploaded_file 这意味着文件实际上仍然存在于服务中，但上传的文件返回错误，可能是因为我在服务中使用 POST 数组而不是 $_FILES 数组，它在我的服务中是空的…………

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:08:25.747

找到它，适用于本地 wamp PHP 5.3.4 ！

```
public static function processRequest()
{
    case 'post':
       if(move_uploaded_file($_FILES["uploaded_file"]["tmp_name"] , "Images/" . $_FILES["uploaded_file"]["name"] )){
                    echo "move_uploaded_file SUCCESS ";
    ......................................                
}
......................................           
protected function executePost ($ch)
{
    $tmpfile = $_FILES['image1']['tmp_name'];
    $filename = basename($_FILES['image1']['name']);

    $data = array(
        'uploaded_file' => '@' . $tmpfile . ';filename='.$filename,
    );
    curl_setopt($ch, CURLOPT_POST, 1);             
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data); 
    //no need httpheaders
    $this->doExecute($ch); 
} 
```

谢谢。戴夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:36:23.217

检查 POST 的编码类型。在表单中，它需要是“multipart/form-data”，所以我假设您的 POST REST 调用需要具有类似的编码类型才能使文件上传正常工作。

# iphone - UITabBar selectionIndicator图像填充

> ID：10035302
> 
> 赞同：20
> 
> 时间：2012-04-05T20:11:09.657
> 
> 标签：iphone, uitabbar

我`UITabBar`为此设置了自定义指标图像

```
UIImage *tabBarSelectedImage = [[UIImage imageNamed:@"tabBar_selected"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
[[UITabBar appearance] setSelectionIndicatorImage:tabBarSelectedImage]; 
```

并在我的`tabBarSelectedImage`. 是否可以将该填充设置为0px？这样我的`tabBarSelectedImage`填充了整个空间并且没有边框可见？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-30T09:47:06.477

我找到了一种更简单的解决方案：

```
self.tabBar.frame = CGRectInset(self.tabBar.frame,0,-6); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T12:43:05.293

这是您问题的解决方案...我实际上并没有这样做...我正在做其他事情，但是以下代码会对您有很大帮助...首先我告诉您我做了什么...

1.  我做了一个分类`UITabbar`并在其中实现了以下方法

    ```
    - (void)recolorItemsWithColor:(UIColor *)color shadowColor:(UIColor *)shadowColor 
    shadowOffset:(CGSize)shadowOffset shadowBlur:(CGFloat)shadowBlur
    {
    CGColorRef cgColor = [color CGColor];
    CGColorRef cgShadowColor = [shadowColor CGColor];
    for (UITabBarItem *item in [self items]) {

    if ([item respondsToSelector:@selector(selectedImage)] &&
        [item respondsToSelector:@selector(setSelectedImage:)] &&
        [item respondsToSelector:@selector(_updateView)])
    {
        CGRect contextRect;
        contextRect.origin.x = 0.0f;
        contextRect.origin.y = 0.0f;

        //instead of following line you can give our own desired size of contextRect. 
        //just change the method parameters and include a parameter of desired size in it.
        // and this desired size would be the tabbarbutton size...so you will pass the size of 
        // you tabbarbutton here...because on the back of image there is a tabbarbutton and if
        // set the image of button size it will occupy whole the are of button.

        contextRect.size = desired size //[[item selectedImage] size];
        // Retrieve source image and begin image context
        UIImage *itemImage = [item image];
        CGSize itemImageSize = [itemImage size];

        CGPoint itemImagePosition; 
        itemImagePosition.x = ceilf((contextRect.size.width - itemImageSize.width) / 2);
        itemImagePosition.y = ceilf((contextRect.size.height - itemImageSize.height) / 2);
        UIGraphicsBeginImageContext(contextRect.size);
        CGContextRef c = UIGraphicsGetCurrentContext();

        // Setup shadow
        CGContextSetShadowWithColor(c, shadowOffset, shadowBlur, cgShadowColor);

        // Setup transparency layer and clip to mask
        CGContextBeginTransparencyLayer(c, NULL);
        CGContextScaleCTM(c, 1.0, -1.0);
        CGContextClipToMask(c, CGRectMake(itemImagePosition.x, -itemImagePosition.y,
        itemImageSize.width, -itemImageSize.height), [itemImage CGImage]);

        // Fill and end the transparency layer
        CGContextSetFillColorWithColor(c, cgColor);
        contextRect.size.height = -contextRect.size.height;
        CGContextFillRect(c, contextRect);
        CGContextEndTransparencyLayer(c);

        // Set selected image and end context
        [item setSelectedImage:UIGraphicsGetImageFromCurrentImageContext()];
        UIGraphicsEndImageContext();
        // Update the view
        [item _updateView];
       }
       }

       } 
    ```

    现在我在我的自定义类 UITabbarController 中调用了上述方法...我重写了该方法
    `-(void)setSelectedIndex:(NSUInteger)selectedIndex`并在该方法中执行了以下操作。

    ```
     -(void)setSelectedIndex:(NSUInteger)selectedIndex {
           self.selectedViewController = [self.viewControllers objectAtIndex:selectedIndex];
           NSLog(@"selectedIndex:%d, totalCount:%d",selectedIndex,[self.tabBar.subviews count]);
       for (uint i=1; i < [self.tabBar.subviews count]; i++)
       {
          UIView *view = [self.tabBar.subviews objectAtIndex:i];
          NSLog(@"class:%@",NSStringFromClass([view class]));
       if ([NSStringFromClass([view class]) isEqualToString:@"UITabBarButton"])
       {
        //view.frame = CGRectMake(view.frame.origin.x, view.frame.origin.y,  
        view.frame.size.width, self.tabBar.frame.size.height);
          NSLog(@"selectedIndex:%d,i:%d",self.selectedIndex,i);
        if (self.selectedIndex+1==i) {
            [self.tabBar recolorItemsWithColor:[UIColor whiteColor] shadowColor:[UIColor 
                                blackColor] shadowOffset:view.frame.size shadowBlur:0.5];

        }
        } 
        }

        } 
    ```

您可以优化代码以避免进行分类或子类化......但为此您必须掌握目标 C。如果有任何问题，您可以告诉我。干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-13T10:04:12.537

好吧，我发现只有在使用可调整大小的图像时才会出现填充。使用不可调整大小的图像时，填充不存在。

因此，一个可能的解决方案是子类化 UITabBar 并`selectionIndicatorImage`在项目大小更改时配置。

```
@interface TKTabBar

@end

@implementation TKTabBar
{
    CGSize _selectionIndicatorImageSize;
}

- (void)tk_refreshSelectionIndicatorImageForItemSize:(CGSize)itemSize
{
    // Recompute the selection indicator image only if the size of the item has changed.
    if (!CGSizeEqualToSize(itemSize, _selectionIndicatorImageSize))
    {
        _selectionIndicatorImageSize = itemSize;

        // Compute here the new image from the item size.
        // In this example I'm using a Cocoa Pod called UIImage+Additions to generate images dynamically.

        UIImage *redImage = [UIImage add_imageWithColor:[UIColor add_colorWithRed255:208 green255:75 blue255:43] size:CGSizeMake(itemSize.width, 2)];
        UIImage *clearImage = [UIImage add_imageWithColor:[UIColor clearColor] size:CGSizeMake(itemSize.width, itemSize.height)];
        UIImage *mixImage = [clearImage add_imageAddingImage:redImage offset:CGPointMake(0, itemSize.height-2)];

        // Finally, I'm setting the image as the selection indicator image.
        [self setSelectionIndicatorImage:mixImage];
    }
}

// Using the layout subviews method to detect changes on the tab size
- (void)layoutSubviews
{
    [super layoutSubviews];

    // Only needed if at least one item
    if (self.items.count > 0)
    {
        CGSize itemSize = CGSizeZero;

        // Iterating over all subviews
        for (UIView *view1 in self.subviews)
        {
            // Searching for "UITabBarButtons"
            if ([view1 isKindOfClass:NSClassFromString(@"UITabBarButton")])
            {
                itemSize = view1.bounds.size;
                break;
            }
        }

        // Applying the new item size
        [self tk_refreshSelectionIndicatorImageForItemSize:itemSize];
    }
}

@end 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-14T01:26:39.560

1.  首先，`setSelectionIndicatorImage`要`[UIColor clearColor]`
2.  其次，*在*将任何视图控制器添加到之前`tabbarcontroller`，请将您的图像作为子视图添加到选项卡栏。然后它将作为指示图像出现在 tabbaritems 下
3.  实现`tabbarcontroller delegate`改变图像位置的方法。

我已经实现了这种方式，并且效果很好。`tabbar`如果您想针对不同的方向调整大小，您应该稍微调整一下。您可以子类化`UITabbarController`并实现`layoutSubview`方法。

# .net - 设计模式中的 XamlParseExceptions - 使设计模式无用

> ID：10035303
> 
> 赞同：1
> 
> 时间：2012-04-05T20:11:14.493
> 
> 标签：.net, silverlight, xaml, c#-4.0, mvvm

好的，所以我有一个 MVVM Silverlight 应用程序

最近，似乎我的每一个视图都会引发 XamlParseException，因为它找不到我在 app.xaml 文件中定义的静态资源。

我很肯定这些视图都曾经在设计模式下工作，但现在都没有了。

在 xxx\ obj\Debug\Views\SeatDetails.gics：第 63 行，位于 xxx\Views\SeatDetails.xaml.cs 中的 USRWeb.Main.Views.Scheduling.SeatDetails..ctor()：第 25 行

那么，为什么这突然改变了我，我该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:34:50.927

它看起来（对我来说） - 正如 Bryant 所建议的那样，您已将控件添加到缺少设计器模式检查的页面中。

SeatDetails.gics 是一个生成的文件，我认为它是作为隐藏代码生成的，用于在您的页面上声明您的控件等。在设计模式下，这些控件中的一个（或多个）看起来正在尝试运行一些不应该运行的代码。

# android - 如何在android中后台运行程序？

> ID：10035304
> 
> 赞同：1
> 
> 时间：2012-04-05T20:11:20.390
> 
> 标签：android

我有这个代码：

```
package com.powergroupbd.timer;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class TimerActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */

    EditText minute, seconds;
    Button fire;
    String min, sec;
    TextView Remain;
    MyCount timercount;
    Intent serviceIntent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        initializer();
        fire.setOnClickListener(this);
    }

    private void initializer() {

        minute = (EditText) findViewById(R.id.etMinute);
        seconds = (EditText) findViewById(R.id.etSeconds);
        fire = (Button) findViewById(R.id.bFireTimer);
        Remain = (TextView) findViewById(R.id.tvRemain);
        serviceIntent = new Intent(TimerActivity.this, MyService.class);
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {

        case R.id.bFireTimer:

            min = minute.getText().toString();
            sec = seconds.getText().toString();
            int MIN = Integer.parseInt(min);
            int SEC = Integer.parseInt(sec);
            long TIME = (MIN * 60) + SEC;
            timercount = new MyCount(TIME * 1000, 1000);
            timercount.start();

            startService(serviceIntent);

            break;
        }

    }

    public class MyCount extends CountDownTimer {

        public MyCount(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish() {
            // some script here

            Remain.setText("0:0");
        }

        @Override
        public void onTick(long millisUntilFinished) {

            // some script here
            int remseconds = (int) millisUntilFinished / 1000;
            int remminuts = remseconds / 60;
            remseconds = remseconds % 60;
            remminuts = remminuts % 60;
            Remain.setText(String.format("%d : %02d", remminuts, remseconds));

            // Remain.setText(""+millisUntilFinished);

        }
    }

} 
```

我将一些数值放入编辑文本中，然后从该值倒计时到零。但是当我重新启动这个应用程序时，它会从头开始，并且必须再次输入这些值。但是当我不在该应用程序中时，我想在后台进行倒计时。我在这里使用了服务，我的服务类代码在这里：

```
package com.powergroupbd.timer;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;

public class MyService extends Service {

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onStart(Intent intent, int startId) {
        // TODO Auto-generated method stub
        super.onStart(intent, startId);
    }

    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
    }

} 
```

但是什么都没有，现在该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:29:21.323

一般来说，没有办法一直在后台运行。当内存不足时，后台服务会被操作系统终止。尝试将警报（如`AlarmManager`）与持久变量（例如存储在 中`Preferences`）结合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:41:50.243

听起来您希望在后台继续计数，这可以通过后台进程来完成。我认为在 android api 中有更好的方法，但是

[关于服务的类似stackoverflow问题](https://stackoverflow.com/questions/7742988/what-happens-if-i-startservice-from-oncreate-in-activity-finish-the-activity/7781308#7781308)

如果您只是想让计数器在您离开的地方重新启动，您需要管理您的生命周期。在退出时保存数字并在启动时重新加载。

[流程生命周期文档](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

# actionscript-3 - 如何在 Flash CS5 中暂停“如果碰撞”？

> ID：10035305
> 
> 赞同：0
> 
> 时间：2012-04-05T20:11:21.810
> 
> 标签：actionscript-3

这是碰撞

```
 if(blue2.hitTestObject(_helicopter))

            {
                trace("YOU HIT THE BLOCK!");
                ihit = true;
                _helicopter.x = 76;
                _helicopter.y = 217;
            } 
```

是否可以在该碰撞代码中添加暂停功能^？是这样，请问我在那里写什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:22:18.837

暂停在您的上下文中有点难以解释。

例如，如果您的游戏有一个进入帧处理程序，您可以停止所有游戏动画一段时间。或者，也许你想冻结一个“你成功了！” 消息一段时间，而背景动画仍在运行。

一种方法是使用计时器。它是异步的，但这里的最终结果是在一段时间（毫秒）后调用一个函数。

在此示例中，代码执行 5 秒后，匿名函数响应时间到了：

```
// needed imports:
import flash.events.TimerEvent;
import flash.utils.Timer;

if (blue2.hitTestObject(_helicopter))
{
    trace("YOU HIT THE BLOCK!");
    ihit = true;
    _helicopter.x = 76;
    _helicopter.y = 217;

    var timer:Timer = new Timer(5000); // 5-seconds
    timer.addEventListener(TimerEvent.TIMER, function(event:TimerEvent):void
    {
        timer.reset();
        timer.removeEventListener(TimerEvent.TIMER, arguments.callee);
        trace("5-seconds after hitting the block.");
    });
    timer.start();
} 
```

如果您不喜欢匿名函数，可以将其实现为：

```
// needed imports:
import flash.events.TimerEvent;
import flash.utils.Timer;

if (blue2.hitTestObject(_helicopter))
{
    trace("YOU HIT THE BLOCK!");
    ihit = true;
    _helicopter.x = 76;
    _helicopter.y = 217;

    var timer:Timer = new Timer(5000); // 5-seconds
    timer.addEventListener(TimerEvent.TIMER, collisionWaitHandler);
    timer.start();
}

// ... later in its own function:

protected function collisionWaitHandler(event:TimerEvent):void
{
    var timer:Timer = Timer(event.currentTarget);
    timer.reset();
    timer.removeEventListener(TimerEvent.TIMER, collisionWaitHandler);

    trace("5-seconds after hitting the block.");
} 
```

# python - Python 3.0.1 集合.计数器

> ID：10035312
> 
> 赞同：-1
> 
> 时间：2012-04-05T20:12:11.570
> 
> 标签：python, collections, python-3.x, counter

在 Python 3.0.1 中，我试图在文档中的任何地方都使用模块的`Counter`一部分`collections`……没有什么说模块的这一部分在 Python 3.0.1 中不可用。但...

```
from collections import Counter
from collections import counter
from Collections import Counter
from Collections import counter 
```

对我来说所有的产量错误......为什么会这样？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:15:38.373

`collections.Counter`在 3.1 版中添加。要么升级到 3.2，要么自己实现类。这里有一个食谱[。](http://code.activestate.com/recipes/576611-counter-class/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T20:28:35.793

不要使用**3.0——**它在到达时基本上已经死了，因为它有严重的问题。获得 3.2，或至少 3.1。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T20:16:26.277

该类`Counter`在 python 的 3.0.1 版本中不存在。它出现在 3.1 版本中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T20:17:37.920

计数器没有出现在 3.0.1 的手册中：http: [//docs.python.org/release/3.0.1/library/collections.html](http://docs.python.org/release/3.0.1/library/collections.html)

它似乎首先出现在 3.1 中： http: [//docs.python.org/release/3.1/library/collections.html](http://docs.python.org/release/3.1/library/collections.html)

# javascript - 选项道具更改默认选定值 - Jquery

> ID：10035321
> 
> 赞同：3
> 
> 时间：2012-04-05T20:12:37.253
> 
> 标签：javascript, jquery, html, attr, prop

所以我有一个选择列表，如果默认值没有更改，`---`则返回表单 false。几乎是出于验证目的，所以我们知道他们选择了一个标题。问题是由于某种原因`prop()`将默认值更改为最低值。有没有办法防止这种情况发生？这是一个JSFiddle：

[JSFiddle 链接](http://jsfiddle.net/EzPEz/5/)

这是代码：

**HTML**

```
<form onSubmit="return checkSelect()">
<select id="title" name="title"> <option value="---">---</option> <option value="Administrator">Administrator</option> <option value="Asst. Admin.">Asst. Admin.</option> <option value="Director">Director</option> <option value="Asst. Director">Asst. Director</option> <option value="IT Director">IT Director</option> <option value="Manager">Manager</option> <option value="Medical Officer">Medical Officer</option> <option value="Other">Other</option> </select>
    <input type="submit" value="submit" />
</form> 
```

​<strong>JS

```
function checkSelect(){
try{
    var val = $('#title option').attr('selected', 'selected').val();
    alert(val);
    return false;
    }
    catch(err){
        alert(err.message);
    }
} 
```

​<strong>编辑

我试图更改为 attr() 以查看是否有帮助，但它会产生同样的问题:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:15:09.513

您使用的`attr(attribute, value)`功能是将属性设置为一个值，请参阅[attr doc](http://api.jquery.com/attr/#attr2)。尝试改变：

```
var val = $('#title option').attr('selected', 'selected').val(); 
```

到：

```
var val = $('#title option:selected').val(); 
```

看到[这个 jsfiddle](http://jsfiddle.net/zNK72/)。

# css - 如何更改修剪字符串上最后几个字符的透明度

> ID：10035324
> 
> 赞同：0
> 
> 时间：2012-04-05T20:12:48.153
> 
> 标签：css

这是问题所在：

*   我有一个名称不同长度的项目列表。
*   如果名称更长，我想将名称修剪为 140 像素。
*   作为向用户展示字符串被修剪的一种很好的干净方式，我想降低名称最后几个字符的透明度，或者至少创造这种错觉。
*   我**不想**使用省略号...效果有几个很好的理由。

我这可能在纯 CSS 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:17:48.540

当然可以，使用 CSS。您有两种选择，但实际上只有第一种才能在跨浏览器中获得最佳效果。

这个想法是在包含字符串的元素的右侧覆盖一个伪元素。这仅适用于纯色背景色，因为我们将使用该颜色“淡化”到。

HTML

```
<span>This string ends with an gradient to the background color overlayed</span> 
```

CSS

```
span {position:relative;}
span.overlay:after {
    content:"\0020";
    display:block; width:50px; 
    position:absolute; right:0px; top:0px; bottom:0px; z-index:2;
    background-image:-webkit-linear-gradient(right, rgba(255,255,255,1), rgba(255,255,255,0));
    background-image:-moz-linear-gradient(right, rgba(255,255,255,1), rgba(255,255,255,0));
    background-image:-ms-linear-gradient(right, rgba(255,255,255,1), rgba(255,255,255,0));
    background-image:-o-linear-gradient(right, rgba(255,255,255,1), rgba(255,255,255,0));
    background-image:linear-gradient(right, rgba(255,255,255,1), rgba(255,255,255,0));
    /* Or use an actual png image fading to white for IE < 10 support */
} 
```

该`:after`元素适用于所有浏览器，IE8+。IE10+中`-ms-gradient`唯一的，所以要么弄清楚如何使用旧的 ie 渐变滤镜，要么使用 PNG 图像。

还有另一种较新的 CSS 方法，但 *目前仅受 webkit（Chrome 和 Safari）支持，* `mask-image` . 在这里，您可以使用图像或 CSS 渐变来遮盖元素。相同的原则，除了您实际上可以淡化元素（如果您的文本在模式上）。

```
span{
    -webkit-mask-image: -webkit-linear-gradient(right, rgba(0,0,0,0) 0px, rgba(0,0,0,1) 50px);
} 
```

你可以看看这个 jsfiddle：http: [//jsfiddle.net/rgthree/b96sv/](http://jsfiddle.net/rgthree/b96sv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:15:04.343

是的，您可以这样做，但您必须将每个尾随字符包装在 a 中`<SPAN>`，并为每个字符设置 CSS 不透明度。

# java - 是否可以使用 GWT 构建像独立小部件（如滑块或日期选择器等）的 jquery？

> ID：10035329
> 
> 赞同：1
> 
> 时间：2012-04-05T20:13:18.433
> 
> 标签：java, javascript, jquery, gwt

是否可以构建独立的小部件而不是 GWT 中的完整应用程序？例如，我可以使用创建滑块小部件作为 jquery 插件，并使用它向我现有的 HTML 页面（可能是 JSF 或 JSF 等生成 HTML）添加交互性以及来自第三方的其他一些基于 jquery 的小部件同一页？这可能与 GWT 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:48:19.823

简短的回答是肯定的。基本上，您的 html 页面有一个容器，用于存放具有指定 ID 的 gwt 小部件。然后在你的 gwt 模块中你会这样写：

```
RootPanel.get("ContainerId").add(MyWidget) 
```

请记住，这可能会变得复杂，尤其是在 gwt 小部件和 html 页面之间进行通信时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:21:23.700

看看[GWT 导出器](http://code.google.com/p/gwt-exporter/)。

它最初是为了让非 GWT 开发人员可以使用 Chronoscope：[http ://code.google.com/p/gwt-chronoscope/](http://code.google.com/p/gwt-chronoscope/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:19:54.207

是的，您可以，并且一些标准小部件已经实现了静态方法来附加它们而无需使用 Rootpanel（因此您可以进行“DOM 编程”），例如查看 HTML Widget。为此目的，它具有静态方法包装：

```
public static HTML wrap(Element element) {
    // Assert that the element is attached.
    assert Document.get().getBody().isOrHasChild(element);

    HTML html = new HTML(element);

    // Mark it attached and remember it for cleanup.
    html.onAttach();
    RootPanel.detachOnWindowClose(html);

    return html;
} 
```

因此在您的代码中，您可以使用它来将小部件附加到现有的 DOM 元素：

```
HTML html = HTML.wrap(Document.get().getBody().getFirstChildElement());

//or using selector engine (maybe wrapped Sizzle?):
HTML html = HTML.wrap(GSizzle.findOne("div.someClass:first")); 
```

您可以在小部件中制作类似的静态方法：

```
class MyWidget extends Widget {
    public static MyWidget wrap(Element element) {
        MyWidget w = new MyWidget(element);
        w.onAttach();
        RootPanel.detachOnWindowClose(w);
        return w;
    }

    //Widget has protected constructor Widget(Element)
    //but it only creates widget but onAttach is called as Widget 
    //is added to Parent Widget-Panel
    protected MyWidget(Element e) {
        super(e);
    }

    //"plain" constructor for widget-panel-workflow
    public MyWidget() {
        super(Document.get().createDivElement());
    }
} 
```

但关键是在附加到 dom 之前调用小部件受保护的方法 onAttach - 它将小部件订阅到全局 dom 事件广播器，并在小部件上调用 RootPanel.detachOnWindowClose 以防止内存泄漏。

# excel - 空间对齐的日期单元格格式

> ID：10035330
> 
> 赞同：2
> 
> 时间：2012-04-05T20:13:27.037
> 
> 标签：excel

我想按如下方式格式化我的日期：

```
12/24/2012
 1/15/2012
 1/ 4/2012
12/ 3/2012 
```

我希望以下自定义格式可以解决问题：`_m/_d/yyyy`. 但是，当我尝试使用它时，我收到以下错误消息：

> Microsoft Excel 不能使用您键入的数字格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:28:36.473

我不知道单独使用单元格格式的任何方法。如果您在 A1 中有一个日期，您可以使用 B1 中的公式使其看起来像这样，即

`=MID(SUBSTITUTE("/"&TEXT(A1,"mm/dd/yyyy"),"/0","/ "),2,10)`

然后使用具有固定字符宽度的字体，如 courier

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:35:35.197

好问题。我能得到的最接近的是`_m/dd/yyyy`，其中“_”代表一个空格。结果如下所示：

```
 1/08/2012
  1/09/2012
  1/10/2012
  1/11/2012
  1/12/2012
 12/12/2012 
```

我喜欢它在不到九点的日子里没有间隙的样子。

编辑哈！我突然意识到领先的空间什么都不做。在摆弄这个时，肯定会为树木而失去森林。

# php - PHP 函数重载 - 如何？

> ID：10035333
> 
> 赞同：2
> 
> 时间：2012-04-05T20:13:35.757
> 
> 标签：php

```
public function makeTweet( $DatabaseObject, $TextObject, $MessageObject)
{
    if( $DatabaseObject == NULL )
    {
        $DatabaseObject = new Database();
        $TextObject = new Text();
        $MessageObject = new Message();
    }
    $TweetObject = new ControlTweet();        
    $TweetObject->setObjects($DatabaseObject, $TextObject, $MessageObject);
    return $TweetObject;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:17:07.513

您不能在 PHP 中重载函数。请参阅此页面以供参考：[http ://www.daniweb.com/web-development/php/threads/19978/overloading-php-functions](http://www.daniweb.com/web-development/php/threads/19978/overloading-php-functions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:17:15.777

您可以在函数声明中添加可选参数，例如：

```
public function makeTweet( $DatabaseObject, $TextObject, $MessageObject = null) 
```

现在你可以这样做：

```
$obj->makeTweet($db, $text, $messageObj); 
```

或者

```
$obj->makeTweet($db, $text); 
```

这是您可以在 PHP 中获得的最接近的值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-05T20:21:31.313

PHP 函数**可以**“重载”。在函数中使用[`func_get_args`](http://php.net/manual/en/function.func-get-args.php)和设置任何变量。

您还可以将关联数组作为单个变量提交。然后你可以在函数内部使用 extract 来制作友好的变量。

```
$vars = array('key1'=>'value1','key2'=>'value3');

function function_name($v){
     extract($v);

    //do something
} 
```

要使函数表现不同，您需要确定变量是什么。通过这种方式，您可以反映重载的想法。

# php - 使用 Sessions 更新 PHP 购物车数量

> ID：10035335
> 
> 赞同：0
> 
> 时间：2012-04-05T20:13:47.827
> 
> 标签：php, handler, add

发布此问题后，我提出了另一个解决方案，而不是每次使用 for 循环添加一个我可以说的：

```
$session->cart[$params->id] => $qty; 
```

我发现这是一种更好的方法，因为您可以通过这种方式更新购物车，而不是将所需的数字添加到购物车中已有的内容中。

对于所有阅读这篇文章的人，我想出了一个使用处理程序更新购物车的解决方案。如下。. . 首先是 details.php 的表单部分

```
<form method="post"> //should be added to retrieve the qty data from the text field. 
```

处理程序中的下一个。. .添加以下循环和变量

```
$qty = $_POST['qty']; or $qty = $_REQUEST['qty']; 
```

然后

```
for($i =0; $i < $qty ; $i++){
  ++$session->cart[$params->id];
} 
```

* * *

我正在使用 php 创建一个购物车网站来处理一些任务。我很难更改购物车中某件商品的数量。这是我用来获取输入处理提交并在购物车视图中显示数量的代码

详细信息.php：

```
 <form id="cart_form" action="handler-add-cart.php">
     <input type="hidden" name="id" value="<?php echo $product->id ?>" />
     <input type="submit" value="add to cart"/>
    **Quantity:<input type="text" name="qty" />**
    </form> 
```

handler_add_cart.php：

```
<?php
require_once "include/Session.php";
$session = new Session();
**$params = (object) $_REQUEST;
++$session->cart[$params->id];**
header("location: cart.php"); 
```

购物车.php：

```
 <?php
    require_once "include/Session.php";
    $session = new Session();
    require_once "include/db.php";

    // The $cart array simplifies the view generation below, keeping 
    // computations and database accesses in this controller section.
    $cart = array();
    if (isset($session->cart)) {
    $total = 0;
    foreach ($session->cart as $prod_id => $qty) {
    $product = R::load("products", $prod_id);
    $total += $qty * $product->price;

    $entry = new stdClass();  // entry will contain info for table
    $entry->id = $prod_id;
    $entry->price = $product->price;
    $entry->name = $product->name;
    **$entry->qty =  $qty ;**
    $cart[] = $entry;
    }
    }
    ?> 
```

// 在这里，我删除了一些 html 以专注于我的问题我在文件中有所有标签，所以这不是问题

```
 <h2>Cart</h2>

    <?php if (count($cart)): ?>

     <table id="display">
      <tr>
       <th>product</th><th>id</th><th>quantity</th><th class='price'>price</th>
      </tr>
      <?php foreach ($cart as $entry): ?>
       <tr>
        <td><a href="details.php?id=<?php echo $entry->id ?>"
            ><?php echo $entry->name ?></a></td>
        <td><?php echo $entry->id ?></td>
        **<td class='qty'><?php echo $entry->qty ?></td>**

             i cleared these fields below to not distract from the issue im having
        <td >
         </td>
       </tr>
      <?php endforeach ?>
      <tr>
       <th >

       </th>
      </tr>
     </table>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:31:43.603

要使用表格中输入的值增加数量，请执行以下操作：-

```
$entry->qty =  $qty + $_POST['qty']; 
```

虽然您可能想要验证用户是否输入了一个数字并且该表单已发布，但您可能想要类似的内容：-

```
if (isset($_POST['qty']) && is_numeric($_POST['qty])) {
   $entry->qty =  $qty + $_POST['qty'];
}
else
{
   $entry->qty =  $qty;
} 
```

# grails - 在 grails gsp 标签中，我如何显示对象 A 的列表，它们都属于对象 B？

> ID：10035341
> 
> 赞同：0
> 
> 时间：2012-04-05T20:14:23.230
> 
> 标签：grails, gsp

我是 grails 的新手，学习它很有趣。我有两个对象 A 和 B，它们具有多对多关系，根据我的模型 A 有很多 B，但 B 也可以属于多个 A。当 A 只有一个 B 或没有 B 时，一切正常。当 A 有很多 B 时，我得到一个`java.lang.ArrayIndexOutOfBoundsException`错误，这就是我的标签的样子：

```
<g:if test="${A?.Bs}">
   <g:each in="${A?.Bs}" var="x">
      <span class="property-value" aria-labelledby="Bs-label">
         <g:link controller="B" action="show" id="${x?.id}">
            ${x?.bName?.encodeAsHTML()}
         </g:link>
      </span>
   </g:each>
</g:if> 
```

有谁知道我为什么会收到此错误或我做错了什么的真正来源？非常感谢所有帮助，谢谢

# database - 如何编写一个 SQLite 查询，从两个表中提取信息，同时交叉引用第三个表？

> ID：10035345
> 
> 赞同：0
> 
> 时间：2012-04-05T20:14:35.210
> 
> 标签：database, sqlite, join

我使自己陷入了一个棘手的境地，发现自己无法凭借有限的数据库经验摆脱困境。我在我的办公室让其他三个开发人员来看看这个，我们没有人能够想出一种方法来完成我想做的事情，而无需求助于多个查询。我非常感谢您提供的任何帮助。

这是我的数据结构的简化视图：

```
[REPORTS]
store_number
item
actual_inventory

[STORES]
store_number
store_attribute1
store_attribute2
store_attribute3

[PLANS]
store_attribute1
store_attribute2
store_attribute3
item
target_inventory 
```

给定一个 store_number，我需要能够返回所有项目、actual_inventory 和 target_inventory。

难度：[报告]中有一些项目不在[计划]中，反之亦然。

这将返回商店的所有 [REPORTS] 项：

```
SELECT * 
FROM `REPORTS`
WHERE 
`store_number` = <<SOME NUMBER>> 
```

这将返回商店的所有 [PLANS] 项目：

```
SELECT * 
FROM `PLANS`
WHERE 
`store_attribute1` =  (SELECT `store_attribute1` FROM `STORES` WHERE `number` = <<SOME NUMBER>>)
and `store_attribute2` = (SELECT `store_attribute2` FROM `STORES` WHERE `number` = <<SOME NUMBER>>)
and `store_attribute3` = (SELECT `store_attribute3` FROM `STORES` WHERE `number` = <<SOME NUMBER>>) 
```

我只是不知道如何将它们结合起来！如果我执行 UNION，我似乎无法单独返回 _inventory 数字（在他们自己的列中）。

我试图通过执行两个 LEFT JOIN 和一个 UNION 来模拟 FULL JOIN。这会返回我无法理解的结果。

我什至尝试对前两个查询中的每一个使用 VIEWS 并从 VIEW 中选择以通过 STORE 提取数据。

我显然错过了一些东西。

如果我可以返回具有关联的 target_inventory 和 actual_inventory 编号的唯一项目列表，它将在我的应用程序代码中节省大量工作。

我需要重新构建我的数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:26:15.483

你想要所有在同一个列表中。然后我会用 a 做它`UNION ALL`并有一个标志，这样你就知道哪个是 the`actual_inventory`和什么是`target_inventory`.

```
SELECT 
  item
  actual_inventory as inventory,
  1 as isActual
FROM `REPORTS`
WHERE 
`store_number` = <<SOME NUMBER>>
UNION ALL
SELECT 
  item
  target_inventory AS inventory,
  0 as isActual
FROM `PLANS`
WHERE 
`store_attribute1` =  (SELECT `store_attribute1` FROM `STORES` WHERE `number` = <<SOME NUMBER>>)
and `store_attribute2` = (SELECT `store_attribute2` FROM `STORES` WHERE `number` = <<SOME NUMBER>>)
and `store_attribute3` = (SELECT `store_attribute3` FROM `STORES` WHERE `number` = <<SOME NUMBER>>) 
```

还有第二个问题。它必须是一种更好的写法。可能像这样：

```
SELECT 
      item
      target_inventory AS inventory,
      0 as isActual
FROM `PLANS` as p
WHERE EXISTS
(
    SELECT
        NULL
    FROM
        STORES as s
    WHERE
        s.store_attribute1=p.store_attribute1
        and s.store_attribute2=p.store_attribute2
        and s.store_attribute3=p.store_attribute3
        AND s.number = <<SOME NUMBER>>
) 
```

如果我理解您的数据库图正确，您的查询正确，并且您希望在两列中拥有`target_inventory`和。`actual_inventory`为什么你不能这样做？

```
SELECT
    STORES.store_number,
    PLANS.target_inventory,
    REPORTS.actual_inventory
FROM
    STORES
    LEFT JOIN REPORTS
        ON STORES.store_number=REPORTS.store_number
    LEFT JOIN PLANS
        ON STORES.store_attribute1=PLANS.store_attribute1
        AND STORES.store_attribute2=PLANS.store_attribute2
        AND STORES.store_attribute3=PLANS.store_attribute3
WHERE
    STORES.store_number=<<SOME NUMBER>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:46:06.587

这似乎会撤回您需要的所有关系

```
SELECT 

    `REPORTS`.`item` as `Item Number`, 
    `REPORTS`.`actual_inventory` as `Inventory`, 
    `PLANS`.`target_inventory` as `Target Inventory`

FROM `REPORTS` as `r`, `STORES` as `s`, `PLANS` as `p`
WHERE `r`.`store_number` = `s`.`store_number`
AND `r`.`item` = `p`.`item`
AND `s`.`store_attribute1` = `p`.`store_attribute1`
AND `s`.`store_attribute2` = `p`.`store_attribute2`
AND `s`.`store_attribute3` = `p`.`store_attribute3` 
```

如果这不起作用，也许是这个？

```
SELECT
  `REPORTS`.`item` as `Item`, `REPORTS`.`actual_inventory`, `PLANS`.`target_inventory`
FROM
  `REPORTS`, `PLANS`
WHERE
  `REPORTS`.`store_number` IN (
                               SELECT `store_number` 
                               FROM `STORES` 
                               WHERE `store_attribute1` = `PLANS`.`store_attribute1`                                    
                               AND`store_attribute2` = `PLANS`.`store_attribute2` 
                               AND`store_attribute3` = `PLANS`.`store_attribute3`
                              )
  AND `REPORTS`.`item` = `PLANS`.`item` 
```

...我实际上不知道上述查询是否会起作用。

# java - 如何为绑定到自定义适配器的 ListView 设置 onClickListener？

> ID：10035348
> 
> 赞同：0
> 
> 时间：2012-04-05T20:14:42.350
> 
> 标签：java, android

这是我要在其中实现 onClickListener 的类：

```
private void updateUserListView(DatabaseHandler dbh) {
    List<User> users = dbh.getAllUsers();
    ListView listView = (ListView) findViewById(R.id.userslistview);
    listView.setAdapter(new UserArrayAdapter(BeerFriendActivity.this, users));      
} 
```

适配器代码为：

```
public class UserArrayAdapter extends ArrayAdapter<User> {
private final Context context;
private final List<User> values;

public UserArrayAdapter(Context context, List<User> values) {
    super(context, R.layout.userrow, values);
    this.context = context;
    this.values = values;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    final int pos = position;
    final Context con = context;
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.userrow, parent, false);
    Button button = (Button) rowView.findViewById(R.id.userrowbutton);
    TextView textView = (TextView) rowView.findViewById(R.id.userrownametext);
    textView.setText(values.get(position).getName());

    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent myIntent = new Intent(context,BeerSearchActivity.class); 
            Bundle b = new Bundle();
            b.putInt("id", values.get(pos).getId());
            myIntent.putExtras(b); //Put your id to your next Intent
            con.startActivity(myIntent);
        } 
    });

    User user = values.get(position);
    return rowView;
}} 
```

我已经尝试实现点击器，但我得到的只是一堆错误。我已经阅读了许多教程和类似的问题，但似乎没有一个答案适合我的情况，或者我不太了解它们。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:27:46.633

ListView 并没有真正设置为其中包含可点击控件，onClick() 方法使用的是 touchEvent 而不是行。不过有一个解决方法，您可以在 XML 中为您的按钮或其他可点击元素指定一个自定义回调，就像在[这个示例](http://androidforbeginners.blogspot.com/2010/03/clicking-buttons-in-listview-row.html)中一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:28:43.437

The problem is in focus of button.You should use other View instead of button in each row (ImageView for example) and set onItemClickListener to your listView

# django - ADMIN_MEDIA_PREFIX 弃用和在 Django 1.4 中使用静态文件

> ID：10035350
> 
> 赞同：1
> 
> 时间：2012-04-05T20:14:48.780
> 
> 标签：django, django-admin, django-staticfiles

我有一个基于 django 1.3 的前端，它为来自 Amazon S3 的所有静态文件提供服务。我希望升级到 Django 1.4。似乎 Django 改变了管理静态文件的呈现方式。我有以下配置：

settings.py：我在 INSTALLED_APPS 中有应用程序 django.contrib.staticfiles（在“开发”和“产品”设置中）。静态内容在 Amazon S3 上实时发布。

我正在我的开发机器上测试更改（DEBUG=True），但 /admin 页面无法呈现静态文件和图标。那是因为它试图从 S3 中提取内容（因为 django.contrib.staticfiles 已安装），而不是从 dev django 文件夹中提取。有没有一种方法可以在 DEBUG = True 时强制将内容从开发文件夹中取出，而不是从 S3 中提取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:37:05.170

尝试`STATIC_URL`基于以下设置`DEBUG`：

```
if DEBUG:
    STATIC_URL = "/static/"
else:
    STATIC_URL = "http://external.domain.com/" 
```

然后确保您已将[静态文件 url 模式](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)添加到您的 url 配置中

# java - PipedInputStream.read() 返回 -1

> ID：10035353
> 
> 赞同：0
> 
> 时间：2012-04-05T20:15:07.017
> 
> 标签：java, stream, pipe, eof

`PipedInputStream.read()`如果我没有关闭任何流，如何返回 -1？`closedByReader`为假，`closedByWriter`为假，`connected`为真，但返回-1；为什么它认为我完成了？什么时候`read()`应该返回负数？

**编辑 1**

这是库函数的代码

```
public synchronized int read(byte b[], int off, int len)  throws IOException {
if (b == null) {
    throw new NullPointerException();
} else if (off < 0 || len < 0 || len > b.length - off) {
    throw new IndexOutOfBoundsException();
} else if (len == 0) {
    return 0;
}

    /* possibly wait on the first character */
int c = read();
if (c < 0) {
    return -1;
}
b[off] = (byte) c;
int rlen = 1;
while ((in >= 0) && (len > 1)) {

    int available; 

    if (in > out) {
    available = Math.min((buffer.length - out), (in - out));
    } else {
    available = buffer.length - out;
    }

    // A byte is read beforehand outside the loop
    if (available > (len - 1)) {
    available = len - 1;
    }
    System.arraycopy(buffer, out, b, off + rlen, available);
    out += available;
    rlen += available; 
    len -= available;

    if (out >= buffer.length) {
    out = 0;
    }
    if (in == out) {
            /* now empty */
    in = -1;
    }
}
return rlen;
} 
```

我还不能跟踪变量值，但我可以看到它是如何在 Eclipse 调试器中逐行跳转的。所以我看到它在最后一行退出。只`while`执行一个循环。由于我们之前有`rlen=1`过一段时间，因此它可以改变的唯一原因是`rlen += available`符合要求。这个变量应该等于`-2`。我看到它`available = len - 1`最后访问了一行。所以，`len`应该是`-1`，但是通过`2048`......

**编辑 2**

当然，错误是我的，绝对是在另一个地方。实际上`PipedInputStream`被包裹在`AudioInputStream`其中被错误地配置为固定大小。达到大小导致流条件结束。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-04-05T20:20:52.633

好吧，如果它正在读取的流中的下一个字节是-1，则 InputStream 必须返回-1。如果您的流没有关闭，connected 是真的，我认为这只是您看到的数据

# c++ - C++ 上的未知错误，错误：“;”之前的预期主表达式 令牌

> ID：10035354
> 
> 赞同：1
> 
> 时间：2012-04-05T20:15:09.143
> 
> 标签：c++

C++ 上的未知错误，错误：“;”之前的预期主表达式 令牌。这是我用 C++ 编写的代码：

```
 #include <iostream>
 #include <math.h>
 #include <stdio.h>
 #define G 6.674E-11
 using namespace std;

 int main()
 {
 //Ms = Mass of sun, Me = Mass of Earth, Fg = Gravitational force between them, As =                                   Acceleration of Sun, Ae = Acceleration of Earth, Ve_x
 // = initial velocity of Earth in x direction, Ve_y = initial velocity of Earth in y          direction, Vs_x = initial velocity of the Sun in x direction
 // Vs_y = initial velocity of sun in y direction, t = time, F = Gravitational force   `    between the two bodies.

    float Ms, Me, Fg, As, Ae, Ve_x, Ve_y, Vs_x, Vs_y, pos_E, pos_S, r_x, r_y, r, t;
    float S_dist;
    float E_dist;
    float F;
    float Ve[2];
    float Vs[2];
    float pe[2];
    float ps[2];

  FILE *fileptr;

    cout <<"Enter mass of the Sun in kg\n";
    cin >> Ms;
    cout <<"Enter mass of the earth in kg\n";
    cin >> Me;
    cout <<"Enter intial velocity of the sun in x direction in m/s\n";
    cin >> Vs[0];
    cout <<"Enter intial velocity of the sun in y direction in m/s\n";
    cin >> Vs[1];
    cout <<"Enter intial velocity of the earth in x direction in m/s\n";
    cin >> Ve[0];
    cout <<"Enter intial velocity of the earth in y direction in m/s\n";
    cin >> Ve[1];
    cout <<"Enter intial position of the sun in x component\n";
    cin >> ps[0];
    cout <<"Enter intial position of the sun in y direction\n";
    cin >> ps[1];
    cout <<"Enter intial position of the earth in x direction\n";
    cin >> pe[0];
    cout <<"Enter intial position of the earth in y direction\n";
    cin >> pe[1];

  for (t=0; t<30000; t+1)
 {
  float E_dist;
  float S_dist;
  float F;

    E_dist=sqrt( ((pe[0]-pe[0])*(pe[0]-pe[0])) + ((pe[1]-pe[1])*(pe[1]-pe[1])) );
    S_dist=sqrt( ((ps[0]-ps[0])*(ps[0]-ps[0])) + ((ps[1]-ps[1])*(ps[1]-ps[1])) );

    r_x=( (pe[0]-pe[0]) - (ps[0]-ps[0]) );
    r_y=( (pe[1]-pe[1]) - (ps[1]-ps[1]) );
    r= sqrt( (r_x)*(r_x) + (r_y)*(r_y) );

    F=(G*Me*Ms)/(r*r);

    Ae = F/Me;
    As = F/Ms;

    Ve_x = Ve[0];
    Ve_y = Ve[1];
    Vs_x = Vs[0];
    Vs_y = Vs[1];
    }
    cout<<"At time "<<t<<":\n The position of the Sun is "<<S_dist<<"\n The position of   the Earth is "<<E_dist
    <<"\n The acceleration of the Sun is "<<As<<" \n The acceleration of the Earth is "<<Ae<<" \nThe velocity of the Sun in the x direction is "
    <<Vs_x<<" \n The velocity of the Sun in the y direction is "<<Vs_y<<" \n The velocity of the Earth in the x direction is "<<Ve_x<<
    " \n The velocity of the Earth in the y direction is "<<Ve_y<<" \n The gravitational force between the Sun and the Earth is "<<F<<; // ERROR OCCURRED HERE.

} 
```

将不胜感激任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T20:17:43.140

我认为错误是你的最后一行以这样的方式结束：

```
<<F<<; 
```

请注意，该`<<`运算符仅应用于一个参数。你的意思是写这样的东西吗？

```
<<F<<endl; 
```

对于它的价值，为了清楚起见，我**强烈建议**将该输出行拆分为多行。您现在拥有的内容是正确的，但是阅读起来非常困难。将其重写为

```
cout << "At time " <<t<<":\n The position of the Sun is "<<S_dist<<"\n";
     << " The position of   the Earth is "<<E_dist << "\n";
     << "The acceleration of the Sun is "<<As<<"\n"
     << "The acceleration of the Earth is "<<Ae<<"\n";
     << "The velocity of the Sun in the x direction is "<<Vs_x<<" \n";
     << "The velocity of the Sun in the y direction is "<<Vs_y<<" \n";
     << "The velocity of the Earth in the x direction is "<<Ve_x<< "\n";
     << "The velocity of the Earth in the y direction is "<<Ve_y<<" \n";
     << "The gravitational force between the Sun and the Earth is "<<F<<; 
```

会使这个错误更容易被发现，因为行号信息会更有用。另外，我建议在`<<`运算符之间添加空格以使其更易于阅读。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T20:19:03.887

[templatetypedef](https://stackoverflow.com/users/501557/templatetypedef)已经指出编译错误，但是代码中还有一个问题：`for`循环是无限的：

```
for (t=0; t<30000; t+1) 
```

应该：

```
for (t=0; t<30000; t++) 
```

或者，基于`t`Is [using increment (operator++) on floats bad style？](https://stackoverflow.com/questions/8561393/is-using-increment-operator-on-floats-bad-style)：`float`

```
for (t = 0; t < 30000; t+=1.0f) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T20:53:00.370

您的第一个语法错误是因为`<<`在语句末尾有另一个`cout<<F<<;`只是将其更改为，`cout<<F;`除非您要打印另一个 var 或者您想使用 endline，如：`cout<<F<<endl;`。

你还有另一个语法错误！你的`main`回报 int 但你最后没有返回任何东西：

`return 0;`

**另一个非常非常重要的问题是关于变量`F`！**

**逻辑错误！！！**

```
int main()
{
....
  float S_dist; //real S_dist !!!
  float E_dist; //real E_dist !!!
  float F;      //real F !!!
  for (t=0; t<30000; t++)
  {

     float F; // just exists in for!!!
     float E_dist; //just exists in for!!!
     float E_dist; //just exists in for!!!
  ....
     F=(G*Me*Ms)/(r*r); //changing local F, which just exists in for
     E_dist=sqrt( ((pe[0]-pe[0])*(pe[0]-pe[0])) + ((pe[1]-pe[1])*(pe[1]-pe[1])) );
     S_dist=sqrt( ((ps[0]-ps[0])*(ps[0]-ps[0])) + ((ps[1]-ps[1])*(ps[1]-ps[1])) );
  }
  cout<<F<<E_dist<<S_dist; //this prints the main vars!
  return 0;
} 
```

请务必阅读更多有关局部变量的信息。请记住，这`t+1`根本不会改变`t`！你应该在语句的最后部分写`t++`or ！除非你会得到一个无限循环，否则你根本不会增长！`t+=1``for``t`

# treeview - 无法选择 EnableViewState=False 的 TreeView

> ID：10035356
> 
> 赞同：0
> 
> 时间：2012-04-05T20:15:23.910
> 
> 标签：treeview, viewstate

我有一个需要大量 ViewState 的大型 TreeView。我可以在加载时轻松刷新树视图，但是如果我单击树中的节点，则不会触发 onselectednode_changed 事件，因为当浏览器执行回发时树为空。有什么办法可以让 onselected 事件触发吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T20:18:41.187

注意 100% 确定树视图可以在没有视图状态的情况下工作。非常明确的是，如果您关闭了视图状态，则需要在每次回发时重新渲染它。不检查 IsPostBack 并跳过该步骤。

-一个

# php - 为什么代码进入无限循环？(

> ID：10035359
> 
> 赞同：2
> 
> 时间：2012-04-05T20:15:29.890
> 
> 标签：php, loops

```
<?php
$mines = 10;

####
for($x=1; $x<=9; $x++) {
    for($y=1; $y<=9; $y++) {
        $minefield[$x][$y] = 0;
    }
}       

for($i=0; $i<$mines; $i++) {
    $randx = rand(1, 9);
    $randy = rand(1, 9);

    if($minefield[$randx][$randy] == 'X') {
        $i--;
    } else {
        $minefield[$randx][$randy] = 'X';
    }
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T20:23:24.610

将字符串（或资源）与整数进行比较时，[根据文档](http://php.net/manual/en/language.operators.comparison.php)，字符串首先转换为数字，然后进行比较。

因此，这：

```
if ($minefield[$randx][$randy] == 'X') 
```

...`$minefield[$randx][$randy] = 0`相当于：

```
if (0 == 0) // 0 == (int)'X' 
```

......这总是正确的。因此，您在每次迭代时都在递增*和*递减。`$i`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-05T20:20:27.850

我会尝试设置 $minefield[$x][$y] = '0'; 带引号，这样两种类型都是字符串。可能是一个问题。

查看有关此主题的 PHP 手册[Comparing Strings to Numbers](http://il.php.net/manual/en/language.types.string.php#language.types.string.conversion)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T20:20:48.753

作为指导方针，我不会在循环内执行*$i--*，因为这是一个经典的无限循环生成器。而是在内部执行另一个循环，继续生成随机地雷，直到它没有击中现有的地雷。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T20:42:41.537

您的问题还有另一种解决方案。您可以这样设置，并确保在有限的一组坐标中只选择 10 个位置：

```
<?php

// build minefield
$minefield = array();
for($x=1; $x<=9; $x++) {
    $minefield[$x] = array();
    for($y=1; $y<=9; $y++) {
        $minefield[$x][$y] = 0;
    }
}

// prepare cartesian func
function array_cartesian() {
    $_ = func_get_args();
    if(count($_) == 0)
        return array(array());
    $a = array_shift($_);
    $c = call_user_func_array(__FUNCTION__, $_);
    $r = array();
    foreach($a as $v)
        foreach($c as $p)
            $r[] = array_merge(array($v), $p);
    return $r;
}

// get coordinates
$coords = array_cartesian(range(1,9), range(1,9));
// pick random coordinates' keys
$chosen_coords = array_rand($coords, 10);

foreach ($chosen_coords as $key) {
    $minefield[$coords[$key][0]][$coords[$key][1]] = 'X';
} 
```

我知道，它很长，但我可以用 Python 写成 2-3 行。

附言。笛卡尔积的代码来自这里：[https ://stackoverflow.com/a/2516779/548696](https://stackoverflow.com/a/2516779/548696)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T20:27:22.283

问题出在您的第二个循环中。由于索引是随机数，所以这些索引的数组值可能已`X`在`else`语句中设置为，并且随机地，将一次又一次地检查相同的索引，因此它将进入`if`语句，这里是你减去的地方`i`！

**在循环体中更改循环变量的值不是一个好习惯`i`。**

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-05T20:20:44.157

显然是因为您减少了循环计数器：

```
if($minefield[$randx][$randy] == 'X') {
    $i--;
} else {
    $minefield[$randx][$randy] = 'X';
} 
```

在某一时刻，所有字段都将等于“X”，您将有一个无限循环。

在 for 循环中使用索引是一个非常糟糕的习惯

# highcharts - 使用 DotNet.HighCharts 库根据来自 Web 服务的 DataTable 结果创建图表

> ID：10035367
> 
> 赞同：2
> 
> 时间：2012-04-05T20:16:22.750
> 
> 标签：highcharts, vb.net-2010

我们正在尝试从基于 Silverlight 的图表控件转向更多无插件控件。我们喜欢 HighCharts，现在正在测试将其实现到我们现有的代码库中。我们发现 DotNet.HighCharts 可能是快速创建图表而无需解析所有 javascript 的竞争者。

**我的问题是，当图表包含在数据中时，您如何传递要在图表中使用的数据`DataTable`？**跟随[这里](https://stackoverflow.com/questions/9591842/highcharts-mvc-3-database)的答案，我已经看到 Linq 可能是要走的路。但是，我很难让代码真正构建。DotNet.HighCharts 的文档没有显示任何提取非静态数据的示例，所以那里没有运气。到目前为止，这是我的代码片段：

```
 Dim da3 As New SqlDataAdapter(sql3, conn3)
    da3.Fill(dt3)
    da3.Dispose()
    conn3.Close()

    Dim chart3 As Highcharts = New Highcharts("chart").InitChart(New Chart() With { _
     .PlotShadow = False _
    }).SetTitle(New Title() With { _
     .Text = "Browser market shares at a specific website, 2010" _
    }).SetTooltip(New Tooltip() With { _
     .Formatter = "function() { return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %'; }" _
    }).SetPlotOptions(New PlotOptions() With { _
     .Column = New PlotOptionsColumn With { _
      .AllowPointSelect = True, _
      .Cursor = Cursors.Pointer, _
      .DataLabels = New PlotOptionsColumnDataLabels() With { _
       .Color = ColorTranslator.FromHtml("#000000"), _
       .Formatter = "function() { return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %'; }" _
      } _
     } _
    }).SetSeries(New Series() With { _
     .Type = ChartTypes.Column, _
     .Name = "Browser share", _
     .Data = New Helpers.Data(dt3.Select(Function(x) New Options.Point() With {.X = x.periodyear, .Y = x.rate}).ToArray()) _
    })
    ltrChart3.Text = chart3.ToHtmlString() 
```

我正在导入以下内容：

```
Imports DotNet.Highcharts
Imports DotNet.Highcharts.Options
Imports System.Data
Imports System.Data.SqlClient
Imports DotNet.Highcharts.Enums
Imports System.Drawing
Imports System.Collections.Generic
Imports System.Linq 
```

我得到的错误`.Data = New Helpers.Data(dt3.Select(Function(x) New Options.Point() With {.X = x.periodyear, .Y = x.rate}).ToArray()) _`在线。我得到`Lambda expression cannot be converted to 'String' because 'String' is not a delegate type`了我的错误`Function....rate}`。

**编辑：** 第一次尝试修改现有代码

```
 Dim chart1 As Highcharts = New DotNet.Highcharts.Highcharts("test")

    Dim series As Series = New Series()
    series.Name = "CO Rates"
    For i As Integer = 0 To dt.Rows.Count - 1
        series.Data = New Helpers.Data(New Object() {dt.Rows(i)("periodyear"), dt.Rows(i)("rate")})
    Next
    chart1.SetSeries(series).InitChart(New Chart() With { _
                                       .Type = ChartTypes.Column}) 
```

这只会产生 2 列，第一列位于 x 位置 0，其值为 2011，另一列位于 x 位置 1，其值为 8.3。这非常奇怪，因为在我看来它正在获取 dataTable 中的最后一个点，然后将其 {x, y} 值 ({2011, 8.3}) 变成 2 个不同的点，其中 x 和 y 值都是 y {0, x} 和 {1, y} 之类的值。我需要得到：

*   从数据表中获取的具有 {periodyear, rate} 的单个系列。
*   将来我想为每个位置创建一个序列，其 {periodyear, rate} 取自数据表。

**编辑 2：** 好的，我让它将结果转换为数据字典，我让图表显示所有点。现在唯一的问题是将 转换`dt.Rows(i)("periodyear")`为 DateTime 值。这是到目前为止的代码（在 PaseExact 方法上失败）：

```
Dim series As Series = New Series()
        series.Name = "CO Rates"

        Dim xDate As DateTime
        Dim data As New Dictionary(Of DateTime, Decimal)
        For i As Integer = 0 To dt.Rows.Count - 1
            xDate = DateTime.ParseExact(dt.Rows(i)("periodyear").ToString, "YYYY", Globalization.CultureInfo.InvariantCulture)
            data.Add(xDate, dt.Rows(i)("rate"))
        Next

        Dim chartData As Object(,) = New Object(data.Count - 1, 1) {}
        Dim x As Integer = 0
        For Each pair As KeyValuePair(Of DateTime, Decimal) In data
            chartData.SetValue(pair.Key, x, 0)
            chartData.SetValue(pair.Value, x, 1)
            x += 1
        Next

        Dim chart1 As Highcharts = New Highcharts("chart1").InitChart(New Chart() With { _
         .Type = ChartTypes.Column _
        }).SetTitle(New Title() With { _
         .Text = "Chart 1" _
        }).SetXAxis(New XAxis() With { _
         .Type = AxisTypes.Linear _
        }).SetSeries(New Series() With { _
         .Data = New Helpers.Data(chartData) _
        }) 
```

如果我将其更改为字符串值（例如 1980），然后将 x 轴的 AxisTypes 更改为线性，我会显示数据。它只是以某种方式关闭 - 1980 看起来像 1,980。婴儿步...

**编辑 N：** 这是最终的工作解决方案。这似乎可以使用一些清理。例如，我不确定是否需要创建一个字典来放入我的 X/Y 值，然后遍历字典以将数据添加到我的 chartData 对象。这似乎是双重工作。

```
 Dim stfipsList = (From r In dt.AsEnumerable() Select r("stfips")).Distinct().ToList()
    Dim SeriesList As New List(Of Series)(stfipsList.Count)
    Dim seriesItem(stfipsList.Count) As Series
    Dim xDate As DateTime
    Dim fakeDate As String
    Dim sX As Integer

    sX = 1
    For Each state In stfipsList
        Dim data As New Dictionary(Of DateTime, Decimal)
        Dim stateVal As String = state.ToString
        Dim recCount As Integer = dt.Rows.Count - 1

        For i As Integer = 0 To recCount
            If dt.Rows(i)("stfips").ToString = stateVal Then
                fakeDate = "1/1/" + dt.Rows(i)("periodyear").ToString
                xDate = DateTime.Parse(fakeDate)
                data.Add(xDate.Date, dt.Rows(i)("unemprate"))
            End If
        Next
        Dim chartData As Object(,) = New Object(data.Count - 1, 1) {}
        Dim x As Integer = 0
        For Each pair As KeyValuePair(Of DateTime, Decimal) In data
            chartData.SetValue(pair.Key, x, 0)
            chartData.SetValue(pair.Value, x, 1)
            x += 1
        Next
        seriesItem(sX) = New Series With {
                    .Name = state.ToString, _
                    .Data = New Helpers.Data(chartData)
        }

        SeriesList.Add(seriesItem(sX))

        sX = sX + 1
    Next

    Dim chart1 As Highcharts = New Highcharts("chart1").InitChart(New Chart() With { _
     .Type = ChartTypes.Line _
    }).SetTitle(New Title() With { _
     .Text = "Annual Unemployment Rate" _
    }).SetTooltip(New Tooltip() With { _
     .Formatter = "function() { return '<b>'+ this.series.name + ': ' + Highcharts.dateFormat('%Y', this.x) +'</b>: '+ this.y +' %'; }" _
    }).SetXAxis(New XAxis() With { _
     .Type = AxisTypes.Datetime _
     }).SetYAxis(New YAxis() With { _
       .Min = 0, _
       .Title = New YAxisTitle() With { _
        .Text = "Unemployment Rate", _
        .Align = AxisTitleAligns.High _
      } _
    }).SetSeries(SeriesList.[Select](Function(s) New Series() With { _
                 .Name = s.Name, _
                 .Data = s.Data _
                }).ToArray())

    ltrChart1.Text = chart1.ToHtmlString() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:12:53.227

请参阅下面的我的控制器 ActionResults 之一，它执行您所要求的。它是用 C# 编写的，但可以很容易地修改为 VB。有比您要求的信息更多的信息，但它可能会在 Visual Studio 中使用 Highcharts 时提供其他问题的可见性。

我正在做的是创建一个系列列表，然后将列表传递给 highcharts。这样做的好处是您不必单独创建每个系列。

```
public ActionResult CombinerBarToday(DateTime? utcStartingDate = null,
                                             DateTime? utcEndingDate = null)
        {
            //TEMPORARILY USED TO FORCE A DATE
            //utcStartingDate = new DateTime(2012, 1, 9, 0, 0, 1);
            //utcEndingDate = new DateTime(2012, 1, 9, 23, 59, 59);

            //GET THE GENERATED POWER READINGS FOR THE SPECIFIED DATETIME
            var firstQ = from s in db.PowerCombinerHistorys
                         join u in db.PowerCombiners on s.combiner_id equals u.id
                         where s.recordTime >= utcStartingDate
                         where s.recordTime <= utcEndingDate
                         select new
                         {
                             Combiner = u.name,
                             Current = s.current,
                             RecordTime = s.recordTime,
                             Voltage = s.voltage,
                             Power = s.current * s.voltage
                         };

            //APPLY THE GROUPING
            var groups = firstQ.ToList().GroupBy(q => new
            {
                q.Combiner,
                Date = q.RecordTime.Date,
                Hour = q.RecordTime.Hour
            });

            List<CombinerKwh> stringGroupedKwhlist = new List<CombinerKwh>();

            //CALCULATE THE AVERAGE POWER GENERATED PER HOUR AND ADD TO LIST
            foreach (var group in groups)
            {
                stringGroupedKwhlist.Add(new CombinerKwh(
                                         group.Key.Combiner,
                                         new DateTime(group.Key.Date.Year, group.Key.Date.Month, group.Key.Date.Day, group.Key.Hour, 0, 0),
                                         group.Average(g => g.Power) / 1000d
                                         ));
            }

            //GET A LIST OF THE COMBINERS CONTAINS IN THE QUERY
            var secondQ = (from s in firstQ 
                           orderby s.Combiner 
                           select new
                                {
                                    Combiner = s.Combiner
                                }
                           ).Distinct();

            /* THIS LIST OF SERIES WILL BE USED TO DYNAMICALLY ADD AS MANY SERIES 
             * TO THE HIGHCHARTS AS NEEDEDWITHOUT HAVING TO CREATE EACH SERIES INDIVIUALY */
            List<Series> allSeries = new List<Series>();

            TimeZoneInfo easternZone = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");

            //LOOP THROUGH EACH COMBINER AND CREATE SERIES
            foreach (var distinctCombiner in secondQ)
            {
                var combinerDetail = from h in stringGroupedKwhlist
                                     where h.CombinerID == distinctCombiner.Combiner
                                     orderby TimeZoneInfo.ConvertTimeFromUtc(h.Interval,easternZone)
                                     select new
                                            {
                                                CombinerID = h.CombinerID,
                                                //CONVERT FROM UTC TIME TO THE LOCAL TIME OF THE SITE
                                                Interval = TimeZoneInfo.ConvertTimeFromUtc(h.Interval,easternZone),
                                                KWH = h.KWH
                                            };

                //REPRESENTS 24 PLOTS FOR EACH HOUR IN DAY
                object[] myData = new object[24];

                foreach (var detailCombiner in combinerDetail)
                {
                    if (detailCombiner.KWH != 0)
                    {
                        myData[detailCombiner.Interval.Hour] = detailCombiner.KWH;
                    }
                }

                allSeries.Add(new Series
                                    {
                                        Name = distinctCombiner.Combiner,
                                        Data = new Data(myData)
                                    });
            }

            Highcharts chart = new Highcharts("chart")
            .InitChart(new Chart { DefaultSeriesType = ChartTypes.Spline })
            .SetTitle(new Title { Text = "Combiner History" })
            .SetXAxis(new XAxis
            {
                Categories = new[] { "0:00 AM", "1:00 AM", "2:00 AM", "3:00 AM", "4:00 AM", "5:00 AM", "6:00 AM", "7:00 AM", "8:00 AM", "9:00 AM", "10:00 AM", "11:00 AM", "12:00 PM", "1:00 PM", "2:00 PM", "3:00 PM", "4:00 PM", "5:00 PM", "6:00 PM", "7:00 PM", "8:00 PM", "9:00 PM", "10:00 PM", "11:00 PM" },
                Labels = new XAxisLabels
                                       {
                                           Rotation = -45,
                                           Align = HorizontalAligns.Right,
                                           Style = "font: 'normal 10px Verdana, sans-serif'"
                                       },
                Title = new XAxisTitle { Text = "Time(Hour)" },
                //Type = AxisTypes.Linear
            })
            .SetYAxis(new YAxis
            {
                //Min = 0,
                Title = new YAxisTitle { Text = "Kwh" }
            })

            .SetSeries(allSeries.Select(s => new Series { Name = s.Name, Data = s.Data }).ToArray());

            return PartialView(chart);
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T21:56:56.103

在这里您可以找到如何从 DataTable 创建系列的示例：http: [//dotnethighcharts.codeplex.com/discussions/287106](http://dotnethighcharts.codeplex.com/discussions/287106)

同样从[示例项目](http://dotnethighcharts.codeplex.com/releases/view/85324)中，您可以找到如何“从字典绑定数据”和“从对象列表绑定数据”

# cucumber - 现场有许多客户的 Watir-Webdriver 覆盖方法

> ID：10035371
> 
> 赞同：3
> 
> 时间：2012-04-05T20:16:47.933
> 
> 标签：cucumber, watir, watir-webdriver, web-testing

好吧，我需要在这个思考过程中得到提升——我的大脑很痛。我想得到你对一些方法的反馈。

我会提前发布我的问题，以防我在下面的描述中失去你的注意力：

*   您以前编写过类似产品的脚本吗？你是怎么处理的？

*   这些方法中的任何一种是否因任何原因而突出/可怕？如果是这样，是什么？

*   是否有另一种您会发现更合适的方法？

**我正在测试一个工作流程，为了论证，我们将其称为购物车，其中包含各种 text_fields、radio_buttons 和 select_lists。** **一家公司为大约 60 个客户提供此购物车，并非所有客户都使用相同的确切表格，但一般流程是相同的**。客户端之间的总体思路是相同的（相同的目标功能），并且存在具有相同工作流的客户端子集，但许多是独特的。在这种情况下，唯一可能意味着某些字段不是必需的，而它们可能适用于其他客户端。或者，某个客户存在某些问题/文本字段，其他客户根本无法使用。

此时脚本的目标只是通过 Web 界面生成订单，而不是将流程的每个单独步骤验证为“测试”。你必须在这里相信我一点。仍然有很多常见的细节能够以可接受的准确度运行负面/边缘案例。

到目前为止，我看到的方法是：

1.  使用页面对象模式，为每个客户端站点创建一个“页面”文件，并根据正在测试的客户端使用不同的页面类。这是乏味的，主要是脆弱的并且需要大量维护工作。但是，它会起作用，只要可以访问每个人的特定页面文件，我就可以为每个人使用相同的功能/场景。

2.  创建一个方法来从 DOM 中抓取所有输入元素，检测它们是否是我们需要注入特定所需输入的保留字段，或者只需填写信息以完成订单。这不会搭载数据库，因此整体性能应该更好。

3.  连接到数据库，收集用于构建页面的特定客户所需的所有信息，并为订单动态构建字段，并相应地回答它们。这在理论上听起来很棒，如果需要维护的话，几乎不需要。数据库抓取很容易，构建字段的难度我还不知道......

现在我正在使用： *watir-webdriver cucumber Cheezy's page-object gem sequel*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:34:48.713

我会使用 cheezy 的页面对象并包含所有可能包含的字段/问题。然后我会为每个客户重载默认值，仅包括他们使用的字段/问题。希望我没有过分简化这一点。

更新：在[页面 populator](http://rubydoc.info/github/cheezy/page-object/master/PageObject/PagePopulator)中，它会将您发送的任何数据（作为哈希）与默认数据合并。在他的[默认数据帖子](http://www.cheezyworld.com/2011/12/11/default-data-revisited/)中，他展示了如何使用默认数据。我认为您可以创建一个课程结帐页面

```
 class CheckoutPage
  include PageObject

  text_field(:name, :id => “order_name”)
  text_field(:address, :id => “order_address”)
  text_field(:email, :id => “order_email”)
  select_list(:pay_type, :id => “order_pay_type”)
  button(:place_order, :value => “Place Order”)

  PageObject::PageFactory.routes = {
    :default => [[HomePage, :select_puppy],
                 [DetailsPage, :add_to_cart],
                 [ShoppingCartPage, :continue_to_checkout],
                 [CheckoutPage, :complete_order]]
  }

  def complete_order(data = {})
     data = DEFAULT_DATA.merge(data)
     self.name = data['name']
     self.address = data['address']
     self.email = data['email']
     self.pay_type = data['pay_type']
     place_order
   end
 end 
```

然后为使用该站点的特定供应商重载它，每个供应商都有自己的默认数据。

```
class Nordies < CheckoutPage
      DEFAULT_DATA = {
        ‘name’ => ‘cheezy’,
        ‘address’ => ‘123 Main Street’,
        ‘email’ => ‘cheezy@example.com’,
        ‘pay_type’ => ‘Purchase order’
      }

PageObject::PageFactory.routes = {
  :default => [[HomePage, :select_puppy],
               [DetailsPage, :add_to_cart],
               [ShoppingCartPage, :setup_creditcard],
               [CreditCardPage, :continue_to_checkout],
               [CheckoutPage, :complete_order]]
}
end 
```

那么每个供应商的 .complete_order 都会有所不同。

# c# - 从（多个）用户输入（应用程序密码）导出数据库密码

> ID：10035376
> 
> 赞同：1
> 
> 时间：2012-04-05T20:17:12.177
> 
> 标签：c#, database, cryptography, passwords

我正在使用 C#（.NET 4.0、SQL CE 4.0 数据库）编写一个小型企业应用程序。数据库是加密的（SQL CE 支持数据库加密），但据我所知，来自[http://msdn.microsoft.com/en-us/library/aa257373(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa257373(v=sql.80).aspx)密码：

> 最长可达 40 个字符。可以包含字母、符号、数字或组合。无法恢复。

我的用户将输入应用程序的密码，这可能不会很复杂和安全。因此，我想以某种方式修改用户密码以创建更安全的数据库加密密码。据我所知，有*Rfc2898DeriveBytes Class*，它从密码中派生字节。但是我需要有效字符（[SQL Server CE 密码的允许字符？](https://stackoverflow.com/questions/5043734/allowed-character-for-sql-server-ce-password)）作为数据库密码，这意味着我可能无法使用*toBase64String()*。

到目前为止，我的想法是为数据库创建一个随机且安全的密码并将其保存到一个文件中，该文件将使用 AES256 加密，密钥来自用户密码。有没有更好的方法来做到这一点？

另外，我怎样才能实现每个拥有自己的应用程序密码的多个用户可以使用相同的数据库密码访问同一个数据库？

感谢您的时间和回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:31:06.100

您不能直接这样做：将所有用户密码转换为相同数据库密码的功能会破坏数据库加密的目的。将数据库密码存储在应用程序中是同构的。

这并不是说没有简单的解决方法：

*   有第二个文件 - 未加密的 SQL CE 数据库或纯文本文件
*   这里面有一个简单的表：

    `User | EncryptedPassword`（所有字符串）

*   对于每个用户，此文件中都有一行（如果是文本文件，则为一行），其中包含用户名和使用用户密码加密的 DB 密码（显然是 pw 的二进制哈希，存储为 base64）

*   当用户登录时，使用给定的密码来解密`EncryptedPassword`该用户的字段，这应该是数据库密码，您现在可以使用它来打开数据库

*   This also means, that a wrong user password is detected by failure to supply the correct SQL database password.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:28:11.540

在我看来，它`ToBase64String()`返回一个只包含字母、数字和斜杠的字符串。这符合 SQL CE 的要求。您可以使用`Rfc2898DeriveBytes`，生成 20 个字节，然后从中生成一个 40 个字符的 base64 字符串。盐应该因用户而异 - 例如，您可以使用用户名和站点名称的串联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T20:27:15.380

任何知道您的密码增强算法的人都可以重新应用该算法并使用弱用户密码进行攻击加密。在这方面，在密码中添加“一些东西”是一个好主意，但不是一个完美的解决方案。

通常，您所说的概念是[salting](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)。您在散列之前用其他数据加盐输入（听起来“不可恢复”密码实际上是密码的散列）。看起来（从您提供的链接文章中）连接字符串中使用了密码，这限制了您的有效字符集。

创建将密码存储为加盐哈希的用户帐户时，应在服务器端确定盐值并以安全方式存储，与该用户相关联。创建或更改密码时，每个用户的盐值应包含在哈希算法中。

不要*使用*单个中央密钥进行加密。只需在用户提供的密码中添加盐。

**更新**

如果您必须使用单个密码而不是使用特定于用户的密码来分发数据库（例如，如果您不能为每个用户单独加密副本），那么您有两个解耦的问题：

*   如何保护数据库不被未经授权的人查看？
*   如何验证我的用户？

要处理第一个问题，在您的应用程序中安全地嵌入一个相当长的密码是可行的方法。然而，对于坚定的攻击者来说，“安全嵌入”很难实现。在那里，您必须估计某人投入精力闯入数据库（“电影清单”或“信用卡号码”？）的可能性，并确定如果有人真的有能力，您的公司或您的客户会遭受损失闯入（例如，您是否会因无论如何都不会购买该程序的人而“失去收入”，您是否会允许泄露客户的秘密，...）。

如果您确定需要尽最大努力保护数据库密钥，请使用高端混淆解决方案。请注意，如果您将 AES 加密的密钥存储在文件中，您的代码仍需要解密加密数据以检索密钥。如果您的代码没有被很好地混淆，那么某人将调试器附加到您的程序并允许您的程序为他们解密密钥是微不足道的，因此从这个意义上说，AES 几乎没有什么好处。然而，即使是最好的混淆也无法阻止最熟练和最坚定的黑客。

至于第二个要点，您需要授权用户访问您的程序（并间接访问数据库）。一种方法是使用简单的用户名/密码哈希方法。您可以将用户表存储在 SQL CE 数据库中。毕竟，无论用户是否成功验证，程序都可以访问该数据库。

# visual-studio-2010 - 解决方案资源管理器的滚动工作而不是编辑的

> ID：10035377
> 
> 赞同：2
> 
> 时间：2012-04-05T20:17:13.967
> 
> 标签：visual-studio-2010

在我的 Visual Studio 2010 中，当滚动编辑器时，我的解决方案资源管理器正在滚动。

有人有/遇到过这个问题吗？我在网上找不到任何关于此的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:01:05.370

我也遇到了这个问题，并找到了一个在我的机器上运行良好的解决方案。原因是鼠标驱动程序。

[http://thecurlybrace.blogspot.sg/2010/08/mouse-scroll-whell-issues-with-visual.html](http://thecurlybrace.blogspot.sg/2010/08/mouse-scroll-whell-issues-with-visual.html)

希望这可以帮助你:)

# c# - 关闭函数中的流，这是个坏主意吗？

> ID：10035381
> 
> 赞同：7
> 
> 时间：2012-04-05T20:17:18.663
> 
> 标签：c#, exception-handling, io

我今天写了一些代码，另一位开发人员更改了它，说它更安全。我不确定这是否正确，因为我看不到这里所做的事情的优势是一些代码示例

```
public byte[] ReadFile(Stream stream)
{
    byte[] result = null;

    try
    {
       // do something with stream
       result = <result of operation>
    }
    finally
    {
        stream.Close();
    }

    return result;
} 
```

这被改为

```
public byte[] ReadFile(Stream stream)
{
    byte[] result = null;

    // do something with stream
    result = <result of operation>

    return result;
} 
```

我对 c# 很陌生，当你完成后不应该关闭流吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-05T20:19:55.673

一般来说，第一个版本是一个糟糕的设计。

是的，应该关闭 Stream，但最好使用打开它的相同代码（相同方法）。这被称为关注点分离，它使错误和混乱的可能性大大降低。

所以要么

*   您`ReadFile()`接受例如 a`string fileName`和打开和关闭流，或
*   你把它留给来电者。

您的方法（第二版）应该以这种方式使用：

```
using (var reader = new FileReader(...))
{
  // maybe some pre-reading
  var r = ReadFile(reader);
  // maybe some post-reading
} 
```

请注意，第二种方法也使该方法更具可重用性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-05T20:20:14.557

这个问题没有正确答案，因为它取决于您的应用架构。

*我会说*，是的，因为如果在这个函数`stream`中没有创建，而只是*使用*了，所以关闭它让我们交给调用者。

但我再说一遍，这取决于你的应用架构。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-05T20:20:32.080

开门的人一定要记得关门。

所以最好在打开它的方法中关闭流。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-05T20:21:33.693

通常 Stream 的创建者应该是关闭它的人，理想情况下通过使用 using 块来处理它：

```
using (var myStream = getMeAStream()) {
    ReadFile(myStream);

    // If you want to be really sure it is closed:
    myStream.Close();
    // Probably not neccessary though, since all 
    // implementations of Stream should Close upon Disposal
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T20:22:38.647

流已经被其他东西传递到这个函数中，你不负责关闭它，由调用代码来处理这个问题。

原因是另一个操作（如重置或另一个读取）可能需要在这个函数的外部完成，如果你关闭它，你会导致异常。

我曾经每天多次重构这样的代码，直到终于有人听了我的意见。

我已经看到至少一个由这种代码引起的严重错误，所以总的来说这是一个坏主意

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T20:25:47.370

这不仅仅是一个 C# 问题。调用“ReadFile”函数后，您需要将流用于其他操作吗？如果不是，您可以选择在读取文件后关闭流。当你完成使用它们时关闭流更好，但通常我更喜欢在相同的上下文中关闭它们而不是打开它们，因为它在那里你知道是否需要流进行其他操作：

```
Stream s = open_the_stream()
try {
  ReadFile(s)...
} finally {
  s.Close();
} 
```

无论如何，当您终止使用它们时关闭流。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-05T20:21:27.413

代码审查是正确的——永远不要做这样的事情（或者如果外部代码需要这样的事情，那么该代码可能没有正确设计——有例外，但对于像流这样的事情几乎从来没有，而且一些默认的'模式”总是要遵循的）。
在大多数情况下，使用这样的流（来自“外部”）......

```
using(Stream stream = new ...)
{
    ...call your method
} 
```

（或者例如读者正在处理它 - 但建议您在任何一种情况下都这样做 - 相当于使用 ' `finally`' 块，但归结为同一件事）

...基本上，调用函数永远不会知道您是否将其处理“内部” - 直到它崩溃。如果“双方”就这样的事情达成一致，那么这仍然是不可接受的，但可能不受惩罚。

# java - 设置 ProcessBuilder 的环境

> ID：10035383
> 
> 赞同：14
> 
> 时间：2012-04-05T20:17:23.843
> 
> 标签：java, environment-variables, processbuilder

我从 Java (1.6) 设置 Linux 环境时遇到一个奇怪的问题；特别是“PATH”变量。

简而言之，我有一个用于运行本机进程的管道，它使用`java.lang.ProcessBuilder`. 用户可以选择通过`HashMap`命名设置环境变量`environment`：

```
ProcessBuilder pb = new ProcessBuilder(args);
Map<String, String> env = pb.environment();
if (environment != null)
   env.putAll(environment);
Process process = pb.start(); 
```

`env`如果我将变量转储到控制台，则该变量会正确设置，并为 PATH 变量设置正确的值。但是，运行该过程会导致抛出`Exception`：

`java.io.IOException: error=2, No such file or directory`

相同的进程在终端 shell 中使用相同的环境变量运行良好。为了测试这一点，我在终端中设置环境后运行了 Eclipse。在这种情况下，该`ProcessBuilder`过程正常运行。

所以必须发生的是，`ProcessBuilder`它没有使用我为它设置的环境，而是使用当前的系统环境。

我在网上找不到这个问题的任何令人满意的答案。也许这是一个特定于操作系统的问题？还是我缺少的其他东西？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-05T21:37:37.117

我不认为这是一个错误，我认为这是您对环境变量的边界和作用的理解的问题。 `ProcessBuilder.environment()`包含对生成的进程来说是“进程本地”的环境变量。它们不是系统范围的，也不是登录范围的，它们甚至不影响 ProcessBuilder 运行的环境。

该`ProcessBuilder.environment()`映射包含进程局部变量，**只有**生成的进程才能看到。显然，看到生成处理的先决条件`ProcessBuilder.environment()`是成功生成进程，这是我认为你甚至没有达到的一点。

据我所知，（从 Java 中）修改当前正在运行的进程的 PATH 是不可能的，这是我认为你期望发生的（或能够做到的）。所以我认为你必须指出ProcessBuilder 到您尝试启动的可执行文件的完全限定路径（或者在您启动将使用 ProcessBuilder 的 JVM 之前确保 PATH 设置正确，这是您在“工作”场景中所做的在启动 IDE 之前在终端中设置它）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-22T16:55:15.603

在 Linux 上：

```
String path = System.getenv("HOME");

ProcessBuilder pb = new ProcessBuilder("/bin/bash","-c","export PATH=" +
    "PATH-TO-ADD" + ":" + path + " && exec"); 
```

在这种情况下，`PATH`变量会根据需要进行更新，并在 new 中搜索可执行文件`$PATH`。这在 Linux 上对我有用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-12-03T08:34:05.057

您需要了解环境变量对于进程上下文是本地的。一个新进程获取父环境的副本，但每个副本都是独立的。父项的更改不会影响现有子项（仅新子项），子项的更改不会影响父项或父项的新子*项*。

在您的情况下，Java 进程创建子进程并将修改后的`PATH`变量放入子进程的上下文中。这不会影响 Java 进程。子进程不是 shell，因此它忽略了`PATH`变量。该进程是直接使用操作系统服务创建的。除非您在启动 Java 进程*之前*`PATH`更改 shell 中的环境，否则它们会查看包含旧变量的 Java 进程的上下文。

 *要解决您的问题，您有两种选择：

1.  检查`PATH`Java 中的变量，将其拆分为路径元素并手动搜索可执行文件。然后，您可以`ProcessBuilder`使用绝对路径调用*并将*新`PATH`的放入孩子中，因此孙子将拥有正确的路径。

2.  调用 shell 来启动子进程。shell 将使用它的路径（您可以通过环境传递）。

第二种情况是这样的：

1.  您使用正确的`PATH`.
2.  你启动一个shell进程。
3.  您将要运行的命令作为参数传递给 shell（`"sh", "-c", "cmd args"`或`"cmd.exe", "/c", "cmd args"`）
4.  shell 会注意到它必须运行一个命令
5.  它将查看它的环境（您在步骤#1 中配置），找到修改后的`PATH`并运行正确的命令。

第二种情况的缺点是您必须正确转义和/或引用命令 ( `args`) 的参数，否则空格和其他特殊字符会导致问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T01:53:31.923

ProcessBuilder javadoc 中清楚的一件事是，您可以使用 environment() 方法获取环境变量，然后*修改*返回的映射。从该 ProcessBuilder 实例启动的任何*后续*流程都将包含您的更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T21:18:18.390

我觉得你是对的。当前正在执行的 java 代码不会使用您正在为正在执行的子进程准备的环境变量。您可以创建一个中间可执行文件或脚本，您可以将变量传递给它并让它执行您的程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-24T07:47:36.050

这似乎是 java 和外部进程的一个真正问题

Windows 7 和 java 7（32 位）上的以下内容

```
ProcessBuilder b = new ProcessBuilder();
Map<String, String> env = b.environment();
for (String key : env.keySet())
     System.out.println(key + ": " + env.get(key)); 
```

生产

```
SystemRoot: C:\Windows
Path: xbox 
```

**这意味着正在运行的程序环境和子进程环境应该包含一个路径变量，它的值正好是“xbox”**（例如废话，我的电脑上的任何地方都没有名为 xbox 的目录）

仅用于协议：

```
Map<String, String> env = System.getenv();
    for (String key : env.keySet())
        System.out.println(key + ": " + env.get(key)); 
```

给出完全相同的结果。

当我跑步时

```
b.command("convert.exe", "/?").inheritIO().start(); 
```

有了这个流程构建器和环境，我得到了

```
 Konvertiert FAT-Volumes in NTFS.

CONVERT Volume /FS:NTFS [/V] [/CvtArea:Dateiname] [/NoSecurity] [/X]

  Volume      Bestimmt den Laufwerkbuchstaben (gefolgt von einem Doppelpunkt),
              den Bereitstellungspunkt oder das Volume.
  /FS:NTFS    Bestimmt das in NTFS zu konvertierende Volume.
  /V          Legt fest, dass CONVERT im ausf�hrlichen Modus ausgef�hrt wird.
  /CvtArea:Dateiname
              Bestimmt die zusammenh�ngende Datei im Stammverzeichnis, die als
              Platzhalter f�r NTFS-Systemdateien dienen soll.
  /NoSecurity Bestimmt die Sicherheitseinstellungen f�r konvertierte Dateien
              und Verzeichnisse, die f�r jeden Benutzer zug�nglich sind.
  /X          Erzwingt ggf. das Aufheben der Bereitstellung.
              Alle ge�ffneten Handles auf das Volume sind in diesem Fall 
              ung�ltig. 
```

这是（德语）的输出

```
C:\Windows\System32\convert.exe 
```

当我使用时也会发生同样的情况

```
Runtime.getRuntime().exec(new String[]{"convert.exe", "/?"}); 
```

请注意，我的环境是如此之小，因为我替换了原生环境。这意味着整个程序恰好具有这两个环境变量。*

# scala - Trait 中 var 的注释不会在子类中继承

> ID：10035393
> 
> 赞同：0
> 
> 时间：2012-04-05T20:18:19.053
> 
> 标签：scala, annotations, traits

我有一个 var 的特征

```
trait Foo {
  @Id var _id: String
} 
```

现在我想初始化 var

```
class Bar(s: String) extends Foo {
  _id = s
} 
```

但我得到这个错误：

```
error: class Bar needs to be abstract, since variable _id in class Foo of type String 
is not defined (Note that variables need to be initialized to be defined) class Bar(s: String) extends Foo { 
```

关键是注释是在使用特征时继承的，我想使用它。我想要一些带有一些映射注释的特征，并让它们在子类中可用。

有人可以提供一个想法，提示，解决方案吗？

**编辑：** 我忘了写下`extends Foo`示例中的注释，如评论中所述。所以这个例子是不完整的。

**编辑：** 当我`var`在 Trait 中定义时，我可以简单地`@Id var _id: String = _`写入并且注释被正确继承。但是现在不*强制*必须设置该字段。 `Bar``_id = s`

 ** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T20:31:28.833

`_id``var`是你特质中的一个抽象`Foo`。在课堂上放在`var`它前面`Bar`：

```
class Bar(s: String) extends Foo {
  var _id = s
} 
```*

# playframework - 如何以编程方式获取 Play 中包含的所有模块

> ID：10035395
> 
> 赞同：1
> 
> 时间：2012-04-05T20:18:32.247
> 
> 标签：playframework

我正在尝试在我的父应用程序中编写一个标签（运行 play-1.2.4），它将检测所有包含的模块并为模块中的所有 js 文件创建标签。这可能吗？我可以以编程方式获取父应用程序中包含的所有模块吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:50:02.600

如果您只想获取所有插件，可以使用`Play.pluginCollection`. 如果你想获得所有模块，`Play.modules`是你想去的地方

# javascript - 在javascript中减去两个字符串

> ID：10035396
> 
> 赞同：0
> 
> 时间：2012-04-05T20:18:50.470
> 
> 标签：javascript, jquery, substring, trim, substr

kwd 变量保存这个值： **news path:".aspx"** 它基本上是一个url的查询字符串。

```
 var path= "path:\".aspx\""; 
```

所以 kwd= 像这样 + 路径传递给 url 的任何用户类型：

```
kwd=news path:".aspx"; 
```

我需要减去 kwd-path，所以我只得到“新闻”我如何在 java-script 或 jquery 中做到这一点？

我知道我可以使用 trim 或 substring 或 substr .. 但我无法开始工作。我基本上使用这个逻辑：

```
if (b.startsWith(a)) {
        return b.subString(a.length());
    }

    if (b.endsWith(a)) {
        return b.subString(0, b.length() - a.length());
    } 
```

但这不起作用..

```
 var persistvalue= kwd.subString(0, kwd.length() - path.length()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:21:34.210

`kwd.length() - path.length()`- 这个值不是负数吗？

尝试`path.length() - kwd.length()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:24:10.027

由于您`.aspx`在字符串中，因此您必须首先从字符串中提取它：

```
>>> 'an example:"some text"'.match(/"(.*)"/)[1]
"some text" 
```

现在，如果字符串出现在末尾，您可以删除它：

```
function removeFromEnd(string, toRemove) {
    function literally(regexp) {
        regexp.replace(/./g, function(x){return '\\'+x})
    }
    yourString.replace(RegExp(literally(string)+'$'), '')
} 
```

表示字符串的`$`结尾。或者，您可以通过以下方式更简单地执行此操作：

```
function removeFromEnd(string, toRemove) {
    if (string.slice(-toRemove.length)==toRemove)
        return string.slice(0, -toRemove.length);
    else
        return string
} 
```

# java - 当我从应用程序按下返回按钮时，Countdowntimer 如何继续在后台运行？

> ID：10035399
> 
> 赞同：0
> 
> 时间：2012-04-05T20:19:10.757
> 
> 标签：java, android, countdowntimer

我的计时器代码是：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    initializer();
    fire.setOnClickListener(this);
}

private void initializer() {

    minute = (EditText) findViewById(R.id.etMinute);
    seconds = (EditText) findViewById(R.id.etSeconds);
    fire = (Button) findViewById(R.id.bFireTimer);
    Remain=(TextView)findViewById(R.id.tvRemain);
}

@Override
public void onClick(View v) {
    switch (v.getId()) {

    case R.id.bFireTimer:

                min=minute.getText().toString();
                sec=seconds.getText().toString();
                int MIN= Integer.parseInt(min);
                int SEC=Integer.parseInt(sec);
                long TIME= (MIN*60)+SEC;
                timercount =  new MyCount(TIME * 1000, 1000);
                timercount.start();

        break;
    }

}

public class MyCount extends CountDownTimer {

     public MyCount(long millisInFuture, long countDownInterval) {
          super(millisInFuture, countDownInterval);
      }

      @Override
      public void onFinish() {
          //some script here
      }

      @Override
      public void onTick(long millisUntilFinished) {

       //some  script here 
         int remseconds=(int)millisUntilFinished/1000;
        int remminuts=remseconds/60;
            remseconds= remseconds%60;
            remminuts= remminuts%60;
            Remain.setText(String.format("%d : %02d" , remminuts,remseconds));

         // Remain.setText(""+millisUntilFinished);

      }   } 
```

当我在分钟和秒内输入并按下启动按钮时，计时器将启动。但是当我退出我的应用程序时，计时器不会继续在后台运行。我想在我退出应用程序时继续运行计时器并且当我启动我的应用程序时，我看到正在运行的计时器..plz 我需要帮助才能做到这一点..提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:01:11.213

做您想做的最简单的方法是在您的活动停止时保存当前系统时间。当它再次恢复时，只需检查它经过了多长时间并相应地更新计时器。获取当前时间使用

```
System.currentTimeMillis(); 
```

Have a long member variable that takes the value of current time in onStop. Make sure it's also saved in onSaveInstanceState and restored in onRestoreInstanceState. Once you are in onResume the timer value must be set to old value + (currentTime - savedTime).

# android - 一些运行新 Android（4.0 和 3.0）的设备在我的应用程序启动时会看到键盘。为什么？

> ID：10035405
> 
> 赞同：0
> 
> 时间：2012-04-05T20:19:47.070
> 
> 标签：android, android-softkeyboard

我不使用我的代码中的键盘做任何事情，也无法在运行 Android 2.3 的手机上重现它。但是我在平板电脑上看到了它，当我的应用程序启动时键盘弹出。什么会导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:55:04.650

当您的活动打开后 EditText 获得焦点时，可能会触发键盘。我也遇到了这个问题，并通过在创建活动时隐藏软键盘来修复它。尝试在 onCreate 中添加以下代码：

```
getWindow().setSoftInputMode(
            WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

# web-applications - Maven Jetty 服务器插件密码保护

> ID：10035414
> 
> 赞同：0
> 
> 时间：2012-04-05T20:20:34.230
> 
> 标签：web-applications, maven, maven-plugin

我正在使用 Maven Jetty 插件来运行我的 Web 应用程序。我使用`mvn jetty:run`命令启动我的服务器，该服务器开始托管我的网络应用程序。它基本上有一个 HTML 页面，通过调用 Java servlet 来提供各种功能。我想让内置的网络应用程序或我的 HTML 页面密码受到保护。我怎样才能做到这一点？如果需要更多信息，请在评论中告诉我。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:14:26.430

有很多选择： 1\. 使用像 Spring Security 这样的安全框架（它需要让你的应用程序成为 Java webapp）。2\. 将 Apache Web Server 作为 jetty 的前端，并在 Apache 上设置安全性。

此外，如果您的项目不是 Java，为什么不只使用 Apache？Jetty 是一个 JSP/Servlet 容器，您似乎没有使用它（仅提供 HTML）。

# jquery - 带红点的地图

> ID：10035415
> 
> 赞同：0
> 
> 时间：2012-04-05T20:20:34.723
> 
> 标签：jquery

我有一张包含红点的世界地图，当您将鼠标悬停在这些点上时，会显示一个国家列表（可能是 1 个或多个）列表中的所有项目都是指向库存页面上某个部分的链接。

我只是在学习 jquery，所以我面临一些问题，也许有人可以帮助我：

1.  我需要国家列表根据高度或国家行自动调整大小
2.  一次应该只显示一个列表。
3.  一旦我将鼠标悬停在一个点上并显示国家/地区，然后将鼠标移出它就无法再次工作，直到我刷新页面
4.  我的 jquery 代码有意义吗，有没有更好的方法？

这是 html 部分中大多数 div 的样子：

```
 <div id="austDiv32">
 <img class="dot5" src="../images/dot.png" alt="Austria" style="margin: 80px 0 0 450px;" />
 <div id="Div32" class="theDiv" style="margin: 20px 0 0 460px;">
 <a href="availability.aspx?region=Austria" class="style1">Austria/a> 
 <a href="availability.aspx?region=Czech_Republic-Hungary"class="style1">
 CzechRepublic<br />Hungary</a> 
 <a href="availability.aspx?region=Serbia" class="style1">Serbia</a>
 </div>
 </div> 
```

这是 jquery 的样子：

```
 $(function () {

        $(".dot").mouseover(function () {
            $(this).parent().children("div").animate({ height: "130px" }, 1000).css("visibility", "visible").delay(3000);
        });

        $(".dot").mouseout(function () {
            $(this).parent().children("div").fadeOut(600).removeClass(".theDiv");
        })

        $(".dot2").mouseover(function () {
            $(this).parent().children("div").animate({ height: "18px" }, 1000).css("visibility", "visible").delay(1000);

        });

        $(".dot2").mouseout(function () {
            $(this).parent().children("div").fadeOut(600).removeClass(".theDiv");

        });

        $(".dot3").mouseover(function () {
            $(this).parent().children("div").animate({ height: "30px" }, 1000).css("visibility", "visible").delay(1000);
        })

        $(".dot3").mouseout(function () {
            $(this).parent().children("div").fadeOut(600).removeClass(".theDiv").end();

        });

        $(".dot4").mouseover(function () {
            $(this).parent().children("div").animate({ height: "50px" }, 1000).css("visibility", "visible").delay(1000);
        })

        $(".dot4").mouseout(function () {
            $(this).parent().children("div").fadeOut(600).removeClass(".theDiv");

        });

        $(".dot5").mouseover(function () {
            $(this).parent().children("div").animate({ height: "70px" }, 1000).css("visibility", "visible").delay(1000);
        })

        $(".dot5").mouseout(function () {
            $(this).parent().children("div").fadeOut(600).removeClass(".theDiv");

        });

        $(".dot6").mouseover(function () {
            $(this).parent().children("div").animate({ height: "145px" }, 1000).css("visibility", "visible").delay(1000);
        })

        $(".dot6").mouseout(function () {
            $(this).parent().children("div").fadeOut(600).removeClass(".theDiv");

        });

    }); 

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:45:07.217

这与问题无关，但它会帮助您编写更好的代码：

不要用不同的值一遍又一遍地重复相同的代码，让你的元素包含你需要的数据。那么你只需要一个函数来完成整个集合。

例如：

```
<div class='dot' data-aniHeight='18px'></div> 
```

JS：

```
$(".dot").mouseover(function () {
    var aniHeight = $(this).data('aniHeight');
    $(this).parent().children("div").animate({ height: aniHeight }, 1000).css("visibility", "visible").delay(1000);
}); 
```

# java - GAE 和通用 servlet 控制器

> ID：10035422
> 
> 赞同：0
> 
> 时间：2012-04-05T20:20:56.667
> 
> 标签：java, google-app-engine, gwt

我读[了这个](https://stackoverflow.com/questions/8976611/is-it-possible-to-deploy-a-java-servlet-to-gae)问题，它说可以在 GAE 上部署一个通用的 servlet；好的...但是在这种情况下，servlet 控制器呢？是否可以仅使用已部署的应用程序访问公共 servlet？

我的意思是如何使 servlet 只能通过其本机 Web 应用程序访问？

为了更清楚...

目前我正在使用类似`GWT.getHostPageBaseURL()+"myservletmapping?id=N"`获取 servlet 的代码；但有一个问题

*   A) 以上述方式部署 GAE 后，我是否可以访问我的 servlet？
*   B）如何使其仅可通过我的 GWT 应用程序（集成了 servlet 的应用程序）访问？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:17:28.827

是的，GAE 支持 servlet；您可以在 GAE 上部署 servlet 并调用它们；请观看[此](https://developers.google.com/appengine/docs/java/gettingstarted/creating)以获取更多详细信息

# asp.net - 如何以编程方式创建“真正”的 Excel 文件

> ID：10035430
> 
> 赞同：8
> 
> 时间：2012-04-05T20:21:21.477
> 
> 标签：asp.net, excel, telerik

> **可能重复：**
> [在 ASP.NET 中生成 Excel 文件](https://stackoverflow.com/questions/150339/generating-an-excel-file-in-asp-net)

**这是我的问题：**您如何以编程方式创建“真正的”Excel 文件？

**注意：**我不是指 CSV、HTML/CSS 或 XML 文件，我指的是以 Excel 用于保存电子表格的相同格式编写的文件。

**背景：**我正在开发一个 ASP.Net 应用程序，其中包括 Telerik 的 RadGrid。我们目前正在使用 RadGrid 的 ExportToExcel() 函数，但我们的一些客户需要能够使用 Excel 查看器查看这些导出。Telerik 的函数导出一个基于 HTML/CSS 的文件，完整版的 Excel 可以打开，但 Excel Viewer 不能。

我确信以编程方式创建一个“真正的”Excel 文件是可能的，但我不确定从哪里开始。是否有可以帮助我做到这一点的 SDK？

任何建议，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-05T20:29:01.493

您可以使用 Excel 中的互操作，就像 RedFilter 向您展示的那样，但也有一些开源替代方案，不需要在您的 PC 上安装 Excel 即可工作。如果您在没有 Excel 的服务器上部署了一个 asp.net 项目，它会很有用。

EPPlus 是一个很好的库。[http://epplus.codeplex.com/](http://epplus.codeplex.com/)

就个人而言，我使用 Koogra。[http://sourceforge.net/projects/koogra/?_test=b](http://sourceforge.net/projects/koogra/?_test=b)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T20:26:38.330

您可以从 Microsoft 获得[Office 文件格式](http://www.microsoft.com/openspecifications/en/us/programs/osp/office-file-formats/default.aspx)规范，但二进制格式在某些地方非常复杂。不过，您可能可以通过最小的实现而侥幸逃脱。这是[**.xls 二进制文件格式规范**](http://msdn.microsoft.com/en-us/library/cc313154%28v=office.12%29.aspx)。我建议使用 Office 2007 和 2010 使用的新 XML 格式 - 请参阅[有关 Office Open XML 标准的这篇 WikiPedia 文章](http://en.wikipedia.org/wiki/Office_Open_XML)。

想到的唯一其他选择是自动化 Excel 并让它生成文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T20:27:37.320

您可以使用互操作（如另一个答案中所述），但您在服务器环境中不受官方支持。

另一种解决方案是使用***OpenXML SDK 2.0***，它应该允许您创建 XLSX 文件。它可以从这里下载： http: [//www.microsoft.com/download/en/details.aspx](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=5124) ?displaylang=en&id=5124 。如果您决定使用此解决方案，我建议您查看那里也提供的***OpenXML SDK 2.0 Productivity Tool***。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T20:56:01.000

最新版本的[ExcelViewer](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=10)显然支持以下文件格式：

> 您只能打开 Excel 文件（.xlsx、.xlsm、.xlsb、.xltx、.xltm、.xls、.xlt、.xlm 和 .xlw）。即使您可以打开启用宏的文件（.xlsm、.xltm 和 .xlm），您也无法运行宏。

所以... XML 格式文件不是问题 - 因此适当的解决方案是编写 OpenXML 格式。不幸的是，这并不好玩……你可以做到，该工具包可以让你对东西进行逆向工程，但代码很糟糕。

所以，如果是我（过去和将来都会），我会查看[ClosedXML](http://closedxml.codeplex.com/)以生成 OpenXML 文档——它是我下次列表的顶部。

当然，也有许多商业选择 - 适合的程度取决于您的具体用例。

尽管如此，“正确”的答案是通过任何方式生成 OpenXML (.xlsx) 文档。

* * *

**编辑：**对：[ExcelXMLWriter](http://www.carlosag.net/Tools/ExcelXmlWriter/)的引用是错误的 - 这将无济于事，因为它的 ExcelML

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-06T00:40:48.117

Apache POI 是用于编写 Excel 文件的流行且可靠的 Java 库。NPOI 是使用 .NET 编写 Excel 文件的另一个不错的选择 (http://npoi.codeplex.com)。

# android - Android 媒体播放器服务冻结三星 Galaxy S

> ID：10035444
> 
> 赞同：1
> 
> 时间：2012-04-05T20:22:14.667
> 
> 标签：android, service, media-player, galaxy

我的网站有一个广播应用程序，在我的 EVO 和其他运行良好的设备上运行，但用户告诉我，在他的三星 Galaxy S 中，它冻结了应用程序（他给我发了一段视频，我可以看到媒体播放器服务接到电话并开始，但没有声音出来，应用程序冻结没有崩溃屏幕发送报告或没有它只是冻结），我没有 Galaxy 进行测试，那我该怎么办？有没有其他人有类似的问题？我尝试在这里粘贴我的代码，但有人决定在没有任何建议的情况下结束我的问题。我的应用程序所做的只是从主要活动中调用媒体播放器的按钮添加我的 mp3 流的 url 并启动付款人。

```
Button canal1 = (Button) findViewById(R.id.bcanal1);
        canal1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
               mUrl = "http://67.212.165.106:8161";
                   textRadioName.setText("you are listening to VARIADO!");
                       Intent i = new Intent (ChevereMovilActivity.this, PlayerService.class);
        startService(i);
        PlayerService.setSong(mUrl, "Temp Song", null); 
        start();
        }}); 
```

启动方法

```
@Override
public void start() {
    if (PlayerService.getInstance() != null) {
        PlayerService.getInstance().startMusic();
    }
} 
```

在清单中

```
<service android:name=".PlayerService" 
            android:label="@string/app_name"> 
            <intent-filter>
        </intent-filter>    
    </service> 
```

就像我说它在我的前夜工作但不是三星 Galaxy S 我使用的是 Android 2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:31:11.597

该服务被冻结，因为三星 Galaxy S 无法准备流并且您可能正在使用 mediaPlayer.prepare() 而不是 mediaPlayer.prepareAsync()。

我认为这是某些 Galaxy 设备中没有记录的“怪癖”。问题是流格式。如果您在控制台中编写：

```
wget -S -O stream http://67.212.165.106:8161 
```

还有他们：

```
head -n 12 stream 
```

你可以看到类似的东西：

```
ICY 200 OK
icy-notice1:<BR>This stream requires <a href="http://www.winamp.com/">Winamp</a><BR>
icy-notice2:SHOUTcast Distributed Network Audio Server/Linux v1.9.8<BR>
icy-name:My Station name
icy-genre:Various
icy-url:http://www.radiokolergan.com
content-type:audio/mpeg
icy-pub:1
icy-br:64

qOCéúÐX43‘¤]ÝáÅQ(;Œ6½v<‡ÿò„ 
```

我认为问题在于这个标题。如果您尝试使用其他网址（例如：），`http://195.55.74.213/rtve/radio4.mp3?GKID=804c9f24cb4811e1af4600163ea2c743`您不会获得此标头，并且它在三星 Galaxy Tab 和其他设备中重现良好。

# python - 如何在 matplotlib 中制作空白子图？

> ID：10035446
> 
> 赞同：105
> 
> 时间：2012-04-05T20:22:18.993
> 
> 标签：python, matplotlib, axes, subplot

我正在 matplotlib 中制作一组子图（例如 3 x 2），但我的数据集少于 6 个。如何使剩余的子图为空白？

安排如下：

```
+----+----+
| 0,0| 0,1|
+----+----+
| 1,0| 1,1|
+----+----+
| 2,0| 2,1|
+----+----+ 
```

这可能会持续几页，但在最后一页上，例如，2,1 框的 5 个数据集将是空的。但是，我已将该数字声明为：

```
cfig,ax = plt.subplots(3,2) 
```

因此，在子图 2,1 的空间中，有一组带有刻度和标签的默认轴。如何以编程方式将该空间渲染为空白且没有轴？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-04-05T21:03:32.777

您始终可以隐藏不需要的轴。例如，以下代码完全关闭第 6 个轴：

```
import matplotlib.pyplot as plt

hf, ha = plt.subplots(3,2)
ha[-1, -1].axis('off')

plt.show() 
```

结果如下图：

![3x2 网格图形的图像，右下方单元格中未呈现图形](../Images/5d5442a953a84da3c4b6f9b8650bc060.png)

[或者，请参阅问题Hiding axis text in matplotlib plots](https://stackoverflow.com/q/2176424/623518)的公认答案，以了解保留轴但隐藏所有轴装饰（例如刻度线和标签）的方法。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-01-15T16:12:45.847

自从第一次提出这个问题以来，matplotlib 中添加了一个*大大*改进的[子图界面。](http://matplotlib.org/users/gridspec.html)在这里，您可以准确地创建您需要的子图，而无需隐藏额外内容。此外，子图可以跨越额外的行或列。

```
import pylab as plt

ax1 = plt.subplot2grid((3,2),(0, 0))
ax2 = plt.subplot2grid((3,2),(0, 1))
ax3 = plt.subplot2grid((3,2),(1, 0))
ax4 = plt.subplot2grid((3,2),(1, 1))
ax5 = plt.subplot2grid((3,2),(2, 0))

plt.show() 
```

![在此处输入图像描述](../Images/214792148997b8685132c78b1f13bed2.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-04-10T20:19:37.307

也可以使用 Axes.set_visible() 方法隐藏子图。

```
import matplotlib.pyplot as plt
import pandas as pd

fig = plt.figure()
data = pd.read_csv('sampledata.csv')

for i in range(0,6):
    ax = fig.add_subplot(3,2,i+1)
    ax.plot(range(1,6), data[i])
    if i == 5:
        ax.set_visible(False) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T20:42:27.140

是否可以在需要时创建子图？

```
import matplotlib
matplotlib.use("pdf")
import matplotlib.pyplot as plt

plt.figure()
plt.gcf().add_subplot(421)
plt.fill([0,0,1,1],[0,1,1,0])
plt.gcf().add_subplot(422)
plt.fill([0,0,1,1],[0,1,1,0])
plt.gcf().add_subplot(423)
plt.fill([0,0,1,1],[0,1,1,0])
plt.suptitle("Figure Title")
plt.gcf().subplots_adjust(hspace=0.5,wspace=0.5)
plt.savefig("outfig") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-27T22:14:37.983

要删除位于 (2,1) 的绘图，您可以使用

```
import matplotlib.pyplot as plt
cfig,ax = plt.subplots(3,2)
cfig.delaxes(ax.flatten()[5]) 
```

# java - 如何对二维 ArrayList 进行排序

> ID：10035447
> 
> 赞同：5
> 
> 时间：2012-04-05T20:22:31.313
> 
> 标签：java, sorting, multidimensional-array, arraylist

我有一个包含双值的二维 ArrayList：

```
ArrayList<ArrayList<Double>> data = new ArrayList<ArrayList<Double>>(); 
```

与经典数组类比，我想对该矩阵的“列”进行排序：我想在子 ArrayLists 中获取具有相同索引的项目，然后对它们进行排序。就像为每一列调用 Collections.sort() ... 我所说的行是指外层和内层是列。

这样做的正确方法是什么？我想过迭代矩阵以反转它，然后使用 Collections.sort() 对每一行进行排序？但也许这不是最好的解决方案，因为矩阵大约是 400*7000 。

我不能使用经典数组，因为矩阵的大小是未知的。

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:43:34.257

做这样的事情：

```
 final int COLUMN = 5;
    Comparator<ArrayList<Double>> myComparator = new Comparator<ArrayList<Double>>() {
        @Override
        public int compare(ArrayList<Double> o1, ArrayList<Double> o2) {
            return o1.get(COLUMN).compareTo(o2.get(COLUMN));
        }
    };
    Collections.sort(list, myComparator); 
```

将 COLUMN 设置为您要排序的任何列。

更新：

是的，这根本行不通。

我喜欢 ahanin 的第二个建议，即制作你自己的 List 来包装你的原始 List。您还必须包装 get() 返回的对象，以便变量 WrappedList 包含列值，并且 WrappedList.get(0) 也返回一列值。然后排序就可以工作了。我想知道您必须为 Collections.sort() 实施哪些最少的方法才能在您的列表上工作。

仅采用其他人的快速排序并使其与您的列表一起使用可能是最简单的。

这是一种实现：[http ://www.vogella.de/articles/JavaAlgorithmsQuicksort/article.html](http://www.vogella.de/articles/JavaAlgorithmsQuicksort/article.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T21:11:29.620

所以这里有一个类似于反转想法的选项，但不是反转整个事物，而是一次构建一列，对其进行排序并丢弃它。

```
ArrayList<ArrayList<Double>> data = new ArrayList<ArrayList<Double>>(); 

for(int c=0; c<data.get(0).size(); c++) {
    List<Double> col = new ArrayList<Double>();
    for( int r=0; r<data.size(); r++ )
        col.add( data.get(r).get(c) );

    Collections.sort(col);

    for( int r=0; r<col.size(); r++ )
        data.get(r).set( c, col.get(r) );
} 
```

我怀疑您是否能够获得任何更有效的东西，除了可以选择创建自己的类，该类提供表中列的视图作为列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T20:29:32.180

我有两个疯狂的想法：要么实现你自己的排序算法，它会知道你的倒置矩阵结构，要么编写一个 Collection 的实现来包装你的结构并表示列，以后可以将其用作 Collections 的参数。种类（）。使用 ArrayList 这应该相当快。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T17:33:25.360

这是一种将**数据**转换为对象数组的方法。将列更改为您喜欢的任何内容。

```
final int column = 3;
ArrayList<ArrayList<Double>> data = new ArrayList<ArrayList<Double>>(); 

// Convert data into an object array
Object [] temp = data.toArray();

Arrays.sort(temp, new Comparator<Object>() {
    @Override
    public int compare(Object o1, Object o2) {
        // Get inner arrays to be compared by type-casting
        ArrayList<Double> temp1 = (ArrayList<Double>) o1;
        ArrayList<Double> temp2 = (ArrayList<Double>) o2;

        // Then compare those inner arrays' indexes
        return temp1.get(column).compareTo(temp2.get(column));
    }
});

// Clear the old one and add the ordered list into
data.clear();

for(Object o: temp)
{
    data.add((ArrayList<Double>) o);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T20:42:10.653

我想如果存储不是问题，您可以在 ArrayList 中使用 SortedMap。这样您就不必担心对元素进行排序。

```
ArrayList<SortedMap<Double,byte>> data; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T20:59:36.963

不确定我是否正确理解了您的 Q，但这将对所有“列”进行排序（假设外层是行，内层是列）：

```
 final ArrayList<ArrayList<Double>> data = new ArrayList<ArrayList<Double>>(); 
    //...

    final Integer[] rows = new Integer[data.size()];
    for(int i=0;i<rows.length;i++)
        rows[i]=i;

    int cols = data.get(0).size();
    for(int c=0;c<cols;c++)
    {
        final int colidx = c;
        Arrays.sort(rows,new Comparator<Integer>(){
            @Override
            public int compare(Integer arg0,
                    Integer arg1) {
                return data.get(arg0).get(colidx).compareTo(data.get(arg1).get(colidx));        
            }});    

        for(int i=0;i<rows.length;i++)
            data.get(i).add(colidx+1,data.get(rows[i]).get(colidx));
        for(int i=0;i<rows.length;i++)
            data.get(i).remove(colidx);
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-05T21:45:38.493

在任何情况下，您都必须访问所有元素才能对它们进行排序。所以你能做的就是这个。

```
int temp[] = new temp[col.length];
int x = 0;
while(x < row.length)
{
    for(int i = 0; i<col.length; i++)
    {
        temp[i] = mat[x][i];
    }
    sort(temp);
    for(int i = 0; i<col.length; i++)
    {
        mat[x][i] = temp[i];
    }
x++;
} 
```

这里的运行时间是`O(n^2logn)`，但由于您只对 400 个双打进行排序，因此不会花费太多时间。并且由于您必须至少访问矩阵中的每个元素一次，因此您不能低于`O(n^2)`

# java - 如何将所有jar文件放在一个jar文件中？

> ID：10035451
> 
> 赞同：1
> 
> 时间：2012-04-05T20:22:46.503
> 
> 标签：java, build, jar

是否可以构建一个由我需要的所有 jar 文件组成的 jar 文件？我正在构建我的项目，jar 文件没有包含在生成的 jar 文件中，我想生成一个单独的 jar 文件，其中包含该项目中的所有 jar 文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:25:21.997

有 Eclipse 插件可以做到这一点[FatJar](http://fjep.sourceforge.net/) , [JarsSplice](http://ninjacave.com/jarsplice)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:25:41.580

不可能。您不能在 jar 中包含 jar 以便将它们放在类路径中（您可以将它们放在 jar 中，但不能将它们用作依赖项）

然而，[Maven为您提供了](http://maven.apache.org/)[maven-assembly-plugin](http://maven.apache.org/plugins/maven-assembly-plugin/)的替代方案。它解压缩所有 jar 并将它们的 .class 文件存储在新的单个 jar 中。当然，还有其他选项可以做同样的事情，但是 maven 无论如何都是一个很棒的构建工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T20:36:09.750

yguard[工具](http://www.yworks.com/en/products_yguard_about.html)可以做到这一点。如果您愿意，它还可以缩小您的代码并对其进行混淆。

这是他们文档中的一个蚂蚁示例：

```
 <taskdef name="yguard" classname="com.yworks.yguard.YGuardTask" classpath="buildlib/yguard.jar"/>

  <inoutpairs resources="auto">
    <fileset dir="${input-lib-dir}">
      <include name="myapp*.jar"/>
      <exclude name="*_obf.jar"/>
    </fileset>
    <mapper type="glob" from="*.jar" to="*_obf.jar"/>
  </inoutpairs> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T20:38:17.753

看看onejar： [http ://one-jar.sourceforge.net/](http://one-jar.sourceforge.net/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T21:52:22.093

您可以使用一个 jar maven 插件。

```
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <!--                   REPOSITORIES                          -->
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

    <pluginRepositories>
        <pluginRepository>
            <id>onejar-maven-plugin.googlecode.com</id>
            <url>http://onejar-maven-plugin.googlecode.com/svn/mavenrepo</url>
        </pluginRepository>
    </pluginRepositories>
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
            <!--                      ONE JAR PLUGIN                     -->
            <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <configuration>
                    <archive>
                        <manifest>
                            <mainClass>org.acme.MainClass</mainClass>
                            </manifest>
                    </archive>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.dstovall</groupId>
                <artifactId>onejar-maven-plugin</artifactId>
                <version>1.4.4</version>
                <executions>
                    <execution>
                        <configuration>
                            <!-- Optional -->
                            <onejarVersion>0.97</onejarVersion>
                            <!--
                                Optional, use only if you need to include native libraries
                                (dll's) <binlibs> <fileSet>
                                <directory>${project.build.directory}/dllextract</directory>
                                <includes> <include>test.dll</include> </includes> </fileSet>
                                </binlibs>
                            -->
                            <!-- Optional, default is false -->
                            <attachToBuild>true</attachToBuild>
                            <!-- Optional, default is "onejar" -->
                            <classifier>onejar</classifier>
                        </configuration>
                        <goals>
                            <goal>one-jar</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin> 
```

# google-app-engine - appengine 任务队列计数

> ID：10035455
> 
> 赞同：1
> 
> 时间：2012-04-05T20:23:04.243
> 
> 标签：google-app-engine, memcached

由于无法根据[AppEngine 任务队列以编程方式知道任务队列计数：有没有办法确定队列深度？](https://stackoverflow.com/questions/1567151/appengine-taskqueue-is-there-a-way-to-determine-the-queue-depth)，我正在考虑使用缓存来监控队列。这是可取的还是主要的罪过？（我知道缓存不可能 100% 可靠，89% 的可靠性对我来说很好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:09:00.890

这不是可靠性的问题，缓存可以随时清除，然后你就可以清零了。您需要将计数存储在数据存储中。

查看[分片计数器](https://developers.google.com/appengine/articles/sharding_counters)以获取有关如何在数据存储上获得良好写入吞吐量的教程。

# php - 第一个字节慢 - Php Fasr 和专用服务器上

> ID：10035456
> 
> 赞同：0
> 
> 时间：2012-04-05T20:23:12.130
> 
> 标签：php, performance, xcache, dedicated

我已经沉迷于页面速度有一段时间了，因为我看到谷歌也是如此。我对我的网站进行了彻底的重新设计，它看起来很快，但网页测试显示第一个字节的 F 并且它显示大约 2 秒。现在在非缓存浏览器上加载页面似乎比 2 秒要长得多。

现在我所做的事情

*   专用 peer1 服务器 (centOS x64) 服务器负载约为 .40 .30 .40
*   运行 FastCGI
*   已安装 xcache（确认工作）
*   压缩所有图像

该网站主要运行在 vbulletin 上，在 VBCMPS 内容管理之上有自定义脚本（仅与 VB 集成）

我对生成页面的索引文件从头到尾进行了微时间速度测试，它报告所有处理的平均速度为 0.02 秒。

我只是不明白为什么第一个字节的速率似乎关闭了？

我计划的最后一步是删除 .htaccess 文件并插入 http 配置并关闭允许 ovveride。

任何输入都会很棒！

谢谢克里斯

# php - 我无法让这个 php 代码的语法正常工作

> ID：10035458
> 
> 赞同：0
> 
> 时间：2012-04-05T20:23:18.780
> 
> 标签：php, session

```
$_SESSION[{'\'testingrecord'.$testingrecordsfec.'\''}] 
```

这原本看起来像这样

```
${'testingrecord'.$testingrecordsfec} 
```

但我需要将此处创建的变量添加到全局变量 $_SESSION

这个变量是为数组中的每个项目创建的。

IE

```
$testingrecord0
$testingrecord1
$testingrecord2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:26:27.477

删除`{}`和`\'`。

```
$_SESSION['testingrecord'.$testingrecordsfec]; 
```

`$_SESSION`就像任何其他数组一样，键可以是任何产生字符串或整数的表达式。

# validation - 如何验证 NTP 时间同步

> ID：10035459
> 
> 赞同：6
> 
> 时间：2012-04-05T20:23:23.013
> 
> 标签：validation, time, synchronization, statistics, ntp

我需要创建一个应用程序来验证每台机器上的 NTP 时间同步。换句话说，我需要确定我的局域网中的每台机器是否同步到一个公共时间服务器（stratum）。所以，到目前为止，我想出了两种方法。

1) 让每台机器上的 NTP 客户端生成统计文件。如果我采用这种方法，我应该检查哪个统计文件以确定机器上的时间是否在时间服务器的某个容差范围内？有peerstats、clockstats和loopstats。这些文件中是否包含我可以用来确定时间是否同步的信息？

2) 调用 ntpq 命令行参数并通过管道输出。解析输出。

现在我更喜欢选项 1，但是，正如我所指出的，我不确定是否有任何 NTP 统计文件包含我可以用来确定时间是否同步的信息。

有没有更好的方法。

是否有可以用来直接查询 NTP 客户端的 API？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T01:04:41.167

您可以运行`ntpq -c "rv 0 stratum,offset"`命令并解析输出。如果返回`stratum`<16，那么`offset`将是 ntp 池和您的系统时钟之间的时间差（以毫秒为单位）。

还有一个`libntpq`图书馆正在开发中。它处于早期测试阶段，但如果您非常需要某些东西，它应该可以使用。

**2016 年 10 月 7 日更新**：看起来`libntpq`项目已经失效很长时间了，但源代码中包含了一个同名的库`ntp`。它看起来很有用，但很可能需要静态链接。人们应该能够容忍 GPL 以便以这种方式使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:32:37.847

验证同步的最佳方法是实际验证它，而不是查看由您正在检查其工作的守护程序生成的文件。您应该运行`ntpdate -q`或等效并验证报告的偏移量是否在您需要的任何公差范围内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T19:33:48.427

我也有同样的问题。我一直在使用两个命令的组合：ntptime [然后解析输出以确认没有出现“错误”一词] ntpq -p [然后确认它返回非错误状态，以及至少一个“ +" 符号表示同步状态]

这在我的 CentOS 机器上很好用，但在我的 FreeBSD 服务器上，即使有几个小时不同步，它也会返回“OK”状态，只要本地时间稳定，ntpd 正在运行，并且时间源服务器正在返回一致的时间。我欢迎更好的答案。使用 ntpdate 的建议可能会奏效，如果我可以安装一些东西以使 ntpdate 使用 ntp.conf 获取时间源服务器列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T10:23:56.223

我认为两者都会输出良好的结果，唯一的区别是如果你真的想每隔几分钟监控一次时间然后选择第二个选项......ntpq有各种选项来监控你的整个Ntp同步过程......ntpq>pe会给你您所有配置的对等点的状态，ntpq>as 将提供有关每个对等点的所有其他详细信息，ntpq>rv 将提供有关每个对等点的完整概要...还有其他内部命令可通过 ntpq 调试您的 ntp 进程。如果您需要更多说明，则值得浏览以下页面：http: [//doc.ntp.org/4.1.1/ntpq.htm](http://doc.ntp.org/4.1.1/ntpq.htm)

对于您的第一个选项，它是一个统计报告，您可以将其保留在您的 ntp 上，以便按照 ntp.conf 文件中的说明继续生成和更新，即您是否希望它每天或每周生成等等...

Loopstats 将向您显示日期、时间、频率和时间偏移、抖动、时钟规则时间常数等。Peerstats 将通知您所有存在的对等点，并且配置的 clockstats 将通知时钟驱动程序状态

除此之外，还有 rawstats 和 sysstats 选项可用，您还可以检查您的系统日志并通过 ntp.conf 文件将它们重定向到您自己的 Ntp 日志

您可以浏览上述链接中的监控部分，并可以了解有关如何配置 ntpstats 的更多详细信息

希望这可能对您有所帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-25T12:17:36.443

如果您只需要确定机器是否同步，您可以使用`ntpstat`.

```
SYNOPSIS
   ntpstat

DESCRIPTION
   ntpstat will report the synchronisation state of the NTP daemon 
   running on the local machine.  If the local system is found to be 
   synchronised to a reference time source, ntpstat will report the 
   approximate time accuracy.

RETURNS
   ntpstat returns 0 if clock is synchronised.  
   ntpstat returns 1 if clock is not synchronised.  
   ntpstat returns 2 if clock state is indeterminant, 
   for example if ntpd is not contactable. 
```

# jquery - 是否有适用于 Eclipse 的 JQuery（移动插件）？

> ID：10035461
> 
> 赞同：0
> 
> 时间：2012-04-05T20:23:24.623
> 
> 标签：jquery, eclipse, jquery-plugins, eclipse-plugin

是否有适用于 Eclipse 的 JQuery 移动插件，或者你能推荐我类似的 Eclipse 插件吗？（自动完成对我来说非常重要。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:36:56.563

JSDT 插件可能对在 eclipse 中包含 jquery 很有用，它可以在这个链接中找到

[http://marketplace.eclipse.org/content/jsdt-jquery#.UI-dH5F62So](http://marketplace.eclipse.org/content/jsdt-jquery#.UI-dH5F62So)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:13:06.223

这可能是你要找的..看看这个[http://www.mobiledevelopersolutions.com/home/announce-1/mds11eclipsepluginforphonegaponandroidreleasestoday-jquerymobileandsenchatouchadded](http://www.mobiledevelopersolutions.com/home/announce-1/mds11eclipsepluginforphonegaponandroidreleasestoday-jquerymobileandsenchatouchadded)

# sql - SQL Anywhere 11 - 表大小

> ID：10035463
> 
> 赞同：8
> 
> 时间：2012-04-05T20:23:32.020
> 
> 标签：sql, sqlanywhere

我正在尝试使用 SQL Anywhere 11 从数据库中获取每个表的表大小。

我刚刚发现`sp_spaceused`已被弃用

对此的任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T00:14:39.343

系统视图 SYSTAB 可能是一个足够好的替代方案。它可以为您提供表格中的行数，并且可以为您提供表格使用的页数。（在下面的示例中，我将页数乘以数据库的页大小以获得总字节大小。）

```
SELECT
    count,                      -- number of rows in the table
    (table_page_count * DB_PROPERTY('PageSize')) tablesize  
                                -- total size, in bytes
FROM SYSTAB
WHERE table_name = 'mytable';   -- or whatever limitations you want on 
                                -- the scope of the query 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T21:41:15.363

You can use this script at Sql Server to find the largest table in Database and row count

```
SELECT sc.name +'.'+ ta.name TableName
,SUM(pa.rows) RowCnt
FROM sys.tables ta
INNER JOIN sys.partitions pa
ON pa.OBJECT_ID = ta.OBJECT_ID
INNER JOIN sys.schemas sc
ON ta.schema_id = sc.schema_id
WHERE ta.is_ms_shipped = 0 AND pa.index_id IN (1,0)
GROUP BY sc.name,ta.name
ORDER BY SUM(pa.rows) DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-18T03:00:52.383

添加到 Dan K 的答案。

```
SELECT
table_name,
count,                      
cast((table_page_count * DB_PROPERTY('PageSize')) as int) as Bytes,
cast(Bytes/1024 as varchar) + ' KB' as KB,
cast(Bytes/1024/1024 as varchar) + ' MB' as MB
FROM SYSTAB
WHERE creator = 1 
order by Bytes desc 
```

# php - jQuery 选择器回调函数中的全局 Javascript 变量

> ID：10035464
> 
> 赞同：0
> 
> 时间：2012-04-05T20:23:40.460
> 
> 标签：php, javascript, jquery

我正在尝试使用 jQuery 调用 Ajax，并且需要将在页面加载时使用 PHP 设置的变量传递给两个单独的函数，以便将我的日历向前或向后移动几个月。

```
var ajax_load = "Loading...",
    loadUrl = "calendar_backend.php",
    month = parseInt(<?php echo $month ?>);
    console.log(month);
    month = <?php echo $month ?>;

$("#calendar_box").on("click",'#next_month',function(){  
    console.log(month);
    $("#calendar")  
        .html(ajax_load)  
            .load(loadUrl, "month=" + month + "&go=next");
    var month = ++month;

    console.log(month);
});

$("#calendar_box").on("click",'#previous_month',function(){  
    $("#calendar")  
        .html(ajax_load)  
            .load(loadUrl, "month" + month + "&go=previous");  
    var month = --month;
}); 
```

我在那里有控制台调用来尝试调试它，我从第一个 .log() 中得到 4，第二个中未定义，第三个中得到 NaN。从这三个我可以看到该变量没有被传递到 .on() 处理函数中。

日历生成页面在索引页面上包含_once，然后 AJAX 将用于重新生成月份的正确数据。我需要在获取字符串中传递的月份才能知道我需要偏移的当前月份有多远。

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:26:51.283

只需不要`var`在函数体内使用关键字。`var`将在`success function`. 而且您错误地使用了递减/递增运算符，它唯一`month++;`且`month--;`

```
var ajax_load = "Loading...",
    loadUrl = "calendar_backend.php",
    month = parseInt(<?php echo $month ?>);
    console.log(month);
    month = <?php echo $month ?>;

$("#calendar_box").on("click",'#next_month',function(){  
    console.log(month);
    $("#calendar")  
        .html(ajax_load)  
            .load(loadUrl, "month=" + month + "&go=next");
    month++; // Removed var and incressing

    console.log(month); 
});

$("#calendar_box").on("click",'#previous_month',function(){  
    $("#calendar")  
        .html(ajax_load)  
            .load(loadUrl, "month" + month + "&go=previous");  
    month--; // Removed var and decressing
}); 
```

# php - 长时间轮询，由于使用会话，Apache 在 sleep() 时卡住

> ID：10035474
> 
> 赞同：1
> 
> 时间：2012-04-05T20:24:17.493
> 
> 标签：php, jquery, mysql, long-polling

> 更新：会话的使用**是**调用投票页面时的问题，因为它已经打开了一次。

我正在我的网络应用程序上进行长时间的投票。

现在我只是在做类似的事情：（最终目标是做一个查询然后睡觉，然后一个查询，然后睡觉，......）

```
sleep(10);
echo 'ok'; 
```

在我的服务器端（只是为了测试它）

问题：当我尝试加载另一个页面时，它总是需要**10 秒**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:58:04.727

使用 session_write_close() 在休眠脚本中放弃会话。$_SESSION 数据仍可供读取。马克**B**

# hbase - 从 hbase shell 中的扫描获取输出

> ID：10035475
> 
> 赞同：30
> 
> 时间：2012-04-05T20:24:25.003
> 
> 标签：hbase

有什么方法可以将 hbase shell 中的扫描结果输出到文件中？我假设这很容易，但我无法在文档中找到任何内容。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-22T16:36:17.480

我知道这篇文章已经很老了，但是我自己正在搜索有关 HBase 的一些东西并遇到了它。

好吧，我不知道这是否是最好的方法，但是您绝对可以使用 HBase 为您提供的脚本选项。只需打开一个shell（最好进入HBase的目录bin）并运行

```
echo "scan 'foo'" | ./hbase shell > myText 
```

其中 foo 是您要扫描的表的名称。如果您随后打开 myText，您将在其中看到结果。希望我有帮助！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-15T21:24:05.453

使用 EOF here doc 的另一个选项，可能更可定制：

```
hbase shell <<EOF >myText
scan 'foo'
EOF 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-24T02:48:03.867

你也可以在这里使用字符串（如果你的 shell 支持它们）：

```
$ hbase shell <<< "scan 'sometable'" > myoutput.txt 
```

例如，上面我在 Linux 系统上的 Bash 中执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-27T04:05:02.503

例如：**file.sh**包含扫描“*表名*”；

执行以下命令将结果捕获到日志文件中......

```
hbase shell < file.sh(which contains hbase commands) > output.lo 
```

# twitter - Twitter API - 从某些用户加载哈希标签

> ID：10035476
> 
> 赞同：0
> 
> 时间：2012-04-05T20:24:27.297
> 
> 标签：twitter

对于我的项目，我希望在网站主页上有来自开发人员的提要，以便用户了解正在发生的事情；同时允许开发人员快速更新提要，而无需使用特定用户并允许他们展示他们一直在做什么。

这意味着我想`#dev`从一组大约 4 或 5 个用户中找到一个特定的哈希标签。

有没有人对如何实现这一点有任何想法？我试过搜索并没有找到任何东西。

我想以 JSON 格式获取这些数据，最好通过 javascript 或 php 进行格式化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:49:31.860

在玩了 Twitter API 之后，我找到了一种方法来做到这一点。

[首先，您必须对search api](https://dev.twitter.com/docs/using-search)有所了解。

因此，为了显示来自一个用户的搜索相当简单，您只需使用以下 url： `http://search.twitter.com/search.json?q=%23hashtag+from:user1` 这将返回他们推文中`user1`包含`#hashtag`的所有结果（记住 %23 是 #）。

因此，为了从多个用户返回，您必须使用以下 url： `http://search.twitter.com/search.json?q=%23hashtag+from:user1+OR+from:user2` 基本上意味着如果您希望添加更多用户，请包含`+OR+`在您的 url 中。

# android - 在android中使用IF-Else循环将字符串与EditText进行比较？

> ID：10035479
> 
> 赞同：0
> 
> 时间：2012-04-05T20:24:42.370
> 
> 标签：android, if-statement

This If Else 不起作用，因此不会指向菜单页面。我想将字符串与`EditText`输入进行比较，所以我将其更改为字符串。如何比较两个字段中的字符串输入并将它们与我的字符串 IF-Else 循环进行比较并启动意图

```
package mjour.fyp;

      public class Login extends Activity{

EditText username;
EditText password;
Button login;
String name, pass;
String lname = "mehdi";

public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.userlogin);

     login = (Button) findViewById(R.id.blog);
     username = (EditText) findViewById(R.id.editText1);
     name = username.getText().toString();   
     password = (EditText) findViewById(R.id.editText2);
     pass = password.getText().toString();  

     login.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub

            Intent myintent = new Intent("mjour.fyp.MENU");
            if(name.contentEquals(lname))
            startActivity(myintent);

            return false;

     };});}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:24:44.510

您是否在 startActivity() 之后缺少 else ？

# hash - Perl 在最后添加 Hash 到 Hash of Hash

> ID：10035480
> 
> 赞同：0
> 
> 时间：2012-04-05T20:24:48.210
> 
> 标签：hash, structure, hash-of-hashes, perl

我正在尝试将哈希添加到我的哈希哈希中，如下所示：

```
 %funkce = (
    "funkce1" => {
      "file" => "soubor1",
      "name" => "jmeno1",
      "varargs" => "args",
      "rettype" => "navrat",
      "params" => [
                "typ",
                "typ2"
            ]
    },
    "funkce2" => {
      "file" => "soubor2",
      "name" => "jmeno2",
      "varargs" => "args",
      "rettype" => "navrat",
      "params" => [
          "typ",
          "typ2"
      ]
    }
  );
  $delka = keys %funkce;
  $funkce{ "funkce" . ($delka + 1)} = {
      "file" => "soubor3",
      "name" => "jmeno3",
      "varargs" => "args",
      "rettype" => "navrat",
      "params" => [
          "typ",
          "typ2"
        ]
    }; 
```

但有一个问题。最后一个哈希在 %function 中添加为第一个，但我希望它作为最后一个。我该如何解决？我做得对吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:29:38.803

哈希不保证插入顺序。你要求它*散列*你的密钥，所以`x > y <=/=> f(x) > f(y)`

如果你想保证插入顺序，虽然我认为没有理由引入（a `tie`）开销，但标准方法是使用[`Tie::IxHash`](http://search.cpan.org/perldoc?Tie%3a%3aIxHash).

列表有*末端*，而不是散列。哈希是从一组名称或 ID 到一组对象或值的数学映射。如果我们把狗的名字想成狗的话，尽管我们可以按字母顺序排列狗的名字，但实际上并没有“第一只狗”。

从你的表现来看，

```
push( @funkce
    , { "file"    => "soubor1"
      , "name"    => "jmeno1"
      , "varargs" => "args"
      , "rettype" => "navrat"
      , "params"  => [ qw<typ typ2> ]
      }); 
```

会一样好。输入`$funkce{'funcke2'}`而不是`$funkce[2]`或`$funkce{ '$funkce' . $i }`超过输入几乎没有什么好处`$funkce[$i]` *，* 如果您要增加其他名称，那么您应该以这种方式进行划分：`$funkce{'funkce'}[2] // $funkce{'superfunkce'}[2]`

对名称的离散部分使用散列，对数字使用数组是编程数据的好方法。`$funkce{'funkce'}[2]`每一点都是一个单一的实体，因为`$funkce{'funkce2'}`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:52:35.097

如果您需要有序项目使用数组，如果您想要命名（无序）项目使用哈希。要获得接近有序散列的东西，您需要嵌套数组/散列或对散列进行排序或使用一些绑定类。

**嵌套**

```
 @funkce = (
    { name => "funkce1",
      "file" => "soubor1",
      "name" => "jmeno1",
      "varargs" => "args",
      "rettype" => "navrat",
      "params" => [
                "typ",
                "typ2"
            ]
    },
    { name => "funkce2",
      "file" => "soubor2",
      "name" => "jmeno2",
      "varargs" => "args",
      "rettype" => "navrat",
      "params" => [
          "typ",
          "typ2"
      ]
    }
  );
 push @funkce, {
  name => "funkce3",
  "file" => "soubor3",
  "name" => "jmeno3",
  "varargs" => "args",
  "rettype" => "navrat",
  "params" => [
      "typ",
      "typ2"
    ]
}; 
```

**排序**

```
%funkce = ( ... ); # as in OP

# when using
foreach my $item (sort keys %funkce) {
  # do something with $funkce{$item}
} 
```

**绑**

看[`Tie::IxHash`](http://search.cpan.org/perldoc?Tie%3a%3aIxHash)，但正如 Axeman 所说，你可能不需要/想要这个。

# c# - System.DirectoryServices.DirectorySearcher.PropertiesToLoad 中可用的不同属性有哪些

> ID：10035481
> 
> 赞同：11
> 
> 时间：2012-04-05T20:24:56.993
> 
> 标签：c#, active-directory, directoryservices

我用谷歌搜索的所有内容都只是说您可以将它们添加为字符串数组，但没有说明可用选项是什么。

目录服务提供的所有不同属性有哪些？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-05T20:27:54.510

您可以将**任何**有效的 LDAP 属性放入`PropertiesToLoad`- 请[在此处查看所有 Active Directory 属性的列表](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675090%28v=vs.85%29.aspx)- 您需要的是`Ldap-Display-Name`您感兴趣的每个属性。

此外：[Richard Mueller 有一个网站，其中包含大量关于 AD 和 LDAP 的良好信息](http://www.rlmueller.net/UserAttributes.htm)- 包括 AD 属性的 Excel 电子表格（以及从 Active Directory 用户和计算机工具到在各种对话框屏幕上设置的实际 AD 属性的映射。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T03:46:45.980

与任何其他目录一样，Active-Directory 包含由[Schema](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675085%28v=vs.85%29.aspx)描述的对象。Schema 描述了可以插入目录中的每种类型（[类](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680932%28v=vs.85%29.aspx)）对象，并为每种类型提供了它支持的[属性（属性）。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675089%28v=vs.85%29.aspx)

Schema 可以通过应用程序（例如 Exchange）进行扩展，您可以查看 AD 中的架构，注册为此提供的 MMC：

```
regsvr32 C:\Windows\System32\schmmgmt.dll 
```

然后您可以加载 MMC.EXE 程序并查看您所测试的类以及它提供的属性。

![模式管理 MMC](../Images/1e28521696f8823366e8052ab52bebb4.png)

要查看 Direcory 中的所有对象及其所有属性，您可以使用 LDP.EXE 程序（来自 W2K3 中的支持套件，本机安装在 W2K8 AD 服务器上）

![自民党程序](../Images/0a2958f603ea8e0f87ae8d29d5994918.png)

# git - Gitlab git push 使用 Vagrant 管理的 Virtualbox 失败

> ID：10035484
> 
> 赞同：4
> 
> 时间：2012-04-05T20:25:25.963
> 
> 标签：git, virtualbox, vagrant, gitlab

我能够使用这些说明使用 Gitlab 设置 Virtualbox --> [https://github.com/gitlabhq/gitlabhq/wiki/VirtualBox-Image](https://github.com/gitlabhq/gitlabhq/wiki/VirtualBox-Image)。Web 界面工作得很好，我已经添加了我的主机公钥并创建了一个“测试”项目。但是，我无法推送到我的测试存储库，因为它在创建测试目录并执行“git init”后要求输入 git@33.33.33.10 的密码。我已经添加了我的密钥，并且网络界面工作正常。有什么想法可能是错的吗？

```
$ git remote add test git@33.33.33.10:test.git
$ git push -u test master
git@33.33.33.10's password: ... 
```

我也尝试过，结果相同（2222 VM 端等于 22 主机端）：

```
git remote add test ssh://git@localhost:2222/test.git
git push -u test master
git@localhost's password:... 
```

不应该需要密码。我还将 'vagrant' 用户添加到 VM 上的 'git' 组。

我已经验证在 VM 上我能够正确收到以下预期结果：

```
vagrant@lucid32:~$ ssh -T git@localhost
hello rails, this is gitolite v2.2-11-g8c4d1aa running on git 1.7.0.4
the gitolite config gives you the following access:
     R   W  gitolite-admin
    @R_ @W_ testing 
```

这是我的流浪文件：

```
Vagrant::Config.run do |config|
config.vm.box = "gitlab"
config.vm.network :hostonly, "33.33.33.10"
end 
```

这与远程 git 推送到 virtualbox 有关。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T12:58:49.157

我在启动和运行 vagrant 机器时遇到了一些严重的问题。一方面，它不使用代码所期望的相同默认值（参见#1）。它使用 rvm (参见#3)

1.  vagrant VM 决定使用“vagrant”而不是“git”作为用户。
    所以你的 repo URL 真的是：
    ssh:// **vagrant** @localhost:2222/test.git

2.  我添加了一个 ~/.ssh/config (chmod 600):
    Host *
    User vagrant
    IdentityFile ~/.ssh/id_rsa`

3.  如果你通过了这个，你可能会得到一个关于“/usr/bin/env ruby​​ 找不到文件”的错误，因为你正在使用 vagrant，它使用 rvm。
    我必须做这两件事：

    *   `env | grep -E "^(GEM_HOME|PATH|RUBY_VERSION|MY_RUBY_HOME|GEM_PATH)=" > ~/.ssh/environment`
    *   并添加 `PermitUserEnvironment yes`到 sshd_config + 重启
        [https://github.com/gitlabhq/gitlab-shell/issues/12](https://github.com/gitlabhq/gitlab-shell/issues/12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T23:09:38.257

似乎您的密钥没有发送到虚拟机。您能否检查您的用户 .ssh 目录中是否有正确的 id_rsa 和 id_rsa.pub 文件。如果您在 Windows 上运行 vagrant（[http://vagrantup.com/docs/getting-started/ssh.html](http://vagrantup.com/docs/getting-started/ssh.html)） ，这可能会非常有问题

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T19:59:13.900

我使用不在虚拟机中的 gitlabhq_install 脚本进行了全新安装，并且遇到了最初的相同问题。我能够创建一个项目并通过 Web 界面添加我的密钥，但根本无法推送到测试存储库。所以我通过运行“ssh-copy-id -i ~/.ssh/id_rsa.pub remote-host”添加了我的用户（不是 gitlabhq 用户）公共 ssh 密钥并重新启动了 ssh。我仍然遇到同样的问题，所以我“sudo vim /home/git/.ssh/authorized_keys”并手动将使用上述命令添加的密钥复制到“#gitolite start/end”标签之间。在重置 ssh 之后，我才终于能够推动......现在我仍在摸不着头脑，但至少我猜它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-07T13:11:45.040

当我试图推送到 gitlab.com 时，我遇到了同样的问题：

```
git push gitlab mybranch 
```

使用以下流浪代码进行推送

```
 config.vm.provision :shell, :name => "pushing to remote", :keep_color => true, :privileged => false, :inline => <<-SHELL
        ---snip---
        git push gitlab mybranch
        ---snip---
  SHELL 
```

发生以下错误：

```
==> default: GitLab: The project you were looking for could not be found.
==> default: fatal: Could not read from remote repository.
==> default:
==> default: Please make sure you have the correct access rights
==> default: and the repository exists. 
```

我的解决方案是将应该由 vagrant 执行的代码放在 shell 脚本中，并使用包裹在`su`

```
 config.vm.provision :shell, :name => "Workaround to run update-repo.sh as vagrant user", :keep_color => true, :privileged => true, :inline => <<-SHELL
    su - vagrant -c /home/vagrant/bin/push.sh
  SHELL 
```

# php - TCPDF - 语言文件中的 ÆØÅ 不起作用

> ID：10035485
> 
> 赞同：0
> 
> 时间：2012-04-05T20:25:26.683
> 
> 标签：php, html, utf-8, tcpdf, html2pdf

我有一个 tcpdf 模板，我想显示挪威字母，例如 ÆØÅ 我使用的字体是 freesans。

模板从数据库中获取动态信息并正确显示 ÆØÅ 但从 php 语言文件中它只显示？这些字母应该显示在哪里。

模板、与数据库的连接和语言文件均使用 utf-8 编码。

任何可能有问题的建议，因为我使用的字体确实支持这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:47:36.350

查看[这篇博文](http://mathijskadijk.nl/post/24012364005/custom-font-and-special-characters-in-tcpdf)，了解如何在 TCPDF 中使用自定义字体和字符。它指向[这个字体转换网站](http://www.xml-convert.com/en/convert-tff-font-to-afm-pfa-fpdf-tcpdf)，它将帮助您以正确的方式转换字体，以便它们正确显示特殊字符。

# excel - 奇怪的 Excel VBA 错误“表达式太复杂”-1.#IND

> ID：10035495
> 
> 赞同：5
> 
> 时间：2012-04-05T20:26:05.743
> 
> 标签：excel, vba

我在`Worksheet_SelectionChange`事件中有一些非常基本和简单的 VBA 代码，如下所示：

```
btnB.Top = btnA.Top + btnA.Height 
```

它在我的计算机上运行良好，但偶尔在我同事的计算机上运行。似乎在工作表周围的 5 次点击中有 3 次会产生`"Expression Too Complex"`错误。其他 2 个工作没有抛出错误。我试过了：

```
Dim D as Double:D = btnA.Top + btnA.Height
btnB.Top = D 
```

同样的事情，有时有效，有时会引发错误。当错误发生时，我打破并检查了`D`which is 的值`"-1.#IND"`。我用谷歌搜索了这个值，发现它意味着不确定。`btnA.Top`大约是 11,500，所以这不是溢出问题。这个问题似乎没有押韵或理由。在 16 年的 VB 和 VBA 编程中，我从未见过或听说过这样的事情。感谢您的任何帮助/见解。

*编辑*完整代码：

```
Sub LineUpBtns()
    CommandButton2.Top = CommandButton1.Top + CommandButton1.Height
    CommandButton3.Top = CommandButton2.Top + CommandButton2.Height
End Sub
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    LineUpBtns
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:26:52.130

我知道这可能看起来很疯狂，但可能会根据工作表引用按钮......也许在另一台机器上有些东西足够循环，它正在寻找一张没有按钮的工作表，这样就会产生这个一种错误...

```
Sub LineUpBtns()        
   Sheets("Sheet1").Shapes("CommandButton2").Top = Sheets("Sheet1").Shapes("CommandButton1").Top + Sheets("Sheet1").Shapes("CommandButton1").Height 
   Sheets("Sheet1").Shapes("CommandButton3").Top = Sheets("Sheet1").Shapes("CommandButton2").Top + Sheets("Sheet1").Shapes("CommandButton2").Height 
End Sub 
```

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T06:27:09.993

尝试将此添加到代码中

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    application.EnableEvents = False
    ''''your code here
    application.EnableEvents = True
End Sub 
```

它不会产生溢出然后

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T06:15:14.827

`#IND`是一个 NaN（非数字），它是数字数据类型的值，表示未定义/不可表示的值。在您所说的浮点计算中，Windows 将其显示为 -1.#IND（不确定）。

要得到它，我相信你必须做类似的事情：

```
Dim d As Double

On Error Resume Next
d = 0 / 0
On Error GoTo 0 
```

如果您有任何错误处理，请将其删除以测试问题。您也可能遇到某种错误。因此，对于像您这样的问题，如果不查看工作簿本身就很难诊断，您可以将其上传到 www.ozgrid.com/forum，以便我们自己测试。

# mysql - 尝试停止其服务时出现 MySQL-Linux 错误

> ID：10035497
> 
> 赞同：11
> 
> 时间：2012-04-05T20:26:07.407
> 
> 标签：mysql, linux

这是我试图在我的机器上停止 MySQL 服务器时收到的消息：

```
MySQL manager or server PID file could not be found 
```

我执行的命令：

```
service mysql stop 
```

或者

```
/etc/init.d/mysqld stop 
```

我也尝试启动 MySQL 服务器，但出现以下错误

```
Starting MySQL.Manager of pid-file quit without updating file 
```

我无法访问 MySQL 数据库。

需要解决的几点：

1.  我在 /etc/my.cnf 下有 my.cnf 文件
2.  `ps -ef |grep mysql`不显示任何进程
3.  `/var/run/mysqld/`为空（无`mysql.pid`文件）
4.  `/tmp/mysql.sock`不存在

我阅读了该文件`/var/log/mysqld.log`，似乎 mysql 正在尝试进行一些崩溃恢复。昨天可能会停工，但这是我无法控制的。我只想找回数据库。任何专家可以帮助我吗？我有这台机器的 sudo 帐户，但除非它是最后一个选项，否则我不会重新启动这台机器，因为它是其他人使用的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:09:46.280

我遇到了同样的错误，在搜索谷歌的前 4 页并尝试了所有建议（修复表、移动 my.cnf、清除锁、重新启动等）后，没有任何效果。原来这是因为我手动清除了一些旧的二进制日志（binary.00001、binary.00002 等），但我没有更新 binary.index 文件以匹配。我从 binary.index 中删除了适当的行，它就起作用了。

# mysql - mysql中的分区是创建表还是仅仅创建虚拟表？

> ID：10035498
> 
> 赞同：0
> 
> 时间：2012-04-05T20:26:14.027
> 
> 标签：mysql, database-partitioning

当在 mysql 中完成分区时，它是创建表还是创建虚拟表（即视图），这些表几乎是通过表名访问的存储查询？

[这是一个来自http://www.devarticles.com/c/a/Oracle/Partitioning-in-](http://www.devarticles.com/c/a/Oracle/Partitioning-in-Oracle/1/)的示例（尽管在 Oracle 中，这只是用作示例 - 我对 mysql 中如何处理它感到非常好奇）[甲骨文/1/](http://www.devarticles.com/c/a/Oracle/Partitioning-in-Oracle/1/)：

```
CREATE TABLE SAMPLE_ORDERS
(ORDER_NUMBER NUMBER,
ORDER_DATE DATE,
CUST_NUM NUMBER,
TOTAL_PRICE NUMBER,
TOTAL_TAX NUMBER,
TOTAL_SHIPPING NUMBER)
PARTITION BY RANGE(ORDER_DATE)
(
PARTITION SO99Q1 VALUES LESS THAN TO_DATE(‘01-APR-1999’, ‘DD-MON-YYYY’),
PARTITION SO99Q2 VALUES LESS THAN TO_DATE(‘01-JUL-1999’, ‘DD-MON-YYYY’),
PARTITION SO99Q3 VALUES LESS THAN TO_DATE(‘01-OCT-1999’, ‘DD-MON-YYYY’),
PARTITION SO99Q4 VALUES LESS THAN TO_DATE(‘01-JAN-2000’, ‘DD-MON-YYYY’),
PARTITION SO00Q1 VALUES LESS THAN TO_DATE(‘01-APR-2000’, ‘DD-MON-YYYY’),
PARTITION SO00Q2 VALUES LESS THAN TO_DATE(‘01-JUL-2000’, ‘DD-MON-YYYY’),
PARTITION SO00Q3 VALUES LESS THAN TO_DATE(‘01-OCT-2000’, ‘DD-MON-YYYY’),
PARTITION SO00Q4 VALUES LESS THAN TO_DATE(‘01-JAN-2001’, ‘DD-MON-YYYY’)
)
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:19:39.243

根据Mysql 5.6 Reference Manual（16.1 Overview of Partitioning in MySQL）：

> 分区使这个概念更进了一步，使您能够根据您可以根据需要在很大程度上设置的规则在文件系统中分布各个表的部分。实际上， **表的不同部分作为单独的表存储**在不同的位置。

# grails - 测试控制器时 spock 和 grails 2.0.1 的问题

> ID：10035501
> 
> 赞同：1
> 
> 时间：2012-04-05T20:26:22.823
> 
> 标签：grails, spock

在运行 Spock 控制器测试时：

导入 grails.plugin.spock.* 导入 grails.test.mixin.*

@Mock(MusicItem) 类 MusicItemControllerSpec 扩展 ControllerSpec {

```
def "Creating element with correct parameters"() {
    setup:
    controller.params.artist = "John Lennon"
    controller.params.name = "Imagine"
    controller.params.location = new URL ("http://localhost")

    when:
    controller.save()

    then:
    redirectArgs.action == "show"
    controller.flash.message != null
    MusicItem.count() == 1
} 
```

}

测试的部分是：

```
def save() {
    def musicItemInstance = new MusicItem(params)
    if (!musicItemInstance.save(flush: true)) {
        render(view: "create", model: [musicItemInstance: musicItemInstance])
        return
    }

    flash.message = message(code: 'default.created.message', args: [message(code: 'musicItem.label', default: 'MusicItem'), musicItemInstance.id])
    redirect(action: "show", id: musicItemInstance.id)
} 
```

那是控制器的一部分。我得到了这个例外：

> | 运行 6 个 spock 测试... 3 of 6 | 失败：创建具有正确参数的元素（myvibe.fondation.MusicItemControllerSpec）| java.lang.IllegalStateException：未找到 WebApplicationContext：未注册 ContextLoaderListener？在 myvibe.fondation.MusicItemController.save(MusicItemController.groovy:29) 在 myvibe.fondation.MusicItemControllerSpec.Creating 具有正确参数的元素 (MusicItemControllerSpec.groovy:39) | 运行 6 个 spock 测试... 4 of 6

当我从 save() 方法中删除这一行时：

```
 flash.message = message(code: 'default.created.message', args: [message(code: 'musicItem.label', default: 'MusicItem'), musicItemInstance.id]) 
```

比一切都好。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T20:47:53.200

由于消息标签，它失败了。以下应该工作

```
setup:
controller.metaClass.message = {args -> "mockMessage"} 
```

[http://greybeardedgeek.net/2011/05/13/testing-grails-controllers-with-spock/](http://greybeardedgeek.net/2011/05/13/testing-grails-controllers-with-spock/)

# actionscript-3 - 跟踪 as3 中的网络连接错误

> ID：10035503
> 
> 赞同：1
> 
> 时间：2012-04-05T20:26:29.157
> 
> 标签：actionscript-3, flash, netconnection

在尝试连接到外部文件时，我无法正确识别何时未建立连接。如果我打开 localhost（即 config.gateway1），它工作正常，但如果我关闭服务器，我只会收到一个错误：

“错误打开 URL 'http://localhost/amfphp/gateway.php'”

我已经尝试在连接和呼叫上设置尝试捕获。我还设置了一个事件监听器，它应该调用一个 onFailure 函数（此时它只是跟踪失败）。当我拨打电话时似乎发生了错误，但它不起作用......但我似乎无法指示发生错误时会发生什么。

```
 var gateway1:String = config.gateway1
    var gateway2:String = config.gateway2
    var connection:NetConnection = new NetConnection ;
    connection.addEventListener(IOErrorEvent.IO_ERROR,onFailure);
    try{
        connection.connect(gateway1);
        trace("It went in to the try of the connection.connect")
        //trace(connection);
        }
    catch(error:IOError){

        trace("It didn't work",error);
    }

var responder:Responder = new Responder(onResult,onFault);//onResult and onFault can be any name
var array:Array = new Array(kioskNum,questionNum);
try 
    {connection.call("dataconnect.retrieveInfo",responder,array);
    trace("It went in to the try of the connection.call");}
catch(error:IOError){
    trace("It didn't work",error);}
//trace(gateway1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T09:27:09.137

可以使用 FaultEvent.FAULT 捕获加载 WSDL 时的错误

```
...
webService.addEventListener(FaultEvent.FAULT, onWsdlLoadError);
webService.loadWsdl(<wsdl>);
...
protected function onWsdlLoadError(event:FaultEvent):void {
    trace("wsdl load error: " + event.fault);
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T20:44:26.713

您需要为[NetStatusEvent.NET_STATUS](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/NetStatusEvent.html#NET_STATUS)添加事件侦听器并检查[信息](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/NetStatusEvent.html#info)：

```
 connection.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);

    function netStatusHandler(event:NetStatusEvent):void {
        switch (event.info.code) {
            case "NetConnection.Connect.Failed":
                //Do something on Failed
                break;
            case "NetConnection.Connect.Closed":
                //Do something on Closed
                break;
            case "NetConnection.Call.Failed":
                //Do something on Call.Failed
                break;
        }
    } 
```

# django - Django：检测复选框是提交还是禁用

> ID：10035504
> 
> 赞同：0
> 
> 时间：2012-04-05T20:26:33.467
> 
> 标签：django, checkbox, django-forms, disabled-input

在 django 中，我有代码可以动态禁用复选框，因为取消选中它会触发一些对象删除。如果我的对象不应该被删除，复选框会被禁用，并且不会被提交。

但是，在视图中，我无法区分提交为 false 的复选框和未提交的复选框，因为 form.cleaned_data 仍然包含键“is_user”。

表格.py

```
if somecondition:
    self.fields["is_user"].widget.attrs['disabled'] = True 
```

视图.py

```
if "is_user" in form.cleaned_data:
    if form.cleaned_data["is_user"] == False:
        do dangerous deleting
        return redirect(page)
    elif form.cleaned_data["is_user"] == True:
        process information
        return redirect(page)
else:
    return redirect(page) 
```

我从复选框禁用状态提交表单，然后在 pdb shell 中输入：

```
(pdb) form.cleaned_data
{'is_user': False} 
```

我曾期望 form.cleaned_data 不包含未提交字段的键。我如何检测它是否未提交，而不是未检查提交？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T21:10:20.957

未选中的复选框和未提交的复选框在 HTML 中没有区别。简单地说，如果您取消选中一个复选框，则它不会包含在 POST 中。这与 Django 无关，而只是浏览器的工作方式。

如果您真的需要区分这些状态，您将需要一个不同的控件：可能是一组用于`is_user`with`true`和`false`values 的单选按钮。或者，如果您绝对必须有一个复选框，也许您可​​以使用一些 Javascript 在未选中时设置隐藏控件。

无论如何，*除非*勾选复选框，否则删除代码绝对是错误的方法。操作应始终默认为破坏性最小：执行删除之类的操作需要积极的操作。

# linux - 启动 httpd - 检索 pid 文件时出错（空）

> ID：10035505
> 
> 赞同：3
> 
> 时间：2012-04-05T20:26:36.990
> 
> 标签：linux, fedora, apache

我手动编译并安装`httpd`在 Fedora 上。我正在尝试第一次启动它：

```
./apachectl start -d ../ 
```

并收到以下错误：

```
(20014)Internal error: Error retrieving pid file (null)
 Remove it before continuing if it is corrupted. 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T18:14:51.690

您需要删除**httpd.pid**文件并重新启动 apache 或 xampp 才能解决此问题。以下页面解释了删除该文件的说明：

[删除 httpd.pid 文件](http://questionfriends.com/questions/4fbfb8ce1c657/20014internal-error-error-retrieving-pid-file-logshttpd.pid)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T06:59:43.690

我在 ubuntu 中遇到了同样的问题，我尝试运行这段代码。尝试运行：

```
sudo rm /opt/lampp/httpd.pid 
```

然后

```
sudo /opt/lampp/lampp restart 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T20:38:20.053

pid 文件是包含守护进程的进程 id 的文件（在文件主体或文件名中）。守护进程使用它来确保一次只运行一个版本。它通过检查 pid 文件是否存在或使用某些操作系统/文件系统的flock 功能来锁定它来做到这一点。

该错误表明它无法访问 pid 文件，这将向我表明权限错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-12T16:25:49.167

如果您有`(13)Permission denied:`，只需添加“sudo”，然后添加您的推荐。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-06T13:15:06.577

我在termux上遇到了这个问题。我做了

```
su
find -iname httpd.pin 
```

接着

```
su
rm /sbin/.magisk/mirror/data/data/com.termux/files/usr/var/run/apache2/httpd.pid 
```

# android - 转义空格 Android strings.xml

> ID：10035508
> 
> 赞同：3
> 
> 时间：2012-04-05T20:26:50.450
> 
> 标签：android, xml, android-xml

> **可能重复：**
> [在字符串资源中强制使用空格](https://stackoverflow.com/questions/8624755/enforcing-spaces-in-string-resources)

这是我用于我的 Android 项目的 strings.xml 文件。

```
........
........
<string name="bcount">Block Count\t\t\t: </string>
<string name="fbcount">Free Blocks\t\t\t: </string>
<string name="blsiz">Block Size\t\t\t: </string>
<string name="newvfs">New VFS</string>
<string name="mknewfold">Making new folder </string>
<string name="creating">Creating </string>
........
........ 
```

这样做的问题是字符串末尾的空格`"Block Count\t\t\t: "`消失了。仅`"Block Count\t\t\t:"`由 java 返回。如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-05T20:32:44.007

Android 不支持在末尾保留空格，有关更多信息，请参阅[此](https://stackoverflow.com/questions/1587056/android-string-concatenate-how-to-keep-the-spaces-at-the-end-and-or-beginnin)Stackoverflow 答案。

解决方案斜线解决方法是使用 \u0020 代替那些后缀空格。

# ruby - 等了这么久之后让 Watir 继续前进

> ID：10035510
> 
> 赞同：1
> 
> 时间：2012-04-05T20:26:59.537
> 
> 标签：ruby, watir

我写了一些 Watir 代码，从文本文件中加载一堆网站，然后检查页面是否包含某些特定文本，虽然有些网站需要很长时间才能加载，但我该如何做到这一点Watir 等待页面加载 10 秒，如果没有，它会继续前进吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:31:01.607

WatirMelon 页面上有一个 Timeout 类示例 - 请参见[此处](http://watirmelon.com/2009/03/26/timing-out-watir-with-timeouttimeout/)。

我用下面的网页试了一下，它似乎工作。

```
require 'watir'

ie = Watir::IE.new

check_url = 'http://www.nst.com.my/'

begin
    Timeout::timeout(10) do
        ie.goto(check_url)
    end
    puts 'page loaded'
rescue Timeout::Error => e
    puts 'page timed out'
end 
```

您可以通过上面的代码循环您的 URL 列表。

# c++ - C++ 对象作为返回值：复制还是引用？

> ID：10035513
> 
> 赞同：11
> 
> 时间：2012-04-05T20:27:22.290
> 
> 标签：c++, memory, object, return

我想测试当函数的返回值为对象时 C++ 的行为。我做了这个小例子来观察分配了多少字节，并确定编译器是复制对象（比如当对象作为参数传递时）还是返回某种引用。

但是，我无法运行这个非常简单的程序，我也不知道为什么。错误说：“调试断言失败！表达式：BLOCK_TYPE_IS_INVALID”在某些 dbgdel.cpp 文件中。Project 是一个 win32 控制台应用程序。但我很确定这段代码有问题。

```
class Ctest1
{
public:
   Ctest1(void);
   ~Ctest1(void);

   char* classSpace;
};

Ctest1::Ctest1(void)
{
   classSpace = new char[100];
}

Ctest1::~Ctest1(void)
{
   delete [] classSpace;
}

Ctest1 Function(Ctest1* cPtr){
   return *cPtr;    
}

int _tmain(int argc, _TCHAR* argv[])
{
   Ctest1* cPtr;

   cPtr=new Ctest1();

   for(int i=1;i<10;i++)
      *cPtr = Function(cPtr);

   delete cPtr;

   return 0;
   } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-05T20:30:49.633

你违反了[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)。

具体来说，当您返回一个对象时，会创建一个副本*，*然后将其销毁。因此，您有一系列事件，例如

```
Ctest1::Ctest1(void);
Ctest1::Ctest1(const Ctest1&);
Ctest1::~Ctest1();
Ctest1::~Ctest1(); 
```

即创建了两个对象：您的原始对象构造，然后是隐式复制构造函数。然后删除这两个对象。

由于这两个对象都包含*相同*的指针，因此您最终`delete`会在相同的值上调用两次。 **繁荣**

* * *

*额外积分*：当我调查诸如“我想知道副本是如何制作的”之类的问题时，我将打印语句放在有趣的类方法中，如下所示：

```
#include <iostream>

int serial_source = 0;
class Ctest1
{
#define X(s) (std::cout << s << ": " << serial << "\n")
  const int serial;
public:
   Ctest1(void) : serial(serial_source++) {
     X("Ctest1::Ctest1(void)");
   }
   ~Ctest1(void) {
    X("Ctest1::~Ctest1()");
   }
   Ctest1(const Ctest1& other) : serial(serial_source++) {
    X("Ctest1::Ctest1(const Ctest1&)");
    std::cout << " Copied from " << other.serial << "\n";
   }
   void operator=(const Ctest1& other) {
     X("operator=");
     std::cout << " Assigning from " << other.serial << "\n";
   }
#undef X
};

Ctest1 Function(Ctest1* cPtr){
   return *cPtr;    
}

int main()
{
   Ctest1* cPtr;

   cPtr=new Ctest1();

   for(int i=1;i<10;i++)
      *cPtr = Function(cPtr);

   delete cPtr;

   return 0;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-05T20:52:38.720

得到（最终）你最初想要问的问题，简短的回答是它很少是一个问题。该标准包含一个条款，该条款明确规定编译器不必在返回值上实际使用复制构造函数，即使复制构造函数有副作用，所以差异是外部可见的。

根据您是返回变量还是仅返回值，这称为命名返回值优化 (NRVO) 或仅返回值优化 (RVO)。大多数合理的现代编译器都实现了两者（有些，例如 g++ 甚至在您关闭优化时也会这样做）。

为了避免复制返回值，编译器所做的是将复制的地址作为隐藏参数传递给函数。然后函数在那个地方构造它的返回值，所以在函数返回之后，这个值已经在那里，没有被复制。

这很常见，而且效果很好，以至于 Dave Abrahams（当时是 C++ 标准委员会成员）在几年前写[了一篇文章](https://web.archive.org/web/20100216020244/http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)，表明使用现代编译器，人们避免额外复制的尝试通常实际上产生的代码比你编写的要慢只需编写简单明了的代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-05T20:39:28.597

正如 Rob 所说，您还没有创建 C++ 使用的所有三个构造函数/赋值运算符。他提到的三法则的意思是，如果你声明一个析构函数、复制构造函数或赋值运算符 ( `operator=()`)，你需要使用所有这三个。

如果您不创建这些函数，那么编译器将为您创建它们自己的版本。但是，编译器复制构造函数和赋值运算符只对原始对象中的元素进行浅拷贝。这意味着作为返回值创建的复制对象，然后复制到对象中，`main()`具有指向与您创建的第一个对象相同地址的指针。因此，当原始对象被销毁为复制对象腾出空间时，堆上的 classSpace 数组被释放，导致复制对象的指针失效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T20:51:19.090

如果您想查看何时创建对象的副本，只需执行以下操作：

```
struct Foo {
    Foo() { std::cout << "default ctor\n"; }
    Foo(Foo const &) { std::cout << "copy ctor\n"; }
    Foo(Foo &&) { std::cout << "move ctor\n"; }
    Foo &operator=(Foo const &) { std::cout << "copy assign\n"; return *this; }
    Foo &operator=(Foo &&) { std::cout << "move assign\n"; return *this; }
    ~Foo() { std::cout << "dtor\n"; }
};

Foo Function(Foo* f){
   return *f;    
}

int main(int argc,const char *argv[])
{
   Foo* f=new Foo;

   for(int i=1;i<10;i++)
      *f = Function(f);

   delete f;
} 
```

# hadoop - Hadoop Hbase 工作流程

> ID：10035515
> 
> 赞同：2
> 
> 时间：2012-04-05T20:27:24.990
> 
> 标签：hadoop, hbase

我对 hadoop 还比较陌生，我通过做一些示例练习来了解它，但我对它在实践中的使用方式有疑问。许多应用程序似乎都面向批处理（例如日志文件数据），但我不确定 hbase 如何适合这里？

将日志文件数据存储在hbase中然后处理并输出为其他存储格式是否很常见？将原始日志文件传递到 hadoop 然后将输出存储在 hbase 中是否更常见？我想我在这里真正的问题通常是 hbase 用作 hadoop 的输入或输出，或两者兼而有之？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T20:48:16.510

HBase 适用于您需要随机、低延迟访问数据的任何地方，而 Hadoop 生态系统的其余大部分都是面向批处理的，正如您所提到的。

使用您的日志解析示例，您可以通过 MapReduce 处理存储在 HDFS 中的日志文件，但是接下来呢？大概您想查看一段时间内的流量模式（分钟、小时、天等）。如果将结果以时间戳作为行键存储在 HBase 中，那么您可以有效地查询特定日期范围（例如，“显示上周的所有数据。”）HBase 将比经典更快地返回MapReduce，因为它不需要扫描上个月、去年等的所有数据，而 MapReduce 则需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T17:32:05.010

Flume 是很多人连接他们的日志文件以在数据生成时对其进行实时处理的方式。您可以从每个日志文件创建一个源并同步到您的 HBase 实例

还要看看 OpenTSDB，因为他们有一个非常好的系统，可以在 HBase 之上存储集群指标。您也许可以重用他们的一些基础设施来进行日志分析。

# mysql - 如何访问/查询mysql中的数据库分区？

> ID：10035516
> 
> 赞同：3
> 
> 时间：2012-04-05T20:27:25.290
> 
> 标签：mysql, database, database-partitioning

当一个数据库表在mysql中已经分区后，各个分区是如何访问/查询的？

*编辑*

回应@Crack 的评论。

因此，当表中存在分区时，我仍然会使用普通查询。在查询的数据库端，“修剪”从何而来？`Where`那么它是应用于每个查询的复杂存储子句吗？如果不单独访问分区，为什么要命名分区？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T21:22:13.373

好的，让我们一次一个地处理这个部分。

> 因此，当表中存在分区时，我仍然会使用普通查询。

是的。分区对您来说是透明的，它旨在通过划分物理来优化（如果使用得当）查询性能。将数据和索引存储到单独的“箱”中。

> 在查询的数据库端，“修剪”从何而来？那么，它是一个非常复杂的存储 Where 子句，然后应用于每个查询吗？

是和不是。根据分区模式，MySQL 将您的数据放入不相交的“箱”中。稍后它会读取`WHERE`查询的子句并知道必须检查哪些分区才能回答它。MySQL 文档在文档中有一些很好的示例：[Partition Pruning](http://dev.mysql.com/doc/refman/5.5/en/partitioning-pruning.html)。

它允许您将每个分区存储在不同的物理存储设备上，并且 MySQL 可以并行运行一些操作或根本不扫描某些分区（参见上面链接中的示例）。

> 如果不单独访问分区，为什么要命名分区？

它们是单独访问的，但您无需做出此决定 - 优化器会这样做。分区名称使您更容易管理它们。您可以在文档中找到可能的操作（[分区管理](http://dev.mysql.com/doc/refman/5.5/en/partitioning-management.html)）。

从 MySQL 5.6.2 开始，您可以从单个分区中选择数据，请参阅[分区选择](http://dev.mysql.com/doc/refman/5.6/en/partitioning-selection.html)。只是一个建议 - 如果您不需要，请不要使用此语法，因为使用它会使您的查询绑定到数据的存储结构（并且不要在生产中使用不稳定的 MySQL 版本；）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T10:45:03.597

数据的修剪主要在插入数据时发挥作用。

例如，假设我已经通过散列对表进行了分区`id`- 一个整数列，我的散列函数只是检查整数是否为奇数/偶数。因此，MySQL 将有效地创建两个箱 -`odd bin`和`even bin`.

当我 insert`id = 1`时，MySQL 应用哈希函数。既然结果是`odd`，数据就放在了`odd bin`。当我插入`id = 2`时，数据会转到`even bin`.

查询不涉及任何修剪，只是一些智能逻辑。MySQL 从对该表触发的查询中知道，如果它只能查看一个分区（在我们的例子中是一半的数据），它可能会提高性能。因此，它会尝试识别分区。

当现在触发涉及 a 中的`id`列的查询时`where`，MySQL 将再次将散列函数应用于传递的值。假设我说`WHERE id = 2 AND <some other condition>`，哈希返回`even`。所以，现在 MySQL 只查看`even bin`.

在这个简单的例子中，你可以看到在查询/插入数据时，只需要扫描/更新整个数据集的一半，有效地提高了我的性能大约。2 次（让我们暂时忽略散列开销）。

# algorithm - 无监督分类——获得特征向量

> ID：10035517
> 
> 赞同：2
> 
> 时间：2012-04-05T20:27:32.283
> 
> 标签：algorithm, text, cluster-analysis, classification, unsupervised-learning

我需要对商业产品进行分类。您知道价格比较引擎的作用。

我们已经获得了特征向量。它们不是最好的，但还不错。我的最后一步是在不知道有多少簇的情况下对它们进行分类。因此，像 k-means 这样的算法将不起作用，因为它们需要有多少类。

所以这里是一组特征向量的例子。它们在这里是有序的（例如），但我需要一个不依赖于任何顺序的算法。

```
#################################################
47 - ddr2;asus;1066;g41;am;p5qpl;775;
48 - g41;p5qpl;asus;am;ddr2;vga;anakart;
49 - intel;anakart;ddr2;1066;p5qpl;asus;am;
50 - p5qpl;ddr2;asus;am;g41;vga;anakart;
51 - ddr2;asus;1066;g41;am;p5qpl;775;
52 - g41;p5qpl;1066;am;ddr2;asus;anakart;
53 - p5qpl;ddr2;1066;am;g41;asus;sata;
54 - g41;p5qpl;1066;am;asus;ddr2;sata;
###################################################
55 - engtx480;asus;384bit;2di;gddr5;vga;16x;
56 - 2di;karti;384bit;asus;engtx480;ekran;pci;
57 - asus;engtx480;2di;vga;gddr5;384bit;16x;
58 - 2di;karti;engtx480;384bit;asus;gddr5;1536mb;
59 - engtx480;asus;384bit;2di;gddr5;vga;16x;
60 - engtx480;asus;384bit;2di;gddr5;vga;16x;
####################################################
61 - ray;blu;ihbs112;siyah;bulk;dvd;sata;
62 - ihbs112;ray;blu;on;lite;yazici;kutusuz;
63 - ihbs112;blu;ray;lite;on;siyah;bulk;
64 - blu;ihbs112;ray;lite;on;siyah;yazici;
65 - liteon;ihbs112;bd;yazma;hizi;12x;max;
66 - ihbs112;ray;blu;on;lite;bulk;dvd;
67 - etau108;dvd;siyah;lite;on;rw;ihbs112;
68 - ihbs112;liteon;bd;yazma;hizi;12x;max;
69 - ihbs112;ray;blu;lite;on;siyah;bulk;
##################################################### 
```

当人类看起来时，只需使用这些特征向量就可以很容易地对产品进行分类。但我需要通过算法来实现它。而且我还需要使用不需要任何先验信息的算法来实现它，只需使用特征向量即可。

从上述特征向量集中，47-54 是一个簇，55-60 是另一个簇，61-69 是另一个簇（每个簇表示现实生活中的商业产品）。因此，算法需要仅使用这些特征向量对它们进行正确分类。

该算法不能依赖于特征向量的线序或有多少类。我们什么都不知道，我们只有特征向量。

等待您对此分类问题的建议。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:48:32.523

[自适应共振理论](http://en.wikipedia.org/wiki/Adaptive_resonance_theory)是您问题的简短答案。与 KMeans 不同，您不需要预先设置集群的数量。输入是一组二进制（ART 1 算法）或连续（ART -2A、ARTMAP 等）的特征向量，输出是集群中文档的分类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T13:08:20.840

我可以确定需要解决的 3 个主要问题。

1）从您提供的示例中，您的所有向量的维度似乎都是 7。如果不是这种情况，您可以使用[PCA](http://en.wikipedia.org/wiki/Principal_component_analysis)将（未知但有界的）维度数量减少到固定大小。这可确保您无需大量修改即可使用聚类算法。

2）为了克服您不知道集群大小的事实，您可以使用[DBSCAN](http://en.wikipedia.org/wiki/DBSCAN)。它需要两个参数：最小集群大小和邻域大小。

3）您需要一个具有步骤 1）维度的表示空间，聚类算法可以在该空间上运行。为此，您必须想办法从这些样本中构造特征向量。从您展示的示例中，似乎训练向量在符号方面**并不是**任意填充的。在我看来，尽管你在说什么，你也许可以使用启发式方法。但是，如果这不可能，只需选择数字表示作为特征值。

# javascript - javascript将数据发布到新窗口

> ID：10035520
> 
> 赞同：0
> 
> 时间：2012-04-05T20:27:46.383
> 
> 标签：javascript, http-post

我想将两个字符串发布到一个新的 php 网页（它将作为一个新窗口打开），然后我可以使用它进行提取`$_POST`。

谁能指出我可以打开新窗口并发布数据的Javascript代码的方向？

（我想使用 JS 来创建帖子，因为字符串会很复杂，并且会在运行时根据我已经拥有的数组生成）。

就像一个简单的例子，谁能告诉我如何通过 JS 函数发布两个字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:33:04.667

首先，在父页面中，确保您拥有表单。然后使用 JavaScript，打开一个新窗口并确保您有一个句柄然后让相同的 JavaScript 将父页面上的表单发布到您打开的新窗口最后您将可以通过 $_POST 访问您的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:52:48.370

Window.open 返回对新窗口的引用。这样您就可以访问新窗口的全局命名空间。

[https://developer.mozilla.org/en/DOM/window.open](https://developer.mozilla.org/en/DOM/window.open)

# jquery - 无法使用数据表日期排序器 jquery 插件

> ID：10035525
> 
> 赞同：1
> 
> 时间：2012-04-05T20:27:55.950
> 
> 标签：jquery, datatables

下面的代码取自：[http ://datatables.net/forums/discussion/2467/need-help-for-sorting-date-with-ddmmyyyy-format/p1](http://datatables.net/forums/discussion/2467/need-help-for-sorting-date-with-ddmmyyyy-format/p1)

这是我调用功能的方式：

```
$('#tab').dataTable({
      'aoColumns': [null, null, null, null, { "sType": "date-euro" }] 
```

});

我已将以下代码添加到单独的 .js 文件中。如何调用排序功能？

```
function trim(str) {
    str = str.replace(/^\s+/, '');
    for (var i = str.length - 1; i >= 0; i--) {
        if (/\S/.test(str.charAt(i))) {
            str = str.substring(0, i + 1);
            break;
        }
    }
    return str;
}

(function( $ ) {
      $.fn.dataTableExt.oSort['date-euro-asc'] = function(a, b) {
    if (trim(a) != '') {
        var frDatea = trim(a).split(' ');
        var frTimea = frDatea[1].split(':');
        var frDatea2 = frDatea[0].split('/');
        var x = (frDatea2[2] + frDatea2[1] + frDatea2[0] + frTimea[0] + frTimea[1] + frTimea[2]) * 1;
    } else {
        var x = 10000000000000; // = l'an 1000 ...
    }

    if (trim(b) != '') {
        var frDateb = trim(b).split(' ');
        var frTimeb = frDateb[1].split(':');
        frDateb = frDateb[0].split('/');
        var y = (frDateb[2] + frDateb[1] + frDateb[0] + frTimeb[0] + frTimeb[1] + frTimeb[2]) * 1;                      
    } else {
        var y = 10000000000000;                     
    }
    var z = ((x < y) ? -1 : ((x > y) ? 1 : 0));
    return z;
};
})( jQuery );

(function( $ ) {
      $.fn.dataTableExt.oSort['date-euro-desc'] = function(a, b) {
    if (trim(a) != '') {
        var frDatea = trim(a).split(' ');
        var frTimea = frDatea[1].split(':');
        var frDatea2 = frDatea[0].split('/');
        var x = (frDatea2[2] + frDatea2[1] + frDatea2[0] + frTimea[0] + frTimea[1] + frTimea[2]) * 1;                       
    } else {
        var x = 10000000000000;                     
    }

    if (trim(b) != '') {
        var frDateb = trim(b).split(' ');
        var frTimeb = frDateb[1].split(':');
        frDateb = frDateb[0].split('/');
        var y = (frDateb[2] + frDateb[1] + frDateb[0] + frTimeb[0] + frTimeb[1] + frTimeb[2]) * 1;                      
    } else {
        var y = 10000000000000;                     
    }                   
    var z = ((x < y) ? 1 : ((x > y) ? -1 : 0));                 
    return z;
}; 
})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:48:31.500

如果你有一个有四列的表，你应该使用

```
$('#tab').dataTable({
      'aoColumns': [null, null, null, { "sType": "date-euro" }]
}); 
```

# jquery - ASP.net 用户控件中的 JQuery 对象预期错误

> ID：10035527
> 
> 赞同：0
> 
> 时间：2012-04-05T20:27:59.147
> 
> 标签：jquery, asp.net, user-controls

我有 2 个页面，每个页面都有一个巨大的动态生成表。这些表几乎相同，因此我没有将代码放在两个位置，而是将表作为用户控件，可以添加到每个页面。

有一些客户端脚本可以根据单选按钮的点击更改行颜色或隐藏和显示文本。该代码在原始 aspx 页面中完美运行，但在包含用户控件的新页面中，我在 if 行的此代码中得到 Object Expected。

```
var controlName = "AdditionalQuestionTable" + QuestionNumber + "_Yes";
if ($('#' + controlName).get(0) != null)
    {
        $('#' + controlName).get(0).className = 'visible';
    } 
```

我在两个页面上都将 ClientIDMode 设置为静态，我可以看到两个页面上的 id 相同。我难住了。当我查看源代码并查看每个呈现的代码时，它们是相同的，如下所示。

```
<table id="AdditionalQuestionTable3_Yes" class="hidden" style="width:100%;">

<table id="AdditionalQuestionTable3_Yes" class="hidden" style="width:100%;"> 
```

任何帮助将不胜感激。谢谢。

朗达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T20:31:54.267

预期对象是由于缺少 jquery 脚本文件引起的。

# ruby-on-rails-3 - Rails 3：使用重嵌套路由

> ID：10035532
> 
> 赞同：0
> 
> 时间：2012-04-05T20:28:32.727
> 
> 标签：ruby-on-rails-3, rails-routing, nested-resources

我正在寻找比我目前的路线更好的解决方案。它们嵌套得很深，对于我所做的事情（到目前为止）必须有更好的解决方案。

这是我到目前为止所拥有的：

```
 namespace "api" do
    namespace "v1" do
      resources :countries do
        resources :states do 
          resources :counties do
            resource :districts do
              resource :schools
            end
          end
        end
      end
    end
  end 
```

我很快遇到了直接进入一个地区（例如）意味着我需要在已经存在的嵌套资源之外创建一个单独的地区资源的问题。显然我做错了（只是感觉不对）......有人知道我可以做些什么来改善我的路由体验吗？

**重构代码：**

```
 namespace "api" do
    namespace "v1" do

      resources :countries do
        resources :states
      end

      resources :states do
        resources :counties
      end

      resources :counties do
        resources :districts
      end

      resources :districts do
        resources :schools
      end

    end # end v1 Namespace
  end # end api Namespace 
```

# ruby-on-rails - Mongoid +黄瓜

> ID：10035536
> 
> 赞同：1
> 
> 时间：2012-04-05T20:28:40.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, cucumber, mongoid

我尝试通过 Capybara 在 Mongoid 支持的 Rails 3.2.3 应用程序中使用 Cucumber 运行场景。目的是让当前用户将一本书添加到他的收藏中。

一切正常，但最后一步定义，我检查书籍的数量现在是一，失败了。

但如果我检查应用控制器，大小实际上增加了。实际上，当我`reload`在步骤定义中发送给用户时，它通过了：

```
user.reload.books(true).size.should == 1 
```

我担心这种行为一旦投入生产可能会损害我的应用程序。关于如何确保所有测试和应用程序行为一致的任何建议？

**更新**

我检查了 test.log 以了解发生了什么。调用`reload`我得到这个查询到 MongoDB：

```
find({"count"=>"books",
"query"=>{:_id=>{"$in"=>[BSON::ObjectId('4f889b473dffd63235000004')]}},
"fields"=>nil}).limit(-1) 
```

虽然没有重新加载，但我得到了这个：

```
find({"count"=>"books", "query"=>{:_id=>{"$in"=>[]}}, "fields"=>nil}).limit(-1) 
```

`user`如果我不重新加载模型，它实际上不会查询，这对我来说没有多大意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:54:20.927

## 以下对我有用（用实际的 Cucumber 示例更新）

我建立了一个 Rails 项目来测试你的问题，rails 3.2.3，mongoid 2.4.8，mongo 1.6.2，mongodb 2.0.4，cucumber 1.1.9。

以下（关联生成方法）按预期工作，无需刷新：

```
user.books << book
book.users << user 
```

然后我试图绕过关联，这就是我认为你正在做的事情。

```
user.push(:book_ids, book.id)
book.push(:user_ids, user.id) 
```

这些 DO 绕过关联，导致不完整（单向而不是双向）引用，但内存和数据库状态是一致的。因此，我在之前的回答中对您遇到的问题的猜测是错误的，不需要刷新，您可能正在做其他事情。请注意，您/我们不想要不完整的引用，请不要直接推送到 Mongoid 引用关系的内部。

您是否使用关联附加“<<”来添加用户或书籍？我目前的结论是，Mongoid 引用的关系作为我测试您的问题的广告而起作用。无需刷新。

这是模型：

```
class User
  include Mongoid::Document
  field :first_name, type: String
  field :last_name, type: String
  has_and_belongs_to_many :books
end

class Book
  include Mongoid::Document
  field :title, type: String
  field :author, type: String
  has_and_belongs_to_many :users
end 
```

黄瓜功能

```
Feature: UserAndBook
  Test adding a book to a user_s books

  Scenario: add_book_to_user
    Given starting with no users and no books
    And a new user
    And that the new user has no books
    And a new book
    And add book to user
    Then I can check that the user has a book 
```

黄瓜步骤

```
require 'test/unit/assertions'
require File.expand_path('../../../test/test_helper', __FILE__)
World(Test::Unit::Assertions)

Given 'starting with no users and no books' do
  User.delete_all
  Book.delete_all
  assert_equal(0, User.count)
  assert_equal(0, Book.count)
end

Given 'a new user' do
  @user = User.create(first_name: 'Gary', last_name: 'Murakami')
end

Given 'that the new user has no books' do
  assert_equal(0, @user.books.count)
end

Given 'a new book' do
  @book = Book.create(title: 'A Tale of Two Cities', author: 'Charles Dickens')
end

Given 'add book to user' do
  @user.books << @book
end

Then 'I can check that the user has a book' do
  assert_equal(1, @user.books.count)
end 
```

我愿意进一步交换信息以帮助解决您的问题。

祝福，

-加里

PS 查看日志，有趣的是 user.books.length 执行的是实际的 db“find count $in”查询，而不是本地数组长度。

## 上一个答案

你几乎已经回答了你自己的问题。在 Rails 中，每当模型的数据在数据库中发生更改时，您都需要使用 reload 方法，否则您将只查看模型先前加载/实例化/缓存的状态。仅更新一个属性，事情看起来很一致，但关联更加复杂，不一致变得更加明显。

# javascript - 将包含内容和元数据的文件上传到 Google Docs 会返回 400 Invalid/Bad Request

> ID：10035540
> 
> 赞同：1
> 
> 时间：2012-04-05T20:28:51.887
> 
> 标签：javascript, google-docs-api

我正在尝试将 HTML5 文件对话框中的文件上传到我的 Google 文档帐户。

我为此请求使用 Google Documents List API 3.0 版，以及[此](https://developers.google.com/google-apps/documents-list/#uploading_a_new_document_or_file_with_both_metadata_and_content)链接上的说明。

查询后，我从文档列表 JSON 中收集正确的**可恢复创建链接**URL，并将 XML 实体发布到该链接以获取**位置**URL。我得到 200 OK 响应和位置 URL。

设置标题后，我向位置 URL 发出 PUT 请求以上传文件。对于这个问题，文件小于 512kb，不需要分块。

提交此 PUT 请求后，我收到 400 Bad Request（有时是 400 Invalid Request）响应，并且文件未上传。

有趣的是，如果我省略**Content-Range**标头，我可以上传一个小文件，但文本文件以外的文件已损坏。

我已经对内存中加载的文件和本地文件进行了二进制比较。看起来他们匹配。

要访问 API，我在带有[http://www.google.com/jsapi](http://www.google.com/jsapi)的 Google 小工具中使用 Javascript 。

我使用 gadgets.io.makeRequest GET、POST 和 PUT 数据。鉴于我能够毫无问题地查询文档列表，因此我的授权标头和令牌似乎是正确的。

我应该采取什么步骤来解决这个问题？

**样本输出**

```
PUT /feeds/upload/create-session/default/private/full?v=3.0&convert=false&upload_id=[id]

Host: docs.google.com
X-Shindig-AuthType: oauth
Authorization: OAuth oauth_body_hash="x", opensocial_owner_id="x", opensocial_viewer_id="x", opensocial_app_id="x", opensocial_app_url="x", xoauth_signature_publickey="x", xoauth_public_key="x", oauth_version="1.0", oauth_timestamp="x", oauth_nonce="x", opensocial_container="x", oauth_token="x", oauth_consumer_key="x", oauth_signature_method="RSA-SHA1", oauth_signature="x"
Content-Length: 433
Content-Range: bytes 0-433/433
Content-Type: application/x-javascript
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.79 Safari/535.11,gzip(gfe)
X-Forwarded-For: 74.203.139.139
X-shindig-dos: on
X-Upload-Content-Length: 433
X-Upload-Content-Type: application/x-javascript

[bytes 0-433]

==== Received response 1:
HTTP/1.1 400

Cache-Control: no-cache, no-store, must-revalidate

Content-Length: 15

Content-Type: text/html; charset=UTF-8

Date: Thu, 05 Apr 2012 19:49:48 GMT

Expires: Fri, 01 Jan 1990 00:00:00 GMT

Pragma: no-cache

Server: HTTP Upload Server Built on Apr 2 2012 11:47:06 (1333392426)

Via: HTTP/1.1 GWA

X-Google-Cache-Control: remote-fetch

Invalid Request

====
  errors: 400 Error 
```

**编辑**

二进制代码处理数据：

```
 // -- File Upload functions -- 
    function constructContent(docTitle) {
        var atom = ['<?xml version=\"1.0\" encoding=\"UTF-8"?>',
                    '<entry xmlns=\"http://www.w3.org/2005/Atom\" xmlns:docs=\"http://schemas.google.com/docs/2007\">',
                    '<title>' + docTitle + '</title>',
                    '</entry>'].join(''); 

        return atom;    
    }

    function writeFile(file, under512) {
        var body = constructContent(file.name.toString()); 
        var params = {};

        console.log(body);

        params[gadgets.io.RequestParameters.AUTHORIZATION] = gadgets.io.AuthorizationType.OAUTH;
        params[gadgets.io.RequestParameters.OAUTH_SERVICE_NAME] = "google";
        params[gadgets.io.RequestParameters.OAUTH_USE_TOKEN] = "always";
        params[gadgets.io.RequestParameters.METHOD] = gadgets.io.MethodType.POST;
        params[gadgets.io.RequestParameters.POST_DATA] = body; 
        params[gadgets.io.RequestParameters.HEADERS] = { 
            "Content-Type" : "application/atom+xml", 
            "Content-Length" : "359",
            "X-Upload-Content-Type" : file.type.toString(),
            "X-Upload-Content-Length" : file.size.toString()
        };

        var data; 
        submitRequest(resumableLink + '&convert=false', params, function(requestSuceeded, data) { 
            if ( data.rc == 200 ) {
                console.log(data);
                console.log(data.headers.location[0].toString());

                if ( under512 == true ) { 
                    continueFile(data.headers.location[0].toString(), file, ('0-' + file.size + '/' + file.size).toString(), under512, params);
                }

                else {
                    continueFile(data.headers.location[0].toString(), file, ('0-524287/' + file.size).toString(), under512, params);
                }
            }
        }); 
    }

    // recursive
    function continueFile(location, file, contentRange, under512) { 
        console.log('location: ' + location);

        var contentLength = "0"; 
        var reader = new FileReader(); 
        var blob; 

        var start = contentRange.split('-')[0].toString();
        var stop = contentRange.split('-')[1].split('/')[0].toString(); 

        console.log(file.size);
        console.log(file.type);

        console.log('start: ' + start);
        console.log('stop: ' + stop);

        console.log(("bytes " + contentRange).toString());

        console.log(contentRange);

        ( under512 == true ) ? contentLength = contentRange.split('/')[1].toString() : contentLength = "524288"; 
        if ( file.webkitSlice ) {
            blob = file.webkitSlice(start, stop+1);
        }

        else {
            blob = file.mozSlice(start, stop+1); 
        }

        reader.readAsBinaryString(blob); 

        reader.onloadend = function(evt) {
            if ( evt.target.readyState == FileReader.DONE ) { 
                console.log(evt.target.result);

                var b = showResult(reader);
                // console.log('binary: ' + b); 

                var params = {}; 

                params[gadgets.io.RequestParameters.AUTHORIZATION] = gadgets.io.AuthorizationType.OAUTH;
                params[gadgets.io.RequestParameters.OAUTH_SERVICE_NAME] = "google";
                params[gadgets.io.RequestParameters.OAUTH_USE_TOKEN] = "always";
                params[gadgets.io.RequestParameters.METHOD] = gadgets.io.MethodType.PUT; 
                params[gadgets.io.RequestParameters.POST_DATA] = evt.target.result; 
                params[gadgets.io.RequestParameters.HEADERS] = {
                    "Content-Length" : (contentLength).toString(),
                    "Content-Type" : file.type.toString(),
                    "Content-Range" : ("bytes " + contentRange).toString().trim()
                    // "GData-Version" : "3.0"
                }; 

                submitRequest(location.toString().trim(), params, function(requestSucceeded, data) { 
                    if ( data.rc == 308 ) { 
                        var newStart = start + 524288;  
                        var newEnd; 
                        ( end + 524288 > file.size ) ? newEnd = file.size : newEnd = end + 524288; 
                        var range = (newStart + '-' + newEnd + '/' + file.size).toString().trim(); 
                        continueFile(data.headers.location.toString().trim(), file, range, under512); 
                    }

                    else if ( data.rc == 201 ) { 
                        console.log('done!'); 
                    }

                    else {
                        console.log('terrible error.');
                        console.log(data); 
                        writeObj(data);
                    }
                });
            }
        }; 

    }

    function uploadFile() {
        var file = document.getElementById('uploads').files[0];
        var under512 = false; 
        ( file.size < 524287 ) ? under512 = true : under512 = false; 
        writeFile(file, under512); 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:57:46.990

如[文档](https://developers.google.com/google-apps/documents-list/#uploading_a_new_document_or_file_with_both_metadata_and_content)中所述，继续请求没有 X-Upload-Content-* 标头，应该看起来更像：

```
PUT [next location]
Content-Length: 524288
Content-Type: application/pdf
Content-Range: bytes 0-524287/1073741824 
```

此外，在您的日志中，0-433 是 434 字节，而不是 433。

# python - 是什么导致 Python 分段错误？

> ID：10035541
> 
> 赞同：106
> 
> 时间：2012-04-05T20:28:56.347
> 
> 标签：python, segmentation-fault, large-data

我正在 Python 中实现 Kosaraju 的强连通分量 (SCC) 图搜索算法。

该程序在小型数据集上运行良好，但是当我在超大图（超过 800,000 个节点）上运行它时，它显示“分段错误”。

可能是什么原因造成的？谢谢！

* * *

附加信息：首先我在超大数据集上运行时遇到此错误：

```
"RuntimeError: maximum recursion depth exceeded in cmp" 
```

然后我使用重置递归限制

```
sys.setrecursionlimit(50000) 
```

但出现“分段错误”

相信我，这不是一个无限循环，它在相对较小的数据上运行正确。程序有可能耗尽资源吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-04-05T20:32:53.470

当 Python*扩展*（用 C 编写）尝试访问无法访问的内存时，就会发生这种情况。

您可以通过以下方式对其进行跟踪。

*   [`sys.settrace`](http://docs.python.org/py3k/library/sys.html#sys.settrace)在代码的第一行添加。
*   *按照Mark*在[此答案](https://stackoverflow.com/a/2664232/376535)`gdb`中的描述使用.. 在命令提示符下

     *```
    gdb python
    (gdb) run /path/to/script.py
    ## wait for segfault ##
    (gdb) backtrace
    ## stack trace of the c code 
    ```* 

 ** * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-07-06T19:19:45.147

我知道您已经解决了您的问题，但是对于阅读此线程的其他人，答案是：您必须增加操作系统为 python 进程分配的堆栈。

这样做的方法取决于操作系统。在linux中，您可以使用命令检查`ulimit -s`您的当前值，您可以使用`ulimit -s <new_value>`

尝试将先前的值加倍，如果它不起作用，则继续加倍，直到找到一个值或内存不足。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-11-04T21:04:58.330

分段错误是一种通用错误，可能的原因有很多：

*   记忆不足
*   内存故障
*   使用查询从数据库中获取大量数据集（如果获取的数据大小超过交换内存）
*   错误的查询/错误代码
*   有长循环（多次递归）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-18T04:08:19.690

通过修复 Python（Python segfault.. 谁知道！）和 C++ 实现上的段错误，更新 ulimit 对我的 Kosaraju 的 SCC 实现有效。

对于我的 MAC，我通过以下方式找到了可能的最大值：

```
$ ulimit -s -H
65532 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-02-10T18:19:20.683

谷歌搜索找到了我这篇文章，并没有看到下面讨论的“个人解决方案”。

* * *

我最近对适用于 Linux 的 Windows 子系统上的 Python 3.7 的烦恼是：在两台具有相同 Pandas 库的机器上，一台给我`segmentation fault`，另一台报告警告。目前尚不清楚哪个更新，但“重新安装”`pandas`解决了问题。

我在有问题的机器上运行的命令。

```
conda install pandas 
```

更多细节：我正在运行相同的脚本（通过 Git 同步），两者都是带有 WSL + Anaconda 的 Windows 10 机器。这里是截图来说明情况。此外，在命令行`python`会抱怨的机器上`Segmentation fault (core dumped)`，Jupyter 实验室每次都会简单地重新启动内核。更糟糕的是，根本没有发出警告。

[![在此处输入图像描述](../Images/37de1da21f583b332b52903e4c5c615f.png)](https://i.stack.imgur.com/1XcKW.png)

* * *

几个月后更新：我不再在 Windows 机器上托管 Jupyter 服务器。我现在在 Windows 上使用 WSL 来获取在 Linux 服务器上打开的远程端口，并在远程 Linux 机器上运行我的所有作业。我已经好几个月没有遇到任何执行错误了:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-22T12:42:55.067

在 RPI 上升级 dlib 后，我遇到了这个分段错误。我按照上面 Shiplu Mokaddim 的建议追溯了堆栈，并确定了一个 OpenBLAS 库。

由于 OpenBLAS 也是多线程的，因此在多线程应用程序中使用它会成倍增加线程，直到出现分段错误。对于多线程应用程序，将 OpenBlas 设置为单线程模式。

在 python 虚拟环境中，通过编辑告诉 OpenBLAS 只使用一个线程：

```
 $ workon <myenv>
    $ nano .virtualenv/<myenv>/bin/postactivate 
```

并添加：

```
 export OPENBLAS_NUM_THREADS=1 
    export OPENBLAS_MAIN_FREE=1 
```

重新启动后，我能够在 rpi3b 上运行我之前崩溃的所有图像识别应用程序。

参考： [https ://github.com/ageitgey/face_recognition/issues/294](https://github.com/ageitgey/face_recognition/issues/294)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-12T21:02:29.803

看起来你的堆栈内存不足。正如戴维德所说，您可能希望增加它。要在 python 代码中执行此操作，您需要使用线程运行“main()”：

```
def main():
    pass # write your code here

sys.setrecursionlimit(2097152)    # adjust numbers
threading.stack_size(134217728)   # for your needs

main_thread = threading.Thread(target=main)
main_thread.start()
main_thread.join() 
```

资料来源：[c1729 在 codeforces 上的帖子](https://codeforces.com/blog/entry/63102)。用 PyPy 运行它有点[棘手](https://pypy.readthedocs.io/en/latest/stackless.html#recursion-depth-limit)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-12T02:30:15.073

我会遇到同样的错误。我从[另一个 SO 答案](https://stackoverflow.com/a/16248113/3668669)中了解到，您需要通过`sys`和`resource`模块设置递归限制。*

# c# - 更改网格坐标系

> ID：10035546
> 
> 赞同：6
> 
> 时间：2012-04-05T20:29:32.017
> 
> 标签：c#, wpf

WPF 中的网格目前有一个这样的网格系统：

```
 Cols
   +   +   +   +   +
   | 0 | 1 | 2 | 3 | 
+--+---|---|---|---|---
 0 |   |   |   |   |
+--+---|---|---|---|---  Rows
 1 |   |   |   |   |   
+--+---|---|---|---|---
 2 |   |   |   |   | 
+--+---|---|---|---|--- 
```

有没有办法让它表现得像这样：

```
 Cols
   +   +   +   +   +
   | 0 | 1 | 2 | 3 | 
+--+---|---|---|---|---
 2 |   |   |   |   |
+--+---|---|---|---|---  Rows
 1 |   |   |   |   |   
+--+---|---|---|---|---
 0 |   |   |   |   | 
+--+---|---|---|---|--- 
```

理想情况下，我希望 RowSpan 向上而不是向下扩展项目。

例子：

我的数据源在地图上将一个立方体存储为 0,0，以便将其显示在左下角。然而，WPF 中的网格会将该立方体放在左上角。另一个问题是数据源给了我一个 2x2 的位置，左下角的“锚点”位置的宽度和高度。宽度和高度绑定到 ColSpan 和 RowSpan。RowSpan 是一个问题，因为它将向下扩展而不是向上扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:01:24.017

您可以通过编写自己的自定义控件来实现这一点。您可以继承自`Grid`，或者使用`UserControl`带有 a 的 a `Grid`。无论哪种方式，您都将提供类似于 a 的附加属性`Grid`，然后您可以根据需要操作这些值，然后将它们传递给底层`Grid`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T23:48:14.993

`Grid`你展示立方体的地方是固定大小的吗？如果是这样，您可以考虑编写一个 ViewModel 来转换/反转模型坐标以便在视图中工作，即立方体将具有该值`(0,0)`，而 ViewModel 将该值公开为`(0,2)`.

只是一个可能比滚动自己的控制更容易的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T03:58:20.910

您应该能够做到这一点，而无需使用附加属性创建自定义或用户控件。

这是一个我认为应该能够做你想做的事的课程。`Grid.Row`不要将and的值绑定`Grid.RowSpan`到您的行和高度，而是绑定`GridEx.RowFromBottom`到`GridEx.RowSpanFromBottom`它们。这些属性的属性更改处理程序将`Grid.Row`根据这些属性的值和网格中的行数计算新值。

一个潜在的问题是，如果您在运行时从网格中添加或减去行，这可能无法正确更新。

```
public static class GridEx
{
    public static readonly DependencyProperty RowFromBottomProperty = DependencyProperty.RegisterAttached("RowFromBottom", typeof(int?), typeof(GridEx), new FrameworkPropertyMetadata(default(int?), FrameworkPropertyMetadataOptions.AffectsMeasure | FrameworkPropertyMetadataOptions.AffectsArrange | FrameworkPropertyMetadataOptions.AffectsParentArrange | FrameworkPropertyMetadataOptions.AffectsParentMeasure, OnRowFromBottomChanged));
    public static readonly DependencyProperty RowSpanFromBottomProperty = DependencyProperty.RegisterAttached("RowSpanFromBottom", typeof(int?), typeof(GridEx), new FrameworkPropertyMetadata(default(int?), FrameworkPropertyMetadataOptions.AffectsMeasure | FrameworkPropertyMetadataOptions.AffectsArrange | FrameworkPropertyMetadataOptions.AffectsParentArrange | FrameworkPropertyMetadataOptions.AffectsParentMeasure, OnRowSpanFromBottomChanged));

    private static void OnRowFromBottomChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var grid = GetContainingGrid(d);
        int? rowFromBottom = (int?) e.NewValue;
        int? rowSpanFromBottom = GetRowSpanFromBottom(d);
        if (rowFromBottom == null || rowSpanFromBottom == null) return;
        int rows = grid.RowDefinitions.Count;
        int row = Math.Max(0, Math.Min(rows, rows - rowFromBottom.Value - rowSpanFromBottom.Value));
        Grid.SetRow((UIElement) d, row);
    }

    private static void OnRowSpanFromBottomChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var grid = GetContainingGrid(d);
        int? rowFromBottom = GetRowFromBottom(d);
        int? rowSpanFromBottom = (int?)e.NewValue;
        if (rowFromBottom == null || rowSpanFromBottom == null) return;
        int rows = grid.RowDefinitions.Count;
        int row = Math.Max(0, Math.Min(rows, rows - rowFromBottom.Value - rowSpanFromBottom.Value));
        Grid.SetRow((UIElement)d, row);
        Grid.SetRowSpan((UIElement)d, rowSpanFromBottom.Value);
    }

    public static int? GetRowFromBottom(DependencyObject obj)
    {
        return (int?) obj.GetValue(RowFromBottomProperty);
    }

    public static void SetRowFromBottom(DependencyObject obj, int? value)
    {
        obj.SetValue(RowFromBottomProperty, value);
    }

    public static int? GetRowSpanFromBottom(DependencyObject obj)
    {
        return (int?)obj.GetValue(RowSpanFromBottomProperty);
    }

    public static void SetRowSpanFromBottom(DependencyObject obj, int? value)
    {
        obj.SetValue(RowSpanFromBottomProperty, value);
    }

    private static Grid GetContainingGrid(DependencyObject element)
    {
        Grid grid = null;
        while (grid == null && element != null)
        {
            element = LogicalTreeHelper.GetParent(element);
            grid = element as Grid;
        }
        return grid;
    }
} 
```

如果您对这里发生的事情有任何疑问，请随时提问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T11:13:53.787

试试这个转换器。XAML 看起来有点复杂，但不需要 ViewModel(s) 或 UserControl(s)：

转换器翻转行：

```
public class UpsideDownRowConverter : IMultiValueConverter
{
    public int RowCount
    {
        get;
        set;
    }

    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        if (values.Length == 2 && values[0] is int && values[1] is int)
        {
            var row = (int)values[0];
            var rowSpan = (int)values[1];

            row = this.RowCount - row - rowSpan;

            return row;
        }

        return DependencyProperty.UnsetValue;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

XAML。第一个 Grid 是原始的，第二个是翻转的：

```
<Window.Resources>
    <local:UpsideDownRowConverter x:Key="UpsideDownRowConverter"
                                    RowCount="3"/>
</Window.Resources>
<UniformGrid Rows="2">
    <Grid Name="Original"
            Margin="0,0,0,10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Rectangle Fill="Green"
                    Grid.Column="0"
                    Grid.Row="2"/>
        <Rectangle Fill="Red"
                    Grid.Column="1"
                    Grid.Row="1"/>
        <Rectangle Fill="Blue"
                    Grid.Column="2"
                    Grid.RowSpan="3"/>
        <Rectangle Fill="Yellow"
                    Grid.Column="3"
                    Grid.RowSpan="2"/>
    </Grid>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Rectangle Fill="Green"
                    Grid.Column="0">
            <Grid.Row>
                <MultiBinding Converter="{StaticResource UpsideDownRowConverter}">
                    <Binding Path="Children[0].(Grid.Row)"
                                ElementName="Original"/>
                    <Binding Path="(Grid.RowSpan)"
                                RelativeSource="{RelativeSource Self}"/>
                </MultiBinding>
            </Grid.Row>
        </Rectangle>
        <Rectangle Fill="Red"
                    Grid.Column="1">
            <Grid.Row>
                <MultiBinding Converter="{StaticResource UpsideDownRowConverter}">
                    <Binding Path="Children[1].(Grid.Row)"
                                ElementName="Original"/>
                    <Binding Path="(Grid.RowSpan)"
                                RelativeSource="{RelativeSource Self}"/>
                </MultiBinding>
            </Grid.Row>
        </Rectangle>
        <Rectangle Fill="Blue"
                    Grid.Column="2"
                    Grid.RowSpan="3">
            <Grid.Row>
                <MultiBinding Converter="{StaticResource UpsideDownRowConverter}">
                    <Binding Path="Children[2].(Grid.Row)"
                                ElementName="Original"/>
                    <Binding Path="(Grid.RowSpan)"
                                RelativeSource="{RelativeSource Self}"/>
                </MultiBinding>
            </Grid.Row>
        </Rectangle>
        <Rectangle Fill="Yellow"
                    Grid.Column="3"
                    Grid.RowSpan="2">
            <Grid.Row>
                <MultiBinding Converter="{StaticResource UpsideDownRowConverter}">
                    <Binding Path="Children[3].(Grid.Row)"
                                ElementName="Original"/>
                    <Binding Path="(Grid.RowSpan)"
                                RelativeSource="{RelativeSource Self}"/>
                </MultiBinding>
            </Grid.Row>
        </Rectangle>
    </Grid>
</UniformGrid> 
```

不幸的是，它无法将行数作为第三个值传递，因为 RowDefinitionCollection 不会通知更改。这就是为什么我将 RowCount 添加为转换器的属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T06:05:41.567

您可以将行转换为反向格式，如下所示：

```
 private void ReverseRow(Grid grd)
    {
        int totalRows = grd.RowDefinitions.Count-1;
        foreach (UIElement ctl in grd.Children)
        {
            int currentRowIndex = Grid.GetRow(ctl);
            Grid.SetRow(ctl, totalRows - currentRowIndex);
        }
    } 
```

这将还原该行。

# javascript - 使用 Javascript 导出 CSV 并显示进度条

> ID：10035548
> 
> 赞同：0
> 
> 时间：2012-04-05T20:29:32.497
> 
> 标签：javascript, ajax, csv, progress-bar

有没有办法在通过 ajax 生成和提供 CSV 文件时显示进度条？由于数据库的原因，CSV 文件的生成需要一段时间，并且需要在屏幕上加载并在完成后将其隐藏。如果需要，我希望这是 ajax 或留在同一页面上。现在我正在下面执行此操作，但我无法确定文件何时完成下载以停止进度。

```
var iframe = document.createElement("iframe");
                iframe.src = (value.url);
                iframe.style.display = "none";
                document.body.appendChild(iframe); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:35:17.220

如果我正确理解您的情况，您会在收到请求时在服务器端生成一个文件，将其保存到磁盘，然后从那里提供服务。如果那是您正在做的事情，您有两个选择：

1.  当您开始使用您必须生成的总行数和您当前生成的行数生成文件时，从您的生成代码中更新一些共享状态（memcached、redis、mongodb、sqlite 数据库或文件）。向端点发出额外的 ajax 请求，该端点将为您提供来自该共享状态的当前值。
2.  将生成的 CSV 文件直接流式传输回客户端 - 除非大部分时间都在获取数据，否则这将导致下载对话框的出现速度更快并且速度*明显*加快。

# http - 通过 HTTP 代理缓冲上传

> ID：10035550
> 
> 赞同：1
> 
> 时间：2012-04-05T20:29:43.260
> 
> 标签：http, nginx, proxy, upload, apache-traffic-server

我正在尝试解决上传到我们网络基础设施的问题。

当用户将媒体上传到我们的站点时，它被代理（通过我们的 Web 代理层）到具有有限线程数的 Java 后端。当用户的连接速度较慢或上传量很大时，这会使其中一个 Java 线程长时间打开，从而降低整体容量。

为了缓解这种情况，我想实现一个“上传代理”，它将接受上传的整个 HTTP POST 数据，并且只有当它收到所有数据时，它才会将该 POST 快速代理到 Java 后端，从而推动问题上传线程对 HTTP 代理保持开放。

最初我发现 Apache Traffic Server 有一个“buffer_upload”插件，但它似乎有点前沿，并且不支持 URL 中的正则表达式，尽管它可以解决我的大部分问题。

有谁知道能够执行我建议的代理产品（除了 Apache Traffic Server）？

我看到 Nginx 有相当详细的代理缓冲区设置，但似乎（来自文档/解释）在打开后端连接/线程之前等待整个 POST。我有这个权利吗？

干杯，

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:45:32.120

实际上，nginx*总是*在打开与后端的连接之前缓冲请求。[可以使用proxy_buffering](http://nginx.org/r/proxy_buffering)或为每个响应缓冲控制设置 X-Accel-Buffering 响应标头来关闭响应缓冲。

# r - 多个图例/指南的排序（什么是自动逻辑以及如何更改它？）

> ID：10035551
> 
> 赞同：21
> 
> 时间：2012-04-05T20:29:46.517
> 
> 标签：r, ggplot2

我偶然发现了 ggplot2s 对图例进行排序的这种奇怪行为，只是无法弄清楚自动放置图例背后的逻辑是什么：

我的目标：在具有多个比例的情节中，我想以与自动顺序不同的（主题）顺序排列它们。但是我在 opts() 或 guides() 中找不到命令来为我执行此操作。并且要明确一点：我不想更改图例中的项目，这很好，但是多个完整图例的排列。

所以首先我假设它们是按类型排序的，即比例、颜色等。但事实并非如此，它们的位置发生了变化（见下文）。

**按字母顺序？**不。

```
 library(ggplot2) ## v0.9

    ## Scale_colour on top
    qplot(data = mpg,x = displ, y = cty, size = hwy, colour = class) +
    scale_size(name = "A") + scale_colour_discrete(name = "B")

    ## Reverse names --> scale_colour on bottom
    qplot(data = mpg,x = displ, y = cty, size = hwy, colour = class) +
    scale_size(name = "B") + scale_colour_discrete(name = "A")

    ## Change name B to C -->  scale_colour on bottom
    qplot(data = mpg,x = displ, y = cty, size = hwy, colour = class) +
    scale_size(name = "C") + scale_colour_discrete(name = "A")

    ## Change name B to D -->  scale_colour on top
    qplot(data = mpg,x = displ, y = cty, size = hwy, colour = class) +
    scale_size(name = "D") + scale_colour_discrete(name = "A") 
```

scale_colour 的更多位置（用于交换的 scale_size 名称）

*   “E”：底部
*   “F” - “L”：顶部
*   “M” - “N”：底部

它继续出现在顶部和底部。

**阶乘顺序？**不。

```
 ## From top to bottom: C - B - A
    fname <- factor(c("A","B","C"), levels = c("A","B","C"))
    qplot(data = mpg,x = displ, y = cty, size = hwy, colour = class, alpha = cyl) +
    scale_size(name = fname[1]) + scale_colour_discrete(name = fname[2]) + scale_alpha(name=fname[3])

    ## From top to bottom: B - C - A
    fname <- factor(c("A","B","C"), levels = c("C","B","A"))
    qplot(data = mpg,x = displ, y = cty, size = hwy, colour = class, alpha = cyl) +
    scale_size(name = fname[1]) + scale_colour_discrete(name = fname[2]) + scale_alpha(name=fname[3])

    ## From top to bottom: B - C - A
    fname <- factor(c("A","B","C"), levels = c("B","C","A"))
    qplot(data = mpg,x = displ, y = cty, size = hwy, colour = class, alpha = cyl)+
    scale_size(name = fname[1]) + scale_colour_discrete(name = fname[2]) + scale_alpha(name=fname[3]) 
```

**标题长度？**不，我现在将停止使用示例代码，但该代码也会产生与字符长度无关的波动订单。

有任何想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-06T00:38:37.427

正如我在上面的评论中提到的，没有办法控制和预测图例框的位置。我没有意识到这个问题。感谢您明确这一点。

可能有些人需要控制图例框，这里我快速修复一下：

```
# run this code before calling ggplot2 function
guides_merge <- function(gdefs) {
  gdefs <- lapply(gdefs, function(g) { g$hash <- paste(g$order, g$hash, sep = "z"); g})
  tapply(gdefs, sapply(gdefs, function(g)g$hash), function(gs)Reduce(guide_merge, gs))
}
environment(guides_merge) <- environment(ggplot)
assignInNamespace("guides_merge", guides_merge, pos = "package:ggplot2") 
```

然后你可以使用`order`参数`guide_legend`（和`guide_colorbar`），

```
# specify the order of the legend.
qplot(data = mpg,x = displ, y = cty, size = hwy, colour = class, alpha = cyl)+
 guides(size = guide_legend(order = 1), colour = guide_legend(order = 2), alpha = guide_legend(order = 3))

qplot(data = mpg,x = displ, y = cty, size = hwy, colour = class, alpha = cyl)+
 guides(size = guide_legend(order = 3), colour = guide_legend(order = 1), alpha = guide_legend(order = 2)) 
```

`order`参数应该是一个正整数。图例按顺序排列。请注意，这是一个快速修复，因此在 ggplot2 的下一个正式版本中可能会更改界面。

# python - 如何在不破坏 sqlalchemy 相关依赖项的情况下（重新）安排此 python 代码？

> ID：10035552
> 
> 赞同：0
> 
> 时间：2012-04-05T20:29:47.213
> 
> 标签：python, reflection, sqlalchemy, primary-key, command-line-arguments

在将 sqlalchemy 映射设置到 python 中的 sqlite 数据库时，我有一个关于“安排代码，这取决于彼此”的小问题。

目标是编写一个脚本，它满足以下条件：

1.  获取一个`filename`参数作为命令行参数。
2.  基于`filename`它应该创建一个 SQLite 数据库的绝对路径。
3.  它应该连接到数据库并创建一个`engine`
4.  它应反映该数据库中的表。
5.  它应该将表中`monkey patch`的列作为主键列，因为该表没有主键并且 sqlalchemy 需要一个。`id``mytable`

所以我想出了这个：

```
from sqlalchemy import create_engine, Column, Integer
from sqlalchemy.orm import sessionmaker
from sqlalchemy.ext.declarative import declarative_base  

def create_path(file_name):
    # generate absolute path to file_name

path_to_file = create_path("my_file_name.sqlite")
engine = create_engine('sqlite:///{path}'.format(path=path_to_file), echo=False)
Base = declarative_base()
Base.metadata.create_all(engine)

class MyTable(Base):
    __tablename__ = 'my_table'
    __table_args__ = {'autoload': True}

    id = Column(Integer, primary_key=True) # Monkey patching the id column as primary key.

def main(argv):
    # parse file_name here from argv
    Session = sessionmaker(bind=engine)
    session = Session()
    for row in session.query(MyTable).all():
        print row
    return "Stop!"

if __name__ == '__main__':
    sys.exit(main()) 
```

But this is a doomed construction and I don't see how I could rearrange my code without breaking the dependencies.

1.  To be able to create `MyClass` I need `Base` to be defined before `MyClass`.
2.  To be able to create `Base` I need `engine` to be defined before `Base`.
3.  To be able to create `engine` I need `path_to_file` to be defined before `engine`.
4.  To be able to create `path_to_file` outside of `main()` I need `create_file()` to be defined before `path_to_file`.
5.  And so on...

Hopefully you see where I am stuck...

Any suggestions?

*Edit:* By the way, the code works, but only with a hardcoded filename in the top of the script.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:08:25.203

I solved my problem using the classical mapping approach of SQLAlchemy:

```
from sqlalchemy import create_engine, Column, Integer, MetaData, Table
from sqlalchemy.orm import sessionmaker, mapper

class MyTable(object):    
    pass    

def main():
    path_to_file = create_path("my_file_name.sqlite")
    engine = create_engine('sqlite:///{path}'.format(path=path_to_file), echo=False)

    metadata = MetaData()
    metadata.bind = engine
    my_table = Table('mytable',
                     metadata,
                     Column('id', Integer, primary_key=True), # Monkey patching the id column as primary key.
                     autoload=True,
                     autoload_with=engine)
    mapper(MyTable, my_table)

    Session = sessionmaker(bind=engine)
    session = Session()

    # Do Stuff! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:00:27.653

I do not see why you could not use the `declarative` mapping still complety. I think the key to the proper dependencies is to know what to put in the module and what in the script/function. With python, you can easily define the class inside the `run_script` function.

```
from sqlalchemy import create_engine, Column, Integer
from sqlalchemy.orm import sessionmaker
from sqlalchemy.ext.declarative import declarative_base

def create_path(filename):
    import os
    fn = os.path.abspath(os.path.join(os.path.dirname(__file__), 'sqlite_files', filename))
    return fn

def run_script(filename):
    path_to_file = create_path(filename)

    engine = create_engine('sqlite:///{path}'.format(path=path_to_file), echo=True)
    Session = sessionmaker(bind=engine)
    Base = declarative_base(bind=engine)

    # object model
    class MyTable(Base):
        __tablename__ = 'my_table'
        __table_args__ = {'autoload': True}
        id = Column(Integer, primary_key=True) # Monkey patching the id column as primary key

    # script itself
    session = Session()
    for row in session.query(MyTable).all():
        print row
    return "Stop!"

def main(argv):
    assert argv, "must specify a database file name"
    run_script(argv[0])

if __name__ == '__main__':
    import sys
    sys.exit(main(sys.argv)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T20:53:24.163

I don't have the capability to do any testing at my current location. But I suggest moving all of that code to `main()` as follows. Also, `MyTable` subclasses `declarative_base`.

```
from sqlalchemy import create_engine, Column, Integer 
from sqlalchemy.orm import sessionmaker from sqlalchemy.ext.declarative import declarative_base    

class MyTable(declarative_base):     
    __tablename__ = 'my_table'     
    __table_args__ = {'autoload': True}      

    id = Column(Integer, primary_key=True) # Monkey patching the id column as primary key.  

def create_path(file_name):     
    # generate absolute path to file_name  

def main(argv):     # parse file_name here from argv   
    path_to_file = create_path("my_file_name.sqlite") 
    engine = create_engine('sqlite:///{path}'.format(path=path_to_file), echo=False) 
    Base = MyTable()
    Base.metadata.create_all(engine)  

    Session = sessionmaker(bind=engine)     
    session = Session()     
    for row in session.query(MyTable).all():         
        print row     
    return "Stop!"  

if __name__ == '__main__':     
    sys.exit(main()) 
```

# jquery - 当用户单击菜单时，是否有更好的方法来隐藏菜单？

> ID：10035553
> 
> 赞同：1
> 
> 时间：2012-04-05T20:29:53.100
> 
> 标签：jquery

我正在使用下面的代码在单击锚点时显示/隐藏导航菜单。

我遇到的问题是第一次加载页面时，我必须单击两次锚点才能显示菜单。之后，我可以通过单击切换菜单。我还可以单击文档上任意位置的菜单以将其隐藏。

有没有人看到下面的代码有问题，或者知道当用户单击菜单时隐藏菜单的更好方法？

```
$('#aToggleQuickNavigation').click(function () {
    $('#ulQuickNavigation').toggle();
});

$('html').click(function () {
    if ($('#ulQuickNavigation').css('display') == 'block') {
        $('#ulQuickNavigation').css('display', 'none');
    }
    $('#aToggleQuickNavigation').click(function (event) {
        event.stopPropagation();
    });
    $('#ulQuickNavigation li a').click(function (event) {
        event.stopPropagation();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:36:07.847

如果单击事件一直冒泡到正文，则隐藏它：

```
$("body").click(function(){
  $("#ulQuickNavigation").hide();
}); 
```

如果用户单击菜单上的任何位置，您已经阻止了该单击的传播，因此主体永远不会听到它，因此它不会被隐藏。

我注意到的另一件事是您将单击事件绑定在 HTML 元素的单击事件处理程序中。这可能会很成问题。每次点击冒泡到 HTML 元素时，您将绑定越来越多的点击事件。

现在就坚持这样的事情：

```
// Any click that arrives at the body should close my navigation
$("body").click(function(){
  $("#ulQuickNavigation").hide();
});

// Prevent clicks on nav from reaching the body
$("#ulQuickNavigation").click(function(e){
  e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:05:26.593

您是否尝试过使用 jQuery 内置的 slideToggle 功能？

基本上它需要一个带有 display: none; 的元素。在它上面并将在单击时显示它（或在您设置更改逻辑的任何位置）。

例子：

`$("#ID").slideToggle(700);`

其中 700 是您希望滑动切换所花费的时间（以毫秒为单位）。

在你的情况下：

`$('#aToggleQuickNavigation').click(function () { $('#ulQuickNavigation').slideToggle(500); });`

# java - 在构造函数中抛出异常是否明智？

> ID：10035554
> 
> 赞同：2
> 
> 时间：2012-04-05T20:29:56.703
> 
> 标签：java, architecture, jdbc

我正在构建 DB 类，在构造函数中我想建立与数据库的连接，以便该类中的其余函数可以访问静态 dbLink。这是一个好方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T20:38:33.853

至于具体问题，在构造函数中抛出异常肯定是合法的。没有其他明智的方法可以防止“DB 类”实例与断开的连接一起使用。

至于具体的功能需求，你还有另一个大问题。您不应该在“数据库类”的构造函数中创建数据库连接，并且*肯定不会*创建它`static`。这表明只要“DB 类”的实例存在于 Java 的内存中，您就打算保持连接打开。这反过来又是一个非常糟糕的主意。相反，应该在与`try`您执行 SQL 查询/查询的位置完全相同的块中创建连接。连接也应该在那个`finally`块中关闭`try`堵塞。这可以防止资源长期泄漏，否则会导致您的应用程序崩溃，因为数据库服务器因为打开时间过长而导致资源超时，或者因为打开了太多连接而耗尽资源。

### 也可以看看：

*   [在 JDBC 中，Connection、Statement 和 ResultSet 应该多久关闭一次？](https://stackoverflow.com/questions/5602772/how-often-should-statement-and-resultset-objects-be-closed-in-jdbc)
*   [JDBC MySql 连接池实践避免连接池耗尽](https://stackoverflow.com/questions/2313197/jdbc-mysql-connection-pooling-practices)
*   [当我的应用程序失去连接时，我应该如何恢复它？](https://stackoverflow.com/questions/8345133/when-my-app-loses-connection-how-should-i-try-to-recover)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T20:40:22.997

我的建议是`connect()`在你的类中提供一个抛出异常的方法，让你的类实例化没有异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T20:32:05.750

“你好，是的，构造函数抛出异常是正常的。实际上，抛出异常是构造函数失败的唯一方法。

但是，您应该小心从作为 RuntimeException 子类的构造函数中抛出任何异常。Java 编译器不会强制调用代码处理此类异常，因此它们会带来一些额外的风险。有时使用它们是可以的，但要小心。”

从这里：[http ://en.allexperts.com/q/Java-1046/normal-throw-exception-constructor.htm](http://en.allexperts.com/q/Java-1046/normal-throw-exception-constructor.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T20:37:01.133

通常，创建某种类型的连接对象实际上并不建立连接，它只是设置要建立的连接。`connect()`拥有一个建立连接或在无法建立连接时抛出异常的方法更有意义。

我认为让构造函数建立连接没有意义，所以它不应该抛出任何异常。

# objective-c - 当数据为空时，使用情节提要在导航控制器上显示不同的视图

> ID：10035563
> 
> 赞同：0
> 
> 时间：2012-04-05T20:30:45.603
> 
> 标签：objective-c, ios, storyboard

我有一个带有 tableview 控制器作为第一个控制器的导航控制器，但是当数据库为空时，我想向用户显示一个视图，该视图要求用户提供一些信息以填充数据库并将其显示在导航控制器而不是视图中在情节提要中分配，我想我必须以编程方式执行此操作，但我是 iphone 开发的新手，老实说不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:59:52.957

这是你如何做到的。在情节提要中为您的视图控制器创建一个新场景，用户将在其中提交信息（假设它称为 CollectInfoViewController）。然后从您的 tableview 控制器创建一个**模态**segue 到 CollectInfoViewController。在 Attributes Inspector 中，将 segue 的 Identifier 属性设置为“CollectInfo”，以便稍后识别它。

然后当你的 tableview 控制器的`viewDidLoad`方法运行时，询问 table view 委托是否有任何行要显示。如果没有，以编程方式对您的 CollectInfoViewController 执行 segue。

```
- (void)viewDidLoad
{
    [super viewDidLoad];   

    if ([self.tableView.dataSource tableView:self.tableView numberOfRowsInSection:0] == 0) {
        [self performSegueWithIdentifier:@"CollectInfo" sender:self];     
    }
} 
```

在您的 CollectInfoViewController 中，一旦用户输入了信息并将其存储在数据库中，您就可以从 CollectInfoViewController 中调用以下命令来关闭该视图。这会将用户返回到 tableview。

```
[self dismissModalViewControllerAnimated:YES]; 
```

最后，回到您的 tableview 控制器中，您可能需要使用已收集的新数据重新加载您的表。您可以在 中执行此操作，`viewWillAppear`当模态视图控制器被解除时将调用它。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.tableView reloadData];
} 
```

# javascript - 是否有跨浏览器解决方案来监控 document.activeElement 何时更改？

> ID：10035564
> 
> 赞同：24
> 
> 时间：2012-04-05T20:30:49.320
> 
> 标签：javascript, focus, document

我真的在寻找适用于所有当前流行浏览器（IE9、Chrome、Firefox、Safari）以及一直到 IE8 的东西。

虽然，我一直在寻找一种在 Flash 移动对象失去焦点后设置焦点的方法，但我发现所有这样做的历史方法都失败了。我认为这是另一个安全问题。

所以，我现在正在寻找如何监视 document.activeElement 的某种更改事件（尽管“更改”并没有真正发生）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-01-28T14:30:48.093

虽然@James 上面的回答是正确的。我添加了更多细节，使其成为一个完全可行的解决方案以及`focus`事件的使用。

```
<html>
<body>
    <input type="text" id="Text1" name ="Text1" value=""/>
    <input type="text" id="Text2" name ="Text2" value=""/>
    <SELECT><OPTION>ASDASD</OPTION><OPTION>A232</OPTION></SELECT>
    <INPUT TYPE="CHECKBOX" id="Check1"/>
    <INPUT type="TEXT" id="text3"/>
    <input type="radio"/>
    <div id="console"> </div>
    <textarea id="textarea1"> </textarea>
    <script>

        var lastActiveElement = document.activeElement;

        function detectBlur() {
            // Do logic related to blur using document.activeElement;
            // You can do change detection too using lastActiveElement as a history
        }

        function isSameActiveElement() {
            var currentActiveElement = document.activeElement;
            if(lastActiveElement != currentActiveElement) {
                lastActiveElement = currentActiveElement;
                return false;
            }

            return true;
        }

        function detectFocus() {
            // Add logic to detect focus and to see if it has changed or not from the lastActiveElement. 
        }

        function attachEvents() {
            window.addEventListener ? window.addEventListener('focus', detectFocus, true) : window.attachEvent('onfocusout', detectFocus);  

            window.addEventListener ? window.addEventListener('blur', detectBlur, true) : window.attachEvent('onblur', detectBlur);
        }

        attachEvents();

    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T20:41:53.417

似乎您可以结合使用捕获焦点/模糊和焦点输入/焦点输出 (IE) 事件。可能是这样的：

```
window.addEventListener ?
  window.addEventListener('blur', blurHappened, true)
  : window.attachEvent('onfocusout', blurHappened);

function blurHappened() {
  console.log('document.activeElement changed');
} 
```

`onfocusout`会捕捉到冒泡的“模糊”，而常规`blur`会`addEventListener`捕捉“模糊”。

您可能需要在`blurHappened`. 我不确定，因为我没有测试过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T20:37:08.723

根据我的经验，关于跨浏览器问题的最佳信息来源是 Quirksmode。这是“明显”（但不可用）选项的链接——焦点和模糊事件。

[http://www.quirksmode.org/dom/events/blurfocus.html](http://www.quirksmode.org/dom/events/blurfocus.html)

奇怪（并且令人惊讶）是基于 Webkit 的浏览器是这里美中不足的地方。

另一种选择是使用间隔计时器来检查 activeElement 是否已更改为您的唯一选项或作为焦点/模糊的备份。（您还可以监听按键、鼠标点击和触摸以检查 activeElement 是否更改。）如果您涵盖这些选项，您的 intervalTimer 将几乎不需要清理。

# tfs - TFS 自定义构建模板 - TfsBuild 参考

> ID：10035569
> 
> 赞同：0
> 
> 时间：2012-04-05T20:31:07.927
> 
> 标签：tfs, tfsbuild

在我的自定义构建模板 (xaml) 的导入选项卡上，我设法解决了所有导入，除了只显示 TfsBuild 的导入。有谁知道我可以从哪里添加这个参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:50:58.793

升级到 TFS 2012 后，我注意到自定义构建中的“TfsBuild”未解析引用。我最终将其替换为 Template.TfsBuild。

# java - Android中加载到内存中的逻辑与数据库中的逻辑

> ID：10035572
> 
> 赞同：3
> 
> 时间：2012-04-05T20:31:16.010
> 
> 标签：java, android, sqlite, business-logic

我有一个关于通用 Android 应用程序显示静态和动态信息（具有持久信息）的最佳方法是什么的问题：

让我们想象一个简单的应用程序，其中包含一些持久性集合和这些项目之间的一些关系：例如，一个显示**飞行员**列表、**汽车飞行员**列表和用户**最喜欢的飞行员**列表的应用程序。用户可以手动刷新飞行员或汽车配置文件，新数据必须永久保存

A) 使用机制将相应的类和列表（例如）从数据库加载到逻辑类中，使用管理器（例如**PilotManager**）访问它们并反映对这些对象持续影响的更改，同时反映这些对象的更改数据库。这些对象在应用程序运行时保留在内存中。

B) 直接使用数据库引擎，从那里随时恢复显示或工作所需的元素。例如，为了列出**飞行员**查询数据库并使用 CursorAdapter 列出它们。如果选择了飞行员，则查询他的汽车的数据库并显示其值。任何更改都会直接保存到数据库并从那里刷新。

我通常使用方法 A)，因为在交互中授予用户高响应性非常快，因为（第一次加载除外）不需要数据库访问。但一位朋友告诉我，B) 更好，因为您使用的内存更少，并且您可以抓住数据库引擎来处理复杂的搜索过滤器。

两种方法都有效吗？有人错了吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:42:06.123

当您需要良好的性能和速度时，如果您做游戏之类的事情，则解决方案 A 很好。

但解决方案 B 适用于通常的应用程序，用户从一个活动转到另一个活动。解决方案 B 也有利于节省内存（如果您有很多对象，您可能会在解决方案 A 中遇到内存错误）

# javascript - 如何将 jquery .html() 用于fancybox 内容

> ID：10035575
> 
> 赞同：0
> 
> 时间：2012-04-05T20:31:30.783
> 
> 标签：javascript, jquery, html, django, fancybox

我的文件：

```
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery.fancybox-1.3.4.pack.js"></script>

<link rel="stylesheet" href="{{ STATIC_URL }}css/jquery.fancybox-1.3.4.css" type="text/css" media="screen" />

{% include "submission-form.html" with section="photos" %}
<div class="commentables">
    {% load thumbnail %}

    {% for story in objects %}
        <div class="image {% if forloop.counter|add:"-1"|divisibleby:picsinrow %}left{% else %}{% if forloop.counter|divisibleby:picsinrow %}right{% else %}middle{% endif %}{% endif %}">
            {% if story.image %}
                {% thumbnail story.image size crop="center" as full_im %}
                    <a rel="gallery" href="{% url post slug=story.slug %}">
                        <img class="preview" {% if story.title %} alt="{{ story.title }}" {% endif %} src="{{ full_im.url }}">
                    </a>
                {% endthumbnail %}
            {% else %}
                {% if story.image_url %}
                    {% thumbnail story.image_url size crop="center" as full_im %}
                        <a rel="gallery" href="{% url post slug=story.slug %}">
                            <img class="preview" {% if story.title %} alt="{{ story.title }}" {% endif %} src="{{ full_im.url }}">
                        </a>
                    {% endthumbnail %}
                {% endif %}
            {% endif %}

        </div>

</div>

<script>
    $(document).ready(function(){
        $(".image a").click(function(){
            alert($(this).parent().html());
        });

       $(".image a").fancybox({
           title: $(this).attr("alt"),
           content: $(this).parent().html()
       });
    });
</script> 
```

问题是，fancybox 正在加载锚的 href 的 html，而不是我为内容传递的 html，它会正确发出警报。

这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T00:38:37.373

不幸的是，您不能`$(this)`在 fancybox (v1.3.x) 函数中使用（这是一个设计问题），但是在任何其他 jQuery 方法中，所以试试这个

```
$(document).ready(function(){
 $(".image a").bind("click",function (){
  var data = $(this).parent().html();
  var dataTitle = $(this).attr("alt");
  function newTitle(){return "<span>"+dataTitle+"</span>";}
  $.fancybox(data,{
   "titlePosition": "inside",
   "titleFormat": newTitle
  }); // fancybox
  return false;
 }); // bind
}); //ready 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:35:27.740

我认为这个会起作用：

```
 $(".image a").click(function (){
       $.fancybox($(this).parent().html(),{
           title: $(this).attr("alt")
       });
   }); 
```

# struts2 - Liferay + Struts2 没有为动作名称默认映射的动作。

> ID：10035576
> 
> 赞同：0
> 
> 时间：2012-04-05T20:31:31.520
> 
> 标签：struts2, liferay

我正在使用 Liferay6 和 Struts2 。

这是 LOGin.jsp

```
<%@ taglib prefix="s" uri="/struts-tags" %>
<html>
<head>
<title>Struts 2 Login Application!</title>
</head>
<body>
<s:form action="login" method="POST" validate="true">
<tr>
<td colspan="2">
Login
</td>
</tr>
<s:actionerror />
<s:fielderror />
<s:textfield name="username" label="Login name"/>
<s:password name="password" label="Password"/>
<s:submit value="Login" align="center"/>
</s:form>
</body>
</html> 
```

这是 struts.xml 文件

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>

    <constant name="struts.devMode" value="true" />

    <package name="default" extends="struts-default" namespace="/view">
         <action name="login"
            class="net.LoginAction">
            <result name="success">/Welcome.jsp</result>
            <result name="error">/view.jsp</result>
        </action>
    </package>
</struts> 
```

这是异常堆栈跟踪

```
9:51:52,109 ERROR [Jsr168Dispatcher:27] Could not find action
There is no Action mapped for action name default. - [unknown location]
    at com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:177)
    at org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:61)
    at org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    at com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:47)
    at com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:36)
    at org.apache.struts2.portlet.dispatcher.Jsr168Dispatcher.serviceAction(Jsr168Dispatcher.java:446)
    at org.apache.struts2.portlet.dispatcher.Jsr168Dispatcher.render(Jsr168Dispatcher.java:323)
    at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:100)
    at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:64)
    at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:93)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:68)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)
    at com.liferay.portlet.InvokerPortletImpl.invoke(InvokerPortletImpl.java:639) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:05:35.790

`There is no Action mapped for action name default.`

但是你的动作名**登录**

`<action name="login" class="net.LoginAction">`

您的操作网址必须是`sitename/youapp/view/login.action`

除了登录你的 hava 两个动作。

```
 <action name="prepareLogin" class="net.LoginAction" method="input">
        <result name="success">/login.jsp</result>
    </action> 
```

`prepareLogin`- 此操作仅查看登录页面

```
 <action name="login" class="net.LoginAction"  method="execute">
        <result name="success">/Welcome.jsp</result>
        <result name="error">/login.jsp</result>
    </action> 
```

`login`- 此操作获取登录

# android - 将应用程序添加到内核构建

> ID：10035578
> 
> 赞同：0
> 
> 时间：2012-04-05T20:31:44.857
> 
> 标签：android, kernel, package

所以我正在创建一个自定义设置应用程序，或者我已经创建了它，并且构建没有任何错误。我没有删除原始设置应用程序，只是复制了整个包文件夹，并重命名了文件夹和包名称并进行了更改。但是，该应用程序未显示在我的模拟器上的应用程序列表中......我已将包添加到 PRODUCT_PACKAGES := 下的列表中的 core.mk 和 generic.mk 中。有谁知道我错过了什么？？谢谢

# php - MySQL 选择 IS NOT NULL 的多个字段不起作用

> ID：10035579
> 
> 赞同：0
> 
> 时间：2012-04-05T20:31:46.707
> 
> 标签：php, mysql, insert, null

我有一个查询，将数据从多个从表传输到一个主表。这是我的一个查询的示例：

```
$insert = mysql_query("
INSERT IGNORE INTO master (title, description, keywords, url, uniqueid, city, state, zip, datetime, expiretime)
SELECT title, description, keywords, url, uniqueid, city, state, zip, datetime, expiretime
FROM slave1 WHERE zip IS NOT NULL AND keywords IS NOT NULL AND city IS NOT NULL") or die(mysql_error()); 
```

运行此查询后，将插入数据行，其中包含我指定`master`的*部分或全部字段* （字段为、和）`NULL``NOT NULL``zip``keywords``city`

似乎mysql完全忽略了`IS NOT NULL`参数。有谁知道解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:35:21.927

尝试替换`zip IS NOT NULL`为`TRIM(zip) <> ""`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:39:35.970

我怀疑*uniqueid*是主键。可能，您的*主*表已经包含具有相同键的行，这些行具有空值*city*等。在这种情况下，您应该使用 REPLACE 而不是 INSERT IGNORE。

# iphone - 修改 MyApp-Info.plist

> ID：10035582
> 
> 赞同：0
> 
> 时间：2012-04-05T20:31:55.767
> 
> 标签：iphone, ios

在 MyApp-Info.plist 中，有一个名为“图标文件”的条目，它是一种数组类型，现在其中有一个元素。我正在做什么以通过以下方式检索此信息；

> NSDictionary *plistDictionary = [[NSBundle mainBundle] infoDictionary];
> NSArray *array = [plistDictionary objectForKey:@"图标文件"];
> NSLog(@"数组是 %@",array);

但是，控制台显示我的数组中没有元素......我在上面做错了什么吗？请就此给我建议。

谢谢

PS：有一个关于**图标文件的图像**

![在此处输入图像描述](../Images/a6b071578ddeb88c3ad9db3f19533cec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:42:19.093

当您在 Xcode 中查看 plist 时，右键单击窗口并从菜单中选择“显示原始键/值”。它会给你实际的字典键。

或者：`NSLog(@"%@", [[NSBundle mainBundle] infoDictionary]);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:57:47.970

“图标文件”项的正确键是`CFBundleIconFiles`. 您可以通过在文件浏览器中选择 plist，右键单击并选择 Open As > Source Code 来查看其余的实际键。

# sql - 不同的 SQL 供应商如何处理分区？

> ID：10035585
> 
> 赞同：2
> 
> 时间：2012-04-05T20:32:10.280
> 
> 标签：sql, database-partitioning

供应商在数据库中实现分区时采用了哪些不同的方法？

这是对 marc_s 评论的回应：[MySQL 中的分区是创建表还是仅创建虚拟表？](https://stackoverflow.com/q/10035498/1026459)

接受一本好书的链接形式的答案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:10:42.597

我只能谈论**SQL Server**：

**每个分区在内部都是一个新的 b 树。**查询处理器创造了拥有一张巨大表的错觉。它几乎没有考虑到表是分区的优化，因为分区本身对优化器是**透明**的：列 P 上的分区表（在 (A, B) 上具有聚集索引）显示为（性能方面）具有聚类键（P，A，B）。这适用于搜索和扫描。

让分区成为一个新的内部表使对整个分区的**批量操作****变得容易**：只需删除分区或创建一个新分区。如果架构完全相同，您甚至可以用不相关的表交换分区！（更改表切换分区）

将分区设为 b 树对维护有影响：您可以将各个分区放在**不同的驱动器**上，或者将它们设为只读并将**它们从备份中排除**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:52:30.700

您可以使用以下方法模拟分区：

*   一组以某种模式命名的表作为分区；
*   它们之上的视图以隐藏数据存储的结构并将其呈现为单个关系；
*   应用程序集成逻辑：让应用程序了解分区模型，从而使用正确的表来执行 DDL 语句。

这种方法已在 ORACLE 7.2 中使用（我可能对版本有误，太多年了），并且可以在任何支持视图的数据库中实现。如果视图不存在，您可以在应用程序中创建一个特殊的函数/类来模拟视图行为。

尽管如此，这是一种相当复杂且容易出错的方法，因为存储布局在数据库之外是可见的。因此，如果可能，请选择本机或隔离分区。

ORACLE 从第 8 版开始支持数据库级别的分区，使存储布局完全隐藏在数据库之外。

尽管 PostgreSQL 还没有内置的分区支持，但这是一项[正在进行](http://postgresql.uservoice.com/forums/21853-general/suggestions/269812-oracle-style-table-partitioning)的工作。此外，PostgreSQL 已经拥有一组有用的特性，可以进行仅数据库分区，对任何外部用户隐藏实现。您可以[在此处](http://wiki.postgresql.org/wiki/Table_partitioning)查看详细信息。

# asp.net-mvc - 将值从视图传递到控制器

> ID：10035586
> 
> 赞同：1
> 
> 时间：2012-04-05T20:32:10.753
> 
> 标签：asp.net-mvc, vb.net

**当我单击提交时，我希望传递在下拉框中选择的值。相反，它传递了一个空值，我对为什么感到困惑。任何帮助表示赞赏！**

控制器：

```
Namespace DHR
  Public Class WorkSampleController
        Inherits System.Web.Mvc.Controller
        Private dbQ As QuarterDBContext = New QuarterDBContext
        Private db As WorkSampleDBContext = New WorkSampleDBContext

Function Index() As ViewResult
            Dim quarterList As New List(Of String)()
            Dim QuarterQry = From d In dbQ.getQuarter
                             Order By d.ID
                             Select d.Quarter
            quarterList.AddRange(QuarterQry.Distinct())
            ViewBag.Quarter = New SelectList(quarterList)   
            Return View(db.WorkSample.ToList())
  End Function 
  <HttpPost()>
            Function Index(ByVal quarterID As Integer) As ActionResult
                Dim quarter As String = "null"
                If quarterID = 1 Then
                    quarter = "Dec, Jan, Feb"
                End If
                ViewBag.test = quarter
                Return View()
            End Function 
```

看法：

```
@ModelType IEnumerable(Of DHR.WorkSample)

@Code
    ViewData("Title") = "Monitor"
    Using (Html.BeginForm())
        @<p> Type: @Html.DropDownList("SampleType")
             Quarter: @Html.DropDownList("Quarter")
             <input type="submit" value="Filter" /></p>
    End Using
End Code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:30:20.840

我不确定，但是如果您在 C# 中执行此操作，则可以将其`FormCollection`用作 ActionResult 的参数并从那里获取值。我就是这样做的

```
public ActionResult Index(FormCollection coll){
      var value1 = coll["SampleType"];
      var value1 = coll["Quarter"]; 
```

}

对不起，如果它在 VB 中不起作用，但也许值得一试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:28:57.540

您确定您的代码确实在您的 post 方法中传递吗？因为当我开始使用 asp.net（1 个月前）时，我遇到了问题。

我通过将 (Html.BeginForm()) 替换为 (Html.BeginForm(IsPost)) 解决了这个问题。

我不确定它是否会成功。

## 编辑 ：

我也已经用过这个：

```
 Dim test1 As String = request("SampleType")
 Dim test2 As String = request("Quarter") 
```

# xml - 自动生成的 XSD 方案中的错误：已声明全局元素“配置”

> ID：10035587
> 
> 赞同：4
> 
> 时间：2012-04-05T20:32:20.053
> 
> 标签：xml, visual-studio, xsd, xsd-validation

为 app.config 自动创建方案时，会生成一个 app.xsd。

但是在开始的片段中：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified"     xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="configuration">
    <xs:complexType>
      <xs:sequence> 
```

我收到警告：

```
Warning (line 1)    The global element 'configuration' has already been declared. 
```

当我双击警告时，焦点在片段上：

有没有人有解决方案如何摆脱这个警告？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:23:48.937

我不知道这是否与提示此问题的问题有关，但是我在程序[XML Notepad](http://www.microsoft.com/en-us/download/details.aspx?id=7973)中遇到了相同类型的错误（“警告”），然后关闭然后重新打开它解决了我观察到的错误，例如重新启动计算机确实是您自己的错误。

# objective-c - 在 Objective C 中创建单例类的另一个实例

> ID：10035588
> 
> 赞同：1
> 
> 时间：2012-04-05T20:32:26.643
> 
> 标签：objective-c, ios

我有一个在整个应用程序中使用的单例类。我正在研究另一个需要向这个单例类发送数据的类，但可以将数据成束发送，这将冻结主线程。

我应该创建这个单例类的另一个实例，还是应该创建一个数据导入实用程序作为一个单独的类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T20:36:19.603

顾名思义，单例意味着只有一个***实例***浮动。应该分派冻结主线程的数据，类的另一个实例无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:39:23.017

随心所欲地创建另一个实例，但不要再称它为单例了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T20:40:53.867

实际上，您应该在另一个线程中发送此数据，并且可能在发送数据时使用 NSLock，这样您就不会遇到任何访问错误。

利用：

```
[self performSelectorOnBackGround:@selector(sendDataToSingleton:) withObject:@"data to send"]; 
```

不要创建单例类的另一个实例，否则应用程序的其余部分将无法访问它，因为它是单例。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T20:45:09.180

根据定义，您应该只有 1 个单例实例。如果它是一个正确构造的单例，它应该不可能有超过 1 个！

如果您遇到主线程无响应的问题，请将需要加载的数据分解到较小的卡盘中。这样，在加载不同的数据块之间，主线程可以处理它需要的任何事件，其他对象可以访问单例中的数据。

你也可以实现一个惰性数据加载机制，当一个对象想要来自单例的信息时，单例检查你的新类是否正在等待给它新的信息，然后加载它。

# build - 如何从 TFS 2010 Team Build 中启动外部进程来编译 Visual Basic 项目

> ID：10035589
> 
> 赞同：2
> 
> 时间：2012-04-05T20:32:36.223
> 
> 标签：build, build-process, build-automation, tfsbuild

我正在研究使用 TFS2010 Team Build 进行构建。目前我们正在使用 Nant Scripting 来构建 .NET 代码以及启动外部进程来构建 VB6 项目。我们正在慢慢地将我们的 VB6 转换为 .NET，但希望尽可能地获得自动化的好处。我们如何启动外部进程以在 Team Build 中进行编译以编译我们的 VB6 项目？这可能吗？任何建议等将不胜感激。

谢谢，吉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:34:45.760

您可以使用Community TFS Build Extensions中的[VB6 活动](http://tfsbuildextensions.codeplex.com/wikipage?title=How%20to%20integrate%20the%20VB6%20build%20activity&referringTitle=Documentation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T04:27:51.037

看看[InvokeProcess](http://blogs.objectsharp.com/blogs/dave/archive/2011/03/31/tfs-build-invoke-process-activity.aspx)活动，它应该可以做你想做的事。对于编译等相对简单的任务，应该足够了。如果您需要以更详细的方式捕获输出（例如从外部测试发布测试结果），您可能需要编写自己的[自定义活动](http://www.ewaldhofman.nl/post/2010/04/29/Customize-Team-Build-2010-e28093-Part-4-Create-your-own-activity.aspx)。

# c# - C# WinForms 需要以简单的左上角方式自动对齐控件内的一组标签

> ID：10035595
> 
> 赞同：0
> 
> 时间：2012-04-05T20:32:54.630
> 
> 标签：c#, winforms, controls, label

我想为我在这里解释的内容制作一个 gui[用于编辑语句/方程/条件的 C# 可视化控件？](https://stackoverflow.com/questions/9977898/c-sharp-visual-control-for-editing-statements-equations-conditions)

基本上它是一个表达式编辑器。每个表达式都包含一个内容列表，可以是文本字符串或参数。例如，一个表达式：

```
If x is greater than 0 
```

由组成：

```
String "If"
Parameter "variable" (= "x")
String "is"
Parameter "comparator" (= "greater than")
Parameter "value" (= "0") 
```

因此，当用户想要编辑这样的表达式时，我必须（动态）创建五个标签，并将它们放置在控件（面板）中，并将 onclick 事件添加到其中不仅仅是字符串的那些，以便用户可以打开一个窗口进行更改比较器或变量名称等。标签显然必须在它们绑定的控件内排列。

问题是，我不知道是否已经有一种方法可以自动完成。我希望这些标签能够像本页上的单词排列一样排列。当它适合时，将它放在前一个标签的右侧，当它不适合时，将它放在下一行的开头。

我是否必须手动移动它们所在控件的 OnResize()，或者是否有自动化的方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:39:00.197

看看[FlowLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel%28v=vs.90%29.aspx)。

从文档：

> FlowLayoutPanel 控件按水平或垂直流动方向排列其内容。它的内容可以从一行到下一行，或者从一列到下一列。或者，它的内容可以被剪裁而不是被包裹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T20:44:21.543

尝试使用[FlowLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel%28v=vs.100%29.aspx)

```
//Sample:
//Assuming you are creating your labels from 
//List<string>

 List<string> labels=new List<string>();
    labels.Add("If");
    labels.Add("variable");
    labels.Add("=");
    labels.Add("5");
    for (int i = 0; i < labels.Count; i++)
    {
        Label lbl = new Label();
        lbl.Text = labels[i];
        flowLayoutPanel1.Controls.Add(lbl);
    } 
```

# jquery - 显示来自 Ajax 的 json 数据并在 MVC3 视图中显示在 JQuery 对话框上

> ID：10035599
> 
> 赞同：3
> 
> 时间：2012-04-05T20:33:23.423
> 
> 标签：jquery, ajax, json, asp.net-mvc-3, razor

我在控制器中有以下 ActionResult。它根据 ID 从数据库返回一行数据（例如 id、name、city 等）

```
 [HttpPost]
    public ActionResult Get(Guid Id)
    {
        Ref imp = ReadRepository.GetById(refImpId);
        var ijson =  new JsonResult() { Data = imp.ToJson() };
        return ijson;
    } 
```

以下是 JQuery 对话框的 JQuery 和 Ajax。

```
$(".ImpList").click(function (e) {

    //  get the imp id
    var refImpId = $(this).next('#impId').val();
    var impgeturl = $('#impgeturl').val();
    var imptoedit = null;

    $.ajax({
        type: 'post',
        url: impgeturl,
        data: '{ "refImpId": "' + refImpId + '" }',
        contentType: "application/json; charset=utf-8",
        traditional: true,
        success: function (data) {
            imptoedit = jQuery.parseJSON(data);

            $("#editImpDialog").dialog({
                width: 350,
                height: 220,
                modal: true,
                draggable: false,
                resizable: false,
            });

        },
        error: function (request, status, error) {
            alert(e);  //  TODO:  need to discuss ajax error handling and form reset strategy.
        }
    });
});

$("#cancelEditImpBtn").click(function (e) {
    e.preventDefault();
    $('#editImpDialog').dialog("close");
});

$("#saveEditImpBtn").click(function (e) {
    e.preventDefault();
    $("form").submit();
}); 
```

我的视图中有一个对话框。我需要将 Json 数据显示到 Jquery 对话框中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:53:29.183

```
$.post("/echo/json/",function(data){
 //in actuality the json will be parsed here
    var d = '{"id":"1","name":"john","age":26}';
    var json = $.parseJSON(d);
    $("<div/>",{text:json.name+" "+json.age}).appendTo("body");
    $("div").dialog();

},'json') 
```

[**演示**](http://jsfiddle.net/BfuFU/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:54:16.230

有很多方法可以做到这一点。这是一个例子： http: [//geekswithblogs.net/michelotti/archive/2008/06/28/mvc-json---jsonresult-and-jquery.aspx](http://geekswithblogs.net/michelotti/archive/2008/06/28/mvc-json---jsonresult-and-jquery.aspx)

基本上，您必须访问处理程序`data`参数的属性`success`。

```
...
success: function (data) {
    alert(data.property);
}
... 
```

需要注意的一点是`dataType: "json"`在 AJAX 调用上添加选项，这样您就不必在收到数据后对其进行解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-08T21:14:41.343

这段代码对我很有效：

```
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>JSON Dialog</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/5.5.5/jsoneditor.min.css" rel="stylesheet" type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.0-rc.2/themes/smoothness/jquery-ui.min.css" rel="stylesheet" type="text/css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-rc1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.0-rc.2/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/5.5.5/jsoneditor.min.js"></script>

    <script>    
        function jsonDialog(jsonobj, modes, okcallback, cancelcallback, errorcallback) {
            if (jsonobj === undefined || jsonobj === null) {
                if (errorcallback !== undefined)
                    errorcallback("JSON Object is not valid");
                return false;
            }

            var jsoncontent = document.createElement('div');
            jsoncontent.style.display = "none";
            document.body.appendChild(jsoncontent);

            var jsoneditor = document.createElement('div');
            jsoneditor.style.width = '398px';
            jsoneditor.style.height = '500px';
            jsoncontent.appendChild(jsoneditor);

            if (modes === undefined || modes === null)
                modes = {mode: 'tree', modes: ['form', 'text', 'tree', 'view']};

            var editor = new JSONEditor(jsoneditor, modes);
            editor.set(jsonobj);

            var destroy = function() {
                editor.destroy();
                jsoneditor.remove();
                $(jsoncontent).dialog('close');
                jsoncontent.remove();   
                $('.ui-dialog').remove();
            };

            $(jsoncontent).dialog({
                height: 560,
                width: 400,
                modal: true,
                resizable: false,
                position: {
                    my: "center",
                    at: "center",
                    of: window
                },
                buttons: [{
                    text: "OK",
                    style:"margin-right:40px; color:#3883fa;",
                    click: function () {
                        var result = editor.get();
                        destroy();
                        if (okcallback !== undefined)
                            okcallback(result);                     
                    }
                }, {
                    text: "Cancel",
                    style:"color:#EE422E;",
                    click: function () {
                        destroy();
                        if (cancelcallback !== undefined)
                            cancelcallback();
                    }
                }]
            });
            $(".ui-dialog-titlebar-close").css('visibility','hidden');
            $(".ui-dialog-titlebar").css('visibility','hidden');
            $(".ui-dialog").css('border-style','none');
            $(".ui-dialog").css('text-align','center');
            $(".ui-button").css('width','100px');
            $(".ui-button").css('margin-top','10px');
            $(".ui-button").css('margin-bottom','10px');
            return true;
        }

        $(document).ready(function() {
            $("#test").click(function() {

                var jsonstr = '{"key": [1, 2, 3],"anotherkey": true,"somekey": null,"anykey": 123,"justakey": {"a": "b", "c": "d"},"otherkey": "Hello World"}';

                var jsonobj = JSON.parse(jsonstr); // MANDATORY
                var modes = {mode: 'tree', modes: ['form', 'text', 'tree']}; // OPTIONAL
                var okcallback = function(jsonobj){ alert( JSON.stringify(jsonobj)); }; // OPTIONAL
                var cancelcallback = function(){ }; // OPTIONAL
                var errorcallback = function(e){ alert(e); }; // OPTIONAL

                jsonDialog(jsonobj, modes, okcallback, cancelcallback, errorcallback);
            });
        });
    </script>
</head>
<body>
    <button id="test">Test</button>
</body>
</html> 
```

# php - 使用 php 会话保护页面

> ID：10035604
> 
> 赞同：0
> 
> 时间：2012-04-05T20:34:07.780
> 
> 标签：php, html

我在网站上有一些页面，我想用 php 会话保护，所以只有具有有效密码和登录名的管理员才能访问这些页面。这是 index.html 的代码（身份验证的形式）

```
<form id="form2" name="form2" method="post" action="authagent.php">
<p class="kkm">Authentification    </p>
<table align="center" width="300" border="0">
  <tr>
    <td width="146">Login</td>
    <td width="144"><label for="textfield12"></label>
    <input type="text" name="login" id="text" /></td>
  </tr>
  <tr>
    <td width="146">Mot de passe</td>
    <td><label for="textfield13"></label>
    <input type="password" name="mdp" id="mdp" /></td>
  </tr>
  <tr>
    <td>&nbsp;</td><td><input type="submit" name="button" id="button" value="Se connecter" /></td>

  </tr>

</table>
<p align="center"><a href="ajoutagent.html">Créer un nouveau compte</a></p>
<p align="center"><a href = "javascript:history.back()"> 
```

这是 authagent.php 的代码

```
 <?php
session_start() ;
$_SESSION['connect']=0;
mysql_connect("localhost","root","") or die(mysql_error());
mysql_select_db("agence");
$login = $_POST['login'];
$mdp = $_POST['mdp'] ;

$query = "SELECT * FROM agent where login_agent = '$login' and mdp_agent = '$mdp'";
$result = mysql_query($query);
while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {

if ($login == $line['login_agent'] && ($mdp == $line['mdp_agent'])) // Si le nom d'utilisateur et le mot de passe sont correct
{
 $_SESSION['connect']=1; 
          header('Location: agent.php');   

}
else
{
echo 'incorrect' ;// Si le nom d'utilisateur ou le mot de passe est incorrect
}
}
?> 
```

这是安全页面 agent.php 的代码

```
 <?php
session_start();
if (isset($_SESSION['connect']))//On vérifie que le variable existe.
{
        $connect=$_SESSION['connect'];//On récupère la valeur de la variable de session.
}
else
{
        $connect=0;//Si $_SESSION['connect'] n'existe pas, on donne la valeur "0".
}

if ($connect == "1") // Si le visiteur s'est identifié.
{
              header('Location: agent.php');  

// On affiche la page cachée.
}
else
{
                  header('Location: seconnecteragent.php');  

    } ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T20:44:50.180

通常这是通过测试会话变量（如login）的存在来完成的，如果它不是=1，那么您会自动重定向到登录页面。您可以将这段简单的代码放在每个页面的顶部，如果登录变量在那里，则不会发生任何事情并且页面会正常提供。一个基本的例子：

```
<?php 
if(!isset($_SESSION['loggedin']) || $_SESSION['loggedin']!=1){
    header('Location: login.php');
    exit();
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:09:18.037

正如我所看到的，你的问题是你在那里有一个递归。在agent.php 页面中，如果用户通过了身份验证，那么您将他发送回同一页面agent.php。

# c# - XAML 应用工作流是什么样的

> ID：10035611
> 
> 赞同：3
> 
> 时间：2012-04-05T20:34:44.203
> 
> 标签：c#, wpf, silverlight, windows-phone-7, xaml

我一直在尝试找出使用 XAML 编写的 GUI 的应用程序的生命周期是什么样的。[这篇博文](http://windowsteamblog.com/windows_phone/b/wpdev/archive/2012/04/03/optimize-startup-time.aspx)真的让我很困惑。报价单：

> 要充分了解改善启动时间的机会领域，了解启动应用程序的工作流程非常重要。

```
1\. The App constructor is called in App.xaml.cs.
2\. XAML in App.xaml is parsed.
3\. Application_Launching is called in App.xaml.cs.
4\. The Page constructor of your MainPage is called.
5\. XAML in your MainPage is parsed.
6\. OnNavigatedTo is called in your MainPage. 
```

我认为 XAML 被编译为 BAML 并嵌入到 dll 中。运行时只是将 BAML 转换为 .Net 对象。

WP7 Silverlight 有什么不同吗？运行时是否像浏览器解析 HTML 一样解析它？从 XAML 生成的 C# 文件有什么意义？（例如 Main.xaml.g.cs） C++ 和 XAML 应用程序有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:44:37.947

`.g.cs`文件是自动生成的，并且包含与 XAML 页面的一般布局相关的信息。[这是一个很好的描述](http://forums.silverlight.net/post/16906.aspx)。

运行时确实会解析嵌入在程序集中的 XAML - 与 WPF 不同，它不是作为 BAML 嵌入的。

# mysql - rails deploy - 数据库未上传

> ID：10035622
> 
> 赞同：0
> 
> 时间：2012-04-05T20:35:56.907
> 
> 标签：mysql, ruby-on-rails, deployment, cap

我正在处理我的第一个 Rails 应用程序部署，当我使用 capistrano 部署时，来自本地计算机的数据库数据似乎没有加载到服务器上的数据库中。我不清楚 capistrano 是否会处理这个问题。我还尝试从 /current 发布目录运行 'rake db:schema:load'。这是我尝试在浏览器中加载应用程序（在远程网络服务器上）时发生的情况的日志。

```
Started GET "/" for XX.XX.XX.XX at 2012-04-04 13:26:46 -0700
  Processing by PagesController#home as HTML
Completed 500 Internal Server Error in 3ms

ActiveRecord::StatementInvalid (Mysql::Error: Table 'project.users' doesn't exist: SHOW FIELDS FROM `users`):
  app/models/user.rb:61:in `authenticate_with_salt'
  app/helpers/sessions_helper.rb:50:in `user_from_remember_token'
  app/helpers/sessions_helper.rb:13:in `current_user'
  app/helpers/sessions_helper.rb:17:in `signed_in?'
  app/controllers/pages_controller.rb:5:in `home' 
```

所以问题似乎是应用程序加载，但数据库没有填充表和数据。

我确定我错过了部署过程的一个相对基本的细节，但到目前为止它让我无法理解......任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:55:05.570

你`Capfile`看起来像什么？

Rails 和 Capistrano 都不会将数据从您的开发环境复制到您的部署环境——<code>db:migrate:* 并且`db:schema:*`只处理数据库结构。在使用之前，`rake db:schema:load`请确保您的开发环境迁移已运行，并且您的最新版本`db/schema.rb`已签入您的存储库。

如果您希望某些数据在部署时出现在您的数据库中，请查看`db/seeds.rb`. 还有许多用于播种数据库数据的[gem 。](http://rubygems.org/search?utf8=%E2%9C%93&query=seed)

# javascript - arrayproxy emberjs 上的事件

> ID：10035623
> 
> 赞同：0
> 
> 时间：2012-04-05T20:36:07.550
> 
> 标签：javascript, ember.js

所以我有一个 ArrayProxy 类型的对象

```
var App = Ember.Application.create();
App.car = Ember.ArrayProxy.create({
  content:customers,
  edit:function(e){
    alert(e);
  }
}); 
```

在我的模板上，我有一个锚标签，点击时的动作编辑由把手设置为它

```
<a class="primary action" {{action "edit" on="click"}}>Edit</a> 
```

这不起作用，我认为这是因为我无法在 ArrayProxys 上设置事件......或者其他什么？任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:47:43.423

你可以为你的`action`助手添加一个目标：

```
<a class="primary action" {{action "edit" target="App.car"}}>Edit</a> 
```

并且`click`是默认事件，因此您可以删除`on`...

# javascript - Django：从 QueryDict 读取 JSON 对象数组

> ID：10035627
> 
> 赞同：12
> 
> 时间：2012-04-05T20:36:12.823
> 
> 标签：javascript, ajax, django, request, http-request

如何通过来自 JS 和服务器端的 AJAX 调用传递复合 JSON 结构，将其读取为 python 中“非常相似”的数据结构？

我知道可以使用 json 格式（simplejson 等），但我觉得 QueryDict 本身在我的情况下格式错误或重新格式化？

例子：

当通过 AJAX 将 JSON 对象数组 [{"id": 1},{"id": 2},{"id": 3}] 传递给 Django 视图时，QueryDict 被格式化为：

```
POST:<QueryDict: {u'json_data[0][id]': [u'1'], u'type': [u'clone'], 
u'csrfmiddlewaretoken': [u'69bb3c434ced31ab301ede04bf491ec0'], 
u'json_data[1][id]': [u'2'], u'json_data[2][id]': [u'3']}> 
```

我什至如何遍历 json_data？

我想得到这样的东西：

```
POST:<QueryDict: {u'json_data': [{u'id': [u'1']}, {u'id': [u'2']}, {u'id': [u'3']}]},
u'csrfmiddlewaretoken': [u'69bb3c434ced31ab301ede04bf491ec0'], u'type': [u'clone']> 
```

这样我就可以将 QueryDict 作为字典访问并将 json_data 作为列表检索并按特定顺序处理它：也许只是按顺序列表顺序遍历它们。就像是：

```
ret = request.POST
for item in ret['json_data']:
    process(item['id']) 
```

事实上，进入 process() 的值可能是另一个键值对字典，而不仅仅是一个数字（1、2、3 等）

**Javascript：**

```
var test = [{"id": 1},{"id": 2},{"id": 3}];
$.post(
    "/insert_tc",
    {
      json_data: test,
      "type": 'clone',
      "csrfmiddlewaretoken": $csrf_token
    },  
    function(json) {
        //CALLBACK
    },
    "json"
); 
```

**视图.py：**

```
def insert_tc(request):
    if request.method == 'POST':       
    ret = request.POST
    type = ret['type']
    list = ret.getlist(ret) 
```

但列表返回空 []

我尝试了 simplejson 转储、加载、项目、获取方法，但它们都没有帮助。

我什至尝试过 jQuery.param(obj, true)，但这不是我想要的（虽然有点接近）。

有没有不同/更好的方法通过 AJAX 来回传递复合数据结构 Django <-> JS？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-07T04:33:55.770

您应该使用 JSON.stringify() 对 JSON 进行字符串化。这会将 JSON 对象转换为字符串格式，以便在另一端正确解析。另一方面，您将需要使用 json.loads() 来“取消字符串化”对象。

**javascript**：

```
var test = [{"id": 1},{"id": 2},{"id": 3}];
$.post(
    "/insert_tc",
    {
      json_data: JSON.stringify(test),
      "type": 'clone',
      "csrfmiddlewaretoken": $csrf_token
    },  
    function(json) {
        //CALLBACK
    },
    "json"
); 
```

**查看**：

```
import json
def insert_tc(request):
    if request.method == 'POST':       
        ret = request.POST
        type = ret['type']
        list = json.loads(ret['json_data']) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-05T22:08:35.493

这实际上是 jQuery，而不是 Django，很奇怪。您的`test`变量不包含 JSON，而是实际的 JS 对象。jQuery，出于自己最熟悉的原因，在发布之前将其解析为一些非常奇怪的格式，因此您得到了结果。如果你这样做了（注意整个事情的引号）：

```
var test = '[{"id": 1},{"id": 2},{"id": 3}]'; 
```

你会发现你得到的 QueryDict 非常接近你所期望的：你唯一需要做的就是调用`json.loads(ret['json_data'])`.

还有一些我无法理解的原因。jQuery 不包含将对象数组转换为 JSON 的任何功能。您需要为此找到一个插件或单独的库。

# asp.net - 文件共享站点的文件存储格式

> ID：10035628
> 
> 赞同：0
> 
> 时间：2012-04-05T20:36:17.410
> 
> 标签：asp.net, file, filesystems, local-storage, data-storage

我在 ASP.NET MVC3 中实现一个文件共享系统。我想大多数文件共享站点以标准二进制格式将文件存储在服务器的文件系统上，对吧？

我有两种存储方式——文件系统或数据库中的二进制数据字段。

将文件（包括大文件）存储在数据库中而不是文件系统中是否有任何优势？

更多信息：

预期的平均文件大小为 800 MB。通常要求每分钟 3 个文件反馈给正在下载的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:17:39.830

如果文件这么大，那么使用文件系统几乎肯定是更好的选择。数据库旨在包含分组为小行的关系数据，并针对查询和比较这些关系中的值进行了优化。文件系统针对存储相当大的 blob 并按名称作为字节流调用它们进行了优化。

将这么大的文件放入数据库也会使管理数据库占用的空间变得困难。查询文件系统中使用的空间以及删除和替换数据的工具更好。

使用文件系统的唯一警告是，您的应用程序必须在具有写入用于存储这些文件的（部分）文件系统的必要权限的帐户下运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-18T18:32:38.053

在以下情况下使用 FileStream：

1.  正在存储的对象平均大于 1 MB。
2.  快速读取访问很重要。
3.  您正在开发将中间层用于应用程序逻辑的应用程序。

这是 MSDN 链接[https://msdn.microsoft.com/en-us/library/gg471497.aspx](https://msdn.microsoft.com/en-us/library/gg471497.aspx)

如何使用它：[https ://www.simple-talk.com/sql/learn-sql-server/an-introduction-to-sql-server-filestream/](https://www.simple-talk.com/sql/learn-sql-server/an-introduction-to-sql-server-filestream/)

# eclipse - 在 Eclipse 中跟踪 JRE 时如何观察变量？

> ID：10035631
> 
> 赞同：0
> 
> 时间：2012-04-05T20:36:21.420
> 
> 标签：eclipse, debugging, java, watch

发现在eclipse中跟踪**JRE源码**时，看不到变量值。有可能以某种方式看到它们吗？

**编辑**

答案是重建`rt.jar`。仅附加 JDK 源是不够的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:58:33.200

试试[how-do-i-view-and-debug-jdk-source-code-in-eclipse](http://www.avajava.com/tutorials/lessons/how-do-i-view-and-debug-jdk-source-code-in-eclipse.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:55:54.813

你的意思是调试java代码？如果是这样，如果您设置断点，调试器应该停在那里，您将看到当前上下文中的所有变量。您甚至可以将鼠标悬停在源代码上以查看值

# c# - 反序列化 IQueryable 表达式后“不支持对 SQL 的翻译”

> ID：10035633
> 
> 赞同：6
> 
> 时间：2012-04-05T20:36:43.510
> 
> 标签：c#, linq-to-sql, serialization, expression, iqueryable

我正在为 JSON.NET 创建一个能够序列化和反序列化表达式 (System.Linq.Expressions) 的 JsonConverter。我已经完成了最后 5% 左右的工作，并且在运行从反序列化表达式生成的 LINQ-to-SQL 查询时遇到了问题。

这是表达式：

```
Expression<Func<TestQuerySource, Bundle>> expression = db => (
    from b in db.Bundles
    join bi in db.BundleItems on b.ID equals bi.BundleID
    join p in db.Products on bi.ProductID equals p.ID
    group p by b).First().Key; 
```

这是 LINQ-to-SQL 中非常简单的分组查询。`TestQuerySource`是一个实现`System.Data.Linq.DataContext`。`Bundle`, `BundleItem`, `Product`, 都是用`TableAttribute`其他映射属性修饰的 LINQ-to-SQL 实体。它们对应的 datacontext 属性都是`Table<T>`正常的属性。换句话说，这里没有什么特别值得注意的。

但是，当我在反序列化表达式后尝试运行查询时，出现以下错误：

```
System.Reflection.TargetInvocationException:
Exception has been thrown by the target of an invocation. --->
    System.NotSupportedException: The member '<>f__AnonymousType0`2[Bundle,BundleItem].bi' has no supported translation to SQL. 
```

我了解这意味着表达式正在执行的操作无法通过 LINQ-to-SQL 查询提供程序转换为 SQL。似乎它与创建匿名类型作为查询的一部分有关，就像作为连接语句的一部分一样。通过比较原始表达式和反序列化表达式的字符串表示来支持这个假设：

***原始（工作）：***

```
{db => db.Bundles
.Join(db.BundleItems,
    b => b.ID,
    bi => bi.BundleID,
    (b, bi) => new <>f__AnonymousType0`2(b = b, bi = bi))
.Join(db.Products,
    <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.bi.ProductID,
    p => p.ID,
    (<>h__TransparentIdentifier0, p) =>
        new <>f__AnonymousType1`2(<>h__TransparentIdentifier0 = <>h__TransparentIdentifier0, p = p))
.GroupBy(<>h__TransparentIdentifier1 =>
    <>h__TransparentIdentifier1.<>h__TransparentIdentifier0.b,
    <>h__TransparentIdentifier1 => <>h__TransparentIdentifier1.p)
.First().Key} 
```

***反序列化（损坏）：***

```
{db => db.Bundles
.Join(db.BundleItems,
    b => b.ID,
    bi => bi.BundleID,
    (b, bi) => new <>f__AnonymousType0`2(b, bi))
.Join(db.Products,
    <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.bi.ProductID,
    p => p.ID,
    (<>h__TransparentIdentifier0, p) => new <>f__AnonymousType1`2(<>h__TransparentIdentifier0, p))
.GroupBy(<>h__TransparentIdentifier1 =>
    <>h__TransparentIdentifier1.<>h__TransparentIdentifier0.b,
    <>h__TransparentIdentifier1 => <>h__TransparentIdentifier1.p)
.First().Key} 
```

当需要访问匿名类型的非原始类型属性时，似乎会出现此问题。在这种情况下，`bi`正在访问该属性以获取 `BundleItem`' 的`ProductID`属性。

我无法弄清楚区别是什么 - 为什么访问原始表达式中的属性可以正常工作，但在反序列化表达式中却不行。

我猜这个问题与一些关于匿名类型在序列化过程中丢失的信息有关，但我不确定在哪里可以找到它，甚至不知道要寻找什么。

* * *

**其他示例：**

值得注意的是，像这样更简单的表达式可以正常工作：

```
Expression<Func<TestQuerySource, Category>> expression = db => db.Categories.First(); 
```

即使进行分组（不加入）也可以：

```
Expression<Func<TestQuerySource, Int32>> expression = db => db.Categories.GroupBy(c => c.ID).First().Key; 
```

简单的连接工作：

```
Expression<Func<TestQuerySource, Product>> expression = db => (
    from bi in db.BundleItems
    join p in db.Products on bi.ProductID equals p.ID
    select p).First(); 
```

选择匿名类型有效：

```
Expression<Func<TestQuerySource, dynamic>> expression = db => (
    from bi in db.BundleItems
    join p in db.Products on bi.ProductID equals p.ID
    select new { a = bi, b = p }).First(); 
```

这是最后一个示例的字符串表示形式：

***原来的：***

```
{db => db.BundleItems
.Join(db.Products,
    bi => bi.ProductID,
    p => p.ID,
    (bi, p) => new <>f__AnonymousType0`2(a = bi, b = p))
.First()} 
```

***反序列化：***

```
{db => db.BundleItems
.Join(db.Products,
    bi => bi.ProductID,
    p => p.ID,
   (bi, p) => new <>f__AnonymousType0`2(bi, p))
.First()} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:43:50.040

我认为不同之处在于，在工作示例中，匿名类型是使用属性构造的，而在损坏的情况下，它是使用构造函数实例化的。

L2S 假设在查询翻译期间，如果您为属性分配某个值，则该属性将仅返回该值。

L2S 不假设一个 ctor 参数名称 abc 将初始化一个名为 Abc 的属性。这里的想法是，一个 ctor 可以做任何事情，而一个属性只会存储一个值。

请记住，匿名类型与自定义 DTO 类没有什么不同（字面意思！L2S 无法区分它们）。

在您的示例中，您要么 a）不使用匿名类型（作品） b）仅在最终投影中使用 ctor（作品 - 一切都作为最终投影，甚至是任意方法调用。L2S 很棒。）或 c）使用查询的 sql 部分中的 ctor（已损坏）。这证实了我的理论。

尝试这个：

```
var query1 = someTable.Select(x => new CustomDTO(x.SomeString)).Where(x => x.SomeString != null).ToList();
var query2 = someTable.Select(x => new CustomDTO() { SomeString = x.SomeString }).Where(x => x.SomeString != null).ToList(); 
```

第二个可以，第一个不行。

* * *

*（丹尼尔更新）*

重构反序列化表达式时，请确保使用正确的`Expression.New`if 属性重载需要通过构造函数设置。要使用的正确重载是[`Expression.New(ConstructorInfo, IEnumerable<Expression>, IEnumerable<MemberInfo>)`](http://msdn.microsoft.com/en-us/library/bb549042.aspx)或[`Expression.New(ConstructorInfo, IEnumerable<Expression>, MemberInfo[])`](http://msdn.microsoft.com/en-us/library/bb534318.aspx)。如果使用其他重载之一，则参数将仅传递给构造函数，而不是分配给属性。

# c# - .NET - 可能的自定义类型？

> ID：10035638
> 
> 赞同：6
> 
> 时间：2012-04-05T20:36:51.010
> 
> 标签：c#, vb.net, delphi, types

在 Delphi 中，您可以执行以下操作：

```
TArray = array[1..3] of byte; 
```

然后你可以在哪里声明

```
T2Array = array[1..3] of TArray 
```

令人作呕...

.NET 中是否存在类似的东西？（VB，C＃，无论）

我目前正在做这样的事情

```
Private LotsOfData As ObservableCollection(Of ObservableCollection(Of myClass)) 
```

但想做

```
Private LotsOfData As ObservableCollection(Of myType) 
```

在哪里

```
myType -->  ObservableCollection(Of myClass) 
```

我知道你可以用结构来做到这一点，即：

```
Public Structure MyType
     Public myOc as ObservableCollection(Of MyClass)
End Structure

Dim LotsOfData as ObservableCollection(of MyType) 
```

但是您必须将其引用为（例如）

```
LotsOfData.Last.myOc(i) 
```

代替

```
LotsOfData.Last(i) 
```

这看起来很笨拙。这似乎也很笨拙：

```
For Each Data as ObservableCollection(of myClass) in LotsOfData
     DoSomething(Data)
Next 
```

一样

```
For Each Data as MyType in LotsOfData
     DoSomething(Data.myOc)
Next 
```

什么时候可以

```
For Each Data as MyType in LotsOfData
     DoSomething(Data)
Next 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T20:47:22.843

如何定义派生自通用集合的封闭类型的自定义类？例如：

```
public class MyType : ObservableCollection<MyClass>
{ } 
```

然后你可以创建另一个泛型集合，其类型参数是你上面定义的类（它本身就是一个集合）：

```
ObservableCollection<MyType> lotsOfData = new ObservableCollection<MyType>(); 
```

当你迭代它时，你会得到内部集合的序列：

```
foreach (ObservableCollection<MyClass> data in lotsOfData)
{
    DoSomething(data);
} 
```

**编辑**：如上所示的派生将允许您从基`ObservableCollection<T>`类继承所有可访问的成员，但您将无法调用其（非默认）构造函数。因此，您通常希望使用与基类相同的重载来实现构造函数：

```
public class MyType : ObservableCollection<MyClass>
{
    public MyType()
        : base()
    { }

    public MyType(IEnumerable<MyClass> collection)
        : base(collection)
    { }

    public MyType(List<MyClass> list)
        : base(list)
    { }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T20:42:53.177

看起来您正在尝试在代码中创建类型别名。VB.Net 确实以`Imports`指令的形式支持它

```
Imports myType = System.Collections.Generic.ObservableCollection(Of myClass)

...

Private LotsOfData As ObservableCollection(Of myType) 
```

请注意，`Imports`必须为您要使用的每个文件重复该指令`myType`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T21:06:18.747

您可以在 .Net Delphi 语言 Oxygene 中定义类型别名。与经典 Delphi 的语法相同。

```
type
  MyType = ObservableCollection<MyClass>; 
```

您可以使用`public`使名称在其他程序集中可见。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T20:42:29.850

从 IEnumerable 开始，其中 T 是您正在操作的类型。有许多实现，包括`List<T>`允许您轻松排序、推送和弹出元素。

例如...

```
var myListOfThings = new List<Thing>(); 
myListOfThings.Add(new Thing {Name = "Green thing" }); 
myListOfThings.Add(new Thing { Name = "Red thing" }); 
myListOfThings.Add(new Thing { Name = "Yellow thing" }); 
```

当使用 IEnumerable 时，您可以访问[LINQ](http://en.wikipedia.org/wiki/Language_Integrated_Query) ...

```
var redThing = myListOfThings.FirstOrDefault(x => x.Name == "Red Thing"); 
```

和简单的迭代......

```
foreach(var thing in myListOfThings)
{
     // do something
} 
```

注意：我没有任何 VB 示例，但您使用 C# 标记了问题，所以我希望这些有用。

# javascript - jquery怎么做翻转效果？

> ID：10035643
> 
> 赞同：6
> 
> 时间：2012-04-05T20:37:07.513
> 
> 标签：javascript, jquery, flip, jquery-effects

我试图模仿通常在您有面板的移动设备上发现的效果，当您单击一个按钮时，它会旋转，而在另一侧它有一些其他信息。

我发现了一些使用 css 转换的代码，[这是一个示例](http://jsfiddle.net/patrioticcow/ZV5XC/1/)

js

```
$('#signup').on('click', function(e) {
    e.preventDefault();
    document.getElementById( 'side-2' ).className = 'flip flip-side-1';
    document.getElementById( 'side-1' ).className = 'flip flip-side-2';

});

$('#create').on('click', function(e) {
    e.preventDefault();
    document.getElementById( 'side-2' ).className = 'flip';
    document.getElementById( 'side-1' ).className = 'flip';

}); 
```

这个例子的问题是，如果我将 javascript 转换为 jquery，它会停止工作：

从：

```
 document.getElementById( 'side-2' ).className = 'flip flip-side-1'; 
```

到

```
$( '#side-2' ).addClass('flip flip-side-1'); 
```

我也不确定是否还没有一个 jquery 插件可以更好地做到这一点。

有任何想法吗？

更多的代码。html

```
<div id="side-1" class="flip">
    <a id="signup" href="#">sign up</a>
</div>
<div id="side-2" class="flip">
    <a id="create" href="#">create</a>
</div> 
```

css

```
.flip {
    backface-visibility:             hidden;
        -moz-backface-visibility:    hidden;
        -ms-backface-visibility:     hidden;
        -o-backface-visibility:      hidden;
        -webkit-backface-visibility: hidden;
    border: 1px solid black;
    transform-origin:             50% 50% 0px;
        -moz-transform-origin:    50% 50% 0px;
        -ms-transform-origin:     50% 50% 0px;
        -o-transform-origin:      50% 50% 0px;
        -webkit-transform-origin: 50% 50% 0px;
    transition: all 1s;
        -moz-transition:    all 1s;
        -ms-transition:     all 1s;
        -o-transition:      all 1s;
        -webkit-transition: all 1s;
}

#side-1 {
    transform:             rotateY( 0deg );
        -moz-transform:    rotateY( 0deg );
        -ms-transform:     rotateY( 0deg );
        -o-transform:      rotateY( 0deg );
        -webkit-transform: rotateY( 0deg );
}

#side-2 {
    transform:             rotateY( 180deg );
        -moz-transform:    rotateY( 180deg );
        -ms-transform:     rotateY( 180deg );
        -o-transform:      rotateY( 180deg );
        -webkit-transform: rotateY( 180deg );
}

.flip-side-1 {    
    transform:             rotateY( 0deg ) !important;
        -moz-transform:    rotateY( 0deg ) !important;
        -ms-transform:     rotateY( 0deg ) !important;
        -o-transform:      rotateY( 0deg ) !important;
        -webkit-transform: rotateY( 0deg ) !important;
}

.flip-side-2 {
    transform:             rotateY( 180deg ) !important;
        -moz-transform:    rotateY( 180deg ) !important;
        -ms-transform:     rotateY( 180deg ) !important;
        -o-transform:      rotateY( 180deg ) !important;
        -webkit-transform: rotateY( 180deg ) !important;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T20:39:21.910

[http://lab.smashup.it/flip/](http://lab.smashup.it/flip/)是我为此找到的最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:48:31.007

使用 CSS 变换的好处是它会运行得更快，并且（一旦你不需要将所有样式放在五次中）它会非常优雅。缺点是它根本无法在某些浏览器上运行（即不支持 CSS 转换的旧浏览器）。

就个人而言，我会使用 CSS 转换。随着年龄的增长，您的代码在移动设备上看起来会更好，而不是更糟。

我会大胆猜测您的 jQuery“翻译”失败的原因是现有类没有被翻译后的代码删除，但它们是由纯 JavaScript 删除的，所以：

$('#side-2').removeClass().addClass(' ... ');

如果您查看 jQuery 选项——它们隐藏 div 的内容，然后旋转一个彩色矩形，然后重新填充 div。CSS 方法在起作用时，*实际上是*起作用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T20:45:09.310

关于当前代码。它没有按您希望的方式工作的原因仅仅是因为在类之间切换时它没有使用任何动画。您可以为此使用 jQuery UI。

此处显示：http: [//jqueryui.com/docs/switchClass/](http://jqueryui.com/docs/switchClass/)

# antlr - Antlr 句法谓词 - 不匹配的字符

> ID：10035649
> 
> 赞同：0
> 
> 时间：2012-04-05T20:37:23.027
> 
> 标签：antlr, antlr3

我有以下语法：

```
SPACE : (' '|'\t'|'\n'|'\r')+ {$channel = HIDDEN;};
NAME_TAG : 'name';
IS_TAG : 'is';

START : 'START';
END : ('END START') => 'END START'  ;

WORD    : 'A'..'Z'+;

rule :  START NAME_TAG IS_TAG WORD END; 
```

并想要解析语言，例如：“START name is END END START”。这里的问题是 END 标记，因为 'END ' (Word + SPACE) 被误解了。我认为这里的正确方法是使用句法谓词（END-token），但也许我错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:56:52.837

我不会创建`WORD`由空格分隔的 2 个（或更多）的标记。为什么不标记`'END'`为和`END`-token 然后做这样的事情：

```
rule     : START NAME_TAG IS_TAG word END START;
word     : WORD | END; // expand this rule, as you see fit
NAME_TAG : 'name';
IS_TAG   : 'is';
START    : 'START';
END      : 'END';
WORD     : 'A'..'Z'+;
SPACE    : (' '|'\t'|'\n'|'\r')+ {$channel = HIDDEN;}; 
```

这将解析`"START name is END END START"`为以下解析树：

![在此处输入图像描述](../Images/b8a8ef799011e209e65a620db3176944.png)

## 编辑

如果谓词失败，您做错的是*不*给词法分析器规则恢复的可能性。这是谓词的正确用法：

```
rule     :  START NAME_TAG IS_TAG WORD END;

SPACE    : (' '|'\t'|'\n'|'\r')+ {$channel = HIDDEN;};
NAME_TAG : 'name';
IS_TAG   : 'is';
START    : 'START';
WORD     : ('END START')=> 'END START' {$type=END;}
         | 'A'..'Z'+
         ;

fragment END : ; 
```

# c++ - 将我的应用程序与内核连接的最佳方式是什么？

> ID：10035653
> 
> 赞同：0
> 
> 时间：2012-04-05T20:37:35.023
> 
> 标签：c++, windows, winapi, kernel

我知道这个问题可以通过谷歌搜索来回答。但是我花了几个晚上来寻找尝试让我的应用程序与我的编程驱动程序连接。当我开始搜索时，我阅读了一些关于如何在用户模式和内核模式之间共享信息的技术，这些技术是：

• I/O 请求

• 同步和通知

• 共享句柄

• 共享内存

本[白皮书](https://web.archive.org/web/20110401190309/http://msdn.microsoft.com/en-us/windows/hardware/gg487414)解释了这些技术。但是我很迷茫！！！哪种技术最好？？？对于 I/O 请求：嗯......，我不完全理解它，但我（简要地）知道它会在应用程序请求 I/O 操作时交换数据，这篇[msdn 文章](http://msdn.microsoft.com/en-us/library/windows/hardware/ff543023%28v=vs.85%29.aspx)解释了 I/O 控制代码.

我已经阅读了许多复杂的文章，但我不知道引导我找到正确方法的道路，以使我的程序快速运行，而不会延迟与驱动程序交换数据。

所以，我问：**将我的应用程序与内核连接的最佳方式是什么？** 我的意思是**“最好的方式”**。这是我的驱动程序代码：

```
#include <ntddk.h>

VOID
Unload(
    IN PDRIVER_OBJECT DriverObject
)
{
    DbgPrint("Driver Unloaded");
};

NTSTATUS
DriverEntry(
    IN PDRIVER_OBJECT DriverObject,
    IN PUNICODE_STRING RegistryPathName
)
{
    DbgPrint("Driver Loaded");
    DriverObject->DriverUnload = Unload;
    return STATUS_SUCCESS;
}; 
```

如您所见，驱动程序很简单。除了加载时输出“Driver loaded”和卸载时输出“Driver unloaded”之外什么都不做。我只想让这个驱动程序能够从用户那里接收并打印它，让程序从驱动程序接收并打印它。我不想编写代码，我只想得到你的指导：我必须做什么？最好的方法是什么？

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:22:37.967

最简单的方法是使用在 DriverEntry 中创建符号链接`IoCreateSymbolicLink`

然后从用户模式程序调用`CreateFile`符号链接的名称并使用`ReadFile`/`WriteFile`或`DeviceIoControl`向/从驱动程序发送/接收数据。

对于`ReadFile`/`WriteFile`选项，您需要在驱动程序中实现`IRP_MJ_READ`/`IRP_MJ_WRITE`处理。

因为`DeviceIoControl`你需要处理`IRP_MJ_DEVICE_CONTROL`.

这是一篇很好的[文章](http://www.codeproject.com/Articles/9504/Driver-Development-Part-1-Introduction-to-Drivers)，演示了这种技术，带有内核和用户模式的示例代码。我从中复制了与您的问题相关的主要部分：

```
//how to create symbolic link

NTSTATUS DriverEntry(PDRIVER_OBJECT  pDriverObject, PUNICODE_STRING  pRegistryPath)
{
    UNICODE_STRING usDriverName, usDosDeviceName;

    RtlInitUnicodeString(&usDriverName, L"\\Device\\Example");
    RtlInitUnicodeString(&usDosDeviceName, L"\\DosDevices\\Example"); 

    IoCreateDevice(pDriverObject, 0, &usDriverName, FILE_DEVICE_UNKNOWN, FILE_DEVICE_SECURE_OPEN, FALSE, &pDeviceObject);

    IoCreateSymbolicLink(&usDosDeviceName, &usDriverName);
}

//How to use from user mode
int main()
{

    hFile = CreateFile("\\\\.\\Example", GENERIC_READ | GENERIC_WRITE, 0, NULL, OPEN_EXISTING, 0, NULL);

   //use ReadFile, WriteFile, or DeviceioControl here

    return 0;
} 
```

# c++ - 继承和友谊访问。C++

> ID：10035655
> 
> 赞同：7
> 
> 时间：2012-04-05T20:37:39.663
> 
> 标签：c++, inheritance, friend, access-control

我有以下查询；

```
classB inherits from classA 
classC is friend of classB 
```

这是否意味着 classC 应该能够访问 classA 的受保护成员？既然classB从classA继承了这个，那么classC可以访问classB中的所有东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T20:40:37.047

[我原来的回答是胡说八道。对此表示歉意。感谢@celtschk 指出这一点并提供更好的答案。]

如果`C`是 的朋友`B`，它可以访问 的所有`B`成员，无论是私有的、公共的还是受保护的，并且包括作为基础子对象一部分的可访问（公共和受保护）成员：

```
struct A { protected: int a; };
struct B : A { private: int b; friend struct C; }

struct C
{
    B x;
    A w;

    void f()
    {
        x.a = 1; // fine
        x.b = 2; // fine

        // w.a = 0; /* Error, #1 */
    }

    friend struct D; // see below
}; 
```

然而，友谊既不是传递的也不是继承的：`C`是 的朋友`B`，但不是`A`（见#1）的朋友。此外，如果`D`是 的朋友`C`，则`D`无法获得`C`的友谊`B`提供的任何访问权限，因此`D`无法访问`B`的非公共成员。同样，如果`struct E : C`继承自`C`，则 then`E`也不是`B`自动的朋友：

```
struct D
{
     B y;
     void g()
     {
         // y.b = 3; /* Error! */
     }
};

struct E : C
{
     B z;
     void h()
     {
         // y.b = 4; /* Error! */
     }
} 
```

或许可以从以下几点总结发生的事情：

*   派生类可以访问每个基类的所有公共和受保护成员。

*   一个类的朋友可以访问该类的所有可访问的成员（即除私有基成员之外的所有成员）。

*   友谊不是继承的：如果一个类有一个朋友，那么这种友谊不适用于它的任何基类，也不适用于它的任何派生类。

*   朋友的朋友不是朋友。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-05T20:47:00.120

这意味着`classC`应该能够访问受保护的`classA`子对象部分`classB`。它*不*应该能够从自己访问任何非公开的东西`classA`。

例如：

```
class C;

class A
{
protected:
  int i;
};

class B:
  public A
{
  friend class C;
};

class C
{
public:
  void foo(A& a, B& b)
  {
    // a.i = 3; // not allowed
    b.i = 3; // allowed, accesses the `i` of the `A` subobject of `B`
  }
}; 
```

# ruby-on-rails - 创建链接以订阅产品？

> ID：10035670
> 
> 赞同：0
> 
> 时间：2012-04-05T20:38:54.137
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要帮助来确定如何为我创建一个链接`Product`，使用户能够订阅它。我首先有我的`Subscription`模型：

```
class Subscription < ActiveRecord::Base
  attr_accessible :subscribable_id
  belongs_to :subscriber, :class_name => "User"
  belongs_to :subscribable, :polymorphic => true
end 
```

然后我的`Product`模型：

```
class Product < ActiveRecord::Base
  attr_accessible :name, :price
  belongs_to :user
  has_many :subscriptions, :as => :subscribable
end 
```

我的计划是制作我的视图，类似于`DELETE`单击以订阅产品的链接的方法。这是我的路线，控制器然后查看：

```
resources :products do
    post :subscribe_product, :on => :collection
end 
```

产品控制器：

```
def subscribe_product
  @product = Product.find(params[:id])
  # Not sure what goes here next? 
  # Something like: user.subscriptions.create(:subscribable => product)
end 
```

看法：

```
<table>
 <% for product in @products %>
  <tbody>
   <tr>
    <td><%= product.name %></td>
    <td><%= product.price %></td>
    <td><%= link_to 'Delete', product, :confirm => 'Are you sure?', :method => :delete %></td>
    <td><%= link_to 'Subscribe', :controller => "products", :action => "subscribe_product", :id => product.id %></td>
   </tr>
  </tbody>
 <% end %>
</table> 
```

现在这给出了一个奇怪的错误：

```
ActiveRecord::RecordNotFound in ProductsController#show

Couldn't find Product with id=subscribe_product 
```

他们的两件事，

1.  创建订阅方法。
2.  使链接正确。

我该怎么做这两个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:46:29.153

默认情况下，link_to 使用 GET，因此您的路由器认为您正在尝试转到 ProductsController#show，第一个参数是 ID

```
http://yoursite.com/products/subscribe_product/5 
```

这是对产品控制器的获取请求，其 id 参数为 subscribe_product。

如果您将 :method => :post 传递给您的 link_to 助手，它将发出一个发布请求，这正是您的路由器所期望的。

```
<%= link_to 'Subscribe', :controller => "products", :action => "subscribe_product", :id => product.id, :method => :post %> 
```

如果不发布您的用户模型，我无法确定，但该方法将如下所示：

```
@product.subscriptions.create(:user_id => user.id)
# user.id would be current_user.id, or whatever you are storing the current user as 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:49:37.810

您的`subscribe_product`路径使用 POST，因此您需要更改链接以使用该方法：

```
<%= link_to 'Subscribe', {:controller => "products", :action => "subscribe_product", :id => product.id}, :method => :post %> 
```

您的操作可能如下所示：

```
@product.subscriptions << Subscription.new(:user_id => current_user.id) 
```

# c++ - shared_ptr 的容器，但使用原始指针进行迭代

> ID：10035671
> 
> 赞同：6
> 
> 时间：2012-04-05T20:38:58.433
> 
> 标签：c++, iterator

我有一个类，它包含一个包含`boost::shared_ptrs`另一个类的对象的列表。

允许访问列表中元素的类成员函数返回原始指针。为了保持一致性，我还希望能够使用原始指针而不是 shared_ptrs 进行迭代。因此，当我取消引用列表迭代器时，我想获取原始指针，而不是`shared_ptr`.

我假设我需要为此编写一个自定义迭代器。这个对吗？如果是这样，有人可以指出我正确的方向 - 我以前从未这样做过。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T21:39:20.153

这是使用[Boost transform_iterator](http://www.boost.org/doc/libs/release/libs/iterator/doc/transform_iterator.html)的选项：

```
#include <list>
#include <boost/iterator/transform_iterator.hpp>
#include <tr1/memory>
#include <tr1/functional>

using std::list;
using std::tr1::shared_ptr;
using boost::transform_iterator;
using boost::make_transform_iterator;
using std::tr1::mem_fn;
using std::tr1::function;

struct Foo {};

struct Bar
{
  typedef shared_ptr< Foo > Ptr;
  typedef list< Ptr > List;
  typedef function< Foo* (Ptr) > Functor;
  typedef transform_iterator< Functor, List::iterator > Iterator;

  Iterator begin()
  {
    return make_transform_iterator( fooptrs.begin(), mem_fn( &Ptr::get ) );
  }

  Iterator end()
  {
    return make_transform_iterator( fooptrs.end(), mem_fn( &Ptr::get ) );
  }

  List fooptrs;
}; 
```

C++11 可以很容易地消除`function`包装器，但我没有方便的编译器来测试它。`Iterator`如果您看到需要，您还可以隐藏使用类型擦除的具体类型（我认为 Adob `any_iterator`​​e 为此提供了免费的类模板。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T23:24:04.553

我有时会看到人们使用 STL 容器，`boost::shared_ptr`但实际上不太明显且相对鲜为人知的容器`boost::ptr_container`可能是更好的选择。

这可能是也可能不是其中一种情况，但考虑到`ptr_container`类的一个很好的属性是它们的迭代器有[一个“额外的”间接](http://www.boost.org/libs/ptr_container/doc/tutorial.html#indirected-interface)性，这有助于保持事情的清洁和安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-29T22:01:27.653

‍♀️ ...僵尸线程...

如果您不能使用 Boost（例如，它是您的公共界面的一部分，并且您不想对您的用户提出要求），您可以相对轻松地推出自己的。对于一个容器`my_container`——它可能是一个标准、boost、任何容器的前端，但它的实际实现隐藏在你的实现文件中并且不暴露给你的 API——持有任何指向类的智能指针`my_type`，它会是这样的：

```
class iterator
{
public:
    ~iterator();

    iterator( const iterator& other );
    iterator& operator=( const iterator& other );

    // The standard iterator traits (names must be lower-case)
    typedef std::forward_iterator_tag iterator_category;
    typedef my_type*                  value_type;
    typedef std::ptrdiff_t            difference_type;
    typedef value_type*               pointer;
    typedef value_type                reference;

    iterator& operator++();
    iterator& operator++( int );
    reference operator*() const;

    friend bool operator==( const iterator& it1, const iterator& it2 );
    friend bool operator!=( const iterator& it1, const iterator& it2 );

private:
    // Private, type-erased construction
    friend class my_container;
    explicit iterator( void* );

    // Implementation hidden by pimpl
    struct impl;
    impl* _impl;
}; 
```

在 cpp 文件中，假设我们在后台使用 a `vector`of `shared_ptr`：

```
// Define the Pimpl struct
struct iterator::impl
{
    typedef std::vector< std::shared_ptr<my_type> >::iterator iterator;
    iterator iter;
};

// Use void* as type erasure to hide the actual types from the user
iterator::iterator( void* wrappedIter )
    : _impl( new impl( *reinterpret_cast<impl::iterator*>( wrappedIter ) ) )
{
}

// Copying
iterator::iterator( const iterator& other )
    : _impl( new impl( *other._impl ) )
{}

iterator& iterator::operator=( const iterator& other )
{
    _impl->iter = other._impl->iter;
    return *this;
}

// ... could implement moving too ...

iterator::~iterator() 
{
    // Destroy the pimpl
    delete _impl;
}

iterator& iterator::operator++()
{
    ++_impl->iter;
    return *this;
}

iterator& iterator::operator++( int )
{
    ++_impl->iter;
    return *this;
}

iterator::reference iterator::operator*() const
{
    // This is where the magic happens: We convert the shared_ptr to a raw pointer.
    return _impl->iter->second.get();
}

bool operator==( const iterator& it1, const iterator& it2 )
{
    return *it1 == *it2;
}

bool operator!=( const iterator& it1, const iterator& it2 ) 
{ 
    return !( it1 == it2 ); 
} 
```

那么您所需要的只是一种创建这些的方法。为此，`my_container`/`begin()`函数`end()`看起来像：

```
my_container::iterator my_container::begin()
{
    // The & allows our type erasure by invoking our void* constructor
    auto iter = _data->vector.begin();
    return iterator( &iter );
}

my_container::iterator my_container::end()
{
    // The & allows our type erasure by invoking our void* constructor
    auto iter = _data->vector.end();
    return iterator( &iter );
} 
```

这种类型擦除和获取成员变量的地址看起来有点冒险，但没关系，因为我们会立即重新解释`void*`和取消引用并复制它。

# android - Android 项目中的错误（在 Eclipse 中）无缘无故

> ID：10035682
> 
> 赞同：-1
> 
> 时间：2012-04-05T20:39:29.843
> 
> 标签：android

我对 Eclipse 中的 Android 项目有疑问。

我正在使用 Mac OS Lion，当我继续一个 Android 项目时，它在项目图标上给了我一个错误。此外，当我去查看错误时，Eclipse 并没有在代码中的任何地方给我一个错误。

我能做些什么来解决这个问题？有什么建议么？谢谢！

* * *

经过大量工作，我现在遇到了这个问题：

Eclipse 它在类首选项活动的覆盖方法上给了我错误。例如下面的代码：

```
@Override
public boolean onPreferenceClick(Preference preference) {

            // TODO Auto-generated method stub
            AlertDialog.Builder builder = new AlertDialog.Builder(view.getContext());

            builder.setNeutralButton("Cancel", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {

                    // Show something if does not exit the app
                    dialog.dismiss();
                }
            });
} 
```

我收到错误：*new Preference.OnPreferenceClickListener(){} 类型的方法 onPreferenceClick(Preference) 必须覆盖超类方法*

此问题仅在 Mac OS X Lion 上存在。我不知道问题出在哪里。所有工具均已安装。

另一方面，在 Windows 上就好了。

你知道现在问题出在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T04:33:26.810

1.  尝试做一个`Project --> Clean`，看看是否有帮助。也重新启动 Eclipse。

2.  确保您已在 Android SDK 管理器中安装了所有必要的 SDK/API。也许它在您的 Windows 机器上运行而不是在您的 Mac 上运行的原因是因为您的 Mac 没有安装必要的 SDK 来确保您的应用程序编译/构建。

另外，请发布 Eclipse 给您的错误...如果您希望其他人帮助您解决问题，我建议您提高问题的质量:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:49:48.200

常见的原因是项目中的错误。重新检查所有 jar 的引用和 android-sdk 的路径

# wpf - 在哪里可以找到鼠标指针的图标？

> ID：10035684
> 
> 赞同：0
> 
> 时间：2012-04-05T20:39:39.887
> 
> 标签：wpf, icons

我希望我的 WPF 应用程序有一个 ToggleButton，其中包含鼠标指针的图像。这个想法是，用户将通过单击 ToggleButton 来选择三种不同的光标之一（普通鼠标光标、手形光标和“缩放”光标）。我希望光标图像显示在 ToggleButton 上。

如何将这些图标放在我的按钮上？

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:52:50.180

如果只有三个选项，为什么不搜索三个图像，然后在 30 秒左右检查鼠标，并在需要时调整按钮。

# c++ - 将版本设置为 SQLite 数据库文件

> ID：10035686
> 
> 赞同：0
> 
> 时间：2012-04-05T20:39:53.697
> 
> 标签：c++, sqlite, qxorm

我有一个 C++ 应用程序，它通过 QxOrm 将数据存储在数据库 (SQLite) 中。

很明显，在下一个版本中，列将被添加/删除/重命名，所以我想为每个创建的数据库设置一个版本号，这样当有人尝试加载数据库时，它会将其版本与当前版本进行比较应用程序并自动添加/删除/重命名列以匹配当前架构。

我在 QxOrm 文档中找不到类似的内容：

```
qx::QxSqlDatabase::getSingleton()->setVersion(2); 
```

那么首先可以用 SQLite 做那种事情吗？如果不是，我应该只创建一个保存数据库版本的表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:49:33.590

数据库版本可能还不够：您应该为每个持久类存储一个版本（可能还有每个持久类的其他信息，例如列列表）。当您在 QxOrm 上下文中注册一个持久类时，您必须输入一个版本号：

```
QX_REGISTER_HPP_XXX(myClass, myBaseClass, myClassVersion) 
```

您可以在 QxOrm 库的常见问题解答中找到有关创建 SQL 模式的一些信息： [http ://www.qxorm.com/qxorm_en/faq.html#faq_230](http://www.qxorm.com/qxorm_en/faq.html#faq_230)

使用 QxOrm 库的自省引擎，这很容易做到，更多关于自省引擎的细节在这里： [http ://www.qxorm.com/qxorm_en/faq.html#faq_190](http://www.qxorm.com/qxorm_en/faq.html#faq_190)

您应该在数据库中创建一个表来存储每个持久类的状态：您可以存储每个类的版本号、列列表等......然后比较两个版本的持久类以进行修改将非常容易您的 SQL 架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T18:41:59.170

现在，您有 QxEntityEditor 应用程序来管理您的数据库模式演变。QxEntityEditor 是 QxOrm 库的多平台和跨数据库图形编辑器。此处提供了 QxEntityEditor 功能的视频演示：[http ://www.qxorm.com/qxorm_en/tutorial_4.html](http://www.qxorm.com/qxorm_en/tutorial_4.html)

# php - 替换谷歌地图？

> ID：10035687
> 
> 赞同：0
> 
> 时间：2012-04-05T20:40:03.620
> 
> 标签：php, javascript, html, google-maps

是否可以替换谷歌地图网络小程序使用的地图？我的意思是替换小程序从中检索地图的某个 URL。另外，它们是什么格式的？它们都只是图像（每个缩放级别一个）还是动态生成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T20:39:11.140

当然，您可以替换整个地图。Google 地图仅包含图像（jpg 和 png），它们的大小均为 256x256 像素（称为“图块”）。

在缩放级别 0（最低缩放级别，可以在一张地图上看到整个世界）时，只有一个图块包含整个地图。在下一个缩放级别上，此图块被分为 4 个子部分，形成下一个缩放级别。因此，在缩放级别 1 上，您有 4 个图块，依此类推..

通常，每个缩放级别的图块数量如下：

`number_of_tiles_per_zoom_level`= `4`^ `zoom_level`;

这意味着在缩放级别 21 上有 4398046511104 个图块：O

要用您自己的地图替换地图，您必须首先从地图中生成这些图块，然后您可以在谷歌地图中使用它们。

看看：[ImageMapTypes](https://developers.google.com/maps/documentation/javascript/maptypes?hl=de#ImageMapTypes)

这是使用此技术的示例：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/maptype-image](https://google-developers.appspot.com/maps/documentation/javascript/examples/maptype-image)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:55:03.310

对的，这是可能的。但是您需要以正确的方式进行操作：有 Google Maps API，自定义叠加层：[https ://developers.google.com/maps/documentation/javascript/overlays#GroundOverlays](https://developers.google.com/maps/documentation/javascript/overlays#GroundOverlays)

# android - 无法解决或不是字段错误android

> ID：10035699
> 
> 赞同：0
> 
> 时间：2012-04-05T20:40:41.277
> 
> 标签：android, resolve

我检查了 R.java 文件中存在的 id 仍然显示错误这里是 R.java 代码

```
public static final class drawable {
        public static final int background=0x7f020000;
        public static final int empty=0x7f020001;
    } 
```

在这里我收到错误

```
empty=BitmapFactory.decodeResource(getResources(), R.drawable.empty);//0x7f020001); 
```

如果我直接使用 R.java 文件中的值，那么它不会显示任何错误

我已经尝试过 Project->Clean and fix Project properties 并重新启动 eclipse 也都没有工作有人帮我解决这个问题

谢谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T21:01:52.587

我认为这可能是进口的问题。尝试检查您的班级的进口情况。有时 Eclipse 从 android 包中导入 R 类并停止使用你的。删除类似的导入`import android.R`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:46:20.960

每次构建项目时都会重新生成 R 类。您不能将 int nummers 保存在其他任何地方。您应该直接使用 R 类中的 int 值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T20:45:30.480

在类似的情况下，有人通过更新他的 sdk 解决了这个问题......不确定它是否有帮助。

# c++ - C++ map::find char * vs. char []

> ID：10035703
> 
> 赞同：5
> 
> 时间：2012-04-05T20:41:13.860
> 
> 标签：c++, map, std

我正在使用 C++ 映射在我的程序中实现字典。我的函数获取一个结构作为参数，并且应该返回基于`structure.name`成员的关联值 is `char named[32]`。以下代码演示了我的问题：

```
map <const char *, const char *> myMap;
myMap.insert(pair<const char *, const char *>("test", "myTest"));

char *p = "test";
char buf[5] = {'\0'};
strcpy(buf, "test");

cout << myMap.find(p)->second << endl; // WORKS
cout << myMap.find("test")->second << endl; // WORKS
cout << myMap.find(buf)->second << endl; // DOES NOT WORK 
```

我不确定为什么第三种情况不起作用，我应该怎么做才能使它起作用。我调试了上面的代码来观察传递的值，但我仍然无法解决问题。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T20:45:59.560

`map`定位元素将执行指针比较，而不是字符串比较。前两个有效，因为`"test"`是字符串文字并且将具有相同的地址。最后一个不起作用，因为`buf`它的地址与`"test"`.

要解决此问题，请使用 a`std::string`或为`char*`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T20:46:03.040

映射键是一个指针，而不是一个值。你所有的文字“测试”字符串共享存储，因为编译器很聪明，所以它们的指针是相同的，但是`buf`是不同的内存地址。

您需要使用具有值相等语义的映射键，例如`std::string`, 而不是`char*`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T20:55:50.273

就像提到的那样，您正在比较地址而不是值。我想链接这篇文章：

[c++ 中的字符串文字是在静态内存中创建的吗？](https://stackoverflow.com/questions/349025/is-a-string-literal-in-c-created-in-static-memory)

由于所有文字都具有相同的地址，这解释了为什么即使基础类型仍然是 a ，您对字符串文字的比较仍然有效`const char *`（但取决于编译器，它可能并不总是如此）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T20:57:30.220

这是因为通过 buf[5]，您正在分配 buf 指向的内存，但是当您使用“p”指针时，它指向的内存位置与 map 使用的内存位置相同。所以总是在键中使用 std::string 而不是指针变量。

# concurrency - 您如何在 ColdFusion 应用程序中使用 CFThread？

> ID：10035704
> 
> 赞同：3
> 
> 时间：2012-04-05T20:41:16.067
> 
> 标签：concurrency, coldfusion

今年我将介绍 ColdFusion 中的并发性`CFObjective`，我想听听您`CFThread`在 ColdFusion 应用程序中的使用情况。

此外，您在使用它时遇到了什么问题，以及您是如何（如果有的话）解决它们的？

你不喜欢什么`CFThread`？

您是否遇到过严重的弱点`CFThread`或其他问题，它根本无法完成您想做的事情？

最后，如果您想添加任何与 CF 中的并发相关的内容，而不是专门与 CF 相关的内容`CFThread`，请告知。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:54:33.463

我们有一个 pdf 生成系统，它需要填充数千个 PDF 表单，合并它们并将它们发送到打印系统。

我使用单独的线程来填充 pdf 表单。当所有线程都完成后，我将结果合并到单独的文档包批次中。

通过这种方式，我可以创建多个 PDF，而不是按顺序创建。

蒂姆坎宁安

# c# - 如何隐藏编辑页面

> ID：10035705
> 
> 赞同：0
> 
> 时间：2012-04-05T20:41:18.527
> 
> 标签：c#, asp.net, asp.net-mvc-3, asp.net-mvc-3-areas

嗨，人们正试图在 MVC3 C# 中隐藏编辑页面，因此当用户尝试在浏览器中输入“编辑”时，会出现某种形式的页面通知用户这是不允许的。

如果您需要更多信息，请询问

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:57:23.593

听起来您实际上并不想要专门处理编辑页面返回错误的东西。听起来您想要一种处理任何未捕获错误的全局方式。具体来说，如何处理 404 错误，即用户访问不存在的页面时发生的 AKA 错误。

有关想法，请参阅[http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/01/error-handling-and-customerrors-and-mvc3-oh-my.aspx](http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/01/error-handling-and-customerrors-and-mvc3-oh-my.aspx)，它包含有关如何处理 MVC3 中的 404 错误。

除非您创建了一个没有相应视图的操作，否则您不应该收到专门告诉您视图不存在的错误。鉴于没有编辑页面，如果您确实有编辑操作，我会删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:43:37.237

您可以将 [Authorize] 属性放在控制器操作方法上。

```
 [Authorize(Roles = "Admin, Super User")]
 public ActionResult Edit()
 {
     return View();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T21:19:46.177

我建议在您的配置文件中设置重定向。将以下内容添加到您的 web.config 文件中的 system.web 并将重定向路径更新为您想要重定向到的任何内容。

```
 <customErrors mode="On" defaultRedirect="Error">
      <error statusCode="302" redirect="Error/PageNotFound" />
      <error statusCode="404" redirect="Error/PageNotFound" />
      <error statusCode="403" redirect="Error/AuthorizationError" />
    </customErrors> 
```

# wordpress - 做一个wordpress更改密码页面？在不是管理员的模板上

> ID：10035706
> 
> 赞同：1
> 
> 时间：2012-04-05T20:41:19.463
> 
> 标签：wordpress

如何制作wordpress更改密码页面？我很确定它是可能的`wp_set_password`，但不确定如何最好地做到这一点。

基本上我需要在一个页面中复制 wp admin 中的更改密码表单，它是一个自定义的“我的帐户”类型的页面。

有人可以指点一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:58:34.460

学习如何做到这一点的最好方法是下载并研究这样的插件中的代码：[更改密码和电子邮件](http://wordpress.org/extend/plugins/change-password-e-mail/)或[主题我的登录](http://wordpress.org/extend/plugins/theme-my-login/)以了解使用了哪些 Wordpress 功能，基本上是编写自己的东西。甚至可能值得根据自己的喜好使用和/或修改这些插件。

# visual-studio-2010 - 如何防止 webconfig 在构建/运行时自动生成

> ID：10035715
> 
> 赞同：0
> 
> 时间：2012-04-05T20:42:10.927
> 
> 标签：visual-studio-2010

我继承了一个 Visual Studio 2010 mvc3 应用程序，并且每次构建和运行时都会生成 web.config。我需要更改连接字符串以测试其他数据库....阻止自动生成 web.config 的设置在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:49:15.063

为您的辅助数据库创建一个新配置，然后右键单击 Web.config 文件并选择“添加配置转换”。

然后使用此处的信息来调整备用配置中的连接字符串：

[http://msdn.microsoft.com/en-us/library/dd465326.aspx](http://msdn.microsoft.com/en-us/library/dd465326.aspx)

# android - Android：获取对膨胀视图的引用/为膨胀视图设置唯一 ID

> ID：10035720
> 
> 赞同：1
> 
> 时间：2012-04-05T20:42:31.060
> 
> 标签：android, layout, unique, inflate

我正在写一个投票应用程序。

我有一个 main_view.xml 和 poll_item_view.xml。main_view.xml 只是所有投票结果的容器，而 poll_item_view 是一个特定的投票结果。我在主视图中多次膨胀 poll_item_view.xml 以显示投票结果列表。

现在，当人们投票时，我需要定期刷新投票结果。我需要一种方法来引用我在 main_view 中膨胀的每个 poll_item。是否可以为每个投票项目设置一个唯一的 id，我以后可以使用它来获取对特定投票项目的引用。

谢谢，雅利安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:59:12.917

您可以使用[`View.setTag`](http://developer.android.com/reference/android/view/View.html#setTag%28java.lang.Object%29)和[`View.getTag`](http://developer.android.com/reference/android/view/View.html#getTag%28%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:53:23.773

如果你使用你的视图的 onClickListener 你有一个参考。到这个观点。如果您在外部更新项目，您可以使用索引和 getChildAt 方法。
也是用 ref 创建视图包装的好方法。到字段以便快速访问和更新

# php - 在窗口平台的 Apache 上使用 Exec()

> ID：10035721
> 
> 赞同：0
> 
> 时间：2012-04-05T20:42:34.093
> 
> 标签：php, android, apache, exec

我正在尝试使用 android 模拟器运行放置在我的服务器上的 exec。当我通过本地主机使用 exec() 命令时，命令工作正常（我没有更改任何权限）。但是当我使用 android 模拟器运行具有 exec 命令的相同 php 文件时， exec() 似乎没有任何建议？我如何使用来自 android 的 php 运行运行 exe。它是否能够和任何其他解决方案。

我正在使用 Windows 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:55:14.693

> 我如何使用来自 android 的 php 运行运行 exe。

Android 不是 Windows。Android 不运行“EXE”文件。

> 任何其他解决方案

您可以使用 Java 编写常规的 Android SDK 应用程序，而不使用 PHP。

或者，您可以使用 PhoneGap 等工具编写基于 HTML 的 Android SDK 应用程序，而不使用 PHP。

或者，您可以通过 SL4A 在 PHP 中编写简单的脚本，尽管这不是为作为服务器运行而设计的。

# android - Android中未加入线程的任何危险？

> ID：10035722
> 
> 赞同：2
> 
> 时间：2012-04-05T20:42:39.973
> 
> 标签：android, multithreading

我正在开发一个涉及一些线程的 Android SDK。我有一个操作可以创建并启动一个未引用的线程，如下所示：

```
new MySdkThread().start(); 
```

我必须绝对确定我没有创建任何类型的僵尸线程和/或内存泄漏。那么从它的`run()`方法返回的线程是否已死，因此如果它未被引用，它现在是否有资格被垃圾收集器回收，还是我必须加入它？我意识到这可能是一个非常明显的答案，但我还没有发现任何关于加入线程要求的绝对具体的内容，我想确定一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:44:13.827

> 从它的 run() 方法返回的线程是否已死亡，因此如果它未被引用，它现在是否有资格被垃圾收集器回收，还是我必须加入它？

不，你不必加入它。如果没有对该`Thread`对象的引用，那么它将被自动收集的垃圾回收，您根本不必担心它。那是标准的操作程序。

# parallel-processing - 任务并行库线程中止/中断

> ID：10035723
> 
> 赞同：1
> 
> 时间：2012-04-05T20:42:40.390
> 
> 标签：parallel-processing, task

考虑一个使用 sql server 数据库中的表来调度作业的大型应用程序，表中的每一行都标记有 queueID、methodName 和其他元数据。methodName 可以是本机 dot net 接口、旧版 com 本地接口、第 3 方 com 接口或第 3 方 Web 服务的 URI。

目前有一个处理每个 queueID 的 32 位后台 exe 家族。queueID 设置了每个作业可以运行多长时间的最大时间限制，如果超过时间限制，看门狗将终止进程。

我们希望将其移至 64 位环境并将多个后台 exe 进程合并到单个多线程 Windows 服务中。

问题是我们如何处理超过设定时间限制的工作终止。如果我们从单个 appDomain 主线程的任务并行库中为每个 queueID 分配一个任务，显然不能使用 net4.0 取消令牌，因为该线程可能运行 com 接口或第 3 方 Web 服务。如果 appDomain 看门狗任务调用 Thread.abort() 它可能会破坏整个 appDomain 并拆除所有任务线程我不清楚 Thread.Interrupt() 是否会在没有 appDomain 损坏的情况下可靠地取消线程。

那么有什么建议的技术来杀死一个超过时间限制的线程呢？

或者

我们是否只是让服务为每个 queueID 创建一个 AppDomain 然后执行 myAppDomain1.ExecuteAssembly("queueProcess.exe arg1") myAppDomain2.ExecuteAssembly("queueProcess.exe arg2") ...几乎与现在存在的拱门相同，但它是一个胜利控制 appDomains 和每个 queueProcess.exe 的服务，然后使用 tpl 线程池在每个 queueProcess.exe 的一组较小的池中运行作业，并且看门狗只执行 AppDomain？。当进程超过其时间时卸载限制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:05:44.650

您不能调用任意本机代码并使其干净地关闭。如果你杀死它的线程（如果你已经使用 CreateThread 启动了那个线程，这是可能的），你通常会泄漏内存、损坏数据、不释放锁、保持文件句柄打开等等。没有合作，这是行不通的。进程是处理这个问题的正确方法，因为它们可以随时被干净地杀死。

对于仅托管的任务，您可以安全地卸载 appdomain（ASP.NET 就是这样做的）。不要仅仅中止线程，因为它可能使全局结构处于不一致的状态。或者您可能会中止一个静态 ctor，这会使整个类永远无法使用（静态 ctor 不可重新启动）。

您可以有一个通用的主机进程，它通过命名管道获取其输入并运行您的任务。这样的过程可以是轻量级的。你可以随时杀死它。

# objective-c - 委托方法被忽略

> ID：10035728
> 
> 赞同：1
> 
> 时间：2012-04-05T20:43:15.813
> 
> 标签：objective-c, xcode, delegates

我知道堆栈上已经有一些关于此的问题，并且我已经全部解决了。

当我调试时，调用委托方法的代码行似乎被忽略了。这是行： `[_delegate insertDataLocation:dbLocation Time:dbTime Reminder:dbReminder];`

我假设这是代理设置不正确的问题，所以我是这样设置的：

**视图控制器.h**

```
@protocol mapDelegate;

@interface ViewController : UIViewController

@property (strong, nonatomic) id<mapDelegate> delegate; 
```

**视图控制器.m**

```
@synthesize delegate = _delegate;

- (void)viewDidLoad
{
[super viewDidLoad];
[self setDelegate:_delegate];
}

//Here's where I call the method, FYI
[_delegate insertDataLocation:dbLocation Time:dbTime Reminder:dbReminder]; 
```

**AppDelegate.h**

```
@protocol mapDelegate
-(void)insertDataLocation:(NSString*)l Time:(NSString*)t Reminder:(NSString*)r;
@end

@interface AppDelegate : UIResponder <UIApplicationDelegate, mapDelegate> 
```

**AppDelegate.m**

```
-(void)insertDataLocation:(NSString*)l Time:(NSString*)t Reminder:(NSString*)r {
//Here's my method's code
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:50:28.790

1) 去掉`id<mapDelegate> delegate;`.h 文件开头的声明。您已在 @synthesize 语句中将您的属性绑定到一个名为 _delegate 的变量，因此另一个具有误导性。

2）你说，“这就是我设置它的方式”，但我没有看到任何实际上将委托设置为某个对象的东西。

3）使用`self.delegate`而不是`_delegate`在普通方法中通常是一个更好的主意。

# php - Doctrine 和 Symfony2 多个多线程引用

> ID：10035733
> 
> 赞同：0
> 
> 时间：2012-04-05T20:43:55.543
> 
> 标签：php, orm, symfony, doctrine

这是我的问题。我的捆绑包中有几个实体。我正在尝试制作一个捆绑包来管理电影。但是，在某些情况下，演员也可以是导演，反之亦然。所以我把他们命名为“艺术家”。然后，在每部电影中，在电影实体中，我想指定一对“艺术家”作为导演，一对作为演员，一对作为剧本/作家。但是，我无法通过多对多关系多次引用 Artist 实体。这是我正在尝试做的事情：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="movies")
 */
class Movie
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string", length=100)
     */
    protected $title;

    /**
     * @ORM\Column(type="string", length=100)
     */
    protected $image;

    /**
     * @ORM\ManyToOne(targetEntity="Artist", inversedBy="movies")
     * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
     */
    protected $actors;

    /**
     * @ORM\ManyToOne(targetEntity="Artist", inversedBy="movies")
     * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
     */
    protected $directors;

    /**
     * @ORM\ManyToOne(targetEntity="Artist", inversedBy="movies")
     * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
     */
    protected $writers; 
```

我怎样才能避免这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:08:09.420

您可以使用另一个类来表示电影中人物的角色。

```
class MovieRole 
{

    // many-to-one with Movie
    protected $movie;

    // many-to-one with Artist
    protected $artist;

    // string, role of the artist
    protected $role;

} 
```

更新：

所以通过这种方式，你的实体变成这样：

电影：

```
class Movie 
{

    protected $id;

    protected $name;

} 
```

艺术家：

```
class Artist 
{

    protected $id;

    protected $name;

} 
```

艺术家实体和电影实体互不了解，`MovieRole`实体加入了两者。

当您将导演添加到电影中时，您会保留一个`MovieRole`实体，其中包含相关的电影实体、艺术家实体和“导演”作为角色。如果你想给一个艺术家另一个角色，`MovieRole`用相同的电影和艺术家坚持另一个实体，然后写下这个角色。或者，如果您想添加另一位导演，`MovieRole`请使用同一部电影保留另一个实体，将新导演和“导演”作为角色。

当要查找电影的导演时，查询`MovieRole`以电影和角色为参数的实体。或者，如果您想查找艺术家的所有角色，请查询`MovieRole`实体，以艺术家为参数。

# java - Java Regex 查看字符串是否包含 %s、%d、%n

> ID：10035734
> 
> 赞同：2
> 
> 时间：2012-04-05T20:43:59.560
> 
> 标签：java, regex, format

**所以**我正在编写我自己的`toString()`方法变体，基本上当您调用该方法时，您传入一个字符串，然后传入一个参数`toString(Object... args)`。像这样

```
this.toString("%8s", this.log, "%n%s %s", this.theMap, "%s", this.countIterator()); 
```

然后我使用下面的代码来查看传入的参数是常规字符串还是格式字符串。

```
if(args[i].getClass().getName() == "java.lang.String") {
  if(args[i].toString().contains("%\\-?[1-9]s?*")) {

    format = args[i].toString();

  } else {

    s += args[i].toString();

  }
} 
```

正`args[i].toString().contains("%\\-?[1-9]s?*")`则表达式不起作用，但是当我使用 `args[i].toString().matches("%\\-?[1-9]s?*")`它时，它仅适用于带有`%s`或`%9s`不带有`%s %9s`or的实例的 String 实例`%s%s %s`。当我`s`将正则表达式中的 替换为`d`or时，它也有效`n`。

我知道您在问为什么要重新发明轮子，只需使用`String.format()`，而我应该只是因为我有这个想法并且在解决它之前不能做任何其他事情。

我还尝试复制和粘贴`java.util.Formatter`班级的
`"%(\\d+\\$)?([-#+ 0,(\\<]*)?(\\d+)?(\\.\\d+)?([tT])?([a-zA-Z%])"`正则表达式，但它的作用与上面相同，并且仅适用于`%s`or `%9s`。

我还注意到，在 Formatter 类中，开发人员使用了 Matcher 类的一个实例和一个 Patern 类的实例，并使用一个 for 循环来运行 String 并匹配模式的每个实例并将其存储到 ArrayList 中。我真的不想这样做，我只是想看看 String 参数是否有一个`%n`or `%s`or实例，`%d`然后将其存储在一个 String 中，稍后将与`String.format(format, argument);`.

因此，如果有人可以帮助我，那就太棒了！
谢谢你读到这里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:49:21.290

尝试这个

```
Pattern p = Pattern.compile("(%[0-9]*(s|d|n))");
System.out.println("match: " + p.matcher(str).find()); 
```

您可以将模式存储为全局或静态变量，并在需要时重用它。

# python - 用于整数分区的优雅 Python 代码

> ID：10035752
> 
> 赞同：50
> 
> 时间：2012-04-05T20:45:38.327
> 
> 标签：python, algorithm

我尝试编写代码来解决标准整数分区问题（[维基百科](http://en.wikipedia.org/wiki/Partition_%28number_theory%29)）。我写的代码一团糟。我需要一个优雅的解决方案来解决这个问题，因为我想改进我的编码风格。这不是一个家庭作业问题。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2017-05-26T20:05:55.233

比 Nolen 的函数更小更快：

```
def partitions(n, I=1):
    yield (n,)
    for i in range(I, n//2 + 1):
        for p in partitions(n-i, i):
            yield (i,) + p 
```

让我们比较一下：

```
In [10]: %timeit -n 10 r0 = nolen(20)
1.37 s ± 28.7 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)

In [11]: %timeit -n 10 r1 = list(partitions(20))
979 µs ± 82.9 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)

In [13]: sorted(map(sorted, r0)) == sorted(map(sorted, r1))
Out[14]: True 
```

看起来它的速度快了 1370 倍`n = 20`。

无论如何，它仍然远离[`accel_asc`](http://jeromekelleher.net/generating-integer-partitions.html)：

```
def accel_asc(n):
    a = [0 for i in range(n + 1)]
    k = 1
    y = n - 1
    while k != 0:
        x = a[k - 1] + 1
        k -= 1
        while 2 * x <= y:
            a[k] = x
            y -= x
            k += 1
        l = k + 1
        while x <= y:
            a[k] = x
            a[l] = y
            yield a[:k + 2]
            x += 1
            y -= 1
        a[k] = x + y
        y = x + y - 1
        yield a[:k + 1] 
```

它不仅速度较慢，而且需要更多的内存（但显然更容易记住）：

```
In [18]: %timeit -n 5 r2 = list(accel_asc(50))
114 ms ± 1.04 ms per loop (mean ± std. dev. of 7 runs, 5 loops each)

In [19]: %timeit -n 5 r3 = list(partitions(50))
527 ms ± 8.86 ms per loop (mean ± std. dev. of 7 runs, 5 loops each)

In [24]: sorted(map(sorted, r2)) == sorted(map(sorted, r3))
Out[24]: True 
```

* * *

您可以在 ActiveState 上找到其他版本：[整数分区生成器（Python 食谱）](http://code.activestate.com/recipes/218332-generator-for-integer-partitions/)。

* * *

我使用 Python 3.6.1 和 IPython 6.0.0。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-04-05T22:16:12.383

**虽然这个答案很好，但我建议 skovorodkin 的答案如下：**

```
>>> def partition(number):
...     answer = set()
...     answer.add((number, ))
...     for x in range(1, number):
...         for y in partition(number - x):
...             answer.add(tuple(sorted((x, ) + y)))
...     return answer
... 
>>> partition(4)
set([(1, 3), (2, 2), (1, 1, 2), (1, 1, 1, 1), (4,)]) 
```

如果您希望所有排列（即 (1, 3) 和 (3, 1)) 更改`answer.add(tuple(sorted((x, ) + y))`为`answer.add((x, ) + y)`

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-07-26T17:15:05.477

我已经将该解决方案与[`perfplot`](https://github.com/nschloe/perfplot)（我为此目的的一个小项目）进行了比较，发现 Nolen 的最高投票答案也是最慢的。

[skovorodkin](https://stackoverflow.com/a/44209393/27678)提供的两个答案都*快得多*。（注意对数刻度。）

[![在此处输入图像描述](../Images/92cede7b346d4ea0e9015ee6d3b63aa7.png)](https://i.stack.imgur.com/BOO6K.png)

* * *

要生成绘图：

```
import perfplot
import collections

def nolen(number):
    answer = set()
    answer.add((number,))
    for x in range(1, number):
        for y in nolen(number - x):
            answer.add(tuple(sorted((x,) + y)))
    return answer

def skovorodkin(n):
    return set(skovorodkin_yield(n))

def skovorodkin_yield(n, I=1):
    yield (n,)
    for i in range(I, n // 2 + 1):
        for p in skovorodkin_yield(n - i, i):
            yield (i,) + p

def accel_asc(n):
    return set(accel_asc_yield(n))

def accel_asc_yield(n):
    a = [0 for i in range(n + 1)]
    k = 1
    y = n - 1
    while k != 0:
        x = a[k - 1] + 1
        k -= 1
        while 2 * x <= y:
            a[k] = x
            y -= x
            k += 1
        l = k + 1
        while x <= y:
            a[k] = x
            a[l] = y
            yield tuple(a[: k + 2])
            x += 1
            y -= 1
        a[k] = x + y
        y = x + y - 1
        yield tuple(a[: k + 1])

def mct(n):
    partitions_of = []
    partitions_of.append([()])
    partitions_of.append([(1,)])
    for num in range(2, n + 1):
        ptitions = set()
        for i in range(num):
            for partition in partitions_of[i]:
                ptitions.add(tuple(sorted((num - i,) + partition)))
        partitions_of.append(list(ptitions))
    return partitions_of[n]

perfplot.show(
    setup=lambda n: n,
    kernels=[nolen, mct, skovorodkin, accel_asc],
    n_range=range(1, 17),
    logy=True,
    # https://stackoverflow.com/a/7829388/353337
    equality_check=lambda a, b: collections.Counter(set(a))
    == collections.Counter(set(b)),
    xlabel="n",
) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-07-27T11:10:25.267

我需要解决一个*类似*的问题，即用排列将整数`n`划分为非负部分。`d`为此，有一个简单的递归解决方案（请参见[此处](https://stackoverflow.com/a/45348441/353337)）：

```
def partition(n, d, depth=0):
    if d == depth:
        return [[]]
    return [
        item + [i]
        for i in range(n+1)
        for item in partition(n-i, d, depth=depth+1)
        ]

# extend with n-sum(entries)
n = 5
d = 3
lst = [[n-sum(p)] + p for p in partition(n, d-1)]

print(lst) 
```

输出：

```
[
    [5, 0, 0], [4, 1, 0], [3, 2, 0], [2, 3, 0], [1, 4, 0],
    [0, 5, 0], [4, 0, 1], [3, 1, 1], [2, 2, 1], [1, 3, 1],
    [0, 4, 1], [3, 0, 2], [2, 1, 2], [1, 2, 2], [0, 3, 2],
    [2, 0, 3], [1, 1, 3], [0, 2, 3], [1, 0, 4], [0, 1, 4],
    [0, 0, 5]
] 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-06-20T18:16:38.283

比公认的响应快得多，而且看起来也不错。接受的响应多次执行许多相同的工作，因为它多次计算较低整数的分区。例如，当 n=22 时，差异为**12.7 seconds 与 0.0467 seconds**。

```
def partitions_dp(n):
    partitions_of = []
    partitions_of.append([()])
    partitions_of.append([(1,)])
    for num in range(2, n+1):
        ptitions = set()
        for i in range(num):
            for partition in partitions_of[i]:
                ptitions.add(tuple(sorted((num - i, ) + partition)))
        partitions_of.append(list(ptitions))
    return partitions_of[n] 
```

代码本质上是相同的，只是我们保存了较小整数的分区，因此我们不必一次又一次地计算它们。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-12-16T18:54:18.340

我玩游戏有点晚了，但我可以提供一个在某些意义上可能更优雅的贡献：

```
def partitions(n, m = None):
  """Partition n with a maximum part size of m. Yield non-increasing
  lists in decreasing lexicographic order. The default for m is
  effectively n, so the second argument is not needed to create the
  generator unless you do want to limit part sizes.
  """
  if m is None or m >= n: yield [n]
  for f in range(n-1 if (m is None or m >= n) else m, 0, -1):
    for p in partitions(n-f, f): yield [f] + p 
```

只有 3 行代码。按字典顺序生成它们。可选地允许施加最大零件尺寸。

对于具有给定数量的部分的分区，我也有上述变化：

```
def sized_partitions(n, k, m = None):
  """Partition n into k parts with a max part of m.
  Yield non-increasing lists.  m not needed to create generator.
  """
  if k == 1:
    yield [n]
    return
  for f in range(n-k+1 if (m is None or m > n-k+1) else m, (n-1)//k, -1): 
    for p in sized_partitions(n-f, k-1, f): yield [f] + p 
```

在编写完上述内容后，我遇到了一个大约 5 年前创建的解决方案，但我已经忘记了。除了最大零件尺寸外，这个还提供了附加功能，您可以施加最大长度（与特定长度相反）。FWIW：

```
def partitions(sum, max_val=100000, max_len=100000):
    """ generator of partitions of sum with limits on values and length """
    # Yields lists in decreasing lexicographical order. 
    # To get any length, omit 3rd arg.
    # To get all partitions, omit 2nd and 3rd args. 

    if sum <= max_val:       # Can start with a singleton.
        yield [sum]

    # Must have first*max_len >= sum; i.e. first >= sum/max_len.
    for first in range(min(sum-1, max_val), max(0, (sum-1)//max_len), -1):
        for p in partitions(sum-first, first, max_len-1):
            yield [first]+p 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-06-06T12:37:31.040

这是一个递归函数，它使用一个堆栈，我们在其中按升序存储分区的数量。它足够快且非常直观。

```
# get the partitions of an integer

Stack = []
def Partitions(remainder, start_number = 1):
    if remainder == 0:
        print(" + ".join(Stack))
    else:
        for nb_to_add in range(start_number, remainder+1):
            Stack.append(str(nb_to_add))
            Partitions(remainder - nb_to_add, nb_to_add)
            Stack.pop() 
```

当堆栈已满时（堆栈元素的总和对应于我们想要的分区数），我们打印它，删除它的最后一个值并测试要存储在堆栈中的下一个可能值。当所有下一个值都经过测试后，我们再次弹出堆栈的最后一个值并返回最后一个调用函数。这是一个输出示例（带有 8 个）：

```
Partitions(8)
1 + 1 + 1 + 1 + 1 + 1 + 1 + 1
1 + 1 + 1 + 1 + 1 + 1 + 2
1 + 1 + 1 + 1 + 1 + 3
1 + 1 + 1 + 1 + 2 + 2
1 + 1 + 1 + 1 + 4
1 + 1 + 1 + 2 + 3
1 + 1 + 1 + 5
1 + 1 + 2 + 2 + 2
1 + 1 + 2 + 4
1 + 1 + 3 + 3
1 + 1 + 6
1 + 2 + 2 + 3
1 + 2 + 5
1 + 3 + 4
1 + 7
2 + 2 + 2 + 2
2 + 2 + 4
2 + 3 + 3
2 + 6
3 + 5
4 + 4
8 
```

递归函数的结构很容易理解，如下图所示（对于整数 31）：

![](../Images/9145a1c96e9a54f2c37d50a141acda05.png "$$Pile=[\overset{\text{given by Partitions(31,1)}}{\overbrace{1,1,3,5,\underset{\text{given by Partitions(21,5)}}{ \underbrace{5,7,9}}}}]$$")

`remainder`对应于我们想要分区的剩余数字的值（上例中的 31 和 21）。 `start_number`对应分区的第一个数字，其默认值为1（上例中为1和5）。

如果我们想在列表中返回结果并获取分区数，我们可以这样做：

```
def Partitions2_main(nb):
    global counter, PartitionList, Stack
    counter, PartitionList, Stack = 0, [], []
    Partitions2(nb)
    return PartitionList, counter

def Partitions2(remainder, start_number = 1):
    global counter, PartitionList, Stack
    if remainder == 0:
        PartitionList.append(list(Stack))
        counter += 1
    else:
        for nb_to_add in range(start_number, remainder+1):
            Stack.append(nb_to_add)
            Partitions2(remainder - nb_to_add, nb_to_add)
            Stack.pop() 
```

最后，上面显示的函数的一大优点`Partitions`是它可以很容易地找到一个自然数的所有组合（两个组合可以有相同的一组数字，但在这种情况下顺序不同）：我们只需要删除变量并在循环`start_number`中将其设置为 1 。`for`

```
# get the compositions of an integer

Stack = []
def Compositions(remainder):
    if remainder == 0:
        print(" + ".join(Stack))
    else:
        for nb_to_add in range(1, remainder+1):
            Stack.append(str(nb_to_add))
            Compositions(remainder - nb_to_add)
            Stack.pop() 
```

输出示例：

```
Compositions(4)
1 + 1 + 1 + 1
1 + 1 + 2
1 + 2 + 1
1 + 3
2 + 1 + 1
2 + 2
3 + 1
4 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-04-28T17:47:11.527

我认为[这里](https://code.activestate.com/recipes/218332-generator-for-integer-partitions/?c=16490#c9)的食谱可能是优雅的。它简洁（20 行长）、快速且基于 Kelleher 和 O'Sullivan 的作品，其中引用了该作品：

```
def aP(n):
    """Generate partitions of n as ordered lists in ascending
    lexicographical order.

    This highly efficient routine is based on the delightful
    work of Kelleher and O'Sullivan.

    Examples
    ========

    >>> for i in aP(6): i
    ...
    [1, 1, 1, 1, 1, 1]
    [1, 1, 1, 1, 2]
    [1, 1, 1, 3]
    [1, 1, 2, 2]
    [1, 1, 4]
    [1, 2, 3]
    [1, 5]
    [2, 2, 2]
    [2, 4]
    [3, 3]
    [6]

    >>> for i in aP(0): i
    ...
    []

    References
    ==========

    .. [1] Generating Integer Partitions, [online],
        Available: http://jeromekelleher.net/generating-integer-partitions.html
    .. [2] Jerome Kelleher and Barry O'Sullivan, "Generating All
        Partitions: A Comparison Of Two Encodings", [online],
        Available: http://arxiv.org/pdf/0909.2331v2.pdf

    """
    # The list `a`'s leading elements contain the partition in which
    # y is the biggest element and x is either the same as y or the
    # 2nd largest element; v and w are adjacent element indices
    # to which x and y are being assigned, respectively.
    a = [1]*n
    y = -1
    v = n
    while v > 0:
        v -= 1
        x = a[v] + 1
        while y >= 2 * x:
            a[v] = x
            y -= x
            v += 1
        w = v + 1
        while x <= y:
            a[v] = x
            a[w] = y
            yield a[:w + 1]
            x += 1
            y -= 1
        a[v] = x + y
        y = a[v] - 1
        yield a[:w] 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-25T17:26:33.857

```
# -*- coding: utf-8 -*-
import timeit

ncache = 0
cache = {}

def partition(number):
    global cache, ncache
    answer = {(number,), }
    if number in cache:
        ncache += 1
        return cache[number]
    if number == 1:
        cache[number] = answer
        return answer
    for x in range(1, number):
        for y in partition(number - x):
            answer.add(tuple(sorted((x, ) + y)))
    cache[number] = answer
    return answer

print('To 5:')
for r in sorted(partition(5))[::-1]:
    print('\t' + ' + '.join(str(i) for i in r))

print(
    'Time: {}\nCache used:{}'.format(
        timeit.timeit(
            "print('To 30: {} possibilities'.format(len(partition(30))))",
            setup="from __main__ import partition",
            number=1
        ), ncache
    )
) 
```

或[https://gist.github.com/sxslex/dd15b13b28c40e695f1e227a200d1646](https://gist.github.com/sxslex/dd15b13b28c40e695f1e227a200d1646)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-05T20:55:29.837

我不知道我的代码是否最优雅，但出于研究目的，我不得不多次解决这个问题。如果你修改

```
sub_nums 
```

变量，您可以限制分区中使用的数字。

```
def make_partitions(number):
    out = []
    tmp = []
    sub_nums = range(1,number+1)
    for num in sub_nums:
        if num<=number:
            tmp.append([num])
        for elm in tmp:
            sum_elm = sum(elm)
            if sum_elm == number:
                out.append(elm)
            else:
                for num in sub_nums:
                    if sum_elm + num <= number:
                         L = [i for i in elm]
                         L.append(num)
                         tmp.append(L)
    return out 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-04-05T21:03:19.267

```
F(x,n) = \union_(i>=n) { {i}U g| g in F(x-i,i) } 
```

只需实现此递归。F(x,n) 是总和为 x 且其元素大于或等于 n 的所有集合的集合。

# php - PHP递归数组复制

> ID：10035754
> 
> 赞同：0
> 
> 时间：2012-04-05T20:45:55.520
> 
> 标签：php, arrays, recursion, multidimensional-array

我有一个多维数组数组（下面的源代码），其中我的键和值是任意字符串。我想创建一个新数组（下面需要），其中层次结构保持不变，但每个 KEY 都被重组为自己的数组，键本身成为“标题”值，并且任何子数组都在“孩子”下继续。

如何使用带有 &$source 和 &$destination 数组并相应地填充目标数组的递归函数来完成此操作？

源数组：

```
Array (
    [Alpha] => Array (
        [Red] => one
        [Blue] => two
    )
    [Bravo] => Array (
        [Blue] => three
    )
) 
```

所需数组：

```
Array (
    [0] => Array (
        [title] => Alpha
        [children] => Array (
                    [0] Array([title] => Red, [children]= > false)
                    [1] Array([title] => Blue, [children]= > false)
        )
    )
    [1] => Array (
        [title] => Bravo
                    [0] Array([title] => Blue, [children]= > false)
        )
    )
) 
```

注意：我不关心新数组中的最终节点/叶子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:50:21.957

您可以在不传递对目标数组的引用的情况下进行转换。

```
function convert_array($from){
    if(!is_array($from)){
        return false;
    }
    $to = array();
    foreach($from as $k=>$v){
        $to[] = array(
            'title' => $k,
            'children' => convert_array($v)
        );
    }
    return $to;
} 
```

[键盘示例](http://codepad.org/cdY8F6E1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-08T17:36:59.670

我已经递归地编程了数组。

```
$a = array(
    'Alpha' => array('Red' => 'one', 'Blue' => 'two'),
    'Bravo' => array('Blue' => 'three'));

function copyarray($datas){
    $arr = array();

            if(is_array($datas)){
                foreach($datas as $key => $val){
                    if(is_array($val)){
                    $arr[$key] = copyarray($val);
                    }else
                    $arr[$key]=$val;
                }
            }
            return $arr;
}

echo "<pre>";print_r(copyarray($a)); 
```

# python - 如何在 Python 生成的网页上显示标准输出？

> ID：10035761
> 
> 赞同：2
> 
> 时间：2012-04-05T20:46:15.423
> 
> 标签：python, python-2.7, iis-7

我正在编写一个 Web 应用程序，它将在本地 Windows 服务器上执行命令并需要显示输出。我代码中的 Popen() 调用在 Python 解释器上执行良好，但在通过 IIS 执行时会出现严重错误。谢谢！！！！

错误文字：

> 回溯（最近一次通话最后）：
> 
> 文件“C:\pythonapps\mystdout.py”，第 9 行，打印 Popen('ipconfig', shell=True, stdout=PIPE).communicate()[0]
> 
> 文件“C:\Python27\lib\subprocess.py”，第 672 行，在**init** errread, errwrite) = self._get_handles(stdin, stdout, stderr)
> 
> 文件“C:\Python27\lib\subprocess.py”，第 774 行，在 _get_handles p2cread = _subprocess.GetStdHandle(_subprocess.STD_INPUT_HANDLE)
> 
> WindowsError: [错误 6] 句柄无效

```
from subprocess import *

print "Content-type:text/html\r\n\r\n"
print "<html>"
print "<head>"
print "<title>FSPCT app</title>"
print "</head>"
print "<body>"
print Popen('ipconfig', shell=True, stdout=PIPE).communicate()[0]
print "</body>"
print "</html>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:18:12.947

看起来 IIS 服务器没有有效的标准输入文件句柄（这并不奇怪，因为它是一个服务器进程）。该`subprocess`模块正在尝试复制该标准输入文件句柄......但失败了。

要解决此问题，请`Popen`使用绑定到 NUL 文件的标准输入文件句柄（也可能是标准错误）调用您正在执行的子进程。（os.devnull 是 Python 2.7 中引用该文件的可移植方式。）所述 NUL 文件（或 Unix 下的 /dev/null）只是丢弃写入它的所有内容，并在读取时立即返回文件结尾。非常适合这个。

尝试像这样修改您的代码：

```
import os
...
with open(os.devnull, 'r+') as nul:
    print Popen('ipconfig', shell=True, stdin=nul, stdout=PIPE, stderr=nul).communicate()[0] 
```

（在即将到来的 Python 3.3 中，您现在可以将 subprocess.DEVNULL 传递给 Popen 的 stdin、stdout 或 stderr 参数，以更简洁地执行相同的操作。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T21:29:50.410

标准输入的默认[subprocess.Popen()](http://docs.python.org/library/subprocess.html#popen-constructor)值为`None`，它从父进程传递标准输入。

要使用内部标准输入，只需通过`stdin=PIPE`您的`Popen()`呼叫即可。

```
print Popen('ipconfig', shell=True, stdin=PIPE, stdout=PIPE).communicate()[0] 
```

# php - 如何获取锚类别的产品数量？

> ID：10035765
> 
> 赞同：0
> 
> 时间：2012-04-05T20:46:44.067
> 
> 标签：php, magento

此代码仅适用于非锚类别 - 如何获取锚类别的产品数量？

```
<div class="grid_16"><h1 class="highlight pageTitle"><?php echo $_helper->categoryAttribute($_category, $_category->getName(), 'name') ?>

        <span>
            (<?php echo $_category->getProductCount() ?>)
        </span>

    </h1></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T07:47:15.610

```
$prodCollection = Mage::getResourceModel('catalog/product_collection')->addCategoryFilter($category); 

var_dump($prodCollection->count()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T16:03:12.183

如此处所示：[magento 论坛](http://www.magentocommerce.com/boards/viewthread/44262/#t217659)

```
$category_object = Mage::getModel('catalog/category')->load( CATEGORY_ID ); // If you don't already have one
$total = Mage::getModel('catalog/layer')->setCurrentCategory( $category_object )->getProductCollection()->getSize() 
```

将显示正确的产品数量

# sql-server - 复杂的 SQL 查询返回不需要的结果

> ID：10035767
> 
> 赞同：1
> 
> 时间：2012-04-05T20:46:54.707
> 
> 标签：sql-server, tsql

我有 3 张桌子正在使用。

```
TableA, TableB, TableC 
```

TableA 包含客户的信息，每一行包含一个特定人员的所有信息。

TableB 包含 TableA 中的人创建的消息的信息。

```
ID  DistID  Subject Message CreatedDate StatusID    SentTotal
57  3   MonList MonList 2012-03-19 16:21:36.117 2   4 
```

表 C 包含有权访问表 B 中消息的人员的列表。

```
ID     MessageID    DistID  StatusID  Important  OriginalMessagelID
25111   58            516       1          0       NULL
25112   58            519       1          0       NULL
25114   58            374       1          0       NULL
25115   58            5545      1          0       NULL
25116   58            23435     1          0       NULL 
```

TableC MessageID 将与 TableB ID 相同。

TableB 和 TableC 的 DistID 将引用 TableA 中的 DistID（表 A 包括复制很多信息的方式，即使是单行，它也是 1 比 1 的比例，一个客户需要 1 行）。

我需要生成一个将这三个表链接在一起的查询。这是我到目前为止所拥有的：

```
SELECT *
FROM Distributor d
INNER JOIN Messages ms
    ON ms.DistID = d.DistID
INNER JOIN Message m
    ON m.DistID = d.DistID
WHERE ((d.DCLoginDate <= (GETDATE() - 3) OR d.DCLoginDate IS NULL) AND (CONVERT(VARCHAR(8), m.CreatedDate, 1)) = (CONVERT(VARCHAR(8), GETDATE(), 1))) 
```

现在 TableB 可以有同一个客户创建的多条消息，因此他们的 DistID 可以在此表中出现超过 1 次。

TableC 也是这样，DistID 可以在这个表中出现多次。

我开始进行有效的个别查询：

```
SELECT *
FROM Distributor
WHERE (DCLoginDate <= (GETDATE() - 3) OR DCLoginDate IS NULL)

SELECT *
FROM Message m
INNER JOIN Messages ms
    ON ms.MessageID = m.ID
WHERE ((CONVERT(VARCHAR(8), CreatedDate, 1)) = (CONVERT(VARCHAR(8), GETDATE(), 1))) 
```

以上工作正常，当我尝试将它们组合成一个语句时，它开始返回 0 结果，而我应该返回两个结果（来自我的实时数据，而不是上面提供的数据）。

任何人都知道如何让它有效地工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:52:38.013

您的连接条件在单个查询和单个查询之间是不同的……这又如何呢？

```
SELECT *
FROM Distributor d
INNER JOIN Messages ms
   ON ms.DistID = d.DistID
INNER JOIN Message m
   ON m.ID = ms.MessageID
WHERE 
   ((d.DCLoginDate <= (GETDATE() - 3) OR d.DCLoginDate IS NULL) AND 
   (CONVERT(VARCHAR(8), m.CreatedDate, 1)) = (CONVERT(VARCHAR(8), GETDATE(), 1))) 
```

# sql - 查询以在一天中的两个时间之间进行选择

> ID：10035769
> 
> 赞同：10
> 
> 时间：2012-04-05T20:47:04.020
> 
> 标签：sql, tsql, sql-server-2005

我正在尝试构建一个基于`DateTime`列进行选择的查询`SyncDate`。

作为一些背景，我查询的表每天都在同一时间每天导入数千个。我想找到在一天中的“常规”时间没有导入的条目。

因此，我想查询`DateTime`列中的时间在两次之间的位置：假设在任何一天/月/年期间的 14:00-14:30 (2-230)。

```
SELECT * FROM MyTable
WHERE DatePart(SyncDate, ..?) BETWEEN (14:00..?) and (14:30..?) 
```

该`DatePart`功能似乎是我需要的，但我不明白如何将其应用于这种情况。非常感谢您的帮助哦伟大的查询者。

编辑：我错了，我运行 SQL-Server-2005 作为我的后端。对不起！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-05T20:52:20.770

由于您使用的是 SQL Server **2008**，因此您可以使用新的`TIME`数据类型：

```
SELECT * FROM MyTable
WHERE CAST(SyncDate AS TIME) BETWEEN '14:00' and '14:30' 
```

如果您的后端还不是 2008 年 :-) 那么您需要类似的东西：

```
SELECT * FROM MyTable
WHERE DATEPART(HOUR, SyncDate) = 14 AND DATEPART(MINUTE, SyncDate) BETWEEN 0 AND 30 
```

检查 14:00-14:30 小时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T20:56:34.030

这个怎么样....

```
select * from MyTable where
cast(cast(datepart(HH,SyncDate) as char(2)) + cast(datepart(HH,SyncDate) as char(2)) as int) between 1400 and 1430 
```

# javascript - JS 窗口全局对象

> ID：10035771
> 
> 赞同：2
> 
> 时间：2012-04-05T20:47:09.433
> 
> 标签：javascript, object, window

我了解到窗口全局对象是顶级对象。他是包含 DOM、BOM 和 JS 的所有代码的“盒子”。

我了解到 window 对象代表浏览器中打开的窗口，并且 window 对象没有构造函数，这意味着我无法创建它的实例。

我了解到该对象是由浏览器自动创建的。我想问的是如何？

我的意思是如果它没有构造函数，那么浏览器就无法为该对象创建自己的实例。我在想浏览器必须能够以某种方式创建它，所以我的问题是浏览器是如何创建它的？如果有人能帮助我理解这一点，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:49:28.323

没有构造函数？

```
>> window.constructor
[object Window] 
```

好吧，你知道什么，一个构造函数！

那就是说...

```
>> new Window
(X) Object does not support this action 
```

所以我想这意味着只有本机代码才能创建新的 Window 实例。

# ruby-on-rails-3 - Rails3/jQuery UI Datepicker - 月份和日期在保存时反转

> ID：10035772
> 
> 赞同：15
> 
> 时间：2012-04-05T20:47:14.987
> 
> 标签：ruby-on-rails-3, postgresql, date, format, jquery-ui-datepicker

[（我的问题与此问题中描述的](https://stackoverflow.com/questions/2427504/jquery-ui-datepicker-date-format-issue-with-initial-value)几乎相同，只是该答案在我的情况下不起作用。）

* * *

我在带有 Postgres 数据库的 Rails 应用程序中使用[jQuery UI Datepicker 。](http://docs.jquery.com/UI/Datepicker)默认实现使用**mm/dd/yy**日期格式来显示所选日期，这正是我想要的。但是，在我将记录保存到数据库后，月份和日期会反转 - 然后显示为**yy-dd-mm**。因此，选择 3/11/2012 会尝试保存为 11 月 3 日而不是 3 月 11 日，并且根本不会保存像 2012 年 3 月 31 日这样的日期，因为它不存在。

到目前为止，我已经尝试了 3 种不同的途径来解决这个问题：

1）第一次尝试是重新格式化文本字段，以便显示看起来像我想要的那样：

```
<%= f.text_field :foo, :value => (@model.foo.blank? ? '' : @model.foo.strftime('%m/%d/%Y')), class: "datepicker" %> 
```

这最初正确显示 03/31/2012，但在保存时仍然反转。

2）所以接下来我尝试更改存储日期的默认方式，认为这样可以解决问题。如[该问题](https://stackoverflow.com/questions/5303495/change-date-format-in-the-view-to-dd-mm-yyyy)的答案中所述，我将以下内容添加到**config/locales/en.yml**：

```
# config/locales/en.yml
en:
  date:
    formats:
      default: "%m/%d/%Y" 
```

这根本没有任何区别。接下来我发现[了这个问题](https://stackoverflow.com/questions/3694352/rails-3-default-datetime-format-without-utc)并尝试使用这些行创建**config/initializers/date_formats.rb ：**

```
Date::DATE_FORMATS[:default]="%m/%d/%Y"
Time::DATE_FORMATS[:default]="%m/%d/%Y %H:%M" 
```

和上面一样，没有区别。

3）在玩了很多组合之后，我发现 DID 工作的一件事是在我对 datepicker 插件的调用中指定 yyyy-mm-dd 格式 - 这与我想要的相反，但至少日期可以成功保存。所以 datepicker 调用看起来像这样：

```
$( ".datepicker" ).datepicker({ dateFormat: 'yy-mm-dd' }); 
```

从日历中选择 3 月 31 日会使用 2012-03-31 填充该字段，并在保存后仍显示为 2012-03-31。

但是我到底怎样才能让日期选择器使用 mm/dd/yy 格式呢？我无法想象这是一件困难的事情，但我错过了什么？我是否必须对日期在 Postgres 中的存储方式做些什么？（它们被指定为日期，而不是日期时间。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:37:42.183

好吧，这取决于您如何在数据库中存储数据。如果您碰巧使用*RAW* sql 查询，您可以`to_date('31 Mar 2012', 'DD Mon YYYY')`在插入查询中使用。

Postgres 的`to_date` [参考](http://www.postgresql.org/docs/8.1/static/functions-formatting.html)

现在，在您的客户端，您可以在 jquery 日期选择器中使用

```
$.datepicker.formatDate('dd-M-yy', Yourdate); 
```

我使用了 DD Mon YYYY，因为它看起来更清晰。您可以`mm/dd/yy`根据需要使用格式或其他格式。 在这些情况下，在 postgre 的函数中使用所需的***格式***`to_date`

请注意，我还没有测试过上面的代码。如果有任何问题或遇到任何麻烦，请发表评论。

*编辑：*

`Date.parse('2011-06-18')`在将数据插入数据库并在日期选择器中设置`formatDate`为之前，您可以在 Rails 视图中使用 `'yy-mm-dd'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:09:30.600

如果您想为您的数据库集群全局更改默认日期格式，您还可以在您的数据库集群中设置DateStyle [GUC](http://www.postgresql.org/docs/current/interactive/runtime-config-client.html#GUC-DATESTYLE) [并](http://www.postgresql.org/docs/current/interactive/acronyms.html)`postgresql.conf`重新加载：

```
datestyle = 'iso, mdy' 
```

（无论如何这应该是默认值。）

请注意，这不会影响日期在您的应用中的显示方式。PostgreSQL 如何解释 Postgres 的模棱两可的输入和一些输出选项。

* * *

如果您在（显然）**不同的连接**`datestyle`中检查psql 中的设置，那并不能证明任何事情。您的应用程序可能正在设置与本地设置相关的不同设置。您必须检查实际连接中的设置（而不是来自 psql）。**`datestyle`**

 **如果您的 datestyle 设置是`'iso, mdy'`，那么它应该按照您的意愿工作：日期文字被解释为*month-before-day*。考虑这个演示（使用 PostgreSQL 9.1）：

```
db=# 设置日期样式 = 'ISO, MDY ';
放
db=# 选择 '1.12.2012'::date;
    日期
------------
 2012-01-12
(1 行)

db=# set datestyle = 'ISO, DMY ';
放
db=# 选择 '1.12.2012'::date;
    日期
------------
 2012-12-01
(1 行)

```

强调我的。

要了解您的应用实际设置了哪些选项，您可以设置

```
log_statement = all 
```

在你`postgresql.conf`和重新加载。然后启动您的应用程序并保存日期。每个命令都将被记录。之后不要忘记重置并重新加载（否则您的日志文件可能会变得很大）：

```
log_statement = none 
```

然后检查您的数据库日志文件，您的应用程序实际发送到数据库的内容。

* * *

您可能还对[`to_date()`](http://www.postgresql.org/docs/current/interactive/functions-formatting.html#FUNCTIONS-FORMATTING-TABLE)命令感兴趣，它可以让您以您喜欢的任何格式输入日期文字。但你不应该需要那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T15:27:08.623

我遇到了与原始海报相同的问题。由于我必须相互比较日期/时间，我不想将数据库字段更改为字符串，因为这将需要额外的代码和稍后的转换。

我最终在我的模型中使用了 before_save 和 attr_accessor，如下所示：

```
before_save    :format_date
attr_accessor  :unformatted_date

def format_date
  self.inquiry_date = Date.strptime(self.unformatted_date, "%m/%d/%Y").to_time(:utc)
end 
```

在我看来，这条线如下所示：

```
f.text_field  :unformatted_date, :value => (@foo.inquiry_date.blank? ? '' : @foo.inquiry_date.strftime('%m/%d/%Y)), :id => 'datepicker' 
```**

# java - RMI 远程异常：java.lang.ClassNotFoundException

> ID：10035785
> 
> 赞同：0
> 
> 时间：2012-04-05T20:48:17.390
> 
> 标签：java, crash, rmi

我有一个简单的 RMI 服务器，它将文件存储在地图中并在请求时返回它们。地图中存储的文件类型为 Object。我已经这样做了，所以我不需要导入包含存储特定文件的项目其他部分的库（还有其他方法吗？）。

由于存储的类型是对象，我不应该没有导入就可以吗？同时出现错误，我得到 java Finalizer thread crash 。这是堆栈：

```
java.rmi.ServerException: RemoteException occurred in server thread; nested exception is: 
    java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is: 
    java.lang.ClassNotFoundException: util.MyClass (no security manager: RMI class loader disabled)
Invalid memory access of location 0x0 rip=0x7fff91016390 <<< this is from crash
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:334)
    at sun.rmi.transport.Transport$1.run(Transport.java:159)
    at java.security.AccessController.doPrivileged(Native Method) 
```

这里还有一些来自 Client 的代码：

```
public void uploadProjects(List<MyClass> projects) {
        try {
            Object obj = projects;
            rmiServer.upload(channel, obj); // <<<< exception on this line
        } catch (RemoteException ex) {
            Logger.getLogger(RMIClient.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
```

这是接口方法：

```
void upload(String channel, Object projects) throws RemoteException; 
```

我在那里做错了吗？它不应该在不需要导入特定类的情况下与 Object 一起正常工作吗？我过去也尝试过使用安全管理器，但这只会导致更多麻烦，并且必须执行 AllPermissions 才能使其工作（在其他项目上）......

崩溃并不总是发生，但它一定是由 RMI 引起的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T00:37:00.600

*存储在 Map 中的对象*的类型是您放入其中的任何类型，以及客户端必须通过其 CLASSPATH 访问的任何类型。

# r - ggplot2 y轴标签小数精度

> ID：10035786
> 
> 赞同：20
> 
> 时间：2012-04-05T20:48:18.350
> 
> 标签：r, ggplot2

我正在一个循环中绘制几个 ggplot 图表（我知道，我知道不要循环使用 plyr ......但是）并且很好奇是否有办法将小数精度设置为一个小数（即 0.0）。我正在使用以下比例转换。

```
p <- p + scale_y_log10() 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-05T21:09:25.750

我的印象是一个小数（即 1.2）是默认值，但如果您看到的小数位数比这多，您可以将自己的格式传递给比例：

```
fmt_dcimals <- function(decimals=0){
   # return a function responpsible for formatting the 
   # axis labels with a given number of decimals 
   function(x) as.character(round(x,decimals))
} 
```

然后将比例添加到您的情节中：

```
ggplot( ... ) + scale_y_log10(labels = fmt_dcimals(2)) 
```

现在我考虑到这一点，我应该补充一点，如果你真的要编写自己的格式化程序，你可能应该坚持使用`format`函数来完成工作，而不是四舍五入和强制。这可能更安全和“更好”。

例如，要强制小数点后两位数，您可以将此格式化函数更改为如下所示：

```
fmt_dcimals <- function(decimals=0){
    function(x) format(x,nsmall = decimals,scientific = FALSE)
} 
```

我认为，您可以进一步使用`nsmall`and`digits`参数来`format`获得您想要的东西。它的使用示例：

```
df <- data.frame(x = 1:5,y = rexp(5))
ggplot(df,aes(x = x,y=y)) + 
    geom_point() + 
    scale_y_log10(labels = fmt_dcimals(2)) 
```

![在此处输入图像描述](../Images/3e9b0d3d80b68cedb1ddd9f6faba629d.png)

# c++ - 使用 ole 在 c++ 中使用 PasteSpecial() 获得正确的位置

> ID：10035793
> 
> 赞同：1
> 
> 时间：2012-04-05T20:48:34.157
> 
> 标签：c++, com, ms-office, c++builder, ole

我写了一个例程，它复制一个word文档并将其粘贴到c++中的一个新word文档中（Borland Builder 5）

```
tbSearch->Text = "{axis1[d]} ";
Variant vk_this_doc_select = wrdDoc1.OleFunction( "Select" );                // wir selektieren dessen Inhalt des geöffneten Dokuments
wordSelection = zuladendesDokument.OlePropertyGet("Selection");              // tun es in den ZwischenSpeicher der Applikation
wordSelection.OleFunction( "Copy" );                                        // und kopieren es
Variant vk_converted_document_select =  wrdDoc.OleFunction( "Select" );    // wir machen die Selektion im alten Dokument
Variant vk_converted_document_selection =   wrdApp.OlePropertyGet( "Selection" );
Variant  wordSelectionFind = vk_converted_document_selection.OlePropertyGet( "Find" );   // setzen den Zeiger
wordSelectionFind.OleFunction( "Execute", tbSearch->Text, false, false, false, false, false, true, 1, false, wordSelection, 2, false, false, false, false ); 
```

该例程运行良好，但在插入例程中，word 文档的图形部分被破坏了。

我也尝试通过

```
k_converted_document_selection.OleFunction( "PasteSpecial"), 0, false, 0, false, 0); 
```

这里格式没问题，但是粘贴文件的位置不对（每次都在文件的开头。

所以我有两个问题：

*   如何保存格式？
*   如何将粘贴的word文档设置到正确的位置？

过了一会儿（失去了 2-10 个神经细胞*fg*）我自己得到了答案，所以我发布了下一个结果，处理这个问题（对不起我的英语不好）。希望任何人都可以使用它...

```
 tbSearch->Text = "{axis3[d]}" ;

            Variant vk_this_doc_select = wrdDoc1.OleFunction( "Select" );// select the contain of the document to be insert

            wordSelection = zuladendesDokument.OlePropertyGet("Selection"); // select

            wordSelection.OleFunction( "Copy" ); // copy

            Variant vk_converted_document_select =  wrdDoc.OleFunction( "Select" ); // select the first document 

            Variant vk_converted_document_selection =   wrdApp.OlePropertyGet( "Selection" );

           Variant  wordSelectionFind = vk_converted_document_selection.OlePropertyGet( "Find" );   

                                                                                      // now the trick with is the solution: find the position you want, but do nothing ("")
           wordSelectionFind.OleFunction( "Execute", tbSearch->Text, false, false, false, false, false, true, 1, false, "", 1, true, true, true, true );

           vk_converted_document_selection.OleFunction( "PasteSpecial", 0, false, 0, false, 0); // now the pointer in the document is found, means PasteSpecial will insert the document at the right place 
```

# c# - C# 重构 if-else 语句代码

> ID：10035796
> 
> 赞同：5
> 
> 时间：2012-04-05T20:48:39.960
> 
> 标签：c#, refactoring

请查看我的以下代码...

```
public enum LogType
{
    Debug,
    Info,
    Warn,
    Error,
    Fatal
}

private static readonly ILog log = 
log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

public void LogError(LogType logtype, string message)
{
    XmlConfigurator.Configure();
    if (logtype == LogType.Debug)
        log.Debug(message);
    else if (logtype == LogType.Error)
        log.Error(message);
} 
```

我不喜欢上面所有的 if-else 语句，并相信有一种更简洁的方式来编写它。我该如何重构它？日志类有不同的调试、错误等方法。

我想对一个方法进行一次调用，让它自动处理它。

```
LogMyError(LogType.Debug, "I am just logging here"); 
```

我怎么能做这样的事情？我更喜欢远离 switch 语句。我正在寻找一种干净的面向对象的方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-05T21:07:54.193

你的代码完全没问题；我不会改变它。

*但是，如果您想*对它更加“面向对象”，那么考虑一下如何做到这一点是很有启发性的。让我们考虑您的两个案例；其他的你可以很容易地看到它们是如何实现的：

```
public abstract class LogType
{
    public static readonly LogType Debug = new LogTypeDebug();
    public static readonly LogType Error = new LogTypeError();

    private LogType() {} // Prevent anyone else from making one.

    public abstract void LogMessage(ILog logger, string message);

    private sealed class LogTypeDebug: LogType
    {
        public override void LogMessage(ILog logger, string message)
        {
            logger.Debug(message);
        }
    }

    private sealed class LogTypeError: LogType
    {
        public override void LogMessage(ILog logger, string message)
        {
            logger.Error(message);
        }
    }
}
...

//Obtain the log object the way you prefer.
private static readonly ILog log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

public void LogError(LogType logtype, string message)
{
    logtype.LogMessage(log, message);
} 
```

呼叫站点根本没有改变！它仍然看起来像：

```
LogError(LogType.Debug, "my message"); 
```

你去了：根本没有`if`或`switch`声明！“切换类型”代码已移至*虚函数表中*，这是它在面向对象代码中所属的位置。

A nice side effect of this technique is *you never need to worry about someone casting an integer to an unsupported value of your enumerated type*. The *only* possible values for a variable of type LogType are null or a reference to one of the singletons.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-05T20:51:53.857

您可以使用 a`Dictionary<LogType,Action<string>>`来保存对每个枚举值执行的操作，然后只需调用委托。

```
var logActions = new Dictionary<LogType,Action<string>>();
logActions.Add(LogType.Debug, log.Debug);
...

logActions[logtype](message); 
```

* * *

更新：

`if`如果您的语句中只有少量分支，这一切都过大了。我会将此方法用于 5+ 个这样的 if。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-05T20:52:37.370

Imo，没有任何明显的理由来更改您的代码中的任何内容。功能明确，`if/else`定义明确。函数声明允许您以您只想使用它的方式*使用*它。

所以我不会更改我看到的代码中的任何内容。

祝你好运。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-05T20:50:04.220

使用[开关块](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.100%29.aspx)：

```
switch (logtype)
{
    case LogType.Debug:
        log.Debug(message);
        break;

    case LogType.Error:
        log.Error(message);
        break;

    //more cases here as needed...

    default:
        throw new InvalidArgumentException("logtype");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T20:50:28.730

总是有这样的[`switch`](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.100%29.aspx)说法：

```
switch (logtype)
{
    case LogType.Debug:
        log.Debug(message);
        break;
    case LogType.Error:
        log.Error(message);
        break;
    ....
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T20:53:56.647

您可以使用 a或使用as 键和相应的方法作为值`switch`创建字典- an ，然后执行`LogType``LogXXXX``Action<string>`

```
myDictionary[logType](message); 
```

# java - GWT 应用程序托管模式下的 DebugIds

> ID：10035799
> 
> 赞同：0
> 
> 时间：2012-04-05T20:48:47.313
> 
> 标签：java, debugging, gwt

如何让调试 ID 在我的 gwt 应用程序中以托管模式显示？

我已经在实现 onEnsureDebugId 并在我的入口点调用 ensureDebugId，但它们没有显示:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:27:52.500

添加到我的 *.gwt.xml 并且它有效

# haskell - “使用功能依赖进行组合时无法匹配类型”错误是什么意思？

> ID：10035802
> 
> 赞同：1
> 
> 时间：2012-04-05T20:49:20.307
> 
> 标签：haskell, types, monad-transformers, functional-dependencies

我目前正在为我正在学习的课程编写一个小型编译器。所以我开始编写这个 monad 转换器来处理类型检查，但得到了一个非常神秘的类型错误。涉及功能依赖的东西，我不太了解。可以重现错误的程序的一小段摘录：

```
import Control.Monad.RWS.Lazy
import qualified Data.Map as M
import Control.Applicative

--Placeholders for other data types.
data TypeError = TypeError
data Ident = Ident String
data Type = Type

type Typer a = RWS FunctionTable [TypeError] IdentTable a

type FunctionTable = M.Map Ident Type

type IdentTable = [M.Map Ident Type]

emptyIdents :: IdentTable
emptyIdents = []

getIdent :: Ident -> Typer (Maybe Type)
getIdent id = getIdent' id <$> get

getIdent' :: Ident -> IdentTable -> Maybe Type
getIdent' _ [] = Nothing
getIdent' id (x:xs) =
  case M.lookup id x of
    Just t -> Just t
    Nothing -> getIdent' id xs

putIdent :: Ident -> Type -> Typer ()
putIdent id ty = modify $ \xs -> case xs of
  [] -> [M.singleton id ty]
  (x:xs) -> (M.insert id ty x) : xs

scopeEnter :: Typer ()
scopeEnter = modify $ \ids -> emptyIdents : ids

scopeExit :: Typer ()
scopeExit = modify tail 
```

而实际消息：

```
[1 of 1] Compiling Main             ( ErrorExample.hs, interpreted )

ErrorExample.hs:30:22:
    Couldn't match type `M.Map Ident Type' with `Type'
    When using functional dependencies to combine
      MonadState
        [[M.Map Ident Type]]
        (RWST
           (M.Map Ident Type)
           [TypeError]
           [M.Map Ident Type]
           transformers-0.2.2.0:Data.Functor.Identity.Identity),
        arising from a use of `modify' at ErrorExample.hs:35:18-23
      MonadState
        [M.Map Ident Type]
        (RWST
           (M.Map Ident Type)
           [TypeError]
           [M.Map Ident Type]
           transformers-0.2.2.0:Data.Functor.Identity.Identity),
        arising from a use of `modify' at ErrorExample.hs:30:22-27
    In the expression: modify
    In the expression:
      modify
      $ \ xs
          -> case xs of {
               [] -> [...]
               (x : xs) -> (M.insert id ty x) : xs }

ErrorExample.hs:30:22:
    Couldn't match type `[]' with `M.Map Ident'
    When using functional dependencies to combine
      MonadState
        [[M.Map Ident Type]]
        (RWST
           (M.Map Ident Type)
           [TypeError]
           [M.Map Ident Type]
           transformers-0.2.2.0:Data.Functor.Identity.Identity),
        arising from a use of `modify' at ErrorExample.hs:35:18-23
      MonadState
        [M.Map Ident Type]
        (RWST
           (M.Map Ident Type)
           [TypeError]
           [M.Map Ident Type]
           transformers-0.2.2.0:Data.Functor.Identity.Identity),
        arising from a use of `modify' at ErrorExample.hs:30:22-27
    In the expression: modify
    In the expression:
      modify
      $ \ xs
          -> case xs of {
               [] -> [...]
               (x : xs) -> (M.insert id ty x) : xs }

ErrorExample.hs:35:18:
    Couldn't match type `Type' with `M.Map Ident Type'
    When using functional dependencies to combine
      MonadState s (RWST r w s m),
        arising from the dependency `m -> s'
        in the instance declaration in `Control.Monad.State.Class'
      MonadState
        [[M.Map Ident Type]]
        (RWST
           (M.Map Ident Type)
           [TypeError]
           [M.Map Ident Type]
           transformers-0.2.2.0:Data.Functor.Identity.Identity),
        arising from a use of `modify' at ErrorExample.hs:35:18-23
    In the expression: modify
    In the expression: modify $ \ ids -> emptyIdents : ids

ErrorExample.hs:35:18:
    Couldn't match type `M.Map Ident' with `[]'
    When using functional dependencies to combine
      MonadState s (RWST r w s m),
        arising from the dependency `m -> s'
        in the instance declaration in `Control.Monad.State.Class'
      MonadState
        [[M.Map Ident Type]]
        (RWST
           (M.Map Ident Type)
           [TypeError]
           [M.Map Ident Type]
           transformers-0.2.2.0:Data.Functor.Identity.Identity),
        arising from a use of `modify' at ErrorExample.hs:35:18-23
    In the expression: modify
    In the expression: modify $ \ ids -> emptyIdents : ids
Failed, modules loaded: none.
Leaving GHCi. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T21:41:22.967

这是一个非常糟糕的错误信息。原因是由于状态中的类型不匹配。您的代码试图混合 [M.Map Ident Type] 和 [[M.Map Ident Type]]。

如果您手动将 emptyIdents 调用内联到 scopeEnter 中，它看起来像这样：

```
scopeEnter :: Typer ()
scopeEnter = modify $ \ids -> [] : ids 
```

...这对 . 来说没有多大意义`[M.Map Ident Type]`。将其与进行类型检查的版本进行比较：

```
scopeEnter :: Typer ()
scopeEnter = modify $ \ids -> M.empty : ids 
```

# .net - 如何在 WCF 数据协定中接收未知字段？

> ID：10035807
> 
> 赞同：0
> 
> 时间：2012-04-05T20:49:33.537
> 
> 标签：.net, wcf

我必须开发一个 WCF 服务，它应该接收一些预定义的字段和一些未知的字段。我想要一个*Dictionary[string, object]* DataMember 来接收这个未知字段，但任何可行的解决方案都会让我高兴。

我玩过 IExtensibleDataObject，甚至设法在其中获取未知字段，但我无法从中访问数据，只能使用调试器查看它们。如果有人知道我如何访问这些数据，请告诉我。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:55:00.667

为什么不直接创建一个类型属性`Dictionary`并将其包含在您的数据合同中呢？

```
[DataMember]
public Dictionary<string,object> ExtraFields { get; set; } 
```

**编辑：** `ExtensibleDataObject`用于往返场景，因此成员对服务不可见。有一些[workarrounds](http://geekswithblogs.net/EltonStoneman/archive/2009/04/03/accessing-extended-data-from-iextensibledataobject.aspx)，但我认为最好在另一个属性中明确地做到这一点。

# ajax - 如何使用 CORS 和骨干网向 API 发出 ajax 请求

> ID：10035812
> 
> 赞同：1
> 
> 时间：2012-04-05T20:49:58.070
> 
> 标签：ajax, backbone.js, cross-domain, cors

我正在开发一个backbone.js 项目，我正在调用我的github repo。我有我的集合和模型引导加载，所以一旦我的页面被构建它们就存在，但是当我调用 model.fetch() 我得到这个消息：（用用户名替换：username）

```
XMLHttpRequest cannot load https://api.github.com/users/:username.
Origin http://mydomain.com is not allowed by Access-Control-Allow-Origin. 
```

我已经阅读了一些消息[post1](https://stackoverflow.com/questions/6486213/backbone-js-and-cross-domain-scripting)，[post2](https://stackoverflow.com/questions/6659283/backbone-js-fetch-with-parameters)，他们提到了修改主干同步功能，但我不完全确定如何。到目前为止，这是我的代码（在我的 Backbone.Router 中）：

```
userDetails: function(id) {
    console.log('Loading: userDetails');
    var User = Users.get(id);
    User.fetch({dataType: "jsonp"});
    console.log(User);
    userView = new UserView({
        model: User
    });
    userView.render();
}, 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T21:02:37.640

CORS 在后端启用。jQuery 基础知道它何时发出跨域请求并相应地修改它。问题是服务器，在这种情况下，`api.github.com`不允许 CORS 请求。

服务器必须响应（至少）：

`Access-Control-Allow-Origin: * (or the host in which your page is being served)`

由于您可能没有 github，因此您必须编写服务器端代理或查看 github 是否可以为您提供 JSONP 调用（jQuery 也很乐意为您提供）。

[MDN 访问控制文档](https://developer.mozilla.org/en/http_access_control)

* * *

**编辑**

话虽如此，如果您需要修改 jQuery 通过主干发出的请求，则无需重写该`sync`方法。使用[jQuery 的`$.ajaxSetup`](http://api.jquery.com/jQuery.ajaxSetup/)方法添加任何额外的标头、设置类型等。只要确保`$.ajaxSetup`在与`.save()``.fetch()``.destroy()``$.ajaxSetup`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T03:47:30.807

我最近遇到了类似的问题，最终使用了**mod_proxy**。请参考：[http](http://blog.lakmali.com/2010/11/apache-proxy-configuration-and-load.html) ://blog.lakmali.com/2010/11/apache-proxy-configuration-and-load.html 这篇博文非常清晰且易于理解。

**mod_proxy**也支持“https”，不过我自己还没试过！请 google 更多内容以了解代理选项，例如 mod_proxy、mod_jk 等。

By going with mod_proxy, we no longer have to make any Cross-Domain calls. Hence, there was no need to worry about IE8/IE9's **XDomainRequest** hack for performing Cross-Domain requests. [**Note**: Before using *mod_proxy*, We were trying to over-ride the Backbone.sync to make explicit calls to XDomainRequest instead of jQuery's *ajax* in order to take care of CORS issues on IE9!]

# android - Android 在后台运行带有 WebView 加载 url 的 Activity

> ID：10035815
> 
> 赞同：0
> 
> 时间：2012-04-05T20:50:03.283
> 
> 标签：android, android-webview, android-animation

我有一个在启动时显示动画的应用程序（我将调用活动 LoadActivity）。等待几秒钟后，我通过一个意图调用一个新活动（我将其称为 WebViewActivity）（因此动画完全显示）。

然而，这导致我在动画完成后等待页面加载，这对用户来说不是很友好。

所以我想知道是否有任何方法可以在 LoadActivity 的 oncreate 和 WebViewAcivity 的 onPageFinished 事件中在后台启动我的 WebViewActivity 以完成 LoadActivity？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:00:05.867

您可以做的一件事是在加载活动中尝试缓存 html 页面。然后，一旦 WebViewActivity 加载，您就可以尝试从缓存中加载。这会比从网络加载更快。如果页面无法及时缓存，您将需要故障保护。在这种情况下，用户只需要等待页面加载。

# ios - Phonegap NativeControls 不起作用

> ID：10035821
> 
> 赞同：3
> 
> 时间：2012-04-05T20:50:27.683
> 
> 标签：ios, jquery-mobile, cordova, phonegap-plugins

我已阅读并遵循本网站或网络上有关如何使用 Jquery Mobile 将 NativeControls 插件添加到 PhoneGap (Cordova 1.5) 的教程。我无法让工具栏正常工作。

我尝试了很多不同的事情，但没有运气。这是我的代码：

html:

```
 <!DOCTYPE html>
<html>
  <head>
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />-->
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="stylesheet" href="jquery/jquery.mobile-1.0.1.min.css"/>
  <script src="jquery/jquery-1.6.4.min.js"></script>
  <link rel="stylesheet" type="text/css" href="styles.css"/>
  <script src="jquery/jquery.mobile-1.0.1.min.js"></script>
  <title></title>  

    <!-- iPad/iPhone specific css below, add after your main css >
    <link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />
    <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />-->        

    <!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
    <script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script>
    <script src="NativeControls.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/main.js" type="text/javascript" charset="utf-8"></script>
  </head>
    <body onload="onBodyLoad()">
      <div data-role="page" id="mainpage"> 
          <div data-role="header">
              <h1>LOGIN</h1>
          </div>
          <div data-role="content">
            <img src="images/cslogosmall2.png" style="margin-top: -10px; margin-left: -5px;"/>
            <form id="login" method="post">
              <p>
              <ul data-role="listview" data-theme="g" id="contentlist">
                  <b>Program:</b>
                  <input type="text" id="program"/>
                  <b>Username:</b>
                  <input type="text" id="username"/>
                  <b>Password:</b>
                  <input type="password"  id="password"/>
              </ul>
              </p>
              <br/>
                <button type="submit" data-theme="a" id="submit" value="Submit"></button>
            </form>
          </div>
          <!--<div data-role="footer"> 
              <h1> Main Page Footer </h1>
          </div>-->
      </div>
      <div data-role="page" id="contentpage"> 
          <div data-role="header"> 
              <h1> Content Page </h1>

          </div>
          <div data-role="content">
              <a href="#" data-role="button" onclick="history.go(-1);return false;" onClick=buttonDemo()> Back to Main Page </a>
              <a href="#" data-role="button" id="beepbtn" onClick=beepbeep()> Beep!</a>
          </div>
          <div data-role="footer"> 
              <h1> Content Page Footer </h1>
          </div>
      </div>      
  </body>
</html> 
```

主.js：

```
function onBodyLoad()
{       
    $('#submit').click(function() {
        var program = document.getElementById('program').value;
        var username = document.getElementById('username').value;
        var password = document.getElementById('password').value;

        if (!program || program == "") {
            alert("Please enter a program");
            return false;
        }
        else if (!username || username == "") {
            alert("Please enter a username");
            return false;
        }
        else if (!password || password == "") {
            alert("Please enter a password");
            return false;
        }
        return true;
    });

    document.addEventListener("deviceready", onDeviceReady, false);
}

/* When this function is called, Cordova has been initialized and is ready to roll */
/* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
 see http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
 for more details -jm */
function onDeviceReady() {
  // Initializating TabBar
  navigator.notification.alert("Cordova is working");

  nativeControls = window.plugins.nativeControls;
  navigator.notification.alert(nativeControls);
  nativeControls.createTabBar();

  // Books tab
  nativeControls.createTabBarItem(
    "books",
    "Books",
    //"/www/tabs/book.png",
    "",
    {"onSelect": function() {
      books();
    }}
  );

  // Stats tab
  nativeControls.createTabBarItem(
    "finished",
    "Finished",
    //"/www/tabs/box.png",
    "",
    {"onSelect": function() {
      finished();
    }}
  );

  // About tab
  nativeControls.createTabBarItem(
    "about",
    "About",
    //"/www/tabs/info.png",
    "",
    {"onSelect": function() {
      about();
    }}
  );

  // Compile the TabBar
  nativeControls.showTabBar();
  nativeControls.showTabBarItems("books", "finished", "about");
  nativeControls.selectTabBarItem("books");
}

function books() {

}

function about() {

}

function finished(){

} 
```

如您所见，我做了一个：

```
 navigator.notification.alert("Cordova is working");
  nativeControls = window.plugins.nativeControls;
  navigator.notification.alert(nativeControls);
  nativeControls.createTabBar(); 
```

测试 nativeControls 变量中是否包含任何内容。我没有收到任何警报。我什至尝试过：

```
navigator.notification.alert(window); 
```

没有运气。我已将 NativeControls 键添加到 Cordova.plist 作为 NativeControls - NativeControls。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T03:40:26.247

我将源代码上传到了 iTunes 商店中的 jQM 应用程序，该应用程序有一个在 iPhone 和 iPad 上都可以在两个方向上运行的 Tabbar 示例。我希望它有帮助！

[http://zsprawl.com/iOS/2012/04/nativecontrols-plugin-for-cordovaphonegap/](http://zsprawl.com/iOS/2012/04/nativecontrols-plugin-for-cordovaphonegap/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T04:29:18.403

这是我的代码，它有效：

```
function onDeviceReady()
{
  var nc = window.plugins.nativeControls;

  nc.createTabBar();
  nc.createTabBarItem('whoTabItem', 'Quem?', '', null);
  nc.createTabBarItem('whereTabItem', 'Onde?', '', null);
  nc.createTabBarItem('whatTabItem', 'O que?', '', null);
  nc.showTabBar();
  nc.showTabBarItems('whoTabItem', 'whereTabItem', 'whatTabItem');

} 
```

在 NativeControls.js 的最后，window.plugins.nativeControls 被初始化，所以应该没问题：

```
if(!window.plugins)
  window.plugins = {};

 window.plugins.nativeControls = new NativeControls(); 
```

您对 createTabBarItem 的调用有 5 个参数 - 只有 4 个。消除第四个空白参数并进行测试。也许这就是您的 onSelect 功能不起作用的原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T10:45:04.363

我也经历了同样的挣扎。构造函数可能存在一些误解。

我看到[一个帖子](http://zsprawl.com/iOS/2012/03/using-the-native-tabbar-plugin-in-cordova/)，其中添加了一些额外的行以避免任何冲突并且它有效！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T21:25:00.320

需要在 main.js 文件顶部将 nativeControls 定义*为*变量，然后可以在这一行使用，否则 js 会出现未定义变量的异常

```
 nativeControls = window.plugins.nativeControls; 
```

# hibernate - 创建初始索引时出现 TransientObjectException

> ID：10035825
> 
> 赞同：3
> 
> 时间：2012-04-05T20:50:46.110
> 
> 标签：hibernate, full-text-search, lucene, hibernate-search

我正在使用以下代码来初始化我的 Hibernate Search 索引：

```
EntityManager em = ...
FullTextEntityManager fullTextEM = Search.getFullTextEntityManager(em);
fullTextEM.createIndexer().startAndWait(); 
```

现在，当我执行此代码时，出现以下异常：

```
ERROR: HSEARCH000058: HSEARCH000116: Unexpected error during MassIndexer operation
org.hibernate.TransientObjectException: cannot lock an unsaved transient instance: com.example.hs.model.Division
at org.hibernate.event.internal.DefaultLockEventListener.onLock(DefaultLockEventListener.java:75)
at org.hibernate.internal.SessionImpl.fireLock(SessionImpl.java:724)
at org.hibernate.internal.SessionImpl.fireLock(SessionImpl.java:717)
at org.hibernate.internal.SessionImpl.access$1700(SessionImpl.java:170)
at org.hibernate.internal.SessionImpl$LockRequestImpl.lock(SessionImpl.java:2276)
at org.hibernate.search.batchindexing.impl.EntityConsumerLuceneWorkProducer.indexAllQueue(EntityConsumerLuceneWorkProducer.java:130)
at org.hibernate.search.batchindexing.impl.EntityConsumerLuceneWorkProducer.run(EntityConsumerLuceneWorkProducer.java:102)
at org.hibernate.search.batchindexing.impl.OptionallyWrapInJTATransaction.run(OptionallyWrapInJTATransaction.java:112)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

在这种情况下，`com.example.hs.model.Division`该类确实`@Transient`为从 a 计算返回值的方法提供了两个注释`HashMap`。通过`HashMap`Hibernate 检索如下：

```
@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
@JoinColumn(name = "division_id", referencedColumnName = "id")
@MapKey(name = "language")
@Field(name="name")
@FieldBridge(impl = com.example.hs.search.LanguageDivisionTextBridge.class)
protected Map<Language, DivisionText> getDivisionTextMap() {
    return divisionTextMap;
} 
```

如您所见，我正在使用自定义`FieldBridge`来帮助映射。该类`DivisionText`也标有`@Indexed`注释并已成功编入索引。

完整的源代码可以在以下位置找到：

[https://github.com/jsvazic/hibernate-search-example](https://github.com/jsvazic/hibernate-search-example)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T07:41:35.153

`@Transient`您的问题与内部的注释无关，`Foo,`而是与`Foo`整体有关。索引过程中的某些代码正在尝试调用`Session.lock(foo),`，但此时`foo`它仍然只是一个普通对象，在使用`Session.save`or分配给会话之前`Session.persist`。也许它会有助于在父对象`cascade=PERSIST`的字段上的注释中添加一个参数，如此[处](https://stackoverflow.com/questions/5157853/hibernate-how-use-cascade-in-annotation)所述。`foo`

# php - Joomla 2.5 新注册用户 php 脚本与 dbl opt-in java

> ID：10035826
> 
> 赞同：0
> 
> 时间：2012-04-05T20:50:48.620
> 
> 标签：php, api, acl, joomla1.7

我在 html 中创建了一个简单的“创建帐户”表单，该表单与一些 java 交互以实现双重选择加入方法。我还希望此表单在 Joomla 中创建用户并在单击创建帐户按钮后登录。

双重选择工作正常，但 joomla 2.5 的新用户脚本不起作用，没有错误，但它只是没有注册用户。我尝试将在 stackoverflow 上找到的 php 脚本（见下文）放置到生成新用户，但它不起作用。

是否可以在一个表单上同时运行这两种类型的脚本？如果是这样，我哪里错了？谢谢！

```
 require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

$mainframe =& JFactory::getApplication('site');
$mainframe->initialise();

//Check for request forgeries, we comment this out since tokens are not generated in the html page
//JRequest::checkToken() or jexit( 'Invalid Token' );

//Get required system objects

$user         = clone(JFactory::getUser());
$pathway          = & $mainframe->getPathway();
$config       = & JFactory::getConfig();
$authorize        = & JFactory::getACL();
$document       = & JFactory::getDocument();

//If user registration is not allowed, show 403 not authorized(Not needed)

$usersConfig = &JComponentHelper::getParams( 'com_users' );
if ($usersConfig->get('allowUserRegistration') == '0')
    {
        JError::raiseError( 403, JText::_( 'Access Forbidden' ));
        return;
    }

//Initialize new usertype setting

$newUsertype = $usersConfig->get( 'new_usertype' );
if (!$newUsertype)
    {
        $newUsertype = 'Registered';
    }

//Bind the post array to the user object
if (!$user->bind( JRequest::get('post'), 'usertype' ))
    {
        JError::raiseError( 500, $user->getError());
    }

//Set some initial user values

$user->set('id', 0);
$user->set('usertype', '');
$user->set('gid', $authorize->get_group_id( '', $newUsertype, 'ARO' ));

$date =& JFactory::getDate();
$user->set('registerDate', $date->toMySQL());

//If user activation is turned on, we need to set the activation information(Not needed)

$useractivation = $usersConfig->get( 'useractivation' );
if ($useractivation == '1')
    {
        jimport('joomla.user.helper');
        $user->set('activation', md5( JUserHelper::genRandomPassword()) );
        $user->set('block', '1');
    }

//Save the details of the user

$user->save(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:01:00.050

我认为您正在尝试创建一个 API 来从不同的环境在 Joomla 中注册用户。您的代码可以在 Joomla 1.5/1.6 上正常工作，但不适用于 1.7 及更高版本......下面的代码片段对我有用，稍作修改。

```
<?php
/*
 * Created on 13-Apr-12
 *
 * To change the template for this generated file go to
 * Window - Preferences - PHPeclipse - PHP - Code Templates
 */
 /*
  * loading Joomla environment
  */
define( '_JEXEC', 1 );
$JUnit_home = $_SERVER['SCRIPT_FILENAME'];
//define('JPATH_BASE', dirname(__FILE__) );//this is when we are in the root

define( 'DS', DIRECTORY_SEPARATOR );

require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

function register_user ($email, $password){

$firstname = $email; // generate $firstname
$lastname = ''; // generate $lastname
$username = $email; // username is the same as email

/*
I handle this code as if it is a snippet of a method or function!!

First set up some variables/objects     */

//$acl =& JFactory::getACL(); Acl will work only in Joomla1.5/1.6       

/* get the com_user params */
$mainframe =& JFactory::getApplication('site');
$mainframe->initialise();

$usersParams = &JComponentHelper::getParams( 'com_users' ); // load the Params

// "generate" a new JUser Object
$user = JFactory::getUser(0); // it's important to set the "0" otherwise your admin user information will be loaded

$data = array(); // array for all user settings

//original logic of name creation
//$data['name'] = $firstname.' '.$lastname; // add first- and lastname
$data['name'] = $firstname.$lastname; // add first- and lastname

$data['username'] = $username; // add username
$data['email'] = $email; // add email
//there's no gid field in #__users table from Joomla_1.7/2.5

$usertype = 'Registered';//this is not necessary!!!
jimport('joomla.application.component.helper');
/* this part of the snippet from here: /plugins/user/joomla/joomla.php*/
$config = JComponentHelper::getParams('com_users');
    // Default to Registered.
$defaultUserGroup = $config->get('new_usertype', 2);
//default to defaultUserGroup i.e.,Registered
$data['groups']=array($defaultUserGroup);
$data['password'] = $password; // set the password
$data['password2'] = $password; // confirm the password
$data['sendEmail'] = 1; // should the user receive system mails?

/* Now we can decide, if the user will need an activation */

 $useractivation = $usersParams->get( 'useractivation' ); // in this example, we load the config-setting
 //echo $useractivation;exit();
 if ($useractivation == 1) { // yeah we want an activation

 jimport('joomla.user.helper'); // include libraries/user/helper.php
 $data['block'] = 1; // block the User
 $data['activation'] =JUtility::getHash( JUserHelper::genRandomPassword() ); // set activation hash (don't forget to send an activation email)

}
else { // no we need no activation

 $data['block'] = 1; // don't block the user

}

if (!$user->bind($data)) { // now bind the data to the JUser Object, if it not works....
 JError::raiseWarning('', JText::_( $user->getError())); // ...raise an Warning
    return false; // if you're in a method/function return false

}

if (!$user->save()) { // if the user is NOT saved...
 JError::raiseWarning('', JText::_( $user->getError())); // ...raise an Warning

 return false; // if you're in a method/function return false

}

return $user; // else return the new JUser object

}

$email = JRequest::getVar('email');
$password = JRequest::getVar('password');

//echo 'User registration...'.'<br/>';
if(!register_user($email, $password))
{
$data['status']="failure";
echo json_encode($data);
}
else
{
$data['status']="success";
echo json_encode($data);
}
 //echo '<br/>'.'User registration is completed'.'<br/>';
?> 
```

> PS请检查#_*用户（用户详细信息），#* _book_user_usergroup_map（映射组ID和用户ID），#__usergroups表包含注册后受影响的组键表

# facebook - 为应用程序禁用沙箱不起作用

> ID：10035827
> 
> 赞同：4
> 
> 时间：2012-04-05T20:51:03.473
> 
> 标签：facebook, sandbox, user-permissions

尝试使用 Facebook Connect 允许用户登录我们的新 vBulletin 4.1.11 版块。它工作正常，但仅适用于在应用程序中添加管理员、测试人员等的人。一旦用户从管理员/测试人员中删除，他们就会在尝试登录时收到“发生错误。请稍后再试”。

即使我禁用了沙盒模式，该应用程序似乎也“卡在”沙盒模式中。

谢谢！

# datamapper - 如何列出与一个属性无关的 DataMapper 错误？

> ID：10035830
> 
> 赞同：1
> 
> 时间：2012-04-05T20:51:18.893
> 
> 标签：datamapper, datamapper-1.2

DataMapper 模型允许两种形式的自定义验证：特定于属性的验证和整体对象验证。例如：

```
 # Validates the `name` property with the `check_name` method;
 # any errors will be under `object.errors[:name]`
 validates_with_method :name, method: :check_name

 # Validates the object overall with the `overall_soundness` method;
 # any errors will be under `object.errors[:overall_soundness]`
 validates_with_method :overall_soundness 
```

第二种类型适用于涉及多个属性的验证，但它也存在一个问题：向用户显示错误。

我想在表单页面的顶部显示所有未附加到特定属性的错误，但我没有看到任何简单的方法来列出它们。

**如何获取非特定于属性的错误列表？**

（我正在使用 DataMapper 1.2.0）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:16:30.800

# 一种骇人听闻的方式

我希望有比这更本土的方式。我已将此方法添加到我的模型中：

```
# Validation errors not tied to a specific property. For instance, 
# "end date must be on or before start date" (neither property is 
# wrong individually, but the combination makes the model invalid)
# @return [Array] of error message strings
def general_validation_errors
  general_errors = []

  general_error_keys = errors.keys.reject do |error|
    # Throw away any errors that match property names
    self.send(:properties).map(&:name).include?(error) || error == :error
  end

  general_error_keys.each do |key|
    general_errors << self.errors[key]
  end

  general_errors.flatten
end 
```

在表单的顶部，我可以这样做：

```
- if @my_model.general_validation_errors.any?
  .errors
    %ul
      - @my_model.general_validation_errors.each do |error_message|
        %li= error_message 
```

或者，Formtastic 允许的猴子补丁`f.general_validation_errors`是：

```
# Let Formtastic forms use f.general_validation_errors to display these (if any)
module Formtastic
  module Helpers
    module ErrorsHelper
      def general_validation_errors
        unless @object.respond_to?(:general_validation_errors)
          raise ArgumentError.new(
            "#{@object.class} doesn't have a general_validation_errors method for Formtastic to call (did you include the module?)"
          )
        end

        if @object.general_validation_errors.any?
          template.content_tag(:div, class: 'errors') do
            template.content_tag(:ul) do
              content = ''
              @object.general_validation_errors.each do |error|
                content << template.content_tag(:li) do
                  error
                end
              end
              content.html_safe
            end
          end
        end
      end
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-09T18:34:50.280

为了显示......你可以使用闪光灯吗？

由于您没有标记一种语言，我将只放置 Ruby 和 Sinatra 的东西，也许您可​​以找到 DSL 等价物。

`flash.now[:errors]`在您看来，带有相关的条件语句

并在路线中`flash[:errors] = User.errors`

# javascript - 保护仅 JavaScript 客户端以访问远程 API

> ID：10035832
> 
> 赞同：2
> 
> 时间：2012-04-05T20:51:19.270
> 
> 标签：javascript, api, authentication, remoteapi

也许我在要求一些不可能的事情，但我们开始吧：我正在尝试找到一种方法来验证客户端对 API 的请求，但是一些客户端只能使用 JavaScript 来发送他们的请求（他们使用托管服务，而这些服务不支持允许编写单行服务器端代码）。这意味着任何 API 密钥、秘密或哈希都必须由 JavaScript 处理，从而有效地使它们无用。

我见过一些 API 使用了严重混淆的代码，但在我看来，这种方法给人一种虚假的安全感（可以使用 JavaScript Beautifier 轻松读取）。有没有更好的方法？

提前感谢所有答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:53:26.167

不，JavaScript 是开放的，这意味着零安全性。

最明智的做法是通过您拥有的服务器代理 API，然后让人们使用他们的密钥注册到服务器。

这意味着即使他们没有任何服务器端代码，也没关系，因为您为他们托管服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T20:56:10.543

真的没有办法完全使用 JavaScript 来做到这一点。我曾经使用过的唯一选项是限制 IP 地址或JavaScript 客户端*的某种其他形式的身份验证*。在身份验证/授权之后，然后通过 HTTPS 将它们的密钥传递给客户端，该密钥仅在客户端保留一段时间（即不存储在任何地方）。

缺点是聪明的恶意用户可以很容易地调试到 JavaScript 并确定这个密钥。

# jquery - jQuery UI 自动完成更新隐藏字段的值，但在 UI 中显示标签，结合 ASMX

> ID：10035833
> 
> 赞同：7
> 
> 时间：2012-04-05T20:51:29.810
> 
> 标签：jquery, jquery-ui, asmx, jquery-ui-autocomplete

在下面的代码片段中，我怎样才能让 jquery 自动完成插件：

1.  使用 UserID 更新隐藏字段
2.  使用全名更新“#MessageTo”

我相信我需要使用.result，但我无法弄清楚语法。请注意，我使用的是 ASMX，所以我必须发帖（不想启用安全风险）

```
 $("#MessageTo").autocomplete({
        dataType: "json",
        autoFocus: true,
        minLength: 3,
        source: function (request, response) {
            var postParams = "{ pattern: '" + $("#MessageTo").val() + "' }";

            return jQuery_1_7_1.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: '/Services/Users.asmx/GetNames',
                data: postParams,
                dataType: "json",
                success: function (data) {
                    response($.map(data.d.Users, function (c) {
                        return {
                            label: c.FullName,
                            value: c.UserID
                        };
                    }));
                }
            });
        }
    }); 
```

我看到一些类似的帖子，但没有与 ASMX 结合使用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T21:21:19.613

我相信您有兴趣在用户从启用自动完成的文本框中选择某些内容时更新页面上的其他 HTML 元素 - 对吗？

您上面的代码可能已经有效，可以在用户键入时提供自动完成“建议”。如果我理解正确，您希望在用户接受其中一个建议后更新一些字段。

为此，请使用`select`自动完成选项的成员。

```
 $("#MessageTo")
    .autocomplete({
        dataType: "json",
        autoFocus: true,
        minLength: 3,
        source: function (request, response) {
            var postParams = "{ pattern: '" + $("#MessageTo").val() + "' }";

            return jQuery_1_7_1.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: '/Services/Users.asmx/GetNames',
                data: postParams,
                dataType: "json",
                success: function (data) {
                    response($.map(data.d.Users, function (c) {
                        return {
                            label: c.FullName,
                            value: c.UserID
                        };
                    }));
                }
            });
        }, 

        select: function (event, ui) {
            var v = ui.item.value;
            $('#MessageTo').html("Something here" + v);
            $('#Hidden1').html("Something else here" + v);
            // update what is displayed in the textbox
            this.value = v; 
            return false;
        }

    }); 
```

另外：您对 ASMX 的使用是无关紧要的。从自动完成的角度来看，它只是数据的来源。此外，POST 的使用也无关紧要。可以在服务器端配置 ASMX 以允许 HTTP GET。如果您启用它，这不是安全漏洞。这只是接受请求的另一种方式。

自动完成框无法判断服务器端是 ASMX 还是 Python、ASP-classic、PHP 或其他任何东西。如果我正确理解了这个问题，那么您对*我看到一些类似帖子但未与 ASMX 结合*的评论是无关紧要的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-03T16:49:16.247

您想使用 select 配置选项是正确的 - 您想要的值作为`ui.item.value`和传递给您的自定义函数`ui.item.label`。您可以`return false`使用 来阻止默认行为并访问目标元素`this`。IE

```
$("#MessageTo").autocomplete({
   /* Existing code is all OK */

   select: function (event, ui) {
      // Set autocomplete element to display the label
      this.value = ui.item.label;

      // Store value in hidden field
      $('#hidden_field').val(ui.item.value);

      // Prevent default behaviour
      return false;
   }
}); 
```

# php - 大站点中的 CakePHP（1000 个用户/小时 - 84 个表） - 为什么这么慢？

> ID：10035834
> 
> 赞同：1
> 
> 时间：2012-04-05T20:51:34.877
> 
> 标签：php, mysql, performance, cakephp, cakephp-2.0

（我在用谷歌翻译）。

目前正在开发一个车辆系统（30,000 辆车辆，10,000 名用户），并且在此期间仅在本地环境中运行测试。

那么问题来了：当我发送到云服务器时，mysql现在消耗了100~140%的处理，使得站点下降大约5~30分钟。

我不知道如何解决这个问题，以便我无法识别他，因为在那之前一切都在本地主机上。

我的问题是这样的：如何使用 CakePHP 应用程序使系统过载？

有关表格的一些基本信息：

客户 -> 合同 -> 计划 -> 广告

广告 ->（车辆、零件、服务）

车辆 ->（品牌、型号、版本、类别、颜色、燃料）

横幅 -> 横幅频道 -> 本地横幅

关于申请的信息：

调试：0 启用缓存（每页 10-1 小时 *）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T22:34:17.297

根据我自己使用 CakePHP 和 MySQL（超过 250 个表）运行重型应用程序的经验，瓶颈在于对 CakePHP ORM 的使用不当。

有时，您会获取比您需要的更多的数据。

`find('all')`与高`recursive`价值相关的功能看起来很酷，并加快了开发时间。

但事实上，这可能真的很糟糕，尤其是当您的应用程序和数据库正在增长时。关联模型的数量也会增加，递归地获取越来越多的数据。

一个好的做法是始终指定您需要的字段。此外，对于特定查询，您应该取消绑定不需要的关联模型。

对于复杂的查询，不要犹豫，使用该`query()`函数手动编写优化查询。

在开发过程中，您应该启用 CakePHP 调试模式来分析`Config/core.php`文件中的 SQL 查询：`Configure::write('debug', 2);`这将帮助您找到最慢的。

优化您的查询是第一步。如果这不能解决您的问题，那么您的数据库可能设计得不好。

此外，您应该在生产环境中使用操作码缓存，例如[APC](http://fr2.php.net/manual/en/intro.apc.php)或[XCache](http://xcache.lighttpd.net/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T20:57:49.547

如果您真的想知道为什么它太慢，请执行此操作，

1.  配备[Apache JMeter](http://jmeter.apache.org/)以生成负载
2.  启用[通过 xdebug分析您的 Web 应用程序](http://xdebug.org/docs/install)
3.  [也配置您的网络服务器](http://talks.php.net/show/froscon08)。

如果您想快速阅读在[高负载站点中使用 PHP 的策略](https://stackoverflow.com/questions/24675/tactics-for-using-php-in-a-high-load-site)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T06:25:03.843

Matt Curry 的这本书可能会有所帮助：

[http://www.pseudocoder.com/Super_Awesome_Advanced_CakePHP_Tips.pdf](http://www.pseudocoder.com/Super_Awesome_Advanced_CakePHP_Tips.pdf)

@ 第 54 页 -> “让你的蛋糕应用程序快速”

# iphone - CoreData 中的名称重复？

> ID：10035836
> 
> 赞同：4
> 
> 时间：2012-04-05T20:51:50.337
> 
> 标签：iphone, objective-c, core-data

在我的 CoreData 对象中，我有一个 name 属性，只是一个字符串。是否有任何自动化方法或框我可以勾选以阻止用户保存具有相同“名称”属性的两个对象？还是我应该手动检查？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:09:01.027

使用[键值验证](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/Validation.html)(KVV)。`-validateName:error:`向您的实体类添加一个方法。在该方法中，您可以对具有相同名称的对象执行提取。如果找到，则输入的名称在数据存储中将不是唯一的，因此返回错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T21:55:16.277

不幸的是，您没有任何复选框或自动化系统来防止核心数据中的重复数据。所以你必须自己照顾它。它很容易实现。

您必须使用`NSPredicate`组合`fetchedResultsController`来执行搜索是否`name`已经存在。如果`name`您输入的已经存在，那么您的`fetchedResultsController.fetchedObjects`计数将大于零，因此您不允许重复输入。如果没有找到重复条目`fetchedResultsController.fetchedObjects`<1，那么您将允许条目。尝试这样的代码：

```
 - (IBAction)saveName
  {
    NSLog(@"saveArtistInformation");
    NSError *error = nil;

  // We use an NSPredicate combined with the fetchedResultsController to perform the search
if (self.nameText.text !=nil)
{
    NSPredicate *predicate =[NSPredicate predicateWithFormat:@"name contains[cd] %@", self.nameText.text];
    [fetchedResultsController.fetchRequest setPredicate:predicate];
}

if (![[self fetchedResultsController] performFetch:&error])
{
    // Handle error
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    exit(-1);  // Fail
}

// compare `fetchedResultsController`'s count if its <1 allow insertion

if ([fetchedResultsController.fetchedObjects count] < 1)
{
    NSLog(@"Found that Artist already in Core Data");
    Entity *entity = (Entity *)[NSEntityDescription insertNewObjectForEntityForName:@"Entity" inManagedObjectContext:self.managedObjectContext];
    entity.name = self.nameText.text;

    //call save method

    if (![managedObjectContext save:&error])
    {
        NSLog(@"Problem saving: %@", [error localizedDescription]);
    }
}
else
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Name  already exists" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alert show];
    [alert release];
} 
```

礼貌：[TheAppCodeBlog](http://www.theappcodeblog.com/2011/09/20/iphone-app-development-tutorial-core-data-duplicate-entities/)

# javascript - 如何在谷歌浏览器中调试无响应的页面？

> ID：10035840
> 
> 赞同：25
> 
> 时间：2012-04-05T20:52:06.990
> 
> 标签：javascript, google-chrome

我有一个相当复杂的 javascript 应用程序（它不使用外部框架），用户当前正在测试（几千行）。我一直在收到报告说用户在 Google Chrome 中收到弹出窗口说：

> 以下页面已无响应。您可以等待他们响应或杀死他们。

他们报告说，继续使用该应用程序的唯一方法是打开一个新的 Chrome 窗口，但消息每隔几分钟就会出现一次，并且只有在他们尝试转到新页面时才会发生。他们特别说他们点击进入一个新页面，并且当前页面永远不会改变，他们只会看到旋转加载图标一分钟，直到弹出窗口出现。

奇怪的是，我已经在这些用户遇到问题的 Chrome (18) 的确切版本上进行了广泛的测试，而且我没有发现任何问题。我有点难过，不知道现在该往哪里看，因为我无法复制它，关于在哪里看的任何想法至少尝试找出可能导致该错误的原因？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-08T15:02:49.520

在无响应期间使用 chrome javascript 调试器暂停（中断正在运行的代码）。这需要一些时间，但它应该在运行时间过长的中间中断。然后，您可以使用调试器控件四处走动，看看什么是不必要的循环。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-03-12T02:34:17.680

我知道这是一个老问题，但我也遇到了这个问题，我给你的最好建议如下：

完全关闭 Chrome，然后将“--enable-logging”添加到您的 chrome 快捷方式以使用该标志启动它，您甚至可以添加“--enable-logging --v=1”以启用详细日志记录。

我知道，插入断点不是一种选择，因为它位于一个新选项卡中，在我启动控制台之前就崩溃了。但是，通过启用日志记录，控制台会被写入 chrome 数据目录中的文件（“C:\Users\username\AppData\Local\Google\Chrome\User Data”）

我希望有一天这能帮助像我一样的人！:D

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-12T23:09:56.067

我今天有一个页面有一些错误的 JS（无限循环），我无法通过键盘快捷键或右键单击（Chrome 60.0.3112.113）打开开发工具。能够通过以下方式解决此问题：

1.  打开新标签
2.  打开开发工具（在空选项卡上）
3.  输入网址并加载
4.  在开发工具中暂停 JS 执行

也许这会对某人有所帮助！此外，chrome 调试器会在浏览器选项卡中保留断点（对于相同的 JS），因此如果我无法确定导致错误的确切原因，我的断点仍将存在于新选项卡中！

# jquery - 附加 JavaScript

> ID：10035844
> 
> 赞同：0
> 
> 时间：2012-04-05T20:52:33.497
> 
> 标签：jquery

我正在尝试将元素附加到`<div>`页面的 a，但它不起作用。

**第 1 页 (index.php)**

```
<a href=" another.php " id="p1id" type="button">Go to page 2</a> 
```

**第2页（另一个.php）**

```
<div id=p2id></a> 
```

**JavaScript (jqtest.js)**

```
$.("#p1id").click(function(){
    $.("#p1id").append()
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T20:56:22.363

问题

```
$.("#p1id").click(function(){
-^here
 $.("#p1id").append()
--^ here
}); 
```

去除那个`.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T20:56:50.950

试试这个：

```
<div id="p2id"></div> 
```

...

```
$("#p1id").click(function(event){
    $("#p1id").append();
    event.preventDefault();
    return false;
}); 
```

此外：

1.  你需要`append`一些东西
2.  看起来您正在使用锚点 ,`<a/>`作为按钮。您将需要阻止默认操作，即加载页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T20:58:02.447

你也`append()`没有参数地打电话。它需要一个`content`论据。

[http://api.jquery.com/append/](http://api.jquery.com/append/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T21:02:56.183

如果你的 html 是

```
<div id="p1id">A div<div>​ 
```

你可以追加喜欢

```
$(function(){
    $('#p1id').click(function(e){
        var myP=$('<p class="myClass">New paragraph</p>');
        $(this).append(myP);
    });
});​ 
```

一个例子是[here](http://jsfiddle.net/3bjNS/)。

# jquery - 动态更改内容时 CSS 保持 div 的高度

> ID：10035851
> 
> 赞同：0
> 
> 时间：2012-04-05T20:52:53.203
> 
> 标签：jquery, ajax, dynamically-generated, css

我试图根据他的内容强制 div 具有一定的高度，并且仅在加载新内容时更改它。

假设我有：

```
<div id="wrapper" style="width: 90%; margin: 0 auto;">
 <div id="collapse_saving_div" style="min-height: 100%;">
  <div id="my_content" style="width: 100%;">
    Content
    Content
    Content
  </div>
 </div>
  <div id="my_bottom_content" style="clear: both;">
  </div>
</div> 
```

我将使用以下脚本将内容动态加载到#my_content 中：

隐藏#my_content

显示一个 loader.gif

*内容被检索*

隐藏 gif

#my_content 淡入淡出

问题是，很明显，每当#my_content 被隐藏时，#my_content_bottom 就会出现，然后在新内容淡入而没有任何动画并且所有这些“div 跳跃”看起来很糟糕之后立即下降。

如果我可以使包装器 div 不崩溃，它将大致解决问题。

为了做到这一点，我尝试制作#collapse_saving_div 并将其最小高度设置为100%，我认为这样做会将他的高度固定在#my_content's，直到加载更大或更小的东西。但它不起作用。

有什么建议么？谢谢

编辑：通过使用 js 解决它

```
var content_height = $('#main_content').height();
        $('#main_content').hide();
        $('.loader').height(content_height);
        $('.loader').show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:58:26.743

在删除 div 的内容之前，添加这个：（原始 JS 因为我不做 jQuery）

```
elem.style.height = elem.offsetHeight+"px"; 
```

然后，在内容加载完毕后，当你希望新的高度生效时：

```
elem.style.height = "auto"; 
```

# sql - Oracle： WITH 语句执行缓慢

> ID：10035861
> 
> 赞同：0
> 
> 时间：2012-04-05T20:53:54.380
> 
> 标签：sql, performance, oracle, with-statement

最近，我一直在尝试将更多 WITH 语句合并到我的 Oracle SQL 中，以创建更清洁、更高效的代码。但是，我仍然觉得它实际上效率较低，但仅在某些条件下，这令人沮丧。

一个示例是为电话号码排名而创建的 WITH 语句。我希望它检索所有有效/有效电话号码中最好的。

这是我用于对电话号码进行排名的 WITH 语句示例：

```
Select * From (
WITH
PHONE_RANK as        
-- Description: Phone numbers with a RANK_NO generated based on importance.
(
    Select 
        ID as ID,
        PHONE_AREA || PHONE_NUMBER || PHONE_EXT as PHONE_NUMBER,
        TELE_CODE as TELE_CODE,
        PRIMARY_IND as PRIMARY_IND,
    --Generate a RANK_NO
        row_Number() over
        (
            Partition By ID
            Order By 
                ID,
                Decode(PRIMARY_IND,  'Y',1,  2),
                Decode(TELE_CODE,  'MA',1,  'PR',2,  'CA',3,  'CELL',4,  99)
        ) as RANK_NO
    From 
        SPRTELE
    Where 
        STATUS_IND is null
        and TELE_CODE in ('MA', 'PR')
        and Length(PHONE_AREA || PHONE_NUMBER || PHONE_EXT) >= 7
)

Select SPRIDEN.ID, PHONE_NUMBER
From SPRIDEN, PHONE_RANK  --SPRIDEN contains basic info (name, id, etc)
Where 
    SPRIDEN.CHANGE_IND is NULL
    SPRIDEN.ID = PHONE_RANK.ID
    and RANK_NO = 1
) 
```

如果加入到 SPRIDEN 表中，PHONE_RANK 运行得相当快。但是，当我尝试通过 RANK_NO 限制它时，运行时间要长得多。

*   在 PHONE_RANK 没有任何标准的情况下，它的运行时间不到 0.2 秒。
*   `and PHONE_RANK.RANK_NO = 1`大约需要3.5秒 。
*   当使用`and PHONE_RANK.RANK_NO = 1`它是更复杂代码的一部分时，它往往会扩展。

（开始编辑）

我在这个过程中使用了子查询。速度很棒，而且电话号码也不错。但是，由于最常见的数字是 PR 和 MA，并且可能不存在其中一个或另一个，因此我使用两个子查询来分别拉取一个。

我的“计划”很简单：根据主要指标和电话代码为每个学生/人提取最佳记录。因此，如果只有 PR 或 MA 记录，我们仍然会得到结果，因为会拉出最好的。但是，有时不存在 Phone MA 或 PR #，但我们仍然想要学生信息，因此必须将查询限制在主查询中并不理想（但第二个 WITH 语句应该能够处理这个问题）。

最终，我想将结果应用于与 SPRTELE 类似的地址表。提取电话号码的子查询很好，但使用单独的子查询提取街道、城市、州和邮政编码并不理想。而且，我们必须同时提取 PR 和 MA 地址，以防其中一个不存在。

在我看来，Address 和 Phone 表的设置都很糟糕，因为一个可以有多个 Phone/ADDRESS 类型（TELE_CODE、ATYP_CODE），并且每种类型的所有/没有记录都可能处于活动状态。此外，数据维护得不好（维护它将是一个野兽）。

对于 SPRTELE 表字段（索引已加星标）：

```
*ID (004000, 123456, etc)
*SEQNO (1, 2... n)
*TELE_CODE (MA, PR, etc)
ACTIVITY_DATE
COMMENT
CTRY_CODE_PHONE
DATA_ORIGIN
INTL_ACCESS
PHONE_AREA
PHONE_EXT
PHONE_NUMBER
PRIMARY_IND
ADDR_SEQNO
ATYP_CODE
STATUS_IND
UNLIST_IND
USER_ID 
```

如果有用，这是我用于电话号码的子查询。我还包括一个永久电话号码（TELE_CODE = 'PR'）。

```
(
Select PHONE_AREA || PHONE_NUMBER || PHONE_EXT
From SPRTELE
Where 
    ID = S1.ID
    and STATUS_IND is Null
    and TELE_CODE = 'MA'
    and SEQNO =
    (
        Select Max(SEQNO)
        From SPRTELE
        Where 
            ID = S1.ID
            and STATUS_IND is Null
            and TELE_CODE = 'MA'
    )
) as MA_Phone 
```

此外，这些是用于提取一个地址的子查询。同样，我必须使用两个来获取 MA 和 PR 地址类型，以防其中一个丢失。

```
--MAILING STREET ADDRESS
(
    Select STREET_LINE1 || ' ' || STREET_LINE2 || ' '|| STREET_LINE3
    From SPRADDR S2
    Where 
        S2.ID = S1.ID
        and ATYP_CODE = 'MA'
        and STATUS_IND is NULL
        and SEQNO =
        (
            Select MAX(SEQNO)
            From SPRADDR S2
            Where 
                S2.ID = S1.ID
                and ATYP_CODE = 'MA'
                and STATUS_IND is NULL
        )
) as MA_Street,

--MAILING CITY STATE ZIP
(
    Select CITY || ', ' || STAT_CODE || ' ' || ZIP
    From SPRADDR S2
    Where 
        S2.ID = S1.ID
        and ATYP_CODE = 'MA'
        and STATUS_IND is NULL
        and SEQNO =
        (
            Select MAX(SEQNO)
            From SPRADDR S2
            Where 
                S2.ID = S1.ID
                and ATYP_CODE = 'MA'
                and STATUS_IND is NULL
        )
) as MA_Address, 
```

（结束编辑）

以下任何帮助都会很棒：

1.  为什么选择“RANK_NO = 1”会导致性能如此低下？是 WITH 语句、Partition By 还是其他？
2.  有没有比使用“Partition By”然后选择 RANK_NO = 1 来获得最高电话号码更好的方法？
3.  改进上述代码的建议。
4.  任何其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T06:18:17.680

在此查询中，硬（昂贵）操作是获取 rank - row_number 函数 - 这需要（有时在查询中不明确）排序。

1.  可能这是因为当你不写RANK_NO = 1时，你没有使用其他的RANK_NO列，所以Oracle不需要计算它。

2.  您可以订购内部查询，并在外部查询中使用 rownum，但不能有分区。你有一个partion，一个single 1，一个single 2，依此类推。

3.  如果您可以过滤从 SPRTELE 表中获取的行，您将获得更快的速度。几行->更快的速度。
4.  您应该查看整个解释计划以改进某些内容。发布查询的解释计划。

# python - 仅刷新 http 帖子上的 div

> ID：10035863
> 
> 赞同：0
> 
> 时间：2012-04-05T20:53:58.407
> 
> 标签：python, google-app-engine, post

在这段代码中；

```
def post(self):
    chtml = displayhtml(public_key, error = None)
    template_values = {'captchahtml': chtml}
    path = os.path.join(os.path.dirname(__file__), 'main.html')
    self.response.out.write(template.render(path, template_values)) 
```

当发出 http post 请求时，我可以使用给定的模板元素刷新整个页面。

我的问题是是否可以只刷新 div 或 iframe 而不是整个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:04:18.170

是的，可以在请求期间刷新页面的一部分。

但它需要浏览器端的一些应用程序或 UI 逻辑来促进这一点。

一种方法是使用专用的 iframe。将 iframe 视为只是浏览器窗口中的浏览器窗口。您可以将您喜欢的任何内容插入 iframe，并且可以独立于页面中围绕它的内容刷新 iframe。iframe 方法通常用于周围页面的内容和 iframe 本身的内容来自不同地方的情况。例如，facebook“like widget”使用来自 facebook 的内容。很长一段时间以来，Facebook 都为人们提供了一种嵌入页面的方法，即一个包含类似小部件的 iframe。通过这种方式，facebook 能够保持对其图像、品牌、外观和感觉等的控制，而不管小部件嵌入到哪种类型的页面中。

当框架的内容和周围位的内容来自同一个源时——比如你的 appengine 实例，那么你就不需要 iframe。您可以使用一个简单的 div，并异步更新它。

这种方法有时被称为 AJAX - 指的是异步 Javascript 和 XML。基本思想意味着从浏览器向服务器发出异步请求（超出正常的页面刷新周期）以获取内容；然后，在 javascript 中实现的浏览器逻辑可以以它选择的任何方式更新 UI。

与名称相反，发送 XML 作为此类异步请求的响应并不是必须的。事实上，更常见的方法是使用 JSON 作为数据格式。但可以肯定的是，当使用这种设计模式时，服务器上的 Python 代码通常不会返回格式化的 html。它将以某种合理的格式（XML、JSON 等）返回数据，然后在浏览器中运行的 Javascript 逻辑将在适当的位置将该数据呈现为 HTML。

在“标准”网络浏览器模型中，每个页面请求都会发送一个 HTTP 请求（尽管可能会针对 .css 文件、图像等发送额外的请求），并且每个额外的请求都意味着一次完整的页面刷新。在 AJAX 模型中，浏览器最初像以前一样请求网页，但可以异步发送额外的 HTTP 请求，而无需完全刷新页面。

# c# - 有没有简单的方法（包装器/字典）将 Keys 枚举转换为 SenKeys 字符串？

> ID：10035868
> 
> 赞同：2
> 
> 时间：2012-04-05T20:54:47.937
> 
> 标签：c#, dictionary, sendkeys

我需要将 Keys 转换为 Sendkeys 方法中使用的字符串。样本：

Key.Enter 到 {ENTER}

有什么简单的方法可以做到这一点吗？我找不到。

```
 if (key == Key.Enter)
     SendKeys.SendWait({ENTER}); 
```

我需要转换所有密钥的东西。如果密钥 == Key.a，我将只发送一个。但是，如果它是一个命令键（例如：Key.Enter），我需要将其设为高位并添加 {}。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:56:10.400

一种可能的方法是将`Key`标准枚举器包装到包装器类中，通过这种方法，您可以创建一个`ToString()`将枚举器值转换为字符串的方法。

看看这个例子：

**枚举包装类**

```
class KeyEnumWrapper {
        public System.Windows.Forms.Keys key { get; set; }

        public KeyEnumWrapper(System.Windows.Forms.Keys key) {
            this.key = key;
        }

        public string ToString() {
            return "{" + key.ToString().ToUpper() + "}";
        }
    } 
```

**客户（使用）**

```
 private void Form1_KeyUp(object sender, KeyEventArgs e) {
            KeyEnumWrapper wp = new KeyEnumWrapper(e.KeyCode);
            SendKeys.SendWait(wp.ToString())
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:58:52.170

```
Key.Enter.ToString().ToUpper() 
```

# php - 在 php/codeigniter 中创建文件夹并上传图片

> ID：10035884
> 
> 赞同：3
> 
> 时间：2012-04-05T20:55:38.070
> 
> 标签：php, codeigniter

我的网站上有一个简单的图片上传表单，用户可以一次上传多张图片。我想让我的图像根据月份和年份按以下格式组织在文件夹中：MONTH-YEAR，所以每次新上传开始时，我首先检查该文件夹是否存在，如果不存在则创建一个。

问题是，如果当前月份的文件夹不存在并且我尝试上传图像，则代表当前月份的文件夹会正确创建，但不会上传任何图像。但是，如果该文件夹已经存在，则所有图像都可以毫无问题地上传。这是我的代码：

```
 $folderName = date('m-y');
    $pathToUpload = './uploads/photos/' . $folderName;
    if ( ! file_exists($pathToUpload) )
    {
        $create = mkdir($pathToUpload, 0777);
        $createThumbsFolder = mkdir($pathToUpload . '/thumbs', 0777);
        if ( ! $create || ! $createThumbsFolder)
        return;
    }

    $imgName= uniqid('', TRUE);
    $config['upload_path'] = $pathToUpload;
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size'] = '9999';
    $config['file_name'] = $imgName . '.jpg';

    $this->upload->initialize($config);
    $upload = $this->upload->do_upload("Filedata"); 
```

任何想法为什么第一次上传不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T02:23:09.020

不要听这些人的。你的逻辑很好——如果`mkdir()`任何时候都返回 false，那么它应该会失败。

但是，正如 mazzzzz 所建议的那样，在这种情况下我会抛出一个异常，而不是返回 false。

我也会这样做（而不是多次调用`mkdir()`）：

```
<?php
mkdir($pathToUpload . '/thumbs', 0777, TRUE); 
```

这将递归创建创建 thumbs 文件夹所需的所有缺失目录，我怀疑这是你失败的地方。

如果不是这种情况，那么不知何故您没有权限，如果您可以上传文件，这似乎不太可能。

此外，您可能有统计缓存问题。尝试`clearstatcache()`之前运行`do_upload()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T01:57:47.747

为了在评论中进一步 The Jumping Frog 的回答，看起来您可能会在上传之前返回，因为您没有抛出错误，但如果认为文件夹没有被创建，即使它们是，也会默默地失败。

如果您意识到这一点`$create`并且`$createThumbsFolder`应该为程序继续运行，那么您可以测试`if`语句的逻辑。if 基本上表示`if (!true || !true)`，意思`if (false || false)`，可以简化为，`if (true)`因为如果其中一个为假，则返回真。正如 Frog 的解决方案所说的`if (!(true && true))`简化为`if (!true)`简化为`if (false)`，所以如果两个值都是想要的（和预期的）它就不会返回。

希望这有助于解释逻辑错误，祝上传者好运！

PS不要沉默失败！

# jquery - 添加第二个 for 语句来运行

> ID：10035885
> 
> 赞同：0
> 
> 时间：2012-04-05T20:55:41.697
> 
> 标签：jquery, function, datepicker

更新我的代码以反映我尝试合并这两个 for 语句。

```
function unavailableDays(date) {
//date array to be disabled
var disabledDays = ["1963-3-31", "1965-9-18", "1965-9-19",
"1965-10-2", "1965-10-3", "1965-10-9", "1965-10-10"];

var yy = date.getFullYear(), mm = date.getMonth(), dd = date.getDate();
for (i = 0; i < disabledDays.length; i++) {
if($.inArray(yy + '-' + (mm+1) + '-' + dd,disabledDays) != -1 || new Date() < date) {
return [false];
}
}
return [true];

//date range to be disabled
var first = new Date("1978-8-10");
var last = new Date("1978-11-05");
var unavailableRange = []; 

var yy = date.getFullYear(), mm = date.getMonth(), dd = date.getDate();
for(j = first; j < last; j.setDate(j.getDate() + 7)){
if($.inArray(yy + '-' + (mm+1) + '-' + dd,unavailableRange) != -1 || new Date() < date) {
return [false];
}
}
return [true];
} 
```

我正在尝试将这个具有日期范围的初始变量合并到下面的 availableDays 函数中，以便我可以在 datepicker 的 beforeShowDay 中使用它来禁用日期。我尝试创建一个单独的函数，但这对 beforeShowDate 不起作用，所以我认为它需要在其中。

```
var first = new Date("1978-08-10");
var last = new Date("1978-11-05");
var dates = [];

for (var i = first; i < last; i.setDate(i.getDate() + 7))
dates.push(new Date);

var disabledDays = ["1963-2-17", "1963-2-24", "1963-3-3", "1963-3-10", "1963-3-17", "1963-3-24", "1963-3-31", "1965-9-18", "1965-9-19", "1965-10-2", "1965-10-3", "1965-10-9", "1965-10-10"];

function unavailableDays(date) {
    var yy = date.getFullYear(),
        mm = date.getMonth(),
        dd = date.getDate();
    for (i = 0; i < disabledDays.length; i++) {
        if ($.inArray(yy + '-' + (mm + 1) + '-' + dd, disabledDays) != -1 || new Date() < date) {
            return [false];
        }
    }
    return [true];
}

$(document).ready(function () {
    $('.selector').datepicker({
        inline: true,
        dateFormat: 'yy-mm-dd',
        constrainInput: true,
        changeYear: true,
        changeMonth: true,
        gotoCurrent: true,
        minDate: new Date(1962, 1 - 1, 1),
        //months are index-based(1-1)
        maxDate: new Date(2011, 10 - 1, 24),
        yearRange: '-60y',
        beforeShowDay: unavailableDays,
        onSelect: function (dateText, inst) {
            $("#img").attr("src", "http://www.example.com" + dateText + ".jpg");

            var chosenDates = $.datepicker.parseDate('yy-mm-dd', dateText);
            var backToString = $.datepicker.formatDate('MM dd' + ',' + ' yy', chosenDates);
            $('.info').html('You are viewing:' + '<br />' + backToString);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:06:05.943

您应该将 availableDays 函数的返回值放入一个变量中并在让操作继续之前测试该值，因此它必须以编程方式等待函数完成才能继续。

```
onSelect: function (dateText, inst) {
var blackouts = unavailableDays(date);
    if(blackouts==true){
        $("#img").attr("src", "http://www.example.com" + dateText + ".jpg");

        var chosenDates = $.datepicker.parseDate('yy-mm-dd', dateText);
        var backToString = $.datepicker.formatDate('MM dd' + ',' + ' yy', chosenDates);
        $('.info').html('You are viewing:' + '<br />' + backToString);
    }
} 
```

# html - 如何获取与 img 结合的链接以更改悬停时的背景颜色

> ID：10035886
> 
> 赞同：0
> 
> 时间：2012-04-05T20:55:45.930
> 
> 标签：html, css

在此处查看演示：[jsfiddle 演示](http://jsfiddle.net/7k3BT/5/)
我有一个表格，其中包含一系列图标，每个图标下方都有文本。
应该发生的是，当光标悬停时，文本的背景和字体应该改变，并且图像应该是链接的一部分。

问题是用于将文本移动到图像下方的段落标签。
来自演示：
Link1：链接背景和字体更改。好的，现在将 a 标签移到 img 之外...
Link2：链接背景没有改变（？！），字体改变，但图像是链接的一部分。
Link3：这是所需的行为，但 [a] 和 [p] 标记不匹配。

有人可以解释一下
- 为什么段落标签似乎“阻止”了背景颜色的变化？
- 为什么不匹配的标签允许这个工作？
- 有没有更清洁的方法来实现这种行为？（没有不匹配的标签）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:01:45.240

见[http://jsfiddle.net/7k3BT/6/](http://jsfiddle.net/7k3BT/6/)

我删除了`<p>`链接文本周围的标签`link2`，它似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:03:45.447

`p`不是内部的有效标签`a`，因为`a`是内联`p`的，而是块。

通过添加`display: inline-block`来解决此问题`#linkmenu a`。

[更新的小提琴](http://jsfiddle.net/7k3BT/7/)

# ruby-on-rails - 按数组中的索引查找记录？

> ID：10035887
> 
> 赞同：1
> 
> 时间：2012-04-05T20:55:46.980
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3

所以就像你可以做`@items.active.first`第一个项目一样，有没有办法选择别的东西，比如第 56 个？

显然`@items.active.fiftysixth`不起作用，但是还有其他方法可以访问它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T21:00:07.517

当集合是关系时，您可以使用偏移量（.first 只是`limit 1`在 SQL 中转换为）

```
@items.active.offset(55).first 
```

或者，如果它是一个数组：

```
@items.active[55] 
```

# asp.net-mvc-3 - 无法让 MVC3 DDL SelectedValue 工作

> ID：10035888
> 
> 赞同：0
> 
> 时间：2012-04-05T20:55:49.060
> 
> 标签：asp.net-mvc-3, ddl, selectedvalue

这是我的虚拟机

```
 public class CountriesViewModel
    {
        public string CurrentCountry { get; set; }
        public IEnumerable<Country> Countries { get; set; }
    } 
```

与我的控制器

```
 public class FiltersController : Controller
    {
        public ActionResult _ShipToCountry(IEnumerable<Country> countries,
                                           string currentCountry = "AE")
        {
            var viewModel = new CountriesViewModel
            {
                Countries = countries.OrderBy(x => x.Name),
                CurrentCountry = currentCountry
            };

            return PartialView(viewModel);
        }
    } 
```

最后是视图

```
@Html.DropDownListFor(x => x.Countries,
                      new SelectList(Model.Countries.ToList(),
                                     "Code", "Name", Model.CurrentCountry)) 
```

其中 Model.CurrentCountry 是代码。

DDL 正确呈现

```
...
<option value="UA">Ukraine</option>
<option value="AE">United Arab Emirates</option>
<option value="UK">United Kingdom</option>
.... 
```

但是没有国家被选中，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:58:26.590

如果不是，您应该将`CurrentCountry`prop 设置为表达式，否则您无法在表单提交时获得所选国家/地区。

```
@Html.DropDownListFor(x => x.CurrentCountry,
                      new SelectList(Model.Countries.ToList(), "Code", "Name")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:51:28.167

这有效...

代替

```
@Html.DropDownListFor(x => x.Countries,
                      new SelectList(Model.Countries.ToList(), 
                                     "Code", "Name", Model.CurrentCountry)) 
```

用过的

```
@Html.DropDownList(Model.CurrentCountry,
                   new SelectList(Model.Countries.ToList(),
                                  "Code", "Name", Model.CurrentCountry)) 
```

# java - Java 合法前向引用

> ID：10035890
> 
> 赞同：12
> 
> 时间：2012-04-05T20:55:55.833
> 
> 标签：java, reference, forward, static-initialization

以下代码是合法前向引用的情况吗？如果是，为什么？

```
public class MyClass
{
  private static int x = getValue();
  private static int y = 5;
  private static int getValue()
  {
    return y;
  }
  public static void main(String[] args)
  {
    System.out.println(x);
  }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-05T20:58:49.190

您拥有的上述代码是完全合法的 Java。在 Java 中，静态字段的初始化方式如下：首先，所有字段都设置为其类型的默认值（0、`false`或`null`），然后按照声明它们的顺序进行初始化。这意味着上面的代码保证执行以下操作：

1.  设置`x`和`y`为零，因为这是 s 的默认值`int`。
2.  `x`通过调用进行初始化`getValue()`，它读取 的值`y`。由于`y`尚未初始化，它的值仍然为 0。
3.  初始化`y`为 5。

这意味着`x`它将取值 0 并将`y`取值 5。这种行为是可移植的且有保证的。 **[你可以在这里看到这个](http://ideone.com/vz6Xs)**。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T21:00:34.290

您可以通过它编译的事实来判断它是否合法；与其他一些语言不同，Java 没有“未定义行为”的概念。这里发生的事情已经完全说明。这可能违反直觉，但它特别合法：您可以在从初始化另一个静态变量时调用的方法初始化静态变量之前访问它。`y`直接从`x`' 的初始化程序访问的表面上相似的情况——即，

```
private static int x = y;
private static int y = 5; 
```

是特别不允许的。真的没有什么强有力的理由——它就是这样。

# java - 如何在 Java 字符串中用 \u 替换 \\u

> ID：10035891
> 
> 赞同：3
> 
> 时间：2012-04-05T20:55:56.800
> 
> 标签：java, string, unicode, unicode-string

我有一个格式的字符串：

> “aaa\\u2022bbb\\u2014ccc”

我想显示这两个特殊字符，但要做到这一点，我必须首先将字符串转换为这种格式：

> “aaa\u2022bbb\u2014ccc”

我试过写这个，但它给出了一个编译错误：

```
String encodedInput = input.replace("\\u", "\u"); 
```

这必须是直截了当的，但我就是无法理解。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T21:23:02.173

不幸的是，我不知道某种评估。

```
 String s = "aaa\\u2022bbb\\u2014ccc";
    StringBuffer buf = new StringBuffer();
    Matcher m = Pattern.compile("\\\\u([0-9A-Fa-f]{4})").matcher(s);
    while (m.find()) {
        try {
            int cp = Integer.parseInt(m.group(1), 16);
            m.appendReplacement(buf, "");
            buf.appendCodePoint(cp);
        } catch (NumberFormatException e) {
        }
    }
    m.appendTail(buf);
    s = buf.toString(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T21:03:45.277

除了逃避你的转义——正如其他人（例如barsju）所指出的——你还必须考虑到通常将`\uNNNN`符号转换为实际的Unicode字符是由Java编译器在编译时完成的。

因此，即使您解决了反斜杠转义问题，您也可能很难让实际的 Unicode 字符显示出来，因为您似乎是在运行时而不是在编译时操作字符串。

[这个答案](https://stackoverflow.com/a/4997427/312407)提供了一种`\uNNNN`用实际对应的 Unicode 字符替换运行时字符串中的转义序列的方法。请注意，该方法在错误处理、边界检查和意外输入方面留下了一些 TODO。

（编辑：我认为这里提供的基于正则表达式的解决方案，例如 dash1e 会比我链接的方法更好，因为它们在处理意外输入数据方面更加完善）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T20:58:36.060

尝试

```
Pattern unicode = Pattern.compile("\\\\u(.{4})");
Matcher matcher = unicode.matcher("aaa\\u2022bbb\\u2014ccc");
StringBuffer sb = new StringBuffer();
while (matcher.find()) {
    int code = Integer.parseInt(matcher.group(1), 16);
    matcher.appendReplacement(sb, new String(Character.toChars(code)));
}
matcher.appendTail(sb);
System.out.println(sb.toString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T21:00:06.163

你需要逃脱你的逃脱：

```
System.out.println("aaa\\u2022bbb\\u2014ccc".replace("\\\\u", "\\u")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T21:00:19.020

```
String input = "aaa\\u2022bbb\\u2014ccc";
String korv = input.replace("\\\\u", "\\u");
System.out.println(korv); 
```

=>

```
aaa\u2022bbb\u2014ccc 
```

这是因为“\”是字符串中的特殊字符，所以你也需要引用它。“\” == “\”。

# java - 如何知道一个点是否在android中的多边形内

> ID：10035894
> 
> 赞同：2
> 
> 时间：2012-04-05T20:56:14.703
> 
> 标签：java, android, graphics

给定一系列描述多边形的点，是否有一些简单的方法可以知道给定点是否在多边形内？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T21:00:22.073

您需要实现一种著名的算法[http://softsurfer.com/Archive/algorithm_0103/algorithm_0103.htm](http://softsurfer.com/Archive/algorithm_0103/algorithm_0103.htm)

# user-interface - 用于 C++ 的 WUI（Web GUI）框架

> ID：10035896
> 
> 赞同：0
> 
> 时间：2012-04-05T20:56:23.373
> 
> 标签：user-interface, web, embedded

对于在 Windows 和可能的其他平台上与 C++ 一起使用的 WUI 框架有什么建议吗？

这个[Good C++ GUI library for Windows](https://stackoverflow.com/questions/115045/good-c-gui-library-for-windows)推荐 Qt 用于 C++ 的多平台 GUI。我正在寻找类似的东西，它允许对小型轻量级应用程序进行基于 Web 的远程 GUI 访问。

sourceforge 上有一个 WUI 框架 - [http://wui.sourceforge.net/wui-overview.php](http://wui.sourceforge.net/wui-overview.php) - 但它适用于 Java 而不是 C++。

理想规格：

*   与 Qt 一样，可与标准 C++ 一起使用
*   与 Qt 一样，是多平台的（Windows、Linux、嵌入式）
*   使用浏览器访问端口，例如 127.0.0.1:8080，或远程访问。
*   就像网络设备（路由器等）为 1 个或 2 个客户端实现了一个小型网络服务器。
*   与 IIS 或 Apache 不同，它在应用程序中很小且独立。
*   可选：与 Qt 一样，具有所见即所得的设计器工具

为什么我想要这个：

*   用于远程访问运行 Linux 或 Windows（xp、Win7 等）的嵌入式互联网设备上的 GUI
*   在用于测试和诊断的嵌入式应用程序和实用程序之间共享更多代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:36:24.853

你的意思是像[Wt](http://www.webtoolkit.eu/wt)吗？

# ruby-on-rails - 生态模板在使用“结束”语句时呈现整数

> ID：10035900
> 
> 赞同：0
> 
> 时间：2012-04-05T20:56:46.043
> 
> 标签：ruby-on-rails, backbone.js, eco, jst

我有一个非常简单的主干视图，我想有条件地渲染一些 HTML 块。我看到一种行为，在有条件呈现的 HTML 之后，也呈现了一个整数。据我所知，当我使用`end`语句终止条件块时似乎会发生这种情况。

这是一些为我演示错误的代码：

```
<% if true: %>Hello World!<% end %> 
```

我希望这会呈现`Hello World!`到包含元素中。但是，它实际上是在渲染`Hello World!2`.

如果我在同一个模板中添加几个块：

```
<% if true: %>Foo, <% end %>
<% if true: %>Bar, <% end %>
<% if true: %>Baz<% end %> 
```

我希望这会呈现`Foo, Bar, Baz`到包含元素中。但是，它实际上是在渲染`Foo, 2 Bar, 5 Baz8`. 在运行了更大的一组之后，似乎打印的整数每次都增加 3。通过阅读 gem 的[自述文件](https://github.com/sstephenson/eco)，我看不出我做错了什么。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:06:24.617

我也有同样的问题。你已经解决了吗？

我认为这是由于*if*语句被包装在`__obj.push()`编译的 JS 中的调用中引起的。例如，在我的脚本中，有一段代码

```
<%- if !@blok: %>
  <%- to_html(@create_link('c', @session['course'])) %>
<%- end %> 
```

它被编译为

```
[1] __out.push(!this.blok ?
[2]  (__out.push('\n '),
[3]   __out.push(to_html(this.create_link('c', this.session['course']))),
[4]   __out.push('\n ')
[5]  ) : void 0) 
```

如果我理解正确，这意味着它将首先将`\n`函数的结果推`\n`送到输出。但最后一个`push`（第 4 行）将返回数组中元素的数量，这些元素又将由外部`push`（第 1 行）推入数组本身。

我试图改变它`Array.prototype.push`以返回其他东西，但似乎更混乱（因为它是核心功能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T04:17:52.903

或者，您可以使用后缀格式。

```
<%= "Hello World!" if true %> 
```

# jquery - jQuery 平滑滚动当前/活动

> ID：10035905
> 
> 赞同：0
> 
> 时间：2012-04-05T20:56:56.683
> 
> 标签：jquery, scroll, smooth

我在一个单页网站上使用 jQuery Smooth Scroll，每个“面板”的右上角都有导航。每次用户更改“面板”时，我想通过在导航中突出显示该选择来显示当前选择的“面板”。插件中是否已经内置了一种简单的方法来做到这一点？谢谢！

[jQuery 平滑滚动网站](https://github.com/kswedberg/jquery-smooth-scroll)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:11:09.413

假设您的每个导航按钮共享相同的类（例如`.navbutton`）但具有不同的 id（例如`#nav1`, `#nav2`, `#nav3`），您可以在您的 css 中创建一个新类（让我们称之为`.selected`）

```
.selected {
    background: red;
} 
```

然后，当你执行你的滚动代码时，也这样做：

```
$(".navbutton").each(function(){ $(this).removeClass('selected'); }); // remove selected from all Nav Buttons
$("#nav1").addClass('selected'); // Add class to single Nav Button (assuming nav1 was clicked) 
```

# c - C语言中的windows编程

> ID：10035908
> 
> 赞同：2
> 
> 时间：2012-04-05T20:57:13.913
> 
> 标签：c, windows

我是使用 C 学习 windows 编程的初学者。我读取引导扇区的程序为每个驱动器（即软盘或硬盘）显示相同的输出。该程序不应该为每个驱动器生成相同的输出。

```
#include <windows.h>
#include <stdio.h>
#include <conio.h>

#pragma pack(1)
struct boot
{
BYTE JUMP[3];
char bsOemName[8];
WORD bytesperSector;
BYTE sectorspercluster;
WORD sectorsreservedarea;
BYTE copiesFAT;
WORD maxrootdirentries;
WORD totalSectors;
BYTE mediaDescripter;
WORD sectorsperFAT;
WORD sectorsperTrack;
WORD sides;
WORD hiddenSectors;
char reserve[480];
WORD volumelabel;
};
void ReadSector(char *src,int ss,int num,void *buff);

void main()
{
struct boot b;
ReadSector("\\\\dell-PC\\c:",0,1,&b);
printf("Boot Sector name: %d\n",b.bsOemName);
printf("Bytes per Sector: %d\n",b.bytesperSector);
printf("Sectors per Cluster: %d\n",b.sectorspercluster);
printf("Total sectors: %d\n",b.totalSectors);
printf("copies FAT: %d\n",b.copiesFAT);
printf("hidden sectors: %d\n",b.hiddenSectors);
printf("volume label: %d\n",b.volumelabel);

}
void ReadSector(char *src,int ss,int num,void *buff)
{
HANDLE h;
unsigned int br;
h=CreateFile(src,GENERIC_READ,FILE_SHARE_READ,0,OPEN_EXISTING,0,0);
SetFilePointer(h,(ss*512),NULL,FILE_BEGIN);
ReadFile(h,buff,512*num,&br,NULL);
    CloseHandle(h);
} 
```

它为我传递给 ReadSector() 函数的每个参数生成相同的输出。也就是说，如果我通过`d:`or `e:`，输出总是相同的。我是否将垃圾值作为输出？

```
Boot Sector name: 1637707
Bytes per Sector: 52428
Sectors per Cluster: 204
Total sectors: 52428
copies FAT: 204
hidden sectors: 52428
volume label: 52428 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:00:58.903

1.  检查每个调用的返回状态以确定它是否给出错误。如果是这样，您可以通过查找错误代码并确定其含义来了解您做错了什么。

2.  为确保您获得值，请在使用之前初始化结构：

> ```
>  struct boot b;   
>   memset (&b, 0, sizeof b); 
> ```

我任意选择了零，但任何值都可以。

# jqgrid - jqGrid内联删除：所选行“selrow”不正确

> ID：10035911
> 
> 赞同：1
> 
> 时间：2012-04-05T20:57:40.793
> 
> 标签：jqgrid

我有一个内联删除按钮，我想将更多数据附加到删除消息弹出窗口中，如下所示：“使用代码 = 7 删除选定行？”

我在 delOptions 中使用以下内容：

```
beforeShowForm: function ($form) {
var sel_id = $("#list").jqGrid('getGridParam', 'selrow');
$("td.delmsg", $form[0]).html("Delete record with <b>code=" + $("#list").jqGrid('getCell', sel_id, 'cd') + "</b>?");} 
```

问题是如果我单击删除按钮而不首先单击行的任何部分，则 selrow 要么为空，要么获取先前选择的行而不是当前选择的行！

单击垃圾桶图标时如何选择行？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T23:39:21.810

我想您使用的是我在[旧答案](https://stackoverflow.com/a/6914529/315935)中发布的示例。它是在导航栏中使用删除按钮（表单编辑的一部分）的情况下编写的。

“删除”对话框中有一个隐藏行可以帮助您。试试这个

```
beforeShowForm: function ($form) {
    // get comma separated list of ids of rows which will be delete
    // in case of multiselect:true grid or just id of the row.
    // In the code below we suppose that single row selection are used
    var idOfDeletedRow = $("#DelData>td:nth-child(1)").text();
    $form.find("td.delmsg").eq(0)
        .html("Delete record with <b>code=" +
            $(this).jqGrid('getCell', idOfDeletedRow, 'cd') + "</b>?");
    // REMARK: in old versions of jqGrid you can't use $(this) and
    //         will have to use something like $("#list")
} 
```

# vba - HTML 到 Excel 格式转换 - 同一单元格中的 break 和 li

> ID：10035914
> 
> 赞同：4
> 
> 时间：2012-04-05T20:57:48.780
> 
> 标签：vba, excel, html-parsing

我在本周早些时候发布了一个关于 HTML 到 Excel 转换的问题，这对我来说效果很好。我得到的示例宏代码在将代码从 HTML 格式转换为 Excel 单元格方面做得很好（感谢 Siddharth Rout！）。我现在遇到的问题似乎无法在任何地方找到答案，这与 IE 对象如何处理 Excel 中的段落、中断和列表项有关。p、br 和 li 将文本移动到原始单元格下方的单元格中，覆盖这些单元格中的所有数据。有没有办法让 HTML 块只显示在一个单元格中（意味着每个新行标记只会在同一个单元格中创建一个新行）？

**VBA 代码**

```
Sub Sample()
    Dim Ie As Object

    Set Ie = CreateObject("InternetExplorer.Application")

    With Ie
        .Visible = False

        .Navigate "about:blank"

        .document.body.InnerHTML = Sheets("Sheet1").Range("A1").Value

        .document.body.createtextrange.execCommand "Copy"
        ActiveSheet.Paste Destination:=Sheets("Sheet1").Range("A1")

        .Quit
    End With
End Sub 
```

**示例 HTML**

```
<p>  Here are some possible uses:</p>  <ul>  <li><font color = "red"> syntax highlighting code snippets</font></li>  <li style ="font-weight:bold; color: orange">validating credit card numbers, phone numbers, and zip codes</li>  <li style = "font-style: italic">styling email addresses and tags</li>  </ul> 
```

**显示在多行上的示例输出**（希望在一个单元格中显示多行 - 类似于 shift+enter 的工作方式）

```
Here are some possible uses:

syntax highlighting code snippets

**validating credit card numbers, phone numbers, and zip codes**

*styling email addresses and tags* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:17:18.530

我不确定你是否可以这样做（**我可能是错**的）。但是，如果这只是您的数据被覆盖的问题，那么这里有一个替代方案:)

**逻辑：**不要将其粘贴到同一张工作表中，而是将其粘贴到临时工作表中，然后复制这些行并将它们**插入**到 sheet1 中，这样您的数据就不会被覆盖。见快照。

**快照：**

![在此处输入图像描述](../Images/d145dc08ad2683428fdfa476dd1098f4.png)

**代码：**

```
Sub Sample()
    Dim ws As Worksheet, wstemp As Worksheet
    Dim Ie As Object
    Dim LastRow As Long

    Set Ie = CreateObject("InternetExplorer.Application")

    Set ws = Sheets("Sheet1")

    '~~> Create Temp Sheet
    Set wstemp = Sheets.Add

    With Ie
        .Visible = True

        .Navigate "about:blank"

        '~~> I am assuming that the data is in Cell A1
        .document.body.InnerHTML = ws.Range("A1").Value

        '~~> Deleting the row which had the html string. I am assuming that it was in Row 1
        ws.Rows(1).Delete

        .document.body.createtextrange.execCommand "Copy"
        wstemp.Paste Destination:=wstemp.Range("A1")

        '~~> Find the last row in the temp sheet
        LastRow = wstemp.Cells.Find(What:="*", After:=wstemp.Range("A1"), SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row

        '~~> Copy that data
        wstemp.Rows("1:" & LastRow).Copy

        '~~> insert it in Sheet1
        ws.Rows(1).Insert Shift:=xlDown

        .Quit
    End With

    '~~> Delete Temp sheet
    Application.DisplayAlerts = False
    wstemp.Delete
    Application.DisplayAlerts = True

End Sub 
```

高温高压

# sencha-touch-2 - Sencha Touch 2：如何创建历史功能？

> ID：10035919
> 
> 赞同：0
> 
> 时间：2012-04-05T20:58:03.943
> 
> 标签：sencha-touch-2

示例： http: [//itunes.apple.com/us/app/where-to-eat-free-gps-restaurant/id468661982](http://itunes.apple.com/us/app/where-to-eat-free-gps-restaurant/id468661982?mt=8) ?mt= 8 在标签栏上，有一个“最近”，它会记录你的任何东西看过。

我想为我的网络应用程序（购物指南）创建它。用户从列表中查看各种商店，当他们选择查看商店时，它会被记录下来。有点像浏览器历史。

我知道要求完整的代码太多了，所以有人可以把我推向正确的方向吗？就像向我解释如何开始，我需要知道什么或者更好地指出我那里的任何例子（我还没有找到一个）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:47:31.100

尝试`Ext.data.Store`在 Sencha Touch 中使用来创建用户浏览历史的数据存储。当他们查看商店时，将其添加为商店中的商品。您将需要创建一个`Ext.data.Model`来描述视图操作。您还可以将商店与您的后端同步。这一切都在 Sencha Touch Docs 中。

如果您需要示例，MVC 示例使用商店（我认为）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:09:57.140

您可以查看 Sencha Touch 2 入门文档。有[历史支持](http://docs.sencha.com/touch/2-0/#!/guide/history_support)部分。希望这有帮助。祝你好运 ...

# mercurial - 子存储库的内部 Vrs 外部路径

> ID：10035920
> 
> 赞同：2
> 
> 时间：2012-04-05T20:58:12.993
> 
> 标签：mercurial, mercurial-subrepos

我有一个由 mercurial 控制的应用程序 A 和一个也由 mercurial 控制的库 B 的存储库。**在应用程序 A 的存储库中，它使用路径中央存储库路径ssh://user@1.2.3.4/B**将子存储库映射到库 B 的存储库。这对我们的内部开发来说已经足够了，但是我们需要外部访问，但是我们不能使用域名作为我们的路由器批量。是否可以将子存储库定义为：

```
[internal]
B = ssh://user@1.2.3.4/B
[external]
B = ssh://user@domain/B 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:01:38.773

我能找到的唯一方法（哪种方法有效）是让每个开发人员[设置存储库的路径](http://mercurial.selenic.com/wiki/SubrepoRemappingPlan "重新映射计划")。因此，对于上面的示例，内部开发人员的路径将保持不变，但外部开发人员会将其子路径更改为：

```
ssh://user@1.2.3.4/B = ssh://user@domain/B 
```

# android - 简单布局问题 - 将菜单按钮对齐到最右边，居中

> ID：10035921
> 
> 赞同：0
> 
> 时间：2012-04-05T20:58:20.107
> 
> 标签：android, android-layout

让图标挤在我想要的位置时遇到了很多麻烦。我查看了 3 个不同的 Stack Overflow 问题，并尝试将图像放置在 RelativeLayout、LinearLayout 和 TableRow 中。所有这些都有各种 XML 选项。从来没有设法让图标向右移动并在分配空间的顶部和底部之间居中。在下面的图片中，红色是现在的位置，蓝色是我想要的位置。这是一张图片（它现在的样子，这是不正确的）和代码（imageView1 是我想要对齐的）：

![在此处输入图像描述](../Images/cfe9bd3e633bf368a73400d770bf6709.png)

和代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" android:layout_height="match_parent"
    android:id="@+id/loginScrollView">
    <TableLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:orientation="vertical"
        android:padding="5dp">

        <ImageView android:id="@+id/logoImageView"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:src="@drawable/logo" android:contentDescription="@string/app_name" />

        <TextView android:id="@+id/demoTextView"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:text="@string/logDetails" android:gravity="center_horizontal|center" />

        <EditText android:id="@+id/emailEditText"
            android:layout_width="match_parent" android:layout_height="wrap_content"
            android:hint="@string/loginHint" android:imeOptions="actionNext"
            android:inputType="textEmailAddress" android:padding="20dp" />

        <EditText android:id="@+id/passEditText"
            android:layout_width="match_parent" android:layout_height="wrap_content"
            android:hint="@string/password" android:imeOptions="actionDone"
            android:inputType="textPassword" android:padding="20dp" />

        <TableRow android:id="@+id/rememberTableRow"
            android:layout_width="wrap_content" android:layout_height="wrap_content">
            <TextView android:id="@+id/rememberTextView"
                android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:text="@string/rememberDetails" android:layout_gravity="center" />

            <CheckBox android:id="@+id/rememberCheckBox"
                android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:padding="20dp" />

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="showPopup"
                android:src="@drawable/abs__ic_menu_moreoverflow_holo_dark" android:layout_weight="1" android:layout_gravity="center|right"/>

        </TableRow>

        <TableRow android:id="@+id/buttonTableRow"
            android:layout_width="match_parent" android:layout_height="wrap_content">

            <Button android:id="@+id/registerButton" android:layout_width="0dip"
                android:layout_height="wrap_content" android:layout_gravity="bottom"
                android:layout_weight="1" android:text="@string/register" />

            <Button android:id="@+id/loginButton" android:layout_width="0dip"
                android:layout_height="wrap_content" android:layout_gravity="bottom"
                android:layout_weight="1" android:text="@string/login" />
        </TableRow>

    </TableLayout>
</ScrollView> 
```

以下是我已经查看并尝试用作解决方案的 SO 问题： [将 ImageView 对齐到布局 android 的右侧](https://stackoverflow.com/questions/9373841/aligning-imageview-to-right-of-the-layout-android) [与分层布局的 android 中的中心对齐](https://stackoverflow.com/questions/3849876/aligning-with-center-in-android-with-hierarchical-layouts) [Android ImageButton not display on the right side of the screen](https://stackoverflow.com/questions/5687751/android-imagebutton-not-displaying-on-right-side-of-the-screen)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:49:54.177

据我所知，有多种选择。我给你两个：

第一个选项是在包含溢出图标的 ImageView 上设置 scaletype。你让它占用所有剩余的可用空间并将 scaletype 设置为`fitEnd`. 这会将图标一直定位在右侧。

```
<ImageView android:id="@+id/imageView1"
    android:layout_width="0dp" android:layout_height="wrap_content"
    android:layout_gravity="center_vertical" android:scaleType="fitEnd"
    android:layout_weight="1" android:onClick="showPopup"
    android:src="@drawable/abs__ic_menu_moreoverflow_normal_holo_dark" /> 
```

您可以通过`1`在 CheckBox 上设置权重来实现相同的效果，这将使其带有溢出图标的 ImageView 一直“推”到右侧（感谢 TableRow 的行为类似于 LinearLayout）。然后，您可以简单地使 ImageView 包装其内容。不过，在这种情况下，您可能需要仔细检查可点击区域是否没有奇怪的副作用。

```
<TableRow android:id="@+id/rememberTableRow"
    android:layout_width="wrap_content" android:layout_height="wrap_content">

    <TextView android:id="@+id/rememberTextView"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_gravity="center" android:text="@string/rememberDetails" />

    <CheckBox android:id="@+id/rememberCheckBox"
        android:layout_width="0dp" android:layout_height="wrap_content"
        android:layout_weight="1" android:padding="20dp" />

    <ImageView android:id="@+id/imageView1"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_gravity="center_vertical" android:onClick="showPopup"
        android:src="@drawable/abs__ic_menu_moreoverflow_normal_holo_dark" />

</TableRow> 
```

# c# - C# oledb 异常

> ID：10035927
> 
> 赞同：3
> 
> 时间：2012-04-05T20:58:42.917
> 
> 标签：c#, oledb

我正在开发一个 C# 项目，以将数据从 excel 文件读取到 Access 数据库中。我不断收到 type 的异常`OleDbException`。现在的问题不是我为什么会收到这个错误，而是如何处理它。我收到错误是因为我让用户决定他们要上传哪个文件，而某些文件可能没有正确的标题或格式。这是我正在使用的代码：

带有 ** 的行是引发异常的原因。我试过使用：

1.  `catch (OleDbException)`
2.  `catch {}`
3.  `catch (Exception)`

但似乎我的 catch 子句从未抛出异常。

```
public UploadGrades(string filename, OleDbConnection con)
{
    this.filename = filename;
    this.con = con;
    //connect to the file and retrive all data.
    excelconn = new OleDbConnection(
     @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + filename + ";Extended Properties=\"Excel 12.0;HDR=YES;IMEX=1\"");;

    try
    {
        excelconn.Open();
        OleDbCommand command = new OleDbCommand("SELECT temp, name, score, submitdate, test from [sheet1$]", excelconn);
        **reader = command.ExecuteReader();**
    }
    catch 
    {
        MessageBox.Show("The File " + filename + " cann't be read.  It is either in use by a different user \n or it doen't contain the " +
            "correct columns.  Please ensure that column A1 is temp B1 is Name C1 is Score D1 is Submitdate and E1 is Test.");
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:15:55.870

可能是您的连接字符串有问题，或者您没有安装 ACE.OLEDB 库，因此 OleDB 找不到正确的提供程序。查看此页面以获取[替代连接字符串](http://www.connectionstrings.com/excel)，或者您应该能够从[此处](http://www.microsoft.com/download/en/details.aspx?id=13255)下载提供程序。

您可能想尝试以下方法：

```
try
{

       using(OleDbConnection excelConnection = new OleDbConnection(String.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=\"Excel 12.0;HDR=YES;IMEX=1\"", filename)))
       {
        excelConnection .Open();     
          using(OleDbCommand command = new OleDbCommand("SELECT columbia_uni, name, score, submitdate, test from [sheet1$]", excelconn))
          {     
                 command.CommandType = CommandType.Text;
                 using(IDataReader reader = command.ExecuteReader())
                 {
                    while(reader.Read())
                    {
                      //Do something
                    }
                 }    
          }
       }

}
catch(Exception e)
{
    MessageBox.Show("The File " + filename + " cann't be read.  It is either in use by a different user \n or it doen't contain the correct columns.  Please ensure that column A1 is Columbia_UNI B1 is Name C1 is Score D1 is Submitdate and E1 is Test.\r\n The actual exception message is: " + e.Message);
} 
```

using 等效于 try/finally，并将确保适当地清理连接、命令和 IDataReader 对象。catch 块应该（几乎）捕获此代码生成的任何异常。

# javascript - 绑定多维knockoutjs observableArray

> ID：10035933
> 
> 赞同：3
> 
> 时间：2012-04-05T20:59:28.587
> 
> 标签：javascript, data-binding, multidimensional-array, knockout.js

我有一个 JSON 数据。我将其转换为 ko.observableArray。我的意图是将它绑定到我的视图。

JSON如下：

```
 { "1" : { "asr" : "15:50", "fajr" : "03:00", "isha" : "21:31", "maghrib" : "19:02", "zuhr" : "12:21" },
      "2" : { "asr" : "15:51", "fajr" : "02:55", "isha" : "21:35", "maghrib" : "19:04", "zuhr" : "12:21" },
      "3" : { "asr" : "15:53", "fajr" : "02:51", "isha" : "21:39", "maghrib" : "19:07", "zuhr" : "12:21" },
      "4" : { "asr" : "15:54", "fajr" : "02:46", "isha" : "21:42", "maghrib" : "19:09", "zuhr" : "12:20" }
    } 
```

这是将 JSON 转换为 observableArray 的 javascript：

```
 self.prayerData(jQuery.parseJSON(data));
    $.each(self.prayerData(), function (days) {
            // It works and displays the data
            console.log(days + "  -  " + this.fajr + " | " + this.asr);
        }); 
```

这是我为绑定数据所做的，但它不起作用：

```
<!-- ko foreach:prayerData()-->
    <tr>
        <td data-bind="text: index"></td>  <!-- Display the current row -->
        <td data-bind="text: fajr"></td>
        <td data-bind="text: zuhr"></td>
        <td data-bind="text: asr"></td>
        <td data-bind="text: maghrib"></td>
        <td data-bind="text: isha"></td>
    </tr>
<!-- /ko --> 
```

在淘汰赛中绑定此类数据的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:29:21.973

您将要做的两件事：

1-您需要将对象映射到实际数组，因为绑定假定 observableArray 的值是实际数组。这意味着您可能想要创建一个空数组，遍历对象中的每个属性并将其推送到数组中。然后，您可以将索引添加为项目的属性。就像是：

```
var mappedToArray = [];
$.each(data, function(index, item) {
    mappedToArray.push(item);
    item.index = index;
}); 
```

`tr`2- 一些浏览器可能对放在标签之间的评论很敏感。为了安全起见，您可能希望将`foreach`绑定放在`tbody`如下标签上：

```
<table>
    <tr>
        <th>index</th>
        <th>fajr</th>
        <th>zuhr</th>
        <th>asr</th>
        <th>maghrib</th>
        <th>isha</th>
    </tr>
    <tbody data-bind="foreach: prayerData">
        <tr>
            <td data-bind="text: index"></td>  <!-- Display the current row -->
            <td data-bind="text: fajr"></td>
            <td data-bind="text: zuhr"></td>
            <td data-bind="text: asr"></td>
            <td data-bind="text: maghrib"></td>
            <td data-bind="text: isha"></td>
        </tr>
    </tbody>
</table> 
```

示例：http: [//jsfiddle.net/rniemeyer/utdAm/](http://jsfiddle.net/rniemeyer/utdAm/)

# state - 保持具有许多布尔属性的对象的状态

> ID：10035936
> 
> 赞同：0
> 
> 时间：2012-04-05T20:59:50.407
> 
> 标签：state, state-machine

对于简单的对象，通常很容易拥有一个“状态”属性，它是一个字符串并且可以存储在数据库中。例如，想象一个 User 类。它可能处于非活动、未验证和活动状态。这*可以*使用两个布尔值进行跟踪——“活动”和“已验证”——但它也可以使用简单的状态机从非活动转换为未验证到活动，同时将当前状态存储在该“状态”属性中。很常见，对吧？

然而，现在想象一个有几个布尔属性的类，更重要的是，可以有很多这些属性的组合。例如，可能损坏、丢失、停用、过时等的事物。现在，在单个“状态”属性中跟踪状态变得更加困难。我猜，这是一个非确定性有限自动机或状态机。我真的不想存储“inactive_broken”和“active_missing_outdated”等状态。

我想出的最好的方法是同时拥有“状态”属性并存储某种超状态——在这种情况下，“可用”与“不可用”——**以及**每个布尔值。这样我就可以在过渡时使用类似守卫的方法。

有没有其他人遇到过这个问题并想出一个很好的跟踪状态的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:12:14.637

您是否考虑过将“状态”序列化为位掩码并将其存储在数据库的整数列中？假设一个实体可以是活动的或不活动的，可用的或不可用的，或者以任何组合工作或损坏。

您可以将每个状态存储为一点；打开或关闭。这样，值 111 将处于活动状态、可用和工作状态，而值 000 将处于非活动状态、不可用和损坏。

然后，您可以使用适当的位掩码查询特定组合，或将实体反序列化为一个类，该类具有您要跟踪的每个状态的布尔值。将状态添加到对象也相对便宜，并且不会破坏已经序列化的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-18T13:34:43.740

与上面的答案相同，但比理论更实用：

*   确定布尔属性的可能数量。所有这些属性的状态可以用 1=true 或 0=false 来表示

*   采用适当大小的数字数据类型。unsigned short=16, unsigned int=32, unsigned long=64，如果你有更大的类型，取一个数字数组：例如 128 个属性取

    ```
    unsigned long[] attr= new long[2];  // two long side by side 
    ```

*   可以使用以下代码访问每个位

    ```
    bool GetBitAt(long attr, int position){
        return (attr & (1<<(position-1)) >0;
    }
    long SetBitAt(long attr, int position, bool value){
        return attr|=1<<(position-1);
    } 
    ```

*   现在让每个位位置代表一个属性。例如：位 5 表示可用？

    ```
     bool IsAvailable(long attr){
          return GetBitAt(attr, 5);
     } 
    ```

**好处**：

*   节省空间，例如 64 个属性将只占用 8 个字节。

*   易于保存和读取，您只需读取一个 short、int 或 long，这只是一个简单的变量

*   比较一组属性很容易，因为您只需将 short、int 或 long 的数值与另一个进行比较。例如 if(Obj.attributes == Obj2.attributes){ }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-18T17:28:16.967

[我认为您正在描述Orthogonal Regions](http://en.wikipedia.org/wiki/UML_state_machine#Orthogonal_regions)的示例。从该链接中，“当系统的行为被分割成独立的、同时活动的部分时，正交区域解决了状态数量组合增加的常见问题。”

您可能实现的一种方法是通过对象组合。例如，您的超级对象包含多个子对象。子对象各自独立地保持它们的关联状态。超级对象的状态是其所有子对象状态的组合。

搜索“正交状态”、“正交区域”或“正交分量”以获得更多想法。

# ios - iOS：NSURLConnection 使其他 TCP 连接无法进行

> ID：10035938
> 
> 赞同：1
> 
> 时间：2012-04-05T20:59:56.147
> 
> 标签：ios, networking, nsurlconnection

我有一个应用程序反复调用 NSDictionary 的 dictionaryWithContentsOfURL 然后 NSURLConnection 来下载文件。它这样做了几次，然后 dictionaryWithContentsOfURL 最终将停止发送 HTTP 请求并超时并返回 nil。发生这种情况通常只需要 6 个周期。

额外信息：

*   我之前使用过 ASIHTTPRequest，但最终用 dictionaryWithContentsOfURL 和 NSURLConnection 编写了所有内容，我得到了相同的结果。
*   我使用了数据包嗅探器，发现 dictionaryWithContentsOfURL 没有像以前那样发出 HTTP 请求。
*   如果我运行应用程序并且只调用 dictionaryWithContentsOfURL 并且不创建 NSURLConnection，它就不会进入这种愚蠢的状态。
*   重新启动应用程序会使 dictionaryWithContentsOfURL 重新开始工作，但会立即返回其愚蠢的状态。
*   我在 -[NSURLConnection dealloc] 上放了一个断点，它被调用了。

我猜操作系统不允许我打开新的套接字或其他东西，任何想法我做错了什么以及如何解决它？谢谢。

# ruby-on-rails - 来自 Rails 控制台的 Foursquare OAuth 请求

> ID：10035939
> 
> 赞同：0
> 
> 时间：2012-04-05T21:00:01.033
> 
> 标签：ruby-on-rails, ruby, oauth, console, foursquare

我一直在为使用 Foursquare 进行身份验证的用户存储配置文件 URL，如下所示：foursquare_url = "http://foursquare.com/#{access_token.info.nickname}"

Foursquare 似乎停止在 access_token 中提供昵称，所以现在我像这样保存 url：foursquare_url = access_token.extra.raw_info.canonicalUrl

问题是某些用户在我进行更改之前已通过身份验证，因此他们都将“http://foursquare.com/”作为个人资料网址。如何遍历这些用户并存储正确的 url？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:10:55.657

为了代表用户发出请求，您需要使用他们的 access_token。如果您的数据库中没有存储这些信息，则必须在下次他们对您的站点进行身份验证时捕获它，并通过foursquare API 获取所需的信息。

# strongly-typed-dataset - 将无类型数据集合并到有类型数据集

> ID：10035947
> 
> 赞同：0
> 
> 时间：2012-04-05T21:00:21.020
> 
> 标签：strongly-typed-dataset

我在 Typed DataSet 中有两个名为 tblA 和 tblB 的数据表

注意：两个表都有不同的数据结构。

让我知道如何将两个无类型数据集合并到上述类型数据集。

```
Dear Tony,
Thanks for your effort. 
But please understand my question.

I have 2 DataTable in Typed DataSet 
DataTable names are: tblA and tblB

Now i have to merge Untyped Dataset one by one.

i need to map and merge.
Like:

UnTypedDATASET.TABLE("TABLEONE")

NOW LET ME KNOW HOW TO MERGE THIS WITH TYPEDDATASET.TABLE("tblA")

i did like this: TypedDataSet.merge(DS.table("tblA"))
but its mapping to tblB instead of tblA

Expecting your valuable help. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T22:33:35.557

**获得了将 UNTYPED DATASET 与 TYPED DATASET 合并的解决方案**

```
Typed_DS.Tables("tblA").Merge(UnTyped_DS.Tables("tablename"), True, MissingSchemaAction.Ignore) 
```

问候，蒂鲁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:08:22.783

```
myTypedDataset.Merge(myUntypedDataset) 
```

不是很有趣，但这是两秒钟的谷歌。

# jquery - 正则表达式 Jquery 跳过/计数 + 3 个字符

> ID：10035950
> 
> 赞同：0
> 
> 时间：2012-04-05T21:00:57.417
> 
> 标签：jquery, regex, count, skip

给定一个字符串，例如：“2.jpg 3 Pic.png 4 Pic For.gif ...”我需要获取每个图像名称。理想情况下，使用正则表达式，我会从句号开始，然后数 3 个字符，瞧。

到目前为止，我所拥有的也修剪了文件类型，我想保留它，因为它会有所不同。

```
 var words = $(".Input_Field").val().split(/\..{3} /g); 
```

以上产生：

“2,3 Pic,4 Pic For, ...”

我想要扩展名；

"2.jpg,3 Pic.png,4 Pic For.gif, ..."

*编辑*

只是为了澄清，问题是文件名有空格，扩展名后面有一个空格。我要做的是扩展名将永远是 .xxx 。

有小费吗？

*解决方案*

(/(.*?..{3}) /g)

产生几乎所有其他数组项（不完全）清空，很容易用 if 子句摆脱。

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:11:00.523

尝试匹配而不是拆分。

```
var words = $(".Input_Field").val().match(/(\S.*?\..{3})/g) 
```

# php - php 从 url 获取宽度和高度 >=200 的所有图像更快

> ID：10035954
> 
> 赞同：4
> 
> 时间：2012-04-05T21:01:41.387
> 
> 标签：php, getimagesize

我是类似[http://pinterest.com之类的一些功能](http://pinterest.com) `add a pin`

如何更快地从 url 获取宽度和高度 >=200 的所有图像？`pinterest.com`将完成整个过程近 10 秒，但我需要 48.64 秒。

```
require dirname(__FILE__) . '/simple_html_dom.php';
$url = 'http://www.huffingtonpost.com/';
$html = file_get_html($url);
if($html->find('img')){
    foreach($html->find('img') as $element) {
        $size = @getimagesize($element->src);
        if($size[0]>=200&&$size[1]>=200){
            echo $element;
        }
    }
}// cost 48.64 seconds 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T21:58:08.593

我认为您使用的是运行请求`curl`，请参阅 [http://php.net/manual/en/function.curl-multi-init.php](http://php.net/manual/en/function.curl-multi-init.php)了解更多信息。这样，它将加载更快，并避免所有可能影响速度的带宽问题。`parallel``curl_multi_init`

将图像保存到本地临时目录中，而不是`getimagesize()`直接在本地运行，这比运行它要快得多`http://`

我希望这有帮助

**编辑 1**

笔记***

A. 并非所有图片都以`http`

B. 并非所有图像都有效

C. 创建`temp`需要存储图像的文件夹

概念证明

```
require 'simple_html_dom.php';
$url = 'http://www.huffingtonpost.com';
$html = file_get_html ( $url );
$nodes = array ();
$start = microtime ();
$res = array ();

if ($html->find ( 'img' )) {
    foreach ( $html->find ( 'img' ) as $element ) {
        if (startsWith ( $element->src, "/" )) {
            $element->src = $url . $element->src;
        }
        if (! startsWith ( $element->src, "http" )) {
            $element->src = $url . "/" . $element->src;
        }
        $nodes [] = $element->src;
    }
}

echo "<pre>";
print_r ( imageDownload ( $nodes, 200, 200 ) );
echo "<h1>", microtime () - $start, "</h1>";

function imageDownload($nodes, $maxHeight = 0, $maxWidth = 0) {

    $mh = curl_multi_init ();
    $curl_array = array ();
    foreach ( $nodes as $i => $url ) {
        $curl_array [$i] = curl_init ( $url );
        curl_setopt ( $curl_array [$i], CURLOPT_RETURNTRANSFER, true );
        curl_setopt ( $curl_array [$i], CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 (.NET CLR 3.5.30729)' );
        curl_setopt ( $curl_array [$i], CURLOPT_CONNECTTIMEOUT, 5 );
        curl_setopt ( $curl_array [$i], CURLOPT_TIMEOUT, 15 );
        curl_multi_add_handle ( $mh, $curl_array [$i] );
    }
    $running = NULL;
    do {
        usleep ( 10000 );
        curl_multi_exec ( $mh, $running );
    } while ( $running > 0 );

    $res = array ();
    foreach ( $nodes as $i => $url ) {
        $curlErrorCode = curl_errno ( $curl_array [$i] );

        if ($curlErrorCode === 0) {
            $info = curl_getinfo ( $curl_array [$i] );
            $ext = getExtention ( $info ['content_type'] );
            if ($info ['content_type'] !== null) {
                $temp = "temp/img" . md5 ( mt_rand () ) . $ext;
                touch ( $temp );
                $imageContent = curl_multi_getcontent ( $curl_array [$i] );
                file_put_contents ( $temp, $imageContent );
                if ($maxHeight == 0 || $maxWidth == 0) {
                    $res [] = $temp;
                } else {
                    $size = getimagesize ( $temp );
                    if ($size [1] >= $maxHeight && $size [0] >= $maxWidth) {
                        $res [] = $temp;
                    } else {
                        unlink ( $temp );
                    }
                }
            }
        }
        curl_multi_remove_handle ( $mh, $curl_array [$i] );
        curl_close ( $curl_array [$i] );

    }

    curl_multi_close ( $mh );
    return $res;
}

function getExtention($type) {
    $type = strtolower ( $type );
    switch ($type) {
        case "image/gif" :
            return ".gif";
            break;
        case "image/png" :
            return ".png";
            break;

        case "image/jpeg" :
            return ".jpg";
            break;

        default :
            return ".img";
            break;
    }
}

function startsWith($str, $prefix) {
    $temp = substr ( $str, 0, strlen ( $prefix ) );
    $temp = strtolower ( $temp );
    $prefix = strtolower ( $prefix );
    return ($temp == $prefix);
} 
```

输出

```
Array
(
    [0] => temp/img8cdd64d686ee6b925e8706fa35968da4.gif
    [1] => temp/img5811155f8862cd0c3e2746881df9cd9f.gif
    [2] => temp/imga597bf04873859a69373804dc2e2c27e.jpg
    [3] => temp/img0914451e7e5a6f4c883ad7845569029e.jpg
    [4] => temp/imgb1c8c4fa88d0847c99c6f4aa17a0a457.jpg
    [5] => temp/img36e5da68a30df7934a26911f65230819.jpg
    [6] => temp/img068c1aa705296b38f2ec689e5b3172b9.png
    [7] => temp/imgfbeca2410b9a9fb5c08ef88dacd46895.png
)
0.076347 
```

谢谢 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T21:05:16.833

getimagesize() 将首先下载整个图像文件，然后进行分析。通常，您只需要文件的前几百个字节即可获取类型/分辨率详细信息。另外，它将为每个图像使用单独的 http 请求。

一个经过适当优化的系统会使用部分获取请求来仅获取图像的第一块，并利用 http keep-alives 将 TCP 连接开销降至最低。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T22:57:51.007

[参考](https://stackoverflow.com/questions/4635936/super-fast-getimagesize-in-php)

使用`imagecreatefromstring`,`imagesx`和`imagesy`, 这应该在 30 秒内运行。比 getimagesize() 快一点

```
function ranger($url){
    $headers = array( "Range: bytes=0-32768" );
    $curl = curl_init($url);
    curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    return curl_exec($curl);
    curl_close($curl);
}
require dirname(__FILE__) . '/simple_html_dom.php';
$url = 'http://www.huffingtonpost.com/';
$html = file_get_html($url);
if($html->find('img')){
    foreach($html->find('img') as $element) {
        $raw = ranger($element->src);
        $im = @imagecreatefromstring($raw);
        $width = @imagesx($im);
        $height = @imagesy($im);
        if($width>=200&&$height>=200){
            echo $element;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T21:22:27.747

那么从 html 中读取宽度和高度呢？我知道有些图片可能没有这个属性，但也许你可以跳过这个属性小于 200px 的图片。

这只是一个想法，但可能对您不可用。

# actionscript-3 - “私有属性只能用于类属性定义。” 闪存 CS5 错误？

> ID：10035960
> 
> 赞同：0
> 
> 时间：2012-04-05T21:02:22.183
> 
> 标签：actionscript-3

这是我的代码：

[http://pastebin.com/nSkVkTJT](http://pastebin.com/nSkVkTJT)

错误是第 123 行和第 128 行。

我用谷歌搜索了这个错误，但我仍然无法修复它，这让我困惑了一个小时！我试过添加花括号，但仍然是同样的错误。

请帮忙，谢谢！

我像这样离开了第 123 和 128 行

```
 function _update(e:Event):void
    {
        _helicopter.update(_mouseDown);
    }

     function onEnterFrame(e:Event):void
    {' 
```

但是我收到一条错误消息，指出未定义 _update

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:14:43.430

在定义嵌套函数时，我不相信您可以指定访问修饰符。

```
public class X extends MovieClip
{

    public function f():void
    {
        /* illegal - nested function with private modifier not allowed */
        private function nested():void {};

        /* valid - nested function */
        function nested():void {};
    }

} 
```

因此，如果您在函数中定义函数，请删除`private`访问修饰符关键字，它应该可以编译。

就个人而言，我建议将这些函数拉到主类定义的范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:09:22.983

在您发布的代码中，您缺少 2 个尾随“}” 如果您更好地格式化代码，您会更容易找到。

```
private function onEnterFrame(e:Event):void{
  if (startme){
    x -= speed;
  }

  // make me start again when I go off-screen
  if (x < -42){
    speed = Math.floor(Math.random() * 9 + 5);
    height = Math.floor(Math.random() * 200 + 5);
    x = 551;
    if(updown == 2){
      y = 0;
    }else{
     y = 400 - height;
    }
  }// <------ you are missing this
}// <-------- you are missing this 
```

# payment - 向其他 Stripe 商家收费

> ID：10035961
> 
> 赞同：1
> 
> 时间：2012-04-05T21:02:22.517
> 
> 标签：payment, stripe-payments

我正在开发一个捐赠平台，我将在该平台上收取费用并正在研究使用 Stripe，但我遇到了一个问题，到目前为止我还没有找到任何文档。

Stripe 不处理链式支付，但在其常见问题解答中确实提到：“如果您想对交易收取费用，您可以使用 Stripe 向这些商家收取您的 API 密钥。”

有人知道我可以参考的一些文档或示例吗？或者有人可以用他们现有的文档为我指明正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:21:40.390

> Stripe 不处理链式支付，但在其常见问题解答中确实提到：“如果您想对交易收取费用，您可以使用 Stripe 向这些商家收取您的 API 密钥。”

这只是意味着您平台的用户可以通过信用卡向您付款，并且您可以使用您的 Stripe API 密钥向这些卡收费。如果您向 support@stripe.com 发送电子邮件，提供有关您设置的更多详细信息，我们可以帮助您决定如何最好地构建您的平台支付。也可以随时在[https://stripe.com/campfire](https://stripe.com/campfire)加入我们的聊天室。

# c - 如果文件不存在，程序在 C 中失败

> ID：10035964
> 
> 赞同：0
> 
> 时间：2012-04-05T21:02:40.737
> 
> 标签：c, loops, file-io

这曾经奏效。我不知道我做了什么让它停止工作，但是当我输入一个不存在的文件名时，我得到一个段冲突错误并且程序退出。

```
int main()
{
    File *fr;
    char input_file[32];
    int num_lines, valid;

    do{
        printf("\nEnter the name of the input file: ");
        scanf("%s", input_file);
        fr = fopen(input_file, "r");
        if(fr == NULL){
            valid = 0;
            printf("File does not exist...");
        }
        if(fr != NULL){
            fscanf(fr, "%d", &num_lines);
            numbers = malloc(sizeof(int) * num_lines);
            for(i=0;i<num_lines;i++){
                fscanf(fr, "%[^0123456789]%d", numbers+i);
                printf("%d\n", numbers[i]);
                valid =1;
            }
            free(numbers);
            fclose(fr);
        }

    }while(valid == 0);
} 
```

**/已编辑/**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:05:00.090

请注意以下事项：

```
fr = fopen(input_file, "r");
fscanf(fr, "%d", &num_lines);
if(fr == NULL){ 
```

在这里，您将结果`fopen`直接传递到`fscanf`，而无需先测试文件是否已成功打开。如果文件无法打开，`fr`将是`NULL`，因此出现分段错误。

`fscanf`尝试重新排序代码，以便在您确认之前不要这样做`fr != NULL`。例如：

```
fr = fopen(input_file, "r");
if(fr != NULL){
    fscanf(fr, "%d", &num_lines); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T21:05:13.413

好吧，这条线是非常非常错误的：

```
 scanf("%s", input_file[32]); 
```

第二个参数应该是一个指向字符缓冲区的指针，但你传递的是一个字符值，它可以指向任何随机位置。它可能看起来工作正常，但它会破坏内存中的一些随机点，您可能出于某种原因需要这些点！

然后你继续将调用的结果`fopen()`直接传递给，`fscanf()`而不先检查它是否为空；这也不会奏效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T21:05:26.110

`fscanf`在检查 if 之前，您必须已将呼叫移至`fr==NULL`。您需要在检查后将 fscanf 移至`fr==null`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T21:05:28.107

您必须在调用之前检查是否`fr`为 NULL`fscanf(fr, "%d", &num_lines)` 并更改第一个 scanf：`scanf("%s", input_file);`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T21:05:56.347

你应该检查

```
if(fr == NULL){
   valid = 0;
   printf("File does not exist...");
} 
```

前

```
fscanf(fr, "%d", &num_lines); 
```

# php - PHP - 使用包含引号的变量输入隐藏字段

> ID：10035965
> 
> 赞同：0
> 
> 时间：2012-04-05T21:02:43.733
> 
> 标签：php

我尝试为工作机会做一名编辑。它必须具有预览功能。有2种形式。第一个表单提交预览，第二个表单在预览出现时出现并发送变量以将它们保存在数据库中。问题是，当提交第二个表单时，所有引号都消失了。我尝试了 mysql_real_escape_string、htmlspecialchars、htmlentitles，但没有任何效果。你知道问题出在哪里吗？难道是有问题，因为我使用变量'$content'来存储站点的内容，而不是直接输出'echo'？谢谢！

```
<td><input style='float:left;' type='submit' name='jobpreview' value='preview' />
</form>";
if(isset($_GET['preview']))
{ 
$_POST['titel'] = htmlentities($_POST['titel']);
$_POST['elm1'] = htmlentities($_POST['elm1']);
  $content .= " <td><form action='?s=intern&sub=neuerjob&preview' method='POST'>
  <input type='hidden' name='titel' value='".$_POST['titel']."' />
  <input type='hidden' name='elm1' value='".$_POST['elm1']."' />
  <input style='float:left;' type='submit' name='jobsave' value='save' />
  </form></td></tr></table>";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:06:01.390

您需要使用[第二个参数`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)来编码引号。

```
$titel = htmlentities($_POST['titel'], ENT_QUOTES);
$elm1 = htmlentities($_POST['elm1'], ENT_QUOTES);

 <input type='hidden' name='titel' value='".$titel."' />
 <input type='hidden' name='elm1' value='".$elm1."' /> 
```

为此目的，`htmlentities()`虽然有点过分了，但您也可以[`htmlspecialchars()`](http://www.php.net/manual/en/function.htmlspecialchars.php) 与`ENT_QUOTES`参数一起使用。

```
$titel = htmlspecialchars($_POST['titel'], ENT_QUOTES);
$elm1 = htmlspecialchars($_POST['elm1'], ENT_QUOTES); 
```

# java - JPA：如何在独立Java应用程序中持久化后获取ID

> ID：10035973
> 
> 赞同：5
> 
> 时间：2012-04-05T21:03:28.420
> 
> 标签：java, jpa, persistence, eclipselink

这是一个独立的 Java 应用程序，而不是 Web 应用程序。所以当我像这样坚持对象时

```
public <T> T create(T t) {
    em.getTransaction().begin();
    em.persist(t);
    em.flush();
    em.getTransaction().commit();
    return t;
} 
```

即使在数据库中正确创建了具有正确数据和 id 的新行，对象内部仍然为空`id`。`T t`通常在我的 web 应用程序中使用`@EJB`，`id`在我持久化之后立即可用，因为它将实体对象持久化到我的持久化上下文中，我不确定我是否在这里有我的持久化上下文？

这就是我在 @Entity 类中映射我的 id 的方式

```
@Id
@Basic(optional = false)
@Column(name = "ID")
private Long id; 
```

我也在数据库中创建了这个表的 id `AUTO_INCREMENT`，就像这样

```
CREATE TABLE Config
(
    ID int NOT NULL AUTO_INCREMENT,
    PRIMARY KEY (ID)
) 
```

这就是我获取 EntityManager 的方式

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("CorePU");
em = emf.createEntityManager(); 
```

这是我里面的东西`persistence.xml`

```
<persistence-unit name="CorePU" transaction-type="RESOURCE_LOCAL">
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>    
<class>com.wf.docsys.core.model.Config</class>    
<properties>
  <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/XNINFODB"/>
  <property name="javax.persistence.jdbc.password" value="xxx"/>
  <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
  <property name="javax.persistence.jdbc.user" value="xxx"/>
</properties> 
```

请帮忙，我不确定我在这里做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T21:21:21.800

尝试`@GeneratedValue`在您的 id 字段上添加一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T00:04:22.690

正如我在[这篇文章](http://forums.netbeans.org/topic25646.html)中发现的，EntityManager 有一个名为[refresh](http://docs.oracle.com/javaee/5/api/javax/persistence/EntityManager.html#refresh%28java.lang.Object%29)的方法，它会在你持久化他之后更新你的对象。

所以你的代码可能看起来像这样：

```
public <T> T create(T t) {
    em.getTransaction().begin();
    em.persist(t);
    em.refresh(t);
    em.flush();
    em.getTransaction().commit();
    return t;
} 
```

我还没有对此进行测试，所以我不确定将刷新方法调用放在哪里，在提交之后，刷新之后等等。

希望它可以帮助你。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T22:53:00.720

我知道这不是持久化，但合并会更简单地做同样的事情。我将我的持久性包装在一个实际的合并操作中，如果实体不存在，它将保存它。

```
public T persist(T obj) {
    EntityManager em = ThreadLocalPersistenceManager.getEntityManager();

    EntityTransaction tx = em.getTransaction();
    try {
        tx.begin();
        obj = em.merge(obj);
    } finally {
        if (! tx.getRollbackOnly()) {
            tx.commit();
        }
    }

    return obj;
}

/**
 * This will save the object and return the id of the persisted object.
 *  
 * @param obj
 * @return The id of the persisted object.
 */
public Long save(T obj) {
    persist(obj);
    return obj.getId();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T23:49:43.477

**这是我的答案。经过测试**

映射您的 ID 时，请从我上面的内容切换，即

```
@Id
@Basic(optional = false)
@Column(name = "ID")
private Long id; 
```

到

```
@Entity
public class Person {
   @Id
   @TableGenerator(name="TABLE_GEN", table="SEQUENCE_TABLE", pkColumnName="SEQ_NAME",
       valueColumnName="SEQ_COUNT", pkColumnValue="PERSON_SEQ")
   @GeneratedValue(strategy=GenerationType.TABLE, generator="TABLE_GEN")
   private long id;
   ...
} 
```

由于我使用 Microsoft SQL 服务器，因此我必须使用`@TableGenerator`. 更多信息可以在这里找到[http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Table_sequencing](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Table_sequencing)

# c# - 将数据从我们客户的本地数据库到/从我们的网络服务器数据库来回移植的最佳方法是什么？

> ID：10035975
> 
> 赞同：1
> 
> 时间：2012-04-05T21:03:42.133
> 
> 标签：c#, .net, sql-server-2008-r2

我的问题是：将数据从客户的本地数据库来回移植到我们的网络服务器数据库的最佳方式是什么？

问题的解释：

我们的客户针对我们的 SQL Server 2008 R2 数据库的本地副本运行我们的软件。我们通常（一天一次，半夜）需要为每个客户端（即视图）组合存储在多个表中的字段，并通过 Internet 将这些信息发送到我们将托管在我们的 SQL Server 2008 R2 数据库中。网络服务器。我们的每个客户可能有数以万计的记录，我们需要将这些记录移植到我们的网络服务器数据库中。这些信息将允许我们客户的客户进行付款和下订单。我们会将这些交易存储在我们的网络服务器数据库中的一个或多个表中。我们需要定期将这些交易记录推送回客户的本地数据库。然后客户端将处理这些交易并更新我们在晚上推送到我们的网络服务器数据库的记录。

我是一家非常小的商店的 C# 程序员。我的第一个想法是写一个 Windows 服务来控制数据的来回移植。这将需要在我们每个客户的服务器上安装该服务。我担心我们能否轻松维护和扩展该服务。特别是，当我们决定来回传输更多数据时，这将需要更新每个客户端站点的服务。鉴于我们商店的规模，这将成为一个严峻的挑战。

我更喜欢通过 SQL Server 来管理这个过程，最好是在我们网络服务器上的 SQL Server 实例中。但是，我们没有人对 SQL Server 有广泛的了解。（我是这里的 SQL Server 专家，我知道这很危险。）我们的一些客户是非常小的公司，只在他们的服务器上安装了 SQL Server express。我们对复制进行了一些实验，但从未找到使其在 Internet 上可靠运行的方法，尤其是使用 SQL Server express。

我已经阅读了一些关于 SSIS、链接服务器、服务代理和 3rd 方工具（例如 RedGate 的 SQL 比较）的内容。我不确定这些选项中的哪一个（如果有的话）最适合我们的需要，也没有找到明确的例子来说明如何利用每个选项。

非常感谢有关此问题的任何指导。如果您能指出相关示例来说明如何执行我上面描述的操作，那将特别有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:07:59.557

很快，
一种选择是使用[MS Sync 框架](http://msdn.microsoft.com/en-us/sync/default.aspx)- 我可以确切地看到您需要什么，但不确定您的具体情况。
希望这可以帮助

# sql - Oracle PL/SQL - 生成发票

> ID：10035976
> 
> 赞同：0
> 
> 时间：2012-04-05T21:03:44.683
> 
> 标签：sql, database-design

我有一个包含产品、销售和客户表的商店的基本数据库。我需要每 3 个月为每个客户生成一张发票，以显示客户的总支出。我不确定的是如何解决这个问题。我应该有发票表吗？

非常感谢任何帮助或提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:11:26.170

如何使用这些表基于 select 语句创建视图。然后只是参考视图。您还可以创建一个存储过程或函数来接受诸如客户 ID 之类的输入。我个人会选择观景路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:22:51.150

# 是的

您生成的发票是您不想丢失的宝贵信息。你怎么知道谁支付了哪张发票？

您希望能够准确说出您发送了哪些发票、这些发票的价值以及它们对应的确切项目。

就个人而言，我不仅会有一个发票表，还有一个发票项目表。

# java - KeyListeners与键绑定？

> ID：10035980
> 
> 赞同：1
> 
> 时间：2012-04-05T21:03:51.750
> 
> 标签：java, key-bindings, keylistener

> **可能重复：**
> [比较 KeyListeners 和 Key Bindings 之间的功能](https://stackoverflow.com/questions/8664250/comparing-functionality-between-keylisteners-and-key-bindings)

我一直在尝试在我的程序中使用 KeyListener 来获取构造数字的输入。据我所知，即使我已经完全实现了它，它也不起作用，但这不是问题：P。

无论如何，我搜索了互联网以查看我是否做错了什么，并遇到了显然是用于与摆动组件而不是 KeyListeners 一起使用的键绑定。哪个更适合从数字键获取输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:13:03.527

Keylistener 是 AWT 时代的一个较旧的接口，它仍然可以与 swing 一起使用，但更像是一个普通的侦听器。它绑定到所有键。

KeyBindings 有点不同，它们专门将特定操作绑定到特定键，而其他键不受影响。这样做的结果是，如果您要侦听任何键，那么 KeyListener 是合适的，或者您必须为所有键实现单独的 KeyBindings，这显然很愚蠢。

为了避免带有大 switch 语句的事件处理程序，存在 KeyBinding。

# jquery - 谷歌饼图涵盖 jQuery 菜单

> ID：10035984
> 
> 赞同：0
> 
> 时间：2012-04-05T21:04:25.487
> 
> 标签：jquery, google-visualization

我的代码中有[简单的 css/jquery 菜单](http://www.dynamicdrive.com/style/csslibrary/item/jquery_multi_level_css_menu_horizontal_blue/)和[google.visualization.PieChart](https://developers.google.com/chart/interactive/docs/gallery/piechart)。但是最近我看到我的饼图覆盖了菜单。*即*当我下拉菜单时，除了饼图后面的部分之外，所有菜单都是可见的（在下面的示例中，我在菜单中看不到*技术手册）。*

![在此处输入图像描述](../Images/cb412a9f1e15e87183e4338bc163eda4.png)

如果有人可以建议我应该在 html/css/js 代码中更改什么，我将不胜感激。

也许这不是必需的，但为了完整起见，我在下面展示了我的问题的代码示例。您需要从[dynamicdrive下载](http://www.dynamicdrive.com/style/csslibrary/item/jquery_multi_level_css_menu_horizontal_blue/)*jquerycssmenu.css*和*jquerycssmenu.js*以使其运行。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-2">
<meta name="robots" content="index,follow">

<title>Test Site</title>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="./common.css">
<link rel="shortcut icon"  href="./favicon.gif" type="image/gif" />

<script type="text/javascript" src="https://www.google.com/jsapi"></script>

    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Task');
        data.addColumn('number', 'Hours per Day');
        data.addRows([
          ['Work', 11],['Eat',  2],['Commute', 2],['Watch TV', 2],['Sleep', 7]
        ]);
        var options = {
          title: 'My Daily Activities'
        };

        var chart = new google.visualization.PieChart(document.getElementById('chartClient_Group_all_div'));
        chart.draw(data, options);
      }
    </script>

<link rel="stylesheet" type="text/css" href="jquerycssmenu.css" />
<script type='text/javascript' src='js/jquery-1.2.6.min.js'></script>
<script type="text/javascript" src="jquerycssmenu.js"></script>

</head>

<body  lang="en" dir="ltr">

<!-- ================= HEADER ================= -->

<div id="myjquerymenu" class="jquerycssmenu">
<ul>
   <li><a href="./resources.php">Resources</a>
   <ul>
      <li><a href="./resourcesQ.php">Infos on Queue</a>
      <li><a href="./resourcesH.php">Infos on Hardware</a>
      <li><a href="./resourcesS.php">Software manuals</a>
      <li><a href="./resourcesT.php">Technical manuals</a>
   </ul>
   </li>
</ul>
</div> 

<div id="naviline"><hr style="display:none;"></div>

<div id="page">
   <TABLE border="1" BORDERCOLOR=white class="t0"><tr>
   <td align="left" valign="top" width="500px" style="border-style: none; background: white;">
      <center><h4> Some Title</h4><br>
      <div id="chartClient_Group_all_div"> </div>
   </td>
   </tr></table>
<br>
</div> <! -- page -- >
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:07:37.683

您需要将菜单的 z-index css 属性设置为高于饼图。尝试 9999 开始。

# jquery - 将图像延迟加载绑定到 ajax 请求后插入的新图像

> ID：10035985
> 
> 赞同：10
> 
> 时间：2012-04-05T21:04:33.240
> 
> 标签：jquery, ajax, image, lazy-loading, infinite-scroll

我正在使用 Mika Tuupola 的延迟加载插件[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)来延迟加载图像，因为你向下滚动一个长的图像库。问题是在 10 张图片之后，我使用无限滚动，所以我获取接下来的 10 张图片，并通过 ajax 附加它们。延迟加载不再适用于下一批附加图像。

这是一个非常大量 javascript 的图片库，因此对于其他所有内容（例如工具提示、模式叠加层等），我一直在使用 jQuery 的 delegate() 来绑定到 ajax 插入的元素。延迟加载插件的问题是我不确定要绑定什么*事件。*

所以说我想用一类“懒惰”来延迟加载图像。我会这样写：

```
$("img.lazy").lazyload({ 
    effect: "fadeIn" 
}); 
```

它适用于前 10 张图像，但在通过 ajax 插入更多图像后停止工作。我唯一能想到的就是在**加载**事件上使用委托，如下所示：

```
$(document).delegate("img.lazy", "load", function(event) {  
    $(this).lazyload({ 
         effect: "fadeIn" 
    });     
}); 
```

但这打破了一切。谢谢！

**编辑：** 我用来加载更多记录的 jQuery（这是一个 Rails 应用程序）：

```
$(window).scroll(function() {
    var url;
    url = $(".pagination .next_page").attr("href");
    if (url && $(window).scrollTop() > $(document).height() - $(window).height() - 50) {
    $(".pagination").html("<p>loading more images...</p>");
    return $.getScript(url);
    }
});

$(window).scroll(); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-05T21:16:52.377

我会使用这种`ajaxStop`方法。

```
$("img.lazy").lazyload({ 
    effect: "fadeIn" 
}).removeClass("lazy");
$(document).ajaxStop(function(){
    $("img.lazy").lazyload({ 
        effect: "fadeIn" 
    }).removeClass("lazy");
}); 
```

`removeClass`防止双重初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T20:55:46.803

`ajaxStop`如果你想避免使用 jQuery ，除了 Kevin B 的回答之外，现在`when()`还为此目的定义了一个函数

```
// the following code will be executed when the ajax request resolve.
// the ajax function must return the value from calling the $.ajax() method.

    $.when(load_new_image(1), load_new_image(2), load_new_image(3)).done(function(i1, i2, i3){

            if($('img.lazy').length){

                 $('img.lazy').lazyload({ 

                          effect:'fadeIn'

                 }).removeClass('lazy').addClass('lazyloaded');

            }

        });

        function load_new_image(image_id) {

            return $.ajax({
                url: "someUrl",
                dataType: "json",
                data:  yourJsonData,            
                ...
            });
        } 
```

来自：[http ://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

# java - 乒乓球游戏 - 为球动画添加计时器

> ID：10035986
> 
> 赞同：1
> 
> 时间：2012-04-05T21:04:40.783
> 
> 标签：java, swing, timer, jpanel, pong

我现在正在做一个乒乓球游戏，我的球动画太快了。我想在我的动画中添加一个计时器，但我真的不知道该怎么做。我用我在互联网上找到的一些代码进行了尝试，但它不起作用。请帮我 ：（

这是我的代码：

```
private static final long serialVersionUID = 1L;

private int posX = SCREEN_WIDTH / 2;
private int posY;
int x;
int y;
private int scoreCountPlayer1 = 0;
private int scoreCountComputer = 0;

private int delay = 10;

  // Create a timer with delay 1000 ms
private Timer timer = new Timer(delay, new TimerListener());

private Rectangle ballRect;
private Rectangle padRect;

private int upLimit;
private int downLimit;
private int padPosition;

public boolean backX = false;
public boolean backY = false;
public boolean move = true;

public Point posMouse = new Point();

private int playPanelWidth;
private int playPanelHeight;

private int padPanelWidth;
private int padPanelHeight;

private int panPanelWidth;
private int panPanelHeight;

private JLabel player1Score = new JLabel("1");
private JLabel ComputerScore = new JLabel("0");

private JPanel panPlayer1;
public JPanel panComputer;

public JPanel padPlayer1;
public JPanel padComputer;

public ScorePanel scorePanel;

private JButton but_Escape = new JButton("Press Space to continue !");

/*
 * Constructeur de classe : PlayPanel.java
 */
// ==============================================
public PlayPanel() {
    super(new BorderLayout());
    setBackground(PANPLAY_COLOR);

    scorePanel = new ScorePanel();

    panPlayer1 = new JPanel();
    panComputer = new JPanel();

    padPlayer1 = new JPanel();
    padComputer = new JPanel();

    padPlayer1.setBackground(Color.DARK_GRAY);
    padComputer.setBackground(Color.DARK_GRAY);

    padPlayer1.setPreferredSize(PADPANEL_SIZE);
    padComputer.setPreferredSize(PADPANEL_SIZE);

    panPlayer1.setBackground(PANPLAY_COLOR);
    panComputer.setBackground(PANPLAY_COLOR);

    panPlayer1.add(padPlayer1);
    panComputer.add(padComputer);

    add(panPlayer1, BorderLayout.WEST);
    add(panComputer, BorderLayout.EAST);
    add(scorePanel, BorderLayout.SOUTH);

    player1Score.setFont(FONT_SCORE);
    ComputerScore.setFont(FONT_SCORE);

    addMouseMotionListener(this);

    timer.start();

}

/*
 * Add the ball
 */
// ==============================================
public void paintComponent(Graphics g) {

    super.paintComponent(g);

    Graphics2D g2 = (Graphics2D) g;

    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);
    g2.setColor(Color.BLACK);

    initBall(g2);

    // trait épais
    g2.setColor(Color.DARK_GRAY);

    g2.setStroke(new BasicStroke(10));
    g2.drawLine((getPlayPanelWidth() / 2) - 5, getPlayPanelHeight(),
            (getPlayPanelWidth() / 2) - 5, 0);
}

/*
 * Init ball
 */
// ==============================================
private void initBall(Graphics2D graphics2d) {

    Graphics2D g2 = graphics2d;

    x = getPosX();
    y = getPosY();

    ballRect = new Rectangle(posX, posY, BALL_WIDTH, BALL_HEIGHT);
    padRect = new Rectangle(playPanelWidth
            - (getPanComputer().getWidth() + 2), (int) getPosMouse().getY()
            - getPadPanelHeight() / 2, padPanelWidth, padPanelHeight);

    g2.fillOval(posX, posY, BALL_WIDTH, BALL_HEIGHT);

    if (posX == 763) {

        if (ballRect.intersects(padRect)) {

            System.out.println("collision");
            Move();

        } else {

            int posMouseY = getPosMouse().y;
            System.out.println("pas collision");
            stopBall(g2, posMouseY);
        }

    } else {
        Move();

    }
}

private void Move() {

    if (x < 1 + 15) {
        backX = false;
        scorePanel.getLab_Player1().setText("" + scoreCountPlayer1);
    }

    if (x > getWidth() - 52) {
        backX = true;
    }

    if (y < 1) {
        backY = false;
    }

    if (y > getHeight() - (SCOREPANEL_SIZE.getHeight() + BALL_HEIGHT)) {
        backY = true;
    }

    if (!backX) {
        setPosX(++x);
    }

    else {
        setPosX(--x);
    }

    if (!backY) {
        setPosY(++y);
    } else {
        setPosY(--y);
    }

    repaint();
}

private void stopBall(final Graphics2D g2, int posBallY) {
    move = false;
}

@Override
public void mouseDragged(MouseEvent arg0) {
}

@Override
public void mouseMoved(MouseEvent arg0) {

    // Définit les limite de le souris, la position
    // des pads et de la souris.
    upLimit = getPadPanelHeight() / 2;
    downLimit = playPanelHeight - scorePanel.getScorePanHeight()
            - (getPadPanelHeight() / 2);
    padPosition = playPanelHeight - scorePanel.getScorePanHeight()
            - (getPadPanelHeight());

    posMouse.setLocation(arg0.getX(), arg0.getY());

    setPosMouse(posMouse);

    if (arg0.getY() >= downLimit) {

        padPlayer1.setLocation(getPanPanelWidth() - 10, padPosition);
        padComputer.setLocation(0, padPosition);

    } else if (arg0.getY() <= upLimit) {

        padPlayer1.setLocation(getPanPanelWidth() - 10, 0);
        padComputer.setLocation(0, 0);

    } else {

        padPlayer1.setLocation(getPanPanelWidth() - 10,
                (int) posMouse.getY());
        padComputer.setLocation(0, (int) posMouse.getY()
                - (getPadPanelHeight() / 2));
    }
}

private class TimerListener implements ActionListener {
    /** Handle the action event */
    public void actionPerformed(ActionEvent e) {
      repaint();
    }
  } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:31:47.450

我对动画不太熟悉，但我认为您需要做的是使用计时器以固定的时间间隔将球移动一定距离。

您当前的代码*计划*（强调计划，而不是执行）`repaint`几乎每次`paint`调用（通过对`move`方法的调用）。这将很难控制球的速度。您不知道实际将执行多少`repaint`s，因此您不知道球的移动速度有多快（因为多个计划的重绘可以组合成一个重绘）。在混合中添加 a`Timer`来执行一些额外的重绘将无济于事（当然不是每秒安排重绘的计时器......这将导致 1FPS 帧速率，看起来如此 1950 ）。

如果您使用计时器以固定的时间间隔（50 毫秒、100 毫秒、... 尝试一下）更改球的坐标并安排`repaint`您完全控制球的速度。即使两次`repaint`调用计时器分组，球也会跳过一个位置，但速度会保持一致。当你上升一个级别时，只需`Timer`通过减少延迟来增加代码被触发的次数。

您可能想阅读[Filthy Rich Clients书中](http://filthyrichclients.org/)[免费提供的动画章节](http://www.infoq.com/resource/articles/filthy-rich-clients/en/resources/FilthyRichClients14_InfoQ.pdf)，其中包含更多免费摘录和代码示例。您可能还想检查[此处](https://stackoverflow.com/q/9849950/230513)看到的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T21:10:20.677

使用`java.util`包中的计时器：

```
new Timer().scheduleAtFixedRate(new TimerTask() {

        @Override
        public void run() {
            repaint();
        }
    }, 20, 20); // replace 20 with how often you want it to be called (in milliseconds) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T21:21:51.320

问题是您在每个循环中将球移动一个像素，我认为您应该将 x 和 y 坐标从 int 更改为 double，引入一个名为*speed*的新变量，其值为 0.1，并将此速度添加到坐标中。然后球应该每 10 个游戏循环移动一个像素，也许应该需要一个更小的值，但你必须调整它

希望能帮助到你

# html - 自举网格间距

> ID：10035989
> 
> 赞同：0
> 
> 时间：2012-04-05T21:04:54.460
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Bootstrap 构建具有简单 2 列布局的流畅网页，其中包含 .span8.mainpanel 和 .span4.sidebar。

但是，由于主面板本身有子列，我想在主面板和侧边栏之间注入更多空间。

现在，我可以在侧边栏上添加 padding/margin-left（或在主面板上添加 *-right），但是当屏幕宽度折叠主面板和侧边栏以垂直堆叠而不是并排时，这个 padding/margin 会持续存在。

如何在某些网格列之间注入空间，但当事物垂直堆叠时不会留存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:41:48.600

如果我记得引导脚手架默认情况下不会启动“媒体查询”的使用。考虑到这一点，您可能必须根据您的设计调整 CSS / 媒体查询。

# jquery - 图像加载渲染在 Firefox 中闪烁。

> ID：10035995
> 
> 赞同：2
> 
> 时间：2012-04-05T21:05:23.537
> 
> 标签：jquery, firefox

在慢速连接上，图像在淡入后消失，然后重新出现。

```
$('#image').load(function(){
    $(this).fadeIn();
}); 
```

这基本上就是我所做的一切。在快速连接上完美运行，但在慢速连接上，图像在淡入淡出完成后闪烁。关于如何解决这个问题的任何想法？我什至不知道从哪里开始。

我也尝试过`waitForImages();`和其他一些插件。它似乎没有检测到图像加载，它是某种渲染错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:20:38.840

尝试这个：

```
$(this).css("display", "none");
$(this).fadeIn(); 
```