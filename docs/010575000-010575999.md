# StackOverflow 问答 10575000-10575999

# regex - 从文件中删除 Markdown 文本

> ID：10575002
> 
> 赞同：0
> 
> 时间：2012-05-13T20:33:54.753
> 
> 标签：regex, markdown

我正在使用leanpub.com 并导入了我的博客，但不小心让它导入图像。我不希望这样，所以现在我想从大约 2,000 个单独的标记文件中删除图像。如果您熟悉降价，您会知道图像是这样指定的

```
![optional alt text](url/link "optional title") 
```

**更新**：经过进一步检查，一些图像也是链接，因此它们的包含如下：

```
[![alt text](image link "title text")](url image links to) 
```

**示例文本**：

```
[![Hollywood: An Empire of Their Own (A&E DVD Archives)](images/51EEVBAA32L._SL160_.jpg)Hollywood: An Empire of Their Own (A&E DVD Archives)](http://www.amazon.com/Hollywood-Empire-Their-Own-Archives/dp/B0009HMTEO?SubscriptionId=08NDXT4K5C4JPKBB4702&tag=amz&linkCode=xm2&camp=2025&creative=165953&creativeASIN=B0009HMTEO)This 
"lucid, inviting work of social history" (The New York Times) highlights the 
bold and enduring vision of the Jewish immigrants who founded Hollywood and reinvented American culture. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:43:38.130

只需去掉标记`![`和`)`. 请注意，可选的尾随空格很重要，因为链接可以被其他文本包围。

```
sed --in-place='.bak' 's/!\[.*)[[:space:]]\?//' [file ...] 
```

# r - 将 Rscript 中的布尔值输出到 Bash 变量中

> ID：10575005
> 
> 赞同：7
> 
> 时间：2012-05-13T20:34:10.553
> 
> 标签：r, bash

我有一个输出 TRUE 或 FALSE 的 R 脚本。在 R 中，它使用真正的 T/F 数据类型，但是当我将它的返回值回显到 bash 时，它似乎是一个字符串，说：

`"[1] TRUE"`

或者

`"[1] FALSE"`

它们都以 [1] 开头。[0] 也不是，这不是错字。无论如何，结果是当我尝试在此 Rscript 的输出上进行测试以运行后续脚本时，我必须如下对“[1] TRUE”进行字符串比较，而不是与“TRUE”或“ 1" 感觉更干净更好。

```
A=$(Rscript ~/MyR.r)
echo $A
if [ "$A" == "[1] TRUE" ]; then
    bash SecondScript.sh
fi 
```

如何让 R 输出一个真正的布尔值，或者 Bash 接受输出字符串并将其转换为 0/1 以进行比较？也就是说，我宁愿测试...

```
if [ $A == TRUE ]; 
```

比

```
if [ "$A" == "[1] TRUE" ]; 
```

这可能吗，或者我应该对此感到满意，它是如何工作的？

*** 更新 ***

这是生成这个的 Rscript 的最小化版本......

```
myinput <- TRUE #or FALSE

FunctionName <- function(test){
  if (test == TRUE){
    val <- TRUE
  } else {
    val <- FALSE
  }
  return(val)
}

FunctionName(myinput) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-13T20:46:14.083

当对象名称提供给 R 解释器时，不应使用 print() 或隐式 print()-ing，而应使用`cat()`不会在 TRUE 或 FALSE 前面添加“[1]”。如果你想要 0/1，那么使用`cat(as.numeric(.))`. 试试这个：

```
myinput <- TRUE #or FALSE
FunctionName <- function(test){
   if (test == TRUE){
              val <- TRUE
                    } else {
              val <- FALSE
            }
   cat(as.numeric(val))
}
FunctionName(myinput) 
```

如果您需要该值进行进一步处理，您也可以使用它：

```
cat(as.numeric(val)); invisible(val) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:32:11.033

您还可以在 bash 中定义一个函数，将 R 输出转换为 TRUE/FALSE：

```
r_to_bash() {
  echo "$1" | cut -d' ' -f2
} 
```

现在你可以像这样使用它：

```
A=$(r_to_bash "$A")
if [ $A == TRUE ]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-24T19:36:42.490

您还可以将脚本的最后一行更改为：

```
write( FunctionName( myinput ), stdout()) 
```

这将只打印`TRUE`没有 [1] 的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T21:23:34.290

除了更改 R 脚本的功能之外，您还可以在 Bash 端执行以下任一操作：

```
if [[ $A == *TRUE* ]] 
```

或者

```
if [[ $A =~ TRUE ]] 
```

在第二种情况下，使用正则表达式匹配，通常建议将模式放入变量中：

```
pattern=TRUE
if [[ $A =~ $pattern ]] 
```

但在诸如此类的明显简单的情况下，没有必要。

# objective-c - 在 NSArray 中组织数据（可能使用 NSSortDescriptor）

> ID：10575007
> 
> 赞同：0
> 
> 时间：2012-05-13T20:34:18.747
> 
> 标签：objective-c, xcode

我正在尝试按顺序组织这个 json 数据......

```
{"message":["Untitled1b","Untitled2b","Untitled3b"],"name":["Untitled1a","Untitled2a","Untitled3a"]} 
```

……这样红……

```
NSString *fileContent = [[NSString alloc] initWithContentsOfFile:getImagePath2];  

SBJsonParser *parser = [[SBJsonParser alloc] init];

NSDictionary *data = (NSDictionary *) [parser objectWithString:fileContent error:nil];  

// getting the data from inside of "menu"  

//NSString *message = (NSString *) [data objectForKey:@"message"];
 //NSString *name = (NSString *) [data objectForKey:@"name"];

NSArray *messagearray = [data objectForKey:@"message"];
NSArray *namearray    = [data objectForKey:@"name"];

NSDictionary* Dictionary = [NSDictionary dictionaryWithObjects:messagearray forKeys:namearray];

f = namearray.count;
NSLog(@"happt = %i", f);

//namegroup.text = [NSString stringWithFormat:@"%@  %@",name, message];

g= 0;

do{

    NSArray *allKeys = [Dictionary allKeys];
    for (int i = 0; i < [allKeys count]; i++) {
        NSString *key = [allKeys objectAtIndex:i];
        NSObject *obj = [Dictionary objectForKey:key];
        // do something 
```

如您所见，在 json 文件中，消息和名称（数据对）的顺序正确（1a，1b ...）。对于每对数据，我创建 2 个文本视图并显示数据。对显示正确，但混淆了。我的意思是，我希望它们以 JSON 文件顺序显示（首先是 1a、1b，然后是 2a、2b，然后是 3a、3b...，而不是 2a、2b，然后是 1a、1b，然后是 3a、3b... )

我试着用这个：

```
NSSortDescriptor *dateSortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"date"     ascending:NO selector:@selector(compare:)] autorelease];
[list sortUsingDescriptors:[NSArray arrayWithObjects:dateSortDescriptor, nil]]; 
```

......但它没有工作！请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:02:44.977

`NSDictionary`对象是无序的。键的顺序通常由搜索它们的最有效方式确定，这不太可能与它们添加到字典中的顺序相同。在任何情况下，an 中键的顺序`NSDictionary`通常不是您希望它们的顺序。如果要对键进行排序，可以使用：

```
NSDictionary *dict = /* fill your dictionary */;

NSArray *allKeys = [dict allKeys];

NSArray *sortedKeys = [allKeys sortedArrayUsingSelector:@selector(compare:)];

for (NSString *key in sortedKeys)
{
    id value = [dict objectForKey:key];

    // do something with "key" and "value" in sorted order of "key"
} 
```

# javascript - 输入类型中的值在等待函数后未显示

> ID：10575008
> 
> 赞同：0
> 
> 时间：2012-05-13T20:34:35.717
> 
> 标签：javascript, javascript-events

我有一个什么都不做的简单函数：

`function doNothing(){}`

我也有一个看起来像这样的函数：

```
function getJson() {
    var JSONObject = {
        "name": "John Johnson",
        "street": "Oslo West 555",
        "age": 33,
        "phone": "5551234var stuff = <%= @var %>;567"
    };
    document.getElementById("name").value = JSONObject.name;
    setTimeout(doNothing(), 1000);
    document.getElementById("street").value = JSONObject.street; 
```

所以`doNothing()`函数实际上只是在这里，所以我可以在`setTimeout`函数中放置一个参数。

整个 javascript 代码的要点是我希望立即显示第一个值，并在 1 秒（1000 毫秒）后显示第二个值，但它永远不会出现。

有人可以告诉我我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:37:39.743

settimeout 不是睡眠函数，它会在 1000 毫秒后调用一个函数。您的其他代码仍将立即执行。

尝试：

```
document.getElementById("name").value = JSONObject.name;

setTimeout(function(){
    document.getElementById("street").value = JSONObject.street;
}, 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T20:37:39.073

您不能延迟同步执行；JavaScript 没有`sleep`类似的功能，请不要考虑使用循环和`Date`对象来模拟它，因为这会使整个浏览器挂起，直到延迟循环完成。

要解决您的问题，只需将应该延迟的代码放在`setTimeout`回调函数中。由于它将是一个闭包，因此您可以轻松访问先前范围中存在的任何变量。

```
document.getElementById("name").value = JSONObject.name;
setTimeout(function() {
    document.getElementById("street").value = JSONObject.street;
}, 1000); 
```

顺便说一句，要`doNothing`在 1000 毫秒后执行该函数，您将传递`doNothing`给`setTimeout`- 传递时传递`doNothing()`该函数的返回值，这通常不是您想要的。

# mongodb - MongoDB将注释保存到嵌套数组

> ID：10575009
> 
> 赞同：-2
> 
> 时间：2012-05-13T20:34:37.240
> 
> 标签：mongodb, mongodb-.net-driver

[我是 C# 和 MongoDB 的新手，并且在使用在线存储库模式 ( http://www.primaryobjects.com/cms/article137.aspx](http://www.primaryobjects.com/cms/article137.aspx) )将/更新/保存项目插入嵌套数组时遇到了一些问题。这是一些代码：

楷模：

```
public class BlogModel
{
    [BsonId]
    public ObjectId Id { get; set; }
    public DateTime Date { get; set; }
    [Required]
    public string Title { get; set; }
    [Required]
    public string Body { get; set; }
    public string Author { get; set; }
    public IList<CommentModel> Comments { get; set; }
}

public class CommentModel
{
    [BsonId]
    public ObjectId Id { get; set; }
    public DateTime Date { get; set; }
    public string Author { get; set; }
    [Required]
    public string Body { get; set; }
} 
```

和存储库模式：

```
public void Add<T>(T item) where T : class, new()
{
    _db.GetCollection<T>().Save(item);
}

public void Add<T>(IEnumerable<T> items) where T : class, new()
{
    foreach (T item in items)
    {
        Add(item);
    }
} 
```

如何使用“添加”类向嵌套数组添加注释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:56:11.157

使用此存储库模式，将有四个步骤：

1.  实例化*BlogModel类型的存储库*
2.  检索要添加评论的文档
3.  向文档添加评论
4.  将文档保存回集合中。

像这样的东西：

```
var myRepository = new Repository<BlogModel>();
var myDocument = myRepository.Find(some_id);    // retrieve BlogModel document to update
myDocument.Comments.Add(some_new_comments);    // add to IList
myRepository.Add(myDocument);     // save changes to the document back to the repository 
```

请注意，由于您的*Add* repository 方法使用 C# Driver *Save*方法，因此它确实具有[insert 或 update](http://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-Save%3CTDocument%3Emethod)的功能。在这种情况下，您将没有*CommentModel*的存储库，因为它用作嵌入到*BlogModel*文档中的文档数组。

# android - Android SDK 的 AVD 根本不加载 Emulator

> ID：10575010
> 
> 赞同：1
> 
> 时间：2012-05-13T20:34:42.433
> 
> 标签：android, eclipse, sdk, emulation, avd

我无法启动模拟器。我可以在 AVD 中创建新设备，它们会在名称旁边显示一个绿色小勾，但它们不会启动。没有模拟器加载。也没有出现错误信息。我已经尝试等待超过 15 分钟。当我尝试在 Eclipse 上加载它时也会发生同样的情况。我有一个测试项目。它编译并尝试启动，我在控制台上收到以下消息，之后没有任何反应。

```
[2012-05-13 15:26:30 - TestApp] ------------------------------
[2012-05-13 15:26:30 - TestApp] Android Launch!
[2012-05-13 15:26:30 - TestApp] adb is running normally.
[2012-05-13 15:26:30 - TestApp] Performing com.test.testapp.TestAppActivity activity launch
[2012-05-13 15:26:30 - TestApp] Automatic Target Mode: launching new emulator with compatible AVD 'MyAVD'
[2012-05-13 15:26:30 - TestApp] Launching a new emulator with Virtual Device 'MyAVD' 
```

奇怪的是，在我格式化和重新安装 Windows 之前，它曾经可以工作。我不知道我哪里错了；我尝试在 Google 和 StackOverflow 上搜索以找到解决方案，并且我尝试了所有我找到的解决方案，但没有成功。

类路径已设置。SDK 安装到路径中没有空格的位置。重新启动。重新安装。将“启动默认活动”、“自动目标”更改为“手动”。没运气。没有正在运行的 Android 设备。任何人都可以对这个问题有所了解吗？

细节：

64 位窗口

32 位 JDK

32 位 Java EE Eclipse 提取到“C:\eclipse”

Android SDK 安装到“C:\android-sdk”

PATH 变量包括：

";C:\Program Files (x86)\Java\jdk1.7.0_04\bin"

";C:\android-sdk\platform-tools"

";C:\android-sdk\tools"

# objective-c - 访问 NSUserDefaults 时是否需要使用委托来维护 MVC 模式？

> ID：10575012
> 
> 赞同：1
> 
> 时间：2012-05-13T20:35:01.607
> 
> 标签：objective-c, ios, model-view-controller, nsuserdefaults, cs193p

仍在执行 cs193p 的作业 4。- [http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/assignments/Assignment%204_2.pdf](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/assignments/Assignment%204_2.pdf)

我已经完全（ish）实现了从地点列表中显示照片。

我正在添加应用程序的第二个选项卡（必需的任务 10 和 11），用于生成并显示按时间顺序查看的 20 张最近照片的列表。

我的问题与 MVC 模式和设置/访问 NSUserdefaults 有关。

基本上，每当查看照片时，都需要更新存储在 NSUserdefaults 中的属性列表。

在选择“最近的照片”选项卡时，需要读取并显示这些值，以便用户可以选择最近查看的照片，然后通过选择它来查看。

我认为我可以通过编写代码行很容易地实现这一点，并且它可能会起作用。

我见过这个问题：[CS193P UITabBarController MVC Help on Assignment 4](https://stackoverflow.com/questions/9629168/cs193p-uitabbarcontroller-mvc-help-on-assignment-4)这有点相关，但并没有真正解决我关于模式性质的更多理论问题。

我的问题更多关于 MVC 模式。

在讲座中，当他用最喜欢的图表演示这一点时，在之前的计算器作业中，他使用了一个委托在收藏夹列表视图控制器和 graphviewController 之间进行通信（参见第 9 课的幻灯片 64 上的图表）。 [http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/lectures/Lecture%209_1.pdf](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/lectures/Lecture%209_1.pdf)

我正在尝试确定是否需要做类似的事情以避免破坏 MVC 模式，或者我是否可以在 imageViewController 的 viewWillLoad 中使用 NSUserdefaults 将照片添加到收藏夹，然后在我的设置器中使用 RecentImagesViewController . 我知道 NSUserdefaults 是为持久性而设计的，只是感觉有点像我在使用全局变量。

我意识到如果您不熟悉 cs193p 课程，这个问题的措辞会让您难以理解——抱歉。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:16:15.933

I don't think you have to transform something rather simple in something complex. You are storing the favorites using the `NSUserDefaults` and that's it. The place where you are using might not be the best (I am not saying the `viewWillLoad` is a bad place, I don't know your code), but I don't think you need a delegate to just update the `NSUserDefaults`. Botton line, don't forget the [KISS principle](http://en.wikipedia.org/wiki/KISS_principle). :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:55:59.807

好吧，您可能会觉得您使用的是全局变量，因为用户默认自己是一个全局概念。他们应该是。您不希望应用程序的不同部分在用户偏好的不同步版本上运行。

但是，如果您在旧的 C/C++ 全局静态数据块的意义上使用术语*变量*，那么，不……不是这样的。 `NSUserDefaults`由 Apple 编写，是一个很好的整洁*类*，封装了用户默认数据。您用来访问类似单例实例的事实`[NSUserDefaults standardUserDefaults]`（不确定 Apple 是否选择实现它）并不意味着它是一个真正的全局变量。

我同意 Jacky Boy 的观点，即保持简单是最好的，但你的问题实际上是在问你这样做是否违反了 MVC 模式（并且盲目地坚持模式并不*总是*会让你的代码成为最好的） . 这取决于您认为该**模型**是什么。我可以证明 Apple 构建`NSUserDefaults`为偏好数据的模型层封装。所以，你有你的模型层，你的控制器应该能够使用它。

或者您是否觉得需要自己编写整个**模型**层，在这种情况下，您的模型层将只包含`NSUserDefaults`. 在大多数情况下，这似乎有点矫枉过正。

这可能是一种可以保证的情况。如果您有很多看起来在逻辑上相关的偏好数据，但其中一些不适合`NSUserDefaults`. 也许它是很多二进制数据，存储在对象的层次结构中，你想用 Core Data 持久化它。但是，它似乎仍然与您保留的内容在逻辑上相关`NSUserDefaults`。也许那时，您决定编写自己的模型层，它封装了核心数据和`NSUserDefaults`数据。然后您的视图控制器可以直接使用它。

但是，总的来说，我认为 iOS 设计得很好，任何人都可以直接使用该`standardUserDefaults`对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T21:27:22.137

如果我正确理解了这个问题，听起来应该从适当的视图控制器进行设置/加载。创建可以从每个不同选项卡的视图控制器调用的委托（可能是也可能不是单例）将有助于防止您重复代码。

# wcf - 使用 WCF REST HTML5 表单

> ID：10575017
> 
> 赞同：-1
> 
> 时间：2012-05-13T20:35:56.093
> 
> 标签：wcf, html

我想在我的 HTML5 表单中使用 WCF REST 服务方法。我想我可以为此使用 JQuery。有人可以提供一些如何实现这一目标的链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:24:12.377

阅读这篇关于使用 WCF 创建 REST 服务并使用 jQuery 使用[的博客文章](http://pranayamr.blogspot.com/2011/03/rest.html)

# jquery - 将 jQuery UI 手风琴应用于渲染的 Backbone.js 视图

> ID：10575030
> 
> 赞同：0
> 
> 时间：2012-05-13T20:38:15.787
> 
> 标签：jquery, backbone.js, accordion

我正在尝试将 jQuery 手风琴元素应用于在 Backbone.js 视图中创建的 HTML。

当我尝试在渲染后调用手风琴时，它不会生效，例如

```
messageListView.render();
$("#messages").accordion(); 
```

我必须延迟调用手风琴才能使其生效：

```
setTimeout(function() { $("#messages").accordion() }, 100); 
```

关于为什么会这样的任何见解。我是否应该期望在调用视图上的 render() 方法时完成所有 DOM 渲染？

考珀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:35:34.543

`$("#messages").accordion();`问题可能是您在视图附加到 DOM 之前尝试调用。

# silverlight - 在 Silverlight 中缩放/缩放时画布的奇怪行为

> ID：10575031
> 
> 赞同：2
> 
> 时间：2012-05-13T20:38:19.390
> 
> 标签：silverlight, zooming, scaletransform

我正在使用 Silverlight 5 进行缩放，

我的想法是根据画布上的鼠标位置以及拖动画布的能力进行缩放，

我遇到的问题是当比例小于 1，大约 0.6 或 0.5 时，指向画布的一角并向上滚动，画布会改变它的位置或“跳跃”，请帮忙吗？

这两张照片描述了之前的状态然后之后：

![缩放前](../Images/84bba82d8ad95522139ee250b103ece0.png)

![缩放后](../Images/4a6d91e1645a692bd0304bbbee17696c.png)

我有以下 XAML：

```
<Grid x:Name="LayoutRoot" Background="White">
    <ScrollViewer x:Name="sv" Margin="0,0,0,76" ScrollViewer.VerticalScrollBarVisibility="Disabled" Background="#FFE3E7F1">
        <Canvas x:Name="grd" Height="394" Width="630">
            <Canvas x:Name="cvs" Background="White" MouseWheel="cvs_MouseWheel" MouseLeftButtonDown="cvs_MouseLeftButtonDown" MouseLeftButtonUp="cvs_MouseLeftButtonUp" MouseMove="cvs_MouseMove" Height="391" Canvas.Left="2" Canvas.Top="1" Width="625">
                <Canvas.Effect>
                    <DropShadowEffect ShadowDepth="0"/>
                </Canvas.Effect>
                <Rectangle Height="70" Canvas.Left="155" Canvas.Top="58" Width="79" Fill="#FFFFBFBF"/>
                <Rectangle Height="70" Canvas.Left="544" Canvas.Top="126" Width="79" Fill="#FF8B92FF"/>
            </Canvas>
        </Canvas>
    </ScrollViewer>
</Grid> 
```

这是C#：

```
public partial class MainPage : UserControl
{
    CompositeTransform canvasTransform = new CompositeTransform();
    bool canDragCanvas;
    double mouseRelatedPositionX = 0;
    double mouseRelatedPositionY = 0;
    public MainPage()
    {
        // Required to initialize variables
        InitializeComponent();
    }

    private void cvs_MouseWheel(object sender, System.Windows.Input.MouseWheelEventArgs e)
    {
        var scaleFactor = 0.2*(e.Delta < 0?-1:1);
        var centerX = e.GetPosition(cvs).X;
        var centerY = e.GetPosition(cvs).Y;
        if (centerX > cvs.ActualWidth * canvasTransform.ScaleX || centerX < 0 || centerY > cvs.ActualHeight * canvasTransform.ScaleY || centerY < 0)
        {
            centerX = cvs.ActualWidth/2;
            centerY = cvs.ActualHeight/2;
        }
        canvasTransform.CenterX = centerX;
        canvasTransform.CenterY = centerY;
        canvasTransform.ScaleX += scaleFactor;
        canvasTransform.ScaleY += scaleFactor;
        cvs.RenderTransform = canvasTransform;
    }

    private void cvs_MouseLeftButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        canDragCanvas = true;
        mouseRelatedPositionX = e.GetPosition(cvs).X;
        mouseRelatedPositionY = e.GetPosition(cvs).Y;
    }

    private void cvs_MouseLeftButtonUp(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        canDragCanvas = false;
    }

    private void cvs_MouseMove(object sender, System.Windows.Input.MouseEventArgs e)
    {
        if(!canDragCanvas) return;
        var leftValueToAdd = e.GetPosition(cvs).X - mouseRelatedPositionX;
        var topValueToAdd = e.GetPosition(cvs).Y - mouseRelatedPositionY;
        UpdateCanvasPosition(leftValueToAdd*canvasTransform.ScaleX, topValueToAdd*canvasTransform.ScaleX);
    }

    void UpdateCanvasPosition(double leftValueToAdd,double topValueToAdd)
    {
        var leftOffset = canvasTransform.CenterX - canvasTransform.CenterX * canvasTransform.ScaleX;
        var rightOffset = (cvs.ActualWidth - canvasTransform.CenterX) - (cvs.ActualWidth - canvasTransform.CenterX) * canvasTransform.ScaleX;
        var topOffset = canvasTransform.CenterY - canvasTransform.CenterY * canvasTransform.ScaleY;
        var bottomOffset = (cvs.ActualHeight - canvasTransform.CenterY) - (cvs.ActualHeight - canvasTransform.CenterY) * canvasTransform.ScaleY;

        var canvasLeftInBorders = Canvas.GetLeft(cvs)+ leftValueToAdd + leftOffset > 0;
        var canvasRightInBorders = Canvas.GetLeft(cvs) + cvs.ActualWidth * canvasTransform.ScaleX + leftValueToAdd + leftOffset < grd.ActualWidth;
        var canvasTopInBorders = Canvas.GetTop(cvs) + topValueToAdd + topOffset > 0;
        var canvasBottomInBorders = Canvas.GetTop(cvs) + cvs.ActualHeight * canvasTransform.ScaleY + topValueToAdd + topOffset < grd.ActualHeight;

        if (leftValueToAdd > 0)
        {
            if (canvasLeftInBorders)
                leftValueToAdd = 0;
        }
        else if (leftValueToAdd < 0)
            if (canvasRightInBorders)
                leftValueToAdd = 0;

        if (topValueToAdd > 0)
        {
            if (canvasTopInBorders)
                topValueToAdd = 0;
        }
        else if (topValueToAdd < 0)
            if (canvasBottomInBorders)
                topValueToAdd = 0;

        Canvas.SetLeft(cvs, Canvas.GetLeft(cvs) + leftValueToAdd);
        Canvas.SetTop(cvs,Canvas.GetTop(cvs)+topValueToAdd);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:47:07.187

基本上，您将鼠标事件附加到正在缩放的​​表面上，并且鼠标坐标也会改变。Silverlight 被设计为在您旋转、缩放和倾斜时仍然具有交互性。

您想在顶部放置一个未缩放的透明层，并将鼠标方法附加到该层。

如果您打开该层，您将不得不计算碰撞，但您可以使该层仅在鼠标向下时出现并在鼠标向上时消失。

# macos - 在多个屏幕上显示应用程序

> ID：10575034
> 
> 赞同：0
> 
> 时间：2012-05-13T20:38:30.810
> 
> 标签：macos, cocoa

我有一个应同时显示在多个屏幕上的应用**程序**。用主屏没问题，但是副屏不行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:05:28.387

我找到了解决方案，只需检索第二个屏幕的框架并在主屏幕中显示窗口，但使用第二个屏幕的框架

```
NSRect secScreenRect = [secondScreen frame];

myWindow = [[NSWindow alloc] initWithContentRect:secScreenRect
                                                 styleMask:NSBorderlessWindowMask
                                                   backing:NSBackingStoreBuffered
                                                     defer:NO
                                                    screen:[NSScreen mainScreen]];
... 
```

# asp.net-mvc-3 - 在 Asp.Net MVC3 中显示自动完成数据

> ID：10575038
> 
> 赞同：1
> 
> 时间：2012-05-13T20:39:36.127
> 
> 标签：asp.net-mvc-3, autocomplete

我已经为文本框的自动完成编写了代码。它工作正常。我的意图是在输入数据时在文本框下方的 div 中填充数据，就像谷歌搜索一样。有没有办法做到这一点。

我有一个控制器，它返回结果以供查看。

任何帮助，将不胜感激。提前致谢。

# coldfusion - 如何映射引用两个表的外键列？

> ID：10575039
> 
> 赞同：2
> 
> 时间：2012-05-13T20:39:45.737
> 
> 标签：coldfusion, coldfusion-9

在使用 ORM 的 ColdFusion 中，如何映射引用两个表的外键列？

我的例子。

目前，图像可以属于人类或外星人

```
Image.cfc
property name="imageID" fieldtype="id" generator="guid";

// Related Object Properties (many-to-one)
property name="Human" fieldtype="many-to-one" fkcolumn="HumanID" cfc="human";
property name="Alien" fieldtype="many-to-one" fkcolumn="AlienID" cfc="alien"; 
```

这给我留下了一张看起来像这样的桌子..

```
Image.cfc

    ID   NAME    HumanID  AlienID
    1    img1    10       NULL
    2    img2    NUll     8 
```

对我来说，NULL 闻起来很糟糕！

那么我可以用两个对象的一个​​映射替换它吗？或者如果我创建一个类别表？有任何想法吗？

谢谢

火花

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:30:54.653

您不能将单个属性映射到多个父对象。所以你在这里有两个选择。

您需要将其映射为[每个层次结构的类，](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WS027D3772-2E98-4d5b-8800-054A62EBF8D9.html#WSB268B0CB-17CB-4e28-B0D3-ED72DF166D8E)其中您将拥有 HumanImage 和 AlienImage 类，它们扩展了基本 Image 类

```
// Image.cfc
component persistent="true" {
    property name="id" generator="guid";
    property name="name";   
}

// AlienImage.cfc & HumanImage.cfc
component persistent="true" extends="Image" joincolumn="id" {
}

// Alien.cfc
component persistent="true"  {
    property name="id" generator="guid";
    property name="Image" fieldtype="one-to-many" cfc="AlienImage"
      fkcolumn="fkAlienID";
}

// Human.cfc
component persistent="true"  {
    property name="id" generator="guid";
    property name="Image" fieldtype="one-to-many" cfc="HumanImage"
      fkcolumn="fkHumanID";
} 
```

# twitter-bootstrap - Twitter Bootstrap - 示例应用程序

> ID：10575045
> 
> 赞同：-1
> 
> 时间：2012-05-13T20:40:09.427
> 
> 标签：twitter-bootstrap

我是 Java 脚本的新手，但对 twitter 引导程序印象深刻。我想使用引导带并创建一些示例。

当我包含 bootsrap 给出的按钮等的 js 时，找不到工作。

请问我可以使用 twitter 引导程序获得一个包含 html、java 脚本的示例登录页面。

我还想知道如何在 html -> java 脚本中引用引导组件。

我想要一个全面的登录示例开始，我已经下载了 twitter 引导程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:02:18.410

我同意你的观点，Twitter Bootstrap 是一个非常棒的框架，尤其是当你需要开始快速有效地构建一个时尚的网站时。使用 Bootstrap 创建登录页面的方法有很多，但最终，您不能只使用 HTML 和 JavaScript 创建它，您需要某种服务器端脚本来验证用户身份。最好的方法是使用 PHP。登录表单不需要 JavaScript，除非您想在数据传递到服务器之前创建某种客户端验证方法。虽然不需要这样做。

例如，您将拥有基本的登录表单`login.php`...

```
<form id="loginForm" action="login.php" method="post">
    <input type="text" name="username" id="username" class="span4" placeholder="Username">
    <input type="password" name="password" id="password" class="span4" placeholder="Password">
    <button type="submit" name="login" id="login" class="btn btn-primary">Login</button>
</form> 
```

这将是您的基本登录表单（根据需要自定义）。如您所见，它将输入的数据发布到`login.php`与上述表单所在的文件相同的文件中。

为了验证用户输入并登录用户，您需要使用脚本或用 PHP 编写脚本来检索表单发布的数据并对用户进行身份验证。假设您的问题，您对 PHP 不太熟悉，这将使其变得更加困难。在这种情况下，您最好的选择是在 Web 上找到一个用 PHP 编写的免费登录脚本或成员脚本，并根据您的需要对其进行修改，并使用 Bootstrap 的类/结构。

如果您有兴趣在将数据发布到 php 脚本之前通过 JavaScript 验证用户输入，我建议您查看 jQuery。Bootstrap 是为使用 jQuery 而编写的，因此可以很好地集成。当您对 JavaScript 有基本的了解时，jQuery 也很容易学习。

希望这可以帮助您根据需要构建登录表单。

# c# - 转换一个简单的 JavaScript 代码

> ID：10575046
> 
> 赞同：4
> 
> 时间：2012-05-13T20:40:38.893
> 
> 标签：c#, javascript

我一直在尝试转换[这个从图像中获取主色的 JavaScript 代码](https://gist.github.com/1017111)，但到目前为止没有成功。我得到`colorCount`&`color`变量的错误。我不知道用于这些变量的合适且等效的数据类型。这是我的代码：

```
public string dominantColor(Bitmap img)
{
       int[] colorCount = new int[0];
       int maxCount = 0;
       string dominantColor = "";

       // data is an array of a series of 4 one-byte values representing the rgba values of each pixel
       Bitmap Bmp = new Bitmap(img);

       BitmapData BmpData = Bmp.LockBits(new Rectangle(0, 0, Bmp.Width, Bmp.Height), ImageLockMode.ReadOnly, Bmp.PixelFormat);
       byte[] data = new byte[BmpData.Stride * Bmp.Height];

       for (int i = 0; i < data.Length; i += 4) 
       {
            // ignore transparent pixels
            if (data[i+3] == 0)
                continue;

            string color = data[i] + "." + data[i+1] + "," + data[i+2];
            // ignore white
            if (color == "255,255,255")
               continue;

            if (colorCount[color] != 0)
               colorCount[color] = colorCount[color] + 1;
            else
               colorCount[color] = 0;

            // keep track of the color that appears the most times
            if (colorCount[color] > maxCount)
            {
                 maxCount = colorCount[color];
                 dominantColor = color.ToString;
            }
       }

       string rgb = dominantColor.Split(",");
       return rgb;   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T21:09:42.007

我将为您提供代码的完整托管版本：

```
static Color dominantColor(Bitmap img)
{
    Hashtable colorCount = new Hashtable();
    int maxCount = 0;
    Color dominantColor = Color.White;

    for (int i = 0; i < img.Width; i++)
    {
        for (int j = 0; j < img.Height; j++)
        {
            var color = img.GetPixel(i, j);

            if (color.A == 0)
                continue;

            // ignore white
            if (color.Equals(Color.White))
                continue;

            if (colorCount[color] != null)
                colorCount[color] = (int)colorCount[color] + 1;
            else
                colorCount.Add(color, 0);

            // keep track of the color that appears the most times
            if ((int)colorCount[color] > maxCount)
            {
                maxCount = (int)colorCount[color];
                dominantColor = color;
            }
        }
    }

    return dominantColor;
} 
```

那么这里有什么区别呢？- 我使用 Hashtable 而不是你的数组（你永远不会重新定义它的维度 - 而使用 JavaScript 中的可扩展对象的最佳方法是 Hashtable） - 我更喜欢使用已经包含的结构 Color（它为 Alpha 节省了 4 个字节, Red, Green, Blue) - 我也进行比较并返回这个结构（然后你可以自由地做任何你想做的事 - 在 JavaScript 中使用这些字符串只是一种解决方法，因为浏览器只是给你这样的 RGB(a ) 字符串)

您的代码中的另一个问题是包含 byte[] data = new byte[BmpData.Stride * Bmp.Height]; 的行 - 您的数组已创建并初始化，但没有数据（.NET 将擦除所有以前的数据，导致很多零）。因此，你不会在任何地方。

我的版本的缺点是它确实非常小（这是你的锁位发挥作用的地方）。如果你愿意，我可以给你一个非托管版本（使用 lockbits 和一个 unsafe-block）。取决于性能是否对您很重要以及您是否感兴趣！

# php - php不会从数据库中回显html

> ID：10575047
> 
> 赞同：1
> 
> 时间：2012-05-13T20:41:13.723
> 
> 标签：php, html, echo

```
$stmtcon = $mysqli->prepare("Select content From tblcontent Where contentid =?");
$stmtcon->bind_param('s', $loadcontent);
$stmtcon->execute();
$stmtcon->bind_result($htmlcontent);
$stmtcon->fetch();
$stmtcon->close();

echo $htmlcontent; 
```

该代码在我的计算机上完美运行，但不会在我使用的服务器上回显。如果我在 htmlcontent 上做一个 isset，它会返回为 true。页面上的所有其他元素都会加载。

设置中是否有任何东西可以阻止这个回声？内容包含html。

谢谢。

编辑 - 我将字段的类型从长文本更改为文本，有什么原因导致长文本不起作用，感谢您的回复^_^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:29:01.933

它可能与缓冲有关吗？您可以在 bind_result 之前放置一个 $stmtcon->store_result() 并尝试吗？

# c - 为什么以下功能不会因输入 1 而停止？

> ID：10575048
> 
> 赞同：1
> 
> 时间：2012-05-13T20:41:24.690
> 
> 标签：c

我希望您能帮助我理解为什么当我输入除 1 以外的任何数字时此功能不会停止。

```
int main(void) {

double sum,v;

while (scanf("%lf",&v)==1) {
    printf("\t%.2f\n", sum += v);

} 
```

看起来它应该在输入与 1 不同时停止。我相信它与条件有关，也许它会在我认为它之前检查一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T20:43:01.307

该函数`scanf`返回匹配和填充的项目数，而不是它读取的实际值。

> 成功完成后，这些函数将返回成功匹配和分配的输入项的数量；如果发生早期匹配失败，此数字可以为零。如果输入在第一次匹配失败或转换之前结束，则返回 EOF。

因此，在您的代码`scanf`中将始终返回`1`成功读取。您应该`v`改为测试（但不使用`==`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:45:37.900

scanf 成功返回成功读取的项目数。因此，您需要另外检查 if `v == 1`。

# ruby - Ruby：将数组转换为哈希时注入问题

> ID：10575052
> 
> 赞同：12
> 
> 时间：2012-05-13T20:41:47.637
> 
> 标签：ruby

```
a = [[1, 'a'],[2, 'b'],[3, 'c'], [4, 'd']]
a.inject({}) {|r, val| r[val[0]] = val[1]}

```

当我运行它时，我得到一个索引错误

当我将块更改为

```
a.inject({}) {|r, val| r[val[0]] = val[1]; r}

```

然后它工作。

ruby 如何处理第一次没有得到我想要的注入尝试？
有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-14T00:56:00.407

仅仅因为 Ruby 是动态和隐式类型的，并不意味着您不必考虑类型。

没有显式累加器的类型`Enumerable#inject`（通常称为`reduce`）类似于

```
reduce :: [a] → (a → a → a) → a 
```

或者我刚刚编造的更红宝石的符号

```
Enumerable[A]#inject {|A, A| A } → A 
```

您会注意到所有类型都是相同的。的元素类型，`Enumerable`块的两个参数类型，块的返回类型和整体方法的返回类型。

`Enumerable#inject` *带有*显式累加器（通常称为）的类型`fold`类似于

```
fold :: [b] → a → (a → b → a) → a 
```

或者

```
Enumerable[B]#inject(A) {|A, B| A } → A 
```

在这里，您看到累加器可以具有与集合的元素类型*不同的类型。*

这两条规则通常可以帮助您解决所有`Enumerable#inject`相关的类型问题：

1.  累加器的类型和块的返回类型必须相同
2.  不传递显式累加器时，累加器的类型与元素类型相同

在这种情况下，规则#1 会咬你一口。当你做类似的事情时

```
acc[key] = value 
```

在您的块中，分配评估为分配的值，而不是分配的接收者。您必须将其替换为

```
acc.tap { acc[key] = value } 
```

另请参阅[为什么 Ruby 注入方法无法总结没有初始值的字符串长度？](http://StackOverflow.Com/a/4314292/2988/)

* * *

顺便说一句：您可以使用解构绑定使您的代码更具可读性：

```
a.inject({}) {|r, (key, value)| r[key] = value; r } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-13T20:46:17.903

有一个更简单的方法 -

```
a = [[1, 'a'],[2, 'b'],[3, 'c'], [4, 'd']]
b = Hash[a] # {1=>"a", 2=>"b", 3=>"c", 4=>"d"} 
```

第一种方法不起作用的原因是，inject 将块的结果用作`r`下一次迭代中的结果。对于第一次迭代，`r`设置为您传递给它的参数，在本例中为`{}`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-13T20:45:47.663

第一个块将分配的结果返回到 中`inject`，第二个块返回哈希，所以它确实有效。

很多人认为这种`inject`反模式的用法。[`each_with_object`改为](http://apidock.com/ruby/Enumerable/each_with_object)考虑。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-30T02:58:26.790

```
a.inject({}) { |r, val| r.merge({ val[0] => val[1] }) } 
```

# javascript - 更改表格的边框和背景颜色并将鼠标悬停在它们上面

> ID：10575054
> 
> 赞同：2
> 
> 时间：2012-05-13T20:42:01.370
> 
> 标签：javascript, html, css

我正在尝试通过单击按钮来更改表格的背景和边框。我还尝试通过将鼠标悬停在按钮上来更改颜色。我让悬停工作，如果我先做的话。我遇到的问题是，当我单击按钮更改背景颜色时，我无法单击任何其他按钮更改为该特定按钮颜色。例如，我有四个按钮，蓝色、绿色、黄色、红色。如果我单击蓝色按钮，背景将变为蓝色，然后如果我选择单击其他颜色的按钮，它将不起作用，并且在单击任何按钮一次后，我的悬停将不再起作用。另外，如何减少耦合。如果我添加更多颜色按钮，我会按照我的速度，这只会等于更多的代码行。

```
 <h1 class="underline">Choose a Background or Border Color</h1>
            <div class="divCenter">
                <div class="divTable" ></div>
            </div></br>
        <button id="button1">Blue</button>
        <button id ="button2">Green</button>
        <button id="button3">Yellow</button>
        <button id ="button4">Red</button></br>
        <button id="button5">Blue Border</button>
        <button id ="button6">Green Border</button>
        <button id="button7">Yellow Border</button>
        <button id ="button8">Red Border</button></br>
        <script>
        $(document).ready(function()
            {
                $("#button1").click(function()
                    {

                        $(".divTable").attr("class","divTableBlue");
                    }); 

                $("#button2").click(function()
                    {
                    $(".divTable").attr("class","divTableGreen");

                    });
                $("#button3").click(function()
                    {
                    $(".divTable").attr("class","divTableBlue");
                    });
                $("#button4").click(function()
                    {
                        $(".divTable").attr("class","divTableRed");
                });
        $("#button1").hover(function()
                    {
                        $(".divTable").addClass("divTableBlue");
                    }, 
                    function() 
                    {
                        $(".divTable").removeClass("divTableBlue"); 
                    });
                $("#button2").hover(function()
                    {
                        $(".divTable").addClass("divTableGreen");
                    }, 
                    function() 
                    {
                        $(".divTable").removeClass("divTableGreen");
                    });
                $("#button3").hover(function()
                    {
                        $(".divTable").addClass("divTableYellow");
                    }, 
                    function() 
                    {
                        $(".divTable").removeClass("divTableYellow");
                    });
                $("#button4").hover(function()
                    {
                        $(".divTable").addClass("divTableRed");
                    }, 
                    function() 
                    {
                        $(".divTable").removeClass("divTableRed");
                    });
            });
        </script> 
```

CSS是

```
.divTable
{
    display:table;
    padding-top:10px;
    padding-bottom:200px;
    padding-left:10px;
    padding-right:10px;
    width:250px;
    background:grey;
    border-style:solid;
    border-width:5px;
}
.divTableBlue
{
    display:table;
    padding-top:10px;
    padding-bottom:200px;
    padding-left:10px;
    padding-right:10px;
    width:250px;
    background:blue;
    border-style:solid;
    border-width:5px;
}
.divTableGreen
{
    padding-top:10px;
    padding-bottom:200px;
    padding-left:10px;
    padding-right:10px;
    width:250px;
    background:green;
    border-style:solid;
    border-width:5px;
}
.divTableYellow
{
    padding-top:10px;
    padding-bottom:200px;
    padding-left:10px;
    padding-right:10px;
    width:250px;
    background:yellow;
    border-style:solid;
    border-width:5px;
}
.divTableRed
{
    padding-top:10px;
    padding-bottom:200px;
    padding-left:10px;
    padding-right:10px;
    width:250px;
    background:red;
    border-style:solid;
    border-width:5px;
}

.divTableBlueBorder
{
    display:table;
    padding-top:10px;
    padding-bottom:200px;
    padding-left:10px;
    padding-right:10px;
    width:250px;
    border-style:solid;
    border-width:5px;
    border-color:blue;
}
.divTableGreenBorder
{
    padding-top:10px;
    padding-bottom:200px;
    padding-left:10px;
    padding-right:10px;
    width:250px;
    border-style:solid;
    border-width:5px;
    border-color:green;
}
.divTableYellowBorder
{
    padding-top:10px;
    padding-bottom:200px;
    padding-left:10px;
    padding-right:10px;
    width:250px;
    border-width:5px;
    border-style:solid;
    border-color:yellow;
}
.divTableRedBorder
{
    padding-top:10px;
    padding-bottom:200px;
    padding-left:10px;
    padding-right:10px;
    width:250px;
    border-style:solid;
    border-width:5px;
    border-color:red;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:48:28.890

看看这是否符合您的预期：http: [//jsfiddle.net/DerekL/YjzmY](http://jsfiddle.net/DerekL/YjzmY)

您可以将代码简化为：

```
var colors = [                       //first make a list of colors.
    "Blue",
    "Green",
    "Red",
    "Yellow"
    ],
    selected = "";                   //later used to store selected color 
```

然后做一个函数：

```
function seperate(arr,j){            //created a separate function
    return function(){               // to store i given by the loop.
        $(".divTable")
            .attr("class","divTable")
            .addClass("divTable" + arr[j]);
        selected = arr[j];
    }
}

function seperate_hover(arr,j){
    return function(){
        $("#button"+(j+1)).hover(function(){
                $(".divTable")
                .attr("class","divTable")
                .addClass("divTable"+arr[j]);
        },function(){
            $(".divTable")
                .attr("class","divTable")
                .addClass("divTable"+selected);  //change back to the selected color.
        });
    }
}

function doTheJob(arr) {
    for (var i = 0; i < arr.length; i++) {
        $("#button" + (i + 1)).on("click", seperate(arr,i));   //click
        seperate_hover(arr,i)();                               //hover
    }
}

doTheJob(colors);​                   //the script will now do the job for you 
```

另外，使用`.on("click")`代替`.click()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:49:07.937

利用

```
$('target').on('click', function(){
     //add your code
}); 
```

代替`.click()`

# drupal - 在 drupal 7 看来，如何在不重定向到内容类型页面的情况下发表评论？

> ID：10575058
> 
> 赞同：0
> 
> 时间：2012-05-13T20:42:39.960
> 
> 标签：drupal, redirect, drupal-views, drupal-comments

我为特定的内容类型做一个视图，内容类型的路径和视图的路径是不同的。现在我将一个表单放入视图中，以便对该内容类型进行评论。但是，每当我在视图页面上发表评论时，视图页面都会重定向到内容类型的路径，所以问题是我如何才能在不重定向到内容页面但停留在视图页面上的情况下发表评论，也许使用 ajax？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T00:49:53.180

听起来你需要一些 AJAX-y 的东西。你看过[http://dgo.to/ajax_comments](http://dgo.to/ajax_comments)吗？我很确定它可以用来做你描述的事情。

# typo3 - 在 TYPO3 中设置多语言站点

> ID：10575060
> 
> 赞同：2
> 
> 时间：2012-05-13T20:42:55.940
> 
> 标签：typo3, typoscript, multilingual

我正在尝试使用typo3 建立一个多语言网站，但我遇到了一些麻烦。该网站的默认语言是德语，但我也想要英语和法语。所以我又定义了 2 种语言：ID=2 的英语和 ID=3 的法语

接下来，我将此打字稿添加到我的模板中：

```
config.linkVars = L
config.uniqueLinkVars = 2
config.sys_language_overlay = content_fallback
config.language = de
config.locale_all = de_DE
config.htmlTag_langKey = de-DE
config.sys_language_uid = 0

[globalVar = GP:L = 2]
config.language = en
config.locale_all = en_EN
config.htmlTag_langKey = en-EN
config.sys_language_uid = 2

[globalVar = GP:L = 3]
config.language = fr
config.sys_language_uid = 3
config.locale_all = fr_FR
config.htmlTag_langKey = fr-FR
[end] 
```

然后我从扩展[srlanguagemenu](http://typo3.org/extensions/repository/view/sr_language_menu)添加了这个语言菜单：

```
10 < plugin.tx_srlanguagemenu_pi1
10{
    languagesUidsList = 0,2,3
    defaultLayout = 2
    showLinkWithFlag = 0
    showCurrent = 1
} 
```

但菜单只显示“英文”。这是确切的标记：

```
<div class="tx-srlanguagemenu-pi1">
    <div class="CUR"><img src="typo3/gfx/content_client.gif" alt="" style="width:7px; height:10px;"><a href="index.php?id=46">English</a></div>
    <div class="SPC"> &nbsp; </div> <div class="INACT"></div>
    <div class="SPC"> &nbsp; </div> <div class="INACT"></div>
</div> 
```

还。在菜单中，页面名称不显示翻译版本。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:34:51.763

您不仅需要翻译页面的内容，还需要翻译页面。这是通过创建“alternative_page_language”（德语中的“alternative Seitensprache”）来完成的。

[您可以通过HMENU.special = language](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.7.0/view/1/7/#id784990)创建多语言 TS 菜单。

对于翻译工作，请查看 INFO-Modul。有一个“本地化概述”，不要错过：）我猜你已经在页面模块中找到了语言视图。

# ruby-on-rails - 同时创建2个模型

> ID：10575061
> 
> 赞同：1
> 
> 时间：2012-05-13T20:42:56.323
> 
> 标签：ruby-on-rails, forms, model

好的，我进行了广泛的搜索，找不到可以开始工作的解决方案……所以我决定在这里发帖。

我有 2 个模型

**店铺**

```
class Store < ActiveRecord::Base
  attr_accessible :storeimage, :storename
  belongs_to :user

  validates :user_id, :presence => true  
end 
```

和

**用户**

```
class User < ActiveRecord::Base 
  attr_accessible :first_name, :last_name, :email, :password, :password_confirmation, :userimage, :remove_userimage
  has_secure_password
  has_many :gears
  has_many :comments, :dependent => :destroy 
  has_one :store, :dependent => :destroy
  before_save :create_remember_token
  require 'carrierwave/orm/activerecord'
  mount_uploader :userimage, UserpicUploader
  accepts_nested_attributes_for :store

  ...

end 
```

当有人创建一个新的用户帐户时，我需要为我在用户表单中考虑的那个用户自动创建一个新商店。那么如何创建一个链接到正在创建的新用户的新商店对象呢？

这是我在**CreateAction 的用户控制器中的代码**

```
 def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      redirect_to @user, :flash => {:success => "Welcome to Equiptme"}
    else
      render 'new'
      @title = "Sign up"
    end
  end 
```

**看法**

```
<div class="signup_container">
    <div class="signup_container_interior">
    <%= provide(:title, 'Sign up') %>
    <%= form_for(@user) do |f| %>
    <% if @user.errors.any? %>
      <div>
        <div>
          The form contains <%= pluralize(@user.errors.count, "error") %>.
        </div>
        <ul>
        <% @user.errors.full_messages.each do |msg| %>
          <li>* <%= msg %></li>
        <% end %>
        </ul>
      </div>
    <% end %>
      <div class="register_field">  
        <div class="register_nonerror_container">
            <%= f.label :first_name %>&nbsp;<%= f.text_field :first_name, class: 'register_text_area' %>
        </div>
      </div>
      <div class="register_field">
        <div class="register_nonerror_container">
            <%= f.label :last_name %>&nbsp;<%= f.text_field :last_name, class: 'register_text_area' %>
        </div>
      </div>
      <div class="register_field">
        <div class="register_nonerror_container">
            <%= f.label :email %>&nbsp;<%= f.text_field :email, class: 'register_text_area' %>
        </div>
      </div>
    <!--************STORE FIELDS ************** -->

    <!--************STORE FIELDS END ************** --> 

      <div class="register_field">
        <div class="register_nonerror_container">
            <%= f.label :password %>&nbsp;<%= f.password_field :password, class: 'register_text_area' %>
        </div>
      </div>
      <div class="register_field">
        <div class="register_nonerror_container">
            <%= f.label :password_confirmation %>&nbsp;<%= f.password_field :password_confirmation, class: 'register_text_area' %>
        </div>
      </div>
      <div class="actions">
        <%= f.submit "Create Account", class: 'register_button' %>
      </div>
    <% end %>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T20:49:07.437

您可以使用创建的[`build_association`方法](http://guides.rubyonrails.org/association_basics.html#has_one-association-reference)`has_one`以及用户和商店之间的关系：

```
def create
  @user = User.new(params[:user])
  @user.build_store

  # etc
end 
```

如果您在保存用户之前不需要商店，您也可以使用`create_association`：

```
 if @user.save
    @user.create_store
    # etc
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:54:52.633

你可能想看看这个：

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

# jquery - 更改时获取内联 URL

> ID：10575064
> 
> 赞同：1
> 
> 时间：2012-05-13T20:43:04.963
> 
> 标签：jquery, url, inline, fetch

单击如下内联链接时，如何在 jQuery 中获取 URL？

```
http://domain.com/#!/?model=ford
http://domain.com/#!/?color=blue 
```

以下代码在您重新加载整个浏览器时抓取，但在您单击“内联链接”时不会抓取

```
$(location).attr('href'); 
```

使用我正在寻找的技术的站点如下：[http://www.modezine.com/se/#!/?category=women](http://www.modezine.com/se/#!/?category=women) 尝试按不同的颜色并查看 URL 和正在重新加载的内容，而无需重新加载浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:49:42.223

如果您在单击不同颜色的同时查看萤火虫，则调用是通过 AJAX 进行的。抓取所需的 URI 内容并将其推送到位（此技术不会刷新页面，但 URL 是“美化的”）。

所以我的回答是：选择[AJAX](http://api.jquery.com/category/ajax/)。

不要错过这个链接[https://developer.mozilla.org/en/Ajax](https://developer.mozilla.org/en/Ajax)

# css - 将 Div 列表中的文本与 Internet Explorer 9 中的 CSS 对齐

> ID：10575065
> 
> 赞同：0
> 
> 时间：2012-05-13T20:43:16.720
> 
> 标签：css, internet-explorer, html

我有一个`div`需要以垂直方式对齐文本的位置，例如列表（`ul`/ `li`）。我尝试了列表、表格单元格、段落和其他一些东西，但没有成功。我的大多数尝试都导致结果超出了我包含的 div`.header`和`.headerright`.

这是我的精简代码：

**HTML：**

```
<div class="header">
    <div class="headerleft">
    </div>
    <div class="headerright">
            Line 1 Text
            Line 2
    </div>
</div> 
```

**CSS：**

```
div.header {
    height:75px;
    background-color:#FFF;
    padding-left:10px;
    padding-right: 10px;
}
    div.headerleft {
    border: none;
    float: left;
    margin: 0;
    padding: 0;
    line-height: 75px;
}

div.headerright {
    border: none;
    float: right;
    margin: 0;
    padding: 0;
    line-height: 75px;
} 
```

我需要的是文本“第 1 行文本”和“第 2 行”显示在列表中，“第 2 行”出现在“第 1 行文本”下。这个文本块应该在包含的 div 中居中，“第 2 行”应该在“第 1 行文本”下居中，如下所示：

第 1 行文本
   第 2 行

我唯一关心的浏览器是IE9。如何才能做到这一点？我难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:10:37.373

将文本放入`span`元素中。这个对我有用。

**CSS：**

```
div.headerright {
    border: none;
    float: right;
    margin: 0;
    padding: 0;
}

/* css rule to display span elements.  */
span{
    display:block;
} 
```

**HTML：**

```
<div class="header">
    <div class="headerleft">
    </div>
    <div class="headerright">
        <span>Line 1 Text</span>
        <span>Line 2</span>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:52:47.677

您的问题似乎您已尝试多次更改您的 html。一个非常简单的方法是添加一个`<br />` `and use text-align:center`.

现场示例：http: [//jsfiddle.net/WPBNr/](http://jsfiddle.net/WPBNr/)

**HTML：**

```
<div class="header">
    <div class="headerleft">
    </div>
    <div class="headerright">
            Line 1 Text<br /> <!-- Added break tag -->
            Line 2
    </div>
</div> 
```

**CSS：**

```
.headerright{
    border: none;
    float: right;
    margin: 0;
    padding: 0;
    line-height: 75px;
    text-align: center; /* add this */
} 
```

# spotify - 找不到 Spotify 教程应用程序

> ID：10575066
> 
> 赞同：1
> 
> 时间：2012-05-13T20:43:25.493
> 
> 标签：spotify

我知道以前有人问过非常类似的问题。喜欢这里：[Spotify 应用程序/主目录位置（Windows 本地开发）？](https://stackoverflow.com/questions/8756961/spotify-apps-home-directory-location-windows-local-development)

但是该线程中建议的解决方案对我不起作用。这是我所做的：

1）启用开发者帐户 2）按照这些步骤[https://developer.spotify.com/technologies/apps/tutorial/](https://developer.spotify.com/technologies/apps/tutorial/) 3）包括在 /user/Documents/Spotify/ 下创建一个名为“tutorial”的目录

我已经卸载，重新安装等客户端。我仍然收到“抱歉，我找不到这个应用程序”。和“MetaDataFailed”等。

我运行 Win 7 64 位和 Spotify 版本 0.8.3.222.g317ab.79d

我确信解决方案非常简单，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T18:30:58.073

我也遇到了同样的错误，但是在添加了所需的密钥后（更多信息：[Application Manifest](https://developer.spotify.com/technologies/apps/guidelines/#applicationmanifest)）我让它工作了。

我注意到的另一件事是，在添加`BundleIdentifier`密钥时，`manifest.json`我只能使用小写名称。例如 spotify:app:myapp 而不是 spotify:app:MyApp。

这当然可能是我的具体内容，但值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T05:38:47.697

您的应用名称必须与您在 manifest.json 文件中为 BundleIdentifier 指定的标识符匹配。

打开应用程序：`spotify:app:my-identifier`

清单.json：`"BundleIdentifier": "my-identifier"`

有关 moar，请参阅[https://stackoverflow.com/a/10421944](https://stackoverflow.com/a/10421944)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:05:52.167

只是澄清一下您使用 c:\users[user name]\Documents\Spotify[app name]\ 作为文件夹？您的帖子看起来像 /user 是根。

此外，在 manifest.json 文件中，如果 BundleVersion 的数字等于或小于生产中的数字，则本地应用程序将被忽略。Spotify 只会加载 BundleVersion 编号高于生产的本地应用程序。

# actionscript-3 - 如何更改 Tabbar flex 中的选定索引

> ID：10575068
> 
> 赞同：0
> 
> 时间：2012-05-13T20:43:49.333
> 
> 标签：actionscript-3, apache-flex, flex4, tabbar

如何`Tabbar`从`ChildExistenceChangedEvent.CHILD_ADD`事件中更改选定的索引？

这是 Flex 4.6 sdk 代码：

```
public function set selectedIndex(value:int):void
{
     // Bail if the index isn't changing.
     if (value == selectedIndex)
          return;
     // ignore, probably coming from tabbar
     if (addingChildren)
          return;
    .
    .
    .
} 
```

因此，addingChildren 设置为 true，他们会忽略我，他们只会在我执行完代码后更改它。

我一直在尝试创建一个自定义事件并从那里更改它，但它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:51:10.087

找到了，我正在听 UPDATE 事件，没有这个问题了

# mysql - Wordpress 数据库 - 获取销售数字的数量

> ID：10575071
> 
> 赞同：0
> 
> 时间：2012-05-13T20:43:55.350
> 
> 标签：mysql, database, wordpress

这就是我想要做的。我正在使用 WooCommerce 为自己建立一个新的商务网站。从每笔销售中，我将向慈善机构捐赠 5 美元。在我的 Wordpress 网站的标题中，我希望有一个计数器来显示我们本周捐赠了多少钱。

那么如何从 WP 数据库中获取所需的数字呢？我想我需要一些如何从数据库中提取销售数量，将其乘以 5 并将其放入 header.php 中，并在其前面加上 $。

我不介意我是否必须在每周开始时更改代码以重置计数器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:22:57.693

简单的解决方案存储销售数量的值，创建一个 wordpress 选项并在销售过程中增加它。

否则，您需要更多地查看电子商务代码的数据库结构，并对今天 - 7d 和今天之间的所有记录执行计数查询。

# android - 从 AsyncTask 获取返回的 JSON

> ID：10575072
> 
> 赞同：3
> 
> 时间：2012-05-13T20:44:05.220
> 
> 标签：android, json, android-asynctask, return

所以我有这个扩展 AsyncTask 的加载器类。然后我做`new loader().execute();`了，但我想使用我的加载器类**返回的****JSONArray 响应**，我该怎么做？因为我在几个不同的地方都需要它？还是我应该将我的代码移到 onPostExecute 并从那里做所有事情？

 **```
public class loader extends AsyncTask<String, Integer, JSONArray> {

    ProgressDialog dialog;

    protected void onPreExecute() {

        dialog = ProgressDialog.show(ChallengeList.this, "", "Laddar...");
        dialog.setCancelable(true);
    }

    @Override
    protected JSONArray doInBackground(String... params) {

    JSONArray response = null;
    HttpClient client = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(listURL);

    try {

        HttpResponse resp = client.execute(httppost);
        StatusLine statusLine = resp.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        Log.i("Statuscode", "statusCode"+statusCode);
        if (statusCode == 200) {
            final JSONObject json = new JSONObject();

            json.put("userID", prefs.id());

            response = SendHttp.parseHttp(listURL, json);

        }
    } catch (JSONException e1) {
        e1.printStackTrace();
    } catch (IOException e1) {
        e1.printStackTrace();
    } 

        return response;
    }
    protected void onPostExecute(JSONArray result) {
        dialog.dismiss();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T20:48:52.077

该方法`onPostExecute`具有`JSONArray`您从该`doInBackground`方法返回的参数。

`onPostExecute`在您的主（调用者）活动的线程上运行，因此除了关闭该方法中的对话框之外，您还可以`result`进一步处理数组，将其安全地传递给其他方法等：

```
@Override
protected void onPostExecute(JSONArray result)
{
    super.onPostExecute(result);
    final Message msg = new Message();
    msg.obj = result;
    if (youWantToUseHandler)
        handler.dispatchMessage(msg);
    else
        writeJSONArray(result);
} 
```

**`handler`：_**

```
final Handler handler = new Handler()
{
    public void handleMessage(Message msg) 
    {
        final JSONArray result = (JSONArray)msg.obj;
        writeJSONArray(result);
    };
}; 
```

其他一些方法：

```
private void writeJSONArray(final JSONArray result)
{
    for (int i = 0; i < result.length(); i++)
    {
        try
        {
            Log.d("SAMPLE", result.get(i).toString());
        }
        catch (JSONException e)
        {
            Log.e("SAMPLE", "error getting result " + i, e);
        }
    }
} 
```

由于`onPostExecute`“在doInBackground之后在UI线程上运行。指定的结果是doInBackground返回的值，如果任务被取消或发生异常，则为null。” ~API Docs 你可以调用你在类中声明的任何方法，并将这个数组作为参数传递给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-22T04:09:44.667

下载内容网页后，您可以在 onPostExecute 方法中使用以下代码：

protected void onPostExecute(String s) { super.onPostExecute(s);

```
 try {
            JSONObject jsonObject = new JSONObject(s);

            String weatherInfo = jsonObject.getString("weather");

            Log.i("Weather content", weatherInfo);

            JSONArray arr = new JSONArray(weatherInfo);

            for (int i=0; i < arr.length(); i++) {
                JSONObject jsonPart = arr.getJSONObject(i);

                Log.i("main",jsonPart.getString("main"));
                Log.i("description",jsonPart.getString("description"));
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

    } 
```**

# objective-c - 调整 UIButton 上的图像

> ID：10575074
> 
> 赞同：2
> 
> 时间：2012-05-13T20:44:17.023
> 
> 标签：objective-c, ios, xcode, uiimageview, uibutton

我有自定义按钮，带有我想在按钮内向下移动的图像。我不想弄乱按钮的可点击部分，而只想移动图像。我试过调整 button.imageview.frame，但它似乎没有做任何事情。

这是我的代码：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(0.0, 0.0, 25.0, 25.0);
UIImage *buttonOnImage = [@"tabbar_icon_0"];

[button setImage:buttonOnImage forState:UIControlStateHighlighted];
[button setImage:buttonOnImage forState:UIControlStateSelected]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T21:17:52.413

`UIButton`具有`imageEdgeInsets`属性，可用于在按钮内移动图像。

在大多数情况下，它有很大帮助。您可以从 IB 访问它（在`Edge`下拉列表中选择`Image`然后更改`Inset`字段），因此您可以尝试不同的值并查看它是否适合您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:46:39.430

你不能通过在 Photoshop 中用透明度填充来调整图像的大小吗？

# r - 具有相同名称的命名参数

> ID：10575078
> 
> 赞同：8
> 
> 时间：2012-05-13T20:44:36.337
> 
> 标签：r

我正在使用“caret”库对一些树进行交叉验证。

该库提供了一个名为 的函数`train`，该函数接受一个命名参数“方法”。通过它的省略号，它应该让其他参数落入它调用的另一个函数。这个另一个函数 ( `rpart`) 接受一个同名的参数，“方法”。

因此，我想传递两个具有相同名称的参数......它显然失败了。我尝试解决如下所示的问题，但出现错误：

“train.default 中的错误（x = myx，y = myy，method = “rpart2”，preProcess = NULL，：形式参数“method”与多个实际参数匹配”

任何帮助深表感谢！谢谢！

```
train.wrapper = function(myx, myy, mytrControl, mytuneLenght, ...){
   result = train(
                        x=myx,
                        y=myy,
                        method="rpart2",
                        preProcess=NULL,
                        ...,
                        weights=NULL,
                        metric="Accuracy",
                        trControl=mytrControl,
                        tuneLength=mytuneLenght

                      )
   return (result)
 }
dtree.train.cv = train.wrapper(training.matrix[,2:1777], 
                               training.matrix[,1], 
                               2, method="class") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T21:36:24.573

这是一个`tr`调用`rp`(rpart) 函数并传递它的 (train) 函数的问题模型`...`：

```
rp <- function(method, ...) method
tr <- function(method, ...) rp(...)

# we want to pass 2 to rp:
tr(method=1, method=2) # Error
tr(1, method=2)        # 1, (wrong value!)
tr(method=1, metho=2)  # 2 (Yay!) 
```

这是什么魔法？为什么最后一个案例真的有效？！好吧，我们需要了解参数匹配在 R 中是如何工作的。`f <- function(foo, bar)`据说函数具有*形式参数*“foo”和“bar”，而调用`f(foo=3, ba=13)`具有（实际）*参数*“foo”和“ba”。

R 首先匹配与形式参数具有*完全相同*名称的所有参数。这就是为什么第一个“方法”参数被传递给`train`. 两个相同的参数名称会导致错误。

然后，R 匹配任何部分匹配（但不匹配的）形式参数的参数名称。但是，如果两个参数名称部分匹配同一个形参，也会导致错误。此外，它只匹配*之前* `...`的形式参数。因此，必须使用其全名指定*after* 的形参。`...`

然后未命名的参数按位置顺序与剩余的形式参数匹配。

最后，如果形式参数包括`...`，则将剩余参数放入`...`.

**呸！**所以在这种情况下，对`tr`完全匹配的调用`method`，然后将其余部分传递给`...`. 当`tr`then 调用`rp`时，`metho`参数部分匹配它的形参`method`，一切都很好！

**...Still**, I'd try to contact the author of `train` and point out this problem so he can fix it properly! Since "rpart" and "rpart2" are supposed to be supported, he must have missed this use case!

I think he should rename his `method` parameter to `method.` or similar (anything longer than "method"). This will still be backward compatible, but allows another `method` parameter to be passed correctly to `rpart`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:13:13.603

通常，包装器将在命名列表中传递它们的参数。在 的情况下`train`，提供控制在 trControl 参数中传递。也许你应该尝试：

```
dtree.train.cv = train.wrapper(training.matrix[,2:1777], 
                           training.matrix[,1], 
              2,   # will be positionally matched, probably to 'myTuneLenght'
                           myTrControl=list(method="class") ) 
```

在您发表评论后，我再次查看了`train`帮助`rpart`页面。您认为 trControl 有不同的目的可能是正确的。我怀疑您可能需要使用公式来构建调用，因为`rpart`只有公式方法。如果 y 参数是一个因素，那么 method="class 将由`rpart`. 和 ... 运行 modelLookup:

```
modelLookup("rpart2")
     model parameter          label  seq forReg forClass probModel
154 rpart2  maxdepth Max Tree Depth TRUE   TRUE     TRUE      TRUE 
```

...向我建议默认情况下也将采用“类”方法。如果您需要进一步的建议，您可能还需要编辑您的问题以包含数据示例（可能来自`rpart`帮助页面？）。

# jquery - 使用 jquery 和 ajax 解析 xml

> ID：10575079
> 
> 赞同：4
> 
> 时间：2012-05-13T20:44:36.473
> 
> 标签：jquery, xml, ajax, rss

我的播客有一个 RSS 提要，基本上我要做的是在 RSS 提要中使用 URL 填充一个 html5 音频播放器。

我认为解决此问题的最佳方法是使用 ajax 解析链接，然后将它们附加到音频播放器的 src 中。我知道相同的域策略会阻止我使用 ajax 执行此操作，因此我使用跨域 ajax 插件 (http://bit.ly/Jbi9iX) 来解决这个问题。

我正在努力弄清楚为什么下面的代码对我不起作用，基本上在这个阶段我只是想将`url`RSS 提要`#results`中`src`的音频播放器。

```
$(document).ready(function () {
    $.ajax({
        url: 'http://theresidency.libsyn.com/rss',
        type: 'GET',
        dataType: "xml",
        success: parseXml
    });
});

function parseXml(xml) {
var item = $(xml).find("item");

  $(item).each(function() {
    $("#results").append($("enclosure").attr("url").text() + "<br />");
  });

} 
```

我在 chrome 开发工具中没有收到任何错误，我查看了其他示例，但我可以弄清楚我做错了什么。

这是 xml/rss 的示例： http: [//pastebin.com/stuY495c](http://pastebin.com/stuY495c) 这是我迄今为止上传的内容：http: [//bit.ly/J9QHZc](http://bit.ly/J9QHZc)

任何帮助将不胜感激，因此在此先感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T20:49:52.313

你究竟在哪里将数据传递给函数，我认为你需要做：

```
$(document).ready(function () {
    $.ajax({
        url: 'http://theresidency.libsyn.com/rss',
        type: 'GET',
        dataType: "xml",
        success: function(data) {
           parseXml(data);
        }
    });
});

function parseXml(xml) {
var item = $(xml).find("item");

  $(item).each(function() {
    $("#results").append($("enclosure").attr("url").text() + "<br />");
  });

} 
```

要不就：

```
$(document).ready(function () {
    $.ajax({
        url: 'http://theresidency.libsyn.com/rss',
        type: 'GET',
        dataType: "xml"
    }).done(function(xml) {
        $.each($("item", xml), function(i, e) {
            $("#results").append($("enclosure").attr("url").text() + "<br />");
        });
    });
}); 
```

**编辑：**

对此做了更多的摆弄，并想出了：

```
$(document).ready(function () {
    $.ajax({
        url: 'http://query.yahooapis.com/v1/public/yql?q=%20SELECT%20*%20FROM%20xml%20WHERE%20url%3D%22http%3A%2F%2Ftheresidency.libsyn.com%2Frss%22&format=json&callback=',
        dataType: "json"
    }).done(function(data) {
        $.each(data.query.results.rss.channel.item, function() {
            $("#results").append(this.enclosure.url + "<br />");
        });
    });
});​ 
```

我相信这就是你要找的东西，这里有一个[**DEMONSTRATION**](http://jsfiddle.net/adeneo/Djm8q/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:42:34.053

事实证明，解析 RSS 比基本的 XML 解析要复杂一些。不过不用担心，google 可以为您完成这项工作并返回一个 json 对象：

```
$(function() {
   parseRSS('http://theresidency.libsyn.com/rss');
});

function parseRSS(url) {
  $.ajax({
    url: document.location.protocol + '//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&callback=?&q=' + encodeURIComponent(url),
    dataType: 'json',
    success: function(data) {
      $.each(data.responseData.feed.entries, function() {
        $('#results').append(this.link + '<br />');
      })
    }
  });
} 
```

# git - 如果 git 设置为 core.autocrlf false，是否可以粘贴代码片段，例如从浏览器窗口粘贴？

> ID：10575084
> 
> 赞同：3
> 
> 时间：2012-05-13T20:45:37.743
> 
> 标签：git, editor, newline, code-editor

我正在研究`autocrlf`GIT 的最佳设置，如果设置为 false，我对粘贴到编辑器中的代码会发生什么感到困惑。我注意到很多人建议将其设置为false，并提到只要使用正确且正确设置的编辑器就应该没有问题，如果我在文件中编写所有代码我可以理解这一点；但是我很困惑如果我从浏览器复制一个片段，或者可能是一些旧代码或其他东西，或者如果我使用整个旧文件怎么办，这个设置将如何工作。当然，我很容易得到混合的 CRLF 和 LF，因为我得到的一些代码可能是 CRLF 和一些 LF？还是编辑器如此聪明以至于他们自己在保存时转换任何粘贴的代码？

编辑：我想我还应该问：如果 EOF 是混合的，这是一个真正的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:21:46.193

这个想法是，为了避免 EOF 出现任何问题，只使用编辑器：

*   能够检测打开文件使用的当前 EOF 样式
*   能够以*相同*的EOF 样式保存该文件（因此，保存时没有转换）

那样：

*   你[保持你的`core.autocrlf`to`false`](https://stackoverflow.com/questions/2333424/distributing-git-configuration-with-the-code/2354278#2354278)（git 不会自动完成转换，除非你真的需要：请参阅“[我为什么要`core.autocrlf=true`在 Git 中使用？](https://stackoverflow.com/questions/2825428/why-should-i-use-core-autocrlf-true-in-git/2825829#2825829) ”）
*   您使用具有混合 EOF 的不同文件（但您不在乎，因为您的编辑器将始终“做正确的事情”）

# javascript - 正则表达式删除除了单词之间的一个之外的所有whitescape？

> ID：10575086
> 
> 赞同：7
> 
> 时间：2012-05-13T20:45:41.857
> 
> 标签：javascript, regex, whitespace

就像标题一样简单，真的。

是否有一个正则表达式来删除除了单词之间的空格之外的所有空格。

所以

```
"  Hello. How   are  you     today?    " 
```

会成为

```
"Hello. How are you today?" 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-13T20:49:38.210

这将做你想做的事：

```
"  Hello. How   are  you     today?    ".replace(/\s{2,}/g,' ').trim() 
```

小提琴：http: [//jsfiddle.net/READV/](http://jsfiddle.net/REAdV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T08:33:08.367

您可能会发现这`trim()`可能不适用于 6/7/8 和一些较旧的浏览器版本，我建议使用`.replace(/^\s+|\s+$/g,'')`

```
var str = "    fsdf d34234sf    sdfsdf   "; 
str=str.replace(/^\s+|\s+$/g,'');
returns:fsdf d34234sf sdfsdf 
```

# drupal-6 - 如何在 Drupal 的所有页面上包含 Flash 横幅

> ID：10575087
> 
> 赞同：0
> 
> 时间：2012-05-13T20:45:47.670
> 
> 标签：drupal-6

我希望在我的 Drupal 网站上包含标题横幅。我使用了以下代码，但除了一页之外，它在所有页面上都显示为空白。

```
codebase="http://download.macromedia.com/pub/shockwave/cabs/flash

    /swflash.cab#version=7,0,19,0" width="786" height="147">

<param name="movie" value="pmi.swf" />

   <param name="quality" value="high" />

<embed src="pmi.swf" quality="high" pluginspage="http://www.macromedia.com

   /go/getflashplayer" type="application/x-shockwave-flash" width="786" height="147">   </embed> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T03:03:58.093

正如我在嵌入标签上看到的那样，您将 swf 文件保存在根目录中吗？（www.example.com/banner.swf）。但是你不应该把文件放在文件路径之外（通常是sites/all/files/）。然后将文件放在正确的位置，您可以使用“file_directory_path()”函数获取闪存的完整 url 路径。就像是：

```
<embed src="<?=file_directory_path()?>/pmi.swf" quality="high"  pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" width="786" height="147">   </embed> 
```

# javascript - 类仿真 - 模块模式与函数对象

> ID：10575093
> 
> 赞同：1
> 
> 时间：2012-05-13T20:46:31.340
> 
> 标签：javascript

> **可能重复：**
> [Javascript：模块模式与构造函数/原型模式？](https://stackoverflow.com/questions/3790909/javascript-module-pattern-vs-constructor-prototype-pattern)

我想在 javaScript 中使用类仿真。这是一种偏好。

我一直在使用模块模式，但正在考虑只使用一个简单的函数对象，因为我可以创建公共和私有成员变量和函数。

[下面](http://jsfiddle.net/chrisallenaaker/Dqg28/)是一个模拟类的函数对象的例子：

```
var input = document.getElementById('input');
var output = document.getElementById('output');

function test()
{
    var private_var = 'private_var';
    var private_func = function(){ return 'private_func';};
    var my = {};
    my.public_var = 'public_var';
    my.public_func = function(){ return 'public_func';};
    return my;
}

var object_test = new test();

alert( '| ' + object_test.public_var);
alert( '| ' + object_test.private_var);

alert( '| ' + object_test.public_func() );
alert( '| ' + object_test.private_func() );

​ 
```

[这](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)是模拟类的模块模式的示例。

主要区别是什么？除了使隐含的全局显式的能力之外，还有吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T00:33:37.500

我可能误解了您所说的“函数对象”是什么意思，但据我所知，这些模式并不是真正可以互换的。

“模块模式”用于根据需要定义具有方法和属性的单个对象。一个很好的例子是[`Math`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math)自定义模块的一个简单例子只是一个`Object`实例：

```
var Module = { prop: 'prop' };
alert(Module.prop); 
```

但是，通过这种方式，模块不是类。您无需致电`new Math`即可使用它们。您只需调用它们的方法 ( `Math.abs()`) 或获取/设置它们的属性 ( `Math.PI`)。

“*函数对象*”——或者我所理解的构造函数——是最接近 JavaScript 所具有的“类”定义的概念。[`Object`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object), [`String`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String), [`Array`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array). 这些和其他是为创建新实例而定义的构造函数。

您提供的代码段当然可以修改为构造函数：

```
// common-practice: constructors are named in PascalCase
function Test()
{
    var private_var = 'private_var';
    var private_func = function(){ return 'private_func';};

    this.public_var = 'public_var';
    this.public_func = function(){ return 'public_func';};
}

var object_test = new Test(); 
```

此外，这些模式甚至不一定是互斥的。将构造函数视为模块将允许定义类似“静态”的成员：

```
var Foo = (function () {
    function constructor() {
        var private_var = 'private_var';
        this.public_prop = 'public_prop';
    }

    var private_shared = 'private_shared';
    constructor.public_shared = 'public_shared';

    return constructor;
})();

alert(Foo.public_shared);     // 'public_shared' (module property)
alert(new Foo().public_prop); // 'public_prop'   (instance property) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:15:00.080

我认为主要问题是您的 test() 函数仍然可以在没有 new 关键字的情况下被调用，并且在这种情况下，“this”的值将指向被调用者上下文（很可能是全局的），而不是 test( ) 内部闭包，导致不良影响，例如污染全局命名空间和不同的实例覆盖彼此的值。如果您将构造函数作为常规函数调用，解释器不会警告您。如果您的代码不打算与大量受众共享，并且您对构造函数使用一些命名约定，例如构造函数的 Test() 和常规函数的 test()，那么您仍然是安全的。它还有助于在代码中保持一些纪律，例如强制您在 return 语句中定义任何“公共”成员，所有成员都将相邻，作为一个干净的外观。这在大型代码库中很有趣。

# swing - Nimbus L&F 在 JButtons 上没有边界？

> ID：10575101
> 
> 赞同：3
> 
> 时间：2012-05-13T20:47:48.420
> 
> 标签：swing, border, jbutton, opacity, nimbus

正如标题所说，我有兴趣在使用 Nimbus 时移除 JButton 的边框。就像是：

```
myButton.setBorderPainted(false); 
```

不幸的是，不起作用。我查看了 UIManager 默认值，但找不到任何边框颜色/不透明度选项。如果可能的话，我真的很感激一些帮助。谢谢你的时间！

# android - 使 OsmDroid 城市标签文本变大

> ID：10575102
> 
> 赞同：0
> 
> 时间：2012-05-13T20:47:51.737
> 
> 标签：android, osmdroid

我发现城镇的文本/标签相当小。无论如何我可以操纵文字大小吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:11:38.067

Osmdroid 适用于静态 PNG 图像的图块。您不能更改平铺图像。如果您想获得更好的地图解决方案，请尝试 MapsForge。此应用程序/库使用地图数据并动态呈现它们。通过这种方式，您可以更好地控制渲染地图，并且可以自定义其文本、字体和颜色。

看看这个： [Streetnames openstreetmaps 在 Android 上更具可读性](https://stackoverflow.com/questions/10883653/streetnames-openstreetmaps-more-readable-on-android)

# sql - VARCHAR 或 INT 是验证规则吗？

> ID：10575103
> 
> 赞同：0
> 
> 时间：2012-05-13T20:47:55.080
> 
> 标签：sql, database

当我设置一个表时，将“名称”属性声明为 varchar 使其成为验证规则还是仅定义数据类型？

```
CREATE TABLE `categories` (
  `id` int(11) NOT NULL auto_increment,
  `name` varchar(200) NOT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY  (`id`)
); 
```

我感到困惑的是 VARCHAR 是设置数据类型、验证规则还是两者兼而有之。所以在某种程度上 VARCHAR 是一个验证规则，因为有人不能输入一个 INT？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:51:53.620

这取决于您将存储到这些字段的数据类型，这定义了您应该使用的数据类型。

示例：`name`字段将存储字符（字符串文字），并且 hance 不能是 INT 类型，并且必须是`STRING`SQL 中的类型`CHAR`or `VARCHAR`or`NVARCHAR`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:10:43.957

它仅定义数据类型。如果传递了错误的数据类型，取决于服务器设置，执行数据的隐式转换（大多数情况）或拒绝查询（例如：MySQL 的 STRICT 模式）。数据验证通常在应用程序或触发器中完成。

# javascript - 如何将 node.js 服务器转换为 MVC？

> ID：10575107
> 
> 赞同：0
> 
> 时间：2012-05-13T20:48:14.547
> 
> 标签：javascript, web-services, model-view-controller, node.js

我有一个 Node.js 服务器，代码变得有点大而且乱七八糟。我是否正确地假设将其转换为 MVC 会使其更易于管理？我该怎么做呢？有什么工具可以帮助我做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:55:07.933

You could try the [RailwayJS](http://railwayjs.com/). It's the Node.JS MVC framework based on [ExpressJS](http://expressjs.com).

# java - Java中的算术运算

> ID：10575108
> 
> 赞同：0
> 
> 时间：2012-05-13T20:48:19.183
> 
> 标签：java, math, int

有人可以解释为什么 Java 中整数类型的算术运算总是导致“int”或“long”结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:58:18.463

看看这个：http: [//www.particle.kth.se/~lindsey/JavaCourse/Book/Part1/Java/Chapter02/operators.html#ArithOps](http://www.particle.kth.se/~lindsey/JavaCourse/Book/Part1/Java/Chapter02/operators.html#ArithOps)

它解释了返回值的类型如何由操作数的类型决定。本质上：

*   算术运算符需要数字类型
*   如果任一操作数的类型是整数类型，则返回值将是包含的最宽类型（因此 int + long = long）
*   如果任一操作数的类型是浮点数，则将返回浮点数
*   如果两个操作数都是浮点数，则如果其中一个操作数是双精度数，则返回双精度数

如果您需要控制类型，则需要将操作数转换为适当的类型。例如，int * int 对于 int 而言可能太长，因此您可能需要执行以下操作：

```
long result = myInt * (long) anotherInt 
```

同样对于算术运算产生的非常大或非常小的浮点数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:32:22.343

我认为值得指出的是，这（对产生整数的整数进行算术运算）是许多编程语言的特性，而不仅仅是 Java。

许多这些编程语言是在 Java 之前发明的，许多是在 Java 之后发明的，所以我认为认为这是硬件能力较弱的时代遗留下来的论点是不合时宜的。语言设计的这一特性是关于使语言*类型安全*。在编程语言中将整数和浮点数分开，以及让程序员负责识别何时以及如何从类型到类型的转换是有很好的理由的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T20:55:32.620

因为基本整数算术运算符仅定义在`int`and`int`或 between `long`and之间`long`。在所有其他情况下，类型会自动加宽以适应。毫无疑问，[Java 语言规范](http://docs.oracle.com/javase/specs/)中有一些深奥的段落准确地解释了发生了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T20:56:21.177

虚拟答案：因为这是[Java 语言规范定义它们](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.2)的方式：

> ### 4.2.2\. 整数运算
> 
> Java 编程语言提供了许多作用于整数值的运算符：
> 
> [...]
> 
> *   数值运算符，产生一个`int`or类型的值`long`：

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T21:04:33.167

你的意思是为什么你没有得到一个`double`或`BigInteger`结果？主要是历史事故和效率原因。`+`检测or溢出`*`并处理结果（`Integer.MAX_VALUE * Integer.MAX_VALUE`例如 from ）意味着生成大量异常检测代码，这些代码几乎永远不会被触发，但总是需要被执行。定义加法或乘法模 2^32（或 2^64）要容易得多，不用担心。与小数余数除法相同。

很久以前的 C 语言肯定就是这种情况。如今，对于超标量处理器和大量可使用的位，这已不再是问题。但是人们已经习惯了它，所以它今天仍然存在于 Java 中。如果您希望您的算术自动转换为可以保存结果的类型，请使用 Python 3。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-13T21:16:43.347

原因有点像我们在 Java 中使用原始类型的原因——它允许编写高效的代码。您可能会争辩说，它也会使效率降低但正确的代码变得更丑陋；你是对的。请记住，设计选择是在 1995 年左右做出的。

# java - 使 While 语句为真（从另一个类调用方法）

> ID：10575109
> 
> 赞同：1
> 
> 时间：2012-05-13T20:48:19.960
> 
> 标签：java, loops

```
public class Driver {
    public static void main(String args[]) {

        Encryption pass = new Encryption();

        while(CODE){
            System.out.println("Please enter a password");
            String name = KeyboardReader.readLine();

            System.out.println("Encrypted Password:  " + pass.encrypt(name));
            System.out.println("Decrypted Password:  " + pass.decrypt(name));
        }
    }

    boolean isValidLength (String password) {
        if (password.length() < minLength) {
            return true;
        } else {
            return false;
        }
    }
} 
```

我将如何使上述陈述成立？我需要这样做，以便如果用户输入的密码不够长或不是有效密码，他们可以一遍又一遍地重新输入。不确定我的 while 循环是否正确，但我必须从我的 isValidLength 方法调用以使其正确。发现的任何错误也会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:55:03.080

Something similar to this:

```
while(true){
    //read the password
    ...
    if (isValidLength(password)){
        break;
    }
}
//proceed with encryption
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:55:45.717

I'd suggest using a `do ... while` instead of a `while` loop. In pseudocode:

```
boolean ok;
do {
    <get user input>
    ok = <check validity of user input>
} while (!ok); 
```

If you *must* use a `while` loop, just use the above logic but initialize `ok` to `false`:

```
boolean ok = false;
while (!ok) {
    <get user input>
    ok = <check validity of user input>
} 
```

Also, I think the logic that you currently have in `isValidLength` is backwards. It will also have to be declared `static` if it is to be called from `main`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T20:56:33.077

I can see a few things that need attention:

*   Your call to `pass.decrypt(name)` appears to pass the *plaintext* entered by the user to a function called `decrypt()`. Perhaps you wanted to pass the return value of `pass.encrypt(name)` instead?

*   Your `isValidLength()` function returns `true` if the length of the string is *less than* your minimum. I think you want this the other way around.

For your `while` loop, I suggest a structure commonly called "loop-and-a-half":

```
while (true) {
    System.out.println("Please enter a password:");
    String name = KeyboardReader.readLine();
    if (isValidLength(name)) {
        break;
    }
    System.out.println("Your entered password was not long enough.");
}
System.out.println("Encrypted Password:  " + pass.encrypt(name));
// ... rest of code 
```

With this construct, the `break` is in the middle of the loop. The bottom half of the loop is a place to tell the user what they need to do to correct their erroneous input. After the loop ends, you can assume that the user's input has passed the `isValidLength()` check.

# xcode - Xcode 管理器文档，显示目录

> ID：10575113
> 
> 赞同：1
> 
> 时间：2012-05-13T20:48:38.917
> 
> 标签：xcode, organizer

我知道这是可以做到的，就像我以前做过的那样——但我不记得是怎么做到的，而且我也搜索过，也找不到。

我希望 Xcode 管理器文档显示“目录”，就像在 Web 浏览器中加载 API 文档一样。它们默认是隐藏的，我可以执行一个命令使其可见。

有人知道它是什么吗？

谢谢

（我的屏幕截图左侧的位）

![在此处输入图像描述](../Images/1eec8405664c4ad75ede7d5929f7c797.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:34:25.627

这适用于 Xcode 4.3：

```
sudo egrep -lRZ "Prototype.Browser.Xcode4OrNewer=Prototype.Browser.XcodeVersion<1000;" ~/Library/Developer/Shared/Documentation/DocSets | xargs -0 -L % sudo sed -i '' -e 's/Prototype\.Browser\.Xcode4OrNewer\=Prototype\.Browser\.XcodeVersion\<1000\;/Prototype\.Browser\.Xcode4OrNewer\=false\;/g' 
```

..您的文档现在看起来像这样：

![在此处输入图像描述](../Images/e50fccac4f893517d2d92b56d7af2819.png)

不适合所有人，但我喜欢它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:52:35.127

选择左侧的“眼睛”选项卡。或者您也可以使用工具栏下方中间的跳转栏（或它的名称）：

![在此处输入图像描述](../Images/7b87dcfc341a852d099b149019bc7d83.png)

# xamarin.ios - 如何以编程方式从 MonoTouch 中的 ViewController 加载另一个 viewController

> ID：10575124
> 
> 赞同：7
> 
> 时间：2012-05-13T20:49:54.717
> 
> 标签：xamarin.ios

我在 Monotouch 中使用 StoryBoards，并且有一个被指定为初始 VC 的 ViewController。我有第二个 VC，我想通过第一个 VC 的 ViewDidLoad 方法以编程方式显示它。Objective-C 的步骤是这样的

1.  通过实例化第二个 VC`Storyboard.InstantiateViewController("SecondVC")`
2.  设置它`ModalTransitionalStyle`
3.  将其委托设置为 self like`secondVC.delegate = self;`
4.  采用`this.PresentViewController(secondVC, true, nil)`

如何在 MonoTouch C# 代码中实现这一点？

我使用`Storyboard.Ins..`方法实例化的 VC 没有要设置的委托或委托属性。虽然我的代码可以编译，但我没有看到第二个视图。我只看到第一个视图

任何帮助高度赞赏

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-13T22:27:28.480

如果您延迟调用它，您应该能够做到这一点。我用 a`Threading.Timer`在加载后一秒钟调用 PresentViewController 。就委托而言， UIViewController 没有该属性。您必须转换为适用于您正在加载的控制器的控制器类型。然后你可以设置委托。如果您想使用它（self），您可能需要设置 WeakDelegate 而不是 Delegate。

```
public override void ViewDidLoad ()
{
    base.ViewDidLoad ();

    Timer tm = new Timer (new TimerCallback ( (state)=> {
        this.InvokeOnMainThread (new NSAction (()=> {
            UIStoryboard board = UIStoryboard.FromName ("MainStoryboard", null);
            UIViewController ctrl = (UIViewController)board.InstantiateViewController ("Number2VC");
            ctrl.ModalTransitionStyle = UIModalTransitionStyle.CrossDissolve;
            this.PresentViewController (ctrl, true, null);
        }));
    }), null, 1000, Timeout.Infinite);
} 
```

# php - php 在动态调用时分别设置图像样式

> ID：10575126
> 
> 赞同：0
> 
> 时间：2012-05-13T20:49:59.380
> 
> 标签：php, image, call, styling, dynamically-generated

我创建了基于产品搜索返回图像名称和 ID 的函数。我想显示所有图像，但我希望每张图像都有不同的样式。我想有一种方法可以增加 div id 但不确定。这是我的函数和调用：

```
public function getImages($searchterm=""){
$sql = "SELECT id FROM prod_detail 
WHERE prod_detail.int_prod_code LIKE '$searchterm' ORDER BY `id` ASC";

$stmt = mysqli_query($this->connection, $sql)or die(mysqli_error($this->connection));
while($result = mysqli_fetch_array($stmt)){

$sql2="SELECT image_name FROM images WHERE image_ref={$result['id']}";
$stmt2 = mysqli_query($this->connection, $sql2)or die(mysqli_error($this->connection));
$num_rows = mysqli_num_rows($stmt2);

while($result2 = $stmt2->fetch_assoc()){
foreach ($result2 as $key => $value) {
$returns = $this->dir . $value;
}
}
}
return $returns;
} 
```

这是显示图像的函数调用

```
foreach($newProd->getAllProductSpec($searchterm) as $item => $val){
echo "<img src='server/php/files/{$val['image_name']}' 
alt='Flying screens' style='float:left;margin:0 30px 20px 0'/>"; ?>  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:59:33.690

然后，您可以为每个图像标签添加一个 id，并在您的 css 文件中为每个这些 id 应用一个样式。（例如，与迈克尔刚刚对代码所做的相同答案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:59:44.307

将显示图像的函数更改为：

```
foreach($newProd->getAllProductSpec($searchterm) as $item => $val){
echo "<img src='server/php/files/{$val['image_name']}'
alt='Flying screens' id='img{$item}' style='float:left;margin:0 30px 20px 0'/>"; ?>  
} 
```

这样，每个图像都会有一个 'img0' img1、img2 等的 id。

你可能还想稍微改变你的功能：

```
while($result2 = $stmt2->fetch_assoc()){
foreach ($result2 as $key => $value) {
$returns = $this->dir . $value;
}
}
}
return $returns; 
```

是错误的，因为它不返回数组；

用这个替换它：

```
$returns = array();    
while($result2 = $stmt2->fetch_assoc()){
foreach ($result2 as $key => $value) {
$returns[] = $this->dir . $value;
}
}
}
return $returns; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T21:03:32.387

您可以轻松地将某种增量添加到显示图像的函数调用中：

```
$i=1;

foreach($newProd->getAllProductSpec($searchterm) as $item => $val){
  echo "<img src='server/php/files/{$val['image_name']}' 
  alt='Flying screens' id='image-id-$i' style='float:left;margin:0 30px 20px 0'/>"; 

  $i++; // increment this value each time the for each loop completes
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T20:58:25.697

```
$count = 0;
foreach($newProd->getAllProductSpec($searchterm) as $item => $val){
    echo "<img src='server/php/files/{$val['image_name']}' class='img-{$count}' alt='Flying screens' style='float:left;margin:0 30px 20px 0'/>"; ?>  
    $count++;
} 
```

# perl - Perl：查找 _ 后跟 X，中间有东西

> ID：10575128
> 
> 赞同：1
> 
> 时间：2012-05-13T20:50:12.350
> 
> 标签：perl, bioinformatics, activeperl, bioperl

非常感谢您对早期问题的帮助。

我几乎完成了我正在做的最后一件事——特别是一个 ORF（开放阅读框）查找程序。到目前为止，我有一个名为@AminoAcidArray1 的数组。所有起始密码子都是“_”，所有终止密码子都是“X”。

如何计算 ORF？换句话说，当“_”后跟“X”且随机可忽略字符之间时，如何计算数组中的次数？我应该使用什么样的循环？我需要一个〜=我认为的某个地方

是的，我知道 bioPerl 可以轻松做到这一点，但由于某种原因，只有 activePerl 可用。

最诚挚的感谢， Shtanto

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T22:07:13.153

首先，当代 ActivePerl 在其主要的“Activeperl”存储库中有[Bundle::BioPerl 。](http://code.activestate.com/ppm/Bundle-BioPerl/)这应该允许在某些 ActivePerl 版本上[安装 BioPerl 。](http://www.bioperl.org/wiki/Installing_Bioperl_on_Windows)

然后，

```
print  "$-[0]..$+[0]\n" while $orf =~ /_[^X]*X/g; 
```

如果它们是连续的（不是嵌套的），则打印 $orf 中包含的 orf 的 start- (_) 和 stop (X) 索引。如果嵌套，那么您将不得不使用稍微复杂的表达式（使用递归）。

顺便说一句：表达什么

```
print join ',', @AminoAcidArray1; 
```

在您的控制台上打印？

rbo

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T22:07:24.043

如果我从您的评论中正确理解：

你有一个数组，你不需要`=~`运算符。

您需要遍历数组一次并记住您所谓的“阅读窗口”的当前状态。说：

```
my $state = 0;
my $count = 0;
for my $item (@array) {
 if ($item eq "_") {
    if ($state==0) {
       $state=1;
    }
 } elsif ($item eq "X") {
     if ($state==1) {
       $state=0;
       $count++;
    }
 }
}

return $count; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T21:04:26.290

您的问题对您的域来说太具体了，但我的理解是您想计算数组中的一些出现次数，这就是我在以下代码中所做的（我使用`perlconsole`）：

```
Perl> my @a = qw/az ae ar at ay au pr lf/
8

Perl> my $count = grep /^a/, @a
6

Perl> print "$count\n"
6
1

Perl> 
```

# ruby-on-rails - 在 mongoid 中查询具有重复标题的设计

> ID：10575130
> 
> 赞同：0
> 
> 时间：2012-05-13T20:50:22.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我有一个设计模型，允许设计师上传他们制作的设计。我想查询由同一设计师上传的同名设计并将它们组合在一起。

我不知道该怎么做。你有什么建议吗？

我运行 Rails 3.2、Ruby 1.9.3 和 Mongoid。

**更多信息：**

设计师型号：

```
class Designer
    has_many :designs, :order => "created_at"
end 
```

设计型号：

```
class Design
    belongs_to :designer

    attr_accessible :image,  :tags, :description, :title, :featured

    mount_uploader :image, DesignerUploader

    field :width
    field :height
    field :description
    field :title
    field :tags, type: Array
    field :featured, :type => Boolean, :default => false
end 
```

设计控制器：

```
def newest
    @designs = Design.select("title, count(title) as title_count").group(:title).having("title_count > 1")
end 
```

我有一个可以上传很多设计的设计师。如果他上传具有相同标题的设计，它们应该组合在一起（我认为最好的方法是在数组中创建一个数组）。我不知道如何在数据库中查询这个。有任何想法吗？

**编辑**

我想我需要类似的东西：

```
Design.find(:all, :group => [:title], :having => "count(*) > 1" ) 
```

这应该给我一个所有重复标题的实例。当我拥有它时，我可以查询这些标题并将它们放入嵌套数组或类似的东西中。

问题是我不知道您如何在 mongoid 中进行此查询？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:19:45.317

您的模型明显不完整，因此请接受以下工作解决方案，以尝试与您的模型保持接近，而答案仅作为继续前进的建议。

```
class Designer
    include Mongoid::Document
    field :name, type: String
    has_many :designs #, :order => "created_at"
end

class Design
    include Mongoid::Document
    belongs_to :designer

    attr_accessible :image, :tags, :description, :title, :featured

    #mount_uploader :image, DesignerUploader

    field :width, type: Integer
    field :height, type: Integer
    field :description, type: String
    field :title, type: String
    field :tags, type: Array
    field :featured, type: Boolean, default: false
end

class DesignsController < ApplicationController
  def newest
    @designer = Designer.where(name: params['name']).first
    @designs = Design.where(designer_id: @designer._id).where(title: params['title']).to_a
    render :text => <<-EOF
      params: #{params.inspect}
      designer: #{@designer.inspect}
      designs by title: #{@designs.inspect}:
    EOF
  end
end 
```

配置/路由.rb

```
match ':controller/:action/:name/:title' 
```

测试/单元/designer_test.rb

```
require 'test_helper'

class DesignerTest < ActiveSupport::TestCase
  def setup
    Designer.delete_all
    Design.delete_all
  end

  test "designer designs" do
    design_title = 'little black dress'
    designer = Designer.create(name: 'Coco', designs: [
      Design.new(title: design_title, width: 300, height: 400),
      Design.new(title: design_title, width: 600, height: 800),
      Design.new(title: 'jersey traveling suit', width: 600, height: 800),
    ])
    p designer

    # finds designs with designer and title on server
    designs = Design.where(designer_id: designer._id).where(title: design_title).to_a
    assert_equal(2, designs.size)
    p designs

    # finds all designer's designs and selects locally
    designs = designer.designs.select{|design| design['title'] == design_title}
    assert_equal(2, designs.size)
    p designs
  end
end 
```

测试/功能/designs_controller_test.rb

```
require 'test_helper'

class DesignsControllerTest < ActionController::TestCase
  def setup
    Designer.delete_all
    Design.delete_all
  end

  test "newest" do
    design_title = 'little black dress'
    designer = Designer.create(name: 'Coco', designs: [
      Design.new(title: design_title, width: 300, height: 400),
      Design.new(title: design_title, width: 600, height: 800),
      Design.new(title: 'jersey traveling suit', width: 600, height: 800),
    ])
    get :newest, :name => 'Coco', :title => design_title
    assert_response :success
    assert_equal('Coco', assigns(:designer).name)
    assert_equal(2, assigns(:designs).size)
    assigns(:designs).each do |design|
      assert_equal(design_title, design.title)
    end
    puts @response.body
  end
end 
```

结果

```
Run options: --name=test_newest

# Running tests:

      params: {"name"=>"Coco", "title"=>"little black dress", "controller"=>"designs", "action"=>"newest"}
      designer: #<Designer _id: 4fb28df8e4d30bd575000004, _type: nil, name: "Coco">
      designs by title: [#<Design _id: 4fb28df8e4d30bd575000001, _type: nil, designer_id: BSON::ObjectId('4fb28df8e4d30bd575000004'), width: nil, height: nil, description: nil, title: "little black dress", tags: nil, featured: false>, #<Design _id: 4fb28df8e4d30bd575000002, _type: nil, designer_id: BSON::ObjectId('4fb28df8e4d30bd575000004'), width: nil, height: nil, description: nil, title: "little black dress", tags: nil, featured: false>]:
.

Finished tests in 0.043330s, 23.0787 tests/s, 115.3935 assertions/s.

1 tests, 5 assertions, 0 failures, 0 errors, 0 skips 
```

# mysql - 多表Mysql JOIN

> ID：10575132
> 
> 赞同：0
> 
> 时间：2012-05-13T20:50:57.930
> 
> 标签：mysql, sql, join, left-join, inner-join

我有一个产品名称的参考表（主要）和一些其他具有替代名称的表。此时我有 2 个替代名称表，我显示那些仅使用表 A 到参考表的 FK 存在的行

```
SELECT main.id,main.name,tabA.name,tabB.name FROM main INNER JOIN tabA ON tabA.fk=main.id LEFT JOIN tabB ON tabB.fk=main.id ORDER BY main.name 
```

如何从任何替代表中获取存在 FK 的所有行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:54:36.980

```
SELECT main.id,main.name,tabA.name,tabB.name 
FROM main 
LEFT JOIN tabA ON tabA.fk=main.id 
LEFT JOIN tabB ON tabB.fk=main.id 
ORDER BY main.name 
```

# xcode - 如何在界面生成器上实现这个界面？

> ID：10575133
> 
> 赞同：2
> 
> 时间：2012-05-13T20:51:38.020
> 
> 标签：xcode, macos, user-interface, interface-builder

我需要一个类似于这个的工具栏：

![在此处输入图像描述](../Images/26cfa2a268e59be5eba2542e76b840cd.png)

我尝试使用 NSSegmentStyleSmallSquare 样式的 NSSegmentedControl，但它看起来不像 Xcode 工具栏。

此外，我需要像 XCode 中那样具有非常薄的边框（一个像素？）的拆分视图，但 NSSplitView 没有这种样式（即使使用 NSSplitViewDividerStyleThin）。

有没有办法在 Interface Builder 或其他方式（覆盖 drawRect ？）中实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:57:11.503

并不真地。我的意思是你可能会使用一些带有图像的 UIButtons 和额外的 UIImageViews 作为渐变背景，但考虑到这将是完全静态的（重新排列选项卡、添加新选项卡等的简单方法）我真的建议你自己编写选项卡控件。

# python - 在 Python 中使用 .append 时，项目会被多次附加。为什么？

> ID：10575139
> 
> 赞同：1
> 
> 时间：2012-05-13T20:52:33.237
> 
> 标签：python, list, append

我`.append`用一个字符串填充一个空列表，但我的项目被多次附加。在第一个字符串被附加 5 次后，第二个字符串被附加 4 次。为什么会这样？

这是我正在使用的代码

```
kw_list_1 = []

def add_kw():
    kw_1 = raw_input('enter your first keyword - ')

    for kw in kw_1:
        kw_list_1.append(kw_1)

    kw_2 = raw_input('enter second keyword - ')

    for kw2 in kw_2:
        kw_list_1.append(kw_2)

    print kw_list_1 
```

例如，如果我使用`'apple'`for`kw_1`和`'pear'`for `kw_2`this 返回

```
['apple', 'apple', 'apple', 'apple', 'apple', 'pear', 'pear', 'pear', 'pear'] 
```

这里发生了什么？append 不是解决这个问题的正确方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T20:55:03.373

这两行：

```
for kw in kw_1:
    kw_list_1.append(kw_1) 
```

您正在循环`kw_1`，这是一个字符串，因此您的循环体对字符串中的每个字符执行一次。循环体将整个字符串附加到列表中。因此，如果您输入`"apple"`，您将追加`"apple"`到列表五次。 `"pear"`将被追加四次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T20:58:02.447

这是由于`for`循环。

```
 for kw in kw_1:
            kw_list_1.append(kw_1) 
```

只需使用`kw_list_1.append(kw_1)`删除 for 循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:18:29.020

这个程序对我有用

```
kw_list_1 = []
def add_kw():
    kw_1 = raw_input('enter your first keyword - ')
    kw_list_1.append(kw_1)
    kw_2 = raw_input('enter second keyword - ')
    kw_list_1.append(kw_2)
    print kw_list_1
add_kw() 
```

循环导致水果出现的次数与字符串中的字符一样多

# c++ - C++：处理整数和字符串的函数模板

> ID：10575143
> 
> 赞同：4
> 
> 时间：2012-05-13T20:52:43.623
> 
> 标签：c++, string, function-templates

我正在做一个编程任务，制作一个可以处理整数和双精度的函数模板。我已经做到了，但为了好玩，我想让它也能够处理字符串。这是下面的功能。我将如何让它处理字符串？

```
// This program demonstrates the QuickSort Algorithm.
#include <iostream>
#include <algorithm>
#include <ctype.h> //needed for string handling?
using namespace std;

//**********************************************************
// partition selects the value in the middle of the        *
// array set as the pivot. The list is rearranged so       *
// all the values less than the pivot are on its left      *
// and all the values greater than pivot are on its right. *
//**********************************************************

template <class T>
int partition(T set[], int start, int end)
{
   int pivotValue, pivotIndex, mid;

   mid = (start + end) / 2;
   swap(set[start], set[mid]);
   pivotIndex = start;
   pivotValue = set[start]; // main.cpp:28: error: cannot convert 'std::basic_string<char, std::char_traits<char>, std::allocator<char> >' to 'int' in assignment
   for (int scan = start + 1; scan <= end; scan++)
   {
      if (set[scan] < pivotValue) // main.cpp:31: error: no match for 'operator<' in '*(((std::string*)(((long unsigned int)scan) * 8ul)) + set) < pivotValue'
      {
         pivotIndex++;
         swap(set[pivotIndex], set[scan]);
      }
   }
   swap(set[start], set[pivotIndex]);
   return pivotIndex;
}

//************************************************
// quickSort uses the quicksort algorithm to     *
// sort set, from set[start] through set[end].   *
//************************************************

template <class T>
void quickSort(T set[], int start, int end)
{
   T pivotPoint;

   if (start < end)
   {
      // Get the pivot point.
      pivotPoint = partition(set, start, end);
      // Sort the first sub list.
      quickSort(set, start, pivotPoint - 1); // main.cpp:56: error: no match for 'operator-' in 'pivotPoint - 1'
      // Sort the second sub list.
      quickSort(set, pivotPoint + 1, end); // main.cpp:58: error: no match for 'operator+' in 'pivotPoint + 1'
   }
}

int main()
{
   const int SIZE = 10;  // Array size
   int count;            // Loop counter

   // create arrays of various data types
   int array[SIZE] = {7, 3, 9, 2, 0, 1, 8, 4, 6, 5};
//   string array[SIZE] = {"7", "3", "9", "2","7", "3", "9", "2","a","r"};
   double array2[SIZE] = {7.1, 3.3, 9.0, 2.7, 0.2, 1.5, 8.9, 4.5, 6.9, 5.45};

   // Display the int array contents.
   cout << "Displaying the int array before sorting" << endl;
   for (count = 0; count < SIZE; count++)
      cout << array[count] << " ";
   cout << endl;

   // Sort the int array.
   quickSort(array, 0, SIZE - 1);

   // Display the int array contents.
   cout << "Displaying the int array after sorting" << endl;
   for (count = 0; count < SIZE; count++)
      cout << array[count] << " ";
   cout << endl << endl;

   // Display the double array contents.
   cout << "Diplaying the double array before sorting" << endl;
   for (count = 0; count < SIZE; count++)
      cout << array2[count] << " ";
   cout << endl;

   // Sort the double array.
   quickSort(array2, 0, SIZE - 1);

   // Display the int array contents.
   cout << "Displaying the double array after sorting" << endl;
   for (count = 0; count < SIZE; count++)
      cout << array2[count] << " ";
   cout << endl;

   return 0;
} 
```

提前致谢，

亚当

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T20:57:25.700

如果你使用`std::string`for `T`，你可能已经非常接近工作了。

如果您使用`char*`，则需要提供一个比较函子作为模板参数（或者有一些其他方式来指定 的比较方法`T`，例如类型特征类）。

此外，您不应该实现自己的`swap`. `std::swap`已经存在并且会为某些类型做一些聪明的事情（例如交换两个`vector`s 是常数时间，而不是复制向量中的每个对象）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T22:18:06.350

在 MSVC 中工作，这有点宽容，所以如果你的编译器遇到问题，请告诉我。

此解决方案使用函子（带有 的类/结构`operator()`），这意味着可以像调用函数一样调用对象。它还使用模板专业化 - 看看如果你删除`template < >`版本会发生什么`LessThanCompare`-`char*`将回退到比较指针值（给出随机结果）。

在更好的实现中，您将使用一个类来放置您的快速排序和数据透视函数 - 然后您可以使用默认模板并避免调用 like `quickSort<char*, LessThanCompare<char*> >`- 您可以说`quicksort`，但这有点超出了问题的范围！

```
#include <iostream>
#include <cstring>
#include <string>

using namespace std;

template <class T>
struct LessThanCompare
{
    bool operator()(T lhs, T rhs)
    {
        return lhs < rhs;
    }
};

template < >
struct LessThanCompare<char*>
{
    bool operator()(char* lhs, char* rhs)
    {
        return strcmp(lhs, rhs) == -1;  // Note strcmp returns -1 if lhs < rhs
    }
};

template <class T, class Comparator>
int partition(T set[], int start, int end)
{
    Comparator CompareLessThan; // Declare an instance of the Comparator

   T pivotValue; 
   int pivotIndex, mid;  // Is mid an index or a value - use descriptive names!

   mid = (start + end) / 2;
   swap(set[start], set[mid]);
   pivotIndex = start;
   pivotValue = set[start]; 
   for (int scan = start + 1; scan <= end; scan++)
   {
      if (CompareLessThan(set[scan], pivotValue)) 
      {
         pivotIndex++;
         swap(set[pivotIndex], set[scan]);
      }
   }
   swap(set[start], set[pivotIndex]);
   return pivotIndex;
}

//************************************************
// quickSort uses the quicksort algorithm to     *
// sort set, from set[start] through set[end].   *
//************************************************

template <class T, class Comparator>
void quickSort(T set[], int start, int end)
{
   int pivotPoint;

   if (start < end)
   {
      // Get the pivot point.
      pivotPoint = partition<T, Comparator >(set, start, end);
      // Sort the first sub list.
      quickSort<T, Comparator>(set, start, pivotPoint - 1); // main.cpp:56: error: no match for 'operator-' in 'pivotPoint - 1'
      // Sort the second sub list.
      quickSort<T, Comparator>(set, pivotPoint + 1, end); // main.cpp:58: error: no match for 'operator+' in 'pivotPoint + 1'
   }
}

int main()
{
   const int SIZE = 10;  // Array size

   // Create arrays of strings
   char* cstrArr[SIZE] = {
       "one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten"};

   std::string strArr[SIZE];
   for (int i = 0; i < SIZE; ++i)
   {
       strArr[i] = std::string(cstrArr[i]);
   }

   quickSort<char*, LessThanCompare<char*> >(cstrArr, 0, SIZE-1);
   quickSort<std::string, LessThanCompare<std::string> >(strArr, 0, SIZE-1);

   for (int i = 0; i < SIZE; ++i)
   {
       cout << cstrArr[i] << "\t\t" << strArr[i] << '\n';
   }

   return 0;
} 
```

# facebook - 如何在视图中显示图像域图像的计数？

> ID：10575144
> 
> 赞同：0
> 
> 时间：2012-05-13T20:52:44.640
> 
> 标签：facebook, drupal, drupal-6, drupal-views

我想在视图字段或视图 tpl.php 中显示上传到图像字段的图像数量。我怎样才能做到这一点？我的图像域称为boatimages。我试过了，但它显示为 0，而不是正确的数字： < ? php 打印计数（$fields->field_boatimages）？>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T15:23:37.547

如果你想知道结构，我的建议是安装 devel 模块并使用函数 dpm 来打印变量（print_r() 也可以工作）。如果计数不起作用，那是因为您可能使用了错误的数据。

或者，您可以只在数据库中查询该字段。我将为您提供有关 drupal 7 的说明，但 drupal 6 应该类似。

检查表 field_data_field_boatimages。查看与单个 entity_id 相关的图像列表

然后执行这个查询

```
SELECT COUNT(*) FROM `field_data_field_boatimages` WHERE entity_id = ### 
```

其中 ### 是您想知道的 entity_id。如果 arg(0) == node 在您的页面中，您可以通过查找 arg(1) 来获取它。

现在你只需要使用 php power 来打印结果

```
$query = SELECT COUNT(*) FROM `field_data_field_boatimages` WHERE entity_id = :eid
$result = db_query($query, array(':eid', $nid))->fetchField();
echo $result; 
```

Drupal 6 将非常相似。表名和查询语法略有不同。例如使用 db_result 而不是 fetchField()

总之祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T00:55:56.193

确认。我不认为 count() 那样工作。

为什么不直接使用视图来做到这一点？查看参数 > 设置，您会看到“显示记录计数”，这似乎是您所需要的。

# vb.net - 用于 windows 手机的 VB Silverlight

> ID：10575146
> 
> 赞同：0
> 
> 时间：2012-05-13T20:52:52.373
> 
> 标签：vb.net, silverlight, windows-phone-7

我正在用 VB 为 windows phone 7.5 编写一个应用程序

但它有一些错误

```
Imports System.IO
Imports System.IO.TextReader
Imports System.Xml
Imports System.Windows.RoutedEventArgs
Imports System.Windows.RoutedEvent
Imports System.ComponentModel
Imports System
Imports System.Collections.Generic
Imports System.Linq
Imports System.Net
Imports System.Windows
Imports System.Windows.Controls
Imports System.Windows.Documents
Imports System.Windows.Input
Imports System.Windows.Media
Imports System.Windows.Media.Animation
Imports System.Windows.Shapes
Imports Microsoft.Phone.Tasks
Imports System.Xml.Linq 
Imports System.Net.NetworkInformation
Imports Microsoft.VisualBasic.CompilerService

Partial Public Class MainPage
    Inherits PhoneApplicationPage

    Public Sub New()
        InitializeComponent()
    End Sub

    Private Sub MainPage_Loaded(sender As Object, e As System.Windows.RoutedEventArgs)             Handles MyBase.Loaded
        Final.Items.Clear()
        If NetworkInterface.GetIsNetworkAvailable Then
            Dim cl As New WebClient
            AddHandler cl.DownloadStringCompleted, AddressOf cl_DownloadStringCompleted
            cl.DownloadStringAsync(New Uri("http://web.com/xml.xml"))
        Else
            MessageBox.Show("check your internet connection")
        End If
    End Sub

    Private Sub cl_DownloadStringCompleted(sender As Object, e As System.Net.DownloadStringCompletedEventArgs)
        Dim doc = XDocument.Parse(e.Result)
        Dim names = XDocument.Parse(e.Result)
        Dim result_name = names.<Data>.<Entry>
        For Each result In doc.<Data>.<Entry>.<tag>
            Dim item As New ListBoxItem
            item.Content = result.Value
            AddHandler item.Tap, AddressOf ItemTap
            Final.Items.Add(item)
        Next
    End Sub

    Private Sub ItemTap(sender As Object, e As GestureEventArgs)
        Dim lbi As New ListBoxItem
        lbi = sender
        Dim url As New Uri("/" & lbi.Content & ".xaml", UriKind.Relative)
        Me.NavigationService.Navigate(url)
    End Sub

End Class 
```

它发现了一个错误`Dim url As New Uri("/" & lbi.Content & ".xaml", UriKind.Relative)`

它在报告中说：

> 请求的操作不可用，因为未定义运行时库函数“Microsoft.VisualBasic.CompilerServices.Operators.ConcatenateObject”。

注意：当我将 ItemTap 更改为此： `Private Sub ItemTap(ByRef sender As Object, e As GestureEventArgs)`

此错误消失并出现另一个错误：

> 方法 'Private Sub ItemTap(ByRef sender As Object, e As System.Windows.Input.GestureEventArgs)' 没有与委托 'Delegate Sub EventHandler(Of System.Windows.Input.GestureEventArgs)(sender As Object, e作为 System.Windows.Input.GestureEventArgs)'。
> 
> 在行：“AddHandler item.Tap，AddressOf ItemTap”

任何想法为什么我有这个？谢谢你 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:39:26.943

您正在尝试组合两个字符串和一个对象，但它不能这样做。

我强烈怀疑`lbi.Content`（在出错的行中）是一个 TextBlock，所以你的代码说“将一个字符串、一个 TextBlock 和一个字符串连接在一起”。
我怀疑你想要在 TextBlock 中显示的文本，所以只需相应地转换它：

```
"/" & DirectCast(lbi.Content, TextBlock).Text & ".xaml" 
```

# javascript - 标题来源不允许

> ID：10575151
> 
> 赞同：3
> 
> 时间：2012-05-13T20:53:49.040
> 
> 标签：javascript, jquery, ajax, http, cordova

我想将一个 Web 应用程序从 PhoneGap 带到 PC 浏览器，只是因为我需要做一些测试。在 WebApp 内部，有一些 XMLHttpRequest 失败，因为 Header 来源为空。

我已经尝试使用以下命令运行 C​​hrome：

```
chromium-browser index.html  --allow-file-access-from-files 
```

我有同样的错误：

```
Origin file:// is not allowed by Access-Control-Allow-Origin. 
```

我不明白为什么使用 android 模拟器一切正常。phonegap 还加载本地文件：

```
super.loadUrl("file:///android_asset/www/index.html", 1); 
```

**或多或少我已经解决了这个添加在 Firefox ！**

它可能对其他人有用：

[Firefox 附加组件 Force CORS](https://addons.mozilla.org/en-US/firefox/addon/forcecors/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:17:57.663

在启动 chromium 时尝试使用此标志*--disable-web-security 。*显然，它仅用于开发目的。

# android - 在不使用主键的情况下查询 android sqlite 数据库会引发错误 java.lang.NullPointerException

> ID：10575154
> 
> 赞同：-2
> 
> 时间：2012-05-13T20:53:52.427
> 
> 标签：android, sqliteopenhelper

我在 android 中开发了一个地图应用程序，它根据用户的搜索输入在数据库中搜索地点。我试图使用一个字段来查询 sqlite 数据库，该字段将在数据库中搜索并返回所有在数据库中的地方的纬度。该字段不是下面的主键是代码。请我需要帮助。用于创建和访问数据库的数据库类。

```
public class Places {
private Context context;
private DbHelper dataHelper;
private SQLiteDatabase database;

//columns for places table
public static final String ROW_ID="_id";
public static final String P_NAME="placename";
public static final String G_NAME="genericname";
public static final String LONGITUDE="longitude";
public static final String LATITUDE="latitude";
public static final String CONTACT="contactnumbers";

private static final String DB_NAME="MAP.db";
private static final String DB_TABLE_PLACES="places";
private static final String DB_TABLE_EXAMS="exam";
private static final String DB_TABLE_SMS="message";
private static final int DB_VERSION= 1; 
```

// Places.java 的构造函数

```
 public Places(Context c){
     this.context = c;
 } 
```

//数据库助手类

```
private static class DbHelper extends SQLiteOpenHelper  {

 //constructor for DbHelper inner class

public DbHelper(Context context) {
    super(context, DB_NAME, null, DB_VERSION);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    //creating table PLACES
    db.execSQL("CREATE TABLE "+DB_TABLE_PLACES+"("+ROW_ID+" PRIMARY KEY, " +
            ""+P_NAME+" TEXT NOT NULL, " +
            ""+G_NAME+" TEXT NOT NULL, " +
            ""+LONGITUDE+" TEXT NOT NULL, " +
            ""+LATITUDE+" TEXT NOT NULL, " +
            ""+CONTACT+" TEXT );");

    @Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    db.execSQL("DROP TABLE IF EXISTS "+DB_TABLE_PLACES);
    db.execSQL("DROP TABLE IF EXISTS "+DB_TABLE_EXAMS);
    db.execSQL("DROP TABLE IF EXISTS "+DB_TABLE_SMS);

    onCreate(db);
} 
```

}

```
 public Places openDatabase() throws SQLiteException{
   dataHelper = new DbHelper(context);
   database= dataHelper.getWritableDatabase();
return this; 
```

}

```
 public void closeDatabase(){
dataHelper.close();
database.close(); 
```

}

```
@SuppressWarnings("null")
 public List<String> getPlaceLatitude(String string) {
// TODO Auto-generated method stub

List<String> latitudes = null;
String[] columns= new String[]{ROW_ID,P_NAME,LATITUDE,LONGITUDE,G_NAME,CONTACT};

Cursor c = database.query(DB_TABLE_PLACES, columns,G_NAME+" = "+string, null, null, null, null);

int iLatitude = c.getColumnIndex(LATITUDE);
if (c !=null){
for(c.moveToFirst();!c.isAfterLast();c.moveToNext()){
    latitudes.add(c.getString(iLatitude));
}
}
return latitudes;} 
```

触发操作以查询数据库的方法。

```
public void searchDbAndOpenIntent(String search){
try{
        Places placeDb = new Places(this);
        placeDb.openDatabase();
        List<String> longitude1= placeDb.getPlaceLongitude(search);
                List<String> latitude1=placeDb.getPlaceLatitude(search);
        placeDb.closeDatabase();
}
                  catch (Exception e) {
            // TODO:handle exception                                    Toast.makeText(getBaseContext(),e.toString(),Toast.LENGTH_LONG).show();
        }
}

public void searchDbAndOpenIntent(String search){
try{
        Places placeDb = new Places(this);
        placeDb.openDatabase();
        List<String> longitude1= placeDb.getPlaceLongitude(search);
                List<String> latitude1=placeDb.getPlaceLatitude(search);
        placeDb.closeDatabase();

        }
                  catch (Exception e) {
            // TODO: handle exception

            Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG).show();
        }
} 
```

请我想根据地点的通用名称返回纬度，但是当我尝试查询 generic_name 列时，它返回 java.lang.NullPointerexception 。在它下面是当按下查询数据库的按钮时我得到的日志猫

```
 05-14 20:52:37.202: D/ddm-heap(243): Got feature list request
       05-14 20:52:41.123: E/ActivityThread(243): Failed to find provider info for       com.google.settings
       05-14 20:52:41.132: E/ActivityThread(243): Failed to find provider info for   com.google.settings
       05-14 20:52:41.172: E/ActivityThread(243): Failed to find provider info for com.google.settings
       05-14 20:52:41.562: D/dalvikvm(243): GC freed 2007 objects / 134424 bytes in 125ms
       05-14 20:52:41.802: D/LocationManager(243): Constructor: service =   android.location.ILocationManager$Stub$Proxy@44e8c078
       05-14 20:52:42.012: I/MapActivity(243): Handling network change  notification:CONNECTED
       05-14 20:52:42.012: E/MapActivity(243): Couldn't get connection factory client
       05-14 20:52:42.453: D/dalvikvm(243): GC freed 4934 objects / 288736 bytes in 136ms
       05-14 20:52:48.852: D/dalvikvm(243): GC freed 10599 objects / 817800 bytes in  137ms
       05-14 20:53:56.712: W/KeyCharacterMap(243): No keyboard for id 0
       05-14 20:53:56.723: W/KeyCharacterMap(243): Using default keymap: /system /usr/keychars/qwerty.kcm.bin
       05-14 20:53:59.712: D/LocationManager(243): removeUpdates: listener =  my.project.success.KnustP2PActivity@44e93c70
       05-14 20:54:11.812: D/dalvikvm(243): GC freed 5940 objects / 725376 bytes in 98ms
       05-14 20:54:11.812: I/dalvikvm(243): Uncaught exception thrown by finalizer (will be discarded):
       05-14 20:54:11.812: I/dalvikvm(243): Ljava/lang/IllegalStateException;:  Finalizing cursor android.database.sqlite.SQLiteCursor@44f31670 on places that has not  been deactivated or closed
       05-14 20:54:11.812: I/dalvikvm(243):     at android.database.sqlite.SQLiteCursor.finalize(SQLiteCursor.java:596)
       05-14 20:54:11.822: I/dalvikvm(243):     at dalvik.system.NativeStart.run(Native Method)
       05-14 20:54:11.872: E/Database(243): Leak found
       05-14 20:54:11.872: E/Database(243): java.lang.IllegalStateException: /data/data/my.project.success/databases/MAP.db SQLiteDatabase created and never closed
       05-14 20:54:11.872: E/Database(243):     at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1694)
       05-14 20:54:11.872: E/Database(243):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:738)
       05-14 20:54:11.872: E/Database(243):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:760)
       05-14 20:54:11.872: E/Database(243):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:753)
       05-14 20:54:11.872: E/Database(243):     at android.app.ApplicationContext.openOrCreateDatabase(ApplicationContext.java:473)
       05-14 20:54:11.872: E/Database(243):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:193)
       05-14 20:54:11.872: E/Database(243):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:98)
       05-14 20:54:11.872: E/Database(243):     at my.project.success.Places.openDatabase(Places.java:201)
       05-14 20:54:11.872: E/Database(243):     at my.project.success.SearchActivity.searchDbAndOpenIntent(SearchActivity.java:217)
       05-14 20:54:11.872: E/Database(243):     at my.project.success.SearchActivity.onClick(SearchActivity.java:151)
       05-14 20:54:11.872: E/Database(243):     at android.view.View.performClick(View.java:2364)
       05-14 20:54:11.872: E/Database(243):     at android.view.View.onTouchEvent(View.java:4179)
       05-14 20:54:11.872: E/Database(243):     at android.widget.TextView.onTouchEvent(TextView.java:6540)
       05-14 20:54:11.872: E/Database(243):     at android.view.View.dispatchTouchEvent(View.java:3709)
       05-14 20:54:11.872: E/Database(243):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
       05-14 20:54:11.872: E/Database(243):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
       05-14 20:54:11.872: E/Database(243):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
       05-14 20:54:11.872: E/Database(243):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
       05-14 20:54:11.872: E/Database(243):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
       05-14 20:54:11.872: E/Database(243):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
       05-14 20:54:11.872: E/Database(243):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
       05-14 20:54:11.872: E/Database(243):     at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
       05-14 20:54:11.872: E/Database(243):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
       05-14 20:54:11.872: E/Database(243):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
       05-14 20:54:11.872: E/Database(243):     at android.os.Handler.dispatchMessage(Handler.java:99)
       05-14 20:54:11.872: E/Database(243):     at android.os.Looper.loop(Looper.java:123)
       05-14 20:54:11.872: E/Database(243):     at     android.app.ActivityThread.main(ActivityThread.java:4363)
       05-14 20:54:11.872: E/Database(243):     at java.lang.reflect.Method.invokeNative(Native Method)
       05-14 20:54:11.872: E/Database(243):     at java.lang.reflect.Method.invoke(Method.java:521)
       05-14 20:54:11.872: E/Database(243):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
       05-14 20:54:11.872: E/Database(243):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
       05-14 20:54:11.872: E/Database(243):     at dalvik.system.NativeStart.main(Native Method)
       05-14 20:54:12.014: I/dalvikvm(243): Uncaught exception thrown by finalizer (will be discarded):
       05-14 20:54:12.022: I/dalvikvm(243): Ljava/lang/IllegalStateException;: Finalizing cursor  android.database.sqlite.SQLiteCursor@44f2f0b0 on places that has not been deactivated or closed
       05-14 20:54:12.022: I/dalvikvm(243):     at android.database.sqlite.SQLiteCursor.finalize(SQLiteCursor.java:596)
       05-14 20:54:12.032: I/dalvikvm(243):     at dalvik.system.NativeStart.run(Native Method)
       05-14 20:54:12.152: E/Database(243): Leak found
       05-14 20:54:12.152: E/Database(243): java.lang.IllegalStateException: /data/data/my.project.success/databases/MAP.db SQLiteDatabase created and never closed
       05-14 20:54:12.152: E/Database(243):     at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1694)
       05-14 20:54:12.152: E/Database(243):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:738)
       05-14 20:54:12.152: E/Database(243):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:760)
       05-14 20:54:12.152: E/Database(243):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:753)
       05-14 20:54:12.152: E/Database(243):     at android.app.ApplicationContext.openOrCreateDatabase(ApplicationContext.java:473)
       05-14 20:54:12.152: E/Database(243):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:193)
       05-14 20:54:12.152: E/Database(243):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:98)
       05-14 20:54:12.152: E/Database(243):     at my.project.success.Places.openDatabase(Places.java:201)
       05-14 20:54:12.152: E/Database(243):     at my.project.success.SearchActivity.searchDbAndOpenIntent(SearchActivity.java:217)
       05-14 20:54:12.152: E/Database(243):     at my.project.success.SearchActivity.onClick(SearchActivity.java:79)
       05-14 20:54:12.152: E/Database(243):     at android.view.View.performClick(View.java:2364)
       05-14 20:54:12.152: E/Database(243):     at android.view.View.onTouchEvent(View.java:4179)
       05-14 20:54:12.152: E/Database(243):     at android.widget.TextView.onTouchEvent(TextView.java:6540)
       05-14 20:54:12.152: E/Database(243):     at android.view.View.dispatchTouchEvent(View.java:3709)
       05-14 20:54:12.152: E/Database(243):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
       05-14 20:54:12.152: E/Database(243):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
       05-14 20:54:12.152: E/Database(243):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
       05-14 20:54:12.152: E/Database(243):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
       05-14 20:54:12.152: E/Database(243):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
       05-14 20:54:12.152: E/Database(243):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
       05-14 20:54:12.152: E/Database(243):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
       05-14 20:54:12.152: E/Database(243):     at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
       05-14 20:54:12.152: E/Database(243):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
       05-14 20:54:12.152: E/Database(243):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
       05-14 20:54:12.152: E/Database(243):     at android.os.Handler.dispatchMessage(Handler.java:99)
       05-14 20:54:12.152: E/Database(243):     at android.os.Looper.loop(Looper.java:123)
       05-14 20:54:12.152: E/Database(243):     at android.app.ActivityThread.main(ActivityThread.java:4363)
       05-14 20:54:12.152: E/Database(243):     at java.lang.reflect.Method.invokeNative(Native Method)
       05-14 20:54:12.152: E/Database(243):     at java.lang.reflect.Method.invoke(Method.java:521)
       05-14 20:54:12.152: E/Database(243):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
       05-14 20:54:12.152: E/Database(243):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
       05-14 20:54:12.152: E/Database(243):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T22:44:59.470

您需要`string`在查询中将变量括在单引号中。

它应该如下所示：

```
G_NAME+" = '" + string + "'" 
```

**编辑**

这是不正确的，因为您尝试访问游标而不首先移动到第一条记录：

```
int iLatitude = c.getColumnIndex(LATITUDE);
if (c !=null){
for(c.moveToFirst();!c.isAfterLast();c.moveToNext()){
    latitudes.add(c.getString(iLatitude));
} 
```

试试这个：

```
c.moveToFirst();
int iLatitude = c.getColumnIndex(LATITUDE);
if (c !=null){
    while(c.isAfterLast == false){
        latitudes.add(c.getString(iLatitude));
        c.moveToNext();
    }
} 
```

这也会改变你的循环，主要是为了可读性。

# r - 构建返回字符串的函数列表

> ID：10575157
> 
> 赞同：3
> 
> 时间：2012-05-13T20:54:03.173
> 
> 标签：r

有人可以解释一下为什么下面的代码片段会这样吗？

```
l <- list()
AddFn <- function(str) { l[[length(l) + 1]] <<- function() { return(str) }}
AddFn("hello")
AddFn("there")
l[[1]]()  # Returns "hello" as expected
l[[2]]()  # Returns "there" as expected
for (letter in letters) AddFn(letter)
l[[3]]()  # Returns "z" 
```

我希望`l[[3]]()`返回“a”。我错过了什么？我的 AddFn 函数到底是做什么的？

先感谢您，

阿德里安

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T21:19:30.183

惰性求值通常会导致返回循环中的最后一次求值。试试这个：

```
AddFn <- function(str) { force(str); l[[length(l) + 1]] <<- function() { return(str) }} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-13T21:24:52.943

这是一个讨厌的。该`str`参数被设置为一个表示返回的承诺`letter`，但直到通过调用它才真正被评估`l[[3]]()`。所以使用*了那个时候*的值！

如果将最后一部分更改为：

```
for (letter in letters) AddFn(letter)
letter="foo" 
l[[3]]()  # Returns "foo" 
```

……你会看得更清楚。...所以按照@DWin 的建议做，然后`force`先打电话。

# sql - 这个 SQL 查询有什么作用？

> ID：10575159
> 
> 赞同：1
> 
> 时间：2012-05-13T20:54:20.640
> 
> 标签：sql, sql-server, tsql

我无法理解这个查询完成了什么：

```
DECLARE @CatalogID int
INSERT [Catalog] ([Name])
SELECT @Catalog WHERE NOT EXISTS (SELECT [Name] FROM [Catalog] WHERE [Name] = @Catalog)
SELECT @CatalogID = ID FROM [Catalog] WHERE [Name] = @Catalog 
```

该模式包括五个表目录、数据条目、数据条目版本、标签、用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:56:08.583

基本上，如果它不存在，则插入一条记录，然后返回已插入或已存在的记录的 ID。

我在下面的代码中添加了注释：

```
DECLARE @CatalogID int --Create a variable to hold the Catalog id 
INSERT [Catalog] ([Name]) --Inserting into the catalog table
SELECT @Catalog --The SELECT will only return a value if a matching record does not exist
WHERE NOT EXISTS (SELECT [Name] FROM [Catalog] WHERE [Name] = @Catalog) 

SELECT @CatalogID = ID FROM [Catalog] WHERE [Name] = @Catalog --Returns the ID of the catalog record 
```

对于它的价值，可以用另一种方式编写此查询，即从中选择匹配的记录，`catalog`如果没有返回任何内容，则执行插入，但这种方法的优势在于它不易受到“竞争条件”的影响其中两个进程可能试图同时插入相同的记录。

# ruby-on-rails - 使用 Capistrano 部署时出错

> ID：10575160
> 
> 赞同：9
> 
> 时间：2012-05-13T20:54:21.287
> 
> 标签：ruby-on-rails, capistrano, unicorn

我正在关注 Railscast on Deploying to a VPS，一切都很顺利，直到我尝试运行`cap deploy`。尝试查找目录时似乎失败了。这是错误消息：

```
* executing `deploy'
triggering before callbacks for `deploy'
 * executing `deploy:check_revision'
 * executing `deploy:update'
** transaction: start
* executing `deploy:update_code'
updating the cached checkout on all servers
executing locally: "git ls-remote git@github.com:markprovan/dropwall_rails.git master"
command finished in 2531ms
* executing "if [ -d /home/deployer/apps/dropwall_rails/shared/cached-copy ]; then cd   /home/deployer/apps/dropwall_rails/shared/cached-copy && git fetch -q origin && git fetch -- tags -q origin && git reset -q --hard 9407f1feb2ea5b1c4a0666196bdcbb9ad888563e && git clean -q -d -x -f; else git clone -q git@github.com:markprovan/dropwall_rails.git /home/deployer/apps/dropwall_rails/shared/cached-copy && cd /home/deployer/apps/dropwall_rails/shared/cached-copy && git checkout -q -b deploy 9407f1feb2ea5b1c4a0666196bdcbb9ad888563e; fi"
servers: ["209.61.142.61"]
Password: 
[209.61.142.61] executing command
** [209.61.142.61 :: out] The authenticity of host 'github.com (207.97.227.239)' can't be established.
** RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.
** Are you sure you want to continue connecting (yes/no)?
** [209.61.142.61 :: out] yes
** Warning: Permanently added 'github.com,207.97.227.239' (RSA) to the list of known hosts.
command finished in 2655ms
copying the cached version to /home/deployer/apps/dropwall_rails/releases/20120513204913
* executing "cp -RPp /home/deployer/apps/dropwall_rails/shared/cached-copy /home/deployer/apps/dropwall_rails/releases/20120513204913 && (echo 9407f1feb2ea5b1c4a0666196bdcbb9ad888563e > /home/deployer/apps/dropwall_rails/releases/20120513204913/REVISION)"
servers: ["209.61.142.61"]
[209.61.142.61] executing command
** [out :: 209.61.142.61] cp: cannot create directory `/home/deployer/apps/dropwall_rails/releases/20120513204913': No such file or directory
command finished in 482ms
*** [deploy:update_code] rolling back
* executing "rm -rf /home/deployer/apps/dropwall_rails/releases/20120513204913; true"
servers: ["209.61.142.61"]
[209.61.142.61] executing command
command finished in 479ms
failed: "sh -c 'cp -RPp /home/deployer/apps/dropwall_rails/shared/cached-copy /home/deployer/apps/dropwall_rails/releases/20120513204913 && (echo 9407f1feb2ea5b1c4a0666196bdcbb9ad888563e > /home/deployer/apps/dropwall_rails/releases/20120513204913/REVISION)'" on 209.61.142.61 
```

我在这上面花了很长时间，似乎无法找到我要去哪里错了。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-13T21:44:56.907

你跑过`cap deploy:setup`吗`cap deploy:check`？这些应该突出许多常见问题。

然而，导致上述失败的错误看起来像是权限问题。

```
cp: cannot create directory `/home/deployer/apps/dropwall_rails/releases/20120513204913': No such file or directory 
```

确保该文件夹存在并且部署用户具有操作它的正确权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T11:18:53.013

权限问题可能是由默认 Capistrano use_sudo 行为引起的。

这可以被以下配置参数覆盖：set :use_sudo, false

奇怪的是，如果这个参数没有设置为 false，Capistrano 会对某些命令使用 sudo，而不会对其他命令使用它。对我来说似乎是一个错误。

# php - 未能定义值为 false 的数组键

> ID：10575163
> 
> 赞同：1
> 
> 时间：2012-05-13T20:54:44.420
> 
> 标签：php, boolean

所以我有一个多暗阵列。我正在定义一些带有布尔值的数组键：

```
$geo_entries['hostip']['geoTypes']['country']=true;
$geo_entries['hostip']['geoTypes']['country_short']=true;
$geo_entries['hostip']['geoTypes']['city']=false;
$geo_entries['hostip']['geoTypes']['city_short']=false; 
```

现在我对此进行了`print_r()`分析，结果如下：

```
( [country] => 1 [country_short] => 1 [city] => [city_short] => ) 
```

如果我错了，现在纠正我，但不是`false==0`吗？

我尝试快速检查该值（对于布尔值）：

```
if($geo_entries['hostip']['geoTypes']['city']==boolean){
//this returns false...
} 
```

上面的条件返回`false`with `['hostip']['geoTypes']['city']`but `true`with `['hostip']['geoTypes']['country']`。两者之间的唯一区别是`city`具有 的值`false`和`country`具有 的值`true`。

当我将值定义为`0`而不是`false`- 一切正常......

我有一种感觉，我尴尬地错过了一些东西，这导致了这种误解。

有人愿意解释吗？- （为什么`false!=0`？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T21:13:20.887

您正在将您的变量（包含`(bool) true`/ `(bool) false`）与`boolean`. Simple 文字`boolean`没有定义，PHP 将其作为字符串处理。

`if($geo_entries['hostip']['geoTypes']['city']==boolean)`

因此变成

`if($geo_entries['hostip']['geoTypes']['city']=="boolean")`

`==`运算符将这些与类型杂耍后的进行比较。`"boolean"`是一个非空字符串并被视为`(bool) true`. 因此，您的比较归结为`(bool) true == (bool) true`哪些返回`true`，`(bool) false == (bool) true`哪些返回`false`当然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:02:51.087

您可以通过 print_r 验证问题出在打印上，而不是设置上。以下行将输出 bool(false)

```
var_dump( $geo_entries['hostip']['geoTypes']['city']); 
```

也会`var_dump( $geo_entries['hostip']['geoTypes']['city'] == false);`输出 bool(true)

并将`var_dump( $geo_entries['hostip']['geoTypes']['city'] == 0);`输出 bool(true)

稍微偏离主题：通常，避免将布尔值处理为整数以使代码更具可读性是一个好主意，尤其是对于使用多种语言的开发人员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T21:15:01.253

```
foreach($geo_entries['hostip']['geoTypes'] as $key => $value) {
  echo $key . ' is ' . (is_bool($value) ? 'boolean' : 'not boolean') . '<br />'; 
} 
```

输出：

```
country is boolean
country_short is boolean
city is boolean
city_short is boolean 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T21:16:31.613

这不是您在 PHP 中进行类型比较的方式。如果要检查变量`$foo`是否为布尔值，可以这样做：

```
if (is_bool($foo))
{
    // ...
} 
```

您的示例实际上正在做的是解释为字符串并检查在解释为布尔值时`boolean`是否应该考虑它。`true`这将生成一条 E_NOTICE 消息（根据您的错误报告级别，该消息可能可见也可能不可见）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T21:20:28.733

False 不等于 0，因为您要检查的变量的类型是布尔值。

[http://us.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting](http://us.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)

该文档说以下值是错误的：

*   布尔值 FALSE 本身
*   整数 0（零）
*   ...

这并不是说布尔 FALSE == 整数 0。

# android - TypeCasting In Android

> ID：10575164
> 
> 赞同：-2
> 
> 时间：2012-05-13T20:54:54.557
> 
> 标签：android, casting

Unable to Use Typecasting in

```
static String fontPath, temp, textColor;
static EditText text;
static TextView tv;
static Typeface tf; 
```

Case 1:

```
tv.setTextColor(Color.parseColor(textColor); // NOT WORKING 
```

so

Using infinite If else statements .. like ..

```
if (textColor=="#FF0000") 
    tv.setTextColor(Color.parseColor("#FF0000")); // ROUGH SOLUTION 
```

Case 2:

Also in

```
text = (EditText) findViewById(R.id.et1);
temp = text.getText().toString();

text.setText(temp); // NOT WORKING -- BLANK TEXT 
```

Where if else statements are impossible ..

but

```
Toast.makeText(Opt.this, temp, Toast.LENGTH_SHORT).show(); 
```

This works perfectly ... Solution.. ?

**EDIT.... 1:**

Dear **dmon**

I want to pass variable not a fixed value ...

```
setText();
setTextColor();
setTypeface(); 
```

to TextView Object

& One

```
setText(); 
```

to EditText Object ...

tried above code not working ..?

Complete code ...

```
package cts.t.tab;

import java.util.ArrayList;
import java.util.List;

import cts.t.tab.R;

import android.R.string;
import android.app.Activity;

import android.content.Context;
import android.content.Intent;
import android.content.res.ColorStateList;

import android.graphics.*;

import android.os.Bundle;

import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnKeyListener;
import android.view.KeyEvent;

import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.RadioGroup;
import android.widget.RadioButton;
import android.widget.RadioGroup.OnCheckedChangeListener;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

public class Text extends Activity { 

static String fontPath, item, temp, textColor;
static TextView tv;
static Typeface tf;
static int size=50;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.text);

    click();
    listen();   
    size();
    display();
    //draw();
} 

public void click() {
    // TODO Auto-generated method stub
    final Button bo = (Button) findViewById(R.id.bo); 
    bo.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

          Intent i = new Intent();
          i.setClassName("cts.t.tab", "cts.t.tab.Opt"); // 
          startActivity(i);
        }
    });
    final Button be = (Button) findViewById(R.id.be); 
    be.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

          //

        }
    });
}

public void draw() {

    setContentView(new SampleView(this));

}

private static class SampleView extends View {
    private Paint    mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
    private Typeface mFace;

    public SampleView(Context context) {                    
        super(context);

        mFace = Typeface.createFromAsset(getContext().getAssets(),fontPath);
        mPaint.setTextSize(size);

    }

    @Override 
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(Color.WHITE);
        mPaint.setTypeface(null);                   
        canvas.drawText("Default", 10, 100, mPaint);
        mPaint.setTypeface(mFace);
        canvas.drawText(temp, 10, 200, mPaint);
    }
}

public void size() {

    final TextView tv = (TextView) findViewById(R.id.tv);       
    final SeekBar sb = (SeekBar)findViewById(R.id.sb);

    sb.setMax(100);
    sb.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {

            if(progress==0)size=1;
            else size=progress;

            display();
        }
    });
}

public void display() {

    TextView tv = (TextView)findViewById(R.id.tv); 
    //Toast.makeText(Text.this, "font @ Display : " + fontPath +" ", Toast.LENGTH_SHORT).show();
    //Typeface tf = Typeface.createFromAsset( getAssets(), fontPath);

    // TODO: Why if(fontPath.equals("EN_1.ttf")) is not working ?
    // TODO: Why "  Typeface tf = Typeface.createFromAsset( getAssets(), fontPath); " is not working ..?
    // TODO: What is Data Type of fontPath..? What should be ..?

    if(fontPath=="EN_1.ttf") tf = Typeface.createFromAsset( getAssets(), "EN_1.ttf");
    else if(fontPath=="EN_2.ttf") tf = Typeface.createFromAsset( getAssets(), "EN_2.ttf");
    else if(fontPath=="EN_3.ttf") tf = Typeface.createFromAsset( getAssets(), "EN_3.ttf");
    else if(fontPath=="CN_1.ttf") tf = Typeface.createFromAsset( getAssets(), "CN_1.ttf");
    else if(fontPath=="CN_2.ttf") tf = Typeface.createFromAsset( getAssets(), "CN_2.ttf");
    else if(fontPath=="CN_3.ttf") tf = Typeface.createFromAsset( getAssets(), "CN_3.ttf");
    else if(fontPath=="JP_1.ttf") tf = Typeface.createFromAsset( getAssets(), "JP_1.ttf");
    else if(fontPath=="JP_2.ttf") tf = Typeface.createFromAsset( getAssets(), "JP_2.ttf");
    else if(fontPath=="JP_3.ttf") tf = Typeface.createFromAsset( getAssets(), "JP_3.ttf");

    // TODO Same problem of fontPath ...?

    // tv.setTextColor(Color.parseColor(textColor));
    // tv.setTextColor(Color.parseColor(To_c.textColor);
    // tv.setTextColor(Color.parseColor(To_c.getColor2()));

    // TODO Why any one is not working ... ?

//OLD       

    if (textColor=="#FF0000") tv.setTextColor(Color.parseColor("#FF0000"));
    else if (textColor=="#008000") tv.setTextColor(Color.parseColor("#008000"));
    else if (textColor=="#0000FF") tv.setTextColor(Color.parseColor("#0000FF"));
    else if (textColor=="#FFA500") tv.setTextColor(Color.parseColor("#FFA500"));
    else if (textColor=="#00FF00") tv.setTextColor(Color.parseColor("#00FF00"));
    else if (textColor=="#000080") tv.setTextColor(Color.parseColor("#000080"));
    else if (textColor=="#800000") tv.setTextColor(Color.parseColor("#800000"));

//NEW

    else if (textColor=="#942998") tv.setTextColor(Color.parseColor("#942998"));
    else if (textColor=="#0096FF") tv.setTextColor(Color.parseColor("#0096FF"));
    else if (textColor=="#B9DF7D") tv.setTextColor(Color.parseColor("#B9DF7D"));
    else if (textColor=="#DDA0DD") tv.setTextColor(Color.parseColor("#DDA0DD"));
    else if (textColor=="#FF00E4") tv.setTextColor(Color.parseColor("#FF00E4"));
    else if (textColor=="#FDFF14") tv.setTextColor(Color.parseColor("#FDFF14"));
    else if (textColor=="#FA9403") tv.setTextColor(Color.parseColor("#FA9403"));
    else if (textColor=="#FF0000") tv.setTextColor(Color.parseColor("#FF0000"));
    else if (textColor=="#FFFFFF") tv.setTextColor(Color.parseColor("#FFFFFF"));
    else if (textColor=="#000000") tv.setTextColor(Color.parseColor("#000000"));

    tv.setTextSize(size);
    tv.setTypeface(tf) ;
    tv.setText(temp) ;
}

public void listen() {

    fontPath = Opt.getFontPath();
    temp = Opt.getText2();
    textColor = Opt.getColor2();

    if(fontPath != null) 
    Toast.makeText(Text.this, "font : " + fontPath + " ", Toast.LENGTH_SHORT).show();

    if(temp != null)
    Toast.makeText(Text.this, "text : " + temp + " ", Toast.LENGTH_SHORT).show();

    if(textColor != null)
    Toast.makeText(Text.this, "color : " + textColor + " ", Toast.LENGTH_SHORT).show();

}
} 
```

SECOND CLASS ....

```
package cts.t.tab;

import android.R.string;
import android.app.Activity;
import android.content.Intent;
import android.content.res.ColorStateList;
import android.graphics.Color;
import android.graphics.Typeface;
import android.os.Bundle;
import android.text.Editable;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnKeyListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class Opt extends Activity { 

static String fontPath, temp, textColor;
static int k=0;
static EditText text;
static Typeface tf1, tf2, tf3;

//  Called when the activity is first created. 

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.opt); 

    cancel();
    font();
    color();
    text();

}

     // COLOR BTNs
public void text() {

    // get edittext component
    text = (EditText) findViewById(R.id.et1);
    temp = text.getText().toString();

    text.setText(temp);

    // add akeylistener to keep track user input
    text.setOnKeyListener( new OnKeyListener()  {   

    public boolean onKey(View v, int keyCode, KeyEvent event) {

        // if keydown and "enter" is pressed
        if ( (event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == KeyEvent.KEYCODE_ENTER) ) {
            temp = text.getText().toString();  
            Toast.makeText(Opt.this, temp, Toast.LENGTH_SHORT).show();

            Intent i = new Intent();
            i.setClassName("cts.t.tab", "cts.t.tab.TabMain"); // 
            startActivity(i);

            return true;
            }  
        return false;
    }
    private ColorStateList parseColor(String string) {
        // TODO Auto-generated method stub
        return null;
        }
    });
}

public void color() {

    // TODO Auto-generated method stub
     final Button c1 = (Button) findViewById(R.id.bc1);
     final Button c2 = (Button) findViewById(R.id.bc2);
     final Button c3 = (Button) findViewById(R.id.bc3);
     final Button c4 = (Button) findViewById(R.id.bc4);
     final Button c5 = (Button) findViewById(R.id.bc5);
     final Button c6 = (Button) findViewById(R.id.bc6);
     final Button c7 = (Button) findViewById(R.id.bc7);
     final Button c8 = (Button) findViewById(R.id.bc8);
     final Button c9 = (Button) findViewById(R.id.bc9);
     final Button c10 = (Button) findViewById(R.id.bc10);

     c1.setBackgroundColor(Color.TRANSPARENT);
     c2.setBackgroundColor(Color.TRANSPARENT);
     c3.setBackgroundColor(Color.TRANSPARENT);
     c4.setBackgroundColor(Color.TRANSPARENT);
     c5.setBackgroundColor(Color.TRANSPARENT);
     c6.setBackgroundColor(Color.TRANSPARENT);
     c7.setBackgroundColor(Color.TRANSPARENT);
     c8.setBackgroundColor(Color.TRANSPARENT);
     c9.setBackgroundColor(Color.TRANSPARENT);
     c10.setBackgroundColor(Color.TRANSPARENT);

     c1.setTextColor(Color.TRANSPARENT);
     c2.setTextColor(Color.TRANSPARENT);
     c3.setTextColor(Color.TRANSPARENT);
     c4.setTextColor(Color.TRANSPARENT);
     c5.setTextColor(Color.TRANSPARENT);
     c6.setTextColor(Color.TRANSPARENT);
     c7.setTextColor(Color.TRANSPARENT);
     c8.setTextColor(Color.TRANSPARENT);
     c9.setTextColor(Color.TRANSPARENT);
     c10.setTextColor(Color.TRANSPARENT);

// COLOR BUTTONS

     c1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Toast.makeText(Opt.this, "Color : BLACK", Toast.LENGTH_SHORT).show();
            textColor="#000000";
        }
     });

     c2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Toast.makeText(Opt.this, "Color : WHITE", Toast.LENGTH_SHORT).show();
            textColor="#FFFFFF";
        }
     });

     c3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Toast.makeText(Opt.this, "Color : RED", Toast.LENGTH_SHORT).show();
            textColor="#FF0000";
        }
     });

     c4.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Toast.makeText(Opt.this, "Color : ORANGE", Toast.LENGTH_SHORT).show();
            textColor="#FA9403";
        }
     });

     c5.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Toast.makeText(Opt.this, "Color : YELLOW", Toast.LENGTH_SHORT).show();
            textColor="#FDFF14";
        }
     });

     c6.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Toast.makeText(Opt.this, "Color : PURPLE", Toast.LENGTH_SHORT).show();
            textColor="#FF00E4";
        }
     });

     c7.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Toast.makeText(Opt.this, "Color : PINK", Toast.LENGTH_SHORT).show();
            textColor="#DDA0DD";
        }
     });

     c8.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Toast.makeText(Opt.this, "Color : GREEN", Toast.LENGTH_SHORT).show();
            textColor="#B9DF7D";
        }
     });

     c9.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Toast.makeText(Opt.this, "Color : BLUE", Toast.LENGTH_SHORT).show();
            textColor="#0096FF";
        }
     });

     c10.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Toast.makeText(Opt.this, "Color : VOILET", Toast.LENGTH_SHORT).show();
            textColor="#942998";
        }
     });

}

public void font() {
    // TODO Auto-generated method stub

// DEFINATION

    // FONT BTNs
    final Button ben1 = (Button) findViewById(R.id.ben1);
    final Button ben2 = (Button) findViewById(R.id.ben2);
    final Button ben3 = (Button) findViewById(R.id.ben3);
    final Button bcn1 = (Button) findViewById(R.id.bcn1);
    final Button bcn2 = (Button) findViewById(R.id.bcn2);
    final Button bcn3 = (Button) findViewById(R.id.bcn3);
    final Button bjp1 = (Button) findViewById(R.id.bjp1);
    final Button bjp2 = (Button) findViewById(R.id.bjp2);
    final Button bjp3 = (Button) findViewById(R.id.bjp3);

    final TextView te1 = (TextView) findViewById(R.id.te1);
    final TextView te2 = (TextView) findViewById(R.id.te2);
    final TextView te3 = (TextView) findViewById(R.id.te3);
    final TextView tc1 = (TextView) findViewById(R.id.tc1);
    final TextView tc2 = (TextView) findViewById(R.id.tc2);
    final TextView tc3 = (TextView) findViewById(R.id.tc3);
    final TextView tj1 = (TextView) findViewById(R.id.tj1);
    final TextView tj2 = (TextView) findViewById(R.id.tj2);
    final TextView tj3 = (TextView) findViewById(R.id.tj3);

    // FONT BTNs
    ben1.setBackgroundColor(Color.TRANSPARENT);
    ben2.setBackgroundColor(Color.TRANSPARENT);
    ben3.setBackgroundColor(Color.TRANSPARENT);
    bcn1.setBackgroundColor(Color.TRANSPARENT);
    bcn2.setBackgroundColor(Color.TRANSPARENT);
    bcn3.setBackgroundColor(Color.TRANSPARENT);
    bjp1.setBackgroundColor(Color.TRANSPARENT);
    bjp2.setBackgroundColor(Color.TRANSPARENT);
    bjp3.setBackgroundColor(Color.TRANSPARENT);
    //cbc.setBackgroundColor(Color.TRANSPARENT);

    te1.setTextColor(Color.TRANSPARENT);
    te2.setTextColor(Color.TRANSPARENT);
    te3.setTextColor(Color.TRANSPARENT);
    tc1.setTextColor(Color.TRANSPARENT);
    tc2.setTextColor(Color.TRANSPARENT);         
    tc3.setTextColor(Color.TRANSPARENT);
    tj1.setTextColor(Color.TRANSPARENT);
    tj2.setTextColor(Color.TRANSPARENT);
    tj3.setTextColor(Color.TRANSPARENT);

    tf1 = Typeface.createFromAsset( getAssets(), "EN_1.ttf");
    ben1.setTypeface(tf1);

    tf2 = Typeface.createFromAsset( getAssets(), "EN_2.ttf");
    ben2.setTypeface(tf2);

    tf3 = Typeface.createFromAsset( getAssets(), "EN_3.ttf");
    ben3.setTypeface(tf3);

    ben1.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
             fontPath = "EN_1.ttf"; 
             Toast.makeText(Opt.this, "Font : " + fontPath, Toast.LENGTH_SHORT).show();
         }
     });
     ben2.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
             fontPath = "EN_2.ttf";
             Toast.makeText(Opt.this, "Font : " + fontPath, Toast.LENGTH_SHORT).show();
         }
     });
     ben3.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
             fontPath = "EN_3.ttf";
             Toast.makeText(Opt.this, "Font : " + fontPath, Toast.LENGTH_SHORT).show();
         }
     });
     bcn1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            fontPath = "CN_1.ttf";
            Toast.makeText(Opt.this, "Font : " + fontPath, Toast.LENGTH_SHORT).show();
        }
     });
     bcn2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            fontPath = "CN_2.ttf";
            Toast.makeText(Opt.this, "Font : " + fontPath, Toast.LENGTH_SHORT).show();
        }
     });
     bcn3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            fontPath = "CN_3.ttf";
            Toast.makeText(Opt.this, "Font : " + fontPath, Toast.LENGTH_SHORT).show();
        }
     });
     bjp1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            fontPath = "JP_1.ttf";
            Toast.makeText(Opt.this, "Font : " + fontPath, Toast.LENGTH_SHORT).show();
        }
     });
     bjp2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            fontPath = "JP_2.ttf";
            Toast.makeText(Opt.this, "Font : " + fontPath, Toast.LENGTH_SHORT).show();
        }
     });
     bjp3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            fontPath = "JP_3.ttf";
            Toast.makeText(Opt.this, "Font : " + fontPath, Toast.LENGTH_SHORT).show();
        }
     });
}

public void cancel() {
    // TODO Auto-generated method stub

    final Button bc = (Button) findViewById(R.id.bc); 
    bc.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

          Intent i = new Intent();
          i.setClassName("cts.t.tab", "cts.t.tab.TabMain"); // 
          startActivity(i);
        }
    });
}

public static String getFontPath()
{
    return fontPath;
}

public static int getCounter()
{
    return k;
}

public static String getText2()
{
    return temp;
}

public static String getColor2()
{
    return textColor;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:20:25.850

你应该清理你的问题，根本不清楚你在问什么。我可以告诉你的是，`tv.setTextColor()`它不需要一个`Color`对象（[docs](http://developer.android.com/reference/android/widget/TextView.html#setTextColor%28int%29)），它需要一个整数。你想要的是以下内容：

```
 tv.setTextColor(0xFFFF0000); 
```

或者，更好的是，只需将您想要的颜色放入[资源文件](http://developer.android.com/guide/topics/resources/more-resources.html#Color)并使用它

```
 tv.setTextColor(getResources().getColor(R.color.red)); 
```

# google-maps - 骨干.js 和谷歌地图标记

> ID：10575168
> 
> 赞同：0
> 
> 时间：2012-05-13T20:55:14.320
> 
> 标签：google-maps, backbone.js

我无法将标记添加到带有主干的谷歌地图。

我创建了一个 jsfiddle 以便于调试...

[http://jsfiddle.net/jLc53/3/](http://jsfiddle.net/jLc53/3/)

我认为问题可能与渲染地图时帖子集合为空有关，但我不确定。

我有一个返回帖子信息的 API，每个帖子都有一个纬度和经度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:25:33.647

您的第一个问题是您的 API（似乎正在使用 TastyPie）返回的结果数组不是作为响应的根，而是作为子属性。

Backbone Collections 期望接收一个对象数组：

```
[{obj1},{obj2},{obj3}] 
```

您的 API 返回：

```
{meta:{response metadata},objects:[{obj1},{obj2},{obj3}]} 
```

在 Backbone Collections 中处理这个问题的方法是重写该[`parse`函数](http://documentcloud.github.com/backbone/#Collection-parse)，以便它返回一个对象数组：

```
parse: function (response) {
    return response.objects;
} 
```

可能的第二个问题是，当 Collection.fetch() 完成时，它发出的事件不是`change`事件，而是[`reset`事件](http://documentcloud.github.com/backbone/#FAQ-events)。因此，如果您希望在获取完成时重新渲染视图，则需要绑定到`reset`not `change`。

# ruby - 在本地运行 jekyll 时出错（rvm gemset 问题）

> ID：10575173
> 
> 赞同：2
> 
> 时间：2012-05-13T20:55:57.273
> 
> 标签：ruby, gem, rvm, jekyll

我通过 RVM 安装了 ruby​​ 1.9.3，现在想要获取 rekyll gem，以便我可以在本地测试我的博客。当我`gem install jekyll`安装好时，但是当我尝试运行时`jekyll --server`出现错误：

```
/Users/matt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find jekyll (>= 0) amongst [bigdecimal-1.1.0, io-console-0.3, json-1.5.4, minitest-2.5.1, rake-0.9.2.2, rdoc-3.9.4] (Gem::LoadError)
    from /Users/matt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
    from /Users/matt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
    from /Users/matt/.rvm/gems/ruby-1.9.3-p194/bin/jekyll:18:in `<main>' 
```

我可以在我的列表中看到它`gem list`- 有什么想法吗？

我也试`RVMSUDO gem install jekyll`了也没用。

如果它有任何用处，我的 rvm 信息：

```
system:

  system:
    uname:       "Darwin Matts-MacBook-Air.local 11.3.0 Darwin Kernel Version 11.3.0: Thu Jan 12 18:47:41 PST 2012; root:xnu-1699.24.23~1/RELEASE_X86_64 x86_64"
    bash:        "/bin/bash => GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin11)"
    zsh:         "/bin/zsh => zsh 4.3.11 (i386-apple-darwin11.0)"

  rvm:
    version:      "rvm 1.13.2 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
    updated:      "8 days 23 hours 59 minutes 32 seconds ago"

  homes:
    gem:          "not set"
    ruby:         "not set"

  binaries:
    ruby:         "/Users/matt/.rvm/rubies/ruby-1.9.3-p194/bin/ruby"
    irb:          "/Users/matt/.rvm/rubies/ruby-1.9.3-p194/bin/irb"
    gem:          "/Users/matt/.rvm/rubies/ruby-1.9.3-p194/bin/gem"
    rake:         "/Users/matt/.rvm/gems/ruby-1.9.3-p194@global/bin/rake"

  environment:
    PATH:         "/Users/matt/.rvm/gems/ruby-1.9.3-p194/bin:/Users/matt/.rvm/gems/ruby-1.9.3-p194@global/bin:/Users/matt/.rvm/rubies/ruby-1.9.3-p194/bin:/Users/matt/.rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin"
    GEM_HOME:     ""
    GEM_PATH:     ""
    MY_RUBY_HOME: ""
    IRBRC:        ""
    RUBYOPT:      ""
    gemset:       "" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T19:48:42.840

`rvm use 1.9.3@test --create`- 使用和创建 gemset。

`gem install jekyll`- 安装宝石。

最重要的一步是使用 ruby`rvm use 1.9.3`​​ 。默认情况下，RVM 应该使用并设置默认首先安装的 ruby​​。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T21:25:19.593

您需要回到使用 RVM 的基础知识：

*   rvm 截屏[http://screencasts.org/episodes/how-to-use-rvm](http://screencasts.org/episodes/how-to-use-rvm)
*   rvm 备忘单[http://cheat.errtheblog.com/s/rvm/](http://cheat.errtheblog.com/s/rvm/)

检查它们应该只有几分钟的时间——它们应该可以让你避免进一步的混淆。

# php - 缩略图限制最大 ''6'' 图像

> ID：10575182
> 
> 赞同：0
> 
> 时间：2012-05-13T20:56:56.450
> 
> 标签：php, drupal-7, drupal-modules, break

我正在使用 Drupal 7 并为我的内容缩略图首页显示创建一个模块。工作这个：

```
 if(count($p_detail->field_slide) > 0){
        $output .= '<div class="right">';
        $output .= '<ul class="thumbs">';
        $i=1;
        foreach($p_detail->field_slide['und'] as $thumb):
            $img_path = $thumb['uri'];
            $img_url = image_style_url('tmb_240x117', $img_path);
            $img_file = '<img src="'.$img_url.'" alt="'.$p_detail->title.'" />';

            $output .= '<li>
                            <a href="'.$p_url.'">
                                '.$img_file.'
                                <div class="shadow"></div>        
                                <div class="hoverimg"></div>
                             </a>
                            <div class="img_no">0'.$i.'</div>
                        </li>';
            $i++;
        endforeach;
        $output .= '</ul>';
        $output .= '</div>';
    } 
```

此代码有效。但我想显示最大缩略图 6 图像。例如，有 20 张图片，只显示前 6 张图片。如果是 2 张图像，则仅缩略图 2 张图像。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:10:28.073

您可以在 foreach 下方添加这一行：

```
foreach($p_detail->field_slide['und'] as $thumb):
  if($i>6) { break; }
  $img_path = $thumb['uri']; 
```

这将在打印 6 张图像后结束 foreach 循环。

# javascript - 用jquery扩展的textarea，当我点击提交按钮时不提交表单

> ID：10575183
> 
> 赞同：0
> 
> 时间：2012-05-13T20:57:03.310
> 
> 标签：javascript, jquery, html, forms, post

我希望按钮在扩展文本区域时提交表单。我该怎么做呢？

问题是当我点击表单中的 Post 按钮时，当 textarea 展开时，它并没有提交表单，而是缩小了，我需要在它变小的时候再次点击它来提交表单。

目前为了提交帖子，我需要在 textarea 未展开时单击帖子按钮。

**HTML**

```
<form method='POST' action='elsewhere.php'>
    <textarea id="textarea" style="width:550px; height:25px;"></textarea>
    <input class="btn" type='submit' value='Post'/>                             
</form> 
```

**jQuery**

目前，当我单击文本区域时，高度会扩大，当我单击其他地方时，它会缩小。当我单击发布按钮时，当 textarea 展开时它不会提交帖子，而是将 textarea 缩小回来。

```
$('#textarea').click(function(){
    $(this).css('height','100px')
    $(this).html('');
    $(this).blur(function(){
        $(this).css('height','25px')

    });
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T21:15:07.170

If you are submitting the form and redirecting to another page, all you need is for the button to stay still long enogh to register the click, a timeout solves that problem:

```
$('#textarea').on({
    focus: function() {
        $(this).css('height','100px').html('');
    },
    blur: function() {
        var self = this,
            T = setTimeout(function() {$(self).css('height','25px') }, 200);
    }
}); 
```

[FIDDLE](http://jsfiddle.net/adeneo/hpyTk/1/)

If using this with Ajax, and not redirecting, and to make the textarea not respond to the click on the button, you could use a variable to keep track of what element was clicked, and do somewhat the same as above:

```
var elm;

$('.btn').on('click', function(e) {
    elm = e.target;
    e.preventDefault();
    //do ajax stuff
});

$('#textarea').on({
    focus: function() {
        $(this).css('height','100px').html('');
    },
    blur: function() {
        var self = this,
            T = setTimeout(function() {
                if ($(elm).attr('class') != 'btn') $(self).css('height','25px');
            }, 200);
    }
}); 
```

[FIDDLE](http://jsfiddle.net/adeneo/hpyTk/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:12:12.980

~~我认为这是一些与 z-index 相关的问题。尝试给`position: relative; z-index:1;`提交按钮。~~

~~If you have set `z-index` for the `textarea` or any of its ancestors, increment that value by one and set it to the button.~~

~~There is a chance of the button being overlapped by the textarea while increasing its height.~~ ~~And you too mentioned that, `while the textarea is expanded it doesnt submit the post`. It may be because of the button is overlapped.~~

**Update:**

I got it after

**The problem is that when I click the Post button in the form, while the textarea is expanded, it does not submit the form, instead it shrinks back down, and I need to click it again while it is smaller, to submit the form.**

```
$('#textarea').click(function(){
$(this).css('height','100px')
$(this).html('');
$(this).blur(function(){
    if(this.value === ''){
        $(this).css('height','25px')
    }

});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T21:11:27.933

前几天我遇到了类似的问题，发生的事情是`blur`textarea 上的事件发生*在*浏览器考虑`click`按钮上的事件之前。

因此，按顺序，我点击了按钮，然后浏览器`blur`在 textarea 上触发事件，缩小并移动按钮，然后浏览器考虑了点击，什么都不做，因为我点击的地方不再有按钮.

不过，我并没有直接解决这个问题，而是决定只有在 textarea 不为空时才缩小它（`this.value == this.defaultValue || this.value == ''`在`blur`事件中添加一些测试）。

# python - Localhost is not refreshing/reseting

> ID：10575184
> 
> 赞同：0
> 
> 时间：2012-05-13T20:57:04.437
> 
> 标签：python, google-app-engine

I am absolute beginner using google app engine with python 2.7\. I was successful with creating helloworld app, but then any changes I do to the original app doesn't show in localhost:8080\. Is there a way to reset/refresh the localhost. I tried to create new projects/directories with different content but my localhost constantly shows the old "Hello world!" I get the following in the log window:

> WARNING 2012-05-13 20:54:25,536 rdbms_mysqldb.py:74] The rdbms API is not available because the MySQLdb library could not be loaded.
> WARNING 2012-05-13 20:54:26,496 datastore_file_stub.py:518] Could not read datastore data from c:\users\tomek\appdata\local\temp\dev_appserver.datastore
> WARNING 2012-05-13 20:54:26,555 dev_appserver.py:3401] Could not initialize images API; you are likely missing the Python "PIL" module. ImportError: No module named _imaging

Please help...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:03:23.167

这些警告不应阻止您看到新的“内容”，它们只是意味着您缺少一些运行本地版本的 CloudSQL (MySQL) 和图像 API 所必需的库。

首先要做的是尝试清除浏览器缓存。您对 Hello World 应用程序进行了哪些更改？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:34:09.537

在浏览器中按 CTRL-F5，同时在页面上。强制缓存刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-29T23:51:59.960

您可以尝试打开 DOM 阅读器（Mac：alt+command+i，Windows：shift+control+i）重新加载页面。这很奇怪，但它对我有用。

# python - 在 python 中独立使用 sage 函数

> ID：10575190
> 
> 赞同：6
> 
> 时间：2012-05-13T20:58:10.423
> 
> 标签：python, sage

sage，latex 中有一个函数，我想直接从命令行中使用它，而不需要将 sage 客户端放入 sage。我认为这可能的一种方法是将 sage 模块包含到我的 python 脚本中。

使用 pip install sage 不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T15:59:46.023

您不能将 Sage 安装为带有包的包，并且 Sage 中有大量非 Python 代码，因此很难先验地做到这一点。

但是，您可以很容易地从脚本中调用 Sage。 [这](http://ask.sagemath.org/question/646/using-sage-in-a-python-cgi-script)是一个例子。

对于任何发现这一点的人，通常[ask.sagemath.org](http://ask.sagemath.org)将是一种更快的方式来获得响应——我什至不知道 stackoverflow**有**一个 Sage 标签。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T22:30:27.853

**是的，但前提**是您使用*与 Sage 捆绑的特殊版本的 Python*运行脚本。

来自 Sage 的文档[http://www.sagemath.org/doc/faq/faq-usage.html#how-do-i-import-sage-into-a-python-script](http://www.sagemath.org/doc/faq/faq-usage.html#how-do-i-import-sage-into-a-python-script)

> 您可以将 Sage 作为 Python 脚本中的库导入。需要注意的是，您需要使用与 Sage 捆绑的 Python 版本来运行该 Python 脚本；目前是 Python 2.6.x。要导入 Sage，请将以下内容放入您的 Python 脚本中：
> 
> ```
> from sage.all import * 
> ```

# xml - Notepad ++ XML自动完成/添加结束标记？

> ID：10575195
> 
> 赞同：7
> 
> 时间：2012-05-13T20:58:45.290
> 
> 标签：xml, autocomplete, notepad++

在 Notepad++（最新版本 6.1.2）中，是否有 XML 的自动完成功能（就自动添加结束标签而言）？

比如打字的时候

```
<test> 
```

我希望 Notepad++ 自动添加

```
</test> 
```

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-28T04:13:48.037

首先，使用插件管理器下载 TextFX 插件

```
Plugins > Plugin Manager 
```

然后选择以下菜单

```
TextFX > TextFXSettings > Autoclose XHTML/XML <Tag> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-07-08T16:19:20.643

对于较新版本的记事本++，请尝试

```
Preferences > Auto Completion > Auto Insert > html/xml close tag 
```

请注意，文件扩展名必须`.xml, .html, etc.`为激活此功能。我不确定何时引入此功能，但它在 v6.7.9 中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-24T21:30:28.773

`XML Tools`从`Plugin Manager`也可以做到这一点。然后一旦下载插件，`Tag auto-close`勾选`Plugins > XML Tools`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-15T18:12:11.190

我知道最近的版本中包含一个 HTML 插件，它会为您关闭一些标签。但我还没有听说过 XML 的。如果你看的话，可能有一个。但如果没有，使用 C# 编写插件并不难，如果你有的话。

# jquery - 带有asp.net mvc的fullcalendar不显示从数据库中获取的事件

> ID：10575197
> 
> 赞同：3
> 
> 时间：2012-05-13T20:58:53.837
> 
> 标签：jquery, asp.net-mvc, json, asp.net-mvc-3, fullcalendar

我正在尝试从我的数据库中获取事件并用这些事件填充完整日历。事件没有显示。虽然当我在我的控制器中创建用于测试的事件时，它们正在显示

**控制器：在这种情况下没有显示事件**

```
 public JsonResult getEvents()
    {
        UserProfile user = getUserProfile();
        List<Calendar> events = db.Calendars.Where(c => c.userID == user.userID).ToList();
        IList<calendarPost> tasksList = new List<calendarPost>();
        foreach (Calendar eve in events)
        {
            tasksList.Add(new calendarPost
            {
                id = eve.recordID,
                title = eve.recordDescription,
                start = ToUnixTimespan(eve.startTime),
                end = ToUnixTimespan(eve.endTime),
                url = "www.google.com"
                //      });
                // }
            });
        }
        return Json(tasksList.ToArray(), JsonRequestBehavior.AllowGet); 
```

**如果我这样做，事件将在哪里显示：**

```
public JsonResult getEvents()
    {
       UserProfile user = getUserProfile();
       List<Calendar> events = db.Calendars.Where(c => c.userID == user.userID).ToList();
        IList<calendarPost> tasksList = new List<calendarPost>();
  //      foreach (Calendar eve in events)
    //    {
        tasksList.Add(new calendarPost
        {
            id = 5,
            title = "test",
            start = ToUnixTimespan(DateTime.Now.AddHours(1)),
            end = ToUnixTimespan(DateTime.Now.AddHours(2)),
            url = "www.google.com"
            //      });
            // }
        });
        return Json(tasksList.ToArray() , JsonRequestBehavior.AllowGet);

    } 
```

是的，顺便说一句，两者都产生相同的 Json 输出

```
[{"id":5,"title":"test","start":1336945877,"end":1336949477,"url":"www.google.com","backgroundColor":null}]

[{"id":1,"title":"Testing the Calendar","start":1349384400,"end":1352062800,"url":"www.google.com","backgroundColor":null},{"id":3,"title":"Testing Votes","start":1325748600,"end":1325752200,"url":"www.google.com","backgroundColor":null}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:39:01.157

您可以尝试添加一个 jsonresponse.ashx（处理程序）文件并将以下代码添加到该文件中，

jsonresponse.ashx

```
using System;
using System.Web;
using System.Collections;
using System.Collections.Generic;
using System.Web.SessionState;

public class JsonResponse : IHttpHandler, IRequiresSessionState 
{

public void ProcessRequest(HttpContext context)
{

DateTime start = new DateTime(2012, 4, 1);
DateTime end = new DateTime(2012, 4, 30);              

String result = String.Empty;

result += "[";

List<long> idList = new List<long>();

List<Calendar> events = db.Calendars.Where(c => c.userID == user.userID).ToList();

foreach (Calendar eve in events)
        {
            result += convertCalendarEventIntoString(eve);
            idList.Add(eve.id);
        }

 if (result.EndsWith(","))
    {
        result = result.Substring(0, result.Length - 1);
    }

    result += "]";
    //store list of event ids in Session, so that it can be accessed in web methods
    context.Session["idList"] = idList;

    context.Response.Write(result);

}

private String convertCalendarEventIntoString(CalendarEvent cevent)
{
    String allDay = "true";
    if (ConvertToTimestamp(cevent.start).ToString().Equals(ConvertToTimestamp(cevent.end).ToString()))
    {

        if (cevent.start.Hour == 0 && cevent.start.Minute == 0 && cevent.start.Second == 0)
        {
            allDay = "true";
        }
        else
        {
            allDay = "false";
        }
    }
    else
    {
        if (cevent.start.Hour == 0 && cevent.start.Minute == 0 && cevent.start.Second == 0
            && cevent.end.Hour == 0 && cevent.end.Minute == 0 && cevent.end.Second == 0)
        {
            allDay = "true";
        }
        else
        {
            allDay = "false";
        }
    }
    return    "{" +
              "id: '" + cevent.id + "'," +
              "title: '" + HttpContext.Current.Server.HtmlEncode(cevent.title) + "'," +
              "description: '" + HttpContext.Current.Server.HtmlEncode(Convert.ToString(cevent.description)) + "'," +
              "start:  " + ConvertToTimestamp(cevent.start).ToString() + "," +
              "end: " + ConvertToTimestamp(cevent.end).ToString() + "," +
              "allDay:" + allDay + "," +
              "description: '" + HttpContext.Current.Server.HtmlEncode(cevent.description) + "'," +                  
              "url: '" + HttpContext.Current.Server.HtmlEncode(cevent.url) + "'" +
              "},";
}

private long ConvertToTimestamp(DateTime value)
{

    long epoch = (value.ToUniversalTime().Ticks - 621355968000000000) / 10000000;
    return epoch;

}
} 
```

# sql-server - 我可以使用递归 cte 来扩展分区吗？

> ID：10575201
> 
> 赞同：2
> 
> 时间：2012-05-13T20:59:30.330
> 
> 标签：sql-server, sql-server-2008-r2

我正在处理一个我认为需要递归的查询。在这种情况下，我不太清楚基本情况以及如何构建它。我有股票市场数据，我想比较按日期降序排列的移动平均线，并按两个移动平均线之间差异的符号比较行号/分区（以及根据 cte 的符号和周期值）。我使用一列 0 和 1 来帮助确定分区。对于标准分区，如果一组行的值为 0，则结​​果切换为 1，然后返回 0，所有 0 都被分区在一起。我在结果集中需要的是一个新的分区，用于从 0 到 1 的每个更改，反之亦然。我添加了我现在拥有的代码（不返回第二列，添加它是为了显示我想要的输出）和一些示例数据，我到目前为止在下面，

```
WITH allData AS
(
    SELECT t1.Symbol, t.TradingDate AS TradeDate, t1.Period AS FastPeriod, t2.Period AS SlowPeriod, 
    t1.Value AS FastValue, t2.Value AS SlowValue, (t1.Value - t2.Value) AS SlowFastDiff,
    CASE 
        WHEN (t1.Value - t2.Value) < 0 THEN 0
        ELSE 1
    END AS ChgSign
    FROM tblTradingDays t RIGHT JOIN tblDailySMA t1 ON t.TradingDate = t1.TradeDate JOIN tblDailySMA t2 ON 
        t1.Symbol = t2.Symbol AND t1.TradeDate = t2.TradeDate
    WHERE t1.Period < t2.Period AND t1.Symbol < 'AC'
)

SELECT DENSE_RANK() OVER (ORDER BY Symbol, FastPeriod, 
    SlowPeriod) AS RowNOuter, Symbol, TradeDate, FastPeriod, SlowPeriod, FastValue, SlowValue, 
    SlowFastDiff, ChgSign
FROM allData
ORDER BY Symbol, FastPeriod, SlowPeriod, TradeDate DESC, RowNInner 
```

示例结果集（第二列是我所寻求的）：

```
RowNOuter   RowNInner     Symbol    TradeDate   FastPeriod  SlowPeriod  FastValue   SlowValue   SlowFastDiff    ChgSign
1           1             A         5/11/2012   5           10          40.05       41.166      -1.116           0
1           2             A         5/10/2012   5           10          40.362      41.477      -1.115           0
1           3             A         5/9/2012    5           10          40.856      41.702      -0.846           0
1           1             A         5/8/2012    5           10          42.018      41.78       0.238            1
1           2             A         5/7/2012    5           10          42.282      41.821      0.461            1
1           1             A         5/6/2012    5           10          41.542      41.797      -0.255           0
1           2             A         5/5/2012    5           10          41.36       41.778      -0.418           0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:42:50.717

如果我没有遗漏任何东西，这可以在没有递归 CTE 的情况下解决。

思路如下：

1.  按（我猜）`(Symbol, FastPeriod, SlowPeriod)`的降序排列每个分区中的行。`TradeDate`

2.  对每个分区内的行进行排名`(Symbol, FastPeriod, SlowPeriod, ChgSign)`（同样，按 的降序排列`TradeDate`）。

3.  找出两个排名之间的差异。这将是最终划分的附加标准。

4.  现在您可以再次对行进行排名，将它们划分为`(Symbol, FastPeriod, SlowPeriod, ChgSign, RankDiff)`.

以下是生成的查询可能的样子：

```
WITH allData AS
(
    SELECT
        t1.Symbol,
        TradeDate    = t.TradingDate,
        FastPeriod   = t1.Period,
        SlowPeriod   = t2.Period,
        FastValue    = t1.Value,
        SlowValue    = t2.Value,
        SlowFastDiff = (t1.Value - t2.Value),
        ChgSign      = CASE WHEN t1.Value < t2.Value THEN 0 ELSE 1 END
    FROM tblTradingDays t
        RIGHT JOIN tblDailySMA t1 ON t.TradingDate = t1.TradeDate
        INNER JOIN tblDailySMA t2 ON t1.Symbol     = t2.Symbol
                                 AND t1.TradeDate  = t2.TradeDate
    WHERE t1.Period < t2.Period
      AND t1.Symbol < 'AC'
)
,    partitioned AS (
    SELECT
        RowOuter = DENSE_RANK() OVER (ORDER BY Symbol, FastPeriod, SlowPeriod),
        **RankDiff = ROW_NUMBER() OVER (
                       PARTITION BY Symbol, FastPeriod, SlowPeriod
                       ORDER BY TradeDate DESC
                   )
                 - ROW_NUMBER() OVER (
                       PARTITION BY Symbol, FastPeriod, SlowPeriod, ChgSign
                       ORDER BY TradeDate DESC
                   ),**
        Symbol,
        TradeDate,
        FastPeriod,
        SlowPeriod,
        FastValue,
        SlowValue, 
        SlowFastDiff,
        ChgSign
    FROM allData
)
SELECT
    RowOuter,
    **RowInner = ROW_NUMBER() OVER (
       PARTITION BY Symbol, FastPeriod, SlowPeriod, ChgSign, RankDiff
       ORDER BY TradeDate DESC
    ),**
    Symbol,
    TradeDate,
    FastPeriod,
    SlowPeriod,
    FastValue,
    SlowValue, 
    SlowFastDiff,
    ChgSign
FROM partitioned
ORDER BY Symbol, FastPeriod, SlowPeriod, TradeDate DESC, RowNInner 
```

# facebook - 使用 PHP Facebook 客户端库获取用户的位置

> ID：10575202
> 
> 赞同：1
> 
> 时间：2012-05-13T20:59:33.577
> 
> 标签：facebook, location

我正在为我的 fb 应用程序使用 PHP Facebook 客户端库，我想知道如何获取有关授权我的应用程序的用户的信息。例如，如何获取他们的位置、年龄或其他可用信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T09:37:23.747

您需要获取该用户的访问令牌，然后：

```
$graph_url = "https://graph.facebook.com/me?access_token=" . $access_token; 
```

它返回用户数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:39:05.600

需要通过授权url请求这些参数：user_location, user_about_me....

阅读更多内容： [https ://developers.facebook.com/docs/](https://developers.facebook.com/docs/)

# geolocation - 地理位置和 Wordpress：邻近搜索的最佳插件？

> ID：10575207
> 
> 赞同：2
> 
> 时间：2012-05-13T20:59:49.660
> 
> 标签：geolocation, wordpress

用例

1.  搜索“类别”以查找“您的地址”附近的地点（见表格截图： http: [//o7.no/KYCj6v](http://o7.no/KYCj6v)）

2.  用户获得这样的 SERP：

    1,2 英里 - 意大利餐厅 Pippo

    2,7 英里 - 中餐厅

    ETC

问题

你知道一个有效的插件吗？即：注册和解析邮政地址，解析用户插入的地址，计算距离，生成SERP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T15:21:28.787

Www.geomywp.com 可以做到这一点，还有更多

# c - 了解多核 SMP 系统

> ID：10575208
> 
> 赞同：4
> 
> 时间：2012-05-13T20:59:53.603
> 
> 标签：c, linux, multithreading, multicore

我试图了解**多核系统是如何工作的，以及如何为具有****多核**的系统编写高效的程序。我知道这是一个非常困难的话题，但我对可能的最快解决方案非常感兴趣。

首先，我试图了解线程是如何工作的。很明显，在大多数情况下，多线程可以显着提高性能。根据[this](http://en.wikipedia.org/wiki/Thread_%28computing%29) page，这就是多线程的工作方式：

![在此处输入图像描述](../Images/4fa933abe7381eb76e375e56c6b316bd.png)

**但是为什么在N**个线程之间切换比一个接一个地运行**N**个线程要快呢？线程如何在只有一个 CPU 的系统上工作？

接下来，**多核编程有什么意义**？我认为重点是在内核之间拆分线程并在它们之间拆分任务？但是我怎样才能在 4 个 CPU 的系统上平均分割 8 个线程呢？

我是否必须使用[处理器关联](http://en.wikipedia.org/wiki/Processor_affinity)( **cpu_affinity** ) 在 CPU 之间拆分**线程/进程**？我可以在具有 4 个 CPU 的系统上使用**pthread_create**创建 4 个线程以在每个 CPU 上运行每个线程吗？

[超线程](http://en.wikipedia.org/wiki/Hyper-threading)如何提供帮助以及它是否有帮助？我们如何将**CPU 缓存**编程用于多核系统？

为什么对于像 MySQL 这样的大型旧项目来说，充分利用多 CPU 系统的优势如此困难？

我对这个问题的理论以及**Linux**系统的实际解决方案/示例/项目/书籍/文章（使用 C）感兴趣。

我知道这是一个越来越重要的话题，我希望我不仅仅是一个感兴趣的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T21:06:07.257

切换 N 个线程和一个一个地运行 N 个线程之间的区别在于，当一个线程暂时无法进一步向前推进时会发生什么。如果你切换 N 个线程并且其中一个线程暂时无法向前推进，比如说它正在等待从磁盘读取数据，另一个线程可以向前推进。如果您完全按顺序运行它们，那么当线程等待磁盘 I/O 完成时，CPU 将被浪费。

超线程可以帮助您更充分地利用 CPU 核心执行资源。例如，如果一个线程没有进行任何浮点数学运算，那么该内核的浮点单元就被浪费了。使用超线程，另一个线程可以使用这些执行单元。

在典型的现代内核上，操作需要许多时钟周期，并且一次有许多操作正在进行。这意味着一个核心通常有许多额外的执行资源，它在任何特定时刻都无法使用。超线程允许使用更高百分比的执行资源（桶式移位器、加法器、逻辑单元、分支单元等）。通常，超线程可以将性能提高 10% 到 15%。好处并没有更大，因为线程还互相窃取执行资源，污染彼此对缓存的使用，等等。

CPU 缓存是自动使用的，您通常不需要做任何特别的事情来使用它。也许最常见的例外是处理虚假共享或缓存乒乓。

# tumblr - Tumblr 错误地以视频帖子类型输出音频帖子

> ID：10575209
> 
> 赞同：0
> 
> 时间：2012-05-13T21:00:20.960
> 
> 标签：tumblr

~~在我的博客上~~，我为这个错误创建了[特殊的 tumblr 博客（测试用例）](http://audioinvideobug.tumblr.com/)，我只处理两种帖子类型：视频和文本，并相应地编写了我的主题。尽管如此，Tumblr 还显示音频帖子，这是与视频帖子[不同的帖子类型](http://www.tumblr.com/docs/en/custom_themes#posts)，如何解决这个问题？

这是在视频帖子块中显示的 Spotify 音频嵌入的图片： [视频和音频帖子的错误输出 http://i.imm.io/pdu2.png](http://i.imm.io/pdu2.png)

这是[pastebin.com 上的完整标记](http://pastebin.com/n3010tQH)

一些简单的标记来测试：

```
{block:Posts}
    <li> <article class="{PostType} {TagsAsClasses}">
    {block:Text}
        …
        <p><b>hardcoded post type: text</b></p>
        <p><b>tumblr post type: {PostType}</b></p>
    {/block:Text}

    {block:Video}
        …
        <p><b>hardcoded post type: video</b></p>
        <p><b>tumblr post type: {PostType}</b></p>
    {/block:Video}
    </article> </li>
{/block:posts} 
```

确认错误：

![在此处输入图像描述](../Images/d512958cdfe744541bbfbd3ed63e16a8.png)

**更新：**我在官方 tumblr 主题[谷歌组中](https://groups.google.com/forum/?hl=ru&fromgroups#!forum/tumblr-themes)[复制](https://groups.google.com/d/topic/tumblr-themes/FfqJ9mjyFr0/discussion)了这篇关于这个错误的帖子并写信给 tumblr 支持，我的票号是**852138**

**更新 2：** [特别博客](http://audioinvideobug.tumblr.com/)为此错误创建的

**更新 3：** Tumblr 回答：

> 我们将尽最大努力确保问题尽快得到解决。非常感谢您的考虑和理解！（票号852138）
> 
> 我无法告诉您我们多么感谢您的支持和反馈。我已将您的信息传递给我们的团队。（票号852136）

有两张票，因为我很惊讶，当我的第一条支持消息被切断时，我发送了第二条消息，只有这个问题的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:13:26.010

Spotify 嵌入是“始终”的视频。但是，tumblr 将其写为音频帖子。如果您想将Spotify 嵌入到音频帖子中，您需要在{block:Audio} 标签中添加此代码。

```
{block:AudioEmbed}{AudioEmbed}{/block:AudioEmbed} 
```

希望它对你有所帮助。:)

# java - 类型不匹配：无法从 ArrayList 转换为 List

> ID：10575212
> 
> 赞同：13
> 
> 时间：2012-05-13T21:00:31.647
> 
> 标签：java

我只有这个，但我的编译器说：类型不匹配：无法从 ArrayList 转换为 List 那么有什么问题可以告诉我吗？我正在使用 Elipse Java EE IDE。

```
import java.awt.List;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;

public class Main {
    public static void main(String[] args) {
        List list = new ArrayList();

    }
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-13T21:02:38.590

不正确的导入，它必须是`java.util.List`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-13T21:02:59.200

您已导入`java.awt.List`AWT 包中的列表控件，而不是`java.util.List`表示元素列表的集合类。因此，Java 认为您正在将值的逻辑数组列表转换为小部件，这没有任何意义。

将导入行更改为

```
import java.util.List; 
```

应该解决这个问题，就像写作一样

```
java.util.List list = new ArrayList(); 
```

明确表明您想要一个集合。

也就是说，您还应该在这里使用泛型。使用原始集合类型早已被弃用。最好的答案是写类似

```
List<T> list = new ArrayList<T>(); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-13T21:02:05.017

您需要导入`java.util.List`而不是`java.awt.List`.

您可能还想使用类型参数而不是原始类型。例如，如果列表要保存`String`值：

```
List<String> list = new ArrayList<>(); 
```

或者，在 Java 7 之前：

```
List<String> list = new ArrayList<String>(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-13T21:02:27.450

因为`java.util.ArrayList`延伸`java.util.List`，不是`java.awt.List`。您正在导入错误的类：

```
import java.awt.List; 
```

对比

```
import java.util.List; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-13T21:13:25.863

正如其他人所说，这是一个导入错误。由于您使用的是 Eclipse EDE，如果出现错误，请将光标保持在该位置并按`Ctrl + 1`，它会为您显示可能帮助您修复错误的建议。

# php - Smarty 没有选择正确的模板来显示

> ID：10575213
> 
> 赞同：0
> 
> 时间：2012-05-13T21:00:56.710
> 
> 标签：php, smarty

我昨天在一个网站上工作，一切都很好。我正在移植它以使用 Smarty。我有最后一页要更改，不需要任何测试，因为 Smarty 模板文件并没有真正做太多。我保存了我的工作，关闭了所有内容，然后离开了。今天早些时候，我检查了该网站，发现它已经失控了。它为除一页之外的所有页面显示不正确的模板。我从未对服务器设置进行任何更改，因此这不是问题。以前可以完美运行的页面不再有效。我已经对我的工作进行了五次检查，但看不出哪里出了问题。为了不发布我拥有的所有内容，我将分享您想查看的任何我的代码。只需发表评论，我将进行编辑。有什么想法可能会出错吗？我正在使用 Smarty 3.1.8 和 PHP 5.3.3。

[现场直播](http://bama.ua.edu/~tscrompton/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:41:43.200

发生混淆是因为（几乎）所有模板都被命名为相同的东西。根据[这个线程](http://www.smarty.net/forums/viewtopic.php?p=67250 "多个同名模板")，我发现当 Smarty 编译模板时，它只考虑文件名，而不是该文件的完整路径。因此，您必须指定一个编译 ID，为此最好将其作为当前执行脚本的父目录。如果只使用`__FILE__`常量，如果在同一个目录中使用多个脚本来显示同一个模板，最终可能会导致同一个模板的多次编译。所以我使用`dirname(__FILE__)`我的编译 ID，它*应该*适用于每个人。

# javascript - 如何在 $.post jQuery 中等待响应

> ID：10575214
> 
> 赞同：6
> 
> 时间：2012-05-13T21:00:59.767
> 
> 标签：javascript, jquery, ajax, post

PHP 以 1-2 秒的延迟返回值 jQuery.post 不等待响应。

您如何看待，是否有可能解决该问题并等待响应？

```
 $.post( sSource, aoData, function (data) {    
        oCache.lastJson = jQuery.extend(true, {}, data);
        if ( oCache.iCacheLower != oCache.iDisplayStart )
        {
            data.aaData.splice( 0, oCache.iDisplayStart-oCache.iCacheLower );
        }
        data.aaData.splice( oCache.iDisplayLength, data.aaData.length );
         abc(oCache);
        fnCallback(data); 
    },"json" ); 
```

*请注意*与 get 相同的功能效果很好

```
 $.getJSON( sSource, aoData, function (json) { 
        /* Callback processing */
        oCache.lastJson = jQuery.extend(true, {}, json);

        if ( oCache.iCacheLower != oCache.iDisplayStart )
        {
            json.aaData.splice( 0, oCache.iDisplayStart-oCache.iCacheLower );
        }
        json.aaData.splice( oCache.iDisplayLength, json.aaData.length );

        fnCallback(json)
    } ); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-13T21:05:53.053

$.post 是异步的，你需要使用 $.ajax 并将 async 设置为 false，这样你就可以等待响应。你可以在这里阅读更多关于它的信息：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# html - 上面的空间是怎么回事元素？

> ID：10575220
> 
> 赞同：0
> 
> 时间：2012-05-13T21:01:44.473
> 
> 标签：html, css

我有一个带有一些文本的跨度，它下面应该是一个文本区域和一个大方形按钮，并排。文本区域和跨度之间或按钮和跨度之间不应有*垂直空间。*textarea 看起来很完美。然而，该按钮上方有大约 15-20 像素的空白空间，因此它看起来比文本区域低很多，而不是整齐地排列。我告诉它将填充和边距设置为 0px，那么 F 是什么？

```
<span class="notice">
Logged in as "ladygaga" (type message and hit ENTER or click SEND)
</span>

<textarea id="messagebox">
</textarea>
<button id="send">SEND</button> 
```

和CSS：

```
#messagebox
{
width:300px;
height:40px;
background-color:white;
border:2px;
border-style:solid;
border-color:green;
overflow:auto;
resize:none;
}

#send
{
margin:0px;
padding:0px;
font-size:14px;
height:40px;
width:50px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T21:04:56.810

这个：

```
#send {
    vertical-align: top; 
} 
```

**现场演示：http:** [//jsfiddle.net/YSHmE/2/](http://jsfiddle.net/YSHmE/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-20T17:28:53.917

我使用*了 vertical-align: top*，但它仍然有空格。使用*display: block*解决问题，没有空格。

# html - 在网站上显示电子邮件的 html 正文

> ID：10575223
> 
> 赞同：3
> 
> 时间：2012-05-13T21:02:15.443
> 
> 标签：html, css, email

我已将电子邮件正文的 html 保存到我的数据库中。现在我想在网站上显示这个 html。唯一的问题是，有些邮件的 css 定义会覆盖我网站上的整个定义。如何在不覆盖我的 html/css 的情况下显示这些邮件？

谢谢 rk

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T21:04:48.640

我建议使用 iframe，或者重写你的 css .. 对不起，伙计！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T21:08:26.660

在您的 CSS 中使用 !important 规则，有关详细信息，请参阅[http://www.w3.org/TR/CSS21/cascade.html#important-rules 。](http://www.w3.org/TR/CSS21/cascade.html#important-rules)

例子：

```
​#test {border:1px solid green!important}

​#test {border:1px solid red}​ 
```

这个元素应该有一个绿色边框。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T21:16:34.610

in my experience with emails, i'm going to assume those declarations are written inline....your best bet is to strip them out. you could try to override them with super long chain selectors, like putting a class on your html element and your body element, while also applying the !important value that @jeff said.

# clojure - 在 Clojure 中使用 ns-resolve 调用函数时是否存在性能损失？

> ID：10575228
> 
> 赞同：2
> 
> 时间：2012-05-13T21:02:30.643
> 
> 标签：clojure

这行得通，但我很好奇动态传递命名空间并使用 ns-resolve 解析它的性能损失是什么......

```
(ns bulbs.vertices)

(defn create
  [config data]
  ((ns-resolve (:ns config) 'create-vertex) config data)) 
```

然后这样称呼它...

```
(ns bulbs.neo4jserver.graph
  (:require [bulbs.vertices :as vertices])
  (:require [bulbs.neo4jserver.client :as client]))

(defn graph
  [& [config]]
  (let [config (client/build-config config {:ns 'bulbs.neo4jserver.client})]
    (fn [func & args]
      (apply func config args))))

(def g (graph))

(g vertices/create {:name "James"}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T23:32:38.457

除非您`ns-resolve`是循环的一部分（除非您需要在每次迭代中动态解析不同的函数，否则绝对不需要这样做），我不会担心性能损失。

但是，是的，有性能损失：

```
user=> (time (dotimes [n 1000000] (let [f (ns-resolve 'clojure.core 'inc)] (f n))))
"Elapsed time: 175.386 msecs"
nil
user=> (time (dotimes [n 1000000] (let [f inc] (f n))))
"Elapsed time: 27.022 msecs"
nil 
```

如果您真的*真的*需要`ns-resolve`魔法（但请参阅对您的[其他问题](https://stackoverflow.com/questions/10572443/how-do-you-explicitly-specify-a-namespace-when-using-apply-on-a-function-in-cl)的回复，阻止您在特定情况下执行此操作），并且如果您正在解析的函数在循环中使用，请从该循环中取出解析：

```
user=> (time (let [f (ns-resolve 'clojure.core 'inc)] (dotimes [n 1000000] (f n))))
"Elapsed time: 48.538 msecs"
nil 
```

# c++ - 我可以将 CUDA 与 G++ 的 C++ 程序一起使用吗？还是只能用 GCC 编译 CUDA？

> ID：10575236
> 
> 赞同：0
> 
> 时间：2012-05-13T21:03:05.293
> 
> 标签：c++, c, cuda, g++, nvidia

我还没有达到将我的程序与 CUDA 并行的阶段，但是我使用 C++ 而不是 C，我担心我的程序是否不能使用 CUDA 编译！

有人可以找到这笔交易的证据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T21:11:45.903

This is a common question about CUDA. You can compile device code with nvcc to object file then link in using g++.

For more information see [this post](https://stackoverflow.com/questions/9363827/building-gpl-c-program-with-cuda-module), for example.

# xml - 输入xml开始标签时自动添加结束标签？

> ID：10575237
> 
> 赞同：2
> 
> 时间：2012-05-13T21:03:06.393
> 
> 标签：xml, eclipse, autocomplete

我正在使用 Eclipse 3.7.2，在编辑 XML 文件并输入例如

```
<test> 
```

我希望 Eclipse 自动添加

```
</test> 
```

但事实并非如此。这是默认行为吗？我可以启用 XML 的自动完成选项吗？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T21:09:08.130

可能您没有正确设置 XML 编辑器。您应该设置默认 XML 编辑器。转到 Eclipse 设置：

```
Windows > Preferences > General > Editors > File Associations 
```

并从适用于 XML 语法的现有关联编辑器列表中选择 XML 文件 (*.xml) 的默认编辑器。标记一下，如果没有显示 *.xml 文件类型，您应该自己添加该条目。

如果它不起作用，您可以使用 XML 插件，例如：[Rinzo XML](http://editorxml.sourceforge.net/)

您还可以从包资源管理器中选择文件编辑器。为此，单击文件并：

```
Open with 
```

然后选择合适的编辑器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:54:10.927

据我记得，如果您键入`</`eclipse 会自动填充结束标记。

# android - Android BroadcastReceiver 还是简单的回调方法？

> ID：10575239
> 
> 赞同：57
> 
> 时间：2012-05-13T21:03:30.887
> 
> 标签：android, multithreading, callback, broadcastreceiver

在我的项目中，我使用`BroadcastReceiver`s 作为来自长时间运行线程的回调（例如，通知活动下载已完成并从 Worker 发送一些响应数据，`Thread`以便活动可以向用户显示适当的消息..）。要使用`BroadcastReceiver`s，我每次使用它时都必须小心注册和取消注册广播接收器，并且当我使用此方法进行更多不同的操作（如下载、进行 WebService 调用等）时，还必须特别注意要发送哪些消息..)。并且还通过广播的意图发送自定义对象，我还需要制作对象`Parcelable`。

与这种方法不同，我还看到了似乎比我使用的方法更简单的回调方法方法。回调方法是简单的接口方法实现，可用于实现与应用程序消息传递中的 BroadcastRecaiver 相同的效果。这种方法不需要 Parcelable 实现来返回复杂的对象，它不使用像`BroadcastReceiver`.. 这样的键。我认为不好的部分是我需要在调用回调方法之前检查回调对象的 null 值。和还要确保我在 UI 线程上运行来自实现的代码，这样我就可以更新 UI 而不会出错。

好的，我希望你明白我的意思:)。

现在的问题是，您认为回调方法是否比`BroadcastReceiver`仅在单个应用程序内部使用的方法更好（更轻、更干净、更快..）？（请注意，我没有将 Android`Service`用于后台工作.. 只是`AsyncTask`和`Thread`s）

谢谢！

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-05-20T10:31:13.623

这是一个非常有趣的问题，我遇到了同样的问题。在我看来，这两种机制都可以完全使用，正确的使用方法取决于您的用例。以下是在决定之前需要考虑的一些要点。

使用回调机制有一些好处，但也有一些限制：

专业版

*   实施起来简单直接。
*   您可以在相互交互的组件之间获得类型安全。
*   您可以返回任意对象。
*   它简化了测试，因为您只需要在单元测试中注入一个模拟回调（例如通过 mockito 或类似的东西生成）。

反对

*   您必须切换到主线程才能进行 UI 操作。
*   您只能建立一对一的关系。如果没有进一步的工作，1 对 n 关系（观察者模式）是无法实现的。在这种情况下，我更喜欢 Android 的`Observer`/`Observable`机制。
*   `null`正如您已经说过的，如果回调可能是可选的，您总是必须在调用回调函数之前进行检查。
*   如果您的组件应该提供一种具有不同服务功能的服务 API，并且您不希望只有几个通用回调函数的回调接口，您必须决定是否为每个服务函数提供特殊的回调接口，或者是否提供具有大量回调函数的单个回调接口。在后一种情况下，所有用于对 API 进行服务调用的回调客户端都必须实现完整的回调接口，尽管大多数方法主体都是空的。您可以通过实现一个带有空主体的存根来解决此问题，并使您的回调客户端从该存根继承，但如果已经从另一个基类继承，这是不可能的。也许你可以使用某种动态代理回调（见[http://developer.android.com/reference/java/lang/reflect/Proxy.html](http://developer.android.com/reference/java/lang/reflect/Proxy.html)），但它变得非常复杂，我会考虑使用另一种机制。
*   如果服务调用者不能直接访问回调调用的客户端，则必须通过各种方法/组件进行传播。

关于 - 方法的一些要点`BroadcastReceiver`：

专业版

*   您实现了组件之间的松散耦合。
*   你可以有一个 1 对 n 的关系（包括 1 对 0）。
*   该`onReceive()`方法始终在主线程上执行。
*   您可以通知整个应用程序中的组件，因此通信组件不必“看到”彼此。

反对

*   这是一种非常通用的方法，因此对传输的数据进行编组和解组`Intent`是一个额外的错误源。
*   `Intent`如果您想消除与其他应用程序的相关性，您必须使您的操作独一无二（例如，通过在包名称前添加），因为它们的最初目的是在应用程序之间进行广播。
*   您必须管理`BroadcastReceiver`-registration 和 unregistration。如果您想以更舒适的方式执行此操作，您可以实现自定义注释以使用应注册的操作来注释您的 Activity 并实现一个基类，该基类在其相应的 s 中进行`Activity`注册和注销。方法。`IntentFilter``onResume()``onPause()`
*   `Intent`正如您已经说过的，`Parcelable`使用`Intent`. 有关该问题的讨论，请参阅[http://code.google.com/p/android/issues/detail?id=5878 。](http://code.google.com/p/android/issues/detail?id=5878)因此，例如，如果您要发送图像，则必须将它们临时存储在存储库中，并发送相应的 ID 或 URL 以从您的接收者访问图像，从而`Intent`在使用后将其从存储库中删除。如果有多个接收者，这会导致进一步的问题（什么时候应该从存储库中删除图像，谁应该这样做？）。
*   如果您过度使用这种通知机制，您的应用程序的控制流可能会被隐藏，并且在调试时您最终会绘制带有`Intent`s 序列的图形，以了解是什么触发了特定错误或为什么此通知链在某些时候中断。

在我看来，即使是移动应用程序也应该具有至少基于 2 层的架构：UI 层和核心层（包括业务逻辑等）。通常，长时间运行的任务在核心层内的自己的线程中执行（可能是通过`AsyncTask`或`HandlerThread`使用`MessageQueue`s），一旦该任务完成，应该更新 UI。通常，使用回调可以实现组件之间的紧密耦合，因此我更喜欢仅在层内使用这种方法，而不是跨层边界进行通信。对于 UI 层和核心层之间的消息广播，我将使用`BroadcastReceiver`- 方法，让您将 UI 层与逻辑层分离。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-13T21:27:19.863

我看不出你`BroadcastReceiver`在你的情况下使用会得到什么。回调，或者更好的可能`Handlers`是这样做的方式。`BroadcastReceiver`当您不知道订阅者是谁时，这很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T16:15:46.397

我将在您已经收到的其他出色答案中添加另一个选项...

您不必创建广播接收器来接收 Intent。在您的 android 清单文件中，您可以注册任何活动以接收意图：

```
<activity android:name=".MyActivity">
        <intent-filter >
              <action android:name="intent.you.want.to.receive" /> 
              <category android:name="android.intent.category.DEFAULT" /> 
        </intent-filter>     
....
</activity> 
```

然后覆盖`onNewIntent(Intent)`您的活动中的方法以接收它。

要发送 Intent，请使用`Context.startActivity(Intent)`方法。您很可能希望将`FLAG_ACTIVITY_SINGLE_TOP`标志添加到您的 Intent 中，这样它就不会创建您的活动的新实例（如果一个已经在运行）。

编辑：我刚刚注意到您在单个应用程序中运行。因此，一个简单的回调可能是最好的。上面的解决方案确实适用于单个应用程序，但更适合不同的应用程序。我会把它留在这里以防万一它对某人有帮助。祝你好运！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T12:55:15.423

如果您需要跨应用程序发送广播，则应该使用广播接收器，而回调（或 Alex 建议的处理程序）更适合您的情况。

如果您想使用这两个以外的，请考虑使用[Observer](http://developer.android.com/reference/java/util/Observer.html)（android 中包含的接口）和委托。

对于代表，请考虑[这个 SO 帖子](https://stackoverflow.com/questions/5154932/how-to-implement-event-and-delegate-concept-in-android)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T20:30:11.167

不确定目标是什么，但如果您希望保持使用意图和广播接收器的相同想法，并且想要比普通广播接收器更好的性能和安全性，您可以试试这个演示，在 android 支持库中可用：

[http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/content/LocalServiceBroadcaster.html](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/content/LocalServiceBroadcaster.html)

如果没有，您可以随时使用 asyncTask 、 service 、 handlers 等...

# asp.net - 如何将特定电子邮件与 RegEx 匹配

> ID：10575242
> 
> 赞同：-1
> 
> 时间：2012-05-13T21:03:45.817
> 
> 标签：asp.net, regex, email

我想扩展标准的 asp.net 电子邮件正则表达式验证器以排除特定电子邮件。

这是原文：

```
 ValidationExpression="(\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)" 
```

这是我制作的扩展：

```
 ValidationExpression="(\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)|(?!^email\@email\.com$)" 
```

无法弄清楚为什么这不起作用

*Ps 我知道不建议将标准的 asp.net 正则表达式验证器用于电子邮件验证，但对我来说没问题。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:14:29.130

它不起作用，因为您的模式匹配的第一部分，所以它不使用您否定的第二部分。您基本上是在检查*pattern1* **或** *pattern2 是否*匹配。

看看[https://stackoverflow.com/a/271946/832273](https://stackoverflow.com/a/271946/832273)如何创建自己的验证器。这使您可以自己在程序中进行各种不同的检查，而无需将所有内容都放入您的正则表达式中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:19:45.523

```
^(?!^email@email\.com$)[originalregexhere] 
```

这是在匹配开始时进行负前瞻。

完整的例子：

```
ValidationExpression="(?!^email@email\.com$)(\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)" 
```

# pandas - 为什么会有这个 read_fwf() 错误？

> ID：10575251
> 
> 赞同：0
> 
> 时间：2012-05-13T21:05:23.177
> 
> 标签：pandas

当我试图读取固定宽度的文件时，它给了我

```
Exception: Index (columns 0) have duplicated values ['12345'] 
```

问题是，即使我有重复的值，我仍然希望合并数据。怎么能绕过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:09:03.233

尝试`read_fwf()`使用参数调用`index_col=None`来告诉它没有索引列（在所有行中必须是唯一的）——它会自动索引从零开始的整数的行。

# javascript - 动态调整网页上div的高度

> ID：10575252
> 
> 赞同：0
> 
> 时间：2012-05-13T21:05:33.710
> 
> 标签：javascript, html

我基本上在网站上使用 3 列布局。我想要实现的是中间（内容）列的高度调整到右列（侧边栏），所以中间列右侧的边框到达页面底部。此外，我还希望左列将其高度调整为其他列，并在页面底部用背景图像单元填充它。

网站： http: [//www.massageforum.be](http://www.massageforum.be)

这是我到目前为止所做的（panel_left = 带有背景图像的左列，panel_right 是 div 内容（中间列）和侧边栏（右列）的周围 div）：

```
function setDivHeight() {
    //set height of content according to sidebar if content is smaller than sidebar
    var DivHeightSidebar = document.getElementById('sidebar').offsetHeight;
    var DivHeightContent = document.getElementById('content').offsetHeight;

    if(DivHeightContent < DivHeightSidebar)
    {
        document.getElementById('content').style.height = DivHeightSidebar + 'px';
    }           

    //set height of panel_left according to panel_right so background image reaches until bottom of page
    var DivHeight = document.getElementById('panel_right').offsetHeight;
    document.getElementById('panel_left').style.height = DivHeight + 'px';
} 
```

`</body>`在标签之前的每个页面上都会调用此函数。

问题是有时有效，但有时无效。在某些情况下，内容列的高度会调整为侧栏列的高度，尽管它应该更长并且内容不再适合。截图： http: [//www.massageforum.be/Massageforum1.png](http://www.massageforum.be/Massageforum1.png)

此外，有时左列的高度未正确调整为 panel_right 的高度。

我在 Chrome、Firefox 和 Safari 中看到了这种行为；没有测试其他浏览器。

有关如何使此功能更强大的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:21:16.763

用 JavaScript 来做这件事不是一个好主意。只需重构页面并使用 HTML/CSS 完成所有操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:41:49.420

在调用 setDivHeight 之前，您是否检查过文档是否完成了所有元素的加载？如果在元素仍在加载之前/同时调用该函数，则您读取的高度会更小。我还会考虑将包含列的高度设置为等于容器 DIV 高度（id='page2'），它自然地延伸到最长包含的元素。

# java - 替换文件中所有出现的字符串（Java）

> ID：10575253
> 
> 赞同：-1
> 
> 时间：2012-05-13T21:05:40.513
> 
> 标签：java, string, file, io, replace

> **可能重复：**
> [替换字符串中所有出现的子字符串——这在 Java 中更有效？](https://stackoverflow.com/questions/5407592/replace-all-occurrences-of-substring-in-a-string-which-is-more-efficient-in-ja)

我正在尝试用文件中的**四个空格替换所有出现的****\t**（制表符）。我一直在寻找一段时间，但找不到任何有用的东西。

 **我发现我需要创建一个临时文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T21:09:58.357

有一个称为[替换的功能](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)

```
String output = input.replace("\t","    "); 
```

对文件执行此操作创建一个[临时文件](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String,%20java.io.File%29)并为其打开一个[FileWriter](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html)

为原始文件打开[FileReader](http://docs.oracle.com/javase/6/docs/api/java/io/FilterReader.html)

在循环调用`readln()`中，检查 null，`replace("\t"," ")`并`write`在适当的对象上

然后关闭读写器和[`delete()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#delete%28%29)原始文件和[`rename()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#renameTo%28java.io.File%29)临时文件到原始文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:38:06.207

您可以使用[replaceAll](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)方法，如

```
String str = "your string";
String a = "    "; // [4 spaces]
String result = str.replaceAll("\t", a); 
```**

# android - 从 AsyncTask 在 Android 中进行网络会产生 NetworkOnMainThreadException

> ID：10575258
> 
> 赞同：0
> 
> 时间：2012-05-13T21:06:27.423
> 
> 标签：android, android-asynctask, android-networking

我正在尝试为 Android 编写一个简单的聊天应用程序，所以我有一个聊天服务器，我正在尝试连接到它。所以在我的主要课程中

```
final EditText etHost = (EditText) findViewById(R.id.entry1);
final EditText etPort = (EditText) findViewById(R.id.entry2);
final EditText messageBoard = (EditText) findViewById(R.id.editText1);
final EditText etSend = (EditText) findViewById(R.id.editText2);

soEd = new SocketAndEditText(etHost, etPort, messageBoard, etSend);
SetNetworking net = new SetNetworking();
SocketAndEditText net.execute(soEd);
final Button sendButton = (Button) findViewById(R.id.button2);

sendButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Messager mes = new Messager();
                mes.execute(soEd);
            }
        }); 
```

`SocketAndEditText`是一个我只保留套接字和四个`EditText`组件的类。这个想法是`SetNetworking`建立网络连接并`Messager`发送消息。两个类都实现`AsyncTask`：

```
public class SetNetworking extends AsyncTask<SocketAndEditText, Void, Void> {
...

public class Messager extends AsyncTask<SocketAndEditText, Void, Void> {
... 
```

但奇怪的是`onPostExecute(Void result)`，`Messager`当我尝试做一件非常简单的事情时

```
try {
    InetAddress address1 = InetAddress.getByName("130.237.161.23");
    boolean reachable = address1.isReachable(4456);
    messageBoard.setText("Is host reachable?" + reachable);
} catch (Exception e) {
    messageBoard.setText("Test not working! " + e.toString());
} 
```

我明白了：

> 测试不工作！android.os.NetworkOnMainThreadException

为什么因为它在 AsyncTask 中而不是在主线程中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:10:47.127

您不能在`onPostExecute`中进行网络 I/O `AsyncTask`，因为该方法在 UI 线程上运行。您需要在`doInBackground`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:17:50.737

Messager 类的 onPostExecute() 是在主线程上完成的。你也在做网络 IO

> InetAddress.getByName("130.237.161.23");

# php - 将测试用例输入到 TestRail

> ID：10575266
> 
> 赞同：2
> 
> 时间：2012-05-13T21:08:58.763
> 
> 标签：php, http-request, testrail

有人用过TestRail吗？如果是这样，我会很乐意帮助我确定我应该发送的 HTTP 请求的格式，以便创建测试用例。我查看了 TestRail API 的文档，但文档不是很清楚。

我想做的是从 Excel 电子表格中获取信息并将其上传到 TestRail 程序中。有人告诉我，我需要将测试用例的每个部分（标题、预期结果、优先级等）作为 http 请求中的参数传递。我只是在寻找一些澄清。我正在使用 PHP 来做这一切，所以如果你能提供帮助，那将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T16:36:32.520

这里的 TestRail 开发人员之一。您需要按照我们网站上的说明将 API 参数作为 POST 参数提交给 TestRail：

[http://docs.gurock.com/testrail-api/accessing](http://docs.gurock.com/testrail-api/accessing)

也就是说，您可以将 API 密钥作为 URL 的一部分（作为 GET 参数）发送，并提交您想要编写为 POST 参数的所有字段（就像 Web 表单一样）。您可以简单地使用`curl`命令行工具来测试它（您可以在上面提到的链接中找到一个示例），或者您可以使用 PHP 或任何其他 HTTP 框架中的 curl 库来提交请求：

[http://www.electrictoolbox.com/php-curl-form-post/](http://www.electrictoolbox.com/php-curl-form-post/)

我希望这有帮助。

# haskell - 使用 Hindley Milner 和约束 推断递归表达式

> ID：10575268
> 
> 赞同：9
> 
> 时间：2012-05-13T21:09:25.907
> 
> 标签：haskell, functional-programming, type-inference, ml, hindley-milner

我试图推断以下表达式的类型：

```
let rec fix f = f (fix f) 
```

应该给出类型`(a -> a) -> a`

在使用自下而上算法（在*泛化hindley-milner 类型推理算法*中描述）并添加以下规则后：

```
 a1, c1 |-BU e1 : t1     B = fresh var
---------------------------------------------------------
a1\x, c1 U {t' == B | x : t' in A} |-BU let rec x = e1 : t 
```

我剩下以下类型：`t1 -> t2`

以及以下约束：

```
t0 = fix
t1 = f
t2 = f (fix f)
t3 = f
t4 = fix f
t5 = fix
t6 = f

t3 = t1
t3 = t4 -> t2
t5 = t0
t5 = t6 -> t4
t6 = t1 
```

我看不出这些约束是如何解决的，所以我只剩下 type 了`(a -> a) -> a`。我希望有人能清楚地看到我是否出错了。

[完整的源代码在这里](http://hpaste.org/68479)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T21:40:33.290

不应该有一个`t7`for first`fix f`吗？这些给出了约束：

```
t7 = t2
t0 = t1 -> t7 
```

从中你应该能够推断出，`t4 = t2`然后`t0 = (t2 -> t2) -> t2`。

# javascript - 没有 jQuery 的跨浏览器 preventDefault()

> ID：10575273
> 
> 赞同：10
> 
> 时间：2012-05-13T21:10:13.430
> 
> 标签：javascript, bind, preventdefault

我编写了这个绑定方法，但我的 preventDefault() 方法在 IE 中工作时遇到问题。回调线永远不会执行。有人可以提供帮助吗？谢谢！

```
var preventDefault = function (event) {
    if (window.event) { window.event.returnValue = false; }
    else if (event.preventDefault) { event.preventDefault(); }
    else { event.returnValue = false; }
};

var bindEvent = function (ele, type, cb) {
    if (window.addEventListener) {
        ele.addEventListener(type, cb, false);
    } else if (window.attachEvent) {
        ele.attachEvent('on' + type, function () {
            event.preventDefault = function () {
                preventDefault(event);
            }.call(this);
           cb.call(ele, event);  //this does not execute
        });
    }
}; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-13T21:19:17.850

```
// cancel event
function cancelEvent(event) {
   if (event.preventDefault) { 
      event.preventDefault();
   } else {
      event.returnValue = false; 
   }
} 
```

# php - Kohana - Database_Exception [ 2 ]: mysql_connect()

> ID：10575275
> 
> 赞同：1
> 
> 时间：2012-05-13T21:10:31.770
> 
> 标签：php, kohana, kohana-3, kohana-orm

我正在运行 Kohana v3.2 我只是想启动并运行一个小型 MVC，并被推荐使用此系统。我正在关注本教程： http: [//kowsercse.com/2011/09/04/kohana-tutorial-beginners/](http://kowsercse.com/2011/09/04/kohana-tutorial-beginners/)

一切似乎都很顺利，直到我进入添加新文章部分，我创建了文件，但是当我将浏览器指向文章/新控制器/操作时，我收到此错误：

```
Database_Exception [ 2 ]: mysql_connect() [<a href='function.mysql-connect'>function.mysql-connect</a>]: Access denied for user 'ODBC'@'localhost' (using password: NO)

MODPATH\database\classes\kohana\database\mysql.php [ 67 ]

62      catch (Exception $e)
63      {
64          // No connection exists
65          $this->_connection = NULL;
66 
67          throw new Database_Exception(':error',
68              array(':error' => $e->getMessage()),
69              $e->getCode());
70      }
71 
72      // \xFF is a better delimiter, but the PHP driver uses underscore 
```

我对 PHP 还是很陌生，对 Kohana 还是很陌生，但是从错误中猜测 ORM 正在尝试使用用户名 ODBC 访问我的数据库，但我还没有在我创建的页面/文件中的任何地方定义这个，这是我的我所在的 database.php 配置：application/config

```
<?php defined('SYSPATH') or die('No direct script access.');

return array
(
    'default' => array
    (
        'type'          => 'mysql',
        'connetion'     => array
        (
            'hostname'      => '127.0.0.1',
            'database'      => 'kohana_blog',
            'username'      => 'root',
            'password'      => '',
            'persistent'    => FALSE,
        ),
        'table_prefix'  => '',
        'charset'       => 'UTF8',
        'caching'       => FALSE,
        'profiling'     => TRUE,
    )
); 
```

任何想法都会很棒谢谢你:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:34:54.937

我想你已经安装了[ODBC/Connector](http://dev.mysql.com/downloads/connector/odbc/5.1.html) - 它是一个数据库驱动程序，它创建自己 ( `ODBC`) 作为默认用户。因为你没有在你的配置中指定一个用户（你没有，因为你有一个错字;））它`ODBC`默认尝试连接。

如果您更正了数据库配置文件的第 8 行，那么一切都应该开始正常工作。

```
...

'type'          => 'mysql',
'connection'     => array
(
        'hostname'      => '127.0.0.1',
... 
```

哦，除非你的主机文件设置得很奇怪；您应该能够使用`localhost`而不是`127.0.0.1`- 没有任何区别（除了`localhost`无论您使用的是 IPv4 还是 IPv6 都可以工作），它可能更容易阅读/输入。

# perl - 使用 Perl 哈希处理制表符分隔的文件

> ID：10575279
> 
> 赞同：2
> 
> 时间：2012-05-13T21:11:03.663
> 
> 标签：perl, perl-data-structures

我有两个文件：

*   file_1 有三列（标记（[SNP](https://en.wikipedia.org/wiki/Single-nucleotide_polymorphism)）、染色体和位置）
*   file_2 有三列（Chromosome、peak_start 和 peak_end）。

除 SNP 列外，所有列都是数字。

这些文件的排列方式如屏幕截图所示。file_1 有数百个 SNP 作为行，而 file_2 有 61 个峰。每个峰值由 peak_start 和 peak_end 标记。任何一个文件中都可以有 23 条染色体中的任何一条，并且 file_2 每个染色体都有几个峰。

我想查找每个匹配染色体的 file_1 中 SNP 的位置是否落在 file_2 中的 peak_start 和 peak_end 内。如果是这样，我想显示哪个 SNP 落在哪个峰值中（最好将输出写入制表符分隔的文件）。

我更喜欢拆分文件，并在染色体是关键的地方使用散列。我发现只有几个与此类似的问题，但我无法很好地理解建议的解决方案。

这是我的代码示例。它只是为了说明我的问题，到目前为止还没有做任何事情，所以将其视为“伪代码”。

```
#!usr/bin/perl

use strict;
use warnings;

my (%peaks, %X81_05);
my @array;

# Open file or die

unless (open (FIRST_SAMPLE, "X81_05.txt")) {
    die "Could not open X81_05.txt";
}

# Split the tab-delimited file into respective fields

while (<FIRST_SAMPLE>) {

    chomp $_;
    next if (m/Chromosome/); # Skip the header

    @array = split("\t", $_);
    ($chr1, $pos, $sample) = @array;

    $X81_05{'$array[0]'} = (
        'position' =>'$array[1]'
    )
}

close (FIRST_SAMPLE);

# Open file using file handle
unless (open (PEAKS, "peaks.txt")) {
    die "could not open peaks.txt";
}

my ($chr, $peak_start, $peak_end);

while (<PEAKS>) {
    chomp $_;

    next  if (m/Chromosome/); # Skip header
    ($chr, $peak_start, $peak_end) = split(/\t/);
    $peaks{$chr}{'peak_start'} = $peak_start;
    $peaks{$chr}{'peak_end'}  = $peak_end;
}

close (PEAKS);

for my $chr1 (keys %X81_05) {
    my $val = $X81_05{$chr1}{'position'};

    for my $chr (keys %peaks) {
        my $min = $peaks{$chr}{'peak_start'};

        my $max = $peaks{$chr}{'peak_end'};

        if (($val > $min) and ($val < $max)) {
            #print $val, " ", "lies between"," ", $min, " ", "and", " ", $max, "\n";
        }
        else {
                #print $val, " ", "does not lie between"," ", $min, " ", "and", " ", $max, "\n";
        }
    }
} 
```

更棒的代码：

1.  [http://i.stack.imgur.com/fzwRQ.png](http://i.stack.imgur.com/fzwRQ.png)
2.  [http://i.stack.imgur.com/2ryyI.png](http://i.stack.imgur.com/2ryyI.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T03:56:39.943

Perl 中的一些程序提示：

你可以这样做：

```
open (PEAKS, "peaks.txt") 
   or die "Couldn't open peaks.txt"; 
```

而不是这个：

```
unless (open (PEAKS, "peaks.txt")) {
    die "could not open peaks.txt";
} 
```

它是更标准的 Perl，并且更易于阅读。

谈到标准 Perl，您应该使用 3 参数[打开](http://perldoc.perl.org/functions/open)形式，并使用标量作为文件句柄：

```
open (my $peaks_fh, "<", "peaks.txt") 
   or die "Couldn't open peaks.txt"; 
```

这样，如果您的文件名恰好以`|`or开头`>`，它仍然可以使用。使用标量变量（以 a 开头的变量`$`）可以更轻松地在函数之间传递文件句柄。

无论如何，只是为了确保我正确理解你：你说“*我更喜欢......在染色体是关键的地方使用散列。* ”

现在，我有 23 对*染色体*，但每条染色体上可能都有数千个 SNP。如果以这种方式按染色体键控，则每个染色体只能存储一个 SNP。这是你想要的吗？我注意到您的数据显示所有相同的染色体。这意味着您不能按染色体键控。我暂时忽略了这一点，并使用我自己的数据。

我还注意到您所说的文件包含的内容以及您的程序如何使用它们有所不同：

您说：*“文件 1 有 3 列（SNP、染色体和位置）* ”，但您的代码是：

```
($chr1, $pos, $sample) = @array; 
```

我假设是染色体、位置和 SNP。文件以哪种方式排列？

你必须明确你的要求。

无论如何，这是以制表符分隔格式打印的经过测试的版本。这是一种更现代的 Perl 格式。请注意，我只有一个按染色体的哈希（如您指定的那样）。我先读了`peaks.txt`in。如果我在我的位置文件中发现我的文件中不存在的染色体`peaks.txt`，我会忽略它。否则，我将为*POSITION*和*SNP*添加额外的哈希值：

我做了一个最终循环，按照您的指定打印所有内容（制表符分隔），但您没有指定格式。如果需要，请更改它。

```
#! /usr/bin/env perl

use strict;
use warnings;
use feature qw(say);
use autodie;        #No need to check for file open failure
use constant {
    PEAKS_FILE        => "peak.txt",
    POSITION_FILE => "X81_05.txt",
};

open ( my $peak_fh, "<", PEAKS_FILE );
my %chromosome_hash;

while ( my $line = <$peak_fh> ) {
    chomp $line;
    next if $line =~ /Chromosome/;   #Skip Header
    my ( $chromosome, $peak_start, $peak_end ) = split ( "\t", $line );
    $chromosome_hash{$chromosome}->{PEAK_START} = $peak_start;
    $chromosome_hash{$chromosome}->{PEAK_END} = $peak_end;
}
close $peak_fh;

open ( my $position_fh, "<", POSITION_FILE );

while ( my $line = <$position_fh> ) {
    chomp $line;
    my ( $chromosome, $position, $snp ) = split ( "\t", $line );
    next unless exists $chromosome_hash{$chromosome};

    if ( $position >= $chromosome_hash{$chromosome}->{PEAK_START}
            and $position <= $chromosome_hash{$chromosome}->{PEAK_END} ) {
        $chromosome_hash{$chromosome}->{SNP} = $snp;
        $chromosome_hash{$chromosome}->{POSITION} = $position;
    }
}
close $position_fh;

#
# Now Print
#

say join ("\t", qw(Chromosome, SNP, POSITION, PEAK-START, PEAK-END) );
foreach my $chromosome ( sort keys %chromosome_hash ) {
    next unless exists $chromosome_hash{$chromosome}->{SNP};
    say join ("\t",
        $chromosome,
        $chromosome_hash{$chromosome}->{SNP},
        $chromosome_hash{$chromosome}->{POSITION},
        $chromosome_hash{$chromosome}->{PEAK_START},
        $chromosome_hash{$chromosome}->{PEAK_END},
    );
} 
```

一些东西：

*   在两边的括号周围留出空格。它使阅读更容易。
*   当其他人不使用时，我使用括号。目前的风格是不要使用它们，除非你必须这样做。我倾向于将它们用于所有需要多个参数的函数。例如，我可以说`open my $peak_fh, "<", PEAKS_FILE;`，但我认为当函数上有三个参数时，参数开始丢失。
*   注意我使用`use autodie;`. 如果无法打开文件，这会导致程序退出。这就是为什么我什至不必测试文件是否打开。
*   我宁愿使用面向对象的 Perl 来隐藏散列的散列结构。这可以防止错误，例如认为 start peek 存储在`START_PEEK`而不是`PEAK_START`. Perl 不会检测到这些类型的误键错误。因此，每当我处理数组数组或哈希值时，我更喜欢使用对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T23:27:54.140

您只需要一个`for`循环，因为您希望在第二批中找到一些 SNP。因此，遍历您的`%X81_05`哈希并检查是否有任何匹配`%peak`. 就像是：

```
for my $chr1 (keys %X81_05)
{
    if (defined $peaks{$chr1})
    {
        if (    $X81_05{$chr1}{'position'} > $peaks{$chr1}{'peak_start'}
             && $X81_05{$chr1}{'position'} < $peaks{$chr1}{'peak_end'})
        {
            print YOUROUTPUTFILEHANDLE $chr1 . "\t"
              . $peaks{$chr1}{'peak_start'} . "\t"
              . $peaks{$chr1}{'peak_end'};
        }
        else
        {
            print YOUROUTPUTFILEHANDLE $chr1
              . "\tDoes not fall between "
              . $peaks{$chr1}{'peak_start'} . " and "
              . $peaks{$chr1}{'peak_end'};
        }
    }
} 
```

注意：我没有测试过代码。

查看您添加的屏幕截图，这是行不通的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:33:02.233

@David 提出的观点很好；尝试将它们合并到您的程序中。（我从@David 的帖子中借用了大部分代码。）

我不明白的一件事是为什么在哈希中同时加载峰值和位置，因为加载一个就足够了。由于每条染色体都有多个记录，因此请使用 HoA。我的解决方案就是基于此。您可能需要更改列及其位置。

```
use strict;
use warnings;

our $Sep = "\t";
open (my $peak_fh, "<", "data/file2");
my %chromosome_hash;

while (my $line = <$peak_fh>) {
    chomp $line;
    next if $line =~ /Chromosome/; #Skip Header
    my ($chromosome) = (split($Sep, $line))[0];
    push @{$chromosome_hash{$chromosome}}, $line; # Store the line(s) indexed by chromo
}
close $peak_fh;

open (my $position_fh, "<", "data/file1");

while (my $line = <$position_fh>) {
    chomp $line;
    my ($chromosome, $snp, $position) = split ($Sep, $line);
    next unless exists $chromosome_hash{$chromosome};

    foreach my $peak_line (@{$chromosome_hash{$chromosome}}) {
        my ($start,$end) = (split($Sep, $line))[1,2];

        if ($position >= $start and $position <= $end) {
            print "MATCH REQUIRED-DETAILS...$line-$peak_line\n";
        }
        else {
            print "NO MATCH REQUIRED-DETAILS...$line-$peak_line\n";
        }
    }
}
close $position_fh; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T16:33:12.953

我使用@tuxuday 和@David 的代码来解决这个问题。这是完成我想要的最终代码。我不仅学到了很多东西，而且成功地解决了我的问题！致敬，伙计们！

```
use strict;
use warnings;
use feature qw(say);

# Read in peaks and sample files from command line
my $usage = "Usage: $0 <peaks_file> <sample_file>";
my $peaks = shift @ARGV or die "$usage \n";
my $sample = shift @ARGV or die "$usage \n";

our $Sep = "\t";
open (my $peak_fh, "<", "$peaks");
my %chromosome_hash;

while (my $line = <$peak_fh>) {
    chomp $line;
    next if $line =~ /Chromosome/; #Skip Header
    my ($chromosome) = (split($Sep, $line))[0];

    push @{$chromosome_hash{$chromosome}}, $line; # Store the line(s) indexed by chromosome
}
close $peak_fh;

open (my $position_fh, "<", "$sample");

while (my $line = <$position_fh>) {
    chomp $line;
    next if $line =~ /Marker/; #Skip Header
    my ($snp, $chromosome, $position) = split ($Sep, $line);

    # Check if chromosome in peaks_file matches chromosome in sample_file
    next unless exists $chromosome_hash{$chromosome};

    foreach my $peak_line (@{$chromosome_hash{$chromosome}}) {

        my ($start,$end,$peak_no) = (split( $Sep, $peak_line ))[1,2,3];

        if ( $position >= $start and $position <= $end) {

            # Print output
            say join ("\t",
                $snp,
                $chromosome,
                $position,
                $start,
                $end,
                $peak_no,
            );
        }
        else {
            next; # Go to next chromosome
        }
    }
}
close $position_fh; 
```

# android - 常量联系人 ID

> ID：10575280
> 
> 赞同：0
> 
> 时间：2012-05-13T21:11:09.353
> 
> 标签：android, api, android-contacts

在 ROM 闪存或出厂重置之间是否存在任何类型的接触变量？我创建了一个查找联系人 ID 的应用程序，但显然当从出厂重置或新 ROM（以及设备之间）同步时，它会发生变化。我需要存储一个唯一标识符。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:48:32.277

如果您在谈论 sim 数据，也许您可​​能会想出一些东西。但是，如果您在谈论唯一标识符，我知道的唯一有效方法是生成 UUID 密钥并将其存储在本地和外部，正如 Reto Meier 在 Google I/O 2011 上所建议的那样。这是我的片段（不要介意我的 javadoc风格^^);

```
/**
 * This is just a local solution. For world-wide usage,
 * backup on a cloud is encouraged.
 * 
 * @reference Reto Meier - Google I/O 2011
 * 
 * @param context for accessing related shared preferences file
 * @return unique id
 */
public synchronized static String getUniqueId(Context context)
{
    String uniqueID;

    //Open shared preferences file for PREF_UNIQUE_ID
    SharedPreferences sharedPrefs = context.getSharedPreferences(PREF_UNIQUE_ID, Context.MODE_PRIVATE);

    //Fetch id, if any.
    uniqueID = sharedPrefs.getString(PREF_UNIQUE_ID, null);

    //If no id saved into shared preferences before generate new one
    if(uniqueID == null)
    {
        uniqueID = UUID.randomUUID().toString();
        Editor editor = sharedPrefs.edit();
        editor.putString(PREF_UNIQUE_ID, uniqueID);
        editor.commit();
    }

    return uniqueID;
} 
```

# postgresql - 如何将 PostgreSQL 变量表示为字符串

> ID：10575281
> 
> 赞同：3
> 
> 时间：2012-05-13T21:11:19.407
> 
> 标签：postgresql, postgresql-9.1

有什么方法可以将 PostgreSQL 中的变量表示为字符串？

例子：

```
\set table_name countries
SELECT 'SELECT * FROM ' || CAST( :table_name, 'text' ) AS specificQuery; 
```

导致此错误：

```
ERROR:  syntax error at or near ","
LINE 1: SELECT 'SELECT * FROM ' || CAST( countries, 'text' ) AS specificQuery; 
```

从上面的行示例很明显，它不会将“国家”转换为字符串，而是表示为列/表的名称。

我该如何转换它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T21:43:11.680

你在寻找这样的东西吗？：

```
SELECT * FROM :"table_name"; 
```

[http://www.postgresql.org/docs/current/interactive/app-psql.html#APP-PSQL-VARIABLES](http://www.postgresql.org/docs/current/interactive/app-psql.html#APP-PSQL-VARIABLES)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T21:14:38.983

像这样的东西：

```
SELECT 'SELECT * FROM ' || countries::text AS specificQuery; 
```

# sockets - 用于 Android Socket.bind 的 TCP 服务器 Mono

> ID：10575283
> 
> 赞同：1
> 
> 时间：2012-05-13T21:11:31.693
> 
> 标签：sockets, tcp, xamarin.android

我正在尝试转换可以在 Mono for Android 中处理 TCP 服务器的代码。这是[此聊天应用程序 for Windows 教程](http://www.codeproject.com/Articles/16916/A-Chat-Application-Using-Asynchronous-TCP-Sockets)中的代码。但是，我收到错误：

> ListenForClient 访问被拒绝！

它是由这部分代码创建的：

```
try
{
    //We are using TCP sockets
    serverSocket = new Socket(AddressFamily.InterNetwork,
                              SocketType.Stream,
                              ProtocolType.Tcp);

    //Assign the any IP of the machine and listen on port number 1000
    IPEndPoint ipEndPoint = new IPEndPoint(IPAddress.Any, 1000);

    //Bind and listen on the given address
    serverSocket.Bind(ipEndPoint);
    serverSocket.Listen(4);

    //Accept the incoming clients
    serverSocket.BeginAccept(new AsyncCallback(OnAccept), null);
}
catch (Exception ex)
{
    System.Console.WriteLine("@ ListenForClient" + ex.Message);
    Android.Util.Log.Info("ListenForClient", ex.Message);
} 
```

看起来`serverSocket.Bind(IPEndPoint);`在 Mono for Android 中是不允许的。有人知道解决方法或知道为什么不允许这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:04:38.407

找到了解决方案，这是2个问题，

1）安卓清单：

`<uses-permission android:name="android.permission.INTERNET" />`

2）保留1000端口！

# vb.net - 如何在 GridView 中显示结果？

> ID：10575284
> 
> 赞同：0
> 
> 时间：2012-05-13T21:11:41.233
> 
> 标签：vb.net, winforms

NET WinForms。

VB代码：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)       Handles Button1.Click

    Label1.Text = "Beginning"

    Dim a As Integer = 20
    Dim b As Integer = 3
    Do Until b > a

        a & " " & b

        a = a - 2
        b = b + 1
    Loop
    Label2.Text = "End"
End Sub 
```

我想在 GridView中显示这一行 **a & " " & b的结果。**我应该如何更改代码以使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:52:30.447

将 DataGridView 添加到您的表单中，并添加 2 列，然后下一个更新的代码将执行此操作

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)          Handles Button1.Click

    Label1.Text = "Beginning"

    ' If the DataGridView is not bound to any data source, this code will clear content
    DataGridView1.Rows.Clear()

    Dim a As Integer = 20
    Dim b As Integer = 3
    Do Until b > a

       'a & " " & b
       ' add the row to the end of the grid with the Add() method of the Rows collection...
       DataGridView1.Rows.Add(New String(){a.ToString(), b.ToString()})

       a = a - 2
       b = b + 1
    Loop
    Label2.Text = "End"
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:53:48.183

我建议您将值存储到 DataTable 并绑定到 DataGridView

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)       Handles Button1.Click

    Label1.Text = "Beginning"

    'Create a new datatable here
    Dim dt As New DataTable
    dt.Columns.Add("Result")

    Dim a As Integer = 20
    Dim b As Integer = 3
    Do Until b > a

        'Create DataRow here and put the value into DataRow
        Dim dr As DataRow = dt.NewRow
        dr("result") = a.ToString & " " & b.ToString
        'a & " " & b
        dt.Rows.Add(dr)

        a = a - 2
        b = b + 1
    Loop

    'Bind your dt into the GridView
    DataGridView.DataSource = dt

    Label2.Text = "End"

End Sub 
```

# android - 在 osm 地图上确定用户位置

> ID：10575285
> 
> 赞同：6
> 
> 时间：2012-05-13T21:11:44.863
> 
> 标签：android, maps, location, osmdroid

我正在开发一个确定 osm 地图中用户位置的 android 应用程序。我能够在地图上显示用户位置，但是如果位置改变整个地图被重新加载，那有什么问题？另外我怎样才能提高用户位置的准确性？以及如何根据准确性制作一个增加和减少的圆圈（如谷歌所示）？

代码 ：

```
public class OsmDemoActivity extends Activity implements LocationListener, 
    MapViewConstants 
{  
private MapView mMapView; 
private MapController mapController; 
private LocationManager mLocMgr; 
private ItemizedOverlay<OverlayItem> mMyLocationOverlay; 
private ResourceProxy mResourceProxy; 

ArrayList<OverlayItem> items;

@Override 
public void onCreate(Bundle savedInstanceState) 
{ 
    super.onCreate(savedInstanceState); 
    mResourceProxy = new DefaultResourceProxyImpl(getApplicationContext()); 
    setContentView(R.layout.main); 
    //mMapView.setUseDataConnection(false);
    initilaizeMap();
    //addOverlay(); 
    mLocMgr = (LocationManager) getSystemService(LOCATION_SERVICE); 
    mLocMgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);      
} 

public void initilaizeMap()
{
    mMapView = (MapView) this.findViewById(R.id.mapView); 
    mMapView.setTileSource(TileSourceFactory.MAPNIK); 

    //mMapView.setUseDataConnection(false);

    mMapView.setBuiltInZoomControls(true); 
    mMapView.setMultiTouchControls(true); 
    mapController = this.mMapView.getController(); 
    mapController.setZoom(15); 
    mapController.setCenter(new GeoPoint(15.610762,32.540345));

    /*
    final MyLocationOverlay myLocationOverlay = new MyLocationOverlay(this, mMapView, 
            mResourceProxy); 
    myLocationOverlay.enableMyLocation();
    //myLocationOverlay.disableMyLocation(); // not on by default 
    myLocationOverlay.disableCompass(); 
    myLocationOverlay.disableFollowLocation(); 
    myLocationOverlay.setDrawAccuracyEnabled(true); 
    myLocationOverlay.runOnFirstFix(new Runnable() { 
        public void run() { 
            mapController.animateTo(myLocationOverlay 
                    .getMyLocation()); 
        } 
    }); 
    //ArrayList<OverlayItem> mOsmOverlays;
    //mOsmOverlays.add(myLocationOverlay); 
    */
}

public void addOverlay()
{
    GeoPoint point2 = new GeoPoint(53554070, -2959520); // centre map here 
    GeoPoint point3 = new GeoPoint(53554070 + 1000, -2959520 + 1000); // icon goes here 
    GeoPoint point4 = new GeoPoint(15.610844, 32.540045);
    GeoPoint point5 = new GeoPoint(15610844 + 40, 32540045 + 40);
    GeoPoint point6 = new GeoPoint(15610844 + 50, 32540045 + 50);
    GeoPoint point7 = new GeoPoint(15610844 + 10, 32540045 +10);
    mapController.setCenter(point4);
    items = new ArrayList<OverlayItem>(); 
    // Put overlay icon a little way from map center 
    items.add(new OverlayItem("Here5", "SampleDescription", point5)); 
    items.add(new OverlayItem("Here6", "SampleDescription", point6));
    items.add(new OverlayItem("Here7", "SampleDescription", point7));
    /* OnTapListener for the Markers, shows a simple Toast. */ 
    this.mMyLocationOverlay = new ItemizedIconOverlay<OverlayItem>(items, 
            new ItemizedIconOverlay.OnItemGestureListener<OverlayItem>() { 
                @Override 
                public boolean onItemSingleTapUp(final int index, 
                        final OverlayItem item) { 
                    Toast.makeText( 
                            OsmDemoActivity.this, 
                            "Item onItemSingleTapUp '" + item.mTitle, Toast.LENGTH_LONG).show(); 
                    return true; // We 'handled' this event. 
                } 
                @Override 
                public boolean onItemLongPress(final int index, 
                        final OverlayItem item) { 
                    Toast.makeText( 
                            OsmDemoActivity.this,  
                            "Item onItemLongPress '" + item.mTitle ,Toast.LENGTH_LONG).show(); 
                    return false; 
                } 
            }, mResourceProxy); 
    this.mMapView.getOverlays().add(this.mMyLocationOverlay); 
    mMapView.invalidate(); 
}

public void displayLocation(GeoPoint loc)
{
    mapController.setCenter(loc);
    items = new ArrayList<OverlayItem>(); 
    // Put overlay icon a little way from map center
    items.add(new OverlayItem("Here u r", "SampleDescription", loc));
    /* OnTapListener for the Markers, shows a simple Toast. */ 
    this.mMyLocationOverlay = new ItemizedIconOverlay<OverlayItem>(items, 
            new ItemizedIconOverlay.OnItemGestureListener<OverlayItem>() { 
                @Override 
                public boolean onItemSingleTapUp(final int index, 
                        final OverlayItem item) { 
                    Toast.makeText( 
                            OsmDemoActivity.this, 
                            "Item onItemSingleTapUp '" + item.mTitle, Toast.LENGTH_LONG).show(); 
                    return true; // We 'handled' this event. 
                } 
                @Override 
                public boolean onItemLongPress(final int index, 
                        final OverlayItem item) { 
                    Toast.makeText( 
                            OsmDemoActivity.this,  
                            "Item onItemLongPress '" + item.mTitle ,Toast.LENGTH_LONG).show(); 
                    return false; 
                } 
            }, mResourceProxy); 
    mMapView.getOverlays().clear();
    this.mMapView.getOverlays().add(this.mMyLocationOverlay); 
    //mMapView.invalidate();
}

public void onLocationChanged(Location location)
{ 
    int lat = (int) (location.getLatitude() * 1E6); 
    int lng = (int) (location.getLongitude() * 1E6); 
    GeoPoint gpt = new GeoPoint(lat, lng); 
    //mapController.setCenter(gpt); 
    //mMapView.invalidate();
    displayLocation(gpt);
} 

    @Override 
    public void onProviderDisabled(String arg0) {} 
    @Override 
    public void onProviderEnabled(String provider) {} 
    @Override 
    public void onStatusChanged(String provider, int status, Bundle extras) {} 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T14:24:51.533

您必须使用位置更改侦听器也许这可以帮助您

听众：

```
package dispatch.driver.osmMaps;

import org.osmdroid.util.GeoPoint;

import android.location.Location;
import android.location.LocationListener;
import android.os.Bundle;
import android.widget.Toast;

public class OsmGeoUpdateHandler implements LocationListener
{

    private OsmMapsActivity mMapActivity;

    public OsmGeoUpdateHandler(OsmMapsActivity aMapActivity)
    {
        this.mMapActivity = aMapActivity;

    }

    @Override
    public void onLocationChanged(Location location)
    {
        Toast.makeText(mMapActivity,
                "latitude = " + location.getLatitude() * 1e6 + " longitude = " + location.getLongitude() * 1e6,
                Toast.LENGTH_SHORT).show();

        int latitude = (int) (location.getLatitude() * 1E6);
        int longitude = (int) (location.getLongitude() * 1E6);
        GeoPoint point = new GeoPoint(latitude, longitude);
        mMapActivity.updateCarPosition(point);
    }

    @Override
    public void onProviderDisabled(String provider)
    {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider)
    {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras)
    {
        // TODO Auto-generated method stub

    }

} 
```

OsmMapActivity 类（如何使用监听器）

```
public class OsmMapsActivity extends Activity
{
    // final private int MAP_DEFAULT_ZOOM = 14;
    final private double MAP_DEFAULT_LATITUDE = 44.445883;
    final private double MAP_DEFAULT_LONGITUDE = 26.040963;

    private MapView mMapView;
    private ResourceProxy mResourceProxy;
    private OsmMapsItemizedOverlay mItemizedOverlay;
    private MyLocationOverlay mMyLocationOverlay;
    private LocationManager locationManager;
    private OverlayItem lastPosition = null;
    private Order mOrder;
    OsmGeoUpdateHandler mUpdateHandler;
    private ArrayList<OverlayItem> mItems = new ArrayList<OverlayItem>();

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        // Specify the XML layout to use:
        setContentView(R.layout.osmmap);

        mResourceProxy = new DefaultResourceProxyImpl(getApplicationContext());
        mMapView = (MapView) findViewById(R.id.mapview);

        // Setup the mapView controller:
        mMapView.setBuiltInZoomControls(true);
        mMapView.setMultiTouchControls(true);
        mMapView.setClickable(true);
        mMapView.setUseDataConnection(false);
        mMapView.setTileSource(TileSourceFactory.MAPNIK);
        mMapView.getController().setZoom(12);

        /* location manager */
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        mUpdateHandler = new OsmGeoUpdateHandler(this);
        Location location = null;

        for (String provider : locationManager.getProviders(true))
        {
            location = locationManager.getLastKnownLocation(provider);
            if (location != null)
            {
                //location.setLatitude(MAP_DEFAULT_LATITUDE);
                //location.setLongitude(MAP_DEFAULT_LONGITUDE);
                locationManager.requestLocationUpdates(provider, 0, 0, mUpdateHandler);
                break;
            }
        }

        //add car position
        if (location == null)
        {
            location = new Location(LocationManager.GPS_PROVIDER);
            location.setLatitude(MAP_DEFAULT_LATITUDE);
            location.setLongitude(MAP_DEFAULT_LONGITUDE);
            updateCarPosition(new GeoPoint(location));
        }

    } // end onCreate()
public void updateCarPosition(GeoPoint aPoint)
    {
        if (mItemizedOverlay == null)
        {
            return;
        }
        OverlayItem overlayItem;

        /* remove last position marker */
        removeLastPosition(lastPosition);

        overlayItem = new OverlayItem("Center", "Center", (GeoPoint) aPoint);

        lastPosition = overlayItem;

        mItemizedOverlay.addOverlay(overlayItem);

        mMapView.getOverlays().add(mItemizedOverlay);
        mMapView.getController().animateTo(aPoint);

    }
} 
```

# java - youtube api 上传文件 - 此操作需要开发人员密钥

> ID：10575288
> 
> 赞同：1
> 
> 时间：2012-05-13T21:12:42.120
> 
> 标签：java, youtube-api

我正在尝试将文件上传到我的 youtube 帐户，但不知何故我无法让它工作。任何帮助，将不胜感激。

这是我的代码：

```
public class YouTubeUploadService {
      String apiKey = "real-dev-api-key";
      String uName = "user_name";
      String uPassword= "user_password";
      public static void uploadVideo() throws Exception{

    YouTubeService service2 = new YouTubeService("olala", apiKey);

    try {
          service2.setUserCredentials("uName", "uPassword");
        } catch (AuthenticationException e) {
          System.out.println("Invalid login credentials.");
          System.exit(1);
        }

    System.out.println(service2.getVersion());
    UserProfileEntry userProfileEntry = service2.getEntry(new URL(profileUrl), UserProfileEntry.class);
    System.out.println(userProfileEntry.getAge());
    VideoEntry newEntry = new VideoEntry();

    YouTubeMediaGroup mg = newEntry.getOrCreateMediaGroup();
    mg.setTitle(new MediaTitle());
    mg.getTitle().setPlainTextContent("My Test Movie");
    mg.addCategory(new MediaCategory(YouTubeNamespace.CATEGORY_SCHEME, "Autos"));
    mg.setKeywords(new MediaKeywords());
    mg.getKeywords().addKeyword("key word 1");
    mg.getKeywords().addKeyword("key word 2");
    mg.setDescription(new MediaDescription());
    mg.getDescription().setPlainTextContent("plain text");
    mg.setPrivate(false);
    mg.addCategory(new MediaCategory(YouTubeNamespace.DEVELOPER_TAG_SCHEME, "tag scheme1 "));
    mg.addCategory(new MediaCategory(YouTubeNamespace.DEVELOPER_TAG_SCHEME, "tag scheme 2"));
    newEntry.setGeoCoordinates(new GeoRssWhere(37.0,-122.0));
    newEntry.setLocation("Mountain View, CA");
    MediaFileSource ms = new MediaFileSource(new File("Wildlife.wmv"), "video/quicktime");
    newEntry.setMediaSource(ms);
    String uploadUrl = "https://uploads.gdata.youtube.com/feeds/api/users/default/uploads";

    System.out.println("Uploading");
    VideoEntry createdEntry = service2.insert(new URL(uploadUrl), newEntry);
    createdEntry.update();

    System.out.println("Done ---- Uploading");
}
} 
```

当我运行此代码时，我得到：

```
Exception in thread "main" com.google.gdata.util.ServiceForbiddenException: Developer key required for this operation 
```

`ServiceForbiddenException`此操作需要GData Developer 密钥

```
at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:605)
at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:564)
at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
at com.google.gdata.client.media.MediaService.insert(MediaService.java:400)
... 
```

当我使用代码“service2.setUserCredentials("uName", "uPassword");" 删除 try{} 捕获块时 我收到此错误：

```
Exception in thread "main" com.google.gdata.util.AuthenticationException: Unauthorized
at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:608)
at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:564)
at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
at com.google.gdata.client.media.MediaService.insert(MediaService.java:400)... 
```

我在这里想念什么？我从谷歌文档中得到了这段代码。我是否需要在某处授予对我帐户的访问权限？如果是这样，请解释如何，因为我在谷歌文档上找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:53:55.083

正如我在评论中提到的，我以错误的方式设置了属性 String apiKey = "real-dev-api-key" 的值。这是固定的，现在一切正常。

# objective-c - NSImageRep 分辨率错误？

> ID：10575289
> 
> 赞同：1
> 
> 时间：2012-05-13T21:13:02.807
> 
> 标签：objective-c, size, tiff, nsimage, nsimagerep

MacOS 10.7.4 带有新图标，其图像代表为 144 DPI。不好的是，当我在 NSImage 中加载其中一个图标时，我只能得到大小为 512px 的代表。我的意思是：我在 NSImage 中加载了一个 1024px/144dpi icns 文件，然后我询问每个图像代表的大小……没有代表的大小为 1024px，我只得到最大的大小。512px（无论代表是否具有 72dpi 而不是 144dpi 的分辨率：实际上 10.7.4 中的新图标，如 TextEdit 或 Automator，除了 1024px 存在于 144dpi 的单个代表中之外，每种尺寸都有两种分辨率的代表）。

为什么 NSImageRep 似乎不了解它的真实分辨率？为什么我只针对 1024px/144dpi 而不是例如针对 512px/144dpi 得到这个问题？

如果我读取 NSImage 的 TIFFRepresentation 并将其写回一个文件，我会得到一个正确的 1024px/144dpi TIFF 文件，而如果我通过 CGImageSource/CGImageDestination 编写与 kUTTypeTIFF 相同的 NSImage，我会得到一个 1024px/72dpi 文件。

所有这些事情都让我变得非常困惑。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T23:28:26.183

文档`-[NSImageRep size]`说：

> 图像表示的大小，**以用户坐标空间中的点为单位**。

（强调补充。）

这不是以像素为单位的测量值。这是以点为单位的测量，因此当点为 72 dpi 时， 1024*像素*、144 dpi 的图像测量 512*个点。*

您想查询`-pixelsWide`and`-pixelsHigh`方法（如果您确实关心像素尺寸；通常您不应该这样做）。

# c - 如何使用联合在 1 个 C 数组中存储 2 个不同的结构

> ID：10575291
> 
> 赞同：0
> 
> 时间：2012-05-13T21:13:20.257
> 
> 标签：c, struct

我想创建一个数组来存储 2 种类型的 C 结构 -`Employee`和它的“子”， `Manager`。我创建了一个联合`Person`来保存它们中的任何一个，然后尝试用它创建一个数组，但它不起作用。我怎样才能让这样的阵列工作？相关代码如下。

```
 typedef struct {    
    char name[20]; 
    double salary;
    } Employee;

//Manager struct inheriting from employee struct
typedef struct {
    Employee employee;   
    int bonus;
} Manager;  

typedef union{ 
       Employee e;
       Manager m;
      } Person;
Manager boss;
Employee harry ;
Employee tommy;
Person staff[]; 

int main(void)
{
...
boss = newManager(...);
  harry = newEmployee(...);       
  tommy = newEmployee(...); 
```

我无法让下一行工作，我尝试了很多东西。

```
 staff[3] = {boss, harry, tommy}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:16:14.520

尝试：

```
staff[0].manager = boss;
staff[1].employee = harry;
/* ... */ 
```

或许：

```
Person staff [] = {
    {.manager = boss},
    {.employee = harry},
    /* ... */
}; 
```

但是问问自己：你以后怎么知道`staff[x]`是经理还是普通员工？

# php - 是否可以将 Javascript IDE 集成到 Eclipse PDT 中？

> ID：10575295
> 
> 赞同：0
> 
> 时间：2012-05-13T21:13:37.330
> 
> 标签：php, javascript, eclipse, ide

我目前有用于 PHP 的 Eclipse PDT，我可以正常使用 HTML、CSS Javascript、PHP，但我的 Eclipse 没有检查 Javascript 的错误代码。我可以将什么下载到我的 Eclipse 中，这样我就可以在我的 Eclipse IDE 中看到任何 Javascript 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:16:30.660

我建议你去尝试用于 HTML、CSS 和 JS 的[Aptana Studio 3 。](http://www.aptana.com/)由于它是一个基于 Eclipse 的 IDE，你可以为你的 PHP 下载并安装 PDT。

# javascript - loading form with no action inside a div

> ID：10575296
> 
> 赞同：0
> 
> 时间：2012-05-13T21:13:52.847
> 
> 标签：javascript, ajax, jquery

I have a form inside a div tag, but with `action=""`, and i want the result of form submission abppear in the same div, so i created this function:

```
$(document).ready(function() {
         $('#div1').delegate('form', 'submit', function() { // catch the form's submit events inside the div
        $.ajax({ // create an AJAX call...
            data: $(this).serialize(), // get the form data
            type: $(this).attr('method'), // GET or POST
            url: $(this).attr('action'), // the file to call
            success: function(response) { // on success..
                 //$('#div1').html(response); // update the DIV
                $('#div1').fadeOut('slow',function() {
                            $('#div1').html(response).fadeIn('slow');
                    });
        }
        });
        return false; // cancel original event to prevent form submitting
    });
                }); 
```

however when i submit the form, nothing appears because the form has no action to be loaded, the same function works with other forms having action attribute, so my question is how to handle this case to make the form read the script in the same page when the form action is empty?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:17:24.997

首先，所有表格都应该有一个动作。它的无效 HTML 不是。

但是，如果我理解您想要发布到当前页面的问题，那么您可以这样做

```
 url: $(this).attr('action') || window.location.href, // the file to call 
```

如果可用，这将采用 action 属性，如果没有操作，则采用当前窗口位置的 href。

# iphone - Google Analytics for iOS，如何设置域？

> ID：10575298
> 
> 赞同：1
> 
> 时间：2012-05-13T21:14:08.047
> 
> 标签：iphone, ios, google-analytics, google-analytics-api

我正在尝试将此 GA 的 javascript 版本移植到本机 iOS SDK

```
pageTracker = _gat._getTracker("UA-XXXXXXX-1");
pageTracker._setDomainName(".test.org");
pageTracker._trackPageview(); 
```

我知道如何设置UA账号和如何上报pageView，但是如何设置域名呢？

```
 [[GANTracker sharedTracker] startTrackerWithAccountID:@"UA-XXXXXXX-1"
                                    dispatchPeriod:kGANDispatchPeriodSec
                                          delegate:nil];

  if (![[GANTracker sharedTracker] trackPageview:@"/"
                               withError:&error]) { // Handle error here  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:08:27.367

只是跟进我的评论。您在 iOS 的 Google Analytics（分析）本机代码跟踪器中不需要域。它在网络上使用，因此您可以在可能使用多个子域的网站上更精细地跟踪流量。例如，如果您有一个通用的“产品”网页，但相同的产品页面存在于 dogs.mystore.com/products 和cats.mystore.com/products，并且您希望使用相同的跟踪器但区分两者之间的流量这两个站点，您可以利用 Javascript API 中的域变量。我想不出像这样的用例，在本机应用程序后面需要它。

这是与 JavaScript API 相关的参考 [https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)

归根结底，不需要。:)

# php - The php page that I made which is supposed to add entries to a mysql table is not doing anything to the table

> ID：10575301
> 
> 赞同：0
> 
> 时间：2012-05-13T21:14:44.500
> 
> 标签：php, javascript, mysql, html

First off, i have checked to make sure that the const.php is in the directory where the page is.

I am creating a page that would allow admin to add multiple entries to a MySQL table through the website. It uses a JavaScript to expand the array of textbox input fields so that an admin does not have to enter any more entries than he/she has to. But if the entry the admin is trying to add is already there, then it won't be added. After the code is run the user is told which entries were added to the table and which entries were not added because there was already such an entry.

Here is the form which passes input arrays to the PHP code.

form id=userform action="addplayers.php" method="post" >

```
 <legend>Player Info</legend>    
            <ol>
                <div id="dynamicInput">
                    <li>
                        <label for=player>Player</label>
                        <input id=player type="text" name="player[]">
                    </li>
                    <li>
                        <label for=team>Team</label>
                        <input id=team type="text" name="team[]">
                    </li>
                    <li>
                        <label for=path>Player page path</label>
                        <input id=path type="text" name="path[]">
                    </li>
                    <li>
                        <label for=image>Player image path</label>
                        <input id=image type="text" name="image[]">
                    </li>
                    <br/>
                </div>  
            </ol>
        <input type="button" value="ADD ANOTHER PLAYER" onClick="addInput();">
        <button type=submit name=submit> Submit </button>
        </form> 
```

Here the javascript code dynamically creates textbox input fields which expands the input array.

```
<script language="Javascript" type="text/javascript">
            function addInput(){
                var newdiv = document.createElement('div');
                newdiv.innerHTML = "<li><label for=player>Player</label><input id=player type='text' name='player[]'></li>";
                document.getElementById('dynamicInput').appendChild(newdiv);
                var newdiv = document.createElement('div');
                newdiv.innerHTML = "<li><label for=team>Team</label><input id=team type='text' name='team[]'></li>";
                document.getElementById('dynamicInput').appendChild(newdiv);
                var newdiv = document.createElement('div');
                newdiv.innerHTML = "<li><label for=path>Player page path</label><input id=path type='text' name='path[]'></li>";
                document.getElementById('dynamicInput').appendChild(newdiv);
                var newdiv = document.createElement('div');
                newdiv.innerHTML = "<li><label for=image>Player image path</label><input id=image type='text' name='image[]'></li><br/>";
                document.getElementById('dynamicInput').appendChild(newdiv);
            }
        </script> 
```

Here is the php code that form posts to.

```
include "const.php";

$entry_results = "";

if( isset($_POST['submit']) )
{
    $conn = mysql_connect(MYSQL_HOST, MYSQL_LOGIN, MYSQL_PASSWORD) or die("Could not connect: " . mysql_error());
    mysql_select_db(MYSQL_DB);

    $player = $_POST['player'];
    $team = $_POST['team'];
    $path = $_POST['path'];
    $image = $_POST['image'];
    $invalid = array();
    $valid = array();
    $j = 0;
    $k = 0;

    for($i=0; $i<count($player);$i++)
    {
        //Check to see if player is in the database
        $query = "Select name FROM tblPlayers where name = '" . $player[i] ."'";
        $result = mysql_query($query);
        if(!empty($result))//if query gives a result add player to list of invalid entries
        {
            $invalid[$j++] = $player[$i];
        }
        else//otherwise add to database
        {
            $valid[$k++] = $player[$i];
            if(empty($image[$i]))
                {$image[$i] = '#';}
            if(empty($path[$i]))
                {$path[$i] = '#';}
            $query = "SELECT entity_id FROM tblTeams WHERE team = '" . $team[$i] . "'";
            $result = mysql_query($query);
            $query = "INSERT INTO tblPlayers ( team_id, name, image, path) VALUES ( 
                '" . $result . "',
                '" . $player[$i] . "',
                '" . $image[$i] . "',
                '" . $path[$i] . "'
            )";
            $result = mysql_query($query);
        }
    }
    if(!empty($invalid[0]))
    {
        for($i=0;$i<count($invalid);$i++){
            $entry_results  .= $invalid[$i];
            if(($i+1)!=count($invalid))
                $entry_results .= ', ';
        }
        $entry_results .= "were found in the database and were not enterered to prevent duplicant record. ";
    }
    if(!empty($valid[0]))
    {
        for($i=0;$i<count($valid);$i++){
            $entry_results .= $invalid[$i];
            if(($i+1)!=count($valid))
                $entry_results .= ', ';
        }
        $entry_results .= "were entered into the players table.";
    }
    mysql_close($conn);
}

?> 
```

This separate line of PHP code tells admin the result of the entry.

```
<?php
                    if( !empty($entry_results) )
                    {
                        echo "<h3>$register_message</h3><br />\n";
                    }
                ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:27:13.527

您没有正确处理结果集。看一下这段代码：

```
 $query = "SELECT entity_id FROM tblTeams WHERE team = '" . $team[$i] . "'";
        $result = mysql_query($query);
        $query = "INSERT INTO tblPlayers ( team_id, name, image, path) VALUES ( 
            '" . $result . "',
            '" . $player[$i] . "',
            '" . $image[$i] . "',
            '" . $path[$i] . "'
        )"; 
```

在第一次查询之后，$result 将是一个结果资源，而不是“entity_id”列的值。该代码应重写为：

```
 $query = "SELECT entity_id FROM tblTeams WHERE team = '" . $team[$i] . "'";
        $result = mysql_query($query);
        if ($row = mysql_fetch_assoc($result)) {
             $query = "INSERT INTO tblPlayers ( team_id, name, image, path) VALUES ( 
                 '" . $row['entity_id'] . "',
                 '" . mysql_real_escape_string($player[$i]) . "',
                 '" . mysql_real_escape_string($image[$i]) . "',
                 '" . mysql_real_escape_string($path[$i]) . "'
             )";
        } else {
             die "Couldn't find entity_id for this team.";
        } 
```

此外，您应该正确地转义您在数据库查询中使用的所有用户输入。我在上面使用“mysql_real_escape_string”函数做到了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:32:49.197

将所有表单元素的名称从例如：“player[]”更改为“player”，并在您的 javascript 中这样做。
提交表单将自动将所有具有相同名称的元素放入一个数组中。

# azure - IronPython 类中的 .NET 属性

> ID：10575306
> 
> 赞同：1
> 
> 时间：2012-05-13T21:15:16.903
> 
> 标签：azure, ironpython, azure-table-storage

所以我想创建自己的 Azure Table 类，它只使用 IronPython 进行声明。要在 C# 中定义这样的类，我使用属性。如何将它直接翻译成pythonic方式？

现在，由于对 get_Name 和 set_Name 的反射，当我覆盖 C# 类的所有属性时，我可以覆盖它们。但我想创建在 C# 中可见的新属性。[1](http://ironpython.net/documentation/dotnet/dotnet.html#extensions-to-net-types)

在 Python 中有创建这样的属性函数。但是python属性会被C#识别吗？我可以将 setter 和 getter 函数重命名为 C# 反射模型。[2](http://docs.python.org/library/functions.html#property)

也许在程序集中有一些方法可以以其他方式创建属性而不是语法糖？我没找到。

我想表明可以仅在 IronPython 中使用 Azure Tables。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:49:38.900

我对 Iron Python 不熟悉。这篇博文可能会有所帮助，但它要求我们在 C# 中定义数据模型，然后从 Iron Python 调用数据模型：http: [//blog.sharpthinking.com.au/post/2009/02/20/Azure-Table - 存储在 IronPython.aspx](http://blog.sharpthinking.com.au/post/2009/02/20/Azure-Table-Storage-in-IronPython.aspx)中。最后，表存储是一种 REST 服务。因此，我们可以使用 REST API 以我们选择的任何语言处理表存储。如果它不提供我们选择的语言的客户端库，我们可以构建自己的。OData 的一些第三方库也可能有所帮助，因为表存储使用 OData 协议。我建议您查看[http://code.google.com/p/odata-py/](http://code.google.com/p/odata-py/)。

最好的祝福，

明旭。

# java - How do debug C++ dll for a Java application

> ID：10575308
> 
> 赞同：1
> 
> 时间：2012-05-13T21:15:25.810
> 
> 标签：java, c++, debugging, dll, visual-studio-debugging

I have created a C++ dll for a java application. I have the dll working within the application if I launch it separately, which includes a very lengthy batch file to get all of the correct arguments. I would like to try an debug the dll that I created in Visual Studio 2010\. I have tried putting the command line and arguments into the debugging property page in visual studio. Although I am not able to get the application to launch correctly.

The command line to launch the application looks like this assuming the application is ApplicationName...

```
 start "ApplicationName" "C:\AppDirectory\jre\bin\javaw" -D sun.java2d.nodraw=true -Xms24m -Xmx128m -classpath "C:\AppDirectory\classes\;C:\AppDirectory\classes\iText.jar" ApplicationName 
```

Any ideas on how to property setup the debug settings for this? Any ideas on where I could find some documentation on this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:14:45.150

我会强烈考虑以下几点：

1.  如果可能，构建 JNI 以使执行工作的代码对 JNI 一无所知。让它只接收本机 C++ 内容作为参数并返回本机 C++ 内容作为返回值，而不调用任何 JNIEnv 函数。
2.  拥有一个 shim 层，其中包含 Java 类中本机方法的实际实现。shim 层将知道如何调用 JNIEnv 函数来提取参数，将它们转换为本地 C++ 对象并将它们传递给工作代码。同样，这一层将知道如何将 C++ 对象转换回 Java 对象。例如，如果工作函数返回 a `std::string`，则 shim 层将知道如何调用 JNIEnv 函数以使本机方法将 Java`String`返回给 JVM。

我知道事情不能总是以这种方式组织，但它有一些很好的优势：

1.  它将允许您编写一个 C++ 程序来直接驱动工作代码。这可以使测试代码变得更快、更容易，而不必将 Java 应用程序操作到它正在使用您想要测试的方式使用您的代码的状态。
2.  您将能够仅在调试器`valgrind`、内存分析器等下运行您的代码，而无需在该工具下运行整个 JVM。这使得确定哪些内存可能被泄漏、缓冲区溢出等变得**更加**容易，而不会被 JVM 内部操作引起的“噪音”淹没。

确实，这种方法意味着没有测试 shim 层。但是由于 shim 层只是在 Java 世界和 C++ 世界之间转换对象，因此希望它非常简单，因此可以在完整的 Java 应用程序的上下文中进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:27:39.730

在我的应用程序中，我添加了在启动时检查命令行选项并在命令行选项传递给它时调用 DebugBreak 的逻辑。

我这样做是因为我的应用程序经常在非常复杂的脚本中被调用，并且有时很难甚至不可能从调试器中使用脚本设置的正确环境（路径、环境变量、临时文件......）启动应用程序.

因此，如果将特定的命令行选项传递给您的 DLL ，只需调用 DebugBreak（请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms679297%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679297%28v=vs.85%29.aspx) ） .

当断点关闭时，JIT 调试器将显示一个弹出窗口，您可以在其中启动或附加调试器。

# symfony - 数组或 Traversable 和 ArrayAccess 类型的预期参数，给定对象

> ID：10575309
> 
> 赞同：8
> 
> 时间：2012-05-13T21:15:46.033
> 
> 标签：symfony

我的表单有问题，每次我想保存评论时都会出现这个错误：

> 数组或 Traversable 和 ArrayAccess 类型的预期参数，给定对象

首先我创建我的类commentType：

```
 public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        ->add('comment', 'textarea')
        ->add('commentedName', 'text')
        ->add('idNews','hidden',  array('error_bubbling'=>true))
        ->add('country', 'text')
        ->add('email','email')
        ->add('captcha', 'captcha');
} 
```

我自定义我的表单：

```
 public function getDefaultOptions(array $options){

$collectionConstraint = new Collection (array (
    'email' => new Email(array('message' => 'invalid address email')),
    'commentedName' => array(new MaxLength(array('limit' => 30, 'message' => ''))),
    'comment' => array(new MinLength(array('limit' => 20, 'message' => ''))),
    'country' => new MinLength(array('limit' => 3, 'message' => '')),
    'idNews' => array(new MaxLength(array('limit' => 30, 'message' => ''))),
));

return array('validation_constraint' => $collectionConstraint);
} 
```

然后在我的控制器中我调用我的表单并将数据保存在数据库中：

```
$comment =  new \Mybundle\BackendBundle\Entity\Comments();

$form = $this->createForm(new \Mybundle\MainBundle\Form\CommentType(), $comment);

    $request = $this->get('request');
if ($request->getMethod() == 'POST') {
    $form->bindRequest($request);

    if ($form->isValid()) {
        $idNews= $this->getDoctrine()
            ->getRepository('Mybundle\BackendBundle\Entity\News')
            ->find($id);

        $comment->setIdNews($idNews);

        $em = $this->getDoctrine()->getEntityManager();
        $em->persist($comment);
        $em->flush();

       return $this->redirect($this->generateUrl('News',array('id' => $id,'slug'=>$slug))); 
```

在我的树枝上我做：

```
<table style="float: right;" >
<tbody>
    <tr>
        <td>{{ form_widget(form.commentedName) }} </td>
        <td>{{ form_label(form.commentedName, "name") }}</td>
    </tr>
    <tr>
        <td class="comment-error">{{ form_errors(form.commentedName) }}</TD>
    </tr>
    <tr>
        <td>{{ form_widget(form.country) }} </td>
        <td>{{ form_label(form.country, "country") }}</td>
    </tr>
    <tr>
        <td class="comment-error">{{ form_errors(form.country) }}</TD>
    </tr>
    <tr>
        <td class="large_text">{{ form_widget(form.email) }} </td>
        <td>{{ form_label(form.email, "address") }}</td>
    </tr>
    <tr>
        <td class="comment-error">{{ form_errors(form.email) }}</td>
    </tr>
    <tr>
        <td>{{ form_widget(form.comment) }} </td>
        <td>{{ form_label(form.comment, "comment") }}</td>
    </tr>
    <tr>
        <td class="comment-error">{{ form_errors(form.comment) }}</td>
    </tr>
    <tr>
        <td>{{ form_widget(form.captcha) }} </td>
    </tr>

 <tr>
        <td class="comment-error">{{ form_errors(form) }}</td>
    </tr> 
```

我说当我在我的控制器中更改对象“$comment”时在上面的行中使用“null”我没有错误但我无法将数据保存在数据库中......

有人有想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T14:20:00.340

使用集合约束，您只能验证数组（或任何实现的东西`Traversable`）。您必须转到课堂上的[注释。](http://symfony.com/doc/current/book/validation.html)`Comments`

# api - 文档构建API

> ID：10575319
> 
> 赞同：0
> 
> 时间：2012-05-13T21:16:50.607
> 
> 标签：api, http, node.js, coffeescript, document

我目前正在构建一个 API 服务，它接受 HTTP 请求中的输入、处理信息、使用模板引擎（目前是 Jade）来解析模板文件，然后以 HTML、PDF 或图像的形式输出。

我希望此服务不绑定到数据库，因为我认为不需要它。该服务有一个目标，接受输入并以所需格式输出结果。

目前我无法决定如何存储和阅读我的模板，这是一个没有数据库的新世界......

我是否将它们存储在我每次想要模板列表时阅读的“模板”之类的文件夹中？但是不知道文件锁定如何以及是否会导致问题？

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:38:46.320

看看 Express.js，它将允许您设置一个具有良好默认目录结构的项目。默认情况下，它将 Jade 模板存储在“视图”中。文件锁定不会有问题。

我要做的另一件事是将 API 服务与视图呈现分开。目前，我将 restify 用于纯 REST 服务，它专门针对该用例。所以工作流程大致如下

'views' 文件夹 <--> Jade 模板 <--> Express <--> JSON 数据 <--> REST API

# postgresql - PostgreSQL isset 函数

> ID：10575322
> 
> 赞同：1
> 
> 时间：2012-05-13T21:17:04.333
> 
> 标签：postgresql, plpgsql, postgresql-9.1

有什么办法，如何检查我的环境中是否已经设置了变量？

例子：

```
\set table_name countries
\i queries.sql 
```

查询.sql：

```
SELECT * FROM :table_name; 
```

我想让 query.sql 被独立调用并使用我指定的一些默认表名。

这是可能的还是我真的需要创建另一个 SQL 文件来调用查询 (\i)？

我的用例是在 pgTAP 单元测试（带有一些示例表名）和独立地使用我的 SQL 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:46:01.897

您可以使用以下方法检查当前值：

```
SELECT :'table_name'; 
```

您可以在调用 psql 时使用类似`--set='table_name'`psql 命令行的方法设置它。

# fortran - Fortran 中的匈牙利表示法

> ID：10575326
> 
> 赞同：1
> 
> 时间：2012-05-13T21:17:32.327
> 
> 标签：fortran, hungarian-notation

它被认为是好的还是坏的做法？我的一个朋友告诉我，一般来说，现在大多数语言都认为这不是一个好的做法，但他认为他听说 fortran 不是这种情况。这是真的？如果这是真的，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T21:40:34.897

在 30 多年的 Fortran 编程中，我从未遇到过使用匈牙利符号的人。您的朋友可能会混淆 Fortran 长期以来（现在已弃用）根据名称的首字母隐式键入变量的能力。但这早在人们对现在所谓的匈牙利符号的广泛认识之前就已经存在了。

关于在编写 Fortran 时匈牙利表示法是否是或将是采用的好主意这一更普遍的问题，我同意 David，并且（我认为）更广泛的软件开发社区认为它是一种不太有用的做法. Fortran 当然不需要它，变量（和其他）名称遵循与许多编程语言中的规则非常相似的规则。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-13T21:41:14.787

**系统匈牙利语**

[系统匈牙利](http://en.wikipedia.org/wiki/Hungarian_notation)表示法本质上将*类型*信息添加到变量名称中，以便您了解正在使用的值的类型，并且不太可能以不正确的方式使用值。这在现代强类型语言中具有可疑的好处，因为类型安全性显着降低了错误使用/访问变量的机会。

但是，对于非强类型语言，包括此类信息可能是有益的，因为它可以让程序员不断了解他们正在处理的数据。

对 HN 的最大批评（除了它在强类型语言中的好处有限之外）是使用的类型前缀会导致变量名极其模糊和混乱，因此虽然您可能会获得一定程度的伪类型安全性，但您可能会失去代码的清晰度（或至少创建只有成为约定专家才能阅读的代码），这可能会损害可维护性。

如果您需要按照别人的命名约定生成代码，那么您别无选择，但如果您可以控制，您可以定义一个明智、清晰、简单的命名约定，可能更好地满足您的需求，在制作变量名称之间取得良好的平衡信息丰富并引入混乱的混乱。例如，一种做法是以`IsOpen`而不是的形式命名布尔变量`Open`，以避免混淆可用作动词和名词的词。当您将布尔值混合到整数或浮点表达式中时，它还可以很容易地看到。这种方法也很直观，因此任何程序员都不需要任何特殊知识即可阅读和理解代码。

* * *

**应用程序 匈牙利语**

针对第一条评论，还有另一种形式的匈牙利符号（Apps Hungarian）。有关它的更深入描述，请参见 Wikipedia，但本质上它将与变量的*使用*或*用途*相关的信息与其名称相关联，而不是其*类型*。

在强类型语言中，这是一种更有用的方法，非常值得考虑 - 或者至少在概念上（恕我直言）。我发现选择的前缀往往相当复杂和不友好（例如`rw`，`row`在我看来，只是混淆了前缀而没有任何实际收获）。我也认为许多例子是毫无意义的（例如`str`，表明一个变量是一个字符串，在许多语言中是多余的，因为字符串通常只以一种形式表示，并且如果变量被合理命名（“UserName”而不是“Data” ) 通常很明显它将是一个字符串)。

* * *

**现代替代方案**

在我看来/经验中，通常重要的是澄清变量之间的一些关键区别（例如，我们需要以完全不同的方式对待成员、指针、易失性和常量 - 将成员和参数混合或用错误索引数组index 变量可能是灾难性的，现代编译器几乎没有保护我们免受这些错误的影响）。如果使用合理的描述性变量命名，列表和字符串之间的区别通常很明显，并且类型安全语言会告诉我们是否混合了这些类型，因此我们不需要前缀。这导致了我自己的极其简单的前缀方法，这在我对[这个堆栈溢出问题](https://stackoverflow.com/questions/1228161/why-use-prefixes-on-member-variables-in-c-classes/1229360#1229360)的回答中进行了解释。

希望这篇文章可以让您在决定前缀是否对您有益时有所思考。最终，您应用的任何前缀方案都必须是您认为（或者更好，可以证明）对您和您的团队有益的东西。不要只是遵循别人的方案——想想前缀如何以及为什么有用，并在采用或丢弃它之前客观地评估它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T21:29:03.013

它实际上更多地取决于开发环境和团队标准，而不是语言。如果您碰巧在使用 Fortran，但在具有代码分析和导航功能的良好 IDE 中，那么您可能不需要 Hungarian Notation。

我认为要问自己的真正问题是，“匈牙利符号会给我什么？”

也就是说，它的价值是什么？即使使用旧语言，您仍然可以应用良好的编码实践和技术。保持例程小，变量范围小，等等。现在，我不是 Fortran 专家，所以我不知道有什么限制。但我想它仍然适用。

当您使用有限的编辑器（例如，在鼠标悬停时没有关于变量的信息）*以及*当您的变量具有相当长的生命周期时，匈牙利表示法特别有用。我的意思是变量的使用远远超出了它的定义。

自从 Fortran 很久以前成立以来，我们作为一个行业已经学到了很多关于组织代码和在开发团队中有效工作的知识。（即使团队只有您……请记住，您在几个月前编写的任何代码也可能是由其他人编写的。）您可以将这些经验应用于您的 Fortran 代码。

使用信息丰富的变量名称。存储并不昂贵，字符不再需要很长时间才能通过调制解调器发送...... 合理的长变量名称是可接受和鼓励的，只要它们传达有关该变量*是*什么和*含义*的信息。此外，保持变量的使用接近其定义。因此，周围代码的附加上下文揭示了有关变量的更多信息，而不仅仅是其名称。

简而言之，如果您在`price`整个应用程序中都有一个名为 used 的全局变量，那么调用它`dblPrice`来表明它是一个双精度变量会为变量名称添加有用的信息。但是有更有意义的方法来添加有用的信息。 `price`首先，对于大范围变量来说，这是一个糟糕的名称，如果可能的话，范围可能会变窄。

# algorithm - 使用 Scala 倒水

> ID：10575331
> 
> 赞同：1
> 
> 时间：2012-05-13T21:18:19.093
> 
> 标签：algorithm, scala, recursion, breadth-first-search

我正在尝试使用 scala解决[codechef的倒水问题。](http://www.codechef.com/problems/POUR1)问题陈述如下：

> 给定两个容器，其中一个可以容纳 1 升水，另一个可以容纳 b 升水，确定在其中一个容器中准确获得 c 升水所需的步骤数。
> 
> 开始时，两个容器都是空的。以下操作计为“步数”：
> 
> ```
> emptying a vessel,
> filling a vessel,
> pouring water from one vessel to the other, without spilling, until one of the vessels is either full or empty. 
> ```
> 
> 输入
> 
> 一个整数t，1<=t<=100，表示测试用例的个数，后面跟着t组输入数据，每组由三个正整数a（第一个容器能装的升数），b（个数第二个容器可以容纳的升数）和 c（一个容器应包含的最终水升量），不大于 40000，在单独的行中给出。
> 
> 输出
> 
> 对于每组输入数据，输出获得 c 升所需的最小步数，如果不可能，则输出 -1。
> 
> 示例 示例输入：
> 
> 2 5 2 3 2 3 4
> 
> 样本输出：
> 
> 2 -1

我将这个问题作为图论问题来处理。给定容器的初始配置为`(0, 0)`，我通过应用操作获得容器的下一个状态：

`FillA`, `FillB`, `PourAtoB`, `PourBtoA`, `EmptyA`,`EmptyB`递归直到达到目标。

我的代码如下：

```
import scala.collection.mutable.Queue

def pour(initA:Int, initB:Int, targetCapacity:Int) {
    var pourCombinations = new scala.collection.mutable.HashMap[(Int, Int),Int]
    val capacityA = initA
    val capacityB = initB

    val processingQueue = new Queue[(Int, Int, Int, Int)]

    def FillA(a:Int, b:Int) = {
      (capacityA, b)                    
    }
    def FillB(b:Int, a:Int) = {
      (a, capacityB)
    }   
    def PourAtoB(a:Int, b:Int): (Int, Int) = {
      if((a == 0) || (b == capacityB)) (a, b) 
      else PourAtoB(a - 1, b + 1) 
    }
    def PourBtoA(b:Int, a:Int): (Int, Int) = { 
      if((b == 0) || (a == capacityA)) (a, b) 
      else PourBtoA(b - 1, a + 1)
    }
    def EmptyA(a:Int, b:Int) = {
      (0, b)
    }
    def EmptyB(a:Int, b:Int) = {
      (a, 0)
    }

    processingQueue.enqueue((0, 0, targetCapacity, 0))
    pourCombinations((0, 0)) = 0

    def pourwater(a:Int, b:Int, c:Int, numSteps:Int): Int = {
        println(a + ":" + b + ":" + c + ":" + numSteps)

        if((a == c) || (b == c)) {return numSteps}

        if(processingQueue.isEmpty && (pourCombinations((a,b)) == 1)) {return -1}

        //Put all the vals in a List of tuples
        val pStateList = scala.List(FillA(a, b), FillB(a, b), PourAtoB(a, b), PourBtoA(b, a), EmptyA(a, b), EmptyB(a, b))       

        pStateList.foreach{e =>
          {
            if(!pourCombinations.contains(e)) {
              pourCombinations(e) = 0
              processingQueue.enqueue((e._1, e._2, c, numSteps + 1))
            }
          }
        }   
        pourCombinations((a, b)) = 1
        val processingTuple = processingQueue.dequeue()
        pourwater(processingTuple._1, processingTuple._2, processingTuple._3, processingTuple._4)

     }
     val intialvalue = processingQueue.dequeue()
     pourwater(intialvalue._1, intialvalue._2, intialvalue._3, intialvalue._4)
} 
```

这有几个问题，首先我不确定我的递归步骤设置是否正确。另外，可能是我没有使用正确的 Scala 约定来解决这个问题。另外，我希望 pour 函数在`numSteps`完成执行后返回。目前它没有这样做。

如果有人可以通过我的代码并指出我的方法的错误，那就太好了。

谢谢

# java - 在 jTextArea 中处理文本

> ID：10575336
> 
> 赞同：-4
> 
> 时间：2012-05-13T21:18:55.993
> 
> 标签：java, swing

我正在尝试在我的程序中实现一个文档侦听器。到目前为止，每次用户输入一个新单词时，我都会获取整个文本并保存它。我想要做的是只获取输入的新单词/单词并处理它们。你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:24:04.767

[http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)上的文档怎么样？基本上，来自 insertUpdate 事件的参数 DocumentEvent 包含文本。您将不得不从对象 e 中检索文本。

我的建议是尝试一些代码，我们会看看你对 DocumentListener 了解多少，好吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T05:26:58.443

以下是与您上面类似的建议代码：

```
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.util.Arrays;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.text.BadLocationException;
import javax.swing.text.Document;

//public class DocumentListener {       // Fix: not a good name for the class since it is part of JVM
  public class DocumentEventDemo extends JFrame {   // easier than extends JPanel
      JPanel txtPanel, centerPanel;
      GridLayout grid;

      JTextField txtField;
      JTextArea txtArea;
      JFrame frame;
      JComponent newContentPane;

      FlowLayout flow;

      public DocumentEventDemo() {

          txtArea = new JTextArea();
          txtArea.getDocument().addDocumentListener(new MyDocumentListener());
          txtArea.getDocument().putProperty("txtArea", "MyDocumentListener");

//        txtField = new JTextField(10);    // 10 chars max
//        txtField.setText("12345");

          centerPanel = new JPanel();
          grid = new GridLayout(2,1,1,1);

          txtPanel = new JPanel();
          flow = new FlowLayout(FlowLayout.CENTER);
          txtPanel.setLayout(flow);

          //Adding control GUI fields to the only panel
          // txtPanel.add(txtArea);
          // txtPanel.add(txtField);

          // Forming the center view with GUI controls
          centerPanel.setLayout(grid);
//        centerPanel.add(txtPanel);
          centerPanel.add(txtArea);

          // Add Panels to the Frame
          getContentPane().add(centerPanel,"Center");

          this.setSize(500,200);
          this.validate();
          this.setVisible(true);
          setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

//        newContentPane = getRootPane();
//        newContentPane.setOpaque(true);
//        frame.setContentPane(newContentPane);

}

    //MyEditor editor = new MyEditor(); // what is MyEditor?

    //javax.swing.event.DocumentListener mydocumentListener = new javax.swing.event.DocumentListener()

    // Make a class to define the inherited abstract methods, which are also events.
    class MyDocumentListener implements DocumentListener {
       String[] word=new String[50];
       String text; 
       int i=0;
       int y;
       int l;
       int len;

       public void changedUpdate(DocumentEvent documentEvent) {
           System.out.println("The text has been changed.");
       }

       public void insertUpdate(DocumentEvent documentEvent) {
           try {
               GetWord(documentEvent);
           } catch (BadLocationException ex) {
               Logger.getLogger(DocumentListener.class.getName()).log(Level.SEVERE, null, ex);
           }
       }

       public void removeUpdate(DocumentEvent documentEvent) {
           System.out.println("A character has been removed!");
       }

      private void GetWord(DocumentEvent documentEvent) throws BadLocationException {
          //get the type of event
          DocumentEvent.EventType type = documentEvent.getType();
          //check what is the event, hence what is the user doing  
          if (type.equals(DocumentEvent.EventType.INSERT)) {
              Document source = documentEvent.getDocument();

              y=documentEvent.getOffset();
              l=documentEvent.getLength();
              len=source.getLength();

              text = source.getText(y,l);
              if(text.equals(" "))
              {
                  for (int z=0;z<len;z++)
                  {
                      System.out.print(word[z]);
                  }
                  System.out.println("\n");
                  Arrays.fill(word,null); 
                  i=0;
              }

              word[i]=text;
              i++;
          } else  {
              System.out.println("A character has been removed!");
          } 
      }
    };  // DocumentListener class instantiation

//  editor. editArea.getDocument().addDocumentListener(mydocumentListener);

    public static void main(String args[]){
        new DocumentEventDemo();
    }

}   // TOP class 
```

* * *

笔记：

*   我认为，我最外层的类扩展了 JFrame，它以简单的方式创建了窗口和侦听器。
*   DocumentEventDemo 是创建 UI 控件和外观的构造函数。
*   我创建了一个实现 DocumentListener 的类。这样我可以覆盖抽象事件。
*   我的主要功能在 DocumentEventDemo 类的底部，实际上就像你的一样。
*   我没有看到 MyEditor 类的代码。因此我用 JTextArea 替换了它，就像一个编辑器。
*   您的代码 GetWord 似乎运行良好。恭喜！
*   您使用 System.out.println 的技术不起作用，因为该应用程序是 Windows GUI 应用程序而不是控制台，它适用于 System.out。
*   显然，您仍然需要使用 Listener 函数进行更改和删除。

玩得开心！

汤米奎

# c++ - Boost Spirit 继承的字符串属性填充向量 在 ascii 字符中

> ID：10575338
> 
> 赞同：1
> 
> 时间：2012-05-13T21:19:11.170
> 
> 标签：c++, boost-spirit

我正在尝试使用以下语法解析测试结果的日志文件。

```
template<typename Iterator>
struct test_step_parse: qi::grammar<Iterator, TestResults(), ascii::space_type> {
test_step_parse() : test_step_parse::base_type(rqmts) {
    using qi::lit;
    using qi::lexeme;
    using qi::omit;
    using qi::int_;
    using qi::eol;
    using qi::char_;

    test_step = lit("Test Step No.") >> int_;

    pass_or_fail = lit("-") >> (string("Passed") | string("Failed"));

    fdor_rqmts = -lit("OID")
                 >> lit("FDOR")
                 >> -lit("OID")
                 >> int_
                 >> *(-omit[char_(",/\\")] >> -(lit("FDOR") ^ lit("OID")) >> int_)
                 ;

    sard_rqmts = -lit("OID")
                 >> lit("SARD")
                 >> -lit("OID")
                 >> int_
                 >> *(-omit[char_(",/\\")] >> -(lit("SARD") ^ -lit("OID")) >> int_)
                         ;

    comment = lit("Comment:") >> lexeme[*(char_ - eol)] ;

    rqmts =  test_step
             >> pass_or_fail
             >> omit[*(char_ - lit("REQUIREMENT VERIFIED:"))]
             >> lit("REQUIREMENT VERIFIED:")
             >> (fdor_rqmts ^ sard_rqmts)
             >> omit[+char_("=")]
             >> -comment
             ;

    BOOST_SPIRIT_DEBUG_NODE(test_step);
    BOOST_SPIRIT_DEBUG_NODE(pass_or_fail);
    BOOST_SPIRIT_DEBUG_NODE(fdor_rqmts);
    BOOST_SPIRIT_DEBUG_NODE(sard_rqmts);
    BOOST_SPIRIT_DEBUG_NODE(comment);
    BOOST_SPIRIT_DEBUG_NODE(rqmts);
}

qi::rule<Iterator, TestResults(),  ascii::space_type> rqmts;
qi::rule<Iterator, int(), ascii::space_type> test_step;
qi::rule<Iterator, std::string(), ascii::space_type> pass_or_fail;
qi::rule<Iterator, std::string(), ascii::space_type> comment;
qi::rule<Iterator, std::vector<int>(),  ascii::space_type> fdor_rqmts;
qi::rule<Iterator, std::vector<int>(),  ascii::space_type> sard_rqmts;

}; 
```

语法分析正常。但是，当尝试自动填充我的用户定义结构时，std::string 类型的规则“comment”的属性被作为 ascii 数字传递到向量中。

这是我的用户定义结构：

```
struct TestResults {
    int test_step_no;
    std::string pass_or_fail;
    std::vector<int> FDOR;
    std::vector<int> SARD;
    std::string comment;
}; 

BOOST_FUSION_ADAPT_STRUCT(
    atp::TestResults,
    (int, test_step_no)
    (std::string, pass_or_fail)
    (std::vector<int>, FDOR)
    (std::vector<int>, SARD)
    (std::string, comment)
) 
```

调试输出表明规则公开了正确的类型，但不知何故，它们没有正确放置在结构中。

任何想法我做错了什么？对任何滥用术语等表示抱歉。

使用 gcc 4.6.3 并提升 1-47。谢谢你。

更新：为了澄清，所以我期待解析以下内容：

```
std::string test_test =
"Test Step No. 953-Failed\n"
"==============================================================================\n"
"STEP 7.7:\n"
"Test step, etc.\n"
"===============================================================================\n"
"REQUIREMENT VERIFIED: FDOR 12345"
"                      SARD 12345, 12356\n"
"===============================================================================\n"
"Comment: Didn't work.\n"
; 
```

使用调试器，似乎所有规则都正确地公开了它们的属性：

```
<rqmts>
  <try>Test Step No. 953-Fa</try>
  <test_step>
    <try>Test Step No. 953-Fa</try>
    <success>-Failed\n============</success>
    <attributes>[953]</attributes>
   </test_step>
   <pass_or_fail>
    <try>-Failed\n============</try>
    <success>\n===================</success>
      <attributes>[[F, a, i, l, e, d]]</attributes>
      </pass_or_fail>
     <fdor_rqmts>
     <try> FDOR 12345         </try>
         <success>                    </success>
         <attributes>[[12345]]</attributes>
    </fdor_rqmts>
    <sard_rqmts>
        <try>                    </try>
        <success>\n===================</success>
        <attributes>[[12345, 12356]]</attributes>
   </sard_rqmts>
   <comment>
       <try>Comment: Didn't work</try>
       <success>\n</success>
       <attributes>[[D, i, d, n, ', t,  , w, o, r, k, .]]</attributes>
  </comment>
  <success>\n</success>
       <attributes>[[953, [F, a, i, l, e, d], [12345], [68, 105, 100, 110, 39, 116, 32, 119, 111, 114, 107, 46], []]]</attributes>
 </rqmts> 
```

所以一切似乎都在工作，除了“评论”属性（std :: string）被填充在“SARD”属性（vector）中，作为ascii数字的向量，即，

```
[68, 105, 100, 110, 39, 116, 32, 119, 111, 114, 107, 46] = "Didn't work." 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:55:54.437

问题是解析器`(A ^ B)`返回的类型是 A 类型和 B 类型的元组，即在您的情况下`(fdor_rqmts ^ sard_rqmts)`返回 type `boost::tuple<std::vector<int>, std::vector<int> >`。

可以在[Boost 文档](http://www.boost.org/doc/libs/1_49_0/libs/spirit/doc/html/spirit/qi/quick_reference/compound_attribute_rules.html "提升精神：复合属性规则")中找到解析器如何组合的详细信息。

因此，您可以选择修改您的`struct`以适应解析器将返回的类型（这是属性语法的唯一选择）

```
struct TestResults {
    int test_step_no;
    std::string pass_or_fail;
    boost::tuple<std::vector<int>, std::vector<int> > FdorOrSard;
    std::string comment;
}; 
```

或指定动作。然后你的语法会变成这样：

```
struct TestResults {
    int test_step_no;
    std::string pass_or_fail;
    std::vector<int> FDOR;
    std::vector<int> SARD;
    std::string comment;
}; 

test_step [ at<0>(_val) = _1]
>> pass_or_fail [ at<1>(_val) = _1 ] 
>> omit[*(char_ - lit("REQUIREMENT VERIFIED:"))]
>> lit("REQUIREMENT VERIFIED:")
>> (fdor_rqmts [at<2>(_val) = _1 ] ^ sard_rqmts [at<3>(_val) = _1] )
>> omit[+char_("=")]
>> -comment [at<4>(_val) = _1]; 
```

这些动作仍然依赖于具有适应的结构，但现在它们明确地描述了如何放置解析的结果。请注意，我们没有对 的结果做任何事情`(A ^ B)`，而是对`A`结果或`B`结果做一些事情。

作为旁注，我遇到了混合问题`>`，以及决定在`>>`哪里`spirit`以有趣的方式嵌套结果 - 我个人发现几乎不可能确定返回的是什么结构，所以我倾向于坚持使用动作当我无法使基于属性的语法起作用。在这个问题中有更多关于这类事情的信息：[boost::spirit::qi Expectation Parser and parser grouping unexpected behavior](https://stackoverflow.com/questions/10378970/boostspiritqi-expectation-parser-and-parser-grouping-unexpected-behaviour)

**编辑：**我假设您知道操作是如何工作的，以及您需要的包含和使用语句。前几个精神解析器教程对此很有帮助，否则有任何问题都可以评论！您可能还必须使用`at_c`而不是`at`- 我真的永远无法弄清楚 boost phoenix / function 东西的细节......

# magento - Magento config xml - 继承值

> ID：10575339
> 
> 赞同：2
> 
> 时间：2012-05-13T21:19:16.693
> 
> 标签：magento

在配置 xml 中使用 stores 节点 - 是否可以操纵继承值（即确定网站范围或存储值的复选框）

例如，phone 的配置路径为：General > Store Information > Phone

所以在 xml 中，我将其定位为：

```
<stores>
        <my_store_code>
            <general>
                <store_information>
                    <phone>111 222 333</phone>
                </store_information>
            </general>
        </my_store_code>
    </stores> 
```

但是我如何确保这个值在网站上使用。路径似乎是 phone_inherit 虽然我无法通过 xml 直接定位它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T16:24:14.233

复选框的状态取决于是否在 core_config_data 表中设置了值。

您可以在 Mage_Adminhtml_Block_System_Config::initFields() 中看到这一点：第 295 行（Magento 1.7.0.0）：

```
if (isset($this->_configData[$path])) {
    $data = $this->_configData[$path];
    $inherit = false;
} else {
    $data = $this->_configRoot->descend($path);
    $inherit = true;
} 
```

`_configData`是从 core_config_data 表加载的路径/值数组。如果设置了路径（在数据库中），它将使用该值并将 $inherit 设置为 false（未选中）；否则，它会在范围 config ( ) 中查找值`_configRoot`并将 $inherit 设置为 true（选中）。

范围配置基于您在“当前配置范围”下的管理员中设置的内容。因此，如果您选择了商店视图，它将`general/store_information/phone`在`stores/my_store_code`. 根据您的配置，这可能会返回商店值、网站值、默认值或什么都不返回；商店值覆盖网站值，网站值覆盖默认值。

这意味着，在配置中，没有办法明确地说“从网站继承”。相反，当您更改“使用网站/默认”复选框的值时，Magento 通过添加/删除数据库中的值来模仿这一点。当您取消选中该框并输入自定义值时，Magento 会在 core_config_data 中添加一行。同样，如果您选择使用“网站/默认”值，Magento 将删除该行并查看范围配置。

例如，您可以选中“使用网站”，但如果您在 config.xml 文件中指定了存储值，Magento 将使用它。有点混乱，但这就是它的工作原理。因此，如果您希望您的商店使用网站值，则需要删除该值的商店配置 xml。

# c# - 服务器无法处理请求。---> 请求失败，HTTP 状态 401：未授权

> ID：10575341
> 
> 赞同：0
> 
> 时间：2012-05-13T21:19:21.180
> 
> 标签：c#, asp.net, .net, web-services, asmx

我有一个 Web 服务，我已经编写了它来向共享点列表添加值，我可以在本地机器上调用 Web 服务。但是当我将它部署到服务器时，我得到状态 401：未经授权。

谁能告诉我为什么我收到 401 代理错误，我试图在 Web 配置中添加代理标签，但它不起作用。

**代码**

```
 [WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
public class Req : System.Web.Services.WebService
{

    [WebMethod]
    public Guid Add()
    {

        string uniqueGuid = string.Empty;
        string[] uniqueID;
    try 
    {           
                CrmList.Lists list = new CrmList.Lists();
                list.PreAuthenticate = true;

                #region getvalue
                list.Credentials = System.Net.CredentialCache.DefaultCredentials;
                XmlNode ndLists = list.GetListCollection();

                //XmlNode test = list.GetList(listName);

                list.Url = "http://site/_vti_bin/Lists.asmx";

                System.Xml.XmlDocument xmlDoc = new System.Xml.XmlDocument();

                string listName = Properties.Settings.Default.ListGuid;
                string viewName = Properties.Settings.Default.ViewGuid; 
                string rowLimit = Properties.Settings.Default.RowLimit;

                System.Xml.XmlElement query = xmlDoc.CreateElement("Query");
                System.Xml.XmlElement viewFields =
                    xmlDoc.CreateElement("ViewFields");
                System.Xml.XmlElement queryOptions =
                    xmlDoc.CreateElement("QueryOptions");

                query.InnerXml = "<OrderBy><FieldRef Name='ID' Ascending='False' /></OrderBy>";

                viewFields.InnerXml = @"<FieldRef Name='ID' />";

                queryOptions.InnerXml = "";

                System.Xml.XmlNode nodeListItems = list.GetListItems(listName, viewName, query, viewFields, rowLimit, queryOptions, "09bdac52-8897-41ee-8a0e-df5fdba617e9");

                #endregion

                string listdata=string.Empty;
                string InvoiceType =string.Empty;

                    listdata= @"<Method ID=""1"" Cmd=""New"">";

                    listdata += @"<Field Name=""ID""></Field>";

                    listdata += @"</Method>";

                    System.Xml.XmlDocument xdoc = new System.Xml.XmlDocument() ;

                    System.Xml.XmlElement xbatch = xdoc.CreateElement("Batch");
                    xbatch.SetAttribute("OnError", "Return");
                    xbatch.InnerXml = listdata;

                    try
                    {
                        list.UpdateListItems(listName, xbatch);

                    }
                    catch (Exception ex)
                    {

                    }

        #region getguid
                    System.Xml.XmlNode currentListValues = list.GetListItems(listName, viewName, query, viewFields, rowLimit, queryOptions,Properties.Settings.Default.WebGuid);
                    string test = string.Empty;
                    XmlDocument xdoc1 = new XmlDocument();
                    XmlNamespaceManager nsmanager = new XmlNamespaceManager(xdoc1.NameTable);
                    nsmanager.AddNamespace("ns1", "http://schemas.microsoft.com/sharepoint/soap");
                    xdoc1.LoadXml(currentListValues.InnerXml);
                    System.Xml.XmlElement root = xdoc1.DocumentElement;
                    List<string> str1 = new List<string>();
                    XmlAttributeCollection attCol;

                    bool IsGuid;
                    foreach (System.Xml.XmlNode listItem in root)
                    {
                        string name = listItem.Name;
                        string value = listItem.OuterXml;
                        attCol = listItem.Attributes;

                        for (int i = 0; i < attCol.Count; i++)
                        {
                            IsGuid = attCol[i].Value.ToString().Contains("{");
                            if (IsGuid)
                            {
                                uniqueID = attCol[i].Value.ToString().Split('{');
                                uniqueGuid = uniqueID[1].ToString().Replace("}", "");
                                //str1.Add(uniqueGuid);
                                break;
                            }

                        }
                        if (!string.IsNullOrEmpty(uniqueGuid))
                        {
                            break;
                        }

                    }
        #endregion

    }

            catch (Exception exc)
            {

                throw ;
            }
    Guid currentItemGuid = new Guid(uniqueGuid);
    return currentItemGuid;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:28:58.720

您需要使用有效的凭据。DefaultCredentials 在您的计算机上工作，因为共享点知道用户。如果共享点在另一台机器上，您需要使用在 SharePoint 服务器上有效的用户和密码创建一个 NetwordCredentials。

# java - 什么会导致 java 进程大大超过 Xmx 或 Xss 限制？

> ID：10575342
> 
> 赞同：14
> 
> 时间：2012-05-13T21:19:26.310
> 
> 标签：java, linux, memory, jvm, xss

我有 7 个不同的 Java 守护程序，我在 3 个不同的服务器上运行（全部 7 个）。java命令行有-Xmx2048m和-Xss1024k。在这 3 台服务器上，所有 21 个进程的顶部和顶部的 VIRT 大小均显示为略低于 2.5 GB。RES 大小从 300 GB 到 1.9 GB 不等，具体取决于它是哪个守护进程。

这就是它应该的样子。

输入新服务器。更快的 CPU，更多的 RAM（16 GB 而不是 8 GB），稍微更新的 java（旧服务器上的 1.6.0_10-b33，新服务器上的 1.6.0_31-b04）。两个系统（和 JVM）都是 64 位的。

将 2 个守护进程移至新服务器。在新服务器上，给定相同的任务，守护进程既消耗大量 CPU（大约相当于一个内核的价值），又完成得更少。（从旧系统上的 5110 处理器移至新系统上的 5620）。

几乎是一个完整的额外核心 CPU 使用率（GC 线程？？），一个守护进程报告 5 GB VIRT 和 2 GB RES，另一个守护进程报告 10.5 GB VIRT 和 2 GB RES。

有什么想法会导致java忽略（或者如果是这种情况的话似乎忽略）内存限制？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-02T01:19:57.687

原来这是一个 glibc 问题。

对我来说，简短的回答是：

导出 MALLOC_ARENA_MAX=1

这将流程占用空间（顶部的 VIRT）减少了多达 5 倍。回到 CentOS 5 中看到的级别。

最新版本的 glibc 有一个新特性“每线程内存池”：

[http://www.centos.org/docs/5/html/5.4/Technical_Notes/glibc.html](http://www.centos.org/docs/5/html/5.4/Technical_Notes/glibc.html)

1.71.1 日志部分中的最后一项讨论了它（并指的是非公共错误......）

# javascript - CodeMirror - 是否可以滚动到一行以使其位于窗口中间？

> ID：10575343
> 
> 赞同：15
> 
> 时间：2012-05-13T21:19:29.817
> 
> 标签：javascript, jquery, codemirror

我在 CodeMirror 中突出显示 HTML 代码行，我想添加一个锚点，将 CodeMirror 编辑器滚动到给定的行。

[我可以通过setCursor](http://codemirror.net/doc/manual.html)方法滚动到 X 行。但我想在 CodeMirror 窗口中间有 X 行。我可以这样做吗？我研究了 API 和演示，但没有运气。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-09T12:14:06.023

这个应该工作：

```
var editor = CodeMirror.fromTextArea(...);

function jumpToLine(i) { 
    var t = editor.charCoords({line: i, ch: 0}, "local").top; 
    var middleHeight = editor.getScrollerElement().offsetHeight / 2; 
    editor.scrollTo(null, t - middleHeight - 5); 
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-13T05:15:43.237

这很简单。

在里面：

```
var editor = CodeMirror.fromTextArea(...); 
```

如果您希望稍后设置当前位置，您可以使用

```
editor.getScrollInfo(); 
```

它返回一个 JavaScript 对象：

```
{
  "left": 0,
  "top": 0,
  "height": 500,
  "width": 500,
  "clientHeight": 300,
  "clientWidth": 200
} 
```

现在您可以使用以下方法设置设置编辑器滚动位置：

```
editor.scrollTo(left,top); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-24T12:29:40.097

你想要[https://codemirror.net/doc/manual.html#scrollIntoView](https://codemirror.net/doc/manual.html#scrollIntoView)

注意应该做你想做的可选边距参数：

```
cm.scrollIntoView(what: {line, ch}|{left, top, right, bottom}|{from, to}|null, ?margin: number) 
```

您的代码将类似于：

```
cm.scrollIntoView({line:50, char:5}, 200) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T18:29:47.527

初始化：

```
var editor = CodeMirror.fromTextArea(...); 
```

在编辑器中间显示一行的功能：

```
function jumpToLine(i) {

    // editor.getLineHandle does not help as it does not return the reference of line.
    editor.setCursor(i);
    window.setTimeout(function() {
       editor.setLineClass(i, null, "center-me");
       var line = $('.CodeMirror-lines .center-me');
       var h = line.parent();

       $('.CodeMirror-scroll').scrollTop(0).scrollTop(line.offset().top - $('.CodeMirror-scroll').offset().top - Math.round($('.CodeMirror-scroll').height()/2));
   }, 200);
} 
```

# java - 处理多部分数据时的 Servlet 问题？

> ID：10575346
> 
> 赞同：0
> 
> 时间：2012-05-13T21:19:41.633
> 
> 标签：java, android, jsp, servlets, http-post

我一直致力于通过多部分帖子将数据发送到 servlet。我的 Android 代码运行良好。但是在 servlet 中，当我尝试解析请求时，会收到我不理解的错误消息。

**安卓**

```
public void myClickHandler(View view)
{       
    //String path="http://10.0.2.2:8080/upload/uploadedimg";
    String path="http://10.0.2.2:8080/ImageLocalizer/Localize";
    String pathToFile="/sdcard/building.jpg";
    text1.setText(path);

    try
    {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(path);
        Bitmap bitmapOrg = BitmapFactory.decodeFile(pathToFile);
        ByteArrayOutputStream bao = new ByteArrayOutputStream();
        //compressing the image byte array
        bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);
        byte [] data = bao.toByteArray();    

        ByteArrayBody bab = new ByteArrayBody(data,"/sdcard/building.jpg");
        MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
        reqEntity.addPart("caption", new StringBody("nabeel"));
        reqEntity.addPart("uploaded", bab);
        httppost.setEntity(reqEntity);
        HttpResponse response = httpclient.execute(httppost);
        Toast.makeText(this, "Connection Established", Toast.LENGTH_LONG).show();
        BufferedReader in = new BufferedReader(new InputStreamReader(response.getEntity().getContent())); 

        String res,msg="";
        while ( (res = in.readLine()) != null )
            msg+=res;

        text2.setText(msg);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG).show();
    }
} 
```

**伺服器**

```
boolean isMultipart = ServletFileUpload.isMultipartContent(request);

if (isMultipart) {
    //List<FileItem> fileItems;
    try {
        System.out.println("There is somwething transfered");
        FileItemFactory factory = new DiskFileItemFactory();
        ServletFileUpload upload = new ServletFileUpload(factory);

        System.out.println("DISK");
        System.out.println("Iterator");
        List<FileItem> fields = upload.parseRequest(request);
        out.println("Number of fields: " + fields.size() + "<br/><br/>");

    } catch (FileUploadException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

    }

尝试使用时出现以下错误`upload.parseRequest(request)`

```
org.apache.tomcat.util.http.fileupload.FileUploadException: Stream closed
    at org.apache.tomcat.util.http.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:336)
    at org.apache.tomcat.util.http.fileupload.servlet.ServletFileUpload.parseRequest(ServletFileUpload.java:129)
    at Localize.doPost(Localize.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462) 
```

# javascript - 数组的第一个成员

> ID：10575347
> 
> 赞同：0
> 
> 时间：2012-05-13T21:19:45.383
> 
> 标签：javascript

我有一系列用 css display:none; 隐藏的 div。

```
<div id="" class="hidden_row">some code</div>
<div id="" class="hidden_row">some code</div>
<div id="" class="hidden_row">some code</div> 
```

我还有一个带有 onclick “addRow();”的按钮 该函数旨在通过将其 css 声明更改为“display:block;”来在每次单击时顺序显示一个隐藏行。javascript看起来像这样：

```
function addRow(){
    var hiddenrow = getElementsByClassName(document, "*", "hidden_row");

    for(var i=0; i< hiddenrow.length; i++){
        if(hiddenrow[i].style.display = "none"){
            hiddenrow[i].style.display = "block";
        }
    }
} 
```

但是，该函数在执行时不会更改数组的 1 个成员（这是我想要的），它会找到隐藏的行并将它们全部显示出来。如何调整我的功能以使其按预期工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T21:21:43.683

您的 if 语句中有错字

```
if(hiddenrow[i].style.display = "none"){ 
```

应该

```
if(hiddenrow[i].style.display == "none"){ 
```

编辑：请注意 .style.display 仅检查内联样式，因此您必须检查

```
if(hiddenrow[i].style.display != "block"){ 
```

相反，因为这更好地支持你想要的

正如 Darhazer 所说，如果你想一次只显示一个，你需要`break;`在找到你想要的那个之后放一个。

工作 JsFiddle：http: [//jsfiddle.net/STGhq/](http://jsfiddle.net/STGhq/)

和你修改后的功能

```
function addRow(){
    var hiddenrow = document.getElementsByClassName("hidden_row");
    for(var i=0; i< hiddenrow.length; i++){
        if(hiddenrow[i].style.display != "block"){
            hiddenrow[i].style.display = "block";
            break;
        }
    }
}​ 
```

* * *

解决`element.style`仅拉取当前内联样式的问题，我发现[这篇文章](http://www.quirksmode.org/dom/getstyles.html)通过使用`window.getComputedStyle`or来解决这个问题`element.currentStyle`，两者都拉入当前*计算*样式，而不仅仅是内联声明。

[使用新代码http://jsfiddle.net/STGhq/2/](http://jsfiddle.net/STGhq/2/)工作 jsFiddle

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:22:40.677

首先，更正您的代码，因为您在 if 中分配一个值，而不是检查相等性。接下来，如果你可以打破循环，那么只会显示第一个显示为“none”的元素。

```
for(var i=0; i< hiddenrow.length; i++){
        if(hiddenrow[i].style.display == "none"){
            hiddenrow[i].style.display = "block";
            break;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T21:24:05.150

嗯，您是否在条件语句中将“==”错误地输入为“=”？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T21:26:12.013

如果您只想将此应用于第一行，并且仅当它的显示为“无”时，则不要循环。相反，只需使用数组中的第一项，如下所示：

```
if (hiddenrow.length > 0 && hiddenrow[i].style.display == "none"){
    hiddenrow[0].style.display = "block";
} 
```

OTOH，如果您只想将其应用于第一个具有 display = "none" 的项目，无论它是否是列表中的第一个项目，然后执行：

```
for(var i=0; i< hiddenrow.length; i++){
    if(hiddenrow[i].style.display == "none"){
        hiddenrow[i].style.display = "block";
        break;
    }
} 
```

break 运算符停止循环继续。

# android - 为什么这个 android 应用程序的最后一个按钮布局错误？

> ID：10575349
> 
> 赞同：0
> 
> 时间：2012-05-13T21:20:17.840
> 
> 标签：android, android-layout

![最后一个按钮图像乱序](../Images/4467c2bc8b839675c4d210a778ae6c33.png)

```
<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:text="Admissions"
        android:layout_marginLeft="14dp"
        android:textColor="#33b5e5"         
        android:textSize="28dp" 
        android:textAppearance="?android:attr/textAppearanceLarge"/>
</RelativeLayout>

<RelativeLayout
    android:id="@+id/relativeLayout2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.75" >

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="40dp"
        android:layout_marginBottom="-7dp"
        android:layout_marginRight="-6dp"
        android:layout_marginLeft="-6dp"
        android:gravity="fill"
        android:text="Application Form"
        android:shadowColor="#ffffff"
        android:shadowDx="2"
        android:shadowDy="2"
        android:shadowRadius="1"
        android:drawableRight="@drawable/ab" />

    <Button
        android:id="@+id/button2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button1"
        android:layout_below="@+id/button1"
        android:layout_marginBottom="-7dp"
        android:layout_marginRight="-6dp"
        android:layout_marginLeft="-6dp"
        android:gravity="fill"
        android:text="Prospectus"
        android:shadowColor="#ffffff"
        android:shadowDx="2"
        android:shadowDy="2"
        android:shadowRadius="1"
        android:drawableRight="@drawable/ab" />

    <Button
        android:id="@+id/button3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button2"
        android:layout_below="@+id/button2"
        android:layout_marginBottom="-7dp"
        android:layout_marginRight="-6dp"
        android:layout_marginLeft="-6dp"
        android:gravity="fill"
        android:text="Scholarship"
        android:shadowColor="#ffffff"
        android:shadowDx="2"
        android:shadowDy="2"
        android:shadowRadius="1"
        android:drawableRight="@drawable/ab" />

    <Button
        android:id="@+id/button4"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button3"
        android:layout_below="@+id/button3"
        android:layout_marginBottom="-7dp"
        android:layout_marginRight="-6dp"
        android:layout_marginLeft="-6dp"
        android:gravity="fill"
        android:text="Counselling"
        android:shadowColor="#ffffff"
        android:shadowDx="2"
        android:shadowDy="2"
        android:shadowRadius="1"
        android:drawableRight="@drawable/ab" />

    <Button
        android:id="@+id/button5"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/button4"
        android:layout_below="@+id/button4"
        android:layout_marginBottom="-7dp"
        android:layout_marginRight="-6dp"
        android:layout_marginLeft="-6dp"
        android:gravity="fill"
        android:text="Admission Helpline"
        android:shadowColor="#ffffff"
        android:shadowDx="2"
        android:shadowDy="2"
        android:shadowRadius="1"
        android:drawableRight="@drawable/ab" />

</RelativeLayout>

</LinearLayout> 
```

我制作了一个应用程序，其中我将图像应用到按钮的末尾，一个箭头按钮。这是我通过使用drawableright完成的。但最后一个按钮，我的按钮出现了一些不正常的东西..这是为什么？我试图将“admission helpline”文本减少为“admission”，以查看是否存在某些文本格式问题，但这也不起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:33:15.353

将最后一个 Button 的 alignRight 更改为 alignLeft。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:43:54.937

对于除您使用的最后一个按钮之外的其他按钮：

```
 android:layout_alignLeft 
```

但是对于您使用的最后一个：

```
android:layout_alignRight="@+id/button4" 
```

**将alignRight**更改为**alignLeft**为：

 **```
 android:layout_alignLeft="@+id/button4" 
```

结果如下： ![在此处输入图像描述](../Images/d2591a91883019544e3164ce814d07b8.png)**

# c# - 如何通过 ASP.net 运行 EXE 文件？

> ID：10575369
> 
> 赞同：0
> 
> 时间：2012-05-13T21:23:16.837
> 
> 标签：c#, asp.net

我在 C# 中为 ASP.NET 创建了一个页面来运行一个 exe 文件。我使用以下代码创建了一个按钮和一个事件：

```
 ProcessStartInfo info = new ProcessStartInfo(@"C:\inetpub\wwwroot\Share\myfile.exe");
        info.UseShellExecute = false;
        info.RedirectStandardInput = true;
        info.RedirectStandardError = true;
        info.RedirectStandardOutput = true;

        //info.UserName = dialog.User;
        info.UserName = "username";
        string pass = "MY pass";
        System.Security.SecureString secret = new System.Security.SecureString();
        foreach (char c in pass)
            secret.AppendChar(c);
        info.Password = secret;
        Process.Start(info); 
```

我从编译器执行并正常运行，但是当我在 localhost 中发布我的项目时，我没有采取任何行动。问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T21:29:34.477

你尝试了什么？应该是权利的问题。默认情况下，您的网站不应该能够执行外部可执行文件，因为这会带来严重的安全风险。也许您的问题有不同的解决方案，不涉及运行外部程序？

无论哪种方式，我都强烈建议不要直接从您的网站运行可执行文件。如果你真的必须运行程序，也许你可以编写一个简单的 Windows 服务，它可以接收消息（通过 WCF？），然后它将在隔离环境中执行你的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T17:30:38.657

在 asp.net 中执行（运行）应用程序，我使用了这种方法：

1）查看其他网站上的代码：

*   [http://www.codeproject.com/Tips/539195/Run-exe-inside-ASP-NET-and-catch-exception-using-A](http://www.codeproject.com/Tips/539195/Run-exe-inside-ASP-NET-and-catch-exception-using-A)
*   [http://forums.asp.net/t/1924673.aspx?How+to+execute+exe+form+asp+net+](http://forums.asp.net/t/1924673.aspx?How+to+execute+exe+form+asp+net+)
*   [http://www.codedigest.com/Articles/ASPNET/334_Working_with_exe_in_ASPNet-Calling_KillingAborting_an_exe.aspx](http://www.codedigest.com/Articles/ASPNET/334_Working_with_exe_in_ASPNet-Calling_KillingAborting_an_exe.aspx)

或者

2）在**web.config**中，在“ **assemblyIdentity** ”字段中，我添加了“impersonate”参数，如下所示：

从改变

```
<assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/> 
```

至

```
<assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35" impersonate="true" userName="myuser" password="123123"/> 
```

*（首先，您可能需要为该文件夹设置 sql/windows 用户和密码权限）。*

2）然后我在我的 asp.net 中使用了该命令（也许也使用了 asp 2.0）：

```
System.Diagnostics.Process.Start("C:\\inetpub\\my_application.exe" , "with-any-parameters"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-08-08T12:58:23.133

你可以试试

```
System.Diagnostics.Process.Start(MapPath("Windowscalculater.exe")) 
```

或者

```
Dim p As New Process
p.StartInfo.FileName = MapPath("Windowscalculater.exe")
p.Start() 
```

# scala - Scala 列表打印问题——IntelliJ IDEA

> ID：10575372
> 
> 赞同：1
> 
> 时间：2012-05-13T21:23:38.947
> 
> 标签：scala, intellij-idea

我有以下代码

```
object DispatchLibrary
{
  private var nodes = Map.empty[java.util.UUID, List[BigInt]]

  def addNode(uuid: java.util.UUID) = if(nodes contains uuid) nodes else (nodes += (uuid -> Nil))

  def addValue(uuid: java.util.UUID, value: BigInt) = nodes + (uuid -> (value :: (nodes get uuid getOrElse Nil)))

  //def getValue(uuid: java.util.UUID) : List[BigInt] = ???

  //def getValues() : List[BigInt] = ???

  def calculated(): Boolean = !nodes.exists(_._1 eq null)

  def main(args: Array[String]) : Unit =
  {
    val uuid = java.util.UUID.randomUUID()

    addNode(uuid)
    addValue(uuid, BigInt(999))
    addValue(uuid, BigInt(9999))

    nodes foreach {case (key, value) => println (key + "->" + value)}
  }
} 
```

在 IntelliJ IDEA 中运行上述代码会得到类似于以下输出的内容

```
8b2b4a7b-3e65-4de0-9035-8ee1d2910983->List() 
```

我不确定为什么没有打印列表。

从 REPL 运行类似的代码会给出预期的输出

```
scala> var nodes = Map.empty[Int, List[BigInt]]
nodes: scala.collection.immutable.Map[Int,List[BigInt]] = Map()

scala> nodes += (1->Nil)

scala> nodes += (1 -> (BigInt(999) :: (nodes get 1 getOrElse Nil)))

scala> nodes += (1 -> (BigInt(9999) :: (nodes get 1 getOrElse Nil)))

scala> nodes foreach {case (key, value) => println (key + "-->" + value )}
1-->List(9999, 999) 
```

如果您能帮助我编写评论的方法，我也将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T21:36:27.303

在您`addValue`编写的方法`nodes + (uuid -> (value :: (nodes get uuid getOrElse Nil)))`中，它不会更改中的列表`nodes`，而只会创建一个具有添加值的新副本。由于`Map`默认情况下是不可变的，因此您必须像`=`在方法中使用 -sign一样存储它`addNode`。

它打印任何内容的原因是因为第一个条目由 UUID（字符串）和 Nil（空列表）组成。“8b2b4a7b-3e65-4de0-9035-8ee1d2910983”是有道理的，因为它是 UUID。“List()”是打印 Nil 的结果（因为它是一个空列表）。

你有它。尝试改写`node += ...`。`addValue`

# winapi - 移动鼠标光标而不触发 WM_MOUSEMOVE

> ID：10575377
> 
> 赞同：6
> 
> 时间：2012-05-13T21:24:29.657
> 
> 标签：winapi, mousemove

[我想使用SetCursorPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648394%28v=vs.85%29.aspx)将鼠标困在窗口中间（就像在 FPS 游戏中一样）。

问题是当我这样做时，我的窗口会收到一个 WM_MOUSEMOVE ——它充其量会抵消用户想要的任何移动，最坏的情况是进入反馈循环。

我考虑过使用 GetCursorPos 读取该位置，如果它与使用 SetCursorPos 移动它的位置相同，则忽略该消息。这种方法的问题在于鼠标是异步的。如果程序落后了，那么 GetCursorPos 将返回一个与我预期不同的值——因此它不会知道忽略该消息。

有没有解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T09:51:02.857

此类输入应使用[RawInput](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645536%28v=vs.85%29.aspx) API 完成，并且当您的应用程序具有焦点时隐藏光标。这意味着它不受屏幕的限制，您实际上并不处理鼠标事件。

# javascript - 声明时运行的事件的 JavaScript 函数

> ID：10575379
> 
> 赞同：0
> 
> 时间：2012-05-13T21:24:45.877
> 
> 标签：javascript, function, event-handling

为什么当我加载页面时它运行函数并提醒我“函数运行”我没有在任何地方调用它我需要函数只在元素点击时触发。

```
<script type="text/javascript">

open_close = function() {
   alert("function run");
   //some code ...
}

window.onload = function() {
   //some code ...
   var myButton = document.getElementById('button');
   myButton.onclick = open_close();
   //some code ...
}

</script> 
```

这是 jfiddle 演示[http://jsfiddle.net/ayeBP/](http://jsfiddle.net/ayeBP/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T21:28:04.483

啊，但你*确实*运行了它：

```
myButton.onclick = open_close(); 
```

**括号调用一个函数。**改用这个：

```
myButton.onclick = open_close; 
```

[更好的是（单击以获取旧版 IE 支持）：](https://developer.mozilla.org/en/DOM/element.addEventListener)

```
myButton.addEventListener('click', open_close); 
```

* * *

> 好的，这是简化的函数，我实际上需要将 2 个变量传递给它，例如`myButton.onclick = open_close(var1,var2);`

您*仍然*不能像一直尝试那样使用括号，因为括号会调用该函数。使用匿名函数：

```
myButton.onclick = function () {
    open_close(var1, var2);
};

// or, even better,
myButton.addEventListener('click', function () {
    open_close(var1, var2);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:27:56.960

替换`open_close()`为`open_close`

在此处使用括号将立即调用该函数并将其返回值分配给`myButton.onclick`

# python - 用于编辑我的 UserProfile 模型的表单中的空值会导致所有内容为空

> ID：10575383
> 
> 赞同：0
> 
> 时间：2012-05-13T21:25:16.603
> 
> 标签：python, django, django-models, django-forms, django-views

我基本上想要完成的是，当用户编辑他的个人资料时，空白字段会导致所有内容都被覆盖。

例如：

如果添加了名字并且用户想要更改它，他将不必重新填写整个表单，他必须更改的唯一字段是名字字段。当表单被提交时，其他空白字段会导致他们的模型字段为空。

这是我尝试过的：

```
def editUserprofile(request):
    rc = context_instance=RequestContext(request)
    u = request.user
    if request.method=='POST':
        form = UserProfileEdit(request.POST, request.FILES)
        if form.is_valid():
            u = UserProfile.objects.get(user=u)
            if 'avatar' in request.FILES :
                u.avatar = request.FILES['avatar']
            if 'first_name' in request.POST:
                u.first_name = form.cleaned_data['first_name']
            if 'last_name' in request.POST:
                u.last_name = form.cleaned_data['last_name']
            if 'email' in request.POST:
                u.email = form.cleaned_data['email']
            if 'country' in request.POST:    
                u.country = form.cleaned_data['country']
            if 'date_of_birth' in request.POST:
                u.date_of_birth = form.cleaned_data['date_of_birth']
            u.save()
            return HttpResponseRedirect(reverse('photocomp.apps.users.views.editUserprofile'))
    else:
        u = UserProfile.objects.get(user=u)
        form = UserProfileEdit()
    return render_to_response('users/editprofile.html',
                             {'form':form, 'u':u},
                             rc) 
```

我可以在不编辑模型内容的情况下让空字段通过吗？

希望它不会让你感到困惑！

如果您想了解更多详细信息，请告诉我:) 提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:39:15.237

由于这是编辑表单，您应该考虑使用当前值预先填写字段。这很容易通过向构造函数提交一个`instance`参数（如果您使用的是 ModelForm）。这将使用正确的值预先填充这些值，并且用户可以更改他/她想要的任何值。

```
form = UserProfileEdit(instance=u) 
```

[Django 文档链接](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)。

# php - $wpdb, ezSQL 类转义/过滤器与否？

> ID：10575385
> 
> 赞同：2
> 
> 时间：2012-05-13T21:25:43.553
> 
> 标签：php, wordpress, methods

我的问题是关于 wordpress 中的 $wpdb 方法。例如，在运行这些方法之前：

```
$wpdb->query
$wpdb->get_results
$wpdb->get_var ... 
```

我们需要转义/过滤输入吗？每种方法都需要/首选此方法还是仅某些方法？

这是否足以处理所有非法字符（wordpress codex 中的示例）：

```
$wpdb->query( 
    $wpdb->prepare( "DELETE FROM $wpdb->postmeta WHERE post_id = '13' AND meta_key = 'gargle'" ,$id, $key )
); 
```

* * *

**编辑：**

正如下面的答案所示，确实对于每个用户输入，您都应该在插入数据库之前检查参数值。它不仅与安全性有关，还与 Web 应用程序的一般逻辑有关（例如，如果您在数据库中包含的数据不是您所期望的——即使是该数据，在前端解析某些内容，最终也不会为最终用户提供正确的结果从安全的角度来看是没有问题的）。

话虽如此，上面提到的 wordpress 准备方法 - 是从 sql 注入的角度保证和消除任何安全问题的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T22:45:15.813

wordpress codex pages 中的示例有错误。他们应该使用 %d 和 %s 而不是 '13' 和 'gargle'：

```
$wpdb->query( 
$wpdb->prepare( 
    "DELETE FROM $wpdb->postmeta
     WHERE post_id = %d
    AND meta_key = %s
    ", $id, $key )
); 
```

但是，您应该每次都检查变量的内容类型。您需要确保类型正确。例如，检查“post_id”变量内容是否为整数。

# android - CSS 媒体查询和我的 Nexus One（或其他 Android 手机）

> ID：10575388
> 
> 赞同：2
> 
> 时间：2012-05-13T21:26:12.753
> 
> 标签：android, css, node.js, media-queries, stylus

所以我有 2 部手机，一部 Android Nexus One 和一部便宜的简单 Android 设备，我以 100 美元的零售价购买。

我正在尝试使用@media 和 CSS 使我的网站移动设备友好（我实际上使用的是手写笔和 Node.JS，因此代码可能看起来有点滑稽）。

所以我在我的风格中添加了以下内容

```
//trial 1
@media (max-width:480px)
  display none
//Trial 2
@media (resolution: 163dpi)
    display none
//Trial 3
@media (-webkit-device-pixel-ratio:0.75)
  display none
//Trial 4
@media screen and (max-width:480px)
  display none 
```

起初我以为我的屏幕只是超高分辨率，但这些都没有帮助更便宜的设备。我的浏览器似乎一切正常，所以我很难过。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T22:25:23.857

尝试将此`meta`标签添加到`<head>`您的 html 中：

```
<meta name="viewport" content="width=device-width,initial-scale=1"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:05:26.980

正如 tw16 所说，您需要`width=device-width`告诉浏览器不要假装拥有更大的分辨率。另一方面，对于最新版本的 Stylus，这也是合法的：

```
.foo
  display block
  &
    @media (max-width:480px)
      display none
    @media (resolution: 163dpi)
      display none
    @media (-webkit-device-pixel-ratio:0.75)
      display none
    @media screen and (max-width:480px)
      display none 
```

编译为：

```
.foo {
  display: block;
}
@media (max-width:480px) {
  .foo {
    display: none;
  }
}
@media (resolution: 163dpi) {
  .foo {
    display: none;
  }
}
@media (-webkit-device-pixel-ratio:0.75) {
  .foo {
    display: none;
  }
}
@media screen and (max-width:480px) {
  .foo {
    display: none;
  }
} 
```

我发现这有助于保持与规范相关的媒体查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T21:28:34.373

从这个列表中尝试，希望它会有所帮助：

```
/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {

}
/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {

}
/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {

}
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {

}
/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {

}
/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {

}
/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {

}
/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {

}
/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {

} 
```

# forms - 在ajax调用中生成子表单

> ID：10575389
> 
> 赞同：0
> 
> 时间：2012-05-13T21:26:26.920
> 
> 标签：forms, symfony, symfony-forms

我有一个包含子表单集合的表单 - 不同学习的学生 - 关系 manyToOne。我有正确的数据库架构和实体，表单构建器运行良好。我不知道如何附加新的“研究”对象。在任何一种情况下，我都需要从某个地方获取 html 标签——当至少有一个“研究：对象（克隆他）或者没有这样的对象时。

假设研究对象有 2 个字段：名称和年份。如果学生有这样的记录（对象），则生成形式的第一个输入名称为“student[study][0][name]”。并且被包围。当我单击“添加新研究”按钮时，我想复制这个周围的 div 并分别更改 html 表单元素的 id 和 name。是否有现成的库或方法可以使用？

但是可能会发生到目前为止没有学习记录的情况。所以我需要通过ajax调用从服务器获取表单。不幸的是，返回的表单具有名称如“study [name]”的输入。是否可以使这种形式类似于第一种情况 - 我的意思是“学生 [学习] [0] [姓名]”。但我想避免手动为表单生成树枝模板 - 我更喜欢

```
{{ form_widget(form) }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:10:02.883

您应该处理`data-prototype`而不是发出单独的 AJAX 请求。此处描述了添加/删除子表单项的整个概念：

[http://symfony.com/doc/current/reference/forms/types/collection.html#adding-and-removing-items](http://symfony.com/doc/current/reference/forms/types/collection.html#adding-and-removing-items)

显然，您需要一些 JS（`jQuery`强烈推荐）才能复制子表单字段。

但是，您应该注意，`data-prototype`当您最初拥有空集合或非空集合时，其行为会有所不同。至少我遇到过这种奇怪的行为。据我记得，首先，当您说“`{{ form_rest(form) }}`附加”时`DIV`，附加了`data-prototype`由表单的 HTML 组成的属性。在第二种情况下，实际的 HTML（不是作为属性）附加了 ID 属性“form_name_$$name$$”，您需要将 $$name$$ 替换为适当的索引。

现在，你真的应该看看——也许所有这些都在最近的版本中得到了修复，但我不能确定......

希望这个对你有帮助...

# python - wxPython FileDialog if 和 else 语句的参考问题

> ID：10575390
> 
> 赞同：0
> 
> 时间：2012-05-13T21:26:51.907
> 
> 标签：python, wxpython

我在使用 if 和 else 语句时遇到了一些麻烦，我使用多个 wx.FileDialog 语句来更改文件类型，我允许用户根据选择的单选按钮进行选择。所以问题是我不断收到 UnboundLocalError ，我的局部变量分配给在分配之前引用的 FileDialog 语句。这是我的代码：

```
def OnOpen(self, e):
if self.radioButton1.GetValue():
   opendialog = wx.FileDialog(self, "Choose a file", "", "", "*.txt", wx.MULTIPLE)
if self.radioButton2.GetValue():
   opendialog = wx.FileDialog(self, "Choose a file", "", "", "*.csv", wx.MULTIPLE)
else:
   selectdialog = wx.MessageDialog(self,"Select process", "Warn", wx.OK)
   selectdialog.ShowModal()
   selectdialog.Destroy()
if opendialog.ShowModal() == wx.ID_OK:
   #More code to file path information 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:19:11.993

我猜你在没有定义 opendialog 的情况下陷入了第二个“if”语句的“else”条件。您需要确保它在每种情况下都以某种方式初始化，而不仅仅是在三个中的两个中。否则最后一个“if”语句将失败。所以请确保添加

```
opendialog = wx.FileDialog(self, "Choose a file", "", "", "*.csv", wx.MULTIPLE) 
```

到第二个“if”语句的末尾，它适用于所有情况。

# java - 访客设计模式

> ID：10575393
> 
> 赞同：-2
> 
> 时间：2012-05-13T21:27:21.583
> 
> 标签：java, visitor-pattern

访问者设计模式的接受方法是否可以由类层次结构的根实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:45:21.043

我想说的是，如果 Java 只允许您`accept`在基类中实现一次，那么这一事实将破坏 Visitor 的全部目的，对于 Java 和其他类似语言中缺少的多次调度来说，这是一个非常麻烦的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:04:55.320

从某种意义上说，是的，但是正确的访问者实现将要求您的基类实现有一个 if 链来检查基类的哪个子类`this`是一个实例，因为正如其他人指出的那样，访问者模式是为了实现类似多次分派的东西，这需要以某种方式区分对象的运行时类型。即，您要么以“正确”的方式实现访问者，`accept()`在每个子类中都可以分派一个，或者您`accept()`在层次结构的根部实现一个大的，如下所示：

```
public void accept(Visitor visitor) {
    if (this instanceof Foo) {
        doSomething();
    } else if (this instanceof Bar) {
        doSomethingElse();
    } else ...
} 
```

不是很漂亮，嗯？它违反了各种设计原则，包括适当的多态设计，这是访问者和多次调度的重点，所以再想一想，我认为调用那个访问者根本就有点牵强。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-09T10:43:54.920

你可以在基类中实现accept方法，但是你不能实现任何其他类，因为你只能扩展一个类，你不想因为你不想复制一个简单的单行函数而浪费它

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-13T21:30:11.873

在 Java 中这是不可能的，因为编译器不知道要绑定到什么方法。（某些语言具有基于对象的实际运行时类的动态方法绑定，但 Java 没有。）

# jquery - 这个跨度与用于定位的 ab 挂钩标签有何关系？

> ID：10575396
> 
> 赞同：0
> 
> 时间：2012-05-13T21:27:54.243
> 
> 标签：jquery, css-selectors

我有这个标记：

```
<b class="learn more">
Learn more <span class="closedTriangle">&#x25BA;</span><span class="openTriangle">&#x25BC;</span>
</b> 
```

这个jQuery：

```
$('.learnMore').click(function() {
    $(this).next().slideToggle('fast');
    $('.learnMore + .closedTriangle').toggle();
    $('.learnMore + .openTriangle').toggle();
}); 
```

我尝试用 $(this) 包装选择器，但我看到标记不在此上下文中。

我试图使用和相邻的选择器，但我还没有获胜。我正在尝试在箭头之间切换显示/隐藏，但仅在特定上下文中。我在页面周围有许多“了解更多”，因此只需选择课程就会影响页面上的所有课程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:32:51.733

## *[演示 jsBin](http://jsbin.com/onunus/2/edit)*

*   您在 HTML（类名）中有错字
*   并且在 jQuery 中只是引用 `this parent`喜欢：`$('YourChildrenElementOf', this)`

HTML：

```
 <b class="learnMore">  <!-- FIXED CLASS NAME TYPO -->
Learn more <span class="closedTriangle">&#x25BA;</span><span class="openTriangle">&#x25BC;</span>
</b> 
```

jQuery：

```
$('.learnMore').click(function() {
    $('span', this).toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:32:28.967

删除选择器中的 +。

```
$('.learnMore  .closedTriangle') 
```

表示类 .closedTriangle 的所有元素在类 .learnMore 的元素下

另外，请注意，在您的标记中，有 2 个单独的类，学习等等。.learnMore 类没有元素

# php - Youtube Oauth 2.0 API 视频上传失败

> ID：10575404
> 
> 赞同：2
> 
> 时间：2012-05-13T21:29:13.963
> 
> 标签：php, api, oauth, youtube

所以我设法建立了 oauth 2.0 youtube 视频上传，但每次我上传视频时，我都会收到一个 HTTP 400 错误，请求无效。

但最奇怪的是，视频正在上传到 youtube，同时有：失败（上传中止）。

我没有使用任何框架，因为谷歌还没有任何 oauth 2.0，所以我自己构建了所有代码。

而且我确实设法发送评论和东西....唯一的问题是视频上传本身。

我的代码：

```
public function uploadVideo($video, $title, $description, $category, $keywords) {
$url       = 'http://uploads.gdata.youtube.com/feeds/api/users/FacebookDevelopersIL/uploads';
$boundary  = uniqid();

$accessToken = $this->refreshAccessToken("13", "11313", 'REFRESHTOKEN');
$xmlString = "<?xml version='1.0'?><entry xmlns='http://www.w3.org/2005/Atom' xmlns:media='http://search.yahoo.com/mrss/'  xmlns:yt='http://gdata.youtube.com/schemas/2007'><media:group><media:title type='plain'>".$title."</media:title><media:description type='plain'>".$description."</media:description> <media:category scheme='http://gdata.youtube.com/schemas/2007/categories.cat'>".$category."</media:category><media:keywords>".$keywords."</media:keywords></media:group></entry>";
$videoData = file_get_contents($video);

$headers   = array(
    'POST /feeds/api/users/FacebookDevelopersIL/uploads HTTP/1.1',
    'Host: uploads.gdata.youtube.com',
    'Authorization: Bearer '.$accessToken,
    'GData-Version: 2',
    'X-GData-Key: key='.YOUTUBE_SRM_DEVELOPER_KEY,
    'Slug: IMG_0047.mp4',
    'Content-Type: multipart/related; boundary='.$boundary,
    'Content-Length:'.strlen($videoData),
    'Connection: close'
);

$postData  = "--".$boundary . "\r\n"
    ."Content-Type: application/atom+xml; charset=UTF-8\r\n\r\n"
    .$xmlString . "\r\n"
    ."--".$boundary . "\r\n"
    ."Content-Type: video/mp4\r\n"
    ."Content-Transfer-Encoding: binary\r\n\r\n"
    .$videoData . "\r\n"
    ."--".$boundary . "--";

$ch  = curl_init($url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 0);
$response = curl_exec($ch);
curl_close($ch);
Trace::dump($response); } 
```

我得到的错误：HTTP/1.1 400 Bad Request Server: HTTP Upload Server Built on May 7 2012 18:16:42 (1336439802) Content-Type: text/html; charset=UTF-8 X-GUploader-UploadID: AEnB2Uq7cHcf6rS4bcamu18ChAF3gnKJqsF6U_dk2qB4WR9GhAoTL_-iUejitgead-Gh-1fpJcke1z68TAxoopS2vYiGmCW69A Date: Thu, 10 May 2012 11:55:24 GMT Pragma: no-cache Expires: Fri, 01 Jan 1990 00:00:00 GMT Cache -控制：无缓存，无存储，必须重新验证内容长度：15 连接：关闭

无效的请求

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:05:03.120

我注意到几件事：对 POST 和 Host 标头进行硬编码是一种糟糕的形式，因为 curl 会自动为您处理它们。我怀疑部分问题是在 $videoData 和最后一个边界标记之间插入了回车/换行符。这将被解释为视频文件的一部分。您所需要的只是换行符作为行分隔符。也许回车会使视频文件无效？

也许 curl_setopt($ch, CURLOPT_VERBOSE, true) 会提供一些照明。

这对我有用（在 Linux 主机上）：

```
 /*
    **  https://developers.google.com/youtube/2.0/developers_guide_protocol_direct_uploading
    */
    private function send_to_youtube($video_file, $video_info) {

        //  Refresh access token
        log_msg("Obtaining access token");
        $response = http_post($this->config['token_url'], array(
            'client_id'     => $this->config['client_id'],
            'client_secret' => $this->config['client_secret'],
            'refresh_token' => $video_info->refresh_key,
            'grant_type'    => $this->config['grant_type']
        ));
        if ($response['http_code'] != 200) 
            throw new Exception("Unable to obtain access token. ".print_r($response, true));
        $authorization = json_decode($response['contents'], true);

        //  Build multi-part upload request
        //  api xml and then video file contents
        $boundary = uniqid();
        $location = '';        
        if ($video_info->latitude && $video_info->longitude) 
            $location = '
  <georss:where>
    <gml:Point>
      <gml:pos>'. $video_info->latitude .' '. $video_info->longitude .'</gml:pos>
    </gml:Point>
  </georss:where>';

        $content  = '--'.$boundary.'
Content-Type: application/atom+xml; charset=UTF-8

<?xml version="1.0"?>
<entry xmlns="http://www.w3.org/2005/Atom"
  xmlns:media="http://search.yahoo.com/mrss/"
  xmlns:yt="http://gdata.youtube.com/schemas/2007"
  xmlns:georss="http://www.georss.org/georss"
  xmlns:gml="http://www.opengis.net/gml">
  <media:group>
    <media:title type="plain">'. $video_info->title .'</media:title>
    <media:description type="plain">
      '. $video_info->description .'
    </media:description>
    <media:category
      scheme="http://gdata.youtube.com/schemas/2007/categories.cat">
      '. $video_info->category .'
    </media:category>
    <media:keywords>'. implode(', ', $video_info->tags) .'</media:keywords>
  </media:group>
'. $location .'
</entry>
--'.$boundary.'
Content-Type: '. $video_info->type .'
Content-Transfer-Encoding: binary

'.file_get_contents($video_file).'
--'.$boundary.'--';

        $headers = array(
            'Authorization: '.$authorization['token_type'].' '.$authorization['access_token'],
            'GData-Version: 2',
            'X-GData-Key: key='.$this->config['dev_key'],
            'Slug: '.$video_info->filename,
            'Content-Type: multipart/related; boundary="'.$boundary.'"',
            'Content-Length: '.strlen($content),
            'Connection: close'
        );

        //  Upload video
        log_msg("Sending video '{$video_info->title}', {$video_info->url}");
        $ch  = curl_init($this->config['upload_url']);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $content);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
        curl_setopt($ch, CURLOPT_HEADER, false);
        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 0);
        $response  = curl_exec($ch);
        $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        curl_close($ch);

        if (!$http_code == 201) {           // Something other than 'New Entry'
            log_msg("Upload Failed: ".print_r($response, true));
            return new SimpleXMLElement();
        }

        $entry   = new SimpleXMLElement($response);
        $yt_link = $entry->link[0]->attributes()->href;
        log_msg("Upload Complete: ".$yt_link);

        return $entry;
    } 
```

# mysql - 从一个表中选择，其中第二个表中的 count=1 和另外两个条件

> ID：10575405
> 
> 赞同：1
> 
> 时间：2012-05-13T21:29:19.893
> 
> 标签：mysql

我需要选择现金支付且日期相同的交易，但仅适用于只有一次付款的交易（因此应从结果集中省略数字 14），因此正确的结果仅为 12 和 13。

```
 Table2                          Table1
num  | date | data | total       num | payment | date
12      xy     abc    2.5        12      cash     xy
13      xy     cbc    2.1        13      cash     xy
14      xy     acc    2.3        14      visa     xy
19      xy     def    2.0        14      cash     xy
27      xy     fgh    1.3        19      visa     xy
                                 27       mc      xy 
```

这样的事情在结果集中给出了 num 14 但应该省略 14。

```
SELECT num, data 
FROM Table2
WHERE num IN
(
SELECT num  FROM `Table1`
WHERE payment = 'cash'
GROUP BY `num`
HAVING ( COUNT(`num`) = 1  )
) 
```

总结正确答案（通过 tombom ）：

```
 SELECT t2.num, t2.data 
 FROM Table1 as t1
 INNER JOIN Table2 as t2 ON t1.num = t2.num
 AND t1.date = 'xy'  
 GROUP BY t1.num
 HAVING GROUP_CONCAT(t1.payment) = 'cash' 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:43:04.523

对不起，我完全误解了你的问题。以下是它的工作原理：

```
SELECT 
*
FROM
Table1 t1
INNER JOIN Table2 t2 ON t1.num = t2.num AND t1.date = t2.date 
GROUP BY t1.num
HAVING  GROUP_CONCAT(t1.payment) = 'cash' 
```

# java - 在使用 struts 验证时，我不希望 html:errors 中的项目符号

> ID：10575409
> 
> 赞同：1
> 
> 时间：2012-05-13T21:30:05.873
> 
> 标签：java, jakarta-ee, struts, validation

那么有没有办法从验证错误中删除项目符号。

```
 public ActionErrors validate(ActionMapping mapping, HttpServletRequest request) {
            String method = request.getParameter("method");
            ActionErrors errors = new ActionErrors();
            if (method != null) {
                if (method.equals("changepwd")) {
                    if (this.password == null || this.password.length() < 1) {
                        errors.add("password", new ![enter image description here][1]ActionMessage("errors.required","Password"));
                        //TODO: add 'error.name.required' key to your resources
                    } 
                   if (this.cnfpassword == null || this.cnfpassword.length() < 1) {
                        errors.add("cnfpassword", new ActionMessage("errors.required","Confirm Password"));
                        //TODO: add 'error.name.required' key to your resources
                    }
                }
            }
            return errors;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:40:19.067

使用以下消息键，此处显示了它们的默认值（我认为；我不记得了）：

```
errors.header=<h3><font color="red">Validation Errors</font></h3><ul>
errors.footer=</ul>
errors.prefix=<li>
errors.suffix=</li> 
```

[这里有一些进一步的信息。](http://www.niallp.pwp.blueyonder.co.uk/HelpTagsErrorsAndMessages.html#example1)

# javafx - javafx.scene.image.Image("flower.png") 在哪里寻找flower.png？

> ID：10575410
> 
> 赞同：19
> 
> 时间：2012-05-13T21:30:11.423
> 
> 标签：javafx, javafx-2

我想知道 JavaFX Image 构造函数的相对路径解析算法是干什么用的：

1.  独立应用程序。
2.  浏览器部署的应用程序。
3.  Webstart 部署的应用程序。

如果该算法可能会在多个位置查找，我想知道它们对于上述每个部署场景是什么。

如果将应用程序放置在 jar 中时独立应用程序的行为不同，我也想知道这一点。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-13T22:09:09.797

然后用户提供它的相对路径`new Image(String url)`将相对于应用程序的工作目录又名`System.getProperty("user.dir")`

1.  对于独立应用程序，它是您启动应用程序的文件夹
2.  对于从命令行 ( `javaws myfxapp.jnlp`) 运行的 web-start 应用程序，它的工作方式与独立应用程序相同
3.  对于从浏览器加载的插件启动或 webstart 应用程序，您无法可靠地确定工作目录的位置。它取决于浏览器，甚至取决于为该浏览器安装的插件。

所以总体方向是：对于独立应用程序，使用`url`与在`new File(String url)`. 对于 jnlp/plugin 使用带有协议或`Class.getResource()`方法的完整 url。

**更新：**请注意，此行为将在 2.2 中得到澄清和更改。见[http://javafx-jira.kenai.com/browse/RT-18291](http://javafx-jira.kenai.com/browse/RT-18291)

以下评论来自 RT-18291，概述了 2.2 的预期更改：

> Martin Sladecek 添加了评论 - 2012 年 5 月 15 日上午 10:53 在与 Richard Bair 讨论后，我们决定更改路径的当前（未记录）行为。目前，它们被视为 user.dir 相对。所有路径，无论是否带有前导斜杠，现在都将被解析为相对于类路径，这将与 CSS 一致，并且更符合用户的期望。对于 user.dir 相对路径，仍然可以使用“file:”URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T15:04:26.997

如果您使用的是“/”，则答案是“/” `getClass().getResourceAsStream()`，即 jar 文件的根目录（在其中）。不是 user.dir 也不是托管包的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-10T12:33:29.740

1.  `getClass().getName().toString()`搜索与您的 .java 文件相关的类文件（类的名称）所在的目录 ，将您的图像复制并粘贴到那里
2.  `Image image=new Image(getClass().getResourceAsStream("yourImageName.jpg"));`是必须的。

在 NetBeans 中，类所在的目录 NetBeansProjects/JavaFXProjectName/build/classes/packageName/

# jquery - 图像加载调用函数

> ID：10575417
> 
> 赞同：0
> 
> 时间：2012-05-13T21:31:20.553
> 
> 标签：jquery

我正在使用 jquery 循环插件创建带有缩略图的简单幻灯片。

[http://www.ttmt.org.uk/forum/slideshow/](http://www.ttmt.org.uk/forum/slideshow/)

缩略图位于窗口底部的粘性页脚中。

我希望幻灯片图像填充窗口的其余部分。

在调整窗口大小时，我正在调用此函数来调整图像大小

```
function resizeImg() {
  $('#slideshow img').css({'height':$('#wrap').height()-footerHeight,'width':'auto'});
} 
```

我的问题是当图像第一次加载时它没有填满空间并且它是原始大小。

图像加载时如何调用 resizeImg 函数。

```
 <!DOCTYPE html>
    <html>
      <head>
      <title>Title of the document</title>
      <!--jQuery-->
      <script type="text/javascript" src="js/jquery1.7.2.js"></script>
      <script type="text/javascript" src="js/cycle.js"></script>
      <!--CSS-->

      <style type="text/css">
        *{
          margin:0;
          padding:0;
        }
        ul{
          list-style:none;
        }
        /**/
        html, body {
            height:100%;
            text-align:center;
        }
        #wrap {
            margin:auto;
            min-height:100%;
            margin-top:-100px;
            text-align:left;
        }
        * html #wrap {
            height:100%
        }
        #header {
            background:red;
            border-top:100px solid #fff; 
        }
        #footer {
            background:#eee;
            margin:auto;
            height:100px;
            clear:both;
        }
        /**/
        #slideshow img{
          margin:0 0 0 55px;
          height:100%;
        }

        div#thumbWrap {
          position: relative;
          height: 100px;
          width: 500px;
          overflow: auto;
          margin:0 0 0 50px;
        }
        ul#thumbs {
          display: block;
          width: 2000px;
          padding: 15px 0 0 15px;
        }
        ul#thumbs li {
          display: block;
          float: left;
          padding: 0 4px;
        }
        ul#thumbs a {
          display: block;
          text-decoration: none;
        }
        ul#thumbs img {
          border: 3px #fff solid;
        }
        ul#thumbs a:hover img {
          opacity: 0.5;
        }
      </style>

      </head>

    <body>
      <div id="wrap">
        <div id="header">

        </div><!-- #header -->
        <div id="slideshow">
          <img src="images/01.jpg" alt="" />
          <img src="images/02.jpg" alt="" />
          <img src="images/03.jpg" alt="" />
          <img src="images/04.jpg" alt="" />
          <img src="images/05.jpg" alt="" />
          <img src="images/01.jpg" alt="" />
          <img src="images/02.jpg" alt="" />
          <img src="images/03.jpg" alt="" />
          <img src="images/04.jpg" alt="" />
          <img src="images/05.jpg" alt="" />
        </div><!-- #content -->
      </div><!-- #wrap -->

      <div id="footer">
          <div id="thumbWrap">
            <ul id="thumbs">

            </ul>
          </div>
      </div>

      <script type="text/javascript">

        $(window).load(function() { 

          $("#slideshow img").load(function () { 
            alert('here');
          })

          resizeImg();
          /*-cycle
          */
          $('#slideshow').cycle({ 
              fx:     'fade', 
              speed:  'fast', 
              timeout: 0, 
              pager:  '#thumbs', 
              before: resizeImg(),

              pagerAnchorBuilder: function(idx, slide) { 
                  return '<li><a href="#"><img src="' + slide.src + '" width="auto" height="50" /></a></li>'; 
              } 
          });
          /*-thumbnailScroll
          */
          var div = $('div#thumbWrap'), ul = $('ul#thumbs'), ulPadding = 15;
          var divWidth = div.width();
          div.css('overflow','hidden');
          var lastLi = ul.find('li:last-child');
          div.mousemove(function(e){   
            var ulWidth = lastLi[0].offsetLeft + lastLi.outerWidth() + ulPadding;        
            var left = (e.pageX - div.offset().left) * (ulWidth-divWidth) / divWidth;         
            div.scrollLeft(left);         
          });

          var footerHeight = $('#footer').height();

          function resizeImg() {
            $('#slideshow img').css({'height':$('#wrap').height()-footerHeight,'width':'auto'});
          }

          $(window)
            .scroll(resizeImg)
            .resize(resizeImg)
            .onload(resizeImg)
        });

      </script>

    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T22:33:04.680

这也是我过去处理过的一个令人沮丧的问题。不同的浏览器加载图像的方式不同。

我使用过的最简单的解决方案是只使用[jQuery.imagesLoaded 插件](http://desandro.github.com/imagesloaded/)，它也可以为您完成这项工作。

# c# - 使用 c# 隐藏 Asp.Net 用户控件

> ID：10575418
> 
> 赞同：-3
> 
> 时间：2012-05-13T21:31:38.503
> 
> 标签：c#, asp.net, c#-4.0, user-controls

我想知道在同一母版页上按下另一个用户控件中的按钮时是否可以隐藏/显示 asp 用户控件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T21:37:39.453

酒店`Visible`将为您完成这项工作。Button 上的 Click 处理程序类似于：

```
protected void ToggleButton_click(object sender, EventArgs e)
{
    TargetControl.Visible = !TargetControl.Visible;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:44:56.063

`users controls`如果您在同一页面中有 2 个。您可以使用此代码：

在用户控件 1

```
<asp:button Text="hide" runat="server" ID="B1" OnClick="HideOtherUserControl" /> 
```

并在代码隐藏中

```
 protected void HideOtherUserControl(object sender, EventArgs e)
    {
        Parent.FindControl("WebUserControl1").Visible = false;
    } 
```

# python - Python - 尝试编写一个测试 http 接口的脚本

> ID：10575422
> 
> 赞同：0
> 
> 时间：2012-05-13T21:32:45.490
> 
> 标签：python, testing, curl

呃，

我仍在掌握 Python 基础知识。

我目前的要求是开发一个 Python 脚本来测试多个设备的基于 Web 的界面的可用性（例如，您可能必须通过 Web 浏览器输入“http://192.168.0.2:9876”），这并不必须过于复杂。

我正在尝试从简单的 bash curl 命令进行转换，因为最初我在 bash 脚本中有如下内容：

```
 date=`date +"%Y-%m-%d_%H-%M-%S-%N"`
    curl -s --connect-timeout 1 ${ip} -o /dev/null
    test=$?
    if [[ $test == 0 ]] ;then
            echo "${date}:webping - Web Page Up for ${ip}" >> $log
    else
            echo "${date}:webping - Web Page Down for ${ip}" >> $log
    fi 
```

这适用于原始概念，但我希望在 python 中有类似的东西。输出可能会有所不同，在合理的范围内......任何人都知道从哪里开始。

PS我在这里查看了其他一些问题，但它们似乎给出了误报，接口已被“删除”（即我停止了服务）并且它仍然给出状态代码 200。

编辑：下面是我尝试过的代码。

```
for url in ["http://www.google.co.uk", "http://192.168.0.2:8000"]:
    try:
            connection = urllib2.urlopen(url)
            print connection.getcode()
            connection.close()
    except urllib2.HTTPError, e:
            print "none" 
```

更正：我得到以下结果......

```
Traceback (most recent call last):
  File "<stdin>", line 3, in <module>
  File "C:\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 391, in open
    response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 409, in _open
    '_open', req)
  File "C:\Python27\lib\urllib2.py", line 369, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1173, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "C:\Python27\lib\urllib2.py", line 1148, in do_open
    raise URLError(err)
urllib2.URLError: <urlopen error [Errno 10061] No connection could be made because the target machine actively refused it> 
```

我不希望看到 python 错误输出。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:40:01.533

查看[http://docs.python-requests.org/en/latest/index.html](http://docs.python-requests.org/en/latest/index.html)以了解 Python 模块，它提供了您需要的工具和友好的 API。在这种情况下，您将按照以下方式做一些事情：

```
import requests
...
try:
  r = requests.get(url, timeout=1)
  ok = (r.status_code // 100) == 2
except:
  ok = False

# now use the value of ok 
```

虽然我不知道我在那里使用的特定测试（成功意味着 2xx 响应）是否正是您想要的。

# javascript - 除非我触发我的连接回调两次，否则使用 strophe attach() 而不是 connect() 不起作用

> ID：10575426
> 
> 赞同：0
> 
> 时间：2012-05-13T21:33:10.080
> 
> 标签：javascript, xmpp, strophe

我正在使用韵律 XMPP 服务器并尝试“使用 JavaScript 和 jQuery 进行专业 XMPP 编程”中的第 3 章示例。它基本上是 ping - pong 的例子，它工作正常。问题是当我尝试修改此示例以在 cookie 中存储 jid、sid 和 rid 以使用此数据在页面重新加载时调用 strophie attach() 而不是 connect()。如果我一个接一个地执行两个或多个 ping，我的示例效果很好，如果我只执行一个服务器不返回任何内容。这是我的代码：

整个 Javascript 代码在[这里](http://pastie.org/3906971)

问题是当我收到两个 ping 并且 pong 处理程序被触发两次时，我`$(document).trigger('connected');`在`on_connect`函数中执行了两次。`status === Strophe.Status.ATTACHED`当我只触发一次 ping 时，不会调用 pong 处理程序。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:59:07.033

`attach()`
当您在代码中进行此更改时，您的编号必须加一：

```
Hello.connection.attach(data.jid, data.sid, parsInt(data.rid,10)+1, Hello.on_connect); 
```

# gwt - 使用 GWT RPC 调用将数据加载到 Sencha GXT (3.0) ListStore 的简单示例？

> ID：10575430
> 
> 赞同：7
> 
> 时间：2012-05-13T21:33:36.817
> 
> 标签：gwt, extjs, rpc, gxt

**是否有人拥有或知道一个示例，该示例演示了使用 Sencha GXT 3.0**通过 GWT RPC 调用将数据加载到 ListStore 中？我知道有很多使用 2.x 版本中使用的 ModelData 和 BeanModel 接口的示例，但是 3.0 不需要使用这些接口，并且据说允许使用实现 ValueProperty 接口的类加载 POJO 对象。

我在 3.0 Explorer 中看到过 RequestFactoryBinding 示例和 RequestFactory Grid 示例，但它们似乎演示了自定义数据代理和接收器的使用。通过查看这些示例中的代码，我假设这些技术/类可能是必需的，但这在任何地方都不明显。可能会有更多的文档即将发布，但到目前为止，除了 javadocs 和缺少示例方法中使用的一些源类的 Explorer 之外，我还没有找到任何东西。

以下两个示例的链接。

RequestFactoryBinding 示例： [http ://www.sencha.com/examples/#ExamplePlace:requestfactorybinding](http://www.sencha.com/examples/#ExamplePlace:requestfactorybinding)

RequestFactory 网格示例： [http ://www.sencha.com/examples/#ExamplePlace:requestfactorygrid](http://www.sencha.com/examples/#ExamplePlace:requestfactorygrid)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T03:19:12.780

`DataProxy`并且`Loader`主要用于促进a）依靠服务器进行过滤/分页/排序，或b）在应用程序的各个部分之间重用以访问相同的数据。在客户端只加载一次数据或完成手动存储管理的情况下，它们不是必需的（如 2.x 中）。

各种商店加载类 ( `ListStoreBinding`, `LoadResultListStoreBinding`) 在内部演示了如何为 ListStore 提供项目。`onSuccess`第一种方法允许您从RPC 回调或 RequestFactory 接收器中的方法替换商店中的现有项目：

```
List<MyData> newItems = ...;//response from server
ListStore<MyData> store = ...;//current store to replace/update
store.replaceAll(newItems); 
```

如果只加载一次，或者只添加而不是替换，则应使用其他方法：

```
store.addAll(newItems); 
```

可以使用 逐个添加项目`store.add`，但是这会导致每个项目发生一个事件，应该避免。

编辑：另外，从 2.x 开始，这可能并不完全清楚，但数据本身不需要超类/接口。`ValueProvider`仅用作如何操作模型的外部抽象 - 如何从任何类型的模型中读取或设置值。该`PropertyAccess`接口允许`ValueProvider`（和其他）实例仅由属性名称生成，这些值将从使用 bean 访问器获取/设置。加载数据不需要 ValueProvider 类型/实例，仅用于数据小部件本身提取它们正在显示的数据，并在用户编辑值后进行修改。

* * *

了解了这些部分，加载器/代理机制将以相同的基本方式加载数据。加载器负责在加载时被告知要使用哪些设置（分页、过滤和/或排序），然后触发加载——不同的子类有不同的职责，接受不同的加载配置类型，并返回不同的结果。然后，DataProxy 是一种机制，它实际上与任何保存数据的对象进行对话，如果在服务器上，则异步进行，并在结果可用时通过回调通知加载程序。

问题中列出的示例都使用 RequestFactory，但也有几个使用 RPC 的示例，以及一些仅从 JSON 或 XML 加载的示例。在[http://www.sencha.com/examples/#ExamplePlace:paginggrid](http://www.sencha.com/examples/#ExamplePlace:paginggrid)中主要的数据加载部分如下：

```
// The rpc async instance
final ExampleServiceAsync service = GWT.create(ExampleService.class);

// As in Ext GWT 2, there is a convenience proxy for RPC to just pass the callback 
// directly to the RPC call. If you need a custom callback, just be sure to invoke 
// `callback.onSuccess` with the final result.
RpcProxy<PagingLoadConfig, PagingLoadResult<Post>> proxy = new RpcProxy<PagingLoadConfig, PagingLoadResult<Post>>() {
  @Override
  public void load(PagingLoadConfig loadConfig, AsyncCallback<PagingLoadResult<Post>> callback) {
    service.getPosts(loadConfig, callback);
  }
};
// ...

// The loader itself has a reference to the proxy so that loader.load() results
// in a round trip to the server, as outlined above.
final PagingLoader<PagingLoadConfig, PagingLoadResult<Post>> loader = new PagingLoader<PagingLoadConfig, PagingLoadResult<Post>>(
    proxy);
loader.setRemoteSort(true);

// This last piece - instead of 2.x where the loader is a parameter to the store,
// in 3 you directly wire the results of the loader to add the items into the
// store, as discussed in the first half of this answer
loader.addLoadHandler(new LoadResultListStoreBinding<PagingLoadConfig, Post, PagingLoadResult<Post>>(store)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T01:29:21.907

FWIW 我加了一个远程分页和排序网格的[GWTP Dispatch 版本](https://subversion.assembla.com/svn/freshcode_public/learn/gwtp/src/main/java/biz/freshcode/learn/gwtp/client/paginggrid/PagingGridViewImpl.java)。这是带有命令模式扭曲的 GWT RPC。

假设您熟悉网格，您将需要以下实例：

*   `RpcProxy`
*   `PagingLoader`
*   `LoadResultListStoreBinding`

以及需要调用的方法：

*   `PagingLoader.setRemoteSort(true)`
*   `PagingLoader.addLoadHandler()`
*   `Grid.setLoader()`
*   `PagingToolBar.bind()`

# python - 带有 HTML 前端的 Python

> ID：10575432
> 
> 赞同：2
> 
> 时间：2012-05-13T21:34:00.203
> 
> 标签：python, html

我有一个在我的 Linux 服务器上运行的 Python 脚本。我想制作一个简单的 HTML 页面作为脚本的“前端”。它只需要从 Web 表单中获取 2 个值（该用户将插入访问网页）并将它们作为变量发送到后台的 Python 脚本，然后 Python 将使用这些值进行操作并使所有东西工作。

可能吗？

谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:44:14.877

听起来你需要 CherryPy

[CherryPy 文档](https://docs.cherrypy.org/en/latest/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T00:54:12.963

对的，这是可能的。您必须使用 Django 等 Web 框架来执行此操作。

您可以使用 HTML 文件中的 name 属性接收来自 HTML 文件的输入，如果返回输出，则可以使用 value 属性。

Web 框架使用处理程序来接收数据并将其发布到 HTML 表单。

为了使用 Web 框架，您需要将它们安装在您的服务器中，就像您在 Linux 服务器中安装 python 一样。

# c++ - C++ 编译的 C 代码与嵌入式编程中的纯 C？

> ID：10575434
> 
> 赞同：1
> 
> 时间：2012-05-13T21:34:46.420
> 
> 标签：c++, c, embedded

我已经阅读了 C 与 C++ 的内容，以及为什么 C 优于 C++，但是编写用 C++ 编译器编译的 C 代码并在嵌入式程序中使用会产生什么影响，标准定义可能存在一些差异，如空指针等。

更清楚地说，如果我只用 c 代码编写一个 embedded.cpp 并使用 c++ 编译器进行编译，那么生成的代码是否会与 Embedded.c 代码一样高效。我的猜测是 C 编译器已经高度优化并生成优化的代码。这就是全部原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T21:47:07.483

只有在查看特定编译器时，任何比较才有意义。一些领先的编译器对 C++ 和 C 使用完全相同的后端，并且库选择（影响磁盘占用、内存占用、启动时间和几乎所有其他内容）是相当自由地确定的，并且以比仅 C 与 C 更精细的方式确定。 C++，假设你真的很在乎。

所以在那种情况下，答案是，不，文件扩展名无关紧要。但是调用 C 程序 C 非常有助于您决定将产品限制为 C 以在您的团队中被理解。

请注意，嵌入式开发中反对 C++ 的许多论据来自十年或更早的一个时代，当时 C++ 编译器努力正确地实现该语言，有时以牺牲可预测的性能或运行时大小为代价。今天所有与我亲近的嵌入式开发实际语言战争都倾向于在 C++ 和 C# 之间进行，而 C 甚至很少被记住。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T23:35:18.353

如果您使用 c++ 编译器编译您的代码，则环境需要 c++ 运行时，包括堆栈展开、处理 ctor/dtor 条目等，这些可能不存在。

C 需要一个更简单的运行时环境（crt0 和一个干净的初始状态），并且应该在几乎所有平台上都准备就绪。

仅当您正在开发（或开发）操作系统、libstdc++ 或工具链对 c++ 支持有限的平台时，该决定才重要。

顺便说一句，我相信现代 C 和 C++ 编译器可以在大多数情况下生成同样优化的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T14:44:51.933

如果您使用 C++ 编译器编译代码，那么根据定义，该代码是 C++ 代码而不是 C，即使它也是有效的 C 代码。

一些有效的 C 代码不是有效的 C++ 代码，尤其是 C99 特定功能，一些在两者中都有效的代码可能具有稍微不同的语义——`const`例如的含义。但是，在大多数情况下，这对生成的代码或其性能几乎没有影响。

您通常会发现使用相同编译器套件对相同代码进行 C 和 C++ 编译之间没有实际可测量的性能差异。C++ 的运行时启动略有不同，它必须在 main() 之前调用全局静态对象的构造函数；但是，如果您的 C++ 代码也是有效的 C，则不会有构造函数，因此不会产生开销。

C++ 有更严格的类型协议要求和更强大的错误检查——它对什么是有效代码的宽容度有所降低；通常，如果您的 C 代码编译为 C++ 而没有错误或警告，那么它可能是更好/更干净的代码。有一些例外，例如在 C 中，通常[不鼓励显式转换从`malloc()`](http://c-faq.com/malloc/mallocnocast.html)，但在 C++ 中，人们别无选择，并且因为不需要隐式函数声明，所以在 C 中不这样做的论点不成立。因此，在这种情况下，要使您的 C 代码有效 C++，您必须以一种在 C 中有效的方式编写它，但有些人可能会认为这是不好的做法。就个人而言，如果您抑制或忽略 C 编译器关于缺少原型的警告，那么无论如何您都可能得到您应得的，所以我认为无论如何都要编写 C 代码以实现 C++ 兼容性。

关于优化，当使用相同的编译器套件时，C 编译器中的优化可能与 C++ 编译器中的优化相同，除了可能在精确语义不同的少数情况下。

Beyond that, to use C++ code that is valid C is to miss many of the benefits of C++. Rather a lot of C++ specific features are available to you at little or no runtime cost. Some features on the other hand are relatively expensive - be sure you know which are viable on your particular target and application before using them. I have listed some resources that may help with that in [another question](https://stackoverflow.com/questions/5710942/c-on-small-footprint-microcontrollers/5721471#5721471).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T08:36:59.367

C++ 运行时具有沉重的启动成本和终止成本。除非您必须使用 C++ 功能，否则您应该始终使用 C 而不是 C++ 构建。

此外，如果您的应用程序只是 C 代码，您还希望使用 throw() 装饰您使用的每个函数原型，或者 C++ 编译器假定您调用的每个函数都可以抛出并生成不是最优的代码。

# joomla - 将工作的 Joomla 2.5 站点从子域移动到根现在注销时出现 500 个错误

> ID：10575435
> 
> 赞同：1
> 
> 时间：2012-05-13T21:35:03.280
> 
> 标签：joomla, joomla2.5

我在子域中创建了一个 Working Joomla 2.5 网站。当我将站点移到根目录并移出子域文件夹时，注销时出现以下错误。致命错误：在第 20 行的 /directory/templates/rt_clarion/error.php 中的非对象上调用成员函数 init()

该构建在子域中运行良好，但在根中运行良好。我已经尝试了库存的 Joomla 模板，但在注销时仍然出现错误。我尝试禁用 Joomla SEF，没有。任何人有任何想法可能是什么？

该站点是通过使用akeeba备份移动并在根目录中恢复的。

我正在使用 Joomla 2.5.4、K2 v2.5.7、Rockettheme 模板 Clarion v1.2。再次构建在子域中完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:37:07.210

1）切换到默认模板：如果仍然有错误，则问题来自新安装。如果没有，这是您的模板（转到第 2 步）。

2) 备份硬盘上的 Clarion 模板文件夹并从后端卸载它。

3) 重新安装并检查错误。如果一切正常，请使用备份数据覆盖您的 Clarion 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:01:43.580

我建议重命名模板目录并重新安装该模板，因为这是发生错误的地方，除非您愿意探索 re_clarion 的配置/选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T22:13:49.927

第一步找出导致服务器抛出[500 错误的](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)原因- 检查您的服务器日志文件。这可能是一个简单的权限问题，例如。[如果目标具有 777 的权限，](http://www.google.com/search?q=apache+500+error+permission+777)大多数服务器都配置为抛出500 错误。

移动 Joomla 后！从子域安装，您可能需要更新全局配置 - 您可以通过管理屏幕或直接编辑`configuration.php`. 当人们创建 Joomla! 时，经常会发生这种情况！站点在子目录中，移动站点并删除子目录。

您需要检查的是日志和 tmp 目录之类的路径，例如

```
public $log_path = '/host/public_html/asite/sub-directory/logs';
public $tmp_path = '/host/public_html/asite/sub-directory/tmp'; 
```

可能需要改为：

```
public $log_path = '/host/public_html/asite/logs';
public $tmp_path = '/host/public_html/asite/tmp'; 
```

# c++ - 我无法在 Code::Blocks 中调试

> ID：10575437
> 
> 赞同：1
> 
> 时间：2012-05-13T21:35:34.527
> 
> 标签：c++, debugging, codeblocks

我知道这是一个很常见的问题，但是我尝试了很多东西，我没有人给我一个解决方案。我有一个带有 C::B 的 C++ 程序，但我无法调试。我在项目的“构建选项”中的“-g”选项中有勾号。我有“gdb.exe”作为调试器。但结果是这样的：

```
Building to ensure sources are up-to-date
Build succeeded
Selecting target: 
Release
Adding source dir: I:\Juego para practicar\
Adding source dir: I:\Juego para practicar\
Adding file: bin\Release\Juego para practicar.exe
Starting debugger: 
done
Registered new type: wxString
Registered new type: STL String
Registered new type: STL Vector
Setting breakpoints
**(no debugging symbols found)...(gdb)**
Debugger name and version: GNU gdb 5.2.1
No symbol table is loaded.  Use the "file" command.
Program exited with code 030000000472.
Debugger finished with status 0 
```

我能做些什么？我证明了一切，但仍然没有调试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-25T12:59:38.607

“..选择目标：释放..”

您正在发布版本，尝试在调试中重建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:16:15.487

粘贴您的构建日志，向我们展示您正在获得正确的编译器标志。例如，您应该使用 -g 来生成符号。您不应该使用 -s (strip) 来删除重定位等不需要的所有符号。

# ruby-on-rails - Heroku 可以使用哪些级别的日志记录？

> ID：10575438
> 
> 赞同：6
> 
> 时间：2012-05-13T21:35:35.343
> 
> 标签：ruby-on-rails, logging, heroku

我有一个在 Heroku 上运行的 Rails 应用程序，它运行良好。我让它在调试级别日志记录下运行，但现在我切换回 INFO。还有哪些其他级别的调试可用？当运行生产时，我应该使用什么级别的日志记录？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-02-04T20:07:27.707

在 Heroku 上，您可以使用 LOG_LEVEL 环境变量来设置日志级别

```
$ heroku config:set LOG_LEVEL=DEBUG 
```

有效值包括 DEBUG、INFO、WARN、ERROR 和 FATAL。或者，您可以在环境配置中设置此值：

```
config.log_level = :debug 
```

如果两者都设置 LOG_LEVEL 将优先。您很可能希望在生产中使用 INFO。

[查看 rails-stdout-logging gem](https://github.com/heroku/rails_stdout_logging)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T02:37:58.400

登录 Heroku 只是一个文本行流。所以你可以记录任何你想要的东西。您还可以过滤该流，使用附加组件来增强搜索，并获取日志的 syslog 消耗。

# java - Java读入一个文本文件，然后分成单独的数组

> ID：10575439
> 
> 赞同：0
> 
> 时间：2012-05-13T21:36:11.397
> 
> 标签：java, filereader

我有一个读入的文本文件。它的分隔符是`<.>`. 有一个主题，然后是三个段落。让我们说`title`, `section1`, `section2`, `section3`, 然后是下一篇文章。

如何存储数据，以便 ArrayList 1 将拥有所有标题，ArrayList 2 将拥有所有 section1 信息，等等？我希望能够输出这些数组。

例：
大风暴即将来临。

关于大风暴

风暴静力学

关于风暴的结论

上面的示例显示了一条记录的外观。

```
public void read()
{
    try
    {
        FileReader fr = new FileReader(file_path);
        BufferedReader br = new BufferedReader(fr);
        String s = "";
        // keep going untill there is no input left and then exit         
        while((s = br.readLine()) != null)
        { }
        fr.close();
    }
    catch (Exception e)
    {
        System.err.println("Error: read() " + e.getMessage());
    }
}

public static void main(String [] args)
{
    Reader reader = new ResultsReader("C:/data.txt");
    reader.read();
    String output = ((ResultsReader)reader).getInput();
    String str = "title<.>section1<.>section2<.>";
    String data[] = str.split("<.>");   
} 
```

我不确定如何将数据存储在单独的 ArrayList 中以便可以遍历它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:46:09.530

您无法创建数组并将数据放入其中，因为您不知道创建数组的大小。因此，请改用列表，然后在完成读取文件后将它们转换为数组：

```
List tilesList = new ArrayList<String>();
// etc.

FileReader fr = new FileReader(file_path);
BufferedReader br = new BufferedReader(fr);
String s = null // I think this should be null, so that if there are no lines, 
                // you don't have problems with str.split();
while((s = br.readLine()) != null) {
  String[] line = str.split("<.>");
  tilesList.add(line[1]);
  // etc.
}
fr.close();

String[] tiles = tilesList.toArray(new String[tilesList.size()]);
// etc. 
```

# java - JSF 2.1 中多个标签库共享相同的参数

> ID：10575440
> 
> 赞同：0
> 
> 时间：2012-05-13T21:36:20.777
> 
> 标签：java, jsf-2, primefaces

我使用 .xhtml 和视图范围的托管 bean 创建了一个自定义标记库 (JSF 2.1)。

在 taglib 中，我使用一个参数来打印一个购买按钮，如下所示：

```
<ui:composition>
<ui:param name="complement" value="_#{catId}_#{prdId}" />
<h:form id="formRating#{complement}">
    <h:panelGrid columns="3">
        <h:panelGrid>
            <p:commandButton action="#{BuyBean.buy(catId, prdId)}" value="Buy" update="formRating#{complement}" />
            <h:outputText value="#{BuyBean.getTotal(catId, prdId)}" />
        </h:panelGrid>
    </h:panelGrid>
</h:form> 
```

仅当我调用此标记库一次时，它才能正常工作。如果我调用两次或多次，他总是将相同的参数传递给“购买”。

```
<myTaglib:customTaglib catId="1" prdId="2" />
<myTaglib:customTaglib catId="3" prdId="4" />
<myTaglib:customTaglib catId="5" prdId="6" /> 
```

结果是 3 个按钮以“1”和“2”作为参数调用“购买”。

这是正确的行为还是我错过了什么？

非常感谢！

# php - 在 while 循环中使用 $sql 写入数据库

> ID：10575443
> 
> 赞同：0
> 
> 时间：2012-05-13T21:36:36.977
> 
> 标签：php, sql, while-loop

我希望你能帮助我解决一个 php 数据库问题。

------ 这里是 php 文件减去数据库信息 -------------

```
// Connect to server and select database
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select database");

// read data
    $query="SELECT * FROM $tbl_name ORDER BY ID ASC";
    $result=mysql_query($query);

// Start loop
$i=0;
$num=10;
while ($i < $num) {
$ID=mysql_result($result,$i,"ID");
$notes=mysql_result($result,$i,"notes");
$InStitches=mysql_result($result,$i,"InStitches");
$notes=mysql_result($result,$i,"notes");

echo"i=$i, ID=$ID | InStitches=$InStitches | notes=$notes";

if($notes=="In Stitches game"){
    // update data in mysql database 
    echo "<font color=\"#0000FF\"> || $ID yes ||</font>";
    $sql="UPDATE $tbl_name SET InStitches='yes' WHERE ID='$ID'";
    $ID2=mysql_result($result,$i,"ID");
    $InStitches2=mysql_result($result,$i,"InStitches");
    echo " || $ID2 $InStitches2 ||";
}

echo" - done<br/>";

// Increase value of i and continue loop
$i++;
} 
```

---- 这是我的显示器上显示的故障排除结果 ---

```
i=0, ID=1 | InStitches=yes4 | notes=this is a note - done
i=1, ID=2 | InStitches=yes4 | notes= - done
i=2, ID=11 | InStitches= | notes= - done
i=3, ID=12 | InStitches= | notes=tester, In Stitches game - done
i=4, ID=14 | InStitches=22 | notes=In Stitches game || 14 yes || || 14 22 || - done
i=5, ID=15 | InStitches= | notes= - done
i=6, ID=16 | InStitches= | notes= - done
i=7, ID=17 | InStitches= | notes= - done
i=8, ID=18 | InStitches= | notes=blog tour winner, tester - done
i=9, ID=19 | InStitches= | notes=tester - done 
```

* * *

对于 i=4 (ID=14)

“InStitches”字段为“22”，将在数据库中更改为“yes”。但它没有改变。它保持22。

我在其他 php 文件中使用 $sql 语句，它工作得很好。此脚本的唯一区别是我在 while 循环中有 $sql 语句。所以我在网上搜索并搜索是否是因为我在while循环中有$ sql语句。我在任何地方都找不到问题所在。我已经在这个脚本上工作了超过 8 个小时，而且我已经束手无策了。

知道为什么它不写入数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:40:34.663

您没有执行更新语句！

```
$sql="UPDATE $tbl_name SET InStitches='yes' WHERE ID='$ID'";
$ID2=mysql_result($result,$i,"ID"); 
```

应该

```
$sql="UPDATE $tbl_name SET InStitches='yes' WHERE ID='$ID'";
$result=mysql_query($sql); 
```

# asp.net-mvc-3 - MVC 3/设计模式问题

> ID：10575449
> 
> 赞同：1
> 
> 时间：2012-05-13T21:38:07.207
> 
> 标签：asp.net-mvc-3, design-patterns, c#-4.0

我为我的网站做了一个设置页面。在这个页面上，用户会看到一堆他们可以操作的站点范围的设置。我这样做是为了当用户选择一个设置时，页面会自动运行一个 ajax 请求以将设置发送到数据库。我的问题是我如何做到这一点。

起初我只是调用了存储库。一次调用以取回数据，将其放入 ViewModel，然后将该 ViewModel 提供给 View，然后 ajax 控制器将设置发送回数据库。这种方式一开始似乎是最好的，尤其是对于单元测试而言，因为如果需要我可以传入一个虚假的存储库。然后让用户获取他们刚刚调用存储库的设置并传入他们想要的设置名称。

然后我有了一个绝妙的主意。我创建了一个名为 SiteWideSettings 的单例类，站点上的每个可能设置都是站点的属性。首次调用 SiteSettings 时，会加载所有设置。当在任何属性上调用 Set 时，它将调用存储库函数来发送设置。现在使用我的设置视图，我只是传入 SiteWideViewOptions.Current 并在 ajax 调用中更新已更改的属性。这对我有用，但是它不是非常可单元测试的，因为我不能真正将存储库传递给单例的构造函数，因为它的构造函数是私有的。我目前所拥有的工作正常，但我只是觉得它不是最好的解决方案，并且单元测试在这里实际上是不可能的。

我正在考虑以下之一，但不确定哪个是最好的。

*   将 Repository 属性添加到 SiteWideSettings 类
*   向 SiteWideSettings 类添加函数以传入存储库
*   根本不使用单例，而是回到我有这个想法之前所做的事情

对此的任何评论将不胜感激。

笔记：我知道。我知道在这种情况下我做单元测试是错误的，因为我没有先写我的测试所以请不要为此责备我。我已经责备过自己，我的下一个任务我不会再这样做了承诺 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:53:26.460

> “然后我有了一个好主意。我创建了一个名为 SiteWideSettings 的单例类，然后……”

这听起来是个坏主意。让您的数据库对设置是真实的，而不是您现在需要保持最新的内存缓存。如果您需要 ORM 以提高性能，请让您的 ORM 进行缓存，否则您只会添加问题，特别是如果您现在尝试在多台服务器上运行您的网站。

如果您想简化控制器以减少“设置”和“拆卸”代码，请使用 IOC（例如 Autofac）并在每个控制器上注入您需要的任何依赖项（例如 DataContext 或存储库） -http请求基础。

您的操作方法现在更容易测试，因为您可以简单地实例化您的控制器（使用其构造函数手动注入依赖项），然后调用您的方法。

# java - Java：强制组件填满 GridLayout 中的整行

> ID：10575450
> 
> 赞同：1
> 
> 时间：2012-05-13T21:38:10.920
> 
> 标签：java, swing, layout, split, grid-layout

我正在编写一个允许多个用户共享屏幕截图的程序。每次用户连接时，参与“房间”的每个人（一群能够从彼此接收屏幕截图的用户）都可以看到用户拍摄的屏幕截图。为了能够看到屏幕截图，框架需要自行拆分，以便为该用户的屏幕截图提供专用空间。

我决定使用 GridLayout ，因为它将组件拆分为大小相同的矩形，这正是我要寻找的。布局完全符合我的需要，除了有一个问题。如果我的 GridLayout 配置为有两行和两列，即使只有一个组件，最底部的行仍将拆分为两列。这是预期的行为，但是否有走动，最好不使用不同的布局？我真的很喜欢 GridLayout 的简单性。我曾考虑使用 BorderLayout，但它是有限的，因为有一定数量的空间可以放置项目。

不支持图片的格式，所以我无法将它们嵌入到这个问题中。这是框架看起来已满的样子。我用实际的屏幕截图代替了按钮，因为我只是在测试。

[http://cl.ly/0N311g3w061P1B0W1T3s/Screen%20shot%202012-05-13%20at%204.23.25%20PM.png](http://cl.ly/0N311g3w061P1B0W1T3s/Screen%20shot%202012-05-13%20at%204.23.25%20PM.png)

现在这是我从最底行删除按钮时的外观：http: [//cl.ly/2j3Z0V1r3w1S3F160j05/Screen%20shot%202012-05-13%20at%204.23.41%20PM.png](http://cl.ly/2j3Z0V1r3w1S3F160j05/Screen%20shot%202012-05-13%20at%204.23.41%20PM.png)

这是我希望最底行的外观： [http ://cl.ly/0J2R2y2L06151F0k0Y0i/Screen%20shot%202012-05-13%20at%204.24.11%20PM.png](http://cl.ly/0J2R2y2L06151F0k0Y0i/Screen%20shot%202012-05-13%20at%204.24.11%20PM.png)

我怎样才能使最底部的行看起来像那样？请记住，我仍然希望其他行有两列，但我只希望最底部的行有一列。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T22:04:02.440

据我所知，你不能。GridLayout 就是这样完成的。

但是 GridBagLayout 将为您的程序做得很好。

看看这个按行和列排列按钮的小演示。（单击按钮将其删除）。

```
import java.awt.Component;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class Test4 {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();

                final JPanel root = new JPanel(new GridBagLayout());
                frame.add(root);
                frame.setSize(600, 600);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
                Timer t = new Timer(2000, new ActionListener() {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        final JButton b = new JButton("Hello" + root.getComponentCount());
                        b.addActionListener(new ActionListener() {

                            @Override
                            public void actionPerformed(ActionEvent e) {
                                root.remove(b);
                                updateConstraints(root);
                            }
                        });
                        root.add(b);
                        updateConstraints(root);
                    }
                });
                t.start();
            }
        });
    }

    protected static void updateConstraints(JPanel root) {
        if (!(root.getLayout() instanceof GridBagLayout)) {
            System.err.println("No a gridbaglayout");
            return;
        }
        GridBagLayout layout = (GridBagLayout) root.getLayout();
        int count = root.getComponentCount();
        int col = (int) Math.round(Math.sqrt(count));
        int row = (int) Math.ceil((double) count / col);
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.fill = GridBagConstraints.BOTH;
        gbc.weightx = 1.0;
        gbc.weighty = 1.0;
        int index = 0;
        for (int i = 0; i < row; i++) {
            for (int j = 0; j < col; j++) {
                gbc.gridx = j;
                gbc.gridy = i;
                boolean last = index + 1 == count;
                if (last) {
                    gbc.gridwidth = col - j;
                }
                Component c = root.getComponent(index);
                layout.setConstraints(c, gbc);
                if (last) {
                    break;
                }
                index++;
            }
        }
        root.doLayout();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T03:31:49.777

我决定采用稍微不同的方法。*由于在屏幕数量为偶数时使用 GridLayout 可以很好地布置单独的屏幕，因此我决定在屏幕数量为奇数*的情况下简单地将屏幕拆分为页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T21:57:47.433

我认为您想使用`GridBagLayout`- 查看[布局的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

特别是，使用 a `GridBagLayout`，您可以添加带有 a 的组件`GridBagConstraints`。这允许您指定每个组件的放置位置，以及每个组件应该具有的权重 - 例如，请参阅[GridBagLayout 教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)。

# c++ - 温度将两个 int 数字转换为浮点数

> ID：10575453
> 
> 赞同：0
> 
> 时间：2012-05-13T21:38:49.427
> 
> 标签：c++, c, floating-point, avr, avr-gcc

如何将表示浮点数的数字和小数部分的两个无符号整数转换为一个浮点数。

我知道有几种方法可以做到这一点，例如将小数部分转换为浮点数并将其相乘以获得小数并将其添加到数字中，但这似乎不是最佳选择。

我正在寻找执行此操作的最佳方法。

```
/*
 * Get Current Temp in Celecius.
 */
void  GetTemp(){

    int8_t digit = 0;      // Digit Part of Temp
    uint16_t decimal = 0;  // Decimal Part of Temp

    // define variable that will hold temperature digit and decimal part
    therm_read_temperature(&temperature, &decimal); //Gets the current temp and sets the variables to the value

} 
```

我想获取 Digit 和 Decimal 部分并将它们转换为浮点类型，使其看起来像 digit.decimal 。

它最终可能看起来像这样，但我想找到最优化的解决方案。

```
/*
 * Get Current Temp in Celecius.
 */
float GetTemp(){

    int8_t digit = 0;      // Digit Part of Temp
    uint16_t decimal = 0;  // Decimal Part of Temp

    // define variable that will hold temperature digit and decimal part
    therm_read_temperature(&temperature, &decimal); //Gets the current temp and sets the variables to the value

    float temp = SomeFunction(digit, decimal);  //This could be a expression also. 

    return temp;

} 
```

////更新/// - 7 月 5 日

我能够获得源代码，而不仅仅是利用库。我在这个[GIST DS12B20.c](https://gist.github.com/3057888)中发布了它。

```
 temperature[0]=therm_read_byte();
    temperature[1]=therm_read_byte();
    therm_reset();

    //Store temperature integer digits and decimal digits
    digit=temperature[0]>>4;
    digit|=(temperature[1]&0x7)<<4;
    //Store decimal digits
    decimal=temperature[0]&0xf;
    decimal*=THERM_DECIMAL_STEPS_12BIT;

    *digit_part = digit;
    *decimal_part = decimal; 
```

尽管该函数不会强制我们将单独的部分作为数字和小数返回，但从温度传感器读取似乎需要这样做（除非我遗漏了某些东西并且可以将其作为浮点数检索）。

我认为最初的问题仍然是使用这两个部分将其变为 C 中的浮点数的最佳方法（这是用于 AVR 和 8 位微处理器，使优化关键）或能够直接检索它作为一个浮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:09:30.263

您真正遇到的是使用定点数。这些可以用两种方式表示：或者作为具有已知大小的单个整数或乘数（即“十分之一”、“百分之一”、“千分之一”等；例如：以千分之一为单位的数字刻度值一个克，以 32 位整数保存——除以 10000 得到克），或者作为两个整数，一个保存“累积”或“整数”值，另一个保存“小数”值。

查看 <stdfix.h> 标头。这声明了类型和函数来保存这些定点数，并用它们执行数学运算。例如，当添加小数部分时，您必须担心滚动到下一个整数值，然后您需要增加结果的累加器。通过使用标准函数，您可以利用内置处理器功能进行定点数学运算，例如 AVR、PIC 和 MPS430 微控制器中的功能。非常适合温度传感器、GPS 接收器、秤（天平）和其他具有有理数但只有整数寄存器或算术的传感器。

这是一篇关于它的文章：“C 编程语言的定点扩展”，[https://sestevenson.wordpress.com/2009/09/10/fixed-point-extensions-to-the-c-programming-language/](https://sestevenson.wordpress.com/2009/09/10/fixed-point-extensions-to-the-c-programming-language/)

引用那篇文章的一部分：

> 我不认为扩展非常简化了固定类型的使用。程序员仍然需要知道有多少位分配给整数和小数部分，以及位的数量和位置如何变化（例如在乘法过程中）。扩展确实提供了一种无需编写汇编代码即可访问处理器的饱和和舍入模式的方法。通过这种访问级别，可以编写更高效的 C 代码来处理这些操作。

Scott G. Hall 美国北卡罗来纳州罗利

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:44:08.643

您的问题包含错误的假设。

如果给定一个十进制字符串并想要一个浮点值，第一步通常*不应*将其转换为两个整数。

例如，考虑数字`2.1`和`2.01`。每种情况下的“小数部分”是什么？1和01？两者都等于 1。那不好。

这种方法有意义的唯一情况是小数点后的位数是固定的——在这种情况下，可能 2.1 变成 (2,1000)，而 2.01 变成 (2,100)，或者其他什么。但除非你有这样做的积极理由（我强烈怀疑），否则你不应该这样做。

特别是，除非`therm_read_temperature`是其他人为您提供的函数并且您无法影响其接口，否则您应该使该函数的行为有所不同——例如，只返回一个`float`. （如果它*是*其他人提供的功能并且您无法影响其接口，那么要在此处获得有用的答案，您需要准确地告诉我们它的定义是做什么。）

# java - Java Scanner - 如何在使用 next() 后返回到最后一个单词

> ID：10575456
> 
> 赞同：1
> 
> 时间：2012-05-13T21:39:21.663
> 
> 标签：java, string, java.util.scanner

我目前有一个 If 语句，用于检查文档中的下一个单词是否等于某个长度。在它返回 true 后，我希望它将该单词添加到数组或字符串等中。我的问题是一旦我使用 next() 命令，即使我在如果声明。我对 Java 有点陌生，所以我希望这个简单的点击是有意义的。

```
Scanner in1 = new Scanner(inputFile);
String inputString;

while(in1.hasNextLine()){
     if(in1.next().length() == 6){
          inputString = in1.next();
     }
} 
```

基本上我有一个文件，其中包含多个单词，多行所有不同的长度。我想抓住其中有 6 个字符的单词。实际的 while 循环和文件更复杂，问题是它在评估 If 语句后跳转到下一个单词。因此，如果它检测到下一个单词有 6 个字符，它会将紧随其后的下一个单词加载到变量中。欢迎任何帮助或建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:44:46.530

将 的值捕获`next()`到变量中，进行比较，设置`inputString`为该变量。如果长度不正确，接下来的任何内容都可以使用相同的变量，避免额外的`next()`. 不确定这是否符合您的需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T21:45:14.703

您可以将此循环分成两部分：

1.  获取下一个令牌并存储它，并且
2.  使用该缓存的令牌。

例如：

```
while(in1.hasNextLine()) {
     String current = in1.next();
     if(current.length() == 6) {
          inputString = current;
     }
} 
```

这是使用迭代器或扫描器时的标准技术，原因正是您所指出的 - 该`next()`方法不能在不产生不同值的情况下多次调用。

顺便说一句，其他编程语言已经设计了它们的迭代器，以便获取被迭代的值并推进到下一个位置是单独的步骤。值得注意的是，C++ STL 认为这些是不同的操作。

希望这可以帮助！

# c++ - 伪造一个虚拟模板函数c ++

> ID：10575457
> 
> 赞同：2
> 
> 时间：2012-05-13T21:39:35.630
> 
> 标签：c++, templates, generics, boost

我意识到 C++ 中不允许使用虚拟模板函数。由于我的特定应用领域，我们处理算法集（通过多态性和继承自然实现）并且需要强制执行公共接口。特定的算法类在迭代器上工作（不足为奇），但是我们希望通过这些模板化函数来伪造虚拟化。这是我们使用 boost::mpl 提出的解决方案示例。我意识到这很长，但这是一个最小的代码示例，我可以创建它来模拟我的目标。我的具体问题在代码之后。

```
#include <iostream>
#include <vector>
#include <boost/mpl/list.hpp>
#include <boost/mpl/for_each.hpp>

using namespace std;

class A;
class B;
class C;

typedef boost::mpl::list<B, C> DerivedClassList; 

template<typename Base, typename Iterator>
struct VirtualFunc{
  public:
    VirtualFunc(Base* _memory, Iterator _begin, Iterator _end) : 
      m_memory(_memory), m_begin(_begin), m_end(_end){}

    template<typename T>
      void operator()(T& _t) {
        T* tptr = dynamic_cast<T*>(m_memory);
        if(tptr != NULL){
          tptr->Print(m_begin, m_end);
        }   
      }   

  private:
    Base* m_memory;
    Iterator m_begin, m_end;
};  

class A{
  public:
    A(){}
    virtual ~A(){}

    template<typename Iterator>
      void Print(Iterator _begin, Iterator _end){
        boost::mpl::for_each<DerivedClassList>(VirtualFunc<A, Iterator>(this, _begin, _end));
      }   
};  

class B : public A {
  public:
    B(){}
    virtual ~B(){}

    template<typename Iterator>
      void Print(Iterator _begin, Iterator _end){
        cout << "Begin::" << *_begin << endl;
      }
};

class C : public A {
  public:
    C(){}
    virtual ~C(){}

    template<typename Iterator>
      void Print(Iterator _begin, Iterator _end){
        for(Iterator it = _begin; it!=_end; it++)
          cout << "Iterator::" << *it << endl;
      }
};

int main(){
  vector<size_t> numbers;
  for(size_t i = 0; i<5; i++)
    numbers.push_back(i);

  A* printBegin = new B();
  A* printAll = new C();
  //faking virtualism will print just begin
  printBegin->Print(numbers.begin(), numbers.end());
  //faking virtualism will print all
  printAll->Print(numbers.begin(), numbers.end());
} 
```

那么这种“假虚拟”模板化函数的缺陷是什么？有没有更好更简洁的方法来做到这一点？

还要原谅代码标准，它们是我们在工作场所使用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T07:09:33.830

为什么不替换为经典的双重调度模式。看来您在基层知道您的类层次结构 - 所以我会使用以下内容。众所周知，Visitor 或 DoubleDispatch 模式并消除了无效的 dynamic_cast。坦率地说 - 如果我看到 dynamic_cast<> 我总是会考虑双重调度，

已知分类：

```
class A;
class B;
class C; 
```

虚拟主义的起点：

```
class IVirtualFunc {
  public:
    virtual void callFor(B& memory) = 0;
    virtual void callFor(C& memory) = 0;
}; 
```

模板参数的实现：

```
template<typename Iterator>
class VirtualFunc : public IVirtualFunc {
  public:
    VirtualFunc (Iterator _begin, Iterator _end) : begin(_begin), end(_end) {}
    virtual void callFor(B& memory);
    virtual void callFor(C& memory);
  private:
    Iterator begin;
    Iterator end;   
}; 
```

实际实现的抽象基类：

```
class A{
  public:
    template<typename Iterator>
    void Print(Iterator _begin, Iterator _end) {
        VirtualFunc<Iterator> vFunc(_begin, _end);
        dispatch(vFunc);   
    }
    virtual void dispatch(IVirtualFunc&) = 0;   
}; 
```

第一个使用双分派的实际实现（`VirtualFunc<Iterator>::callFor(B& b)`）：

```
class B : public A {
  public:
    B(){}
    virtual ~B(){}

    template<typename Iterator>
      void Print(Iterator _begin, Iterator _end){
        cout << "Begin::" << *_begin << endl;
      }
    virtual void dispatch(IVirtualFunc& vf) { vf.callFor(*this); }   
};

template<typename Iterator>
void VirtualFunc<Iterator>::callFor(B& b)
{
     b.Print(begin, end);
} 
```

第二个实际实现，对它进行双重调度（`VirtualFunc<Iterator>::callFor(C& c)`）：

```
class C : public A {
  public:
    C(){}
    virtual ~C(){}

    template<typename Iterator>
      void Print(Iterator _begin, Iterator _end){
        for(Iterator it = _begin; it!=_end; it++)
          cout << "Iterator::" << *it << endl;
      }
    virtual void dispatch(IVirtualFunc& vf) { vf.callFor(*this); }   
};
template<typename Iterator>
void VirtualFunc<Iterator>::callFor(C& c)
{
     c.Print(begin, end);
} 
```

它的工作证明：

```
int main(){
  vector<size_t> numbers;
  for(size_t i = 0; i<5; i++)
    numbers.push_back(i);

  A* printBegin = new B();
  A* printAll = new C();
  //faking virtualism will print just begin
  printBegin->Print(numbers.begin(), numbers.end());
  //faking virtualism will print all
  printAll->Print(numbers.begin(), numbers.end());
} 
```

输出：

```
Begin::0
Iterator::0
Iterator::1
Iterator::2
Iterator::3
Iterator::4 
```

# php - 将对象固定到内存

> ID：10575458
> 
> 赞同：1
> 
> 时间：2012-05-13T10:52:23.180
> 
> 标签：php, performance, memory

我正在尝试一种简单的方法将 PHP 对象永久固定到内存中，然后将其提供给其他更临时的对象，以便在他们正常工作的页面请求服务期间发送消息。我对 Wordpress 还比较陌生，所以也许我把事情弄得太复杂了……让我通过一个例子来展示我想要做什么：

1.  在启动时加载一个 UOM（度量单位）对象，该对象轮询数据库以获取单位列表、默认单位、单位类别（例如，磅是一种`imperial`度量）、转换率等。
2.  想要使用 UOM 转换或查找的后续服务请求只需调用全局 UOM 对象 ( `$UOM->get_measures_for_category ('speed')`)。该对象已经在内存中，不需要返回数据库来处理请求。
3.  UOM 上的`update()`方法将允许基于事件或时间的触发器请求 UOM 对象进行自我更新。

这只是服务请求经常使用的一些相对静态的数据集的一个示例，并且重复查询数据库将是浪费的。希望人们熟悉这种模式，并且可以向我指出一些示例，说明您将如何在 Wordpress/PHP 环境中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T12:42:42.550

对于您想要的，这不是最好的方法。但是，您所谈论的内容需要了解 PHP 的基本原则之一和一般的编程（也称为范围），即全局范围是什么。

因此，如果您在全局范围内声明它：

```
 $uom = new UOM_Class(); 
```

然后在之后的任何文件中编写：

```
global $uom;
$uom->something(); 
```

它会起作用的。

然而，这都是浪费，相反，你会更好地使用静态方法，更像是单例模式，例如：

```
UOM::Something(); 
```

我把它留给你学习什么是单例，什么是作用域，这些是 PHP 的基本原则，你不应该在不知道作用域的情况下声称了解 PHP。最好的表达方式是在日常谈话中，它被称为*上下文*，全局范围就等于同时在每个人的耳边大喊大叫。每个人都可以访问它，它不是你想污染的东西

如果我看起来有点苛刻，我很抱歉，这里有一些应该有帮助的文章，他们谈论范围，单例和其他一些方法，比如对象工厂

[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php) http://www.homeandlearn.co.uk/php/php8p2.html

[http://php.net/manual/en/language.oop5.patterns.php](http://php.net/manual/en/language.oop5.patterns.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:13:55.743

最初发布时我没有明确提出我的问题，但根据与 Tom 的对话，我同意在 Stack Overflow 上更清楚地重新发布此问题。

# jquery - jquery 选择器不适用于使用 Cassette 的脚本标记内的元素

> ID：10575461
> 
> 赞同：3
> 
> 时间：2012-05-13T21:40:04.400
> 
> 标签：jquery, cassette

当尝试使用`$("#index").data("onload")`I get back访问数据加载时`'undefined'`：

```
<script type="text/html">
        <section id="index" data-onload="app.load()">
            <div data-bind="text:name"></div>
        </section>
</script> 
```

没有周围的脚本标签一切正常。这是使用将其包装在脚本标签中的[Cassette](http://getcassette.net/)加载的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T21:46:41.660

script 标签的内容不是文档的 DOM 树的一部分。如果您考虑一下，这是有道理的，因为 JavaScript 语法不是有效的 HTML，您可以将 JavaScript 塞入脚本标记之间。

通常，您不会将任何 HTML 放入脚本标记中。data-onload 属性中 JavaScript 的存在不需要使用 script 标签，因此最简单的方法可能就是删除 script 标签。

另一方面，如果您尝试将这部分 HTML 用作模板，例如客户端 MVC 框架。那是我唯一一次看到有意义的 script type="text/html" 。在这种情况下，您需要在模板渲染到 DOM*后搜索 #index 部分。*在此之前，此 HTML 并不真正存在于您可以使用 JQuery 访问它的任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:45:06.193

具有*未知内容类型*的脚本元素将被忽略。
浏览器不知道如何处理 text/html 类型的脚本。

您只需要：

```
 <section id="index" data-onload="YourTextValue">
        <div data-bind="YourTextValue"></div>
    </section> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-13T21:45:27.807

据我所知，`<script>`- 标签内的代码通常编译为 Javascript，而不是 DOM 的一部分。而且我不确定这是否`<script type="text/html">`是一个有效的标签/属性组合。

删除脚本标签，你不需要它。

# c++ - 在 FILE 对象上使用 fstream

> ID：10575463
> 
> 赞同：1
> 
> 时间：2012-05-13T21:40:27.377
> 
> 标签：c++, io

我是 C++ 初学者，刚刚完成 C++ Primer，我正在玩自己的几个项目。这样做时我注意到的一件事是，虽然 C++ Primer 倾向于强调`std::fstream`文件 IO 的方式，但许多程序却使用`FILE*`.

这有什么原因吗？如果有，在什么情况下你会/应该使用`fstream`over`FILE`或者是否有我不知道的第三个选项，你会推荐？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T22:43:23.227

在 C++中使用 stdio（即`FILE*`函数族）的唯一原因是为了与 C 代码进行接口以获取`FILE*`参数。许多使用 stdio 学习 C 和/或 C++ 的人相信这些功能在某种程度上更胜一筹。主要的抱怨是使用 stdio 的格式说明符要短得多。不幸的是，它们也容易出错，尽管警告指出格式说明符和实际参数之间存在不一致，但我还没有看到一个使用标准输入输出的程序不平凡且正确。

IOstreams 中 stdio 做得更好的一个遗漏是`scanf()`函数可以进行一些有趣的解析。这可以很容易地添加到 IOstreams 中，但它不是标准库的一部分（而且它不像格式说明符那样简洁）。

就个人而言，我认为与优点相比，缺点无关紧要：

*   类型安全的读写
*   对用户定义类型的用户定义支持
*   支持用户定义的来源和目的地
*   在较小程度上控制数字类型的格式

由于一系列文章和早期 IO 流的一些极其糟糕的实现（其中一些似乎仍然存在于流行平台中），C++ 流已经获得了缓慢的错误声誉。是的，可以确保它们比 stdio 慢很多，但绝对有可能以与 stdio 相似的性能来实现它们。但是，用户需要避免一些简单的性能错误：

1.  不要使用`std::endl`. 时期。如果你真的想写一个换行符，然后是一个刷新，这样说：`out << '\n' << std::flush`。这就是在绝大多数情况下使用`std::endl`但不正确的方法，因为意外刷新会导致严重的性能问题。`std::endl`
2.  确保库不会浪费时间与 stdio 操作保持同步：`std::sync_with_stdio(false);`除非您将输出混合到标准流对象（`std::cin`等和`stdin`等），否则调用。尽管只有标准流对象才需要该效果，但 IO 流的不良实现也会影响文件流。

# ios - ShareKit 短信未将“新消息”栏与状态栏对齐

> ID：10575467
> 
> 赞同：2
> 
> 时间：2012-05-13T21:41:10.110
> 
> 标签：ios, sms, statusbar, sharekit

我有一个隐藏状态栏的应用程序。当我触发 SHKTextMessage SMS 控制器时，我发现它与 SHKMail 对象不同，它在弹出消息显示时在屏幕上放置了一个状态栏。这没关系，除了我看到以下屏幕：

![红色是显示的消息视图*后面的视图，因为显然](../Images/d51a2ae057b84f91a29b6932d4822fe1.png)

当我点击白色加号按钮选择发送目标然后立即取消它时，它会自行修复，如下所示：

![固定的](../Images/f41876891fd6fa9f6ab35335f5a81770.png)

我可以做些什么来完全抑制状态栏（就像 SHKMail 似乎那样），或者防止新消息栏对齐错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:06:51.323

这并不能真正回答为什么首先会出现问题，但我发现至少可以通过在显示共享工具包文本消息控制器之后隐藏状态栏来解决问题，如下所示：

```
[SHKTextMessage shareItem:item];

// fix strange status bar bug where it shows up in sms and offsets "New Message" bar weird
[[UIApplication sharedApplication] setStatusBarHidden:YES]; 
```

# c - 在 C 中等待用户输入？

> ID：10575478
> 
> 赞同：5
> 
> 时间：2012-05-13T21:43:26.837
> 
> 标签：c, linux

我正在尝试制作一个暂停用户输入的简单命令。我认为它在 Bash 脚本中会很有用。

这是我的代码：

```
#include <stdio.h>
int main() {
  char key[1];
  puts("Press any key to continue...");
  fgets(key,1,stdin);
} 
```

它甚至不会暂停用户输入。

我之前尝试过使用 getch() (ncurses)。发生的事情是，屏幕一片空白，当我按下一个键时，它又回到了原来的屏幕上，我看到：

```
$ ./pause
Press any key to continue...
$ 
```

这有点像我想要的。但我想要的只是相当于`pause`DOS/Windows 中的命令（我使用 Linux）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-13T21:50:12.357

来自 GNU C 库手册：

> 功能：char * fgets (char *s, int count, FILE *stream)
> 
> fgets 函数从流中读取字符直到换行符（包括换行符），并将它们存储在字符串 s 中，添加一个空字符来标记字符串的结尾。您必须在 s 中提供 count 个字符的空格，**但读取的字符数最多为 count − 1**。额外的字符空间用于在字符串末尾保存空字符。

因此，`fgets(key,1,stdin);`读取 0 个字符并返回。（阅读：立即）

使用`getchar`或`getline`代替。

编辑：一旦流上有可用的字符，fgets 也不会返回`count`，它会一直等待换行符，然后读取`count`字符，因此在这种情况下，“任何键”可能不是正确的措辞。

您可以使用此[示例](http://faq.cprogramming.com/cgi-bin/smartfaq.cgi?answer=1042856625&id=1043284385)来避免行缓冲：

```
#include <stdio.h>
#include <termios.h>
#include <unistd.h>

int mygetch ( void ) 
{
  int ch;
  struct termios oldt, newt;

  tcgetattr ( STDIN_FILENO, &oldt );
  newt = oldt;
  newt.c_lflag &= ~( ICANON | ECHO );
  tcsetattr ( STDIN_FILENO, TCSANOW, &newt );
  ch = getchar();
  tcsetattr ( STDIN_FILENO, TCSANOW, &oldt );

  return ch;
}

int main()
{
    printf("Press any key to continue.\n");
    mygetch();
    printf("Bye.\n");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T06:21:16.593

我不确定如何在帖子下添加评论，所以这不是真正的答案而是评论，

在 linux 中，Stdin 是缓冲的，因此您需要刷新它，这就是在终端上按“enter”所做的。您似乎想从无缓冲的流中读取数据，即您想立即对按键做出反应（无需显式刷新它）。

您可以使用文件描述符创建自己的无缓冲流，然后使用“getc”从中读取，您可能必须使用 termios 来设置其他人建议的无缓冲输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-05T17:00:44.917

这是一种在 Windows 10 上对我有用的简单方法：

```
#include <stdlib.h>

void pause(void);

int main(void)
{
    printf("Testing pause.");
}

void pause(void)
{
    system("pause");
} 
```

# drupal - 我可以在共享主机上的 public_html 的子文件夹中安装 drupal 6 和 7 吗？

> ID：10575481
> 
> 赞同：0
> 
> 时间：2012-05-13T21:43:35.110
> 
> 标签：drupal, drupal-6, drupal-7

我有一个与 hostgator 共享的主机帐户，目前可能在那里安装了 6 或 7 个 drupal 6 站点。Drupal 6 安装在 public_html 文件夹中。我有几个以多站点排列运行的 Drupal 6 站点。

我想将大多数站点移至 drupal 7，但由于主题等原因，一两个不能。

有人可以给我指出一份说明如何在 public_html 的子文件夹中安装 d6 和 d7 的文档，或者解释一下如何完成吗？

如果需要，我愿意放弃多站点，最近有人告诉我，你不能让两个版本的 drupal 在 public_html 下运行多站点...我不知道是否如此，但多站点可能是对于我拥有的几个网站来说，麻烦多于它的价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:17:21.440

我很确定不可能同时使用 Drupal 6 和 7 站点运行单个多站点安装。（虽然我毫不怀疑过于聪明的人可以将其作为概念证明，但将其部署为实时实例将是一个可怕的想法。）

但是，您可以为 public_html 的子文件夹创建一个新的虚拟主机并在那里运行您的 D7 多站点安装（或者，将您的 D6 多站点移动到新的子文件夹并从 public_html 文档根目录运行 D7。）

除非您的设置比您所指示的更多，否则听起来像是 2 个 Drupal 安装，1 个 D6 和 1 个 D7，“并排”运行将满足您的需求。

# symfony - mopabootstrap fosuserbundle 翻译标签

> ID：10575489
> 
> 赞同：1
> 
> 时间：2012-05-13T21:44:42.037
> 
> 标签：symfony, fosuserbundle

在将它扩展到我的包后，我无法让 form_widget（来自 mopabootstrapbundle）使用翻译（来自 FOSUserBundle）在注册表单（来自 FOSUserBundle）中工作。

[https://github.com/phiamo/MopaBootstrapBundle/issues/8](https://github.com/phiamo/MopaBootstrapBundle/issues/8)

我的问题与上述问题相同，但我不明白它是如何解决的。

* * *

我想我必须以某种方式使用 FOSUserBundle 中的 translation_domain

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T16:20:07.060

您是否按照这篇文章的所有步骤进行了操作：[https](https://github.com/phiamo/MopaBootstrapBundle/issues/8#issuecomment-2842368) ://github.com/phiamo/MopaBootstrapBundle/issues/8#issuecomment-2842368 ，尤其是以下几行：

> 将整个模板目录从 views/Registration 复制到 app/FosUserBundle/views/Registration/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:39:01.007

这就是我处理问题的方式

[https://github.com/phiamo/MopaBootstrapBundle/issues/8](https://github.com/phiamo/MopaBootstrapBundle/issues/8)

# java - Maven 程序集 jar 中的 Datanucleus JDO

> ID：10575490
> 
> 赞同：0
> 
> 时间：2012-05-13T21:44:43.207
> 
> 标签：java, maven, jar, jdo, datanucleus

我使用了 maven 程序集包来创建一个单一的整体 jar。包括 datanucleus 包，但我收到错误，因为我没有维护 OSGI 结构（plugins.xml 和 META-INF/META-INF.MD）。stackoverflow([question]: [Datanucleus, JDO and executable jar - how to do it?](https://stackoverflow.com/questions/10096772/datanucleus-jdo-and-executable-jar-how-to-do-it) ) 上的答案没有提供有关如何创建单个可部署 jar 的答案。

有谁知道我可以使用哪些 Maven 指令来确保 OSGI 结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:43:29.140

因此，问题在于将所有内容打包到一个整体 jar 中是 OSGI 结构会被其他 jar 的 OSGI 结构覆盖。整体 jar 的好处是有一个文件可以推送到服务器，但不是必需的（因为我使用 capistrano 推送到服务器）

相反，将 jars 复制到最终的构建目录中会更容易。Heroku 的 Java 设置有一个完美的例子：

[https://devcenter.heroku.com/articles/java](https://devcenter.heroku.com/articles/java)

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" 
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.example</groupId>
<version>1.0-SNAPSHOT</version>
<artifactId>helloworld</artifactId>
<dependencies>
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-servlet</artifactId>
        <version>7.6.0.v20120127</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>
</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.4</version>
            <executions>
                <execution>
                    <id>copy-dependencies</id>
                    <phase>package</phase>
                    <goals><goal>copy-dependencies</goal></goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
</project> 
```

# network-programming - 当所有可用的都是电子邮件地址时，如何在计算机之间发送字符串？

> ID：10575494
> 
> 赞同：-2
> 
> 时间：2012-05-13T21:45:02.867
> 
> 标签：network-programming

去年一月[，我问了一个](https://stackoverflow.com/questions/8977425/how-can-i-send-strings-between-two-computers)关于在计算机之间发送字符串信息的问题。使用响应作为起点，我让机器通过同一个 LAN 进行通信。现在我有兴趣扩展代码以允许相距较远的机器之间进行通信。我经常看到在用户只提供电子邮件地址的网络上玩游戏。这是如何运作的？提供电子邮件地址的目的是什么？（*我不是在寻找代码*，只是对正在发生的事情的一般解释。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:49:19.087

电子邮件地址仅用于识别用户。它与网络本身无关。游戏通常只是连接到中央服务器并通过套接字将必要的信息发送到游戏服务器。部分信息可以是标识，但通信通常不是通过 SMTP（电子邮件）而是直接连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:49:21.613

通常，这些游戏会连接到中央服务器，并使用他们的电子邮件地址进行注册。然后服务器能够给出带有 IP 地址的列表。从那里开始，它就和本地网络一样了。（嗯，大部分）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T21:59:10.033

电子邮件地址仅用作访问特定帐户的唯一标识符。在大多数情况下，这些帐户故意不与单台机器绑定。

您知道如何通过 LAN 进行通信，所以我假设您了解网络的基础知识。诀窍很简单，游戏客户端通过 Internet 连接到具有已知地址的中央服务器，并使用登录凭据（这是电子邮件地址通常进来的地方，但实际上，它可以是任何东西，因为它没有t 用作机器标识符）。然后服务器注册 IP 地址，因此游戏系统知道如何联系其他人，因为中央服务器知道谁在玩游戏以及如何联系他们。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-13T21:48:35.183

您想阅读有关[XML 套接字的更多信息：多人游戏的基础知识](http://www.gotoandplay.it/_articles/2003/12/xmlSocket.php)。

大多数游戏中网络的基本思想仍然是通过消息进行通信的客户端-服务器模型：

![在此处输入图像描述](../Images/7c21992c15eb9784e118699d5cf646c0.png)

在您的情况下，电子邮件与在计算机之间交换大量数据没有太大关系。

# html - CSS 圆角 左上角不圆角。想法？

> ID：10575501
> 
> 赞同：0
> 
> 时间：2012-05-13T21:46:02.963
> 
> 标签：html, css, rounded-corners

好的，我正在尝试通过 CSS 绕过我的角落，这样我就可以从我正在为客户重新制作的旧样式模板中删除一堆图像。这个想法是使用可以优雅地失败的东西。我认为一般来说。但是，在这种情况下，其中一个元素的左上角似乎没有像同一个元素的其余部分在其其他角上那样进行舍入。我正在使用一个类将它传递给元素，并且这个类可以完美地处理所有其他元素，它只是这个元素..

content_wrap 更具体。它是所有其他元素所在的元素。这是它的 jsfiddle 版本。

[http://jsfiddle.net/8qZze/](http://jsfiddle.net/8qZze/)

有人有任何想法/建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T22:05:38.327

您可以添加`overflow:hidden`到`#content_wrap`以阻止任何东西从内部重叠角落。现场示例：http: [//jsfiddle.net/8qZze/1/](http://jsfiddle.net/8qZze/1/)

```
#content_wrap{
    overflow: hidden
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T21:58:17.563

我删除了“.white”规则并且它起作用了，孩子“content_left”有一个矩形蚂蚁它越过“content_wrap”的圆角，尝试指定一些边距为圆角留出更多空间，一切都会美好的。

或者尝试 tw16 的溢出建议（忘了它:)）

# javascript - Ajax JSON 异常 意外令牌 [

> ID：10575504
> 
> 赞同：0
> 
> 时间：2012-05-13T21:46:38.517
> 
> 标签：javascript, jquery, ajax, json

嗨，我有一个页面包含一个链接，当用户单击该链接时，我想去数据库并检索两个数组，但是当我提醒这两个数组时，我得到了这个异常

```
Unexpected token [ 
```

这是我的js代码

```
function acNewConcpet(element){
    var parent = element.parentNode;
    parent.removeChild(element);
    var concpetSelect = document.createElement('select');
    var relationSelect = document.createElement('select');
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange=function(){
        if(xmlhttp.readyState==4 &&  xmlhttp.status==200){
            var data = JSON.parse(xmlhttp.responseText);
            alert(data);
        }

    }
    xmlhttp.open("GET","http://localhost/Mar7ba/Ontology/getRelatedConceptsAndRelations/"+"concept"+"/TRUE",true);
    xmlhttp.send();
} 
```

这是我的 php 代码

```
public function getRelatedConceptsAndRelations($concpetName, $Ajax) {
        if ($Ajax) {
            $concepts = array('c1', 'c2');
            $relations = array('r1','r2');
            echo json_encode($concepts);
            echo json_encode($relations);
        }
        return;
} 
```

为什么这个例外？我该如何解决？以及如何在我的 js 中接收这两个数组？这是完整的[代码](http://jsfiddle.net/H5Un4/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T21:50:14.687

`JSON.parse`只能解析**单个**JSON 文字。

您应该将这两个数组组合成一个具有两个属性的对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T21:51:11.927

您正在返回格式错误的 JSON。根据我从您的代码中了解到的情况，它会打印出这个 JSON：

```
['c1','c2']['r1,r2'] 
```

你不能有 2 个这样的数组。你必须像这样打印它：

```
[['c1','c2'],['r1','r2']] 
```

对不起我生锈的 PHP，但你必须有类似的东西：

```
$json = array(
    array('c1','c2'),
    array('r1','r2')
);

echo json_encode($json); 
```

* * *

既然您使用的是 jQuery，为什么不使用[`$.getJSON()`](http://api.jquery.com/jQuery.getJSON/)?

```
$.getJSON(url,function(returnData){
    //returnData is the parsed JSON
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T21:50:49.243

当您响应 JSON 时，它必须是一个 JSON，但您发送的是两个单独的数组。

将这两个 JSON 合并为一个。

**更新：**

像这样做：

```
public function getRelatedConceptsAndRelations($concpetName, $Ajax) {
    if ($Ajax) {
        $concepts = array('c1', 'c2');
        $relations = array('r1','r2');
        echo json_encode(array($concepts, $relations));
    }
    return;
} 
```

# objective-c - 尝试使用 NSCoder 会使应用程序在启动时崩溃

> ID：10575505
> 
> 赞同：0
> 
> 时间：2012-05-13T21:46:40.243
> 
> 标签：objective-c, ipad, ios5, nscoding, nscoder

我在 NSDictionary 中存储了一些详细信息。我在 iPad 上使用 Master-Detail 视图，添加 initWithCoder 方法后，我的应用程序在启动时崩溃，我不知道如何使其工作。

我想使用 NSCoder 的原因是存储我的用户的数据，并且一旦他再次启动应用程序就能够显示它。NSUserDefaults 不可行，因为我将 UITextFields 和 UISegmentedControls 存储在字典中以便于处理数据。

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    if (self = [super init]) {
        personInfo = [aDecoder decodeObjectForKey:myString];
    }

    return self;
}

- (void)encodeWithCoder:(NSCoder *)aCoder {
   [aCoder encodeObject:personInfo forKey:myString];
} 
```

谁能告诉我如何正确使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T22:05:08.930

我通过简单地说来解决它

```
self = [super initWithCoder:aDecoder] 
```

而不仅仅是

```
self = [super init] 
```

# asp.net-mvc - 在 OS X 10.7.4 上的 MonoDevelop 中构建 MVC4 项目时缺少 Webapplication.targets

> ID：10575509
> 
> 赞同：7
> 
> 时间：2012-05-13T21:47:17.160
> 
> 标签：asp.net-mvc, mono, monodevelop

我正在尝试使用 Mono 2.10.9 在 OS X 10.7.4 上构建一个测试 MVC4 项目。我在 Visual Studio 中创建了一个新的空 MVC4 Web 应用程序，使用 git 将源代码从 Windows 传输到 Mac OS X。然后我运行 xbuild 以恢复 .nuget 包，但是当我在 monodevelop 中构建时，我得到了一个奇怪的错误：

> /Users/tamasnagy/Developer/Spellbound/Spellbound/Spellbound.csproj：错误：/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/xbuild/Microsoft/VisualStudio/v10.0/WebApplications/Microsoft。 WebApplication.targets：无法导入项目文件，它正在由 /Users/tamasnagy/Developer/Spellbound/Spellbound/Spellbound.csproj 导入：导入的项目：“/Library/Frameworks/Mono.framework/Versions/2.10.9/ lib/mono/xbuild/Microsoft/VisualStudio/v10.0/WebApplications/Microsoft.WebApplication.targets”不存在。（着迷）

这意味着什么？当我在 MonoDevelop 中创建一个新的 MVC 项目并按下 build 时，也会发生这种情况。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T07:56:18.017

创建符号链接：

cd /usr/lib/mono/xbuild/Microsoft/VisualStudio/v9.0

ln -s v9.0 v10.0

我在两台不同的计算机上拥有完全相同的 ubuntu 12.04 发行版，但无法弄清楚为什么 mono 会在一台计算机上编译而不是另一台计算机。但是哦，好吧，符号链接解决了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T14:10:28.340

将您的 csproj 文件更改为导入 v9.0，因此...

```
<Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v9.0\WebApplications\Microsoft.WebApplication.targets" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T23:33:47.393

Mono 的 MSBuild 实现 (xbuild) 没有实现 ASP.NET 项目的目标。

您也许可以在 MonoDevelop 中构建。确保在 MonoDevelop 首选项中关闭了实验性 xbuild 集成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-23T07:45:43.137

我知道这是一个老问题，但是在搜索如何`WebApplications.targets`在 OSX 上使用时出现了，所以仍然值得回答。当前版本的 Mono (5.x)`Webapplication.targets`包含在内，所以现在您所要做的就是设置`VSToolsPath`，一切都应该正常工作。

如果您使用的是标准 bash shell，则该`.profile`文件是放置它的地方：

```
export VSToolsPath=/Library/Frameworks/Mono.framework/Versions/Current/lib/mono/xbuild/Microsoft/VisualStudio/v15.0/ 
```

# php - 需要编辑 wp 简单的贝宝购物车以根据下拉选项更新价格

> ID：10575511
> 
> 赞同：0
> 
> 时间：2012-05-13T21:47:36.323
> 
> 标签：php, wordpress

我正在为我的网站使用[wp 简单的贝宝购物车。](http://www.tipsandtricks-hq.com/ecommerce/simple-wp-shopping-cart-installation-usage-290)我知道您可以在添加到购物车时说 [wp_cart:Demo Product 1:price:15:var1[Size|Small|Medium|Large]:end] 以获取选项的下拉列表，但我希望价格为根据我选择的选项进行更新。我对 php 非常方便，所以我可以很轻松地获取值并更新 $price 变量，但我无法真正看到 wp-shopping-cart.php 文件中的选项在哪里添加名称值。

那么有没有其他人有幸根据下拉菜单中选择的选项对其进行编辑以更新价格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T23:02:07.347

好吧，您确定简单的贝宝购物车不能为产品的不同变体提供不同的价格吗？在过去，它一直是 wordpress 电子商务中的一个大问题。也许你应该检查[http://www.tipsandtricks-hq.com/forum/topic/multiple-pricing-in-simple-paypal-shopping-cart](http://www.tipsandtricks-hq.com/forum/topic/multiple-pricing-in-simple-paypal-shopping-cart)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T16:34:56.020

我打算尝试破解 ReadForm 函数，但我编写了一个名为 CheckSize 的小 Java 脚本片段，在 ReadForm 函数将表单数据放入变量之后，我在表单命令中挂起了 onsubmit。

在 wp_shopping_cart.php 文件中，我将 onsubmit 修改为如下所示 --> onsubmit="ReadForm(this, true);CheckSize (this, true); <--

ReadForm 函数将 small、medium 或 large 放入名为“variation1”的变量中，并将 price 放入名为“price”的变量中，因此在 CheckSize 函数中，我测试了 Variation1 的值，并在他们选择中号或大号时相应地更改价格变量。

我编辑了主题的 header.php 文件，并在 /head 标记前面对我的 price.js 文件（仅包含下面的 CheckSize 函数）进行了 JavaScript 调用，以便在加载该主题中的任何页面时加载我的函数。

我的函数贴在下面（price.js 的全部内容）。默认的基本价格是小件商品的价格，在我的例子中是 20 美元。如果他们选择中价，我会在小价上加 15 美元。如果他们选择大的，我会在小价格上加 30 美元。这对我有用，因为我所有的小尺寸产品都是 20 美元，但是可以很容易地修改此代码，以将基本价格乘以中型和大型的百分比，如果您的产品具有不同的基本价格，这将使其更加灵活。（即中号可以是小号的 150%，大号可以是小号的 200%）

```
// --

function CheckSize(form_name) {

// dump any variable for checking contents next
// alert('Price:' + form_name.price.value);
// return false; 

// next set price to a numeric variable value of 0
var price= new Number; 
// next set price to base price times 1 so it doesn't become a string variable
price=form_name.price.value*1; 

// size medium price adjustment is next
if(form_name.variation1.value=='medium') 
{ 
form_name.price.value=price+15;
}

// size large price adjustment is next
if(form_name.variation1.value=='large') 
{ 
form_name.price.value=price+30;
}

// dump any variable for checking contents next
// alert('Price:' + form_name.price.value);
// return false; 

} // end of function CheckSize()

// -- 
```

对上面这段代码的调用（onsubmit）的放置导致它在变量被 ReadForm 函数“破坏”之后但在它们被发送到购物车之前执行。我是一个大型机老手，只是在玩它，所以我希望我的术语不会让你失望。昨天我对 JavaScript 的了解足够多，可以做我必须做的事情，所以对于专家来说它可能看起来很草率。如果它让你畏缩，我很抱歉。

谢夫

# php - 从多个相同的表单域插入数据

> ID：10575512
> 
> 赞同：0
> 
> 时间：2012-05-13T21:47:46.717
> 
> 标签：php, jquery, mysql, html

对不起，如果标题具有误导性，但我真的想不出更好的了。

首先，我有两张表，banlist 和 proof。对于我的问题，禁令列表或多或少无关紧要，但证明是。

```
Table: proof

proofid - primary key
banid - foreign key (links to banlist)
proof - stores the link which acts as the proof
type - stores the type of the proof (image, demo, ...) 
```

我还有一个表格，允许管理员提供有关禁令的详细信息，然后链接任何证明。由于禁令可能有多个证据，我将实现一个链接，该链接创建两个表单字段的新实例（可能通过 jQuery）。表格如下所示：

```
<p>Proof (if no proof is available, enter N/A):</p><input type="textfield" name="proof" style="border: solid 1px #<?php echo $pbg?>"/>

<select name="prooftype" style="border: 1px solid #<?php echo $ptbg ?>" />
    <option value="TZAC">TZAC</option>
    <option value="UAC">UAC</option>
    <option value="ESL Wire">ESL Wire</option>
    <option value="GV">GV</option>
    <option value="PB Bans">PB Bans</option>
    <option value="Demo">Demo</option>
    <option value="League">League</option>
    <option value="Image">Image</option>
    <option value="Stream">Stream</option>
    <option value="Other">Other</option>
</select> 
```

问题，或者可能不是问题，是我将如何将数据的多个实例插入证明表（并最终更新）。我只是看不出如果我有上面的 4 个，我如何将所有 4 个具有不同值的插入到表中。

设置文本字段的 id 并选择为 id="proof1"/id="type1", id="proof2"/id="type2", id="proof3"/id="type3 " 等等并将这些存储在一个数组中，然后循环遍历数组，使用当前选定的文本字段/选择中输入的数据查询表？

最后，由于管理员能够编辑禁令，我面临一个类似的问题，即禁令有 4 种类型的证明，我需要更新表中所选禁令的证明。

我目前有这个查询：

```
$query2 = "UPDATE proof SET proof = '$proof', type = '$type' WHERE banid = $id"; 
```

但是，这将覆盖所有具有相同 banid 的行，而我只希望它更新特定于证明的行。通过存储proofid然后将UPDATE SQL命令修改为，在每个文本字段/选择框旁边创建一个隐藏字段是否有效`... WHERE proofid = $_POST['...']`？同样，我假设我需要某种类型的数组才能遍历每个实例。

* * *

此图像显示了表单的一部分，颜色表示表单域之间的链接。从中您可以看到，我需要获取 4 个证明示例中的每一个，然后插入它们或相应地更新它们。

![http://i45.tinypic.com/adkfti.png](../Images/36f99363ddac8d15ea24e5005c64a215.png)

如果部分内容不清楚，请致歉。您可能会说我个人正面临一堵砖墙，而且很可能只是我需要绕开它。补充一点，我可能已经回答了帖子中的问题，但我想对使用数组的任何改进提出想法和想法。

感谢您提供的任何帮助或指导，

乔恩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:31:12.017

我认为你不需要多对多关系，除非你真的想用证明类型完全规范你的数据。您当前的结构应该足够了。

由于您在后端使用 PHP，只需通过将 [] 附加到每个输入来将输入转换为数组，如下所示：

```
<p>Proof (if no proof is available, enter N/A):</p><input type="textfield" name="proof[]" style="border: solid 1px #<?php echo $pbg?>"/>

<select name="prooftype[]" style="border: 1px solid #<?php echo $ptbg ?>" />
etc... 
```

名称后面的括号允许 PHP 以数组的形式接收输入，然后您可以在 PHP 端循环它：

```
<?php
// Assuming banid is a hidden field in the form
$banid = mysql_real_escape_string($_POST['banid']);
$proof = $_POST['proof'];
$prooftype = $_POST['prooftype'];

for ($i = 0; $i < count($proof); $i++) {
    $currentProof = mysql_real_escape_string($proof[$i]);
    $currentProofType = mysql_real_escape_string($prooftype[$i]);
    $sql = "INSERT INTO proof (banid, proof, prooftype) VALUES ($banid, '$currentProof', '$currentProofType');";
    etc...
} 
```

为了解决您的 UPDATE 问题，我会保持简单，并在您的证明表中再添加一列，称为 proof_number。这将是 0 到 3 或 1 到 4 来标记记录的证明。这避免了您需要在 html 表单中添加证明 ID。然后在您的 UPDATE 中，您可以使用 for 循环中的数组索引来确定您正在更新哪个证明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:59:35.063

您需要插入第三张表以将禁令列表与证明相关联。在此 BanProofRelationship 表中插入关系条目，其中包含 banId 和 ProofId。这样，您可以根据需要将任意数量的外键存储到这些表中。您最终将获得多对多关系，当您需要添加条目时，您将插入它们。当您想删除条目时，您将删除它们。

要添加条目，您可以使用

`INSERT BanProofRelationship ( banId, proofId ) values (1, 4);`

# c - 从 rs232 串口读取意外数据

> ID：10575514
> 
> 赞同：1
> 
> 时间：2012-05-13T21:48:27.133
> 
> 标签：c, serial-port

摩托罗拉 cpu 模块通过 rs232 连接到 windows PC。在模块端，93:05:00:78:2E:64:61:74:77 数据写入 uart 并期望在 PC 端读取相同的数据，但 8E:12:00:E0:E2:62:90： 80:90 从 PC COM1 读取数据。你对这个问题有什么想法吗？为什么要进行数据混合？或者为什么我读错了。大小端问题？我无法解决这个问题。

在PC端；我正在从 com 端口读取

```
int poll_comport(int comport_number, unsigned char *buf, int size)
{
  int n;

  if(size>4096)
   {
      size = 4096;
   }

  ReadFile(Cport[comport_number], buf, size, (LPDWORD)((void *)&n), NULL);

  return(n);
} 
```

我正在写信给 com 端口

```
int send_byte(int comport_number, unsigned char byte)
{
  int n;

  WriteFile(Cport[comport_number], &byte, 1, (LPDWORD)((void *)&n), NULL);
  if(n<0)
   {
      return(1);
   }

  return(0);
} 
```

# php - 在 PHP MySQL 数据库中搜索价格

> ID：10575521
> 
> 赞同：0
> 
> 时间：2012-05-13T21:49:40.973
> 
> 标签：php, search

我有根据您的价格范围搜索汽车的代码：

```
$category = "SELECT * FROM tbl_listings WHERE price between '$c[0]' AND '$c[1]'"; 
```

出于某种原因，该代码不能完美运行。它向我展示了几辆在正确范围内的汽车，但当我在 5,000 到 20,000 之间搜索时，它也显示了一辆 200,000 的汽车。

此外，当数据库中有些汽车的价格带有美元符号而有些汽车带有逗号时，有什么好的搜索方法？搜索表单不返回任何带有美元符号或逗号的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:55:13.260

停止将价格存储为字符串？价格通常存储为以下两种类型之一：

*   整数：美分数
*   float：美元和美分，但一定要将小数位数设置为 2

通常不会将价格作为字符串（如“$14,999.99”）存储在数据库中，因为您无法进行范围查询，就像您现在尝试做的那样。

您也不能进行算术运算，例如对特定汽车子集的价格进行总计的查询。

如果您要提取的数据具有这样的格式化字符串，请使用 NumberFormatter::parseCurrency() 从您提供的字符串中获取浮点数，然后再将其推入数据库。 [http://php.net/manual/en/numberformatter.parsecurrency.php](http://php.net/manual/en/numberformatter.parsecurrency.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:56:03.687

你关于

> 有些汽车的价格在数据库中带有美元符号，有些则带有逗号

让我觉得数据库中的数据类型不是数字数据类型。这可能是一个问题，即使您`$c[0]`是正确的下限并且`$c[1]`是上限。

# c# - 如何自动化 MVC IIS 的开发机器

> ID：10575523
> 
> 赞同：2
> 
> 时间：2012-05-13T21:49:43.297
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, iis, automation

我不知道这是否完全可以作为一键完成的选项，但我想要为新开发人员自动化我们的 IIS MVC 开发设置。

基本上，我正在寻找的是：

*   如果尚未创建应用程序池创建（并确保它是正确的 .NET 4.0 版本）
*   在上述应用程序池下创建一个指向源代码的 IIS 应用程序
*   确定是否`aspnet_regiis -i`需要（如果 IIS 在 4.0 代码引入之前安装）

我不是在寻找发布选项，因为它不指向源代码。此外，我不打算使用内置的 VS 主机，因为我正在尝试使用 IIS 来确保一切设置正确。也许我不应该强加这些限制，也不需要担心按照描述设置机器？但是，如果这听起来确实正确，那么目前我正在寻找一种方法来直接从源代码控制中进行设置？这可能吗，还是我需要为所有新开发人员进行初始设置阶段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:07:40.933

虽然我还不能准确地写出你想要的东西，但 Powershell 会做你想要的。这是创建网站和应用程序池的教程。

[http://learn.iis.net/page.aspx/433/powershell-snap-in-creating-web-sites-web-applications-virtual-directories-and-application-pools/](http://learn.iis.net/page.aspx/433/powershell-snap-in-creating-web-sites-web-applications-virtual-directories-and-application-pools/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:56:36.590

我的建议是在计算机上设置完整的环境，然后制作引导盘以返回该环境。然后在您希望环境所在的另一台计算机上运行该启动盘（注意：必须是同一类型）。

如果它必须适用于不同的计算机和不同的操作系统，那么允许一次完成所有环境的复杂性将变得比仅仅自己做更大，除非您像每天一样频繁地设置环境。如果是这种情况，那么也许您可以制作一个自定义安装程序来完成我不太熟悉的事情。

# javascript - 在javascript中检查函数参数的标准方法是什么？

> ID：10575532
> 
> 赞同：1
> 
> 时间：2012-05-13T21:51:08.117
> 
> 标签：javascript, arguments

考虑以下函数：

```
function interpolate(color1, color2, progress) {}; 
```

必须传递所有参数，color1 和 color2 必须是我的颜色对象的实例，progress 必须是数字。

检查类型更快还是简单地将 try/catch 块包裹在逻辑周围并查看它是否失败？
如果它确实失败了，那么我可以检查所有参数是否存在且正确并抛出一个描述性的期望。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T22:16:16.353

我认为最好快速失败并预先进行检查，而不是依靠 a`try/catch`来捕获不正确的参数。

您可以通过检查的`length`属性来检查是否传递了所有参数，`arguments`并且您可以通过检查相关函数的属性来查看函数签名有多少个参数`length`：

```
function interpolate(color1, color2, progress) {
    if (arguments.length !== arguments.callee.length) {
        throw "wrong number of arguments passed";
    }
}; 
```

现在**[是检查`color1`and`color2`是您期望的类型的对象](https://stackoverflow.com/questions/332422/how-do-i-get-the-name-of-an-objects-type-in-javascript)**并**[检查 progress 是一个数字的情况](https://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric)。**

# javascript - WebSockets 使用什么 URL？

> ID：10575537
> 
> 赞同：1
> 
> 时间：2012-05-13T21:51:31.253
> 
> 标签：javascript, websocket

我看到的例子是这样的。

ws://localhost:8000/socket/server/startDaemon.php

我正在端口 8787 上的 localhost 上进行测试，所以到目前为止它已经被理解了。我有一个名为“chat-server.exe”的服务器在端口 8787 上运行。如何设置文件路径？在上面的示例中，它显示 /socket/server/startDaemon.php。该文件路径是什么，它从哪里开始等？我在 Ubuntu 上运行 Documents/Programs/chat-server。所以...？

注意：更具体地说，当我说“什么 URL”时，我的意思是：

w = 新的 WebSocket（网址）

# javascript - 使用 jquery replace() 标记添加函数

> ID：10575538
> 
> 赞同：1
> 
> 时间：2012-05-13T21:51:42.233
> 
> 标签：javascript, jquery

我有一个 jquery replace() 放入要附加函数的列表项。我不知道该怎么做。

```
function replaceListItems(){ $('ul.options').replaceWith('<ul class="options"><li class="btn"><img src="btn.png" /></li></ul>');} 
```

这是我想附加的功能：

```
$("ul.options li").click(function(){myFunction()}); 
```

如果我在替换/创建列表项之前分配它，似乎它会被删除。

在此先感谢您的帮助！-m

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:59:41.770

代替：

```
$("ul.options li").click(function(){myFunction()}); 
```

和：

```
$("ul.options li").live('click',function(){myFunction()}); 
```

这样 jQuery 还将点击处理程序附加到替换/创建的元素。

**参考**：[http ://api.jquery.com/live/](http://api.jquery.com/live/)

**演示**：http: [//jsfiddle.net/CWH4D/](http://jsfiddle.net/CWH4D/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:00:42.507

### *[jsBin 演示](http://jsbin.com/epopeq/edit#javascript,html,live)*

```
function replaceListItems(){     
  $('ul.options').replaceWith('<ul class="options"><li class="btn"><img src="http://placehold.it/40x40/cf5&text=BTN" /></li></ul>');       
}

$("ul.options").on('click','li',function(){  
  replaceListItems();   
}); 
```

更多信息：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

# java - 修改我的 .jar 程序的任务栏图标

> ID：10575541
> 
> 赞同：15
> 
> 时间：2012-05-13T21:51:58.287
> 
> 标签：java, jar, icons, size, taskbar

我正在尝试更改每次运行 .jar 程序时出现在任务栏中的默认 java 图标。我设法用 frame.setIconImage(img); 但这使图标太小了，我希望它与其他程序图标一样大并且具有高质量。我有什么办法可以做到吗？谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-14T22:01:12.963

由于您只提供了**一个**图标，Windows 会将该图标*缩放*到它需要在任务栏中显示的任何大小（可以是 16x16、32x32 或其他大小，具体取决于桌面和任务栏的大小。

如果你想在任务栏中有一个“好看”的图标，你需要提供一个 32x32 像素版本的图标。

一旦你有了它，你可以调用[`setIconImages(List)`](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#setIconImages%28java.util.List%29)而不是`setIconImage()`定义操作系统可以使用的图标：

```
List<Image> icons = new ArrayList<Image>();
icons.add(getImage("someImage16x16.gif"));
icons.add(getImage("someImage32x32.gif"));
window.setIconImages(icons); 
```

`getImage()`返回正确图像图标的方法在哪里。本质上，这与您已经用于定义当前图标的步骤相同。

您还可以使用此方法提供 64x64 和 24x24 图标（只需将更多图标添加到列表中）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T21:51:17.977

试试看[这个例子](http://www.roseindia.net/java/example/java/swing/SettingIconFrame.shtml)。看起来你需要使用`frame.setIconImage(Toolkit.getDefaultToolkit().getImage("your_image.gif"));`line

# c - 数组类型和用 malloc 分配的数组的区别

> ID：10575544
> 
> 赞同：74
> 
> 时间：2012-05-13T21:52:13.360
> 
> 标签：c, arrays, malloc, variable-length-array

今天我正在帮助我的一个朋友编写一些 C 代码，我发现了一些奇怪的行为，我无法向他解释为什么会发生这种情况。我们有一个包含整数列表的 TSV 文件，`int`每行都有一个。第一行是列表的行数。

我们还有一个带有非常简单的“readfile”的 ac 文件。第一行被读取到`n`，行数，然后有一个初始化：

```
int list[n] 
```

最后是`n`带有 a的 for 循环`fscanf`。

对于小 n （直到〜100.000），一切都很好。但是，我们发现当 n 很大 (10^6) 时，会发生段错误。

最后，我们将列表初始化更改为

```
int *list = malloc(n*sizeof(int)) 
```

一切都很好，即使非常大`n`。

有人可以解释为什么会这样吗？是什么导致了段错误`int list[n]`，当我们开始使用时停止了`list = malloc(n*sizeof(int))`？

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-05-13T21:56:19.620

这里有几个不同的作品。

第一个是将数组声明为的区别

```
int array[n]; 
```

和

```
int* array = malloc(n * sizeof(int)); 
```

在第一个版本中，您声明了一个具有自动存储持续时间的对象。这意味着该数组仅在调用它的函数存在时才存在。在第二个版本中，您将获得具有动态存储持续时间的内存，这意味着它将一直存在，直到使用`free`.

第二个版本在这里工作的原因是 C 通常如何编译的实现细节。通常，C 内存分为几个区域，包括堆栈（用于函数调用和局部变量）和堆（用于`malloc`ed 对象）。堆栈的大小通常比堆小得多；通常它是8MB之类的东西。结果，如果您尝试分配一个巨大的数组

```
int array[n]; 
```

那么你可能会超出堆栈的存储空间，导致段错误。另一方面，堆通常具有很大的大小（例如，与系统上的可用空间一样多），因此`malloc`大对象不会导致内存不足错误。

一般来说，小心 C 中的可变长度数组。它们很容易超过堆栈大小。`malloc`除非您知道大小很小，或者您确实只需要在短时间内使用该数组，否则请优先选择。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-13T21:56:13.580

```
int list[n] 
```

*在堆栈*`n`上为整数分配空间，通常非常小。在堆栈上使用内存比其他方法快得多，但它非常小，如果您执行诸如分配巨大数组或递归太深之类的事情，很容易溢出堆栈（即分配太多内存）。您不必手动释放以这种方式分配的内存，它是由编译器在数组超出范围时完成的。

 *`malloc`另一方面，在*堆中*分配空间，与堆栈相比，这通常*非常大*。您将不得不在堆上分配更多的内存来耗尽它，但是在堆上分配内存比在堆栈上分配内存要慢得多，并且您必须`free`在使用完毕后手动取消分配它.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-13T21:55:19.957

int list[n] 将数据存储在堆栈中，而 malloc 将其存储在堆中。

栈是有限的，空间不大，而堆要大得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T04:41:09.437

如果您使用的是 linux，则可以将 ulimit -s 设置为更大的值，这也可能适用于堆栈分配。当您在堆栈上分配内存时，该内存将一直保留到函数执行结束。如果您在堆上分配内存（使用 malloc），您可以随时释放内存（甚至在函数执行结束之前）。

通常，堆应该用于大内存分配。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-13T21:55:26.617

`int list[n]`是一个 VLA，它在堆栈上而不是在堆上分配。您不必释放它（它会在函数调用结束时自动释放）并且它分配得很快，但存储空间非常有限，正如您所发现的那样。您必须在堆上分配更大的值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-13T21:55:31.373

此声明在堆栈上分配内存

```
 int list[n] 
```

malloc 在堆上分配。

堆栈大小通常小于堆，因此如果您在堆栈上分配太多内存，则会出现堆栈溢出。

另请参阅[此答案以获取更多信息](https://stackoverflow.com/a/216731/451540)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-13T21:56:35.753

假设您的实现中有一个典型的实现，很可能是：

```
int list[n] 
```

堆栈上的分配列表，其中：

```
int *list = malloc(n*sizeof(int)) 
```

在你的堆上分配内存。

在堆栈的情况下，通常会限制它们可以增长的大小（如果它们可以增长的话）。在堆的情况下仍然有一个限制，但这往往在很大程度上和（广泛地）受您的 RAM + 交换 + 地址空间的限制，通常至少大一个数量级，如果不是更多的话。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-13T21:55:54.483

当您使用 a`malloc`进行分配时，内存是从堆而不是从堆栈分配的，堆栈的大小受到更多限制。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-31T14:22:19.937

```
 int array[n]; 
```

这是一个静态分配数组的例子，在编译时数组的大小是已知的。并且数组将被分配在堆栈上。

```
 int *array(malloc(sizeof(int)*n); 
```

这是一个动态分配数组的例子，数组的大小将在运行时为用户所知。并且数组将在堆上分配。*

# css - CSS - Twitter Bootstrap 的红色字体

> ID：10575547
> 
> 赞同：2
> 
> 时间：2012-05-13T21:53:20.413
> 
> 标签：css, twitter-bootstrap

我在 main.css 文件中定义了一个类。

```
.red {
  color: #d14;
} 
```

并像这样使用它。

```
<div class="navbar">
    <div class="navbar-inner">
       <ul class="nav">
          <li class="active red">
             <a href="/admin/list"><i class="icon-leaf icon-white"></i>Admin</a>
         </li>
       </ul>
    </div>
</div> 
```

除了我的 main.css，我还导入了 twitter bootstrap css 文件。

这种方式是行不通的。是因为 Bootstrap 推翻了我的颜色定义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T22:02:38.773

标记中唯一可以直观地应用此样式的元素是`<a>`，并且该元素具有许多由 Twitter Bootstrap 应用到的非常具体的 CSS 规则，如下所示：

```
.navbar .nav .active > a,
.navbar .nav .active > a:hover {
    color:#FFFFFF;
} 
```

您必须编写更具体的内容才能应用样式：

```
.navbar .navbar-inner .nav .red a {
  color: #d14;
} 
```

演示：http: [//jsfiddle.net/pYGaG/](http://jsfiddle.net/pYGaG/)

如果你真的必须的话，你*可以*使用`!important`规则，但我真的觉得你应该尽可能地避免它。如果这是具有这种样式的单个元素，请考虑向其添加一个`id`，它具有很多权重特异性：

```
<li class="active" id="home_link">
   <a href="/admin/list"><i class="icon-leaf icon-white"></i>Admin</a>
</li> 
```

```
#home_link a {
  color: #d14;
} 
```

[http://jsfiddle.net/pYGaG/1/](http://jsfiddle.net/pYGaG/1/)

这里有几篇关于 CSS 特性的好文章：

*   [http://css-tricks.com/specifics-on-css-specificity/](http://css-tricks.com/specifics-on-css-specificity/)
*   [http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)

作为旁注，尽量避免像`red`. 使用更有意义的内容，这些内容与它的外观无关，而是与它*的本质*（例如，`.active-link`）无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:58:10.253

您在 -Tag 上定义红色`<li>`，但没有文本。文本在`<a>`-Tag 内，因此您需要覆盖此规则。

代码如下：

```
.red a {
    color: #d14;
} 
```

**更新：**寻找 Wesley Murch 给出的答案。

# c# - 您可以使用 AWS Toolkit for Visual Studio 发布到现有的 Amazon EC2 实例吗？

> ID：10575553
> 
> 赞同：8
> 
> 时间：2012-05-13T21:53:33.440
> 
> 标签：c#, asp.net-mvc-3, amazon-web-services

我正在试用 Amazon EC2 上的免费套餐，并打算通过同一个微型实例托管几个小型网站。我已经设置并配置了一个运行 Windows Server 2008 的 EC2 微型实例，并配备了所有必需品。这些网站都是 ASP.NET MVC3 应用程序。

我已经安装了[AWS Toolkit for Visual Studio](http://aws.amazon.com/visualstudio/)并连接到我的亚马逊账户，一切正常。我遇到的问题是，如果我在解决方案资源管理器中右键单击我的项目并选择`Publish to AWS...`，我唯一的选择是将其发布到新实例。这对我不起作用，因为我想在同一台服务器上托管多个站点。

是否可以使用 AWS Toolkit 发布到现有实例，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T13:08:10.320

据我了解，快速回答是否定的。这是因为启动新实例后的推荐过程是更改 AWS 设置的本地管理员密码。由于发布到云结构只有 AccessKey 和 Secret Access Key，它无法获取新的管理员密码，因此无法连接到现有实例。

解决此问题的快速方法是将实例的安全组设置为允许来自您的公共 IP 地址的 FTP，然后仅通过 FTP 发布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T19:40:01.313

我实际上使用了一个名为“dispatch”的插件，它通过 FTP 直接从 Visual Studio 发布到服务器。我讨厌 FTP，但这是迄今为止我见过的最好的解决方案。

我自己一直在寻找替代方案。

我使用的唯一其他选项称为 AllwaysSync，它非常酷。它可以将本地硬盘与 S3 帐户同步。然后，您可以将该 s3 目录链接到 CloudFront。

我一直在“考虑”对此进行双重同步，我总是将同步安装在我的开发盒上，并安装在我的 EC2 服务器上。EC2 机器将 AlwaysSync 设置为自动同步，因此对 S3 目录的任何更改都会被吸入 EC2 机器。当我开始上传时，该目录将与我的本地开发机器同步。

仍然.... 似乎如此半途而废，以至于我刚刚坐下来等待亚马逊。他们通常会想出一些东西。

我发现的一件事非常有效（如果您的连接速度很快）

我实际上将 EC2 服务器用作工作站，将 RDP 用作瘦客户端。有一个名为“SplitView”的应用程序可以让我在最糟糕的情况下使用 3 台显示器。我单击 RDP 的快捷方式，我的 3 台显示器闪烁并发出嗡嗡声，我所有的东西从昨晚开始还在那里。如果有人偷了我的笔记本电脑……除了指向 RDP 帐户的链接外，上面什么都没有。

无论如何，现在（对于亚马逊网站）我只是将我的文件拖到实时机器上并更改 IIS 设置以定位新目录。

# android - 在搜索界面中调用覆盖的主页按钮

> ID：10575554
> 
> 赞同：0
> 
> 时间：2012-05-13T21:53:37.223
> 
> 标签：android

我像这样覆盖主页按钮：

```
@Override 
public boolean onKeyDown(int keyCode, KeyEvent event) {
    switch (keyCode) {
    case KeyEvent.KEYCODE_HOME: 
        System.out.println("hello");
        break;
    }
    return super.onKeyDown(keyCode, event);
}

@Override
public void onAttachedToWindow() {
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
    super.onAttachedToWindow();
} 
```

我还创建了一个搜索界面，例如： [http ://www.edumobile.org/android/android-programming-tutorials/search-interface/](http://www.edumobile.org/android/android-programming-tutorials/search-interface/)

当我点击搜索硬件按钮时，会出现搜索界面。但是在我点击主页按钮的同时，主页按钮的覆盖方法没有被调用，我回到了手机的主屏幕。你能帮我解决一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:56:22.640

您无法捕捉主页按钮的按下，请参阅SO 上的[此](https://stackoverflow.com/questions/6226001/handling-home-button-in-android)问题以获取更多详细信息。简而言之：它是一个系统密钥，您的应用程序无法自行处理它，因为它会允许应用程序阻止用户退出它。

# ios - 用 atos 进行符号化

> ID：10575555
> 
> 赞同：1
> 
> 时间：2012-05-13T21:53:46.310
> 
> 标签：ios, cocoa-touch, nsexception

MyApplication 使用 NSException 实例创建个性化的崩溃报告。应用程序检索 callStackSymbols 数组并将它们添加到文本文件中。

如果您注意到崩溃报告，而不是得到这样的行：

> libsqlite3.dylib 0x30531ce4 0x30506000 + 179428

我得到了这样的一条线

> 29 我的应用程序 0x00059260 我的应用程序 + 4704

看起来我没有得到 2 个地址，而是在中间得到“MyApplication”。Atos 不使用第一个地址。

![在此处输入图像描述](../Images/948730ffca064c946c61a40f3137c44a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:33:24.687

您会得到符号化的结果，因为您的应用程序二进制文件包含调试符号，因此调用`callStackSymbols`可以立即解析地址。唯一缺少的部分是行号，如果符号是应用程序的一部分，则无法自动获得。

这三个数值是：`Address = Base Address + Offset`。这意味着第一个地址足以获取符号。基地址是二进制/框架的起始地址。大多数情况下，当符号化完成时，第一个地址也会更改为相对于框架地址而不是绝对地址。应用程序二进制内存区域通常从`0x1000`. 这可以在崩溃报告二进制图像部分中查看，并且`0x1000`由于较新的 iOS 版本中的新内存功能，它可能会有所不同。

因此，现在只需使用第 3 列中的给定地址，并`0x1000`在调用 atos 时添加该值。

一般来说，我建议使用基于[PLCrashReporter](http://code.google.com/p/plcrashreporter/)的框架，它将为您提供崩溃报告的所有信息。包括标准崩溃报告格式的所有线程和二进制图像，也可以在 App Store 中使用。

# javascript - 匿名函数之间的区别

> ID：10575558
> 
> 赞同：3
> 
> 时间：2012-05-13T21:54:57.707
> 
> 标签：javascript, anonymous-function

我正在阅读更多开源 javascript 框架，并找到了更多创建匿名函数的方法，但有什么不同和最好的方法？

```
(function() {
    this.Lib = {};
}).call(this);

(function() {
    var Lib = {}; window.Lib = Lib;
})();

(function(global) {
    var Lib = {}; global.Lib = Lib;
})(global); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T22:06:04.117

```
(function() {
    this.Lib = {};
}).call(this); 
```

定义`Lib`它被调用的对象的属性，并立即被调用`this`，通常是`window`. 相反，它可以引用拥有调用它的方法的对象。

```
(function() {
    var Lib = {}; window.Lib = Lib;
})(); 
```

定义的`Lib`属性，`window`不管它在哪里被调用（尽管它也被立即调用）。

```
(function(global) {
    var Lib = {}; global.Lib = Lib;
})(global); 
```

定义`Lib`传递给函数的对象的属性。它会立即调用，但除非您`global`在当前范围内定义了值，否则会导致错误。您可能会`window`向它传递或一些命名空间对象。

* * *

这些实际上并不是定义“匿名函数”的不同方式，它们都使用标准方式来执行此操作。这些是为全局（或有效全局）属性赋值的不同方法。从这个意义上说，它们基本上是等价的。

例如，更重要的是它们如何定义它们返回/构造/公开的对象的方法和属性（即它们如何构建`Lib`自身）。

所有这些函数都返回`undefined`，只有第一个可以有效地用作构造函数（使用`new`），所以看起来它们只不过是框架的初始化器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T22:35:58.033

所有这些实际上都等效于（但效率较低且更加模糊）：

```
var Lib = {}; 
```

立即调用的函数表达式 (IIFE) 可以方便地限制不需要更广泛地使用和有条件地创建对象和方法的变量的范围，但它们可能会被过度使用。

请注意，在最后一个示例中，我认为您的意思是：

```
(function(global) {
  ...
})(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T22:00:46.167

看看这个问题：[为什么需要在同一行调用匿名函数？](https://stackoverflow.com/questions/1140089/how-does-an-anonymous-function-in-javascript-work)

它包含大量有关匿名函数的信息。也看看这个问题：[var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

# java - Java Long - Bit 的操作

> ID：10575559
> 
> 赞同：0
> 
> 时间：2012-05-13T21:55:02.777
> 
> 标签：java, bit-manipulation

我有一个很长的数字，我想通过以下方式操作它：

```
Long l = "11000000011" (long l 's bit representation)

Long ll1 = "110000000" (remove last two bits from l and convert to Long)

Long ll2 = "11" (keep last two bit's of l and discard other bits and convert to Long) 
```

任何人都可以帮助我，如何在 Java 中快速做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T22:00:17.653

要将一串位转换为长整数，您可以使用[`Long.parseLong`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#parseLong%28java.lang.String,%20int%29)：

```
long l = Long.parseLong("11000000011", 2); 
```

然后，您可以使用位移运算符`>>`、`<<`和`>>>`删除低位。例如：

```
long ll1 = l >>> 2; 
```

要删除除前两位以外的所有位，您可以使用[`Long.bitCount`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#bitCount%28long%29)对位进行计数，然后移出剩余位。

```
long ll2 = l >>> (Long.bitCount(ll1) - 2); 
```

**编辑：**由于您要问的问题与从`long`s 到 long 的位有关，因此您应该使用以下[`Long.toBinaryString`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#toBinaryString%28long%29)方法：

```
String bits = Long.toBinaryString(/* value */); 
```

从那里，要删除最后两位，您可以使用简单的字符串操作。尝试`String.substring`为此使用。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:37:16.753

```
 long l = Long.parseLong("11110", 2) ;
 long ll1 = l >>> 2;
 long lb = (l & 1) ; last bit
 long ls = l >>> 1;
 long lb1 = (ls & 1) ; bit before last bit 
```

# python - Django IntegrityError SQL：1048，不能为空

> ID：10575580
> 
> 赞同：0
> 
> 时间：2012-05-13T21:56:26.737
> 
> 标签：python, django, model, integrity

提交表单时，我收到一个`IntegrityError (1048, "Column 'paid_on' cannot be null")`.

经过一些研究，我发现很多人通过`null=True, blank=True`在 models.py 中包含项目的定义来解决类似的问题，但是将其添加到我的“paid_on”模型中并没有解决我的问题。

这是我的models.py中的课程：

```
class Payment(models.Model):
  ad = models.ForeignKey(Ad)
  paid = models.BooleanField(default=False)
  paid_on = models.DateTimeField('Payment', null=True, blank=True)
  amount = models.DecimalField(max_digits=9,decimal_places=2)
  pricing = models.ForeignKey(Pricing)
  options = models.ManyToManyField(PricingOptions)

  def complete(self, amount=0.0):
    # clear payment
    if self.amount != amount:
        return False

    self.paid = True
    self.paid_on = datetime.datetime.now()
    self.save()

    # update ad
    self.ad.expires_on += datetime.timedelta(days=payment.pricing.length)
    self.ad.created_on = datetime.datetime.now()
    self.ad.active = True
    self.ad.save() 
```

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:59:12.703

仅将其添加到您的模型中将无济于事，因为您的数据库仍然有限制。如果您想要/需要进行迁移（您更改了 models.py 的部分内容并且它应该更改您的数据库），请查看支持 Django 迁移的[south](http://south.aeracode.org/)

# ruby-on-rails - Rails 新手：关系未建立对吗？

> ID：10575581
> 
> 赞同：0
> 
> 时间：2012-05-13T21:56:32.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

现在我有一些功能在工作，但它真的很难看，我知道有更好的方法来做到这一点。

这是我现在在我的用户模型中拥有的内容：

```
def attending
dayseventsusers=self.days_events_users
daysevents=Array.new
events=Array.new

dayseventsusers.each do |deu| 
  daysevents<<DaysEvent.find(deu['days_events_id'])
end

daysevents.each do |de|
  events<<Event.find(de['event_id'])
end

return events
end 
```

我正在尝试获取特定组 dayseventsusers 记录的事件列表，但我必须通过几个关系来完成此操作。我真正想做的是self.days_events_users.days_event.event，但我不知道假设我的关系设置正确，它是否可以这么简单。

```
User model
has_many :days_events_users

DaysEventsUsers model
belongs_to :user
belongs_to :days_event

DaysEvent
has_many :days_events_users
belongs_to :event 
```

days_events_users 对象属于单个days_event，它属于单个事件。欢迎任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:43:56.390

在没有对此进行测试的情况下，以下工作是否有效：

```
dayseventusers.collect(&:daysevent).collect(&:event) 
```

# linux - 在 linux 内核/文档中编译特定程序

> ID：10575590
> 
> 赞同：0
> 
> 时间：2012-05-13T21:58:45.420
> 
> 标签：linux, linux-kernel

我正在交叉编译linux内核。当我从 ti 的目录运行 make 时，我有以下程序编译得很好

```
kernel/Documentation/virtual/lguest 
```

但是，当我编译 linux 内核然后在目标机器上启动内核映像时，lguest 程序无处可去。（我通过运行 find / -name lguest 确认了这一点）

如何确保 lguest 程序进入 linux 内核的某个位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T03:08:26.747

您必须 cd Documentation/virtual/lguest 并在该目录中明确执行“make”：

cd 文档/虚拟/lguest

制作

cc -m32 -Wall -Wmissing-declarations -Wmissing-prototypes -O3 -U_FORTIFY_SOURCE lguest.c -o lguest

# php - Firefox 错误中的 JQuery SYNC Ajax 调用

> ID：10575591
> 
> 赞同：2
> 
> 时间：2012-05-13T21:59:09.687
> 
> 标签：php, jquery, ajax, firefox, asynchronous

好吧，我制作了一个无限滚动脚本，效果很好。但只是在 Chrome 和 IE 中。不幸的是，它没有在 firefox 上执行同步调用，但仍然对服务器异步进行了锤击......这意味着我得到了大量不应该被请求的内容......因为我在谷歌上搜索并没有找到一个明确的解决方案对于我的问题，所以我会问你们：

```
var endajax = 0;

$(window).scroll(function(){
    if (endajax == 0)
    {
        if($(window).scrollTop() + $(window).height() > $(document).height() - 405) 
    {
            $('#profilecontent').prepend('<div class="iloader bgtrans padding ui-corner-all" style="position: fixed; bottom: 20px; right: 80px;"><div class="ui-widget-content ui-corner-all padding"><img width="8" src="images/loader.gif" alt="" /> Inhalt wird nachgeladen, bitte einen Moment gedulden</div></div>');
        var firstid = $('.postbox').last().attr('name');    
        var lastid = $('.postid').last().val(); 
        var data = "firstid="+firstid+"&lastid="+lastid+"&uid=<?php echo $profileuser->id; ?>"; 
        setTimeout(function() {
            $('.iloader').remove();
        }, 2000);
        $.ajax({
        url: "modules/users/profile/profileposts.php",
        cache: false,
        type: "POST",
        async: false,
        data: data,
            success: function(data){
                if (data.length != 2) {
                      $('#profileposts').append(data).fadeIn('slow');
                }
                else
                {
                    endajax = 1;
                }                           
            },
        });
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T22:05:30.770

也许在ajax调用之前锁定你的信号量？

```
if($(window).scrollTop() + $(window).height() > $(document).height() - 405) 
{
 endajax++; 
```

进而

```
success: function(data){
            if (data.length != 2) {
                  endajax = 0;//or 1 depending on how you are locking this control out
                  $('#profileposts').append(data).fadeIn('slow');
            } 
```

# applescript - Applescript 编辑器没有响应

> ID：10575597
> 
> 赞同：0
> 
> 时间：2012-05-13T22:00:15.733
> 
> 标签：applescript, itunes, itunesartwork

我做了以下脚本来识别没有艺术作品的 iTunes 歌曲。它基于我在 net.js 中找到的其他脚本。

```
tell application "iTunes"
   repeat with a in every track of playlist "Library"
      if not (exists (artwork 1 of a)) then
         add (get location of a) to (playlist "noart")
      end if
   end repeat
end tell 
```

它似乎在工作，它编译得很好，因为我可以在事件日志窗口中这样做：

```
tell application "iTunes"
    count every track of playlist "Library"
        --> 10684
    exists artwork 1 of item 1 of every track of playlist "Library"
        --> true
    exists artwork 1 of item 2 of every track of playlist "Library"
        --> true 
```

但是在 400 轨之后，它开始运行缓慢，并且 applescript 在 1000 轨之后停止响应。

我想也许我可能会耗尽我的 mac 内存，但在 Activity Monitor 中，我可以看到 Applescript 正在消耗 100% 的 CPU 和不到 50MB 的内存。我在 macbook pro（i7 和 4GB 内存）上运行 macos 10.7.4。

如您所见，我的 iTunes 库有 10684 首曲目。它不是一个小图书馆，但也不是一个巨大的图书馆。

有人有什么建议吗？还是一个脚本来识别没有艺术品的曲目？

TIA,

鲍勃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:44:10.510

这是我使用的。我的主要建议是使用“重复”而不是“添加”，然后您就不需要获取轨道的位置。此外，您会看到我正在使用“参考”大多数东西，这使得它工作得更快。我还即时创建了带有时间戳的“无艺术作品”播放列表，这样我就可以看到我运行脚本的时间。

```
set d to current date
set missingTracksCount to 0
tell application "iTunes"
    set isFixedIndexing to fixed indexing
    if not isFixedIndexing then set fixed indexing to true

    -- make a new playlist to hold the tracks
    set newPlaylist to make new playlist
    set name of newPlaylist to "No Art - " & month of d & " " & day of d & " " & time string of d

    set mainPlaylist to a reference to playlist "Library"
    set noArtworkPlaylist to a reference to newPlaylist

    set trackCount to count of tracks of mainPlaylist
    repeat with i from 1 to trackCount
        set trackRef to (a reference to (track i of mainPlaylist))
        if (count of artworks of trackRef) is less than 1 then
            duplicate trackRef to noArtworkPlaylist
            set missingTracksCount to missingTracksCount + 1
        end if
    end repeat

    if not isFixedIndexing then set fixed indexing to isFixedIndexing

    display dialog "Finished!" & return & (missingTracksCount as text) & " tracks didn't have artwork." buttons {"OK"} default button 1 with icon note giving up after 5
end tell 
```

# matlab - 读取和显示 USGS NED DEM

> ID：10575601
> 
> 赞同：1
> 
> 时间：2012-05-13T22:00:28.823
> 
> 标签：matlab, mapping, geotiff

我正在尝试在 MATLAB 中使用 USGS DEM，但在使用 geotiffread 读取它后，mapshow 会产生错误。根据文档，我尝试了

```
[A, R] = geotiffread('NED_10340081')
figure
mapshow(A, R); 
```

但我明白了

```
Error using mapshow
Expected input number 1, I or X or RGB, to be one of these types:

uint8, uint16, double, logical

Instead its type was single.

Error in validateMapRasterData>parseImageInputs (line 109)
validateattributes(A, {'uint8', 'uint16', 'double', 'logical'}, ...

Error in validateMapRasterData>validateImageComponent (line 93)
[A, R] = parseImageInputs(mapfcnname, dataArgs{:}, cmap, rules );

Error in validateMapRasterData (line 27)
[Z, SpatialRef] =  validateImageComponent(mapfcnname, ...

Error in maprastershow (line 127)
[Z, SpatialRef, displayType, HGpairs] = ...

Error in mapshow (line 231)
h = showFcn(varargin{:}); 
```

我的矩阵 A 是单一类型的......这是问题吗？我该如何解决这个问题？这是 DEM 的下载链接[http://snowserver.colorado.edu/pub/fromDominik/NED_10340081.zip](http://snowserver.colorado.edu/pub/fromDominik/NED_10340081.zip) 谢谢 PS 我在[http://www.mathworks.com/matlabcentral/answers/38255-display-usgs交叉发布了这个-dem-using-geotiffread-and-mapshow](http://www.mathworks.com/matlabcentral/answers/38255-display-usgs-dem-using-geotiffread-and-mapshow)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-09T17:42:32.387

指定 DisplayType 是必要的，因为 Matlab 将“图像”与连续栅格数据区分开来。Matlab 有一个完整的图像处理工具箱和一个映射工具箱，每个工具箱具有不同的功能，它们通常是互补的，但来自不同的开发背景。Matlab 支持逻辑、uint8、uint16 和双精度类类型的“图像”，以及单精度和双精度的栅格（网格）数据。

此外，您使用 'DisplayType','surface' 的解决方案仅适用于您的情况，因为您有“单个”数据。例如，如果您在 ArcGis 中创建了一个 geotiff 图像，然后尝试将其读入 Matlab，它将以 int16 的形式出现，并且在尝试使用 mapshow 或 geoshow 时会出现相同的错误，但 'DisplayType','surface ' 在这种情况下不起作用，因为 DisplayType 不接受 int16。您转换为双精度的解决方案更通用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:27:55.100

我终于弄明白了。 `geotiffread`给出一个矩阵类型 'single' 但 mapshow 默认显示`image`只接受类型 'double' （和其他一些）。所以这里的解决方案是：

```
A=double(A); 
```

或者

```
mapshow(A,R,'DisplayType','surface'); 
```

# java - 家庭作业 Java 网络编程

> ID：10575606
> 
> 赞同：0
> 
> 时间：2012-05-13T22:01:01.580
> 
> 标签：java, network-programming, httpresponse

下面是作业的原话：

> 1.) 编写一个 Java 程序，它是一个 TCP 服务器，它向浏览器返回一个 HTTP 响应，显示客户端的 IP 地址和它连接到服务器的次数。
> 
> 2.) 使用 Internet Explorer 等标准 Web 浏览器测试您的程序。

到目前为止，在课程中，我们一直在用 java 创建服务器和客户端，以将图像从客户端发送到服务器。我们一直在使用命令提示符/终端来编译和运行所有程序。

在我看来，我们创建了服务器和客户端 java 程序，但这次客户端只是连接和断开连接，服务器获取 IP 地址并返回 http 响应。

基本上，我正在寻找的是您对作业的解释。此外，任何关于 HTTP 响应到底是什么/做什么的见解都会很好。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T22:02:51.320

作业要求您编写一个实现[HTTP 协议](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)的服务器。

因此，您将能够使用任何 HTTP 客户端，例如 Google Chrome。
您不需要编写自己的客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:11:13.597

在我看来，您应该使用 ServerSocket，在端口 80 打开并监听 HTTP 请求。它们看起来像这样（来源：[http](http://de.wikipedia.org/wiki/Hypertext_Transfer_Protocol) ://de.wikipedia.org/wiki/Hypertext_Transfer_Protocol ）

```
GET /infotext.html HTTP/1.1
Host: www.example.net 
```

您可以忽略请求中的内容并在响应中发回标准 HTML 页面。响应应该是 200（成功）

```
HTTP/1.1 200 OK
Server: Doop-De-Doo
Content-Length: [size]
Content-Language: en
Connection: close
Content-Type: text/html

<html> [CONTENT] </html> 
```

这真的很简单。

# android - Android：如何更改 DatePickerDialog 标题栏的背景

> ID：10575607
> 
> 赞同：0
> 
> 时间：2012-05-13T22:01:30.747
> 
> 标签：android, android-layout, android-widget

我设法将自定义主题应用到 DatePickerDialog 但 DatePickerDialog 的标题中仍然有一个蓝色部分

我怎样才能改变它？

请在下面找到屏幕截图和我的代码。.

这是主题：

```
 <?xml version="1.0" encoding="utf-8"?>
    <resources>
        <style name="DiglrTheme" parent="android:Theme">        
            <item name="android:background">#3f863c</item>
        </style>
    </resources> 
```

这就是我在 Activity 中应用它的地方：

```
 @Override
    protected Dialog onCreateDialog(int id) {

        switch (id) {
        case DATE_DIALOG_ID:            
            return  new DatePickerDialog(this, R.style.DiglrTheme ,mDateSetListener, mYear, mMonth, mDay);                
        }
        return null;
    } 
```

![样式 DatePickerDialog](../Images/607376deaf2d4623f0817442bb7b19e3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:51:22.373

尝试 ：

```
android:background = "@android:color/transparent" 
```

# php - 如何使用主键更新数据库

> ID：10575610
> 
> 赞同：0
> 
> 时间：2012-05-13T22:02:20.490
> 
> 标签：php, mysql, database

我有一个向我的数据库发送更新 sql 代码的表单。

该数据库由 1 个表组成，该表有 6 列。它们是, `key`, `download`, `link`, `version`, `name`, `fs_version`.

我已将键设置作为主要条目，并且我的表单更新了除键字段和名称字段之外的所有字段。它无法更新名称字段，因为它没有该信息。

生成的 SQL 代码形式如下所示：

```
UPDATE `mytable` SET `version`=2, `link`=44, `fs_version`=55, 
`download`=66, WHERE `key` = 1; 
```

但我总是得到错误

```
You have an error in your SQL syntax; check the manual that corresponds to your 
MySQL server version for the right syntax to use near 'WHERE `key` = 1' at line 1 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T22:04:02.547

前面是一个额外的逗号`WHERE`，你不需要它。所以只要删除，一切都会好起来的

```
UPDATE `mytable`
   SET `version`=2, `link`=44, `fs_version`=55, `download`=66, WHERE `key` = 1
                                                             ^----- 
```

# javascript - 在javascript中抽象对象键

> ID：10575614
> 
> 赞同：-1
> 
> 时间：2012-05-13T22:03:52.227
> 
> 标签：javascript, jquery, function

我正在尝试创建一个搜索功能，构建如下：

```
function Search(array, key, query, target){
    var search_string = new RegExp(query, "i");

    var filtered_list = $.grep(array, function (value, index) {
        return (value.key.search(search_string) !=-1);
    });
    $(target).empty(); 

    $.each(filtered_list, printListItem); 
} 
```

问题在于`key`and`target`变量。我不知道如何声明它们以便它们可以在`value.key.search`and中使用`$(target).empty();`。如果我将它们声明为字符串，它就不起作用。例如：

```
var array = [{'name': 'ben'}, {'name':'kit'}];
var query = $(this).val();
var key = "name";
var target = "div#recipes";
Search(array, key, query, target); 
```

这并不让我感到惊讶......但我想知道我应该如何抽象函数，包括键和目标值。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T22:06:28.227

使用[括号表示法。](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Member_Operators#Bracket_notation)

```
var filtered_list = $.grep(array, function (value, index) {
    return (value[key].search(search_string) !=-1);
}); //           ↑   ↑ 
```

# jekyll - Liquid 将字符串转换为 url 链接

> ID：10575615
> 
> 赞同：1
> 
> 时间：2012-05-13T22:03:58.127
> 
> 标签：jekyll, liquid

我在液体模板中有以下代码：

```
<a href="{{ sample.url }}">{{ sample.url }}</a> 
```

来自 jinja2 我希望得到[这样](http://jinja.pocoo.org/docs/templates/#urlize)的结果：

```
{{ sample.url|urlize }} 
```

这是否存在于液体中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T22:56:29.853

我已经看过液体文档，但找不到任何参考，但正如文档所说，您可以编写自己的过滤器来做到这一点。

看看[这里](https://github.com/Shopify/liquid/wiki/Liquid-for-Programmers)。

# wpf - 在单独的视图中链接控件

> ID：10575622
> 
> 赞同：0
> 
> 时间：2012-05-13T22:05:21.923
> 
> 标签：wpf, mvvm, prism

我有两个单独的视图，每个视图都包含一个 ScrollViewer。我想在滚动方面从属另一个。（正在使用 PRISM 注入视图）

如果他们在同一个视图中，我可以轻松地做到这一点。然而，我似乎被困在孤立的观点之间。（这些观点被孤立是有充分理由的......我认为！）

我想我想做的是将 ScrollViewer 'ScrollChangedEvent' 回显到 ViewModel 层，然后使用一些链接服务将消息传递给第二个 ViewModel。

但是，我正在努力研究如何在不违反 MVVM 的情况下从 ViewModel 驱动第二个 ScrollViewer。

当然，我遗漏了一些明显的东西，因此将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:25:59.630

有几种方法可以解决这个问题。正如您所建议的，一种是将滚动更改转移到视图模型。从那里您可以使用松散的发布/订阅机制（例如 Prism 的[事件聚合器](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)）或两个视图模型都可用的共享对象将事件从一个视图模型传输到另一个视图模型。

我的建议是使用棱镜。

当第二个视图模型接收到事件时，它可以使用视图可以直接使用的另一个事件或通过属性将其发布到视图（使用可以绑定到该调用的附加属性`ScrollViewer.ScrollToVerticalOffset`）

# java - Java String - 查看字符串是否仅包含数字而不包含字母

> ID：10575624
> 
> 赞同：235
> 
> 时间：2012-05-13T22:05:37.113
> 
> 标签：java, string, if-statement

我在整个应用程序中加载了一个字符串，它从数字变为字母等。我有一个简单的`if`语句来查看它是否包含字母或数字，但是有些东西不能正常工作。这是一个片段。

```
String text = "abc"; 
String number; 

if (text.contains("[a-zA-Z]+") == false && text.length() > 2) {
    number = text; 
} 
```

尽管`text`变量确实包含字母，但条件返回为`true`。和`&&`应该评估两个条件必须是`true`为了处理`number = text;`

===============================

***解决方案：***

我能够通过使用对此问题的评论提供的以下代码来解决此问题。所有其他帖子也有效！

我使用的有效来自第一条评论。尽管提供的所有示例代码似乎也是有效的！

```
String text = "abc"; 
String number; 

if (Pattern.matches("[a-zA-Z]+", text) == false && text.length() > 2) {
    number = text; 
} 
```

* * *

## 回答 #1

> 赞同：401
> 
> 时间：2012-05-13T22:14:20.360

如果您要将数字作为文本处理，请更改：

```
if (text.contains("[a-zA-Z]+") == false && text.length() > 2){ 
```

至：

```
if (text.matches("[0-9]+") && text.length() > 2) { 
```

与其检查字符串*是否不*包含字母字符，不如检查以确保它*仅*包含数字。

如果您确实想使用数值，请使用`Integer.parseInt()`或`Double.parseDouble()`其他人在下面解释。

* * *

`true`附带说明一下，将布尔值与or进行比较通常被认为是不好的做法`false`。只需使用`if (condition)`or `if (!condition)`。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-01-23T10:03:47.030

您还可以使用来自 Apache Commons 的[NumberUtil.isCreatable(String str)](https://commons.apache.org/proper/commons-lang/javadocs/api-3.7/org/apache/commons/lang3/math/NumberUtils.html#isCreatable-java.lang.String-)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-09-16T12:05:54.310

我会这样做：

```
if(text.matches("^[0-9]*$") && text.length() > 2){
    //...
} 
```

这`$`将避免部分匹配，例如；`1B`.

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-05-01T08:36:45.873

**为了简单地检查它只包含 ALPHABETS 的字符串，请使用以下代码：**

```
if (text.matches("[a-zA-Z]+"){
   // your operations
} 
```

**为了简单地检查它只包含 NUMBER 的字符串，请使用以下代码：**

```
if (text.matches("[0-9]+"){
   // your operations
} 
```

希望这对某人有帮助！

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-02-20T10:26:49.900

性能方面`parseInt`比其他解决方案差得多，因为至少需要异常处理。

我已经运行了 jmh 测试，发现使用`charAt`字符和边界字符比较字符串迭代字符串是测试字符串是否仅包含数字的最快方法。

# JMH 测试

测试比较了`Character.isDigit`vs `Pattern.matcher().matches`vs `Long.parseLong`vs 检查 char 值的性能。

这些方法可以为非 ascii 字符串和包含 +/- 符号的字符串产生不同的结果。

测试在吞吐量模式下运行（**越大越好**），有 5 次预热迭代和 5 次测试迭代。

## 结果

请注意，这`parseLong`比`isDigit`第一次测试加载慢了近 100 倍。

```
## Test load with 25% valid strings (75% strings contain non-digit symbols)

Benchmark       Mode  Cnt  Score   Error  Units
testIsDigit    thrpt    5  9.275 ± 2.348  ops/s
testPattern    thrpt    5  2.135 ± 0.697  ops/s
testParseLong  thrpt    5  0.166 ± 0.021  ops/s

## Test load with 50% valid strings (50% strings contain non-digit symbols)

Benchmark              Mode  Cnt  Score   Error  Units
testCharBetween       thrpt    5  16.773 ± 0.401  ops/s
testCharAtIsDigit     thrpt    5  8.917 ± 0.767  ops/s
testCharArrayIsDigit  thrpt    5  6.553 ± 0.425  ops/s
testPattern           thrpt    5  1.287 ± 0.057  ops/s
testIntStreamCodes    thrpt    5  0.966 ± 0.051  ops/s
testParseLong         thrpt    5  0.174 ± 0.013  ops/s
testParseInt          thrpt    5  0.078 ± 0.001  ops/s 
```

## 测试套件

```
@State(Scope.Benchmark)
public class StringIsNumberBenchmark {
    private static final long CYCLES = 1_000_000L;
    private static final String[] STRINGS = {"12345678901","98765432177","58745896328","35741596328", "123456789a1", "1a345678901", "1234567890 "};
    private static final Pattern PATTERN = Pattern.compile("\\d+");

    @Benchmark
    public void testPattern() {
        for (int i = 0; i < CYCLES; i++) {
            for (String s : STRINGS) {
                boolean b = false;
                b = PATTERN.matcher(s).matches();
            }
        }
    }

    @Benchmark
    public void testParseLong() {
        for (int i = 0; i < CYCLES; i++) {
            for (String s : STRINGS) {
                boolean b = false;
                try {
                    Long.parseLong(s);
                    b = true;
                } catch (NumberFormatException e) {
                    // no-op
                }
            }
        }
    }

    @Benchmark
    public void testCharArrayIsDigit() {
        for (int i = 0; i < CYCLES; i++) {
            for (String s : STRINGS) {
                boolean b = false;
                for (char c : s.toCharArray()) {
                    b = Character.isDigit(c);
                    if (!b) {
                        break;
                    }
                }
            }
        }
    }

    @Benchmark
    public void testCharAtIsDigit() {
        for (int i = 0; i < CYCLES; i++) {
            for (String s : STRINGS) {
                boolean b = false;
                for (int j = 0; j < s.length(); j++) {
                    b = Character.isDigit(s.charAt(j));
                    if (!b) {
                        break;
                    }
                }
            }
        }
    }

    @Benchmark
    public void testIntStreamCodes() {
        for (int i = 0; i < CYCLES; i++) {
            for (String s : STRINGS) {
                boolean b = false;
                b = s.chars().allMatch(c -> c > 47 && c < 58);
            }
        }
    }

    @Benchmark
    public void testCharBetween() {
        for (int i = 0; i < CYCLES; i++) {
            for (String s : STRINGS) {
                boolean b = false;
                for (int j = 0; j < s.length(); j++) {
                    char charr = s.charAt(j);
                    b = '0' <= charr && charr <= '9';
                    if (!b) {
                        break;
                    }
                }
            }
        }
    }
} 
```

# 更新于 2018 年 2 月 23 日

*   添加另外两种情况 - 一种使用`charAt`而不是创建额外的数组，另一种使用`IntStream`char 代码
*   如果为循环测试用例找到非数字，则添加立即中断
*   为循环测试用例的空字符串返回 false

# 更新于 2018 年 2 月 23 日

*   再添加一个测试用例（最快的！），在不使用流的情况下比较 char 值

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-02-01T12:42:41.087

*Apache Commons Lang*提供[`org.apache.commons.lang.StringUtils.isNumeric(CharSequence cs)`](https://commons.apache.org/proper/commons-lang/javadocs/api-3.7/org/apache/commons/lang3/StringUtils.html#isNumeric-java.lang.CharSequence-)，它将 a 作为参数`String`并检查它是否由纯数字字符（包括来自非拉丁脚本的数字）组成。`false`如果存在空格、减号、加号等字符以及逗号和点等小数分隔符，则该方法返回。

该类的其他方法允许进一步的数字检查。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-04-16T23:51:32.600

下面的正则表达式可用于检查字符串是否只有数字：

`if (str.matches(".*[^0-9].*")) or if (str.matches(".*\\D.*"))`

`true`如果 String 包含非数字，则上述两个条件都将返回。上`false`，字符串只有数字。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-01-27T22:33:56.190

boolean isNum = text.chars().allMatch(c -> c >= 48 && c <= 57)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-09-16T09:53:25.297

您可以使用 Regex.Match

```
if(text.matches("\\d*")&& text.length() > 2){
    System.out.println("number");
} 
```

或者您可以使用类似`Integer.parseInt(String)`或更好的版本`Long.parseLong(String)`来获取更大的数字，例如：

```
private boolean onlyContainsNumbers(String text) {
    try {
        Long.parseLong(text);
        return true;
    } catch (NumberFormatException ex) {
        return false;
    }
} 
```

然后测试：

```
if (onlyContainsNumbers(text) && text.length() > 2) {
    // do Stuff
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-05-13T22:13:37.113

在 Java中有很多工具可以从`String`s 获取数字（反之亦然）。您可能想跳过正则表达式部分，以免造成复杂性。

例如，您可以尝试查看[`Double.parseDouble(String s)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)为您返回的内容。`NumberFormatException`如果在字符串中没有找到合适的值，它应该抛出一个。我建议使用这种技术，因为您实际上可以将 表示的值`String`用作数字类型。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-12-24T14:07:11.963

使用 Java 8 流和 lambda 的解决方案

```
String data = "12345";
boolean isOnlyNumbers = data.chars().allMatch(Character::isDigit); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-09-27T11:56:42.677

**这是我的代码，希望对你有帮助！**

```
 public boolean isDigitOnly(String text){

    boolean isDigit = false;

    if (text.matches("[0-9]+") && text.length() > 2) {
        isDigit = true;
    }else {
        isDigit = false;
    }

    return isDigit;
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-12-01T08:03:48.773

```
import java.util.*;

class Class1 {
    public static void main(String[] argh) {
        boolean ans = CheckNumbers("123");
        if (ans == true) {
            System.out.println("String contains numbers only");
        } else {
            System.out.println("String contains other values as well");

        }
    }

    public static boolean CheckNumbers(String input) {
        for (int ctr = 0; ctr < input.length(); ctr++) {
            if ("1234567890".contains(Character.valueOf(input.charAt(ctr)).toString())) {
                continue;
            } else {
                return false;
            }
        }
        return true;
    }
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-01-22T19:24:53.337

这是一个示例。根据需要仅查找字符串和进程格式中的数字。

```
text.replaceAll("\\d(?!$)", "$0 "); 
```

有关更多信息，请查看谷歌文档 [https://developer.android.com/reference/java/util/regex/Pattern](https://developer.android.com/reference/java/util/regex/Pattern)在哪里可以使用**Pattern**

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2022-02-15T05:16:22.993

```
StringUtils.isNumeric("1234") 
```

这很好用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-05-13T22:15:28.520

这段代码已经写好了。如果您不介意（非常）次要的性能损失（这可能不比进行正则表达式匹配更差），请使用[Integer.parseInt()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)或[Double.parseDouble()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)。如果 String 只是数字（或者*是一个*数字，视情况而定），那会立即告诉您。如果您需要处理更长的数字字符串，[BigInteger](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigInteger.html#BigInteger%28java.lang.String%29)和[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#BigDecimal%28java.lang.String%29)运动构造函数都接受字符串。如果您尝试向其传递非数字（整数或小数，当然取决于您选择的数字），其中任何一个都会抛出[NumberFormatException 。](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NumberFormatException.html)或者，根据您的要求，只需迭代字符串中的字符并检查[Character.isDigit()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#isDigit%28char%29)和/或[Character.isLetter()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#isLetter%28char%29)。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-10-06T06:22:41.220

```
public class Test{  
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);
    String str;
    boolean status=false;
    System.out.println("Enter the String : ");
    str = sc.nextLine();

    char ch[] = str.toCharArray();

    for(int i=0;i<ch.length;i++) {
        if(ch[i]=='1'||ch[i]=='2'||ch[i]=='3'||ch[i]=='4'||ch[i]=='5'||ch[i]=='6'||ch[i]=='7'||ch[i]=='8'||ch[i]=='9'||ch[i]=='0') {
            ch[i] = 0;
        }
    }

    for(int i=0;i<ch.length;i++) {
        if(ch[i] != 0) {
            System.out.println("Mixture of letters and Digits");
            status = false;
            break;
        }
        else
            status = true;
    }

    if(status == true){
        System.out.println("Only Digits are present");
    }
} 
```

}

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-01-21T15:53:24.993

Adam Bodrogi 稍作修改的版本：

```
public class NumericStr {

public static void main(String[] args) {
    System.out.println("Matches: "+NumericStr.isNumeric("20"));         // Should be true
    System.out.println("Matches: "+NumericStr.isNumeric("20,00"));          // Should be true
    System.out.println("Matches: "+NumericStr.isNumeric("30.01"));          // Should be true
    System.out.println("Matches: "+NumericStr.isNumeric("30,000.01"));          // Should be true
    System.out.println("Matches: "+NumericStr.isNumeric("-2980"));          // Should be true
    System.out.println("Matches: "+NumericStr.isNumeric("$20"));            // Should be true
    System.out.println("Matches: "+NumericStr.isNumeric("jdl"));            // Should be false
    System.out.println("Matches: "+NumericStr.isNumeric("2lk0"));           // Should be false
}

public static boolean isNumeric(String stringVal) {
    if (stringVal.matches("^[\\$]?[-+]?[\\d\\.,]*[\\.,]?\\d+$")) {
        return true;
    }

    return false;
}
} 
```

今天不得不使用这个，所以刚刚发布了我的修改。包括货币、千位逗号或句点符号以及一些验证。不包括其他货币符号（欧元、美分），验证逗号是每三位数字。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-09-02T20:05:25.133

在这种典型场景中涉及任何异常抛出/处理是一种不好的做法。

因此 parseInt() 不是很好，但正则表达式是一个优雅的解决方案，但请注意以下事项：
-fractions
-负数 -
小数分隔符可能在 contries 中有所不同（例如'，'或'.'）
-有时允许有一个所谓的千位分隔符，例如空格或逗号，例如 12,324,1000.355

要处理应用程序中的所有必要情况，您必须小心，但此正则表达式涵盖了典型场景（正/负和小数，用点分隔）： ^[-+]?\d*.?\d+$
For测试，我推荐[regexr.com](http://regexr.com)。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-12-29T01:07:51.357

```
Character first_letter_or_number = query.charAt(0);
                //------------------------------------------------------------------------------
                if (Character.isDigit())
                {

                }
                else if (Character.isLetter())
                {

                } 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-05-17T20:58:46.330

工作测试示例

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import org.apache.commons.lang3.StringUtils;

public class PaserNo {

    public static void main(String args[]) {

        String text = "gg";

        if (!StringUtils.isBlank(text)) {
            if (stringContainsNumber(text)) {
                int no=Integer.parseInt(text.trim());
                System.out.println("inside"+no);

            } else {
                System.out.println("Outside");
            }
        }
        System.out.println("Done");
    }

    public static boolean stringContainsNumber(String s) {
        Pattern p = Pattern.compile("[0-9]");
        Matcher m = p.matcher(s);
        return m.find();
    }
} 
```

您的代码仍然可以被“1a”等中断，因此您需要检查异常

```
if (!StringUtils.isBlank(studentNbr)) {
                try{
                    if (isStringContainsNumber(studentNbr)){
                    _account.setStudentNbr(Integer.parseInt(studentNbr.trim()));
                }
                }catch(Exception e){
                    e.printStackTrace();
                    logger.info("Exception during parse studentNbr"+e.getMessage());
                }
            } 
```

检查 no 的方法是不是字符串

```
private boolean isStringContainsNumber(String s) {
        Pattern p = Pattern.compile("[0-9]");
        Matcher m = p.matcher(s);
        return m.find();
    } 
```

# jquery - cordovaRef 安装 Badge 插件 iOS/iphone 时出现“未定义”错误

> ID：10575626
> 
> 赞同：1
> 
> 时间：2012-05-13T22:05:38.580
> 
> 标签：jquery, html, jquery-mobile, cordova

之后我得到了cordovaRef的“未定义”

```
var cordovaRef = window.PhoneGap || window.Cordova || window.cordova;
alert(cordovaRef); 
```

有什么想法可能是错的吗？

我浏览了如何安装 Phonegap 插件的一般教程并阅读了自述文件，但它仍然无法正常工作。Cordova 1.6.1 可以在 iPhone 设备（和模拟器 geoloc）上工作（用 geoloc 和相机测试）。但在手机间隙插件.zip 中有IOS 和iPhone 文件夹。为什么会这样？iPhone 文件夹中的 Badge 插件似乎比 IOS 文件夹中的旧。我从IOS文件夹中使用了它。

抱歉缺少标签和未格式化的代码..

1.  Plugins 文件夹：我将 Badge.h 和 Badge.m 文件拖到 Plugins 文件夹到 Xcode 4.2 中，选择“为任何添加的文件夹创建组，添加到目标 (com.myproject)，将项目复制到目标组的文件夹中。
2.  WWW 文件夹：将 Badge.js 复制到 www 文件夹并包含在 index.html 文件中

我通过单击按钮对其进行测试

```
window.plugins.badge.set(6); 
```

Cordova.plist (cordova 1.6.1)：向 Cordova.plist 添加标签（删除括号）

```
<dict>
<key> Badge </key>
<string>Badge </string>
 ...
 </dict> 
```

但它不起作用。之后我得到了cordovaRef的“未定义”

```
var cordovaRef = window.PhoneGap || window.Cordova || window.cordova; 
```

有什么想法可能是错的吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:12:35.377

问题是我在导入插件js文件后导入了cordova.js。

# github - Git Issue with multiple computers

> ID：10575633
> 
> 赞同：0
> 
> 时间：2012-05-13T22:06:38.630
> 
> 标签：github, ssh-keys

I've set up a GitHub repository on my laptop today. I can submit code and all ... but now I want to have the same access with my PC. Do I need to configure the SSH keys etc all over again, with every box I want to work with?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T22:15:11.297

You need SSH access on all computers that will commit code or sync with a private GitHub repository. You have two choices:

1.  Use the same SSH key on all your client computers.
2.  Use a different SSH key on each client computer.

Either way, your authorized SSH keys must be configured on GitHub to allow proper access. Obviously, option #1 is easier to manage, unless your Windows or Mac SSH client doesn't handle OpenSSH keys properly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:13:56.337

Basically yes. You have to set up the security stuff, which is kind of unrelated to git itself. In the other PCs, you have to define a remote repository that contains the address of the repository on your computer. Then you can push to/pull from each other's repositories.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T22:33:46.683

Git with apache (http or https), Nice and easy way (in my opinion).

1.  Server: Configuring Apache HTTPS In order to share your repository. (authorization with htaccess)

2.  Client: Install tortoiseGIT, in order to checkout, commit, update or branch.

# javascript - 如何确保 javascript/jquery 在返回 true（打开链接）之前始终完成点击功能？

> ID：10575635
> 
> 赞同：1
> 
> 时间：2012-05-13T22:06:51.143
> 
> 标签：javascript, jquery, onclick, click

我有一个点击功能，当用户注销时

```
$('#logout').click(function(){

    // update database and tell other users that this person has logged off

}); 
```

#logout 是链接的ID（注销按钮）

该函数将处理一些 ajax/php/database 操作 + 发送套接字消息，并且很容易需要几毫秒才能完成

我可以相信 javascript/jquery 在实际返回 true 之前完成该功能（打开被点击的链接）吗？

或者有什么方法可以确保它完成它..从“return false”开始，然后只在它收到来自 php 的 OK 时才返回 true？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T22:11:11.597

当操作涉及 AJAX 或任何异步操作时，*您永远不能执行 "return"*。否则，您将失去异步的本质。

相反，一旦完成，就交出一个回调来执行。或者返回一个延迟对象并让它在 ajax 完成时进行监听。

```
$('#logout').click(function(e){
    //store location for later use
    var location = $(this).attr('href');
    //prevent link from being followed for now
    e.preventDefault();
    $.ajax({params}).done(function(e){
        //user logged out, follow link
        window.location = location;
    }
}

//while idle and waiting for ajax to complete
//do a moonwalk... 
```

# objective-c - 保存使用 NSCoder 编码的数据

> ID：10575637
> 
> 赞同：1
> 
> 时间：2012-05-13T22:06:54.360
> 
> 标签：objective-c, ios, cocoa-touch, nscoding, nscoder

我正在使用 NSCoder 对一些 NSDictionary 进行编码，并且我想以某种方式将其保存在应用程序中。谁能告诉我我该怎么做？

我想让用户能够在打开应用程序时查看他之前所做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:30:43.450

您可以将其写入 Application Support 文件夹中的文件，或者如果文件很小，您可以将其放入`NSUserDefaults`. 但是，对于其中任何一个，如果字典只包含属性列表类型，您可以直接编写字典。您不必将其编码为`NSData`第一个。

# php - PHP：strlen 帮助。我只需要显示一个字符串的 100 个字符，然后是一个超链接

> ID：10575642
> 
> 赞同：1
> 
> 时间：2012-05-13T22:07:48.407
> 
> 标签：php, database

好的，所以我从数据库中回显了一个项目描述，

我想做的是说：

如果描述超过 100 个字符，则显示 100 个，然后显示一个超链接以了解更多信息。

否则显示描述。

我已经使用 strlen 来获取字符串的长度，但是我如何告诉它只显示 100 然后显示超链接？帮助 ：（ ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T22:10:59.287

看看函数[substr](http://php.net/manual/en/function.substr.php)，可能还有[wordwrap](http://php.net/manual/en/function.wordwrap.php)。

如果您可以使用额外的数据库访问，您可以简单地存储`row id`（将其作为 GET 参数嵌入超链接等）并将其作为参数传递给显示完整消息的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:11:16.013

使用这样的东西：

```
if(strlen($string) > 100) {
    echo substr($string, 0, 100).' '.$hyperlink;
}
else {
    echo $string;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T22:11:26.947

使用 substr()：

```
if (strlen($str) > 100) {
  $str = substr($str,0,100);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T22:13:15.430

这个怎么样？

```
if (strlen($theString) > 100)
{
  echo (substr($theString, 0, 100));
  writeHyperLink($theString);
}
else
{
   echo $theString;
} 
```

# ruby - 找不到捆绑命令。糟糕的翻译

> ID：10575644
> 
> 赞同：2
> 
> 时间：2012-05-13T22:08:14.793
> 
> 标签：ruby, path, gem, bundler

我在使用 bundler gem 时遇到了一些问题。

当我运行“gem list”时，我可以看到捆绑器已安装。“捆绑器（1.1.3、1.0.21）”。

但是，当我尝试运行命令“bundle”时，我收到以下消息：

```
sh.exe": /c/Program Files (x86)/ruby-1.9.3/bin/bundle: "c:/Program: bad interpreter: No such file or directory 
```

我认为这是一些路径错误，但无论我用多少谷歌搜索，我都无法找到解决问题的方法。

有人有任何提示吗？

这是我的路径：

```
C:\Program Files (x86)\AMD APP\bin\x86_64;
C:\Program Files (x86)\AMD APP\bin\x86;
C:\Program Files\Common Files\Microsoft Shared\Windows Live;
C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;
C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;
%SystemRoot%\system32;
%SystemRoot%;    
%SystemRoot%\System32\Wbem;
%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;
C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;
C:\Windows\system32\gs\gs8.71\bin;
C:\Program Files (x86)\Windows Live\Shared;
C:\DevKit\bin;
C:\Program Files (x86)\Common Files\Autodesk Shared\;
C:\Program Files\Common Files\Autodesk Shared\;
C:\Program Files\TortoiseSVN\bin;
C:\Program Files (x86)\Autodesk\Backburner\;
F:\Program Files (x86)\Mozart\bin;
C:\Program Files (x86)\ruby-1.9.3\lib\ruby\gems\1.9.1\gems\rails-3.0.9\bin;
C:\Ruby192\lib\ruby\gems\1.9.1\gems\rake-0.9.2\bin;
W:\wamp\bin\mysql\mysql5.5.16\lib;
F:\Program Files\MATLAB\R2011b\bin;
F:\Program Files (x86)\Heroku\bin;
C:\Program Files (x86)\ruby-1.9.3\bin;
C:\Program Files (x86)\git\bin;
C:\Program Files (x86)\git\cmd 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T22:16:41.717

您看到的错误表明脚本中的逻辑正在 C:\Program Files... 下寻找另一个项目，并且由于某种原因，它所寻找的任何内容都没有被引号包围。

因此，它认为由空格分隔的每条路径都是一个单独的参数。我的猜测是它试图从适当的 PATH 变量运行“ruby”，所以：

```
C:\Program Files (x86)\ruby-1.9.3\bin\ruby 
```

这被解释为你打电话

```
C:\Program 
```

带有参数“文件”和“(x86)\ruby-1.9.3\bin\ruby”。你可以看到为什么那行不通;-)

我对您的环境知之甚少，无法告诉您如何修复它，但是如果您手动将这些内容添加到 PATH 中，那么您应该用引号将每个内容括起来，在这种情况下：

```
C:\Program Files (x86)\ruby-1.9.3\bin; 
```

会成为：

```
"C:\Program Files (x86)\ruby-1.9.3\bin"; 
```

# xcode - Xcode - Google Maps API 航点不起作用

> ID：10575647
> 
> 赞同：1
> 
> 时间：2012-05-13T22:09:14.013
> 
> 标签：xcode, google-maps

当我使用这个 url 请求时：

```
NSString* apiUrlStr = [NSString stringWithFormat:@"http://maps.google.com/maps?output=dragdir&saddr=%@&daddr=%@&waypoints=37.786894,-122.412004",saddr,daddr]; 
```

返回的路线未穿过航路点。你可以在这里看到我使用的功能： [https ://stackoverflow.com/questions/10523084](https://stackoverflow.com/questions/10523084)

所以有什么问题 ？

# php - 如何显示正确的消息？

> ID：10575648
> 
> 赞同：0
> 
> 时间：2012-05-13T22:09:23.920
> 
> 标签：php, javascript, jquery, ajax

我在下面有一个名为 cancelimage.php 的 php 脚本，它将在其中显示一条取消消息：

```
<?php

$image_file_name = $_FILES['fileImage']['name'] ;

    echo "$image_file_name Upload was Canceled";

?> 
```

问题是当我单击“取消”按钮时，它不会显示此消息。相反，它显示消息“文件上传期间出错”。我相信这条消息出现的原因是因为我说的是“return stopImageUpload”。

所以我的问题是，我怎样才能像现在一样返回到 stopImageUpload，而是能够显示取消消息而不是现在显示的消息？

以下是我目前尝试解决此问题但失败的尝试。下面显示了取消按钮功能和 stopImageUpload 功能：

```
var cancelimagecounter = 0;
function startImageUpload(imageuploadform, imagefilename) {
    cancelimagecounter++;
    var _cancelimagecounter = cancelimagecounter;
    $('.imageCancel').on("click", function (event) {
        $('.upload_target').get(0).contentwindow
        $("iframe[name='upload_target']").attr("src", "javascript:'<html></html>'");
        jQuery.ajax("cancelimage.php?fileImage=" + image_file_name).done(function (data) {
            $(".imageemsg" + _cancelimagecounter).html(data);
        });
        return stopImageUpload();
    });
    return true;
}
var imagecounter = 0;
function stopImageUpload(success, imagefilename) {
    var result = '';
    if (success == 1) {
        result = '<span class="imagemsg' + imagecounter + '">The file was uploaded successfully!</span><br/><br/>';
        $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>');
    } else {
        result = '<span class="imageemsg">There was an error during file upload!</span><br/><br/>';
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T22:57:37.610

前言：阿贾克斯不是我的强项.....

您正在依靠 php 来拉取文件名...但是 PHP 在启动上传之前无法获取文件名。如果要在不进行实际上传的情况下显示文件名，则需要从 DOM（输入按钮）中提取文件名。

```
$('input:file').change(function(){
    if ($(this).val()) {
    var filename = $(this).val().replace('C:\\fakepath\\', '');
    }
    $('.imageemsg').html('<p>this is the filename' + filename + '</p>');
}); 
```

# c# - 空的 DataGridView 绑定到 .sdf 数据源

> ID：10575649
> 
> 赞同：0
> 
> 时间：2012-05-13T22:09:35.637
> 
> 标签：c#, visual-studio-2008

我已使用 VisualStudio UI 通过 DataSet 将 DataGridView 绑定到 .sdf 文件。

我可以很好地预览数据集中的数据，但是当我加载应用程序时，数据网格是空的。

此外，如果我尝试将列添加到数据网格，我只能添加未绑定的列；“数据绑定列”选项被禁用。

我试过设置`dgv.AutoGenerateColumns = true`，但这没有帮助。

VS设计器生成的代码：

```
 // 
        // dgv
        // 
        this.dgv.AutoGenerateColumns = false;
        this.dgv.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
        this.dgv.DataSource = this.bibliotecaDataSet;
        this.dgv.Location = new System.Drawing.Point(13, 13);
        this.dgv.Name = "dgv";
        this.dgv.Size = new System.Drawing.Size(413, 230);
        this.dgv.TabIndex = 0;
        // 
        // bibliotecaDataSet
        // 
        this.bibliotecaDataSet.DataSetName = "BibliotecaDataSet";
        this.bibliotecaDataSet.SchemaSerializationMode = System.Data.SchemaSerializationMode.IncludeSchema;
        // 
        // bibliotecaDataSetBindingSource
        // 
        this.bibliotecaDataSetBindingSource.AllowNew = true;
        this.bibliotecaDataSetBindingSource.DataSource = this.bibliotecaDataSet;
        this.bibliotecaDataSetBindingSource.Position = 0; 
```

我需要在我的主应用程序类中添加一些额外的代码来填充网格还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:54:00.873

我最终想通了：

1.  将空的 DataGridView 添加到窗体。
2.  创建数据集。
3.  将特定表从数据集面板拖到 DataGridView 中。

# ios - 运行应用程序时iOS Phonegap Infinite Dialog错误？

> ID：10575651
> 
> 赞同：15
> 
> 时间：2012-05-13T22:09:49.863
> 
> 标签：ios, iphone, xcode, cordova

我在为 iOS 开发 phonegap 应用程序时遇到问题。我刚刚将所有 html / css / javascript 标记复制到 phonegap 应用程序中。我在 10.6.8 的 Mac 上使用 xcode3

当我去运行应用程序时，一旦加载和安装，我就会得到这些对话框：

```
gap:["Network Status","getConnectionInfo","Network Status0",true]
usePolling: gap_callbackServer
getPort: gap_callbackServer:
getToken: gap_callbackServer: 
```

然后永远停留在`gap_poll`：

当我得到这些对话框时，我可以看到应用程序的主屏幕全部加载在后台。

此应用程序已成功构建、部署，目前在 Android 应用市场上，开发时从未遇到过这样的问题。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-14T19:02:41.717

您很可能使用的是 Android 版本的 phonegap.js。每个平台都有自己的 phonegap.js，所以你必须确保你使用的是正确的。我知道这很令人困惑，但我们正在努力。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T05:07:13.580

只需将脚本标签更改为：

```
<script type="text/javascript" src="cordova.2.0.0.js"></script> 
```

到：

```
<script type="text/javascript" src="phonegap.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T06:05:50.627

我发现的另一个解决方案是只使用“phonegap.js”（我什至没有包含该文件），当我添加我的 .zip 文件进行构建时，它似乎会自动为我添加正确的版本。我注意到 phonegap 入门应用程序不包含 .js 文件的版本，这给了我这个想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T09:08:43.587

主要原因是使用主要用于Android的cordova.js。我已经为 iOS 搜索了cordova-1.8.1.js，对我来说运气不好。最后，我从终端为 iOS 创建了 phonegap-1.8.1 项目，然后尝试使用模板中的 phonegap-2.1.0 创建另一个项目，并找到了 cordova-2.1.0.js。这个 JS 然后用于 phonegap-1.8.1 项目......我已经成功了，现在我的应用程序在 iOS 6（新版本 iPAD）上成功运行

# c# - 在 Silverlight WP7 中抑制接触点

> ID：10575652
> 
> 赞同：0
> 
> 时间：2012-05-13T22:10:18.750
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, multi-touch

我正在为 WP7 编写一个混合 XNA + Silverlight 应用程序，我正在尝试解决它们之间的触摸分离问题。我已经解决了一半：`TouchPanel`当用户单击 Silverlight 按钮时，我可以抑制 XNA 触摸。但是，我还没有想出如何为 Silverlight 扔掉仅限游戏的内容。因此，如果您在游戏空间中握住一个触摸点（例如，用于移动玩家），第二次触摸按钮将不起作用。它认为它将它作为一种多点触控手势拾取，并且只允许第一个触摸点点击按钮。

我的问题是：如何在 Silverlight 处理中抑制这个接触点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:33:33.937

最简单的方法是设计您的应用程序，这样您就不会在同一页面上以交互方式使用两种类型的控件。

或者，如果必须，当您检测到第一个 XNA 触摸时禁用 Silverlight 控件上的触摸。

# php - PHP 中的全局变量未正确设置

> ID：10575661
> 
> 赞同：0
> 
> 时间：2012-05-13T22:11:41.507
> 
> 标签：php, global-variables

我是 PHP 新手，无法使用全局变量。我有一个名为 profile 的全局数组。但是，当我声明访问配置文件的特定索引“授权”的内容时，该值不会在设置的函数之外更改。我担心这可能是由于“授权”索引是声明数组时未在数组中声明。但是，其他索引也会发生这种情况，所以我不太确定。任何帮助都会非常有帮助！

简介：

```
/**
 * User profile
 * @name $profile
 * @global array $GLOBALS['profile']
 */
$GLOBALS['profile'] = array(
    # Basic Config - Required
'username' => 'tom',
'x' => 'filler',
'y' => 'filler',
'salt' => 'filler',

    # Optional Config - Please see README before setting these
#   'microid'   =>  array('mailto:user@site', 'http://delegator'),
#   'pavatar'   =>  'http://your.site.com/path/pavatar.img',

    # Advanced Config - Please see README before setting these
    'allow_gmp' =>  true,
#   'allow_test'    =>  false,
#   'allow_suhosin' =>  false,
#   'auth_realm'    =>  'phpMyID',
#   'force_bigmath' =>  false,
#   'idp_url'   =>  'http://192.168.1.5/MyID.config.php',
#   'lifetime'  =>  1440,
#   'paranoid'  =>  false, # EXPERIMENTAL

    # Debug Config - Please see README before setting these
#   'debug'     =>  false,
#   'logfile'   =>  '/tmp/phpMyID.debug.log',
); 
```

设置 profile['authorized'] 的函数：

```
/**
 *Handles the validation of the signature from the user
 */
function validate_mode()
{
global $profile;

user_session();

$qString = strtoupper('abc');
$pString = strtoupper('abc');
$gString = '10';
$aString = strtoupper($_POST['a']);
$zString = strtoupper($_POST['z']);
$yString = strtoupper($_POST['y']);
$cString = $_POST['c'];
$c = gmp_init($cString, 16);
//echo$cString;

$q1 = gmp_init($qString, 16);
$p1 = gmp_init($pString, 16);
$g1 = gmp_init($gString, 16);
$a = gmp_init($aString, 16);
$z = gmp_init($zString, 16);
//$hex_y = base64_decode(yString);
$y = gmp_init($yString, 16);
//echo $yString;

$hash = sha1($pString,false);

$hash = $hash . sha1($qString,false);
$hash = $hash . sha1($gString,false);
$hash = $hash . sha1($yString,false);
$hash = $hash . sha1($cString,false);
$hash = $hash . sha1($aString,false);
$full_hash =sha1($hash,false);

//echo $full_hash;
if (gmp_cmp($z, $q1) < 0)
    {
        $temp_ans = gmp_powm($a, $q1, $p1);
        if (gmp_cmp($temp_ans, 1) == 0)
        {

                $this_hash = gmp_init($full_hash, 16);
                $temp_pow = gmp_powm($g1,$z,$p1);
                $temp_inner =gmp_powm($y,$this_hash, $p1);
                $temp_mid = gmp_mul($a, $temp_inner);
                $temp_pow2 = gmp_mod($temp_mid, $p1);

                if (gmp_cmp($temp_pow, $temp_pow2) == 0)
                {   
                    $compare = strcmp($cString,$_SESSION['challenge']);
                    if ($compare == 0)
                    {
                        $_SESSION['auth_url'] = $profile['idp_url'];

                        $profile['authorized'] = true;
                        // return to the refresh url if they get in
                        wrap_redirect($profile['idp_url']."?openid.mode=id_res");
                    }//ends the $compare == 0;
                    else 
                        echo "The session stored challenge value does not match the one supplied"."\n";
                }//ends the gmp_cmp if statement.
                else
                    echo"g^z mod p doesn't equal a*y^c mod p"."\n";
        }//ends the if($temp_ans ==1)
        else
            echo"a^q  mod p does not equal 1 so we exited"."\n";
    }//ends the if comparing of z and q
    else
        echo"Z is greater than Q so it is exiting"."<br>";
}//ends the validate mode 
```

profile['authorized'] 被访问且值没有改变的函数：

```
function id_res_mode () {
    global $profile;
echo "authorization".$profile['authorized'];
    user_session();

    if ($profile['authorized'])
        wrap_html('You are logged in as ' . $_SESSION['username']);

    wrap_html('You are not logged in');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:31:50.653

您没有在数组中声明*授权。*仅供参考，下次调试时，如果您打开了警告的错误报告，您将收到“未定义索引”警告。

# javascript - FOR 循环计数

> ID：10575662
> 
> 赞同：1
> 
> 时间：2012-05-13T22:12:10.057
> 
> 标签：javascript, jquery, for-loop

我有以下代码，我试图简单地计数到十，`FOR loop`通过每次迭代我想用它`jQuery`来更新一个 div 元素的值`i`

```
for (i=0;i<=10;i++){
  setTimeout(function(){
      $(".test").html(i);
  },10000);
}​ 
```

[JSFIDDLE](http://jsfiddle.net/GgzFW/1/)

问题是，循环将执行并且在完成之前不会显示任何内容，这只是数字 10。

有没有办法实现我所需要的？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T22:18:06.333

由于关闭效果，您的代码无法按预期工作。它通常通过创建另一个在创建后立即调用的匿名函数来解决：

```
for (i=0;i <= 10;i++){
    (function(i) {
        setTimeout(function(){
            $(".test").html(i);
        }, i * 1000);
    })(i);
}​ 
```

[http://jsfiddle.net/zerkms/GgzFW/4/](http://jsfiddle.net/zerkms/GgzFW/4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T22:14:43.207

[演示 jsFiddle](http://jsfiddle.net/rUfjE/7/)

```
var i = 0,
    T =setInterval(function(){
        i < 10 ?  $(".test").html(++i) : clearInterval(T);       
    },1000);

$(".test").html(i); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T22:16:35.850

尝试`setInterval()`改用：

```
var i = 0;

var timer = setInterval(function() {
    $('.test').html(i);

    i++;

    if(i > 10) {
        clearInterval(timer);
    }
}, 10000);
​ 
```

您当前的循环将尽可能快地循环，并设置 10 次超时，使其在调用循环后大约 10 秒内发生。什么`setInterval()`是每 10 秒调用一次传递给它的函数中的代码，实际上延迟了循环。

如果通过清除给定间隔引用的变量，`if()`则它末尾的语句会停止间隔的发生。`i > 10`

我在[这里](http://jsfiddle.net/G3rUD/)分叉了你的 JSFiddle ，等待时间为 100 毫秒而不是 10 秒，用于测试目的。

# linux - Linux find命令，不分时间跨度递归查找最新的10个文件

> ID：10575665
> 
> 赞同：23
> 
> 时间：2012-05-13T22:12:37.763
> 
> 标签：linux, find, tail

到目前为止我尝试了什么...

命令：

```
find . -type f -ctime -3 | tail -n 5 
```

结果：

```
./Mobilni Telefoni/01\. Box Update/05\. DC Unlocker Client/dc-unlocker_client-1.00.0857.exe
./Mobilni Telefoni/01\. Box Update/39\. Z3X Box/01\. Update/01\. Samsung Box/SamsungTool_12.4.exe
./Mobilni Telefoni/10\. Nokia/1\. SRPSKI  HRVATSKI  JEZICI/BB5/3xx_Series/Asha 300/06.97/rm781_06.97_ppm_d.rar
./GPS Navigacije/01\. Garmin/03\. Garmin Other/garmin_kgen_15.exe
./GPS Navigacije/01\. Garmin/03\. Garmin Other/test.txt 
```

这个输出没问题，如果我放宽时间跨度就不行了。（注意我使用 -ctime 而不是 -mtime 因为一些上传的文件是几年前修改的）

问题是文件可以每月上传一次，或者一年一次，我仍然需要获取 10 个最新文件，无论时间跨度如何。

如果无法完成，则`tail`仅限制输出，或者以某种方式仅获取指定的数字，而不会对大量文件产生巨大的性能影响。

通过使用 SO 上的一个答案中的命令，我能够获取文件，但缺少一些文件......

```
find . -type f -printf '%T@ %p\n' | sort -n | tail -10 | cut -f2- -d" " 
```

结果：

```
./Mobilni Telefoni/11\. Samsung/1\. FLASH FILES/1\. SRPSKI HRVATSKI JEZICI/E/E2330/E2330_OXFKE2.rar
./Mobilni Telefoni/11\. Samsung/1\. FLASH FILES/1\. SRPSKI HRVATSKI JEZICI/E/E2330/FlashTool_E2_R6.zip
./Mobilni Telefoni/11\. Samsung/1\. FLASH FILES/1\. SRPSKI HRVATSKI JEZICI/E/E210/E210_XFGH2.rar
./Mobilni Telefoni/05\. iPhone/07\. iFaith/iFaith-v1.4.1_windows-final.zip
./Mobilni Telefoni/05\. iPhone/09\. iPhone Browser/SetupiPhoneBrowser.1.93.exe
./Mobilni Telefoni/05\. iPhone/10\. iPhone_PC_Suite/iPhone_PC_Suite_Eng_v0.2.1.rar
./Mobilni Telefoni/05\. iPhone/10\. iPhone_PC_Suite/iPhone_PC_Suite_Ok.rar
./test
./Mobilni Telefoni/11\. Samsung/1\. FLASH FILES/1\. SRPSKI HRVATSKI JEZICI/E/E2152/E2152_XXJH4_OXFJI2.zip.filepart
./GPS Navigacije/01\. Garmin/03\. Garmin Other/test.txt 
```

文件`garmin_kgen_15.exe`丢失，因为它是在 2008 年创建的，但它是在过去 24 小时内上传的。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-14T09:35:52.503

有人告诉我这是解决方案：

```
find . -type f -printf "%C@ %p\n" | sort -rn | head -n 10 
```

关键是printf`%C@`占位符，就是那个`-ctime`。我通过阅读找到了它`man find`。

结果：

```
1336992789.0000000000 ./Mobilni Telefoni/05\. iPhone/03\. iPhone 4G Firmware/5.1.1/iPhone3,1_5.1.1_9B206_Restore.ipsw.filepart
1336928538.0000000000 ./GPS Navigacije/01\. Garmin/03\. Garmin Other/test.txt
1336922295.0000000000 ./GPS Navigacije/01\. Garmin/03\. Garmin Other/garmin_kgen_15.exe
1336868365.0000000000 ./Mobilni Telefoni/11\. Samsung/1\. FLASH FILES/1\. SRPSKI HRVATSKI JEZICI/E/E2152/E2152_XXJH4_OXFJI2.zip.filepart
1336867426.0000000000 ./Mobilni Telefoni/11\. Samsung/1\. FLASH FILES/1\. SRPSKI HRVATSKI JEZICI/E/E210/E210_XFGH2.rar
1336866301.0000000000 ./Mobilni Telefoni/11\. Samsung/1\. FLASH FILES/1\. SRPSKI HRVATSKI JEZICI/E/E2330/FlashTool_E2_R6.zip
1336865921.0000000000 ./Mobilni Telefoni/11\. Samsung/1\. FLASH FILES/1\. SRPSKI HRVATSKI JEZICI/E/E2330/E2330_OXFKE2.rar
1336865409.0000000000 ./Mobilni Telefoni/11\. Samsung/1\. FLASH FILES/1\. SRPSKI HRVATSKI JEZICI/E/E2230/E2230_XXKC1_CDS.zip
1336865398.0000000000 ./Mobilni Telefoni/11\. Samsung/1\. FLASH FILES/1\. SRPSKI HRVATSKI JEZICI/E/E2230/E2230_XXKC1_BIN.zip
1336864949.0000000000 ./Mobilni Telefoni/11\. Samsung/1\. FLASH FILES/1\. SRPSKI HRVATSKI JEZICI/E/E2230/E2230_OXFKC1_CSC.zip 
```

* * *

对于非常大的文件列表，`sort(1)`使用管道可能不是资源使用的最佳选择。

`sort(1)`只能替换为`perl(1)`并缓冲前十个最高条目。这已在*[unix 命令中进行了概述：如何获取](https://stackoverflow.com/a/25251851/367456)*三个前 n 条记录，这里采用十条记录。

它取代了`sort(1)`and`head(1)`过滤器：

```
find . -type f -printf "%C@ %p\n" | perl -ane '
    BEGIN {@top = ([-1]) x 10}
    if ($F[0] > $top[0][0]) {
        @top = sort {$a->[0] <=> $b->[0]} @top[1..9], [$F[0], $_];
    }
    END {print for reverse map {$_->[1]} @top}
' 
```

结果是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-13T12:47:00.247

我需要一个解决方案来获取目录中 x 最新修改的文​​件，然后在循环中使用它来进一步处理它们：

```
find "/mnt/user/Movie" -iname '*.mkv' -printf "%C@ %p\n" | sort -n | cut -f2- -d" " | tail -10 | tr '\n' '\0' | 
    while IFS= read -r -d '' file; do 
        echo "$file"
    done 
```

返回：

```
/mnt/user/Movie/IJ/I (2014)/I (2014).mkv
/mnt/user/Movie/AB/B (2010)/B (2010).mkv
/mnt/user/Movie/MN/N (1993)/N (1993).mkv
/mnt/user/Movie/MN/M (2016)/M (2016).mkv
/mnt/user/Movie/KL/K (1984)/K (1984).mkv
/mnt/user/Movie/MN/M (1999)/M (1999).mkv
/mnt/user/Movie/GH/G (2014)/G (2014).mkv
/mnt/user/Movie/MN/M (2002)/M (2002).mkv
/mnt/user/Movie/AB/B (2017)/B (2017).mkv
/mnt/user/Movie/CD/D (1997)/D (1997).mkv 
```

更改`tail -10`为应返回的文件数量。当然，您可以替换`-iname '*.mkv'`反对`-type f`以涵盖所有文件。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-07-29T07:30:03.833

更轻松：

```
filename=$(ls -t . | head -10) 
```

# python - Python - 如何在字符串中包含任何随机整数

> ID：10575670
> 
> 赞同：1
> 
> 时间：2012-05-13T22:13:42.547
> 
> 标签：python, sockets, random, xmpp, ejabberd

我为 XMPP 服务器创建了一个禁止机器人，这是我脚本的一部分：

```
resources = ['private', 'sergeant', 'staffsergeant']

"""presence detection script here"""
if resource in resources:
    pass
else:
    print "the jid has been banned"
    """ban script here""" 
```

所以上面的代码禁止任何用户进入，除非他们的资源是`private`,`sergeant`或`staffsergeant`.

我想将上面的脚本更改为**不**禁止任何上述资源，当且仅当它们在资源名称后有一个整数（例如：`sergeant343`，`private5654`等），但如果它们没有任何整数，则禁止它们。所以`jid/sergeant`被禁止但`jid/sergeant432`通过。整数可以是 中的任何数字`range(0, 99999)`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:29:03.387

解决方案如下所示：

```
if resource.rstrip('0123456789') in resources:
    if resource != resource.rstrip('0123456789'):
        print 'ok'
    else:
        print 'banned'
else:
    raise NotImplementedError()  # replace with own code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T22:38:17.907

您可以使用正则表达式。

```
if not re.match(u'^(' + u'|'.join(resources) + u')\d+$', string):
  # Ban here. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T22:16:54.257

这是你想要的？

```
import random as rn

my_string = 'string'

new_string = my_string + str(rn.randint(0,99999)) 
```

结果：

```
>>> new_string
'string32566' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T22:23:17.287

你想用类似的东西做什么`sergeant00432`？

这样的事情怎么样？

```
allowed_prefixes = ['private', 'sergeant', 'staffsergeant']

def resource_is_allowed(r):
    for prefix in allowed_prefixes:
        if re.match(prefix + '[0-9]{,5}', r):
            return True
    return False 
```

或者，更简洁但可能不太清楚，

```
def resource_is_allowed(r):
    return any(re.match(prefix + '[0-9]{,5}', r) for prefix in allowed_prefixes) 
```

请注意，这些将前缀视为正则表达式。您指定的特定前缀与 RE 具有相同的含义，就像它们作为纯字符串一样；如果您可能开始允许在 RE 中包含具有特殊含义的字符的资源前缀，则需要更加谨慎。

# c# - 链接 4 个列表框

> ID：10575674
> 
> 赞同：1
> 
> 时间：2012-05-13T22:13:56.740
> 
> 标签：c#, xml, parsing, listbox, hashmap

首先，我对 C# 非常陌生，我正在尝试重新创建我在 Java 中创建的应用程序。

我有 4 个列表框。每个框都将保存 xml 文件中的值列表。

listBox_year 为`<Year>`. listBox_make 为`<Make>`. listBox_model 为`<Model>`. listBox_subModel 用于`<sub-Model>`.

所以假设我将所有年份添加到 listBox_year 中，没有重复年份。假设我单击某一年，它将调出该年的所有汽车品牌。然后我点击Make，它会显示那个年份的那个Make的模型等等......

使用 Java，我能够使用 HashMap 来完成这项工作，我可以在其中拥有多个同名键，并且我可以搜索在这种情况下选择了任何键的年份获取所有具有该年份的 Makes 或 Values 作为钥匙。

这是XML格式

```
<?xml version="1.0" encoding="utf-8" ?>
<vehicles>

  <Manufacturer>
    <Make>Subaru</Make>
    <Year>2010</Year>
    <Model>Impreza</Model>
    <Sub-Model>2.0i</Sub-Model>
    <Highway>36 MPG highway</Highway>
    <City>27 MPG city</City>
    <Price>$17,495</Price>
    <Description>
      Symmetrical All-Wheel Drive. 
      SUBARU BOXER® engine. 
      Seven airbags standard. 
      >Vehicle Dynamics Control (VDC). 
    </Description>
  </Manufacturer>

  <Manufacturer>
    <Make>Toyota</Make>
    <Year>2012</Year>
    <Model>Supra</Model>
    <Sub-Model>TT</Sub-Model>
    <Highway>22 MPG highway</Highway>
    <City>19 MPG city</City>
    <Price>$48,795</Price>
    <Description>
      16-inch aluminum-alloy wheels.
      6-speaker audio system w/iPod® control.
      Bluetooth® hands-free phone and audio.
      Available power moonroof.
    </Description>
  </Manufacturer>

  <Manufacturer>
    <Make>Subaru</Make>
    <Year>2011</Year>
    <Model>Impreza</Model>
    <Sub-Model>2.0i Limited</Sub-Model>
    <Highway>36 MPG highway</Highway>
    <City>27 MPG city</City>
    <Price>$18,795</Price>
    <Description>
      16-inch aluminum-alloy wheels. 
      6-speaker audio system w/iPod® control. 
      Bluetooth® hands-free phone and audio. 
      Available power moonroof.
    </Description>
  </Manufacturer>

  <Manufacturer>
    <Make>Subaru</Make>
    <Year>2011</Year>
    <Model>Impreza</Model>
    <Sub-Model>2.0i Limited</Sub-Model>
    <Highway>36 MPG highway</Highway>
    <City>27 MPG city</City>
    <Price>$18,795</Price>
    <Description>
      16-inch aluminum-alloy wheels.
      6-speaker audio system w/iPod® control.
      Bluetooth® hands-free phone and audio.
      Available power moonroof.
    </Description>
  </Manufacturer>

</vehicles> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:46:34.757

最接近 java hashmap 的类型是 Dictionary。由于您需要具有相同密钥的多个项目，因此我会使用`Dictionary<int,List<Item>>`. 以下是您可能需要的一些基本功能：

```
void AddItem(int key, Item i, Dictionary<int,List<Item>> dict)
{
   if (!dict.ContainsKey(key))
   {
      dict.Add(i,new List<Item>());
   }
   dict[key].Add(i);
}

List<Item> GetList(int key)
{
   if (dict.ContainsKey(key))
   {
      return dict[key];
   }
   else
   {
      return new List<Item>(); // can also be null
   }
} 
```

# ruby-on-rails - ffi 上的捆绑更新失败

> ID：10575679
> 
> 赞同：26
> 
> 时间：2012-05-13T22:14:28.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3, bundler, ffi

我正在尝试`bundle update`在我的 Rails 应用程序上进行操作，但出现以下错误：

```
Installing ffi (1.0.11) with native extensions Unfortunately, a fatal error has occurred. Please report this error to the Bundler issue tracker at https://github.com/carlhuda/bundler/issues so that we can fix it. Thanks!
/Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:552:in `rescue in block in build_extensions': ERROR: Failed to build gem native extension. (Gem::Installer::ExtensionBuildError)

        /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb 
checking for ffi.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/bin/ruby
    --with-ffi_c-dir
    --without-ffi_c-dir
    --with-ffi_c-include
    --without-ffi_c-include=${ffi_c-dir}/include
    --with-ffi_c-lib
    --without-ffi_c-lib=${ffi_c-dir}/lib
    --with-libffi-config
    --without-libffi-config
    --with-pkg-config
    --without-pkg-config
/Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:506:in `try_cpp'
    from /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:931:in `block in have_header'
    from /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:930:in `have_header'
    from extconf.rb:9:in `<main>'

Gem files will remain installed in /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/ffi-1.0.11 for inspection.
Results logged to /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/ffi-1.0.11/ext/ffi_c/gem_make.out
    from /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:530:in `block in build_extensions'
    from /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:505:in `each'
    from /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:505:in `build_extensions'
    from /Users/Kyle/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:180:in `install'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/source.rb:90:in `block in install'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/rubygems_integration.rb:82:in `preserve_paths'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/source.rb:89:in `install'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/installer.rb:73:in `block in install_gem_from_spec'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/rubygems_integration.rb:97:in `with_build_args'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/installer.rb:72:in `install_gem_from_spec'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/installer.rb:56:in `block in run'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/installer.rb:55:in `run'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/installer.rb:12:in `install'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/cli.rb:271:in `update'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/vendor/thor/task.rb:22:in `run'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/vendor/thor.rb:263:in `dispatch'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/vendor/thor/base.rb:386:in `start'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/bin/bundle:13:in `<top (required)>'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/bin/bundle:19:in `load'
    from /Users/Kyle/.rvm/gems/ruby-1.9.3-p125/bin/bundle:19:in `<main>' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-16T01:40:38.480

我昨天遇到了类似的问题。

我能够使用以下步骤解决它：

[https://github.com/carlhuda/bundler/blob/1-0-stable/ISSUES.md](https://github.com/carlhuda/bundler/blob/1-0-stable/ISSUES.md)

本质上，我的捆绑包存在问题，清理并从头开始重建东西解决了它。

此处重复这些步骤：

```
# remove user-specific gems and git repos
rm -rf ~/.bundle/ ~/.gem/

# remove system-wide git repos and git checkouts
rm -rf $GEM_HOME/bundler/ $GEM_HOME/cache/bundler/

# remove project-specific settings and git repos
rm -rf .bundle/

# remove project-specific cached .gem files
rm -rf vendor/cache/

# remove the saved resolve of the Gemfile
rm -rf Gemfile.lock

# try to install one more time
bundle install 
```

虽然，鉴于输出文本中的消息：

> 您必须先安装开发工具。

这让我觉得你可能没有安装[Apple Xcode Developer Tools](https://developer.apple.com/technologies/tools/)。你检查过吗？（我相信它们可以在 Mac App Store 中找到。）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-02T14:23:29.147

对于 Xcode 5 及更高版本：

```
$ xcode-select --install 
```

安装命令行工具。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-12T00:13:31.550

从 brew 安装 gcc-4.2 后，您需要创建它的符号链接：

```
ln -s /usr/bin/gcc /usr/bin/gcc-4.2 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-07-26T11:03:32.407

对我来说，我只是没有安装 gcc，在 Ubuntu 中通过以下方式解决：

```
sudo apt install build-essential 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-09-25T02:51:25.810

以防万一尝试运行

须藤/usr/bin/gcc

您可能会看到许可协议，因此滚动浏览它，输入“agree”并尝试再次安装 gem。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-02-12T17:01:17.050

请注意：

如果您最近更新了 Xcode，您可能只需要打开 Xcode 并**接受最新协议**即可。

我遇到了同样的问题，最近安装了 Xcode (v6.1) 的更新并通过以下步骤解决了它：

1.  打开 Xcode
2.  接受新协议
3.  重新运行捆绑更新

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-11-26T03:19:58.250

**通过 Xcode 安装“命令行工具”就可以了。**

如果您有 Xcode 4.5，请打开**Preferences** > **Downloads** > Select **Components**选项卡，然后单击**Command Line Tools**旁边的**Install**。

 **虽然我是从 Xcode 安装的，但您也可以从[Apple 的 Developer Downloads 并搜索“命令行工具”下载](https://developer.apple.com/downloads/index.action?name=Command%20Line%20Tools)没有它的软件包。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-09-29T07:02:37.057

我必须接受 Xcode 用户许可证：

> 运行 sudo xcrun cc 应该会调出 Xcode 许可协议的 cli 版本。另一种选择是打开 Xcode.app 并在 GUI 中同意。

可能是由更新 OSX 引起的。

[http://blog.tomhennigan.co.uk/post/62238548037/agreeing-to-the-xcode-license-from-the-command](http://blog.tomhennigan.co.uk/post/62238548037/agreeing-to-the-xcode-license-from-the-command)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-25T19:03:59.690

**Mac OSx 10.10.2 优胜美地**

```
 CC=/usr/bin/i686-apple-darwin11-llvm-gcc-4.2 gem install ffi 
```

就是这样 - 检查你有 4.2 编译器`/usr/bin`，你可以挂钩

```
ls /usr/bin|grep gcc|grep 4.2 
```

**您不必清除所有本地 gem 或覆盖符号链接来执行此操作**- 这是浪费时间，并且可能会产生更多问题然后解决。

请注意，如果您需要通过 brew 安装，您的 bin 路径可能会有所不同

```
brew install apple-gcc42 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-05-22T15:31:02.223

还有方法：

```
export SDKROOT=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk
bundle update 
```

`ffi.h`将在 中找到`${SDKROOT}/usr/include/ffi/ffi.h`。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-04-26T08:57:49.920

**Ubuntu 可信赖 LTS 14.04**

需要从 ruby​​ 2.2.1 切换到 2.3.0 以支持 Rails 应用程序中较新的 gem 版本。

解决方案：

1.  `rvm get stable`
2.  `rvm remove 2.3.0`
3.  `rvm install 2.3.0`
4.  `bundle install`**

# python - 在Python中合并两个不同长度的文件

> ID：10575686
> 
> 赞同：2
> 
> 时间：2012-05-13T22:16:12.293
> 
> 标签：python

我有两个具有相同列数但行数不同的文件。一个文件是时间戳列表和单词列表，第二个文件是时间戳列表以及每个单词中的声音列表，即：

```
9640 12783 she
12783 17103 had
... 
```

和：

```
9640 11240 sh
11240 12783 iy
12783 14078 hv
14078 16157 ae
16157 16880 dcl
16880 17103 d
... 
```

我想合并这两个文件并创建一个条目列表，其中单词作为一个值，音标作为另一个值，即：

```
[['she', 'sh iy']
 ['had', 'hv ae dcl d']
  ... 
```

我是一个完整的 Python（和编程）菜鸟，但我最初的想法是通过在第二个文件中搜索第一个文件中的第二个字段，然后将它们附加到一个列表中来做到这一点。我试过这样做：

```
word = open('SA1.WRD','r')
phone = open('SA1.PHN','r')
word_phone = []

for line in word.readlines():
    words = line.split()
    word = words[2]
    word_phone.append(word)

for line in phone.readlines():
    phones = line.split()
    phone = phones[2]
    if int(phones[1]) <= int(words[1]):
        word_phone.append(phone)

print word_phone 
```

这是输出：

```
['she', 'had', 'your', 'dark', 'suit', 'in', 'greasy', 'wash', 'water', 'all', 'year', 'sh', 'iy', 'hv', 'ae', 'dcl', 'd', 'y', 'er', 'dcl', 'd', 'aa', 'r', 'kcl', 'k', 's', 'uw', 'dx', 'ih', 'ng', 'gcl', 'g', 'r', 'iy', 's', 'iy', 'w', 'aa', 'sh', 'epi', 'w', 'aa', 'dx', 'er', 'q', 'ao', 'l', 'y', 'iy', 'axr'] 
```

正如我所说，我是个菜鸟，一些建议会很有帮助。

**更新：** 如果可能的话，我想重新讨论这个问题。我已经修改了 Lattyware 的代码以对目录进行操作：

```
phns = []
wrds = []
for root, dir, files in os.walk(sys.argv[1]):
    wrds = wrds + [ os.path.join( root, f ) for f in files if f.endswith( '.WRD' ) ]
    phns = phns + [ os.path.join( root, f ) for f in files if f.endswith( '.PHN' ) ]
phns.sort()
wrds.sort()
files = (zip(wrds,phns))

#OPEN THE WORD AND PHONE FILES, COMPARE THEM
output = []
for file in files:
    with open( file[0] ) as unsplit_words, open( file[1] ) as unsplit_sounds:
        sounds = (line.split() for line in unsplit_sounds)
        words = (line.split() for line in unsplit_words)
        output = output +  [
          (word, " ".join(sound for _, _, sound in
                    takeuntil(sounds, stop)))
                for start, stop, word in words
            ] 
```

我想在这些文件的文件路径中保留一些信息。我想知道如何将拆分文件路径附加到此代码返回的列表中的元组中，例如，

```
[('she', 'sh iy', 'directory', 'subdirectory'), ('had', 'hv ae dcl d', 'directory', subdirectory')] 
```

我想我可以拆分路径，然后将列表压缩在一起，但是上面输出的代码列表中有 53,000 个项目，但只有 6300 个文件对正在处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T22:33:40.877

这是一项任务，主要问题是将声音与单词匹配。幸运的是，这很容易做到，因为我们可以简单地获取所有声音，直到它们与单词结束时间匹配。

为此，我们必须构造一个`takeuntil()`函数—— `itertools.takewhile()`（我的原始解决方案）不幸的是需要一个额外的值，所以这是最好的解决方案。

```
def takeuntil(iterable, stop):
    for x in iterable:
        yield x
        if x[1] == stop:
            break

with open("SA1.WRD") as unsplit_words, open("SA1.PHN") as unsplit_sounds:
    sounds = (line.split() for line in unsplit_sounds)
    words = (line.split() for line in unsplit_words)
    output = [
        (word, " ".join(sound for _, _, sound in takeuntil(sounds, stop)))
        for start, stop, word in words
    ]

print(output) 
```

给我们：

```
[('she', 'sh iy'), ('had', 'hv ae dcl d')] 
```

此代码使用[该`with`语句](http://docs.python.org/reference/compound_stmts.html#the-with-statement)来提高可读性并关闭文件（即使出现异常）。它还大量使用[列表推导和生成器表达式](https://www.youtube.com/watch?v=t85uBptTDYY)。

您的代码中有一些不好的模式。不使用`open()`该`with`语句的使用是一个坏主意，并且`readlines()`不需要使用（直接在文件上循环-它很懒，因此在大多数情况下效率更高，更不用说更好的阅读和更少的输入）。

那么这是如何工作的呢？让我们来看看它：

首先，我们打开两个文件进行读取，并输入快速生成器表达式来拆分文件中的行。

接下来是对怪物列表的理解。我们所做的是从我们的`sounds`迭代中获取声音，直到我们到达属于我们所在单词的最后一个声音，然后移动到下一个单词，返回单词和相关声音的列表。然后，我们使用`str.join()`将声音连接成单个字符串。

如果您无法理解思考过程，那么这里有一个扩展版本，其工作方式相同，尽管由于 python 端循环而效率低得多（生成器和列表推导使上述过程*更快*）：

```
with open("SA1.WRD") as words, open("SA1.PHN") as sounds:
    output = []
    current = []
    for line in words:
        start, stop, word = line.split()
        for sound_line in sounds:
            sound_start, sound_stop, sound = sound_line.split()
            current.append(sound)
            if sound_stop == stop:
                break
        output.append((word, " ".join(current)))
        current = []

print(output) 
```

# php - 一个网站在 LAMP 上显示为文本

> ID：10575688
> 
> 赞同：0
> 
> 时间：2012-05-13T22:16:16.653
> 
> 标签：php, apache, httpd.conf

我在 Fedora Linux 上本地安装了 Apache / MySQL 和 PHP。

我知道 PHP 运行正常，因为我的一些网站运行良好，如果我创建一个简单的文件，我可以看到我正在运行 PHP 5.4.1。

搜索谷歌带来了大量的点击，其中问题是 PHP 根本没有运行，但这里不是这种情况 - 它只是一个显示为纯文本而不是作为 php 处理的站点。

我确定这是 httpd.conf 中的某种设置，但看了看并没有什么明显的（无论如何对我来说）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:01:16.583

如果某些页面可以正常工作而某些页面不检查它是否是 php.ini 问题中的 short_open_tag。`(it allows for <? instead of only <?php)`

# javascript - Rails中的jQuery Tokeninput错误

> ID：10575689
> 
> 赞同：1
> 
> 时间：2012-05-13T22:16:18.423
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我正在尝试使用 Railscast #258（修订版）中所示的 jQuery Tokeninput。当我在 tokeninput 字段中输入内容时，该字段不会下拉显示结果，并且我收到以下 javascript 错误：`Uncaught TypeError: Cannot call method 'replace' of undefined`.

当我对其进行手动查询时，我的 json 数据工作正常，服务器请求看起来也很好。我正在尝试搜索问题表中的内容列，因此我将 propertyToSearch 设置为“内容”。

这是我的代码：

咖啡脚本：

```
jQuery ->
$('#fact_issue_tokens').tokenInput "/issues.json"
    theme: 'facebook'
    zindex: 11001
    propertyToSearch: 'content'
    tokenValue: 'content'
    hintText: 'Enter an issue'
    preventDuplicates: true 
```

问题模型：

```
def self.tokens(query)
  issues = where("content like ?", "%#{query}%")
  if issues.empty?
    [{id: "<<<#{query}>>>", content: "New: \"#{query}\""}]
  else
    issues
  end
end

def self.ids_from_tokens(tokens)
  tokens.gsub!(/<<<(.+?)>>>/) { create!(content: $1).id }
  tokens.split(',')
end 
```

问题控制器：

```
def index
  @issues = Issue.order(:content)

  respond_to do |format|
    format.html
    format.json { render json: @issues.tokens(params[:q]) }
  end
end 
```

形式：

```
<%= form_for(Fact.new, :url => kase_facts_path(current_kase), :html => {:class => "form-   
inline"}) do |f| %>

  <%= f.text_field :page, placeholder: 'Page' %>
  <%= f.text_field :description, placeholder: 'Description' %>

  <%= f.label :issue_tokens, 'Issue tags' %>
  <%= f.text_field :issue_tokens %>

  <%= f.hidden_field :source_id, :value => @source.id %>

  <%= f.submit 'Add Fact' %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:32:46.350

@Scott 你试试这个

```
jQuery ->
  $('#fact_issue_tokens').tokenInput '/issues.json'
    theme: 'facebook'
    tokenLimit: 5
    minChars: 4
    preventDuplicates: true
    searchingText: "Enter an issue..."
    prePopulate: $('#fact_issue_tokens').data('load') 
```

并考虑您的索引，因为您使用的是 (:content) 而不是名称可能是您的问题。我很确定为什么，但我使用了标题并且我遇到了问题，我认为是 mysql 或其他什么。当您访问

```
http://localhost:3000/issues.json 
```

你得到 JSON 数据了吗？

**编辑。**

你能在你的表格上试试这个吗？

```
<div class="field">
  <%= f.label :issue_tokens, "Issues" %><br />
  <%= f.text_field :issue_tokens, data: {load: @fact.issues} %>
</div> 
```

# .net - Pex 重新生成和 PexAssumeNotNull

> ID：10575693
> 
> 赞同：1
> 
> 时间：2012-05-13T22:16:43.123
> 
> 标签：.net, testing, pex

我有一个实用程序类，它将接口的构造函数参数传递给存储库类。然后将其分配给类中的私有字段。在类的各种方法中，我引用这个接口私有来做事。

然后我对这个类运行 Pex 并得到一大堆空引用异常被抛出。在对此进行调查后，我发现了一个名为 PexAssumeNotNull 的属性。我已经将这个 agsint 构造函数参数和私有字段放在了试图解决这个问题的地方。我还在构造函数中添加了一个 null 检查，当将 null 传递给构造函数时，它会引发 ArgumentNullException 异常。

我现在已经在这个类上重新运行了 Pex 探索，并且仍然得到空引用异常。

我的问题是我需要做什么才能不得到这些例外？我是否需要重新创建 pex 测试类，如果需要，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T22:23:47.347

在正确的地方使用 PexAssume.IsNotNull。一个非常灵活的解决方案。

这也允许任意条件，例如`someString.Length >= 3`

# linux - 编写一个接受多个多间距参数的 bash 脚本

> ID：10575695
> 
> 赞同：2
> 
> 时间：2012-05-13T22:17:02.720
> 
> 标签：linux, shell, unix, ubuntu

（优秀的）[Unix 编程环境](https://rads.stackoverflow.com/amzn/click/com/013937681X)中的一个例子 考虑了一个地址簿：

```
 John Perkins 616-555-4444
 Bill Jotto 773-222-1112
 Dial-a-Clown 738-224-5823
 Prince Alex 837-999-999
 Pizza Hut 833-339-222
 Pizza Puk 882-922-222
 Pizza Buk 822-221-111 
```

现在我正在编写一个程序来搜索这个名为“ ***411*** ”的地址簿

```
 grep $* /file/location/411 
```

现在运行 411 将产生

```
 $> 411 John
 >John Perkins 616-555-4444 
```

现在说我想打电话给约翰并邀请他吃披萨（所以我正在搜索约翰号码和披萨号码）。

```
 $>411 John Pizza
 grep: can't open pizza 
```

不匹配！

那么如何告诉 shell 接受带有任意空格的多个参数呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T22:25:15.167

当您`grep`使用多个参数调用时，它假定第一个是模式，所有其他都是要搜索的文件。您需要进行两项修改：

1.  当你调用你的程序时，你需要将多字参数括在双引号字符中。这是标准的外壳行为。

2.  您的程序将需要从命令行读取参数并将它们单独发送到`grep`或构建复合表达式 ( `arg1|arg2|arg3`) 并`grep`使用`-E`（扩展正则表达式）标志将其传递给。

例如：

```
args="$1"
shift   # $2 becomes $1, $3 becomes $2, and so on
while [ -n "$1" ]; do
   args="$args|$1"
   shift
done

grep -E "$args" /path/to/address/book 
```

或者：

```
while [ -n "$1" ]; do
  grep "$1" /path/to/address/book
  shift
done 
```

# c++ - 将两个 RGB 图像组合成一个 6 通道图像 - openCV

> ID：10575699
> 
> 赞同：3
> 
> 时间：2012-05-13T22:17:38.613
> 
> 标签：c++, opencv

我正在使用 openCV，我需要将两个三通道 RGB 图像组合成一个 6 通道图像。我不确定我将如何组合它们。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:09:00.613

首先，您必须创建一个目标矩阵。
`cv::Mat`允许创建最多[`CV_CN_MAX`](https://docs.opencv.org/master/d1/d1b/group__core__hal__interface.html#ga3de14a42631396fe0480be69d5d2363f)(512) 个通道的图像。
例如`cv::Mat(cv::Size(640,480),CV_8UC(6))`，具有六个 8 位通道的 640x480 图像。更一般地说，给定`s` 输入，您可以获得一个自适应目标矩阵：

```
cv::Mat(s.size(), CV_MAKETYPE(s.depth(), 6)) 
```

请参阅[数据类型](https://docs.opencv.org/4.5.3/d1/d1b/group__core__hal__interface.html#amgrpc2d7863fca30ab6c7f7119bf757962dd)和[`cv::Mat`构造函数](https://docs.opencv.org/master/d3/d63/classcv_1_1Mat.html#a75a97b1e4e55f380c172af58048a7cde)。

您可能希望使用`Mat::convertTo`来确保两个输入图像具有相同的格式，然后使用[mixChannels](https://docs.opencv.org/4.5.3/d2/de8/group__core__array.html#ga51d768c270a1cdd3497255017c4504be)：

```
mixChannels(const Mat *     src,
    size_t      nsrcs,
    Mat *   dst,
    size_t      ndsts,
    const int *     fromTo,
    size_t      npairs 
) 
```

需要将 2 个源图像放入容器中（请记住，分配矩阵只会创建一个新标头，除非明确要求，否则不会复制图像缓冲区）。

最后要做的是`from_to`使用通道映射创建一个向量。给定 s0 和 s1 输入图像，目标是具有以下映射：

```
s0 red   -> 1st output channel
s0 green -> 2nd
s0 blue  -> 3rd
s1 red   -> 4th
s1 green -> 5th
s1 blue  -> 6th 
```

最终代码将是：

```
std::vector<cv::Mat> s;
s.resize(2); //Or `push_back` your 2 input images
s[0] = ...   //1st input image
s[1] = ...   //2nd input image
auto d = cv::Mat(s[0].size(), CV_MAKETYPE(s[0].depth(), 6));

int from_to[] = { 0,0, 1,1, 2,2, 3,3, 4,4, 5,5 };
cv::mixChannels(s.data(), s.size(), &d, 1, from_to, 6); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-13T23:28:38.647

[split](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=split#split)将图像拆分为一组单通道图像，然后[将](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=split#void%20merge%28const%20Mat%2a%20mv,%20size_t%20count,%20OutputArray%20dst%29)它们按任意顺序重新组合在一起。还有 mixchannels() ，它是两者的更有效但更复杂的组合

理论上，opencv 适用于任意数量的通道，但我怀疑许多功能仅适用于 1 或 3（即灰色或“正常”颜色）

# ruby - 您什么时候想将 proc 存储到哈希中？

> ID：10575700
> 
> 赞同：-1
> 
> 时间：2012-05-13T22:17:56.777
> 
> 标签：ruby, methods, hash, associations

我尝试浏览[此 Ruby 文档](http://www.ruby-doc.org/core-1.9.3/Hash.html)，但不知道为什么要将函数存储为哈希的内容。

提前感谢您的解释！

```
def find_city(map, state)
  if map.include? state
    return map[state]
  else
    return "Not found."
  end
end

cities[:find] = method(:find_city) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T22:56:47.220

当您想通过键查找 proc 时。

例如，这可以用作简单的命令模式实现。

至于您的示例，在不知道是什么`cities`或没有更多上下文的情况下，不可能说出目的是什么。

# c# - .net 类库中的参考网站

> ID：10575703
> 
> 赞同：2
> 
> 时间：2012-05-13T22:18:24.607
> 
> 标签：c#, asp.net, .net, n-layer

我正在编写一个 n 层应用程序/站点，在我的 Common 类库中，我需要调用 NetSqlAzMan Web 引用，但它不能导入到类库中，只能导入到网站类型的项目中。解决它的一种方法是让我的公共层成为一个站点，但这似乎并不正确。如何正确实施？我正在使用 VS2010 Pro

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T22:30:18.783

听起来您的类库的项目类型是 Client Profile 而不是普通的。

客户端配置文件类库不允许引用`System.Web`

如果您将目标平台更改为“.NET Framework 4”，您应该可以参考`System.Web`

# java - 与 JoinTable 的 OneToMany 关联返回 null

> ID：10575704
> 
> 赞同：0
> 
> 时间：2012-05-13T22:18:25.623
> 
> 标签：java, hibernate

简而言之：一个用户有很多“非客户”（这些是用户无法服务的客户）。用户通过连接表关联到多个客户端。

用户类：[https ://gist.github.com/dd99690fcaaba2c834d6](https://gist.github.com/dd99690fcaaba2c834d6)

客户端类：[https ://gist.github.com/10de71bcd1914ded5fb9](https://gist.github.com/10de71bcd1914ded5fb9)

DAO：[https ://gist.github.com/dd4a369d60a05460d0c0](https://gist.github.com/dd4a369d60a05460d0c0)

User 中的“notClients”属性始终为空，谁能帮我理解为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:33:16.893

简而言之，因为您没有将其包含在您的选择查询中。不确定为什么要编写 SQL 查询并使用 bean 转换器？这是使用休眠的一种非常奇怪的方式。最后，这意味着您得到的不是休眠托管实体。它只是一个对象，您选择的特定内容映射到它上面。

使用休眠的“正常”/“正确”方式是这样的：

```
private User getUser(int id, String userType)
{
    User result;

    session = HibernateUtil.getWilsonsSessionFactory().getCurrentSession();
    session.beginTransaction();

    Query query = session.createQuery("select u from User u 
                                       where u.id = :id and u.role = :role");
    query.setParameter("id", id);
    query.setParameter("role", userType);

    result = (User)query.uniqueResult();

    session.getTransaction().commit();

    return result;  
} 
```

然后你得到的是一个 Hibernate 实体，它将填充其所有映射属性。

（个人也不会以这种方式使用 uniqueResult，但我愿意承认这在很大程度上是一种风格偏好。）

# sql-server - 即使在更改默认语言后更新日期时间也会返回错误

> ID：10575707
> 
> 赞同：0
> 
> 时间：2012-05-13T22:19:09.033
> 
> 标签：sql-server, datetime

当我更新日期时间

```
UPDATE client SET dt_modification='2012-05-13 19:16:40' 
```

我收到以下错误：

```
 SQL Server Error Messages - Msg 242 - The conversion of a char data type 
to a datetime data type resulted in an out-of-range datetime value. 
```

原因是我使用的 SQL 日期时间格式（**YYYY-MM-DD**）与预期的**YYYY-DD-MM**不对应。实际上，以下命令正在工作：

```
UPDATE client SET dt_modification='2012-05-12 19:16:40' 
```

我正在处理的数据库是另一个具有美国默认语言且更新正在运行的数据库的副本。所以我尝试将服务器默认语言更改为美国，但它不起作用。我使用了这个命令：

```
 sp_configure 'default language', 0
   reconfigure with override

--before change :  default language 0   9999    2   2
--after  change :  default language 0   9999    0   0 
```

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:34:49.510

没有办法更改单个数据库 AFAIK 的语言设置。您只能对整个服务器执行此操作。但是，您有几个选择：使用

```
set date format YMD 
```

当你开始你的会议。不过不太实用。您也可以在此处[重新创建登录名](http://msdn.microsoft.com/en-us/library/ms189751.aspx)并设置默认语言。

# c# - 尝试编写代码以降低图像分辨率，尝试在上传图像文件后尽可能降低质量

> ID：10575708
> 
> 赞同：0
> 
> 时间：2012-05-13T22:19:29.833
> 
> 标签：c#, asp.net, asp.net-mvc

> **可能重复：**
> [在不损失任何质量的情况下调整图像大小](https://stackoverflow.com/questions/87753/resizing-an-image-without-losing-any-quality)

在用户从 FileUpload 上传图像并保存在服务器上以减小大小之后，我总是在我的应用程序中使用的代码很好。但是，当我在 Photoshop（手动）上做同样的事情并在 facebook 上上传文件时，质量会更好，而且减小的尺寸非常公平。

我只是不知道如何提高服务器上上传图像的质量，有人使用不同的方法吗？

见下面的代码：

```
 private static byte[] ReturnReducedImage(byte[] original, int width, int height)
    {
        Image img = RezizeImage(Image.FromStream(BytearrayToStream(original)), width, height);
        MemoryStream ms = new MemoryStream();
        img.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
        return ms.ToArray();
    }

    private static Image RezizeImage(Image img, int maxWidth, int maxHeight)
    {
        if (img.Height < maxHeight && img.Width < maxWidth) return img;
        Bitmap cpy = null;
        using (img)
        {
            Double xRatio = (double)img.Width / maxWidth;
            Double yRatio = (double)img.Height / maxHeight;
            Double ratio = Math.Max(xRatio, yRatio);
            int nnx = (int)Math.Floor(img.Width / ratio);
            int nny = (int)Math.Floor(img.Height / ratio);
            cpy = new Bitmap(nnx, nny);
            using (Graphics gr = Graphics.FromImage(cpy))
            {
                gr.Clear(Color.Transparent);
                gr.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.High;
                gr.DrawImage(img, new Rectangle(0, 0, nnx, nny), new Rectangle(0, 0, img.Width, img.Height), GraphicsUnit.Pixel);
            }
        }
        return cpy;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:17:34.120

I believe this answers the question: [https://stackoverflow.com/a/87786/910348](https://stackoverflow.com/a/87786/910348).

You'll want to replace this:

```
using (Graphics gr = Graphics.FromImage(cpy))
{
    gr.Clear(Color.Transparent);
    gr.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.High;
    gr.DrawImage(img, new Rectangle(0, 0, nnx, nny), new Rectangle(0, 0, img.Width, img.Height), GraphicsUnit.Pixel);
} 
```

with something like this:

```
using (Graphics gr = Graphics.FromImage(cpy))
{
    gr.Clear(Color.Transparent);
    gr.SmoothingMode = SmoothingMode.AntiAlias;
    gr.InterpolationMode = InterpolationMode.HighQualityBicubic;
    gr.PixelOffsetMode = PixelOffsetMode.HighQuality;
    gr.DrawImage(img, new Rectangle(0, 0, nnx, nny));
} 
```

Cheers.

# c# - 在堆栈大小和可能的溢出方面是否可能有太多方法？

> ID：10575710
> 
> 赞同：5
> 
> 时间：2012-05-13T22:19:51.890
> 
> 标签：c#, .net, design-patterns, stack, stack-overflow

我们都知道，创建促进重用的小方法是一种很好的做法，这不可避免地会导致大量方法被放置在堆栈中。但是，是否有可能达到这样的场景，即有如此多的嵌套方法调用而发生[StackOverflow](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception.aspx)异常？

可接受的解决方案是简单地增加堆栈大小吗？

该[文档指出](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception.aspx)，在“非常深或无界递归”期间会发生这样的异常，因此这似乎是可能的，或者 .NET 框架是否为我们动态处理堆栈大小？

我的问题可以这样概括：

> 是否有可能拥有这样一个设计良好的程序（就小型可重用方法而言）来增加堆栈大小并因此使用更多资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T22:24:54.357

.NET 堆栈大小是固定的，默认为 1 MB。

> 是否有可能拥有这样一个设计良好的程序（就小型可重用方法而言）来增加堆栈大小并因此使用更多资源？

它不会将您的逻辑分解为方法。

遇到不是直接错误的堆栈溢出的唯一方法是递归。当这种情况发生（威胁）时，不要增加堆栈，而是重写代码以使用不同的方式存储数据（如 a `Stack<T>`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T22:24:57.350

并不真地。我刚刚做了一个非常快速的测试，在 15,000 次嵌套调用之后发生了 StackOverflowException。

由于您拥有的方法数量众多，您将无法编写非递归嵌套 15,000 次的代码。

显然，确切的数字取决于您在堆栈上分配的许多函数局部变量。但无论实际数字是多少，它都远远不足以满足您的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T22:26:35.017

在托管世界中，堆栈对性能具有特殊作用。如果您设法在堆栈上分配某些东西（使用原语或结构），则不必将其放在堆上。在堆上分配会增加 GC 压力，这平均会减慢程序的速度。

所以我可以通过在堆栈上分配很多东西来想象一个更快的程序。即使使用**stackalloc**（这是 C#/CLR 的一个鲜为人知的特性）。

有有效的案例可以做到这一点。它们很少见。仅仅说“没有有效的用途”是完全错误的。

# java - jsp注册页面

> ID：10575711
> 
> 赞同：0
> 
> 时间：2012-05-13T22:19:52.907
> 
> 标签：java, html, database, jsp

我正在尝试创建一个注册页面，我没有收到任何错误，但是当我提交结果时。我的数据库没有显示新用户。我认为 executeUpdate 有问题

```
<%@ page import ="java.sql.*" %>
<%@ page import ="javax.sql.*" %>
 <%
 String username=request.getParameter("username"); 
   session.putValue("username",username); 
   String password=request.getParameter("password");
   session.putValue("username",username);

  try{
  int sqlport = 3306;
      String url = "jdbc:mysql://localhost:3306/";
       String user = "admin";
  String pswd = "admin";
   Connection con = DriverManager.getConnection(url, user, pswd);
   Statement stmt = con.createStatement();

   ResultSet results;

   int i=stmt.executeUpdate("insert into users values ('"+username+"','"+password+"')");
 }
    catch(Exception e){
            System.out.print(e);
                    e.printStackTrace();
                            }
     %>

    <html>
   <head>
   <link rel="stylesheet" type="text/css" href="./css/styles.css" />
     <body>
   <form action="register.jsp" method="POST">
      <br>Email :<input type="text" name="email" /></br>
  <br>First name :<input type="text" name="fname" /><br>
      <br>Last name :<input type="text" name="lname" /><br>
        <br>User name :<input type="text" name="username" /><br>
      <br>password :<input type="password" name="password" /></br>
      <input type="submit" value="continue">
     </form>
      </body>
       </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:56:02.197

快速浏览一下，我发现您没有将数据库名称添加到您的 URL 中！您可以查看下面的链接，它非常简单，看起来很像您正在做的事情。

[http://www.roseindia.net/jsp/prepared-statement-query.shtml](http://www.roseindia.net/jsp/prepared-statement-query.shtml)

# iphone - 如何在我的 iOS 应用程序中链接到网站或 Safari

> ID：10575712
> 
> 赞同：3
> 
> 时间：2012-05-13T22:20:24.427
> 
> 标签：iphone, ios, xcode, cocoa-touch, mobile-safari

我正在使用 Xcode 开发 iOS 应用程序，我需要知道如何将网站链接到要在应用程序中打开的按钮。我想要一个下拉栏，其中包含返回单独屏幕的按钮和将链接保存到另一个地方的按钮。有没有办法用我的应用打开网站或 safari 链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T22:38:06.210

您可以在应用程序中使用 UIWebView 对象直接打开网站。

您可以通过调用类似`[[UIApplication sharedApplication] openURL:myURL]`.

# javascript - 销毁时如何防止收集删除模型？

> ID：10575713
> 
> 赞同：1
> 
> 时间：2012-05-13T22:20:44.217
> 
> 标签：javascript, backbone.js, backbone-events

有没有办法在我的模型被破坏时防止主干.js 收集删除它？

每次发生这种情况时，我都会从集合中收到一个“删除”触发事件

```
collection.on("remove", this.handleRemove) 
```

已经尝试传递一些参数但没有

`model.destroy({silent: false, remove: false})`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T07:27:14.017

解决方案是覆盖 Backbone 模型破坏函数。我在一个带有成功和回调策略的抽象模型上做了这个：

参数“data”对应于原始参数“resp”。

```
destroy: function(successCallback, errorCallback) 
{
    var options = { wait: true };
    var model = this;

    successCallback = successCallback || function() {};
    errorCallback = errorCallback || function() {};               

    var destroy = function() 
    {
        model.trigger('destroy', model, model.collection, options);
    };

    options.success = function(data) 
    {
        if ('SUCCESS' === data.responseCode)
        {
            if (options.wait || model.isNew())
                destroy();

             successCallback(data);

            if (!model.isNew())
                model.trigger('sync', model, data, options);
        }
        else
        {
            errorCallback(data);
        }
    };

    if (this.isNew()) 
    {
        options.success();
        return false;
    }

    var xhr = this.sync('delete', this, options);

    if (!options.wait)
        destroy();

    return xhr;
} 
```

# ruby-on-rails - 如何让渲染与嵌套控制器一起使用？

> ID：10575722
> 
> 赞同：-1
> 
> 时间：2012-05-13T22:23:30.550
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, partials, nested-controls

这些是我的路线：

```
resources :auctions do
  resources :bids
end 
```

我有`auctions#show`一个投标表格的观点：

```
= form_for [@auction, @bid] do |form|
  = form.input :maximum
  = form.button :submit 
```

这当然`POST`要`auctions/:auction_id/bids`。

我有这个`bids#create`动作：

```
def create
  #...some_logic...
  if @bid.save
    #...happy_face...
  else
    # See Below
  end
end 
```

在这个“如果出价没有保存逻辑”中，我有：

```
render 'auctions/show' 
```

这应该（并且确实）尝试渲染，`app/views/auctions/show.html.erb`但我收到此错误：

```
Missing partial bids/info-panel, application/info-panel with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
    * "app/views"
    * "gems/devise-2.0.4/app/views" 
```

显然这是一个问题！它正在寻找`app/views/bids`而不是寻找`app/views/auctions`部分。

我如何使上下文成为`app/views/auctions`那些部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:31:58.367

这样的事情应该这样做：

```
<%= render :partial => "auctions/info-panel" %> 
```

如果不包括前导目录，则假定为当前目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T03:40:55.450

既然这是一个错误条件，为什么不重定向到拍卖/展示动作而不是渲染它的模板。您可以通过重定向传递错误元数据，以便拍卖/显示操作知道其错误状态并相应地呈现表单。

# c# - 将 WCF 合同移动到单独的 dll

> ID：10575724
> 
> 赞同：4
> 
> 时间：2012-05-13T22:23:51.550
> 
> 标签：c#, .net, wcf

我想将 WCF 合同接口移动到第三个 DLL，并在我手动生成代理时开始从客户端使用它们。

`[ServiceContract]`当我从客户端使用它们以生成代理时，DLL 中的这些接口是否必须具有该属性？

知道什么是 Dll 的最佳命名，它将只有合同和 DTO 在客户端和服务器之间共享。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T22:38:14.427

将 WCF 数据和服务合同放在单独的程序集中是很常见的做法。在我之前的项目中，我们使用了类似`Company.OurProject.Contracts.dll`. 我认为要通过重用现有类来生成代理，您应该将服务合同（标有 的那些`[ServiceContractAttribute]`）和相应数据合同的接口放入该程序集。我会避免将服务的实际实施放在那里。

这是关于 SO 的另一个很好的答案，可以更深入地了解选择“在引用的程序集中重用类型”时可以重用的内容：[WCF 服务参考生成自己的合同接口，不会重用我的](https://stackoverflow.com/questions/3119329/wcf-service-reference-generates-its-own-contract-interface-wont-reuse-mine)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T22:39:12.930

这是常见的，也许是推荐的方法。

是的，您应该将服务合同放在将存在于合同 dll 中的服务接口上。

请记住，命名空间不必与 dll 的名称匹配。假设您当前的程序集类似于`CompanyName.Technology.Service.dll`命名空间，`CompanyName.Technology.Service`您应该将合同提取到另一个程序集但保持命名空间相同（假设它仍然有意义）并且程序集名称为`CompanyName.Technology.Service.Contracts`. 您不希望拥有一个名称为“contracts”的名称空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T00:16:36.807

我使用 *.ServiceContracts.dll 因为我的系统中最终有多个合同程序集。例如，DataContracts.dll 用于访问数据存储。

# jquery - 覆盖 Uploadify 方法

> ID：10575725
> 
> 赞同：0
> 
> 时间：2012-05-13T22:24:19.007
> 
> 标签：jquery, uploadify

我正在使用 Uploadify jQuery 插件进行文件上传。我想要一个自定义函数来处理进入上传队列的文件。我已经在我的代码中做到了这一点：

```
$(document).ready(function() {
    $('#file-select').uploadify( {
        'swf'      : '/bitstore/public/swf/uploadify.swf',
        'uploader' : 'uploadify.php',
        'queueID'  : 'file-queue',
        'onSelect' : function(file) {
            alert("file added");
            return false;
        }
    });
}); 
```

但是 Uploadify 仍然将 HTML 注入到 DOM 中以表示队列中的文件。我希望我的自定义函数自己做到这一点。有没有办法阻止 Uploadify 这样做？我认为添加`return false;`到该方法会做到这一点，但它不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T19:47:00.257

您是否尝试添加以下内容？（未测试）：

```
'onSelect': function(e, q, f) {
        var validExtensions = new Array('doc','docx','pdf');            
        var fileName = f.name;
        var fileNameExt = fileName.substr(fileName.lastIndexOf('.') + 1);
        if (jquery.inArray(fileNameExt, validExtensions) == -1){
            $(\"#uploadify\").uploadifyCancel(q);
            //$(\"#uploadify\" + q + \" .percentage\").text(\" - Invalid file type\");
            //$(\"#uploadify\" + q).addClass('uploadifyError');               
            return false;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:41:57.763

似乎最新版本的 Uploadify 已禁用该`onSelect`方法的覆盖（请参阅[onSelect - Uploadify](http://www.uploadify.com/documentation/uploadify/onselect/)）。然后，您的选择是隐藏 Uploadify 显示文件名的元素，*或者*您可以进入源代码（当然使用未缩小的版本）并查看可以更改的内容。作为最后的手段，您可以尝试使用旧版本的 Uploadify。不幸的是，我似乎找不到任何链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T22:46:56.483

得到了答案。新版本的 Uploadify 已更改，因此您必须将要覆盖的事件设置为选项：

[http://www.uploadify.com/documentation/uploadify/overrideevents/](http://www.uploadify.com/documentation/uploadify/overrideevents/)

# css - Twitter Bootstrap 16 列响应式 CSS，怎么样？

> ID：10575726
> 
> 赞同：1
> 
> 时间：2012-05-13T22:24:32.163
> 
> 标签：css, twitter-bootstrap, responsive-design

我已经到处寻找为 16 列引导响应布局获取正确列宽的答案。我发现帖子表明可以做到这一点。但这对我不起作用。我已经尝试过 Bootstrap 自定义页面。但它根本不会更新响应部分。我最终的 span16 宽度为 120%+

我尝试使用较少的文件并更新变量。但是，再一次，我最终得到了错误的宽度——对于 1200 像素以上的屏幕，我最终得到了 1600 像素宽的布局。

也许我可以单独更新每个屏幕尺寸的所有值。但由于它不仅是跨度宽度，还有每个屏幕尺寸的输入和其他宽度，它真的开始变得不守规矩。特别是因为我不能 100% 确定宽度应该是多少，尤其是当您使用较小的屏幕尺寸时。

肯定还有其他人遇到过这个问题。所以，也许我只是迟钝。

但是，我们非常感谢有关此问题的任何指导或智慧。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:36:07.990

它已在即将推出的 twitter bootstrap 2.1.0 中得到解决。

![网格系统 twitter boostrap 2.1.0](../Images/e85b4006a45d1c18a735774951af43c4.png)

# api - 推荐栏：删除阅读操作（从我的时间线中删除）

> ID：10575727
> 
> 赞同：0
> 
> 时间：2012-05-13T22:24:38.723
> 
> 标签：api, facebook-opengraph, facebook-recommendations

推荐栏似乎运行良好，但无法从用户的时间线中删除最近的阅读操作。由于所有操作都由插件处理，因此似乎没有办法获取读取生成的 ACTION_ID。

因此，Facebook 不会通过推荐栏批准我的阅读操作，因为我无法在文章中提供一个链接，该链接显示“从时间线中删除”从用户的时间线中删除操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:42:52.113

您使用您的 url 作为对象读取读取操作的 /me/news.reads API 调用，然后使用该操作 id 进行删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:26:39.910

我在批准我的阅读操作时遇到了同样的问题。不幸的是，Facebook 并不在意，并且会拒绝您的操作，因为它没有为用户提供稍后删除其操作的能力。

唯一的方法是手动构建此功能。推荐栏插件在发布到 Facebook 后不会返回操作的 ID，因此您必须手动查询 Facebook 以获取信息：

```
$activity = $fb->api('/me/' . $action_id );
print_r( $activity ); 
```

然后，您必须正确显示信息并让用户从那里删除他们的信息。

对于我的网站，我必须创建一个 WordPress 插件来做到这一点。你可以在这里看到它的作用： [http ://www.xtremeps3.com/wp-admin/admin.php?page=facebook-activity/facebook-activity.php](http://www.xtremeps3.com/wp-admin/admin.php?page=facebook-activity/facebook-activity.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T18:15:19.970

并且作为更新，推荐栏的“社交阅读”功能已被删除，可能是由于阅读操作问题（几个月前被报告为错误并在该功能消失的同时标记为已修复） . 它现在只是复制了 Recommend Box 功能。——</p>

# asp.net-mvc - 使用 RavenDB 的类 Twitter 模型

> ID：10575731
> 
> 赞同：3
> 
> 时间：2012-05-13T22:25:20.713
> 
> 标签：asp.net-mvc, document, ravendb

我正在和 Raven 一起玩，并试图找出为类似 twitter 的场景建模我的对象的最佳方法。到目前为止，我已经提出了一些选择，但不确定哪个是最好的。

```
public class User{
    public string Id{get;set;}
    public List<string> Following{get;set;}
    public List<string> Followers{get;set;}
} 
```

User 对象简单明了，只是一个 ID 和我关注的人和关注我的人的 ID 列表。提要设置是我需要帮助的地方，可以从我关注的用户那里获取所有帖子。

## 选项 1 - 简单的路线

这仅根据他们的 UserId 搜索我关注的人的所有帖子。

```
public class Post{
    public string UserId{get;set;}
    public string Content{get;set;}
} 
```

### 指数

```
public class Posts : AbstractIndexCreationTask<Post>{
    public Posts(){
        Map = results => from r in results
                         select new{
                             r.UserId
                         };
    }
} 
```

### 查询

```
var posts = session.Query<Post,Posts>().Where(c=>c.UserId.In(peopleImFollowing)); 
```

这是显而易见的路线，但闻起来很臭。该查询导致发送到 Lucene 的一堆 OR 语句。Raven 可以处理的上限约为 1024，因此任何一个用户都不能关注超过 1000 人。

## 选项 2 - 每个关注者一个帖子

```
public class Post{
    public string UserId{get;set;}
    public string RecipientId{get;set;}
    public string Content{get;set;}
} 
```

### 添加新帖子

```
foreach(string followerId in me.Followers){
   session.Store(new Post{
    UserId = me.UserId,
    RecipientId = followerId,
    Content = "foobar" });
} 
```

这很容易理解，也很容易查询，但似乎创建的文档太多了……也许这并不重要？

## 选项 3 - 收件人列表

到目前为止，我最喜欢这个。

```
public class Post{
    public string UserId{get;set;}
    public List<string> Recipients{get;set;}
    public string Content{get;set;}
} 
```

### 指数

```
public class Posts : AbstractIndexCreationTask<Post>{
    public Posts(){
        Map = results => from r in results
                         select new{
                             UserId = r.UserId,
                             Recipient = r.Recipients
                         }
    }
} 
```

### 添加新帖子

```
session.Store(new Post{
               UserId = me.Id,
               Recipients = me.Followers,
               Content = "foobar"
              }); 
```

### 查询

```
var posts = session.Query<Post,Posts>().Where(c=>c.Recipient == me.Id); 
```

这似乎是最好的方法，但我以前从未使用过 Lucene。如果有人有 10,000 个关注者，那么索引会不会有问题？如果我们想向每个用户发布一条消息怎么办？也许还有另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:32:05.420

从我的角度来看，只有选项 1 真正有效，如果您希望支持超过 1024 个用户，您可能需要调整 RavenDB 与 lucene 的对话方式。

**选项 2 和选项 3**没有考虑到，在您关注新用户后，您希望他们的旧推文出现在您的时间线中。同样，您还希望这些推文在您取消关注后从您的时间线上消失。如果您想使用这两种方法之一来实现这一点，您需要在“关注”操作中复制他们的所有推文，并在“取消关注”时删除它们。这将使关注/取消关注成为一项非常昂贵的操作，并且它也可能失败（如果在您执行此操作时包含部分推文的服务器不可用怎么办？）。

**选项 2**也有一个巨大的缺点，即它会产生大量的重复数据。想想拥有数百万追随者和数千条帖子的著名用户。然后将其与成千上万的著名用户相乘……甚至 twitter 也无法处理如此大量的数据。

**选项 3**还存在查询索引变慢的问题，因为每个 lucene 文档都会有这个“收件人”字段，可能有数百万个值。而且您拥有数万亿个文档...不，我不是 lucene 专家，但我认为它的工作速度不足以显示时间线（即使您不是唯一想要显示时间线的并发用户）。

正如我上面所说，我认为只有选项 1 有效。也许其他人有更好的方法。顺便说一句，好问题。

# android - Android 是否总是按照注册的顺序回调监听器？

> ID：10575734
> 
> 赞同：0
> 
> 时间：2012-05-13T22:25:36.360
> 
> 标签：android, listener

在我的应用程序中，我通过 registerOnSharedPreferenceChangeListener() 函数为 Preference 更改注册了几个侦听器。

[这个答案](https://stackoverflow.com/questions/8912553/how-do-threads-interact-with-listeners-in-android)给了我一个提示（侦听器在单个线程中调用，顺序调用），这似乎很明显，但我找不到调用顺序的任何确认，我的算法依赖于顺序。

任何人都可以确认吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T22:38:24.550

调用顺序没有记录，因此您不应依赖它。

# java - CheckStyle 自定义检查——检索所有参数名称

> ID：10575739
> 
> 赞同：0
> 
> 时间：2012-05-13T22:26:59.190
> 
> 标签：java, static-analysis, checkstyle

我正在尝试使用 CheckStyle 检索在给定源文件中找到的所有方法中的所有参数名称。以下是相关代码：

* * *

```
public int[] getDefaultTokens()
{
   return new int[] { TokenTypes.METHOD_DEF};
}

public void visitToken(DetailAST aDetailAST)
{
String returnType;        // The return type of the method.
int numberOfParameters;   // The number of parameters in the method's parameter list... not    returned in log.
String [] parameterNames; // The names of all method parameters.
int openingBraceLine;     // The line number of the opening method bracket.

  returnType = aDetailAST.findFirstToken(TokenTypes.TYPE).getFirstChild().getText(); // get the return type.

  numberOfParameters = aDetailAST.findFirstToken(TokenTypes.PARAMETERS).getChildCount(TokenTypes.PARAMETER_DEF); // get num of parameters.
  parameterNames = new String[numberOfParameters]; // create array to store the parameter names.
  if (numberOfParameters > 0) // only bother if parameters existed.
  {
     List <DetailAST> parameters = DetailASTUtil.getDetailASTsForTypeInBranch                       // Get all PARAMETER_DEF nodes.
                                             (aDetailAST.findFirstToken(TokenTypes.PARAMETERS)
                                                                  , TokenTypes.PARAMETER_DEF);

     int i = 0;

     for (DetailAST currentParameter: parameters) // iterate through all parameters.
     {
        parameterNames[i] = currentParameter.findFirstToken(TokenTypes.IDENT).getText();
        // Get the parameter name, store it in the array.
        i++; // iterate to next parameter name array storage index.
     }
  }

  // parameterNames now contains all parameter names in the parameter list. Format it for log message.

  String formattedParameterNames = "";

  if (numberOfParameters > 1) // if more than one parameter was present, then create comma list.
  {
     for (int i = 0; i < parameterNames.length-1; i++) // put all names in comma-separated string except for last.
     {
        formattedParameterNames += parameterNames[i] + ", ";
     }

     formattedParameterNames += parameterNames[numberOfParameters-1]; // add the last element of the comma list.
  }
  else if (numberOfParameters == 1) // only one parameter -- don't comma-delimit.
  {
     formattedParameterNames = parameterNames[0];
  }

  if (numberOfParameters == 2) // debug to see if string formatting is messing up the parameter names or if tree traversal is bad.
  {
     formattedParameterNames = "Param 1: " + parameterNames[0] + " Param 2: " + parameterNames[1];
  }

  log(aDetailAST.getLineNo(), "[" + returnType + "]" + ", [" + formattedParameterNames + "], ");
  // will be further parsed in actual applet since I don't think there's a way to get individual lines of code via CheckStyle... I would like if a getTextForLineofCode(lineNumber) func existed with CheckStyle, but I don't think it does.
} 
```

* * *

```
public static List<DetailAST> getDetailASTsForTypeInBranch(DetailAST expr,
        int tokenType) {
    return getDetailASTsForTypeInBranch(expr, tokenType, null);
}

private static List<DetailAST> getDetailASTsForTypeInBranch(DetailAST expr,
        int tokenType, List<DetailAST> list) {
    if (list == null)
        list = new ArrayList<DetailAST>();
    DetailAST child = (DetailAST) expr.getFirstChild();
    while (child != null) {
        if (child.getType() == tokenType) {
            list.add(child);
        } else {
            list = getDetailASTsForTypeInBranch(child, tokenType, list);
        }
        child = (DetailAST) child.getNextSibling();
    }
    return list;
} 
```

* * *

当我在主小程序中检索此日志消息时，没有/单参数列表的函数看起来很好，但双参数函数要么根本没有注册，要么返回消息“secondParmeterNameHere]”，其中 secondParameterNameHere 是特定函数的第二个参数名称。

关于我获取所有参数名称的算法有什么问题的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:21:32.433

我的两分钱来优化你的代码。

## 使用 for 循环

在您的递归辅助方法中，您可以替换

```
 DetailAST child = (DetailAST) expr.getFirstChild();
while (child != null) {
    if (child.getType() == tokenType) {
        list.add(child);
    } else {
        list = getDetailASTsForTypeInBranch(child, tokenType, list);
    }
    child = (DetailAST) child.getNextSibling();
} 
```

经过

```
for(DetailAST child = (DetailAST) expr.getFirstChild(); child != null; child = (DetailAST) child.getNextSibling()) {
    if (child.getType() == tokenType) {
        list.add(child);
    } else {
        list = getDetailASTsForTypeInBranch(child, tokenType, list);
    }
} 
```

## 决定一种分配“列表”的方法

这是某种“分配重复：

```
list = getDetailASTsForTypeInBranch(child, tokenType, list); 
```

您通过引用传递“列表”。并且在递归期间，您对该引用进行操作（list.add(..)）。但是您稍后仍会将此列表作为返回值返回。在递归中，您将此返回值重新分配给原始输入变量，尽管在递归期间已对其进行了修改？！

您应该使用返回值并且不要将列表作为输入参数传递。或者你可以传递列表，但你的方法不应该有返回值。

## 减少代码以格式化参数名称

变量*parameterNames*已过时，因为您只使用它再次迭代它并连接一个字符串。您的字符串连接也重复且效率低下。我会提出以下解决方案：

```
 StringBuilder formattedParameterNames = new StringBuilder();
    for (Iterator<DetailAST> iterator = parameters.iterator(); iterator.hasNext();) {
        DetailAST detailAST = iterator.next();
        formattedParameterNames.append(detailAST.findFirstToken(TokenTypes.IDENT).getText());
        if(iterator.hasNext()) {
            formattedParameterNames.append(", ");
        }
    } 
```

您可以在 StringBuilder 上调用 toString() 来获取您的日志记录语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-13T13:52:46.477

希望下面的代码片段对您有所帮助

```
@Override
public int[] getDefaultTokens() {
    return new int[] { TokenTypes.METHOD_DEF};
}

@Override
public void visitToken(DetailAST ast) {
    String methodName = null;
    String returnType = null;
    int numberOfParameters = 0;

    methodName = ast.findFirstToken(TokenTypes.IDENT).getText();

    DetailAST typeElt = ast.findFirstToken(TokenTypes.TYPE);
    returnType = typeElt.getFirstChild().getText();

    DetailAST parametersElt = ast.findFirstToken(TokenTypes.PARAMETERS); 
    numberOfParameters = parametersElt.getChildCount(TokenTypes.PARAMETER_DEF);

    log(ast,"Method Name : "+methodName);
    log(ast,"Return Type : "+returnType);
    log(ast,"No Of Parameters : "+numberOfParameters);

    DetailAST paraElt = parametersElt.findFirstToken(TokenTypes.PARAMETER_DEF);

    int i=1;
    while(paraElt != null){
        if(paraElt.getType() == TokenTypes.PARAMETER_DEF){
            String dataType = paraElt.findFirstToken(TokenTypes.TYPE).getFirstChild().getText();
            String paraName = paraElt.findFirstToken(TokenTypes.IDENT).getText();
            log(ast,"Parameter "+i+" ("+dataType+" "+paraName+")");
            i++;    
        }
        paraElt = paraElt.getNextSibling();
    }
} 
```

输出将像

```
[ERROR] path\Test.java:8:9: Method Name : add [ListMethodParameters]
[ERROR] path\Test.java:8:9: No Of Parameters : 0 [ListMethodParameters]
[ERROR] path\Test.java:8:9: Return Type : void [ListMethodParameters]
[ERROR] path\Test.java:12:9: Method Name : sub [ListMethodParameters]
[ERROR] path\Test.java:12:9: No Of Parameters : 3 [ListMethodParameters]
[ERROR] path\Test.java:12:9: Parameter 1 (int a) [ListMethodParameters]
[ERROR] path\Test.java:12:9: Parameter 2 (int b) [ListMethodParameters]
[ERROR] path\Test.java:12:9: Parameter 3 (int c) [ListMethodParameters]
[ERROR] path\Test.java:12:9: Return Type : int [ListMethodParameters] 
```

Java文件用于测试上述代码

```
public class Test {
    public void add(){
        name.length();
    }
    public int sub(int a,int b,int c){
        return a+b+c;
    }
} 
```

# c++ - 删除 id3v2 标签 c++

> ID：10575740
> 
> 赞同：0
> 
> 时间：2012-05-13T22:27:09.410
> 
> 标签：c++, windows, mp3, id3-tag, id3v2

有谁知道如何在给定 mp3 文件的情况下在 c++ 中从中删除 id3v2 标头？我正在使用 Windows 机器，但找不到任何关于如何让 id3lib 在 Windows 上工作的说明。否则，我只会使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T22:40:07.247

您是否尝试过阅读[id3v2 标准](http://www.id3.org/id3v2-00)？[本文档](http://www.id3.org/id3v2.4.0-structure)描述了 id3v2 标签的结构。

# c# - 通过 C# 交换 PowerShell 命令

> ID：10575742
> 
> 赞同：1
> 
> 时间：2012-05-13T22:27:39.147
> 
> 标签：c#, powershell, exchange-server

我正在使用 C# 发送与 Exchange 交互的 PowerShell 命令。我有一个方法叫它`initconnection`建立我与 Exchange 的连接。

当我单击一个按钮时，我会调用另一种方法，该按钮将在建立连接后向 powershell 发送命令。但是我无法继续创建的连接。当我尝试运行命令时，它说找不到该命令。很可能是因为它没有交换 cmdlet。

```
Runspace runspace = System.Management.Automation.Runspaces.RunspaceFactory.CreateRunspace();

runspace.Open();

Pipeline pipeline = runspace.CreatePipeline();
pipeline.Commands.AddScript("Set-ExecutionPolicy Unrestricted -Scope process -Force;$password = ConvertTo-SecureString -AsPlainText -Force " + password + ";$mycred = new-object -typename System.Management.Automation.PSCredential -argumentlist " + username + ",$password;$LiveCred = Get-Credential -Credential $mycred; $Session = New-PSSession -ConfigurationName Microsoft.Exchange -ConnectionUri https://ps.outlook.com/powershell/ -Credential $LiveCred -Authentication Basic –AllowRedirection; Import-PSSession $Session");
// pipeline.Commands.Add("Out-String");

pipeline.Invoke();
mpeAdd.Hide(); 
```

这是创建连接的 initconnection 方法。

```
protected void Get_Mailboxes(object sender, EventArgs e) {

    PowerShell powershell = PowerShell.Create();
    PSCommand command = new PSCommand();
    command = new PSCommand();
    command.AddCommand("Get-Mailbox");

    powershell.Commands = command;
    powershell.Runspace = runspace; //Also it says runsapce doesn't exist in this context.
    Collection<PSObject> commandResults = powershell.Invoke();

    StringBuilder sb = new StringBuilder();

    ArrayList boxesarray = new ArrayList();

    foreach (PSObject ps in commandResults)
    {
        boxesarray.Add(ps.Properties["Alias"].Value.ToString());
    }

    boxes.DataSource = boxesarray;
    boxes.DataBind();
} 
```

这是我在创建连接后单击按钮时调用的方法，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T15:31:27.057

您必须将 Exchange 管理单元添加到您的运行空间。看看*[Exchange for Developers](http://msdn.microsoft.com/en-us/library/exchange/bb332449%28v=exchg.80%29.aspx)*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-30T18:11:37.910

如果“运行空间”不存在，这就解释了 Get-Mailbox 命令失败的原因。您可以在 initConnection 方法中创建一个 PowerShell 实例并在需要的地方使用它，而不是管理运行空间。请注意，这是使用本机代码而不是脚本显示的。

```
ps = PowerShell.Create(); 
```

设置执行策略。

```
ps.ClearCommands()
 .AddCommand("Set-ExecutionPolicy")
 .AddParameter("Scope", "Process") 
 .AddParameter("ExecutionPolicy", "Unrestricted")    
 .AddParameter("Confirm", false)
 .AddParameter("Force", true)
 .Invoke(); 
```

创建凭据。请注意，您不需要调用 Get-Credential。

```
SecureString pass;   
var creds = new PSCredential(username, pass); 
```

创建并导入会话。

```
var newSession = ps.ClearCommands()
 .AddCommand("New-PSSession")
 .AddParameter("ConfigurationName", "Microsoft.Exchange")
 .AddParameter("ConnectionUri", "https://ps.outlook.com/powershell/")
 .AddParameter("Credential", creds)
 .AddParameter("Authentication", "Basic")
 .AddParameter("AllowRedirection", true)
 .Invoke();

var session = newSession[0];
var import = ps.ClearCommands()
 .AddCommand("Import-PSSession")
 .AddParameter("Session", session)
 .Invoke(); 
```

ps.ClearCommands() 是一个扩展方法，添加后可以与 AddCommand()、AddParameter() 等链接：

```
public static PowerShell ClearCommands(this PowerShell ps)
{
    if (ps.Commands != null)
        ps.Commands.Clear();

    return ps;
} 
```

在 Get_Mailboxes() 中使用它

```
protected void Get_Mailboxes(object sender, EventArgs e) {

  var commandResults = ps.ClearCommands().AddCommand("Get-Mailbox").Invoke();
  StringBuilder sb = new StringBuilder();
  ArrayList boxesarray = new ArrayList();

  foreach (PSObject ps in commandResults)
  {
      boxesarray.Add(ps.Properties["Alias"].Value.ToString());
  }

  boxes.DataSource = boxesarray;
  boxes.DataBind();
} 
```

当您关闭应用程序时，或在适当的地方：

```
ps.ClearCommands()
 .AddCommand("Get-PSSession")
 .AddCommand("Remove-PSSession")
 .Invoke();

ps.Dispose(); 
```

# batch-file - 在批处理文件中为文件名添加时间

> ID：10575745
> 
> 赞同：1
> 
> 时间：2012-05-13T22:28:45.973
> 
> 标签：batch-file

嗨，我有一个批处理文件，它运行几个程序来截取我的一些网页。

看起来像这样

```
@echo off
setLocal EnableDelayedExpansion
for /f "tokens=2-4 delims=/ " %%a in ('echo %date%')
do (
set DDMMYYYY=%%a%%b%%c
)

webscreencapture.exe http://123.com c:/users/d/desktop/dealscreens/folder1/!DDMMYYYY!.jpg
webscreencapture.exe http://1234.com c:/users/d/desktop/folder2/!DDMMYYYY!.jpg 
```

这对于每天捕获一次屏幕效果很好，但现在我想每天捕获两次屏幕，所以我需要在文件名中添加一个时间或类似的东西，这样我就可以得到两个不同的屏幕截图名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:42:39.790

两种选择：

## 添加时间

您可能应该将时间添加到文件名中。小时应该足够了 - 除非您使用 am/pm 并且您的脚本例如在凌晨 1 点和下午 1 点执行。

不幸的是，日期和时间格式取决于区域设置。如果您知道日期和时间区域设置是什么，这将更容易和更短。

Rob van der Woude 在他的网站上有一个关于这个主题的完整文章： [http](http://www.robvanderwoude.com/datetimentbasics.php) ://www.robvanderwoude.com/datetimentbasics.php和[http://www.robvanderwoude.com/datetime.php](http://www.robvanderwoude.com/datetime.php)，使用不同的方法和脚本。

## 添加计数器

为文件名添加后缀并每次增加它可能会更容易。

例如：

```
@echo off
setLocal EnableDelayedExpansion
for /f "tokens=2-4 delims=/ " %%a in ('echo %date%')
do (
set DDMMYYYY=%%a%%b%%c
)

SET /a c=1
:checkfilename
IF EXISTS c:/users/d/desktop/dealscreens/folder1/!DDMMYYYY!-!c!.jpg (
    SET /a c=!c!+1
    GOTO :checkfilename
)

webscreencapture.exe http://123.com c:/users/d/desktop/dealscreens/folder1/!DDMMYYYY!-!c!.jpg
webscreencapture.exe http://1234.com c:/users/d/desktop/folder2/!DDMMYYYY!-!c!.jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:34:59.333

试试这个 - 我还没有测试过，但它应该很接近。

```
@echo off 
setLocal EnableDelayedExpansion 
for /f "tokens=2-4 delims=/ " %%a in ('echo %date%') 
do (
  set DDMMYYYY=%%a%%b%%c
)

for /f "tokens=1-5 delims=:" %%d in ("%time%") 
do (
  set HHMM=%%d%%e 
) 
```

接着：

```
webscreencapture.exe 
  http://123.com 
  c:/users/d/desktop/dealscreens/folder1/!DDMMYYYY!!HHMM!.jpg 
```

[注意：上面应该是一行，因为你已经有了它。我把它放在多行以使其更易于阅读。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T11:18:58.450

将 Tokens 设置为 1-4 而不是 2-4，然后它将在 DDMMYYY 中显示输出

# android - Android 应用无法访问网络

> ID：10575747
> 
> 赞同：0
> 
> 时间：2012-05-13T22:28:57.893
> 
> 标签：android, android-networking

我正在尝试从 Android 应用程序连接到 Internet 上的聊天服务器，所以首先我测试我是否从 AsyncTask 与服务器联系：

```
@Override
    protected Void doInBackground(SocketAndEditText... soEd) {
    try{
            InetAddress address1 = InetAddress.getByName("130.237.161.23");
            boolean reachable = address1.isReachable(4456);
            //...
    } catch (Exception e) {
        //...
    }
} 
```

当我运行上面的代码时，变量`reachable`获得了值`false`，但是当我运行与简单的 Java 控制台应用程序相同的代码时，我得到`true`：

```
import java.net.InetAddress;
public class Test {
    public static void main(String[] args) {
        try{
            InetAddress address1 = InetAddress.getByName("130.237.161.23");
            boolean reachable = address1.isReachable(4456);
            System.out.println(reachable);
        } catch (Exception e) {
            //...
        }
    }
} 
```

在我的清单文件中，我有`<uses-permission android:name="android.permission.INTERNET" />`

为什么它不能在 Android 中运行，而是作为 Java 应用程序运行？

# python - Python - IOError：[Errno 13] 权限被拒绝：

> ID：10575750
> 
> 赞同：57
> 
> 时间：2012-05-13T22:29:48.527
> 
> 标签：python, file, io

我得到了`IOError: [Errno 13] Permission denied`，我不知道这段代码有什么问题。

我正在尝试读取给定绝对路径的文件（仅表示`file.asm`），

和一个相对路径（意思`/.../file.asm`），我希望程序将文件写入给定的任何路径 - 如果它是绝对的，它应该将它写入当前目录；否则，到给定的路径。

编码：

```
#call to main function
if __name__ == '__main__':
    assem(sys.argv[1])

import sys

def assem(myFile):
    from myParser import Parser
    import code
    from symbolTable import SymbolTable

    table=SymbolTable()

    # max size of each word
    WORD_SIZE = 16
    # rom address to save to
    rom_addrs = 0
    # variable address to save to
    var_addrs = 16

    # new addition
    if (myFile[-4:] == ".asm"):
        newFile = myFile[:4]+".hack"

    output = open(newFile, 'w') <==== ERROR 
```

给出的错误：

```
IOError: [Errno 13] Permission denied: '/Use.hack' 
```

我执行代码的方式：

```
python assembler.py Users/***/Desktop/University/Add.asm 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-03-12T11:20:19.780

**只需关闭您要写入的打开文件。**

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-13T23:00:10.097

您似乎正在尝试用以下代码替换扩展名：

```
if (myFile[-4:] == ".asm"):
    newFile = myFile[:4]+".hack" 
```

但是，您似乎混淆了数组索引。尝试以下操作：

```
if (myFile[-4:] == ".asm"):
    newFile = myFile[:-4]+".hack" 
```

请注意在第二行代码中使用`-4`而不是仅在代码中。`4`这解释了为什么您的程序试图创建文件名`/Use.hack`的*前*四个字符 ( `/Use`)，`.hack`并附加到它。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-13T22:33:03.853

您没有足够的权限写入根目录。看到文件名前面的斜线了吗？

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-12-03T21:34:37.650

当我使用“shutil.copyfile”而不是“shutil.copy”时，这发生在我身上。权限搞砸了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-13T06:36:58.833

我有同样的问题。在我的情况下，用户没有目标目录的写权限。以下命令对我有帮助：

```
chmod 777 University 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-14T08:59:31.540

也许您正在尝试打开文件夹`with open`，请检查一次。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-17T11:20:32.167

对我来说，上面没有任何效果。所以我用这个解决方法解决了我的问题。只需检查您是否已在目录文件夹中添加了 SYSTEM。我希望它会帮助somoene。

```
import os
# create file
@staticmethod
def create_file(path):
    if not os.path.exists(path):
        os.system('echo # > {}'.format(path))

# append lines to the file
split_text = text_file.split('\n')
    for st in split_text:
        os.system('echo {} >> {}'.format(st,path)) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-10T22:44:40.993

检查您是否在盒子、保管箱等驱动器内实现代码。如果您将尝试实现的文件复制到计算机上的本地文件夹中，您应该能够摆脱错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-10T12:41:05.613

对我来说，这是一个权限问题。

在该特定文件夹上使用“获取所有权”应用程序。然而，这有时似乎只是暂时的，而不是永久的解决方案。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-06T12:41:35.557

仅供参考，我有这个权限错误，因为它试图创建的文件已经被另一个程序打开/使用（是在上次运行脚本时创建的，我用 excel 打开它，然后在尝试时出现权限错误重新创建它）

将其留在这里以防其他人发现它有用，这不是问题的真正解决方案

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-27T19:47:37.573

我收到此错误是因为该目录尚不存在。

解决方法：创建目录

```
import os
if not os.path.exists(directory):
    os.makedirs(directory) 
```

# knockout.js - 如何让 Knockout 对 foreach 进行分组

> ID：10575751
> 
> 赞同：9
> 
> 时间：2012-05-13T22:29:49.757
> 
> 标签：knockout.js

我可以使用 foreach 让我的记录重复，但是因为我使用 CSS 的网格系统，我想为每个 (div class="row") 一次将这些记录分组 (div class="column") .

我没有看到如何以这种方式包装每条记录的好例子。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-14T04:44:37.020

所以我不完全确定你在追求什么，但你可以像这样手动分组。

[http://jsfiddle.net/madcapnmckay/hFPgT/1/](http://jsfiddle.net/madcapnmckay/hFPgT/1/)

```
<div data-bind="foreach: grouped" >
    <div data-bind="foreach: $data" class="row">
        <div class="column" data-bind="text: text"></div>
    </div>
</div>    

this.grouped = ko.computed(function () {
        var rows = [], current = [];
        rows.push(current);
        for (var i = 0; i < this.items.length; i += 1) {
            current.push(this.items[i]);
            if (((i + 1) % 4) === 0) {
                current = [];
                rows.push(current);
            }
        }
        return rows;
}, this); 
```

希望这可以帮助。

# python - 在 Python 中收集文件（以及更多）

> ID：10575757
> 
> 赞同：0
> 
> 时间：2012-05-13T22:32:03.617
> 
> 标签：python

我有三个包含一些 dbf 格式文件的文件夹（例如，folder1、folder2 和 folder3）。假设我有：

```
0345.dbf, 2345.dbf, 4444.dbf, 6767.dbf, 7623.dbf in folder1
0222.dbf, 0345.dbf in folder2
3423.dbf, 4827.dbf, 5635.dbf, 7623.dbf in folder3 
```

因此，例如，“0345.dbf”显示为文件夹 1 和文件夹 2。同样，folder1和folder3中有两个“7623.dbf”。但它们都是具有不同内容的不同文件。

我有一个存储在 csv 文件 (list.csv) 中的附加信息，其中包含如下两列：

```
0222 f2
0345 f2
2345 f1
3423 f3
4444 f1
4827 f3
5635 f3
6767 f1
7623 f3 
```

根据该规则，我必须从文件夹 2 中选择“0345.dbf”，而不是从文件夹 1 中。和文件夹 3 中的“7623.dbf”，而不是文件夹 1 中的“7623.dbf”。

如何按照 csv 文件中写入的选择规则收集所有九个文件并将它们保存到文件夹（例如“d:/collect”）？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:36:21.573

将 CSV 文件读入字典，将 column1 映射到 column2。当您阅读输入文件夹时，提取不带每个文件扩展名的基本名称（例如 - 使用或`os.listdir`剪掉扩展名）。如果 dict 中的查找与当前目录名称匹配，请使用这个。否则，不会。`rsplit``rpartition`

# jquery - jQuery.Cycle 在某些刷新时偏移图像

> ID：10575761
> 
> 赞同：0
> 
> 时间：2012-05-13T22:33:18.650
> 
> 标签：jquery, jquery-plugins, jquery-cycle

我很难理解是什么导致我的 jQuery 脚本在第一次加载时正确加载（单击导航链接），但是在浏览器中点击“刷新”时失败。

这是一个简单的脚本，可以循环浏览一系列图像，全尺寸并在流畅的布局中居中。加载后，脚本应为图像设置适当的左边距，使其在屏幕上居中。当您单击导航中的链接时，它似乎可以工作。当我刷新页面时，脚本失败，并为图像提供了应有的左边缘两倍，将照片偏移到屏幕的一侧。

幻灯片可以在这里看到。您应该能够通过刷新页面来复制错误，然后点击导航中的蓝色“tiburon 住宅”链接。（截图：http: [//imgur.com/a/z2hki](http://imgur.com/a/z2hki)）

[http://dev.christinerode.com/garyhutton/tiburon.html](http://dev.christinerode.com/garyhutton/tiburon.html)

我尝试更改脚本和 CSS 包含的顺序以及函数，但我没有运气。为什么这只会在某些刷新时发生？

使用 jquery.cycle 插件，但找不到任何其他情况。javascript 中发生了什么来触发相同代码的不同显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T22:58:01.793

几个建议：

将所有脚本放在`</body>`标签之前。这样，您可以确保在测量 DOM 元素大小之前加载文档：

```
 <script> // jquery // </script>
  <script> // cycle.plugin </script>
  <script> // your jQ functions // </script>

</body> 
```

您可以添加一个`if`语句来检查您的幻灯片是否为动画以防止在画廊动画时点击：

```
$("#slide_prev").click(function(){
   if( !($('.slideshow img').is(':animated') ) ){
      $('.slideshow').cycle("previous");
   }
});
$("#slide_next").click(function(){
   if( !($('.slideshow img').is(':animated') ) ){
      $('.slideshow').cycle("next");
   }
}); 
```

这将阻止我对您的问题的评论中的*问题*。

如果您仍然有错误（我不建议但您可以尝试的是）：

```
$(window).load(function(){
    // your functions
}); 
```

# javascript - 在传单弹出窗口中显示图像

> ID：10575765
> 
> 赞同：9
> 
> 时间：2012-05-13T22:34:04.000
> 
> 标签：javascript, ajax, json, leaflet

我正在尝试使用 wunderground 的 api、Leaflet 和 Cloudmade 让天气图标显示在地图标记中。我已经显示了文本和带有图标图像的变量，但我不确定如何显示它。这是我的代码：

```
jQuery(document).ready(function($) {
    $.ajax({
          url: "http://api.wunderground.com/api/cd48ac26fb540679/conditions/q/pws:KCASANFR128.json",
          dataType: "jsonp",
          success: function(parsed_json) {
              var location = parsed_json['current_observation']['observation_location']['city'];
              var temp_f = parsed_json['current_observation']['temp_f'];
              var icon = parsed_json['current_observation']['icon_url'];
              marker1.bindPopup("Current temperature in " +location+ " is: " + temp_f).openPopup();
        }
    });
}); 
```

我试过这个没有成功：

```
marker1.bindPopup( <img src=icon> "Current temperature in " +location+ " is: " + temp_f).openPopup(); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T23:25:21.590

标记的 bindPopup 方法仅将 HTML 内容作为字符串，因此您还需要用引号将标签括起来 - 类似于

```
marker1.bindPopup( "<img src=" + icon_url + "/> Current temperature in " + location + " is: " + temp_f) 
```

应该为你工作。

# c++ - 比较运算符重载

> ID：10575766
> 
> 赞同：43
> 
> 时间：2012-05-13T22:34:49.317
> 
> 标签：c++, operators

这是最佳实践（在这种情况下）：

```
bool Foo::operator==(const Foo& other) {
  return bar == other.bar;
}

// Implementation 1
bool Foo::operator!=(const Foo& other) {
  return bar != other.bar
}

// Implementation 2
bool Foo::operator!=(const Foo& other) {
  return !(*this == other);
} 
```

对于像 >、<、<=、>= 这样的运算符，我会尽可能使用实现 2。但是，对于 != 我认为实现 1 更好，因为没有进行另一个方法调用，这是正确的吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-13T22:39:20.323

第二种实现有一个显着的约束，它`==`总是与`!=`. 这可能是您想要的，它使您的代码更易于维护，因为您只需更改一个实现即可使两者保持同步。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-13T22:37:26.720

在重载比较运算符时，您应该始终使用您拥有的东西。您需要定义的唯一两个是`operator==`和`operator<`。其余的你可以根据这两个来写。它不太容易出错，好像你有一个错误，它只在一个地方。

OOP 的主要特点之一是代码的可重用性。如果你已经写了代码，为什么还要写呢？坚持你所拥有的，你将只有一件事要测试。

这就像声明一个常量，然后在整个文件中的多个位置使用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-13T22:39:51.727

实现 2 更好，因为它利用了已经定义的 operator==。这些运算符函数也应该是`const`因为它们不修改对象。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-14T00:33:51.750

以上都不是。

我希望我能找到真正详细介绍这一点的论文，但我不记得名字了。

您的比较操作应该是外部的。您的界面应该足以找到对象的状态，并且对象的状态应该指示比较。应该可以在课堂之外写“等于”，因此实际上可以进行任何比较，并且这是可能的......你想要。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-13T22:40:00.483

*一般来说*，由于许多原因，实现 2 更好。首先，您不会编写（几乎）重复的代码。如果您需要更改它（因为类已经增长或出现错误），再次使用实现 2 您只更改 1 个位置。也就是说，实现 2 使您的代码更加一致且不易出错。

# math - 评估多项式？

> ID：10575767
> 
> 赞同：0
> 
> 时间：2012-05-13T22:34:52.363
> 
> 标签：math, computer-science

为什么使用快速傅里叶变换计算具有 n 个点的多项式需要 O(n log n) 时间？我具体谈论的是实现一个分而治之的算法，将多项式 A(x) 分成偶数次幂和奇数次幂，然后使用递归。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T23:11:20.453

令 T(n) 为 FFT 算法在 n 点处计算 n 次多项式所使用的时间。

算法分裂

A(x)=xB(x^2)+C(x^2)，

即分成两个多项式：奇数和偶数系数。例如：3x^3 + 2x^2 + 9x + 7 被拆分为 x(3x^2 + 9) + (2x^2 + 7)。

最初您想在 a、b、c、d 点计算 3x^3 + 2x^2 + 9x + 7。

现在您要在 a ²、 b ²、 c ²、 d ²点计算 3x+9 和 2x+7 。稍后，您将结合它在 a、b、c、d 处获得 3x^3 + 2x^2 + 2x + 7 的值。

关键思想：由于您使用单位根，因此 a **²****、 b** **²****、 c** **²****、 d** **²****中的一半值是相同的**。假设a ² =c ²和b ² =d ²。

^(因此，您需要在 a 2)、 b ²点计算 3x+2 和 2x+7 。

这意味着您将大小为 N 的实例减少为大小为 N/2 和 O(N) 后处理的两个实例。

FFT 递归地重复这个过程。这是与归并排序相同的递归方程，即 O(N log N) 复杂度。

# php - 更新 MySQL 中的一整行

> ID：10575776
> 
> 赞同：12
> 
> 时间：2012-05-13T22:36:23.397
> 
> 标签：php, mysql

我是 MySQL 新手，我想用一个新数组更新 MySQL 中的一整行，到目前为止，Update 查询的所有示例都涉及为该列指定列名和新值，如下所示：

```
"UPDATE tablename SET columnname = '".$new_value."' WHERE columnname = '".$value."'"; 
```

如何使用更新查询更新整条记录，还是应该使用替换查询？

任何建议将被认真考虑。

编辑：是否有不需要指定所有列名和新列值的查询？

基本上我想要一个看起来像这样的查询：

*使用 thisarray 更新整个行，其中 primarykeycolumn='thisvalue'*

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-13T22:38:32.547

为此，您需要

1.  枚举所有值
2.  知道主键列和值

所以最终的查询看起来像

```
UPDATE tablename
   SET col1 = 'val1', col2 = 'val2' ...
 WHERE id = id_value 
```

除了上面显示的之外，没有任何用于更新 sql 中的“整行”的神奇命令。而且`REPLACE`绝对不是您在这里需要的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-13T22:39:13.397

这取决于您是否要保留 ID，假设 ID 为`autoincrement`.

`REPLACE INTO mytable VALUES( new array ) ....`也会更新 ID，因为它实际上只是模拟 a`DELETE`和`INSERT`.

如果要保留 ID，请使用`UPDATE mytable SET foo='bar', baz='bat' WHERE id=12`

作为一个仅供参考，`REPLACE`对于唯一字段或复合主键不是自动增量的映射表通常很方便。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-13T22:41:30.720

这才是正确的方法。

```
UPDATE TABLENAME SET COLUMNAME = VALUE, COLUMN2NAME = VALUE, ETC WHERE CONDITION 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-13T22:40:14.533

您当然可以在一个查询中完成所有操作。您只需添加更多以逗号分隔的 this = that 子句：

```
"UPDATE tablename 
SET column1name = '".$new_value1."', 
    column2name = '".$new_value2."', 
    column3name = '".$new_value3."' 
WHERE columnname = '".$value."'" 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-02-27T22:17:41.547

是的，有类似的方法...

```
$updateSQL = sprintf("UPDATE hotel <br>SET hotel_name=%s, contact_person_1=%s <br>WHERE hotel_id=%s",<br>
                       $_POST['hotel_name'],<br>
                       $_POST['contact_person_1'],<br>
                       $_POST['hotel_id']);

mysql_select_db($database_hotelbookingryan, $hotelbookingryan);
$Result1 = mysql_query($updateSQL, $hotelbookingryan) or die(mysql_error()); 
```

# python - 计算完全呈现的请求

> ID：10575779
> 
> 赞同：0
> 
> 时间：2012-05-13T22:36:44.157
> 
> 标签：python, html, django, browser, django-middleware

我对 Django 并不陌生（1 年的工作经验），但我有一个奇怪的任务，我无法处理。因此，我必须编写中间件来计算请求，但仅限于那些未被客户端中止的请求（那些在浏览器中完全呈现的请求）。

我发现当客户端中止连接时，服务器（Python）会抛出 errno 32 Broken Pipe，因为它来自对套接字的不成功写入[我认为连接服务器-客户端是 TCP，所以这并不奇怪]。

但问题是我找不到检查浏览器是否完全呈现页面或检查是否发生错误的方法（当然，该错误可能有其他来源，但这将是一个好的开始）。

哦，我不想使用 JS（使用 JS 是小菜一碟），但我可以使用 HTML5（如果它可以帮助...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T23:25:02.877

I may have found the answer to your question, that is [execute some code when the HTTPResponse has been sent](https://stackoverflow.com/questions/4313508/execute-code-in-django-after-response-has-been-sent-to-the-client). You can then increment what you want after the page has been fully sent to the client.

The example subclasses HttpResponse and returns an instance of the derived class explicitly in a view. If you have many views you don't want to override, maybe you could try this piece of code under your subclass definition

```
HttpResponse.__bases__ += (FullLoggingHttpResponse,) 
```

# javascript - 方法自动激活

> ID：10575784
> 
> 赞同：2
> 
> 时间：2012-05-13T22:37:38.447
> 
> 标签：javascript, jquery, jquery-plugins

我正在考虑以下功能：

```
$('.aclass').MyPluginInit()
$('.aclass').SomeMethodOfMine() 
```

但是我们如何从第一行到第二行呢？在理想的世界中，我将能够捕获第 2 行中生成的异常（当我尝试调用一个不存在的方法时），循环遍历`$('.aclass')`表示的对象集，并为每个对象查看一个属性（说, `$this`) 包含所述方法并通过调用`.MyPluginInit()`. 然后我会调用该方法。

问题是我无法捕获异常并找到返回引发异常的对象的方法。的处理程序`window.onerror`将告诉我产生异常的 url 和行号，但我无法将其绑定到对象。

关于我如何才能实现死者复活（或在这种情况下从未出生）的任何想法？

*   埃基斯

ps 我确实读过[Autovivification 和 Javascript](https://stackoverflow.com/questions/7691395/autovivification-and-javascript)，但我要问的是有点不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T23:12:02.310

```
// define your initializer
function MyPluginInit () {
  var e;
  for (e in this) {

    // give this object the method
    this[e].SomeMethodOfMine = function () {
      console.log("Wee!");
    }
  }
}

// call init using the array-ish thing returned by jQuery as `this`
MyPluginInit.call($(".aclass"));

// to call the method, you need to refer to an *element* in the array
// this is because we only gave the method to the elements, not to the array itself
$(".aclass")[0].SomeMethodOfMine(); 
```

我想不出一个很好的方法来做到这一点，但这段代码是功能性的，不需要任何奇怪的全局异常处理。或者，您是否考虑过修改数组元素的原型？然后你只需要在你的方法中包含一些逻辑来确定在元素没有被“初始化”的情况下如何行动。

通常我会建议添加`SomeMethodOfMine`到 jQuery 返回的对象的原型，但结果是`Object`，所以这可能不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T17:02:53.147

这就是我想出的：在包含使用它的插件之前，将以下函数放入您包含的某个库中：

```
function PluginMaker() {
    var plugin = url2fn($('script:last').attr('src'));
    $.fn[plugin] = function (opts) {
        opts = $.extend(true, {}, $[plugin], opts);
        for (fn in opts.fx) this[fn] = fxmk(fn);    // auto-vivification of methods
        this.each(function () { if (!this['$' + plugin]) this['$' + plugin] = opts; });
        opts.init(opts);  // plugin initialisation
        this.init(opts);  // per-object initialisation
        return this;
    };
    function fxmk(nm) {
        return function () {
            var args = arguments;
            this.each(function () {
                this['$' + plugin].fx[nm].apply(this, args);
            });
            return this;
        };
    }
    return plugin;
} 
```

然后像这样定义你的插件：

```
// -- myplugin.js ---------------------------------------------------------------

(function ($) {
    $[PluginMaker()] = {
        // whatever state data you want to keep for your plugin
        fx: {
            MyMethod1: function () { /* within these methods */ },
            MyMethod2: function (msg) { /* this refers to the HTML element */ },
            // whatever other methods you want to define
            init: function (opts) {
                // used for per-element initialisation
            }
        },
        init: function(opts) {
            // used for plugin initialisation (one time)
        }
    };
}); 
```

然后，包含插件后，您可以执行以下操作：

```
$('.class').MyPlugin({ /* whatever options */ });
$('.class').MyMethod1(); 
```

甚至：

```
$('#someId').MyMethod2(); 
```

# subquery - CakePHP 2.1 中的 Facebook 点赞对话列表（与分组最大值、子查询、加入相关）

> ID：10575791
> 
> 赞同：0
> 
> 时间：2012-05-13T22:39:02.677
> 
> 标签：subquery, cakephp-2.1, groupwise-maximum

我有以下 MySQL 表：

```
CREATE TABLE IF NOT EXISTS `conversations` (
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `user1_id` int(11) NOT NULL,
    `user2_id` int(11) NOT NULL,
    PRIMARY KEY (`id`),
    UNIQUE KEY `user1_id_2` (`user1_id`,`user2_id`)
);

CREATE TABLE IF NOT EXISTS `messages` (
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `conversation_id` int(11) NOT NULL,
    `sender_id` int(11) NOT NULL,
    `recipient_id` int(11) NOT NULL,
    `subject` varchar(64) NOT NULL,
    `body` text NOT NULL,
    `created` datetime DEFAULT NULL,
    `is_deleted_by_sender` tinyint(3) unsigned NOT NULL DEFAULT '0',
    `is_deleted_by_recipient` tinyint(3) unsigned NOT NULL DEFAULT '0',
    PRIMARY KEY (`id`)
); 
```

注意：在会话表中 user1_id 小于或等于 user2_id。

我想获取用户 X 的对话列表，其中每个对话都由该对话中用户 X 未删除的最后一条消息显示，并对结果进行分页。（就像facebook消息一样。无论最后一条消息是由X还是其他用户发送的，它都显示为显示消息。

我想出了[分组最大的解决方案](http://kristiannielsen.livejournal.com/6745.html)，它帮助我创建了以下子查询：

```
SELECT MAX(SubTable.id) AS id, conversation_id 
FROM newtravel.messages AS SubTable
WHERE (
((SubTable.sender_id = 9) AND (SubTable.is_deleted_by_sender = 0))
OR 
((SubTable.recipient_id = 9) AND (SubTable.is_deleted_by_recipient = 0))
)
GROUP BY conversation_id 
```

我们可以将此子查询用作 $this->Paginator->settings 数组中的连接表吗？如果答案是肯定的，它应该生成如下查询：

```
SELECT m1.id, m1.conversation_id, m1.body, m1.sender_id, m1.recipient_id
FROM messages m1
INNER JOIN ( THE_SUB_QUERY_ABOVE ) m2 
ON ( m1.conversation_id = m2.conversation_id
AND m1.id = m2.id ) 
ORDER BY m1.id DESC 
```

这个最终查询返回想要的结果。但是我想不出在 PaginatorComponent 中设置正确选项的方法。对于这种查询，官方文档是不够的。那么，在这种情况下，我们该如何配置查找条件、连接、子查询等呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:14:08.273

好的。我已经解决了这个问题，如下所示：

```
$this->Message->Behaviors->attach('Containable');

$conditionsSubQuery = array(
    'OR' => array(
        array(
            'SubTable.sender_id' => $this->Auth->user('id'),
            'SubTable.is_deleted_by_sender' => 0
        ),
        array(
            'SubTable.recipient_id' => $this->Auth->user('id'),
            'SubTable.is_deleted_by_recipient' => 0
        )
    )
);

$db = $this->Message->getDataSource();
$subQuery = $db->buildStatement(
        array(
    'fields' => array('MAX(id)'),
    'table' => $db->fullTableName($this->Message),
    'alias' => 'SubTable',
    'limit' => null,
    'offset' => null,
    'joins' => array(),
    'conditions' => $conditionsSubQuery,
    'order' => null,
    'group' => 'conversation_id',
        ), $this->Message
);

$subQuery = ' Message.id IN (' . $subQuery . ') ';

$this->Paginator->settings = array(
    'Message' => array(
        'limit' => 5,
        'maxLimit' => 5,
        'contain' => array(
            'Sender' => array(
                'id', 'name', 'is_online', 'profile_image', 'thumbnail'
            ),
            'Recipient' => array(
                'id', 'name', 'is_online', 'profile_image', 'thumbnail'
            ),
            'Conversation'
        ),
        'order' => 'Message.id DESC'
    )
);

$this->set('conversations', $this->Paginator->paginate('Message', $subQuery)); 
```

请注意，“Message”属于“Sender”和“Recipient”，它们是“users”表的别名。

# javascript - 重新加载页面后图像未加载

> ID：10575795
> 
> 赞同：0
> 
> 时间：2012-05-13T22:39:14.010
> 
> 标签：javascript, html, css

我有一个简单的应用程序，JS 代码如下所示：

```
function refresh(){
    window.location.reload();
    document.getElementById("a").src="http://30.media.tumblr.com/tumblr_l8nftqa6oF1qbadnxo1_500.png";
} 
```

按钮 HTML 代码为：

```
<button id="refresh" onclick="refresh()">Refresh</button> 
```

应该去的 HTML 代码`src`如下所示：

```
<img id="a" style="position:absolute;top:390px;left:15px;height:254px;width:330px"> 
```

具有输入类型的其余代码`text`正常，但图像永远不会正确加载，我尝试了几件事，但我是 JS 新手，所以不知道如何正确执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:44:26.147

您想使用此代码：

```
function refresh(){
  window.location.reload();
}

window.onload = function () {
  document.getElementById("a").src="http://30.media.tumblr.com/tumblr_l8nftqa6oF1qbadnxo1_500.png";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:51:49.497

您可能根本不需要重新加载页面。点击按钮，你可以得到如下的新图像。简而言之，如果您不需要它，请摆脱“window.location.reload()”

```
`function refresh(){
    document.getElementById("a").src="http://ecx.images-amazon.com/images/I/3131FYr6f6L._SL500_AA300_.jpg"; }` 
```

（请注意，我更改了图像路径，因为我在您的帖子中获得了“拒绝访问”。）

# javascript - 从单独的 javascript 文件中调用 ASP.NET MVC 控制器操作

> ID：10575800
> 
> 赞同：1
> 
> 时间：2012-05-13T22:39:58.977
> 
> 标签：javascript, asp.net-mvc-3, jquery, controller

我应该使用什么 url 语法来确保在 jQuery ajax 调用中正确解析控制器操作？例如，以下在 HomeController 上调用 Method1 的语法在 Visual Studio 中运行站点时有效：

```
 $.ajax({
             type: 'GET',
             url: "Home/Method1?lparam1=" + 1+ "&param2=" + 2,  // my problem
             dataType: 'json',
             cache: false,             
             success: function(){ alert("success");}
         }); 
```

但是当我在 IIS 上部署站点时，我得到 HTTP 404 告诉我控制器操作无法解决。

TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:59:55.130

我会让 MVC 为你生成链接：

```
url: '@Url.Action("Method1", "Home")?lparam1=' + encodeURIComponent(1) + ... 
```

如果您的 JS 在外部文件中，您可以在页面中使用 URL 设置一个全局变量，并让外部文件读取它。此外，如果您的 VS 和 IIS url 不同，您可以在项目属性中为您的站点指定一个虚拟目录名称，以便它与您的 IIS 目录匹配，或者更好的是，让您的项目使用 IIS 而不是 Cassini（内置在网络服务器中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T23:07:31.043

只需将 url 行更改为：

```
url: "/Home/Method1?lparam1=" + 1+ "&param2=" + 2, 
```

# c# - 列表中不能存储超过 11 个项目 在字典中 >

> ID：10575806
> 
> 赞同：0
> 
> 时间：2012-05-13T22:40:50.853
> 
> 标签：c#, sql, visual-studio-2008, generics, .net-3.5

好的，所以您从标题中得到了想法，让我发布代码并在评论中解释正在发生的事情（以及应该发生的事情！）

```
// select distinct subject from database
cmd.CommandText = "SELECT DISTINCT SubjectId  FROM ClassSubject";
// a new command
OleDbCommand cmdTemp = new OleDbCommand();
// con id defined earlier
cmdTemp.Connection = con;
// Reader for outer loop
OleDbDataReader rdr;
// reader for inner loop
OleDbDataReader rdrTemp;
// reader for main command, that is for each subject
rdr = cmd.ExecuteReader();
// this will store subject id
int nTempID;
// this is the list that is supposed to contain all the classes (many to many relation btw class and subject)
// it does gets set fine, but later only 11 items show up
List<Int32> lstTempSub = new List<int>();
// a dictionary that will store all classes for this each particular subject
_clsSub = new Dictionary<int, List<int>>();
// read main, i.e. read subjects
while (rdr.Read())
{
    // set the id of subject
    nTempID = rdr.GetInt32(0);
    // clear previous items
    lstTempSub.Clear();
    // this selects all the classes for this particular subject
    cmdTemp.CommandText = "SELECT ClassId FROM ClassSubject WHERE SubjectID=" + nTempID + " ORDER BY ClassID";
    // Execute in the tempReader
    rdrTemp = cmdTemp.ExecuteReader();
    // read
    while (rdrTemp.Read())
    {
        // here, we add all the classes that are there for this particular subject to the list we createed
        lstTempSub.Add(rdrTemp.GetInt32(0));
    }
    // close inner one
    rdrTemp.Close();
    // every thing is fine till here,
    // i.e. nTempId is what is should be, the id of this particular subect
    // lstTempSub contains all class for this subject, may be 1 or may be 100
    _clsSub.Add(nTempID, lstTempSub);
}
// close outer one
rdr.Close();

// Here is where things get wrong
 foreach(KeyValuePair<Int32, List<Int32>> pair in _clsSub)
            {
                // when the debugger gets here, the key is fine for each subject
                // but pair.Value always have 11 values at most, if for a subject
                // there were less class, then it shows okay,
                // but in case there were more than 11, only 11 values are shown in pair.value
                SomeMethod(pair.Key, pair.Value);
            } 
```

我想我在代码注释中解释了所有内容，但如果您仍然需要澄清任何内容，请随时提问。但基本上，就像我说的，当我到达 SomeMethod 时，列表似乎没有维护它的项目（如果超过 11 个）（这是奇怪的还是什么？）那么，有人可以帮我解决这个问题吗？任何帮助，将不胜感激。

**更新：** *不是存储了 11 个项目，而是无论最后一个主题的课程数量是多少，存储的项目数量都是如此。假设在上层循环中，主题的最后一个 id 是 52，并且该 id 有 23 个类，那么对于插入的每条记录，甚至在之前，`_clsSub`值的列表将最多有 23 个项目。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T22:44:51.677

您声明一次：

```
List<Int32> lstTempSub = new List<int>(); 
```

由于它是引用类型，因此无论何时使用它，实际上都是在使用对它的引用。因此，当您在循环中执行此操作时：

```
_clsSub.Add(nTempID, lstTempSub); 
```

您正在向字典中的每个插槽添加**相同的列表。**当你这样做时：

```
lstTempSub.Clear(); 
```

您正在清除字典中每个插槽中的**相同列表。**因此，您的字典中的所有列表都是同一个列表，并且最终包含上次循环中的内容（即您上次清除它并添加到它的时间）。

您需要`List<Int32> lstTempSub = new List<int>();`进入 while 循环来代替该行`lstTempSub.Clear();`，一切都会起作用。

（回答你的标题问题以防它不明显 - 你循环的最后一件事有 11 个项目，所以它们*似乎*都有 11 个项目，因为它们指向同一个项目）

# java - Java - 线程、Swing 和 ServerSocket

> ID：10575808
> 
> 赞同：2
> 
> 时间：2012-05-13T22:41:08.017
> 
> 标签：java, multithreading, swing, sockets, client-server

我知道我知道，到处都有一百万个问题和答案。大量关于它的详细文章，几种类型的示例。在过去的几个小时里，我一直在阅读它，但这并没有起到作用。我问这个的原因是因为我仍然不明白我需要做什么，因为我的代码仍然无法正常工作。我了解 Swing 如何与 EDT 一起工作，如果我要使用 ServerSocket 的 accept() 方法，我将需要为 Swing 启动一个新线程（我认为？）。当我运行我的代码时，窗口只是打开并冻结。**我的问题是有人可以看看我的代码，告诉我我做错了什么，然后像我只有半个大脑一样向我解释吗？****（因为这就是我的感觉。：P）**

 *以下是我已经阅读过的一些地方：

*   [这个问题来自SO。](https://stackoverflow.com/questions/3244400/socket-using-in-a-swing-applet)
*   [这个网站。](http://www.javamex.com/tutorials/threads/swing_ui.shtml)
*   [当然还有Oracle 对swing 和threads 的解释。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)
*   以及其他一些随机站点。

***主类***

```
package com.sever.core;

import java.io.IOException;
import java.net.Socket;
import java.util.Scanner;

import javax.swing.SwingUtilities;

public class Main { 

private SocketManager network;
public static void main(String[] args){

    SwingUtilities.invokeLater(new Runnable(){
        @Override
        public void run() {
            Window window = new Window();
            window.setVisible(true);
        }       
    });

    SwingUtilities.invokeLater(new Runnable(){
        @Override
        public void run() {
            Main main = new Main();
            main.run();
        }       
    });     

}

public void run(){
    network = new SocketManager(25595);

    while(true){
        try {
            network.setSocket(network.getServerSocket().accept());
            AddUser(network.getSocket());
            Thread x = new Thread(network);
            x.start();
        } catch (Exception e) {
            System.out.println("Failed to connect.");
        }
    }

}

public void AddUser(Socket s){
    try {
        Scanner input = new Scanner(s.getInputStream());
        network.addUser(input.nextLine());
    } catch (Exception e) {

    }
}
} 
```

***窗口类***

```
package com.sever.core;

import java.awt.*;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.*;

public class Window extends JFrame{

private int screenWidth = 800;
private int screenHeight = 600;
private Thread thread;

private JPanel window = new JPanel();
private JTextArea consle = new JTextArea("Server started....");
private JTextField input = new JTextField();
private JScrollPane consleinput = new JScrollPane(consle);

public Window(){
    this.setName("NAMEHERE - Server Software");
    setResizable(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setSize(screenWidth,screenHeight);  
    window.setBackground(Color.DARK_GRAY);
    window.setLayout(new BoxLayout(window, BoxLayout.Y_AXIS));

    consleSetup();
    addComponets();
}

private void addComponets(){
    add(window);
    window.add(consleinput);
    window.add(input);
}

private void consleSetup(){
    consle.setEditable(false);
    consle.setLineWrap(true);
    consle.setBorder(BorderFactory.createEmptyBorder(3,3,3,3)); 
    consleinput.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
    input.setMaximumSize(new             Dimension(Integer.MAX_VALUE,input.getPreferredSize().height));
}

private void addListeners(){
    input.addActionListener(new ActLis());
    input.setActionCommand("input");
}

} 
```

***SocketManager.class***

```
package com.sever.core;

import java.io.*;
import java.net.*;
import java.util.ArrayList;

public class SocketManager implements Runnable{

private Socket sock;
private ServerSocket sersoc;
private PrintWriter output;
private BufferedReader input;
private Thread thread;

public ArrayList<Socket> currentConnections = new ArrayList<Socket>();
public ArrayList<String> currentUsers = new ArrayList<String>();

public SocketManager(String ip, int port){
    try{
        sock = new Socket(ip,port);
        PrintWriter output = new PrintWriter(sock.getOutputStream());
        BufferedReader input = new BufferedReader(
                new InputStreamReader(sock.getInputStream()));
        System.out.println("Server: socket started.");
    }catch(Exception e){
        System.out.println("Server: Socket failed to connect.\n");
    }
}

public SocketManager(int port){
    try {
        sersoc = new ServerSocket(port);

    } catch (IOException e) {
        System.out.println("Server: Socket failed to connect.\n");
    }
}

public SocketManager(Socket socket){
    this.sock = socket;

    try{
        output = new PrintWriter(sock.getOutputStream());
        input = new BufferedReader(
                new InputStreamReader(sock.getInputStream()));
    }catch(Exception e){

    }
}

public synchronized void checkConnetion(){
    if(!sock.isConnected()){
        for(int x = 0; x <= currentConnections.size(); x++){
            if(currentConnections.get(x) == sock){
                currentConnections.remove(x);
                System.out.println("Server: Disconnecting from: " + currentConnections.get(x) + "\n");
            }
        }
    }
}

public synchronized Socket getSocket(){
    return sock;
}

public synchronized ServerSocket getServerSocket(){
    return sersoc;
}

public synchronized void setSocket(Socket s){
    System.out.println("Setting socket to: " + s.getInetAddress());
    sock = s;
}

public synchronized void addSocket(Socket s){
    currentConnections.add(s);
}

public synchronized void addUser(String u){
    currentUsers.add(u);
}

public synchronized ArrayList<Socket> getConnections(){
    return currentConnections;
}

public synchronized ArrayList<String> getUsers(){
    return currentUsers;
}

public synchronized void send(String data){
    try{
        output.println(data);
    }catch(Exception e){

    }
}

public synchronized void close(){
    try{
        sock.close();
    }catch(Exception e){

    }
    output = null;
    input = null;
    System.gc();
}

public synchronized boolean isConnected(){
    return (sock == null) ? false : (sock.isConnected() && !sock.isClosed());
}

@Override
public void run() {
    System.out.println("Is runing.");
    while(true){
        try {
            checkConnetion();
            if(input.readLine().isEmpty()){ 
                return;
            }

            output.println("Server: Recived your message.");
        } catch (Exception e) {

        } finally{
            try {
                sock.close();
            } catch (Exception e) {

            }
        }
    }

}

} 
```

***ActLis.class***

```
package com.sever.core;

import java.awt.event.*;
import javax.swing.*;

public class ActLis implements ActionListener{

private JTextField actionField;
public ActLis(){

}

public ActLis(JTextField t){
    actionField = t;
}

@Override
public void actionPerformed(ActionEvent e) {
    // TODO Auto-generated method stub
    String cmd = e.getActionCommand();

    if(cmd == "input"){

    }
}

} 
```

**--EDIT---** 带有 SwingWorker 的新 Main.class

```
package com.sever.core;

import java.io.IOException;
import java.net.Socket;
import java.util.Scanner;

import javax.swing.SwingUtilities;
import javax.swing.SwingWorker;

public class Main { 

private SocketManager network;
public static void main(String[] args){

    SwingUtilities.invokeLater(new Runnable(){
        @Override
        public void run() {
            Window window = new Window();
            window.setVisible(true);
        }       
    });

    SwingWorker server = new SwingWorker(){
        @Override
        protected Object doInBackground() throws Exception {
            Main main = new Main();
            main.run();
            return null;
        }

    };
    server.run();

}

public void run(){
    network = new SocketManager(25595);

    while(true){
        try {
            network.setSocket(network.getServerSocket().accept());
            AddUser(network.getSocket());
            Thread x = new Thread(network);
            x.start();
        } catch (Exception e) {
            System.out.println("Failed to connect.");
        }
    }

}

public void AddUser(Socket s){
    try {
        Scanner input = new Scanner(s.getInputStream());
        network.addUser(input.nextLine());
    } catch (Exception e) {

    }
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T22:52:18.327

您正在从 EDT 上的 Socket 读取数据。这意味着你阻止它。调用 invokeLater 只会导致您的 Runnable 在 EDT 上执行。你在 EDT 上打了两个电话，其中一个是你的套接字。

考虑将您的套接字移动到[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)中，它将逐步将 Socker 的值返回到 GUI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T22:48:06.950

套接字操作块。例如，如果你调用`accept`，调用将不会返回，直到有人真正连接到你的程序，有效地*阻塞*了它正在运行的线程。这就是为什么他们建议让网络在辅助线程上运行。

在您的情况下，您确实创建了一个线程，但您没有`accept`从中调用。

```
while(true) {
    try {
        // this is called on the EDT--beware!
        network.setSocket(network.getServerSocket().accept());
        AddUser(network.getSocket());
        // ... and then, everything called from x will be on the secondary thread
        Thread x = new Thread(network);
        x.start();
    } catch (Exception e) {
        System.out.println("Failed to connect.");
    }
} 
```

这就是它冻结的原因。`accept`如果您不想阻塞 UI，则必须从辅助线程调用。*

# jquery - 捕获 jquery 单选按钮列表选定值

> ID：10575813
> 
> 赞同：1
> 
> 时间：2012-05-13T22:42:03.817
> 
> 标签：jquery

我正在尝试在单选按钮列表中使用 JQuery 获取所选项目的值。我有 2 个单选按钮列表，我从第一个单选按钮列表中获得价值，没有任何问题。但是当我选择第二个下拉菜单时，它会在警报中显示相同的第一个下拉菜单结果。

请建议

```
 $("#<%=RBLTechnology.ClientID%> input").change(function () {

                var ProjectArchitecture = $("input[@name=RBLTechnology]:checked").val();
alert("Selected Project Architecture Layer is " + ProjectArchitecture );
                           });

            $("#<%=RBLforService.ClientID%> input").change(function () {
                var ServiceLayer = $("input[@name=RBLforService]:checked").val();
                alert("Selected Service Layer is " + ServiceLayer);

            });

 <asp:RadioButtonList ID="RBLTechnology" runat="server" RepeatDirection="Horizontal">
                    <asp:ListItem Selected="True" Value="ASP.NET webforms">ASP.NET webforms</asp:ListItem>
                    <asp:ListItem Value="ASP.NET MVC">ASP.NET MVC</asp:ListItem>
                    <asp:ListItem Value="SilverLight">SilverLight</asp:ListItem>
                    <asp:ListItem Value="WPF">WPF</asp:ListItem>
                </asp:RadioButtonList>

     <asp:RadioButtonList ID="RBLforService" runat="server" RepeatDirection="Horizontal">
                        <asp:ListItem Selected="True" Value="Class Library Service">Class Library Service</asp:ListItem>
                        <asp:ListItem Value="Web Service">Web Service</asp:ListItem>
                        <asp:ListItem Value="WCF Service">WCF Service</asp:ListItem>
                        <asp:ListItem Value="WCF RIA Service">WCF RIA Service</asp:ListItem>
                    </asp:RadioButtonList> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:11:23.217

请仔细阅读 jQuery[选择器](http://api.jquery.com/category/selectors/)。
从我目前看到的情况来看：

```
$("#<%=RBLTechnology.ClientID%> input"), $("#<%=RBLforService.ClientID%> input") 
```

需要是

```
$("#<%=RBLTechnology.ClientID%>"), $("#<%=RBLforService.ClientID%>") 
```

和

```
$("input[@name=RBLforService]:checked"), $("input[@name=RBLforService]:checked") 
```

需要是

```
$("input[name='RBLforService']:checked"), $("input[name='RBLforService']:checked") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T18:53:39.823

```
 <asp:RadioButtonList ID="rblRequestType">
        <asp:ListItem Selected="True" Value="value1">Value1</asp:ListItem>
        <asp:ListItem Value="Value2">Value2</asp:ListItem>
  </asp:RadioButtonList> 
```

您可以像这样控制列表项（检查或不检查）；

```
var radio0 = $("#rblRequestType_0");
var radio1 = $("#rblRequestType_1");

if (radio0.checked){
// do something
}
if (radio1.checked){
// do something
} 
```

# java - Tapestry 5：密码字段的值未绑定到变量

> ID：10575817
> 
> 赞同：1
> 
> 时间：2012-05-13T22:43:52.693
> 
> 标签：java, apache, tapestry, tynamo

我目前在使用 Apache Tapestry 5.3.1 时遇到以下问题：用户应该能够编辑他的个人资料详细信息并更改他的密码。对于数据，有一个“用户”实体。

我不能使用用户的 getPassword 方法，因为密码是用总是变化的盐加密存储的（使用 Apache Tynamo）。因此，我试图将值存储在两个名为 passwordValue1 和 passwordValue2 的页面属性中，并使用 bean 的其余部分。在验证时，两个密码值字段都为空，即使我输入了一些内容然后提交了表单。任何想法为什么？

```
 <t:beaneditform object="currentUserInfo" add="password1,password2" t:id="registerForm"
            exclude="username,password,accountLocked,credentialsExpired">
            <p:password1>
                <t:label for="password1" >Passwort</t:label>
                <t:passwordfield t:id="password1" value="passwordValue1" validate="password"/>
            </p:password1>
            <p:password2>
                <t:label for="password2" >Passwort wiederholen</t:label>
                <t:passwordfield t:id="password2" value="passwordValue2" validate="password"/>
            </p:password2>

        </t:beaneditform> 
```

挂毯页面的java代码：

```
@RequiresUser
public class UserDetails {

@InjectPage
private Index index;

@Inject
UserUtility userUtil;

@Inject
private Session session;

@Inject
@Property
@SessionState(create = false)
private User currentUserInfo; //value is set

@Component(id="password1")
private PasswordField password1;

@Component(id="password2")
private PasswordField password2;

@Property
private String passwordValue2;

@Property
private String passwordValue1;

@InjectComponent
private BeanEditForm registerForm;

    //...snip....

void onValidate() {
    System.out.println("onvalidate");
    if (registerForm.getHasErrors()) {
        return;
    }
            // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
            // both passwordValue1 and passwordValue 2 are null here
    if ((passwordValue1 == null && !("".equals(passwordValue1)) 
            || !passwordValue1.equals(passwordValue2))) {
        registerForm.recordError(password1, "Passwords must match");
        registerForm.recordError(password2, "Passwords must match");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:09:17.503

Your validation method does not specify what you want to validate. Rename the method to **onValidateFromRegisterForm**

Explanation: Every field also triggers a validate event, so it gets called for each field. Those validations are triggered right after a field is set. So when the first field is set, the onValidate is called and it checks BOTH fields but of course, all the other fields were not set yet and fail the validation.

This might help: [What is called when](http://jumpstart.doublenegative.com.au/jumpstart/examples/navigation/whatiscalledandwhen) on the jumpstart page.

# google-sheets - 带有 HTTP POST 方法的 ImportHtml

> ID：10575819
> 
> 赞同：1
> 
> 时间：2012-05-13T22:44:01.070
> 
> 标签：google-sheets, google-apps-script

是否可以使用`HTTP` `POST`具有`ImportHtml`功能的方法？它似乎只做`GET`方法。

我需要`POST`从填写简单表格后通常显示的网页中检索结果（对于“人类用户”）。然后`POST`编辑该表格。我想对此进行模拟`ImportHtml`以获得结果。（是的，我已经要求网页管理员以 XML 格式或类似的格式发布数据，但我不会指望这样做......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:31:02.110

您可以使用 Google Apps 脚本的 UrlFetch 发布数据并在电子表格中使用结果。请参阅[https://developers.google.com/apps-script/class_urlfetchapp](https://developers.google.com/apps-script/class_urlfetchapp)

使用 Xml.parse 解析它（使用 lenient 选项来获取 html）。这是[来自旧论坛的](https://groups.google.com/a/googleproductforums.com/d/topic/apps-script/jlFsJIRcPhw/discussion)[文档](https://developers.google.com/apps-script/class_xml#parse)和相关帖子。

# opengl - 如何使用 CUDA 互操作来渲染球体？

> ID：10575827
> 
> 赞同：0
> 
> 时间：2012-05-13T22:45:32.787
> 
> 标签：opengl, cuda

我有大量的球体。我做了一个 cudamemcpy 并将质量位置、电荷、初始速度和半径传输到设备。我计算所有球体之间的相互作用并计算最终位置。我的问题是我想渲染这些球体

```
GLuint vbo[2];
glGenBuffers( 2, vbo);
glBindBuffer( GL_ARRAY_BUFFER, vbo[0]);

unsigned int size = numBodies * 4 * sizeof( float);
float4* initialpos = (float4*)malloc(numBodies*4*sizeof(float));
for(unsigned int i = 0; i < numBodies; i++)
{
    // Initialize initialpos which are the centers of the spheres
}

glBufferData( GL_ARRAY_BUFFER, size, initialpos, GL_DYNAMIC_DRAW);

free(initialpos);

glBindBuffer( GL_ARRAY_BUFFER, vbo[1]);
glBufferData(GL_ARRAY_BUFFER, size, 0, GL_DYNAMIC_DRAW);
glBindBuffer( GL_ARRAY_BUFFER, 0);
// register vbo with CUDA
cudaGLRegisterBufferObject(vbo[0]);
cudaGLRegisterBufferObject(vbo[1]);

//inside the display function
float4* oldPos;
float4* newPos;
cudaGLMapBufferObject( (void**)&newPos, vbo[1-swap])
cudaGLMapBufferObject( (void**)&oldPos, vbo[swap]);
 //Call  a C function which calls LAUNCHES CUDA KERNEL with old and new Positions 
 // Unmap Buffer Objects
swap = 1 - swap; 
```

我在内核中更改了 newpos 和 oldPos。现在画点我会使用 glDrawElements(GL_POINTS,.....);

我的问题是如何用这些数据绘制球体，因为 newpos 数组的 4 个字节中的每一个都有一个球体的中心，基本上类似于“GL_SPHERES”而不是 GL_POINTS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T16:40:48.313

OpenGL 中没有“GL_SPHERES”之类的东西，它只是让您绘制一个球体。您可能希望使用点精灵和 GLSL 着色器对球体进行光线追踪。总体思路描述如下：

Stefan Gumhold：使用深度校正喷射照明椭球体。2003 年 VMV。

顺便说一句：这是目前渲染大量球形粒子的最快方法，它将为您提供完美的球体。Nvidia GPU Computing SDK 中的“粒子”演示做了类似的事情来渲染粒子球体。但是，Nvidia 演示中的球体可能不会重叠，因为由于统一的深度值，它不处理球体-球体的交叉点！

# jquery - 来自对话框的通知

> ID：10575828
> 
> 赞同：0
> 
> 时间：2012-05-13T22:45:34.080
> 
> 标签：jquery, jquery-ui

我想在用户按下按钮关闭对话框时收到通知。我尝试了以下方法，但它不起作用：

```
<div id="TestDialog"/>

$("#TestDialog").dialog({
    autoOpen: true,
    resizable: true,
    modal: true,
    position: ['middle', 'middle'],
    savePushed: function() {
        alert('save pushed');
    },
    closePushed: function() {
        alert('save pushed');
    },

    buttons: {
        "Save": function() {
            // alert('save');
            savePushed();

            $(this).dialog("close");
        },
        Close: function() {
            //alert('close');
            closePushed();
            $(this).dialog("close");
        }
    }
}); 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:50:28.960

您必须正确定义`savePushed()`and`closePushed()`函数。由于它们不是[Jquery-UI Dialog](http://jqueryui.com/demos/dialog/)的一部分，因此您不能将其设置为它的选项。

请参阅此[工作小提琴示例！](http://jsfiddle.net/zuul/BQ24J/)

**将您的代码重写为：**

```
$("#TestDialog").dialog({
    autoOpen: true,
    resizable: true,
    modal: true,
    position: ['middle', 'middle'],
    buttons: {
        "Save": function() {
            alert('Save button was pressed!');
            $(this).dialog("close");
        },
        "Close": function() {
            alert('Close button was pressed!');
            $(this).dialog("close");
        }
    }
}); 
```

* * *

# 如果你需要

调用该函数，`savePushed()`或者`closePushed()`，当用户按下按钮时，您可以将代码重写为：

```
function savePushed() {
    alert('Save button was pressed!');
}

function closePushed() {
    alert('Save button was pressed!');
}

$("#TestDialog").dialog({
    autoOpen: true,
    resizable: true,
    modal: true,
    position: ['middle', 'middle'],
    buttons: {
        "Save": function() {
            savePushed();
            $(this).dialog("close");
        },
        "Close": function() {
            closePushed();
            $(this).dialog("close");
        }
    }
}); 
```

请参阅这个[工作小提琴示例！](http://jsfiddle.net/zuul/BQ24J/6/)

# c# - C#、winforms、数据表、按钮

> ID：10575830
> 
> 赞同：0
> 
> 时间：2012-05-13T22:45:46.297
> 
> 标签：c#, winforms

我有一个绑定到数据表的 datagridview。数据源中的一列是 BLOB。它是数据库中的一个 BLOB，我将所有记录从数据库检索到数据表，然后将其绑定到 DGV。

这是我要做的检查。对于 Blob 列（文档 pdfs、docs rpt txt），如果存在 DBNull 以外的值，则应禁用按钮。如果不是 DBNull，则应突出显示按钮并可供下载

1）如何向绑定到数据表的 DGV 添加一个按钮。2) 我应该在哪里以及在什么情况下检查 BLOb 字段的值

谢谢孙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:08:50.037

在您的按钮单击上，您将需要使用此代码：

```
 SaveFileDialog saveFileDialog1 = new SaveFileDialog();
     saveFileDialog1.Title = "Save an Image File";

     Byte[] blob = null;
     FileStream fs = null;
     blob = new Byte[(dr.GetBytes(0, 0, null, 0, int.MaxValue))];
     dr.GetBytes[0, 0, blob, 0, blob.Length);

     saveFileDialog1.ShowDialog();
     fs = (System.IO.FileStream)saveFileDialog1.OpenFile()
     fs.Write(blob, 0, blob.Length);
     fs.Close(); 
```

这将是启用或禁用按钮的代码

```
 if (dt[columnname] != dbnull.value)
 {
   button.enabled = true;

 }
 else
 {
   button.enabled = false;
 } 
```

# ruby-on-rails - has_many 和查询数据的问题

> ID：10575831
> 
> 赞同：1
> 
> 时间：2012-05-13T22:46:01.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

这就是我想要做的。

创建一个名为 Calls 的视图/模型。它将列出表中的各种原生数据。我创建的基本视图（脚手架）通过控制器中的实例变量来实现。现在我想将另一个表中的字段（在本例中为“单位”）带入视图，并允许在提交时将来自单位的字段写入调用中的字段。

调用.rb：

```
class Call < ActiveRecord::Base
  attr_accessible :call_nature, :caller_address, :caller_name, :caller_phone, :incident_number
  validates :caller_name, :caller_phone, :caller_address, :presence => true
  has_many :units
end 
```

单位.rb：

```
class Units < ActiveRecord::Base
  attr_accessible :unit_name
  belongs_to :call
end 
```

所以本质上我希望能够在视图或表单中显示我的呼叫字段，但也希望能够访问 Calls.unit_name 并将其显示在我的表单和视图中以供选择。

我一直在阅读协会，这似乎很简单，但我似乎遇到了问题。

如果您需要更多信息，请告诉我。

# c# - RavenDB 搞砸了我的多地图查询。我究竟做错了什么？

> ID：10575832
> 
> 赞同：0
> 
> 时间：2012-05-13T22:46:20.250
> 
> 标签：c#, ravendb

总而言之，我正在尝试将此位添加到 Raven Multi Map 查询中：

```
this.AddMap<Ownership>(ownerships => from o in ownerships
                                     select new
                                     {
                                         CardId = o.CardId,
                                         Expansion = (string)null,
                                         Owned = 1,
                                         Rarity = (string)null,
                                         Artist = Enumerable.Empty<string>(),
                                         Colors = Enumerable.Empty<string>(),
                                         ConvertedManaCost = Enumerable.Empty<decimal?>(),
                                         Name = Enumerable.Empty<string>(),
                                         Power = Enumerable.Empty<string>(),
                                         Text = Enumerable.Empty<string>(),
                                         Toughness = Enumerable.Empty<string>(),
                                         Types = Enumerable.Empty<string>(),
                                     }); 
```

Raven 将该表达式转换为以下表达式（为便于阅读而格式化）：

```
this.ForEntityNames.Add("Ownerships");
this.AddMapDefinition(docs => docs
    .Where(__document => __document["@metadata"]["Raven-Entity-Name"] == "Ownerships")
    .Select((Func<dynamic, dynamic>)(o => new
    {
        CardId = o.CardId,
        Expansion = (System.String)null,
        Owned = 1,
        Rarity = (System.String)null,
        Artist = Enumerable.Empty(),
        Colors = Enumerable.Empty(),
        ConvertedManaCost = Enumerable.Empty(),
        Name = Enumerable.Empty(),
        Power = Enumerable.Empty(),
        Text = Enumerable.Empty(),
        Toughness = Enumerable.Empty(),
        Types = Enumerable.Empty(),
        __document_id = o.__document_id
    }))); 
```

`'System.Linq.Enumerable.Empty<TResult>()' cannot be inferred from the usage. Try specifying the type arguments explicitly.`由于显而易见的原因，这会爆炸。

有没有办法让这该死的东西工作？

我已经尝试过`new string[0]`，`new string[] { }`而不是 Enumerable.Empty()，并且它们都失败了：

```
System.InvalidOperationException: Could not understand query:
-- line 2 col 219: invalid NewExpression
-- line 2 col 259: Can't parse double .0.0

  at Raven.Database.Linq.QueryParsingUtils.GetVariableDeclarationForLinqMethods(String query, Boolean requiresSelectNewAnonymousType) in c:\Builds\RavenDB-Stable\Raven.Database\Linq\QueryParsingUtils.cs:line 124
  at Raven.Database.Linq.DynamicViewCompiler.TransformMapDefinitionFromLinqMethodSyntax(String query, String& entityName) in c:\Builds\RavenDB-Stable\Raven.Database\Linq\DynamicViewCompiler.cs:line 355
  at Raven.Database.Linq.DynamicViewCompiler.HandleMapFunction(ConstructorDeclaration ctor, String map) in c:\Builds\RavenDB-Stable\Raven.Database\Linq\DynamicViewCompiler.cs:line 132
  at Raven.Database.Linq.DynamicViewCompiler.TransformQueryToClass() in c:\Builds\RavenDB-Stable\Raven.Database\Linq\DynamicViewCompiler.cs:line 97
  at Raven.Database.Linq.DynamicViewCompiler.GenerateInstance() in c:\Builds\RavenDB-Stable\Raven.Database\Linq\DynamicViewCompiler.cs:line 489
  at Raven.Database.DocumentDatabase.PutIndex(String name, IndexDefinition definition) in c:\Builds\RavenDB-Stable\Raven.Database\DocumentDatabase.cs:line 724
  at Raven.Database.Server.Responders.Index.Put(IHttpContext context, String index) in c:\Builds\RavenDB-Stable\Raven.Database\Server\Responders\Index.cs:line 71
  at Raven.Database.Server.Responders.Index.Respond(IHttpContext context) in c:\Builds\RavenDB-Stable\Raven.Database\Server\Responders\Index.cs:line 48
  at Raven.Database.Server.HttpServer.DispatchRequest(IHttpContext ctx) in c:\Builds\RavenDB-Stable\Raven.Database\Server\HttpServer.cs:line 548
  at Raven.Database.Server.HttpServer.HandleActualRequest(IHttpContext ctx) in c:\Builds\RavenDB-Stable\Raven.Database\Server\HttpServer.cs:line 315 
```

我的 Reduce 看起来像这样：

```
this.Reduce = results => from r in results
                         group r by r.CardId into g
                         select new
                         {
                             CardId = g.Key,
                             Expansion = g.Select(r => r.Expansion).Where(v => v != null).FirstOrDefault(),
                             Owned = g.Sum(r => r.Owned),
                             Rarity = g.Select(r => r.Rarity).Where(v => v != null).FirstOrDefault(),
                             Artist = g.SelectMany(r => r.Artist),
                             Colors = g.SelectMany(r => r.Colors),
                             ConvertedManaCost = g.SelectMany(r => r.ConvertedManaCost),
                             Name = g.SelectMany(r => r.Name),
                             Power = g.SelectMany(r => r.Power),
                             Text = g.SelectMany(r => r.Text),
                             Toughness = g.SelectMany(r => r.Toughness),
                             Types = g.SelectMany(r => r.Types),
                         }; 
```

我的另一张地图是这样的：

```
this.AddMap<Card>(cards => from c in cards
                           select new
                           {
                               CardId = c.Id.ToString(),
                               Expansion = c.Expansion,
                               Owned = 0,
                               Rarity = c.Rarity,
                               Artist = c.NormalizedFaces.Select(f => f.Artist),
                               Colors = c.Colors,
                               ConvertedManaCost = c.NormalizedFaces.Select(f => f.ConvertedManaCost),
                               Name = c.NormalizedFaces.Select(f => f.Name),
                               Power = c.NormalizedFaces.Select(f => f.Power),
                               Text =
                                   c.NormalizedFaces.Select(f => f.Name)
                                   .Concat(c.NormalizedFaces.SelectMany(f => f.CardText))
                                   .Concat(c.NormalizedFaces.Select(f => f.Types))
                                   .Concat(c.NormalizedFaces.SelectMany(f => f.FlavorText)),
                               Toughness = c.NormalizedFaces.Select(f => f.Toughness),
                               Types = c.NormalizedFaces.Select(f => f.Types),
                           }); 
```

但是，我很确定这些不是罪魁祸首，因为索引仅适用于一张地图和减少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:40:08.043

您只需要在地图功能中使用`null`而不是。`Enumerable.Empty<T>()`在你的 reduce 函数中，你可以这样做

```
Artist = g.Select(r => r.Artist).Where(x => x != null).FirstOrDefault() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:44:19.557

替换`Enumerable.Empty<string>()`为`new string[0]`。

根据 Ayende 的说法，类型消失的问题不会得到解决。但是重写表达式以使用数组应该是诀窍。

# php - CodeMirror 有内容，但在按键之前不会显示

> ID：10575833
> 
> 赞同：11
> 
> 时间：2012-05-13T22:46:31.467
> 
> 标签：php, javascript, jquery, codemirror

我在正在构建的 web 应用程序中嵌入了一个 CodeMirror 实例。它工作得很好——除了初始内容在用户输入一个新字符之前不会显示。因此，在用户强制更改之前，所有内容都隐藏起来。这是不好的。有什么方法可以强制重新绘制或刷新模拟字符输入的浏览器 - 空格可以。

这是代码...

```
<textarea id='code-mirror' ><?php echo $contents; ?></textarea>
<script>
    jQuery(document).ready(function(){
        var textarea = document.getElementById('code-mirror');
        var myCodeMirror = CodeMirror.fromTextArea(textarea,    
            {  
            onUpdate:codemirrorcallback,
            });
        // myCodeMirror.refresh(); ? is this an option?
     });
</script> 
```

这产生了一个工作编辑器，它保存内容并在文本区域内显示保存的内容，但仅在用户开始编辑后才显示。在此之前它只是空白。

任何帮助，即使只是链接，将不胜感激。多谢你们！

更新

在 myCodeMirror 上调用 .refresh 会在 Chrome 控制台中打印错误`Uncaught TypeError: Cannot call method 'focus' of undefined`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T22:02:52.097

如果发生这种情况，您确实需要`refresh()`在您的 CodeMirror 实例上调用 a 。但是由于空间猴子，您需要在超时中包装刷新调用：

```
var editor = CodeMirror.fromTextArea( yourSourceDOM, { lineNumbers:true })
setTimeout( editor.refresh, 0 ) 
```

它不漂亮，但这为我解决了它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-16T23:51:16.290

使用代码镜像 5.14.2，如果您显式刷新，则必须注意正确调用它（请参阅[此问题](https://stackoverflow.com/questions/37262818/why-are-these-two-javascript-functions-not-equivalent)），但使用 codemirror 提供的 autorefresh [add on](http://codemirror.net/doc/manual.html#addon_autorefresh)最容易处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T20:52:10.183

如果您使用的是 CodeMirror 版本 2+，则可以调用`CodeMirror.refresh()`. 请参阅 上的[文档`refresh()`](http://codemirror.net/doc/manual.html#refresh)。

***注意：****这必须在 CodeMirror**实例**而不是元素上调用。见[https://stackoverflow.com/a/5377029/526741](https://stackoverflow.com/a/5377029/526741)*

# php - MySQL INSERT IGNORE INTO 不断添加重复条目

> ID：10575836
> 
> 赞同：0
> 
> 时间：2012-05-13T22:46:44.517
> 
> 标签：php, mysql, insert

这是我遇到问题的特定区域

> ```
> mysql_query("INSERT IGNORE INTO storeip (ip)
> VALUES ('$ip')"); 
> ```

在测试它时，即使我设置了 IGNORE INTO，它也会继续向表中添加相同的条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:53:36.807

看起来您`UNIQUE INDEX`在 IP 列上没有。为了使 INSERT IGNORE 按要求工作，这是必要的。尝试这个;

> ALTER TABLE ip 添加唯一（ip）

要删除重复项，您可以运行它。

> ALTER IGNORE TABLE ip 添加唯一（ip）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:55:11.487

为什么不应该呢？忽略只是忽略错误。使ip唯一。

```
alter table storip add unique (ip); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T22:57:46.350

如果 IP 是表中唯一的字段，则将其设为主键，不会有重复项

```
alter table storeip add primary key (ip); 
```

# android - SQLite在打开数据库时强制关闭

> ID：10575838
> 
> 赞同：1
> 
> 时间：2012-05-13T22:47:02.397
> 
> 标签：android, sqlite

我有一个按钮可以计算并保存婴儿身高和体重增加的百分比，还有一个按钮可以保存姓名和生日。

但是我的代码会导致强制关闭...

我的数据库 Java：

```
public class MySQLiteHelper extends SQLiteOpenHelper {
    //Table name
    public static final String TABLE_BABY = "Baby_table";
    //Table columns
    public static final String COLUMN_NAME = "_name";
    public static final String COLUMN_BIRTH_DATE = "birth_date";
    public static final String COLUMN_INITIAL_HEIGHT = "initail_height";
    public static final String COLUMN_INITIAL_WEIGHT = "initail_weight";

    //Table name
    public static final String TABLE_MEASUREMENTS = "Measurements_table";
    //Table columns
    public static final String COLUMN_HEIGHT = "_height";
    public static final String COLUMN_WEIGHT = "_weight";
    public static final String COLUMN_NUM = "_num";
    public static final String COLUMN_BABY_NAME = "_Babyname";  

    //Database file name
    private static final String DATABASE_NAME = "Baby.db";
    //path
     private static String DB_PATH = "";

    //Database version
    private static final int DATABASE_VERSION = 1;

    static final String viewBaby ="ViewBaby";

    //Constructor
    public MySQLiteHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

       /** DB_PATH = "/data/data/"
                + context.getApplicationContext().getPackageName()
                + "/databases/"; */
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {

         db.execSQL("CREATE TABLE " + TABLE_MEASUREMENTS + "("
                   + COLUMN_NUM+ " INTEGER PRIMARY KEY AUTOINCREMENT," + COLUMN_HEIGHT + "Integer," +COLUMN_WEIGHT+ "Integer,"+COLUMN_BABY_NAME+"TEXT NOT NULL ,FOREIGN KEY ("+ COLUMN_BABY_NAME +") REFERENCES "+TABLE_BABY+" ("+ COLUMN_NAME +"));");

           db.execSQL("CREATE TABLE" + TABLE_BABY + "(" +COLUMN_NAME +"TEXT PRIMARY KEY," + COLUMN_INITIAL_HEIGHT +" Integer," + COLUMN_INITIAL_WEIGHT+"Integer,"+COLUMN_BIRTH_DATE +"DATE)");

        //db.execSQL(DATABASE_CREATE);
      db.execSQL("CREATE TRIGGER fk_babyname_measurmentname1" +
                " BEFORE INSERT "+
                " ON "+TABLE_MEASUREMENTS+

                " FOR EACH ROW BEGIN"+
                " SELECT CASE WHEN ((SELECT "+ COLUMN_NAME +" FROM "+TABLE_BABY+
              " WHERE "+COLUMN_NAME+"=new."+COLUMN_BABY_NAME+" ) IS NULL)"+
                " THEN RAISE (ABORT,'Foreign Key Violation') END;"+
                "  END;");

     // Create view
      db.execSQL("CREATE VIEW "+viewBaby+
            " AS SELECT "+TABLE_MEASUREMENTS+"."+COLUMN_NUM+" AS _id,"+
            " "+TABLE_MEASUREMENTS+"."+COLUMN_HEIGHT+","+
            " "+TABLE_MEASUREMENTS+"."+COLUMN_WEIGHT+","+
            " FROM "+TABLE_MEASUREMENTS+" JOIN "+TABLE_BABY+
            " ON "+TABLE_MEASUREMENTS+"."+COLUMN_BABY_NAME+" ="+TABLE_BABY+"."+COLUMN_NAME
            );

    }

    /** Called when the DATABASE_VERSION is changed to higher version */
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(MySQLiteHelper.class.getName(),
                "Upgrading database from version " + oldVersion + " to "
                        + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS" + TABLE_BABY + TABLE_MEASUREMENTS);

          db.execSQL("DROP VIEW IF EXISTS "+viewBaby);
        onCreate(db);
    }

    //insert 

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

}
/**
 * @return
 */
public long getLastInsertId() {
     long index = 0;
        SQLiteDatabase sdb = getReadableDatabase();
        Cursor cursor = sdb.query(
                "sqlite_sequence",
                new String[]{"seq"},
                "name = ?",
                new String[]{MySQLiteHelper.TABLE_MEASUREMENTS},
                null,
                null,
                null,
                null
        );
        if (cursor.moveToFirst()) {
            index = cursor.getLong(cursor.getColumnIndex("seq"));
        }
        cursor.close();
        return index;
}

public void insertWeightAndHeight(String column, Long value) {
    SQLiteDatabase db=this.getWritableDatabase();
    ContentValues initialValues = new ContentValues();
    initialValues.put(column, value);
   db.insert(MySQLiteHelper.TABLE_MEASUREMENTS, null,
          initialValues);
    // TODO Auto-generated method stub

}
public void open() throws SQLException {
    // void
    SQLiteDatabase database = this.getWritableDatabase();
    //return dbHelper;
}
/** Used to close connection with database. */
public void close() {
    //if(database != null)
    //{database.close();}

    this.close();
}

public void insertDate(Date birthdate) {

    // TODO Auto-generated method stub
    SQLiteDatabase database=this.getWritableDatabase();
    ContentValues initialValues = new ContentValues();
    /**Used to parse from Date to String and the other way around*/
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
    initialValues.put(MySQLiteHelper.COLUMN_BIRTH_DATE, dateFormat.format(birthdate));
    database.insert(MySQLiteHelper.TABLE_BABY, null,
        initialValues);
}
public void insertName(String name) {
    SQLiteDatabase database=this.getWritableDatabase();
    ContentValues initialValues = new ContentValues();
    initialValues.put(MySQLiteHelper.COLUMN_NAME, name);
    database.insert(MySQLiteHelper.TABLE_BABY, null,
        initialValues);
    // TODO Auto-generated method stub
}

/** used to get Last height & weight from TABLE_MEASUREMENTS by Num.*/

 @SuppressWarnings("null")
 public static Long getLastHeight(){
     @SuppressWarnings("unused")
     SQLiteDatabase database=dpHelper.getWritableDatabase();
     Cursor cursor = null;
     int index = cursor.getColumnIndex(COLUMN_HEIGHT);
    Measurements measurement = new Measurements();
    MySQLiteHelper sqlliteHelper = null ;
    Long i= sqlliteHelper.getLastInsertId();
     String[] asColumnsToReturn = new String[] { COLUMN_HEIGHT};
     cursor = database.query(TABLE_MEASUREMENTS,asColumnsToReturn, "COLUMN_NUM = i",null,null,null,null );
    cursor.moveToFirst();
    Long height = cursor.getLong(index);
    return height;
 }

/** used to get Last h  n eight & weight from TABLE_MEASUREMENTS by Num.*/

 @SuppressWarnings({ "null", "unused" })
public static Long getLastWeight(){
     SQLiteDatabase database=dpHelper.getWritableDatabase();

     Measurements measurement = new Measurements();
     Cursor cursor = null;
     int index =cursor.getColumnIndex(COLUMN_WEIGHT);
    MySQLiteHelper sqlliteHelper = null ;
    Long i= sqlliteHelper.getLastInsertId();  
     String[] asColumnsToReturn = new String[] { COLUMN_WEIGHT};
      cursor = database.query(TABLE_MEASUREMENTS,asColumnsToReturn, "COLUMN_NUM = i",null,null,null,null );
        cursor.moveToFirst();
    Long weight = cursor.getLong(index);
    return weight;
 }

/** used to get Last h  n eight & weight from TABLE_MEASUREMENTS by Num.*/
 static MySQLiteHelper dpHelper;

 public int caluclateAge() throws ParseException{
     SQLiteDatabase database=dpHelper.getWritableDatabase(); 
     String[] asColumnsToReturn = new String[] { MySQLiteHelper.COLUMN_BIRTH_DATE};
     Cursor cursor = database.query(MySQLiteHelper.TABLE_BABY,asColumnsToReturn, null,null,null,null,null );
     /**Used to parse from Date to String and the other way around*/
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
     Date  Birthdate = dateFormat.parse(cursor.getString(3));
     Calendar dob = Calendar.getInstance();
        dob.setTime(Birthdate);
    Calendar today = Calendar.getInstance();
     int age = today.get(Calendar.MONTH) - dob.get(Calendar.MONTH);

      return age;

 }

 } 
```

图表活动：

```
public class ChartActivity extends Activity {
    //private BabyAdapter adapter;
    /** Called when the activity is first created. */
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final MySQLiteHelper db = new MySQLiteHelper(this);

        final WebView googleChartView = new WebView(this);
        db.open();

        final Button button = (Button) findViewById(R.id.button2);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                final EditText EditText3 =(EditText) findViewById(R.id.editText3);
            final EditText EditText4 =(EditText) findViewById(R.id.editText4); 
                //BabyDataSource BDS = new BDS();
            Long h =MySQLiteHelper.getLastHeight();
            Long W =MySQLiteHelper.getLastWeight();
            String h2;
            String w2;
            Long oneH ;
            Long twoH ;
            Long threeH ;
            Long oneW ;
            Long twoW ;
            Long threeW ;
            Long hPercent;
            Long wPercent;
            Long HV;
            Long WV;

            if (h == null && W == null){
                hPercent =(long) 0.0 ;
                wPercent =(long) 0.0;
                h = (long)0.0;
                W = (long)0.0;
                h2 = EditText3.getText().toString();
                w2 = EditText4.getText().toString();
                HV = Long.parseLong(h2);
                WV = Long.parseLong(w2);
                db.insertWeightAndHeight(MySQLiteHelper.COLUMN_HEIGHT, HV);
                db.insertWeightAndHeight(MySQLiteHelper.COLUMN_WEIGHT, WV);
            } else {
                h2 = EditText3.getText().toString();
                w2 = EditText4.getText().toString();
                HV = Long.parseLong(h2);
                WV = Long.parseLong(w2);
                oneH = HV-h;
                twoH = oneH/h;
                threeH = twoH *100;
                hPercent = threeH ;
                oneW = WV-W;
                twoW = oneW/W;
                threeW = twoW *100;
                wPercent = threeW ;

                db.insertWeightAndHeight(MySQLiteHelper.COLUMN_HEIGHT, HV);
                db.insertWeightAndHeight(MySQLiteHelper.COLUMN_WEIGHT, WV);
            }

            String strH = hPercent.toString();
            String strW = wPercent.toString();
            EditText3.setText(strH +"%");
            EditText4.setText(strW +"%");
            //chart
            setContentView(googleChartView);
            String mUrl = "http://chart.apis.google.com/chart?chf=bg,s,245245245&chxs=0,FFFFFF00,9.5&chxt=x,y&chxl=0:Xheight|currentHeight|Xweight|currentWeight&chs=500x300&cht=bvg&chco=3072F3|FF9900|80C65A|990066&chd=t:"+h+","+HV+","+W+","+WV+"&chdl=50%%20X-Height|5%%20Current-Height|5%%20X-Weight|40%%20Current-Weight&chdlp=b&&chbh=10,5,5";
            googleChartView.loadUrl(mUrl);

            db.close();
            // Perform action on click
        }
       });

       final Button button1 = (Button) findViewById(R.id.button1);
       button1.setOnClickListener(new View.OnClickListener() {
           public void onClick(View v) {
               final  EditText EditText1;
               final  EditText EditText2;

               EditText1 = (EditText) findViewById(R.id.editText1);
               EditText2 = (EditText) findViewById(R.id.editText2);

               SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
               String  BirthDateStr = EditText2.getText().toString();

               String name = EditText1.getText().toString();         
               Date Birthdate;
               try {
                   Birthdate = dateFormat.parse(BirthDateStr);
                   int age = db.caluclateAge();
                   db.insertDate(Birthdate);
                   db.insertName(name);
                   EditText2.setText("your "+name+" is now "+age+"month old");
               } catch (ParseException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
               }
           }
       });
    }
    protected void onStop() {
        super.onStop();
        //Close dataSource
    }
} 
```

这是日志：

```
05-14 12:23:43.095: I/Process(224): Sending signal. PID: 224 SIG: 9
05-14 12:28:10.824: D/dalvikvm(305): GC freed 555 objects / 48344 bytes in 92ms
05-14 12:28:11.424: E/Database(305): Failure 1 (near "TABLEBaby_table": syntax error) on 0x2d5de0 when preparing 'CREATE TABLEBaby_table(_nameTEXT PRIMARY KEY,birth_dateDATE)'.
05-14 12:28:11.434: D/AndroidRuntime(305): Shutting down VM
05-14 12:28:11.434: W/dalvikvm(305): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
05-14 12:28:11.434: E/AndroidRuntime(305): Uncaught handler: thread main exiting due to uncaught exception
05-14 12:28:11.454: E/AndroidRuntime(305): java.lang.RuntimeException: Unable to start activity ComponentInfo{chart.android.project/chart.android.project.ChartActivity}: android.database.sqlite.SQLiteException: near "TABLEBaby_table": syntax error: CREATE TABLEBaby_table(_nameTEXT PRIMARY KEY,birth_dateDATE)
05-14 12:28:11.454: E/AndroidRuntime(305):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
05-14 12:28:11.454: E/AndroidRuntime(305):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-14 12:28:11.454: E/AndroidRuntime(305):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
05-14 12:28:11.454: E/AndroidRuntime(305):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
05-14 12:28:11.454: E/AndroidRuntime(305):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-14 12:28:11.454: E/AndroidRuntime(305):  at android.os.Looper.loop(Looper.java:123)
05-14 12:28:11.454: E/AndroidRuntime(305):  at android.app.ActivityThread.main(ActivityThread.java:4363)
05-14 12:28:11.454: E/AndroidRuntime(305):  at java.lang.reflect.Method.invokeNative(Native Method)
05-14 12:28:11.454: E/AndroidRuntime(305):  at java.lang.reflect.Method.invoke(Method.java:521)
05-14 12:28:11.454: E/AndroidRuntime(305):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-14 12:28:11.454: E/AndroidRuntime(305):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-14 12:28:11.454: E/AndroidRuntime(305):  at dalvik.system.NativeStart.main(Native Method)
05-14 12:28:11.454: E/AndroidRuntime(305): Caused by: android.database.sqlite.SQLiteException: near "TABLEBaby_table": syntax error: CREATE TABLEBaby_table(_nameTEXT PRIMARY KEY,birth_dateDATE)
05-14 12:28:11.454: E/AndroidRuntime(305):  at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
05-14 12:28:11.454: E/AndroidRuntime(305):  at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1610)
05-14 12:28:11.454: E/AndroidRuntime(305):  at chart.android.project.MySQLiteHelper.onCreate(MySQLiteHelper.java:69)
05-14 12:28:11.454: E/AndroidRuntime(305):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:106)
05-14 12:28:11.454: E/AndroidRuntime(305):  at chart.android.project.MySQLiteHelper.open(MySQLiteHelper.java:193)
05-14 12:28:11.454: E/AndroidRuntime(305):  at chart.android.project.ChartActivity.onCreate(ChartActivity.java:34)
05-14 12:28:11.454: E/AndroidRuntime(305):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-14 12:28:11.454: E/AndroidRuntime(305):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
05-14 12:28:11.454: E/AndroidRuntime(305):  ... 11 more
05-14 12:28:11.474: I/dalvikvm(305): threadid=7: reacting to signal 3
05-14 12:28:11.474: E/dalvikvm(305): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

新的日志猫

```
 05-15 20:27:47.319: W/dalvikvm(341): Exception Ljava/lang/NullPointerException; thrown during Lchart/android/project/MySQLiteHelper;.<clinit>
05-15 20:27:47.329: D/AndroidRuntime(341): Shutting down VM
05-15 20:27:47.339: W/dalvikvm(341): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
05-15 20:27:47.339: E/AndroidRuntime(341): Uncaught handler: thread main exiting due to uncaught exception
05-15 20:27:47.409: E/AndroidRuntime(341): java.lang.ExceptionInInitializerError
05-15 20:27:47.409: E/AndroidRuntime(341):  at chart.android.project.ChartActivity.<init>(ChartActivity.java:27)
05-15 20:27:47.409: E/AndroidRuntime(341):  at java.lang.Class.newInstanceImpl(Native Method)
05-15 20:27:47.409: E/AndroidRuntime(341):  at java.lang.Class.newInstance(Class.java:1479)
05-15 20:27:47.409: E/AndroidRuntime(341):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-15 20:27:47.409: E/AndroidRuntime(341):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
05-15 20:27:47.409: E/AndroidRuntime(341):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-15 20:27:47.409: E/AndroidRuntime(341):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
05-15 20:27:47.409: E/AndroidRuntime(341):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
05-15 20:27:47.409: E/AndroidRuntime(341):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-15 20:27:47.409: E/AndroidRuntime(341):  at android.os.Looper.loop(Looper.java:123)
05-15 20:27:47.409: E/AndroidRuntime(341):  at android.app.ActivityThread.main(ActivityThread.java:4363)
05-15 20:27:47.409: E/AndroidRuntime(341):  at java.lang.reflect.Method.invokeNative(Native Method)
05-15 20:27:47.409: E/AndroidRuntime(341):  at java.lang.reflect.Method.invoke(Method.java:521)
05-15 20:27:47.409: E/AndroidRuntime(341):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-15 20:27:47.409: E/AndroidRuntime(341):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-15 20:27:47.409: E/AndroidRuntime(341):  at dalvik.system.NativeStart.main(Native Method)
05-15 20:27:47.409: E/AndroidRuntime(341): Caused by: java.lang.NullPointerException
05-15 20:27:47.409: E/AndroidRuntime(341):  at chart.android.project.MySQLiteHelper.<clinit>(MySQLiteHelper.java:46)
05-15 20:27:47.409: E/AndroidRuntime(341):  ... 16 more
05-15 20:27:47.429: I/dalvikvm(341): threadid=7: reacting to signal 3
05-15 20:27:47.429: E/dalvikvm(341): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:08:00.337

您的 logcat 中的这一行：

```
Caused by: android.database.sqlite.SQLiteException: near "TABLEBaby_table": syntax error: CREATE TABLEBaby_table(_nameTEXT PRIMARY KEY,birth_dateDATE) 
```

告诉我们您在创建时至少有一个语法错误`TABLE_BABY`：

```
db.execSQL("CREATE TABLE" + TABLE_BABY + "(" +COLUMN_NAME +"TEXT PRIMARY KEY," + COLUMN_INITIAL_HEIGHT +" Integer," + COLUMN_INITIAL_WEIGHT+"Integer,"+COLUMN_BIRTH_DATE +"DATE)");
  // Need a space here  ^  and another one over here        ^  ... 
```

它应该是：

```
db.execSQL("CREATE TABLE " + TABLE_BABY + "(" + 
    COLUMN_NAME + " TEXT PRIMARY KEY, " + 
    COLUMN_INITIAL_HEIGHT + " INTEGER, " + 
    COLUMN_INITIAL_WEIGHT + " INTEGER, " + 
    COLUMN_BIRTH_DATE + " DATE)"); 
```

确保在 SQL 语句中添加正确的空格。

这适用于您的所有表格，`TABLE_MEASUREMENTS`例如：

```
db.execSQL("CREATE TABLE " + TABLE_MEASUREMENTS + "(" +
    COLUMN_NUM + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
    COLUMN_HEIGHT + " INTEGER, " + 
    COLUMN_WEIGHT + " INTEGER, " + 
    COLUMN_BABY_NAME + " TEXT NOT NULL, " + 
    "FOREIGN KEY ("+ COLUMN_BABY_NAME +") REFERENCES " + TABLE_BABY + " (" + COLUMN_NAME +"))"); 
```

尝试使用易于阅读的格式，这将有助于防止这些错误。玩得开心！

**添加**

你说空指针异常是“在第 46 行的路径”，你的意思是这个吗？

```
 /** DB_PATH = "/data/data/"
            + context.getApplicationContext().getPackageName()
            + "/databases/"; */ 
```

我假设这是错误所在的行（并且您没有告诉我们您正在使用此行）。

这条线可以简化为：

```
DB_PATH = "/data/data/" + context.getPackageName() + "/databases/"; 
```

但这是最好的方法：

```
DB_PATH = context.getDatabasePath(DATABASE_NAME); 
```

# google-maps-api-3 - 如何设置 Google 地图信息窗口的样式？

> ID：10575840
> 
> 赞同：0
> 
> 时间：2012-05-13T22:48:09.943
> 
> 标签：google-maps-api-3, styling

如果您使用 iOS 地图中的信息窗口，它们会很时尚、小巧且美观。

另一方面，谷歌地图信息窗口是巨大的白色块，带有令人讨厌的阴影。有没有办法给它们设计样式——给它们一个*完全*不同的外观？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T23:26:37.557

我*认为*您在谈论 InfoWindows，而不是信息框（区别很重要）。

这是一个谷歌地图第 3 版信息窗口：

![显示 InfoWindow 的 Google 地图图像](../Images/9a2269ecb93a65ba1e90f2bbf4abbefd.png)

有一个名为**InfoBox的**[外部实用程序库](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries)，它允许执行以下操作：

 **![显示示例信息框的 Google 地图图像](../Images/792ccf696998dd66c30a0a94b4a04102.png) ![显示示例信息框的 Google 地图图像](../Images/83e627a3f919c2840fd738a0f04ab376.png)

因此可以显示不同样式的信息标注，并且几乎可以肯定可以做类似 iOS 的操作（图片来自 Macworld）：

![示例 iOS 地图和信息框](../Images/f6ffa55c26c910168c5123de35f4db48.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T00:00:20.520

还有一个名为[InfoBubble](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/)的库，它使用与 InfoWindow 相同的构造函数，但允许您自定义它。上面显示的[示例页面](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html)的样式类似于 iOS 气泡。**

# c# - LINQ 表达式如何与存储过程一起使用？

> ID：10575843
> 
> 赞同：1
> 
> 时间：2012-05-13T22:49:45.887
> 
> 标签：c#, linq, entity-framework, stored-procedures

我正在处理的一个新项目的要求之一是所有 SQL 查询都必须使用存储过程。我将使用实体框架和存储库模式来管理数据访问，并且在我的存储库中我将拥有“Find(predicate)”和“FindAll()”方法。目前他们都使用相同的存储过程（“select * from Foo”）。

看到我无法访问 SQL Profiler，我不太确定 LINQ 表达式将如何在我的 Find(predicate) 方法中转换？如果我有类似的东西：

```
List<Foo> myFoo = repository.Find( f => f.Country == "Australia" && f.Status = "New" ); 
```

我是否正确假设这将通过存储过程检索所有记录，并将结果数据过滤到内存中？如果是这种情况，我如何构造 sproc 以仅检索所需的记录，同时允许使用 linq 表达式（需要允许 &&、||、！= 等）？这是否甚至可以在无需放弃存储过程的情况下实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T01:22:22.563

如果您被迫对所有事情都使用存储过程，那么使用 EF 没有多大意义。事实上，EF 的最大优点之一是它自动生成查询，具有正确数量的参数和正确的查询语法来获取/插入/更新/删除数据。

您将失去 EF 的两个优势：

*   导航，即通过急切、显式或延迟加载轻松获取相关数据
*   成形数据，即获取具有其他实体或实体集合的属性的实体
*   自动生成简单的 CRUD 操作（惰性/更新/删除/选择）。您可以为此操作指定 stoed procs
*   如果数据库更改只是更改模型（这可能几乎是自动的，具体取决于您使用 EF 的方式），则获得正确的查询如果您更改数据，则必须修改相关的存储过程 *自动生成对即席过滤器的查询（在不同列上具有不同条件的过滤器）

如果您不让 EF 生成查询，那么您将无法轻松导航、塑造数据、自动生成正确的查询和过滤器等。只有在模型中付出非常努力的工作，他才有可能。但是，如果您从数据库中更新模型，您的某些更改可能会丢失

如果您使用的是 EF，则可以使用存储过程的场合是：

*   您需要修改 EF 无法直接修改的数据（即不支持旧版本 EF 中的可更新查询）
*   您已经优化了要使用的存储过程，而不是 EF 生成的查询，即优化的复杂过滤器
*   做很多事情的存储过程（那些不是简单的插入/更新/删除或选择过程）
*   存储过程将比自动生成的查询提供一些优势的任何其他场合。

对于所有其他查询，最好让 EF 为您完成工作。

如果您需要对所有内容使用存储过程，使用 EF 的优势将是数据到实体的自动映射，但您将失去 EF 的许多其他优势。

你必须这样做：

*   您需要定义与从存储过程返回的不同数据一样多的实体
*   您必须将每个存储过程映射到正确的实体（它们被映射到函数）、函数或修改模型（edmx）以让它知道要使用哪个过程来插入/更新/删除并获取

很难定义一个模型，该模型具有实体之间的关系，而这些实体之间存在关系。

至于`repository.Find(...)`最好情况下的问题，你是对的，所有数据都会被查询，然后在客户端进行过滤。在最坏的情况下，如果您的模型没有正确定义，它可能会失败。

如果您让 EF 创建查询，它将向数据库发送正确的过滤器（在单个情况下，例如您的示例）。如果您有以特定方式过滤的专用存储过程，您将不得不忘记 LINQ，并直接调用映射函数。

因此，除非有充分的理由使用 SP，否则最好让 EF 为您创建查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T01:28:18.573

你是对的，你正在做的开箱即用会检索所有记录并在内存中过滤。我不会说编写表达式和存储过程是不可能的，但这是非常不切实际的，并且可能首先违背了存储过程要求的目的。您必须解释表达式树并生成参数化 sql 并将其传递给 sproc（可能违背 sproc 要求的目的），或者解释表达式树并将参数正确传递给“通用 sproc”。“通用”意味着它对于您想要过滤的任何内容都具有可为空的参数（非常不切实际并且会有很多限制 - 没有连接等）。

如果您尊重 sproc 要求，我会放弃任何类型的暴露 IQueryable 的数据访问 api（除非您愿意在内存中执行表达式，否则您将失去编写表达式和 sprocs 的能力）。

正如 JotaBe 所指出的，即使表达式和存储过程之间没有可组合性，EF 仍将在处理模型方面提供便利，并避免相当多的样板文件。

# asp.net-mvc - 如何在具有模型优先设计的模型上应用 [Display( = "displayname"]) 等属性？

> ID：10575844
> 
> 赞同：0
> 
> 时间：2012-05-13T22:49:46.233
> 
> 标签：asp.net-mvc, entity-framework

我正在使用 MVC 和实体框架。我从代码优先设计开始，我正在应用 [Required] 和 [Display] 等属性，但如果我首先使用模型，我该怎么做？我已经创建了我的数据库模型。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:34:45.930

首先，我确定您已经从 Edmx (?) 生成了类。然后

**解决方案一**

生成的类是部分类。

因此，您可以添加一个新的类文件，其中包含部分类（与生成的类相同），具有 MetadataType 属性（类可以为空）。

而在MetadataType属性中给出的类中，可以把“生成类”的属性，加上属性。

```
//partial class
[MetadataType(typeof(ModelClassValidation))]
public partial class ModelClass
{
}

//class used for attributes
public class ModelClassValidation
{
        [Required]
        [DisplayName("First Name")]
        public string FirstName
        {
                get;
                set;
        }
} 
```

**解决方案 2**

永远不要使用你的 Model 类，但是 ViewModel(s)（我想你知道它是什么，如果不，你会发现大量的信息而不需要太多的努力），并将属性放在这些 ViewModel 类中。

# html - ie7、ie8上的不透明度输入文件

> ID：10575850
> 
> 赞同：1
> 
> 时间：2012-05-13T22:51:28.763
> 
> 标签：html, css, internet-explorer

好吧，我得到了这个代码：

```
<div class="teste">
    <input type="file" name="teste" />
    teste
</div> 
```

CSS：

```
.teste {
   width:300px;
   height:100px;
   position:absolute;
   top:10px;
   right:10px;
   overflow:hidden;
   background-color:#FF0000;
   opacity:1; 
   filter:alpha(opacity=100);
}

input[type=file] {
   position:absolute;
   top:0px;
   right:0px;
   font-size:300px;
   opacity:0;
   filter:alpha(opacity=0);
} 
```

在 FF 和 Chrome 中完美运行，但在文本“teste”变白时，我发现当输入文件超过文本“teste”时，它会变白。

有人知道如何解决吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T01:24:20.533

我对为什么该解决方案无法在 IE7 / IE6 上运行非常感兴趣，因此，安装 Windows XP（IE6 随附）并测试 Fiddle！

**首先，我对此进行了测试：** ^(应该按照[此处所述工作！](https://stackoverflow.com/questions/4990679/what-css-can-i-use-to-make-an-html-file-field-transparent))

[见小提琴！](http://jsfiddle.net/zuul/kHM32/)

```
<div class="teste">
    <input type="file" name="teste" />
    teste
</div>

.teste {
   width:300px;
   height:100px;
   position:absolute;
   top:10px;
   right:10px;
   overflow:hidden;
   background-color:#FF0000;
   opacity:1;
   filter:alpha(opacity=100);
}

input[type=file] {
    display:block;
    width:300px;
    height:100px;
    position:absolute;
    cursor:pointer;
    opacity:0;
    filter:alpha(opacity=0);
    top:10px;
    right:10px;
} 
```

* * *

而且它没有用，所以，**意识到浏览器已经过时了**^([MS IE css 支持](http://msdn.microsoft.com/en-us/library/cc351024%28v=vs.85%29.aspx))，我删除了`input[type=file]`它并用一个普通的旧类替换它 `.the_file`。最终结果是完全成功地解决了 OP 的问题：

请参阅带有TESTED 解决方案的[小提琴！](http://jsfiddle.net/zuul/kHM32/2/)

```
<div class="teste">
    <input type="file" name="teste" class="the_file" />
    teste
</div>

.teste {
   width:300px;
   height:100px;
   position:absolute;
   top:10px;
   right:10px;
   overflow:hidden;
   background-color:#FF0000;
   opacity:1;
   filter:alpha(opacity=100);
}

.the_file {
    display:block;
    width:300px;
    height:100px;
    position:absolute;
    cursor:pointer;
    opacity:0;
    filter:alpha(opacity=0);
    top:10px;
    right:10px;
} 
```

## 最后说明：

这是在带有**IE6 v.6.0.2900.2180的***Windows XP Professional v2002 SP2上测试的，之后使用***IE7 v.7.0.5730.13**进行了更新和测试。

 ****在 IE7 上，两种解决方案都有效！

* * *

**更新：**

现在也在测试：^(在相同的winXP下)

*   IE 8 v8.0.6001.18702
*   歌剧 11.64
*   K-Meleon 1.5.4
*   FF 3.6.16
*   谷歌浏览器 18.0.1025.168 m
*   Safari 5.1.2 (7534.52.7)
*   ^(win7下)IE 9 v9.0.8112.16421IC

* * *

还注意到您提到文字变白了！在执行的任何测试中都没有发生！****

# c# - 如何从数据表中获取列值

> ID：10575851
> 
> 赞同：2
> 
> 时间：2012-05-13T22:51:30.450
> 
> 标签：c#, .net, datatable, datarow

我正在尝试从具有与用户输入匹配的列值的数据表中获取行值。

我找到了这个链接：

[如何从数据表中获取特定的列值？](https://stackoverflow.com/q/2916583/1270384)

但我不确定，因为我想能够说

```
where userID =@userinput and DateBooked =@DateBooked and 
RoomQty=@RoomQty and NoofNights=@NoofNights 
```

.

这个例子适用于我的情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:29:20.213

您应该能够按照提供的链接中的示例进行操作。

假设你有一个像这样的 DataTable

```
 DataTable dt = new DataTable();
            dt.Columns.Add("UserID");
            dt.Columns.Add("FullName");
            dt.Columns.Add("DateBooked");
            dt.Columns.Add("RoomQty");
            dt.Columns.Add("NoofNights");

            dt.Rows.Add(1, "John Doe", DateTime.Now.AddDays(-7).Date, 2, 3);
            dt.Rows.Add(2, "Jack Sparrow", DateTime.Now.AddDays(-14).Date, 1, 1);
            dt.Rows.Add(3, "Arthur Wilson", DateTime.Now.AddDays(-10).Date, 2, 2);
            dt.Rows.Add(4, "Amy Jackson", DateTime.Now.AddDays(-5).Date, 4, 2);
            dt.Rows.Add(5, "Tim Lee", DateTime.Now.AddDays(-1).Date, 1, 5);
            dt.Rows.Add(2, "Jack Sparrow", DateTime.Now.AddDays(-5).Date, 3, 2); 
```

你的输入参数是

```
 int userInput = 2;
            DateTime dateBooked = DateTime.Now.AddDays(-14).Date;
            int roomQty = 1;
            int noOfNights = 1; 
```

您可以`'FullName'`像这样获取列值（前提是您将根据您的 where 条件拥有一条记录）

```
 string FullName = (from DataRow dr in dt.Rows
                               where Convert.ToInt32(dr["UserID"]) == userInput &&
                               Convert.ToDateTime(dr["DateBooked"]) == dateBooked &&
                               Convert.ToInt32(dr["RoomQty"]) == roomQty &&
                               Convert.ToInt32(dr["NoofNights"]) == noOfNights
                               select (string)dr["FullName"]).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T08:14:03.893

```
IEnumerable<String> userNames =
    dataTable
    .AsEnumerable()
    .Where(row =>
        row.Field<Int32>("userID") == userinput &&
        row.Field<DateTime>("DateBooked") == dateBooked &&
        row.Field<Int32>("RoomQty") == roomQty &&
        row.Field<Int32>("NoofNights") == noofNights)
    .Select(row => row.Field<String>("userName")); 
```

# android - 无法将活动作为方法中的参数传递

> ID：10575852
> 
> 赞同：2
> 
> 时间：2012-05-13T22:51:40.410
> 
> 标签：android, android-activity, android-notifications

所以这是交易。

我创建了一个用户定义的类。它包含一个返回通知对象的方法。现在我希望这种方法有点灵活。就像传递当用户单击通知栏中的通知时将打开的活动一样。这是方法

```
public Notification getUserNotificationObject(String status, String message, String tickerText, boolean isOngoingEvent){
    Notification notification = new Notification(R.drawable.image, tickerText, System.currentTimeMillis());

    long vibInterval =  (long) context.getResources().getInteger(R.integer.vibrateInterval);

    notification.vibrate = new long[] {vibInterval, vibInterval, vibInterval, vibInterval, vibInterval};

    Intent notifyIntent = new Intent(context, HomeScreen.class);
    CharSequence contentTitle = "Title";
    CharSequence contentText = status + "-" + message;
    notification.setLatestEventInfo(context, contentTitle, contentText, PendingIntent.getActivity(context, 0, notifyIntent, PendingIntent.FLAG_CANCEL_CURRENT));

    notification.ledARGB = Color.argb(100, 0, 254, 0);
    notification.ledOnMS = 500;
    notification.ledOffMS = 500;        
    notification.flags |= Notification.FLAG_SHOW_LIGHTS;
    if(isOngoingEvent){
         notification.flags |= Notification.FLAG_ONGOING_EVENT;
    }

    return notification;
} 
```

我希望能够将活动作为参数传递给 this 而不是

```
HomeScreen.class 
```

在上面的意图定义中使用（用于为此类的用户（或其他开发人员）提供额外的控制，以选择单击通知时要打开的活动）。我尝试使用 Activity 作为此方法的参数之一，但是每当我尝试在调用此方法（如“Activity2”或“Activity2.this”）时传递另一个活动时，它会给我错误提示：

```
No enclosing instance of the type Activity2 is accessible in scope 
```

是否有任何解决方法或任何方法将活动作为参数传递。或者我应该根据 NotificationID 区分它们。

欢迎在这方面提供任何帮助或对上述代码进行任何更正。（“context”是一个类级别的变量，所以不用担心。这段代码工作正常）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T22:56:54.420

的类型`HomeScreen.class`是`Class`。因此，您可以传递 a 的实例`Class`来指示下一个活动。例如（为便于阅读而格式化）：

```
public Notification getUserNotificationObject(
    String status,
    String message,
    String tickerText,
    boolean isOngoingEvent,
    Class nextActivityClass) { 
```

并致电：

```
getUserNotificationObject(..., HomeScreen.class) 
```

不过，更灵活的方法可能是将 an 传递`Intent`给您的函数。这样，调用者可以`Intent`按照他们想要的方式创建，并允许他们在需要时向意图添加额外的数据。在函数内部创建一个`new Intent`不允许这种灵活性。

```
public Notification getUserNotificationObject(
    String status,
    String message,
    String tickerText,
    boolean isOngoingEvent,
    Intent nextIntent) { 
```

并致电：

```
Intent intent = new Intent(context, HomeScreen.class);
getUserNotificationObject(..., intent) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-18T13:45:08.147

没有必要通过`Activity`。您可以轻松地传递 a `Context`，然后将其转换为`Activity`如下所示：

```
public class SomeClass {
    public SomeClass(Context context){

        // using context as activity
        Window win = ((Activity) context).getWindow();

        // your code
    }
} 
```

希望你觉得它有用！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-23T11:07:04.847

只需创建一个活动对象/实例，如**new YourActivity()**。

```
public static void Redirect(Context context,Activity page) {

..... //code

context.startActivity(new Intent(context,page.getClass()));

((Activity) context).finish();
} 
```

并将此方法用作

```
Redirect(Registration.this, new YourActivity()); 
```

# java - 破坏了我接收短信的能力

> ID：10575857
> 
> 赞同：0
> 
> 时间：2012-05-13T22:53:00.097
> 
> 标签：java, android, text, sms, broadcastreceiver

嘿，我正在开发一个发送和接收短信的 android 应用程序，我试图找到一种方法来删除与应用程序有关的短信。我在几篇文章中遇到了 abortBroadcast() 方法，并决定试一试。我在我的各种 if 语句树中放置了几个 abortBroadcast() 调用（不同的文本导致不同的操作）。

好吧，在我从应用程序中向自己发送了一条文本之后，我没有收到它。所以我想我可能用 abortBroadcast 命令过度杀了它。但是即使我从代码中删除了所有这些，甚至从手机中卸载了应用程序，然后重新启动了手机，我仍然无法收到任何短信！发送工作正常，但我无法再收到任何文本。下面完整列出了我收到文本时遇到的错误。

```
05-13 16:08:04.015: E/SMSDispatcher(731): Exception dispatching message
05-13 16:08:04.015: E/SMSDispatcher(731): java.lang.ArrayIndexOutOfBoundsException
05-13 16:08:04.015: E/SMSDispatcher(731):   at com.android.internal.telephony.SMSDispatcher.processMessagePart(SMSDispatcher.java:970)
05-13 16:08:04.015: E/SMSDispatcher(731):   at com.android.internal.telephony.gsm.GsmSMSDispatcher.dispatchMessage(GsmSMSDispatcher.java:307)
05-13 16:08:04.015: E/SMSDispatcher(731):   at com.android.internal.telephony.SMSDispatcher.handleMessage(SMSDispatcher.java:523)
05-13 16:08:04.015: E/SMSDispatcher(731):   at android.os.Handler.dispatchMessage(Handler.java:99)
05-13 16:08:04.015: E/SMSDispatcher(731):   at android.os.Looper.loop(Looper.java:130)
05-13 16:08:04.015: E/SMSDispatcher(731):   at android.app.ActivityThread.main(ActivityThread.java:3859)
05-13 16:08:04.015: E/SMSDispatcher(731):   at java.lang.reflect.Method.invokeNative(Native Method)
05-13 16:08:04.015: E/SMSDispatcher(731):   at java.lang.reflect.Method.invoke(Method.java:507)
05-13 16:08:04.015: E/SMSDispatcher(731):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-13 16:08:04.015: E/SMSDispatcher(731):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-13 16:08:04.015: E/SMSDispatcher(731):   at dalvik.system.NativeStart.main(Native Method) 
```

我怎样才能在我的手机中修复这个错误！？作为记录，上面列出的这些错误都不是来自我的代码，所有代码都是 Android OS 的东西。如果没有人知道怎么做，你知道我可以联系谁来获得帮助吗？我真的不想重置我的手机...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:47:21.147

只需尝试：

```
clearAbortBroadcast() 
```

这将清除您使用中止设置的标志。

Take a look here for further Information: [http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

# c++ - 将字符串转换为 C++ 中运算符的别名

> ID：10575860
> 
> 赞同：1
> 
> 时间：2012-05-13T22:53:41.940
> 
> 标签：c++, operators

我试图弄清楚如何将比较运算符动态应用于 c++ 中的两个变量。例如：

我有一个数据列表，例如：

```
#include <boost/variant/variant.hpp>
#include <list>

typedef boost::variant< short, int, long, long long, double, string > flex; 
typedef pair<string, flex> flex_pair;
typedef list< flex_pair > row_entry;

list< row_entry > all_records; // This is the primary list
list< row_entry >::iterator all_records_it; // An iterator to move through the primary list 
```

现在，假设有一行`all_records`看起来像这样：

```
all_records[0]["price"] = 220.45;
all_records[0]["time"] = 1336948802;
all_records[0]["name"] = "some item";

all_records[1]["price"] = 180.0;
all_records[1]["time"] = 1336948102;
all_records[1]["name"] = "another item"; 
```

我希望能够做这样的事情：

```
comparer(all_records[0]['price'], 190, ">"); 
```

这将测试`if(all_records[0]['price'] > 190)`并返回是否评估为真。同样，如果我要这样做：

```
comparer(all_records[0]['price'], 190, "=="); 
```

它将测试`if(all_records[0]['price'] == 190)`并返回其计算结果是否为真

我知道我可以使用一堆`if`/`else`语句或`switch`语句来做到这一点，但是有没有更优雅的方式来做到这一点，例如：

```
return val1 cmpr_string val2; 
```

其中`val1 = all_records[0]['price']`,`val2 = 190`和`cmpr_string`是 > 比较运算符（从“>”字符串转换为比较运算符。本质上，我想我正在寻找一种将字符串转换为某种运算符别名的方法，该运算符可以像这样使用原始运算符。如果我也可以将它用于除比较运算符之外的运算符（例如，`+`和`-`），那就太好了。

请注意，我使用`boost::variant`了 for，`all_records`因为实际上，这就是我将要做的（对于列表的不同成员，每个值可以是不同的类型）。如果它更容易，我可以放入一个系统来确保不同行中`all_records`具有相同键的对具有相同的类型。所以，如果`all_records[0]['price']`是 a `double`，它将是`double`所有的`all_records[n]['price']`

# c# - Ajax 系统的最佳方法？

> ID：10575861
> 
> 赞同：0
> 
> 时间：2012-05-13T22:54:02.577
> 
> 标签：c#, asp.net, ajax, service, web

嗨，我想知道是否有人可以帮助我。我想创建一个允许显示和搜索记录的 Ajax 系统。目前，我将函数名称和值传递给名为 userUpdate.aspx 的文件，以带回数据。我的问题是我想添加额外的功能，比如自动完成。我查看了示例，它们都使用 Web 方法和服务。我应该将我的 Ajax 调用移动到 web 方法而不是 aspx 文件，这会带来什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:16:20.800

> Should I move my Ajax calls to web methods instead of an aspx file and what advantages will this bring?

Certainly moving some methods to a Web Service or exposing them as Page Methods will allow you to make Ajax requests easily with jQuery, for example. If you go the MS Ajax route, you'll have to use Update Panels and Script Managers which are inefficient and will never perform as good as a regular Ajax request that does not trigger the full page life-cycle. As a result, your requests are lighter, faster and slimmer (they carry less data).

# c# - RDLC计算运行总数？

> ID：10575863
> 
> 赞同：5
> 
> 时间：2012-05-13T22:54:14.747
> 
> 标签：c#, mysql, sql, sql-server, rdlc

我正在努力获得一个运行总和来编写一份报告。我想要的是以下内容：

```
Product    Qty1   Qty2  Total  RunningTotal
ABC123     100    200   300    300
DEF321     50     100   150    450
XYZ123     -100   -150  -250   200 
```

总列是一个类似的表达式

`=ReportItems!Qty1.value + ReportItems!Qty2.Value`

对于总计，我尝试了许多不同的东西，其中大多数告诉我它必须在页眉或页脚中。我认为可行的明显表达是

`=ReportItems!Total.Value + previous(ReportItems!Total.Value)`

但这不起作用。

谁能解释我在这里做错了什么？

干杯院长

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T15:23:35.953

我相信您正在寻找[`RunningValue`功能](http://msdn.microsoft.com/en-us/library/ms251660%28v=vs.80%29.aspx)。未经测试，但类似于：

```
=RunningValue(Fields!Total.Value,Sum,"MyGroupName") 
```

# jquery - jquery - datepicker 问题 - 切换日期格式丢失数据

> ID：10575864
> 
> 赞同：0
> 
> 时间：2012-05-13T22:55:06.977
> 
> 标签：jquery, datepicker, date-format

我正在使用带有复选框的日期选择器。如果选中，则日期应以 dd.mm.yy 格式显示，如果未选中，则应以 mm.yy 格式显示。再次检查后，它应该再次以 dd.mm.yy 格式显示日期。

正如您在代码中看到的，它几乎可以正常工作：

**HTML：**

```
<div class="pola_tresc">
   <input type="text" name="date_from" id="date_from">
</div>
<label class="label_check">
    <input name="mm_yy" id="" value="" type="checkbox"/>
</label> 
```

**Javascript：**

```
 $( "#date_from" ).datepicker();
$('.label_check').click(function(e){
    e.preventDefault();
    if ( $('label > input').prop('checked') == true )
    {
        $('label > input').prop('checked', false);
        $('label').removeClass('c_on');
        $( "#date_from" ).datepicker( "option", "dateFormat", "dd.mm.yy" );

    } else  {
        $('label > input').prop('checked', true);
        $('label').addClass('c_on');
        $( "#date_from" ).datepicker( "option", "dateFormat", "mm.yy" );

    }

}); 
```

您可以在上面看到一个功能，它可以屏蔽普通复选框以使它们看起来更好。它还按照文档中的建议更改日期选择器的日期格式。我从日期的 dd.mm.yy 格式开始。然后我点击复选框。它按预期将我的日期更改为 mm.yy 格式。再次单击后，我得到空字段。我猜 datepicker 无法将 mm.yy 日期格式解释为 dd.mm.yy - 它不记得对象中的整个日期，它只是从输入字段中选择 mm.yy 日期，并尝试使用它的 dateformat 算法之一来识别它。结果为空字符串。 **问题：** 如何在不丢失数据的情况下轻松更改 mm.yy 和 dd.mm.yy 日期？

编辑：

我正在考虑将 dd.mm.yy 日期存储在隐藏的输入字段中，并在我单击复选框时随时检索它。它应该工作，但它的技巧 - 我正在寻找更多使用 datepicker。仍然对任何其他想法开放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T23:38:49.137

您可以使用[jQuery.data](http://api.jquery.com/jQuery.data/) api 来存储完整日期，而不是使用隐藏字段。

# asp.net - ruby-on-rails 视图中类似 Razor 的语法

> ID：10575870
> 
> 赞同：4
> 
> 时间：2012-05-13T22:56:20.417
> 
> 标签：asp.net, ruby-on-rails, ruby, asp.net-mvc, ruby-on-rails-3

> **可能重复：**
> [哪个 RoR 模板引擎类似于 Razor 模板引擎？](https://stackoverflow.com/questions/8061785/which-ror-template-engine-is-similar-to-the-razor-template-engine)

[asp.net mvc](http://www.asp.net/mvc)在模仿 Rails 方面做得很好。
我知道在 Rails 中，如果你想将内联代码添加到视图中，它必须在`<% %>`语法中。
在 asp.net mvc 中它也存在，但他们为语法引擎添加了另一个选项，称为[**Razor**](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)。
有谁知道rails中是否有类似剃须刀的等价物（或除标准方式外的任何其他在视图中呈现内联代码的`<% %>`方式）？

**编辑**- 我也知道**[Haml](http://haml.info/)**，我认为它不像我需要的那样优雅，因为它是一种编写 html 标签的新方法。我更喜欢坚持标准，只是有一个很好的方式来放置内联代码。
预先感谢 ：）

# java - 用于读取/写入 C64 T64、D64 图像文件的 Java 库？

> ID：10575883
> 
> 赞同：0
> 
> 时间：2012-05-13T22:59:03.403
> 
> 标签：java, c64

我想从 Java 程序中读取/写入 T64 和 D64。有没有图书馆可以做到这一点？

**编辑**

我看过几个模拟 1541 的 C64 模拟器，但问题是它们并没有真正提供公共 API，而是将 T64/D64 读/写代码与其他东西混合在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T00:00:14.947

> 除了手动解析任何建议？

有几个基于 Java 的 C64 仿真器项目。尝试重用他们用来读取文件的代码。

# jquery - 确保在视频 div 之前加载 img div

> ID：10575884
> 
> 赞同：0
> 
> 时间：2012-05-13T22:59:16.103
> 
> 标签：jquery, html, function, fade

我有一个页面，当您单击一组按钮中的一个时，图像会弹出，然后随着视频播放而淡出。问题是它在第一次点击时起作用，但在第二次点击时，带有图像的 div在视频加载*后加载。*如何确保它在视频开始加载之前出现？脚本（简化）是

```
$('li, .thumbs').on('click', function() {
    myVideo.load();
    myVideo.play();
    $('#myVid').bind("loadstart", function() {
        $('#MyT').fadeIn(0);
    });
    $('#myVid').bind("playing", function() {
        $('#MyT').fadeOut(500);
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:04:54.257

设置播放超时：

```
$('li, .thumbs').on('click', function() {
    setTimeout(function(){
        myVideo.load();
        myVideo.play();
    }, 200); // 200 ms, you can custom it as you wish.

    $('#myVid').bind("loadstart", function() {
        $('#MyT').fadeIn(0);
    });
    $('#myVid').bind("playing", function() {
        $('#MyT').fadeOut(500);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T23:47:33.117

尝试对图像使用 onload 功能。这可确保在发生其他任何事情之前加载图像

[我写了一篇博客文章，如何做到这一点](http://aniruddhaloya.blogspot.com/2012/03/how-to-ensure-images-are-loaded-before.html)。您可以将视频加载和其他功能放在 onImgLoad 函数中，如博客中所述。这将确保您的图像在视频开始之前加载并出现。

# algorithm - 用最少的步骤解决游戏“Pop it”的算法

> ID：10575886
> 
> 赞同：1
> 
> 时间：2012-05-13T22:59:34.490
> 
> 标签：algorithm

谁能建议我以最少的步骤解决这个游戏[http://puzzle-games.pogo.com/games/poppit的策略。](http://puzzle-games.pogo.com/games/poppit)

我的想法是找到一组气球（相同颜色的邻居），这些气球在被移除后留下的组数最少。

然而，我的实现还不够好。我唯一能想到的就是收集所有气球组并检查每个组如果我删除它会剩下多少组。这当然是一项非常繁重的操作，因为它包括在我删除一个组之后重新排列气球，然后恢复原始顺序。

如果有人想出更好的方法来实现我的算法或解决问题的完全不同的方法，我将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:18:41.807

这个游戏是[Same Game](http://en.wikipedia.org/wiki/SameGame)的另一个版本。是否存在最优解的问题在[本文](http://arxiv.org/abs/cs.CC/0107031)中被证明是 NP 完全的。这意味着，一般来说，找到一个最佳解决方案需要指数级的时间。另一方面，如果您将问题转化为布尔可满足性问题的一个实例，您可以使用[SAT 求解器](http://en.wikipedia.org/wiki/SAT_solver#Algorithms_for_solving_SAT)比临时方法更快地解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T23:23:02.410

What you have mentioned is the [Backtracking](http://en.wikipedia.org/wiki/Backtracking) approach. You pop groups of balloons until you can't no more, then you undo the the last move and try something else. Wikipedia explains this better than I ever could.

While this sounds computationally heavy, I'm guessing computers these days should be able to solve your problem pretty quickly.

As for implementation, base it on a recursive function (a function that calls itself), the pseudo-code would look something like this:

```
void main()
{
    setupBoard();
    if(Try())
        print("Found Solution");
}

boolean Try()
{
   if(noballonsLeft)
       return true; //Found solution!
   foreach(Move move in getPossibleMoves())
   {
       doMove(move);
       if(Try())
           return true; //This try found a solution!
       undoMove(move);
   }
   return false; //No solutions found
} 
```

This will find *a* solution to the problem, extending this to find the best solution should be no problem ;)

# php - require_once() 破坏应该生成 OpenGraph 标记的 url 数组？

> ID：10575892
> 
> 赞同：0
> 
> 时间：2012-05-13T23:00:37.757
> 
> 标签：php, foreach, require-once, facebook-opengraph

这段代码有问题，想知道我是否正在尝试实现一些不可能的事情。我正在使用[OpenGraph PHP 库](https://github.com/scottmac/opengraph/blob/master/OpenGraph.php)

我想获取一组 url，通过 OpenGraph.php 分别发送它们，然后从该 url 回显一些 Open Graph 标记。

require_once() 函数似乎破坏了数组，因为我认为它将 $urls[$i] 的检索范围缩小到 OpenGraph.php？我会以错误的方式解决这个问题吗？

```
<?php
$urls = array();
$paras = array();
$c=0;
foreach($_POST as $variable){
    if($i==1){
        array_push($urls,$variable);
        $i++;
    }else{
        array_push($paras,$variable);
        $i=1;
    }
    $c++;
};

echo'<table>';
for($i=0;$i<$c;$i++){
    require_once('OpenGraph.php');
    $graph = OpenGraph::fetch("$urls[$i]");
    echo $graph->title;
    echo'<tr><td>'.$paras[$i].'</td></tr>'
}
echo'</table>';
?> 
```

谢谢！

编辑

require_once() 函数不是问题，它当然不需要在循环中。问题是在我的本地主机上运行文件 PHP 没有为该任务正确配置。将其移动到正确配置的服务器上修复了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:48:35.180

The require_once() function was not the problem and it certainly didn't need to be in the loop. The issue was running the file on my [localhost PHP](https://stackoverflow.com/questions/9061759/function-file-get-contents-failed-to-open-stream) was not correctly configured for the task. Moving it onto a proper server that was configured correctly fixed it.

# internet-explorer-8 - 在我的页面中使用时，JsDatePick 的数据选择器在 IE8 中的外观全部损坏

> ID：10575893
> 
> 赞同：0
> 
> 时间：2012-05-13T23:00:46.723
> 
> 标签：internet-explorer-8, datepicker, css

我尝试使用[JsDatePick](http://javascriptcalendar.org/)。

该工具提供的示例 HTML 在 FireFox 和 IE8 中运行良好

但是，当我尝试在我自己的 HTML 页面中使用现有结构和 CSS 的选择器时：

*   在 FireFox 中它运行良好（选择器显示为输入字段旁边的日历）

*   在 IE8 中，选择器显示为日期的垂直列，位于我的页面下方（例如，您需要向下滚动才能看到它），例如

    ```
     ----------------------------------------------
     | My main page DIV, sized ~100% page height  |
     |                                            |
     |                  <INPUT FIELD>             |
     |                                            |
     |                                            |
     |                                            |
     |                                            |
     |                                            |
     |                                            |
     ----------------------------------------------
          ---- BOTTOM OF PAGE HERE ---

                         [1]      <-- This was meant to be a 5x7
                         [2]      <-- calendar pop-up appearing
                         [3]      <-- under the INPUT FIELD
                         [...]    <-- NOTE that the horizontal position is correct,
                         [30]     <-- Fully aligned with INPUT FIELD 
    ```

不幸的是，我还不足以成为一名 CSS 专家，甚至无法开始了解如何解决它。

1.  如果有人使用 JsDatePick 并遇到了这个问题，任何关于如何修复的想法都值得赞赏

2.  除此之外，我需要采取哪些步骤来解决这个（看似 ​​CSS 冲突）问题？

    该页面有自己的样式表，但其中一个是 100% 类限制样式，而第二个具有一些全局样式，但没有定义位置，任何非类特定的样式都是`body`和的字体样式`h1`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-29T19:13:21.390

我找出了为什么选择器没有正确显示的直接实际问题。

示例 HTML 文件具有以下我必须使用的 DTD 声明：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

为什么选择器不能在纯 HTML 中工作尚不清楚。

# android - 特殊字符（@，？）作为 android 应用程序中的 xml 字符串

> ID：10575898
> 
> 赞同：5
> 
> 时间：2012-05-13T23:01:53.760
> 
> 标签：android

如果我尝试做这样的事情，它不起作用......（空字符串或没有资源类型错误）

```
<string name="random">?</string>
<string name="random">@</string> 
```

我还尝试了 html 实体变体

```
<string name="random">&#63;</string> 
```

任何想法如何使用“？” 和“@”作为android中的字符串资源？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-13T23:09:13.200

最简单的方法是引用或反斜杠：

```
<string name="random">"?"</string>
<string name="random">\?</string> 
```

有关更多讨论，请参见[此处](http://groups.google.com/group/android-developers/browse_thread/thread/bd5dc0f6791b18f7?pli=1)和[此处。](http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling)

*   [`?`参考样式属性](http://developer.android.com/guide/topics/resources/accessing-resources.html#ReferencesToThemeAttributes)
*   [`@`标志访问其他资源](http://developer.android.com/guide/topics/resources/accessing-resources.html#ResourcesFromXml)。

这是一个[更大的字符串资源陷阱集合](http://tekeye.biz/2012/android-string-resources-gotchas)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-30T12:53:10.410

这对我有用：

```
<string name="twitter_hint">"@"twitter</string> 
```

# c# - C# - 具有系统时间意识的 Windows 服务

> ID：10575900
> 
> 赞同：8
> 
> 时间：2012-05-13T23:02:44.150
> 
> 标签：c#, scheduled-tasks, job-scheduling

我正在考虑编写一个 Windows 服务，该服务将在用户指定的时间打开或关闭某些功能（使用我将提供的配置实用程序）。基本上，用户会指定 PC 进入“仅工作”模式的特定时间（阻止 Facebook 和其他分散注意力的网站），然后当这些时间结束时，PC 将返回正常模式。

我已经想出了几种创建“仅工作”模式的方法，但我正在努力解决的是如何知道何时进入和退出该模式。如果可以避免的话，我真的不想使用线程和计时器，因为这似乎会产生大量开销，所以我正在寻找的方法是：

*   如果有某种 timeChanged() 事件要检查，则连接到 Windows API
*   使用某种预建库在指定时间触发事件
*   其他一些我没有想到的方法是优雅而美妙的

有谁知道做到这一点的最佳方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T08:47:34.507

我认为您可以使用您提到的**Windows 服务**很好地实现它。在我们的一个生产系统中，我们有一个以以下方式实现的 Windows 服务（根据要求提供不同的核心功能），该服务已经安全运行了近三年。

基本上，以下代码的目的是每次内部计时器（`myTimer`）唤醒时服务执行特定的方法。

下面是一个基本的实现。在这个例子中，你的核心功能应该放在方法`EvalutateChangeConditions`中，它应该每 60 秒执行一次。我还将为您的管理客户提供一种公共方法，以了解当前的“工作模式”。

```
public partial class MyService : ServiceBase
{
    private System.Threading.Thread myWorkingThread;
    private System.Timers.Timer myTimer = new System.Timers.Timer();

    // [...] Constructor, etc

    protected override void OnStart(string[] args)
    {
        // Do other initialization stuff...

        // Create the thread and tell it what is to be executed.
        myWorkingThread = new System.Threading.Thread(PrepareTask);

        // Start the thread.
        myWorkingThread.Start();
    }

    // Prepares the timer, sets the execution interval and starts it.
    private void PrepareTask()
    {
        // Set the appropiate handling method.
        myTimer.Elapsed += new System.Timers.ElapsedEventHandler(myTimer_Elapsed);

        // Set the interval time in millis. E.g.: each 60 secs.
        myTimer.Interval = 60000;

        // Start the timer
        myTimer.Start();

        // Suspend the thread until it is finalised at the end of the life of this win-service.
        System.Threading.Thread.Sleep(System.Threading.Timeout.Infinite);
    }

    void myTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        // Get the date and time and check it agains the previous variable value to know if
        // the time to change the "Mode" has come.
        // If does, do change the mode...
        EvalutateChangeConditions();
    }

    // Core method. Get the current time, and evaluate if it is time to change
    void EvalutateChangeConditions()
    {
        // Retrieve the config., might be from db? config file? and
        // set mode accordingly.
    }

    protected override void OnStop()
    {
        // Cleaning stuff...
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T23:11:19.107

如果 Windows 任务计划程序没有理由不适合您，我建议您使用它。

如果您不想使用任务调度程序，我将有一个简单的循环来检查任何即将发生的事件（锁定/解锁站点）并执行任何到期的事件。如果没有事件发生，请长时间休眠（[Thread.Sleep()](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)）。
我没有研究过长时间睡眠的任何副作用，但是一分钟的睡眠时间不应该消耗太多资源。如果它不是服务，我可能会进行终止检查，但我认为服务并不意味着终止。

# facebook - 将 Facebook 照片获取到 Titanium

> ID：10575901
> 
> 赞同：1
> 
> 时间：2012-05-13T23:02:54.867
> 
> 标签：facebook, json, gallery, titanium, appcelerator-mobile

我有一个乐队，我想在我们的钛应用程序中建立一个部分，显示我们的 Facebook 粉丝页面图片。

我已经到了可以在表格行中获取图片的部分，但是当我单击它们时，它只显示最后一个。

有点奇怪……

那么这是我的代码，所以也许你可以帮助看看我做错了什么......

```
var win = Ti.UI.currentWindow;

win.hideNavBar();

Ti.UI.backgroundColor = '#dddddd';

var url = "https://graph.facebook.com/98604492365/photos";
var win = Ti.UI.createWindow();
var table = Ti.UI.createTableView();
var tableData = [];
var json, data, position,picture, source,link,icon;

var xhr = Ti.Network.createHTTPClient({
onload: function() {
// Ti.API.debug(this.responseText);

json = JSON.parse(this.responseText);
for (i = 0; i < json.data.length; i++) {
    data = json.data[i];
    row = Ti.UI.createTableViewRow({
        height:'60dp'
    });
  var  name = Ti.UI.createLabel({
        text:data.position,
        font:{
            fontSize:'18dp',
        fontWeight:'bold'
    },
    height:'auto',
    left:'50dp',
    top:'5dp',
    color:'#000',
    touchEnabled:true
    });

  // Avatar
            var img = Ti.UI.createImageView({
                image   : data.picture,
                width   : 35,
                height  : 35,
                top     : 5,
                bottom  : 5,
                borderRadius: 5,
                left    : 5
            });
            row.add(img);

    row.add(name);

    tableData.push(row);
    }

table.setData(tableData);
},
onerror: function(e) {
Ti.API.debug("STATUS: " + this.status);
Ti.API.debug("TEXT:   " + this.responseText);
Ti.API.debug("ERROR:  " + e.error);
alert('There was an error retrieving the remote data. Try again.');
},
timeout:5000
});

xhr.open("GET", url);
xhr.send();

// Handle a click event on the table
    table.addEventListener('click',function(e) {
        // Create the new window with the link from the post
        var faceWindow = Ti.UI.createWindow({
            title   : data.name,
            modal   : true,
            barColor: '#050505',
            backgroundColor: '#050505'              
        });
        var webView = Ti.UI.createWebView({url: data.source});
        faceWindow.add(webView);

        // Create the close button to go in the left area of the navbar popup
        var close = Titanium.UI.createButton({
            title: 'Close',
            style: Titanium.UI.iPhone.SystemButtonStyle.PLAIN
        });
        faceWindow.setLeftNavButton(close);

        // Handle the close event
        close.addEventListener('click',function() {
            faceWindow.close();
        });

        faceWindow.open();
    });

win.add(table);
win.open(); 
```

请帮助我，我正在失去理智......

谢谢

//R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:02:00.270

查看您的代码，我的缩进是错误的。看到这一点，我注意到您在事件处理程序“单击”中使用了 data.name 和 data.source。该数据似乎是在 foreach 循环中设置的。

点击事件不能那样工作。它是事件驱动的。您最好将源 url 和名称设置为行上的变量。

```
row.photoName = data.name;
row.photoSource = data.source; 
```

然后，在事件处理程序中，您设置`e`为回调变量。使用它：

```
e.row.photoName;
e.row.photoSource; 
```

# google-apps-script - 在单个撤消/重做命令中加入多个编辑

> ID：10575904
> 
> 赞同：0
> 
> 时间：2012-05-13T23:04:20.860
> 
> 标签：google-apps-script

我的脚本对 s 执行多项`moveTo`操作`Range`。一切都很好，除了脚本完成后每个特定`moveTo`操作都是一个可撤消的操作。因此，如果用户决定这不是他所需要的，他必须逐步撤消（对他而言）未知的次数。（在连接缓慢/无响应以及由于撤消列表中缺少命令描述的情况下，这甚至可能会很困难。）

做一个`getValues`/`setValues`解决了这个问题。但前提是所有数据都在一张纸上（否则你必须做多个`getValues`/`setValues`这会让我们回到同样的问题）。此外，它似乎有点贵（特别是对于大纸张）并且在格式和公式方面存在问题。

那么还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:11:35.560

不是代码中的解决方案，但您的用户将能够按时间“分组”更改。您的脚本将在短时间内完成所有这些更改。您只需转到这些更改的顶部并单击恢复，这将恢复您的脚本所做的所有更改。

我不确定用户将如何识别更改。

在使用 Google Docs 还原过程时，您无法选择接受哪些更改以及拒绝哪些更改。

# android - Android 意图将文本/纯文本数据共享到 Google Drive

> ID：10575905
> 
> 赞同：3
> 
> 时间：2012-05-13T23:04:32.847
> 
> 标签：android, android-intent, google-drive-api

我创建了一个简单的记事本应用程序，它实现了 ACTION_SEND 共享意图以共享笔记。

我的数据具有“文本/纯文本”的 MIME 类型，并且在我的设备上提供了 Google Drive（以前称为 Google Docs）作为选项，当我选择 Google Drive 时，我通过吐司消息。

我像这样创建我的共享意图：

```
Intent share_intent = new Intent(android.content.Intent.ACTION_SEND);

share_intent.setType("text/plain");
share_intent.putExtra(android.content.Intent.EXTRA_SUBJECT, name);
share_intent.putExtra(android.content.Intent.EXTRA_TEXT, content);

startActivity(share_intent); 
```

Mail、Messaging、Twitter 和 Wordpress 等应用程序似乎都能很好地处理意图并至少共享 EXTRA_TEXT 内容。

我想知道是否有一种方法可以让 Google Drive 成功上传笔记，或者至少更好地处理意图？

我是Android新手，所以如果这是一个愚蠢的问题，请原谅我的愚蠢。我正在针对最低 SDK 版本 15 进行开发，如果这有帮助的话。

这是错误消息的屏幕截图： ![显示错误消息的屏幕截图](../Images/0bcb1122cadf24dab26bd2ca11e57b8b.png)

在 LogCat 中，我再次发现了错误消息：

```
05-13 23:31:46.906: E/UploadSharedItemActivity(14594): This item cannot be uploaded as Google Document. 
```

在错误消息之前还有一个警告：

```
05-13 23:31:46.250: W/ND(14594): Could not load Finalizer in its own class loader. Loading Finalizer in the current class loader instead. As a result, you will not be able to garbage collect this class loader. To support reclaiming this class loader, either resolve the underlying issue, or move Google Collections to your system class path.
05-13 23:31:46.250: W/ND(14594): java.io.FileNotFoundException: com/google/inject/internal/Finalizer.class
05-13 23:31:46.250: W/ND(14594):    at NE.a(FinalizableReferenceQueue.java:269)
05-13 23:31:46.250: W/ND(14594):    at NE.a(FinalizableReferenceQueue.java:253) 
```

我不知道这是否相关。

如果有帮助的话，我可以在这里转储整个 LogCat。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T21:57:27.683

您不能将文本共享到 google 文档，但可以共享文件（文本文件或其他文件）因此，只需将文本保存到应用程序内的文件中，然后与 Intent 共享该文件：

```
 Intent intent = new Intent(android.content.Intent.ACTION_SEND);
    intent.setType("text/plain");
    intent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://" + your_file_path));
    startActivity(Intent.createChooser(intent, "")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:20:22.260

是的，看起来这是 Google Drive 中的一个错误。在问这里之前，我应该在其他应用程序中进行更彻底的检查。

我已经通过应用程序的“发送反馈”功能进行了报告。希望谷歌软件工厂的人将来会修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-30T03:36:16.867

```
 val sendIntent = Intent(Intent.ACTION_VIEW)
    sendIntent.type = "application/pdf"
    sendIntent.action = Intent.ACTION_SEND
    sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://$filePath"))
    sendIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)
    startActivity(Intent.createChooser(sendIntent, "Share Whatever you want...")) 
```

# mysql - 将 HTML 放入数据库字段是错误的吗？

> ID：10575908
> 
> 赞同：4
> 
> 时间：2012-05-13T23:05:13.760
> 
> 标签：mysql, database, database-design

将html放入数据库是错误的吗？

例如贝宝按钮...

还是用几个换行符阻止文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:18:15.140

I think that in general this is to be avoided if possible. Traditionally, HTML markup on a website is either static, or part of a template; in which case it does not belong in the database. There are of course exceptions to this rule: for example, some content-management systems allow content administrators to work with basic HTML tags. I'm pretty sure HTML tags within Stack Overflow's editable content gets written into a database.

More important than rules like *don't put HTML into a database* is ensuring that your overall architecture is sound; and that you're allowing different components like the web server and the database to fulfill the functions that they're designed for.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T23:09:49.237

问题不在于是否将其放在表上的列上，而是此类事情如何使您的应用程序在更新、数据检索等方面变得复杂。您需要对此做出判断，但这当然并不少见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T23:12:50.440

只要您意识到您放置的 HTML 应该严格用于显示目的，就没有真正的错误，例如在您希望以特定方式显示的字段中存储一些文本，以便您为此目的添加一些标签如果您认为很难在客户端以相同的方式操纵文本，但不要将 html 存储在您认为可能用于搜索或作为参考的文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-16T11:01:57.987

我完全不同意任何说这是“错误”的人！然而，Dave Newton 在下面的评论中为使用 XML 标记而不是 HTML 标记提供了一个很好的例子。

我有一个充满词汇条目的数据库：语言 A 中有一个词头字段，语言 B 中有一个“定义/解释”字段，比如说英语。

在编写定义/解释字段时，我可能想突出显示某些单词并给它们一个像这样的 SPAN：`<SPAN lang='fr'>yeux</SPAN>`*，而其他单词可能是这样的：`<SPAN lang='en'>eyes</SPAN>`. 这种跨度之外的文本显然将是解释性文本，如下所示（对于法语“oeil”）：

`<EN>eye</EN> <phonetics>...</phonetics>, irregular pl. <FR>yeux</FR> <phonetics>...</phonetics>, <EN>eyes</EN>. And some more miscellaneous free-form text perhaps with some other embedded <FR> or <EN> words...`

更简单的标签的理由，例如`<STRONG>`或`<EM>`可能经常出现：通常任何类型的元标签都可以表达用户/编辑者可能认为非常重要或必不可少的元语义。

当试图让 MySQL 执行您通常希望在简单文本字段上执行的那种操作时，最大的问题就出现了。关于这件事有两点要说：

- 首先，您**可能**希望将“纯文本”字段与标记的字段并行保留...

- 其次，为了在标记的字段之间进行比较，存在一些问题：您可能需要在任何`INSERT INTO`s 或`UPDATE`s 之前“规范化”您的标记：目的本质上是使任何看起来相同的字段在 HTML 上下文中显示时具有完全相同的标记...根据我的经验，实现这一点绝非易事，但并非不可能。 [HTML Tidy](http://www.html-tidy.org/)可能会对此有所帮助，但我认为它不一定会完成“规范化”所需的一切。

* 顺便说一句，这种标记可能不是纯粹用于“修饰”目的：假设您使用 Lucene/Elasticsearch 类型的倒排索引对所有这些“定义/解释”字段进行索引：通过标记所有嵌入的法语单词和所有像这样的英语单词你可以用一种完全不可能的方式进行倒排索引类型搜索，除非你通过某种“元信息”机制、XML 或 HTML 等来识别某种“类型”的单词。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T23:13:02.617

这没有错（您可能*不想*索引该列），但允许普通用户完整提名内容是非常错误的；您不希望普通用户插入任意 javascript 内容！如果用户必须首先证明他们有很高的特权（例如，网站所有者），或者如果您是从渲染器（例如，Markdown）生成 HTML 并存储渲染结果，那也没关系。

注意不要将 HTML 文档与 HTML 片段或纯文本混淆；它们是不同的，您应该始终知道自己在使用什么……</p>

# linux - 301 用于 google 索引的包含 /index.php/* 的 url

> ID：10575912
> 
> 赞同：0
> 
> 时间：2012-05-13T23:05:36.177
> 
> 标签：linux, apache, .htaccess, mod-rewrite

我正在尝试使用 301 将 google 索引的旧网址重定向到新网址

我需要以下 301 的重写规则示例？`http://www .example.com/index.php/ * / */ *`（`*`作为通配符）到以下`http://www.example.com/*/*/*`

因此，当用户单击 google 索引的旧 url 时，`index.php`他们将被重定向到没有`index.php`.

有任何想法吗？

最好的，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:18:27.730

您可以使用 mod_alias：

```
RedirectMatch 301 ^/index.php/(.*)$ /$1 
```

或使用 mod_rewrite：

```
RewriteRule ^index.php/(.*)$ /$1 [R=301,L] 
```

但是，请注意，如果您有重写规则来重写请求以指向**index.php**，您将获得一个重定向循环。因此，您需要在规则中添加一个条件：

```
RewriteCond %{THE_REQUEST} ^/index.php
RewriteRule ^index.php/(.*)$ /$1 [R=301,L] 
```

这确保了*实际请求*是针对 a`index.php`而不是内部重写的 URI。

# java - 循环重新输入

> ID：10575915
> 
> 赞同：1
> 
> 时间：2012-05-13T23:07:08.110
> 
> 标签：java

```
import csci130.*;

public class Driver {
public static void main(String args[]){

    Encryption pass = new Encryption();

    System.out.println("Please enter a password:");
    String name = KeyboardReader.readLine();

    while (true) {
        if (isValidLength(name)) {
            break;
        }
        System.out.println("Your entered password was not long enough.");
    }
    System.out.println("Encrypted Password:  " + pass.encrypt(name));
    System.out.println("Decrypted Password:  " + pass.decrypt(name));
}
} 
```

* * *

```
boolean isValidLength (String password) {
if (password.length()>minLength)    {
    return true;

}   else    {
    return false;
 }
} 
```

想知道如何让循环工作，以便如果长度不够长，我可以让用户重新输入长度？现在当我编译它会说密码不够长，但不会让他们重新输入有效密码。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:12:55.133

你很近。

如果您想在之前的尝试无效的情况下重新要求用户输入密码，我会考虑将您的问题`readLine()`移到 while 循环中。

```
while (true) {
    System.out.println("Please enter a password:");
    String name = KeyboardReader.readLine();
    if (isValidLength(name)) {
        break;
    } else {
        System.out.println("Your entered password was not long enough.");
    }
} 
```

我还进行了另一项调整：将您的“不够长”消息移动到一个`else`块中。如果您决定对输入添加更多验证检查，此结构将更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T23:12:48.130

将读取名称的部分移动到循环中：

```
String name;
while (true) {
    System.out.println("Please enter a password:");
    name = KeyboardReader.readLine();
    if (isValidLength(name)) {
        break;
    }
    System.out.println("Your entered password was not long enough.");
}
System.out.println("Encrypted Password:  " + pass.encrypt(name));
System.out.println("Decrypted Password:  " + pass.decrypt(name)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T23:12:42.740

您需要将 readLine() 添加到循环中，以便`name`变量获得新密码：

```
while (true) {
    if (isValidLength(name)) {
        break;
    }
    System.out.println("Your entered password was not long enough.");

    System.out.println("Please enter a password:");
    name = KeyboardReader.readLine();
} 
```

# python - Python中奇怪的日期解析结果

> ID：10575919
> 
> 赞同：3
> 
> 时间：2012-05-13T23:07:44.950
> 
> 标签：python, datetime, timezone, python-dateutil

我正在使用[dateutil](https://dateutil.readthedocs.org)库来解析一些日期字符串，并得到奇怪的结果。我假设以下日期字符串都是相等的，括号中的时区缩写实际上是可选的，但是删除它会给我一个完全不同的值：

```
import datetime   
import dateutil.parser

parsed_d1 = dateutil.parser.parse('Sun May 13 2012 00:00:00 GMT-0400 (EDT)')   
parsed_d2 = dateutil.parser.parse('Sun May 13 2012 00:00:00 GMT-0400')   
parsed_d3 = dateutil.parser.parse('Sun May 13 2012 00:00:00-0400')   

print str(parsed_d1)   
print str(parsed_d2)   
print str(parsed_d3) 
```

**输出：**

```
2012-05-13 00:00:00-04:00   
2012-05-13 00:00:00+04:00   
2012-05-13 00:00:00-04:00 
```

谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T02:13:19.267

EDT 适用于英国西部的美国。太阳从东边升起。所以太阳在美国之前在英国的头顶。所以你需要在 EDT 上增加 4 小时才能得到 GMT。这就是为什么我需要在下午晚些时候打电话给我的父母（在英国），或者他们在床上。换句话说：“EDT +4 是 GMT”。

现在这个来源是[http://bazaar.launchpad.net/~dateutil/dateutil/trunk/view/head:/dateutil/parser.py](http://bazaar.launchpad.net/~dateutil/dateutil/trunk/view/head:/dateutil/parser.py)和似乎与解析相关的评论`GMT-0400`说

```
# Check for something like GMT+3, or BRST+3\. Notice
# that it doesn't mean "I am 3 hours after GMT", but
# "my time +3 is GMT". If found, we reverse the
# logic so that timezone parsing code will get it
# right. 
```

这意味着这`GMT-0400`相当于“我的时间 -4 是格林威治标准时间”。这与上面的**不**一样。

另外，如果您查看代码，则会在此*之后*`(EDT)`处理尾随，因此具有优先权。我*认为*第三种情况，最后，简单的处理方式如你所料。**`-0400`**

 **换句话说（在我看来，从扫描代码来看）该`GMT-0400`表单正在作为代码文档工作，但不像您期望的那样。*那条线不等同于其他两条。*

我不知道为什么代码会这样工作；我只是报告我读到的。

最后，请注意，该代码中的一般方法是逐块处理整个日期字符串，将不同的逻辑应用于不同的位置。没有太多的检查来确保不同地方的逻辑是一致的（因此*第一行中明显的矛盾不会引发错误*）。就个人而言，我更喜欢使用 python 自己的日期解析例程的库，但尝试不同的格式字符串 - 我怀疑这会更可靠（但可能不太灵活）。

**更新**我已经忘记了这篇文章，但是在写完这个回复后不久，我写了[简单的日期](https://pypi.python.org/pypi/simple-date)来处理时区的解析。它采用了一种更像我所说的我更喜欢的方法 - 它不是试图变得聪明，而是在 pytz 数据库中搜索匹配项。**

# android - Android - 如果里面有一个 listView，我怎样才能让整个页面滚动？

> ID：10575922
> 
> 赞同：1
> 
> 时间：2012-05-13T23:08:18.843
> 
> 标签：android, android-layout

现在我有这个布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

<ScrollView
      android:layout_width="fill_parent"
      android:layout_height="fill_parent" >    

<LinearLayout 
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >        
<TextView
    android:id="@+id/view_name"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Business:"
    />         

<!--  
<TextView
    android:id="@+id/problem_name"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Loading..."
    />
    -->       

<TextView
    android:id="@+id/business_privacy"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Loading..."
    />    

    <Button
    android:id="@+id/learn"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop ="5dp"
    android:text="Learn About Business Topics Below"
    android:textColor="@color/light_best_blue"
    />    

    <ListView
    android:id="@android:id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="20px" >        

    </ListView>

    <Button
    android:id="@+id/extra_help"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop ="5dp"
    android:text="If You Need Help Planning"
    android:textColor="@color/light_best_blue"
    />             

</LinearLayout>

</ScrollView>

</LinearLayout> 
```

但它显示了一个损坏的布局。

我试图做的是使用 ListView 加载项目列表，然后在其下方添加一个按钮。

我怎么能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T23:13:09.200

如果不发生奇怪的事情，您不能嵌套可在同一方向滚动的视图。但是，您可以将页眉和页脚视图添加到列表视图，这应该会产生相同的效果。

# php - 从值等于的二维数组中删除数组

> ID：10575923
> 
> 赞同：0
> 
> 时间：2012-05-13T23:08:21.457
> 
> 标签：php, arrays

我有以下数组结构：

```
 0 => 
    array
      'all_sessions_available' => boolean true
      'all_sessions_unavailable' => boolean false
  ....
  22 => 
    array
      'all_sessions_available' => boolean false
      'all_sessions_unavailable' => boolean true 
```

我正在尝试删除完整的数组元素 if `all_sessions_unavailable`= true

我有以下代码：

```
for ($i = 0; $i <= count($processData); $i++) {
    if ($processData[$i]['all_sessions_unavailable'] === true) {
        unset($processData[$i]);
    }
} 
```

但是，它会删除除最后一个数组之外的所有数组（`22`在这种情况下，如果有任何区别，它恰好是整个数组中的最后一个数组）

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:22:00.133

I think it is changing the indexes as it unsets so instead do

```
 for($i=count($processData);$i>=0;$i--) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T23:24:57.137

An alternative approach for PHP 5.3+:

```
$processData = array_filter($processData,
                            function ($i) { return !$i['all_sessions_unavailable']; }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T23:25:36.247

```
foreach($processData as $index=>$session){
    if($session['all_sessions_unavailable']){
        unset($processData[$index]);
    }
} 
```

为什么不直接使用`foreach()`，它可能是 PHP 中最好的功能之一...

此外，除非`all_sessions_unavailable`可能包含布尔值以外的值，否则您不必将其与精确的`true`.

# ajax - div内的Ajax响应

> ID：10575928
> 
> 赞同：13
> 
> 时间：2012-05-13T23:10:01.347
> 
> 标签：ajax, jquery

我试图在 div 中显示 ajax 响应的值，为此我在我的视图文件中有以下代码。

```
<script type="text/javascript" src="MY LINK TO JQUERY"></script>

<script  type="text/javascript">
     $(function(){ // added
     $('a.vote').click(function(){
         var a_href = $(this).attr('href');

     $.ajax({
            type: "POST",
            url: "<?php echo base_url(); ?>contents/hello",
            data: "id="+a_href,
            success: function(server_response){
                             if(server_response == 'success'){
                                  $("#result").html(server_response); 
                             } 
                             else{
                                  alert('Not OKay');
                                 }

                      }
  });   //$.ajax ends here

  return false
    });//.click function ends here
  }); // function ends here
 </script>

  <a href="1" title="vote" class="vote" >Up Vote</a>
  <br>
  <div class="result"></div> 
```

我的控制器（ajax 向其发送值）：

```
function hello() {
              $id=$this->input->post('id');
              echo $id;
             } 
```

现在我要实现的是`<div class="result"></div>`在我的视图文件中获取 server_response 值（从控制器发送的值）。

我已经尝试了以下代码，但它没有显示 div 内的值。

你能告诉我问题出在哪里吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T23:17:08.170

The problem is that you have mixed arguments of [Ajax `success` handler](http://api.jquery.com/jQuery.ajax/). First goes `data` which your script gives back, then goes `textStatus`. Theoretically it can be "timeout", "error", "notmodified", "success" or "parsererror". However, in `success` textStatus will always be successful. But if you need to add `alert` on error you can add `error` handler. And yes, change selector in $("#result") to class. So corrected code may look like this:

```
$.ajax({
    type: "POST",
    url: "<?php echo base_url(); ?>contents/hello",
    data: "id=" + a_href,
    success: function(data, textStatus) {
        $(".result").html(data);    
    },
    error: function() {
        alert('Not OKay');
    }
});​ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-13T23:13:15.843

```
success: function(server_response) {
        $(".result").html(server_response);
}​

<div class="result"></div> // result is the class 
```

`.result`选择器不应该`#result`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T23:12:38.613

尝试更改`<div class="result"></div>`为`<div id="result"></div>`，因为这是您在 ajax 成功函数中引用的内容

`$("#result").html(server_response);`

# mongodb - Mongo DB 删除字段和值

> ID：10575933
> 
> 赞同：6
> 
> 时间：2012-05-13T23:10:54.857
> 
> 标签：mongodb

在 mongo shell 中，我将如何删除所有出现 `"id" : "1"`的字段值总是不同的。我会使用 $unset 运算符吗？那会删除值和字段吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-13T23:47:20.923

你是说删除所有出现的字段，对吗？如果是这样，那么它应该是这样的：

```
db.collection.update( 
    { id: { $exists: true } },  // criteria
    { $unset: { id: 1 } },      // modifier
    false,                      // no need to upsert
    true                        // multi-update
); 
```

# c++ - 矩阵类型的变换矩阵乘法，C++

> ID：10575934
> 
> 赞同：1
> 
> 时间：2012-05-13T23:11:02.397
> 
> 标签：c++, function, pointers, matrix, multiplication

从理论上讲，让我们假设我们要对 3D 齐次 (4x4) 变换矩阵（平移、旋转、缩放）的每个不同组合以及这些组合的每个可能结果（平移-旋转、平移-缩放）进行硬编码矩阵乘法，缩放旋转）...

假设我们要像这样处理矩阵乘法，每个矩阵类型组合都有一个不同的函数，其中每个矩阵都有一个额外的变量（类型），并且要使用的特定函数在运行时确定（使用函数指针数组）。如果我们应用这种矩阵乘法，理论上它是否会比基本的标准 4x4 齐次矩阵乘法更快（这仍然比通用 4x4 矩阵乘法更快）？

我现在正在做这个，编码有点地狱。最后，我将根据标准矩阵乘法对其进行测试，并比较结果。我只是想看看其他人认为结果可能是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:18:19.773

我认为一个更好的主意是只存储对象的位置和方向而不是整个矩阵。您只计算矩阵以进行渲染，在所有转换之后。通过添加平移（用于位置）和乘以四元数（用于方向）来完成转换。

# python - 具有异步响应的扭曲 http 服务器，其中请求必须等待数据可用或超时

> ID：10575935
> 
> 赞同：3
> 
> 时间：2012-05-13T23:11:10.370
> 
> 标签：python, twisted, twisted.web

我正在尝试编写一个简单的 http 服务器来处理在数据结构中查找响应或超时的异步请求：

1.  请求到达
2.  当时间 < 超时检查 responseCollector 的响应（使用 requestId 作为键）
3.  如果响应，返回它
4.  如果超时，则返回超时消息

我是扭曲的新手，想知道做异步响应的最佳方法是什么。我查看了[一些扭曲的 Deferred 文档](http://ezyang.com/twisted/defer2.html)和[callLater](http://twistedmatrix.com/documents/current/web/howto/web-in-60/asynchronous.html)，但我不清楚我到底应该做什么。现在我使用 deferToThread 运行一个阻塞方法并等待超时过去。我的延迟方法出现字符串不可调用错误：

```
Unhandled error in Deferred:
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/threading.py", line 497, in __bootstrap
    self.__bootstrap_inner()
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/threading.py", line 522, in __bootstrap_inner
    self.run()
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/threading.py", line 477, in run
    self.__target(*self.__args, **self.__kwargs)
--- <exception caught here> ---
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/twisted/python/threadpool.py", line 210, in _worker
    result = context.call(ctx, function, *args, **kwargs)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/twisted/python/context.py", line 59, in callWithContext
    return self.currentContext().callWithContext(ctx, func, *args, **kw)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/twisted/python/context.py", line 37, in callWithContext
    return func(*args,**kw)
exceptions.TypeError: 'str' object is not callable 
```

这是我的代码：

```
from twisted.web import server, resource
from twisted.internet import reactor, threads
import json
import time

connectedClients = {}
responseCollector = {}

# add fake data to the collector
class FakeData(resource.Resource):
    isLeaf = True

    def render_GET(self, request):
        request.setHeader("content-type", "application/json")
        if 'rid' in request.args and 'data' in request.args:
            rid = request.args['rid'][0]
            data = request.args['data'][0]
            responseCollector[str(rid)] = data
            return json.dumps(responseCollector)
        return "{}"

class RequestHandler(resource.Resource):
    isLeaf = True

    def render_GET(self, request):
        #request.setHeader("content-type", "application/json")

        if not ('rid' in request.args and and 'json' in request.args):
            return '{"success":"false","response":"invalid request"}'

        rid = request.args['rid'][0]
        json = request.args['id'][0]

        # TODO: Wait for data to show up in the responseCollector with same rid
        # as our request without blocking other requests OR timeout
        d = threads.deferToThread(self.blockingMethod(rid))
        d.addCallback(self.ret)
        d.addErrback(self.err)

    def blockingMethod(self,rid):
        timeout  = 5.0
        timeElapsed = 0.0
        while timeElapsed<timeout:
            if rid in responseCollector:
                return responseCollector[rid]
            else:
                timeElapsed+=0.01
                time.sleep(0.01)
        return "timeout"

    def ret(self, hdata):
        return hdata

    def err(self, failure):
        return failure

reactor.listenTCP(8080, server.Site(RequestHandler()))
reactor.listenTCP(9080, server.Site(FakeData()))
reactor.run() 
```

发出请求（目前不返回任何有用的东西）：

```
http://localhost:8080/?rid=1234&json={%22foo%22:%22bar%22} 
```

添加一些假数据以用于请求：

```
http://localhost:9080/?rid=1234&data=foo 
```

## 更新了工作版本

```
from twisted.web import server, resource
from twisted.internet import reactor, threads
import json
import time

connectedClients = {}
responseCollector = {}

# add fake data to the collector
class FakeData(resource.Resource):
    isLeaf = True

    def render_GET(self, request):
        request.setHeader("content-type", "application/json")
        if 'rid' in request.args and 'data' in request.args:
            rid = request.args['rid'][0]
            data = request.args['data'][0]
            responseCollector[str(rid)] = data
            return json.dumps(responseCollector)
        return "{}"

class RequestHandler(resource.Resource):
    isLeaf = True

    def render_GET(self, request):

        if not ('rid' in request.args and 'data' in request.args):
            return '{"success":"false","response":"invalid request"}'

        rid = request.args['rid'][0]
        json = request.args['data'][0]

        # TODO: Wait for data to show up in the responseCollector with same rid
        # as our request without blocking other requests OR timeout
        d = threads.deferToThread(self.blockingMethod,rid)
        d.addCallback(self.ret, request)
        d.addErrback(self.err)

        return server.NOT_DONE_YET

    def blockingMethod(self,rid):
        timeout  = 5.0
        timeElapsed = 0.0
        while timeElapsed<timeout:
            if rid in responseCollector:
                return responseCollector[rid]
            else:
                timeElapsed+=0.01
                time.sleep(0.01)
        return "timeout"

    def ret(self, result, request):
        request.write(result)
        request.finish()

    def err(self, failure):
        return failure

reactor.listenTCP(8080, server.Site(RequestHandler()))
reactor.listenTCP(9080, server.Site(FakeData()))
reactor.run() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T01:55:26.860

在 render_GET() 中，您应该返回 twisted.web.server.NOT_DONE_YET。您应该将请求对象传递给 ret 方法： d.addCallback(self.ret, request)

然后在 ret(request) 中，您应该使用 request.write(hdata) 写入异步数据并使用 request.finish() 关闭连接。

```
def ret(self, result, request):
    request.write(result)
    request.finish() 
```

一些信息来自：[http ://twistedmatrix.com/documents/current/web/howto/using-twistedweb.html](http://twistedmatrix.com/documents/current/web/howto/using-twistedweb.html)

> 当 Twisted Web 找到一个叶资源对象来处理 Web 请求时，就会发生资源渲染。Resource 的 render 方法可以做各种事情来产生将被发送回浏览器的输出：
> 
> *   返回一个字符串
> *   请求一个 Deferred，返回 server.NOT_DONE_YET，稍后在 Deferred 的回调中调用 request.write("stuff") 和 request.finish()。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T12:40:20.903

想想您的示例中这两个版本的代码行之间的区别：

```
d = threads.deferToThread(self.blockingMethod(rid)) 
```

对比

```
d = threads.deferToThread(self.blockingMethod, rid) 
```

阅读[API 文档](http://twistedmatrix.com/documents/current/api/twisted.internet.threads.html#deferToThread)，`deferToThread`或者阅读一些关于函数对象的 Python 文档（python.org 文档没有很好地涵盖这一点，但很多第三方文档可以）。

# android - 用户行走折线

> ID：10575952
> 
> 赞同：2
> 
> 时间：2012-05-13T23:13:17.460
> 
> 标签：android

我正在尝试在用户行走时从 Android 地图中创建一条折线 下面是我的代码。但我只是从当前位置到其他地方得到一条直线。

```
public class Map extends MapActivity {

private MapController mapController;
private MapView mapView;
private LocationManager locationManager;

private MyLocationOverlay myLocationOverlay;
 GeoPoint geoPoint = null;
 GeoPoint despoint = null;
 int latitude;
 int longitude;
 GeoPoint srcGeoPoint;
 public HelloItemizedOverlay routeOverlay;

public void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    setContentView(R.layout.main2); // bind the layout to the activity
    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(false);
    mapController = mapView.getController();
    mapController.setZoom(14); // Zoon 1 is world view
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 2000,
            2, new GeoUpdateHandler());
    Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
     if(location != null)                                
        {
             latitude = (int) (location.getLatitude() * 1E6);
            longitude = (int) (location.getLongitude() * 1E6);
        }  
      srcGeoPoint = new GeoPoint(latitude, latitude); 
      geoPoint = srcGeoPoint;
    myLocationOverlay = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(myLocationOverlay);
    mapView.getController().setZoom(15);
    //mapController.setCenter(geoPoint);
    //mapView.getOverlays().add(new HelloItemizedOverlay(srcGeoPoint, srcGeoPoint));

}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

public class GeoUpdateHandler implements LocationListener {

    @Override
    public void onLocationChanged(Location location) {

        int lat = (int) (location.getLatitude() * 1E6);
        int lng = (int) (location.getLongitude() * 1E6);
        GeoPoint changepoint = new GeoPoint(lat, lng); 

        mapView.getOverlays().add(new HelloItemizedOverlay(srcGeoPoint,changepoint));

    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
}

@Override
protected void onResume() {
    super.onResume();
    myLocationOverlay.enableMyLocation();
    myLocationOverlay.enableCompass();
}

@Override
protected void onPause() {
    super.onResume();
    myLocationOverlay.disableMyLocation();
    myLocationOverlay.disableCompass();
}} 
```

覆盖类

```
public class HelloItemizedOverlay extends Overlay {

 private GeoPoint gp1;
    private GeoPoint gp2;

public HelloItemizedOverlay(GeoPoint gp1, GeoPoint gp2) {
    this.gp1 = gp1;
    this.gp2 = gp2;
}
@Override
public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
        long when) {
     Projection projection = mapView.getProjection();
        if (shadow == false) {

            Paint paint = new Paint();
            paint.setAntiAlias(true);
            Point point = new Point();
            projection.toPixels(gp1, point);
            paint.setColor(Color.BLUE);
            Point point2 = new Point();
            projection.toPixels(gp2, point2);
            paint.setStrokeWidth(2);
            canvas.drawLine((float) point.x, (float) point.y, (float) point2.x,
                    (float) point2.y, paint);
        }
        return super.draw(canvas, mapView, shadow, when);
    } } 
```

谁能帮我在用户步行时画一条线。上面只是从当前位置画一条线到某个地方

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-29T09:25:41.497

我试图创建一个方法：

- 获得一个新的地理点

- 将其添加到道路上

- 删除之前的道路并显示新的道路，然后每 10 秒调用一次
，这就是我的编码方式：

```
 public void scheduleReceiveLocation(final GeoPoint newPosition) {
             final int TEN_SECONDS = 10000;
            handler.postDelayed(new Runnable() {
                public void run () {
//remove previous point
                    waypoints.remove(1); 
//delete the previous road
                    map.getOverlays().remove(0);
//add the new GeoPoint 
                    waypoints.add(1,newPosition);
                    // draw the new road with the new position
                    new UpdateRoadTask().execute(waypoints);

                 // this method will contain your almost-finished HTTP calls
                    handler.postDelayed(this, TEN_SECONDS);
                }
            }, TEN_SECONDS);
        } 
```

然后打电话`handler.removeCallbacksAndMessages(null);`停止

希望有帮助

# ios - NSDictionary writeToFile 编码仅在 UTF-8 中？

> ID：10575953
> 
> 赞同：0
> 
> 时间：2012-05-13T23:13:17.547
> 
> 标签：ios, xcode, sdk, character-encoding, nsdictionary

通过将 a 放入`NSDictionary`文件，我得到一个 UTF-8 编码的 XML 文件。我需要将数据写入`NSISOLatin1StringEncoding`. `NSDictionary`只有UTF-8吗？如何实现我的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:39:07.567

您确定需要编码为 ISO Latin-1 的文件吗？除了某种形式的 Unicode 之外，所有编码的问题在于它们不能代表所有可能的字符。

编码肯定是您遇到的最少的问题。字典的文件表示是一个属性列表文件。任何需要 Latin-1 编码的代码都不太可能理解这种格式。事实上，格式并不能保证。它甚至不能保证是 XML 或文本的。属性列表可能是二进制的。

如果您想与将使用除 Cocoa 的属性列表实现之外的任何东西的程序交换数据，您应该以独立于 Apple 的属性列表格式定义的格式手动写出字典的内容。

而且，是的，如果 Cocoa 确实将属性列表写为 XML，那么它将是 UTF-8 编码的。

# ruby - 如何将页面添加到 RDoc？

> ID：10575954
> 
> 赞同：2
> 
> 时间：2012-05-13T23:13:47.897
> 
> 标签：ruby, rdoc

Noob 在这里试图找出将页面添加到我的 RDoc 文档的简单任务。如果我这样做`rake doc:app`并查看页面，则会有一个侧边栏显示“页面”，其中列出了 README_FOR_APP。我要做的就是创建一个名为“Cheatsheet”的页面，该页面将出现在“Pages”下。如何创建文档页面并告诉 RDoc 包含新页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T23:39:15.860

IMO 这有点令人费解。这是我使用的参考资料：

*   [http://rake.rubyforge.org/classes/Rake/RDocTask.html](http://rake.rubyforge.org/classes/Rake/RDocTask.html)
*   [如何重命名或移动 Rails 的 README_FOR_APP](https://stackoverflow.com/questions/2068639/how-to-rename-or-move-railss-readme-for-app)

简而言之：

从您的 rails 库目录中获取“app”任务，例如我使用以下方法进行测试：

```
~/.rvm/gems/ruby-1.9.2-p0@foo/gems/railties-3.0.9/lib/rails/tasks/documentation.rake 
```

您需要的部分（大约）如下所示：

```
namespace :doc do
  def gem_path(gem_name)
    path = $LOAD_PATH.grep(/#{gem_name}[\w.-]*\/lib$/).first
    yield File.dirname(path) if path
  end

  RDocTaskWithoutDescriptions.new("app2") { |rdoc|
    rdoc.rdoc_dir = 'doc/app'
    rdoc.template = ENV['template'] if ENV['template']
    rdoc.title    = ENV['title'] || "Rails Application Documentation"
    rdoc.options << '--line-numbers' << '--inline-source'
    rdoc.options << '--charset' << 'utf-8'
    rdoc.rdoc_files.include('doc/*_FOR_APP') # Modified this line
    rdoc.rdoc_files.include('app/**/*.rb')
    rdoc.rdoc_files.include('lib/**/*.rb')
  }
end 
```

将它放在您应用程序`lib/tasks`目录中的一个`.rake`文件中，例如`doc2.rake`.

Update the task name if you want to keep the original, e.g., `"app2"`.

Update the `"doc/README_FOR_APP"` string to a wider pattern, or add new file(s) to process.

Create `doc/Cheatsheet_FOR_APP` and the new `rake doc:app2` task will pick it up.

# jquery - 限制LI数量并添加更多链接

> ID：10575957
> 
> 赞同：0
> 
> 时间：2012-05-13T23:14:38.760
> 
> 标签：jquery, limit

我正在动态创建多个列表，需要首先将其限制为 5，然后有一个“更多”链接，该链接应该取自最近的带有 .parentcat 类的标签。

这是我到目前为止所拥有的......

HTML/JQuery

```
<h2><a class="parentcat" title="" href="#">Heading</a></h2>
<ul class="subcat">
      <li><a href="#">Link 1</a></li>
      <li><a href="#">Link 2</a></li>
      <li><a href="#">Link 3</a></li>
      <li><a href="#">Link 4</a></li>
      <li><a href="#">Link 5</a></li>
</ul>

$(function () {
    var link = ($(this).find('a.parentcat').attr('href'));

    $("ul.subcat").each(function () {
        $("li:gt(5)", this).hide(); /* :gt() is zero-indexed */
        $("li:nth-child(6)", this).after("<li class='more'><a href='#'>More...</a></li>"); /* :nth-child() is one-indexed */
    });
}); 
```

这限制了显示的 LI 的数量，但变量只是找到了许多 a.parentcat 标记中的第一个，它应该找到最接近 UL 的 a.parentcat。也可能是一个非常愚蠢的问题，我将变量放入 .after() 我所做的所有尝试都失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:22:33.093

You need to retrieve the URL inside the `each` loop of course. Otherwise the `.attr()` will always use the first element in the jQuery object.

```
$("ul.subcat").each(function () {
    var link = $(this).prev('h2').find('a.parentcat').attr('href');
    $("li:gt(5)", this).hide(); /* :gt() is zero-indexed */
    $("li:nth-child(6)", this).after("<li class='more'><a href='#'>More...</a></li>"); /* :nth-child() is one-indexed */
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T23:25:12.810

您可以使用`each`循环并将所有`href`s 存储在一个数组中：

```
var links = [];
$('a.parentcat').each(function(i, v){
   links[i] = $(this).attr('href');
}) 
```

# javascript - 使用 cookie 进行身份验证和 nonce 的 SSL 的 JSON API 通常是安全的吗？

> ID：10575959
> 
> 赞同：3
> 
> 时间：2012-05-13T23:15:05.570
> 
> 标签：javascript, json, security, api, rest

如果我构建了一个 SSL 的 API，它使用 cookie 中保存的会话 ID 进行身份验证，添加一个随机数作为查询参数，并始终以 JSON“对象”响应进行响应（而不是带有回调的 JSONP 样式响应） ，一般来说它是否安全，特别是针对 XSRF？

使用此类 API 的目的是使其仅可用于我自己域中的页面，并且可以通过此 API 自由公开私人数据（例如用户名和电子邮件）（但不能被其他域使用）——并保留为团队中的开发人员提供合理的简单性。

让我至少分享一下我对这种方法的理解，以及为什么我认为它是安全的。*如有错误请*指教！：

*   放置在我们网站的第 3 方域上的`<script>`标签会发送我的 cookie，但无法解析 JSON 对象响应（[并且响应总是故意是顶层的 JSON 对象](https://stackoverflow.com/questions/395592/json-security-best-practices)）。此外，我需要确保影响服务器上状态的 API 调用都受到非 GET 方法访问的保护，因为`<script>`标签必须使用 GET，因此不能通过尝试调用改变状态的调用而导致破坏（换句话说，就 HTTP 方法而言，API 将遵循 REST）。另外，我故意不支持 JSONP，因为它会是一个安全漏洞。
*   用于劫持 cookie（会话）的中间人不是问题，因为我使用的是带有有效证书的 SSL。
*   重放攻击是一个暂时受限的问题，因为使用 nonce 将限制一个 HTTPS 请求的重放可以发送多长时间，因为服务器将确保 API 调用仅在一小段时间内有效。典型的随机数验证方式。
*   XMLHttpRequest 不能进行跨域调用，所以它不能从我的站点请求任何东西。
*   CORS（跨域资源共享）并不重要，因为我没有 crossdomain.xml 文件或任何其他与 HTML 5 相关的跨域支持广告。
*   3rd-party 站点中的 iframe 无关紧要，因为即使它可以以图形方式加载我的页面，主机站点也无法访问该 iframe 中的任何数据，并且因为我没有尝试支持跨域 iframe 通信（所以他们可以尝试像人们一样在 iframe URL 上设置 # 以启用跨域 iframe 之间的通信，但我的页面不会响应它）。

**编辑：**`<script>`正如 russau 所说 ，nonce 甚至可以防止跨域 GET 请求（即标签）。在具体考虑这一点时，我喜欢在“POST”API 调用中请求一个本身不受 nonce 保护的 nonce 的想法；应该是只有同一域上的 XmlHTTPRequest 才能生成一个随机数开始。这似乎是一种使 nonce 的生成对开发人员友好的简单方法。（即，对于网站/javascript 开发人员来说，没有任何服务器端 - 只需从您用于开发的同一 API 中请求您的 nonce，并使用该 nonce 发出请求，直到您收到“bad nonce”响应 - 然后询问换一个新的，然后重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:19:06.793

The only attack I can imagine is [*DNS rebinding*](http://en.wikipedia.org/wiki/DNS_rebinding). If your webserver is configured properly (a name-based vhost should be sufficient) you should be pretty safe though.

# unit-testing - 在模拟对象上多次调用 staticExpects

> ID：10575962
> 
> 赞同：2
> 
> 时间：2012-05-13T23:16:16.117
> 
> 标签：unit-testing, cakephp, phpunit

我正在尝试在 cakephp 中为我的控制器编写测试用例，到目前为止，我已经设法模拟了控制器并包含了在我的控制器功能中使用的 auth 组件。问题是我似乎只能调用一次staticExpects，这意味着我只能为一个函数调用定义一个返回值，我不希望这样，我需要在同一个测试用例中多次调用staticExpects。

这是我的代码的一部分。

```
$this->TasksController = $this->generate('Tasks', array(
'components' => array('Session','Auth' => array('User'), ) ));

  $this->TasksController->Auth->staticExpects($this->any())
    ->method('User')
    ->with('userID')
    ->will($this->returnValue(224));
     $this->TasksController->Auth->staticExpects($this->any())
    ->method('User')
    ->with('accID')
    ->will($this->returnValue('some ID here')); 
```

每当我这样做并运行测试时，它都会给我这个错误

方法名称的预期失败等于调用 0 次或多次时 参数 0 调用 AuthComponent::user('userID') 与预期值不匹配。断言两个字符串相等时失败。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:07:27.733

您必须指定何时使用 $this->at(index) 调用静态方法。

```
$this->TasksController->Auth->staticExpects($this->at(1))
    ->method('user')
    ->with('userID')
    ->will($this->returnValue(224));

$this->TasksController->Auth->staticExpects($this->at(2))
    ->method('user')
    ->with('accID')
    ->will($this->returnValue('some ID here')); 
```

如果您不确定何时调用它们，请逐个尝试每个期望，直到错误消息为您提供所谓的

```
--- Expected
+++ Actual
@@ @@
-'userID'
+'accID' 
```

最后一件事，正确的方法名称是“用户”而不是“用户”

# c++ - 制作面向对象的 C 风格回调？

> ID：10575967
> 
> 赞同：6
> 
> 时间：2012-05-13T23:16:58.167
> 
> 标签：c++, liblacewing

我正在使用一个具有如下回调的库：

```
void onReceive (Lacewing::Server &Server, Lacewing::Server::Client &Client,
                char * Data, int Size) {
  /* callback body */
}

Server.onReceive (onReceive); /* to register the handler */ 
```

我希望能够将其包装在一个类中，该类可以决定在收到数据包时要做什么（观察者模式）。

如何使用 C 风格的回调来做到这一点？该库没有定义要继承的接口。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:01:41.370

由于您使用的是 liblacewing，因此每个类都有一个`void * Tag`为用户数据提供的成员：

```
/* class method */

void MyServer::onReceive (Lacewing::Server &Server, Lacewing::Server::Client &Client,
            char * Data, int Size)
{
     /* callback body - this is inside the class */
}

/* global function wraps the class method */

void onReceive (Lacewing::Server &Server, Lacewing::Server::Client &Client,
            char * Data, int Size)
{
    ((MyServer *) Server.Tag)->onReceive (Server, Client, Data, Size);
} 
```

然后：

```
Server.Tag = myServerInstance; /* set the class instance pointer */
Server.onReceive (::onReceive); /* register the global function */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T23:33:17.957

如果我理解正确，你可以用两种不同的方式来做。

假设此回调结构使用 Data 参数允许您将自己的数据传递给回调函数（常见范例），您可以这样做：

```
class MyProcessingClass
{
public:
    MyProcessingClass();
    virtual ~MyProcessingClass();

    // Do whatever processing in this method
    virtual void onReceive(Lacewing::Server &Server, Lacewing::Server::Client &Client);
}

void onReceive (Lacewing::Server &Server, Lacewing::Server::Client &Client,
                char * Data, int Size)
{
    if ( Data != NULL )
    {
        MyProcessingClass *handler = reinterpret_cast<MyProcessingClass *>(Data);
        handler->onReceive( Server, Client );
    }
} 
```

或者，如果您需要处理数据指针而不是“用户数据指针”，那么您可能必须使用单例、某种全局变量或类似的东西。以我的经验，这是使用回调的一种不太常见的方式，希望这不是您要处理的。

```
MyProcessingClass g_Processor;

MyProcessingClass *GetProcessor()
{
    return &g_Processor; // or some other way of getting your instance
}

void onReceive (Lacewing::Server &Server, Lacewing::Server::Client &Client,
                char * Data, int Size)
{
    MyProcessingClass *handler = GetProcessor();
    if ( handler != NULL )
    {
        handler->onReceive( Server, Client );
    }
} 
```

# php - PHP Threading and high-latency file access (eg; FTP)

> ID：10575974
> 
> 赞同：3
> 
> 时间：2012-05-13T23:18:47.267
> 
> 标签：php, multithreading, resources

This is a bit complicated, so please don't jump to conclusions, feel free to ask about anything that is not clear enough.

Basically, I have a websocket server written in PHP. Please note that websocket messages are asynchronous, that is, a response to a request might take a lot of time, all the while the client keeps on working (if applicable).

Clients are supposed to ask the server for access to files on other servers. This can be an FTP service, or Dropbox, for the matter.

Here, please take note of two issues: **connections should be shared and reused** and **the server actually 'freezes' while it does its work**, hence any requests are processed after the server has 'unfrozen'.

Therefore, I thought, why not offload file access (which is what freezes the server) to [PHP threads](http://sourceforge.net/projects/phpthreadlib/)?

The problem here is twofold;

*   how do I make a connection resource in the main thread (the server) available to the sub threads (not possible with the above threading model)?
*   what would happen if two threads end up needing the same resource? It's perfectly fine if one is locked until the other one finishes, but we still need to figure out issue #1.

Perhaps my train of thought is all screwed up, if you can find a better solution, I'm eager to hear it out. I've also had the idea of having a PHP thread hosting a connection resource, but it's pretty memory intensive.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T23:27:46.807

PHP 不支持线程。PHP 的目的是快速响应 Web 请求。这就是构建架构的目的。不同的库尝试做类似线程的事情，但它们通常会导致比它们解决的问题更多的问题。

一般来说，有两种方法可以实现您想要的：

*   将长进程卸载到外部进程。一种常见的方法是使用像 gearman [http://php.net/gearman这样的系统](http://php.net/gearman)
*   使用异步操作。一些流操作等提供“异步”标志或“非阻塞”模式。[http://php.net/stream-set-blocking](http://php.net/stream-set-blocking)

# ruby-on-rails - ruby 脚本中“rake routes”的结果

> ID：10575975
> 
> 赞同：0
> 
> 时间：2012-05-13T23:18:51.367
> 
> 标签：ruby-on-rails, ruby, performance, routes, rake

`rake routes`非常慢（在我的计算机上是 30 秒），但我需要它来制定路由规范。

那么，有没有办法像 rake 路线一样获得所有路线？（或者 rake 路由是如何工作的？）

我使用 Rails 3，我所看到的只是 Rails 3，我在 rails doc 中找不到任何可以使用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T23:44:24.287

`Rails.application.routes.routes.to_a`

`.to_a`是可选的，它只是将其转换为数组。

（我在 中找到了这一行`railties/lib/rails/tasks/routes.rake`）

我像这样使用它： `routes[10].defaults`=>`{:action=>"edit", :controller=>"polls"}`

**编辑**：你可以在这里找到我做路由规范的（相当老套的）方式：[https ://gist.github.com/52ac6d848ce0d9fd52ac](https://gist.github.com/52ac6d848ce0d9fd52ac)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T23:27:53.237

如果您使用的是 RSpec，则可以在测试中使用[路由规范](https://www.relishapp.com/rspec/rspec-rails/v/2-10/docs/routing-specs)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T23:56:42.120

另一种选择是[rake shell](https://github.com/jugyo/rake-sh)；我喜欢它。

# php - 从广义搜索查询中确保正确子类的策略是什么？

> ID：10575979
> 
> 赞同：-1
> 
> 时间：2012-05-13T23:19:40.147
> 
> 标签：php, mysql, oop, design-patterns

这是一个普遍的场景。我有“任务”和“任务事件”。我为每个创建了一个数据库表。我还创建了一个模型来处理从数据库中获取记录。

对于“任务事件”，我有几种类型：已创建、已接受、已评论、已关闭。

目前，我做了一些简单的事情，比如`$task = new Task($task_id);`从数据库中获取任务，并获取该任务`$task_events = new Tasks_Events($task_id);`的事件。然后，我实现了 Iterator 所以我可以做到`foreach($task_events as $e) { ... }`这一切都很好。

但是，我发现我需要一些专门的处理程序来处理一些事件类型。例如，我创建了扩展 Tasks_Events 的 Tasks_Events_Comments，并对 Comment 事件类型进行了一些额外的处理。我现在意识到的是，当我收集事件集合时，我确实需要它们是子类型，因此如果在事件上调用方法，则会调用子类型的正确覆盖。

这是一个简单的例子：

```
class Model {
    public function __construct($search = null) {
        // Hypothetical example, basically query the DB and populate data.
        if (!is_null($search)) { $this->search($search); }
    }
    protected function onAfterUpdate() { }
}

class Tasks_Events extends Model {
    protected function onAfterUpdate() { /* Task Event Specific */ }
}

class Tasks_Events_Comments extends Tasks_Events {
    protected function onAfterUpdate() { /* Task Event Comment Specific */ }
} 
```

然后，一个假设的用例：

```
class Controller {
    public function updateEvent($task_id, $event_id, $params) {
        $task = new Tasks($task_id);
        $task_event = new Tasks_Events($event_id);

        // Some Analysis of Params
        $task_event->status = $new_status;
        $task_event->save();
    }
} 
```

所以，这里是关键。这样做会调用 Tasks_Events onAfterUpdate()...

**我的问题**是，什么是我可以使用的模型、范式、哲学和方法，以便当我有一组任务事件并且我对其中一个事件采取行动时，即使我使用的是基类引用，我也需要拥有子类函数调用。

我真的很喜欢`$e = new Tasks_Events(3); $e->status = 4; $e->save();`我不喜欢的一种解决方案的简单性，就是执行类似`$e = Tasks_Events::Get($id);`Tasks_Events 查询数据库、确定类型、然后执行“切换”并创建要返回的正确类型的操作。

我不喜欢这样的另一个原因是因为我已经建立了模型来做一些很酷的事情，比如`$tasks = new Tasks(array('user_id' => 5, 'status' => Tasks::STATUS_OPEN));`它会构建正确的数据库查询，并填充用户 5 的所有打开的任务。然后我可以做`foreach($tasks as $t) { echo $t->subject; }`等等。所以，我很想能够保持这种系统....但我不确定我是否可以利用子类型的继承。

恐怕我可能需要一个工厂模式，但我希望我可能会遗漏一些东西。

PS如果您能想到更好的标题，请随时更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T23:34:31.593

感谢@Sam Dufel，您的评论让我思考得更深入，我意识到我的设计存在一个重大缺陷。

您对 $task->getEvents() 提出了很好的建议，但我忘记了问题中的一个关键（缺陷？）点。这也可能是我遇到麻烦的原因...

基本上我实现迭代器的方式，getter/setter 可能是问题的根源。因为它遍历原始记录的数组。

然后，假设我在迭代器中的位置 2。调用 $item->status，调用 __get($name) 检查`$this->records[$this->position][$name]`!! 所以，如你所见，我把自己画在一个角落里。即使使用工厂模式，由于我在 Tasks_Events （嗯......模型）中实现迭代器的方式，这也不太有效。

很抱歉打扰大家。谢谢你的想法。

**更新：**我意识到我所做的是将“DAO”与“模型”与“模型集合”结合起来。我要把它们分开。DAO->find() 将返回一个模型集合（它将是可迭代的），而 DAO->findOne() 将返回一个模型。将三者合二为一很方便，但随着我的需求扩大，它的可扩展性不是很好。

# mongodb - 运行 mongo 服务器时出错

> ID：10575983
> 
> 赞同：3
> 
> 时间：2012-05-13T23:21:24.070
> 
> 标签：mongodb

我完全是 mac 的初学者，尝试使用 mongod 打开服务器时出现此错误 10309 Unable to create/open lock file: /data/db/mongod.lock errno:13 Permission denied Is a mongod instance already running?,终止

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-14T12:26:43.267

该错误通常表明锁定文件仍然存在于以前的运行中。这意味着 mongod 进程仍在运行，请检查：

```
ps auxwww | grep mongod 
```

如果未列出，则删除锁定文件并重新启动 mongod。如果它被列出并且没有响应，您可能必须终止该进程（假设您无法连接）。在 kill -9 等之前尝试常规杀戮。

如果该进程不存在，或者您成功杀死它，请删除锁定文件并重新启动 mongod - 如果您启用了日记功能，一切都应该没问题。如果没有，您可能需要 Sean 建议的修复操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-09T18:49:46.657

运行`sudo mongod`，因为您需要具有管理员访问权限。从那里，您只需要输入密码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-14T10:05:50.817

您是否启用了[日记](http://www.mongodb.org/display/DOCS/Journaling)功能？如果没有，并且您的 mongod 实例崩溃了，那么您可能需要执行恢复。在这种情况下，你应该做的是

1.  使用修复开关启动 mongod: `mongod --repair`。它将运行，然后在删除锁定文件后终止。
2.  再次正常启动mongod。

完成此操作后，我强烈建议您`--journal`在启动 mongod 时使用命令行开关启用日记功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T23:28:37.620

如果我记得很久以前，你需要`sudo mkdir /data`：我相信 MongoDB 会假设它需要的基本目录存在并且不会自己创建它。

# javascript - Javascript 电话号码验证 Paratheses 符号

> ID：10575984
> 
> 赞同：0
> 
> 时间：2012-05-13T23:21:38.450
> 
> 标签：javascript, validation

我做了一些搜索，其他人在哪里问这个问题和答案，但没有一个似乎适合我想要做的事情。基本上，我正在验证接受 (123)4567890 作为条目的电话条目。我已经实现了一个接受简单数字字符串（例如 1234567890）和一个带有破折号 123-456-7890 的字符串。我知道我在某些地方犯了一个简单的错误，但我无法弄清楚我做错了什么。

这是有效的破折号形式的电话号码：

```
//Validates phone number with dashes. 
function isTwelveAndDashes(phone) {

    if (phone.length != 12) return false;

    var pass = true;

    for (var i = 0; i < phone.length; i++) {
        var c = phone.charAt(i);

        if (i == 3 || i == 7) {
            if (c != '-') {
                pass = false;
            }
        }
        else {
            if (!isDigit(c)) {
                pass = false;
            }
        }
    }

    return pass;
}​ 
```

这是我无法解决的问题。

```
function isTwelveAndPara(phone) {
    if (phone.length != 12) return false;

    var pass = true;

    for (var i = 0; i < phone.length; i++) {
        var c = phone.charAt(i);

        if (i == 0) {
            if (c != '(') {
                pass = false;
            }
        }

        if (i == 4) {
            if (c != ')') {
                pass = false;
            }
        }
        else {
            if (!isDigit(c)) {
                pass = false;
            }
        }
    }

    return pass;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:24:21.750

你可以很容易地做到这一点`regex`：

```
return !!phone.match(/\(\d{3}\)\d{7}/g) 
```

[**现场演示**](http://jsfiddle.net/gdoron/HBYpF/)

* * *

**更新：**

你没有工作的代码因为你忘记了`else if`：

```
 else if (i == 4) { // Added the "else" on the left. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T23:33:16.973

类似的东西（RegExp 规则）可以确保它匹配任一规则。

```
var numbers = ['(1234567890','(123)4567890','123-456-7890','1234567890','12345678901'];
var rule = /^(\(\d{3}\)\d{7}|\d{3}-\d{3}-\d{4}|\d{10})$/;
for (var i = 0; i < numbers.length; i++) {
    var passed = rule.test(numbers[i].replace(/\s/g,''));
    console.log(numbers[i] + '\t-->\t' + (passed ? 'passed' : 'failed'));
} 
```

**编辑：**

```
function isDigit(num) {
    return !isNaN(parseInt(num))
}
function isTwelveAndPara(phone) {
    if (phone.length != 12) return false;
    for (var i = 0; i < phone.length; i++) {
        var c = phone.charAt(i);
        if (i == 0) {
            if (c != '(') return false;
        } else if (i == 4) {
            if (c != ')') return false;
        } else if (!isDigit(c)) return false;
    }
    return true;
}

// or...

function isTwelveAndPara(phone) {
    if (phone.length != 12 || phone.charAt(0) != '(' || phone.charAt(4) != ')') return false;
    for (var i = 1; i < phone.length, i != 4; i++) {
        if (!isDigit(phone.charAt(i))) return false;
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T23:42:45.847

用 RegEx 检查电话号码肯定是要走的路。这是忽略空格、括号和破折号的验证函数：

```
check_phone(num) {
   return num.replace(/[\s\-\(\)]/g,'').match(/^\+?\d{6,10}$/) != null} 
```

您可以使用第二个正则表达式中的范围来改变接受的位数`{6,10}`。`+`允许领先。

# ios - how to override the swipe gesture in UIWebView?

> ID：10575987
> 
> 赞同：0
> 
> 时间：2012-05-13T23:22:04.423
> 
> 标签：ios, xcode, ios5

all, I'm a newbie on ios development.

I want to implement a right swipe gesture to UIWebView, which should have the action specified by me. However, the when the web page is too large that causes the UIWebView has a scroll bar, then my custom left swipe gesture doesn't work at all. In this case, when I swipe right, then the scroll bar will move, instead of triggering my specified action. Is there any way to disable the scroll bar moving action when I swipe right?

Hope my question is clear to you ... Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:40:39.593

you can disable the whole scroll in the `UIWebView` like this

```
UIScrollView *scroll = [[webView subviews] lastObject];

if([scroll isKindOfClass:[UIScrollView class]])
{
    scroll = (UIScrollView*)scroll;
    [scroll setScrollEnabled:NO];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T23:32:22.247

要么在 webview 上添加一个透明视图，要么创建 UIWebView 的子类并覆盖 touchmethods。

# android - Android：在 ImageView 中由位图确定的框架内绘制

> ID：10575988
> 
> 赞同：0
> 
> 时间：2012-05-13T23:22:23.253
> 
> 标签：android, image-processing, canvas

我想创建一个窗口，用户可以在其中走出图像的边界，但路径仍在继续。

我的活动有此代码

```
public class PaintActivity extends Activity {
PaintView maskView;
ImageView imagen;

Bitmap bitmap;
Bitmap mask;
int bitmapWidth, bitmapHeight;

public int[] getBitmapMinCoords() {
    float[] minCoordF = {0, 0};

    Matrix matriz = imagen.getImageMatrix();
    matriz.mapPoints(minCoordF);

    int[] minCoords = new int[2];
    minCoords[0] = Math.round(minCoordF[0]);
    minCoords[1] = Math.round(minCoordF[1]);

    return minCoords;
}

public int[] getBitmapMaxCoords() {
    float[] maxCoordF = {bitmapWidth, bitmapHeight};

    Matrix matriz = imagen.getImageMatrix();
    matriz.mapPoints(maxCoordF);

    int[] maxCoords = new int[2];
    maxCoords[0] = Math.round(maxCoordF[0]);
    maxCoords[1] = Math.round(maxCoordF[1]);

    return maxCoords;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.paint);

    imagen = (ImageView) findViewById(R.id.image_paint);
    maskView = (PaintView) findViewById(R.id.mask_paint);

    String imagePath = "/sdcard/images/NewOrleans.gif";

    bitmap = BitmapFactory.decodeFile(imagePath);
    imagen.setImageBitmap(bitmap);

    bitmapWidth = bitmap.getWidth();
    bitmapHeight = bitmap.getHeight();

    ViewTreeObserver vto = imagen.getViewTreeObserver();      
    vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {          
         public void onGlobalLayout() {              
            Matrix matrizTransformacion = imagen.getImageMatrix();
            float[] values = new float[9];
            if (matrizTransformacion != null) {
                matrizTransformacion.getValues(values);
                Log.i(PaintActivity.class.toString() + ".globalListener()", "La matriz tiene valores: " + matrizTransformacion.toString() );
            }

            int[] minC = getBitmapMinCoords();
            int[] maxC = getBitmapMaxCoords();

            Log.i("Listener MinCOORDS (0,0)", minC[0] + ", " + minC[1]);
            Log.i("Listener MaxCOORDS (" + bitmapWidth + "," + bitmapHeight + ")", maxC[0] + ", " + maxC[1]);

            Bitmap mapaBits = Bitmap.createBitmap( bitmapWidth, bitmapHeight, Bitmap.Config.ARGB_8888);
            Canvas canvas = new Canvas(mapaBits);

            maskView.layout(minC[0], minC[1], maxC[0], maxC[1]);
            maskView.draw(canvas);
            maskView.refreshDrawableState();

            imagen.getViewTreeObserver().removeGlobalOnLayoutListener(this);        
         }      
    });  

}

Bitmap getMaskBitmap(View view) {

    Matrix matrizTransformacion = imagen.getImageMatrix();
    float[] values = new float[9];
    if (matrizTransformacion != null) {
        matrizTransformacion.getValues(values);
        Log.i(PaintActivity.class.toString() + ".onStart()", "La matriz tiene valores: " + matrizTransformacion.toString() );
    }

    Bitmap mapaBits = Bitmap.createBitmap( Math.round(bitmapWidth*values[0]), Math.round(bitmapHeight*values[4]), Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(mapaBits);

    int[] minCoords = getBitmapMinCoords();
    int[] maxCoords = getBitmapMaxCoords();

    view.layout(minCoords[0], minCoords[1], maxCoords[0], maxCoords[1]);
    view.draw(canvas);

    return mapaBits;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.menu.inpainting_color_selection_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case R.id.inpainting_color_accept_opt:
        ProgressDialog pd = ProgressDialog.show(this, "", "Guardando imagen");

        Bitmap mascara = getMaskBitmap(maskView);

        // GUARDANDO BITMAP EN HDD
        try {
            String filename = "/sdcard/PhotoRestore/mask.png";
            File file = new File(filename);
            FileOutputStream out = new FileOutputStream(file);
            mascara.compress(Bitmap.CompressFormat.PNG, 100, out);
        } catch (Exception e) {
            e.printStackTrace();
        }

        pd.dismiss();

        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}
} 
```

这是我的 PaintView 的代码

```
public class PaintView extends View {

    float previousX = -1;
    float previousY = -1;

    float currentX = -1;
    float currentY = -1;

    PaintActivity activity;

    Path path;
    Paint paintLine = new Paint();

    public PaintView(Context context) {
        super(context);
        init();
    }

    public PaintView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public PaintView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    private void init() {
        path = new Path();

        activity = (PaintActivity) getContext();

        paintLine = new Paint(Paint.ANTI_ALIAS_FLAG);
        paintLine.setStyle(Paint.Style.STROKE);
        paintLine.setStrokeWidth(10);
        paintLine.setColor(Color.GREEN);
        paintLine.setAlpha(150);
    }

    public void onDraw(Canvas canvas) {
        canvas.drawPath(path, paintLine);
    }

    @Override
    public boolean onTouchEvent(final MotionEvent event) {

        currentX = event.getX();
        currentY = event.getY();

            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                path.moveTo(currentX, currentY);
                break;
            case MotionEvent.ACTION_MOVE:
                path.quadTo(previousX, previousY, currentX, currentY);
                break;
            case MotionEvent.ACTION_UP:
                path.quadTo(previousX, previousY, currentX, currentY);
                break;
            }

            previousX = currentX;
            previousY = currentY;

            postInvalidate();

            return true;

    }
} 
```

这是我的 XML 视图

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/image_paint"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:contentDescription="@string/hola" />

    <com.paint.PaintView
        android:id="@+id/mask_paint"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</FrameLayout> 
```

当我按下我在菜单中添加的按钮时，我将图像保存在内存中，屏幕继续在那里，但现在我有了一个边框。远离这个边界，路径继续绘制，但它在黑色表面下被遮挡并且路径没有被切割，这就是我希望在活动开始时发生的事情。

我尝试在活动的“onCreate()”方法中（在全局布局侦听器内）执行相同的操作，但它没有运行。

有人可以帮助我吗？

首先，失去感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:25:02.500

I found the way to solve my problem. Where I need to put the `view.layout()` is inside the `onDraw()` method of the view that I want to be layout resized.

# python - 将字节文件转换为整数 Python

> ID：10575990
> 
> 赞同：-5
> 
> 时间：2012-05-13T23:22:37.683
> 
> 标签：python, int, byte

> **可能重复：**
> [从python中的二进制文件中读取整数](https://stackoverflow.com/questions/1163459/reading-integers-from-binary-file-in-python)

我在这里阅读了类似问题的解决方案：[将字节字符串转换为 int (python)](https://stackoverflow.com/questions/444591/convert-a-string-of-bytes-into-an-int-python)，但我不太确定如何根据需要重新调整它的用途。

我有一个 .bin 文件，它只是一个字节序列。每组 4 个字节代表一个 32 位数字。我正在尝试使用链接问题中描述的 struct 模块将每组 4 个字节转换为整数并将它们打印到新文件中。我怎样才能做到这一点？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:30:16.070

您可能想[在 python 中从文件中读取读取整数](https://stackoverflow.com/questions/1163459/reading-integers-from-binary-file-in-python) 从那个问题来看更加直接。

我没有检查下面的代码，而是按照

```
fin = open("hi.bmp", "rb")
out = open("values.txt","rw")
value = struct.unpack('i', fin.read(4))[0]
out.write("%d\n" % value) # just loop over the 2 last lines
out.close()
fin.close() 
```

如果您想将整数记录为另一个文件中的可读整数，应该可以解决问题。

# eclipse - Eclipse 编辑器不支持 java

> ID：10575994
> 
> 赞同：0
> 
> 时间：2012-05-13T23:23:27.277
> 
> 标签：eclipse, ubuntu

我已经在我的新 ubuntu 12.04 设置上安装了 eclipse。我是通过软件中心安装的。我去创建一个Java项目，但它似乎没有Java开发工具包。我不确定为什么。安装 Eclipse 后我从未见过这种情况。任何想法为什么我不会有任何语言支持？在这一点上，它基本上只是一个笨重的文本编辑器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:52:27.930

您可以直接在eclipse中下载java sdk和开发工具，这应该可以解决您的问题，我之前遇到过同样的问题，这就是我解决它的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:24:14.540

Ubuntu软件中心的默认Eclipse一般需要安装额外的包，多次出现同样的问题。我强烈建议从[这里](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/indigosr2)下载和安装。

# javascript - How to change viewport on iPhone/iPad?

> ID：10575995
> 
> 赞同：3
> 
> 时间：2012-05-13T23:23:59.927
> 
> 标签：javascript, iphone, ios, ipad, html

I have a canvas element that is 608 pixels wide and am trying to get both the iPhone and iPad to zoom-in so that this fills the screen.

I have been experimenting with various values but none seem to work on both devices. Here is what I currently have (works on iPhone but looks small on iPad):

```
<meta name="viewport" content="width=608; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;" /> 
```

How can I achieve this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T04:02:48.793

解决了，需要确保最小和最大比例设置正确，否则会受到限制！

```
<meta name="viewport" content="width=608, maximum-scale=1.5, user-scalable=no" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T23:39:32.353

您可能想尝试：

```
<meta name="viewport" content="initial-scale=1.0; maximum-scale=1.0; width=device-width;"> 
```

或者您可能需要使用 javascript 来获取当前视口比例，这篇文章可能会有所帮助： [http ://menacingcloud.com/?c=viewportScale](http://menacingcloud.com/?c=viewportScale)

# django - How to get Django prefetch_related working?

> ID：10575996
> 
> 赞同：1
> 
> 时间：2012-05-13T23:24:05.280
> 
> 标签：django, django-models, django-views

I am attempting to use the Django `prefetch_related` because of the 1 to many relationship between models `LanguageCode` and `Flag` shown below (I am attempting to display the `flagIconPath`), but I cannot seem to get the `views.py` code correct and I really need some help!

Here is my `views.py` form:

```
from django.shortcuts import render

from app_data.models import RIAchievement

def ri_achievements(request):

  qs = RIAchievement.objects.all().prefetch_related("??????", "????????")

  return render(request, 'index.html',{'qs': qs}) 
```

**What code should I be using to replace the ???'s?**

Here are the fields I am trying to get the django prefetch_related to display:

```
(flag) flagiconpath,
(riachievement) riAchievementTypeUserDescription,
(typeachievement) typeAchievementDescriptionIntl,
(languagecode) languageNameNative,
(flag) flagIconPath,
(languagedetail) languageDetailDescription,
(languagedirection) languageDirectionDescription,
(riusersettings) riUserSettingsDisplayMultipleLanguage,
(typeresumestyle) typeResumeStyleNumber,
(auth_user) id. 
```

Here are my relevant models:

```
class RIAchievement(models.Model):
  riAchievementID = models.AutoField(primary_key=True, db_column="riAchievementID")
  userLanguageVersionID = models.ForeignKey(UserLanguageVersion, db_column="userLanguageVersionID", related_name="riAchievement_userLanguageVersionID")
  typeAchievementID = models.ForeignKey(TypeAchievement, db_column="typeAchievementID", related_name="riAchievement_typeAchievementID")
  riAchievementTypeUserDescription = models.CharField(max_length=255, blank=True, null=True, db_column="riAchievementTypeUserDescription")
  riAchievementDescription = models.TextField(max_length=2000, db_column="riAchievementDescription")
  auth_user_id = models.ForeignKey(auth_user, db_column="auth_user_id", related_name="riAchievement_auth_user_id")
  class Meta:
    db_table="riAchievement"

class TypeAchievement(models.Model):
  typeAchievementID = models.AutoField(primary_key=True, db_column="typeAchievementID")
  languageCodeID = models.ForeignKey(LanguageCode, db_column="languageCodeID", related_name="typeAchievement_languageCodeID")
  typeAchievementDescriptionIntl = models.CharField(max_length=255, db_column="typeAchievementDescriptionIntl")
  typeAchievementDescriptionEng = models.CharField(max_length=255, db_column="typeAchievementDescriptionEng")
  typeAchievementAltID = models.IntegerField(db_column="typeAchievementAltID")
  class Meta:
    db_table="typeAchievement"

class UserLanguageVersion(models.Model):
  userLanguageVersionID = models.AutoField(primary_key=True, db_column="userLanguageVersionID")
  auth_user_id = models.ForeignKey(auth_user, db_column="auth_user_id", related_name="userLanguageVersion_auth_user_id")
  languageCodeID = models.ForeignKey(LanguageCode, db_column="languageCodeID", related_name="userLanguageVersion_languageCodeID")
  class Meta:
    db_table="userLanguageVersion"

class LanguageCode(models.Model):
  languagecodeID = models.AutoField(primary_key=True, db_column="languageCodeID")
  languageCodeDescription = models.CharField(max_length=10, db_column="languageCodeDescription")
  baseLanguageCode = models.CharField(max_length=10, db_column="baseLanguageCode")
  languageNameEng = models.CharField(max_length=255, db_column="languageNameEng")
  altLanguageNameEng = models.CharField(max_length=255, blank=True, null=True, db_column="altLanguageNameEng")
  languageNameNative = models.CharField(max_length=255, db_column="languageNameNative")
  altLanguageNameNative = models.CharField(max_length=255, blank=True, null=True, db_column="altLanguageNameNative")
  iso639_1 = models.CharField(max_length=10, blank=True, null=True, db_column="iso639_1")
  iso639_2T = models.CharField(max_length=10, db_column="iso639_2T")
  iso639_2B = models.CharField(max_length=10, db_column="iso639_2B")
  iso639_X = models.CharField(max_length=10, db_column="iso639_X")
  languageDirectionID = models.ForeignKey(LanguageDirection, default=1, db_column="languageDirectionID", related_name="languageCode_languageDirectionID")
  class Meta:
    db_table="languageCode"

class Flag(models.Model):
  flagID = models.AutoField(primary_key=True, db_column="flagID")
  languageCodeID = models.ForeignKey(LanguageCode, db_column="languageCodeID", related_name="flag_languageCodeID")
  flagIconPath = models.CharField(max_length=255, db_column="flagIconPath")
  flagDescription = models.CharField(max_length=255, db_column="flagDescription")
  flagInformation = models.CharField(max_length=255, db_column="flagInformation")
  class Meta:
    db_table="flag"

class auth_user(models.Model):
  auth_user_id = models.AutoField(primary_key=True, db_column="id")
  username = models.CharField(max_length=30, unique=True, db_column="username")
  first_name = models.CharField(max_length=30, db_column="first_name")
  last_name = models.CharField(max_length=30, db_column="last_name")
  email = models.CharField(max_length=75, db_column="email")
  password = models.CharField(max_length=128, db_column="password")
  is_staff = models.BooleanField(db_column="is_staff")
  is_active = models.BooleanField(db_column="is_active")
  is_supervisor = models.BooleanField(db_column="is_supervisor")
  last_login = models.DateTimeField(db_column="last_login")
  date_joined = models.DateTimeField(db_column="date_joined")
  class Meta:
    db_table="auth_user"

class RIUserSettings(models.Model):
  riUserSettingsID = models.AutoField(primary_key=True, unique=True, db_column="riUserSettingsID")
  riUserSettingsPrimaryLanguageCodeID = models.ForeignKey(LanguageCode, db_column="riUserSettingsPrimaryLanguageCodeID", related_name="riUserSettings_riUserSettingsPrimaryLanguageCodeID")
  riUserSettingsDisplayPrimaryLanguage = models.BooleanField(default=False, db_column="riUserSettingsDisplayPrimaryLanguage")
  riUserSettingsDisplayMutipleLanguage = models.BooleanField(default=False, db_column="riUserSettingsDisplayMutipleLanguage")
  riUserSettingsDisplaySingleLanguage = models.BooleanField(default=False, db_column="riUserSettingsDisplaySingleLanguage")
  riUserSettingsPrimaryVirtualKeyboardLanguageVersionID = models.ForeignKey(UserLanguageVersion, db_column="riUserSettingsPrimaryVirtualKeyboardLanguageVersionID", related_name="riUserSettings_riUserSettingsPrimaryVirtualKeyboardLanguageVersionID")
  riUserSettingsDisplayPrimaryVirtualKeyboard = models.BooleanField(default=False, db_column="riUserSettingsDisplayPrimaryVirtualKeyboard")
  riUserSettingsDisplayRIFormattingPreview = models.BooleanField(default=True, db_column="riUserSettingsDisplayRIFormattingPreview")
  typeResumeStyleID = models.ForeignKey(TypeResumeStyle, db_column="typeResumeStyleID", related_name="riUserSettings_typeResumeStyleID")
  auth_user_id = models.ForeignKey(auth_user, db_column="auth_user_id", related_name="riUserSettings_auth_user_id")
  class Meta:
    db_table="riUserSettings"

class LanguageDetail(models.Model):
  languageDetailID = models.AutoField(primary_key=True, unique=True, db_column="languageDetailID")
  languageCodeID = models.ForeignKey(LanguageCode, db_column="languageCodeID", related_name="languageDetail_languageCodeID")
  nativeLanguageCodeID = models.ForeignKey(LanguageCode, db_column="nativeLanguageCodeID", related_name="languageDetail_nativeLanguageCodeID")
  languageDetailDescriptionIntl = models.CharField(max_length=255, db_column="languageDetailDescriptionIntl")
  languageDetailDescriptionEng = models.CharField(max_length=255, db_column="languageDetailDescriptionEng")
  languageDetailDescriptionNative = models.CharField(max_length=255, db_column="languageDetailDescriptionNative")
  displayCapitaliseCountryName = models.BooleanField(default=False, db_column="displayCapitaliseCountryName")
  languageDirectionID = models.ForeignKey(LanguageDirection, default=1, db_column="languageDirectionID", related_name="languageDetail_languageDirectionID")
  flagID = models.ForeignKey(Flag, db_column="flagID", related_name="languageDetail_FlagID")
  languageDetailAltID = models.IntegerField(db_column="languageDetailAltID")
  class Meta:
    db_table="languageDetail"

class LanguageDirection(models.Model):
  languageDirectionID = models.AutoField(primary_key=True, db_column="languageDirectionID")
  languageDirectionDescription = models.CharField(max_length=20, db_column="languageDirectionDescription")
  languageDirDescription = models.CharField(max_length=20, db_column="languageDirDescription")
  textAlign = models.CharField(max_length=20, db_column="textAlign")
  oppositeLanguageDirectionDescription = models.CharField(max_length=20, db_column="oppositeLanguageDirectionDescription")
  oppositeLanguageDirDescription = models.CharField(max_length=20, db_column="oppositeLanguageDirDescription")
  oppositeTextAlign = models.CharField(max_length=20, db_column="oppositeTextAlign")
  class Meta:
    db_table="languageDirection"

class TypeResumeStyle(models.Model):
  typeResumeStyleID = models.AutoField(primary_key=True, db_column="typeResumeStyleID")
  languageCodeID = models.ForeignKey(LanguageCode, db_column="languageCodeID", related_name="typeResumeStyle_languageCodeID")
  typeResumeStyleNumber = models.IntegerField(db_column="typeResumeStyleNumber")
  typeResumeStyleNameIntl = models.CharField(max_length=255, db_column="typeResumeStyleNameIntl")
  typeResumeStyleNameEng = models.CharField(max_length=255, db_column="typeResumeStyleNameEng")
  typeResumeStyleDescriptionIntl = models.CharField(max_length=255, db_column="typeResumeStyleDescriptionIntl")
  typeResumeStyleDescriptionEng = models.CharField(max_length=255, db_column="typeResumeStyleDescriptionEng")
  class Meta:
    db_table="typeResumeStyle" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:13:39.977

啊，我的眼睛。请为您的字段提供适当的 Pythonic 名称。特别是因为您已经在使用该`db_column`属性，您可以保持数据库原样，并提供我们可以实际读取的字段名称。

特别是，您的 ForeignKey 字段不应称为 fooId：底层数据库字段是一个 ID，但该字段不是，它是对实际 FK 模型的引用。

不过，要回答您的问题，您提到的所有 FK 都是向前引用，而不是向后引用。所以你需要在这里使用`select_related`, not `prefetch_related`。