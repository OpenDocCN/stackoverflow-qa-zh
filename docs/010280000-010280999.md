# StackOverflow 问答 10280000-10280999

# c# - 如何创建 SendMessage WM_KEYDOWN 的 lParam

> ID：10280000
> 
> 赞同：7
> 
> 时间：2012-04-23T11:51:56.477
> 
> 标签：c#, interop, pinvoke

我正在尝试使用[SendMessage](http://msdn.microsoft.com/en-us/library/ms644950%28VS.85%29.aspx)发送击键，但并不真正了解 lParam。我知道不同的位代表每个参数，并且它们需要按顺序排列。

我已经阅读[了这个问题](https://stackoverflow.com/questions/1169732/wm-keydown-how-to-use-it)和[这个](http://msdn.microsoft.com/en-us/library/ms646280%28VS.85%29.aspx)，所以我知道这些位需要按哪个顺序排列，我只是不知道该怎么做......

**我将如何创建以下 lParam？**

```
repeat cound = 0,
scan code = {Don't know what this is?},
extended key = 1,
reserved = 0,
context code = 0,
previous key state = 1,
transition state = 0 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T13:03:02.853

我意识到[AutoIT](http://www.autoitscript.com)具有我需要的功能，因此查看了[源](http://www.autoitscript.com/autoit3/files/archive/autoit/autoit-v3.1.0-src.exe)文件 sendKeys.cpp 并找到了该功能的以下 C++ 代码片段，它很容易翻译成 C#：

```
scan = MapVirtualKey(vk, 0);

// Build the generic lparam to be used for WM_KEYDOWN/WM_KEYUP/WM_CHAR
lparam = 0x00000001 | (LPARAM)(scan << 16);         // Scan code, repeat=1
if (bForceExtended == true || IsVKExtended(vk) == true)
    lparam = lparam | 0x01000000;       // Extended code if required

if ( (m_nKeyMod & ALTMOD) && !(m_nKeyMod & CTRLMOD) )   // Alt without Ctrl
    PostMessage(m_hWnd, WM_SYSKEYDOWN, vk, lparam | 0x20000000);    // Key down, AltDown=1
else
    PostMessage(m_hWnd, WM_KEYDOWN, vk, lparam);    // Key down 
```

可以使用[MapVirtualKey生成扫描码](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646306%28v=vs.85%29.aspx)

**C#翻译：**

```
public static void sendKey(IntPtr hwnd, VKeys keyCode, bool extended)
{
    uint scanCode = MapVirtualKey((uint)keyCode, 0);
    uint lParam;

    //KEY DOWN
    lParam = (0x00000001 | (scanCode << 16));
    if (extended)
    {
        lParam |= 0x01000000;
    }
    PostMessage(hwnd, (UInt32)WMessages.WM_KEYDOWN, (IntPtr)keyCode, (IntPtr)lParam);

    //KEY UP
    lParam |= 0xC0000000;  // set previous key and transition states (bits 30 and 31)
    PostMessage(hwnd, WMessages.WM_KEYUP, (uint)keyCode, lParam);
}

[DllImport("user32.dll", CharSet = CharSet.Auto)]
private static extern uint MapVirtualKey(uint uCode, uint uMapType); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:58:08.683

如果您绝对必须使用 SendMessage，那么您需要在正确的位置切换 int 的位。

该站点记录了如何在 C# 中执行此操作：

[http://codeidol.com/csharp/csharpckbk2/Classes-and-Structures/Turning-Bits-On-or-Off/](http://codeidol.com/csharp/csharpckbk2/Classes-and-Structures/Turning-Bits-On-or-Off/)

关于您的问题，ScanCode 是您尝试发送的 Key 的值，也代表某些状态。例如按下 A 的扫描码与释放 A 的扫描码不同。

维基百科有一篇关于它们的文章：

[http://en.wikipedia.org/wiki/Scancode](http://en.wikipedia.org/wiki/Scancode)

# powershell - PowerShell：Get-User –OrganizationalUnit 一级？

> ID：10280001
> 
> 赞同：5
> 
> 时间：2012-04-23T11:52:01.487
> 
> 标签：powershell

嗨，我正在尝试获取 Get-User –OrganizationalUnit 命令的一级。

```
Get-User –OrganizationalUnit "domain.local/ou/this-one" 
```

这将返回 this-one ou 及其下的所有内容，我想要一个级别的返回，我缺少什么参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-17T11:36:29.003

根据可区分属性创建一个数组：

```
$aduserinfo = get-aduser -Identity "Username here"
$ou = $aduserinfo.distinguishedname.split(",")[2]
$ou = $ou.substring(3) 
```

玩转索引 [2]，您将获得要搜索的 OU。 `Substring`删除索引中的前 3 个字符“ou=”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:10:31.403

这样做没有特定的参数，使用过滤器怎么样？

像这样：

```
Get-User -Filter "distinguishedName -like 'CN=*,OU=This-one,OU=OU,DC=domain,DC=local'" 
```

如果 get-aduser cmd-let 失败，您可以像这样设置搜索范围：

```
get-aduser -searchbase "OU=This-one,OU=OU,DC=domain,DC=local" -searchscope 1 
```

参考： [http ://technet.microsoft.com/en-us/library/ee617241.aspx](http://technet.microsoft.com/en-us/library/ee617241.aspx)

关于阿卡斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-29T13:28:40.927

很确定您还没有在这里寻找答案，但是对于遇到相同问题的任何人，请尝试使用：

```
Get-ADOrganizationalUnit -Searchbase "OU=OUYouareSearching,DC=domain,DC=net" -SearchScope OneLevel -Filter * 
```

**-SearchScope OneLevel**是这里的关键。

# vb.net - 尝试在 vb 中读取 excel 时出错

> ID：10280002
> 
> 赞同：1
> 
> 时间：2012-04-23T11:52:04.560
> 
> 标签：vb.net, excel

尝试从 vb 中的 excel 文件中读取时，出现此异常“找不到可安装的 isam”。我尝试了谷歌，我得到的最多的是我的连接问题，但我不知道如何解决这个问题。这是我的连接字符串

```
Dim MyConnection As System.Data.OleDb.OleDbConnection
MyConnection = New System.Data.OleDb.OleDbConnection _
        ("Provider=Microsoft.Jet.Oledb.4.0; Data Source='" & Application.StartupPath & "\kk.xls'; Extended Properties=Excel 9.0;") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T21:47:53.080

尝试不带单引号，然后更改为`Extended Properties=Excel 8.0`.

# java - NullPointerException 使用 Spring 到 @autowire mybatis 映射器

> ID：10280004
> 
> 赞同：0
> 
> 时间：2012-04-23T11:52:14.743
> 
> 标签：java, spring, mybatis, stripes

我一直在做一个webapp（一个数据库的CRUD接口），我使用jpetstore作为指导，除了：

1.  我也在使用 mybatis-generator 的代码。
2.  服务。我不想将服务作为单独的部分。我想直接在 Action bean 上使用 Mappers
3.  我在一个文件夹 (org.lmb97.data) 中拥有所有 mappers.xml、mappers.java、example.java 和 entity.java（所有生成器的代码）

当我尝试使用映射器时，我遇到了 NullPointerException。我检查了好几次，但仍然没有找到解决方案。我不知道是哪个问题。我已经尽力了……但不知道。我认为这与配置有关。我检查了错误跟踪器中似乎相关但没有相关的各种错误。

我将在这里粘贴一些我认为有趣的部分：

## 这是 applicationContext.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="
     http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
     http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
     http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
     http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
     http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd">

    <!-- transaction manager, use JtaTransactionManager for global tx -->

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="jdbc:mysql://192.168.56.2/txomon_lmb97"/>
        <property name="username" value="username"/>
        <property name="password" value="password"/>
    </bean>

    <!-- In theory, this has to be for making a transaction manager (don't know what it is for) -->
    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="typeAliasesPackage" value="org.lmb97.data" />
    </bean>
    <!-- enable component scanning (beware that this does not enable mapper scanning!) -->    
    <context:component-scan base-package="org.lmb97" />

    <!-- enable autowire -->
    <context:annotation-config />

    <!-- enable transaction demarcation with annotations -->
    <tx:annotation-driven />

    <!-- scan for mappers and let them be autowired -->
    <bean id="mybatisMapperScanner" class="org.mybatis.spring.mapper.MapperScannerConfigurer">
        <property name="basePackage" value="org.lmb97.data.*Mapper" />
    </bean>

</beans> 
```

## 这是 web.xml

```
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
         http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
         version="2.4">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>    
    <context-param>
        <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
        <param-value>StripesResources</param-value>
    </context-param>

             <!-- Aqui empiezo a definir Stripes -->
    <filter>
        <display-name>Stripes Filter</display-name>
        <filter-name>StripesFilter</filter-name>
        <filter-class>net.sourceforge.stripes.controller.StripesFilter</filter-class>
        <init-param>
            <param-name>ActionResolver.Packages</param-name>
            <param-value>org.lmb97.web.action</param-value>
        </init-param>
        <init-param>
            <param-name>Interceptor.Classes</param-name>
            <param-value>net.sourceforge.stripes.integration.spring.SpringInterceptor</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>StripesFilter</filter-name>
        <servlet-name>StripesDispatcher</servlet-name>
        <dispatcher>REQUEST</dispatcher>
    </filter-mapping>

    <servlet>
        <servlet-name>StripesDispatcher</servlet-name>
        <servlet-class>net.sourceforge.stripes.controller.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>StripesDispatcher</servlet-name>
        <url-pattern>*.action</url-pattern>
    </servlet-mapping>
    <!--Aqui empiezo a definir Spring -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
</web-app> 
```

正如我所说，我不想有一个服务层，我直接在 ActionBean 上做这一切，在 EventsActionBean 的第 76 行抛出异常`https://github.com/txomon/Universidad/blob/eb7753e32a2eccbf4e5e81e815d68b929bcb2e61/3/LabTD/practica2/src/java/org/lmb97/web/action/EventsActionBean.java#L74`。我第一次调用映射器。

[我有 apache tomcat 的日志和普通日志，在这里](http://dl.dropbox.com/u/6090385/mybatis-mail.7z)配置了 ALL 中的 log4j，它位于 .7z 中，因为它们是很棒的日志。并且 repo 在[这里](https://github.com/txomon/Universidad/tree/eb7753e32a2eccbf4e5e81e815d68b929bcb2e61/3/LabTD/practica2)，我正在放置确切的提交，这样如果我使用 repo，您​​可以看到实际状态。

netbeans 项目已配置为，如果您克隆 repo，您​​将拥有包含在其中的所有库，而没有外部依赖项。

欢迎任何帮助/想法，您可以要求我测试，

干杯，并提前感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:19:41.927

当我们谈论使用的 jar 时，我们需要将特定的注释与其相关域协调：

*   动作类型bean的@SpringBean注解
*   Spring 类型 bean 的 @Autowire 注释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T05:24:29.647

扫描仪不支持通配符，所以改变这个：

```
<property name="basePackage" value="org.lmb97.data.*Mapper" /> 
```

对此：

```
<property name="basePackage" value="org.lmb97.data" /> 
```

# linq - Linq 包含来自 ListItems

> ID：10280006
> 
> 赞同：0
> 
> 时间：2012-04-23T11:52:20.173
> 
> 标签：linq, entity-framework, linq-to-entities

我正在尝试从程序表中返回与传递列表中的项目匹配的记录，但出现以下错误：

*参数类型“System.Nullable”不可分配给参数类型“System.Web.UI.WebControls.ListItem”*

```
void PopulateEvents(List<ListItem> programs)
{
    var rows = from table in db.Events.AsEnumerable()
               where programs.Contains(table.ProgramID)
               select Events;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:45:58.883

我不会使用`AsEnumerable()`，因为它会关闭整个`Events`表并使用`linq-to-objects`.

无论您是否选择删除`AsEnumerable()`，我都会修改您的查询以使用`Any`运算符而不是`Contains`方法，并且您需要使用与该属性`ListItem`匹配的`ProgramID`属性。那应该可以解决您的错误消息。

```
 var rows = from table in db.Events
            where programs.Any(p => p.ID == table.ProgramID)
            select table; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:46:02.453

```
void PopulateEvents(List<string> programs)
{
    var rows = db.Events.Where(i => programs.Contains(i.ProgramID)).Select(i => db.Events);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:29:13.167

的`ProgramID`列/属性可以`Events`为空（在数据库中）。`programs.Contains`检查需要一个`ListItem`不可为空的。

根据您的情况，您可以将`ProgramID`列/属性更改`Events`为不接受空值，或者您可以强制`table.ProgramID`转换为不可为空的`ListItem`。（或者让我们`programs`成为一个可以为空的 ListItems 的列表：`List<ListItem?>`。）

编辑：
Aducci 是一个优雅的解决方案，它使我的建议无效;-)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T12:47:54.837

尝试这个

```
void PopulateEvents(List<ListItem> programs) 
{     
       var rows = from table in db.Events.AsEnumerable()               
                  where programs.Cast<ListItem>().Select( y => y.Text).Contains(table.ProgramID.Value.ToString())                
                  select table; 
} 
```

# php - 我在 PHPmyAdmin 中收到有关 MySQL 的潜在错误消息

> ID：10280016
> 
> 赞同：0
> 
> 时间：2012-04-23T11:53:19.943
> 
> 标签：php, mysql, phpmyadmin

我在 PHPmyAdmin 中收到以下有关 MySQL 的潜在错误消息：

> 您的 PHP MySQL 库版本 5.0.51a 与您的 MySQL 服务器版本 5.5.7 不同，这可能会导致不可预知的行为。

到目前为止，使用这个 MySQL 数据库的站点似乎运行良好，我应该担心吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:00:11.893

不，实际上没有什么超级评论家不会发生。你的php mysql库（PHP mysql模块）版本是5.0.51a，mysql服务器版本是5.5.7。phpmydamin 只是警告您它们的不相等性并且可能存在一些问题。

# php - Facebook 60 天访问令牌

> ID：10280018
> 
> 赞同：0
> 
> 时间：2012-04-23T11:53:21.993
> 
> 标签：php, facebook, api

我目前遇到 60 天 access_token 的问题。我通过 /me/applications 获取了粉丝网站 access_token，我想在上面发布，而不需要每 2 小时刷新一次网站。

当我以 facebook 提供的方式解析粉丝网站的令牌时，它只会引发错误。

登录是通过 Javascript 在后台使用 PHP SDK 处理的。

问候，莫里茨

编辑：

`{"error_code":1,"error_msg":"An unknown error occurred"}`是错误。

代码是这样的：

```
$attachment = array('message' => $post['title'],
                        'link' => $unique,
                        'actions' => '{"name": "Fanseiten Admin?", "link": "http://google.com"}',
                        'access_token' => $page['access_token']);
$result = $facebook->api('/'.$page['pageid'].'/feed', 'post', $attachment); 
```

只需使用存储在数据库中的访问令牌推送到站点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:18:18.863

我找到了解决方案：使用以下方法扩展 base_facebook.php 类并调用

```
$facebook->setAccessToken($facebook->getExtendedAccessToken()); 
```

应用程序的 access_token 现在也延长至 60 天。

```
public function getExtendedAccessToken(){

    try {
        // need to circumvent json_decode by calling _oauthRequest
        // directly, since response isn't JSON format.
        $access_token_response =
            $this->_oauthRequest(
                $this->getUrl('graph', '/oauth/access_token'), array(
                    'client_id' => $this->getAppId(),
                    'client_secret' => $this->getAppSecret(),
                    'grant_type'=>'fb_exchange_token',
                    'fb_exchange_token'=>$this->getAccessToken()
                )
            );
    } catch (FacebookApiException $e) {
        // most likely that user very recently revoked authorization.
        // In any event, we don't have an access token, so say so.
        return false;
    }

    if (empty($access_token_response)) {
        return false;
    }

    $response_params = array();
    parse_str($access_token_response, $response_params);
    if (!isset($response_params['access_token'])) {
        return false;
    }

    return $response_params['access_token'];
} 
```

# facebook - 在应用程序中使用 facebook 相册图片

> ID：10280019
> 
> 赞同：1
> 
> 时间：2012-04-23T11:53:26.503
> 
> 标签：facebook, image, gallery

是否可以在另一个网站内显示使用 facebook 应用程序制作的图像（由他们上传到用户的 facebook 画廊）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:28:37.633

是的，这是可能的，但用户必须授权您访问他们的照片。

您可以通过获得扩展权限来做到这一点：

```
$uid = $facebook->getUser();  

$url = $facebook->getLoginUrl(array(  
'req_perms' => 'user_photos' )); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T16:33:12.813

您可以检索当前用户使用另一个应用程序上传的图像。当前用户需要使用访问令牌登录，您需要

```
read_stream
user_photos 
```

权限。

您可以使用 FQL 查询和一些客户端解析来检索照片的 url：

首先，查询 FQL 流表以获取字段“app_id”= 其他应用程序 ID 的流帖子附件。

```
SELECT attachment FROM stream WHERE source_id=me() AND app_id=OTHER_APP_ID 
```

这会检索使用其他应用完成的所有帖子的附件。

查询可能会进一步缩小，如下所示，但我没有数据集来测试它：

```
SELECT attachment FROM stream WHERE source_id=me() AND app_id=OTHER_APP_ID AND type=247 
```

其中 247 表示照片。它可以为您节省一些客户端工作（这两个 AND 看起来很骇人，也许有人可以提出更好的说法......）。

得到响应后，解析 JSON。每个“附件”都有一个名为“媒体”的字段，它是一个数组。对于每个数组项，检查 type="photo"。如果是，“src”字段将包含一个指向上传照片的小版本的 url 链接。

为了说明，这里是示例 JSON 响应的开头：

```
"attachment": {
    "media": [
      {
        "type": "photo", 
        "src": "https://...._s.jpg", 
         //etc 
```

JSON 响应还包含指向其他大小的链接。

有关流表的更多信息，请参阅[Facebook 开发者文档](https://developers.facebook.com/docs/reference/fql/stream/)。

# unit-testing - 您将如何对关闭 NT 服务（如“telnet”）的类/方法进行 TDD 或单元测试？

> ID：10280020
> 
> 赞同：1
> 
> 时间：2012-04-23T11:53:26.860
> 
> 标签：unit-testing, tdd

单元测试和 TDD 的新手，我编写的操作系统实用程序比传统 LOB 多得多。因此，我了解您如何模拟或存根数据库或文件，但是如何处理以下内容：

*   针对 Active Directory 的身份验证
*   停止 NT 服务
*   针对 AD 组的授权
*   ETC...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T12:31:49.010

您无法使用单元测试测试服务是否实际停止。这就是其他测试（例如集成测试）的用途。但是，通常值得测试的是，您的被测系统 (SUT) 是否实际上是在进行正确的调用以停止服务。

在这种情况下，可以将这些具体的 API 包装到专门针对您的消费者需求量身定制的界面（外观）中。然后模拟该接口并断言您正在测试的消费者已使用正确的参数调用了适当的成员。

示例（c#、NUnit、FakeItEasy）：

```
// implementation of this interface basically wraps the concrete service APIs of the OS
public interface IServiceController
{
   public void Start(string serviceName);  
   public void Stop(string serviceName);
}    

// consumer that wants to stop a specific service and that is your SUT
public class SomeConsumer
{
    // ctor takes dependency on a service controller
    SomeConsumer(IServiceController controller)
    {
       // ...
    }

    public void DoSomethingThatRequiresAServiceStop()
    {
       // ...
    }
}

[TestFixture]
public class SomeConsumerTests
{
    [Test]
    public void DoSomethingThatRequiresAServiceStop_StopsServiceXYZ()
    {
          // arrange
          IServiceController mockServiceConntroler = A.Fake<IServiceController>();
          SomeConsumer sut = new SomeConsumer(mockServiceController);

         // act
         sut.DoSomethingThatRequiresAServiceStop();

         // assert
         A.CallTo(() => mockServiceConntroler.Stop("XYZ")).MustHaveHappend();
    }
} 
```

[正如马特已经在某些环境中指出的那样](https://stackoverflow.com/a/10280475/4227)，这些工具允许您替换具体实现而无需引入抽象（此处：）`IServiceController`。我倾向于尽可能避免这些，因为它们通常不仅使用起来有点乏味，而且似乎会强制选择错误的设计（例如，取决于具体的实现而不是抽象）。我认为 Microsoft Moles 或 TypeMock Isolator 之类的工具更多地是帮助您处理遗留代码库的工具，这些代码库已经有大量您无法摆脱的糟糕设计选择（立即）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T12:24:23.943

对于某些代码，可能无法*直接*以松散耦合的方式使用存根或模拟进行单元测试*，因为您依赖的代码本身可能不是松散耦合的。您可能最终需要编写集成测试。

如果是这种情况，最好在集成测试驱动的不可单元测试的代码上**编写一个包装类**（即使用[适配器](http://en.wikipedia.org/wiki/Adapter_pattern)或[外观模式）。](http://en.wikipedia.org/wiki/Facade_pattern)这样，当您需要启动/停止 Windows 服务时，您仍然可以使用单元测试在代码的其他地方存根/模拟您的包装类。您的包装类也是测试驱动的，但只是使用集成测试。

*[如果在 .NET 上，一些工具可能仍然允许您编写单元测试并注入某种假对象，例如 Microsoft Moles（很快将被命名为 Fakes）或 TypeMock Isolator 在这些情况下，但测试会更慢并且写更多的代码。虽然我使用过 Moles，但我个人更愿意封装难以测试的代码，而不是使用这些工具。]

# sql-server-2008 - ms sql scope_identity

> ID：10280034
> 
> 赞同：0
> 
> 时间：2012-04-23T11:54:30.660
> 
> 标签：sql-server-2008, syntax, scope-identity

我想将存储过程中最后插入的元组的 id 作为参数传递给另一个存储过程。

这里有四个代码片段。前两个片段正常工作：

```
declare @s bigint
select @s = scope_identity()
exec some_stored_proc @s 
```

和

```
exec some_stored_proc scope_identity 
```

但是这两个片段都会导致查询完成并出现错误：

```
declare @s bigint
select @s = scope_identity 
```

和

```
exec some_stored_proc scope_identity() 
```

我不知道括号有什么大惊小怪的！怎么`scope_identity()`会有不同的语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:57:26.463

它没有不同的语法

它的一个函数和一个函数应该由`()`

SCOPE_IDENTITY()

```
declare @s bigint
set @s = scope_identity()
exec some_stored_proc @s 
```

应该管用。

## 编辑

`exec XXX`应该得到*“就绪值”*而不是*“计算值”*。这就是您**无法**发送`datetime`为`getDate()`.

## 编辑2

根据您的示例-我可以将不带 () 的 getDate 发送给 sp。

![在此处输入图像描述](../Images/7b61cf6853d636d10969d08f77407f7e.png)

它不起作用。它必须通过@param

# android - 自动登录和记住我如何在 Android 应用程序中工作？

> ID：10280035
> 
> 赞同：1
> 
> 时间：2012-04-23T11:54:32.090
> 
> 标签：android, database, login

我正在 Android 应用程序中实现登录屏幕。“记住我”和“自动登录”有复选框。请建议实现此功能的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T11:58:16.093

记住我，使用共享首选项将其存储在本地（布尔值 - TRUE 或 FALSE）。如果选中该复选框，则再次使用共享首选项将用户名、密码存储在内存中。打开应用程序时，检查共享首选项是否可以提供用户名和密码的值。如果是，那么您可以自动启动登录过程。否则只显示登录屏幕。清除？

编辑 -

使用它来将值存储在登录按钮的 onClickListener 中

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        SharedPreferences.Editor prefsEditor = myPrefs.edit();
        prefsEditor.putString("LOGIN_ID", username_field.getText().toString());
        prefsEditor.putString("LOGIN_PSWD", password_field.getText().toString());
        prefsEditor.putBoolean("REMEMBER", checkbox.isChecked());
        prefsEditor.commit(); 
```

同样，在应用程序启动时，使用此代码读取值并登录 -

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        boolean isRemember = myPrefs.getBoolean("REMEMBER", false);
   if(!isRemember)
     //Go to login screen. 
else
{     
String id = myPrefs.getString("LOGIN_ID", "");
String pswd = myPrefs.getString("LOGIN_PSWD", "");
//try to autologin now with these values
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T13:14:13.987

在我的建议中，rememer me 的目的是不同的。

流程应该是这样的。

最初使用reisterd is 和passwrod 登录。将其存储在上述答案中提到的共享首选项中（始终建议共享首选项，尽管使用静态变量也可以实现相同的目标。但静态变量并不总是可靠的）

现在，每当启动应用程序时，为此目的检查 sharedpref 的内容，并且只有当它不为 null 时，才应提示用户再次登录

但是记住我的目的是当用户注销时，下次登录时，它应该显示以前使用的用户名/密码。当应用程序有登录时，应该有一个注销选项。注销选项应将用户带到登录页面。这里如果remeber me之前勾选了，他之前的用户名就会出现。如果未选中，这些字段将为空白。

另一个建议是只为应用程序的用户特定部分保持登录。如果用户被迫登录也看什么应用程序，它不是一个好的用户界面。

这些是一些建议

# macos - Spotlight 中文件中的点击数

> ID：10280036
> 
> 赞同：1
> 
> 时间：2012-04-23T11:54:34.740
> 
> 标签：macos, cocoa, core-foundation, spotlight

我正在使用 Spotlight API 在我的应用程序中提供搜索。我需要知道搜索字符串出现在文件中的次数，以便我可以实现排序描述符并对结果进行排序。有什么方法可以做到这一点而不必打开每个文件？Lucene 等其他库提供了非常有用的相关性评级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T00:42:50.937

您可以向元数据查询结果项询问`NSMetadataQueryResultContentRelevanceAttribute`键的值。

这将返回`NSNumber`一个浮点值介于 0.0 和 1.0 之间的对象。

相关性值表示结果对象的内容的相关性。

您无法访问字符串在每个搜索结果中出现的实际次数。

# java - jtable中整行的删除线

> ID：10280042
> 
> 赞同：3
> 
> 时间：2012-04-23T11:55:00.057
> 
> 标签：java, swing, jtable, rendering, strikethrough

我有一个`JTable`通过 mysql 数据库获取它们的价值。我制作了几个自定义列渲染器，以便`JTable`显示我需要的数据格式。我现在需要的是在某些行上添加一些删除线，具体取决于每行中最后一个单元格 (5) 上的值是否具有特定的字符串值，例如 (test)。删除线必须位于该行的每个单元格中，除了最后一个单元格（具有测试值）。它可以与其他自定义列渲染器一起使用而无需混淆吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T13:17:51.033

*   为什么是Html，为什么不直接使用[TextAttribute](http://docs.oracle.com/javase/7/docs/api/java/awt/font/TextAttribute.html)

*   非常尊重 HFOE 和他的知识共享 (forums.sun.com)

![在此处输入图像描述](../Images/1b88b0d44f1a8ff8329c73e0d4cee2e7.png)

![在此处输入图像描述](../Images/698b31974893e963dec8b6b6b2862a0b.png)

从代码

```
import java.awt.*;
import java.awt.font.TextAttribute;
import java.util.Map;
import javax.swing.*;
import javax.swing.border.Border;
import javax.swing.border.CompoundBorder;
import javax.swing.border.EmptyBorder;
import javax.swing.border.MatteBorder;
import javax.swing.table.*;

public class TablePrepareRenderer extends JFrame {

    private static final long serialVersionUID = 1L;
    private JTable table;

    public TablePrepareRenderer() {
        Object[] columnNames = {"Type", "Company", "Shares", "Price", "Boolean"};
        Object[][] data = {
            {"Buy", "IBM", new Integer(1000), new Double(80.50), false},
            {"Sell", "MicroSoft", new Integer(2000), new Double(6.25), true},
            {"Sell", "Apple", new Integer(3000), new Double(7.35), true},
            {"Buy", "Nortel", new Integer(4000), new Double(20.00), false}
        };
        DefaultTableModel model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        table = new JTable(model) {

            private static final long serialVersionUID = 1L;
            private Border outside = new MatteBorder(1, 0, 1, 0, Color.red);
            private Border inside = new EmptyBorder(0, 1, 0, 1);
            private Border highlight = new CompoundBorder(outside, inside);

            @Override
            public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                Component comp = super.prepareRenderer(renderer, row, column);
                JComponent jc = (JComponent) comp;
                Map attributes = (new Font("Serif", Font.PLAIN, 12)).getAttributes();
                //attributes.put(TextAttribute.WEIGHT, TextAttribute.WEIGHT_BOLD);
                attributes.put(TextAttribute.STRIKETHROUGH, TextAttribute.STRIKETHROUGH_ON);
                if (!isRowSelected(row)) {
                    comp.setForeground(Color.black);
                    comp.setBackground(row % 2 == 0 ? Color.white : Color.orange);
                    int modelRow = convertRowIndexToModel(row);
                    String type = (String) getModel().getValueAt(modelRow, 0);
                    if (type.equals("Sell")) {
                        comp.setFont(new Font(attributes));
                        comp.setForeground(Color.red);
                    } else {
                        comp.setFont(new Font("Serif", Font.BOLD, 12));
                    }
                } else {
                    comp.setFont(table.getFont());
                }
                jc.setBorder(BorderFactory.createCompoundBorder(jc.getBorder(), BorderFactory.createEmptyBorder(0, 0, 0, 5)));
                return comp;
            }
        };
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        getContentPane().add(scrollPane);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                TablePrepareRenderer frame = new TablePrepareRenderer();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T12:43:52.953

这是您想要做的部分示例，

[如何删除JTable的选定行（在第一列中有复选框）的文本？](https://stackoverflow.com/questions/5277220/how-to-strikethrough-text-of-a-selected-rowhaving-checkbox-in-first-column-of)

请看一下代码，它应该可以解决您的问题。

# php - PHP 会话不可用

> ID：10280044
> 
> 赞同：1
> 
> 时间：2012-04-23T11:55:07.180
> 
> 标签：php, session

我成功创建了会话，它适用于所有页面，但是当执行以下页面时，它不显示任何会话变量并再次要求登录..

这是代码：

```
if(!session_id())
    session_start();
$con = mysql_connect("0.0.0.0 ","db_name","pwd");
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("db_name", $con);
if($_GET['rating']=='like')
{
    $rcount = $_GET['rcount'] + 1;
    $id= $_GET['id'];
    mysql_query("UPDATE networx_notes SET up='$rcount' WHERE id='$id' ");
    header( 'Location: http://adrress.com/somewhere.php' ) ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:03:49.927

如果您的会话变量在重定向后未显示`http://adrress.com/somewhere.php`，则可能是：

*   `session_start()`在尝试访问此页面[http://adrress.com/somewhere.php](http://adrress.com/somewhere.php)上的会话变量之前，您没有。
*   [http://adrress.com/somewhere.php](http://adrress.com/somewhere.php)页面与引用页面位于不同的域中。
*   在包含您的代码示例的脚本中没有设置实际的会话变量（`print_r($_SESSION)`在重定向之前检查。

注意：您应该始终在标题位置更改后使用`die`\ 。`exit`

# android - 如何让onDraw绘图更流畅

> ID：10280049
> 
> 赞同：0
> 
> 时间：2012-04-23T11:55:27.430
> 
> 标签：android, multithreading, surfaceview, smooth, ondraw

我正在从屏幕顶部移动图像，直到它到达屏幕底部，以使其具有类似落针的效果。它工作正常，但问题在于动画效果。我希望这尽可能平滑，但我很容易在这种下降效果中找到混蛋。

我使用了 Surfaceview 和线程来实现这一点。线程不断将图像的位置更新一个像素，并调用 Surfaceview 的 onDraw(canvas) 方法，在该方法中绘制具有更新坐标的图像。

这是一些代码片段。首先是绘图线程不断更新我的图像坐标一些像素。

```
while(mRun){
    canvas = null;
    try{
        canvas = mSurfaceHolder.lockCanvas();
        //increment the coordinate by 5 pixels
            image.getCoordinate.setX(image.getCoordinate.getX + 5);
            image.getCoordinate.setY(image.getCoordinate.getY + 5);

        synchronized (mSurfaceHolder) {

            //call onDraw method to update position on canvas
            mPanel.onDraw(canvas);
        }

    }finally{
        if(canvas != null){
            mPanel.getSurfaceHolder().unlockCanvasAndPost(canvas);
        }
    }
} 
```

然后我的 SurfaceView 类中的 onDraw 方法在画布上绘制更新的图像：

```
canvas.drawBitmap(image, image.getCoordinate().getX(),image.getCoordinate().getY(), null); 
```

这似乎很简单，但有一些混蛋，我正在寻找一些方法来避免这些混蛋。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:46:45.827

@Saurabh Pareek：感谢好友的好建议。

我在模拟器上进行了同样的测试。但是当我尝试在设备上运行相同的设备时，它运行良好。没有混蛋和漂亮的动画。

# javascript - setInterval javascript 似乎反应不佳

> ID：10280055
> 
> 赞同：-1
> 
> 时间：2012-04-23T11:55:53.943
> 
> 标签：javascript, asp.net-mvc, google-maps-api-3

小总结。由于地理编码不允许大量同时请求并且我必须在我的 googlemap 上显示超过 11 个标记，我想我会使用某种间隔来绕过同时请求限制。
我想在这里我会使用 javascript 中的 setInterval 函数。

这是我的代码

```
 function timeHackGeocode(location, name, contract, vestigingID)
    {
      setInterval(codeAddress(location, name, contract, vestigingID), 1000);
    }

  function collectingData() {
        @foreach (var item in Model) {
        @:timeHackGeocode("@item.StraatVestiging" + " " + "@item.nr" + "," + "@item.location","@item.name","@item.Contract", "@item.id");
         }        
      }

 function codeAddress(location, name, contract, vestigingID) {
        var address = location;
        var image;
        var zoomlevel; 
        geocoder.geocode({ 'address': address }, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                    map.setCenter(results[0].geometry.location);
                     var infoboxPos = results[0].geometry.location;
                     var image = new google.maps.MarkerImage(returnImage(contract),
                      // This marker is 20 pixels wide by 32 pixels tall.
                      new google.maps.Size(30, 42),
                      // The origin for this image is 0,0.
                      new google.maps.Point(40,45),
                      // The anchor for this image is the base of the flagpole at 0,32.
                      new google.maps.Point(0, 32));

                     var marker = createMarkers(results[0].geometry.location, contract)

                         google.maps.event.addListener(marker, 'mouseover', function() { 
                         infobox.open(map, marker);
                         infobox.setOptions(infoboxOptions(boxText(name, contract, vestigingID), infoboxPos));

                     });
            } else {
              // alert("Geocode was not successful for the following reason: " + status);
            }   
        });        
    } 
```

不幸的是，这似乎不起作用，我尝试了各种不同的设置。 [https://developer.mozilla.org/en/DOM/window.setInterval](https://developer.mozilla.org/en/DOM/window.setInterval)

有谁知道发生了什么？

附言。我将来会通过已经有了纬度和经度来改变这个黑客，但现在我希望让它发挥作用。

建议非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:02:56.230

如果您需要将参数传递给回调函数，但需要它在不支持使用 setInterval() 发送附加参数的 Internet Explorer 中工作，请使用匿名函数来调用回调。

```
var time =setInterval(function(){ codeAddress(location, name, contract, vestigingID); },1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:24:23.457

绕过速率限制是可能的。请参阅[Google Map V3：仅显示一些标记，](https://stackoverflow.com/questions/10062624/google-map-v3-only-some-markers-are-displayed)这是完全相同的问题。

这是该答案的相关部分：

> 您需要减慢请求速度。当您提交更多请求时，您可能不得不进一步减慢它们的速度以满足地理编码器的要求。我在[http://acleach.me.uk/gmaps/v3/plotaddresses.htm](http://acleach.me.uk/gmaps/v3/plotaddresses.htm)制作了一个版本 3 示例（来自一个著名的版本 2 示例） ——您可以看到它以请求之间的 100 毫秒延迟开始，但需要在 20 次迭代后减速到 150 毫秒左右。

# android - 使用内置 textAppearanceLarge 时，包装内容与填充父级是否会影响应应用的文本大小

> ID：10280056
> 
> 赞同：0
> 
> 时间：2012-04-23T11:55:55.230
> 
> 标签：android, textview

所以我有一个主要用 XML 定义的屏幕，我在 XML 文件中选择了 ?attr/textAppeareanceLarge。

当我输入一些代码来查找`TextView`ID 时，将 textsize 转储到 LogCat，使用`setTextAppearance`to更改文本外观`android.R.attr.textAppearnaceSmall`，大小保持不变。日志说它正在使用 33.0 textsize

相反，在我正在修改的自定义首选项中，我想创建一个文本标签。以编程方式将文本指定为较大，使用`setTextAppearance(android.R.attr.textAppearanceLarge)`仍然会产生较小的文本大小（在 20 左右）。

关于为什么文本大小搞砸了，我唯一能想到的是我可能使用了填充父级，而另一个是包装内容。它真的会影响文字大小吗？

更新：也许一些代码会更好地演示。我正在创建一个自定义首选项小部件。它应该有一个使用文本字符串作为首选项标题的文本标签和一个时间选择器。我没有得到的是为什么这里的 textAppearanceLarge 不会改变文本大小。即setTextAppearance 之前和之后的日志返回相同的值。

```
@Override
protected View onCreateView(ViewGroup parent) {
    LinearLayout layout = new LinearLayout(getContext());
    LinearLayout.LayoutParams params1 = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.FILL_PARENT,
            LinearLayout.LayoutParams.FILL_PARENT);
    params1.gravity = Gravity.CENTER;
    params1.weight = 1.0f;

    TextView text = new TextView(getContext());
    text.setText(getTitle());
    Log.d(this.getClass().getName(),Float.toString(text.getTextSize()));
    text.setTextAppearance(getContext(),android.R.attr.textAppearanceLarge);
    Log.d(this.getClass().getName(),Float.toString(text.getTextSize()));
    text.setGravity(Gravity.CENTER);
    text.setLayoutParams(params1);

    TimePicker picker = new TimePicker(getContext());
    picker.setCurrentHour(m_hour);
    picker.setCurrentMinute(m_minute);
    LinearLayout.LayoutParams params2 = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT);
    params2.gravity = Gravity.RIGHT;

    picker.setLayoutParams(params2);
    picker.setOnTimeChangedListener(this);
    picker.setLayoutParams(params2);

    layout.setOrientation(LinearLayout.HORIZONTAL);
    layout.addView(text);
    layout.addView(picker);
    layout.setId(android.R.id.widget_frame);

    return layout;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:13:49.533

哈哈。几天来我一直在摸不着头脑，并且搜索这个问题已经有一段时间了，当我编辑这个问题时，我在 android 问题跟踪器中找到了答案。

[http://code.google.com/p/android/issues/detail?id=1727](http://code.google.com/p/android/issues/detail?id=1727)

我应该这样做：

```
text.setTextAppearance(getContext(),android.R.style.TextAppearance_Large); 
```

# c - 数学库是静态链接的吗？

> ID：10280060
> 
> 赞同：3
> 
> 时间：2012-04-23T11:56:03.863
> 
> 标签：c, gcc, libraries, static-linking

我的印象是数学库是静态链接的，因为`-l name`链接到`libname.a`，但是如果我尝试使用`-static`标志编译，突然 GCC 找不到数学函数。

这是否意味着数学不一定是静态链接的？还是这里发生了其他事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T11:58:11.923

如果它会静态编译，你会写`gcc libname.a`而不是`gcc -l libname`.

对于您的问题，是的，数学库是动态链接的。

# json - jQuery ajax 成功回调未触发

> ID：10280065
> 
> 赞同：10
> 
> 时间：2012-04-23T11:56:23.817
> 
> 标签：json, jquery, jsonp

我正在使用 jQuery 的`$.ajax`方法从兼容 JSONP 的 Web 服务中获取数据，并且就获得响应并在我的 HTML 中显示接收到的数据而言，一切似乎都运行良好。但是，我无法让 ajax 方法的成功回调触发。更奇怪的是，即使我确实从服务中获得了有效响应，错误回调总是会被触发。

这是我用来测试的一个简单 js 函数的示例：

```
function doJsonp()
{
    $.ajax({
        url: "http://example.com/api/service?callback=blah",
        dataType: "jsonp",
        crossDomain: true,
        success: function() { console.log("success"); }, // This is never fired
        error: function() { console.log("error"); } // This is always fired
    });
} 
```

和匹配的回调函数：

```
function blah(data)
{
    console.log(data); // This is called properly
} 
```

通过阅读关于 SO 和其他地方的类似问题，这似乎通常是由服务返回的 JSON 未验证引起的。出于我的目的，我使用的是内部 Web 服务，但也尝试了其他 JSONP 服务，例如 Flickr 提供的服务，例如：

[http://api.flickr.com/services/feeds/groups_pool.gne?id=807213@N20&lang=en-us&format=json&jsoncallback=blah](http://api.flickr.com/services/feeds/groups_pool.gne?id=807213@N20&lang=en-us&format=json&jsoncallback=blah)

Flickr 服务和我的 JSON 都使用 jsonlint 进行验证，因此据我所知，这似乎不是问题。

在寻找此问题的解决方案时，我尝试使用名为 jquery-jsonp 的 jQuery 插件，该插件位于[http://code.google.com/p/jquery-jsonp/](http://code.google.com/p/jquery-jsonp/)。这将 jQuery 的`$.ajax`调用替换为它自己的调用，`$.jsonp`因此上面的代码如下所示：

```
function doJsonp()
{
    $.jsonp({
        url: "http://example.com/api/service?callback=blah",
        success: function() { console.log("success"); },
        error: function() { console.log("error"); }
    });
} 
```

但是，结果是相同的，并且成功回调永远不会触发。任何帮助或朝着正确方向轻推将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T12:09:37.870

通过 -option 定义回调函数**`jsonpCallback`**，而不是在 url 内：

```
function doJsonp()
{
    $.ajax({
        url: "http://api.flickr.com/services/feeds/groups_pool.gne?id=807213@N20&lang=en-us&format=json&jsoncallback=?",
        dataType: "jsonp",
        crossDomain: true,
        jsonpCallback:'blah',//<<<
        success: function() { console.log("success"); }, 
        error: function() { console.log("error"); } 
    });
} 
```

# wix - 有没有办法在不中止安装的情况下检查 CustomAction 失败？

> ID：10280066
> 
> 赞同：2
> 
> 时间：2012-04-23T11:56:25.900
> 
> 标签：wix, custom-action

如果我有以下 CustomAction，如果 DoTask 失败，安装将中止。

```
<CustomAction Id='DoTask'
              Execute='deferred'
              FileKey="MyExe"
              Return='check' /> 
```

如果我设置`Return`为`ignore`，如果失败，安装将继续，但我不会得到任何迹象表明它已经成功。

`Property`如果失败，有没有办法设置 a `CustomAction`？我想继续安装，但如果工具失败，之后会向用户显示一条消息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T13:49:44.063

这只能通过可以设置安装程序属性的自定义操作来完成：Win32 DLL、VBScript、WiX 工具集操作等。

对于自定义操作，您无法处理返回值。您可以做的最好的事情是将信息保存在自定义操作内部的某个位置（例如，属性），并让安装程序在自定义操作运行后读取它。

# xml - BizTalk 2009 的 HL7 消息中的新行问题

> ID：10280068
> 
> 赞同：0
> 
> 时间：2012-04-23T11:56:41.197
> 
> 标签：xml, map, biztalk, hl7

我必须用我的 XML 作为输入消息生成 HL7 消息。我在这里面临一些不同的情况。

问题：如果我们在输入 XML 消息的某些字段中收到“Enter” (\r\n) 字符。最终的 HL7 文件在 HL7 消息中使用该字段的地方中断。这使得 HL7 消息无效，因此我们的目标系统拒绝该消息。

我尝试了以下方法：

**1\. Map** • orch 中接收到的XML 消息使用相同的模式转换为另一个XML 消息。我们尝试在地图中遵循不同的方式。o 如果输入字段由\r\n 值组成，则脚本functoid 用于分配空值。或 o XSLT 用于通过检查输入字段中的值将输入 XML 消息转换为输出 或 o 简单的一对一映射用于将输入 XML 消息转换为输出 XML 消息

**输出** • 使用上述三种方法，输出 XML 消息仅为 NULL。

**2\. 类库** • 在 orch 中接收到的 XML 消息作为输入传递给 C# 函数。• 请找到以下代码：

**输出** o 该函数的输出 XML 没有新行 (\r\n)。但最终的 HL7 消息仅在该字段中断。

公共静态 XmlDocument RemoveNewLineCharacters(XLANGMessage msg) { XmlDocument xmlDoc =(XmlDocument)msg[0].RetrieveAs(typeof(XmlDocument));

```
 XmlDocument XmlIndentedMessage = new XmlDocument();

        string IndentedMessage = string.Empty;
        StringBuilder StrBldr = new StringBuilder();

        XmlWriterSettings settings = new XmlWriterSettings();
        settings.Encoding = Encoding.UTF8;
        settings.Indent = true;

        xmlDoc.PreserveWhitespace = false;

        XmlWriter writer;

        writer = XmlWriter.Create(StrBldr, settings);

        xmlDoc.Save(writer);

        IndentedMessage = StrBldr.ToString();

        XmlIndentedMessage.LoadXml(IndentedMessage);

        writer.Close();

        return XmlIndentedMessage;
    } 
```

非常感谢解决此问题的任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:29:22.150

我对你的问题有点困惑，但如果我理解正确，你需要删除可能在 XML 元素中的新行序列。在消息类型被识别并在编排中的消息上下文上标记之前，我将尝试在管道组件中构建预处理器（编码/解码）。与编排相比，您对管道中的消息有更多的低级控制。如果可能的话，我不建议在编排中进行这种类型的 XML 操作，但如果您需要在编排中进行，我会按照[此处](https://stackoverflow.com/questions/9375634/biztalk-hl7-send-pipeline-error-due-to-line-breaks-in-empty-xml-elements)所述在 XSLT 中进行。希望有帮助。

# biztalk - 如何在运行时动态选择管道中的 XSD？

> ID：10280069
> 
> 赞同：0
> 
> 时间：2012-04-23T11:56:43.130
> 
> 标签：biztalk, pipeline, biztalk-2010

我有一个要求，我在哪里接收 txt 格式的基于位置的数据。

记录的前 2 个字符帮助我识别消息类型。

不，我有 40 多种消息类型，因此根据消息类型，我需要在接收管道中选择一个 xsd。

在运行时动态地在管道中获取 xsd 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:04:14.577

**简答**

您所追求的是创建一个自定义[平面文件反汇编](http://msdn.microsoft.com/en-us/library/ee294233%28BTS.10%29.aspx "平面文件反汇编器")程序组件，该组件托管内置平面文件组件的实例，但也实现了[IProbeMessage](http://msdn.microsoft.com/en-us/library/microsoft.biztalk.component.interop.iprobemessage%28BTS.20%29.aspx "IProbeMessage 接口")接口。

此接口允许 BizTalk 运行时在接收管道的 Disassemble 阶段中的多个组件之间进行选择。

您可以使用此自定义管道的多个版本，每个可用的平面文件 .XSD 架构一个版本，

不幸的是，这种解决方案很快就会成为维护的噩梦和性能问题。因此，我建议更进一步，构建一个这样的组件来动态选择要使用的平面文件模式。

为此，您需要构建一个插件系统来驱动 IProbeMessage 实现。您的插件的每个实例都将被配置为返回正确的平面文件 .XSD 模式，并在接收到的消息的输入流中检查格式是否匹配（可能基于前几个起始字节）。然后，您的自定义管道组件会将其 IProbeMessage 实现委托给各种插件，直到消息被识别并返回平面文件 .XSD 模式。

**长答案**

我可以在这里复制一个很长的答案，但是请看一下我在[博客](http://maximelabelle.wordpress.com "技术视角")上写的以下系列文章。这些帖子将引导您完成自定义平面文件反汇编程序组件的实现，该组件使用我上面刚刚描述的确切技术动态解析要在运行时使用的平面文件 .XSD 模式。

请从这里开始：

*   [自定义 FlatFile 模式解析器和反汇编器管道组件](http://maximelabelle.wordpress.com/2010/10/20/a-custom-flatfile-schema-resolver-and-disassembler-pipeline-component/ "自定义 FlatFile 模式解析器和反汇编器管道组件")
*   [将安装和卸载逻辑添加到 .Net 组件](http://maximelabelle.wordpress.com/2010/10/28/adding-installation-and-uninstallation-logic-to-a-net%C2%A0component/ "将安装和卸载逻辑添加到 .Net 组件")
*   [自定义模式解析反汇编器实现](http://maximelabelle.wordpress.com/2010/11/04/custom-schema-resolve-disassembler%C2%A0implementation/ "自定义模式解析反汇编器实现")
*   [使用自定义模式对话框编辑设计时属性](http://maximelabelle.wordpress.com/2010/11/12/editing-design-time-properties-with-a-custom-modal-dialog/ "使用自定义模式对话框编辑设计时属性")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:15:24.893

根据您的问题，我将以利用每条记录中的标签标识符的方式构建您的架构，以便根据您指出的前两个字符使用记录架构。您的主架构中可能包含所有记录类型架构变体。看看[这里](http://blog.tallan.com/2007/10/25/handling-of-record-tag-identifiers-by-biztalk-2006-flat-file-schema-wizard/)和[这里](http://codebetter.com/jefflynch/2006/01/22/biztalk-server-2006-the-anatomy-of-a-positional-flat-file/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T01:55:53.440

有一个名为标签标识符的属性，但我怀疑它是否适用于您的场景。我要做的是在管道组件（反汇编阶段）的某处（数据库或 BRE）维护一个消息类型映射表戳记录的前 2 个字符，识别记录类型然后动态调用 FF 反汇编程序来反汇编信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T20:42:17.170

你可以通过多种方式做到这一点。

在平面文件模式向导中使用标记标识符。定义一个两个字符的字段，设置类型，定义所有 40 种类型的消息结构。标签标识符将为您整理它们。

您可以将其作为多部分/封装的消息。第一部分是两个字符的标识符（消息类型），另一部分是消息的其余部分。使用平面文件管道将输入转换为消息。确保推广标签字段。然后，您可以使用带有标签的第一个消息部分来为每种类型选择正确的映射。如果您希望消息类型会被更改，那会好很多。

# hibernate - 在休眠中设置 OneToMany ManyToOne 关系的最佳方法

> ID：10280072
> 
> 赞同：2
> 
> 时间：2012-04-23T11:56:46.773
> 
> 标签：hibernate, search, optimization, one-to-many, many-to-one

有谁知道为 OneToMany 和 ManyToOne 关系设置 Hibernate 关系以获得更快的搜索查询的最佳方法？我应该保留默认关系，使用 OneToMany(mappedBy=...)。或者是否有其他方式将其用于最佳结果。

我有一个实体树，并希望尽快加载任何给定节点下的所有关系。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-23T11:59:49.253

我不知道您是在谈论搜索还是加载对象图。

许多事情将提高加载对象图的性能。

1) 数据库表上的索引。
2）调优获取策略；避免 n+1 选择。
3）二级缓存

索引应该总是对你有帮助，而且也很重要。调整获取策略应该会对您有所帮助，二级缓存可能会对您有所帮助。对于第二个和第三个，您将不得不收集一些指标来确定最佳路径。

当你说你

> 希望尽快加载任何给定节点下的所有关系。

请注意不要一次加载太多数据。有时最好编写优化的 hql 来加载对象图的摘要以呈现给用户，然后当用户选择单个项目时，加载完整的对象。

# r - “#”不能用作read.table的字段分隔符？

> ID：10280074
> 
> 赞同：2
> 
> 时间：2012-04-23T11:56:47.537
> 
> 标签：r, dataframe

我尝试使用“#”作为字段分隔符将文件读入数据框。但看起来 R 无法识别它。为什么我不能使用“#”作为字段分隔符？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T12:06:33.213

见`?read.table`。您需要更改`comment.char`参数，因为这会覆盖您将分隔符设置为`#`.

尝试`read.table(foo.txt, sep = "#", comment.char = "")`

设置`comment.char = ""`注释解释的轮次（来自`?read.table()`）：

> `comment.char`: 字符：长度为 1 的字符向量，包含单个字符或空字符串。用于`""`完全关闭注释的解释。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T12:07:28.780

默认情况下，`read.table`解释`#`为注释字符。您可以通过`sep="#"`将 comment.char 指定为未出现在数据中的任何单个字符来更改此设置。例如，将注释字符设置为空字符串`comment.char=""`：

```
read.table(text="
A#B#C
1#2#3
4#5#6", header=TRUE, comment.char="", sep="#")

  A B C
1 1 2 3
2 4 5 6 
```

# regex - 通过过滤的查找结果获取详细数据

> ID：10280084
> 
> 赞同：0
> 
> 时间：2012-04-23T11:57:59.723
> 
> 标签：regex, bash, unix, find, ls

我需要获取所有以“dcc”结尾的文件的详细列表，所以我使用了这个：

```
find . -regex '.*\.dcc$' 
```

它奏效了。但正如我写的那样，我需要一个详细的列表，`ls -l`所以我使用了这个：

```
find . -ls -regex '.*\.dcc$' 
```

但这向我展示了目录中的所有文件。

我设法克服了这个问题

```
ls -l `find . -regex '.*\.dcc$'` 
```

但我很想知道这有什么问题：

```
find . -ls -regex '.*\.dcc$' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:01:36.463

订购很重要：

```
find . -regex '.*\.dcc$' -ls 
```

# blackberry - 黑莓现场经理（水平和垂直）

> ID：10280095
> 
> 赞同：0
> 
> 时间：2012-04-23T11:58:47.187
> 
> 标签：blackberry, horizontalfieldmanager

我想制作一个像这样的图像 [http://i.stack.imgur.com/bB8UM.png](http://i.stack.imgur.com/bB8UM.png)的用户界面 。我使用垂直和水平字段管理器等基本管理器。但我的水平管理器不起作用。我得到单个图像我的水平场经理而不是两个。这是什么原因？我哪里出错了？

这是我正在使用的代码-

```
package mypackage;

import net.rim.device.api.ui.*;
import net.rim.device.api.ui.component.*;
import net.rim.device.api.ui.container.*;
import net.rim.device.api.system.*;

class TestScreen extends MainScreen{

    private VerticalFieldManager verticalManager;
    private BitmapField myBitmapField,tipOfTheDay,completeBitmapField,top30BitmapField;
    private FooterText mTextField;

    TestScreen() 
    {    
        super(NO_VERTICAL_SCROLL);

        verticalManager = new VerticalFieldManager(Manager.VERTICAL_SCROLL|Manager.VERTICAL_SCROLLBAR)
        {
            public void paint(Graphics graphics)
            { 
                graphics.setBackgroundColor(0x00000000);
                graphics.clear();
                super.paint(graphics);
            }            
            protected void sublayout( int maxWidth, int maxHeight )
            {
                int width = Display.getWidth();
                int height = Display.getHeight();
                super.sublayout( width, height);
                setExtent( width, height);
            }
        };

        Bitmap logoBitmap = Bitmap.getBitmapResource("mybitmap1.png");
        myBitmapField = new BitmapField(logoBitmap, Field.FIELD_HCENTER);   

        verticalManager.add(myBitmapField);

        Bitmap mytipOfTheDay  = Bitmap.getBitmapResource("tipoftheday.png");

        verticalManager.add(tipOfTheDay = new BitmapField(mytipOfTheDay,Display.getWidth()));
        String text = "Lorem ipsum dolor sit amet, consectetuer \n"
            + "adipiscing elit, sed diam nonummy nibh euismod \n"
            + "tincidunt ut laoreet dolore magna aliquam erat  \n "
            + "volutpat. Ut wisi enim ad minim veniam, quis \n"
            + "nostrud exerci tation ullamcorper suscipit \n"
            + "lobortis nisl ut aliquip ex ea commodo consequat. \n"
            + "Duis autem vel eum iriure dolor in hendrerit in \n";
        verticalManager.add(mTextField = new FooterText(text, Display.getWidth(), Display.getHeight()/2));

        HorizontalFieldManager hfm = new HorizontalFieldManager();
        Bitmap complete  = Bitmap.getBitmapResource("Complete.png");
        Bitmap top30  = Bitmap.getBitmapResource("Top30.png");

        hfm.add(new BitmapField(complete));
        hfm.add(new BitmapField(top30));

        verticalManager.add(hfm);

        this.add(verticalManager);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:30:36.537

`Field`s 将在下面均匀分布`HorizontalFieldManager`，并且s 将以`HorizontalFieldManager`最大允许宽度容纳其子级。

```
HorizontalFieldManager hfm = new HorizontalFieldManager() {
    protected void sublayout(int maxWidth, int maxHeight) {
        int w = maxWidth;
        int h = 0;
        Field f0, f1;
        if (getFieldCount() == 2) {
            f0 = getField(0);
            f1 = getField(1);

            layoutChild(f0, maxWidth / 2, maxHeight);
            layoutChild(f1, maxWidth / 2, maxHeight);

            h = Math.max(f0.getHeight(), f1.getHeight());

            setPositionChild(f0, (maxWidth/2 - f0.getWidth()) / 2, (h - f0.getHeight()) / 2);
            setPositionChild(f1, maxWidth/2 + (maxWidth/2 - f1.getWidth()) / 2, (h - f1.getHeight()) / 2);
        }
        setExtent(w, h);
    };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:06:02.877

试试这个 -

```
 HorizontalFieldManager hfm = new HorizontalFieldManager(){
    protected void sublayout(int maxWidth, int maxHeight) 
      { 
      super.sublayout(Display.getWidth()/2,20);  
      setExtent(Display.getWidth()/2,20);
      }
    };
    Bitmap complete  = Bitmap.getBitmapResource("Complete.png");
    Bitmap top30  = Bitmap.getBitmapResource("Top30.png");

    hfm.add(new BitmapField(complete));
    hfm.add(new BitmapField(top30)); 
```

# reportviewer - ASP.NET ReportViewer 控件：使工具栏静态化

> ID：10280099
> 
> 赞同：0
> 
> 时间：2012-04-23T11:59:12.017
> 
> 标签：reportviewer, webforms, reporting-services

我在 ASP.NET WebForms 应用程序中使用 ReportViewer 控件来显示（并可选择导出/打印）报告。标准的东西真的。

但是，我的用户抱怨工具栏会随着报告内容滚动：因此，如果他们想移动到下一页，则必须先滚动回页面顶部。

我找不到任何文章（此处或其他地方）表明任何使工具栏静态的方法（例如，工具栏位于页面顶部，报告内容在下方滚动）。这里有人可以指出一种可能允许这样做的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:03:46.950

您是否为 reportviewer 设置了 AsyncRendering="True"？这将创建一个在其中呈现报告的 iframe。这将允许报告独立滚动。我假设 ShowToolBar="true" 存在于您的报告查看器标记中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:31:38.287

甚至我也使用报表查看器控件在 web 窗体上显示数据。但是，对我来说，工具栏永远不会向下滚动。我把我的reportviewer控制代码放在下面。请检查它是否有任何帮助。

```
<rsweb:ReportViewer runat="server" ID="rvData" ShowCredentialPrompts="False" ShowDocumentMapButton="False"
                ShowExportControls="true" ShowFindControls="False" ShowParameterPrompts="False"
                ShowPrintButton="true" ShowPromptAreaButton="False" ShowRefreshButton="False"
                ShowReportBody="True" ShowToolBar="true" ShowZoomControl="False" Visible="false"
                ShowPageNavigationControls="true" BackColor="#C8C8C8" LinkActiveColor="#0066CC"
                Width="100%" Height="600px">
        </rsweb:ReportViewer> 
```

如果您希望报告标题（而不是工具栏）保持在顶部（冻结），我可以向您展示如何..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:01:28.147

根据我对 rt2800 响应的评论，问题与针对 ReportViewer 控件设置的高度有关。我用一点 JavaScript 解决了这个问题，它根据屏幕上的可用空间调整控件的大小......

```
<script type="text/javascript">
    function resizeFormToClientHeight() {
        var reportViewer = document.getElementById("<%= form.ClientID %>");
        form.style.height = document.documentElement.clientHeight + "px";
    }
    resizeFormToClientHeight();
    window.onresize = function resize() { resizeFormToClientHeight(); }
</script> 
```

# php - index.php 没有打开

> ID：10280103
> 
> 赞同：3
> 
> 时间：2012-04-23T11:59:37.630
> 
> 标签：php

我在这里有一个文件 index.php：

[http://localhost/widget_corp/explore/home/](http://localhost/widget_corp/explore/home/)

但是当我输入这个路径并按回车时它不会打开 index.php 因此，如果我输入

[http://localhost/widget_corp/explore/home/index.php](http://localhost/widget_corp/explore/home/index.php)

它打开了！可能是什么问题？

编辑：我这里还有一个 index.php 文件：

[http://localhost/widget_corp/explore/staff/](http://localhost/widget_corp/explore/staff/)

当我输入此路径并按 Enter 时，它会打开 index.php

那么主目录有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:01:49.617

尝试将以下行添加到您的`.htaccess`文件中：

```
DirectoryIndex index.php index.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:01:27.657

您需要设置`DirectoryIndex`您的网络服务器的文件（我现在假设 apache）：

```
DirectoryIndex index.php 
```

在`httpd.conf`.

[http://httpd.apache.org/docs/2.0/mod/mod_dir.html](http://httpd.apache.org/docs/2.0/mod/mod_dir.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:02:07.973

看看你的`httpd.conf`。应该有一个名为`DirectoryIndex`wich 的行来控制它。它应该如下所示：

```
DirectoryIndex index.html index.htm default.htm index.php index.pl 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T12:02:10.397

可能是您在同一路径中有一个文件名 index.html。或者你没有目录索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T12:01:57.323

如果您使用的是 apache，则需要设置 DirectoryIndex

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-31T14:59:58.353

在我使用的 Apache 服务器的情况下，它通过向**.htaccess**文件中添加一行简单的代码来帮助我重写规则。在您的情况下，它可能是：

```
RewriteRule ^http://localhost/widget_corp/explore/home/$ http://localhost/widget_corp/explore/home/index.php [L] 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2018-06-18T20:13:46.360

从根文件夹中删除 .htaccess 对我有帮助。

# c# - 验证以确保日期不会介于现有日期之间或与现有日期重叠

> ID：10280119
> 
> 赞同：0
> 
> 时间：2012-04-23T12:00:34.547
> 
> 标签：c#, validation, datetime

基本上我有一个有效的从和有效到日期的报价。

例如：01/02/2012 至 03/02/2012

当我添加新报价时，我需要验证以确保此报价不属于上述现有报价或与现有报价重叠。

我目前的代码如下：

```
// Obtain the current list of coupons associated to the retailer.
List<RetailerCoupon> retailerCoupons = PayPalInStore.Data.RetailerCoupon.Find(x => x.RetailerId == RetailerId).ToList();

// Loop through each coupon and see if the timeframe provided in the NEW coupon doesnt fall between any EZISTING coupon.
if (retailerCoupons != null)
{
    foreach (RetailerCoupon coupon in retailerCoupons)
    {
        DateTime retailerCouponValidFrom = coupon.DateValidFrom;
        DateTime retailerCouponValidTo = coupon.DateExpires;

        if (DateTime.Compare(retailerCouponValidFrom, ValidFrom) < 0 && DateTime.Compare(retailerCouponValidTo, ValidTo) > 0)
        {
            return true;
        }

        if (retailerCouponValidFrom == ValidFrom && retailerCouponValidTo == ValidTo.AddHours(23).AddMinutes(59).AddSeconds(59))
        {
            return true;
        }
    }
}

return result; 
```

虽然这不起作用，但有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:10:17.250

在您决定开始日期和结束日期是包含还是不包含之后，检测重叠的常用方法是比较所考虑的两个范围的*相反*端。

您需要问“范围 1 是否在范围 2*结束之前**开始*？”和“范围 2 是否在范围 1*结束之前**开始*？”。如果这两个问题都得到了肯定的回答，那么你就有了重叠。

 ***从您当前的代码中我不清楚结尾是包含还是排他，所以我不会尝试发布实际代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:13:20.907

1）我认为`retailerCoupons`不能为空。

2）为什么`DateTime.Compare(t1, t2) < 0`在你可以写`t1 <= t2`的时候使用更具可读性？

3）如果要测试两个区间是否不重叠，请测试以下内容：

```
bool they_do_not_overlap = t1_end <= t2_start || t1_start >= t2_end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:15:32.600

不是直接回答您的问题，而是有机会谈论我最喜欢的库之一：[TimePeriod](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET) for .NET。阅读这篇文章会给你一些关于如何处理你的情况的提示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T12:16:02.803

怎么样，使用linq

```
var overlaps=retailerCoupons.Any(c=> c.DateValidFrom <= ValidTo && c.DateExpires >= ValidFrom); 
```

然后

```
result= !overlaps; 
```***

# sql - 对 SQL 中的参数列表执行存储过程

> ID：10280120
> 
> 赞同：1
> 
> 时间：2012-04-23T12:00:40.577
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-scripts

我有一个存储过程，它有一个名为`Id`：

```
CREATE PROCEDURE [TargetSp](
   @Id  [bigint]
)
AS 
BEGIN
   Update [ATable]
   SET [AColumn] = 
   (
     Select [ACalculatedValue] From [AnotherTable]
   )
   Where [ATable].[Member_Id] = @Id
END 
```

所以我需要将它用于一个 ID 列表，而不是一个 ID，例如：

```
Exec [TargetSp]
  @Id IN (Select [M].[Id] From [Member] AS [M] Where [M].[Title] = 'Example'); 
```

第一：如何为列表执行它？

第二：我多次执行sp或在目标脚本中重写它是否有任何性能差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:05:53.337

您可以使用表值参数（请参阅[http://msdn.microsoft.com/en-us/library/bb510489.aspx](http://msdn.microsoft.com/en-us/library/bb510489.aspx)）。通常，如果您只向服务器发送一个请求而不是请求列表，您将看到更短的执行时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:39:59.867

由于您只关心标题为“示例”的所有行，因此您不需要先确定列表，然后告诉 SQL Server 您要更新的列表，因为您已经可以通过查询识别这些行。那么为什么不这样做呢（我在这里猜测一些数据类型）：

```
ALTER PROCEDURE dbo.TargetSP
  @title VARCHAR(255)
AS
BEGIN
  SET NOCOUNT ON;

  -- only do this once instead of as a subquery:
  DECLARE @v VARCHAR(255) = (SELECT [ACalculatedValue] From [AnotherTable]);

  UPDATE a
    SET AColumn = @v
    FROM dbo.ATable AS a
    INNER JOIN dbo.Member AS m
    ON a.Member_Id = m.Id
    WHERE m.Title = @title;
END
GO 
```

现在称它为：

```
EXEC dbo.TargetSP @title = 'Example'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T13:48:53.413

```
 DECLARE @VId BIGINT;

 DECLARE [My_Cursor] CURSOR FAST_FORWARD READ_ONLY FOR
 Select [M].[Id] From [Member] AS [M] Where [M].[Title] = 'Example'
 OPEN [My_Cursor]
    FETCH NEXT FROM [My_Cursor] INTO @VId
    WHILE @@FETCH_STATUS = 0
    BEGIN
        EXEC [TargetSp]
        @Id = @VId
    FETCH NEXT FROM [My_Cursor] INTO @VId
END
CLOSE [My_Cursor]
DEALLOCATE [My_Cursor];
GO 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T12:44:06.163

类似于 freefaller 的示例，但使用 xml 类型并插入到表变量 @ParsedIds

```
DECLARE @IdXml XML = N'<root><id value="1"/><id value="2"/></root>'

DECLARE @ParsedIds TABLE (parsedId int not null)

INSERT INTO @ParsedIds (parsedId)
SELECT v.parsedId.value('@value', 'int')
FROM @IdXml.nodes('/root/id') as v(parsedId)

SELECT * FROM @ParsedIds 
```

有趣的是，我曾在一个拥有 1000 多个用户的大型系统上工作，我们发现使用这种方法对小 id 列表（不超过 5 个 id）执行表值参数方法。对于较大的 Id 列表，表值参数方法更快。

编辑以下已编辑的问题：

查看您的示例，您似乎想根据 Title 参数更新 ATable 。如果可以的话，您将从重写存储过程中受益，而不是 title 参数。

```
create procedure [TargetSP](
   @title varchar(50)
)
as 
begin

update [ATable]
set [AColumn] = 
(
    select [ACalculatedValue] from [AnotherTable]
)
where [ATable].[Member_Id] in (select [M].[Id] from [Member] as [M] where [M].[Title] = @title);

end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T12:12:08.007

我通常将这样的信息作为 XML 传递，然后您可以像使用表格一样使用它...根据需要选择、插入、更新

```
DECLARE @IDS NVARCHAR(MAX), @IDOC INT
SET @IDS = N'<ROOT><ID>1</ID><ID>2<ID></ROOT>'
EXEC sp_xml_preparedocument @IDOC OUTPUT, @IDS
SELECT [ID] FROM OPENXML (@IDOC, '/ROOT/ID', 2) WITH ([ID] INT '.') AS XMLDOC
EXEC sp_xml_removedocument @IDOC 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T12:26:27.973

如果参数是整数，则一次只能传递一个值。

您的选择是：

1.  多次调用proc，每个参数一次
2.  更改 proc 以接受一种结构，您可以在该结构中传递多个 id，例如传递逗号分隔的值列表（不太好）或表值参数的 varchar

关于性能问题，重写 proc 以遍历 id 列表比调用它几次（每个 id 一次）要快，但除非你正在处理一个巨大的 id 列表，否则我认为你不会看到差别很大

# wpf - 将 WPF 渲染为 PNG 时将 TransformGroup 添加到 FramworkElement

> ID：10280121
> 
> 赞同：0
> 
> 时间：2012-04-23T12:00:41.780
> 
> 标签：wpf, rendertransform

我有一个将一些 XAML 用户控件转换为 PNG 的应用程序 - 到目前为止效果非常好，不幸的是我现在需要将图像的大小加倍。

我的方法（那行不通！）是在加载后将 ScaleTransform 添加到可视元素...

此行是 SaveUsingEncoder 方法顶部的新行。

visual.RenderTransform = GetScaleTransform(2);

PNG 是新尺寸 (3000 x 2000) - 但 XAML 在图像中心以 1500x1000 呈现。

有人可以帮忙吗？

```
 private void Load(string filename)
    {
        var stream = new FileStream(filename), FileMode.Open);
        var frameworkElement = (FrameworkElement)(XamlReader.Load(stream));

        var scale = 2;

        var encoder = new PngBitmapEncoder();
        var availableSize = new Size(1500 * scale, 1000 * scale);

        frameworkElement.Measure(availableSize);
        frameworkElement.Arrange(new Rect(availableSize));
        name = name.Replace(" ", "-");
        SaveUsingEncoder(frameworkElement, string.Format(@"{0}.png", name), encoder, availableSize);
    }

    private TransformGroup GetScaleTransform(int scale)
    {
        var myScaleTransform = new ScaleTransform {ScaleY = scale, ScaleX = scale};
        var myTransformGroup = new TransformGroup();
        myTransformGroup.Children.Add(myScaleTransform);
        return myTransformGroup;
    }

    private void SaveUsingEncoder(FrameworkElement visual, string fileName, BitmapEncoder encoder, Size size)
    {
        visual.RenderTransform = GetScaleTransform(2);
        var bitmap = new RenderTargetBitmap(
            (int) size.Width,
            (int) size.Height,
            96,
            96,
            PixelFormats.Pbgra32);
        bitmap.Render(visual);

        var frame = BitmapFrame.Create(bitmap);
        encoder.Frames.Add(frame);

        using (var stream = File.Create(fileName))
        {
            encoder.Save(stream);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:33:43.343

在渲染到 RenderTargetBitmap 之前调用 visual.UpdateLayout

（感谢克莱门斯的回答——但他把它作为评论！）

# c# - 替换 CSV 分隔符

> ID：10280125
> 
> 赞同：-1
> 
> 时间：2012-04-23T12:00:47.327
> 
> 标签：c#

我正在尝试使用正则表达式替换 csv 分隔符，但无法理解参数。

示例文本：

```
2136203,"asd asdd","17 - Alpha","13 - Scsdeori Colsden",05.04.12,A,255659,"VOSDEFER ADEDEAN","SER.HDEDEA NR 52 BL - SC - AP -, PDEXTA, AEDD, CP 312337",RO26A34498,20.04.12,,12.04.12,"Confsdare" 
```

我想像这样拆分字符串：

1.  2136203
2.  asd asdd
3.  17 - 阿尔法
4.  13 - 斯科德里·科尔斯登
5.  05.04.12
6.  一个
7.  255659
8.  VOSDEFER ADEDEAN
9.  SER.HDEDEA NR 52 BL - SC - AP -、PDEXTA、AEDD、CP 312337
10.  RO26A34498
11.  20.04.12
12.  1.  12.04.12
13.  Confsdare

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:13:09.090

使用[此处](https://stackoverflow.com/questions/3507498/reading-csv-file)最佳答案中的示例来解析文件。

这会将您的文件变成`string[]`您一次读取一行的文件。

然后用您需要的格式写出一个新文件。

# jquery - 目录中的缩放功能（不在产品页面中）

> ID：10280126
> 
> 赞同：0
> 
> 时间：2012-04-23T12:00:52.987
> 
> 标签：jquery, magento

我在 Magento 1.6.2 上。我想在目录页面中具有缩放功能。当客户将鼠标悬停在产品图片上时，应该会显示更大的图片，例如[http://demo.superdit.com/jquery/zoom_hover/](http://demo.superdit.com/jquery/zoom_hover/)。请注意，我不希望它出现在产品页面中，只希望在目录中。

我有 fancybox 和 Jquery，这些库可以实现吗？如果可以使用上述库，我不想使用另一个扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:41:57.697

我最终使用 CSS :hover 选择器更改图像的尺寸以使其更大，并使用偏移量定位它，使其看起来像缩放。

这是代码：

```
:hover{
    height: 200px;
    margin-left: -55px;
    margin-top: -30px;
    position: absolute;
    width: 330px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:00:10.183

Fancybox 没有给你这个功能，但是我已经集成了 fancybox 和 magiczoom plus 并且完全没有问题。已经在生产中运行了一段时间。

需要任何指点给我一个喊。

# objective-c - 贝宝目标c库

> ID：10280127
> 
> 赞同：1
> 
> 时间：2012-04-23T12:00:54.373
> 
> 标签：objective-c, ios

我将移动支付库用于 iOS PayPal 集成，当我午餐时，演示示例仅在 iOS 4.3 模拟器上运行，但在 iOS 5 模拟器上午餐时出现此错误。

```
SimpleDemo[3594:ef03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSCFConstantString rangeOfString:options:range:locale:]: nil argument' </i> 
```

# java - 警告 WEB9052：无法加载类 com.organizer.ejb.ContactsBean，原因：java.lang.ClassNotFoundException

> ID：10280128
> 
> 赞同：1
> 
> 时间：2012-04-23T12:00:58.307
> 
> 标签：java, jakarta-ee, primefaces, managed-bean

我正在使用带有 Glassfish 3.1.2 的 NetBeans 7.1 来开发一个简单的 Java EE 6 Web 应用程序（一种地址簿）。我在网上广泛搜索了我的问题，但没有有用的结果。

我的应用程序使用 PrimeFaces 3.2 和 JSF 2.1.7。

**文件 ContactsBean.java**

```
package com.organizer.ejb;

import com.organizer.entity.Contact;
import java.util.List;
import javax.annotation.Resource;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.PersistenceUnit;
import javax.persistence.Query;
import javax.transaction.SystemException;
import javax.transaction.UserTransaction;

@ManagedBean
@RequestScoped
public class ContactsBean {

    private List<Contact> contacts;

    private Contact contact=new Contact();

    @PersistenceUnit(unitName="PersonalOrganizerJPA")
    private EntityManagerFactory emf;

        @Resource
        private UserTransaction utx;

        public ContactsBean()
        {

        }

    public List<Contact> getContacts() {
        EntityManager em = emf.createEntityManager();
        Query query = em.createQuery("SELECT c FROM Contact c");
        contacts = (List<Contact>)query.getResultList();
        return contacts;
    }

    public void salva(ActionEvent event){
        EntityManager em = emf.createEntityManager();
        try {
            utx.begin();
            em.joinTransaction();
            em.persist(contact);
            utx.commit();
            showGrowlInsMessage();
        } catch (Exception e) {
            try {
                utx.rollback();
            } catch (IllegalStateException e1) {
                showGrowlErrorMessage();
                e1.printStackTrace();
            } catch (SecurityException e1) {
                showGrowlErrorMessage();
                e1.printStackTrace();
            } catch (SystemException e1) {
                showGrowlErrorMessage();
                e1.printStackTrace();
            }
        }finally{
            em.close();
        }       
        contact=null;
    }
    public void aggiorna(ActionEvent event){

        EntityManager em = emf.createEntityManager();
        try {
            utx.begin();
            em.joinTransaction();
            em.merge(contact);
            utx.commit();
            showGrowlUpdMessage();
        } catch (Exception e) {
            try {
                utx.rollback();
            } catch (IllegalStateException e1) {
                showGrowlErrorMessage();
                e1.printStackTrace();
            } catch (SecurityException e1) {
                showGrowlErrorMessage();
                e1.printStackTrace();
            } catch (SystemException e1) {
                showGrowlErrorMessage();
                e1.printStackTrace();
            }
        }finally{
            em.close();
        }       
        contact=null;
    }
    public void elimina(ActionEvent event){

        EntityManager em = emf.createEntityManager();
        try {
            utx.begin();
            em.joinTransaction();
            Contact c = em.find(Contact.class, contact.getId());
            em.remove(c);
            utx.commit();
            this.showGrowlDelMessage();
        } catch (Exception e) {
            try {
                utx.rollback();
            } catch (IllegalStateException e1) {
                showGrowlErrorMessage();
                e1.printStackTrace();
            } catch (SecurityException e1) {
                showGrowlErrorMessage();
                e1.printStackTrace();
            } catch (SystemException e1) {
                showGrowlErrorMessage();
                e1.printStackTrace();
            }
        }finally{
            em.close();
        }       
        contact=null;
    }
    public void setContacts(List<Contact> contacts) {
        this.contacts = contacts;
    }

    public Contact getContact() {
        return contact;
    }

    public void setContact(Contact contact) {
        this.contact = contact;
    }

    private void showGrowlUpdMessage(){

        FacesContext context = FacesContext.getCurrentInstance();   

        context.addMessage(null, new FacesMessage("Successful", "Contatto aggiornato con successo"));   

    }
    private void showGrowlInsMessage(){

        FacesContext context = FacesContext.getCurrentInstance();   

        context.addMessage(null, new FacesMessage("Successful", "Contatto inserito con successo"));   

    }
    private void showGrowlDelMessage(){

        FacesContext context = FacesContext.getCurrentInstance();   

        context.addMessage(null, new FacesMessage("Successful", "Contatto eliminato con successo"));   

    }
    private void showGrowlErrorMessage(){

        FacesContext context = FacesContext.getCurrentInstance();   

        context.addMessage(null, new FacesMessage("Errore", "Operazione fallita"));   

    }
} 
```

**文件 web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.faces</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>faces/ContactsPage.xhtml</welcome-file>
    </welcome-file-list>
</web-app> 
```

**文件 ContactsPage.xhtml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>Contacts</title>
        <p:resources />
        <style>
            form{font-size:12px;}
        </style>
    </h:head>
    <h:body>
        <h:form>
        <p:spacer height="10"></p:spacer>
         <p:graphicImage value="Contacts" fontName="Tahoma" fontStyle="bold" fontSize="24"/>
         <p:spacer height="10"/>
        <p:panel header="Contacts">
            <p:dataTable var="contact" value="#{contactsBean.contacts}" id="tbl"
                selection="#{contactsBean.contact}" selectionMode="single"
                update="updForm:updDisplay" onselectComplete="updDialog.show()"
                paginator="true" rows="5">
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Nome" />
                    </f:facet>
                    <h:outputText value="#{contact.name}" />
                </p:column>
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Cognome" />
                    </f:facet>
                    <h:outputText value="#{contact.surname}" />
                </p:column>
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Telefono" />
                    </f:facet>
                    <h:outputText value="#{contact.telephone}" />
                </p:column>
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Professione" />
                    </f:facet>
                    <h:outputText value="#{contact.job}" />
                </p:column>
                <f:facet name="footer">

                     <h:panelGroup>
                        <h:commandLink>
                            <p:graphicImage value="/images/excel.png" style="border:none" />
                            <p:dataExporter type="xls" target="tbl" fileName="contacts"
                                pageOnly="true" />
                        </h:commandLink>

                        <h:commandLink>
                            <p:graphicImage value="/images/pdf.png" style="border:none" />
                            <p:dataExporter type="pdf" target="tbl" fileName="contacts"
                                pageOnly="true" />
                        </h:commandLink>

                        <h:commandLink>
                            <p:graphicImage value="/images/csv.png" style="border:none" />
                            <p:dataExporter type="csv" target="tbl" fileName="contacts"
                                pageOnly="true" />
                        </h:commandLink>

                        <h:commandLink>
                            <p:graphicImage value="/images/xml.png" style="border:none" />
                            <p:dataExporter type="xml" target="tbl" fileName="contacts"
                                pageOnly="true" />
                        </h:commandLink>

                    </h:panelGroup>
                </f:facet>
            </p:dataTable>
        </p:panel>
    </h:form>
    <p:spacer height="10" />
    <h:form id="updForm">

       <h:panelGrid columns="2">
        <p:commandButton oncomplete="newDialog.show()" value="Nuovo Contatto"
            update="newDisplay" ajax="true" />
        <p:themeSwitcher initialText="Cambia tema"></p:themeSwitcher>
       </h:panelGrid>

        <p:dialog widgetVar="updDialog" header="Contatto" width="430"
            height="220" modal="true">
            <p:outputPanel id="updDisplay">
                <h:inputHidden value="#{contactsBean.contact.id}" />
                <h:panelGrid columns="2">
                    <h:outputLabel value="Nome" />
                    <p:inputText value="#{contactsBean.contact.name}"></p:inputText>
                    <h:outputLabel value="Cognome" />
                    <p:inputText value="#{contactsBean.contact.surname}"></p:inputText>
                    <h:outputLabel value="Telefono" />
                    <p:inputText value="#{contactsBean.contact.telephone}"></p:inputText>
                    <h:outputLabel value="Professione" />
                    <p:inputText value="#{contactsBean.contact.job}"></p:inputText>
                </h:panelGrid>
                <p:commandButton value="Aggiorna" ajax="true"
                    actionListener="#{contactsBean.aggiorna}" update="tbl,growl"
                    onclick="updDialog.close()"></p:commandButton>
                <p:commandButton value="Elimina" ajax="true"
                    actionListener="#{contactsBean.elimina}" update="tbl,growl"
                    onclick="updDialog.close()"></p:commandButton>
                        <p:growl id="growl" showDetail="true"  /> 
            </p:outputPanel>

        </p:dialog>

    </h:form>
    <h:form>
        <p:dialog widgetVar="newDialog" header="Inserisci Contatto"
            width="430" height="220" modal="true">
            <p:outputPanel id="newDisplay">
                <h:panelGrid columns="2">
                    <h:outputLabel value="Nome" />
                    <p:inputText value="#{contactsBean.contact.name}"></p:inputText>
                    <h:outputLabel value="Cognome" />
                    <p:inputText value="#{contactsBean.contact.surname}"></p:inputText>
                    <h:outputLabel value="Telefono" />
                    <p:inputText value="#{contactsBean.contact.telephone}"></p:inputText>
                    <h:outputLabel value="Professione" />
                    <p:inputText value="#{contactsBean.contact.job}"></p:inputText>
                </h:panelGrid>
                <p:commandButton value="Salva" ajax="true"
                    actionListener="#{contactsBean.salva}" update="tbl"
                    onclick="newDialog.close()"></p:commandButton>
            </p:outputPanel>
        </p:dialog>
    </h:form>
    </h:body>
</html> 
```

**这就是 GlassFish 给我的警告。**

```
Warning: WEB9052: Unable to load class com.organizer.ejb.ContactsBean, reason: java.lang.ClassNotFoundException: com.organizer.ejb.ContactsBean 
```

**异常堆栈跟踪。**

```
Warning: Cannot create update center Image for C:\glassfish3; Update Center functionality will not be available in Admin Console
Information: p:resources component is deprecated and has no use in PrimeFaces 2.0 as JSF 2.0 resource apis are used instead to place resources on page.
Grave: Error Rendering View[/ContactsPage.xhtml]
javax.el.PropertyNotFoundException: /ContactsPage.xhtml @28,31 value="#{contactsBean.contacts}": Target Unreachable, identifier 'contactsBean' resolved to null
    at com.sun.faces.facelets.el.TagValueExpression.getType(TagValueExpression.java:100)
    at org.primefaces.component.datatable.DataTable.isLazy(DataTable.java:968)
    at org.primefaces.component.datatable.DataTableRenderer.encodeMarkup(DataTableRenderer.java:191)
    at org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:108)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:61)
    at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:45)
    at org.primefaces.component.panel.PanelRenderer.encodeContent(PanelRenderer.java:185)
    at org.primefaces.component.panel.PanelRenderer.encodeMarkup(PanelRenderer.java:108)
    at org.primefaces.component.panel.PanelRenderer.encodeEnd(PanelRenderer.java:55)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1534)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:326)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:227)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:170)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:822)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:719)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1013)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

**编辑：这是整个应用程序的结构。** [关联](http://i.stack.imgur.com/97Dc4.png "关联")

# c# - 寻找连接大字符串的更快方法

> ID：10280131
> 
> 赞同：2
> 
> 时间：2012-04-23T12:01:24.910
> 
> 标签：c#, .net, string-concatenation

我正在制作一个将图像转换为文本`RRR GGG BBB `字符串数组的应用程序。

它适用于小图像非常快，但是当输入图像的像素数非常高时，应用程序会逐渐变慢。

应用程序`x,y`循环遍历输入图像的所有像素，扫描每个像素并将其 RGB 格式的值添加到最终字符串中，该字符串将在扫描整个图像后保存为文本。

在内置分析器的帮助下，我发现`System.String.Concat(string,string)`最终字符串越大，所需的时间就越长。

然后，我尝试制作一个临时字符串，该字符串将保存 1 行的计算结果，并在输入下一行之前将其添加到最终字符串中。现在它的工作速度快了大约十倍，但仍然接近尾声，性能下降。

但最终我所有的测试图像都比真实图像要小。如何使用更大的图像保持高速连接速度？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T12:02:00.680

使用[System.Text.StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)：

```
var sb = new StringBuilder();
sb.Append(r);
sb.Append(g);
sb.Append(b);

string result = sb.ToString(); 
```

此类专为快速字符串连接而设计。我不知道有什么比它更快（对于一般情况）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T12:05:16.257

详细说明@abatishchev 的回答：

当你连接字符串时，你实际上是为每个连接创建一个新的字符串实例，所以你一直在分配数千个（数百万个？）小字符串。但是，StringBuilder 使用内部字符缓冲区来管理构建时的字符串，并避免这些频繁的分配。

用法是这样的：

```
StringBuilder sb = new StringBuilder();
foreach (Pixel pixel in myPixels)
{
    sb.Append(ConvertToString(pixel));
}

string myString = sb.ToString(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T12:11:48.407

正如大家所说，是的，使用 StringBuilder。

**但**

如果您已经将字符串以某种集合的形式连接起来，`String.Join()`证明会更快。

请注意。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T12:03:14.513

采用`String.Join("", myarray);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T12:05:57.277

像这样使用 StringBuilder：

```
//add reference
using System.Text

//create string builder
StringBuilder sb = new StringBuilder();
//add items to it
sb.Append("some text");
sb.Append(" more text"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T12:38:45.467

StringBuilder 设计用于处理庞大而复杂的字符串。

# c++ - 带有 enable_if 的“伪造”模板类方法特化

> ID：10280133
> 
> 赞同：1
> 
> 时间：2012-04-23T12:01:29.057
> 
> 标签：c++, templates, sfinae, enable-if

我想知道 SFINAE 原则/enable_if 是否可以用来“伪造”类模板方法的部分特化。例如，给定定义`Foo`了两个版本的类模板`Foo::bar`。如果（例如）我想启用一个并禁用另一个，`T2 = int`反之亦然。

```
template<typename T1, typename T2>
struct Foo
{
    void bar();
};

// Enable if T2 != int (disable otherwise)
template<typename T1, typename T2>
void Foo<T1,T2>::bar()
{
}

// Enable if T2 == int (disable otherwise)
template<typename T1, typename T2>
void Foo<T1,T2>::bar()
{
} 
```

PS：请提升 enable_if 的首选。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T12:04:29.273

[已编辑。]您可以通过键入布尔值来产生不同的重载：

```
#include <type_traits>

template <typename T1, typename T2>
struct Foo
{
    void bar_impl(std::true_type);
    void bar_impl(std::false_type);

    void bar() { bar_impl(std::is_same<T2, int>()); }
}; 
```

# php - PHP文件获取内容，http版本

> ID：10280134
> 
> 赞同：3
> 
> 时间：2012-04-23T12:01:34.110
> 
> 标签：php, http, file-get-contents

我正在使用 file_get_contents 函数来控制客户端，（例如`http://ip:port/?light=on`）

在浏览器中使用相应的命令时它可以工作，当我将相同的 url 与 file_get_contents 函数结合使用时它不起作用。

当我对请求进行wireshark 时，我注意到浏览器正在使用http/1.1，而file_get_contents 正在使用http/1.0。

我相信 http 的版本是我的代码无法正常工作的问题，

如何在 de file_get_contents 函数中更改此版本的 http？或解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T13:12:34.623

您可以使用上下文设置 HTTP 版本：

```
$context = stream_context_create(array('http'=>array('protocol_version'=>'1.1')));
file_get_contents('http://ip:port/?light=on', false, $context); 
```

另请参阅上下文选项的完整列表[http://www.php.net/manual/en/context.http.php](http://www.php.net/manual/en/context.http.php)

请注意，如果服务器使用分块编码，则必须使用 PHP 5.3 或更高版本。

# jakarta-ee - 如果部署在 ear 文件中，ActionServlet 无法访问 struts-config.xml

> ID：10280138
> 
> 赞同：0
> 
> 时间：2012-04-23T12:01:41.057
> 
> 标签：jakarta-ee, glassfish, struts, glassfish-3

我正在将一个 JavaEE 项目从 Sun Application Server 9.1 迁移到 Glassfish 3.1.2。该项目具有以下结构：

耳朵
| - /lib/someProject.jar（由 confictEJB 和 EJB 使用）
| - 冲突EJB.jar
| - EJB.jar
| - webProj.war

罐子和耳朵是用 Maven 构建的。问题是，这在 SAS 9.1 和 Glassfish 2.1 中部署没有错误。但在 Glassfish 3.2.1 中，我收到此错误：

```
#|2012-04-23T13:44:29.562+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=34;_ThreadName=Thread-2;|WebModule[/ArchiveTool]PWC1396: Servlet /ArchiveTool threw load() exception
javax.servlet.UnavailableException: Parsing error processing resource path /WEB-INF/struts-config.xml
at org.apache.struts.action.ActionServlet.handleConfigException(ActionServlet.java:739)
at org.apache.struts.action.ActionServlet.parseModuleConfigFile(ActionServlet.java:715)
at org.apache.struts.action.ActionServlet.initModuleConfig(ActionServlet.java:670)
at org.apache.struts.action.ActionServlet.init(ActionServlet.java:329) 
```

看起来 ActionServlet 无法解析/找到 GF3.2.1 中的 struts-config.xml。到目前为止我做了什么：

*   在 struts-config.xml 的 DOCTYPE 中引用了本地 DTD
*   struts-config.xml 的一般语法验证 -> 没有错误
*   根据 DTD 验证 struts-config.xml -> 没有错误
*   将 webProj.war 独立部署到 Glassfish -> 部署没有错误

战争项目的结构：

webProj.war
| - 一些东西（图像、css、js 等）
| - 元信息
| - 网络信息
    | -库
        | - struts.jar (an others)
    | - struts-config.xml
    | - struts-config_1_2.dtd
    | - glassfish-web.xml
    | - web.xml

有谁知道缺少什么或我可以在哪里检查任何进一步的配置？任何帮助是极大的赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:45:07.550

好的，这给了我解决方案的提示： [Maven - Creating Skinny WARs](http://maven.apache.org/plugins/maven-war-plugin/examples/skinny-wars.html)

我必须将 wars WEB-INF/lib forlder 中的每个 lib 放到 ears lib 文件夹中才能找到。含义 - 如 Maven 页面中所述 - 我必须将战争使用的所有依赖项的范围设置为`<scope>provided</scope>`并将依赖项添加到`pom.xml`.

所以耳朵包必须是这样的：

耳朵
| - /lib
    |- someProject.jar（由 confictEJB 和 EJB 使用）
    |- **struts.jar**
| - 冲突EJB.jar
| - EJB.jar
| - webProj.war

# windows-phone-7 - 获取 listboxitem 中的项目

> ID：10280141
> 
> 赞同：0
> 
> 时间：2012-04-23T12:01:52.643
> 
> 标签：windows-phone-7, windows-phone-7.1

我有一个关于列表框对象的 xaml 代码：

```
<ListBox x:Name="FirstListBox" Margin="0,0,-12,0" ItemsSource="{Binding Items}" SelectionChanged="FirstListBox_SelectionChanged">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <Grid>
                                    <TextBlock Text="{Binding LineOne}" TextWrapping="NoWrap" Margin="50,0,0,0" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                                    <TextBlock Text="{Binding LineTwo}" TextWrapping="NoWrap" Margin="12,60,0,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
                                    <CheckBox VerticalAlignment="Top" Margin="0,-5,0,0"/>
                                </Grid>                                
                            </StackPanel>                            
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

我通过代码得到了我的列表框项：

```
ListBoxItem item = this.list.ItemContainerGenerator.ContainerFromIndex(2) as ListBoxItem; 
```

但我不知道如何获取此列表框项目中的所有项目（包括文本块和复选框选项）。

请帮我。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:43:05.037

理想情况下，您希望将复选框绑定到项目数据模型的属性，例如，您可能有...

```
public string LineOne { get; set; }
public string LineTwo { get; set; }
public bool MyBooleanValue { get; set; } 
```

进而

```
<ListBox x:Name="FirstListBox" Margin="0,0,-12,0" ItemsSource="{Binding Items}" SelectionChanged="FirstListBox_SelectionChanged">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <Grid>
                    <TextBlock Text="{Binding LineOne}" TextWrapping="NoWrap" Margin="50,0,0,0" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                    <TextBlock Text="{Binding LineTwo}" TextWrapping="NoWrap" Margin="12,60,0,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
                    <CheckBox Checked="{Binding MyBoolValue, Mode=TwoWay}" VerticalAlignment="Top" Margin="0,-5,0,0"/>
                </Grid>                                
            </StackPanel>                            
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

然后，您可以拉回您当前正在查看的项目的 DataContext（通过点击方法或类似方法），或者当您解析“项目”集合时，所有复选框状态都将在您的子对象中。

# regex - 使用正则表达式匹配单词中的字符

> ID：10280145
> 
> 赞同：0
> 
> 时间：2012-04-23T12:02:04.883
> 
> 标签：regex

我有类似的字符串

```
"Rupeshposts-this-question" 
```

我需要一个正则表达式，它可以分别检查第一个单词是否包含`Rupesh`和`posts`。

像`[Rupesh][posts]`这样的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:11:53.217

真的不知道你在追求什么，但这是将一个词分成两部分的一种方法：

```
find: (Rupesh)\B(posts)
replace: \1 -something in between - \2 
```

似乎在没有`\B`:的情况下也可以工作`(Rupesh)(posts)`。

这会找到“Rupeshposts”但不是“Rupesh posts”）：

```
find: ((Rupesh)(posts))
replace: \2 -something in between - \3 
```

# php - PHP 在进程运行时刷新临时表单

> ID：10280151
> 
> 赞同：0
> 
> 时间：2012-04-23T12:02:14.187
> 
> 标签：php, javascript, html

我已经完成了一个简单的电子邮件。我希望这个电子邮件表单在一个过程中运行。用户将提交查询。他将不得不等待很短的时间才能得到结果。在这短暂的时间内，我希望屏幕显示我的电子邮件表单并每 5 秒不断刷新，当过程完成并准备好结果时，我希望表单离开，脚本继续创建结果页面。

我在想javascript？

```
     函数时间刷新（超时）{
     setTimeout("location.reload(true);",timeoutPeriod);

```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:07:52.183

您可以使用 AJAX 请求执行查询

当发送的请求显示一个灯箱时，你可以使用这个我喜欢它

[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

从服务器返回响应后，您检查文本字段是否为空，如果它为空，请关闭灯箱，否则让用户完成表单并关闭它

如果您需要代码，请发表评论

* * *

```
// show light box 
$.ajax({

                  url: 'QueryFile.php',
                  type:'post',
                  data:{variable:value,},
                  dataType:'html',
                  success: function(data) {
                     //close modal box 
                  },
                 error:function(error)
                 {
                     console.log(error); 
                    alert("Sorry there was an error while performing your query ");  
                 }
                }); 
```

# events - 在本机 C++ COM 组件中捕获从托管 dll 触发的事件

> ID：10280155
> 
> 赞同：0
> 
> 时间：2012-04-23T12:02:29.570
> 
> 标签：events, interop

我正在编写一个托管的 .NET dll，它是从本机 c++ 代码调用的（类似于这里所做的：http: [//support.microsoft.com/kb/828736](http://support.microsoft.com/kb/828736)）。

事情是这样的：作为 .NET 逻辑的一部分，应该触发一个事件，我想在放置在我的 C++ 代码中的处理程序中捕获该事件。

我在网上搜索过，但无法找到有关如何完成此操作的彻底而清晰的解释。你能提供帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:15:18.167

你读过[那个](http://msdn.microsoft.com/en-us/library/dd8bf0x3.aspx)吗？

您的本机 C++ 代码是事件接收器，而您的托管对象（触发事件）将是事件源。

# http - SOAP 中的授权

> ID：10280156
> 
> 赞同：0
> 
> 时间：2012-04-23T12:02:29.877
> 
> 标签：http, authentication, soap

我想对在我的服务器上发送 SOAP 请求的用户进行身份验证，并且我想使用基本授权。在 REST 中，我通常使用`Authorization`标题。我也可以在这里使用它还是应该使用`soap:Header`这样的元素？

```
<SOAP-ENV:Header>
  <h:BasicAuth xmlns:h="http://soap-authentication.org/basic/2001/10/"
               SOAP-ENV:mustUnderstand="1">
     <Name>admin</Name>
     <Password>broccoli</Password>
  </h:BasicAuth>
</SOAP-ENV:Header> 
```

我不确定哪一个是正确的解决方案。

# mysql - 使用服务器端准备好的语句进行子查询？

> ID：10280157
> 
> 赞同：2
> 
> 时间：2012-04-23T12:02:31.233
> 
> 标签：mysql, prepared-statement

我正在使用一个奇怪的数据库模式：我要查找的数据存储在 30 列之一中：`value1, value2, value3 ... value30`。

使用查询，我知道要查找的列号：

![在此处输入图像描述](../Images/536cc31cf049cbca2d1aa6f4a1ddd768.png)

我怎样才能用这个数字告诉mysql给我带来，对于每个“machine_id”，对应的“ `valuex`”列？

我已经阅读了[MySQL concat() 来创建要在查询中使用的列名？](https://stackoverflow.com/questions/985842/mysql-concat-to-create-column-names)，我应该应用该技术还是寻找其他地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:37:06.693

如果您正好有 30 个字段（表架构没有改变），那么您可以使用简单的 SQL 查询 -

```
SELECT
  machine_id,
  SUM(IF(where_is_data = 1, value1, NULL)) AS value1,
  SUM(IF(where_is_data = 2, value2, NULL)) AS value2,
  SUM(IF(where_is_data = 3, value3, NULL)) AS value3,
  ...
  SUM(IF(where_is_data = 30, value30, NULL)) AS value30
FROM
  table
GROUP BY
  machine_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:14:59.720

我做了一个简单的`CASE`：

```
SELECT
    inverter.id as inverter_id,
    SUM(CASE
        when csvData.value = 1 then data.value1
        when csvData.value = 2 then data.value2
        when csvData.value = 3 then data.value3
        (...)
        when csvData.value = 30 then data.value30   
    END)
    as value

FROM
    (...) 
```

# ruby-on-rails - 未选中时，如何使 check_box_tag 发布“false”或“0”参数？

> ID：10280162
> 
> 赞同：41
> 
> 时间：2012-04-23T12:02:50.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3, checkbox, params

使用以下 check_box_tag：

```
<%= check_box_tag 'object[boolean_attribute]', 1, object.boolean_attribute %> 
```

我只能在一个方向上更新 boolean_attribute：从 false 到 true。

默认情况下未选中何时（因为 object.boolean_attribute 为 false）并且我检查它然后提交表单，发布 :boolean_attribute => 1 参数。

**但是**，当我尝试从 true 更新为 false 时，没有传递任何参数，因此 boolean_attribute 保持为 true。

换句话说，默认情况下检查时（因为 object.boolean_attribute 为真）并且我取消选中它然后提交表单， :boolean_attribute => 0**不会**发布。

未选中时，如何使此 check_box_tag 发布 :boolean_attribute => 0 参数？

从 api 我无法弄清楚是否有一些选项可以通过来轻松实现它： [http ://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag)

谢谢你。

**编辑**

由于某种原因，我无法理解，在我的实际代码中（具有嵌套的多对多关联） hidden_​​field_tag 不起作用。

```
<%= hidden_field_tag 'order[preparations_attributes][][cooked]', nil %>
<%= check_box_tag 'order[preparations_attributes][][cooked]', '1', preparation.cooked? %> 
```

现在我遇到了相反的问题：我可以取消选中该复选框，并且准备更新为方面，但是如果我选中该复选框，它会弄乱参数。

以下是未选中框的已发布参数：

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"bGgPGbk+Cuk2q+LEgqetmk4e7xie8dB3iMP9Cj3SUm0=", "order"=>{"customer_name"=>"Duccio Armenise", "duedate"=>"2012-04-25 09:24:00.000000", "preparations_attributes"=>[{"quantity"=>"1", "description"=>"custom recipe", "kind"=>"custom", "cooked"=>"", "recipe_id"=>"9", "id"=>"86", "quantities_attributes"=>[{"ingredient_id"=>"", "qty"=>"", "_destroy"=>"0"}, {"ingredient_id"=>"11", "qty"=>"5.0", "id"=>"193", "_destroy"=>"0"}], "_destroy"=>"0"}], "add_preparation"=>{"recipe_id"=>""}}, "continue"=>"Confirm", "id"=>"31"} 
```

现在看看当我选中复选框时有多乱，从“cooked”=>“”开始，由于某种原因，Rails 过早地关闭了 prepare_attributes 哈希！

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"bGgPGbk+Cuk2q+LEgqetmk4e7xie8dB3iMP9Cj3SUm0=", "order"=>{"customer_name"=>"Duccio Armenise", "duedate"=>"2012-04-25 09:24:00.000000", "preparations_attributes"=>[{"quantity"=>"1", "description"=>"custom recipe", "kind"=>"custom", "cooked"=>""}, {"cooked"=>"1", "recipe_id"=>"9", "id"=>"86", "quantities_attributes"=>[{"ingredient_id"=>"", "qty"=>"", "_destroy"=>"0"}, {"ingredient_id"=>"11", "qty"=>"5.0", "id"=>"193", "_destroy"=>"0"}], "_destroy"=>"0"}], "add_preparation"=>{"recipe_id"=>""}}, "continue"=>"Confirm", "id"=>"31"} 
```

**编辑#2**：

我想我遇到了与深层嵌套资源表单和参数传递相关的 Rails 错误：[https ://github.com/rails/rails/issues/5937](https://github.com/rails/rails/issues/5937)

现在我让它与 select_tag 一起工作：

```
<%= select_tag 'order[preparations_attributes][][cooked]', options_for_select({yes: 1, no: 0}, preparation.cooked? ? 1 : 0) %> 
```

我认为切换到 select_tag 以避免“hidden_​​field gotcha”是一种可接受的解决方法。

无论如何，谢谢你的答案！

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-23T12:44:26.343

`check_box`(w/o `_tag`) 助手添加隐藏字段来为您解决问题：

```
<%= check_box 'object', 'boolean_attribute', {}, 'true', 'false' %>

# result:
<input name="object[boolean_attribute]" type="hidden" value="false" />
<input id="object_boolean_attribute" name="object[boolean_attribute]" type="checkbox" value="true" /> 
```

**UPD：**处理嵌套资源（产品`accepts_nested_attributes_for`：line_items）

```
= form_for @product, url: '' do |f|
  %p
    = f.label :title
    = f.text_field :title

  = f.fields_for :line_items do |li|
    = li.check_box :approved
    = li.label :approved, li.object.id
    %br
  = f.submit 
```

检查 3 个复选框中的 2 个给我的结果`params`如下：

{..., "product"=>{"title"=>"RoR book", "line_items_attributes"=>{"0"=>{"approved"=>"0", "id"=>"47" }, "1"=>​​{"已批准"=>"1", "id"=>"48"}, "2"=>{"已批准"=>"1", "id"=>"51" }}}, "commit"=>"更新产品", "action"=>"action1", "controller"=>"test"}

`params`作为 YAML 的可读性：

> ```
> product:
>   title: RoR book
>   line_items_attributes:
>     '0':
>       approved: '0'
>       id: '47'
>     '1':
>       approved: '1'
>       id: '48'
>     '2':
>       approved: '1'
>       id: '51' 
> ```

看？没有隐藏字段，但选中/未选中状态被清楚地区分。

有了这个`params`，我可以使用一行代码来更新相关的 line_items：

```
@product.update_attributes params[:product] 
```

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-23T12:33:23.807

您可以使用复选框上方的隐藏字段：

```
<%= hidden_field_tag 'object[boolean_attribute]', nil %> 
```

这样，即使您的复选框未被选中，您仍然会被`nil`提交。这对你有用吗？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-09-26T05:38:54.460

如果有人有列类型 boolean 并使用，`check_box_tag`那么看看这个。它对我有用。 `<%= hidden_field_tag 'order[preparations_attributes][][cooked]', 'false' %> <%= check_box_tag 'order[preparations_attributes][][cooked]', true, preparation.cooked? %>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-10T11:02:39.000

在我的 Rails 应用程序中，我需要在 true 和 false 周围添加单引号。

原始代码

```
<%= f.check_box :admin, {}, true, false %> 
```

更新代码

```
<%= f.check_box :admin, {}, 'true', 'false' %> 
```

我希望这对其他人有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-16T15:44:14.230

对于类似复选框的数组，您也可以使用哈希：

```
= hidden_field_tag "ad_ids[#{ad.token}]" , false
= check_box_tag "ad_ids[#{ad.token}]" , true, true 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-24T23:17:04.507

你不会只使用这个`.present?`功能吗？`nil`被认为不存在，因此结果为真或假。

```
= check_box_tag :show_nav, @obj.show_nav.present? 
```

# backbone.js - _ 未定义 _.extend(Model.prototype, Events, { 但它在包含的文件中

> ID：10280171
> 
> 赞同：3
> 
> 时间：2012-04-23T12:03:42.060
> 
> 标签：backbone.js

[我已经从http://documentcloud.github.com/backbone/](http://documentcloud.github.com/backbone/)下载了主干.js ，将该文件包含在脚本标记中并在 onReady 函数中创建视图，例如[http://documentcloud.github.com/backbone/#View](http://documentcloud.github.com/backbone/#View) 但我总是获取消息**** _ 未定义 _.extend(Model.prototype, Events, {**** 但是当我查看文件时 _extend 在那里并且路径是 100% 好的。有人有同样的行为吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T12:40:21.317

Backbone 依赖于[Underscore](http://documentcloud.github.com/underscore/)。首先包括它。

# ajax - 具有基本身份验证的跨浏览器 AJAX 请求

> ID：10280172
> 
> 赞同：0
> 
> 时间：2012-04-23T12:03:42.297
> 
> 标签：ajax, cross-browser

我目前正在尝试发出跨浏览器 AJAX 请求以从联网摄像机返回流，但是即使提供了用户名和密码，它也总是要求输入用户名和密码。我还尝试将网络凭据应用于后端代码中的 Uri，并将生成的 Uri 发送回页面，但再次要求登录。javascript如下：

```
$.ajax({
type: "GET",
crossDomain: true,
//dataType: 'JSONP',
url: "@Url.Content("~/GetImage")",
data: {username: 'xxx', password: 'xxx' },
//username: 'xxx',
//password: 'xxx',
beforeSend: function (xhr) { 
   xhr.setRequestHeader ("Authorization", "Basic"); 
},
success: function(data){
   alert(data);
   $('#CameraImage').attr('src', data);
 },
 error: function(error, status, thrownerror) {
    alert(thrownerror);
 }
}); 
```

我尝试了上述的各种组合，但无济于事（注释代码）。我需要将 URL 指向图像的源以显示流。有没有人尝试过这种事情，如果可以的话，可以为我指明正确的方向吗？

非常感谢您的关注！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:27:27.767

如果您使用 Java，下面的链接将帮助您确定，

[http://mytechbites.blogspot.in/2009/07/cross-domain-xmlhttprequest-calls.html](http://mytechbites.blogspot.in/2009/07/cross-domain-xmlhttprequest-calls.html)

# gwt - gwt 初学者-当我在服务器上进行 RPC 调用时出错-相同的代码在 gwt 开发模式下工作

> ID：10280178
> 
> 赞同：0
> 
> 时间：2012-04-23T12:04:05.330
> 
> 标签：gwt, rpc

我创建了一个简单的 gwt 应用程序（使用 gwt 2.4），它进行单个 RPC 调用。

当我在 GWT Dev 模式下运行它时，它运行良好，但是当我尝试在服务器上运行它时——这是我得到的消息——

```
POST http://app.sparkcrawler.com/com.arvindikchari.auth.App/AuthenticationService 404 (Not Found) 
```

我已将 Eclipse GWT 项目中 WAR 文件夹中的所有文件复制到 Web 服务器的文件夹中。Web 服务器使用 Tomcat 5.5（带有 Cpanel 控制面板）。在成功编译文件（“GWT Compile Project”）后，我复制了这些文件......

我在这里做错了什么？我错过了一些文件吗？我已将 war 文件夹中的所有内容（包括“WEB-INF”文件夹及其内容）复制到 Web 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:32:31.197

我认为，复制 Eclipse 项目的 WAR 文件夹不是将 GWT 应用程序部署到服务器的合适方式。

您首先必须针对生产模式进行编译（请参阅[了解 GWT 编译器](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideJavaToJavaScriptCompiler)），然后使用生成的 JavaScript 文件创建一个包含服务器端类的 WAR，您可以将其部署到 Tomcat 服务器。（请参阅[部署 GWT 应用程序](https://developers.google.com/web-toolkit/doc/latest/DevGuideDeploying)）

您可以使用 Ant 或 Maven 自动执行此过程。

# php - 如何对除ID之外的一行中所有列的值求和

> ID：10280183
> 
> 赞同：0
> 
> 时间：2012-04-23T12:04:25.667
> 
> 标签：php, mysql, sum, row

我需要对除第一列之外的一行的总数求和。
也有类似的东西：

从数字中选择总和（col2 + col3 + col4 +colN），其中 user_name = 'person';

我的表将不断添加列。所以我希望它也自动获取新列的总和，而无需将其硬编码到查询中？

```
user_name  | Col | col2 | Col3 | Col4 + other columns.

person1    |  2  |  3   | 76   | 56  etc.    ---------> sum of row

person2    |  6  |  72  | 200  | 13  etc.    ---------> sum of row 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:16:58.793

不希望“避免”这个问题，但看起来你可以使用不同的数据结构。

您应该考虑创建一个包含`id`and列的“用户”表`user_name`，以及一个新表（例如`properties`），在当前表（`Col1`, `Col2`... `ColN`）中的每个其他列都有一行。然后，新表将有一个 user_name 列，以将其链接到 users 表。

这样你就可以做类似的事情：

```
SELECT SUM(property_column) FROM properties WHERE user_name = <RequiredUserName> 
```

我还建议按 ID 选择用户（即，让`properties`表带有 user_id 列，而不是 user_name 列），除非您确信 user_name 永远不会改变（即使那样......）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:23:36.117

也许最简单的解决方案是在 PHP 中进行：

```
$res = mysql_query("select * from numbers where user = ...");
while ($row = mysql_fetch_assoc($res)) {
    $row['Id'] = 0; // don't want to sum the Id
    $sum = array_sum($row); // this is the required sum
    ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:17:10.953

如前所述，您最好重新访问您的数据库结构，如果您不能并且如果您想在 PHP 中执行此操作，您可以获取结果集，然后循环遍历字段并排除您不想要的字段，然后添加其他一切，假设它是正确的类型，使用 mysql_field_type 来查找特定类型的那些。

# asp.net - html 使用 aps.net 和 htmlAgility 抓取 POST 信息

> ID：10280189
> 
> 赞同：0
> 
> 时间：2012-04-23T12:04:56.777
> 
> 标签：asp.net, post, web-scraping, html-agility-pack

我正在从事一个网络抓取项目，我知道如何通过 HtmlAgilityPack 从目标页面获取某些数据。但我不知道在该页面的帖子信息中发送什么。该页面未通过查询字符串发送任何信息。该页面中有三个文本框，两个复选框和一个搜索按钮

当我用萤火虫检查按钮时，它会提供以下信息

```
<img border="0" align="top" onclick="javascript:PVO_PId_Search(
                document.ProtocolForm.searchplt,
                document.ProtocolForm.towcheck.checked,
                document.ProtocolForm.collateralcheck.checked,
                document.ProtocolForm.selState[document.ProtocolForm.selState.selectedIndex].value,
                document.ProtocolForm.selPltType[document.ProtocolForm.selPltType.selectedIndex].value)" onmouseout="this.className='flyOut'" onmouseover="this.className='flyOver'" alt="Search" value="PSearch" name="PSearch" onload="javascript:updateButtonWithOneTxtbox(document.ProtocolForm.searchplt,this,'v_images/Search_button.gif','v_images/Search_button_grey.gif');" src="v_images/Search_button.gif" class="flyOut"> 
```

现在我的问题是，是否有任何可用的工具或 firefox 插件可供我使用和监视（或调试）它传递的 Post 信息类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:28:07.180

您可以使用 Chrome 和/或 Safari 等中的内置 Web 开发人员工具来检查客户端（浏览器）和（服务器）网站之间的所有 http 请求/响应。您将在*NETWORK*检查器工具中看到它。

但是，除非它是您的网站，或者一些有价值的教育实验，否则您是否可以真正**欺骗**（是的，这就是它真正的意思）到该网站的 POST（或 GET）取决于它是否具有一些内置保护/validations 保护它免受此类尝试。

更新：

只需启动**Chrome**和（在 Windows 上）`CTRL+SHIFT+I`（Safari，它的`CTRL+ALT+I`），您应该会看到 NETWORK INSPECTOR： ![在此处输入图像描述](../Images/b1ef2377eacc82d65ac12c92cff3b77f.png)

更新 2：仅供参考，如果您想要不依赖于浏览器的网络检查，[Fiddler](http://fiddler2.com/fiddler2/)始终是我个人工具包的一部分。

# jquery - 如何根据成功处理程序中的返回值隐藏按钮？

> ID：10280195
> 
> 赞同：2
> 
> 时间：2012-04-23T12:05:12.963
> 
> 标签：jquery, ajax

我是 Jquery 的新手。我有这样的代码：

```
$.ajax({
    url: "${createLink(controller :"
    tasks ", action :"
    holidayStatus ")}",

    data: "userName=" + $("#user").find('option:selected').text() + "&date1=" + $("#datePicker").val() + "&date2=" + $("#datePicker2").val(),
    cache: false,
    success: function(html) {
        $(".errors").append(html);
        $(".errors").delay(1000).fadeIn('slow');
        $("#createButton").delay(1000).fadeOut('slow');
    })​ 
```

这按预期工作。在我的`success`处理程序中，我将`html`（我从服务器端获得的）附加到`.errors`类中。同时我用 id 隐藏按钮`createButton`。

但我想要的是一种方法来查找处理程序中是否`html`包含`success`任何数据（其中可能`html`没有任何*内容*）。如果是这样，我需要禁用`createButton`id 如果不是我不应该做任何事情。

如何进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:07:31.410

```
if ($(html).contents().length) // there is content in html 
```

[**现场演示**](http://jsfiddle.net/u3U6d/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:10:26.020

假设这`html`是一个字符串，您可以简单地检查一个`html.legth > 0`.

```
success: function(html) {
    if (html.length > 0) {
        $(".errors").append(html);
        $(".errors").delay(1000).fadeIn('slow');
        $("#createButton").delay(1000).fadeOut('slow');
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:13:05.843

你可以写：

```
$.ajax({
  url: "${createLink(controller :"tasks", action :"holidayStatus")}",
  data: "userName=" + $("#user").find('option:selected').text() + "&date1=" 
                    + $("#datePicker").val() + "&date2=" 
                    + $("#datePicker2").val(),
  cache: false,
  success: function(html) {
           if(html)
           {
               $(".errors").append(html);
               $(".errors").delay(1000).fadeIn('slow');
               $("#createButton").delay(1000).fadeOut('slow');
               $("#createButton").removeAttr('disabled'); //remove disabled
           }else{
               $("#createButton").attr('disabled','disabled'); //disable button                   
           }                     
}) 
```

问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T12:15:18.370

**dataTypeString** 默认值：Intelligent Guess（xml、json、script 或 html）您期望从服务器返回的数据类型。如果没有指定，jQuery 将尝试根据响应的 MIME 类型推断它。

**"html"** : 以纯文本形式返回 HTML；包含的脚本标签在插入 DOM 时进行评估。

```
//"html" is a string, so simple take it length
if(html.length > 0) {
  $(".errors").append(html);
  $(".errors").delay(1000).fadeIn('slow');
  $("#createButton").delay(1000).fadeOut('slow');  
} 
```

# java - 将 TXT 文件信息解析为整数

> ID：10280196
> 
> 赞同：0
> 
> 时间：2012-04-23T12:05:13.143
> 
> 标签：java, android, file, parsing, counter

我找不到任何相关的东西（即使有数百个解析问题）：

类似于一个好的旧网站计数器，我喜欢将一个数字存储在 sd 卡上的 txt 文件中。每次在应用程序中激活一个方法时，它应该读取一个 txt 文件的编号，加 1 并再次保存。

如果我尝试下面的代码，它会创建一个奇怪的字符串，而不是 Int。如何解决这个问题呢？:-(

```
FileWriter writer;
File file;
FileInputStream fileIS;  

public void implementCounter()
{
    File sdcard = Environment.getExternalStorageDirectory();
    int counter = 0;

    try{

           File f = new File(sdcard +"/Experiment/Counter.txt");             
           fileIS = new FileInputStream(f);          
           BufferedReader buf = new BufferedReader(new InputStreamReader(fileIS));                               
           //counter = Integer.parseInt(buf.readLine());
           String readString = new String();             

           //just reading each line and pass it on the debugger          
           /*while((readString = buf.readLine())!= null){            
              Log.d("line: ", readString);           
           }*/
           readString = buf.readLine();
           try {
                counter = Integer.parseInt(readString.toString());
            } catch(NumberFormatException nfe) {
               Log.d("line: ", "XXX: " + readString + "E");
            } 

        } catch (FileNotFoundException e) {          
           e.printStackTrace();          
        } catch (IOException e){             
           e.printStackTrace();          
        }

    //Create / Write LogFile
    file = new File(sdcard + "/Experiment/Counter.txt");

    try 
    {
        counter++;
        writer = new FileWriter(file ,false);
        writer.write(counter);         
        writer.flush();
        writer.close();
    } 
    catch (IOException e) 
    {
        e.printStackTrace();
    }
} 
```

这个想法是，新的 FileWriter 只是用高一个数字覆盖旧文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:37:43.573

这两个函数是静态的。您可以使用它们来检索您的计数并保存它（设置它）。有关更多信息，请尝试熟悉[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)。不客气 （：

```
 private static boolean setMyLovelyCount(Context mContext, int value) {
        SharedPreferences prefs = mContext.getSharedPreferences(
                "mylovelyprefs", 0);
        SharedPreferences.Editor editor = prefs.edit();
        editor.putInt("mylovelyCount", value);
        return editor.commit();
    }

    private static int getMyLovelyCount(Context mContext, int defaultvalue) {
        SharedPreferences prefs = mContext.getSharedPreferences(
                "mylovelyprefs", 0);
        return prefs.getInt("mylovelyCount", defaultvalue);
    } 
```

# android - PopupWindow 和 setBackgroundDrawable

> ID：10280198
> 
> 赞同：0
> 
> 时间：2012-04-23T12:05:16.427
> 
> 标签：android

`setBackgroundDrawable`在显示 PopupWindow 之前调用可以正常工作。但是当我在显示 PopupWindow 后调用它时，它没有任何效果。

在显示 PopupWindow 后，我需要设置背景的特殊方法吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:22:51.610

`invalidate()`打电话后试试`setBackgroundDrawable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:55:39.487

找到了！我可以设置 PopupWindow 主布局视图的背景...

# windows-phone-7 - 如何在 Windows Phone 7.1 中导航回主屏幕

> ID：10280204
> 
> 赞同：0
> 
> 时间：2012-04-23T12:05:48.247
> 
> 标签：windows-phone-7, homescreen, marketplace, back-stack

我创建了一个具有主屏幕/登录页面的应用程序，现在每当用户导航到最后一页并单击设备后退按钮时，他都会被重定向回主屏幕。现在的问题是，每当用户在主屏幕 OnNavigatedTo 块中登陆主屏幕时，我已经编写了代码来清除所有后台堆栈。因此，每当用户单击最后一页的设备后退按钮时，他都会通过创建 HomeScreen 页面的新实例导航到主屏幕。在主屏幕上，后台堆栈被清除，因此用户可以在单击设备后退按钮时从主屏幕退出应用程序。但根据 Microsoft 市场政策，后退按钮必须返回或返回到 backstack 中的上一页，而不是导航到新页面。所以这里的问题是我应该清除所有的后台并进入主屏幕还是我正在做的事情是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:11:21.397

据我所知，他们没有那么严格。他们只是想让你处理后退按钮。

我在我的应用程序的某些页面中阻止了后退按钮，并且认证失败。我改变了应用程序的行为，要么在导航回来时关闭应用程序，要么向后跳几页，它通过了认证。

只需确保后退按钮执行某些操作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:17:27.887

他们不建议您这样做的原因是您使用了错误的组织。

*   更深入通常意味着你会获得更多具体的数据，在某种程度上你可以回到一页。
*   走到一边通常意味着您获得更多数据，例如。全景/枢轴

我看不到更深入会禁止用户返回中间页面的情况，如果我必须每次都重新启动它，或者当它实际上应该让它更深入时，我不会使用您的应用程序我滚动浏览内容。

试图围绕他们的认证绝对不是你应该采取的方式，而是接受它。

有关全景和枢轴控件的布局提示和技巧，请参阅[此页面](http://www.microsoft.com/design/toolbox/tutorials/windows-phone-7/layout-tips/)。

* * *

根据评论，您可能会发现放弃学习所有平台要容易得多。

一个[jQuery Mobile](http://jquerymobile.com/)应用程序可以为您做到这一点。

> jQuery 移动框架将“少写，多做”的口号提升到一个新的水平：jQuery 移动框架允许您设计一个可以运行的高品牌网站或应用程序，而不是为每个移动设备或操作系统编写独特的应用程序在所有流行的智能手机、平板电脑和桌面平台上。

# android - 显示谷歌地图

> ID：10280210
> 
> 赞同：0
> 
> 时间：2012-04-23T12:05:57.417
> 
> 标签：android, google-maps, mapping

我正在开发一个显示谷歌地图的应用程序，但地图无法显示 {only squares} 。我认为问题来自 log cat {04-23 12:33:29.094: E/MapActivity(307): Couldn't get connection factory client} 上显示的此错误。我想知道问题出在哪里？清单文件中是否需要更多权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:28:38.503

您需要地图 api 密钥。严格按照这些步骤操作。[http://developer.android.com/resources/tutorials/views/hello-mapview.html](http://developer.android.com/resources/tutorials/views/hello-mapview.html)

特别看看[https://developers.google.com/maps/documentation/android/mapkey](https://developers.google.com/maps/documentation/android/mapkey)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:51:34.280

如果*用于创建 Google Api 密钥*的密钥库（使用 MD5 指纹，并获得所需的 MD5 指纹密钥库）与*用于签署应用程序*的密钥库**不匹配**，则可能会出现此类问题。

 **例如，如果您正在调试您的应用程序，那么它将使用 debug.keystore ，因此应用程序中使用的 api 密钥必须使用 debug.keystore 生成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:00:30.383

试试这个： -

打开命令提示符并使用它。

那是 cmd 提示符的确切路径——

```
keytool -list -keystore "C:\Users\XYZ\.android\debug.keystore" 
```

cmd 提示获取 GoogleMap API 密钥的 MD5 指纹的总路径* ******

```
D:\eclipse\jre\bin>keytool -list -keystore "C:\Users\XYZ\.android\debug.keystore" 
```

MD5 指纹将如下所示——

```
3E:F4:D6:E6:93:4D:BB:B8:62:3A:D6:0F:E0:FC:4C:65 
```

当您获得指纹号码之后获取 API 密钥时，请使用此链接---

```
http://code.google.com/android/add-ons/google-apis/maps-api-signup.html 
```

然后您将获得系统的 API 密钥，并可以通过在您的 xml 文件中使用此 API 密钥轻松获取地图....**

# groovy - 如何在加载 groovy 类时导入文件？

> ID：10280213
> 
> 赞同：1
> 
> 时间：2012-04-23T12:06:16.160
> 
> 标签：groovy

我正在加载一个类并执行一些 sql select 语句，似乎`import groovy.sql.Sql`需要导入。如何在加载类时加载一些库？

我的代码（如果我删除 Sql 操作可以正常工作）

```
def fClass = new GroovyClassLoader().parseClass( new File( 'plugin/Pi.groovy' ) )
result=fClass.newInstance().buildTags( params, i9piparams, "userRoleCount") 
```

pi.groovy

```
public class Pi{
    def result

    private def getDbUrl(dbdriver,dbhost,dbport,dbname)
    {
        return "$dbdriver:@$dbhost:$dbport:$dbname"
    }

    public def buildTags(Map<String,String> params,Map<String,String> i9piparams,def i9piType)
    {

        println params
        println i9piparams

        /*some Sql operation*/
        Driver="oracle.jdbc.driver.OracleDriver"
            dbdriver="jdbc:oracle:thin"
        def url=getDbUrl(dbdriver,params.tns,i9piparams.dbport,i9piparams.dbname)           

            def sql = Sql.newInstance(url,params.u,params.x,Driver)

            sql.eachRow("select name, value from v\$parameter where name = 'open_cursors'"){ row ->
                result.name=row.name
                result.value=row.value
            }

    }
} 
```

输出

```
[pd:admin, u:zx5531d, tns:foner, dh:abds, dn:D35531, dp:11531, un:admin, x:cx15531]
[:, dbname:orcl, dbport:1521, dbtype:oracle]
Exception in thread "main" groovy.lang.GroovyRuntimeException: Could not find matching constructor for: groovy.sql.Sql(org.codehaus.groovy.runtime.GStringImpl, groovy.util.slurpersupport.Attributes, java.lang.String, java.lang.String)
.
.
. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:14:35.220

你可以尝试改变你的线路：

```
def sql = Sql.newInstance(url,params.u,params.x,Driver) 
```

到

```
def sql = Sql.newInstance( url, 'zx5531d', params.x, Driver ) 
```

我怀疑的是，`text()`当您从 XML 中读取属性时，您需要调用它们，以便获得一个`String`而不是一个`groovy.util.slurpersupport.Attributes`类。

另外，为什么有`Driver`一个大写的首字母？

并且（不确定是什么`parameter`），但您可能想要更改：

```
"select name, value from v\$parameter where name = 'open_cursors'" 
```

到

```
"select name, value from v\${Sql.expand(parameter)} where name = 'open_cursors'" 
```

# blackberry - 黑莓图像加载器

> ID：10280216
> 
> 赞同：1
> 
> 时间：2012-04-23T12:06:29.100
> 
> 标签：blackberry, asynchronous, image-loading

我是BB的新手，任何人都可以告诉我如何异步加载图像吗？

我找到了一些代码，但它是同步执行的。

我必须使用上面的代码加载多个图像，直到我**的 for**循环完成我的程序是理想的

我的代码

```
package mypackage;
import java.io.DataInputStream;
import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;
import net.rim.device.api.system.EncodedImage;
import net.rim.device.api.ui.component.Dialog;

public class image {
public EncodedImage image(final String url){

      try
    {
         // HttpConnection hc=new Httpconnection();

          HttpConnection hc=(HttpConnection)Connector.open(url+";deviceside=true");
        hc.setRequestMethod(HttpConnection.GET);
        int st=hc.getResponseCode();
        int len=(int)hc.getLength();
        System.out.println("Code==>"+hc.getResponseCode());
        System.out.println("Message==>"+hc.getResponseMessage());
        byte bts[]=new byte[len];
       // resizeImage( bitmap, 150,150);

        DataInputStream dis=new DataInputStream(hc.openInputStream());
        dis.readFully(bts);  
        EncodedImage image;

        image=EncodedImage.createEncodedImage(bts,0,len);

        dis.close();
        hc.close();   
        return image;
  }    catch(Exception e){
       e.printStackTrace();
      Dialog.alert("Error ");
      return null;

  }
}} 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:22:15.170

我已经实现了，

1）创建自定义字段并绘制一个默认图像。

2) 向对象添加图像属性，如 url、大小等。

3) 将该对象添加到该 Cookie

4) 将字段添加到管理器后，启动一个新线程。

5）在那个线程中获取cookie属性并下载每个图像。

上述过程不会阻止您停止下载，直到屏幕被破坏并将下载所有图像。

稍后您可以在其上添加您的要求。

# java - PreparedStatement 不超出范围时抛出索引超出范围

> ID：10280217
> 
> 赞同：2
> 
> 时间：2012-04-23T12:06:30.040
> 
> 标签：java, sql-server, jdbc

我正在生成一个表并将数据插入到该表中。该表是根据具有复杂关系的数据创建的。我们创建了这个，以便我们的 BI 工具的用户可以轻松处理数据。

我们创建了一堆这样的表，每个表都根据用户生成的数据而有所不同。在一种情况下，我们得到索引超出范围异常。检查元数据时，它没有超出范围。

确切的异常消息是：

`com.microsoft.sqlserver.jdbc.SQLServerException: The index 13 is out of range`.

生成的插入语句为：

```
INSERT INTO [F22_AF] ([frcId],[eId],[aId],[dateCreated],[DateofThing],[Wasthisaninjury],[Whowainjured],[WhowainjuredFNAME],[WhowainjuredLNAME],[Whatwasinvolved],[WhatwasinvolvedDATA],[WhatOptionsWereAvailable],[AccidentWitnessed]) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?) 
```

设置事故见证的值时，将引发异常。当值即将设置时，我打印了列索引和值：

> 13：事故见证=假

当它失败时，我从插入语句中打印出元数据并得到以下信息：

参数MetaData.getParameterCount()=13

ColIndex - 类型 || 班级

1 - 整数 || java.lang.Integer

2 - 整数 || java.lang.Integer

3 - 整数 || java.lang.Integer

4 - 日期时间 || java.sql.时间戳

5 - 日期时间 || java.sql.时间戳

6 - nvarchar || java.lang.String

7 - 整数 || java.lang.Integer

8 - nvarchar || java.lang.String

9 - nvarchar || java.lang.String

10 - 整数 || java.lang.Integer

11 - nvarchar || java.lang.String

12 - 整数 || java.lang.Integer

13 位 || java.lang.Boolean

当我尝试设置 col index 13 时，我得到 Index Out Of Range，但是根据它存在的元数据！如果它不存在，我会得到另一个超出范围的异常。

相同的代码适用于不同的数据集。

谁能解释为什么当列索引存在时会发生此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:17:13.457

我的建议？相信 JVM。不管你怎么想。

您没有找到正确的位置来了解出了什么问题。编写一个小的、独立的示例并在调试器中运行它。您将能够以这种方式看到代码出错的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T16:20:10.160

当我使用`Hibernate`. 但是异常不依赖于休眠。此异常取决于版本。在`JDBC`我`Database`的数据库中是 oracle 并且得到了相同的异常。原因是`ojdbc`我使用的错误。如果`Prepared Statement`我传递了超过 7 个参数，我得到了异常。这是一个错误。解决方案正在改变`ojdbc`。

# wix - 来自一个 WiX Votive 项目的 2 个 .msi 文件

> ID：10280221
> 
> 赞同：0
> 
> 时间：2012-04-23T12:06:43.797
> 
> 标签：wix, windows-installer, votive

正如标题所说，我想从一个项目中输出 2 个 .msi 文件（一个是每个用户，另一个是每个机器）。我在[这个](https://stackoverflow.com/questions/5781994/wix-multiple-msi-files)线程中看到它不能以某种常规方式完成，但也许有一种方法可以作为后期构建中的某种黑客。

我只需要在原始构建之后重新运行编译和链接，并稍微改变命令行（实际上，我只需要不同的`Product.wxs`文件）。但是，我的灯光和蜡烛命令行非常庞大，如果我对它们进行硬编码，我可能会冒着使我的项目难以维护的风险。

因此，总而言之，我需要知道是否有一种方法可以编写与 Votive 在创建其构建命令行时的行为相同的命令行（获取项目中的所有文件，链接它们，传递项目依赖项...... )，仅在后期构建中。

PS：我也有一个想法，从 Votive 获取整个命令行，只更改产品文件，这也会有所帮助，所以如果有人对如何做有建议......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:31:55.310

创建解决方案/项目的多个配置，并将预处理器变量设置为其中一个配置的某个值。在您的 wix 源中，有条件地包括根据您的预处理器变量需要包含的任何其他内容。

# objective-c - 呈现 Modal ViewController 会导致 SIGABRT

> ID：10280223
> 
> 赞同：1
> 
> 时间：2012-04-23T12:07:07.793
> 
> 标签：objective-c, ios, xcode, ipad, sigabrt

`UINavigationController`我用我的自定义子类初始化一个`UIViewController`。但是只要我想展示视图控制器，我就会`SIGABRT`在 Xcode 中得到一个错误。我以前做过很多次，我认为这个问题的存在是因为在我当前的项目中可能不正确的其他事情。但是，我发现很难找到这种现象背后的问题。那么有没有一些你可以做的事情以某种方式阻止模态视图控制器的呈现？

这就是我展示我的视图控制器的方式：

```
- (IBAction)tutorialTouched:(id)sender {

    TutorialViewController *tutorialVC = [[TutorialViewController alloc]init];
    UINavigationController *nav = [[UINavigationController alloc]initWithRootViewController:tutorialVC];
    nav.modalPresentationStyle = UIModalPresentationFormSheet;

    // This line leads to `SIGABRT`
    [self presentModalViewController:nav animated:NO];
} 
```

部署目标是 5.0。

**更新：** 这是我`bt`在控制台中输入时得到的信息：

```
#0  0x945919c6 in __pthread_kill ()
#1  0x9645bf78 in pthread_kill ()
#2  0x9644cbdd in abort ()
#3  0x003169dc in uncaught_exception_handler ()
#4  0x032010fc in __handleUncaughtException ()
#5  0x02f00f0f in _objc_terminate ()
#6  0x0349e8de in safe_handler_caller ()
#7  0x0349e946 in std::terminate ()
#8  0x0349fb3e in __cxa_rethrow ()
#9  0x02f00e15 in objc_exception_rethrow ()
#10 0x03137de0 in CFRunLoopRunSpecific ()
#11 0x03137c9b in CFRunLoopRunInMode ()
#12 0x035ca7d8 in GSEventRunModal ()
#13 0x035ca88a in GSEventRun ()
#14 0x016b3626 in UIApplicationMain ()
#15 0x00002fad in main (argc=1, argv=0xbffff5a8) at /Users/myProject/main.m:14 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T13:49:35.203

该问题是由于我的 ViewController 中的 Outlet 错误引起的。我无法弄清楚，因为编译器从未告诉我这一点。只有当我`try / catch`在视图控制器的表示周围添加了一个时，我才得到异常对象，它最终告诉我出了什么问题。很抱歉造成混乱，感谢您的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T12:31:03.427

块是在 4.0 中引入的，因此如果您在 iOS 较低的设备上使用块，您将收到 SIGABRT。通过使用 respondsToSelector 和回退方法检查它是否存在。

```
if([self respondsToSelector:@selector(presentViewController:animated:completion:)]){
        [self presentViewController:nav animated:YES completion:^{}];
}else{
    [self presentModalViewController:nav animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T12:36:42.887

如果您在 iOS 4.x 模拟器上运行该应用程序，它将与 SIGABRT 一起崩溃，`NSInvalidArgumentException`因为`unrecognized selector sent`. 原因是`presentModalViewController:animated:completion:`在 iOS 5.0 之前不存在。

用于`presentModalViewController:animated:`以前版本的 iOS。由于它在 iOS 5.0 中被标记为已弃用，因此您可以这样做以供将来维护：

```
if ([self respondsToSelector:@selector(presentViewController:animated:completion:)]) {
    [self presentViewController:nav animated:YES completion:^{}];
} else {
    [self presentModalViewController:nav animated:YES];
} 
```

有关详细信息，请参阅[UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T12:26:14.743

答案很简单，删除块代码并将最后一行更改为

```
[self presentModalViewController:nav animated:YES]; 
```

在 Nav 中，您可以使用 ViewDidLoad 执行任何其他代码

为什么会崩溃？

它崩溃是因为 UIViewController 的 presentViewController:animated:completion: 方法在 iOS 4.3 上不可用。它是在 iOS 5 中引入的，您的代码很可能设置为 iOS < 5.0 - 因此崩溃 - QED

# javascript - 从 Chrome 到 Internet Explorer 的不同正则表达式

> ID：10280231
> 
> 赞同：0
> 
> 时间：2012-04-23T12:07:46.113
> 
> 标签：javascript, regex

我有这个正则表达式：

```
var RE_SSN = /^[A-Åa-å0-9,\!\-\?\""\. ]{3,999}$/; 
```

我在 JS 函数中使用的

```
function checkSsn(ssn){

 if (RE_SSN.test(ssn)) {    
  javascript:addAppointment(document.forms[0])
  alert("YES");
 } else {
    alert("NO");
 }
} 
```

当我输入`12345Test`Chrome 时，正则表达式通过了，这就是重点。但在 IE 中，字符串不能以数字开头。在我看来，IE 只是为了让我的生活变得悲惨。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:23:52.057

如果您想允许（我想）[挪威字母表](http://en.wikipedia.org/wiki/Norwegian_alphabet)中的数字和字母，请使用 unicode 序列尝试此正则表达式

```
var RE_SSN = /^[a-zA-Z\u00C5\u00C6\u00D8\u00E5\u00E6\u00F8\!\-\?\""\. ]{3,999}$/; 
```

在哪里

```
\u00C5 > Å  
\u00C6 > Æ   
\u00D8 > Ø  
\u00E5 > å  
\u00E6 > æ  
\u00F8 > ø 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:24:20.300

你的问题是`A-Åa-å`被不​​同解释的结构。IE 认为不在`T`那个范围内。

这可能与字符集检测有关。脚本是否以 UTF-8 编码？它是否以 UTF-8 BOM 开头？如果没有，那么添加一个可能会有所帮助 - 至少通过使浏览器的行为相同。

Secondly, I am not sure what your intent is by writing `A-Åa-å`, but it seems an unusual thing to put into a regex.

I suggest you change the regex to break out the characters into more natural ranges, e.g. to `A-Za-zÅå`, or expanding the ranges altogether.

# python - django + wsgi + python 版本

> ID：10280235
> 
> 赞同：0
> 
> 时间：2012-04-23T12:08:20.430
> 
> 标签：python, django, wsgi

我在虚拟环境中有一个 django 站点，该站点使用随 Ubuntu 一起安装的 Python 2.6。但我的 django 应用程序需要 Python 2.7。

我发现，我必须使用[http://code.google.com/p/modwsgi/wiki/InstallationIssues#Multiple_Python_Versions](http://code.google.com/p/modwsgi/wiki/InstallationIssues#Multiple_Python_Versions)`--with-python`中所述的选项为另一个 Python 版本重新编译我的 wsgi

但我想知道这是否将是全球 wsgi 安装？我可以仅将 wsgi+Python2.7 用于特定的虚拟环境吗？我不想影响服务器上的其他应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:52:53.037

是的，这会影响全局安装，即apache+modwsgi。我不使用 apache+modwsgi，但如果 modwsgi 可以动态更改 python 解释器（我怀疑它是），这对你来说将是一个更好的解决方案。

另一种方法可能是：检查 modwsgi 是否可以配置为了解 virtualenv，因此它将使用此 env 的 python 解释器，我认为这也可能是不可能的，因为似乎 python 库链接到 modwsgi 库。

您是否考虑过使用其他解决方案来运行您的 django 应用程序？

*   [杂种2](http://wsgid.com) + [wsgid](http://mongrel2.org)
*   [nginx](http://nginx.com) + [gunicorn](http://gunicorn.org)

在这两种情况下，都将您的应用程序作为一个**单独**的进程运行，然后您可以真正使用 virtualenv 并选择它将使用的 Python 版本。

# jquery - MVC 基础 - 控制器输入参数

> ID：10280237
> 
> 赞同：0
> 
> 时间：2012-04-23T12:08:25.893
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, razor

我是一个从自动完成文本框示例中学习的新手。我不明白的是在我的控制器中的“AutoCompleteHelper”功能中，输入必须命名为“term”。如果我将其命名为其他名称，例如“mystr”或“reqstr”，那么在调试期间，它总是会说输入为“null”。我没有在我的 .js 和 .cshtml 中的其他任何地方定义“术语”。我实际上在 .cshtml 文件中将其命名为 name="q"。是什么让我使用“术语”这个名字？

控制器代码：

```
 string[] txtlst = {"ActionScript", "AppleScript",
        "Asp", "BASIC", "C", "C++", "Clojure",
        "COBOL", "ColdFusion", "Erlang", "Fortran",
        "Groovy", "Haskell", "Java", "JavaScript",
        "Lisp", "Perl", "PHP", "Python", "Ruby", "Scala", "Scheme"};

public JsonResult AutoCompleteHelper(string term) {
            if (!Request.IsAjaxRequest()) return null;
            var lst = txtlst.Where(s => s.StartsWith(term)).ToList();
            var res = lst.Select(x => new { value = x, label = x });
            return Json(res, JsonRequestBehavior.AllowGet);
        } 
```

.js 代码：

```
 $("input[data-autocomplete-source]").each(function () {
        $(this).autocomplete({ source: $(this).attr("data-autocomplete-source") });
    });
}); 
```

.cshtml 代码：

```
<p>Auto Complete Example</p>
<input type="text" name="q" data-autocomplete-source="@Url.Action("AutoCompleteHelper", "Home")" /> 
```

我是否忽略/误解了什么？我不明白为什么我固定使用“术语”作为我的参数名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:20:30.140

自动完成进行 AJAX 调用以获取数据，并使用`term`查询字符串中的名称，例如`AutoCompleteHelper?term=Brainfuck`.

MVC 框架会自动将查询字符串和表单内容与操作方法中的参数进行匹配，因此在调用方法时，带有名称的查询字符串中的值将`term`用作`term`参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:26:35.560

为什么不在纯 JS 中这样做并提供更*流畅*的体验呢？无论如何，它大多是静态的：

```
var txtlst = [  "ActionScript", "AppleScript",
                "Asp", "BASIC", "C", "C++", "Clojure",
                "COBOL", "ColdFusion", "Erlang", "Fortran",
                "Groovy", "Haskell", "Java", "JavaScript",
                "Lisp", "Perl", "PHP", "Python", "Ruby",
                "Scala", "Scheme"];

$("input[data-autocomplete-source]").each(function () {
    $(this).autocomplete({ source: txtlst });
}); 
```

# javascript - 如何使用javascript动态添加日历文本框？

> ID：10280238
> 
> 赞同：1
> 
> 时间：2012-04-23T12:08:29.960
> 
> 标签：javascript, html

我必须在每次点击链接时动态添加一个日历文本框。我已经测试了一些代码。对于第一个声明，它适用于其他声明。这是我的代码：

```
<head>
    <script type="text/javascript">
        $(function () {
            $(".hajanDatePicker").datepicker();
        });
    </script>
    <script type="text/javascript">
        var intTextBox=0;

        function addElement(){
            var contentID = document.getElementById('content');
            var newTBDiv = document.createElement('div');
            newTBDiv.setAttribute('id','txtDatePicker');
            newTBDiv.innerHTML +="Date:<input id='txtDatePicker' type='text' name='test1'>"; 
            contentID.appendChild(newTBDiv);
        }
    </script>
</head>
<body>
    <form id="form1" method="get">
        <div id="content">
            <input type="text" id="txtDatePicker" name="test1"/>
        </div>  
        <p><a href="javascript:addElement();" >Add</a>   
    </form>
</body> 
```

当表单加载时可以获得日历。单击“添加”后，它只是作为普通文本框而不是日历打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:12:06.033

打电话

```
$(".hajanDatePicker").datepicker(); 
```

在`addElement`函数的底部。

并改变

`<input id='txtDatePicker' type='text' name='test1'>`

至

`<input id='txtDatePicker' type='text' class='hajanDatePicker' name='test1'>`

此外，您的页面上有多个具有相同 id 的输入：txtDatePicker。

# java - 从词性标签数组中查找“主题”

> ID：10280239
> 
> 赞同：3
> 
> 时间：2012-04-23T12:08:50.967
> 
> 标签：java, nlp, opennlp

我知道这个问题更像是一个语法问题，但是如果你有一系列`Penn Treebank`标记，你如何确定一个句子的“主题”：

```
[WP][VBZ][DT][NN] 
```

是否有任何 java 库可以接收此类标记并确定哪个是主题？或者是哪些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:27:22.323

标记句子句法单元（包括主语）的标准方法是使用组成解析器。组成树用句法标签标记输入的子串。有关示例，请参见[http://en.wikipedia.org/wiki/Parse_tree 。](http://en.wikipedia.org/wiki/Parse_tree)

如果这样的结构看起来可以满足您的需求，我建议您使用现成的解析器并从输出中提取相关短语。

我知道的大多数解析器在解析过程中都包含词性 (POS) 标记，但如果您对您拥有的 POS 标签有信心，您可以限制解析器使用您的标签。

请注意，成分解析在计算上可能非常昂贵。据我所知，所有最先进的成分解析器都以每秒 4-80 个句子的速度运行，尽管如果您愿意牺牲一些准确性，您可能能够实现更高的速度。

一些建议（[Java 的简单自然语言处理启动中的](https://stackoverflow.com/questions/5833030/simple-natural-language-processing-startup-for-java/5834885#5834885)更多详细信息）。

伯克利解析器 ( [http://code.google.com/p/berkeleyparser/](http://code.google.com/p/berkeleyparser/) )。最先进的准确性和相当快的速度（每秒 3-5 句）。

BUBS Parser ( [http://code.google.com/p/bubs-parser/](http://code.google.com/p/bubs-parser/) ) 也可以使用高精度伯克利语法运行，放弃一点准确性（对于那些关心的人来说，F1 分数约为 1.5 分) 但将效率提高到 50-80 句/秒左右。完全公开——我是研究这个解析器的主要研究人员之一。

警告：这两个解析器都是研究代码。但我们很高兴有人在现实世界中使用 BUBS。如果你试一试，请与我联系，有问题、问题、意见等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:16:50.087

免费的、基于 java 的[Stanford Dependency Parser](http://nlp.stanford.edu/software/stanford-dependencies.shtml)（Stanford Parser 的一部分）可以轻松完成这项工作。它会生成一个依赖关系分析树，其中包含诸如 的依赖关系`nsubj(makes-8, Bell-1)`，告诉您这`Bell`是`makes`. 您所要做的就是扫描解析器为您提供的依赖项列表`nsubj`或`nsubjpass`条目，这些是动词的主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T02:22:01.227

我已经成功地使用 OpenNLP 对葡萄牙语的科目进行分类。我创建了一个浅解析器，稍微调整了 OpenNLP Chunker 组件。

您可以使用现有的 OpenNLP 模型进行 pos 标记和分块，但您将训练一个新的块模型，该模型采用 PoS 标签 + 块标签对主题进行分类。

训练 Chunker 的数据格式基于[Conll 2000](http://www.cnts.ua.ac.be/conll2000/chunking/)：

```
He        PRP  B-NP
reckons   VBZ  B-VP
the       DT   B-NP
current   JJ   I-NP
account   NN   I-NP
deficit   NN   I-NP
will      MD   B-VP
narrow    VB   I-VP
... 
```

然后我创建了一个新的语料库，如下所示

```
He        PRP+B-NP  B-SUBJ
reckons   VBZ+B-VP  B-V  
the       DT+B-NP   O
current   JJ+I-NP   O
account   NN+I-NP   O
deficit   NN+I-NP   O
will      MD+B-VP   O
narrow    VB+I-VP   O 
```

如果您有权访问 Penn Treebank，则可以通过在语料库中查找主题节点来创建此类数据。也许您可以从这个用于为 CoNLL-2000 共享任务生成数据的[Perl 脚本开始。](http://ilk.uvt.nl/team/sabine/homepage/software.html)

葡萄牙语的评估结果是准确率为 87.07%，召回率为 75.48%，F1 为 80.86%。

# jquery - jQuery UI：datepicker - 如何在右上角添加关闭按钮（图片！）？

> ID：10280241
> 
> 赞同：9
> 
> 时间：2012-04-23T12:09:17.187
> 
> 标签：jquery, jquery-ui, datepicker

我想在右上角添加一个关闭按钮。

我不想将底部的关闭按钮与按钮面板一起使用。

我怎样才能做到这一点？

我想要类似“X”的东西：

![在此处输入图像描述](../Images/00cc367b36635454595ee3c3edadb4f5.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T15:54:50.700

您可以在标记中插入链接并根据需要为其设置样式，将 onclick 处理程序附加到它将调用datepicker`.datepicker( "hide" )`的[内置方法](http://jqueryui.com/demos/datepicker/#methods)：

```
$( "#datepicker" ).datepicker({
    beforeShow: function( input ) {
        setTimeout(function() {
            var headerPane = $( input )
            .datepicker( "widget" )
            .find( ".ui-datepicker-header" );

            $( "<button>", {
                text: "Close",
                click: function() {
                  $.datepicker.hide();
                }
            }).appendTo( headerPane );
        }, 1 );
    }
}); 
```

此外，要为关闭按钮腾出空间，您可能需要调整这些样式，以便将“下个月”按钮移到左侧并为“关闭”按钮腾出空间：

```
.ui-datepicker .ui-datepicker-next { right:2px; }
.ui-datepicker .ui-datepicker-next-hover { right:1px; } 
```

**注意：**我从[这个概念证明中](http://jsbin.com/ofare/edit#source)获取了上面的 JS 代码并相应地进行了调整。虽然没有测试过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-25T13:57:20.047

我不断收到此错误：

```
$.datepicker.hide() is not a function 
```

通过使用@dalbaeb 解决方案的萤火虫。这是正确的，但我不得不对其进行一些调整以使其关闭日期选择器。

这就是我调整它的方式，它对我有用：

```
$( "#datepicker" ).datepicker({
beforeShow: function( input ) {
    setTimeout(function() {
        var headerPane = $( input )
        .datepicker( "widget" )
        .find( ".ui-datepicker-header" );
        $( "<button>", {
            text: "Close",
            click: function() {

             $('#ui-datepicker-div').hide();         

            }
        }).appendTo( headerPane );
    }, 1 );
}
}); 
```

我刚换了：

```
$.datepicker.hide(); 
```

有了这个：

```
 $('#ui-datepicker-div').hide(); 
```

...它现在关闭日期选择器！希望能帮助到你！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-25T09:04:42.660

我通过设置`Done`按钮的样式来做到这一点

首先，启用该`showButtonPanel`选项，然后更改其文本：

```
$(".calendar").datepicker({
    showButtonPanel: true,
    closeText: '&times;'
}); 
```

然后隐藏`Today`按钮并设置关闭按钮的样式：

```
#ui-datepicker-div .ui-datepicker-current {
    display: none;
}
#ui-datepicker-div .ui-datepicker-close {
    position: absolute;
    top: 0;
    right: 0;
    border: none;
    background: transparent;
    box-shadow: none;
    text-shadow: none;
    font-size: 26px;
    line-height: 1;
    padding: 3px 8px;
    color: #cc6a6a;
    font-weight: 600;
    opacity: 0.8;
}
#ui-datepicker-div .ui-datepicker-close:focus {
    outline: none;
}
#ui-datepicker-div .ui-datepicker-close:hover {
    opacity: 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T16:04:39.697

您可以通过以下方式更改按钮的位置：

```
 $("#id_from_date").datepicker({
        closeText: "X",
        showButtonPanel: true,
    });
    $('#id_from_date').click(function() {
        $(this).datepicker("show");
        var button = $(".ui-datepicker-close");
        $(".ui-datepicker-buttonpane").remove();
        $("#ui-datepicker-div").children().first().before(button);
        button.css("margin-left", button.parent().width() - 30 + "px");
    }); 
```

希望能帮助到你。如果没有，请告诉我。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-02T19:15:20.813

我将按钮窗格移到顶部，然后在 CSS 中完成其余部分。

```
$( "[data-date-picker]" )
  .datepicker({
    showButtonPanel: true,
    closeText: "X"
  })
  .on('click', function() {
    var datepicker = $('#ui-datepicker-div')
    datepicker.prepend(datepicker.find(".ui-datepicker-buttonpane"));
  }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-25T10:37:40.760

使用它来隐藏日期选择器：

```
$("#datepicker").datepicker('hide'); 
```

# php - 使用 php Imap 从 gmail 帐户解码电子邮件时

> ID：10280242
> 
> 赞同：2
> 
> 时间：2012-04-23T12:09:22.210
> 
> 标签：php

在使用 php Imap 类解码来自 gmail 帐户的电子邮件时，我得到了一些像 =C2=A0=20 这样的字符，但来自其他人的所有邮件都可以正常工作。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:09:35.463

我认为这可以用 imap_qprint 解决：

[http://il1.php.net/manual/en/function.imap-qprint.php](http://il1.php.net/manual/en/function.imap-qprint.php)

# jquery - jquery调用webservice失败

> ID：10280244
> 
> 赞同：2
> 
> 时间：2012-04-23T12:09:27.263
> 
> 标签：jquery, ajax, jquery-mobile

我正在尝试使用 Jquery AJAX调用 Web 服务[http://www.w3schools.com/webservices/tempconvert.asmx 。](http://www.w3schools.com/webservices/tempconvert.asmx)

```
 function AppendListItems() {
            var webMethod = "http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit";
            jQuery.support.cors = true;
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: webMethod,
                data: { Celsius: "10" },
                success: function (msg) {

                    $("#lstPhoneNames").append("<li>" + msg.d + "</li>");
                },
                error: function (ex, a, b) {
                    alert(b);
                }
            });

        }; 
```

但是，调用失败它返回错误日志：

```
 <span><H1>Server Error in '/' Application.<hr width=100% size=1 color=silver></H1>

            <h2> <i>Runtime Error</i> </h2></span>

            <font face="Arial, Helvetica, Geneva, SunSans-Regular, sans-serif ">

            <b> Description: </b>An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed remotely (for security reasons). It could, however, be viewed by browsers running on the local server machine.
            <br><br>

            <b>Details:</b> To enable the details of this specific error message to be viewable on remote machines, please create a &lt;customErrors&gt; tag within a &quot;web.config&quot; configuration file located in the root directory of the current web application. This &lt;customErrors&gt; tag should then have its &quot;mode&quot; attribute set to &quot;Off&quot;.<br><br>

            <table width=100% bgcolor="#ffffcc">
               <tr>
                  <td>
                      <code><pre>

&lt;!-- Web.Config Configuration File --&gt;

&lt;configuration&gt;
    &lt;system.web&gt;
        &lt;customErrors mode=&quot;Off&quot;/&gt;
    &lt;/system.web&gt;
&lt;/configuration&gt;</pre></code>

                  </td>
               </tr>
            </table>

            <br>

            <b>Notes:</b> The current error page you are seeing can be replaced by a custom error page by modifying the &quot;defaultRedirect&quot; attribute of the application&#39;s &lt;customErrors&gt; configuration tag to point to a custom error page URL.<br><br>

            <table width=100% bgcolor="#ffffcc">
               <tr>
                  <td>
                      <code><pre>

&lt;!-- Web.Config Configuration File --&gt;

&lt;configuration&gt;
    &lt;system.web&gt;
        &lt;customErrors mode=&quot;RemoteOnly&quot; defaultRedirect=&quot;mycustompage.htm&quot;/&gt;
    &lt;/system.web&gt;
&lt;/configuration&gt;</pre></code>

                  </td>
               </tr>
            </table>

            <br>

    </body> 
```

我是否以错误的方式调用服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:19:34.383

[使用Fiddler](http://fiddler2.com/fiddler2/)等工具检查实际请求发送到服务器的内容。您可能会发现您发送的内容与实际需要的内容有所不同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:21:26.770

检查网络服务的 URL 应该是[http://www.w3schools.com/webservices/tempconvert.asmx?op=CelsiusToFahrenheit](http://www.w3schools.com/webservices/tempconvert.asmx?op=CelsiusToFahrenheit)吗？或者

[http://www.w3schools.com/webservices/tempconvert.asmx?op=FahrenheitToCelsius](http://www.w3schools.com/webservices/tempconvert.asmx?op=FahrenheitToCelsius) ??

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:10:52.677

尝试添加准备好的文档：

```
 jQuery.support.cors = true; 
```

# jsf - JSF 验证错误：正确的值丢失

> ID：10280246
> 
> 赞同：1
> 
> 时间：2012-04-23T12:09:37.507
> 
> 标签：jsf, primefaces, spring-webflow

我正在使用 JSF Mojarra 2.1.7 和 Spring Web Flow 2.3.0。我真的被这个奇怪的问题困住了。我真的想知道我是否遗漏了一些非常简单的东西，或者在 JSF 中真的是这样。

如果我在表单上放置一个输入字段并给它一个**必需**的属性并正确填写几个字段并将一个字段留空，JSF 会给我一个很好的验证错误。但是我把一个字段留空了，甚至其他字段也被正确填充了，它们也丢失了。

例如在表单上我有 2 个字段**name**和**password**。它们都包含JSF 的*必需*属性。我输入了“我的名字”作为名称字段的值，而我没有为密码字段输入任何值。JSF 给了我一个关于密码字段的错误，我为名称字段“我的名字”输入的正确值现在也为空。

现在我想知道这是默认行为吗？我怎么解决这个问题。如果这是正常行为，我会感到非常惊讶，因为我认为这是一个非常基本的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:26:03.560

当我升级到新发布的 Spring Web Flow 2.3.1 时问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T10:10:41.830

与关闭弹簧 EL 解析器的 JSF 版本 2.1.24 的行为相同。但原因可能是由于 spring RequestContextListener 或 DelegatingFilterProxy。我们只使用弹簧安全。

更新：在 JSF 更新后解决。jsf 可能有几个相关的问题。问题之一：[https ://java.net/jira/browse/JAVASERVERFACES-3033](https://java.net/jira/browse/JAVASERVERFACES-3033)

# android - 打开sqlite时出现异常android

> ID：10280249
> 
> 赞同：0
> 
> 时间：2012-04-23T12:09:49.703
> 
> 标签：android, sqlite

我在我的 android 应用程序中创建了数据库，然后插入了一条语句。一切正常，所以我想从 MY_PACKAGE/databses/ 获取我的数据库并将其复制到 sd 卡以便可以访问。

这行得通，但是当我尝试使用我的 sqlite Firefox 插件打开时，我收到此错误：

```
SQLiteManager: Error in opening file Datas.sqlite - either the file is encrypted or corrupt
Exception Name: NS_ERROR_FILE_CORRUPTED
Exception Message: Component returned failure code: 0x8052000b (NS_ERROR_FILE_CORRUPTED) [mozIStorageService.openUnsharedDatabase] 
```

也许我必须用别的东西打开或者我不能这么容易地打开这个？

我将给出我使用的所有代码：

处理我的数据库我使用了所有这些代码：

[在 Android 应用程序中使用您自己的 SQLite 数据库](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

复制到sd卡这个方法：

```
public static boolean backUpDataBase(Context context) {

        final String DATABASE_NAME = "Data.sqlite";
        final String DATABASE_NAME_FULL = "/data/data/package/databases/"
                + DATABASE_NAME;
        boolean result = true;

        // Source path in the application database folder
        String appDbPath = DATABASE_NAME_FULL;

        // Destination Path to the sdcard app folder
        String sdFolder = Environment.getExternalStorageDirectory()
                .getAbsolutePath() + "/" + "Datas.sqlite";

        File f = new File(sdFolder);
        // if (!f.exists()) {
        // f.mkdir();
        // }

        InputStream myInput = null;
        OutputStream myOutput = null;
        try {
            // Open your local db as the input stream
            myInput = new FileInputStream(appDbPath);
            // Open the empty db as the output stream
            myOutput = new FileOutputStream(f);

            // transfer bytes from the inputfile to the outputfile
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer)) > 0) {
                myOutput.write(buffer, 0, length);
            }
        } catch (IOException e) {
            result = false;
            e.printStackTrace();
        } finally {
            try {
                // Close the streams
                if (myOutput != null) {
                    myOutput.flush();
                    myOutput.close();
                }
                if (myInput != null) {
                    myInput.close();
                }
            } catch (IOException e) {
            }
        }

        return result;
    } 
```

我的数据库如下所示： 2 个表：

```
CREATE TABLE "Test" ("_id" INTEGER PRIMARY KEY  NOT NULL  UNIQUE , "Info" TEXT)

CREATE TABLE "android_metadata" ("locale" TEXT DEFAULT 'en_US') 
```

和代码来做我需要的一切：

//返回可读写的databse DataBaseHelper dataBase= Main.createOrOpenDB(mContext);

```
 Main.backUpDataBase(mContext);

        db = dataBase.myDataBase;

        // Step 1: Inflate layout
        setContentView(R.layout.tabs_fragment_activity);

        try{
        db.execSQL("INSERT INTO " +"Test" +" Values ('1','Inserted');");
        }catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        } 
```

那么哪里错了，因为插入工作正常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:01:39.297

听起来您的代码中有问题将其写入 SD 卡（我没有立即看到）。

我想知道，你为什么要把它复制到 SDCard 上？听起来您只想检查文件...

如果这实际上是您的目标，那么我建议您运行模拟器并简单地使用 Eclipse 中的 DDMS 视图，导航到文件并单击右上角的工具提示显示“从设备中提取文件”的按钮。您在模拟器中获得的内容应该与您在手机上获得的内容完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:39:51.050

尝试使用[SQLiteOpenHelper | 安卓开发者](https://www.google.es/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDEQFjAA&url=http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html&ei=hWmVT-bIMaXW0QXW4_D8AQ&usg=AFQjCNEBb8YvlGxrEdTTNAan7LjslOLlYQ&sig2=3CZGyukB_mcBe5doXDhOQA)

# javascript - getAttribute() 与 Element 对象属性？

> ID：10280250
> 
> 赞同：95
> 
> 时间：2012-04-23T12:09:53.347
> 
> 标签：javascript, html, dom

表达式 like`Element.getAttribute("id")`和`Element.id`返回相同的东西。

当我们需要 HTMLElement 对象的属性时应该使用哪一个？

这些方法是否存在跨浏览器问题，例如`getAttribute()`and `setAttribute()`？

或者直接访问对象属性与使用这些属性方法对性能有什么影响？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-04-23T12:25:02.493

`getAttribute`检索 DOM 元素的*属性*，同时`el.id`检索此 DOM 元素的*属性*。他们不一样。

大多数时候，DOM 属性与属性同步。

但是，同步*不保证相同的值*。一个经典的例子是锚元素`el.href`之间`el.getAttribute('href')`。

例如：

```
<a href="/" id="hey"></a>
<script>
var a = document.getElementById('hey')
a.getAttribute('href') // "/"
a.href // Full URL except for IE that keeps '/'
</script> 
```

发生这种行为是因为根据[W3C](http://www.w3.org/TR/REC-html40/struct/links.html#adef-href)， href 属性必须是格式正确的链接。大多数浏览器都遵守这个标准（猜猜谁不遵守？）。

`input`的`checked`属性还有另一种情况。DOM 属性返回`true`或`false`而属性返回字符串`"checked"`或空字符串。

然后，有些属性*只能单向*同步。最好的例子是元素的`value`属性。`input`通过 DOM 属性更改其值不会更改属性（编辑：检查第一条评论以获得更精确的信息）。

由于这些原因，我建议您继续使用 DOM*属性*，而不是属性，因为它们的行为因浏览器而异。

实际上，只有两种情况需要使用属性：

1.  自定义 HTML 属性，因为它没有同步到 DOM 属性。
2.  要访问未从属性同步的内置 HTML 属性，并且您确定需要该属性（例如，元素的原始属性`value`）`input`。

如果你想要更详细的解释，我强烈建议你阅读[这个页面](http://javascript.info/tutorial/attributes-and-custom-properties)。它只需要您几分钟，但您会对这些信息感到高兴（我在这里总结了这些信息）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-23T13:24:05.107

`getAttribute('attribute')`通常将属性值作为字符串返回，与页面的 HTML 源代码中的定义完全相同。

但是，`element.attribute`可以返回属性的规范化或计算值。例子：

*   `<a href="/foo"></a>`
    *   a.href 将包含*完整*的URL
*   `<input type="checkbox" checked>`
    *   input.checked 将为真（布尔值）
*   `<input type="checkbox" checked="bleh">`
    *   input.checked 将为真（布尔值）
*   `<img src='http://dummyimage.com/64x64/000/fff'>`
    *   *在加载图像之前，* img.width 将为 0（数字）
    **   加载图像（或其前几个字节）时，img.width 将为 64（数字）*
**   `<img src='http://dummyimage.com/64x64/000/fff' width="50%">`
    *   img.width 将是*计算出*的50%*   `<img src='http://dummyimage.com/32x32/000/fff' style='width: 50px'>`
    *   img.width 将为 50（数字）*   `<div style='background: lime;'></div>`
    *   div.style 将是一个对象*

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T12:21:05.610

除非您有特定的理由不使用，否则请始终使用这些属性。

*   `getAttribute()`并且`setAttribute()`在较旧的 IE 中被破坏（以及更高版本中的兼容模式）
*   属性更方便（特别是那些对应于布尔属性的）

有[一些例外](https://stackoverflow.com/a/7590937/96100)：

*   访问`<form>`元素的属性
*   访问自定义属性（尽管我完全不鼓励使用自定义属性）

我在 SO 上写过几次关于这个主题的文章：

*   [https://stackoverflow.com/a/7010268/96100](https://stackoverflow.com/a/7010268/96100)
*   [https://stackoverflow.com/a/4456805/96100](https://stackoverflow.com/a/4456805/96100)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T12:12:02.270

`.id`节省函数调用开销。（这是非常小的，但你问。）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-23T12:13:50.570

根据[这个 jsPerf 测试](http://jsperf.com/el-getattribute-id-vs-el-id) `getAttribute`比`id`属性更慢。

**附言**

奇怪的是，这两个语句在 IE8 上的表现都非常糟糕（与其他浏览器相比）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-20T06:20:14.463

试试下面的例子来完全理解这一点。对于以下 DIV

`<div class="myclass"></div>`

将`Element.getAttribute('class')`返回`myclass`，但您必须使用`Element.className`which 从 DOM 属性中检索它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-27T00:52:34.547

这会产生很大影响的一个领域是基于属性的 css 样式。

考虑以下：

```
const divs = document.querySelectorAll('div');

divs[1].custom = true;
divs[2].setAttribute('custom', true);
```

```
div {
  border: 1px solid;
  margin-bottom: 8px;
}

div[custom] {
  background: #36a;
  color: #fff;
}
```

```
<div>A normal div</div>
<div>A div with a custom property set directly.</div>
<div>A div with a custom attribute set with `setAttribute`</div>
```

直接设置了自定义属性的 div 不会将值反映到属性中，也不会被我们`div[custom]`在 css 中的属性选择器 ( ) 选中。

但是，使用 设置自定义属性的 div`setAttribute`可以使用 css 属性选择器进行选择，并进行相应的样式设置。*

# html - 对齐容器中的按钮

> ID：10280251
> 
> 赞同：0
> 
> 时间：2012-04-23T12:09:56.173
> 
> 标签：html, css

我不擅长前端（html、css 等）。我想对齐容器中的一些按钮，如下所示。容器将有一些标题和一些按钮。请帮帮我。

提前致谢。

![在此处输入图像描述](../Images/0e969249709f5ee0ca755ae383aeb259.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:24:11.963

如果您有两个`button`元素并且希望它们居中对齐 - 将 a 添加`text-align: center`到它们的父级。工作示例在这里：http: [//jsfiddle.net/skip405/uvAcj/](http://jsfiddle.net/skip405/uvAcj/)

如果您想指定按钮之间的距离 - 只需`margin-left`根据您的需要调整属性。选择`button:first-child`器不会将第一个按钮向左移动，它们将完全对齐中心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:34:21.853

你可以通过这个实现你的结果：-

**HTML**

```
 <fieldset>
<legend>Container Heading</legend>
<button id="visit_return_button" type="submit">Button1</button>
<button id="visit_return_button" type="submit">Button2</button>
 </fieldset> 
```

**CSS**

```
 fieldset {
    border:1px solid;
    width:200px;
    height:70px;
    display:table-cell;
    vertical-align:middle;
    text-align:center;
}

legend {

    margin-left:5px;
}

#visit_return_button{
    background-color:#9C8C42;
    border: 2px solid #91782c;
    color: #FFF;
    text-align: center;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    padding: 10px;
} 
```

或查看演示：- [http://jsfiddle.net/VY8xs/21/](http://jsfiddle.net/VY8xs/21/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:16:23.440

我喜欢使用 css 浮动选项来做到这一点。但是有几种方法可以做到这一点。您应该为每个按钮创建一个 div 并使用 css 正确对齐它们。

例如：

CSS

```
#button1{
float: left;
margin-top: 10px;
}

#button2{
float:left;
margin-top: 10px;
margin-left: 10px;
} 
```

HTML

```
<div id="container">
    <div id="button1">
         Your button HTML here
    </div>

    <div id="button2">
         Your button HTML here
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T12:18:49.090

[jsfiddle 示例](http://jsfiddle.net/ryanwfiorini/DFEJf/)

```
<style>
    div#container {
    overflow:hidden;
    border:1px solid #000;
    width:200px;
    position:relative;
    padding:5px;
}

div#container > button {
    float:left;
    /*or float:right; */
}

​
</style>

<div>containing heading</div>
<div id="container">
<button>submit</button>
<button>cancel</button>
</div>​ 
```

# python - Python 字数

> ID：10280252
> 
> 赞同：1
> 
> 时间：2012-04-23T12:09:57.683
> 
> 标签：python

```
wordsFreq = {}
words = []
while True:
    inputWord = raw_input()
    if (inputWord != ""):
        words.append(inputWord)
    else:
        break
for word in words:
    wordsFreq[word] = wordsFreq.get(word, 0) + 1

for word,freq in wordsFreq.items():
    print word + " - " + str(freq) 
```

显然我的 words[] 和 for 循环是多余的，但我没有进一步的解释，谁能向我解释为什么它是多余的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T12:16:19.023

您可以跳过构建单词列表的步骤，而是在用户输入单词时直接创建频率字典。我过去常常`defaultdict`避免检查是否已经添加了一个单词。

```
from collections import defaultdict

wordsFreq = defaultdict(int)
while True:
    word = raw_input()
    if not word:
        break
    wordsFreq[word] += 1 
```

如果您不允许使用`defaultdict`，它可能如下所示：

```
wordsFreq = {}
while True:
    word = raw_input()
    if not word:
        break
    wordsFreq[word] = wordFreq.get(word, 0) + 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T12:14:58.950

You can use [`collections.Counter`](http://docs.python.org/library/collections.html#collections.Counter) to do this easily:

```
from collections import Counter

words = []
input_word = True
while input_word:
    input_word = raw_input()
    words.append(input_word)

counted = Counter(words)

for word, freq in counted.items():
    print word + " - " + str(freq) 
```

Note that an empty string evaluates to false, so rather than breaking when it equals an empty string, we can just use the string as our loop condition.

Edit: If you don't wish to use `Counter` as an academic exercise, then the next best option is a [`collections.defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict):

```
from collections import defaultdict

words = defaultdict(int)
input_word = True
while input_word:
    input_word = raw_input()
    if input_word:
        words[input_word] += 1

for word, freq in words.items():
    print word + " - " + str(freq) 
```

The `defaultdict` ensures all keys will point to a value of `0` if they havn't been used before. This makes it easy for us to count using one.

If you still want to keep your list of words as well, then you would need to do that in addition. E.g:

```
words = []
words_count = defaultdict(int)
input_word = True
while input_word:
    input_word = raw_input()
    if input_word:
        words.append(input_word)
        words_count[input_word] += 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T13:27:37.070

我想你的老师想说你可以这样写循环

```
wordsFreq = {}
while True:
    inputWord = raw_input()
    if (inputWord != ""):
        wordsFreq[inputWord] = wordsFreq.get(inputWord, 0) + 1
    else:
        break

for word,freq in wordsFreq.items():
    print word + " - " + str(freq) 
```

无需将单词存储在临时列表中，您可以在阅读时计算它们

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T12:13:57.870

You can do this:

```
wordsFreq = {}
while True:
    inputWord = raw_input()
    try:
         wordsFreq[inputWord] = wordsFreq[inputWord] + 1
    except KeyError:
         wordsFreq[inputWord] = 1 
```

# objective-c - 为什么我不能在 Objective-C 中切换枚举

> ID：10280253
> 
> 赞同：4
> 
> 时间：2012-04-23T12:10:01.087
> 
> 标签：objective-c, xcode, enums, switch-statement

我似乎无法弄清楚我应该如何在我的自定义 typedef 枚举中使用 switch 语句。Xcode 告诉这个错误：

> 声明需要整数类型的表达式 (MyEnum *) 无效。

这是我在标题中的@interface 上声明的枚举

```
typedef enum {
  A, B, C, D, E, F, G,
  Ab, Bb, Db, Eb, Gb,
  CSharp, DSharp, FSharp, GSharp
} Tones; 
```

这是我的财产： `@property(nonatomic) Tones *tone;`

这是我获取枚举字符串值的函数

```
- (NSString *)stringValue {

  switch (self.tone) {
    case GSharp:
      return @"G#";
    ...
  } 
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-23T12:12:31.303

枚举具有文字值（基本上命名为整数），而不是对象指针。因此它应该是：

```
@property(nonatomic) Tones tone; 
```

# java - mac OSX上的java getFileType不显示结果

> ID：10280258
> 
> 赞同：1
> 
> 时间：2012-04-23T12:10:12.907
> 
> 标签：java, macos, file-io

我正在创建一个显示文件和文件夹的摆动文件管理器。我还需要显示每个文件的**文件类型**。

在我使用的窗户上

```
 JFileChooser chooser = new JFileChooser();
 File file = new File("myfilepath");

 String fileTypeName = chooser.getTypeDescription(file); 
```

它显示文件类型的描述。例如，如果它是一个 txt 文件，那么它会显示**"Text File"**。

但在 mac osx 上，它显示所有文件类型的**“通用文件”** ..

# regex - 正则表达式更改午夜过后的时间值

> ID：10280261
> 
> 赞同：3
> 
> 时间：2012-04-23T12:10:19.650
> 
> 标签：regex, timestamp, splunk

我有一个应用程序日志，其时间戳为 01-24（而不是 00-23），我正在尝试进行搜索并将“24”替换为“00”，例如

```
15.03.2012 24:59:58 - SIRENG INFO  com.app.funnction.info
15.03.2012 01:01:02 - SIRENG INFO  com.app.funnction.moreinfo 
```

应该返回

```
15.03.2012 00:59:58 - SIRENG INFO  com.app.funnction.info
15.03.2012 01:01:02 - SIRENG INFO  com.app.funnction.moreinfo 
```

到目前为止我有

`([0-9+]+).([0-9]+).([0-9\.$]+) ([0-9]+):([0-9]+):([0-9]+)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:48:30.230

搜索此正则表达式

```
([0-9]+\.[0-9]+\.[0-9]{4}) 24:([0-9]+:[0-9]+) 
```

或者，如果您的正则表达式引擎支持[速记字符类](http://www.regular-expressions.info/charclass.html#shorthand)，您可以使用此正则表达式

```
(\d\d\.\d\d\.\d{4}) 24:(\d\d:\d\d) 
```

并将其替换为

```
$1 00:$2 
```

*   $1 = 第一组：`([0-9]+\.[0-9]+\.[0-9]{4})`将匹配`15.03.2012`
*   $2 = 第二组：`([0-9]+:[0-9]+)`将匹配`59:58`

# android - 如何在Android中做一个简单的计算器？如何使用按钮和单一编辑文本来做到这一点？

> ID：10280263
> 
> 赞同：0
> 
> 时间：2012-04-23T12:10:22.547
> 
> 标签：android, android-edittext, calculator

我正在学习 Android，所以我想让事情变得简单。

我必须添加两个数字并将结果显示在一个编辑框中。要添加第二个数字，您必须将第一个数字存储在变量中。然后稍后在编辑文本中添加使用此变量和第二个数字。

如果您查看下面的 xml 和 Java 代码，您会有更好的想法。提前致谢。

```
<?xml version="1.0" encoding="utf-8" ?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:orientation="vertical" android:layout_width="fill_parent" android:layout_height="fill_parent">
  <RelativeLayout android:layout_width="match_parent" android:layout_height="match_parent" android:id="@+id/relativeLayout1" android:layout_gravity="bottom">
    <Button android:text="1" android:padding="20px" android:layout_marginTop="38dp" android:layout_height="wrap_content" android:layout_width="wrap_content" android:id="@+id/button1" android:layout_alignParentLeft="true"></Button>
    <Button android:text="2" android:padding="20px" android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_alignTop="@+id/button1" android:id="@+id/button2" android:layout_toRightOf="@+id/button1"></Button>
    <Button android:text="3" android:padding="20px" android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_alignTop="@+id/button2" android:id="@+id/button3" android:layout_toRightOf="@+id/button2"></Button>
    <Button android:text="4" android:padding="20px" android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_alignTop="@+id/button3" android:id="@+id/button4" android:layout_toRightOf="@+id/button3"></Button>
    <Button android:text="5" android:padding="20px" android:layout_height="wrap_content" android:layout_width="wrap_content" android:id="@+id/button5" android:layout_below="@+id/button1" android:layout_alignParentLeft="true"></Button>
    <Button android:text="6" android:padding="20px" android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_alignTop="@+id/button5" android:layout_alignLeft="@+id/button2" android:id="@+id/button6"></Button>
    <Button android:text="7" android:padding="20px" android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_alignTop="@+id/button6" android:layout_alignLeft="@+id/button3" android:id="@+id/button7"></Button>
    <Button android:text="8" android:padding="20px" android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_alignLeft="@+id/button4" android:id="@+id/button8" android:layout_below="@+id/button4"></Button>
    <Button android:text="=" android:padding="20px" android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_alignLeft="@+id/button11" android:id="@+id/button15" android:layout_below="@+id/button12"></Button>
<Button android:text="clear" android:layout_alignRight="@+id/button8" android:padding="20px" android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_alignBottom="@+id/button15" android:layout_alignLeft="@+id/button12" android:id="@+id/button16" android:layout_below="@+id/button12"></Button>
    <Button android:text="-" android:layout_alignRight="@+id/button8" android:padding="20px" android:layout_height="wrap_content" android:layout_width="wrap_content" android:id="@+id/button12" android:layout_below="@+id/button8"></Button>
    <Button android:text="+" android:padding="20px" android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_above="@+id/button15" android:layout_toLeftOf="@+id/button16" android:id="@+id/button11"></Button>
    <Button android:text="/" android:padding="20px" android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_toLeftOf="@+id/button7" android:layout_alignTop="@+id/button15" android:id="@+id/button14"></Button>
    <Button android:text="0" android:layout_alignRight="@+id/button14" android:padding="20px" android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_above="@+id/button14" android:id="@+id/button0"></Button>
    <Button android:text="*" android:padding="20px" android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_toLeftOf="@+id/button10" android:layout_alignTop="@+id/button14" android:id="@+id/button13"></Button>
    <Button android:text="9" android:padding="20px" android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_above="@+id/button13" android:id="@+id/button9" android:layout_alignParentLeft="true"></Button>
<EditText android:id="@+id/editText1" android:layout_height="wrap_content" android:layout_width="fill_parent" android:layout_below="@+id/button14"></EditText>
  </RelativeLayout>
</LinearLayout> 
```

Java 代码

```
package calci.tor;
import android.R.integer;
import android.R.string;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class CalculatorActivity extends Activity {
    /** Called when the activity is first created. */
    public EditText display;  
    TextView edt;
    Integer c;
    String a="",b;
    //int d=0;

    Button b1,b2,b3,b4,b5,b6,b7,b8,b9,b10,b11,b12,b13,b14,b15,b16;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    edt=(EditText)findViewById(R.id.editText1);
    b1=(Button)findViewById(R.id.button1);
    b2=(Button)findViewById(R.id.button2);
    b3=(Button)findViewById(R.id.button3);
    b4=(Button)findViewById(R.id.button4);
    b5=(Button)findViewById(R.id.button5);
    b6=(Button)findViewById(R.id.button6);
    b7=(Button)findViewById(R.id.button7);
    b8=(Button)findViewById(R.id.button8);
    b9=(Button)findViewById(R.id.button9);
    b10=(Button)findViewById(R.id.button0);
    b11=(Button)findViewById(R.id.button11);
    b12=(Button)findViewById(R.id.button12);
    b13=(Button)findViewById(R.id.button13);
    b14=(Button)findViewById(R.id.button14);
    b15=(Button)findViewById(R.id.button15);
    b16=(Button)findViewById(R.id.button16);

    b1.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            a=edt.getText().toString();
            edt.setText(a+ "1");

        }
    });

    b2.setOnClickListener(new View.OnClickListener()
    {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    a=edt.getText().toString();
                    edt.setText(a+ "2");
                                        }
            });

    b3.setOnClickListener(new View.OnClickListener()
    {

                public void onClick(View v) {
                    a=edt.getText().toString();
                    edt.setText(a+ "3");
                                        }
            });

    b4.setOnClickListener(new View.OnClickListener()
    {

                public void onClick(View v) {
                    a=edt.getText().toString();
                    edt.setText(a+ "4");

                                        }
            });

    b5.setOnClickListener(new View.OnClickListener()
    {

                public void onClick(View v) {

                    a=edt.getText().toString();
                    edt.setText(a+ "5");

                }
            });

    b6.setOnClickListener(new View.OnClickListener()
    {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    a=edt.getText().toString();
                    edt.setText(a+ "6");
                                        }
            });

    b7.setOnClickListener(new View.OnClickListener()
    {

                public void onClick(View v) {

                    a=edt.getText().toString();
                    edt.setText(a+ "7");
                                        }
            });

    b8.setOnClickListener(new View.OnClickListener()
    {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    a=edt.getText().toString();
                    edt.setText(a+ "8");

                }
            });

    b9.setOnClickListener(new View.OnClickListener()
    {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    a=edt.getText().toString();
                    edt.setText(a+ "9");
                                        }
            });

    b10.setOnClickListener(new View.OnClickListener()
    {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    a=edt.getText().toString();
                    edt.setText(a+ "0");

                }
            });

    b11.setOnClickListener(new View.OnClickListener()
    {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                       String aa;
                      aa=a;      //To Store the first number displayed in edit text  to aa
                edt.setText("+");
                    edt.setText("");
                    //d=1;
                    c=Integer.parseInt(aa)+Integer.parseInt(a);

                }
            });

    b12.setOnClickListener(new View.OnClickListener()
    {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    edt.setText("-");

                }
            });

    b13.setOnClickListener(new View.OnClickListener()
    {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    edt.setText("*");
                }
            });

    b14.setOnClickListener(new View.OnClickListener()
    {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    edt.setText("/");
                }
            });

    b15.setOnClickListener(new View.OnClickListener()
    {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    //int c=Integer.parseInt(a)+Integer.parseInt(b);
                    //edt.setText(c);
                    display.setText(c);
                }
            });

    b16.setOnClickListener(new View.OnClickListener()
    {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                edt.setText("");
                }
    });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:58:44.197

如果您的计算器没有`(`/`)`并且您不允许输入负数，那么一个简单的算法来计算数字和操作的恒定输入可以像这样工作：

您有一个代表结果的变量（您可能希望在 EditText 中显示每个步骤）和一个用于缓冲未完成结果的变量

如果操作是`*`或`/`：将其应用到缓冲区

如果操作是`+`or `-`：将缓冲区添加到结果，用新输入覆盖缓冲区

`2 * 4 + 3 + 5 * 2 * 3 - 1 + 2`

*   最初最终结果 = 0，缓冲区 = 1

*   `2`-> result = 0, buffer = 2 （这里小心，我将初始步骤解释为`*2`）

*   `* 4`-> 结果 = 0，缓冲区 = (2*4) = 8
*   `+ 3`-> 结果 = (0+8) = 8，缓冲区 = 3
*   `+ 5`-> 结果 = (8+3) = 11，缓冲区 = 5
*   `* 2`-> 结果 = 11，缓冲区 = (5*2) = 10
*   `* 3`-> 结果 = 11，缓冲区 = (10*3) = 30
*   `- 1`-> 结果 = (11+30) = 41，缓冲区 = -1
*   `+ 2`-> 结果 = (41-1) = 40，缓冲区 = 2

-> finally（例如按下时`=`）将两者相加：Answer = 42

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-09T05:51:33.147

```
//Below having correct programming .
//I did some changes in your code.This code was working nicely try this.
//`import android.os.Bundle;
import android.R.integer;
import android.R.string;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

 public EditText display;  
TextView edt;
Integer c,d,r,b;
String a="0",aa;

Button b1,b2,b3,b4,b5,b6,b7,b8,b9,b10,b11,b12,b13,b14,b15,b16;

@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    edt=(EditText)findViewById(R.id.editText1);
    b1=(Button)findViewById(R.id.button1);
    b2=(Button)findViewById(R.id.button2);
    b3=(Button)findViewById(R.id.button3);
    b4=(Button)findViewById(R.id.button4);
    b5=(Button)findViewById(R.id.button5);
    b6=(Button)findViewById(R.id.button6);
    b7=(Button)findViewById(R.id.button7);
    b8=(Button)findViewById(R.id.button8);
    b9=(Button)findViewById(R.id.button9);
    b10=(Button)findViewById(R.id.button0);
    b11=(Button)findViewById(R.id.button11);
    b12=(Button)findViewById(R.id.button12);
    b13=(Button)findViewById(R.id.button13);
    b14=(Button)findViewById(R.id.button14);
    b15=(Button)findViewById(R.id.button15);
    b16=(Button)findViewById(R.id.button16);

    b1.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
             // TODO Auto-generated method stub

             a=edt.getText().toString();
             a=a+"1";
             edt.setText(a);

         }
     });

     b2.setOnClickListener(new View.OnClickListener()
     {

                 public void onClick(View v) {
                     // TODO Auto-generated method stub

                     a=edt.getText().toString();
                     a=a+"2";
                     edt.setText(a);
                                         }
             });

     b3.setOnClickListener(new View.OnClickListener()
     {

                 public void onClick(View v) {
                     a=edt.getText().toString();
                     a=a+"3";
                     edt.setText(a);
                                         }
             });

     b4.setOnClickListener(new View.OnClickListener()
     {

                 public void onClick(View v) {
                     a=edt.getText().toString();
                     a=a+"4";
                     edt.setText(a);

                                         }
             });

     b5.setOnClickListener(new View.OnClickListener()
     {

                 public void onClick(View v) {

                     a=edt.getText().toString();
                     a=a+"5";
                     edt.setText(a);

                 }
             });

     b6.setOnClickListener(new View.OnClickListener()
     {

                 public void onClick(View v) {
                     // TODO Auto-generated method stub

                     a=edt.getText().toString();
                     a=a+"6";
                     edt.setText(a);
                                         }
             });

     b7.setOnClickListener(new View.OnClickListener()
     {

                 public void onClick(View v) {

                     a=edt.getText().toString();
                     a=a+"7";
                     edt.setText(a);
                                         }
             });

     b8.setOnClickListener(new View.OnClickListener()
     {

                 public void onClick(View v) {
                     // TODO Auto-generated method stub

                     a=edt.getText().toString();
                     a=a+"8";
                     edt.setText(a);

                 }
             });

     b9.setOnClickListener(new View.OnClickListener()
     {

                 public void onClick(View v) {
                     // TODO Auto-generated method stub

                     a=edt.getText().toString();
                     a=a+"9";
                     edt.setText(a);
                                         }
             });

     b10.setOnClickListener(new View.OnClickListener()
     {

                 public void onClick(View v) {
                     // TODO Auto-generated method stub

                     a=edt.getText().toString();
                     a=a+"0";
                     edt.setText(a);
                 }
             });

 b11.setOnClickListener(new View.OnClickListener()
     {

                 public void onClick(View v) {

                       aa=a; 
                       b=1;    
                       a="";
                       edt.setText("+");

                     edt.setText("");
          }
             });

     b12.setOnClickListener(new View.OnClickListener()
     {

                 public void onClick(View v) {

                     aa=a;
                     b=2;
                     a="";
                     edt.setText("-");
                     edt.setText("");

                 }
             });

     b13.setOnClickListener(new View.OnClickListener()
     {

                 public void onClick(View v) {
                     aa=a;
                     b=3;
                     a="";
                     edt.setText("*");
                     edt.setText("");

                 }
             });

     b14.setOnClickListener(new View.OnClickListener()
     {

                 public void onClick(View v) {
                     aa=a;
                     b=4;
                     a="";
                     edt.setText("/");
                     edt.setText("");

                 }
             });

     b15.setOnClickListener(new View.OnClickListener()
     {

                 public void onClick(View v) {

                     if(b==1){
                       c=Integer.parseInt(aa);

                       d=Integer.parseInt(a);             
                       r=c+d;
                     }
                     else
                     if(b==4){
                         c=Integer.parseInt(aa);
                       d=Integer.parseInt(a);
                       r=c/d; 
                     }else
                         if(b==2){
                             c=Integer.parseInt(aa);
                           d=Integer.parseInt(a);
                           r=c-d; 
                         }
                         else
                             if(b==3){
                                 c=Integer.parseInt(aa);
                               d=Integer.parseInt(a);
                               r=c*d; 
                             }
                     Toast.makeText(MainActivity.this, "Result is::"+r, 10000).show();
                     c=0;
                     b=0;
                     d=0;
                     a="";
                     aa="";
                     edt.setText("");
                 }
             });

     b16.setOnClickListener(new View.OnClickListener()
     {

                 public void onClick(View v) {
                     // TODO Auto-generated method stub

                 edt.setText("");
                 }
             });

 }` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T05:41:42.333

您上面的代码几乎是正确的，但在该编程中遗漏了一些小逻辑。单击按钮后，它将字符串值存储到“a”中，就可以了。之后，我们点击运算符符号“a”将存储到“aa”变量中。

例子：

```
a="4";
aa=a;//aa="4"

//After you do like this below way .

c=Integer.parseInt(aa)+Integer.parseInt(a);
//In the above line c (storing integer values) = 4+4;
//a having "4" and aa="4". 
```

# android - 如何在后台运行 flex 移动应用程序？

> ID：10280265
> 
> 赞同：1
> 
> 时间：2012-04-23T12:10:27.293
> 
> 标签：android, apache-flex, mobile, flash-builder

我需要在系统后台运行我的 android 应用程序（用 Flex 编写），以便定期执行一些定义的任务。不幸的是我在网上找不到任何提示:(我也想知道这样的应用程序如何从系统后台恢复？

如果您知道解决方案，请提供帮助。谢谢你。

最好的，马丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:30:56.920

> 我需要在系统后台运行我的 android 应用程序（用 Flex 编写），以便定期执行一些定义的任务

从技术上讲，您应该能够在启动时将其最小化；但是对于性能问题，非活动应用程序会受到限制。这意味着一切——包括计时器——都将比预期的慢。因此，当应用程序处于非活动状态时，计时器上的 1 秒不一定等于现实世界中的 1 秒。

除非用户可以手动触发您的任务；您应该考虑使用替代技术来实现。AIR 通常不适合后台应用程序。

# javascript - 对齐树视图节点中的文本

> ID：10280268
> 
> 赞同：0
> 
> 时间：2012-04-23T12:10:35.063
> 
> 标签：javascript, html, css, jquery-ui

我有一个树视图，我将文本绑定到节点。现在，如果文本的长度增加，它会移动到下一行。下一行从上面的文本前一个位置开始，导致正确对齐。是否有任何 css 或任何方式我可以调用一些 javascript 方法并正确对齐它。

![对齐](../Images/3faa377a9327766ee505d035ca2f9df3.png)

问候，弗朗西斯 P。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:28:01.703

尝试将树的子节点包装在一个跨度中。然后添加 margin-left:5px 或任何东西以确保您将其与树节点对齐。

# symfony1 - Symfony 安全性 - 控制哪些路由是可访问的

> ID：10280270
> 
> 赞同：0
> 
> 时间：2012-04-23T12:10:41.137
> 
> 标签：symfony1, symfony-1.4

我在我的 symfony 应用程序中实现了一个向导式的进程。它还有用于“返回”和“下一步”的附加按钮，并且我控制在提交每个表单后将用户定向到哪些页面。

我想要一些关于一旦用户处于向导模式后如何锁定路线的建议，即如果处于向导模式，他们只能访问向导过程中使用的 5 个页面。如果他们在向导模式下尝试导航到其他路线，它会重定向回向导所在的最后一个已知路线。

如果在向导模式下，我可以进入每个操作并添加重定向，但这似乎是错误的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:33:29.443

[Symfony 过滤器](http://www.symfony-project.org/book/1_2/06-Inside-the-Controller-Layer#chapter_06_sub_building_your_own_filter)在这里是一个不错的选择。

*   将 myWizardFilter.class.php 放入您的应用程序库文件夹中：

    ```
    class myWizardFilter extends sfFilter {

        public function execute ($filterChain) {

            if ($this->isFirstCall() && $wizardMode && $outsideWizard) {

                $controller = $this->getContext()->getController();
                $controller->forward('wizardModule', 'wizardAction');
                throw new sfStopException();            

            }

            $filterChain->execute();    
        }
    } 
    ```

*   您必须`$wizardMode`用您检查的任何内容进行替换，以查看用户是否处于向导模式。
*   您需要检查路线，以便仅在用户尝试导航时重定向回向导模式`$outsideWizard`。否则，您将获得重定向循环。
*   然后将过滤器添加到您的 filters.yml：

    ```
    wizard:
      class:   myWizardFilter 
    ```

# java - 在这种情况下也不知道它的任何超类

> ID：10280271
> 
> 赞同：19
> 
> 时间：2012-04-23T12:10:47.470
> 
> 标签：java, debugging, jaxb

我正在尝试将一些实体发送到基于 ejb 的 Web 服务。这是我的网络服务客户端代码：

```
package ejbserviceclient;

import java.net.MalformedURLException;
import java.net.URL;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.namespace.QName;
import javax.xml.ws.Service;

public class EjbServiceClient {

  public static void main(String[] args) throws MalformedURLException, JAXBException {

    JAXBContext context = JAXBContext.newInstance(EjbServiceClient.class);

    URL url = new URL("http://ipsedin:8080/WebServiceBeanService/WebServiceBean?wsdl");
    QName serviceName = new QName(
            "http://ejb.rpt.softcomputer.com/",
            "WebServiceBeanService");
    QName portName = new QName(
            "http://ejb.rpt.softcomputer.com/",
            "WebServiceBeanPort");

    Service service = Service.create(url, serviceName);
    Echo ejbService = service.getPort(portName, Echo.class);

    System.out.println(ejbService.echo("lololo"));
    System.out.println(ejbService.processExCourse(new ExCourse()));

  }
} 
```

这是实体：

```
package ejbserviceclient;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class ExCourse {

int id;

} 
```

但也有例外：

```
Exception in thread "main" javax.xml.ws.WebServiceException: javax.xml.bind.MarshalException
 - with linked exception:
[javax.xml.bind.JAXBException: class ejbserviceclient.ExCourse nor any of its super class is known to this context.]
    at com.sun.xml.internal.ws.message.jaxb.JAXBMessage.writePayloadTo(JAXBMessage.java:318)
    at com.sun.xml.internal.ws.message.AbstractMessageImpl.writeTo(AbstractMessageImpl.java:131)
    at com.sun.xml.internal.ws.encoding.StreamSOAPCodec.encode(StreamSOAPCodec.java:98)
    at com.sun.xml.internal.ws.encoding.SOAPBindingCodec.encode(SOAPBindingCodec.java:249)
    at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:144)
    at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:83)
    at com.sun.xml.internal.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:78)
    at com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Fiber.java:587)
    at com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Fiber.java:546)
    at com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Fiber.java:531)
    at com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Fiber.java:428)
    at com.sun.xml.internal.ws.client.Stub.process(Stub.java:211)
    at com.sun.xml.internal.ws.client.sei.SEIStub.doProcess(SEIStub.java:124)
    at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:98)
    at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)
    at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:107)
    at $Proxy19.processExCourse(Unknown Source)
    at ejbserviceclient.EjbServiceClient.main(EjbServiceClient.java:30)
Caused by: javax.xml.bind.MarshalException
 - with linked exception:
[javax.xml.bind.JAXBException: class ejbserviceclient.ExCourse nor any of its super class is known to this context.]
    at com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:268)
    at com.sun.xml.internal.bind.v2.runtime.BridgeImpl.marshal(BridgeImpl.java:89)
    at com.sun.xml.internal.bind.api.Bridge.marshal(Bridge.java:130)
    at com.sun.xml.internal.ws.message.jaxb.JAXBMessage.writePayloadTo(JAXBMessage.java:310)
    ... 17 more
Caused by: javax.xml.bind.JAXBException: class ejbserviceclient.ExCourse nor any of its super class is known to this context.
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.reportError(XMLSerializer.java:214)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.reportError(XMLSerializer.java:229)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:621)
    at com.sun.xml.internal.bind.v2.runtime.BridgeImpl.marshal(BridgeImpl.java:136)
    at com.sun.xml.internal.bind.v2.runtime.CompositeStructureBeanInfo.serializeBody(CompositeStructureBeanInfo.java:96)
    at com.sun.xml.internal.bind.v2.runtime.CompositeStructureBeanInfo.serializeBody(CompositeStructureBeanInfo.java:44)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:664)
    at com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:263)
    ... 20 more
Caused by: javax.xml.bind.JAXBException: class ejbserviceclient.ExCourse nor any of its super class is known to this context.
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:554)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:616)
    ... 25 more
Java Result: 1 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-23T15:39:55.303

看起来你没有`JAXBContext`正确初始化你的。您需要通知它所有可能`@XmlRootElement`被解析的类名。

因此你需要改变

```
JAXBContext context = JAXBContext.newInstance(EjbServiceClient.class) 
```

到

```
JAXBContext context = JAXBContext.newInstance(ejbserviceclient.ExCourse.class) 
```

# mysql - mysql自动递增而不插入

> ID：10280274
> 
> 赞同：4
> 
> 时间：2012-04-23T12:11:15.003
> 
> 标签：mysql

我有一个带有自动增量字段的 mysql 表。我使用自动增量计数器作为整个数据库的 id 生成器。

我需要一种方法来增加计数器，获取新数字但不插入任何数据。

有没有容易做到的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T12:49:26.167

如果您将它用作 ID 生成器，那么（除了更改表格）您必须插入一些内容才能获得下一个值。

在不插入任何数据的情况下执行此操作的最简单方法是执行 an`INSERT`之后调用，`LAST_INSERT_ID`然后发出`ROLLBACK`. 这将回滚插入，但下一个 ID 仍将递增。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T12:44:51.360

我想你想改变表，这样你就可以使用它

```
ALTER TABLE table_name AUTO_INCREMENT = id+1 
```

这里 id 将是您的自动增量字段。但是自动增量字段相对于该列中的最大值递增。

# regex - Visual Studio 中的正则表达式替换

> ID：10280277
> 
> 赞同：7
> 
> 时间：2012-04-23T12:11:30.350
> 
> 标签：regex, visual-studio-2010, replace, pattern-matching

使用 Visual Studio 2010，我想做一个项目级正则表达式替换，如下所示。

寻找：`#region {any string here}`

代替：`#region - string from above -`

我尝试了以下方法：

```
region\s'{[^]+}'

region '{[^]+}'

region {:q} 
```

但是 IDE 抱怨模式不正确。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T12:25:22.527

啊，Visual Studio 正则表达式......它们不应该被称为正则表达式，因为它们与“标准”的大部分内容不同

我启动了 VS，经过一些试验和错误，这可行：

搜索：

```
\#region \{{.*}\} 
```

代替：

```
#region - \1 - 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T12:24:25.287

尝试：

搜索：`{\#region:b+}{.*}`

代替：`\1 - \2 -`

如果您专门搜索“{”和“}”，

搜索：`{\#region:b+}\{{.*}\}`

带引号：

搜索：`{\#region:b+}{'.*'}`

要删除引号：

搜索：`{\#region:b+}'{.*}'`

# android - 已签名和未签名的 .apk 文件之间的 Android 差异？

> ID：10280278
> 
> 赞同：21
> 
> 时间：2012-04-23T12:11:32.380
> 
> 标签：android

android中签名和未签名的.apk文件有多少区别？

我只知道一个当我集成应用内购买时我有未签名的.apk 它给了我错误 `Item version is not same as...`

而且我们也不能在安卓设备中安装未签名的.apk文件......

还有其他差异吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-23T12:16:46.497

[签名的 apk 将包含一个额外的文件夹“META-INF”，其中包含三个文件：](http://nowherenearithaca.blogspot.in/2011/12/difference-between-signed-and-unsigned.html)

1.  清单文件
2.  CERT.SF
3.  证书

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-06-17T03:41:03.240

如果您将未签名的 apk 发送给客户，他们必须启用未知来源才能安装该应用程序。此外，Google Play 控制台不接受未签名的。

[![在此处输入图像描述](../Images/3012c52762f2bdadbc92a44efc0bf5b3.png)](https://i.stack.imgur.com/40fW3.png)

# django - 如何在 Django 中通过 url 定义模板？

> ID：10280283
> 
> 赞同：0
> 
> 时间：2012-04-23T12:11:53.003
> 
> 标签：django, django-1.4

我想创建一个项目，每个用户都可以拥有自己的“主页”。所以我希望能够为每个用户设置一个模板并将其显示在他的主页 url 上。我只是将模板名称保存在用户配置文件中并将其传递给模板加载器，还是有更好/更安全/更可插入的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:14:05.237

将模板名称保存在用户配置文件中很好。就像你说的，你可以把它传递给模板渲染方法。

但要注意一件事：用户不能手动输入模板名称。我认为，出于安全原因，它应该是一个选择领域。[请参阅https://docs.djangoproject.com/en/1.4/ref/models/fields/#choices](https://docs.djangoproject.com/en/1.4/ref/models/fields/#choices)的末尾，您可以使模板选择列表动态化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:42:09.037

听起来您想让用户选择他/她最喜欢的模板并设置一系列偏好，例如背景图像、显示样式等？如果是这样，您的解决方案很好。实际上，您允许用户在提供的（和可扩展的）模板集之间进行选择，而不是让他们完全控制要使用的模板。
此外，对于偏好设置，仅用于每个用户。您可能希望将它们保存在序列化字段中，例如 jsonfield 或 picklefield，而不是按列存储它们。我正在编写一个应用程序来简化这些字段的编辑。

# javascript - 如何在 MVC3 中获取所选 ActionLink 的文本

> ID：10280285
> 
> 赞同：2
> 
> 时间：2012-04-23T12:11:55.333
> 
> 标签：javascript, jquery, asp.net-mvc-3, model-view-controller, html.actionlink

我在获取所选 ActionLink 的文本时遇到问题

我在通过数据库获取后动态显示链接，如下所示：

```
 @foreach (var item in Model)
{
   <li>@Html.ActionLink(item.HobbyName, "Hobbies")</li>
} 
```

现在，我该如何获取所选链接的文本？

我试过这个：

```
filename = $('a').text;
alert(filename); 
```

但不工作。请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:15:08.527

像这样使用

```
filename = $('a').text(); 
```

`text()`是一个函数，而不是一个属性。

**编辑：**

如果您想在单击该链接时获取链接文本，请尝试这样

```
$('a').click(function() {
   filename = $(this).text();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:41:29.907

试试这个：

```
filename = $('li a').text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:46:34.933

`@Html.ActionLink`呈现为标准锚标记，因此您可以执行以下操作：

```
$(function(){
    $("ul li").each(function(){
       var text = $(this).find("a").text();
       alert(text);
    });        
});​ 
```

[**-- 看演示 --**](http://jsfiddle.net/Curt/Aau9M/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T13:02:47.000

```
var d = document,
    arr = []

Array.prototype.forEach.call( d.getElementsByTagName( 'li' ), function ( el ) {
    arr.push( el.firstElementChild.textContent )
} )

alert( arr ) 
```

当然，如果您为元素设置一些类/ID，则可以对此进行优化。

# php - PHP限制数组中每个字符串的长度

> ID：10280288
> 
> 赞同：0
> 
> 时间：2012-04-23T12:12:02.940
> 
> 标签：php, arrays

我有一个包含多个字符串的数组，如下所示：

```
$str[0] = "kasdnkjsandjabsdkjsbad";
$str[1] = "kasdnkjsandjasdjksabdjkasbkjdsak";
$str[2] = "kasdnkjsandsadbaskjdbsakjdbasdsadjsadjksabdk";
$str[3] = "kasdnkjsandasdjbaskdbjsakbdkjsabdjksabdkjsabdjkasbdjksa";
$str[4] = "kasdnkjsandsajdbaskjdbjksabdjkbasjkdbjksadbjksadbjksadbjksadbkjsa";
$str[5] = "kasdnkjsandasdjbsakdjbsakjdbsakjdsakjdbjksabdjksabdkjasbkjdasbkjdbsakjdsabjk"; 
```

有什么办法可以限制所有数组的字符串长度，假设我不知道某个数组中有多少个字符串。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:20:31.790

好吧，从理论上讲，这很简单：只需创建一个“限制”字符串长度的函数，如果太长，将其删除：

```
<?php

$str = array( );
$str[0] = "kasdnkjsandjabsdkjsbad";
$str[1] = "kasdnkjsandjasdjksabdjkasbkjdsak";
$str[2] = "kasdnkjsandsadbaskjdbsakjdbasdsadjsadjksabdk";
$str[3] = "kasdnkjsandasdjbaskdbjsakbdkjsabdjksabdkjsabdjkasbdjksa";
$str[4] = "kasdnkjsandsajdbaskjdbjksabdjkbasjkdbjksadbjksadbjksadbjksadbkjsa";
$str[5] = "kasdnkjsandasdjbsakdjbsakjdbsakjdsakjdbjksabdjksabdkjasbkjdasbkjdbsakjdsabjk";

$length = 10;

$substr = function( $element ) use ( $length ) {
    return substr( $element, 0, $length );
};

$str = array_map( $substr, $str ); 

var_dump( $str ); 
```

*编辑*：如果您想在将字符添加到数组时“限制”字符数，您可以简单地在函数中创建一个检查：

```
<?php

function append( &$array, $value, $length = 25 ) {
    if( mb_strlen( $value ) > $length ) {
        return false;
    }
    return $array[] = $value;
}

$strings = array( );

append( $strings, 'kasdnkjsandjabsdkjsbad' ); // is accepted.
append( $strings, 'kasdnkjsandjabsdkjsbadkasdnkjs' ); // is not accepted
append( $strings, 'kasdnkjsandsadbaskjdbsakjdbasdsadjsadjksabdk' ); // is not accepted.

// if you *really* want to exit when a value is too long:
function append_exit( $array, $value, $length = 25 ) {
    if( mb_strlen( $value ) > $length ) {
        trigger_error( 'Value is too long.', E_USER_ERROR );
        exit;
    }
    return $array[] = $value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:19:13.940

我假设您想遍历数组中的每个字符串并将其修剪为特定长度。

创建一个对单个字符串（作为参数）执行此操作的函数。用于`array_map`将此函数应用于数组中的每个元素。

自己尝试一下 - 如果您有任何问题，请将您的尝试附加到您的问题中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:19:42.627

你可以使用

```
substr( $myString, $startInt, [$endInt] ); 
```

将每个字符串限制为只有这么多字符。一个例子：

```
for( $i = 0; $i < sizeof( $myArray ); $i++ ){
    $myArray[$i] = substr( $myString, 0, 20 );
} 
```

如果我做得对的话，这会将字符串的长度限制为 20 个字符。

# php - 检测用户时区并使用该时区显示 UTC 时间

> ID：10280292
> 
> 赞同：1
> 
> 时间：2012-04-23T12:12:10.293
> 
> 标签：php, timezone

我有一个带有 UTC TIMESTAMPS 列的表。我如何用用户时区显示它？Facebook 使用用户计算机的时间设置。Facebook 没有用户设置时区的页面，所以我让 Facebook 自动检测它。我怎样才能做到像 Facebook 一样？我正在使用 php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:42:43.287

您不能在服务器端可靠地执行此操作。您可以改为使用 JavaScript 检测用户的时区，但它可能并不完全可靠。

[http://www.onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/](http://www.onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/)

# iphone - Xcode - 每天更新 UITableView（来自服务器的 xml 数据）

> ID：10280309
> 
> 赞同：0
> 
> 时间：2012-04-23T12:13:18.667
> 
> 标签：iphone, objective-c, xcode4, notifications

对于我的新 iPhone 应用程序（Xcode 4.3.2），我想每天更新我的 UITable（来自服务器的 xml 数据），即使应用程序在后台运行。我需要遵循哪种方法。你能指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:21:49.630

我可以给你另一个选择，每天向你的应用程序发送本地通知，当用户点击通知应用程序启动时，然后从服务器更新数据。

如果您想每天更新此选项。

否则，当应用程序处于后台时，无需更新数据，您可以在启动时更新它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:31:52.880

推送通知可能是您想要研究的另一个答案。我的设备上有一个应用程序，它似乎将推送通知用于类似目的（每天使用新数据更新应用程序）。

# c# - 在 Asp.Net 中显示来自数据库的元素文本

> ID：10280311
> 
> 赞同：0
> 
> 时间：2012-04-23T12:13:20.067
> 
> 标签：c#, asp.net

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:27:39.217

```
 <ul>
    <li>
        <a>Home</a>
    </li>
    <li>
        <a>Contact Us</a>
    </li>
    <li>
        <a><%=Request.LogonUserIdentity.Name %></a>
    </li>
  </ul> 
```

但是 - 您需要 Windows 身份验证才能看到真正的登录用户 - 否则您将看到 AppPool 用户。

ps如果你在绑定上下文中：使用`<%#`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:28:23.240

如果我理解正确，如果您想要菜单中的用户名并将该菜单与用户名连接，那么只需将 @@username 与菜单一起存储在数据库中，并在加载时将 @@username 替换为用户

`using String.replace("@@username",strUserName)`

# java - 如何动态创建具有指定属性的 TextView？

> ID：10280313
> 
> 赞同：3
> 
> 时间：2012-04-23T12:13:23.973
> 
> 标签：java, android

```
<TextView
    android:id="@+id/online_message"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:text="Onliners:"
    /> 
```

我想通过以下方式创建与`TextView`上述相同的内容：

```
android.widget.TextView.TextView(Context context, AttributeSet attrs) 
```

但是如何指定`attrs`它以使其表示与上述相同的属性？

[这个答案](https://stackoverflow.com/a/4796124/104015)很接近，但是有没有办法只读取属性（`TextView`xml 中没有标签）并解析为`AttributeSet`？

**更新**

我正在寻找一种以`AttributeSet`编程方式构建的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:18:25.623

我认为**AttributeSet**与使用 xml 布局一起使用时使用效果更好。否则，您可以创建上述所需的 TextView，如下所示：

```
TextView t = new TextView(context);
t.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
t.setTextAppearance(context, android.R.attr.textAppearanceLarge);
t.setText("Onliners:"); 
```

关于 ID，您实际上不需要在代码中设置它，因为您引用了整个对象。

# javascript - 移除悬停动画

> ID：10280314
> 
> 赞同：3
> 
> 时间：2012-04-23T12:13:28.183
> 
> 标签：javascript, jquery, html, css

请转到以下链接并单击故事，

[http://premio-e.de/](http://premio-e.de/)

当我鼠标悬停时，

[http://awesomescreenshot.com/03b435w09](http://awesomescreenshot.com/03b435w09)

它在悬停时动画。

我该如何删除这个。我为此使用下面的css，

```
.storypageThumb1 {
    float:left;
    width:175px;
    height:91px;
    text-indent: -9999px;
    background:url(../images/storyPage-thumb01_new.png) no-repeat;
    text-transform: uppercase;
}

.storypageThumb1:hover {
    background-position:0 -91px;
} 
```

假设只是改变位置。没有动画。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T12:16:58.917

您已使用以下代码将所有锚点设置为对所有 CSS 更改进行动画处理：

```
a { -webkit-transition: all 0.3s ease; } 
```

您可以在您的`storeypageThumb1`：

```
.storypageThumb1 {
    -webkit-transition: none;
    ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T12:21:30.553

在萤火虫中，我注意到您的所有`a`标签都关联了一个转换：

`-moz-transition: all 0.3s ease 0s;`

这就是为什么它是动画。您必须从该元素中删除过渡，例如：

```
.storypageThumb1 { 
    transition:none; 
    -moz-transition:none; 
    -o-transition:none; 
    -webkit-transition:none; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T12:21:02.053

在这个站点中，它们是一个名为的 CSS 文件`normalize.css`

```
a {
    -moz-transition: all 0.3s ease 0s; // convet this line to -moz-transition: none;
    color: white;
    outline: medium none;
    text-decoration: underline;
} 
```

或为你`.storypageThumb1`写：

```
.storypageThumb1 {
  -moz-transition: none;
  -webkit-transition: none;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T12:27:43.530

比这简单得多！

.storypageThumb1:hover { 背景：无；}

# wordpress - Wordpress，它不会在主页中显示限制帖子

> ID：10280319
> 
> 赞同：0
> 
> 时间：2012-04-23T12:13:52.343
> 
> 标签：wordpress

我在主页中创建了一个 wordpress 主题，正如我在另一个模板中看到的那样，用于在主页中获取限制数量的帖子。已经开发了如下代码：

```
<?php
$featuredPosts->query('showposts=40');
while ($featuredPosts->have_posts()  ) : $featuredPosts->the_post(); ?>

<!-- blah blah -->

<?php endwhile;?> 
```

但它显示了 35 个帖子，我该如何解决？它取决于服务器速度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:22:24.067

试试这个

```
$featuredPosts->query('posts_per_page=40'); 
```

showposts (int) - 每页显示的帖子数。自 WP 版本 2.1 起已弃用，支持“posts_per_page”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:22:20.960

**第 1 点**：首先检查您是否有 40 个或更多帖子

试试那个代码

```
 <?php query_posts("showposts=40"); ?> 
```

或者

```
<?php query_posts( 'posts_per_page=40' ); ?> 
```

并检查 wp_admin 面板设置->阅读设置->**博客页面最多显示**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:24:20.760

您确定要查询的类别中有超过 35 个帖子吗？我认为您使用的**查询**方法应该是**query_posts**。一个更标准的符合循环将是：

```
<?php query_posts('showposts=40');  
    while (have_posts()) : the_post();  
?> 
```

# emacs - 如何突出显示#ifdef #endif in emacs?

> ID：10280321
> 
> 赞同：4
> 
> 时间：2012-04-23T12:13:53.787
> 
> 标签：emacs, elisp, cedet, cc-mode

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:18:16.630

您可以使用可以启用的“hideif”包：

```
M-x hide-ifdef-mode 
```

启用后，您需要自定义 hide-ifdef-shadow 为 true 以指示着色而不是不可见文本。

如果您使用 CEDET 来解析您的文件，您将获得额外的好处，即您的许多 #define 宏也与 hideif 一样准确。

# c# - C# REST API: xml as post data

> ID：10280326
> 
> 赞同：2
> 
> 时间：2012-04-23T12:14:21.103
> 
> 标签：c#, xml, rest

I'm working on a project which requires me to work with an REST API. The API expects a DTO as input parameter.

```
 [OperationContract]
        [WebInvoke(Method = "POST", UriTemplate = "campaign/create?session={sessionkey}", ResponseFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml)]
        [XmlSerializerFormat(Style = OperationFormatStyle.Document, Use = OperationFormatUse.Literal)]
        FeedbackDTO PersistCampaign(string sessionkey, CampaignDTO PaycentoCampaign); 
```

I'm trying to send the data to this method with the following method:

```
public static HttpWebResponse DoHttpWebRequest(String url, String method, string data)
{
    HttpWebRequest req = WebRequest.Create(url) as HttpWebRequest;
    req.KeepAlive = false;
    req.ContentType = "application/xml";
    req.Method = method;
    if ((method.Equals("POST") || method.Equals("PUT")) && data != null)
    {
        byte[] buffer = Encoding.UTF8.GetBytes(data);
        Stream PostData = req.GetRequestStream();
        PostData.Write(buffer, 0, buffer.Length);
        PostData.Close();
    }
    return req.GetResponse() as HttpWebResponse;
} 
```

After hours of debugging I found that the problem is caused by the DateTime proprties. I started to 'manually' create the XML and do property per property.

```
 sb.Append("<Startdate>").Append(HttpUtility.HtmlEncode(Startdate.ToString(Helper.DATE_FORMAT_STRING))).Append("</Startdate>"); 
```

I tried adding a format (ddMMyyyy) in the toString but it's still causing a bad request. How should I add a DateTime property to the XML so ASP.NET is able to parse it into the DTO?

Stuff I tried:

*   StartDate.ToLongDateString()
*   StartDate.ToString()
*   StartDate.toString("ddhhyyyy")
*   StartDate.Ticks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:02:38.637

StartdDate.toString("s") 成功了。

# java - ANTLR DSL with Java interoperability

> ID：10280327
> 
> 赞同：1
> 
> 时间：2012-04-23T12:14:28.683
> 
> 标签：java, interop, antlr, dsl, antlr3

I have been working through the tutorial at [http://bkiers.blogspot.de/2011/03/creating-your-own-programming-language.html](http://bkiers.blogspot.de/2011/03/creating-your-own-programming-language.html). In short, a small language is developed that has a minimal set of arithmetic operations. "println" and "print" are directly mapped functions that call `System.out.print()`.

From this I am trying to implement my own DSL by changing some properties of the language that has been developed in that article series. I want to make `java.lang.Math` accessible from within my DSL, but can't think of a good way without having to map each function manually.

The language does not support imports whatsoever. I could introduce a new grammar rule to match `Math.<function>(<parameters>)`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:42:31.230

您可以通过`Math`保留字并进行以下更改来做到这一点：

### 语法补充

```
functionCall
  :  Identifier '(' exprList? ')'         -> ^(FUNC_CALL Identifier exprList?)
  |  Println '(' expression? ')'          -> ^(FUNC_CALL Println expression?)
  |  Print '(' expression ')'             -> ^(FUNC_CALL Print expression)
  |  Assert '(' expression ')'            -> ^(FUNC_CALL Assert expression)
  |  Size '(' expression ')'              -> ^(FUNC_CALL Size expression)
  |  Math '.' Identifier '(' exprList ')' -> ^(FUNC_CALL Math Identifier exprList) // added
  ;

// ...

Math : 'Math'; // added 
```

### 树语法加法

```
functionCall returns [TLNode node]
  :  ^(FUNC_CALL Identifier exprList?)     {node = new FunctionCallNode($Identifier.text, $exprList.e, functions);}
  |  ^(FUNC_CALL Println expression?)      {node = new PrintlnNode($expression.node);}
  |  ^(FUNC_CALL Print expression)         {node = new PrintNode($expression.node);}
  |  ^(FUNC_CALL Assert expression)        {node = new AssertNode($expression.node);}
  |  ^(FUNC_CALL Size expression)          {node = new SizeNode($expression.node);}
  |  ^(FUNC_CALL Math Identifier exprList) {node = new MathCallNode($Identifier.text, $exprList.e);} // added
  ; 
```

### 新的数学节点类

```
package tl.tree;

import tl.TLValue;
import java.util.ArrayList;
import java.util.List;

public class MathCallNode implements TLNode {

    private String methodName;
    private List<TLNode> params;

    public MathCallNode(String nm, List<TLNode> ps) {
        methodName = nm;
        params = ps;
    }

    @Override
    public TLValue evaluate() {
        if(methodName.equals("sqrt")) 
            return new TLValue(Math.sqrt(params.get(0).evaluate().asDouble()));
        else if(methodName.equals("min")) 
            return new TLValue(Math.min(params.get(0).evaluate().asDouble(), params.get(1).evaluate().asDouble()));  
        // TODO implement more Math-methods
        else
            throw new RuntimeException("unknown method: Math." + methodName + "(...)");
    }
} 
```

现在您不需要在自己的类中实现所有单独的方法，但仍然需要检查在 的方法中调用了哪个方法`evaluate()`，`MathCallNode`当然。

如果您现在评估：

```
println(Math.sqrt(9));
println(Math.min(9, -42)); 
```

将打印以下内容：

```
3.0
-42.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:06:49.917

肯定有一些更复杂的方法，但也许您可以使用 doMath("function(a,b)") 并使用反射在生成的代码中调用 function(a,b)。你甚至可以用这种方式对函数(a,b) 进行类型检查——如果 java.lang.Math.function(a,b) 不存在（反射这么说），你会记录类型检查错误。

这样，只有一个规则就足够了（doMath）。

在任何情况下，祝你好运；）

# c# - Setting a member variable to an object outside the class

> ID：10280328
> 
> 赞同：0
> 
> 时间：2012-04-23T12:14:28.730
> 
> 标签：c#, variables, reference, parameters

I want to track a variable in my class that was created outside the scope. In C++ i'd just pass a pointer like this.

```
class Camera
{
    Player* player;
    Position pos;

    void setFollow(Player* pl) { pl = player; }
    void update() { pos = pl->getPos(); }
}

int Main()
{
    Camera* camera = new Camera();

    Player* player = new Player();

    camera->setFollow(player);
} 
```

In C# I tried to pass by reference but it didnt seem to work.

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    Camera cam = new Camera();
    Player player = new Player();

    cam.setFollow(ref player);  // <-- by reference
} 
```

This is just a shortened version of my actual code.

Thanks for any help.

EDIT: Thanks to all for the information.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:19:22.780

在 C# 中，对象（类）变量是隐式指针。因此，如果您的类`Camera`有一个`p`type 字段，那么在您的代码中进行`Player`设置`cam.p = player`将使两个引用都指向同一个实例。`ref`除非您通过引用传递值类型（`int`, `float`,`structs`等），否则通常不需要使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:18:17.367

这里不需要使用`ref`关键字，因为在 C# 中对象总是通过引用传递。C# 中的`ref`关键字通常更像`**`C/C++ 中使用的指针指针 ( )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:27:05.450

`ref`C# 中的关键字有一个非常糟糕的名字。这并不意味着您通过引用传递！它应该被命名`alias`，因为这是描述语义的好词`ref`。

```
// here I assign a reference(another bad name :) )
// you can also call it Garbage Collector Handler 
// of type Player with a new object
Player player = new Player(); 
// ref means that player is the same thing that parameter pl of setFollow
cam.setFollow(ref player); 
```

[更多细节](http://www.yoda.arachsys.com/csharp/parameters.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T12:17:49.663

Player 本身是一个引用类型，为什么要使用 ref. 您可以在此处阅读有关参考的更多信息 [http://msdn.microsoft.com/en-us/library/14akc2c7.aspx](http://msdn.microsoft.com/en-us/library/14akc2c7.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T12:18:07.000

类总是通过引用传递，所以你不需要你想要做的 ref 位

简单地

```
cam.setFollow(player); 
```

# android - 检查互联网连接

> ID：10280330
> 
> 赞同：0
> 
> 时间：2012-04-23T12:14:34.487
> 
> 标签：android, mobile, error-handling, wifi

我检查与

```
ConnectivityManager connec = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
android.net.NetworkInfo wifi = connec.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
android.net.NetworkInfo mobile = connec.getNetworkInfo(ConnectivityManager.TYPE_MOBILE); 
```

我有wifi，我的手机状态错误，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:27:32.903

您是否在清单文件中提供了下面提到的所需权限...

```
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:34:30.277

请使用以下标准方法检查天气互联网连接是否连接......

```
public static final boolean isNetworkConnected(Context context) {
        if (context != null) {
            ConnectivityManager mgr = (ConnectivityManager) context
                    .getSystemService(Context.CONNECTIVITY_SERVICE);

            if (mgr != null) {
                boolean mobileNetwork = false;
                boolean wifiNetwork = false;

                NetworkInfo mobileInfo = mgr
                        .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
                NetworkInfo wifiInfo = mgr
                        .getNetworkInfo(ConnectivityManager.TYPE_WIFI);

                if (mobileInfo != null)
                    mobileNetwork = mobileInfo.isConnected();
                if (wifiInfo != null)
                    wifiNetwork = wifiInfo.isConnected();

                return (mobileNetwork || wifiNetwork);
            }
        }
        return false;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T12:36:21.417

您也可以尝试使用此代码来连接 Wifi 和 Cell 数据互联网连接。

```
private boolean haveNetworkConnection() {
  boolean haveConnectedWifi = false;
  boolean haveConnectedMobile = false;

ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo[] netInfo = cm.getAllNetworkInfo();
for (NetworkInfo ni : netInfo) {
    if (ni.getTypeName().equalsIgnoreCase("WIFI"))
        if (ni.isConnected())
            haveConnectedWifi = true;
    if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
        if (ni.isConnected())
            haveConnectedMobile = true;
}
   return haveConnectedWifi || haveConnectedMobile;
} 
```

或者您可以使用以下方法

```
public boolean isNetworkAvailable() {
ConnectivityManager cm = (ConnectivityManager) 
    getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo networkInfo = cm.getActiveNetworkInfo();
// if no network is available networkInfo will be null
// otherwise check if we are connected
if (networkInfo != null && networkInfo.isConnected()) {
    return true;
}
return false;
} 
```

**这需要 ACCESS_NETWORK_STATE 权限。**

# mysql - How to manage rooms availability based on days or months occupation

> ID：10280333
> 
> 赞同：1
> 
> 时间：2012-04-23T12:14:48.370
> 
> 标签：mysql, database-design, activerecord, ruby-on-rails-3.1

I'm developing a Rails 3 application (with MySQL as RDMS) to manage availability/occupancy for some Rooms (it's an hotel-like app) In my case, the problem is I've to keep up in the system 2 different requirements because one room can be rented for:

1.  *Some months (for example 6 monts)*
2.  *Some days/weeks/weekend*

Clearly the app has to show for each room in a given date, if it is available or not, and which user is renting; and on the other side, one user can search one room for a given date range. The date range can be some fixed date or some months range (from September to March for instance) and I know this is something not related with the DataBase deisgn but I've to keep in mind.

To get this system working in a efficient way, I thought to create a table YEAR composite by a reference to the Room and an array (representing 1 year) of 365 elements when each element could be 0 or 1, when 0 means available and 1 means rented.

Adopting this solution I'll have to face with some problems:

1.  Return very quick results when an user is searching for a room during some months.
2.  Managing 'cross-years'ranges (for instance, from 20th of December of 2012 to 13rd of January of 2013)
3.  Leap years

and the last thing, I'm tying to avoid SQL procedure or mid-night processes (if it's possible)

I'm sure there are better ways to design this problem in SQL... Could some of you help me? or giving me some hint?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:32:01.983

保留一份有开始日期和结束日期的房间预订清单。不要尝试对可用性空档进行建模或将您的预订数据库视为电子表格。这只会让你变得毫无意义的复杂性。日期范围很容易使用。

最重要的是要知道如何检测查询中的重叠日期范围。这是测试房间是否已预订或是否免费的基础。假设您有一个 RESERVATION 表，并且您想要查找与给定日期范围重叠的预订：@FromDate 和 @ToDate。您用于查找重叠预订的 WHERE 子句如下所示：

```
WHERE RESERVATION.start_date < @ToDate 
  AND RESERVATION.end_date > @FromDate 
```

可用房间不会有冲突（即 WHERE NOT IN...），不可用房间会有冲突。

# jquery - 拖动父元素时如何删除子元素

> ID：10280342
> 
> 赞同：1
> 
> 时间：2012-04-23T12:15:19.683
> 
> 标签：jquery, drag-and-drop

我有一个元素（父元素），我可以拖放，它里面有一个子元素，它不能被拖开，但它是与父元素一起拖动的。

此外，还有一些区域可以折叠子元素。

当我拖动父级时，我需要获得可以拖动响应子级的区域。

JS：

```
$(document).ready(function() {
     $(".parent").draggable({});
     $(".drop-area").droppable({
         tolerance: touch
         , over: function(){
            $(".drop-area").css("background-color","#C00");
         }
         , deactivate:function(){
            $(".drop-area").css("background-color","#000");
         }              
     });
} 
```

CSS：

```
.parent { position: relative; width: 200px; height: 200px; background: green; }
.child  { position: relative; width: 100px; height: 50px; background: red; right: 0; bottom: -50px;  }
.drop-area { position: absolute; width: 150px; height: 150px; bottom: 0; right: 0; background: bloack; } 
```

HTML：

```
<body>
    <div class"parent">
        <div class="child"></div>
    </div>
    <div class="drop-area"></div>
</body> 
```

# gwt - gwt 是否支持距离格式的 i18n？

> ID：10280351
> 
> 赞同：2
> 
> 时间：2012-04-23T12:15:54.737
> 
> 标签：gwt, internationalization

距离格式，例如 km、mi、yard 等的数字、货币和日期时间格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:26:17.490

这是一个教程的链接

[https://developers.google.com/web-toolkit/doc/latest/tutorial/i18n](https://developers.google.com/web-toolkit/doc/latest/tutorial/i18n)

和更多

[https://developers.google.com/web-toolkit/doc/latest/DevGuideI18n](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18n)

但是由于gwt基于java，并且根据[stackoverflow.com/questions/7659952/](https://stackoverflow.com/questions/7659952/internationalization-of-distances-in-java) ... ... java不包含任何距离国际化...所以我认为它没有

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:24:16.193

请参阅[Units of Measurement API](https://code.google.com/p/unitsofmeasure/)及其在[JScience](http://jscience.org/)库中的实现。但是我不知道是否可以使用 GWT JS 编译器编译该库...

# javascript - 如何正确创建这个正则表达式，jquery

> ID：10280354
> 
> 赞同：2
> 
> 时间：2012-04-23T12:16:05.330
> 
> 标签：javascript, jquery, jquery-validate

我想创建一个 jQuery 验证方法来根据以下规则进行验证：

1.  英文字母。`A-Z , a-z`.
2.  非英文字母`\u0080-\u024F`。
3.  对于这些字符 - / ) ( ` . " '
4.  和空格字符

目前我正在使用：

```
jQuery.validator.addMethod("custommethod", function(value, element) {
      return this.optional(element) || /^[a-zA-Z\u0080-\u024F ]+$/i.test(jQuery.trim(value));
    }, "You Have Typed Invalid Characters"); 
```

目前我已经完成了步骤 1、2、4 的验证。但是当我尝试添加第 3 步时，它失败了。

如何将步骤 3 添加到验证中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:27:00.653

只需以转义形式添加可能是 RegExp 一部分的字符：

```
/^[a-zA-Z\u0080-\u024F\s\/\-\)\(\."`']+$/i
   .test('.ab-"..c ëd ç -(// \')'); //=>true 
```

[另请参见](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)，尤其是*表 4.1 正则表达式中的特殊字符。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:27:48.303

```
 /^[a-z\u0080-\u024F \-\/\)\(\"\'\.\`]+$/i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:30:07.190

请尝试以下正则表达式：

```
/^[a-zA-Z\u0080-\u024F\s-/)(`."']+$/i 
```

# objective-c - NSMutableDictionary 已分配并使用节点初始化，但它在soapdictionary 中发出警告

> ID：10280355
> 
> 赞同：0
> 
> 时间：2012-04-23T12:16:07.420
> 
> 标签：objective-c, soap, dictionary

```
+ (id) newWithNode:(CXMLNode*)node {
  return (id)[[[NSMutableDictionary alloc] initWithNode:node]autorelease];
 } 
```

在这段代码中，MutableDictionary 是用节点分配和初始化的，但它在soapdictionary 中给出警告。我们该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:19:51.603

`NSString *name=[[NSArray alloc] init];`在 a 之后`return`，它永远不会运行。如果它是无用的代码并且这就是警告消息所说的，只需删除这行代码。

此外，初始化 NSArray 对象并将其分配给 NSString 指针是没有意义的。

**更新**

`NSMutableDictionary`默认没有`initWithNode:`方法。我不熟悉 Sudzc（code.google.com/p/sudzc），但根据您的描述，我猜您正在使用它。如果这是真的，请尝试替换`NSMutableDictionary`。`SoapDictionary`它实现了一个`initWithNode:`方法。

# javascript - 人们如何在不透露他们的谷歌 API 密钥的情况下将所有这些酷的谷歌地图示例放在 jsFiddle 上？

> ID：10280356
> 
> 赞同：4
> 
> 时间：2012-04-23T12:16:15.860
> 
> 标签：javascript, jsfiddle

以这个例子为例 - [http://jsfiddle.net/pborreli/X5r8r/](http://jsfiddle.net/pborreli/X5r8r/)

这是一个有效的谷歌地图示例，但在检查 jsFiddle 上的源代码时未披露相应的 API 密钥。

我有一个问题要在谷歌地图上问，为此我想制作一个 jsFiddle 示例，但我只是不明白如何将我的谷歌 API 密钥保密？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T12:41:48.077

谷歌发送的关于是否需要密钥的信息有点混杂，也不是很清楚。但是，我会稍微重构一下这个故事，部分来自记忆，部分来自网站的不同部分所说的内容，部分来自其他资源，例如本网站上的另一个问题（[Google Maps API V3 中的 API 密钥是什么？](https://stackoverflow.com/questions/2769148/whats-the-api-key-for-in-google-maps-api-v3) )

这一切都始于 API 版本 3 的推出。而版本 2 使用了密钥，他们不再觉得需要使用密钥，因此下一个版本没有密钥。现在可以在没有密钥的情况下使用 API。

但是，后来他们更改了一些内容，例如允许您查看使用情况统计信息并设置一些额外的限制，例如可以执行的地图加载次数。这意味着它们被重新引入了密钥。密钥现在可用于购买额外的地图加载，并且您在注册密钥时提供的信息将允许 Google 在您达到最大地图加载时与您联系。

因为过去不需要密钥，所以现在如果不更改 API 的版本就不可能了，否则所有使用该 API 的应用程序都会崩溃。因此，他们继续允许在没有密钥的情况下使用 API。尽管如此，谷歌确实希望人们使用 API 密钥，所以他们用这样一种方式措辞，看起来你确实需要一个。

在某些地方可以找到缺少 API 密钥的痕迹，但出于某种原因，Google 选择不讲述整个故事，也没有讲述过去没有 API 密钥的部分，而是现在。

无论如何，回到您的问题，您可以省略 API 密钥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-08T19:24:38.330

最新的 Google Maps Javascript API 需要密钥，但 jsfiddle 不需要密钥。只需将 google maps js URL 添加到“外部资源”：

```
https://maps.googleapis.com/maps/api/js 
```

[jsfiddle](https://jsfiddle.net/biog/w55hf2dk/3/)

# php - 如何从页面的 URL 中提取网站的 URL？

> ID：10280360
> 
> 赞同：0
> 
> 时间：2012-04-23T12:16:30.343
> 
> 标签：php

我必须从页面的 URL 中提取网站的 URL。例如，这是我的 php 代码：

```
<?php

$pageA = "http://stackoverflow.com/questions/tagged/php";
$pageB = "https://www.google.it/search?channel=cs&ie=UTF-8&q=php+download";
$pageC = "http://www.facebook.com/ladygaga";
$pageD = "www.youtube.com";
$pageE = "yahoo.com";

?> 
```

我必须提取

```
stackoverflow.com
www.google.it
www.facebook.com
www.youtube.com
yahoo.com 
```

从这些页面的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:20:26.607

[parse_url](http://php.net/manual/en/function.parse-url.php)正是为此。从链接的手册：

> 此函数解析 URL 并返回一个关联数组，其中包含存在的 URL 的任何各种组件。

例子：

```
<?php
$url = 'http://username:password@hostname/path?arg=value#anchor';

print_r(parse_url($url));
?> 
```

将输出：

```
Array
(
  [scheme] => http
  [host] => hostname
  [user] => username
  [pass] => password
  [path] => /path
  [query] => arg=value
  [fragment] => anchor
) 
```

**更新**

没有方案的情况`parse_url`无法识别其他领域。解决此问题的方法是捕获这种情况，附加默认方案并重新解析。代码看起来像：

```
<?php
$url = 'yahoo.com/help';
$fields = parse_url($url);

if(empty($fields['scheme'])) {
  $fields = parse_url('http://' . $url);
}

print_r($fields);
?> 
```

# python - 将我的 py2exe 0.69 更新到主干

> ID：10280363
> 
> 赞同：1
> 
> 时间：2012-04-23T12:16:50.867
> 
> 标签：python, py2exe

我使用官方版本安装了 py2exe，但是生成的 exe 出现问题，所以我想我将它更新到主干并看到它解决了我的问题，因为最后一个版本已经超过 3 年了（最后修改 2008- 11-16）。如前所述，您可以在[此处](https://py2exe.svn.sourceforge.net/svnroot/py2exe)[获取](http://sourceforge.net/scm/?type=svn&group_id=15583)源代码。

所以我的问题是我应该如何继续使用最新版本更新我安装的内容？我应该只下载源代码并覆盖安装文件夹吗？

# asp.net-mvc-3 - 如何在 MVC 中更改默认生成的样式

> ID：10280367
> 
> 赞同：0
> 
> 时间：2012-04-23T12:17:04.983
> 
> 标签：asp.net-mvc-3, model-view-controller

在 MVC 中，当我们想在脚手架选项中添加新的控制器类时，我们可以选择生成视图等的模板。

我想知道我怎样才能有一个自定义模板？

我想添加一些新视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:04:50.460

查看[MVCScaffolding](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/)，它是一个比支持自定义模板和创建自定义脚手架更强大的脚手架引擎。

我不知道使用默认脚手架的方法。

# javascript - 如何使用 Ajax 和 jquery 调用 web 服务？

> ID：10280368
> 
> 赞同：0
> 
> 时间：2012-04-23T12:17:10.960
> 
> 标签：javascript, ajax, web-services, jquery

我正在使用以下代码通过 jQuery ajax 调用 web 服务。但它不起作用？Web 服务以 JSON 格式返回值。如何通过此代码访问网络服务？

```
<html>
    <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <script>
    $(document).ready(function () {
        $('input[id^="button"]').click(function () {
            alert('You have clicked ' + $(this).val());
            $.ajax({
                type: 'Get',
                url: 'http://localhost:56789/xxx/Handler.ashx?key=yyy ',
                success: function (data) {
                    alert(data);
                }
            });

        })
    })
    </script>

     <body>
        <div id="Sample_Div">
            <input type="button" id="button1" value="button1" />
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:37:45.167

也许你可以试试这个。

```
 $.ajax({
        url: "../Services/Person.asmx/SavePersonById",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        type: "POST",
        data: '{ID:"00123"}',
        success: function (response) {
            //do whatever your thingy..
    }
}); 
```

网络服务的东西：

```
[WebMethod]
public string SavePersonById(string ID)
    {
    //do some code here..
    dbContext.Save(ID,"Firstname","Lastnmae");
    return "Successfully Saved!";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-09T12:08:08.547

你可以试试这个：

```
$(document).ready(function () {
    $('#button').click(function () {
        $.ajax({
            type: "POST",
            url: "appWebservices/select.asmx/checkLogin",
            data: "{ ID:'" + $(this).val()+ "'}",
            contentType: "application/json;charset=utf-8",
            datatype: "json"
         });
     });
}); 
```

编写Web服务如下：

```
[WebMethod]
public string checkLogin(string ID)
{
    //Write your code here..
    //return value
} 
```

[了解更多详情](http://techno-solution.in)

# drupal - 无法保存视图或创建新视图 - Drupal

> ID：10280373
> 
> 赞同：1
> 
> 时间：2012-04-23T12:17:21.280
> 
> 标签：drupal, drupal-6, drupal-views

我最近在 Drupal6 安装上安装了一个名为 Creative 的 Fusion 主题，并且在对主题进行更改后，我无法保存主题附带的任何视图。我也无法创建任何新视图。一旦我保存新视图，我就会收到“找不到页面”错误。我想问题在于保存视图。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:44:10.197

可能有点激烈，但这[是最近有人遇到类似问题并重新安装 Views 为他们解决了问题的实例](https://drupal.org/node/1476944#comment-5716468)。

# java - 带有父 pom 的 Egit + m2e：eclipse 工作区的问题

> ID：10280375
> 
> 赞同：1
> 
> 时间：2012-04-23T12:17:34.220
> 
> 标签：java, eclipse, egit, m2e

我的项目布局如下：

```
luna-pom
|
|------luna-core
|       |--pom.xml
|------luna-fx
|       |--pom.xml
|
|------pom.xml 
```

我的 Git 存储库在项目主文件夹中初始化。然后我将 git 存储库添加到 EGit 存储库视图，并选择“导入 Maven 项目”。尽管项目的布局对于 Eclipse 来说是不寻常的，但它仍然设法正确导入项目。但是，只有 parent-pom 项目连接到 git 存储库。这意味着我不能提交/推送子项目。虽然我知道这可能会导致 git 出现问题，但我仍然想看看到目前为止我更改了哪些文件。

这是我的工作区现在的样子：

![在此处输入图像描述](../Images/46d6aa693d06d2cb4868d69ec59f7dcb.png)

有没有办法做到这一点？这是一个错误，还是预期的行为？

提前致谢！

毛毛虫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:49:21.583

好吧，这只是一点点：一个错误，预期的行为，您可以解决这个问题。

1）这是一个错误：它现在的工作方式太烦人了，不能认为这是可以接受的。希望 Eclipse 4 将带来一组新功能（主要是处理同一文件可以在工作区中多次出现的事实的可能性），这将使 m2e 和 Egit 更好地工作

2) 意料之中：Egit 和 M2E 团队都知道这个问题，他们目前还不能真正解决这个问题。

3）解决方法：

*   如果您右键单击一个项目，您可以右键单击您的项目（这是您的 Maven 项目的模块）
*   选择共享项目...。
*   选择“Git”和“下一步”。
*   在向导的顶部，您将看到一个复选框“在项目的父文件夹中使用或创建存储库”：选中该框并按完成。

这不是最好的解决方案，但它有效，您将能够看到修改后的文件。但是，提交对话框不会选择包资源管理器的选定文件。几乎永远不应该使用同步，因为有一些严重的性能问题会导致您的工作区在此之后无法使用。在大型项目中，Egit 似乎也有一些严重的问题。

个人而言，我使用 EGit 来提交、获取/拉取和切换分支。我在命令行上完成其余的工作，因为我发现它更快，并且我更好地理解实际发生的事情。

# sql-server-2008 - 如何从参数中设置的表中选择列

> ID：10280376
> 
> 赞同：1
> 
> 时间：2012-04-23T12:17:34.533
> 
> 标签：sql-server-2008, tsql

我在我的一个项目中使用以下过程。

```
create procedure [dbo].[SMSStudentSelect2]
@Sorp char(20)
as
begin
   select @Sorp PhoneNo from Students 
   where DATALENGTH(@Sorp) = 11 and ClassId = 1 
   and GRNo not in(select GRNo from Discharge)
end 
```

我的问题是：当我`SPhoneNo`输入参数时`@Sorp`，我没有得到任何结果，而当我直接使用`SPhoneNo`即我使用查询时

```
select SPhoneNo from Students where DATALENGTH(SPhoneNo) = ......... 
```

在我的程序中，我得到了不想要的结果

谁能解决我的问题？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:28:11.280

**根据评论进行**编辑以确定 OP 想要什么：****

 **尝试这样的事情：

```
create procedure [dbo].[SMSStudentSelect2]
@Sorp char(1) --"S" returns the SPhoneNo, "P" returns the PPhoneNo
as
begin
   select
       CASE
           WHEN @Sorp='S' THEN SPhoneNo 
           ELSE PPhoneNo 
       END AS PhoneNo
       from Students 
       where DATALENGTH(@Sorp) = 11 and ClassId = 1 
           and GRNo not in(select GRNo from Discharge)
end 
```

传入“S”或“P”以获取您想要的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:22:28.490

你不是在这里缺少一个 = 符号：

```
select @Sorp = PhoneNo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:55:23.197

谢谢KM。正如 Mikael Eriksson 建议的那样，我也使用了数据长度的情况。我的问题解决如下

```
alter procedure [dbo].[SMSStudentSelect2]
@Sorp char(1) --"S" returns the SPhoneNo, "P" returns the PPhoneNo
as
begin
   select
       CASE
           WHEN @Sorp='S' THEN SPhoneNo 
           ELSE PPhoneNo 
       END AS PhoneNo
       from Students 
       where DATALENGTH(case when @Sorp = 'S' then SPhoneNo else PPhoneNo end)= 11 and ClassId = 1 
           and GRNo not in(select GRNo from Discharge)
end
GO 
```

很抱歉能够奖励您在接受答案时获得的唯一声誉

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T20:07:56.067

您可以编写此存储过程以使用动态 SQL。

创建过程 [dbo].[SMSStudentSelect2] @Sorp char(20) 作为开始

声明 @SQL AS nvarchar(max) =

'选择' + @Sorp + ' AS PhoneNo from Students where ' + LENGTH(@Sorp) + ' = 11 and ClassId = 1 and GRNo not in (select GRNo from Discharge)'

执行（@sql）

结尾

这不是最快的代码，但它会返回您期望的结果。**

# delphi - 工具提示从 ContextHelp 中窃取焦点

> ID：10280378
> 
> 赞同：0
> 
> 时间：2012-04-23T12:17:48.930
> 
> 标签：delphi, delphi-xe2

使用 Win7 和 Delphi XE2 我有一个展示以下内容的应用程序：

1.  主窗体打开一个模式窗体。
2.  Application.HelpContext 在 buttonClick 事件上从模式表单中调用。
3.  帮助表单出现并且不包括刚刚单击的按钮。
4.  鼠标光标停留在按钮上的时间足以让工具提示出现
5.  在按钮的工具提示出现时，帮助表单失去焦点并消失在应用程序后面。

这种行为让我的用户感到困惑。有任何想法吗？

# android - ViewHolder 的实现和使用

> ID：10280380
> 
> 赞同：1
> 
> 时间：2012-04-23T12:17:49.797
> 
> 标签：android, android-layout, layout, android-inflate

我已经实现了一个列表视图（其中每个项目都是一个按钮），现在我想通过使用 ViewHolder 来提高它的效率。这是我的问题，我不知道我必须在哪里覆盖这些按钮的 OnClick 方法。

这是我的 ArrayAdapter 的 getView：

```
public View getView(final int position, View convertView, ViewGroup parent) {  
    ViewHolder view;  
    if(convertView==null)  
    {  
        view = new ViewHolder();  
        LayoutInflater inflator = activity.getLayoutInflater();  
        convertView = inflator.inflate(R.layout.layout_opcion, null);  
        view.b_opcion = (Button) convertView.findViewById(R.id.boton_opcion);
        **view.b_opcion.setOnClickListener(new View.OnClickListener() {...});**
        convertView.setTag(view);  
    }  
    else  
    {  
        view = (ViewHolder) convertView.getTag();  
    }
    **view.b_opcion.setOnClickListener(new View.OnClickListener() {...});**
    view.b_opcion.setText(getItem(position));  
    return convertView;  
} 
```

}

此 OnClick 方法必须显示有关所选项目的一些信息，所以这是我的问题。我可以在里面覆盖这个方法吗

> if(convertView==null) {这里}

（为了只做一次）？或者与之相反，在这个 IF 内部必须只有引用膨胀布局的代码行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:43:56.687

你想在你的 if 声明之后。在 if 语句中，您只会获得对 View 的 UI 元素的引用。在 if 语句之后，您可以进行更改、设置侦听器等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:36:40.290

我会在视图持有者中放置一个参数，该参数定义了行的一些标识（例如 ID 或位置）

在您使用的 if 之外设置此信息（就在 view.b_opcion.setText(...

我将定义一个实现 OnClickListener 的侦听器类，并将相同的单个实例附加到第一个 if 语句中的所有视图。

在 onlick 侦听器中，您可以调用 getTag 进行查看，将对象转换为 viewholder，然后从 viewholder 获取您的 id/position。之后，您可以访问该对象并对您拥有的数据执行任何您想要的操作：视图、适配器项等。

# c# - 单击 GridView 内的 LinkBut ton 获取特定行的值

> ID：10280382
> 
> 赞同：0
> 
> 时间：2012-04-23T12:18:13.473
> 
> 标签：c#, asp.net

我有一个 Gridview 如下：

```
<asp:GridView ID="PartnerView" runat="server" AllowPaging="True" 
                       AllowSorting="True" AutoGenerateColumns="False" CssClass="GridViewStyle" 
                       GridLines="None" DataKeyNames="Partnerid" Width="900px"> 
  <Columns>
                            <asp:BoundField DataField="Partnername" HeaderText="Partner Name" />
                            <asp:BoundField DataField="partnertype" HeaderText="Type"/>
                            <asp:BoundField DataField="Contact" HeaderText="Contact" />
                            <asp:BoundField DataField="City" HeaderText="City"/> 
                            <asp:BoundField DataField="State" HeaderText="State"/>
                            <asp:BoundField DataField="Country" HeaderText="Country" />
                            <asp:BoundField DataField="email" HeaderText="Email ID" />
                            <asp:TemplateField HeaderText="Details">
                                      <ItemTemplate>
                                                <asp:LinkButton ID="Show_Button" Text="Show" runat="server" OnClick="Show_Button_click"></asp:LinkButton>                                          
                                      </ItemTemplate>    
                            </asp:TemplateField>
                        </Columns> 
            </asp:GridView> 
```

我在gridview中有LinkBUtton ....现在我想要当我单击gridview中的LinkBUtton时，我只想获取该特定行的数据......在下一页..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:24:29.387

您可以通过 LinkBut​​ton 的 NamingContainer 获得 GridViewRow：

```
protected void Show_Button_click(Object sender, EventArgs e)
{
    LinkButton Show_Button = (LinkButton)sender;
    GridViewRow row = (GridViewRow)Show_Button.NamingContainer;
    // now you can get all other fields via FindControl(in case it's a TemplateField)
    //  or via row.Cells[index].Text
    // Then Response.Redirect to the other page and pass appropriate URL-Parameters
} 
```

# c# - 将值传递给函数

> ID：10280386
> 
> 赞同：0
> 
> 时间：2012-04-23T12:18:26.450
> 
> 标签：c#, linq

我想将 filterType 传递给 GetPeronMemberDTO，如何实现这一点。

```
filters = filterItems.
    AsQueryable().
    Select(z => new Person()
    {
        Name = z.Name,
        ID = Convert.ToString(z.ID),
        FilterType = GetFilterType(Convert.ToString(z.TemplateID)),
        // TODO : How to pass the filtertype in the below function
        FilterMembers = GetPeronMemberDTO(
            Convert.ToString(z.ID), 
            searchParamDTO, 
            Convert.ToString(z.TemplateID)),
    }) 
```

谢谢 DS

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T12:21:33.060

使用查询语法，您可以使用`let`表达式：

```
filters = from z in filterItems.AsQueryable()
          let filterType = GetFilterType(Convert.ToString(z.TemplateID))
          select new Person
          {
            Name = z.Name,
            ID = Convert.ToString(z.ID),
            FilterType = filterType,
            FilterMembers = GetPeronMemberDTO(Convert.ToString(z.ID), 
              searchParamDTO, Convert.ToString(z.TemplateID), filterType)
          } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:21:47.953

```
filters = filterItems
          .AsQueryable()
          .Select(z => new {
                Item = z,
                FilterType = GetFilterType(Convert.ToString(z.TemplateID))
          })
          .Select(z => new Person()
            {
                Name = z.Item.Name,
                ID = Convert.ToString(z.Item.ID),
                FilterType = z.FilterType,
                FilterMembers = GetPeronMemberDTO(Convert.ToString(z.Item.ID), searchParamDTO, z.FilterType),
            }) 
```

或使用基于查询的语法，如 Anders Abels 的回答。

# java - 点对点 Java 应用程序

> ID：10280387
> 
> 赞同：-2
> 
> 时间：2012-04-23T12:18:27.167
> 
> 标签：java, p2p, jxta

我想创建一个不使用`JXTA`框架的对等应用程序。只是寻找一些示例或好的教程来了解基础知识，然后可以从那里开始。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:31:25.870

我认为您可以创建一个基于套接字的应用程序。

# android - 使用 CursorAdapter 从 ListView 中的复选框更新数据库

> ID：10280389
> 
> 赞同：2
> 
> 时间：2012-04-23T12:18:36.513
> 
> 标签：android, database, listview, checkbox, android-cursoradapter

我有一个自定义 CursorAdapter，它从我的数据库中填充任务的 ListView。每个 ListView 项都有一个复选框和一个按钮。按下复选框时，数据库会更新以将任务设置为已完成。问题是当退出 ListActivity 并返回到 Task 列表时，什么都没有更新，并且复选框不会保留它们的状态。

我已经包含了我认为问题所在的 CursorAdapter。这可能与视图的回收有关吗？任何帮助将非常感激。

```
public class ScheduleListAdapter extends CursorAdapter implements 
OnClickListener, OnCheckedChangeListener
{
private final static String TAG         = "FS: ScheduleList";

private LayoutInflater      inflater    = null;
private ListView            listView    = null;

private DataManager         db          = null;
private ContentValues       values      = null;

private boolean             isCompleted = false;

public ScheduleListAdapter(Context context, Cursor c, ListView listView, DataManager db)
{
    super(context, c);

    this.listView = listView;
    this.db = db;

    // Cache the inflater, avoids asking for a new one each time
    inflater = LayoutInflater.from(context);
}

/** Determines which button is clicked **/
@Override
public void onClick(View v)
{
    final int position = listView.getPositionForView(v);

    if (position != ListView.INVALID_POSITION)
    {
        Logger.e(TAG, "Button clicked at position: " + position);
    }
}

/** Determines which star is checked **/
@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
{
    final int newValue;
    final int position = listView.getPositionForView(buttonView);

    if (position != ListView.INVALID_POSITION)
    {
        buttonView.setChecked(isChecked);

        if (isChecked)
        {
            newValue = 1;
        }
        else
        {
            newValue = 0;
        }

        values = new ContentValues();
        values.put(ScheduleTable.KEY_COMPLETED, newValue);
        db.update(ScheduleTable.TABLE_NAME, values, position);

        // refresh(db.rawQueryGetAll(ScheduleTable.TABLE_NAME));
    }
}

/** Makes a new view to hold the data pointed to by cursor. **/
@Override
public View newView(Context context, Cursor cursor, ViewGroup parent)
{
    // Create and inflate the listView item view here
    View view = inflater.inflate(R.layout.schedule_list_item, parent, false);

    ViewHolder holder = new ViewHolder();

    holder.cbxCheck = (CheckBox) view.findViewById(R.id.cbx_completed);
    holder.txvText1 = (TextView) view.findViewById(R.id.txv_taskListTitle);
    holder.txvText2 = (TextView) view.findViewById(R.id.txv_taskListSubTitle1);
    holder.txvText3 = (TextView) view.findViewById(R.id.txv_taskListSubTitle2);
    holder.btnButton = (Button) view.findViewById(R.id.btn_Edit);
    holder.btnButton.setOnClickListener(this);
    holder.cbxCheck.setOnCheckedChangeListener(this);

    view.setTag(holder);

    return view;
}

/** Bind an existing view to the data pointed to by cursor **/
@Override
public void bindView(View view, Context context, Cursor cursor)
{
    // Populate list from the cursor here
    ViewHolder holder = (ViewHolder) view.getTag();

    // Bind the data efficiently with the holder
    holder.txvText1.setText(cursor.getString(cursor.getColumnIndex(ScheduleTable.KEY_TITLE)));
    holder.txvText2.setText(cursor.getString(cursor.getColumnIndex(ScheduleTable.KEY_DESC)));
    holder.txvText3.setText(cursor.getString(cursor.getColumnIndex(ScheduleTable.KEY_DATE)));
    isCompleted = Utils.intToBool(cursor.getInt(cursor.getColumnIndex(ScheduleTable.KEY_COMPLETED)));

    holder.cbxCheck.setOnCheckedChangeListener(null);
    holder.cbxCheck.setChecked(isCompleted);
    holder.cbxCheck.setOnCheckedChangeListener(this);

    Logger.e(TAG, cursor.getString(cursor.getColumnIndex(ScheduleTable.KEY_TITLE)) + " at position is completed: " + isCompleted);
}

/** Updates the listView when data changes **/
public void refresh(Cursor newCursor)
{
    changeCursor(newCursor);
    notifyDataSetChanged();
}

private static class ViewHolder
{
    TextView    txvText1;
    TextView    txvText2;
    TextView    txvText3;
    CheckBox    cbxCheck;
    Button      btnButton;
}

} 
```

# c# - 如何强制浏览器在现有选项卡而不是新选项卡中打开我的网址？

> ID：10280395
> 
> 赞同：2
> 
> 时间：2012-04-23T12:19:02.770
> 
> 标签：c#, winforms, browser, tabs

在 WinForms 应用程序中，我有一个表单，其中有几个链接标签。当用户单击任何链接时，我想在我自己的应用程序已打开的现有浏览器选项卡中打开一个页面。（当然除了第一次应该打开一个新标签）我的问题： Process.Start("My Url"); 一直打开一个新标签。有什么方法可以告诉浏览器停止打开新标签？

之前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T12:24:10.507

该行为是在每个浏览器的基础上定义的，并且是您不应该尝试干预的用户设置。如果您确实需要这种级别的控制，您是否考虑过在您的应用程序中托管浏览器控件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:24:44.100

如果您使用的是互联网浏览器，您可以使用`ShellWindows` 示例和描述：[从 C# 在现有 IE 窗口的选项卡中启动 URL](https://stackoverflow.com/questions/3713206/launch-a-url-in-a-tab-in-an-existing-ie-window-from-c-sharp)

# cmake - 制作 .deb 包时如何找出最低要求？

> ID：10280396
> 
> 赞同：3
> 
> 时间：2012-04-23T12:19:12.807
> 
> 标签：cmake, debian, cpack

我目前正在尝试将使用 CMake 的软件打包到 .deb 包中。我已经设法修改 CMakeLists.txt 以使用 CPack 并创建一个 .deb 文件。但是，即使通过广泛的谷歌搜索，我也无法找到的一件事是我如何找出 CPACK_DEBIAN_PACKAGE_DEPENDS 变量应该包含的依赖项？

我可以找出软件在我的计算机上的依赖关系，但我如何找出最小依赖关系是什么？必须有一些自动的方法来做到这一点......？

我可以从 CMake 文件中看到一些依赖项，但那些是用于构建项目的，我想知道二进制文件具有哪些依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:28:16.543

您可以使用

```
# autogenerate dependency information
set (CPACK_DEBIAN_PACKAGE_SHLIBDEPS ON) 
```

另请参阅 [使用 CMake 构建 .debs 时自动检测依赖关系](http://www.guyrutenberg.com/2012/07/19/auto-detect-dependencies-when-building-debs-using-cmake/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:46:35.590

使用 CMake 我不知道自动“检测”此类依赖项的方法。

**我认为打包**人员的工作也是知道什么是依赖项。

我建议您尝试使用**全新安装系统的****虚拟机**。

# android - 在 Android 中为 webview 设置背景图像

> ID：10280406
> 
> 赞同：4
> 
> 时间：2012-04-23T12:19:42.037
> 
> 标签：android, background, webview

我想在 android 中为 webview 设置背景图像。我做了以下事情：

```
webView.setBackgroundColor(0);
webView.setBackgroundResource(R.drawable.backgroundImage); 
```

我希望图像位于 webview 的中间。请问有什么帮助吗？

**编辑** 我找到了解决方案：

```
linearLayout.setGravity(Gravity.CENTER);
imageView.setBackgroundResource(R.drawable.backgroundImage);
linearLayout.addView(imageView);
frameLayout.addView(linearLayout);
frameLayout.addView(webView); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:30:05.693

下面这通常对我有用 -

```
WebView myWebView = (WebView) findViewById(R.id.myWebView);
myWebView.setBackgroundColor(Color.parseColor("#000000")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:49:39.680

你也可以这样做，首先创建一个html页面

```
<html>
<head>
</head>
<body>
<center>
<img src="2.png"width="320" height="480" /> 
</center>
</body>
</html> 
```

然后加载url页面

```
public class Activity1
extends Activity {
WebView Webview1;

@Override    
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    setContentView(R.layout.filegolfrule);
Webview1 = (WebView) findViewById(R.id.webview1);

   webview.getSettings().setJavaScriptEnabled(true); 
    Webview1.loadUrl("file:///android_asset/a.html");

}

} 
```

# asp.net - 正则表达式查找未关闭的 HTML 标记并关闭它们

> ID：10280425
> 
> 赞同：1
> 
> 时间：2012-04-23T12:20:53.023
> 
> 标签：asp.net, regex

我需要一个正则表达式，它给了我未关闭的标签，我可以找到它们并以编程方式关闭它们。

就像，我有以下文字

```
<tag>
<p> hello world <p> this is <p>test.</p> this is test. <p> end it 
</tag> 
```

我想从中找到未关闭的标签并使用正则表达式关闭它们。

任何的想法？？谢谢梅加娜

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T12:22:49.903

正则表达式不是此任务的合适工具。有关原因的令人信服的演示，请参见[此处。](https://stackoverflow.com/a/1732454/1583)

我建议你使用[HTML Agility Pack](http://html-agility-pack.net/?z=codeplex)来解析和重写 HTML。

# facebook - Facebook API 返回空数据

> ID：10280437
> 
> 赞同：0
> 
> 时间：2012-04-23T12:21:37.463
> 
> 标签：facebook, facebook-php-sdk

我有以下代码（我已经连接到 FB API 并且我有 FB 会话）：

```
$user = $facebookObj->api('/' . $data['uid']);
$this->template->users[] = $user['first_name']; 
```

我试图获取用户**first_name**，但有时 Facebook API 返回 null 值。除了以下代码之外，是否有任何解决此问题的方法：

```
$this->template->users[] = (isset($user['first_name']) ? $user['first_name'] : '-'; 
```

感谢您的回复。

# php - 在我的 PHP 电子邮件表单中创建换行符

> ID：10280438
> 
> 赞同：0
> 
> 时间：2012-04-23T12:21:44.203
> 
> 标签：php, forms, email

\我希望有人能帮帮忙。我对 php 有点笨，但我设法使用从 html 表单调用的 mail.php 页面为我的床和早餐创建了一个预订表单。

身体是这样的：

```
$subject = "Booking Request"; 
$fields = array(); 

$fields{"title"} = "Title";
$fields{"name"} = "Name";
$fields{"email"} = "email";
$fields{"telephone"} = "telephone";
$fields{"mobile"} = "mobile";
$fields{"arrival_day"} = "arrival day";
$fields{"departure_day"} = "departure day";
$fields{"adults"} = "#  of adults";
$fields{"children"} = "# of children";
$fields{"questions"} = "any questions?"; 
```

它有效，但一切都像这样在一条线上出现

> 职位：女士 姓名：Joe Blogs 电子邮件：joe@blogs.com.au 电话：02 12345697 手机：01234958 到达日：10/06/12 出发日：20/06/12 成人人数：8 孩子人数：4 任何问题?

但我希望它看起来像这样：

> 职务：女士
> 姓名：Joe Blogs
> 电子邮件：joe@blogs.com.au
> 等。

我已经尝试过`\n`，`\r`并且`<br/>`在各种地方都尝试过，但我只是在黑暗中刺伤......我可以修复什么还是我需要使用完全不同的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:33:41.340

您应该`\n`用作结束线。

请更改`{}`为`[]`：

```
$fields["title"] = "Title";
$fields["name"] = "Name";
$fields["email"] = "email";
$fields["telephone"] = "telephone";
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T19:16:42.307

利用`nl2br();`

```
$message = nl2br($name . " " . " wrote this:" . "\n" . $_POST['message'] . $_POST['phone'] . $_POST['email']  . "\n" . $_POST['radio']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:37:19.340

我曾经使用“\n”：

```
$text = 'line1\n line 2\n line 3'; 
```

结果是：

```
line1\n
line2\n
line3 
```

我不满意所以我找到了 PHP_EOL

```
$text = 'line 1' . PHP_EOL . 'line 2' . PHP_EOL . 'line 3'; 
```

结果将是：

```
line 1
line 2
line 3 
```

`"<br>"`是一个可行的解决方案，但您发送的是“HTML”格式的电子邮件。

# java - 测试在 Jenkins 中失败，但在外面工作

> ID：10280442
> 
> 赞同：2
> 
> 时间：2012-04-23T12:22:00.970
> 
> 标签：java, maven, jenkins, openejb

我有一个使用 OpenEJB 测试无状态会话 Bean 的测试。我正在使用 Maven 进行构建管理。测试似乎在 Jenkins 上运行良好（在命令行上），但在我在 Jenkins 上添加作业后失败。

更具体地说，我的测试无法在 JNDI 中查找 EJB 并得到以下异常。

```
javax.naming.NameNotFoundException: Name "global/slides/SlideService" not found.
    at org.apache.openejb.core.ivm.naming.IvmContext.federate(IvmContext.java:198)
    at org.apache.openejb.core.ivm.naming.IvmContext.lookup(IvmContext.java:152)
    at org.apache.xbean.naming.context.ContextFlyweight.lookup(ContextFlyweight.java:55)
    at com.diycomputerscience.slides.service.SlideServiceTest.setUp(SlideServiceTest.java:45)
    at junit.framework.TestCase.runBare(TestCase.java:132)
    at junit.framework.TestResult$1.protect(TestResult.java:110)
    at junit.framework.TestResult.runProtected(TestResult.java:128)
    at junit.framework.TestResult.run(TestResult.java:113)
    at junit.framework.TestCase.run(TestCase.java:124)
    at junit.framework.TestSuite.runTest(TestSuite.java:243)
    at junit.framework.TestSuite.run(TestSuite.java:238)
    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:236)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:134)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:113)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74) 
```

我想知道在 Jenkins 中运行测试是否会影响 JNDI？我知道 Jenkins 使用 Maven 嵌入器，但 Surefire 插件默认分叉测试，它可能不会在与 Jenkins 相同的 vm 实例中运行。

我在前台运行 jenkins (java -jar jenkins.war) 并且还使用与我登录相同的用户运行，因此没有权限问题。此外，我不需要运行 Window Manager，因为我的测试不需要与 Selenium 不同的 UI 交互。

我在两种环境中使用的 Java 和 Maven 版本也完全相同。

任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T22:44:36.283

我最近发生了这种情况，并认为我会分享我发现的内容。当我的单元测试在 Jenkins 中运行时，OpenEJB “找出”的 jndi 路径与我从 IDE 直接在我的 maven 项目中构建它时不同，因此它将 Jenkins 创建的“工作区”目录添加到 jndi 路径，这导致查找失败。所以

```
java:global/ProjectName/ProjectService 
```

将是我的 IDE 中的名称，而

```
java:global/workspace/ProjectService 
```

将针对 Jenkins 中的绑定名称进行计算。我能够通过 OpenEJB 日志来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T02:16:46.840

你试过用这个吗？

```
"java:comp/env/MY_JNDI_RESOURCE" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T17:17:44.627

如果 Jenkins 实际上使用不同的 Java JRE 来运行您的应用程序，这很容易发生 - 尝试使用指向 Java 的显式路径运行它。确保首先在 Jenkins 之外测试该命令。

我刚刚遇到了完全相同的问题，结果发现没有为 Jenkins 使用的特定 JRE 创建 Windows 防火墙条目——即使我在防火墙中添加了全局端口例外。

我只是用 Java 的完整路径运行我的 Java 应用程序，在通知出现时将防火墙规则添加到我的 Windows 防火墙，然后在 Jenkins 中重新运行，一切正常。

# xcode - 加载 Jpg xcode 应用程序

> ID：10280444
> 
> 赞同：1
> 
> 时间：2012-04-23T12:22:05.590
> 
> 标签：xcode, opengl, jpeg, libjpeg

我正在尝试将纹理加载到artoolkit 中的opengl 多边形。我的 Artoolkit 项目已经有了 SDL、libjpeg 和 libpng dylib，但是当我这样做时：

```
 #include <libjpeg.h> 
```

Xcode 说没有文件或目录，并且：

```
 read_JPEG_file("texture/image1.jpg", uiv1Texture); 
```

它说函数 read_JPEG_file 的隐式声明。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:41:43.537

您很可能遇到工作目录问题。Mac 应用程序通常将其图像文件存储在应用程序包的 Resources 文件夹中，但 Mac 版本的 SDL 将工作目录设置为不同的位置。当您尝试加载图像文件时，操作系统找不到它。

解决方案是将工作目录更改为应用程序包的 Resources 文件夹。您可以通过阅读以下文章的“更改工作目录”部分找到有关如何执行此操作的说明：

[适用于 Mac OS X 的 SDL 提示](http://meandmark.com/blog/2009/12/sdl-tips-for-mac-os-x/)

对于您的包含问题，请尝试使用引号而不是尖括号包含头文件。尖括号用于系统头文件，而 libjpeg.h 不是系统头文件。

# html - 无法单击 HTML/CSS LESS 中的字段

> ID：10280446
> 
> 赞同：0
> 
> 时间：2012-04-23T12:22:11.707
> 
> 标签：html, css, less

我创建了一个网站，但遇到了问题，我无法单击登录字段集中页面上的某些字段（或按钮）。我只需单击注册字段集中的字段（或按钮）即可。

我对 CSS 使用 LESS，但如果你不懂这种语言，你也能理解。

我的错误在哪里？

HTML 代码：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />

        <script type="text/javascript" src="http://localhost/Website/scripts/jQuery.js"></script>

        <link rel="stylesheet/css" type="text/css" href="http://localhost/Website/styles/reset.css">
        <link rel="stylesheet/less" type="text/css" href="http://localhost/Website/styles/style.less">
        <script src="http://localhost/Website/scripts/less.js" type="text/javascript"></script>

        <title>Ushahidi self-help</title>
    </head>

    <body>
        <div id="masterContent">
            <div id="connectPanel">
        <form id="loginForm" method="post" action="">
        <fieldset>
            <legend>Login</legend>

            <table>
            <tr>
                <td><label for="email_login">Email</label></td>
            </tr>
            <tr>
                <td><input type="email" name="email_login" id="email_login" maxlength="45" /></td>
            </tr>
            <tr>

                <td><label for="password_login">Password</label></td>
            </tr>
            <tr>
                <td><input type="password" name="password_login" id="password_login" maxlength="45" /></td>
            </tr>
            <tr>
                <td><input type="submit" value="Login" /></td>
            </tr>

            <tr>
                <td><a href="http://localhost/Website/page/register">Sign up</a></td>
            </tr>
            </table>
        </fieldset>
    </form>
</div><div id="content"><form id="formRegistration" method="post" action="">
        <fieldset>
            <legend>Register</legend>

        <table>
        <tr>
            <td><label for="lastName_register">Last Name :</label></td>
            <td><input type="text" name="lastName_register" id="lastName_register" maxlength="45" /></td>
            <td id="errorLastName_register" style="display:none;">Error</td>
        </tr>
        <tr>
            <td><label for="firstName_register">First Name :</label></td>

            <td><input type="text" name="firstName_register" id="firstName_register" maxlength="45" /></td>
            <td id="errorFirstName_register" style="display:none;">Error</td>
        </tr>
        <tr>
            <td><label for="email_register">Email :</label></td>
            <td><input type="email" name="email_register" id="email_register" maxlength="45" /></td>
            <td id="errorEmail_register" style="display:none;">Error</td>

        </tr>
        <tr>
            <td><label for="password_register">Password :</label></td>
            <td><input type="password" name="password_register" id="password_register" maxlength="45" /></td>
            <td id="errorPassword_register" style="display:none;">Error</td>
        </tr>
        <tr>
            <td><label for="confirmPassword_register">Confirm Password :</label></td>

            <td><input type="password" name="confirmPassword_register" id="confirmPassword_register" maxlength="45" /></td>
            <td id="errorConfirmPassword_register" style="display:none;">Error</td>
        </tr>
        <tr>
            <td><input type="submit" value="Register" /></td>
        </tr>
        </table>
    </fieldset>

</form>
<script type="text/javascript" src="http://localhost/Website/connection/register_script.js"></script> </div>        </div>
    </body>
</html> 
```

少代码：

```
body
{

    #masterContent
    {
        width: 80%;
        margin: auto;

        #connectPanel
        {
            width: 20%;
            float: left;
            margin-right: 2%;
        }

        #content
        {
            width: 100%;
            position: relative;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:31:02.507

您的元素#content 与#connectPanel 重叠，因此您只需将其向左边缘多一点

```
#content
{
    width: 100%;
    position: relative;
    margin-left: 20%;
} 
```

[在这里](http://jsfiddle.net/drinchev/hmQUG/)看到jsfiddle

# android - 在 ViewPager 中预加载下一个（或上一个）页面

> ID：10280448
> 
> 赞同：9
> 
> 时间：2012-04-23T12:22:19.393
> 
> 标签：android

我设法通过设置负页边距来显示下一页和上一页的边缘。但是，问题是，如果我将第 1 页向左滚动，现在第 2 页位于中间，如下所示：

```
0 - [ 1 ] - 2   --->  1 - [ 2 ] - 3 
```

，然后页面'3'仅在2到达中心并且滑动结束后加载。这会导致页面“3”的“出现”不和谐（而不是平滑地滑入）。

如何加载页面“3”以使动画流畅？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-23T13:58:34.813

你试穿`setOffscreenPageLimit()`了`ViewPager`吗？

# .net - 异步和网络请求处理

> ID：10280454
> 
> 赞同：2
> 
> 时间：2012-04-23T12:22:41.673
> 
> 标签：.net, iis, asynchronous, .net-4.5, async-await

我一直在阅读有关 C# 的新 async 关键字以及 .NET 4.5 中对它的支持的更多信息，我正在寻求一些帮助来以“正确的方式”思考它。

我的第一个想法是，我可以通过异步执行不需要等待的事情（例如发送电子邮件、记录内容等）来提高网站的响应能力。这是我只想一劳永逸的事情，而不是让我的客户等待。

[但后来我在这里](http://blogs.msdn.com/b/adonet/archive/2012/04/20/using-sqldatareader-s-new-async-methods-in-net-4-5-beta.aspx)读到了新的异步 SQL 版本，我感到很困惑。从数据库读取是我必须等待的——我需要数据——在完成之前我无法继续。这是否意味着我不能使用它？

或者，这是否意味着我通过不阻止 SQL 调用使我的请求处理对 IIS 更加友好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:37:23.693

这些事情的答案总是“视情况而定”。

在您的特定情况下，您正在为来自 IIS 的请求提供服务，您绝对希望尽可能利用这一点，但您必须以有利于 IIS 的方式进行操作。

例如，当客户端向 ASP.NET 页面发出请求时（我假设是这种情况，询问有关 IIS 和 .NET 的问题，这确实是唯一的选择），服务器已启动一个线程来处理您的请求. 当然，如果有很多请求，那么它会占用很多线程，可能超出服务器的处理能力，这意味着一些请求必须等待而其他请求正在处理。

*如果在您的线程中（阻塞服务器上的其他线程）您必须在其他地方*等待其他工作，那么在等待响应（来自 Web 服务、数据库）时阻塞其他线程没有多大意义， ETC）。最好将线程返回给服务器，然后在您准备好再次工作并提供响应时告诉服务器。

为此，ASP.NET 具有让服务器知道它可以在您等待响应时执行其他操作的机制。

ASP.NET WebForms 有[异步页面](http://msdn.microsoft.com/en-us/magazine/cc163725.aspx)（我个人觉得有点复杂），而 ASP.NET MVC[在版本 4 中有异步方法](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)（更适合[基于任务的异步模式](http://msdn.microsoft.com/en-us/library/hh873175.aspx)）。

也就是说，应该注意的是，如果您在等待响应时必须独立完成*其他*工作，那么没有理由将线程返回给服务器，只需完成您的工作，当您到达你不能再往前走了，让出控制权回来。

不管你做什么，不要等待任务的结果；您正在阻止服务器将该线程用于其他用途，而您除了等待之外什么都不做。这可能是可扩展性的最大障碍，而了解您不需要占用服务器资源的地方是编写高度可扩展系统的关键之一。

# android - 如何使用加速度计检测移动或静止的船只？

> ID：10280460
> 
> 赞同：-3
> 
> 时间：2012-04-23T12:22:55.430
> 
> 标签：android, iphone, accelerometer

任何人都有在船舶/船舶上使用加速度计来检测船舶是移动还是静止的经验？

困难的部分是我在 6Hz 下采集了一些样本，发现所有 X/Y/Z 轴都显示正负加速度。当船只移动和静止时，模式完全相同。我想这些都是海浪造成的。

有任何想法吗？

* * *

谢谢大家的建议。

我必须使用加速度计来检测船只上的运动的原因是我的设备（一个定制的嵌入式系统）大部分时间都进入睡眠/休眠状态以节省电力，它只在检测到运动后才醒来执行一些任务. GPS耗电太大，无法一直开机。

实际上我不需要测量速度或位置，我所需要的只是区分海上的移动和静止。加速度计在陆地上工作正常，但可能由于随机的海浪而不是海上。

我也考虑过使用陀螺仪，但是它太贵了。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:30:46.677

您可以使用 GPS 接收器来检查船只是在移动还是静止。使用 GPS API，您可以获得船只在地球上的**位置、移动****方向**和船只的**速度**。

一个很好的 GPS 跟踪教程在这里：[http ://www.vogella.com/articles/AndroidLocationAPI/article.html](http://www.vogella.com/articles/AndroidLocationAPI/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:25:38.413

仅从加速度计数据**无法**判断船舶是以恒定速度移动还是停泊在锚地：两种情况下的加速度都为零。

如果您需要更高的精度，请仅使用 GPS 或尝试传感器融合（GPS + 加速度计）。无论哪种方式，您都需要 GPS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:14:27.997

我编写了一个应用程序来使用 GPS 记录飞行时间。根据 GPS 报告的速度加上一些启发式方法检测事件。例如，当速度超过阈值（其可配置，3kts 工作正常）时检测到阻塞（飞机停止停车并开始滑行）事件。类似地，通过速度下降到阈值以下一段时间来检测阻塞（飞机在着陆和滑行到停车位置后停车）。在这里您也可以使用位置，但速度效果更好（噪音更小）。对于风修正/漂移（在滑行时无关，但对检测着陆和触碰起飞很有用），用户可以输入风向和风速的估计值。该值用于修正 GPS 报告的速度。不使用加速度传感器，这一切都可以正常工作。我建议尝试使用 GPS。唯一的风险似乎是，在船/船上时所涉及的较低速度可能会导致更差的速度噪声比，当然漂移是这里的一个方面。（但在我看来，由于膨胀，使用加速度传感器时也存在问题。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T12:58:24.657

Vishnu Haridas 是对的，gps 是更好的方法......

如果您需要在没有 GPS（如 iPod touch）的设备上使用您的应用程序，则加速度计不是在船上使用的正确硬件：顾名思义，它记录的是速度的变化，而不是速度。考虑一艘以 10 英里/小时的速度不断前进的船，它的速度变化等于 0，所以加速度计只能给你 0（但是发动机振动的波......）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-08-08T17:16:57.717

您的意思可能是加速度计作为测量与坐标加速度不同的适当加速度的工具。由于水流、波浪能、水的密度、速度和其他因素，Aka 螺旋桨加速 x 不会导致 x 速度加速。

您将需要一个设备，该设备还可以计算波功率并将它们相互放置以防止出现错误（在静态时显示加速度）。通常加速度计带有波补偿计算器。你用什么型号？

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-07-15T14:47:37.227

实际上 GPS 并没有消耗那么多电量。功耗来自使用 GPS 的应用程序。您可以编写一个使用 GPS 并具有良好性能的轻量级应用程序。我知道我迟到了一天，还少了一美元，但只是把它放在这里以备后人之用。

# java - 解决 Java 中的 Codechef 问题

> ID：10280461
> 
> 赞同：2
> 
> 时间：2012-04-23T12:22:59.390
> 
> 标签：java

我是一名 Java 程序员。我发现很多时候即使我的算法是正确的，我使用 codechef 提交的文件也会出现 Time Limit Exceeded。在编程竞赛中提交 Java 解决方案时，是否应该采用一些技术？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T17:31:00.587

在 CodeChef 上，所有 Java 提交的时间限制是其母语（例如，c/c++/pascal）对应的时间限制的 2 倍。但是，没有提到的一件事是，当内存消耗变高时，Judge 的行为开始变得非常缓慢，这在 Java 解决方案中经常发生。CodeChef 评委运行所有 Java 程序的内存设置为 64 MB。您应该尝试使用尽可能少的内存，并尝试使用 -Xms = 64 MB 在本地运行相同的解决方案。

增加的时间限制也可能是由于当程序的内存使用量接近允许的最大值（在本例中为 64 MB）时，JVM 调用垃圾收集器，该垃圾收集器非常密集地使用 CPU 并因此延迟程序执行。

# c# - 嵌套多重绑定

> ID：10280463
> 
> 赞同：22
> 
> 时间：2012-04-23T12:23:02.997
> 
> 标签：c#, wpf, multibinding

我已经玩 WPF 很长一段时间了，但是今天第一次，我需要`MultiBinding`在另一个里面嵌套一个，比如：

```
<MultiBinding>
   <Binding />       
   <MultiBinding>
      <Binding />
      <Binding />
   </MultiBinding>
</MultiBinding> 
```

我收到一个异常，表明框架不允许这样做：

> XamlParseException 未处理：向“System.Collections.ObjectModel.Collection(System.Windows.Data.BindingBase)”类型的集合添加值引发异常。

`InnerException`更明确：

> BindingCollection 不支持 MultiBinding 类型的项目。只允许绑定。

所以在网上挖掘更多信息，我偶然发现了[这个 Microsoft Connect 问题](http://connect.microsoft.com/VisualStudio/feedback/details/653138/nested-multibindings)，这正是我的问题。

> 感谢您的反馈。WPF 今天不支持这个。此功能已被请求多年（最近一次是本月早些时候 - 请参阅[https://connect.microsoft.com/WPF/feedback/details/650164/nested-multibinding](https://connect.microsoft.com/WPF/feedback/details/650164/nested-multibinding)）。我们将在未来的版本中继续考虑这一点。

现在我已经平静下来，我不会很容易。我仍然需要这个，**我怎样才能嵌套 MultiBindings**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:04:53.803

如果你有一个带参数的转换器，你可以这样做：

*   创建一个用于将“固定”数据传递给转换器的类
*   添加`DependencyProperties`到类（以便您可以绑定 Xaml 中的值）
*   在您的 xaml 中，使用带有转换器的绑定而不是多重绑定，如下所示：

    ```
    <MultiBinding>
        <Binding Source="SomeObject" Path="CoreValue" Converter="{StaticResource YourNewConverter}">
            <Binding.ConverterParameter>
                <ns:ParameterClass Value1="{Binding Parameter1}" Value2="{Binding Parameter1}" />
            </Binding.ConverterParameter>
        </Binding>
     .... 
    ```

限制是（AFAIK）该值仅在更改时才会重新计算`CoreValue`- 如果转换器参数更改，它不会自动重新绑定。

（对于任何错误，我深表歉意，我在没有 VS 测试的情况下输入这个......）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-11T10:52:08.873

我意识到这是一个老问题，但我刚刚遇到了与 OP 完全相同的问题。幸运的是，在我的情况下，我可以绑定到已经计算多重绑定结果的子元素，但这让我开始思考......

一个（虽然公认不是很干净）解决方案是将多值绑定的值写入“备用”属性，例如元素的“标签”，然后您可以通过指定“在其他多值绑定中引用它”元素名称”属性。

如果您需要多个嵌套的多值绑定，那么您可以创建一个带有一些依赖属性的“假”对象来存储多个中间结果。

可惜微软没有实现一个正确嵌套的系统......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-23T20:06:42.040

我知道这是一个老问题，但我认为这是一个更好的方法：

```
<FrameworkElement x:Name="IsBuyAndAmountInReference">
    <FrameworkElement.Tag>
        <MultiBinding Converter="{StaticResource LogicAndToBool}">
            <Binding Path="OrderData.IsBuy" />
            <Binding Path="OrderData.AmountInReference" />
        </MultiBinding>
    </FrameworkElement.Tag>
</FrameworkElement>
<FrameworkElement x:Name="IsSellAndAmountInBase">
    <FrameworkElement.Tag>
        <MultiBinding Converter="{StaticResource LogicAndToBool}">
            <Binding Path="OrderData.IsBuy" Converter="{StaticResource BooleanToBooleanInvert}" />
            <Binding Path="OrderData.AmountInReference" Converter="{StaticResource BooleanToBooleanInvert}" />
        </MultiBinding>
    </FrameworkElement.Tag>
</FrameworkElement>

<Slider Grid.Row="2" Grid.ColumnSpan="4">
    <Slider.Visibility>
        <MultiBinding Converter="{StaticResource LogicOrToVisibility}">
            <Binding ElementName="IsBuyAndAmountInReference" Path="Tag" />
            <Binding ElementName="IsSellAndAmountInBase" Path="Tag" />
        </MultiBinding>
    </Slider.Visibility>
</Slider> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-10T14:36:29.073

其他建议的替代方法是使用附加属性将嵌套`MultiBinding`的 s 保存为中间值。

例如，而不是：

```
<Element>
  <Element.Property>
    <MultiBinding>
      <Binding Path="A" />       
      <MultiBinding>
        <Binding Path="B" />
        <Binding Path="C" />
      </MultiBinding>
    </MultiBinding>
  </Element.Property>
</Element> 
```

...做这个：

```
<Element Name="ElementName">
  <ElementProperties.AttachedProperty>
    <MultiBinding>
      <Binding Path="B" />
      <Binding Path="C" />
    </MultiBinding>
  </ElementProperties.AttachedProperty>
  <Element.Property>
    <MultiBinding>
      <Binding Path="A" />       
      <Binding ElementName="ElementName" Path="(ElementProperties.AttachedProperty)" />
    </MultiBinding>
  </Element.Property>
</Element> 
```

我知道这个问题现在已经有六年多了，但我遇到了它，所以其他人也会这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T12:42:39.140

如果您要绑定到一个字符串，您可以使用 StringFormat 就像在这个例子中一样：

```
 <TextBlock>
   <TextBlock.Text>
     <MultiBinding StringFormat="{}{0:0.###}/{1:0.###}" Mode="OneWay">
                        <Binding ElementName="This" Path="AggregatedDocDetail.ConfirmedQty"></Binding>
                        <Binding ElementName="This" Path="AggregatedDocDetail.Qty">   </Binding>
       </MultiBinding>
     </TextBlock.Text>
   </TextBlock> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T12:29:46.063

只需使用一个多重绑定和一个 MultiConverter。

或者我更喜欢在您的视图模型/数据上下文的一个属性中公开您的状况。

# c++ - C++//数字问题

> ID：10280467
> 
> 赞同：2
> 
> 时间：2012-04-23T12:23:39.613
> 
> 标签：c++

当谈到 C++ 时，我是一个初学者。

我必须编写一个提出问题的程序，然后我给出答案，而不是检查它是对还是错。

```
#include <iostream>
#include <sstream>
#include <string>

using namespace std;

class Question
{
public:
       Question();

       void set_text(string question_text);
       void set_answer(string correct_response);
       bool check_answer(string response) const;
       void display() const;

private:
        string text;
        string answer;
};

Question::Question()
{
}    

void Question::set_text(string question_text)
{
     text = question_text;
}

void Question::set_answer(string correct_response)
{
     answer = correct_response;
}

bool Question::check_answer(string response) const
{
     return response == answer;    
}

void Question::display() const
{
     cout << text << endl;
}

int main()
{
    string response;
    cout << boolalpha;

    Question q1;
    q1.set_text("Who was the inventor of  C ++ ? " );
    q1.set_answer("Bjarne Stroustrup" );

    q1.display();
    cout << " Your answer is :  " ;
    getline(cin,response);
    cout << q1.check_answer(response) << endl;
    return 0;
} 
```

问题是我还需要为 NumericalQuestion 添加一个类，以检查响应和预期答案之间是否存在超过 0.01 的差异。这就是我遇到困难的地方。如果有人可以告诉我如何完成或给我一些提示，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:40:01.930

我不会写完整的代码，因为它看起来像我的作业。假设您有一个名为`NumericalQuestion`. 现在，由于您要使用小数点数字，因此`answer`变量的类型需要`float`（或`double`）。在这种情况下，您需要将从控制台读取的字符串转换为浮点数并将其设置为该对象作为预期响应。用户输入答案后，您需要再次将其转换为`float`并调用`check_answer`. 在里面`check_answer`你需要比较答案和预期答案之间的差异是否小于 0.01。您可以通过这样做来实现这一点`return fabs(answer - response) < 0.01`。

# cuda - 包含指针的结构的推力向量

> ID：10280479
> 
> 赞同：2
> 
> 时间：2012-04-23T12:24:38.820
> 
> 标签：cuda, thrust

我有以下数据结构：

```
struct Data {
    int* ptr;
    int a;
    int b;
} 
```

我需要从主机传递的 GPU 上的一组此类结构。最简单的方法是

```
thrust::host_vector<Data> h;
... // fill vector 'h'
thrust::device_vector<Data> d = h; 
```

棘手的时刻是如何分配内存`ptr`以及如何在那里复制数据。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:59:45.217

**根据您对@Heatsink 的评论进行了更新**，如果我理解正确，您说的是给定的

```
struct Data {
    int* ptr;
    int a, b;
}; 
```

和

```
vector<Data> data; 
```

`data[0].ptr`指向包含的 GPU 内存`data[0].a`，`data[0].b`如果这是正确的，那么我会推荐以下组织：

```
struct Data {
    int a, b;
};

thrust::host_vector<Data> h;
thrust::device_vector<Data> d = h; 
```

GPU内存`h[i]`很简单`d[i]`。我不建议将每个元素的指针存储到 GPU 内存，也不建议为每个数据对象分配单独的 GPU 内存（这会非常慢。）如果您使用单独的数组，您的计算代码仍然可能会更快.

通常将数据组织为数组结构而不是结构数组是首选，原因有几个，包括对齐和易于负载合并。

# ios - 在 iOS 上将 UIImage 编码为 base64 字符串

> ID：10280484
> 
> 赞同：2
> 
> 时间：2012-04-23T12:24:56.690
> 
> 标签：ios, encoding, uiimage, base64, encode

我在使用[此类别](http://cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)将 UIImage 编码为 base64 字符串时遇到问题。

这是代码：

```
NSData *imageData = UIImageJPEGRepresentation([UIImage imageNamed:@"myImage.png"], 1.0);
NSString *imageString = [imageData base64EncodedString]; 
```

我收到此错误：

> -[NSConcreteData base64EncodedString]：无法识别的选择器发送到实例 0x906800 ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSConcreteData base64EncodedString]：无法识别的选择器发送到实例 0x906800”

我只是无法弄清楚问题出在哪里？谁能帮我这个？

谢谢！

**更新**

我刚刚想通了。Xcode 没有将 .m 文件放入编译源和项目构建阶段。为什么在 Xcode 4.3 上总是发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:07:01.070

Xcode 没有将 .m 文件放入项目 Build Phases 下的 Compile Sources 中。发生这种情况是因为我没有仔细选择正确的目标（项目/测试）。

# jquery - 带有 AJAX 数据的 Flot 条形图

> ID：10280488
> 
> 赞同：1
> 
> 时间：2012-04-23T12:25:16.260
> 
> 标签：jquery, flot

我对 Flot 图表和来自 AJAX 的数据有疑问。基本上我创建了数组来显示图表，但不知何故我看到了轴标签但没有数据。另外我怎样才能做一个堆叠或条形图？

编辑：或者任何人都可以告诉我如何使用带有 x 轴标签的 AJAX 在 flot 中显示数据。您可以在此处查看代码[http://jsfiddle.net/DaG5W/284/](http://jsfiddle.net/DaG5W/284/)。有人请让我知道我在这里做错了什么吗？

这是我使用的代码。

```
$.getJSON(url, function(output) {
    var calendar, count, fieldNames, i, j, values, xAxis;
    fieldNames = new Array();
    i = 0;
    while (i < output.length) {
      if (fieldNames.indexOf(output[i].FieldName) < 0) {
        fieldNames.push(output[i].FieldName);
      }
      i++;
    }
    calendar = new Array();
    i = 0;
    while (i < output.length) {
      if (calendar.indexOf(output[i].Calendar) < 0) {
        calendar.push(output[i].Calendar);
      }
      i++;
    }
    xAxis = [];
    i = 0;
    while (i < calendar.length) {
      xAxis.push([parseInt(i + 1), calendar[i]]);
      i++;
    }
    data = [];
    i = 0;
    while (i < fieldNames.length) {
      values = [];
      count = 0;
      j = 0;
      while (j < output.length) {
        if (fieldNames[i] === output[j].FieldName) {
          count++;
          values.push([parseInt(count), parseInt(output[j].Totals)]);
        }
        j++;
      }
      data.push([
        {
          label: fieldNames[i].toString(),
          data: values,
          bars: {
            show: true
          },
          lines: {
            show: false
          }
        }
      ]);
    }
    return i++;
  });
  options = {
    xaxis: {
      ticks: xAxis
    }
  };
  plot = $.plot($("#div"), [data], options);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:14:30.297

您非常接近可行的解决方案。你做错的只是在两个地方嵌套了太多的数组：

```
 data.push([
    {
      label: fieldNames[i].toString(),
      data: values,
      bars: {
        show: true
      },
      lines: {
        show: false
      }
    }
  ]); 
```

不需要`[]`围绕您的系列对象。

```
plot = $.plot($("#div"), [data], options); 
```

同样在这里，不需要`[]`around `data`。之后，它将绘制图表。见这里：http: [//jsfiddle.net/ryleyb/DaG5W/291/](http://jsfiddle.net/ryleyb/DaG5W/291/)

# php - 我在哪里插入这部分代码？

> ID：10280491
> 
> 赞同：0
> 
> 时间：2012-04-23T12:25:22.887
> 
> 标签：php, duplicates

我对 PHP 很陌生。下面的代码是从我在网上找到的众多教程中拼凑而成的，它正在按照我的意愿工作。我收到了一封来自导师的电子邮件，要求我们添加代码以防止输入重复的电子邮件地址。我有需要添加的代码，但我不知道它应该去哪里。

这是现有的代码：

```
<?
include('config.php');

// table name 
$tbl_name=temp_members;

// Random confirmation code 
$confirm_code=md5(uniqid(rand()));

// values sent from form 
$email=$_POST['email'];
$password=$_POST['password'];
$firstname=$_POST['firstName'];
$lastname=$_POST['lastName'];

// Insert data into database 
$sql="INSERT INTO $tbl_name(confirm_code, email, password, firstname,     lastname)VALUES('$confirm_code', '$email', '$password', '$firstname', '$lastname')";
$result=mysql_query($sql);

// if suceesfully inserted data into database, send confirmation link to email 
if($result){

// ---------------- SEND MAIL FORM ----------------

// send e-mail to ...
$to=$email;

// Your subject
$subject="Francis Flower confirmation link";

// From
$headers="from: Francis Flower Admin <francis.flower.contact@gmail.com>";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

// Your message
$message = '<html><head>';
$message .= '<style type="text/css">
                        body {
                            font-family: Helvetica,         Arial;
                        }
                        .center {
                            text-align: left;
                        }
                        </style>';
$message .= '<body><div class="center"><img src="http://www.jblanksby.yourwebsolution.net/images/logo.png"/>';
$message .= "<p>Dear " .$_POST['firstName']. "&nbsp;" .$_POST['lastName'].", </p>";
$message .= '<p>Thank you for signing up for an account at Francis Flower. </p>';
$message .= '<p>Your new account details are below: </p>';
$message .= "<p>Email Address: ".$_POST['email']. "</p>";
$message .= "<p>Password: " .$_POST['password']. "</p>";
$message .= "<p>Before you can login, you need to activate your account using the link below:</p>";
$message .= "<p>Click on this link to activate your account</p>";
$message .= "<p>http://jblanksby.yourwebsolution.net/confirmation.php?passkey=$confirm_code</p>";
$message .= '</div></body></html>';

// send email
$sentmail = mail($to,$subject,$message,$headers);

}

// if not found 
else {
echo "Not found your email in our database";
}

// if your email succesfully sent
if($sentmail){ ?>
echo "Mail has been sent";
} else { 
echo "Mail has not been sent"}; 
?> 
```

这是捕获我希望包含在上述代码中的重复电子邮件的代码：

```
$query = "SELECT * FROM $tbl_name WHERE email = '{$email}'";

$result = mysql_query($query);

if ( mysql_num_rows ( $result ) > 1 )
{
    /* Username already exists */
    echo 'Username already exists';
}
else
{
    /* Username doesn't exist */
    /* .. insert query */
} 
```

任何有这个的助手都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:29:45.650

它应该放在你做`INSERT`陈述之前。

请注意，您的脚本容易受到 SQL 注入攻击。至少，调用`mysql_real_escape_string()`您的`$_POST`输入值：

```
// Get email from the form before checking if it was already inserted
// you don't need the other form values yet...
$email = mysql_real_escape_string($_POST['email']);

$query = "SELECT * FROM $tbl_name WHERE email = '{$email}'";
$result_eml = mysql_query($query);

// Added some error checking here to make sure the query succeeded
// Also here, check for > 0, not > 1 -- you want to find out if 1 or more rows exist, not that 2 or more exist...
if ( $result_eml && mysql_num_rows ( $result_eml ) > 0 )
{
    /* Username already exists */
    echo 'Username already exists';
}
else if (!$result) {
   // error in query
}
else
{

  // table name 
  $tbl_name=temp_members;

  // Random confirmation code 
  $confirm_code=md5(uniqid(rand()));

  // Other values sent from form 
  $password = mysql_real_escape_string($_POST['password']);
  $firstname = mysql_real_escape_string($_POST['firstName']);
  $lastname = mysql_real_escape_string($_POST['lastName']);

  // Insert data into database 
  $sql="INSERT INTO $tbl_name(confirm_code, email, password, firstname,     lastname)VALUES('$confirm_code', '$email', '$password', '$firstname', '$lastname')";
  $result=mysql_query($sql);

  // etc....

} 
```

我不确定这是用于作业还是用于生产代码，但我会补充一点，通过电子邮件发送用户密码是一个非常糟糕的主意。电子邮件基本上就像一张明信片——除非你用加密方式发送它（现在地球上几乎没有人这样做），它可以被任何服务器管理员从发送点到接收点的网络路径上的任何地方读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:40:38.690

你可以做几件事。您可以在数据库上放置一个 unquie 键，这会在插入重复行时给您一个 mysql 错误。

您还可以在使用当前数据插入之前检查数据库，以确保在插入之前没有返回任何行。

这些只是您可以使用的一些想法。

另外，[使用 PDO 进行检查](http://php.net/manual/en/book.pdo.php)

# sql - 在不删除之前添加的数据的情况下更新表

> ID：10280492
> 
> 赞同：0
> 
> 时间：2012-04-23T12:25:27.443
> 
> 标签：sql, sql-update

我有一个表命名`Table1`如下

```
ID, JobNo, Date, Comments 
```

我有一个名为的视图，`View1`它是在另一个只读表中的同义词的帮助下创建的，如下所示，

```
ID, JobNo, StartSeq, EndSeq 
```

该列`ID`是主键。我将不得不使用`UPDATE`Table1 的列`ID`和`JobNo`来自的数据`View1`。

假设`View1`有 2 行，我`INSERT`将这 2 行放入 Table1。因此，当`View1`获得第 3 行时，如何`Table1`使用第 3 行的信息更新，而不删除先前存储在 Table1 中的数据。

现在，我有以下查询，但由于重复主键问题，它似乎不起作用。

```
INSERT INTO Table1(ID, JobNo)
SELECT View1.ID, View1.JobNo
FROM View1 
```

我是 SQL 的新手，所以请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:29:00.887

假设您只想`INSERT`在 table1 上添加新数据，而不是实际上`UPDATE`已经拥有的数据，那么您应该这样做：

```
INSERT INTO Table1(ID, JobNo) 
SELECT View1.ID, View1.JobNo 
FROM View1
WHERE View1.ID NOT IN (SELECT ID FROM Table1) 
```

# linux - 解释来自 /proc/[id]/mountstats 或 /proc/self/mountstats 的数据

> ID：10280496
> 
> 赞同：8
> 
> 时间：2012-04-23T12:25:40.020
> 
> 标签：linux, bash, proc

我想监控我的 NFS 共享的 IO。有很多程序正在解释`/proc/[id]/mountstats`([id] = id of nfs client/server) 或`/proc/self/mountstats`. 问题是，这些程序每秒计算一些 IO。这在命令行中非常好，但对于我的监控解决方案来说却毫无用处。所以我想解释`mountstats`一下我自己的计数器。我现在的问题是，我需要一些`mountstats`关于 nfs v4 的文档。

到目前为止，我的搜索还没有带来任何有用的信息。

谢谢你的帮助

Ubuntu（nfs 客户端）上 /proc/self/mountstats 的示例输出：

```
...
device IPADRESS:/mountpoint mounted on /mnt/mountpoint with fstype nfs4 statvers=1.0
    opts:   rw,vers=4,rsize=1048576,wsize=1048576,acregmin=3,acregmax=60,acdirmin=30,acdirmax=60,hard,nointr,proto=tcp,timeo=600,retrans=2,sec=sys
    age:    77663
    caps:   caps=0x1e,wtmult=512,dtsize=4096,bsize=0,namelen=255
    nfsv4:  bm0=0xfdffbfff,bm1=0xf9be3e,acl=0x3
    sec:    flavor=1,pseudoflavor=1
    events: 1462723 25756220 1025148 1164028 1083099 2027020 31347107 1984730 279773 1915700 1346583 21077199 520498 31825 525298 39026 2180470 1083041 0 16822 990144 11011 0 0 0
    bytes:  46686144592 3990939437 0 0 30238687174 3759616491 7739053 1346583
    RPC iostats version: 1.0  p/v: 100003/4 (nfs)
    xprt:   tcp 852 1 2 0 0 11822378 11822377 0 17669710 13357205
    per-op statistics
            NULL: 0 0 0 0 0 0 0 0
            READ: 1950114 1950114 0 330348288 30355844804 105050 6678050 6907640
           WRITE: 911822 911822 0 3932410080 215189360 10653830 1472320 12211620
          COMMIT: 389509 389509 0 65718096 88808052 8060 253550 284360
            OPEN: 1168845 1168845 0 292577612 554554444 430040 628900 1229990
    OPEN_CONFIRM: 43 43 0 7048 2924 0 10 10
     OPEN_NOATTR: 0 0 0 0 0 0 0 0
    OPEN_DOWNGRADE: 54 54 0 9952 12744 90 0 120
           CLOSE: 1081161 1081161 0 191495392 255153996 201030 404620 767870
         SETATTR: 43303 43303 0 8753024 10046296 1060 25650 30380
          FSINFO: 2 2 0 268 184 0 0 0
           RENEW: 0 0 0 0 0 0 0 0
     SETCLIENTID: 0 0 0 0 0 0 0 0
    SETCLIENTID_CONFIRM: 0 0 0 0 0 0 0 0
            LOCK: 1140050 1140050 0 246277244 77523400 76270 326950 469890
           LOCKT: 1 1 0 188 52 0 0 0
           LOCKU: 1037895 1037895 0 187916912 70576860 18130 357530 441480
          ACCESS: 450451 450451 0 72511716 102702828 21440 222460 280950
         GETATTR: 1462724 1462724 0 224029496 310097488 21290 390910 485350
          LOOKUP: 2043380 2043380 0 361899452 532433688 18200 499200 585170
     LOOKUP_ROOT: 1 1 0 116 232 0 0 0
          REMOVE: 32356 32356 0 5953448 7765440 600 15450 18560
          RENAME: 20388 20388 0 5593088 9215376 510 7740 9750
            LINK: 537 537 0 132024 231984 0 220 270
         SYMLINK: 0 0 0 0 0 0 0 0
          CREATE: 999 999 0 227376 293140 30 650 830
        PATHCONF: 1 1 0 140 72 0 0 0
          STATFS: 2872 2872 0 419360 333152 580 3980 4880
        READLINK: 0 0 0 0 0 0 0 0
         READDIR: 82718 82718 0 14625720 118955760 770 48470 53310
     SERVER_CAPS: 3 3 0 400 264 0 0 0
     DELEGRETURN: 0 0 0 0 0 0 0 0
          GETACL: 0 0 0 0 0 0 0 0
          SETACL: 0 0 0 0 0 0 0 0
    FS_LOCATIONS: 0 0 0 0 0 0 0 0
 ... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-10-26T03:52:17.850

完整来源：[http ://www.fsl.cs.stonybrook.edu/~mchen/mountstat-format.txt](http://www.fsl.cs.stonybrook.edu/%7Emchen/mountstat-format.txt)

```
 Format of NFS mountstat 
```

Linux内核版本：2.6.32-358.el6.x86_64

重要的统计文件：

```
- linux/fs/nfs/super.c: nfs_show_stats
- linux/include/linux/nfs_iostat.h: nfs_stat_eventcounters
- linux/net/sunrpc/stats.c: rpc_print_iostats
- linux/net/sunrpc/xprtsock.c: xs_tcp_print_stats 
```

# 服务器功能（上限）

1.  上限：服务器功能
2.  wtmult：服务器磁盘块大小
3.  dtsize: 读取目录大小
4.  bsize：服务器块大小
5.  名称：

# nfsv4 (nfs_show_stats)

1.  bm0：attribute_bitmask[0]，支持哪些属性
2.  bm1：attribute_bitmask[1]，支持哪些属性
3.  acl：acl_bitmask，支持哪些acl属性

# 秒，此挂载有效的安全特性 (nfs_show_stats)

1.  风味：auth->au_ops->au_flavor
2.  伪风味：auth->au_flavor

# 事件（linux/nfs_iostat.h：nfs_stat_eventcounters）

1.  inoderevalidate
2.  牙齿重新验证
3.  数据无效
4.  属性验证
5.  vfsopen
6.  vfslookup
7.  vfsaccess
8.  vfs更新页面
9.  vfsreadpage
10.  vfsreadpages
11.  vfswritepage
12.  vfswritepages
13.  vfsgetdents
14.  vfssetattr
15.  vfsflush
16.  vfsfsync
17.  vfslock
18.  vfsrelease
19.  拥堵等待
20.  设置属性
21.  扩展写入
22.  傻改名
23.  短读
24.  速写
25.  延迟
26.  pnfs_read
27.  pnfs_write

# 字节（linux/nfs_iostat.h：nfs_stat_bytecounters）

1.  正常读取字节
2.  正常写入字节
3.  直接读取字节
4.  直接写字节
5.  服务器读取字节
6.  服务器写入字节（服务器写入字节）
7.  读页
8.  写页

# xprt (tcp)

*   linux/net/sunrpc/xprtsock.c：xs_tcp_print_stats
*   linux/include/linux/sunrpc/xprt.h: 结构 rpc_xprt

1.  srcport：临时端口
2.  bind_count：多少个rpcbind操作
3.  connect_count：多少个 TCP 连接
4.  connect_time：连接用了多长时间
5.  idle_time：传输空闲多长时间
6.  rpcsends：发送多少个套接字
7.  rpcrecvs：接收多少个套接字
8.  badxids：收到了多少不匹配的 XID
9.  req_u：网络上的平均请求（槽表利用率）
10.  bklog_u：积压队列利用率（baklog队列的平均长度）
11.  max_slots：使用的最大 rpc_slots
12.  send_u：发送q利用率
13.  pending_u: 挂起 q 利用率

# 每个 RPC 操作类型显示 (rpc_print_iostats)

统计记录：rpc_exit_task ---> xprt_release ---> rpc_count_iostats

所有 NFS 协议都在这里解释：[http ://www.freesoft.org/CIE/Topics/115.htm](http://www.freesoft.org/CIE/Topics/115.htm)

0.  操作类型的名称
1.  ops 请求了多少这种类型的操作
2.  trans：已经发送了多少次这种操作类型的传输
3.  timeouts：发生了多少次这种操作类型的超时
4.  bytes_sent：为此操作类型发送了多少字节
5.  bytes_recv：此操作类型已收到多少字节
6.  queue：这种类型的操作在被传输之前在队列中等待了多长时间（毫秒）
7.  rtt：客户端等待从服务器接收此操作类型的回复的时间（毫秒）
8.  执行：这种类型的操作需要多长时间执行（从 rpc_init_task 到 rpc_exit_task）（毫秒）

rpc_run_task ---> rpc_new_task ---> rpc_init_task

最后三个时间统计是用ns收集的，但是打印出来的时候会转换成ms。

执行时间应近似为 (queue + rtt)。

注意，在 Linux 源代码中，字段名称以“om_”为前缀，例如，第一个字段是“om_ops”而不是“ops”。

# NFSv4.0 示例

```
device 130.245.177.235:/nfsdata/ mounted on /mnt with fstype nfs4 statvers=1.1
    opts:    rw,vers=4,rsize=1048576,wsize=1048576,namlen=255,acregmin=3,acregmax=60,
            acdirmin=30,acdirmax=60,hard,proto=tcp,port=0,timeo=600,retrans=2,sec=sys,
            clientaddr=130.245.177.234,minorversion=0,local_lock=none
    age:    19  (time, in seconds, since the NFS is mounted)
    caps:    caps=0xfff7,wtmult=512,dtsize=32768,bsize=0,namlen=255
    nfsv4:    bm0=0xfdffafff,bm1=0xf9be3e,acl=0x0
    sec:    flavor=1,pseudoflavor=1
    events:    0 168232 0 0 0 10095 217808 0 2 9797 0 9739 0 0 19739 19739 0 19739 0 0 0 0 0 0 0 0 0
    bytes:    1612840960 0 0 0 627536112 0 158076 0
    RPC iostats version: 1.0  p/v: 100003/4 (nfs)
    xprt:    tcp 737 0 1 0 0 69698 69697 0 81817 0 2 1082 12119
    per-op statistics
            NULL: 0 0 0 0 0 0 0 0
            READ: 9797 9797 0 1567520 628138612 71 7953 8200
           WRITE: 0 0 0 0 0 0 0 0
          COMMIT: 0 0 0 0 0 0 0 0
            OPEN: 19740 19740 0 4737600 7343280 505 3449 4172
    OPEN_CONFIRM: 10211 10211 0 1552072 694348 74 836 1008
     OPEN_NOATTR: 0 0 0 0 0 0 0 0
    OPEN_DOWNGRADE: 0 0 0 0 0 0 0 0
           CLOSE: 19739 19739 0 3316152 2605548 334 3045 3620
         SETATTR: 0 0 0 0 0 0 0 0
          FSINFO: 1 1 0 132 108 0 0 0
           RENEW: 0 0 0 0 0 0 0 0
     SETCLIENTID: 0 0 0 0 0 0 0 0
    SETCLIENTID_CONFIRM: 0 0 0 0 0 0 0 0
            LOCK: 0 0 0 0 0 0 0 0
           LOCKT: 0 0 0 0 0 0 0 0
           LOCKU: 0 0 0 0 0 0 0 0
          ACCESS: 96 96 0 14584 19584 0 8 10
         GETATTR: 1 1 0 132 188 0 0 0
          LOOKUP: 10095 10095 0 1655576 2382420 36 898 1072
     LOOKUP_ROOT: 0 0 0 0 0 0 0 0
          REMOVE: 0 0 0 0 0 0 0 0
          RENAME: 0 0 0 0 0 0 0 0
            LINK: 0 0 0 0 0 0 0 0
         SYMLINK: 0 0 0 0 0 0 0 0
          CREATE: 0 0 0 0 0 0 0 0
        PATHCONF: 1 1 0 128 72 0 0 0
          STATFS: 0 0 0 0 0 0 0 0
        READLINK: 0 0 0 0 0 0 0 0
         READDIR: 0 0 0 0 0 0 0 0
     SERVER_CAPS: 2 2 0 256 176 0 0 0
     DELEGRETURN: 0 0 0 0 0 0 0 0
          GETACL: 0 0 0 0 0 0 0 0
          SETACL: 0 0 0 0 0 0 0 0
    FS_LOCATIONS: 0 0 0 0 0 0 0 0
    RELEASE_LOCKOWNER: 0 0 0 0 0 0 0 0
         SECINFO: 0 0 0 0 0 0 0 0
     EXCHANGE_ID: 0 0 0 0 0 0 0 0
    CREATE_SESSION: 0 0 0 0 0 0 0 0
    DESTROY_SESSION: 0 0 0 0 0 0 0 0
        SEQUENCE: 0 0 0 0 0 0 0 0
    GET_LEASE_TIME: 0 0 0 0 0 0 0 0
    RECLAIM_COMPLETE: 0 0 0 0 0 0 0 0
       LAYOUTGET: 0 0 0 0 0 0 0 0
    GETDEVICEINFO: 0 0 0 0 0 0 0 0
    LAYOUTCOMMIT: 0 0 0 0 0 0 0 0
    LAYOUTRETURN: 0 0 0 0 0 0 0 0

NFSv4.1 EXAMPLE
===============
device 130.245.177.235:/nfsdata mounted on /mnt with fstype nfs4 statvers=1.1
    opts:   rw,vers=4.1,rsize=1048576,wsize=1048576,namlen=255,acregmin=3,acregmax=60,acdirmin=30,acdirmax=60,hard,proto=tcp,port=0,timeo=600,retrans=2,sec=sys,clientaddr=130.245.177.234,local_lock=none
    age:    44
    impl_id:    name='',domain='',date='0,0'
    caps:   caps=0x3ffff,wtmult=512,dtsize=32768,bsize=0,namlen=255
    nfsv4:  bm0=0xfdffbfff,bm1=0xf9be3e,bm2=0x800,acl=0x3,sessions,pnfs=not configured
    sec:    flavor=1,pseudoflavor=1
    events: 67379 1692812 0 30749 0 980 1984612 0 0 0 0 0 0 0 96611 96611 0 96611 0 0 0 0 0 0 0 0 0 
    bytes:  0 0 0 0 0 0 0 0 
    RPC iostats version: 1.0  p/v: 100003/4 (nfs)
    xprt:   tcp 674 0 1 0 0 279772 279771 0 649944 0 5 1711 90409
    per-op statistics
            NULL: 0 0 0 0 0 0 0 0
            READ: 0 0 0 0 0 0 0 0
           WRITE: 0 0 0 0 0 0 0 0
          COMMIT: 0 0 0 0 0 0 0 0
            OPEN: 96612 96612 0 27824256 34007424 13349 16253 32061
    OPEN_CONFIRM: 0 0 0 0 0 0 0 0
     OPEN_NOATTR: 0 0 0 0 0 0 0 0
    OPEN_DOWNGRADE: 0 0 0 0 0 0 0 0
           CLOSE: 96610 96610 0 19708440 17003360 2936 11082 15386
         SETATTR: 0 0 0 0 0 0 0 0
          FSINFO: 1 1 0 168 152 0 0 0
           RENEW: 0 0 0 0 0 0 0 0
     SETCLIENTID: 0 0 0 0 0 0 0 0
    SETCLIENTID_CONFIRM: 0 0 0 0 0 0 0 0
            LOCK: 0 0 0 0 0 0 0 0
           LOCKT: 0 0 0 0 0 0 0 0
           LOCKU: 0 0 0 0 0 0 0 0
          ACCESS: 16932 16932 0 3183200 2844576 83 1919 2308
         GETATTR: 67380 67380 0 12128380 15632160 336 8367 10644
          LOOKUP: 1236 1236 0 247176 167784 7 153 197
     LOOKUP_ROOT: 0 0 0 0 0 0 0 0
          REMOVE: 0 0 0 0 0 0 0 0
          RENAME: 0 0 0 0 0 0 0 0
            LINK: 0 0 0 0 0 0 0 0
         SYMLINK: 0 0 0 0 0 0 0 0
          CREATE: 980 980 0 219516 305760 5 168 197
        PATHCONF: 1 1 0 164 116 0 0 0
          STATFS: 0 0 0 0 0 0 0 0
        READLINK: 0 0 0 0 0 0 0 0
         READDIR: 0 0 0 0 0 0 0 0
     SERVER_CAPS: 2 2 0 328 280 0 0 0
     DELEGRETURN: 0 0 0 0 0 0 0 0
          GETACL: 0 0 0 0 0 0 0 0
          SETACL: 0 0 0 0 0 0 0 0
    FS_LOCATIONS: 0 0 0 0 0 0 0 0
    RELEASE_LOCKOWNER: 0 0 0 0 0 0 0 0
         SECINFO: 0 0 0 0 0 0 0 0
     EXCHANGE_ID: 0 0 0 0 0 0 0 0
    CREATE_SESSION: 0 0 0 0 0 0 0 0
    DESTROY_SESSION: 0 0 0 0 0 0 0 0
        SEQUENCE: 0 0 0 0 0 0 0 0
    GET_LEASE_TIME: 0 0 0 0 0 0 0 0
    RECLAIM_COMPLETE: 0 0 0 0 0 0 0 0
       LAYOUTGET: 0 0 0 0 0 0 0 0
    GETDEVICEINFO: 0 0 0 0 0 0 0 0
    LAYOUTCOMMIT: 0 0 0 0 0 0 0 0
    LAYOUTRETURN: 0 0 0 0 0 0 0 0
    SECINFO_NO_NAME: 0 0 0 0 0 0 0 0
    TEST_STATEID: 0 0 0 0 0 0 0 0
    FREE_STATEID: 0 0 0 0 0 0 0 0
    GETDEVICELIST: 0 0 0 0 0 0 0 0
    BIND_CONN_TO_SESSION: 0 0 0 0 0 0 0 0
    DESTROY_CLIENTID: 0 0 0 0 0 0 0 0

# vim: tabstop=2:shiftwidth=2:expandtab:foldmethod=indent 
```

还有[https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/include/linux/nfs_iostat.h](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/include/linux/nfs_iostat.h)和[https://utcc.utoronto.ca/~cks/space/ blog/linux/NFSMountstatsIndex](https://utcc.utoronto.ca/%7Ecks/space/blog/linux/NFSMountstatsIndex)以供进一步阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T09:54:15.930

显然，没有比[mountstats 实用程序的代码](http://git.linux-nfs.org/?p=steved/nfs-utils.git;a=blob;f=tools/mountstats/mountstats.py)更好的“文档”了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:45:04.573

你在什么 Linux 上这样做是因为对我来说，在 Redhat 上，mountstats（用于 v4）是这样的：

```
[root@riau petri]# cat /proc/1511/mountstats 
device rootfs mounted on / with fstype rootfs
device /proc mounted on /proc with fstype proc
device /sys mounted on /sys with fstype sysfs
device udev mounted on /dev with fstype devtmpfs
device devpts mounted on /dev/pts with fstype devpts
device tmpfs mounted on /dev/shm with fstype tmpfs
device /dev/mapper/vg_riau-lv_root mounted on / with fstype ext4
device /proc/bus/usb mounted on /proc/bus/usb with fstype usbfs
device /dev/sda1 mounted on /boot with fstype ext4
device /dev/mapper/vg_riau-lv_home mounted on /home with fstype ext4
device none mounted on /proc/sys/fs/binfmt_misc with fstype binfmt_misc
device cgroup mounted on /cgroup/cpuset with fstype cgroup
device cgroup mounted on /cgroup/cpu with fstype cgroup
device cgroup mounted on /cgroup/cpuacct with fstype cgroup
device cgroup mounted on /cgroup/memory with fstype cgroup
device cgroup mounted on /cgroup/devices with fstype cgroup
device cgroup mounted on /cgroup/freezer with fstype cgroup
device cgroup mounted on /cgroup/net_cls with fstype cgroup
device cgroup mounted on /cgroup/blkio with fstype cgroup
device sunrpc mounted on /var/lib/nfs/rpc_pipefs with fstype rpc_pipefs
device /etc/auto.misc mounted on /misc with fstype autofs
device -hosts mounted on /net with fstype autofs
device nfsd mounted on /proc/fs/nfsd with fstype nfsd 
```

# android - 如何向安卓模拟器发送http请求

> ID：10280498
> 
> 赞同：3
> 
> 时间：2012-04-23T12:26:03.680
> 
> 标签：android, http, request

我在 android 中创建了小型 http 服务器，代码来自这个链接，只是复制粘贴到 eclipse 中。 [http://www.java2s.com/Open-Source/Android/Samples/android-jp-kobe/net/cattaka/teamredwhite/HTTPServer.java.htm](http://www.java2s.com/Open-Source/Android/Samples/android-jp-kobe/net/cattaka/teamredwhite/HTTPServer.java.htm)

我现在如何从浏览器向服务器发送简单请求？例如，我想要这样的 127.0.0.1:12345?x=100&y=50 。浏览器总是说他没有与那个网址建立联系。在创建主要活动时，我刚刚创建了一个端口为 12345 的服务器并运行 .listen()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:53:27.107

127.0.0.1 on 是您的本地计算机，而不是模拟器。

模拟器有自己的[网络地址空间](http://developer.android.com/guide/developing/devices/emulator.html#networkaddresses)：

您最有可能在寻找`10.0.2.15`“模拟设备自己的网络/以太网接口”，例如`http://10.0.2.15:12345?x=100&y=50`.

# php - 在查询中获取列名

> ID：10280501
> 
> 赞同：0
> 
> 时间：2012-04-23T12:26:30.620
> 
> 标签：php, sql, database

如何从表中获取空记录的列名？例如：

```
SELECT column.name FROM table WHERE id='1111' AND column_name='' 
```

它应该从表中返回空列的每个标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:37:39.443

如果您使用 mysql 5.0+，您可以获得表的所有列名，如下所示：

```
SELECT COLUMN_NAME
FROM `information_schema`.`COLUMNS`
WHERE TABLE_NAME='$table_name'
ORDER BY ORDINAL_POSITION 
```

注意：将 $table_name 更改为您的表名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T11:07:20.237

这也是一种方法：

```
$mysql_query = mysql_query("describe table");
while ($row = mysql_fetch_array($mysql_query)) {
 echo $row[0]."</br>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:41:23.920

为了简单起见，我会用 php 来做，但是可能有一种复杂的 mysql 方法可以在 dbms 级别做到这一点

在伪代码中：

```
$result = MYSQL_FETCH_ASSOC ( MYSQL_QUERY( SELECT * FROM table WHERE id='1111' ) )

$blankCols = array();
foreach($result[0] as $key=>$value){
   if($value=="")
   {
      $blankCols[] = $key;
   }
} 
```

正如我之前提到的，这看起来很丑陋，看起来像是一个糟糕的数据结构设计。

# jquery - 隐藏以相同单词开头的 div

> ID：10280508
> 
> 赞同：0
> 
> 时间：2012-04-23T12:26:59.687
> 
> 标签：jquery

我试图隐藏以相同字母开头的 div。这些 div 是动态的。

```
$('div[id^="treeDiv"]').each(function() {
    // here i need to hide the divs starting with "treeDiv" 
}); 
```

怎么做。请给我建议。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T12:29:01.247

```
$('div[id^="treeDiv"]').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:30:38.877

或者可能将其设置为函数：

```
function hideMe(container){
    $('div[id^="'+container+'"]').hide();
} 
```

# asp.net-mvc - 通过 mvc3 应用程序发送电子邮件

> ID：10280512
> 
> 赞同：-1
> 
> 时间：2012-04-23T12:27:09.813
> 
> 标签：asp.net-mvc, asp.net-mvc-3, smtp

我正在使用 MVC3，需要向用户发送电子邮件。我不想使用 gmail 服务器。但是，我确实想使用服务器 10.1.70.100。我不明白我做错了什么。这是我的代码：

```
 var fromAddress = new MailAddress("sum1@abc.com", "From Name");                    var toAddress = new MailAddress(EmailID, "To Name");
                const string fromPassword = "";//To be Filled
                const string subject = "Verification Mail";

                string body = "You have successfully registered yourself. Please Enter your Verification code " + code.ActivatedCode;
                var smtp = new SmtpClient
                {
                    Host = "10.1.70.100",
                    Port = 587,
                    EnableSsl = true,
                    DeliveryMethod = SmtpDeliveryMethod.Network,
                    Credentials = new NetworkCredential(),

                    Timeout = 100000
                };
                using (var message = new MailMessage(fromAddress, toAddress)
                {
                    Subject = subject,
                    Body = body
                })
                {
                    smtp.Send(message);
                } 
```

**有人可以建议一种我不必提供凭据的方法吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:33:19.853

我更喜欢通过以下方式执行此操作：

网络配置：

```
 <system.net>
       <mailSettings>
           <smtp from="Description">
               <network host="your.smtpserver" password="" userName="" />
           </smtp>
      </mailSettings>
  </system.net> 
```

你的代码：

```
 var smtpClient = new SmtpClient();
      smtpClient.Send(mail); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:30:43.403

对于我们的 OSS 项目，我们使用这个小助手。希望能帮助到你。

```
public void SendEmail(string address, string subject, string message)
    {
        string email = ConfigurationManager.AppSettings.Get("email");
        string password = ConfigurationManager.AppSettings.Get("password");
        string client = ConfigurationManager.AppSettings.Get("client");
        string port = ConfigurationManager.AppSettings.Get("port");

        NetworkCredential loginInfo = new NetworkCredential(email, password);
        MailMessage msg = new MailMessage();
        SmtpClient smtpClient = new SmtpClient(client, int.Parse(port));

        msg.From = new MailAddress(email);
        msg.To.Add(new MailAddress(address));
        msg.Subject = subject;
        msg.Body = message;
        msg.IsBodyHtml = true;

        smtpClient.EnableSsl = true;
        smtpClient.UseDefaultCredentials = false;
        smtpClient.Credentials = loginInfo;
        smtpClient.Send(msg);
    } 
```

# jodatime - Joda Time 夏令时检测

> ID：10280516
> 
> 赞同：1
> 
> 时间：2012-04-23T12:27:24.100
> 
> 标签：jodatime

有没有一些内置的方法来检查一个`DateTime`with`DateTimeZone`有多少小时？

我编写了一个小型实用程序类，但更喜欢内置方法。

```
public class Dst {
    public static long dayHours(DateTime instant) {
        Period day = new Period(0, 0, 0, 1, 0, 0, 0, 0);
        return new Duration(instant, instant.plus(day)).getStandardHours();
    }
    public static boolean hasClockChange(DateTime instant) {
        return 24l != Dst.dayHours(instant);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:09:54.547

我认为 JodaTime 库中没有直接的方法，但可能更短一些：

```
public static long dayHours(DateTime instant) {
    return new Duration(instant.withMillisOfDay(0), 
                        instant.withMillisOfDay(0).plus(Days.ONE))
                        .getStandardHours();
} 
```

这与您发布的内容略有不同，因为它查看的是提供的日期所代表的日期（丢弃时间）而不是*接下来*的23/24/25 小时，您实际执行的操作会有所不同，具体取决于时间是否包含在`instant`时间变化之前或之后。

我问自己的问题是，你真的需要小时数吗？或者只是那天是否有变化？然后使用这样的东西：

```
public static boolean hasClockChange(DateTime instant) {
        zone = DateTimeZone.forID("your-time-zone") // or do this with an appropriate constant
        return zone.getOffset(instant.withMillisOfDay(0)) != zone.getOffset(instant.withHourOfDay(23));
} 
```

（前提是晚上 11 点之后不会发生时间变化，这应该没问题）。如果您需要该信息，您也可以根据时间变化的方向返回 -1/0/1。

# java - 将 double 转换为 Int，向下舍入

> ID：10280520
> 
> 赞同：53
> 
> 时间：2012-04-23T12:27:38.360
> 
> 标签：java, type-conversion, rounding

如何将`double`值转换为`int`执行以下操作：

```
Double If x = 4.97542\. Convert to int x = 4.

Double If x = 4.23544\. Convert to int x = 4. 
```

也就是说，答案总是四舍五入。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-04-23T12:29:45.927

如果显式**转换** `double`为`int`，小数部分将被截断。例如：

```
int x = (int) 4.97542;   //gives 4 only
int x = (int) 4.23544;   //gives 4 only 
```

此外，如果您想要返回值，您还可以使用`Math.floor()`方法对值进行舍`double`入。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-04-23T12:34:59.920

如果双精度为`Double`大写**D**（盒装原始值）：

```
Double d = 4.97542;
int i = (int) d.doubleValue();

// or directly:
int i2 = d.intValue(); 
```

如果 double 已经是一个原始的`double`，那么你只需转换它：

```
double d = 4.97542;
int i = (int) d; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-23T12:32:02.077

```
double myDouble = 420.5;
//Type cast double to int
int i = (int)myDouble;
System.out.println(i); 
```

双精度值是 420.5，应用程序打印出整数值 420

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-20T13:46:31.503

另一个选项 using`Double`或`double`is use `Double.valueOf(double d).intValue();`。简单干净

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-07T21:29:29.717

我认为我有更好的输出，特别是对于双数据类型排序。

尽管此问题已被标记为已回答，但也许这对其他人有帮助；

```
Arrays.sort(newTag, new Comparator<String[]>() {
         @Override
         public int compare(final String[] entry1, final String[] entry2) {
              final Integer time1 = (int)Integer.valueOf((int) Double.parseDouble(entry1[2]));
              final Integer time2 = (int)Integer.valueOf((int) Double.parseDouble(entry2[2]));
              return time1.compareTo(time2);
         }
    }); 
```

# c# - InstalledRecognizers() 不运行

> ID：10280524
> 
> 赞同：1
> 
> 时间：2012-04-23T12:27:43.337
> 
> 标签：c#, speech-recognition, kinect, speech

我正在尝试`Microsoft Speech Platform`与 Kinect 集成，但我遇到了方法：`SpeechRecognitionEngine.InstalledRecognizers()`，它根本不运行。当我从我的班级调用该方法时，执行不会继续。我正在使用这种方法来获取 Kinect 识别器。

有什么问题？这是我使用该方法的一段代码`InstalledRecognizers()`：

```
 RecognizerInfo obtenerReconocedorKinect()
    {

        String details;

        System.Collections.ObjectModel.ReadOnlyCollection<RecognizerInfo> recs =  SpeechRecognitionEngine.InstalledRecognizers();

        foreach (RecognizerInfo recInfo in recs)
        {
            if (recInfo.AdditionalInfo.ContainsKey("Kinect"))
            {
                details = recInfo.AdditionalInfo["Kinect"];
                if (details == "True" && recInfo.Culture.Name == "en-US")
                {
                    return recInfo;
                }
            }
         }
        return null;
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:42:17.003

所以问题是：

Microsoft.Speech.dll 中的**System.Runtime.InteropServices.COMException，**出现以下错误：**未注册类 REGDB_E_CLASSNOTREG**

该问题已通过**重新安装 Kinect SDK**得到解决。

# continuous-integration - 如何为 PHP 项目的三叶草覆盖率调整 Jenkins 天气报告

> ID：10280526
> 
> 赞同：9
> 
> 时间：2012-04-23T12:27:48.203
> 
> 标签：continuous-integration, phpunit, jenkins, code-coverage

我为 Jenkins 的一个新团队安装了一些 PHP 项目，我试图降低最初的期望，以帮助他们提高测试和一切。最初，我们的目标是 20% 的代码覆盖率。我已经调整了我的 PHPUnit 配置文件中的边界，以在代码覆盖率达到 20% 时变为绿色 - 这样他们就可以看到他们正朝着正确的方向前进。但我想要做的是更新我的詹金斯视图中的天气报告以反映三叶草的覆盖范围，我似乎不能这样做！

![詹金斯天气报告三叶草覆盖率](../Images/e4bf68c326d2431e73714eb0aedd3795.png)

我在我的 jenkins 项目配置中检查了*Publish Clover PHP Coverage Report*，并且我的 clover.xml 是从 PHPUnit 生成的，但我不确定如何为此调整边界。

**从 phpunit.xml.dist 记录：**

```
<logging>
  <log type="coverage-html" target="build/coverage" title="ERC"
     charset="UTF-8" yui="true" highlight="true"
     lowUpperBound="10" highLowerBound="20"/>
  <log type="coverage-clover" target="build/logs/clover.xml"/>
  <log type="junit" target="build/logs/junit.xml" logIncompleteSkipped="false"/>
</logging> 
```

**项目设置覆盖指标**

我最初没有启用*Publish Html Report*，但我发现在我保存并重新运行构建后，启用它并修改百分比从未有任何影响。 ![在此处输入图像描述](../Images/afb1a742c3e73b4ec94de719fa68e2da.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:42:21.463

Jenkins 天气报告的范围是在 Jenkins 中定义的，而不是在 phpunit 中

![在此处输入图像描述](../Images/af090a6b15e7527299a63617cb565470.png)

根据您使用的是 Clover 还是 CloverPHP 插件，它可能看起来有点不同，但它在 Jenkins 设置页面中以以太网方式 :)

# java - 在java中输出的变量的地址内存

> ID：10280528
> 
> 赞同：0
> 
> 时间：2012-04-23T12:27:50.013
> 
> 标签：java, swing, combobox, jcombobox

下面的代码旨在根据所选日期使用可用时间填充组合框。

但是由于某种原因，组合框正在存储数据示例的内存地址：

```
Restaurant.Time@1a28362
Restaurant.Time@5fcf29
... 
```

我知道它得到了正确的时间。但是我如何实际打印出实际项目？

```
TimeList times = dbConnector.selectTimes(lblDay.getText());//lblDay stores the date from the jCalendar button
cmbNewResTimes.removeAllItems();
for (int pos1 = 0; pos1 < times.size(); pos1++) {
    cmbNewResTimes.addItem(times.getTimeAt(pos1).toString());
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T12:35:36.630

## 添加对象实例

首先，将其更改为：

```
// add the Object, rather than the String representation.
cmbNewResTimes.addItem(times.getTimeAt(pos1)); 
```

## 设置渲染器

然后设置一个渲染器，见：

*   [`JComboBox.setRenderer(ListCellRenderer)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#setRenderer%28javax.swing.ListCellRenderer%29)
*   [如何使用组合框：提供自定义渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#renderer)。
*   [在this answer about font rendering in a combo中](https://stackoverflow.com/a/6965149/418556)可以看到一个简单（但漂亮）的例子。 ![](../Images/49ea3b806a041e122016e395ad6bf0d9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T12:29:40.420

这意味着它`Restaurant.Time`不会覆盖该[`toString()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29)方法，因此使用 by 提供的默认实现`Object`。

如果您希望输出看起来不同，则需要覆盖`Restaurant.Time.toString()`.

# objective-c - 启用 ARC 的应用程序将在较低版本的 ios 中运行

> ID：10280529
> 
> 赞同：1
> 
> 时间：2012-04-23T12:27:50.363
> 
> 标签：objective-c, ios, ios5, ios4, automatic-ref-counting

我已经使用启用 ARC 的 xcode 4.3.2 开发了一个应用程序，我的应用程序用户拥有 ios3.2、ios4.0、ios5.0 设备我如何支持较低版本的 ios 设备使用。我是否需要在代码中做任何事情边 。或者有什么方法可以动态设置ARC。

任何人对此有任何想法请与我分享。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:30:48.943

[ARC](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)不依赖于设备或操作系统（请参阅下面的注释）。它是 LLVM 编译器功能（可以使用 -fno-objc-arc 编译器标志禁用）。编译器管理内存而不是程序员。最终的可执行文件彼此之间不会有太大的不同，并且可以在为您的项目指定的最低操作系统上运行（如果您不使用 ARC 特定的关键字等）。

注意：根据 Apple 的[Transitioning to ARC Release Notes from Apple](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)，ARC 编译的可执行文件只能在 iOS 4 及更高版本上运行。此外，弱引用仅在 iOS 5 上受支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:32:25.490

只需将目标部署设置为您的用户可能使用的最低 iOS 版本。仅在 Xcode 中编译应用程序时自动引用计数。启用应用程序的 ARC 的内存由编译器 (Xcode) 管理。因此，您无需担心设备的目标 iOS 版本。只需将目标部署设置为 3.2 或 4 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:00:29.943

I think at least it is not guaranteed to work correctly on iOS 3.x. See [Transitioning to ARC Release Notes from Apple](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html):

> ARC is supported in Xcode 4.2 for Mac OS X v10.6 and v10.7 (64-bit applications) and for iOS 4 and iOS 5\. Weak references are not supported in Mac OS X v10.6 and iOS 4.

# javascript - 如何在 xfl 中使用 GradientEntry？

> ID：10280530
> 
> 赞同：0
> 
> 时间：2012-04-23T12:27:51.167
> 
> 标签：javascript, matrix, easeljs, xfl

```
<LinearGradient>
     <matrix>
         <Matrix a="0.0262451171875" d="0.009765625" tx="218.45" ty="83"/>
      </matrix>
      <GradientEntry color="#E63426" ratio="0.00392156862745098"/>
      <GradientEntry color="#CA271E" ratio="0.36078431372549"/>
      <GradientEntry color="#B31D19" ratio="0.749019607843137"/>
      <GradientEntry color="#AB1917" ratio="1"/> 
</LinearGradient> 
```

这是 xfl 文件的相关部分，需要使用 gradientEntry 为形状填充颜色。上面的矩阵值假设以某种方式帮助我获取渐变的开始和结束坐标。有谁知道如何提取开始和结束坐标。不久前我使用 EaselJS Matrix 2D 类和分解函数做了类似的事情来决定缩放、旋转、倾斜和平移（位移）。

我想做的是用画布在 HTML 5 中绘制 xfl 图片。

我在编程方面有点新，所以也许我的问题没有很好地表达！对于那个很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:26:21.933

我已经研究了很长时间，但我还没有完全弄清楚。

这是一个在 XFL 文件中经常出现的典型转换矩阵，但我不知道它究竟转换了什么。我确实知道，如果你通过变换矩阵拉 [0,0] 并考虑层的局部变换空间（即减去变换点），你会得到渐变的中心。

但是，如果我变换 [0,1]、[1,0] 或 [1,1]，则结果与 [0,0] 几乎没有区别，因为变换矩阵中的值总是非常小。不过，似乎 [1,0] 至少指向正确的方向。如果我将 [1000,0] 放入其中，我将得到大约 1/2 的整个渐变长度。

因此，仅基于视觉，我会说渐变将从 [-1000,0] 到 [1000,0]。但这只是一个经验估计。如果有人有更好的估计，或者可能是他们这样做的原因，我很想知道。

# cpan - BioPerl 和 CPAN - 安装问题和错误“无法在 @INC 中找到 Bio/EnsEMBL/Registry.pm”

> ID：10280531
> 
> 赞同：3
> 
> 时间：2012-04-23T12:28:00.357
> 
> 标签：cpan, bioperl

我出于纯粹的绝望而发布此消息，因为我真的不知道还能尝试什么。我是 bioperl 的初学者，我正在编写一个脚本来解析我从 MolQuest fgenesh 获得的一些结果。结果以 .txt 格式输出，我想将它们解析为 GFF 和 fasta 文件以获取 mRNA 和蛋白质序列，以便与我们拥有的其他结果进行比较。所以我找到了**Bio::Tools::Fgenesh**模块，我正在用它编写一个脚本。问题是，BioPerl 似乎无法在我的 ubuntu 电脑上运行

我按照这里的说明[http://www.bioperl.org/wiki/Installing_Bioperl_for_Unix](http://www.bioperl.org/wiki/Installing_Bioperl_for_Unix)。我设法以 root 模式安装 CPAN（否则它将无法工作）并通过 CPAN 安装 BioPerl。所有测试都很好，但是当我运行这个脚本来测试安装时

```
 use strict;
 use warnings;

 use Getopt::Long;
 use Bio::EnsEMBL::Registry;

 my $reg = "Bio::EnsEMBL::Registry";
 $reg->load_registry_from_db(
              -host => "ensembldb.ensembl.org",
              -user => "anonymous"
 );
 my $db_list=$reg->get_all_adaptors();
 my @line;

foreach my $db (@$db_list){
    @line = split ('=',$db);
    print $line[0]."\n";
 } 
```

我收到错误消息：**“无法在 @INC 中找到 Bio/EnsEMBL/Registry.pm”**

我尝试通过 Build.PL 再次安装 BioPerl，以 root 身份运行，但仍然得到相同的结果。

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:55:46.520

您似乎正在尝试使用 Ensembl API。这不是 BioPerl 发行版的一部分。有关如何安装它的更多信息，请参阅[http://www.ensembl.org/info/docs/api/api_installation.html 。](http://www.ensembl.org/info/docs/api/api_installation.html)我们不建议您将它安装在任何默认 Perl 库位置，因为该 API 与同一版本中生成的数据密切相关。Ensembl 每年提供 4-5 个版本，因此维护这一点可能很困难。

如果您有任何问题，那么您可以联系开发人员。我们有一个活跃的开发者邮件列表和一个帮助台。有关更多信息，请参见[http://www.ensembl.org/info/about/contact/index.html](http://www.ensembl.org/info/about/contact/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-25T07:17:44.880

我遇到了和你一样的错误，在 Windows 64x 上工作。似乎 Bio::EnsEMBL::Registry 在我的 Windows 计算机上无法识别。按照所有 ENSEMBL-API 说明，我终于看到了一个调试页面（[http://www.ensembl.org/info/docs/api/debug_installation_guide.html](http://www.ensembl.org/info/docs/api/debug_installation_guide.html)）。运行 C:\src\ensembl/misc-scripts/ping_ensembl.pl 后，我再次收到与上面列出的相同的错误消息。

根据 Windows 的 PERL API 帮助，我需要运行“set PERL5LIB=C:\src\bioperl-1.2.3;C:\src\ensembl\modules;C:\src\ensembl-compara\modules;C: \src\ensembl-variation\modules;C:\src\ensembl-funcgen\modules”来自 cmd 框。这样做了，但错误保持不变。

现在我包含了这些路径（C:\src\bioperl-1.2.3;C:\src\ensembl\modules;C:\src\ensembl-compara\modules;C:\src\ensembl-variation\modules;C: \src\ensembl-funcgen\modules) 直接在我的 perl 脚本中，这似乎有效。可能这不是这样做的方法，但只要它有效，我就很高兴。请参阅下面的示例脚本（基于 Bert Overduin 提供的练习）：

> #!/usr/bin/perl -w
> 
> 使用库“C：/src/ensembl/modules”；
> 
> 使用库“C：/src/ensembl/modules/Bio/EnsEMBL”；
> 
> 使用库“C：/src/ensembl-compara/modules/Bio/EnsEMBL/Compara”；
> 
> 使用库“C：/src/ensembl-functgenomics/modules/Bio/EnsEMBL/Funcgen”；
> 
> 使用库“C：/src/ensembl-variation/modules/Bio/EnsEMBL/Variation”；
> 
> 使用严格；
> 
> 使用 Bio::EnsEMBL::Registry；
> 
> 我的 $registry = 'Bio::EnsEMBL::Registry';
> 
> $registry->load_registry_from_db(
> 
> -host => 'ensembldb.ensembl.org',
> 
> -user => '匿名',
> 
> -详细 => '1'
> 
> );
> 
> 我的 $slice_adaptor = Bio::EnsEMBL::Registry->get_adaptor("human", "core", "slice");
> 
> # 在整个 X 染色体上切片
> 
> 我的 $chr_slice = $slice_adaptor->fetch_by_region( '染色体', '13', 32_889_000, >32_891_000 );
> 
> 打印 ”＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃ #######\n";
> 
> 打印 $chr_slice->seq;

或者：

> #!/usr/bin/perl -w
> 
> BEGIN{ push @INC,'C:/src/bioperl-live','C:/src/ensembl/modules','C:/src/ensembl-compara/modules','C:/src/ensembl-variation /modules','C:/src/ensembl-functgenomics/modules';};
> 
> 使用严格；
> 
> 使用 Bio::EnsEMBL::Registry；
> 
> 我的 $registry = 'Bio::EnsEMBL::Registry';
> 
> $registry->load_registry_from_db(
> 
> -host => 'ensembldb.ensembl.org',
> 
> -user => '匿名',
> 
> -详细 => '1'
> 
> );
> 
> 我的 $slice_adaptor = Bio::EnsEMBL::Registry->get_adaptor("human", "core", "slice");
> 
> # 在整个 X 染色体上切片
> 
> 我的 $chr_slice = $slice_adaptor->fetch_by_region( '染色体', '13', 32_889_000, >32_891_000 );
> 
> 打印 ”＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃ #######\n";
> 
> 打印 $chr_slice->seq;

# css - “发布到 facebook”未显示在所有其他 html 元素之上

> ID：10280532
> 
> 赞同：0
> 
> 时间：2012-04-23T12:28:03.630
> 
> 标签：css, facebook, html, facebook-like

在此链接 (http://kbk-siroki.herokuapp.com/blog/posts/napravljen-update-najnovijih-blog-postova) 上，您可以找到带有 facebook LIKE 按钮的博客文章。问题是当用户单击“发布到 facebook”按钮时，元素隐藏在其他元素下方。拜托，谁能帮我解决问题，以便完全显示“发布到 facebook”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:33:33.770

你试过玩 z-index 吗？这可以确保在显示时，sendto 框堆叠在所有其他元素之上。我看了看，好像元素有 z-index: 1; 尝试一个更高的整数，看看是否有帮助。

# c# - 正则表达式查找字符串中的第一个大写字母

> ID：10280536
> 
> 赞同：3
> 
> 时间：2012-04-23T12:28:14.697
> 
> 标签：c#, regex, string, .net-2.0

我想在字符串中找到第一个大写字母出现的索引。

例如 -

```
String x = "soHaM"; 
```

该字符串的索引应返回 2。找到第一个大写字母后，正则表达式应忽略所有其他大写字母。如果没有找到大写字母，那么它应该返回 0。请帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T12:35:51.383

我很确定您需要的只是正则表达式：~~`A-Z`~~ `\p{Lu}`

```
public static class Find
{
  // Apparently the regex below works for non-ASCII uppercase
  // characters (so, better than A-Z).
  static readonly Regex CapitalLetter = new Regex(@"\p{Lu}");

  public static int FirstCapitalLetter(string input)
  {
    Match match = CapitalLetter.Match(input);

    // I would go with -1 here, personally.
    return match.Success ? match.Index : 0;
  }
} 
```

你试过这个吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T12:37:27.583

只是为了好玩，一个 LINQ 解决方案：

```
string x = "soHaM";
var index = from ch in x.ToArray()
            where Char.IsUpper(ch)
            select x.IndexOf(ch); 
```

这返回`IEnumerable<Int32>`。如果您想要第一个大写字符的索引，只需调用`index.First()`或检索 LINQ 中的第一个实例：

```
string x = "soHaM";
var index = (from ch in x.ToArray()
            where Char.IsUpper(ch)
            select x.IndexOf(ch)).First(); 
```

**编辑**

正如评论中所建议的，这是另一种 LINQ 方法（可能比我最初的建议更高效）：

```
string x = "soHaM";
x.Select((c, index) => new { Char = c, Index = index }).First(c => Char.IsUpper(c.Char)).Index; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-23T12:38:30.470

不需要`Regex`：

```
int firstUpper = -1;
for(int i = 0; i < x.Length; i++)
{
    if(Char.IsUpper(x[i]))
    {
        firstUpper = i;
        break;
    }
} 
```

[http://msdn.microsoft.com/en-us/library/system.char.isupper.aspx](http://msdn.microsoft.com/en-us/library/system.char.isupper.aspx)

为了完整起见，这是我的 LINQ 方法（尽管它不是正确的工具，即使 OP 可以使用它）：

```
int firstUpperCharIndex = -1;
var upperChars = x.Select((c, index) => new { Char = c, Index = index })
                  .Where(c => Char.IsUpper(c.Char));
if(upperChars.Any())
    firstUpperCharIndex = upperChars.First().Index; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T12:48:32.357

首先，您的逻辑失败，如果该方法在您的情况下返回 0，则意味着该列表中的第一个字符是大写字母，因此我建议找不到 -1 或抛出异常。

无论如何，只需使用正则表达式，因为您并不总是最好的选择，而且它们通常非常缓慢且难以阅读，这使得 yoru 代码更难使用。

无论如何，这是我的贡献

```
 public static int FindFirstUpper(string text)
    {
        for (int i = 0; i < text.Length; i++)
            if (Char.IsUpper(text[i]))
                return i;

        return -1;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T12:37:00.327

使用循环

```
 int i = 0;
 for(i = 0; i < mystring.Length; i++)
 {
   if(Char.IsUpper(mystring, i))
    break;
 } 
```

i 是你应该关注的值；

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-23T12:58:24.000

使用 Linq：

```
using System.Linq;

string word = "soHaMH";
var capChars = word.Where(c => char.IsUpper(c)).Select(c => c);
char capChar = capChars.FirstOrDefault();
int index = word.IndexOf(capChar); 
```

使用 C#：

```
using System.Text.RegularExpressions;

string word = "soHaMH";
Match match= Regex.Match(word, "[A-Z]");
index = word.IndexOf(match.ToString()); 
```

# facebook - 在为时间线开发 Facebook 应用程序后，我们如何将应用程序提交到时间线目录？还是我们只是将其从沙盒模式中移除？

> ID：10280538
> 
> 赞同：0
> 
> 时间：2012-04-23T12:28:30.077
> 
> 标签：facebook, facebook-opengraph, facebook-apps

当我们准备好将我们的应用程序退出沙盒模式时，是否有将打开的图形应用程序提交到时间线目录的程序？或者将其从 sanbox 模式中取出，使应用程序对其他人“可找到”。我们希望该应用程序出现在 facebook 时间线目录中，如下所示 - [http://www.facebook.com/about/timeline/apps](http://www.facebook.com/about/timeline/apps)

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:38:55.677

您需要将其从沙盒模式中移除，并按照[Facebook.com 上](http://developers.facebook.com/docs/guides/canvas/)的应用教程中的说明打开*社交发现*。您还应该阅读该教程中的*社交渠道*。

 *至于时间线/应用程序，我不确定这些应用程序是如何到达那里的，但我认为这是 Facebook 控制的，它不是自动的，即他们出于某种原因选择将这些应用程序放在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:56:22.337

1.  将您的应用程序带入沙盒模式
2.  将其增长到超过 10 个 MAU，它会自动在搜索中被索引。

见[https://developers.facebook.com/blog/post/523/](https://developers.facebook.com/blog/post/523/)

时间线应用程序只是已启用 Open Graph 的应用程序，因此过程没有什么不同。

如果您想试用 Timeline 应用程序列表，请查看：[https ://www.facebook.com/about/timeline/apps](https://www.facebook.com/about/timeline/apps)*

# android - 如何在没有来自另一个应用程序的用户交互的情况下发送邮件

> ID：10280548
> 
> 赞同：1
> 
> 时间：2012-04-23T12:29:12.027
> 
> 标签：android, email

> **可能重复：**
> [使用 JavaMail API 在 Android 中发送电子邮件而不使用默认的 Android 应用程序（内置电子邮件应用程序）](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-android-a)

您好正在开发 android 应用程序。我的概念是，当我在自己的应用程序中单击一个按钮时，它必须自动调用带有预填充字段（如收件人、主题等）的电子邮件应用程序，并且能够在无需用户干预的情况下自动发送邮件。

能够使用具有所有预填充字段的意图调用电子邮件应用程序。

问题是需要选择“发送”按钮才能发送邮件。

有没有可能自动发送？？？

请帮助我提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:14:31.337

也许这对你有任何帮助。仅供参考，您将需要使用这 3 个必需的 jar 文件。

1.  邮件.jar
2.  激活.jar
3.  附加.jar

本[教程](https://androidmads.blogspot.de/2016/06/java-mail-api-using-gmail-oauth-api-in.html)详细说明了它需要如何完成。

[可以在Stackoverflow](https://stackoverflow.com/a/2033124/1021695)上找到有关此主题的更详细讨论

# java - 将文件读入列表？

> ID：10280549
> 
> 赞同：1
> 
> 时间：2012-04-23T12:29:12.127
> 
> 标签：java, list, bufferedreader, hashset

这个问题这次不能解决，因为代码有重大错误，需要在提交问题之前先更正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:35:51.073

代替：

```
if (result = true) 
```

做

```
if (result) 
```

此外，而不是：

```
for (int index = 0; index < lineList.size() - 1; index =+2) 
```

做

```
for (int index = 0; index < lineList.size(); index +=2) 
```

**已编辑：您的 for 声明中有两个问题：**

1.  `index < lineList.size() - 1`不会打到最后一项。删除`- 1`或更改`<`为`<=`
2.  索引不会增加其值。更改`index =+2`为`index +=2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:34:08.687

我能找到的一个明显的错误是：

```
if (result = true) 
```

应该是：

```
if (result == true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:34:15.597

这里有一个问题：

```
 if (result = true) 
```

你可能打算写：

```
 if (result == true) 
```

编写此检查的更好方法是：

```
 if (result) 
```

中也*可能*存在一个错误`index < lineList.size() - 1`。如果文件包含奇数行，您当前的代码将忽略最后一行。我说*可能*，因为在这种情况下你期望发生什么并不完全清楚。

最后，整个事情可以用一个循环而不用列表（即只用集合）来实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T12:38:09.500

您有一个包含两个错误的部分。与我的样本比较：

```
for (int index = 0; index < lineList.size() - 1; index += 2)
  if (usr.add(list.get(index))) System.out.println(list.get(index)); 
```

或者，在另一个成语中：

```
boolean take = true;
for (String line : lineList) {
  if (take) usr.add(line);
  take = !take;
} 
```

# c++ - 模板循环依赖问题

> ID：10280553
> 
> 赞同：1
> 
> 时间：2012-04-23T12:29:33.287
> 
> 标签：c++, templates, circular-dependency

当天的第二个模板问题，多么n00b：

我有一个模板类：

```
template <class T>
class foo{
  private:
     //...
     T SubFoo;
     //...

}; 
```

我还有一个名为 myClass 的类。我想要这样的对象：

```
foo<myClass> myObject; 
```

但是，这就是问题所在，我希望能够从 myObject.SubFoo 中获取指向 myObject 的指针。这意味着类 myClass 的成员之一应该是模板类 foo 的实例化。

所以我可以这样做：

```
class myClass{
   //...
   foo<myClass>* point2myClass;

} 
```

但是，这似乎不起作用，因为

./foo.h:103: 错误: 'foo::SubFoo' 的类型不完整

定义 myClass 时，程序找到该行

```
 foo<myClass>* point2myClass; 
```

它转到 foo 的定义，它发现：

```
 T SubFoo; 
```

但是 T，在这种情况下是 myClass，还没有被定义（这就是程序正在做的事情！），所以它不知道 T 是什么，因此出现了错误。

如果我交换声明的顺序，它也会失败，因为“foo”不会被定义。

我怎样才能使这项工作？

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:36:24.790

以下代码肯定可以正常工作。如果您的代码不同，请指定位置。

```
template < typename T >
struct A
{
    T x;
};

struct X
{
    A<X>* x;
};

int main()
{
    X a;
} 
```

# security - IIS7.0 中 ASP 的应用程序池身份问题

> ID：10280557
> 
> 赞同：0
> 
> 时间：2012-04-23T12:29:39.887
> 
> 标签：security, iis-7, asp-classic

我在 IIS7.0 上使用域用户设置的应用程序池标识运行 asp 时遇到问题。我需要一段代码在浏览器客户端 ID（LOGON_USER 变量）下运行，其余代码在应用程序池标识下运行。有人可以帮我如何为这种情况设置 IIS 吗？

我有一个需要从 LDAP 获取详细信息的登录页面。由于它在应用程序池身份下运行。它获取应用程序池身份的详细信息而不是用户详细信息。有人可以建议我如何配置 IIS7.0 以收回仍在设置为域用户的应用程序池标识下运行的客户端详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:37:02.477

经过两个月的挖掘，找到了一个非常简单的解决方案。1.我的主应用程序在特定用户身份下运行，我保持不变 2.我在 sam 应用程序下添加了一个新的虚拟目录，并将登录页面移动到新的虚拟目录。3\. 此应用程序的物理路径凭据是“通过”。将授权更改为 Windows 身份验证。4\. 成功认证后重定向到我的页面，也需要做最少的代码更改

谢谢大家

# css - 如何在 LessCSS 中动态设置 CSS 类名？

> ID：10280567
> 
> 赞同：7
> 
> 时间：2012-04-23T12:29:58.293
> 
> 标签：css, less

我需要向 CSS 类添加动态名称以创建更具体的后代选择器。

这是我的较少代码：

```
@scope:  name;  //line1
.@scope .ui-widget{  color: #fff} //line2 
```

但是我在第 2 行遇到了解析器错误。

有没有办法在 LessCSS 中动态设置 CSS 类名？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-23T13:18:38.623

在 1.3 版本中添加了对 less.js 和 dotless 的支持

您必须使用方括号和转义字符串.. 例如

```
(~".@{scope} .another") { 
  color: #fff;
} 
```

**编辑**

此格式已弃用。less 1.3.1（目前只是 less.js 的主干构建）支持更简单的语法

```
.@{scope} .another-class {
    color: white;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:00:40.410

尝试以下代码以获得预期的输出

```
@scope:  name;//line1
(~".@{scope} .ui-widget")  {  color: #ffbbff}  //line2 
```

# javascript - jQuery选择动态创建的html元素

> ID：10280569
> 
> 赞同：14
> 
> 时间：2012-04-23T12:29:59.843
> 
> 标签：javascript, jquery, jquery-selectors, dynamically-generated

我的这个问题有很多标题几乎相似的问题，但你知道我没有找到答案。

我的简单问题是：我有按钮，当我点击它时，javascript 创建模态窗口

```
<div class="aui-dialog">
     html here... 
     <button id="closeButton">Close</button>
</div> 
```

就在`<body>`标签之后。**我可以使用 jQuery live**

毫无问题地绑定关闭按钮的单击事件：

 **```
$("#closeButton").live("click", function() { 
    alert("asdf"); // it calls
    $("body").find(".aui-dialog").remove();
}); 
```

**我的问题是**，我无法通过类名选择动态创建的模态窗口 div。这样我就可以调用 jQuery .remove() 方法来进行关闭操作。现在我知道了，我必须以另一种方式处理动态元素。

有什么办法？

**编辑：**
*我认为重要的是要提到这一点：*
我自己不创建模式窗口，我使用[liferay](http://en.wikipedia.org/wiki/Liferay)门户。它具有创建该模式窗口的内置 javascript 框架**AUI** ( [YUI )。](http://ru.wikipedia.org/wiki/Yahoo!_UI_Library)我可以在它的视图中创建它里面的关闭按钮。

**编辑 2：**
模态窗口 div 类属性值为：“ *aui-component aui-panel aui-dialog aui-widget-positioned* ”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-07-01T16:01:15.037

由于 jquery 将在页面加载时读取当前的 DOM 状态：

```
jQuery( document ).ready(function( $ ) { 
```

它会错过您在页面加载后生成的元素。

一种简单的解决方案是监听对文档的点击，并使用要用于执行代码的类或元素类型进行过滤。这样 jquery 将在页面加载后找到在文档下生成的新元素。

```
$(document).on("click", '#closeButton', function(){
$(".aui-dialog").remove();
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-23T12:31:47.067

~~创建模态窗口时创建参考：~~

```
var modalWindow = $('<div class="aui-dialog">html here... <button id="closeButton">Close</button></div>');
// later...
modalWindow.remove(); 
```

**对您的编辑：**

`parent`当按钮位于模态窗口内时，通过 jQuery 获取窗口：

```
$('#closeButton').on('click',function() {
    $(this).parent().remove();
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-23T14:28:21.480

许多用户在想要选择一些由 JQuery 生成的运行时元素时会来到这个页面，但它失败了，就像我一样。
解决方案是简单地接近随机生成元素的根（父），然后通过**jQuery TAG selection**获取内部。例如，您在运行时在表中生成许多用户 TD，具有用户列表的元素是具有 id tblUsers 的表，然后您可以迭代运行时生成的 TR 或 TD，如下所示：

```
$("#tblUsers tr").each(function(i){
    alert('td' + i);
}); 
```

此外，如果您在 tds 中有输入，则可以深入选择

```
$("tblUsers tr td input") 
```

另一种情况可能是随机生成的对话框或弹出窗口，然后您必须通过 TAG 接近其根（父）和下一个相同的选择，如上所述。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T12:40:33.017

您可以做一些事情，但首先，如果您使用的是 jQuery 1.7，最好使用`.on()`. 它已取代`.live()`已弃用的。

如果您无法控制模态的构建，但知道该按钮是模态的直接子级，则使用`parent()`

```
$('#closeButton').on('click',function() {
    $(this).parent().remove();
    return false;
}); 
```

如果按钮位于父级深处，但距父级有固定深度，则使用`parents()`它获取元素的所有祖先，然后将其过滤到特定深度。如果收盘价深 2 级，则指数为`:eq()`1。

```
$('#closeButton').on('click',function() {
    //where N is zero-indexed integer, meaning first item of the set starts with 0
    $(this).parents(':eq(N)').remove(); 
    return false;
}); 
```

另一种方法是在创建模式时添加处理程序

```
var modal = $('modalHTML');

$('#closeButton',modal).on('click',function(){
    //modal still refers to the whole modal html in this scope
    modal.remove();
});

//show modal 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T08:45:24.073

I found an answer, hope it would be helpful for developers who faced with **dynamically** generated html with **IFRAME** inside.

If you have a button (#closeButton) inside that IFRAME, and you want select iframe parent window's dom elements, just add second argument `window.parent.document` for your selector:

```
// This functions is inside generated IFRAME
$("#closeButton").on("click", function() {        
       // body - is your main page body tag
       /* Will alert all html with your dynamically 
          generated html with iframe and etc. */
       alert($('body', window.parent.document).html()); 
       return false;
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T12:40:26.620

**更新：**

您可以使用：

```
$(".aui-dialog").live('click', function() {
    $(this).remove();
    return false;
});) 
```

这将为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。请注意，此方法在较新版本的[jQuery](http://api.jquery.com/live/)中已被贬低，您应该考虑使用`.on()`而不是`.live()`.**

# sql-server - 一张图中的多个数据集

> ID：10280575
> 
> 赞同：-3
> 
> 时间：2012-04-23T12:30:12.617
> 
> 标签：sql-server, reporting-services

我只是想知道是否可以从一个图中的多个数据集创建图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:52:53.707

并不真地。您可以使用一些不同的解决方法，例如`lookup`查询中的函数或联合来解决此问题。

请参阅最近提出的[这个问题。](https://stackoverflow.com/questions/10258227/ssrs-combine-multiple-datasets-into-one-graph)

# nsstring - 使用正则表达式将 NSString 分隔为 NSArrau

> ID：10280576
> 
> 赞同：1
> 
> 时间：2012-04-23T12:30:24.887
> 
> 标签：nsstring, substring, nsregularexpression

我正在尝试将 NSString 分离到 NSArray 中。我总是使用“componentsSeparatedByString”来分隔 NSString。但是这种方法只能得到单个分隔符，也没有任何条件。我想将字符串与“点+空格”、“点+换行”、“点+空”、“！”分开 和 ”？”。我确信这可以用正则表达式完成，但不知道如何：D。我以前从未使用过正则表达式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:30:24.740

You can try the following hope it will work for you

NSString *strTest = @"a.b+c";

```
NSLog(@"seperated  %@", [strTest componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@".+"]]); 
```

# iphone - 切换到 RootViewController

> ID：10280577
> 
> 赞同：0
> 
> 时间：2012-04-23T12:30:26.900
> 
> 标签：iphone, xcode, ipad

我有 2 个不同的 xcode 项目。一个是主应用程序，它已准备好完整的设计等并切换一些屏幕。然后我有一个定位应用程序，可以显示附近的医院等。我想要它做的是，如果我在主应用程序中按下一个按钮，它就会进入定位应用程序。所以我把这两个项目合二为一。终于它工作了，但现在当试图将位置应用程序链接到它工作的按钮时，它没有向我显示全屏。它只是向我展示了一张包含医院、医生等的表格，但我想查看位置应用程序的全屏。我认为它是rootviewcontroller。这是代码：

.h 文件

```
#import <UIKit/UIKit.h>
#import "VacaturesViewController.h"
#import "Over.h"
#import "RootViewController.h"
#import <CoreData/CoreData.h>
#import "NewKeywordViewController.h"

@interface Home : UIViewController {

//UI Button instance variable
UIButton *tweetButton;

}

// Properties
@property (nonatomic, strong) IBOutlet UIButton *tweetButton;

// Methods
-(IBAction)sendTweet:(id)sender;
-(IBAction)vacatures;
-(IBAction)zoeken;
-(IBAction)Over; 
```

和 .m 文件：

```
#import "Home.h"
#import "RootViewController.h"
#import "Reachability.h"
#import "AppDelegate.h"
#import "MapViewController.h"
#import "InfoViewController.h"
#import "Keyword.h"

@interface Home ()

@end

@implementation Home

@synthesize tweetButton;

-(IBAction)vacatures {

    VacaturesViewController *screen = [[VacaturesViewController alloc] initWithNibName:nil       bundle:nil];
screen.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:screen animated:YES];

}

-(IBAction)zoeken {

RootViewController *screen = [[[RootViewController alloc] initWithNibName:nil bundle:nil]   autorelease];
[self presentModalViewController:screen animated:YES];

}

-(IBAction)Over {

Over *screen = [[Over alloc] initWithNibName:nil bundle:nil];
screen.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:screen animated:YES];

}

-(IBAction)sendTweet:(id)sender
{
NSString *tweet = [[NSString alloc] initWithString:@"Door de Thuiszorg applicatie heb ik   altijd de juiste zorg in de buurt! Downloaden dus!"]; // Creates the string that is used for the tweet.
{
    TWTweetComposeViewController *tweeter = [[TWTweetComposeViewController alloc] init];    // Allocates and initialises the Tweet "view".
    [tweeter setInitialText:tweet]; // Sets the text of the tweet to be that of the   NSString *tweet
    [self presentModalViewController:tweeter animated:YES]; //Present the Tweet view to   the user.
}
}

- (void)viewDidLoad
{
[super viewDidLoad];

    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:  (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

我希望你们能帮助我伙计们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:58:25.773

您只需执行此操作即可更改根视图控制器。

```
 Over *screen = [[Over alloc] initWithNibName:@"Over" bundle:nil];
[[AppDelegate application].window.rootViewController = over; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:43:51.310

改变这个

```
-(IBAction)Over {

Over *screen = [[Over alloc] initWithNibName:nil bundle:nil];
screen.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:screen animated:YES];

} 
```

对此

```
-(IBAction)OverView {

Over *screen = [[Over alloc] initWithNibName:nil bundle:nil];
screen.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:screen animated:YES];

} 
```

并将按钮操作连接到与 Over 相对的“OverView”

# objective-c - appendPixelBuffer 为 kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange 返回 NO

> ID：10280586
> 
> 赞同：5
> 
> 时间：2012-04-23T12:30:58.350
> 
> 标签：objective-c, ios, avfoundation, video-processing, avcapturesession

我有以下 AVAssetWriterInputPixelBufferAdaptor：

```
NSMutableDictionary *attributes = [[NSMutableDictionary alloc] init];
[attributes setObject:[NSNumber numberWithUnsignedInt:kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange] forKey:(NSString*)kCVPixelBufferPixelFormatTypeKey];
[attributes setObject:[NSNumber numberWithUnsignedInt:frameSize.width] forKey:(NSString*)kCVPixelBufferWidthKey];
[attributes setObject:[NSNumber numberWithUnsignedInt:frameSize.height] forKey:(NSString*)kCVPixelBufferHeightKey];

adaptor = [AVAssetWriterInputPixelBufferAdaptor assetWriterInputPixelBufferAdaptorWithAssetWriterInput:writerInput   sourcePixelBufferAttributes:attributes]; 
```

我正在尝试使用以下内容附加从 2 个平面（视频格式类型 kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange）创建的像素缓冲区：

```
//Pixel buffer
CVPixelBufferRef buffer = NULL;

/*Pixel options*/
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                       [NSNumber numberWithBool:YES],     kCVPixelBufferCGImageCompatibilityKey,
                       [NSNumber numberWithBool:YES], kCVPixelBufferCGBitmapContextCompatibilityKey,
                       nil]

void* planesAdress[2] = { (void*)firstFrameGray, (void*)firstFrameUV};
size_t planesWitdh[2] = {640, 320};
size_t planesHeight[2] = { 480, 240};
size_t planesBytesPerRow[2] = { 640, 640};

CVReturn retw = CVPixelBufferCreateWithPlanarBytes(kCFAllocatorDefault, 640, 480, kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange, nil, nil, 2,planesAdress, planesWitdh, planesHeight, planesBytesPerRow, NULL, NULL, NULL, &buffer); 
```

此时我可以检查缓冲区不为空并且 CVPixelBufferIsPlanar 为真。

但是每次我尝试附加缓冲区时，它都会为调用返回 NO（此调用仅用于第一帧）

```
[adaptor appendPixelBuffer:buffer withPresentationTime:kCMTimeZero]; 
```

错误是 Error Domain=AVFoundationErrorDomain Code=-11800 "操作无法完成" UserInfo=0x9ad800 {NSLocalizedFailureReason=发生未知错误 (-12780), NSUnderlyingError=0x9aa200 "操作无法完成。(OSStatus 错误 - 12780.)", NSLocalizedDescription=操作无法完成}

# java - Web Service dependencies on another Web Service

> ID：10280594
> 
> 赞同：0
> 
> 时间：2012-04-23T12:31:22.227
> 
> 标签：java, web-services, maven, jboss

I have a web service `WebService1` that is deployed on JBoss (4.2.3.GA).
`WebService1`'s endpoint is `Endpoint1`.

I wrote a `WebService2` which dependends on `WebService1`. When Maven creates the .EAR file, it places the .JAR with `WebService1` in `WebService2`'s .EAR.

So, when I deploy `WebService2` in JBoss I get the exception:

```
Endpoint1 has already registered. 
```

If I remove class with `Endpoint1` from the .JAR in the .EAR, then it's all normally deployed. But I can't remove this class after every project building.
Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:18:22.763

If you have a dependency that you don't want packaged with your maven build, use the "provided" dependency scope like this:

```
<dependency>
  ..
  <scope>provided</scope>
  ..
</dependency> 
```

This will allow Maven to compile the project, but won't include said dependency with the final package. More information [here](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope).

Is this what you were looking for?

# php - 如何获取 mPDF 文档中的页数？

> ID：10280595
> 
> 赞同：24
> 
> 时间：2012-04-23T12:31:25.847
> 
> 标签：php, mpdf

如果使用 mPDF 库的 PDF 文档，有人知道如何获取生成的页数吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-20T04:50:30.737

在使用 EYiiPdf（Yii 上 mPDF 的包装器）时，我一直在寻找相同的功能，下面的工作就像一个魅力：

```
$mPDF->setFooter('{PAGENO} / {nb}'); 
```

我检查了 mPDF 的源代码，并在 mpdf.php:1656（5.4 版）找到了这个：

```
function AliasNbPages($alias='{nb}') {
    //Define an alias for total number of pages
    $this->aliasNbPg=$alias;
} 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-10-21T13:29:11.107

您可以使用**{nbpg}**，例如

```
<div align="center"><b>{PAGENO} / {nbpg}</b></div> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-28T16:01:40.267

如果您尝试返回页数，以便可以将其保存到数据库或 mpdf 之外的其他操作，则很容易以这种方式提取它。

编写内容后：

```
$mpdf->WriteHTML($html);
$page_count = $mpdf -> page;

$mpdf->Output(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-26T06:39:21.733

将此添加到主 mPDF 类：

```
function getPageCount() {
    return count($this->pages);
} 
```

然后添加一个 html-parser 这样的字符串：

```
$html = str_replace('{PAGECNT}', $this->getPageCount(), $html); 
```

在这些操作之后，您可以直接在解析的 HTML 中插入 {PAGECNT} 以获得结果。如果您需要指示页面，这很有用：

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-06-24T08:02:45.763

*   总数的替换别名**{nb}**和**{nbpg}**
*   **{PAGENO}**表示当前页码

**更新**

请注意，这个答案是指 mdf library v4，这是撰写本文时的当前版本。

@aiao 的最小工作示例

```
<?php 
$pagenumber= '<!--mpdf Page {PAGENO} of {nbpg}mpdf--> $mpdf->WriteHTML($pagenumber); 
$mpdf->Output();
?> 

<?php 
$pagenumber= '<!--mpdf Page {PAGENO} of {nbpg}mpdf--> $mpdf->WriteHTML($pagenumber); 
$mpdf->Output();
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-06T10:16:42.630

注意线路：

`preg_replace('/\{DATE\s+(.*?)\}/e',"date('\\1')",$hd);`

在 mpdf.php 函数 Footer() 中可能会导致你的“{PAGENO} / {nb}”不显示。只需将其注释掉或用于`strpos('{DATE' > -1)`检查它是否可用。此外，您可能需要添加：

`$mpdf->ignore_invalid_utf8 = true;`

如果你不想要页脚行：

```
$mpdf->defaultfooterline = false; 
```

在这些更改之后，分页终于为我工作了。

# jquery - 单击链接时禁用滚动

> ID：10280599
> 
> 赞同：9
> 
> 时间：2012-04-23T12:31:37.263
> 
> 标签：jquery, html, css

我有以下 HTML 标记，它只是三个选项卡，单击时会在页面上的 div 中显示预加载的文本，

```
 <a class="page" id="tab1">This is tab!</a> 
    <a class="page" id="tab2">This is tab 2!</a> 
    <a class="page" id="tab3">This is tab3!</a> 
```

当单击其中一个选项卡时，此 jQuery 只是隐藏或显示文本，

```
$(document).ready(function() { 
   $(".page").hide(); 
   $("#tab1").show(); 
}); 
$(".page").click(function() { 
   var id = $(this).attr("href"); 
   $(".page").hide();
   $(id).show(); 
}); 
```

但是，如果当我单击其中一个选项卡时出现页面溢出（即页面可滚动），页面会自动滚动以使 div 在视口中居中。如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T12:36:32.467

为了防止**页面滚动点击**（跟随锚散列）使用：[**Event.preventDefault()**](https://developer.mozilla.org/en/docs/Web/API/Event/preventDefault)

```
$(".page").click(function( evt ) {

   evt.preventDefault();       // prevents browser's default anchor behavior

   // Other code here....
   $(".page").hide();            // HIDE ALL     .page
   $("."+ this.id ).show();      // SHOW RELATED .(id)
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-23T12:35:12.043

```
 <a href="#" class="page" id="tab1" onclick="return false;">This is tab!</a> 
```

添加`return false`到所有锚点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:38:20.593

这是带有散列的链接的默认行为。您想要的是防止默认浏览器行为，因此您应该使用该`event.preventDefault`方法

```
$(".page").click(function( event ) { 
   var $el = $(this), id = $el.attr( "href" ); 
   $(".page").hide();
   $el.show(); 
   event.preventDefault();
}); 
```

# android - 显示和滚动大布局

> ID：10280604
> 
> 赞同：0
> 
> 时间：2012-04-23T12:31:51.230
> 
> 标签：android, android-layout

如果有人可以建议如何解决问题，将不胜感激。

我要画一个大而复杂的结构（铁轨布局）。为了平滑滚动，我想将布局绘制成位图，然后在 onDraw 方法中将必要的部分复制到屏幕画布中。

问题是布局远大于 2048x2048（我的 Asus Prime 上允许的最大纹理大小）并且我得到“位图太大而无法上传到纹理中”。这甚至没有缩放。

布局只是一组二维几何图元，所以也许可以在几何而不是位图级别上工作，但是如何实现平滑滚动和缩放呢？

解决这个问题的常用方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:35:35.890

您应该使用平铺方法。将大地图分成小地图，并在移动时渲染它们。就像谷歌地图一样。

您可以使用 TMX 格式： http: [//www.mapeditor.org/](http://www.mapeditor.org/)

AndEngine [http://www.andengine.org/](http://www.andengine.org/)有一个实现。

# c# - “java.exe”不是内部或外部命令、可运行程序或批处理文件

> ID：10280607
> 
> 赞同：1
> 
> 时间：2012-04-23T12:32:08.433
> 
> 标签：c#, java, ant, cmd

我正在编写一个应用程序，它使用 C# 中的 Process 对象通过带有 cmd.exe 的 ant 批处理文件创建 Java portlet。

当我将“创建”命令传递给 cmd 以创建 portlet 时，我收到如下错误：

```
'"java.exe"' is not recognized as an internal or external command,
operable program or batch file. 
```

但是当我直接在 cmd 上输入这个命令时，它可以正常工作。

我已经在我的 Windows 7 上安装了 JDK，并在环境变量中设置了 JAVA_HOME 和 ANT_HOME 变量。你能帮我纠正一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T12:36:24.477

你应该检查你的 PATH 变量。您可以使用该`set`命令为您的 java 环境文件夹设置正确的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T20:22:59.730

我不知道这是否会帮助其他正在查看这篇文章的人，但是当我遇到这个问题时，这是因为我正在运行 x64 机器并且 java.exe 安装到 ProgramFiles(x86) 文件夹中。我只是将 exe 的路径添加到“PATH”环境变量中，然后它就可以正常启动了。

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T14:47:04.013

In my experience, this problem had nothing to do with Java path. Actually I had installed java for 64 bit machine and had compiled my C# program with 32 bit settings. Calling a 64Bit program was not possible from a 32bit program. So i changed my Target platform to **"Any CPU"** and it worked fine.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T12:34:48.033

尝试正确设置 tha java 路径

你能给我你得到的确切错误信息吗...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-20T15:40:16.680

我有同样的问题并解决了它。我正在使用带有 64 位 Java 的 64 位 Windows 7。将配置管理器中的编译目标设置为“x64”解决了这个问题。如果您使用“任何 CPU”，则构建可能会退回到“x86”，这不适用于 64 位 Java。因此，您需要针对不同的机器进行不同的构建...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-02T11:04:07.230

如果您的 PATH 变量中有多个值，请确保它们没有在结尾分号 (;) 后面用空格分隔

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-30T09:22:08.727

我也遇到了同样的问题并找到了我的解决方案。它也可能对你有帮助。

1.  设置 PATH 变量。我不知道这一步是否需要，但我只是在 TEMP 变量中添加了 java.exe 的路径。
2.  在命令提示符下将当前目录更改为 java.exe 父目录。
3.  现在跑到我需要的命令。如果命令中引用了某个文件，那么我输入完整路径。

希望它可以帮助你。

# c# - 读取 4 位而不丢失信息

> ID：10280609
> 
> 赞同：0
> 
> 时间：2012-04-23T12:32:22.887
> 
> 标签：c#, stream, bits

我遇到了一个我似乎无法解决的问题。我有一种文件“ASDF”，在它们的标题中我可以获得必要的信息来阅读它们。问题是“字段”之一只有 4 位长。

所以，假设它是这样的：

*   从第 0 位到第 8 位是当前节点的索引（我已经读过这个）
*   从 8 到 16 它是下一个节点的索引（也请阅读此内容）
*   从位 16 到 20 内容的长度（字符串等）

所以我的问题是，如果我尝试用字节阅读器读取“长度”，我将丢失 4 位信息，或者会“丢失 4 位”。有没有办法只读取 4 位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:36:08.733

您应该在读取其他字节时读取此字节，然后应用 0x0F 位掩码

例如

```
byte result = (byte)(byteRead & 0x0F); 
```

这将保留结果中的低四位。

如果需要的位是高四位，那么您可以应用移位运算符

```
byte result = (byte)((byteRead & 0x0F) >> 5); 
```

# entity-framework - 将弱关系映射到 ORM

> ID：10280614
> 
> 赞同：0
> 
> 时间：2012-04-23T12:32:42.140
> 
> 标签：entity-framework, nhibernate, orm

考虑这 3 个表：

```
Client
  - Id

Product
  - Id

Invoice_Row
  - Id
  - LinkedObjectId
  - LinkedObjectType 
```

Invoice_row 使用 LinkedObjectId 和 LinkedObjectType 字段引用上面的表格，例如：

```
Invoice_row ID = 1
  - LinkedObjectId = 1 (meaning product id = 1)
  - LinkedObjectType = 'Product'

Invoice_row  ID = 2
  - LinkedObjectId = 1 (meaning client id = 1)
  - LinkedObjectType = 'Client' 
```

如您所见，invoice_row 对另外两个表有一个动态键（意味着它实际上不是键）。它通过首先查看 LinkedObjectType（要引用哪个表）然后通过 LinkedObjectId（引用表中的特定 ID）来引用其他两个表。

是的，我知道这很糟糕，但这是我必须使用的遗留数据模型。

有什么办法可以以正常方式（使用 NH 或 EF）以某种方式映射，如下所示：

```
Client
    Invoice_Rows
Product
    Invoice_Rows 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:53:08.527

在 NHibernate 中（使用 Fluentmapping）

```
class Invoice
{
    public virtual IHasInvoices Owner { get; set; }
    // or
    public virtual object Owner { get; set; }
}

// in InvoiceMap
ReferencesAny(x => x.Owner)
    .EntityIdentifierColumn("LinkedObjectId")
    .EntityTypeColumn("LinkedObjectType")
    .IdentityType<long>()
    .AddMetaValue<Product>("product")
    .AddMetaValue<Client>("client"); 
```

那么您可以将其用作简单关联（除了您只能设置映射实体）

# java - 从图片中获取像素颜色？

> ID：10280615
> 
> 赞同：0
> 
> 时间：2012-04-23T12:32:45.240
> 
> 标签：java, android, bitmap

我想将图片具有的所有像素放入数组中。

要得到这样的东西：

```
($FFFFFF, $FFFFF0, $F2FF4F ..................) 
```

我从哪里开始？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:35:08.743

如果你正在使用`Bitmap` [`getPixels()`](http://developer.android.com/reference/android/graphics/Bitmap.html#getPixels%28int%5B%5D,%20int,%20int,%20int,%20int,%20int,%20int%29)是要走的路。

# eclipse - EGit 和提交后挂钩

> ID：10280616
> 
> 赞同：2
> 
> 时间：2012-04-23T12:32:57.270
> 
> 标签：eclipse, git, hook

[这是我在https://stackoverflow.com/questions/10226287/jenkins-git-and-eclipse](https://stackoverflow.com/questions/6232026/egit-hooks-do-not-get-triggered)上的问题的后续

我正在尝试运行一个提交后挂钩，它将调用 Jenkins 构建。我可以创建钩子，将它放在我的本地 Git（即不是 EGit）*钩子*目录中，它可以按预期工作。但是，我更喜欢在我的 EGit 环境中运行该钩子，因为我不希望管理两个 Git 环境的复杂性。但是，我无法确定应该将钩子放在哪里才能被 EGit 拾取 - 有什么想法吗？

==================

回答我自己的问题 - 似乎 EGit 不能这样做 - 见[这里](https://stackoverflow.com/questions/10226287/jenkins-git-and-eclipse)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:42:39.177

如果您只想让提交启动 jenkins 构建，那么只需配置 jenkins 作业以轮询 git 存储库并在发现更改（=新提交）时启动构建。

# c# - C# Chart Control 系列被自定义标签覆盖

> ID：10280617
> 
> 赞同：0
> 
> 时间：2012-04-23T12:32:59.123
> 
> 标签：c#, microsoft-chart-controls

我正在使用 C# 图表控件来绘制奈奎斯特图。现在我希望每次用户在曲线上移动鼠标时数据点都会出现在曲线上。所以我在 GetToolTipText 事件中使用了命中测试方法。

```
private void BodePlot_GetToolTipText(object sender, ToolTipEventArgs e)
        {
            HitTestResult result = BodePlot.HitTest(e.X, e.Y);
            selectDataPoint = null;

            if (result.ChartElementType == ChartElementType.DataPoint)
                {
                    selectDataPoint = (DataPoint)result.Object;
                    e.Text = selectDataPoint.ToString();
                }
         { 
```

问题只是曲线的一部分显示值，其他部分不显示。当我`e.Text = result.Object.ToString();`用来获取鼠标指向的对象时，我发现了：

![在此处输入图像描述](../Images/5862b54694697060770d53176b786e78.png)

工具提示上的文本不显示数据点，而是显示自定义标签。所以我猜原因是曲线被 x 和 y 轴的标签覆盖。

我找到的唯一解决方案是禁用 x 和 y 轴，这样一切正常。但我想保留这些轴，所以我怎样才能让这些标签隐藏在曲线下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:28:59.883

您的分析可能是正确的。解决此问题的方法是为 HitTest() 提供可选的第三个参数，该参数定义所需的元素类型。

```
public HitTestResult HitTest (
int x,
int y,
ChartElementType requestedElement
) 
```

即使其他元素与它们重叠，这也应该返回基础数据点。

# r - R“每个文件多个数据集”

> ID：10280618
> 
> 赞同：1
> 
> 时间：2012-04-23T12:33:19.400
> 
> 标签：r, dataset

我有一个如下数据集：

```
0 0 0
0 0 0

54077 184965 81.25
54266 184776 81.25

65130 199986 82.1705426356589
65513 199600 82.1705426356589

```

这些数据由 2 个空白行分隔。因此，当我使用 gnuplot 绘制点图时，他们会认为这些是一个文件中的单独数据。如何在 R 中做同样的事情？因为对于每个这样的数据集，我将有两个点通过线连接。（例如，[5077,184965] 连接到 [54266, 199600]）

比你好多了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:37:45.310

两个想法：

1.  如果它们都采用相同的格式，则将/的`blank.lines.skip`参数设置为 FALSE 而不是其默认的 TRUE。然后你会得到一个 data.frame，里面有你可以分割的空行。`read.table``read.csv`

2.  如果它们的格式不同，那么您可以使用`skip`这些相同命令的参数来仅提取输入文件的某些行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T12:40:59.503

最坏的情况，您必须使用 n=1 的 readLines 一次读取一行，使用 strsplit 拆分，并收集列表中的每个数据集，在开始列表的新元素之前查找分隔符（空白行） .

但是你只需要在 gsk3 的解决方案失败的情况下这样做，因为你的数据集有点非结构化......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:09:50.850

也可以将文件读入内存，

```
> buffer <- readLines ("tmp/file")
> buffer
 [1] "0 0 0"                         "0 0 0"                        
 [3] ""                              ""                             
 [5] "54077 184965 81.25"            "54266 184776 81.25"           
 [7] ""                              ""                             
 [9] "65130 199986 82.1705426356589" "65513 199600 82.1705426356589" 
```

删除或处理（例如导出测量编号、数据集名称……）所有不属于数据表文件部分的行：

```
> buffer <- buffer [nzchar (buffer) > 0L]
> buffer
[1] "0 0 0"                         "0 0 0"                        
[3] "54077 184965 81.25"            "54266 184776 81.25"           
[5] "65130 199986 82.1705426356589" "65513 199600 82.1705426356589" 
```

最后`read.table`在修改后的缓冲区上使用：

```
> read.table (textConnection (buffer))
     V1     V2       V3
1     0      0  0.00000
2     0      0  0.00000
3 54077 184965 81.25000
4 54266 184776 81.25000
5 65130 199986 82.17054
6 65513 199600 82.17054 
```

# cakephp - CakePHP：在另一个项目中建立一个新项目

> ID：10280621
> 
> 赞同：0
> 
> 时间：2012-04-23T12:33:28.287
> 
> 标签：cakephp

我已经将主页复制到服务器，在 1&1 出现一些问题之后，如果这很重要，我已经更改了根目录、/app 和 /app/webroot 目录中的 .htaccess。后

```
RewriteEngine on 
```

我已经包括

```
RewriteBase / 
```

让它工作。但是，除了主页本身之外，我还通过在“Administration”文件夹中添加一个新的 CakePHP 项目来进行管理，我只是将它复制到根目录中。与 XAMPP 完美配合，但不幸的是，不适用于 1&1-server。我也尝试将它复制到应用程序文件夹中，但访问 example.com/Administration 只会给我一个错误，即找不到控制器。

有什么想法可以访问我的管理吗？

# jquery - 有没有办法从 jQuery 事件中获取返回值？

> ID：10280622
> 
> 赞同：2
> 
> 时间：2012-04-23T12:33:30.470
> 
> 标签：jquery, anonymous-function

我有这个代码来验证一个字段是否为空。它通过匿名函数绑定到输入的模糊事件中。

```
isValidText = function(){        
    if ($(this).val().trim() == ""){
        //some code here
        return false;
    }
    //some code here
    return true;
}

$("#someElement").blur(isValidText); 
```

在某个时刻，我想从绑定函数中获取返回值，执行如下操作：

```
//this return a jQuery object
var isValid = $("#someElement").blur(); 
//but I want the boolean from the isValidText 
```

这是不可能的，因为该`blur()`方法返回一个 jQuery 对象而不是`isValidText`函数的返回值。

我的问题是，是否有办法从`isValidText`模糊事件内部的绑定中获取返回值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:38:31.187

```
$("#someElement").blur(function() {
   var ret = isValidText.call(this); 
}); 
```

或者

```
$("#someElement").blur(function() {
   var ret = isValidText.apply(this, arguments); // if you work with some hadler
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:48:19.477

您可以使用 codeparadox 解决方案，或者您可以在 #someElement 上添加 HTML5 数据属性并查看：

```
isValidText = function(){ 
    var $this = $(this);
    $this.data("isValid", !($this.val().trim() === ""));
}
$("#someElement").blur(isValidText);

/* Further down when you want to check if its valid or not */
if(!$("#someElement").data("isValid")) { 
   alert('someElement is not valid!') ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T13:04:52.123

我会这样做

```
var isValid;

isValidText = function(valueToCheck){        
    if ($.trim(valueToCheck) == ""){
        //some code here
        return false;
    }
    //some code here
    return true;
}

$("#someElement").on('blur', function() {
    isValid=isValidText(this.value);
    //or just : 
    if (isValidText(this.value)) {
        //do something
    }
}); 
```

[小提琴](http://jsfiddle.net/adeneo/MpkPg/)

# ruby-on-rails - 从其他表中排除行

> ID：10280625
> 
> 赞同：-1
> 
> 时间：2012-04-23T12:33:44.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有 2 个模型：

```
Subscriber
  - id
  - name:string
  - email:string

Submission
  - id
  - name:string
  - email:string
  - path:string
  - ip:string 
```

他们没有任何关系。

我想从订阅者中选择所有行，并排除在提交表中插入电子邮件地址的行，其中 url 等于“某些/路径”。

使用 Rails 完成此任务的最优雅方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:05:40.983

我真的不明白你的意思：url等于'some/path'但我想你可以把它作为一个额外的条件添加......

如果你用一个普通的嵌套查询来解决它，你会得到：

```
 SELECT *  
 FROM subscribers 
 WHERE email NOT IN (Select email FROM Submission) 
```

所以在活动记录中，这将是：

```
 subscribers.all(:conditions => ["email NOT IN (SELECT email from Submission)"]) 
```

如果您不喜欢编写嵌套选择查询，您也可以这样做：

```
 emails = Submission.all
 subscribers.all(:conditions => ["email not in (?)", emails]) 
```

我没有测试它，但它应该是这样的。

# asp.net - 如何为 radsocialshare facebook 按钮创建动态 url？

> ID：10280626
> 
> 赞同：1
> 
> 时间：2012-04-23T12:33:50.773
> 
> 标签：asp.net, vb.net, visual-studio-2008, telerik, rad

如何为 radsocialshare facebook 按钮创建动态 url？

我在 radgrid 项目中有一个 radsocialshare facebook like 按钮，当我单击 radgrid 项目的点赞按钮时，项目 url 将在 facebook 中共享为 ~/page.aspx?id=1

注意：ID 将根据 radgrid 项目自动生成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-31T19:52:17.033

在 radgrid 的 ItemCreated 事件中，您可以像这样设置 UrlToShare 属性：

```
 Protected Sub RadGrid1_ItemCreated(sender As Object, e As GridItemEventArgs) Handles RadGrid1.ItemCreated
        Dim RadSocialShare1 As RadSocialShare = e.Item.FindControl("RadSocialShare1")
        If RadSocialShare1 IsNot Nothing Then
            'In this example, "ID" is a field in the data bound to the radgrid
            Dim myID as string = DataBinder.Eval(e.Item.DataItem, "ID")

            'Now Make the Url
            Dim myUrl as string = "~/page.aspx?id=" & myID

            RadSocialShare1.UrlToShare = myUrl
        End If
    End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:07:15.323

如果您只有一个实例，可以绑定控件的[UrlToShare](http://www.telerik.com/help/aspnet-ajax/socialshare-controlling-posts-content-and-title.html)属性（例如在 ItemDataBound 事件中），这更容易，或者[在客户端上设置它](http://www.telerik.com/help/aspnet-ajax/socialshare-client-side-change-shared-strings.html)（在这种情况下，您不能使用 ~/ 作为根，您需要一个客户端可用的 URL）高于/低于网格。

# c - ld 抱怨：在函数“_start”中，未定义对“__libc_csu_fini”和“__libc_csu_init”的引用

> ID：10280631
> 
> 赞同：1
> 
> 时间：2012-04-23T12:34:09.200
> 
> 标签：c, gtk, ld

我使用 clang 而不是 gcc 编译了一个 GTK+ 程序。到目前为止一切顺利，除了我无法正确链接*ld*。

调用 gcc 的原始 makefile 进行链接，如下所示：

> gcc -g -O2 -export-dynamic -o my_application somefile.o another.o -pthread -lgnomeui-2 -lSM -lICE -lbonoboui-2 -lgnomevfs-2 -lgnomecanvas-2 -lgnome-2 -lpopt -lbonobo-2 -lbonobo-激活 -lORBit-2 -lart_lgpl_2 -lgconf-2 -lglade-2.0 -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgio-2.0 -lpangoft2-1.0 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lcairo -lpango-1.0 -lfreetype -lfontconfig -lgobject-2.0 -lgmodule-2.0 -lgthread-2.0 -lrt -lglib-2.0 -lxml2 -pthread -lgstreamer-0.10 -lgobject-2.0 -lgmodule-2.0 -lxml2 -lgthread-2.0 -lrt -lglib-2.0

如果我在上面的命令中简单地用*clang替换**gcc*，我会从后者那里得到这个警告：

 *> 叮当声：警告：编译期间未使用的参数：'-e xport-dynamic'

问题是：clang 不将“-export-dynamic”识别为链接器选项，因此它不会将其传递给*ld*。这会导致对外部函数的引用被废弃：执行最终二进制文件时，菜单选项和按钮都没有反应。

如果我使用 gcc 进行最后的链接步骤，则二进制文件可以完美运行（即使它确实是用 clang 编译的，而 gcc 只进行链接）。由于我试图在我的机器中用 clang 完全替换 gcc，这是不可接受的。

所以我尝试了这个：

> ld /usr/lib/crt1.o /usr/lib/crti.o /usr/lib/crtn.o -g -O2 -export-dynamic my_application somefile.o another.o -o -lgnomeui-2 -lSM -lICE -lbonoboui-2 -lgnomevfs-2 -lgnomecanvas-2 -lgnome-2 -lpopt -lbonobo-2 -lbonobo-activation -lORBit-2 -lart_lgpl_2 -lgconf-2 -lglade-2.0 -lgtk-x11-2.0 -lgdk-x11 -2.0 -latk-1.0 -lgio-2.0 -lpangoft2-1.0 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lcairo -lpango-1.0 -lfreetype -lfontconfig -lgobject-2.0 -lgmodule-2.0 -lgthread-2.0 -lrt -lglib-2.0 -lxml2 -lgstreamer-0.10 -lgobject-2.0 -lgmodule-2.0 -lxml2 -lgthread-2.0 -lrt -lglib-2.0

通过添加前 3 个对象，我避免了“找不到 _start”消息。但是后来我收到了上述两个抱怨：

> /usr/lib/crt1.o: 在函数中`_start`: (.text+0x12): 未定义的引用`__libc_csu_fini` /usr/lib/crt1.o: 在函数中`_start`: (.text+0x19): 未定义的引用`__libc_csu_init`

我尝试在列表中添加 crtbegin.o 和 crtend.o ，甚至在 crt1.o 之前*，*但无济于事。链接器的正确调用是什么？

（编辑后）：如果没有其他方法，有没有办法在使用*gcc*进行链接时捕获*gcc*传递给*ld*的确切参数？

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:38:50.173

`gcc`自动将语言支持库和对象添加到您提供的链接列表中。如果您想直接调用，您必须自己添加它们`ld`。举个例子`man ld`，它可能是

```
ld -o <output> /lib/crt0.o hello.o -lc 
```

尝试添加`-lc`，您需要的符号应该在其中（至少在我的系统上是这样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:11:19.423

您可以使用`-Wl,-export-dynamic`to 传递`-export-dynamic`给 ld 而无需铿锵知道它。**

# svn - Tortoise SVN 使用 Active 更新工作副本

> ID：10280633
> 
> 赞同：1
> 
> 时间：2012-04-23T12:34:12.087
> 
> 标签：svn, tortoisesvn

在我的 SVN 存储库浏览器中，我有多个项目（文件夹）。我有两个很重要，第一个是 CM_Active，它对应于我的 Active 项目。这是正在运行的项目。我也有与我的工作项目相对应的 CM_Working。我对我的活动副本进行了更改，如何复制活动更改以更新我的工作副本？我是 SVN 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:43:16.923

使用 TortoiseSVN - 打开包含工作副本的文件夹，选择所有文件，右键单击并选择“SVN 更新”。

通过 CLI - 使用命令`svn update PATH`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:57:45.727

我建议阅读[带有 Subversion 的版本控制](http://svnbook.red-bean.com/en/1.7/index.html)一书。

如果 Active 是 Working 的一个分支，你应该使用[merge](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html)。如果 Active 不是 Working the 的一个分支，我强烈建议将其设为一个分支，因为这样更容易管理，因为这样更容易准确地看到自上次合并以来发生的变化。

TortoiseSVN 文档在[这里](http://tortoisesvn.net/docs/release/TortoiseSVN_en/index.html)，关于合并的文档在[这里](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-merge.html)。

# django - Django 聚合 - 两个总和的总和

> ID：10280636
> 
> 赞同：0
> 
> 时间：2012-04-23T12:34:16.957
> 
> 标签：django, models, django-aggregation

假设我们有以下两个模型：

```
class Player(Model):
    alliance = ForeignKey("Alliance")
    points = PositiveIntegerField()

class Alliance(Model):
    points = PositiveIntegerField() 
```

每个玩家和每个联盟都有特定数量的积分。总联盟点数`alliance.points + Sum(player_set__points)`。

我想要做的是获取按总点数排序的所有联盟。问题是我似乎无法在聚合中进行 Sum + Sum。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:03:43.077

您可以非规范化您的数据库。`sum`在 an 上添加一个字段，在和上`Alliance`更新它和。因此，您将拥有即用型价值并轻松对其进行分类。`post_save``post_delete``Alliance``Player`

# java - 用于所有 UTF-8 字符的 Java 中的 Vigenère 密码

> ID：10280637
> 
> 赞同：3
> 
> 时间：2012-04-23T12:34:20.727
> 
> 标签：java, encryption, cryptography, vigenere

我有这个简单的函数，用于通过 Java 中的 Vigenère 加密字符串。我省略了解密，因为这只是计算新值的行中的“-”而不是“+”。

但此功能仅适用于普通字母 AZ。如何更改函数以使其支持小写字母、大写字母和所有其他 UTF-8 字符？

```
public static String vigenere_encrypt(String plaintext, String key) {
    String encryptedText = "";
    for (int i = 0, j = 0; i < plaintext.length(); i++, j++) {
        if (j == key.length()) { j = 0; } // use key again if end reached
        encryptedText += (char) ((plaintext.charAt(i)+key.charAt(j)-130)%26 + 65);
    }
    return encryptedText;
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T21:17:24.220

好吧，你要求它，我感到很困惑，但是打印出密文，你就会知道你刚才要求的是什么......

```
public static String vigenereUNICODE(String plaintext, String key, boolean encrypt) {

    final int textSize = plaintext.length();
    final int keySize = key.length();

    final StringBuilder encryptedText = new StringBuilder(textSize);
    for (int i = 0; i < textSize; i++) {
        final int plainNR = plaintext.codePointAt(i);
        final int keyNR = key.codePointAt(i % keySize);

        final long cipherNR;
        if (encrypt) {
            cipherNR = ((long) plainNR + (long) keyNR) & 0xFFFFFFFFL;
        } else {
            cipherNR = ((long) plainNR - (long) keyNR) & 0xFFFFFFFFL;
        }

        encryptedText.appendCodePoint((int) cipherNR);
    }

    return encryptedText.toString();
} 
```

编辑：请不要在生产代码*中*使用，因为我不知道代码点是否确实可以编码/解码。据我所知，并不是所有的点都被定义了，标准是一个移动的目标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T23:39:54.687

如果不可能完全支持 unicode 并且您必须定义有效字符列表，那么为什么不直接使用这样的函数呢？

```
public static String vigenere_cipher(String plaintext, String key, boolean encrypt) {

    String alphabet = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ ,.-"; // including some special chars
    final int alphabetSize = alphabet.length();
    final int textSize = plaintext.length();
    final int keySize = key.length();
    final StringBuilder encryptedText = new StringBuilder(textSize);

    for (int i = 0; i < textSize; i++) {
        final char plainChar = plaintext.charAt(i); // get the current character to be shifted
        final char keyChar = key.charAt(i % keySize); // use key again if the end is reached
        final int plainPos = alphabet.indexOf(plainChar); // plain character's position in alphabet string
        if (plainPos == -1) { // if character not in alphabet just append unshifted one to the result text
            encryptedText.append(plainChar);
        }
        else { // if character is in alphabet shift it and append the new character to the result text
            final int keyPos = alphabet.indexOf(keyChar); // key character's position in alphabet string
            if (encrypt) { // encrypt the input text
                encryptedText.append(alphabet.charAt((plainPos+keyPos) % alphabetSize));
            }
            else { // decrypt the input text
                int shiftedPos = plainPos-keyPos;
                if (shiftedPos < 0) { // negative numbers cannot be handled with modulo
                    shiftedPos += alphabetSize;
                }
                encryptedText.append(alphabet.charAt(shiftedPos));
            }
        }
    }

    return encryptedText.toString();

} 
```

这应该是一个非常简短且有效的版本。并且字母表可以很容易地存储在一个始终可以扩展的字符串中（这会导致不同的密文）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T22:41:01.127

另一个答案，它确实对大小写字符执行 Vigenere 密码，只需插入其他字符。使用此技术创建多组字符进行编码。

```
public static String vigenere(String plaintext, String key, boolean encrypt) {

    final int textSize = plaintext.length();
    final int keySize = key.length();

    final int groupSize1 = 'Z' - 'A' + 1; 
    final int groupSize2 = 'z' - 'a' + 1;
    final int totalGroupSize = groupSize1 + groupSize2;

    final StringBuilder encryptedText = new StringBuilder(textSize);
    for (int i = 0; i < textSize; i++) {
        final char plainChar = plaintext.charAt(i);

        // this should be a method, called for both the plain text as well as the key
        final int plainGroupNumber; 
        if (plainChar >= 'A' && plainChar <= 'Z') {
            plainGroupNumber = plainChar - 'A';
        } else if (plainChar >= 'a' && plainChar <= 'z') {
            plainGroupNumber = groupSize1 + plainChar - 'a';
        } else {
            // simply leave spaces and other characters
            encryptedText.append(plainChar);
            continue;
        }

        final char keyChar = key.charAt(i % keySize);
        final int keyGroupNumber; 
        if (keyChar >= 'A' && keyChar <= 'Z') {
            keyGroupNumber = keyChar - 'A';
        } else if (keyChar >= 'a' && keyChar <= 'z') {
            keyGroupNumber = groupSize1 + keyChar - 'a';
        } else {
            throw new IllegalStateException("Invalid character in key");
        }

        // this should be a separate method
        final int cipherGroupNumber;
        if (encrypt) {
            cipherGroupNumber = (plainGroupNumber + keyGroupNumber) % totalGroupSize;
        } else {
            // some code to go around the awkward way of handling % in Java for negative numbers
            final int someCipherGroupNumber = plainGroupNumber - keyGroupNumber;
            if (someCipherGroupNumber < 0) {
                cipherGroupNumber = (someCipherGroupNumber + totalGroupSize);
            } else {
                cipherGroupNumber = someCipherGroupNumber;
            }
        }

        // this should be a separate method
        final char cipherChar;
        if (cipherGroupNumber < groupSize1) {
            cipherChar = (char) ('A' + cipherGroupNumber);
        } else {
            cipherChar = (char) ('a' + cipherGroupNumber - groupSize1);
        }
        encryptedText.append(cipherChar);
    }

    return encryptedText.toString();
} 
```

同样，这是不安全的代码，因为使用的密码已被破解多年。不要在你的键中使用太多的“A”字符:) 但是字符编码应该是正确的。

# ruby-on-rails - 指定 gem 版本还是始终使用最新版本？

> ID：10280642
> 
> 赞同：3
> 
> 时间：2012-04-23T12:34:31.493
> 
> 标签：ruby-on-rails, ruby, gem

我在业余时间编写了一个 RoR webapp。像任何人一样（我猜），我使用宝石（大约 20 个）。

有几次，我在生产环境中部署应用程序时出错，因为我没有为我的所有 gem 指定确切的版本，所以其中一些被更新了，这导致了错误。

我担心我的所有宝石都停留在特定版本中，当我**需要**更新其中的一个（或一些）时，整个事情都会崩溃（我在制作用于飞行狮身人面像和推特的宝石时遇到了问题）更新）。

我的问题是：兼职编码员是否应该一次性修复所使用的 gems 的所有版本，还是值得花时间检查每个更新？你如何管理你的 Gemfile ？

另外我认为，当您全职时，您应该始终保持最新状态（安全性、性能），但这是真的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T13:17:55.640

我主要坚持这种版本规范：

```
gem "blah", "~> 1.4.2" 
```

这意味着版本号`>= 1.4.2`，但`< 1.5.0`

大多数 gems 都遵循语义版本控制方案，或者至少只在进行版本跳转时破坏内容。这样，我就“安全”了，但仍然得到了好的部分（错误修复等）。

锁定确切的版本号是背后的想法`Gemfile.lock`，所以我也将其检查到版本控制中。到目前为止，这种方法对我来说非常有效，而且我从来没有遇到过这种方法的问题。

# javascript - 谷歌分析和三星智能电视应用

> ID：10280646
> 
> 赞同：6
> 
> 时间：2012-04-23T12:34:47.283
> 
> 标签：javascript, google-analytics, analytics, samsung-smart-tv

我正在尝试将 Google Analytics 集成到我的智能电视应用程序中。

它是一个基于 Javascript 的应用程序，我已经尝试了 SamsungDForum 上提供的所有解决方案，但没有一个有效。

在主 index.html 文件的一部分中，我加载了 Google Analytics：

```
<script type='text/javascript' async='true' src='https://ssl.google-analytics.com/ga.js'></script> 
```

然后，我正在跟踪页面入口：

```
<script type='text/javascript'>
    var _gaq = _gaq || [];
    _gaq.push([ '_setAccount', 'UA-XXXXXXXX-X' ]);
    _gaq.push([ '_setCustomVar', 1, 'Device Information', 'Samsung Smart TV' ]);
    _gaq.push([ '_trackPageview' ]);
    _gaq.push([ '_trackEvent', "Application", "Start" ]);
</script> 
```

不幸的是，我看不到在我的 Analytics 帐户中跟踪的页面。真实账户ID不是UA-XXXXXXXX-X，我在实际代码中使用了正确的ID。

我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T06:50:25.513

因此，您需要一个 iframe 将带有 GA 片段的文件放入其中。该文件必须在远程服务器上，因为三星智能电视应用程序在本地主机上运行，​​GA 忽略来自本地的调用。

```
 <iframe name='ga' src="http://example.com/ga.html" width="0" height="0"/> 
```

如果您不希望 GA 在 iframe 加载时计算 trackPage ，则可以从 GA 代码段中删除该行。

```
 _gaq.push(['_trackPageview']); 
```

然后在主脚本中添加这个函数：

```
 var trackPage = function(url) {
    if (window.ga && window.ga._gaq)
      window.ga._gaq.push(['_trackPageview', '/samsung' + url.replace(/ /g, "_")]);
  }; 
```

因此，例如`trackPage("/sports/football/barcelona chelsea")`在应用程序中的某处调用将生成具有准确 url 的 GA 跟踪页面：

```
 /samsung/sports/football/barcelona_chelsea 
```

它非常高效 - 您可以使用 GA Real time 进行游戏，并且可以看到它的效果。由于 GA 异步工作，iframe 永远不会重新加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:10:02.673

据我所知，您需要使用 Iframe 链接到它，否则它不会触发事件。

```
<iframe src='http://yourwebserver.com/ga-code-application-start.html' width='0' height='0'/></iframe> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-10T18:39:53.400

我会推荐 - 并最终实现 - 实现你/我自己的，例如使用 GET 到 Google Analytics 的 Ajax 调用，如此处所述[https://stackoverflow.com/a/24181771/174953](https://stackoverflow.com/a/24181771/174953) 特别是因为可以找到所有需要的参数在 GA 自己的文档中[https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#content](https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#content)

我在三星论坛上发现 iframe 选项不适用于所有型号，我相信 2013+

# jsf-1.2 - 在jsf中跳过多个选择一个的验证

> ID：10280648
> 
> 赞同：0
> 
> 时间：2012-04-23T12:34:51.270
> 
> 标签：jsf-1.2

我想在多个组件上使用验证。表单中有三个 h:selectOneMenu 组件和一些 h:inputText 组件。在更改第一个 h:selectOneMenu 时，我需要更改第二个的内容而不验证其他字段。这里我使用了 immediate="true"。同样，对于第二个 h:selectOneMenu 组件，onchange 需要在这里更改第三个 SelectList 的内容，以便我想跳过对其他人的验证，并且我也为此组件使用了 immediate=true。问题是“immediate=true 和 FacesContext.getCurrentInstance().renderResponse()”仅适用于 nonImediate 组件。但是由于有两个组件具有 immediate=true ，因此在更改第一个 Select 时会在第二个 SelectOne 列表中显示错误。有人有吗有什么想法吗？先谢谢了。我正在使用 JSF 1.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:58:05.387

在选择第一个 h:selectOneMenu 时，您可以使用值更改侦听器，您可以在其中在 bean 中执行您的操作，并且可以更改第二个 h:selectOneMenu 的内容。您需要重新渲染此组件。这样，您的 immediate="true" 部分将从

因此，现在您可以在页面中只放置一个 immediate="true" 并且您只能在一个字段上进行验证。

如果重新渲染和值更改侦听器不是您想要使用的，那么您可以将第一个 immediate="true" 组件放在第一个表单中，第二个 immediate="true" 放在另一个表单中。

这样，由于两种形式都不同，您在这两种情况下的验证将仅在提交或处理该特定表单时运行。

# jquery - 自动完成 Jquery 到 GridView 中的文本框

> ID：10280651
> 
> 赞同：0
> 
> 时间：2012-04-23T12:35:01.983
> 
> 标签：jquery, asp.net, gridview, jquery-autocomplete

我希望在我的网格中向 textvox 添加自动完成功能，但是，我无法从脚本中调用文本框。

HTML代码是

```
<head runat="server">
<title></title>
<link href="css/jquery.autocomplete.css" rel="stylesheet" type="text/css" />
<script src="scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
<script src="scripts/jquery.autocomplete.js" type="text/javascript"></script>

</head>
<body>
<form id="form1" runat="server">
<div>
<asp:GridView ID="grdUserTrans" CellSpacing="1" runat="server" 
Width="100%">                                                                
<Columns>
<asp:BoundField HeaderText="" DataField="ID" SortExpression="ID" 
ItemStyle-HorizontalAlign="Center"></asp:BoundField>
<asp:BoundField HeaderText="Register Number" DataField="REGNO" 
ItemStyle-HorizontalAlign="Left"></asp:BoundField>
<asp:BoundField HeaderText="Name" DataField="USERNAME" 
ItemStyle-HorizontalAlign="Left"></asp:BoundField>
<asp:TemplateField HeaderText="Stop Name" ControlStyle-CssClass="radionobrdr"
ItemStyle-VerticalAlign="Top" HeaderStyle-HorizontalAlign="Center" 
ItemStyle-HorizontalAlign="Center">
<ItemTemplate><asp:TextBox ID="txtClass" runat="server" CssClass="TextBox">  
</asp:TextBox></ItemTemplate>
</asp:TemplateField></Columns></asp:GridView>
</div>
</form>
</body>
</html> 
```

JS代码是

```
<script type="text/javascript">
$(document).ready(function() {
    $("#<%=grdUserTrans.ClientID%>").find(".TextBox").autocomplete('Search_CS.ashx');
});       
</script> 
```

Search_CS 文件是

```
using System;
using System.Web;
using System.Data.SqlClient;
using System.Configuration;
using System.Text;
using System.Collections.Generic;
using System.Web.Services;
using System.Web.Script.Services;
using System.Collections.Specialized;
using System.Data;

public class Search_CS : IHttpHandler {

public void ProcessRequest (HttpContext context) {
    string prefixText = context.Request.QueryString["q"];
        using (SqlConnection conn = new SqlConnection())
        {
            conn.ConnectionString = 
ConfigurationManager.ConnectionStrings["constr"].ConnectionString;
            using (SqlCommand cmd = new SqlCommand())
            {
                cmd.CommandText = "SELECT KSM_STOP_NAME FROM KSL_STOP_MST WHERE
 KSM_STOP_NAME LIKE '%" + prefixText + "%'";
                cmd.Connection = conn;
                StringBuilder sb = new StringBuilder();
                conn.Open();
                using (SqlDataReader sdr = cmd.ExecuteReader())
                {
                    while (sdr.Read())
                    {
                        sb.Append(sdr["KSM_STOP_NAME"])
                            .Append(Environment.NewLine);
                    }
                }
                conn.Close();
                context.Response.Write(sb.ToString());
            }
        }

}

public bool IsReusable {
    get {
        return false;
    }
}
} 
```

连接字符串是

```
<connectionStrings>
<add name="constr" connectionString="Data Source=KACPER-SERVER;Initial  
Catalog=KED_MACAULAY;Integrated Security=false;uid=KACPER_SQL;pwd=KACPER_SQL123;
pooling=true;connect timeout=900;max pool size=200"/>
</connectionStrings> 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:02:44.870

谢谢大家...找到代码..脚本代码应该是这样的

```
<script type="text/javascript"> $(document).ready(function() { $("*[id$=grdUserTrans] 
input[id$=txtClass]").autocomplete('Search_CS.ashx'); }); </script> 
```

# c# - 根据可观察序列中的事件顺序执行操作

> ID：10280657
> 
> 赞同：2
> 
> 时间：2012-04-23T12:35:12.847
> 
> 标签：c#, .net, system.reactive

我有三个（或更多）可观察的序列`bool`：

```
IObservable<bool> a0 = ...;
IObservable<bool> a1 = ...;
IObservable<bool> a2 = ...; 
```

这些序列主要生成`false`值，但偶尔会有一个`true`（序列也可以是空的）。我对值本身不感兴趣，而是对`true`值的顺序感兴趣。所以如果`a0`是`true`，那么`a2`是真的，最后`a1`，我想执行一些操作：

```
(a0, a2, a1) => ...do something... 
```

但是，如果这些`true`值以另一个顺序出现，我想做其他事情：

```
(a2, a1, a0) => ...do something else...
(a0, a1, a2) => ...do something entirely else... 
```

所以我只对`true`每个序列的第一个值感兴趣，并且根据它们发生的顺序，我想执行一些操作。

我可以记录每次第一次出现的时间戳，`true`然后在`CombineLatest`调用中排序，但我觉得有更好的方法。这种方法的一个问题是我现在依赖于记录时间戳的粒度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:02:54.993

首先，您只需要真实值，所以忽略其余的。其次，您可以将每个 observable 编码为更语义化的含义（可能是字符串？）。第三，您可以合并这些流，等待 3 个值到达，然后根据它们采取行动。

设置：

```
var a0 = new Subject<bool>();
var a1 = new Subject<bool>();
var a2 = new Subject<bool>(); 
```

编码：

```
var a0t = a0.Where(x => x).Select(x => "a0").Take(1); // thanks Matthew Finlay
var a1t = a1.Where(x => x).Select(x => "a1").Take(1);
var a2t = a2.Where(x => x).Select(x => "a2").Take(1); 
```

合并并获取三个值后：

```
var merged = a0t.Merge(a1t).Merge(a2t);
var message = merged.Buffer(3).Subscribe(x => ProcessMessage(String.Join("", x))); 
```

加工部分：

```
public void ProcessMessage(string message)
{
    switch(message) {
        case "a0a1a2": Console.WriteLine("1"); break;
        case "a1a2a0": Console.WriteLine("2"); break;
        case "a2a1a0": Console.WriteLine("3"); break;
    }
} 
```

并测试：

```
a1.OnNext(true);
a2.OnNext(true);
a0.OnNext(true); 
```

# javascript - 用于 JavaScript 数据可视化的快速数据库与缩小 CSV？

> ID：10280661
> 
> 赞同：0
> 
> 时间：2012-04-23T12:35:22.947
> 
> 标签：javascript, database, csv, data-visualization

我有一个 10 MB 的 CSV 文件，它是交互式 JavaScript 可视化的基本数据源。

在 GUI 中，用户通常会选择地理、性别、年份和指标。响应是一个由 30 个 4 位数字组成的数组。

我希望用户体验尽可能快，并且正在考虑提供完整的 CSV 文件（使用各种方式压缩......）或拥有几乎与本地托管数据匹配的后端服务。

我有哪些选择以及我可以采取哪些步骤来以最快的速度提供查询响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:50:44.477

要交付完整的文件，可能需要将字符串压缩算法（例如[http://code.google.com/p/jslzjb/](http://code.google.com/p/jslzjb/) ）与 html5 网络存储相结合。

但是，如果真的不需要在用户客户端拥有完整的数据库（这可能会导致有关数据库更新、安全性等的进一步问题），我将使用带有查询缓存等的后端服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:51:04.720

我不会将其传输给客户端，谁知道他们的连接速度有多快？最大速度将是创建一个 api，并从您的移动客户端查询它。这仅意味着从客户端传输数据请求（体积小）并向客户端返回响应（仅 30 个 4 位数字）

# java - 如何以编程方式发现本地网络上的数据库

> ID：10280662
> 
> 赞同：0
> 
> 时间：2012-04-23T12:35:23.913
> 
> 标签：java, database-connection

我正在开展一个需要自定义“向导”来帮助非技术用户安装自定义数据库驱动应用程序的项目。如果已经有合适的数据库引擎，主要问题是不要为自定义应用程序设置新数据库。那么问题来了：如何以编程方式检测现有数据库引擎的类型和位置？

这里的诀窍是，安装程序的要求是向导帮助非技术用户确定兼容性列表中的本地专用网络上是否存在数据库引擎。如果是这样，请协助非技术用户建立与所选数据库引擎的连接。否则向导将安装数据库等。

不管现有的数据库场景如何，只安装首选的 DBMS 会更好吗？该平台是一个windows盒子，但平台独立性是该项目的目标。

我不知道我是否只是使用了错误的搜索词，或者是否几乎没有关于此效果的真实信息，但找出这是否可能是令人沮丧的。

任何帮助、建议、链接、代码资源等将不胜感激。

**编辑**检测现有数据库的位置和类型的目标是提供一个简单的列表，用户可以从中选择，例如在专用网络上为当前版本添加应用程序的附加实例或作为升级版本（以实现“干净”安装）。该应用程序有点分散，因为通常会有许多应用程序实例（3 - 10 个）作为终端与数据库交互，以不同方式操纵信息以在不同终端上用于不同用途。我认为首选的 DBMS 已经选择了 PostgreSQL。

*   史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:28:30.243

如果您知道您尝试连接的数据库类型，您应该能够使用`ping`该类型数据库的默认端口来查看它是否返回响应。或者，尝试打开与数据库的实际连接并查看是否得到响应。

更复杂的是，如果您可以访问网络上的 PC，请浏览到数据库类型的默认安装目录以查看是否存在任何内容。

到目前为止，这 2 个需要使用默认位置和端口安装数据库。

更复杂的是，如果您可以连接到删除 PC 上的注册表，那么您可能可以在注册表树中找到数据库 - 无论用户将数据库安装在哪里，这都会得到修复

* * *

我的建议可能是完全避免这种情况，因为它增加了很多复杂性而没有太多回报。如果您的应用程序是针对非技术最终用户的，最好假设没有任何数据库可供他们使用，然后安装一个新数据库作为安装程序的一部分。非技术用户只会在您向他们提供对他们没有任何意义的完整数据库选项列表时感到困惑。

查询本地网络也可能需要很长时间，具体取决于存在多少网络共享以及它们的响应速度。所有这些都会影响安装程序的响应能力，因此最终用户可能不知道为什么安装程序没有做任何事情。

如果您真的想提供选择现有数据库的选项，我会将其设置为一个单独的可选按钮，该按钮会将他们带到另一个屏幕，在那里他们可以选择要调查的网络主机 - 唯一会进入此屏幕的人会成为更多可能知道数据库存在于何处的技术人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:41:18.990

> 如果已经有合适的数据库引擎，主要问题是不要为自定义应用程序设置新数据库。

我不太明白向导如何确定现有数据库是否合适。假设它在网络上找到 3 个 Oracle 和 4 个 MySQL 实例——它将如何选择？此外，这种方法在用户的应用程序和网络上的另一台机器之间创建了依赖关系，而用户甚至都没有意识到这一点。明天数据库不可用时，用户会怎么做？

在我看来，如果数据需要在多个用户或多个系统之间共享，那么数据库的选择必须是用户明确的、有意识的操作。另一方面，如果数据库只是应用程序存储一些东西的地方，那么它应该安装一个——最好是像[HSQLDB](http://hsqldb.org/)或[SQLite](http://www.sqlite.org/)这样的轻量级数据库。

# mercurial - 直线发展被粉碎，查看变幻莫测的历史

> ID：10280664
> 
> 赞同：6
> 
> 时间：2012-04-23T12:35:30.757
> 
> 标签：mercurial

我有兴趣查看我的分支的拓扑结构，最好以漂亮的方式（la graphlog）。例如，我想查看有多少（打开）分支，它们何时拆分，最后一次相互合并等等。我对它们之间的*所有*合并不感兴趣，也不对每个分支的直线开发感兴趣.

例如，在查看 bitbucket 上的分叉时，这很有用。Github 的网络图有帮助，但通常分支结构被直线开发和/或频繁合并淹没。

我想也许我可以使用 revsets

```
hg glog --rev "head() or merge() or branch_points()" 
```

但随后`glog`显示了两者之间的所有修订，更不用说我无法弄清楚如何指定 branch_points() 即具有多个孩子的修订。

mercurial（或其他 DVCS）是否有可以接近我的愿望的扩展？如果没有，有没有更好的方法来获取这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:25:45.233

以下补丁将分支点修订集添加到 Mercurial。它目前仅适用于 Mercurial 2.2，但在那里运行良好。

我不知道我是否有时间尽快推动纳入。您可以访问邮件列表并提出准备好将其包含在内（这样可以节省我的工作）。

修订版也在[https://bitbucket.org/ArneBab/hg-stable](https://bitbucket.org/ArneBab/hg-stable)

```
# HG changeset patch
# User bab@draketo.de
# Date 1343931127 -7200
# Branch stable
# Node ID f5e211663739e31f2e476c43992ee5335f9d8146
# Parent  00182b3d087909e3c3ae44761efecdde8f319ef3
revsets: added branchpoint() for revisions with more than one child.

Reason: Get very terse information via

    hg glog --rev "head() or merge() or branchpoint()"

diff -r 00182b3d0879 -r f5e211663739 mercurial/revset.py
--- a/mercurial/revset.py       Tue May 01 19:09:15 2012 +0900
+++ b/mercurial/revset.py       Thu Aug 02 20:12:07 2012 +0200
@@ -710,6 +710,15 @@
     cl = repo.changelog
     return [r for r in subset if cl.parentrevs(r)[1] != -1]

+def branchpoint(repo, subset, x):
+    """``branchpoint()``
+    Changeset has more than one child.
+    """
+    # i18n: "merge" is a keyword
+    getargs(x, 0, 0, _("branchpoint takes no arguments"))
+    cl = repo.changelog
+    return [r for r in subset if cl.children(repo[r].node())[1:]]
+
 def minrev(repo, subset, x):
     """``min(set)``
     Changeset with lowest revision number in set.
@@ -1137,6 +1146,7 @@
     "bisected": bisected,
     "bookmark": bookmark,
     "branch": branch,
+    "branchpoint": branchpoint,
     "children": children,
     "closed": closed,
     "contains": contains, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T21:05:03.777

```
  $ hg log -Gr“合并（）+头（）”

```

# java - Java mkdir -p 等效

> ID：10280665
> 
> 赞同：13
> 
> 时间：2012-04-23T12:35:34.120
> 
> 标签：java, mkdir

> **可能重复：**
> [递归创建目录](https://stackoverflow.com/questions/6774369/recursively-create-directory)

创建一个（IES）导演的java-esque方式是什么，如果它存在就不要抱怨？

引用这个人的话`mkdir`：

```
-p    Create intermediate directories as required... with this option 
      specified, no error will be reported if a directory given as an 
      operand already exists. 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-23T12:37:45.257

您是否尝试过阅读[java.io.File](https://docs.oracle.com/javase/7/docs/api/java/io/File.html#mkdirs())的文档？这`File#mkdirs()`正是您需要的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-23T12:43:33.960

在 Java 中，文件和目录都表示为 File 对象。

所以你可以这样做：

```
File file = new File("C:/a");
file.mkdirs(); 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-23T12:38:02.500

您正在寻找 File.mkdirs()。

> 创建由此抽象路径名命名的目录，包括任何必要但不存在的父目录。请注意，如果此操作失败，它可能已成功创建一些必要的父目录。

# iphone - 如何在数组中查找重复值？

> ID：10280676
> 
> 赞同：5
> 
> 时间：2012-04-23T12:36:07.827
> 
> 标签：iphone, ios, xcode4.2, ios-simulator

我正在研究 SQLite，我编写了一个查询，它返回两个数组 ItemsArray 和 CustomersIDArray：

```
ItemsArray
Element at Index 0 = Off White,
Element at Index 1 = Fan,
Element at Index 2 = Off White,
Element at Index 3 = Delux,
Element at Index 4 = Fan

CustomerIDArray 
Element at Index 0 = 1,
Element at Index 1 = 2,
Element at Index 2 = 2,
Element at Index 3 = 3,
Element at Index 4 = 4 
```

我想要这样的结果 Off White = 2 (count) , Fan = 2 (count) and Delux = 1; 和结果数组，

```
Result Array 
Element at Index 0 = Off White,
Element at Index 1 = Fan,
Element at Index 2 = Delux 
```

实际上我想要第一个数组中的重复计数，但 CustomerArray 的值不能相同。请通过逻辑或代码帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T19:06:21.600

```
-(NSMutableArray *)getCountAndRemoveMultiples:(NSMutableArray *)array{

    NSMutableArray *newArray = [[NSMutableArray alloc]initWithArray:(NSArray *)array];
    NSMutableArray *countArray = [NSMutableArray new];
    int countInt = 1;
    for (int i = 0; i < newArray.count; ++i) {
        NSString *string = [newArray objectAtIndex:i];
        for (int j = i+1; j < newArray.count; ++j) {
            if ([string isEqualToString:[newArray objectAtIndex:j]]) {
                [newArray removeObjectAtIndex:j];
                countInt++;
            }
        }
        [countArray addObject:[NSNumber numberWithInt:countInt]];
        countInt = 1;
    }
    NSMutableArray *finalArray = [[NSMutableArray alloc] initWithObjects:newArray, countArray, nil];
    NSLog(@"%@", finalArray);
    return finalArray;

}
- (IBAction)getArrayInfo:(id)sender {
    NSMutableArray *myArray = [[NSMutableArray alloc] initWithObjects:@"Off White", @"Fan", @"Off White", @"Deluxe", @"Fan", nil];
    NSMutableArray *godArray = [self getCountAndRemoveMultiples:myArray];
    NSLog(@"Array from this end = %@", godArray);
} 
```

我刚刚设置了 -getArrayInfo 来测试它。工作正常。如您所见，您要显示的数组将位于 index:0 处，而 countArray 位于 index:1 处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T12:58:34.093

`NSCountedSet`像下面这样使用

```
NSMutableArray *ary_res = [[NSMutableArray alloc] init];
    NSMutableArray *array = [[NSMutableArray alloc] initWithObjects:@"11",@"13",@"34",@"9",@"13",@"34",@"9",@"2",nil];
    NSCountedSet *set = [[NSCountedSet alloc] initWithArray:array];
    for(id name in set)
    {
        if([set countForObject:name]==2)
            [ary_res addObject:name];
    }
    //
    NSLog(@"%@",ary_res); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:40:42.250

试试这个：

```
NSArray *copy = [ItemsArray copy];

NSInteger index = [copy count] - 1;

for (id object in [copy reverseObjectEnumerator]) {

    if ([ItemsArray indexOfObject:object inRange:NSMakeRange(0, index)] != NSNotFound) {
        [ItemsArray removeObjectAtIndex:index];
    }
    index--;
} 
```

# apache-camel - 骆驼发送到多个端点

> ID：10280679
> 
> 赞同：18
> 
> 时间：2012-04-23T12:36:20.617
> 
> 标签：apache-camel, multicast

这两者有何不同

```
from(endpoint).to(endpoint:a, endpoint:b)

from(endpoint).multicast().to(endpoint:a, endpoint:b) 
```

第一次找不到任何文档

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-23T14:47:39.610

`to(endpoint:a, endpoint:b)`相当于`.to(endpoint:a).to(endpoint:b)`这意味着输出`endpoint:a`是从发送到的`endpoint:b`，而不是原始的`Exchange`。此外，每个端点一个接一个地执行。

`.multicast()`将原件发送`Exchange`到每个定义的端点，允许并行处理，并允许您定义一个[AggregationStrategy](http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/processor/aggregate/AggregationStrategy.html)以确定如何组装来自原始`Exchange`发送到的每个端点的响应。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-24T03:42:09.797

是的，正如 jarrad 所写，两者之间的区别是

第一个是管道和过滤器 EIP（Camel 中的默认模式）。此处记录：[https ://www.enterpriseintegrationpatterns.com/patterns/messaging/PipesAndFilters.html](https://www.enterpriseintegrationpatterns.com/patterns/messaging/PipesAndFilters.html)

第二个是这里记录的多播 EIP：http: [//camel.apache.org/multicast.html](http://camel.apache.org/multicast.html)

所有 Camel EIP 都在此处列出：http: [//camel.apache.org/eip](http://camel.apache.org/eip)

# php - PHP APC 作为本地对象存储除了存储大小还有什么限制吗？

> ID：10280681
> 
> 赞同：5
> 
> 时间：2012-04-23T12:36:21.700
> 
> 标签：php, apc

我在 Web 服务的生产服务器上使用 PHP APC 很长一段时间以来每天的点击量为 1000 万次。

我正在考虑将更多数据卸载到 APC 本地缓存。

从理论上讲，在我看来，因为 APC 调用主要是本地内存访问。将其称为 10,000 次/秒应该不会成为问题。据我所知，它的限制可能在于内存大小，但只要服务器有可用的 CPU，它就不应该出现高速性能或损坏问题。

是否有任何我不知道的限制可能会阻止我在应用服务器（ubuntu）上以非常高的速率使用 APC 的本地对象缓存。

更新：显然根据下面的答案，我的问题并不清楚。我不是在寻找替代缓存选项（memcache、redis 等）。我的问题是在非常高的速率和读取并发下使用本地 APC 是否有任何顾虑或限制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T12:45:07.257

我个人非常喜欢使用[memcached](http://memcached.org/)进行这种存储。它有几个优点：

*   这是一个完全专注于存储的程序，memcached 的开发将始终专注于存储。APC 主要是代码缓存，它恰好提供对用户存储的一些访问。
*   当您重新加载或重新启动 Apache（或您使用的任何网络服务器）时，APC 的缓存将被清空。当您使用独立解决方案（例如 memcached）时，您可以控制缓存何时清空。这对我来说确实非常重要，因为我有时必须对 Apache 的配置进行更改，并且我真的不想在这样做时清除缓存，因为它会产生很大的 CPU 峰值（再次将数据加载到缓存中） ）。
*   它有可能创建一个分布式缓存，使其更具可扩展性。当您因为网站变大而必须添加第二台服务器时，您不希望有两个缓存相同内容的缓存。memcached 可以很好地扩展，而 APC 的缓存不能。

与 APC 的用户缓存相比，使用 memcached 还有许多其他优点，但对我来说，这是不使用 APC 的用户缓存的三个主要原因。当然，我确实使用 APC，只是不使用用户缓存。

# ruby-on-rails - 为什么这个模型不使用一个新的起点来基于每个请求的查找时间？

> ID：10280685
> 
> 赞同：2
> 
> 时间：2012-04-23T12:36:29.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3

课程.rb

```
 has_many :current_users, :through => :user_statuses, :source => :user, :conditions => ['user_statuses.updated_at > ?', 1.hour.ago] 
```

安慰

```
Loading development environment (Rails 3.2.2)
>> course = Course.find(1)
  Course Load (0.3ms)  SELECT `courses`.* FROM `courses` WHERE `courses`.`id` = 1 LIMIT 1
=> #<Course id: 1, title: "Course 1", created_at: "2012-04-17 19:17:15", updated_at: "2012-04-17 19:17:15">
>> Time.now
=> 2012-04-23 08:29:45 -0400
>> course.current_users.count
   (0.4ms)  SELECT COUNT(*) FROM `users` INNER JOIN `user_statuses` ON `users`.`id` = `user_statuses`.`user_id` WHERE `user_statuses`.`user_id` = 1 AND (user_statuses.updated_at > '2012-04-23 12:28:40')
=> 0
>> Time.now
=> 2012-04-23 08:30:07 -0400
>> course.current_users.count
   (0.4ms)  SELECT COUNT(*) FROM `users` INNER JOIN `user_statuses` ON `users`.`id` = `user_statuses`.`user_id` WHERE `user_statuses`.`user_id` = 1 AND (user_statuses.updated_at > '2012-04-23 12:28:40')
=> 0
>> 
```

请注意，在检查`1.hour.ago`条件时，尽管我提出请求的时间相差 30 秒，但它使用相同的时间作为起点。退出控制台并重新启动它会清除它，但它会在新的时间再次发生。这种行为存在于测试和浏览器中。如何让模型使用基于时间的条件进行`has_many :through`查找？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:46:28.660

我相信您想在模型关系上使用*动态*条件。

看看[这个 SO question](https://stackoverflow.com/questions/2462203/rails-has-many-with-dynamic-conditions)

基本上，当您的模型加载时，`1.hour.ago`只评估一次。如果我理解您的问题，您希望对每个请求进行评估。

像这样的东西（rails 3.1+）：

```
:conditions => lambda { |course| "user_statuses.updated_at > '#{1.hour.ago}'" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:31:50.180

将查询放入模型中根本不起作用，无论是在 has_many ：通过设置还是在方法中。所以我最终删除了关联并将查询放入控制器中。这允许在发出请求时计算当前时间。

模型：

```
has_many :user_statuses 
```

控制器：

```
@course = Course.find(params[:id])
@current_users = @course.user_statuses.where('updated_at > ?', 1.hour.ago) 
```

# apache-poi - 使用 POI 在 xlsx 文件中嵌入文档

> ID：10280687
> 
> 赞同：4
> 
> 时间：2012-04-23T12:36:33.470
> 
> 标签：apache-poi

有没有办法使用 Apache POI 在 xlsx 文件中嵌入文档（例如 pdf）？似乎您可以使用 读取嵌入式文档`workbook.getAllEmbedds()`，但在编写文件时我找不到插入任何文档的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-18T11:15:20.660

这应该会有所帮助：[与答案类似的问题](https://stackoverflow.com/questions/16910503/embed-files-into-excel-using-apache-poi)用户已为 Apache poi 创建了一个补丁，您可以使用该补丁将任意文件包含到[此处的 excel 表补丁链接中](https://issues.apache.org/bugzilla/show_bug.cgi?id=55578)

希望这可以帮助。

# ruby-on-rails - 使用 rake 命令创建数据库时无法连接到“localhost”（10061）上的 MySQL 服务器

> ID：10280689
> 
> 赞同：0
> 
> 时间：2012-04-23T12:36:40.100
> 
> 标签：ruby-on-rails, ruby

当我尝试使用 rake 命令创建数据库时出现此错误。

这是我的 database.yml 文件

```
 # MySQL.  Versions 4.1 and 5.0 are recommended.
   # 
   # Install the MYSQL driver
   #   gem install mysql2
   # Ensure the MySQL gem is defined in your Gemfile
   #   gem 'mysql2'
   #
   # And be sure to use new-style password hashing:
   #   http://dev.mysql.com/doc/refman/5.0/en/old-client.html
development:
adapter: mysql2
encoding: utf8
reconnect: false
database: SIMS_development
pool: 5
username: root
password:
host: localhost
port: 3306

# Do not set this db to the same as development or production.
test:
 adapter: mysql2
 encoding: utf8
 reconnect: false
 database: SIMS_test
 pool: 5
 username: root
 password:
 host: localhost
 port: 3306 
```

现在我不确定为什么会收到此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:24:43.870

我想你有旧的 mysql 服务器。因此，如果您有旧版本，请安装新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:35:19.403

替换`host: localhost`为`host: 127.0.0.1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T18:11:03.687

您可以使用套接字连接而不是端口进行连接，您可以使用这种形式，这很容易

对于 Linux：

```
development:
adapter: mysql2
encoding: utf8
reconnect: false
database: your_database_name
pool: 5
username: your_username_db
password: your_password_db
socket: /var/run/mysqld/mysqld.sock 
```

用于 MAC

```
development:
adapter: mysql2
encoding: utf8
reconnect: false
database: your_database_name
pool: 5
username: your_username_db
password: your_password_db
socket: /tmp/mysql.sock 
```

我希望这种方法能奏效

# python - 无法从 GitHub 的 Fabric 脚本提交

> ID：10280691
> 
> 赞同：0
> 
> 时间：2012-04-23T12:36:44.180
> 
> 标签：python, github, fabric

我正在使用 Fabric 运行 ANT 任务，然后上传到 GitHub。该脚本有效，但并非始终如一，因此很难理解原因。

我一直在这里读到 Fabric 中的过程是；

1.  `git add`
2.  `git commit`
3.  `git push`

但我一直看到这个输出；

```
# On branch master
# Your branch is ahead of 'origin/master' by 1 commit.
#
nothing to commit (working directory clean)

Fatal error: local() encountered an error (return code 1) while executing 'git commit -m "Latest Selenium screenshots for View Employee"'

Aborting. 
```

我写的函数是这样的；

```
def deploy():
    process = test()
    os.chdir('\\Documents and Settings\markw\GitTest')
    with cd('\\Documents and Settings\markw\GitTest'):
        local('git reset --soft HEAD')
        local('git pull origin master')
        local('git add -A')
        local('git commit -m "Latest Selenium screenshots for %s"' % (process))
        local('git push -u origin master') 
```

我的提交遗漏了什么导致这里出现问题？是否有另一个标志来组合已排队的提交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:32:31.377

没有要提交的文件，因此 git 返回一个非零错误代码。这导致fabric 相信前一个命令失败，因此中止。

老实说，除非您绝对确定 git 是错误的，并且有更改要提交，否则我很容易相信您的脚本实际上根本没有出现故障。

如果您确定有要提交的文件，则应调查未获取更改的原因。

如果您希望织物以更友好的方式退出，您可以尝试以下操作：

```
从 fabric.api 导入设置
导入系统

定义部署（）：
    过程 = 测试（）
    os.chdir('\\Documents and Settings\markw\GitTest')
    使用 cd('\\Documents and Settings\markw\GitTest'):
        使用设置（warn_only=True）：
            本地（'git reset --soft HEAD'）
            local('git pull origin master')
            本地（'git添加-A'）
            commit = local('git commit -a -m "%s 的最新 Selenium 屏幕截图"' % (process))
            如果提交失败：
                print '没什么可提交的，正在退出......'
                系统退出（0）
            别的：
                local('git push -u origin master')

```

我还在`-a`你的 git commit 行中添加了一个，所以它也提交了更改以及添加的文件。

另外，我不确定您的 os.chdir() 行的意义。

# ruby-on-rails - 尝试访问损坏的图片 url 时抛出内部服务器错误 500 而不是 404

> ID：10280692
> 
> 赞同：11
> 
> 时间：2012-04-23T12:36:44.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3, error-handling

我们有一个使用本教程设置自定义 404 和 500 页的 Rails 服务器：

[http://ramblinglabs.com/blog/2012/01/rails-3-1-adding-custom-404-and-500-error-pages](http://ramblinglabs.com/blog/2012/01/rails-3-1-adding-custom-404-and-500-error-pages)

虽然它工作得很好，并且为各种路径抛出 404，但它在尝试访问任何类型的后缀路径（如 en/foo.png、en/foo.pdf、en/foo.xml，...）时会生成内部服务器错误 500

但是像 en/file.foo 这样的东西会抛出 404。所以只有有效的后缀会抛出 500。

**路线结束.rb：**

```
if Rails.application.config.consider_all_requests_local
  match '*not_found', to: 'errors#error_404'
end 
```

**application_controller.rb**

```
 unless Rails.application.config.consider_all_requests_local
    rescue_from Exception, with: :render_500
    rescue_from ActionController::RoutingError, with: :render_404
    rescue_from ActionController::UnknownController, with: :render_404
    rescue_from ::AbstractController::ActionNotFound, with: :render_404
    rescue_from ActiveRecord::RecordNotFound, with: :render_404
  end

  protected

  def render_404(exception)
    @not_found_path = exception.message
    respond_to do |format|
      format.html { render template: 'errors/error_404', layout: 'layouts/application', status: 404 }
      format.all { render nothing: true, status: 404 }
    end
  end

  def render_500(exception)
    logger.fatal(exception)
    respond_to do |format|
      format.html { render template: 'errors/error_500', layout: 'layouts/application', status: 500 }
      format.all { render nothing: true, status: 500}
    end
  end 
```

**500 出现：**

```
Missing template errors/error_404 with {:locale=>[:de, :en], :formats=>[:png], :handlers=>[:erb, :builder, :coffee, :arb, :haml]} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T18:13:41.530

我们发现了错误。

我们有一个 error_controller.rb 包含这个：

```
 def error_404
    @not_found_path = params[:not_found]
    render template: 'errors/error_404', layout: 'layouts/application', status: 404
  end 
```

我们将其更改为解决此问题：

```
 def error_404
    @not_found_path = params[:not_found]
    respond_to do |format|
      format.html { render template: 'errors/error_404', layout: 'layouts/application', status: 404 }
      format.all { render nothing: true, status: 404 }
    end
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:13:53.367

尝试添加

`respond_to :html, :json, :png`

以及控制器顶部的任何其他必要格式。如果我是对的，那么问题是`format.all`在单个控制器中的操作没有设置为包含`:png`作为它响应的格式之一。

您可能还需要添加`config/environment.rb`以下定义和任何类似定义：

`Mime::Type.register "image/png", :png`

[在此处](http://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to)查看更多详细信息。基本上，您需要设置要响应的 mime 类型。错误消息表明 rails 不了解如何呈现格式`png`。

# zend-framework - CurrencyTextBox中小数点的本地化

> ID：10280696
> 
> 赞同：1
> 
> 时间：2012-04-23T12:36:55.867
> 
> 标签：zend-framework, localization, dojo, zend-form

我正在为 Dojo 设置本地化

```
$locale = new Zend_Locale();
$locale->setLocale('de_AT'); 
```

和

```
$this->view->dojo()->setDjConfigOption('locale', 'de_AT') 
```

在 Zend 框架中。

但是当我使用带有 CurrencyTextBox 的表单时（在 Zend_Dojo_Form 类中），我必须使用点来输入小数点而不是逗号，这是错误的。

知道为什么这不能正常工作吗？这是Dojo的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:29:53.743

该行应该是（AT 不是大写字母）：

```
$this->view->dojo()->setDjConfigOption('locale', 'de_at') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T14:44:24.373

正确的语法是

```
$this->view->dojo()->setDjConfigOption('locale', 'de-at') 
```

# android - 在 HTC Incredible 上调用 Camera.takepicture() 后出现乱码

> ID：10280699
> 
> 赞同：1
> 
> 时间：2012-04-23T12:37:07.627
> 
> 标签：android, android-camera

通过调用HTC Incredible 上的[Camera.takepicture()来拍照会导致图像混乱。](http://developer.android.com/reference/android/hardware/Camera.html#takePicture%28android.hardware.Camera.ShutterCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback%29 "相机.takepicture()")这个问题不会出现在我测试过我的应用程序的任何其他设备上（Galaxy SII、Galaxy S、Nexus S）。我还没有能够自己找到解决方案...

图片链接： http: [//i.stack.imgur.com/j4VE8.jpg](http://i.stack.imgur.com/j4VE8.jpg) （需要更多声誉才能发布）

这就是我保存 imageData 的方式：

```
 static boolean StoreByteImage(Context mContext, byte[] imageData,
        int quality, String expName) {

    File sdImageMainDirectory = new File("/sdcard");
    FileOutputStream fileOutputStream = null;
    //String nameFile;
    try {

        BitmapFactory.Options options=new BitmapFactory.Options();
        options.inSampleSize = 4;

        Bitmap myImage = BitmapFactory.decodeByteArray(imageData, 0,
                imageData.length,options);

        fileOutputStream = new FileOutputStream(
                sdImageMainDirectory.toString() +"/CapturedQRCode.jpg");

        BufferedOutputStream bos = new BufferedOutputStream(
                fileOutputStream);

        myImage.compress(CompressFormat.PNG, quality, bos);

        bos.flush();
        bos.close();

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return true;
} 
```

有人有提示吗？

# php - PHP - gc. maxlifetime 和性能？

> ID：10280700
> 
> 赞同：0
> 
> 时间：2012-04-23T12:37:12.237
> 
> 标签：php, performance, session, garbage-collection

我想知道更高的 gc.maxlifetime 值是否会影响站点的性能？假设 2 周（1209600 秒）。

我问的原因是因为我的一些页面需要几分钟才能加载，这在以前非常快。我将值从默认的 24 分钟更改为 2 周，以便用户的会话数据和登录将保持不变。这是大约 2 周前，这让我相信高 gc.maxlifetime 可能是页面加载缓慢的问题。但它并不总是相同的页面。

PS：我正在转向基于 cookie 的持久登录系统，我认为它对性能更友好？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:45:27.560

`gc.max_lifetime`不应该*直接*影响性能，因为它所做的只是设置会话是公平游戏删除的持续时间（尽管不能保证它何时最终会被实际删除）。

可能存在一些附带的性能差异，因为每当会话 GC 启动时，它将有更多的会话来检查是否有资格清理，因此需要更多时间来整理所有这些会话。那是因为您增加了会话的最短生命周期，因此在任何时候所有其他条件都相同的情况下，正在进行的会话比以前多。

您可以进行一个非常简单的检查：查看会话存储机制（默认情况下，这意味着系统临时目录中的文件）并查看当前存在多少会话。如果是文件系统会话，那么除非您有 10K 或更多，否则不应有任何明显的性能下降；无论如何，“可见的性能下降”永远不会爬到分钟范围内（它是一个硬盘，它有多慢？）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:46:45.170

我认为你不应该尝试 gc.maxlifetime 设置。一般来说，垃圾收集器是一个非常轻量级的进程。我认为您应该尝试找出页面缓慢的原因。您可以通过在某些代码集之间添加计时器来做到这一点。然后看看你的代码哪一部分是慢的。

例如：

```
<?php

$start = microtime( true );
/* code block A */
$blockA = microtime( true ) - $start;

$start = microtime( true );
/* code block B */
$blockB = microtime( true ) - $start;

// etc.

/**
 * At the end of your script, you can use the times and 
 * print them to the screen, or log them to a file.
 */
echo '<pre>' . PHP_EOL;
echo 'Block A took '. round( $blockA, 2) .' seconds ' . PHP_EOL;
echo 'Block B took '. round( $blockB, 2) .' seconds ' . PHP_EOL;
echo '</pre>' . PHP_EOL;
?> 
```

祝你好运找到缓慢的部分。提示：多看一下您的数据库查询（如果有的话）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T12:57:59.570

首先没有选项“gc.maxlifetime” - 你的意思是“session.gc_maxlifetime”；）

选项“session.gc_maxlifetime”定义了垃圾回收 (gc) 进程不会删除会话数据的时间。gc 进程将按照“session.gc_divisor”和“session.gc_probability”定义的频率启动。

如果你有问题，你应该看看你的会话数据将被存储在哪里（会话保存处理程序）。比您应该优化该过程或禁用它并自己清理数据（cron）。

如果您使用默认配置 PHP 将会话数据存储在本地硬盘上，这通常是瓶颈。

如此增加“session.gc_maxlifetime”的值会引发安全问题，只会拖延您的问题。

# deployment - Boto - 如何在运行新命令之前等待后台进程（例如 mdadm）完成？

> ID：10280703
> 
> 赞同：1
> 
> 时间：2012-04-23T12:37:29.687
> 
> 标签：deployment, amazon-ec2, boto, raid

我正在编写我的亚马逊部署脚本，但我还没有设法自动化其中的一个步骤。

该步骤介于设置 RAID（通过 mdadm）然后在新的挂载目录上安装我的数据库（mongo）之间。这是因为在安装 mongo 之前，我必须在后台等待 mdadm 完成。我知道 mdadm 何时通过运行以下命令完成：

```
sudo mdadm --detail /dev/md0 
```

当 mdadm 仍在进行中时，此命令将生成进度指示器，例如：

```
 Rebuild Status : 2% complete 
```

当 mdadm 完成时，此状态将消失。

有没有人有一个干净的解决方案可以判断 mdadm 何时完成，以便脚本可以完全自行运行，然后在 mdadm 完成后继续安装 mongo？

目前，我正在考虑使用 boto 在盒子上放置各种脚本，从 boto 运行脚本，并在脚本解析并读取 mdadm 完成后退出...

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:13:27.940

我在用：

```
 mdadm --wait /dev/md0 
```

请注意，如果不需要等待，上述命令将返回非零退出状态......您可能需要在脚本中考虑到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:27:23.390

好的...正如我所说，我将发布我的解决方案（我对编写 bash 脚本完全陌生，所以如果您有任何改进建议，我会全力以赴！！！）

```
#!/bin/bash

false=1
true=0

function drives_are_ready {
  RAID_INFO=`sudo mdadm --detail /dev/md0`
  rebuild_status_line_count=`echo "$RAID_INFO" | grep "Rebuild Status" | wc -l`
  echo `echo "$RAID_INFO" | grep "Rebuild Status"`
  if (( rebuild_status_line_count == 0 )); then
    return $true
  else
    return $false
  fi
}

drives_are_ready
raid_is_finished=$?

while (( raid_is_finished == $false )); do
  echo "RAID isn't finished yet... will check again in 10s"
  sleep 10s
  drives_are_ready
  raid_is_finished=$?
done

echo "RAID is done." 
```

我将文件 scp 到我的实例，然后 chmod 并通过 boto 运行脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T00:35:27.997

在使用磁盘之前，您不一定需要等待超级块重新同步，但根据我（我相信您也是）的经验，使用 ec2 实例是一个非常好的主意。

您可以简单地在 bash while 循环中检查它

```
#!/bin/bash

... stuff in your script that doesn't require raid ...

# Pause until mdadm --detail returns nothing
while [[ `sudo mdadm --detail /dev/md0 | grep 'Rebuild Status'` != '' ]] do
  sleep 30
done

echo "Raid superblock resynchronization complete"

... stuff in your script that requires raid synchronization to be complete... 
```

# c++ - c ++读取大文本文件到字符串（大于string :: max_size）

> ID：10280709
> 
> 赞同：2
> 
> 时间：2012-04-23T12:37:40.363
> 
> 标签：c++, string, text-files

我有一个**巨大的文本文件（~5GB）**，它是我程序的**数据库**。在运行过程中，这个数据库会被**多次读取，**使用字符串函数，如 string::find()、string::at()、string::substr()...

问题是这个文本文件不能在一个字符串中加载，因为**string::max_size**肯定太小了。

你将如何实现这一点？我的想法是将一部分加载到字符串->阅读->关闭->将另一部分加载到相同的字符串->阅读->关闭->... 有更好/更有效的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:49:34.553

> 你将如何实现这一点？

使用真实的数据库，例如 SQLite。拥有索引带来的性能提升不仅仅是为了弥补您学习另一个 API 的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T03:44:18.920

由于这是一个数据库，我假设它会有很多记录。对我来说，这意味着最好的想法是为每个记录实现一个数据类，并根据您计划如何使用它来填充列表/向量/等。由于文件很大，我还会研究持久性缓存。

在所有记录的容器类中，您可以根据需要实现搜索等功能。但正如对这种大小的数据库所建议的那样，您可能最好使用数据库。

# mysql - 如何使用nodejs插入属于不同类别和部门的唯一产品名称

> ID：10280721
> 
> 赞同：0
> 
> 时间：2012-04-23T12:38:28.590
> 
> 标签：mysql, node.js, unique-constraint, unique-key

在我的项目中，我有 product_details、categories、departments 表。

product_details 属于类别和部门表，类别有很多 product_details，部门有很多 product_details。

我正在尝试使用 nodejs 插入产品详细信息。我将 product_name 结构化为唯一以避免冗余。如果相同的产品属于不同的类别或部门，则会引发错误并且不会保存这些产品详细信息。但我想存储属于不同类别或不同部门的相同产品详细信息。这个怎么做。如果我删除唯一约束，则会发生冗余。

如果名称相同的产品属于同一类别和同一部门，我想要什么我不想保存这些详细信息，如果名称相同的产品属于不同的类别和不同的部门，我想保存这些详细信息。请帮助我如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:10:38.530

使用链接[如何为 MySQL 中的多个列指定唯一约束？](https://stackoverflow.com/questions/635937/how-do-i-specify-unique-constraint-for-multiple-columns-in-mysql)由 Linus G Thiel 给出，我解决了这个问题。

```
alter table product_details add unique index (name,category_id,department_id); 
```

它工作正常。

# c# - 如何将DLL插入项目

> ID：10280726
> 
> 赞同：0
> 
> 时间：2012-04-23T12:38:43.917
> 
> 标签：c#, dll

这是我使用 C# 的 3 天，所以我的问题很愚蠢，抱歉。

`System.Web.Script.Serialization`我从`System.Web.Extensions`库中编写了与 . 一起使用的小型应用程序。我添加了对这个*DLL*的引用（它来自 GAC）。但是安装已发布的应用程序后，它无法在 GAC 中不存在 此*DLL的系统上运行。*

所以我想将此*DLL*构建到我的应用程序中，而不依赖于*DLL*的存在。

我尝试了什么：

1.  添加了对*DLL*的引用并将选项“ **Copy Local** ”设置为“ **True** ”
2.  *将DLL*复制到项目文件夹并创建对该文件的引用
3.  在“**先决条件**”中打开选项“ **.NET 3.5 Framework SP1 Client Profile** ”
4.  在“**先决条件**”中打开选项“ **.NET 4 Framework Client Profile (x86 and x64)** ”

`Could not load file or assembly 'System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.`
当我的系统应用程序工作正常时，我仍然收到消息。

请告诉我，我应该怎么做才能用这个*DLL*编译应用程序。

系统：Win7 x86，MS Visual C# 2010 Express（我已经试用过专业版，如果有帮助，但希望Express版也能解决）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:47:09.653

`System.Web.Extensions`取决于`System.Web`，它不是客户端配置文件的一部分，您应该更改您的先决条件

# events - JSF/Rich 2.0 - 在 Rich:select 中选择项目时调用 bean 方法

> ID：10280732
> 
> 赞同：0
> 
> 时间：2012-04-23T12:39:04.540
> 
> 标签：events, jsf-2, richfaces

当在组合（丰富：选择）中选择一个项目时，我正在尝试调用方法bean，如下所示：

```
 <rich:select id="combo"
        value="#{bean.code}"
        valueChangeListener="#{bean.productChanged}"
        immediate="true" required="true">
        <a4j:ajax event="change" render="callConflict"
            oncomplete="javascript:showConflict();" />
        <f:selectItems
            value="#{bean.products}" />
        <f:attribute name="attributeName"
            value="#{bean.attribute}" />
    </rich:select> 
```

但是这段代码，bean中的方法只在项目改变**和组合失去焦点时被调用**

更改产品后应该如何调用 bean 上的方法而不必等待组合失去焦点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:57:04.887

有几种方法可以解决您的问题。其中之一是从您的​​组件中移除焦点

```
onlistclick = "x.blur()" 
```

或者

```
onlistclick = "window.blur()" 
```

是的，这可以工作，但我想这不是最好的解决方案。

另一种（更好的）方法是使用：

```
<a4j:ajax event="selectitem" render="xxx"/> 
```

请记住：事件标签可能区分大小写。对我来说， event = "selectItem" 不起作用（只有 "selectitem"）。

# azure - 写入 Azure 块 Blob

> ID：10280739
> 
> 赞同：5
> 
> 时间：2012-04-23T12:39:57.490
> 
> 标签：azure

我正在使用 PutBlock 和 PutBlockList 将数据上传到块 blob，我使用的代码如下：-

```
CloudBlobContainer container = blobStorage.GetContainerReference("devicebackups");
var permissions = container.GetPermissions();
permissions.PublicAccess = BlobContainerPublicAccessType.Container;
container.SetPermissions(permissions);
CloudBlockBlob blob = container.GetBlockBlobReference(serialNo.ToLower() + " " + dicMonths[DateTime.Now.Month]);
try
{
    var serializer = new XmlSerializer(typeof(List<EnergyData>));
    var stringBuilder = new StringBuilder();
    using (XmlWriter writer = XmlWriter.Create(stringBuilder))
    {
        try
        {
            serializer.Serialize(writer, deviceData);
            byte[] byteArray = Encoding.UTF8.GetBytes(stringBuilder.ToString());

            List<string> blockIds = new List<string>();
            try 
            { 
                blockIds.AddRange(blob.DownloadBlockList(BlockListingFilter.Committed).Select(b => b.Name)); 
            }
            catch (StorageClientException e)
            {
                if (e.ErrorCode != StorageErrorCode.BlobNotFound)
                {
                    throw;
                }
                blob.Container.CreateIfNotExist();
            }
            var newId = Convert.ToBase64String(Encoding.UTF8.GetBytes(blockIds.Count().ToString()));
            blob.PutBlock(newId, new MemoryStream(byteArray), null);
            blockIds.Add(newId);
            blob.PutBlockList(blockIds);
        }
        catch (Exception ex) 
        { 
            UT.ExceptionReporting(ex, "Error in Updating Backup Blob - writing byte array to blob"); 
        }
    }
}
catch (Exception ex) 
{ 
    UT.ExceptionReporting(ex, "Error in Updating Backup Blob - creating XmlWriter"); 
}
}
catch (Exception ex) 
{ 
    UT.ExceptionReporting(ex, "Error in Updating Backup Blob - getting container and blob references, serial no -" + serialNo); 
} 
```

这适用于 10 个块，然后在第 11 个块它崩溃并出现以下错误：-

StorageClientException - 指定的阻止列表无效。

```
InnerException = {"The remote server returned an error: (400) Bad Request."} 
```

我在互联网上搜索了相同错误的报告，但没有运气。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-23T21:40:06.093

> 对于给定的 blob，为 blockid 参数指定的值的长度必须与每个块的大小相同。

[http://msdn.microsoft.com/en-us/library/windowsazure/dd135726.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd135726.aspx)

前 10 个块的编号为 0 到 9。第 11 个块的编号为 10，它长了一个字符。因此，您应该更改编号方案以始终使用相同的长度。一种解决方案是将计数转换为一个零填充的字符串，该字符串的长度足以容纳您期望拥有的块数。

但是，如果您不需要使用块的好处，那么您最好一次性编写整个 blob 而不是使用块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T06:34:38.513

设置您的 BlockID 具有以下代码

```
var blockIdBase64 = Convert.ToBase64String(Encoding.UTF8.GetBytes(blockId.ToString(CultureInfo.InvariantCulture).PadLeft(32, '0'))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-26T07:11:18.110

我的问题是，在 10 个 put 块之后，我收到了**错误的请求**（`Error 400`）。

1.  替换`Encoding.UTF8.GetBytes`为 必须大小相同`System.BitConverter.GetBytes` `string blockIdBase64=Convert.ToBase64String(System.BitConverter.GetBytes(x++));` 。做这项工作。`blockIDs``BitConverter.GetBytes`
2.  我仍然收到了错误的请求（`Error 400`）。我通过删除`temp blob`“Azure 存储资源管理器”解决了这个问题。这就像从我以前的错误尝试中重置临时块一样。

# sencha-touch - 我无法对列表进行分组

> ID：10280744
> 
> 赞同：0
> 
> 时间：2012-04-23T12:40:10.967
> 
> 标签：sencha-touch, extjs, sencha-touch-2

```
 Ext.define('MyApp.view.MyPanel', {   
extend: 'Ext.Panel',
xtype:'mypanel',

config: {
    ui: 'dark',
    layout: {
        type: 'card'
    },
    items: [
        {
            xtype: 'titlebar',
            docked: 'top',
            title: 'Lezzet Dunyasi',
            items: [
                {
                    xtype: 'button',
                    docked: 'right',
                    height: 29,
                    hidden: true,
                    ui: 'back',
                    text: 'back'
                }
            ]
        },
        {
            xtype: 'list',
            docked: 'left',
            id: 'mylist',
            ui: 'round',
            grouped:true,
            pinHeaders:false,
            width: 331,
            itemTpl: [
                '<img src="{img_url}" width="60" heigh="60"></img><span>{label}</span>'
            ],
            store: 'Menius',
            items: [
                {
                    xtype: 'searchfield',
                    docked: 'top',
                    placeHolder: 'Search...',

             }
            ]
        },
        {
            xtype: 'panel',
            styleHtmlContent:true,
            style: {
                        backgroundImage: 'url(resources/img/Landscape.png)',
                        backgroundRepeat: 'no-repeat',
                        backgroundPosition: 'center'
            },
            id:'mypanel'
        }
    ]
} 
```

});

我的商店

我在商店中使用了一些代码

```
 sorters:'id',
    grouper:function(record) {
        return record.get('id')[4]; 
```

当我将 grouped:true 写入列表配置时，应用程序不会运行。我不明白原因。

我想看到与厨房水槽示例用户界面/列表/披露部分相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:35:58.630

在您的商店中添加此配置

```
 groupField:'label' 
```

# ios - UINavigationBarItem 以编程方式

> ID：10280745
> 
> 赞同：0
> 
> 时间：2012-04-23T12:40:14.493
> 
> 标签：ios, cocoa-touch, uinavigationbar, uinavigationitem

我有继承自`UINavigationController`. 在`viewDidLoad`我想设置`rightBarButtonItem`. 我做以下。

```
UINavigationItem* navItem = self.navigationItem;
UIButton* btnOptionsView = [[UIButton alloc] init];
[btnOptionsView setImage:[UIImage imageNamed:@"options.png"]
                forState:UIControlStateNormal];
[btnOptionsView sizeToFit];
UIBarButtonItem* btnOptions = [[UIBarButtonItem alloc] initWithCustomView:btnOptionsView];
navItem.rightBarButtonItem = btnOptions; 
```

但是按钮是不可见的，在调试模式下我注意到它`btnOptions.width`是 0，而且我不能设置标题`navItem`，像这样

```
[navItem setTitle:@"title"] 
```

不更改 的标题`UINavigationItem`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:06:59.587

尝试更改按钮的标题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:10:02.693

你不应该继承 UINavigationController。来自苹果文档：

> UINavigationController 类实现了一个专门的视图控制器来管理分层内容的导航。此类不用于子类化。相反，在您希望应用程序的用户界面反映内容的分层性质的情况下，您可以按原样使用它的实例。

# ruby-on-rails-3.1 - 动态定义回形针样式大小

> ID：10280748
> 
> 赞同：1
> 
> 时间：2012-04-23T12:40:23.113
> 
> 标签：ruby-on-rails-3.1, paperclip

我有一个用户选择模板的应用程序。在此模板上，用户可以上传图像。

我用回形针上传图片。

每个模板都有不同的图像尺寸。

是否可以在回形针中动态设置图像样式 => 'widthxheight'？

我想要这个功能，因为如果用户决定更改模板，那么他们不必再次上传照片，他们只需裁剪“原始”。

谢谢你的帮助。

我会尽力澄清这一点。

用户上传页面标题的图像。样式可以称为“标题”，尺寸应该是该标题空间的尺寸，例如“400x600”

现在用户查看他们在图库中上传的图像。他们想为他们的页面选择一张图片，但这次是为尺寸为“300x100”的“侧边栏”。我不想让他们再次上传相同的图像。我想创建一个名为“sidebar”的新样式，尺寸为“300x100”。我也不想删除“标题”样式或调整它的大小。

我怎样才能用回形针做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T19:26:25.600

如果我了解您的想法是这样的：[回形针更改大小](https://github.com/thoughtbot/paperclip/wiki/Extracting-image-dimensions)

此外：

```
attr_accessor :size

...
self.dimensions = self.size.split("x") 
```

控制器：

```
def create
  ...
  @file.size = params[:size] # OR Simply include such field in form
  ...
end 
```

例子：

模型：

```
class File
  has_attached_file :upload
  attr_accessor :size
  before_save :extract_dimensions
  serialize :dimensions
  ...
  def extract_dimensions
    ...
    self.dimensions = self.size.split("x")
  end
end 
```

形式：

```
<form action="some link">
  ...
  <label>Size: </label><select name="file_size">
    <option value="100x200">Large</option>
    ...
  </select>
</form> 
```

# python - 在单行中使用 telnet 在远程机器上执行命令

> ID：10280750
> 
> 赞同：3
> 
> 时间：2012-04-23T12:40:29.353
> 
> 标签：python, command, telnet

我想使用 telnet 在远程机器上执行命令，

telnet xxxx 命令或类似命令

我想将其作为 Python （ subprocess ）脚本的一部分包含在内，因此需要将它放在一行中。或者，还有其他方法可以做到这一点吗？

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:46:22.903

与其依赖`subprocess`，您可以尝试使用 Python 的内置[`telnetlib`](http://docs.python.org/library/telnetlib.html)函数。

文档中提供了一个几乎完全符合您要求的完整示例：http: [//docs.python.org/library/telnetlib.html#telnet-example](http://docs.python.org/library/telnetlib.html#telnet-example)

我个人也想看看目标系统上是否可以使用 SSH。您不仅可以使用安全连接，还可以设置 SSH 密钥并使用 SSH 的内置支持来执行单个命令（例如`ssh user@example.com ls -l`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-11T06:26:17.380

```
#!/bin/sh
empty -f -i in -o out telnet foo.bar.com
empty -w -i out -o in "ogin:" "luser\n"
empty -w -i out -o in "assword:" "TopSecret\n"
empty -s -o in "who am i\n"
empty -s -o in "exit\n" 
```

[http://empty.sourceforge.net/](http://empty.sourceforge.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:23:38.387

也许[这个](https://stackoverflow.com/a/283747/15931)解决方案会很有用，但正如其中所述，如果您需要用户/密码身份验证，它将无法工作。

为了跳过手动用户/密码验证，设置 ssh 密钥是可行的方法。这里有一个简短的解释：[SSH to a server without password for Admin Ease](http://www.web-manual.net/linux-3/ssh-configuration-from-source-to-target-server-for-admin-ease-ssh-key-authentication/)

# php - MySql - 将 InnoDB 转换为数据库的 MyISAM 存储引擎

> ID：10280754
> 
> 赞同：31
> 
> 时间：2012-04-23T12:40:51.843
> 
> 标签：php, mysql, phpmyadmin

如何将数据库存储引擎从`InnoDB`转为`MyISAM`开启`MySQL`？我发现很多网站都转换了数据库表的存储引擎，但不是数据库。 ![我附上了屏幕截图以便更好地理解](../Images/118bf4b40c389aa851ced844a630f8cc.png)

提前致谢。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-10-08T13:22:40.167

用这个！！

```
SET storage_engine=MYISAM;
ALTER TABLE table_name ENGINE = MyISAM; 
```

-干杯！！

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-06-27T05:53:34.740

```
ALTER TABLE `table_name` ENGINE=INNODB 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-23T12:53:10.160

您无法更改数据库的默认存储引擎，但您可以使用`default-storage-engine`配置设置为整个服务器更改它。请注意，这实际上不会更改现有表的存储引擎，只是更改后创建的新表。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-23T12:51:30.800

数据库只是 MySQL 的命名空间方式，因此数据库没有与之关联的引擎，只有表有存储引擎。这就是为什么您可以拥有一个包含多个不同表的数据库，每个表都有不同的引擎。

您必须一一修改每个表才能将它们切换到 InnoDB。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-09-03T02:39:57.273

要使其永久化，请添加到 my.cnf （几个位置取决于上下文）

/etc/my.cnf

`default-storage-engine= MyISAM`

为了安全起见，使用 show databases 输出 db 列表；

就我而言，使用 php 进行快速操作。

```
$db = mysql_connect('localhost','someadmin','somepass');
$dbs = array();
$dbs[] = 'test';
$dbs[] = 'myImportantDb';

foreach($dbs as $v){
    mysql_select_db($v);
    $q = mysql_query('show tables');
    $tables = array();
    while($r = mysql_fetch_row($q)){
            $tables[] = $r[0];
    }
    foreach($tables as $t){
        echo "do $v.$t\n";
        mysql_query('ALTER TABLE `'.$t.'` ENGINE=MyISAM;');
    }
}
mysql_close($db); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-30T12:13:50.663

在 PhpMyadmin 4.5 中选择变量选项卡并找到 **存储引擎** 并选择编辑并键入 MyISAM。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-19T15:26:07.613

您可以通过 PhpMyAdmin 更改存储引擎。在表的详细信息视图中。看截图：

[在 PhpMyAdmin 中更改存储引擎](https://i.stack.imgur.com/guCqA.png)

# android - 如何在 Android 中动态或静态设置文本字段属性

> ID：10280755
> 
> 赞同：0
> 
> 时间：2012-04-23T12:40:53.007
> 
> 标签：android

如何在 Android 中为文本字段设置以下两个属性：

（**属性 1**）如何设置包含一些文本的文本字段，例如“输入数字”，但是当单击它时，文本字段会自动变为空？

（**属性：2**）假设我的应用程序中有两个文本字段。我的*第一个*文本字段只接受整数，*第二个*文本字段接受诸如“姓名、地址”等文本。但是我错误地在我的第一个只接受数字的文本字段中输入了一些文本，如“apple”或“ball”。

如何设置我的*第一个*文本字段，以便当我单击*第二个*文本字段时，我的*第一个*文本字段应该显示一条 toast 消息或更改输入数据的颜色以指示无效输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:44:50.667

对于你的第一个问题...

> 我如何设置包含“输入数字”之类的文本的文本字段，但是当我们单击文本字段时，应自动从文本字段中删除的文本变为空。

您正在寻找EditText 视图具有的**提示属性。**在这里阅读更多：http: [//developer.android.com/reference/android/widget/TextView.html#attr_android :hint](http://developer.android.com/reference/android/widget/TextView.html#attr_android:hint)

对于第二个问题，您不需要经历所有这些麻烦。只需为 EditText 设置**inputType**属性。这将强制键盘（虚拟或物理）仅使用字符串或数字，具体取决于您指定的输入类型。在这里阅读更多：http: [//developer.android.com/reference/android/widget/TextView.html#attr_android :inputType](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:47:59.517

属性 1）您可以通过在 EditText 中添加一个 ht 来做到这一点：

```
<EditText

                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:hint="Your text here"
 /> 
```

属性 2) 名称：

```
 <EditText

                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:hint="Your text here"
                        android:inputType="textPersonName"
     /> 
```

对于号码：

```
<EditText

                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:hint="Your text here"
                        android:inputType="number"
     /> 
```

[在这里](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)查看所有参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:48:52.980

查看第二期的[setError()](http://developer.android.com/reference/android/widget/TextView.html#setError%28java.lang.CharSequence%29)方法。

# javascript - 访问 Handlebar 模板中的 DOM 元素

> ID：10280758
> 
> 赞同：1
> 
> 时间：2012-04-23T12:40:59.293
> 
> 标签：javascript, jquery, handlebars.js

这一定比我想象的要简单。不知道发生了什么。

我有一个 DIV，我正在用 Handlebar 模板“填充”。生成模板后，我使用 jQuery slideDown 打开面板以查看内容。现在我需要放置一个关闭函数来滑动 DIV。

我认为问题在于 click 函数没有被绑定，因为 a.close 元素在脚本标签内。

这是内容的 DIV：

```
<div id="characteristic" style="bottom:0px; width:800px; display:none; position:fixed; left: 350px;"></div> 
```

这是 jQuery 片段。这是在 HTML 的顶部：

```
$(document).ready(function(e){
  $("a.close").click(function(e) {
     e.preventDefault();
     $("#characteristic").slideUp();
  });
}); 
```

以及模板的一个片段：

```
<script id="ac-template" type="text/x-handlebars-template">
    <div class="holder" style="background-color:#FFFFFF;">
        <div class="frame">
            <div class="content">
                <div class="info-box-holder">
                    <a class="close" href="">&times;</a>
                    <div class="heading">
                        <h2>ACTIONABLE CHARACTERISTIC</h2>
                    </div>
                    <div class="info-box">
                        <a href="#"><img class="alignleft" src="{{image_large}}" alt="" width="400" height="400" /></a>
                        {{#if subcategory_name}}
                            <h2>{{subcategory_name}}: {{name}}</h2>
                        {{else}}
                            <h2>{{category_name}}: {{name}}</h2>
                        {{/if}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T00:02:01.160

我知道这是一个老问题，您可能已经找到了答案，但是是的，这是因为在您的 JS 代码运行时，`a.close`DOM 中不存在。

您需要在把手完成模板渲染后运行 JS 代码，或者绑定到页面加载时存在的更高级别的 DOM 元素（某种容器），然后仅为您想要的链接激活。像这样[的东西（见 API](http://api.jquery.com/on/)）：

```
$(document).ready(function(e){
  $("#mycontainerdiv").on('click', 'div.info-box-holder a.close', function(e) {
     e.preventDefault();
     $("#characteristic").slideUp();
  });
}); 
```

# css - 编辑导航菜单 - 如何包装显示：块，浮动：左以获得居中菜单？

> ID：10280762
> 
> 赞同：1
> 
> 时间：2012-04-23T12:41:13.117
> 
> 标签：css, wrapper, center, navbar

是的，所以，我一直在自我编辑一个相当复杂的网站，并且一直停留在涉及菜单的最后一部分。它有一个 float:left 命令（导航栏显示在屏幕左侧），我一直在尝试使用包装器将其设置为 text-align:center（在屏幕内居中），但没有成功。

下面是编码：

```
#nav a {
    display: block;
    padding: 5px;
    color: #aaa;
    text-decoration: none;
    outline: none;
    font-weight: normal;
    font-family: "Droid Serif", Georgia ,serif;
}
#nav > .current-menu-item > a,
#nav > li a:hover { color: #4C4C4C }
.plus { color: #aaa }
#nav ul {
    position: center;
    display: none;
}
#nav li {
    float: left;
    position: relative;
    list-style-type: none;
    padding-bottom: 5px;
}
#nav li a {
    letter-spacing: 3px;
    font-size: 14px;
    text-transform: uppercase;
    padding: 8px 15px; 
```

我是一个编程菜鸟，几乎可以通过反复试验和谷歌浏览器中的“检查元素”命令来生存。请温柔而解释性强:)

干杯，杰斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:59:32.840

如果你想让 ul 在导航中居中，只需将**宽度**添加到 ul 和**边距：0 auto;** 如果您不想添加宽度，请查看[如何居中对齐水平 <UL> 菜单？](https://stackoverflow.com/questions/2865380/how-do-i-center-align-horizontal-ul-menu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:44:55.203

而不是**float**给**display:inline-block**给你的 LI 。像这样写：

```
#nav li {
    display:inline-block;
    *display:inline;/* For IE*/
    *zoom:1;
    position: relative;
    list-style-type: none;
    padding-bottom: 5px;
} 
```

# c# - 为什么从 UI 中删除命令源后调用 CanExecute？

> ID：10280763
> 
> 赞同：7
> 
> 时间：2012-04-23T12:41:20.840
> 
> 标签：c#, .net, wpf, binding, mvvm

我试图了解为什么在已从 UI 中删除的命令源上调用 CanExecute。这是一个简化的程序来演示：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Height="350" Width="525">
    <StackPanel>
        <ListBox ItemsSource="{Binding Items}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <Button Content="{Binding Txt}" 
                                Command="{Binding Act}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <Button Content="Remove first item" Click="Button_Click"  />
    </StackPanel>
</Window> 
```

代码隐藏：

```
public partial class MainWindow : Window
{
    public class Foo
    {
        static int _seq = 0;
        int _txt = _seq++;
        RelayCommand _act;
        public bool Removed = false;

        public string Txt { get { return _txt.ToString(); } }

        public ICommand Act
        {
            get
            {
                if (_act == null) {
                    _act = new RelayCommand(
                        param => { },
                        param => {
                            if (Removed)
                                Console.WriteLine("Why is this happening?");
                            return true;
                        });
                }
                return _act;
            }
        }
    }

    public ObservableCollection<Foo> Items { get; set; }

    public MainWindow()
    {
        Items = new ObservableCollection<Foo>();
        Items.Add(new Foo());
        Items.Add(new Foo());
        Items.CollectionChanged += 
            new NotifyCollectionChangedEventHandler(Items_CollectionChanged);
        DataContext = this;
        InitializeComponent();
    }

    void Items_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.Action == NotifyCollectionChangedAction.Remove)
            foreach (Foo foo in e.OldItems) {
                foo.Removed = true;
                Console.WriteLine("Removed item marked 'Removed'");
            }
    }

    void Button_Click(object sender, RoutedEventArgs e)
    {
        Items.RemoveAt(0);
        Console.WriteLine("Item removed");
    }
} 
```

当我单击“删除第一项”按钮时，我得到以下输出：

```
Removed item marked 'Removed'
Item removed
Why is this happening?
Why is this happening? 
```

“为什么会这样？” 每次单击窗口的某个空白部分时，都会不断打印。

为什么会这样？我可以或应该做些什么来防止 CanExecute 在已删除的命令源上被调用？

*注意：*可以在[此处](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030)找到 RelayCommand 。

**迈克尔·伊登菲尔德问题的答案：**

**Q1：**删除按钮时调用 CanExecute 时的调用堆栈：

> WpfApplication1.exe!WpfApplication1.MainWindow.Foo.get_Act.AnonymousMethod__1(object param) Line 30 WpfApplication1.exe!WpfApplication1.RelayCommand.CanExecute(object parameter) Line 41 + 0x1a bytes PresentationFramework.dll!MS.Internal.Commands.CommandHelpers.CanExecuteCommandSource (System.Windows.Input.ICommandSource commandSource) + 0x8a 字节 PresentationFramework.dll!System.Windows.Controls.Primitives.ButtonBase.UpdateCanExecute() + 0x18 字节 PresentationFramework.dll!System.Windows.Controls.Primitives.ButtonBase.OnCanExecuteChanged(object发件人，System.EventArgs e) + 0x5 字节 PresentationCore.dll!System.Windows.Input.CommandManager.CallWeakReferenceHandlers(System.Collections.Generic.List 处理程序) + 0xac 字节 PresentationCore.dll!System.Windows.Input.CommandManager.RaiseRequerySuggested(对象 obj) + 0xf 字节

**Q2：**此外，如果您从列表中删除所有按钮（不仅仅是第一个？），这种情况是否会继续发生？

是的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:56:45.800

问题是命令源（即按钮）不会取消订阅`CanExecuteChanged`它所绑定的命令，因此无论何时`CommandManager.RequerySuggested`触发，`CanExecute`在命令源消失很久之后也会触发。

为了解决这个问题，我`IDisposable`在.`RelayCommand``RelayCommand`

这是修改后`RelayCommand`的（原文在[这里](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030)）：

```
public class RelayCommand : ICommand, IDisposable
{
    #region Fields

    List<EventHandler> _canExecuteSubscribers = new List<EventHandler>();
    readonly Action<object> _execute;
    readonly Predicate<object> _canExecute;

    #endregion // Fields

    #region Constructors

    public RelayCommand(Action<object> execute)
        : this(execute, null)
    {
    }

    public RelayCommand(Action<object> execute, Predicate<object> canExecute)
    {
        if (execute == null)
            throw new ArgumentNullException("execute");

        _execute = execute;
        _canExecute = canExecute;
    }

    #endregion // Constructors

    #region ICommand

    [DebuggerStepThrough]
    public bool CanExecute(object parameter)
    {
        return _canExecute == null ? true : _canExecute(parameter);
    }

    public event EventHandler CanExecuteChanged
    {
        add
        {
            CommandManager.RequerySuggested += value;
            _canExecuteSubscribers.Add(value);
        }
        remove
        {
            CommandManager.RequerySuggested -= value;
            _canExecuteSubscribers.Remove(value);
        }
    }

    public void Execute(object parameter)
    {
        _execute(parameter);
    }

    #endregion // ICommand

    #region IDisposable

    public void Dispose()
    {
        _canExecuteSubscribers.ForEach(h => CanExecuteChanged -= h);
        _canExecuteSubscribers.Clear();
    }

    #endregion // IDisposable
} 
```

无论我在哪里使用上述内容，我都会跟踪所有实例化的 RelayCommands，以便我可以`Dispose()`在时机成熟时调用：

```
Dictionary<string, RelayCommand> _relayCommands 
    = new Dictionary<string, RelayCommand>();

public ICommand SomeCmd
{
    get
    {
        RelayCommand command;
        string commandName = "SomeCmd";
        if (_relayCommands.TryGetValue(commandName, out command))
            return command;
        command = new RelayCommand(
            param => {},
            param => true);
        return _relayCommands[commandName] = command;
    }
}

void Dispose()
{
    foreach (string commandName in _relayCommands.Keys)
        _relayCommands[commandName].Dispose();
    _relayCommands.Clear();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:23:14.750

使用 lambda 表达式和您似乎正在触发的事件存在一个已知问题。我不愿称其为“错误”，因为我对内部细节的了解不足以知道这是否是预期的行为，但这对我来说似乎违反直觉。

这里的关键指示是调用堆栈的这一部分：

```
PresentationCore.dll!System.Windows.Input.CommandManager.CallWeakReferenceHandlers(
   System.Collections.Generic.List handlers) + 0xac bytes 
```

“弱”事件是一种连接不保持目标对象存活的事件的方法；之所以在这里使用它，是因为您将一个 Lamba 表达式作为事件处理程序传递，因此包含该方法的“对象”是一个内部生成的匿名对象。问题是传递`add`给事件处理程序的对象与传递给事件的对象不是同一个表达式实例`remove`，它只是一个功能相同的对象，因此它不会被您的事件取消订阅。

有几种解决方法，如以下问题中所述：

[用于 lambda 的弱事件处理程序模型](https://stackoverflow.com/questions/1747235/weak-event-handler-model-for-use-with-lambdas)

[在 C# 中使用 Lambda 取消挂钩事件](https://stackoverflow.com/questions/859936/unhooking-events-with-lambdas-in-c-sharp)

[使用 lambdas 作为事件处理程序会导致内存泄漏吗？](https://stackoverflow.com/questions/16473/can-using-lambdas-as-event-handlers-cause-a-memory-leak)

对于您的情况，最简单的方法是将您的 CanExecute 和 Execute 代码移动到实际方法中：

```
if (_act == null) {
  _act = new RelayCommand(this.DoCommand, this.CanDoCommand);
}

private void DoCommand(object parameter)
{
}

private bool CanDoCommand(object parameter)
{
    if (Removed)
      Console.WriteLine("Why is this happening?");
    return true;
} 
```

或者，如果您可以安排您的对象从 lambda 构造`Action<>`和`Func<>`委托一次，将它们存储在变量中，并在创建时使用这些变量，`RelayCommand`它将强制使用相同的实例。IMO，对于您的情况，这可能比它需要的更复杂。

# selenium - 无法单击 Selenium IDE 上的提交按钮

> ID：10280766
> 
> 赞同：1
> 
> 时间：2012-04-23T12:41:30.663
> 
> 标签：selenium, selenium-ide

在打开 selenium 并填写表单后，我无法让 Selenium IDE 单击我的一个网络表单上的提交按钮。我正在使用 clickAndWait 命令并通过其 ID 识别按钮：

```
 <td>clickAndWait</td>
 <td>id=ctl00_ContentPlaceHolder1_OSVFHResults_btSave</td>
 <td></td> 
```

有趣的是，如果我编写一个脚本只是打开表单并单击提交按钮而不填写它，我没有任何问题。在我要求 Selenium 填写表格后，我的问题就出现了。此外，如果我尝试手动单击提交按钮，如果用于填写表单的 Selenium 脚本在我手动输入之前运行，则它不起作用。如果我手动打开并填写表单，单击提交就没有问题，而且 Selenium 可用于站点上所有其他表单的提交按钮。有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:23:14.583

`type`您可以尝试使用命令来代替填写表格`typeKeys`。它模拟指定元素上的击键事件，就像您逐键键入值并可能启用您的提交按钮一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T04:20:35.507

在表单中输入值后，只需尝试**“ClickAtandWait”**而不是**“clickandWait”** ..我也遇到过一次问题，它曾经给过手一次..

```
selenium.clickAtandWait("locator", "position"); 
```

如果您知道确切的“位置”，则将其放置，否则将其保留为空字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T13:45:29.100

`click()`听起来像一些与（例如`mouseover`或）无关的javascript事件`onkeydown`被附加到一个或多个表单字段并负责启用提交按钮。

您必须查看正在触发的确切事件，方法是使用诸如 firebug 之类的东西查看源，或者使用 javascript 调试器。然后修改您的 Selenium 脚本以确保触发相同的事件。

# java - 如何在客户端和服务器之间共享类实体？

> ID：10280767
> 
> 赞同：1
> 
> 时间：2012-04-23T12:41:33.820
> 
> 标签：java, eclipse

我有2个项目：

1) 客户端 - Android
2) 服务器 - Google App Engine

在服务器端，我有一个名为**Profile**的类 Entity 。
我将它包含在客户端服务器项目的构建路径中。我正在客户端中创建配置文件的新实例，将其发送到服务器并将其存储在 JPA DB 中。
在特定时间后，在服务器端，我从服务器向量和服务器中的所有客户端发送给用户。

问题是：

当我添加配置文件的构建路径时，我得到：

```
The project was not built since its build path is incomplete. Cannot find the class file for javax.jdo.spi.PersistenceCapable. 
The type javax.jdo.spi.PersistenceCapable cannot be resolved. It is indirectly referenced from required .class files 
```

所以在客户端我添加了`jdo2-api-2.3-eb.jar`. 问题似乎消失了。但是在运行时，当我将配置文件向量从服务器发送到客户端时，我得到：

```
 java.io.InvalidClassException: javax.jdo.identity.LongIdentity; Incompatible class (SUID): javax.jdo.identity.LongIdentity: static final long serialVersionUID =2472141538875317527L; but expected javax.jdo.identity.LongIdentity: static final long serialVersionUID =2940818939440220368L; 
```

我相信是由 `jdo2-api-2.3-eb.jar`我添加的。

所以我问如何正确地做到这一点？我知道 Maven 或 Ant 可以解决这个问题，但看起来很乱。仅使用基本的 Eclipse 来解决这个问题有什么旧方法吗？如果不是，我将不胜感激附带好的教程的其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:04:44.680

我会使用非二进制格式来传输数据，例如 JSON 或 XML。尝试使用二进制序列化会让人头疼，即使您解决了构建路径问题，即使您使用了更简单的“传输”bean 对象。例如，当您想要更新客户端或服务器时，您必须使它们完全同步（JAR），如果没有大量加班。但是通过使用 JSON 或 XML，客户端和服务器可以在某种程度上独立发展。

在 Android 上使用 XML 或 JSON 非常简单，对于 Java EE（服务器）也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:47:48.003

就我而言，我们有很多休眠对象。由于各种原因，您无法将这些对象发送给客户端。你在同一条船上。

在我的项目中，我创建了单独的简单 bean，用于在服务器和客户端之间传输数据。然后还有用于从内部对象转换到这些外部可移植、可序列化对象并返回的代码。我们曾经使用 RMI 来回发送这些对象。这些天我们使用Hessian。

您可以将这些类放在一个单独的项目中，这样您就可以让客户端和服务器都将它们放在它们的类路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:01:08.757

您需要将实体类放在一个 jar 中，并将相同版本的 jar 分发到服务器和客户端。在反序列化对象时，JVM 将使用 serialVersionUID 检查它们是否属于同一版本的类

如果在任何实体中声明[serialVersionUID会更好](https://stackoverflow.com/questions/285793/why-should-i-bother-about-serialversionuid)

# c++ - 从 flv 视频（或任何其他视频）中提取音频的算法。怎么办？

> ID：10280768
> 
> 赞同：0
> 
> 时间：2012-04-23T12:41:37.863
> 
> 标签：c++, python, audio, extract, flv

我目前想编写一个程序，它可以使用 python 或 c++ 从 FLV 视频中提取音频。我不知道该怎么做？是否有某种教程或任何可以帮助我的东西？请帮我在这里学习。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:58:34.090

实际上你可以使用 MPlayer 来做到这一点，例如

```
mplayer video.flv -vo null -ao pcm:file=file.wav 
```

因此，您可以将它与来自 python（或 C）的调用结合使用。另一种方法是使用MPlayer 内部使用的[FFmpeg 。](http://sourceforge.net/projects/ffmpeg/)

# jquery - 如何在 Android 的 phonegap 应用程序中绘制 jqplot 图表

> ID：10280770
> 
> 赞同：0
> 
> 时间：2012-04-23T12:41:41.593
> 
> 标签：jquery, android, cordova, jqplot

我正在为 Android 开发一个 Phonegap 应用程序。
我想实现一个简单的jqplot图表

```
var plot1 = $.jqplot('graphcontentview', [[3,7,9,1,4,6,8,2,5]]); 
```

其中 graphcontentview 是包含图表的 div 的 id。

当我运行此代码时，它会产生以下错误 -

```
Uncaught TypeError: Object function (a,b){return new e.fn.init(a,b,h)} has no method 'jqplot' at file:///android_asset/www/hellophonegap.js:27 
```

其中 hellophonegap.js 是我的 js 文件，稍后我将使用此 js 将代码写入我的 index.html 文件。

我为 jqplot 图表添加了以下 js 代码

```
<script type="text/javascript" src="jquery.jqplot.min.js"></script> 
<script type="text/javascript" src="/plugins/jqplot.canvasTextRenderer.min.js"></script>
<script type="text/javascript" src="/plugins/jqplot.jqplot.canvasAxisLabelRenderer.min.js"></script> 
```

我没有得到确切的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:57:58.917

检查 jquery.jqplot.min.js 文件的路径

# c# - 使用带有上下文菜单项单击事件的 switch case

> ID：10280772
> 
> 赞同：0
> 
> 时间：2012-04-23T12:41:45.723
> 
> 标签：c#

我有一个上下文菜单，其中包含有很多项目的子菜单。那么我如何使用 case switch 或类似的东西来处理这些项目的单击事件，而不是从设计器中双击它们？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:43:33.400

将它们发送到相同的单击事件处理程序。

然后您可以使用该`sender`参数来确定单击了哪个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:48:28.593

您可以双击第一个（任意），然后复制生成的事件处理程序的*名称*`Click`并将其粘贴到任何其他`MenuItem`表单`Property`窗口的属性中。

# c# - 根据项目条件的 Windows Phone 样式项目 - XAML 样式

> ID：10280774
> 
> 赞同：1
> 
> 时间：2012-04-23T12:41:46.430
> 
> 标签：c#, wpf, silverlight, windows-phone-7, xaml

我有一个 RadDataBoundListBox （它是一个具有更多选项和属性等的高级列表框......）我的 ListBox 绑定到一个通知列表，每个通知都有一个布尔属性未读​​，我想要做的是如果项目未读（未读= true) 我希望字体颜色为蓝色，如果 Unread = false 字体颜色保持白色...我不知道该怎么做

这是我的列表框代码：

```
<telerikPrimitives:RadDataBoundListBox 
        HorizontalAlignment="Left" 
        Margin="3,4,0,0" 
        Name="radListNotifications" 
        VerticalAlignment="Top" 
        Width="453" 
        SelectionChanged="radListNotifications_SelectionChanged">
    <telerikPrimitives:RadDataBoundListBox.ItemTemplate>
        <DataTemplate>                                                 
            <StackPanel>
                <TextBlock  Text="{Binding Message}" 
                            TextWrapping="Wrap" 
                            HorizontalAlignment="Left" 
                            VerticalAlignment="Top" 
                            Padding="0,3,0,0" 
                            FontFamily="{StaticResource PhoneFontFamilyLight}" 
                            FontSize="{StaticResource PhoneFontSizeExtraLarge}" 
                            Foreground="{StaticResource PhoneForegroundBrush}" 
                            LineStackingStrategy="BlockLineHeight" 
                            LineHeight="43" />

                <TextBlock  Text="{Binding Time}" 
                            Opacity="0.65" 
                            HorizontalAlignment="Left" 
                            FontSize="{StaticResource PhoneFontSizeSmall}" 
                            TextWrapping="Wrap" 
                            VerticalAlignment="Top" 
                            Foreground="{StaticResource PhoneForegroundBrush}" 
                            FontFamily="{StaticResource PhoneFontFamilyNormal}" 
                            Margin="0,0,0,13"/>
            </StackPanel>                              
        </DataTemplate>
    </telerikPrimitives:RadDataBoundListBox.ItemTemplate>
</telerikPrimitives:RadDataBoundListBox> 
```

这是我应用 ItemSource 的代码：

```
List<TimeTierUserActions.Notification> listNotifications = e.Result.ToList();
radListNotifications.ItemsSource = listNotifications; 
```

你知道我怎么能做到这一点吗？我的意思是如果通知是 Read 字体颜色保持不变，但如果未读更改项目的颜色（通知）。

这是加载时 ListBox 的屏幕截图

[单击此处显示我的列表框](http://i.stack.imgur.com/1dHH4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:49:52.287

假设您的对象上有一个属性表示消息是否未读，您应该使用转换器来确定前景色...

```
<TextBlock 
    Text="{Binding Message}" 
    TextWrapping="Wrap" 
    HorizontalAlignment="Left" 
    VerticalAlignment="Top" 
    Padding="0,3,0,0" 
    FontFamily="{StaticResource PhoneFontFamilyLight}" 
    FontSize="{StaticResource PhoneFontSizeExtraLarge}" 
    Foreground="{Binding IsUnread, Converter={StaticResource UnreadBrushConverter}}" 
    LineStackingStrategy="BlockLineHeight" 
    LineHeight="43" /> 
```

然后，您的转换器会将未读标志作为参数，就像这样......

```
public class UnreadMessageBrushconverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        // hard-coded colours example,  you may want to look at 
        // using predefined resources for this, though.
        return (bool)value ? new SolidColorBrush(Colors.Red) : new SolidColorBrush(Colors.White);
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

您还需要在 XAML 中声明转换器的实例（在本例中使用命名空间“conv”）

```
<conv:UnreadMessageBrushconverter x:Key="UnreadBrushConverter" /> 
```

如果您不熟悉转换器，请看这里 -> [http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter(v=vs.95).aspx)

# jquery - 带有 jQ uery 的 Backbone.js 没有按预期改变 dom

> ID：10280776
> 
> 赞同：0
> 
> 时间：2012-04-23T12:41:47.880
> 
> 标签：jquery, backbone.js, backbone-events

store-models.js 模型

```
 (function ($) {

  Category = Backbone.Model.extend({
    //Create a model to hold friend atribute
    name: null
  });

  Categories = Backbone.Collection.extend({
    //This is our Friends collection and holds our Friend models
    initialize: function (models, options) {
      this.bind("add", options.view.addFriendLi);
      //Listen for new additions to the collection and call a view function if so
    }
  });

  CategoryView = Backbone.View.extend({
    el : $("li"),
    initialize:function(){
          $(this.el).html(this.model.get("name"));
          console.log("initialize"+this.model.get("name"));
    },
    events:{
        "click": "showPrompt",
    },
    showPrompt : function(){
        alert("test");
    }
  });

  AppView = Backbone.View.extend({
    el: $("body"),
    initialize: function () {
      this.friends = new Categories( null, { view: this });

      //Create a friends collection when the view is initialized.
      //Pass it a reference to this view to create a connection between the two
    },
    events: {
      "click #add-friend":  "showPrompt",
    },
    showPrompt: function () {
      var friend_name = prompt("Who is your friend?");
      var friend_model = new Category({ name: friend_name });
      //Add a new friend model to our friend collection
      this.friends.add( friend_model );
    },
    addFriendLi: function (mymodel) {
      //The parameter passed is a reference to the model that was added
      friendView = new CategoryView({model: mymodel});
      $("#categories").append(friendView.el);
      console.log(friendView.el);
      //Use .get to receive attributes of the model
    }
  });  

    setTimeout('addCategories()',2000);
//    var appview = new AppView;
})(jQuery);

function addCategories()
{
    var appview = new AppView;
    appview.showPrompt();

} 
```

html

```
 <!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

    <!-- Basic Page Needs
  ================================================== -->
    <meta charset="utf-8">
    <title>{% block title %}This is the title{% endblock %}</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Mobile Specific Metas
  ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- CSS
  ================================================== -->
    <link rel="stylesheet" href="/static/css/base.css">
    <link rel="stylesheet" href="/static/css/skeleton.css">
    <link rel="stylesheet" href="/static/css/layout.css">
    <link rel="stylesheet" href="/static/css/style.css">
    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Favicons
    ================================================== -->
    <link rel="shortcut icon" href="/static/images/favicon.ico">
    <link rel="apple-touch-icon" href="/static/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/images/apple-touch-icon-114x114.png">
    <script src='/static/js/jquery.js' ></script>
    <script src='/static/js/underscore.js' ></script>
    <script src='/static/js/backbone.js' ></script>
    <script src="/static/js/tabs.js"></script>
    <script src="/static/js/store-models.js"></script>
</head>
<body>

    <div id="categories">
    </div>
</body> 
```

问题是代码没有将 li 元素附加到 categories-list ，即使前面的主干.js 代码看起来应该如此。

这里有什么建议吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:04:21.073

作为开始检查：

1.  您已经将您的`addCategories()`功能留在了范围之外，我认为它不会访问您的 AppView 类
2.  删除 setTimeout 中不必要的引号以提供适当的回调

    ```
    /* ... code ... */

    function addCategories()
    {
       var appview = new AppView;
       appview.showPrompt();
    } 

    setTimeout(addCategories,2000);

    })(jQuery); 
    ```

如果您进行更改，您的代码将起作用

### 编辑：

您的类别视图中没有“li”元素（因为您没有创建任何内容）

这就是您的 CategoryView.el 始终未定义的原因。

与其在视图扩展中设置它，不如在有模型填充它时立即设置它。

```
CategoryView = Backbone.View.extend({
   initialize:function(){
      this.setElement($("<li>"+this.model.get("name")+"</li>"));
      log("initialize"+this.model.get("name"));
   },

   /* rest of code */ 
```

然后，您可以在您的代码的*更新*jsfiddle 中进行试验，[这里是](http://jsfiddle.net/drinchev/P4Z6J/2/)

# java - 阅读 xml - java, dom

> ID：10280779
> 
> 赞同：0
> 
> 时间：2012-04-23T12:42:05.307
> 
> 标签：java, xml, dom, xml-parsing

我在使用 dom 从 xml 读取数据时遇到问题。我不知道为什么“System.out.println(nNode.getChildNodes().item(0).hasAttributes());” 返回 false... 在我的 xml 文件中，此节点包含属性。请问你能帮帮我吗？

这是我的代码：

```
import java.io.File;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class XmlParser {
    private String[] linia;
    private String[] wariant;
    private String[] przystanek;
    private String[] tabliczka;
    private String[] dzien;
    private String[] godz;
    private String[] min;

    public void readXml() {
        try {

            File fXmlFile = new File("c:\\file.xml");
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory
                    .newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(fXmlFile);
            doc.getDocumentElement().normalize();

            System.out.println("Root element :"
                    + doc.getDocumentElement().getNodeName());
            NodeList nList = doc.getElementsByTagName("linia");
            System.out.println("-----------------------");

            Node nNode = nList.item(0);
            linia = new String[nNode.getAttributes().getLength()];
            System.out.println(nNode.getAttributes().getLength());
            int i = 0;
            while (i < nNode.getAttributes().getLength()) {
                linia[i] = nNode.getAttributes().item(i) + "";
                System.out.print(linia[i] + " ");
                i++;
            }

            wariant = new String[nNode.getChildNodes().getLength()];
            System.out.println();
            System.out.println(nNode.getChildNodes().getLength());
            System.out.println(nNode.getNodeName());
            int j = 0;
            System.out.println(nNode.getChildNodes().item(0).hasAttributes());
            while (j < nNode.getChildNodes().getLength()) {

                wariant[j] = nNode.getChildNodes().item(j).getAttributes()
                        .item(0)
                        + "";
                // if(wariant[j].toString()!=null)
                System.out.println("    " + wariant[j]);
                j++;
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:44:50.887

您是否检查过索引 1 处的子节点？我的猜测是，您的解析器将标记（换行符、制表符、空格）之间的所有字符视为 CDATA，并将它们解析为没有属性的 CDATA 节点。

# c++ - C++ 使用 WINAPI（无 MFC）启动几个无模式对话框

> ID：10280781
> 
> 赞同：0
> 
> 时间：2012-04-23T12:42:30.563
> 
> 标签：c++, winapi, dialog, modeless

我一直试图让我的程序在选择不同的菜单项时显示不同的无模式对话框。到目前为止，我只在显示 1 但我无法让它工作。

当我运行我的代码时，我可以看到主窗口失去焦点，但没有显示关于对话框。

```
HWND g_hToolbar = NULL;
HWND hDlgCurrent = NULL;

int APIENTRY _tWinMain(HINSTANCE hInstance,
HINSTANCE hPrevInstance,
LPTSTR    lpCmdLine,
int       nCmdShow)
{
UNREFERENCED_PARAMETER(hPrevInstance);
UNREFERENCED_PARAMETER(lpCmdLine);

MSG msg;
HACCEL hAccelTable;

LoadString(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING);
LoadString(hInstance, IDC_GUIAPP, szWindowClass, MAX_LOADSTRING);
MyRegisterClass(hInstance);

// Perform application initialization:
if (!InitInstance (hInstance, nCmdShow))
{
    return FALSE;
}

while(GetMessage(&msg, NULL, 0, 0) > 0)
{
    if(!IsDialogMessage(g_hToolbar, &msg))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
}
return (int) msg.wParam;
} 
```

这是我的关于框的代码：

```
INT_PTR CALLBACK About(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{

UNREFERENCED_PARAMETER(lParam);
switch (message)
{
case WM_CREATE:
    g_hToolbar = CreateDialog(GetModuleHandle(NULL), MAKEINTRESOURCE(IDD_ABOUTBOX),
        hDlg, ToolDlgProc
        );
    if(g_hToolbar != NULL)
    {
        ShowWindow(g_hToolbar, SW_SHOW);
    }
case WM_INITDIALOG:
    return (INT_PTR)TRUE;

case WM_ACTIVATE:
    if (0 == wParam)             // becoming inactive
        hDlgCurrent = NULL;
    else                         // becoming active
        hDlgCurrent = hDlg;
    return FALSE;

case WM_COMMAND:
    if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDOK)
    {
        EndDialog(hDlg, LOWORD(wParam));
        return (INT_PTR)TRUE;
    }
    break;
}
return (INT_PTR)FALSE;
} 
```

然后我在 WndProc 中调用

```
 case IDM_ABOUT:
        CreateDialog(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);        
        break; 
```

对于粘贴如此大的代码部分，我深表歉意，但我不知道问题到底出在哪里。

对此的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:54:34.487

这个问题已经解决。

解决方案包含在评论中。

# iphone - 从 iTunes 安装应用程序失败

> ID：10280783
> 
> 赞同：0
> 
> 时间：2012-04-23T12:42:32.223
> 
> 标签：iphone, ios, itunes

我在我的 iPhone 应用程序中将版本号更改为更高版本。当我从 XCode 运行应用程序时，它运行成功。但是当我尝试从 iTunes 将它放在我的设备上时，安装失败。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:02:33.773

I have gotten this error before. It happened because I signed the build and the IPA with different keys by mistake. You need to be sure the one in your build settings matches the one you use to sign the IPA when you make it from the archive. Also of course they both need to be adhoc certificates,

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:02:27.743

您需要删除存在的配置文件在设置>常规>配置文件中删除属于您的应用程序的配置文件还从iPhone中删除该应用程序并下载配置文件表单developer.apple yourAccount然后拖放到桌面上并双击然后将 ipa nad 和该配置文件拖放到 iTunes 中，然后同步应用程序将立即安装

# android - 使用另一个包名生成 android 项目副本的脚本

> ID：10280786
> 
> 赞同：1
> 
> 时间：2012-04-23T12:42:44.620
> 
> 标签：android, ant, package

我正在寻找编写（或查找：D）一个脚本，以将现有的 Android 项目源转换为具有我提供的另一个包名称的副本。

源有包，如 it.pinco.pallino.source 和复制将像 it.pinco.pallino.test1 等...其中 test1 是一个参数。

我正在寻找使用 ANT 或此脚本[https://github.com/lijunjieone/RenameAndroidPackage](https://github.com/lijunjieone/RenameAndroidPackage)，但没​​有自述文件，我不知道 python ..

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:42:04.520

这是我为更改包名称而编写的内容，而无需复制任何代码（出于可维护性的原因，我对我的应用程序的免费版和专业版使用相同的代码）。

这是将免费版转换为专业版的脚本。它应该很容易适应您的需求（前提是您在 Linux 下工作，或者使用 Cygwin 或 linux 虚拟机）

```
# 1- rename src folder 
mv src/com/lulo/scrabble/dico src/com/lulo/scrabble/dicopro

# 2- replace references to package in Java, XML and CFG (proguard) files 
find . \( -name "*xml" -o -name "*.java" -o -name "*.cfg" \) -print0 | xargs -0 sed -ri 's/scrabble.dico/scrabble.dicopro/g'

# 3- change the application name
find . -name "*.xml" -print0 | xargs -0 sed -ri 's/\(Free\)/Pro/g'        

# 4- change the icon
cp ../IMAGES/LOGODICO_V2_2012_96px.png res/drawable-xhdpi/icon.png
cp ../IMAGES/LOGODICO_V2_2012_72px.png res/drawable-hdpi/icon.png
cp ../IMAGES/LOGODICO_V2_2012_48px.png res/drawable-mdpi/icon.png
cp ../IMAGES/LOGODICO_V2_2012_36px.png res/drawable-ldpi/icon.png 
```

在此之后，我只需要使用 Eclipse 刷新、构建和导出。

# javascript - Liferay 和 ExtJS

> ID：10280788
> 
> 赞同：3
> 
> 时间：2012-04-23T12:42:46.883
> 
> 标签：javascript, liferay, extjs, portlet

我有带有 Servlet、CSS、JS 和 JSON 的应用程序。它与 ExtJS 3 库一起工作（我将代码保存在另一个项目中）。

**目标是在 Liferay Portlet 中运行此应用程序。**

1.  我创建了名为“portal-portlet”的新 Portlet。
2.  将我所有的 Java 类添加到新的 src 文件夹中。*我想折射代码吗？*
3.  将 WebContent 文件夹中的所有 ExtJS 代码添加到 Portlet 的 docroot > js > extjs3 文件夹。
4.  修改后的 view.jsp：

    <div id="invoice_form"></div>

它与 application.js 链接：

```
Ext.onReady(function() {
// code responsible for rending main window
var main = new Ext.Viewport({
    layout: 'border',
    renderTo: 'invoice_form',
    id: 'main',
    items: [{ 
```

5.. 修改后的 liferay-portlet.xml 如下所示：

<header-portlet-javascript> /js/extjs3/adapter/ext/ext-base.js </header-portlet-javascript>

6.. 创建新的主题项目并将 CSS 添加到 custom.css 和 portlet.css（以覆盖 Liferay 默认 CSS）。我从 ExtJS 复制了 CSS。

这就是我所拥有的。![Liferay 和我的 Portlet](../Images/3eeb6534150d862ae5f39f05384b796d.png) 我的新 ExtJS Portlet 覆盖了所有页面，几乎没有任何内容。假设右栏中有数据表，左栏中有文件管理器。现在您只能看到假设将文件树与表分开的栏

所以我准备从头开始。我应该使用钩子还是主题项目，我做错了什么，如何使它工作？

谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:25:37.447

问题是 Liferay portlet 被渲染到一个 div 中，当您尝试嵌入现有的 Sencha 应用程序时，您会注意到许多节点只是作为 body 的子节点放置的。因此，它完全破坏了您的 Sencha 应用程序，并且大多数情况下最终出现在白屏中。

这就是我为大型 Sencha 应用程序修复它的方法，幸运的是，它已经将所有内容都包装到了 Ext.Viewport 对象中：

现在将它放在您的 view.jsp (portlet) 中：

然后设置您的 Sencha 面板并将它们放入 Viewport 对象中：

```
this._viewport = new Ext.Viewport({
  layout    : 'border',
  margins   : '0 0 0 0',
  renderTo:Ext.get(Repository.Config.GUI_PARENT),
  defaults  : {
    renderTo:Ext.get(Repository.Config.GUI_PARENT)
  }, // default config for all child widgets
  items    : [ 
    new Ext.Panel({ // Header panel for login and toolbar
      region : 'north',
      height : 60,
      margins : '0 0 0 0',
      border : true,
      items :[
        { // Header with logo and login
          region: 'north',
          html: Repository.Templates.login.apply({
                  currentUser : this._currentUser,
                  isPublicUser : this._currentUser=='public'
                }),
          height: 30,
          renderTo:Ext.get(Repository.Config.GUI_PARENT)
        },
        this._controls.toolbar
      ] // Toolbar
    }), // Panel 
    this._controls.centerPanel,
    this._controls.leftPanel,  
    this._controls.rightPanel
  ]
}); 
```

请注意，renderTo:Ext.get(Repository.Config.GUI_PARENT) 文字似乎还没有解决问题，但是！

现在替换 ext-all.js 这个

```
Ext.Viewport = Ext.extend(Ext.Container, {
this.el = Ext.getBody() 
```

和

```
Ext.Viewport = Ext.extend(Ext.Container, {
    this.el = Ext.get(Repository.Config.GUI_PARENT); 
```

其中 Repository.Config.GUI_PARENT 只是一个常量：“root”

我不确定这在一般情况下是否仍然正确，但它现在似乎工作得很好。

# javascript - 如何为这些要求创建 URL 验证 jquery

> ID：10280792
> 
> 赞同：1
> 
> 时间：2012-04-23T12:43:15.603
> 
> 标签：javascript, jquery, jquery-validate

嗨，我有一个用于 URL 验证的 jquery 验证方法，

目前我使用这样的验证规则

```
 var urlregex = new RegExp("^(http|https|ftp)\://([a-zA-Z0-9\.\-]+(\:[a-zA-Z0-9\.&amp;%\$\-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9\-]+\.)*[a-zA-Z0-9\-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(\:[0-9]+)*(/($|[a-zA-Z0-9\.\,\?\'\\\+&amp;%\$#\=~_\-]+))*$");
 var urltest=urlregex.test(url); 
```

这验证了

1\. `http://abcd` 为真。

2\. `http://abcd.com` 为真。

3\. `http://www.abcd` 为真。

4\. `http://www.abcd.com` 为真。

我只希望第 4 个 URL 是真实的。

我想要一个需要的验证

`www`以`http:// (or like https:// , ftp://)`和以结束`.com (or like .org , .lk)`

只有这样的 URL 才能验证为 true

```
http://www.abcd.com
http://www.efgh.lk 
```

请帮忙 。提前致谢 ........................

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:56:08.110

试试这个正则表达式：

```
^(http|https|ftp)\:\/\/www\.[-0-9a-zA-Z]+\.[a-zA-Z]{2,3}$ 
```

**更新**
正则表达式对象初始化 + 无限数量的子域 + 根域中最多 4 个字符：

```
var urlregex = new RegExp(/^(http|https|ftp)\:\/\/www\.([-0-9a-zA-Z]+\.)+[a-zA-Z]{2,4}$/); 
```

# wpf - 在 WPF（或 WinForms）中播放 rtsp 流

> ID：10280794
> 
> 赞同：5
> 
> 时间：2012-04-23T12:43:18.890
> 
> 标签：wpf, winforms, rtsp, mediaelement

有没有办法在 WPF（或 WinForms）中播放 rtsp:// 流？

我试过了[`MediaElement`](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.aspx)，[`MediaUriElement`](http://wpfmediakit.codeplex.com/)但都没有奏效。我还阅读了很多关于 WMP 能够播放 rtsp（也应该翻译为`MediaElement`）的信息，但实际上 WMP 不能在 Windows 7 x64 上播放。我已经看到[了这一点](https://stackoverflow.com/questions/9335456/mediaelement-and-rtsp)，但我希望这不是一个明确的答案。

这与正在使用的视频编解码器有什么关系吗？

VLC 播放 rtsp 流就好了。

我正在寻找 WPF 或 WinForms 组件或替代解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-01-20T20:56:56.687

试试 Accord.Net ( [http://accord-framework.net/](http://accord-framework.net/) )。它有一个非常简单的界面，可以作为 nuget 包 (Accord.Video.FFMPEG) 使用。它可用于检索可在 WinForms/WPF 中使用的 Bitmap 实例。缺点是它不支持 Mono（不确定您的目标平台是什么）。

例子：

```
VideoFileReader reader = new VideoFileReader();
reader.Open("rtsp://192.168......");

while (true)
{
   Bitmap frame = reader.ReadVideoFrame();
   //Do whatever with the frame...
}

reader.Close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T15:21:10.793

我找到[了适用于 WinForm、WPF 和 Silverlight 5 的 VideoLan DotNet，](http://vlcdotnet.codeplex.com/)它现在似乎可以解决问题。缺点是您需要安装 VLC。它不是一个独立的东西。

我希望这对其他人也有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-19T20:49:00.007

迟到总比不到好; 看看这个控件： http: [//www.codeproject.com/Articles/885869/Stream-Player-control](http://www.codeproject.com/Articles/885869/Stream-Player-control)

> 它是一个基于 FFmpeg 的流播放器控件，可以执行以下操作：
> 
> 1.  播放 RTSP/RTMP 视频流
> 2.  检索控件显示的当前帧
> 
> 该控件没有额外的依赖项和简约的界面。
> 
> 要求
> 
> 1.  控件的 WinForms 版本是使用 .NET Framework 2.0 实现的
> 2.  控件的 WPF 版本是使用 .NET Framework 4 Client Profile 实现的
> 
> 这两个版本都是使用 x86 平台目标构建的。

# objective-c - 如何更改状态栏提示的文字颜色？

> ID：10280797
> 
> 赞同：0
> 
> 时间：2012-04-23T12:43:32.200
> 
> 标签：objective-c, cocoa-touch, xcode4, ios4

Cocoa Touch 中导航栏提示（即有可选说明的区域）的文字颜色是否可以改变？可以使用此更改文本

```
[self.navigationItem setPrompt:@"My Prompt"]; 
```

但是这个文本的颜色呢？谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-23T12:47:51.683

您可以在导航中添加 UILabel 并设置它的颜色

```
-(void) viewDidLoad {
    UILabel *theLabel = [ [UILabel alloc ] initWithFrame:CGRectMake((self.bounds.size.width / 2), 0.0, 150.0, 43.0) ];
theLabel.textAlignment =  UITextAlignmentCenter;
theLabel.textColor = [UIColor whiteColor];
theLabel.backgroundColor = [UIColor blackColor];
theLabel.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size:(36.0)];

    UIView *myLabel = (make a view and add "theLabel" to it)

    UIBarButtonItem *myBarButtonItem = [[UIBarButtonItem alloc] initWithCutomView:myLabel];
    [self.navigationController.navigationItem setRightBarButtonItem:myBarButtonItem animated:NO]

} 
```

# ruby - Ruby中的普通变量与实例变量，有什么区别？

> ID：10280801
> 
> 赞同：14
> 
> 时间：2012-04-23T12:43:35.223
> 
> 标签：ruby, variables

考虑以下示例 ruby​​ 类

```
class User
  def hello
    puts "hello"
  end
end 
```

现在，用于初始化。有两种方法

**正常变量**

```
1.9.3p125  > tr = User.new
 => #<User:0x98778c4>
1.9.3p125  > tr.hello
 Hello world
 => nil` 
```

**实例变量：**

```
1.9.3p125 > @tr = User.new
 => #<User:0x9890f2c>
1.9.3p125 > @tr.hello
Hello world
 => nil 
```

现在，在这两种情况下，它的工作原理都是一样的。那么普通变量与实例变量有什么区别？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-23T12:52:53.860

普通变量仅在当前上下文中具有作用域；一个实例变量的作用域贯穿于一个类的一个实例中。在您的情况下，他们感到困惑，因为上下文是`main`，它充当`Object`.

考虑以下内容，这可能会使事情更清楚

```
class User
  def set_name
    @name = "Bob"
    surname = "Cratchett"
  end

  def hi
    puts "Hello, " + @name
  end

  def hello
    puts "Hello, Mr " + surname
  end
end

irb(main):022:0> u = User.new
=> #<User:0x29cbfb0>
irb(main):023:0> u.set_name
irb(main):024:0> u.hi
Hello, Bob
=> nil
irb(main):025:0> u.hello
NameError: undefined local variable or method `surname' for #<User:0x29cbfb0 @name="Bob"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T12:48:42.850

普通变量称为*局部变量*，并且对于定义它的代码结构是局部的（如果您在方法中定义它，则无法在该方法之外访问它）。

实例*变量*是对象的特定实例的局部变量。如果一个对象更改了实例变量的值，则该更改仅针对该对象发生。

类的所有实例也有本地*类变量：*

`@@class_variable = 'a class variable'`

并且可以从程序中的任何位置访问*全局变量：*

`$global_variable = 'a global variable'`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T12:48:34.417

局部变量只能在定义它的方法中使用（或者，当变量在顶层定义时，只能在任何方法之外）。实例变量可以从在同一实例上调用的任何方法中使用。

这是一个您可以看到差异的示例：

```
@tr = User.new

def foo
  @tr.hello
end

foo
# Hello World

tr = User.new

def bar
  tr.hello
end

bar
# Exception because tr is not accessible from within bar 
```

# css - CSS 文件夹中的 JSF 和背景图像，没有“#{resource}”引用

> ID：10280808
> 
> 赞同：0
> 
> 时间：2012-04-23T12:44:13.780
> 
> 标签：css, jsf-2

在 JSF2 中，我正在尝试[将](https://stackoverflow.com/a/6835701/1099452)背景图像放在 css 文件夹中以避免`#{resource}`引用，这是**BalusC**的最后一个选项：

> **然而，更好**的方法是将包含 CSS 的图像存储在 CSS 文件夹中，这样您就无需在 CSS 中摆弄#{resource}。

但是按照他的指示，样式表链接构建为

```
<link type="text/css" rel="stylesheet" href="/webapp/javax.faces.resource/css/stylesheet.css.xhtml"> 
```

并且来自CSS的内容，图像，试图从`/webapp/javax.faces.resource/css/images`找不到图像的文件夹中获取它。

我做错了什么？
因为`text.xhtml`以旧方式导入 CSS：

```
<link type="text/css" rel="stylesheet" href="resources/css/stylesheet.css" /> 
```

它可以正确获取图像。
很抱歉提出一个新问题，但我没有足够的声誉来发表评论:(

# javascript - 将 XML 存储在变量中的 Javascript XSLT 转换

> ID：10280814
> 
> 赞同：0
> 
> 时间：2012-04-23T12:44:33.617
> 
> 标签：javascript, jquery, xml, xslt

我需要在 Javascript 中使用 XSLT 转换 XML 字符串。XSLT 存储在自己的文件中，而 XML 是更大 XML 文档的一部分，因此作为字符串存储在变量中。

我目前的解决方案如下所示：

```
xslt = document.implementation.createDocument("","",null);
xslt.async = false;
xslt.load('xslfile.xsl');

xml = document.implementation.createDocument("","",null);
// here I need to include the XML as it is in the document

xsltProc.importStylesheet(xslt);
xml_dom = xsltProc.transformToDocument(xml);
output += new XMLSerializer().serializeToString(xml_dom.documentElement); 
```

当我将变量的内容保存到文件中并以包含 XSLT 文件的方式包含它时，我得到了所需的输出（转换后的 XML）：

```
xml = document.implementation.createDocument("","",null);
xml.async = false;
xml.load('xmlinput.xml'); 
```

我需要一种将变量内容包含到 xml DOM 文档中的方法……或者有更优雅的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:51:24.563

使用 Mozilla、Opera、Safari、Chrome 和 IE 9，您可以执行以下操作

```
var xml = new DOMParser().parseFromString(yourVar, 'application/xml'); 
```

将变量中的 XML 标记解析为`yourVar`XML DOM 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:57:50.220

您可以将 XML 存储在一个变量中并像往常一样使用 jQuery 来遍历它，我倾向于这样做：

```
window.auditDoc = $.parseXML("<?xml version='1.0' encoding='UTF-8'?><Bundle><Audit></Audit></Bundle>"); 
```

如果我正在使用单个 xml 文件进行分配工作，那么我也发现将它放在 window.auditDoc 中并始终这样引用它很有用。

# javascript - 刷新 DojoGrid

> ID：10280815
> 
> 赞同：0
> 
> 时间：2012-04-23T12:44:35.513
> 
> 标签：javascript, ajax, datagrid, dojo, dojox.grid.datagrid

我有一个显示一些数据的网格，这些数据是从数据库中检索的。我正在检索数据，`JSON string`格式为::

```
[{"ActID":16,"Assigned To":"Anand","Activity Type":"fdsf","Status":"New","Assigned Date":"2012-04-20 00:00:00","Assigned Time":"1899-12-30 17:44:00","Email":"rakesh.shukla@gmail.com"},{"ActID":17,"Assigned To":"Anand","Activity Type":"fdsf","Status":"New","Assigned Date":"2012-04-20 00:00:00","Assigned Time":"1899-12-30 17:44:00","Email":"rakesh.shukla@gmail.com"}] 
```

让我把我的代码放在第一位::

```
<script type="text/javascript">
function getInfoFromServer(){
        $.get("http://anandkr08:8080/2_8_2012/jsp/GetJson.jsp?random=" + new Date().getTime(), function (result) {
        success:postToPage(result),
        alert('Load was performed.');
            },"json");
    }

    function postToPage(data){
    alert(data);    
    var storedata = {
        identifier:"ActID",
        items: data
        };
    alert(storedata);

    var store1 = new dojo.data.ItemFileWriteStore({data: storedata}) ;
    var gridStructure =[[

                          { field: "ActID",
                                name: "Activity ID",
                                classes:"firstName"

                          },
                          {
                              field: "Assigned To",
                              name: "Assigned To",
                              classes: "firstName"

                          },
                          { field: "Activity Type",
                                name: "Activity Type",
                                classes:"firstName"

                          },
                          {
                              field: "Status",
                              name: "Status",
                              classes: "firstName"

                          },
                          {
                              field: "Assigned Date",
                              name: "Assigned Date",
                              classes: "firstName"

                          },
                          {
                              field: "Assigned Time",
                              name: "Assigned Time",
                              classes: "firstName"

                          },
                          {
                              field: "Email",
                              name: "SendMail",
                              formatter: sendmail,
                              classes: "firstName"

                          },
                          {
                              field: "ActID",
                              name: "Delete",
                              formatter: deleteact,
                              classes: "firstName"
                          }

                    ]
              ];
    //var grid = dijit.byId("gridDiv");
    //grid.setStore(store1);

    var grid = new dojox.grid.DataGrid({

        store: store1,
        structure: gridStructure,
        rowSelector: '30px',
        selectionMode: "single",
        autoHeight:true,
        columnReordering:true

        },'gridDiv');

    grid.startup();
    dojo.connect(grid, "onRowClick", grid, function(){
                var items = grid.selection.getSelected();
                dojo.forEach(items, function(item){

                    var v = grid.store.getValue(item, "ActID");
                    getdetailsfordialog(v);
                    function showDialog(){
                        dojo.require('dijit.Tooltip');
                        dijit.byId("terms").show();
                    }

                    showDialog();
                    }, grid);

            });
}
</script> 
```

HTML代码::

```
<button id="pendingbutton" type="button" style="height: 50px; width: 100px;" onclick="getInfoFromServer()" value="Get Activities">Get Activities</button></center><br><br><br>
<center><div id="gridDiv"  title="Simple Grid">
</div></center> 
```

现在在上面的代码`$.get`中调用一个按钮（上面给出的 HTML 代码）从数据库中检索数据，并且第一次在页面上显示网格而不刷新页面（因为它被称为使用 $.get）。现在我想要的是当我再次单击该按钮时。检索到新数据（工作正常，已从中检查过`alert(data)`），但网格不会自行刷新。我想刷新网格而不刷新页面。我试过使用`setstore`（注释掉）功能，但它不适合我。虽然当我点击一个按钮来获取新数据时，我确实得到了`error`谷歌浏览器的 javascript 控制台：:

```
Tried to register widget with id==gridDiv but that id is already registered 
```

我认为它必须在每次单击按钮时分配一个新的 id。请帮我解决这个问题。谢谢。

编辑部分::

```
function initGrid(){
    var gridStructure =[[

                          { field: "ActID",
                                name: "Activity ID",
                                classes:"firstName"

                          },
                          {
                              field: "Assigned To",
                              name: "Assigned To",
                              classes: "firstName"

                          },
                          { field: "Activity Type",
                                name: "Activity Type",
                                classes:"firstName"

                          },
                          {
                              field: "Status",
                              name: "Status",
                              classes: "firstName"

                          },
                          {
                              field: "Assigned Date",
                              name: "Assigned Date",
                              classes: "firstName"

                          },
                          {
                              field: "Assigned Time",
                              name: "Assigned Time",
                              classes: "firstName"

                          },
                          {
                              field: "Email",
                              name: "SendMail",
                              formatter: sendmail,
                              classes: "firstName"

                          },
                          {
                              field: "ActID",
                              name: "Delete",
                              formatter: deleteact,
                              classes: "firstName"
                          }

                    ]
              ];

dojo.ready(function(){
    initGrid();
  }); 
```

我的 postToPage 函数 ::

```
function postToPage(data){
    alert(data);    
    var storedata = {
        identifier:"ActID",
        items: data
        };
    alert(storedata);

    var store1 = new dojo.data.ItemFileWriteStore({data: storedata}) ;
        grid = dijit.registry.byId("gridDiv");
        grid.set("store", store1);
        grid.filter();
        dojo.connect(grid, "onRowClick", grid, function(){
                var items = grid.selection.getSelected();
                dojo.forEach(items, function(item){

                    var v = grid.store.getValue(item, "ActID");
                    getdetailsfordialog(v);
                    function showDialog(){
                        dojo.require('dijit.Tooltip');
                        dijit.byId("terms").show();
                    }

                    showDialog();
                    }, grid);

            });
} 
```

我在这里得到`error`::

```
Cannot call method 'set' of undefined. 
```

我想我还没有将我的网格定义为`dojogrid.`像这样::

```
var grid = new dojox.grid.DataGrid 
```

你能详细说明我还需要在我的`initgrid()`函数中写什么吗？我需要对我的 HTML 代码进行任何更改吗？我已经定义了结构，但没有分配结构。还有一个我在同一页面上有不止一个 dojogrid。但是我的`initgrid`函数只有一个，只包含一个结构。我需要进行哪些更改才能显示其他网格？我的其他网格具有不同的结构，每个网格都由`<div>`元素中的 ID 表示。就像上面有一个 ID 一样`"gridDiv"`。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:50:38.157

您收到此错误是因为您每次单击按钮时都尝试创建新的网格小部件。有两种可能的解决方案：手动销毁现有小部件，或仅创建一个网格小部件实例并重用它。

我认为，每次从服务器接收到数据时，您都不需要重新创建网格。我建议您将所有网格初始化逻辑（包括结构，但存储分配除外）移动到新方法中，例如`initGrid`，这将创建空网格。并将其称为一页加载：

```
 dojo.ready(function() {
    initGrid();
  }); 
```

然后，当从服务器接收到数据时，您可以初始化数据存储并更新网格（调整您的`postToPage`功能）：

```
 function postToPage(data){
    var storedata = {
      identifier:"ActID",
      items: data
    };
    var store1 = new dojo.data.ItemFileWriteStore({data: storedata}) ;
    var grid = dijit.registry.byId("gridDiv");
    grid.set("store", store1);
    grid.filter();
  } 
```

这应该有效。另外我建议你不要使用内联 CSS 样式和`center`标签。

**更新：**

您不需要`onRowClick`每次更新数据时都连接到事件，因此也应该这样做`initGrid`。

您的`initGrid`方法应如下所示：

```
 function initGrid() {
    var gridStructure =[[
    // declare your structure here
    ]];

    var grid = new dojox.grid.DataGrid({
      structure: gridStructure,
      rowSelector: '30px',
      selectionMode: "single",
      autoHeight:true,
      columnReordering:true
    },'gridDiv');

    dojo.connect(grid, "onRowClick", grid, function(){
      // onRowClick handler
    });

    grid.startup();
  } 
```

# iphone - 过滤 uitableview 数据源时 didSelectRowAtIndexPath 不起作用

> ID：10280820
> 
> 赞同：2
> 
> 时间：2012-04-23T12:44:53.123
> 
> 标签：iphone, uitableview

我有 uitableview 和一个带有 searchDisplayController 的搜索栏，我用数据库中的数据填充 tableview 数据源，我使用用户搜索栏进行搜索，一次未过滤 uitableview 数据源，didSelectRowAtIndexPath 工作正常，它转到 detailviewcontroller，但是当我使用搜索时并过滤数据源，然后如果我选择一个单元格，didSelectRowAtIndexPath 方法不会触发。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    KardexViewController* kardexViewController = [[KardexViewController alloc] initWithStyle:UITableViewStylePlain];

    [self.navigationController pushViewController:kardexViewController animated:YES];
} 
```

这就是我添加 uisearchbar 的方式

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    dataSource = [[NSMutableArray alloc] init];

    self.navigationItem.title = Title;

    searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];

    searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:searchBar contentsController:self];
    searchDisplayController.delegate = self;
    searchDisplayController.searchResultsDataSource = self;

    self.tableView.tableHeaderView = searchBar; 
} 
```

以及我如何过滤数据源

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    NSMutableArray* result = [[NSMutableArray alloc] init];

    for (int i = 0; i < [self.allData count]; i++) {
        NSRange range = [[[self.allData objectAtIndex:i] valueForKey:@"Code"] rangeOfString:searchString];

        if(range.length > 0)
            [result addObject:[self.allData objectAtIndex:i]];

        range = [[[self.allData objectAtIndex:i] valueForKey:@"Name"] rangeOfString:searchString];

        if(range.length > 0)
            [result addObject:[self.allData objectAtIndex:i]];
    }

    self.dataSource  = [result copy];
    [result release];
    [self.searchDisplayController.searchResultsTableView reloadData];

    return YES;
}

-(void) searchDisplayControllerDidEndSearch:(UISearchDisplayController *)controller
{
    self.dataSource  = [self.allData copy];
} 
```

所以谢谢提前

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-26T06:20:38.417

经过一番搜索，我发现我应该再设置一件事

```
searchDisplayController.searchResultsDelegate = self; 
```

# ruby-on-rails-3 - 回形针 - 保存前重命名文件

> ID：10280822
> 
> 赞同：16
> 
> 时间：2012-04-23T12:44:59.207
> 
> 标签：ruby-on-rails-3, paperclip, file-rename

我使用此方法在保存之前重命名图像：

```
 def rename_avatar
    self.avatar.instance_write :file_name, Time.now.to_i.to_s
  end

  before_post_process :rename_avatar 
```

图片被当前时间重命名，但没有添加文件类型，而不是**1334487964.jpg**，只保存了**1334487964**。。

我在那里想念什么？我以为**:file_name**只包含文件名 - 没有文件类型

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-30T12:32:24.737

这是我解决问题的方式：

```
 def rename_avatar
    #avatar_file_name - important is the first word - avatar - depends on your column in DB table
    extension = File.extname(avatar_file_name).downcase
    self.avatar.instance_write :file_name, "#{Time.now.to_i.to_s}#{extension}"
  end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-28T09:48:17.623

由于`Paperclip`推荐使用`interpolates`，此链接可以为您提供最好的帮助。 [https://wyeworks.com/blog/2009/7/13/paperclip-file-rename](https://wyeworks.com/blog/2009/7/13/paperclip-file-rename)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-23T09:48:38.040

我已经尝试了所有以前的解决方案，但它对我来说不太适用......但是，我已经创建了这个解决方案，它适用于所有样式

```
 attr_accessor :avatar_update_file_name
  has_attached_file :avatar,
                    :styles => {
                      :medium => "288x288#",
                      :small => "150x150#",
                      :thumb => "48x48#"
                    },
                    :path => YOUR_PATH + ":style/:basename.:extension",
                    :url => YOUR_PATH + ":style/:filename",
                    preserve_files: true

  process_in_background :avatar, only_process: [:medium, :small, :thumb, :original]
  after_save :rename_avatars

  def rename_avatars
    if self.avatar_update_file_name == true
      new_file_hash = "#{SecureRandom.urlsafe_base64}"
      new_file_name = ""
      (self.avatar.styles.keys+[:original]).each do |style|
        path = avatar.path(style)
        if(File.file?(path))
        File.chmod(0777, File.dirname(path))
        new_file_name = "#{new_file_hash}.#{extension}"
        FileUtils.move(path, File.join(File.dirname(path), new_file_name))
        end
      end
      self.avatar_update_file_name = false
      self.avatar_file_name = new_file_name
      self.save!
    end
  end 
```

每次保存对象时都会循环播放您的样式，并且`avatar_update_file_name = true`每次对象调用设置一次，它将更新您的记录

例如，您的班级名称是“头像”

```
avatar = new Avatars
#... upload and work with files
avatar.avatar_update_file_name = true
avatar.save! 
```

这将调用使文件重命名魅力！

注意：您可以使用此“before_save”，但问题是回形针可能不会在文件系统上创建此文件

希望这会有所帮助

# javascript - if 语句在此代码中永远不起作用

> ID：10280825
> 
> 赞同：1
> 
> 时间：2012-04-23T12:45:17.793
> 
> 标签：javascript, html

`if`即使我同时填写了文本字段和密码字段，以下函数的语句也不会执行。该`alert`函数在语句之前工作正常，`if`但`alert`if 语句之后的函数永远无法工作。

这是功能：

```
<script type="text/javascript">
    function CheckForMissingFields() {
        alert("before if statement");
        if(document.getElementById("username").length != 0 && document.getElementById("password").length != 0) {
            document.getElementByName("SignInButton").disabled = 'false';
            alert("inside if statement");
        }
        alert("outside if statement");
    } 
```

最初按钮的状态`SignIn`是禁用的。我希望在两个字段都完成后启用它。`if`声明永远不起作用的原因可能是什么？

以下是相应的 HTML 登录片段：

```
<ul>  <form method="post" action="#">
          <li> <input type="text" id="username" value="Username or Email" size="25" name="UserID"  onfocus="emptyTextField()" /> </li>
          <li> <input type="password" id="password" value="password" size="25" name="UserPassword" onfocus="emptyPasswordField()" /> 
          <center><input type="submit" value="sign-in" style="font-size:20px" name="SignInButton" disabled="true"/> </center>
          </li>
              </form>
</ul> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T12:48:03.350

使用：`if (document.getElementById("username").value.length)`等。换句话说，您将需要`value`该字段。

`!=0`顺便说一句，如果`value.length === 0` `value.length`将评估为`false`( `falsy`) ，则不需要

在检查值长度之前，您可能需要[修剪](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/Trim)值，因此：

```
if (document.getElementById("username").value.replace(/^\s+|\s+$/,'').length) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T12:47:52.007

`getElementById`产生一个 DOM 节点。在您的情况下，一个输入字段。它没有`length`属性，但它`value`有。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T12:48:21.943

您正在尝试获取 html 标签的长度。我认为您想获取输入字段的内容。

像这样：

```
if(document.getElementById("username").value.length != 0 && 
    document.getElementById("password").value.length != 0) 
```

这回答了最初的问题。然后，如果您希望将空格视为无，则应`jQuery.trim`在获取字符串长度之前使用修剪空格的函数（如 ）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T12:47:34.567

怎么样

```
function trim(stringToTrim) {
    return stringToTrim.replace(/^\s+|\s+$/g,"");
} 
```

只需创建上面的函数来修剪字符串中的空间，然后替换你的 if 条件，如下所示将为你工作..

```
 if(trim(document.getElementById("username").value) != "" && 
       trim(document.getElementById("password").value) != "") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T12:51:49.977

我很困惑：你在哪里打电话给你的

```
CheckForMissingFields() 
```

function from? If you don't call that, you never will see the if statement work. Also, you'll need to re-evaluate each time the textboxes change, so try binding that function to the change event or blur event.

# python - 使用 DictWriter/writerows 将数据写入 CSV 时出错

> ID：10280826
> 
> 赞同：2
> 
> 时间：2012-04-23T12:45:25.867
> 
> 标签：python, csv

**问题：**

使用 writerows 将数据写入 CSV 文件时，当我输入 1000001 作为输入时，我目前看到以下错误：

> ValueError：字典包含不在字段名中的字段：1、0、0、0、0、0、1

字段名正确写入 CSV (history.csv) 但不是结果。

**描述**

从这个 SO 问题构建我的初始程序， [在 CSV 文件中搜索单个列以查找特定值并返回整行](https://stackoverflow.com/questions/10209641/search-a-single-column-for-a-particular-value-in-a-csv-file-and-return-an-entire)。

我正在尝试将搜索功能的输出写入单独的 CSV 文件，以便让自己轻松跟踪搜索数据。由于我还在学习 Python，我觉得阅读然后编写 CSV 将是一个好的开始。

**细节**

在 Windows 7 计算机上使用 Python 3.2.3

**功能**

该程序由 3 个函数构建（是的，我想练习编写函数。如果这没有意义，请告诉我）：`search`、`csv_record`和`main`. 该`search`函数来自原始 SO 问题，`csv_record`包含编写代码，`main`并将它们全部连接起来并要求用户输入。

**样本数据**

```
1000001;Name here:1;1001;1;11;Item description here:1
1000002;Name here:2;1002;2;22;Item description here:2
1000003;Name here:3;1003;3;33;Item description here:3
1000004;Name here:4;1004;4;44;Item description here:4
1000005;Name here:5;1005;5;55;Item description here:5
1000006;Name here:6;1006;6;66;Item description here:6
1000007;Name here:7;1007;7;77;Item description here:7
1000008;Name here:8;1008;8;88;Item description here:8
1000009;Name here:9;1009;9;99;Item description here:9 
```

**代码**

```
import sys
import traceback
from csv import DictReader
from csv import DictWriter
from collections import namedtuple

def search(user_input):
    raw_data            = 'active.csv'

    with open(raw_data, 'r', newline='') as open_data:
        read_data = DictReader(open_data, delimiter=';')
        item_data = namedtuple('item_data', read_data.fieldnames)
        for row in (item_data(**data) for data in read_data):
            if row.Item == user_input:
                return row
        return

def csv_record(search_output,record_value):
    hist_file           = 'history.csv'
    record_positive     = 'Record has been written to CSV file'
    record_negative     = 'Recording has been disabled'

    if record_value == 1:
        with open(hist_file, 'w', newline='') as history:
            history_dw = DictWriter(history, delimiter='\t', fieldnames=search_output._fields)
            history_dw.writeheader()
            history_dw.writerows(search_output)
            return record_positive
    else:
        return record_negative

def main():
    failure             = 'No matching item could be found. Please try again.'
    recording           = 1

    item    = input("Please enter your item code: ")
    result  = search(item)
    records = csv_record(result,recording)
    print(records)
    return 
```

**注释**

我知道这不是免费的代码编写服务，但我们将不胜感激。我是否忘记了如何使用 writerows？根据我对阅读 csv.py 源代码的了解，它正在尝试将我的用户输入加入到结果中，当它们将被写入 CSV 时。我的目标是只写结果，而不是我的用户输入（这将是另一件事要学习）。我删除了评论，但请询问您是否需要解释。

**资源**

[如何像计算机科学家一样思考](http://thinkcspy.appspot.com/build/index.html)

[听写者](http://docs.python.org/py3k/library/csv.html?highlight=dictreader#csv.DictWriter "听写者")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:41:20.867

```
file1 = open( DATA_DIR + "/final_file.csv", "w")
fileWriter = csv.writer(file1 , delimiter=",",quotechar='"', quoting=csv.QUOTE_MINIMAL)
Header =['Id','Date']#.enter the fields names in that 
fileWriter.writerow(Header)
for x in output:
        temp =[x['Id'],x['Date']]
        fileWriter.writerow(temp)
file1.close() 
```

# java - 无法在静态 TLS 块中分配内存

> ID：10280828
> 
> 赞同：1
> 
> 时间：2012-04-23T12:45:30.217
> 
> 标签：java

我已经为 java 代码编写了测试。我正在尝试运行测试，但它失败并显示错误消息：

```
java.lang.unsatisfiedlinkerror: cannot allocate memory in static TLS block. 
```

我已经尝试了很多谷歌搜索。但并没有从那里得到太多。有谁知道这个错误的原因和可能的解决方案？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:43:05.147

TLS 是 ThreadLocalStorage ，您似乎试图在 ThreadLocal 对象中塞进太多东西。为此，VM 会为每个线程预分配内存。AFAIK 你不能自己调整这个，我知道调整线程内存消耗的唯一标志是'-XX：ThreadStackSize ='，并且不能保证这会解决你的任何问题。我能提供的最好的方法是重写你的代码。

# junit - 当我们运行测试用例时，jUnit 测试用例是否实际上在数据库中插入数据

> ID：10280833
> 
> 赞同：0
> 
> 时间：2012-04-23T12:46:08.283
> 
> 标签：junit

我必须为在数据库中插入记录的方法编写一个测试用例。

当我们使用它来测试将数据插入数据库的函数时，jUnit testcase 是否可以实际将数据插入数据库？运行测试用例后，我可以检查数据库表中的数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:13:53.377

JUnit 测试就像任何其他代码一样只是代码。如果您创建一个 JDBC 连接并使用它来执行语句，那么这些语句将像在其他任何地方一样工作。没有什么神奇的事情发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:51:21.683

如果您为执行数据库插入的代码编写测试，则该代码将在您执行它时执行插入。

您可以在运行测试用例后检查数据库中的数据。您可以运行查询来判断数据库的状态是否正确。测试框架将为您自动执行此操作。

针对数据库进行测试需要一些计划。一方面，您必须弄清楚您将针对哪个数据库进行测试。如果您在开发环境中针对数据库进行测试，您可能会受到数据更改的影响，并且您的测试可能会意外失败。使用像 H2 这样的内存数据库是一种流行的选择，以确保您的测试有一个处于可预测状态的专用数据库。

[DBUnit](http://www.dbunit.org/)是一个简化数据库测试的测试框架。您可以在测试之前指定您希望数据库填充的数据，您可以指定测试后您希望数据库中包含哪些数据，框架将检查实际数据是否与您的预期相符。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T14:19:54.423

是的，它将数据添加到数据库中。但我们不应该那样做。插入数据后，我们需要再次运行删除插入数据的测试用例。这样数据库就不会发生任何变化。

# ruby - 在 rake 任务中无法解析到 Nokogiri

> ID：10280835
> 
> 赞同：1
> 
> 时间：2012-04-23T12:46:27.200
> 
> 标签：ruby, rake, nokogiri

我是 Nokogiri 的新手，我正在尝试抓取百度的搜索结果。我写了一个简单的脚本来测试。它读取搜索关键字的第一页`stackoverflow`并输出文档的长度和第一页上的结果链接数（应该是10），它运行得非常正确。

```
# coding: utf-8
require 'rubygems'
require 'nokogiri'
require 'open-uri'

url = 'http://www.baidu.com/s?wd=stackoverflow&pn=0'
parsed_uri = URI.parse(URI.escape(url))
read_uri = parsed_uri.read
puts "URI read length: #{read_uri.to_s.length}"
doc = Nokogiri::HTML(read_uri)
puts "Nokogiri document length: #{doc.to_s.length}"
puts "result link count: #{doc.css('h3.t a').count}" 
```

结果输出：

```
$ ruby scrap_baidu.rb
URI read length: 37659
Nokogiri document length: 38226
result link count: 10 
```

但是当我将它移动到一个新的 rails 3 应用程序的 rake 任务时：

```
require 'nokogiri'
require 'open-uri'

namespace :batch do
  desc "test"
  task :test_fetch => :environment do
    url = 'http://www.baidu.com/s?wd=stackoverflow&pn=0'
    parsed_uri = URI.parse(URI.escape(url))
    read_uri = parsed_uri.read
    puts "URI read length: #{read_uri.to_s.length}"
    doc = Nokogiri::HTML(read_uri)
    puts "Nokogiri document length: #{doc.to_s.length}"
    puts "result link count: #{doc.css('h3.t a').count}"
  end
end 
```

我得到了完全不同的结果：

```
$ bundle exec rake batch:test_fetch
URI read length: 37964
Nokogiri document length: 11824
result link count: 0 
```

文档长度完全不正确。好像`Nokogiri`表现的不一样。我不太确定`.length`是否有一种方法可以看到这一点，但这是我只有在发现差异时才能想到的。

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:15:59.133

Nokogiri 可以对 HTML 进行修复以使其对其进行合理解析，还可以截断空白文本节点、插入回车符等。

例如：

```
irb(main):001:0> require 'nokogiri'
true
irb(main):002:0> html = '<html><head></head><body>foo</body></html>'
"<html><head></head><body>foo</body></html>"
irb(main):003:0> html.length
42
irb(main):004:0> Nokogiri::HTML(html).to_s.length
220
irb(main):005:0> Nokogiri::HTML(html).to_s
"<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\">\n<html>\n<head><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"></head>\n<body>foo</body>\n</html>\n"
irb(main):006:0> html = '<html>     <head></head>     <body>foo</body></html>'
"<html>     <head></head>     <body>foo</body></html>"
irb(main):007:0> Nokogiri::HTML(html).to_s
"<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\">\n<html>\n<head><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"></head>\n<body>foo</body>\n</html>\n" 
```

[您可以通过添加/调整解析选项](http://nokogiri.org/Nokogiri/XML/ParseOptions.html)来控制其解析行为。默认情况下，它使用`DEFAULT_HTML`.

# android - 如何关闭或关闭 AlertDialog？

> ID：10280841
> 
> 赞同：1
> 
> 时间：2012-04-23T12:46:45.333
> 
> 标签：android, listview, android-alertdialog, dismiss

我已将 ListView 放入 AlertDialog 中，并且我想在单击 ListView 项目时关闭 AlertDialog；我该怎么做？

```
public void createSearchDialog(final String[] Memo){
    LayoutInflater factory = LayoutInflater.from(this);
    View searchView = factory.inflate(R.layout.seach_dialog, null);

    lv = (ListView) searchView.findViewById(R.id.search_list);
    lv.setAdapter(new MyPerformanceArrayAdapter(this, Memo, memo_PW));
    lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View view, int position,long arg3) {
            // TODO Auto-generated method stub

                     /// close dialog
        }
    });

    searchBuilder = new AlertDialog.Builder(this);
    searchBuilder.setTitle("Search")
           .setView(searchView)
           .setNegativeButton("Back", new DialogInterface.OnClickListener() {               
            public void onClick(DialogInterface arg0, int arg1) {
                // TODO Auto-generated method stub

            }
        })
           .show();     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:33:38.303

只需像这样抓住指向警报对话框的指针

```
AlertDialog myDialog = searchBuilder.setTitle("Search")
           .setView(searchView)
           .setNegativeButton("Back", new DialogInterface.OnClickListener() {               
            public void onClick(DialogInterface arg0, int arg1) {
                // TODO Auto-generated method stub

            }
        }).create(); 
```

然后稍后您可以通过致电解雇

```
myDialog.dismiss() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:51:22.027

通过使用应用程序上下文，您可以通过调用 dimiss 来关闭它。

```
Application.getProgressDialog().dismiss(); 
```

这必须在列表视图中处理`onItemClick()`

# android - Android：无法在自定义 RelativeLayout 中找到子项

> ID：10280842
> 
> 赞同：0
> 
> 时间：2012-04-23T12:46:56.413
> 
> 标签：android, android-layout

我扩展了 RelativeLayout 类，并按照我认为需要的方式实现了所有构造函数。我还在 xml 布局中添加了一个子元素，就像使用常规的 RelativeLayout 一样。现在，问题是，我似乎无法访问自定义布局中的孩子！奇怪的是，我可以（在图形布局中）选择子视图，并且自定义布局被描述为“父”，但是当尝试以相反的方式进行时没有骰子。

我如何“告诉”班级它实际上有孩子？代码如下！

谢谢！

```
private void init(Context context) {
    System.out.println(this.getChildCount()); // Always returns 0
}

public CustRLayout(Context context) {
    super(context);
    init(context);
}

public CustRLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    init(context);
}

public CustRLayout(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init(context);
} 
```

和 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <app.hobi.CustRLayout android:id="@+id/cust"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical">
        <ImageView 
            android:id="@+id/childView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/img"
            android:src="@drawable/an_image" />
    </app.hobi.CustRLayout>

    <app.hobi.SomeOtherView android:id="@+id/other"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:02:27.827

稍后（在调用构造函数之后）通过`addChild()`. 因此，在后期状态下查询 childCount，例如：在 onMeasure() 或使用[ViewTreeObserver](http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html)

# c# - IEnumerable 的可能多重枚举。怎么解决？我需要解决吗？

> ID：10280844
> 
> 赞同：3
> 
> 时间：2012-04-23T12:46:59.587
> 
> 标签：c#, ienumerable

我有以下代码在标题中给出警告。我很确定我以前做过这样的事情，但它没有给出任何警告。我想问那些张贴的两件事。1）这里会导致什么问题？2）需要修复吗？

我问的原因是这段代码可以正常工作，因为我希望它很清楚这个警告不会引起问题。我不能忍受在我的代码中出现警告等，所以想要解决这个问题，但我也想知道为什么会出现这个警告，以及它是否以任何方式有害。

代码：

```
 public class AttributeType
 {
      private string m_attributeNameField;

      public string AttributeName
      {
          get { return m_attributeNameField; }
          set { m_attributeNameField = value; }
      }
 }

 private StandardResponseType ValidateAttributes(string featureType, IEnumerable<AttributeType> attributeList, string userCategory)
 {
       StandardResponseType standardResponse = 
       new StandardResponseType(DateTime.Now.ToString(CultureInfo.InvariantCulture), "RWOL_UTILS.Get_Item_Attributes", "", "OK");

        if (attributeList.Any())
        {
            foreach (AttributeType attribute in attributeList)
            {
                if (attribute.AttributeName == null) continue;
                {
                    //do stuff
                }
            }
        }
        else
        {
            standardResponse.Message = "Error: No attributes passed in the list. ValidateAttributes().";
            standardResponse.ResponseCode = "FAIL";

            return standardResponse;
        }
} 
```

编辑：该方法中有更多代码，但与此问题无关。

更新：我必须添加以下代码才能完成这项工作。为什么添加这个更有效？如果我必须计算并阅读新列表，那么这样做和在原始项目上做有什么区别？该列表只通过一次。如果在方法中填充了列表但不是，我可以理解这个问题。它刚刚传入已经填充。

```
List<AttributeType> newlist = attributeList.ToList();

if (newlist.Count() != 0)
{
    foreach (AttributeType attribute in newlist)
............ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T12:49:08.887

只需摆脱`if`; 没用的。

警告来自 Resharper，它警告您如果`attributeList`枚举成本很高，您的代码将会很慢。（因为它为 the 枚举了一次，为 the 枚举`Any()`了第二次`foreach`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T12:50:51.283

可能的问题取决于您`IEnumerable`来自哪里。一些数据源可能只允许单个枚举，或者它们可能很昂贵（可能是一些数据库查询），这已经由`attributeList.Any()`.

您可以删除`Any()`检查，因为如果您的 没有元素`IEnumerable`，则您的循环无论如何都不会运行（假设您的示例显示了完整的图片并且没有其他依赖于检查的逻辑）。

编辑：根据您编辑的问题，您无法删除检查。但是，您可以使用`attributeList.ToArray()`将您的数组转换`IEnumerable`为数组，然后使用该数组并消除警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T12:50:54.783

原因是那个调用`attributeList.Any()`开始了`attributeList`，一旦找到它就会进入你的 for 循环。然后你在列表上做一个 foreach ，它再次遍历整个列表。

您实际上不需要`.Any()`这里，因为对空的枚举执行 foreach 不会导致任何问题，它不会返回任何内容。

您可能会遇到问题的地方是，如果您从数据库中提取数据并且在 foreach 内部再次调用枚举，因为它是延迟执行，您可能会得到不同的结果，这是您在第二次调用时没有预料到的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T12:54:09.337

我猜`attributeList`是`IEnumerable<>`某种。`IEnumerable`与`List`s 不同，对象不一定是内存中的对象列表，并且可能会绑定到复杂的逻辑，每次迭代时都会为它们查询数据库。使用 C# 的`yield return`命令还可以返回一个`IEnumerable`逻辑绑定到每个迭代的。

由于这种行为，警告会告诉您您可能不止一次地迭代您的属性，这是一个潜在的昂贵操作。一次期间`Any()`，一次结束`foreach`。确实在这种情况下`Any()`是多余的，但通常您可以通过调用`ToList()`or`ToArray()`来避免此警告`IEnumerable`，从而执行*一次*枚举并将结果存储在显式分配的列表/数组中。现在您可以一次又一次地检查它，而不会影响性能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T13:14:38.920

我能够允许你这样做，它更漂亮：

但无论如何，当你调用 .Any() 时，它只会迭代第一项，所以它真的没有那么糟糕。

这种方式更具可读性，尽管在后台有点丑陋（仍然有效）。

```
 bool any;

        foreach (var i in Enumerable.Range(0, 100).Loop(out any))
        {
            // Do loop logic
        }

        if (!any)
        {
            // Handle empty IEnumerable
        } 
```

如何？！：

```
public static class Ex
{
    public static IEnumerable<T> Loop<T>(this IEnumerable<T> source, out bool any)
    {
        var b = true;

        var enumerable = source.Loop(() => { b = false; });

        any = b;

        return enumerable;
    }

    private static IEnumerable<T> Loop<T>(this IEnumerable<T> source, Action anySetter)
    {
        var enumerator = source.GetEnumerator();

        enumerator.Reset();

        if (!enumerator.MoveNext())
        {
            anySetter();
            yield break;
        }

        do
        {
            yield return enumerator.Current;
        } while (enumerator.MoveNext());
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T12:49:53.817

您不必检查 .Any() 这里是固定代码：

```
 bool empty = true;
        foreach (AttributeType attribute in attributeList) 
        { 
            empty = false;
            if (attribute.AttributeName == null) continue; 
            { 
                //do stuff 
            } 
        } 
        if (empty)
        {
          {  
              standardResponse.Message = "Error: No attributes passed in the list.       ValidateAttributes().";  
              standardResponse.ResponseCode = "FAIL";  

              return standardResponse;  
          }  
        } 
```

检查 .Any() 可能会导致枚举，这就是为什么您会收到警告 => 第一个枚举“Any”以检查它是否为空，第二个枚举“foreach”。

如果 attributeList 的类型允许，您可以检查 Count 或 Length ：

```
 if (attributeList.Count != 0)         
    {         
        foreach (AttributeType attribute in attributeList)         
        {         
            if (attribute.AttributeName == null) continue;         
            {         
                //do stuff         
            }         
        }         
    }         
    else         
    {         
        standardResponse.Message = "Error: No attributes passed in the list. ValidateAttributes().";         
        standardResponse.ResponseCode = "FAIL";         

        return standardResponse;         
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T12:50:42.263

不，你不需要解决它。但是，如果您`if (attributeList.Any())`没有`else`，则可以完全消除它，这将消除警告。实际上，您的代码示例可以替换为：

```
foreach (AttributeType attribute in attributeList.OfType<AttributeType>())
{
    // do stuff
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-12T23:59:17.913

由于我为我的数据集查询搜索了这个确切的问题，我去添加 .Any() 并发现我可以将 .AsQueryable() 添加到我的选择末尾并且我的 foreach 可以使用它。.AsQueryable 将通用 IEnumerable 转换为通用 IQueryable。

# jenkins - 停止 Jenkins 工作以防万一新的工作启动

> ID：10280846
> 
> 赞同：9
> 
> 时间：2012-04-23T12:47:33.637
> 
> 标签：jenkins, jenkins-plugins

是否可以指定，如果作业 (A) 被多次触发，则从队列中删除先前的作业，并且如果有足够的空闲槽，则仅将最新的作业留在队列中或启动？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-06-02T10:03:07.333

使用`execute system groovy script`步骤：

```
import hudson.model.Result
import jenkins.model.CauseOfInterruption

//iterate through current project runs
build.getProject()._getRuns().each{id,run->
  def exec = run.getExecutor()
  //if the run is not a current build and it has executor (running) then stop it
  if( run!=build && exec!=null ){
    //prepare the cause of interruption
    def cause = new CauseOfInterruption(){ 
      public String getShortDescription(){
        return "interrupted by build #${build.getId()}"
      }
    }
    exec.interrupt(Result.ABORTED, cause)
  }
}

//just for test do something long...
Thread.sleep(10000) 
```

在中断的工作中会有一个日志：

```
Build was aborted
interrupted by build #12
Finished: ABORTED 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T13:40:18.010

您可以使用通过[Groovy Script Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)运行的系统 Groovy Script 来完成。[这样的脚本可以通过其编程 API](http://javadoc.jenkins-ci.org/)直接访问 Jenkins 。我没有看到任何其他方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-11T09:16:53.533

我认为仅在构建之前添加一个 groovy 脚本就无法完美解决这个问题。如果新工作在旧工作已经在构建时进入（它无法检查队列，因为它的预构建部分已经过去），新工作仍然需要等待。

如我所见，要实现 jenkins 的抢占式工作，我们需要创建另一个监督工作。此作业应定期检查队列中是否有新构建，并在必要时终止旧构建。

但是创建一个监督工作似乎很复杂。我也期待一个完美的解决方案。

# visual-studio - 如何使我的 VSIX 文件与 VS11 和 VS2010 兼容？

> ID：10280848
> 
> 赞同：7
> 
> 时间：2012-04-23T12:47:40.173
> 
> 标签：visual-studio, vsix, visual-studio-sdk

如何使我的 VSIX 文件与 Visual Studio 11 和 Visual Studio 2010 兼容？我将我的 VSIX 文件及其所有依赖项交给我的一个朋友，当他打开它时，他收到错误“扩展清单无效”。

当我在我的机器（构建扩展的同一台机器）上打开它时，它工作得很好。

我在这里做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T05:24:48.167

您需要使用 VS 2010 和 VS 2010 SDK 构建您的扩展，以支持 VS10 和 VS11。在您的 VSIXManifest 中，您应该在下面添加以下内容`<SupportedProducts>`：

```
<VisualStudio Version="11.0">
  <Edition>Pro</Edition>
</VisualStudio> 
```

# php - 添加回声删除文本区域

> ID：10280850
> 
> 赞同：0
> 
> 时间：2012-04-23T12:47:46.173
> 
> 标签：php

添加我的回声语句时，文本区域框消失了。这是代码的选择：

```
<?php
$rs_settings = mysql_query("select * from thesis where id='$_SESSION[user_id]'");

        ?>

 <br><?php  while ($row_settings = mysql_fetch_array($rs_settings)) {?>
  <form action="thesis.php" method="post" name="regForm" id="regForm" >
    <div class="forms">

           Title of Proposed Thesis<span class="required">*</span>
      <textarea name="thesis_name" type="text" id="thesis_name" size="600"><?php echo
 $row_settings['thesis_Name']; ?></textarea>

            Abstract<span class="required">*</span>
          <textarea name="abstract" type="text" id="abstract" size="600"><?php echo 
$row_settings['abstract']; ?></textarea> 

      <?php } ?> 
```

有谁知道是哪一段代码导致了这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:49:28.683

你的语法不正确。`<textarea>`没有`value`属性。您应该将值放在开始标签和结束`<textarea>`标签之间。

```
 <textarea name="abstract" type="text" id="abstract" size="600"><?php echo $row_settings['abstract']; ?></textarea> 
```

# magento - Magento：使用 PayPal Express 时添加支付费用

> ID：10280859
> 
> 赞同：4
> 
> 时间：2012-04-23T12:48:02.913
> 
> 标签：magento, paypal

在 Magento 1.6.0 中，当客户选择 PayPal Express 付款时，我想添加 2% 的付款费用。不幸的是，Magento 的 PayPal 模块不提供收费选项。

我怎样才能做到这一点？

提前致谢， aeno

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T09:12:08.900

这是免费的：http: [//www.magentocommerce.com/magento-connect/paypal-payment-fee-3194.html](http://www.magentocommerce.com/magento-connect/paypal-payment-fee-3194.html)。也适用于其他标准付款方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T12:57:08.133

我们遇到了同样的问题，并决定为此购买扩展程序。然后你自己开发这个更快、更便宜。

[http://store.fooman.co.nz/magento-extension-surcharge.html](http://store.fooman.co.nz/magento-extension-surcharge.html)

非常简单的安装和设置。

我强烈推荐这个扩展。

最好的祝福

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T15:19:19.843

我们也遇到了这个问题，但是，我们买了这个： http: [//www.mageworx.com/multi-fees-magento-extension.html](http://www.mageworx.com/multi-fees-magento-extension.html)
Fooman Surcharge 和 Mageworx MultiFees 几乎相同。我们决定获得 MultiFees，因为 Fooman Surcharge 有 1 年的更新，而 Mageworx MultiFees 有免费更新和终身支持。

# marklogic - 在 Windows 7 Professional 上设置 MarkLogic 5 Express

> ID：10280864
> 
> 赞同：0
> 
> 时间：2012-04-23T12:48:12.107
> 
> 标签：marklogic

我已经在我的 Win 7 Professional 笔记本电脑上设置了 MarkLogic。我索引了大约 2K 文档，对 PDF 文档使用了转换过滤器。`docbase`当我通过`XQuery`控制台查看时，我可以看到“”中的文档。一切似乎都“正常”，除了当我搜索一个我知道在许多文档中的单词时，我没有得到任何结果。当我搜索“ `null`”（根本没有关键字）时，我得到了正确数量的结果，每个结果都有一个`Internal Server Error 500`（在任何地方都没有解释）。

在加载和转换文档、构建流程和“部署”期间或之后是否有一些我缺少的简单步骤？除了——最重要的部分——搜索没有找到任何东西之外，一切似乎都“正常”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:22:34.593

这么长时间后很难尝试重现这个问题，但这似乎对我来说在 MarkLogic 6.0-1.1 上工作得很好：

*   使用指向包含一些 PDF 的目录的文件系统收集器创建流
*   添加一个过滤器转换，它被标记为单独存储提取的信息`XHTML`
*   运行流程
*   创建一个新的应用程序构建器应用程序，指向已加载文档的数据库
*   使用唯一名称和空闲端口号部署应用程序
*   在浏览器中打开搜索应用程序，应立即显示第一个文档
*   从任何结果中选择任何单词`XHTML`，然后搜索
*   应该显示相关结果

注意：确保您输入的单词是 in`all-lower-caps`或完全是`matching-caps`。如果您在搜索词中使用大写字母，MarkLogic 将使用`case-sensitive`搜索。

# java - 行尾，FileWriter \n

> ID：10280865
> 
> 赞同：0
> 
> 时间：2012-04-23T12:48:16.093
> 
> 标签：java, android, append, newline, filewriter

我正在尝试将换行符附加到已经存在的文件中，但是我尝试过的所有命令都导致仅附加到第一行。我希望文件中的输出看起来像

第 1 行

行2

```
 private void addToFavToFile(String site){
        BufferedWriter writer = null;
        File root = Environment.getExternalStorageDirectory();
        try{
            writer = new BufferedWriter(new FileWriter(Environment.getExternalStorageDirectory()+"/test2.txt",true));
            writer.write("ROW1");
            writer.newLine();
            writer.write("ROW2");
            writer.close();
        }catch(Exception e){

        } 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:07:57.430

我已经尝试了以下代码，它似乎产生了你所追求的。

```
import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;

public class TestNewLines {

public static void main(String[] args) {
    TestNewLines testFiles = new TestNewLines();
    testFiles.addToFavToFile("");
}

private void addToFavToFile(String site){
    BufferedWriter writer = null;
    try{
        writer = new BufferedWriter(new FileWriter("test.txt",true));
        insertEmptyLine(writer);
        writer.write("ROW1: " + System.currentTimeMillis());
        insertEmptyLine(writer);
        writer.write("ROW2: " + System.currentTimeMillis());
        insertSeperator(writer);
        writer.close();
    } catch(Exception e){

    }
}

private void insertEmptyLine(BufferedWriter writer) throws IOException {
    writer.newLine();
    writer.newLine();
}

private void insertSeperator(BufferedWriter writer) throws IOException {
    writer.newLine();
    writer.write("********************");
}
} 
```

为了测试它，我输入了“这是第一行”。在我的测试文件的开头。运行几次后，输出如下所示：

> 这是第一行。
> 
> 第1行：1335189657127
> 
> 第2行：1335189657127
> 
> * * *
> 
> 第1行：1335189658390
> 
> 第2行：1335189658390
> 
> * * *
> 
> 第1行：1335189665738
> 
> 第2行：1335189665738
> 
> * * *
> 
> 第1行：1335189679638
> 
> 第2行：1335189679638
> 
> * * *

正如您从时间戳中看到的那样，我每次都将新行附加到文件的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:11:52.593

Instead of adding one new line, try adding two newlines in a row.

One for going to the line below ROW1 and the other for inserting one more blank line.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:51:05.210

请使用以下代码，

```
private void addToFavToFile(String site){
    BufferedWriter writer = null;
    File root = Environment.getExternalStorageDirectory();
    try{
        writer = new BufferedWriter(new FileWriter(Environment.getExternalStorageDirectory()+"/test2.txt",true));
        writer.write("ROW1");
        writer.newLine();
        writer.write("ROW2");
        writer.newLine();
        writer.close();
    }catch(Exception e){

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T12:53:36.187

而不是使用`writer.newLine();`

你应该使用`writer.write("\\n\\r");`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T12:55:42.137

您也可以尝试使用`PrintWriter.println(String s)`

[http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T12:58:14.670

如果您只想要最后的换行符，请附加`writer.newLine()`after `writer.write("Row2")`。如果没有写入 newLine，`writer.newLine()`可能会将错误的行结束标记写入文件。手写吧。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T12:59:09.380

`offset`为什么不通过在写入命令中包含 来强制它在文件末尾写入...

```
private void addToFavToFile(String site){
    BufferedWriter writer = null;
    File root = Environment.getExternalStorageDirectory();
    try{
        File fileToWrite = new File(Environment.getExternalStorageDirectory()+"/test2.txt");
        int endOfFile = (int)file.length();

        writer = new BufferedWriter(new FileWriter(fileToWrite,true));

        String string1 = "ROW1";
        writer.write(File.separator + string1,endOfFile,string1.length);
        endOfFile += string1.length;

        String string2 = "ROW2";
        writer.write(File.separator + string2,endOfFile,string2.length);
        endOfFile += string2.length;

        writer.close();
    }catch(Exception e){

    } 
```

# php - IntlDateFormatter::Parse 返回日期解析失败：U_PARSE_ERROR

> ID：10280872
> 
> 赞同：2
> 
> 时间：2012-04-23T12:48:33.927
> 
> 标签：php, linux, symfony

我正在为我的应用程序使用 symfony2。在日期类型表单字段验证期间，symfony 尝试解析传入的字符串日期值。由于某种原因，这在本地工作（运行 MAMP 和 php 5.3.6）但在我们的远程 Fedora 服务器上失败。（PHP 5.3.8）。这里有一些细节，我包括任何*可能*相关的东西。

实例化我正在使用的新 IntlDateFormatter 时

```
locale: en_US_POSIX
date format: 2
time format: -1
timezone: America/Chicago
calendar: 1
pattern: MM-dd-yyyy 
```

使用像 11/21/2012 这样的日期在 IntlDateFormatter 上调用**Parse**

```
$timestamp = $this->getIntlDateFormatter()->parse($value); 
```

这是 getIntl​​DateFormatter 方法。

```
protected function getIntlDateFormatter()
{
    $dateFormat = $this->dateFormat;
    $timeFormat = $this->timeFormat;
    $timezone = $this->outputTimezone;
    $calendar = $this->calendar;
    $pattern = $this->pattern;

    return new \IntlDateFormatter(\Locale::getDefault(), $dateFormat, $timeFormat, $timezone, $calendar, $pattern);
} 
```

处理将字符串日期值转换为本地化日期时间值的整个类都[在这里](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/DataTransformer/DateTimeToLocalizedStringTransformer.php)...

这会导致解析失败，可以使用以下方法访问错误：intl_get_error_message()

以下是远程机器上 phpinfo() 的一些片段：

![国际配置](../Images/c54aecde095e67fc510678d64420156e.png)

![日期配置](../Images/f231efea58734961f5789f6bfd766480.png)

如果它有帮助......整个phpinfo（）的截图...... [http://f.cl.ly/items/3q2q2C3Z0b0K1a0F0c3F/phpinfo%20.png](http://f.cl.ly/items/3q2q2C3Z0b0K1a0F0c3F/phpinfo%20.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-29T11:17:27.707

我也遇到这个问题，然后我深入搜索，发现日期格式不对。你应该选择像这种格式的日期`'format' => 'yyyy-MM-dd H:m'`

所以这是完整的列表文件将此行添加到过滤器字段中

```
->add('createdAt', 'doctrine_orm_datetime_range', array('field_type' => 'sonata_type_datetime_range'), null, array(
   'widget' => 'single_text',
   'format' => 'yyyy-MM-dd H:m',
   'required' => false,
   'attr' =>array('class' => 'datetimepicker'))
  ) 
```

然后以这种格式输入开始日期和结束日期`2014-09-29 4:46`

希望这能解决问题

# python - 在 python 中 raise 之后是否可以执行语句？

> ID：10280874
> 
> 赞同：7
> 
> 时间：2012-04-23T12:48:36.703
> 
> 标签：python, import, try-catch

[我在TwistedSNMP](http://twistedsnmp.sourceforge.net/)库中找到了以下代码：

```
try:
  raise ImportError
  import psyco
except ImportError, err:
  pass
else:
  from pysnmp.asn1 import base
  psyco.bind(base.SimpleAsn1Object)  psyco.bind(base.Asn1Object) 
```

源文件名：[pysnmpproto.py，第 42 行](http://twistedsnmp.cvs.sourceforge.net/viewvc/twistedsnmp/twistedsnmp/pysnmpproto.py?view=markup)

是否有任何情况下会执行其中一个`import psyco`或块？`else`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T13:02:57.363

`import psyco`由于上一行引发的异常，永远不会到达。该异常将被该`except`子句捕获，在这种情况下它什么也不做。`else`永远不会到达该子句，因为只有在您的`try`子句无例外地执行时您才能到达它。

简而言之，这段代码总是会引发异常，捕获它，然后什么也不做。它应该被删除。

# django - 具有 2 种语言的 Django 站点

> ID：10280881
> 
> 赞同：39
> 
> 时间：2012-04-23T12:48:49.580
> 
> 标签：django, multilingual

我想开发一个有 2 种语言的网站，一种是默认语言，一种是我的母语，另一种是可选的英语。我计划这样拥有我的域：

```
www.mydomain.com/tr/
www.mydomain.com/en/ 
```

默认情况下，一旦用户输入 mydomain.com。他们将被重定向到`/tr/`版本并选择转到 /en/ 如果他们想要通过顶部菜单。这是我的问题。

维护两种语言的最佳 Django 方式是什么，请注意我不想要自动翻译，但我想自己维护两种语言的文本。

谢谢

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2014-10-23T01:49:27.243

所以这是您问题的长版本。在 Django 1.4 到 1.7.1 上测试：

在 settings.py 中……</p>

添加到`MIDDLEWARE_CLASSES`, locale ，它可以根据请求启用语言选择：

```
'django.middleware.locale.LocaleMiddleware', 
```

添加`LOCALE_PATHS`，这是您的翻译文件将被存储的地方：

```
LOCALE_PATHS = (
    os.path.join(PROJECT_PATH, 'locale/'),
) 
```

启用 i18N

```
USE_I18N = True 
```

设置`LANGUAGES`您将网站翻译为：

```
ugettext = lambda s: s
LANGUAGES = (
    ('en', ugettext('English')),
    ('pl', ugettext('Polish')),
) 
```

添加 i18n 模板上下文处理器，请求现在将包括`LANGUAGES`和`LANGUAGE_CODE`：

对于 Django <1.8 把它放在这里：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    ....
    'django.core.context_processors.i18n', # this one
) 
```

对于 Django >= 1.8 把它放在这里：

```
TEMPLATES = [
    {
        'OPTIONS':
            {'context_processors': [
                'django.template.context_processors.i18n',  # this one
            ]}
    }
] 
```

嵌套，在 urls.py 中：

在 url_patterns 中，添加以下内容，它将启用设置语言重定向视图：

```
url(r'^i18n/', include('django.conf.urls.i18n')), 
```

[有关这方面的更多信息，请参阅翻译](https://docs.djangoproject.com/en/dev/topics/i18n/translation/)中的杂项。

添加以下导入，并用 i18n_patterns 封装要翻译的 url。这是我的样子：

```
from django.conf.urls.i18n import i18n_patterns
from django.utils.translation import ugettext_lazy as _

urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),
    url(r'^i18n/', include('django.conf.urls.i18n')),
)

urlpatterns += i18n_patterns('',
    (_(r'^dual-lang/'), include('duallang.urls')),
    (r'^', include('home.urls')),
) 
```

注意：您也可以将您的管理员网址放入 i18n_patterns。

用lazytext包裹你的文字！导入lazytext（如上）并用它包装每个字符串，就像这样_（'text'），你甚至可以去你的其他urls.py文件并像这样进行url翻译：

```
url(_(r'^dual_language/$'), landing, name='duallang_landing'), 
```

您可以将要翻译的文本包装在其他文件中，例如 models.py、views.py 等。这是一个示例模型字段，其中包含 label 和 help_text 的翻译：

```
name = models.CharField(_('name'), max_length=255, unique=True, help_text=_("Name of the FAQ Topic")) 
```

Django 翻译文档非常适合这个！

在您的 html 模板中...

现在您可以进入您的模板并加载 i18n 模板标签，并对您要翻译的静态内容使用 trans 和 transblock。这是一个例子：

```
{% load i18n %}

{% trans "This is a translation" %}<br><br>
{% blocktrans with book_t='book title'|title author_t='an author'|title %}
This is {{ book_t }} by {{ author_t }}. Block trans is powerful!
{% endblocktrans %} 
```

现在为您的每个语言环境运行一个 makemessages：

```
./manage.py makemessages -l pl 
```

现在剩下的就是进入您的 /locales 文件夹，并编辑每个 .po 文件。填写每个 msgstr 的数据。这是一个这样的例子：

```
msgid "English"
msgstr "Angielski" 
```

最后编译消息：

```
./manage.py compilemessages 
```

翻译还有很多东西要学，[国际化](https://docs.djangoproject.com/en/dev/topics/i18n/)与这个主题密切相关，所以也请查看文档。我还建议查看一些可用于 Django 的国际化包，例如[django-rosetta](https://github.com/mbi/django-rosetta)和[django-linguo](https://github.com/zmathew/django-linguo)。它们帮助翻译模型内容，django-rosetta 不会在您的数据库中为此创建新条目，而 django-linguo 会。

我还为那些有兴趣查看完整工作解决方案的人创建了一个[django 翻译演示。](https://github.com/radlws/django-translation-demo)

如果你遵循这个，你应该有一个好的开始。我相信这是让您的网站以多种语言运行的最标准化方式。干杯!

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-04-23T13:17:08.287

正如我所看到的，您在这里有两个主要选择：

(1) 您可以将站点的两个单独副本保留为不同的 Django 应用程序，并且只需让您的[urlconf](https://docs.djangoproject.com/en/dev/topics/http/urls/)指向这些应用程序——因此`url(r'^/en/', include(myproject.en))`在您的 urlconf 中将指向您的英语应用程序，而另一个指向其他语言。这将涉及为这两个应用程序维护不同的 urlconfs 集和不同的 html 模板等，如果您有兴趣让 URL 本身也反映不同的语言（例如西班牙语“/pagina/uno”与英语“ /页/一个”）。

(2) 您使用[Django 会话](http://www.djangobook.com/en/beta/chapter12/)将语言偏好记录在 cookie 中（无论如何您都应该这样做） ，然后让模板从该 cookie 中提供您喜欢的文本的适当版本。代码可能是：

```
# views.py

# default to your native language
request.session['lang'] = 'tr'

# someone clicks the link to change to English
def switch_to_English_link(request):
    request.session['lang'] = 'en' 
```

然后在模板中，为了收集这些信息，您可以使用：

```
<!-- my_django_template.html -->
<div>
  <span>
     {% if request.session.lang == "en" %}
        This is my text in English!
     {% else %}
        Şimdi benim sitede Türk var!
     {% endif %}
  </span>
</div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T12:54:31.313

您可以使用从 1.4 开始提供的可翻译 URL 模式。

[https://docs.djangoproject.com/en/dev/topics/i18n/translation/#url-internationalization](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#url-internationalization)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T13:25:44.310

如果您需要*在 URL 中指定页面的语言，*您应该使用[django-localeurl](http://pypi.python.org/pypi/django-localeurl)应用程序。即特别是您在示例中所做的事情。默认的[Django 翻译机制](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#url-internationalization)只是为您的 URL 添加前缀，这在您的 SEO 策略中可能无效。只是修复了 URL 处理部分，同时与默认的 Django 翻译机制的其余部分配合得很好。*`django-localeurl`*

# android - 在android中，如何使用xml将一个视图的最大宽度设置为imageview（实际上是它包含的图像）的最大宽度？

> ID：10280884
> 
> 赞同：0
> 
> 时间：2012-04-23T12:48:57.537
> 
> 标签：android, xml, view, width

在 android 中，如何使用 xml 将一个视图的最大宽度设置为另一个视图，例如一个 imageview（实际上是它包含的图像）？

# jquery - 在 div 中拖动元素。不要自己拖

> ID：10280889
> 
> 赞同：0
> 
> 时间：2012-04-23T12:49:21.913
> 
> 标签：jquery, jquery-ui

我有以下 div ：

```
<div id="Cc" style="height: 40px; width: 100%; border: 1px solid black" class="ui-sortable ui-droppable">
                </div> 
```

我已经成功地与 2 个可拖动的 ul 建立了连接，它们在这个 div 中创建了一个新的水平列表，当我从列表中单击一个元素时，它会被删除：

```
 $("#Cc").droppable({
            drop: function (event, ui) {
                var a = $(ui.draggable).attr('id');
                ts = "";
                if (dlistCc.length > 0)
                    ts = ",";
                var checkExists = document.getElementById("Id_" + a);
                if (checkExists) {
                    alert("Already there !");
                } else {
                    dlistCc.push(a);
                    var listElem = "<li  id=\"Id_" + a + "\"onclick=\"RemFromList('" + a + "_" + name + "_" + "#Cc" + "');\" style=\"font-weight:bold;margin-top: 1px;list-style-type: none;display:inline; margin-bottom: 3px; cursor:pointer; font-size: 11px; color:Black; padding-top: 1px; padding-bottom: 1px;  margin-left:2px; width:150px;\"><a>" + ts + $.trim($(ui.draggable).text()).replace(/\s(?=\s)/g, '') + "</a></li>";
                    $("#Cc").append(listElem);

                }
                NamesCc = NamesCc + listElem;
            }

        }); 
```

，但我有以下问题：我可以在我自己的 div 中拖动元素，并且它复制了元素。我该如何预防？

![在此处输入图像描述](../Images/26ee25fb4887e34c36aa3a227ac9c3e1.png)
提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:24:06.890

`var a = $(ui.draggable).attr('id');`

`var checkExists = document.getElementById("Id_" + a);`

这两条线是有区别的，你看出来了吗？

[`"Id_" +`]

# ruby - Ruby - 遍历数组，附加哈希 - 奇怪的行为

> ID：10280890
> 
> 赞同：1
> 
> 时间：2012-04-23T12:49:22.050
> 
> 标签：ruby, arrays, hashmap

我对循环遍历数组时更新数组的方式感到困惑。这是一个显示行为的虚构示例。

```
people = [{"name"=>"Edward", "age" =>"43", "height"=>"tallish"},
          {"name"=>"Ralph", "age" =>"40", "height"=>"medium heigth"},
          {"name"=>"George", "age" =>"35", "height"=>"very tall"},
          {"name"=>"Mark", "age" =>"25", "height"=>"short"}]
numbers = ["1","3","26"]
new_array = []

numbers.each do |number|
    people.each do |person|
        person["name"] = person["name"] +" "+ number
        new_array << person
    end
end 
```

在那个 new_array 的末尾是

```
[{"name"=>"Edward 1 3 26", "age"=>"43", "height"=>"tallish"},
{"name"=>"Ralph 1 3 26", "age"=>"40", "height"=>"medium heigth"},
{"name"=>"George 1 3 26", "age"=>"35", "height"=>"very tall"},
{"name"=>"Mark 1 3 26", "age"=>"25", "height"=>"short"},
{"name"=>"Edward 1 3 26", "age"=>"43", "height"=>"tallish"},
{"name"=>"Ralph 1 3 26", "age"=>"40", "height"=>"medium heigth"},
{"name"=>"George 1 3 26", "age"=>"35", "height"=>"very tall"},
{"name"=>"Mark 1 3 26", "age"=>"25", "height"=>"short"},
{"name"=>"Edward 1 3 26", "age"=>"43", "height"=>"tallish"},
{"name"=>"Ralph 1 3 26", "age"=>"40", "height"=>"medium heigth"},
{"name"=>"George 1 3 26", "age"=>"35", "height"=>"very tall"},
{"name"=>"Mark 1 3 26", "age"=>"25", "height"=>"short"}] 
```

每个人出现 3 次，这是我所期望和想要的。但他们的名字每次都一样。我希望名字是`"Edward 1"`第一次，然后是`"Edward 1 3"`最后`"Edward 1 3 26"`

这里发生了什么？我认为循环会将每个单独的哈希附加到 new_array 上，而不是 3 都一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:56:43.547

`people.each`为您提供对 中每个条目的引用`people`，因此当您`person["name"] =...`修改原始数组时。

尝试这个：

```
numbers.each do |number|
    people.each do |person|
        new_person = person.dup
        new_person["name"] << " " + number
        new_array << new_person
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:01:10.823

您可以稍微转换一下代码以查看该过程

```
numbers.each do |number|
    people.each do |person|
        person["name"] = person["name"] +" "+ number
        new_array << person
        puts person["name"]
    end
end 
```

你会得到这样的结果：

```
Edward 1
...
Edward 1 3
...
Edward 1 3 26
... 
```

如您所见，该算法几乎按照您的预期工作。但是`person["name"]`仅引用一个对象（字符串），这就是最终结果具有最后一个字符串的原因`Edward 1 3 26`

**编辑**：为了得到你想要的，你应该每次都创建新对象

```
numbers.each do |number|
  people.each do |person|
    person["name"] = person["name"] +" "+ number
    new_array << person.dup
  end
end 
```

不要忘记重新初始化 people 变量，因为这个表达式

```
person["name"] = person["name"] +" "+ number 
```

修改人员变量。

# objective-c - 复杂场景下如何回到第一个viewController？

> ID：10280897
> 
> 赞同：2
> 
> 时间：2012-04-23T12:49:41.790
> 
> 标签：objective-c, ios5, uiviewcontroller, popviewcontroller

我有以下视图控制器布局：

```
loginViewController -> tabBarViewController -> navigationViewController -> mainTableViewController -> logoutViewController.
                                            \
                                             --> navigationViewController -> secondaryTableViewController 
```

如果用户成功登录，他会转到 tabBarViewController 的第一个选项卡，该选项卡本身就是来自 navigationViewController 的第一个 viewController（mainTableViewController）。考虑到这个 mainTableViewController 显示了几个选项，每个选项都指向它自己的 viewController，作为选项之一的 logoutViewController。

在 logoutView 中，我有一个注销按钮（很酷，嗯？），如果注销成功，我想回到 loginViewController。

我试着打电话：

```
 [self.navigationController popToRootViewControllerAnimated:NO]; 
```

从 logoutViewController 但没有任何反应。我搜索了其他类似的问题，但大多数都建议使用 popToRootViewControllerAnimated。我不认为这很简单，因为我有一个从 viewController 推送的 tabBarController 推送的 navigationController。这样做的最佳方法是什么？

我希望它不会太混乱。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:51:18.163

我假设路径是以某种 LiFo 方式存储的；为什么不直接弹出直到计数 = 1？

# jquery - jQuery 验证和 IE8

> ID：10280899
> 
> 赞同：1
> 
> 时间：2012-04-23T12:49:48.893
> 
> 标签：jquery, internet-explorer-8, jquery-validate

我在 IE8 中没有触发 jQuery 验证的问题。所有其他浏览器都可以完美运行。

我在这里创建了一个缩减示例：

[http://www.gilkes.me.uk/jqueryvalidation/index.html](http://www.gilkes.me.uk/jqueryvalidation/index.html)

您可以看到，在 IE9、Firefox 等中，如果在未选中任一复选框的情况下按下按钮，则会显示工具提示验证消息。

在 IE8 中，不执行验证。为什么是这样？

表单标记：

```
<form action="http://www.google.com" method="post">
<div style="margin-top: 50px; text-align: left; margin-left: 30px;">
    <ul>
        <li style="list-style: none;">
            <input class="checkbox" data-val="true" data-val-checkboxtrue="You must tick the box indicated." data-val-required="The QuestionAccepted field is required." id="Questions_0__QuestionAccepted" name="Questions[0].QuestionAccepted" type="checkbox" value="true" /><input name="Questions[0].QuestionAccepted" type="hidden" value="false" />
            <strong>Question 1.</strong>
            <input id="Questions_0__QuestionText" name="Questions[0].QuestionText" type="hidden" value="That you have been a United Kingdom resident for at least 6 out of the last 12 months." />
            <input id="Questions_0__ValidationMessage" name="Questions[0].ValidationMessage" type="hidden" value="Please confirm that you have read and understood " />
            <span class="field-validation-valid" data-valmsg-for="Questions[0].QuestionAccepted" data-valmsg-replace="true"></span></li>
        <li style="list-style: none; margin-top: 30px;">
            <input class="checkbox" data-val="true" data-val-checkboxtrue="You must tick the box indicated." data-val-required="The QuestionAccepted field is required." id="Questions_1__QuestionAccepted" name="Questions[1].QuestionAccepted" type="checkbox" value="true" /><input name="Questions[1].QuestionAccepted" type="hidden" value="false" />
            <strong>Question 2.</strong>
            <input id="Questions_1__QuestionText" name="Questions[1].QuestionText" type="hidden" value="That you are aged 74 or under." />
            <input id="Questions_1__ValidationMessage" name="Questions[1].ValidationMessage" type="hidden" value="That you are aged 74 or under." />
            <span class="field-validation-valid" data-valmsg-for="Questions[1].QuestionAccepted" data-valmsg-replace="true"></span></li>
    </ul>
    <p style="margin-top: 30px;">
        <button type="submit" id="Continue" class="button-continue">
            Buy Now
        </button>
    </p>
</div>
</form> 
```

我认为这个脚本可能有问题。其中的某些内容无法与 IE8 正常工作：

```
<script type="text/javascript">
    jQuery.validator.unobtrusive.adapters.add("checkboxtrue", function (options) {
        if (options.element.tagName.toUpperCase() == "INPUT" && options.element.type.toUpperCase() == "CHECKBOX") {
            options.rules["required"] = true;
            if (options.message) {
                options.messages["required"] = options.message;
            }
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:39:57.013

使用 jQuery Validate 的 1.9 版修复了这个问题，因为我使用的版本 (1.6) 与最新版本的 jQuery 不兼容：

[jQuery 验证在 IE7 + IE8 中不起作用](https://stackoverflow.com/questions/5942327/jquery-validation-not-working-in-ie7-ie8)

我实际上读过这个问题，但认为它不适用于我，因为我确定我使用的是 jQuery Validate 1.9 版

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:12:46.363

我没有注意到提交时在 IE 中显示任何错误，所以我猜第一条`if`语句没有返回`true`。您是否尝试过使用`alert()`来检查IE8 中的值`options.element.tagName`和值？`options.element.type`

# github - 如何将来自 repo 的代码嵌入到 github markdown 中？

> ID：10280902
> 
> 赞同：34
> 
> 时间：2012-04-23T12:49:56.093
> 
> 标签：github, markdown

有没有办法在 Githubs markdown 中嵌入文件的内容（来自项目 repo）？

我有一个代码示例，想将它嵌入到项目自述文件中。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2019-06-20T10:35:59.900

@Petros 的答案（仍然）是正确的，但是我对此感到非常恼火，因此我创建了一个工具来自动复制并使您的自述文件与源代码保持同步 - [https://github.com/zakhenry/embedme](https://github.com/zakhenry/embedme)

已接受答案的示例用法

在代码围栏中插入注释

```
```rb
# path/to/your/file.rb
``` 
```

运行`npx embedme README.md`（假设你已经安装了 Nodejs）

自述文件将就地编写，文件内容在您的评论之后

```
```rb
# path/to/your/file.rb
class MyClass
end
``` 
```

请注意，由于注释仍然存在，您可以愉快地再次运行`npx embedme README.md`它，它不会做任何更改。

如果你有 CI，你也可以运行`npx embedme --verify README.md`which`1`如果检测到差异将返回（这意味着源已更新而自述文件未更新）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-15T09:05:00.537

你目前不能这样做。您必须复制代码示例并将其粘贴在 README 文件中的三个刻度之间。这是一个例子：

```
``` 红宝石
我的班级
结尾
```

```

这当然是静态的，您必须在代码更改时手动更新它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-04T20:05:07.200

如果你愿意使用 github 操作，我在 Github Marketplace 上找到了[Markdown autodocs来为我的项目工作。](https://github.com/marketplace/actions/markdown-autodocs)

您所要做的就是在`.github/workflows/your-workflow.yml`文件中添加一行：

```
uses: dineshsonachalam/markdown-autodocs@v1.0.4 
```

然后将这些片段插入到您的 Markdown 文件中：

```
<!-- MARKDOWN-AUTO-DOCS:START (CODE:src=./relative/path/to/code.js) -->
<!-- MARKDOWN-AUTO-DOCS:END --> 
```

我也喜欢它允许使用远程文件的事实：

```
<!-- MARKDOWN-AUTO-DOCS:START (CODE:src=https://raw.githubusercontent.com/username/project/master/path/to/file) -->
<!-- MARKDOWN-AUTO-DOCS:END --> 
```

还有一个事实是您可以限制打印的行数：

```
<!-- MARKDOWN-AUTO-DOCS:START (CODE:src=https://raw.githubusercontent.com/username/project/master/path/to/file&lines=1-42) -->
<!-- MARKDOWN-AUTO-DOCS:END --> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-27T15:42:57.840

您可以编写一个脚本，从公共存储库加载源代码，然后在容器中显示它。这是一个 MD 文件的示例，它从 github 加载数据并将其显示在容器中。

```
## Welcome to the Simple Alarm Server Example
This page will load and show a code example. 

<div id="code-element"></div>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
      axios({
      method: 'get',
      url: 'https://raw.githubusercontent.com/iotify/nsim-examples/master/functional-testing/alarm-server.js'
       })
      .then(function (response) {
         document.getElementById("code-element").innerHTML = response.data;
      });
</script> 
```

# java - 如何在 Java 中比较两个不同的日期时间段？

> ID：10280904
> 
> 赞同：4
> 
> 时间：2012-04-23T12:50:03.983
> 
> 标签：java, date, compare

我想比较两个不同的日期期间并且不管这两个日期期间是否相同都这样做？我怎样才能做到这一点？

```
 Date d1 = new Date();
  Date d2 = new Date();
  Date d3 = new Date();
  Date d4 = new Date(); 
```

假设上述所有日期都有不同的值，我想比较 d1、d2、d3 和 d4 之间的日期周期。即使它们代表相同的日期。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:54:30.780

您可以使用 compareTo 方法，如下所示，

```
import java.util.*; 

 public class Main {   
     public static void main(String args[]) 
     {        
           Date today=new Date();                    
           Date myDate=new Date(today.getYear(),today.getMonth()-1,today.getDay());
           System.out.println("My Date is"+myDate);    
           System.out.println("Today Date is"+today);
           if(today.compareTo(myDate)<0)
               System.out.println("Today Date is Lesser than my Date");
           else if(today.compareTo(myDate)>0)
               System.out.println("Today Date is Greater than my date"); 
           else
               System.out.println("Both Dates are equal");      
      }
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:56:24.967

我理解你的问题的方式，d1-d2 是一个日期范围，d3-d4 是另一个，你想看看这些是否部分重叠。这个对吗？

在这种情况下，您可以检查以下内容：

```
if(
       (d1.before(d3) && d2.after(d3))
    || (d3.before(d2) && d4.after(d2))) {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:55:33.803

d1.getTime() 将日期作为长返回，因此：

```
 long dif1 = d2.getTime() - d1.getTime();
 long dif2 = d4.getTime() - d3.getTIme();

 if (dif1 == dif2)
    thePeriodsAreEqual(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-09T15:20:31.070

比较期间的日期...以修改 whealther 服务`

`private boolean chDate(boolean brmv) {`

```
 Date bdt = new Date(System.currentTimeMillis());
        bdt.setHours(0);``

   long time = bdt.getTime();

    long[] ttest=new long[5];
        ttest[0]=time+1000*60*60*0;
        ttest[1]=time+1000*60*60*8;
        ttest[2]=time+1000*60*60*13; 
        ttest[3]=time+1000*60*60*19;
        ttest[4]=time+1000*60*60*24;

        long dtmp = //heure à cherché;
        long la=System.currentTimeMillis();
    for(int i=0;i<4;i++)
        if(ttest[i]<la&&la<ttest[i+1])
            if((ttest[i]>dtmp||dtmp>ttest[i+1]))
                    brmv=true;

    return brmv;
} 
```

# iphone - ios分数打开图

> ID：10280905
> 
> 赞同：0
> 
> 时间：2012-04-23T12:50:06.990
> 
> 标签：iphone, ios, facebook, facebook-opengraph

我的理解是，当我创建一个游戏的 FB 应用程序并使用分数 API 时，会自动创建几个开放的图形操作/对象，以便提供查看发布到我和我的朋友提要的高分信息的功能。事实上，我创建了一个 FB 画布应用程序并看到自动创建的高分、播放开放图操作。

我现在创建了一个仅适用于本机 iOS 并设置为游戏并使用分数 API 的新应用程序。但是，前面提到的分数打开图表操作不会自动创建，我在使用该应用程序时也不会在我的或我的朋友提要中看到任何关于高分的更新。我已经检查了桌面 FB 以及 FB 移动应用程序。

任何信息都会非常有帮助。

谢谢，

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T02:39:07.600

大卫，您必须使用托管服务器（heroku 很棒）来实现您的开放图形应用程序来保存您的对象和操作。在此处观看 Open Graph 和移动视频 --> [http://developers.facebook.com/videos/](http://developers.facebook.com/videos/)

他们创建的愿望清单应用程序有助于理解它应该如何工作。

# android - 在android中从上到下删除图库中的滑动效果

> ID：10280909
> 
> 赞同：1
> 
> 时间：2012-04-23T12:50:35.390
> 
> 标签：android

我开发了一个自定义图库并覆盖其中的 on-fling 方法以一次滑动一个图像。它有效，但问题是当我从上到下滑动时，反之亦然，图像被滑动并因此发生变化。

下面是我的代码

```
public class mygallery extends Gallery {

public mygallery(Context ctx, AttributeSet attrSet) {
    super(ctx, attrSet);

}

private boolean isScrollingLeft(MotionEvent e1, MotionEvent e2) {
    return e2.getX() > e1.getX();
}

private boolean isScrollingRight(MotionEvent e1, MotionEvent e2){
    return e2.getX() < e1.getX();

}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {
    int kEvent=0;
    if (isScrollingLeft(e1, e2)) { // Check if scrolling left
        kEvent = KeyEvent.KEYCODE_DPAD_LEFT;
    } else if(isScrollingRight(e1, e2)) { // Otherwise scrolling right
        kEvent = KeyEvent.KEYCODE_DPAD_RIGHT;
    } 
    onKeyDown(kEvent, null);
    return true;
} 
```

}

我怎样才能摆脱图像的滑动（从上到下，从下到上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:08:38.750

```
@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {
    if (Math.abs(velocityX) > Math.abs(velocityY))
    {
        // This is an horizontal fling
        // Do your operation here
    }     
    else
        // This is an vertical fling
 } 
```

# windows-7 - cygwin 未定义对 _gsl_rng_ windows 7 的引用

> ID：10280929
> 
> 赞同：1
> 
> 时间：2012-04-23T12:51:34.967
> 
> 标签：windows-7, cygwin, gsl

我使用的是 Windows 7。对于 C++，我先为 java 安装了 eclipse，然后在其中添加了 cdt。我还在我的系统中安装了 cygwin。此外，将环境变量的路径更改为`C:\Programs\Cygwin\bin`. 我在程序中使用过 gsl

```
service_gen = gsl_rng_alloc(gsl_rng_default); 
```

我还包含了 lib 文件

```
#include <gsl/gsl_rng.h>
#include <gsl/gsl_randist.h> 
```

但是当我从 cygwin 发出命令时，它给了我错误： `undefined reference to _gsl_rng_default`等等。我还检查了我的 cygwin 文件夹中是否存在 gsl 文件夹，它就在那里。我一直试图解决这个问题几个小时，但没有任何效果。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:36:05.450

我需要添加`C:\Programs\Cygwin\lib\lapack`到我的环境变量中。Lapack 有 gsl 并且需要它的路径！

# java - java中的Xdotools替代品

> ID：10280930
> 
> 赞同：2
> 
> 时间：2012-04-23T12:51:35.043
> 
> 标签：java

> **可能重复：**
> [使用 JNA 聚焦外部窗口（shell）](https://stackoverflow.com/questions/10584649/focus-an-external-window-shell-using-jna)

我正在寻找 xdotools 的现实替代品： [http ://www.semicomplete.com/projects/xdotool/](http://www.semicomplete.com/projects/xdotool/)

Xdotools 效果很好，但我想在我的 java 代码中添加一些函数来模拟 ubuntu xterm 中的键盘和鼠标输入。有图书馆可以做到这一点吗？

注意：我的 xterm 使用 x11 重定向从 Aix 操作系统重定向到我的 Ubuntu 操作系统。（我的 java 服务器在 Ubuntu 端）。

# c# - 应用程序在“StandardOutput.ReadLine()”上冻结。

> ID：10280931
> 
> 赞同：0
> 
> 时间：2012-04-23T12:51:39.963
> 
> 标签：c#, asp.net, multithreading, c#-4.0, process

尝试调用“StandardOutput.ReadLine()”时应用程序挂起。

编码：

```
ProcessStartInfo startInfo = new ProcessStartInfo("c:\\windows\\system32\\myTesting.exe");
            String s = " ";

            startInfo.WindowStyle = ProcessWindowStyle.Hidden;
            startInfo.CreateNoWindow = true;
            startInfo.RedirectStandardInput = true;
            startInfo.RedirectStandardOutput = true;
            startInfo.UseShellExecute = false;
            Process p = Process.Start(startInfo);
            p.StandardInput.WriteLine("list volume\n");
            String f = "";

            while (!p.StandardOutput.EndOfStream)
                {
                    s = p.StandardOutput.ReadLine();
                } 
```

“死锁异常”——错误有时会发生，但并非总是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:55:42.963

也许是问题所在。试试这个：

```
// Create the child process.
 Process p = new Process();

 // Redirect the output stream of the child process.
 p.StartInfo.UseShellExecute = false;
 p.StartInfo.RedirectStandardOutput = true;

 //setting the application path
 p.StartInfo.FileName = "Write500Lines.exe";
 p.Start();

 // Do not wait for the child process to exit before
 // reading to the end of its redirected stream.
 // Read the output stream first and then wait.
 string output = p.StandardOutput.ReadToEnd();
 p.WaitForExit(); 
```

# asp.net-mvc - 使用 ASP.NET MVC 的 pdf 怎么样

> ID：10280932
> 
> 赞同：0
> 
> 时间：2012-04-23T12:51:41.803
> 
> 标签：asp.net-mvc, asp.net-mvc-3, pdf, pdf-generation

我必须向用户发送电子票。电子票是关于事件、日程、行、地点、条形码和其他信息的信息。
我有两种方法：
1\. 创建 html 标记，填写所有字段，从 html 生成 pdf 文件并在邮件附件中发送用户。
2\. 设计师创建pdf格式的模板文件。而且，我打开它，填写信息并发送用户。

我从来没有使用过pdf，我需要你的建议。什么方式是简单且不那么浪费的（在服务器负载等方面）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:05:01.890

根据我的经验，两种解决方案各有利弊：

**解决方案1：**

优点：一旦你找到了一个很好的用于进行 HTML->PDF 转换的库，你就有了一个非常灵活的解决方案，因为你只需要更改你的 HTML 标记（非常简单的操作）来获得一个新的 PDF 布局。

缺点：转换 HTML 2 PDF 的操作可能会消耗 CPU（取决于 HTML 标记的大小和复杂性），并且您要将解决方案绑定到第 3 方组件

提示：您可以使用[http://www.html-to-pdf.net/](http://www.html-to-pdf.net/)

**解决方案2：**

优点：将需要非常少的资源来将布局和您需要放在上面的数据耦合在一起；此外，您只需要一个免费库 (iText.Net)，它被认为是操作 PDF 文档的标准库。

缺点：它不会那么灵活，因为您需要修改 pdf 布局和填充它的代码，才能获得新的电子机票。

**结论**

因此，如果您打算经常挂起电子机票的布局，请选择第一个，否则，我会选择第二个选项。

# jquery - jQuery在顶部滚动重置时修复项目？

> ID：10280933
> 
> 赞同：0
> 
> 时间：2012-04-23T12:51:45.423
> 
> 标签：jquery, offset, scrolltop

我在屏幕顶部的标题中有一个导航菜单，当用户向下滚动屏幕以将其保持在适当位置时，它会更改颜色并添加固定定位，但我希望当用户滚动回时将其重置为原始样式顶端。

我当前添加固定类的代码是：

```
$(function() {
    var offset = $("header").offset();
    $(window).scroll(function () {  
    var scrollTop = $(window).scrollTop();
        if (offset.top < scrollTop) {
            $("header").addClass("fixed");
        } else {
            $("header").removeClass("fixed");
        }
    });
}); 
```

但是我希望当用户再次滚动到当前没有执行的顶部时删除该类。

问候，

托马斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:04:39.300

作为对未来访问者的说明，我以前遇到过这个问题，但意识到它实际上是浏览器重置滚动位置而不是脚本。

某些浏览器会在重新加载页面时尝试重置滚动位置 - 因此在测试涉及窗口滚动的脚本时要小心使用浏览器刷新来重新加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:19:15.400

您没有正确选择标签。看看这个 jsfiddle，它应该可以解决你的问题：

[http://jsfiddle.net/aEJMF/](http://jsfiddle.net/aEJMF/)

它可能不是您所需要的，但它是一个好的开始

# c++ - 如何在 std::for_each 中“通过移动”为 lambda 捕获 std::unique_ptr

> ID：10280937
> 
> 赞同：13
> 
> 时间：2012-04-23T12:52:10.133
> 
> 标签：c++, lambda, c++11

我正在学习 c++11 中的新功能并遇到了这个问题。我想通过将其移动到 lambda 中作为 for_each 的参数来捕获 unique_ptr。

设置：

```
std::array<int,4> arr = {1,3,5,6};
std::unique_ptr<int> p(new int);  (*p) = 3; 
```

尝试 1 - 不起作用，因为 unique_ptr 没有复制构造函数。c++0x 没有指定按移动语法传递。

```
std::for_each(arr.begin(), arr.end(), [p](int& i) { i+=*p; }); 
```

尝试 2 - 使用 bind 将 p 的移动副本绑定到采用 int& 的函数：

```
std::for_each(arr.begin(), arr.end(),
     std::bind([](const unique_ptr<int>& p, int& i){
          i += (*p);
     }, std::move(p))
); 
```

编译器抱怨说`'result' : symbol is neither a class template nor a function template.`

练习的主要目的是了解如何在缓存中以供以后使用的 lambda 中捕获可移动变量。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-23T13:05:05.410

更新：您可以从 C++14 开始在 lambda 中捕获可移动变量。

```
std::for_each(arr.begin(), arr.end(), [p=std::move(p)](int& i) { i+=*p; }); 
```

* * *

在 C++11 中，您不能以任何直接的方式将可移动变量捕获到 lambda 中。

Lambdas 通过复制或引用捕获。因此，要捕获仅移动变量，您必须将其包装在复制 => 移动的对象中（例如`std::auto_ptr`）。这是一个讨厌的黑客。

在您的示例中，您可以通过引用捕获，但如果这只是简化的代码，它可能无法使用真实代码执行您想要的操作：

```
std::for_each(arr.begin(), arr.end(), [&p](int& i) { i+=*p; }); 
```

这是一个仅复制移动的包装器：

```
template<typename T>
struct move_on_copy_wrapper
{
    mutable T value;

    move_on_copy_wrapper(T&& t):
        value(std::move(t))
    {}

    move_on_copy_wrapper(move_on_copy_wrapper const& other):
        value(std::move(other.value))
    {}

    move_on_copy_wrapper(move_on_copy_wrapper&& other):
        value(std::move(other.value))
    {}

    move_on_copy_wrapper& operator=(move_on_copy_wrapper const& other)
    {
        value=std::move(other.value);
        return *this;
    }

    move_on_copy_wrapper& operator=(move_on_copy_wrapper&& other)
    {
        value=std::move(other.value);
        return *this;
    }

}; 
```

然后你可以像这样使用它：

```
int main()
{
    std::unique_ptr<int> p(new int(3));
    move_on_copy_wrapper<std::unique_ptr<int>> mp(std::move(p));

    [mp]()
    {
        std::cout<<"*mp.value="<<*mp.value<<std::endl;
    }
    ();

    std::cout<<"p="<<p.get()<<", mp="<<mp.value.get()<<std::endl;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-27T00:42:21.893

您的尝试 2 几乎会奏效。

缺少的是你没有告诉你的`bind`电话期待一个参数：

```
std::for_each(arr.begin(), arr.end(),
   std::bind([](const unique_ptr<int>& p, int& i){
      i += (*p);
   }, std::move(p), std::placeholders::_1)
); 
```

有`placeholders::_1`必要告诉结果`bind`它应该期待一个传递给它的参数`operator()`。

这也是@marton78 在[此处](https://stackoverflow.com/a/12744621/751061)的回答中给出的建议。

# bash - Bash：来自命令输出的 grep 模式

> ID：10280941
> 
> 赞同：26
> 
> 时间：2012-04-23T12:52:48.150
> 
> 标签：bash, unix, grep, pipe

我对 bash 很陌生，但它是学校的科目之一。其中一项练习是：

**给出您自己的登录信息所在的文件“/etc/passwd”的行号。**

假设`USERNAME`是我自己的登录 ID，我可以通过这种方式完美地做到这一点：

```
 cat /etc/passwd -n | grep USERNAME | cut -f1 
```

这只是给出了所需的行号（可能有更优化的方式）。然而，我想知道是否有一种方法可以使命令更通用，以便它使用 的输出`whoami`来表示 grep 模式，**而无需编写脚本或使用变量**。换句话说，要使其成为易于阅读的单行命令，如下所示：

```
 cat /etc/passwd -n | grep (whoami) | cut -f1 
```

对不起，如果这是一个真正的菜鸟问题。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-23T12:54:22.363

```
cat /etc/passwd -n | grep `whoami` | cut -f1 
```

将命令括在 ` 标记中使其执行命令并将输出发送到包含它的命令中。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-23T13:03:12.837

您可以通过一次`awk`调用来做到这一点：

```
awk -v me=$(whoami) -F: '$1==me{print NR}' /etc/passwd 
```

更详细地说：

*   `-v`创建一个名为的`awk`变量`me`并用您的用户名填充它。
*   将`-F`字段分隔符设置`:`为适合密码文件。
*   `$1==me`唯一选择第一个字段与您的用户名匹配的行。
*   `print`输出记录号（行）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-23T12:58:04.343

`bash`检查手册页中的命令替换。

你可以反勾号````或`$()`，我个人更喜欢后者。

所以对于你的问题：

```
grep -n -e $(whoami) /etc/passwd | cut -f1 -d : 
```

将输出 of`whoami`作为命令`-e`标志的参数，`grep`整个命令的输出将是`/etc/passwd`正在运行的用户的行号。

# java - 使用 JDT 删除方法

> ID：10280942
> 
> 赞同：1
> 
> 时间：2012-04-23T12:52:52.687
> 
> 标签：java, eclipse-jdt

我正在创建一个实用程序来检测代码库中未使用的方法。通过使用下面的代码，我能够成功找到未使用的方法（没有引用）。但我还需要删除这些未使用的方法。请让我知道是否可以通过 JDT。

```
// Get all the type declaration of the class.
IType [] typeDeclarationList = unit.getTypes();

for (IType typeDeclaration : typeDeclarationList) {
     // Get methods under each type declaration.
     IMethod [] methodList = typeDeclaration.getMethods();

     for (IMethod method : methodList) {

          final List<String> referenceList = new ArrayList<String>();

          // loop through the methods and check for each method.
          String methodName = method.getElementName();
          if (!method.isConstructor()) {

              // Finds the references of the method and returns the references of the method.
              JDTSearchProvider.searchMethodReference(referenceList, method, scope, iJavaProject);
          }
         if (referenceList.isEmpty()) {
                // delete method
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:15:24.423

关于 IMethod 的 Javadoc，它有一个来自 ISourceManipulation 的方法 delete()。

看：

[http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/IMethod.html](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/IMethod.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:38:55.717

通常使用 ASTRewrite 来修改源。您可以查看“删除未使用的方法”快速修复的实现 -

> org.eclipse.jdt.internal.coreext.fix.UnusedCodeFix.RemoveUnusedMemberOperation.removeUnusedName(CompilationUnitRewrite, SimpleName)

您也可以只使用 JDT 中的清理来执行此操作，请参阅“源 > 清理 > 不必要的代码 > 删除未使用的私有成员”

# html - 下拉菜单错误

> ID：10280946
> 
> 赞同：0
> 
> 时间：2012-04-23T12:52:59.540
> 
> 标签：html, css

请考虑这个网站：http: [//indivar.biz/test/balkar/](http://indivar.biz/test/balkar/)。我在“住宅项目”选项卡上创建了子菜单下拉菜单，但是当我们将导航选项卡“住宅项目”悬停时，它会在导航灰色区域内显示子下拉菜单，但我希望它显示在灰色区域之外，即具有完整内容宽度的导航。

以下是相关代码：

**CSS**

```
.left-section {
    float: left;
    overflow: hidden;
    width: 220px;
}

#nav {
    background: none repeat scroll 0 0 #E4E4E4;
    position: relative;
    z-index: 9999;
}
#nav ul {
    margin: 0 auto;
    padding: 6.5px 0;
    width: 197px;
}
#nav ul li {
    background: url("../images/nav-line-bottom.jpg") repeat-x scroll center bottom transparent;
    height: 29px;
    line-height: 34px;
}
#nav ul li a {
    color: #242121;
    display: block;
    font-size: 15px;
    height: 30px;
    line-height: 23px;
    margin-top: 5px;
    text-decoration: none;
}
#nav ul li a.home {
    background: url("../images/nav-icons.png") no-repeat scroll 0 0 transparent;
    padding-left: 32px;
}
#nav ul li a.about {
    background: url("../images/nav-icons.png") no-repeat scroll 0 -32px transparent;
    padding-left: 32px;
}
#nav ul li a.services {
    background: url("../images/nav-icons.png") no-repeat scroll 0 -63px transparent;
    padding-left: 32px;
}
#nav ul li a.resi-proj {
    background: url("../images/nav-icons.png") no-repeat scroll 0 -96px transparent;
    padding-left: 32px;
}
#nav ul li a.comm-proj {
    background: url("../images/nav-icons.png") no-repeat scroll 0 -130px transparent;
    padding-left: 32px;
}
#nav ul li a.career {
    background: url("../images/nav-icons.png") no-repeat scroll 0 -161px transparent;
    padding-left: 32px;
}
#nav ul li a.faq {
    background: url("../images/nav-icons.png") no-repeat scroll 0 -195px transparent;
    padding-left: 32px;
}
#nav ul li a.nri {
    background: url("../images/nav-icons.png") no-repeat scroll 0 -228px transparent;
    padding-left: 32px;
}
#nav ul li a.cont {
    background: url("../images/nav-icons.png") no-repeat scroll 0 -262px transparent;
    padding-left: 32px;
}
#nav ul li ul {
    background: none repeat scroll 0 0 #CC0000;
    display: none;
    left: 150px;
    position: absolute;
    top: 135px;
    width: 220px;
    z-index: 9999;
}
#nav ul li:hover ul {
    display: block;
}
#nav ul li ul li a {
    color: #FFFFFF;
    display: block;
} 
```

**HTML**

```
<div class="left-section">
      <!--logo div ends-->
      <div class="clear"></div>
      <div class="margin-top" id="nav">
        <ul>
          <li><a class="home" href="#">Home</a></li>
          <li><a class="about" href="#">About Us</a></li>
          <li><a class="services" href="#">Our Services</a></li>
          <li><a class="resi-proj" href="#">Residential Projects</a>
              <ul>
                <li><a href="#">All</a></li>
                <li><a href="#">Apartments</a></li>
                <li><a href="#">Floors</a></li>
                <li><a href="#">Plots</a></li>
                <li><a href="#">Villas</a></li>
            </ul>

          </li>
          <li><a class="comm-proj" href="#">Commercial Projects</a></li>
          <li><a class="career" href="#">Career</a></li>
          <li><a class="faq" href="#">FAQ's</a></li>
          <li><a class="nri" href="#">NRI Club</a></li>
          <li style="background: none repeat scroll 0% 0% transparent;"><a class="cont" href="#">Contact Us</a></li>
        </ul>
      </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:58:46.723

从您的DIV 中删除**溢出：隐藏。**`.left-section`像这样写：

```
.left-section {
    float: left;
    width: 220px;
}

#nav ul li ul {
    background: none repeat scroll 0 0 #CC0000;
    display: none;
    left: 220px;
    position: absolute;
    top: 135px;
    width: 220px;
    z-index: 9999;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:01:31.267

您有一些需要解决的问题，首先您的子菜单加载远离您的菜单项，我建议您将其与父菜单项并排放置，如下所示：

```
#nav ul li  {
    position:relative;
}

#nav ul li ul {
    background: none repeat scroll 0 0 #CC0000;
    display: none;
    left: 100%; /* change here */
    position: absolute;
    top: 0; /* change here */
    width: 220px;
    z-index: 9999;
} 
```

而且，您`.left-section`通过使用属性将子菜单隐藏在您的内部`overflow:hidden`，将其删除，它将完整显示。

演示：http: [//jsfiddle.net/QHaS9/1/](http://jsfiddle.net/QHaS9/1/)

# c++ - 有大量物理内存可用时，运算符 new 抛出异常

> ID：10280947
> 
> 赞同：3
> 
> 时间：2012-04-23T12:52:59.613
> 
> 标签：c++, exception, memory

在我的程序中，我使用 operator new 分配大约 130 兆字节并引发异常，但我发现任务管理器中有超过 800 兆字节可用。我希望知道任务管理器中指示为可用的物理内存与我的程序可以使用的内存之间的关系。

另一个原因是内存碎片。当我请求内存分配时，内存需要是连续的。有没有办法知道这种连续的记忆是否存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:06:48.323

物理内存<>虚拟内存。

如果您正在运行 32 位应用程序，则最多可以寻址 2 GB 内存（在 32 位操作系统上）。即使您的机器有 32 GB 的物理内存，您仍然被限制为 2 GB。如果您的计算机具有最小的物理内存（还记得我们都有 128 MB 物理内存的日子吗？），或者您正在运行许多其他应用程序，那么大小可以小于 2 GB（整个页面文件必须在所有应用程序之间进行划分）。

即使有 2 GB 内存，如果没有可用的 130MB 连续块，分配 130MB 也可能会失败。自 Windows Vista 以来，DLL 随机分布在地址空间中（查找：ASLR），这（根据我的经验）似乎会导致大量内存碎片。

您的问题有几种解决方案：

*   如果您可以控制正在运行的系统，则可以为您的系统禁用 ASLR。如果您正在销售商业软件，请不要这样做。你的客户不会接受这个。
*   如果您的 32 位应用程序在 64 位系统上运行，请为应用程序提供 /LARGEADDRESSAWARE 标志（请参阅链接器标志或 editbin 实用程序）。使用此标志，您的应用程序应该能够寻址 4 GB 而不是 2 GB。只有当你确定你没有用指针做“肮脏”的事情时才这样做（例如减去不相关的指针）。
*   分配较小的内存而不是一个大块。抽象出你需要一个大块的事实（例如，围绕这个大块编写一个类）。

如果可能的话，我会选择最后一个选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:57:10.453

我假设你在 Windows 上。可用的 RAM 量与 new 是否可以分配内存无关。这取决于您的进程的虚拟内存中是否有 130 MB 的连续虚拟内存块可用。将 RAM 视为有限的暂存器，操作系统可以在其中快速写入和读取。但是，如果它正在寻找的任何东西在暂存器中不可用，它将转到磁盘并将其写入暂存器。

# grails - grails 中的默认错误消息

> ID：10280950
> 
> 赞同：0
> 
> 时间：2012-04-23T12:53:13.183
> 
> 标签：grails, message, defaults

我想知道 Grails 在哪里设置默认错误消息。例如，我的 message.properties 文件中有这个。当我尝试使用错误值保存数据时，会出现此消息。但我不明白他在哪里（在代码中）设置了这个消息。

```
default.invalid.min.message=Property {0} with value {2} is less than minimum value {3} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:06:54.533

当属性没有通过`min`约束时，Grails 会自动使用此消息。您可以覆盖此消息并编辑您的 messages.properties 文件，或者您可以为您的类创建自定义消息。在此处查看文档：[min constraint](http://grails.org/doc/latest/ref/Constraints/min.html)，最后一句是`Error Code: className.propertyName.min.notmet`. 因此，对于未满足的最小约束的类人员和属性年龄描述，您应该在 messages.properites 中使用：

```
person.age.min.notmet=Sorry, you're too young! 
```

# wix - 使用 /I not /X 参数设置 UninstallString

> ID：10280952
> 
> 赞同：7
> 
> 时间：2012-04-23T12:53:20.007
> 
> 标签：wix, windows-installer

我有一个 MSI，我使用正在正常安装的 WiX 脚本动态构建。但是，UninstallString 始终具有 msiexec.exe 的 /I（“斜线眼”）参数，我希望它是 /X。[我在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372105%28v=vs.85%29.aspx)读到了 UninstallString ，它说这个注册表项是由 Windows 安装程序设置的。我将通过 WiX 或我发出的安装命令将什么传递给 Windows 安装程序，这会导致 UninstallString 始终具有 /I（“斜线眼”）参数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T15:06:59.330

我崩溃了，并就此与 MS 支持人员进行了交谈。答案是将 MSI 中的 ARPNOMODIFY 属性设置为 1，以生成使用 /X 参数的 UninstallString。

/I 参数意味着您在 appwiz.cpl 列表中提供了“更改”和“修复”选项。希望这可以帮助其他人面临这个问题。

下面的 MSDN 文章详细描述了 ARP 属性。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa367590(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367590(v=vs.85).aspx)

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa367591(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367591(v=vs.85).aspx)

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa367592(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367592(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T22:53:06.107

您必须在 WiX 安装程序中创建一个 ARPAltRegistryEntries 组件来设置 UninstallString。将参数设置为 /I 而不是预期的 /X 允许您使用自己的卸载 UI。这是一个例子：

```
<DirectoryRef Id="TARGETDIR">
    <!-- Create alternative ARP entry that lets us launch uninstall with
        full UI.  Setting ARPSYSTEMCOMPONENT above hides WI generated key
                that uses the product GUID.-->
    <Component Id="ARPAltRegistryEntries" Guid="">
        <RegistryKey Root="HKLM" Key="SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\Your Product"                                      Action="createAndRemoveOnUninstall">                   
            <RegistryValue Type="string" Name="UninstallString" Value="MsiExec.exe /i[ProductCode] REMOVE=ALL"/>
        </RegistryKey>
    </Component>
</DirectoryRef> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-02T19:23:26.210

这个问题是针对 Wix 项目提出的，但是如果有人正在使用 Visual Studio 的安装项目，那么解决方案之一是添加一个构建后的 vb 脚本以将 ARPNOMODIFY 更改为 1，正如@joe Baltimore 所建议的那样

1.  创建一个VB脚本文件如下“setnomodify.vbs”：

```
 Option Explicit

    Const msiOpenDatabaseModeTransact = 1
    Dim argNum, argCount:argCount = Wscript.Arguments.Count

    Dim openMode : openMode =  msiOpenDatabaseModeTransact

    'This script adds a type 51 custom action into a given MSI database that
    'ensures the ARPNOMODIFY is set to 1

    ' Connect to Windows installer object
    On Error Resume Next
    Dim installer : Set installer = Nothing
    Set installer = Wscript.CreateObject("WindowsInstaller.Installer") :
    CheckError

    ' Open database
    Dim databasePath:databasePath = Wscript.Arguments(0)
    Dim database : Set database = installer.OpenDatabase(databasePath, openMode) : CheckError

    ' Process SQL statements
    Dim query, view, record, message, rowData, columnCount, delim, column

    query = "INSERT INTO `Property` (`Property`, `Value`) VALUES ('ARPNOMODIFY', '1')"
    Set view = database.OpenView(query) : CheckError
    view.Execute : CheckError

    database.Commit

    If Not IsEmpty(message) Then Wscript.Echo message
    Wscript.Quit 0

    Sub CheckError
      Dim message, errRec
      If Err = 0 Then Exit Sub
      message = Err.Source & " " & Hex(Err) & ": " & Err.Description
      If Not installer Is Nothing Then
        Set errRec = installer.LastErrorRecord
        If Not errRec Is Nothing Then message = message & vbLf & errRec.FormatText
      End If
    Fail message
    End Sub

    Sub Fail(message)
      Wscript.Echo message
      Wscript.Quit 2
    End Sub 
```

2.  将此脚本路径添加为具有正确文件夹路径的安装程序项目的构建后事件，如下所示：

**PostBuildEvent = cscript "$(ProjectDir)setnomodify.vbs" "$(BuiltOuputPath)"**

现在，每当您构建安装程序设置项目时，ARPNOMODIFY 将设置为 1，并且已安装应用程序的 Unistallstring 将在注册表中具有“/X”而不是“/I”

您也可以通过使用 ORCA 并在 MSI 的“属性”表中将 ARPNOMODIFY 添加为 1 来手动执行此操作。

# visual-c++ - 如何使用 MSBuild 瞄准 v110 平台工具集？

> ID：10280956
> 
> 赞同：20
> 
> 时间：2012-04-23T12:53:43.607
> 
> 标签：visual-c++, msbuild, visual-studio-2012

我正在开发一个命令行应用程序，它创建由单个 VC++ 项目组成的完整 Visual Studio 11 解决方案，并尝试最终使用 MSBuild 编译它。

我面临的问题很奇怪。

如果我在 Visual Studio 11 中执行我的命令行程序，它就可以工作；如果我改为在开发环境之外启动它，它会抛出错误：

```
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets(511,5): error MSB8008: Specified platform toolset (v110) is not installed or invalid. Please make sure that a supported PlatformToolset value is selected. [f:\ABC.vcxproj] 
```

我正在使用的命令如下：

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe f:\snake\W9A30040.vcxproj /property:PlatformToolset=v110;Configuration=Debug /v:quiet 
```

但我感觉 PlatformToolset=v110 被忽略，MSBuild 使用 v100 (Visual Studio 2010)。

您对如何告诉 MSBuild 为 v110 平台工具集进行编译有什么建议吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-27T16:33:44.450

我在 VS 2012 的完整版本中也遇到了同样的问题。您还可以将 VisualStudioVersion 设置为 MSBuild 的属性，而不是像接受的答案中提到的那样处理环境变量。例如：

`C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe .\myproject.vcxproj /p:VisualStudioVersion=11.0`

环境变量方法我确信它也可以工作，老实说我没有尝试过，因为我试图避免修改环境变量。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-18T10:09:33.807

确保`.SLN`文件的顶部如下所示：

```
Microsoft Visual Studio Solution File, Format Version 12.00
# Visual Studio 2012 
```

当您双击解决方案文件时，它`# Visual Studio 2012`会控制加载哪个版本的 Visual Studio（并控制 Windows 资源管理器中显示的图标）。

但是，当您运行时`MSBuild`，*它会*查看该`Format Version 12.00`部分。

### 使困惑？

这令人困惑，因为 Visual Studio 2010 是 10.0 版，而 Visual Studio 2012 是 11.0 版（不是 12.0），并且使用 12.0 版解决方案文件格式会导致 MSBuild（隐式）设置`VisualStudioVersion`为 11.0。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-24T09:32:44.553

我找到了解决此问题的方法；可能是 Visual Studio 11 Beta 的问题，将在正式发布之前解决。

无论如何，如果您有兴趣，只需在调用 MSBuild.exe 之前将环境变量“VisualStudioVersion”设置为“11.0”即可。

在批处理文件中

```
set VisualStudioVersion=11.0 
```

或在 VB.NET 中

```
Environment.SetEnvironmentVariable("VisualStudioVersion", "11.0") 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-28T06:27:14.027

从 Visual Studio 2013 开始，MSBuild 现在是 Visual Studio 的一部分，正确的路径应该是 $(MSBuildToolsPath)（“C:\Program Files (x86)\MSBuild\12.0\Bin”）。如果您使用 .Net 框架文件夹（“C:\Windows\Microsoft.NET\Framework64\v4.0.30319”）中的 msbuild.exe，它将无法区分 vs2012 和 vs2013 版本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-11T22:28:06.107

使用基于菜单的选项来执行此操作。来自 VC++2010 Express： - 右键单击​​项目的主文件（不是树顶部的解决方案本身）。- 单击常规。- 在对话框的右侧，上半部分找到平台工具集。- 从 v110 更改为 v100。- 单击确定。

- - - 完毕 - - -

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-20T10:35:00.160

Microsoft 提供了一个批处理文件来设置所有 EnvVars 您可以在“Microsoft Visual Studio 2012/Visual Studio Tools”下的开始菜单或 Visual Studio 文件夹中找到它（“C:\Program Files (x86)\Microsoft Visual Studio 11.0\ Common7\Tools\VsDevCmd.bat")

# java - Java-Junit / AssertionFailedError：XXX 中没有测试

> ID：10280957
> 
> 赞同：0
> 
> 时间：2012-04-23T12:53:43.767
> 
> 标签：java, junit

我得到下一个问题：

> junit.framework.AssertionFailedError：在 TestT 中找不到测试

正如我在网上看到的，这个问题是在没有`@Test`之前的测试方法的时候出现的。所以，我添加了它：

```
@SuppressWarnings("deprecation")
@Test
public void dateSimpleTest(){
    ....
} 
```

但它仍然给我同样的错误。我还导入下一个：

```
import junit.framework.*;
import org.junit.Test; 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:33:52.243

尝试重命名您的测试方法。测试方法的名称以“test”开头，如“testDateSimple”。

# jquery - Jquery click - IE 上的 e.target.classList 未定义

> ID：10280962
> 
> 赞同：0
> 
> 时间：2012-04-23T12:53:58.440
> 
> 标签：jquery, internet-explorer, click

**演示**
[http://jsfiddle.net/bRqAR/2/](http://jsfiddle.net/bRqAR/2/)

此代码在 Internet Explorer 上不起作用（检查控制台）。
我怎样才能解决这个问题？

**html**

```
<div id="myDiv_1451" class="allDivs">
Hello
    <div class="iconDiv"><img src="http://jsfiddle.net/img/keys.png" /></div>
    <div style="clear:both;"></div>
</div> 
```

**JS**

```
$(document).ready(function() {

    $('.allDivs').click(function(e)
    {
         var divId = this.id.replace(/myDiv_/gi,'');

         if(e.target.classList[0] == 'iconDiv' || e.target.parentElement.className == 'iconDiv')
         {
           alert('click on green iconDiv or on icon');
         }
         else
         {
           alert('click on main');
         }
    });                                              
 }); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:59:12.780

我在IE上试过，

删除 [0] `e.target.classList[0] > replace with e.target.classList == 'iconDiv'`

适用于 chrome 和 IE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:00:18.147

IE 出现此错误：无法获取属性 '0' 的值：对象为 null 或未定义，因此更改`e.target.classList[0]`为`e.target.classList == 'iconDiv'`

# python - Python- 从多个文件中读取

> ID：10280963
> 
> 赞同：5
> 
> 时间：2012-04-23T12:54:00.193
> 
> 标签：python, file

我有 125 个数据文件，其中包含两列和 21 行数据。请看下图：

![在此处输入图像描述](../Images/e5c35c4b931738952ed60da68d870e21.png)

我想将它们导入单个 .csv 文件（作为 250 列和 21 行）。

我对python相当陌生，但这是我被告知的，代码明智的：

```
import glob
Results = [open(f) for f in glob.glob("*.data")] 
fout = open("res.csv", 'w')

for row in range(21):
 for f in Results:
  fout.write( f.readline().strip() ) 
  fout.write(',')
 fout.write('\n')
fout.close() 
```

但是，代码有一点问题，因为我只得到了 125 列，（即力和位移列写在一列中）请参考下图： ![在此处输入图像描述](../Images/29ea0659b0fe6ce3ac2bce97c1851d79.png)

![在此处输入图像描述](../Images/e63351a0b75b06681de7576e07eebf90.png)

如果有人能帮我解决这个问题，我将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T13:06:50.633

```
import glob
results = [open(f) for f in glob.glob("*.data")]
sep = ","
# Uncomment if your Excel formats decimal numbers like 3,14 instead of 3.14
# sep = ";"

with open("res.csv", 'w') as fout:
    for row in range(21):
        iterator = (f.readline().strip().replace("\t", sep) for f in results)
        line = sep.join(iterator)
        fout.write("{0}\n".format(line)) 
```

因此，为了解释您的代码出了什么问题，您的源文件使用制表符作为字段分隔符，但您的代码使用逗号分隔从这些文件中读取的行。如果您的 Excel 使用句点作为小数分隔符，则它使用逗号作为默认字段分隔符。除非用引号括起来，否则空格将被忽略，并且您会看到结果。

如果您使用 Excel 的文本导入功能（数据功能区 => 从文本），您可以要求它将逗号*和*制表符视为有效的字段分隔符，然后我很确定您的原始输出也可以工作。

相比之下，上面的代码应该会生成一个双击时可以正确打开的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T14:11:05.027

您不需要编写自己的程序来执行此操作，使用 python 或其他方式。您可以使用现有的 unix 命令（如果您在该环境中）：

```
paste *.data > res.csv 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:11:14.523

尝试这个：

```
import glob, csv
from itertools import cycle, islice, count

def roundrobin(*iterables):
    "roundrobin('ABC', 'D', 'EF') --> A D E B F C"
    # Recipe credited to George Sakkis
    pending = len(iterables)
    nexts = cycle(iter(it).next for it in iterables)
    while pending:
        try:
            for next in nexts:
                yield next()
        except StopIteration:
            pending -= 1
            nexts = cycle(islice(nexts, pending))

Results = [open(f).readlines() for f in glob.glob("*.data")] 
fout = csv.writer(open("res.csv", 'wb'), dialect="excel")

row = []
for line, c in zip(roundrobin(Results), cycle(range(len(Results)))):
    splitline = line.split()
    for item,currItem in zip(splitline, count(1)):
        row[c+currItem] = item
    if count == len(Results):
        fout.writerow(row)
        row = []
del fout 
```

它应该遍历输入文件的每一行并将它们拼接成一行，csv 库将以列出的方言写入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T15:37:19.067

我建议习惯 csv 模块。原因是如果数据不是那么简单（标题中的简单字符串，然后只有数字），则很难再次实现所有内容。尝试以下操作：

```
import csv
import glob
import os

datapath = './data'
resultpath = './result'
if not os.path.isdir(resultpath):
   os.makedirs(resultpath)

# Initialize the empty rows. It does not check how many rows are
# in the file.
rows = []

# Read data from the files to the above matrix.
for fname in glob.glob(os.path.join(datapath, '*.data')):
    with open(fname, 'rb') as f:
        reader = csv.reader(f)
        for n, row in enumerate(reader):
            if len(rows) < n+1:
                rows.append([])  # add another row
            rows[n].extend(row)  # append the elements from the file

# Write the data from memory to the result file.
fname = os.path.join(resultpath, 'result.csv')
with open(fname, 'wb') as f:
    writer = csv.writer(f)
    for row in rows:
        writer.writerow(row) 
```

打开文件的`with`构造可以由以下一对替换：

```
f = open(fname, 'wb')
...
f.close() 
```

csv.reader 和 csv.writer 只是解析或组成文件行的包装器。文档说他们需要以二进制模式打开文件。

# jsf - 控制 p:autoComplete (primefaces) 中下拉按钮的大小

> ID：10280969
> 
> 赞同：0
> 
> 时间：2012-04-23T12:54:31.770
> 
> 标签：jsf, autocomplete, size, primefaces, drop-down-menu

我在我的 jsf 2 Web 应用程序中使用 primefaces 3 来显示建议列表：p:autoComplete

```
 <p:autoComplete
     value="#{articleBean.unite}"
     completeMethod="#{articleBean.autocompleteUnite}"
     var="item" itemLabel="#{item.code}" itemValue="#{item}"
     converter="#{articleBean.uniteConverter}" 
     dropdown="true"/> 
```

属性 dropdown="true" 在输入项旁边添加一个下拉按钮：

问题是下拉按钮的大小：它看起来很大，我无法更改它的大小。

是否有控制其外观的样式类可能是样式元素，请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:26:13.590

```
<button class="ui-button ui-widget ui-state-default ui-corner-right ui-button-icon-only"         type="button" style="**width: 100px;**">
 <span class="ui-button-icon-primary ui-icon ui-icon-triangle-1-s"></span>
 <span class="ui-button-text"></span> 
```

'ui-button ui-widget ui-state-default ui-corner-right ui-button-icon-only' 这个类可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T07:22:50.000

在您的页面中将此代码复制到`<head>`：

```
<style>
button.ui-button-icon-only {width: 1em} 
</style> 
```

我希望这对你有用。

# android - 如何禁用 ViewGroup 的所有子项上的所有触摸事件？

> ID：10280970
> 
> 赞同：11
> 
> 时间：2012-04-23T12:54:42.067
> 
> 标签：android, webview, onclick, scrollview, android-viewpager

我有一个`FrameLayout`包含很多东西的容器（包括`ScrollView`, `WebView`, `ViewPager`...）。

我希望能够在这个容器上触发 onClick 事件，但似乎有一些`ScrollView`,`WebView`并`ViewPager`拦截了 touch 事件，因为 onClick 事件只有在我点击容器中没有的部分时才会触发他们...

如何禁用容器子级上的所有触摸事件，以便能够在其中的任何位置触发 onClick？

**更新**

这个想法是在 Android 3.2 中拥有类似任务管理器的东西，即应用程序的当前可见屏幕显示为缩小的图标，可以单击。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-19T15:54:12.207

可能是我误解了一些东西，但我想你的问题的答案很简单：如果你不想向孩子发送任何触摸事件 - 所以你只需要像这样覆盖`ViewGroup.onInterceptTouchEvent (MotionEvent ev)` [API 引用](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent(android.view.MotionEvent))：

```
public boolean onInterceptTouchEvent (MotionEvent ev){
    return true;
} 
```

根据 android 文档，这意味着您的 ViewGroup 将始终拦截所有触摸事件并且不会将它们分派给孩子。所有这些都将被定向到`ViewGroup.onTouchEvent(MotionEvent ev)`您的 ViewGroup 的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:13:40.277

您可以像这样禁用它们：

```
FrameLayout parent = (FrameLayout)findViewById(some_id);
disableChildsOnTouch(parent)

public void disableChildsOnTouch(ViewGroup viewGroup){
    int cnt = viewGroup.getChildCount();
    for (int i = 0; i < cnt; i++){
        View v = viewGroup.getChildAt(i);
        if (v instanceof ViewGroup){
            disableChildsOnTouch((ViewGroup)v);
        } else {
            v.setOnTouchListener(null);
            v.setOnClickListener(null);
            //v.SETYOURLISTENER(null)
        }
    }
} 
```

# php - 将数组从视图传递到控制器 cakephp

> ID：10280971
> 
> 赞同：0
> 
> 时间：2012-04-23T12:54:47.213
> 
> 标签：php, javascript, cakephp

这是我视图的一部分（单击按钮时执行的 javascript 方法）：

```
function assign()
{
    var links_list1 = [];
    var links1 = document.getElementById('moderatorUsers').getElementsByTagName('a');
    for(var a in links1) {
        if(typeof links1[a] == undefined) continue;
        links_list1.push(links1[a].innerHTML);} var str1 =links_list1.toString();
    var moderators = str1.split(',');

    var links_list2 = [];
    var links2 = document.getElementById('editorUsers').getElementsByTagName('a');
    for(var a in links2) {
        if(typeof links2[a] == undefined) continue;
        links_list2.push(links2[a].innerHTML);} var str2 =links_list2.toString();
    var editors = str2.split(',');

    var links_list3 = [];
    var links3 = document.getElementById('jEditorUsers').getElementsByTagName('a');
    for(var a in links3) {
        if(typeof links3[a] == undefined) continue;
        links_list3.push(links3[a].innerHTML);} var str3 =links_list3.toString();
    var jEditors = str3.split(',');             
} 
```

这是我需要使用 javascript（版主、编辑、jEditors）中的 3 个数组调用的控制器方法：

```
 function insertPos($moderators,$editors,$jEditors){
        $account = new Account();
        $account->insertPos($moderators,$editors,$jEditors);
    } 
```

我需要知道如何使用 javascript 方法中的 3 个数组执行控制器方法 insertPos($moderators,$editors,$jEditors) ...

我用它来发送 javascript 中的数组，就像你告诉我的那样：

```
$.post('http://localhost/cakephp/Accounts/insertPos', {
            data: {
                'moderators': moderators,
                'editors': editors,
                'jEditors': jEditors
            }
        }); 
```

在控制器中，我尝试像这样访问我的数组：

```
public function insertPos() {
        if (!empty($this->request->data)){
        print_r($this->request->data);
        $moderators = $this->request->data['moderators'];
        $editors = $this->request->data['editors'];
        $jEditors = $this->request->data['jEditors'];
        $account = new Account();
        $account->assignPos($moderators,$editors,$jEditors);
        }
    } 
```

里面的部分`if(!empty($this->request->data))`永远不会被执行，这意味着数组还没有被发送到控制器......问题出在哪里？

谢谢你....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:21:33.940

看起来您正在尝试直接访问控制器类。这不是 CakePHP 的工作方式。您必须通过调度过程。请阅读：[http ://book.cakephp.org/2.0/en/getting-started/a-typical-cakephp-request.html](http://book.cakephp.org/2.0/en/getting-started/a-typical-cakephp-request.html)

也就是说，您将 POST 到 CakePHP url 的方式是：

```
// POST to the AccountsController's insertPos method
$.post('/accounts/insertPos'); 
```

要传递数据，请将其传递到`data`jQuery 指定的选项中，并以 'data' 为前缀，就像`data[moderators]`它最终在 Cake 的数据变量中一样。

```
$.post('/accounts/insertPos', {
  data: {
    'data[moderators]': moderators,
    'data[editors]': editors,
    'data[jEditors]': jEditors
  }
}); 
```

数据现在将`$this->request->data`在 Cake 中结束。

但是，查看您的`insertPost()`方法，您只是将它们作为参数传递，因此您可以像这样编写 ajax

```
// POST is unnecessary here, since you aren't POSTing data
$.get('/accounts/insertPos/'+moderators+'/'+editors+'/'+jEditors); 
```

您可能需要[`stringify`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)您的 JavaScript 数组并[`json_decode`](http://us.php.net/manual/en/function.json-decode.php)在您的`inserPos`方法中使用将它们转换为 PHP 对象，因为您不能只将数组从 JavaScript 传递给 PHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:15:39.403

不要在数据参数中使用数组表示法；只需使用这样的键：

```
$.post('/accounts/insertPos', {
  data: {
    'moderators': moderators,
    'editors': editors,
    'jEditors': jEditors
  }
}); 
```

并在您的控制器中访问`$this->request->data[key]`它`$this->request->data->data[key]`

在视图中，将您的分配功能替换为以下内容：

```
var moderators, editors, jEditors;

function assign()
{
    var links_list1 = [];
    var links1 = document.getElementById('moderatorUsers').getElementsByTagName('a');
    for(var a in links1) {
        if(typeof links1[a] == undefined) continue;
        links_list1.push(links1[a].innerHTML);} var str1 =links_list1.toString();
    moderators = str1.split(',');

    var links_list2 = [];
    var links2 = document.getElementById('editorUsers').getElementsByTagName('a');
    for(var a in links2) {
        if(typeof links2[a] == undefined) continue;
        links_list2.push(links2[a].innerHTML);} var str2 =links_list2.toString();
    editors = str2.split(',');

    var links_list3 = [];
    var links3 = document.getElementById('jEditorUsers').getElementsByTagName('a');
    for(var a in links3) {
        if(typeof links3[a] == undefined) continue;
        links_list3.push(links3[a].innerHTML);} var str3 =links_list3.toString();
    jEditors = str3.split(',');             
} 
```

祝你好运

# function - CI2 中的共享功能：助手？图书馆？

> ID：10280973
> 
> 赞同：1
> 
> 时间：2012-04-23T12:55:04.907
> 
> 标签：function, codeigniter, codeigniter-2

我对 OOP 还是很陌生，并且一直在学习 CodeIgniter2+Doctrine2。

我有几个共享函数在我的项目的各个领域都很方便，所以我想调用它们。在程序 PHP 中，我只需将它们粘贴在库文件中并调用它们。但这对我现在不起作用..

```
include 'function_library.php';
$name = $this -> function_library -> generate_male_name(); 
```

> 消息：未定义属性：Turn::$function_library

我什至读过你需要使用的地方`call_function()`，但这只让我：

> 致命错误：调用未定义的方法 Turn::call_function()

所以我想也许我应该把它作为一个助手加载。

```
$this->load->helper('character_helper');
echo generate_male_name(); 
```

> 致命错误：在第 19 行的 /PATH/systemFolder/helpers/character_helper.php 中不在对象上下文中时使用 $this

第 19 行：

> $query = $this->doctrine->em->createQuery("select max(u.id) from ORM\Dynasties2\Malenames u");

我考虑将其设置为图书馆，但老实说，就类等而言，这开始让我有点不知所措。我还没有尝试过。

这是该功能的全部内容：

```
function generate_male_name() {
        $query = $this->doctrine->em->createQuery("select max(u.id) from ORM\Dynasties2\Malenames u");
         $result = $query->getSingleResult();
         //echo $result2[1];
         $highval = $result[1];
         $random_name = rand(1,$highval);
         //echo $random_name;
         $name = $this->doctrine->em->find('ORM\Dynasties2\Malenames', $random_name);
         return $name->getName();     
    } 
```

我怎样才能做到这一点？

编辑：

尝试了一些额外的东西，仍然没有成功。

我把我的function_library放在third_party中，并且做了：

```
$this->load->add_package_path(APPPATH.'third_party/function_library/');
$name = $this -> generate_male_name(); 
```

> 致命错误：调用未定义的方法 Turn::generate_male_name()

或者`$name = $this -> function_library -> generate_male_name();`

> 消息：未定义属性：Turn::$function_library

我并不热衷于在自动加载器中调用它，我不需要在*任何地方*使用它，这似乎效率不高。

我已经阅读了有关库的内容，但正如我所说，类很快就让我头晕目眩，创建一个新库对我来说似乎有点令人生畏。

***这里最好的解决方案是什么？我如何共享一些功能？图书馆是我需要走的路，还是我只是在尝试使助手或 shared_functions 工作时遗漏了一些小东西？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:00:11.083

**可能不是答案**，只是说说而已`CodeIgniter`

> 致命错误：在第 19 行的 /PATH/systemFolder/helpers/character_helper.php 中不在对象上下文中时使用 $this

当您尝试在对象上下文之外使用`CI`带有关键字的实例时（未实例化时），就会发生这种情况。观察上面的错误，我可以猜测您正在使用位于文件夹内但在对象上下文之外的帮助程序。要使用对象，您必须实例化using`$this``CI``$this``character_helper.php``helpers``CI``CI``CI`

```
$ci = & get_instance(); 
```

并在你的助手中使用`$ci`而不是。`$this`

如果你想在任何控制器中使用你的助手，那么你可以像往常一样在你的控制器中正常加载它，即

```
$this->load->helper('character_helper'); 
```

如果你的助手有一个函数`generate_male_name`，那么你可以在你的控制器中调用它，如下所示

```
generate_male_name(); 
```

> 然而，$this 只能直接在你的控制器、模型或视图中工作。

[**创建 CodeIgniter 库。**](http://codeigniter.com/user_guide/general/creating_libraries.html)

# java - Elasticsearch Java API - 使用 max_expansion 进行模糊搜索

> ID：10280975
> 
> 赞同：4
> 
> 时间：2012-04-23T12:55:08.867
> 
> 标签：java, api, elasticsearch

如何将 QueryDSL 指南中的[“更复杂”的模糊示例](http://www.elasticsearch.org/guide/reference/query-dsl/fuzzy-query.html)翻译成 Java？

到目前为止我所拥有的是：（效果很好，但例如我无法找到“max_expansion”的构建器方法，这将允许我限制查询）

```
QueryBuilders.fuzzyQuery("name", "kimchy") 
```

任何指向正确方向的指针都值得赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T14:40:22.107

它应该是`QueryBuilders.fuzzyQuery("name", "kimchy").maxExpansion(5)`。但是，不幸的是，目前缺少 maxExpansion() 方法。因此，在合并[此拉取请求](https://github.com/elasticsearch/elasticsearch/pull/1882)之前，发送此查询的唯一方法是直接在 json 中表达它。您可以使用 XContentBuilder 来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:06:33.747

直接构造一个[Lucene FuzzyQuery](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/search/FuzzyQuery.html)，然后您可以将该选项传递给构造函数 arg。

# html - 如何读取 HTML 文件中表的值并将它们存储在 Perl 中？

> ID：10280979
> 
> 赞同：1
> 
> 时间：2012-04-23T12:55:23.703
> 
> 标签：html, perl

我阅读了许多问题和许多答案，但我找不到我的问题的直接答案。所有的答案要么非常笼统，要么与我想做的不同。到目前为止，我需要使用 HTML::TableExtract 或 HTML::TreeBuilder::XPath 但我不能真正使用它们来存储值。我可以以某种方式获取表格行值并使用 Dumper 显示它们。

像这样的东西：

```
foreach my $ts ($tree->table_states) {
 foreach my $row ($ts->rows) { 
   push (@fir , (Dumper $row)); 
} }
print @sec; 
```

但这并不是我真正想要的。我将添加要存储值的 HTML 表的结构：

```
<table><caption><b>Table 1 </b>bla bla bla</caption>
<tbody>
    <tr>
        <th ><p>Foo</p>
        </th>

        <td ><p>Bar</p>
        </td>

    </tr>

    <tr>
        <th ><p>Foo-1</p>
        </th>

        <td ><p>Bar-1</p>
        </td>

    </tr>

    <tr>
        <th ><p>Formula</p>
        </th>

        <td><p>Formula1-1</p>
            <p>Formula1-2</p>
            <p>Formula1-3</p>
            <p>Formula1-4</p>
            <p>Formula1-5</p>
        </td>

    </tr>

    <tr>
        <th><p>Foo-2</p>
        </th>

        <td ><p>Bar-2</p>
        </td>

    </tr>

    <tr>
        <th ><p>Foo-3</p>
        </th>

        <td ><p>Bar-3</p>
             <p>Bar-3-1</p>
        </td>

    </tr>

</tbody>

</table> 
```

如果我可以将行值成对存储在一起会很方便。

预期输出类似于一个数组，其值为： (Foo , Bar , Foo-1 , Bar-1 , Formula , Formula-1 Formula-2 Formula-3 Formula-4 Formula-5 , ....)对我来说是学习如何存储每个标签的值以及如何在标签树中移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:45:13.893

学习 XPath 和 DOM 操作。

```
use strictures;
use HTML::TreeBuilder::XPath qw();
my $dom = HTML::TreeBuilder::XPath->new;
$dom->parse_file('10280979.html');

my %extract;
@extract{$dom->findnodes_as_strings('//th')} =
    map {[$_->findvalues('p')]} $dom->findnodes('//td');
__END__
# %extract = (
#     Foo     => [qw(Bar)],
#     'Foo-1' => [qw(Bar-1)],
#     'Foo-2' => [qw(Bar-2)],
#     'Foo-3' => [qw(Bar-3 Bar-3-1)],
#     Formula => [qw(Formula1-1 Formula1-2 Formula1-3 Formula1-4 Formula1-5)],
# ) 
```

# javascript - 三.js立方体调整大小

> ID：10280980
> 
> 赞同：0
> 
> 时间：2012-04-23T12:55:25.217
> 
> 标签：javascript, three.js

我的three.js代码是这样的：

```
cube = new THREE.Mesh(new THREE.CubeGeometry(200, 200, 200, 1, 1, 1, materials), new THREE.MeshFaceMaterial());
cube.position.y = 150;
cube.position.x = 0;
scene.add(cube); 
```

但是当我渲染我的立方体时，这个立方体的大小总是不同的。我试图更好地解释。每次我调整浏览器大小并刷新页面时，立方体大小都会不同。是否可以将立方体大小设置为固定？如果窗口调整大小！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:32:03.607

您可以为渲染器设置固定大小：

```
renderer.setSize(WIDTH, HEIGHT); 
```

看看这个简单的例子：http: [//jsfiddle.net/9stj8/](http://jsfiddle.net/9stj8/)

还要检查您的代码是否正在处理窗口调整大小事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:14:13.883

我知道这个问题已经得到解答，但我想提交一些东西以供后代考虑，以及跟随我们步骤的人的沮丧程度。

Three.js 使用相机对象来提供 3d 场景的视图。我主要使用透视相机（而不是正交相机，如果您使用的是正交相机，抱歉目前无法帮助您。），我碰巧偶然发现了您正在讨论的问题的解决方案. 透视图在创建时采用某些参数：

1.  fov（确定垂直视野的角度
2.  纵横比（宽度/高度值）<--重要！
3.  近剪裁平面（当对象足够接近以被视为“在”相机镜头“后面”时的标量值，因此不再可见）
4.  远剪裁平面（当对象距离足够远以被认为对相机不可见时的标量值

由于浏览器窗口是您的视口，因此我们通常使用浏览器窗口属性来设置相机的纵横比。由于这些属性将相机设置为正确渲染（如果视口大小和相机/渲染器设置不匹配，您的图像将出现粉碎/挤压/扭曲，如果它出现的话），如果浏览器窗口被调整大小相机值不再匹配相机用于渲染场景的值。

正如 Juan Mellado 所指出的，您可以使用该`renderer.setSize(w,h)`方法更改视口的大小。如果您希望窗口调整大小更改也更新渲染器和相机，请执行以下操作：

```
function onResize()
        {
            var width, height;
            width = window.innerWidth; // for example
            height = window.innerHeight; // for example                

            //First update the camera's aspect ratio: width / height
            camera.aspect = width/height;

            //Whenever you make a change to the camera, 
            //you must update for your changes to take effect
            camera.updateProjectionMatrix();

            //Here we reset the size of the window to the new height
            renderer.setSize(width, height);
        } 
```

现在我们已经声明了一个可以处理更新相机和渲染器的回调函数，不要忘记将它绑定到 window.resize 事件。我只是使用 jQuery 来做到这一点：

```
jQuery(window).resize(onResize); 
```

或者

```
window.onresize = onResize; 
```

回顾：

1.) 用于计算相机纵横比的值必须与作为渲染器大小值传递的值相匹配。

2.) 如果您希望相机纵横比和渲染器大小值随浏览器大小缩放，则必须将回调函数绑定到 window.onresize 事件来执行此操作。

3.) 如果您对相机进行更改，在创建后，您必须调用“updateProjectionMatrix()”来更新相机的内部值，以便您的更改生效。

如果一切顺利，当您更改窗口大小时，相机纵横比和渲染器大小将自动随窗口大小缩放。

干杯和快乐的编码！

# python - 如何设置 Fabric 任务的工作目录？

> ID：10280984
> 
> 赞同：27
> 
> 时间：2012-04-23T12:56:01.853
> 
> 标签：python, fabric

假设我定义了一个简单的任务来列出远程服务器上的文件：

```
from fabric.api import run, env

env.use_ssh_config = True

def list_files():
    run('ls') 
```

我执行它：

```
fab -H server list_files 
```

除了执行以下操作之外，我如何为正在运行的命令指定工作目录：

```
run('cd /tmp && ls') 
```

哪个对我来说看起来不太地道？

*免责声明：我有生以来第一次看到 Fabric，而且我对 Python 完全陌生。*

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-23T14:01:35.843

Use the [Context Manager `cd`](http://docs.fabfile.org/en/latest/api/core/context_managers.html#fabric.context_managers.cd):

```
from fabric.api import run, env
from fabric.context_managers import cd

env.use_ssh_config = True

def list_files():
    with cd('/tmp'):
        run('ls') 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-12-23T10:38:46.513

答案`fabric 2.4.0`看起来像这样：

```
from fabric import Connection

conn = Connection(host=HOST_NAME, user=USER_NAME, connect_kwargs={'password': PASSWORD})

with conn.cd('/tmp/'):
    conn.run('ls -la') 
```

这不在`fabric`文档中，而是在[`invoke`文档](http://docs.pyinvoke.org/en/latest/api/context.html#invoke.context.Context.cd)中。

# android - 在同一布局中使用 DatePicker 和 TimePicker

> ID：10280988
> 
> 赞同：0
> 
> 时间：2012-04-23T12:56:20.160
> 
> 标签：android, android-layout

我正在尝试在同一布局中使用一个日期选择器和两个时间选择器，但仅显示布局中的第一个。我确定我的布局一定有问题，但还没有发现错误。

布局.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#B5B5B5"
    android:orientation="vertical" >

    <include layout="@layout/actionbar_layout" />

    <LinearLayout
        android:id="@+id/new_conference_date"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#f8f9fe"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/new_conference_date_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="date:"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/new_conference_date_value"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=""
            android:textColor="#000000" />

        <Button
            android:id="@+id/new_conference_date_picker"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/new_conference_start"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#f8f9fe"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/new_conference_start_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="start:"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/new_conference_start_value"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=""
            android:textColor="#000000" />

        <Button
            android:id="@+id/new_conference_start_picker"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/new_conference_end"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#f8f9fe"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/new_conference_end_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="end:"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/new_conference_end_value"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=""
            android:textColor="#000000" />

        <Button
            android:id="@+id/new_conference_end_picker"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:04:41.170

试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#B5B5B5"
android:orientation="vertical" >

<include layout="@layout/actionbar_layout" />

<LinearLayout
    android:id="@+id/new_conference_date"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#f8f9fe"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/new_conference_date_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="date:"
        android:textColor="#000000" />

    <TextView
        android:id="@+id/new_conference_date_value"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""
        android:textColor="#000000" />

    <Button
        android:id="@+id/new_conference_date_picker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="" />
</LinearLayout>

<LinearLayout
    android:id="@+id/new_conference_start"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#f8f9fe"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/new_conference_start_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="start:"
        android:textColor="#000000" />

    <TextView
        android:id="@+id/new_conference_start_value"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""
        android:textColor="#000000" />

    <Button
        android:id="@+id/new_conference_start_picker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="" />
</LinearLayout>

<LinearLayout
    android:id="@+id/new_conference_end"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#f8f9fe"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/new_conference_end_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="end:"
        android:textColor="#000000" />

    <TextView
        android:id="@+id/new_conference_end_value"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""
        android:textColor="#000000" />

    <Button
        android:id="@+id/new_conference_end_picker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="" />
</LinearLayout> 
```

我只是将内部 LinearLayouts 高度更改为 wrap_content

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:01:08.847

您在 layout_width 中有三个具有 match_parent 的 LinearLayout，没有权重。

尝试将下一行添加到那些 LinearLayout 的

```
 android:layout_weight="1" 
```

# c# - C#中的Xml序列化，数组的内容占位符

> ID：10280993
> 
> 赞同：0
> 
> 时间：2012-04-23T12:57:07.393
> 
> 标签：c#, generics, serialization

我正在尝试通过序列化对象来创建 xml 文档。我遇到了一个问题。

目标 xml 结构类似于 HTML 页面。它有一个带有一些属性的表单元素，并且可以有任意数量的控件，如文本字段、按钮等。我为此结构创建的对象如下所示。为了添加所有这些控件，我使用了一个名为 items 的数组列表。当对象被序列化时，所有控件都出现在标签内。我希望控件显示为表单元素的直接子元素。我怎样才能做到这一点？

```
 [XmlInclude(typeof(Lstatic))]

    [XmlInclude(typeof(textField))]

    public class form
    {
        [XmlAttribute]
        public String action
        {
            get;
            set;
        }

        [XmlAttribute]
        public String method
        {
            get;
            set;
        }

        [XmlAttribute]
        public String name
        {
            get;
            set;
        }

        [XmlArray]
        public ArrayList items
        {
            get;
            set;
        }

    } 
```

这是生成的 XML

```
<form name="login" method="get" action="/FetchIndex.asmx/findAddresses"> 
<items> 
<anyType value="Please key in your details:" xsi:type="Lstatic"/> 
<anyType name="postCode" value="" xsi:type="textField" size="10" label="Postcode:" hint="Enter your postcode"/> 
</items> 
</form> 
```

相反，我想要这样的结果 xml

```
<form name="login" method="get" action="/FetchIndex.asmx/findAddresses"> 

    <anyType value="Please key in your details:" xsi:type="Lstatic"/> 
    <anyType name="postCode" value="" xsi:type="textField" size="10" label="Postcode:" hint="Enter your postcode"/> 

    </form> 
```

我怎么能在 C# 中做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:00:10.450

这段代码未经测试，对不起，这只是我记得的。我相信你需要这个`XmlElement`属性。

```
[XmlElement("AnyType")]
public object[] itemsSerializable
{
    get { return items.ToArray(); }
    set { items = new ArrayList(value); }
}

[XmlIgnore]
public ArrayList items
{
    get;
    set;
} 
```

如果它有效，它有可能在不需要`itemsSerializable`属性的情况下也可以工作，你应该检查一下。

# c# - 比较两个字符串值

> ID：10280994
> 
> 赞同：13
> 
> 时间：2012-04-23T12:57:07.680
> 
> 标签：c#, string, compare

我想比较两个字符串值​​​，像这样：

```
if (lblCapacity.Text <= lblSizeFile.Text) 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-23T13:10:37.030

我假设您正在按[字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)比较字符串，在这种情况下，您可以使用静态方法 String.Compare。

例如，您有两个字符串 str1 和 str2，并且您想查看 str1 在字母表中是否位于 str2 之前。您的代码如下所示：

```
string str1 = "A string";
string str2 = "Some other string";
if(String.Compare(str1,str2) < 0)
{
   // str1 is less than str2
   Console.WriteLine("Yes");
}
else if(String.Compare(str1,str2) == 0)
{
   // str1 equals str2
   Console.WriteLine("Equals");
}
else
{
   // str11 is greater than str2, and String.Compare returned a value greater than 0
   Console.WriteLine("No");
} 
```

上面的代码将返回是。String.Compare 有许多重载版本，包括一些可以忽略大小写或使用格式字符串的版本。查看[String.Compare](https://msdn.microsoft.com/es-es/library/system.string.compare(v=vs.110).aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T13:01:19.413

```
int capacity;
int fileSize;

if (!int.TryParse(lblCapacity.Text, out capacity) //handle parsing problem;
if (!int.TryParse(lblSizeFile.Text, out fileSize) //handle parsing problem;

if (capacity <= fileSize) //... do something. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T13:00:38.493

如果您在文本框中有整数，那么，

```
int capacity;
int fileSize;

if(Int32.TryParse(lblCapacity.Text,out capacity) && 
   Int32.TryParse(lblSizeFile.Text,out fileSize))
{
    if(capacity<=fileSize)
    {
        //do something
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T13:00:27.573

Looks like the labels contain numbers. Then you could try [`Int32.Parse`](http://msdn.microsoft.com/en-us/library/b3h1hf19.aspx):

```
if (int.Parse(lblCapacity.Text) <= int.Parse(lblSizeFile.Text)) 
```

Of course you might want to add some error checking (look at [`Int32.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx) and maybe store the parsed int values in some variables, but this is the basic concept.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T13:03:01.777

比较是你需要的。

```
int c = string.Compare(a , b); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T13:00:12.573

使用`Int32.Parse`或`Int32.TryParse`其他等效项。然后，您可以对这些值进行数字比较。

# jquery - setInterval 内的 clearInterval，无法中断循环，使用 jquery 和 .post()

> ID：10280997
> 
> 赞同：1
> 
> 时间：2012-04-23T12:57:18.300
> 
> 标签：jquery, ajax, post, clearinterval

我正在尝试在 setInterval 函数中调用 clearInterval，该函数正在执行一些 ajax 获取，但没有任何运气。

```
var nre = setInterval('checkit()',5000);
$(function() {
    checkit = function(){
        $.post("check.php", { login: "<?php echo $_SESSION['login'];?>" }, function( data ) {
            if (data == 1) {
                $('#debug').html(data);
                window.clearInterval(nre);
            }

        });
    }
}); 
```

关键是，尽管收到了积极的数据，但循环不会中断。

我读过 setInterval 函数的异步操作可能是这里的问题。有没有更好的方法来解决它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T13:06:46.520

将所有内容移动到同一范围内，并且不要使用以下字符串形式`setInterval`：

```
$(function() {
    var nre = setInterval(checkit, 5000);
    function checkit() {
        $.post("check.php", { login: "..." }, function( data ) {
            if (data === 1) {
                $('#debug').html(data);
                clearInterval(nre);
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T13:06:55.390

checkit 在外部不可见，`document.ready`因此将`setInterval`调用移到`document.ready`.

如果您想将匿名函数分配给变量 checkit，则必须在分配变量后移动 setInterval 调用。

```
$(function() {
    var checkit = function(){
        $.post("check.php", { login: "<?php echo $_SESSION['login'];?>" }, function( data ) {
            if (data == 1) {
                $('#debug').html(data);
                window.clearInterval(nre);
            }

        });
    }
   var nre = setInterval(checkit,5000);
}); 
```

或者，如果你声明了函数，那么你可以`setInterval`在函数声明之前调用。

```
$(function() {
    var nre = setInterval(checkit, 5000);
    function checkit() {
        $.post("check.php", { login: "..." }, function( data ) {
            if (data == 1) {
                $('#debug').html(data);
                clearInterval(nre);
            }
        });
    }
}); 
```