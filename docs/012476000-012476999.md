# StackOverflow 问答 12476000-12476999

# asp.net - 无法加载文件或程序集“mydllfile.dll”或其依赖项之一。该模块应包含程序集清单

> ID：12476000
> 
> 赞同：3
> 
> 时间：2012-09-18T11:20:47.613
> 
> 标签：asp.net, .net, deployment, assemblies, publish

每当我在 bin 文件夹中的应用程序中添加新的 dll 并访问该 dll 时，它都会给我以下错误：

> 无法加载文件或程序集“~\bin\mydll.dll”或其依赖项之一。该模块应包含程序集清单。

是什么导致了这个问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:54:26.357

You can use Dependency Walker Tool - it shows you what library in dependency is missing.

If the missing library is MFC or any Visual C++ runtime, then install theMicrosoft redistributable package (it should be from the same Visual Studio on which you're building the DLL).

Also, you can set the static linking to MFC or VC++ Runtime Libraries. In that case, you will not need to put Visual C++ runtime into the setup

> This configure in project settings C/C++ -> Code Generation node - use MT for Release and MTd for Debug

MFC runtime is configured on General project tab.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:31:09.200

您使用的 .dll 是否包含本机代码？如果是这样，这个答案可能会有所帮助[https://stackoverflow.com/a/11343920/771034](https://stackoverflow.com/a/11343920/771034)

# python - 谷歌应用引擎、webapp2、DomainRoute 和惰性处理程序

> ID：12476001
> 
> 赞同：1
> 
> 时间：2012-09-18T11:20:59.860
> 
> 标签：python, google-app-engine, webapp2

我试图在我的主 GAE 应用程序中支持或多或少隔离的应用程序，托管在不同的子域中。

我将此子域的处理程序放在“oficina”文件夹内的文件“mediciones.py”中。

所以我有：

1.  /main.py
2.  /oficina/mediciones.py
3.  在mediciones.py里面：

```
class Router(webapp2.RequestHandler):
    def get(self):
      [... code ...]

class Listado(webapp.RequestHandler):
    def get(self):
      [... code ...] 
```

等所有必要的处理程序。

在“main.py”中：

```
application = webapp2.WSGIApplication([
    DomainRoute('ventas.domain.com',
        [webapp2.Route(r'/nueva', handler='oficina.mediciones.MedicionNueva', name="nueva-medicion"),
         webapp2.Route(r'/listado', handler="oficina.mediciones.Listado", name="listado-mediciones"),
         webapp2.Route(r'/medicion/(\d+)/', handler="oficina.mediciones.MedicionDetalles", name="detalles-mediciones"),
         webapp2.Route(r'/rellenar_medicion/(\d+)/', handler="oficina.mediciones.MedicionRellenar", name="rellenar-medicion"),
         webapp2.Route(r'/editar_medicion/(\d+)/', handler="oficina.mediciones.MedicionEditar", name="editar-medicion"),
         webapp2.Route('/', handler="oficina.mediciones.Router")
        ]),
('/(.+)',
     DirectView),
    ('/?',
        HomeView),
    ], debug=True) 
```

但是当我尝试访问ventas.domain.com 或ventas.domain.com/listado 时，我得到了以下信息：

```
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1272, in default_dispatcher
    self.handlers[handler] = handler = import_string(handler)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1851, in import_string
    return getattr(__import__(module, None, None, [obj]), obj)
ImportStringError: import_string() failed for 'oficina.mediciones.Router'. Possible reasons are:

- missing __init__.py in a package;
- package or module path not included in sys.path;
- duplicated package or module name taking precedence in sys.path;
- missing module, class, function or variable;

Original exception:

AttributeError: 'module' object has no attribute 'Router'

Debugged import:

- 'oficina' found in '/base/data/home/apps/s~pavimentos-arquiservi-web-hrd/11-0-0.361841284178483516/oficina/__init__.pyc'.
- 'oficina.mediciones' found in '/base/data/home/apps/s~pavimentos-arquiservi-web-hrd/11-0-0.361841284178483516/oficina/mediciones/__init__.pyc'.
- 'oficina.mediciones.Router' not found. 
```

（将“Router”替换为“Listado”，或每种情况的适当处理程序）。

处理程序已定义，但为什么没有找到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:50:07.490

如果应用程序确实是自包含的，您可能会考虑使用不同的方法将处理程序拆分到单独的模块中。在您的`app.yaml`中，您可以定义不同的 url 前缀并由不同的模块处理。

例如

```
- url: /oficina/.*
  script: ofinina.mediciones.py

- url: /.*
  script: main.py 
```

不幸的是，您不能简单地通过域名来分隔这些路由，因此，根据您的要求，这可能不是您的选择。

作为替代方案，您可以将所需的包导入 main.py 并直接使用类名，而不是为您的处理程序使用字符串名称。这会减少包裹的自我封闭性。但是话又说回来，通过字符串文字引用类名也是如此。

# sql - 查询匹配所有的 IN

> ID：12476005
> 
> 赞同：1
> 
> 时间：2012-09-18T11:21:21.263
> 
> 标签：sql, database

我有两张桌子

```
Report
----------
report_id
name

Template
------------
template_id
report_id 
```

一份报告可以有许多模板。如何查询以获取具有与项目列表匹配的模板的报告

例如，如果模板有这些行

```
Template_ID  | Report_ID
---------------------------
a              1
b              1
c              2
d              3 
```

选择报告时，我需要确保我的表中的所有模板都在过滤器标准中，如果过滤器标准中有其他项目不在数据库中，则无关紧要。

**例子**

查找 Template 的所有报告 `a,b,c`。这将返回报告 1，因为`a,b`它是 的子集`a,b,c`，报告 2 因为它是`c`的子集 `a,b,c`

查找模板的所有报告`a` - 这将没有行。因为没有只有 ONLY 作为`a`模板的报告

查找模板的所有报告`c` - 这只会返回报告 2。

查找模板的所有报告`c,d` - 这只会返回报告 2和3`c`作为.`c,d``d``c,d`

查找模板的所有报告`d,e` - 这只会返回报告 3，因为`d`它是`c,e`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:00:01.443

这是一个[SQLFiddle 演示](http://sqlfiddle.com/#!2/6f9d6/5)

```
select distinct Report_id 
   from Template T
   where Template_id in ('d','e')
   and NOT EXISTS 
      (select T1.Report_id 
        from Template T1
        where Template_id not in ('d','e')
        and T.Report_id=T1.Report_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:51:15.540

在您的集合中找到所有带有模板的报告；从中减去模板不在您集中的所有报告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T11:55:12.700

此查询返回`2`，我认为从描述中是正确的：

```
SELECT DISTINCT t1.report_id
  FROM template t1
  LEFT JOIN (
    SELECT *
      FROM template
      WHERE template_id NOT IN ('b', 'c')
  ) t2 ON t1.report_id = t2.report_id
  WHERE t1.template_id IN ('b', 'c')
    AND t2.template_id IS NULL 
```

**编辑**：这基本上是斯科特的答案，但我没有看到。对不起。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T12:01:16.040

这是一种不同的方法。我喜欢这样，因为您不需要复制模板列表：

```
SELECT t1.report_id
  FROM (
    SELECT report_id, COUNT(*) AS report_count
      FROM template
      GROUP BY report_id
  ) t1
  INNER JOIN (
    SELECT report_id, COUNT(*) AS report_count
      FROM template
      WHERE template_id IN ('b', 'c')
      GROUP BY report_id
  ) t2 ON t1.report_id = t2.report_id
  WHERE t1.report_count = t2.report_count 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T11:56:01.467

```
select distinct report_id from template where template_id in (<list>)
minus
select distinct report_id from template where template_id not in (<list>) 
```

# jquery - 使用 jquery 插件将变量发送到 JSON

> ID：12476007
> 
> 赞同：0
> 
> 时间：2012-09-18T11:21:35.100
> 
> 标签：jquery, json

我正在使用这个[网站上](http://www.vissit.com/projects/eventCalendar/)的 JQuery eventcalendar 插件。

有谁知道我如何将变量发送到 JSON，以便过滤输出的数据。我可以在链接中发送它还是需要使用 AJAX？任何指针将不胜感激。提前致谢。

```
<div id="cal"></div>

$("#cal").eventCalendar({
  // link to events json
  eventsjson: 'file.php' 
}); 
```

**文件.php**

```
<?php
header('Content-type: text/json');

$var = $_GET["var"];

$sqldata = mysql_query('
SELECT
UNIX_TIMESTAMP(start_date) AS date,
employee AS title, 
days AS description,
UNIX_TIMESTAMP(end_date) AS url
FROM requests WHERE approved = 1
');

$posts = array();

while($row = mysql_fetch_assoc($sqldata))
{
    $row['date'] = $row['date'].'000';
    $row['url'] = $row['url'].'000';
    $row['description'] = $row['description'].' Days';
    $posts[] = $row;
}
mysql_free_result($sqldata);
die(json_encode($posts));

?>

function getEvents(limit, year, month, day, direction) {
    var limit = limit || 0;
    var year = year || '';
    var day = day || '';

    // to avoid problem with january (month = 0)

    if (typeof month != 'undefined') {
        var month = month;
    } else {
        var month = '';
    }

    //var month = month || '';
    flags.wrap.find('.eventsCalendar-loading').fadeIn();

    if (eventsOpts.jsonData) {
        // user send a json in the plugin params
        eventsOpts.cacheJson = true;

        flags.eventsJson = eventsOpts.jsonData;
        getEventsData(flags.eventsJson, limit, year, month, day, direction);

    } else if (!eventsOpts.cacheJson || !direction) {
        // first load: load json and save it to future filters
        $.getJSON(eventsOpts.eventsjson + "?limit="+limit+"&year="+year+"&month="+month+"&day="+day, function(data) {
            flags.eventsJson = data; // save data to future filters
            getEventsData(flags.eventsJson, limit, year, month, day, direction);
        }).error(function() { 
            showError("error getting json: ");
        });
    } else {
        // filter previus saved json
        getEventsData(flags.eventsJson, limit, year, month, day, direction);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:40:45.283

这个插件的代码有：

```
$.getJSON(eventsOpts.eventsjson + "?limit="+limit+"&year="+year+"&month="+month+"&day="+day, function(data)... 
```

这意味着如果您向链接添加参数，它将无法正常工作......

您需要稍微更改插件代码以测试参数是否存在，然后才添加内部参数，例如：

```
var URL = eventsOpts.eventsjson;
URL += (eventsOpts.eventsjson.indexOf('?') < 0) ? '?' : '&';
URL += "limit="+limit+"&year="+year+"&month="+month+"&day="+day;
$.getJSON(URL, function(data)... 
```

# django - Django Nginx 子域管理员重定向错误

> ID：12476008
> 
> 赞同：1
> 
> 时间：2012-09-18T11:21:42.123
> 
> 标签：django, nginx, django-admin

我有 Django 1.4 配置了 Nginx 代理和远程身份验证后端。

代理配置为将 django 应用程序作为子域提供服务，将身份验证服务器作为子域提供服务，因此我们有：

```
djangoapp.domain.com
auth.domain.com 
```

第一次访问 djangoapp 时，它会重定向到 auth 域进行身份验证，然后返回 djangoapp 域。这部分适用于为子域设置的 nginx 代理标头

```
server {
    listen 443;
    ssl on;
    server name djangoapp.domain.com;

    location / {
       proxy_pass http://djangoapp
       proxy_set_header Host $host;
    }
} 
```

使用 proxy_set_header 主机 $host; 设置身份验证有效，删除它会破坏身份验证。我曾看到其他解决方案建议将此作为修复 django 的解决方法，但在这种情况下这不起作用。

问题主要在于管理界面。如果您尝试访问管理站点，django 会尝试重定向到无效的 url。例如手动输入网址：

```
https://djangoapp.domain.com/admin 
```

重定向到

```
https://djangoapp.domain.com/.domain.com/admin 
```

我试图理解为什么 django 试图重定向部分 url 而不是使用相对 url？

我已经尝试禁用 django 中的通用中间件来停止奇怪的重定向，但是通过禁用它，django 管理员不再自动进行身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:29:49.963

这是由设置文件中设置的 url 重写引起的常见问题[。](https://docs.djangoproject.com/en/dev/howto/deployment/fastcgi/#forcing-the-url-prefix-to-a-particular-value)`FORCE_SCRIPT_NAME = ''`

# visual-studio-2010 - 智能装配 - 应用构建时间混淆

> ID：12476014
> 
> 赞同：0
> 
> 时间：2012-09-18T11:22:08.313
> 
> 标签：visual-studio-2010, .net-2.0, redgate, smartassembly

我正在编写应用程序，它快结束了，我想使用智能汇编对我的代码应用混淆，如果可能的话也签名......

问题是我的应用程序是多部分的，更重要的是它的一部分是基于服务的，它应该使用 MSI 安装项目安装才能工作，我不能先构建，然后打包它，所以我需要做一个构建时间混淆的东西，所以所有的类库项目，以及服务和用户界面都在构建时执行混淆，一旦它们准备好，MSI可以打包它们......它应该的方式，所以每个人都会很开心......

我听说有允许智能组装在构建时执行此操作的配置，但我不知道该怎么做：-s

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:27:55.143

从技术上讲，必须在 SmartAssembly 处理它之前构建程序集——它与中间语言代码一起使用，因此在编译之后才能处理。

但是，我不认为这是一个问题 - 最终您只希望在构建输出被打包到 MSI 之前对其进行混淆。因此，如果您希望这自动发生，您可以编辑 vsproj 以包含 SmartAssembly 构建后步骤： [http ://www.red-gate.com/supportcenter/Content/SmartAssembly/help/6.7/SA_UsingSmartAssemblyWithMSBuild](http://www.red-gate.com/supportcenter/Content/SmartAssembly/help/6.7/SA_UsingSmartAssemblyWithMSBuild)

如果您使用 MS 设置和部署项目来构建 MSI，则需要进行的重要更改是将 SmartAssembly 输入和输出指向 /obj 文件夹，因为出于某种奇怪的原因，Microsoft 从 /obj 获取程序集，而不是更传统的 /bin。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T23:29:39.500

我找到了解决这个问题的方法，“Brian Donahue”在回答中说：

> 如果您使用 MS 安装和部署项目来构建 MSI，那么重要的更改是将您的 SmartAssembly 输入和输出指向 /obj 文件夹，因为出于某种奇怪的原因，Microsoft 正在从 /obj 中获取程序集，而不是更传统的 /bin

解决方案是您使用文本编辑器打开设置（**.vdproj**）文件 - 我使用 Notepad++ - 然后转到文件末尾，直到在此节点中找到一个名为“ **ProjectOutput** ”的节点，您将找到一个名为“ **SourcePath** ”在此属性中，您将找到项目输出的路径（**.exe**或**.dll**）

现在将此路径更改为指向“bin”目录而不是“obj”目录，并且不要忘记将“ **x86** ”或“ **x64** ”目录更改为“ **Release** ”或“ **Debug** ”目录。

# android - 在具有特定扩展名的 SD 卡上查找所有文件的最佳方法是什么？

> ID：12476018
> 
> 赞同：1
> 
> 时间：2012-09-18T11:22:17.920
> 
> 标签：android

在 SD 卡上查找具有定义的自定义扩展名的所有文件的最佳方法是什么？是否有任何过滤器或一些技术？

**编辑：**

在我的 SD 卡上查找所有 .txt 文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:45:53.290

使用标准 Java 文件 I/O 遍历必要的目录并找到感兴趣的文件，例如从[http://exampledepot.com/egs/java.io/TraverseTree.html派生的这个片段](http://exampledepot.com/egs/java.io/TraverseTree.html)

```
public static void visitAllFiles(File dir) {
    if (dir.isDirectory()) {
        String[] children = dir.list();
        for (int i=0; i<children.length; i++) {
            visitAllFiles(new File(dir, children[i]));
        }
    } else {
        // do something with your file
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:27:53.930

一起使用 MediaStore 和 FileFilter。

# c# - 如果有 2 个具有相同签名的方法会发生什么。一种本机和第二种扩展方法？

> ID：12476020
> 
> 赞同：2
> 
> 时间：2012-09-18T11:22:34.210
> 
> 标签：c#, .net, extension-methods

如果我创建一个与本机方法具有相同签名的扩展方法 (EM)，会发生什么。

**我的场景**
我创建了一个扩展方法

```
public static class EM
{
    public static void ForEach<T>(this List<T> enu, Action<T> action)
    {            
        foreach (T item in enu)
            action(item);
    }
} 
```

现在由于 List 也有一个具有相同签名的函数

```
public void ForEach(Action<T> action); 
```

所以对于列表我做了

```
List<Label> re = new List<Label>();
re.ForEach(x => Foo(x)); 
```

这会编译并运行，但它不会调用我的 EM，而是调用它的本机方法。我相信它不会显示有 2 个重载，因为对于重载，signtaure 必须有一些变化

![在此处输入图像描述](../Images/9ea2cb3315eeb7873097d2cd698d1927.png)

**查询**
Q1。为什么会这样？
Q2。如果有更多参数，那么我可以更改参数顺序并调用它。但是我如何让他用相同数量的参数调用我的 EM（这是对我的问题的一个非常简单的解释。我的 EM 可能是一个复杂的问题）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T11:37:18.353

C# 将始终调用类上的方法，而不是调用扩展方法。我建议在方法的名称中添加一些东西来区分它。我个人最后使用Ex，因为它很短并且提醒我它是一种扩展方法。

```
public static class EM
{
    public static void ForEachEx<T>(this List<T> enu, Action<T> action)
    {            
        foreach (T item in enu)
            action(item);
    }
} 
```

# delphi - 我可以对从 Delphi 2010 中的 wsdl 导入类派生的类实施更改跟踪吗？

> ID：12476023
> 
> 赞同：4
> 
> 时间：2012-09-18T11:22:39.240
> 
> 标签：delphi, oop, design-patterns, delphi-2010

有没有办法在派生类中实现更改跟踪而不覆盖基类的 getter 和 setter？
我有一个基于实体框架的多层项目正在开发中，数据访问和业务逻辑最终转移到基于 C# 的服务器应用程序。（数据访问已经迁移）客户端在 Delphi 2010 中。
我使用数据传输对象在客户端和服务器之间传递信息，但是有必要从 Delphi 实现我自己的更改跟踪。我最初是通过从 wsdl 中的 Dtos 继承并“覆盖”getter 和 setter 来实现的。wsdl 导入中的基类（对此没有真正的控制）：

```
// ************************************************************************ //
  // XML       : DtoCONTAINER_JNL, global, <complexType>
  // Namespace : http://k3scs.com/WCF
  // ************************************************************************ //
  DtoCONTAINER_JNL = class(DtoBase)
  private
    FJNL_ID: Integer;
    FJNL_TYPE_ID: Integer;
    FJNL_DATE: TXSDateTime;
 published
    property JNL_ID:      Integer      read FJNL_ID write FJNL_ID;
    property JNL_TYPE_ID: Integer      read FJNL_TYPE_ID write FJNL_TYPE_ID;
    property JNL_DATE:    TXSDateTime  read FJNL_DATE write FJNL_DATE; 
```

派生类：

```
 TDtoCONTAINER_JNL = class(DtoCONTAINER_JNL, IDto)
  private
    FName             : string;
    FReferenceCounted : boolean;
    _isNew            : boolean;
    FModified         : boolean;
    FJNL_ID           : integer;
    FJNL_TYPE_ID      : integer;
    FJNL_DATE         : TDateTime;
  public
    property JNL_ID : integer read FJNL_ID write SetJNL_ID;
    property JNL_TYPE_ID : integer read FJNL_TYPE_ID write SetJNL_TYPE_ID;
    property JNL_DATE : TDateTime read GetJNL_DATE write SetJNL_DATE; 
```

典型的setter方法：

```
procedure TDtoCONTAINER_JNL.SetJNL_DATE(const value : TDateTime);
begin
  ChangedProperties:= DtoGenerics.ChangeTracker('JNL_DATE', value, inherited JNL_DATE, self.IsLoaded, ChangedProperties);
  inherited JNL_DATE := DtoGenerics.GetXsDate(value);
end; 
```

典型的getter方法：

```
function TDtoCONTAINER_JNL.GetJNL_DATE : TDateTime;
begin
  Result := DtoGenerics.GetDate(inherited JNL_DATE);
end; 
```

每当设置属性时，更改跟踪器都会将此属性名称添加到更改的属性列表中以返回给服务器。这允许更新语句具有针对性和效率。问题是每个 getter/setter 实际上使派生类与基类不兼容，也就是说，多态性被破坏，并且转换不再按预期工作。
上面的类是根据相应的数据库表/实体从 C# 中的 t4 模板生成的，因此更改 100 多个类应该不是问题。
有人对这个有经验么？
任何建议将不胜感激。

**编辑**

Wsdl 导入器主要由常量组成，这些常量使用字符串格式或类似的东西来创建复杂类型的 Delphi 等价物。我进行了以下更改，使用类似的常量名称来轻松识别我的更改，以及将它们放置在与预先存在的代码相关的位置。理想情况下，我会完全摆脱继承，只在 wsdl 中使用我的类的修改版本，因为即使我将修改后的 Tdto 转换回 Dto 类，我仍然无法提交它，因为 Web 服务会使用消息拒绝它就像“期待 DtoObject，但得到了 undtoUnit.TdtoObject”。因此，我使用继承来处理 ArrayOfObjects 到 TList 之间的转换，反之亦然。据我所知，以下是更改：

```
// In WSDLImpConst
// I changed sRemoteClassDeclPas constant value of 'private' to 'proctected'
// Then I added these after SUnitInit
sTrackerDec   =     sTrackerProcPrefix+ sTrackerProcArgs                  + sLineBreak;
sTrackerProc  =      sTrackerDec + 'begin'                                + sLineBreak +
        '  Result:= nProps;'                                              + sLineBreak +
        '  if (_loaded) and (oVal <> pVal) then'    + sLineBreak +
        '  begin '                                                        + sLineBreak +
        '    Result := TrackChange(pName, nProps);'                       + sLineBreak +
        '  end;'                                                          + sLineBreak +
        'end;'                                                            + sLineBreak ;

sTracker2Dec  =       sTrackerProcPrefix+ sTracker2ProcArgs               + sLineBreak;
sTracker2Proc  =      sTracker2Dec + 'begin'                              + sLineBreak +
        '  Result:= nProps;'                                              + sLineBreak +
        '  if (_loaded) and (oVal <> DateTimeToXSDateTime(pVal)) then'    + sLineBreak +
        '  begin '                                                        + sLineBreak +
        '    Result := TrackChange(pName, nProps);'                       + sLineBreak +
        '  end;'                                                          + sLineBreak +
        'end;'                                                            + sLineBreak ;

sTracker3Dec  =       sTrackerProcPrefix+ sTracker3ProcArgs               + sLineBreak;
sTracker3Proc  =      sTracker3Dec + 'begin'                              + sLineBreak +
        '  Result:= nProps;'                                              + sLineBreak +
        '    if nProps = '''' then'                                       + sLineBreak +
        '      nProps := pName'                                           + sLineBreak +
        '    else'                                                        + sLineBreak +
        '      nProps := pName + '','' + nProps;'                         + sLineBreak +
        '  Result:= nProps;'                                              + sLineBreak +
        'end;'                                                            + sLineBreak ;
sTracker4Dec  =       sTrackerProcPrefix+ sTracker4ProcArgs               + sLineBreak;
sTracker4Proc  =      sTracker4Dec + 'begin'                              + sLineBreak +
        '  Result:= nProps;'                                              + sLineBreak +
        '  if (_loaded) and (oVal <> pVal) then'                          + sLineBreak +
        '  begin '                                                        + sLineBreak +
        '    Result := TrackChange(pName, nProps);'                       + sLineBreak +
        '  end;'                                                          + sLineBreak +
        'end;'

//Added my own setters:
sRemoteClassSetterImplPas = 'procedure %0:s.Set%1:s(const A%2:s: %2:s);'  + sLineBreak +
              'begin'                                                     + sLineBreak +
              '  F%1:s := A%2:s;'                                         + sLineBreak +
              'end;'                                                      + sLineBreak;

sRemoteClassSetterImplPas2= 'procedure %0:s.Set%1:s(const A%2:s: %2:s);'  + sLineBreak +
              'begin'                                                     + sLineBreak +
              '  F%1:s := A%2:s;'                                         + sLineBreak +
              '  F%1:s_Specified := True;'                                + sLineBreak +
              'end;'                                                      + sLineBreak;

sRemoteClassSetterImplPas3 = 'procedure %0:s.Set%1:s(const A%2:s: %2:s);' + sLineBreak +
              'begin'                                                     + sLineBreak +
              '  ChangedProperties:= TrackChange(''%1:s'', A%2:s, F%1:s, self.IsLoaded, ChangedProperties);' + sLineBreak +
              '  F%1:s := A%2:s;'                             + sLineBreak +
              'end;'                                          + sLineBreak;

sRemoteClassSetterImplPas4 = 'procedure %0:s.Set%1:s(const A%2:s: %2:s);'    + sLineBreak +
              'begin'                                         + sLineBreak +
              '  ChangedProperties:= TrackChange(A%2:s, F%1:s, ''%1:s'', self.IsLoaded, ChangedProperties);' + sLineBreak +
              '  F%1:s := A%2:s;'                             + sLineBreak +
              'end;'                                          + sLineBreak;
// And for indexed properties
sRemoteClassSetterImplPasIdx2=
              'procedure %0:s.Set%1:s(Index: Integer; const A%2:s: %2:s);'    + sLineBreak +
              'begin'                                         + sLineBreak +
              '  F%1:s := A%2:s;'                             + sLineBreak +
              '  F%1:s_Specified := True;'                    + sLineBreak +
              'end;'                                          + sLineBreak;

sRemoteClassSetterImplPasIdx3 =
              'procedure %0:s.Set%1:s(Index: Integer; const A%2:s: %2:s);'    + sLineBreak +
              'begin'                                         + sLineBreak +
              '  ChangedProperties:= TrackChange(''%1:s'', A%2:s, F%1:s, self.IsLoaded, ChangedProperties);' + sLineBreak +
              '  F%1:s := A%2:s;'                             + sLineBreak +
              'end;'                                          + sLineBreak;

sRemoteClassSetterImplPasIdx4 =
              'procedure %0:s.Set%1:s(Index: Integer; const A%2:s: %2:s);'    + sLineBreak +
              'begin'                                         + sLineBreak +
              '  ChangedProperties:= TrackChange(A%2:s, F%1:s, ''%1:s'', self.IsLoaded, ChangedProperties);' + sLineBreak +
              '  F%1:s := A%2:s;'                             + sLineBreak +
              'end;'                                          + sLineBreak;

// Added these before the SImplDecl constant:
sIntfFactoryDecl   = '_di_%0:s Get%0:s(bool useWSDL=false, AnsiString addr="", THTTPRIO* HTTPRIO=0);' + sLineBreak + sLineBreak;
sTrackerProcPrefix =  'function TrackChange';
sTrackerProcArgs =  '(const pName: string; pVal, oVal: variant; _loaded: boolean; nProps: string): string; overload';
sTracker2ProcArgs = '(const pName: string; pVal: TDateTime; oVal: txsdateTime; _loaded:boolean; nProps: string): string; overload;';
sTracker3ProcArgs = '(const pName: string; nProps: string): string; overload;';
sTracker4ProcArgs = '(pVal, oVal: TByteDynArray; const pName: string; _loaded: boolean; nProps: string): string; overload';
sIntfTrackDecl   = sTrackerProcPrefix + sTrackerProcArgs+ sLineBreak;
sIntfTrack2Decl   = sTrackerProcPrefix + sTracker2ProcArgs+ sLineBreak;
sIntfTrack3Decl   = sTrackerProcPrefix + sTracker3ProcArgs+ sLineBreak;
sIntfTrack4Decl   = sTrackerProcPrefix + sTracker4ProcArgs+ sLineBreak;

// Then in WSDLPasWriter I added my new constant arrays:

SetterImpl2:array[Boolean] of string = (sRemoteClassSetterImplPas2, sRemoteClassSetterImplPasIdx2);
SetterImpl3:array[Boolean] of string = (sRemoteClassSetterImplPas3, sRemoteClassSetterImplPasIdx3);
SetterImpl4:array[Boolean] of string = (sRemoteClassSetterImplPas4, sRemoteClassSetterImplPasIdx4);

// then modified the setter section in 'WriteComplexTypeClass'
{ Setter }
if UseSetGets or GenSpecifiedSupport(Member) then
begin
if GenSpecifiedSupport(Member) then
begin
  WriteFmt(SetterImpl2[HasIndexDecl(Member)],[WSDLType.LangName,
                                        Member.LangName,
                                        Member.DataType.LangName])
end
else
begin
  if (ContainsStr(BaseName, 'Dto')) and (not ContainsStr(Member.DataType.LangName, 'XS'))
  and (not ContainsStr(Member.DataType.LangName, 'ArrayOf')) then
    if (ContainsStr(Member.DataType.LangName, 'TByteDynArray')) then
      WriteFmt(SetterImpl4[HasIndexDecl(Member)],[WSDLType.LangName,
                                              Member.LangName,
                                              Member.DataType.LangName])
    else
      WriteFmt(SetterImpl3[HasIndexDecl(Member)],[WSDLType.LangName,
                                              Member.LangName,
                                              Member.DataType.LangName])

  else
    WriteFmt(SetterImpl1[HasIndexDecl(Member)],[WSDLType.LangName,
                                            Member.LangName,
                                            Member.DataType.LangName]);

end;

// at WriteInterfaceEnd I added

WriteFmt(sIntfTrackDecl, []);
WriteFmt(sIntfTrack2Decl, []);
WriteFmt(sIntfTrack3Decl, []);
WriteFmt(sIntfTrack4Decl, []);

// at WriteInterfaceBegin I added
WriteLn(sTrackerProc, []);
WriteLn(sTracker2Proc, []);
WriteLn(sTracker3Proc, []);
WriteLn(sTracker4Proc, []);
// finally I changed the wsdlImp dpr and replaced 'AnsiString' (or 'widestring' I can't remember) with 'string' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:25:09.367

如果我没记错的话，WSDL 到 Delphi 转换器源代码是 Delphi 企业和更高版本的一部分（它`WSDLImp.dpr`在`wsdlimporter`目录中调用）。

我会对其进行调整以直接生成您自己的类。

# android - 如何使用计步器计算步数

> ID：12476024
> 
> 赞同：9
> 
> 时间：2012-09-18T11:22:44.370
> 
> 标签：android

我开发了通过步行计算卡路里消耗的应用程序，因为我使用 SensorEventListener **(ACCELEROMETER)** 我从 X、Y、Z 中得到三个值。我的问题是如何使用这三个 X、Y、Z 计算脚步。这是我获取 X、Y、Z 值的代码。我也使用 GPS。但**我需要在 Android** guyzz PLZ 中使用计步器来计算步数，请帮助我。

```
package com.mxicoders.prashant;

import android.app.ActivityGroup;
import android.content.Intent;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Chronometer;
import android.widget.ImageButton;
import android.widget.TextView;
import android.widget.Toast;

public class MyWorkout extends ActivityGroup implements SensorEventListener {

    ImageButton btnfacebook, btnstartwalk, btnstopwalk;
    Chronometer mchoronometer;
    Intent getintent;
    String _getname, _getage, _gethight, _getwidth;
    TextView txtx, txty, txtz;
    private SensorManager sensorManager;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_workout);

        txtx = (TextView) findViewById(R.id.txtview_steps_myworkout);
        txty = (TextView) findViewById(R.id.txtview_distance_myworkout);
        txtz = (TextView) findViewById(R.id.txtview_calary_myworkout);
        btnfacebook = (ImageButton) findViewById(R.id.imgview_facebook_myworkout);

        btnfacebook.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent inn = new Intent(getParent(), MyworkoutFacbook.class);
                WorkoutTabGroupActivity parantActivity = (WorkoutTabGroupActivity) getParent();
                parantActivity.startChildActivity("MyworkoutFacbook", inn);

            }
        });
        btnstartwalk = (ImageButton) findViewById(R.id.imgbtn_start_myworkout);
        btnstartwalk.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);

                sensorManager.registerListener(MyWorkout.this, sensorManager
                        .getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                        SensorManager.SENSOR_DELAY_NORMAL);
                Toast.makeText(getApplicationContext(), "Start",
                        Toast.LENGTH_LONG).show();

            }
        });

        btnstopwalk = (ImageButton) findViewById(R.id.imgbtn_stop_myworkout);
        btnstopwalk.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

            }
        });

    }

    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // TODO Auto-generated method stub

    }

    public void onSensorChanged(SensorEvent event) {
        // TODO Auto-generated method stub
        if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
            float x = event.values[0];
            float y = event.values[1];
            float z = event.values[2];
            txtx.setText("X: " + x);
            txty.setText("X: " + y);
            txtz.setText("X: " + z);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T13:21:29.160

我的建议是你应该跟踪全局 Z 轴的变化（你的身体向上/向下运动）。您无法保证用户将手机保持在特定方向，因此您将不得不依靠试验。此外，您可能需要监控移动速度（例如，以免将汽车移动转化为脚步）。

我会做的是：

1- 在手机上创建一个文本文件，并在我走路时记录 X、Y 和 Z 的值（除了 GPS 速度），手机处于不同的方向（在我的口袋里，在腰包里，...... ETC）。另外，跟踪我执行的步骤数。

2- 根据第一步中的数据，形成一个公式，将该数据转换为步数。

# ruby-on-rails - 在资源中显式声明控制器时如何避免命名空间

> ID：12476025
> 
> 赞同：0
> 
> 时间：2012-09-18T11:22:48.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我想：

```
url: /admin/site/items/:item_id/assets/index(.:format) 
controller: admin/assets#index 
```

如果我以简单的方式声明路线：

```
namespace :admin do
  namespace :site do
    resources :items do
      resources :assets
    end
  end
end 
```

我获得下一个路由/控制器连接：

```
url: /admin/site/items/:item_id/assets/index(.:format)
controller: admin/site/assets#index 
```

如果我尝试明确地`controller`这样说明：

```
namespace :admin do
  namespace :site do
    resources :items do
      resources :assets, :controller => "admin/assets"
    end
  end
end 
```

然后我得到这个：

```
url: /admin/site/items/:item_id/assets/index(.:format) 
controller: admin/site/admin/assets#index 
```

我也尝试`/`像这样在控制器的路由中添加一个首字母

```
resources :assets, :controller => "/admin/assets" 
```

但更糟糕的是：

```
url: /admin/site/items/:item_id/assets/index(.:format) 
controller: admin/site//admin/assets#index 
```

我想要这种行为，因为我有一个`AssetsController`负责在我的应用程序中操作`Assets`不同的。`Models`并且有几个命名空间，但我希望`AssetsController`保留在最低的一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:00:42.297

我认为嵌套资源声明不可能实现您想要的。这是另一个尝试的选择：

```
namespace :admin do
  namespace :site do
    resources :items
  end

  scope "/site/items/:item_id" do
    resources :assets, :as => "site_item_assets"
  end
end 
```

（参见[http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)或[http://api.rubyonrails.org/classes/ActionDispatch/Routing.html](http://api.rubyonrails.org/classes/ActionDispatch/Routing.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:32:54.417

我找到了一种解决方法，将路由分成两个块，一个用于主资源的路由，`items`另一个用于嵌套资源`assets`：

```
# routes for the main resource
namespace :admin do
  namespace :site do
    resources :items
  end
end

# routes for the nested resource
namespace :admin do
  resources :items, :only => [], :path => "/site/items"
    resources :assets
  end
end 
```

看看我如何通过`:only => []`以避免在第二个块中创建*默认路由。*

通过`:path`选项我获得的*url*看起来像我喜欢的。

这种方法的唯一问题是路由名称丢失了*站点*前缀：

```
admin_site_item_assets => admin_item_assets 
```

我曾尝试`:as => "site_items"`在资源中使用该选项，`items`但这会更改*url*本身：

```
/admin/site/items/:item_id/assets(.:format) => /admin/site/items/:site_item_id/assets(.:format) 
```

而且*url*对我来说比*路由名称*更重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T11:34:02.633

试试呢：

```
namespace :admin do
  scope :module => "site" do
    resources :items do
      resources :assets
    end
  end
end 
```

告诉我这对你有什么影响

# c++ - 使用模板函数映射枚举值

> ID：12476027
> 
> 赞同：0
> 
> 时间：2012-09-18T11:22:58.093
> 
> 标签：c++

假设我有 10 个模板化函数，例如：

```
command1<T>(const std::string&) 
command10<T>(const std::string&, int timeInSeconds) 
```

在我的代码中的某个时间点，我将确定我希望执行一个特定的命令。然后，我将请求有关与此命令关联的类型的信息（在运行时），这些信息通过枚举返回给我。所以我确定我希望执行`command2`并且枚举包含`STRING`. 因此，我想致电：

```
command2<std::string>(id, param1, param2); 
```

您会推荐什么作为进行此映射的好方法？

枚举可以包含 INT、BOOL；双精度或字符串。传递给特定命令的参数不依赖于枚举的值。

**例子：**

这是一个更好地解释的例子：

假设我的程序从命令行接收“command4 a”。我解析这个输入并确定我需要调用 command4。然后我查找与“a”关联的类型，在本例中为 get `INT`。我现在需要打电话`command4<int>("a");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:54:39.690

A `switch` statement will work here:

```
switch (type) {
    case INT: commmand4<int>(id); break;
    ...
} 
```

Depending on how you're actually calling the methods, templating on the arguments may be a good idea:

```
template<typename F, typename... Args> void call_function(Type type, Args... &&args) {
    switch (type) {
        case INT: return F::command<int>(std::forward(args)...);
        ...
    }
} 
```

Note that because you can't pass a function template to a function, you'll have to wrap up the function templates inside a class:

```
struct Command1 {
    template<typename T> static void command(const std::string&);
};
...

call_function<Command1>(INT, "a"); 
```

# android - 突出显示 TTS 引擎正在说话的当前单词

> ID：12476029
> 
> 赞同：10
> 
> 时间：2012-09-18T11:23:01.097
> 
> 标签：android, text-to-speech

我正在开发文本转语音应用程序，但遇到一个问题，我不知道 TTS 正在说的当前单词。有没有办法找到这个。？

例如：如果 TTS 说的是这个字符串：**可能已经有你答案的问题**，当它达到“已经”时，我如何突出显示“已经”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T16:28:24.760

我建议使用 TextToSpeech.speak() 的序列：

1.  *   开始说第一个词。
    *   突出显示第一个单词。
    *   检测到第一个单词的合成已经完成。
2.  *   开始说第二个词。
    *   突出显示第二个单词。
    *   检测到第二个单词的合成已经完成。
3.  *   等等 ...

现在它只剩下`How to detect that synthesizing of a word has finished?`用于`TextToSpeech.setOnUtteranceCompletedListener()`检测话语已完成。

您可以查看这些页面以了解更多详细信息：
[如何知道 TTS 何时完成？](https://stackoverflow.com/a/4659154/1043882)
[Android 中的 Text-To-Speech 简介](http://android-developers.blogspot.de/2009/09/introduction-to-text-to-speech-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T10:23:18.580

```
Put it in handler.Create two handler one for to add ;
tts1.speak("your text to speech", TextToSpeech.QUEUE_FLUSH, null);
  viewItem.setBackgroundColor(Color.RED);
view item means your textview....

and add another handler...
and make your view as transparent..
  viewItem.setBackgroundColor(Color.TRANSPARENT);

it's work for me perfectly.... 
```

# asp.net-mvc-3 - 查询字符串参数中的 MVC 操作方法和管道

> ID：12476033
> 
> 赞同：1
> 
> 时间：2012-09-18T11:23:11.650
> 
> 标签：asp.net-mvc-3, razor, query-string, actionmethod

我调用了一个 get 操作方法，其中包含传递给该方法的查询字符串参数列表。其中一些参数有一个管道'|' 在他们中。问题是我不能有带有管道字符的操作方法参数。如何将管道查询字符串参数映射到非管道 C# 参数？还是有其他我不知道的技巧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:27:04.207

您可以编写自定义模型绑定器。例如，假设您有以下请求：

```
/foo/bar?foos=foo1|foo2|foo3&bar=baz 
```

并且您想将此请求绑定到以下操作：

```
public ActionResult SomeAction(string[] foos, string bar)
{
    ...
} 
```

您所要做的就是编写一个自定义模型绑定器：

```
public class PipeSeparatedValuesModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var values = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        if (values == null)
        {
            return Enumerable.Empty<string>();
        }

        return values.AttemptedValue.Split('|');
    }
} 
```

接着：

```
public ActionResult SomeAction(
    [ModelBinder(typeof(PipeSeparatedValuesModelBinder))] string[] foos, 
    string bar
)
{
    ...
} 
```

# r - r - 如何清除 rJava 使用的内存？

> ID：12476044
> 
> 赞同：13
> 
> 时间：2012-09-18T11:23:47.990
> 
> 标签：r

我正在使用 xlsx 包创建工作簿、工作表，将数据写入工作表，然后保存工作簿。但是，当我多次重复这组操作时，我开始出现错误消息：

```
>Error in .jcheck(silent = FALSE) : 
  java.lang.OutOfMemoryError: GC overhead limit exceeded.jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod", cl, .jcast(if (inherits(o, "jobjRef") || inherits(o, "jarrayRef")) o else cl, "java/lang/Object"), .jnew("java/lang/String", method), j_p, j_pc, use.true.class = TRUE, evalString = simplify, evalArray = FALSE)<S4 object of class "jobjRef"

>Error in .jnew("java/io/FileOutputStream", file) : 
  Java Exception <no description because toString() failed>.jnew("java/io/FileOutputStream", file)<S4 object of class "jobjRef">

>Error in .jnew("org/apache/poi/xssf/usermodel/XSSFWorkbook") : 
  Java Exception <no description because toString() failed>.jnew("org/apache/poi/xssf/usermodel/XSSFWorkbook")<S4 object of class "jobjRef">

Error in .jcheck(silent = FALSE) : 
  Java Exception <no description because toString() failed>.jcall(wb, "Lorg/apache/poi/ss/usermodel/Sheet;", "createSheet", sheetName)<S4 object of class "jobjRef" 
```

我猜这是因为重复操作会消耗 Java 内存。

我的问题是，我怎样才能清除/重新初始化内存，以便我可以再次重复这些操作而不会出现内存不足错误？

r中是否有任何简单的代码可以实现这一点？

非常感谢您的建议！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-05T18:50:05.290

我不知道如何在 xlsx 上进行操作，实际上由于这些问题我不再使用它

我现在使用 XLConnect，它有一个命令

```
xlcFreeMemory() 
```

这样做

请注意，为了获得最佳效果，您需要在加载之前增加 Java 内存，如下所示

```
options( java.parameters = "-Xmx4g" )
library(XLConnect) 
```

祝你好运

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-10-09T05:32:45.920

捎带上面的答案，注意你不需要`XLConnect`完成`xlcFreeMemory`... 的效果，只需注意`xlcFreeMemory`实际做的是运行以下内容：

```
gc()
J("java.lang.Runtime")$getRuntime()$gc() 
```

也就是说，它`gc()`首先在您的 R 环境中运行，然后在现有 Java 实例的环境中运行。

# java - 如何制作 java GUI 输入助手

> ID：12476047
> 
> 赞同：-1
> 
> 时间：2012-09-18T11:23:56.297
> 
> 标签：java, user-interface

我想制作一个“弹出窗口”，可以帮助用户输入命令，我有一个 textField 供用户输入，让用户输入“disp” 我想在 textField 下方进行下拉，显示所有用户想要键入的可能单词，例如“显示”等。任何人都知道如何实现这一目标。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:33:37.610

这取决于您使用的是哪种 UI 框架。但一般规则是：

1.  创建你的文本框
2.  将事件处理程序挂钩到该文本框的 onkeydown
    1.  该处理程序应根据输入的文本搜索有效的建议
    2.  应该显示一个带有显示它们的列表框的弹出窗口

请记住：

*   这取决于使用的技术如何实现最后一点（Swing、SWT、AWT、GWT 等）
*   您显示的弹出窗口应该是相同的。它是：创建一次，然后仅使其可见并放置在正确的位置。

不管怎样：告诉我们你在用什么。

# stdstring - 将 std::string 转换为 QwtText

> ID：12476049
> 
> 赞同：0
> 
> 时间：2012-09-18T11:24:18.453
> 
> 标签：stdstring, qwt

有没有办法做到这一点？我正在尝试创建一个标签以对应于我使用 QwtPlotMarker 创建的标记。我的目标是显示一个标签，其中包含我的点击坐标 m_xPos 和 m_yPos，在以下示例中包含我到目前为止的代码：

```
QwtPlotMarker *testMarker = new QwtPlotMarker();
testMarker->setLineStyle(QwtPlotMarker::HLine);
testMarker->setLabelAlignment(Qt::AlignRight | Qt::AlignBottom);
testMarker->setLinePen(QPen(QColor(200,150,0), 0, Qt::DashDotLine));
testMarker->setSymbol( QwtSymbol(QwtSymbol::Diamond, QColor(Qt::yellow), QColor(Qt::green), QSize(7,7)));
testMarker->setXValue(m_xPos);
testMarker->setYValue(m_yPos);
testMarker->show();
testMarker->attach(d_graph->plotWidget());
testMarker->setLabel(....) 
```

m_xPos 和 m_yPos 是 std::string

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:51:21.170

Looking at the docs for QwtText, there's one constructor that takes a QString. Is this Qt's QString? If so, you can convert it like this:

```
wstring xPos2(m_xPos.begin(), m_xPos.end());
testMarker->setXValue(QString(xPos2.data(), xPos2.length()));

wstring yPos2(m_yPos.begin(), m_yPos.end());
testMarker->setYValue(QString(m_yPos.data(), m_yPos.length())); 
```

Note that this just converts bytes to Unicode characters by having the wstring constructor simply assign each char to a wchar_t. A more robust way would be actually performing an encoding conversion, with something like Windows's MultiByteToWideString.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:10:36.110

```
QwtPlotMarker *testMarker = new QwtPlotMarker();
testMarker->setLineStyle(QwtPlotMarker::HLine);
testMarker->setLabelAlignment(Qt::AlignRight | Qt::AlignBottom);
testMarker->setLinePen(QPen(QColor(200,150,0), 0, Qt::DashDotLine));
testMarker->setSymbol( QwtSymbol(QwtSymbol::Diamond, QColor(Qt::yellow), QColor(Qt::green), QSize(7,7)));
testMarker->setXValue(m_xPos);
testMarker->setYValue(m_yPos);
testMarker->show();
testMarker->attach(d_graph->plotWidget());

QwtText markerLabel = QString::fromStdString(+ m_xPos + ", " + m_yPos +);
testMarker->setLabel(markerLabel); 
```

是我需要做的。我已经想通了，谢谢。我没有看到使用 QString 的构造函数；我用它来获取连接的字符串，转换为 QString，然后我能够在绘图上显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T05:45:26.793

`QwtText`对象可以用`QString`对象构造，对象可以用 C 字符串构造。因此，以下应该有效：

```
std::string my_string("Hello, World!");
QwtText markerLabel(my_string.c_str()); 
```

# php - PHP 框架与否（Cake PHP）

> ID：12476057
> 
> 赞同：8
> 
> 时间：2012-09-18T11:24:45.583
> 
> 标签：php, mysql, wordpress, cakephp, pdo

在大学里，我最后一年的项目是一个基于 MVC 的 c# web 应用程序。

我的 PHP 不强，我希望提高我的 PHP 编程技能，并希望使用 PHP mysql 构建一个 Web 应用程序。

现在我为什么提到 ASP.NET MVC？？？好吧，因为我非常喜欢开发环境、编程的 OOP 特性以及“正确”编程的能力。我也喜欢 MVC 编程方法。

现在我的问题是.. 对于一个相对复杂的 web 应用程序，我应该使用像 Cake PHP 这样的框架吗？

我的特定 Web 应用程序将执行以下操作：报价引擎、XML、RSS 提要、用户帐户、购物篮、稍后的商店报价、查看以前的交易、在线商店管理等...

我要建立的网站每天可以收到多达 4000 次点击，并将集成到 wordpress 插件中。

与硬编码相比，使用框架有什么优势？学习一个框架不就像学习一门新的编程语言吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-18T17:51:20.187

最近我和 Cake 一起工作，并没有给我留下太深刻的印象。这不是你最好的选择。根据建议，您可以尝试 Yii 框架。它写得很好。关于 CakePHP 我认为我最近写的评论应该详细回答你所有的问题：

快速而短暂 - 这取决于！

和长答案...

如果您需要快速的 Web 开发过程，那么可以使用框架。

如果您需要快速执行的网站，并且您期望有大量数据库调用和复杂的关系数据库查询的大负载，那么答案是否定的！！！

很多人对不同的框架印象深刻，但实际上他们甚至不知道这些框架的代码是做什么的......并且为了证明我不只是点击键盘，因为我不喜欢某些框架，或者我只是一个框架仇恨者，我会给你一些关于表现不错的 CakePHP 的事实！:)

我喜欢测试和崩溃网络应用程序。通常这会让我很开心……这就是我的工作！这就是我喜欢它的原因！

关于我们蛋糕的烤箱的一些信息

我的个人环境：

本地网络服务器：四核第二代 i7-2730QM，16GB 1333MHz，7500rpm 硬盘没那么重要...，默认 Apache 2.2，PHP 5.3，MySQL 5，正确索引的数据库。

生产：专用刀片服务器 *可扩展云 - 顶级供应商。Nginx、PHP 5.3、MySQL 5、缓存服务器

*只有原始 PHP 的网站在毫秒或纳秒内加载。

仅供参考，我的 CakePHP 网站有 40 多个模型和非常复杂的关系。索引 MySQL 数据库表。在 Firefox 中使用最新的 Fiddler 2 作为基准工具。

我最近在使用 CakePHP 构建企业网站。我最近能够在我的所有环境中进行测试，仅从默认 CakePHP 安装的基本默认生成页面开始。我的本地 Web 服务器上的负载是 3.9 秒，生产 4.5 秒，这只是 Cake 安装后的默认页面？！

结果是在调整蛋糕之前（假设烘烤第一个蛋糕的人知道如何正确处理配料并假设应用程序运行速度很快！我对此表示怀疑。）！

大师调教：

以下是对我有用并经过测试的方法： 缓存：当前的 CakePHP 2.1 支持 File、ApcCache、WinCache、XCacheEngine、MemcacheEngine 和 RedisEngine。无论您选择哪一个，大约的速度增加都是从 100% 到 180%。（我们不使用 Cake 的缓存选项，我们运行我们自己的缓存服务器）在我们的例子中是 220%！将 Debug 设置为 0 - 运行 Cake 引擎需要生成 2 个缓存文件夹。第一个是 /tmp/cache/persistent - 这里有两个不同的文件，当你运行你的应用程序时，Cake 会使用它们。

减慢 Cake 生成速度的是 cake_core_file_map。该文件在您的应用程序中存储各种类。为了构建文件，Cake 会在目录树中进行逻辑且耗时的搜索，以寻找正确的文件。

第二个缓存文件夹是 /tmp/cache/models 这个文件夹将包含系统包含表模式的每个模型的所有文件。

Debug 为 0 时有什么区别？当 Debug 为 1 或更大时，缓存生命周期为 10 秒。当 Debug 设置为 0 时，缓存寿命为 999 天。烘烤蛋糕的大致速度增加是从 80% 到 100%。持久模型 - 打开“var $persistModel = true”将为控制器中包含的每个模型在 /tmp/cache/persistent 中生成两个新文件。一个是对象的缓存，另一个是 ClassRegistry 中模型的缓存。此缓存只能保存在文件系统上。大约。速度从 0% 增加到 200%。取决于您的应用程序和模型的数量。

其他提示和技巧：避免使用 $uses，因为会产生额外的循环并命中 ClassRegistry。这通常是错误的！默认情况下 cookie 是加密的，而 cypher crypt 方法非常慢。如果您不存储任何敏感数据，请关闭加密。性能提升 0% 到 15%。无论如何使用 GZIP 压缩（将压缩输出高达 90%）！如果您使用任何框架，请使用使用 PHP 5+ 构建的版本！！！关于 CakePHP 的文档比几年前提供的文档要好得多。使 CakePHP 变慢的主要原因是开发人员的代码使用不当。但是，如果您不真正了解 Cake 的工作原理，开发应用程序并不容易。

我一直在阅读很多评论说某些功能在 Cake 中不起作用。CakePHP 中的所有函数都按照他们的食谱中的说明工作，因此请仔细阅读。有些没有很好地解释或详细说明（这就是为什么它不适合初学者），但问一下也无妨！有时必须以正确的顺序使用某些功能才能工作，否则您的应用程序将崩溃或不会返回所需的结果。记住模型以及不同的类和函数是如何工作的！

似乎人们有时编写此代码也不知道他们在说什么。例如，使用 Cake 的数组排序功能而不是 MySQL 的排序功能从数据库中排序数组，只是因为它很酷？严重地？这是写在蛋糕的文档中的。

哦，说到数据库......我们正在使用带有 Cake 的 ADODB，这也让事情变得有点慢。但是 ADODB 讨论是针对另一篇文章的。只是另一个速度牺牲，但我们始终致力于跨平台兼容性！

整个 Cake 使用大量数组，生成并依赖于大量复杂模型。我发现的其他一些错误是在代码中使用比另一个更慢的函数和方法。但我很清楚，找到别人的错误比找到自己的错误更容易！

谈到时间开发，在使用 CakePHP 进行繁重的开发过程中，您可能会遇到一些不容易做到的事情，最终您可能会花费大量时间来寻找解决方法。

所以总的来说，如果我有一个我通常做的非常复杂的项目，并且我不能轻易找到或构建所需的功能来完成 Cake 中的复杂工作，或者浪费几天时间把我的头搞砸，那么我不知道是否烤蛋糕是值得的！调整 Cake 后，速度接近我们其他应用程序的速度。但是经过几天的负载测试，Web 应用程序似乎在支撑着，但仍然在几千名访问者的压力下弯曲。在通过 7.5K 独立访客后，我预计很快就会超载！

我会说 Cake 是为高级或中级开发人员准备的。如果我刚刚开始我的 Web 开发生涯，我不会使用 Cake。对于中小型项目，它很好或用于建立管理委员会（太棒了！）。对于具有严重流量负载的大型项目，除非您想在服务器上花费大量资金来支持您的应用程序，否则我不会使用任何框架，而只是使用原始 PHP（可能是 Smarty - 它是为性能而设计的）！请记住，硬件和软件会不断更新和升级，您的应用程序也依赖于此。想象一下基于框架的非常复杂的大型应用程序的迁移或调试 - 软件版本控制、硬件升级等......考虑风险因素和应用程序的实际支持！

对于大型项目，我会远离 Wordpress、Joomla、Drupal 等开源平台……构建可扩展且编写良好的应用程序的最佳方式是自己构建它！这样你就知道背后是什么了！记住！- 压缩、缓存、尽可能在数据库中存储、优化、在网页设计中使用更少的图像，避免复杂的 URL 重写。并再次优化！浏览您的服务器访问和错误日​​志并再次优化！:) 当您开始达到 4 位数及以上的访问者数量时，您所做的每一次优化和加速都会给您回报。

在我超过 14 年的 Web 开发经验中，我从错误中吸取了教训，我知道何时何地需要一个框架。与犯错和学习相比，花一点时间阅读和项目规划时间将为您节省大量时间和金钱。时间就是金钱！

希望这可以帮助某人改善他们的开发时间！

我将继续进行测试和基准测试，并稍后在此处发布更新！

资料来源：bit.ly/OX3UTo

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-18T11:28:13.037

作为一个在大约十几个 php 框架方面有经验并自我评估为精通几个（包括 Cake）的人，我建议你研究一下[Yii 框架](http://www.yiiframework.com/)。它轻量级、高效、编写良好、支持大量功能、拥有庞大而友好的社区，并且无论如何都比 CakePHP imho 更好。

就每天 4000 次点击而言，这基本上不算什么。如果您编写优化良好的应用程序（处理慢查询，相应地优化数据库，最终将大流量内容移动到 CDN），在一个不错的服务器上，Web 应用程序可能会花费很多倍的量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T11:37:11.880

嗯，首先，像 WordPress 这样的 CMS 软件包和像 CakePHP 这样的 MVC 框架是有区别的。WordPress 本身就是成熟的软件。框架就是这样：提供一般应用程序结构的代码（即处理传入请求的方式、目录结构，也许是用于处理数据的 ORM 等），您需要在其上编写代码。

框架很好，因为它们没有完全形成。他们为您处理所有繁琐的低级任务，并允许您编写执行某些操作的*代码*。缺点是需要学习特定框架为您提供的所有内容。

软件包很好，因为它们已经准备好开箱即用，并且通常有许多插件可以安装，如果香草版本没有你需要的一切，你可以安装它来添加功能。缺点是通常很难让像 WordPress 或任何其他 CMS 之类的东西*完全按照*您的意愿工作，即使使用插件，也需要您在后台使用代码。

由您决定什么适合您的需求。

也就是说，如果您希望使用可以让您体验企业级框架的东西，请查看[Symfony2](http://symfony.com/)或[Zend Framework](http://framework.zend.com/)。 [Yii](http://www.yiiframework.com/)也是一个中肯的建议。

# java - Java：Memory Analyzer Tool (MAT) 用法：比较两个 heapdump

> ID：12476064
> 
> 赞同：9
> 
> 时间：2012-09-18T11:25:21.513
> 
> 标签：java, profiling

我正在使用 Eclipse + MAT 插件。我可以看到一个 .hprof 文件堆历史记录，我拍摄了我的 Java 应用程序的两个快照。我希望当我比较两个堆转储时，我可以确定哪些对象实例增加了很多，以便我可以识别内存泄漏的可能性。

netbean 能做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-04-30T17:50:23.113

# 指示

1.  [在MAT](https://www.eclipse.org/mat/downloads.php)中打开两个堆转储
2.  打开显示异常行为的任何堆转储的直方图（通常是具有较高内存或线程使用率的堆转储）。

[![在此处输入图像描述](../Images/ea0f80892695c1af63874d03284ca97c.png)](https://i.stack.imgur.com/b5yT1.png)

3.  将其与另一个堆转储进行比较

[![在此处输入图像描述](../Images/d4782380206b104a803285dd530a9972.png)](https://i.stack.imgur.com/JIScB.png)

4.  从列表中选择适当的堆转储

[![在此处输入图像描述](../Images/d55ae036171aea5b6a7f76c6d22ea0ae.png)](https://i.stack.imgur.com/aDDQum.png)

# 解释结果

[![在此处输入图像描述](../Images/a348da394c06270ae1792e97e1d8af81.png)](https://i.stack.imgur.com/gI2L9m.png)

**类名：**在应用中实例化的类，占用内存

**对象：**在其他堆转储*上方或下方*存在多少类实例的计数*。*

 ***浅堆：**给定类在其他堆转储*上方或下方*的内存中占用的字节数。

# 提示

由于 MAT 默认按降序排序，因此**我建议**切换*Objects*和*Shallow Heap*列的顺序，以查看每个方向上每个列的顶部异常值。

通常，您应该忽略纯 Java 类，如字符串、数组和映射，并专注于*您的应用程序*定义的类。

# 参考

[比较对象 Eclipse 官方帮助文档](http://help.eclipse.org/oxygen/index.jsp?topic=%2Forg.eclipse.mat.ui.help%2Ftasks%2Fcomparingdata.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-05T09:01:09.903

可以做到。请参阅[IBM 博客](https://www.ibm.com/developerworks/community/blogs/kevgrig/entry/how_to_use_the_memory_analyzer_tool_mat_to_compare_heapdumps_and_system_dumps20?lang=en)。

基本上你打开两者，然后在直方图中有一个额外的按钮（最右边的那个）来比较它。*

# ruby-on-rails - Ruby 通过标头值解析 csv

> ID：12476068
> 
> 赞同：3
> 
> 时间：2012-09-18T11:25:31.707
> 
> 标签：ruby-on-rails, ruby, csv

我正在研究一种获取 CSV 文件（带有标题）并使用 Ruby 解析它的方法`CSV.parse`，但是我只想保存特定的列。

CSV 如下所示：

```
NAME,SUPERNET_IP,POP_NAME,ADDRESS_BLOCK_START,ADDRESS_BLOCK_END,Service,ISP Service ID,WCC,DUNSID
Retail,186.43.168.0,text1,186.43.168.0,186.43.175.255,XYZ,XYZB00090095,Enabled,227015716
Retail,186.57.80.0,text2,186.57.80.0,186.57.87.255,XYZ,XYXB00090095,Enabled,227015716 
```

我想保留的唯一字段是：

```
POP_NAME,ADDRESS_BLOCK_START,ADDRESS_BLOCK_END,WCC 
```

有没有办法通过特定的标题名称解析 CSV，例如：

```
mycsv = CSV.parse(csv_data, {:headers => true, (list of headers to keep here) }) 
```

此示例假设`csv_data`是从上面的示例 CSV 形成的字符串。

作为权宜之计，我只是将 CSV 转换为数组数组，但这并不是我真正想要的。我宁愿将其保留为 CSV 对象。

```
myreturnedcsv = []
mycsv = CSV.parse(csv_data, {:headers => true, })
mycsv.each do |row|
  myreturnedcsv.push([row[2], row[3], row[4],row[7]])
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T11:47:13.727

请尝试`smarter_csv`gem / 解析器。这可以忽略输入中的“列”（删除列）[https://github.com/tilo/smarter_csv](https://github.com/tilo/smarter_csv)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T14:14:25.803

仅使用 stdlib，您可以`CSV::Table`在列模式下操作对象（而不是默认的混合模式）。在列模式下，迭代方法将产生两个元素元组，其中包含列名和该列的值数组。

考虑到这一点，我们可以编写如下内容：

```
# column names to keep
columns_to_keep = %w(POP_NAME ADDRESS_BLOCK_START ADDRESS_BLOCK_END WCC)

# get the data
mycsv = CSV.parse(csv_data, :headers => true)

# change to column mode, filter by column name and change back to default
# mode of operation
mycsv.by_col!.delete_if do |col_name, col_values|
  !columns_to_keep.include?(col_name)
end.by_col_or_row! 
```

最后一步是可选的，只是将表对象保留在默认模式下，我们可以像往常一样（按行）迭代。

我实际上不知道这种方法在处理大型数据集时是否会遇到性能/内存问题。

[您可以在CSV::Table](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV/Table.html)的文档中找到有关行/列/混合访问的更多信息。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T20:01:27.210

我会去做一些数组切片：

```
require 'csv'

csv_data = <<EOT
NAME,SUPERNET_IP,POP_NAME,ADDRESS_BLOCK_START,ADDRESS_BLOCK_END,Service,ISP Service ID,WCC,DUNSID
Retail,186.43.168.0,text1,186.43.168.0,186.43.175.255,XYZ,XYZB00090095,Enabled,227015716
Retail,186.57.80.0,text2,186.57.80.0,186.57.87.255,XYZ,XYXB00090095,Enabled,227015716
EOT

data = []
CSV.parse(csv_data) do |row|
  data << [ *row[2 .. 4], row[-2] ]
end

require 'pp'
pp data 
```

返回：

```
[["POP_NAME", "ADDRESS_BLOCK_START", "ADDRESS_BLOCK_END", "WCC"],
["text1", "186.43.168.0", "186.43.175.255", "Enabled"],
["text2", "186.57.80.0", "186.57.87.255", "Enabled"]] 
```

我让 CSV 返回标题，以便更容易查看代码在做什么。`new`使用正常选项关闭标题。

# iphone - Parse 中的 REST API 与 iOS 应用程序交互

> ID：12476072
> 
> 赞同：1
> 
> 时间：2012-09-18T11:25:54.283
> 
> 标签：iphone, ios, xcode, rest, parse-platform

我最近熟悉了[Parse 移动应用平台。](https://www.parse.com/)它可用于向移动应用程序添加后端。它包括一个`REST API`允许您从任何可以发送`HTTP`请求的东西（如我的**iOS 应用程序**）与 Parse 交互。

我正在寻找一些易于学习的教程。你认识一个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:47:06.133

继续在他们的网页上尝试这些教程：[Parse tutorials](https://www.parse.com/tutorials)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:47:20.540

Parse 有一个 iOS API，所以尽管你可以，但你不必深入到 http 级别并自己对对象进行序列化和反序列化。

本指南显示交互： [https ://parse.com/docs/ios_guide](https://parse.com/docs/ios_guide)

由于您正在进行 http 调用，我强烈建议您使用块查看他们的异步 API，这样您就不会阻塞 UI 线程。例如：

```
[gameScore saveInBackgroundWithBlock:^(BOOL succeeded, NSError *error) {
  if (!error) {
     // The gameScore saved successfully.
  } else {
    // There was an error saving the gameScore.
  }
}]; 
```

所以，更喜欢所有以“WithBlock”结尾的方法。另请参阅：[如何在我的 iphone 应用程序中运行进程而不阻塞用户界面](https://stackoverflow.com/questions/7508246/how-do-i-run-a-proccess-without-blocking-user-interface-in-my-iphone-app/7508285#7508285)

# html - SQLite 查询每 10 分钟获取 sum_of_fields

> ID：12476074
> 
> 赞同：1
> 
> 时间：2012-09-18T11:25:56.617
> 
> 标签：html, sqlite

嗨，我有以下表格结构。

```
RESE_ID DATE_OF_SERVICE TIME_OF_SERVICE NO_OF_ATT_MALE  NO_OF_ATT_FEMALE
      1     2012-09-18       16:17:52        5                1
      2     2012-09-18       16:19:22        1                2
      3     2012-09-18       16:29:12        2                1
      4     2012-09-18       16:37:22        1                4
      5     2012-09-18       16:49:02        6                5
      6     2012-09-18       17:01:52        3                2
      7     2012-09-18       17:19:52        0                1 
```

我只想要最后 1 小时每 10 分钟 (no_of_att_male) 的总和，例如（16:00 - 17:00）

像输出一样

```
 RESE_ID DATE_OF_SERVICE  NO_OF_ATT_MALE  NO_OF_ATT_FEMALE    TIME_SLOT
      1     2012-09-18             0                0        16:00 - 16:10   
      2     2012-09-18             6                3        16:11 - 16:20     
      3     2012-09-18             2                1        16:21 - 16:30   
      4     2012-09-18             1                4        16:31 - 16:40    
      5     2012-09-18             6                5        16:41 - 16:50   
      6     2012-09-18             0                0        16:51 - 17:00 
```

请建议我一个可以在 sqlite 中接受的查询（我在 HTML5 中使用它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:05:37.953

```
SELECT DATE_OF_SERVICE,
       SUM(NO_OF_ATT_MALE),
       SUM(NO_OF_ATT_FEMALE),
       SUBSTR(TIME_OF_SERVICE, 1, 4) || '0 - ' ||
       SUBSTR(TIME_OF_SERVICE, 1, 4) || '9'       AS TIME_SLOT
FROM mytable
GROUP BY 4 
```

这将导致这样的输出，即没有空时隙的记录：

```
DATE_OF_SERVICE  SUM(NO_OF_ATT_MALE)  SUM(NO_OF_ATT_FEMALE)  TIME_SLOT
---------------  -------------------  ---------------------  -------------
2012-09-18       6                    3                      16:10 - 16:19
2012-09-18       2                    1                      16:20 - 16:29
2012-09-18       1                    4                      16:30 - 16:39
2012-09-18       6                    5                      16:40 - 16:49
2012-09-18       3                    2                      17:00 - 17:09
2012-09-18       0                    1                      17:10 - 17:19 
```

# objective-c - 内存泄漏 NSData

> ID：12476075
> 
> 赞同：-2
> 
> 时间：2012-09-18T11:25:58.390
> 
> 标签：objective-c, ios, memory-leaks, nsdata

以下行发生内存泄漏

```
NSURL *imageURL = [NSURL URLWithString:currentElementValue];

NSData *ndata =  [NSData dataWithContentsOfURL:imageURL];

UIImage *image1 = [[UIImage alloc] initWithData:ndata]; 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:48:43.580

它看起来像线

```
UIImage *image1 = [[UIImage alloc] initWithData:ndata]; 
```

没有好好清理。将其更改为：

```
UIImage *image1 = [[[UIImage alloc] initWithData:ndata] autorelease]; 
```

或者

```
UIImage *image1 = [UIImage imageWithData:ndata]; 
```

您的 imageURL ( `NSURL`) 和 ndata ( `NSData`) 是自动释放的，因此这应该可以清除您的错误。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-18T12:34:02.810

U 可以在函数结束时释放本地创建的对象，如下所示

```
 NSURL *imageURL = [NSURL URLWithString:currentElementValue];
  NSData *ndata = [NSData dataWithContentsOfURL:imageURL];
  UIImage *image1 = [[UIImage alloc] initWithData:ndata];
  [ndata release];
  [imageURL release]; 
```

这样每次分配的对象都会在该范围内释放

# zabbix - zabbix_get 不显示返回值

> ID：12476081
> 
> 赞同：0
> 
> 时间：2012-09-18T11:26:08.303
> 
> 标签：zabbix

我有这个 shell 脚本`ordem2.sh`。在命令行中执行时它工作正常：

```
var="$( mysql -Ns -uzabbix -e 'select ordem from mon.vendas')"
echo $var 
```

我`UserParameter`加入`/etc/zabbix_agentd.conf`

```
UserParameter=ordem2,/home/ordem2.sh 
```

但是当我尝试使用 zabbix 2.0 获取信息时`zabbix_get -s 127.0.0.1 -p 10050 -k "ordem2"`，它没有显示返回值。这个脚本有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T20:15:38.367

问题已解决。

**第1步**

`visudo`使用和为用户`zabbix`添加编辑 sudoers`/usr/bin/mysql`

例子：`zabbix ALL=(ALL) NOPASSWD: /usr/bin/mysql,/usr/bin/nmap -O *`

**第2步**

在 shell 脚本中 mysql 之前添加 sudo：

```
var="$( sudo /usr/bin/mysql -Ns -uzabbix -e 'select ordem from mon.vendas')" 
```

现在用户`zabbix`代理可以执行了`mysql`。

亚历山大·阿尔维斯

# c++ - 接收到 RST 并关闭套接字后读取数据

> ID：12476087
> 
> 赞同：1
> 
> 时间：2012-09-18T11:26:29.420
> 
> 标签：c++, sockets, quickfix

在尝试读取发送到已定义端口上的套接字的数据时，我在开源应用程序（quickfix 1.13.3）中遇到问题。

当服务器发送数据并在它之后关闭套接字时会出现问题。然后我的代码无法读取最后发送的数据，并抛出 10054 错误。请注意，如果服务器不关闭套接字，我可以正常接收。

这是我用来从服务器接收数据的代码，等待您的帮助；

```
int size = recv( m_socket, m_buffer, sizeof(m_buffer), 0 ); 
```

请注意，如果我使用 TCPClient 接收数据，它工作得很好，但这将导致创建另一个 quickfix 应用程序，这意味着几个月的辛勤工作会丢失，而要创建一个类似于 quickfix 的应用程序需要更多的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T21:22:26.203

如果服务器导致发送 RST，则语义意图是丢失任何传输中的数据。服务器通常没有业务这样做。问题就在于此。除了可能使用更大的套接字接收缓冲区来改变窗口并更快地读取之外，您在客户端无能为力。

# c# - c#如何获取添加的事件？

> ID：12476088
> 
> 赞同：4
> 
> 时间：2012-09-18T11:26:29.473
> 
> 标签：c#, events, delegates

我坐在我的电脑前想知道如何获得所有添加的事件。我刚刚阅读了一些文章，包括[AC# Bedtime Story](http://www.codeproject.com/Articles/1629/NET-Delegates-A-C-Bedtime-Story)以更好地理解事件，我认为我现在明白了主要思想。但是我仍然不知道如何获取在触发事件时执行的方法/委托的列表。实际上，就我而言，如果我知道是否将任何方法/委托分配给某个事件就足够了。例如：我正在使用`Gma.UserActivityMonitor`（用于键盘/鼠标挂钩）现在我想知道事件`HookManager.KeyUp`事件是否不为空。如果为空，则添加代表喊声。在我的情况下这个\ /

```
HookManager.KeyUp += new KeyEventHandler(HookManager_KeyUp); 
```

## 编辑

示例代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Reflection;
using Gma.UserActivityMonitor;

namespace EventTest 
{ 
    public partial class Form1 : Form 
    { 
        public Form1() 
        { 
            InitializeComponent();             
            HookManager.KeyUp += new KeyEventHandler(HookManager_KeyUp);
            Delegate[] a = GetEventSubscribers(button1, "Click");
            label1.Text = a[0].Method.ToString();
        } 
        void HookManager_KeyUp(object sender, KeyEventArgs e) 
        {         
            /* Do something*/     
        } 
        bool NoEventAttached() 
        { 
            return false; 
        }

        public static Delegate[] GetEventSubscribers(object target, string eventName) 
        { 
            Type t = target.GetType(); 
            var eventInfo = t.GetEvent(eventName, BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Static); 

            do 
            { 
                FieldInfo[] fia = t.GetFields(
                    BindingFlags.Static | 
                    BindingFlags.Instance | 
                    BindingFlags.NonPublic); 

                foreach (FieldInfo fi in fia) 
                { 
                    if (fi.Name == eventName) 
                    { 
                        Delegate d = fi.GetValue(target) as Delegate;                         
                        if (d != null)                         
                            return d.GetInvocationList(); 
                    } 
                    else if (fi.FieldType == typeof(EventHandlerList)) 
                    { 
                        ----> var obj = fi.GetValue(target) as EventHandlerList; 
                        var eventHandlerFieldInfo = obj.GetType().GetField("head", BindingFlags.Instance | BindingFlags.NonPublic); 
                        do 
                        { 
                            var listEntry = eventHandlerFieldInfo.GetValue(obj); 
                            var handler = listEntry.GetType().GetField("handler", BindingFlags.Instance | BindingFlags.NonPublic); 
                            if (handler != null) 
                            { 
                                var subD = handler.GetValue(listEntry) as Delegate; 
                                if (subD.GetType() != eventInfo.EventHandlerType) 
                                { 
                                    eventHandlerFieldInfo = listEntry.GetType().GetField("next", BindingFlags.Instance | BindingFlags.NonPublic); 
                                    obj = listEntry as EventHandlerList; <-----------
                                    continue; 
                                } 
                                if (subD != null) 
                                { 
                                    return subD.GetInvocationList(); 
                                } 
                            } 
                        } 
                        while (eventHandlerFieldInfo != null);                 
                    } 
                } 
                t = t.BaseType; 
            } while (t != null);          
            return new Delegate[] { }; 
        }

        private void button1_Click(object sender, EventArgs e)
        {

        }

        private void button1_MouseClick(object sender, MouseEventArgs e)
        {

        }

    } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T11:55:12.357

请注意此控制台应用程序，特别是调用`GetInvocationList()`. 该方法返回附加的委托列表。每个`Delegate`人都有一个`Method`财产。每个`Method`属性都有一个`Name`.

## 代表归您所有

```
internal class Program
{
    public event EventHandler CheckInvocationList;

    private static void Main(string[] args)
    {
        Program p = new Program();
        p.CheckInvocationList += new EventHandler(p_CheckInvocationList);
        p.Method1();

        Console.WriteLine(string.Join(" | ", p.CheckInvocationList.GetInvocationList().Select(d => d.Method.Name).ToArray()));
    }

    static void p_CheckInvocationList(object sender, EventArgs e)
    {
        throw new NotImplementedException();
    }

    public void Method1()
    {
        this.CheckInvocationList += new EventHandler(Program_CheckInvocationList);
    }

    void Program_CheckInvocationList(object sender, EventArgs e)
    {
        throw new NotImplementedException();
    }
} 
```

## 代表不归您所有

好的，这有点混乱，但它会给你你想要的答案。即使内部实现使用一个`EventHandlerList`（这有点常见），**但**我不能保证它绝对适用于所有场景，因为可能有很多不同的内部表示。

但是，希望这对您有用。正如您在示例中看到的那样，我使用`BackgroundWorker`该类作为示例类来获取我不拥有的特定事件的调用列表。

```
using System;
using System.ComponentModel;
using System.Linq;
using System.Reflection;

internal class Program
{
    private static void Main(string[] args)
    {
        BackgroundWorker worker = new BackgroundWorker();
        worker.DoWork += new DoWorkEventHandler(worker_DoWork);
        worker.DoWork += new DoWorkEventHandler(worker_DoWork2);
        worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(worker_RunWorkerCompleted);
        worker.ProgressChanged += new ProgressChangedEventHandler(worker_ProgressChanged);

        Console.WriteLine(string.Join(" | ", GetEventSubscribers(worker, "DoWork").Select(d => d.Method.Name).ToArray()));
    }

    static void worker_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        throw new NotImplementedException();
    }

    static void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        throw new NotImplementedException();
    }

    static void worker_DoWork2(object sender, DoWorkEventArgs e)
    {
        throw new NotImplementedException();
    }

    static void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        throw new System.NotImplementedException();
    }

    public static Delegate[] GetEventSubscribers(object target, string eventName)
    {
        Type t = target.GetType();
        var eventInfo = t.GetEvent(eventName, BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Static);

        do
        {
            FieldInfo[] fia = t.GetFields(
                 BindingFlags.Static |
                 BindingFlags.Instance |
                 BindingFlags.NonPublic);

            foreach (FieldInfo fi in fia)
            {
                if (fi.Name == eventName)
                {
                    Delegate d = fi.GetValue(target) as Delegate;
                    if (d != null)
                        return d.GetInvocationList();
                }
                else if (fi.FieldType == typeof(EventHandlerList))
                {
                    dynamic obj = fi.GetValue(target) as EventHandlerList;
                    var eventHandlerFieldInfo = obj.GetType().GetField("head", BindingFlags.Instance | BindingFlags.NonPublic);
                    do
                    {
                        var listEntry = eventHandlerFieldInfo.GetValue(obj);
                        var handler = listEntry.GetType().GetField("handler", BindingFlags.Instance | BindingFlags.NonPublic);
                        if (handler != null)
                        {
                            var subD = handler.GetValue(listEntry) as Delegate;
                            if (subD.GetType() != eventInfo.EventHandlerType)
                            {
                                eventHandlerFieldInfo = listEntry.GetType().GetField("next", BindingFlags.Instance | BindingFlags.NonPublic);
                                obj = listEntry;
                                continue;
                            }
                            if (subD != null)
                            {
                                return subD.GetInvocationList();
                            }
                        }
                    }
                    while (eventHandlerFieldInfo != null);
                }
            }

            t = t.BaseType;
        } while (t != null);

        return new Delegate[] { };
    }
} 
```

最后，虽然我对代码做了一些相当大的修改，但我必须感谢[Bob Powell](https://web.archive.org/web/20131213074318/http://bobpowell.net/eventsubscribers.aspx)让我开始着手这件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:41:47.283

我相信只需将 HookManager.KeyUp 与 null 进行比较即可为您提供答案。

不过，除此之外，除非自从上次我调查它（很有可能）以来事情发生了变化，否则很难获得与事件相关联的代表的实际列表。但是，如果该值为 null，则表明没有委托与之关联。

# java - JAVA gettext 公用

> ID：12476090
> 
> 赞同：3
> 
> 时间：2012-09-18T11:26:41.100
> 
> 标签：java, gettext

我一直在努力让国际化在 JAVA 中工作（需要支持复数）。我有一个 POT 文件，并从中生成了一个 PO 文件，我什至设法从中编译了 JAVA 类（根据[http://xnap-commons.sourceforge.net/gettext-commons/tutorial. html#Creating_Resource_Bundles](http://xnap-commons.sourceforge.net/gettext-commons/tutorial.html#Creating_Resource_Bundles)）。

但是，我可以在我的一生中无法让它在我的项目中发挥作用。任何人都可以帮助我获得一个完整的工作示例项目的链接吗？我发现的所有示例都表明这是一个非常简单的实现，所以我猜我只是很愚蠢，但任何帮助都将不胜感激。

问候

# clojure - Clojure 中的负数

> ID：12476091
> 
> 赞同：8
> 
> 时间：2012-09-18T11:26:41.693
> 
> 标签：clojure

在我的clojure研究期间，我发现了这一点：

```
;Clojure 1.4.0
(def neg_inf -1E-400)
(cond
    (= neg_inf 0) "Zero"
    (< neg_inf 0) "Negative"
    (> neg_inf 0) "Positive"
    :default "Neither"
)
;#'user/neg_inf
;user=> "Neither" 
```

它是一个错误吗？

然后，我尝试了：

```
(Math/signum -1E-400) ;-0.0 
```

这是我发现的一种方法，可以发现某个数字何时被视为 -0.0 ：

```
(Math/copySign 1\. -0.) ;-1.0
(Math/copySign 1\. -1E-99999999999999999999999);-1.0 
```

这样，我可以知道一个数字是否为负，即使它非常接近于零。

所有这一切都是因为我试图解决这个问题：

```
(defn hexadecimal-to-degrees [rah ram ras]
     { :pre [ (>= rah 0) (< rah 24) (>= ram 0) (< ram 60) (>= ras 0) (< ras 60) ]
       :post [ (>= % 0) ]
     }
     (/ (+ rah (/ ram 60) (/ ras 3600)) 15)
)

(hexadecimal-to-degrees -1E-400 -1E-400 -1E-400)
;-0.0 ; OMG, no Assert failed here! 
```

由于赤经（地球经度的天体等价物）没有负值，我正在测试后置条件是否以保证无论我传递什么数字都不会为 RA 返回负值的方式传递给功能..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T12:06:05.920

我怀疑在`(= 0 -1E-400)`后台使用java的`Double.equals()`方法，它将正零和负零视为不相等。此行为违反了 IEEE 浮点标准。其他比较运算符转换为符合标准的其他方法，即将+0.0 和-0.0 视为相等。

要获得符合标准的行为，请使用数字等价运算符`==`。因此，`(== 0 -0.0)`评估为`true`。

更多关于维基百科上的有符号和无符号零：[http ://en.wikipedia.org/wiki/Signed_zero](http://en.wikipedia.org/wiki/Signed_zero)

更笼统地说：比较浮点数是否相等应该总是引起怀疑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T15:42:02.510

请记住，Doubles 的行为意味着处理器时间和准确性之间的性能折衷。Clojure 使使用 BigDecimal 变得很容易，BigDecimal 的计算成本更高，但具有更好的准确性保证。您可以通过在文字数字后附加“M”来指定 BigDecimal 数字文字，并且所有数字运算符都接受 BigDecimal。与您的示例相关的快速试驾：

```
user> (type -1E-400)
java.lang.Double
user> (type -1E-400M)
java.lang.BigDecimal

user> (= 0M -1E-400M)
false
user> (<= 0M -1E-400M)
false
user> (< 0M -1E-400M)
false
user> (>= 0M -1E-400M)
true 
```

# mysql - 最初的特定 ID

> ID：12476092
> 
> 赞同：0
> 
> 时间：2012-09-18T11:26:44.430
> 
> 标签：mysql, sql, sql-order-by

实际上我有一个汽车表，因为`CAR`它有 3 个字段：

*   `carId`.
*   `carName`.
*   `carPrice`.

Car 表有 15 条记录，我只想将第 5 条记录放在第一个其余的记录中，以任何顺序作为`DESC`, `ASC`。

我的主要目的是把`carId`所有其他的记录`DESC`一一`ASC`记录下来！

我想我对你很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T11:29:45.643

您可以在子句中使用如下`CASE`表达式：`ORDER BY`

```
SELECT carId ,carName,carPrice
FROM Car 
ORDER BY CASE WHEN carId = @th5thid THEN 0 ELSE 1 END, Carid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T12:02:38.100

尽管@Mahmoud 的答案非常有效，但其中的 a`case`会使`order by`引擎难以优化查询。你可以像这样避免它：

```
select carid, carname, carprice
from car 
order by carid != 5, carid 
```

在 mysql 中，比较将返回 0 或 1，因此无需将其包装在`case`语句中：

```
mysql> select 1 = 0;
+-------+
| 1 = 0 |
+-------+
|     0 |
+-------+

mysql> select 1 = 1;
+-------+
| 1 = 1 |
+-------+
|     1 |
+-------+ 
```

# android - 如何包含凹凸 sdk 但开始禁用它

> ID：12476094
> 
> 赞同：1
> 
> 时间：2012-09-18T11:26:54.133
> 
> 标签：android, bump

使用 android 下载中提供的示例应用程序，我想在 onCreate() 方法中使用 api.disableBumping() 来添加广播接收器，但禁用碰撞，直至另行通知。应用程序不断在我身上崩溃。

任何指针？

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.main);

    bindService(new Intent(IBumpAPI.class.getName()),
                connection, Context.BIND_AUTO_CREATE);

    IntentFilter filter = new IntentFilter();
    filter.addAction(BumpAPIIntents.CHANNEL_CONFIRMED);
    filter.addAction(BumpAPIIntents.DATA_RECEIVED);
    filter.addAction(BumpAPIIntents.NOT_MATCHED);
    filter.addAction(BumpAPIIntents.MATCHED);
    filter.addAction(BumpAPIIntents.CONNECTED);
    registerReceiver(receiver, filter);

    try {
        api.disableBumping();
    } catch (RemoteException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

调试信息

```
Thread [<1> main] (Suspended (exception RuntimeException))  
ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1816    
ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1837 
ActivityThread.access$1500(ActivityThread, ActivityThread$ActivityClientRecord, Intent) line: 132   
ActivityThread$H.handleMessage(Message) line: 1033  
ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
Looper.loop() line: 143 
ActivityThread.main(String[]) line: 4196    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 507  
ZygoteInit$MethodAndArgsCaller.run() line: 839  
ZygoteInit.main(String[]) line: 597 
NativeStart.main(String[]) line: not available [native method] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T01:37:18.443

在下面的几行中，我解释了 Bump 的逻辑是如何工作的，

打电话时

```
bindService(new Intent(IBumpAPI.class.getName()), connection, Context.BIND_AUTO_CREATE); 
```

onServiceConnected 被调用，然后你可以调用

```
 api = IBumpAPI.Stub.asInterface(binder);

    try  { api.configure("YOUR_API_KEY", "Bump User"); }
    catch (RemoteException e)  { } 
```

然后你等到收到广播**CONNECTED**，从那时起，何时调用 api.enableBumping() 或 api.disableBumping() 由你决定

注意：如果在调用 api.configure() 时连接断开，将引发远程异常。

# sql-server - SQL Server 2005 正在断开连接

> ID：12476099
> 
> 赞同：0
> 
> 时间：2012-09-18T11:27:05.427
> 
> 标签：sql-server, iis-7, windows-server-2008, connection-pooling, database-administration

我们新购买了 Windows web server 2008 r2。我们在这台服务器上安装了 SQL server 2005 Express 和 IIS 7 来运行我们的网站。

我们观察到连接经常掉线或不可用。如果我登录到我的电脑并运行我的网站，它就可以工作。但是，如果暂时没有人使用服务器/应用程序，则第一个^(后续)请求通常会失败，并显示错误“无效的连接属性或连接超时”。

我检查过：

1.  发现连接到数据库的连接数（使用数据库的应用程序）不超过 4 个，这会相应变化。

2.  我试图解除对防火墙的阻止，但失败了。

3.  我没有安装任何防病毒软件，所以那里不应该有任何冲突。

我试图创建一个已打开端口 1433 并启用管理配置所需的所有设置的 ODBC 连接。但是，我无法访问端口 1433。

我还能做些什么来诊断根本问题？

# c++ - boost::shared_ptr 的构造函数重载

> ID：12476103
> 
> 赞同：1
> 
> 时间：2012-09-18T11:27:16.257
> 
> 标签：c++, boost, shared-ptr

考虑以下 .h 文件：

```
#ifndef COM_H_
#define COM_H_

#include <boost/enable_shared_from_this.hpp>
#include <boost/shared_ptr.hpp>
#include <map>

class B;

class A : public boost::enable_shared_from_this<A>{
public:
    A(){}
    ~A(){}

    void Init();

    boost::shared_ptr<B> b_ptr_;
};

class B : public boost::enable_shared_from_this<B>{
public:

    B(){}
    B(boost::shared_ptr<A> a_ptr);
    B(int j, boost::shared_ptr<A> a_ptr);
    ~B(){}

    void Init();
    void Init(boost::shared_ptr<A> a_ptr);
    void Init(int j, boost::shared_ptr<A> a_ptr);

    std::string b;
    boost::shared_ptr<A> a_ptr_;
};
#endif /* COM_H_ */ 
```

和 .cc 文件：

```
#include "com.h"

void A::Init() {

    // Case 1 not working
    // boost::shared_ptr<B> b1(new B(shared_from_this()));
    // b1->Init();

    // Case 2 working
    boost::shared_ptr<B> b2(new B());
    b2->Init(shared_from_this());
}

B::B(boost::shared_ptr<A> a_ptr) {
    B(2, a_ptr);
}

B::B(int j, boost::shared_ptr<A> a_ptr) {
    a_ptr_ = a_ptr;
    b = "b";
}

void B::Init() {
    a_ptr_->b_ptr_ = shared_from_this();
}

void B::Init(boost::shared_ptr<A> a_ptr) {
    Init(2, a_ptr);
}

void B::Init(int j, boost::shared_ptr<A> a_ptr) {

    a_ptr_ = a_ptr;
    b = "b";
    a_ptr_->b_ptr_ = shared_from_this();
} 
```

主要：

```
#include "com.h"
#include <iostream>
int main() {

    boost::shared_ptr<A> a(new A());
    a->Init();

    std::cout << a->b_ptr_->b << std::endl;

    return 0;
} 
```

将 boost::shared_ptr 传递给构造函数，然后使用与参数相同的指针调用另一个（重载）构造函数时，shared_ptr 指向的对象丢失并且错误

> 在抛出 'boost::exception_detail::clone_impl 的实例后调用终止
> 
> > ' 什么(): tr1::bad_weak_ptr

被抛出。以相同方式调用两个重载函数 (Init) 时不会发生同样的情况。

谁能解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:03:19.953

问题是您在 B 的构造期间调用 shared_from_this() ，这是被禁止的，因为当时尚未初始化指向 B 的共享指针。

具体来说，这个构造函数就是你调用的那个：

```
B::B(boost::shared_ptr<A> a_ptr) {
    Init(2, a_ptr);  // runtime error -- Init(...) calls shared_from_this!
} 
```

* * *

回答第 2 部分：

我怀疑你已经习惯了另一种语言:) 在 C++ 中，你不能以你试图做的方式调用另一个构造函数。线

```
B(2, a_ptr); 
```

没有按照你的想法做——它所做的只是构建一个立即被销毁的临时 B 对象。它不会调用其他构造函数。因此，您最终得到的 B 仍然具有默认构造的 a_ptr_ 成员。

如果您的编译器支持 C++-11，它具有委托构造函数，如下所示：

```
B(shared_ptr<A> a_ptr) : B(2, a_ptr) {...} 
```

...否则，您必须声明另一个函数并让两个构造函数都调用它。

# c# - 将一些信息与可执行文件捆绑在一起？

> ID：12476104
> 
> 赞同：4
> 
> 时间：2012-09-18T11:27:17.930
> 
> 标签：c#, asp.net, iis-7.5, clickonce

我在我的网络服务器上使用 IIS 7.5，我正在创建一个发布到该服务器的 C# WPF 程序，以便人们可以下载该程序。

现在，人们使用`http://.../Software/Shapeshifter/Setup.exe`

但是，我希望杂志等的编辑能够制作我的节目的品牌副本，以便他们可以选择品牌。

例如这个链接： `http://.../Software/Shapeshifter/Setup.exe?brandName=test&brandImage=http://uriToImage.example.com`

然后在启动时从我的程序中读取它，以正确标记应用程序。

目前我正在使用 ClickOnce 来执行此操作，因为它允许 Web 调用此类参数。但是，它只能在 Internet Explorer 中正常工作。

我一直在考虑以下方案来解决它：

1.  制作一个 .EXE 文件 HttpHandler。
2.  请求 .EXE 文件时，请检查参数。
3.  以某种方式将参数嵌入到 .EXE 文件中（我该怎么做？）
4.  从应用程序中读取参数（同样，我该怎么做？）

为了让这一切变得更简单，假设我的程序是单个 .EXE 文件，而 Setup.exe 实际上是程序的可执行文件本身，没有任何包装安装程序（即使情况并非如此）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:08:12.407

老实说，我会首先在 EXE 中编译一个巨大的字符串资源，可以很容易地识别（非常特定的 HEX 组合），将 EXE 作为二进制文件打开，搜索这个位置并将任何数据放在那里。不完全漂亮，但应该工作。

但是在网上深入挖掘之后，我终于找到了一个资源编辑器，它既免费又支持从命令行执行。

该工具是[资源黑客](http://www.angusj.com/resourcehacker/)。命令行用法在[教程](http://www.askvg.com/tutorial-all-about-resource-hacker-in-a-brief-tutorial/)中有描述（搜索“Using Scripts in Resource Hacker”）

# jquery - jquery 选择器 - 选择类的前三个字母

> ID：12476107
> 
> 赞同：2
> 
> 时间：2012-09-18T11:27:32.600
> 
> 标签：jquery, class, jquery-selectors, find

我有前 3 个字母相同的课程

一份工作两份工作三份

例如：

```
<div class="jobOne"></div>
<div class="jobTwo"></div>
<div class="jobThree"></div> 
```

我想匹配所有以工作开头的课程。在一个 div 上。

如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T11:29:50.947

您可以使用以下内容，将 div 替换为您选择的元素：

```
$("div[class^='job']"); 
```

另请参阅官方文档：[属性以选择器开头](http://api.jquery.com/attribute-starts-with-selector/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T11:33:58.293

您可以使用 jQuery 属性选择器[http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

```
$("div[class^='job']"); 
```

你也可以循环抛出所有的比赛

```
$("div[class^='job']").each(function(){
   // do your coding using $(this)
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T13:59:09.137

尝试这个

'HTML 代码'

```
 <div class="jobOne"></div>
  <div class="jobTwo"></div>
  <div class="jobThrees"></div> 
```

'JS代码'

```
$(document).ready(function(){
    console.log($('div[class^="job"]'));
}); 
```

[**从这里有更多的想法**](http://api.jquery.com/attribute-starts-with-selector/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T11:30:28.673

检查这个 Jquery 文档：[http ://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

```
jQuery('[class^="job"]') 
```

# java - android将文件保存到内部数据文件夹中

> ID：12476110
> 
> 赞同：0
> 
> 时间：2012-09-18T11:27:41.587
> 
> 标签：java, android, eclipse

我的应用程序将一些文件保存到设备上的数据/数据文件夹中。保存远程文件后，我处理这些文件，将它们复制到其他文件夹中。在之前测试的所有设备上一切正常，但在 Galaxy s3 上会生成 nullPointer 异常。似乎我不允许在该文件夹中写入或处理文件！但仅限于新的 Galaxy s3！在模拟器（相同的android版本）中，我也无法使用eclipse ddms文件资源管理器在数据文件夹上找到任何文件，我可以正确查看所有应用程序文件！Galaxy s3 有什么不同？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:22:40.560

**-**这就是安卓的`Security`特点。

**-**您可以轻松查看`data`模拟器的文件夹，但**不能查看 Android 手机的文件夹。**

**-**如果偷看 Android 手机的数据文件夹这么容易，那么任何人都可以访问`DataBase, etc`

直到现在我已经在 , , 上测试了这个`Galaxy S2`，`HTC Explorer`所有`Galaxy Note`这些 **都是非根的。**

# c++ - Boost Regex 用于提取键值对

> ID：12476111
> 
> 赞同：0
> 
> 时间：2012-09-18T11:27:56.390
> 
> 标签：c++, regex, boost

计划开发一个使用 boost 和 regex 来提取字符串中的键值对的实用程序。

示例输入字符串可能如下

> 旅行：1.5，汽车保险：3.25

提取后应该是这样的

> 旅行 1.5
> 
> 汽车保险 3.25

有以下代码，但不知何故这似乎没有按预期工作

```
 std::map<std::string, std::string> pairs;
  boost::regex re("(?:(.*?):(.*?),)*(?:(.*?):(.*?))$"); // key - value pair

  // read lines from stdin; populate map
  boost::sregex_iterator it(str.begin(), str.end(), re), end;
  for ( ; it != end; ++it){
      pairs[(*it)[1]] = (*it)[2];
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:20:11.157

这真的不应该那么困难。您已经有了大部分答案，只是处理最后一个逗号的问题。`(:,|$)`应该工作得很好。

`(?:([^:]+):([^,]+)(?:,|$))+`

# xml - 具有标头和多种正文类型的 XML 消息的正确架构

> ID：12476115
> 
> 赞同：1
> 
> 时间：2012-09-18T11:28:22.240
> 
> 标签：xml, visual-studio-2010, serialization, xsd

我正在重写一个旧系统，我使用 xsd.exe 从 XML 文档创建了一个模式，然后使用 xsd.exe/xsd2code 从 xsd 生成了 .NET 代码。然而，似乎存在一个缺陷，可能是在原始 xml 文档的设计或它的生成方式中，但我对架构的了解不够，无法纠正问题。这是一个说明问题的清理示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
  <xs:element name="ABC">
    <xs:complexType>
      <xs:all>
        <xs:element ref="ABC_HEADER"/>
        <xs:element name="BODY_A" minOccurs="0" />
        <xs:element name="BODY_B" minOccurs="0" />
        <xs:element name="BODY_C" minOccurs="0" />
      </xs:all>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

这个想法是 ABC 类是一个消息，它包含一个标题和一个可以是各种类型的单个主体元素（我没有设计这个）。当生成的类被序列化时，我在输出 XML 中获得了每个主体类之一：

```
<?xml version="1.0" encoding="utf-8"?>
<ABC>
  <ABC_HEADER>
  </ABC_HEADER>
  <BODY_A></BODY_A>
  <BODY_B></BODY_B>
  <BODY_C></BODY_C> 
```

鉴于我无法更改设计并且生成的 XML 需要与旧版 XML 匹配，这是`<xs:all>`表示这一点的正确方式，还是 <`xs:sequence>`或其他更好的选择？

或者，我是否需要编写一些自定义（预）序列化代码来生成正确的输出？

编辑：尽管最后得到了很好的答案，但我不得不为`<ABC>`元素编写自定义序列化代码，但结合了`<ABC_HEADER>`and`<BODY_>`元素的普通序列化（删除了 xml 声明）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T13:30:36.653

你试过这个吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
                                    elementFormDefault="qualified">
  <xs:element name="ABC_HEADER" type="xs:string"/>
  <xs:element name="ABC">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="ABC_HEADER"/>
        <xs:choice>
          <xs:element name="BODY_A"/>
          <xs:element name="BODY_B"/>
          <xs:element name="BODY_C"/>
        </xs:choice>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

编辑：您是否尝试过使用以下方式继承架构：

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema elementFormDefault="qualified" 
           xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:complexType name="ABC">
    <xs:sequence>
      <xs:element ref="ABC_HEADER" />
      <xs:element name="BODY" type="BODY" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="BODY">
    <xs:sequence />
  </xs:complexType>

  <xs:complexType name="BODY_A">
    <xs:complexContent mixed="false">
      <xs:extension base="BODY">
        <!-- define BODY_A schema here -->
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="BODY_B">
    <xs:complexContent mixed="false">
      <xs:extension base="BODY">
        <!-- define BODY_B schema here -->
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="BODY_C">
    <xs:complexContent mixed="false">
      <xs:extension base="BODY">
        <!-- define BODY_C schema here -->
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

</xs:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:37:25.310

如果`BODY_A`, `BODY_B`, 和的顺序`BODY_C`比使用`sequence`元素重要，否则可以使用`all`元素。听起来您想使用该`sequence`元素。

> all 元素指定子元素可以以任何顺序出现，并且每个子元素可以出现零次或一次。

[来源](http://www.w3schools.com/schema/el_all.asp)

> 序列元素指定子元素必须出现在序列中。每个子元素可以出现 0 到任意次数。

[来源](http://www.w3schools.com/schema/el_sequence.asp)

我还将继续使用该`minOccurs="0"`指标。

[完整架构参考](http://www.w3schools.com/schema/schema_elements_ref.asp)

# android - 如何在android中重复警报特定的星期几

> ID：12476118
> 
> 赞同：1
> 
> 时间：2012-09-18T11:28:38.997
> 
> 标签：android, alarmmanager

我想使用 android 中的警报管理器获得一周中特定日期的警报。例如：- 我周日到周六有七个复选框。如果我检查周一、周三、周五，闹钟在周一、周三和周五只播放三天。

任何有想法？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:51:29.430

```
Calendar calendar = Calendar.getInstance();
                    int day = calendar.get(Calendar.DAY_OF_WEEK);
                    String today = null;
                    if (day == 2 || day == 3 || day == 4 || day == 5
                            || day == 6) {

                        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
                                calSet.getTimeInMillis(), 24 * 60 * 60 * 1000,
                                pendingIntent);
                    } 
```

只需在您的确定按钮中编写此代码即可。此代码已在我的应用程序中成功运行

# php - 从数组中返回给定键的数组

> ID：12476123
> 
> 赞同：1
> 
> 时间：2012-09-18T11:28:57.997
> 
> 标签：php

我想知道是否有一个原生 PHP 函数用于返回一个数组，该数组由另一个数组中的一组给定 key=>value 元素组成，给定一个需要键的列表。这就是我的意思：

```
// Nice information
$source_array = array('a' => 'hello', 'b' => 'goodbye', 'c' => 'good day', 'd' => 'sunshine');

// Required element keys
$array_two = array('a','b');
$array_three = array('a','d');

// Get that stuff from $source_array...
// $array_two_result = ???
// $array_three_result = ???

// Show it
print_r($array_two_result);
print_r($array_three_result); 
```

输出：

```
Array(
    [a] => 'hello'
    [b] => 'goodbye'
)
Array(
    [a] => 'hello'
    [d] => 'sunshine'
) 
```

我一直在查看文档，但目前还找不到任何东西，但在我看来，这并不是一件特别不正常的事情，因此提出了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T11:34:59.543

这似乎是您正在寻找的：[array_intesect_key](http://www.php.net/manual/en/function.array-intersect.php)

```
$source_array = array('a' => 'hello', 'b' => 'goodbye', 'c' => 'good day', 'd' => 'sunshine');

// Required element keys
$array_two = array('a','b');
$array_three = array('a','d');

// Get that stuff from $source_array...
$array_two_result = array_intersect_key($source_array, array_flip($array_two));
$array_three_result = array_intersect_key($source_array, array_flip($array_three));

// Show it
print_r($array_two_result);
print_r($array_three_result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:38:05.423

`array_intersect_key`- IT 使用键计算数组的交集以进行比较。您可以将它与 array_flip 一起使用

```
print_r(array_intersect_key($source_array, array_flip(array_two_result));
print_r(array_intersect_key($source_array, array_flip($array_three_result)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T11:53:37.503

I have tried following code:

```
// Nice information
$source_array = array('a' => 'hello', 'b' => 'goodbye', 'c' => 'good day', 'd' => 'sunshine');

// Required element keys
$array_two = array('a','b');
$array_three = array('a','d');

function getArrayValByKey($keys_arr, $source_array){
$arr = array();
foreach($keys_arr as $key => $val){
    if(array_key_exists($val, $source_array)){
        $arr[$val] = $source_array[$val];;
    }
}

return $arr;
}

// Get that stuff from $source_array...
$array_two_result = getArrayValByKey($array_two, $source_array);
$array_three_result = getArrayValByKey($array_three, $source_array);

// Show it
print_r($array_two_result); //Array ( [a] => hello [b] => goodbye ) 
print_r($array_three_result); //Array ( [a] => hello [d] => sunshine ) 
```

# objective-c - 如何检测键盘输入键？

> ID：12476127
> 
> 赞同：1
> 
> 时间：2012-09-18T11:29:04.783
> 
> 标签：objective-c, ios, uiwebview

我`UIWebView`同意我允许在运行时进行编辑。

现在当我点击`UIWebView`然后 iPad 键盘打开写，现在我的要求是如何检测我点击了 iPad 键盘的回车键？

我知道如果我们正在编辑`UITextView`或`UITextField`使用它的代表，我们可以实现这一点。帮助我！

我在 javascript 中有一个函数可以检测到它。

```
function returnEnterPress(e){
    var key;     
     if(window.event)
          key = window.event.keyCode; //IE
     else
          key = e.which; //firefox     
          // ENTER KEY MUNBER IS 13 // KD
     if(key == 13)
     {
        //alert('enter');
     }
     return false;
} 
```

现在我可以使用objective-c代码调用它并且可以获得像true或false这样的返回值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T05:22:52.767

我用这样的javascript完成了我的工作......

在 HTML 文件中

```
function returnEnterPress(e){
     var key;     
     if(window.event)
          key = window.event.keyCode; //IE
     else
          key = e.which; //firefox     
          // ENTER KEY MUNBER IS 13 // KD
     if(key == 13)
     {
        window.location.href = 'enterClicked/0';
     }
     else
     {
         var range = window.getSelection().getRangeAt(0).endOffset;
         if(range == 0)
         {
            window.location.href = 'enterClicked/'+range;
         }
     }
     return true;
}

<body onKeyPress="return returnEnterPress(event)"> 
```

在我的 Objective-c 代码中

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{

    if([[[request URL] absoluteString] rangeOfString:@"enterClicked"].location!=NSNotFound)    // When "enterClicked" found
    {
        //Do your desired work
        return NO;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:59:44.190

您可能可以使用某种 Javascript 来解决这个问题，但我只会使用表单/提交按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T11:57:04.163

使用一些键盘通知。我使用以下代码来检测键盘将要隐藏

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(nothing)    name:UIKeyboardWillHideNotification object:nil];
}
-(void)nothing
{
     NSLog(@"do Whatever u want");
} 
```

试试看。，。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T11:39:42.723

我认为没有公共 API 可以处理该级别的键盘。这是一项相当大的努力（因为国际键盘），但一种选择是收听`UIKeyboardWillShow`通知并用透明`UIView`的 s 覆盖您想要收听的按钮的键盘。您可以捕获触摸，然后将其传递给下面的视图（键盘）并让它做它的事情。

您甚至可以覆盖`(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event;`透明按钮。所以你捕捉到了它被触摸但无论如何都返回的事实，`NO`以便键盘得到触摸。

然后困难在于知道每个键的位置，具体取决于您需要支持的键盘类型。

# java - Swing：在 jMenu 的 menuItem 中创建复选框或复选符号

> ID：12476128
> 
> 赞同：11
> 
> 时间：2012-09-18T11:29:14.330
> 
> 标签：java, swing, jcheckbox, jmenu, jmenubar

我想在 menuItem 前面创建一个复选框或复选符号`JMenu`。例如，当我们打开记事本文件并单击“格式”菜单时，“格式”菜单的“自动换行”菜单项前面有一个复选框。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-18T11:33:26.157

在菜单中使用[`JCheckBoxMenuItem`](http://docs.oracle.com/javase/8/docs/api/javax/swing/JCheckBoxMenuItem.html)for 复选框。

# mysql - 获取超过两个月的物品

> ID：12476132
> 
> 赞同：1
> 
> 时间：2012-09-18T11:29:19.417
> 
> 标签：mysql

我有一个帮助台电话列表，我正在尝试创建一个旧电话列表，即我们已经超过 2 个月没有收到他们的来电。

我试图按照以下方式做一些事情：

```
select company, closedate 
from opencall 
where closedate < date sub (curdate(), interval 60 day) 
group by company 
```

但这不起作用。

如何返回 2 个月或更长时间没有消息的公司的结果集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:47:46.203

试试这个查询 -

**（编辑示例）**

```
CREATE TABLE opencall(
  company INT(11) DEFAULT NULL,
  closedate DATE DEFAULT NULL
);

-- Populate table, only company=4 has old reecords.
INSERT INTO opencall VALUES 
  (1, '2012-09-18'),
  (1, '2012-06-05'),
  (1, '2012-08-18'),
  (2, '2012-09-13'),
  (2, '2012-08-04'),
  (4, '2012-05-12'),
  (4, '2012-04-11');

SELECT t1.company, t1.closedate FROM opencall t1
  JOIN (SELECT company, MAX(closedate) max_closedate
       FROM opencall
       GROUP BY company
       HAVING max_closedate < CURDATE() - INTERVAL 60 DAY
       ) t2
    ON t1.company = t2.company;

+---------+------------+
| company | closedate  |
+---------+------------+
|       4 | 2012-05-12 |
|       4 | 2012-04-11 |
+---------+------------+ 
```

# javascript - 如何在 html5 画布中添加放大镜（缩放）功能？

> ID：12476133
> 
> 赞同：2
> 
> 时间：2012-09-18T11:29:27.030
> 
> 标签：javascript, html

我正在使用 jquery loupe 插件来显示新 div 中较小图像的放大版本。但是在画布上使用相同的插件时，插件不起作用。有什么建议么 ？？

# c# - 如何在 Umbraco 中使用 DynamicNode

> ID：12476137
> 
> 赞同：0
> 
> 时间：2012-09-18T11:29:37.500
> 
> 标签：c#, asp.net, umbraco

我在 Umbraco 中看到了一些关于 DynamicNode 的示例。但我不明白如何使用这些。

谁能告诉我我必须做哪些参考才能使用 DynamicNode？

我正在使用 C#、ASP.NET 网络表单和 Umbraco 4.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T23:46:59.060

看一下：

[Razor DynamicNode 备忘单](http://our.umbraco.org/projects/developer-tools/razor-dynamicnode-cheat-sheet)

您可以在页面右下角看到引用（使用）：

```
@using umbraco.MacroEngines
@inherits umbraco.MacroEngines.DynamicNodeContex 
```

也许您需要添加 uComponents 库（其中一部分现在位于 umbraco 核心上，但我认为它是从 4.​​8.0 开始的）。

# sql - 如何使有限数量的记录（单个值）易于比较 CASE WHEN

> ID：12476138
> 
> 赞同：0
> 
> 时间：2012-09-18T11:29:39.667
> 
> 标签：sql, sql-server, sql-server-2008

我有 5000 条记录，其中两个字段包含`Categories`和`SubCategories`。只有（小）有限数量的可能值。这些保存在`tblCategory`,中`tblSubCategory`，它们没有链接（也不需要链接）。请注意，主表中的`Categories`/确实经常更改。`SubCategories`

我想在我的视图中添加一个标志，通过检查表的内容来检查每条记录中的`categories`/是否有效。/`subcategories`表很少会改变。`Categories``SubCategory`

我只想要类似的东西 `CASE WHEN tblRecords.Category is in tblCategory.Category THEN 0 ELSE 1 END AS errCategory`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:35:59.180

尝试这个：

```
CASE WHEN (SELECT COUNT(Category) 
        FROM tblCategory WHERE 
       tblCategory.Category = tblRecords.Category) > 0 
THEN 0 ELSE 1 END AS errCategory 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:45:09.017

外连接可能比子查询执行得更好：

```
select tblRecords.*,
       case when tblCategory.Category is null 
            then 0 
            else 1 
        end IsCategoryValid,
       case when tblSubCategory.SubCategory is null 
            then 0 
            else 1 
        end IsSubCategoryValid
  from tblRecords
  left join tblCategory
    on tblRecords.Category = tblCategory.Category
  left join tblSubCategory
    on tblRecords.SubCategory = tblSubCategory.SubCategory 
```

如果您认为 null Category/SubCategory 有效，则需要为案例添加适当的条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T11:35:08.840

这样的事情可能会奏效。有一些定制工作..但很简单..我不知道你想做什么。

```
select 
  ....
  ,case when cat.found>0 then 0 else 1 end as errCategory
from tblRecords tr
join ......
...........
cross apply (select count(*) from tblCategory tc where tc.Category = tr.Category) cat(found) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T11:45:17.340

我会使用这样的外部联接：

```
 select <data>, 
     case when b.Category is null then 1 else 0 end as CategoryError,
     case when c.SubCategory is null then 1 else 0 end as SubCategoryError
   from tblRecords a
   left outer join tblCategory b on a.Category = b.Category
   left outer join tblSubCategory c on a.SubCategory = c.SubCategory 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T11:48:14.503

为什么你会希望一个类别**无效**？要始终保持有效，只需使用正确的 FK。子类别同上。

如果您确实希望能够存储可能暂时无效的类别，请在与充当 FK 的子端点的字段**分开的字段中执行此操作。**当需要对其进行验证时，只需将其移至 FK 覆盖的区域即可。

# ios - 向 Apple 提交 ios 应用程序时，导入的配置文件不包含身份* 错误

> ID：12476144
> 
> 赞同：3
> 
> 时间：2012-09-18T11:29:56.503
> 
> 标签：ios, ipad

我正在尝试向 AppStore 提交应用程序。起初，我准备使用 iTunesConnect 上传应用程序。这一步似乎运作良好。之后我去了xcode并尝试提交申请。当我在存档页面的 xcode 管理器窗口时，我按分发，提交到 ios 应用商店，然后我收到错误没有身份可用于签名。然后我去导入开发配置文件，我选择以 .developmentprofile 结尾的配置文件，然后我收到错误：导入的配置文件不包含身份。然后我去下载实体，我收到错误：管理员必须在之前请求身份它们被下载。我是管理员。我如何请求身份？有没有其他方法可以解决这个错误？如果您能帮助我解决这个错误，我将不胜感激？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T22:47:36.313

我有同样的问题：我重置了我的机器，当我再次尝试时它工作了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T13:30:38.820

请按照以下页面中的说明进行操作：

[应用提交 - iOS 开发者库](https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/SubmitYourApp/SubmitYourApp.html#//apple_ref/doc/uid/TP40011375-CH7-SW1)

# sql-server - 将数据插入没有主键的表中？

> ID：12476146
> 
> 赞同：1
> 
> 时间：2012-09-18T11:30:04.073
> 
> 标签：sql-server, primary-key

我很惊讶地知道 SQL Server（我测试了 2008 R2 版本，但这似乎也适用于早期版本）允许将数据插入到没有定义主键（因此是聚集索引）的表中。

这怎么可能以及如何为这些表物理存储数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T11:35:40.850

有用的链接在这里：

[http://www.sqlmag.com/blog/sql-server-questions-answered-28/sql-server/what-happens-if-i-drop-a-clustered-index-137109](http://www.sqlmag.com/blog/sql-server-questions-answered-28/sql-server/what-happens-if-i-drop-a-clustered-index-137109)

> 问：我听说聚簇索引是“数据”，但我不完全明白这是什么意思。如果我删除聚集索引，我会丢失数据吗？
> 
> A：我经常被问到这个问题，我发现索引结构容易让人迷惑；索引看起来很神秘，因此无意中被认为非常复杂。一个表可以在内部存储有或没有聚集索引。如果表没有聚集索引，则称为堆。如果表有聚集索引，它通常被称为聚集表。创建聚集索引时，SQL Server 会临时将堆中的数据复制并排序为聚集索引键顺序（因为键定义了数据的顺序），并删除与堆关联的原始页面。从现在开始，SQL Server 将通过双向链表和用于导航到数据中特定点的 B+ 树来保持逻辑顺序。

# cordova - 向 Phonegap 应用程序发送推送通知

> ID：12476148
> 
> 赞同：0
> 
> 时间：2012-09-18T11:30:10.447
> 
> 标签：cordova, push-notification, phonegap-plugins, urbanairship.com

我正在使用 Cordova 2.0 和 UrbanAirship 的 phonegap 插件。

我正在考虑从网页（而不是 UrbanAirship 仪表板）向用户发送推送通知，并发现这些文档让我相信这是可能的。

[推送通知](https://urbanairship.com/docs/introduction.html)， [安卓](https://urbanairship.com/docs/push.html)， [iOS](https://urbanairship.com/docs/getting_started_ios_push.html)

我在想，如果我接收消息并使用 API 调用，它应该可以工作。

我的问题有两个部分，首先我需要两个单独的 Android 和 iOS 调用吗？其次，我可以向在我的应用程序中选择了最喜欢的东西的一组用户发送通知吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:10:08.030

我正在做类似的事情，我在 Wordpress 管理员中构建了一个页面，供客户端从那里发送推送通知。它使用广播 API 和 UA 的 PHP 库。使用他们的库非常简单。您只需包含该库，然后为每个平台单独调用，例如：

```
$airship = new Airship(APP_KEY, SECRET_KEY);
$airship->broadcast(array('android' => array('alert' => $msg)));
$airship->broadcast(array('aps' => array('alert' => $msg))); 
```

如果您想向用户发送特定消息，您需要让您的应用程序调用您的服务器，以便您可以记录他们的 APID (Android) 或他们的设备令牌 (iOS)。然后你可以使用UA的[Push API](https://docs.urbanairship.com/display/DOCS/Server%3a+iOS+Push+API)来发送消息。您只需点击一组 APID 或设备令牌，并使用相同的 PHP 库。他们也有[其他语言的库](https://docs.urbanairship.com/display/DOCS/Server%3a+Libraries)。

# css - 使用 p:layout 在整个页面上正确显示 p:blockUI

> ID：12476150
> 
> 赞同：0
> 
> 时间：2012-09-18T11:30:11.933
> 
> 标签：css, jsf, layout, primefaces

我有以下布局：

```
<h:body>
    <p:outputPanel layout="block" id="page" style="width:100%;height:100%;">
        <h:panelGroup layout="block">

            <p:layout fullPage="true">
                <p:layoutUnit id="top" position="north" size="60">
                    ...
                </p:layoutUnit>

                <p:layoutUnit id="left" position="west" size="145" header="Menu" resizable="true" collapsible="true">
                    ...
                </p:layoutUnit>

                <p:layoutUnit id="center" position="center">
                    ...
                </p:layoutUnit>

            </p:layout>
        </h:panelGroup>
    </p:outputPanel>
</h:body> 
```

在中心布局单元中，我定义了一些 blockUI 组件：

```
<p:blockUI block=":page" trigger="searchButton"> 
```

我想阻止整个页面，但是带有块层的 div 在 layoutUnit div 下。所以我只能在布局单元之间的空间中看到这个 blockUI 层，我想在顶部看到它作为第一层。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:26:02.023

添加显示：块；像这样的 outputPanel 样式：

```
<p:outputPanel layout="block" id="page" style="display:block;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:25:03.827

为什么不阻止`p:layout`而不是将其包装在 a 中`div`并阻止包装器？

```
<p:layout id="page" ...

<p:blockUI block=":page" ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:00:36.033

关于primefaces用户指南如下： -

> ### 整页布局中的表单
> 
> 使用表单和整页布局时，避免使用包含 layoutunits 的表单，因为生成的 dom 可能不一样。**所以以下是无效的**。

```
<p:layout fullPage="true">
<h:form>
    <p:layoutUnit position="west" size="100">
        <h:outputText value="Left Pane" />
    </p:layoutUnit>
    <p:layoutUnit position="center">
        <h:outputText value="Right Pane" />
    </p:layoutUnit>
</h:form> 
```

> ***布局单元必须有它自己的形式***，也避免因为同样的原因尝试更新布局单元，而是更新它的内容。

然后我们无法管理 p:layout 或 p:layoutUnit，因为它们不在表单下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-18T14:47:38.043

该问题应被接受为最佳答案。事实上，它的工作原理与发布的一样。布局块或样式 display:block 不是必需的，它已经是 p:outputPanel 的默认设置。但是宽度和高度很重要。

所以我最终使用：

```
<p:outputPanel id="page" style="width:100%;height:100%;"> 
```

# actionscript-3 - 在 ActionScript 3.0 中使用静态字段的缺点

> ID：12476151
> 
> 赞同：0
> 
> 时间：2012-09-18T11:30:11.513
> 
> 标签：actionscript-3, flash

我有一个用 ActionScript 3.0 编写的应用程序。它有几个屏幕。所有屏幕都是独一无二的。我不需要在运行时创建新屏幕。

我发现通过引用其屏幕的静态变量访问屏幕非常舒适。这种方法有一些缺点还是这是常见的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:09:19.950

我不知道你的几个屏幕是什么意思。但如果不是，您应该使用图层，这样您可以随时通过 AS3 管理它们的可见性和子级。

# javascript - Facebook 应用程序中的应用程序配置错误不允许给定 URL

> ID：12476160
> 
> 赞同：0
> 
> 时间：2012-09-18T11:30:27.513
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我很想使用 FB.api 发布状态。但是收到类似“Facebook 应用程序中的应用程序配置错误不允许给定 URL”之类的错误。我在 Google 中搜索过这个。我知道重定向 uri 应该与 Facebook 应用程序的网站 url 相同。但是在我的代码中，我没有使用重定向 uri。这是我的代码

```
 <html>
  <body>
 <div id="fb-root"></div>
      <script>
    window.fbAsyncInit = function() {
     FB.init({
    appId      : 'ID', // App ID
  channelUrl : 'http://localhost/APP/chnel.php', // Channel File
  status     : true, // check login status
  cookie     : true, 
  xfbml      : true  // parse XFBML
   });

 // Additional initialization code here

    FB.login(function(response) {
     if (response.authResponse) {
    console.log('Welcome!  Fetching your information.... ');
      FB.api('/me', function(response) {
     console.log('Good to see you, ' + response.name + '.');
      });
        } else {
 console.log('User cancelled login or did not fully authorize.');
         }
      });
     };

      // Load the SDK Asynchronously
       (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "http://connect.facebook.net/en_US/all.js";
       ref.parentNode.insertBefore(js, ref);
        }(document));
    </script>
  </body>
  </html> 
```

那么我该如何解决这个问题。我只在 localhost 中开发应用程序

# c# - 想手动绑定reportviewer和sql查询

> ID：12476167
> 
> 赞同：1
> 
> 时间：2012-09-18T11:30:54.583
> 
> 标签：c#, datagrid, reportviewer

我想将 ReportViewer 与我执行的查询绑定，就像我们对 DataGridView 所做的那样，因此表单将包含一个文本框和一个按钮。当我在文本框中输入学生 ID 并单击按钮时，它必须从表中获取特定记录并以收据的形式在报告查看器中显示。我从来没有使用过 ReportViewer，所以我不知道如何以及从哪里开始，如果你能给我提供一些例子或者只是写一个我认为我可以管理的粗略蓝图。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:37:14.927

ReportViewer 显示报告，而不是绑定数据。为了显示收据，您需要创建一个 .rdl 或 .rdlc 文件（取决于您使用的是 WinForms 还是 WebForms）。

您的报告定义将存储在 .rdl 或 .rdlc 文件中。您可以将查询定义存储在 .rdl 文件中，并在您显示报告时执行。您可以在可以提示您输入的查询和报告中设置参数。

除此之外，具体取决于这是 WinForms 还是 WebForms 报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:37:45.157

但是我可以给你一个提示`Local Report`尝试像这样绑定它，这个例子接受参数`FromDate`并`ToDate`相应地使用 and 获取数据`EntiyDataSource`。

**页面.aspx**

```
 <rsweb:ReportViewer ID="ReportViewer1" runat="server"
 Height="600px" SizeToReportContent="True"
        Width="800px" Font-Names="Verdana" Font-Size="8pt" InteractiveDeviceInfos="(Collection)"
        WaitMessageFont-Names="Verdana" WaitMessageFont-Size="14pt">
        <LocalReport ReportPath="Report.rdlc">
            <DataSources>
                <rsweb:ReportDataSource DataSourceId="ObjectDataSource1" Name="DataSet1" />
            </DataSources>
        </LocalReport>
    </rsweb:ReportViewer>
    <asp:EntityDataSource ID="EntityDataSource2" runat="server" 
        ConnectionString="name=FooEntities" DefaultContainerName="FooContainerEntities" 
        EnableFlattening="False" EntitySetName="Foo_table">
    </asp:EntityDataSource>
    <asp:EntityDataSource ID="EntityDataSource1" runat="server">
    </asp:EntityDataSource>
    <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" 
        SelectMethod="GetList" TypeName="model">
        <SelectParameters>
            <asp:Parameter DefaultValue="" Name="dateFrom" Type="DateTime"></asp:Parameter>
            <asp:Parameter DefaultValue="" Name="dateTo" Type="DateTime"></asp:Parameter>
        </SelectParameters>
    </asp:ObjectDataSource> 
```

**代码背后**

```
protected void Button1_Click(object sender, EventArgs e)
{
    List<ListData> listData = new List<ListData>();
    DateTime dateFrom = Convert.ToDateTime(TextBox1.Text.Trim());
    DateTime dateTo = Convert.ToDateTime(TextBox2.Text.Trim());
    ReportViewer1.LocalReport.ReportPath = "Report.rdlc";
    ReportParameter[] reportParameter = new ReportParameter[2];
    reportParameter[0] = new ReportParameter("dateFrom", dateFrom.ToShortDateString());
    reportParameter[1] = new ReportParameter("dateTo", dateTo.ToShortDateString());
    ReportViewer1.LocalReport.SetParameters(reportParameter);
    ReportViewer1.LocalReport.Refresh();       

} 
```

# visual-c++ - 更改过滤器的渲染大小显示错误

> ID：12476170
> 
> 赞同：0
> 
> 时间：2012-09-18T11:31:04.660
> 
> 标签：visual-c++, directshow

我试图在我的应用程序中制作一些东西，由 c++ directshow 我想从 640x480 更改默认渲染大小（驱动程序营地大小），但它告诉我这个大小不可用，但在 amcap 中它是如何工作的？我试图通过使用来停止渲染，`mediaControl->stop();`但它似乎不起作用这是一个屏幕截图 [在此处输入链接描述](http://1.bp.blogspot.com/-ST36bZ97eXI/UFhZfOR7OMI/AAAAAAAAADs/uqvpkw25Y8Q/s1600/filter.png)

您可以在我的博客中找到有关它的更多信息，在 [此处输入链接描述](http://mydirectshow.blogspot.com/)

好的，我在这里添加了一些代码

```
hr=pConfig->QueryInterface(IID_ISpecifyPropertyPages,(void**) &pSpec);//," page ");
        if(SUCCEEDED(hr))
        {
        hr=pSpec->GetPages(&cauuid);
        if( SUCCEEDED(hr) && cauuid.cElems>0){

            this->releaseRender();
            checkIt( OleCreatePropertyFrame(this->owner, 30, 30, NULL, 1,
                (IUnknown **)&pConfig, cauuid.cElems,
                (GUID *)cauuid.pElems, 0, 0, NULL),"stuff ");

            CoTaskMemFree(cauuid.pElems);

        } 
```

但是当我单击要更改的内容时，它说您无法执行此操作，我正在使用 IbaseFilter 之类的源过滤器，我试图从 iGraphBuilder 中删除此过滤器

```
this->graphB->RemoveFilter(this->srcFilter); 
```

# php - 获取“动态”时区之间的等效时间

> ID：12476178
> 
> 赞同：0
> 
> 时间：2012-09-18T11:31:59.823
> 
> 标签：php, web-services, postgresql

我有一个`providers`包含三列的表（包含更多列，但在这种情况下并不重要）：

*   `starttime`, 您可以联系他的开始时间。
*   `endtime`，您可以联系他的最后一小时。
*   `region_id`, 提供者所在的地区。美国：加利福尼亚、德克萨斯等 英国：英格兰、苏格兰等

`starttime`并且`endtime`是没有时区列的时间，但是，“间接地”，它们的值具有提供者所在区域的时区。例如：

```
starttime | endtime  | region_id (time zone of region) | "real" st | "real" et
----------|----------|---------------------------------|-----------|-----------
 03:00:00 | 17:00:00 |     1     (EGT => -1)           | 02:00:00  | 16:00:00 
```

通常我需要获取时间范围在当前服务器时间范围内的供应商列表（考虑到时区转换）。问题是时区不是“恒定的”，即它们可能会在夏季发生变化。但是，这种变化非常特定于地区，并不总是同时进行：EGT <=> EGST、ART <=> ARST 等。

问题是：

**1.**是否需要使用网络服务每隔一段时间更新地区的时区？有谁知道可以提供服务的网络服务？

**2.**有没有更好的方法来解决这个问题？

提前致谢。

**更新**

我将举一个例子来澄清我想要得到的东西。在表中`providers`，我发现了以下记录：

```
idproviders | starttime | endtime  | region_id
------------|-----------|----------|-----------
      1     |  03:00:00 | 17:00:00 |   23 (Texas)
      2     |  04:00:00 | 18:00:00 |   23 (Texas) 
```

如果我在一月份执行查询，则使用以下信息：

*   服务器时间（UTC 偏移量）= 0 小时
*   德州供应商（UTC 偏移量）= **+1 小时**
*   服务器时间 = 02:00:00

我应该得到以下结果：*idproviders = 1*

如果我在 6 月执行查询，使用以下信息：

*   服务器时间（UTC 偏移量）= 0 小时
*   德州供应商（UTC 偏移量）= **+2 小时**（他们的本地时间没有改变，但他们的时区改变了）
*   服务器时间 = 02:00:00

我应该得到以下结果：*idproviders = 1 和 2*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:59:09.320

您没有提供有关“区域”记录的*任何*详细信息，除了它们具有 ID 的事实。

不过，您可以在表中添加一列`timezone varchar NOT NULL`（`regions`我假设您有一个）。您需要为您拥有的每个区域分配一个[时区名称。](http://en.wikipedia.org/wiki/List_of_tz_database_time_zones)这可能不是一项简单的任务。

完成此操作后，您可以使用以下查询找到哪些提供商在营业时间内：

```
SELECT p.* FROM providers AS p LEFT JOIN regions AS r ON (r.id = p.region_id)
WHERE (now() AT TIME ZONE r.timezone)::time BETWEEN p.start_timestamp AND p.end_timestamp; 
```

`now() AT TIME ZONE r.timezone`将当前服务器时间转换为分配给区域的时区。

示例设置：您的服务器在伦敦，您的提供商在巴拿马。
示例案例1：您的服务器时间是2012-01-01 18:00:00。`'2012-01-01 18:00:00' AT TIME ZONE 'America/Panama'`将返回`2012-01-01 13:00:00`巴拿马的当前时间，您可以将其与提供商的`start_timestamp`和进行比较`end_timestamp`。
示例案例 2：您的服务器时间是 2012-08-01 18:00:00，您观察 DST。然而，巴拿马*没有*遵守夏令时，因为它靠近赤道，日长变化不大。尽管如此，`'2012-08-01 18:00:00' AT TIME ZONE 'America/Panama'`将返回巴拿马的正确当前时间：`2012-08-01 12:00:00`，因为 Postgres 知道您在 8 月的时间遵守 DST，而巴拿马的时间没有。

我不知道如何让你更清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:32:37.680

如果你只有一个`time`（而不是`timestamp`）和一个像“Texas”这样的地区，那么你一开始就不走运。不存在这是否应该是夏令时的信息。你不可能知道。

将该字段设为[**`timestamp with time zone`**](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html)( `timestamptz`)，即使您只打算使用该`time`组件。因此，每当有人输入一个值时，它都会在内部转换为 UTC 时间戳（自动考虑 DST），并且您可以获得明确的信息。该值将根据当前时区设置自动显示（适用于世界各地的每个人），并且适合每个人。测试时，您可以简单地将其转换为时间：

```
SELECT start_timestamp::time 
```

这为您提供了等效的*本地* `time`（根据您当前的时区设置）。让一切变得非常容易。
更多解释 PostgreSQL 如何在[这个相关答案](https://stackoverflow.com/a/9576170/939860)中处理时间戳。

# c++ - 关于多线程应用中的 STL 字符串异常

> ID：12476181
> 
> 赞同：1
> 
> 时间：2012-09-18T11:32:08.047
> 
> 标签：c++, string, stl

当我的应用程序运行时，我遇到了一个异常，堆栈如下：

堆栈文本：

```
WARNING: Stack unwind information not available. Following frames may be wrong.
10f3dda0 7c96b3e5 0ab65a08 000000a4 07dd0000 ntdll!DbgBreakPoint
10f3dfc8 7c98fb98 07dd0000 50000161 000000a4 ntdll!LdrAlternateResourcesEnabled+0x2ca6
10f3e04c 7c96b244 07dd0000 50000161 000000a4 ntdll!RtlpNtMakeTemporaryKey+0x749c
10f3e27c 7c939c0c 07dd0000 40000060 000000a4 ntdll!LdrAlternateResourcesEnabled+0x2b05
10f3e4b0 07b1e04e 07dd0000 40000060 000000a4 ntdll!RtlpUnWaitCriticalSection+0xad
10f3e4cc 07aef6a6 000000a4 d14f13ce 10f3e684 Camera!_heap_alloc_base+0x5e [f:\dd\vctools\crt_bld\self_x86\crt\src\malloc.c @ 105]
10f3e514 07aef42f 00000080 00000001 00000000 Camera!_heap_alloc_dbg_impl+0x1f6 [f:\dd\vctools\crt_bld\self_x86\crt\src\dbgheap.c @ 427]
10f3e534 07aef3cc 00000080 00000000 00000001 Camera!_nh_malloc_dbg_impl+0x1f [f:\dd\vctools\crt_bld\self_x86\crt\src\dbgheap.c @ 239]
10f3e55c 07aef351 00000080 00000000 00000001 Camera!_nh_malloc_dbg+0x2c [f:\dd\vctools\crt_bld\self_x86\crt\src\dbgheap.c @ 296]
10f3e57c 07a0e015 00000080 00000001 00000000 Camera!_malloc_dbg+0x21 [f:\dd\vctools\crt_bld\self_x86\crt\src\dbgheap.c @ 160]
10f3e598 079e68e1 00000080 10f3e76c 00000003 Camera!operator new+0x15 [f:\dd\vctools\vc7libs\ship\atlmfc\src\mfc\afxmem.cpp @ 347]
10f3e684 079e5fee 00000080 00000000 10f3e870 Camera!std::_Allocate<char>+0x61 [c:\program files\microsoft visual studio 9.0\vc\include\xmemory @ 43]
10f3e76c 079e5dd7 00000080 d14f1e5a 10f3e96c Camera!std::allocator<char>::allocate+0x2e [c:\program files\microsoft visual studio 9.0\vc\include\xmemory @ 145]
10f3e880 079e5ac3 0000007b 00000000 10f3ea60 Camera!std::basic_string<char,std::char_traits<char>,std::allocator<char> >::_Copy+0xc7 [c:\program files\microsoft visual studio 9.0\vc\include\xstring @ 2093]
10f3e96c 079e4d1c 0000007b 00000000 10f3eb50 Camera!std::basic_string<char,std::char_traits<char>,std::allocator<char> >::_Grow+0x53 [c:\program files\microsoft visual studio 9.0\vc\include\xstring @ 2123]
10f3ea60 079e3e55 10f3ec48 00000000 ffffffff Camera!std::basic_string<char,std::char_traits<char>,std::allocator<char> >::assign+0x8c [c:\program files\microsoft visual studio 9.0\vc\include\xstring @ 1055]
10f3eb5c 079fd484 10f3ec48 d14f1a52 10f3ee94 Camera!std::basic_string<char,std::char_traits<char>,std::allocator<char> >::basic_string<char,std::char_traits<char>,std::allocator<char> >+0x75 [c:\program files\microsoft visual studio 9.0\vc\include\xstring @ 724]
10f3ec88 079fd7a9 10f3ee60 00000000 cccccccc Camera!toLower+0xd4 [e:\tcom\camera\Camera\rtspurl1.cpp @ 61] 
```

我的 tolow 函数如下：

```
string toLower(string str)
{
  char* chartemp=(char*)malloc(str.length()+1);
  memset(chartemp,0,str.length()+1);
  memcpy(chartemp,str.c_str(),str.length());
  strlwr(chartemp);
  string lpUrl=chartemp;
  free(chartemp);
  return lpUrl;
} 
```

我不清楚为什么“return lpUrl”时会发生异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T11:35:02.833

尝试

```
string toLower(string str)
{
    for (size_t i =0; i<str.size(); ++i)
        str[i] = std::tolower(str[i]);
    return str;
} 
```

我不知道您对线程错误的引用，因为您没有显示任何相关信息。

**更新**在这里查看现场演示：http: [//liveworkspace.org/code/1d8b31ff73e2c2c9263ff5299dd4b7cb](http://liveworkspace.org/code/1d8b31ff73e2c2c9263ff5299dd4b7cb)

# php - 根据需要更改注册表的字段 zfcuser zf2 （不同的字段）

> ID：12476182
> 
> 赞同：1
> 
> 时间：2012-09-18T11:32:17.077
> 
> 标签：php, zend-framework2

我正在使用 zf2 创建一个应用程序。我已经成功安装了**zfcuser**。我的应用程序中有两种类型的用户：`Sponsor`和`Itemowner`. 我需要更改注册表，并且我已成功更改。但主要问题是我需要为这两种情况添加不同的字段：

我有两个名为赞助商和所有者的按钮。如果单击所有者，则我需要不同的字段，单击赞助商时，我需要不同的字段。我可以通过在 onBootstrap 方法中添加以下代码来添加字段

```
 $events = $e->getApplication()->getEventManager()->getSharedManager();
        $events->attach('ZfcUser\Form\Register','init', function($e) {
            $form = $e->getTarget();
               $form->add(array(
            'name' => 'name',
            'attributes' => array(
                'type'  => 'text',
                    'id' => 'name',
            ),
            'options' => array(
                'label' => 'Name*',
            ),
                'required' => true,
        ));
        }); 
```

但我不知道如何在这两种情况下实现不同。请提出一些解决方法或技巧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:38:14.117

您不认为将赞助商和所有者注册分开更好吗？

# javascript - JqPlot 饼图 - 更改饼图切片颜色

> ID：12476187
> 
> 赞同：6
> 
> 时间：2012-09-18T11:32:42.303
> 
> 标签：javascript, jqplot, pie-chart

我有一个使用 JqPlot 显示的饼图。我有兴趣改变切片的实际颜色，到目前为止还没有运气。

我遇到了[这个链接](https://groups.google.com/forum/?fromgroups=#!topic/jqplot-users/lUTPySac1nY)并尝试了解决方案，但我不确定我是否将它放在错误的位置（尝试将它插入代码中的几个位置），因为当我将它放入时，饼图没有更长的显示（实际上阻止页面上的其余图表显示）。

这是饼图的javascript代码：

```
$(document).ready(function () {
        var data = [['US',33], ['IE',30], ['GB',23], ['AU',7], ['CA',4], ['RoW',7]];
        var plot1 = jQuery.jqplot('Countries', [data],
        {
            seriesDefaults: {
                // Make this a pie chart.
                renderer: jQuery.jqplot.PieRenderer,
                rendererOptions: {
                    // Put data labels on the pie slices.
                    // By default, labels show the percentage of the slice.
                    sliceMargin: 5,
                    showDataLabels: true,
                }
            },
            legend: { show: true, border: false, /*placement: 'outsideGrid', location: 'w'*/location: 'e', border: 'none' },
            grid: {borderWidth:0, shadow:false, background: '#FFFFFF'}

        }
      );
    }); 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-18T13:50:51.503

您可以应用于`seriesColors`对象，`options`例如：

```
options =
{
    seriesColors: [ "#4bb2c5", "#c5b47f", "#EAA228", "#579575" ]
} 
```

相关文档可以在[jqPlot Options 中找到。](http://www.jqplot.com/docs/files/jqPlotOptions-txt.html)

# android - 如何在android中使用colorstatelist

> ID：12476189
> 
> 赞同：5
> 
> 时间：2012-09-18T11:32:51.257
> 
> 标签：android

我想在 btn_presses、btn_focus 等不同状态下更改按钮文本颜色。

为此，我使用了 colorstatelist.xml，并在 titlebarlayout.xml 的按钮文本中引用了它。但我仍然无法更改按钮的文本颜色。

任何人都知道该怎么做。我在代码的任何地方都会出错。

MainActivity.java

```
public class MainActivity extends Activity implements OnClickListener {

        EditText emailEdit, passwordEdit;
        Button loginButton;
        String email, password;
        TitleBarLayout titlebarLayout;
        String r;
        String rr;

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.login_activity);

            emailEdit = (EditText) findViewById(R.id.etEmail);
            passwordEdit = (EditText) findViewById(R.id.etPassword);

            loginButton = (Button) findViewById(R.id.loginButton);
            loginButton.setOnClickListener(this);

            // titlebarLayout=(TitleBarLayout) findViewById(R.id.titlebar);
            titlebarLayout = new TitleBarLayout(MainActivity.this);
            titlebarLayout.setLeftButtonText("");
            titlebarLayout.setRightButtonText("Logout");
            titlebarLayout.setTitle("iProtect");
            //titlebarLayout.setLeftButtonSize(50,50);
            //titlebarLayout.setRightButtonSize(100,50);
            titlebarLayout.setLeftButtonBackgroundColor(Color.rgb(34,49,64));
            titlebarLayout.setRightButtonBackgroundColor(Color.rgb(34,49,64));
            titlebarLayout.setLeftButtonTextColor(Color.rgb(255,255,255));
            titlebarLayout.setRightButtonTextColor(Color.rgb(255,255,255));

            XmlResourceParser parser =getResources().getXml(R.color.colorstatelist);

                ColorStateList colorStateList;
                try {
                    colorStateList = ColorStateList.createFromXml(getResources(), parser);

                    titlebarLayout.setLeftButtonTextColor(colorStateList);
                } catch (XmlPullParserException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
    //      ColorStateList colorlist=new ColorStateList( new int[][] { new int[] { android.R.attr.state_focused }, new int[0], }, new int[] { Color.rgb(0, 0, 255), Color.BLACK, } );
    //      titlebarLayout.setLeftButtonTextColor(colorlist);

            OnClickListener listener = new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    if (v.getId() == R.id.left_button) {

                    } else if (v.getId() == R.id.right_button) {

                    }
                }
            };
            titlebarLayout.setLeftButtonOnClickListener(listener);
            titlebarLayout.setRightButtonOnClickListener(listener);
        } 
```

标题栏布局.java

```
public class TitleBarLayout {

    private Activity activityRef;
    private View contentView;
    private Button leftButton, rightButton;
    TextView titletext;

    public TitleBarLayout(Activity a) {
        Log.i("TitleBar Layout", "Inside constructor");
        activityRef = a;
        inflateViewsFromXml();
        setListenersOnViews();
        setValuesOnViews();
    }

    private void setValuesOnViews() {
        leftButton.setText("");
        rightButton.setText("");
    }

    private void setListenersOnViews() {
        leftButton.setOnClickListener(listener);
        rightButton.setOnClickListener(listener);
    }

    private final OnClickListener listener = (new OnClickListener() {

        @Override
        public void onClick(View v) {
            activityRef.finish();
        }
    });

    private void inflateViewsFromXml() {
        contentView = activityRef.findViewById(R.id.titlebar);
        rightButton = (Button) contentView.findViewById(R.id.right_button);
        leftButton = (Button) contentView.findViewById(R.id.left_button);
        titletext = (TextView) contentView.findViewById(R.id.title_textview);
    }

    public void setLeftButtonText(int resID) {
        leftButton.setText(resID);
    }

    public void setLeftButtonText(String text) {
        leftButton.setText(text);
    }

    public void setLeftButtonOnClickListener(View.OnClickListener listener) {
        leftButton.setOnClickListener(listener);
    }

    public void setRightButtonText(int resID) {
        rightButton.setText(resID);
    }

    public void setRightButtonText(String text) {
        rightButton.setText(text);
    }

    public void setRightButtonOnClickListener(View.OnClickListener listener) {
        rightButton.setOnClickListener(listener);
    }

    public void setTitle(int resID) {
        titletext.setText("" + resID);
    }

    public void setTitle(String text) {
        titletext.setText(text);
    }

    public void setLeftButtonSize(int width, int height) {
        Log.i("Button" ,"Width"+width);
        leftButton.setWidth(width);
        leftButton.setHeight(height);
    }

    public void setRightButtonSize(int width, int height) {

        Log.i("Button" ,"Width"+width);
        rightButton.setWidth(width);
        rightButton.setHeight(height);
    }

    public void setLeftButtonBackgroundResource(int backgroundResource) {

    }

    public void setRightButtonBackgroundResource(int backgroundResource) {

    }

    public void setLeftButtonBackgroundColor(int backgroundColor) {
        Log.i("Button" ,"COLOR"+backgroundColor);
        leftButton.setBackgroundColor(backgroundColor);
    }

    public void setRightButtonBackgroundColor(int backgroundColor) {
        Log.i("Button" ,"COLOR"+backgroundColor);
        rightButton.setBackgroundColor(backgroundColor);
    }

    public void setLeftButtonTextColor(int textcolor) {
        Log.i("Button" ,"COLOR"+textcolor);
        leftButton.setTextColor(textcolor);
    }

    public void setRightButtonTextColor(int textcolor) {
        Log.i("Button" ,"COLOR"+textcolor);
        rightButton.setTextColor(textcolor);
    }

    public void setLeftButtonTextColor(ColorStateList colorStateList) {
        leftButton.setTextColor(colorStateList);

    }

    public void setRightButtonTextColor(ColorStateList colorStateList) {

    }
} 
```

颜色.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <color name="title_bg_color">#2e4256</color>
    <color name="layout_bg_color">#dcdcdc</color>
    <color name="state_pressed">#ffffff</color>
    <color name="state_selected">#00ff00</color>
    <color name="state_focused">#0000ff</color>

</resources> 
```

标题栏布局.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="@dimen/titlebar_height"
    android:background="@color/title_bg_color"
    android:gravity="center_vertical"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/left_button"
        android:layout_width="@dimen/titlebar_button_width"
        android:layout_height="@dimen/titlebar_button_height"
        android:text=""
        android:clickable="true"
        android:textColor="@color/colorstatelist"
        android:background="@drawable/button_shape_drawable"
        android:layout_marginLeft="10dp"/>

    <TextView
        android:id="@+id/title_textview"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:text=""
        android:textColor="@android:color/white"
        android:textStyle="bold" />

    <Button
        android:id="@+id/right_button"
        android:layout_width="@dimen/titlebar_button_width"
        android:layout_height="@dimen/titlebar_button_height"
        android:text=""
        android:clickable="true"
        android:layout_marginRight="10dp"
        android:background="@drawable/button_shape_drawable"
        android:textColor="@color/colorstatelist" />

</LinearLayout> 
```

颜色状态列表.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:color="@color/state_pressed"/>
    <item android:state_selected="true"
          android:color="@color/state_selected"/>
    <item android:state_focused="true"
          android:color="@color/state_focused"/>
    <item android:color="#808080"/>
</selector> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-03T14:04:23.110

首先，从您的代码中删除所有 XML 解析内容。它添加的只是一些错误。您可以使用两种方法，您应该使用**其中一种**，而不是同时使用。

您的布局 XML 已经设置`android:textColor`为您想要的状态列表。这就是你需要做的。按钮文本将根据其状态自动更改颜色。只需从您的 Java 代码**中删除**所有调用`setTextColor`：目前，这些调用正在用静态颜色替换状态列表。我建议你完全`setLeft/RightButtonTextColor`从你的方法中删除这些方法`TitleBarLayout.java`，然后让你的 IDE 找到对它们的所有调用，然后删除它们。

或者，如果您想从 Java 代码而不是 XML 设置颜色，您只需像这样调用它：-

```
button.setTextColor(getResources().getColorStateList(R.color.colorstatelist)); 
```

不需要 XML 解析。

# php - PHP & Javascript : 在 php 中使用 Javascript 字典

> ID：12476196
> 
> 赞同：0
> 
> 时间：2012-09-18T11:33:22.710
> 
> 标签：php, jquery

我在 javascript 字典中存储了一些键和值

```
var list_of_addressbook_entries = {}; 
```

我在一个 php 页面上传递那个字典

但是当我试图获取 javascript dict 的键和值时

```
 $attendee_list = $_POST['dict_of_externals'];
   $shared_attendee_list = $_POST['list_of_shared_addressbook_entries'];
   $org_attendee_list = $_POST['dict_of_org_users'];

   echo json_encode($attendee_list);

   return false; 
```

作为回应，我只得到`"[object Object]"`

我只想知道如何在 php 中提取值？

在我的 javascript

```
for(key in list_of_addressbook_entries)
        {
          alert("key " + key
             + " has value "
          + list_of_addressbook_entries[key]);
        } 
```

正在打印键和值

更新

```
var list_of_addressbook_entries_privilege = [];
function showDetails(guest_name){
        var user_name = "<?php echo $_SESSION["user_name"]; ?>" ;
        var name = prompt("Please use M for moderator and A for attendee", "Type you name here");
        if (!name == null && !name== '' || name == 'M' || name == 'A'){

        var ahtml='<div  id ="div_id_'+guest_name+'" onclick =remove_addressbook_user("'+guest_name+'") class="addr_list" style="display:block; background: none repeat scroll 0% 0% peachpuff;margin-bottom:1px;">'
        ahtml = ahtml + '<span>'+guest_name+'</span>'
        ahtml = ahtml + '<input type = "hidden" id ="user_id_'+guest_name+'"   value = "'+guest_name+'"  /></div>'
        $(".address_book_list").append(ahtml);
        $("#div_id_"+guest_name).hide();
        list_of_addressbook_entries[guest_name] = name ;
        }
        else{
            alert("You have entered the worong value ");
            return false;
        }
        $('#dict_of_externals').val(list_of_addressbook_entries);

        for(key in list_of_addressbook_entries)
        {
          alert("key " + key
             + " has value "
          + list_of_addressbook_entries[key]);
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:38:26.620

Javascript 在客户端，php 在服务器上执行，如果你想将数据从 javascript 传递到你的服务器，你需要对服务器进行 AJAX 调用或通过表单传递它。

你是如何调用 php 代码的，你是如何将数据传递给服务器的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:52:20.170

正如您可以使用 迭代这对键值一样`for in`，`list_of_addressbook_entries`是一个对象。

您不能将对象放在值属性中。value 属性仅支持字符串。

因此 JS 将您的对象转换为字符串，其字符串表示为`[object Object]`.

如果您想要 JSON 对象的字符串表示，您将使用[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)：

```
$('#dict_of_externals').val(JSON.stringify(list_of_addressbook_entries)); 
```

[`JSON.parse`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)如果您想稍后访问 JSON 对象的属性，则必须使用(或)再次解析字符串[`jQuery.parseJSON`](http://api.jquery.com/jQuery.parseJSON/)，因此我建议将对象保留在内存中，以防您稍后需要访问其属性值。

如果您需要`JSON.stringify`支持 IE<=7，这里有一个小型 JS 库：
[https ://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T11:45:59.970

答案很简单：

php 函数 json_encode 正在对对象进行编码，因此您正在回显一个 json 对象，这就是 php 回显 [object Object] 的原因。

如果您想要 json 表示法输出中的输出，您必须执行类似的操作

```
//in case you passed the $attendee_list without encoding
$json_obj = json_encode($attendee_list);

echo json_decode($json_obj);

//otherwise
echo json_decode($attendee_list); 
```

希望对你有帮助，加油

# php - 比较嵌套数组是否相等

> ID：12476200
> 
> 赞同：0
> 
> 时间：2012-09-18T11:33:27.767
> 
> 标签：php, arrays, multidimensional-array

给定以下数组：

```
$array[0]['tid'] = 'valueX';
$array[1]['tid'] = 'valueY';

$array2[0]['tid'] = 'valueZ';
$array2[1]['tid'] = 'valueY'; 
```

我的目标是检查是否有任何值`$array`在`$array2`

以下是我想出的，但我想知道是否有更简单/更好的解决方案？也许只获取数组的值或删除`'tid'`键的东西。

```
foreach($array as $arr) {
    $arr1[] = $arr['tid'];
}

$flag = 0;

foreach($array2 as $arr) {
    if( in_array( $arr['tid'], $arr1 ) ) {
        $flag++;
    }
}
echo $flag; // number of duplicates 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T11:38:47.437

一种方法可以解决这个问题：

```
$extractor = function($row) { return $row['tid']; };
echo "Duplicates: ".count(array_intersect(
    array_map($extractor, $array),
    array_map($extractor, $array2)
)); 
```

这样做是`tid`从两个数组的每个数组元素中提取值，然后将结果相交（以查找两个数组中存在的值）。根据您打算做什么，稍微调整一下或保留中间结果可能是有意义的。

[**看到它在行动**](http://codepad.viper-7.com/OvdzbU)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:38:16.980

您可以尝试使用[array_map](http://php.net/manual/en/function.array-map.php)从数组中提取值。

然后可以使用[in_array](http://php.net/manual/en/function.in-array.php)函数循环转换后的数组。更好的是，您可以使用[array_intersect](http://php.net/manual/en/function.array-intersect.php)它将返回两个转换后的数组共有的元素。

您可能还会发现，[扁平化](https://stackoverflow.com/questions/1319903/how-to-flatten-a-multidimensional-array)您的数组有时会产生一个快速而肮脏的解决方案，尽管 PHP（据我所知）没有为此的内置函数，链接发布的有几个变体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T11:40:20.553

如果您只想有多少与您发布的代码匹配

您可以尝试使用[array_map](http://php.net/manual/en/function.array-map.php)来提取值

`array_map(function($array){return $array['tid']}, $inputArray())`

# android - android中的JSON解析在JSONArray中有JSON对象

> ID：12476203
> 
> 赞同：1
> 
> 时间：2012-09-18T11:33:33.817
> 
> 标签：android, json

如何解析以下 JSON？

```
{
    "Servicedata": [
        {
            "services_id": "1",
            "services_servicename": "a",
            "service_subscribed": "true"
        },
        {
            "services_id": "5",
            "services_servicename": "a",
            "service_subscribed": "false"
        },
        {
            "services_id": "2",
            "services_servicename": "b",
            "service_subscribed": "true"
        },
        {
            "services_id": "3",
            "services_servicename": "c",
            "service_subscribed": "false"
        },
        {
            "services_id": "4",
            "services_servicename": "d",
            "service_subscribed": "false"
        },
        {
            "services_id": "6",
            "services_servicename": "service for test",
            "service_subscribed": "false"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T11:38:27.120

[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

```
JSONObject object = new JSONObject(yourstring);
JSONArray values = object.getJSONArray("Servicedata");
for(int i = 0 ; i < values.length(); i++){
    JSONObject object1 = values.get(i);
    String id = object1.getString("services_id");
    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T12:47:32.117

[http://dheerajvermadeveloper.blogspot.in/2014/11/android-json-tutorial.html](http://dheerajvermadeveloper.blogspot.in/2014/11/android-json-tutorial.html)

通过这个链接有完整的 Json Parsing 教程

# performance - Symfony2和doctrine2的简单DQL查询性能

> ID：12476208
> 
> 赞同：0
> 
> 时间：2012-09-18T11:33:50.447
> 
> 标签：performance, symfony, doctrine-orm

我正在为性能非常重要的网站开发前端。快速开发也是关键，所以我决定使用 symfony2 并使用 Doctrine2 ORM。

当我从 symfony 请求一个简单页面（没有 DB 请求）时，它会在 200 毫秒内响应。一旦我通过 Doctrine 从数据库请求任何东西，它就会跳到 ~1300 毫秒。

我很感激有时间来补水记录，但这是我补水阵列。

这是控制器代码。模板只输出数组计数。

```
$repository = $this->getDoctrine()->getManager()->getRepository('AcmeProductBundle:Product');
    $qb = $repository->createQueryBuilder('g');
    $qb->addOrderBy('g.id', 'DESC');

    $ret = null;
    $query = $qb->getQuery();
    //$query->useResultCache(true, 3600);
    $ret = $query->getArrayResult();
    return $this->render('AcmeCatalogBundle::test.html.twig', array('id' => count($ret))); 
```

查看 symfony profiler 工具栏中的 Timline，控制器耗时约 1000 毫秒，而学说耗时约 1 毫秒。但是如果我注释掉 getResults() 行，控制器会跳到 ~45ms。

这是正常的吗？我能做些什么呢？

**更新** 我运行了以下测试，它表明第一个查询是所有时间都丢失的地方：

```
$ret = array();
    $start = microtime(true);
    for ($i = 1; $i <= 10; $i++) {
        $time_start = microtime(true);

        $query = $em->createQuery('SELECT p FROM AcmeProductBundle:Product p WHERE p.id = 1');
        $products = $query->getResult();

        $time_end = microtime(true);
        $ret[$i] = $time_end - $time_start;
    }
    $end = microtime(true);
    $ret['Total'] = $end - $start;

    return $this->render('AcmeCatalogBundle::test.html.twig', array('ret' => $ret)); 
```

结果：

1.  1.0216779708862
2.  0.00091791152954102
3.  0.00082588195800781
4.  0.00081419944763184
5.  0.00081706047058105
6.  0.00081610679626465
7.  0.00081491470336914
8.  0.00081706047058105
9.  0.00043296813964844
10.  0.0004270076751709

总计 - 1.0283808708191

可能是数据库连接或实体管理器没有被池化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:39:11.813

所以正如你们所建议的，它原来是我的环境。也就是说，我在 symfony 中使用 'localhost' 作为 database_host。将其更改为“127.0.0.1”会有所不同。我现在适当地快速运行查询。

感谢您的评论人们。

[http://www.bluetopazgames.com/uncategorized/php-mysql_connect-is-slow-1-second-for-localhost-windows-7/](http://www.bluetopazgames.com/uncategorized/php-mysql_connect-is-slow-1-second-for-localhost-windows-7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:46:00.500

您猜对了，实体经理在这里采取行动。当你发出`$query->getResult()`默认的水合模式时`Query::HYDRATE_OBJECT`。对于这种模式，Doctrine2 会将每一行数据映射到实体对象（这对于复杂的实体关系可能非常昂贵）并将它们加载到实体管理器。但是，如果您再次发出相同的查询，它会将行标识符与实体管理器中加载的实体对象的标识符相匹配。如果匹配 Doctrine2 将不做映射，如果不匹配将做映射和加载。

如果多次发出相同的查询，这很有用。例如，各种服务可以加载用户数据并在页面的各个部分显示用户信息。如果您确定实体对象将在一个请求周期中仅加载和使用一次，那么您可以使用它`$query->getArrayResult()`来避免不必要的结果集映射。也就是说，如果使用得当，ORM 会很有效:)。有关更多信息，请参阅[文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/unitofwork.html#how-doctrine-keeps-track-of-objects)。

# c# - 单元测试基于 umbraco 的站点

> ID：12476209
> 
> 赞同：3
> 
> 时间：2012-09-18T11:33:51.803
> 
> 标签：c#, unit-testing, mocking, inversion-of-control, umbraco

有没有办法测试依赖 umbraco 的代码。即在我的模型中，我正在调用 getNode 或使用 uquery 来获取节点，但我无法测试这些类，因为它们依赖于 umbraco ...

我想解决这个问题的一种方法是模拟，但你怎么能模拟 uquery 或 nodefactory？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:50:29.690

我不相信 CMS 系统自然适合单元测试，因为输出并不总是像业务逻辑应有的那样枯燥无味。

但是（总是有一个但是）你可以模拟节点的生成——至少操纵它们并检查错误。一个示例单元测试是创建一个包含一些必填字段和一些可选字段的文档类型 - 然后仅在将可选字段设为必填之前用必填字段填充内容节点 - 这应该会出错。不过，我认为您不能通过代码强制添加属性。

（另请参阅： [如何从代码向 Umbraco 中的文档类型添加属性？ http:](https://stackoverflow.com/questions/10724473/how-to-add-a-property-to-a-document-type-in-umbraco-from-code) [//our.umbraco.org/wiki/reference/api-cheatsheet/creating-a-document](http://our.umbraco.org/wiki/how-tos/working-with-document-types) [http://our.umbraco.org](http://our.umbraco.org/wiki/reference/api-cheatsheet/creating-a-document) [/wiki/how-tos/working-with-document-types](http://our.umbraco.org/wiki/how-tos/working-with-document-types) ）

就像是：

```
var alias = "aliasOfOptionalField";
var value = string.Empty;
var docType = "Textpage";

DocumentType dt = DocumentType.GetByAlias(docType); 
User author = User.GetUser(0); 
Document doc = Document.MakeNew("My new document", dt, author, 1018); 
doc.Publish(author);
umbraco.library.UpdateDocumentCache(doc.Id);

var newProperty = dt.AddPropertyType(new DataTypeDefinition(-49), alias, "test prop");

if (doc.HasProperty(alias))
{
   doc.getProperty(alias).Value = value;
   doc.Publish(new User(0));
   library.UpdateDocumentCache(doc.Id);
} 
```

# html - 无法让 HTML5 AppCache 正常工作

> ID：12476210
> 
> 赞同：2
> 
> 时间：2012-09-18T11:33:57.140
> 
> 标签：html, html5-appcache

我正在尝试向我维护的应用程序添加一些离线缓存。这是我第一次不得不使用 AppCache，所以我决定先用一个小型演示站点来测试它。到目前为止，我还无法让其中的离线部分正常工作。Chrome 似乎正在缓存 index.php，因为打印出的日期/时间在页面上永远不会改变，即使我在脚本中发送所有这些无缓存标头，尽管在 Firefox 中日期正在正确更新。当我离线（通过禁用我的网络适配器）时，Chrome 继续显示缓存的 index.php 而不是清单指定的 offline.html，尽管我在控制台中收到以下错误：

> 应用程序缓存错误事件：清单获取失败 (-1) [http://html5test.g1testserver/manifest.appcache](http://html5test.g1testserver/manifest.appcache)

Firefox 只是显示“无法连接”对话框。网站的布局和文件内容都列在下面。

场地布置：

```
/root/
-  manifest.appcache
-  index.php
-  offline.html
-  .htaccess 
```

manifest.appcache：

```
CACHE MANIFEST
# version 3

CACHE:
offline.html

NETWORK:
index.php

FALLBACK:
/ offline.html 
```

索引.php：

```
<?php
    header("Expires: Tue, 03 Jul 2001 06:00:00 GMT");
    header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
    header("Cache-Control: no-store, no-cache, must-revalidate, max-age=0");
    header("Cache-Control: post-check=0, pre-check=0", false);
    header("Pragma: no-cache");
echo '<!DOCTYPE html>
<html manifest="/manifest.appcache">
<head>
    <title>HTML5 Test</title>
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE" />
</head>
<body>

<h1>This is index.php: '.date('d/m/Y H:i:s').'</h1>
</body>
</html>
';
?> 
```

离线.html：

```
<!DOCTYPE html>
<html manifest="/manifest.appcache">
<head>
</head>
<body>
    <h1>This will be served in place of index.php</h1>
</body>
</html> 
```

.ht 访问：

```
AddType text/cache-manifest .appcache 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:48:02.027

您不需要在`<html>`标签内包含清单。仅当您要缓存**该**页面时才需要这样做。在 doctype 中不包括清单并不意味着 .appcache 不会被调用/更新。

因此，如果您希望在 index.php 离线时作为后备运行 offline.html，则不要缓存 index.php。

HTML5Rocks 有一些关于如何在[此处使用 appcache 的重要信息](http://html5rocks.com/en/tutorials/appcache/beginner)

# c++ - C++中malloc的自定义实现

> ID：12476215
> 
> 赞同：-3
> 
> 时间：2012-09-18T11:34:03.460
> 
> 标签：c++, c, memory, malloc, free

我遇到了一个面试问题，他们要求在 C++ 中实现 malloc() 和 free 函数。

一开始声明了一个大小为 50000 的 char 数组（50000 字节）。假设这是堆内存，编写 malloc 和 free 函数来分配内存块并释放内存。

任何人都可以为我提供 C++ 工作/伪代码或只是解释机制？（显然代码会使它更容易理解）。

谢谢，罗希特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T11:40:47.040

虽然编写生产级动态内存分配器是一项非常艰巨的任务，但编写玩具分配器却很简单。这个问题显然是为了测试你的技能，但从别人的作品中寻找灵感仍然是公平的。

Kernighan & Ritchie 的“The C Programming Language”[包含一个简单](http://www.julienlecomte.net/simplix/sh.php?f=src/lib/stdlib.c)的`malloc`. 研究它并考虑其设计和实施的影响。考虑如何改进它以更好地执行、减少碎片或处理多个线程。之后，编写自己的玩具分配器并回答出现的任何问题应该不再困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T11:58:40.117

有几种不同的算法可以使用。对于这么小的内存，我只需在每个块前面加上一个指向下一个块的指针，以及一个指示它是分配还是释放的标志。分配包括找到足够大的空闲块，必要时将其拆分，并将返回的块标记为已分配。免费包括将块标记为空闲。在某些时候，您还必须合并块：如果两个空闲块相互跟随，它们将合并为一个。（我在实现的分配过程中这样做了。）

上述算法本身并不难。真正的诀窍是让所有不同的演员阵容都正确。这是非常低级编程的一个很好的练习。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-09-18T11:39:41.770

我之前没有测试过，但我认为可以通过使用 new 关键字和模板来支持通用状态来创建所需类型的数组，但我会按照这个问题来找出 C++ 英雄的回应。

# shell - 当文件被移动到 shell 脚本中的另一个目录时，我如何仍然获取文件的内容？

> ID：12476218
> 
> 赞同：0
> 
> 时间：2012-09-18T11:34:12.287
> 
> 标签：shell, unix

我创建了一个指向该文件的符号链接，然后将该文件移动到另一个名称不同的地方。如何通过符号链接获取旧文件的内容？目前，符号链接无效，因为目标不再存在。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:54:45.383

硬链接指向文件内容（实际上是 inode）。符号链接指向路径名。如果旧名称已消失，则您无法使用该链接访问该文件。

# django - 如何使用 Angular.js 前端针对 Django 应用程序运行我的 e2e 测试场景？

> ID：12476220
> 
> 赞同：4
> 
> 时间：2012-09-18T11:34:26.310
> 
> 标签：django, angularjs, jasmine

我想使用基于角种子的前端进行端到端测试，如文档 Angular.js 中所述。后端是使用 django 编写的。当我尝试使用 jstestdriver（和代理选项）时，我收到来自码头的消息，说不允许对此 URL 的 GET 请求。

我怎样才能解决这个问题？还有其他方法可以在这样的设置中运行我的测试吗？

我是否正确理解它只是普通的 Jasmine 而测试驱动程序或多或少只是一个服务器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T04:43:16.283

[Karma](http://karma-runner.github.io/1.0/index.html)目前是受支持的测试运行器。这是我的`testacular-e2e.conf.js`文件。

```
basePath = '../';

files = [
  ANGULAR_SCENARIO,
  ANGULAR_SCENARIO_ADAPTER,
  'test/e2e/**/*.js'
];

autoWatch = false;

browsers = ['Chrome'];

singleRun = true;

proxies = {
  '/': 'http://localhost:3000/'
};

junitReporter = {
  outputFile: 'test_out/e2e.xml',
  suite: 'e2e'
}; 
```

重要的部分是`proxies`。它将 testacular 配置为使用您的服务器。如果我没记错的话，Django 在开发中运行在端口 8000 上。所以`proxies`看起来像这样：

```
proxies = {
  '/': 'http://127.0.0.1:8000/'
}; 
```

通过 npm 安装 testacular 并创建此配置文件后，您可以启动后端服务器并运行您的 e2e 测试，如下所示：

```
$ testacular start config/testacular-e2e.conf.js 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T00:09:24.493

JsTestDriver 似乎不再维护，您也可以尝试使用 PhantomJS 运行测试，例如：[https ://github.com/jcarver989/phantom-jasmine](https://github.com/jcarver989/phantom-jasmine)

# spring - Active MQ 停止在大量消息上分派消息

> ID：12476221
> 
> 赞同：3
> 
> 时间：2012-09-18T11:34:27.607
> 
> 标签：spring, jms, activemq, spring-jms

我有一个基于 Spring JMS 和 Active MQ (5.6) 的系统构建，它有大约 12 个 Spring 默认消息侦听器容器（每个最多 20 个并发实例），它们都连接到同一个活动 mq 目标（队列）。

系统通过每个处理程序（容器）从发送给自己的队列中获取消息，使用选择器，完成其工作，然后将消息放回队列中，直到所有工作完成。

我正在做一个基准测试，发送 25,000 条消息，每条消息都需要通过 9 个不同的处理程序。

每次我运行测试时，只有大约 11300 条消息通过我的所有处理程序，但活动 MQ 不再发送任何消息。

在我当前的测试结束时，我可以看到我的队列的以下统计信息： Enqueue Count: 120359 Dequeue Count: 106693 Dispatch Count: 106693 Inflight Count: 0 Queue Size: 13666

除非我重新启动代理，否则 Active MQ 不会再分派消息。

下面是我的 active-mq 配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:amq="http://activemq.apache.org/schema/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core-5.5.0.xsd">

    <bean id="propertyConfigurer" class="org.springframework.web.context.support.ServletContextPropertyPlaceholderConfigurer" />
    <!-- The <broker> element is used to configure the ActiveMQ broker. -->
    <broker xmlns="http://activemq.apache.org/schema/core"
        brokerName="jmsDeployMqBroker" dataDirectory="${java.io.tmpdir}/activemq-data"
        destroyApplicationContextOnStop="true" useJmx="true">
        <destinationPolicy>
            <policyMap>
                <policyEntries>
                    <policyEntry topic=">" producerFlowControl="false">
                    </policyEntry>
                    <policyEntry queue=">" producerFlowControl="false">
                    </policyEntry>
                </policyEntries>
            </policyMap>
        </destinationPolicy>

        <destinations>
            <queue physicalName="handlersDest"/>
            <topic physicalName="notificationsDest"  />
            <queue physicalName="ActiveMQ.DLQ" />
        </destinations>

        <!-- The managementContext is used to configure how ActiveMQ is exposed 
            in JMX. By default, ActiveMQ uses the MBean server that is started by the 
            JVM. For more information, see: http://activemq.apache.org/jmx.html -->
        <managementContext>
            <managementContext createConnector="false" />
        </managementContext>

        <!-- Configure message persistence for the broker. The default persistence 
            mechanism is the KahaDB store (identified by the kahaDB tag). For more information, 
            see: http://activemq.apache.org/persistence.html -->
        <persistenceAdapter>
            <amq:kahaPersistenceAdapter directory="${java.io.tmpdir}/activemq-data/kahadb" maxDataFileLength="1g" />
        </persistenceAdapter>

        <!-- The transport connectors expose ActiveMQ over a given protocol to 
            clients and other brokers. For more information, see: http://activemq.apache.org/configuring-transports.html -->
        <transportConnectors>
            <transportConnector name="openwire" uri="${org.apache.activemq.brokerURL}" />
        </transportConnectors>
    </broker>
</beans> 
```

这是我的处理程序的弹簧配置示例：

```
<jee:jndi-lookup id="connectionFactory" jndi-name="${jndi.jms.connfactory}">
        <jee:environment>
            java.naming.factory.initial = ${jndi.jms.naming.factory.initial}
            java.naming.provider.url = ${jndi.jms.naming.url}
        </jee:environment>
    </jee:jndi-lookup>

    <!-- ID must not change as it is used in autowiring the handlers -->
    <jee:jndi-lookup id="handlersDest"  jndi-name="${jndi.docprod.queue}">
        <jee:environment>
            java.naming.factory.initial = ${jndi.jms.naming.factory.initial}
            java.naming.provider.url = ${jndi.jms.naming.url}
            ${jndi.queue.setup}
        </jee:environment>
    </jee:jndi-lookup>

<!-- ID must not change as it is used in autowiring the handlers --> 
    <jee:jndi-lookup id="notificationsDest" jndi-name="${jndi.docprod.topic}">
            <jee:environment>
            java.naming.factory.initial = ${jndi.jms.naming.factory.initial}
            java.naming.provider.url = ${jndi.jms.naming.url}
            ${jndi.topic.setup}
        </jee:environment>
    </jee:jndi-lookup>

    <bean id="dmsReadContainer" class="mydomain.DocProdnMessageListenerContainer"
          p:connectionFactory-ref="connectionFactory"
          p:handlerClass="mydomain.DmsReadHandler"
          p:messageListener-ref="dmsReadHandler"
          p:destination-ref="handlersDest" >
          <property name="concurrentConsumers"><value>${dmsRead.initialInstances}</value></property>
          <property name="maxConcurrentConsumers"><value>${dmsRead.maxInstances}</value></property>
          <property name="idleConsumerLimit"><value>${dmsRead.idleInstances}</value></property>
          </bean>       

    <bean id="dmsReadHandler" class="mydomain.DmsReadHandler">

    </bean>
... 
```

ActiveMQ 的日志文件没有显示任何异常，这表明它停止调度的原因。

有谁知道为什么不会发送更多消息或有任何建议来进一步诊断问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:28:24.920

我会尝试以下方法来打开一些东西......

1.  从默认值增加systemUsage ...

    ```
    <systemUsage>
      <systemUsage>
        <memoryUsage><memoryUsage limit="4 gb"/></memoryUsage> <!--75% of avail heap-->
        <storeUsage><storeUsage limit="10 gb"/></storeUsage>
        <tempUsage><tempUsage limit="10 gb"/></tempUsage>
      </systemUsage>
    </systemUsage> 
    ```

2.  使用 JMS 连接池

    ```
    <bean id="pooledConnectionFactory" class="org.apache.activemq.pool.PooledConnectionFactory">
       <property name="maxConnections" value="8" />
       <property name="connectionFactory" ref="jmsConnectionFactory" />
    </bean> 
    ```

3.  切换到像这样使用kahadb ...

    ```
    <persistenceAdapter>
        <kahaDB directory="activemq-data" journalMaxFileLength="32mb" enableJournalDiskSyncs="false"/>
    </persistenceAdapter> 
    ```

4.  较低的[预取](http://activemq.apache.org/what-is-the-prefetch-limit-for.html)

    ```
    tcp://localhost:61616?jms.prefetchPolicy.all=10 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:42:37.570

这似乎是 activemq 中的问题。

它有一个当前的 Jira： [https ://issues.apache.org/jira/browse/AMQ-2745](https://issues.apache.org/jira/browse/AMQ-2745)

# r - R中数据集的多重方差

> ID：12476226
> 
> 赞同：0
> 
> 时间：2012-09-18T11:34:44.877
> 
> 标签：r, statistics

我正在用 R 玩一些概念。这个问题是我之前[在这里提出的问题的扩展](https://stackoverflow.com/questions/12446789/computing-multiple-variance-of-a-dataset-in-r)

我有如下数据

```
V1   V2 V3
..   1  1
..   2  1
..   1  2
..   3  2 
```

与前面的问题一样，我想累计计算`V1`每个值的方差。`V2`但是，我需要根据值拆分数据集`V3`并计算每个单独数据集的方差。我可以使用`split`函数来执行此操作，然后使用[此](https://stackoverflow.com/questions/12446789/computing-multiple-variance-of-a-dataset-in-r)答案中描述的技术。有没有更好的方法来实现同样的目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:19:06.950

```
# Ben Bolker's solution to your earlier question
bens.func <- function(d){
    u <- sort(unique(d$V2))
    ans <- sapply(u,function(x) {
        with(d,var(V1[V2<=x]))
    })
    names(ans) <- u
    ans
}

# Your new dataset
d <- data.frame(V1=runif(1000),V2=sample(1:10,size=1000,replace=TRUE),
                V3=sample(1:10,size=1000,replace=TRUE))

# Split and lapply takes care of the rest
lapply(split(d, d$V3), bens.func) 
```

# javascript - 当图表类型可以改变时如何创建垂直轴线？

> ID：12476229
> 
> 赞同：1
> 
> 时间：2012-09-18T11:34:54.253
> 
> 标签：javascript, d3.js, graph, updates

我正在尝试使用此 d3.js 示例中的图表创建可以在此[d3.js 示例](http://mbostock.github.com/d3/ex/population.html)[中](http://mbostock.github.com/d3/ex/stack.html)看到的轴线。

我是 d3.js 的新手，当图形类型发生变化时，我正在努力创建水平线和刷新/更新标签。

如何创建垂直线以及如何在图形类型更改时更新它们？

# vba - 如何使用两个使用 vba 的工作表生成图形？

> ID：12476231
> 
> 赞同：-1
> 
> 时间：2012-09-18T11:34:58.560
> 
> 标签：vba, excel

我在excel中有两个工作表。我想使用 vba 绘制带有两个工作表数据的图形。请任何人帮助我

```
Range("G7:G11,A7:A11").Select
Range("A7").Activate
ActiveSheet.Shapes.AddChart.Select
ActiveChart.ChartType = xlXYScatterSmoothNoMarkers
ActiveChart.SetSourceData _  
    Source:=Range("Sheet1!$G$7:$G$11,Sheet1!$A$7:$A$11,sheet2!$D$4:$D$303,sheet2!$C$4:$C$303") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:21:11.857

你需要做这个零碎的。创建没有系列的图表，然后逐个添加系列（将其放入循环中）：

```
With ActiveChart.SeriesCollection
    With .NewSeries
        .Values = {some range reference}
        .XValues = {some range reference}
        .Name = {range reference or string}
    End With
End With 
```

每个范围可以位于不同的工作表上，但您不能将一个范围拆分到多个工作表上。例如，一个系列的 X 和 Y 值可以取自不同的工作表，但所有 X 值必须来自一张工作表，所有 Y 值必须来自一张工作表，但不一定与 X 值来自同一张工作表。

# java - Android：使用AsyncTask类的回调方法改变Activity

> ID：12476236
> 
> 赞同：1
> 
> 时间：2012-09-18T11:35:27.637
> 
> 标签：java, android, android-asynctask, task

我使用 AsyncTask 在后台通过 http 请求执行一些数据加载。http 请求使用会话变量。此变量可能会变为无效，并且 http 请求将返回错误。在这种情况下，用户必须重新登录。

那么，我可以使用这样的东西吗：

```
protected void onPostExecute(IData data) {
            //
            // !!On Error data object is null!!
            // 
    if (mCallback != null) {
        mCallback.onTaskComplete(data);
    }
} 
```

在实现回调接口的 Activity 中，我只检查数据对象是否为 null 并将 Activity 更改为“MainActivity”登录表单。

```
 public void onTaskComplete(IData data) {
    if (data == null) {
        Intent intent = new Intent(ReadDataActivity.this, MainActivity.class);
        deleteCurrentSavedSession();
        startActivity(intent);
    } else {
           // Do something with the data
        }
    } 
```

这是一个坏主意吗？我是否应该更好地使用`ExecutorService`和执行它作为检查会话是否仍然有效的“正常”线程？

```
ExecutorService executor = Executors.newFixedThreadPool(2);
executor.execute(sessionCheckWorker);
executor.shutdown();
while (!executor.isTerminated()) {

}
// Wait until session check task is finished and decide which Activity to load 
```

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:46:53.693

去执行者服务。它专门用于此类与计时器相关的任务。我还建议您将处理程序与 ExecutorService 结合使用，因为与 Asynctask 相比，处理程序可以让您更好地控制此类任务。

# java - 并发数据存储

> ID：12476237
> 
> 赞同：1
> 
> 时间：2012-09-18T11:35:28.607
> 
> 标签：java, database

“并发数据存储”有哪些替代方案？那就是我只是基于一个键来保存一组值，并能够通过各种应用程序读取和写入这些值。

目前，我的意图是 db4o，但在创建类、管理它们的访问和从它们获取数据方面，我生成的代码比我想要的要多一些。

有人可以根据我可以自己审查的“经验”提出替代方案吗？

PS。我的目标是尽量减少我编写的代码量以及读/写的复杂性。我基本上试图在 Unix 平台的 Windows 中对 REGISTRY （具有持久性的内存中）进行类似的“表示”。

# git - git stash 和 git pull

> ID：12476239
> 
> 赞同：111
> 
> 时间：2012-09-18T11:35:30.543
> 
> 标签：git, egit, git-stash

我是 Git 新手，我正在使用 EGit eclipse 插件提交。

我修改了几个文件并隐藏了更改，然后我`git pull`在命令行中做了所有最新的提交。然后我`Apply stashed changes`从 EGit 做了。现在它应用了我的更改，并且从上次提交的隐藏文件中提取的更改消失了。我不确定为什么它没有询问我有关合并冲突的问题并覆盖了我的更改并丢失了以前的提交更改。

如何获得这些变化？

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2012-09-18T12:24:43.150

当您对工作副本进行更改时，从命令行执行：

```
git stash 
```

这将隐藏您的更改并清除您的状态报告

```
git pull 
```

这将从上游分支中提取更改。确保它在报告中显示快进。如果没有，您可能正在执行意外合并

```
git stash pop 
```

这会将隐藏的更改应用回工作副本并从存储中删除更改，除非您有冲突。在发生冲突的情况下，它们将被隐藏起来，以便您可以在需要时重新开始。

如果你需要看看你的藏匿处有什么

```
git stash list 
```

# android - 在Android中将图像复制到剪贴板

> ID：12476241
> 
> 赞同：15
> 
> 时间：2012-09-18T11:35:35.330
> 
> 标签：android, image, clipboard

我想将所有级别的 api 的图像复制到剪贴板。为此，我从以下链接中找到了答案

[http://developer.android.com/guide/topics/text/copy-paste.html](http://developer.android.com/guide/topics/text/copy-paste.html)

但它确实支持 api 级别 11。但我也想在较低版本（低于 api 级别 11）中执行相同的功能。`ClipboardManager`在所有版本中`ClipData, ClipData.Item, and ClipDescription`都有效，但在较低版本中无效。

那么有没有办法将图像复制到剪贴板？

而且我想从我的应用程序中复制图像并将其粘贴到另一个应用程序中，例如撰写消息。是否可以？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T12:34:27.283

> 但我也想在较低版本（低于 api 级别 11）中执行相同的功能。

不支持，抱歉。

# tabs - Cakephp 2.0：相同的应用程序，两个选项卡，会话变量的两个不同值？

> ID：12476243
> 
> 赞同：0
> 
> 时间：2012-09-18T11:35:43.023
> 
> 标签：tabs, cakephp-2.0, session-variables

假设我们有一个会话变量 x，其值为 x=2。在我们的应用程序中，有一个链接可以在另一个选项卡中打开我们应用程序的另一个实例，唯一的区别是我们的变量具有不同的值，例如 3 (x=3)。是否可以在第一个选项卡中保持值 2 继续我们的工作，在第二个选项卡中保持值 3，如果可以，我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T18:11:30.703

帮帮我。为什么这不能通过数组来完成？

x['firstTab'] = 2; x['secondTab'] = 3;

就您的问题而言，我非常确定您不能在单个会话实例中拥有两个相同的变量。如果您创建另一个会话实例，您将失去之前的会话。

# java - 避免使用 if 语句来创建对象

> ID：12476245
> 
> 赞同：2
> 
> 时间：2012-09-18T11:35:47.467
> 
> 标签：java, reflection, immutability

我有一个遗留应用程序，它与不可变对象一起工作，这些对象在每个构造函数中创建时都会进行一些验证。每个对象都有自己的验证，f。前任。长度检查，范围检查等。

业务对象如下所示：

```
public class MyObject {
   private FieldA fieldA;
   private FieldB fieldB;
   ...
} 
```

对象是通过调用加载数据的 cobol 服务器创建的……这段代码看起来很脏：

```
if (isFieldSet(response.getValueA())) {
   myObject.setFieldA(new FieldA(response.getValueA()));
}

if (isFieldSet(response.getValueB())) {
   myObject.setFieldA(new FieldA(response.getValueB()));
}

... 
```

而且因为有很多对象，所以也有很多 if 语句。我可以使用反射改进它并动态创建类。

```
myObject.setFieldA(createField(A.class, response.getValueA()));
myObject.setFieldA(createField(B.class, response.getValueB())); 
```

这使我的代码更好，但也慢得多。有人看到任何优雅的方法来解决这个问题吗？

问候，

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:43:48.767

如果我猜对了，你想摆脱这么多 If 语句。如果您使用一些接受响应并相应地返回输出的模板引擎，那不是很好吗？美妙之处在于模板中只能有一个 If 语句，该语句根据输入响应驱动对象创建逻辑。试试[速度模板引擎](http://www.javaworld.com/javaworld/jw-12-2001/jw-1228-velocity.html)。

# javascript - Javascript / JS 图表框架

> ID：12476247
> 
> 赞同：3
> 
> 时间：2012-09-18T11:35:56.997
> 
> 标签：javascript, charts

什么是最好的绘制烛台图的最佳 JavaScript 框架，最好在它上面带有趋势线（例如，我可以用 css 自定义它的外观）？

它用于 stock_market 网络应用程序

*   这是一个商业项目，涉及从 stock_market 读取大量数据并使用 PUSH（反向 ajax）将其推送到前端应用程序（Web 浏览器）。

非常感谢 - 布鲁诺奥利维拉

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T19:37:37.863

最近我不得不做同样的研究。我发现了一个有趣的网站，您可以在其中看到许多按功能进行比较的图表，这是链接：[http](http://socialcompare.com/en/comparison/javascript-graphs-and-charts-libraries) ://socialcompare.com/en/comparison/javascript-graphs-and-charts-libraries 。我调查了列表中的所有图表，并添加了有关哪些支持蜡烛图的信息。

以下是免费框架的完整列表：

*   [AmCharts](http://amcharts.com)（带水印免费）
*   [道场工具包](http://dojotoolkit.org/features/graphics-and-charting)
*   [flot](http://www.flotcharts.org/)（查看插件）
*   [飞行器2](http://www.humblesoftware.com/flotr2/index)
*   [谷歌图表工具](https://developers.google.com/chart/)
*   [jq绘图](http://www.jqplot.com/)
*   [普罗托维斯](http://mbostock.github.com/protovis/)

还有像 Highcharts/Highstock 这样的商业产品，但我更喜欢开源解决方案。

至于我的研究结果，我选择了jqPlot。虽然它在性能方面并不好，但它的代码非常简单，并且很容易添加自己的功能。例如，您可以轻松更改蜡烛的外观并绘制自己的趋势线。但是您应该使用 canvas HTML 元素来完成。使用 CSS 可以做的事情很少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:48:40.183

正如你提到的，这是股市数据，首先想到的是[highcharts - highstock](http://www.highcharts.com/products/highstock)

尽管您没有提及许可证要求，但它可能不合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:31:04.083

我记得最简单的事情是 Yahoo YUI 提供了这样的东西..
你可以在下面的链接中查看 -

[YUI 图表](http://developer.yahoo.com/yui/charts/)

它也有一些很好的例子......例如[带有数据分数轮询的图表](http://developer.yahoo.com/yui/examples/charts/charts-xhr-polling.html)

正如您所提到的，您可以覆盖 YUI 的默认 CSS 以使您的图表看起来很酷......

除此之外，还有很多可用的解决方案。我发现了这个问题 ==> [JavaScript 图表库](https://stackoverflow.com/questions/119969/javascript-chart-library)

[Flot](http://www.flotcharts.org/)看起来不错的框架工作，其中一个例子是[使用缩放的访客计数](http://people.iola.dk/olau/flot/examples/visitors.html)

# php - mysql phpmyadmin 导入 csv 禁用舍入

> ID：12476249
> 
> 赞同：2
> 
> 时间：2012-09-18T11:36:02.537
> 
> 标签：php, mysql, csv, phpmyadmin

我有一个包含经度和纬度值的 CSV 文件，当我将 CSV 文件导入表中时，所有字符串值都被导入而没有任何错误，但纬度和经度值被四舍五入，如 15.7456 到 16。所以有没有办法避免由于 CSV 文件将包含数千个数据，因此此处无法选择手动更正。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:57:29.550

看起来你的纬度和长领域是 int 的。尝试将此字段的表结构更改为例如十进制（8,2）。有关十进制数据类型的更多信息，请[点击此处](http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-21T12:21:50.347

我迟到了这个问题，但我的回答可能仍然对某人有所帮助。在导入 CSV 数据的类似情况下，我创建了一个仅包含结构的空白表，并将字段的类型全部设为 VARCHAR 250。事实证明，这是一种非常适合导入的格式。一旦您检查了数据在 MySQL 中的安全性，您就可以开始将结构更改为正确格式并添加主键的过程。

# javascript-events - javascript 在 IE 7 中未定义，但在 IE 8 中有效

> ID：12476251
> 
> 赞同：1
> 
> 时间：2012-09-18T11:36:21.820
> 
> 标签：javascript-events, javascript

我正在尝试从 clsname 中获取第一个字符，即变量“n”中的“+”或“-”。这在 IE 8 中有效，但在 IE 7 中我得到“未定义”。请让我知道我该如何解决。

```
var clsName = $(this).attr("class");
var n = $('.'+clsName).text()[0];
alert(n); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T11:39:17.857

`String[index]`IE7-不支持。改用[`charAt`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charAt)：

```
var n = $('.'+clsName).text().charAt(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:38:38.057

将整个代码放入`$(document).ready();`：

```
$(document).ready(function(){
    var clsName = $(this).attr("class");
    var n = $('.'+clsName).text()[0];
    alert(n);
}); 
```

# blackberry - 当我合法地持久化一个对象时，黑莓单元测试抛出异常

> ID：12476254
> 
> 赞同：2
> 
> 时间：2012-09-18T11:36:43.377
> 
> 标签：blackberry, ant, java-me, intellij-idea, blackberry-simulator

我一直在遇到一个问题，它只是把我逼到了墙角。

在这个黑莓应用程序中，我有一个我想要坚持的课程。它实现了 net.rim.device.api.util.Persistable。现在由于某种原因，当我这样做时：

```
Persistent Object store = PersistentStore.getPersistentObject(M3Session.ID); 
```

JVM 吐出并抱怨类 net.rim.device.api.util.Persistable 无法访问其超级接口 net.rim.vm.Persistable ...

我不知道我做错了什么。net_rim_api.jar 应该在我的类路径中，我正在使用这个[ant script](https://dl.dropbox.com/u/6053283/M3.xml)构建我的项目。

如果有帮助，我将使用 Intelij 11 社区版作为我的 IDE。

这是我坚持的课程：

```
package com.transcel.m3.ir;

/**
 * Created with IntelliJ IDEA.
 * User: Marc Byfield
 * Date: 9/10/12
 * Time: 11:24 PM

 */

import net.rim.device.api.system.Application;
import net.rim.device.api.util.Persistable;
import net.rim.device.api.util.StringUtilities;

import java.util.Date;

public class M3Session implements Persistable {

    private String key;
    private long timeCreated;
    public final static long TIMEOUT = 1200000L;
    static String ApplicaitonID = Application.getApplication().getClass().getName();
    static String STORE_NAME = "session_store";
    public final static long ID = StringUtilities.stringHashToLong(ApplicaitonID + STORE_NAME);

    public String getKey() {
        return key;
    }

    public void setKey(final String key) {
        this.key = key;
        Date newTime = new Date();
        this.timeCreated = newTime.getTime();
    }

    public boolean equals(final Object o) {
        if (this == o) return true;
        if (!(o instanceof M3Session)) return false;

        final M3Session m3Session = (M3Session) o;

        return !(key != null ? !key.equals(m3Session.key) : m3Session.key != null);

    }

    public int hashCode() {
        return key != null ? key.hashCode() : 0;
    }

    public String toString() {
        return "M3Session{" +
                       "key='" + key + '\'' +
                       ", timeCreated=" + timeCreated +
                       '}';
    }

    public boolean isValid() {
        return key.length() != 0 && !hasExpired();

    }

    private boolean hasExpired() {
        Date newTime = new Date();
        return newTime.getTime() - this.timeCreated >= TIMEOUT;
    }

    public M3Session(final String key) {
        this.setKey(key);
    }
} 
```

这是使用它的类：

```
package com.transcel.m3.api;

/**
 * @Author Marc Byfield
 * Date: 9/10/12
 * Time: 11:05 AM
 */

import com.transcel.m3.ir.M3Session;
import com.transcel.m3.ir.User;
import com.transcel.m3.transport.M3Connector;
import com.transcel.m3.transport.Operations;
import net.rim.device.api.system.PersistentObject;
import net.rim.device.api.system.PersistentStore;
import org.json.me.JSONObject;

import java.io.IOException;
import java.util.Hashtable;

public class Authentication implements Runnable {

    private M3Session session;
    private static PersistentObject store;
    private User user;

    public Authentication(String user, String pass) {
        store = PersistentStore.getPersistentObject(M3Session.ID);
        this.user = new User(user, pass);
        session = (M3Session) store.getContents();
        if (session == null || !session.isValid()) {
            login(user, pass);
        }
    }

    public M3Session getSession() {
        return session;
    }

    private void login(String username, String pass) {

        Hashtable user = new Hashtable(2);
        user.put("username", username);
        user.put("password", pass);

        String result;
        try {
            result = M3Connector.sendRequest(Operations.LOGIN, user);
            JSONObject sessionJSON = new JSONObject(result);
            if (sessionJSON.has("session_key")) {
                session = new M3Session(sessionJSON.getString("session_key"));
                synchronized (store) {
                    store.setContents(session);
                    store.commit();
                }
            } else {
                synchronized (store) {
                    store.setContents(null);
                    store.commit();
                }
            }

        } catch (IOException ioe) {
            synchronized (store) {
                store.setContents(null);
                store.commit();
            }
        }
    }

    public void run() {
        if (!session.isValid())
            login(user.getPhoneNum(), user.getPass());
        try {
            wait(M3Session.TIMEOUT);
        } catch (InterruptedException ie) {
            this.login(user.getPhoneNum(), user.getPass());
        }
    }
} 
```

希望这可以帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:29:09.823

我很高兴看到有人在 BlackBerry 开发时使用 IDEA 和单元测试！

如果您查看**net_rim_api.jar**内部，您将找不到任何`net.rim.vm.*`类（虚拟机类，有时您也可以使用内部具有本机调用的类），这就是您遇到此问题的原因。我正在使用的工作方法 - 通过创建自己的类来伪造 RIM api，这些类与 RIM 类具有相同的合同，并通过它测试类路径而不是原始 RIM 库。这是相当大的开销，但它有效。也许我们可以编写一些以自动方式执行此操作的工具（会考虑一下，也许是开源的）。

我还应该警告您有关`Persistable`界面的信息。如果您更改了该类，您将[遇到更新问题](http://supportforums.blackberry.com/t5/Java-Development/Custom-Persistable-incompatible-OTA-install-fails-will-App-World/td-p/483262)。将数据转换为`Hashtable`JSON **/XML**并使用`Persistable`.

# ruby-on-rails - 如何让 attr_accessor 真正在 Rails 中工作？

> ID：12476257
> 
> 赞同：0
> 
> 时间：2012-09-18T11:36:54.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, attr-accessor

这是对我有用的代码片段

**用户模型**

```
class User < ActiveRecord::Base

  def full_name
    [first_name,last_name].join(" ")
  end

  def full_name=(name)
    split = name.split(" ",2)
    self.first_name = split.first
    self.last_name = split.last
  end
end 
```

然后这里是视图文件

**显示文件**

```
<h1>
    <%= @user.full_name %>
</h1> 
```

**编辑文件**

```
<div class="field">
    <%= f.label :full_name %><br />
    <%= f.text_field :full_name %>
</div> 
```

这对我来说非常好。

我读过**attr_accessor 的**工作方式与

```
 def full_name
    [first_name,last_name].join(" ")
  end

  def full_name=(name)
    split = name.split(" ",2)
    self.first_name = split.first
    self.last_name = split.last
  end 
```

所以我试着像

```
class User < ActiveRecord::Base
  attr_accessor :full_name
end 
```

我无法弄清楚还应该做什么。

提交表单时，既不会在显示页面中显示完整名称，也不会在数据库中更新相同名称。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-18T11:44:17.213

这是不正确的。`attr_accessor`像

```
def full_name
  @full_name
end

def full_name=(value)
  @full_name = value
end 
```

它只是为您的实例变量创建原始的 getter / setter。如果您需要任何类型的高级处理（在您的情况下拆分/加入），您需要自己定义 getter 和 setter 方法。

# android - 想要整个项目的单个异步任务

> ID：12476266
> 
> 赞同：0
> 
> 时间：2012-09-18T11:37:55.717
> 
> 标签：android

我有一个 3 活动。所有这三个活动都有相同`AsyncTask`的。我想要所有活动的单个 AsyncTask ，所以我可以将活动作为参数传递给`AsyncTask`构造函数。请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:45:43.660

为您的异步任务创建一个构造函数，并将上下文和所需参数传递给构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:46:25.343

在 AsyncTask 类的构造函数中传递上下文，并在整个类中使用它，例如进行中的对话框等

# vb.net - 部署和更新 VS2010 应用程序

> ID：12476272
> 
> 赞同：2
> 
> 时间：2012-09-18T11:38:17.493
> 
> 标签：vb.net

我有一个应用程序，它有一个“主”exe，它只是一个带有许多图标的表单。当用户启动应用程序时，会显示主窗体，然后用户单击一个图标来启动所选应用程序，该应用程序是同一目录中的单独 exe。目前，部署基于“主”项目，其他 (13) 个 exe 文件作为文件添加。所有 exes，包括主要的都是单独的 VB 项目，并且在单独更新/调试等时具有自己的版本号。使用 Inno 设置处理更新，用户只需将其安装到“主”目录中，覆盖现有文件。这是在VB5下。该代码现在已移植到 VS2010，我正在寻找有关 .NET 部署理念的建议。

我可以在 .NET 中重复 (VB5) 方法吗（设置“Main”并将其他 exes 添加为文件等，然后覆盖更新）？

.NET 下有没有更有效的方法？

此外，我将不胜感激有关使用最简单/最佳安装程序的任何建议；VS2010、Wix、Advancedinstaller（免费版）等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:02:40.897

*   查看 ClickOnce 了解部署理念。 [msdn 使用 ClickOnce 部署 Windows 窗体应用程序](http://msdn.microsoft.com/en-us/library/ms953320.aspx) 如果您不喜欢“ClickOnce”，可以查看 Visual Studio 的“安装项目”，它还不错。

*   是的，您可以重复设置“主要”并将其他 exes 添加为文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:28:43.610

查看 WiX 安装程序：[http](http://wix.codeplex.com/) ://wix.codeplex.com/ 文档很差，但您可以构建非常强大的安装程序。特别是您可以构建一个安装程序，它从所有项目中获取必要的数据，然后构建一个“大”安装程序。

Vb2010 可以在同一个解决方案中处理大量项目——也许这有助于减少冗余。但是，如果您要从事本质上不相关的项目，我认为您的方式还可以。

Clickonce 在 Windows XP 下不起作用，我说的对吗？

# iphone - XCode 4.5 iOS 6.0 模拟器和旋转问题

> ID：12476273
> 
> 赞同：12
> 
> 时间：2012-09-18T11:38:18.430
> 
> 标签：iphone, ios, ios-simulator, uiinterfaceorientation, ios6

我有为 iOS 4.2 制作的应用程序，我正在 XCode 4.3.3 中进行开发并使用 iPhone 5.1 模拟器对其进行测试，一切正常。最近我决定测试应用程序如何在 iOS 6.0 上运行。尝试这个时，我面临两个问题：

1.  所以，我用 XCode 4.5 打开应用程序并在 iPhone 6.0 模拟器上运行它。我在启动应用程序时经常遇到问题。XCode 只是说：在 iPhone 6.0 模拟器上运行完毕，停止按钮变灰（就像应用程序没有运行），iPhone 模拟器只是显示黑屏，没有任何反应。我必须 CMD+Q 它。这对我来说是**个大问题**，因为在多次失败后我设法成功地随机运行应用程序。

2.  最终，有时，应用程序运行没有问题，我看到模拟器正在运行我的应用程序。应用程序仅在横向模式下进行。但是当模拟器运行应用程序时，它会保持纵向模式，并以纵向模式显示专为横向屏幕设计的应用程序。我已将 Supported Interface Orientations 设置为横向变体，并且在 Application-Info.plist 中也列出了这两个横向方向。

有谁知道发生了什么以及可能的解决方案？

提前谢谢了。

* * *

**[编辑#1：添加了所有输出控制台消息]**

控制台消息（对于现在不断发生的问题 1）说：

```
error: failed to attach to process ID 0 
```

* * *

**[编辑#2：解决第一个问题的小进步]**

好吧，奇怪的事情正在发生。为了消除编辑＃1中的错误，我做的第一件事是：

在 XCode 中转到：**Product -> Edit Scheme -> Run [AppName].app -> Debugger 并将其从 LLDB 更改为 GDB**

在此之后，来自编辑#1 的错误消失了，**但**出现了新问题。现在运行应用程序后，我在 XCode 中收到状态消息：**附加到 [AppName]**并且 XCode 卡在该操作上。

如果有人给我答案，我想说我尝试了以下列表中的所有内容：

*   **转到窗口-> 管理器-> 派生数据-> 删除**
*   **转到 Window -> Organizer -> [ProjectName] 并完全删除它，然后重新打开它**
*   **重置 iPhone 模拟器设置**
*   **重置 iPhone 模拟器 + 清理构建 + 退出模拟器 + 运行项目**
*   **退出 XCode + 重启 Mac + 重新打开 XCode 并再次运行应用程序**

以及各种这些动作排列。简单地说，我总是看到这个问题。发生在我身上的最好的事情是在这个组合中：

**只打开 XCode 而不打开项目 -> 转到 Window -> Organizer -> [ProjectName] 并完全删除它 -> 退出 XCode -> 打开 iPhone 模拟器并重置设置 -> 退出 iPhone 模拟器 -> 重启 Mac -> 重新打开 XCode 并运行应用**

**有时**在这种情况下，模拟器设法立即运行我的应用程序，这很棒。但是在关闭模拟器并再次从 XCode 运行应用程序后（在这两个操作之间不做任何事情），XCode 再次卡在**Attaching to [AppName]**上并且不会使用我的应用程序启动模拟器。

虽然模拟器不会从我的 XCode 应用程序启动，但应用程序本身存储在模拟器上，如果我单独运行模拟器并手动启动我的应用程序，应用程序会设法启动，但是我的问题描述中有第二个问题 - 布局问题。

* * *

**[编辑#3：XCode 版本信息]**

我忘了提及我的 XCode 版本：**Xcode Version 4.5 (4G144l)**

* * *

**[编辑#4：“解决方案”]**

我找到了“解决方案”（我说“解决方案”，因为我还没有设法在当前 XCode 版本中找到一个）。

我刚刚下载了**XCode 版本 4.5 (4G182)**并正常运行了我的应用程序（没有将调试器更改为 GDB），除了布局问题外一切正常，这肯定存在，因为与 iOS 5 相比，iOS 6.0 做了一些更改。我想这是在事实上是解决方案，因为我最初使用的这个版本的 XCode 不会被使用，因为它是一些 beta 版本。

所以，第一个问题解决了，仍然没有解决布局问题。

* * *

**[编辑#5：最终解决方案]**

好的，第二个问题解决了。有关我的第二个问题的所有信息，这是此链接上的答案：http: [//yusinto.blogspot.de/2012/08/ios-6-auto-rotate-and-orientation.html](http://yusinto.blogspot.de/2012/08/ios-6-auto-rotate-and-orientation.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T10:49:51.770

就像我在编辑中所说的那样，我的第一个问题的解决方案是将 XCode 更新到**版本 4.5 (4G182)**。我的第二个问题的解决方案是替换已弃用的 iOS 5 方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

iOS 6 中引入了 2 种新方法：

```
- (NSUInteger)supportedInterfaceOrientations
- (BOOL)shouldAutorotate 
```

之后，应用程序工作正常。

**[编辑 #1：添加支持 iOS 5 和 iOS 6 的仅横向应用程序的工作示例]**

**AppDelegate.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    // Override point for customization after application launch.
    self.viewController = [[MainViewController alloc] initWithNibName:@"MainViewController" bundle:nil];
    self.window.rootViewController = self.viewController; 
    [self.window makeKeyAndVisible];

    return YES;
} 
```

**主视图控制器.m**

```
#pragma mark - Orientation support

- (BOOL)shouldAutorotate {

    return YES;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight) || (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
}

- (NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskLandscape;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {

    return UIInterfaceOrientationLandscapeLeft;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T02:52:39.590

完全删除`\Library\Application Support\iPhone Simulator`文件夹并从 XCode 运行模拟器对我有用。

现在我可以从 XCode 运行 iOS 6.0 Simulator。

# java - 类加载器问题

> ID：12476274
> 
> 赞同：1
> 
> 时间：2012-09-18T11:38:18.587
> 
> 标签：java, classloader

两个类加载器 CL1 和 CL2 加载两个不同的类 C1 和 C2。我想从 C1 调用 C2 中的一个方法。这可以通过反射实现吗？

我得到一个提示，说使用引导类加载器加载的帮助类可以解决这个问题，因为这两个类都可以访问引导类加载器。但是不知道怎么办？

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:42:10.520

类由两个不同的类加载器加载这一事实并不能阻止调用。您不需要反思（但如果您愿意，也可以）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:02:28.123

辅助类必须是一个公共超类或超接口，由公共父类加载器（特别是引导类加载器）加载。如果没有这样的帮助类，那么你必须使用反射。

# asp.net - 图表图像的内存分配

> ID：12476281
> 
> 赞同：1
> 
> 时间：2012-09-18T11:38:38.733
> 
> 标签：asp.net, mschart

我正在尝试`chart images`使用密钥作为

```
<add key="ChartImageHandler" value="storage=memory;deleteAfterServicing=false;  privateImages=false;" /> 
```

在 web.config 中。何时清除此内存以及是否正在使用客户端或服务器内存？提前致谢

# c# - 返回列表 在 C# 中

> ID：12476284
> 
> 赞同：1
> 
> 时间：2012-09-18T11:39:02.457
> 
> 标签：c#, interface

在关于使用 IEnumerable 而不是 List 的初步建议后编辑。

我正在尝试这样做：

```
public interface IKPIDetails // Previously: interface IKPIDetails
{ 
    string name {get; set;}
    //...
}

public abstract class BaseReport
{
    public List<IKPIDetails> m_KPIDetails;  // Previously: list<IKPIDetails> m_KPIDetails;

    public BaseReport()
    {
        m_KPIDetails = MakeReportDataStructure();
        //...
    }
    public abstract List<IKPIDetails> MakeReportDataStructure(); // Previously: public abstract IKPIDetails MakeReportDataStructure();

    //...
}

public class AirTemp_KPIDetails : NetVisSolution.Reports.IKPIDetails // Previously: protected class AirTemp_KPIDetails : IKPIDetails
{
    #region IKPIDetails implementation
    private string _Name;
    public string Name
    {
        get { return _Name; }
        set { _Name = value; }
    }
    #endregion
    ...
}

public class SSAirTempSummaryReport : BaseReport
{
    public SSAirTempSummaryReport() : base ()
    {
        // Do any extra initialisation here
        m_reportName = "Air Temperature Summary Report";
    }

    //It now complains on the declaration below at the word
    // MakeReportDataStructure()
    public override IEnumerable<IKPIDetails> MakeReportDataStructure() // Previously: public override List<IKPIDetails> MakeReportDataStructure()
    {
        List<AirTemp_KPIDetails> d = new List<AirTemp_KPIDetails>();
        return  d;  // <-- this is where it used to break
    }

    //...
} 
```

因此，我有一个报表数据对象接口和可能实现此接口并添加其特定额外位的多个报表数据类。我有一个实现通用报告功能的抽象报告类和多个派生类，每个派生类都使用自己的报告数据类。

不幸的是，当我尝试在派生类中创建我的报告详细结构列表并将其作为接口列表传递回基类时，它会抱怨：

```
Cannot implicitly convert type 
'System.Collections.Generic.List<NetVisSolution.Reports.AirTemp_KPIDetails>' to 
'System.Collections.Generic.List<NetVisSolution.Reports.IKPIDetails>' 
```

它不会让我隐含或明确地做到这一点。有什么办法可以做到这一点吗？

提前致谢，

--- 阿利斯泰尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T11:44:32.493

```
public override List<IKPIDetails> MakeReportDataStructure()
{
    List<AirTemp_KPIDetails> d = new List<AirTemp_KPIDetails>();
    return  d;  // <-- this is where is breaks
} 
```

应该：

```
public override List<IKPIDetails> MakeReportDataStructure()
{
    List<IKPIDetails> d = new List<AirTemp_KPIDetails>();
    return  d;
} 
```

您的赋值不起作用，因为在 中`List<T>`，类型参数不是协变的，也就是说，在更具体`T`的情况下不允许赋值。`T`如果您使用`IEnumerable`，您的代码可以正常工作：

```
public override IEnumerable<IKPIDetails> MakeReportDataStructure()
{
    List<AirTemp_KPIDetails> d = new List<AirTemp_KPIDetails>();
    return  d;  // <-- works, because T in IEnumerable is covariant
} 
```

你可能会问，为什么`IEnumerable`是协变的？好吧，`IEnumerable`只允许您读取数据（因此协方差用 标记`<out T>`），并且您不能将任何对象写入其中。List 允许您将对象写入集合中，并且您会遇到以后将不太具体的类型写入该集合的危险，这可能会导致错误，因为不太具体的类型不提供与更多派生类型相同的功能：

```
public override IEnumerable<BaseClass> MakeList()
{
    List<DerivedClass> d = new List<DerivedClass>();
    // ...
    return  d; // assume it would work
}

var l = MakeList();
l.Add(BaseClass); // now we added object of BaseClass to the list that expects object of DerivedClass, any operation on the original list (the one with List<DerivedClass> type could break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:45:21.030

这两个列表是不同的，即使`AirTemp_KPIDetails`我是一个`IKPIDetails`（即有一个*is-a*关系）。您必须将元素从一个列表复制到另一个：

```
kpiDetailsList = new List<IKPIDetails>(airTempKPIList); 
```

一般来说，这属于协方差和反方差的主题。您可能想阅读关于[协变和逆变（计算机科学）](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)的 Wiki 文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T11:49:04.323

您不应该将一种类型的 List 转换为另一种类型，因为这样插入操作将失败，或者获取。

示例：类型 A 实现（扩展）类型 B

```
List<A> listA;
List<B> listB;

((List<B>) listA).add(new B()); 
```

如果这合法，那么你通过放置比 A 更通用的东西来打破 listA 不变量。

```
A a = ((List<A>) listB).get(); //like get first, or something similar 
```

这将打破只有 A 对象可以分配给 A 引用的事实。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T11:46:20.390

您必须将列表创建为接口列表，而不是派生类型：

```
List<IKPIDetails> d = new List<IKPIDetails>(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T11:55:13.480

尝试使用下面的代码。

```
public override List<IKPIDetails> MakeReportDataStructure() 
{ 
    return new List<AirTemp_KPIDetails>() as List<IKPIDetails>; 
} 
```

# wpf - 双击 Tab Control 中的 TabItem，View 弹出为浮动窗口

> ID：12476285
> 
> 赞同：2
> 
> 时间：2012-09-18T11:39:06.900
> 
> 标签：wpf, popup, tabcontrol

我的 mainwindow.xaml 文件中有一个选项卡控件。在启动时，当应用程序运行时，会显示所有四个选项卡。有没有一种方法，一旦用户双击“连接”选项卡，该选项卡的整个视图就会弹出一个新的浮动窗口，如果我双击弹出的窗口，它会恢复到初始状态？

```
<Grid Grid.Row="0" >
       <TabControl Name="ConnectTab" Style="{DynamicResource styleBackground}" />                          
               <tablocal:CloseableTabItem Header="Connect" />
               <tablocal:CloseableTabItem Header="I2C" />
               <tablocal:CloseableTabItem Header="Voltage" />
               <tablocal:CloseableTabItem Header="Clock" />
       </TabControl>
</Grid> 
```

**这是我的 Tab 关闭按钮方法：**

```
 private void CloseTab(object source, RoutedEventArgs args)
    {            
        TabItem tabItem = args.Source as TabItem;

        if (ConnectTab != null && ConnectTab.Items.Count > 1)
            ConnectTab.Items.Remove(tabItem);                     
    } 
```

**Closetab 类：**

```
public class CloseableTabItem : TabItem
{
    static CloseableTabItem()
    {
        //This OverrideMetadata call tells the system that this element wants to provide a style that is different than its base class.
        //This style is defined in themes\generic.xaml
        DefaultStyleKeyProperty.OverrideMetadata(typeof(CloseableTabItem),
            new FrameworkPropertyMetadata(typeof(CloseableTabItem)));
    }

    public static readonly RoutedEvent CloseTabEvent =
        EventManager.RegisterRoutedEvent("CloseTab", RoutingStrategy.Bubble,
            typeof(RoutedEventHandler), typeof(CloseableTabItem));

    public event RoutedEventHandler CloseTab
    {
        add { AddHandler(CloseTabEvent, value); }
        remove { RemoveHandler(CloseTabEvent, value); }
    }

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        Button closeButton = base.GetTemplateChild("PART_Close") as Button;
        if (closeButton != null)
            closeButton.Click += new System.Windows.RoutedEventHandler(closeButton_Click);
    }

    void closeButton_Click(object sender, System.Windows.RoutedEventArgs e)
    {
        this.RaiseEvent(new RoutedEventArgs(CloseTabEvent, this));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:31:27.423

这个概念是完全可能的。问题将是找到执行此操作的代码。

基本上，您需要从当前的 TabControl 重新托管您的 TabItem，并将其托管在新窗口中的新 TabControl 中。*此代码只是对此的简单演示，不应将其视为生产质量*

在 MainWindow.xaml

```
<Window x:Class="WpfApplication4.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<TabControl Name="myTabControl">
    <TabItem Name ="mytabItem" Header="Double cllick me" MouseDoubleClick="TabItem_MouseDoubleClick">
        <TextBlock Text="Hello world!"/>
    </TabItem>
</TabControl> 
```

在 MainWindow.xaml.cs

```
private void TabItem_MouseDoubleClick(object sender, MouseButtonEventArgs e)
    {
        if (myTabControl.Items.Count ==0 ) return;

         myTabControl.Items.Remove(mytabItem);           
        var newWindow = new TempWindow(myTabControl, mytabItem);            
        newWindow.Show();
    } 
```

在 TempWindow.cs 中

```
 class TempWindow : Window
{
    private TabControl _original;

    public TempWindow(TabControl original, TabItem tabItem)
    {
        MouseDoubleClick += new System.Windows.Input.MouseButtonEventHandler(TempWindow_MouseDoubleClick);
        _original = original;
        var tabControl = new TabControl();
        Content = tabControl;

        tabControl.Items.Add(tabItem);
    }

    void TempWindow_MouseDoubleClick(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        var tabItem = ((TabControl)Content).Items[0];
        ((TabControl)Content).Items.RemoveAt(0);
        _original.Items.Add(tabItem);

        this.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:17:00.520

是的，这是绝对可能的。我在我的一个应用程序中执行此操作，但不是双击，而是用户单击的图标，当窗口最小化时，它会放回选项卡中。

我无法为您提供完整的解决方案，但这里有一些建议可以帮助您入门：

我假设您正在使用 MVVM。

要处理视图的实际停靠/取消停靠，需要做一些工作。首先，您应该将您的视图放入 UserControl 中，以便您可以轻松地将其显示在窗口或选项卡中。

然后，您需要一个管理器来保留特定 ViewModel 的当前视图的引用，以便您可以根据用户交互在两种视图类型（选项卡或窗口）之间切换。该管理器必须创建/处理选项卡和窗口，并为这些更新 DataContext（您的 ViewModel）。

您还需要将事情作为窗口关闭事件来处理 - 如果视图返回选项卡式版本或关闭等。

# c - 在 linux 中调用 setgid 和 setuid 后，我无法访问属于某个组的文件

> ID：12476288
> 
> 赞同：2
> 
> 时间：2012-09-18T11:39:18.500
> 
> 标签：c, linux, file-permissions, setuid

让我们添加一个新组和用户并将其添加到系统组中`video`

```
$ sudo addgroup --system mydaemon
$ sudo adduser --system --no-create-home --ingroup mydaemon mydaemon
$ sudo adduser mydaemon video 
```

创建一个文件并将其所有者更改为 root 并将组更改为`video`

```
$ touch video0
$ sudo chown root:video video0
$ sudo chmod 0660 video0 
```

现在考虑一个用 C 编写的简单应用程序，使用`setgid()`和`setuid()`

```
/* perms.c */
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <fcntl.h>
#include <pwd.h>
#include <grp.h>

int main(int argc, char const *argv[])
{
    int ret;
    int gid;
    int uid;
    struct passwd *pw;
    struct group  *gr;

    pw = getpwnam("mydaemon");
    if (pw) {
        ret = setgid(pw->pw_gid);
        if (ret < 0) {
            printf("error with setgid\n");
            exit(1);
        }

        ret = setuid(pw->pw_uid);       
        if (ret < 0) {
            printf("error with setuid\n");
            exit(1);
        }
    }

    pw = getpwuid(getuid());
    gr = getgrgid(getgid());

    printf("gid: %d gr_name: %s\n", gr->gr_gid, gr->gr_name);
    printf("uid: %d user_name: %s\n", pw->pw_uid, pw->pw_name);

    ret = open("video0", O_RDWR);

    printf("open status: %d (errno %d)\n", ret, errno);

    return 0;
} 
```

编译完成后，我们可以以普通用户的身份运行它：

```
$ ./perms
error with setgid 
```

失败是因为我们没有setgid的权限所以直接作为mydaemon运行：

```
$ sudo -u mydaemon ./perms
gid: 126 gr_name: mydaemon
uid: 116 user_name: mydaemon
open status: 3 (errno 0) 
```

好的，我可以做到（我是同一个用户）并且可以按预期打开`setgid`文件`setuid`

现在以 root 身份运行它：

```
$ sudo ./perms
gid: 126 gr_name: mydaemon
uid: 116 user_name: mydaemon
open status: -1 (errno 13) 
```

我可以`setgid`，并且`setuid`说我正在作为 mydaemon 运行，**但我无法打开文件**。（errno 13 是 EACCES：权限被拒绝）`getgid``getuid`

 **问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:58:02.187

您应该使用 initgroups() 调用根据组数据库初始化组。**

# r - 使用 roxygen2 记录 S4 方法：帮助文件中清楚区分方法

> ID：12476291
> 
> 赞同：6
> 
> 时间：2012-09-18T11:39:39.433
> 
> 标签：r, methods, package, s4, roxygen2

## 在你瞄准和射击之前

我知道这个问题与这篇[文章](https://stackoverflow.com/questions/7356120/how-to-properly-document-s4-methods-using-roxygen2)密切相关。事实上，我遵循了各种答案中给出的建议，但仍然觉得生成的帮助文件有点“尴尬”，或者至少看起来有点“混杂在一起”，因此我的问题

## 实际问题

1.  在记录 S4 泛型及其各自的方法时，我如何最终得到一个 Rd 文件结构，让用户清楚地区分各种方法，从而非常清楚文档的哪个部分具体属于哪个方法？
2.  鉴于我提供了标签，在尝试获得**特定**`@alias`方法的帮助时，我该如何实际使用它们？类似的东西，而不仅仅是打字？**`?foo-character-method``?foo`**
***   最好**不要**在通用方法中记录 a) 签名参数，因为每个方法肯定包含各自的文档和 b) 返回值，因为这也取决于各自的方法？**

 **现在，我觉得我最终得到了一个帮助文件，它似乎无法正确区分通用方法和各种方法 - 至少在视觉上没有。

**但也许我还没有完全明白这一点;-)。在这种情况下，任何指针都将不胜感激！**

* * *

这是一个可重现的示例，它生成`mypkg`包含 S4 泛型和两个方法的包。我尝试遵循这篇[文章](https://stackoverflow.com/questions/7356120/how-to-properly-document-s4-methods-using-roxygen2)和[编写 R 扩展中给出的建议](http://cran.r-project.org/doc/manuals/R-exts.html#Documenting-S4-classes-and-methods)

## 确保目录

```
sapply(c("src", "package"), dir.create, showWarnings=FALSE) 
```

## 通用方法定义

```
gnrc.roxy <- c(
    "#' Doing Something Useful",
    "#'", 
    "#' Description here.",
    "#'", 
    "#' @param x A signature argument for method dispatch.",
    "#' @param y A signature argument for method dispatch.",
    "#' @param arg.1 A \\code{logical} scalar. If \\code{TRUE} (default)", 
    "#'      something happens; else not.",
    "#' @param arg.2 A \\code{numeric} vector containing some useful numbers.", 
    "#' @param ... Further arguments.",
    "#' @return Depends on the actual method.", 
    "#' @references \\url{http://www.rappster.de/}",
    "#' @author Janko Thyson \\email{janko.thyson@@rappster.de}",
    "#' @examples", 
    "#'   foo(x=\"a\", y=letters[1:5])",
    "#'   foo(x=\"a\", y=1:5)",
    "#' @docType methods",
    "#' @rdname foo-methods",
    "#' @export"
)    
gnrc.def <- c(
    "setGeneric(",
    "    name=\"foo\",",
    "    signature=c(\"x\", \"y\"),",
    "    def=function(",
            "x,",
            "y,",
            "arg.1=TRUE,",
            "arg.2,",
            "...",
    ") {",
    "standardGeneric(\"foo\")",       
    "})"
)
path <- "src/gnrc_foo.R"
write(gnrc.roxy, file=path)
write(gnrc.def, file=path, append=TRUE) 
```

## 关联方法的定义

```
mthd1.roxy <- c(
    "#' @param x A \\code{character} scalar.",
    "#' @param y A \\code{character} vector.",
    "#' @return A \\code{character} vector.", 
    "#' @docType methods",
    "#' @rdname foo-methods",
    "#' @rdname foo-methods",
    "#' @aliases foo,character,character-method",
    "#' @export"
)    
mthd1.def <- c(
    "setMethod(",
        "f=\"foo\",",
        "signature=signature(x=\"character\", y=\"character\"),", 
        "definition=function(",
            "x,",
            "y,", 
            "...",
        ") {",
        "print(x);print(y);return(y)",
        "})"
)    
path <- "src/mthds_foo.R"
write(mthd1.roxy, file=path)
write(mthd1.def, file=path, append=TRUE)

mthd2.roxy <- c(
    "#' @param x A \\code{character} scalar.",
    "#' @param y A \\code{numeric} vector.",
    "#' @return A \\code{numeric} vector.", 
    "#' @docType methods",
    "#' @rdname foo-methods",
    "#' @rdname foo-methods",
    "#' @aliases foo,character,numeric-method",
    "#' @export"
)    
mthd2.def <- c(
    "setMethod(",
        "f=\"foo\",",
        "signature=signature(x=\"character\", y=\"numeric\"),", 
        "definition=function(",
            "x,",
            "y,", 
            "...",
        ") {",
        "print(x);print(y);return(y)",
        "})"
)    
write(mthd2.roxy, file=path, append=TRUE)
write(mthd2.def, file=path, append=TRUE)

# Test source to see if methods were defined correctly
#sapply(list.files("src", full.names=TRUE), source) 
```

## 创建包骨架

```
# Ensure empty package directory
subdirs <- list.files("package", full.names=TRUE)
if (length(subdirs)) {
    sapply(subdirs, unlink, recursive=TRUE)
}

pkg.name    <- "mypkg"
path        <- file.path("package", pkg.name)

package.skeleton(
    name=pkg.name, 
    path="package", 
    code_files=list.files("src", full.names=TRUE, recursive=TRUE)
) 
```

## 充氧

```
require("roxygen2")
roxygenize(package.dir=path) 
```

## 修补 Rd 文件

有些东西需要打补丁才能允许自动检查和构建过程，不需要任何手动干预，例如手动编辑 Rd 文件等。

```
rdfiles <- list.files(file.path(path, "man"), full.names=TRUE)

# 1) Removing unnecessary file './package/mypgk/man/foo.Rd'
file <- grep("foo.Rd", rdfiles, value=TRUE)
if (length(file)) {
    unlink(file)
}

# 2) Patching './mypkg/man/mypkg-package.Rd' to pass R CMD CHECK
file <- grep(paste(pkg.name, "-package.Rd", sep=""), rdfiles, value=TRUE)
if (length(file)) {
    cnt <- readLines(file, warn=FALSE)
    idx.0 <- grep("\\\\examples\\{", cnt)
    if (length(idx.0)) {
        idx.1 <- grep("\\}", cnt)
        idx.1 <- max(idx.1[which(idx.1 > idx.0)])
        exnew <- c(
            "\\examples{",
            "# TODO: add examples",
            "}"
        )
        cnt <- cnt[-(idx.0:idx.1)]
        cnt <- append(cnt, exnew, after=idx.0-1)
        write(cnt, file=file)
    }
} 
```

## 检查包裹

```
shell(paste("R CMD check", path), intern=FALSE) 
```

## 构建和安装包

```
shell(paste("R CMD INSTALL",  path), intern=FALSE) 
```

## 调查帮助文件

```
require("mypkg")

foo(x="a", y=letters)
foo(x="a", y=1:10)

?foo 
```

* * *

## 替代方式：构建和安装分离

```
shell(paste("R CMD INSTALL --build --data-compress=gzip ",  path), intern=FALSE)

install.packages(paste0(pkg.name, "_1.0.zip"), type="win.binary")

require("mypkg")

?foo 
```**

# windows-8 - 禁用 Webview 的水平滚动条可见性

> ID：12476294
> 
> 赞同：1
> 
> 时间：2012-09-18T11:39:45.047
> 
> 标签：windows-8, windows-runtime

我如何禁用 WebView 控件的水平滚动条可见性。请在此处找到我的问题的屏幕截图。 [https://www.dropbox.com/s/ymdhwtvew32rjjs/Facebook%20Image.PNG](https://www.dropbox.com/s/ymdhwtvew32rjjs/Facebook%20Image.PNG)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:53:54.510

Based on your screenshot it seems your trying to set up an authentication using a facebook account from your Windows 8 app.

If I am right, you should use instead of a WebView the [WebAuthenticationBroker](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.authentication.web.webauthenticationbroker) which is meant for.

You can find a WebAuthenticationBroker sample on MSDN over [here](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122).

Also you should take a look to [this blog post](http://blogs.msdn.com/b/ericsk/archive/2012/07/06/metro-style-app-facebook-authentication-using-webauthenticationbroker.aspx) (use google translate) which talk about it.

Regards.

# unit-testing - Selenium——等待事件

> ID：12476295
> 
> 赞同：-1
> 
> 时间：2012-09-18T11:39:50.277
> 
> 标签：unit-testing, testing, selenium

我需要创建一个测试用例，它将有一个 facebook 登录。那么如何强制测试用户使用 facebook 登录以继续测试？

这是我想要的程序：

1.  用户点击链接，

2.  它重定向到facebook登录，

3.  检查页面的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:19:25.613

使用以下方法。1）找到您要点击的链接的css选择器。

```
String cssSelector = ..blablalba..; 
```

//现在你可以点击你找到的链接了

```
driver.findElement(By.cssSelector(cssSelector)).click(); 
```

//或者直接使用js：

```
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssSelector+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString()); 
```

2）要验证页面的内容，您可以在 fb 页面上找到几个 web 元素，并简单地验证页面上存在该元素：

```
input.findElements(By.xpath("//xpath")).size() > 0
//or by css selector: 
input.findElements(By.cssSeector("html>...blablabla...")).size() > 0
driver.findElement(By.cssSelector("html>...blablabla...")).isDisplayed() 
```

或者只是使用 fluent wait 等待 fb 登录页面上出现 besic 元素：

```
 public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
new Function<WebDriver, WebElement>() {
            public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                }
                }
);
                           return  foo;              }     ; 
```

希望这对你有帮助）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-11T13:46:11.533

您也可以使用此方法：

```
new WebDriverWait(driver, 60).until(ExpectedConditions.presenceOfElementLocated(By.id("save"))); 
```

//您的网络对象 ID 是“保存”。

或者，您可以使用自定义方法。请参阅下面的示例方法，

```
 public static boolean waitForElement(By element, int timeOutInSeconds){
    boolean found = false;
    try{
        int counter=1;
        while(counter<timeOutInSeconds){
            if(driver.findElements(element).size()>0){
                found = true;
                break;
            }
            else{
                Thread.sleep(1000);
                counter++;
            }
        }
        return found;
    }
    catch(Exception e){
        e.printStackTrace();
        return found;
    }
} 
```

# jboss - 在 EJB 中使用 javax.resource.spi.work.Work 的 StreamGobbler

> ID：12476298
> 
> 赞同：1
> 
> 时间：2012-09-18T11:40:11.863
> 
> 标签：jboss, stream, ejb

我有一个无状态 EJB，它`Runtime.getRuntime().exec`围绕流程 inputStream 和 errorStream 执行并使用 StreamGlobbers。每个 gobblers 都有一个`javax.resource.spi.work.Work`相关的（由 WorkManager 启动）。

我的问题是：知道流 gobbler 与工作人员同步阅读，我是否违反了任何 ejb 3.0 合同？因为我使用了大量的等待、通知和中断。

另外，为了防止系统永远等待`process.waitFor();`，我创建了一个`java.util.Timer`导致当前线程中断的线程。

我正在使用 JBoss AS 4.2.3.GA。

PS：StreamGobbler 基本上是一个不断从另一个流中读取的线程。

# android - 限制 CursorLoader 中的查询

> ID：12476302
> 
> 赞同：19
> 
> 时间：2012-09-18T11:40:23.813
> 
> 标签：android, android-cursorloader

我正在尝试通过 CursorLoader 从 sqlite db 查询数据。当我浏览 android 开发者网站中的文档时，我找不到限制查询。

`CursorLoader(Context context, Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder)`

如何在 CursorLoader 中实现限制？

提前致谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-18T11:51:08.317

骇人听闻的方式：

```
String sortOrder = "ROWID LIMIT 5" 
```

这将导致`ORDER BY ROWID LIMIT 5`. [`ROWID`](http://www.sqlite.org/lang_createtable.html#rowid)将按 SQLite 保留的隐式行 ID 进行排序 - 非常接近于您根本不指定排序顺序时发生的情况。这并不是在滥用 order 参数不检查提供的值是否只是有效的订单类型这一事实。一种缓冲区溢出攻击。

更好的方法是定义`Uri`参数。

```
// query code
Uri queryUri = Uri.parse("content://what/ever/items");
queryUri = queryUri.buildUpon().appendQueryParameter("limit", "5").build();

// in ContentProvider
String limit = queryUri.getQueryParameter("limit"); 
```

这两种方法只有在`ContentProvider`与上述限制尝试兼容的情况下才有效。实际上没有明确定义的方法来限制或从`ContentProvider`. 每个都有`ContentProvider`自己的合同，因此上述内容不适用于每个提供商。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:50:50.093

您可以使用[SQLiteQueryBuilder](http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html)提供具有`LIMIT`子句能力的方法。或者您可以附加`LIMIT`到您的选择字符串。
此外，还有一个选项可以通过 uri（作为其中的一部分）提供限制并在您的 ContentProvider 中处理它。
看起来`CursorLoader`目前没有为它提供任何 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T23:07:42.370

我意识到这已经很晚了，但是sandrstar给了我一个想法，那就是使用你传递给 ContentProvider 的 Uri 并将限制作为最后一个路径段附加到它使用

```
Uri.withAppendedPath("uri" "/" + limitNumber); 
```

然后在您的内容提供者中，在您的 URI 匹配器中确保您匹配

```
MATCHER.addURI("authority", "uri" + "/#", matchInt); 
```

然后在您的查询中，检查与 URI 匹配的 matchInt 并获取最后一个路径段

```
uri.getLastPathSegment(); 
```

这将是您的限制，然后使用 sandrstar 推荐的 SQLiteQueryBuilder。

只是认为有一种好的技术可以将您的参数传递给 Provider 可能会很好。希望这可以帮助！

# ios - 什么是 CoreGraphics 和 zone_calloc？

> ID：12476308
> 
> 赞同：2
> 
> 时间：2012-09-18T11:40:46.733
> 
> 标签：ios, animation, memory-management, core-graphics, instruments

这张图片[不包括在这里，因为作为新用户，我不允许发布图片]是仪器（分配）的截图。它说责任库是CoreGraphics，责任调用者是zone_calloc。

1.  请解释一下CoreGraphics和zone_calloc是什么？

2.  为什么他们 malloc 这么多（588kb）？

3.  如果我想减少内存分配怎么办？

4.  在应用程序被操作系统杀死之前分配多少内存？我听说是 20MB，但我不确定。

PS：我在我的应用程序中使用了很多动画，我猜 7*588kb 内存分配与我的菜单有关，因为它在我的应用程序中有 7 个菜单项。

# html - 如何制作两列 IE中的自动高度调整？

> ID：12476310
> 
> 赞同：2
> 
> 时间：2012-09-18T11:40:49.083
> 
> 标签：html, css

我需要将两个 li 元素组合在一起，这样如果组中任何一个 li (Field7) 的高度增加，那么另一个 (Field6) 的高度也应该增加（不是它的内容：标签、输入），而不影响其他 li 元素的高度（field1、9、10 等）。

截至目前，我已经实现（见图）如下：

```
#fld_grp {
    margin: 5px;
    border: 1px solid #008e9c;
    height: auto;
    overflow: hidden;
    padding-bottom: 10px;
}
#fld_grp div.row {
    display: table-row;
    height: auto;
    overflow: hidden;
}
#fld_grp .hd {
    padding-left: 5px;
    line-height: 25px;
    background: #008e9c;
    color: #FFF;
    font-weight: 500;
    font-size: 14px;
}
#fld_grp ul {
    clear: left;
    list-style-type: none;
    margin: 0;
    padding: 0;
    text-align: left;
    display: table;
}
#fld_grp ul li {
    width: 463px;
    margin: 5px;
    height: auto;
    min-height: 30px;
    float: left;
    list-style: none;
    background: rgba(0, 0, 0, 0.1);
}
#fld_grp ul li.dbl {
    width: 935px;
}
#fld_grp ul li label {
    width: 50%;
    background: rgb(255, 235, 205);
    display: block;
    padding: 5px 10px;
    float: left;
    counter-reset: sub-section;
}
#fld_grp ul li label:before {
    counter-increment: section;
    content: counter(section) ". ";
}
#fld_grp ul li input {
    text-align: start;
    width: 170px;
    height: 20px;
    margin: 2px 15px 0 20px;
    background: none repeat scroll 0 0 transparent;
    border: 1px dashed rgba(255, 228, 196, 0.7);
    cursor: text;
}
#fld_grp ul li input:hover {
    border: 1px solid rgba(255, 228, 196, 0.7);
}
#fld_grp ul li input:focus {
    background: antiquewhite;
    border: 2px solid rgba(127, 255, 212, 0.7);
}
```

```
<div id="fld_grp">
    <div class="hd">
        <h3>Field Group1</h3>
    </div>
    <ul>
        <div class="row">
            <li>
                <label>Field1</label>
                <input type="text">
            </li>
            <li>
                <label>Field2</label>
                <input type="text">
            </li>
        </div>
        <div class="row">
            <li>
                <label>Field3</label>
                <input type="text">
            </li>
            <li>
                <label>Field4</label>
                <input type="text">
            </li>
        </div>
        <div class="row">
            <li class="dbl">
                <label>Field5(full field)</label>
                <input type="text">
            </li>
        </div>
        <div class="row">
            <li>
                <label>Field6</label>
                <input type="text">
            </li>
            <li>
                <label>Field7:This Long Label is really very long!</label>
                <input type="text">
            </li>
        </div>
        <div class="row">
            <li>
                <label>Field8</label>
                <input type="text">
            </li>
            <li>
                <label>Field9</label>
                <input type="text">
            </li>
        </div>
        <div class="row">
            <li class="dbl">
                <label>Field10(full field)</label>
                <input type="text">
            </li>
        </div>
    </ul>
</div>
```

我需要摆脱 Eclipse 给我的警告，以使我的网站符合 W3C 标准以符合 HTML4.01 标准。此外，我注定要让它在 IE7 上运行。

![在此处输入图像描述](../Images/613d81843db479408fcac2b7d58a22ef.png)

在 Andrew 的建议之后，这里的 CSS 解决了这个问题：

```
#fld_grp{
    margin: 5px;
    border: 1px solid #008e9c;
    height:auto;
    overflow: hidden;
    padding-bottom: 10px;
}
#fld_grp .hd{
    padding-left: 5px; 
    line-height: 25px; 
    background: #008e9c; 
    color: #FFF; 
    font-weight: 500; 
    font-size:14px;
    }
#fld_grp ul{
    clear:left;
    list-style-type:none;
    margin:0;
    padding:0;
    text-align:left;
    word-wrap: break-word;
}
#fld_grp ul li{
    width:932px;
    margin: 5px;
    height: auto;
    min-height: 35px;
    float:left;
    list-style:none;
    background: rgba(0,0,0,0.1);
    border:1px dashed #8B4513;
    display:table;
}
#fld_grp ul li > div{
    width:466px;
    background:green;
    display:table-cell;
    height:auto;
    min-height:35px;
    float:left;
}
#fld_grp ul li > div label{
    width: 50%;
    background: rgb(255, 235, 205);
    display: block;
    padding: 8px 10px;
    float:left;
}
#fld_grp ul li > div input{
    text-align: start;
    height: 20px;
    margin: 2px 15px 0 20px;
    background: none repeat scroll 0 0 transparent;
    border: 1px dashed rgba(255, 228, 196, 0.7);
    cursor: text;
}
#fld_grp ul li> div.dbl{
    width: 932px;
} 
```

结果：

![解决了](../Images/41d4ca3dcaad002619bbc05470d82131.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:55:58.560

更改您的标记。

对每一行使用一个 li，对行中的每一列使用一个 div。

```
<ul>
    <li class="clearfix">
        <div>
            <label>Field1</label>
            <input type="text">
        </div>
        <div>
            <label>Field1</label>
            <input type="text">
        </div>
    </li>
</ul> 
```

然后，您可以浮动您的 div，并将它们设为 50% 以获得两列。然后，您需要对您的 li 应用 clearfix 以强制它们包装 div

# c# - 代表的演变

> ID：12476316
> 
> 赞同：4
> 
> 时间：2012-09-18T11:41:19.020
> 
> 标签：c#, multithreading, delegates, history

我试图了解代表的演变。与理解它之前发生的事情相比，如何更好地理解这一点？我知道委托的概念来自 C++ 中的函数指针。

*1\. 引入函数指针的主要原因是什么？是不是支持多线程？*

> [Henk Holterman](https://stackoverflow.com/users/60761/henk-holterman)：委托/函数指针的存在是为了提供一定程度的灵活性。方法的选择可以与其调用分离。

在查看这个出色的线程资源时，我被介绍给了代表

[http://www.albahari.com/threading/](http://www.albahari.com/threading/)

这就是 Joe Albahari 对异步委托的看法：

> `ThreadPool.QueueUserWorkItem`没有提供一种简单的机制来在线程完成执行后从线程取回返回值。**异步委托调用**（简称异步委托）解决了这个问题，允许双向传递任意数量的类型化参数。此外，异步委托上的未处理异常可以方便地在原始线程（或更准确地说，调用 的线程`EndInvoke`）上重新抛出，因此它们不需要显式处理。

*2。所有代表本质上都是异步的吗？

> [Jon](https://stackoverflow.com/users/50079/jon)：委托是一个指向代码的指针。它本质上不是同步或异步的；调用它的方式和返回的结果决定了这一点。
> 
> [Henk Holterman](https://stackoverflow.com/users/60761/henk-holterman)：当你有一个委托实例 f 你可以同步调用 f() 或者你可以调用异步 f.BeginInvoke()

3.  除了事件之外，异步委托还有其他用途吗？

> [dasblinkenlight](https://stackoverflow.com/users/335858/dasblinkenlight)：委托在异步 API 中有很多用途，例如[.NET 异步 I/O](http://msdn.microsoft.com/en-us/library/kztecsys%28v=vs.80%29.aspx)。

4.  C# 中的委托/线程支持在各个版本中是如何演变的？
    *

> [dasblinkenlight](https://stackoverflow.com/users/335858/dasblinkenlight) : 对委托的核心支持保持不变，但该语言添加了许多重要的特性，以便更方便地定义委托。

C# 2.0：引入匿名委托
C# 3.5：添加了 lambda 表达式
C# 4.0：添加了任务并行库。

**编辑：**我在这里的大部分查询都已得到澄清。如果我能获得代表的“历史”并为他们提供更实际的用法，那就太好了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T11:51:07.077

让我们尝试几个：

1) 存在委托/函数指针以提供一定程度的灵活性。
它们允许方法的选择与其调用分离。

2）当您有委托实例`f`时，您可以同步调用 `f()`，也可以调用异步`f.BeginInvoke()`

3）是的，很多。并且事件通常是同步调用的。

4）这与理解它们相关吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T11:53:19.487

1.  引入委托的主要原因是提供一种操作可执行代码片段的机制：存储指向它的指针、传递给函数、组织数据结构等等。

2.  与所有函数调用一样，调用单个委托是同步的，即调用者必须等待委托完成才能取回控制权。但是，您可以通过传递一段可以在以后（异步）存储和执行的代码来使用委托来实现异步 API。

3.  异步 API 中有很多使用委托，例如[.NET 异步 I/O](http://msdn.microsoft.com/en-us/library/kztecsys%28v=vs.80%29.aspx)。

4.  委托的核心支持保持不变，但该语言添加了许多重要的特性，使定义委托更加方便。例如，C#2.0 添加了匿名委托，C#3.5 添加了 lambda。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-28T02:26:39.617

函数变量来自 60 年代的 LISP。甚至 Lambda 表达式这个术语也来自那里。整个概念被称为“作为第一类对象的函数”或简称为“第一类函数”。LISP 很有名——人们仍在学校学习它，因为它处理 1st-class 函数非常顺利——比函数指针或委托更好。当人们创造新的语言时，他们都知道应该尝试复制那个很酷的 LISP 功能。

用在一句话“委托是 C# 实现第一类函数的方式”中。

既然 C# 尝试使用 C++ 语法，为什么不使用 C++ 风格的函数指针呢？我认为这是整个不安全指针的事情，并且大多数 C# 用户都被引导远离使用指针。

关键字“delegate”是特定于 C# 的。我最好的猜测是因为委托设计模式（它使用函数指针）。当时的模式非常*庞大*，每个人都希望他们的代码清楚地使用它们。此外，大多数 C# 用户都没有接受过大量的正式培训。因此`delegate`，作为关键字是一种巧妙的方式，可以说“这是您对委托模式所需要的东西”。我认为 Patterns 的流行度下降是新`(x)=>{return x+1;}`版本的匿名函数删除该关键字的原因（并使用更通用的术语，lambda 表达式。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T12:01:55.737

1.函数指针的主要用途是支持两个函数作为其他函数和回调函数的参数，我认为它不是多线程的。

2.所有委托本质上不是异步的，必须与线程一起使用才能运行异步，如上述文章中所述

3.著名的用法之一是在 Lambda 表达式和 LINQ、回调、启动线程和事件处理中

4.我认为基本上委托是使用函数指针机制

# php - 用于 headmeta 的 Zend Framework 配置文件格式

> ID：12476322
> 
> 赞同：0
> 
> 时间：2012-09-18T11:41:40.533
> 
> 标签：php, zend-framework, format, configuration-files

我们可以以编程方式指定如下元标记：

```
$view->headMeta()->appendHttpEquiv('Content-Type', 'text/html; charset=utf-8'); 
```

以上如何通过配置文件来完成？我试过了

```
resources.view.headMeta.contentType = "text/html; charset=utf-8" 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:10:04.080

我发现我们可以在配置文件中添加以下条目：

```
resources.view.contentType = "text/html; charset=utf-8"
resources.view.language = "en" 
```

然后使用常规的东西：

```
protected function _initView() {
    $options = $this->getOptions();
    if(isset($options['resources']['view']['contentType'])) {
            $view->headMeta()->appendHttpEquiv('Content-Type',
                $options['resources']['view']['contentType']
            );
    }

    if(isset($options['resources']['view']['language'])) {
        $view->headMeta()->appendHttpEquiv('language',
                $options['resources']['view']['language']
        );
    }
     ...contd. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:49:39.093

请参阅此[页面](http://framework.zend.com/manual/1.12/en/zend.application.available-resources.html#zend.application.available-resources.view)- 它描述了 Zend_Application 引入的资源插件的配置选项。Kidna 埋在文档中。

例如，*contentType*值不应该要求您在`_initView`引导程序的方法中编写任何代码。

# php - 检查哪些 php 函数将在特定 php 版本中工作

> ID：12476328
> 
> 赞同：0
> 
> 时间：2012-09-18T11:41:58.243
> 
> 标签：php

至少这表明我不怕看起来很愚蠢。这里是这样：在编写我的 php 项目时，我确定它需要 php 版本 5.2 才能正常工作。我没有记录原因。现在，一个用户问我，如果他们在 5.1 上运行我的应用程序会出现什么问题，我根本不记得了。

是否有任何自动方法来检查使用 5.1 会失败的功能。我查看了 PHP_CodeSniffer，但我不确定它会做我想要的。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:45:35.163

[您可以使用3v4l.org](http://3v4l.org/)测试某些功能。这支持多个 php 版本，您可以在其中测试您的功能。

# jquery - jQuery切换问题

> ID：12476329
> 
> 赞同：1
> 
> 时间：2012-09-18T11:41:59.503
> 
> 标签：jquery, ajax, url, selector

我在使用 jquery 选择器的网站之一遇到问题：

```
$('a[title]').click(...) 
```

只有在站点的根目录中才会被调用。

当您单击页面顶部的导航时，div 会闪烁并通过 AJAX 加载内容，当您关闭它并尝试重新打开时，不会调用选择器。

编辑：这是创建导航链接的地方：

```
<a title="unternehmen" href="http://cheloufi.com/enoi_v2/">Unternehmen</a>
<a title="leistungen" href="http://cheloufi.com/enoi_v2/leistungen/">Leistungen</a>
<a title="information" href="http://cheloufi.com/enoi_v2/information/">Information</a> 
```

另请注意，即使 href 属性是“http://cheloufi.com/enoi_v2/”，当您单击链接时，站点也会重定向到“http://cheloufi.com/enoi_v2/#/enoi_v2/”。

然后让 div 推出：

```
$('a[title]').on('click', function() {

    if(contentState==0){                                                                                    //check content state                                                                                                                               

      contentOpen();                                                                                        //open content

      $('#toggleBut').css({backgroundPosition:'0px -40px'});

      contentState = 1;                                                                                     //indicate content is open

    }else{

      contentClose();   

     $('#toggleBut').css({backgroundPosition:'0px 0px'});

      contentState = 0;

    }
}); 
```

但是，该方法仅在您第一次单击链接时被调用，而不是在任何连续时间。

此外，这是一个修改后的 WordPress 主题，如果这有什么不同的话。

有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:50:33.443

应该

`$('a[title]').on('click', function() {alert('my function here')})`
或者
`$('body').on('click', 'a[title]', function() {alert('my function here')})`

将事件处理程序附加到新内容

编辑

这就是您的网站在我看来的样子

![地点](../Images/2eeb40b98be3e8467b8f0113ebad7077.png)

这就是你说的问题吗？
因为内容总是为我加载，但在我的屏幕之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:50:56.157

用于[`.on()`](http://api.jquery.com/on/)附加事件处理程序 - 您的`click`处理程序将仅附加到**页面加载时存在于 DOM 中的元素**

```
$(document).on('click', 'your_selector', function() {
  // your code
}); 
```

# jquery - blueimp jQuery-File-Upload 过滤类型和文件大小并发送新参数

> ID：12476330
> 
> 赞同：0
> 
> 时间：2012-09-18T11:42:02.957
> 
> 标签：jquery, jquery-plugins, file-upload, filtering

我正在使用带有此 JS 代码的 jQuery 插件[jQuery-File-Upload ：](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)

```
 $('#file_upload_single').fileupload({
        dataType: 'json',
        acceptFileTypes: /(\.|\/)(gif|jpe?g|tif|png)$/i,
        maxFileSize: 20000000, // 20MB            
        done: function (e, data) {
            $.each(data.result, function (index, file) {
                var msg = file.name + " upload terminado.";
                $('<p/>').text(msg).appendTo($('#progressLog'));
            });
            $('#progressBar .bar').css('width','0%');
        },
        progressall: function (e, data) {
            var progress = parseInt(data.loaded / data.total * 100, 10);
            $('#progressBar .bar').css('width',progress + '%');
        }
    });

    $('#file_upload_single').bind('fileuploadsubmit', function (e, data) {
        var inputs = data.context.find(':input');
        if (inputs.filter('[required][value=""]').first().focus().length) {
            alert("Por preencher");
            return false;
        }
        data.formData = inputs.serializeArray();
    }); 
```

在 HTML 中：

```
<form id="file_upload_single" action="UploadServlet" method="POST" enctype="multipart/form-data">
            <input id="file_2" type="file" name="file_2" 
                   style="background: gainsboro;" size="70" />
            <p>
                <label for="file_2_title">Título:</label>
                <input id="file_2_title" name="file_2_title" type="text" required title="Título" size="30"/>
            </p>
            <p>
                <label for="file_2_desc">Descritivo</label>
                <input id="file_2_desc" name="file_2_desc" type="text" required title="Descritivo" size="60"/>
            </p>
        </form>
        <button id="formSubmit_single" class="myButton ui-widget ui-state-default ui-corner-all bt_register" 
                type="button" name="formSubmit_single" value="Upload" title="Máx. 20MB cada, do tipo: gif, jpeg, jpg, tif ou png">Imagem única, com descritivo</button> 
```

如果注释了绑定方法，则文件正确上传，但没有完成任何过滤器：acceptFileTypes 和 maxFileSize。在 servlet 中，"String file_2_title = request.getParameter("file_2_title");" 给出空值。

如果没有注释绑定方法（如上），则不会运行！萤火虫显示：

```
TypeError: data.context is undefined
var inputs = data.context.find(':input'); 
```

bind 方法就像在[提交表单数据](https://github.com/blueimp/jQuery-File-Upload/wiki/How-to-submit-additional-Form-Data)中一样。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T21:48:26.720

我使用了不同的方法来解决附加表单数据的问题。我在“添加”回调中做到了。

```
add: function (e, data){
    data.formData = {customInfo: <custom information>};
    data.submit();
}, 
```

这工作正常。但我也无法让过滤器工作。

# javascript - css3盒子模型浮动元素

> ID：12476342
> 
> 赞同：-2
> 
> 时间：2012-09-18T11:42:50.223
> 
> 标签：javascript, jquery, html, css

我是网页设计的新手，我认为我对盒子布局的理解问题。

[这是小提琴](http://jsfiddle.net/kongaraju/XxJqr/3/)

HTML

```
<div class="content">
  <p class="inner left">....foofoofoo..</p>
  <p class="inner right">....blablabla..</p>
</div> 
```

css

```
.content{
   display:-webkit-box;
} 
```

现在**我的问题是我必须将内部元素一个向左对齐，另一个向右对齐**。

我知道如何以旧方式做到这一点，但我想用 box 属性来做到这一点。

老办法。

```
.content{
  display:block;
}
.left{
   float:left;
}

.right{
  float:right;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:05:49.837

使用 box-pack 属性来证明您的内容。

```
box-pack:justify; 
```

[工作示例的小提琴](http://jsfiddle.net/kongaraju/XxJqr/5/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:24:44.143

这是一个非常有效的替代方案：

```
.content{
    display: -webkit-box;
}

.inner {
    -webkit-box-flex: 1;
} 
```

并且不需要固定宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:48:26.500

Opera 和 IE 不支持这一点，因为它是基于布局的，它可能只用于企业网站，但对于个人来说还可以，因为无论如何您都需要以正常方式对其进行样式设置。

# google-bigquery - Google Bigquery 表别名曾经工作过，现在出现错误

> ID：12476348
> 
> 赞同：1
> 
> 时间：2012-09-18T11:43:29.447
> 
> 标签：google-bigquery

我昨天在下面运行以下查询，它工作正常。现在每次我运行它时，它都会说，“表都没有字段 user_id”

```
select
  all.user_id,
  UTC_USEC_TO_YEAR(timestamp) as time,
  sum(amount) as amount
from foo.bar as all
join (select user_id, max(version) as max_version from foo.bar group by user_id) as latest
on all.version = latest.max_version and all.user_id = latest.user_id
group by all.user_id, time; 
```

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:21:16.057

昨天我们开启了一个微妙的模式验证更改，我们已经尝试开启了几个星期。它将使我们能够在未来允许模式演变（例如向表中添加列），这是客户一直要求的。然而，这种变化似乎产生了意想不到的副作用。我将还原更改，直到我们可以确保它不会遇到此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:10:19.023

有趣的，

一时兴起，我像这样为所有列添加了前缀并且它有效。它昨天也在工作，所以矩阵中有一些小故障

```
select
  all.user_id,
  UTC_USEC_TO_YEAR(all.timestamp) as time,
  sum(all.amount) as amount
from foo.bar as all
join (select user_id, max(version) as max_version from foo.bar group by user_id) as latest
on all.version = latest.max_version and all.user_id = latest.user_id
group by all.user_id, time; 
```

如果 bigquery 团队的某个人可以评论原因，那就太好了。

# c++ - SQL Server Requery() 有时会挂起

> ID：12476349
> 
> 赞同：0
> 
> 时间：2012-09-17T21:35:43.253
> 
> 标签：c++, sql-server, visual-c++, sql-server-2008-r2

我对 Visual C++ 和 Microsoft SQL Server 2008R2 有疑问。

以下代码偶尔会挂起：

```
 Object->Update();

  if(Object->CanRestart())
  {
     //Why does this not return??
     m_pDBRoRBaseObject->Requery();
  } 
```

`Object`源自`CRecordset`。`::SQLExecute(m_hstmt)`在我看来，该方法中的调用似乎`Requery()`挂起，但我无法（无论如何以我目前的技能）想办法解决这个问题。

有没有人有类似的问题，或任何形式的见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:30:31.113

有一个共享内存问题...修复了一个事件对象适当地发出信号。还有乌鸦的热气腾腾的帮助。可口！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:00:56.587

我似乎记得（很久很久以前）Requery - 至少使用某些数据库驱动程序 - 使用您已经收集的行的 PK 将查询重建为一个大 IN 语句。这当然可能效率低下，具体取决于您的设置、指标、数据等。

值得启动 SQL Profiler 并查看您的 Requery() 语句正在生成什么。

# xpath - 如何通过 Xpath 组合不同的返回值

> ID：12476353
> 
> 赞同：1
> 
> 时间：2012-09-18T11:43:39.470
> 
> 标签：xpath, xpath-2.0

```
<p class="pd-price">
    <img alt="€" src="http://www.redcoon.es/templates/tpl/img/pd/pd-price/euro_small.png">
    <img class="offsetStandard" alt="2" src="http://www.redcoon.es/templates/tpl/img/pd/pd-price/2.png">
    <img class="offsetStandard" alt="6" src="http://www.redcoon.es/templates/tpl/img/pd/pd-price/6.png">
    <img class="offsetStandard" alt="1" src="http://www.redcoon.es/templates/tpl/img/pd/pd-price/1.png">
    <img class="offsetStandard" alt="-" src="http://www.redcoon.es/templates/tpl/img/pd/pd-price/minus_point.png">
</p> 
```

如何为此段落编写 Xpath 以使其返回“€261-”。所有 alt 标签的组合字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:53:00.943

采用

```
 string-join(p/img/@alt, "") 
```

这将首先选择所有 alt 属性的文本，然后将其组合成一个字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:53:17.263

在 Xpath 2 中，您有[字符串连接](http://www.w3.org/TR/xpath-functions/#func-string-join)

```
string-join(p[@class='pd-price']/img/@alt, '') 
```

# asp.net-mvc-3 - 如何在 ASP.NET MVC 中使用 Backbone.js 实现 Jqgrid

> ID：12476354
> 
> 赞同：0
> 
> 时间：2012-09-18T11:43:40.350
> 
> 标签：asp.net-mvc-3, backbone.js, jqgrid, jqgrid-asp.net

有人可以指导我如何使用 Backbone.js 实现 jqgrid

**我对jqGrid**有相当多的了解，因为我以前曾多次使用过它们。

关于**Backbone.js**，我已经做了一个多星期的很多教程了。我已经完成了backbone.js 的[本](http://net.tutsplus.com/tutorials/javascript-ajax/build-a-contacts-manager-using-backbone-js-part-1/)教程。

现在我需要一些关于如何开始的指导。

我尝试在互联网上搜索，但没有找到任何讨论或解释这一点的文章。

请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:08:11.297

虽然它不是您问题的直接答案，但总的来说，这可能有助于处理带有 Backbone 的 jQuery 插件。

[http://lostechies.com/derickbailey/2012/02/20/using-jquery-plugins-and-ui-controls-with-backbone/](http://lostechies.com/derickbailey/2012/02/20/using-jquery-plugins-and-ui-controls-with-backbone/)

我曾经在一个项目上完成过 jQGrid + Backbone ......曾经......这并不有趣，因为 jQGrid 的工作方式并试图为你做所有事情。您必须放弃对 Backbone 视图的大量控​​制，让 jQGrid 为您完成。

最后，我撕掉了 JQGrid 并放入了 KendoUI 的网格。

# silverlight - 具有一组特定列的 Silverlight XAML 列表框

> ID：12476357
> 
> 赞同：0
> 
> 时间：2012-09-18T11:44:03.470
> 
> 标签：silverlight, xaml, listbox

我的目标是有一个包含 3 个项目的可选列表。对于选择，我想使用一个列表框，这 3 个项目应该在屏幕的整个宽度上等距分布。

我的第一次尝试是在我的列表框的项目模板中放置一个带有列的网格，但默认情况下所有项目都放在第一列中。：

```
<ListBox ItemsSource="{Binding list}">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                </Grid>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
    </ListBox> 
```

我怎样才能使它们也被放入另外两个中？提前致谢！

# enterprise-architect - 显示相关类，如 Enterprise Architect 中的属性

> ID：12476358
> 
> 赞同：1
> 
> 时间：2012-09-18T11:44:05.183
> 
> 标签：enterprise-architect

我创建了 3 个新的 Stereotyp（objStereotyp，颜色，有颜色），现在我想创建“objStereotyp”类型的对象（class1，class2）和“color”类型的对象（红色，绿色，黄色）并连接每个具有一个或多个颜色对象的 Object("objStereotyp") 使用新定义的“有颜色”关系。

现在的问题是如何列出与“有颜色”关系相关的颜色定型名称。在示例中，我添加了名称作为注释，这就是我想要实现的自动。

![在此处输入图像描述](../Images/75597fb931cea08a7a5e1161fc84df2b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:46:24.073

我相当肯定答案是否定的，你不能自动做到这一点。

在 UML 中，属性和定向关联（具有目标角色）在语义上是等价的，因此您的建议将导致同一概念的两种表示形式。

您总是可以编写脚本或加载项来执行此操作，但总的来说我不会推荐它。使用这两种方式来描述同一事物会使模型难以维护，并且最终是冗余信息。

# machine-learning - VC Dimension of Circle，一个特例

> ID：12476359
> 
> 赞同：11
> 
> 时间：2012-09-18T11:44:06.260
> 
> 标签：machine-learning

我读过一个圆可以在 2D 空间中粉碎 3 个点，这实际上是圆的 VC 维度。

假设我们有三个点 (5,2) (5,4) 和 (5,6)。如何绘制一个包含（5,2）和（5,6）而没有（5,4）的圆圈？那是不可能的！
如果它不能破碎，那么VC Dimension怎么会是3个圆圈。或者我在 VC Dimension 的定义中假设是错误的；一个假设必须粉碎所有可能的空间子集的所有可能场景？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-18T12:57:58.273

VC 维度是可以破碎的最大点数。{(5,2), (5,4), (5,6)} 不能被圆圈打碎，但 {(5,2), (5,4), (6,6)} 可以被圆圈打碎，因此 VC 维度至少为 3。证明它恰好是 3 更难。

这里有一个与 Qnan 的回答有关的技术点。如果圆分类器总是将圆内的点分类为 1，圆外的点分类为 0，那么 {(5,2), (5,4), (5,6)} 不能被破碎。另一方面，如果圆分类器也可以将圆内的点分类为 0，那么 {(5,2), (5,4), (5,6)} 可以按照 Qnan 的解释进行粉碎。

Qnan，关于你的评论，如果有人说 n 是具有属性 P 的最大点数，那么为了证明 n >= m，找到**任何**具有属性 P 的 m 个点的集合就足够了。如果你找到一个或一千组不具有性质 P 的 m 个点，那么这并不能证明关于 n 的任何事情。（除非您已经枚举了所有可能的大小为 m 的点集。）

VC 维度是可以粉碎的最大点数。如果分类器的 VC 维数为 100，仍然可以找到 3 个分类器无法粉碎的点。我们可以将 VCB 维度定义为最大数 n，这样所有大小为 n 或更小的集合都可以被粉碎。Asymptote的原始示例表明，笛卡尔平面上的圆形分类器的VCB维度（假设圆内为1，圆外为0）小于或等于2，因为这三个点不能被破碎；但是，Asymptote 的示例并未显示 VC 维度小于 3，因为还有其他大小为 3 的点集可以被粉碎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T18:35:21.080

关键是可以绘制圆，使得属于一个类的所有点都在里面，而其余的点在外面。哪个类是哪个并不重要，因为交换标签只需要反转分类器。

在您的情况下，将 (5,2) 和 (5,6) 与 (5,4) 分开很简单，只需将后者包含在圆圈中即可。对于分类器，“内部”和“外部”无关紧要。重要的是它们可以归为 0 错误。

**编辑** 严格来说，VC维度是为参数化分类器定义的，并且有多个分类器，其边界将被描述为“圆”。例如，`f(x)=(x-x0)*(x-x0)`不能在一条线上打散一组三个点，但是`f(x)=a*(x-x0)*(x-x0)`可以，并且两个分类器都有圆形边界。第二个的 VC 维度实际上是 3，而第一个的 VC 维度是 2。

# sql-server - 现在和下一个电视节目信息SQL查询

> ID：12476360
> 
> 赞同：6
> 
> 时间：2012-09-18T11:44:09.967
> 
> 标签：sql-server, tsql, schedule

我的表是多天和多频道的预定电视节目列表。

```
SELECT * FROM [Scheduled_Programmes]

Channel   Date          Time     Title
1         2012-09-19    06:00    Family Guy
2         2012-09-19    06:01    CSI Miami
3         2012-09-19    06:20    News
1         2012-09-19    06:30    Heroes
2         2012-09-19    07:01    Spiderman
3         2012-09-19    06:40    Batman
1         2012-09-19    07:30    Micky Mouse
2         2012-09-19    07:31    CSI New York
3         2012-09-19    07:10    Friends
1         2012-09-19    07:55    The Wire
2         2012-09-19    08:00    Dodgeball
3         2012-09-19    07:35    Gossip Girl 
```

我正在尝试创建的结果集是 What's on Now 和 What's on Next。

```
Let's assume the current datetime is (D/M/Y HH:MM) 19/09/2012 07:15 
```

所以像：

```
 Channel 1     Channel 2       Channel 3
NOW       Heroes        Spiderman       Friends  
NEXT      Micky Mous    CSI New York    Gossip Girl 
```

我一直在绞尽脑汁寻找最好的方法来做到这一点，而不必为每个频道硬编码单独的查询。我想我现在已经有了过度思考的阶段，所以如果有人能指出我正确的方向，那就太好了。

谢谢

PS：如果它有所作为，我在 Microsoft SQL Server 2012 上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:32:46.330

这看起来真的像是你会让你的 GIU 格式化和旋转的东西，但这是我的尝试。

```
SELECT * FROM (
    SELECT * FROM (
        SELECT X.Status, X.Channel, X.Title FROM (
        SELECT 'NOW' as Status, Channel, Title, RANK() OVER (PARTITION BY Channel ORDER BY Time DESC) RANKED FROM Sceduled_Programs SP
        WHERE DateTime <= '7:15') X
        WHERE X.RANKED = 1
    ) A
    UNION ALL
        SELECT * FROM (
        SELECT Y.Status, Y.Channel, Y.Title FROM (
        SELECT 'NEXT' as Status, Channel, Title, RANK() OVER (PARTITION BY Channel ORDER BY Time ASC) RANKED FROM Sceduled_Programs SP
        WHERE DateTime > '7:15') Y
        WHERE Y.RANKED = 1
    ) B
) DataToPivot
PIVOT (MAX(Title) FOR Channel IN ([1], [2], [3])) AS PivotTable 
```

编辑：我在这里只使用时间，但只是添加日期。您应该真正考虑组合日期和时间列。

Edit2：要添加日期，只需将时间替换为此。甚至应该在日期范围内工作。

```
WHERE CAST(Date AS DATETIME) + CAST(Time AS DATETIME) > '19/09/2012 07:15' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T13:16:55.780

这是[SQLFiddle 示例](http://sqlfiddle.com/#!6/a80ef/31)。**如果程序在前一天开始并在当前结束或在当前开始并在第二天结束**（对于 NOW 和 NEXT 结果），此查询也很有效。

对于当前日期，只需替换`cast('09/19/2012 07:15' as datetime)`为`CURRENT_TIMESTAMP`：

```
with T as 
(select channel, title, 
       (date+cast(Time as datetime )) as D_Time 
       from Scheduled_Programmes
)

select nn,
   max(CASE when channel=1 then Title end) as Chanel1, 
   max(CASE when channel=2 then Title end) as Chanel2,
   max(CASE when channel=3 then Title end) as Chanel3

from
(
select 'NOW' nn,Channel,Title,D_time,
    row_number() over (PARTITION by channel 
                      order by D_time desc) rn 
    from T
    where D_time<=cast('09/19/2012 07:15' as datetime)
union
select 'NEXT'nn,Channel,Title,D_time,
     row_number() over (PARTITION by channel 
                        order by D_time asc) rn 
     from T
     where D_time>cast('09/19/2012 07:15' as datetime)
) ATable where rn=1
group by nn
order by nn desc; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:09:46.203

```
select distinct Channel
, (
select top 2 Title from 
        (
         select Title
         from [Scheduled_Programmes] s
         where s.Channel = o.Channel
         and Date >='2012-09-19' and Time >='07:15' 
         group by Channel
         order by Date, Time desc
        ) x
) as Prog
from [Scheduled_Programmes] o 
```

我没有尝试过（由于此时 SQL Server 不可用），但这应该可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T12:24:13.670

要获取数据和交叉表，请使用以下内容。您可以在第一次选择中重命名通道列，但您必须在数据透视列表中指定有效通道。

Nb 可以通过将日期和时间字段组合到单个日期时间字段来简化代码。

```
declare @current_date datetime = '20120919 07:15'

select *
from (
  select whenon, a1.channel, title from (
  select a.channel, MAX(CAST(Date AS DATETIME) + CAST(Time AS DATETIME)) as DateTime, 'now' as whenon
  from Scheduled_Programmes a
  join (
    select channel, MIN(CAST(Date AS DATETIME) + CAST(Time AS DATETIME)) as NextTime
    from Scheduled_Programmes 
    where CAST(Date AS DATETIME) + CAST(Time AS DATETIME) > @current_date
    group by channel
  ) b on a.channel = b.channel and CAST(Date AS DATETIME) + CAST(Time AS DATETIME) < NextTime
  group by a.channel
  union
  select channel, MIN(CAST(Date AS DATETIME) + CAST(Time AS DATETIME)), 'next' from Scheduled_Programmes where CAST(Date AS DATETIME) + CAST(Time AS DATETIME) > @current_date
  group by channel

  ) a1
  join Scheduled_Programmes b1 on a1.channel = b1.channel and a1.DateTime = CAST(Date AS DATETIME) + CAST(Time AS DATETIME)
) sub
pivot (max(title) for channel in ([1], [2], [3])) pivottable
order by whenon desc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T13:53:24.717

另一个可能的选项 - 计算时间差并获取最小的 +ve 值（下一个）和最小的 -ve 值（现在） - 假设 DATE 和 TIME 类型字段，还返回自开始/直到开始的分钟数。

```
;with T(Channel, Date, Time, Title, delta) as (
select 
    *,
    datediff(minute, '19 sep 2012 07:15:00', dateadd(day, datediff(day, 0, date), cast(time as datetime2)))
from 
    Scheduled_Programmes
)
select 
case when T.delta >= 0 then 'Next' else 'Now' end,
T.* 
from T
inner join (
    select
        channel,
        min(case when delta > 0 then delta end) as starts_in,
        max(case when delta < 0 then delta end) as started
    from t
    group by channel
) T2
    on T.Channel = T2.Channel and (t.delta = T2.starts_in or t.delta=T2.started)
order by Channel, delta 
```

# iphone - 为什么 UIWebView 锚点的目标被忽略？

> ID：12476361
> 
> 赞同：2
> 
> 时间：2012-09-18T11:44:14.053
> 
> 标签：iphone, ios, uiwebview, mobile-safari

我`UIWebView`在我正在开发的 iPhone 应用程序中嵌入了一个。我正在尝试通过在锚点上使用 target="_blank" 在 Safari 中打开链接。

我看到目标属性被忽略`UIWebView`，链接没有在新的 Safari 实例中打开。这是为什么？

我知道为了完成这项工作，我必须使用`shouldStartLoadWithRequest`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:51:26.570

You should use `openURL` to make Safari open a web page from your app:

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://..."]]; 
```

If you want to "intercept" the tap on a given link and open Safari with that URL, you can use, as you say, `shouldStartLoadWithRequest`. I would suggest to use a custom scheme for the protocol of your URL, so you can differentiate links that should open in Safari from links that can be open in your `UIWebView`:

```
 - (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {
if ([[[request URL] scheme] isEqual:@"safari"])
    [[UIApplication sharedApplication] openURL:[NSURL stringByReplacingOccurrencesOfString:@"safari://" withString:@"http://"]];

 } 
```

In this case, you would specify your urls in the HTML page as "safari://..."

Otherwise, simply call `openURL` passing the full URL to it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:54:24.563

Perhaps you can try something like:

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.google.com"]]; 
```

# php - PHP：解析 SOAP 响应

> ID：12476366
> 
> 赞同：1
> 
> 时间：2012-09-18T11:44:35.687
> 
> 标签：php, parsing, soap, xsd, xml-parsing

我对 SOAP 没有太多经验，但需要为我的工作构建验证器并使用特定的 SOAP wsdl。

我已经建立了连接和调用，一切正常，但我收到了我认为是 XML 的响应数据，这是输出的一小部分：

```
<user id=”54354334543”&gt;
<firstname>My firstname</firstname>
<lastname>My lastname</lastname>
<email>my_email@text.com</email>
<nickname>My Nickname</nickname>
<source>Update_and_add</source>
</user> 
```

此响应是验证中的一个步骤，因此我必须能够检索单个项目，例如并将它们用于进一步查找。

所以我的问题是，我如何解析这个以便取出物品？我尝试了不同的方法并将其转换为数组，但我没有任何运气这样做。

任何建议或帮助将不胜感激。

问候，
- 梅斯蒂卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:59:46.377

```
$xml = '<user id="54354334543">
<firstname>My firstname</firstname>
<lastname>My lastname</lastname>
<email>my_email@text.com</email>
<nickname>My Nickname</nickname>
<source>Update_and_add</source>
</user>';
print_r(json_decode(json_encode(simplexml_load_string($xml)))); 
```

输出：

```
stdClass Object
(
    [@attributes] => stdClass Object
        (
            [id] => 54354334543
        )

    [firstname] => My firstname
    [lastname] => My lastname
    [email] => my_email@text.com
    [nickname] => My Nickname
    [source] => Update_and_add
) 
```

所以你可以这样做：

```
$data = json_decode(json_encode(simplexml_load_string($xml)));
echo $data->nickname; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:20:33.053

还有这个功能：

[http://php.net/manual/en/book.simplexml.php#108035](http://php.net/manual/en/book.simplexml.php#108035)

尽管我会先尝试通过 JSON 解决方案进行过滤，但这可能会更高效、更清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T12:29:46.303

尝试这个

```
<?php
$k = '<user id="54354334543">
<firstname>My firstname</firstname>
<lastname>My lastname</lastname>
<email>my_email@text.com</email>
<nickname>My Nickname</nickname>
<source>Update_and_add</source>
</user>';
$xml = simplexml_load_string($k);
echo $id =  $xml['id']; 
echo "<br>".$firstname =$xml->firstname;
?> 
```

输出

```
54354334543
My firstname 
```

# asp.net-mvc - ActionLink 删除确认

> ID：12476367
> 
> 赞同：3
> 
> 时间：2012-09-18T11:44:38.120
> 
> 标签：asp.net-mvc, actionlink

我想制作一个 Javascript 弹出窗口，询问我是否要删除列表。

这是我目前所拥有的（不起作用 - 控制器捕获时 Guid 为空）。

```
@Html.ActionLink("Delete", "Delete", "Listing", listing.Guid, new { onclick = "return confirm('Are you sure you want to delete this listing?')" }) 
```

第一个 Delete 是字符串，第二个 Delete 是方法的 ActionName，Listing 是控制器名称，listing.Guid 是我要发送的参数，最后，当然，onclick 是 Javascript。

知道我可能会在哪里出错吗？

**编辑**另外，知道我怎样才能有一个更漂亮的确认对话框吗？使用引导程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T11:46:26.597

您可以使用匿名对象来传递路由值：

```
@Html.ActionLink(
    "Delete", 
    "Delete", 
    "Listing", 
    new { id = listing.Guid }, 
    new { onclick = "return confirm('Are you sure you want to delete this listing?')" }
) 
```

以及相应的控制器动作：

```
public ActionResult Delete(Guid id)
{
    ...
} 
```

是的，使用 ActionLinks 和 GET 请求来调用正在修改服务器上的状态的操作（例如删除某些内容）是一个非常糟糕的主意。更好的方法是在这种情况下使用正确的 HTTP 动词 - DELETE。但由于 HTML 表单并不普遍支持此动词，您可以使用 AJAX 或使用 POST 动词：

```
@using (Html.BeginForm("Delete", "Listing", new { id = listing.Guid }, FormMethod.Post, new { onsubmit = "return confirm('Are you sure you want to delete this listing?');" }))
{
    @Html.HttpMethodOverride(HttpVerbs.Delete)
    <button type="submit">Delete</button>
} 
```

以及您各自的控制器操作：

```
[HttpDelete]
public ActionResult Delete(Guid id)
{
    ...
} 
```

# eclipse - 如何在 Windows 中为 Eclipse 配置 CVS 服务器...？

> ID：12476370
> 
> 赞同：0
> 
> 时间：2012-09-18T11:44:47.970
> 
> 标签：eclipse, cvs

我想在我的工作场所配置 CVS 服务器以进行 Eclipse 开发。请给出在 windows 中配置 CVS 服务器的步骤。提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:25:18.880

还有[http://wiki.eclipse.org/CVS_FAQ](http://wiki.eclipse.org/CVS_FAQ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:47:49.257

你试过这个网址吗？

[http://ist.berkeley.edu/as-ag/tools/howto/cvs-eclipse-setup.html](http://ist.berkeley.edu/as-ag/tools/howto/cvs-eclipse-setup.html)

# php - 如何获取“the_date”的unix时间戳

> ID：12476371
> 
> 赞同：2
> 
> 时间：2012-09-18T11:44:54.007
> 
> 标签：php, wordpress

如何获得已发布帖子的 unix 时间戳（“the_date”或“the_time”函数）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T11:49:11.110

只需传入 Epoc 参数即可。`the_time()`将输出字符串；`get_the_time()`会将其返回到变量中以供其他地方使用。

```
$timestamp = get_the_time('U'); 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-09-18T12:12:12.550

很简单：

```
$unixTimestamp = time(); 
```

# android - 在将活动 xml 的布局从 LinearLayout 更改为 RelativeLayout 后，获取 ClassCast 异常

> ID：12476382
> 
> 赞同：1
> 
> 时间：2012-09-18T11:45:37.253
> 
> 标签：android, android-linearlayout

我将活动布局从 LinearLayout 更改为 RelativeLayout 但最终出现以下错误：-

09-18 16:18:07.949: E/AndroidRuntime(635): java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams

除了最后一个 EditText 的 align_parentBottom 属性外，LinearLayout 中的一切都运行良好。应该在底部。

```
 DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);

        LayoutParams params = new LayoutParams(metrics.widthPixels/3, LayoutParams.WRAP_CONTENT);
        selectOne.setLayoutParams(params);
        selectTwo.setLayoutParams(params);
        selectThree.setLayoutParams(params); 
```

selectOne、selectTwo 和 Three 是页面顶部的按钮。我只在这条线上收到错误。

我的活动 xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background_violet"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/selectLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/emptyText1"
        android:layout_alignParentTop="true"
        android:gravity="center"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/selectReleased"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/not_selected_button"
                android:gravity="center"
                android:text="Released"
                android:textStyle="normal" />

            <Button
                android:id="@+id/selectReleasing"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/selected_button"
                android:gravity="center"
                android:text="This Weekend"
                android:textStyle="normal" />

            <Button
                android:id="@+id/selectUpcoming"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/not_selected_button"
                android:gravity="center"
                android:text="Upcoming"
                android:textStyle="normal" />
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/emptyText1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="5px" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/monthLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/emptyText2"
        android:layout_below="@+id/emptyText1"
        android:layout_gravity="center"
        android:gravity="center" >

        <Button
            android:id="@+id/select_month"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:fadingEdge="horizontal"
            android:textColor="#000000"
            android:textStyle="bold"
            android:visibility="visible" >
        </Button>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/emptyText2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="5px" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/msgTxt"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/selectAfterLayout"
        android:layout_below="@+id/emptyText2"
        android:layout_gravity="center"
        android:gravity="center" >

        <TextView
            android:id="@+id/msg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=""
            android:visibility="invisible" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/selectAfterLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/aboveLay"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:orientation="horizontal" >

            <ListView
                android:id="@+id/moviesLV"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1.0" >
            </ListView>
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/textTest111"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:layout_alignParentBottom="true">
    </LinearLayout>

</RelativeLayout> 
```

收到以下错误：-

```
 ```
09-18 17:47:52.869: E/AndroidRuntime(1122): FATAL EXCEPTION: main
09-18 17:47:52.869: E/AndroidRuntime(1122): java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:654)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:306)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.view.View.measure(View.java:8171)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.view.View.measure(View.java:8171)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:578)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:362)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.view.View.measure(View.java:8171)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.view.View.measure(View.java:8171)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.view.View.measure(View.java:8171)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.os.Looper.loop(Looper.java:123)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at android.app.ActivityThread.main(ActivityThread.java:4627)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at java.lang.reflect.Method.invokeNative(Native Method)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at java.lang.reflect.Method.invoke(Method.java:521)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-18 17:47:52.869: E/AndroidRuntime(1122):     at dalvik.system.NativeStart.main(Native Method) 
``` 
```

* * *

 `## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:53:16.223

当您第一次使用`LinearLayout`和使用`LayoutParams`时，您的 IDE 可能会`LinearLayout.LayoutParams`自动导入，因为那是您使用的那个。现在您已经切换到`RelativeLayout`，您需要使用`RelativeLayout.LayoutParams`. 您可以：

1.  将您的导入语句更改为`RelativeLayout.LayoutParams`vs`LinearLayout.LayoutParams`

2.  将您的`LayoutParams`行更改为更具体：`RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(...)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:11:17.763

您必须将参数转换为相对布局。尝试这样的事情 `LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(metrics.widthPixels/3, LayoutParams.WRAP_CONTENT);``

# ruby-on-rails - 如何从 Rails 中的 ActiveRecord 查询中删除异常值

> ID：12476384
> 
> 赞同：0
> 
> 时间：2012-09-18T11:45:41.543
> 
> 标签：ruby-on-rails, database, postgresql, statistics, outliers

好的，所以场景是这样的：

我问一个问题“你每周在食物上花多少钱？”

在指定数量的贡献后，假设 100 我想扫描结果，并找到明显的虚假结果。所以说平均值是 80 英镑，但是一些 numty 投入了 1 的价值，而其他人投入了 10,000 英镑。

要求是不对输入的数据进行验证，而是动态分析数据并确定数据的有效范围，在数据库的统计更新期间从结果中剔除异常值。

使用 Rails 3.2、ActiveRecord 和 Postgresql 实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:59:20.370

消除错误结果的一个好方法是计算[标准偏差](http://en.wikipedia.org/wiki/Standard_deviation)。您可以使用 posttgres 执行此操作：

```
SELECT stddev(amount) FROM answers 
```

然后，您可以查看答案是否超出此范围，并在需要时删除。

请注意，这总是会删除一些答案，所以如果你不期待任何 numties，那么不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:28:29.783

> 所以说平均值是 80 英镑，但是一些 numty 投入了 1 的价值，而其他人投入了 10,000 英镑。

假设有人投入了 117 英镑。那是异常值吗？127 英镑呢？137 英镑？

识别异常值是一项统计工作，而不是真正的数据库工作。只有当数据库返回所有相关数据时，您才能做好这项工作。如果您正在用 Ruby 编写统计软件，那么我会说这是 Ruby 的工作（Ruby 程序员的工作）来帮助您确定哪些值是异常值，哪些不是。

确定了哪些值是异常值后，很容易从计算中消除它们，方法是运行时排除，或者再次运行查询，范围如`amt_spent >= 53 and amt_spent <= 117`. 但是考虑更强大的统计技术，这些技术不受异常值的影响很大。

您也可以从数据库中删除这些行，但这可能会产生误导。我自己从不这样做。

[异常值检测](http://www.itl.nist.gov/div898/handbook/eda/section3/eda35h.htm)

# mysql - mysql在哪里保存gearman mysql udf文件的路径？

> ID：12476391
> 
> 赞同：2
> 
> 时间：2012-09-18T11:45:55.433
> 
> 标签：mysql, shared-libraries, user-defined-functions, gearman

我一直在尝试使用 gearman mysql udf。我已经从[http://gearman.org/index.php?id=download下载了 tarball 并按照](http://gearman.org/index.php?id=download)[http://gearman.org/index.php?id=mysql_udf_readme](http://gearman.org/index.php?id=mysql_udf_readme)上给出的说明安装了它
我正在尝试创建 gman_do mysql中的函数，但我收到一些错误
错误是-

```
mysql> create function gman_do returns string soname "libgearman_mysql_udf.so";
ERROR 1126 (HY000): Can't open shared library 'libgearman_mysql_udf.so' (errno: 22 /usr/local/lib/libgearman_mysql_udf.so: cannot open shared object file: No such file or directory) 
```

我必须更改共享库的一些变量路径。`MySQL`应该找到我`libgearman_mysql_udf.so`在`plugindir`安装`/usr/lib/mysql/plugin`时使用 -

```
bash configure --with-mysql=/usr/local/mysql/bin/mysql_config --libdir=/usr/lib/mysql/plugin
make
make install 
```

我应该怎么办？我应该如何在其他目录中`MySQL`查找`.so`文件，例如.`gearman_mysql_udf``plugindir`

# ms-solver-foundation - 目标函数的 Math.Min

> ID：12476401
> 
> 赞同：0
> 
> 时间：2012-09-18T11:46:47.970
> 
> 标签：ms-solver-foundation

给定两个决策变量 d1,d2，如果目标函数是它们的和，它们只包含数字 0 和 1，我们可以将其表示为

```
Term t1=d1 + d2;
 model.AddGoal("goal", GoalKind.Maximize,t1); 
```

现在我想取其中较小的一个，即 Term

我想写一个目标函数

```
Math.min(d1,d2) 
```

如何在这里表达 Math.min？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:36:30.847

[Model](http://msdn.microsoft.com/en-us/library/microsoft.solverfoundation.services.model%28v=vs.93%29.aspx)类以静态方法的形式包含大量相关的数学运算，例如[Min](http://msdn.microsoft.com/en-us/library/microsoft.solverfoundation.services.model.min%28v=vs.93%29.aspx)。

你可以简单地写：

```
Term t1 = Model.Min(d1, d2); 
```

你很高兴:-)

# python - 是否可以将我自己的装饰器应用于 Python 中的内置方法？

> ID：12476402
> 
> 赞同：5
> 
> 时间：2012-09-18T11:46:52.573
> 
> 标签：python, decorator

我刚刚遇到 Python 装饰器。只是出于兴趣，您能否以某种方式将自己的装饰器应用于内置对象方法？说我想应用这个：

```
def remove_empty(fn):
    def filtered():
        return filter(lambda x: x != '', fn())
    return filtered 
```

对此：

```
some_string.split('\n') 
```

为了删除空字符串。是否可以？甚至是个好主意？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T12:14:47.060

从某种意义上说是可能的；这取决于你的意思。像这样的装饰器语法......

```
@dec
def foo():
    pass 
```

真的只是糖：

```
def foo():
    pass
foo = dec(foo) 
```

因此，没有什么可以阻止您在全局命名空间中的预定义函数上使用装饰器。

```
func = dec(func) 
```

但是内置类的方法存在于该类的命名空间中，并且不能直接修改该命名空间，正如[chepner](https://stackoverflow.com/a/12476484/577088)已经指出的那样。这是一件好事，因为它可以确保类型对象的`str`行为符合预期！但是，您可以将str*子类*化并以这种方式装饰该方法。（以下适用于 Python 2；在 Python 3 中，将 的输出传递`filter`给列表。`super`也可能会有所不同；我将在未来发布 Python 3 更新。）

```
>>> def remove_empty(fn):
...     def filtered(*args, **kwargs):
...         return filter(lambda x: x != '', fn(*args, **kwargs))
...     return filtered
... 
>>> class WeirdString(str):
...     @remove_empty
...     def split(self, *args, **kwargs):
...         return super(WeirdString, self).split(*args, **kwargs)
... 
>>> 'This decorator is unnecessary\n\n\n'.split('\n')
['This decorator is unnecessary', '', '', '']
>>> WeirdString('This decorator is unnecessary\n\n\n').split('\n')
['This decorator is unnecessary'] 
```

或者更直接（更符合装饰器使用的精神）：

```
>>> class WeirdString2(str):
...     split = remove_empty(str.split)
... 
>>> WeirdString2('This decorator is unnecessary\n\n\n').split('\n')
['This decorator is unnecessary'] 
```

在这个*特定*示例的情况下，我更喜欢显式过滤器。但我可以想象，例如，一个内置类的子类，它做一些[记忆](http://docs.python.org/dev/library/functools.html#functools.lru_cache)或类似的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T11:52:42.107

恐怕答案是否定的。定义函数时应用装饰器，并且`str.split`是预定义的。你可能会觉得你可以做一些明确的事情，比如

```
str.split = remove_empty(str.split) 
```

但这是不允许的：

```
Traceback (most recent call last):
  File "tmp.py", line 8, in <module>
    str.split = remove_empty(str.split)
TypeError: can't set attributes of built-in/extension type 'str' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T11:51:35.820

当然是的。写吧

```
remove_empty(lambda: some_string.split('\n'))() 
```

# c# - 如何在asp.net 2.0中制作特定数据表列的所有值的字符串

> ID：12476409
> 
> 赞同：0
> 
> 时间：2012-09-18T11:47:35.983
> 
> 标签：c#, asp.net, datatable

我正在使用 asp.net 2.0。我有一个数据表，其中包含 int_TASK_ID 作为其列之一。我想从数据表行创建所有任务 ID 的字符串，而不在数据表行上使用循环。asp.net 2.0有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:55:59.440

不。要在没有循环的情况下实现它，您可能需要一种查询语言。所以你可以用 SQL 来做，但正如你所说，你已经有一个数据表，所以不。如果它是在 .net 4.0 中，你可以用 Linq 做到这一点。

在没有循环的 .net 2.0 中，您可以通过将 concat 查询写入数据库来直接从数据库本身获取所有 ID 的字符串。

# regex - 匹配字符串中的单词

> ID：12476411
> 
> 赞同：-2
> 
> 时间：2012-09-18T11:47:45.083
> 
> 标签：regex

我有下一个代码：

```
$string = "hello to all world";
$strings_compare = tomorrow, hello, world;
$string_arrays =split(',',$strings_compare);

      for ($i=0; $i<count($string_arrays); $i++){
          $resultado = preg_match("/$string_arrays[$i]/",$string);
             if($resultado == false){   
             echo "no match";              
             }else {
            echo "match";
             }
      } 
```

在这段代码中，结果是：不匹配，匹配，不匹配

结果应该是：不匹配，匹配和匹配。我的错误是什么？

如果我改变`$string`结果`$string='say hello to all world now'` 是匹配，匹配，匹配，这没关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:56:30.923

当我使用有效的数组语法时，它对我来说很好。

```
<?php
$string = "hello to all world";
$string_arrays = array("tomorrow", "hello", "world");

for ($i=0; $i<count($string_arrays); $i++) {
    $resultado = preg_match("/$string_arrays[$i]/",$string);
    if(!$resultado) {   
        echo "no match";              
    } else {
        echo "match";
    }
} 
```

退货

> 没有匹配匹配匹配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:53:39.733

Try this:

```
$resultado = preg_match("/".preg_quote($string_arrays[$i])."/",$string); 
```

Also:

```
$string_arrays = array("tomorrow", "hello", "world"); 
```

# c# - 返回类型 Java 和 C#

> ID：12476415
> 
> 赞同：-8
> 
> 时间：2012-09-18T11:48:05.407
> 
> 标签：c#, java, .net

Java 和 C# 方法的返回类型是按引用还是按值？我真的很困惑，需要一些解释。

谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:50:33.627

在 Java中，*一切*都是按值返回的。这包括参考资料，这就是混乱的地方！

如果我有：

```
Trade t = new Trade(); 
```

then`t`是一个*引用*（我们会说它**是一个**Trade，但它指的是类型。`t`确实是一个引用）。当我从方法返回它时，我按值返回引用。引用仍然指向那个原始对象。

因此，如果我`t`从一个方法返回它，然后对其调用另一个方法，它会调用`Trade`它最初指向的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T11:51:14.267

C# 可以通过值或引用返回结果 - 这取决于您如何定义方法。

Java 只能按值返回（或者严格来说，按值返回引用。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T12:18:20.673

正如这个小小的记忆口号在 HeadFirst Book 中出现的那样。

```
Roses are Red,
This poem is Choppy,
Passing By Value is
Passing By Copy. 
```

在`Java`其始终**传递或返回的值中。**

其中`C#`可以**通过引用或复制返回。**

# pdf - SSRS 打印到 PDF - 浏览器冻结而不保存文件

> ID：12476419
> 
> 赞同：0
> 
> 时间：2012-09-18T11:48:15.267
> 
> 标签：pdf, service, printing, reporting-services, reporting

我使用 SSRS 2005 生成了一份报告。我正在尝试打印到 PDF（我有 Adob​​e Acrobat 8​​ pro）而不是导出到 PDF。出于某种原因，网络浏览器冻结了大约 10 分钟。之后，它会弹出文件选择器以将文件保存在路径中。当我单击保存时，没有任何反应。有没有人遇到过这样的事情？

# jquery - 使用 jquery 根据 img src 或 id 更改正文类

> ID：12476423
> 
> 赞同：2
> 
> 时间：2012-09-18T11:48:27.590
> 
> 标签：jquery, addclass

我正在使用这个幻灯片： [http](http://www.zurb.com/playground/orbit-jquery-image-slider) ://www.zurb.com/playground/orbit-jquery-image-slider 我想更改每张幻灯片的主体类，这样我就可以应用不同的背景颜色。

我有这样的事情：

```
if($('#featured').find('img[src="/01.jpg"]')) {
    //alert('img exists');
    $('body').addClass('option_a');
} else if
    //alert('img dosnt exists');
    ($('#featured').find('img[src="/02.jpg"]')) {
    //alert('img exists');
    $('body').addClass('option_b');
} else {
    $('body').addClass('option_c');
} 
```

但是我的 javascript 仍然很差，所以我可以使用一些指导或替代方法。非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:05:34.623

我认为最好将取决于图像的样式信息存储在图像的标签中。

这样，在向幻灯片添加新图像时，您不必更改 javascript 代码。

```
<div id="featured"> 
     <img src="overflow.jpg" alt="Overflow: Hidden No More" data-class="option-a" />
     <img src="captions.jpg"  alt="HTML Captions" data-class="option-b" />
     <img src="features.jpg" alt="and more features" data-class="option-c" />
</div>

<script>
$('#featured').orbit({afterSlideChange: function() {
    $('body').attr('class', $(this).data('class'));
}});
</script> 
```

# mysql - 仅脚本关系 SQL Server

> ID：12476426
> 
> 赞同：2
> 
> 时间：2012-09-18T11:48:37.453
> 
> 标签：mysql, sql, sql-server

SQL Server 中有没有办法生成一个脚本来重新创建所有外键约束和关系？基本上我需要删除所有关系，然后需要针对数据库重新编写脚本。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:02:31.950

在 SQL Server Management Studio 中，您可以选择查看您的表。您可以逐个遍历。按右键单击表格 -> `Script Table As`-> `DROP And CREATE TO`。

这样，Studio 将在新的查询窗口中生成删除约束并更改表添加约束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T12:03:13.593

对于 MS SQL Server [，您可以在此处获得](https://social.technet.microsoft.com/wiki/contents/articles/2958.script-to-create-all-foreign-keys.aspx)包含详细信息和注释的完整脚本。您还可以使用 SMSS 生成包含所有必要详细信息的表的创建脚本。但这只会为一张桌子做这项工作，如果你需要为所有桌子做这件事并且有很多，那可能会很痛苦。

对于 MySQL，~~如果您需要它，~~ [请查看此链接](http://www.justskins.com/forums/script-to-dynmically-create-127961.html)

# php - 作为 XML 接收的 Ajax 响应

> ID：12476430
> 
> 赞同：0
> 
> 时间：2012-09-18T11:48:49.260
> 
> 标签：php, jquery

我仅将所有 ajax 响应作为 XML 获取。当我实现它们时，它工作得很好（我得到了 HTML 格式的响应）。默认情况下，我们是否有任何理由以 XML 格式接收响应？我认为最近发生了一些变化。但我无法改变。对此的任何帮助将不胜感激。

***注意：**请注意，我将 jQuery 用于 AJAX。*

![在此处输入图像描述](../Images/73b16d0cc54d895f39ab40b5289c1ba1.png)

这是我在我网站的一个地方使用的代码（在我以相同方式使用的所有地方，它仅以 XML 形式出现，如屏幕截图所示）

```
 $.ajax({
        type: "POST",
        url: "/ajax_contests_submissions_more&popup=yes",
        dataType:"html",
        data: 'last_pos='+queryPos, 
        cache: false,

        error:function(XMLHttpRequest, textStatus, errorThrown) {
            alert('sorry, we were unable to process your request. please try again later'); 
        },          

        success: function(html)
        { 
        }   
    }); 
```

请检查此图像，该图像显示浏览器不会根据**@dystroy**的评论将 XHTML 猜测为 XML。

![另一个 AJAX 响应](../Images/699f1f091b8c90e7bd0f2e260bd4461f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:56:50.133

AJAX 回复尝试将响应解析为 XML。因此，您可以获取 XML 或原始文本。

看到[这个](http://www.w3schools.com/ajax/ajax_xmlhttprequest_response.asp)

# iphone - 将 managedObjectContext 注入初始 viewController？

> ID：12476436
> 
> 赞同：4
> 
> 时间：2012-09-18T11:49:17.653
> 
> 标签：iphone, objective-c, core-data, uistoryboard, uimanageddocument

我`UIManagedDocument`在我的 AppDelegate 中`NSManagedObjectContext`设置了一个核心数据模型（

`viewDidLoad`我可以使用 [在 vi​​ewControllers 中直接访问它`[[UIApplication sharedApplication] delegate] sampleDatabase] managedObjectContext]`，然后使用`prepareForSegue`.

我只是想知道是否有一个初始 segue（或机制）允许我将 managedObjectContext 传递（或注入）到该初始 viewController 中，而无需在控制器内部使用 appDelegates 共享实例访问它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T12:37:33.590

当您使用故事板时，初始视图控制器在调用`rootViewController`之前`application:didFinishLaunchingWithOptions:`被设置为您的委托的属性。

您应该能够对该引用使用强制转换来设置属性，假设您的核心数据结构已经设置好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:23:09.147

通常，您只会在视图控制器上拥有一个 NSManagedObjectContext 属性，并在您在 appDelegate 中初始化 viewController 后立即设置该属性。**myViewController.managedObjectContext = self.managedObjectContext**

# trigger.io - iphone-retina4 字段是必需的，但在 App 配置中不可用

> ID：12476437
> 
> 赞同：1
> 
> 时间：2012-09-18T11:49:17.463
> 
> 标签：trigger.io

今天，由于伪造错误，我的应用程序无法使用：

```
[ERROR] Forge API call to app/083eab52d[...]12313d1adcbe/template went wrong:
        Field 'iphone-retina4' is required by field 'ipad' 
```

在另一个应用程序中，这个新的启动图像`iphone-retina4`字段自动出现在应用程序配置中。但不在我的主应用程序中。

我尝试忘记并再次导入应用程序，但没有成功。

这是我的`launchimage`部分：

```
"launchimage": {
        "android": "android.png", 
        "android-landscape": "android-landscape.png", 
        "ipad": "ipad.png", 
        "ipad-landscape": "ipad-landscape.png", 
        "ipad-landscape-retina": "ipad-landscape-retina.png", 
        "ipad-retina": "ipad-retina.png", 
        "iphone": "iphone.png", 
        "iphone-retina": "iphone-retina.png"
    }, 
```

如何使此字段出现在 App config 中以添加 iphone 5 launchimage ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:53:18.860

简单的。只需将以下内容添加到您的 launchimage 属性设置中：

```
"iphone-retina4": "iphone-retina4.png" 
```

根据[文档](http://docs.trigger.io/en/v1.4/modules/launchimage.html)-

> iphone-retina4: 640x1136px - 适用于 iPhone 5 的四英寸屏幕

# r - 根据大小（即数值）使用 ggplot2 对条形图进行排序

> ID：12476440
> 
> 赞同：7
> 
> 时间：2012-09-18T11:49:45.717
> 
> 标签：r, sorting, ggplot2, bar-chart

[此问题](https://stackoverflow.com/questions/5208679/order-bars-in-ggplot2-bar-graph)询问有关根据未汇总表排序条形图的问题。我的情况略有不同。这是我原始数据的一部分：

```
experiment,pvs_id,src,hrc,mqs,mcs,dmqs,imcs
dna-wm,0,7,9,4.454545454545454,1.4545454545454546,1.4545454545454541,4.3939393939393945
dna-wm,1,7,4,2.909090909090909,1.8181818181818181,0.09090909090909083,3.9090909090909087
dna-wm,2,7,1,4.818181818181818,1.4545454545454546,1.8181818181818183,4.3939393939393945
dna-wm,3,7,8,3.4545454545454546,1.5454545454545454,0.4545454545454546,4.272727272727273
dna-wm,4,7,10,3.8181818181818183,1.9090909090909092,0.8181818181818183,3.7878787878787876
dna-wm,5,7,7,3.909090909090909,1.9090909090909092,0.9090909090909092,3.7878787878787876
dna-wm,6,7,0,4.909090909090909,1.3636363636363635,1.9090909090909092,4.515151515151516
dna-wm,7,7,3,3.909090909090909,1.7272727272727273,0.9090909090909092,4.030303030303029
dna-wm,8,7,11,3.6363636363636362,1.5454545454545454,0.6363636363636362,4.272727272727273 
```

我只需要其中的几个变量，即`mqs`and `imcs`，按它们分组`pvs_id`，所以我创建了一个新表：

```
m = melt(t, id.var="pvs_id", measure.var=c("mqs","imcs")) 
```

我可以将其绘制为条形图，从中可以看到*MQS*和*IMCS*之间的相关性。

```
ggplot(m, aes(x=pvs_id, y=value)) 
+ geom_bar(aes(fill=variable), position="dodge", stat="identity") 
```

![](../Images/84227f5433ee295a889250011c6c1c1b.png)

但是，我希望**生成的条按*MQS*值**从左到右按降序排列。当然，*IMCS*值应该与这些值一起排序。

我怎样才能做到这一点？一般来说，给定任何熔融数据框——这似乎对 ggplot2 中的绘图很有用，而且今天是我第一次偶然发现它——我如何指定一个变量的顺序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T12:24:21.233

这一切都在制作中

`pvs_id`一个因素并为其提供适当的水平：

```
dat$pvs_id <- factor(dat$pvs_id, levels = dat[order(-dat$mqs), 2])

m = melt(dat, id.var="pvs_id", measure.var=c("mqs","imcs"))

ggplot(m, aes(x=pvs_id, y=value))+ 
    geom_bar(aes(fill=variable), position="dodge", stat="identity") 
```

这将产生以下图：

![](../Images/9607dbe6e6440ffa2ed1a66541e77dde.png)

**编辑：** 好吧，因为`pvs_id`它是数字，它以有序的方式处理。好像你有一个因素没有假设顺序。因此，即使您有数字标签`pvs_id`实际上也是一个因素（名义上的）。就`dat[order(-dat$mqs), 2]`带负号的排序函数而言，数据帧沿变量从最大到最小排序`mqs`。但是您对`pvs_id`变量的顺序感兴趣，因此您索引第二列的列。如果你把它撕开，你会看到它给了你：

```
> dat[order(-dat$mqs), 2]
[1] 6 2 0 5 7 4 8 3 1 
```

现在你将它提供给`levels`参数，`factor`并根据需要对因子进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-05T13:56:00.497

使用更新`tidyverse`的功能，这变得更加简单（或者至少对我来说很容易阅读）：

```
library(tidyverse)

d %>%
  mutate_at("pvs_id", as.factor) %>%
  mutate(pvs_id = fct_reorder(pvs_id, mqs)) %>%
  gather(variable, value, c(mqs, imcs)) %>% 
  ggplot(aes(x = pvs_id, y = value)) + 
    geom_col(aes(fill = variable), position = position_dodge()) 
```

它的作用是：

*   如果还没有创建一个因子
*   根据重新排序`mqs`（您可以`desc(mqs)`用于反向排序）
*   聚集成单独的行（与 相同`melt`）
*   绘制为（与`geom_col`相同）`geom_bar``stat="identity"`

[![](../Images/607000a4b26a5baabcf768fbb6cb34bb.png)](https://i.stack.imgur.com/THCDl.png)

# matlab - 如何在matlab上绘制3d不等式

> ID：12476447
> 
> 赞同：3
> 
> 时间：2012-09-18T11:50:15.543
> 
> 标签：matlab, 3d, plot, inequalities

我想在 MATLAB 中从一组不等式中绘制一个 3d 区域。

例如：

```
0 <= x <= 1

sqrt(x) <= y <= 1

0 <= z <= 1 - y 
```

我在这个网站上找到了一个 2d 示例，但我不确定如何将其转换为 3d。[如何绘制不等式](https://stackoverflow.com/questions/11345838/how-to-plot-inequalities)。

编辑：在@Tobold 的帮助下，我修改了代码以将绘制的点限制为由所有三个区域定义的点，但它只绘制 2 或 3 个点。看起来向量 X1、Y1 和 Z1 中的点是正确的，但由于某种原因，它只绘制了几个。有什么想法为什么它只从 X1、Y1 和 Z1 向量中绘制几个点而不是全部？

```
[X,Y,Z]=meshgrid(0:0.1:1,0:0.1:1,0:0.1:1); % Make a grid of points between 0 and 1
p1=0.1; p2=0.2; % Choose some parameters
X1 = (X >= 0 & X <= 1) & (Y >= sqrt(X) & Y <= 1) & (Z >= 0 & Z <= 1 - Y);
Y1 = (X >= 0 & X <= 1) & (Y >= sqrt(X) & Y <= 1) & (Z >= 0 & Z <= 1 - Y);
Z1 = (X >= 0 & X <= 1) & (Y >= sqrt(X) & Y <= 1) & (Z >= 0 & Z <= 1 - Y);
ineq1 = (X >= 0 & X <= 1) * 2;
ineq2 = (Y >= sqrt(X) & Y <= 1) * 4;
ineq3 = (Z >= 0 & Z <= 1 - Y) * 8;
all = ineq1 & ineq2 & ineq3;
colors = zeros(size(X))+ineq1+ineq2+ineq3;
scatter3(X1(:),Y1(:),Z1(:),3,colors(:)','filled') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:50:30.000

我一直在试图弄清楚同样的事情，诀窍是使所有不在交叉点的大小为 0。Tobold 的 scatter3 线使用“3”作为大小选项，这意味着所有点都将显示为点 3 . 这可以用一组大小代替一个与 X1 大小相等的矩阵。最简单的方法就是让 s = 3*all：

```
all = ineq1 & ineq2 & ineq3;
colors = zeros(size(X))+all;
sizes = 3 * all;
scatter3(X1(:),Y1(:),Z1(:),sizes,colors(:)','filled') 
```

这应该让你只是十字路口的区域。

-- 编辑：颜色变量也需要改变。你只想要交叉点，而不是其他不等式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:23:58.970

您可以执行与链接到的 2d 案例中几乎相同的操作。只需写下您的三个不等式，使用 3d 网格，将每个不等式与一组具有唯一子集和的三个数字（例如 2、4、8）中的一个数字相乘，然后使用 scatter3：

```
[X,Y,Z]=meshgrid(0:0.1:1,0:0.1:1,0:0.1:1); % Make a grid of points between 0 and 1
p1=0.1; p2=0.2; % Choose some parameters
ineq1 = (X >= 0 & X <= 1) * 2;
ineq2 = (X >= sqrt(X) & Y <= 1) * 4;
ineq3 = (Z >= 0 & Z <= 1 - Y) * 8;
colors = zeros(size(X))+ineq1+ineq2+ineq3;
scatter3(X(:),Y(:),Z(:),3,colors(:),'filled') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-03T15:42:07.457

我不明白您作为修改@Tobold 的帮助而编写的代码中的一些内容。例如，参数 p1 和 p2 在您的代码中做了什么？

无论如何，代码仅绘制满足所有不等式的网格点；

```
[X,Y,Z]=meshgrid(0:0.1:1,0:0.1:1,0:0.1:1);
ineq1 = (X >= 0 & X <= 1);
ineq2 = (Y >= sqrt(X) & Y <= 1);
ineq3 = (Z >= 0 & Z <= 1 - Y);
all = ineq1 & ineq2 & ineq3;
scatter3(X(all),Y(all),Z(all),'b','filled') 
```

结果如下图所示。 [![在此处输入图像描述](../Images/f2fcf5a907e1ec5f4979ec14d0fdab28.png)](https://i.stack.imgur.com/ULvUt.png)

# c# - DevExpress CardView.CardCaptionFormat 问题

> ID：12476448
> 
> 赞同：3
> 
> 时间：2012-09-18T11:50:29.720
> 
> 标签：c#, devexpress

我正在尝试使`CardView1.CardCaptionFormat`条目具体化，例如 - 显示每个特定人的姓名和姓氏作为每张卡片的标题。

该代码有点作用，但它显示了 LAST 条目的名字和姓氏作为每张卡片的标题。

这是代码：

```
foreach (DataRow x in ds.Tables[0].Rows)
{
    strNameSurname = x[0].ToString() + " " + x[1].ToString();
    cardView1.CardCaptionFormat = x[0].ToString() + " " + x[1].ToString();
}

//x[0] is the name of an individual, x[1] is the surname of an individual. 
```

我希望这足够清楚，让每个人都能理解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:51:33.487

检查[CardView.CardCaptionFormat 属性](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsCardCardView_CardCaptionFormattopic)文档中的以下备注"

> CardCaptionFormat 属性使您能够使用静态文本以及当前记录号和列值来构造标题文本。“{0}”字符序列是当前记录号的占位符。因此，默认属性值指定卡标题应包含“记录 N”，后跟卡号。要在卡片标题中显示列值，您需要使用所需的列索引。例如，“{1}”字符序列是第一列值的占位符，等等。

如果您的表格绑定到网格，那么您可以分配格式字符串中的列索引`Name`和`Surname`列，然后它将根据您的要求自动反映标题。

假设您的姓名和姓氏列索引分别为 0 和 1.. 那么您的*CardView.CardCaptionFormat*属性将设置如下：

```
CardView.CardCaptionFormat = {0} + "" + {1} 
```

来源：[CardCaptionFormat](http://www.devexpress.com/Support/Center/p/DQ46851.aspx)
要显示自定义卡片标题，您应该处理`CardView.CustomDrawCardCaption`事件并显式设置`CardInfo.CaptionInfo.CardCaption`属性。我为你准备了一个例子。它在附件中。基本代码如下：

```
Private Sub CardView1_CustomDrawCardCaption(ByVal sender As System.Object, ByVal e As DevExpress.XtraGrid.Views.Card.CardCaptionCustomDrawEventArgs) Handles CardView1.CustomDrawCardCaption
    Dim view As DevExpress.XtraGrid.Views.Card.CardView = sender
    Dim s As String = String.Format("Subject: {0}", view.GetRowCellDisplayText(e.RowHandle, "ProductName"))
    CType(e.CardInfo, DevExpress.XtraGrid.Views.Card.ViewInfo.CardInfo).CaptionInfo.CardCaption = s
End Sub 
```

更多参考：
[如何为多张卡片设置不同的 CardCaptionFormat](http://www.devexpress.com/Support/Center/p/Q206320.aspx)
[Card Caption](http://documentation.devexpress.com/#WindowsForms/CustomDocument524)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:52:07.747

谢谢@Niranjan-Kala。你发布的这个链接对我有帮助。这是供将来参考的链接：[CodeHelp](http://www.devexpress.com/Support/Center/p/DQ46851.aspx)

这是我的代码修复： `cardView1.CardCaptionFormat = "{" + cardView1.Columns[0].AbsoluteIndex + 1 + "}"`

当然，它只显示到目前为止的名字，但在其中添加姓氏不会有太多的努力。

# eclipse - Eclipse 在 Tycho 项目中未考虑 pom.xml 的依赖项

> ID：12476451
> 
> 赞同：12
> 
> 时间：2012-09-18T11:50:34.337
> 
> 标签：eclipse, maven, tycho

我创建了一个带有`eclipse-plugin`包装的 Tycho 项目。该项目包括一些通过 pom.xml 指定的依赖项。相关的 pom 部分是：

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <tycho.version>0.15.0</tycho.version>
</properties>
<build>
    <sourceDirectory>src</sourceDirectory>
    <plugins>
        <plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>tycho-maven-plugin</artifactId>
            <version>${tycho.version}</version>
            <extensions>true</extensions>
        </plugin>
        <plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>target-platform-configuration</artifactId>
            <version>${tycho.version}</version>
            <configuration>
                <pomDependencies>consider</pomDependencies>
                <environments>
                    <environment>
                        <os>win32</os>
                        <ws>win32</ws>
                        <arch>x86</arch>
                    </environment>
                    <environment>
                        <os>linux</os>
                        <ws>gtk</ws>
                        <arch>x86_64</arch>
                    </environment>
                    <environment>
                        <os>macosx</os>
                        <ws>cocoa</ws>
                        <arch>x86_64</arch>
                    </environment>
                </environments>
            </configuration>
        </plugin>
    </plugins>
</build>
<repositories>
    <repository>
        <id>juno</id>
        <layout>p2</layout>
        <url>http://download.eclipse.org/releases/juno</url>
    </repository>
    <repository>
        <id>com.springsource.repository.bundles.release</id>
        <name>SpringSource Enterprise Bundle Repository - SpringSource Bundle Releases</name>
        <url>http://repository.springsource.com/maven/bundles/release</url>
    </repository>
    <repository>
        <id>com.springsource.repository.bundles.external</id>
        <name>SpringSource Enterprise Bundle Repository - External Bundle Releases</name>
        <url>http://repository.springsource.com/maven/bundles/external</url>
    </repository>
</repositories>
<dependencies>
    <dependency>
        <groupId>org.testng</groupId>
        <artifactId>com.springsource.org.testng</artifactId>
        <version>6.4.0</version>
    </dependency>
    <dependency>
        <groupId>com.google.guice</groupId>
        <artifactId>com.springsource.com.google.inject</artifactId>
        <version>2.0.0</version>
    </dependency>
    <dependency>
        <groupId>org.aopalliance</groupId>
        <artifactId>com.springsource.org.aopalliance</artifactId>
        <version>1.0.0</version>
    </dependency>
</dependencies> 
```

清单是：

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Plugin-project-pure
Bundle-SymbolicName: plugin-project-pure
Bundle-Version: 1.0.0.qualifier
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Require-Bundle: org.eclipse.equinox.app,
 org.eclipse.uml2.uml;bundle-version="4.0.0",
 org.eclipse.uml2.uml.resources;bundle-version="4.0.0",
 org.junit;bundle-version="4.10.0",
 com.springsource.org.testng;bundle-version="[6.4.0,6.4.0]" 
```

该项目仅包含默认包中的一个类，该类使用注释 from`org.testng.annotations`来测试在编译期间是否包含依赖项。

如果我使用 Maven 3.0.4 在命令行上构建项目，一切正常。在 Eclipse Juno 中导入项目后，出现多个错误。最重要的是在清单中，它指出捆绑包`com.springsource.org.testng`无法解析。类中也存在编译错误，因为注解的导入是不可能的。该项目已配置 Maven Nature。我是否遗漏了一些东西，以便 Eclipse Juno 也会考虑 pom 的依赖关系？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T17:44:57.887

您可以规避这个问题，将您的项目构建分为两部分：

*   首先，将您的 POM 依赖项聚合到 p2 存储库中。为此，您需要一个`eclipse-feature`和一个`eclipse-repository`模块，以及一个单独的父 POM，其中列出了 POM 依赖项和配置`pomDependencies=consider`。
*   在第二个构建中，将第一个构建中的 p2 存储库添加到[目标平台](http://wiki.eclipse.org/Tycho/Target_Platform)，例如通过`jar:file:`指向本地 Maven 存储库中构建结果的 URL。

然后，您还可以在 Eclipse 中配置您的目标平台，以包含第一次构建中的 p2 存储库（这取决于您当前的配置方式）。如果您使用所谓的*目标定义文件*，您将在 Tycho 和 Eclipse 之间获得最佳一致性，您可以在 Eclipse 和 Tycho 中将其用作目标平台。

我知道所有这一切都需要付出相当大的努力来设置，但是 AFAIK 没有更好的解决方案可以完全发挥作用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-16T09:47:23.127

对于 maven-RCP 问题之间存在的所有问题，最优雅的解决方案是使用 [`p2-maven-plugin`](http://projects.reficio.org/p2-maven-plugin/1.1.0/manual.html). 以下是这些问题的简要摘要（从上面的链接中截取）：

> 为了向 Eclipse RCP 项目添加第三方依赖项，该依赖项必须驻留在 P2 更新站点中。
> 
> Eclipse（和其他供应商）提供了一组公共更新站点，但显然并非所有流行和公开可用的依赖项都在那里（即问题编号#1）。
> 
> 由于 Eclipse RCP 是一个 OSGi 环境，以便将依赖项添加到 p2 更新站点，因此依赖项必须是 OSGi 捆绑包（即问题编号 #2）。
> 
> 所以，现在让我们总结一下：我们所有的工件都必须是 OSGi 包，但它们并不总是包，它们必须位于 P2 站点中，但我们没有那个站点。那我们该如何进行呢？
> 
> 这并不难，有一个由 Peter Kriens 编写的“bnd”工具，可以将你的 jar 包转换为包。Eclipse RCP 还提供了一个方便的工具，可以生成 P2 站点（尽管以一种麻烦和痛苦的方式）。这两种工具都假定您所有的 jars/bundle 都位于本地文件夹中 - 这意味着您必须手动下载它们。您可以使用 Maven 使其自动化一点，但 Maven 计算依赖关系树的方式存在显着差异，并且这并不总是与 OSGi 方式兼容（即问题编号 #3）。让我们再详细说明一下。

它允许您定义一个 pom 打包的项目，该项目将解决所有 maven 依赖项，将所有非 OSGi 的依赖项转换为捆绑包，并从中生成一个 p2 站点。

下面是完整的最小 pom 文件，包括对 slf4j-log4j12 的依赖（隐式依赖于 slf4j 和 log4j v1.2）：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>me.berezovskiy.project</groupId>
  <artifactId>p2</artifactId>
  <packaging>pom</packaging>
  <version>1.0.0</version>
  <build>
    <plugins>
      <plugin>
        <groupId>org.reficio</groupId>
        <artifactId>p2-maven-plugin</artifactId>
        <version>1.1.1-SNAPSHOT</version>
        <executions>
          <execution>
            <id>default-cli</id>
            <configuration>
              <artifacts>
                <artifact>
                  <id>org.slf4j:slf4j-log4j12:1.7.7</id>
                </artifact>
              </artifacts>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty-maven-plugin</artifactId>
        <version>8.1.12.v20130726</version>
        <configuration>
          <scanIntervalSeconds>10</scanIntervalSeconds>
          <webAppSourceDirectory>${basedir}/target/repository/</webAppSourceDirectory>
          <webApp>
            <contextPath>/site</contextPath>
          </webApp>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <pluginRepositories>
    <pluginRepository>
      <id>reficio</id>
      <url>http://repo.reficio.org/maven/</url>
    </pluginRepository>
  </pluginRepositories>
</project> 
```

PS我通常不会发布旧问题和已回答问题的答案，但就我而言，我花了很长时间才以一种干净优雅的方式解决这个问题，所以我决定写下它。此外，该解决方案已于 2013 年底出现。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-18T13:16:48.633

从命令行导航到 pom.xml 所在的文件夹。

运行`mvn eclipse:eclipse`。

这应该构建一个有效的 eclipse 项目。

# django - 如何从 Django 视图返回 HTTP 状态代码 204？

> ID：12476452
> 
> 赞同：91
> 
> 时间：2012-09-18T11:50:40.183
> 
> 标签：django

我想`204 No Content`从 Django 视图返回状态码。这是对更新数据库的自动 POST 的响应，我只需要表明更新成功（无需重定向客户端）。

有`HttpResponse`处理大多数其他代码的子类，但不是 204。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-09-18T12:20:34.357

```
return HttpResponse(status=204) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-07-05T14:13:54.163

使用[render](https://docs.djangoproject.com/en/1.8/topics/http/shortcuts/#render)时，有一个`status`关键字参数。

```
return render(request, 'template.html', status=204) 
```

（请注意，在状态 204 的情况下，不应有响应正文，但此方法对其他状态代码很有用。）

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-09-18T12:43:20.793

Steve Mayne 回答了什么，或者通过继承 HttpResponse 来构建你自己的：

```
from django.http import HttpResponse

class HttpResponseNoContent(HttpResponse):
    status_code = 204

def my_view(request):
    return HttpResponseNoContent() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-10T13:56:00.063

其他答案大多有效，但它们不会产生完全兼容的 HTTP 204 响应，因为它们仍然包含内容标头。这可能会导致 WSGI 警告，并被 Django Web Test 等测试工具拾取。

这是一个改进的符合 HTTP 204 响应的类。（基于这张[Django 票证](https://code.djangoproject.com/ticket/16632)）：

```
from django.http import HttpResponse

class HttpResponseNoContent(HttpResponse):
    """Special HTTP response with no content, just headers.

    The content operations are ignored.
    """

    def __init__(self, content="", mimetype=None, status=None, content_type=None):
        super().__init__(status=204)

        if "content-type" in self._headers:
            del self._headers["content-type"]

    def _set_content(self, value):
        pass

    def _get_content(self, value):
        pass

def my_view(request):
    return HttpResponseNoContent() 
```

# android - 如何隐藏软键盘 onStartTrackingTouch 搜索栏

> ID：12476456
> 
> 赞同：1
> 
> 时间：2012-09-18T11:50:58.400
> 
> 标签：android, android-softkeyboard, seekbar

我在活动中有 2 个编辑文本和一个搜索栏。即使编辑文本具有焦点，我也想防止在触摸搜索栏时弹出软键盘。我也试图强制搜索栏焦点，但它也没有工作。

我曾尝试在三种 SeekBar 方法（和）上隐藏软键盘，并且也一一隐藏`onProgressChanged`，但这不起作用。`onStopTrackingTouch``onStartTrackingTouch`

是否有可能以及如何实现？

谢谢

* * *

```
private void hideSoftKeyboard(){
    // HIDE SOFTKEYBOARD
    InputMethodManager imm = (InputMethodManager) getSystemService(Activity.INPUT_METHOD_SERVICE);
    imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0);
}

/**
 * SEEKBAR Start tracking
 */
public void onStartTrackingTouch(SeekBar seekBar) {

    // HIDE SOFTKEYBOARD
    hideSoftKeyboard();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:58:56.683

抱歉，经过多次搜索，我找到了解决方案。这是它：

```
private void hideSoftKeyboard() {
    // HIDE SOFTKEYBOARD
    //InputMethodManager imm = (InputMethodManager) getSystemService(Activity.INPUT_METHOD_SERVICE);
    // imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0);

    InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(mSeekBar.getWindowToken(), 0);

} 
```

# php - 在 PHP 中使用复选框值

> ID：12476460
> 
> 赞同：0
> 
> 时间：2012-09-18T11:51:09.337
> 
> 标签：php, mysql, sql

我有这个页面（下面的代码），其中包含一系列 5 个复选框，都代表不同的值，我需要使用它们来查询数据库。

```
<form id="form1" name="form1" method="post" align="center" action="section_search_results1.php">
      <p>Select The <b>Section</b> You Wish To Search In Below...      </p>
      <p>
        <label for="section"></label>
        <label for="section2"></label>
        <label>
          <input type="checkbox" name="SectionSelect" value="Functional" id="SectionSelect_0" />
          Functional</label>
        <label>
          <input type="checkbox" name="SectionSelect" value="Technical" id="SectionSelect_1" />
        Technical</label>
        <label>
          <input type="checkbox" name="SectionSelect" value="Commercial" id="SectionSelect_2" />
        Commercial</label>
        <label>
          <input type="checkbox" name="SectionSelect" value="Implementation" id="SectionSelect_3" />
        Implementation</label>
        <label>
          <input type="checkbox" name="SectionSelect" value="Innovation" id="SectionSelect_4" />
        Innovation</label>
        <br />
      </p>
      <p>Enter the <b>Keyword(s) or Keyphrase</b> Below...</p>
      <p>
        <label for="kword"></label>
        <input type="text" name="kword" id="kword" placeholder="Enter Keyword(s)" />
        <br />
      </p>
      <p>
        <input type="submit" name="submit" id="submit" value="Search" /> | | <input type="reset" name="clear" id="clear" value="Clear" />
      </p>
    </form> 
```

如您所见，每个都有自己的值，即用于查询数据库的术语。结果页面的php查询代码如下

```
 <?php
          $kword = $_POST["kword"];
          $section = $_POST["SectionSelect"];

          function boldText($text, $kword) {
        return str_ireplace($kword, "<strong>$kword</strong>", $text);
    }

       // Connects to your Database 
     mysql_connect("localhost", "root") or die(mysql_error()); 
     mysql_select_db("test") or die(mysql_error()); 
     mysql_real_escape_string($kword); 
     $data = mysql_query("select company_name, section_name, question, answer from company, rfp, section, question_keywords
    where company.company_id = rfp.company_id
    and rfp.rfp_id = question_keywords.rfp_id
    and question_keywords.section_id = section.section_id
    and section_name like '%$section%'
    and keywords like '%$kword%';") 
     or die(mysql_error());
?> 
```

最终我想要做的是使用查询来查询数据库，以便可能为每个复选框值提供 where 子句？例如，我想选择 x 其中 y 喜欢 'Technical' 和 y 喜欢 'Functional' 等等...

任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:55:00.913

将您的复选框名称设置为数组键，以将它们用作具有所有选定复选框值的数组：

```
<input type="checkbox" name="SectionSelect[0]" value="Functional" />
<input type="checkbox" name="SectionSelect[1]" value="Technical" />

echo $_POST['SectionSelect'][0]; // should print "Functional"
echo $_POST['SectionSelect'][1]; // should print "Technical" 
```

# jsp - Query String or any other solution please

> ID：12476468
> 
> 赞同：0
> 
> 时间：2012-09-18T11:51:34.847
> 
> 标签：jsp, jdbc

I have a jsp in which there is a textbox.

After posting the data I want to do a redirection and then want this textbox to be populated with the string in `ADD` (plz refer the below code) in page 1, the problem I'm facing is that there is a query in first page which is making this textbox empty.

I heard that I can make use of QueryString() or please suggest me any other process if available, but I'm not sure of how to use it. The redirection code is as below.

```
<%
try {
    ResultSet rs = null;

    String Add = request.getParameter("Allocation"); // this is the string

    String user = (String) session.getAttribute("myusername");

    Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();
    Date d1 = new Date();  

    String d1_str = new SimpleDateFormat("yyyy-MM-dd").format(d1); 

    Connection con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","system","tiger");
    PreparedStatement ps = con.prepareStatement("UPDATE SCOPE1 SET ALLOCATED='"+d1_str+"', SPECIALIST='"+user+"' WHERE DBID='"+Add+"'");
    con.setAutoCommit(true);

    int i = ps.executeUpdate();

    if(i!=1) {
        String s = "Users.jsp?tgt1 = " + Add + ""; // I wanted to know what should go here
        response.sendRedirect(s);
    }
    else {
        out.println("err");
    }
}
catch(Exception e) {
    out.println(e);
}
%> 
```

and the name of my text box is `tgt1` in page 1.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:24:06.323

所以你想在 tgt1 文本框中显示字符串，对吧？然后在 User.jsp 中，使用获取字符串`String addStr=request.getParameter("tgt1");`并将输入文本的值设置为：

```
<input type=text name=tgt1 value="<%=addStr%>"> 
```

# java - 从 Java 返回 base64 字符串

> ID：12476470
> 
> 赞同：0
> 
> 时间：2012-09-18T11:51:44.103
> 
> 标签：java, eclipse

非常基本上我有一个图像已转换为 Base64 字符串。以下代码是如何将其转换为 base64string 以及我如何尝试返回它。这是对 phonegap 插件的修改，所以请原谅某些东西的命名。

```
package org.apache.cordova;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;

import android.annotation.TargetApi;
import android.graphics.Bitmap;
import android.os.Environment;
import android.util.Base64;
import android.view.View;

public class Screenshot extends Plugin {

    @Override

    public PluginResult execute(String action, JSONArray args, String callbackId) {
        // starting on ICS, some WebView methods
        // can only be called on UI threads
        final Plugin that = this;
        final String id = callbackId;
        super.cordova.getActivity().runOnUiThread(new Runnable() {
            //@Override
            @TargetApi(8)
            public void run() {
                View view = webView.getRootView();

                view.setDrawingCacheEnabled(true);
                Bitmap bitmap = Bitmap.createBitmap(view.getDrawingCache());
                view.setDrawingCacheEnabled(false);

                File folder = new File(Environment.getExternalStorageDirectory(), "Pictures");
                if (!folder.exists()) {
                    folder.mkdirs();

                }

                File f = new File(folder, "screenshot_" + System.currentTimeMillis() + ".png");
                System.out.println(folder);
                System.out.println("screenshot_" + System.currentTimeMillis() + ".png");

                ByteArrayOutputStream baos = new ByteArrayOutputStream();  
                bitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);
                byte[] b = baos.toByteArray();
                String base64String = Base64.encodeToString(b, Base64.DEFAULT);
                String mytextstring = "data:image/png;base64,"+base64String;
                System.out.println(mytextstring);

                that.success(new PluginResult(PluginResult.Status.OK), mytextstring);
            }
        });

        PluginResult imageData = new PluginResult(PluginResult.Status.NO_RESULT);
        imageData.setKeepCallback(true);
        System.out.println("imageData:==================================================================================>>>>>"+imageData);
        return imageData;
    }

} 
```

这一行：

```
System.out.println(mytextstring); 
```

输出 base64 字符串，但是这一行：

```
System.out.println("imageData:==================================================================================>>>>>"+imageData); 
```

没有。我正在尝试让 imageData 包含 base64string，以便我可以返回它并在某些 Javascript 中使用它。我已经玩了一段时间的代码，但没有成功，我是 Java 新手，所以真的不知道我有多接近。有人可以指导我吗？

**编辑**我只想返回 Base64String，仅此而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:30:58.943

您调用 this.success 的代码不正确。它应该是：

```
that.success(new PluginResult(PluginResult.Status.OK, mytextstring), id); 
```

你拥有它的方式：

```
that.success(new PluginResult(PluginResult.Status.OK), mytextstring); 
```

告诉回调服务器在“mytextstring”处调用成功回调。显然，“mytextstring”中没有存储回调，因为这是您的结果。

此外，屏幕截图插件的默认 .js 文件没有为您提供通过成功/失败回调调用它的方法。因此，您需要修改 .js 代码才能使用 base64 数据调用成功回调。在 Screenshot.js 中添加类似这样的内容：

```
Screenshot.prototype.getBase64Screenshot = function(successCallback, errorCallback) {
    exec(successCallback, errorCallback, "Screenshot", "saveScreenshot", []);
}; 
```

然后你可以通过这样做来调用它：

```
window.plugins.screenshot.getBase64Screenshot(function(data) {
    console.log("Data = " + data);
}, function() {
    console.log("We got an error");
}); 
```

显然，您会提供自己的成功和失败回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:34:08.157

我认为这是您的代码中的错误。我将尝试从纯 java 的角度提供几种方法

当您创建“PluginResult”对象时，您不会以任何方式将其连接到您创建的字符串（base64string 变量）。

如果您想返回 base64 编码的字符串，您应该执行以下操作：

```
PluginResult imageData = new PluginResult(..., ...,  base64string, ..., ...) 
```

或者，如果您没有构造函数，请尝试使用这样的 setter（例如）：

```
PlugingResult imageData  = new PlugingResult(...)
imageData.setEncodedString(imageData) 
```

如果没有公开的 API，很难理解如何正确使用 PluginResult 类型的对象（我自己从未使用过它）

如果您发现没有任何东西适合您的需求，但您绝对必须使用 PluginResult 对象，那么您可以考虑创建一个包含 PluginResult 和编码的 String 的类，并将其用作方法的返回类型。像这样：

```
class MyPluginResult {
   private PluginResult pluginResult;
   private String encodedString;
   /*
    ....

     getters/setters/constructors go here
    */
} 
```

比让你的方法返回 MyPluginResult，更改创建 PluginResult 并返回它的代码，你会没事的。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:38:46.233

我对 Cordova 和 PhoneGap 了解不多，但是通过 API 可以看到构造函数 `public PluginResult(Status status, String message)`。

我想您可以将 传递`base64String`给该构造函数的第二个参数。消息被转换为 JSON 字符串格式，但您可以轻松地在 java / javascript 中处理该格式。

希望这可以帮助。
问候

# css - CSS 解密背景速记

> ID：12476472
> 
> 赞同：0
> 
> 时间：2012-09-18T11:51:52.317
> 
> 标签：css, background

我需要一些帮助来将某人的速记分解为速记。

这是我得到的：

```
background: url("img.png") repeat scroll 0 0%, -moz-linear-gradient(#4E4E4E, #1C1C1C) repeat scroll 0 0 transparent; 
```

我已经做到了这一点：

```
background-image:url('jAGNPCMaDe9LJ5wqwVhLimg.png'); 
```

但其余的对我来说绝对是希腊语。我对 -moz-linear-gradent() 很好奇。这是所有浏览器都能识别的吗？而且我猜括号中的颜色必须应用渐变效果（从-moz-linear-gradient推导）“重复滚动0 0％”有什么作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:58:01.467

正如[cimmanon 所提到](https://stackoverflow.com/questions/12476472/css-deciphering-background-shorthand/12476538#12476538)的，您实际上是在查看两个背景组合成一个`background`速记声明。逗号分隔两层。这种多种背景的组合[对于 CSS3 来说是新的](http://www.w3.org/TR/css3-background/#layering)。因此，您有两个不同的速记背景层：

```
url("img.png") repeat scroll 0 0%
-moz-linear-gradient(#4E4E4E, #1C1C1C) repeat scroll 0 0 transparent 
```

每个都扩展为自己的一组值。

您的代码的正确的手写扩展是这样的：

```
background-image: url("img.png"), -moz-linear-gradient(#4E4E4E, #1C1C1C);
background-repeat: repeat, repeat;
background-attachment: scroll, scroll;
background-position: 0 0%, 0 0;
background-color: transparent; 
```

请注意，逗号再次用于分隔多个背景层。只有一个`background-color`，因为您不能有多种背景颜色。

同样如前所述，`-moz-`前缀是 Mozilla 的供应商扩展，用于其[线性渐变](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient)的实验性实现。但是，除非您`background`对所有其他适用的供应商扩展重复声明，否则您的代码将仅在 Mozilla 浏览器中有效，并且由于供应商扩展而无法在其他浏览器中使用。

另请注意，如果您使用上面的简写代码而不是简写，不支持的浏览器*只会*忽略`background-image`声明并应用其他所有内容，这与不支持的浏览器将*完全*忽略的简写不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T11:55:42.690

您实际上正在那里查看多个背景。逗号是分隔符。

```
url("img.png") repeat scroll 0 0% /* on top */
-moz-linear-gradient(#4E4E4E, #1C1C1C) repeat scroll 0 0 transparent /* on bottom */ 
```

渐变占据了背景图像的位置。`background`其余的应该很容易通过阅读财产来弄清楚。

[https://developer.mozilla.org/en-US/docs/CSS/background](https://developer.mozilla.org/en-US/docs/CSS/background)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T11:58:24.180

看看这里的 Mozilla 参考[和](https://developer.mozilla.org/en-US/docs/CSS)[这里](https://developer.mozilla.org/en-US/docs/CSS/CSS_Reference)的主要部分。这些应该为您提供一个很好的“进入方式”和 -moz-XXX 前缀的解释。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-18T11:59:28.403

这是你的速记：

```
#element{
  background-image:url(img.png);
  background-repeat:repeat;
  background-attachment:scroll;
  background-position:0 0;
  background-color:transparent
  background-image:-moz-linear-gradient(#4E4E4E, #1C1C1C);
} 
```

-moz-linear-gradient 仅适用于 Mozilla。这就是为什么它以 -moz- 为前缀。正如您猜对的那样，它以线性渐变作为背景，而不是图片。但只有在 Mozilla 中，所有其他浏览器都使用后台规则。渐变的选项不需要重复，因为它们与其他所有浏览器相同。

# process - Carrierwave 调整大小不起作用（Rails 3 和 MiniMagick）

> ID：12476473
> 
> 赞同：4
> 
> 时间：2012-09-18T11:51:52.510
> 
> 标签：process, resize, carrierwave, minimagick

我想要做的是通过 IMGKit 保存一个带有全尺寸快照的网站 url。在其中一个视图中，我还希望拥有快照的缩略图版本。我正在使用carrierwave将快照与MiniMagick的对象相关联来操作它，问题是它生成了“缩略图”图像但没有调整它的大小，因此我有两个全尺寸快照，然后以“拇指”为前缀之一。

我在rails中有这个模型

```
class Webpage
  mount_uploader :snapshot, SnapshotUploader
  field :url, type: String
  field :title, type: String

  after_create :get_snapshot

  private
  def get_snapshot
    file = Tempfile.new(["#{id}#{title}".downcase, '.jpg'], 'tmp', :encoding => 'ascii-8bit')
    image = IMGKit.new(url, quality: 90).to_jpg
    file.write(image)
    file.flush
    self.snapshot= file
    self.save
    file.unlink
  end

end 
```

我在上传器中有这个以创建缩略图版本：

```
class SnapshotUploader < CarrierWave::Uploader::Base
  include CarrierWave::MiniMagick

  version :thumb do
    process resize_to_fill: [180, 180]
  end

end 
```

使用控制台，我尝试使用 MiniMagick 调整图像大小，它运行良好，儿子我不知道发生了什么。我不确定我是否做得对，所以任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-27T08:27:19.247

好吧，我傻了。我有一个初始化程序

```
config.enable_processing = false 
```

所以它永远不会处理图像。只需将其设置为 true 或删除该行即可解决我的问题。

# iphone - How to edit / refactor properties of XIB files in bulk?

> ID：12476478
> 
> 赞同：2
> 
> 时间：2012-09-18T11:52:23.167
> 
> 标签：iphone, xcode, refactoring, interface-builder, xib

I one of my big projects the customer just wished to change leading font in whole app. It is quite simple for the fonts allocated by code (I have some kind of theme system which abstracts font creation).

But the problem starts with the fonts used in XIB files. Do I have to go thorough all of them and apply change to properties manually (I have literally dozens of them)?

Are there any smart **terminal commands** which could do this in more efficient way (combination of `ibtool, xargs, find`)?

I have accomplished similar problem - extracting all strings used in XIB as mentioned here:

[https://stackoverflow.com/a/7754884/229229](https://stackoverflow.com/a/7754884/229229)

And I hope there is some search (and replace) patterns also for any XIB properties.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T15:56:00.803

这些`.xib`文件是普通`.xml`文件，可以简单地编辑。
文件中只定义了非默认字体`.xib`。简化示例：

```
<object class="NSTextField" id="298830314">
    <object class="NSTextFieldCell" key="NSCell" id="386648753">
        <object class="NSFont" key="NSSupport">
            <string key="NSName">Arial-BoldMT</string>
            <double key="NSSize">18</double>
            <int key="NSfFlags">16</int>
        </object>
    </object>
</object> 
```

换句话说，删除所有`<object class="NSFont">`路径以恢复为默认字体。
要将所有字体更改`NSTextField`为特定字体，请添加以下内容：

```
<object class="NSFont" key="NSSupport">
    <string key="NSName">Arial-BoldMT</string>
    <double key="NSSize">18</double>
    <int key="NSfFlags">16</int>
</object> 
```

对所有人`<object class="NSTextField">`。

Xcode 没有内置功能可以批量自动执行此操作。

**编辑** *（对评论的回应）*

通过单击“字体面板...”按钮选择特定字体：

![字体面板按钮](../Images/8b38295b649f285362cd6c4d170e670a.png)

使用字体面板，您可以选择任何字体：

![字体面板](../Images/466708612b922bcb7261f33541692c47.png)

# asp.net - Wordpress on SQL 2008 - find and replace string

> ID：12476480
> 
> 赞同：1
> 
> 时间：2012-09-18T11:52:35.623
> 
> 标签：asp.net, sql, sql-server, sql-server-2008

Just managed to install WordPress on **SQL 2008 R2**. How to **find and replace strings** (URLs) in `dbo.wp_post`s table, `post_content` column?

Looking for a way to replace `http://localhost/` with `http://somedomain.com`

Any suggestions much appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:55:12.230

使用[`REPLACE`](http://msdn.microsoft.com/en-us/library/ms186862.aspx)：

```
UPDATE dbo.wp_post
SET post_content = 
    REPLACE(post_content, 'http://localhost/', 'http://somedomain.com');
WHERE ... --predicatehere 
```

# php - How do I create a multi-dimensional associative array in PHP which JavaScript can then process?

> ID：12476481
> 
> 赞同：0
> 
> 时间：2012-09-18T11:52:37.237
> 
> 标签：php, javascript, jquery, ajax

I'm writing a PHP script which interacts with a MySQL database and a JavaScript script which uses AJAX calls to retrieve information from the PHP script.

* * *

What I'm *trying* to do, is to create a `<select>` box where my `Subjects` are the `<optgroup label="Subject">` and the `Courses` are the `<option value="1">Course</option>` within the subjects.

What I *currently have* is a JS script which simply doesn't process, though there's no console error in Firebug.

* * *

I've written this SQL statement:

```
$sql = "SELECT
    s.Title AS Subject,
    s.Subject_ID AS Subject_ID,
    c.Title AS Course,
    c.Course_ID AS Course_ID
    FROM
    subjects s
    LEFT JOIN courses c ON s.Subject_ID = c.Subject_ID
    WHERE s.Faculty_ID = $faculty"; 
```

Which, if `$faculty == 1`, returns this data:

![Observation Recording - List of subjects and courses](../Images/a075b355d0a4898b3fe64bc4ee89e637.png)

I'm then using the following code to return a multi-dimensional array where the `Subject` level contains that subject's `Courses`:

```
$res = mysql_query( $sql );
while ( $row = mysql_fetch_assoc( $res ) ) {
    $return[$row["Subject_ID"]][] = array( "Course_ID" => $row["Course_ID"], "Title" => $row["Course"] );
}

print_r( $return ); 
```

**EDIT**: I realise that `print_r` doesn't work for sending information to my JS script (I've got a `return $return` set up for that), I was just using it for debugging purposes.

* * *

The full PHP function looks like:

```
switch($_GET["cmd"]) {
    case "populateForm" :
        $return = json_encode( populateForm() );
        break;
    case "populateCourses" :
        $return = json_encode( populateCourses( $_GET["faculty"] ) );
        break;
}

echo $return; 
```

-

```
function populateCourses( $faculty ) {
    $sql = "SELECT
        s.Title AS Subject,
        s.Subject_ID AS Subject_ID,
        c.Title AS Course,
        c.Course_ID AS Course_ID
        FROM
        subjects s
        LEFT JOIN courses c ON s.Subject_ID = c.Subject_ID
        WHERE s.Faculty_ID = $faculty";
    $res = mysql_query( $sql );
    while ( $row = mysql_fetch_assoc( $res ) ) {
        $return[$row["Subject_ID"]][] = array( "Course_ID" => $row["Course_ID"], "Title" => $row["Course"] );
    }

    return $return;
} 
```

* * *

The data from that looks like:

```
Array
(
    [8] => Array
        (
            [0] => Array
                (
                    [Course_ID] => 59
                    [Title] => Core ICT
                )

            [1] => Array
                (
                    [Course_ID] => 60
                    [Title] => BTEC Business
                )

            [2] => Array
                (
                    [Course_ID] => 61
                    [Title] => BTEC ICT
                )

            [3] => Array
                (
                    [Course_ID] => 62
                    [Title] => GCSE Business
                )

            [4] => Array
                (
                    [Course_ID] => 63
                    [Title] => GCSE ICT
                )

        )

    [9] => Array
        (
            [0] => Array
                (
                    [Course_ID] => 64
                    [Title] => Advance BTEC Business
                )

            [1] => Array
                (
                    [Course_ID] => 65
                    [Title] => Advance BTEC ICT
                )

            [2] => Array
                (
                    [Course_ID] => 66
                    [Title] => AS Applied Business
                )

            [3] => Array
                (
                    [Course_ID] => 67
                    [Title] => AS Applied ICT
                )

            [4] => Array
                (
                    [Course_ID] => 68
                    [Title] => A2 Applied Business
                )

            [5] => Array
                (
                    [Course_ID] => 69
                    [Title] => A2 Applied ICT
                )

            [6] => Array
                (
                    [Course_ID] => 70
                    [Title] => A2 Economics
                )

            [7] => Array
                (
                    [Course_ID] => 71
                    [Title] => A2 Law
                )

            [8] => Array
                (
                    [Course_ID] => 72
                    [Title] => GCSE Maths
                )

            [9] => Array
                (
                    [Course_ID] => 73
                    [Title] => Maths
                )

            [10] => Array
                (
                    [Course_ID] => 74
                    [Title] => AS Further Maths
                )

            [11] => Array
                (
                    [Course_ID] => 75
                    [Title] => AS Maths
                )

            [12] => Array
                (
                    [Course_ID] => 76
                    [Title] => GSE Maths Rs-Sit
                )

            [13] => Array
                (
                    [Course_ID] => 77
                    [Title] => A2 Further Maths
                )

            [14] => Array
                (
                    [Course_ID] => 78
                    [Title] => A2 Maths
                )

        )

) 
```

However, once I get in to my JavaScript, I have no clue how to process this data into the `<SELECT>` box that I'm after. **PLEASE NOTE** the data is being received correctly. If I `console.log(data)` in this function, it shows all of the data that has been sent by my PHP script, as expected.

I'm trying this:

```
 $('#courses').on("click", "option", function(event) {
            var id = $(this).val();
            UWA.Data.getJson(Input.URL + '?cmd=populateCourses&faculty=' + id, Input.populateCourses);
        })
    }

Input.populateCourses = function(data) {
    $('#courses').empty();
    for (var i = 0; i < data.length; i++) {
        alert(data[i]);
        $('#courses').append('<optgroup label="' + data[i] + '>');
        for (var x = 0; x < data[i].length; x++) {
            $('#courses').append('<option value="' + data[i][x].Course_ID + '">' + data[i][x].Title + '</option>');
        }
        $('#courses').append('</optgroup>');
    }
} 
```

With `#courses` being `<select id="courses"></select>`.

* * *

I'm presuming that the way I've written these `for` loops in my JS script means that the data isn't being accessed/found and as such it's failing the script.

What's the best way for me to manipulate the data returned from the SQL statement to produce the `<select>` box I require? Or, should I improve the SQL statement to make things easier?

Thanks in advance,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:56:22.457

使用[`echo json_encode( array() ); exit;`](http://php.net/json_encode)而不是`print_r()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:56:56.493

没有尝试过，但我*猜*问题是你的数据不是从零开始的数组，你的索引不是 0、1、2、3 等，所以你的循环不起作用。你应该尝试这样的事情：

```
Input.populateCourses = function(data) {
    $('#courses').empty();
    for (var i in data) {
        alert(data[i]);
        /*...*/
    }
} 
```

`data`是 php 中的关联数组，它转换为 javascript 中具有数字属性的`for (var i in data)`对象将遍历对象的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T12:35:15.317

如果您正确地重新获取数据，则无需向我们展示所有的 php 代码。

我很确定您必须查看的功能是：

```
Input.populateCourses = function(data) {
    $('#courses').empty();
    for (var i = 0; i < data.length; i++) {
        alert(data[i]);
        $('#courses').append('<optgroup label="' + data[i] + '>');
        for (var x = 0; x < data[i].length; x++) {
            $('#courses').append('<option value="' + data[i][x].Course_ID + '">' + data[i][x].Title + '</option>');
        }
        $('#courses').append('</optgroup>');
    }
} 
```

* * *

解决方案一：

```
Input.populateCourses = function(data) {
    var html = "";
    for (var i = 0; i < data.length; i++) {
        html += <optgroup label="' + data[i] + '>';
        for (var x = 0; x < data[i].length; x++) {
            html += '<option value="' + data[i][x].Course_ID + '">' + data[i][x].Title + '</option>';
        }
        html += '</optgroup>';
    }
    $('#courses').empty().html(html);
} 
```

* * *

解决方案二：

```
Input.populateCourses = function(data) {
    var $courses = $('#courses').empty();
    var $optgroup;
    for (var i = 0; i < data.length; i++) {
        $optgroup = $('<optgroup label="' + data[i] + '>').appendTo($courses);
        for (var x = 0; x < data[i].length; x++) {
            $('<option value="' + data[i][x].Course_ID + '">' + data[i][x].Title + '</option>').appendTo($optgroup);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T12:04:05.590

你想要`json_encode`你的 PHP 数组。JS 不知道如何处理该字符串输出。

然后，在 JS 端，您需要`JSON.parse`将文本转换为可以正常使用的 JS 对象。

如果您还需要它在 IE6/7 中工作，那么您需要在页面上有 Douglas Crockford 的 json2.js。如果您不支持 GhettoIE，那么您不支持。

# javascript - Dynamically load Google maps

> ID：12476486
> 
> 赞同：0
> 
> 时间：2012-09-18T11:52:53.363
> 
> 标签：javascript, google-maps, google-maps-api-3

If there was no internet connection at that moment - program can't execute remote script and create google object. Later i'm trying to reload google maps script like this:

```
if($.isEmptyObject(google)) {
    $.getScript('https://www.google.com/jsapi?sensor=true', function () {
        google.load("maps", "3");                       
    });             
} 
```

I'm getting this kind of message: `Google Maps API server rejected your request. within the sensor parameters must be set to true or false.` Why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:46:31.080

这对我有用：

```
if($.isEmptyObject(google)) {
   $.getScript('https://www.google.com/jsapi', function () {
    google.load("maps", "3", {'other_params' : 'sensor=true' });                       
   });             
} 
```

# iphone - iPhone AdHoc 应用程序 - 摆脱徽章

> ID：12476491
> 
> 赞同：1
> 
> 时间：2012-09-18T11:53:04.340
> 
> 标签：iphone, objective-c, uilocalnotification, badge

我有一个测试人员抱怨说，在通过 iTunes 更新后，应用程序图标显示一个红色圆圈，右上角有 #1，他无法摆脱它。他告诉我他已经删除了它，翻出手机，重新安装了它，但那个徽章在那里。我必须提到，该应用程序在被操作系统（appWillTerminate 方法）杀死时有一个本地通知，告诉用户他应该重新启动应用程序（是一个位置跟踪应用程序），但我认为现在情​​况并非如此，因为通知显示带有消息的警报。

有人能告诉我他怎样才能摆脱那个徽章吗？

谢谢，

亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:59:01.150

当应用程序重新启动时，您是否正在重置徽章？

要移除徽章，您需要自行重置。因此，在 applicationDidFinishLaunching 中，您可以执行以下操作来清除徽章：

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:0]; 
```

# java - JAX-WS web service using a JAX-RPC (AXIS1) client

> ID：12476497
> 
> 赞同：0
> 
> 时间：2012-09-18T11:53:32.443
> 
> 标签：java, jax-ws, jax-rpc

I am new to web service. Can anyone please tell me if JAX-WS web service can be accessed using a JAX-RPC (AXIS1) generated client stub?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:07:30.730

不。“jax-rpc”之所以如此命名，是因为它只支持“rpc/encoded”xml格式。jax-ws webservices 只支持“document/literal”格式，不兼容。

# excel-2010 - PowerPivot 工作簿中度量的数据类型转换失败

> ID：12476511
> 
> 赞同：2
> 
> 时间：2012-09-18T11:54:13.260
> 
> 标签：excel-2010, powerpivot

我在使用 PowerPivot for Excel 从多维数据集导入数据时遇到问题。当我将度量值导入 PowerPivot 工作簿时，它会将数字视为文本。当我尝试将数据类型更改为十进制数时，出现以下错误：

*发生以下系统错误：类型不匹配。PowerPivot 数据库错误：[表：'查询'，列：''，值：'6198.9357860000009'] 的数据类型转换失败。*

我正在尝试使用这些值创建数据透视表，但是虽然它将数字视为文本，但我无法正确创建它。有谁知道如何处理它？

我将不胜感激任何帮助。

问候，康拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:51:27.830

我无法处理这个问题，但我找到了解决方法。在 PowerPivot 窗口中，我添加了新列并插入了以下函数： `=VALUE(SUBSTITUTE(Query[MyMeasure],".",",",1))` 它替换了“。” 使用 "," 并将值视为十进制数。然后我隐藏了无用的列（带有文本值）并用隐藏的列名重命名了新列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:02:56.170

最后我想通了，问题是什么。区域语言设置为波兰语，波兰语中的默认十进制符号`.`代替`,`.

我将区域语言更改为美国英语，回复了 excel 文件，现在可以转换为十进制数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-28T17:49:08.083

当我们在度量中有 NaN 值时，可能会发生这种情况。除以零错误将在 PowerPivot 中抛出完全相同的消息。

# c++ - 在源代码中是否有预定义的#define 或其他方式知道它正在为 C++/CX Windows 运行时编译？

> ID：12476514
> 
> 赞同：3
> 
> 时间：2012-09-18T11:54:21.187
> 
> 标签：c++, visual-c++, c++-cli, c++-cx

Visual Studio 2012（和更早的版本）提供预定义的#defines，以便源代码可以适当地进行#ifdef 编辑，请参阅[http://msdn.microsoft.com/en-us/library/b0084kay.aspx](http://msdn.microsoft.com/en-us/library/b0084kay.aspx)

如果正在为 Windows 8 运行时（运行时 C++/CX 的组件扩展）编译（或不编译）一些 C++ 代码，我想#ifdef 一些 C++ 代码，即使用编译器开关 /ZW，请参阅[http://msdn.microsoft.com /en-us/library/hh561383.aspx](http://msdn.microsoft.com/en-us/library/hh561383.aspx)和[http://msdn.microsoft.com/en-us/library/xey702bw.aspx](http://msdn.microsoft.com/en-us/library/xey702bw.aspx)

__cplusplus 和 __cplusplus_cli（或 __CLR_VER）分别提供了检查 C++ 或 CLR 编译的功能，但似乎没有 #ifdef 用于 C++/CX /Zw Windows 运行时编译的方法！？

有人知道方法吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T17:39:40.587

该`__cplusplus_winrt`宏在启用 C++/CX 支持时定义（即使用 /ZW 编译时）。

# javascript - 带有指南针和 GPS 坐标的 Phonegap

> ID：12476515
> 
> 赞同：4
> 
> 时间：2012-09-18T11:54:24.163
> 
> 标签：javascript, cordova, geolocation, compass-geolocation

我正在做一个从Phonegap获取指南针脚本的项目，我想将它连接到我当前的GPS位置，而不是指向固定的GPS位置（如餐厅等）基本上箭头必须指向方向餐厅，所以我知道该走哪条路。

这是我想结合的两个：http: [//docs.phonegap.com/en/2.0.0/cordova_geolocation_geolocation.md.html#Geolocation](http://docs.phonegap.com/en/2.0.0/cordova_geolocation_geolocation.md.html#Geolocation) http://docs.phonegap.com/en/2.0.0/cordova_compass_compass .md.html#指南针

我有这个项目作为基础：[https ://github.com/Rockncoder/PGCompass](https://github.com/Rockncoder/PGCompass)

谁能在正确的方向上帮助我:-)？

恩克斯·埃瓦尔德

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T18:24:44.300

以下代码基本上可以满足您的需求。它计算从您当前位置（通过 GPS）到目的地位置的距离和方位，并使用指南针确定您当前的航向。当前航向与目的地方位之间的差异是箭头的角度。

带有资产的代码和编译的 Android APK 可以从这里下载：http: [//ge.tt/4Kb2oQv/v/0](http://ge.tt/4Kb2oQv/v/0)

这是代码，希望对您有帮助！

```
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Compass test</title>

    <script type="text/javascript" src="phonegap.js"></script> 
    <script type="text/javascript" src ="jquery-1.7.1.min.js">//</script> <!--http://code.jquery.com/jquery-1.7.1.min.js -->
    <script type="text/javascript" src ="latlon.js">//</script> <!-- based on http://www.movable-type.co.uk/scripts/latlong.html -->

    <style type="text/css">
        #error, #results{
            display: none;
        }

        #arrow{
            position: absolute;
            width: 30px;
            height: 30px;
            background: 50% 50% no-repeat; 
            background-size: 30px 30px;
            background-image: url('arrow.png');
            top: 0;
            left: 50%;
            margin: 30px 0 0 -15px;
        }

        #results .text{
            margin-top: 100px;
        }
    </style>

    <script type="text/javascript" >
        var destinationPosition;
        var destinationBearing;

        var positionTimerId;
        var currentPosition;
        var prevPosition;
        var prevPositionError;      

        var compassTimerId;
        var currentHeading;
        var prevHeading;
        var prevCompassErrorCode;

        $(document).on("deviceready", function() {
            minPositionAccuracy = 50; // Minimum accuracy in metres to accept as a reliable position
            minUpdateDistance = 1; // Minimum number of metres to move before updating distance to destination

            $targetLat = $('#target-lat');
            $targetLon = $('#target-lon');
            $error = $('#error');           
            $results = $('#results');
            $distance = $('#distance');
            $bearing = $('#bearing');
            $heading = $('#heading');
            $difference = $('#difference');
            $arrow = $('#arrow');

            watchPosition();            
            watchCompass();

            // Set destination
            $targetLat.change(updateDestination);
            $targetLon.change(updateDestination);
            updateDestination();

        });

        function watchPosition(){
            if(positionTimerId) navigator.geolocation.clearWatch(positionTimerId); 
            positionTimerId = navigator.geolocation.watchPosition(onPositionUpdate, onPositionError, {
                enableHighAccuracy: true,
                timeout: 1000,
                maxiumumAge: 0
            });
        }

        function watchCompass(){
            if(compassTimerId) navigator.compass.clearWatch(compassTimerId);
            compassTimerId = navigator.compass.watchHeading(onCompassUpdate, onCompassError, {
                frequency: 100 // Update interval in ms
            });
        }

        function onPositionUpdate(position){
            if(position.coords.accuracy > minPositionAccuracy) return;

            prevPosition = currentPosition;
            currentPosition = new LatLon(position.coords.latitude, position.coords.longitude);

            if(prevPosition && prevPosition.distanceTo(currentPosition)*1000 < minUpdateDistance) return;

            updatePositions();
        }

        function onPositionError(error){
            watchPosition();

            if(prevPositionError && prevPositionError.code == error.code && prevPositionError.message == error.message) return; 

            $error.html("Error while retrieving current position. <br/>Error code: " + error.code + "<br/>Message: " + error.message);

            if(!$error.is(":visible")){
                $error.show();
                $results.hide();
            }

            prevPositionError = {
                code: error.code,
                message: error.message
            };
        }

        function onCompassUpdate(heading){
            prevHeading = currentHeading;
            currentHeading = heading.trueHeading >= 0 ? Math.round(heading.trueHeading) : Math.round(heading.magneticHeading);

            if(currentHeading == prevHeading) return;

            updateHeading();
        }

        function onCompassError(error){
            watchCompass();

            if(prevCompassErrorCode && prevCompassErrorCode == error.code) return; 

            var errorType;
            switch(error.code){
                case 1:
                    errorType = "Compass not supported";
                    break;
                case 2:
                    errorType = "Compass internal error";
                    break;
                default:
                    errorType = "Unknown compass error";
            }

            $error.html("Error while retrieving compass heading: "+errorType);

            if(!$error.is(":visible")){
                $error.show();
                $results.hide();
            }

            prevCompassErrorCode = error.code;
        }

        function updateDestination(){
            destinationPosition = new LatLon($targetLat.val(), $targetLon.val());
            updatePositions();
        }       

        function updatePositions(){
            if(!currentPosition) return;

            if(!$results.is(":visible")){
                $results.show();
                $error.hide();
            }

            destinationBearing = Math.round(currentPosition.bearingTo(destinationPosition)); 

            $distance.html(Math.round(currentPosition.distanceTo(destinationPosition)*1000));           
            $bearing.html(destinationBearing);

            updateDifference(); 
        }

        function updateHeading(){
            $heading.html(currentHeading);
            updateDifference();
        }

        function updateDifference(){
            var diff = destinationBearing - currentHeading;
            $difference.html(diff);         
            $arrow.css("-webkit-transform", "rotate("+diff+"deg)");         
        }
    </script>
</head>
<body>
    <div id="results">
        <div id="arrow"></div>
        <div class="text">
            <p>Distance to destination: <span id="distance"></span> metres</p>
            <p>Bearing to destination: <span id="bearing"></span> degrees</p>
            <p>Current heading: <span id="heading"></span> degrees</p>      
            <p>Difference in heading and bearing: <span id="difference"></span> degrees</p>
        </div>
    </div>

    <p id="error"></p>

    <h2>Destination</h2>
    <div>
        <label for="target-lat">Latitude: </label>
        <input id="target-lat" value="50.623966949462" />
    </div>
    <div>
        <label for="target-lon">Longitude: </label>
        <input id="target-lon" value="-4.7256830197787" />
    </div>

</body>
</html> 
```

# gwt - GWT：如何获取 cellTable 的复选框的值

> ID：12476521
> 
> 赞同：0
> 
> 时间：2012-09-18T11:54:51.647
> 
> 标签：gwt

![在此处输入图像描述](../Images/69a9c0723101bfca4c2371387740358a.png)

我有这种情况，我想删除此单元格表中的对象，其复选框为选中此“删除”按钮的单击，

当我单击删除按钮时，知道如何获取在此 cellTable 中选中复选框的那些对象。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:30:01.917

@junaidp，由于您没有提供任何代码，我假设您已使用 CheckBoxCell 生成复选框列并将 MultiSelectionModel 分配给您的 cellTable。您可以使用以下代码：

```
Set<T> selectedObjects = ((MultiSelectionModel<T>)(cellTable.getSelectionModel())).getSelectedSet(); 
```

这里**selectedObjects**将是 T 类型，您应该指定为`CellTable<T>`。 **selectedObjects**将是对象，仅与选中的行相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:31:43.993

您可以通过以下方式检查给定单元格的选定状态：

```
Column<CellInfo, Boolean> checkColumn =
      new Column<MemberInfo, Boolean>(new CheckboxCell(true, false)) {
        public Boolean getValue(CellInfo object) {
          // Get the value from the selection model.
          return selectionModel.isSelected(object);
        }
      }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:51:33.933

如果您要求删除单行，那么您可以在 celltable 中使用 SingleSelectionModel 否则 MulitiSelectionModel。我已经用单选模型编写了一些代码，它可能会给出一些想法。IE

```
selectionModel = new SingleSelectionModel<T>();
cellTable.setSelectionModel(selectionModel) //Set into your cellTable: 
```

当您选择一个复选框时，行将自动选择，对象将设置为选择模型。

```
 CheckboxCell checkboxCell=new CheckboxCell(true, false); 
            Column<T, Boolean> boolColumn=new Column<T, Boolean>(
                        checkboxCell) {
            @Override
            public Boolean getValue(T object) {                            
             return selectionModel.isSelected(object); 
        }
        }; 
```

单击删除按钮时，使用选定的对象，它将为您提供一个删除对象。 `selectionModel.getSelectedObject();`

# html - 为什么 CSS“高度”在窗口调整大小时的行为不像“宽度”？

> ID：12476522
> 
> 赞同：2
> 
> 时间：2012-09-18T11:54:54.853
> 
> 标签：html, css

如果我在 css 中的某个元素上设置 100% 宽度，则当我调整浏览器窗口大小时，该元素将调整。如果我改为将高度设置为 100%，则在调整窗口大小时元素不会更新，相反，如果窗口扩展超出初始 100% 高度，则内容将被截断。

为什么是这样？

编辑：滚动是问题。它不会在滚动时调整大小。让网站看起来被切断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:48:56.143

基本上，div 的高度受到 body 和 html 父级的固定高度的限制。

尝试：

**的HTML**

```
<div id="full">
    Content
</div> 
```

**CSS**

```
html, body {height: 100%;}
#full {position: relative; display: table; width: 100%; height: 100%; background: #CCC;} 
```

或者，如果您愿意：**完整标记**

```
<!DOCTYPE html>
<html>
    <head>
        <style>
            html, body {height: 100%;}
            #full {position: relative; display: table; width: 100%; height: 100%; background: #CCC;}
        </style>
    </head>
    <body>
        <div id="full">
            Content
        </div>
    </body>
</html> 
```

关键是设置`height:100%`和显示属性`display:table;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:07:34.863

`Height: 100%`意思是“和我的父元素一样高”。所以，如果你的父元素只有 300px 的高度，你的子元素也只能是最大 300px 的高度。宽度也是如此，但块级元素默认占用所有可用的水平空间。

请注意，这不适用于内联元素，它们一起忽略高度/宽度。

*编辑*看看你的元素：

```
<html>
<body>
<div class="wrapper">
</div><!-- end wrapper -->
</body>
</html> 
```

`body`你的元素有多高？是100%吗？`html`你的元素有多高？是100%吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:05:22.160

它工作正常试试这个[DEMO](http://jsbin.com/obereb/3) 你的代码可能有问题

# php - 如果与字符串模式匹配，如何使用 xpath 和 php 打印 xml 数据？

> ID：12476532
> 
> 赞同：0
> 
> 时间：2012-09-18T11:55:17.137
> 
> 标签：php, xml, string, xpath

我正在使用 php 和 xpath 来显示一个 xml 文件，该文件具有这样的 xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<cities>
  <city>
    <city_id>8393</city_id>
    <country>ITALY</country>
    <name>Petrosino</name>
    <establishment_count>1</establishment_count>
  </city>
  <city>
    <city_id>7920</city_id>
    <country>AUSTRIA</country>
    <name>Traiskirchen</name>
    <establishment_count>1</establishment_count>
  </city>
</cities> 
```

和这样的php代码：

```
<?php

$source = file_get_contents('cities.xml');
$xml = new SimpleXMLElement($source);

foreach ($xml as $node)
  {
    $row = simplexml_load_string($node->asXML());
    $result = $row->xpath("//city/name");
    if ($result[0])
    {

   $name = $row->name;
   echo "<div>".$name.", ".$row->country."</div>";
}
  }
?> 
```

代码运行良好，打印结果如下：

```
Petrosino, ITALY
Traiskirchen, AUSTRIA 
```

在这里，如果数据与字符串模式匹配，我不知道如何打印数据。就像我传递字符串“lon”一样，它只显示那些具有“lon”字符串模式的城市名称，例如“london”

请在这件事上给予我帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:12:12.863

您想使用 preg_match。例如

```
$pattern = '/^lon/';
if (preg_match($pattern, $name)){
    // do your print out
} 
```

更多信息在这里： http: [//php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:15:36.463

使用`contains()`：

```
$string = '<?xml version="1.0" encoding="utf-8"?>
<cities>
  <city>
    <city_id>8393</city_id>
    <country>ITALY</country>
    <name>Petrosino</name>
    <establishment_count>1</establishment_count>
  </city>
  <city>
    <city_id>7920</city_id>
    <country>AUSTRIA</country>
    <name>Traiskirchen</name>
    <establishment_count>1</establishment_count>
  </city>
</cities>';

$xml = new SimpleXMLElement($string);
$result = $xml->xpath("//city/name[contains(., 'Pet')]");

print_r($result);

/*Array
(
    [0] => SimpleXMLElement Object
        (
            [0] => Petrosino
        )

)*/ 
```

或为您的问题：

```
$string = 'Pet';
foreach ($xml as $node){
    $row = simplexml_load_string($node->asXML());
    $result = $row->xpath("name[contains(., '".$string."')]");
    if ($result[0]){
        $name = $row->name;
        echo "<div>".$name.", ".$row->country."</div>";
    }
} 
```

[键盘示例](http://codepad.org/ER7erpQB)

对于不区分大小写的情况，它有点难看：

```
$string = 'pet';
$result = $xml->xpath("//city[contains(translate(name,'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'), '".strtoupper($string)."')]");
foreach($result as $one){
    echo "<div>".$one->name.", ".$one->country."</div>";
} 
```

# image - Scikit-学习。分类无序的 jpg

> ID：12476533
> 
> 赞同：2
> 
> 时间：2012-09-18T11:55:20.693
> 
> 标签：image, classification, scikit-learn

您将如何处理以下问题：我有 5 类图像（总共 500 张图像）：汽车、房屋、树木、椅子和脸。然后我有一个包含 20 个无序图像的文件夹，这意味着我知道它们属于 5 个类别之一，但还不知道属于哪一个，我希望我的系统根据 5 个受控类别对它们进行分类。我正在使用几个提取器（色调、边缘）来完成这项任务，但我正在努力寻找合适的分类方法。特别是一些python库需要以与类文件夹相同的方式命名不受控制的图像文件夹（例如/dir/受控/汽车和/dir/uncontrolled/car），这对我的分析来说根本不可行。至于我正在寻找替代方法，您能否在 sklearn 中提供一些方法论建议/解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:46:06.377

也许使用诸如[ImageNet 之](http://www.image-net.org/)类的标记数据集来首先在这 5 个类上训练分类器会更容易（+1 个额外的“misc”类，您将用不是来自这 5 个类的随机图像填充）。

从图像网络中获取尽可能多的示例来构建您的训练集，同时保持类大致平衡。例如 imagenet 有近 8000 张汽车图片：[http](http://www.image-net.org/synset?wnid=n02958343) ://www.image-net.org/synset?wnid=n02958343但只有大约 1500 张面孔：[http](http://www.image-net.org/synset?wnid=n02958343) ://www.image-net.org/synset?wnid=n02958343 。在这种情况下，某些分类器可能无法很好地对汽车类进行二次采样，这可能会在 f1 分数方面产生更好的结果。除非你找到另一个人脸图片来源。

一旦您找到一组用于特征提取 + 分类器链的参数，这些参数可以在您的 ImageNet 子集上产生良好的交叉验证分数，请在该完整子集上重新训练模型并将其应用于预测您自己的数据集的标签。

选择一个给你置信度分数的分类器（例如，使用诸如`predict_proba`or之类的方法`decision_function`）并内省具有最高和最低置信度分数的分类质量：

*   如果所有最高分类都是正确的，则将所有高于某个安全阈值的图片添加到包含原始 imagenet 子集和那些新图片的“阶段二”训练集中。
*   手动重新注释最低置信度预测中最令人讨厌的错误，并将它们添加到“阶段二”训练集中。

通过在这个丰富的数据集上重新训练一个新模型来进行迭代，直到分类算法能够正确地注释你的大部分图片。

顺便说一句，一旦开始注释数据并使用分类器进行迭代以避免过度拟合，请不要过多地更改参数。如果要重新进行参数选择，则应再次进行交叉验证。

# login - Tortoise SVN 使用单登录计算机跟踪更改？

> ID：12476534
> 
> 赞同：1
> 
> 时间：2012-09-18T11:55:22.073
> 
> 标签：login, tortoisesvn, blame

我有一台用于更改文件的开发机器，我们有 SVN 作为我们的 CM 工具。我们只有一次登录到计算机本身。即使我们只有一台计算机登录，是否有办法以某种方式跟踪存储库中的更改？

换句话说...

计算机有 3 个用户：A、B、C

电脑只有一次登录。

因此，如果用户 A 更改某些内容，然后用户 B 更改某些内容。如何区分这两种变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:50:10.453

TortoiseSVN 应该提示您输入凭据以进行身份​​验证。如果这没有发生 - 您可以清除身份验证缓存。有关详细信息，请参阅[TortoiseSVN 手册](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug.html#tsvn-dug-general-auth)。

如果您使用带有[集成 Windows 身份验证（单点登录）的](https://www.visualsvn.com/server/features/windows-auth/#integrated)VisualSVN 服务器，则需要使用 Windows 凭据管理器管理 Active Directory 凭据。检查[ServerFault 线程](https://serverfault.com/a/408830/107134)以获取说明。

# php - jQuery - 如何在单击按钮时获取存储在隐藏字段中的数组的值？

> ID：12476537
> 
> 赞同：-3
> 
> 时间：2012-09-18T11:55:34.150
> 
> 标签：php, jquery

如何在单击“showImages”时检索特定的隐藏字段值

```
<span class="isymbol" id="showImages" href="Javascript:Void(0);"></span>

<input type="hidden" name="hdnplaceid[<?php echo $k; ?>]" id="hdnplaceid" value="<?php echo $PackageDetailsSightSeeing[$k]['deal_place_id']; ?>">
<input type="hidden" name="hdncityid[<?php echo $k; ?>]" id="hdncityid" value="<?php echo $PackageDetailsSightSeeing[$k]['deal_city_id']; ?>"> 
```

我试过这个，但每次我得到相同的值，不管我点击的按钮是什么

```
$('.isymbol').click( function() {
   var placeid= $("#hdnplaceid").val();

   //   $("#hdnplaceid").val();
   var cityid=$("#hdncityid").val();
   alert(placeid);
   alert(cityid);
   loadImagePopupBox();
}); 
```

跨度和输入字段在 for 循环中。所以它们是动态生成的。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:09:00.897

如果 span 和 hidden 字段在循环中，那么试试这个：

php/html 代码：

```
<span class="isymbol" id="showImages" href="Javascript:Void(0);" onclick="show_hidden_value(<?php echo $k; ?>)"></span>

<input type="hidden" name="hdnplaceid<?php echo $k; ?>" id="hdnplaceid" value="<?php echo $PackageDetailsSightSeeing[$k]['deal_place_id']; ?>">
<input type="hidden" name="hdncityid<?php echo $k; ?>" id="hdncityid" value="<?php echo $PackageDetailsSightSeeing[$k]['deal_city_id']; ?>"> 
```

javascript代码：

```
function show_hidden_value(id){
  var placeid= $("#hdnplaceid"+id).val();

  var cityid=$("#hdncityid"+id).val();

  alert(placeid);
  alert(cityid);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:56:11.890

HTML：

```
<span class="isymbol" id="[<?php echo $k; ?>]" href="Javascript:Void(0);"></span> 
<input type="hidden" name="hdnplaceid[<?php echo $k; ?>]" id="hdnplaceid" value="<?php echo $PackageDetailsSightSeeing[$k]['deal_place_id']; ?>">
<input type="hidden" name="hdncityid[<?php echo $k; ?>]" id="hdncityid" value="<?php echo $PackageDetailsSightSeeing[$k]['deal_city_id']; ?>"> 
```

jQuery：

```
$('.isymbol').click( function() {
    var id = this.attr("id");
    var placeid= $("#hdnplaceid"+id).val();
    var cityid=$("#hdncityid"+id).val();
    alert(placeid);
    alert(cityid);  
}); 
```

# python - 绘制参数化代数曲面的旋转

> ID：12476539
> 
> 赞同：3
> 
> 时间：2012-09-18T11:55:47.777
> 
> 标签：python, 3d, matplotlib

我想绘制一个旋转的抛物柱面。就像用两根手指握住对称平面的一个点，让这个平面围绕这个点旋转。

有[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix#Basic_rotations)（对于 y 轴）。

参数化曲面为：

(u,v,u**2)

我已经为围绕 x 轴的旋转绘制了这个曲面：

![在此处输入图像描述](../Images/979e3daa5079a8c71ab1581c5e7819e4.png)

下面是修改后的（！）代码，用于绘制绕 y 轴的旋转。

```
from math import cos,sin,pi
import matplotlib.pyplot as plt
from matplotlib import cm

from mpl_toolkits.mplot3d import Axes3D
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.auto_scale_xyz([0, 500], [0, 500], [0, 0.15])

ax.set_xlabel('X')
ax.set_ylabel('Y')
ax.set_zlabel('Z')

Us = np.arange(-1, 1, 0.005)
Vs = np.arange(-1, 1, 0.005)

for ch in [0.2*i*pi for i in range(3)]: 
    Xs = Us*cos(ch) + sin(ch)*(Us**2)
    Ys = Vs
    Xs, Ys = np.meshgrid(Xs, Ys)
    Zs = -Us*sin(ch) + cos(ch)*(Us**2)
    Axes3D.plot3D(ax,Xs,Ys,Zs, alpha=0.05) 
```

它不起作用。它产生废话。这是我得到的输出：

![在此处输入图像描述](../Images/42d878dfb258f4894415a6f251cf3d0e.png)

操作是相同的，所以我真的不明白为什么它不起作用。谁能告诉我我做错了什么？

我需要进行这项工作，以便仅查看代数曲面在受到某些旋转时的变换方式。上面的代码是我目前正在调试的粗略简化的片段。所以我希望得到关于这个特定代码的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:26:44.907

这是另一个使用显式旋转方程的版本：

```
import matplotlib as mpl
mpl.use('TkAgg')
from math import cos,sin,pi
import numpy as np
from mpl_toolkits.mplot3d import axes3d
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.auto_scale_xyz([0, 500], [0, 500], [0, 0.15])

ax.set_xlabel('X')
ax.set_ylabel('Y')
ax.set_zlabel('Z')

U = np.arange(-1, 1, 0.005)
V = np.arange(-1, 1, 0.005)
def animate():
    for ch in [0.2*i*pi for i in range(3)]:
        Us, Vs = np.meshgrid(U, V)
        Xs = Us*cos(ch) + sin(ch)*(Us**2)
        Ys = Vs
        Zs = -Us*sin(ch) + cos(ch)*(Us**2)
        tmp = ax.plot_surface(Xs,Ys,Zs, alpha=0.05)
        fig.canvas.draw()
        tmp.remove()

win = fig.canvas.manager.window
fig.canvas.manager.window.after(100, animate)
plt.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:40:11.623

[rotate_axes3d_demo](http://matplotlib.org/examples/mplot3d/rotate_axes3d_demo.html)用[ax.view_init](http://matplotlib.org/mpl_toolkits/mplot3d/api.html#mpl_toolkits.mplot3d.axes3d.Axes3D.view_init)这样做：

```
import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import axes3d
plt.ion()

sin = np.sin
cos = np.cos
pi = np.pi

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.auto_scale_xyz([0, 500], [0, 500], [0, 0.15])

ax.set_xlabel('X')
ax.set_ylabel('Y')
ax.set_zlabel('Z')

Us, Vs =  np.meshgrid(np.linspace(-1, 1, 200), np.linspace(-1, 1, 200))
ax.plot_surface(Us,Vs,Us**2)
for angle in range(0, 360):
    ax.view_init(angle, 30)
    plt.draw() 
```

# iphone - 生成1到10之间的随机数，不重复

> ID：12476544
> 
> 赞同：1
> 
> 时间：2012-09-18T11:56:02.900
> 
> 标签：iphone, objective-c, random

我想生成一个介于 1 和 10 之间的随机数。当用户单击“下一步”按钮时，必须打印一个随机问题，并且问题不能重复。问题是有时这个问题会重复出现。任何人都可以帮助我或提供一些参考或教程吗？

```
- (IBAction)nextQuestion:(id)sender
{
    NSInteger randomNum = arc4random() %10 ;
    int countCounter= counter++;
    [self.btnNext setTitle:@"Next" forState:UIControlStateNormal];

    if(countCounter==4)
    {
        self.btnNext.hidden=YES;
        self.btnQuizDone.hidden=NO;
    }

    switch ( arc4random()%10) 
    {
      case 0:
      {
          NSLog(@"zero");

          [lblQuestion setText:@"Q10:question number ten"];

      }
      break;
     case 1:
      {
          NSLog(@"one");
          [lblQuestion setText:@"Q2:question number two"];

      }
      break;
      case 2:
      {
          NSLog(@"two");
          [lblQuestion setText:@"Q6:question number six"];

      }
      break;
      case 3:
      {
          NSLog(@"three");
          [lblQuestion setText:@"Q5:question  number five"];

      }
       break;
      case 4:
      {
          NSLog(@"four");
          [lblQuestion setText:@"Q3:question number three"];

      }
      break;
      case 5:
      {
          NSLog(@"five");
          [lblQuestion setText:@"Q9:question  number nine"];

      }
      break;
      case 6:
      {
          NSLog(@"six");
          [lblQuestion setText:@"Q7:question  number seven"];

      }
      break;
      case 7:
      {
          NSLog(@"seven");
          [lblQuestion setText:@"Q4:question  number four"];

      }
      break;
      case 8:
      {
          NSLog(@"eight");
          [lblQuestion setText:@"Q1:question  number one"];

      }
      break;
      case 9:
      {
          NSLog(@"nine");
          [lblQuestion setText:@"Q8:question  number eight"];

      }
      break;

      default:
          break;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T12:00:18.450

这个怎么样。

```
- (IBAction) getNextRandomQues:(id) sender
{
   int randomQuesIndex = (arc4random() % mutableArrayOfQuestions.count) + 1;
   [mutableArrayOfQuestions removeObjectAtIndex: randomQuesIndex];
} 
```

mutableArrayOfQuestions 可以是“问题”数组（问题可以是模态问题的类）或问题索引的简单数组。想法是从 mutableArrayOfQuestions 中随机选择问题并将其删除，以便下次不会再次选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T12:02:47.977

有一种更简单的方法可以做到这一点。
您可以简单地创建一个包含 10 个数字的 NSMutableArray：

```
NSMutableArray* numbers=[[NSMutableArray alloc]init];
for(int i=0; i<10; i++)
{
    [numbers addObject: [NSNumber numberWithInt: i]];
} 
```

并且每次需要随机数时，从数组中随机抽取一个数，然后删除：

```
int randomIndex= random()%[numbers size];
NSNumber* randomNumber=[numbers objectAtIndex: randomIndex];
[numbers removeObjectAtIndex: randomIndex]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T12:07:21.333

你想要的实际上是一个排列。

**想法1：**

你有 N 个问题。K题不使用（0开头）算法：

1.  生成随机数`r = arc4random() % (N - K)`
2.  找到第 r 个未使用的问题。
3.  将此问题注册为已使用，递减 K。

**想法2：**

为开头的问题生成索引：

问题索引`int indices[] = {0, 1, 2, 3, ..., N};`（从 的值生成`N`）

随机交换索引 - 生成随机排列。

```
for (int i = 0; i < 10 * N; i++) {
   int pos1 = arc4random() % N;
   int pos2 = arc4random() % N;

   swap(indices, pos1, pos2);
}
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T13:13:32.943

就像 Sulthan 说的，但是使用[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)算法。

```
int i = N;
while (-- i) {
  int pos1 = arc4random() % (i + 1);
  swap(indices, pos1, i);
} 
```

该算法因人们弄错而臭名昭著（请参阅[http://www.codinghorror.com/blog/2007/12/the-danger-of-naivete.html](http://www.codinghorror.com/blog/2007/12/the-danger-of-naivete.html)）。我已经修复了两次以上问题，但我仍然不确定它是否正确！如果可能，请使用库中的随机洗牌算法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T12:05:43.783

在一组 10 个问题中，即使随机选择，您也很可能会重复一个问题。每个问题都有十分之一的机会被选中，并且在真正随机选择中，有可能再次选择相同的问题。这是因为您所做的选择是从容器中选择项目，然后将其放回。

如果一个问题不能重复，那么你需要做的是有某种机制，这样当一个问题被使用时，它就不会被放回从中进行选择的问题集中。

因此，您需要修改您的代码，以便您拥有一系列问题，并且当您选择一个问题时，该问题会在您下次生成随机问题时从随机选择中删除。然后，一旦完成随机选择，您将删除的问题放回集合中并删除刚刚选择的问题。

这意味着您第一次选择时，您将做一个十分之一的随机数。之后，它将始终是 9 中的 1 随机数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T12:10:48.820

做这个：

```
-(NSMutableArray *)randomNumberGenrator:(NSMutableArray *)arrValues{

NSUInteger totalcount = [arrValues count];
for (NSUInteger i = 0; i < totalcount; ++i) 
 {
    // Select a random element between i and end of array to swap with.
    int nElements = totalcount - i;
    int n = (random() % nElements) + i;
    [arrValues exchangeObjectAtIndex:i withObjectAtIndex:n];
 }
 return arrValues;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-18T12:56:15.290

```
public int[] a = new int[10]{-1,-1,-1,-1,-1,-1,-1,-1,-1,-1};

   public int onNextClickGetRandomQuestionNumber()
   {
       int k = arc4random()%10;

       if (!Exists(k,a))
       {
           for (int i = 0; i < a.Length; i++)
           {
               if (a[i] < 0)
               {
                   a[i] = k;
                   return i;
               }
           }

           for (int i = 0; i < a.Length; i++)
           {
               a[i] = -1;
           }
       }
       else
       {
           onNextClickGetRandomQuestionNumber();
       }

       return -1;

   }

    public  bool Exists(int parameter,int[] Massive)
    {
        for (int i = 0; i < Massive.Length; i++)
        {
            if( parameter == Massive[i])
            {
                return true;
            }
        }
        return false;
    } 
```

那是我产生的一些糟糕的东西，我想这个想法正是你需要的=）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-18T13:02:35.817

遵循此代码

```
NSMutableIndexSet *indexSet = [NSMutableIndexSet new];

while ([indexSet count]<10) {

int randomNumber = arc4random_uniform(11);

   if(randomNumber!=0)
   {
       [indexSet addIndex:randomNumber];
   }
} 
```

# android - Android：ProgressBar 不起作用

> ID：12476546
> 
> 赞同：0
> 
> 时间：2012-09-18T11:56:07.487
> 
> 标签：android, progress-bar, android-mediaplayer

我正在使用媒体播放器。我想在连接 URL 和媒体播放器准备就绪时显示进度条，但我无法显示它。

```
public class MainActivity extends Activity implements OnClickListener, Runnable{

MediaPlayer mPlayer;
ProgressBar pBar = null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Continue();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}
public void Connect()
{           
    try {
        Toast.makeText(getApplicationContext(),"Yayın Açılana Kadar Lütfen Bekleyiniz" , Toast.LENGTH_SHORT).show();
        mPlayer.prepare();
    } catch (IllegalStateException e) {
        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_SHORT).show();
        e.printStackTrace();
    } catch (IOException e) {
        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_SHORT).show();
        e.printStackTrace();
    }   

    mPlayer.start();
    pBar.setVisibility(ProgressBar.VISIBLE);
    pBar.setProgress(0);
    pBar.setMax(mPlayer.getDuration());
    new Thread(this).start();
    if(mPlayer!=null)pBar.setVisibility(ProgressBar.GONE);
}
public void Continue()
{
    mPlayer = new MediaPlayer();
    String str = "http:MyURL";
    mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    try {
        mPlayer.setDataSource(str);
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_SHORT).show();
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_SHORT).show();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_SHORT).show();
        e.printStackTrace();
    }   
    Connect();
}
public void run() {
    // TODO Auto-generated method stub
    int currentPosition =0;
    int total = mPlayer.getDuration();
    while(mPlayer!=null && currentPosition<total){
        try{
            Thread.sleep(1000);
            currentPosition = mPlayer.getCurrentPosition();
        }catch(InterruptedException e){
            return;
        }catch(Exception e){
            return;
        }
        pBar.setProgress(currentPosition);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:59:19.910

您`pBar.setVisibility(ProgressBar.GONE);`在启动线程后立即调用..它会立即显示然后消失..
处理完成后将其移动到运行方法中。

# css - 按下回车按钮时在 div 中中断文本

> ID：12476547
> 
> 赞同：1
> 
> 时间：2012-09-18T11:56:09.867
> 
> 标签：css

我正在使用这段代码来实现在按下回车按钮时打破文本的结果。它工作得很好，但我想在另一个页面中显示文本。

```
 $(document).ready(function() {
   $('#input').keyup(function() {
     $('#output').html($(this).val()); 
   });
  });

 <textarea id="input"></textarea><br />
 <pre id="output" style="font-family: Arial";></pre> 
```

如何`<pre id="output">`在另一个页面中使用？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:59:07.873

您的意思是取值`input`然后将其放入`<pre>`另一个文件中的元素中吗？为此，您将需要一些服务器端语言，除非它是当前窗口的子窗口（例如`iframe`元素或模式窗口）。

# linux - 在 Linux 中轻松检查 Intel 汇编操作码

> ID：12476548
> 
> 赞同：4
> 
> 时间：2012-09-18T11:56:11.183
> 
> 标签：linux, assembly, x86, x86-64, opcode

我一直在寻找一种实用的工具，可以在 Linux 中打印任何英特尔 64 位或 32 位指令的操作码，例如。类似于[`Hiew's`](http://www.hiew.ru/)DOS 中的汇编程序。基于网络的服务也是一种选择。

由于找不到任何内容，我制作了自己的`bash`脚本，从命令行参数（指令 [s] 和 <32/64>）创建汇编源文件，编译、链接和反汇编它并显示正确的行的拆卸。但是是否已经有一些程序可以显示任何给定指令的*所有*可能编码，例如。为`mov eax,ebx`？我使用`nasm`,`ld`的方法`ndisasm`显然只为每条指令提供了一种可能的编码。

使用此脚本，我可以获得`nasm`64 位和 32 位代码使用的编码，例如：

```
/home/user/code/asm$ showop 'nop;add eax,ebx;cpuid' 64

00000000  90                nop
00000001  01D8              add eax,ebx
00000003  0FA2              cpuid 
```

但是我怎样才能轻松获得所有可能的操作码编码呢？是否已经有一些可用的程序？

这是代码：

```
#!/bin/bash

# usage: showop instructions bits

asminstr=$1
bits=$2

# asminstr="nop;nop;nop;nop;add eax,ebx;nop;nop;nop"
# bits=64

numberofinstr=`echo $asminstr | grep -o ";" | wc -l`
((numberofinstr++))

if [ -f tempasmfile.asm ]
    then
    rm tempasmfile.asm
fi
if [ -f tempobjfile.o ]
    then
    rm tempobjfile.o
fi
if [ -f tempexefile ]
    then
    rm tempexefile
fi

printf "[bits $bits]\nsection .text\nglobal _start\n\n_start:\n`echo $asminstr | sed 's/;/\\n/g'`\n" >tempasmfile.asm

nasm -f elf$bits tempasmfile.asm -o tempobjfile.o
ld tempobjfile.o -o tempexefile

if [ $bits -eq 32 ]
then
    ndisasm -b $bits -e 0x60 tempexefile | head -n $numberofinstr
elif [ $bits -eq 64 ]
then
    ndisasm -b $bits -e 0x80 tempexefile | head -n $numberofinstr
fi
rm tempasmfile.asm
rm tempobjfile.o
rm tempexefile 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T11:58:35.500

像[libdisasm](http://bastard.sourceforge.net/libdisasm.html)和[udis86](http://udis86.sourceforge.net/)这样的反汇编程序通常带有一个操作码查找表。

udis86 还带有一个命令行工具（udcli），您可以输入十六进制字节，它会为您提供解码版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-03T18:37:11.930

[radare2](https://github.com/radareorg/radare2/)和它的 fork [rizin](https://github.com/rizinorg/rizin)提供了一些 cmdline 工具来实现这个目的：

```
 $ rasm2 -a x86 nop
    90
    $ rasm2 -d -a x86 90
    nop 
```

如果使用 rizin，请替换`rasm2`为`rz-asm`.

[来源](https://www.linuxquestions.org/questions/programming-9/how-to-convert-hex-numbers-to-assemble-codes-4175441611/)

另一种选择是[`cstool`](https://github.com/aquynh/capstone/blob/master/cstool/README)来自`capstone-tool`包装。

# c# - 在 VS 2010 中打开 .net 4.0 解决方案文件时，我收到一条输出消息

> ID：12476555
> 
> 赞同：0
> 
> 时间：2012-09-18T11:56:48.697
> 
> 标签：c#, asp.net, visual-studio-2010, visual-studio, c#-4.0

我正在使用 Visual Studio 2010 sp1

当我在 VS 2010 中打开 .NET 4.0 应用程序时，我收到一条输出消息

**正在加载 F:\Projects..\Project.csproj ... F:\Projects..\Project.csproj：错误：无法打开项目文件“F:\Projects..\Project.csproj”。此安装不支持项目类型。**

但我可以在应用程序中打开其他项目。它们已正确加载。

给我一个如何打开的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:01:28.667

它是这两个之一：

1.  您的 Visual Studio 安装已损坏（不太可能）。
2.  该项目是使用支持更多项目类型的 Visual Studio 版本创建的，而您的安装支持更少。例如，如果您使用 Visual Studio Ultimate 创建 Sharepoint 或测试管理器项目，并尝试使用 Visual Studio Proffesional 打开它。（最有可能的）。

另一个例子是当你使用 VS Web Express 创建一个 Web 项目，然后你尝试用 VS Express for Windows Phone 打开它。

# php - 如何从请求的服务器页面获取数据？

> ID：12476557
> 
> 赞同：0
> 
> 时间：2012-09-18T11:56:52.493
> 
> 标签：php, curl, file-get-contents

我有两个 php 页面： **client.php**和**server.php**

**server.php**在我的网络服务器上，它的作用是打开我的亚马逊产品页面并获取价格数据并将其序列化并将其返回给**client.php**。

现在我遇到的问题是**server.php**正在获取数据，但是当我返回它并`echo`在 using 之后执行时`unserialize()`，它什么也没显示。但如果我`echo`在**server.php**中做，它会向我显示所有数据。

为什么会这样？任何人都可以帮助我吗？

这是我使用的代码：

**客户端.php**

```
$url = "http://www.myurl.com/iec/Server.php?asin=$asin&platform=$platform_variant";
$azn_data = file_get_contents($url);
$azn_data = unserialize($azn_data);
echo "\nReturned Data = $azn_data\n"; 
```

**服务器.php**

```
if(isset($_GET["asin"]))
     {
         $asin = $_GET["asin"];
         $platform = $_GET["platform"];
         echo "\nASIN = $asin\nPlatform = $platform";
         //Below line gets all serialize price data for my product
         $serialized_data = amazon_data_chooser($asin, $platform);

         return($serialized_data);
     }
     else
     {
         echo "Warning: No Data Found!";
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:20:16.243

在**server.php**上，您需要替换以下行：

```
return($serialized_data); 
```

对于这个：

```
echo $serialized_data; 
```

因为 client.php 读取server.php的**输出**`return`，用于将信息从函数传递给调用者代码。

**更新**：
除了上面的修复之外，您在`unserialize()`函数中遇到了一个错误，该错误显示了一些特殊的字符组合，您的数据似乎具有，解决方案是通过`base64()`在将数据传递给之前对数据进行编码来解决该错误`serialize()`，例如这个：

在**client.php**中：

```
$azn_data = unserialize(base64_decode($azn_data)); 
```

在**server.php**中：

```
echo base64_encode($serialized_data); 
```

[**此处**](http://davidwalsh.name/php-serialize-unserialize-issues)修复的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:03:51.820

您没有在服务器端序列化您的数据，因此在客户端没有什么可以反序列化的。

```
return(serialize($serialized_data)); 
```

编辑：

```
if(isset($_GET["asin"]))
     {
         $asin = $_GET["asin"];
         $platform = $_GET["platform"];
         echo "\nASIN = $asin\nPlatform = $platform";
         //Below line gets all serialize price data for my product
         $serialized_data = amazon_data_chooser($asin, $platform);

         die(serialize($serialized_data));
     }
     else
     {
         echo "Warning: No Data Found!";
     } 
```

# c# - 矩阵未正确转换为着色器

> ID：12476564
> 
> 赞同：2
> 
> 时间：2012-09-18T11:57:33.633
> 
> 标签：c#, hlsl, slimdx

在我的应用程序中，我无法将我的世界、视图和投影矩阵传递给着色器。我已经设置了一个小引擎来执行这些任务，并且我正在使用 PIX 和 Visual Studio 来调试我得到的输出。

首先，我发布与顶点和索引相关的代码：

```
Rendering.Geometry.MeshGeometry<uint> geom = Rendering.Geometry.MeshGeometry<uint>.Create(device);
var elem = Rendering.Geometry.VertexElement.CreatePosition3D(device);
float[] vertices = new float[9]
{
    0, 0, -3,
    0, 0, 3,
    0, 5, 0,
};

elem.DataStream.WriteRange(vertices);
geom.AddVertexElement(elem);

var triangle = geom.Triangles.AddFace();
triangle.P1 = 0;
triangle.P2 = 1;
triangle.P3 = 2; 
```

几何形状似乎是正确的，因为当我在 PIX 中调试我的绘图调用时，我得到了顶点 (0/0/-3)/(0/0/3)/(0/5/0) 的正确值，所以我认为索引缓冲区、顶点缓冲区、输入布局和多边形拓扑都设置正确。

现在在 PIX 中，我有有趣的 Pre-VS，Post-VS 视图。正如我所说的，Pre-VS 一切看起来都很好，顶点按正确的顺序是正确的。当我去 Post-VS 并调试一个顶点时，我最终会在我的着色器中查看说明。

现在不正确的是使用常量缓冲区传递给它的矩阵。这是我的着色器：

```
cbuffer MatrixBuffer
{
    float4x4 worldMatrix;
    float4x4 viewMatrix;
    float4x4 projectionMatrix;
};

struct VertexInputType
{
    float4 position : POSITION;
};

struct PixelInputType
{
    float4 position : SV_POSITION;
};

PixelInputType BasicEffectVS(VertexInputType input)
{
    PixelInputType output = (PixelInputType)0;

    float4x4 worldViewProj = worldMatrix * viewMatrix * projectionMatrix;

    output.position = mul(input.position, worldViewProj);   
    output.position.w = 1.0f;
    return output;
} 
```

当我在 PIX 中查看三个矩阵时，我发现除了 worldMatrix 之外，对于 viewMatrix 和 projectionMatrix，它们的值完全错误（甚至包含 NaN）。我在应用程序中设置矩阵的方式如下：

```
basicEffect.WorldMatrix = SlimDX.Matrix.Identity;
basicEffect.ViewMatrix = SlimDX.Matrix.Transpose(SlimDX.Matrix.LookAtLH(new SlimDX.Vector3(20, 5, 0), new SlimDX.Vector3(0, 5, 0), new SlimDX.Vector3(0, 1, 0)));
basicEffect.ProjectionMatrix = SlimDX.Matrix.Transpose(SlimDX.Matrix.PerspectiveFovLH((float)Math.PI / 4, ((float)f.ClientSize.Width / f.ClientSize.Height), 1.0f, 100.0f)); 
```

在 VS 中调试它们会给我正确的值。然后我跟随着色器上的 SetValue 调用，直到我开始实际写入字节。那里一切都很好！

缓冲区的创建方式如下：

```
holder.buffer = new SlimDX.Direct3D11.Buffer(mShader.Device, new BufferDescription()
{
    BindFlags = BindFlags.ConstantBuffer,
    SizeInBytes = buffer.Description.Size,
    Usage = ResourceUsage.Dynamic,
    CpuAccessFlags = CpuAccessFlags.Write

}); 
```

更糟糕的是：如果我将另一个矩阵参数添加到我的着色器并为该值设置一个硬编码矩阵，例如：

```
Matrix mat = new Matrix()
{
    M11 = 1,
    M12 = 2,
    ...
}; 
```

在 PIX 中，我得到了我期望的值。所以我对着色器的函数设置值必须是正确的。

有人知道这是从哪里来的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:44:47.043

确保删除此行： output.position.w = 1.0f;

这是投影组件，因为您已经乘以投影矩阵，您需要将其原样发送到像素着色器。

此外，我会对所有转置非常小心，我不确定它们是否真的需要。

# cocoa - UIViewController 子类子类 - 我如何避免超级的实现？

> ID：12476568
> 
> 赞同：1
> 
> 时间：2012-09-18T11:57:56.717
> 
> 标签：cocoa, uiviewcontroller, subclass

这是我的情况：子类 B 继承自子类 A 继承自 UIViewController。在子类 B 中，我避免调用 viewWillAppear: 的超级（子类 A）实现，但我认为它不正确，即使它工作正常。

仍然调用 UIViewController 的实现的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:08:15.630

深层次的层次结构经常会变得混乱，尤其是`UIViewController`. 尽可能避免它们。

一种方法是提供一种机制来绕过超类提供的功能。例如：

```
@interface MagicalViewController : UIViewController
-(BOOL)shouldDoMagicOnViewWillAppear;
@end

@implementation MagicalViewController

-(void)viewWillAppear:(BOOL)animated {
   [super viewWillAppear:animated];

   if ([self shouldDoMagicOnViewWillAppear]) {
      //do magic
   }
}

-(BOOL)shouldDoMagicOnViewWillAppear {
    return YES;
}

@end

@interface NotSoMagicalViewController : MagicalViewController
@end

@implementation NotSoMagicalViewController

-(BOOL)shouldDoMagicOnViewWillAppear {
    return NO;
}

@end 
```

# javascript - Asp链接按钮的点击事件

> ID：12476579
> 
> 赞同：0
> 
> 时间：2012-09-18T11:58:42.413
> 
> 标签：javascript, asp.net

我在 asp.net 中有 4 个链接按钮。我为所有这些按钮添加了相同的键处理函数（使用添加处理程序）。现在我必须阅读单击了哪个按钮。但我无法检查他们的文本属性，因为文本也在动态变化。我如何阅读单击了哪个按钮。

也欢迎任何不同的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:10:49.913

您必须分配任何一个唯一值来区分`Link-button` 您也可以使用不同的 `link-button`命令参数或 ID`link-button`

并使用

```
void LinkButton_Click(Object sender, EventArgs e) 
      {
       var senderss = (LinkButton)sender;
       var uniqueid = senderss.ID.ToString();
       var CommandArgs= senderss.CommandArgument.ToString();
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:10:26.933

您可以尝试使用此代码 - 基于发件人参数

```
void LinkButton_Click(Object sender, EventArgs e) 
{
      var control =(LinkButton) sender;
      var id = control.Id;
      System.Console.Write(id);

} 
```

# optimization - JPA：EclipseLink 批量写入未按预期工作

> ID：12476585
> 
> 赞同：0
> 
> 时间：2012-09-18T11:59:01.660
> 
> 标签：optimization, jpa, eclipselink, batch-processing

我正在尝试实现批量写入以提高特定代码的性能。现在我已经编写了测试用例，看看当我打开 eclipse 链接中的批处理写入时会发生什么。从日志看来，正在为每个插入语句创建批处理，这不是我所期望的。下面是测试用例

```
@Test
    public void test_batchCreateRouters(){
        List<RouterDTO> routerDTOList = new ArrayList<RouterDTO>();
        IRouterService iRouterService = (IRouterService) ctx.getBean("routerService");
        build_DTO("Test8",routerDTOList);
        build_DTO("Test2",routerDTOList);
        build_DTO("Test3",routerDTOList);
        build_DTO("Test4",routerDTOList);
        build_DTO("Test5",routerDTOList);
        build_DTO("Test6",routerDTOList);
        build_DTO("Test7",routerDTOList);
        for(RouterDTO routerDTO:routerDTOList) {
            iRouterService.createRouter(routerDTO);
        }
    } 
```

build_DTO 只是填充 DTO 并将其添加到列表 createRouter 将进行一些验证并执行以下代码：

```
try {
    getJpaTemplate().persist(entity);    
    } catch (RuntimeException re) {
throw re;}. 
```

但是当我检查日志时，我得到如下所示，它表明对于每个插入，都会创建新批次。有人对此有任何想法，或者可以将我带到正确的地方。

> [EL Finest]: 2012-09-18 11:55:56.218--ServerSession(598639019)--Connection(1572163248)--Thread(Thread[main,5,main])--从连接池获取的连接[默认] . [EL Finer]: 2012-09-18 11:55:56.218--ClientSession(1274943796)--Connection(1572163248)--Thread(Thread[main,5,main])--开始交易 [EL Finer]: 2012 -09-18 11:55:56.219--ClientSession(1274943796)--Connection(1572163248)--Thread(Thread[main,5,main])--开始批处理语句[EL Fine]: 2012-09-18 11 :55:56.22--ClientSession(1274943796)--Connection(1572163248)--Thread(Thread[main,5,main])--INSERT INTO ROUTER_QUANTITY (ROUTER_QUANTITY_ID, ROUTER_PERIOD_ID, COMMENTS, CONTRACT_ID, COUNTER_PARTY, CREATED_BY, CREATED_ON, FACILITY , LAST_UPDATED_BY, LAST_UPDATED_ON, MODIFIED, QUANTITY, QUANTITY_TEMPLATE_ID, SERVICE_ID, SOURCE, STATUS) 值 (?, ?, ?, 5--ServerSession(598639019)--Connection(1572163248)--Thread(Thread[main,5,main])--连接释放到连接池[默认]。[EL Finer]: 2012-09-18 11:55:56.5--UnitOfWork(233788733)--Thread(Thread[main,5,main])--结束工作单元提交 [EL Finer]: 2012-09- 18 11:55:56.5--UnitOfWork(233788733)--Thread(Thread[main,5,main])--恢复工作单元[EL Finer]: 2012-09-18 11:55:56.501--UnitOfWork( 233788733)--Thread(Thread[main,5,main])--发布工作单元[EL Finer]: 2012-09-18 11:55:56.501--ClientSession(1274943796)--Thread(Thread[main, 5,main])--客户端发布[EL Finer]: 2012-09-18 11:55:56.502--ServerSession(598639019)--Thread(Thread[main,5,main])--客户端获取：1625102195 [ EL Finer]: 2012-09-18 11:55:56.502--ClientSession(1625102195)--Thread(Thread[main,5,main])--获取工作单元：1395568819 [EL Finest]：2012-09-18 11:55:56.563--UnitOfWork(1395568819)--Thread(Thread[main,5,main])--persist() 操作调用：fm.am.integration。 dao.jpa.allocationquantity.AllocationQuantity@23597cac。[EL Finer]：2012-09-18 11:55:56.563--UnitOfWork(1395568819)--Thread(Thread[main,5,main])--开始工作单元刷新 [EL Finest]：2012-09- 18 11:55:56.564--UnitOfWork(1395568819)--Thread(Thread[main,5,main])--执行查询InsertObjectQuery(fm.am.integration.dao.jpa.allocationquantity.AllocationQuantity@23597cac) [EL Finest ]: 2012-09-18 11:55:56.564--ServerSession(598639019)--Connection(1572163248)--Thread(Thread[main,5,main])--从连接池获取的连接[默认]。[EL Finer]：2012-09-18 11:55:56.568--ClientSession(1625102195)--Connection(1572163248)--Thread(Thread[main,5,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:31:46.303

从日志中每个看起来您都在使用新事务来持久化每个对象，因此每个对象都插入到单独的事务中，并且是单独的批次。

您需要首先开始一个事务并持久化事务中的所有对象。

您还通过执行查询审核导致刷新，因此请避免这种情况，确保您不在插入之间进行查询，或者将 EntityManager 上的 flushMode 设置为 COMMIT。

# java - 如何在 vaadin 中使用 invient 图表创建一个简单的饼图？

> ID：12476587
> 
> 赞同：0
> 
> 时间：2012-09-18T11:59:03.973
> 
> 标签：java, vaadin

在过去的三个小时里，我一直在尝试使用 vaadin 中的 invient-charts 插件创建一个简单的饼图。我已经阅读了很多关于它的内容，并将 jquery.js 和 highcharts.js 放入 webcontent 文件中。我修改了我的 xml 文件以引用我的应用程序 servlet。但它仍然不起作用。我想我也做错了这些事情。它现在让我发疯。有人可以为我提供有关创建饼图或任何其他图表示例的简单教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:00:36.750

因为您没有提供太多信息，所以我在这里发布了我采取的步骤...

首先，我将 jquery 和 highcharts javascript 文件添加到 webapp/js 文件夹中

现在，编辑您的应用程序 servlet（扩展 AbstractApplicationServlet 的那个）...有一种方法**`writeAjaxPageHtmlHeader`**，您必须为上述两个 js 文件添加 url。就是在这里：[https ://vaadin.com/forum/-/message_boards/view_message/254632#_19_message_254632](https://vaadin.com/forum/-/message_boards/view_message/254632#_19_message_254632)

我在我的项目中使用 maven，所以，添加依赖项（如果您不使用 maven，请将 jars 添加到 WEB-INF/lib 文件夹中）

后来，我用 gwt:clean、vaadin:update-widgetset 和 gwt-compile maven 插件重新编译了应用程序小部件集（如果不使用 maven，我认为命令是 Ctrl+6）

最后，将图表添加到组件中的代码可以是这样的：

```
package com.x.y.z;

import java.util.LinkedHashSet;
import java.util.Map;
import com.invient.vaadin.charts.InvientChartsConfig;
import com.x.y.Manager;
import com.x.y.util.ApplicationHelper;

public class SalesChat extends AbstractChart {

    private static final long serialVersionUID = -793793426045107314L;

    public SalesChat(InvientChartsConfig chartConfig) {
        super(chartConfig);
    }

    @Override
    public void build() {

        Manager manager = (Manager)ApplicationHelper.getApplicationContext().getBean("manager");
        Map<String, Integer> sales = manager.weeklySales();

        XYSeries series = new XYSeries("Sales");
        LinkedHashSet<DecimalPoint> points = new LinkedHashSet<DecimalPoint>();

        for( String string : sales.keySet() ){

            DecimalPoint point = new DecimalPoint(series, string, sales.get(string));
            point.setName( string + " " + sales.get(string).toString());
            points.add( point );
        }

        series.setSeriesPoints(points);
        addSeries(series);
        setWidth("279px");
        setHeight("240px");

    }
} 
```

之后...

```
InvientChartsConfig chartConfig = new InvientChartsConfig();
chartConfig.getTitle().setText("Sales");
chartConfig.getGeneralChartConfig().setType(SeriesType.PIE);

SalesChat chart = new SalesChat(chartConfig);
chart.build();

VerticalLayout layout = new VerticalLayout();
layout.addComponent(chart); 
```

# java - 如何在 Java 程序使用的命令提示符中使用变量？

> ID：12476589
> 
> 赞同：1
> 
> 时间：2012-09-18T11:59:04.357
> 
> 标签：java, pdf, command-line

我有这个程序。

```
try {
            Runtime rt = Runtime.getRuntime();
            //Process pr = rt.exec("cmd /c dir");
            Process pr = rt.exec("java -jar C:/sample/sample.jar D:/pdftest.pdf");
            BufferedReader input1 = new BufferedReader(new InputStreamReader(pr.getInputStream()));

            String line=null;

            while((line=input1.readLine()) != null) {
                System.out.println(line);
            }               

            int exitVal = pr.waitFor();
            System.out.println("Exited with error code "+exitVal);

        } catch(Exception e) {
            System.out.println(e.toString());
            e.printStackTrace();
        } 
```

在这里， process pr 定义了一个命令。现在我的问题是，我想将“D:/pdftest.pdf”部分替换为类似的变量

```
String pdfvariable="D:/pdftest.pdf"; 
```

所以我应该能够将“D:/pdftest.pdf”的硬编码值替换为 pdfvariable。可能吗？谁能给我解释一下？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:01:17.230

```
String pdfvariable = "D:/pdftest.pdf";
Process pr = rt.exec("java -jar C:/sample/sample.jar " + pdfVariable); 
```

# c# - 为什么可以为空 可以为空？为什么不能复制？

> ID：12476590
> 
> 赞同：6
> 
> 时间：2012-09-18T11:59:06.413
> 
> 标签：c#, nullable

当我写

`Nullable<Nullable<DateTime>> test = null;`

我得到一个编译错误：

`The type 'System.Datetime?' must be a non-nullable value type in order to use it as a paramreter 'T' in the generic type or method 'System.Nullable<T>'`

But `Nullable<T>`is a`struct`所以它应该是不可为空的。

所以我试图创建这个`struct`：

```
public struct Foo<T> where T : struct
{
    private T value;

    public Foo(T value)
    {
        this.value = value;
    }

    public static explicit operator Foo<T>(T? value)
    {
        return new Foo<T>(value.Value);
    }

    public static implicit operator T?(Foo<T> value)
    {
        return new Nullable<T>(value.value);
    }
} 
```

现在当我写

```
 Nullable<Foo<DateTime>> test1 = null;
        Foo<Nullable<DateTime>> test2 = null;
        Foo<DateTime> test3 = null; 
```

第一行没问题，但对于第二行和第三行，我得到以下两个编译错误：

`The type 'System.DateTime?' must be a non-nullable value type in order to use it as a parameter 'T' in the generic type or method 'MyProject.Foo<T>'`（仅第二行）

和

`Cannot convert null to 'MyProject.Foo<System.DateTime?> because it is a non-nullable value type'`

```
 Foo<Nullable<DateTime>> test = new Foo<DateTime?>(); 
```

如果`Nullable<DateTime>`是`struct`.

从概念上讲，我可以理解为什么可以`Nullable<T>`为空，它避免了像`DateTime??????????`但是我仍然可以拥有的东西`List<List<List<List<List<DateTime>>>>>`......

那么为什么会有这种限制，为什么我不能在 中重现这种行为`Foo<T>`呢？这个限制是由编译器强制执行的还是`Nullable<T>`代码中固有的？

我读[了这个问题](https://stackoverflow.com/questions/7597218/why-cant-i-write-nullablenullableint)，但它只是说不可能，没有一个答案从根本上说明为什么不可能。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T12:05:11.260

> 但是 Nullable 是一个结构，所以它应该是不可为空的。

`Nullable<T>`确实是一个结构，但[文档](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)`struct`中所述的通用约束的确切含义是：

> 类型参数必须是值类型。[`Nullable`](http://msdn.microsoft.com/en-us/library/system.nullable.aspx)可以指定除此之外的任何值类型。有关更多信息，请参阅[使用 Nullable 类型（C# 编程指南）](http://msdn.microsoft.com/en-us/library/2cf62fcy.aspx)。

出于同样的原因，您的线路

```
Foo<Nullable<DateTime>> test2 = null; 
```

导致您看到的编译器错误，因为您的泛型`struct`约束`T`以某种方式限制您的泛型参数，因此`Nullable<DateTime>`不得将其指定为实际参数。

这样做的理由可能是拨打电话，例如

```
Nullable<Nullable<DateTime>> test = null; 
```

不那么模棱两可：这是否意味着您要设置`test.HasValue`为`false`，或者您实际上是否要设置`test.HasValue`为`true`和？由于对不可为空类型参数的给定限制，不会发生这种混淆。`test.Value.HasValue``false`

最后，`null`分配工作是`Nullable<T>`因为 - 正如所选答案及其对[这个 SO 问题](https://stackoverflow.com/questions/10867088/how-clr-can-bypass-throwing-error-when-assigning-a-null-value-to-the-struct)和[这个 SO 问题](https://stackoverflow.com/questions/2865604/where-in-memory-are-nullable-types-stored)的评论所暗示的那样- 该`Nullable<T>`类型受到一些编译器魔法的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:04:58.763

错误是说 Nullable 的类型参数应该是不可为空的。

您正在做的是创建一个 Nullable 类型，该类型具有可为空的类型参数，这是不允许的：

```
Nullable<Nullable<DateTime>> 
```

是相同的

```
Nullable<DateTime?> 
```

这是毫无意义的。为什么要为已经可以为空的类型设置一个可以为空的类型？

Nullable 只是 .NET 2.0 中引入的一种类型，因此您可以使用“可空值类型”。例如，如果您有一个方法，它的日期时间参数是可选的；如果您不想使用该参数，则现在可以将 null 传递给该方法，而不是传递像 DateTime.MinValue 这样的“神奇值”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T13:50:59.800

在泛型类`where T: struct`中意味着类型`T`不能为空。然而，可空类型旨在为结构添加可空性。从技术上讲，它们是结构，但它们的行为就像它们可能包含空值一样。由于这种歧义，约束不允许使用可空值`where T: struct`- 请参阅[类型参数的约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

可空类型不仅仅是具有特殊 C# 编译器支持的通用结构。CLR 本身支持可空类型（请参阅 Jeffrey Richter 通过 C# 编写的 CLR），并且看起来这种特殊的 CLR 支持使它们成为非递归的。

*   CLR 支持特殊的装箱/拆箱规则`int? i = 1; object o = i`将`int`值放入变量`o`而不是`Nullable<int>`值。如果有多个可空值 - 应该`o = (int??)1;`包含`int`还是`int?`值？
*   CLR 对调用 GetType 和接口成员有特殊的支持——它调用底层类型的方法。这实际上会导致 Nullable.GetType() 在具有 NullValueFlag 时抛出 NullObjectReference 异常的情况。

至于 C#，C# 中有很多特性是为可空类型硬编码的。根据这篇文章[Nullable Types (C# Programming Guide)](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.80%29.aspx)，引入可为 null 类型的主要目标是为不支持 null 的类型添加 null 支持。从逻辑上讲，从 DateTime? 已经支持空值，它不应该被允许“更多”为空。

该文件还明确指出

> 不允许嵌套可为空的类型。以下行将无法编译：`Nullable<Nullable<int>> n;`

可空类型的特殊 C# 功能：

*   C#有什么特殊的？？操作员。应该`(int???)null ?? (int)1`下决心`(int??)1`还是`(int)1`重视？
*   Nullables 具有特殊的`System.Nullable.GetValueOrDefault`属性。它应该为嵌套的空值返回什么？
*   `? == null`和操作员的特殊处理`? != null`。如果`Nullable<Nullable<T>>`包含`Nullable<T>`值，但该值为 null，则 HasValue 属性应返回什么？与null比较的结果应该是什么？
*   特殊的隐式转换。应该`int?? i = 10`是隐式可转换的吗？
*   显式转换。应该`int i = (int??)10;`支持吗？
*   对 bool 的特殊支持？type[使用可为空的类型](http://msdn.microsoft.com/en-us/library/2cf62fcy.aspx)。例如`(bool?)null | (bool?)true == true`。

那么，CLR 是否应该支持递归 GetType() 调用？装箱值时是否应该删除 Nullable 包装器？如果它应该适用于一个级别的值，为什么不适用于所有其他级别呢？需要考虑的选项太多，递归处理太多。

最简单的解决方案是使`Nullable<Nullable<T>>`不可编译。

# ruby-on-rails - 设计中的 current_user 仅显示两个字段身份验证令牌和电子邮件

> ID：12476593
> 
> 赞同：0
> 
> 时间：2012-09-18T11:59:12.010
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

> @user = 当前用户

使用渲染 json:@user 时，它显示

```
{"user":{"authentication_token":"xxxxxxxxxxxxxxxxx","email":"sample@example.com"}} 
```

但我想要

```
{"user":{"authentication_token":"xxxxxxxxxxxxxxxxx","email":"sample@example.com","country":"india"}} 
```

我怎样才能做到这一点？

# php - 如何确认在sqlite数据库中插入的数据或不在php中

> ID：12476598
> 
> 赞同：0
> 
> 时间：2012-09-18T11:59:19.070
> 
> 标签：php, sqlite

我是 php 新手。我正在尝试在 sqlite 数据库中插入数据，我的代码是

```
 $query= $dbh->prepare("INSERT INTO favorite_apps(version, apppkgname, appname, appdescriptive, appClass, applink, place) VALUES (?,?,?,?,?,?,?)");
            $query->bindParam(1,$Version);
            $query->bindParam(2,$Package);
            $query->bindParam(3,$AppName);
            $query->bindParam(4,$AppDescription);
            $query->bindParam(5,$ClassName);
            $query->bindParam(6,$AppLink);
            $query->bindParam(7,$Place);
            $res = $query->execute(); 
```

但我在 $res 中得到空值，所以如何确认数据是否插入到 sqlite 数据库中

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:02:34.373

PDO的execute方法要么返回true，要么返回false，所以你的php代码肯定有问题...尝试使用`$query->debugDumpParams();`输出准备好的查询并测试它。

# java - 处理多部分/表单数据请求失败。读取超时

> ID：12476604
> 
> 赞同：23
> 
> 时间：2012-09-18T11:59:44.070
> 
> 标签：java, tomcat, upload, applet

Stack Overflow 上的其他问题已经解决了这个问题，但所提供的答案都没有帮助我解决这个问题。

我正在尝试使用 Apache HTTP Commons 从小程序上传 10 kB 到 16 MB 之间的任何文件。在我当地的环境中一切正常。

我仅在我的生产服务器（Tomcat 6.0，[https://www.dailyrazor.com/](https://www.dailyrazor.com/)）上收到以下异常，无论文件大小如何：

```
org.apache.commons.fileupload.FileUploadException: Processing of multipart/form-data request failed. Read timed out
    at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:384)
    at org.apache.commons.fileupload.servlet.ServletFileUpload.parseRequest(ServletFileUpload.java:116)
    at com.actura.helper.UploadHelper.processUpload(UploadHelper.java:92)
    at com.actura.voice.upload.FileUploadServlet.process(FileUploadServlet.java:85)
    at com.actura.voice.upload.FileUploadServlet.doPost(FileUploadServlet.java:75)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:769)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:698)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:891)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Thread.java:662) 
```

这是Commons IO的调试日志：

```
2012-Sep-18 11:26:28,446 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItemFactory 
  DEBUG inside MonitoredDiskFileItemFactory constructor (listener) 
2012-Sep-18 11:26:28,794 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItemFactory 
  DEBUG inside MonitoredDiskFileItemFactory createItem 
2012-Sep-18 11:26:28,800 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside MonitoredDiskFileItem constructor 
2012-Sep-18 11:26:28,800 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside getOutputStream() 
2012-Sep-18 11:26:28,802 [TP-Processor5] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG inside MonitoredOutputStream constructor 
2012-Sep-18 11:26:28,803 [TP-Processor5] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG leaving MonitoredOutputStream contructor 
2012-Sep-18 11:26:28,803 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG leaving getOutputStream() 
2012-Sep-18 11:26:28,803 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItemFactory 
  DEBUG inside MonitoredDiskFileItemFactory createItem 
2012-Sep-18 11:26:28,803 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside MonitoredDiskFileItem constructor 
2012-Sep-18 11:26:28,803 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside getOutputStream() 
2012-Sep-18 11:26:28,803 [TP-Processor5] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG inside MonitoredOutputStream constructor 
2012-Sep-18 11:26:28,803 [TP-Processor5] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG leaving MonitoredOutputStream contructor 
2012-Sep-18 11:26:28,803 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG leaving getOutputStream() 
2012-Sep-18 11:26:28,803 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItemFactory 
  DEBUG inside MonitoredDiskFileItemFactory createItem 
2012-Sep-18 11:26:28,803 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside MonitoredDiskFileItem constructor 
2012-Sep-18 11:26:28,803 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside getOutputStream() 
2012-Sep-18 11:26:28,803 [TP-Processor5] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG inside MonitoredOutputStream constructor 
2012-Sep-18 11:26:28,803 [TP-Processor5] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG leaving MonitoredOutputStream contructor 
2012-Sep-18 11:26:28,804 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG leaving getOutputStream() 
2012-Sep-18 11:26:28,804 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItemFactory 
  DEBUG inside MonitoredDiskFileItemFactory createItem 
2012-Sep-18 11:26:28,804 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside MonitoredDiskFileItem constructor 
2012-Sep-18 11:26:28,804 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside getOutputStream() 
2012-Sep-18 11:26:28,804 [TP-Processor5] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG inside MonitoredOutputStream constructor 
2012-Sep-18 11:26:28,804 [TP-Processor5] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG leaving MonitoredOutputStream contructor 
2012-Sep-18 11:26:28,804 [TP-Processor5] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG leaving getOutputStream() 
 processing folder... /home/dixieh83/public_html/ActuraVoiceRecorderDemo/temp
2012-Sep-18 11:27:47,062 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItemFactory 
  DEBUG inside MonitoredDiskFileItemFactory constructor (listener) 
2012-Sep-18 11:27:47,461 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItemFactory 
  DEBUG inside MonitoredDiskFileItemFactory createItem 
2012-Sep-18 11:27:47,461 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside MonitoredDiskFileItem constructor 
2012-Sep-18 11:27:47,462 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside getOutputStream() 
2012-Sep-18 11:27:47,462 [TP-Processor4] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG inside MonitoredOutputStream constructor 
2012-Sep-18 11:27:47,462 [TP-Processor4] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG leaving MonitoredOutputStream contructor 
2012-Sep-18 11:27:47,462 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG leaving getOutputStream() 
2012-Sep-18 11:27:47,462 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItemFactory 
  DEBUG inside MonitoredDiskFileItemFactory createItem 
2012-Sep-18 11:27:47,462 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside MonitoredDiskFileItem constructor 
2012-Sep-18 11:27:47,462 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside getOutputStream() 
2012-Sep-18 11:27:47,462 [TP-Processor4] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG inside MonitoredOutputStream constructor 
2012-Sep-18 11:27:47,462 [TP-Processor4] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG leaving MonitoredOutputStream contructor 
2012-Sep-18 11:27:47,462 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG leaving getOutputStream() 
2012-Sep-18 11:27:47,463 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItemFactory 
  DEBUG inside MonitoredDiskFileItemFactory createItem 
2012-Sep-18 11:27:47,463 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside MonitoredDiskFileItem constructor 
2012-Sep-18 11:27:47,463 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside getOutputStream() 
2012-Sep-18 11:27:47,463 [TP-Processor4] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG inside MonitoredOutputStream constructor 
2012-Sep-18 11:27:47,463 [TP-Processor4] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG leaving MonitoredOutputStream contructor 
2012-Sep-18 11:27:47,463 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG leaving getOutputStream() 
2012-Sep-18 11:27:47,463 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItemFactory 
  DEBUG inside MonitoredDiskFileItemFactory createItem 
2012-Sep-18 11:27:47,463 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside MonitoredDiskFileItem constructor 
2012-Sep-18 11:27:47,463 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG inside getOutputStream() 
2012-Sep-18 11:27:47,463 [TP-Processor4] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG inside MonitoredOutputStream constructor 
2012-Sep-18 11:27:47,463 [TP-Processor4] com.actura.voice.upload.MonitoredOutputStream 
  DEBUG leaving MonitoredOutputStream contructor 
2012-Sep-18 11:27:47,463 [TP-Processor4] com.actura.voice.upload.MonitoredDiskFileItem 
  DEBUG leaving getOutputStream() 
```

除了这个上传问题，我的小程序工作正常。

这是我的生产服务器`server.xml`文件中描述的服务器配置：

```
<!-- Define an AJP 1.3 Connector on port 8009 --> <Connector address="127.0.0.1" port="9609" enableLookups="false" protocol="AJP/1.3" connectionTimeout="30000" maxThreads="50" minSpareThreads="1" maxSpareThreads="3" disableUploadTimeout="true" /> 
```

我的互联网连接速度很好（下降 2.01 Mbps，上升 0.42 Mbps），所以这个例外让我感到困惑。我已经设置`connectionTimeOut`为 3000000，但我仍然有异常。我应该设置`connectionTimeOut`为 -1 以使其无限制吗？

文件权限设置为`777`我从中上传的目录，并且我使用 JDK 版本 7 在浏览器中运行小程序。

Java 控制台输出：

```
Java Plug-in 10.7.2.10
Using JRE version 1.7.0_07-b10 Java HotSpot(TM) Client VM 
```

当上传失败时，我在控制台中得到这个：

```
java.net.SocketException: Connection reset by peer: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(Unknown Source)
    at java.net.SocketOutputStream.write(Unknown Source)
    at org.apache.http.impl.io.AbstractSessionOutputBuffer.write(AbstractSessionOutputBuffer.java:169)
    at org.apache.http.impl.io.ContentLengthOutputStream.write(ContentLengthOutputStream.java:119)
    at org.apache.http.entity.mime.content.InputStreamBody.writeTo(InputStreamBody.java:70)
    at org.apache.http.entity.mime.HttpMultipart.doWriteTo(HttpMultipart.java:206)
    at org.apache.http.entity.mime.HttpMultipart.writeTo(HttpMultipart.java:224)
    at org.apache.http.entity.mime.MultipartEntity.writeTo(MultipartEntity.java:183)
    at org.apache.http.entity.HttpEntityWrapper.writeTo(HttpEntityWrapper.java:98)
    at org.apache.http.impl.client.EntityEnclosingRequestWrapper$EntityWrapper.writeTo(EntityEnclosingRequestWrapper.java:108)
    at org.apache.http.impl.entity.EntitySerializer.serialize(EntitySerializer.java:122)
    at org.apache.http.impl.AbstractHttpClientConnection.sendRequestEntity(AbstractHttpClientConnection.java:271)
    at org.apache.http.impl.conn.ManagedClientConnectionImpl.sendRequestEntity(ManagedClientConnectionImpl.java:197)
    at org.apache.http.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:257)
    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)
    at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:712)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:517)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:1066)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:1044)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:1035)
    at com.actura.app.util.ApplicationUtil.uploadUsingApache(ApplicationUtil.java:143)
    at com.actura.app.util.ApplicationUtil.saveWaveToServer(ApplicationUtil.java:90)
    at com.actura.app.capture.RecorderUI.saveButtonActionPerformed(RecorderUI.java:1856)
    at com.actura.app.capture.RecorderUI.access$17(RecorderUI.java:1824)
    at com.actura.app.capture.RecorderUI$7.actionPerformed(RecorderUI.java:1325)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

**我知道这可能是我的 ISP 的问题。我只是想知道是不是iSP的问题，为什么我可以流畅地使用像temviewer和Skype这样的软件？？**

以下是执行上传的代码：

```
public static String uploadUsingApache(URL url, List<File> list,
            String userId, String accountId, String waveDuration)
            throws Exception {

        // The execution:
        DefaultHttpClient httpclient = new DefaultHttpClient();

        HttpPost method = new HttpPost(url.toString());

        MultipartEntity entity = new MultipartEntity();
        entity.addPart("userId", new StringBody(userId, Charset
                .forName("UTF-8")));
        entity.addPart(IVR_ACCOUNT_KEY, new StringBody(accountId, Charset
                .forName("UTF-8")));
        entity.addPart(IVR_MP3LEN_KEY, new StringBody(waveDuration, Charset
                .forName("UTF-8")));

        // FileBody fileBody = new FileBody(list.get(0));
        // entity.addPart("file", fileBody);

        for (File f : list) {

            byte[] imageBytes = fileToByteArray(f);
            entity.addPart("attachment_field", new InputStreamKnownSizeBody(
                    new ByteArrayInputStream(imageBytes), imageBytes.length,
                    "audio/wav", f.getName()));
            method.setEntity(entity);
        }

        ResponseHandler<String> responseHandler = new BasicResponseHandler();

        // HttpResponse response = httpclient.execute(method,responseHandler);
        String responseText = httpclient.execute(method, responseHandler);

        // error text
        if (responseText.contains("<exception>")) {
            responseText = responseText.replace("<exception>", "");
            responseText = responseText.replace("</exception>", "");
            throw new Exception(responseText);
        }

        // System.out.println(" Status " +response.getStatusLine());
        List<String> deleteList = Arrays.asList(responseText.split(","));

        StringBuffer sb = new StringBuffer();
        int cnt = 1;
        for (File f : list) {
            if (deleteList.contains(f.getName())) {
                sb.append(f.getName() + (cnt == deleteList.size() ? "" : ", "));
                f.delete();
                cnt++;
            }

        }

        if (deleteList.size() > 1) {
            sb.append(" are ");
        } else if (deleteList.size() == 1) {
            sb.append(" is ");
        } else {

        }

        sb.append(" successfully saved.");

        return sb.toString();
    } 
```

当我按下小程序 GUI 上的上传按钮时，它会调用上述方法，同时 GUI 会冻结。10 到 50 秒后，服务器抛出`FileUploadException`. servlet 将异常通知小程序，但小程序在通知用户异常之前挂起四五分钟。

如果服务器端出现问题，为什么会有这么多延迟？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-08-31T02:28:14.537

这对我帮助很大：http: [//blog.somepixels.net/en/502-proxy-error-uploading-from-apache-mod_proxy-to-tomcat-7/](http://blog.somepixels.net/en/502-proxy-error-uploading-from-apache-mod_proxy-to-tomcat-7/)

基本上在我的 server.xml 中，我将其设置为：

```
<Connector port="8080" protocol="HTTP/1.1" URIEncoding="UTF-8"
       connectionUploadTimeout="36000000" disableUploadTimeout="false"
       connectionTimeout="60000" redirectPort="8443" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T12:13:53.983

从问题中不清楚您正在运行什么配置（或您已经尝试过什么），但问题几乎是根据定义，在上传期间超过了套接字超时。

抛出错误是因为在达到相关超时之前未完全接收文件。这与测试中的工作（在本地网络上）一致，但在运行速度较慢的互联网时（尤其是在上传速度方面）则不然。

看看你`server.xml`的相关`<Connector>`定义。您将对`connectionTimeout`or属性的值感兴趣（如果设置为 true `connectionUploadTimeout`，则后者）。`disableUploadTimeout`

在没有更严重问题的证据的情况下，我希望您可以通过增加连接超时来解决此问题。

# iphone - NSString 编码问题

> ID：12476605
> 
> 赞同：0
> 
> 时间：2012-09-18T11:59:44.283
> 
> 标签：iphone, xml, nsstring, nslog, nsstringencoding

我有 xml 字符串。是错误的字符串。但是在使用 NSLog 并从控制台处理它之后，它变成了很好的字符串（我从服务器得到了很好的响应）。我通过这种方式构建了错误的字符串：

```
NSString *soapMessage = [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"UTF-8\"?><env:Envelope xmlns:env=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:enc=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:ns0=\"http://com.test/types/AstoriaObjectProperties\" xmlns:ns1=\"http://com.test/wsdl/AstoriaObjectProperties\" xmlns:ns2=\"http://java.sun.com/jax-rpc-ri/internal\"><env:Body><ns1:setObjectProperties env:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\"><HashMap_1 xsi:type=\"ns2:hashMap\" enc:arrayType=\"ns2:mapEntry[2]\"><item xsi:type=\"ns2:mapEntry\"><key xsi:type=\"xsd:string\">id</key><value xsi:type=\"xsd:string\">%@</value></item><item xsi:type=\"ns2:mapEntry\"><key xsi:type=\"xsd:string\">annotations</key><value href=\"#ID1\"/></item></HashMap_1><HashMap_2 xsi:type=\"ns2:hashMap\" enc:arrayType=\"ns2:mapEntry[2]\"><item xsi:type=\"ns2:mapEntry\"><key xsi:type=\"xsd:string\">id</key><value xsi:type=\"xsd:string\">%@</value></item><item xsi:type=\"ns2:mapEntry\"><key xsi:type=\"xsd:string\">annotations</key><value href=\"#ID2\"/></item></HashMap_2></ns1:setObjectProperties>%@%@</env:Body></env:Envelope>", fileID, fileID, arrayNewXML, arrayOldXML]; 
```

当我将此消息发送到服务器时，我收到了一个错误响应。

但后来我使用 NSLog 查看soapMessage，我复制它，并使用缓冲区中的soap 消息。它看起来像这样。

```
<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns0="http://com.test/types/AstoriaObjectProperties" xmlns:ns1="http://com.test/wsdl/AstoriaObjectProperties" xmlns:ns2="http://java.sun.com/jax-rpc-ri/internal"><env:Body><ns1:setObjectProperties env:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><HashMap_1 xsi:type="ns2:hashMap" enc:arrayType="ns2:mapEntry[2]"><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">id</key><value xsi:type="xsd:string">0000001aWGA2070GYZ</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">annotations</key><value href="#ID1"/></item></HashMap_1><HashMap_2 xsi:type="ns2:hashMap" enc:arrayType="ns2:mapEntry[2]"><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">id</key><value xsi:type="xsd:string">0000001aWGA2070GYZ</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">annotations</key><value href="#ID2"/></item></HashMap_2></ns1:setObjectProperties><ns0:ArrayOfhashMap id="ID1" env:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="enc:Array" enc:arrayType="ns2:hashMap[1]"><item xsi:type="ns2:hashMap" enc:arrayType="ns2:mapEntry[7]"><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationUser$$$</key><value xsi:type="xsd:string">AstoriaAdmin</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Status</key><value xsi:type="xsd:string">waiting for decision</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationID$$$</key><value xsi:type="xsd:string">00000043X951EE3073607F44F7D00000000000000951FF3076D000000590000003C647C7668696D696B2D6163733A433A5C50726F6772616D2046696C65735C4173746F72696120536F6674776172655C434D535C64617461626173655C63616231303030302E64627C31347C367C3263307C31303030303E00704B585000000000YZ</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Comment</key><value xsi:type="xsd:string">comment</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationDate$$$</key><value xsi:type="enc:dateTime">2012-09-18T10:22:40.000Z</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Status Comment</key><value xsi:type="xsd:string">status comment</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationName$$$</key><value xsi:type="xsd:string">Legal Review</value></item></item></ns0:ArrayOfhashMap><ns0:ArrayOfhashMap id="ID2" env:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="enc:Array" enc:arrayType="ns2:hashMap[1]"><item xsi:type="ns2:hashMap" enc:arrayType="ns2:mapEntry[7]"><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationUser$$$</key><value xsi:type="xsd:string">AstoriaAdmin</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Status</key><value xsi:type="xsd:string">waiting for decision</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationID$$$</key><value xsi:type="xsd:string">00000043X951EE3073607F44F7D00000000000000951FF3076D000000590000003C647C7668696D696B2D6163733A433A5C50726F6772616D2046696C65735C4173746F72696120536F6674776172655C434D535C64617461626173655C63616231303030302E64627C31347C367C3263307C31303030303E00704B585000000000YZ</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Comment</key><value xsi:type="xsd:string">comment</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationDate$$$</key><value xsi:type="enc:dateTime">2012-09-18T10:22:40.000Z</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Status Comment</key><value xsi:type="xsd:string">status comment</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationName$$$</key><value xsi:type="xsd:string">Legal Review</value></item></item></ns0:ArrayOfhashMap></env:Body></env:Envelope> 
```

之后我得到了没有错误的响应。

我似乎认为 NSLog 解决了一些编码问题。但是如何在我的soapMessage中解决这个问题？我试过：

```
soapMessage = [soapMessage stringByReplacingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
soapMessage = [soapMessage stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
soapMessage = [soapMessage stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

那没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:09:03.377

我只是客串编码，并手动删除了一些坏符号：

```
 NSMutableData *soapdata = [[[NSMutableData alloc] initWithData:[soapMessage dataUsingEncoding:NSNonLossyASCIIStringEncoding]] autorelease]; 
   soapMessage = [[[NSString alloc] initWithData:soapdata encoding:NSUTF8StringEncoding] autorelease];
   soapMessage = [soapMessage stringByReplacingOccurrencesOfString:@"\\ufffc" withString:@""];
   soapdata = [[[NSMutableData alloc] initWithData:[soapMessage dataUsingEncoding:NSUTF8StringEncoding]] autorelease]; 
```

现在它起作用了！

# wix - 如何使用 WiX 设置服务的恢复选项？

> ID：12476607
> 
> 赞同：18
> 
> 时间：2012-09-18T11:59:46.613
> 
> 标签：wix, wix3.5, wix3.6

我有以下 .wxs 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<?define ProductVersion="x.x.x.x" ?>
<?define UpgradeCode="{**MYGUID**}" ?>
<?define Manufacturer="My Company" ?>
<?define ProductName="My Product" ?>
<?define SkuName="MyProduct" ?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="*"
             Name="$(var.ProductName)"
             Language="1033"
             Version="$(var.ProductVersion)"
             Manufacturer="$(var.Manufacturer)"
             UpgradeCode="$(var.UpgradeCode)">
        <Package InstallerVersion="301"
                 Compressed="yes"
                 InstallPrivileges="elevated"
                 InstallScope="perMachine"
                 Platform="x86" />
        <Media Id="1"
               Cabinet="$(var.SkuName).cab"
               EmbedCab="yes" />
        <Directory Id="TARGETDIR"
                   Name="SourceDir">
            <Directory Id="ProgramFilesFolder">
                <Directory Id="ManufacturereDirectory"
                           Name="$(var.Manufacturer)">
                    <Directory Id="ProductDirectory"
                               Name="$(var.ProductName)" />
                </Directory>
            </Directory>
        </Directory>
        <ComponentGroup Id="MainComponentGroup">
            <Component Directory="ProductDirectory">
                <File Name="$(var.MyProject.TargetFileName)"
                      Source="$(var.MyProject.TargetPath)"
                      KeyPath="yes"
                      Vital="yes" />
                <ServiceInstall Id="SeviceInstall"
                                Name="$(var.ProductName)"
                                DisplayName="$(var.ProductName)"
                                Type="ownProcess"
                                Interactive="no"
                                Start="auto"
                                Vital="yes"
                                ErrorControl="normal"
                                Account="LOCALSYSTEM">
                </ServiceInstall>
                <ServiceControl Id="ServiceControl_Start"
                                Name="$(var.ProductName)"
                                Start="install"
                                Wait="no" />
                <ServiceControl Id="ServiceControl_Stop"
                                Name="$(var.ProductName)"
                                Stop="both"
                                Remove="uninstall"
                                Wait="yes" />
            </Component>
        </ComponentGroup>
        <Feature Id="MainFeature"
                 Level="1">
            <ComponentGroupRef Id="MainComponentGroup" />
        </Feature>
        <Upgrade Id="$(var.UpgradeCode)">
            <UpgradeVersion Property="UPGRADEFOUND"
                            Minimum="0.0.0.1" IncludeMinimum="yes"
                            Maximum="$(var.ProductVersion)" IncludeMaximum="yes"
                            OnlyDetect="no"
                            IgnoreRemoveFailure="yes"
                            MigrateFeatures="yes"/>
        </Upgrade>
        <CustomAction Id="ServiceRestarter"
                      Directory="ProductDirectory"
                      ExeCommand="&quot;[SystemFolder]sc.exe&quot; failure &quot;$(var.ProductName)&quot; reset= 60 actions= restart/0"
                      Impersonate="no" />
        <InstallExecuteSequence>
            <InstallExecute Before="RemoveExistingProducts" />
            <RemoveExistingProducts Before="InstallFinalize" />
            <Custom Action="ServiceRestarter" After="InstallFinalize"><![CDATA[NOT Installed]]></Custom>
        </InstallExecuteSequence>
    </Product>
</Wix> 
```

在此之前，我尝试过：

```
<CustomAction Id="ServiceRestarter"
              Property="QtExecCmdLine"
              Value='"[SystemFolder]sc.exe" failure "$(var.ProductName)" reset= 60 actions= restart/0' /> 
```

这显然叫`sc.exe`- 但什么也没改变......

在此之前我尝试过：

```
<ServiceInstall Id="SeviceInstall"
                Name="$(var.ProductName)"
                DisplayName="$(var.ProductName)"
                Type="ownProcess"
                Interactive="no"
                Start="auto"
                Vital="yes"
                ErrorControl="normal"
                Account="LOCALSYSTEM">
    <ServiceConfig Id="ServiceConfig"
                   DelayedAutoStart="yes"
                   OnInstall="yes"
                   OnReinstall="yes"
                   OnUninstall="no"
                   FailureActionsWhen="failedToStopOrReturnedError" />
    <ServiceConfigFailureActions Id="ServiceRestarter"
                                 OnInstall="yes"
                                 OnReinstall="yes"
                                 OnUninstall="no"
                                 ResetPeriod="0">
        <Failure Action="restartService" Delay="0" />
        <Failure Action="restartService" Delay="0" />
        <Failure Action="restartService" Delay="0" />
    </ServiceConfigFailureActions>
</ServiceInstall> 
```

这不起作用，因为如果使用 < 5.0 的安装程序，该[`MsiServiceConfigFailureActions`表](http://msdn.microsoft.com/en-us/library/windows/desktop/dd408037%28v=vs.85%29.aspx)将不起作用，即使使用`InstallerVersion="500"`我得到的唯一东西是错误：

> 无法配置服务“我的产品”（我的产品）。这可能是包或您的权限的问题。验证您是否有足够的权限来配置系统服务。

（是的，......我也试过`InstallPrivilges="elevated"`- 但是......真正的问题是`Action="restartService"`根据[这个](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/MSI-5-0-ServiceConfigFailureActions-fails-during-InstallExecuteSequence-td4452709.html)）

所以......使用 a`CustomAction`是要走的路（或不是？）。

我有以下日志输出

> MSI (s) (34:28) [13:56:46:914]: 注意: 1: 1722 2: ServiceRestarter 3: C:\Program Files (x86)\My Company\My Product\ 4: "C:\ Windows\SysWOW64\sc.exe" 失败 "我的产品" 重置 = 60 个操作 = 重新启动/0
> MSI (s) (34:28) [13:56:46:914]: 注意: 1: 2205 2: 3: 错误
> MSI (s) (34:28) [13:56:46:914]: 注意: 1: 2228 2: 3: 错误 4: SELECT `Message`FROM `Error`WHERE `Error`= 1722
> MSI (c) (2C:0C) [13:56: 46:914]：字体已创建。字符集：Req=0，Ret=0，字体：Req=MS Shell Dlg，Ret=MS Shell Dlg
> 
> 错误 1722。此 Windows 安装程序包有问题。作为设置的一部分运行的程序未按预期完成。请联系您的支持人员或软件包供应商。Action ServiceRestarter，位置：C:\Program Files (x86)\My Company\My Product\，命令：“C:\Windows\SysWOW64\sc.exe”失败“我的产品”reset= 60 actions= restart/0
> MSI ( s) (34:28) [13:56:48:849]: 注意: 1: 2205 2: 3: 错误
> MSI (s) (34:28) [13:56:48:849]: 注意: 1: 2228 2：3：错误 4：`Message`从`Error`哪里选择`Error`= 1709
> MSI (s) (34:28) [13:56:48:849]：产品：我的产品 -- 错误 1722。此 Windows 安装程序包有问题。作为设置的一部分运行的程序未按预期完成。请联系您的支持人员或软件包供应商。Action ServiceRestarter，位置：C:\Program Files (x86)\My Company\My Product\，命令：“C:\Windows\SysWOW64\sc.exe”失败“My Product”reset=60 actions=restart/0
> 
> 操作于 13:56:48 结束：ServiceRestarter。返回值 3。
> 操作于 13:56:48 结束：安装。返回值 3。

有人可以帮帮我吗？

**编辑**

我使用了旧的`ServiceConfig`扩展名：

```
<util:ServiceConfig xmlns:util="http://schemas.microsoft.com/wix/UtilExtension"
                    FirstFailureActionType="restart"
                    SecondFailureActionType="restart"
                    ThirdFailureActionType="restart"
                    ResetPeriodInDays="1"
                    RestartServiceDelayInSeconds="20" /> 
```

这给了我以下构建错误：

> 错误 CNDL0200：ServiceInstall 元素包含未处理的扩展元素“util:ServiceConfig”。请确保已提供“ [http://schemas.microsoft.com/wix/UtilExtension ”命名空间中元素的扩展名。](http://schemas.microsoft.com/wix/UtilExtension)

我知道我可以`-ext WixUtilExtension`通过命令行使用来解决此错误 - 但我想使用 Visual Studio 进行构建......那么我该如何调整构建命令？

唯一的机会是添加`WixUtilExtension.dll`对我的项目的引用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-18T12:36:48.767

我可以看到您只尝试了 MSI 5.0 附带的 ServiceConfig 元素。但是，[UtilExtension 中还有另一个 ServiceConfig 元素](http://wix.sourceforge.net/manual-wix3/util_xsd_serviceconfig.htm)，它已经存在了很长时间，[您在问题中提到的线程似乎证实](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/MSI-5-0-ServiceConfigFailureActions-fails-during-InstallExecuteSequence-tp4452709p4474745.html)了它的工作原理。

[util:ServiceConfig](http://wix.sourceforge.net/manual-wix3/util_xsd_serviceconfig.htm)元素包含 3 个您想使用的参数：和，`FirstFailureActionType`它们都接受相同的值枚举- 、和。`SecondFailureActionType``ThirdFailureActionType``none``reboot``restart``runCommand`

尝试一下，如果它有效，它是比自定义操作更好的选择。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-21T13:44:52.130

对于使用 VS2015 构建的 WIX V 4.0，以下工作：

1：确保WIX项目引用了WixUtilExtension.dll程序集。

2：将[http://wixtoolset.org/schemas/v4/wxs/util](http://wixtoolset.org/schemas/v4/wxs/util) ns 添加到根 Wix 元素。请注意，这是 WIX 4.0 的正确 NS（不像以前的版本那样[http://schemas.microsoft.com/wix/UtilExtension ）。](http://schemas.microsoft.com/wix/UtilExtension)

```
<Wix
  xmlns="http://wixtoolset.org/schemas/v4/wxs"
  xmlns:util="http://wixtoolset.org/schemas/v4/wxs/util"
  > 
```

3：确保 ServiceConfig 元素以正确的命名空间引用为前缀。

```
<ServiceInstall
      Id="MyService"
      Type="ownProcess"
      Name="MyService"
      DisplayName="MyService"
      Description="My Service"
      Start="auto"
      Account="[SERVICEACCOUNT]"
      Password="[SERVICEPASSWORD]"
      ErrorControl="normal"
    >

      <util:ServiceConfig
        FirstFailureActionType='restart'
        SecondFailureActionType='restart'
        ThirdFailureActionType='restart'            
        RestartServiceDelayInSeconds='30'
        ResetPeriodInDays='1'/>

</ServiceInstall> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-06T17:15:53.253

在 Visual Studio 中，为避免在 CLI 中使用 -ext，您可以执行以下操作：

当然，你添加一个资源：`<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">`

然后，在解决方案资源管理器 -> 参考 -> 添加.. WixUtilExtension.dll

在那之后，一切都像一个魅力。（蜡 3.10）

当然，如果您确实使用了 utils 中的第二个 ServiceConfig。像`<util:ServiceConfig blablabla`

# c# - 更改特定类型的 JSON.NET 序列化（不是我的）

> ID：12476610
> 
> 赞同：3
> 
> 时间：2012-09-18T12:00:15.147
> 
> 标签：c#, serialization, json.net

我正在使用 Newtonsoft 的 JSON.NET 库来序列化一些对象。特别是，我想将 NetTopologySuite`Point`类（或 GeoAPI`IPoint`接口）存储为我的对象的属性。

我只想在生成的 JSON 中存储一个`latitude`and`longitude`属性。相比之下，IPoint 具有`X`、`Y`、`Z`和其他几个属性。

我可以以某种方式注入我自己的逻辑来将这种特定类型序列化/反序列化到/从 JSON 吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T12:44:42.203

对于这种操作，我总是查看 TweetSharp 以及它是如何处理它的。

例如，TweetSharp 使用 TwitterGeoConverter.cs 将 TwitterGeoLocation.GeoCoordinates 类型序列化/反序列化到 JSON： [https ://github.com/danielcrenna/tweetsharp/blob/master/src/net40/TweetSharp.Next/Serialization/Converters /TwitterGeoConverter.cs](https://github.com/danielcrenna/tweetsharp/blob/master/src/net40/TweetSharp.Next/Serialization/Converters/TwitterGeoConverter.cs)

该转换器中的关键方法是：

*   CanConvert - 是否应该在此成员上使用此转换器
*   WriteJson - 处理对象到字符串输出
*   ReadJson - 处理字符串到对象解析

转换器本身使用 JsonSerializerSettings 向 JSON.Net 注册 - 例如：

```
new JsonSerializerSettings
                   {
                       MissingMemberHandling = MissingMemberHandling.Ignore,
                       NullValueHandling = NullValueHandling.Ignore,
                       DefaultValueHandling = DefaultValueHandling.Include,
                       ContractResolver = new JsonConventionResolver(),
                       Converters = new List<JsonConverter>
                                        {
                                            new TwitterDateTimeConverter(),
                                            new TwitterWonkyBooleanConverter(),
                                            new TwitterGeoConverter()
                                        }
                   }) 
```

（来自[https://github.com/danielcrenna/tweetsharp/blob/master/src/net40/TweetSharp.Next/Serialization/SerializerBase.cs](https://github.com/danielcrenna/tweetsharp/blob/master/src/net40/TweetSharp.Next/Serialization/SerializerBase.cs)）

* * *

或者，您也可以使用属性注册转换器 - 请参阅[https://github.com/geersch/JsonNetDateTimeConverter](https://github.com/geersch/JsonNetDateTimeConverter)

* * *

或者......如果情况非常简单并且您拥有源代码 - 那么如果您只是想在序列化过程中忽略某些属性，那么有一个`[JsonIgnore]`属性可用于您想要跳过的属性。

# java - ArrayList作为函数的参数，却传不出去？

> ID：12476613
> 
> 赞同：0
> 
> 时间：2012-09-18T12:00:43.083
> 
> 标签：java, arraylist

我编写了一个函数来处理一些 ArrayList，并希望将列表传递给外部调用者。但是我发现调用函数后列表没有改变。

这是一些测试代码（因为它是一个演示，但说明了我的问题）：

```
@Test
public void testList() {
    List<Integer> l1 = new ArrayList<Integer>(5);
    List<Integer> l2 = new ArrayList<Integer>(5);
    l1.add(11); l1.add(12); l1.add(13); l1.add(14); l1.add(15);
    l2.add(21); l2.add(22); l2.add(23); l2.add(24); l2.add(25);
    System.out.println("outer l1: " + l1);
    System.out.println("outer l2: " + l2);

    subList(l1, l2);  //call the function

    System.out.println("after l1: " + l1);
    System.out.println("after l2: " + l2);
}

protected static void subList(List<Integer> l1, List<Integer> l2) {
    l1.remove(0);  l1.remove(0);
    l2 = l2.subList(0, 4);
    System.out.println("inner l1: " + l1);
    System.out.println("inner l2: " + l2);
} 
```

结果是：

```
outer l1: [11, 12, 13, 14, 15]
outer l2: [21, 22, 23, 24, 25]
inner l1: [13, 14, 15]             (in function, changed)
inner l2: [21, 22, 23, 24]         (in function, changed too)
after l1: [13, 14, 15]             (changed)
after l2: [21, 22, 23, 24, 25]     (unchanged?!) 
```

似乎 List2 没有被函数**subList(List l1, List l2)**改变，而 List1 改变了。

List参数是CopyValue传递的吗？？那么，在函数中，当l2的引用发生变化时，JVM复制了一个新的链表，原来的外链表是保持旧值吗？

如何编写**“副作用”程序**来修改 ArrayList ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T12:07:05.450

在 Java 中，引用总是按值传递。因此，在被调用方法中分配新值`l2`不会更改调用方法中的引用。

您需要以下代码才能使其工作：

```
List<Integer> subList = new ArrayList<Integer>(l2.subList(0, 4));
l2.clear();
l2.addAll(subList); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:03:46.520

该`subList`方法创建*一个新的*列表对象，旧的将保持不变。您可以调用`clear`旧列表并使用`addAll`将新列表中的数据复制回其中...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T12:04:42.800

问题出在这一行：

```
l2 = l2.subList(0, 4); 
```

这将分配`l2`给一个新对象，并且由于 Java 仅按值传递（而不是引用），因此您只能在场景中修改原始对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T12:05:35.877

这`subList`是原始列​​表中数据的视图（请参阅[文档](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractList.html#subList%28int,%20int%29)）。它与原始列表具有相同的引用，但任何结构更改（例如删除项目）都不会反映在原始列表中。

您应该对原始列表进行更改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-18T12:07:45.033

`l2.subList(0, 4);`它创建了一个新的 list 实例，您使用 l2 保存该实例，但在主类 l2 中创建的实例保持不变。

`subList(List<Integer> l1, List<Integer> l2)`l2 引用主类中创建的实例，并`l2 = l2.subList(0, 4);`用新创建的实例重写 l2 引用值。所以在主类中创建的实例保持不变。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T12:11:47.467

**-** `subList`就像原始列表中的数据呈现。

**-**对 的任何更改`sublist`都不会**反映**在原始列表中。

**-**最好使用 a`Copy-Constructor`来执行此操作...

**例如：**

`List<Integer> subList = new ArrayList<Integer>(l2.subList(0, 4));`

# php - 无法通过 Ajax 重新加载内容

> ID：12476618
> 
> 赞同：1
> 
> 时间：2012-09-18T12:01:12.987
> 
> 标签：php, ajax, codeigniter

好的，所以基本上这是我的问题：

*   我有一个动态页面，里面有一个表格
*   当用户单击删除条目时，该条目将从数据库中删除，并使用 Ajax 重新加载表（通过控制器）
*   但是，即使重新获取内容，它也会继续显示我的内容的先前版本（好像页面以某种方式被缓存了？）。如果我重新加载整个页面，它会显示正常...

会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:07:14.927

它实际上是一个与缓存相关的问题。因此，为确保这一点，只需模拟新的 URI，如

```
$.post("yourupdatepage.php?r="+(Math.random() * (1000 - 1) + 1), 
  ...
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:03:47.797

我猜你正在获取缓存的结果。在调用数据重新加载以解决此问题时，您可以在 ajax 调用中添加唯一的时间戳。

您可以使用[$.now](http://api.jquery.com/jQuery.now/)函数返回一个代表当前时间的数字。

```
$("#someDiv").load("yourPage.php"+$.now()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T12:53:10.600

确保您的 ajax 请求未缓存在客户端上。假设您使用的是 jquery，则有一个设置：[http](http://api.jquery.com/jQuery.ajax/) ://api.jquery.com/jQuery.ajax/具有魔力。

使用 firebug 或 chrome 开发工具检查您的请求/响应标头。可能有类似`cache-control`或`last-modified`让您的浏览器缓存请求的东西。

任何服务器端缓存引擎？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T12:19:40.423

你在用 Chrome 吗？

在 Chrome 上使用 ajax 调用时，我发现了类似的行为。

如果您使用 jQuery 进行 ajax 调用，您可以使用属性 cache: false 方法 ajax 来避免这种行为。

# php - 设置多维数组值

> ID：12476620
> 
> 赞同：0
> 
> 时间：2012-09-18T12:01:16.397
> 
> 标签：php

我有一个看起来像...的数组

```
$arr = array(
   array(
      "server_name"    => "server_a",
      "server_number"  => "1",
      "server_status"  => "OPEN" 
   ),
   array(
      "server_name"   => "server_b",
      "server_number" => "2",
      "server_status" => "CLOSED" 
   )
); 
```

我正在尝试通过以下方式设置“server_status”的索引值

```
foreach($arr as $a){
   $a['server_status'] = "STATUS_".$a['server_status'];
} 
```

这似乎不是设置数组值的正确方法，因为似乎什么都没有发生，执行此任务的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:03:45.420

您需要通过引用进行迭代：

```
foreach($arr as &$a) {
   $a['server_status'] = ...;
} 
```

（与您的代码的唯一区别是`&`foreach 中的 $a 之前。）

只是不要忘记在迭代后取消设置引用：

```
unset($a); 
```

否则，稍后在代码中写入此变量将覆盖数组的最后一个元素。

请参阅[`foreach`](http://fr2.php.net/manual/en/control-structures.foreach.php)文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:03:12.143

您需要通过引用进行 foreach，如下所示：

```
foreach($arr as &$a){
   $a['server_status'] = "STATUS_".$a['server_status'];
} 
```

否则它不会修改当前迭代的项目 - 它是一个副本。

# android - 如何使用

> ID：12476625
> 
> 赞同：0
> 
> 时间：2012-09-18T12:01:27.647
> 
> 标签：android, html

我想将我的网页显示为 ##TITLE## ##VALUE## 我的 Html 是

```
<div> 
 <div style="padding:8px; border: 1px solid black; color:#006BF2; width: 90px;">##TITLE##</div> 
 <div style="padding:8px; border: 1px solid black; color:#000000; text-align:left; ">##VALUE##</div> </div> 
```

现在显示为

```
 ##TITLE##
 ##VALUE## 
```

我只知道 html 的基础知识。如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:05:02.750

您需要为此设置浮动属性。一个 div 应该向左浮动，另一个应该向右浮动，如下所示。

对于第一个 div 设置样式 => style="float: left; width: 50%; 对于第二个 div set style => style="float: right; 宽度：50%；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:03:12.570

您必须为您的和列设置`float: left`样式。在它们下面设置新的空 div样式。`title``value``clear: both`

```
<div> 
 <div style="float: left; padding:8px; border: 1px solid black; color:#006BF2; width: 90px;">##TITLE##</div> 
 <div style="float: left; padding:8px; border: 1px solid black; color:#000000; text-align:left; ">##VALUE##</div>
 <div style="clear: both;"></div>
</div> 
```

# c++ - xmlReadFile() (C++ Ubuntu) 核心转储损坏的 XML

> ID：12476626
> 
> 赞同：0
> 
> 时间：2012-09-18T12:01:32.523
> 
> 标签：c++, xml, libxml2, dtd

我正在使用 libxml2 库将发送给我（我的程序）的 XML 解析为来自另一个程序的文件。小心应该意味着我永远不会得到错误的 XML，但我已经做了两次手动调整，破坏了接收文件中的 XML。破碎是指元素有错误，结束标签与开始标签不匹配，标签之间的随机字符等。

该文件很小，因此无需担心将所有文件加载到解析器中，因此我使用 xmlReadFile() 来读取文档。

当 XML 被破坏时，我的问题就出现了。xmlReadFile() 执行异常结束和核心转储。我无法通过异常捕获它，也无法将标志设置为“恢复”工作。

我看过谷歌的成功率最低。我找到了 xmllint，但我真的不希望每次获得新的 XML 文件时都必须调用 system() 或 popen()。我查看了 DTD，但似乎无法弄清楚如何告诉 DTD 实际验证传入的值。（文档中的许多标签的值都是一组，比如 5 个可能的答案之一。）当然，如果 DTD 有效，我至少不会使 xmlReadFile() 崩溃。

关于如何在 xmlReadFile() 或使用 xmlReadFile() 之前验证 XML 以及如何防止崩溃的任何建议？xmllint 是否有一个我还没有找到的 C++ 接口？

没有提升。无需更改库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:14:44.127

你试过`xmlReaderForFile(... XML_PARSE_RECOVER ...)`吗？

# c# - MySQL - 无法解析端口？

> ID：12476627
> 
> 赞同：1
> 
> 时间：2012-09-18T12:01:37.437
> 
> 标签：c#, php, mysql

问候 Stackoverflow。

我目前使用**000webhost.com**作为我的 MySQL 数据库/服务器提供商。使用 PHP，他们的服务非常出色！

我制作了一堆包含 MySQL 用户名、密码、主机、数据库等的变量。看起来如下：

```
$mysql_host = "mysql3.000webhost.com";
$mysql_database = "a1966938_AtMarke";
$mysql_user = "a1966938_admin";
$mysql_password = "**********";
$mysql_table = "MarketDatas"; 
```

我正在使用“mysql_connect($mysql_host, $mysql_user, $mysql_password);” 连接到服务器。同样，所有这一切都完美无缺。但是，当我尝试通过连接到数据库时。客户端（C#）它不会让我连接，或者如果我声明相同的变量并尝试使用 PHP 使用相同的变量和程序从另一个 IP 连接到服务器，它不会让我连接？

我很困惑 - 我应该怎么做，所以它允许所有 IP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:07:49.523

它不允许从其他IP连接的原因可能有两个：

*   已`GRANT PRIVILEGES ... TO user@IP`分配给该 IP，但未分配给其他 IP；如果您对数据库具有 GRANT 权限，您也许可以解决这个问题（请记住 FLUSH PRIVILEGES）。
*   MySQL 主机上的防火墙可能只允许来自它们自己的 Web 主机服务器的连接。如果是这种情况，您不太可能做任何事情，但请尝试询问他们的支持人员。

通常，您可以实现一个用 PHP 编写的瘦 REST 层（只需 google 'MySQL REST PHP 接口'等），这样您就可以连接到 Web 托管，并通过它们的接口（当然是开放的 - 否则网络托管不起作用）。这就是 HeidiSQL 在某些设置上所做的，它们的代码可能在某处浮动。然后，您将不会使用 C# MySQL 库，而是使用 HTTP 库来完成这项工作。更麻烦，但更便携（也因为并非所有地方都可以期望端口 3306/tcp 对外开放：它在家庭 ADSL 上，但许多分布式运营商和公司只允许某些出站端口 80、443、110、25 IP 和其他十几个 - 并且 3306 不在其中；但这取决于您计划对 C# 客户端执行的操作）。

但是，如果您得到“无法解析端口”，这也可能是由客户端库引起的，您可能需要手动指定 MySQL 连接端口值；默认值为 3306，并且（通常）您可以在主机名中指定它，例如“myserver.host.com:3306”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:06:27.673

出于安全考虑，托管公司通常会锁定 MySQL 服务器，使其仅响应其网络上 Web 主机的 IP 地址。

因此，恐怕简短的回答是您可能无法将其设置为允许所有 IP。

# matlab - Matlab中的楼梯图到垂直条形图

> ID：12476628
> 
> 赞同：0
> 
> 时间：2012-09-18T12:01:42.373
> 
> 标签：matlab, graph, plot

我想创建一个垂直条形图。这是我的代码：

```
bar (x, sensiv);
title ('Promedio X')
xlabel('Nm')
ylabel('Refl.') 
```

问题是它看起来像一个楼梯图。我尝试添加 (x,sensiv, 'stacked') 但它不起作用。它看起来是分组的，如下图所示：

[图 http://imageshack.us/a/img689/9449/capturawv.jpg](http://imageshack.us/a/img689/9449/capturawv.jpg)

我认为这是因为 x 轴，但我无法改变它。我该怎么做？有人知道我该怎么做吗？

**编辑**

谢谢科林！我试过放大，我理解你的意思，我试过不同的价值观，就像 slayton 和你说的那样。

![值为 0.000001 的图形](../Images/a691d8d1c25577c2fc0555ddf7317a85.png) ![值为 1 的图形](../Images/dd031ab90db0b2f0e80c7b607be62988.png) 我认为这可能是我编写情节的方式，有可能吗？

```
abc=0;
for p=(61:201)
    abc(p)=out1_c;
end
for p=(151:301)
    abc(p)=out2_c;
end
for p=(231:380)
    abc(p)=out3_c;
end
for p=(381:596)
    abc(p)=out4_c;
end
for p=(1152:1531)
    abc(p)=out5_c;
end
for p=(1651:2051)
    abc(p)=out7_c;
end
for p=(2052:2151)
    abc(p)= 0;
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:43:03.430

条形图中条形宽度的默认值为 0.8，因此如果您当前没有指定宽度，则每个条形之间*应该*有间隙。这听起来很明显，但是您是否尝试过放大创建的条形图？对于某些数据集，bar 函数将返回一个看起来像阶梯图的图，但如果放大得足够远，实际上会有间隙。如果是这种情况，那么您应该能够通过修改 slayton 建议的宽度参数来获得所需的间隙。

**编辑**

好的。第一件事。如果您想发布更多信息，您应该将其添加到您的问题中，而不是将其作为新答案发布！您可以通过单击页面上问题所在下方的编辑按钮来执行此操作。为了使内容更具可读性，您可以像我在这里所做的那样，在您的编辑前加上一个大写的粗体标题“EDIT”。如果可以，请立即尝试将您提供的其他信息移回您的问题中，然后删除答案。

其次，老实说，您发布的附加信息有些令人困惑。但是，我想我现在明白你想要什么了。您希望 7 个柱达到高度 out1_c、out2_c、...、out7_c（变量名称取自您的附加信息），每个柱之间有一个小间隙，x 轴反映（大约）450-550 的间隔, 550-650 等

好吧，如果你想要 7 个条，那么你希望你的输入只有七个元素。放：

```
y = [out1_c; out2_c; out3_c; out4_c; out5_c; out6_c; out7_c]; 
```

y 现在为您提供条形图在 y 轴上的高度。要在 x 轴上定位条形，请定义一个向量 x，它也有七个元素，其中每个元素给出您希望条形在 x 轴上的位置的中点。例如：

```
x = [100; 200; 300; 400; 500; 600; 700]; 
```

然后只需使用`bar(x, y)`. 这应该让你开始。

关于您发布的代码的最后一点，您实际上可以完全避免循环：阅读矢量化。但是如果你要坚持循环，第一个也是最重要的规则是预先分配你的向量/矩阵。在您的代码`abc`中以标量（1 x 1 矩阵）开始，但是对于每个 p，您在索引 p 处添加一个元素。在后台实际发生的是对于每个 p，matlab 正在废弃`abc`您在内存中的当前，并使用附加元素从头开始重新构建它。正如您所料，这会使您的代码速度减慢许多数量级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:30:16.083

您可以通过将 0 到 1 之间的值传递给 来设置各个条的宽度`bar`。通过 1 表示条之间不应有空格

```
bar(x,y,1) 
```

传递小于 1 的任何值都会减小条形尺寸并在各个条形之间引入间距

```
bar(x,y,.5) 
```

# date - awk：处理某个日期之后的所有行

> ID：12476636
> 
> 赞同：0
> 
> 时间：2012-09-18T12:02:26.690
> 
> 标签：date, awk, command-line-arguments

我有一个想用 awk 处理的 Apache 日志文件。但我想只处理某个日期之后的行。我已经在使用[https://stackoverflow.com/a/2115940/130121中的代码转换日志文件中的日期](https://stackoverflow.com/a/2115940/130121)

日志文件行如下所示：

```
 194.88.248.197 - - [18/Sep/2012:11:08:40 +0200] "GET start HTTP/1.1" 200 3063 "" "Mozilla/5.0 (X11; Linux i686; rv:8.0) Gecko/20100101 Firefox/8.0" 
```

如何使用我作为命令行参数提供的日期将该日期与日志文件中的日期进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:21:06.353

gawk 支持[时间函数](https://www.gnu.org/software/gawk/manual/html_node/Time-Functions.html#Time-Functions)，如`mktime`和`strftime`。您可以使用它们来格式化参数，并在模式中使用格式化参数来仅选择您感兴趣的记录。

# php - 使用 Ajax 发送带有附件的 PHP 邮件

> ID：12476643
> 
> 赞同：0
> 
> 时间：2012-09-18T12:02:54.643
> 
> 标签：php, ajax

我正在尝试通过 ajax 调用发送 PHP 邮件，但我无法获取附件。

```
$.ajax({
    url: 'php_sendmail_upload2.php',
    data: data,
    processData: false,
    type: 'POST',
    success: function ( data ) {
        alert( data );
    }
}); 
```

有没有办法使用 ajax 发送带有附件的邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:13:01.363

使用 phpmailer (http://www.web-development-blog.com/archives/send-e-mail-messages-via-smtp-with-phpmailer-and-gmail/)。让您的 ajax 函数提交到使用 PHP 邮件程序的 php 页面，发送附件将很容易。

# sql - 需要有关 SQL 查询的指导

> ID：12476644
> 
> 赞同：0
> 
> 时间：2012-09-18T12:02:55.050
> 
> 标签：sql, sql-server, sql-server-2008

我有下表，我需要将 Check_Status 从 Completed 更新为“Not Completed”以获取特定 Prod_ID 的最大 Transaction_ID：

```
Tran_ID     Prod_ID    Check_Status
-------     --------   ------------
107893      XA         Completed
107892      XA         Completed
107891      XA         Completed
107890      XB         Completed
107889      XB         Completed
107888      YC         Completed
107887      YC         Completed
107886      YC         Completed
107885      YC         Completed 
```

我的结果应显示如下，即产品 ID`XA`的最大 Trans Id 为 107893，应更新为“未完成”。其余的东西应该不变。对于其他产品 ID`XB`和`XC`.

```
Tran_ID    Prod_ID     Check_Status
-------    --------    ------------
107893     XA          Not-Completed
107892     XA          Completed
107891     XA          Completed
107890     XB          Not-Completed
107889     XB          Completed
107888     YC          Not-Completed
107887     YC          Completed
107886     YC          Completed
107885     YC          Completed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:09:49.323

您可以为此使用 CTE：

```
;with cte as
(
  select tran_id, prod_id,
    row_number() over(partition by prod_id order by tran_id desc) rn,
    check_status
  from yourtable
) 
update  cte
set check_status = 'Not-Completed'
where rn = 1 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/ecbb6/11)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:05:33.820

```
 UPDATE Transactions set 
    Check_Status= 'Not completed' 
     where Tran_ID IN (
        Select MAX(Tran_ID) as Tran_ID from 
Transactions Group by Prod_ID) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T12:06:25.547

```
UPDATE tablename t1 
SET t1.Check_Status = 'Not-Completed'
WHERE t1.TranId IN 
    (
       SELECT Max(Tran_ID) 
       FROM Tablename t2 
       GROUP BY Prod_ID
    ) 
```

# android - 过滤列表视图，我无法理解过滤规则

> ID：12476645
> 
> 赞同：1
> 
> 时间：2012-09-18T12:02:56.973
> 
> 标签：android

我需要为 ListView 应用过滤器。我阅读了很多文档，但我无法理解过滤器的规则。过滤器有效，但我不知道它在做什么。

我使用这个类：

```
public class ArtistasActivity extends Activity {

private EditText filterText = null;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    View title = getWindow().findViewById(android.R.id.title);
    View titleBar = (View) title.getParent();
    titleBar.setBackgroundColor(Color.rgb(181, 9, 97));

    setContentView(R.layout.artistas_l);

    final ListView m_listview = (ListView) findViewById(R.id.listView1);

    ListAdaptor adaptor = new ListAdaptor(this, R.layout.artistas_l, loadArtistas());

    m_listview.setFastScrollEnabled(true);
    m_listview.setScrollingCacheEnabled(true);

    m_listview.setAdapter(adaptor);

    m_listview.setTextFilterEnabled(true);

    // Search

    filterText = (EditText) findViewById(R.id.search_box);
    filterText.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {

        }

        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {

        }

        public void afterTextChanged(Editable text) {
            Log.d("search", ""+text);
            ListAdaptor adaptor = (ListAdaptor) m_listview.getAdapter();
            adaptor.getFilter().filter(text);
            adaptor.notifyDataSetChanged();
        }
    }); 
```

而 ListAdaptor 是典型的：

```
 private class ListAdaptor extends ArrayAdapter<Artista> {
    private ArrayList<Artista> artistas;

    public ListAdaptor(Context context, int textViewResourceId, ArrayList<Artista> items) {
        super(context, textViewResourceId, items);
        this.artistas = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View v = convertView;

        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.artistas_list, null);
        }

        Object content = null;

        Artista o = artistas.get(position);

            TextView tt = (TextView) v.findViewById(R.id.ArtistTopText);

            tt.setText(o.getNombre());

            v.setClickable(true);
            v.setFocusable(true);
            v.setOnClickListener(myClickListener);

        return v;
    }
} 
```

应用程序有效，当在文本编辑器中写入时，列表被过滤，但是当我输入 R 时，出现带有 Dani 或 Diego 的名称......

我重写 toString 方法只返回名称。

```
 @Override
public String toString() {
    return this.nombre;
} 
```

谢谢帮助！Rgds

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:31:28.673

不需要维护`aristas`数组成员，因为您已经将它传递给了超级成员。在`getView`方法中，通过调用`getItem(position)`.. 获取项目。此更正将解决问题..

# jquery - 点击时用 jquery 替换 img src

> ID：12476646
> 
> 赞同：0
> 
> 时间：2012-09-18T12:02:58.620
> 
> 标签：jquery, image, load, fadein, removeclass

这可能看起来像是小游戏，但我不知道如何替换图像的 src 属性。

src 是生成图像的“build.php”。我想要的是当我单击“混合”时，它将运行 build.php 以生成新图像，删除旧图像并以漂亮的淡出/淡入显示新图像。

还有一个“构建新图像”，在新图像加载完成时隐藏。

我试过了

```
$("#mix").click(function(){
   var img = new Image();
      $(img).load(function () {
         $(this).hide();
         $('#loader').removeClass('loading').append(this);
         $(this).fadeIn();
   }).attr('src', 'build.php');
}); 
```

但是第二次点击“混合”时，它会将新图像放在旧图像下，而不是删除旧图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:07:13.457

```
$("#mix").click(function(){
       var img = new Image();
          $(img).load(function () {
             $(this).hide();
             $('#loader').removeClass('loading').append(this);
             $(this).fadeIn();
       }).attr('src','').attr('src', 'build.php');
    }); 
```

看下面 - 作品：

```
$(document).ready(function() {
$("#yourimagediv").click(function() {
$("#yourimagediv").attr("src","image.php?"+new Date().getTime());
});
});​ 
```

```
<img id="yourimagediv" src="image.php" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:16:01.830

```
var mix = $('#mix'),
    jqImage = $('#brick-image');

mix.on('click', function (e) {
    var img = new Image();
    jqImage.fadeOut();
    img.onload = function () {
      jqImage.attr('src', img.src);
      jqImage.fadeIn();
    };
    // add param to prevent caching of build.php image
    img.src = 'build.php?' + new Date().getTime();
    e.preventDefault();
}); 
```

# forms - 以不同的形式将值公式从一个字段复制到另一个字段 - LOTUS NOTES

> ID：12476647
> 
> 赞同：0
> 
> 时间：2012-09-18T12:02:58.903
> 
> 标签：forms, copy, field, lotus-notes, assign

是否可以为表单中的字段分配存储在不同表单上的字段中的值？例如：txt_Name 在 form_MAIN 上，而 txt_LastName 在 form_SECOND 上。

我试过：（在 form_MAIN 上的窗口标题上）（字段“text_uniqueid”包含@Text（@DocumentUniqueId）

```
FIELD OldOrderNumber := @GetField("text_uniqueid"); 
```

然后我想看看是否可以在 second_FORM 上看到变量的值：

```
@Prompt([Ok];"title";OldOrderNumber) 
```

但结果为空。

换句话说，我想做的是：将主窗体的唯一 id 复制到位于第二个窗体上的字段中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:07:23.613

[@GetField](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_GETFIELD.html)只能从当前文档中获取值。要从另一个文档中获取字段值，您需要使用[@GetDocField](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_GETDOCFIELD.html)并提供您要从中读取的文档的 UNID。

> **@GetDocField**
> 
> 给定文档的唯一 ID，返回该文档上特定字段的内容。该文档必须驻留在当前数据库中。
> 
> *句法*
> 
> `@GetDocField( documentUNID ; fieldName )`

# windows-phone-7 - PhoneApplicationFrame 在 WP7 中为空

> ID：12476648
> 
> 赞同：0
> 
> 时间：2012-09-18T12:03:02.653
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-7-emulator

在 windows phone 7 中，我使用 PhoneApplicationFrame 来获取主框架，如下所示：

```
 // set the main layout
            if (frame == null)
            {
                frame = Application.Current.RootVisual as PhoneApplicationFrame;
            } 
```

但框架仍然为空..为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:43:58.137

这是在 MainPage 构造函数中调用的......当时尚未加载应用程序框架。这导致框架为空

解决方案是在应用程序的加载事件处理程序中创建框架

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:57:10.377

私有 PhoneApplicationFrame 框架 = (PhoneApplicationFrame)Application.Current.RootVisual;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T13:07:57.480

你需要做这样的事情：

```
var currentPage = ((App)Application.Current).RootFrame.Content as PhoneApplicationPage; 
```

[这里已经问过](https://stackoverflow.com/questions/5163016/how-to-get-current-page-in-my-wp7-app)类似的问题。

# javascript - 如何在javascript中通过json解析关联数组

> ID：12476654
> 
> 赞同：1
> 
> 时间：2012-09-18T12:03:21.197
> 
> 标签：javascript, ajax, json, multidimensional-array

我有一个二维 php 数组，我通过 JSON 进行编码。我在 php 中的二维数组是这样的：

```
$array['A'][12] = 8;
$array['A'][8] = 21;

$array['B'][17] = 19;
$array['B'][9] = 12; 
```

当我这样做`echo json_encode($array);`并将其作为 Ajax xmlhttp.responsetext 发出警报时，我在我的警报框中得到了这个：`{"A":{"12":"8","8":"21"},"B":{"17":"19","9":"12"}}`

这绝对没问题。现在我需要用 javascript 解析它，所以我使用了 JSON.parse() 函数。问题是当我访问字符串的 A 和 B 字段时。我在我的警报框中得到了这个：`Object object`。如何解析这个关联数组？我是 AJAX 和 JSON 的初学者，所以请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:06:07.850

```
var array = JSON.parse(yourResponseData);

array.A // Object
array.A['12'] //8 
```

您无法通过点语法访问键“12”，因为没有变量名可以以数字开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T23:37:40.320

您可以使用 console.log() 而不是 alert() 来查看解析后的 json 对象的完整结构。您可以使用 轻松检索该值。符号或 [] 括号：例如：

```
var returned = JSON.parse(tran.responseText);
console.log(returned['A']['8']); //which should give you '21' based on your case 
```

# yii - Gii 无法解析请求“gii/index”——合并数组的理解

> ID：12476655
> 
> 赞同：1
> 
> 时间：2012-09-18T12:03:32.873
> 
> 标签：yii

尝试在本地访问[http://mysite.dev/gii](http://mysite.dev/gii)但我得到：

> Gii 无法解析请求“gii/index”

这是我的**config/localdev.php**文件：

```
'modules'=>array(
  // uncomment the following to enable the Gii tool
  'gii'=>array(
     'class'=>'system.gii.GiiModule',
      'password'=>false,
      // If removed, Gii defaults to localhost only.
      'ipFilters'=>array('127.0.0.1','::1'),
), 
```

如果我使用这个地址：

[http://mysite.dev/gii/default/login](http://mysite.dev/gii/default/login)

但这是一个密码保护，我们定义为假。我们可能认为 localdev.php 没有被应用，但我在加载它的条件中回显“hello”，它出现了。

注意：在 Yii 框架里面有一个**.htaccess**文件，里面有：

```
deny from all 
```

我看不出这种行为的原因。

我可以请你帮忙吗？

**关于评论的更新：**

这是需要 main.php的**localdev.php**

```
return CMap::mergeArray(
        require_once(dirname(__FILE__).'/main.php'),
        array(
            'modules'=>array(
          'gii'=>array(
              'class'=>'system.gii.GiiModule',
              'password'=>false,
              'ipFilters'=>array('127.0.0.1','::1'),
        ),
         ), 
```

**这是main.php**上的 URL

 **```
'components'=>array(
    'urlManager'=>array(
      'urlFormat'=>'path',
      'rules'=>array(
        '<controller:\w+>/<id:\d+>'=>'<controller>/view',
        '<controller:\w+>'=>'<controller>/index',
        '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
        '<controller:\w+>/<action:\w+>'=>'<controller>/<action>'
       ),
      'showScriptName'=>false,
     ), 
```

如果我们应该添加这些：

```
'rules'=>array(
  'gii'=>'gii',
  'gii/<controller:\w+>'=>'gii/<controller>',
  'gii/<controller:\w+>/<action:\w+>'=>'gii/<controller>/<action>', 
```

我应该添加这个并将它的所有内容放在**main.php**规则中，或者，我们可以在**localdev.php**上精确地添加这些规则吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T13:04:31.020

[您应该按照手册](http://www.yiiframework.com/doc/guide/1.1/en/topics.gii)中的说明将服务 Gii 的路由添加到您的应用程序配置中。**

# c - pixman 和杂波 box2d 应用程序

> ID：12476656
> 
> 赞同：0
> 
> 时间：2012-09-18T12:03:32.823
> 
> 标签：c, box2d, cairo, hardware-acceleration, clutter

我有一个简单的 clutter-box2d 应用程序（用 C 编写），它显示了一些倒下的图像。它在我的手臂目标（ARMv7）上运行非常慢，*Oprofile*显示消耗大量 CPU

> libpixman-1.so.0.24.4

我该如何解决这个问题，我启用了 EGL 和 X11 后端，但仍然以某种方式使用 pixman（Cairo 图像后端使用 pixman 库作为软件光栅。）正在使用并且应用程序呈现缓慢。

我可以做些什么来为我的 clutter-box2d 应用程序获得 GPU 加速。有没有人遇到过类似的问题？

**对于使用的 ARM 配置选项是**

```
CLUTTER

./configure --build=i686-linux --host=armv7-none-linux-gnueabi 
              CC=armv7-none-linux-gnueabi-gcc 
              CXX=armv7-none-linux-gnueabi-g++ 
              AR=armv7-none-linux-gnueabi-ar 
              RANLIB=armv7-none-linux-gnueabi-ranlib 
              --disable-glibtest --with-x --disable-rpath --enable-xinput=no 
              --enable-shared --enable-deprecated=no --enable-egl-backend=yes 
              --enable-x11-backend=yes --prefix=/home/XYZ/install_all

CLUTTER-BOX2D

./configure --build=i686-linux --host=armv7-none-linux-gnueabi 
              CC=armv7-none-linux-gnueabi-gcc 
              CXX=armv7-none-linux-gnueabi-g++ 
              AR=armv7-none-linux-gnueabi-ar 
              RANLIB=armv7-none-linux-gnueabi-ranlib 
              --enable-shared --enable-introspection=no 
              --prefix=/home/XYZ/install_all 

COGL

./configure --build=i686-linux --host=armv7-none-linux-gnueabi 
              CC=armv7-none-linux-gnueabi-gcc 
              CXX=armv7-none-linux-gnueabi-g++ 
              --prefix=/home/XYZ/install_all --enable-gl=no --enable-gles2=yes 
              --enable-xlib-egl-platform=yes --disable-rpath 

JSON-GLIB

./configure --host=armv7-none-linux-gnueabi 
              CC=armv7-none-linux-gnueabi-gcc 
              CXX=armv7-none-linux-gnueabi-g++ 
              --enable-introspection=no --disable-glibtest 
              --prefix=/home/XYZ/install_all

LIB-PNG
./configure --build=i686-linux --host=armv7-none-linux-gnueabi 
              CC=armv7-none-linux-gnueabi-gcc 
              CXX=armv7-none-linux-gnueabi-g++ 
              --prefix=/home/XYZ/install_all 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:30:54.417

Clutter 在内部不使用 Cairo。Clutter-Box2D 仅更新演员的位置以匹配内部计算的世界。

你是在使用 Cairo 来绘制 Box2D 世界中演员的内容吗？

您是否正在重绘每一帧的内容？

如果这些问题都没有一个肯定的答案，您是否确定您的平台支持 GL 或 GLES 驱动程序？

# facebook-fql - 如何在 FQL 的 ORDER BY 中使用超过 1 列？

> ID：12476657
> 
> 赞同：5
> 
> 时间：2012-09-18T12:03:34.530
> 
> 标签：facebook-fql

我有一个关于 FQL 的问题：是否可以对多个列执行 ORDER BY？

以下 FQL 查询有效：

```
SELECT uid,first_name,last_name 
FROM user 
WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = 123) 
ORDER BY last_name 
```

但是，这个没有：

```
SELECT uid,first_name,last_name
FROM user 
WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = 123) 
ORDER BY last_name, first_name 
```

它返回：

```
"error": {
"message": "(#601) Parser error: unexpected ',' at position 122.", 
"type": "OAuthException", 
"code": 601 
```

这是按预期工作，还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T01:03:33.083

这是不可能的。我最近提交了一个文档错误，解释了 FQL`ORDER BY`只能包含一列。所以它确实按预期工作。

[https://developers.facebook.com/bugs/148360015351840](https://developers.facebook.com/bugs/148360015351840)

# html - 在Firefox中删除带有黑色边框的图像替代文本？

> ID：12476659
> 
> 赞同：0
> 
> 时间：2012-09-18T12:03:38.763
> 
> 标签：html, css, firefox

当我在 Firefox 中打开我的网站时，它会在黑框中显示 img alt 属性（见附图）。它只显示一秒钟，当图像开始加载时它就消失了。

我想删除这个。

![在此处输入图像描述](../Images/f8493469f1cb422491acebfa2e0c1ccf.png)

这是我的 html 代码

```
<a href="url"><img alt="alt text" width="650" height="241" src="src url" /></a> 
```

它只显示在 Firefox 中。

我试过使用这个 CSS 代码

```
a img {
    border: 0;
} 
```

但这没有帮助。

我怎样才能删除这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T12:17:22.843

简短的回答是你不能。更长的答案是你不应该。

您正在以完全错误的方式处理此问题。预料之中，我猜 - 在这个时代，没有多少人关心为什么`ALT`存在这样的标签属性，以及为什么 Firefox 在渲染图像之前会打扰边框。但是如果你想认真对待网页设计，你应该知道这些事情。他们在那里是有原因的。这是因为人们不同，用户代理也不同——有些人甚至无法很好地看到图像，而他们可能会阅读或被屏幕阅读器*读取到*页面内容，而屏幕阅读器无法很好地识别像素内容。此外，在某些场景（学术、科学）中，用户代理被配置为**忽略**图像，仅显示 ALT 内容，而专注于文本内容。

如果您考虑到上述情况，您可以根据这些事实做出决定——您的图像实际上是做什么的？让您的用户看到它重要吗？如果它确实是它的核心图片，那么您不应该担心它将如何显示给您的用户 - 请放心，他们会看到它并希望感到高兴。

该`IMG`元素用于基于图像的数据，它是您所服务文档**内容**的一部分，而不是其样式的一部分。这是一个绝对必要的知识，许多人从未想过。分隔符、`A`元素前的超链接图标、页面顶部的巨大横幅、表单按钮——所有这些**都不**是内容的一部分，它很少对读者有意义。仅此一项就决定了是否应该将这些内容与 CSS 一起放入其中。您将`IMG`元素用于照片、绘图、徽标、插图等。

换句话说，如果它是您网页设计的装饰部分，您应该考虑是否可以使用背景图像 -**它也将完全消除您的边框和 ALT 问题。** 这就是你所能做的——没有 CSS 会并且应该因为**你**不喜欢边框而剥夺你页面的用户的可访问性。请记住 - 您的网页**不是您的网页**，它们被您的用户查看。用户代理也是如此——他们使用他们的，他们更喜欢按照自己的方式进行设置。你自己是否喜欢边界对他们来说没有什么价值或关心。让他们有可能充分利用它们。平面设计间接地涉及妥协——我们希望使用我们可用的方法更好地传达我们选择的信息，同时尊重他们的选择和偏好。网页设计正因为如此走在刀刃上。

```
<div style="background-image: url(forest.jpg); width: 600px; height: 200px;">
    Tree hugging, anyone?
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-09T21:49:43.780

我知道这是一个老问题，但这里是 2017 年更新，仅使用 CSS 解决方案使用伪元素。

```
img:after {  
  content: attr(alt);
  position: absolute;
  z-index: 2;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #fff;
}
```

```
 <img src="//placehold.foo/200x200" alt="Remove border from this alt text" />
```

# c# - 如何使用文件流保存位图

> ID：12476663
> 
> 赞同：3
> 
> 时间：2012-09-18T12:03:49.960
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, c#-4.0

我创建了一个`bitmap`，我想将它保存在我的*上传*文件夹中。我怎样才能做到这一点？

我的代码：

```
public FileResult image(string image)
{
    var bitMapImage = new Bitmap(Server.MapPath("/Content/themes/base/images/photo.png"));
    Graphics graphicImage = Graphics.FromImage(bitMapImage);
    graphicImage.SmoothingMode = SmoothingMode.AntiAlias;
    graphicImage.DrawString(image, new Font("Trebuchet MS,Trebuchet,Arial,sans-serif", 10, FontStyle.Bold), SystemBrushes.WindowFrame, new Point(15, 5));
    graphicImage.DrawArc(new Pen(Color.Red, 3), 90, 235, 150, 50, 0, 360);
    MemoryStream str = new MemoryStream();
    bitMapImage.Save(str, ImageFormat.Png);
    return File(str.ToArray(), "image/png");
} 
```

我将使用的路径：

```
string mynewpath = Request.PhysicalApplicationPath + "Upload\\"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:20:37.993

该类`Bitmap`有几个[`Save`](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.save.aspx)方法的重载。其中一个以文件名作为参数，这意味着您可以使用

```
bitMapImage.Save(mynewpath + "somefilename.png", ImageFormat.Png); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:19:49.677

这个问题似乎与您的代码冲突（您从图像中加载文件并返回它） - 无论如何：您的图像类上有一个“保存”方法，所以只需将它与相同的 Server.MapPath 技巧一起使用。 .. 只需确保 ASP.NET 帐户对您的目标文件夹具有访问/写入权限：

```
string mynewpath = Request.PhysicalApplicationPath + "Upload\\myFile.png";
bitMapImage.Save(mynewpath); 
```

备注：这是使用您的路径，但我不知道这是否真的是您的问题的正确选择 - 正如我所说： MapPath 应该是节省的赌注。

# magento - 将交易 ID 存储到 magento 订单付款表中

> ID：12476668
> 
> 赞同：1
> 
> 时间：2012-09-18T12:04:02.667
> 
> 标签：magento

我通过参考另一种方法创建了自己的付款方式。我想存储我的支付网关的交易 ID 以在成功支付操作时订购支付详细信息 (sales/order_payment)。

如何将事务 ID 存储到此表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:38:18.543

虽然上述答案有效，但我认为可能有更好的方法来存储信息。

将以下方法添加到您的支付模块模型中。

```
public function assignData($data)
{
    if (!($data instanceof Varien_Object)) {
        $data = new Varien_Object($data);
    }

    $info = $this->getInfoInstance();

    $info->setYourCustomTransactionId($data->getYourCustomTransactionId());

    return $this;
} 
```

虽然这会起作用。我建议使用向您的支付模块添加另一种方法。setAdditionalInformation 并通过 assignData 方法设置数据。如果您的付款方式是从另一个 magento 付款类派生的，我不确定此方法是否已经存在。

```
public function setAdditionalInformation($key, $value)
{
    if (is_object($value)) {
        Mage::throwException(Mage::helper('paypal')->__('Payment transactions disallow storing objects.'));
    }
    $info = $this->_getData('additional_information');
    if (!$info) {
        $info = array();
    }
    $info[$key] = $value;
    return $this->setData('additional_information', $info);
} 
```

然后，您将在分配数据中执行此操作。

```
public function assignData($data)
{
    if (!($data instanceof Varien_Object)) {
        $data = new Varien_Object($data);
    }

    $info = $this->getInfoInstance();

    $info->setAdditionalInformation(array(
        'trans_id' => $data->getYourCustomTransactionId()
    ));

    return $this;
} 
```

这可能不适用于您的实现，但我认为这可能是一种更简洁的存储信息的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T15:30:03.937

1) 将 SQL 安装脚本添加到您的模块，我们将在其中向订单对象添加新属性

```
$installer = new Mage_Sales_Model_Mysql4_Setup;
$attribute  = array(
        'type'          => 'text',
        'backend_type'  => 'text',
        'frontend_input' => 'text',
        'is_user_defined' => true,
        'label'         => 'Transaction Code',
        'visible'       => true,
        'required'      => false,
        'user_defined'  => false,  
        'searchable'    => false,
        'filterable'    => false,
        'comparable'    => false,
        'default'       => ''
);
$installer->addAttribute('order', 'new_transaction_id', $attribute);
$installer->endSetup(); 
```

然后您可以添加一个观察者来挂钩支付事件，因此您需要将代码添加到 yoru config.xml 以使您的观察者能够挂钩该事件：

```
<events>
   <sales_order_payment_pay>
      <observers>
        <my_observer>
            <type>singleton</type>
            <class>mymodule/observer</class>
            <method>save_transaction</method>
        </my_observer>
      </observers>
   </sales_order_payment_pay>     
</events> 
```

然后，您将向您的模块添加一个观察者模型：

```
<?php
class Company_Mymodule_Model_Observer
{
    public function save_transaction($event)
    {
        $order = $event->getInvoice()->getOrder(); // Mage_Sales_Model_Order

        /**
         * You would need to have your tranaction id from your gateway
         * which would depend on how you have made your module..
         * ....
         */
        try {
            $order->setNewTransactionId($transactionId);
            $order->save();
        }
        catch(Exception $e) {
            // do something nice
        }

        return $this;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T01:11:56.550

在我的情况下，我对这个问题进行了以下排序：

将函数`capture()`at更改为以下`app/code/local/SecurePay/Sxml/Model/Sxml.php`内容：

```
 if($approved)
    {
        $transaction_id = $sxml->getResult('transaction_id');

        $xmlResponse = $sxml->getResult('response');
        $response = simplexml_load_string(htmlspecialchars_decode($xmlResponse))->children();

        $payment->setAdditionalInformation('txnID', (string) $response->Payment->TxnList->Txn->txnID);
        $payment->setAdditionalInformation('purchaseOrderNo', (string) $response->Payment->TxnList->Txn->purchaseOrderNo);          
        $payment->setCcTransId(''.$transaction_id); 
```

就这些。

# android - Android 4.1 读取断言文件夹音频路径问题

> ID：12476670
> 
> 赞同：1
> 
> 时间：2012-09-18T12:04:16.810
> 
> 标签：android, audio, android-4.2-jelly-bean

在 android 4.1(Jelly bean) 中不支持 webview 中的离线音频。它在在线版本中运行良好，即如果文件路径在线。

```
<html>
<body>
 <audio src="file:///android_asset/folder/file/test.ogg" id="player" loop>Get an HTML5 browser!</audio>
 <form id="interface">
         <input type="button" value="Play" onclick="PlayPause()" id="playpause"/>
 </form>
 <script type="text/javascript">
 var audioPlayer = document.getElementById("player");

 function PlayPause()
 {
     if (audioPlayer.paused)
     {
         audioPlayer.play();
         document.getElementById("playpause").value = "Pause";
     }
     else
     {
         audioPlayer.pause();
         document.getElementById("playpause").value = "Play"; 
     }
 }  
 </script>
 </body>
 </html> 
```

此代码在除 android 4.1 的 webview 之外的所有 android 版本中播放音频

提前致谢

# html - 导航栏是否应该始终作为列表实现？

> ID：12476672
> 
> 赞同：7
> 
> 时间：2012-09-18T12:04:24.967
> 
> 标签：html, css, design-patterns

首先，非常抱歉，如果这不是一个“真正的”stackoverflow 问题。但这是我一直想知道的...

当您为网站 (html) 编写导航栏时，我读到这是非常好的做法，如果不是使用列表标签实现它的唯一做法。例如

```
<ul>
    <li> Home </li>
    <li>About Us</li>
    <li>Blog</li>
    <li>Contact Us</li>
</ul> 
```

然后应用水平显示列表的必要样式等等。

但是这个标准是一成不变的，还是只有在最好的选择时才这样做……因为目前我有一个导航栏可以说不是你的“标准”nv栏，它是将其作为列表实施的一点点任务。放置在一些 div 中的一些链接标签会很好地工作。但是，如果它会让人们指指点点并嘲笑我，我当然不想这样做......

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T12:14:34.890

**为什么使用列表进行站点导航？**

使用 Web 标准设计网站的一部分涉及使用语义正确的代码。引用“[头脑风暴和狂欢](http://brainstormsandraves.com/articles/semantics/structure/)”：

*良好的 HTML 结构基于逻辑、顺序和使用语义正确的标记。如果您有标题，请使用标题元素，从 H1 元素开始。如果您有段落，请使用段落元素。如果您有列表，请使用列表项元素。*

在结构层面上，站点导航只是指向站点其他区域的链接列表。因此，标记站点导航的最佳方法是（可以说）使用列表元素。

如果您使用良好的 HTML 结构，那么基于文本的浏览器、屏幕阅读器、不支持 CSS 的浏览器、关闭 CSS 的浏览器和搜索机器人将能够更轻松地访问您的内容。

一篇不错的文章在[这里](http://dustinbrewer.com/the-importance-of-using-lists-for-navigation/)

# php - 检查是否在php中检查了html按钮

> ID：12476673
> 
> 赞同：0
> 
> 时间：2012-09-18T12:04:31.850
> 
> 标签：php, html

我的表单上有一个按钮。我想检查它是否被推送。我试过这样：

```
<input type="button" name="btn" id="btn"  class="btn1" value="Creaza Sondaj" />

if (isset($_POST['btn'])) 
```

但此方法仅适用于提交按钮。如何检查按钮是否被按下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:07:09.963

如果您想使用 PHP 处理按钮，请将其类型更改为`submit`.

否则使用 JavaScript 处理点击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:07:51.413

您必须使用 $_POST 即让您的表单提交到页面：

```
<?php 
if (isset($_POST['btn'])) 
```

否则，您可以使用 JavaScript/jQuery，例如：

```
<input type="button" name="btn" id="btn"  class="btn1" value="Creaza Sondaj" />
<script>
$('#btn').click(function(){
  // do something
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:07:59.687

您可能想要做的是当按下按钮时，使用 javascript 在表单中添加一个隐藏的输入字段。该隐藏字段不会显示给用户，但是一旦提交表单，您的 PHP 将能够读取该输入的值。如果值存在，则按下按钮。

这是一个 jQuery 示例 -

```
$('#btn').on('click',function(){
  $('#form').append('<input type="hidden" name="form_data[btn]" value="btn_clicked!" />');
}); 
```

这是一个“原始” JavaScript 示例，使用`onclick`事件执行此代码 -

```
var newInput = document.createElement('input');
newInput.innerHTML = '<input type="hidden" name="form_data[btn]" value="btn_clicked!" />';
document.getElementById('form_id').appendChild(newInput); 
```

确保给它一个名称属性，以便您知道在 PHP 中的何处查找值。

# c++ - 如何显示具有不同窗口大小的输出图像？通过使用 cv::Mat

> ID：12476674
> 
> 赞同：1
> 
> 时间：2012-09-18T12:04:38.757
> 
> 标签：c++, opencv

根据[如何显示具有不同窗口大小的输出图像？](https://stackoverflow.com/questions/12102282/how-can-i-display-output-image-with-difference-size-of-window)

我想使用 OpenCV 函数在窗口上显示图像。但是，任何时候我尝试显示图像都会适合显示的大小。

如果我想显示具有不同窗口大小的图像（例如，窗口大小 1280x960px，并且图像在偏移坐标 100x100px 处为 600x600px）我该如何制作它们？

但是，根据前面的问题，我想使用 cv::Mat (C++ API) 如何创建它们？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:54:50.190

```
cv::Mat smallImage = cv::imread("myimage.jpg");
cv::Mat bigWindow = cv::Mat::zeros(960,1280, smallImage.type());

cv::Rect r(0,0,smallImage.cols, smallImage.rows);
cv::Mat roi = bigWindow(r);
smallImage.copyTo(roi);
cv::namedWindow("Display"); // cv::namedWindow("Display", 0); if you want to be able to  resize window
cv::imshow("Display", bigWindow);
cv::waitKey(0); 
```

您在上一个问题中得到了答案。现在，如果您想进一步了解 OpenCV，您必须阅读[文档](http://docs.opencv.org/)！

# bash - 命令或代码同时运行两个进程（并行）

> ID：12476676
> 
> 赞同：1
> 
> 时间：2012-09-18T12:04:44.250
> 
> 标签：bash, shell, parallel-processing

我有两个过程：

第一个过程，我运行： . /vlc video >> resu.txt 它给了我一个输出文件 resu.txt

第二个过程是对文件 resu.txt 进行计算的脚本。该脚本的名称是 calcule.sh，我运行它时使用： 。/计算.sh

我想同时运行两个进程。即有两个并行进程。

我如何并行运行两个进程（./Vlc video >> resu.txt 和 ./Calcul.s）。有没有执行此操作的命令？拜托，你能给我一个可以做到这一点的代码吗

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T12:23:01.033

修改`calcule.sh`，使其从标准输入而不是从 中读取`resu.txt`，然后在管道中执行您的命令，如

```
. /Vlc video | ./calcule.sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:23:55.923

这里没有真正的并行处理。您的第二个脚本无法运行，直到它有一些由第一个脚本生成的数据要处理。这只是[流水线](http://en.wikipedia.org/wiki/Pipeline_%28computing%29)的一个例子。您不需要使用临时文件来存储结果，只需将第一个的输出通过管道传输到第二个的输入：

```
./Vlc video | ./Calcul.s 
```

为此，您必须稍微更改第二个脚本才能从管道中读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T21:05:54.607

如果要创建“resu”文件并将文本发送到其他脚本，请使用[`tee`](http://man.cx/tee)

```
./Vlc video | tee resu.txt | ./calculate.sh 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T13:00:20.443

如果没有数据依赖性并且可以并行运行，则使用这两个命令

```
./ Vlc video > resu.txt & 
```

接着

```
./calculate.sh 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T12:18:01.163

如果进程相互依赖，即进程 1（VLC）必须完成并生成其输出，以便进程 2（您的脚本）可以使用，那么它们是顺序的，并且由于数据的原因不能并行运行依赖。

# php - 将字符添加到空行

> ID：12476677
> 
> 赞同：0
> 
> 时间：2012-09-18T12:04:52.193
> 
> 标签：php, mysql

我的数据库包含空表列。我想在这些空行中添加一个像 § 这样的字符，以便我可以更轻松地搜索它们。我该怎么办？

我已经有一个脚本可以让我替换或删除字符，但我不知道如何指定应该用字符更新空行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:08:44.390

首先，您可能没有空行，但行中的列值是空的。如果您只是这样做`if (!empty($row['column']))`而不是尝试放置一些虚假字符，那不是更好吗？

或者，如果您想执行 SELECT，请执行以下操作：

```
SELECT * FROM table_name WHERE column_name > ''; // seems to work for both NULL and empty string 
```

或者：

```
DELETE FROM table_name WHERE column_name IS NULL or column_name = ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:55:20.113

将字符添加到空列是不好的，因为您只是在数据库中添加额外的大小。在数据库中搜索空字符串很容易。可能的搜索解决方案将使用 of`IS NULL`来搜索`null`列。

```
SELECT * FROM tableName WHERE collName IS NULL 
```

另一种是使用`CHAR_LENGTH`（*获取列中数据的长度*）

```
SELECT * FROM tableName WHERE CHAR_LENGTH(collName) = 0 
```

或通过简单地将其与`''`

```
SELECT * FROM tableName WHERE colName = '' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:08:55.563

```
UPDATE `table` SET column = "§" WHERE column = ""; 
```

# ember.js - 如何在 ember.js ArrayController 中动态修改 sortProperties 值

> ID：12476682
> 
> 赞同：3
> 
> 时间：2012-09-18T12:04:59.473
> 
> 标签：ember.js

我正在使用 ember 1.0 pre 并且有一个基本的数组控制器，它以默认排序属性“id”开始

```
PersonApp.PersonController = Ember.ArrayController.extend({
  content: [],
  sortProperties: ['id'],
  updateSort: function(column) {
    this.set('sortProperties', column);
  }
}); 
```

我想动态设置它并免费更新 dom。但是当我做一个简单的设置器（如上所示）时，它不会在我的视图或 dom 上更新任何内容。

如果我需要动态更新它的能力，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T12:36:23.350

`sortProperties`必须是一个数组，所以我不知道你的情况是否`column`是一个。这是一个 js fiddle，显示您动态设置它：http: [//jsfiddle.net/Sly7/jZVJA/22/](http://jsfiddle.net/Sly7/jZVJA/22/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-14T22:17:25.963

这个答案没有回答原始问题，但我遇到了这种症状并且有不同的根本问题。

就我而言，我正在`sortProperties`动态更改，但这对我的模型数组没有影响。问题原来是我正在从包装方法读取我的支持数组，该方法未能观察到`sortProperties`，因此即使`sortProperties`更新，我的模板也没有重绘底层数组。

更新我的包装方法以直接观察`sortProperties`就可以了。

# jquery - Jquery Block UI设置时间间隔

> ID：12476684
> 
> 赞同：1
> 
> 时间：2012-09-18T12:05:04.803
> 
> 标签：jquery

我正在研究 JQuery UI，我在点击锚点时阻止 UI，点击时我将一些 url 加载到 div 这就是为什么我阻止 UI 以防止点击然后解除阻止它，出现的问题是阻塞发生了一秒钟（或更少）并突然解除阻止，在这种情况下，请求 URL 未完全加载，用户可以单击另一个锚点

```
$('.carousel-main .carousel ul li a').each(function () {
            $(this).click(function (e) {

    $.blockUI({ message: "Please wait..." }); 
                e.preventDefault();
                var hrefvalue = $(this).attr('href');
                CallAction(hrefvalue, true);
                $.unblockUI()

            });
        }); 
```

上面的代码工作正常，我也尝试使用下面的代码代替 $.blockUI 但使用下面的代码没有任何反应

```
var timeout = setTimeout(function() {
    $.blockUI({ message: "Please wait..." }); 
}, 2000); 
```

我如何为这种情况设置时间间隔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:28:20.453

[美化后](http://jsbeautifier.org/)的代码如下所示：

```
$('.carousel-main .carousel ul li a').each(function () {
    $(this).click(function (e) {

        $.blockUI({
            message: "Please wait..."
        });
        e.preventDefault();
        var hrefvalue = $(this).attr('href');
        CallAction(hrefvalue, true);
        $.unblockUI()

    });
}); 
```

这意味着`$.blockUI`并且`$.unblockUI`在解释器没有进入事件循环的情况下被一个接一个地调用。可能即使您`CallAction`正在阻止（但我认为它不是，因为那时您不需要阻止 UI），`$.blockUI`也不会有机会做任何事情。

尝试`$.unblockUI`从此函数中删除 并查看`$.blockUI`调用是否确实执行了您想要的操作。如果是这样，那么您必须调用`$.unblockUI()`一些回调函数，该函数在您等待的任何内容完成后调用 - 而不是在您调用`$.blockUI`.

您没有显示要等待的代码，但假设您正在内部进行 AJAX 调用，`CallAction`那么您需要`$.unblockUI`在该 AJAX 调用的回调中调用 。

（作为旁注 - 请记住，AJAX 请求可能永远不会完成并永远挂起您的 UI，因此您应该添加一些超时以在一段时间后解除阻止 UI。）

# c# - 什么相当于从句之间，用于比较 LINQ 或 lambda 表达式中的字符串？

> ID：12476686
> 
> 赞同：15
> 
> 时间：2012-09-18T12:05:18.403
> 
> 标签：c#, asp.net-mvc-3, linq, entity-framework, razor

如何使用 LINQ 或 Lambda 表达式过滤两个字符串的查询间隔。

例子：

```
SELECT * FROM dbo.Country WHERE Name BETWEEN "Argentina" AND "Jamaica"; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-04-21T11:40:44.937

肇事者 >= 和 <= 不适用于字符串。他们会向您抛出编译时错误。您可以为此使用 CompareTo，如下所示

```
x.Name.CompareTo(Start) >= 0 && x.Name.CompareTo(End) <= 0 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-18T12:13:53.657

你有没有尝试过：

```
yourDataContext.Country.Where(c => c.Name >= "Argentina" && c.Name <= "Jamaica"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-11T08:39:03.770

var query = yourDataContext.Country..Where(Name => Name.IsBetween(Argentina, Jamaica));

# javascript - 将参数传递给匿名函数

> ID：12476687
> 
> 赞同：0
> 
> 时间：2012-09-18T12:05:18.960
> 
> 标签：javascript

想要在找到它后将一个简单的整数传递给函数。代码如下：

```
$("#play").click(function() {
    var elementNumber;
    var properElement;
    for (var i = 0; i < playlistLength; i++) {
        if (listOfElements[i].type == 'video' && listOfElements[i].position == 0) {
            elementNumber = i;
        }
    };
    document.getElementById(listOfElements[elementNumber].name).play();
    properElement = listOfElements[elementNumber];
    console.log(properElement); // gives out proper element;
    setInterval("galleryElement.draw(properElement.name, properElement.type, properElement.position)", 33); // Cannot read property 'name' of undefined 
    return false;
})​ 
```

我得到一个错误`Cannot read property "name" of undefined`？我怎样才能在那里传递论点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:09:48.040

```
$("#play").click(function() {
    var elementNumber;
    var properElement;
    for (var i = 0; i < playlistLength; i++) {
        if (listOfElements[i].type == 'video' && listOfElements[i].position == 0) {
            elementNumber = i;
        }
    };
    document.getElementById(listOfElements[elementNumber].name).play();
    properElement = listOfElements[elementNumber];
    console.log(properElement); // gives out proper element;
    setInterval(function() {
        galleryElement.draw(properElement.name, properElement.type, properElement.position)
    }, 33);
    return false;
}) 
```

或（在 IE 中不起作用）

```
$("#play").click(function() {
    var elementNumber;
    var properElement;
    for (var i = 0; i < playlistLength; i++) {
        if (listOfElements[i].type == 'video' && listOfElements[i].position == 0) {
            elementNumber = i;
        }
    };
    document.getElementById(listOfElements[elementNumber].name).play();
    properElement = listOfElements[elementNumber];
    console.log(properElement); // gives out proper element;
    setInterval(galleryElement.draw, 33, properElement.name, properElement.type, properElement.position);
    return false;
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:10:08.977

尝试

```
setInterval(function(){
  galleryElement.draw(properElement.name, properElement.type, properElement.position)
}, 33); 
```

您需要放入`properElement`要执行的函数的范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:14:55.340

如果您将字符串传递给您，`setInterval()`您将失去properElement 的范围。您必须直接传递函数调用（不带引号）：

```
setInterval(function(){
  galleryElement.draw(properElement.name, properElement.type, properElement.position)
}, 33); 
```

通常不建议将字符串传递给，`setInterval/Timeout`因为它需要通过`eval`. 始终传递函数或对函数的引用。

# iphone - 将 UIScrollView 添加到查看并发送到后面

> ID：12476696
> 
> 赞同：1
> 
> 时间：2012-09-18T12:05:41.053
> 
> 标签：iphone, objective-c, uiscrollview

我使用 Storyboard（UILabel、UIImageView）添加了一些 UI 组件。我正在尝试将 UIScrollView 放在此视图中，位于所有其他元素下方：

这是我在方法末尾的`-viewWillAppear`代码（来自我的视图控制器的代码）：

```
UIScrollView *scroll =  [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
scroll.contentSize = CGSizeMake(320, 480);
scroll.showsVerticalScrollIndicator = YES;

[self.view addSubview:scroll];
[self.view sendSubviewToBack:scroll]; 
```

我需要 a 的原因`UIScrollView`是大量文本`detailsLabel`- 我正在附加用于以编程方式处理此标签的代码：

```
 detailsLabel.text = @"Some long text taken from databse";
    [detailsLabel sizeToFit];
    detailsLabel.numberOfLines = 0;
    detailsLabel.lineBreakMode = UILineBreakModeWordWrap; 
```

我做错了什么？如何将 UIScrollView 放在主视图的所有其他元素下方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:50:30.007

试试这个：

```
UIScrollView *scroll =  [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
scroll.contentSize = CGSizeMake(320, 480);
scroll.showsVerticalScrollIndicator = YES;

[self.view insertSubview:scroll atIndex:0];

...

[self.view insertSubview:detailsLabel atIndex:1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:09:54.983

将您的代码放入`ViewDidLoad`. 然后在将标签添加`UIScrollView`到 self.View后添加标签`ViewDidLoad`。因此，默认情况下，`UIScrollView`将添加到 self.View 然后是您的标签。现在您可以在滚动视图或 self.view 上添加标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:22:00.620

我已按照[此答案](https://stackoverflow.com/a/10807589/963881)中的说明进行操作，效果很好：我已将 Identity Inspector 中的自定义类从 UIView 更改为 UIScrollView 并将这一行添加到我`-viewDidLoad`的 View Controller 文件中：

```
[(UIScrollView *)self.view setContentSize:CGSizeMake(320, 700)]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T12:42:59.403

选项一：

在 .h 中声明 detailsLabel：

```
IBOutlet UILabel * detailsLabel; // MAP IT WITH NIB or STORYBOARD 
```

在.m 中给它属性和Synthesise。

这里在 viewDidLoad 声明：

```
UIScrollView *scroll =  [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
scroll.contentSize = CGSizeMake(320, 480);
scroll.showsVerticalScrollIndicator = YES;
[self.view addSubview:scroll];
[self.view sendSubviewToBack:scroll];

[scroll addSubview:detailsLabel]; 
```

// 它应该工作。

选项二：

如果你有大量的文本要显示，那么你也可以使用 UITextView，它有内置的滚动视图。您还可以设置其文本编辑属性。

# html - chrome浏览器中的文本区域问题

> ID：12476697
> 
> 赞同：0
> 
> 时间：2012-09-18T12:05:43.240
> 
> 标签：html, google-chrome, browser

我有`textarea`属性`maxlength`ie `maxlength="20"`。**输入 10 个 ENTER 键后，它会停止输入任何字符，而在CHROME BROWSER**中 maxlength 为 20 。如果您想测试此问题，请[在此处](http://jsfiddle.net/SandeepDixit/zQqV9/)打开并按 ENTER 键 10 次。

```
<textarea row="10" cols="10" maxlength="20"></textarea> 
```

**注意：**用 ENTER 键输入字符并查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T05:50:01.847

这是因为**EnterKey**被认为返回两个字符，即**“\r\n”。**

这就是你只能按**10 次的原因，因为 maxlength 是 20。**

补充：如果你想使用 Jquery 来解决这个问题：

```
var text = $('#textbox').val();

text = text.replace(/(\r\n|\n|\r)/g,""); 
```

# javascript - Fancybox 无法处理来自 Twitter API 的图像

> ID：12476701
> 
> 赞同：3
> 
> 时间：2012-09-18T12:05:52.253
> 
> 标签：javascript, twitter, fancybox, fancybox-2

使用 Fancybox 2，下面的示例可以完美运行（省略了其他代码）

```
<a class="fancybox" href="https://si0.twimg.com/profile_images/2169856486/avatar.jpg" title="some title">
        <img src="http://a0.twimg.com/profile_images/2169856486/avatar_normal.jpg" alt="" />
</a> 
```

但下面的代码将图像加载到单独的页面上

```
<a class="fancybox" href="https://api.twitter.com/1/users/profile_image?screen_name=boris&size=original" title="some title">
        <img src="http://a0.twimg.com/profile_images/2169856486/avatar_normal.jpg" alt="" />
</a> 
```

问题似乎出在 Twitter API 提供的图像 URL 上，它返回 (301) 重定向到完整图像的实际位置。有什么方法可以让 Fancybox 处理使用重定向提供的图像并且弹出窗口仍然具有所提供图像的大小。

帮助将不胜感激。

坦率

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T07:51:14.867

由于第二个代码/链接不包含图像扩展名（jpg、gif、png），fancybox 无法确定`type`正在尝试打开的内容，因此您需要告诉它。

要么做：

**一**：将`type`选项添加到您的自定义脚本

```
 $(".fancybox").fancybox({
   type: "image"
 }); 
```

**二**：将`data-fancybox-type`属性添加到您的链接

```
<a class="fancybox" data-fancybox-type="image" href="https://api.twitter.com/1/users/profile_image?screen_name=boris&size=original" title="some title"><img src="http://a0.twimg.com/profile_images/2169856486/avatar_normal.jpg" alt="" /></a> 
```

# c# - 如何以及何时处置我的物品？

> ID：12476703
> 
> 赞同：1
> 
> 时间：2012-09-18T12:05:56.357
> 
> 标签：c#, wcf, service, dependency-injection, dispose

在我的后端服务中，我使用工作单元模式。我想知道我是否遗漏了与处理对象有关的东西。

首先，这是我到目前为止的代码，它有效。该服务只是调用一个请求处理程序：

```
 [GlobalExceptionHandlerBehaviour(typeof(GlobalExceptionHandler))]
public class CustomerService : ICustomerService
{                
    public void AddCustomer(AddCustomerRequest request)
    {
        ObjectFactory.GetInstance<AddCustomerRequestHandler>().Execute(request);            
    }       
} 
```

请求处理程序如下所示：

```
 public class AddCustomerRequestHandler
{
    private readonly IUnitOfWork _unitOfWork;
    private readonly ICustomerRepository _customerRepository;

    public AddCustomerRequestHandler(IUnitOfWork unitOfWork, ICustomerRepository customerRepository)
    {
        _unitOfWork = unitOfWork;
        _customerRepository = customerRepository;
    }

    public void Execute(AddCustomerRequest request)
    {
        var customer = new Customer(request.Id, request.CompanyName);
        _customerRepository.Add(customer);
        _unitOfWork.Commit();               
    } 
} 
```

工作单元定义如下：

```
public interface IUnitOfWork
{
    void Commit();
}

public class UnitOfWork : IUnitOfWork
{
    private readonly IDatabaseFactory<EfTrackerDbContext> _databaseFactory;
    private EfTrackerDbContext _dataContext;

    public UnitOfWork(IDatabaseFactory<EfTrackerDbContext> databaseFactory)
    {            
        _databaseFactory = databaseFactory;            
    }

    public EfTrackerDbContext DataContext
    {
        get { return _dataContext ?? (_dataContext = _databaseFactory.Get()); }
    }

    public void Commit()
    {
        DataContext.Commit();
    }       
} 
```

EfTrackerDbContext 是实际的 EF 上下文：

```
public class EfTrackerDbContext : DbContext, IUnitOfWork
{
    public DbSet<Customer> Customers { get; set; }

    public virtual void Commit()
    {
        base.SaveChanges();
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<Customer>().ToTable("Customer");
    }
} 
```

DatabaseFactory 就像：

```
public class DatabaseFactory<TContext> : DisposableObject, IDatabaseFactory<TContext> where TContext : DbContext, new()
{
    private TContext _dataContext;
    public TContext Get()
    {
        return _dataContext ?? (_dataContext = new TContext());
    }

    protected override void DisposeManagedResources()
    {
        if (_dataContext != null)
        {
            _dataContext.Dispose();
            _dataContext = null;
        }
    }
} 
```

客户存储库：

```
public interface ICustomerRepository : IRepository<Customer>
{
    IQueryable<Customer> Customers { get; }
}

public class CustomerRepository : RepositoryBase<EfTrackerDbContext, Customer>, ICustomerRepository
{
    public CustomerRepository(IDatabaseFactory<EfTrackerDbContext> databaseFactory)
        : base(databaseFactory)
    {
    }

    public IQueryable<Customer> Customers
    {
        get { return DataContext.Customers; }
    }
} 
```

如您所见，一切都被注入了。注册看起来像：

```
 For<IDatabaseFactory<EfTrackerDbContext>>().HybridHttpOrThreadLocalScoped().Use<DatabaseFactory<EfTrackerDbContext>>();
 For<IUnitOfWork>().HybridHttpOrThreadLocalScoped().Use<UnitOfWork>();
 For<ICustomerRepository>().HybridHttpOrThreadLocalScoped().Use<CustomerRepository>(); 
```

现在，问题是关于处理对象。唯一实现 IDisposable 的地方是 DatabaseFactory，其中 _datacontext 被释放。我想这还不够，所以我有以下问题：

1.  AddCustomerRequestHandler 被注入，所以如果 AddCustomer() 服务操作结束并且垃圾收集开始，它就会被释放。这可以吗，还是我应该在 AddCustomer() 操作结束时显式调用 AddCustomerRequestHandler 上的 Dispose 并让它实现 IDisposable？
2.  UnitOfWork 是否也应该实现 IDisposable，我是否必须明确地调用它？
3.  如何处置 EfTrackerDbContext ？
4.  其他备注？

简而言之，我正在寻找在服务操作结束后立即处理所有内容的正确方法。

谢谢你的建议，L

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:09:45.060

每当您使用实现 IDisposable 的东西时，您应该在不再需要它时立即处置它。如果将其用作类中的字段，请在该类中实现 IDisposable 并迭代此过程。

PS：如果您像这样打开代码分析： ![在此处输入图像描述](../Images/16c32ed13bf6a07410beaa714fa6e5d0.png)

你会得到一些免费的警告指向你：D

# java - 根据年月比较两个日期，不考虑日期

> ID：12476707
> 
> 赞同：5
> 
> 时间：2012-09-18T12:06:14.140
> 
> 标签：java, date, compare, hql, date-comparison

我需要能够比较两个日期，仅基于年份和月份（即不注意日期），以及在 JAVA 和 HQL 中的日期。

假设我需要检查是否`d1`小于或等于`d2`。这是我尝试过的：

JAVA

```
calendar.setTime(d1);
int y1 = calendar.get(Calendar.YEAR);
int m1 = calendar.get(Calendar.MONTH);
calendar.setTime(d2);
int y2 = calendar.get(Calendar.YEAR);
int m2 = calendar.get(Calendar.MONTH);
return y1 <= y2 && m1 <= m2; 
```

高品质

```
select item from Item item
where year(item.d1) <= year(:d2)
and month(item.d1) <= month(:d2) 
```

上面两段代码的算法是一样的，但是错了：

*   `2011-10 LTE 2012-09`应该返回`true`但会返回`false`，因为`2011 < 2012`但是`10 !< 09`

如果我使用 a`OR`而不是 a `AND`，它仍然是错误的：

*   `2013-01 LTE 2012-05`应该返回`false`但会返回`true`，因为`2013 !< 2012`但是`01 < 05`

那么，我应该如何处理呢？拜托，我需要它用于 JAVA 和 HQL。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T12:10:04.280

这应该有效。

```
select item from Item item
where year(item.d1) < year(:d2) or
     (year(item.d1) = year(:d2)
      and month(item.d1) <= month(:d2)) 
```

Java 也一样：

```
y1 < y2 || (y1 == y2 && m1 <= m2) 
```

您可以保留第二次检查，`y1 <= y2`但这会有点多余。

# iphone - ABAddressBookAddRecord 添加一次删除联系人失败

> ID：12476718
> 
> 赞同：0
> 
> 时间：2012-09-18T12:06:49.320
> 
> 标签：iphone, objective-c, ios

我正在尝试从通讯录中删除联系人，然后再次添加。删除没问题，但我无法添加它。没有错误。一个新创建的联系人 ( ABPersonCreate(); ) 有效。

```
ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef allContacts = ABAddressBookCopyArrayOfAllPeople(ab);
ABRecordRef contact = CFArrayGetValueAtIndex(allContacts, 0);

ABAddressBookRemoveRecord(addressBook, contact, nil);
ABAddressBookSave(addressBook, nil);

BOOL addSuccess = ABAddressBookAddRecord(addressBook, contact, &error)
// addSuccess == YES, 
// error == null

BOOL saveSuccess = ABAddressBookSave(addressBook, &error)
// saveSuccess == YES
// error == null 
```

未添加联系人！为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:23:24.837

尝试以下过程：

*   获取联系方式（即调用“ **CFArrayGetValueAtIndex(allContacts, 0)** ”时所做的操作）。
*   创建一个新联系人（将其命名为contact2），并将您获得的详细信息复制到新联系人中（使用命令“ **ABRecordSetValue(contact2, kABPersonFirstNameProperty, CFSTR("MyFirstName"), &Error)**等...）。
*   删除第一个联系人（联系人）。
*   保存通讯录。
*   将contact2 添加到通讯录。
*   保存通讯录。

希望能帮助到你。

# c# - c# .net 读取 .mdb 文件

> ID：12476723
> 
> 赞同：3
> 
> 时间：2012-09-18T12:07:20.037
> 
> 标签：c#, .net, database, file, ms-access

我有必要使用 C# .net 编写一个可以编辑特定 .mdb 文件的应用程序。

它纯粹是一个部门内的应用程序，用于读取可能不应该是 .mdb 文件的部门内文件，但我在这方面别无选择。我正在推动更改为 XML 文件，但那是另一回事。

这些文件非常有限，3 张表，每张表有 100 多条记录；所以我希望将整个数据库读入应用程序特定的对象。任何错误都将被忽略，新的数据库副本将覆盖前一个。数据库是一种非常具体的格式，我很容易验证或丢弃。

似乎有很多方法可以在 .net 中实际读取/写入 mdb，这让我感到困惑。谁能推荐一个最好的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:19:41.253

您可以尝试使用此代码 - 基于`Oledb provider`

```
var mdb = "c:\MyDB.mdb"; 
var myDataTable = new DataTable(); 
using(var connection = new OleDbConnection(....."))
{ 

//Here sample format of string connection
//"Provider=Microsoft.Jet.OLEDB.4.0;User ID=Admin;Data Source=" 
//+ mdb + ";Mode=Share Deny None;Extended Properties='';Jet OLEDB:System database='';Jet OLEDB:Registry Path='';Jet OLEDB:Engine Type=4;Jet OLEDB:Database Locking Mode=0;Jet OLEDB:Global Partial Bulk Ops=2;Jet OLEDB:Global Bulk Transactions=1;Jet OLEDB:Create System Database=False;Jet OLEDB:Encrypt Database=False;Jet OLEDB:Don't Copy Locale on Compact=False;Jet OLEDB:Compact Without Replica Repair=False;Jet OLEDB:SFP=False

connection.Open(); 
var query = "SELECT * from TABLE"; //Adjust your query

var adapter = new OleDbDataAdapter(query, connection); //This assigns the Select statement and connection of the data adapter 

OleDbCommandBuilder oleDbCommandBuilder = new OleDbCommandBuilder(adapter); //This builds the update and Delete queries for the table in the above SQL. this only works if the select is a single table. 

dadapt.Fill(MyDataTable); 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:14:05.653

我建议您使用 Jet Engine 的 ODBC 驱动程序，它可以与 ADO.NET 一起使用。

# jquery - 无法点击 jQuery 菜单项

> ID：12476726
> 
> 赞同：-1
> 
> 时间：2012-09-18T12:07:29.400
> 
> 标签：jquery, html, css

我创建了一个`jQuery`菜单，单击一个小图标时将打开该菜单。此菜单包含一些可点击的链接和一个链接，它将执行一些 js 操作并在同一菜单中创建一个新的文本框。但是当我点击链接时，菜单会自动关闭。因此，即使显示了一个文本框，在我们再次单击该图标以查看菜单之前，也无法看到它。

这是一个演示：http: [//jsfiddle.net/W2exq/1/](http://jsfiddle.net/W2exq/1/)

我使用了一些`jQuery`代码来显示和隐藏菜单以及显示文本框。那么我怎样才能保持菜单打开，除非我们在菜单外点击关闭它呢？如果您需要其他任何东西，请告诉我。

* * *

HTML：

```
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js></script>
        <link rel="stylesheet" type="text/css" href="http://tharunjose.com/stack/style.css" />
</head>
<div class="notes">
    <div class="noteTooltip">
        This link is for the special purpose of the main site.<hr />
        <a class="noteEdit" id="add_btn" href="#">Edit note</a>
        <a class="noteTrash" href="#"></a>
    </div>
</div>​ 
```

CSS：

```
.notes{
    position:relative;
    width:16px;
    height:16px;
    margin:0 auto;
    background:url(http://tharunjose.com/stack/images/icons.png) no-repeat scroll -228px -34px transparent;
}
.notes:hover{
    cursor:pointer;
    background-position:-207px -34px;
}
.noteTooltip{
    display:none;
    position:absolute;
    top:25px;
    left:-10px;
    width:130px;
    text-align:left;
    line-height:18px;
    border:2px solid #363636;
    z-index:9999;
    background:#fbfbfb;
    -webkit-border-radius:3px;
    -moz-border-radius:3px;
    border-radius:3px;
    padding:10px 10px 6px 10px;
    cursor:auto;
}
.noteTooltip:before{
    content:'';
    position:absolute;
    top:-10px;
    left:10px;
    width:0;
    height:0;
    border-left:5px solid transparent;
    border-right:5px solid transparent;
    border-bottom:8px solid #000;
    z-index:9999;
}
.noteEdit{
    color:#3ba5d5;
    text-decoration:none;
    float:left;
}
.noteTrash{
    display:block;
    float:right;
    padding:6px;
    background:url(http://tharunjose.com/stack/images/icons.png) no-repeat scroll -20px -106px transparent;
}​ 
```

JS：

```
$(document).ready(function() {  
    $(document).click(function(e) {
        $(".createNew, .username, .notes, .pageHelp, .buttons").removeClass("open");
    });
    $(".createNew, .username, .notes, .pageHelp, .buttons").click(function(e) {
        e.stopPropagation(); // this prevents it closing via document.click
        $(this).toggleClass("open");
    });

       var handler_func = function () {
        var i = (typeof this.rel != 'undefined') && (this.rel - 0) == this.rel ? this.rel : 0;
        var e = document.createElement('input');
        e.type='text';
        e.width=40;
        e.name = 'added'+i;
        this.rel = i+1;
        this.parentNode.appendChild(e);
        return false;       
        }

        var add_btn = document.getElementById('add_btn');
        if(add_btn.attachEvent)
              add_btn.attachEvent('onClick', handler_func);
        else if(add_btn.addEventListener) //Firefox & company
              add_btn.addEventListener('click', handler_func, false);
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:31:29.003

您需要在 .noteTooltip 上添加点击监听器：

```
$(".noteTooltip").click(function(e) {
    e.stopPropagation();
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:35:50.090

您需要阻止“单击”事件使 DOM 冒泡并导致它关闭您的“弹出”菜单。

这是不完美的（允许你创建多个文本元素，我不会做你所有的工作：P）但应该给你一个很好的起点：

```
$(document).ready(function() {  
    $(document).click(function(e) {
        $(".createNew, .username, .notes, .pageHelp, .buttons").removeClass("open");
    });

    $(".createNew, .username, .notes, .pageHelp, .buttons").click(function(e) {
        e.stopPropagation(); // this prevents it closing via document.click
        $(this).toggleClass("open");
    });

    $(".noteTooltip").click(function(e) {
        e.stopPropagation(); //stop the onclick call bubbling up the DOM.
        e.preventDefault(); //stop the onclick call bubbling up the DOM.
    });

    $("#add_btn").click(function(event) {
       var i = (typeof this.rel != 'undefined') && (this.rel - 0) == this.rel ? this.rel : 0,
           element = document.createElement('input');

       event.stopPropagation();  //stop the onclick call bubbling up the DOM.
       element.type='text';
       element.width=40;
       element.name = 'added'+i;
       this.rel = i+1;
       this.parentNode.appendChild(element);
       return false;   
    });

}); 
```

[`event.stopPropagation()`](http://api.jquery.com/event.stopPropagation/)防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

还有一篇关于事件冒泡的[博客文章。](http://bmarti44.wordpress.com/2011/12/26/javascript-event-bubbling-explained/)

[jsFiddle 示例](http://jsfiddle.net/W2exq/12/)。

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T12:50:40.960

您需要在`Edit Note`单击以及单击添加的文本框时停止事件传播。

只需通过您的活动`handler_func`

```
var handler_func = function (evt) 
```

和之前`return false;`在同一个函数中添加

```
e.onclick = function(e1) {
              e1.stopPropagation();
           }
evt.stopPropagation(); 
```

这将解决问题。

[演示](http://jsfiddle.net/W2exq/14/)

# lazarus - MC3100 扫描仪编程

> ID：12476729
> 
> 赞同：3
> 
> 时间：2012-09-18T12:07:33.283
> 
> 标签：lazarus, motorola

我们正在使用摩托罗拉 MC3100 移动数据终端、条码扫描仪。运行 Windows CE6.0

为了对这些进行编程，我们打算使用 Lazarus/FPC，实际上我们已经制作了一个可以在设备上运行的测试应用程序。

我们的问题是我们不知道如何访问/激活扫描仪引擎，以便扫描仪激活并返回扫描条形码的值。

我们知道摩托罗拉的 SDK 仅适用于 Visual Studio 2008，但当然这需要购买并在全新环境中进行开发。

我们认为可能存在一个 DLL 库，可以让我们执行我们需要的功能，但到目前为止，经过大量查找，我们没有任何运气。

任何人都对此（或类似）有任何经验，或者对我们有任何进一步研究的提示。我们现在处于死胡同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:39:52.150

看看链接。希望其中一个会有所帮助。

*   [http://wiki.lazarus.freepascal.org/SymScan](http://wiki.lazarus.freepascal.org/SymScan)（方法打开、执行、关闭）
*   [http://sourceforge.net/projects/lazarus-ccr/files/SymScan](http://sourceforge.net/projects/lazarus-ccr/files/SymScan)
*   [http://www.lazarus.freepascal.org/index.php/topic,3771.msg31511.html#msg31511](http://www.lazarus.freepascal.org/index.php/topic,3771.msg31511.html#msg31511)
*   [http://www.lazarus.freepascal.org/index.php/topic,8505.msg41027.html#msg41027](http://www.lazarus.freepascal.org/index.php/topic,8505.msg41027.html#msg41027)
*   [http://www.experts-exchange.com/Programming/Handhelds_-_PDAs/Windows_Mobile/Q_27037964.html](http://www.experts-exchange.com/Programming/Handhelds_-_PDAs/Windows_Mobile/Q_27037964.html)
*   [http://support.symbol.com/support/search.do?cmd=displayKC&docType=kc&externalId=13450&sliceId=&dialogID=426652298&stateId=1%200%20426650198](http://support.symbol.com/support/search.do?cmd=displayKC&docType=kc&externalId=13450&sliceId=&dialogID=426652298&stateId=1%200%20426650198)
*   [http://www.tek-tips.com/viewthread.cfm?qid=313028](http://www.tek-tips.com/viewthread.cfm?qid=313028)
*   [www.google.rs/search?q="SCNAPI32.DLL"+函数](http://www.google.rs/search?q=%22SCNAPI32.DLL%22%20functions)

# javascript - Win 8 应用程序在手指滑动时触发事件

> ID：12476731
> 
> 赞同：1
> 
> 时间：2012-09-18T12:07:36.283
> 
> 标签：javascript, touch, windows-runtime, winjs

当用户在指定的 div 上滑动手指时，我想触发一个事件。例如：当用户在 div 上滑动手指时，应调用特定函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:14:48.023

这将添加事件处理程序：

```
document.getElementById('divId').addEventListener('mspointermove', handler, false); 
```

然后您必须识别它是触摸事件还是鼠标事件。

```
function handler(event) {
    if (eventObject.pointerType === 2) {
        // touch event
    }
} 
```

这是触摸事件的[完整指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh968035.aspx)。msgesturestart/change/end 可能是您想要使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:25:27.320

您需要使用 WinRT 的完整手势识别器功能以获得最佳体验。MSDN 在[这里](http://code.msdn.microsoft.com/windowsapps/Manipulations-and-gestures-26918bb3)有一个完整的示例。然后，这将允许您获取 DIV 的操作并根据需要使用它。一个简单的演练就[在这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh465869.aspx)。注意需要：

1.  创建一个 MSGesture 对象
2.  捕获 MSPointerDown，并将指针 ID 添加到 1 中创建的手势实例。

另一个考虑因素是查看您的体验并考虑是否使用[强制捕捉点](http://code.msdn.microsoft.com/windowsapps/Scrolling-panning-and-47d70d4c)，并且滚动条中的多个项目可能适合您的体验。

一些示例代码：

```
<div id="touchMe" style="width:500px; height: 500px; background-color: yellow; "></div> 
```

JavaScript，当 touchMe 可用时运行：

```
var v = document.getElementById("touchMe");
v.addEventListener("MSGestureStart", function () {
    console.log("foo");
});

var gestureThing = new MSGesture();
gestureThing.target = v;
v.dooHicker = gestureThing;

v.addEventListener("MSPointerDown", function (e) {
    gestureThing.addPointer(e.pointerId);
    console.log("down");
});

v.addEventListener("click", function () {
    console.log("click");
}); 
```

# perl - 在perl中访问哈希哈希的特定键？

> ID：12476732
> 
> 赞同：-2
> 
> 时间：2012-09-18T12:07:38.023
> 
> 标签：perl, hash-of-hashes

```
%HoH = (
Group1=> {
    member1=> "fred",
    member2=> "barney",
},
 Group2 => {
    member1   => "george",
    member2   => "jane",  
},

); 
```

如何访问**HoH**的第二个值或第二个键 我想访问每个组键的**member2**及其关联值。我不知道我的键名，我只知道它是第二个键

```
 foreach $key (keys %HoH){
        foreach $value (keys %{$HoH{$key}}){
            print $key."\n";
         }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:47:46.310

您既不能访问“第二个键”也不能访问“第二个值”，因为哈希元素没有特定的顺序。`print Dumper(\%HoH);`可能会给你另一个哈希元素的顺序，而不是你初始化器使用的顺序。如果你想要一个特定的顺序，你应该使用数组的散列。

```
my %HoH = (
    Group1=> [ "fred", "barney" ],
    Group2 => [ "george", "jane" ]
); 
```

之后，您可以访问 "fred" as`$HoH{Group1}->[0]`和 "jane" as `$HoH{Group2}->[1]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:35:39.427

```
foreach my $key (keys %HoH)  
{  
    foreach my $value (keys %{$HoH{$key}})  
    {  
        if($value eq "member2") 
        {  
            print $HoH{$key}{$value}."\n";  
        }  
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T12:37:32.547

以下打印每个`member2`键的值（另请参见[perldoc perldsc](http://perldoc.perl.org/perldsc.html#HASHES-OF-HASHES)）：

```
use warnings;
use strict;

my %HoH = (
Group1=> {
    member1=> "fred",
    member2=> "barney",
},
 Group2 => {
    member1   => "george",
    member2   => "jane",  
},

);

for (keys %HoH) {
    print "$HoH{$_}{member2}\n";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T14:02:16.560

如上所述，您不知道您实际上想要第二个键，因为您无法确定哈希键的存储顺序。`keys`保证为一组一致的键返回*相同*的顺序，但不是可能按照您声明它们的顺序。

但是，您可以查看[`Tie::IxHash`](http://search.cpan.org/perldoc?Tie%3a%3aIxHash)有序哈希。但如果你真的想关联两个哈希之间的数据，你可能需要重新考虑结构，而不是依赖顺序。

还有，`$member[$i-1]`比`$hash{'member'.$i}`. 除了更快，它只是更好的结构。如果您发现自己使用“索引”键，这很好地表明您想要一个*列表*而不是哈希。

从您向我展示的内容来看，这似乎对您的数据结构更有意义：

```
my @groups 
    = ( [ qw<fred   barney> ]
      , [ qw<george jane>   ]
      ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T12:40:01.287

以另一种方式。

```
%HoH = (
Group1=> {
    member1=> "fred",
    member2=> "barney",
},
 Group2 => {
    member1   => "george",
    member2   => "jane",
},
);

print map { "$HoH{$_}{'member2'}\n" } keys %HoH; 
```

# c++ - 两个 std::List 之间的距离

> ID：12476740
> 
> 赞同：1
> 
> 时间：2012-09-18T12:08:07.307
> 
> 标签：c++, algorithm

我有两个`std::list`，每个都有一个位置向量`m_Pos`。我是新手`std::list`，我会计算这两个列表中每个索引之间的距离并将它们存储在一个数组中。这就是我所做的，我不知道这是否正确

问题是距离不是有序方式的 dir 向量，例如，我想存储位置 Acurrent 和 Aprev、Bcurrent、Bprev 之间的距离，以便按顺序存储在 dir 向量中，以便稍后在他们，所以我说 dir[0] 是 Acurr，Arev..etc 之间的距离

```
if(objs.size() == m_prev_objs.size())
{
    std::vector<Vec2f> dir;
    std::list< Obj >::iterator prevIter = m_prev_objs.begin();
    std::list< Obj >::iterator currIter = objs.begin();

    //  Vec2f dis = currIter->m_Pos - prevIter->m_Pos;  
    for (std::list< Obj >::iterator currIter = objs.begin(); currIter != objs.end(); ++currIter ) 
    {

        dir.push_back(currIter->m_Pos - prevIter->m_Pos);

    }

           prevIter++;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T12:25:56.350

考虑使用标准算法，注意如果您可以访问 C++11，则操作可以是 lambda

```
 inline Vec2f action(const Objs& o1, const Objs& o2) {
       return o1->m_Pos
            - o2->m_Pos;
 }

 //elsewhere
 std::vector<Vec2f> dir;
 dir.reserve(objs.size());

 std::transform(
      objs.begin(),        
      objs.end(), 
      m_prev_objs.begin(), 
      std::back_inserter(dir),
      action
 ); 
```

[http://en.cppreference.com/w/cpp/algorithm/transform](http://en.cppreference.com/w/cpp/algorithm/transform)

[http://en.cppreference.com/w/cpp/iterator/back_inserter](http://en.cppreference.com/w/cpp/iterator/back_inserter)

# objective-c - 从静态库手动创建框架

> ID：12476750
> 
> 赞同：11
> 
> 时间：2012-09-18T12:08:56.123
> 
> 标签：objective-c, ios, frameworks, static-libraries

我对从静态库（例如）手动创建框架有疑问`LibraryName`。我测试了这个解决方案：

*   创建的文件夹`LibraryName.framework`
*   `LibraryName.framework/Headers`从源库创建子文件夹并复制标题
*   重命名`LibraryName.a`为文件`LibraryName.framework/LibraryName`

它在 Xcode 下工作。但我有一个问题：这样做是不是很好？

——
问候
亚当

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:14:11.830

是的，这很好。您甚至可以将静态库与其依赖项链接起来，并创建一个动态库。两种解决方案都可以。

# rest - ASP.NET Web API 授权和身份验证

> ID：12476773
> 
> 赞同：18
> 
> 时间：2012-09-18T12:10:25.093
> 
> 标签：rest, authentication, authorization, oauth-2.0, asp.net-web-api

我正在尝试构建一个安全的 asp.net web api。您可以找到很多方法来保护您的 API，但我想知道在我的案例中实现这一点的最佳方法或“行业标准”是什么。

这些是我的要求 - API 将被少数第三方开发人员用于网站/移动应用程序等。 - 想要使用此 API 的开发人员必须获得访问 API 的密钥（授权） - 用户（访客/消费者）必须登录第三方应用程序才能查看他们的个性化信息。- API 将使用 ASP 成员数据库来管理/验证用户。

我知道可以使用 http 基本身份验证来对用户进行身份验证，但是如何实现 API 的授权部分呢？

OAuth 2.0 是一个解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-18T12:24:46.417

有一篇很好的文章描述了使用令牌/密钥进行身份验证/授权：

*   [使您的 ASP.NET Web API 安全](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)

它还描述了有关 ASP.NET Web API 安全性的其他一些良好做法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-18T12:48:21.760

我还建议使用可以支持以下内容的[Thinktecture.IndentityModel.40](https://github.com/thinktecture/Thinktecture.IdentityModel.40)库：

**根据**

*   Base64Url 编码
*   纪元日期时间转换
*   随机数生成
*   时间常数字符串比较

**索赔**

*   匿名索赔本金
*   认证即时索赔
*   基于声明的授权

**持续的**

*   处理算法、日期时间格式、JWT、SWT、WS-Security 和 WS-Trust 时有用的常量

**扩展方法**

*   XML（往返于 XmlReader、XmlDocument、XDocument）
*   WS-Trust RSTR
*   安全令牌转换
*   X.509 证书

# mysql - 多个插入事务中的脏读或幻读？

> ID：12476780
> 
> 赞同：3
> 
> 时间：2012-09-18T12:10:50.930
> 
> 标签：mysql, transactions

我了解[隔离级别](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29#Dirty_reads_.28Uncommitted_Dependency.29)的维基百科页面上为“脏读”和“幻读”给出的示例。但是，我不确定如何对以下情况进行分类，以及应用什么隔离级别或不同的策略来避免这种情况。

1.  事务 1：在表 A 中插入行
2.  事务 2：选择表 A 中的行
3.  事务 2：根据之前读取的内容选择表 B 中的行
4.  ~~事务 2：提交~~
5.  事务 1：在表 B 中插入行
6.  事务 1：提交

问题是事务 2 在 T1 在两个表中完成写入之前选择了 B 中的某些内容。第 3 步中的选择可能需要选择 5 中插入的行才能正确。这是脏读，幻读还是两者都不是。READ_COMMITTED 隔离级别是否足以避免问题？据我了解，使用 READ_COMMITTED T2 不应读取 T1 在此时插入的新行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:48:57.507

这是一个*脏读*。在`READ_COMMITTED`隔离级别，步骤 2 中的查询不会返回您在步骤 1 中插入但尚未提交的行，从而防止尝试访问尚未插入的数据失败。

*幻读*意味着您在事务 2 中执行了两次*相同*的查询并获得了不同的结果集。

# javascript - 谷歌地图 - 街景自定义叠加链接

> ID：12476785
> 
> 赞同：-1
> 
> 时间：2012-09-18T12:11:24.533
> 
> 标签：javascript, google-maps, google-static-maps, google-street-view

有谁知道是否可以将点击事件（例如链接）添加到谷歌街景上的自定义叠加层？

在[文档](https://developers.google.com/maps/documentation/javascript/streetview#StreetViewOverlays)中它显示了这个[例子](https://google-developers.appspot.com/maps/documentation/javascript/examples/streetview-overlays)：

如果您“切换街景”，您可以看到黄色的自定义标记。那么我想知道是否可以向标记添加点击事件以打开链接甚至更新页面上的单独内容块？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-02T19:28:33.457

尝试这个：

```
google.maps.event.addListener(marker, 'click', function() {
    console.log('clicked');             
}); 
```

# java - 如何逐行打印另一个jar中的日志？

> ID：12476786
> 
> 赞同：0
> 
> 时间：2012-09-18T12:11:31.057
> 
> 标签：java, logging, jar, log4j

我创建了一个包含 2 个 Jar 文件的 Java 应用程序。Jar1 用于初始化和运行 Jar2，使用以下代码：

```
Process process = runtime.exec( "java -jar Jar2.jar" );
printLogs( process );
.
.
.
private static boolean printLogs( Process process ) {
    try {
        BufferedInputStream logStream = new BufferedInputStream( process.getInputStream() );
        String logs = "";
        int buffer = 0;

        while ( ( buffer = logStream.read() ) != -1 ) {
            logs += (char)buffer;
        }

        if( !logs.isEmpty() ) logger.debug( logs );
    } catch (IOException e) {}  

    return true;
} 
```

我使用 Log4J 从 Jar2 打印许多日志，即

```
logger.debug( "..." ); 
```

但是 Jar2 中的日志都没有打印到控制台。我发现这是因为日志返回到 Jar1 而不是控制台，所以我使用上面的代码打印了返回流。现在可以很好地打印日志，但是在所有 Jar2 进程结束之后，所有日志都会在 Jar1 中一次打印。

问题是：**我可以及时打印 Jar2 中的每个日志行，而不是等待所有 Jar2 进程结束吗？**

因为 Jar2 是一个漫长的过程，我可以在应用程序处理时看到这些日志，这一点很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:33:08.580

整个事情非常混乱。你不应该需要两个单独的档案和`Runtime.exec()`

但是，通常用于`BufferedReader.readLines`阅读文本行。请注意，如果您在阅读时记录每一行，问题就会消失：

```
BufferedReader input = new BufferedReader(
  new InputStreamReader(process.getInputStream())
);
String line = null;

while ((line = input.readLine()) != null) {
  System.out.println(line);
} 
```

您的代码等待子进程完成，因为您在流结束后记录了该行（即在子进程终止后）

这是一个演示程序，它使用一个长时间运行的 Ruby 程序作为监视进程

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class Subprocess {

    static final String[] program = new String[] {
        "ruby",
        "-e" ,
        "(1..5).each{|i|sleep 1;puts i;STDOUT.flush}"
    };

    public static void main(String[] args) throws IOException {
        ProcessBuilder builder = new ProcessBuilder(program);
        builder.redirectErrorStream();

        Process child = builder.start();

        String line = null;
        BufferedReader in = new BufferedReader(
                new InputStreamReader(child.getInputStream()));

        while ((line = in.readLine()) != null)
            System.out.println(line);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:24:31.217

您的代码似乎在等待实际写入日志之前`logStream`到达`EOF`（在进程退出时发生）。尝试重构它以逐个字符地读取它，然后在您看到换行符时记录累积的字符缓冲区（`EOF`当然还有 ，所以您会得到最后一行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T17:15:12.053

在这篇文章的帮助下，我能够解决这个问题：

[读取 system.in 时，Runtime.exec 永远不会返回](https://stackoverflow.com/questions/4741878/redirect-runtime-getruntime-exec-output-with-system-setout)

我也使用过**ProcessBuilder**。

# php - 如果条件问题嵌套

> ID：12476787
> 
> 赞同：-4
> 
> 时间：2012-09-18T12:11:36.310
> 
> 标签：php

我有这部分代码，我使用它来防止查询提交两次！现在，这是我用来使它工作的查询，它工作。

```
 $form_secret = isset($_POST["form_secret"])?$_POST["form_secret"]:'';    
    $query = "INSERT INTO coupon (user_id,points) VALUES ('$user_id','$points')";
    $result=mysql_query($query);

    if ($points == 250) 
    { 
       $url="http://testext.i-movo.com/api/receivesms.aspx?".$str_from.$str_zip.$phone.$str_time.$date1.$str_msg;
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        $output = curl_exec($ch);
        curl_close($ch);
        return $output;
    }
    else if ($points == 500) 
    {
        $url="http://testext.i-movo.com/api/receivesms.aspx?".$str_from.$str_zip.$phone.$str_time.$date1.$str_msg;
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        $output = curl_exec($ch);
        curl_close($ch);
        return $output;
    }
    else 
    {
        echo "We are sorry, you don't possess enough points in order to take the coupon";   
    } 
```

完美到现在！然后我需要的是防止重复提交，因此我在这里使用此代码，但问题是，当我将上述所有代码放入此代码时，它不起作用..任何人请告诉我如何统一这个两个代码？谢谢..

```
if(isset($_SESSION["FORM_SECRET"])) 
{
    if(strcasecmp($form_secret, $_SESSION["FORM_SECRET"]) === 0) 
    {
        /*Put your form submission code here after processing the form data, unset the secret key from the session*/
        unset($_SESSION["FORM_SECRET"]);
    }
    else 
    {
        //Invalid secret key
    }
} 
else 
{
    //Secret key missing
    echo "Form data has already been processed!";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:15:46.727

`$_SESSION["FORM_SECRET"]`默认情况下不会设置，因此您永远不能首先提交表单。

反转过程。为表单提供一个密钥，并在提交表单时将该密钥存储在会话中。然后，在下一次提交时，您可以检查是否`$_SESSION["FORM_SECRET"]`已设置（并且与提交的密码相同），因此您将知道这是同一表单的第二次提交。

# wordpress - 您如何找到某人正在使用的 wordpress 主题？

> ID：12476789
> 
> 赞同：0
> 
> 时间：2012-09-18T12:11:46.450
> 
> 标签：wordpress, themes

您如何找到某人正在使用的主题，例如官方 wordpress 博客使用什么主题？

以下是链接：

```
http://en.blog.wordpress.com

http://en.blog.wordpress.com/2006/08/17/forgotten-birthday/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:22:48.003

正在使用的主题称为 h4。

您可以通过查看样式表所在的位置来发现这一点。此页面的样式表代码是

```
<link rel="stylesheet" type="text/css" href="http://s2.wp.com/wp-content/themes/h4/style.css?m=1345845332g&amp;5" media="screen" /> 
```

所以你可以看到主题存储在`wp-content/themes/h4`.

我会假设 h4 是一个自定义主题，但不会公开提供。

**编辑**

该网站对于查找 wordpress 主题也很有用，因为您只需输入 url，它就会为您从 CSS 中提取所有元信息（如果有的话）。

[http://whatwpthemeisthat.com/](http://whatwpthemeisthat.com/)

# android - 无法删除标题栏？

> ID：12476790
> 
> 赞同：0
> 
> 时间：2012-09-18T12:11:48.837
> 
> 标签：android

我有一个布局，我希望布局在没有标题栏的情况下显示在整个屏幕上。我的活动的 onCreate 方法：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.home);

    } 
```

仍然在顶部显示灰色标题栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:16:01.287

在清单文件中设置`android:theme="@android:style/Theme.NoTitleBar"`应用程序级别。

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/name"
        android:theme="@android:style/Theme.NoTitleBar" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:13:25.780

您可以通过在应用程序清单中指定标题栏来禁用它。

`android:theme="@android:style/Theme.NoTitleBar"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:27:24.530

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setLayout(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);// try  this
    setContentView(R.layout.home); 
```

# excel - VBA 的日期在 Excel 2011 中不起作用？

> ID：12476793
> 
> 赞同：1
> 
> 时间：2012-09-18T12:12:09.180
> 
> 标签：excel, vba, macos, excel-2011

这是我的代码，我正在尝试，它可以在 PC 上运行，但不能在 Mac 上运行，运行此代码并创建一个 Excel 表，命名，添加一个选项卡，更改所述选项卡的颜色，更改名称所述选项卡，然后将数据转置，同时保持单元格的格式以及单元格的宽度和高度到新的工作表。

这在 PC 上有效....但是当我使用 Mac 时，它没有。

我进入参考文献，这就是我所看到的。

![在此处输入图像描述](../Images/0b629356d92490fe8aa1f154cd5d5e77.png)

我看到 Ref 编辑控件，并且缺少 Microsoft 脚本运行时。我禁用了两者，脚本仍然给我一个错误：

```
wbBK2.SaveAs Dir & Application.PathSeparator & "Open Order Report -" & Format(Date, "mm-dd-yyyy") & ".xlsx" 
```

该错误发生在`(Date, "mm-dd-yyyy")`特别是**日期**部分。我无法弄清楚为什么会诚实地发生这种情况。如果有人可以仔细阅读并给我答案和解决方案，将不胜感激。

我得到的错误是`Error '9 Subscript Out Of Range`我看不出这个错误只出现在 Mac 而不是 PC 上的原因。

```
Option Explicit

Sub OpenOrderReportExport()

    Dim wsJL As Worksheet   'Jobs List
    Dim wsPOT As Worksheet  'PO Tracking
    Dim wsTNO As Worksheet  'Tel-Nexx OOR
    Dim wsDOO As Worksheet  'Dakota OOR
    Dim wbBK1 As Workbook   'Open Order Report
    Dim wbBK2 As Workbook   'New Workbook
    Dim wsWS1 As Worksheet  'Sheet1
    Dim wsWS2 As Worksheet  'Sheet2
    Dim wsWS3 As Worksheet  'Sheet3
    Dim wsWS4 As Worksheet  'Sheet4
    Dim CurrentFile As String, NewFileType As String, NewFile As String, Dir As String, lastrow As Long

    Set wsJL = Sheets("Jobs List")      'Jobs List
    Set wsPOT = Sheets("PO Tracking")   'PO Tracking
    Set wsTNO = Sheets("Tel-Nexx OOR")  'Tel-Nexx OOR
    Set wsDOO = Sheets("Dakota OOR")    'Dakota OOR
    Set wbBK1 = ThisWorkbook
    Set wbBK2 = Workbooks.Add           'New Workbook
    Set wsWS1 = wbBK2.Sheets("Sheet1")  'Sheet1
    Set wsWS2 = wbBK2.Sheets("Sheet2")  'Sheet2
    Set wsWS3 = wbBK2.Sheets("Sheet3")  'Sheet3

        Application.ScreenUpdating = False    ' Prevents screen refreshing.
        CurrentFile = ThisWorkbook.FullName
        NewFileType = "Excel Files 2007 (*.xlsx)"
        Dir = ThisWorkbook.path & Application.PathSeparator & "Reports"
        wbBK2.SaveAs Dir & Application.PathSeparator & "Open Order Report -" & Format(Date, "mm-dd-yyyy") & ".xlsx"
        Sheets.Add After:=Sheets(Sheets.Count)

    Set wsWS4 = wbBK2.Sheets("Sheet4")  'Sheet4

        With wbBK2
            Dim Sht As Worksheet
                For Each Sht In Worksheets
                    Sht.Tab.Color = 255
                Next
        End With

        Sheets("Sheet1").Name = "Jobs List"
        Sheets("Sheet2").Name = "PO Tracking"
        Sheets("Sheet3").Name = "Dakota OOR"
        Sheets("Sheet4").Name = "Tel-Nexx OOR"

        With wbBK1
            'Jobs List Export
            lastrow = wsJL.Range("B" & Rows.Count).End(xlUp).Row
            wsJL.Range("A2:N2").Copy
            wsWS1.Range("A1").PasteSpecial xlPasteAll
            wsJL.Range("A3:N" & lastrow).Copy
            wsWS1.Range("A2").PasteSpecial xlPasteValuesAndNumberFormats
            wsWS1.Range("A2").PasteSpecial xlPasteColumnWidths
            wsJL.Range("B3:N" & lastrow).Copy
            wsWS1.Range("B2").PasteSpecial xlPasteFormats
            wsWS1.Columns("A").Delete

            'Tel-Nexx Export
            lastrow = wsTNO.Range("B" & Rows.Count).End(xlUp).Row
            wsTNO.Range("A2:Q2").Copy
            wsWS2.Range("A1").PasteSpecial xlPasteAll
            wsTNO.Range("A3:Q" & lastrow).Copy
            wsWS2.Range("A2").PasteSpecial xlPasteValuesAndNumberFormats
            wsWS2.Range("A2").PasteSpecial xlPasteColumnWidths
            wsTNO.Range("B3:Q" & lastrow).Copy
            wsWS2.Range("B2").PasteSpecial xlPasteFormats
            wsWS2.Columns("A").Delete

            'Dakota Export
            lastrow = wsDOO.Range("B" & Rows.Count).End(xlUp).Row
            wsDOO.Range("A2:O2").Copy
            wsWS3.Range("A1").PasteSpecial xlPasteAll
            wsDOO.Range("A3:O" & lastrow).Copy
            wsWS3.Range("A2").PasteSpecial xlPasteValuesAndNumberFormats
            wsWS3.Range("A2").PasteSpecial xlPasteColumnWidths
            wsDOO.Range("B3:O" & lastrow).Copy
            wsWS3.Range("B2").PasteSpecial xlPasteFormats
            wsWS3.Columns("A").Delete

            'PO Tracking Export
            lastrow = wsPOT.Range("B" & Rows.Count).End(xlUp).Row
            wsPOT.Range("A2:K2").Copy
            wsWS4.Range("A1").PasteSpecial xlPasteAll
            wsPOT.Range("A3:K" & lastrow).Copy
            wsWS4.Range("A2").PasteSpecial xlPasteValuesAndNumberFormats
            wsWS4.Range("A2").PasteSpecial xlPasteColumnWidths
            wsPOT.Range("B3:K" & lastrow).Copy
            wsWS4.Range("B2").PasteSpecial xlPasteFormats
            wsWS4.Columns("A").Delete
        End With

        With wsWS1
            .Activate
            .Range("A1").Select
        End With
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:26:51.007

**缺少**的引用是导致问题的原因。删除那里的复选标记，基本的东西`date`就会重新开始工作。如果这些引用对您正在运行的代码至关重要，您将不得不搜索 Mac 等效项

有关参考的更多信息 - 通常解决“缺失”可以修复它，但是，从[这里](http://forums.devx.com/archive/index.php/t-63738.html)

您所描述的是典型的损坏引用。这可能是由于引用的文件是不同的版本或位于开发代码的机器和客户端机器之间的不同位置。我们公司还尝试保持所有机器的配置方式相同，但我发现这基本上是不可能管理的。

打开任何代码模块（或使用 Ctrl-G 打开调试窗口，前提是您尚未选择“将调试窗口保持在顶部”选项）。选择工具 | 来自菜单栏的引用。检查所有选定的参考。

如果任何选定的参考文献前面有“MISSING:”，请取消选择它们，然后退出对话框。如果您确实需要刚刚取消选择的参考（您可以通过编译所有模块来判断），请返回并重新选择它们。

如果没有“MISSING：”，请随机选择一个附加参考，退出对话框，然后返回并取消选择刚刚添加的参考。如果这不能解决问题，请尝试尽可能多地取消选择已选择的引用（Office 可能不允许您全部取消选择），退出对话框，然后返回并重新选择刚刚取消选择的引用。（注意：在删除它们之前写下引用的内容，因为当您返回时它们的顺序会有所不同）

是的，消除歧义为 VBA.xxxx 将起作用，因为 Excel 不再需要查看所有引用。

# django - Django Celery 时区配置错误或错误

> ID：12476794
> 
> 赞同：3
> 
> 时间：2012-09-18T12:12:11.927
> 
> 标签：django, timezone, celery, django-celery

我将我的 Django 项目（从`celery==2.5.5`and `django-celery==2.5.5`）更新为`celery==3.0.7`and `django-celery==3.0.6`。然后奇怪的事情发生了。

我注意到的第一件事是 Django Celery Admin 界面中的每个日期/时间都偏移了 3 个小时。因为我`TIME_ZONE = 'Europe/Sofia'`现在是`UTC/GMT +3`几个小时，所以我认为问题与时区有关。

我查看了 celerycam 日志，发现了这个

```
UPDATE "djcelery_workerstate" SET "hostname" = 'three', "last_heartbeat" = '2012-09-18 17:57:49.000701+03:00' WHERE "djcelery_workerstate"."id" = 1 ; args=(u'three', u'2012-09-18 17:57:49.000701+03:00', 1) 
```

`last_heartbeat`不正确它必须是`2012-09-18 14:57:49.000701+03:00`或`2012-09-18 11:57:49.000701+00:00`

也许某些函数期望 datetime 不知道时区，但传递的日期时间实际上是知道时区的。

CeleryCam 日志中的错误也证实了我的想法，该错误仅在重试任务时发生！任务有这个`@task(default_retry_delay = 30, max_retries = 60)`装饰器。

这是错误：

```
[2012-09-18 14:46:54,001: ERROR/MainProcess] Error in timer: ValueError('Not naive datetime (tzinfo is already set)',)
Traceback (most recent call last):
  File "/opt/pythonenv/TICKETS/local/lib/python2.7/site-packages/celery/utils/timer2.py", line 92, in apply_entry entry()
  File "/opt/pythonenv/TICKETS/local/lib/python2.7/site-packages/celery/utils/timer2.py", line 48, in __call__ return self.fun(*self.args, **self.kwargs)
  File "/opt/pythonenv/TICKETS/local/lib/python2.7/site-packages/celery/utils/timer2.py", line 149, in _reschedules return fun(*args, **kwargs)
  File "/opt/pythonenv/TICKETS/local/lib/python2.7/site-packages/celery/events/snapshot.py", line 71, in capture self.state.freeze_while(self.shutter, clear_after=self.clear_after)
  File "/opt/pythonenv/TICKETS/local/lib/python2.7/site-packages/celery/events/state.py", line 225, in freeze_while return fun(*args, **kwargs)
  File "/opt/pythonenv/TICKETS/local/lib/python2.7/site-packages/celery/events/snapshot.py", line 68, in shutter self.on_shutter(self.state)
  File "/opt/pythonenv/TICKETS/local/lib/python2.7/site-packages/django/db/transaction.py", line 209, in inner return func(*args, **kwargs)
  File "/opt/pythonenv/TICKETS/local/lib/python2.7/site-packages/djcelery/snapshot.py", line 139, in on_shutter self._autocommit(_handle_tasks)
  File "/opt/pythonenv/TICKETS/local/lib/python2.7/site-packages/djcelery/snapshot.py", line 115, in _autocommit fun()
  File "/opt/pythonenv/TICKETS/local/lib/python2.7/site-packages/djcelery/snapshot.py", line 133, in _handle_tasks self.handle_task(task)
  File "/opt/pythonenv/TICKETS/local/lib/python2.7/site-packages/djcelery/snapshot.py", line 74, in handle_task "eta": maybe_make_aware(maybe_iso8601(task.eta)),
  File "/opt/pythonenv/TICKETS/local/lib/python2.7/site-packages/djcelery/utils.py", line 74, in maybe_make_aware return make_aware(value)
  File "/opt/pythonenv/TICKETS/local/lib/python2.7/site-packages/djcelery/utils.py", line 52, in make_aware value = timezone.make_aware(value, timezone.utc)
  File "/opt/pythonenv/TICKETS/local/lib/python2.7/site-packages/django/utils/timezone.py", line 269, in make_aware return timezone.localize(value, is_dst=None)
  File "/opt/pythonenv/TICKETS/local/lib/python2.7/site-packages/pytz/__init__.py", line 231, in localize raise ValueError('Not naive datetime (tzinfo is already set)')
ValueError: Not naive datetime (tzinfo is already set) 
```

在 Django/Celery 更新后，我删除了所有数据库表并制作了 syncdb

我的 Django 项目的时区设置是：

```
TIME_ZONE = 'Europe/Sofia'
USE_TZ = True 
```

Django/Celery 设置为：

```
# RabbitMQ Broker
BROKER_HOST                = 'localhost'
BROKER_PORT                = 5672
BROKER_VHOST               = 'tixgate'
BROKER_USER                = 'tixgate'
BROKER_PASSWORD            = '*******'

# Redis Result Backend
CELERY_RESULT_BACKEND      = 'redis'
CELERY_REDIS_HOST          = 'localhost'
CELERY_REDIS_PORT          = 6379
CELERY_REDIS_DB            = 4
CELERY_REDIS_PASSWORD      = '*******'

CELERY_SEND_EVENTS         = True
CELERY_TASK_RESULT_EXPIRES = 60 * 60 * 24 # 1 day
CELERY_ALWAYS_EAGER        = False 
```

而且我没有设置`CELERY_ENABLE_UTC`或`CELERY_TIMEZONE`明确

编辑：问题仍然存在`celery==3.0.9`并且`django-celery==3.0.9`

编辑：顺便`celeryev`显示正确的日期时间（我假设在格林威治标准时间）

编辑：我使用 PostgreSQL 数据库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:09:49.200

似乎这应该在新版本中修复，并且建议使用临时解决方法分支 3.0 [https://github.com/celery/django-celery/issues/183#issuecomment-10846821](https://github.com/celery/django-celery/issues/183#issuecomment-10846821)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-13T10:59:39.857

如果你（如我）得到这个问题也可能出现

```
TIME_ZONE = 'UTC'

...

CELERY_TIMEZONE = 'Europe/Moscow' 
```

在 Django 中`settings.py`。这两个字符串可以位于这个大型`settings.py`配置文件的不同部分，在这种情况下，Celery beat（例如）将向您显示时区已更改的消息。类似的东西：`Timezone changed from 'UTC' to 'Europe/Moscow'`但您将看到的真实节拍时间仍将是 UTC。要修复它，只需设置正确的 Django`TIME_ZONE`设置：

```
TIME_ZONE = 'Europe/Moscow' 
```

芹菜会捡起来的！

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:36:42.710

至少根据[发行说明](http://docs.celeryproject.org/en/latest/changelog.html#id4)，时区错误已在 .0.8 和 .0.9 中修复。

使用 celery 3.09 和 django-celery 3.0.9

# hibernate - 在实体类中使用命名查询的最佳实践是什么？

> ID：12476799
> 
> 赞同：2
> 
> 时间：2012-09-18T12:12:16.373
> 
> 标签：hibernate

我在带有注释的 Hibernate Entity 类中使​​用命名查询。
如果每个实体类有多个查询，我应该遵循哪些最佳实践？

```
Note: We have ruled the idea of putting queries in any property file or hbm.xml file 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:36:14.520

```
@Entity
@NamedQueries({@NamedQuery(name = User.byUsername, query = "select u from User u where u.username = :username"),
        @NamedQuery(name = User.follows, query = "select u from Follow as f inner join f.following as u where f.user = :user")})
public final class User extends Base implements UserDetails {

   static public final String byUsername = "User.byUsername";
   static public final String follows = "User.follows";
...
} 
```

然后您可以`User.byUsername`在其他任何地方引用 etc，因此只有一个字符串引用。你得到了所有预测智能文本的好处。如下所示：

```
Session session = sessionFactory.getCurrentSession();
Query query = session.getNamedQuery(User.follows); 
```

# macos - 如何在 Mac OS 上获得峰值内存？

> ID：12476804
> 
> 赞同：8
> 
> 时间：2012-09-18T12:12:20.503
> 
> 标签：macos, delphi, memory, delphi-xe2

在 Windows 中，我可以通过调用 GetProcessMemoryInfo 来获取峰值内存使用情况

```
function TProcess.Peek: Cardinal;
var
  PMC: PPROCESS_MEMORY_COUNTERS;
  PMCSize: Cardinal;
begin
  PMCSize := SizeOf(PROCESS_MEMORY_COUNTERS);
  GetMem(PMC, PMCSize);
  try
    PMC^.cb := PMCSize;
    if GetProcessMemoryInfo(FHandle, PMC, PMCSize) then
      Exit(PMC^.PeakWorkingSetSize)
    else
      Exit(0);
  finally
    FreeMem(PMC);
  end;
end; 
```

Mac OS 相当于什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-05-08T13:11:44.527

你可以`/usr/bin/time -l <cmd>`这样使用：

```
/usr/bin/time -l sleep 3
        3.00 real         0.00 user         0.00 sys
    552960  maximum resident set size                  <--- this one (in bytes)
         0  average shared memory size
         0  average unshared data size
         0  average unshared stack size
       144  page reclaims
         0  page faults
         0  swaps
         0  block input operations
         0  block output operations
         0  messages sent
         0  messages received
         0  signals received
         0  voluntary context switches
         2  involuntary context switches 
```

# java - 返回带有 Jersey 的字符串的 JSON 表示

> ID：12476806
> 
> 赞同：14
> 
> 时间：2012-09-18T12:12:48.337
> 
> 标签：java, javascript, json, dojo, jersey

我即将用 Jersey 设置一个 REST-Webservice。目前，我对 JSON 中字符串或其他值类型的正确表示有点困惑。这里有两个片段：

```
@GET
@Path("user")
@Produces( MediaType.APPLICATION_JSON)
public User user() {
    return new User("reini", "admin");
} 
```

在浏览器中调用此方法将显示一个“好”的 JSON 字符串，如下所示：

```
{"name":"reini","role":"admin"} 
```

我的第二种方法如下所示：

```
@GET
@Path("hello/{name}")
@Produces( MediaType.APPLICATION_JSON)
public String hello(@PathParam("name") String name) {
    return "Hello " + name + ", it is " + new Date();
} 
```

在浏览器中调用该方法将显示一个没有任何 JSON 内容（花括号等）的纯字符串：

```
Hello firefox, it is Tue Sep 18 13:52:57 CEST 2012 
```

我想使用 dojo 工具包使用此服务。问题是，一旦我设置了 [handleAs: "json"]-flag，我就会得到第二种方法。它向我抛出一个错误“SyntaxError: Unexpected token H”，其中“H”是返回字符串的第一个字母。

那么：字符串和其他值类型的正确 json 表示形式是什么，以及我必须为我的方法设置哪些注释才能生成这些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T12:17:34.237

您应该定义 a`DTO`并将您`String`的放入其中。因此，您将拥有一个`HelloResp`具有一个字符串作为属性的类。在您的方法中填充该属性并返回。

您可以查看本[教程](http://docs.oracle.com/cd/E19776-01/820-4867/ggrby/index.html)。另一个[教程](http://docs.oracle.com/javaee/6/tutorial/doc/gilik.html)。

Firefox 没有显示错误，因为它没有处理您的响应。显示服务返回的任何内容。然而，工具包开始将响应作为 JSON 处理，但不是有效的 JSON（JSON 以 开头`{`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-26T15:12:49.170

如果您要返回一个字符串，为什么要将其定义为 JSON 类型？

只需将其作为纯文本 (MediaType.TEXT_PLAIN) 返回：

```
@GET
@Path("hello/{name}")
@Produces( MediaType.TEXT_PLAIN)
public String hello(@PathParam("name") String name) {
    return "Hello " + name + ", it is " + new Date();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-22T09:32:59.220

您也可以将其返回为：

```
@GET
@Path("hello/{name}")
@Produces( MediaType.APPLICATION_JSON)
public String hello(@PathParam("name") String name) {
    return "\"Hello " + name + ", it is " + new Date()+'"';
} 
```

但这对我来说看起来很奇怪。

为每个对象创建 DTO 对于一个字符串来说也很奇怪。

有没有更好的选择？

# symfony - 如何防止这种代码重复？- 树枝

> ID：12476827
> 
> 赞同：0
> 
> 时间：2012-09-18T12:14:49.023
> 
> 标签：symfony, twig

我在模板的很大一部分中使用了这段代码：

```
{% if app.session.hasFlash('error') %}
        <div class="error">
            {{ app.session.flash('error') }}
        </div>
{% endif %} 
```

但是**错误**这个词正在改变。你能告诉我如何避免代码重复吗？

使用包含或宏，我只能更改 div 类，但是 app.session.flash 中的错误一词呢？这样做是否有意义，或者最好还是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:18:39.210

您可以将其包含在“with”选项中。例如：

```
{% include 'AcmeDemoBundle:Tools:flash.html.twig' with {'flash':'error'} %} 
```

然后在 flash.html.twig 中执行：

```
{% if app.session.hasFlash(flash) %}
        <div class="{{flash}}">
            {{ app.session.flash(flash) }}
        </div>
{% endif %} 
```

# sdk - 索尼智能手表小部件刷新

> ID：12476828
> 
> 赞同：0
> 
> 时间：2012-09-18T12:14:52.580
> 
> 标签：sdk, sony, sony-smartwatch

我的 Sony SmartWatch 应用程序有问题。我开发了一个带有控件的小部件，但是在用户在设备上安装应用程序后，小部件的计划刷新任务会自动启动。这意味着刷新任务一直在运行，即使用户没有打开 SmartWatch Display 或启动小部件。这会耗尽电池电量。如果我转到小部件屏幕然后关闭显示，计划的任务会按预期停止。但是，如果我不这样做，则任务正在运行并正在运行......我如何检测显示器是否打开并且小部件正在运行？

非常感谢！

PS：是否选中“激活小部件”首选项没有区别....

编辑：我发现如果我取消选中首选项中的“显示为小部件”复选框，小部件源代码不会触发。这意味着如果刷新计划正在运行并且我取消选中此框，则永远不会调用 onDestroy，因此取消计划也不会......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:41:51.880

谢谢 - 我认为您发现了 SmartWatch 主机应用程序的不良行为，或者换句话说，一个错误。

安装后，主机应用程序会发送一个 START_REFRESH_IMAGE_REQUEST 以便能够缓存有关小部件的信息。但是，它不会调用它可能应该调用的 STOP_REFRESH_IMAGE_REQUEST。这需要调查。

当我们正在调查这种不良行为时，您应该尝试找到解决问题的解决方法。例如，您可以有一个全局静态变量或 SharedPreference，用于跟踪何时发送第一个 START_REFRESH 信号，从而能够停止刷新周期。

再次感谢，抱歉。

当我了解有关解决问题的更多信息时，我将再次在此线程中发布。

# android - android服务在运行时无意中调用OnCreated

> ID：12476830
> 
> 赞同：-1
> 
> 时间：2012-09-18T12:14:54.717
> 
> 标签：android, multithreading, service

我有奇怪的问题。我有一个启动线程的服务，在那个线程中有蓝牙连接。这工作正常（它仍在开发中，但它工作），我遇到了一个奇怪的问题：这是一个小 LogCat 转储，应该说明此时服务正在运行。

```
09-17 14:11:07.154: D/ReadXmlService(4552): The maximum numbers of event on the watch is reach (max: 5)
09-17 14:11:07.154: D/MetaWatchReminderApp(4552): size of lastUpdatedEventsFromXml: 0
09-17 14:11:07.154: D/MetaWatchReminderApp(4552): size of compareList: 4
09-17 14:11:07.154: D/MetaWatchReminderApp(4552): compareList.tostring: [dk.detech.metawatchreminder.EventsInfo@ca23e0ae,     dk.detech.metawatchreminder.EventsInfo@3bc334bf, dk.detech.metawatchreminder.EventsInfo@93e2b014, dk.detech.metawatchreminder.EventsInfo@895bc157]
09-17 14:11:07.154: D/MetaWatchReminderApp(4552): lastUpdatedEventsFromXml.toString: []
09-17 14:11:07.154: D/MetaWatchReminderApp(4552): The list have been updated return true
09-17 14:11:07.154: D/ReadXmlService(4552): new items in lastUpdatedEventsFromXml
09-17 14:11:15.071: D/CalenderService(4552): onCreate'd
09-17 14:11:25.091: D/ApacheBackground(4552): Background task
09-17 14:11:25.091: D/ApacheBtService(4552): onCreate'd
09-17 14:11:25.101: D/ApacheBtService(4552): state: connecting
09-17 14:11:25.111: D/MetaWatchReminderApp(4552): getBluetoothMac D0:37:61:C3:34:B5
09-17 14:11:25.151: D/BluetoothSocket(4552): create BluetoothSocket: type = 1, fd = -1, uuid = [00001101-0000-1000-8000-00805f9b34fb], port = -1
09-17 14:11:25.261: D/ApacheBtService(4552): before connect 
```

该服务正在运行，然后调用该函数 OnCreate 方法，但它没有调用 OnStartCommand 函数，有没有人知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:31:06.067

查看您可能返回的标志`onStartCommand(Intent, int, int)`。如果 Android 重新启动您的服务调用，则`onStartCommand(Intent, int, int)`某些标志无法保证。

[https://developer.android.com/reference/android/app/Service.html](https://developer.android.com/reference/android/app/Service.html)

# jquery - jQuery 验证 - 在运行时更改最小最大数量检查

> ID：12476831
> 
> 赞同：3
> 
> 时间：2012-09-18T12:14:55.123
> 
> 标签：jquery, validation

我可以在运行时更改数字验证的最小值、最大值吗？

我使用[jQuery 验证插件](http://docs.jquery.com/Plugins/Validation)。

我简化的布局和结构来演示它应该如何工作。当我更改最大范围的值时，也必须更改最大范围对字段编号的验证。

jsFiddle：http: [//jsfiddle.net/nXqd/qC2Ya/3/](http://jsfiddle.net/nXqd/qC2Ya/3/)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T12:54:15.057

使用另一个 SO 帖子中的[**答案**](https://stackoverflow.com/questions/1510165/how-can-i-add-remove-or-swap-jquery-validation-rules-from-a-page)作为指南，我能够更改您的代码并使其正常工作。

```
// Bind initial rule;
bindRangeRule(1, 2);

$("input[name='change-range']").on("keyup", function() {
    var value = $(this).val();

    // add some validation here off course to ensure only numbers are accepted.
    // You can do that by checking the event.keyCode values I believe.
    // If an invalid value was specified you can throw an alert
    // or simply clear the input field and return false. Or similar.

    // re-bind range rule
    bindRangeRule(1, parseInt(value));
});

function bindRangeRule(from, to) {
    var settings = $('form').validate().settings;

    delete settings.rules.number;

    settings.rules.number = {
        required: true,
        range: [from, to]
    }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T12:28:25.553

**更新演示：http:** [//jsfiddle.net/techfoobar/qC2Ya/5/](http://jsfiddle.net/techfoobar/qC2Ya/5/)

* * *

您可以通过在验证规则中指定`min`和选项来做到这一点：`max`

例如：

```
$("#myform").validate({
  rules: {
    field: {
      required: true,
      min: 13
    }
  }
}); 
```

**API 文档**：

[http://docs.jquery.com/Plugins/Validation/Methods/min#value](http://docs.jquery.com/Plugins/Validation/Methods/min#value)

[http://docs.jquery.com/Plugins/Validation/Methods/max#value](http://docs.jquery.com/Plugins/Validation/Methods/max#value)

# php - php echo 不起作用，但在包含的 php 文件中声明了变量

> ID：12476834
> 
> 赞同：0
> 
> 时间：2012-09-18T12:15:04.110
> 
> 标签：php, echo

文件是 init.php，它包含在 user_settings.php 中

下面是代码

```
## init.php ##
<?php
session_start();
require 'database/connect.php';
require 'functions/users.php';
require 'functions/general.php';

if (logged_in() === true) {
    $session_user_id = $_SESSION['user_id'];
    $user_data = user_data($session_user_id, 'user_id', 'username', 'password', 'first_name', 'last_name', 'email');
}
$errors = array();
?> 
```

## 和 user_setting.php

```
<?php 
include 'core/init.php';
include 'includes/overall/header.php';
echo $user_data['first_name'];
include 'includes/overall/footer.php';
?> 
```

我看不出我无法从 $user_data 回显的任何原因？

可能有更多经验的人将能够立即告诉！任何和所有的帮助将不胜感激！

瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:30:53.557

你可以试试这个

1) 首先删除 init.php 文件顶部的“## init.php ##”。因为，在 session_start() 函数之前不应该有任何字符串甚至空格

2) 检查 user_data() 函数，它返回预期的数据。

# android - Android LogCat 和 Codegist Crest

> ID：12476835
> 
> 赞同：0
> 
> 时间：2012-09-18T12:15:25.917
> 
> 标签：android, logging, logcat

我正在使用[http://crest.codegist.org/](http://crest.codegist.org/)与服务器通信，我想用 android LogCat 记录响应和请求。

如何配置 Crest（或系统）来执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:05:01.993

You can do it in two ways:

*   execute a command on your connected device:

    ```
    MBP:~ roman$adb shell setprop log.tag.CodeGist VERBOSE 
    ```

*   set the same property programmatically using the [System.setProperty()](http://developer.android.com/reference/java/lang/System.html#setProperty%28java.lang.String,%20java.lang.String%29) method

# python - 在 GAE 沙箱中运行 Python 的鼻子单元测试

> ID：12476838
> 
> 赞同：2
> 
> 时间：2012-09-18T12:15:38.210
> 
> 标签：python, google-app-engine, nose

我`lxml`在 Google App Engine 上托管了一个简单的解析器，并进行了一些`nose`测试。我知道如何在终端中运行测试，`--with-gae`但我希望也能够在生产环境中在某些 URL 下运行测试，例如`/unit-tests`. 我可以进行鼻子测试，例如：

```
import nose
nose.run() 
```

但它以错误结束：

```
File "/Users/martin/develop/gae/artova-kina/nose/core.py", line 168, in parseArgs
    os.chdir(self.config.workingDir)
AttributeError: 'module' object has no attribute 'chdir' 
```

这对我来说很有意义，因为`chdir`可能在 GAE 沙箱中不可用，但我认为应该有一些解决方法。有没有人尝试过这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:43:07.103

我没有使用鼻子，但我看到在“实时服务器”测试用例上运行类似的问题（使用 django-nonrel）。

在我看来 dev_appserver 被设计为单线程。在每个 wsgi 条目期间，它会重新配置一堆 python 系统对象，例如重新配置 os，因此您无法写入文件系统（您无法在 appengine 上执行此操作）。这些重新配置在处理 wsgi 请求后恢复（我认为）。

但是，如果您在处理请求时有另一个线程在做任何事情，您将遇到这些问题。在 dev_appserver.py 处理请求时，您需要同步您的线程以使其不运行。由于这是线程问题，因此有点随机。我发现我的测试有时会通过，有时会因这个问题而失败。

由于我不是唯一遇到此问题的人，我们应该提交一个问题，看看 GAE 人员是否可以让我们更轻松。

# xcode - 静态库和国际化

> ID：12476840
> 
> 赞同：3
> 
> 时间：2012-09-18T12:15:40.083
> 
> 标签：xcode, internationalization, static-libraries

我有一个关于静态库的问题。我需要在我的库中本地化一些文本。所以我创建了一个捆绑包，在其中放置了不同的本地化文件。然后，我创建了一个这样的函数：

```
NSString *MyLocalizedString(NSString* key, NSString* comment)
{
    static NSBundle* bundle = nil;
    if (!bundle)
    {
        NSString* path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"MyStaticLib.bundle"];
        bundle = [[NSBundle bundleWithPath:path] retain];
    }

    return [bundle localizedStringForKey:key value:@"" table:nil];
} 
```

但是当我使用它时，它总是返回英文本地化字符串（除了我的电话语言是法语）。我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:40:56.837

做同样的事情时我遇到了同样的问题：我有一个静态库和一个带有图像、本地化字符串等的配套捆绑文件。

我发现静态似乎无法确定正确的设备本地化（很抱歉，我无法找到此问题的原因），并且我已通过执行以下操作进行了修复：

```
@implementation NSBundle (KiosKitAdditions)

+ (NSBundle *)kioskitBundle
{
    static NSBundle* kioskitBundle = nil;
    static dispatch_once_t predicate;
    dispatch_once(&predicate, ^{

        NSString *libraryBundlePath = [[NSBundle mainBundle] pathForResource:KKBundleName
                                                                      ofType:@"bundle"];

        NSBundle *libraryBundle = [[NSBundle bundleWithPath:libraryBundlePath] retain];
        NSString *langID        = [[NSLocale preferredLanguages] objectAtIndex:0];
        NSString *path          = [libraryBundle pathForResource:langID ofType:@"lproj"];
        kioskitBundle           = [[NSBundle bundleWithPath:path] retain];
    });
    return kioskitBundle;
}

@end 
```

As you can see I have created a category of NSBundle with a Class method that act very similar to `[NSBundle mainBundle]` and that return me the correct bundle for the static libray so I can use it everywhere I want, for example:

```
#define KKLocalizedString(key) NSLocalizedStringFromTableInBundle(key, @"Localizable", [NSBundle kioskitBundle], @"") 
```

The code is very simple first I find the path for the static library bundle, find the current device language and then I create a new NSBundle whose path is library_path/device_language.lproj .

A drawback of this approach is that you need to alway localize all of your asset and this can be a pain if you have a lot image in your bundle (but I think this is unlikely).

If you don't want to adopt my category approach you can change your code like this:

```
NSString *MyLocalizedString(NSString* key, NSString* comment)
{
    static NSBundle* bundle = nil;
    if (!bundle)
    {
        NSString *libraryBundlePath = [[NSBundle mainBundle] pathForResource:@"MyStaticLib"
                                                                      ofType:@"bundle"];

        NSBundle *libraryBundle = [NSBundle bundleWithPath:libraryBundlePath];
        NSString *langID        = [[NSLocale preferredLanguages] objectAtIndex:0];
        NSString *path          = [libraryBundle pathForResource:langID ofType:@"lproj"];
        bundle                  = [[NSBundle bundleWithPath:path] retain];

    }

    return [bundle localizedStringForKey:key value:@"" table:nil];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-21T18:53:26.843

I had to modify Luca's answer to get it working how I wanted. My problem was very similar: Using my bundled localized strings from the consuming application didn't resolve to correct [lang].lproj folder. In my case, I had an es.lproj folder I wanted to look up from. However, if the user sets their preferred langauge to es-MX, using [NSLocale preferredLanguages] objectAtIndex:0] will try to find the es-MS.lproj folder, which doesn't exist.

```
@implementation NSBundle (CCPAdditions)

+ (NSBundle *)CCPBundle
{
    static NSBundle* corePaymentBundle = nil;
    static dispatch_once_t predicate;
    dispatch_once(&predicate, ^{

        NSString *libraryBundlePath = [[NSBundle mainBundle] pathForResource:@"ClipCorePayments"
                                                                      ofType:@"bundle"];

        NSBundle *libraryBundle = [NSBundle bundleWithPath:libraryBundlePath];

        for (NSString *langID in [NSLocale preferredLanguages])
        {
            NSString *path = [libraryBundle pathForResource:langID ofType:@"lproj"];
            if (path)
            {
                corePaymentBundle           = [NSBundle bundleWithPath:path];
                break;
            }
        }
    });

    return corePaymentBundle;
}

@end 
```

This iterates through the preferred language list, and checks to see if that path exists. If es-MX.lproj is missing, it will next check es.lproj, etc. and eventually finds en.lproj if nothing else is there.

# sharepoint - 如何在 Infopath 表单提交后立即将 Sharepoint Farm 库文档 ID 检索到 infopath 表单？

> ID：12476842
> 
> 赞同：1
> 
> 时间：2012-09-18T12:15:40.893
> 
> 标签：sharepoint, infopath

在我的信息路径中，我有 2 个视图。创建和只读。一旦用户通过创建视图创建表单并单击提交按钮，我需要获取农场库中文档的共享点 ID 并显示在只读视图中。请在获取 Sharepoint Id 时提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T20:02:42.610

看到这篇文章，我相信它会回答你的问题。

[http://social.msdn.microsoft.com/Forums/sharepoint/en-US/689e681f-d46a-4621-a0cf-55fd49a0432a/i-want-to-display-the-id-of-an-infopath-form-提交到共享点上的文档库后？forum=sharepointcustomizationlegacy](http://social.msdn.microsoft.com/Forums/sharepoint/en-US/689e681f-d46a-4621-a0cf-55fd49a0432a/i-want-to-display-the-id-of-an-infopath-form-after-submission-to-a-doc-library-on-sharepoint?forum=sharepointcustomizationlegacy)

# ruby-on-rails - 一对多的导轨不保存

> ID：12476844
> 
> 赞同：0
> 
> 时间：2012-09-18T12:15:45.420
> 
> 标签：ruby-on-rails, one-to-many, simple-form

我对 Rails 比较陌生，但是我在控制台中可以正常工作，但是对于我来说，通过网页保存记录并没有链接一对多链接。

模型是：

```
class Contact < ActiveRecord::Base
  has_many :needs_personals
end

class NeedsPersonal < ActiveRecord::Base
  belongs_to :contact
  accepts_nested_attributes_for :contact
end 
```

我正在使用 simple_form 所以 _form.html.erb 看起来像这样：

```
<%= simple_form_for @needsPersonal do |f| %>
  <%= f.association :contact %>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

我的 create 方法看起来很标准，看起来像这样：

```
def create
  @needsPersonal = NeedsPersonal.new(params[:needsPersonal])

  if @needsPersonal.save
    redirect_to @needsPersonal, notice: 'NeedsPersonal was successfully created.'
  else
    render action: "new"
  end
end 
```

出于某种原因，尽管能够看到它正在发布，但此代码并未将 contact_id 分配给表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:55:19.100

看看从[http://rails.nuvvo.com/lesson/5017-ruby-coding-convention](http://rails.nuvvo.com/lesson/5017-ruby-coding-convention)中提取的命名约定。

## 类/模块

类名和模块名应该是名词；混合大小写，每个内部单词的首字母大写。

前任：

```
class Raster,  class Raster::ImageSprite 
```

## 方法

方法应该是动词。所有带有下划线 ('_') 分隔的单词的小写 ASCII 字母

前任。

```
run(), run_fast(), obj.background_color() 
```

## 变量

变量名应全部为小写 ASCII 字母，单词之间用下划线 ('_') 分隔

前任：

```
i = 1 some_char = SomeChar.new() table_width = 0.0 
```

## 常数

常量应全部大写，单词之间用下划线 ('_') 分隔。（（呵呵，有没有合理的背景来区分常量和同时是常量的类名？））

前任：

```
MIN_LENGTH = 1
DEFAULT_HOST = "foo.example.com" 
```

## 省略

说到“连接池”作为变量，您应该决定按范围选择名称，如下所示……</p>

'conpool' 用于局部范围（例如局部变量） '@connection_pool' 用于类范围（例如实例变量）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:46:24.600

好的，所以我解决了。不知道为什么我几个小时前没有注意到这个。参数应该是`params[:needs_personal]`而不是`params[:needsPersonal]`如上。

很想了解一下为什么是骆驼案，什么时候强调。

# silverstripe - Silverstripe 3.0：在设置->主选项卡下添加子选项卡，将默认字段保留在单独的选项卡中

> ID：12476846
> 
> 赞同：1
> 
> 时间：2012-09-18T12:15:48.537
> 
> 标签：silverstripe

我使用以下代码在 Silverstripe 3.0 后端的设置->主选项卡下添加了新的子选项卡：

公共功能 updateCMSFields(FieldList $fields) {

```
 $fields->addFieldToTab('Root.Main', new TabSet('Tab1'),'Theme');
   $fields->addFieldToTab('Root.Main.Tab1', new Tab('SubTab1',new HTMLEditorField("Text", "Text")));
   $fields->addFieldToTab('Root.Main.Tab1', new Tab('SubTab2', new DropdownField("DropDown1","DropDown",
   array(

        '-1' => 'Option1',
        '1' => 'Option2',
        ))));
} 
```

但是主选项卡下面已经有一个名为主题的字段，它是默认生成的。我需要将此字段与我添加的选项卡分开...也许为它创建一个新的子选项卡...请告诉我如何实现这一点...目前它出现在每个选项卡下...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:01:46.837

如果您愿意，可以完全删除默认的“主题”字段。

将此行放在您发布的所有代码之前：

`$fields->removeByName('Theme');`

# sql - 删除表中重复的元组

> ID：12476847
> 
> 赞同：0
> 
> 时间：2012-09-18T12:15:50.117
> 
> 标签：sql, sql-server, sql-server-2008, duplicate-removal

我的数据库有问题

```
Select * from table where JobId='329188628' 
```

**结果：**

```
ID     JobId      ONETID
-----------------------
32951  329188628    532
32951  329188628    532
32951  329188628    532
32951  329188628    532 
```

我需要删除重复的行。谁能帮帮我吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:20:42.593

尝试这个。

```
with cte(cnt) as
(
  select row_number() over(partition by ID,JobId,ONETID order by getdate())
  from table where JobId='329188628'
)
delete from cte where cnt>1 
```

并且只有 JobId 和 OnetId 用于分组。

```
with cte(cnt) as
(
  select row_number() over(partition by JobId,ONETID order by getdate())
  from table where JobId='329188628'
)
delete from cte where cnt>1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T12:19:49.680

请试试：

```
with c as(
select *, row_number() over(partition by id order by (select 0)) as n
from table where JobID='329188628'
)delete from c
where n > 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:20:16.307

使用`DISTINCT`关键字。

```
Select DISTINCT * from table where JobId='329188628' 
```

# c# - 从方法返回内存流

> ID：12476851
> 
> 赞同：6
> 
> 时间：2012-09-18T12:16:23.300
> 
> 标签：c#, .net, dispose, using, memorystream

**想知道以下情况是否会导致任何内存泄漏。**

Aspx 页面包含以下内容。

```
private void Generator(input)
{
    using (MemoryStream memoryStream = Helper.Instance.Generate(input))
    {
    }
} 
```

下面的方法是从返回内存流的 aspx 页面调用的。

```
MemoryStream Generate(input)
{
    MemoryStream stream = new MemoryStream();
    //doing some stream manipulation here

    return stream;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T12:24:48.817

*   第一点：如果代码抛出异常：

    ```
    // doing some stream manipulation here 
    ```

    那么 MemoryStream 不会被返回`Helper.Instance.Generate`，所以不会被调用者处理掉。

*   第二点：`MemoryStream`不使用任何非托管资源，所以调用`Dispose`.

所以在这种情况下不会有内存泄漏。

`Helper.Instance.Generate`如果抛出异常，那么强制 Dispose 可能会更好：

```
MemoryStream Generate(input)  
{      
    MemoryStream stream = new MemoryStream();      

    try
    {
        //doing some stream manipulation here        

        return stream;  
    }
    catch
    {
        stream.Dispose();
        throw;
    }
} 
```

这是构造、操作和返回`IDisposable`对象的方法的一般模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:39:07.147

我认为始终如一地处理诸如`MemoryStream`, `DataTable`, ... 之类的东西是有价值的，这使得阅读代码和验证它是否正确变得更容易。如果您在`using`-block 中看到资源，您就知道它是正确的。无需在脑海中进行心理流动追踪和模拟执行。

可以立即验证代码是否正确。完全没有思考。我认为这很好。

也就是说，虽然我尝试将不必要的东西放入`using`块中，但我不会过度使用它。如果有理由不处理它（即使是开发人员的便利），我只是不处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:52:03.997

@Joe 已经提供了一些解释。对于实现 IDisposable 的对象，您可以尽早调用 Dispose 以回收资源（托管和/或非托管），但您可以决定不调用，因为 CLR 仍会跟踪它们并将通过终结器回收资源。通过终结器释放资源需要更多时间，但可以防止发生内存泄漏。

只有当实现对象/类的人没有遵循设计准则并且忘记正确编写终结器时，才会发生内存泄漏。

有大量的文章和书籍提到了细节，例如

[http://msdn.microsoft.com/en-us/magazine/cc163392.aspx](http://msdn.microsoft.com/en-us/magazine/cc163392.aspx)

[http://www.bluebytesoftware.com/blog/PermaLink.aspx?guid=88e62cdf-5919-4ac7-bc33-20c06ae539ae](http://www.bluebytesoftware.com/blog/PermaLink.aspx?guid=88e62cdf-5919-4ac7-bc33-20c06ae539ae)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T12:18:21.050

这是完全有效的，并且**不会**产生内存泄漏，因为 Dispose 方法是在退出 using 块后调用的。

与执行以下操作完全相同：

```
 private void Generator(input)
 {
    using (MemoryStream memoryStream = new MemoryStream())
    {
        Helper.Instance.Manipulate(memoryStream);
    }
 } 
```

# math - 计算与垂直和水平线的垂直距离

> ID：12476852
> 
> 赞同：1
> 
> 时间：2012-09-18T12:16:29.927
> 
> 标签：math, geometry

我有两条线，一条是水平线，一条是垂直线，我有以下格式的线方程：

![在此处输入图像描述](../Images/e5df4bc8915ea3122dafdce4d300b06f.png)

![在此处输入图像描述](../Images/0c68a017239261db8fd7498b283999ea.png)因为它是一条水平线，而对于![在此处输入图像描述](../Images/be72c58c1e627887eaa26dfe165e7f45.png)垂直线，我可以计算![在此处输入图像描述](../Images/40eaf545a02e64d6efec476419b4d90c.png)，因为我知道这些线经过的点。

我想计算![在此处输入图像描述](../Images/ff8865f45baca032ef4876d45a0ed563.png)空间中一点与这些线的垂直距离。我不能使用 slop，因为它会给出除以 0 的错误。另一种方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T12:24:35.413

在水平线上，方程是`y = c`，所以任何一般点`(a,b)`到那条线的距离都是简单的`|b-c|`。

在垂直线上，`c`没有意义，因为这条线永远不会穿过 y 轴（除非它是 y 轴）。这样一条线的方程是`x = d`（你需要计算d）然后一点`(a,b)`到这条线的距离很简单`|a-d|`

**编辑：**顺便说一句，这个问题与 C++ 完全无关

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:28:24.407

除了这个问题已经解决之外：

对于类似的未来问题，请使用规范化形式

```
c = a*x + b*y; 
```

# python - wxPython 实时更新列表框

> ID：12476853
> 
> 赞同：0
> 
> 时间：2012-09-18T12:16:32.250
> 
> 标签：python, listbox, wxpython, live

我正在使用 python 和 wxPython 开发一个程序。我有一个列表框，我需要实时更新它以用作日志。

我已经简单地使用 Append() 函数完成了此操作，但是添加到列表框中的文本直到过程结束才显示，而不是在执行 Append 命令时显示。我知道这一点，因为每次插入后我都会打印列表框的大小。

```
def writeLog(self, text):
    self.log.Append(text)
    print self.log.GetStrings().__len__() 
```

现在，出于检查目的，我正在调用具有以下代码的脚本：

```
parent.writeLog("aaaaaa")
sleep(1)
parent.writeLog("aaaaaa")
sleep(1)
parent.writeLog("aaaaaa") 
```

我已经尝试过这些答案，但我无法让它们为我工作： [Update a ListBox in wxPython](https://stackoverflow.com/questions/8015867/updating-a-listbox-in-wxpython) [wxPython: Update wx.ListBox list](https://stackoverflow.com/questions/1733461/wxpython-update-wx-listbox-list)

那么，如何在调用 writeLog 函数后立即在屏幕上看到更新的列表框？可能吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:33:39.967

您在这里有几个选项，最简单的可能是`wx.Yield()`在您希望更新 ui 时调用，所以在您`Append`调用之后

另一种解决方案是获取需要在单独线程中添加的任何文本，然后通过[自定义事件](http://wiki.wxpython.org/CustomEventClasses)或[pubsub](http://wiki.wxpython.org/WxLibPubSub)将其发送回主线程，然后可以发送`Append`到列表框

# xslt - XSLT - 使用硬编码值并循环它们

> ID：12476857
> 
> 赞同：1
> 
> 时间：2012-09-18T12:16:49.130
> 
> 标签：xslt

我对 xslt 很陌生，正在努力学习。转换我的数据 xml 并将输出 xml 绑定到 adobe 表单的重点。

我有以下结构的 xml。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<envelope xmlns="http://www.mydata.de/xem/reporting/datafile">
<sources>
    <source>
        <data>
            <REPORT>
                <EM_ESOURCE>
                    <EM_ES_MEASURE>
                        <ID>1037343</ID>
                        <ES_ID>1006222</ES_ID>
                        <ES_NAME>MFC-D-002</ES_NAME>
                        <EM_MAT_NAME>Cyprinella leedsi</EM_MAT_NAME>
                        <START_DATE>1/19/98</START_DATE>
                        <LABORATORY>Thornton</LABORATORY>
                        <LC50>&gt;100%</LC50>
                        <TESTTYPE/>
                        <IC25/>
                    </EM_ES_MEASURE>
                    <EM_ES_MEASURE>
                        <ID>1037344</ID>
                        <ES_ID>1006222</ES_ID>
                        <ES_NAME>MFC-D-002</ES_NAME>
                        <EM_MAT_NAME>C Dubia</EM_MAT_NAME>
                        <START_DATE>3/2/98</START_DATE>
                        <LABORATORY>Thornton</LABORATORY>
                        <LC50>&gt;120%</LC50>
                        <TESTTYPE>Routine</TESTTYPE>
                        <IC25/>
                    </EM_ES_MEASURE>
                </EM_ESOURCE>
            </REPORT>
        </data>
    </source>
</sources> 
```

这是其中一个查询的结果。Adobe 报告要求材料始终以特定顺序显示，无论查询返回什么内容。所以我决定在内部对 xsl 中的材料顺序进行硬编码，在这个列表上循环，然后从数据 xml 中获取相应的“LC50”值。

以下是我开始的 xsl：

```
<?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:rep="http://www.technidata.de/xem/reporting/datafile"
xmlns:s="http:/materials.data"
xmlns:java="http://xml.apache.org/xslt/java">
<xsl:output method="html" omit-xml-declaration="yes" encoding="UTF-8"/>      
<!-- Suppress copy of restrictions -->
<!--xsl:template match="text()|@*"/-->  
<xsl:key name="material-lookup" match="s:material" use="s:name"/>
<xsl:template match="/">
 <REPORT>
        <HEADERS>
            <STARTDATE><xsl:value-of select="substring(/rep:envelope/rep:sources/rep:restrictions/rep:START_DATE,1,10)"/></STARTDATE>
            <ENDDATE><xsl:value-of select="substring(/rep:envelope/rep:sources/rep:restrictions/rep:START_DATE,16,24)"/></ENDDATE>
            <FACILITY><xsl:value-of select="normalize-space(/rep:envelope/rep:sources/rep:restrictions/rep:ID_ATTRIBUTE_ID_NAME)"/></FACILITY>
        </HEADERS>
        <MATERIALS>         
        </MATERIALS>
         </REPORT></xsl:template>
     <s:materials>
<s:material>
    <s:name>Cyprinella leedsi</s:name>
    <s:parameter>LC(ROUTINE) </s:parameter>
</s:material>
 <s:material>
    <s:name>C Dubia</s:name>
    <s:parameter>LC50(ROUTINE) </s:parameter>
 </s:material>
</s:materials>
</xsl:stylesheet> 
```

我不确定如何按照 xslt 中定义的顺序以及数据 xml 中相应的 LC50 值使用材料填充 MATERIALS 节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:07:01.067

使用该`document('')`函数将 XPath 导入 XSLT 文件本身。

# c# - ListViewItem 的组未通过另一个集合保留

> ID：12476858
> 
> 赞同：14
> 
> 时间：2012-09-18T12:16:51.693
> 
> 标签：c#, winforms, listview, .net-3.5

我正在尝试在自定义中实现搜索功能，`ListView`因此我隐藏`Items`了一个`ObservableCollection`允许的自定义`AddRange`，类似于[damonpayne.com 上定义的那个](http://www.damonpayne.com/post/2010/03/04/AddRange-for-ObservableCollection-in-Silverlight-3.aspx)（对于 tl;dr-ers 基本上它`OnCollectionChanged`在添加时抑制触发事件然后使用 ) 触发多个项目`NotifyCollectionChangedAction.Reset`：

```
public new MyCollection<ListViewItem> Items { get; protected set; } 
```

`MyCollection_CollectionChanged()`人口`base.Items`：_

```
this.BeginUpdate();
base.Items.Clear();
base.Items.AddRange(this.Items.ToArray());
this.EndUpdate(); 
```

这个想法是，当项目不满足搜索条件时，它们会从`base.Items`（即*System.Windows.Forms.ListView*）中删除，但仍保留在`this.Items`（即*My.Name.Space.MyListView*）中。当搜索被取消或条款改变时，`base.Items`可以通过 重新填充`this.Items`。

除了一个小但重要的警告外，这可以正常工作并且符合预期：

问题是`ListViewItem`s'`Group`并非始终如一地从`this.Items`to携带`base.Items`，因此所有项目都出现在“Default”组中。

关于为什么会发生这种情况以及如何解决它的任何想法？

## 更新

我仍然坚持这一点。当然这样做`.ToArray()`只是创建了一个浅表副本，`Items`所以`Group`应该保留？[Maverik](https://stackoverflow.com/users/504757/maverik)证实了这一点：

> [我刚刚在 Linqpad 中调用，虽然列表引用不同，但你是对的.. 对象引用是相同的](https://chat.stackoverflow.com/transcript/message/5751203#5751203)。

## 更新 2

好的，经过更多调查，我发现它发生在哪里。

将`ListViewItem`s 添加到 时`MyCollection<ListViewItem>`：

```
var item0 = new ListViewItem();
var item0.Group = this.Groups["foo"];
//here this.Items.Count = 0
this.Items.Add(item0); 
//here this.Items.Count = 1 with item0 having group "foo"

var item1 = new ListViewItem();
var item1.Group = this.Groups["bar"];
//here this.Items.Count = 1 with item0 having group "foo"
this.Items.Add(item1);
//here this.Items.Count = 2 with item0 having group "null" and item1 having group "bar" 
```

我还检查了这个替换`MyCollection<`为正常`ObservableCollection<`的，同样的情况仍然发生。

## 更新 3 - 解决方案

请看[我的回答](https://stackoverflow.com/questions/12476858/listviewitems-group-not-being-preserved-through-another-collection/12862649#12862649)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T15:44:09.940

## 背景

弄清楚了！

我不知道为什么，但在应该抛出异常的时候却没有抛出异常。

`Cannot add or insert the item 'item0' in more than one place.`应该抛出异常。

（从 a 中清除一些东西后`.designer.cs`，它被抛出（虽然奇怪的是不是在穿过时......）

根据要求，从包含自定义的表单的设计者那里清除的代码`ListView`是

```
this.ListView.Items.AddRange(new System.Windows.Forms.ListViewItem[] {
    listViewItem1,
    listViewItem2,
    listViewItem3,
    listViewItem4,
    listViewItem5,
    listViewItem6}); 
```

这些只是我之前为了测试而添加的一些临时项目，但设计师一定出于某种原因记住了它们。）

* * *

## 解决方案

解决方案如[this SO answer](https://stackoverflow.com/a/6582142/1185053)中所述，我的代码现在显示为：

```
this.BeginUpdate();
base.Items.Clear();
base.Items.AddRange(this.Items.Select((ListViewItem)a => a.Clone()).ToArray());
this.EndUpdate(); 
```

# flash - Firefox 在某些情况下是否会在对 flash 对象应用 -moz-transform 之前对其进行光栅化？

> ID：12476861
> 
> 赞同：0
> 
> 时间：2012-09-18T12:17:06.137
> 
> 标签：flash, firefox, jquery-ui-draggable, css-transforms

我有一个简单的 .swf 文件，它每隔几帧就会在两种颜色之间来回闪烁。swf 使用 SwfObject 嵌入，并位于使用跨浏览器转换定位在屏幕上的包装 div 内，如下所示：

```
// HTML:
<div id="wrapper">
 <div id="swf" /> // Replaced with swf by SwfObject
</div>

// CSS:
#wrapper
{
    width: 210pt;
    height: 120pt;
    -moz-transform: matrix(1,0,0,1,36,36);
    -ms-transform: matrix(1,0,0,1,36,36);
    -webkit-transform: matrix(1,0,0,1,36,36);
    transform: matrix(1,0,0,1,36,36);
} 
```

到目前为止，一切都很好。这在 IE9、Chrome 21 和 Firefox 15 中显示良好。

然后我创建另一个名为transformer 的DIV，它位于它的顶部，并用于`jQuery-ui draggable()`使其具有交互性。当我拖动变压器 div 时，我捕获拖动事件，找出 delta_x 和 delta_y，并使用`jquery css()`函数将它们添加到现有的变换中 - 所以如果我将变压器向右拖动 10px，我会更新变换的 tx 属性+10 移动包装器及其 swf 内容。

这是转换代码的简化编辑：

```
var dx = currentBounds.x - lastBounds.x; // delta x
var dy = currentBounds.y - lastBounds.y; // delta y
for (var i = 0; i < selectedItems.length; i++) {
    var selectedItem = selectedItems[i];
    var matrix = parseMatrix(selectedItem.css("transform")); // utility to read a matrix into an object
    matrix.tx += dx;
    matrix.ty += dy;
    var newMatrix = unparseMatrix(matrix); // reverse utility
    selectedItem.css("transform", newMatrix);
    selectedItem.css("-moz-transform", newMatrix);
    selectedItem.css("-ms-transform", newMatrix);
    selectedItem.css("-webkit-transform", newMatrix);
} 
```

再一次，这很好用，除了一个奇怪的地方：每当我将 swf 拖到 Firefox 中的原始边界之外时，舞台就会停止重新绘制，并且颜色会停留在它当前具有的任何值上。通过在 swf 内部进行跟踪，我可以看到该函数仍在被调用，并且形状仍在被重绘 - 只是在浏览器中，整个对象没有被重绘。（这仅在 Firefox 中 - IE 和 Chrome 工作正常）但是，如果我修改我的代码，而不是使用转换移动包装器，我只需更新 `top`和`left`属性，一切都按预期工作，并且阶段不断更新。

有谁知道为什么会这样？我最好的猜测是对`-moz-transform`对象进行某种光栅印象，然后对其进行操作而不是对原始对象进行操作，但是我不明白为什么只有当您超出原始对象的边界时才会发生这种情况？另一个奇怪的是，如果我右键单击转换后的 swf，上下文菜单会如您所愿出现，但在 Firefox 中它位于 swf 的原始位置，这表明转换可能隐藏了原始文件并创建了一个副本：

任何人都可以散发的任何光芒都将受到欢迎。尽管解决方法（使用顶部/左侧而不是变换）非常简单，但如果可能的话，我想坚持使用变换，因为这将更清晰地与我的应用程序的其他部分交互。我还希望能够应用更复杂的转换：Firefox（或其他浏览器）会光栅化旋转的 swf 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:20:21.633

我会自己回答这个问题，只是为了整理一下：是的，它似乎是。实验表明，一旦旋转的 swf 超出其原始范围，它就会停止更新舞台。更改 swf 的 x/y 坐标按预期工作。

# android - In App Purchase Android : 购买已购买的产品时 Google Play 没有响应

> ID：12476863
> 
> 赞同：0
> 
> 时间：2012-09-18T12:17:09.930
> 
> 标签：android, in-app-purchase, in-app-billing, google-play

我正在 Android 上测试应用内计费。我能够购买托管产品并从服务器获得预期的响应。但是，当我尝试从同一设备重新购买托管产品时，我没有从 google play 得到任何响应。

重新购买时，我确实收到标题为“已购买商品”的弹出消息，但没有任何回应。但令人惊奇的是，我更早得到了回应。即使我试图从同一设备重新购买相同的产品。谁能帮我解决这个问题？
还有什么方法可以检查产品是否已经购买？

代码 ：

```
@Override
 public void onPurchaseStateChange(PurchaseState purchaseState,
                               String itemId, int quantity, long purchaseTime,
                               String developerPayload) {} 
```

当我尝试重新购买时，没有调用 onPurchaseStateChange() 函数。
仅从 google play 获得对 onRequestPurchaseResponse() 的 RESULT_ERROR 响应。但我能够第一次购买产品并获得 PurchaseState.PURCHASED 状态。在重新购买的情况下，不会返回任何状态。这是由于与 Google Play 相关的服务器错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T23:40:14.103

您不应该重新购买托管项目。如果您想多次销售某件商品，请使用非托管商品。

RESULT_ERROR 试图重新购买您已经拥有的东西似乎是合理的。如果没有发生购买，您将不会请求“购买状态已更改”消息。

您确定您没有将您正在使用的项目从非托管更改为托管吗？或者，也许您正在使用测试产品，而现在您正在使用实际产品？（您可以一遍又一遍地购买android.test.purchased）

您的应用程序应该跟踪已进行的购买，以便您可以将托管项目标记为已购买，以防止用户尝试重新购买它们（因此他们知道他们已经购买了它们）。

您需要检查用户是否已经拥有您的任何托管项目的唯一时间是他们是否重新安装了您的应用程序。在这种情况下，您进行恢复交易调用并更新已购买的应用程序本地记录。

# linux - jiffies.h 未知

> ID：12476864
> 
> 赞同：0
> 
> 时间：2012-09-18T12:17:16.510
> 
> 标签：linux, linux-kernel

我在嵌入式系统上使用 Linux 2.6.36。我尝试用信号量编程。为此，我需要`jiffies.h`库中的一个函数。到目前为止这么好。当我包含 Lib

无论是这种方式

```
#include <jiffies.h> 
```

或者这样

```
#include <linux/jiffies.h> 
```

作品。

但奇怪的是，如果我打开声明（eclipse 命令），它会打开一个带有库的新编辑器窗口。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:12:50.813

解决了一个谜团：Eclipse 将项目中的所有文件名存储在一种列表中，当我单击`show declaration`它时，在列表中搜索该名称并显示该文件。因此，如果可行，它不会说明编译器和链接器。如果这不是真的，请纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:06:11.143

您可能没有正确构建模块。内核模块 Makefile 非常简单，整体看起来应该是这样的：

```
obj-m := mymodule.o

mymodule.ko: mymodule.c mymodule.h
    $(MAKE) -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules 
```

内核构建系统将完成其余的工作。[有关更多详细信息，请参阅http://lwn.net/Kernel/LDD3/](http://lwn.net/Kernel/LDD3/)中有关构建模块的章节

编辑：

现在看来，您可能根本就没有尝试编写内核模块。在这种情况下，您不需要任何包含在内核源代码中的文件。jiffies.h 不是用户态包含；它是内核的一部分，用于编写内核的一部分。对于用户态信号量，请尝试使用 POSIX 信号量。从`man sem_overview`, 和/或 Google“POSIX 信号量”开始。

# firefox-addon-sdk - Firefox 插件 SDK 中的 HTML5 文件 API

> ID：12476871
> 
> 赞同：3
> 
> 时间：2012-09-18T12:17:47.480
> 
> 标签：firefox-addon-sdk, content-script, html5-filesystem

有没有办法在内容脚本中访问 Fire Fox 插件 sdk 中的 Html5 文件 api？

这是为了存储用户添加的单词及其含义所必需的。数据可能会变得很大，因此本地存储不是一种选择。

```
 window.requestFileSystem3 = window.requestFileSystem || window.webkitRequestFileSystem; 
```

给我错误**TypeError: window.requestFileSystem3 is not a function**。

我问这个是因为我从谷歌 Chrome 扩展中移植了这段代码，它允许在内容脚本中访问文件 api。

**附加问题**

1) 如果不允许使用 HTML5 File API，那么我应该使用[文件](https://addons.mozilla.org/en-US/developers/docs/sdk/1.9/packages/api-utils/file.html)模块吗？

2)**文件模块**是否允许访问文件系统上的任何文件，而不是 Html5 文件 api，它只能访问对文件系统的沙盒访问？

3）假设我必须使用**文件模块**存储我的文件的最佳位置（如用户配置文件目录或扩展目录）以及我将如何在代码中获取此路径。

对于这个问题中的这么多子问题，我深表歉意。谷歌在这个话题上不是很有帮助。

任何示例代码都会非常有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T13:48:04.627

Firefox 还不支持通过 File API 写入文件，即使添加了它，它也可能只能被网页访问，而不能被扩展访问。换句话说：是的，如果您绝对需要写入文件，那么您应该使用低级 API。您希望将数据存储在用户配置文件目录中（没有扩展目录，您的扩展通常安装为单个打包文件）。像这样的东西应该可以写一个文件：

```
var file = require("sdk/io/file");
var profilePath = require("sdk/system").pathFor("ProfD");
var filePath = file.join(profilePath, "foo.txt");
var writer = file.open(filePath, "w");
writer.writeAsync("foo!", function(error)
{
  if (error)
    console.log("Error: " + error);
  else
    console.log("Success!");
}); 
```

供参考：[`sdk/io/file`](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/io/file.html),[`sdk/system`](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/system.html)

您可以使用`TextReader.read()`或`file.read()`读取文件。不幸的是，附加 SDK 似乎不支持异步文件读取，因此读取会阻止 Firefox UI。唯一的选择是通过 chrome 权限导入[NetUtil](https://developer.mozilla.org/en-US/docs/JavaScript_code_modules/NetUtil.jsm)和[FileUtils ，如下所示：](https://developer.mozilla.org/en-US/docs/JavaScript_code_modules/FileUtils.jsm)

```
var {components, Cu} = require("chrome");
var {NetUtil} = Cu.import("resource://gre/modules/NetUtil.jsm", null);
var {FileUtils} = Cu.import("resource://gre/modules/FileUtils.jsm", null);
NetUtil.asyncFetch(new FileUtils.File(filePath), function(stream, result)
{
  if (components.isSuccessCode(result))
  {
    var data = NetUtil.readInputStreamToString(stream, stream.available());
    console.log("Success: " + data);
  }
  else
    console.log("Error: " + result);
}); 
```

# r - 排除在不同列中具有相同值的行

> ID：12476872
> 
> 赞同：0
> 
> 时间：2012-09-18T12:17:54.013
> 
> 标签：r, dataframe, subset

我有一个包含十列的数据框：

```
A  B   C   1  1  1  1  1  1  1
B  M   J   2  1  2  2  2  2  2
J  K   Z   3  3  3  3  3  3  3.1
V  N   I   4  4  4  4  4  4  4 
```

我想从 4 到 10 列中排除那些具有相同值的行。我找到了比较不同行的解决方案，但这里我说的是 1 行内。所以输出是

```
B  M   J   2  1  2  2  2  2  2
J  K   Z   3  3  3  3  3  3  3.1 
```

因为第一行和最后一行在第 4 到第 10 列中具有相同的值。我可以通过 1 比 1 比较每个值来做到这一点，但我的数据框非常大（约 100,000 行）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T12:27:18.610

怎么样的东西：

```
 ##Work out the rows to keep
 ##dd is your data frame
 rows = apply(dd[, 4:10], 1, function(i) length(unique(i)) > 1) 
```

然后正常子集

```
 dd[rows,] 
```

~100K 行并不是那么多。

# c - 在结构数组中搜索函数 - 停止条件未知

> ID：12476876
> 
> 赞同：0
> 
> 时间：2012-09-18T12:18:08.477
> 
> 标签：c, pointers, struct

以下程序存储每个单词，然后将它们打印出来并多次出现。
全局`typedef`声明：

```
typedef struct {
    char * word;
    int occ;
}
words;
words *data=NULL; 
```

我的搜索功能有问题。我创建了一个返回的函数`int`，如下所示：（`max`是结构数组的不断更新的大小，这就是为什么我在`EOF`达到之后调用搜索函数。）

```
int search(char *word,int max)
{
    int i;
    for(i=0; i<max; i++)
    {
        if(!strcmp(data[i].word,word)) return i;
    }
    return -1;
} 
```

但我注意到我应该编写一个具有该原型的搜索函数：

```
struct abc *find(char *word) 
```

所以我创建了以下代码：

```
struct words *findword(char *word)
{
    struct words *ptr;

    for (ptr = data; ptr != NULL; ptr++) {      /* IS THE STOP CONDITION OK? */
        if (strcmp(word, ptr->word) == 0)
            return ptr;
    }
    return NULL;          

} 
```

我在编译过程中收到很多错误：

> reverse.c：在函数'findword'中：
> 
> reverse.c:73：警告：来自不兼容指针类型的赋值
> 
> reverse.c:73：错误：指向未知结构的指针的增量
> 
> reverse.c:73：错误：指向不完整类型的指针的算术运算
> 
> reverse.c:74：错误：取消引用指向不完整类型的指针
> 
> reverse.c：在函数'main'中：
> 
> reverse.c:171: 错误: 'which' 未声明（在此函数中首次使用）
> 
> reverse.c:171：错误：（每个未声明的标识符只报告一次
> 
> reverse.c:171：错误：对于它出现的每个函数。）
> 
> 制作：*** [reverse.o] 错误 1

* * *

`which`是`int`分配给我第一次编写的搜索函数的返回的变量。错误`which`很容易修复，但我不知道如何替换它（使用我的基本搜索功能的解决方案）：

`data[which].occ++;`

如何修复它以使其适用于我的新搜索方法？

* * *

**编辑**

`main()`添加：

```
int main(int argc, char **argv)
{
    char *word;
    words *temp;
    int c,i,num;
    /*int which;*/
    FILE *infile;

    if(argc!=2) {}      
    if((infile=fopen(argv[1],"r"))==NULL) {}
    num=0;
    while(1)
    {
        c=fgetc(infile);
        if(c==EOF) break;
        if(!isalpha(c)) continue;
        else ungetc(c,infile);
        word=getword(infile);
        word=convert(word);
        /*which=search(word,num);*/ 
        if(findword(word))
        {
            if(!(temp=realloc(data,sizeof(words)*(num+1))))
            {}
            else
                data=temp;
            data[num].word=strdup(word);
            data[num].occ=1;
            num++;
        }
        else
            data[which].occ++;

        free(word);
    }
    sort(num-1);
    for(i=0;i<num;i++)
    {}
    free(data);
    if(fclose(infile))
    {}  
    return 0;
} 
```

我已经离开`{}`了不相关的代码片段，例如。错误处理。

* * *

**EDIT2** 我在上面要求的东西是固定的。但是，我现在遇到了段错误。我会给出整个代码的链接，我不想把它放在一个编辑过的帖子中，因为它会造成很大的混乱。Seg 错误是由第 73 行和第 152 行引起的（strcmp 无法正常工作）。希望完整的代码更容易理解。 [完整代码](http://pastebin.com/t3t7Cr5D)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:00:20.467

```
for (ptr = data; ptr != NULL; ptr++) {    
/* IS THE STOP CONDITION OK? */ 
```

不，您的指针只会不断增加。在该代码中唯一会使其为 NULL 的是整数溢出。如果您将数据区域预设为 0，您可以查看它指向的内容，看看它是否为 NULL：

```
#define NUM_WORDS 100
data = calloc(NUM_WORDS,sizeof(words)); 
```

或者

```
#define NUM_WORDS 100
int bytes = NUM_WORDS * sizeof(words);
data = malloc(bytes);
memset(data,0,bytes); 
```

……

```
for (ptr = data; ptr->word != NULL; ptr++) { 
```

如果您不想将数据区域预设为 0，那么您必须将当前保存在数据区域中的结构的当前数量传递给您的函数，以便知道要循环多少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T13:38:16.333

问题出在你的 findword 函数上，让我们遍历所有行

```
struct words *ptr; 
```

这不是你要做的。您在定义结构时使用的`typedef`允许您不再需要编写`struct`。这就是您收到错误消息的原因：`reverse.c:73: error: increment of pointer to unknown structure`. 你想要的只是：

```
words *ptr; 
```

接下来，循环：

```
for(ptr=data; //This is fine, you're assigning your local ptr to the global data. I assume that's something valid

ptr != NULL; //That could OK too... we can loop while ptr is not NULL
ptr++)       //This line makes no sense... 
```

您可能想查看 for 循环如何再次工作，关键是您正在递增某些内容，直到它达到一个条件。ptr++ 也会移动到您指向的位置，因此您将不再指向您的结构。

我需要查看您的`main()`功能以了解您要完成的工作，但根据您必须遵循的原型，我认为最简单的解决方案是：

```
void main()
{
    // init your vars
    bool more_words_to_add = true;
    words *ptr = NULL;
    int i;

    // populate your array of words
    while(more_words_to_add) {
        for(i = 0; i<max; i++) {
          if(ptr = findword("word"))  //if we find the word
            ptr->occ++;  //increment the number of times we found it
          else {
            //I don't know what you want to do here, it's not clear what your goal is.
            //Add the new word to your array of words and set occ to 1,
            //then increment max because there's one more word in your array?
          }
        }
        //get the next word to fine, or else set more_words_to_add = false to break
    }
} 
```

如果这种类型的解决方案是您想要做的，那么您可以调整您的 findwords 功能非常简单：

```
struct words *findword(char *word)
{
    words *ptr = data;
    if (strcmp(word, ptr->word) == 0)
        return ptr;
    return NULL;
} 
```

**编辑：**对于您的新错误，我怀疑问题出在您的内存分配上，请参阅这个使用结构的简短示例：

```
words *findword(char *word)
{
    words *ptr = data;
    if(strcmp(word, ptr->word) == 0)
      return ptr;
    return NULL;
}

int main(){
    words *ptr;

    data = realloc(data, sizeof(words));
    data->word = "hello";                //DO NOT SKIP THESE LINES
    data->occ = 0;                       //DO NOT SKIP THESE LINES

    if(ptr = findword("hello")) {
      ptr->occ++;
      printf("I found %d %s's\n",ptr->occ, ptr->word);
    }
} 

mike@linux-4puc:~> ./a.out 
I found 1 hello's 
```

您可以在这里看到您需要为全局结构分配一些内存，然后您可以在其中存储数据并将指针传递给它。

**编辑2：**

您的`main()`代码执行此操作：

```
if((ptr = findword(word)))
{
     //do stuff
}
else
  ptr->occ++; 
```

那是行不通的，因为如果 findword() 失败它返回 NULL，所以在 if 检查 ptr 设置为 NULL，然后在 else 你试图尊重 NULL。如果（请记住，我并没有真正阅读您的逻辑，所以这取决于您）您真的想增加 ptr->occ 如果找不到单词，那么您需要这个：

```
if(findword(word))
{
     ptr = findword(word);
     //do stuff
}
else
  ptr->occ++; //increments the current ptr's occ, no new ptr was assigned. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T12:21:20.773

您的程序中没有这样的东西`struct words`；有一个未命名的`struct`类型，以及该类型的 typedef `words`。要么使用`struct words`，要么`words`始终如一。

然后你需要更换

```
data[which].occ++; 
```

和

```
result->occ++; 
```

`result`新搜索功能的返回值在哪里。

# html - 为什么这个 div 元素会忽略我的 z-index 和 width 设置？

> ID：12476877
> 
> 赞同：2
> 
> 时间：2012-09-18T12:18:14.780
> 
> 标签：html, css

我尝试使用 HTML+CSS 生成简单的内联信息弹出窗口，但我无法使其按预期工作。特别是，弹出 div 容器会忽略我的*最大宽度*和*z-index*设置。

我[在 jsfiddle 上发布了一个小演示](http://jsfiddle.net/NMh8j/2/)。

有人可以启发我吗？我错过了什么？提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:26:42.077

您需要将位置设置为绝对/相对/固定，以便 z-index 工作[http://jsfiddle.net/NMh8j/12/](http://jsfiddle.net/NMh8j/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:25:28.570

如果您更改`.faq>.body`为`position:fixed`，则会观察到 240px 的宽度，并且`top : 12px`将弹出窗口移动到底层 ? 上。然后，您可以放下`left-20px`以及它会自行居中。

[jsFiddle 更新](http://jsfiddle.net/NMh8j/13/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T12:26:51.420

您`.head`没有指定任何位置，请将您的 CSS 更改为：

```
.faq:hover>.head { 
   position: relative;
   border-color:#cccccc; 
   border-bottom-color:#ff0000; 
   z-index:100;
} 
```

`z-index`需要`position`修复属性（`fixed`, `absolute`, `relative`.. 但**不是** `static`, 这是默认值）

# scala - scala中模式匹配列表的语法解释

> ID：12476878
> 
> 赞同：2
> 
> 时间：2012-09-18T12:18:17.570
> 
> 标签：scala, pattern-matching

我正在阅读[这篇](http://blog.tmorris.net/the-power-of-type-classes-with-scala-implicit-defs/)博文，但我无法理解部分代码。

```
object O {
  def maximum(x: List[Int]): Int = x match {
  case Nil => error("maximum undefined for empty list")
  case x :: y :: ys => maximum((if(x > y) x else y) :: ys)
  case x :: _ => x
 }
} 
```

请解释代码`maximum((if(x > y) x else y) :: ys)`

条件如何`if`成为方法的一部分`maximum`？
我知道如果条件不完全是一个参数。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-18T12:24:27.797

在 Scala 中，`if`是表达式，而不是语句。

在 REPL 中试试这个：

```
scala> val x=1; val y=0
x: Int = 1
y: Int = 0

scala> val test=if(x > y) x else y
test: Int = 1 
```

`if`评估为 1 并且 1 分配给测试。在 Java`if`中可以用条件运算符表示`(x > y) ? x : y`

现在，您有一个`maximum`以 a`List[Int]`作为参数的函数。 调用 maximum （递归地），并在与（取决于 if 计算结果）到`maximum((if(x > y) x else y) :: ys)`之间添加一个列表。`x``y``ys`

# php - 为什么 __destruct 中的逻辑

> ID：12476881
> 
> 赞同：3
> 
> 时间：2012-09-18T12:18:21.173
> 
> 标签：php, design-patterns

我找到了以下代码。这是一种特定的模式，还是像这样构建代码的原因 - 还是只是假的？

```
class ExportCSV extends Export
{
    // some private and public vars

    public function __construct($arg)
    {
    // [...]
        new CustomerReport($this);
    }

    public function procCallback($proc)
    {
        switch($proc){
            case "customer":
                new InvoiceReport($this);
                break;
            case "invoice":
                new PrepaymentReport($this);
                break;
            case "prepayment":
                new RefundReport($this);
                break;
            case "refund":
                $this->sendMail();
                break;
        }
    }
}

class CustomerReport extends Foobar
{
    private $inst;
    public function __construct($inst)
    {
        $this->inst = $inst;
        $this->exportCustomers($inst->from, $inst->to);
    }
    public function __destruct()
    {
        $this->inst->procCallback("customer");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:42:22.597

正如raina77ow所说，是一种模式的实现。此外，您必须考虑在应用程序生命周期中对象被销毁后要做什么。让我们考虑以下示例（请注意，这只是一个示例！）

假设您正在尝试实现 MVC 模式，并且您是应该制作“视图部分”的人。那么你需要什么？您需要获取请求中生成的所有变量，一旦它们准备好在响应中使用（通过控制器和模型），它们应该被呈现到视图中。一种方法（当然还有其他方法）是通过魔术方法 __destruct() 实现此模式（观察者）。例如这样的：

```
// your code here
public function __destruct() {
    $this->grabAllTheVarsAndRenderThem();
    // or you can include the views file
    extract($this->viewParams);
    include_once('my_file_view.php');
} 
```

这只是一个示例，顺便说一句，非常冗长（*如您在方法名称中所见*）。但是这个例子背后的想法是，*在对象被销毁之前绑定一些行为*。

当然，在很多情况下你可以——而且你应该——实现这种模式，这只是解释使用这种神奇方法的意义的一个例子。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:20:54.227

我不会在析构函数中调用显示的代码“逻辑”：它实际上是[观察者](http://www.labelmedia.co.uk/blog/posts/php-design-patterns-observer-pattern.html)模式的实现。

我在这里假设它是这样工作的：首先，当一个`CustomerReport`对象被创建时，它的构造函数将在其字段中注册一些观察对象（可能使用`$this->exportCustomers`方法，由于某些原因这里没有显示该主体） 。`$inst`然后每次这个对象的状态发生变化时，这些观察对象都会得到通知。而且，当然，这个对象的破坏也可以看作是改变它的状态。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:24:25.997

可能是这部分代码的原始开发人员不信任用户（也可能是这些库的同一个人 (-: )，并希望确保每个`CustomerReport`创建的人都会调用协作者对象（他们可能正在释放一些锁或其他关键资源）。

# php - PHP：即使使用 ">/dev/null 2>&1 &"，exec() 也不会在后台运行

> ID：12476882
> 
> 赞同：12
> 
> 时间：2012-09-18T12:18:26.353
> 
> 标签：php, process, background, exec

我在我的 php 脚本中调用它：

```
 exec("gutschein.php >/dev/null 2>&1 &"); 
```

调用脚本（生成 pdf 并通过电子邮件发送）可以工作，但该进程**没有在后台运行**（我使用gutschein.php 中的 sleep 语句检查了它）。浏览器一直挂起，直到 Gutschein.php 的执行完成。

我还检查了以下内容：

```
 exec("/usr/bin/php gutschein.php >/dev/null 2>&1 &"); 
```

或者

```
shell_exec("/usr/bin/php gutschein.php >/dev/null 2>&1 &"); 
```

它不会改变任何东西。该脚本实际上是在 linux 服务器上运行的。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:58:54.850

尝试系统和/或通路。我之前遇到过 exec 的问题，因为它会停止尝试用数据填充返回数组，直到进程完成。

这些都将回显原始输出，因此即使它们有效，您也可能需要使用丢弃的输出缓冲区来处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:29:20.193

您可以使用屏幕：`screen -d -m /usr/bin/php gutschein.php`

[如果您需要有关选项的更多信息，这里](http://www.gnu.org/software/screen/manual/screen.html)是屏幕手册。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-28T06:29:47.110

请在[此处](http://mytechnologylog.blogspot.com/2014/03/run-php-as-background-process.html)查看我的经验。我尝试并为我工作的方式 -

```
php -q /path/to/my/test/script/cli_test.php argument1 < /dev/null & 
```

在 PHP 中，就像

```
exec('php -q /path/to/my/test/script/cli_test.php argument1 < /dev/null &') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T12:30:33.770

所有输出都必须重定向，否则只要gutschein.php 执行，脚本就会挂起。尝试

```
exec('/usr/bin/php gutschein.php &> /dev/null &'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T11:03:19.757

```
 /**
     * @author Micheal Mouner
     * @param String $commandJob
     * @return Integer $pid
     */
    public function PsExec($commandJob)
    {
        $command = $commandJob . ' > /dev/null 2>&1 & echo $!';
        exec($command, $op);
        $pid = (int) $op[0];
        if ($pid != "")
            return $pid;
        return false;
    } 
```

这对我有用..检查一下

另外，返回后台进程的processId

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-18T12:29:52.807

您能否尝试以下 2 个命令之一从 PHP 运行后台作业：

```
$out = shell_exec('nohup /usr/bin/php /path/to/gutschein.php >/dev/null 2>&1 &'); 
```

或者

```
$pid = pclose(popen('/usr/bin/php gutschein.php', 'r')); 
```

它将在后台执行命令并返回 PID，您可以使用条件检查`$pid > 0`它以确保它有效。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-09-18T12:30:19.467

浏览器可能正在等待响应，因此让您的脚本产生任何输出并终止“主进程”。一个简单的

```
die('ok'); 
```

应该做的工作。

* * *

顺便说一句，通过调用 exec 来分叉一个新进程可能不是最好的解决方案，因为新进程不是真正的子进程——这意味着你无法控制它。您可以考虑为此目的使用 pcntl ( [http://php.net/manual/de/book.pcntl.php )。](http://php.net/manual/de/book.pcntl.php)但要清楚，这个扩展也有他的缺陷，尤其是在网络服务器的上下文中。

# twig - 树枝：一年中的每个月

> ID：12476886
> 
> 赞同：6
> 
> 时间：2012-09-18T12:18:52.933
> 
> 标签：twig

这很奇怪。如果我使用`{{ j }}`，我会得到所有 12 个数字，但添加 Twig 日期过滤器只会回显“Jan”十二次。

我如何回显一年中的所有月份？我有一个创建数组吗？

```
<select>
{% for j in range(1, 12) %}
    <option>{{ j|date('M') }}</option>
{% endfor %}
</select> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-18T12:48:24.543

这是因为 twig 将 j 视为从 1970 年 1 月开始的秒数（所以它总是一月）。

从树枝文档：

> 日期过滤器接受字符串（它必须采用 strtotime 函数支持的格式）、DateTime 实例或 DateInterval 实例。

这应该有效：

```
{% for j in range(1, 12) %}
    <option>{{ date('2012-' ~ j ~ '-01') |date('M') }}</option>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-27T05:27:58.157

Cyprian给出的解决方案向我抛出了以下错误

> 函数“日期”不存在

所以我将代码更改为

```
{% for j in 1..12 %}
    <option>{{ j |date('2012-' ~ j ~ '-01') |date('M') }}</option>
{% endfor %} 
```

这对我有用....谢谢Cyprian

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-22T17:38:32.120

为了我：

```
{% for j in 1..12 %}
    <option>{{ '2012-' ~ j ~ '-01' |date('M') }}</option>
{% endfor %} 
```

工作正常。

# javascript - Javascript 代码在 FireFox 中无法正常工作

> ID：12476887
> 
> 赞同：-8
> 
> 时间：2012-09-18T12:18:53.033
> 
> 标签：javascript, jquery, firefox, background-image

```
<body>
    <a href="link" id="left-link" style="position: fixed; width:0px; height: 100%; "></a>`
    <a href="link" id="right-link" style="position: fixed; width: 0px; right: 0px; height: 100%; "></a>
    <div id="page-wrap"> .... </div>

    <script>
        (function ($) {
            jQuery(window).resize(function () {
                var width = jQuery('#page-wrap').css('margin-left');
                jQuery('#left-link').css({ width: width });
                jQuery('#right-link').css({ width: width });
            });

            var width = jQuery('#page-wrap').css('margin-left');
            jQuery('#left-link').css({ width: width });
            jQuery('#right-link').css({ width: width });

        })(jQuery);
    </script>
</body> 
```

我创建了这个脚本，但不在 Firefox 中播放，我找不到错误。Chrome 和 IE 播放正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:43:58.550

那是什么不起作用？

是应该在调整大小时执行的代码吗？通过在萤火虫中使用断点来测试它，或者只是在控制台上打印一些东西。顺便提一句。你可以这样写让它看起来更好

```
$(window).on("resize", function() { /* your stuff here */ }); 
```

还是无法调整您要操作的两个元素的宽度？在这种情况下，您应该仔细查看宽度变量的值，也许它是在 Firefox 中以某种方式计算的。

# python - 如何检查 Python 中当前正在运行的线程数？

> ID：12476888
> 
> 赞同：40
> 
> 时间：2012-09-18T12:18:53.607
> 
> 标签：python, multithreading

> **可能重复：**
> [python - 如何获取特定类启动的活动线程数？](https://stackoverflow.com/questions/4046986/python-how-to-get-the-numebr-of-active-threads-started-by-specific-class)

我是python的新手，我想随时计算正在运行的线程数......是否有任何内置支持或者我必须手动维护它（例如count veriable......）？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-09-18T12:26:57.727

[threading.active_count()](http://docs.python.org/library/threading.html#threading.active_count)似乎是您正在寻找的：

> 返回当前存活的 Thread 对象的数量

# php - PHP：将可变数量的元素推送到关联数组

> ID：12476890
> 
> 赞同：2
> 
> 时间：2012-09-18T12:19:03.140
> 
> 标签：php, associative-array

我服务器上的一个文件夹包含可变数量的图像。我正在开发一个 PHP 脚本，该脚本旨在检索那里的整个文件列表（文件名列表）并创建一个关联数组，如下所示：

```
$list = array(1=>"image1.png", 2=>"image2.png", ...); 
```

基本上，列表向量从空开始，当找到新图像时，必须将其名称添加到列表中，并增加索引： *i=>"image[i].png"*

我该如何实现这一目标？或者换句话说，我如何将一个新元素推送到我的数组中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:22:31.800

我不确定您为什么将其称为关联数组，但是如果您想向数组中添加一些东西，请这样做

```
 $list = array();
   $list[] = "image1.png";
   $list[] = ....;
   $list[] = "imagei.png"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:21:03.873

所以你实际上是在重新实施[`glob()`](http://php.net/glob)？

```
$list = glob('/path/to/images/*.png'); 
```

如果你真的想自己重新实现它

```
$i = 0;
$list = array();
while (file_exists('/path/to/image' . (++$i) . '.png'))
  $list[$i] = "image$i.png"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:22:20.097

如果您想将新项目推送到您的阵列，请尝试：

```
$list[] = "image" + ( count($list) + 1 ) + ".png"; 
```

如果您的项目的索引以 开头，请按上述说明`1`添加名称。`+1`如果您从`0`自然行为开始，请跳过它并按如下所述使用：

```
 $list[] = "image" + count($list) + ".png"; 
```

# java - 无法在 HIbernate 4 中保持 OneToMany 关系

> ID：12476896
> 
> 赞同：0
> 
> 时间：2012-09-18T12:19:35.637
> 
> 标签：java, hibernate, hibernate-onetomany

在获取一些数据时遇到问题，休眠时会持续存在

我声明了两个独立的类，License 和 MacAddress。MacAddress 可以单独存在，但也可以链接到许可证，当 hibernate 生成基础表时，它会创建许可证、MacAddress 和 License_MacAddress 表。

**执照**

```
@Entity
public class License
{
    @Id
    @GeneratedValue
    private Integer      id;

    @Column(nullable = false)
    private String      license;

    @OneToMany(fetch=FetchType.EAGER, cascade=CascadeType.ALL)
    private
    List<MacAddress> macAddresses;

    public Integer getId()
    {
        return id;
    }

    public void setId(Integer id)
    {
        this.id = id;
    }

    public String getLicense()
    {
        return license;
    }

    public void setLicense(String license)
    {
        this.license = license;
    }

    public List<MacAddress> getMacAddresses()
    {
        return macAddresses;
    }

    public void setMacAddresses(List<MacAddress> macAddresses)
    {
        this.macAddresses = macAddresses;
    }
} 
```

**MAC地址**

```
@Entity
public class MacAddress
{
    @Id
    @GeneratedValue
    private Integer      id;

    @Column(nullable = false)
    private String      macAddress;

    public Integer getId()
    {
        return id;
    }

    public void setId(Integer id)
    {
        this.id = id;
    }

    public String getMacAddress()
    {
        return macAddress;
    }

    public void setMacAddress(String macAddress)
    {
        this.macAddress = macAddress;
    }
} 
```

我想要做的是以下。

在某个时候，会创建一个新许可证并在许可证表中存储一行（这可以正常工作）

然后在稍后的时间收到用户的许可证和 MAC 地址。从数据库中检索许可证，我们检查提供的 macAddress 是否已经与许可证相关联（多个 macaddress 可以与许可证相关联），如果没有，我们想要存储 macaddress 以及许可证和 macaddress 之间的链接。

但是，尽管在 License 的 @OneToMany 注释上设置了 CascadeType.ALL，但没有存储任何 Mac 地址信息。我可以通过单独保存该对象来手动保存 MacAddress，但 License_MacAddress 表仍然为空。

**代码**

```
session = Db.getSession();
License license = getLicense(session, licenseStr);
List<MacAddress> macAddresses = license.getMacAddresses();
for(MacAddress mac:macAddresses)
{
    if(mac.getMacAddress().equals(macAddress))
    {
        return;
    }
}

MacAddress mac = new MacAddress();
mac.setMacAddress(macAddress);
session.save(mac);
license.getMacAddresses().add(mac);
session.saveOrUpdate(license);
return; 
```

为什么我不能把两者的关系坚持下去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:43:11.607

将更改保存到数据库时， Hibernate 遵循[工作单元模式。](http://martinfowler.com/eaaCatalog/unitOfWork.html)

您打开一个工作单元，将更改应用于与其关联的对象，当您关闭该工作单元时，Hibernate 会自动保存您的更改。

在 Hibernate API 的实际使用中，Unit of Work 的概念通常与 Hibernate 事务相匹配，因此在这种情况下您需要一个事务：

```
session = Db.getSession(); 
Transaction tx = null; 
try { 
    tx = session.beginTransaction(); 
    License license = getLicense(session, licenseStr); 
    List<MacAddress> macAddresses = license.getMacAddresses(); 
    for(MacAddress mac:macAddresses) 
    { 
        if(mac.getMacAddress().equals(macAddress)) 
        { 
            return; 
        } 
    } 

    MacAddress mac = new MacAddress(); 
    mac.setMacAddress(macAddress); 
    license.getMacAddresses().add(mac);     
    tx.commit(); 
} catch (RuntimeException e) { 
    if (tx != null) tx.rollback(); 
    throw e; // or display error message 
} finally { 
    session.close(); 
} 
```

**也可以看看：**

*   [13.1.1\. 工作单位](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/transactions.html#transactions-basics-uow)

# android - 如何使用选择器更改 ImageButton 图像？

> ID：12476898
> 
> 赞同：4
> 
> 时间：2012-09-18T12:19:38.697
> 
> 标签：android, onclick, selector, imagebutton

如何让 ImageButton 图像在按下时更改其图像？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-18T12:19:38.697

我希望你觉得这有帮助。

这一切都可以在 XML 中完成。

1) 将按下和未按下状态的图像导入 res/drawable-*无论哪个*文件夹

2）制作你的选择器。右键单击可绘制文件夹并选择新建/Android xml 文件。输入名称，例如“ok_button_selector.xml”，然后从下面的菜单中选择“selector”作为根元素。**您需要为屏幕上的每个按钮创建不同的选择器。**

3）在每个选择器文件中，您需要定义单击时将显示的图像，如下所示：

```
 <!-- language: lang-xml -->
    <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android" 
    >
    <item
        android:state_pressed = "true"
        android:drawable="@drawable/search_icon_pressed"/>
    <item
        android:drawable="@drawable/search_icon"/>
    </selector> 
```

它们必须按此顺序排列，因为最后一个是默认值。

4) 在您的布局文件中使用 android:onClick="myButtonClicked" 方法来定义按钮点击行为。这样就不必使用点击侦听器了。只需确保您的 java 方法具有相同的名称 :-)

5) 在 ImageButton 标签中定义属性 android:src="@drawable/ok_button_selector" 而不是通常的图像文件。

就是这样！您的 java onClick 方法中不需要任何额外的代码。

# android - 通过soap调用的android listview

> ID：12476902
> 
> 赞同：0
> 
> 时间：2012-09-18T12:19:47.053
> 
> 标签：android, parsing, android-listview, listadapter, android-ksoap2

我已经通过soap调用成功开发了android listview..现在我必须单击该列表中的任何项目意味着显示详细描述...

这是我的示例列表视图格式：

```
1 F
2 Q
3 P 
```

在这里我需要单击 1 F 项目意味着 F 显示在下一个活动上。我必须单击 2 Q 表示 Q 显示在下一个活动上。

下一个活动必须像这样：（单击 1 F 表示它转到下一个活动并显示 F）

```
F 
```

我该如何开发这个。请帮助我...

在这里，我必须单击 1 F 表示它进入下一个活动......下一个活动不会显示任何内容。

这是我的代码：

```
public class RetailerActivity extends Activity {
ListView list;
private static final String SOAP_ACTION = "http://xcart.com/customerData1";
private static final String METHOD_NAME = "customerData1";
private static final String NAMESPACE = "http://xcart.com";
private static final String URL = "http://192.168.1.168:8089/XcartLogin/services/RetailerWs?wsdl";
private static final String KEY_STATUS = "status";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.setOutputSoapObject(request);

    HttpTransportSE ht = new HttpTransportSE(URL);
    try {
        ht.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        SoapPrimitive s = response;
        String str = s.toString();
        String resultArr[] = str.split("&");
        list=(ListView)findViewById(R.id.list);

        list.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1,resultArr));
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                String status = ((TextView) view.findViewById(R.id.status)).getText().toString();

                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(KEY_STATUS, status);
                startActivity(in);                  

            }
        });     
    }

    catch (Exception e) {
        e.printStackTrace();
    }
}

} 
```

这是另一个活动：

```
 public class SingleMenuItemActivity  extends Activity {

// XML node keys
static final String KEY_STATUS = "status";

@Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    Intent in = getIntent();
    String status = in.getStringExtra(KEY_STATUS);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.status_label);
    lblName.setText(status);

}
} 
```

这是 single_list_item.xml 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent">
<!-- Name Label -->
 <TextView android:id="@+id/status_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="25dip"
        android:textStyle="bold"
        android:paddingTop="10dip"
        android:paddingBottom="10dip"
        android:textColor="#dc6800"
       />

 </LinearLayout> 
```

请帮助我..我该如何开发这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:52:36.023

在这里我认为 onItemClick 你没有得到价值所以得到像

```
list.setOnItemClickListener(new OnItemClickListener() {    
        @Override
 public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

         String status =  parent.getItemAtPosition(position).toString();
         String[] status1  = status.split(" ");
         String StrStatus = status1[1].toString();

            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(KEY_STATUS, StrStatus );
            startActivity(in);                  

        }
    }); 
```

有关将 ActivityA 传递给 B 并获得价值的更多价值，请参见[此处，](https://stackoverflow.com/questions/12426045/how-to-save-intent-data-passed-from-1st-activity-to-2nd-activity/12426139#12426139)这可能会对您有所帮助

# mysql - 将批量数据 xlsx 导入 mysql ？无法转换 xls

> ID：12476904
> 
> 赞同：4
> 
> 时间：2012-09-18T12:19:49.213
> 
> 标签：mysql, sqlite, xls, xlsx

我需要将超过 280 000 条记录导入 mysql（sqlite 也可以）。我只有 xlsx 格式。我无法将其转换为 xls 文件。是否有最新版本或任何更好的工具可用的方法或导入选项。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:30:11.697

看看您是否可以将 xslx 文件转换为 csv 格式，然后按照这篇文章：[通过 5 个简单步骤将 Excel 数据导入 MySQL](http://blog.tjitjing.com/index.php/2008/02/import-excel-data-into-mysql-in-5-easy.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T12:24:17.993

您可以使用[dbForge Studio for MySQL中的](http://www.devart.com/dbforge/mysql/studio/)[数据导入](http://www.devart.com/dbforge/mysql/studio/data-export-import.html)工具。

打开数据导入向导，选择“MS Excel 2007”格式，指定其他选项并按导入。

# c++ - 在Linux中发送缓冲区空的Socket？

> ID：12476907
> 
> 赞同：1
> 
> 时间：2012-09-18T12:20:08.480
> 
> 标签：c++, c, linux, sockets

有没有办法检查 TCP 连接的发送缓冲区是否完全为空？直到现在我还没有找到任何东西，只是想确保我的服务器没有关闭连接，同时仍有数据正在传输到某个客户端。

我正在使用 poll 来检查我是否能够在非阻塞套接字上发送数据。但是，我无法确定是否所有内容都已发送到缓冲区，是吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T14:30:40.483

在 Linux 中，您可以使用`ioctl(sd, SIOCOUTQ, &bytes)`. 详情请参阅`man ioctl`。

从远程主机可能接收到数据的意义上说，该信息并不完全可靠，因为在接收到 ACK 之前无法清空缓冲区。您可能不应该使用它在 TCP 之上添加另一个级别的流量控制。

如果远程主机实际上关闭了连接（或半关闭），那么无论缓冲区中可能有多少数据，套接字都会变得不可写。您可以通过向套接字写入 0 个字节来检测这种情况。

更困难（并且通常更有可能）的情况是远程主机变得无法访问，因为网络问题或因为它崩溃。在这种情况下，数据会堆积在发送缓冲区中，但这也可能是因为远程主机的接收缓冲区已满（可能是因为读取缓冲区的进程没有足够的资源来处理其输入）。在网络路由问题的情况下，您可能会收到路由器通知（ICMP 错误），这会使套接字不可写；不幸的是，有许多网络错误只会导致黑洞。

# c# - 为什么当我从 webservice 导入 .discomap 时，它会得到一个数组而不是一个列表？

> ID：12476911
> 
> 赞同：1
> 
> 时间：2012-09-18T12:20:15.280
> 
> 标签：c#, .net, web-services, list, class

我有一个网络服务，有这个定义的类：

```
[Serializable]
public class Parameter
{
    public Parameter()
    {
    }

    public List<MyObject> list { get; set; }
} 
```

好吧，在另一个项目/webservice 上，我通过 discomap/wsdl 导入引用，我写了这个：

```
[WebMethod(EnableSession = true)]
public void UpdateOrdineFoto(List<MyObject> list)
{
    Parameter par = new Parameter();
    par.list = list;
} 
```

但它说“不能在和之间进行隐式`System.Collections.Generic.List<MyClass.MyObject>`转换`MyClass.MyObject[]`

这是什么意思？使用`System.Collections.Generic;`和 都是`List<MyObject>`...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:24:31.533

我猜您使用某种工具（添加 WebReference 或其他东西）从 WSDL 创建了本地模型 - 对吧？

你得到了它 - 它将列表作为数组导入 - 就是这样 - 去寻找它，大多数工具都允许你改变它，或者你可以手动改变它。

PS：所以你使用了 Add Webservice - 应该是这样的： ![更改集合类型](../Images/badb33241730aaa8ca396a4e9406fe5a.png) 只需在此处更改它以使用通用列表。

# java - Java中基于非表单的文件上传servlet

> ID：12476912
> 
> 赞同：0
> 
> 时间：2012-09-18T12:20:18.817
> 
> 标签：java, file, servlets, file-upload

我正在尝试使用 HTML5 File API 将文件上传到 Java Servlet。这是用例

*   用户将文件下载到本地文件系统（使用 HTML5 文件 api）
*   完成所需的更改后，需要将文件上传回服务器。

没有基于表单的选择，需要流式传输文件。我成功地将文件转换为 base64 编码字符串并作为字符串属性发送到服务器（基于表单的上传）。

但是，我想让服务器接受 Arraybuffer 或二进制流。这在基于表单的上传中是不可能的。那么，除了基于表单的方法之外，还有其他处理 Java 文件上传的方法吗？

# c++ - 恢复 OpenGL 状态

> ID：12476913
> 
> 赞同：6
> 
> 时间：2012-09-18T12:20:20.267
> 
> 标签：c++, c, opengl-es, opengl-es-2.0

我想编写一个通用实用程序函数，它将使用 OpenGL 帧缓冲区对象来创建一个纹理，该纹理可由某些 OpenGL 程序用于第三方程序员想要的任何目的。

让我们说参数权益函数看起来像

```
void createSpecialTexture(GLuint textureID)
{
    MyOpenGLState state;
    saveOpenGLState(state);
    setStateToDefault();
    doMyDrawing();
    restoreOpenGLState(state);
} 
```

应该如何确保其行为正确并且我所做的`MyOpenGLState`任何 事情都不会影响第三方开发人员可能正在做的任何其他事情？`saveOpenGLState(state)``setStateToDefault()``restoreOpenGLState(state)``doMyDrawing``doMyDrawing`

一直困扰我的问题是 OpenGL 有很多隐式状态，我不确定我是否全部捕获。

**更新**：我主要关心的是 OpenGL ES 2.0 但我想我会更普遍地问这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:44:45.303

不要使用帧缓冲区对象来渲染纹理。而是创建一个新的 EGLContext 和 EGLSurface。然后，您可以使用`eglBindTexImage`将 EGLSurface 转换为纹理。这样你就可以保证 state from`doMyDrawing`不会污染主 gl 上下文，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:33:46.303

至于保存和恢复，`glPushAttrib`会让`glPopAttrib`你走得很远。

但是，您不能将 GL 恢复为默认状态。但是，由于`doMyDrawing()`只使用和/或修改您应该知道的状态，您可以将其设置为您需要的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T13:43:44.693

*这在很大程度上*取决于`doMyDrawing();`您对. 如果不看里面发生了什么，就不可能猜出你必须恢复什么。*`doMyDrawing();`*

 *如果对投影或模型视图矩阵的修改是在内部完成的`doMyDrawing()`，请记住最初将它们`GL_PROJECTION`和`GL_MODELVIEW`矩阵都推入并`glPushMatrix`在绘制完成后恢复它们`glPopMatrix`。您修改的任何其他状态都可以是 push 和 pop`glPushAttrib`以及正确的属性。还要记住取消绑定任何可能在 doMyDrawing() 中绑定的纹理、FBO、PBO 等。*

# android - 在 Action bar 或 TabLayout 之间选择什么？

> ID：12476922
> 
> 赞同：0
> 
> 时间：2012-09-18T12:20:45.277
> 
> 标签：android, android-tabhost, android-actionbar, android-4.0-ice-cream-sandwich

我正在为 ICS 开发。在测试活动中，我需要显示一个包含问题数量的顶部栏。**用户可以通过单击顶部栏中**的任何问题编号来跳转到任何问题。现在经过大量研究，我打算使用水平列表视图，但我想那对我不起作用。我现在有两个选择，要么使用操作栏，要么使用 tablayout。现在选择哪一个，我将第一次在他们两个中进行开发。

请参阅下图以了解我在寻找什么 - ![在此处输入图像描述](../Images/5b01678d8f4ba660c1cf0827bac40c50.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:43:46.677

我认为 TableLayout 将是最好的选择。这样您就可以额外插入视图并可以根据需要对其进行自定义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:27:13.810

如果您正在寻找向后兼容性或操作栏，请使用表格布局。

# map - pig中map的分组键值

> ID：12476929
> 
> 赞同：6
> 
> 时间：2012-09-18T12:21:21.433
> 
> 标签：map, apache-pig

我是pigscript的新手。说，我们有一个文件

```
[a#1,b#2,c#3]
[a#4,b#5,c#6]
[a#7,b#8,c#9] 
```

猪脚本

```
A = LOAD 'txt' AS (in: map[]);
B = FOREACH A GENERATE in#'a';
DUMP B; 
```

我们知道我们可以获取键中的值。在上面的示例中，我使用了包含与键**"a"**相关的值的映射。假设我不知道键，我想对关系中键的值进行分组并转储它。

```
(a,{1,4,7})
(b,{2,5,8})
(c,{3,6,9}) 
```

pig是否允许此类操作或需要使用UDF？请帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T09:55:07.323

您可以创建`UDF`将地图转换为包的自定义（使用 Pig v0.10.0）：

```
package com.example;

import java.io.IOException;
import java.util.Map;
import java.util.Map.Entry;

import org.apache.pig.EvalFunc;
import org.apache.pig.data.BagFactory;
import org.apache.pig.data.DataBag;
import org.apache.pig.data.Tuple;
import org.apache.pig.data.TupleFactory;

public class MapToBag extends EvalFunc<DataBag> {

    private static final BagFactory bagFactory = BagFactory.getInstance();
    private static final TupleFactory tupleFactory = TupleFactory.getInstance();

    @Override
    public DataBag exec(Tuple input) throws IOException {
        try {
            @SuppressWarnings("unchecked")
            Map<String, Object> map = (Map<String, Object>) input.get(0);
            DataBag result = null;
            if (map != null) {
                result = bagFactory.newDefaultBag();
                for (Entry<String, Object> entry : map.entrySet()) {
                    Tuple tuple = tupleFactory.newTuple(2);
                    tuple.set(0, entry.getKey());
                    tuple.set(1, entry.getValue());
                    result.add(tuple);
                }
            }
            return result;

        }
        catch (Exception e) {
            throw new RuntimeException("MapToBag error", e);
        }
    }
} 
```

然后：

```
B = foreach A generate 
      flatten(com.example.MapToBag(in)) as (k:chararray, v:chararray);
describe B;
B: {k: chararray,v: chararray} 
```

现在按键分组并使用嵌套的foreach：

```
C = foreach (group B by k) {
    value = foreach B generate v;
    generate group as key, value;
};
dump C;
(a,{(1),(4),(7)})
(b,{(2),(5),(8)})
(c,{(3),(6),(9)}) 
```

# javascript - 如何使用变量作为 JavaScript 路径的一部分

> ID：12476933
> 
> 赞同：0
> 
> 时间：2012-09-18T12:21:49.613
> 
> 标签：javascript

我有以下JS代码：

```
applyBefore: {
            backgroundImage: 'url(/myPath/furniture/images/careers/birds/pigeon_flap_medium.gif?' + Math.random() + ')',
            contentFlyOut: {
                direction: 'top',
                delay: 0.5,
                node: '#our-history-content'
            }
        } 
```

...这很好，但是，我需要'/myPath'的值是一个名为'binaryContextRoot'的变量的值，因为这段代码将在不同的服务器上运行，其中'binaryContextRoot'的值将因服务器而异.

我正在努力使用正确的语法在“url”路径中获取“binaryContextRoot”。

我努力了：

```
backgroundImage: 'url("+binaryContextRoot+"/furniture/images... 
```

其中“binaryContextRoute”是“/myPath”，但没有成功。无法识别/找到路径，因此显然“+binaryContextRoot+”的值不正确。

有人可以帮忙吗？:)

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T12:23:32.783

```
backgroundImage: 'url(' + binaryContextRoot + '/furniture/images...' 
```

# jquery - jquery ui对话框在单击任意位置时关闭

> ID：12476941
> 
> 赞同：1
> 
> 时间：2012-09-18T12:22:34.917
> 
> 标签：jquery, jquery-ui

如果我单击弹出框
**$(".popup").dialog({**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="css/ui-lightness/jquery-ui-1.7.2.custom.css" rel="stylesheet" type="text/css" />
    <script src="js/jquery-1.3.2.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui-1.7.2.custom.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $(".popup").dialog({
                autoOpen: false,
                draggable: true,
                title: "Add New Person",
                open: function (type, data) {
                    $(this).parent().appendTo("form");
                }
            });
            $("#body1")
              .bind(
               'click',
               function (e) {
                if (
             jQuery('.popup').dialog('isOpen')
             && !jQuery(e.target).is('.ui-dialog, a')
             && !jQuery(e.target).closest('.ui-dialog').length
            ) {
                    jQuery('.popup').dialog('close');
                }
               }
              );
        });
        function showDialog(id) {
            $('#' + id).dialog("open");
        }
        function closeDialog(id) {
            $('#' + id).dialog("close");
        }
    </script>
</head>
<body id="body1">
    <input type="button" onclick="showDialog('pop101');" value="Popup1" />
    <input type="button" onclick="showDialog('pop102');" value="Popup2" />
    <input type="button" onclick="showDialog('pop103');" value="Popup3" />
    <div style="background: green" id='pop101' class="popup">
    </div>
    <div style="background: orange" id='pop102' class="popup">
    </div>
    <div style="background: blue" id='pop103' class="popup">
    </div>
</body>
</html> 
```

单击按钮打开一个弹出窗口，当我们在弹出窗口之外单击时，我想隐藏弹出窗口，这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:38:25.807

您应该能够检测到单击文档中的任何位置`$(document).click(function(e) { });`- 如有必要，保留标志/布尔值以指示当前弹出状态 - （无需检查您的标记，这在过去有效，但可能不适用于您的情况/结构）或者您可以创建一个“覆盖”，它位于您网站的所有元素上，除了位于顶部的对话框，然后检测对那个支持元素的点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:41:35.417

例如看这个：

```
$(document).ready(function ()
{
    $(".popup").dialog({
        autoOpen: false,
        draggable: true,
        title: "Add New Person",
        open: function (type, data) {
            $(this).parent().appendTo("#container");
        }
    });
    $('[data-popup^="pop"]').click(function(e){
        close(); //close all opened dialogs
        e.stopPropagation(); // stop body1 click
        $('#' + $(this).data('popup')).dialog("open");
    });

    var close = function()
    {
        $('.ui-dialog:visible').find('.popup').dialog('close');
    };

    $('#body1').click(close);
}); 
```

演示：[jsfiddle.net/pXszH/2/](http://jsfiddle.net/pXszH/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:44:06.083

这似乎有效：

```
open: function() {
    var self = this;
    $(this).parent('.ui-dialog').on('click', false);
    $(document).one('click', function() {
        $(self).dialog('close');
    });
} 
```

这个想法是您捕获对话框本身内的任何点击，但允许任何其他点击落入`document`（使用“一次性”事件处理程序）并关闭对话框。

见[http://jsfiddle.net/alnitak/RJ7nt/](http://jsfiddle.net/alnitak/RJ7nt/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T05:59:27.880

@ all，谢谢你们的努力，你们太棒了..我学到了很多

工作代码在这里： http: [//pastebin.com/7CvWWqC9](http://pastebin.com/7CvWWqC9)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T12:46:33.420

[给你：jsFiddle 示例](http://jsfiddle.net/quant/43YZV/)

HTML：

```
<form id="popup-buttons">
    <input type="button" value="Popup1" data-popup-id="pop101"/>
    <input type="button" value="Popup2" data-popup-id="pop102"/>
    <input type="button" value="Popup3" data-popup-id="pop103"/>
</form>
<div style="background: green" id='pop101' class="popup">
</div>
<div style="background: orange" id='pop102' class="popup">
</div>
<div style="background: blue" id='pop103' class="popup">
</div> 
```

​ JavaScript：

```
function showDialog(id) {
    $('#' + id).dialog("open");
}
function closeDialog(id) {
    $('#' + id).dialog("close");
}    

$(document).ready(function () {
    // Handle clicks on buttons
    //$("#popup-buttons").on("click", "input", function(e) {    // for new jQuery....
    $("input[type=button]").click(function(e) {      // for old jQuery
        console.log("input click", e);
        var value = $(e.currentTarget).attr("data-popup-id");
        if (value)
            showDialog($(e.currentTarget).attr("data-popup-id"));
        else
            console.log("Error: user clicked on unexpected element");
        // Stop elements further up the DOM tree from processing this event
        e.stopPropagation();
    });

    // Handle "other" clicks
    $("html").click(function(e) {
        console.log("default click handler", e);
        $("div.popup").each(function(i,e) {
            closeDialog($(this).attr("id"));
        });
    });

    $(".popup").dialog({
        autoOpen: false,
        draggable: true,
        title: "Add New Person",
        open: function (type, data) {
            $(this).parent().appendTo("form");
        }
    });
}); 
```

# cakephp - cakePHP 使用密码更新记录

> ID：12476945
> 
> 赞同：1
> 
> 时间：2012-09-18T12:22:48.113
> 
> 标签：cakephp, model

我正在使用 cakePHP 2.0，并且正忙于为我的站点准备一个用户管理表单。问题是，当我从数据库中调用用户信息行时，它会以加密形式读取密码，然后用长字符串填充表单元素（我假设是加密密码）。

保存时，我的验证规则中断，因为我限制为 8 个字符（这是一件好事，因为我不想保存密码的加密版本）。

我也不能将该字段留空，因为它可能会导致人们再次保存并未能通过验证规则（未输入密码）

克服这个问题的最佳方法是什么？我想过用 8 个字符的虚拟密码替换该行的填充密码并进行验证检查，但是，这不起作用，因为 a) 有人可以使用相同的密码，并且 b) 我需要再次查找以获取原始密码再次这没有意义。

有什么帮助吗？

```
 // Controller EDIT:
 public function edit($id = null) {
    $this->User->id = $id;
    if(!$this->User->exists()) {
       $this->Session->setFlash(__('The user does not exist'));
       $this->redirect(array('action' => 'index'));
    } else {
        if($this->request->is('post') || $this->request->is('put')) {
            if($this->User->save($this->request->data)) {
                $this->Session->setFlash('The user has been updated','default',array('class'=>'success'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
            }
        }
        $this->request->data = $this->User->read(null, $id);
        $userTypes = $this->User->UserType->find("list");
        $userStatuses = $this->User->UserStatus->find("list");
        $this->set(compact("userTypes","userStatuses"));
    }

}

 // HTML Form:
 <?php echo $this->Form->create('User');?>
<fieldset>
    <legend><?php echo __('Modify User '); ?></legend>
    <h3><?php echo $this->Html->link("Return to user index",array("controller" => "users","action" => "index")); ?></h3>
<?php
    echo $this->Form->input('username');
    echo $this->Form->input('password',array("id" => "profilePassword","empty" => true, "autocomplete" => "off"));
    echo $this->Form->input('company');
    echo $this->Form->input('first_name');
    echo $this->Form->input('last_name');
    echo $this->Form->input('telephone');
    echo $this->Form->input('fax');
    echo $this->Form->input('user_status_id');
    echo $this->Form->input('user_type_id');
?>
</fieldset>
 <?php echo $this->Form->end(__('Update'));?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:46:04.963

如果密码为空，您应该取消设置密码（用户不想更改它）

在保存模型之前，请尝试：

```
if(empty($this->request->data[$this->alias]['password'])) {
    unset($this->request->data[$this->alias]['password']);
} 
```

这样，如果用户想要更改密码，它将被验证，如果他不更改它，它将不会更新并通过验证。您也不能在验证规则中要求密码字段，否则如果用户不更改密码，它将永远不会通过。而是设置诸如长度限制之类的规则...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T08:14:43.327

通过参数中的字段数组指定要在查找调用中检索的字段，只需不要获取密码字段，这不会在表单中填充密码字段，并且无需取消设置请求变量。

此外，如果您不想执行我上面所说的操作，请在 Model::save() 调用中指定字段的名称，简单地不要将密码字段放在字段数组中。

# vb.net - 使用 .Net 将数据导出到 Excel，尝试访问生成的文件时收到错误消息

> ID：12476951
> 
> 赞同：1
> 
> 时间：2012-09-18T12:23:02.723
> 
> 标签：vb.net, export-to-excel

我正在尝试使用 vb.net framework 3.5 将数据从 sqlServer 导出到 MS Excel 文件，一切正常，当您保存文件时打开保存或打开对话框，但尝试访问文件时我得到一个“Excel 无法打开文件 'generated.xlsx'，因为文件格式或文件扩展名无效。验证文件没有损坏并且文件扩展名与文件格式匹配”消息。我已经安装了 MS Office 2007。

PS 我采用模板 Excel 文档并将数据合并到其中以生成另一个文档。

我的代码如下

```
 Response.Clear()
    Response.ContentType = "application/ms-excel"
    Response.AddHeader("Content-Disposition", "attachment;filename=generated.xlsx")
    ExportToExcel(dt)
    Response.Flush()
    Response.End() 
```

并将以下内容添加到 web.config 文件中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:46:49.227

您可以尝试将文件重命名为 .xls。如果可行，那么您需要将扩展​​名从 .xlsx 或更可能将 mime 类型更改为

```
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" 
```

有关 Office 2007 的更多 MIME 类型，请参见[http://technet.microsoft.com/en-us/library/ee309278(v=office.12).aspx](http://technet.microsoft.com/en-us/library/ee309278(v=office.12).aspx)。

为了澄清我之前的帖子，您是否转到已保存的文件并将扩展名更改为 .xls？如果您将 excel 文件保存为 office 2003，然后将扩展名更改为 .xlsx，则会收到错误消息“excel 无法打开文件，因为文件格式或文件扩展名无效”

# c# - ADO.NET：从一张表中获取数据到另一张表？

> ID：12476953
> 
> 赞同：1
> 
> 时间：2012-09-18T12:23:16.367
> 
> 标签：c#, .net, sql, ado.net, sqlcommand

有谁知道或有从一张表到另一张表的数据的例子？

它使用的是 SQL SERVER EXPRESS，并且 2 个表实际上是相同的，1 个被前端客户端用作临时表。所以我的后端客户端需要将项目从临时表移动到我的其他表。

我是否需要使用仅向前游标和 for 循环？

我假设我打开一个连接，使用命令对象来查询将返回到的数据库`DataSet`？

我遍历for循环并使用`COMMAND`对象调用插入记录`ADO.NET`

没有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:29:50.233

如果两个表的列相同：

```
INSERT INTO TABLE_1
SELECT * FROM TABLE_2 
```

如果不是所有的列都相同，您可以这样做：

```
INSERT INTO TABLE_1 (common_column1, common_column2, common_column3)
SELECT common_column1, common_column2, common_column3 FROM TABLE_2 
```

之后，您可以更新不相等的列。或者，您可以在不相等的列上插入硬编码值：

```
INSERT INTO TABLE_1 (common_column1, common_column2, common_column3, diff_column_1, diff_column_2)
SELECT common_column1, common_column2, common_column3, '1', '2' FROM TABLE_2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:26:16.597

您只能在 SQL 中执行此操作，例如：

```
SELECT *
INTO theNewTable
FROM FirstTable dept
WHERE 1 = 1; 
```

放入存储过程或直接作为命令执行。

**请注意：**将[`INTO`](http://msdn.microsoft.com/en-us/library/ms188029.aspx)创建一个与第一个表结构相同的新表，并将第一个表中的所有行复制到其中。如果您只想创建表而不填充行并将它们复制到新创建的表中，我们使用一个总是假的表达式。例如“1 = 0”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T12:26:22.467

您可以使用 `DataTable.Copy`

[http://msdn.microsoft.com/fr-fr/library/system.data.datatable.copy.aspx](http://msdn.microsoft.com/fr-fr/library/system.data.datatable.copy.aspx)

你也可以使用`DataTable.ImportRow`

链接：http: [//msdn.microsoft.com/fr-fr/library/system.data.datatable.importrow.aspx](http://msdn.microsoft.com/fr-fr/library/system.data.datatable.importrow.aspx)

TSQL：您也可以`INSERT SELECT`在存储过程中使用：查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T08:40:37.417

您可以使用此插入数据

```
INSERT INTO TABLE (columnname1, columnname2, columnname3,.....)
SELECT columnname1, columnname2, columnname3 FROM TBL 
```

# jquery - 从 url 开始的标签顺序

> ID：12476956
> 
> 赞同：0
> 
> 时间：2012-09-18T12:23:24.353
> 
> 标签：jquery, html, browser

是否有可能以某种方式做到这一点，以便当您在浏览器的 url 栏中并按 TAB 键时，您会转到页面上的第一个输入字段，而不是您的书签或其他内容？

使用 focus() 可能是一种解决方法，但这不是我想要的。

所以焦点在 URL 栏中，用户按 TAB，焦点转到第一个输入字段:)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:25:28.777

这对于 jQuery 是不可能的，因为您正在尝试更改浏览器软件的“标签索引”。这超出了 jQuery 的限制。IE。它在[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)之外。

如果有办法改变它，我怀疑是否可以跨浏览器进行，并且可能仅适用于您的浏览器软件的特定实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:04:30.760

是的，您可以通过设置[`tabindex`attributes](http://www.w3.org/TR/html401/interact/forms.html#adef-tabindex)来做到这一点，就像您设置任何其他属性一样。如果您希望在脚本中而不是直接在 HTML 中执行此操作，则只需使用该`attr()`方法。

详细信息取决于页面结构和所需的行为，您需要了解`tabindex`属性如何指定跳转顺序。考虑一个非常简单的情况，您只有一个包含导航链接和包含字段`<div class=nav>`的页面的另一部分。`input`假设您希望首先显示字段，并且仅在它们之后显示导航链接。然后你可以写：

```
$('input').attr('tabindex', 1);
$('.nav a').attr('tabindex', 10000); 
```

在一个简单的例子中就是这么简单，因为共享相同`tabindex`值的元素按照它们在 HTML 源代码中出现的顺序被标记。

# ruby-on-rails - 澳大利亚的 Heroku-Like 服务

> ID：12476957
> 
> 赞同：1
> 
> 时间：2012-09-18T12:23:26.977
> 
> 标签：ruby-on-rails, heroku

一段时间以来，我一直在将 Heroku 用于客户端 Rails 站点。

我现在有一个新客户，想使用 Heroku 进行开发和生产，但是客户担心将他们的数据存储在澳大利亚以外。对于其业务类型的数据存储位置，显然存在一些隐私、责任和法律问题。

谁能推荐一个位于澳大利亚的类似 Heroku 的服务提供商？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-18T15:34:43.247

我相信这家公司在云中托管 Rails 应用程序，总部位于澳大利亚：`<redacted>`

然而，这是一个非常奇怪的要求。我不太确定使用 Heroku 并将文件存储在 S3 或类似设备上会是一个大问题。

**编辑：看起来好像最初发布的网站不再活跃。**

# ruby-on-rails-3 - 在 Ubuntu 12 服务器上部署 Rails 应用程序

> ID：12476966
> 
> 赞同：0
> 
> 时间：2012-09-18T12:24:00.930
> 
> 标签：ruby-on-rails-3, deployment

我对将代码部署到服务器完全陌生。有人可以为我提供部署我目前在 Heroku 中部署的 ruby​​ 应用程序的步骤。我正在使用 Rails 3.2。并想将其部署到我的 ubuntu 12 服务器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:43:19.037

试试这个： http: [//modrails.com/documentation/Users%20guide%20Apache.html](http://modrails.com/documentation/Users%20guide%20Apache.html)

# php - PHP Kerberos 委托给 SQL Server

> ID：12476967
> 
> 赞同：1
> 
> 时间：2012-09-18T12:24:01.697
> 
> 标签：php, sql-server, apache, kerberos

有没有办法将 Apache + PHP 上的 Kerberos 身份验证的会话委托给 SQL 服务器连接？我们想要完成基于用户的与 SQL Server 的连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:18:30.353

不，PHP MSSQL 和 ODBC 扩展不提供 kerberos 身份验证。

可行的是在 IIS 中运行 PHP 并使用 PHP COM 扩展来使用 ADODB.Connection 并按照此处说明的步骤操作：http: [//support.microsoft.com/kb/319723](http://support.microsoft.com/kb/319723)

# iphone - iPhone Dev - 从 Plist 编辑数组中的对象

> ID：12476968
> 
> 赞同：0
> 
> 时间：2012-09-18T12:24:09.370
> 
> 标签：iphone, arrays, object, plist, save

我有一个 Plist，其中有许多 Array。在这些数组中是我正在读取的不同对象，但是我在编辑数组中的这些对象然后再次将数组保存回 Plist 文件时遇到了困难。

我已经像这样阅读文件了......

```
Array = [myArrays objectAtIndex:arrayCounter]; //This tells it which Array to load.

myObject = [Array objectAtIndex:0]; //This reads that object in the array. (This is what I want to edit.) 
```

我想知道如何编辑该对象（它是一个字符串），然后将其保存回数组中，然后将该数组保存回存储它的 Plist 文件中。

提前致谢！

PS - 如果需要，我愿意发布更多代码或信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:54:32.763

您不能将数据保存在应用程序的主包中，而是必须在文档目录中执行如下操作：

```
 NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *plistFilePath = [documentsDirectory stringByAppendingPathComponent:@"Data.plist"];

if([[NSFileManager defaultManager] fileExistsAtPAth:plistFilePath]) 
{//plist already exits in doc dir so save content in it

 NSMutableArray *data = [NSMutableArray arrayWithContentsOfFile:plistFilePath];
 NSArray *arrValue = [data objectAtIndex:arrayCounter];

 NSString *strValue = [arrValue objectAtIndex:0];
 strValue = [strValue stringByAppending:@"hello"]; //change your value here

 [[data objectAtIndex:arrayCounter] replaceObjectAtIndex:0 withObject:strValue]; //value replaced
 [data writeToFile:plistFilePath atomically:YES];
}
else{ //firstly take content from plist and then write file document directory. it will be executed only once

 NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"Data" ofType:@"plist"];
 NSMutableArray *data = [NSMutableArray arrayWithContentsOfFile:plistPath];
 NSArray *arrValue = [data objectAtIndex:arrayCounter];

 NSString *strValue = [arrValue objectAtIndex:0];
 strValue = [strValue stringByAppending:@"hello"]; //change your value here

 [[data objectAtIndex:arrayCounter] replaceObjectAtIndex:0 withObject:strValue]; //value replaced
 [data writeToFile:plistFilePath atomically:YES];

} 
```

# java - 最简单的 gui 工具包，用于 java 学习和使用

> ID：12476972
> 
> 赞同：4
> 
> 时间：2012-09-18T12:24:17.813
> 
> 标签：java, qt, user-interface, gtk, gnome

我想学习java的GUI开发。任何人都可以向我推荐一些易于学习和使用的 GUI 小部件工具包。我还想知道该工具包的优秀 GUI 设计师。该工具包应该与 gtk 和 qt 很好地集成。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T12:52:25.110

好吧，我真的不知道你为什么需要与 gtk 和 qt 集成。当您在 java 中谈论桌面 gui 时，基本上有 4 个主要选项。

1.  AWT - 非常过时，除非你真的不需要，否则不要使用它

2.  SWT - 更好的是，你会得到看起来像 Eclipse 的用户界面（它是用 SWT 编写的）。很多人声称它比 Swing 快（见选项 3）

3.  Swing - java 标准库的一部分。被开发为 AWT 的替代品。非常稳固（~12-13 岁）。实现平台独立（您的小部件在所有操作系统上看起来都相同）。在现代 Java 版本中也相当快。非常灵活。如果必须使用 java，我建议使用 Swing 或 SWT。我更喜欢 Swing，但这只是我的意见。缺点 - “原样”需要大量编码，而且您看不到页面的实际外观（没有标记）。不使用任何类型的脚本语言。在 Swing 之上，您可以使用 Apache Pivot 之类的东西，但它的故事完全不同。

4.  爪哇外汇。开发为“下一代 ui”平台。需要 java fx 编译器（它不是 java 代码，而是编译成字节码的东西）。看起来很漂亮，而且本身就是一个很棒的平台，它可以被认为是 Flex 和 Silverlight 的竞争对手。主要缺点是它没有那么广泛，因为它在竞争对手之后变得可用太晚了。因此，它的社区相对较小。

我不知道与 QT/GTK 的集成，所以我不能告诉你太多

希望这可以帮助

# rubygems - 手动从 FSSM 过渡到 Sass 的 Listen gem？

> ID：12476982
> 
> 赞同：3
> 
> 时间：2012-09-18T12:24:38.560
> 
> 标签：rubygems, sass, compass-sass

嗨：我正在尝试在[http://thesassway.com/beginner/getting-started-with-sass-and-compass](http://thesassway.com/beginner/getting-started-with-sass-and-compass)上做关于 Sass 的初学者教程。当我在命令行中编写 'compass watch sass-test' 代码时，我从 FSSM 的开发人员那里收到了这条消息：“亲爱的开发人员在您的项目中使用 FSSM，此时 FSSM 基本上已经死了。进一步的开发将在共享警卫/监听项目。如果您需要帮助过渡，请告诉我们”--Travis Tilley

我在“commands”文件下找到了一个具有 FSSM 的文件，即“watch_project.rb”，并试图将 fssm 或 FSSM 的所有实例更改为监听甚至 LISTEN，并收到许多错误消息 -

```
`C:\RailsInstaller>compass watch sass-test --trace
NameError on line ["81"] of C: undefined local variable or method `listen' for #
<Compass::Commands::WatchProject:0x29ee858>
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/compass-0.12.2/lib/compas
s/commands/base.rb:18:in `execute'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/compass-0.12.2/lib/compas
s/commands/project_base.rb:19:in `execute'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/compass-0.12.2/lib/compas
s/exec/sub_command_ui.rb:43:in `perform!'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/compass-0.12.2/lib/compas
s/exec/sub_command_ui.rb:15:in `run!'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/compass-0.12.2/bin/compas
s:30:in `block in <top (required)>' 
```

等等....

关于如何过渡到“听”并摆脱 FSSM 的任何想法？我确实看到了 Sass 的变更日志，并且问题在第 3.1.16 项中的 FSSM 弃用中，并且他们正在从 FSSM 过渡到 Listen，但它并没有告诉你如何去做。有任何想法吗？

谢谢！

维加斯维克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:43:07.250

此消息针对 sass 开发人员。你不必做任何事情。

# linux - 将文件从本地机器移动到集群

> ID：12476993
> 
> 赞同：2
> 
> 时间：2012-09-18T12:25:06.130
> 
> 标签：linux

所以我知道这听起来很简单，因为我确信它是。我知道当你想移动一个文件时，你可以在 linux 终端中使用 cp 或 mv 从一个目录移动到另一个目录。我的问题是，当您想将文件从本地机器移动到集群时，您该怎么做。

要访问集群，我通过 ssh 进入它，并且在那里有一个目录。我试过绝对文件路径，但这显然行不通。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T12:39:45.330

您使用以下`scp`命令：

`scp \path\to\your\file.txt user@cluster_address:\path\in\cluster`

然后它会要求您输入密码，这与`ssh`.

另一种选择是您也可以使用挂载集群机器的目录，`sshfs`然后您可以正常执行`cp`并`mv`在挂载的目录中。

# python - 从列表中删除重复项，保持最新

> ID：12476998
> 
> 赞同：2
> 
> 时间：2012-09-18T12:25:33.613
> 
> 标签：python, algorithm, unique

> **可能重复：**
> [字典列表，消除一个键的重复项，按另一个键排序](https://stackoverflow.com/questions/9123831/list-of-dictionaries-eliminating-duplicates-of-one-key-sorting-by-another)

有谁知道如何从我的字典对象列表中删除重复项，其中两个键应该与 equals 进行比较，第三个是时间戳？留在列表中的对象应该是具有最新时间戳的对象。

为了消除我的问题中的任何歧义，我为我的目标提供了一个简单的测试用例：

```
from datetime import datetime
now = datetime.now()
future = datetime(now.year + 100, *now.timetuple()[1:-2])

# Elements are considered equal if A and B matches.
data = [{"A":10,"B":20,"D":now}, \
        {"A":45,"B":20,"D":now}, \
        {"A":45,"B":20,"D":future}, \
        {"A":66,"B":6,"D":future}, \
        {"A":66,"B":6,"D":now}]

def make_unique(lst):
    pass

make_unique(data)

# data should now contain: (10,20,now),(45,20,future),(66,6,future)
print(data) 
```

性能并不重要，但该列表很可能包含数千个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:37:33.647

您可以尝试创建字典`unique`并在`data`. 将元组设为`(d['A'], d['B'])`您的键，将相应的项目设为`d`您的值。然后，检查 (1) 键是否已经在字典中，以及 (2) 相应的时间戳是否比存储的时间戳更新：

```
unique = {}
for d in data:
    key = (d['A'],d['B'])
    if key in unique:
        if unique[key]['D'] < d['D']:
            unique[key] = d
    else:
        unique[key] = d 
```

然后，只需将未排序的列表检索为`unique.values()`.

# parsing - Haskell 解析器到 AST

> ID：12476999
> 
> 赞同：6
> 
> 时间：2012-09-18T12:25:40.457
> 
> 标签：parsing, haskell, abstract-syntax-tree

作为学习 Haskell（并折磨自己）的练习，我正在考虑编写一个可配置的 Haskell 代码美化器。

它将支持用 JSON 或 YAML（或更好的东西？）编写的配置文件，该文件指定诸如排序导入、排序/分组`data`和`class`语句、部分之间的行数等选项。

我正在寻找用于生成抽象语法树 (AST)**并保留注释**的 Haskell 98 解析器。解析 GHC 及其语言扩展将是一个额外的好处。

在没有这样的事情的情况下，我想我可以编写一个递归下降解析器，或者使用 Parsec 或解析器生成器。也许滚动我自己会增加学习（和折磨:-)）。

是否有一个完整的 Haskell->AST 解析器在开源许可下可用？如果我在这个项目上取得任何进展，我会把它放在 github 上。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-18T12:53:02.610

包中有一个解析器[`haskell-src-exts`](http://hackage.haskell.org/package/haskell-src-exts)。解析器不仅解析大部分 GHC 扩展；它还识别常见的扩展，例如语法 XML 文字等。[`parseModuleWithComments`](http://hackage.haskell.org/packages/archive/haskell-src-exts/1.13.5/doc/html/Language-Haskell-Exts-Annotated.html#v:parseModuleWithComments)如果您还想访问评论信息，则应该使用该功能。

但是请注意，注释并不存储在实际的语法树中。它们存储为带有位置信息的单独评论列表。如果您确实需要将注释包含在树中，那么通过使用线性合并算法将树与列表合并（两个序列都可以被认为是“排序的”），将它们包含在树中应该是相当简单的。评论甚至可以与关联的 AST 节点一起存储，因为“带注释”的 AST 可以在每个节点中包含任意元数据（默认情况下，只有`SrcSpanInfo`）。在实际包中没有这样做的原因`haskell-src-exts`大概是因为 AST 解析器是在注释解析器之前编写的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T04:35:31.100

我编写了一个超级简单的工具，可以自动格式化 Haskell 代码。它通过使用来自`haskell-src-exts`. 你可以在[https://github.com/djv/small/blob/master/tidy.hs](https://github.com/djv/small/blob/master/tidy.hs)找到它。这可能是更灵活和更强大的东西的开始。