# StackOverflow 问答 11630000-11630999

# zend-framework - $this->fetchRow 在 Zend 框架的 phpunit 中创建失败

> ID：11630000
> 
> 赞同：0
> 
> 时间：2012-07-24T11:35:14.643
> 
> 标签：zend-framework, phpunit

我遵循[Rob Allens ZF 1 教程](http://akrabat.com/zend-framework-tutorial/)并想用一些单元测试来改进它。但是每当我运行 phpunit 命令时，我都会收到以下消息：

```
here was 1 failure:

1) IndexControllerTest::testDeleteAction
Failed asserting last controller used <"error"> was "Index"

/path/to/library/Zend/Test/PHPUnit/ControllerTestCase.php:1000
/path/to/tests/application/controllers/IndexControllerTest.php:55

FAILURES!
Tests: 4, Assertions: 9, Failures: 1. 
```

有问题的 Action 是 deleteAction，如下所示：

```
public function deleteAction() {
    if ($this->getRequest()->isPost()) {
        $del = $this->getRequest()->getPost('del');
        if ($del == 'Yes') {
            $id = $this->getRequest()->getPost('id');
            $wishes = new Application_Model_DbTable_Wishes();
            $wishes->deleteWish($id);
        }
        $this->_helper->redirector('index');
    }
    else {
        $id = $this->_getParam('id', 0);
        $wishes = new Application_Model_DbTable_Wishes();
        $this->view->wish = $wishes->getWish($id);
    }
} 
```

我跟踪错误，`$wishes>getWish($id);`所以如果我去那个函数，它看起来像这样：

```
public function getWish($id) {
    $id = (int) $id;
    $row = $this->fetchRow('id = ' . $id);
    if(!$row){
        throw new Exception("Could not find row $id");
    }
    return $row->toArray();
} 
```

看来该行`$row = $this->fetchRow('id = ' . $id);`会导致问题。我不知道为什么。所有动作都很好，他们按预期工作。知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:30:07.000

如果是纯字符串，则可以尝试使用*select()对象：*

```
public function getWish($id) {
    $id = (int) $id;
    $select = $this->select();
    $select->where('id = ?', $id);
    $row = $this->fetchRow($select);
    if(!$row){
        throw new Exception("Could not find row $id");
    }
    return $row->toArray();
} 
```

这只是一个疯狂的猜测，但谁知道呢。唯一看起来很奇怪的是查询字符串*(?)*中缺少占位符。

*FetchRow()*确实喜欢使用*select()*对象，事实上，如果您传递一个字符串，那么 fetchRow() 所做的第一件事就是构建一个*select()*。所以*也许*它只是不喜欢这个字符串。

# android - 聊天协议和客户端到客户端的连接？

> ID：11630003
> 
> 赞同：2
> 
> 时间：2012-07-24T11:35:21.630
> 
> 标签：android, ios, video-streaming, p2p

我正在寻找一种协议/API 来实现视频聊天应用程序。在这个应用程序中，客户端连接到服务器，当两个客户端开始聊天时，他们不会向服务器发送/接收数据！实际上我希望客户直接相互连接。我想要这个在 iPhone 和 Android 上。我已经搜索过，找到了 XMPP 协议，但我不确定它是否允许 p2p 连接。无论如何，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:23:50.200

您可以使用专门用于聊天目的的 XMPP 协议。这对我的工作帮助很大。他们现在可能有一个安卓版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:01:12.097

您可以使用 WIFI 或蓝牙进行 P2P 应用程序。

# python - 有没有办法根据列表中的所有数字检查一个数字？

> ID：11630004
> 
> 赞同：3
> 
> 时间：2012-07-24T11:35:24.657
> 
> 标签：python, list, python-2.7

我想知道您是否可以根据列表中的所有数字检查一个数字，例如：

```
if n % mylist == 0:
    print "Not Prime" 
```

如果你想知道，这是[这个问题](https://stackoverflow.com/questions/11629570/boolean-check-not-working-in-function "上一个问题")的延续，我希望没有关于问题频率的任何规则......：/

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T11:36:03.737

```
if any(n % x == 0 for x in mylist):
    print "Not Prime" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T11:38:09.473

...甚至更短：

```
if not all(n % x for x in mylist):
    print "Not prime" 
```

（虽然我更喜欢 jamylak 的版本 - 显式优于隐式）

# plone - 搜索和索引加权标签/类别评级，最好在克隆目录中

> ID：11630006
> 
> 赞同：5
> 
> 时间：2012-07-24T11:35:33.033
> 
> 标签：plone

我的用例是内容对象可以有加权标签：

*   文章A：java 5、MySQL 3、php 1
*   文章 B：加密 3，MySQL 2
*   ArticleC：plone 5，网络 1，安全 4，敏捷 1
*   文章D：plone4、MySQL3、php 3 ...

标签列表是用户可扩展的，值的范围固定为例如 1 - 5

现在：我怎样才能回答以下问题（最好使用portal_catalog）：

*   显示所有带有 java>2 和 MySQL>3 标记的文章
*   MySQL的平均值是多少
*   评价最高的克隆文章是什么？
*   显示所有包含 'foobar' 并且关于 plone 的文章

到目前为止，我想到或建议的可能解决方案是：

*   走 SQL
*   创建在单独目录中索引的额外“评级”内容类型（非常像参考）
*   将评级编码为“java3”、“java4”、“java5”，将它们粘贴到 KeywordIndex 中并检查 AdvancedQuery 是否可以搜索它们 [更新：是的，Between('Subject','plone3','plone5') 有效]
*   编写自定义 PluginIndex

我想虽然其他人以前也有同样的任务。关于如何（最好）继续前进的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:50:33.413

开箱即用的 Plone 无法解决此问题。可以使用不同的搜索来搜索不同的方面，并在应用程序端使用自定义编码进行一些过滤和聚合......可能会很棘手且效率低下。您可以查看 SOLR 与 Plone 的集成（collective.solr）。SOLR 应该支持开箱即用的大部分功能。特别是分面搜索是您免费获得的 SOLR 的内置功能。但是 SOLR 是您设置中的另一块砖，对于较小的站点可能会过大。此外，SOLR 集成和 SOLR 构建配方总是显得有些脆弱。

# multithreading - 用于同步的索引相关锁/互斥机制

> ID：11630011
> 
> 赞同：0
> 
> 时间：2012-07-24T11:35:50.330
> 
> 标签：multithreading, parallel-processing, locking

假设我有一个在多个线程/进程之间共享的数组（固定大小）。

是否存在用于锁定/互斥锁的（通用的、最佳轻量级的）机制，这样如果我只想从数组中的某个位置读/写，我就不必锁定对整个数组的访问？

一种蛮力方法是简单地为数组中的每个元素设置一个互斥锁。但是，这似乎有点超重，我正在寻找替代解决方案。

一个简短的例子，说明我的意思：

```
//Setup
int a[50];

void threada()
{
   lock(a,4); //supposed to lock index 4 of array a from access by other threads
   write(a,4); //writes something to index 4
   unlock(a,4); 
}

void threadb()
{
   //now all of this shouldn't block, since i'm accessing index 5, not 4
   lock(a,5); //supposed to lock index 5 of array a from access by other threads
   write(a,5); //writes something to index 5
   unlock(a,5);
}

void threadc()
{
   //all of this, however, should block if threada is already accessing it
   lock(a,4); //supposed to lock index 4 of array a from access by other threads
   write(a,4); //writes something to index 4
   unlock(a,4);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:54:29.443

您可以简单地在您提到的两种方法之间进行权衡。具有较少数量的锁，每个锁保护数组的一部分，即 K 个锁，每个锁保护 N/K 个项目。

然后，根据应用程序中的数据访问模式，您可以使用条带化（即锁 0 保护索引 0、K、2K、...锁 1 索引 1、K+1、2K+1 等。 ) 或连续策略。

# android - 带有 sw600dp 和 sw720dp 的 Android 布局

> ID：11630013
> 
> 赞同：6
> 
> 时间：2012-07-24T11:35:54.573
> 
> 标签：android, android-layout, android-screen-support

我想`600dp`在我的 android 应用程序中支持屏幕。所以我使用`layout-sw600dp`. 但我无法通过应用程序获得确切的布局。

我得到了`800 X 1280`屏幕尺寸，`layout-sw720dp`但布局尺寸有点差`720 X 1280`。

那么我能做些什么来支持`720 X 1280`in`layout-sw720dp`和`600 X 1024`in`layout-sw600dp`呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-24T11:47:09.643

对于平板电脑，您可以使用以下限定符创建布局和可绘制对象

> 布局-sw600dp 可绘制-sw600dp

这意味着至少 600dp 或更高的平板电脑屏幕可以使用此布局和可绘制。

因此，对于屏幕尺寸的标准配置限定符，您可以创建以下配置：

```
1)layout-sw480dp drawable-sw480dp

2)layout-sw600dp drawable-sw600dp

3)layout-sw720dp drawable-sw720dp 
```

参考：[这](http://developer.android.com/guide/practices/screens_support.html) 适用于表 2。屏幕尺寸的新配置限定符（在 Android 3.2 中引入）。

# routes - 未重定向到 index.html 页面的路由

> ID：11630018
> 
> 赞同：0
> 
> 时间：2012-07-24T11:36:07.787
> 
> 标签：routes, cakephp-1.3

我在 cakephp 1.3 上编码。我在将页面重定向到 index.html 时遇到问题。

我的 index.html 在 webroot 文件夹中。我所知道的 cakephp 会直接重定向到 index.html。

当我使用 URL 时，它显示错误..

```
Error: Controller could not be found.

Error: Create the class Controller below in file: app/controllers/controller.php

<?php
class Controller extends AppController {

    var $name = '';
}
?> 
```

我已经关注了一些链接，但它似乎不起作用。我也检查了谷歌。

[如何将 .html 附加到 cakephp 中的所有 URL？](https://stackoverflow.com/questions/3410611/how-can-i-append-html-to-all-my-urls-in-cakephp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:45:53.503

您不能替换 CakePHP 自己的 index.php，否则 CakePHP 将停止工作。通常你可以将文件放在 webroot 中，它可以毫无问题地工作，但根文件有点棘手，因为（AFAIK）你不能只使用 Cake 的路由来显示非 CakePHP 文件。

将您的 html 文件放在任何控制器的视图中，并将根目录路由到那里。例如，将文件命名为 index.ctp 并将其放在 app/views/static_pages/index.ctp 中。

路由器：

```
Router::connect('/', array('controller' => 'static_pages', 'action' => 'index')); 
```

控制器（static_pages_controller.php）：

```
class StaticPagesController extends AppController {
    function index() {
        // no need to do anything except use no layout file
        $this->layout = false;
    } 
} 
```

模型（static_page.php）：

```
class StaticPage extends AppModel {
    // don't use a database for this model
    var $useTable = false;
} 
```

# c# - HttpWebRequest + Windows Auth - NetworkCredential 不起作用

> ID：11630023
> 
> 赞同：7
> 
> 时间：2012-07-24T11:36:24.500
> 
> 标签：c#, asp.net, .net, security

我有一个 ASP.NET MVC 4 Web 服务。在我的开发机器上，我正在运行 IIS Express 7.5，所以我们调用 localhost:port。我已将其设置为使用 Windows 身份验证并关闭匿名。

在我的客户端上，如果我设置

```
HttpWebRequest.Credentials = CredentialCache.DefaultNetworkCredentials; 
```

有用。但是，如果我将凭据设置为我的其他 Windows 域帐户，

```
HttpWebRequest.Credentials = new NetworkCredential("lpuplett", "catsGoW00f", "ntdom")); 
```

然后我得到一个 401 Unauthorized。我是不是误会了什么？这应该工作吗？

我尝试将凭据添加到 CredentialCache 对象并设置缓存。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T18:24:46.713

从链接的重复问题中的评论：

> 您需要指定身份验证类型。当服务器通过 NTLM 身份验证挑战客户端时，将在 WebClient.Credentials 上调用 ICredentials.GetCredential 方法，其中 authType = "NTLM"。如果您使用 WebClient.Credential = new NetworkCredential(...) 没有指定身份验证类型，则客户端将无法正确响应。CredentialCache 已经实现了这个功能。– Darin Dimitrov 2009 年 11 月 5 日 14:57

# javascript - 没有php代理的跨域

> ID：11630027
> 
> 赞同：0
> 
> 时间：2012-07-24T11:36:52.173
> 
> 标签：javascript, google-maps, cross-domain, kml, http-status-code-406

在[此](http://www.tenutalasantissima.com/en/siena-e-la-toscana/)页面中，我使用 Javascript 嵌入了谷歌地图，并从加载到我的域中的静态 KML 文件加载数据。我想从存储在谷歌服务器（网络链接）上的动态 KML 文件中改进我的地图加载数据，但是由于跨域限制，这不能直接完成。我尝试使用 php 代理，但我的托管服务不允许这样做。（不要问我为什么，我收到 ERROR 406 响应，客服说这种请求被他们的过滤器阻止了！）

那么，如何在没有代理的情况下进行跨域呢？

这是提供 kml 文件的链接：[http ://maps.google.com/maps/ms?authuser=0&vps=2&hl=en&ie=UTF8&lr=lang_en|lang_fr|lang_it&oe=UTF8&msa=0&msid=201512616711333791415.0004c56e9ca3fb71ba551&output=kml](http://maps.google.com/maps/ms?authuser=0&vps=2&hl=en&ie=UTF8&lr=lang_en|lang_fr|lang_it&oe=UTF8&msa=0&msid=201512616711333791415.0004c56e9ca3fb71ba551&output=kml)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:31:21.013

如果 KmlLayer 在 Google Maps API v3（或 v2 中的 GGeoXml，或 Google Maps）中显示您的 kml，只要它是公开可用的，它就可以工作，不存在跨域问题。也许您正在自己解析它，如果是这样，那么您的问题中没有说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:45:24.137

您可以使用 JSONP 来克服跨域问题。看看这些链接：

[http://www.jquery4u.com/json/jsonp-examples/](http://www.jquery4u.com/json/jsonp-examples/)

[http://www.ibm.com/developerworks/library/wa-aj-jsonp1/](http://www.ibm.com/developerworks/library/wa-aj-jsonp1/)

# python - 在包含列表的列表中查找列表的最接近匹配项

> ID：11630031
> 
> 赞同：0
> 
> 时间：2012-07-24T11:37:15.987
> 
> 标签：python, python-2.7

我有一个包含两个元素的列表，如下所示：

```
list_a = [27.666521, 85.437447] 
```

和另一个这样的列表：

```
big_list = [[27.666519, 85.437477], [27.666460, 85.437622], ...] 
```

我想找到最接近的`list_a`match `list_b`。

例如，这里最接近的匹配是`[27.666519, 85.437477]`.

我怎么能做到这一点？

[我在这里](https://stackoverflow.com/questions/445782/finding-closest-match-in-collection-of-numbers)发现了一个类似的问题，用于查找数组中字符串的最接近匹配，但无法针对上述问题类似地重现它。

PS列表中的元素是地球上各点的坐标。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T11:40:50.830

从你的问题中，很难说出你想如何测量距离，所以我只是假设你的意思是欧几里得距离。

您可以使用该`key`参数`min()`：

```
from functools import partial

def distance_squared(x, y):
    return (x[0] - y[0])**2 + (x[1] - y[1])**2

print min(big_list, key=partial(distance_squared, list_a)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:50:43.290

假设：

*   *您打算在同一个列表列表中*多次进行此类型查询
**   查询*列表*和列表列表中*的列表都*表示 n 维欧几里得空间中的点（这里：二维空间，与来自球形空间的 GPS 位置不同）。*

 *这读起来像[最近邻搜索](http://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)。可能您应该考虑专门用于此的库，例如[scikits.ann](http://scikits.appspot.com/ann)。

例子：

```
import scikits.ann as ann
import numpy as np
k = ann.kdtree(np.array(big_list))
indices, distances = k.knn(list_a, 1) 
```

这在内部使用欧几里得距离。您应该确保您应用的距离度量符合您的接近度概念。

您可能还想看看[Quadtree](http://en.wikipedia.org/wiki/Quadtree)，这是另一种数据结构，您可以应用它来避免对整个列表列表进行强力最小搜索。*

# java - Java中用于提取的字符串操作

> ID：11630034
> 
> 赞同：-4
> 
> 时间：2012-07-24T11:37:30.287
> 
> 标签：java, string

我有一个字符串`delivery:("D1_0")`，我如何单独从中获取引号内的值。即`D1_0`独自一人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:41:18.540

您可以使用正则表达式`\"(.*?)\"`来查找该组，或者甚至更好地遍历您的字符串以查找引号`"`并读取其中的字符，直到找到另一个引号。类似的[东西](https://stackoverflow.com/a/11443609/1393766)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:42:33.000

尝试这个

```
int i = stringvariable.indexOf("(");
int j = stringvariable.indexOf(")");
String output = stringvariable.substring(i+2, j-2); 
```

您将在输出变量中获得所需的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:49:42.287

利用：

```
String str = "delivery:(\"D1_0\")";
String arr[] = str.split("[:\"()]"); //you will get arr[delivery, , , D1_0], choose arr[3]      
System.out.println(arr[3]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T11:46:19.587

“如果您的字符串始终采用这种格式，您可以使用

```
String theString = "delivery:(\"D1_0\")";
String array[] = theString.split("\"");
String result = array[1];   // now result string is D1_0

// Note: array[0] contains the first part(i.e "delivery:(" ) 
// and array[2] contains the second (i.e ")" ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T11:46:43.400

如果你的字符串是常量，因为字符串的开头不会改变，你可以使用 slice 函数

在 Javascript 中：

```
 var text='delivery:("D1_0")';
        alert(text.slice(11, 15)); //returns "D1_0" 
```

在 Java 中：

```
String text = "delivery:(\"D1_0\")";
String extract = text.substring(11, 15); 
```

# java - 监控应用程序 Web 服务请求和响应时间

> ID：11630035
> 
> 赞同：1
> 
> 时间：2012-07-24T11:37:32.160
> 
> 标签：java, web-services, rest

我有一个 Java Web 应用程序，其中运行着许多 REST Web 服务。是否有任何开源或付费工具来监控我的 Web 服务的以下项目：

*   Web 服务请求和响应时间。
*   Web 服务请求和响应 json。

如果我有任何工具可以基本上监控我的完整 Web 服务活动，那也很好。有什么建议么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:31:07.867

• Rest Web 服务请求和响应 json

看看 [Jersey - 使用过滤器](http://jersey.java.net/nonav/documentation/latest/client-api.html#d4e706) 和[如何注册过滤器](http://jersey.java.net/nonav/apidocs/1.12/jersey/com/sun/jersey/api/container/filter/LoggingFilter.html)

# flash - Flash 11.3.x + Firefox（保护模式）- 无法连接到 RTMPS 流

> ID：11630049
> 
> 赞同：0
> 
> 时间：2012-07-24T11:38:06.460
> 
> 标签：flash, firefox, streaming, wowza, rtmps

打开与 RTMPS 流的网络连接失败，没有任何通知（网络状态或错误）。这发生在具有新的 Firefox 保护模式的 Flash Player 11.3.x 上（仅适用于发布的 Flash Player 版本，仅适用于 Windows）。

在我们的 wowza 媒体服务器（版本 3.1.1）上，我们可以看到 SSL 握手失败。

有没有人解决这个问题的方法或解决方法？或者有同样的问题，可以分享你是如何解决的？

（Adobe 论坛中也已经有关于该问题的帖子，但没有回复，例如[http://forums.adobe.com/message/4576128?tstart=0](http://forums.adobe.com/message/4576128?tstart=0)））

谢谢！

# django - django-tables2 列集

> ID：11630052
> 
> 赞同：16
> 
> 时间：2012-07-24T11:38:12.593
> 
> 标签：django, django-tables2

如何告诉 django-tables2 我想在表中包含哪些列？我知道有这个[Column 属性](http://django-tables2.readthedocs.org/en/latest/#column-attributes)“可见”，可以设置为 False。但是我有一个包含许多字段的模型，并且想只显示其中的一些，因此编写所有列的完整列表，只是为了告诉它们中的大多数将不可见，这似乎不是正确的方法。

我正在寻找的是一种提供要显示的列名列表的方法，如果这是可能的，那么甚至可能让用户能够选择他想要的列。

我想到了另一个解决方案 - 默认情况下将“可见”属性设为 False，但由于它是在 Column 类中定义的，所以我仍然需要编写一个完整的列表。

由于我还没有找到任何 django-tables2 讨论论坛，所以我在这里问。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-13T09:51:12.207

指定模型字段的示例

**你的模型**

```
class Product(model.Models):
    name = model.CharField(max_length=20)
    price = model.DecimalField(max_digit=9, decimal_places=2) 
```

**你的桌子**

```
class ProductTable(tables.Table):
    actions = ProductActions(orderable=False) # custom tables.Column()
    class Meta:
        model = Product
        fields = ('name', 'price', 'action') # fields to display 
```

你也可以使用`exclude`

[相关文档条目在这里](http://django-tables2.readthedocs.io/en/latest/pages/table-data.html#querysets)

# android - Android：ScrollView 拉伸背景图片

> ID：11630060
> 
> 赞同：1
> 
> 时间：2012-07-24T11:38:47.430
> 
> 标签：android, android-layout, scrollview

我想在带有背景图像的登录表单中使用滚动视图，但图像会拉伸。

我的代码如下所示：

```
 <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:orientation="vertical"
     android:id="@+id/login_layout" >

    <LinearLayout 
        android:layout_width="250dp"
        android:layout_height="270dp"
        android:layout_marginTop="40dp"
        android:gravity="center"
        android:orientation="vertical"
        android:background="@drawable/login" >

        <LinearLayout 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="30dp"
            android:orientation="vertical" >

            <TextView 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/username_login" />

            <EditText
                android:id="@+id/username_login"
                android:inputType="text"
                android:layout_width="200dp"
                android:layout_height="30dp"
                android:paddingLeft="5dp"
                android:paddingTop="2dp"
                android:background="@drawable/edit_text" />

            <TextView 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/password_login" />

        </LinearLayout>

    </LinearLayout>

</LinearLayout>

</ScrollView> 
```

我有 2 个用户名和密码的文本编辑以及一个登录按钮

这

```
android:background="@drawable/login" 
```

是包含文本编辑和按钮的布局的背景图像

请问有什么帮助吗？

知道我在活动中设置了背景（延伸）

我在活动中设置背景

```
private void setBackground(){

        LinearLayout layout = (LinearLayout) findViewById(R.id.login_layout);
        layout.setBackgroundDrawable(application.getBackground01());

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-01-21T21:49:07.950

经过这么多研究得到了解决方案：

步骤 1：从 .xml 文件中删除以下行

```
android:background="@drawable/background" 
```

Step2(a)：如果您在 Activity 中尝试将 onCreate 设置为

```
protected void onCreate(Bundle savedInstanceState) { 
    .... 
    getWindow().setBackgroundDrawableResource(R.drawable.image_resourcename);
    ....
} 
```

Step2(b): 如果你在 Fragment 中尝试将 onCreateView 设置为

```
protected void onCreate(Bundle savedInstanceState) {
    .... 
    getActivity().getWindow().setBackgroundDrawableResource(R.drawable.image_resourcename);
    ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:58:21.557

你可以试试这段代码。希望会奏效。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/login_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/login"
    android:gravity="center"
    android:orientation="vertical" >

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <LinearLayout
            android:layout_width="250dp"
            android:layout_height="270dp"
            android:layout_marginTop="40dp"
            android:gravity="center"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="30dp"
                android:orientation="vertical" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/username_login" />

                <EditText
                    android:id="@+id/username_login"
                    android:layout_width="200dp"
                    android:layout_height="30dp"
                    android:background="@drawable/edit_text"
                    android:inputType="text"
                    android:paddingLeft="5dp"
                    android:paddingTop="2dp" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/password_login" />
            </LinearLayout>
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

# javascript - 当键是数字时，如何在 JavaScript 中对对象值进行排序？

> ID：11630062
> 
> 赞同：-2
> 
> 时间：2012-07-24T11:38:56.693
> 
> 标签：javascript, arrays, sorting, object

假设我有这样奇怪的代码：

```
var weirdo = {};
var ids = [10, 30, 11, 1, 4, 2];
var producers = ['Ford','Rover','BMW','Fiat','Renault','Mitsubishi'];
var n = producers.length;
for(var i=0; i<n; i++) {
    weirdo[ids[i]] = producers[i];
}
// unknown code ??? 
```

如何按值对怪人进行排序？这不是数组，不，我无法在填充怪人之前对生产者进行排序。

有任何想法吗？

哦，关系 id <=> producer 非常重要！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T12:08:18.053

您可以使用对象数组：

```
var items = [
  {id:10, producer:'Ford'},
  {id:30, producer:'Rover'},
  {id:11, producer:'BMW'},
  {id:1, producer:'Fiat'},
  {id:4, producer:'Renault'},
  {id:2, producer:'Mitsubishi'},
]

// or, starting from your two arrays:
var items = [];
for (var i=0; i<ids.length && i<producers.length; i++)
    items[i] = {id:ids[i], producer:producers[i]}; 
```

然后您可以[按](https://stackoverflow.com/q/7462766/1048572)id对该数组进行[排序：](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)

```
items.sort(function(a, b){ return a.id-b.id; }); 
```

...并使用 for 循环对其进行迭代。

* * *

另一种解决方案是迭代器数组，以`weirdo`正确的顺序循环遍历 id<->producer 对象 ()：

```
var weirdo = {"10":"Ford","30":"Rover",...};
var ids = Object.keys(weirdo); // if not already built somewhere

ids.sort(function(a,b){return a-b;}); // sort numeric
// loop:
for (var i=0; i<ids.length; i++) {
    var id=ids[i], producer=weirdo[id];
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T12:02:02.627

简短的回答是对象是按规范无序的。一个对象的属性就是——属性。它们按照您的要求提供，它们不是要在对象内移动的项目。

在检查时如何可视化对象完全取决于执行可视化的代理。例如，如果您要在 Chrome 中编写以下内容

```
console.log({ x: 1, a: 2 }); 
```

...它将按字母顺序显示参数。这不是对象与生俱来的东西，而只是 chrome 实现的问题。

如果您愿意，请在 chrome 中编写以下内容

```
for(key in { x: 1, a: 2 }) console.log(key); 
```

...它将记录一个`x`，后跟一个`a`，即按添加顺序显示同一对象的属性。

您当然可以确保按照属性名称的字母/数字顺序将属性添加到对象中，但这会忽略重点，因为不能保证所有实现都会保留添加的顺序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T12:04:03.800

您是否尝试过使用 Array.Sort？

[http://jsfiddle.net/gRoberts/mXwdN/](http://jsfiddle.net/gRoberts/mXwdN/)

```
var weirdo = {};
var producers = ['Ford','Rover','BMW','Fiat','Renault','Mitsubishi'];
producers.sort();
console.log(producers);
producers.map(function(item, index) {
    this[index] = item;
}, weirdo);
console.log(weirdo); 
```

编辑：由于我正在研究解决方案时问题正在更新，请根据更新的问题查找更新版本：

[http://jsfiddle.net/gRoberts/mXwdN/1/](http://jsfiddle.net/gRoberts/mXwdN/1/)

```
var weirdo = {};
var ids = [10, 30, 11, 1, 4, 2];
var producers = ['Ford','Rover','BMW','Fiat','Renault','Mitsubishi'];
ids.sort();
ids.map(function(item, index) {
    weirdo[item] = producers[index];
}, weirdo);
console.log(weirdo);​
​ 
```

# stored-procedures - SQL Server 2000：想要使用单个存储过程返回不同类型的 SQL 查询

> ID：11630064
> 
> 赞同：0
> 
> 时间：2012-07-24T11:39:00.880
> 
> 标签：stored-procedures, sql-server-2000

我在一个非常大的项目中使用 SQL Server 2000 受到限制。对于一个模块，我必须创建 3 到 10 个存储过程。为了使其易于管理，我正在编写一个存储过程来根据条件返回不同的 SQL 查询，例如：

```
If @QueryId = 'SelAllEmp'
   Select EmpId,EmpName from EMP 
ELSE IF  @QueryId = 'SelEmpById'
   Select EmpId,EmpName from EMP where EmpId= @EmpId
ELSE IF @QueryId = 'EMPDept'
   Select EmpId, DeptId, DeptName from EMPDept
...................................... 
```

我的问题是，使用这种技术是否有任何隐藏的后果或影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:39:54.453

我认为您处理此问题的方式根本无法管理。对于您在问题中显示的情况，您应该努力进行单个查询。让*客户*决定他们是否会使用该`DeptName`列 - 客户可以选择忽略它，并且知道这样做是因为它必须传递`EmpDept`参数。如果您的客户可以忽略该列，那么您的三个查询可以成为一个：

```
SELECT EmpId, EmpName, DeptName
  FROM dbo.EMP 
  WHERE EmpId = CASE 
    WHEN @QueryId = 'SelEmpById' THEN @EmpId ELSE EmpId END; 
```

此查询解决了您的所有三个条件。为避免陷入糟糕的计划，您可以将~~`OPTION (RECOMPILE)`语句添加到~~ `WITH RECOMPILE`过程中。是的，这可能会导致开销（不像 Joon 说的那么糟糕），但是我每次都会进行一些编译，而不是每隔一天就陷入一个可怕的计划。默认情况下，SQL Server 2000 无法优化单个存储过程的所有路径。

另一种选择是使用动态 SQL 构建您需要的查询。这可能会导致计划缓存膨胀，但如果频繁使用所有选项，它应该不会太糟糕。~~您可以通过使用服务器设置~~~~来避免这可能导致计划缓存膨胀的问题。`optimize for ad hoc workloads`~~

Erland Sommarskog 的两篇非常有价值的读物：

*   [T-SQL 中的动态搜索条件（SQL 2005 及更早版本）](http://sommarskog.se/dyn-search-2005.html)
*   [动态 SQL 的祸与福](http://sommarskog.se/dynamic_sql.html)

基本上，不要害怕动态 SQL，但要注意潜在的问题。

*抱歉，由于我的回答是针对较新版本的 SQL Server 的，所以回来并进行了编辑。很难记住人们出于某种原因仍在使用 SQL Server 2000。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:56:21.803

当存储过程超过一定的复杂性时，无论何时从客户端调用它都会重新编译。

这会给服务器带来开销，并且在繁忙的应用程序中，如果这种情况发生得足够多，可能会导致整体性能下降。

这是遵循这种技术的一个潜在负面后果。

此外，您的结果集会根据存储过程的输入而更改。这可能会破坏期望某个字段存在或不存在的客户。

# php - 使用 MD5 值更新 MySQL 数据库

> ID：11630070
> 
> 赞同：-5
> 
> 时间：2012-07-24T11:39:29.820
> 
> 标签：php, mysql, passwords, md5

彻底搜索了我的代码后，我可以确定此错误的唯一原因是我用于将字符串转换为 MD5 的技术无效。但是我找不到另一种方法。

```
$username = $_POST['username'];
$password = $_POST['password'];
$repassword = $_POST['repassword'];
if( $password=$repassword ) {
    $con=mysql_connect("localhost", "root", "");

    if( $con == true ) {
        mysql_select_db("movedb", $con);
        //$newpassword = mysql_real_escape_string(md5($_POST['password']));
        $query = "UPDATE user SET password=MD5('$password') WHERE username='$username'";
        // $query = "UPDATE user SET password='$newpassword' WHERE username='$username'";
        $result = mysql_query($query, $con);

        if( $result == true ) { 
            echo "Successfully saved your message";
        } else {
            echo mysql_error();
        }   

        mysql_close($con);
    } else {
            echo "Cannot connect to the database";
    }

} else {
    echo "Passwords do not match!";
} 
```

关于如何从 PHP 更新此 MD5 值的任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:41:13.997

```
$password = md5($password);
$query = "UPDATE user SET password='".$password."' WHERE username='".$username."'"; 
```

使用 PHP 支持的 md5 哈希。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:47:27.490

可能导致问题的一个问题是 MySQL 和 PHP 在加密时使用不同的默认盐。这意味着生成的字符串会有所不同。所以你必须使用 PHP*或*MySQL 来加密，而*不是*两者的混合。

其次，MD5 已经被其他更好的加密算法所取代。您可以考虑使用其中一种来提高安全性。查看 PHP 的[`crypt()`](http://ca2.php.net/manual/en/function.crypt.php)函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T11:42:41.050

检查密码：

`SELECT * FROM 'user' WHERE username='bob.jhonny' AND pass=MD5('oldPassword');`

更新：

`UPDATE 'dlp_contatcs'.'user' SET 'Pass'=MD5('NewPassword') WHERE 'Username'='bob.jhonny';`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T11:46:39.380

> **警告：**
> 
> 请不要使用`mysql_*`函数来编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://news.php.net/php.internals/53799)。看到[**红框**](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？
> 
> 相反，您应该了解[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)应该提供一些有关决定使用哪个 API 的详细信息。对于 PDO，这里有一个[很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

您可以使用 PHP 计算`md5()`哈希并将其存储到变量中，然后将该变量放入数据库中。只需确保`md5`在检查数据库时进行相同的转换（在 PHP 代码主体中）。

你应该修好这条线`if( $password=$repassword )`。您需要两个或三个`=`标志来`if`检查某些东西。正确的路线是`if( $password === $repassword )`.

```
// ...
$newpassword = md5($_POST['password']);
$result = mysql_query('UPDATE user SET password="' .mysql_real_escape_string($newpassword). '" WHERE username = "' .mysql_real_escape_string($username). '"', $con);

if ( $result === TRUE )
{
    echo "Successfully saved your message.";
// ... 
```

# c# - 将 XAML 文件转换为 BitmapImage

> ID：11630071
> 
> 赞同：3
> 
> 时间：2012-07-24T11:39:29.727
> 
> 标签：c#, xaml, bitmapimage

我想从***XAML***（文本）文件创建具有所需分辨率的***BitmapImage 。***我怎样才能做到这一点？

 **谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T12:51:04.570

要加载 Xaml 文件：

```
Stream s = File.OpenRead("yourfile.xaml");
Control control = (Control)XamlReader.Load(s); 
```

并创建 BitmapImage：

```
 public static void SaveImage(Control control, string path)
    {
        using (MemoryStream stream = new MemoryStream())
        {
            GenerateImage(element, stream);
            Image img = Image.FromStream(stream);
            img.Save(path);
        }
    }

    public static void GenerateImage(Control control, Stream result)
    {
        //Set background to white
        control.Background = Brushes.White;

        Size controlSize = RetrieveDesiredSize(control);
        Rect rect = new Rect(0, 0, controlSize.Width, controlSize.Height);

        RenderTargetBitmap rtb = new RenderTargetBitmap((int)controlSize.Width, (int)controlSize.Height, IMAGE_DPI, IMAGE_DPI, PixelFormats.Pbgra32);

        control.Arrange(rect);
        rtb.Render(control);

        PngBitmapEncoder png = new PngBitmapEncoder();
        png.Frames.Add(BitmapFrame.Create(rtb));
        png.Save(result);
    }

    private static Size RetrieveDesiredSize(Control control)
    {
        control.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
        return control.DesiredSize;
    } 
```

确保包含正确的库！课程位于`System.Windows.Media`.

希望这可以帮助！**

# c# - 使用两个 for 循环

> ID：11630081
> 
> 赞同：3
> 
> 时间：2012-07-24T11:40:22.000
> 
> 标签：c#, for-loop

这是一个简单的问题，但我仍在学习这门语言。

我们如何编写具有参数的程序，以便如果数字是 5，它将编写

```
*
**
***
****
***** 
```

我可以做这个：

```
*
*
*
* 
```

使用这个：

```
private void button1_Click(object sender, EventArgs e)
{
    string message = " ";

    for (int count = 0; count < numericUpDown1.Value; count++)
    {
        for (int m = 0; m < numericUpDown1.Value; count)
        {
            message += "*" + "\r\n";
        }
    }
} 
```

我想我需要第二个`for`循环，但我不确定下一步该做什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T11:46:14.570

如果这不是一个概念性的作业，那么以这种方式解决会容易得多：

```
for(int i=1; i<=n; i++)
  Console.WriteLine(new string('*',i)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T11:44:27.883

你需要两个循环（见注）。

首先 (a) 从 1 数到 5。

第二个（b）从 1 到 a 计数，每次加一个“*”。

```
private void button1_Click(object sender, EventArgs e)
{
    string message = " ";

    for (int count = 0; count < numericUpDown1.Value; count++)
    {
        for (int m = 0; m < count; m++)
        {
            message += "*";
        }
        message += "\r\n"
    }
} 
```

**注意**您可以使用一个 for 循环来完成。但我个人认为两个循环版本更清晰。

```
private void button1_Click(object sender, EventArgs e)
{
    string line = "";
    string message = " ";

    for (int count = 0; count < numericUpDown1.Value; count++)
    {
       line += "*";
       message += "\r\n" + line;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:57:28.807

哟不需要两个for循环，试试这个

```
private void button1_Click(object sender, EventArgs e)
{
    string message = "";

    for (int count = 1; count < numericUpDown1.Value + 1; count++)
    {
         message += "".PadLeft(count,'*') + Environment.NewLine;      
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T11:45:46.113

尝试这个 ：

```
private void button1_Click(object sender, EventArgs e)
{
    string message = "";
    for (int count = 0; count < numericUpDown1.Value; count++)
    {
            for (int m = 0; m <=count ; m++)
            {
                    message += "*" ;
            }
            message += "\r\n";
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T12:04:29.793

试试这个，只是另一种学习方式：

```
 private static void PrintStars(int num)
        {
            for (int i = 1; i <= num; i++)
            {
                for (int j = 1; j <= i; j++)
                {
                    Console.Write("*");
                }
                Console.WriteLine();
            }
        } 
```

# asp.net - 想通过 Javascript/Jquery 在 Web 应用程序中显示 rtf 内容（即存储在 db 中）

> ID：11630085
> 
> 赞同：0
> 
> 时间：2012-07-24T11:40:34.877
> 
> 标签：asp.net

我想通过 Javascript/Jquery 在 Web 应用程序中显示 rtf 内容（即存储在 db 中）

我尝试使用 Telerik 控制，它在服务器端代码中运行良好，但我的要求是客户端编程..

让我知道是否有任何建议..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:57:12.753

考虑即时将 RTF 转换为 HTML，然后输出 HTML，请参阅此相关帖子：

[将 Rtf 转换为 HTML](https://stackoverflow.com/questions/439301/convert-rtf-to-html)

# regex - 在 bash 中声明一个 awk 函数

> ID：11630092
> 
> 赞同：6
> 
> 时间：2012-07-24T11:41:07.083
> 
> 标签：regex, linux, bash, awk

我有一个被调用的 awk 脚本：

```
awk -f myawkfile.awk arguments 
```

使用相同的调用将 awk 脚本调用到我的 bash 脚本中。

我可以在我的 bash 脚本中将其声明为函数，而不是调用 awk 脚本。我认为通过`awk`在整个代码的前后打勾，然后分配一个函数名称来随意调用它会很容易。不知何故，它没有做的伎俩。

我正在尝试这样做，因为我不希望我的脚本依赖于另一个脚本。而且我不是写`awk`剧本的人。它需要一个文件作为输入，做一些事情并返回在我的脚本中使用的修改后的文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T11:51:33.520

使用[heredoc符号](http://en.wikipedia.org/wiki/Here_document)可以写出这样的东西

```
#!/bin/bash

awk_program=$(cat << 'EOF'
    /* your awk script goes here */
EOF
)

# ...

# run awk script
awk "$awk_program" arguments

# ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T15:04:26.697

只需在函数中编写 awk 脚本：

```
#!/bin/sh -e

foo() { awk '{print $2}' "$@"; }
foo a b                         # Print the 2nd column from files a and b
printf 'a b c\nd e f\n' | foo   # print 'b\ne\n' 
```

请注意，如果将空字符串作为参数传递，则 awk 标准在行为上似乎模棱两可，但 shell 保证`"$@"`扩展为零字段而不是空字符串，因此只有在`foo`使用空参数调用时才会出现问题。

# c - GMP gmp_printf()

> ID：11630096
> 
> 赞同：4
> 
> 时间：2012-07-24T11:41:13.713
> 
> 标签：c, gmp

我刚刚开始搞乱 GMP，我似乎无法正确打印数字。这是我正在尝试的：

```
#include <stdio.h>
#include <stdlib.h>
#include "gmp.h"
int main(){
  mpz_t  n;
  mpz_init (n);
  mpz_set_ui(n, 2);

  gmp_printf("attempt 1: %d \n", n);
  gmp_printf("attempt 2: %Z \n", n);

  return 0;
} 
```

我知道这一定很简单......但我只是没有看到它。

我的输出是：

```
attempt 1: 1606416528 
attempt 2: Z 
```

我想我可能只是错误地使用了 mpz_set_ui ......

编辑：

%Zd 工作我也尝试了 %n，我认为它会工作，但不......肯定需要一些帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T11:54:05.440

你*用*对`mpz_set_ui`了。

```
gmp_printf("attempt 1: %d \n", n);
gmp_printf("attempt 2: %Z \n", n); 
```

以上两种方法都不起作用，因为它实际上**应该**是：

```
gmp_printf("attempt 3: %Zd \n", n); 
```

因为这是`gmp_printf`需要的。

[此处](http://gmplib.org/manual/Formatted-Output-Strings.html)对 GMP 中的格式化输出字符串进行了相当完整的处理。

# javascript - tinyMCE'SCRIPT438：对象不支持属性或方法'重复''？

> ID：11630097
> 
> 赞同：3
> 
> 时间：2012-07-24T11:41:16.367
> 
> 标签：javascript, tinymce, text-editor

我得到了`SCRIPT438: Object doesn't support property or method 'duplicate'`错误，我用新版本 3.5.5 替换了旧的 tinyMCE

单击按钮时我仍然遇到相同的错误。

用的有问题`prototype/scriptaculous`吗？我是否也需要升级它们？

# php - 使用 PHP 创建 CSV 下载链接

> ID：11630099
> 
> 赞同：1
> 
> 时间：2012-07-24T11:41:21.890
> 
> 标签：php, mysql, csv

> **可能重复：**
> [在 PHP 中为用户创建 CSV 文件](https://stackoverflow.com/questions/217424/create-a-csv-file-for-a-user-in-php)

我正在寻找一种解决方案，从我的小项目的 mysql 查询中创建 CSV 下载链接。

基本上下载链接将采用以下格式：

```
http://localhost/vnodes/generateExcel.php?fromDate=2012-07-23&toDate=2012-07-24&location=1 
```

其中我的 generateExcel.php 将包含以下内容：

```
<?php

$fromDate = $_GET['fromDate'];
$toDate = $_GET['toDate'];
$location = $_GET['location'];

include "connect.php";
$connect = mysql_connect($dbhost, $dbusername, $dbpassword) or die(mysql_error()); 
mysql_select_db($dbname) or die(mysql_error());
$query = mysql_query("SELECT * FROM `nodes` WHERE `dateIn` BETWEEN '$fromDate' AND '$toDate' AND partLocation = '$location' ORDER BY `dateIn` ASC") or die(mysql_error());

header("Content-type: application/csv");
header("Content-Disposition: attachment; filename=report.csv");
header("Pragma: no-cache");
header("Expires: 0");

while($result = mysql_fetch_array($query)) {
    echo $result['dateIn'].",".$result['partNumber'].",".$result['serialNumber'].",".$result['4serialNumber'].",".$result['status'].",".$result['operator']."\n";
}
?> 
```

我不知道如何从`$query`输出中生成 CSV 并触发下载。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:16:36.060

将内容类型更改为 text/csv

```
header("Content-type: text/csv"); 
```

并将 header() 调用移动到脚本的顶部。

并按照评论中的建议使用 PDO 或 mysqli。

# android - 请推荐一个好的安卓视频播放库

> ID：11630103
> 
> 赞同：0
> 
> 时间：2012-07-24T11:41:27.410
> 
> 标签：android

我正在为 android 寻找一个好的视频播放器（库），它能够将视频文件播放到表面视图或其他东西上，允许我用自己的播放/暂停按钮、进度条等覆盖它。

你会推荐什么图书馆？

谢谢！;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:55:45.937

使用`VideoView`. 或者，`MediaPlayer`与您自己的`SurfaceView`. 两者都内置在 Android 中。

# python - 需要了解 string.count() 函数的功能

> ID：11630104
> 
> 赞同：0
> 
> 时间：2012-07-24T11:41:28.023
> 
> 标签：python, string, conceptual, concept

我试图基本上了解 string.count 的功能它的文档定义是

> string.count(s, sub[, start[, end]])
> 返回字符串 s[start:end] 中子字符串 sub 的（非重叠）出现次数。开始和结束的默认值以及 **负值的解释与切片相同。**

现在这里最后一行的确切含义是什么，实际上是粗体。我用这个函数做了一些随机实验

```
In [19]: a
Out[19]: 'ab'
In [23]: string.count(a,'ab'[1:3])
Out[23]: 1

In [24]: string.count(a,'ab'[1:1])
Out[24]: 3

In [25]: string.count(a,'ab'[-1:1])
Out[25]: 3

In [26]: string.count(a,'ab'[-1:0])
Out[26]: 3

In [27]: string.count(a,'ab'[1:4])
Out[27]: 1

In [28]: string.count(a,'ab'[1:100])
Out[28]: 1

In [29]: string.count(a,'ab'[100:100])
Out[29]: 3

In [30]: string.count(a,'ab'[:])
Out[30]: 1

In [31]: string.count(a,'a'[:])
Out[31]: 1 
```

谁能解释我为什么有时我得到的结果是 1，为什么有时是 3。总的来说，我需要了解这个功能是如何工作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T11:45:34.193

每次看到`3`结果时，第二个参数都是空字符串——你通过使用奇怪的切片来隐藏这个事实。空字符串被认为出现在位置`0:0`，对于这个例子，出现了 3 次`1:1`。`2:2`通常，`string.count(s, "")`（或等效地，`s.count("")`）将返回`len(s) + 1`.

为了解释这个结果是如何产生的，这里有一个（不是很有效的）示例实现`string.count()`：

```
def count(s, sub):
    result = 0
    for i in range(len(s) + 1 - len(sub)):
        result += (s[i:i + len(sub)] == sub)
    return result 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T12:55:35.570

我认为您的错误在于误解了文档使用的符号。

> **string.count(s, sub[, start[, end]])**返回字符串 s[start:end] 中子字符串 sub 的（非重叠）出现次数。开始和结束的默认值以及负值的解释与切片相同。

方括号`[]`表示可选参数。它是提供三种不同方法签名的简短形式，它们不是调用方法的实际语法的一部分：

*   `string.count(s, sub)`
*   `string.count(s, sub, start)`
*   `string.count(s, sub, start, end)`

> 开始和结束的默认值以及负值的解释与切片相同。

这是切片：

```
>>> "0123_3210"[:3] # from the first until the 3rd item, excluding it
'012'
>>> "0123_3210"[-3:] # from the 3rd-to-last until the end
'210'
>>> "0123_3210"[-3:-1] # from the 3rd-to-last until the end, excluding one item
'21'
>>> "0123_3210"[1:3] # from the second item until the 3rd, excluding it
'12 
```

如您所见，当您使用负索引时，它从右端开始计数。

`start`所说的是，这些对于和的正负都是等价的`end`。

*   `string.count(s[:], sub)`≡`string.count(s, sub)`
*   `string.count(s[start:], sub)`≡`string.count(s, sub, start)`
*   `string.count(s[start:end], sub)`≡`string.count(s, sub, start,end)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T12:26:56.797

> [...] 负值的解释与切片相同

用于函数的第三个和第四个可选参数`string.count(...)`。

```
In [1]: import string

In [2]: s = 'hello world'

In [3]: string.count(s, 'o')
Out[3]: 2

In [4]: string.count(s, 'o', 5, 9) # count from 6th to 10th characters
Out[4]: 1

In [5]: string.count(s, 'o', 5, 9) == string.count(s[5:9], 'o')
Out[5]: True

In [6]: string.count(s, 'o', -9, -5) # count from 3rd to 6th characters
Out[6]: 1 
```

这与搜索空字符串非常不同：

```
In [7]: string.count(s, 'o'[5:9]) == string.count(s, '') == (2 + (len(s) - 1))
Out[7]: True 
```

（每个字符的开头、结尾和中间都有“空字符串” `s`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T13:42:35.827

您的困惑似乎来自不确定如何使用切片表示法，或者不清楚**string.count()**相对于空字符串的行为。

我认为您会通过阅读[http://docs.python.org/tutorial/introduction.html#strings](http://docs.python.org/tutorial/introduction.html#strings)得到很好的服务。

```
In [19]: a 
Out[19]: 'ab' 
```

好的。

```
In [23]: string.count(a,'ab'[1:3]) 
Out[23]: 1 
```

'ab'[1:3] == 'b'。“ab”中有一个“b”实例。

```
In [24]: string.count(a,'ab'[1:1]) 
Out[24]: 3 
```

'ab'[1:1] == ''。

python中任何字符串中''的计数等于len（string）+1，除非字符串长度大于INT_MAX（我相信），在这种情况下它返回INT_MAX。

您可以在此处的 Python 源代码中看到这一点：[http :](http://svn.python.org/view/) *//svn.python.org/view/checkout/python/trunk/Objects/stringlib/count.h* ?content-type= text%2Fplain。

```
In [25]: string.count(a,'ab'[-1:1]) 
Out[25]: 3 
```

'ab'[1:1] == ''。再一次，您正在计算“”。

```
In [26]: string.count(a,'ab'[-1:0]) 
Out[26]: 3 
```

'ab'[1:1] == ''，再次。

```
In [27]: string.count(a,'ab'[1:4]) 
Out[27]: 1 
```

'ab'[1:4] == 'b'。

```
In [28]: string.count(a,'ab'[1:100]) 
Out[28]: 1 
```

'ab'[1:100] == 'b'。

```
In [29]: string.count(a,'ab'[100:100]) 
Out[29]: 3 
```

'ab'[100:100] == ''。

```
In [30]: string.count(a,'ab'[:]) 
Out[30]: 1 
```

'ab'[:] == 'ab'。在“ab”中出现了一次“ab”。

```
In [31]: string.count(a,'a'[:]) 
Out[31]: 1 
```

在这种情况下，'a'[:] == 'a'。在“ab”中出现了一次“a”。

更清晰？

# python - 高级字符串格式化与模板字符串

> ID：11630106
> 
> 赞同：57
> 
> 时间：2012-07-24T11:41:31.500
> 
> 标签：python, string-formatting, template-engine

[我想知道使用模板字符串](http://docs.python.org/library/string.html#template-strings)而不是新的[高级字符串格式](http://docs.python.org/library/string.html#string-formatting)是否有优势？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-24T12:02:33.773

模板旨在比通常的字符串格式更简单，但以牺牲表现力为代价。[PEP 292](http://www.python.org/dev/peps/pep-0292/)的基本原理是将模板与 Python 的`%`-style 字符串格式进行比较：

> Python 当前支持基于 C 的`printf()`'%' 格式化字符的字符串替换语法。虽然非常丰富，但 %-formatting 代码也容易出错，即使对于有经验的 Python 程序员也是如此。一个常见的错误是省略尾随格式字符，例如`s`in `%(name)s`。
> 
> 此外，% 符号后面的规则相当复杂，而通常的应用程序很少需要这种复杂性。大多数脚本需要做一些字符串插值，但大多数都使用简单的“字符串化”格式，即`%s`或`%(name)s` 这种形式应该更简单，更不容易出错。

虽然新的`.format()`改进了这种情况，但[格式字符串语法](http://docs.python.org/library/string.html#format-string-syntax)仍然相当复杂，所以基本原理仍然有其要点。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-04-10T23:11:58.193

字符串模板的一个关键优势是您可以使用该[方法仅替换](https://docs.python.org/3.6/library/string.html#string.Template.safe_substitute)*一些*占位符。如果未向占位符传递值，普通格式字符串将引发错误。例如：`safe_substitute`

```
"Hello, {first} {last}".format(first='Joe') 
```

提出：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 'last' 
```

但：

```
from string import Template
Template("Hello, $first $last").safe_substitute(first='Joe') 
```

产生：

```
'Hello, Joe $last' 
```

请注意，返回值是字符串，而不是`Template`; 如果要替换，则`$last`需要`Template`从该字符串创建一个新对象。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-07-01T19:31:36.340

就其价值而言，从 dict 进行模板替换似乎比格式替换慢 4 到 10 倍，具体取决于模板的长度。这是我在 OS X 上运行的 2.3 GHz 内核 i7 和 Python 3.5 的快速比较。

```
from string import Template
lorem = "Lorem ipsum dolor sit amet {GIBBERISH}, consectetur adipiscing elit {DRIVEL}. Expectoque quid ad id, quod quaerebam, respondeas."
loremtpl = Template("Lorem ipsum dolor sit amet $GIBBERISH, consectetur adipiscing elit $DRIVEL. Expectoque quid ad id, quod quaerebam, respondeas.")
d = dict(GIBBERISH='FOOBAR', DRIVEL = 'RAXOOP')

In [29]: timeit lorem.format(**d)
1.07 µs ± 2.13 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)

In [30]: timeit loremtpl.substitute(d)
8.74 µs ± 12.9 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each) 
```

我测试的最坏情况是 13 个字符的字符串慢了大约 10 倍。我测试的最好情况是 71000 个字符的字符串慢了大约 4 倍。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-24T12:04:01.013

它主要是语法偏好问题，通常归结为懒惰/冗长的权衡和对现有字符串模板系统的熟悉/习惯。在这种情况下，模板字符串更懒惰/简单/快速编写，同时`.format()`更冗长和功能齐全。

习惯于 PHP 语言或 Jinja 系列模板系统的程序员可能更喜欢模板字符串。使用 "%s" 位置样式的元组替换可能会吸引那些使用`printf`类似字符串格式或想要快速的人。`.format()`还有更多功能，但除非您需要仅`.format()`提供的特定功能，否则使用任何现有方案都没有错。

唯一需要注意的是，命名字符串模板比顺序相关模板更灵活且需要更少的维护。除此之外，这一切都取决于个人喜好或您正在从事的项目的编码标准；

# java - Google App Engine 的 Blobstore Java API 是如何工作的？

> ID：11630110
> 
> 赞同：5
> 
> 时间：2012-07-24T11:41:45.140
> 
> 标签：java, google-app-engine, file-upload, blobstore

谷歌应用引擎 blobstore 服务如何处理 32 MB 的文件上传而没有任何超时异常。也不会影响应用引擎一分钟的请求-响应间隔。它背后是什么样的过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:11:19.787

当使用 blobstore 上传数据时，您将数据上传到一个特殊的系统处理程序中，该处理程序将加载数据并将其保存在 blobstore 中，完成后重定向到用户处理程序，同时提供对上传数据在 blobstore 中位置的引用。

# c# - 添加具有相关现有对象的新对象为现有对象插入新行

> ID：11630111
> 
> 赞同：0
> 
> 时间：2012-07-24T11:41:50.333
> 
> 标签：c#, .net, entity-framework, entity-framework-4

我有一个简单的关系：

我有一个“Note”对象，它有一个相关的“Company”对象。创建“注释”时，选择现有的“公司”，然后输入其他必要的字段。

我的问题是，每当我保存时，它都会插入一个新版本的“公司”对象，我不知道为什么。

我已经尝试了此处接受的答案中的所有选项[Insert new object with existing object](https://stackoverflow.com/questions/5416323/c-sharp-entity-framework-4-insert-new-object-with-existing-object)但没有任何效果。

目前，我正在执行以下操作：

```
var company = db.Company.FirstOrDefault(i => i.ID == note.Company.ID);
note.Company = company;

db.Notes.AddObject(note);
db.ObjectStateManager.ChangeObjectState(company, EntityState.Unchanged);
db.ObjectStateManager.ChangeObjectState(note, EntityState.Added);

db.SaveChanges(); 
```

但是，它不断添加一个新的“公司”对象。奇怪的是，它没有添加所有字段，只添加了 CompanyName" 字段（并创建了一个新的 Id）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:49:37.073

如果这是一家现有公司，请设置 CompantID 字段而不是实体

```
note.CompanyID = company.ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:50:22.430

我认为问题在于在 FirstorDefault 方法中使用 note.Company.Id 时您的第一行。如果您可以发布条目方法，我可能会提供进一步的帮助。如果你有 companyId 作为参数进入方法，那么你可以修改上面的代码，如下所示：

```
Company company = db.Company.Find(companyId);
note.Company = company;
db.SaveChanges(); 
```

或者正如其他答案所建议的那样，只需设置 note.CompanyId

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:50:53.860

问题是您正在创建一个新实例`Note`并设置`Company`属性，因此我假设 EF 正在重新创建公司记录。如果您尝试将您的对象链接`Note`到现有`Company`对象，则只需在注释上设置公司的外键，例如

```
var company = db.Company.FirstOrDefault(i => i.ID == note.Company.ID);    
note.CompanyID = company.ID; // will link the note to the specified company
db.Notes.AddObject(note);
db.SaveChanges(); 
```

`note.Company.ID`你用来拉倒公司也没有意义，`null`如果它是新的，这个属性应该是`Note`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T11:56:12.583

以下是我的做法，希望对您有所帮助。

```
using (DataContext dtx = new DataContext()) {

            Note note = new Note();

            dtx.Notes.Add(note);

            Company company = dtx.Companies.FirstOrDefault((System.Object obj) => obj.ServerId == 1);

            note.Server = company;

            dtx.SaveChanges();

        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T12:18:52.750

感谢大家的回复。

最后我的问题是，首先，在为页面创建模型时，我实例化了一个初始的新“公司”，所以我将公司设置为 null 以进行创建。

然后，在页面上，我有 Html.TextBoxFor(model => model.Company.CompanyName,....被传递回控制器。

在设置公司 ID 之前，我确实尝试将其设置为 null，但这不起作用。但是，删除上面的文本框，一切都开始工作了！

# php - 可以指向 php 类的静态成员吗 ？

> ID：11630112
> 
> 赞同：-1
> 
> 时间：2012-07-24T11:41:55.887
> 
> 标签：php, class, pointers, static

```
class ab{
    public static $abc = 34;
    public static function asd(){
        $a = "abc";
        echo self::$a;  //output 34;
    }
}
ab::asd(); 
```

我想找到一种指向类静态成员的方法。就像上面的例子，我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:51:12.860

如果访问静态变量，则语法如下：

```
MyClass::$variable 
```

所以你在做什么缺乏间接性：

```
echo self::$$a;  //output 34; 
```

这与常规变量的工作方式相同：

```
$variable 
```

并间接：

```
$name = "variable";
$$name 
```

对你下一个问题的建议：尽量让你的问题更准确。请注意以下事项：

*   你有什么
*   它应该做什么
*   实际上做什么
*   如果您知道错误发生在哪里

这有助于更快地给出相关答案，而不是参与元讨论来澄清你的问题。

# typo3 - Typo3：如何将动态数据从打字稿传递到部分？

> ID：11630116
> 
> 赞同：0
> 
> 时间：2012-07-24T11:42:09.053
> 
> 标签：typo3, partial

我尝试将动态数据从 TypoScript 传递到 Partial。

有可能吗？我该怎么做？

**TS：**

```
lib.mydata = TEXT
lib.mydata.value = 470 
```

**HTML 模板：**

```
<f:render partial="mypartial" arguments="{dataitem: lib.mydata}" /> 
```

**HTML 部分：**

```
<section id="mypartial">
    <div class="xy">
      <a href="index.php?data={dataitem}">mehr ...</a>
    </div>
</section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:51:02.660

请使用 TypoScripttypolink 生成链接！

```
<f:cObject typoscriptObjectPath="lib.mydata" /> 
```

使用 TypoScript

```
lib.mydata = TEXT
lib.mydata.value = mehr ...
lib.mydata.typolink.additionalParams = &data=470 
```

或者使用typolink viewhelper

```
<f.link.page pageUid="1" additionalParams="{data:470}">mehr ...</f:link.page> 
```

（未经测试）

# android - Android 触摸事件指针向下

> ID：11630128
> 
> 赞同：4
> 
> 时间：2012-07-24T11:42:59.143
> 
> 标签：android, touch

嗨，我正在尝试检测 2 个手指何时触摸屏幕：

```
 case MotionEvent.ACTION_POINTER_2_DOWN: {

    twoFing=true;
    return true;
} 
```

问题是：

```
public static final int ACTION_POINTER_2_DOWN 
```

已弃用，医生说：

* getActionMasked() 的常量：非主指针已关闭。使用 getActionIndex() 检索更改的指针的索引。索引在 getAction() 返回的未屏蔽操作的 ACTION_POINTER_INDEX_MASK 位中编码。*

但我不明白如何使用它......我怎么能检测到有 2 个指针？如果我尝试 getPointerIndex()，ActionUP 和 Down 总是说只有一个指针

多谢

编辑：我在这里发布完整的代码以更清楚地了解问题。我的代码正在工作，但是因为 ACTION_POINTER_2_DOWN 是一个已弃用的值，我想用其他东西替换它，但我不知道如何。

```
@SuppressWarnings("deprecation")
public boolean onTouch(View v, MotionEvent event) {

switch(event.getAction()){

case MotionEvent.ACTION_DOWN : {
     Log.i(TAG, "Action Down");
    downX = event.getX(0);
    downY = event.getY(0);
    return true;
}

case MotionEvent.ACTION_UP: {

    upX = event.getX(0);
    upY = event.getY(0);

    float deltaX = downX - upX;
    float deltaY = downY - upY;
    Log.i(TAG, "Action UP deltaX="+deltaX+", deltaY="+deltaY);

    // swipe vertical?
    if(Math.abs(deltaY) > MIN_DISTANCE && twoFing){
        twoFing=false;

        // top or down
        if(deltaY < 0 ) 
        { 
            if(slide.zoom==1) 
            slide.zoom=0; 
        Log.i(TAG, "Going Down zooming in");
            //return true; 
        }
        if((deltaY > 0) )
        { 

            if(slide.zoom==0) 
                slide.zoom=1;  
            Log.i(TAG, "Going up zoomig out");
            //return true;
        }

        return true;
    }
    // swipe horizontal?
  if(Math.abs(deltaX) > MIN_DISTANCE && !twoFing){

        // left or right
        if(deltaX < 0) { this.slideToTheLeft(); return true; }
        if(deltaX > 0) { this.slideToTheRight(); return true; }
        return true;
    }

  return false;
}

case MotionEvent.ACTION_POINTER_2_DOWN: {

    twoFing=true; //inform that the touch was made with 2 fingers
    Log.i(TAG, "Action Second pointer down");

    return true;
}
}
return false; 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-22T23:52:19.840

我现在正在自己研究指针的东西。你想切换如下

```
 switch(event.getAction() & MotionEvent.ACTION_MASK);
     case MotionEvent.ACTION_POINTER_DOWN: 
```

ACTION_DOWN 大约是第一根手指向下。ACTION_POINTER_DOWN 大约是第二根手指。

请参阅[http://www.vogella.com/articles/AndroidTouch/article.html](http://www.vogella.com/articles/AndroidTouch/article.html)以获得相当清晰的描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T18:17:21.733

*MotionEvent.ACTION_DOWN*仅适用于第一个指针。GetActionMasked() 将为后续指针返回*MotionEvent.ACTION_POINTER_DOWN*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T14:12:01.740

您是否尝试过`getPointerId(index)`使用不同的值`index`？

查看Id和Index的区别：

> **索引与 ID**
> 
> 在更高的层次上，来自时间快照的触摸屏数据可能不会立即有用，因为触摸手势涉及跨越许多运动事件的随时间的运动。指针索引不一定在复杂事件中匹配，它仅指示数据在 MotionEvent 中的位置。但是，这不是您的应用程序必须自己完成的工作。每个指针还有一个 ID 映射，该映射在触摸事件中保持不变。您可以使用 MotionEvent.getPointerId(index) 为每个指针检索此 ID，并使用 MotionEvent.findPointerIndex(id) 查找指针 ID 的索引。

最好的解决方案应该是保存所有指针的状态并更新/比较它们，您会收到一个新的 TouchEvent。

检查这个[例子](http://android-developers.blogspot.ca/2010/06/making-sense-of-multitouch.html)。

# javascript - 如何测试 JavaScript SVG/Canvas 应用程序？

> ID：11630129
> 
> 赞同：3
> 
> 时间：2012-07-24T11:43:02.597
> 
> 标签：javascript, testing

我们正在评估使用 SVG 和 Canvas 等 HTML5 技术的图形 JavaScript 应用程序的未来工作。一个大问题（与所有以 UI 为中心的应用程序一样）是如何为所有功能编写测试。如果我们只能测试 JavaScript 逻辑是不够的，但我们还需要知道接口是否正常工作。

所以我们至少需要像 Selenium 这样的东西，它使我们能够与 SVG/Canvas 进行交互。另外，当然，必须有某种框架来为绘图背后的逻辑编写普通的单元测试。它应该可以免费使用。

有类似的东西吗？此外，由于我们以前根本没有测试此类软件的经验，因此我们将不胜感激如何解决我们的问题以及通常如何完成的任何提示。我相信，我们不是第一个考虑这个问题的人。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T11:52:25.717

我很欣赏这并不能完全回答您的问题，但是关于单元测试，JavaScript 的松散类型使得生成模拟对象变得非常容易，以确保您的应用程序逻辑与（例如）Canvas 元素正确交互。例如，如果你有一个在 cavas 上绘制东西的函数：

```
function drawSomething(canvas){
    var ctx = canvas.getContext('2d');
    ctx.fillRect(10, 10, 55, 50);
} 
```

然后你可以像这样测试它：

```
function testdrawSomething(){
    var mockCanvas = {};
    var mockCtx = {};
    mockCanvas.getContext = function(){
        return mockCtx;
    };
    mockCtx.fillRect = function(a,b,c,d){
        // test values here
    }
    drawSomething(mockCanvas);
} 
```

我已经使用[RhinoUnit](http://code.google.com/p/rhinounit/)和这种方法，为 UI 密集型 HTML5 站点生成了一些非常全面的单元测试——如果你仔细编写代码（将所有对 DOM 元素的引用作为参数传递给你想要测试的函数），你可以在浏览器之外运行所有单元测试，让它们成为 CI 管道的一部分。

显然，您还需要运行一些浏览器内测试，这就是 Selenium 的用武之地。

# windows-phone-7 - 是否有用于创建应用内视频播放器的标准控件？

> ID：11630132
> 
> 赞同：0
> 
> 时间：2012-07-24T11:43:12.190
> 
> 标签：windows-phone-7, media-player, mediaelement

我在 wp7 应用程序中制作视频播放器。我使用 mediaelement 来显示视频，并从 url 设置其来源。我想要的功能是播放/停止按钮、前进/后退、进度指示器（用于视频本身的进度）并在缓冲时显示进度条。我已经完成了以上所有工作，使用了一些自定义的网格、按钮等。不过，我确实遇到了一些麻烦，我不想在这里打扰您（一团糟），这就是为什么我要问以下问题：

是否有 wp7 的标准（或可下载）控件可以为我完成所有这些事情并且效果很好。我搜索了“无处不在”，但找不到任何东西。令我惊讶的是，这不是一个易于使用、易于定制的内置控件，因为我认为标准视频播放器是许多应用程序可以利用的东西。

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:35:31.003

这是一个关于如何创建[Windows Phone 7 View Model Style Video Player](http://www.codeproject.com/Articles/84859/Windows-Phone-7-View-Model-Style-Video-Player)的教程。

# java - 如何在 Eclipse 编辑器中获取所有打开文件的列表？

> ID：11630133
> 
> 赞同：6
> 
> 时间：2012-07-24T11:43:13.883
> 
> 标签：java, eclipse-rcp

在我的 RCP 应用程序中是编辑器，几乎就像在 Eclipse 中一样。类编辑器扩展自`org.eclipse.ui.texteditor.AbstractTextEditor`并添加到扩展中`plugin.xml -> org.eclipse.ui.editors`。我想做包含在编辑器文件中打开的视图。问题是，如何获取所有打开文件的列表？

截屏：

![在此处输入图像描述](../Images/5af94a71727018ec852f192d97015fa2.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T12:04:19.263

我还没有测试过，但你应该可以从 PlatformUI 类开始。

```
PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getEditorReferences() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:47:56.130

在您的工作区中，以下文件包含您的工作台信息：

.metadata/.plugins/org.eclipse.ui.workbench/workbench.xml 可以在不破坏工作区的情况下删除它（或编辑它，但我想这需要一些摆弄），文件由 Eclipse 重新生成。当您删除它时，所有与工作台相关的设置都将丢失（即所有编辑器都已关闭），但您的该工作区的项目保持不变。

从中您可以获取文件列表..

# android - 由于内部错误，测试启动失败：在 UI 线程上运行测试

> ID：11630134
> 
> 赞同：2
> 
> 时间：2012-07-24T11:43:17.690
> 
> 标签：android, unit-testing, robotium

我正在为我的应用程序创建一个单元测试项目。它以前工作正常。但我已经更新了**ADT 插件**和**android SDK**。之后我可以启动这个项目但不能单独运行**测试用例**。它将执行第一个测试用例，然后停止。在我可以手动执行第二个测试用例之前。但是现在当我尝试这样做时，出现错误“由于内部错误，测试启动失败：在 UI 线程上运行测试”。请帮我解决这个问题...
注意：使用机器人 3.2.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T13:31:45.577

您是否从 Eclipse Junit 窗口的测试中运行单个方法？尝试从项目资源管理器中运行测试方法。右键单击并从 Project Explorer 中运行，而不是在 JUnit 窗口中运行。

![仅作为 Android JUnit 测试表单项目资源管理器运行](../Images/fefc68a64243da38cfacd987add2845a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:22:35.677

RightHandedMonkey 的解决方法对我有用。

看起来这是一个已知问题，将在 ADT 21 中修复（参见：[http](http://code.google.com/p/android/issues/detail?id=34170) ://code.google.com/p/android/issues/detail?id=34170 ）

如果您是从源代码构建 ADT，那里还有一个更改列表可用于修复。

# asp.net - SelectedIndexChanged 没有在 ascx 中触发？

> ID：11630135
> 
> 赞同：0
> 
> 时间：2012-07-24T11:43:20.660
> 
> 标签：asp.net, user-controls

我使用 masterpage。在 ascx 页面中，我的 selectedindexchange 事件没有触发。

![在此处输入图像描述](../Images/d811a51719407ecc4cb3e8615342fd6e.png)

这是我的代码：

我的 ascx ：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="FilterList.ascx.cs"
Inherits="F8.B2B.WEB.UserControls.Common.FilterList.FilterList" %>

<asp:UpdatePanel UpdateMode="Always" runat="server">
    <ContentTemplate>
       <div id="filterList" runat="server">

       </div>
    </ContentTemplate>
</asp:UpdatePanel> 
```

我的 ascx.cs：

```
 protected void Page_Load(object sender, EventArgs e)
 {
   if (!IsPostBack)
   {
      createFilterLists();
   } 
 }

private void createFilterLists()
{
    ListBox dpList = new ListBox()
    {
        ID = ControlID
    };
    dpList.Items.Clear();
    if (lst_ListItem != null)
    {

        foreach (ListItem item_ in lst_ListItem)
        {
            dpList.Items.Add(item_);
        }
        dpList.Items[0].Selected = true;
        dpList.AutoPostBack = true;
        dpList.EnableViewState = true;
        dpList.SelectedIndexChanged += new EventHandler(myListBox_SelectedIndexChanged);

        filterList.Controls.Add(dpList);

    }
}

protected void myListBox_SelectedIndexChanged(object sender, EventArgs e)
{
    // might be entered on change
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T11:47:09.867

因为您的列表框是由代码动态生成的，所以即使是回发，您也需要在每次页面加载时添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:03:37.907

在 OnInit 事件中创建动态控件并添加事件处理程序

```
protected override void OnInit(EventArgs e) 
{ 
    base.OnInit(e); 

    CreateControls();

    myDataGrid.SomeEventHandler += new ...
} 
```

在 OnLoad 事件中绑定数据并填充控件

```
protected void Page_Load(object sender, EventArgs e)    
{    
    if (!IsPostBack)    
    {    
        FillControls(); 

        myDataGrid.DataSource = somedatasource;
        myDataGrid.DataBind();   
    }     
}  

private void CreateControls()     
{     
    ListBox dpList = new ListBox()     
    {     
        ID = ControlID     
    };     

    dpList.AutoPostBack = true;     
    dpList.EnableViewState = true;     
    dpList.SelectedIndexChanged += new EventHandler(myListBox_SelectedIndexChanged);     

    filterList.Controls.Add(dpList);      
}  

private void FillControls()
{
    dpList.Items.Clear();
    if (lst_ListItem != null && lst_ListItem.Count > 0)     
    {     

        foreach (ListItem item_ in lst_ListItem)     
        {     
            dpList.Items.Add(item_);     
        }     
        dpList.Items[0].Selected = true;    
    }
} 
```

# javascript - 停止 youtube 视频并替换为图片

> ID：11630137
> 
> 赞同：2
> 
> 时间：2012-07-24T11:43:22.860
> 
> 标签：javascript, jquery, html, css

我正在使用嵌入的 youtube 视频。我需要用图像替换它，当点击图像时，视频开始播放我已经实现的：

```
<script type="text/javascript">
   function start_video() {
      var iframe = '<iframe title="YouTube video player" width="590" height="360" src="http://www.youtube.com/embed/nCgQDjiotG0?autoplay=1&amp;rel=0&showinfo=0" frameborder="0" title="none" allowfullscreen></iframe>';
      document.getElementById("video_player").innerHTML = iframe;
   }
</script> 
```

和html：

```
<div id="video_player"><img style="cursor: pointer;" onclick="start_video();" src="fake_image.jpg" alt="Play Video" /></div> 
```

但是现在我通过单击某些 div 或其他元素并同时用图像替换视频来停止该视频时遇到问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:45:42.810

我建议您阅读 javascript Youtube [API](https://developers.google.com/youtube/js_api_reference)，它为您提供比将 iframe 嵌入页面更多的控制权

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:49:52.300

你为什么不给 iframe 一个 id 然后删除 iframe 并将图像放在那里？

```
function stop_video() {
    var elem = document.getElementById('video_iframe');
    var parent = elem.parentNode;
    parent.removeChild(elem);
    var image = document.createElement('img');
    image.setAttribute('src','yourImage.jpg');
    parent.appendChild(image);
} 
```

我还建议您不要像以前那样设置innerHTML，您实际上应该处理像上面这样的对象。

```
function start_video() {
    var iframe = document.createElement('iframe');
    iframe.setAttribute('title','Youtube video player');
    iframe.setAttribute('width','590');
    iframe.setAttribute('height','360');
    iframe.setAttribute('src','http://www.youtube.com/embed/nCgQDjiotG0?autoplay=1&amp;rel=0&showinfo=0');
    iframe.setAttribute('frameborder','0');
    iframe.setAttribute('allowfullscreen','allowfullscreen');
    document.getElementById('video_player').appendChild(iframe);
} 
```

# blackberry - 黑莓中的进度条从右到左

> ID：11630140
> 
> 赞同：1
> 
> 时间：2012-07-24T11:43:33.500
> 
> 标签：blackberry, java-me, right-to-left

我正在开发一个应用程序，它需要我创建一个从右到左移动的进度条。

我尝试`GaugeField`通过将 startVal 填充为 100 然后递减它来使用，但我无法实现。

黑莓说`paint()`方法或`drawRect()`使用计时器有什么方法可以从右到左填充它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T18:37:39.080

检查以下代码以获取 Custom 的实现`GaugeField`。

***输出***

![](../Images/51fa77f1af385e49c10811273f4330d5.png) ![](../Images/d853c0107652cfcdaff67e344e236b2d.png)

***实施`CustomGaugeField`***

```
class CustomGaugeField extends GaugeField {
    // Default constructor, need improvement
    public CustomGaugeField() {
        super("", 0, 100, 0, GaugeField.PERCENT);
    }

    // Colors
    private static final int BG_COLOR = 0xd6d7d6;
    private static final int BAR_COLOR = 0x63cb52;
    private static final int FONT_COLOR = 0x5a55c6;

    protected void paint(Graphics graphics) {
        int xProgress = (int) ((getWidth() / 100.0) * getValue());
        int xProgressInv = getWidth() - xProgress;

        // draw background
        graphics.setBackgroundColor(BG_COLOR);
        graphics.clear();

        // draw progress bar
        graphics.setColor(BAR_COLOR);
        graphics.fillRect(xProgressInv, 0, xProgress, getHeight());

        // draw progress indicator text
        String text = getValue() + "%";
        Font font = graphics.getFont();
        int xText = (getWidth() - font.getAdvance(text)) / 2;
        int yText = (getHeight() - font.getHeight()) / 2;
        graphics.setColor(FONT_COLOR);
        graphics.drawText(text, xText, yText);
    }
} 
```

***如何使用***

```
class MyScreen extends MainScreen {

    public MyScreen() {
        setTitle("Custom GaugeField Demo");
        GaugeField gField;
        for (int i = 0; i < 6; i++) {
            gField = new CustomGaugeField();
            gField.setMargin(10, 10, 10, 10);
            add(gField);
        }
        startProgressTimer();
    }

    private void startProgressTimer() {
        TimerTask ttask = new TimerTask() {
            public void run() {
                Field f;
                for (int i = 0; i < getFieldCount(); i++) {
                    f = getField(i);
                    if (f instanceof CustomGaugeField) {
                        final CustomGaugeField gField = (CustomGaugeField) f;
                        final int increment = (i + 1) * 2;
                        UiApplication.getUiApplication().invokeLater(
                            new Runnable() {
                                public void run() {
                                    gField.setValue((gField.getValue() + increment) % 101);
                                }
                            }
                        );
                    }
                }

            }
        };

        Timer ttimer = new Timer();
        ttimer.schedule(ttask, 1000, 300);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T11:21:45.540

这是我建议你做的。下载 BlackBerry [Advanced UI Samples](https://github.com/blackberry/Samples-for-Java/downloads) ... 选择**下载为 Zip**按钮。

看看[这里的样本截图](http://supportforums.blackberry.com/t5/Java-Development/Implement-advanced-buttons-fields-and-managers/ta-p/488276)。您需要使用的是**Bitmap Gauge Field**：

![在此处输入图像描述](../Images/2552e7bffe0316a8e9fa8a10172c9703.png)

您可以做的是修改`BitmapGaugeField`它们在示例文件夹中的类，在**Advanced UI -> src/com/samples/toolkit/ui/component下**

在 BitmapGaugeField.java 中，您只需更改`drawHorizontalPill()`方法：

```
private void drawHorizontalPill( Graphics g, Bitmap baseImage, Bitmap centerTile, int clipLeft, int clipRight, int width )
{
    int yPosition = ( _height - baseImage.getHeight() ) >> 1;
    width = Math.max( width, clipLeft + clipRight );

    // ORIGINAL IMPLEMENTATION COMMENTED OUT HERE:
    // Left
    //g.drawBitmap( 0, yPosition, clipLeft, baseImage.getHeight(), baseImage, 0, 0);
    // Middle
    //g.tileRop( _rop, clipLeft, yPosition, Math.max( 0, width - clipLeft - clipRight ), centerTile.getHeight(), centerTile, 0, 0);
    // Right
    //g.drawBitmap( width - clipRight, yPosition, clipRight, baseImage.getHeight(), baseImage, baseImage.getWidth() - clipRight, 0);

    int offset = _width - width;
    // Left
    g.drawBitmap( 0 + offset, yPosition, clipLeft, baseImage.getHeight(), baseImage, 0, 0);

    // Middle
    g.tileRop( _rop, clipLeft + offset, yPosition, Math.max( 0, width - clipLeft - clipRight ), centerTile.getHeight(), centerTile, 0, 0);

    // Right
    g.drawBitmap( width - clipRight + offset, yPosition, clipRight, baseImage.getHeight(), baseImage, baseImage.getWidth() - clipRight, 0);
} 
```

使用此类的方式是传入背景值、前景（填充）可拉伸位图、值范围、初始值和一些剪切边距。

```
public BitmapGaugeField( 
   Bitmap background,             /** bitmap to draw for gauge background */
   Bitmap progress,               /** bitmap to draw for gauge foreground */
   int numValues,                 /** this is the discrete range, not including 0 */
   int initialValue,
   int leadingBackgroundClip,
   int trailingBackgroundClip,
   int leadingProgressClip,
   int trailingProgressClip,
   boolean horizontal )          /** it looks like you could even do vertical! */ 
```

举个例子，如果你想让这个量表从 0 到 100，并且初始值为 30（这个代码放在一个`Manager`类中）：

```
 Bitmap gaugeBack3 = Bitmap.getBitmapResource( "gauge_back_3.png" );
    Bitmap gaugeProgress3 = Bitmap.getBitmapResource( "gauge_progress_3.png" );
    BitmapGaugeField bitGauge3 = new BitmapGaugeField( gaugeBack3, gaugeProgress3, 
        100, 30, 
        14, 14, 14, 14, 
        true );
    bitGauge3.setPadding(15,5,15,5);
    add(bitGauge3);    

    bitGauge3.setValue(80);   // change the initial value from 30 to 80 
```

您会在项目中找到一些 PNG 图像，例如 gauge_back_3.png 和 gauge_progress_3.png。如果您不喜欢颜色或形状，可以将这些图像换成您自己绘制的图像（在 Photoshop 或其他绘图程序中）。

祝你好运！

# load-balancing - 如何管理负载平衡

> ID：11630144
> 
> 赞同：3
> 
> 时间：2012-07-24T11:43:41.127
> 
> 标签：load-balancing

有特定组织的`10` **服务器。**给它一些**负载平衡算法**。还要考虑这样一种情况，其中一台服务器需要 10 秒来处理请求，而其他服务器只需要 1 秒。那么，您将如何管理这个**瓶颈**呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:59:31.650

有几种方法可以做到这一点，但最好的方法之一是按**成本进行负载平衡**。`distance`在这种类型的平衡中，我们根据它们之间的关系、它们之间的子网络策略、它们之间的数据传输介质等为从客户端到服务器的每个连接分配一个成本，然后我们尝试重新定位/引用与该服务器的连接，这给出了连接的总体最低成本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T17:51:13.650

一个简单的解决方案可能是：在每 10 个任务中，将第一个任务分配给需要 10 秒的服务器。接下来的 9 个任务会转到需要 1 秒的服务器。

当然，在这里我假设任务以 1 秒的间隔进入。有了这个假设和上述方法，两个服务器都得到了充分利用。

# machine-learning - 分类和回归之间的区别，使用 SVM

> ID：11630146
> 
> 赞同：4
> 
> 时间：2012-07-24T11:43:44.810
> 
> 标签：machine-learning, weka, svm

支持向量机分类器和支持向量机回归机之间的确切区别是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T23:31:47.680

一句话的答案是SVM分类器执行[二元分类](http://en.wikipedia.org/wiki/Binary_classification)，SVM回归执行[回归](http://en.wikipedia.org/wiki/Regression_analysis)。

在执行非常不同的任务时，它们都具有以下特点。

*   内核的使用
*   没有局部最小值
*   解的稀疏性
*   通过作用于边际获得的容量控制
*   支持向量的数量等

对于 SVM 分类，使用铰链损失，对于 SVM 回归，使用 epsilon 不敏感损失函数。

SVM 分类使用更广泛，在我看来比 SVM 回归更容易理解。

# visual-studio-2012 - WinRT 中的 C4965：整数 0 的隐式装箱

> ID：11630147
> 
> 赞同：1
> 
> 时间：2012-07-24T11:43:51.793
> 
> 标签：visual-studio-2012, c++-cx

在 VS 2012 中，当通过预期的`0`位置时，我收到错误 C4965（Implizites Boxing mit ganzer Zahl 0\. Verwenden Sie "nullptr" oder eine explizite Umwandlung） 。`Platform::Object^`代码的意图确实是传递整数值 0，而不是空引用。显然，在 C++/CLI 等中，有一个 __box 关键字可以使用，但 C++/CX 编译器无法识别。

那么：抑制此警告并创建盒装 WinRT 整数的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:58:01.307

根据 MSDN，您应该使用显式装箱。它建议

```
safe_cast<System::Object^>(0) 
```

...所以你要明确它不是 nullptr。在您的情况下，这可能是：

```
safe_cast<Platform::Object^>(0) 
```

# ios - cocos2d 慢触摸检测

> ID：11630155
> 
> 赞同：0
> 
> 时间：2012-07-24T11:44:16.677
> 
> 标签：ios, cocoa-touch, cocos2d-iphone

我正在使用 cocos2D 对 iOS 进行编程。我的游戏以 60fps 的速度运行，但 touchesMoved 函数的调用速度并不快，实际上它非常慢。它在模拟器上完美运行，但在我的设备上却不行。

touchesMoved 函数在模拟器中以 20fps 触发，但在设备上下降到 5fps。即使我在屏幕上移动了相同的 200 像素的鼠标/手指。

我也在使用加速度计委托。如果我禁用此功能，则会在设备上正常检测到触摸。任何解决方法，因为我想同时使用加速度计和触摸。

是的，我正在使用 ccTouchesMoved，是的，我确实将 UIAccelerometer 的 updateintreval 更改为 30，但行为没有改变。

# jsp-tags - 如何使用 jsp 从 EncodeURL 中检索参数？

> ID：11630158
> 
> 赞同：0
> 
> 时间：2012-07-24T11:44:24.187
> 
> 标签：jsp-tags

我在 JSP 中遇到 URLEncoding 问题。我的问题是我已经完成了 URL 编码，并且我将该页面重定向到另一个名为`save.jsp`.

我的代码是：

```
String basePath=  request.getScheme()+"://" + request.getServerName() + 
          ":" +request.getServerPort() + request.getContextPath();
String level1approval="12345X";
**encodeUrl** = response.encodeURL(basePath+"/"+"level1approval.jsp" + 
         "?user_id=+level1approval"); 
```

在 JSP 中，我试图获得`user_id`价值，但它给了我`null`.

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:02:24.653

我认为您无法正确关闭字符串。

```
response.encodeURL(basePath + "/level1approval.jsp?user_id=" + level1approval); 
```

# iphone - 如何在 ObjectiveC 项目中使用 C++ 文件

> ID：11630162
> 
> 赞同：2
> 
> 时间：2012-07-24T11:44:38.273
> 
> 标签：iphone, c++, objective-c, c, include

我有一个经常性的目标 C 项目。我将 10 个 C++ 文件导入到我的项目中。所有这些文件都相互“正在通信”。如果我看一下 File1.h，这个文件可以管理其他类中的所有操作。

所以，问题是如何包含对 File1.h 的引用并从中调用函数。例如：`[File1Class getAudioData];` 如果我包含它`#include "File1.h"`，我会得到一个错误“类是未知元素”

PS 我想将[aurioTouch2](http://developer.apple.com/library/ios/#samplecode/aurioTouch2/Introduction/Intro.html)示例代码导入我的项目并从他们的 C++ 代码中调用函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:57:12.367

您可以简单地在 Xcode 中打开这两个项目，然后从 aurioTouch2 应用程序中拖放您需要的文件。通过选择您在 xcode 项目中放置文件后得到的复选标记，确保文件实际被复制。在此之后，您将能够使用这些文件/类。考虑使用“.mm”作为要在其中使用 c++ 文件/类的实现文件的扩展名。您也可以使用“.mm”作为 appdelegate 实现文件的扩展名，以防遇到与 c++ 相关的错误。

# java - 如何识别基于注解的配置交易详情？

> ID：11630164
> 
> 赞同：0
> 
> 时间：2012-07-24T11:44:41.690
> 
> 标签：java, spring, hibernate, annotations, decompiling

当我反编译一个类的源代码时，它在一个方法中使用了一个事务。

我看不到配置的交易详情。

```
class A {

@Transactional(readOnly = false, propagation = Propagation.REQUIRED)
public List<Object> getObjects()

{

  // related stuff

}

public List<Student> getStudents()

{

  // related stuff

}

} 
```

现在，如果我反编译它，`class A`它不会给我任何提示来区分这两种方法。似乎两者都相同，但事实并非如此；一种是基于注释的方法，一种是没有注释的方法。

是否可以通过反编译来区分这些方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:02:42.787

是的，如果您使用 AspectJ 编译时编织，您应该能够在您的 @Transactional 类中看到编织事务相关的建议。例如。这就是我所看到的：

```
AnnotationTransactionAspect.aspectOf().ajc$before$org_springframework_transaction_aspectj_AbstractTransactionAspect$1$2a73e96c(this, 
```

但是，这仅适用于您使用 AspectJ 编译时编织的情况。如果您使用其他一些机制 - Spring AOP 或 AspectJ 加载时间编织，您将看不到增强的字节码

# linux-kernel - wait_for_completion 与 wakeup_interruptible 有何不同

> ID：11630165
> 
> 赞同：3
> 
> 时间：2012-07-24T11:44:51.387
> 
> 标签：linux-kernel, linux-device-driver

wait_for_completion 与 wakeup_interruptible 有何不同？

实际上问题是完成链与等待队列有何不同？对我来说它看起来是相同的概念

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:43:54.260

加上哈曼的回答，我还要说这两个函数是在不同的上下文中调用的：`wakeup_interruptible()`将**唤醒**所有等待 a 的线程`wait_queue`，而`wait_for_completion()`将**等待**特定任务完成。这对我来说是两件不同的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T23:38:17.727

完成结构内部使用等待队列和锁。

引入完成结构是为了解决一个非常常见的场景，即多个线程正在等待某个事件。一旦该事件发生，您只希望一个等待线程开始运行。

这里的关键是内核开发人员不必实现和维护等待队列，这使内核开发人员的生活变得轻松。

# xcode - 在 Paging 上添加的 UIViewController 上未调用按钮操作

> ID：11630166
> 
> 赞同：0
> 
> 时间：2012-07-24T11:44:53.510
> 
> 标签：xcode, uiviewcontroller, paging

我正在制作一个应用程序，其中我在 childView 上添加了四个类

```
[self addChildViewController:homeScreenViewController];
[self addChildViewController:portFolioViewController];
[self addChildViewController:watchListViewController];
[self addChildViewController:marketingViewController]; 
```

比我将 pageControl 上的 childView 称为分页。现在在 homeScreenViewController 类上，我添加了一个按钮，但该按钮不执行任何操作。

我在 HomeScreenViewController 类中声明了这样的按钮。这是代码

```
btn_Trade                 = [UIButton buttonWithType:UIButtonTypeCustom];
    btn_Trade.frame           = CGRectMake(0.0, 150.0, 142.0, 40.0);
    [btn_Trade setTitle:@"TRADE" forState:UIControlStateNormal];
    [btn_Trade setBackgroundColor:[UIColor redColor]];
    btn_Trade.titleLabel.font  = [UIFont fontWithName:@"SegoeUI-Light" size:20.0];
    [btn_Trade setContentHorizontalAlignment:UIControlContentHorizontalAlignmentCenter];
    [btn_Trade setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [btn_Trade addTarget:self action:@selector(pushToTradeListViewController) forControlEvents:UIControlEventTouchUpInside];
    [btn_Trade setEnabled:YES];
    [self.view addSubview:btn_Trade]; 
```

请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:06:51.560

你能添加你的 pushToTradeListViewController 方法的代码吗？

顺便说一句，如果您的 pushToTradeListViewController 看起来像这样：

```
-(void)pushToTradeListViewController:(id)sender{    
....
} 
```

您需要`:`在选择器中的方法名称后添加（2 分），如下所示：

```
[btn_Trade addTarget:self action:@selector(pushToTradeListViewController:) forControlEvents:UIControlEventTouchUpInside]; 
```

# python - Python pika 库零星行为，丢弃消息

> ID：11630172
> 
> 赞同：1
> 
> 时间：2012-07-24T11:45:05.030
> 
> 标签：python, rabbitmq, pika

我在生产系统中使用 pika 并注意到 BlockingConnection 和 SelectConnection 都在这里和那里丢弃了一条消息，没有明显的错误或警告。不幸的是，我无法发布代码，但想向可能经历过这种行为的其他用户征求任何指导或轶事。听说 RabbitMQ 非常稳固，所以开始质疑 pika 的可靠性，想知道是否还有更值得信赖的替代品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:08:55.943

我怀疑您可能看到的问题与`basic.publish`定义的方式有关。它总是成功的。如果发生错误（或成功，就此而言），服务器不会有任何流量。

解决此问题的可移植方法是将发布包装在事务中：

```
channel.tx_select()
channel.basic_publish(exchange='foo', ...)
channel.tx_commit() 
```

`tx_commit()`一旦成功处理了它收到的所有操作，该调用将强制服务器以 tx.commitok 响应。您的应用程序应该等到`tx.commit`成功；那么您可以确定所有发送的消息都是成功的。

rabbitmq 特定扩展的可移植性稍差`channel.select`，它会导致服务器以`basic.ack`. 不过，恐怕我从来没有让 pika's 使用该功能`BlockingConnection`，但您可能会获得更好的成功。

# java - 如何高效、快速地编译 Maven 项目

> ID：11630174
> 
> 赞同：11
> 
> 时间：2012-07-24T11:45:19.443
> 
> 标签：java, maven

我有一个包含 13 个子模块的 Maven 项目。我有两个问题如何优化构建过程：

1.  我只想为 x86-64 服务器编译 Java 代码。我如何配置 Maven 来做到这一点？
2.  我有一个有 4 个 CPU 内核的服务器。是否可以使用多线程来编译代码？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-24T11:50:56.030

2)`mvn package -T 2C`将使用每个 CPU 核心 2 个线程构建

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-24T11:48:25.090

> 1.  我只想为 x86-64 服务器编译 Java 代码。我如何配置 Maven 来做到这一点？

Java是跨平台的。你不能让它只为 x86-64 编译。

> .2\. 我有一个有 4 个 CPU 内核的服务器。是否可以使用多线程来编译代码？

`javac`是多线程的。它可能不会使用您拥有的所有内核，但这是您可以做到的多线程。

正如 Andrew 所指出的，您可以使构建多线程，这会导致测试同时运行（这可能会破坏您的测试）这不会使编译并发。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-24T11:48:31.453

1.  Maven 调用标准`javac`.
2.  是的，有可能，请参阅[Maven 3 中的并行构建](https://cwiki.apache.org/confluence/display/MAVEN/Parallel+builds+in+Maven+3)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-24T14:26:52.830

前段时间我[读到](https://gist.github.com/2508909)这个 ​​pom 配置来提高编译器性能

```
 <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-compiler-plugin</artifactId>
           .....
           <dependencies>
               <dependency>
                   <groupId>org.codehaus.plexus</groupId>
                   <artifactId>plexus-compiler-javac</artifactId>
                   <version>1.8.6</version>
               </dependency>
           </dependencies>
       </plugin> 
```

我没有尝试过，但它可能对你来说很有趣。

这种改进的解释可以在[这里](http://jira.codehaus.org/browse/PLXCOMP-202)找到。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-24T11:56:31.800

除了并行构建（上面提到的 -Tn 标志）之外，看看你是否可以在配置文件下隐藏各种额外的东西 - 将测试配置为默认关闭，进行各种标记、代码分析、分发到远程存储库等可选。您也可以尝试在 maven (MAVEN_OPTS env.var) 上投入更多内存

# iphone - 用于日语的 UILocalizedIndexedCollat ion 为联系人/音乐应用程序提供不同的排序

> ID：11630184
> 
> 赞同：5
> 
> 时间：2012-07-24T11:45:45.510
> 
> 标签：iphone, ios, cocoa-touch, uitableview, uilocalizedcollation

UILocalizedIndexedCollat​​ion 在日文 iOS 设备上返回的结果似乎与内置联系人/音乐应用程序中的结果不同。

请注意，这*不是*关于日语根本不显示在索引中的常见问题。我得到了日语假名部分，但与联系人等相比，索引的顺序不正确。

这是屏幕-左侧是音乐应用程序中显示的所需结果，其中首先显示假名名称-右侧是我得到的结果：

![iTunes截图](../Images/45e074b245211ba918141c180a85d450.png) ![我的应用程序的屏幕截图](../Images/ec6772c9a31e36487e269e94fdc01426.png)

UILocalizedIndexedCollat​​ion 似乎没有任何明显的配置方法，所以我不确定调整顺序的预期方法是什么，而且很多谷歌搜索都没有透露任何答案（尽管我也不是唯一的有这个问题的人）。任何指向正确方向的指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:27:40.730

好吧，如果您查看音乐应用程序中的表格，它无论如何都会在顶部显示拉丁“A”字符。我想Apple修改了侧边栏的数组以在另一种语言的顶部显示当前语言，即使它们仍然位于底部。

无论如何，保持原样可能更容易。您必须编辑部分选择代码和所有内容。

# javascript - Array.insert function error as Object function Array() { [native code] } has no method 'insert'

> ID：11630190
> 
> 赞同：1
> 
> 时间：2012-07-24T11:46:09.020
> 
> 标签：javascript, html, httphandler

我正在使用 javascript、HTML、HTTPHandlers 并且我在 javascript 中使用了一行作为

```
Array.insert( Garray, eval(firstmarker), tmparray); 
```

对于 Goggle Chrome 控制台中的这一行，发现错误如下：

> 未捕获的类型错误：对象函数 Array() { [native code] } 没有方法“插入”

在上面的行中，`tmparray`包含值，并且`Garray`是一个全局声明为的数组

```
var Garray = []; 
```

`eval(firstmarker)`具有位置，最初被视为未定义，但即使我手动传递 0，它也会在控制台中显示上述错误。

`Array.Insert`以及从以下链接中找到的方法：

[http://msdn.microsoft.com/en-us/library/bb383995.aspx](http://msdn.microsoft.com/en-us/library/bb383995.aspx)

我已经尝试过作为`Arrayname.splice`方法和`Arrayname.push`方法的替代方法，但它不起作用所以你能帮我解决上述错误吗？

提前谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:53:29.810

要将项目插入到数组中的特定点，您可以通过以下方式使用`splice()`（[MDN 文档）：](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)

```
Garray.splice( firstmarker, 0, yourElement1, yourElement2, ... ); 
```

`push()`( [MDN docu](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push) )的替代方案将一个元素附加到数组：

```
Garray.push( yourElement1, yourElement2, ... ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T11:47:23.840

正确的使用方法是[`Array#push()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push)，例如：

```
var my_array = [];
my_array.push('apple'); 
```

# java - 如何在端口 8080 上启动 rabbitmq 服务器

> ID：11630196
> 
> 赞同：2
> 
> 时间：2012-07-24T11:46:39.087
> 
> 标签：java, rabbitmq

我无法在 8080 上启动 rabbitmq。我该怎么做？我也无法在 ubuntu 上找到 rabbitmq.conf。请帮我解决这个问题。

```
ConnectionFactory factory = new ConnectionFactory();
factory.setHost("localhost");
factory.setPort(8080);
Connection connection = factory.newConnection();
Channel channel = connection.createChannel();

    channel.queueDeclare(QUEUE_NAME, false, false, false, null);
String message = "Hello World!";
channel.basicPublish("", QUEUE_NAME, null, message.getBytes());
System.out.println(" [x] Sent '" + message + "'");
channel.close();
connection.close(); 
```

当我运行它时，我得到了这些错误：

```
Exception in thread "main" java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at com.rabbitmq.client.ConnectionFactory.createFrameHandler(ConnectionFactory.java:445)
    at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:504)
    at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:533)
    at javaapplication3.rabbitchat.main(rabbitchat.java:26) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:03:30.730

您可以使用以下命令在端口 8080 上启动 rabbitmq 服务：

```
:~$ RABBITMQ_NODE_PORT=8080 rabbitmq-server 
```

默认情况下，如果在启动时未配置，第一个实例的节点名称为“rabbit”。如果您想使用不同`NODENAME`或多个 rabbitmq 服务器实例启动 rabbitmq 服务以进行集群，您将需要更改`NODENAME`以及为`NODE_PORT`您启动的每个实例更改：

```
:~$ RABBITMQ_NODE_PORT=<PORT> RABBITMQ_NODENAME=<UNIQUE_NODENAME> rabbitmq-server 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:18:57.237

如果有人仍然感兴趣，我会收到“连接被拒绝”错误，*只有*当我使用推荐“setPort”时。当我评论它时，它起作用了！

我也有输出端口号的代码，它说它设置为 8080，尽管我把 setPort(8080) 拿出来了……很奇怪……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T13:45:44.313

您确定没有其他进程在端口 8080 上运行吗？这是一个非常受欢迎的港口。（Oracle 使用它，很多应用服务器等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-20T12:35:18.180

Oracle 将在 8080 端口上运行。所以如果你需要在 8080 上运行 rabbitmq，请停止 Oracle 服务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T17:07:36.767

rabbitmq.conf 文件通常不附带 Rabbitmq 的 apt 版本，但是 Rabbit 将始终在启动时查找该文件，因此您可以手动创建它。[http://www.rabbitmq.com/configure.html#configuration-file](http://www.rabbitmq.com/configure.html#configuration-file)

正如 Kurt Du Bois 所说，确保该端口上没有其他任何东西在运行，运行`netstat -anlp | grep 8080`应该会为您提供该信息。

# c# - 创建 TimerCallback 数组

> ID：11630197
> 
> 赞同：-1
> 
> 时间：2012-07-24T11:46:41.887
> 
> 标签：c#

如何创建一个类的数组，例如 TimerCallback？

我需要启动一个程序，当该程序在一个列表中声明时，在 X 时间检查程序是否打开，我使用 TimerCallback 来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:50:45.423

这不起作用吗？

```
using System.Threading;

namespace ConsoleApplication18
{
    class Program
    {
        static void Main(string[] args)
        {
            var callbacks = new TimerCallback[]
            {    
              new TimerCallback(Foo),
              new TimerCallback(Bar),
              new TimerCallback(FooBar)
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:52:03.957

就创建数组而言，它非常简单：

```
int[] intArray = new int[5]; // 5 is the size of array 
```

# javascript - 将 JSON 映射到 observableArray 时出错

> ID：11630201
> 
> 赞同：1
> 
> 时间：2012-07-24T11:46:58.457
> 
> 标签：javascript, json, knockout.js

无法将我的 JSON 数据加载到 ko.observableArray 中，也不知道为什么。

```
$(document).ready(function(){
    function Region(uid, name) {
        this.uid = ko.observable(uid);
        this.name = ko.observable(name);
    }

    function CompanyViewModel() {
        this.regions = ko.observableArray([]);
    }

    ko.applyBindings(new CompanyViewModel());   

    // Init.
    $.getJSON( '/regions/', 
        function(data){
            if(data.status == 'ok')
            {
                var mappedData = ko.utils.arrayMap(data.regions, function(item) {
                    return new Region(item.uid, item.name);
                });
                CompanyViewModel.regions( mappedData );
            }
        }
    );
}); 
```

调试器说：Uncaught TypeError: Object function CompanyViewModel()... has no method 'regions'

我是 Knockout 的新手，肯定有一些明显的错误，但我不知道在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:16:51.813

尚未对其进行测试，但应该让您了解我的意思，这就是我的做法：

```
$(document).ready(function(){
    var Region = function(uid, name) {
        this.uid = ko.observable(uid);
        this.name = ko.observable(name);
    }

    var CompanyViewModel = function() {
        this.regions = ko.observableArray([]);
    }

    var model = new CompanyViewModel();
    ko.applyBindings(model);   

    // Init.
    $.getJSON( '/regions/', 
        function(data){
            if(data.status == 'ok')
            {
                var mappedData = ko.utils.arrayMap(data.regions, function(item) {
                    return new Region(item.uid, item.name);
                });
                model.regions( mappedData );
            }
        }
    );
}); 
```

# javascript - Fullcalendar 资源视图显示一整天并使其可滚动

> ID：11630202
> 
> 赞同：1
> 
> 时间：2012-07-24T11:47:07.183
> 
> 标签：javascript, jquery-plugins, view, fullcalendar

我为 jquery 插件 fullcalendar 找到了一个很好的资源视图实现。
[Jarno Kurlin 的 Fullcalendar Resourceview](http://tux.fi/~jarnok/fullcalendar-resourceviews/)

但是，对于资源日视图，我无法显示一整天，我想让这个视图像原始完整日历附带的议程视图一样滚动。
有人尝试过吗？实现滚动的最佳方法是什么？
提前感谢您在此问题上的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T09:40:37.700

您只需要应用简单的 css 来添加滚动条。对 DOM 的检查显示有一个 div 包含类似于以下的资源视图：

```
<div class="fc-view fc-view-resourceDay fc-grid" style="position: relative; display: block;" ... 
```

该类`fc-view`的 css 属性`overflow`设置为`hidden`. 您可以在自己的 css 文件中将其覆盖为`scroll`

例如。

```
.fc-view {
    overflow : scroll
} 
```

如果您只想为*资源日*视图设置它，那么只需执行以下操作：

```
.fc-view.fc-view-resourceDay {
    overflow : scroll
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T14:11:19.140

您不能使用溢出，因为在渲染时它会计算绝对位置，并且当您在中间滚动更改日期时，它会错误地显示事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T10:34:07.177

我自己也注意到了这一点，我有很多资源，它使每一列都太小了，所以我添加了这个以使列更宽：

```
.fc-day-content {width:150px!important;} 
```

然后将其用于滚动条：

> .fc-view {溢出：滚动！重要；}

但我最终得到了这个

![具有大量多个资源的 FullCalendar](../Images/fa01941bb693f08198bfc7012b717124.png)

添加我不知道如何解决它，想知道是否有人有想法或解决方案

谢谢

# c# - 扩展方法之间的模棱两可的方法调用

> ID：11630205
> 
> 赞同：6
> 
> 时间：2012-07-24T11:47:11.583
> 
> 标签：c#, .net

我已经通过 nuget 包下载了 DynamicLinq 库。我像下面这样使用它

```
db.ReservationSet.Where("blbalbabla",1,2) 
```

但我得到以下例外。

> 错误 38 以下方法或属性之间的调用不明确：'System.Linq.Dynamic.DynamicQueryable.Where(System.Linq.IQueryable, string, params object[])' 和 'System.Linq.Dynamic.DynamicQueryable.Where( System.Linq.IQueryable，字符串，参数对象 [])' F:\Projects\IEKeysNew\IEKEYS\Controllers\ReportController.cs 145 22 IEKEYS

这是两种方法的标志。

```
public static IQueryable<T> Where<T>(this IQueryable<T> source, string predicate, params object[] values);
public static IQueryable Where(this IQueryable source, string predicate, params object[] values); 
```

我找不到摆脱这个编译时异常的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T11:59:15.643

不幸的是，另一个第三方 .dll 库内部包含相同的动态 linq 库。Trirand 的 jQGrid 库包含动态 linq 库，这就是我导入 System.Linq.Dynamic 库时发生冲突的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:50:06.200

从您的代码中删除以下使用：

```
using System.Linq; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:54:44.583

有什么类型`db.ReservationSet`？

如果它是您的实例的集合，请`MyClass`尝试编写`db.ReservationSet.Where<MyClass>("blbalbabla",1,2)`.

如果它是可分配的，`IQueryable`那么尝试写：
`((IQueryable )db.ReservationSet).Where("blbalbabla",1,2)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T11:55:15.377

我知道这不是最漂亮的方式。但我没有别的想法。

将您的类拆分为 2 个 cs 文件并创建部分类。`System.Linq`因此，您从其中一个文档中删除了使用。试一试也许有效。

# python - 如何检查 SELECT 语句的 SQLite 游标结果是否为空？

> ID：11630207
> 
> 赞同：2
> 
> 时间：2012-07-24T11:47:20.303
> 
> 标签：python, sqlite

我已经尝试使用 fetchone() 并且它可以工作，但问题是它会在我确实在结果中有项目的情况下从列表中删除第一个条目。

```
results = cursor.execute('SELECT ID, text FROM mytable')
if results.fetchone() is None:
    print "**********"
    print "No entries"
    print "**********"
else:
    for row in results:
        print "\t%s: %s" % (row[0], row[1]) 
```

有没有办法找出“结果”是否为空而不从中获取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:26:59.677

SQLite 有点尴尬，因为你必须`.fetchone()`看看你是否得到结果。不过，有一个预读的解决方法（通常可用于可迭代对象）。

```
from itertools import chain
try:
    first_row = next(results)
    for row in chain((first_row,), results):
        pass # do something
except StopIteration as e:
    pass # 0 results 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:57:39.243

不[`rowcount`](http://docs.python.org/library/sqlite3.html#sqlite3.Cursor.rowcount)存在，但始终是`-1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:43:32.413

```
res = cursor.execute('SELECT ID, text FROM mytable')

try:
    first_row = res.next()

    for row in [first_row] + res.fetchall():
        print '\t%s: %s' % (row[0], row[1])
except StopIteration as e:
    print 'No entries' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T13:41:39.777

```
Use the cursor to fetching records not a result variable because cursor not return any values, so replace this :

     $ results = cursor.execute('SELECT ID, text FROM mytable')
     $ if cursor.fetchone() is None:
     $    print "**********"
     $     print "No entries"
     $     print "**********"
     $ else:
     $     for row in cursor:
               print "\t%s: %s" % (row[0], row[1]) 
```

现在它将起作用...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T14:06:50.603

这不是最优雅的，但它应该可以正常工作吗？

```
results = cursor.execute('SELECT ID, text FROM mytable')
done_stuff = False
for row in results:
    done_stuff = True
    # do the stuff you want to do
if not done_stuff:
    print("didn't do stuff") 
```

是否在最后进行检查并不重要，因为 for 循环将立即以空结果集结束。

# java - 如何在 Eclipse 上通过代理调用 Web 服务

> ID：11630213
> 
> 赞同：2
> 
> 时间：2012-07-24T11:47:41.970
> 
> 标签：java, eclipse, web-services, proxy

Eclipse 通过代理服务器连接网络。HTTP、HTTPS、SOCKS 主机、端口和凭据的代理设置似乎没问题。

[我可以使用“ http://www.webservicex.net/stockquote.asmx?WSDL](http://www.webservicex.net/stockquote.asmx?WSDL) ”创建 Web 服务客户端。但是，当我尝试调用该服务时，我得到了异常： `java.net.ConnectException: Connection timed out: connect`

有什么建议么？

# android - 从Android中的数据库中检索日期明智的数据

> ID：11630215
> 
> 赞同：2
> 
> 时间：2012-07-24T11:47:48.003
> 
> 标签：android, sqlite

在我的数据库中，我有 1 个表`date`作为列之一，它存储用户在我的表中添加一些数据的日期。

现在我想单独检索当月的数据。我通过谷歌搜索但没有得到适当的答案。

我的表创建代码：

```
"create table incomexpense(
    _id integer primary key autoincrement,
    "+"price text not null,description text not null,
    "+"quantity text not null,
    "+"total text not null,
    "+"category text not null,
    "+"recurrence text not null,
    "+"date text not null,
    "+"groups text not null,
    "+" recurrenceid text not null);"; 
```

谁能帮助如何从当前日期获取第 7 天的日期。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T20:21:01.580

如果要“自动”加载当前年份/月份，请使用带有修饰符和格式掩码的 SQLite`strftime`函数。`'now'``'%Y-%m'`

```
select strftime('%Y-%m', 'now'); 
```

现在，来回答你的问题：

> 现在我想单独检索当月的数据。

好吧，这里来了一个烂摊子。您[不能将日期存储为 datetime 类型](http://www.sqlite.org/datatype3.html)，而是以 SQLite 无法使用日期函数解析的格式存储为字符串。因此，您必须将其转换为[SQLite 可以理解](http://www.sqlite.org/lang_datefunc.html)的格式。

您可以使用通常的`substr`功能来做到这一点

```
substr(exp_date, 7) || '-' || substr(exp_date, 4,2) || '-' || substr(exp_date, 1,2) 
```

所以这将`dd/mm/yyyy`转换为`YYYY-mm-dd`格式。

所以完整的查询将是：

```
SELECT *
FROM   incomexpense
WHERE  Strftime('%Y-%m', 'now') = Strftime('%Y-%m', Substr(exp_date, 7)
                                                    || '-'
                                                    || Substr(exp_date, 4, 2)
                                                    || '-'
                                                    || Substr(exp_date, 1, 2)) 
```

看看[这里是如何工作的](http://sqlfiddle.com/#!7/c13a4/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:18:52.260

Android 没有像“日期”这样的数据类型。您可以将其存储为字符串并在使用时对其进行适当的解析。因此，使用此选项，除非您检索并解析 Date ，否则您将无法找到当月的记录。

其他选项是将其存储为数字 - Unix 时间，自 1970-01-01 00:00:00 UTC 以来的秒数。

通过 where 子句中的一些计算，您可以找出当月的记录。

# facebook - 为什么偏移和限制

> ID：11630217
> 
> 赞同：2
> 
> 时间：2012-07-24T11:47:50.053
> 
> 标签：facebook, limit, offset

Facebook模拟器测试[https://graph.facebook.com/me/feed?limit=50](https://graph.facebook.com/me/feed?limit=50)回到16，切换到[https://graph.facebook.com/me/feed?limit=1&offset=9](https://graph.facebook.com/me/feed?limit=1&offset=9)，但是没有数据被退回。
如果偏移量更改为 8，它将返回一个数据。这是怎么回事，谁能帮帮我？
数据量足够，但不能使用limit和offset来显示所有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:08:47.527

这篇[facebook 博客文章](https://developers.facebook.com/blog/post/478/)解释了 limit 和 offset 参数是如何工作的，以及它们的局限性。

使用基于时间的分页而不是“偏移量”来确保每次调用都能获得尽可能多的结果。对于这些 Graph API 连接，使用“since”和“until”参数。

# c# - 使用 JSON.NET 反序列化 - 如何为两种可能的类型处理一个名称？

> ID：11630225
> 
> 赞同：2
> 
> 时间：2012-07-24T11:48:14.770
> 
> 标签：c#, json, json.net

所以，我有一些我正在反序列化的 JSON。请记住，我无法控制我获得的数据；我只需要尽可能地使用它。

它进展得相当顺利，直到我遇到一个问题，其中一个项目（`"z"`下面）可以是同一项目类型中的两种不同类型（参见`"z":[]`和`"z":{}`）（在我正在处理的数据中，`things`应该被视为`Dictionary<string, FooType>`反序列化后。 ..)。

```
{
"things":{
    "1":{
        "x":123.45,
        "y":678.90,
        "z":{
                "2":true
            },
        "a":[
                1,
                2
            ]
        },
    "2":{
        "x":1414.23,
        "y":5656.78,
        "z":[
                true
            ],
        "a":[
                3
            ]
        }
    }
} 
```

我很确定这是一个输出错误（即源`"z":[true]`在它应该产生的时候产生`"z":{"0":true}`），因为这是`"z":[true]`稍后在应用程序中解释的方式。但是，正如我所说，我无法控制数据，而且这个问题不太可能很快得到解决。

我尝试为每个变量设置一个成员变量，但命名冲突（来自使用 [DataContract(Name = "z")]）会导致异常（不足为奇）。

**如何将这两种类型读`"z"`入一个共同的 FooType？（或等价物，例如普通 FooParentType 的两个子类，它们以某种方式仅在正确的情况下才被应用......）**

编辑：作为反序列化过程的一部分，我更愿意在不预先处理字符串的情况下实现所需的结果（尽管如果没有其他方法，我会去那里，我猜......）

我正在使用 C#、Mono、JSON.NET，并使用这样的代码（[pastebin 上的可编译版本](http://pastebin.com/xG94bDLY)）：

```
string jsonString = "{\"things\":{\"1\":{\"x\":123.45,\"y\":678.9,\"z\":{\"2\":true},\"a\":[1,2]},\"2\":{\"x\":1414.23,\"y\":5656.78,\"z\":[true],\"a\":[3]}}}";
RootType rt = JsonConvert.DeserializeObject<RootType>(jsonString); 
```

与类：

```
[DataContract]
class RootType
{
    [DataMember(IsRequired = true)]
    public Dictionary<string, FooType> things { get; set; }
}

[DataContract]
class FooType
{
    [DataMember(IsRequired = true)]
    public double x { get; set; }

    [DataMember(IsRequired = true)]
    public double y { get; set; }

    [DataMember(IsRequired = true)]
    public List<int> a { get; set; }

    // List<bool> zList and Dictionary<string, bool> zDict each only work for one case
    // but not the other, and having both causes a naming conflict
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:50:21.803

我有一个类似的问题，只是通过 string.replace 函数运行字符串，以在反序列化之前“更正”数据。

# javascript - 以字符串结尾的javascript正则表达式浮点数

> ID：11630231
> 
> 赞同：1
> 
> 时间：2012-07-24T11:48:58.297
> 
> 标签：javascript, regex, floating-point

学习正则表达式，但这让我很头疼。我需要匹配一个浮点数（带有小数点`.`或`,`小数点），它必须以以下字符结尾：`€/g`.

有效的匹配应该是例如：

*   `40€/g`
*   `43.33€/g`
*   `40,2€/g`
*   `40.2€/g`
*   `38.943€/g`

感谢帮助..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T11:57:24.360

正则表达式将如下所示：

```
\d+(?:[.,]\d+)?€/g 
```

在 Javascript 中，作为正则表达式对象（注意正斜杠需要转义）：

```
/\d+(?:[.,]\d+)?€\/g/ 
```

以下是每个部分的功能的细分：

```
\d+  # one or more digits
(?:    # ... don't capture this group separately
 [.,] # decimal point
 \d+  # one or more digits
)?   # make the group optional
€/g  # fixed string to match 
```

如果你想让 .123€/g 之类的东西也有效，你可以使用：

```
(?=[.,]|\d)(?:\d+)?(?:[.,]\d+)?€/g 
```

也就是说，这两组数字都是可选的，但至少必须存在一个（这使用了[前瞻](http://www.regular-expressions.info/lookaround.html)，这有点棘手）。

请注意，这也将匹配诸如“word2€/g”之类的结构。如果要防止这种情况发生，请以`(?<=^|\s)`(如果前面有空格或字符串开头则匹配) 开始正则表达式并以`(?=$|\s)`(如果后面跟着空格或字符串结尾则匹配) 结束。

完整版：

```
(?<=^|\s)(?=[.,]|\d)(?:\d+)?(?:[.,]\d+)?€/g(?=$|\s) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T11:57:24.507

```
\d+([.,]\d+)?€/g 
```

应该工作，我猜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:57:37.557

# java - 泛型，在扩展子类时强制类型 Void 最终不需要知道类型

> ID：11630234
> 
> 赞同：0
> 
> 时间：2012-07-24T11:49:14.703
> 
> 标签：java, generics, inheritance, types, void

一个抽象类被声明为

```
 myClass<E extends Number, D extends Number> 
```

子类是

```
 final mySubClass<Double,Integer>
 final myOtherSubclass<Double,Double> 
```

想象一下，有一个子类没有第一种类型的参数化过程，我的意思是，类型将被忽略。有没有办法将它设置为 Void、Null 或其他什么？

```
final mySubClassThatDontUseFirstType<Void,Integer> 
```

例如，如果它内部有一个内部 List<E>，则该列表将是 List，因为它永远不会被使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:54:36.410

> 我认为问题是 Void 不扩展 Object，因为如果不是如果我认为它有效

当然，类`java.lang.Void`扩展`Object`，就像任何其他 Java 类扩展一样`Object`。

请注意，`Void`与 不一样`void`。`Void`大写`V`字母有点像原始类型（`int`-> `Integer`，`long`->`Long`等）的包装类。

请注意，编译器会`Void`像对待任何其他类一样对待。这意味着如果你有一个返回的方法`Void`，它必须返回一个值；例如，该方法必须以`return null;`. 它不像`void`，编译器将其理解为“不返回任何内容”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:55:01.187

> ***有没有办法将它设置为 Void、Null 或其他什么？***

不，不是。无论您选择什么，它都必须是`Number`（这只是 Java 语言的要求）的子类型。

你可以做的是创建一个不可实例化的类`VoidNumber`

```
class VoidNumber extends Number {

    // Private constructor
    private VoidNumber() {
    }

    ...
} 
```

并用它来记录它没有被使用的事实。

# php - 在更改输入标签时使用 javascript 进行表单验证

> ID：11630235
> 
> 赞同：2
> 
> 时间：2012-07-24T11:49:16.127
> 
> 标签：php, javascript

我需要使用 JavaScript 验证表单。由于我使用字段名称表中的数据来打印每个字段（如姓名、地址、电话号码），因此表单会不断变化。我正在使用循环打印字段的标签和相应的文本输入标签。（例如，姓名：输入姓名的文本框，电话号码：输入电话号码的文本框。）最后在提交表单并进入详细信息表时将这些值放入数组中。

以下是打印每个字段和文本框的代码：

```
while ($row=mysql_fetch_array($result)){
    echo'<labelfor='.$row['field_name'].'name=field_id>'.$row['field_name'].':</label>';                        
    echo'<inputtype="text" name=field_name[]id="'.$row['field_id'].'":value="'.$row['field_value'].'" size="20" class = "inpBox" >';
} 
```

现在我需要使用 JavaScript 检查这些字段是否为空，然后更改该特定文本框的样式。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:04:20.887

您需要为表单添加提交事件。然后，您可以执行以下操作：

这是针对 jQuery 的：

```
$("form").submit(function{
    $('input[type="text"]',"form").each(function(){
        var $me = $(this);
        var status = true;
        if($me.val() == ""){
            $me.addClass("input-validation-error");
            status = false;
        }
        //Return status. True=Form is valid, False=Form is NOT valid
        return status;
    });
}); 
```

你可以在这里阅读更多：http: [//api.jquery.com/submit/](http://api.jquery.com/submit/)

要获取 javascript 的值，您可以执行以下操作：

```
var inputs = document.getElementsByTagName("input");
for (var i = 0; i < inputs.length; i++) {
    var me = inputs[i];
    if(me.value == "") {
        me.className = "input-validation-error";
    }
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:03:24.483

一般谷歌“动态表单验证”

对于您的特定情况，您会感兴趣 请参阅[https://developer.mozilla.org/en/DOM/document.getElementsByClassName](https://developer.mozilla.org/en/DOM/document.getElementsByClassName) 并遍历所有元素。您可能希望向输入字段添加额外的属性，以定义它是否需要验证以及所需的验证类型。

# vb.net - VB.net - 使用 Shell() 运行 java 应用程序并设置其 appdata 文件夹。多个命令？

> ID：11630236
> 
> 赞同：0
> 
> 时间：2012-07-24T11:49:21.103
> 
> 标签：vb.net, process, command-line-arguments, appdata

好吧，伙计们，我有一份我的世界，它是一个由 Minecraft.exe 启动的 Java 程序。

在同一个文件夹内是我的程序（我们称之为launcher.exe），我在VB.net 和一个名为LocalAppData 的文件夹中编程。

如果我将快捷方式放在与 Minecraft.exe 相同的文件夹中，请清除“开始于”字段并将其放在目标字段中：

> C:\Windows\System32\cmd.exe /c start cd LocalAppData&& set APPDATA=%cd%\LocalAppData&& javaw -Xms4096M -Xmx4096M -cp LocalAppData\Minecraft.exe net.minecraft.LauncherFrame

然后 minecraft 从 LocalAppData 文件夹中使用我的自定义内存分配启动。两个命令窗口也会出现。当 minecraft 关闭时，一个会关闭，但另一个不会，需要由用户关闭

**我的问题是：**如何在 VB.net 中而不是使用 Windows 快捷方式获得相同的结果，有没有办法停止命令窗口出现或将它们都设置为自动关闭？

我的目标是从子文件夹启动 minecraft，因此本地文件路径比全局文件路径更可取，但在运行时确定应用程序的位置并从子文件夹工作也可以。

我以为我可以在 Shell() 命令中使用相同的代码来产生相同的效果，但似乎没有。

理想情况下，我想创建一个运行我的世界的程序：

*   自定义内存分配
*   本地文件路径，以便它可以可移植地运行
*   appdata 文件夹更改为子文件夹，以便可以便携运行
*   这些命令窗口要么消失要么最小化，然后在用户关闭我的世​​界时自动关闭。

我知道这是一个很大的问题，但我已经学习了 6 个月的编程课程，我承认我不是最好的程序员。一旦我知道如何做到这一点，我就可以创建程序的其余部分来管理单独的子文件夹中的多个安装并让您选择要启动的一个，但我只需要实际启动 java 应用程序本身的帮助。

**注意：** 我应该澄清一下，Minecraft.exe 不是我制作的，我没有编写 java 程序。我只是在 VB.Net 中寻找解决方案。

感谢您阅读所有这些内容，并为这篇长文感到抱歉。

**编辑**

感谢您的帮助。这是我到目前为止所拥有的，但它会产生错误“错误：无法创建 JavaVirtualMachine。错误：发生了致命异常。程序将退出”

```
'Declare Processes
Dim appDataStartInfo As ProcessStartInfo = New ProcessStartInfo()
Dim javaStartInfo As ProcessStartInfo = New ProcessStartInfo()
Dim appPath As String = Application.StartupPath()
'Launch appdata relocation process
appDataStartInfo.FileName = "cmd.exe"
appDataStartInfo.Arguments = "/c start cd " & appPath & "&& set APPDATA=" & appPath & "\LocalAppData"
appDataStartInfo.UseShellExecute = True
Process.Start(appDataStartInfo)
'Launch Minecraft
javaStartInfo.FileName = "javaw.exe"
javaStartInfo.Arguments = "-Xms4096M -Xmx4096M -cp " & appPath & "\LocalAppData\.minecraft\bin\Minecraft.jar net.minecraft.LauncherFrame"
javaStartInfo.UseShellExecute = True
Process.Start(javaStartInfo) 
```

有谁看到我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:56:31.827

Process 类 (http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx) 允许您启动一个进程。您使用 ProcessStartInfo 实例 (http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo(v=vs.80).aspx ) 设置它。

我没有时间给你所有的细节，但这个伪代码应该让你开始：

```
Dim startInfo As ProcessStartInfo = new ProcessStartInfo()
startInfo.FileName = "javaw.exe" 'That's the name of your executable
startInfo.Arguments = "your argument line" 
startInfo.UseShellExecute = true 'Needed to open a command window   
Process.Start(startInfo) 
```

# blackberry - 黑莓中从右到左的语言

> ID：11630243
> 
> 赞同：0
> 
> 时间：2012-07-24T11:49:48.177
> 
> 标签：blackberry, java-me, right-to-left

我正在编写一个应用程序，它要求我识别阿拉伯语文本并创建一个从右到左移动的小进度条，告诉用户他到底在哪里。

![http://i.stack.imgur.com/iFxZP.png](../Images/03ff5e2acaca86e9e0a3ad2d9f6b8eab.png)

两件事：
1）我不知道如何让进度条从右向左移动
2）如果我打算使用 Fillrect，我想确定是否有其他文本不填充矩形。

对于英文文本，我们可以进行字符计数，但对于外语，我们如何判断 LabelField 是否包含文本

# c# - Web 服务的 WSDL 中禁止的 XML 模式构造

> ID：11630246
> 
> 赞同：2
> 
> 时间：2012-07-24T11:50:00.413
> 
> 标签：c#, .net, visual-studio-2010, web-services, xsd

我是一名 Java 开发人员，他创建了一个相当大的 Web 服务，可以很好地与 Java 客户端或其他工具（Soap UI）配合使用。

我们的一位客户想要为 Web 服务编写一个 .NET 客户端，并使用 VS2010 的“添加服务引用”功能。根据客户的说法，这不起作用，因为我们的 WSDL 和 XSD 文件使用[本文](http://blogs.msdn.com/b/sonuarora/archive/2007/06/16/contract-generation-from-wsdl-xml-schema-datacontractserializer-vs-xmlserializer.aspx)中定义的“禁止的 XML 构造” ：

问题是我们在 WSDL 中大量使用了 xsd:attribute 数据。

所以问题是：是否有一种解决方法可以使 .NET 存根生成代码与包含 xsd:attribute 的 WSDL/XSD 文件兼容？是否有另一个支持此功能的 Web 服务 .NET 库？

我的另一个问题是，为什么微软首先要施加这些限制？为什么 xsd:attribute 是 Web 服务中的禁止结构？？？有什么线索吗？

可能相关：[C#.NET Generate web service reference using WSDL (from XML schema) 问题](https://stackoverflow.com/questions/7000474/c-net-generating-web-service-reference-using-wsdl-from-xml-schema-problem)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:25:55.700

如果您可以访问带有[.NET Framework](http://go.microsoft.com/fwlink/?linkid=186916)的机器，为什么不使用 svcutil 为他生成代理/配置设置并将其发送给他？

请[访问 www.svcutil.com](http://www.svcutil.com/)了解可供您使用的开关和选项列表

我发现，如果客户不能以一种方式做到这一点，而您提供了一种记录在案的（可能是自动化的）做事方式，那么这通常就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:18:36.087

我已经用.NET 版本的 Remobjects (http://www.remobjects.com) 测试了链接中提供的 HelloWorld.wsdl，它似乎工作正常。我没有实际的服务来对此进行测试，但我建议您（或客户 :)）下载并试一试。

.NET 版本可以在这里找到：

[http://www.remobjects.com/ro/net.aspx](http://www.remobjects.com/ro/net.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:18:44.890

显然，答案是您不应该**使用现代方式通过**[svcutil.exe](http://msdn.microsoft.com/en-us/library/aa347733.aspx)生成存根，而应使用旧方式和[wsdl.exe](http://msdn.microsoft.com/en-us/library/7h3ystb6%28v=vs.71%29.aspx)

使用 wsdl.exe 从命令行创建存根工作正常。生成的代码按预期工作，.NET 客户端连接到 Axis2 Web 服务。

# objective-c - 如何在 Xcode 中读取带有地址的键的值

> ID：11630247
> 
> 赞同：0
> 
> 时间：2012-07-24T11:50:04.120
> 
> 标签：objective-c, xcode, debugging, object

我的应用程序崩溃并给出输出 `value for key devices of object 0xde8a470 is nil`，“设备”（NSMutableArray）设置如下：

```
- (void) centralManager:(CBCentralManager *)central 
didDiscoverPeripheral:(CBPeripheral *)peripheral 
  advertisementData:(NSDictionary *)advertisementData 
               RSSI:(NSNumber *)RSSI 
{
 NSMutableArray *peripherals = [self mutableArrayValueForKey:@"devices"];
    if( ![self.devices containsObject:peripheral] )
        [peripherals addObject:peripheral];  
...
} 
```

我如何知道哪个对象`0xde8a470`是什么以及如何读取它的值？

# android - 安卓应用程序上的路标 Oauth 身份验证

> ID：11630253
> 
> 赞同：0
> 
> 时间：2012-07-24T11:50:32.763
> 
> 标签：android, authentication, oauth, signpost

我想在我的 android 应用程序上使用 google 帐户使用 Oauth 身份验证，这样用户就不需要创建新的登录名和密码，我也不必处理身份验证，但 google 会代替我处理。我已经搜索了一段时间，但找不到有关如何使用 android 应用程序上的 google 帐户执行此操作的信息。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:21:06.563

无需使用像*signpost*这样的特殊 OAuth 库。Android 内置了[`AccountManager`](https://developer.android.com/reference/android/accounts/AccountManager.html)对 Google OAuth 的支持。

有关如何使用它的简约示例，请参阅[此答案。](https://stackoverflow.com/a/5941354/1467115)Google 的帐户类型是`com.google`.

Google 还提供了关于如何使用then 调用 Google Tasks API来实现此功能[的分步指南。](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android)`access_token`

# amazon-web-services - 从 Amazon Cloud 访问 Dropbox API

> ID：11630255
> 
> 赞同：0
> 
> 时间：2012-07-24T11:50:38.063
> 
> 标签：amazon-web-services, dropbox, dropbox-api

我正在构建一个项目，该项目将使用 Dropbox API 从 Dropbox 读取和写入文件。我注意到端点 URL 链接到 Amazon ELB，我想知道是否有一个我可以使用的 AWS 内部 API，它可以通过向 Amazon 发出内部请求而不是外部请求来为我和 Dropbox 节省一些钱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:05:10.040

Dropbox API 的主机是`api.dropbox.com`并解析为 199.47.218.158。

这看起来不属于 EC2 公共 IP 之一。
请参阅：[https ://forums.aws.amazon.com/ann.jspa?annID=1528](https://forums.aws.amazon.com/ann.jspa?annID=1528)

无论如何，即使是，也无法确定内部 IP，除非他们发布弹性 IP DNS 名称（看起来像`ec2-xx-xx-xx-xx.us-west-2.compute.amazonaws.com`）。

一个鲜为人知的提示：
如果您从 EC2 实例中查询弹性 IP 的 DNS 名称，您将获得一个内部 IP。

# jquery - jquery 如何将点击事件绑定到基于字符串的元素？

> ID：11630256
> 
> 赞同：-1
> 
> 时间：2012-07-24T11:50:39.977
> 
> 标签：jquery

我正在制作一个循环，并获取拇指图像信息，这是代码，

```
$.map(galImg, function ( val ,i ){
  // adding no.of li's
  thumList += '<li><img src='+val.thumb+'></li>';   
})

thumList += "</ul>"

// finally placed in to navi div.
navi.html(thumList); 
```

最多找到所有作品。但我正在寻找的是，如何将点击事件添加到每个 this 中`<li>`？而我做（因为一旦用户点击`<li>`'si将获得索引号并相应地替换滑块。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:53:09.530

尝试使用[.on()](http://api.jquery.com/on/)：

```
navi.on('click', 'li', function(){
     alert( $(this).index() );
}) 
```

# javascript - 什么是节点 lru 缓存？

> ID：11630265
> 
> 赞同：0
> 
> 时间：2012-07-24T11:50:54.540
> 
> 标签：javascript, node.js, mongodb, caching, express

什么是[节点 LRU 缓存](https://github.com/isaacs/node-lru-cache/)？任何人都可以解释如何实现它？假设我有三层，client-midlayer(handle calls)-backend(mongoDB)，LRU缓存应该在中间层实现。

如果有一个简单的例子来展示它是如何工作的，那就太好了！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:58:22.347

有一个关于如何在源存储库中使用它的示例：[https ://github.com/isaacs/node-lru-cache/tree/master/test](https://github.com/isaacs/node-lru-cache/tree/master/test)

我假设您希望 LRU 持久保存到 MongoDB？如果是这种情况，您将需要扩展或重写该库，因为乍一看它就像一个简单的内存中 LRU 缓存模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:09:20.660

您还需要考虑 Redis 的排序集。如果您有多个前端服务器实例，则为每个服务器保留一个 LRU 实例将导致它们不同步。Redis 的排序集非常适合这个问题，而且速度非常快。

您可以使用时间戳使它们按最新排序，并且可以通过事务以原子方式读取和更新列表。它肯定会很好地满足缓存的目的。

# tcl - 如何在 tcl/tk 中绑定鼠标悬停

> ID：11630279
> 
> 赞同：3
> 
> 时间：2012-07-24T11:51:55.860
> 
> 标签：tcl, tk

我想绑定一个元素，以便当鼠标悬停在它上面时，它会做一些事情。什么修饰符允许这种绑定？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T11:59:44.843

和`<Enter>`事件`<Leave>`。例如：

```
place [frame .f -width 100 -height 100 -bg red] -x 10 -y 10
bind .f <Enter> {%W configure -bg blue}
bind .f <Leave> {%W configure -bg red} 
```

# linux - 通过网站在远程机器上启动或停止 linux 服务

> ID：11630282
> 
> 赞同：0
> 
> 时间：2012-07-24T11:52:06.867
> 
> 标签：linux, web-services

我想开发一个能够在远程机器上运行 linux 服务的 web 应用程序。那么我必须使用什么技术以及我需要执行哪些步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:54:41.350

不开发一个，改用[webmin](http://www.webmin.com/)

# javascript - 多个可拖动标记未更新

> ID：11630286
> 
> 赞同：0
> 
> 时间：2012-07-24T11:52:51.840
> 
> 标签：javascript, google-maps

我在我的谷歌地图中实现了多个可拖动标记。现在我的问题是我的坐标似乎没有更新，除了最后一个。

我没有得到任何错误，但只有标记 10 更新了位置和地址。

```
var map = new google.maps.Map(document.getElementById('mapCanvas'), {
    zoom: 10,
    center: new google.maps.LatLng(51.012904492831055, 4.3322019042968805),
    mapTypeId: google.maps.MapTypeId.ROADMAP
});

for(var i=0;i<10;i++)
{
        var latLng = new google.maps.LatLng(51.012904492831055, 4.3322019042968805);
        var marker = new google.maps.Marker({
            position: latLng,
            title: 'Point ' + (i+1),
            map: map,
            draggable: true
        });

        google.maps.event.addListener(marker, 'dragstart', function() {
            updateMarkerAddress('Dragging...');
        });

        google.maps.event.addListener(marker, 'drag', function() {
            updateMarkerStatus('Dragging...');
            updateMarkerPosition(marker.getPosition());
        });

        google.maps.event.addListener(marker, 'dragend', function() {
            updateMarkerStatus('Drag ended');
            geocodePosition(marker.getPosition());
        });
}

// Update current position info.
updateMarkerPosition(latLng);
geocodePosition(latLng); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:32:38.933

当您的 events被触发时，`dragstart`变量`drag`将链接到您创建的最后一个，因为那时您的循环已经结束。`dragend``marker``Marker`

尝试以下技巧来避免这种情况：

```
 //..............
 (function(marker){   //added line
    google.maps.event.addListener(marker, 'dragstart', function() {
        updateMarkerAddress('Dragging...');
    });

    google.maps.event.addListener(marker, 'drag', function() {
        updateMarkerStatus('Dragging...');
        updateMarkerPosition(marker.getPosition());
    });

    google.maps.event.addListener(marker, 'dragend', function() {
        updateMarkerStatus('Drag ended');
        geocodePosition(marker.getPosition());
    });
 })(marker);   //added line
 //.............. 
```

*或者*，您可以`this`用于引用添加了侦听器的标记：

```
 google.maps.event.addListener(marker, 'drag', function() {
      updateMarkerStatus('Dragging...');
      updateMarkerPosition(this/*instead of 'marker'*/.getPosition());
 });

 google.maps.event.addListener(marker, 'dragend', function() {
      updateMarkerStatus('Drag ended');
      geocodePosition(this/*instead of 'marker'*/.getPosition());
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T12:33:18.653

这是变量范围问题，`var marker`是循环内的全局变量并通过循环进行更新，因此最后一个值是在循环结束时设置的。

只需将你的每一个都包装`google.maps.event.addListener`在一个函数中，即

```
(function(marker){ // Inside this function 'marker' is a local variable.
    google.maps.event.addListener(marker, 'dragstart', function() {
        updateMarkerAddress('Dragging...');
    });

    google.maps.event.addListener(marker, 'drag', function() {
        updateMarkerStatus('Dragging...');
        updateMarkerPosition(marker.getPosition());
    });

    google.maps.event.addListener(marker, 'dragend', function() {
        updateMarkerStatus('Drag ended');
        geocodePosition(marker.getPosition());
    });
})(marker); // Pass the 'global' marker variable as an argument 
```

# jquery - jQuery设置选中的选项

> ID：11630290
> 
> 赞同：2
> 
> 时间：2012-07-24T11:53:07.900
> 
> 标签：jquery, postback

我有这个表格：

```
<form action="" method="post">
   <select name="weeks" id="weeks">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
      <option value="9">9</option>
      <option value="10">10</option>
   </select>
<input type="submit" value="Submit" />
</form> 
```

重新加载表单时如何将选项设置为选中？例如，如果我选择 6，它将在重新加载时选择选项 6，然后如果我将其切换到 2，它将在重新加载时选择 2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:24:59.323

如果你想要一个持久的行为，你应该将选定的状态保存在某处。
您可以将其保存在服务器端（db 或 session）或客户端（cookie 或 localStorage）。

如果在客户端保存，我建议使用 HTML5 的[localStorage](https://developer.mozilla.org/en/DOM/Storage#localStorage)，所以只需将选定的索引（或任何你需要的）保存在那里，每次你需要重新加载页面时，只需从那里获取选定的索引并更改选择。
这是如何在客户端保存和获取变量的示例：

```
function getFoo() {
  var foo = localStorage.getItem('foo');
  if (!foo) {
    setFoo([defaults value]);
    return getFoo();
  } else return foo;
}

function setFoo(foo) {
  localStorage.setItem('foo', foo);      
} 
```

# virtualbox - 使用 Vagrant 获取当前的 VirtualBox 状态

> ID：11630292
> 
> 赞同：6
> 
> 时间：2012-07-24T11:53:10.367
> 
> 标签：virtualbox, status, vagrant

最近几天，我们用 Vagrant 做了很多事情，但我们遇到了一个问题/没有找到任何答案。这是关于使用 Vagrant 检查 VirtualBox 的状态，例如：

```
if config.vmbox_status == 'running'
  # do this stuff
end 
```

如果有任何简单的方法可以检查/获取当前的 Virtual Box 状态，请告诉我们。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-04-22T08:12:34.933

如果要使用 shell 脚本检查运行状态。在您的项目文件夹中尝试此代码

```
vagrant status --machine-readable | grep state,running 
```

然后检查输出字符串或退出代码

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-17T13:17:15.743

您可以使用`egrep`获取当前状态（其他答案检查某些状态，而这种方法允许您使用`case`或`if`在脚本中，就像那样（丑陋且不是子弹证明！）：

```
VM_STATUS=$(vagrant status --machine-readable | grep ",state," | egrep -o '([a-z_]*)$')
case "${VM_STATUS}" in
  running)
     echo "RUNNING"
  ;;
  poweroff)
     echo "POWEROFF"
  ;;
  *)
     echo "Unhandled: ${VM_STATUS}"
  ;;
esac 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-10T08:50:55.397

或者使用**awk**来获取 VM 的当前状态：

```
VM_STATUS=`vagrant status --machine-readable | grep ",state,"  | awk -F, '{print $4}'`
case "${VM_STATUS}" in
  running)
     echo "RUNNING"
  ;;
  poweroff)
     echo "POWEROFF"
  ;;
  *)
     echo "Unhandled: ${VM_STATUS}"
  ;;
esac 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-25T21:18:17.243

我不确定您是否一定要在 Vagrantfile 中执行此操作，但在它之外您可以触发命令`vagrant status BOX_NAME`并获取框的状态。您将获得以下格式的文本：

```
Current VM states:
box2                     running 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-07-24T08:25:32.410

将目录更改为 VM 的位置：`cd d:/vagant_boxes`

跑：`vagrant status`

# java - java.io.FileNotFoundException: D:\Servers\apache-tomcat-7.0.27\webapps\acct\accesscarddata（访问被拒绝）

> ID：11630293
> 
> 赞同：0
> 
> 时间：2012-07-24T11:53:17.513
> 
> 标签：java, exception, servlets, filenotfoundexception

我将文件上传到服务器并从服务器读取文件，当我在服务器中打开文件夹时，我看到了上传的文件，但是当我尝试访问文件进行处理时，它给了我以下异常：

```
java.io.FileNotFoundException: D:\Servers\apache-tomcat-7.0.27\webapps\acct\accesscarddata (Access is denied) 
```

更新 ：

上传文件的代码：

```
protected void doGet(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException {
        HttpSession session = request.getSession(true);
        for (Part part : request.getParts()) {
            InputStream is = request.getPart(part.getName()).getInputStream();
            int i = is.available();
            byte[] b = new byte[i];
            is.read(b);
            String fileName = getFileName(part);
            if(session.getAttribute("accesscardDatafileNname")!=null)
                session.setAttribute("accesscardDatafileNname", fileName);
            String uploadDir = getServletContext().getRealPath("/accesscarddata/");
            FileOutputStream os = new FileOutputStream(uploadDir + "/"+ fileName);
            os.write(b);
            is.close();
        }
    } 
```

这就是我调用该方法的方式：`doGet(request, response);`

这就是我尝试读取文件的方式：

```
@SuppressWarnings({ "rawtypes", "unchecked" })
    protected void readFile(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException {
        String fileName = "", employeeAttendanceFilePath = "";
        String _uploadDir = getServletContext().getRealPath("/accesscarddata/");
        HttpSession session = request.getSession(true);
        if (session.getAttribute("accesscardDatafileNname") != null)
            fileName = (String) session.getAttribute("accesscardDatafileNname");

        employeeAttendanceFilePath = _uploadDir + "/" + fileName;
        List sheetData = new ArrayList();
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(employeeAttendanceFilePath);
            HSSFWorkbook workbook = new HSSFWorkbook(fis);
            HSSFSheet sheet = workbook.getSheetAt(0);// gets the first sheet on workbook
            Iterator rows = sheet.rowIterator();
            while (rows.hasNext()) {
                HSSFRow row = (HSSFRow) rows.next();
                Iterator cells = row.cellIterator();
                // count=count+1;
                List data = new ArrayList();
                while (cells.hasNext()) {
                    HSSFCell cell = (HSSFCell) cells.next();
                    data.add(cell);
                }
                sheetData.add(data);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (fis != null) {
                fis.close();
            }
        }
        session.setAttribute("sheetData", sheetData);

    } 
```

以下是堆栈跟踪：

```
java.io.FileNotFoundException: D:\Servers\apache-tomcat-7.0.27\webapps\acct\accesscarddata (Access i
s denied)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:120)
        at java.io.FileInputStream.<init>(FileInputStream.java:79)
        at com.slingmedia.notifier.servlet.LeaveReportServlet.readFile(LeaveReportServlet.java:236)
        at com.slingmedia.notifier.servlet.LeaveReportServlet.doPost(LeaveReportServlet.java:159)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.j
ava:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)

        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999
)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.jav
a:565)
        at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

我想这是访问权限的问题，但不知道是相同的问题还是其他问题。

请为我提供必要的输入来解决此问题。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:06:24.817

您正在阅读文件夹`accesscarddata`而不是`accesscardDatafileNname`

```
if(session.getAttribute("accesscardDatafileNname")!=null)
            session.setAttribute("accesscardDatafileNname", fileName); 
```

这将永远不会使用文件名设置属性。

# xslt - 使用 XSLT 变量保存属性时遇到问题

> ID：11630300
> 
> 赞同：4
> 
> 时间：2012-07-24T11:53:40.993
> 
> 标签：xslt, variables

在我的 xslt 模板中，我有一个`for-each`声明。在那`for-each`我正在创造不同的条件。我希望有一个字符串类型的变量，该变量应包含将分配给的类属性`<li>`。

由于我是 xslt 的新手，请提供一些示例或如何实现我想做的事情。

这是我的一些代码，因此您可以看到我在做什么：

```
<xsl:if test="count($currentPage/ancestor-or-self::* [@level=$level]/* [@isDoc and string(umbracoNaviHide) != '1']) &gt; '0'">
    <xsl:for-each select="$currentPage/ancestor-or-self::* [@level=$level]/* [@isDoc and string(umbracoNaviHide) != '1']">
        <li><xsl:attribute name="class">
                topNavigLi
                page<xsl:number value="position()" format="1" />
                <xsl:if test="@nodeName='Network' ">
                    has_submenu network
                </xsl:if>
            </xsl:attribute>
            <xsl:if test="@id = $currentPage/@id">
                <xsl:attribute name="class">
                    current topNavigLi
                    page<xsl:number value="position()" format="1" />
                </xsl:attribute>
            </xsl:if>
            <xsl:if test="position() = last()">
                <xsl:attribute name="class">
                    last topNavigLi
                    page<xsl:number value="position()" format="1" />
                </xsl:attribute>
            </xsl:if>

            <xsl:if test="@id = $currentPage/@id and position() = last()">
                <xsl:attribute name="class">
                    current last topNavigLi
                    page<xsl:number value="position()" format="1" />
                </xsl:attribute>
            </xsl:if> 
```

拥有一个变量并在进行测试时**连接**到它会更加优雅。我试过这样但什么也没返回。

```
<xsl:variable name="li_class" select="page"> </xsl:variable>

<xsl:attribute name="class">
    <xsl:value-of select="li_class" /> 
</xsl:attribute> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T12:18:46.727

**这是一个执行我认为您要求的示例：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <xsl:copy>
       <xsl:apply-templates/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="num">
  <xsl:variable name="vResult">

    <xsl:if test=". mod 2 = 0">Even </xsl:if>
    <xsl:if test=". mod 3 = 0"> mult3</xsl:if>
    <xsl:if test="not(. mod 2 = 0 or . mod 3 = 0)">none</xsl:if>
  </xsl:variable>

  <xsl:variable name="vnormResults" select="normalize-space($vResult)"/>

  <num tests="{$vnormResults}">
   <xsl:value-of select="."/>
  </num>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**：

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**结果是**：

```
<nums>
   <num tests="none">01</num>
   <num tests="Even">02</num>
   <num tests="mult3">03</num>
   <num tests="Even">04</num>
   <num tests="none">05</num>
   <num tests="Even mult3">06</num>
   <num tests="none">07</num>
   <num tests="Even">08</num>
   <num tests="mult3">09</num>
   <num tests="Even">10</num>
</nums> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T12:10:38.703

我假设你想把像'page1'这样的字符串放在一个变量中并重新使用？

如果是这样，请尝试...

```
 <xsl:for-each select="$currentPage/ancestor-or-self::* [@level=$level]/[@isDoc and string(umbracoNaviHide) != '1']">
                <xsl:variable name="page-num" select="concat('page',position())" /> 
                <li><xsl:attribute name="class">
                        topNavigLi
                        <xsl:value-of select="$page-num" />
                        <xsl:if test="@nodeName='Network' ">
                            has_submenu network
                        </xsl:if>
                    </xsl:attribute>
                    <xsl:if test="@id = $currentPage/@id">
                        <xsl:attribute name="class">
                            current topNavigLi
                            <xsl:value-of select="$page-num" />
                        </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="position() = last()">
                        <xsl:attribute name="class">
                            last topNavigLi
                            page<xsl:number value="position()" format="1" />
                        </xsl:attribute>
                    </xsl:if>

                    <xsl:if test="@id = $currentPage/@id and position() = last()">
                        <xsl:attribute name="class">
                            current last topNavigLi
                            <xsl:value-of select="$page-num" />
                        </xsl:attribute>
                    </xsl:if> 
```

在 XSLT 1.0 中，定义变量的语法在[此处](http://www.w3.org/TR/xslt/#variables)，对于 XSLT 2.0，它在[此处](http://www.w3.org/TR/xslt20/#variables-and-parameters)。要访问 XPATH 上下文中的变量，请在名称前加上美元符号 ($)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T12:35:16.273

`$`像这样（带符号）在 XSLT 中获取变量的值：

```
<xsl:variable name="li_class" select="page"> </xsl:variable>

<xsl:attribute name="class">
    <xsl:value-of select="$li_class" /> 
</xsl:attribute> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T12:59:47.117

在同时阅读之后，我发现（但我主要知道的事情）：

> 您需要修改 an 的事实表明您没有考虑 XSLT。
> 
> XSLT 是一种函数式编程语言，除其他外，这意味着无法更改变量。根据定义，函数式编程语言中的变量是不可变的。资料来源：[http ://social.msdn.microsoft.com/Forums/eu/xmlandnetfx/thread/2bf7d238-92d2-4453-a683-4bfb0c667795](http://social.msdn.microsoft.com/Forums/eu/xmlandnetfx/thread/2bf7d238-92d2-4453-a683-4bfb0c667795)

所以我稍微改变了我的逻辑：我将所有条件都放在 xsl 属性中，如下所示：

```
 <xsl:if test="count($currentPage/ancestor-or-self::* [@level=$level]/* [@isDoc and string(umbracoNaviHide) != '1']) &gt; '0'">
            <xsl:for-each select="$currentPage/ancestor-or-self::* [@level=$level]/* [@isDoc and string(umbracoNaviHide) != '1']">
                <li>
                    <xsl:attribute name="class">
                        page topNavigLi page<xsl:number value="position()" format="1" />
                        <xsl:if test="@id = $currentPage/@id">
                            current 
                        </xsl:if>
                        <xsl:if test="position() = last()">
                            last
                        </xsl:if>
                        <xsl:if test="@nodeName='Network' ">
                            has_submenu network
                        </xsl:if>
                    </xsl:attribute> 
```

所以不需要额外的临时变量。

# android - Android Expandable ListView“无法实例化以下类”

> ID：11630301
> 
> 赞同：0
> 
> 时间：2012-07-24T11:53:46.813
> 
> 标签：android, android-layout, android-widget

我想在我的 Android 项目中使用 ExpandableListView。

我使用 String.xml-Resources 编辑器创建了一个名为“colors”的字符串数组，其中包含不同的项目。

然后我将“ **android.entries="@array/colors** " 放到 main.xml 中 ExpandableListView 的布局属性中。

一开始会出现以下错误：`"The following classes could not be found", Change to android.widget.ExpandableListView.`

所以我将main.xml中的“ `ExpandableListView`”改为“ `android.widget.ExpandableListView`”。

但后来我收到以下错误：`"The following classes could not be instantiated: android.widget.ExpandableListView (Open Class, Show Error Log).`

有关详细信息，请参阅错误日志（窗口 -> 显示视图）。”。

我该如何解决这个问题？有没有关于 Android-ExpandableListView 的好教程？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:08:03.510

`android:entries` is not for ExpandableListViews. Check the docs [here](http://developer.android.com/reference/android/widget/ExpandableListView.html).

ExpandableListView is to display two levels, and you are only specifying one, no need for an ExpandableListView.

An example where you would use something like this is a grocery list program where there are entries for categories and locations for each item and you want to be able to group your list by one or the other.

You would create a "group" array that would contain the list of things you want to group on (say the category of item in the aforementioned grocery list). Then you would create a "child" array for each of those group names containing the items that belong to that group. Note that the adapter you use usually does this second part (creating the "child" arrays/cursors/whatever your data structure is) for you, it is normal to feed in only the group list and let the adapter handle the rest.

An answer I gave recently with some sample code for creating an ExpandableListView using cursors and a SimpleCursorTreeAdapter is [here](https://stackoverflow.com/a/11455806/1105376)

# php - 用 PHP 和 Apache 处理 gzip 有什么区别？

> ID：11630306
> 
> 赞同：2
> 
> 时间：2012-07-24T11:53:54.033
> 
> 标签：php, apache, gzip

我们如何处理两者的压缩？是谁的责任？哪个更好，使用 apache 或 php 压缩文件？
PHP压缩代码：

```
ob_start("ob_gzhandler"); 
```

或者阿帕奇之一：

```
AddOutputFilterByType DEFLATE text/html text/plain text/xml 
```

请求首先到达 apache 然后到达 PHP 是否正确？如果答案是肯定的，那么我们可以推断我们应该使用 apache 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:02:14.467

好吧，这就是我所知道的，以利弊的方式呈现。阿帕奇：

*   .htaccess 代码总是执行得更快，因为服务器默认缓存 .htaccess 文件。
*   使用 .htaccess，您可以为单个文件夹定义自定义规则，服务器会自动选择它们
*   使用 PHP，您不能在一个地方编写所有内容。除了压缩之外，您的 .htaccess 还应具备许多其他功能：

*   字符集、过期/缓存控制，很可能是一些 URL 重写规则、权限、机器人（Googlebot 等）特定的东西。

据我所知，您不能仅使用 PHP 来完成所有这些工作，而且由于您可能需要完成所有这些工作，所以我不明白您为什么应该将两者结合起来。我一直依靠 .htaccess 或服务器级别的配置来控制上述列举的方面，并且很少遇到问题。

PHP：

*   也许更轻松一点。使用共享主机平面上的 .htaccess 文件，您会受到很大限制，并且可能会遇到繁琐的问题。
*   有些服务器不会接收某些命令，有些（如 1and1）的默认配置会与您的设置（和神经）混淆。
*   对于不太懂技术的人来说可能更容易使用

总的来说，Apache 是赢家。这就是我一直都会去的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T12:02:19.140

我不明白为什么两者中的任何一个都应该更快，但请记住，apache 也可以对 css 文件/js 文件进行压缩......你不想在你之前用 php 解析这些文件来压缩它们将它们传送到浏览器。

所以我建议使用apache方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T12:05:01.557

在我的公司，我们通常对静态资源使用 gzip 压缩。Apache 要求 PHP 处理这些资源（如果需要），然后压缩输出结果。我会说它在理论上更快（C 和 C++ 比 PHP 更快）并且使用 Apache 压缩“更安全”。

*注意：这里更安全意味着将压缩整个页面，而您可能会忘记使用该`ob_start`功能压缩网页的一部分。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T11:57:30.830

您必须运行自己的测试才能看到哪个更快，但我不认为内容的提供方式应该有任何区别。使用 PHP，您必须自己处理输出缓冲，这可能会更加困难。使用 apache 方法更透明。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-24T12:02:08.680

Apache 更好，因为它可以防止 php 的内存限制错误，并且由于 php 中的编译代码与解释代码相比，它的运行速度更快，而且在与 php 不同的层中进行压缩更有意义

# android - 如何在多台设备上运行 Google CTS？

> ID：11630311
> 
> 赞同：4
> 
> 时间：2012-07-24T11:54:15.820
> 
> 标签：android, cts

我在我的机器上连接了 2 个设备，我想在这两个设备上运行 Google CTS。但这里的问题是，每当我运行 ./startcts 命令时，两个设备都连接到会话。

我的要求：

1.  我想在这两个设备上运行 CTS。
2.  如果它需要两个单独的 android-cts 文件夹路径就可以了。
3.  是否可以让一台设备连接一个 android cts 会话？

我已经浏览了 startcts 和 host-config 文件。但是没有找到修改的地方。由于我是 CTS 的新手，如果他们解决了这个问题，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:20:36.863

可能的，

修改`./startcts`文件或修改脚本文件，然后将设备 ID 作为脚本参数传递。（任意数量）

并放置或修改命令，（在此命令中放置不同的设备）

```
start --plan test_plan_name -t/--test test_name -d/--device device_ID: 
```

使用指定的设备运行特定的测试。

另请查看[http://static.googleusercontent.com/media/source.android.com/en//compatibility/android-cts-manual.pdf](http://static.googleusercontent.com/media/source.android.com/en//compatibility/android-cts-manual.pdf)

正如 CTS 图像所说的那样：

![在此处输入图像描述](../Images/a6611bb95a021ce2a0d9b8c42f5812b3.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-25T03:58:20.893

要在多个设备上运行计划测试分片运行 cts --plan CTS --shards

**对于 Android 7 和 8 等最新版本：** 'run cts --shards [设备数量]

**使用特定设备运行 CTS：** 运行 cts --shards [设备数量] -s [设备 slno] [设备 slno]

# ios - Xcode 4.3 纵向运行应用程序

> ID：11630312
> 
> 赞同：0
> 
> 时间：2012-07-24T11:54:18.773
> 
> 标签：ios, xcode4, xcode4.3, portrait, device-orientation

嗨，我正在创建一个 iOS 应用程序，我希望它一直在纵向上运行，即使我向左/向右转动它，我希望它在这里保持不变，这里有一些与纵向相关的所有设置的图像。

![在此处输入图像描述](../Images/f19f67ea79ecc421fc72ed3464209d77.png)

![在此处输入图像描述](../Images/bba0b0dca5acd1896ec56dea745c05dc.png)

![在此处输入图像描述](../Images/d468836e424402cbf077b3836ddcf403.png)

所以这就是我设置的所有东西所以我的问题是我如何保持纵向，即使我在它运行时倾斜它时它会以纵向打开但说如果我向左转动它会旋转到横向。

在此先感谢您，我将期待您的到来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:15:08.253

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

使用此方法仅支持纵向模式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:15:28.953

对于您从此函数支持的任何方向返回 YES。

```
 (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
   return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

# c - 添加到 HIMageList 失败，无法弄清楚原因

> ID：11630313
> 
> 赞同：0
> 
> 时间：2012-07-24T11:54:26.697
> 
> 标签：c, windows, winapi, user-interface

我很困惑，因为我无法确定 ImageList_Add 调用失败的原因。我知道这一定是我对图像做错了，或者我说错了，但我不知道如何修复它：S 您能提供的任何帮助将不胜感激！:)

我正在使用的代码如下。我在控制台上得到输出，说它无法添加到图像列表中。从文档中，ImageList_Add 将返回图像列表中它设法添加图像的位置的索引，因此如果不能，则返回 -1。

这一切都很好，但我找不到任何地方为什么/是什么导致添加失败！

该代码可能存在内存泄漏，尽管目前，我花了将近一天的时间试图找出与此相关的各种问题，所以我只想让它工作！

```
 HIMAGELIST imageList = ImageList_Create(20,20,ILC_COLOR16,1,2 );
if (imageList == NULL)
{
    printf("Error creating imagelist - dlg_create_dropdown_menu. Returning NULL\n");
    return NULL;
}

HBITMAP currentImage = (HBITMAP) LoadImage(NULL,"active_mdoe_icn.bmp",IMAGE_BITMAP,0,0,LR_LOADFROMFILE);
if (currentImage == NULL) 
{
   if (GetLastError()== 2) 
   {
       printf("File not found - dlg_create_dropdown_menu. Returning NULL.\n");
       return NULL;
   }
    printf("Error loading image from file - dlg_create_dropdown_menu. Returning NULL.\n");
    return NULL;
}
int imageIndex;
if ( (imageIndex = ImageList_Add(imageList,currentImage,NULL)) == -1 )
{
    printf("Error adding to the image list - dlg_create_dropdown_menu. Returning NULL.\n");
    return NULL;
} 
```

谢谢大家，任何帮助将不胜感激！:)

这可能是实际图像损坏的问题吗？我在几个地方读到过这个。如果我不做任何愚蠢的事情，可能只是我的运气:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:01:54.397

在与自己和 windows 争论了很多之后，我没有弄清楚为什么添加不起作用。

我没有尝试使用图像列表，而是一次加载每个图像，以这种方式使用它。不知道为什么我认为使用图像列表更好：s

我试图将图像加载到我正在创建的下拉菜单中，但我找到了一种更好的方法。这是使用 MENUITEMINFO 结构并指定 MIIM_BITMAP | MIIM_STRING 作为 fMask 的两个标志 :) 这意味着我可以在每个菜单项中有一个图像和一个文本 :)

此外，带有 0 下划线的图像名称以某种方式使 windows 更容易找到 lol

无论如何，希望这对某人有所帮助:)

# java - 增强的 for 循环

> ID：11630314
> 
> 赞同：3
> 
> 时间：2012-07-24T11:54:28.403
> 
> 标签：java, for-loop, foreach

你能把这个增强的for循环转换成普通的吗？
`for (String sentence : notes.split(" *\."))`

当数据类型是整数时，我喜欢增强型和普通的 for 循环。但如果它是一个字符串，我很困惑。非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:57:32.673

```
String[] sentences = notes.split(" *\.");
String sentence = null ;
int sentencesLength = sentences.length;

for(int i=0;i<sentencesLength;i++){
sentence = sentences[i];
//perform your task here

} 
```

[Eclipse Juno](http://www.eclipse.org/juno/)具有将 for-each 转换为基于索引的循环的内置功能。看看这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T11:59:51.083

你应该看看[For-Each 的 Doc](http://www.leepoint.net/notes-java/flow/loops/foreach.html)。

```
String[] splitted_notes = notes.split(" *\. ");
for (int i=0; i < splitted_notes.length; i++) {
  // Code Here with splitted_notes[i]
} 
```

或者更类似于的循环`for (String sentence : notes.split(" *\."))`

```
ArrayList<String> splitted_notes = new ArrayList<>(Arrays.asList(notes.split(";")));
for(Iterator<String> i = splitted_notes.iterator(); i.hasNext(); ) {
  String sentence = i.next();
  // Code Here with sentence
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T11:57:07.123

```
String[] splitResult=notes.split(" *\.");
for (String sentence : splitResult) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T11:57:19.497

普通的for循环——

```
String[] strArray = notes.split(" *\.");
String sentence = null;
  for(int i=0 ;i <strArray.length ; i++){
    sentence = strArray[i];
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T11:57:44.827

`split`还给你`String[]`。

```
String[] array=notes.split(" *\.");
for(int i=0;i<array.length();i++) {

    System.out.println(array[i]);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T11:57:56.103

你可以有这样的东西：

```
String[] splitString = notes.split(" *\."));
for (int i = 0; i < splitString.length; i++)
{
    //...
} 
```

或者

```
for(String str : splitString)
{
    //...
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-24T11:59:26.357

```
String [] array = notes.split(" *\."));
String sentence;
for(int i = 0; i < array.length; i ++) {
sentence = array[i];
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-24T12:24:36.400

我猜正则表达式本身是错误的。编译器会说

> 非法转义字符

如果

> “*\。”

是正则表达式。所以我假设你试图通过拥有来分割一个字符串

> . （一个点）

作为分隔符。在这种情况下，代码就像

```
String[] splittedNotes = notes.split("[.]");
for (int index = 0; index < splittedNotes.length; index++) {
   String sentence = splittedNotes[index];
} 
```

礼貌地说，你可以自己尝试并得到这个。干杯。

# ruby-on-rails - 使用 Omniauth (Rails) 时 Twitter uid 为空

> ID：11630317
> 
> 赞同：0
> 
> 时间：2012-07-24T11:54:40.073
> 
> 标签：ruby-on-rails, twitter, omniauth

我正在使用 Omni auth 在我的 rails 应用程序中验证 twitter 帐户。

我以前可以获取**uid**参数，但现在它返回 null 如下所示

```
{"provider":"twitter","uid":null,

"info":

{
"nickname":"boobalanv",
"name":"Boobalan",
"location":"",
"image":"<image url>",
"description":"",
"urls":
{
"Website":null,
"Twitter":"http://twitter.com/boobalanv"}},
"credentials": 
```

我正在本地主机上对此进行测试。

我做错了什么还是 twitter 已停止提供用户 ID？

**更新 ：**

实际上，我在`initializers/omniauth.rb`下面添加了用于授权路径的客户端选项（通过这样做，只有授权将包括访问直接消息的权限）

`provider :twitter, Rails.application.config.consumer_key , Rails.application.config.consumer_secret , authorize_params: {force_login: 'true'}, client_options: {authorize_path: '/oauth/authorize'}`

只有在这样做之后，我才遇到 uid = null 的问题，当我删除此选项'client_options：{authorize_path：'/oauth/authorize'}'它工作正常..

这个问题的任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:56:39.583

找到了答案。

当**authorize_path**设置为**"/oauth/authorize"**时，uid 字段为空。相反，我们可以使用以下方法获取 Twitter 用户 ID

```
auth['extra']['raw_info']['id'] 
```

# c++ - 为什么 C++ 使用模数时输出负数？

> ID：11630321
> 
> 赞同：68
> 
> 时间：2012-07-24T11:54:52.570
> 
> 标签：c++, standards, modulo

**数学**：

如果你有这样的等式：

```
x = 3 mod 7 
```

x 可以是 ... -4、3、10、17、...，或更一般地说：

```
x = 3 + k * 7 
```

其中 k 可以是任何整数。我不知道为数学定义了模运算，但因子环肯定是。

**蟒蛇**：

`%`在 Python 中，当您使用正值时，您将始终获得非负值`m`：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

m = 7

for i in xrange(-8, 10 + 1):
    print(i % 7) 
```

结果是：

```
6    0    1    2    3    4    5    6    0    1    2    3    4    5    6    0    1    2    3 
```

**C++：**

```
#include <iostream>

using namespace std;

int main(){
    int m = 7;

    for(int i=-8; i <= 10; i++) {
        cout << (i % m) << endl;
    }

    return 0;
} 
```

将输出：

```
-1    0    -6    -5    -4    -3    -2    -1    0    1    2    3    4    5    6    0    1    2    3 
```

**ISO/IEC 14882:2003(E) - 5.6 乘法运算符：**

> 二元 / 运算符产生商，二元 % 运算符产生第一个表达式除以第二个表达式的余数。如果 / 或 % 的第二个操作数为零，则行为未定义；否则 (a/b)*b + a%b 等于 a。如果两个操作数都是非负数，则余数是非负数；如果不是，**则余数的符号是​​实现定义的 74)**。

和

> 74) 根据正在进行的 ISO C 修订工作，整数除法的首选算法遵循 ISO Fortran 标准 ISO/IEC 1539:1991 中定义的规则，其中商总是向零舍入。

来源：[ISO/IEC 14882:2003(E)](http://cs.nyu.edu/courses/summer12/CSCI-GA.2110-001/downloads/C++%20Standard%202003.pdf)

（我找不到 的免费版本`ISO/IEC 1539:1991`。有人知道从哪里得到它吗？）

该操作似乎是这样定义的：

![在此处输入图像描述](../Images/e996749a0dec2385ea936058359b2f53.png)

**问题**：

这样定义有意义吗？

该规范的论据是什么？创建此类标准的人是否有讨论它的地方？我可以在哪里阅读有关他们决定这样做的原因的信息？

大多数时候，当我使用模数时，我想访问数据结构的元素。在这种情况下，我必须确保 mod 返回一个非负值。因此，对于这种情况，最好 mod 总是返回一个非负值。（另一种用法是[欧几里得算法](http://en.wikipedia.org/wiki/Euclidean_algorithm#Implementations)。因为您可以在使用此算法之前将两个数字都设为正数，所以模的符号很重要。）

**附加材料**：

有关模数在不同语言中的作用的长列表，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Modulo_operation#Remainder_calculation_for_the_modulo_operation)。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-24T12:43:05.163

在 x86（和其他处理器架构）上，整数除法和取模由单个操作`idiv`（`div`对于无符号值）执行，该操作同时产生商和余数（对于字大小的参数，分别为 in`AX`和`DX`）。这是在C库函数中使用的`divmod`，可以被编译器优化为单条指令！

整数除法遵循两个规则：

*   非整数商向零舍入；和
*   结果满足方程`dividend = quotient*divisor + remainder`。

因此，当将负数除以正数时，商将为负数（或零）。

因此，这种行为可以看作是一系列本地决策的结果：

*   处理器指令集设计针对不太常见的情况（模）优化常见情况（除法）；
*   一致性（向零舍入，并尊重除法方程）优于数学正确性；
*   C 更喜欢效率和简单（特别是考虑到将 C 视为“高级汇编程序”的趋势）；和
*   C++ 更喜欢与 C 兼容。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-01-24T09:51:22.950

过去，设计 x86 指令集的人认为将整数除法向零舍入而不是向下舍入是正确和好的。（愿一千只骆驼的跳蚤在他母亲的胡须里筑巢。）为了保持某种数学正确性，操作员 REM（发音为“余数”）必须做出相应的行为。请勿阅读：[https ://www.ibm.com/support/knowledgecenter/ssw_ibm_i_73/rzatk/REM.htm](https://www.ibm.com/support/knowledgecenter/ssw_ibm_i_73/rzatk/REM.htm)

我警告过你。后来有人做 C 规范决定编译器以正确的方式或 x86 方式来做这件事。然后一个制定 C++ 规范的委员会决定以 C 的方式来做。后来，在这个问题发布后，一个 C++ 委员会决定以错误的方式进行标准化。现在我们被它困住了。许多程序员编写了以下函数或类似的东西。我可能至少做了十几次。

```
 inline int mod(int a, int b) {int ret = a%b; return ret>=0? ret: ret+b; } 
```

你的效率就是这样。

这些天来，我基本上使用以下内容，并加入了一些 type_traits 的东西。（感谢 Clearer 的评论让我想到了使用后来的 C++ 进行改进的想法。见下文。）

```
<strike>template<class T>
inline T mod(T a, T b) {
    assert(b > 0);
    T ret = a%b;
    return (ret>=0)?(ret):(ret+b);
}</strike>

template<>
inline unsigned mod(unsigned a, unsigned b) {
    assert(b > 0);
    return a % b;
} 
```

真实的事实：我游说 Pascal 标准委员会以正确的方式做 mod，直到他们让步。令我恐惧的是，他们以错误的方式进行整数除法。所以他们甚至不匹配。

编辑：Clearer 给了我一个想法。我正在开发一个新的。

```
#include <type_traits>

template<class T1, class T2>
inline T1 mod(T1 a, T2 b) {
    assert(b > 0);
    T1 ret = a % b;
    if constexpr  ( std::is_unsigned_v<T1>)
    {
        return ret;
    } else {
        return (ret >= 0) ? (ret) : (ret + b);
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-24T12:08:30.130

> What are arguments for this specification?

One of the design goals of C++ is to map efficiently to hardware. If the underlying hardware implements division in a way that produces negative remainders, then that's what you'll get if you use `%` in C++. That's all there is to it really.

> Is there a place where the people who create such standards discuss about it?

You will find interesting discussions on comp.lang.c++.moderated and, to a lesser extent, comp.lang.c++

# google-analytics - 漏斗中的错误入口和出口

> ID：11630325
> 
> 赞同：2
> 
> 时间：2012-07-24T11:55:08.513
> 
> 标签：google-analytics, goal-tracking

我已经用这个 URL 设置了一个目标`(/compra/comprafinalizada|/pedido/presupuestofinalizado)`（匹配类型：正则表达式）。

我有以下步骤（不需要任何步骤）：

1.  `/introduccion`
2.  `/filtros`
3.  `/pedido(/)? (index)?$`
4.  `/compra(/)? (index)?$`

我有一些可以解释的问题（我附上了带有样本的图片）：

*   A) 来自上一步 URL 的入口。**为什么从上一步开始，这个入口没有包含在漏斗中？**（如果访问从 /introduccion 到 /filtros，应该在漏斗中，而不是像入口一样放在一边）。

*   B) 退出到他们访问的同一步骤的 URL。退出网址是（如果我错了，请纠正我）他们离开渠道后去的地方。如果它不在我的网站上，它被标记为“（退出）”。如果他们从 /filtros 转到 /filtros（可能刷新）**，它不应该是一个出口，访问仍然在漏斗中。**

*   C) 退出到下一步的 URL。**这不应该是一个出口。**此次访问将漏斗继续到下一步！

到底是怎么回事？

我一直在阅读一些信息，但它并没有解释我所有的问题，而且它确实说这是一个报告的问题，但帖子来自 2010 年：

*   [链接 1](http://productforums.google.com/forum/#!topic/analytics/_smpzXxj61o)
*   [链接 2](http://productforums.google.com/forum/#!category-topic/analytics/discuss-google-analytics-features-with-other-users/28qBU9vOwvg)
*   [链接 3](http://productforums.google.com/forum/#!category-topic/analytics/discuss-google-analytics-features-with-other-users/iyGdjN2IDSE)

![漏斗样本](../Images/62e67c2fc0078f152e1b57ca8a4d3b70.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:09:32.240

您在 (C) 中看到的是访问者在到达 /filtros 时退出了您的网站（反弹）（因此他们再也没有回来）。

在第二层，224 名 /filtros 访客（218 名来自 /introduction + 第二层左侧的 6 个其他来源）当他们到达 /filtros 时，没有离开并继续前往 /pedido (29)

但是 (B) 显示 11 反弹并且没有完成目标。

如果您查看左侧的第一级，896：（入口）：894：转到/introduction /introduction：1：转到/introduction（他们可能刷新了会话或有多个选项卡）

现在第二级：（入口）：5：直接进入 /filtros 跳过 /introduction /introduction ：1：从 /introduction 开始并进入 /filtros

这有意义吗？

不要假设访问者使用一个浏览器，只有一个浏览器选项卡并且只有一个人（例如，路由器可以有很多用户）。

这也是一篇很好的文章，解释了一些奇怪的事情。 [http://www.lunametrics.com/blog/2010/08/18/mysterious-funnel-exits/](http://www.lunametrics.com/blog/2010/08/18/mysterious-funnel-exits/)

编辑：

A）它也可以是死会话的推荐人吗？例如，如果我将计算机浏览器打开 /introduction 去厨房做饭，然后 30 分钟后回来[，Google Analytics 认为这是一次新的访问/会话](http://analytics.blogspot.ca/2011/08/update-to-sessions-in-google-analytics.html)，因此当我单击浏览器中打开的页面上的链接 /filtros 时/filtros 的页面加载下载 ga.js 脚本并收集引荐来源（我来自哪里）并看到我已经空闲了 30 分钟，因此认为我没有积极关注你的漏斗。

你为什么要做这样一个漏斗？你没有任何限制。为什么不通过 /compra/?success=true 或类似的最后一步来制定目标？

# ios - 如何将 UIAccessibility 功能添加到 UIButton 操作？

> ID：11630328
> 
> 赞同：0
> 
> 时间：2012-07-24T11:55:37.337
> 
> 标签：ios, uibutton, uiaccessibility

我是可访问性的新手，我需要在单击 UIButton 时实现此功能。有人可以帮助我提供有关如何实现此功能的任何示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:45:41.837

大多数 ui 元素都有 .accessibilityHint 和 .accessibilityLabel 属性。

只需适当地命名它们，您就可以开始了。

如果您想了解更多详细信息，请查看此 SO 帖子： [iOS 可访问性：标签与提示](https://stackoverflow.com/questions/3673550/ios-accessibility-label-vs-hint)

# c# - Neo4jClient - 如何获取节点？

> ID：11630333
> 
> 赞同：1
> 
> 时间：2012-07-24T11:56:01.070
> 
> 标签：c#, neo4j, neo4jclient

我正在使用[此处找到的示例试用](http://hg.readify.net/neo4jclient/wiki/crud)[Neo4jClient](http://hg.readify.net/neo4jclient/wiki/Home)用于[Neo4j](http://neo4j.org/)图形数据库。

在以下相当简单的代码中：

```
var client = new GraphClient(new Uri("http://localhost:7474/db/data"));
client.Connect();

var myNodeReference = client.Create(new MyNode { Foo = "bar" });
var myNode = client.Get<MyNode>(myNodeReference); 
```

在最后一行 ( `.Get`) 抛出以下错误：

**`An item with the same key has already been added.`**

（即使`Get`是第一个也是唯一的方法，也会引发相同的错误，并且我正在使用之前创建的一些现有密钥获取节点）。

查看堆栈跟踪后，我发现它与 Neo4jClient 相关，而不是 Neo4j db，因为它似乎是添加到 Dictionary 时引发的错误：

```
 at System.ThrowHelper.ThrowArgumentException(ExceptionResource resource)
   at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector)
   at Neo4jClient.Deserializer.CommonDeserializerMethods.GetPropertiesForType(Type objType) in c:\TeamCity\buildAgent\work\460e89b30f53245b\Neo4jClient\Deserializer\CommonDeserializerMethods.cs:line 344
   at Neo4jClient.Deserializer.CommonDeserializerMethods.Map(Object targetObject, JToken parentJsonToken, CultureInfo culture, IEnumerable`1 typeMappings, Int32 nestingLevel) in c:\TeamCity\buildAgent\work\460e89b30f53245b\Neo4jClient\Deserializer\CommonDeserializerMethods.cs:line 228
   at Neo4jClient.Deserializer.CommonDeserializerMethods.CreateAndMap(Type type, JToken element, CultureInfo culture, IEnumerable`1 typeMappings, Int32 nestingLevel) in c:\TeamCity\buildAgent\work\460e89b30f53245b\Neo4jClient\Deserializer\CommonDeserializerMethods.cs:line 210
   at Neo4jClient.Deserializer.CommonDeserializerMethods.SetPropertyValue(Object targetObject, PropertyInfo propertyInfo, JToken value, CultureInfo culture, IEnumerable`1 typeMappings, Int32 nestingLevel) in c:\TeamCity\buildAgent\work\460e89b30f53245b\Neo4jClient\Deserializer\CommonDeserializerMethods.cs:line 132
   at Neo4jClient.Deserializer.CommonDeserializerMethods.Map(Object targetObject, JToken parentJsonToken, CultureInfo culture, IEnumerable`1 typeMappings, Int32 nestingLevel) in c:\TeamCity\buildAgent\work\460e89b30f53245b\Neo4jClient\Deserializer\CommonDeserializerMethods.cs:line 234
   at Neo4jClient.Deserializer.CustomJsonDeserializer.Deserialize[T](RestResponse response) in c:\TeamCity\buildAgent\work\460e89b30f53245b\Neo4jClient\Deserializer\CustomJsonDeserializer.cs:line 59
   at RestSharp.RestClient.Deserialize[T](IRestRequest request, RestResponse raw) 
```

*如果相关，这些是来自 NuGet 的包版本：
`<package id="Neo4jClient" version="1.0.0.397" targetFramework="net40-Client" />`
`<package id="Newtonsoft.Json" version="4.0.8" targetFramework="net40-Client" />`
`<package id="RestSharp" version="102.7" targetFramework="net40-Client" />`*

我在这里做错了什么？

**编辑** `MyNode`类：

```
[JsonObject]
public class MyNode
{
    [JsonProperty("Bar")]
    public string Foo { get; set; }

    [JsonIgnore]
    public string Bar { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:47:06.377

除非您真的需要这样做，否则我会取下`[JsonProperty("Bar")]`钻头，因为这就是造成麻烦的原因。反序列化器无法区分实际属性“Bar”和 JsonProperty“Bar”

如果你把它取下来，你的代码就可以正常工作。

如果你*想*使用 Json 的东西，你可以创建另一个 Node 对象：

```
public class OtherNode { public string Bar { get;set;} } 
```

并反序列化为：

```
var nodeReference = client.Create(new MyNode { Foo = "blah" });
var retrieved = client.Get<OtherNode>(nodereference); 
```

这将起作用。

# c# - C# 如何将 CredentialCache.DefaultCredentials 转换为 PSCredential？

> ID：11630340
> 
> 赞同：1
> 
> 时间：2012-07-24T11:56:25.517
> 
> 标签：c#, powershell, credentials

我正在编写 ac# 程序，它将使用当前用户的凭据来运行脚本。

如何将`CredentialCache.DefaultCredentials`在访问 Web 服务中使用的对象转换为`PSCredential`对象？

或者其他更好的方法来创建 PSCredential 而不存储用户名/密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:51:41.640

这里没有保证，但您至少可以尝试以下伪代码

```
// DefaultCredentials returns an ICredentials reference
// which can then be used to call GetCredentials, 
// and *that* returns a NetworkCredential.
NetworkCredential netCredential = CredentialCache.DefaultCredentials.GetCredentials(..);

// Now, with a NetworkCredential that *might* have a SecurePassword, you 
// could see if that would work to create a PSCredential. I haven't tested this,
// and honestly I'm a bit dubious of the prospects, but its at least a thought.
// There may be some translation necessary to even make that SecurePassword work,
// assuming it is even available in your context, to something the PSCredential
// can use. 

PSCredential psCredential = new PSCredential(netCredential.UserName, 
                                             netCredential.SecurePassword); 
```

如前所述，这是未经测试的伪代码，但希望它能让您朝着正确的方向前进。祝你好运。

# php - PHP 魔术方法 __sleep 和 __wakeup 的使用

> ID：11630341
> 
> 赞同：45
> 
> 时间：2012-07-24T11:56:28.050
> 
> 标签：php, oop, magic-methods

PHP中的`__sleep`和`__wakeup`魔术方法有什么用？我阅读了 PHP 文档，但仍然不清楚：

```
class sleepWakeup {

    public function __construct() {
        // constructor //
    }

    public function __sleep() {
        echo 'Time to sleep.';
    }

    public function __wakeup() {
        echo 'Time to wakeup.';
    }

}

$ob = new sleepWakeup();

// call __sleep method
echo $ob->__sleep();

echo "\n";

// call __wakeup method
echo $ob->__wakeup(); 
```

此示例代码打印：

```
Time to sleep.
Time to wakeup. 
```

如果我要重命名，`__sleep`然后它会做同样的事情。这两种方法的正确用法是什么？`__wakeup``foo``bar`

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-24T12:28:17.570

如前所述，[`__sleep()`](http://www.php.net/manual/en/language.oop5.magic.php#object.sleep)当您[`serialize()`](http://php.net/manual/en/function.serialize.php)是一个对象并[`__wakeup()`](http://www.php.net/manual/en/language.oop5.magic.php#object.wakeup)在您之后调用[`unserialize()`](http://php.net/manual/en/function.unserialize.php)它。

序列化用于持久化对象：您将获得对象的表示形式，然后可以将其存储在`$_SESSION`数据库、cookies 或您想要的任何其他地方。

# 资源价值

但是，`serialize()` **不能**序列化（即转换为文本表示）[资源类型](http://php.net/manual/en/language.types.resource.php)的值。`unserialize()`这就是为什么在ing之后所有这些值都会丢失的原因。

# 对象图

or members, and the member's members and the ... ad infinitum

另一个也许更重要的一点是，如果你序列化它，`serialize()`它将遍历整个对象图。`$obj`这在您需要时非常有用，但是如果您只需要对象的一部分并且某些链接对象是“特定于运行时的”并且在许多对象之间以及其他对象之间共享，那么您可能不希望这种行为。

PHP 正确处理循环图！含义：如果 $a （的成员）链接到 $b，并且 $b 链接到 $a 被正确处理，但无论有多深。

## 示例 - 会话特定（共享）对象

例如，一个`$database`对象被 引用`$obj->db`，但也被其他对象引用。您将希望`$obj->db`成为相同的对象 - 在`unserialize()`ing 之后 - 下一个会话中的所有其他对象都具有，而不是数据库对象的孤立实例。

在这种情况下，你会有这样的`__sleep()`方法：

```
/**
/* DB instance will be replaced with the one from the current session once unserialized()
 */
public function __sleep() {
    unset($this->db);
} 
```

然后像这样恢复它：

```
public function __wakeup() {
    $this->db = <acquire this session's db object>
} 
```

另一种可能性是，该对象是需要注册的某些（全局）数据结构的一部分。您当然可以手动执行此操作：

```
$obj = unserialize($serialized_obj);
Thing::register($obj); 
```

但是，如果它是需要在该注册表中的对象契约的一部分，那么将这个神奇的调用留给对象的用户并不是一个好主意。理想的解决方案是，如果对象关心它的职责，即在`Thing`. 这就是`__wakeup()`允许您对您的客户透明地做的事情（即他不再需要担心这种神奇的依赖）。

同样，如果合适，您可以使用`__sleep()`“取消注册”对象。（对象在序列化时不会被销毁，但在您的上下文中可能有意义。）

# 闭包

最后但同样重要的是，闭包**也不**支持序列化。这意味着您将不得不重新创建所有附加的闭包`__wakeup()`。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-12-05T04:54:15.820

它们很像钩子函数，我们可以根据需要使用它们。我想出了这个简单的实时示例。现在尝试在两种情况下执行此代码：

```
class demoSleepWakeup {
    public $resourceM;
    public $arrayM;

    public function __construct() {
        $this->resourceM = fopen("demo.txt", "w");
        $this->arrayM = array(1, 2, 3, 4); // Enter code here
    }

    public function __sleep() {
        return array('arrayM');
    }

    public function __wakeup() {
        $this->resourceM = fopen("demo.txt", "w");
    }
}

$obj = new demoSleepWakeup();
$serializedStr = serialize($obj);
var_dump($obj);
var_dump($serializedStr);
var_dump(unserialize($serializedStr)); 
```

场景一：

首先通过注释`__sleep()`和`__wakeup()`方法，检查输出。反序列化时会发现资源丢失。

场景二：

现在尝试运行它取消注释它们，你会发现第一个和最后一个转储的对象`var_dump`是相同的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-24T11:59:21.697

这些方法在对对象调用 serialize() 和 unserialize() 时使用，以确保您有一个钩子来删除一些属性，如数据库连接并在加载时将它们设置回来。将对象存储在会话中时会发生这种情况。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-11-10T13:28:39.960

从 PHP 7.4 开始，将会有新的方法 __serialize() 和 __unserialize() 可用，它们应该会稍微改变 __sleep 和 __wakeup 魔术方法的使用。

> PHP 目前提供了两种自定义序列化对象的机制：__sleep()/__wakeup() 魔术方法，以及 Serializable 接口。不幸的是，这两种方法都有将在下面讨论的问题。该 RFC 建议添加一个新的自定义序列化机制来避免这些问题。

更多 PHP RFC 手册[https://wiki.php.net/rfc/custom_object_serialization](https://wiki.php.net/rfc/custom_object_serialization)。

```
// Returns array containing all the necessary state of the object.
public function __serialize(): array;

// Restores the object state from the given data array.
public function __unserialize(array $data): void; 
```

用法与 Serializable 接口非常相似。从实际的角度来看，主要区别在于，不是在 Serializable::serialize() 中调用 serialize()，而是直接返回应该序列化为数组的数据。

以下示例说明了如何使用 __serialize()/__unserialize()，以及它们如何在继承下组合：

```
class A {
    private $prop_a;
    public function __serialize(): array {
        return ["prop_a" => $this->prop_a];
    }
    public function __unserialize(array $data) {
        $this->prop_a = $data["prop_a"];
    }
}
class B extends A {
    private $prop_b;
    public function __serialize(): array {
        return [
            "prop_b" => $this->prop_b,
            "parent_data" => parent::__serialize(),
        ];
    }
    public function __unserialize(array $data) {
        parent::__unserialize($data["parent_data"]);
        $this->prop_b = $data["prop_b"];
    }
} 
```

这通过将实际的序列化和反序列化留给序列化程序的实现来解决 Serializable 的问题。这意味着我们不必再共享序列化状态，从而避免与反向引用排序相关的问题。它还允许我们将 __unserialize() 调用延迟到反序列化结束。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-24T12:00:01.043

试试这个

```
<?php
  $ob = new sleepWakeup();
  $safe_me = serialize($ob);
  $ob = unserialize($safe_me);
?> 
```

# java - Java 枚举类型中的 get() 方法

> ID：11630343
> 
> 赞同：15
> 
> 时间：2012-07-24T11:56:34.607
> 
> 标签：java, enums

我有一个枚举类型（比如为了参数`CarModel`），在整个应用程序（许多类）中使用。

```
public enum CarModel {
    DIABLO,
    P911,
    DB7;
} 
```

我有各种以不同方式使用此`CarModel`枚举类型的方法，并且每个方法都有一个 switch 语句来`String`根据枚举类型设置一些变量，然后再继续执行其他操作。（例如设置某些型号的制造商，或设置原产国等。这些结果在运行时是静态的）

问题是，如果我想向枚举添加一个新模型，我需要转到每个方法，并扩展/修改 switch 语句以处理它的存在。这很容易导致人为错误和/或代码重复（如果各种方法使用相同的 switch 语句）。

我不想完全使用 switch 语句，而是希望有静态方法，可以在单个位置进行编辑，并且允许类似于以下的行为：

```
String country = CarModel.DIABLO.getCountry() // returns Italy
String manufacturer = CarModel.P911.getManufacturer() // returns  Porsche 
```

这是否可以通过枚举实现，（枚举甚至是“正确”的方法吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-24T12:00:20.277

你可以做这样的事情。

```
public enum CarModel {
    DIABLO("Lamborghini", "Italy"),
    P911("Porsche", "Germany");

    private String manufacturer;
    private String country;

    private CarModel(String manufacturer, String country) {
        this.manufacturer = manufacturer;
        this.country = country;
    }

    public String getManufacturer() {
        return manufacturer;
    }

    public String getCountry() {
        return country;
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T12:01:17.197

是的，一点没错。枚举可以有自己的方法，并且这些方法可以是特定于值的。它看起来像这样：

```
enum CarModel {
    P911 {
        public String getManufacturer() { return "Porsche"; }
    },
    DB7 {
        public String getManufacturer() { return "Aston Martin"; }
    },
    ...
    public abstract String getManufacturer();
} 
```

当然，您可以添加更多方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T12:00:02.920

如果你要使用枚举，我建议在枚举中声明一个抽象方法，然后为每个枚举实例提供一个实现。

这样你就不会到处都有 switch 语句（你可以很容易地省略 case），并且你有一个更可靠和 OO 风格的*[多态](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)*方法。

```
abstract public int getEngineSize();

DIABLO {
   public int getEngineSize() {
      return 6.3; // whatever it really is...
   }
} 
```

有关更多示例/讨论等，请参见[此处。](http://blog.james-carr.org/2011/04/27/enums-with-abstract-methods/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T12:03:50.793

我建议将此信息直接添加到您的枚举中。

像这样：

```
public enum CarModel {

    DIABLO("Lambo"),
    P911 ("Porsche");

    private String manufacturer;

    private CarModel(String manufacturer) {
        this.manufacturer = manufacturer;
    }

    public String getManufacturer() {
        return manufacturer;
    }    
} 
```

在课堂上你只需要使用 getManufacturer 方法

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T11:59:39.773

此外，枚举可以实现接口。您可以添加一些`get()`方法，例如`getMaxSpeed()`或`getWeight()`。界面看起来像

```
interface car{
public int getMaxSpeed();
public int getWeight();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-24T12:01:21.000

是的，这很容易做到：

```
public enum CarModel {
    DIABLO("rod"),
    P911("jane"),
    DB7("freddy");

    private String name;
    CarModel(String name){
        this.name = name;
    }

    public String getName() {
        return name;
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-24T12:11:32.870

哈哈，我推荐你使用“工厂”设计模式。

你可以制作一个 CarFactory() 来生产新车型。

[http://en.wikipedia.org/wiki/Factory_method_pattern](http://en.wikipedia.org/wiki/Factory_method_pattern)

# iphone - 在 iPhone 应用程序中未显示的视图

> ID：11630348
> 
> 赞同：0
> 
> 时间：2012-07-24T11:57:18.107
> 
> 标签：iphone, objective-c, view, uiviewcontroller

我有 4 个文件，BarPlot.h 和 BarPlot.m，BarPlotViewController.h 和 BarPlotViewController.m，我的（对你们来说可能非常直接）是我无法让 BarplotViewController 显示我的图表。

我已经确保在情节提要中调用了正确的视图控制器。

我已经多次查看代码，但我无法弄清楚为什么当我在模拟器中运行应用程序时视图没有显示..

我已包含以下文件。

非常感谢任何和所有帮助。

BarPlotViewController.h

```
#import <UIKit/UIKit.h>
#import "CorePlot-CocoaTouch.h"
#import "BarPlot.h"

@interface BarPlotViewController : UIViewController {
    CPTGraphHostingView *_graphHostingView;
}

@property (nonatomic, retain) BarPlot *barPlot;

@end 
```

BarPlotViewController.m

```
#import "BarPlotViewController.h"

@implementation BarPlotViewController
@synthesize barPlot = _barPlot;

- (void)viewWillAppear:(BOOL)animated
{   
    self.barPlot = [[BarPlot alloc] initWithHostingView:_graphHostingView];
    [self.barPlot generateBarPlot];
}

@end 
```

条形图.h

```
#import <UIKit/UIKit.h>
#import "CorePlot-CocoaTouch.h"

@interface BarPlot : UIViewController <CPTBarPlotDataSource, CPTBarPlotDelegate> {
    CPTGraphHostingView *_hostingView;  
CPTXYGraph *_graph;
}

@property (nonatomic, retain) NSMutableArray *data;
@property (nonatomic, retain) CPTGraphHostingView *hostingView;
@property (nonatomic, retain) CPTXYGraph *graph;

// Methods to create this object and attach it to it's hosting view.
-(id)initWithHostingView:(CPTGraphHostingView *)hostingView;

// Generate the bar plot
- (void) generateBarPlot;

@end 
```

条形图.m

```
#import "BarPlot.h"

@implementation BarPlot

#define BAR_POSITION @"POSITION"
#define BAR_HEIGHT @"HEIGHT"
#define COLOR @"COLOR"
#define CATEGORY @"CATEGORY"

#define AXIS_START 0
#define AXIS_END 50

@synthesize data;
@synthesize hostingView = _hostingView;
@synthesize graph = _graph;

// Initialise the bar plot in the provided hosting
-(id)initWithHostingView:(CPTGraphHostingView *)hostingView
{
    self = [super init];

if ( self != nil ) {
    self.hostingView = hostingView;
    self.graph = nil;
}

NSLog(@"Bar Plot: I'm in the initWithHostingView (in the barplot.m file)");

return self;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {

    self.data = [NSMutableArray array];

    int bar_heights[] = {20,30};

    UIColor *colors[] = {
        [UIColor redColor],
        [UIColor blueColor],
        [UIColor orangeColor],
        [UIColor purpleColor]};

    NSString *categories[] = {@"", @""};

    for (int i = 0; i < 2 ; i++){
        double position = i*20; //Bars will be 10 pts away from each other
        double height = bar_heights[i];

        NSDictionary *bar = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithDouble:position],BAR_POSITION,
                             [NSNumber numberWithDouble:height],BAR_HEIGHT,
                             colors[i],COLOR,
                             categories[i],CATEGORY,
                             nil];
        [self.data addObject:bar];

    }
    [self generateBarPlot];
}
return self;
}

- (void)generateBarPlot
{
//Create host view
/*self.hostingView = [[CPTGraphHostingView alloc] 
                    initWithFrame:[[UIScreen mainScreen]bounds]];
[self.view addSubview:self.hostingView];

//Create graph and set it as host view's graph
self.graph = [[CPTXYGraph alloc] initWithFrame:self.hostingView.bounds];
[self.hostingView setHostedGraph:self.graph];*/

// Create a graph object which we will use to host just one scatter plot.
CGRect frame = [self.hostingView bounds];
self.graph = [[CPTXYGraph alloc] initWithFrame:frame];

// Tie the graph we've created with the hosting view.
self.hostingView.hostedGraph = self.graph;

//set graph padding and theme
self.graph.plotAreaFrame.paddingTop = 20.0f;
self.graph.plotAreaFrame.paddingRight = 20.0f;
self.graph.plotAreaFrame.paddingBottom = 70.0f;
self.graph.plotAreaFrame.paddingLeft = 70.0f;
[self.graph applyTheme:[CPTTheme themeNamed:kCPTDarkGradientTheme]];

// Gets rid of decimal on years
NSNumberFormatter *labelFormatter = [[NSNumberFormatter alloc] init];
labelFormatter.maximumFractionDigits = 0;

//set axes ranges
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)self.graph.defaultPlotSpace;
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:
                    CPTDecimalFromFloat(AXIS_START)
                                                length:CPTDecimalFromFloat((AXIS_END - AXIS_START))];
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:
                    CPTDecimalFromFloat(AXIS_START)
                                                length:CPTDecimalFromFloat((AXIS_END - AXIS_START))];

CPTXYAxisSet *axisSet = (CPTXYAxisSet *)self.graph.axisSet;
//set axes' title, labels and their text styles
CPTMutableTextStyle *textStyle = [CPTMutableTextStyle textStyle];
textStyle.fontName = @"Helvetica";
textStyle.fontSize = 14;
textStyle.color = [CPTColor whiteColor];

axisSet.xAxis.title = @"A";
axisSet.yAxis.title = @"B";
axisSet.xAxis.titleTextStyle = textStyle;
axisSet.yAxis.titleTextStyle = textStyle;
axisSet.xAxis.titleOffset = 30.0f;
axisSet.yAxis.titleOffset = 40.0f;
axisSet.xAxis.labelTextStyle = textStyle;
axisSet.yAxis.labelTextStyle = textStyle;
axisSet.xAxis.labelOffset = 3.0f;
axisSet.yAxis.labelOffset = 3.0f;

//set axes' line styles and interval ticks
CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle];
lineStyle.lineColor = [CPTColor whiteColor];
lineStyle.lineWidth = 3.0f;
axisSet.xAxis.axisLineStyle = lineStyle;
axisSet.yAxis.axisLineStyle = lineStyle;
axisSet.xAxis.majorTickLineStyle = lineStyle;
axisSet.yAxis.majorTickLineStyle = lineStyle;
axisSet.xAxis.majorIntervalLength = CPTDecimalFromFloat(5.0f);
axisSet.yAxis.majorIntervalLength = CPTDecimalFromFloat(5.0f);
axisSet.xAxis.majorTickLength = 10.0f;
axisSet.yAxis.majorTickLength = 10.0f;
axisSet.xAxis.minorTickLineStyle = lineStyle;
axisSet.yAxis.minorTickLineStyle = lineStyle;
axisSet.xAxis.minorTicksPerInterval = 1;
axisSet.yAxis.minorTicksPerInterval = 1;
axisSet.xAxis.minorTickLength = .0f;
axisSet.yAxis.minorTickLength = .0f;
axisSet.xAxis.labelFormatter = labelFormatter;
axisSet.yAxis.labelFormatter = labelFormatter;

// Create bar plot and add it to the graph
CPTBarPlot *plot = [[CPTBarPlot alloc] init] ;
plot.delegate = self;
plot.dataSource = self;
plot.barWidth = [[NSDecimalNumber decimalNumberWithString:@"5.0"]
                 decimalValue];
plot.barOffset = [[NSDecimalNumber decimalNumberWithString:@"10.0"]
                  decimalValue];
plot.barCornerRadius = 5.0;

// Remove bar outlines
CPTMutableLineStyle *borderLineStyle = [CPTMutableLineStyle lineStyle];
borderLineStyle.lineColor = [CPTColor clearColor];
plot.lineStyle = borderLineStyle;

// Identifiers are handy if you want multiple plots in one graph
plot.identifier = @"chocoplot";
[self.graph addPlot:plot];
}

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
if ( [plot.identifier isEqual:@"chocoplot"] ) 
{
    return [self.data count];
}

return 0;
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
{
if ( [plot.identifier isEqual:@"chocoplot"] )
{

    NSDictionary *bar = [self.data objectAtIndex:index];

    if( fieldEnum == 2 ) {
        return [bar valueForKey:BAR_POSITION];
        //return [NSNumber numberWithDouble:20];
    }
    else if( fieldEnum == 3 ) {
        return [bar valueForKey:BAR_HEIGHT];
        //return [NSNumber numberWithDouble:20];
    }

}
NSLog(@"numberForPlot return before");
return [NSNumber numberWithDouble:15];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:22:52.353

嗯，我注意到的第一件事是你从不调用 addSubview。那是实际上“添加视图”的代码，所以我将从那里开始。另外，请参阅此问题，第二个答案看起来可能会有所帮助：[Adding CPTGraphHostingView as a subview](https://stackoverflow.com/questions/7094572/adding-cptgraphhostingview-as-a-subview)

# wordpress - WordPress 主题建议

> ID：11630350
> 
> 赞同：1
> 
> 时间：2012-07-24T11:57:20.277
> 
> 标签：wordpress, themes, blogs

我想以下列方式显示一个 wordpress 博客：

[http://plone.org/documentation/kb/](http://plone.org/documentation/kb/)

喜欢您可以扩展类别和文章。

关于实现这一目标的主题有什么建议吗？还是我应该自己写？我不想维护它，所以我有点害怕自己写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:23:09.233

大多数很酷的东西都有 Javascript 来执行动画和交互元素，这些元素在 WordPress 标准主题上都不是标准的。

**但，**

在谷歌上快速搜索“**知识库主题 wordpress** ”会发现一些有趣的结果。（比如[这个](http://themeforest.net/item/sofa-qanda-knowledge-base-wp-theme/180802?ref=foxinni)）

否则，您将不得不自己编写代码或雇用某人。

# android - 如何在Android应用程序开发中删除IntegerArray中的重复值

> ID：11630359
> 
> 赞同：-1
> 
> 时间：2012-07-24T11:57:30.630
> 
> 标签：android, android-intent

我想知道如何删除整数数组中的重复值。

我想你可能会在所有语言中遇到这个问题。

但是在android中我不知道如何实现这一点。任何人都可以帮我解决这个问题。

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:59:17.507

确保您的数组不是`Integer`类型`int`

```
Integer[] array; // Your integer array...

Set<Integer> set = new HashSet<Integer>();
Collections.addAll(set, array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:26:38.683

**试试这个代码**

```
public static void removeDuplicateWithOrder(ArrayList arlList)
{
   Set set = new HashSet();
   List newList = new ArrayList();
   for (Iterator iter = arlList.iterator(); iter.hasNext();) {
      Object element = iter.next();
      if (set.add(element))
         newList.add(element);
   }
   arlList.clear();
   arlList.addAll(newList);
} 
```

# c# - 检查使用身份验证的 Web 服务是否可用于特定登录（用户和密码的组合）

> ID：11630360
> 
> 赞同：1
> 
> 时间：2012-07-24T11:57:31.207
> 
> 标签：c#, web-services

我正在对 web 服务的 url 进行 http 获取，这实际上是在 IIS 中托管的 WCF，使用带有凭据的绑定传输。我想检查是否可以使用特定登录名调用该服务。如何编写 httpget 请求来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:17:28.410

您是否尝试过设置`HttpWebRequest.Credentials`属性？类似的东西`request.Credentials = new NetworkCredential("login", "password")`。见链接：http: [//msdn.microsoft.com/en-us/library/system.net.httpwebrequest.credentials.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.credentials.aspx)

# css - 覆盖 CSS 中继承的 h1 和 h3 值

> ID：11630365
> 
> 赞同：3
> 
> 时间：2012-07-24T11:57:39.130
> 
> 标签：css, twitter-bootstrap

我有以下被继承的 CSS（原始 CSS）：

```
h1 { 
    font-size:30px;
    line-height:36px;
}
h1 small {
    font-size:18px;
} 
```

我有一个类，我想像这样覆盖`h1`属性：

```
.logo h1 {
  font-family: "Euphemia UCAS";
  font-size: 200px !important;
  font-weight: normal;
  color: #222222;
} 
```

如何在不修改原始 CSS 的情况下做到这一点？该`!important`值没有帮助。

链接：[https ://dl.dropbox.com/u/3417415/Storify/mockups/screen1.html](https://dl.dropbox.com/u/3417415/Storify/mockups/screen1.html)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-24T12:32:08.163

您错误地应用了 CSS 选择器。

`.logo`从我在您的代码中可以看到，您的课程位于标头标签本身。

你的 CSS 应该是：

```
h1.logo {
  font-family: "Euphemia UCAS";
  font-size: 200px !important;
  font-weight: normal;
  color: #222222;
} 
```

只需仔细检查该类的确切应用位置。

此外，刚刚再次检查了您的 HTML，它看起来像这样：

```
<h3 class="logo">Storify</h3> 
```

所以你的 CSS 应该是：

```
h3.logo {
  font-family: "Euphemia UCAS";
  font-size: 200px !important;
  font-weight: normal;
  color: #222222;
} 
```

还是我完全误解了你？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-25T23:35:01.990

您可以在 html 中使用脚本元素。

在脚本中通过添加事件处理程序

```
addEventListener('load', function () {
   // Change your css properties here.
}); 
```

这样您就可以确定不会发生 css 样式的继承。

# android - 如何检测滚动条何时到达网页的顶部或底部？

> ID：11630368
> 
> 赞同：0
> 
> 时间：2012-07-24T11:57:45.143
> 
> 标签：android, webview

我正在使用`WebView`，我的问题是，每当滚动条到达它的末尾或顶部时`WebView`，应该用一些布尔值向我指示这一点，以便我可以相应地显示下一页和上一页。

我正在做一个项目，我想将 HTML 文件显示为 html 阅读器，所以我想知道滚动条何时到达网页末尾，以便加载更多页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:03:12.990

我向您推荐 iScroll：

`http://cubiq.org/iscroll-4`

它易于使用，并且在每个移动平台上都非常完美。

# arrays - As3 使用标签而不是数字来引用数组位置？

> ID：11630369
> 
> 赞同：0
> 
> 时间：2012-07-24T11:57:46.403
> 
> 标签：arrays, actionscript-3, flash, actionscript

有没有办法制作一个由“标签”组成的数组，所以我可以通过它们的“名称”来引用它们？

因此，通常当我想引用数组中的某个位置时，我会执行以下操作：

```
MyArray:Array = new Array( ["Marco", 26, "Portugal" ] );
trace(MyArray[2]);
Output: "Portugal" 
```

我想使用一个位置有不同名称的数组。所以我想成为这样的人：

```
MyArray:Array = new Array( ["Marco", 26, "Portugal" ] );
trace(MyArray[Country]);
Output: "Portugal" 
```

我很确定数组的“标签”或“名称”不是要使用的专有术语，但我不知道正确的术语，所以请原谅。它也可能是一个简单的问题，但直到现在我才需要使用它。我正在构建一个“区域”数组，其中包含舞台上几个影片剪辑的位置、高度和宽度，因此我可以使用数组的一些简化来避免总是使用数字。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:13:13.260

您可以只使用`Object`该类，这是在 as3 中使用关联数组的最简单方法：

```
var ob:Object = {
  name: "Marco",
  age: 26,
  country:"Portugal"
};

trace(ob.country);
//output: Portugal 
```

我建议您查看 Adob​​e 网站上的这篇文章以获取更多信息：[ActionScript 3 基础：关联数组、地图和字典](http://www.adobe.com/es/devnet/actionscript/learning/as3-fundamentals/associative-arrays.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:07:35.567

While, I see you are using Array, it's no way to give a name for every element.

I suggest you the "Map" data struct in AS3。</p>

```
var DC:Dictionary=new Dictionary;
DC["Country"] = "Portugal";
DC["name"] = "Marco";
... 
```

Hope this will help you.

# php - 在 cakePHP 的页面顶部显示所有模型验证错误

> ID：11630373
> 
> 赞同：6
> 
> 时间：2012-07-24T11:58:15.980
> 
> 标签：php, cakephp, cakephp-2.0

我是 CakePHP 的新手。当我使用`Model Field Validations`它时，它会在每个必填表单字段的前面显示错误消息。我想在表单顶部的 div 中显示它。我如何实现它。提前致谢。这是我的代码： 型号：

```
<?php
class User extends AppModel {
public $validate = array(
    'username' => array(
        'required' => array(
            'rule' => array('notEmpty'),
            'message' => 'A username is required'
        ),
     array(
    'rule'    => array('minLength', 8),
    'message' => 'Username must be at least 6 characters long'
     )
    ),
    'password' => array(
        'required' => array(
            'rule' => array('notEmpty'),
            'message' => 'A password is required'
        )
    ),
     'city' => array(
        'required' => array(
            'rule' => array('notEmpty'),
            'message' => 'A City is required'
        )
    ),
     'state' => array(
        'required' => array(
            'rule' => array('notEmpty'),
            'message' => 'A State is required'
        )
    ),
    'role' => array(
        'valid' => array(
            'rule' => array('inList', array('admin', 'author')),
            'message' => 'Please enter a valid role',
            'allowEmpty' => false
        )
    )
);

} 
```

用户控制器.php

```
public function add() {
    $this->set('states_options', $this->State->find('list', array('fields' =>array('id','name') )));
        $this->set('cities_options', array());
    if ($this->request->is('post')) {
        $this->User->set($this->request->data);
        if($this->User->validates())
        {
        $this->User->create();
        if ($this->User->save($this->request->data)) {
            $this->Session->setFlash(__('The user has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
        }
     }
     else {
        $errors = $this->User->validationErrors;
            $this->set('ValidateAjay',$errors);             
        //pr($errors);die;
        }
    }
} 
```

用户视图：

```
<!--<script src="http://code.jquery.com/jquery-1.7.2.js"></script>-->
<script>
$(document).ready(function(){
$('#UserState').change(function(){
  var stateid=$(this).val();
  $.ajax({
  type: "POST",
  url: "checkcity",
  data:'stateid='+stateid+'&part=checkcity',
  success: function(data) {
  $("#city_div").html(data);
  }
  });
});
});
</script>
<div class="users form">
<?php
 if(!empty($ValidateAjay)){
 pr($ValidateAjay);
 }
 echo $this->Form->create('User'); ?>
 <fieldset>
    <legend><?php echo __('Add User'); ?></legend>
<?php
    echo $this->Form->input('username');
    echo $this->Form->input('password');
    echo $this->Form->input('state', array('options' => $states_options , 'empty' => 'Select State'  ));    
    ?>
   <div id="city_div">
   <?php
    echo $this->Form->input('city', array('options' => $cities_options, 'empty' => 'Select City' ));
    ?>
    </div>
   <?php
    echo $this->Form->input('role', array(
        'options' => array('admin' => 'Admin', 'author' => 'Author')
    ));
?>
</fieldset>
<?php echo $this->Form->end(__('Submit')); ?>
 </div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T14:21:14.867

`$this->validationErrors`您可以从视图上的变量中获取所有验证错误。然后随意迭代它们并根据需要显示。它们将按模型组织，如下所示：

```
array(
  'User' => array(
    'username' => 'This field cannot be empty.',
    'password' => 'This field cannot be empty.'
  )
); 
```

然后，您可以在视图上遍历它们并按原样显示它们。此示例将它们显示为无序列表：

```
$errors = '';
foreach ($this->validationErrors['User'] as $validationError) {
  $errors .= $this->Html->tag('li', $validationError);
}
echo $this->Html->tag('ul', $errors); 
```

最后，您可以通过使用 CSS 隐藏表单助手的自动错误消息或将 FormHelper 默认设置为不显示它们来隐藏它们。

**CSS**

```
.input.error {
  display: none;
} 
```

*或者*

**在视图中**

```
$this->Form->inputDefaults(array(
  'error' => false
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T17:51:20.670

jeremyharris 的例子很有意义，但是如果你不想为每个表单域手动设置循环，你可以试试这个：

```
$errors = '';
foreach($this->validationErrors as $assoc) {
    foreach ($assoc as $k => $v) {
        $errors .= $this->Html->tag('li', $v);  
    }
}
echo $this->Html->tag('ul', $errors); 
```

因此，如果您的验证返回多个错误，输出将如下所示：

```
 - A username is required
 - A password is required 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-16T07:21:37.997

虽然这是一个非常古老的帖子，但我也想在这里回答我的解决方案。

要获取模型验证错误，只需使用`$model->getErrors();`. 这将返回一个带有 field 的错误数组`key`。

**例子**

```
$errors = $user->getErrors(); 
```

# python - Django Formsets：成员表单清理方法不起作用？

> ID：11630374
> 
> 赞同：0
> 
> 时间：2012-07-24T11:58:18.010
> 
> 标签：python, django, forms

`clean()`我创建了一个具有自定义方法的模型表单。但是这种`clean()`方法不再起作用，因为我从该模型表单中创建了一个表单集，因为它无法在`QueryDict`. 那么现在该怎么做才能让它工作（在表单集 QueryDict 中找到与该表单相关的数据）？

这是会员表格：

```
class option_form(ModelForm):
    class Meta:
        model = option
        exclude = ('warval','user')

    def clean_value(self):
        self.data = self.data.copy()
        print(self.data)
        if self.data['value']=='lol@lol.co':
            raise forms.ValidationError("This can't be your email address")

        return self.data['value'] 
```

这是错误：

```
Exception Type: MultiValueDictKeyError
Exception Value: "Key 'value' not found in <QueryDict: {u'form-1-value': [u''], u'form-INITIAL_FORMS': [u'1'], u'form-TOTAL_FORMS': [u'2'], u'form-MAX_NUM_FORMS': [u''], u'form-0-id': [u'1'], u'form-1-id': [u''], u'csrfmiddlewaretoken': [u'e645de635fe47559ac540eb32ea4d08d'], u'form-0-value': [u'lol@lol.co']}>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:26:33.153

在您的`clean_value`方法中，您应该从`self.cleaned_data`而不是获取值`self.data`。有关示例，请参阅有关[清理特定字段属性的文档。](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-a-specific-field-attribute)

`self.data`是您初始化表单时使用的原始 POST 或 GET 数据。它不包含名为 的键`value`，因为键的[前缀](https://docs.djangoproject.com/en/dev/ref/forms/api/#prefixes-for-forms)为`form-0-`.

尝试将您的清洁方法更改为以下内容：

```
def clean_value(self):
    value = self.cleaned_data['value']
    if value == 'lol@lol.co':
        raise forms.ValidationError("This can't be your email address")
    return value 
```

# c++ - 带有 C++ lambda 的部分应用程序？

> ID：11630379
> 
> 赞同：17
> 
> 时间：2012-07-24T11:58:34.750
> 
> 标签：c++, lambda, c++11, currying

编辑：我在下面使用咖喱，但被告知这是部分应用。

我一直在试图弄清楚如何用 C++ 编写一个 curry 函数，而我真的想通了！

```
#include <stdio.h>
#include <functional>

template< class Ret, class Arg1, class ...Args >
auto curry(  Ret f(Arg1,Args...), Arg1 arg )
    -> std::function< Ret(Args...) >
{
    return [=]( Args ...args ) { return f( arg, args... ); };
} 
```

我也为 lambdas 编写了一个版本。

```
template< class Ret, class Arg1, class ...Args >
auto curry(  const std::function<Ret(Arg1,Args...)>& f, Arg1 arg )
    -> std::function< Ret(Args...) >
{
    return [=]( Args ...args ) { return f( arg, args... ); };
} 
```

测试：

```
int f( int x, int y )
{
    return x + y;
}

int main()
{
    auto f5 = curry( f, 5 );
    auto g2 = curry( std::function<int(int,int)>([](int x, int y){ return x*y; }), 2 );
    printf("%d\n",f5(3));
    printf("%d\n",g2(3));
} 
```

呸！初始化 g2 的行太大了，我不妨手动对其进行咖喱。

```
auto g2 = [](int y){ return 2*y; }; 
```

矮得多。但是由于意图是拥有一个真正通用且方便的 curry 函数，我可以（1）编写一个更好的函数或（2）我的 lambda 以某种方式隐式构造一个 std::function 吗？当 f 不是自由函数时，我担心当前版本违反了最小意外规则。特别令人讨厌的是我所知道的 make_function 或类似类型的函数似乎不存在。真的，我理想的解决方案只是调用 std::bind，但我不确定如何将它与可变参数模板一起使用。

PS：请不要提升，但如果没有别的，我会解决的。

编辑：我已经知道 std::bind 了。如果 std::bind 用最好的语法完全符合我的要求，我就不会编写这个函数。这应该更像是一种特殊情况，它只绑定第一个元素。

正如我所说，我理想的解决方案应该**使用**绑定，但如果我想使用它，我会使用它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T12:43:17.840

你的`curry`函数只是一个缩小的低效子案例`std::bind`(`std::bind1st`并且`bind2nd`现在我们有 不应该再使用`std::result_of`)

您的两行实际上是

```
auto f5 = std::bind(f, 5, _1);
auto g2 = std::bind(std::multiplies<int>(), 2, _1); 
```

用过之后`namespace std::placeholders`。这小心地避免了装箱`std::function`，并允许编译器更容易地在调用站点内联结果。

对于两个参数的函数，破解类似的东西

```
auto bind1st(F&& f, T&& t) 
    -> decltype(std::bind(std::forward<F>(f), std::forward<T>(t), _1))
{
    return std::bind(std::forward<F>(f), std::forward<T>(t), _1)
} 
```

可能有效，但很难推广到可变参数情况（为此您最终会在 中重写很多逻辑`std::bind`）。

柯里化也不是部分应用。咖喱有“签名”

```
((a, b) -> c) -> (a -> b -> c) 
```

IE。它是将带有两个参数的函数转换为返回函数的函数的操作。它有一个`uncurry`执行逆运算的逆函数（对于数学家来说：`curry`和`uncurry`是同构的，并且定义了一个附加词）。这个逆用 C++ 编写非常麻烦（提示：使用`std::result_of`）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-24T14:15:45.543

这是在 C++ 中进行柯里化的一种方式，并且在最近对 OP 进行编辑之后可能相关也可能不相关。

由于重载，检查函子并检测其数量是非常有问题的。然而，可能的是，给定一个仿函数`f`和一个参数`a`，我们可以检查是否`f(a)`是一个有效的表达式。如果不是，我们可以存储`a`并给出以下参数`b`，我们可以检查是否`f(a, b)`是一个有效的表达式，依此类推。以机智：

```
#include <utility>
#include <tuple>

/* Two SFINAE utilities */

template<typename>
struct void_ { using type = void; };

template<typename T>
using Void = typename void_<T>::type;

// std::result_of doesn't play well with SFINAE so we deliberately avoid it
// and roll our own
// For the sake of simplicity this result_of does not compute the same type
// as std::result_of (e.g. pointer to members)
template<typename Sig, typename Sfinae = void>
struct result_of {};

template<typename Functor, typename... Args>
struct result_of<
    Functor(Args...)
    , Void<decltype( std::declval<Functor>()(std::declval<Args>()...) )>
> {
    using type = decltype( std::declval<Functor>()(std::declval<Args>()...) );
};

template<typename Functor, typename... Args>
using ResultOf = typename result_of<Sig>::type;

template<typename Functor, typename... Args>
class curry_type {
    using tuple_type = std::tuple<Args...>;
public:
    curry_type(Functor functor, tuple_type args)
        : functor(std::forward<Functor>(functor))
        , args(std::move(args))
    {}

    // Same policy as the wrappers from std::bind & others:
    // the functor inherits the cv-qualifiers from the wrapper
    // you might want to improve on that and inherit ref-qualifiers, too
    template<typename Arg>
    ResultOf<Functor&(Args..., Arg)>
    operator()(Arg&& arg)
    {
        return invoke(functor, std::tuple_cat(std::move(args), std::forward_as_tuple(std::forward<Arg>(arg))));
    }

    // Implementation omitted for brevity -- same as above in any case
    template<typename Arg>
    ResultOf<Functor const&(Args..., Arg)>
    operator()(Arg&& arg) const;

    // Additional cv-qualified overloads omitted for brevity

    // Fallback: keep calm and curry on
    // the last ellipsis (...) means that this is a C-style vararg function
    // this is a trick to make this overload (and others like it) least
    // preferred when it comes to overload resolution
    // the Rest pack is here to make for better diagnostics if a user erroenously
    // attempts e.g. curry(f)(2, 3) instead of perhaps curry(f)(2)(3)
    // note that it is possible to provide the same functionality without this hack
    // (which I have no idea is actually permitted, all things considered)
    // but requires further facilities (e.g. an is_callable trait)
    template<typename Arg, typename... Rest>
    curry_type<Functor, Args..., Arg>
    operator()(Arg&& arg, Rest const&..., ...)
    {
        static_assert( sizeof...(Rest) == 0
                       , "Wrong usage: only pass up to one argument to a curried functor" );
        return { std::forward<Functor>(functor), std::tuple_cat(std::move(args), std::forward_as_tuple(std::forward<Arg>(arg))) };
    }

    // Again, additional overloads omitted

    // This is actually not part of the currying functionality
    // but is here so that curry(f)() is equivalent of f() iff
    // f has a nullary overload
    template<typename F = Functor>
    ResultOf<F&(Args...)>
    operator()()
    {
        // This check if for sanity -- if I got it right no user can trigger it
        // It *is* possible to emit a nice warning if a user attempts
        // e.g. curry(f)(4)() but requires further overloads and SFINAE --
        // left as an exercise to the reader
        static_assert( sizeof...(Args) == 0, "How did you do that?" );
        return invoke(functor, std::move(args));
    }

    // Additional cv-qualified overloads for the nullary case omitted for brevity

private:
    Functor functor;
    mutable tuple_type args;

    template<typename F, typename Tuple, int... Indices>
    ResultOf<F(typename std::tuple_element<Indices, Tuple>::type...)>
    static invoke(F&& f, Tuple&& tuple, indices<Indices...>)
    {
        using std::get;
        return std::forward<F>(f)(get<Indices>(std::forward<Tuple>(tuple))...);
    }

    template<typename F, typename Tuple>
    static auto invoke(F&& f, Tuple&& tuple)
    -> decltype( invoke(std::declval<F>(), std::declval<Tuple>(), indices_for<Tuple>()) )
    {
        return invoke(std::forward<F>(f), std::forward<Tuple>(tuple), indices_for<Tuple>());
    }
};

template<typename Functor>
curry_type<Functor> curry(Functor&& functor)
{ return { std::forward<Functor>(functor), {} }; } 
```

上面的代码使用 GCC 4.8 的快照编译（除非复制和粘贴错误），前提是有一个`indices`类型和一个`indices_for`实用程序。[这个问题](https://stackoverflow.com/questions/7858817/unpacking-a-tuple-to-call-a-matching-function-pointer)及其答案展示了这些东西的需要和实现，其中扮演`seq`的角色可以用来实现一个（更方便）。`indices``gens``indices_for`

当涉及到（可能的）临时人员的价值类别和生命周期时，上述内容非常谨慎。`curry`（及其附带的类型，这是一个实现细节）被设计为尽可能轻量级，同时仍然使其使用起来非常非常安全。特别是，例如：

```
foo a;
bar b;
auto f = [](foo a, bar b, baz c, int) { return quux(a, b, c); };
auto curried = curry(f);
auto pass = curried(a);
auto some = pass(b);
auto parameters = some(baz {});
auto result = parameters(0); 
```

不复制`f`，`a`或`b`；也不会导致对临时对象的引用悬空。即使`auto`被替换为`auto&&`（假设`quux`是理智的，但这超出了 的控制`curry`），这一切仍然成立。在这方面仍然有可能提出不同的政策（例如系统性衰减）。

请注意，参数（但不是函子）在最终调用中传递的值类别与传递给柯里化包装器时的值类别相同。因此在

```
auto functor = curry([](foo f, int) {});
auto curried = functor(foo {});
auto r0 = curried(0);
auto r1 = curried(1); 
```

这意味着`foo`在计算`r1`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-04T00:15:16.220

借助一些 C++14 特性，可以以非常简洁的方式实现适用于 lambda 的部分应用程序。

```
template<typename _function, typename _val>
auto partial( _function foo, _val v )
{
  return
    [foo, v](auto... rest)
    {
      return foo(v, rest...);
    };
}

template< typename _function, typename _val1, typename... _valrest >
auto partial( _function foo, _val1 val, _valrest... valr )
{
  return
    [foo,val,valr...](auto... frest)
    {
      return partial(partial(foo, val), valr...)(frest...);
    };
}

// partial application on lambda
int p1 = partial([](int i, int j){ return i-j; }, 6)(2);
int p2 = partial([](int i, int j){ return i-j; }, 6, 2)(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T02:37:33.050

人们提供的许多示例以及我在其他地方看到的许多示例都使用辅助类来完成他们所做的任何事情。我意识到当你这样做时，这变得微不足道！

```
#include <utility> // for declval
#include <array>
#include <cstdio>

using namespace std;

template< class F, class Arg >
struct PartialApplication
{
    F f;
    Arg arg;

    constexpr PartialApplication( F&& f, Arg&& arg )
        : f(forward<F>(f)), arg(forward<Arg>(arg))
    {
    }

    /* 
     * The return type of F only gets deduced based on the number of arguments
     * supplied. PartialApplication otherwise has no idea whether f takes 1 or 10 args.
     */
    template< class ... Args >
    constexpr auto operator() ( Args&& ...args )
        -> decltype( f(arg,declval<Args>()...) )
    {
        return f( arg, forward<Args>(args)... );
    }
};

template< class F, class A >
constexpr PartialApplication<F,A> partial( F&& f, A&& a )
{
    return PartialApplication<F,A>( forward<F>(f), forward<A>(a) );
}

/* Recursively apply for multiple arguments. */
template< class F, class A, class B >
constexpr auto partial( F&& f, A&& a, B&& b )
    -> decltype( partial(partial(declval<F>(),declval<A>()),
                         declval<B>()) )
{
    return partial( partial(forward<F>(f),forward<A>(a)), forward<B>(b) );
}

/* Allow n-ary application. */
template< class F, class A, class B, class ...C >
constexpr auto partial( F&& f, A&& a, B&& b, C&& ...c )
    -> decltype( partial(partial(declval<F>(),declval<A>()),
                         declval<B>(),declval<C>()...) )
{
    return partial( partial(forward<F>(f),forward<A>(a)), 
                    forward<B>(b), forward<C>(c)... );
}

int times(int x,int y) { return x*y; }

int main()
{
    printf( "5 * 2 = %d\n", partial(times,5)(2) );
    printf( "5 * 2 = %d\n", partial(times,5,2)() );
} 
```

# c# - Reading Connection string from application Config file

> ID：11630391
> 
> 赞同：1
> 
> 时间：2012-07-24T11:59:18.407
> 
> 标签：c#

I am trying to read a connection string from the application configuration file.

But keep receiving an error:

> The name ConfigurationManager does in exit in current context.

After googling the error, I added ConfigurationManager to my project. But I still get the same error.

My code:

```
string sqlConStr = ConfigurationManager.ConnectionStrings["AppConnectionString"].ToString();` 
```

My application config file:

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <connectionStrings>
        <add name="AppConnectionString" connectionString="SERVER=1894; Database=db; UID=loss;  PWD=where;encrypt=no;enlist=false" providerName="System.Data.SqlClient" />
    </connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:03:09.113

Ensure you have referenced `System.configuration`.

Then make sure you either import the correct namespace

```
using System.Configuration; 
```

or use the full typename

```
string sqlConStr = System.Configuration.ConfigurationManager.ConnectionStrings["AppConnectionString"].ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:02:44.340

Try using `ConnectionString`

```
var connection = ConfigurationManager.ConnectionStrings["AppConnectionString"].ConnectionString; 
```

# joomla - 如何查找使用 Joomla 创建的网站使用的主题/模板

> ID：11630394
> 
> 赞同：3
> 
> 时间：2012-07-24T11:59:19.887
> 
> 标签：joomla, themes, joomla2.5, joomla-template

我想知道某些网站使用的主题。

例如，我想知道[这个站点](http://www.pizzahut.fr/)使用的主题（[参考](http://community.joomla.org/blogs/community/1271-pizza-hut.html)）。

找到 xyz 网站使用的主题/模板的步骤是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T12:19:17.007

具体来说，Joomla 有一个名为 templates 的文件夹，其中保存着模板。我通常会使用

*   路径（对于 joomla，它将是 /templates/(Theme Name)/style.css）
*   通过查看 CSS 文件的来源。许多网站将模板元数据保留在其中。

但是，如果设计人员更改模板目录名称或从 css 文件中删除元数据或从头开始构建他/她自己的 css。识别模板的余地不多。因此，您将不得不通过识别所使用的 CMS，然后通过 CMS 特定模板浏览来以艰难的方式做到这一点。:)

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T13:40:30.353

您可以打开 Firebug，检查页面，它会包含一些相关链接，这些链接将向您显示正在使用的模板。

例如，对于您提供的必胜客网站：

*http: **//www.pizzahut.fr/skin/frontend/pizza_new** /default/favicon.ico*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T20:01:44.083

**Joomla！1.5.x 网站**

```
<meta name="generator" content="Joomla! 1.5 - Open Source Content Management" /> 
```

**Joomla！1.0.x 网站**

```
<meta name="Generator" content="Joomla! - Copyright (C) 2005 - 2007 Open Source Matters. All rights reserved." /> 
```

**在 URL 后的地址栏中输入“/administrator”。**

```
http://sitename/administrator   or http://sitename/index.php/administrator 
```

**在url后面输入“?tp=1”即可查看模板布局**

```
http://www.joomla.org/?tp=1 
```

**您可以在源代码中查看 plugin/system/ 或 plugin/content/。**

```
http://sitename/plugins/system/plg_jausersetting/script.js 
```

**css 文件路径 /templete/themename/style.css**

`http://sitename/templates/colette/css/template.css`

# symfony-2.1 - 使用 composer 在 Symfony 2.1 中升级的步骤

> ID：11630397
> 
> 赞同：5
> 
> 时间：2012-07-24T11:59:23.183
> 
> 标签：symfony-2.1, composer-php

我只是在 symfony 2.1-BETA3 上测试新功能。几个小时前 BETA4 已经发布，但我不知道如何使用 composer 将 BETA3 更新为 BETA4。在 2.0.x 发行说明中，Fabien 说：

> 如果您已经有一个基于 Symfony 标准版 2.0.x 的项目，您可以通过获取新的 deps 和 deps.lock 文件轻松升级到 2.0.15。

我是否替换了我的 composer.lock 文件？我自己的要求怎么样：

```
"package": "stof/doctrine-extensions-bundle",
"version": "dev-master",
"source-reference": "36356b158b74cb68f96dc0b657e8732422b9d5dd",
"commit-date": "1341954345" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T12:05:11.930

不要碰`composer.lock`！改变`composer.json`。如果您使用的是标准版，您可能已经有了类似的东西

```
"symfony/symfony": "2.1.*" 
```

和

```
"minimum-stability": "dev" 
```

在那里。后一种意味着您允许安装开发包。第一个意味着，你想要*任何* `2.1.*`版本。您可以将其更改为

```
"symfony/symfony": "2.1.0-BETA4" 
```

如果你愿意，但原件`2.1.*`现在应该足够了。现在打电话

```
php composer.phar update 
```

这也将更新`composer.lock`。现在你可能必须打电话（必须说：我忘记了）打电话

```
php composer.phar install 
```

安装依赖项`composer.lock`。

简而言之：

```
# To install (maybe even after update)
$ php composer.phar install
# To update 
$ php composer.phar update
# To add, remove or change dependencies
# edit composer.json
$ php composer.phar update 
```

你永远不需要触摸`composer.lock`自己，也不应该避免作曲家的副作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T18:19:26.010

在 symfony2 根文件夹中下载作曲家：

```
curl -s https://getcomposer.org/installer | php 
```

并执行

```
php composer.phar self-update
php composer.phar update 
```

如果您可以更新到最新版本，请使用此选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:13:25.917

除了@KingCrunch 告诉您的内容之外，可能还有其他事情要做，例如 Doctrine 的命名空间已更改，配置文件（security.yml、config.yml）中的某些节点已从 2.0.* 更改为 2.1.*

您应该阅读 symfony2 github 存储库上的此[自述](https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md)文件，因为它详细解释了 sf 2.0 和 sf 2.1 之间的变化

# c# - 循环通过一组图像资源 (.resx)

> ID：11630398
> 
> 赞同：2
> 
> 时间：2012-07-24T11:59:24.627
> 
> 标签：c#, resources, resx

我在单独的 .resx 文件中有 3 组 9 张图像，我试图弄清楚如何将一组图像循环成 9 个静态图片框。

[循环遍历 .resx 文件中的所有资源](https://stackoverflow.com/questions/2041000/loop-through-all-the-resources-in-a-resx-file)

我浏览了上面链接中的一些解决方案，例如 using `ResXResourceReader`，但是当我使用该`GetEnumerator`方法时会出现解析错误。

当我使用该行时，类内`ResourceSet resourceSet = MyResourceClass.ResourceManager.GetResourceSet(CultureInfo.CurrentUICulture, true, true);`没有定义，或者当我创建自己的.`ResourceManager``Form``GetResourceSet``ResourceManager`

实际上有一个`CreateFileBasedResourceManager`我已经涉足过的方法，但说实话，除了目录之外，我不太了解它需要的参数。

我还查看了一些涉及程序集和在运行时检索正在执行的图像程序集的解决方案，但我认为目前这有点超出我的深度。

谁能告诉我前两种方法做错了什么或者完全不同的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:09:12.750

查看 MSDN，您应该能够像这样迭代 RESX 文件中的值：

```
string resxFile = @".\CarResources.resx";

// Get resources from .resx file.
  using (ResXResourceSet resxSet = new ResXResourceSet(resxFile))
  {
     // Retrieve the image.
     Object image =  resxSet.GetObject("NAMEOFFILE", true);
  } 
```

如果您想迭代 RESX 文件中的所有对象，您可以执行以下操作：

```
using (ResXResourceReader resxReader = new ResXResourceReader(resxFile))
  {
     foreach (DictionaryEntry entry in resxReader) {
        // entry.Key is the name of the file
        // entry.Value is the actual object...add it to the list of images you were looking to keep track of
     } 
  } 
```

更多可以在[这里](http://msdn.microsoft.com/en-us/library/gg418542.aspx)找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-16T17:24:31.360

我知道这是一个老问题，但今天我遇到了同样的问题，并解决了设置 BasePath 属性，如下所示：

```
oResReader = new ResXResourceReader(strInputFile);
oResReader.BasePath = Path.GetDirectoryName(strInputFile); 
```

我在[这里找到了这个解决方案](http://social.msdn.microsoft.com/Forums/vstudio/en-US/876b0194-a6cf-4d66-a7c2-491847c9006c/resource-file-loading-fails-with-resxresourcereader)

# c# - 动态改变列名

> ID：11630403
> 
> 赞同：1
> 
> 时间：2012-07-24T11:59:47.177
> 
> 标签：c#, asp.net, telerik-grid

我正在使用`rad:radgrid`数据网格控件。我需要动态更改列标题文本。

我尝试`rgGrid.Columns[0].HeaderText = "Id"`了，它适用于`GridBoundColumn`，但现在我需要做同样的事情，`GridButtonColumn`但它不起作用

我也尝试：

```
<rad:GridButtonColumn HeaderText="<%= stringText %>" > 
```

但它不起作用，因为 rad 控件不允许使用 <% %>。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:54:20.200

我在这里猜测，但由于所有 WebControls 都允许设置 ID，然后通过 ID 调用控件，因此您可以：

```
<rad:GridButtonColumn ID="MyGridButtonColumn"> 
```

然后在 CodeBehind 中：

```
MyGridButtonColumn.MyHeaderText = stringText; 
```

# php - 检查时间戳列表在一天中的 12 到 1 之间

> ID：11630405
> 
> 赞同：0
> 
> 时间：2012-07-24T11:59:51.283
> 
> 标签：php

我有一个代表备份文件列表的时间戳列表。但是为了减少所需的空间量，我只想保留从中午开始的文件——我已经开始编写函数检查，但是卡在了如何检查当天的时间戳是否在 12 到 1 之间？我有很多天的时间戳列表。

```
function check_date($timestamp='')
{
    if (($timestamp < strtotime("-1 week")) && (time is between 12 and 1 )){

    }    
    else
        remove 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:02:25.847

我之前写过一个答案，当我有空时，我会尝试在一分钟内找到一个链接，但基本上得到 12 的时间戳和 1 的时间戳

```
if(timestamp12 < curTimestamp && curTimestamp < timeStamp1) 
```

然后你知道 curTimeStamp 在 12 和 1 之间。

上一个答案[https://stackoverflow.com/a/11578345/1475461](https://stackoverflow.com/a/11578345/1475461)

另一个问题是关于 javascript 的实现，但无论您使用的是 PHP、javascript 等，时间戳比较的工作方式都是一样的，因为它们是自设定时间点（1970 年 1 月 1 日）以来的毫秒/秒，所以它只是整数的比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:05:33.020

好吧，让我想想……啊，就是这样。好旧的“本地时间”功能。 [http://www.php.net/manual/de/function.localtime.php](http://www.php.net/manual/de/function.localtime.php)

通过这个函数运行你的时间戳，然后你可以检查结果。

```
$TimeInfo = localtime(timestamp, true);
if (($timestamp < strtotime("-1 week")) && $TimeInfo["tm_hour"] == 12) {

}    
else remove 
```

使用此代码，在 12:00 到 12:59（本示例中不包括 1）到达的所有文件都将被保留，其他文件将被删除。

# zend-framework - Zend 表格中的表格

> ID：11630406
> 
> 赞同：0
> 
> 时间：2012-07-24T12:00:00.460
> 
> 标签：zend-framework, html-table, zend-form

我遇到了一个本来很容易解决的小问题，但由于使用 Zend 框架，它变得有点复杂。

这是情况和问题：我从数据库中加载了一些数据，这些数据显示在表格中。除此之外，我还有一个表单，其中包含一些用于过滤数据的字段。

通常我会通过在表单标签中添加表格来解决这个问题，但是我们现在使用的是 Zend 表单，事情变得不那么容易了。

所以基本上我想要实现的是以下几点：

```
<table>
<tr><td> Column 1 </td><td> Column 2 </td><td> Column 3 </td></tr>
<tr><td> Filter 1 </td><td> Filter 2 </td><td> Filter 3 </td></tr>
<tr><td> Data     </td><td> Data     </td><td> Data     </td></tr>
<tr><td> Data     </td><td> Data     </td><td> Data     </td></tr>
<tr><td> Data     </td><td> Data     </td><td> Data     </td></tr>
<tr><td> Data     </td><td> Data     </td><td> Data     </td></tr>
<tr><td> Data     </td><td> Data     </td><td> Data     </td></tr>
</table> 
```

我怎样才能做到这一点？任何建议将被认真考虑 ：）

# sql-server - 关于 C# 中 PK 的一些愚蠢情况：MVC3 无法插入具有传递 PK 的新记录并尝试插入 NULL 作为主键

> ID：11630411
> 
> 赞同：0
> 
> 时间：2012-07-24T12:00:25.497
> 
> 标签：sql-server, asp.net-mvc, primary-key, dbset

再会。我有 MSSQL2008 数据库。我为现有表之一（VLAN）制作了一个合适的模型。

```
public DbSet<VLAN> VLANs { get; set; } 
```

VLAN 模型具有以下字段：

```
[Key][Required]
public int VLAN_ID { get; set; } //in the "VLAN" table it is PK
... 
```

然后我尝试插入一个新值

```
_db.VLANs.Add(VLANToEdit); //<-- Here VLANToEdit has VLANToEdit.VLAN_ID == 144\. No such data in the table
_db.SaveChanges(); //<--Here I got an exception. 
```

MSSQL 不能将 NULL 值插入 VLAN_ID 字段。但为什么？我传递了一个实值但为空？怎么了？我收到以下消息：

> “无法将值 NULL 插入 'VLAN_ID' 列，表 'VMMExt.dbo.VLANs'；列不允许空值。INSERT 失败。\r\n语句已终止。” 细绳

如果我删除 [Key] 属性，我会在其他地方收到关于 VLAN 表中缺少关键字段的错误。

如何解决这个问题并强制插入提供的主键值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:12:33.180

感谢本站深度搜索！我在这里找到它：[C# .NET 4.0 MVC Inserting a record with primary key](https://stackoverflow.com/questions/6748952/c-sharp-net-4-0-mvc-inserting-a-record-with-primary-key)

所需要的只是在模型中添加一个属性：[DatabaseGenerated(DatabaseGeneratedOption.None)]

你可以删除我的问题。谢谢！

# linux - PHPMyadmin xampp 错误

> ID：11630412
> 
> 赞同：17
> 
> 时间：2012-07-24T12:00:29.607
> 
> 标签：linux, ubuntu, phpmyadmin, xampp

我正在拼命地尝试在 xampp for linux 1.8.0 for ubuntu 12.04 LTS 上获得 phpmyadmin 访问权限。我知道这是一个常见问题，但我已经尝试了网络上的许多线程，但我仍然坚持下去。

Xampp 似乎运行正常，localhost 起始页很好，包括侧边栏中的 phpmyadmin 链接。当我点击该链接时，我收到 403 错误：

> 禁止访问！
> 
> 新的 XAMPP 安全概念：
> 
> 只能从本地网络访问请求的目录。
> 
> 可以在文件“httpd-xampp.conf”中配置此设置。
> 
> 如果您认为这是服务器错误，请联系网站管理员。
> 
> 错误 403
> 
> 本地主机 Apache/2.4.2 (Unix) OpenSSL/1.0.1c PHP/5.4.4

我尝试了很多东西，包括修改 httpd-xampp.conf，其相关部分现在看起来像：[http ://pastebin.com/J4f4tNVs](http://pastebin.com/J4f4tNVs)

我的 /opt/lampp/phpmyadmin/config.inc.php 看起来像：[http ://pastebin.com/5PZPXK5s](http://pastebin.com/5PZPXK5s)

按照其他说明，我更改了 /lampp 的所有权：

```
chown -Rv nobody:root ./lampp/* 
```

请帮我！

谢谢，马特

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-24T14:59:11.157

我在这里找到了解决方案：http: [//www.apachefriends.org/f/viewtopic.php?f=17&t=50902 &p=196185#p196185](http://www.apachefriends.org/f/viewtopic.php?f=17&t=50902&p=196185#p196185)

编辑 /opt/lampp/etc/extra/httpd-xampp.conf 并在块底部添加**要求所有已授予**`<Directory "/opt/lampp/phpmyadmin">`的行以具有以下代码：

```
<Directory "/opt/lampp/phpmyadmin">
  AllowOverride AuthConfig Limit
  Order allow,deny
  Allow from all
  Require all granted
</Directory> 
```

# bash - Bash 脚本；给程序标准输入命令

> ID：11630413
> 
> 赞同：2
> 
> 时间：2012-07-24T12:00:30.353
> 
> 标签：bash, scripting, sh, chroot

我对 bash 脚本非常陌生。我有以下脚本：

```
cp /etc/apt/sources.list /var/chroot/etc/apt/sources.list
chroot /var/chroot/
apt-get update
apt-get --simulate install $a > output 
```

我实际上希望最后 2 个命令在 chroot 环境中运行，但我不知道如何给它，我搜索但找不到。我还希望 chroot 在执行命令后退出，但它目前挂起。我能做些什么来防止这种情况发生？

**编辑：**对于未来的访客：

```
cp /etc/apt/sources.list /var/chroot/etc/apt/sources.list
chroot /var/chroot apt-get update > /dev/null
chroot /var/chroot apt-get --simulate install nodejs 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:04:26.633

您要在`chroot`环境中运行的命令必须`chroot`作为参数给出。请参阅[手册页](http://linux.die.net/man/1/chroot)。

# .net - NuGet 的还原包坚持特定的包版本

> ID：11630414
> 
> 赞同：19
> 
> 时间：2012-07-24T12:00:31.067
> 
> 标签：.net, nuget, nuget-package

我有一个包含以下 packages.config 的项目：

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="Framework.Infrastructure.Core" version="1.4.0.6" />
  <package id="Framework.Infrastructure.Extensions" version="1.4.0.6" />
</packages> 
```

Framework.* 包位于我们本地存储库中的位置。

我已启用包还原并将我们的内部存储库添加到源中。但是，当我尝试从 packages.config 恢复包时（实际上是这样`nuget install packages.config -sources....`），我收到以下错误：

```
error : Unable to find version '1.4.0.6' of package 'Framework.Infrastructure.Extensions'
error : Unable to find version '1.4.0.6' of package 'Framework.Infrastructure.Core'. 
```

存储库不再包含包的**1.4.0.6**版本（几个月前相关），而是包含它的新版本（例如，**1.5.1.6**）。

为什么 NuGet 找不到包的新版本？我可以在 packages.config 中指定一些语法以确保下载最新版本吗？

简而言之，除了编写自定义脚本来更新我可以做的包之外还有什么？

谢谢你。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-24T14:32:31.037

我认为有些人误解了包还原的目的。将此功能添加到 NuGet 只是为了不需要将包签入版本控制。很多人抱怨提交二进制文件会爆炸性地增加存储库的大小，使用 git 之类的 DVCS 时更糟，其中整个 repo 都在本地下载并包含包 Foo 的每个版本。

那么 Package Restore 到底是做什么的呢？基本上，它在每个项目的 packages.config 中查找，并简单地拉下列出的包的特定版本。这就像删除您的包文件夹，然后`git reset --hard`将它们带回来（假设该文件夹已签入）。

为什么这很重要？为什么不升级到最新的软件包版本？如果您考虑包还原最常见的用例，即进行自动构建，那应该会给您一个线索。构建服务器应该只构建由开发人员测试和提交的项目。如果您让构建服务器决定何时更新包，那么您的项目还没有经过任何人的测试。作为开发人员，您应该决定何时进行升级。

请记住，安装或更新软件包不仅仅是拉下 .nupkg 文件并添加引用。许多软件包都有副作用，例如更新 .config 文件、添加代码等。安装软件包时，所有这些副作用都会发生在本地副本上。您现在可以提交代码并排除包文件。

当另一个开发人员或构建服务器签出代码时，他将获得与您完全相同的副作用代码，但减去了包文件。包还原只是从 NuGet 存储库中提取这些文件，现在我们拥有了处理该项目所需的一切。

NuGet 团队已承诺维护所有版本的包，以便您始终能够下载正确的版本。然而，正如我们在几个月前看到的那样，当 NuGet 服务器出现故障时，它几乎削弱了 Package Restore 并且很多人无法构建。

我建议你设置你自己的 NuGet 存储库（一个简单的文件共享就可以了）并保留你在那里使用的所有包的副本。这样，您的构建就不会依赖外部服务器。正如 NuGet 团队所做的那样，您应该保留包的所有版本。这样，如果您必须返回并构建项目的旧版本，您将确保有正确的包版本可用。

我希望这能解释该功能的工作原理以及它为何如此工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-02T23:07:34.290

我建议您阅读[有关版本控制的 NuGet 文档](http://docs.nuget.org/docs/reference/versioning)。它解释了如何在文件中使用版本号（和范围）`packages.config`以允许[`Update-Package`](http://docs.nuget.org/docs/start-here/using-the-package-manager-console#Updating_a_Package)命令知道升级到哪些可接受的版本。

话虽如此，包还原功能**不会**自动为您更新包。

有了这些信息，IMO 的最佳工作流程是：

*   安装您正​​在添加的任何新依赖项的最新、稳定版本，除非您*确实*需要较旧（或预发布）版本
*   在您的 CI 构建中使用包还原，允许您**不**将 NuGet 包签入到您的 VCS
*   只有`Update-Package`当...
    *   您需要来自最新版本的新 API 调用或错误修复
    *   你有一个很棒的测试套件来增强信心
    *   你有时间处理潜在的后果

我不鼓励*仅仅因为*. 如果旧依赖项运行良好，最好让项目按原样运行，因为更新任何包的版本时存在风险。

NuGet 包应该遵循[语义版本控制](http://semver.org/)，它具有允许最轻松的包升级体验的良好规则，但因为这不是强制执行的（相信我，许多包发布者不遵循 SemVer），你不能依赖它。即使一个包的更新只增加了一个小版本，你也不能确定（没有足够的测试）新版本可以与你的代码一起工作。

总之，*自动*升级任何软件包通常不是一个好主意。最好让开发人员明确地选择更新任何给定的包，并且仅出于足够好的理由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:03:18.337

如果您只是从 nuget 中删除并重新安装包，则版本属性将引用最新版本。

您可能需要手动编辑 packages.config 以在从 nuget 重新安装之前删除旧参考（因为我最近遇到了一种情况，nuget 不允许我安装新包，因为它认为我有旧包存在)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T05:22:30.783

万一有人遇到这种情况，我编写了一个 PowerShell 模块并将其包装在一个 NuGet 包中，用户需要在创建模板时运行该包。该脚本遍历解决方案中的每个 C# 项目，找到其“packages.config”（如果有），然后删除并重新安装其中提到的每个包。

显然，无论是在一般方法方面还是在小错误方面（例如，安装部分中的 nuget 命令不会在全名中有空格的解决方案上运行），都有很大的改进空间，但这是一个开始。

文件**NuGet-RestorePackagesInAllProjects.psm1**

```
$NuGetSources = "https://nuget.org/api/v2/;" # put your internal sources here as needed

function NuGet-RestorePackagesInAllProjects {
    # get the solution directory
    $solutionDir = (get-childitem $dte.Solution.FullName).DirectoryName

    # for each C# project in the solution, process packages.config file, if there is one
    $dte.Solution.Projects | Where-Object { $_.Type -eq "C#" } | ForEach-Object {
        $currentProject = $_
        $currentProjectName = $currentProject.ProjectName
        $currentProjectDir = (get-childitem $_.FullName).DirectoryName

        Write-Host ******* Starting processing $currentProjectName

        # get the packages.config file for the current project
        $packagesFile = $currentProject.ProjectItems | Where-Object { $_.Name -eq "packages.config" }

        # if there's no packages.config, print a message and continue to the next project
        if ($packagesFile -eq $null -or $packagesFile.count -gt 1) { 
            write-host ------- Project $currentProjectName doesn''t have packages.config
            return 
        }

        # read the contents of packages.config file and extract the list of packages in it
        $fileName = $currentProjectDir + "\packages.config"
        [xml]$content = Get-Content $fileName
        $packageList = $content.packages.package | % { $_.id }

        # for each package in the packages.config, uninstall the package (or simply remove the line from the file, if the uninstall fails)
        $packageList | ForEach-Object {
            $currentPackage = $_

            write-host Uninstalling $currentPackage from $currentProjectName

            try {
                Uninstall-Package $currentPackage -ProjectName $currentProjectName -RemoveDependencies -Force
            }
            catch {
                write-host '!!!!!!! $_.Exception.Message is' $_.Exception.Message
                $node = $content.SelectSingleNode("//package[@id='$currentPackage']")
                [Void]$node.ParentNode.RemoveChild($node)
                $content.Save($fileName)
            }
        }

        # download each package into the $(SolutionDir)packages folder, and install it into the current project from there
        $packageList | ForEach-Object {
            $currentPackage = $_
            $localPackagesDir = $solutionDir + "\packages"
            $cmd = $solutionDir + "\.nuget\nuget.exe install " + $currentPackage + " -Source """ + $NuGetSources +  """ -o " + $localPackagesDir

            write-host Installing $currentPackage to $currentProjectName
            invoke-expression -command $cmd
            Install-Package $currentPackage -ProjectName $currentProjectName -Source $localPackagesDir
        }

        Write-Host ******* Finished processing $currentProjectName
    }
}

Export-ModuleMember NuGet-RestorePackagesInAllProjects 
```

文件**init.ps1**

```
param($installPath, $toolsPath, $package)

Import-Module (Join-Path $toolsPath NuGet-RestorePackagesInAllProjects.psm1)

Enable-PackageRestore

NuGet-RestorePackagesInAllProjects 
```

包的**.nuspec**文件

```
<?xml version="1.0" encoding="utf-16"?>
<package xmlns="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd">
    <metadata>
        <id>NuGet-RestorePackagesInAllProjects</id>
        <version>0.5.0</version>
        <title>Custom NuGet Package Restore</title>
        <authors>Me (c) 2012</authors>
        <owners />
        <requireLicenseAcceptance>false</requireLicenseAcceptance>
        <description>Restore all packages in a given solution from packages.config in each project. For each packages.config, uninstalls all packages and then re-install them again from the sources specified in the script.</description>
        <dependencies>
            <dependency id="NuGetPowerTools" />
        </dependencies>
    </metadata>
    <files>
        <file src="init.ps1" target="tools\init.ps1" />
        <file src="NuGet-RestorePackagesInAllProjects.psm1" target="tools\NuGet-RestorePackagesInAllProjects.psm1" />
    </files>
</package> 
```

# sockets - php cli udp 服务器套接字

> ID：11630418
> 
> 赞同：0
> 
> 时间：2012-07-24T12:00:44.060
> 
> 标签：sockets, tcp, udp, php

下面的代码是我的**PHP CLi TCP 服务器套接字** ，但我尝试制作**TCP 和 UDP 套接字服务器**或只是**udp 服务器**，但我不知道如何制作

***我的代码：***

```
// PHP SOCKET SERVER
error_reporting(E_ERROR);
// Configuration variables
$host = "192.168.0.1";
$port = 5009;
$max = 20;

// MySQL Database Conf
$db_host ='localhost';
$db_user ='root';
$db_pass ='5222348';
$db_database ='gps';

mysql_connect("$db_host", "$db_user", "$db_pass")or die("################# Can't connet to mysql server");
mysql_select_db("$db_database")or die("################# Can't connet to database");

// --------------------------------
$client = array();

// No timeouts, flush content immediatly
set_time_limit(0);
ob_implicit_flush();

// Server functions
function rLog($msg){
             $msg = "\n[".date('Y-m-d H:i:s')."]:".$msg;
             echo($msg);

}
// Create socket
// $sock = socket_create(AF_INET,SOCK_DGRAM,0) or die("[".date('Y-m-d H:i:s')."] Could not create socket\n");  UDP communication
$sock = socket_create(AF_INET,SOCK_STREAM,0) or die("[".date('Y-m-d H:i:s')."] Could not create socket\n");
// Bind to socket
socket_bind($sock,$host,$port) or die("[".date('Y-m-d H:i:s')."] Could not bind to socket\n");
// Start listening
socket_listen($sock) or die("[".date('Y-m-d H:i:s')."] Could not set up socket listener\n");

rLog("
Server started at ".$host.":".$port."\nrev:23-7-11:13");
// Server loop
while(true){
             socket_set_block($sock);
             // Setup clients listen socket for reading
             $read[0] = $sock;
             for($i = 0;$i<$max;$i++){
                          if($client[$i]['sock'] != null)
                                       $read[$i+1] = $client[$i]['sock'];
             }
             // Set up a blocking call to socket_select()
             $ready = socket_select($read,$write = NULL, $except = NULL, $tv_sec = NULL);
             // If a new connection is being made add it to the clients array
             if(in_array($sock,$read)){
                          for($i = 0;$i<$max;$i++){
                                       if($client[$i]['sock']==null){
                                                    if(($client[$i]['sock'] = socket_accept($sock))<0){
                                                                 rLog("socket_accept() failed: ".socket_strerror($client[$i]['sock']));
                                                    }else{
                                                                 socket_getpeername($client[$i]['sock'], $address, $port);
                                                                 rLog("Client #".$i." connected from : ".$address.":".$port."");
                                                    }
                                                    break;
                                       }elseif($i == $max - 1){
                                                    rLog("Too many clients");
                                       }
                          }
                          if(--$ready <= 0)
                          continue;
             }
             for($i=0;$i<$max;$i++){
                          if(in_array($client[$i]['sock'],$read)){
                                       $input = socket_read($client[$i]['sock'],1024);
                                       if($input==null){
                                                    unset($client[$i]);
                                       }
                                       $n = trim($input);
                                       $com = split(" ",$n);
                                       if($n=="EXIT"){
                                                    if($client[$i]['sock']!=null){
                                                                 // Disconnect requested
                                                                 socket_close($client[$i]['sock']);
                                                                 unset($client[$i]['sock']);
                                                                 rLog("Disconnected(2) client #".$i);
                                                                 for($p=0;$p<count($client);$p++){
                                                                              socket_write($client[$p]['sock'],"DISC ".$i.chr(0));
                                                                 }
                                                                 if($i == $adm){
                                                                              $adm = -1;
                                                                 }
                                                    }
                                       }elseif($n=="TERM"){
                                                    // Server termination requested
                                                    socket_close($sock);
                                                    rLog("Terminated server (requested by client #".$i.")");
                                                    exit();
                                       }elseif($input){

                                                    // ----------------------------------------- //
                                                    // $handle = fopen('inbox.txt', 'a+');
                                                    // fwrite($handle, 
                                                        // $input."\n".
                                                        // "------------------------------------------------------------\n");
                                                    // ########################################################################################### //
                                                    // $input  = "$POS,115316,160137.000,A,2719.9343,N,05310.5553,E,0.00,,180712,,,A/00000,00000/0,0,0,0/794"; // Sample Data
                                                    $input_first = explode(",", $input);

                                                    $frstvalue=$input_first[0];  // $POS            -   Command

                                                    echo $input;
                                                            $handle = fopen('force.log', 'a+');
                                                            fwrite($handle, 
                                                                "Time:[".date('Y-m-d H:i:s')."] , from : ".$address.":".$port."\ninput: ".$input."\n".
                                                                "-------------------------------------------------------------------------------------\n");
                                                    ###########################
                                       }
                          }else{

                                       //}
                          }
             }
}
// Close the master sockets
socket_close($sock); 
```

以上代码在 TCP 连接上完美运行，但无法发出 UDP 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:19:00.983

UDP，作为一种数据报传输，与 TCP 有点不同：

*   删除对 的调用`socket_listen`，它不适用于 UDP。
*   删除对 的调用`socket_accept`，相同。
*   用于在循环[`socket_recvfrom`](http://php.net/manual/en/function.socket-recvfrom.php)中接收数据报。`$sock`

也就是说你原来`$sock`是data socket，也就是说你这里只需要一个。

PHP 还提供了可与URL一起使用的简化[`stream_socket_server`](http://php.net/manual/en/function.stream-socket-server.php)界面。`"udp://..."`

# android - 安卓上不同视图的多点触控

> ID：11630419
> 
> 赞同：0
> 
> 时间：2012-07-24T12:00:49.077
> 
> 标签：android, multi-touch, ontouchlistener

如果我的视图中有两个按钮，并且我想同时为这两个按钮启用 OntouchListener，我的意思是触摸第一个按钮开始一项任务，按住第一个按钮触摸第二个按钮开始另一项任务。怎么做？等待帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T12:10:43.690

您可以将 onTouchListener 添加到将处理多点触摸的该视图。

```
 @Override
public boolean onTouch(View v, MotionEvent event) {
    switch(event.getAction() & MotionEvent.ACTION_MASK) {

    case MotionEvent.ACTION_DOWN:
        //first finger went down
        break;

    case MotionEvent.ACTION_MOVE:
        //a touch placement has changed
        break;

    case MotionEvent.ACTION_UP:
        //first finger went up
        break;

    case MotionEvent.ACTION_CANCEL:
        //gesture aborted (I think this means the finger was dragged outside of the touchscreen)
        break;

    case MotionEvent.ACTION_POINTER_DOWN:
        //second finger (or third, or more) went down.
        break;

    case MotionEvent.ACTION_POINTER_UP:
        //second finger (or more) went up.
        break;

        default: break;
    }
    return true;
} 
```

检查您的按钮是否在各自的案例中被点击。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T05:30:23.143

试试下面的代码片段。

```
@Override
public boolean onTouch(View v, MotionEvent event) {
switch(event.getAction() & MotionEvent.ACTION_MASK) {

case MotionEvent.ACTION_DOWN:
    //first finger went down
    break;

case MotionEvent.ACTION_MOVE:
    //a touch placement has changed
    break;

case MotionEvent.ACTION_UP:
    //first finger went up
    break;

case MotionEvent.ACTION_CANCEL:
    //gesture aborted (I think this means the finger was dragged outside of the touchscreen)
    break;

case MotionEvent.ACTION_POINTER_DOWN:
  if(mFirstButton.isPressed() && mSecondButton.isPressed())
   {// your code.}
    break; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T12:13:48.247

所以我不确定你想要完成什么，但你有类似的东西：

```
private boolean mFirstButtonDown = false;

@Override
public boolean onTouchEvent(MotionEvent event){
    // first button onTouchEvent
    switch (event.getAction()){
       case MotionEvent.ACTION_DOWN:
                            mFirstButtonDown = true;
            break;
       case MotionEvent.ACTION_UP:
                            mFirstButtonDown = false;
            break;
    }
   ....
} 
```

对于第二个按钮，只需检查它是否仍被按住：

```
 @Override
 public boolean onTouchEvent(MotionEvent event){
   switch (event.getAction()){
       case MotionEvent.ACTION_DOWN:
         if (mFirstButtonDown && (event.getPointerCount() > 1)) {
             // do task
     }
 } 
```

要同时触摸 2 个按钮使用多指针（或多点触摸），您可以在这篇文章中找到更多详细信息： [Android 2.x 的多个按钮按下](https://stackoverflow.com/questions/2528160/multiple-button-presses-for-android-2-x)

另一篇可以帮助你理解多指针的好文章是关于 Android 开发者的： [http ://android-developers.blogspot.ro/2010/06/making-sense-of-multitouch.html](http://android-developers.blogspot.ro/2010/06/making-sense-of-multitouch.html)

上面的代码未经测试，它应该只是给你一个想法:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T12:13:25.387

您可以`OnTouchListener`向两个按钮添加两个单独的 s，并在 中用两个布尔值指示按钮的触摸状态，或者您可以向父级`Activity`添加一个，并将 中的指针的触摸坐标与两个 Buttons'进行比较坐标。`OnTouchListener``View``MotionEvent`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-21T17:21:26.337

这很简单 @Override public boolean onTouch(View v, MotionEvent arg1) { switch (v.getId()) { case R.id.button1:
if(arg1.getAction()==MotionEvent.ACTION_DOWN) { //你的事件}休息；case R.id.button2: if(arg1.getAction()==MotionEvent.ACTION_DOWN) { //你的事件 } break; 默认值：中断；} 返回真；}

# javascript - 对多维度数组进行排序

> ID：11630422
> 
> 赞同：1
> 
> 时间：2012-07-24T12:00:54.270
> 
> 标签：javascript, sorting

我有以下 JavaScript 数组，

```
var myArr= [{
    "key" : "Consumer Discretionary",
    "values" :[ 
               [1146369600000, 26.425199957521],
               [1138683600000, 27.38478809681],
               [1141102800000, 27.371377218208], 
               [1143781200000, 26.309915460827] 
              ]}, 
    {
     "key" : "Consumer Staples",
     "values" :[
                [1159588800000, 7.2800122043237], 
                [1141102800000, 7.1187787503354], 
                [1167541200000, 8.351887016482], 
                [1146369600000, 8.4156698763993]
              ]}
     ]; 
```

如何按升序对“key”Consumer Discretionary 和 Consumer Staples 的“值”进行排序，使其看起来像

非必需消费品：-

```
[1138683600000, 27.38478809681] 
[1141102800000, 27.371377218208] 
[1143781200000, 26.309915460827]
[1146369600000, 26.425199957521] 
```

对此有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:07:48.237

Try the following:

```
function valuePredicate(a,b){
    return a[0]!==b[0] ? a[0]-b[0] : a[1]-b[1];
}

for(var i=0; i < myArr.length;++i){
    myArr[i].values.sort(valuePredicate);
} 
```

[Live demo](http://jsfiddle.net/fVPBf/)

# quickfix - 固定变压器

> ID：11630424
> 
> 赞同：0
> 
> 时间：2012-07-24T12:00:59.287
> 
> 标签：quickfix

1.  我们需要编写一个转换器，将 FIX 格式转换为业务特定的规范格式，反之亦然。如果我看到 FIX4.2 的 quickfixj 引擎，收到的应用程序消息是 java 对象形式的 - quickfix.fix42.NewOrderSingle，所以转换器可能应该在规范对象中使用 getfields 和 setfields 或使用 beanutil、dojo 映射..... FIXML 出现？？？？我们不需要知道 xsd 和 xml 格式 - 以对象格式接收信息。FIX5.0 也一样吗？？或者我们是否需要编写解析器（JAXB）来处理 xml 格式或信息总是以对象格式接收？

2.  FIX 4.x 和 FIX 5.0 有什么区别？什么构成会话和应用层？

3.  任何关于 FIX 引擎的高可用性和性能的好网站？订单状态管理？

谢谢

* * *

谢谢。关于

*   Query1 -> 如果交易对手期望 FIXML 消息，FIX 引擎如何处理？我们需要对传输层进行哪些设置才能处理 xml 格式？解析和构造 FIXML 消息的最佳方法是什么？是在使用像 JAXB 这样的 xsds 吗？

当我们看到 quickfix -> 当我们扩展类`quickfix.MessageCracker`实现 时`quickfix.Application`，方法签名

`public void onMessage(quickfix.fix42.NewOrderSingle order, SessionID sessionID) throws FieldNotFound, UnsupportedMessageType, IncorrectTagValue`

以对象格式显示->`quickfix.fix42.NewOrderSingle`

*   关于 Query3-> 任何用于性能测量、高可用性、FIX 托管网络拓扑的好站点？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:26:37.853

1) 如果您的交易对手不向您发送 FIXML 消息，您不需要处理 FIXML 消息，如果他们需要处理它们或决定忽略/拒绝它们。您如何处理它应该在您与对手方的用户级别协议中。FIX4.2 与 FIX5.0 没有太大区别，不像苹果和橘子。Quickfix 确实需要用于消息配置的 XML 配置文件。

2)[标准规格。](http://fixprotocol.org/specifications/)您不需要知道您正在处理的消息的所有差异。许多人确实添加了自己的自定义字段。

3）商业和内部 FIX 引擎无疑会比 Quickfix 更高效，因为它涉及金钱和人员。但是，您必须为它们付费。如果不使用所有 FIX 引擎，很难比较不同的 FIX 引擎或对它们进行基准测试。主要因素是您将如何使用它。你永远不会在不改变它的情况下使用 Quickfix 进行算法交易，因此使用是至关重要的。因此，任何基准数据都应该加一点盐。

# php - Mod重写谷歌索引上的404

> ID：11630426
> 
> 赞同：1
> 
> 时间：2012-07-24T12:01:12.367
> 
> 标签：php, url, mod-rewrite, uri

我的 url 是`site.com/nl/url-rewrite/categorie-1`
我的 mod 重写规则是：

```
# Rewrite taxonomy URLs
#   Input:  LANG/url-rewrite/TERM
#   Output: url_rewrite.php?term=TERM
RewriteRule ^.{2}/url-rewrite/([A-Za-z0-9-]+)/?$ /url_rewrite.php?term=$1 [L]
#   Input:  LANG/url-rewrite
#   Output: url_rewrite.php
RewriteRule ^.{2}/url-rewrite/?$ /url_rewrite.php [L] 
```

这很好用（不确定第二条规则是否是解决这个问题的最佳方法）

现在我也会在 google 中获得一个链接`site.com/nl/url-rewrite/categorie-1`
'categorie-1' 是我的类别的 seo 友好别名

如果我的类别标题也更改为“Categorie 2”，我的别名将是“categorie-2”（自动别名）

谷歌中的这个链接`site.com/nl/url-rewrite/categorie-1`现在不起作用
我该如何解决这个问题？
我以前用过 id，所以我的链接是`site.com/nl/url-rewrite/1/categorie-1`
但是看起来不太好，我不希望 url 中有任何 id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T17:22:50.317

当您更改标题时，您需要将旧 URL 301 重定向到新 URL。您可以通过在更改时进行内部跟踪并让 url_rewrite.php 脚本将浏览器重定向到`site.com/nl/url-rewrite/categorie-2`当它看到有人尝试访问时`categorie-1`（因为它知道它已被更改）来执行此操作，或者您可以手动添加（在 2 条规则之上您有）手动执行 301 重定向的规则：

```
RedirectMatch 301 ^/?(.{2})/url-rewrite/categorie-1/?$ /$1/url-rewrite/categorie-2/ 
```

301 告诉谷歌与链接相关的所有链接信息`categorie-1`都应该转移到新`categorie-2`链接。您只需要等待搜索引擎在转移发生之前重新索引旧链接，因此您的页面在此之前仍将显示为 404。

# c# - 适用于 Linux 的 Mono VLC API

> ID：11630429
> 
> 赞同：1
> 
> 时间：2012-07-24T12:01:27.807
> 
> 标签：c#, linux, video, mono, libvlc

基本上我正在尝试构建一个使用 VLC 并且能够在 Windows 和 linux 上运行的单声道视频播放器。我在 c# 中找到了一些很好的库，它们可以在 mono 上与 VLC API dll 对话，但这些 dll 在 linux 上不存在，并且查看库代码看起来它们可能只在 Windows 上工作。

linux 上的 VLC dll 是否有任何 c#、单声道包装器？目前我专注于 VLC，因为我需要 Hi10 支持，据我所知，VLC 是具有 API 接口的旧跨平台播放器。这就是说我对想法持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:17:24.987

尝试使用[https://github.com/majorsilence/MPlayerControl](https://github.com/majorsilence/MPlayerControl)，当我使用 Winforms 时它工作正常。但是我没有设法让 GTK# 示例启动并运行......它打开了一个新的 Mplayer 窗口，而不是嵌入到应用程序中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:05:03.960

MPlayer 似乎是一个更好的匹配，而 c# 包装器[MPLayerControl Lib](https://github.com/majorsilence/MPlayerControl)是一个出色的包装器。强烈推荐 MPlayer 给任何尝试类似东西的人。

# android - Toast 未显示 GPS 位置

> ID：11630432
> 
> 赞同：0
> 
> 时间：2012-07-24T12:01:42.223
> 
> 标签：android, location, return, toast

下面代码中的 toast 消息似乎没有显示，我无法确定原因。我错过了一个错误吗？

`MyCurrentLocation`是活动名称

```
public class MyLocationListener implements LocationListener{
    Geocoder gc = new Geocoder(MyCurrentLocation.this.getApplicationContext(), Locale.getDefault());
    public void onLocationChanged(Location loc){

    try{
        loc.getLatitude();
        loc.getLongitude();
        List <Address> addr = gc.getFromLocation(loc.getLatitude(),loc.getLongitude(),1);
        String results = "";
        if (addr.size() > 0){
        results += addr.get(0).getCountryName();
        }
        Toast.makeText(getApplicationContext(),results,Toast.LENGTH_LONG).show();
     } catch(Exception e){

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:28:18.253

尝试使用以下权限：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:26:17.983

请确保您在 Android 清单文件中设置了正确的权限。

GPS 在 Android 2.x 模拟器中无法正常工作。如果可能，请尝试使用 Android 4.0。

此外，最好的选择是使用设备进行测试，GPS 在封闭位置也无法正常工作。

您可以点击以下链接 - [http://www.vogella.com/articles/AndroidLocationAPI/article.html](http://www.vogella.com/articles/AndroidLocationAPI/article.html)

# git - Git-远程：错误：无法运行挂钩/接收后：没有这样的文件或目录

> ID：11630433
> 
> 赞同：35
> 
> 时间：2012-07-24T12:01:42.813
> 
> 标签：git

我得到错误：

```
remote: error: cannot run hooks/post-receive: No such file or directory 
```

尝试推送到远程时。post-receivce 文件存在于正确的位置 (testnew.git/hooks) 并包含：

```
#!/bin/bash2
export GIT_DIR=/var/www/testnew/testnew/.git/
export GIT_WORK_TREE=/var/www/testnew/testnew/
cd /var/www/testnew/testnew/

echo "here we go..."
git fetch
git merge origin/master
git submodule update --init --recursive 
```

我尝试使用以下方法设置接收后权限：

```
chmod a+x post-receive 
```

但这给出了同样的错误。将权限设置为 755 会消除错误，但脚本不会运行。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-24T12:39:32.277

如果`hooks/post-receive`文件存在，标记为可执行，但无法执行，则会发生这种情况。它无法执行，因为解释器`/bin/bash2`, 要么不存在，要么不可执行。

将 bash替换为`/bin/bash2`确实存在且在服务器上可执行的名称。

（错误看起来像这样的原因是，操作系统只返回错误状态“没有这样的文件或目录”，但不报告哪个文件不存在。并且试图执行它的代码不知道系统已经读取`hooks/post-receive`并正在寻找`/bin/bash2`。它所知道的只是它试图运行`hooks/post-receive`，所以这就是它打印的内容）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-11-05T21:43:36.493

此外（供将来参考和有关此问题的文档）如果您要`echo $SHELL`在 shell 中运行，您应该会看到预期的结果，在这种情况下*（基于批准的答案）*，您会期望得到`/bin/bash`结果。但**另一个可能的问题是看不见的回车**。

`hooks/post-receive`如果您仍然遇到问题，请尝试运行，您可能会得到如下响应：

```
-bash: hooks/post-receive: /bin/bash^M: bad interpreter: No such file or directory 
```

这里的关键`^M`是**证明你实际上得到了一个意外的回车**，否则如果它起作用了，你可能会得到一个挂起的响应。

解决这个问题，它应该可以解决您的问题。这样做的方法是使用`dos2unix`，例如：

```
dos2unix .htaccess 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-09T20:27:03.083

检查您是否拥有正确的 775 权限。

对我来说，它通过重做文件夹结构来工作

```
git init --bare 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-01T07:47:47.210

这是我忘记先做造成的`git init`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-19T00:29:48.667

虽然这个问题是几年前提出的，但我觉得我可以为未来的读者添加我的解决方案。在我自己的情况下，以下步骤解决了它：

*   我确信我已经完成了`git init --bare`
*   从我的 bash 控制台，我跑了`which bash`，然后我看到这就`#!/bin/bash`足够了
*   从 bash 控制台，完全知道我在我的裸仓库应用程序文件夹中（相当于`~/bare-repos/mysite.git`，我跑去`hooks/post-receive`看看这是否正常工作。在我自己的情况下，我得到了`bash: hooks/post-receive: /bin/bash^M: bad interpreter: No such file or directory`
*   然后，我知道我遇到了意外的回车，但我不想`dos2unix`在pythonanywhere中使用。
*   我在 pythonanywhere 的编辑器中打开了 post-receive 文件，清除了所有行，然后手动键入了行，而不是复制和粘贴行。
*   再次，从 bash 控制台，完全知道我在我的裸 repo 应用程序文件夹中（相当于`~/bare-repos/mysite.git`，我运行 hooks/post-receive 以查看这是否正常工作。在我自己的情况下，没有抛出错误。
*   我很高兴去。

# asp.net-mvc - Elmah 未在 MVC 应用程序中记录 http 发布请求的异常 - 如果请求包含 XML

> ID：11630435
> 
> 赞同：14
> 
> 时间：2012-07-24T12:01:45.717
> 
> 标签：asp.net-mvc, error-handling, asp.net-mvc-4, elmah

我在 MVC4 (RC) 应用程序中遇到了一个奇怪的问题。（在 .NET 4.0 上运行）

我刚刚设置 Elmah 来记录异常/错误。

我基本上安装了**Elmah.MVC**和**elmah.sqlserver** NuGet 包。（分别为 2.0.0 和 1.2 版本）

它似乎开箱即用 - 我可以转到 elmah 页面并查看错误：

`http://myserver/elmah`

例如，如果我创建了一些 404 错误，它们会出现在此日志中。

不工作的是：我有一个带有`[HttpPost]`动作的标准 MVC 控制器。我已经设置了它，所以它总是会抛出异常：

```
public class TestController : Controller
{
    [HttpPost]
    [ValidateInput(false)]
    public void Testing()
    {
        throw new Exception("uh oh");
    }
} 
```

然后我尝试通过 jQuery 将数据发布到这个控制器：

```
$.post('/Test/Testing', {test_data: 'This is some test data'}); 
```

好的，这行得通。响应返回典型的黄屏死机，错误被捕获并记录在 Elmah 中。

但是，如果我尝试发布类似 XML/HTML 的内容，则错误**不会**记录在 Elmah 中。我仍然从服务器返回相同的响应（黄屏死机），但在 Elmah 中什么也没有。

```
$.post('/Test/Testing', {test_data: '<test><test1>This is some test data</test1></test>'}); 
```

为什么？这没有意义。

请注意，我已经关闭了操作的请求验证。如果我不这样做，那么发布 XML/HTML 数据会导致此异常：

***从客户端检测到潜在危险的 Request.Form 值***

NuGet 也会拒绝记录该异常——我认为这是一个错误：

[http://code.google.com/p/elmah/issues/detail?id=217](http://code.google.com/p/elmah/issues/detail?id=217)

那么我遇到的这个问题的原因是什么？它是与我在上面发现的问题相关的错误吗？

仅仅因为请求包含 XML/HTML，我无法记录异常，这似乎是一种非常不幸的情况。

当然有办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-01T10:48:46.210

默认情况下，ELMAH 不会捕获 HttpRequestValidationException，如果用户发送无效请求，ELMAH 的报告中将忽略该请求。所以也有必要定义和使用这个全局过滤器：

```
public class ElmahRequestValidationErrorFilter : IExceptionFilter
{
    public void OnException(ExceptionContext context)
    {
        if (context.Exception is HttpRequestValidationException)
           ErrorLog.GetDefault(HttpContext.Current).Log(new Error(context.Exception));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T12:24:32.383

我现在有一个解决方法，有人在[http://code.google.com/p/elmah/issues/detail?id=217上提出了建议](http://code.google.com/p/elmah/issues/detail?id=217)

您可以强制 ASP 使用较旧的请求验证逻辑，方法是将其添加到`<system.web>`您的部分`Web.config`：

```
<httpRuntime requestValidationMode="2.0" /> 
```

这将在全球范围内影响应用程序，这并不是一个很好的情况。

如果有人有更好的东西，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-07T15:09:49.943

看起来这是在当前版本（撰写本文时）1.2.2 之后修复的。我最终在日志中明确记录了错误。这不会作为未处理的异常（电子邮件通知等）进行正常处理，但会将其记录到错误日志中。

```
catch (Exception ex)
{
    var newEx = new HttpException(500, "Kaboom!!!", ex);

    // Adding this explicit ELMAH logging because of ELMAH bug:
    // https://code.google.com/p/elmah/issues/detail?id=217
    // Waiting for a new ELMAH release with the fix
    var elmahError = new Elmah.Error(newEx);
    var elmahLog = Elmah.ErrorLog.GetDefault(HttpContext.ApplicationInstance.Context);
    elmahLog.Log(elmahError);

    throw newEx;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-27T23:41:54.680

Elmah 中有一个 bug 不久前已修复，但我认为 google 代码网站上的任何构建都不足以包含它。

正如我在评论中提到的，问题是如果您通过模型（MVC）或控件（Webforms）访问数据，没问题；但是如果你访问 request.Form["inputId"] （Elmah 在构建一个对象时所做的），它每次都会抛出一个异常。

我做了什么：

*   将google代码项目导出到我的github账号
*   使用 VS2013 将新的 repo 克隆到我的工作站
*   选择 NETFX 4.5 构建配置
*   构建解决方案并运行演示
*   通过将以下内容添加到 default.aspx，在演示中测试我的案例：

[![在此处输入图像描述](../Images/73d92f56c1b46618fb359c3e1b975e49.png)](https://i.stack.imgur.com/iEaqv.png)

*   运行一些测试

在我对测试感到满意后，我通过以下方式将新的 dll 添加到我的解决方案中：

*   删除当前 Elmah.dll 引用
*   将 Elmah.dll、Elmah.AspNet.dll 和 AntiXssLibrary.dll 复制/粘贴到我的解决方案中的“lib”文件夹中
*   添加对三个新 dll 的引用
*   更新 web.config 使其看起来像演示的 web.config（事情非常相似，但不同 (Elmah = Elmah.AspNet)）
*   删除 Elmah.mvc 参考（它给我带来了问题）
*   从 FilterConfig 中删除`filters.Add(new HandleErrorAttribute());`（这允许自定义错误继续起作用）

在 Elmah 源码中，关键部分是`request.Unvalidated`在 HttpRequestValidation.cs中的使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-11T09:48:13.597

您可以通过抛出`HttpException`异常而不是正常异常来触发 Elmah。

我们的解决方案是用`try/catch`块包装我们的控制器操作代码，并在`catch`块中将代码抛出的异常包装在 an 中`HttpException`，然后将其抛出。像这样：

```
[HttpPost]
[ValidateInput(false)]
public ActionResult MyAction(FormCollection riskyData)
{
    try
    {
        //... your code here ...
    }
    catch (Exception ex)
    {
        throw new HttpException(500, "Internal Server Error", ex);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-06T09:08:49.563

将以下类添加到您的项目中：

```
public class ElmahErrorLogModuleFix : ErrorLogModule
{
    protected override void LogException(Exception e, HttpContext context)
    {
        if (e == null)
            throw new ArgumentNullException("e");
        ExceptionFilterEventArgs args = new ExceptionFilterEventArgs(e, (object)context);
        this.OnFiltering(args);
        if (args.Dismissed)
            return;
        ErrorLogEntry entry = (ErrorLogEntry)null;
        try
        {
            //FIX STARTS
            //Error error = new Error(e, context);
            Error error = CreateErrorSafe(e, context);
            //FIX ENDS
            ErrorLog errorLog = this.GetErrorLog(context);
            error.ApplicationName = errorLog.ApplicationName;
            string id = errorLog.Log(error);
            entry = new ErrorLogEntry(errorLog, id, error);
        }
        catch (Exception ex)
        {
            Trace.WriteLine((object)ex);
        }
        if (entry == null)
            return;
        this.OnLogged(new ErrorLoggedEventArgs(entry));
    }

    public static Error CreateErrorSafe(Exception e, HttpContext context)
    {
        try
        {
            var safeFormCollection = new NameValueCollection();
            var form = context.Request.Form;
            var additionalMessage = string.Empty;
            foreach (var key in form.AllKeys)
            {
                try
                {
                    safeFormCollection.Add(key, form[key]);
                }
                catch (Exception)
                {
                    safeFormCollection.Add(key, "_invalid input data_");
                    additionalMessage += "Form parameter with name=" + key + " has dangerous value. " + Environment.NewLine;
                }
            }

            //if no invalid values in form then do as elmah does
            if (string.IsNullOrEmpty(additionalMessage))
            {
                return new Error(e, context);
            }

            var exception = new Exception(additionalMessage, e);
            var error = new Error(exception);
            error.HostName = TryGetMachineName(context, null);

            IPrincipal user = context.User;
            if (user != null && NullString(user.Identity.Name).Length > 0)
                error.User = user.Identity.Name;
            HttpRequest request = context.Request;
            //this._serverVariables = Error.CopyCollection(request.ServerVariables);
            error.ServerVariables.Add(CopyCollection(request.ServerVariables));
            if (error.ServerVariables != null && error.ServerVariables["AUTH_PASSWORD"] != null)
                error.ServerVariables["AUTH_PASSWORD"] = "*****";
            error.QueryString.Add(CopyCollection(request.QueryString));
            error.Form.Add(CopyCollection(safeFormCollection));
            error.Cookies.Add(CopyCollection(request.Cookies));
            return error;
        }
        catch (Exception logEx)
        {
            return new Error(new Exception("Error when trying to process error catched by elmah", logEx));
        }
    }

    /// <summary>
    /// Elmah dll method in Environment.cs
    /// </summary>
    /// <param name="context"></param>
    /// <param name="unknownName"></param>
    /// <returns></returns>
    public static string TryGetMachineName(HttpContext context, string unknownName)
    {
        if (context != null)
        {
            try
            {
                return context.Server.MachineName;
            }
            catch (HttpException ex)
            {
            }
            catch (SecurityException ex)
            {
            }
        }
        try
        {
            return System.Environment.MachineName;
        }
        catch (SecurityException ex)
        {
        }
        return NullString(unknownName);
    }

    /// <summary>
    /// Elmah method in Mask.cs
    /// </summary>
    /// <param name="s"></param>
    /// <returns></returns>
    public static string NullString(string s)
    {
        if (s != null)
            return s;
        else
            return string.Empty;
    }

    /// <summary>
    /// Elmah method in Error.cs
    /// </summary>
    /// <param name="collection"></param>
    /// <returns></returns>
    private static NameValueCollection CopyCollection(NameValueCollection collection)
    {
        if (collection == null || collection.Count == 0)
            //FIX HERE: cannot allow reutrn null collection as elmah does, because of exception. fix as below
            //return (NameValueCollection)null;
            return new NameValueCollection();
        //FIX ENDS
        else
            return new NameValueCollection(collection);
    }

    /// <summary>
    /// Elmah method in Error.cs
    /// </summary>
    /// <param name="cookies"></param>
    /// <returns></returns>
    private static NameValueCollection CopyCollection(HttpCookieCollection cookies)
    {
        if (cookies == null || cookies.Count == 0)
            //FIX HERE: cannot allow reutrn null collection as elmah does, because of exception. fix as below
            //return (NameValueCollection)null;
            return new NameValueCollection();
        //FIX ENDS
        NameValueCollection nameValueCollection = new NameValueCollection(cookies.Count);
        for (int index = 0; index < cookies.Count; ++index)
        {
            HttpCookie httpCookie = cookies[index];
            nameValueCollection.Add(httpCookie.Name, httpCookie.Value);
        }
        return nameValueCollection;
    }
} 
```

和

```
public class ElmahErrorMailModuleFix : ErrorMailModule
{
    private bool _reportAsynchronously2;

    protected override void OnInit(HttpApplication application)
    {
        base.OnInit(application);
        IDictionary config = (IDictionary)this.GetConfig();
        if (config == null)
            return;
        _reportAsynchronously2 = Convert.ToBoolean(GetSetting(config, "async", bool.TrueString));
    }

    protected override void OnError(Exception e, HttpContext context)
    {
        if (e == null)
            throw new ArgumentNullException("e");
        ExceptionFilterEventArgs args = new ExceptionFilterEventArgs(e, (object)context);
        this.OnFiltering(args);
        if (args.Dismissed)
            return;
        //FIX STARTS
        //Error error = new Error(e, context);
        Error error = ElmahErrorLogModuleFix.CreateErrorSafe(e, context);
        //FIX ENDS
        if (this._reportAsynchronously2)
            this.ReportErrorAsync(error);
        else
            this.ReportError(error);
    }

    /// <summary>
    /// Elmah method in ErrorMailModule.cs
    /// </summary>
    /// <param name="config"></param>
    /// <param name="name"></param>
    /// <param name="defaultValue"></param>
    /// <returns></returns>
    private static string GetSetting(IDictionary config, string name, string defaultValue)
    {
        string str = ElmahErrorLogModuleFix.NullString((string)config[(object)name]);
        if (str.Length == 0)
        {
            if (defaultValue == null)
                throw new global::Elmah.ApplicationException(string.Format("The required configuration setting '{0}' is missing for the error mailing module.", (object)name));
            str = defaultValue;
        }
        return str;
    }
} 
```

这些类继承`ErrorLogModule`并`ErrorMailModule`重写`Error`创建类的方法，因此`HttpRequestValidationException`不会引发异常。

然后将这些添加到您的 Web.config 中：

```
<add name="ErrorLog" type="YourProject.SomeFolder.ElmahErrorLogModuleFix, YourProject" preCondition="managedHandler" />
<!--and for email module--> 
```

使用这些类而不是原始类。有点肮脏的黑客，但它的工作原理。

**归功于[此处](https://code.google.com/p/elmah/issues/detail?id=217#c17)找到的消息 #17 的海报。**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-15T18:51:00.383

感谢 Amarisi 提供的代码，我已将其重新编写到我的 Global.asax.cs 文件 Application_Error 方法中，以记录 Elmah 未能记录的所有异常。

它看起来像这样（已编辑但应该可以工作）：

```
protected void Application_Error(object sender, EventArgs e)
    {
        Exception exception = Server.GetLastError();

        // ELMAH will not log exceptions arising from POST requests
        // when the form values contains 'potentially dangerous' chars
        // e.g. html tags

        // Adding this explicit ELMAH logging because of ELMAH bug:
        // https://code.google.com/p/elmah/issues/detail?id=217
        // Waiting for a new ELMAH release with the fix

        // get form object
        System.Collections.Specialized.NameValueCollection RequestForm = Request.Unvalidated.Form;

        // get combined text of form values
        string formValues = string.Join(",", RequestForm.AllKeys.Select(key => RequestForm[key])); 

        // is this the type of POST that Elmah fails on?
        if (formValues.Contains("<")) 
        {
            // log the exception manually
            var elmahError = new Elmah.Error(exception);
            var elmahLog = Elmah.ErrorLog.GetDefault(Context);
            elmahLog.Log(elmahError);
        }
    }
} 
```

Contains("<") 不是最好的测试。我怀疑它涵盖了 Elmah 未能记录的所有内容。

很想看看是否有人可以进一步改善这一点。

# vim - 如何在vi中替换引号之间的文本

> ID：11630440
> 
> 赞同：118
> 
> 时间：2012-07-24T12:02:11.707
> 
> 标签：vim, vi

假设我有这行代码：

```
$query = "SELECT * FROM table"; 
```

vi/vim 中是否有一个命令可以立即删除引号之间的所有内容并将光标定位在它们之间以便我可以开始输入？

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-07-24T12:04:45.120

使用`ci"`，这意味着：更改双引号内的内容。

您还可以以类似的方式操作其他文本对象，例如：

*   `ci'`- 在单引号内更改
*   `ciw`- 改变一个词
*   `ci(`- 改变括号内
*   `dit`- 在 HTML 标签内删除，等等。

更多关于不同 vim 文本对象[的信息在这里](http://blog.carbonfive.com/2011/10/17/vim-text-objects-the-definitive-guide/)。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-24T12:05:20.387

您可以在引号之间进行选择，然后使用删除 ( `d`)、更改 ( `c`) 等

```
vi" 
```

同样，您可以替换大括号、方括号、XML 元素等：

```
vi(
vi{
vit 
```

或简单地更改/删除，执行相应`di"`的`ci"`等。替换`a`将`i`包含周围的元素（例如，您标记或更改括号*和*内容）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-28T05:02:34.090

我做了一个插件`vim-textobj-quotes`：[https ://github.com/beloglazov/vim-textobj-quotes](https://github.com/beloglazov/vim-textobj-quotes)

它为任何类型的最接近的引号对提供文本对象，并支持跨多行的引号。使用 only`iq`或`aq`它允许您对当前围绕光标、位于光标前面或后面（按优先顺序）的单引号 (')、双引号 (") 或反引号 (`) 的内容进行操作. 换句话说，它在需要到达引号时向前或向后跳跃。

通过查看示例更容易理解（光标显示为`|`）：

1.  之前：`foo '1, |2, 3' bar`; 按下后`diq`：`foo '|' bar`
2.  之前：`foo| '1, 2, 3' bar`; 按下后`diq`：`foo '|' bar`
3.  之前：`foo '1, 2, 3' |bar`; 按下后`diq`：`foo '|' bar`
4.  之前：`foo '1, |2, 3' bar`; 按下后`daq`：`foo | bar`
5.  之前：`foo| '1, 2, 3' bar`; 按下后`daq`：`foo | bar`
6.  之前：`foo '1, 2, 3' |bar`; 按下后`daq`：`foo | bar`

上面的示例是针对单引号给出的，该插件对双引号 (") 和反引号 (`) 的工作方式完全相同。

您还可以使用任何其他运算符：`ciq`、`diq`、`yiq`、`viq`等。

请查看上面链接的 github 页面以获取更多详细信息。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-24T12:04:57.593

从已经在引号内你可以做

```
di" 
```

把它读作删除里面“

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-10T12:43:38.920

除了布莱恩的回答，您还可以`p`（粘贴）和`y`（拉动）新值，因此如果您想用另一个值替换引号内的值，您可以`yi"`在要复制的选择上执行，`vi"`以选择区域您想要替换然后只是`p`正确替换该值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-09T19:21:29.300

选择的答案仅适用于 ViM，但不适用于 vi。这个问题也不准确，因为作者没有提到光标的初始位置是什么。如果我们假设光标在双引号内，那么对于 vi 答案将是：

```
T"ct" 
```

在哪里：

T" - 在 " 字符之后向后移动

c - 更改命令

t" - 为 c 命令提供结束位置，它应该停止擦除字符，换句话说就是要更改的范围

# math - 逐像素插值

> ID：11630442
> 
> 赞同：0
> 
> 时间：2012-07-24T12:02:18.737
> 
> 标签：math, line, interpolation

我需要按像素在线偏移一个点。

```
public static function interpolate(pt1:Point, pt2:Point, f:Number):Point
{
     var x:Number = f * pt1.x + (1 - f) * pt2.x;
     var y:Number = f * pt1.y + (1 - f) * pt2.y;

     return new Point(x, y);
} 
```

如果“f”为 0.5，则此函数可以按百分比插入点，该点将位于线 pt1 pt2 的中心。有没有办法用像素做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:34:31.477

听起来你想写一个方法`interpolate(pt1, pt2, distanceFromPt1)`。您现有的`interpolate`方法做了类似的事情，因此您可以使用后者来实现前者。

现在，如果你调用`interpolate(A,B,f)`，你会得到一个点 D `(distanceBetween(A,D) / distanceBetween(A,B)) == 1-f`。在你想写的 interpolate 版本中，你不知道`f`应该是什么，但你可以解决它，因为你知道`distanceBetween(A,D)`.

```
function iterpolateByDistance(A, B, distanceFromA){
    //(dist(A,D) / dist(A,B)) == 1-f
    //f + (dist(A,D) / dist(A,B)) == 1
    //f == 1 - (dist(A,D) / dist(A,B))
    f = 1 - (distanceFromPt1 / distanceBetween(A, B));
    return interpolate(A, B, f);
} 
```

# c# - 在 asp.net 中的 ImageMap 显示

> ID：11630444
> 
> 赞同：0
> 
> 时间：2012-07-24T12:02:20.650
> 
> 标签：c#, asp.net

我有座位位置的建筑图像，我必须在按钮单击时显示图像的选定位置。例如，如果用户选择座位号 120，我必须找到座位号 120 并突出显示座位号。图像非常大，2000x1500 大小，所以我必须显示具有选定位置的图像，就像在谷歌地图中它显示搜索位置一样。

请让我知道如何实现这一目标。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:07:58.987

Well one way would be to use the "area" tag of HTML ([http://www.w3schools.com/tags/tag_area.asp](http://www.w3schools.com/tags/tag_area.asp)) Then you would be able to link every seat to a detail page with information about it. This will not solve your highlight problem though. Do you have to stick to the image?

# oracle11g - 下表的sql查询帮助

> ID：11630452
> 
> 赞同：0
> 
> 时间：2012-07-24T12:02:57.000
> 
> 标签：oracle11g

我的表结构是：table_system：

```
"ID"               NUMBER NOT NULL ENABLE,
"COUNTRY"          VARCHAR2(10 BYTE) NOT NULL ENABLE,
"COMPANYCODE"      VARCHAR2(50 BYTE) NOT NULL ENABLE,
"SYSTEM"           VARCHAR2(50 BYTE) NOT NULL ENABLE,
"NOTSTARTED"       NUMBER,
"RUNNING"          NUMBER,
"COMPLETED"        NUMBER,
"ACTUALSTARTTIME"  VARCHAR2(5 BYTE),
"ACTUALENDTIME"    VARCHAR2(5 BYTE),
"SEQUENCE"         NUMBER,
"PLANNEDSTARTTIME" VARCHAR2(5 BYTE),
"PLANNEDENDTIME"   VARCHAR2(5 BYTE),
"ESTIMATEDENDTIME" VARCHAR2(5 BYTE),
CONSTRAINT "SYSTEMRUNTIME_PK" PRIMARY KEY ("ID", "COUNTRY", "COMPANYCODE", "SYSTEM") USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT) TABLESPACE "SYSTEM" ENABLE 
```

我需要一个输出来获取以下输出：

```
COMPANYCODE                                         SYSTEM1 SYSTEM2 SYSTEM3 SYSTEM4 SYSTEM5 SYSTEM6 SYSTEM7 SYSTEM8 …   SYSTEM N
--------------------------------------------------  --------------------------- ------------------- ----------------------- ------------------------------  ------------------------------  --------------------    --------------  --------------  --------------  -------------- 
```

其中系统根据“SEQUENCE”属性进行排序。

我试过这个查询：

```
 select distinct companycode, sequence, system,notstarted,running,completed
    from table_system
    where id = (select max(id) from table_system)
    order by companycode, sequence 
```

这让我得到以下信息

```
COMPANYCODE SEQUENCE    SYSTEM  NOTSTARTED  RUNNING COMPLETED
--------------------------------------------------  ----------------------  --------------------------------------------------  ----------------------  ----------------------  ----------------------
1001 Helsinki Branch    1   GAP 2 / Datastage GL    0   0   3
1001 Helsinki Branch    2   SAP GL  0   0   2
1001 Helsinki Branch    3   SAP BW  0   0   2
1002 Copenhagen Branch  1   GAP 2 / Datastage GL    0   0   3
1002 Copenhagen Branch  2   SAP GL  0   0   2
1002 Copenhagen Branch  3   SAP BW  0   0   2
1003 Oslo Branch    1   GAP 2 / Datastage GL    0   0   3
1003 Oslo Branch    2   SAP GL  0   0   2
1003 Oslo Branch    3   SAP BW  0   0   2
1004 (publ) (EUR)   1   EKO 0   0   13
1004 (publ) (EUR)   2   HA Core 0   0   6
1004 (publ) (EUR)   3   HA Post Processor   0   0   5
1004 (publ) (EUR)   4   Datastage GL    3   0   10
1004 (publ) (EUR)   5   Datastage Recon 1   0   3
1004 (publ) (EUR)   11  SAP GL  0   0   4
1004 (publ) (EUR)   21  SAP BW  0   0   4 
```

但我希望输出为：

```
COMPANYCODE                                         SYSTEM1 SYSTEM2 SYSTEM3 SYSTEM4 SYSTEM5 SYSTEM6 SYSTEM7 SYSTEM8 …   SYSTEM N
--------------------------------------------------  --------------------------- ------------------- ----------------------- ------------------------------  ------------------------------  --------------------    --------------  --------------  --------------  --------------
1001 Helsinki Branch            GAP 2 / Datastage GL    SAP GL  SAP BW                          
1002 Copenhagen Branch          GAP 2 / Datastage GL    SAP GL  SAP BW                          
1003 Oslo Branch                GAP 2 / Datastage GL    SAP GL  SAP BW                          
1004 (publ) (EUR)                       EKO HA Core HA Post Processor   Datastage GL    Datastage Recon SAP GL  SAP BW 
```

上述任何提示将不胜感激。谢谢你 vinayak

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:21:14.090

试试看：

```
select companycode, COLLECT(system) as systems
    from table_system
    where id = (select max(id) from table_system)    
    group by companycode
    order by companycode, sequence 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:45:25.407

您可以为此使用[枢轴](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#sthref6775)操作；但不能处理未知数量的系统（因为您需要在解析时知道所选列的数量）：

```
select * from
(
    select companycode, system,
        row_number() over (partition by id, country, companycode
            order by sequence) as rn
    from table_system
    where id = (select max(id) from table_system)
)
pivot (max(system) for rn in (1 as system1, 2 as system2, 3 as system3,
    4 as system4, 5 as system5, 6 as system6, 7 as system7, 8 as system8))
order by company code;

COMPANYCODE                                        SYSTEM1                                            SYSTEM2                                            SYSTEM3                                            SYSTEM4                                            SYSTEM5                                            SYSTEM6                                            SYSTEM7                                            SYSTEM8
-------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- --------------------------------------------------
1001 Helsinki Branch                               GAP 2 / Datastage GL                               SAP GL                                             SAP BW
1002 Copenhagen Branch                             GAP 2 / Datastage GL                               SAP GL                                             SAP BW
1003 Oslo Branch                                   GAP 2 / Datastage GL                               SAP GL                                             SAP BW
1004 (publ) (EUR)                                  EKO                                                HA Core                                            HA Post Processor                                  Datastage GL                                       Datastage Recon                                    SAP GL                                             SAP BW 
```

因此，您需要确定您将拥有的最大系统数，并将子句添加到枢轴 ( `9 as system9, ...`) 以容纳所有系统。将`row_number()`序列号转换为连续的数字，因此您在公司的第 5 和第 6 系统之间没有太大的差距`1004`；除了其他任何事情之外，您还需要枢轴来处理最大可能的序列号，而不是最大的系统数。

# c++ - 这段代码有什么问题？我必须使用指向联合的 volatile 指针，这会在运算符重载时出错 =

> ID：11630455
> 
> 赞同：0
> 
> 时间：2012-07-24T12:03:06.750
> 
> 标签：c++, operator-overloading

constvolatile.cpp:91:9: 错误：将 'volatile GENERIC_COMMAND' 作为 'const GENERIC_COMMAND& GENERIC_COMMAND::operator=(const T&) [with T = COMPLETION_WAIT, GENERIC_COMMAND = GENERIC_COMMAND]' 的 'this' 参数传递，丢弃限定符 [-fpermissive]

```
 #include <iostream>
            using namespace std;

             typedef unsigned int uint32_t;
             typedef unsigned long long  uint64_t;

               union GENERIC_COMMAND
                {
                    struct
                    {
                        uint64_t first_operand  :   60;
                        uint64_t opcode         :   4;
                        uint64_t second_operand :   64;
                    };

                    struct
                    {
                        uint32_t dword1;
                        uint32_t dword2;
                        uint32_t dword3;
                        uint32_t dword4;
                    };

                    struct
                    {
                        uint64_t qword1;
                        uint64_t qword2;
                    };

                    GENERIC_COMMAND() {
                    }
                    GENERIC_COMMAND(volatile const GENERIC_COMMAND&){}

                    template <typename T>
                    volatile GENERIC_COMMAND& operator=(const T& rhs) volatile
                    {
                        this->dword1 = rhs.dword1;
                        this->dword2 = rhs.dword2;
                        this->dword3 = rhs.dword3;
                        this->dword4 = rhs.dword4;
                        return *this;
                    }
                };

             union COMPLETION_WAIT
                {
                    struct
                    {
                        uint64_t s              :   1;
                        uint64_t i              :   1;
                        uint64_t f              :   1;
                        uint64_t store_address  :   49;
                        uint64_t reserved1      :   8;
                        uint64_t opcode         :   4;
                        uint64_t store_data     :   64;
                    };
                    struct
                    {
                        uint32_t dword1;
                        uint32_t dword2;
                        uint32_t dword3;
                        uint32_t dword4;
                    };
                };

             void add_completion_wait_command(uint32_t s, uint32_t i, uint32_t f,
                                    uint64_t store_address, uint64_t store_data,
                                    bool auto_flush)
                {
                    COMPLETION_WAIT command;
                    command.dword1 = 0;     
                    command.dword2 = 0;    
                    command.dword3 = 0;    
                    command.dword4 = 0;     

                    command.s = s;
                    command.i = i;
                    command.f = f;
                    command.store_address = store_address >> 3;
                    command.opcode = 0x1;
                    command.store_data = store_data;

                    GENERIC_COMMAND generic;
                    static_cast<GENERIC_COMMAND>(generic = command);

                }

            main()
            {
                    cout<< "in main"<< endl;
                    volatile GENERIC_COMMAND* A;//this has to be volatile only.
                    COMPLETION_WAIT cw;
                    A = new volatile union GENERIC_COMMAND;
                    static_cast<GENERIC_COMMAND>(A[0] = cw);

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:07:51.833

Your operator= needs to be volatile. Just as a member function needs to be const to be invoked on a const object. If your member function is not volatile, the compiler would optimize its body, which is not what you want for a volatile object. So the language has this useful rule.

It is well known that this error happens even with the implicitly declared operator=, and is documented as one of the incompatibilities to the C language.

EDIT: I would like to mention that the object you assign to is not volatile, so a compiler is free to optimize away operations on it, even if the pointer used to access it has the volatile qualifier. Add volatile to the type of it

```
new volatile union GENERIC_COMMAND 
```

# android - 为 AlarmManager 设置多个 Intent

> ID：11630460
> 
> 赞同：0
> 
> 时间：2012-07-24T12:03:16.463
> 
> 标签：android, android-intent, android-alarms

我使用 AlarmManager 来安排多个任务，即任务 1 在 10:56，任务 2 在 11:24 等等。这是代码：

```
 intent = new Intent(ACTION_RECORDER_START);
  intent.putExtra(EXTRA_COMMAND_ID, command.id);
  pendingIntent = PendingIntent.getService(context, 0, intent, PendingIntent.FLAG_ONE_SHOT);
  alarmManager.set(AlarmManager.RTC_WAKEUP, command.start, pendingIntent); 
```

奇怪的是：如果我设置一个闹钟，它就可以很好地工作。如果我设置两个，则只会触发最后一个警报。所以，我想问题是当我设置第二个，第三个......警报时，前一个被覆盖。

来自开发者文档：

> 如果这个 Intent 调度已经有一个警报（两个 Intent 的相等性由 filterEquals(Intent) 定义），那么它将被删除并替换为这个。

我去了来源，这是该方法的实现：

```
public boolean filterEquals(Intent other) {
        if (other == null) {
            return false;
        }
        if (mAction != other.mAction) {
            if (mAction != null) {
                if (!mAction.equals(other.mAction)) {
                    return false;
                }
            } else {
                if (!other.mAction.equals(mAction)) {
                    return false;
                }
            }
        }
        if (mData != other.mData) {
            if (mData != null) {
                if (!mData.equals(other.mData)) {
                    return false;
                }
            } else {
                if (!other.mData.equals(mData)) {
                    return false;
                }
            }
        }
        if (mType != other.mType) {
            if (mType != null) {
                if (!mType.equals(other.mType)) {
                    return false;
                }
            } else {
                if (!other.mType.equals(mType)) {
                    return false;
                }
            }
        }
        if (mPackage != other.mPackage) {
            if (mPackage != null) {
                if (!mPackage.equals(other.mPackage)) {
                    return false;
                }
            } else {
                if (!other.mPackage.equals(mPackage)) {
                    return false;
                }
            }
        }
        if (mComponent != other.mComponent) {
            if (mComponent != null) {
                if (!mComponent.equals(other.mComponent)) {
                    return false;
                }
            } else {
                if (!other.mComponent.equals(mComponent)) {
                    return false;
                }
            }
        }
        if (mCategories != other.mCategories) {
            if (mCategories != null) {
                if (!mCategories.equals(other.mCategories)) {
                    return false;
                }
            } else {
                if (!other.mCategories.equals(mCategories)) {
                    return false;
                }
            }
        }

        return true;
    } 
```

所以，据我所知，没有提到额外的东西。事实上，我依赖于这个：

```
intent.putExtra(EXTRA_COMMAND_ID, command.id); 
```

但标准实现不比较exras。因此，当我安排多个意图时，它们被比较相等并被覆盖！

**实际问题：**

如何覆盖`filterEquals(Intent)`，以便我可以根据 Extras 区分 Intent？

这是我的实现：

```
 static class AlarmIntent extends Intent{

        public AlarmIntent(String action){
            super(action);
        }

        @Override
        public boolean filterEquals(Intent other){
            if(super.filterEquals(other)){
                long id  = getExtras().getLong(AudioRecorder.EXTRA_COMMAND_ID, -1);
                long otherId = other.getExtras().getLong(AudioRecorder.EXTRA_COMMAND_ID, -1);
                if(id == otherId){
                    return true;
                }
            }
            return false;
        }
    } 
```

但在我看来它不起作用。我认为`filterEquals` **不会调用 overriden 。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:37:29.227

结束了这个：

```
pendingIntent = PendingIntent.getService(context, UNIQUE_ID, intent, PendingIntent.FLAG_ONE_SHOT); 
```

提供第二个论点来`getService`完成这项工作。

# c# - 组合框的元素过滤

> ID：11630464
> 
> 赞同：1
> 
> 时间：2012-07-24T12:03:33.367
> 
> 标签：c#, combobox

我有combobox1和comboox2，在combobox1中我的元素是A、B、C和combobox2 1、2、3、4、5、6 ...

`A related 1,2,3 and B related 3,4 and C related 5,6.`

`When I choose "A" I want to see just 1,2,3 ; when select "B" just 3,4 etc.`

我怎么能想象呢？

我试图在选定的索引中做更改但我没有

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:14:36.397

试试这个，做一个这样的类：

```
public class Data
    {
        public string Name { get; set; }
        public List<int> Values { get; set; }
    } 
```

然后在你的表单中有一个像这样的变量：

```
private List<Data> data = new List<Data>
        {
            new Data{Name="A",Values=new List<int>{1,2,3}},
            new Data{Name="B",Values=new List<int>{4,5}},
            new Data{Name="C",Values=new List<int>{6,7}},
        }; 
```

然后在表单的构造函数中：

```
comboBox1.DisplayMember = "Name";
            comboBox1.DataSource = data;            
            comboBox1.SelectedIndex = 0; 
```

然后在 combobox1 的 selectedindex changed 事件上这样做：

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            int index = comboBox1.SelectedIndex;
            comboBox2.DataSource = data[index].Values;
        } 
```

它应该工作。

# android - 如何在特定列表项处停止 ListView 正在抛出？

> ID：11630472
> 
> 赞同：3
> 
> 时间：2012-07-24T12:03:51.900
> 
> 标签：android, listview

我正在编写一个时间选择器小部件，它由几个 ListView（天、小时、分钟等）组成。分钟 ListView 具有 Integer.MAX_VALUE 元素（一遍又一遍地重复 0-59）。每当用户抛出列表时，我希望它在 0、15、30 或 45 处停止。我尝试使用 setSelection，但即使它选择了正确的元素，它也不会使抛出速度无效，因此列表会继续抛出。

如果您有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:20:51.917

[ListView: public void smoothScrollToPosition (int position)](http://developer.android.com/reference/android/widget/ListView.html#smoothScrollToPosition%28int%29)

也许这会对你有所帮助。从未使用过它，但看起来它可能是一个解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:53:22.797

谢谢你的帮助！我试过了，即使它停止了列表视图，但每次停止的位置都略有不同，所以最后我使用了另一种解决方案。

```
if((firstVisibleItem % 60 == 13 || firstVisibleItem % 60 == 28 || firstVisibleItem % 60 == 43 || firstVisibleItem % 60 == 58) && !stopped)
{
    MotionEvent me = MotionEvent.obtain(10, SystemClock.uptimeMillis(),     MotionEvent.ACTION_DOWN, 0, 0, 0); 
    MotionEvent me2 = MotionEvent.obtain(10, SystemClock.uptimeMillis(), MotionEvent.ACTION_UP, 0, 0, 0); 
    mMinutesListView.dispatchTouchEvent(me);
    mMinutesListView.dispatchTouchEvent(me2);
    mMinutesListView.setSelection(firstVisibleItem);
    stopped = true;
} 
```

然后在 onScrollStateChanged 方法中，在 SCROLL_STATE_FLING 的情况下，我将“停止”布尔变量设置为 false。

# c# - 左键单击 Silverlight 文本框

> ID：11630481
> 
> 赞同：0
> 
> 时间：2012-07-24T12:04:19.310
> 
> 标签：c#, silverlight, textbox, mouseclick-event

我需要支持双击的文本框，但是在尝试对其进行编码时，我遇到了一个问题，即如果我在文本区域内单击，Silverlight 文本框不会引发鼠标左键事件。那么这里有什么可能的解决方案？我正在使用 Silverlight 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:33:08.693

您应该创建一个继承自默认值`TextBox`并覆盖该`OnMouseLeftButtonUp`方法的自定义文本框控件，如下所示：

```
public class MyTextBox : TextBox
{
    protected override void OnMouseLeftButtonUp(MouseButtonEventArgs e)
    {
        base.OnMouseLeftButtonUp(e);
        // Do your stuff here
    }
} 
```

如果您需要处理双击，切换到引入点击计数概念的 Silverlight 5 会更容易。这是处理双击的教程：[http](http://www.silverlighthostingnews.com/index.php/archives/440) ://www.silverlighthostingnews.com/index.php/archives/440 基本上你只需要这样做：

```
if(e.ClickCount == 2) {...} 
```

编辑：这是在 Silverlight 4 中的操作方法：

*   创建继承默认 TextBox 类的自定义文本框并覆盖鼠标事件，如下所示：

-

```
public class DoubleClickTextBox : TextBox
{
    protected override void OnMouseLeftButtonUp(MouseButtonEventArgs e)
    {
        // Do nothing
    }
    protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e)
    {
        // Do nothing
    }
} 
```

*   在您的项目类中添加[DoubleClickExtender类。](http://www.domagoj.pavlesic.com/DoubleClick-in-Silverlight)

*   在您的代码隐藏中，附加到双击事件：

-

```
DoubleClickExtender dce = new DoubleClickExtender(textBox, 300)
dce.DoubleClick += new MyEventHandler(dce_DoubleClick); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:35:42.457

你也许可以用这个作弊，虽然我自己没有尝试过

*   将文本框的模板更改为具有 IsHitTestVisible = true 的透明覆盖
*   在叠加层上设置双击事件。
*   如果您检测到单击叠加层，则什么也不做，让它冒泡
*   如果检测到双击，请将
    mousebuttoneventargs 的事件处理设置为 true 并执行双击操作

请注意，本机不支持双击 Silverlight4，因此您必须想出一些方法来模拟它。

# powershell - 在 powershell 中构建 7-zip 命令字符串

> ID：11630488
> 
> 赞同：0
> 
> 时间：2012-07-24T12:04:46.210
> 
> 标签：powershell

我第一次在 Powershell 中使用真正的应用程序；我可以用传统的 .Net 语言编写代码，但我认为 Powershell 非常适合此类控制台应用程序。我搜索了 StackOverflow 并找到了我需要的（几乎）确切的脚本；我的问题是我想获取一个文件文件夹（在服务器 fsA 上）并在 fsB 上创建以文件日期命名的 7-Zip 存档。例如，在 2012 年 7 月 21 日最后写入的所有文件都可以在存档 20120721.7z 中找到。我基于此处找到的解决方案：[为使用 Powershell 按日期创建的文件创建 7z 存档](https://stackoverflow.com/questions/6473973/create-a-7z-archive-for-files-created-by-date-using-powershell?rq=1)

这是我到目前为止所拥有的：

```
$prog_dir = "C:\Progra~1\7-Zip\7z.exe"
$archive_dir = "\\fsa\Backup"
$input_dir = "\\fsb\Xml\Archive\"
$7zOpts = "-m0=PPMd:o32:mem192M"
$groups = dir $input_dir | group-object -property {$_.LastWriteTime.Date}
$groups | foreach{$cmd = $prog_dir + " a " + $archive_dir + "\$((Get-Date $_.Name).ToString(`"yyyyMMdd`")).7z $([string]::join(`" `", $_.Group)) " + $7zOpts} #; invoke-expression $cmd}
#
#Where to put this: "+ $input_dir +"???
#
$cmd 
```

我似乎找不到在 foreach 行中指定输入目录的方法；我可以将它放在 join 语句的开头，但它只会将输入目录添加到列表中的第一个文件。例如：

```
$groups | foreach{$cmd = $prog_dir + " a " + $archive_dir + "\$((Get-Date $_.Name).ToString(`"yyyyMMdd`")).7z " + $input_dir + "$([string]::join(`" `", $_.Group)) " + $7zOpts} #; invoke-expression $cmd} 
```

产生输出

C:\Progra~1\7-Zip\7z.exe a \\fsa\Backup\20120722.7z \\fsb\Xml\Archive\255IQR.xml 2573WV.xml 257RMC.xml

最后两个文件没有前面的完整路径？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:25:04.337

PowerShell 是一个 shell，因此运行命令几乎是它应该做好*的事情。*所以一般来说，如果你在运行命令时诉诸于`Invoke-Expression`你做错了什么。让我们尝试一种不同的方式：

```
$prog_dir = 'C:\Progra~1\7-Zip\7z.exe' # you don't need 8.3 names here, by the way
$archive_dir = '\\fsa\Backup'
$input_dir = '\\fsb\Xml\Archive\'
$7zOpts = '-m0=PPMd:o32:mem192M'
$groups = dir $input_dir | group-object -property {$_.LastWriteTime.Date}
$groups | foreach {
    $files = $_.Group | select -expand FullName
    $date = (Get-Date $_.Name).ToString('yyyyMMdd')
    & $prog_dir a $archive_dir\$date.7z $files $7zOpts
} 
```

# android - 如何在 CountDownTimer 上添加和删除时间？

> ID：11630493
> 
> 赞同：2
> 
> 时间：2012-07-24T12:04:56.707
> 
> 标签：android, timer, countdown, countdowntimer

问题是：如何在倒计时期间从 CountDownTimer 添加或删除时间？

例如：用户做了好事：+5sec，用户做错事：-5sec。

有人可以帮我一些代码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T12:21:49.863

也许是这样的

```
abstract class MyTimer {

    public MyTimer(long deadline, long interval)
    {
        mDeadline = deadline;
        mInterval = interval; 

        mTimer = new MyCountDownTimer(mDeadline, mInterval);

    }

    public synchronized void start() {

       mTimer.start();

    }

    public abstract void onTick(long time);
    public abstract void onFinish();

    public synchronized void userDidRight() 
    {
        mTimer.cancel();
        mTimer = new MyCountDownTimer(mDeadline, mInterval += 5000);
        mTimer.start();
    }

    public synchronized void userDidWrong() 
    {
        mTimer.cancel();
        mTimer = new MyCountDownTimer(mDeadline, mInterfval -= 5000);
        mTimer.start();
    }

    private class MyCountDownTimer extends CountDownTimer() {

        private abstract void onFinish() {
            MyTimer.this.onFinish();
        }

        private abstract void onTick(long time) {
            MyTimer.this.onTick(time);
        }
    }

    private MyCountDownTimer mTimer;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:23:06.633

每次用户更改时，您都可以重新启动计时器：

```
class Timer {
    private long remainingTime;
    private CoundDownTimer timer;

    public void addTime(long addedTimeInMillis) {
      createNewTimer(remainingTime + addedTimeInMills);
    }

    public void createNewTimer(long timeInMillis) {
       if(timer != null) {
         timer.cancel();
       }
       timer = new CountDownTimer(timeInMillis, 1000) {

       @Override
       public void onTick(final long millisUntilFinished) {
           remainingTime = millisUntilFinished;
       }

       @Override
       public void onFinish() {
           // do something here
       }
       }.start();

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-27T10:57:55.757

```
private class startTimer extends CountDownTimer
{

    public startTimer(long millisInFuture, long countDownInterval)
    {
        super(millisInFuture, countDownInterval);
    }

    @Override
    public void onTick(long millisUntilFinished) {
        currenttime=millisUntilFinished;
        textview.setText("" + currenttime / 1000);
    }

    @Override
    public void onFinish() {
        textview.setText("done");
    }
} 
```

上面的类是CountDownTimer的一个简单派生类

```
CountDownTimer timer = new CountDownTimer(30000,1000);
timer.start();
long currentTime; 
```

例如上面的计时器从 30 秒开始，每秒减一。要动态增加或减少计时器，您可以取消旧计时器并使用新时间进行初始化，如下所示

```
 timer.cancel();
 timer = new CountDownTimer(currentTime+5000,1000);// +5000 to increase by 5 secs
 timer.start(); 
```

您可以**将 timer,currentTime 变量设为全局变量，**然后您可以在不同位置使用代码的两个不同部分。

# java - 我的应用程序/服务应该将其配置文件存储在 Windows 的什么位置？

> ID：11630494
> 
> 赞同：1
> 
> 时间：2012-07-24T12:04:59.740
> 
> 标签：java, windows, configuration-files

在 Linux 中，我通常将用户配置文件放在 $HOME/.myapp 中，而在 Windows 中，我将使用 APPDATA。到现在为止还挺好。

非用户特定的配置呢？在 linux 中，我将其放入`/etc`. Windows中是否有等价物？请注意，我希望在任何用户登录*之前*运行该服务。此外，如果它发挥作用，我正在使用 Java 进行开发。

或者：我以错误的方式接近这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:14:33.093

您可以使用 ALLUSERPROFILES 作为基本目录。此环境变量解析为 Windows7 中的 C:\PROGRAMDATA 文件夹。当然，您需要为您的应用程序添加一个特定的文件夹

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-31T18:27:18.440

**总之，您应该使用已知文件夹： ProgramData**。

为了避免路径的硬编码（以及为什么我不在这里提供它们），您应该始终通过以下方法之一检索值：

*   `%PROGRAMDATA%`环境变量（你也可以使用但`%ALLUSERSPROFILE%`我认为`%PROGRAMDATA%`更有意义）
*   对于非托管代码使用[`SHGetKnownFolderPath`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb762188(v=vs.85).aspx)，传递[`FOLDERID_ProgramData`](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd378457(v=vs.85).aspx#FOLDERID_ProgramData).
*   对于托管代码使用[`System.Environment.GetFolderPath`](http://msdn.microsoft.com/en-us/library/system.environment.getfolderpath(v=vs.110).aspx)，传递[`CommonApplicationData`](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder(v=vs.110).aspx).

非管理员无法写入此文件夹，因此根据您的要求，您需要为程序创建一个目录并在安装时设置所需的 ACL。

博客文章中提供了有关此主题的一些有用信息：“[我应该在哪里编写程序数据而不是程序文件](https://techcommunity.microsoft.com/t5/windows-blog-archive/where-should-i-write-program-data-instead-of-program-files/ba-p/228513)”。

对于那些对使用其他*已知文件夹*感兴趣的人，MSDN 提供了[广泛的文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd378457(v=vs.85).aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T12:15:36.507

在 Windows 中，应用程序的大多数“程序文件”位于 C:\Program Files\MyApp。环境变量是 %ProgramFiles%\MyApp。

# javascript - 根据页面/屏幕高度调整大小

> ID：11630501
> 
> 赞同：1
> 
> 时间：2012-07-24T12:05:10.580
> 
> 标签：javascript, css

我的页面分为左右两个div，右div有一个边框将两者分开。如果右框的高度大于左框，则可以正常工作。但是，如果左框高度更大，则边框只有一半。

如何根据整个屏幕的高度调整右框的高度，以便边框一直运行到最后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:10:27.537

您可以为您的右侧 div 提供高度，如果没有（在 jQuery 中），则在此处放置一个 id（如 rightDiv）。

```
$('#rightDiv').height($(window).height()); 
```

如果您想提高整个文档的高度，请使用：

```
$('#rightDiv').height($(document).height()); 
```

`$(window).height()`将重新运行可用的浏览器窗口高度。

`$(document).height()`将返回文档高度。

或者你可以做一个比较：

```
var doc = $(document);
var win = $(window);
var maxHeight =  doc.height() > win.height() ? doc.height() : win.height() ;
$('#rightDiv').height(maxHeight); 
```

您有最小高度，对于动画高度，您可以尝试：

```
$('#rightDiv').animate( { height : maxHeight}, <duration>); 
```

`<duration>`是可选的，您可以在此处提供“慢”、“快”、毫秒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:38:04.047

另一种解决方案是这个纯 CSS 的：http: [//jsfiddle.net/zgMv5/](http://jsfiddle.net/zgMv5/)
您将左右 div 放在另一个周围，并将`<div>`其用作 CSS 表格行。然后 2 包含`<div>`将是相同的高度。

```
<div id="outer">
  <div id="left">This is some text.</div>
  <div id="right">This is some text.</div>
</div> 
```

相应的 CSS 如下所示：

```
div#outer {
    display:table-row;  }
div#outer > div {
    display:table-cell;  }
div#left  {
    border-right:1px solid red;  } 
```

我不确定与旧浏览器的兼容性...

# .htaccess - 如何使用 htaccess 重定向所有子页面并排除特定 URL？

> ID：11630503
> 
> 赞同：0
> 
> 时间：2012-07-24T12:05:12.657
> 
> 标签：.htaccess

我正在尝试使用 htaccess 进行重定向，但我对 htaccess 和重定向知之甚少。我想做的是：

重定向对所有子页面和目录的访问，例如

```
http://mydomain.com/index.php
http://mydomain.com/directory/
http://mydomain.com/new/directory/ 
```

对我域上的特定 URL 说：

```
http://mydomain.com/one 
```

我试着用

```
redirect /index.php http://mydomain.com/demo/ 
```

但我的问题是如何从这个重定向中排除特定的 URL 和目录？如何制定规则以排除特定页面被重定向？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:06:37.970

您的“选择工具”应该是**RewriteCond**

该`RewriteCond`指令不仅可用于过滤 URL，而且每个条件仅适用于下一个`RewriteRule`指令 - 但是，您可以“堆叠”`RewriteCond`指令。

例子：

```
RewriteCond %{REQUEST_URI} !^/path/to/non/redirect/url.php$
RewriteCond %{REQUEST_URI} !^/path/to/another/non/redirect/url.php$
RewriteRule ^$ http://mydomain.com/one 
```

但是，这可以简化一点：

```
RewriteCond %{REQUEST_URI} !^(/path/to/non/redirect/url.php|/path/to/another/non/redirect/url.php)$
RewriteRule /index.php http://mydomain.com/one 
```

[Apache Mod_Rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# c# - 将可观察集合的层次结构展平为单个可观察集合

> ID：11630509
> 
> 赞同：0
> 
> 时间：2012-07-24T12:05:56.953
> 
> 标签：c#, wpf, observablecollection, compositecollection

我有一个可观察集合的层次结构，有点像这样：

```
interface IItem
{
    ObservableCollection<IItem> Children { get; }
} 
```

给定一个`IItem`（或一个`ObservableCollection<IItem>`），我想构建一个其他可观察的集合，该集合递归地包含所有子`IItem`项。然后，此集合将用作 WPF 列表视图的数据源（例如）。

修改这些项目中的任何一个以具有其他子项应该更新生成的 observable 集合。请注意，没有循环引用。

我知道[CompositeCollection 类](http://msdn.microsoft.com/en-us/library/system.windows.data.compositecollection.aspx)，我相信这应该对我有帮助（我认为我需要的只是一个复合集合，它递归地包含一个复合集合，其中每个孩子都有一个复合集合`Children`），但我看不到一个简洁的方法来这样做是因为此类没有能力将孩子“模板化”到所需的复合集合中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:48:44.140

你是如何使用这个扁平化列表的？你需要不时列举它吗？考虑以下：

```
IEnumerable<Item> iterate(Item item)
{
     if (item == null)
          yield break;

     yield return item;

     foreach(Item i in item.Children)
     {
         foreach(Item ii in iterate(i){
            yield return ii;
         }
     }  
} 
```

这实质上使层次结构变平并允许您遍历所有项目。由于它是懒惰的，它总是在旅途中进行评估。并且与对层次结构中的单个项目所做的更改一致（只要您不同时枚举和更改）。

**编辑：**

flattend 集合根本不是集合，它是包含层次结构中所有项目的项目序列的表示。这意味着如果您从某个项目中添加（或删除）子项，您将在更改前后获得一致的结果。

考虑以下：

项目项目 = buildItemHierarchy(); 变平=迭代（项目）；item.Children.RemoveAt(2); // 假设 2 存在

flat 现在“包含”原始树中的所有项目，没有从根的第二个孩子发芽的分支（递归！）

# c# - 自定义卸载动作 c#

> ID：11630511
> 
> 赞同：2
> 
> 时间：2012-07-24T12:06:08.277
> 
> 标签：c#, winforms, visual-studio, uninstallation

我有一些条件，我必须在卸载时检查，如果条件匹配，那么我想停止安装过程并想回滚卸载过程。

目前我正在使用安装程序类进行卸载的自定义操作。我在其中检查条件是否匹配？如果匹配，那么我已经完成回滚并且没有，那么卸载将继续。

我在卸载脚本操作中使用了以下代码。

```
public override void Uninstall(IDictionary savedState)
        {
            if (Condition)
            {
                Rollback(savedState);
            }
            else
            {
                base.Uninstall(savedState);
            }

        } 
```

但是此代码无法回滚卸载过程。让我知道这段代码有什么问题。如果有任何新想法，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:08:36.330

抛出一个`InstallException`，它会回滚。读[这个](http://msdn.microsoft.com/en-us/library/system.configuration.install.installexception.aspx)。

```
public override void Uninstall(IDictionary savedState)
{
    if (Condition)
    {
        throw new InstallException("blah blah");
        // What ever you want to do after
    }
    else
    {
        base.Uninstall(savedState);
    }               
} 
```

您的代码将无法正常工作。为什么？

当回滚发生时，将调用回滚自定义操作。

调用回滚自定义操作将导致回滚不是其他方式。

# .net - 使用标准 .Net 功能/BCL 将任何类型的编码输入字符串转换为 UTF-8

> ID：11630512
> 
> 赞同：1
> 
> 时间：2012-07-24T12:06:13.927
> 
> 标签：.net, string, encoding, utf-8, character-encoding

在我们的一个应用程序中，用户可以将纯文本文件上传到系统中，然后读取和处理这些文件。不幸的是，用户对这些文件有多种编码（Ansi、UTF-*、Unicode 等），但最终我们需要将内容作为 UTF-8 字符串。

有没有办法获取*任何*输入字符串（编码方式），识别其编码并使用.Net标准功能转换为UTF-8？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:07:25.900

Please, have a read at the following article : [http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

tl;dr; version : **It does not make sense to have a string without knowing what encoding it uses.**

# jquery - JQuery：无法使用 csTransPie 上传文件

> ID：11630513
> 
> 赞同：0
> 
> 时间：2012-07-24T12:06:14.513
> 
> 标签：jquery, file-upload

我只是将我的表单从[JQTransform](http://www.dfc-e.com/metiers/multimedia/opensource/jqtransform/)迁移到[csTransPie](http://www.pkoretic.net/csTransPie/)。一切都很好，直到我开始测试文件上传。它停止工作。我注意到两者之间的差异，选择文件并进入文件上传字段时：

*   JQTransform：完整的文件路径，例如：C:\folder\file.ext
*   csTransPie：只是文件：file.ext

如果我禁用 csTransPie（评论 css 和 js），上传就可以了。我错过了什么吗？谢谢。

**编辑：**刚刚在 Firefox 和它的工作中进行了测试。但在 IE8 中却没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:22:56.387

这听起来像一个错误。您是否尝试过使用最新版本？ [https://github.com/pkoretic/csDefault/tree/master/csDefault](https://github.com/pkoretic/csDefault/tree/master/csDefault)

如果问题仍然存在，您应该打开新问题 [https://github.com/pkoretic/csDefault/issues/new](https://github.com/pkoretic/csDefault/issues/new)

# c# - 实体框架：如何避免表中的鉴别器列？

> ID：11630515
> 
> 赞同：30
> 
> 时间：2012-07-24T12:06:22.913
> 
> 标签：c#, .net, entity-framework, ef-code-first

我使用实体框架**代码优先**方法创建了下表。

1.  如何修改 C# 代码，以便不在数据库中创建不需要的鉴别器列？是否有任何属性可以实现这一目标？
2.  如何使外键列命名`PaymentID`而不是`Payment_ PaymentID`？是否有任何属性可以实现这一目标？

注意：EntityFramework.dll 的运行时版本是**v4.0.30XXX**。

![在此处输入图像描述](../Images/bbf57c98222cb69e68e02ff31143176a.png)

**代码**

```
public abstract class PaymentComponent
{
    public int PaymentComponentID { get; set; }
    public int MyValue { get; set; }
    public string MyType { get; set; }
    public abstract int GetEffectiveValue();
}

public partial class GiftCouponPayment : PaymentComponent
{
    public override int GetEffectiveValue()
    {
        if (MyValue < 2000)
        {
            return 0;
        }
        return MyValue;
    }
}

public partial class ClubCardPayment : PaymentComponent
{
    public override int GetEffectiveValue()
    {
        return MyValue;
    }
}

public partial class Payment
{
    public int PaymentID { get; set; }
    public List<PaymentComponent> PaymentComponents { get; set; }
    public DateTime PayedTime { get; set; }
}

//System.Data.Entity.DbContext is from EntityFramework.dll
public class NerdDinners : System.Data.Entity.DbContext
{
    public NerdDinners(string connString) : base(connString)
    { 

    }

    protected override void OnModelCreating(DbModelBuilder modelbuilder)
    {
        modelbuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }

    public DbSet<GiftCouponPayment> GiftCouponPayments { get; set; }
    public DbSet<ClubCardPayment> ClubCardPayments { get; set; }
    public DbSet<Payment> Payments { get; set; }
} 
```

**客户**

```
static void Main(string[] args)
{
    string connectionstring = "Data Source=.;Initial Catalog=NerdDinners;Integrated Security=True;Connect Timeout=30";

    using (var db = new NerdDinners(connectionstring))
    {                
        GiftCouponPayment giftCouponPayment = new GiftCouponPayment();
        giftCouponPayment.MyValue = 250;
        giftCouponPayment.MyType = "GiftCouponPayment";

        ClubCardPayment clubCardPayment = new ClubCardPayment();
        clubCardPayment.MyValue = 5000;
        clubCardPayment.MyType = "ClubCardPayment";

        List<PaymentComponent> comps = new List<PaymentComponent>();
        comps.Add(giftCouponPayment);
        comps.Add(clubCardPayment);

        var payment = new Payment { PaymentComponents = comps, PayedTime=DateTime.Now };
        db.Payments.Add(payment);

        int recordsAffected = db.SaveChanges();
    }
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-24T12:58:32.820

TPH 继承需要特殊的列，用于标识实体的类型。默认情况下，此列被调用`Discriminator`并包含派生实体的名称。您可以使用 Fluent-API 定义不同的列名和不同的值。您也可以直接使用 MyType 列，因为它实际上是一个鉴别器，但在这种情况下，您不能在实体中拥有该列（列只能映射一次，如果您将其用作鉴别器，则它已被视为映射）。

外键列的名称可以再次使用 Fluent-API 控制：

```
protected override void OnModelCreating(DbModelBuilder modelbuilder)
{
    modelbuilder.Conventions.Remove<PluralizingTableNameConvention>();

    // Example of controlling TPH iheritance:
    modelBuilder.Entity<PaymentComponent>()
            .Map<GiftPaymentComponent>(m => m.Requires("MyType").HasValue("G"))
            .Map<ClubPaymentComponent>(m => m.Requires("MyType").HasValue("C"));

    // Example of controlling Foreign key:
    modelBuilder.Entity<Payment>()
                .HasMany(p => p.PaymentComponents)
                .WithRequired()
                .Map(m => m.MapKey("PaymentId"));
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-01-18T17:48:34.287

如果属性不映射到列，则添加属性 [NotMapped]。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-29T16:26:30.537

也可以使用每个类型的表 (TPT)。

[http://weblogs.asp.net/manavi/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt](http://weblogs.asp.net/manavi/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt)

> 每个类型的表 (TPT)
> 
> 每个类型的表是关于将继承关系表示为关系外键关联。每个声明持久属性的类/子类（包括抽象类）都有自己的表。子类表仅包含每个非继承属性（由子类本身声明的每个属性）的列以及一个主键，该主键也是基类表的外键。
> 
> 在 EF Code First 中实现 TPT
> 
> 我们可以简单地通过在子类上放置 Table 属性来指定映射的表名称来创建 TPT 映射（Table 属性是一个新的数据注释，已添加到 CTP5 中的 System.ComponentModel.DataAnnotations 命名空间中。
> 
> 如果您更喜欢 fluent API，那么您可以使用 ToTable() 方法创建 TPT 映射：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<BankAccount>().ToTable("BankAccounts");
    modelBuilder.Entity<CreditCard>().ToTable("CreditCards");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T12:13:55.637

当您使用子类时，需要使用 Discriminator 列来区分每种类型的子类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-01T20:35:18.683

删除鉴别器列并将名为 PaymentId 的列改为鉴别器的示例代码，从而解决了您的两个问题。基于 Microsoft 的 Fluent Api 原始文档。

[https://msdn.microsoft.com/en-us/library/jj591617%28v=vs.113%29.aspx?f=255&MSPPError=-2147217396](https://msdn.microsoft.com/en-us/library/jj591617%28v=vs.113%29.aspx?f=255&MSPPError=-2147217396)

```
public enum MyEnum
{ 
    Value1, Value2
}

public class MyBaseClass

{ 
    [NotMapped]
    public MyEnum PaymentId { get; protected set; }
}

public class DerivedOne: MyBaseClass
{
    public DerivedOne()
    {
        PaymentId = MyEnum.Value1;
    } 
}

public class DerivedTwo: MyBaseClass
{
    public DerivedTwo()
    {
        PaymentId = MyEnum.Value2;
    }
}

public class MyDbContext : DbContext
{
    DbSet<MyBaseClass> MyBaseClass { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<MyBaseClass>()
            .Map<DerivedOne>(x => x.Requires("PaymentId").HasValue((int)PaymentId.Value1))
            .Map<DerivedTwo>(x => x.Requires("PaymentId").HasValue((int)PaymentId.Value2));
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-01T21:50:29.700

为了避免表中的鉴别器列，您只需在派生类上添加注释 [NotMapped]。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-24T12:17:28.167

由于“GiftCouponPayment”和“ClubCardPayment”都派生自“PaymentComponent”，EF 不会使用单独的表，而是需要该列。如果您想要不同的行为，则必须覆盖默认表访问并将字段映射到您的类（我认为您不想这样做）不确定是否有简单的方法来实现这一点。从实体开始，我知道有一种方法可以通过创建表格的模板。
外键列名也是如此。EF 使用这种方式为键/外键名称创建名称。如果您想根据需要格式化表格，则必须自己完成所有操作，这导致了为什么要使用 EF 的问题。
除了化妆品，还有什么特别的原因要这样做吗？

# apache - 为什么 Apache Avro 使用 JSON 来定义模式？

> ID：11630517
> 
> 赞同：1
> 
> 时间：2012-07-24T12:06:39.213
> 
> 标签：apache, hadoop, avro

为什么 Apache Avro 使用 JSON 来定义模式？为什么不直接使用 IDL 来定义模式呢？IDL 转 JSON 有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:56:42.023

如果您可以使用流行的现有格式，为什么要重新发明轮子并以某种专有格式定义 IDL。XML 也符合这个要求，但 XML 非常冗长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:16:25.647

因为 JSON 是可序列化的、无处不在的，并且是原始模式定义机制。

请记住，Avro 是平台中立的，它必须继续支持使用原始模式 def 的平台和库——这就是在消息中发送的模式。如果您开始只传输 IDL，那么一切都会中断。

# java - GXT 3 布局容器：水平和垂直与 HBox 和 VBox

> ID：11630519
> 
> 赞同：2
> 
> 时间：2012-07-24T12:06:44.497
> 
> 标签：java, gwt, layout, gxt

例如，您能解释一下 Horizo​​ntalLayoutContainer 和 HBoxLayoutContainer 之间的区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T12:42:18.723

阅读 JavaDoc 5 分钟后发现`HBoxLayoutContainer`：

*   支持自动溢出
*   每个孩子都以最小和最大尺寸布置（在容器的轴上，所以这里在水平轴上，因此是最小/最大宽度）
*   可能在孩子之间分配剩余空间（*flex*）

鉴于`HorizontalLayoutContainer`：

*   （可能）在孩子不适合时滚动
*   以固定的宽度和高度（或它们的固有大小）布置其子项。

我的理解是在引擎盖下`HBoxLayoutContainer`使用 CSS3[灵活盒模型](http://www.html5rocks.com/en/tutorials/flexbox/quick/)`HorizontalLayoutContainer`，而宁愿使用`display: inline-box`or `float`（或由 JavaScript 控制的等价物，可能使用`position: absolute`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T16:15:47.040

一些例子会有所帮助。假设您在窗口中有一个固定大小的面板。您想用垂直堆栈的小部件填充面板，所以它看起来像这样：

```
[Select all]
[ ] Check box #1
[ ] Check box #2
...
[ ] Check box #n 
```

如果列表太长，您需要复选框的垂直滚动条，但“全选”按钮不应滚动。

包含所有复选框的面板应该是一个 VerticalLayoutContainer。这很明显，因为 VBoxLayoutContainer 没有 getScrollSupport() 方法。

不明显的是外部面板（包含“全选”按钮和滚动面板的面板）也需要是一个 VerticalLayoutContainer。外部面板将采用其父级给定的大小，并将强制其子级适应自身。如果外面板是 VBoxLayout 面板，则滚动条会在内面板中消失。问题是外面板会使其自身和内面板尽可能大，以包含所有复选框。由于内部面板很大，滚动条永远不会出现。由于外板非常大，它会被切断。看起来您忘记将滚动条添加到内面板，即使您的错误出现在外面板中。

第二个示例：让我们在第一行添加更多按钮。

```
[Select all] [Select none] [Help]
[ ] Check box #1
[ ] Check box #2
...
[ ] Check box #n 
```

在第一个示例中，我们将 [Select all] 按钮直接放入外部面板中。在这种情况下，我们需要制作一个新面板来保存按钮。在这种情况下，您需要一个 HBoxLayoutContainer。HBoxLayoutContainer 会自动将其高度设置为内部按钮的高度，外部面板会自动为 HBoxLayoutContainer 预留足够的空间。相反，如果您使用 Horizo​​ntalLayoutContainer，则该容器不会自动设置其高度。除非您手动设置该容器的高度（糟糕！），否则它的高度将为 0！即它会消失。

总之，当您在这些容器之间进行选择时，最重要的问题是该容器将如何与其父容器交互，而不是与其子容器交互。如果您希望容器选择自己的大小（如按钮栏），请使用 HBoxLayoutContainer 或 VBoxLayoutContainer。如果您希望容器使用其父级推荐的大小（如固定大小窗口中的主面板），请使用 Horizo​​ntalLayoutContainer 或 VerticalLayoutContainer。

如果您没有从 javadocs 中得到它，请不要感到难过。我花了几个小时的阅读和反复试验来弄清楚这一点。

# regex - 如何做一个需要或不需要两个数字之间的点的正则表达式？

> ID：11630520
> 
> 赞同：0
> 
> 时间：2012-07-24T12:06:49.210
> 
> 标签：regex, replace

我希望实现一个需要或不需要两个数字之间的点的正则表达式。我想管理 int 和 double 数字：用户可以输入一个数字，例如“1”或“1.5”，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:09:12.260

使用这个正则表达式：

`d+([,.]d+)?`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:09:45.000

以下将完成这项工作：

```
^([1-9][0-9]*|0)(\.[0-9]+)?$ 
```

**编辑**

*   固定前导零情况
*   [演示](http://regexr.com?31kmo)

# markdown - 使用 Pathogen + Localvimrc 选择性地启用 VIM 插件

> ID：11630522
> 
> 赞同：2
> 
> 时间：2012-07-24T12:06:52.607
> 
> 标签：markdown, vim, pathogen

我正在处理不同的项目，我想为每个项目选择启用（或禁用）哪些插件。我正在使用 Pathogen 来管理我的插件。

插件列表：

```
.vim \
     |-bundle \
              |-vim-markdown
              |-latexsuite
              |-dirdo
              |-localvimrc
              |-nerdtree
     |-autostart
     |-doc 
```

我有一个 main `.vimrc`，默认情况下启用所有插件，并且在[Localvimrc](https://github.com/embear/vim-localvimrc)`lvimrc`启用的每个项目主目录中都有一个本地，我在其中将一些插件添加到禁用的插件列表中。

### `.vimrc`

```
" Enables vim-pathogen and disables nearly all plugins
call pathogen#runtime_append_all_bundles()
call pathogen#helptags()
let g:pathogen_disabled = []
" This makes vim invoke Latex-Suite when you open a tex file.
filetype plugin on 
```

### 乳胶项目的`lvimrc`

```
let g:pathogen_disabled = []
call add(g:pathogen_disabled, 'vim-markdown') 
```

### 博客项目的`lvimrc`

```
let g:pathogen_disabled = []
call add(g:pathogen_disabled, 'latexsuite') 
```

## 问题

一切正常，除了当我打开我的博客的 html/markdown 文件时没有加载[的 vim-markdown](https://github.com/tpope/vim-markdown)（我已经在 中添加了 *.html 扩展名 `ftdetect/markdown.vim`）。此外，在编辑我的博客文件时`vim-markdown`的输出中没有列出。`:scriptnames`

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:48:47.103

您知道您可以拥有多个捆绑目录吗？您可以为不同的项目创建不同的捆绑目录。

所以你可以做这样的事情：

```
runtime bundle_main/pathogen/autoload/pathogen.vim
call pathogen#infect('bundle_main')
call pathogen#infect('bundle_projectX')
call pathogen#infect('bundle_projectY')
call pathogen#helptags() 
```

您也可以有条件地加载插件文件夹。

还有关于 vim-markdown：有很多实现。见[https://github.com/hallison/vim-markdown](https://github.com/hallison/vim-markdown)似乎维护得更积极了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:58:41.777

会增加`filetype plugin on`每一个`.lvimrc`帮助来解决问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:48:55.550

作为 VAM 开发人员，我可以说我们必须添加[以下内容](https://github.com/MarcWeber/vim-addon-manager/blob/379bee0af1fb51e433e926640599293ba543dd4a/autoload/vam.vim#L267-L270)才能使 ftdetect 插件正常工作。简而言之：向 &rtp 添加路径不会导致获取 ftdetect 文件，因此我们必须手动获取它们。Pathogen 对此也有[hack](https://github.com/tpope/vim-pathogen/blob/master/autoload/pathogen.vim#L107-L112)，但它使用`filetype off`then `filetype on`。使用时不会调用此 hack `pathogen#runtime_append_all_bundles`，因此要么添加

```
call pathogen#cycle_filetype() 
```

之后`pathogen#runtime_append_all_bundles`或只是使用`pathogen#infect`它来代替它为您执行此操作。如果这不起作用，请尝试添加

```
unlet! g:did_load_filetype 
```

在调用病原体之前。

您还可以迁移到[VAM](https://github.com/MarcWeber/vim-addon-manager)：像病原体一样，它将所有插件放在单独的目录中，但与它不同的是，您必须指定要激活的插件，而不是默认激活所有插件并将其列入黑名单。在这里，您不能使用记录在案的 API 并避免同时运行此 hack。

# firefox - Can't see customize toolbar icon

> ID：11630526
> 
> 赞同：0
> 
> 时间：2012-07-24T12:07:09.303
> 
> 标签：firefox, firefox-addon, customization, toolbar

I want a icon in the Browsertoolbar - that works. See image one

[http://s18.postimage.org/njeyj7ekn/Neues_Bild.png](http://s18.postimage.org/njeyj7ekn/Neues_Bild.png)

But why I can't see the icon in the icon selection box?

[http://s18.postimage.org/pzgrx1wnb/Neues_Bild_1.png](http://s18.postimage.org/pzgrx1wnb/Neues_Bild_1.png)

I get only the toolbar icons.

Here are my code snippets:

XUL:

```
<toolbarpalette id="BrowserToolbarPalette">
      <toolbarbutton id="megxbar-ide-button" label="&MegxBarSidebar.label;" class="toolbarbutton-1 chromeclass-toolbar-additional" tooltiptext="&MegxBarSidebar.label;" observes="viewSidebar_MegxBar" />
   </toolbarpalette> 
```

CSS:

```
@namespace url('http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul');

#megxbar-ide-button {
  list-style-image: url(chrome://MegxBar/skin/megxbar24.png);

}

toolbar[iconsize="small"] #megxbar-ide-button {

    list-style-image: url(chrome://MegxBar/skin/megxbar16.png);

   } 
```

And I have one more question. How could I set the icon per default on that positon of picture number 1? I mean, I start the browser an see the icon of the extension after the first restart after the installation.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:24:58.133

您的样式文件似乎仅适用于浏览器窗口，不适用于自定义窗口。因此该图标以默认样式显示。

您可以简单地在文件中添加[样式覆盖](https://developer.mozilla.org/en/Chrome_Registration#style)`chrome.manifest`：

```
style chrome://global/content/customizeToolbar.xul chrome://MegxBar/skin/ff-overlay.css 
```

# php - Special characters in slug (in All-in-One Calendar - WordPress) result in error 404

> ID：11630527
> 
> 赞同：0
> 
> 时间：2012-07-24T12:07:11.573
> 
> 标签：php, wordpress

In my site I use the All-in-One Calendar plugin by Then.ly. It shows events from external iCal-feeds. Everything works fine, except for one thing: if the title of an event ends with special characters (e.g. stars), clicking on the Read more button ('Lees meer') results in a 404 error. If I manually remove the stars from the end of the slug, everything works fine.

Example: view on [July 25](http://www.luchtspin.nl/kalender): *GWOEMUL / THE HOST ★★★★*. Click on it to expand and next click on the 'Lees meer' button. (The slug for this event is "../gwoemul-the-host-★★★★/..")

My question: how do I automatically remove special characters (or make them work!) from the **slugs** that contain them?

Thanks for your help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:28:20.130

对于那些感兴趣的人：我能够在另一个名为[Strings Sanitizer](http://wordpress.org/support/plugin/strings-sanitizer)的插件的帮助下解决这个问题。

# android - android 4.x 运行异步任务时如何处理屏幕方向变化

> ID：11630530
> 
> 赞同：9
> 
> 时间：2012-07-24T12:07:40.770
> 
> 标签：android, android-asynctask, screen-orientation

我尝试实现以下代码来处理屏幕方向更改。

```
****DataBaseUpdateService.java****

public class DataBaseUpdateService extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 

        Updatetask Task = new Updatetask(this.getApplicationContext());
            if(Task.getStatus() == AsyncTask.Status.PENDING){
            Task.execute();};
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
    }

    @Override
    public void  onPause() {
        super.onPause();
    }

    @Override
    public void onResume() {
        super.onResume();
    }
} 
```

==================================================== =========================

```
****Androidmanifest.xml****
 <activity 
  android:name=".DataBaseUpdateService"
  android:configChanges="keyboardHidden|orientation"/> 
```

这些代码与 android 3.x 或更低版本完美配合。但是，它不适用于 android 4.x。

你知道问题是什么吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-24T12:36:07.277

也增加`screenSize`了价值。

从[文档](http://developer.android.com/guide/topics/manifest/activity-element.html#config)：

> **注意**：如果您的应用程序针对 API 级别 13 或更高级别（由 minSdkVersion 和 targetSdkVersion 属性声明），那么您还应该声明`screenSize`配置，因为当设备在纵向和横向之间切换时它也会改变。

因此，清单应如下所示（如果您想自己处理方向更改）：

```
****Androidmanifest.xml****
 <activity 
  android:name=".DataBaseUpdateService"
  android:configChanges="keyboardHidden|orientation|screenSize"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-05T16:56:03.110

解决方案 1 – 如果您真的需要 AsyncTask，请三思。

解决方案 2 – 将 AsyncTask 放在 Fragment 中。

解决方案 3 – 锁定屏幕方向

解决方案 4 – 阻止重新创建 Activity。

参考：[http ://androidresearch.wordpress.com/2013/05/10/dealing-with-asynctask-and-screen-orientation/](http://androidresearch.wordpress.com/2013/05/10/dealing-with-asynctask-and-screen-orientation/)

.....问题发生是因为在配置更改时重新创建了活动，例如方向更改等。您可以在 asyntask 的 onPreExecuted() 方法中锁定方向更改并在 onPostExecuted() 方法中解锁它。

```
import android.app.Activity;
import android.content.Context;
import android.content.pm.ActivityInfo;
import android.content.res.Configuration;
import android.os.AsyncTask;
import android.widget.Button;
import android.widget.ProgressBar;

public class MyAsyncTask extends AsyncTask<Void, Integer, Void> {
private Context context;
private ProgressBar progressBar;
private Button button;

public MyAsyncTask(ProgressBar progressBar,Context context,Button button){
    this.context=context;
    this.progressBar=progressBar;
    this.button=button;

}

private void lockScreenOrientation() {
    int currentOrientation =context.getResources().getConfiguration().orientation;
    if (currentOrientation == Configuration.ORIENTATION_PORTRAIT) {
        ((Activity) 
     context).setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    } else {
        ((Activity) context). 
     setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    }
}

private void unlockScreenOrientation() {
    ((Activity) context). 
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
}

@Override
protected void onPreExecute() {
    // TODO Auto-generated method stub
    super.onPreExecute();
    progressBar.setMax(100);
    button.setEnabled(false);
    lockScreenOrientation();
}

@Override
protected Void doInBackground(Void... params) {
    // TODO Auto-generated method stub

    for(int i=0;i<=100;i++){
    try {
        Thread.sleep(200);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    publishProgress(i);

    }

return  null;   
}
@Override
protected void onProgressUpdate(Integer... values) {
    // TODO Auto-generated method stub
    super.onProgressUpdate(values);
    progressBar.setProgress(values[0]);
}
@Override
protected void onPostExecute(Void result) {
    // TODO Auto-generated method stub
    super.onPostExecute(result);
    button.setEnabled(true);
    unlockScreenOrientation();
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:36:39.757

我不能 100% 确定这会起作用，但您可以尝试使用 onNonConfigurationChangedInstance() 保存 AsyncTask。

```
// Declare a member variable
private UpdateTast task;

public void onCreate(){

    // Attempt to get the asynctask instance 
    task=(UpdateTask)this.getLastNonConfigurationInstance();

    // If it's null create a new instance
    if(task==null){
       task = new Updatetask(this.getApplicationContext());
        task.execute().

    }

    // If it is not null, then the reference returned by getLastNonConfigurationInstance(); will be used.
}

// And lastly override onRetainNonConfigurationInstance method:
@Override
public Object onRetainNonConfigurationInstance() {          
    return task
} 
```

# php - XML retrieve an item with his attribute?

> ID：11630531
> 
> 赞同：0
> 
> 时间：2012-07-24T12:07:45.853
> 
> 标签：php, xml, domdocument

I have a XML like that :

```
<DescriptionsComplementaires>
    <DetailDescriptionComplementaire lang="fr" libelle="Descriptif" type="16.01.04">
        <Description lang="fr" libelle="Tarifs en clair" type="16.02.67">Gratuit</Description>
    </DetailDescriptionComplementaire>
    <DetailDescriptionComplementaire lang="fr" libelle="Descriptif" type="16.01.04">
        <Description lang="fr" libelle="Présentation, descriptif commercial" type="16.02.30">Chaussure de marche conseillées. De 12h à 14h sur présentation du ticket remis au départ: Apéritif offert par la commune des Haies Assiette dégustation de produits du terroir offerte pas la communauté de communes. Petit marché de producteurs locaux. Animations et stands d'information. Exposition "les 100 paniers du monde" Café et buvette. 
        </Description>
    </DetailDescriptionComplementaire>
</DescriptionsComplementaires>
    ........ 
```

How can i retrieve item with libelle="XXX" in php ? I use DOMDocument().

Edit :

```
$dom = new DOMDocument;
$dom->load('(629)_ListeOI_fr_20120720_043502.xml');
$attr = "Présentation, descriptif court";
$query = "//*[@libelle='{$attr}']";
$xpath = new DOMXPath($dom);
$entries = $xpath->query($query);

foreach ($entries as $entry) {
    //i don't know what to do here for display items
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:10:50.173

使用 PHP 的 SimpleXML::XPath [http://php.net/manual/en/simplexmlelement.xpath.php](http://php.net/manual/en/simplexmlelement.xpath.php)而不是您的方法。您的代码将被简化，看起来像这样：

```
$xml = new SimpleXMLElement($xmlStr); 
$res = $xml->xpath("//*[@libelle=XXX]"); 
print_r($res); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:19:52.763

DomDocument xpath

```
$dom = new DOMDocument;
$dom->loadXML($xml_string);
$attr = "Descriptif";
$query = "//*[@libelle='{$attr}']";
$xpath = new DOMXPath($dom);
$entries = $xpath->query($query); 
```

迭代结果：[http ://www.php.net/manual/en/domxpath.query.php](http://www.php.net/manual/en/domxpath.query.php)

# eclipse - file too large for eclipse

> ID：11630532
> 
> 赞同：2
> 
> 时间：2012-07-24T12:07:45.460
> 
> 标签：eclipse, memory-management, out-of-memory, heap-memory

So... I was generating queries and then I pastes one particularly long one into eclipse, eclipse encountered a heap error and then crashed. I thought, no big deal, I can just go back in and delete a bunch, except for... every time I try to look at the file now eclipse will just crash. Either a heap error or a gc overhead limit error. I plan on just deleting this from outside eclipse, but I really want to know if there are any clever ways of attacking this problem. It's less than 14 megs, and I didn't really think that eclipse would have a problem with it, any insights on why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:08:56.203

首先，确保您调用的是通用文本编辑器。使用扩展名 .txt 命名文件，或者确保您没有与文件类型关联的 SQL 编辑器之类的东西。（检查窗口 | 首选项 | 常规 | 编辑器 | 文件关联）。另一种可能性是右键单击文件，选择打开方式..，然后选择“文本编辑器”。

其次，您可能需要使用更多 JVM Heap 来启动 Eclipse，具体取决于工作区中的其他内容。您可以通过向调用中添加命令行参数 (eclipse -vmargs -Xmx1000M) 或编辑 eclipse.ini 来完成此操作。[您可以在http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F](http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F)阅读更多详细信息

# javascript - how can i get date based on week number and weekday and year in javascript?

> ID：11630540
> 
> 赞同：2
> 
> 时间：2012-07-24T12:08:04.957
> 
> 标签：javascript, date

how can i get date based on week number and weekday and year in javascript?
If i give year is 2012 and weeknumber is 30 and day is monday(1) then how should i get date is 2012-07-23 in javascript?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:11:42.270

你可能对 date.js 有用：

来自这里的最新代码：[http ://www.datejs.com/build/date.js](http://www.datejs.com/build/date.js)

项目页面在这里：[http](http://code.google.com/p/datejs/) ://code.google.com/p/datejs/ ，请注意，我无法从项目主页找到指向最新源的链接。

# html - HTML Email stripping out characters

> ID：11630541
> 
> 赞同：0
> 
> 时间：2012-07-24T12:08:14.883
> 
> 标签：html, email

I currently have a HTML email which I am sending through PHP. The styling and everything with it is fine, the problem is that it is stripping out some characters from my text that is contained within the email.

Here are my headers

```
$from = "noreply@myemail.com";
$headers .= "MIME-Version: 1.0\r\n";
$headers  = "From: ".$from."\r\n"; 
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

Has anybody got any ideas? Thanks in advance

Here's the code in full. Sometimes its spaces, or it will add a space in the middle of the word. Other times it will miss characters out of a word

```
$from = "noreply@mydomain.co.uk";
$headers .= "MIME-Version: 1.0\r\n";
 $headers  .= "From: ".$from."\r\n"; 
 $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

$body = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <!-- Facebook sharing information tags --></head><body leftmargin="0" marginwidth="0" topmargin="0" marginheight="0" offset="0" style="-webkit-text-size-adjust: none;margin: 0;padding: 0;background-color: #000000;width: 100%;"><center><table border="0" cellpadding="0" cellspacing="0" height="100%" width="100%" id="backgroundTable" style="margin: 0;padding: 0;background-color: #000000;height: 100%;width: 100%;"><tr><td align="center" valign="top" style="border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="600" id="templateContainer" style="border: 1px solid #000000;background-color: #000000;"><tr><td align="center" valign="top" style="border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="600" id="templateHeader" style="background-color: #FFFFFF;border-bottom: 0;"> <tr> <td class="headerContent" style="border-collapse: collapse;color: #202020;font-family: georgia;font-size: 34px;font-weight: bold;line-height: 100%;padding: 0;text-align: center;vertical-align: middle;"><a target="_blank" name="sw" href="http://www.mydomain.co.uk" href="" title=""><img src="http://www.mydomain.co.uk/wp-content/uploads/2012/07/header.jpg" style="max-width: 600px;border: 0;height: auto;line-height: 100%;outline: none;text-decoration: none;" id="headerImage campaign-icon" mc:label="header_image" mc:edit="header_image" mc:allowdesigner mc:allowtext></a></td></tr></table></td></tr> <tr><td align="center" valign="top" style="border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="600" id="templateBody"><tr> <td valign="top" class="bodyContent" style="border-collapse: collapse;background-color: #000000;"> <!-- // Begin Module: Standard Content \ --> <table border="0" cellpadding="20" cellspacing="0" width="100%"> <tr> <td valign="top" style="border-collapse: collapse;"> <div mc:edit="std_content00" style="color: #AC9366;font-family: georgia;font-size: 14px;line-height: 150%;text-align: left;"> <h3 class="h3" style="color: #C0B391;display: block;font-family: georgia;font-size: 16px;font-weight: bold;line-height: 100%;margin-top: 0;margin-right: 0;margin-bottom: 10px;margin-left: 0;text-align: left;">Hi Aaron,</h3> <strong>Thanks for registering with us.</strong><br><p style="font-style:italic;">At Wicked, we believe you can get lots of pleasure by sharing. So we\'ll be sharing the details of our launch with you, plus some wonderfully wicked behind the scenes coverage of our photography shoot, featuring our luxury lingerie collection designed exclusively by <a href="http://www.mydomain.co.uk/interviews/wicked/" target="_blank" name="leanna" style="color: #C0B391;font-weight: normal;text-decoration: underline;">Leanne Brooke</a>.<br><br> We\'ll also give you the chance to win invitations to our VIP launches (in London &amp; Leeds), as well as having one of the first ever SW lingerie pieces, made to measure for you, by Leanne. <br><br> Until then... <br><br> SW.</p><br><br><br><br> <a href="http://www.twitter.com/wearewicked" target="_blank" name="swtwitter" style="color: #C0B391;font-weight: normal;text-decoration: underline;"><img src="http://www.mydomain.co.uk/wp-content/uploads/2012/07/t-email.jpg" alt="" style="border: 0;height: auto;line-height: 100%;outline: none;text-decoration: none;display: inline;"></a> &nbsp; <a href="https://www.facebook.com/mypage" target="_blank" name="swfacebook" style="color: #C0B391;font-weight: normal;text-decoration: underline;"><img src="http://www.mydomain.co.uk/wp-content/uploads/2012/07/f-email.jpg" alt="" style="border: 0;height: auto;line-height: 100%;outline: none;text-decoration: none;display: inline;"></a>  &nbsp; <a href="http://www.mydomain.co.uk" target="_blank" name="swsite" style="color: #C0B391;font-weight: normal;text-decoration: underline;"><img src="http://www.mydomain.co.uk/wp-content/uploads/2012/07/sw-email.png" alt="" style="border: 0;height: auto;line-height: 100%;outline: none;text-decoration: none;display: inline;"></a>  &nbsp; <a href="http://www.mydomain.co.uk/blog" target="_blank" name="swblog" style="color: #C0B391;font-weight: normal;text-decoration: underline;"><img src="http://www.mydomain.co.uk/wp-content/uploads/2012/07/blog.png" alt="" style="border: 0;height: auto;line-height: 100%;outline: none;text-decoration: none;display: inline;"></a></h3></div></td> </tr> </table></td> </tr> </table></td></tr><tr><td align="center" valign="bottom" style="border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="600"> <tr> <td style="border-collapse: collapse;"><img src="http://www.mydomain.co.uk/wp-content/uploads/2012/07/footer.jpg" style="max-width: 600px;border: 0;height: auto;line-height: 100%;outline: none;text-decoration: none;" id="headerImage campaign-icon" mc:label="header_image" mc:edit="header_image" mc:allowdesigner mc:allowtext> </td> </tr> </table> <!-- // End Template Footer \ --> </td> </tr> </table> <br> </td> </tr> </table> </center> </body></html>';

 mail($email, 'My Subject line', $body, $headers); 
```

(see [pastebin](http://pastebin.com/1ySkc79z) for easier reading)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:10:18.287

如果您的内容的行数超过 1000 个字符，大多数邮件服务器会强制对其进行重新格式化。将您的内容包装在quoted-printable 或base64 编码中，或者只是在每75 个字符左右的空白字符上插入换行符。

也同意 ISO 8859-1 在这里似乎可疑的评论，尽管它似乎不会影响这个特定的消息。但是在这个时代，您编写的任何代码都应该使用 UTF-8。

# compilation - Writing an LLVM Pass - failing

> ID：11630544
> 
> 赞同：1
> 
> 时间：2012-07-24T12:08:26.550
> 
> 标签：compilation, llvm, clang

I'm working though [http://llvm.org/docs/WritingAnLLVMPass.html](http://llvm.org/docs/WritingAnLLVMPass.html), trying to write a very simple pass. (Assume I'm using 'Joe' rather than 'hello', because there is already a 'hello' in the relevant directory)

I create the directory 'joe' where I should , I create the suggested cpp file in 'joe' (although I note that none of the nearby directory's have any cpp files in them) and I name it 'joe.cpp' because I don't believe I've been told differently...

I reach the part of the documentation where it says 'compile the file with a simple "gmake" command in the local directory' but I get the error

> make: *** No rule to make target `/Users/joXXXXX/llvm/llvm/lib/Transforms/joe/Makefile', needed by`Makefile'. Stop.

which is utterly confusing. I note the similarity to [this case](https://stackoverflow.com/questions/4763381/no-rule-to-make-target-makefile-needed-by-makefile), but in that case running ../config and then a make in the root directory solved in the problem. In my task this takes 20 minutes and then nothing has changed... could anyone tell me what is meant to have happened or give me a trace of what success looks like?

Edit - Local Makefile looks like this:

```
# Makefile for hello pass
#
# # Path to top level of LLVM hierarchy
LEVEL = ../../..
#
# # Name of the library to build
LIBRARYNAME = joe
#
# # Make the shared library become a loadable module so the tools can 
# # dlopen/dlsym on the resulting library.
# LOADABLE_MODULE = 1
BUILD_ARCHIVE = 1
# # Include the makefile implementation stuff
include $(LEVEL)/Makefile.common 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T01:25:27.323

我遇到了同样的问题并通过重新阅读教程解决了这个问题：

> 首先，配置和构建 LLVM。这需要直接在 LLVM 源代码树内完成，而不是在单独的对象目录中完成。

这意味着您不应该按照 LLVM 入门中的建议创建“构建”文件夹。假设您在 中下载了 llvm 源代码`$LLVM`，下面是我让它工作的列表：

*   在 $LLVM/lib/Transforms/ 中创建一个新文件夹，比如 MyHello，并在教程中创建一个 pass 所需的文件。

*   $cd $LLVM

*   $./配置

*   $make

*   $cd 库/转换/MyHello

*   $make

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T18:09:56.770

所以事实证明，当帮助文件显示“lib/Transforms/Hello”时，它的意思是“somestuff/llvm/lib/Transforms/Hello”而不是“/somestuff/build/lib/Transforms/Hello”。事后看来，这并不像它可能的那样不透明，但我想留下这个答案来帮助其他可能在文档中错过这个的人......

# bash - 如何在bash中增加目录号？

> ID：11630546
> 
> 赞同：2
> 
> 时间：2012-07-24T12:08:30.413
> 
> 标签：bash, increment

我在 bash 中实现了一个看门狗，它在某些条件下重新启动服务，它确实将旧日志移动到旧目录。

问题是我确实想将日志移动到`old_1`, `old_2`, ... 如果前一个存在。

如何在 bash 中实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T12:11:30.323

您可以像这样搜索第一个不存在的日志：

```
#!/bin/bash
num=1
while [[ -f log_$num ]] ; do
    let num++
done
echo Fresh new: log_$num 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:13:00.777

写起来很痛苦，处理丢失的文件夹（这会破坏 choroba 解决方案的实例）。这就是为什么大多数需要日志的系统只是在它们的名称后加上日期，我鼓励你也这样做，这样更容易处理，也更容易在之后检索日志。

# php - 针对 xml 模式的 XML 验证在 php 中失败，但在 .NET (VS2010) 中有效

> ID：11630551
> 
> 赞同：1
> 
> 时间：2012-07-24T12:08:42.007
> 
> 标签：php, xml, xsd, primary-key, keyref

我有几个 xml 文件，但我将只展示一个和我验证它的 xsd。让我首先描述一下这个问题。我在 VS2010 中编辑文件，VS 运行时解析器在编辑 xml 文件时没有显示错误。然后，当我运行一个加载 xml 文件并根据 xml 模式验证它的 php 命令行脚本时，它以一个 excption 结尾

> 警告：DOMDocument::schemaValidate(): 元素“元素”：没有为 keyref 'elementRef' 的键序列 ['answers'] 找到匹配项。

但是，我真的看不到 xsd 文件中的错误。

xml文件：

```
<domain xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="Answer" namespace="Custom\Surveys" xsi:noNamespaceSchemaLocation="../../xsd/domain.xsd">
    <entities>
        <entity name="Answer" main="true" schema="answers"/>
    </entities>
    <bindings>      
    </bindings>
    <key>
        <element entity="answers" property="question_option_id"/>
        <element entity="answers" property="survey_voter_id"/>
    </key>
</domain> 
```

xsd 文件中的 XML 架构：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">   
    <xs:element name="domain">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="entities">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="entity" minOccurs="1" maxOccurs="unbounded">
                                <xs:complexType>
                                    <xs:attribute name="name" type="xs:string" use="required" id="entityName" />
                                    <xs:attribute name="main" type="xs:boolean" use="optional" default="false" />
                                    <xs:attribute name="schema" type="xs:string" use="required" id="schemaName" />                                  
                                </xs:complexType>                               
                            </xs:element>
                            <xs:element name="multientity" minOccurs="0" maxOccurs="1">
                                <xs:complexType>
                                    <xs:attribute name="name" type="xs:string" use="required" />
                                    <xs:attribute name="schema" type="xs:string" use="required" />
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>                   
                </xs:element>
                <xs:element name="bindings" minOccurs="0" maxOccurs="1">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="bind" minOccurs="0" maxOccurs="unbounded">
                                <xs:complexType>
                                    <xs:sequence>
                                        <xs:element name="referenced">
                                            <xs:complexType>
                                                <xs:attribute name="entity" type="xs:string" use="required" />
                                                <xs:attribute name="property" type="xs:string" use="required" />
                                            </xs:complexType>
                                            <xs:keyref name="referencedRef" refer="entityId">
                                                <xs:selector xpath="." />
                                                <xs:field xpath="@entity" />
                                            </xs:keyref>
                                        </xs:element>
                                    </xs:sequence>
                                    <xs:attribute name="entity" type="xs:string" use="required" />
                                    <xs:attribute name="property" type="xs:string" use="required" />
                                </xs:complexType>
                                <xs:keyref name="bindRef" refer="entityId">
                                    <xs:selector xpath="." />
                                    <xs:field xpath="@entity" />
                                </xs:keyref>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
                <xs:element name="key">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="element" minOccurs="1" maxOccurs="unbounded">
                                <xs:complexType>
                                    <xs:attribute name="entity" type="xs:string" use="required" />
                                    <xs:attribute name="property" type="xs:string" use="required" />
                                </xs:complexType>
                                <xs:keyref name="elementRef" refer="entityId">
                                    <xs:selector xpath="." />
                                    <xs:field xpath="@entity" />
                                </xs:keyref>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>                   
                </xs:element>
            </xs:sequence>
            <xs:attribute name="name" type="xs:string" use="required" />            
            <xs:attribute name="namespace" type="xs:string" use="required" />
        </xs:complexType>
        <xs:key name="entityId">
            <xs:selector xpath="./entities/entity|./entities/multientity" />
            <xs:field xpath="@schema" />
        </xs:key>
    </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:18:51.160

我找到了一个解决方案，我必须在最后定义根元素中的所有键和 keyrefs。

这是新的 xsd 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">   
    <xs:element name="domain">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="entities">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="entity" minOccurs="1" maxOccurs="unbounded">
                                <xs:complexType>
                                    <xs:attribute name="name" type="xs:string" use="required" id="entityName" />
                                    <xs:attribute name="main" type="xs:boolean" use="optional" default="false" />
                                    <xs:attribute name="schema" type="xs:string" use="required" id="schemaName" />                                  
                                </xs:complexType>                               
                            </xs:element>
                            <xs:element name="multientity" minOccurs="0" maxOccurs="1">
                                <xs:complexType>
                                    <xs:attribute name="name" type="xs:string" use="required" />
                                    <xs:attribute name="schema" type="xs:string" use="required" />
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>                   
                </xs:element>
                <xs:element name="bindings" minOccurs="0" maxOccurs="1">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="bind" minOccurs="0" maxOccurs="unbounded">
                                <xs:complexType>
                                    <xs:sequence>
                                        <xs:element name="referenced">
                                            <xs:complexType>
                                                <xs:attribute name="entity" type="xs:string" use="required" />
                                                <xs:attribute name="property" type="xs:string" use="required" />
                                            </xs:complexType>                                           
                                        </xs:element>
                                    </xs:sequence>
                                    <xs:attribute name="entity" type="xs:string" use="required" />
                                    <xs:attribute name="property" type="xs:string" use="required" />
                                </xs:complexType>                               
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
                <xs:element name="key">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="element" minOccurs="1" maxOccurs="unbounded">
                                <xs:complexType>
                                    <xs:attribute name="entity" type="xs:string" use="required" />
                                    <xs:attribute name="property" type="xs:string" use="required" />
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>                   
                </xs:element>
            </xs:sequence>
            <xs:attribute name="name" type="xs:string" use="required" />            
            <xs:attribute name="namespace" type="xs:string" use="required" />
        </xs:complexType>
        <xs:key name="entityId">
            <xs:selector xpath="./entities/entity|./entities/multientity" />
            <xs:field xpath="@schema" />
        </xs:key>
        <xs:keyref name="elementRef" refer="entityId">
            <xs:selector xpath="./key/element" />
            <xs:field xpath="@entity" />
        </xs:keyref>
        <xs:keyref name="bindRef" refer="entityId">
            <xs:selector xpath="./bindings/bind" />
            <xs:field xpath="@entity" />
        </xs:keyref>
        <xs:keyref name="referencedRef" refer="entityId">
            <xs:selector xpath="./bindings/bind/referenced" />
            <xs:field xpath="@entity" />
        </xs:keyref>
    </xs:element>
</xs:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:26:19.557

如果可能的话，我建议始终将 keyref 及其对应的键放在同一级别（在同一元素声明中）。这在理论上不是必需的，但是当你不需要时，规则非常复杂，有时甚至违反直觉。（我不告诉你规则是什么的原因是我知道阅读这方面的规范会伤害我的大脑，如果不阅读规范，我可能无法记住规则。）

# java - Keep iconified JInternalFrames on top always

> ID：11630554
> 
> 赞同：2
> 
> 时间：2012-07-24T12:08:48.590
> 
> 标签：java, swing, jinternalframe

I have 5 `JInternalFrames` in one `JDesktopPane`. I have to keep 4 `JInternalFrames` iconified and keep only 1 active. But when I maximize 1 `JinternalFrame`, other iconified `JInternalFrames` goes behind it, so I have to iconify the active `JInternalFrame` and then restore the required one.

Is there a way that I can keep all my Iconified `JInternalFrames` on top always?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:40:10.410

使用[JDesktopPane.setComponentZOrder(java.awt.Component, int)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDesktopPane.html#setComponentZOrder%28java.awt.Component,%20int%29)并确保图标化的框架位于未图标化的层之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:23:41.360

我不确定这对你的情况是否有帮助，但如果你想有一个特定的顺序（例如，一个 JInternalFrame 应该总是在其他人之前），那么就不要使用 JDesktopPane。只需使用 DefaultPane：

默认：

```
setContentPane(new JDesktopPane());  // Will bring the currently activated JInternalFrame to top
add(frame_A);
add(frame_B);
add(frame_C); 
```

总在最前面：

```
// setContentPane(new JDesktopPane()); // Dont use the DesktopPane
add(frame_A); // Will always be on top
add(frame_B); // Will always be in front of frame c but behind frame a
add(frame_C); 
```

# javascript - jQuery 名称间距和 setTimeout

> ID：11630556
> 
> 赞同：0
> 
> 时间：2012-07-24T12:08:51.420
> 
> 标签：javascript, jquery, jquery-plugins, namespaces

我正在尝试根据此处的方向使用名称间距来构建 jQuery 插件：http: [//docs.jquery.com/Plugins/Authoring#Namespacing](http://docs.jquery.com/Plugins/Authoring#Namespacing)

现在我遇到了一个问题，我的插件需要使用 setTimeout 来触发它的一种方法，

```
var jScrollerMethods = {
    ready:function(){
        return this.each(function(){
        var self = this,
    $this = $(this),
        data = $this.data('jScroller');

        settings.timeoutHandle = setTimeout(function(){
            if(settings.direction = "left"){
                this.moveLeft();
            }else if(settings.direction = "right"){
                this.moveRight();
            }
        }, settings.time);

        $this.data('jScroller', {
            settings: settings,
            element: this
        });
    });
}
$.fn.jScroller = function(call){
    if ( jScrollerMethods[call] ) {
      return jScrollerMethods[call].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof call === 'object' || ! call ) {
        if (call) { $.extend(settings, call); }
        return jScrollerMethods.init.apply( this, call );
    } else {
        $.error( 'Method ' +  call + ' does not exist on jQuery.jScroller' );
    } 
} 
```

但是我虽然会发生 setTimeout 是从窗口而不是插件对象触发的，并且我希望插件在每页上不止一次可用，所以我不能只将当前对象保存到窗口中，我该如何实现这一点?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:28:40.823

我发现在`this`外部使用`return this.each`时会给你准确的选择器结果

所以通过一些工作，我设法做到了，

```
var jScrollerMethods = {
    ready:function(){
        selector = this;

        return this.each(function(){
        var self = this,
    $this = $(this),
        data = $this.data('jScroller');

        settings.timeoutHandle = setTimeout(function(){
            if(settings.direction = "left"){
                selector.jScroller("moveLeft");
            }else if(settings.direction = "right"){
                selector.jScroller("moveRight");
            }
        }, settings.time);

        $this.data('jScroller', {
            settings: settings,
            element: this
        });
    });
}
$.fn.jScroller = function(call){
    if ( jScrollerMethods[call] ) {
      return jScrollerMethods[call].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof call === 'object' || ! call ) {
        if (call) { $.extend(settings, call); }
        return jScrollerMethods.init.apply( this, call );
    } else {
        $.error( 'Method ' +  call + ' does not exist on jQuery.jScroller' );
    } 
} 
```

# jquery - jQuery：内联点击

> ID：11630559
> 
> 赞同：1
> 
> 时间：2012-07-24T12:08:55.660
> 
> 标签：jquery

我有一个 INPUT，里面有一个 onclick 事件

```
<input type="radio" name="shipment" value="1" onclick="if (this.checked) $('#total').html(2);" style="display: none; "> 
```

和一个元素

```
<a class="shipment">shipment</a> 
```

和jQuery代码

```
$('.shipment').live('click', function () {
   $(this).prev('input[type="radio"]').click(); // input field is checked, but onclick not working
} 
```

如何在输入中调用在线脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:13:18.157

您可以尝试在 a 的点击处理程序中执行以下操作：

```
$('.shipment').live('click', function () {
   $(this).prev('input[type="radio"]').trigger("click");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:14:33.967

永远不要使用 .live() 而不是使用 .on()

```
$(document).on('click','.shipment',function () {
   $(this).prev('input[type="radio"]').click(); 
}); 
```

# database - Zend 表单对象作为字符串

> ID：11630562
> 
> 赞同：0
> 
> 时间：2012-07-24T12:09:11.543
> 
> 标签：database, string, forms, zend-framework

我有一个系统，它在数据库中存储了某些页面内容。在此文本中，我们可以添加自定义脚本，例如 {WIDGET_FORM}，它将文本替换为名为 app_resource_widget_form 的类的内容。到目前为止，这已经奏效，但表单需要由 Zend Form 创建。不幸的是，创建它的函数需要返回一个字符串（html），因为到目前为止我只能返回 zend 表单对象。有谁知道我想做的事情是否可行。在某些时候必须将表单创建为 html，有没有办法手动调用它然后使用它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:58:58.053

`Zend_Form`有一个`__toString()`方法，所以：

```
$html = str_replace('{WIDGET_FORM}', $form->__toString(), $html); 
```

# jquery - jCarousel 的 CSS 问题 - 根本无法解决

> ID：11630564
> 
> 赞同：1
> 
> 时间：2012-07-24T12:09:12.207
> 
> 标签：jquery, html, css

首先请看我准备的[jsfiddle ：](http://jsfiddle.net/E9SgC/14/)

我知道我们不应该依赖外部托管的代码，所以我会将它添加到问题的底部。

我想做的是在[这里复制插件的演示](http://sorgalla.com/projects/jcarousel/examples/static_circular.html)

不同之处在于我正在拉动我的 wordpress 网站的作者，并且这个 html 在页面上正确输出，但由于某种原因，我无法让头像并排坐在轮播中我的页面的整个宽度。

我尝试更改 and 的宽度，`.jcarousel-skin-tango .jcarousel-container-horizontal`这`.jcarousel-skin-tango .jcarousel-clip-horizontal`似乎使它变宽了，但是化身之间的距离也增加了，因此当按下按钮时它们从很远的距离移动而不是它们坐在水平线上他们之间的差距。

更改宽度会弄乱下一个和上一个按钮，但可以轻松修复以匹配新的轮播宽度。

我根本不知道为什么它不像演示版那样出现，我所更改的只是按钮的一些 css。

**非常感谢**任何帮助。

**代码**

**jCarousel 初始化**

```
jQuery(document).ready(function() {

    jQuery('#authorcarousel').jcarousel({
        scroll: 1,
        visible: 1,
        animation: 1000,
        auto: 0,
        wrap: 'circular',
        itemFallbackDimension: 75
    });
});​ 
```

**HTML**

```
<ul id="authorcarousel" class="jcarousel-skin-tango">
    <li>
        <img src="http://cdn2.iconfinder.com/data/icons/humano2/128x128/apps/comix.png" alt="" width="128" height="128" class="photo" />
    </li>
    <li>
        <img src="http://cdn5.iconfinder.com/data/icons/iconshock_guys/128/andrew.png" alt="" width="128" height="128" class="photo" />
    </li>
    <li>
        <img src="http://cdn4.iconfinder.com/data/icons/STROKE/communications/png/128/avatar.png" alt="" width="128" height="128" class="photo" /></li>
    <li>
        <img src="http://cdn2.iconfinder.com/data/icons/holloweenavatars/PNG/Frankenstein.png" alt="" width="128" height="128" class="photo" />
    </li>
    <li>
        <img src="http://cdn5.iconfinder.com/data/icons/iconshock_guys/128/matthew.png" alt="" width="128" height="128" class="photo" />
    </li>
</ul> 
```

**CSS**

```
ul#authorcarousel  {
    list-style: none;
    width: 800px;
    margin: 20px auto 50px auto;
    padding: 0;
}

#authorcarousel li {
    margin: 0 0 5px 0;
    list-style: none;
    height: 90px;
    padding: 15px 0 15px 0;
    float: left;
    width: 90px;
}

#authorcarousel img {
    width: 75px;
    height: 75px;
    float: left;
    margin: 0 10px 0 0;
    padding: 3px;
}

#authorcarousel img:hover {
    opacity: 0.7;
    cursor: pointer;
}

/* = jCarousel
----------------------------------------------- */ 
.jcarousel-skin-tango .jcarousel-container {
    background: #FFFFFF;
    border: none;
}

.jcarousel-skin-tango .jcarousel-direction-rtl {
    direction: rtl;
}

.jcarousel-skin-tango .jcarousel-container-horizontal {
    width: 100px;
    padding: 5px 20px;
} 

.jcarousel-skin-tango .jcarousel-clip {
    overflow: hidden;
}

.jcarousel-skin-tango .jcarousel-clip-horizontal {
    width:  100px;
    height: 110px;
}

.jcarousel-skin-tango .jcarousel-item {
    width: 75px;
    height: 75px;
}

.jcarousel-skin-tango .jcarousel-item-horizontal {
    margin-left: 0;
    margin-right: 10px;
}

.jcarousel-skin-tango .jcarousel-direction-rtl .jcarousel-item-horizontal {
    margin-left: 10px;
    margin-right: 0;
}

.jcarousel-skin-tango .jcarousel-item-placeholder {
    background: #fff;
    color: #000;
 }

 /**
 *  Horizontal Buttons
 */
 .jcarousel-skin-tango .jcarousel-next-horizontal {
     background: #F15A23 url(http://demo.samuli.me/smartstart/img/slider-arrows-medium.png) no-repeat -5px 37px;
    filter: alpha(opacity=60);
    background: rgba(241, 90, 35, 0.6) url(http://demo.samuli.me/smartstart/img/slider-arrows-medium.png) no-repeat -5px 37px;
    color: transparent;
    cursor: pointer;
    display: block;
    font: 0/0 a;
    height: 88px;
    margin: -26.5px 0 0;
    position: absolute;
    text-shadow: none;
    top: 42%;
    left: 90%;
    width: 30px;
    z-index: 90;
    background-position: -42px 36px;    
}

.jcarousel-skin-tango .jcarousel-direction-rtl .jcarousel-next-horizontal {
    left: 5px;
    right: auto;
}

.jcarousel-skin-tango .jcarousel-next-horizontal:hover,
.jcarousel-skin-tango .jcarousel-next-horizontal:focus {
   filter: alpha(opacity=100);
   opacity: 1;
}

.jcarousel-skin-tango .jcarousel-next-horizontal:active {
    filter: alpha(opacity=100);
    opacity: 1;
}

.jcarousel-skin-tango .jcarousel-next-disabled-horizontal,
.jcarousel-skin-tango .jcarousel-next-disabled-horizontal:hover,
.jcarousel-skin-tango .jcarousel-next-disabled-horizontal:focus,
.jcarousel-skin-tango .jcarousel-next-disabled-horizontal:active {
    cursor: default;
    filter: alpha(opacity=100);
    opacity: 1;
}

.jcarousel-skin-tango .jcarousel-prev-horizontal {
    background: #F15A23 url(http://demo.samuli.me/smartstart/img/slider-arrows-medium.png) no-repeat -5px 37px;
    filter: alpha(opacity=60);
    background: rgba(241, 90, 35, 0.6) url(http://demo.samuli.me/smartstart/img/slider-arrows-medium.png) no-repeat -5px 37px;
    color: transparent;
    cursor: pointer;
    display: block;
    font: 0/0 a;
    height: 88px;
    margin: -26.5px 0 0;
    position: absolute;
    text-shadow: none;
    top: 42%;
    left: 17%;
    width: 30px;
    z-index: 90;
}

.jcarousel-skin-tango .jcarousel-direction-rtl .jcarousel-prev-horizontal {
    left: auto;
    right: 5px;
}

.jcarousel-skin-tango .jcarousel-prev-horizontal:hover, 
.jcarousel-skin-tango .jcarousel-prev-horizontal:focus {
    filter: alpha(opacity=100);
    opacity: 1;
}

.jcarousel-skin-tango .jcarousel-prev-horizontal:active {
    filter: alpha(opacity=100);
    opacity: 1;
}

.jcarousel-skin-tango .jcarousel-prev-disabled-horizontal,
.jcarousel-skin-tango .jcarousel-prev-disabled-horizontal:hover,
.jcarousel-skin-tango .jcarousel-prev-disabled-horizontal:focus,
.jcarousel-skin-tango .jcarousel-prev-disabled-horizontal:active {
    cursor: default;
    filter: alpha(opacity=60);
    opacity: 0.6;
} 
```

​</p>

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:49:18.663

玩弄小提琴结束了我：http: [//jsfiddle.net/PWdWR/](http://jsfiddle.net/PWdWR/)

我想说解决您的问题的关键部分在于 javascript: `visible: 6`jcarousel 的选项

另一方面，有很多 CSS 没有改变任何可以删除的内容，下面的类将适应你所看到的：`.jcarousel-skin-tango .jcarousel-clip-horizontal`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:37:03.487

你下载了jcarousel吗？

他们有问题，js坏了，检查这个[url](http://sorgalla.com/projects/jcarousel/lib/jquery.jcarousel.min.js)

他们的[例子](http://sorgalla.com/projects/jcarousel/examples/static_circular.html)也不起作用：

[在这里](http://sorgalla.com/jcarousel/)输入

并下载项目，并使用本地的“js”

# assembly - 使用 xmm 寄存器来保存通用寄存器是否安全？

> ID：11630571
> 
> 赞同：2
> 
> 时间：2012-07-24T12:09:51.277
> 
> 标签：assembly, x86, sse, inline-assembly

```
 pushf       //couldnt store this in other registers 
        movd xmm0,eax//storing in xmm registers instead of   pushing
        movd xmm1,ebx//
        movd xmm2,ecx//
        movd xmm3,edx//
        movd xmm4,edi//end of push backups
        .
        .//doing work
        .
        movd edi,xmm4//pop edi
        movd edx,xmm3//pop edx
        movd ecx,xmm2//pop ecx
        movd ebx,xmm1//pop ebx
        movd eax,xmm0//pop eax
        popf 
```

比我电脑中的 push eax 版本快 %50。这安全吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:57:31.900

是的，只要您（或您正在调用的某些代码）在此期间不将 XMM regs 用于其他任何事情。事实上，这个技巧在 RAM init 之前的 BIOS 代码中很常用。

# javascript - JS 检测离线？我究竟做错了什么

> ID：11630572
> 
> 赞同：2
> 
> 时间：2012-07-24T12:09:53.930
> 
> 标签：javascript, html, offline

我是一个 JS 新手，所以我试图弄清楚如何从 w3c 制作这个示例以在我的 WebApp 中工作，该 WebApp 将在 PhoneGap 框架中运行......

我确信这很容易，但是当事件侦听器被触发时，它会运行带有警报的附加函数，问题是它会在此之后再次执行所有内容。所以说我关掉我的 iphone，我会收到一个警报，然后它会执行下一个警报，上面写着它的在线...任何人...如果你们中的任何人对执行这样的功能有任何更好的想法，请告诉我PhoneGap Cordova 还有另外两种方法。

```
<script>
<!--
window.addEventListener("offline", function(e) {alert("offline");})
window.addEventListener("online", function(e) {alert("online");})
if (navigator.onLine) {
  alert('online')
  //functions to run online
} else {
  alert('offline');
  //offline functions or through into loop
}
-->
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-09T12:13:19.037

您在 addEventListener 函数中缺少一个参数。对我来说，这工作正常：

```
window.addEventListener("offline", function () {
    console.log("Online status: " + navigator.onLine);
}, false);

window.addEventListener("online", function () {
    console.log("Online status: " + navigator.onLine);
}, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:25:10.370

试试这个 `if(window.navigator.onLine) { alert('I am online');}` 我刚刚在控制台中测试过它并且它有效:)

# ios - 为什么 iPhone 5.1 Simulator 提供的调试信息比 4.3 Simulator 少？

> ID：11630576
> 
> 赞同：1
> 
> 时间：2012-07-24T12:10:33.907
> 
> 标签：ios, debugging, ios-simulator, crash-reports

在我的代码中，我通过将 NSNumber 分配给 NSString 犯了一些错误：

```
self.totalLikesLabel.text=[user objectForKey:@"totalLikes"]; 
```

![5.1 Simulator（上）和 4.3 Simulator（下）的崩溃信息比较](../Images/602e1a8077a215e4b1c40d2f9527ce89.png)

当应用程序在上述点崩溃时，5.1 Simulator 没有显示我的代码中哪些行导致崩溃的具体信息。但是，4.3 模拟器做到了！

在这种情况下，我是否必须在 5.1 模拟器中配置一些设置才能让它像 4.3 一样工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:22:33.473

```
1.Go to the breakpoint navigator (left navigation panel 6th one from the left).
2\. Click the "+" button at the bottom
3\. Select Exception Breakpoint
4\. Leave Exception Breakpoint checked
5\. In the Exception: field select "Objective-C"
6\. In the Break: field select "On Throw"
7\. Leave Action: alone (unless you want it to do something)
8\. Leave Option: **unchecked**
9\. Click "Done" 
```

这应该让你看到比 SIGABRT 多一点的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:01:17.720

使用 5.1 模拟器可以获得什么？

为了防止此类运行时错误，您可以`@try {} @catch {}`在分配之前将其封装或检查对象：

```
id s = [user objectForKey:@"totalLikes"];

if ([s isKindOfClass [NSString class]]) ... 
```

# jsf-2 - p:selectOneMenu 第一个ajax请求问题

> ID：11630577
> 
> 赞同：2
> 
> 时间：2012-07-24T12:10:34.390
> 
> 标签：jsf-2, primefaces

当我尝试通过更改 SelectOneMenu 的值来更新 ap:dataGrid 时，PrimeFaces p:selectOneMenu 组件出现问题。

Xhtml:

```
<p:selectOneMenu value="#{bussinessOwnersViewerMB.selectedCity}" effect="explode">
  <f:selectItems value="#{bussinessOwnersViewerMB.cities}" var="city" itemLabel="#{city.cityName}" itemValue="#{city.cityId}"/>  
  <p:ajax listener="#{bussinessOwnersViewerMB.handleCityChange}" update="mainform:bolist"/>
</p:selectOneMenu>

<p:dataGrid id="bolist" var="bo" value="#{bussinessOwnersViewerMB.bOwners}" columns="3" rows="#{bussinessOwnersViewerMB.os}">
  <p:column>
    <p:panel header="#{bo.bOName}">
      <h:panelGrid columns="1">
        <p:graphicImage value="/resources/images/#{bo.boType}/#{bo.bOId}/mainProfile.jpg"/>
      </h:panelGrid>
    </p:panel>
  </p:column>
</p:dataGrid> 
```

问题是，当我第一次更改 selectOneMenu 的值时，数据网格没有得到更新。发生的只是调用 postconstructor 方法，在第一次更改后它工作正常。

我的托管 bean 是一个 viewscoped 托管 bean。

侦听器方法“bussinessOwnersViewerMB.handleCityChange”是：

```
public void handleCityChange(ValueChangeEvent event) {  
  bOwners = bovb.loadAllDistributerByType(new Integer(selectedCity)); // selectedcity is the selected item id 
  os = Integer.toString(bOwners.size());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:31:15.097

在过去，您无法像这样更新 dataGrid；您必须将其包装在一个 panelGroup 中。我不知道这是否发生了变化，但我仍然这样做并且它仍然有效。因此，只需将您的 dataGrid 放在一个 panelGroup 中，然后在您的 ajax 标记中更新 panelGroup（而不是 dataGrid）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-28T10:19:10.580

在我的情况下，问题是由`<p:panel>`包含 a的 a 产生的`<h:panelGroup>`，因此部分提交使用`<p:ajax>`不起作用。当表单中有空字段时会出现此问题`required=true`。

我更新了`<p:panel>`in `<h:panelGroup>`。

从：

```
<p:panel ... >
    ...
    <h:panelGroup ...>
        <!-- Form inside -->
    </h:panelGroup>
    ...
</p:panel> 
```

至

```
<h:panelGroup ... >
    ...
    <h:panelGroup ...>
        <!-- Form inside -->
    </h:panelGroup>
    ...
</h:panelGroup> 
```

# java - 使用 Apache POI 在模板文件中复制宏？

> ID：11630587
> 
> 赞同：1
> 
> 时间：2012-07-24T12:10:58.453
> 
> 标签：java, apache-poi

我的问题：

我有两本工作簿。

Workbook1：从带有宏的模板文件构造

工作簿2：空

在一个循环中，我导出我的数据结构。在每个循环传递中，我将模板复制到 wokrbook2，然后将数据写入其中，标记我所在的行以用于下一个循环传递，然后再次执行相同操作。

最后，我将模板多次（与我拥有数据集的次数一样多）复制到工作簿2，并在相应的模板中写入数据。

我的问题：当我打开我新创建的文件时，原始模板文件中有一个宏消失了。所有数据都正确写入，只是缺少宏功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:21:56.097

问题解决了，也许不合逻辑，但它有效。

我首先将模板复制到新工作簿，然后遍历所有行并将它们丢弃。结果是一张空纸，但宏仍然存在。

然后我从模板工作簿中复制模板行并每次都用数据填充这些行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:15:28.410

我不知道其他解决方案，但 Apache POI 的一个限制是： `Macros can not be created. However, reading and re-writing files containing macros will safely preserve the macros.`

检查[文档](http://poi.apache.org/spreadsheet/limitations.html)

# ant - To get build status through environment variable

> ID：11630590
> 
> 赞同：0
> 
> 时间：2012-07-24T12:11:07.450
> 
> 标签：ant, hudson, jenkins, hudson-plugins, jenkins-plugins

I am using jenkins for continous integration. For my build purpose, i triggering email using Ant task. I am not able to find an environment variable to pass ant for sending email build status(success/failure/stable). i want to know how can i get environment variable for build status?..if not available, what is the alternative option for build status?

Thanks in Advance

varghese

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:53:39.567

当你有两个很棒的插件可以做到这一点时，为什么要使用 ANT 从 Jenkins 发送电子邮件？

默认的邮件通知非常好，如果你想有更多的控制权
，我建议使用非常全面的[**Email-ext 插件。**](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)

如果仍希望使用 ANT 发送包括状态在内的邮件通知，
则必须将过程分为两个步骤，
其中第一部分运行构建，第二部分运行 ANT 脚本以报告状态。

**在这种情况下，您将需要通过参数化构建**插件从第一个作业触发第二个作业-
请参阅我的答案：
[触发其他配置并使用 Jenkins 发送当前构建状态](https://stackoverflow.com/a/11252967/1390251)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:30:16.663

在作业完成运行之前不会设置构建状态，因此没有简单的方法将构建状态推送到构建本身触发的进程。您可以通过 API 拉取构建状态，但由于上述约束，这必须是外部触发的过程。您不使用内置电子邮件支持或诸如此类的优秀电子邮件扩展插件之一的任何[原因](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)？

# javascript - 在加载任何 .js 之前显示加载 gif

> ID：11630598
> 
> 赞同：0
> 
> 时间：2012-07-24T12:11:34.507
> 
> 标签：javascript, loading, gif

我在屏幕上有一个 gif 表示正在加载，一旦加载页面，这个图像就会消失，我的动画等就会开始。

我想要实现的是在加载我的任何 javascript 之前让我的 loading.gif 可见。

不幸的是，我正在获取其他人的代码，它相当复杂，所以我不能简单地将我的 .js 调用移动到我的 html 底部或将所有内容包装在 window.load 中。我只是想知道是否有js。否则我可以强制我的 gif 在其他任何事情完成之前显示。

我很抱歉这是一个相当模糊的问题。

# c - DB2 存储过程在 C 程序中返回多行游标

> ID：11630604
> 
> 赞同：0
> 
> 时间：2012-07-24T12:11:53.787
> 
> 标签：c, db2

我想在 DB2 中编写一个存储过程，它将有一个表的游标，然后它将整个游标行发送到 C 程序？

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:39:06.787

```
CREATE PROCEDURE GETNAMESET ( IN CNUM INTEGER )
RESULT SET 1
LANGUAGE SQL
BEGIN    
--Take the inputted customer number, CNUM and
--return the record(s) for that customer from the
--customer table via SQL result set(s)
  DECLARE C1 CURSOR FOR
    SELECT * FROM CUSTTABLE WHERE CUSTNUM = CNUM;
  OPEN C1;
  SET RESULT SETS CURSOR C1;
END; 
```

# c++ - gdb takes only the first parameter

> ID：11630610
> 
> 赞同：1
> 
> 时间：2012-07-24T12:12:35.400
> 
> 标签：c++, debugging, gdb

I'm trying to debug a program which takes on the command line a couple of arguments. Inside the main I print out the arguments as follows:

```
int main (int argc, char **argv)
{
 for (int i = 0; i < argc; i++) {
  printf("param%d=%s\n", i, argv[i]);
} 
```

when I run my program without gdb, like this

```
"program img.jpg 1 2" 
```

I get as output:

```
param0: program
param1: img.jpg
param2: 1
param3: 2 
```

When I run it with gdb like this:

```
"program img.jpg 1 2" 
```

I only get

```
param0: img.jpg 
```

on one hand `img.jpg` should be param1, also param2 and 3 are missing. Is there a special way to specify command line params to gdb that I'm missing?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:15:07.160

You should specify parameters when you run the program.

First you should invoke the debugger with

```
$ gdb <binary_file_name (executable)> 
```

Than you start the program also passing command line arguments:

```
(gdb) r p1 -p2 --p3 p4=p5 
```

[Side note: I think this solution is more flexible than using the `--args` flag, because you can launch your program multiple times with different parameters without quitting the current `gdb` instance (e.g., you keep your breakpoints).]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:17:24.183

You are now sending parameters to `gdb` instead of `program`. In order to pass parameters to `program` you can use the `--args` parameter for `gdb`.

```
gdb --args program img.jpg 1 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T12:17:57.960

You can use the `--args` option to tell `gdb` to pass the arguments to the program being debugged:

```
> gdb --args program img.jpg 1 2 
```

Alternatively, you can launch `gdb` without the arguments, and then supply them to the `run` command:

```
> gdb program
(gdb) run img.jpg 1 2 
```

# jquery - jQuery“队列”（ajaxQueue 插件） - 如何清除？

> ID：11630612
> 
> 赞同：2
> 
> 时间：2012-07-24T12:12:37.883
> 
> 标签：jquery

Corey Frang 在 stackoverflow 上发布了一个有用的插件，用于对 ajax 请求进行排队。在我的例子中，它对于在“块”中加载大量数据以最大程度地减少用户感知的速度非常有用。它完美地工作，除非在 ajax 请求队列完成之前触发分页事件，在这种情况下，保存已加载对象的容器将清除，但排队的请求将继续运行，从而导致不良行为。我想要的是找到/学习一种清除所有现有请求队列的方法。开发人员发布了一种方法来做到这一点，但是，它似乎不起作用。我已经尝试在 jQuery 网站上阅读 .queue，但我似乎无法理解如何使这项工作。我已经花了很多时间试图弄清楚这个问题，但也许我对 jQuery 的一些更复杂的方面缺乏熟悉让我退缩了。希望更熟悉jQuery的人可以提供帮助:)（标记了建议的内容，并且似乎不适用于某些“!!!!!”）

```
/*
* jQuery.ajaxQueue - A queue for ajax requests
* 
* (c) 2011 Corey Frang
* Dual licensed under the MIT and GPL licenses.
*
* Requires jQuery 1.5+
*/ 
(function($) {

// jQuery on an empty object, we are going to use this as our Queue
var ajaxQueue = $({});

$.ajaxQueue = function( ajaxOpts ) {
    var jqXHR,
        dfd = $.Deferred(),
        promise = dfd.promise();

    // queue our ajax request
    ajaxQueue.queue( doRequest );

    // add the abort method
    promise.abort = function( statusText ) {

        // proxy abort to the jqXHR if it is active
        if ( jqXHR ) {
            return jqXHR.abort( statusText );
        }

        // if there wasn't already a jqXHR we need to remove from queue
        var queue = ajaxQueue.queue(),
            index = $.inArray( doRequest, queue );

        if ( index > -1 ) {
            queue.splice( index, 1 );
        }

        // and then reject the deferred
        dfd.rejectWith( ajaxOpts.context || ajaxOpts,
            [ promise, statusText, "" ] );

        return promise;
    };

    // run the actual query
    function doRequest( next ) {        
        jqXHR = $.ajax( ajaxOpts )
            .then( next, next )
            .done( dfd.resolve )
            .fail( dfd.reject );
    }

    return promise;
};

// !!!!!!!!!!!!!!!!!
// this is what the developer suggested on his website in the comments section
// ... but it does not appear to work
$.ajaxQueue.stop = function( clear ) { ajaxQueue.stop( clear ); }

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:56:32.660

从我看到的问题似乎是：

```
var ajaxQueue = $({}); 
```

ajaxQueue 只是一个空对象，要停止使用你需要将它指向 jQuery 插件的对象

```
ajaxQueue.stop = function( clear ) { $.ajaxQueue.stop( clear ); } 
```

，或者只是使用：

```
$.ajaxQueue.stop( clear ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:43:40.450

我将此功能添加到`ajaxQueue`代码中。它可能效率不高，但它通过清除队列来完成工作：

```
if (ajaxOpts=='clear'){
    ajaxQueue.clearQueue();
    return promise;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T12:06:35.403

感谢您为帮助我解决问题所做的努力。然而..

我找到了一个更好的 ajax 队列插件 - Oleg Podolsky 的“ajaxq”，如果您需要对 ajax 请求进行排队（以及正确清除队列的能力），我建议您改用它。

添加到队列：

```
ajaxq('queue_name', {
    // standard $.ajax options
}); 
```

停止/清除队列：

```
ajaxq('queue_name'); 
```

插入：

```
/*
 * jQuery AjaxQ - AJAX request queueing for jQuery
 *
 * Version: 0.0.1
 * Date: July 22, 2008
 *
 * Copyright (c) 2008 Oleg Podolsky (oleg.podolsky@gmail.com)
 * Licensed under the MIT (MIT-LICENSE.txt) license.
 *
 * http://plugins.jquery.com/project/ajaxq
 * http://code.google.com/p/jquery-ajaxq/
 */

jQuery.ajaxq = function (queue, options)
{
    // Initialize storage for request queues if it's not initialized yet
    if (typeof document.ajaxq == "undefined") document.ajaxq = {q:{}, r:null};

    // Initialize current queue if it's not initialized yet
    if (typeof document.ajaxq.q[queue] == "undefined") document.ajaxq.q[queue] = [];

    if (typeof options != "undefined") // Request settings are given, enqueue the new request
    {
        // Copy the original options, because options.complete is going to be overridden

        var optionsCopy = {};
        for (var o in options) optionsCopy[o] = options[o];
        options = optionsCopy;

        // Override the original callback

        var originalCompleteCallback = options.complete;

        options.complete = function (request, status)
        {
            // Dequeue the current request
            document.ajaxq.q[queue].shift ();
            document.ajaxq.r = null;

            // Run the original callback
            if (originalCompleteCallback) originalCompleteCallback (request, status);

            // Run the next request from the queue
            if (document.ajaxq.q[queue].length > 0) document.ajaxq.r = jQuery.ajax (document.ajaxq.q[queue][0]);
        };

        // Enqueue the request
        document.ajaxq.q[queue].push (options);

        // Also, if no request is currently running, start it
        if (document.ajaxq.q[queue].length == 1) document.ajaxq.r = jQuery.ajax (options);
    }
    else // No request settings are given, stop current request and clear the queue
    {
        if (document.ajaxq.r)
        {
            document.ajaxq.r.abort ();
            document.ajaxq.r = null;
        }

        document.ajaxq.q[queue] = [];
    }
} 
```

# jquery - 同一页面中两个不同主题的 jQuery 对话框

> ID：11630613
> 
> 赞同：0
> 
> 时间：2012-07-24T12:12:40.070
> 
> 标签：jquery, dialog, themes

我想在同一页面中有两个不同主题的对话框，但它不能正常工作。我究竟做错了什么？我的问题和我的代码你可以在这里看到：http: [//jsfiddle.net/HBPBc/2/](http://jsfiddle.net/HBPBc/2/)

如果我推送带有 id="dialog_link_1" 的带有blitzer 主题的弹出对话框的链接，并且如果我推送带有 id="dialog_link_2" 的带有 redmond 主题的弹出对话框的链接，我想要。

我知道在第二个对话框上再次换行使第一个对话框.ui-dialog 换行，但是如何将它们完全区分为特定对话的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:01:25.363

使用[http://docs.jquery.com/UI/Dialog#option-dialogClass](http://docs.jquery.com/UI/Dialog#option-dialogClass)选项切换主题

[http://jsfiddle.net/kannix/HBPBc/4/](http://jsfiddle.net/kannix/HBPBc/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:02:40.523

解决方案是我找到了：打开对话框时添加所需的类和删除不一定 [http://jsfiddle.net/HBPBc/6/](http://jsfiddle.net/HBPBc/6/)

# nuget - 本地 NuGet 库部署是否需要 Azure 帐户？

> ID：11630614
> 
> 赞同：4
> 
> 时间：2012-07-24T12:12:41.983
> 
> 标签：nuget, azure-storage

我想运行一个本地 NuGet Gallery 来为我的构建系统提供依赖项。

我注意到在 web.config 中它要求提供 Azure 详细信息，但代码似乎建议您可以选择“文件系统”作为存储后端。

我的问题是：

1.  如果我选择“文件系统”如何配置目标文件夹？
2.  我可以将存储引擎指向 SQL Server 的内部实例吗？

我试图避免使用文件系统，因为这是我们现在在 NuGet Server 中使用的，而且速度非常慢。一些开发人员喜欢打包和推送每一个成功的构建，因此可扩展性很重要。

我希望这里的任何答案也能对其他人有所帮助。作为背景，这里是设置您自己的 NuGet 库的绝佳链接。可悲的是，作者省略了与实际包存储有关的所有细节：[https ://github.com/NuGet/NuGetGallery/wiki/Hosting-the-NuGet-Gallery-Locally-in-IIS](https://github.com/NuGet/NuGetGallery/wiki/Hosting-the-NuGet-Gallery-Locally-in-IIS)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:06:56.180

要配置文件系统包存储：

```
<appSettings>
  <add key="Gallery:PackageStoreType" value="FileSystem" />
  <add key="Gallery:FileStorageDirectory" value="C:\Path\To\Packages" />
</appSettings> 
```

指向不同的 SQL Server：

```
<connectionStrings>
  <add name="NuGetGallery" connectionString="Data Source=SQLSERVERNAME;Initial Catalog=NuGetGallery;Integrated Security=SSPI" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

编辑：支持 SQL Server 作为包存储

如果要将包作为 BLOB 存储在 SQL Server 中，则必须对代码进行一些更改。

首先，创建一个名为`SqlServerFileStorageService`并实现的类`IFileStorageService`。这个接口有几个方法。重要的是`GetFile()`和`SaveFile()`。组合`folderName`并将`fileName`创建一个可以在数据库表中使用的唯一键。

您可以使用相同的连接字符串*NuGetGallery*或添加一个新的连接字符串以进行数据访问。

然后，您将一个项目添加到`PackageStoreType`名为`SqlServer`.

在 ContainerBinding.cs 添加一个案例`PackageStoreType.SqlServer`以绑定到您的`SqlServerFileStorageService`.

现在 NuGet 库应该创建一个`SqlServerFileStorageService`并且所有获取和保存都将使用您的类将 blob 存储在 SQL Server 中。

顺便说一句：我是基于对代码的粗略了解。可能会有一两个额外的步骤，但这些看起来像是您需要关注的主要领域。

希望有帮助。

# jquery - 使用鼠标滚轮和/或热点手动滚动后，如何让 SmoothDivScroll 再次开始自动滚动？

> ID：11630618
> 
> 赞同：0
> 
> 时间：2012-07-24T12:13:11.110
> 
> 标签：jquery, jquery-plugins, scroll, smooth-scrolling

我正在处理的网站上有一个 SmoothDivScroll 插件，它使用 AJAX 内容功能从外部文件中提取内容。这一切都非常出色，但只有一件事困扰着我，那就是当页面加载滚动条时自动滚动（这是我想要的），但是当我手动滚动然后停止时，它不会再次开始自动滚动。是否有可能做到这一点，任何人都可以给我一些关于如何做到这一点的指示吗？

最好的，

柯本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T19:41:50.347

您可以使用 autoScrollingStopped 回调，而不是更改原始插件：

```
 autoScrollingStopped: 
            function() { 
               $("#makeMeScrollable").smoothDivScroll("startAutoScrolling");
                       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T00:23:09.253

您应该在`jquery.smoothDivScroll-1.3.js`第 430 行（从 1.3 版开始）找到：

```
self.hideHotSpotBackgrounds(250); 
```

然后在它之后添加以下内容：

```
self.startAutoScrolling(); 
```

然后设置使用`jquery.smoothDivScroll-1.3.js`而不是缩小一个 - 你很高兴！

# linux - 覆盖两个 bash 脚本中的变量

> ID：11630630
> 
> 赞同：1
> 
> 时间：2012-07-24T12:13:46.303
> 
> 标签：linux, bash

我必须 bash 脚本：

脚本1.sh

```
HELLO=hello
export HELLO
./script2.sh
echo $HELLO 
```

脚本2.sh

```
echo $HELLO
HELLO=world
export $HELLO 
```

输出`hello hello`代替`hello world`. 如何修改相互调用的脚本之间的变量？

编辑：将变量作为参数传递是行不通的。我不知道 script2.sh 中可能更改的变量数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:22:53.933

如果您不想将第二个脚本作为子进程运行，则必须获取它：

```
HELLO=hello
export HELLO
. ./script2.sh  # Note the dot at the beginning
echo $HELLO 
```

在第二个脚本中不需要导出 - 您已经告诉 bash 导出变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:23:24.293

导出的变量在子 shell 中可用（与`script2.sh`vs一样`script1.sh`），但在父 shell 中不可用。

出于这个原因，设置的变量在`script1.sh`中是可用的`script2.sh`，但是设置它`script2.sh`不会使它在返回`script1.sh`时可用。`script2.sh`

如果您要将变量传递回调用者，则需要`echo`它，并获取`script2.sh`. 但是，`script2.sh`如果您想查看其输出，则需要写入 stderr：

脚本1.sh：

```
HELLO=hello
export HELLO
HELLO=$(./script2.sh)
echo >&2 $HELLO 
```

脚本2.sh：

```
echo $HELLO >&2
HELLO=world
echo $HELLO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T12:33:28.343

当你通过 ./script2.sh 调用新脚本时，它会派生新的 shell，当 script2 完成执行时，新的 shell 将被关闭。当控制返回到脚本时，它仍然是旧的 shell，所以在 script2 中导出的变量将不可用。要在同一个 shell 中运行 script2，你可以像“. ./script2.sh”一样运行它

```
HELLO=hello
export HELLO
. ./script2.sh
echo $HELLO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T12:17:00.420

`script1.sh`contains的环境`HELLO=hello`。你在孩子身上做的任何事情都`script2.sh`不会改变这一点。

# java - 在 p-element Selenium/java xpath 中获取文本

> ID：11630632
> 
> 赞同：0
> 
> 时间：2012-07-24T12:13:47.830
> 
> 标签：java, testing, xpath, selenium, junit

我正在尝试使用 Selenium 进行一些测试，但我遇到了一些问题。假设我有以下内容：

```
 <p>
   <label for="something">whatever :</label>
   what I really want
 </p> 
```

我希望能够仅获取我真正想要的文本，而不是 p 元素中的所有文本 通过执行以下操作可以在标签中获取文本：

```
 selenium.getText("//p/label[@for='something']"); 
```

有谁知道如何仅在我的情况下获得“我真正想要的”

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:22:08.240

`//p[label[@for = 'something']]/text()[normalize-space()]``p`是一个 XPath 表达式，用于选择该元素的直接文本子节点的节点集 (XPath 1.0) 或序列 (XPath 2.0) 。在您的示例中，只有一个这样的子节点。

# .htaccess - htaccess mod_rewrite 和目录的问题

> ID：11630636
> 
> 赞同：0
> 
> 时间：2012-07-24T12:14:00.147
> 
> 标签：.htaccess, mod-rewrite

我已经阅读了数十篇关于类似问题的帖子，但我无法弄清楚这一点。

我的网站上有 SEO 友好的 URL，看起来像这样......

```
http://www.website.com/tequila/bottle-name.html
http://www.website.com/whiskey/bottle-name.html
http://www.website.com/vodka/bottle-name.html 
```

...其中瓶子名称是瓶子的实际名称。

我正在对 PHP 处理程序进行 mod_rewrite 以实际交付页面。每个处理程序位于每个目录中（龙舌兰酒、伏特加酒、威士忌）。

第一个（龙舌兰酒）有效，但其他两个没有，我不知道为什么。

这是我现在拥有的 mod_rewrite 代码......

```
#Rewrite seo urls
RewriteCond %{REQUEST_URI} !^/tequila/
#RewriteCond %{REQUEST_FILENAME} !-f
#RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.html$ index.php?liquor=$1&liquor-type=tequila [L]

RewriteCond %{REQUEST_URI} !^/whiskey/
#RewriteCond %{REQUEST_FILENAME} !-f
#RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.html$ index.php?liquor=$1&liquor-type=whiskey [L]

RewriteCond %{REQUEST_URI} !^/vodka/
#RewriteCond %{REQUEST_FILENAME} !-f
#RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.html$ index.php?liquor=$1&liquor-type=vodka [L] 
```

似乎正在发生的事情是威士忌和伏特加酒页面被龙舌兰酒 mod_rewrite 捕获和处理（猜测是因为它在此处的列表中排名第一）。

因此，[http://www.website.com/vodka/vodka-bottle.html](http://www.website.com/vodka/vodka-bottle.html)实际上被改写为[http://www.website.com/tequila/index.php?liquor=vodka-bottle.html&liquor-type=龙舌兰酒](http://www.website.com/tequila/index.php?liquor=vodka-bottle.html&liquor-type=tequila)。

好像我没有正确设置 RewriteCond %{REQUEST_URI} !^/tequila/ ？

非常感谢任何人可以提供的任何帮助或指示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:42:46.483

您为什么要否定`^/tequila/?`The`!`将导致与所有其他酒类匹配，而不是您列出的酒类。

# wpf - 在 Silverlight 中，选定的文本/图像元素周围是否有虚线边框？

> ID：11630639
> 
> 赞同：0
> 
> 时间：2012-07-24T12:14:15.237
> 
> 标签：wpf, image, silverlight, border, frameworkelement

我有一个我正在silverlight中开发的图像编辑器，它在一个画布上具有多个文本和图像元素，可拖动等。我需要用户反馈以在用户单击时突出显示所选元素并突出显示不同的元素如果单击另一个元素，则改为。我想我应该用元素周围的虚线边框来做到这一点，但我不知道这是否可能。

以下是我与元素相关的代码 -

项目.cs

```
namespace ImageEditor.Client.BLL
{
 public class Project : INotifyPropertyChanged
   {
    private int numberOfElements;

    #region Properties

    private ObservableCollection<FrameworkElement> elements;
    public ObservableCollection<FrameworkElement> Elements
    {
        get { return elements; }
        set
        {
            elements = value;
            NotifyPropertyChanged("Elements");
        }
    }

    private FrameworkElement selectedElement;
    public FrameworkElement SelectedElement
    {
        get { return selectedElement; }
        set
        {
            selectedElement = value;
            NotifyPropertyChanged("SelectedElement");

        }
    }

    private TextBlock selectedTextElement;
    public TextBlock SelectedTextElement
    {
        get { return selectedTextElement; }
        set
        {
            selectedTextElement = value;
            NotifyPropertyChanged("SelectedTextElement");
        }
    }

    private Image selectedImageElement;
    public Image SelectedImageElement
    {
        get { return selectedImageElement; }
        set
        {
            selectedImageElement = value;
            NotifyPropertyChanged("SelectedImageElement");
        }
    }

    #endregion

    #region Methods

    private void AddTextElement(object param)
    {
        TextBlock textBlock = new TextBlock();
        textBlock.Text = "New Text";
        textBlock.Foreground = new SolidColorBrush(Colors.Gray);
        textBlock.FontSize = 25;
        textBlock.FontFamily = new FontFamily("Arial");
        textBlock.Cursor = Cursors.Hand;
        textBlock.Tag = null;

        AddDraggingBehavior(textBlock);
        textBlock.MouseLeftButtonUp += element_MouseLeftButtonUp;

        this.Elements.Add(textBlock);
        numberOfElements++;

        this.SelectedElement = textBlock;
        this.selectedTextElement = textBlock;
    }

    private BitmapImage GetImageFromLocalMachine(out bool? success, out string fileName)
    {
        OpenFileDialog dialog = new OpenFileDialog()
        {
            Filter = "Image Files (*.bmp;*.jpg;*.gif;*.png;)|*.bmp;*.jpg;*.gif;*.png;",
            Multiselect = false
        };

        success = dialog.ShowDialog();
        if (success == true)
        {
            fileName = dialog.File.Name;
            FileStream stream = dialog.File.OpenRead();
            byte[] data;

            BitmapImage imageSource = new BitmapImage();
            using (FileStream fileStream = stream)
            {
                imageSource.SetSource(fileStream);
                data = new byte[fileStream.Length];
                fileStream.Read(data, 0, data.Length);
                fileStream.Flush();
                fileStream.Close();
            }

            return imageSource;
        }
        else
        {
            fileName = string.Empty;
            return new BitmapImage();
        }
    }

    private void AddImageElement(object param)
    {
        bool? gotImage;
        string fileName;
        BitmapImage imageSource = GetImageFromLocalMachine(out gotImage, out fileName);

        if (gotImage == true)
        {
            Image image = new Image();
            image.Name = fileName;
            image.Source = imageSource;
            image.Height = imageSource.PixelHeight;
            image.Width = imageSource.PixelWidth;
            image.MaxHeight = imageSource.PixelHeight;
            image.MaxWidth = imageSource.PixelWidth;
            image.Cursor = Cursors.Hand;
            image.Tag = null;

            AddDraggingBehavior(image);
            image.MouseLeftButtonUp += element_MouseLeftButtonUp;

            this.Elements.Add(image);
            numberOfElements++;

            this.SelectedElement = image;
            this.SelectedImageElement = image;
        }
    }

    private void OrderElements()
    {
        var elList = (from element in this.Elements
                      orderby element.GetValue(Canvas.ZIndexProperty)
                      select element).ToList<FrameworkElement>();

        for (int i = 0; i < elList.Count; i++)
        {
            FrameworkElement fe = elList[i];
            fe.SetValue(Canvas.ZIndexProperty, i);
        }

        this.Elements = new ObservableCollection<FrameworkElement>(elList);
    }

    public void element_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        this.SelectedElement = sender as FrameworkElement;
        if (sender is TextBlock)
        {
            this.SelectedTextElement = sender as TextBlock;
            FadeOut(this.SelectedTextElement);
        }
        else if (sender is Image)
        {
            this.SelectedImageElement = sender as Image;
            FadeOut(this.SelectedImageElement);
        }

    }
    #endregion 
```

那里不仅需要，但您可以很好地了解这一切是如何运作的。我该怎么办？我对 Silverlight 还是很陌生

编辑：

这是我对 DashBorder 方法的开始尝试，其中我试图制作一个与所选元素相同尺寸的矩形，它将围绕该元素

```
public static void DashBorder(FrameworkElement element)
    {
        Rectangle rect = new Rectangle();
        rect.Stroke = new SolidColorBrush(Colors.Black);
        rect.Width=element.Width;
        rect.Height=element.Height;
        rect.StrokeDashArray = new DoubleCollection() { 2, 2 };

    } 
```

它似乎什么也没做，也不是我想做的。有没有办法直接在 FrameworkElement 上制作破折号边框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:17:58.990

我不知道怎么做，[但谷歌](http://forums.silverlight.net/t/5574.aspx)知道。

> 您可以使用 StrokeDashArray 来达到预期的效果，例如：

`<Rectangle Canvas.Left="10" Canvas.Top="10" Width="100" Height="100" Stroke="Black" StrokeDashArray="10, 2"/>`

> StrokeDashArray 中的第一个数字是破折号的长度，第二个数字是间隙的长度。您可以重复破折号间隙对以生成不同的模式。

编辑：

要在代码中执行此操作，请创建一个矩形并`StrokeDashArray`像这样设置它的属性（未经测试的代码）：

```
Rectangle rect = new Rectangle();
rect.StrokeThickness = 1;
double[] dashArray = new double[2];
dashArray[0] = 2;
dashArray[1] = 4;
rect.StrokeDashArray = dashArray; 
```

# ios - 如何让 iOS 上的 tesseract 更快？

> ID：11630640
> 
> 赞同：8
> 
> 时间：2012-07-24T12:14:21.940
> 
> 标签：ios, performance, ocr, tesseract

我在 ios 上与 tesseract ocr 作斗争。一切正常，但它真的很慢。单行数字的识别时间为 2 - 3 秒。

我正在从视频流中阅读。

我正在为我的字体使用带有自定义训练文件的 tesseract 3.01。

这是我所做的：

设置 tesseract 仅用于查找数字 (0-9)

1.  缩小、歪斜和二值化图像
2.  用于`GetLines`查找我想要的文本行
3.  `setRectangle`只识别我想要的线路
4.  `getUTF8Text`获取我的文本**<-仅此​​一项需要 2-3 秒**

有什么建议可以加快这个过程吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T13:56:11.817

我切换到tesseract 3.02的SVN

在交叉编译遇到一些问题后，

getUTF8Text 的时间缩短到 1.2 - 0.8 秒，图像预处理的时间缩短到 0.3 - 0.2 秒。

我做了一些测试

*   二值化和缩小 0.7 获得 0.3 秒，但花费你 0.1
*   Chop_enable=0 对速度几乎没有影响，平均速度增益大约为 0.1，尽管如果分析它占 CPU 使用量的 50%

可用性方面的主要收获是使用 setRectangle 优化代码，如果我怀疑边界不正确，则不调用 getUTF8Text。还有一些字符串后处理，通过检查接收到的字符串并应用一些算法来消除 tesseract 中最常见的误解。

也许这对其他人有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:18:04.690

您可能想尝试的一件事是在后台执行此操作。它不会提高识别速度，但通过让用户执行其他操作，它可能会显得更快。当然，这取决于用例（我有一个很好的改进，因为它看起来非常快，而我开始的时间比预期的要早）。诀窍在于 ios 应用程序是关于感知性能的，而不是实际性能（尽管它自然会对感知性能产生很大影响）。

# vba - 如何禁用保存功能

> ID：11630641
> 
> 赞同：3
> 
> 时间：2012-07-24T12:14:25.373
> 
> 标签：vba, excel

我目前有一个宏，它可以进行数据挖掘并最终保存工作簿。我打算禁用工作簿的保存功能，并在每次需要保存工作簿时强制用户使用宏。这是我到目前为止所拥有的，但它似乎不起作用。当我这样做时，我的宏和下面描述的这个子都在一个循环中运行。每次我的宏尝试保存工作簿时，这个子都不允许它。我基本上想强制用户使用宏来保存工作簿。

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
    Dim NoSave

    NoSave = MsgBox("Changes have to be submitted before the workbook can be saved, Proceed and submit ?", vbYesNo, "Continue?")

    If NoSave = vbNo Then
        Cancel = True
    Else
        Main
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:47:57.340

这是一个例子。将此粘贴到`ThisWorkbook`. 这不会让您使用`Save`或`SaveAs`。但是，您可以使用宏`SaveThisFile`来保存工作簿。请修改它以满足您的需要。

```
Option Explicit

Dim SaveByCode As Boolean
Const msg As String = "Please use the macro to save the file"

Private Sub Workbook_BeforeClose(Cancel As Boolean)
    If Me.Saved = False And SaveByCode = False Then
        MsgBox msg, vbExclamation, "Unable to save"
        Cancel = True
    End If
End Sub

Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
    Application.EnableEvents = False
    If SaveByCode = True Then
        SaveThisFile
    Else
        MsgBox msg, vbExclamation, "Unable to save"
        Cancel = True
    End If
    Application.EnableEvents = True
End Sub

'~~> Your macro to save the file
Sub SaveThisFile()
    SaveByCode = True
    ThisWorkbook.Save
End Sub 
```

**注意**：如果您的保存宏位于模块中，则将其`Dim SaveByCode As Boolean`从模块中删除`ThisWorkbook`并放置`Public SaveByCode As Boolean`在模块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:54:37.383

或者，这个怎么样（我起初误解了这个问题，但也想试一试，因为它很有趣）：
在 thisworkbook 模块中声明公共布尔值（异常）：

```
Option Explicit
Public bSave As Boolean 
```

在事件 BeforeSave 事件中：

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)

Dim sNoSave As String

If bSave = True Then
    bSave = False
    Exit Sub
End If

sNoSave = MsgBox("Changes have to be submitted before the workbook can be saved, Proceed and submit ?", vbYesNo, "Continue?")

If sNoSave = vbNo Then
    bSave = False
    Cancel = True
    Exit Sub
Else
    bSave = True
    Call Main(bSave)
End If

End Sub 
```

在主要：

选项显式

```
Sub Main(bSave)

If bSave = True Then
    ThisWorkbook.SaveAs Filename:="U:\Book1.xlsm", FileFormat:=xlOpenXMLWorkbookMacroEnabled
    MsgBox "Main method called"
End If

End Sub 
```

# c++ - Qt 富文本编辑器 - 有没有一个已经制作好的？

> ID：11630646
> 
> 赞同：8
> 
> 时间：2012-07-24T12:14:35.830
> 
> 标签：c++, qt, qtextedit, richtext, rich-text-editor

我需要一个用于 Qt 的富文本编辑器。我一直在考虑使用 QTextEdit，因为它是富文本编辑，但我需要该小部件中不存在的两件事：

*   用户应该能够更改文本颜色、文本字体、下划线、粗体、斜体文本，所以我需要一个带有这些控件的文本编辑器工具栏（我需要自己编码吗？）

*   用户应该能够通过搜索图像来拖放或添加。现在，如果我尝试将图像复制并粘贴到我的 QTextEdit 上，我只会看到这个

![在此处输入图像描述](../Images/bc2630956d1f3e44a74dcffed078c592.png)

我应该如何为我的每一项需求做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-30T10:17:31.233

1）看看这个官方例子，它应该给你一个能够更改文本的富文本编辑器，带有一个工具栏：

[http://doc.qt.io/qt-5/qtwidgets-richtext-textedit-textedit-cpp.html](http://doc.qt.io/qt-5/qtwidgets-richtext-textedit-textedit-cpp.html)

要拖放图像，恐怕您必须将文本编辑（QTextEdit 或 QTextBrowser）子类化并实现这两种方法：

```
void QTextEdit::dropImage(QImage const& p_image, QString const& p_format)
void QTextEdit::insertFromMimeData(const QMimeData* p_source) 
```

2) 这是一个 GitHub 项目，它实现了您需要的一切，甚至更多：

[https://github.com/Anchakor/MRichTextEditor](https://github.com/Anchakor/MRichTextEditor)

* * *

最后，如果您想了解富文本编辑器的工作原理，请参阅以下文档：

[http://doc.qt.io/qt-5/richtext.html](http://doc.qt.io/qt-5/richtext.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-03T19:49:30.860

您可以使用从 Deko CRM 中提取的此编辑器：http: [//www.hobrasoft.cz/en/blog/bravenec/qt-rich-text-editor](http://www.hobrasoft.cz/en/blog/bravenec/qt-rich-text-editor)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T15:36:28.807

另一个想法可能是使用 WebKit 来制作这个小部件。见：[https ://www.qt.io/blog/2009/03/12/wysiwyg-html-editor](https://www.qt.io/blog/2009/03/12/wysiwyg-html-editor)

请注意，那里链接的 git 存储库已移至此 URL：[https ://code.qt.io/cgit/%7Bnon-gerrit%7D/qt-labs/graphics-dojo.git/tree/?id=8000ca3b229344ed2ba2ae81ed5ebaee86e9d63a](https://code.qt.io/cgit/%7Bnon-gerrit%7D/qt-labs/graphics-dojo.git/tree/?id=8000ca3b229344ed2ba2ae81ed5ebaee86e9d63a)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T12:59:59.530

wwWidgets 有 RichTextEditor -> [http://www.wysota.eu.org/wwwidgets/doc/html/qwwrichtextedit.html](http://www.wysota.eu.org/wwwidgets/doc/html/qwwrichtextedit.html)

# c# - 数据库批量插入时出现线程问题？

> ID：11630651
> 
> 赞同：-1
> 
> 时间：2012-07-24T12:14:59.490
> 
> 标签：c#, multithreading

我有 25 个线程正在运行。每个线程都执行以下操作：

1.  读取一个包含大约 1000 条记录的 txt 文件，
2.  放入数据表
3.  sql 批量插入到 sql server

启动所有线程后，我需要等待线程完成处理，为此我使用了`Thread.Join`. 我的问题是，线程甚至在完成上述步骤之前就完成了完成任务。我在这里看到的唯一原因是，数据库表的大小逐渐增加到超过 2000 万条记录。然后，插入数据需要一些时间。是线程在等待向 SQL Server 插入数据时中止了吗？我什至尝试过使用`Task.Factory.StartNew`and `ContinueWhenAll`，但结果是一样的。有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:23:15.830

一些东西。
1) 如果此任务似乎在所有线程完成执行之前完成，则说明您使用了不正确的同步。
2）您的数据库可能会用完其池中的可用连接。我相信默认情况下大多数数据库允许 10 个并发连接。（我假设你配置正确）。

CW，因为这太渴望发表评论了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:18:58.380

似乎在某些线程中引发了异常。可能是因为对数据库的并发连接的限制。您需要实施正确的错误处理和日志记录以了解根本原因。

# c# - 在 MSTest 代理上运行时缺少 Oracle oci.dll

> ID：11630656
> 
> 赞同：1
> 
> 时间：2012-07-24T12:15:15.833
> 
> 标签：c#, oracle, unit-testing, mstest, devart

我正在尝试在 MSTest 测试代理上运行一些与数据库相关的集成测试。我们使用 c# 和一个带有 devart dotconnect 的 oracle db。

由于我们需要使用间接模式，所以我在测试代理上安装了 devart 和一个 oracle 客户端。

当我在本地机器上执行测试时，测试运行顺利。但是当在测试代理（远程）上执行时，它找不到客户端的 oci.dll，这是某处的依赖项：

*System.IO.FileNotFoundException：无法从家里加载 Oracle 客户端库 oci.dll ..*

现在，我不知道为什么会这样。我已经检查了 PATH 环境变量，但它们看起来不错。任何想法为什么这在我的机器上有效，但在部署到测试代理时无效？

编辑：在 devart 中添加了堆栈跟踪：

```
Devart.Data.Oracle.OracleHome.get_ClientVersion()
Devart.Data.Oracle.aw.a(Boolean A_0, Boolean A_1, OracleHome A_2, Boolean A_3)
Devart.Data.Oracle.OracleInternalConnection..ctor(aa connectionOptions, OracleInternalConnection proxyConnection)
Devart.Data.Oracle.cs.a(k A_0, Object A_1, DbConnectionBase A_2)
Devart.Common.DbConnectionFactory.a(DbConnectionPool A_0, k A_1, DbConnectionBase A_2)
Devart.Common.DbConnectionPool.a(DbConnectionBase A_0)
Devart.Common.DbConnectionPool.GetObject(DbConnectionBase owningConnection)
Devart.Common.DbConnectionFactory.a(DbConnectionBase A_0)
Devart.Common.DbConnectionClosed.Open(DbConnectionBase outerConnection)
Devart.Common.DbConnectionBase.Open()
Devart.Data.Oracle.OracleConnection.Open() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:24:58.890

感谢回复，得到了正确的指点。显然，当 64 位线程尝试加载 32 位 OCI.DLL 时会出现问题，反之亦然。但是，我尝试了与 32/64 相关的测试设置和构建设置，但无济于事。

无论如何，我能够通过在测试代理上额外**安装一个 64 位 Oracle 客户端来解决这个问题。**由于某种原因，QTAgent 线程似乎找到了正确的 OCI.DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-12T15:25:32.103

在控制台项目中面临同样的问题。我通过转到 **项目属性**->**编译**->**平台的目标**并选择 x86 来更改编译平台设置来修复它。

# android - android选项卡活动转到上一个选项卡

> ID：11630657
> 
> 赞同：3
> 
> 时间：2012-07-24T12:15:16.193
> 
> 标签：android, tabs

我有一个包含五个标签的活动。当我从选项卡 1 转到选项卡 2 或选项卡 3 时，一切看起来都很好。如何以编程方式从选项卡 2 回到选项卡 1？

```
 Intent myIntent = new Intent(this, Tab1.class);             
    myIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
    startActivity(myIntent); 
```

这无法正常工作，因为它在没有任何选项卡的情况下启动了活动 1。

从选项卡 1 转到选项卡 2 时，我可以同时看到选项卡 1 和选项卡 2（当前选项卡已激活）。但是当从选项卡 2 转到选项卡 1 时，选项卡 1 和选项卡 2 都会从活动中消失。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:20:19.610

这肯定会帮助你。

```
TabHost tabHost =  (TabHost) getParent().findViewById(android.R.id.tabhost);
tabHost.setCurrentTab(1); 
```

或者你可以参考这个链接

[如何在 Android 中使用 buttonclick 以编程方式切换选项卡](https://stackoverflow.com/questions/4522454/how-to-programmatically-switch-tabs-using-buttonclick-in-android)

谢谢 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:21:41.983

只需使用 finish() 方法

```
public void onClick(View v) 
{                             
    finish();
    startActivity(new Intent(Activity2.this, Activity1.class));            
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:26:51.387

我不知道`Intent.FLAG_ACTIVITY_CLEAR_TOP`，从不需要那个，但是提到的丢失标签的效果是通过从您的 TabHost 调用产生的`startActivity()`，而不是您的一个标签。如果是这种情况，请将呼叫移到那里，您的标签应该保留。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-20T22:26:14.203

我有类似的情况，但似乎没有一个答案有帮助。所以，我在这里发布我的解决方案：

```
// tab selection history, each tab has a tag which is a string
private List<String> tabIdHistory = new ArrayList<String>();

@Override
protected void onCreate(Bundle savedInstance) {
    super.onCreate(savedInstanceState);
    // this layout contains TabHost and TabWidget
    setContentView(R.layout.activity_main); 

    TabHost tabHost = (TabHost) findViewById(android.R.id.tabhost);
    tabHost.setup();
    tabHost.setOnTabChangedListener(new TabHost.OnTabChangeListener() {

        @Override
        public void onTabChanged(String tabId) {
            tabIdHistory.remove(tabId); // ensure uniqueness
            tabIdHistory.add(tabId);
        }
    });
    // continue your tab initialisation, such as
    // tabHost.addTab(tabHost.newTabSpec(TAG)
    //         .setContent(...).setIndicator(...));
}

@Override
public void onBackPressed() {
    if (tabIdHistory.size() > 1) {
        // pop the current last item, we want the second last
        tabIdHistory.remove(tabIdHistory.size() - 1);
        tabHost.setCurrentTabByTag(tabIdHistory.get(tabIdHistory.size() - 1));
    } else {
        super.onBackPressed();
    }
} 
```

如果使用 select tab#1, tab#3, tab#2, tab#1，则返回堆栈为“3, 2, 1”，如果用户按返回按钮 3 次，应用程序将退出到主屏幕。如果要保留完整的历史记录，请注释掉这一行：

> `tabIdHistory.remove(tabId);`

# php - zend predispatch layoutloader

> ID：11630658
> 
> 赞同：0
> 
> 时间：2012-07-24T12:15:19.853
> 
> 标签：php, zend-framework

嗨，我需要有关 zend 布局加载器的帮助，以下是我的代码，它不能正常工作！

```
public function preDispatch(){

    $bootstrap = $this->getActionController()->getInvokeArg('bootstrap');
    $config = $bootstrap->getOptions();
    Zend_Registry::set('config', $config);
    $module = $this->getRequest()->getModuleName();
    $controller = $this->getRequest()->getControllerName();
    $action = $this->getRequest()->getActionName();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:16:33.597

```
 public function preDispatch(){

    $bootstrap = $this->getActionController()->getInvokeArg('bootstrap');
    $config = $bootstrap->getOptions();
    Zend_Registry::set('config', $config);
    $module = $this->getRequest()->getModuleName();
    $controller = $this->getRequest()->getControllerName();
    $action = $this->getRequest()->getActionName();

    $layoutScript = "layout";
    if (isset($config[$module]['resources']['layout']['layout'])) {
        $layoutScript = $config[$module]['resources']['layout']['layout'];
    }
    $this->getActionController()->getHelper('layout')->setLayout($layoutScript);
} 
```

谢谢

# php - PHP MySql - 通过复选框选择自定义列显示

> ID：11630666
> 
> 赞同：2
> 
> 时间：2012-07-24T12:15:46.837
> 
> 标签：php, mysql, select

我是那些背景一直支持而不是开发的相对 php / mysql 新手之一。然而，由于像这样的优秀资源网站，我已经设法将我最想实现的许多事情放在一起，因此提前感谢所有过去、现在和未来的人。但是，我要么无法构建合适的谷歌查询来查找我需要的信息，要么在我认为的某个地方遗漏了一个简单的技巧。

简而言之，我有一个带有大约 15 列（字段）的表的 mysql 数据库。我有一个 php 前端，我可以使用它来查询数据库，或者返回所有行，或者只返回那些包含一般搜索项目的行，跨越所有字段。一切都很好，显示很好，效果很好。但是，我想让用户选择只选择他们希望在结果中返回的那些列（字段）。因此，我有一个搜索页面，其中显示了列名，并相应地分配了复选框和值（列名）。代码如下：

```
<form action="result.php" method="post">     Search for* :  <input type="text" name="searchterm" />
<input type="submit" name="submit" value="Search Database" /> <br /><br /><br />
<input type=button value="Select ALL" onclick="select_all( check, true ); return false;">
<input type=button value="Clear ALL" onclick="select_all( check, false ); return false;">
<table>
<tr><th>FirstName<br/><input type="checkbox" id="check" name="field[]" value="FirstName,"></th> 
<th>LastName<br/><center><input type="checkbox" id="check" name="field[]" value="LastName,"></center></th> 
<th>Age<br/><center><input type="checkbox" id="check" name="field[]" value="Age,">        </center></th> 
<th>Instrument<br/><center><input type="checkbox" id="check" name="field[]" value="Instrument,"></center></th>
<th>Grade<br/><center><input type="checkbox" id="check" name="field[]" value="Grade,"></center></th> 
<th>LandlineNo<br/><center><input type="checkbox" id="check" name="field[]" value="LandlineNo,"></center></th>
<th>MobileNo<br/><center><input type="checkbox" id="check" name="field[]" value="MobielNo,"></center></th> 
<th>Email<br/><center><input type="checkbox" id="check" name="field[]" value="Email,"></center></th> 
<th>AddressLine1<br/><center><input type="checkbox" id="check" name="field[]" value="AddressLine1,"></center></th> 
<th>AddressLine2<br/><center><input type="checkbox" id="check" name="field[]" value="AddressLine2,"></center></th> 
<th>Town<br/><center><input type="checkbox" id="check" name="field[]" value="Town,"></center></th> 
<th>County<br/><center><input type="checkbox" id="check" name="field[]" value="County,"></center></th> 
<th>Postcode<br/><center><input type="checkbox" id="check" name="field[]" value="Postcode,"></center></th> 
<th>Price<br/><center><input type="checkbox" id="check" name="field[]" value="Price,"></center></th> 
<th>Paid<br/><center><input type="checkbox" id="check" name="field[]" value="Paid,"></center></th> 
<th>LastUpdated<br/><center><input type="checkbox" id="check" name="field[]" value="LastUpdated,"></center></th>
</tr>
</table>
</form> 
```

所有复选框都被指定为 field[] 作为名称，因此输出到 result.php 中的数组。经过一点进一步阅读后，我可以让数组以逗号分隔显示（回显）选定的列，每个：

```
for ($i=0; $i<count($_POST['field']); $i++){ 
$columns = addslashes($_POST['field'][$i]); 
echo $columns;
}

// output example

LastName,Age,Instrument,Email 
```

但是，我现在不知道如何只在结果视图中检索选定的列。任何人都可以帮助我并朝着正确的方向发展。我有这个，但这不起作用，因为所有列都返回了。

```
$result = mysql_query("select * from TABLE where FirstName like '%$searchterm%' or LastName like '%$searchterm%' or Age like '%$searchterm%' or Instrument like '%$searchterm%' or Grade like '%$searchterm%' or LandlineNo like '%$searchterm%' or MobileNo like '%$searchterm%' or Email like '%$searchterm%' or AddressLine1 like '%$searchterm%' or AddressLine2 like '%$searchterm%' or Town like '%$searchterm%' or County like '%$searchterm%' or Postcode like '%$searchterm%' or Price like '%$searchterm%' or Paid like '%$searchterm%'");

echo '<table>';
while ($row = mysql_fetch_assoc($result)) {
if (empty($columns)) {
    $columns = array_keys($row);
    echo '<tr><th>'.implode('</th><th>', $columns).'</th></tr>';
}
$resultset[] = $row;
echo '<tr><td>'.implode('</td><td>', $row).'</td></tr>';
}
echo '</table>'; 
```

最后一步也是根据结果集检索和填充表的列标题。提前感谢您的任何指导、建议和改进。

吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:50:58.003

```
$result = mysql_query("select * from TABLE where FirstName like '%$searchterm%' or LastName like '%$searchterm%' or Age like '%$searchterm%' or Instrument like '%$searchterm%' or Grade like '%$searchterm%' or LandlineNo like '%$searchterm%' or MobileNo like '%$searchterm%' or Email like '%$searchterm%' or AddressLine1 like '%$searchterm%' or AddressLine2 like '%$searchterm%' or Town like '%$searchterm%' or County like '%$searchterm%' or Postcode like '%$searchterm%' or Price like '%$searchterm%' or Paid like '%$searchterm%'");
$start = FALSE;
echo '<table><thead><tr>';
while ($row = mysql_fetch_assoc($result)) {
foreach ($row as $column => $value)
{
// Now we print the columns if they aren't printed
if ($start === FALSE && !empty($value))
{
echo "<th>$column</th>";
}
}
// And if the columns were printed now we turn start to TRUE.
if ($start === FALSE)
{
echo "</tr></thead><tbody>";
$start === TRUE;
}
echo "<tr>";
// Now for each key and value in the array we verify if the user wanted to print the column and we print it.
foreach ($row as $column => $value)
{
if (!empty($value))
{
echo "<td>$value</td>";
}
echo '</tr>';
}
}
echo '</tbody></table>'; 
```

这应该有效。你可以在评论中看到它是如何工作的。

# magento - magento 如何在产品上添加销售邮票图像

> ID：11630667
> 
> 赞同：0
> 
> 时间：2012-07-24T12:15:48.627
> 
> 标签：magento

我们如何将 On Sale 图像添加到产品中，并将其与类别页面一起显示在产品详细信息页面上？

我使用他下面的代码在类别列表页面中添加 On Sale 图像，它得到了我想要的结果。

```
<?php $specialprice = Mage::getModel('catalog/product')->load($_product->getId())->getSpecialPrice();  
             if ($specialprice){?> <img src="<?php echo $this->getSkinUrl('images/onsale-img.png') ?>" width="68" height="68" class="onsaleicon" />  
            <?php } ?> 
```

但我无法获得相同的图标以继续进入产品详细信息页面......

任何建议我可以如何做到这一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:54:06.663

试试这个，

```
$_product->getSpecialPrice(); 
```

目录/产品/view.phtml

如果您对商业感兴趣，请查看此[扩展](http://ecommerce.aheadworks.com/magento-extensions/on-sale.html)

# php - 如何以编程方式向我的电子邮件发送消息

> ID：11630675
> 
> 赞同：0
> 
> 时间：2012-07-24T12:16:22.097
> 
> 标签：php, message

我需要一些帮助来通过 php 向我的电子邮件发送消息。这是我到目前为止的代码：

```
 <?php
 $newline = $_GET['message'];

$newline = str_replace("[N]","\n"
,"$newline");
$newline = str_replace("[n]","\n"
,"$newline");
mail($_GET['to'],$_GET[
'subject'],$newline,"From: ".$_GET['from']);
echo "<FONT FACE=\"Verdana\" SIZE=\"2\">".$_GET[
'thanks']."</FONT>";?> 
```

我将此 php 代码上传到我的服务器，然后使用 execute_shell() 函数通过定义各种变量将消息发送到我的电子邮件。这是代码：

```
msg_to="linera@low.com";
msg_from="celebraces@gmail.com";
msg_subject="Hey, what's up?";
msg_message="This is a test email :D";
msg_thanks="Your message has been sent :D";

    execute_shell("http://yourserver.com.au/
yourgame/sendmail.php?to="+msg_to+"&from="
   +msg_from+"&subject="+msg_subject+"&
message="+msg_message+"&thanks="+msg_thanks,""); 
```

问题是，当消息完成后，它只显示 msg_thanks，我将其定义为一个变量。我是 php 新手，不太了解。我要做的就是删除它，而是在消息完成后将用户重定向到特定的感谢网页。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:22:27.843

尝试[`header()`](http://php.net/manual/en/function.header.php)：

```
header("location:../thankyou.php"); 
```

# c# - IEnumerable 的 C# 通用约束

> ID：11630676
> 
> 赞同：8
> 
> 时间：2012-07-24T12:16:24.180
> 
> 标签：c#, generics

```
public interface I {
}
public class A : I {
} 
```

编译器将显式`IEnumerable<A>`视为`IEnumerable<I>`：

```
public void Test() {
    IEnumerable<A> a = new List<A>();
    new List<I>().AddRange(a);
} 
```

但是有了通用约束，我们得到：

```
public void Test<T>() where T : I {
    IEnumerable<T> t = new List<T>();
    new List<I>().AddRange(t);
}
                          ^^^
Argument 1: cannot convert from 'IEnumerable<T>' to 'IEnumerable<I>' 
```

但是，这编译得很好。

```
public void Test<T>(T t) where T : I {
    new List<I>().Add(t);
} 
```

因此问题是：这是一个正确的行为，还是一个错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T12:22:21.680

问题是泛型协方差仅适用于引用类型。例如， a`List<int>`不是* an `IEnumerable<Comparable>`，但 a`List<string>`是。

因此，如果您限制`T`为引用类型，它将编译：

```
public void Foo<T, I>() where T : class, I 
{
    IEnumerable<T> t = new List<T>();
    new List<I>().AddRange(t);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:26:14.273

这与协方差和逆变有关。可以说这不是一个错误，而是一个功能。

为了深入了解这个，我推荐 Eric Lippert 的博客文章系列：

[http://blogs.msdn.com/b/ericlippert/archive/2007/10/16/covariance-and-contravariance-in-c-part-one.aspx](http://blogs.msdn.com/b/ericlippert/archive/2007/10/16/covariance-and-contravariance-in-c-part-one.aspx)

# google-app-engine - Google App Engine JDO 和强一致性

> ID：11630677
> 
> 赞同：0
> 
> 时间：2012-07-24T12:16:24.330
> 
> 标签：google-app-engine, jdo, datanucleus

我已经用 GAE (1.7.0) 试验了几个星期，但我在 STRONG 一致性方面遇到了一些问题。

我一直在研究这个问题，但我仍然不清楚。

是否有人能够肯定地说，如果在 GAE 中使用 JDO，那么一致性将是 EVENTUAL。

实现 STRONG 一致性的唯一方法是不使用 JDO，而是将 GAE 实体类与 Ancestry 一起使用。

在这个阶段，我不知道是我的代码有问题还是环境不支持。无论如何，我正在失去我脆弱的小头脑:-)

我的 jdoconfig.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<jdoconfig xmlns="http://java.sun.com/xml/ns/jdo/jdoconfig"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:noNamespaceSchemaLocation="http://java.sun.com/xml/ns/jdo/jdoconfig">

<persistence-manager-factory name="transactions-optional">
  <property name="javax.jdo.PersistenceManagerFactoryClass"
    value="org.datanucleus.store.appengine.jdo.DatastoreJDOPersistenceManagerFactory"/>
  <property name="javax.jdo.option.ConnectionURL" value="appengine"/>
  <property name="javax.jdo.option.NontransactionalRead" value="true"/>
  <property name="javax.jdo.option.NontransactionalWrite" value="true"/>
  <property name="javax.jdo.option.RetainValues" value="true"/>
  <property name="datanucleus.appengine.autoCreateDatastoreTxns" value="true"/>
  <property name="datanucleus.appengine.datastoreReadConsistency" value="STRONG" />
</persistence-manager-factory> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:27:30.667

我认为您不能通过在 jdoconfig.xml 文件中将 datastoreReadConsistency 指定为 STRONG 来确保一致性。

Google App Engine 的 High Replication Datastore (HRD) 现在是 App Engine 应用程序的默认数据存储库。保证此模型仅适用于最终一致性。

您提到的内容是正确的，并且根据文档，该文档指出“要获得高度一致的查询结果，您需要使用祖先查询将结果限制为单个实体组。”

见注：[https ://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency](https://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency)

# operating-system - 操作系统如何确定虚拟内存的大小

> ID：11630684
> 
> 赞同：2
> 
> 时间：2012-07-24T12:16:40.373
> 
> 标签：operating-system

我对将虚拟内存分配给进程感到非常困惑。

操作系统如何确定应该分配给进程的“虚拟内存”数量？它取决于进程大小吗？

它是否取决于 RAM（“主存储器”）的大小？如果是，那么假设 RAM 的大小是 4GB，并且驻留操作系统需要 1GB 来执行它：将分配多少虚拟内存给进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:25:12.013

虚拟内存通常是常驻内存和未映射到物理内存的所有内容的总和，例如交换、打开的文件等。操作系统不会确定内存的大小——一个进程显式分配内存来做什么它想做。其他内存（例如映射文件）是隐式分配的，但内存量也取决于资源的大小。

# php - mysql , between 和 limit 一起

> ID：11630691
> 
> 赞同：-2
> 
> 时间：2012-07-24T12:17:00.773
> 
> 标签：php, sql, mysqli

我想获取某个日期间隔之间的所有行，结果集最多为 50 条记录。可以查询什么？我不断收到错误：

```
$sql = "SELECT DISTINCT userId FROM ".$TableName.
       " where time BETWEEN (NOW() - INTERVAL "
       .$USER_COUNT_DURATION.
       " MINUTE AND NOW())  LIMIT 0, ".$limit." ;"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:19:21.077

看起来像括号问题。“分钟和现在（））”应该是“分钟）和现在（）”

```
$sql = "SELECT DISTINCT userId FROM ".$TableName." where time BETWEEN (NOW() - INTERVAL ".$USER_COUNT_DURATION." MINUTE) AND NOW() LIMIT 0, ".$limit." ;"; 
```

# javascript - 动态更新 Html 中的列表

> ID：11630692
> 
> 赞同：-3
> 
> 时间：2012-07-24T12:17:08.600
> 
> 标签：javascript, html

我在 html 页面中有一个列表，应该在单击按钮时更新。我也有一个文本字段和按钮。在文本字段中输入的值应在单击按钮时显示在列表框中。

这是我的代码：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>        
        <script type="text/javascript">
            function addsoap(form1)
            {
                if(document.form1.datafile.value=="")
                {
                    alert("Select a File First");
                }
                else
                {
                    var soap=document.getElementById("right1");
                    var newsoap=document.createElement('option');
                    newsoap.text=document.form1.datafile.value;
                    newsoap.value=document.form1.datafile.value;
                    soap.add(newsoap);
                }
            }
        </script>
    </head>
    <body>
        <table align='center'>
            <form name="form1">

                <tr>
                    <td>Please specify a file, or a set of files:<br>                    
                        <input type="file" name="datafile" size="40">
                    </td>
                </tr>
                <tr>
                    <td><input type=button value="ADD" onclick="addsoap(form1)" ></td>
                </tr>
                <tr>
                    <td align="right"><select id="right1" size="10" multiple>
                            <option>AAAAAAAAAAAAAAAAAAAAAAAAA</option>
                        </select></td>

                </tr>
            </form>

        </table>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:36:38.083

而不是 .add 方法使用 .appendChild 方法

# asp.net-mvc - LINQ 投影是否应该是强类型的

> ID：11630693
> 
> 赞同：2
> 
> 时间：2012-07-24T12:17:09.267
> 
> 标签：asp.net-mvc, linq, projection, strong-typing

我在 MVC 项目中有一个聚合数据视图，它显示按审计状态细分的每月总计。控制器代码使用简单的 LINQ 投影到匿名对象中进行设置，如下所示：

```
From audits In db.Audits
Group By key = audits.DateCreated.Value.Month Into g = Group
Select New With {
    .Month = key,
    .Assigned = g.Sum(AuditsWithStatus(AuditStatus.Issued)),
    .Unassigned = g.Sum(AuditsWithStatus(AuditStatus.Pending)),
    .Closed = g.Sum(AuditsWithStatus(AuditStatus.Closed)),
    .Cancelled = g.Sum(AuditsWithStatus(AuditStatus.Cancelled))
} 
```

我知道这是 LINQ 的一大优势（使用匿名类型），但我不喜欢失去视图中的强类型（即@ModelType SomeStrongType）。对此有什么一般性建议吗？文章、博客或其他处理该问题的地方以及何时使用哪个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:50:11.230

您不能对方法范围之外的匿名类型执行任何操作。例如，您不能将它们返回到您的视图中。在这些情况下，您必须使用已知类型。

当我选择以另一种方式处理的数据时，我使用匿名类型。例如，使用 Linq 从 1 个源中选择一些定制数据，然后放入另一个源。

如果您要返回聚合数据，例如`IEnumerable<IGrouping<TKey, TValue>>`and`TKey`并且`TValue`是匿名类型（如果需要，您可以按匿名类型分组）；那么您不想为`TKey`and创建 2 个类`TValue`，其中`TKey`有一个被覆盖的类`Equals`，`GetHashCode`因此您可以按它进行分组。然后什么也不做，只是从中读取一些值并将其扔掉，永远不要重复使用。

**TLDR；**当不需要创建已知类型来存储结果时使用它们。如果您需要将结果传递到方法范围之外的某个地方，那么您将需要一个类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:14:15.963

一般建议很简单：始终为您的视图创建专用的视图模型类型。在您的情况下，它会非常简单，完全包含您在匿名类中拥有的属性。

我知道这似乎是不必要的开销，但它会使您的代码更具可读性和可验证性。

# iphone - 我可以在 iOS 上使用 AV Foundation Framework 流式传输 .mp3 链接吗？

> ID：11630695
> 
> 赞同：1
> 
> 时间：2012-07-24T12:17:20.383
> 
> 标签：iphone, ios, audio

我正在为拥有自己收音机的人制作应用程序。它只是一个流 URL（例如[http://stream.domain.com/highquality.mp3](http://stream.domain.com/highquality.mp3)）我已经使用 AV Foundation Framework 编写了代码，让它与一个简单的 .mp3 文件一起工作。

这是我的代码：

```
-(IBAction)play {
if(clicked == 0) {
    clicked = 1;
    NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/test.mp3", [[NSBundle mainBundle] resourcePath]]];

    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = 0;

    [audioPlayer play];
    [start setTitle:@"Stop" forState:UIControlStateNormal];
}
else {
    [audioPlayer stop];
    clicked = 0;
    [start setTitle:@"Start" forState:UIControlStateNormal];
}
} 
```

我应该编辑什么？

编辑：上面的代码确实有效。我需要让它用一个按钮来播放和停止它。我不想在我的设备上安装一个空媒体播放器。简单又漂亮。。

**编辑 2：有些人找不到我需要的东西：我需要进行编辑以使其与 .mp3 流一起使用（例如上面的流）。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:57:13.823

您只需将 NSURL 传递给您的播放器对象，使其从那里播放流

```
-(IBAction)play {
if(clicked == 0) {
    clicked = 1;

    NSURL *url = [NSURL URLWithString:@"http://www.linktoyourstream.com"];

    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = 0;

    [audioPlayer play];
    [start setTitle:@"Stop" forState:UIControlStateNormal];
} 
```

# php - 使用 Silex 注册库后控制台中没有错误

> ID：11630696
> 
> 赞同：1
> 
> 时间：2012-07-24T12:17:20.833
> 
> 标签：php, silex

我尝试将 FormServiceProvider 库添加到我的引导程序中。我不得不下载它，因为它不是“轻”的 Silex 框架版本。

所以我把它放在我的图书馆里（这是结构）

```
Sources
   --- private
      --- application
         --- controllers
         bootstrap.php
      --- data
      --- libraries
         --- Silex
            --- Provider
                   FormServiceProvider.php
                   SessionServiceProvider.php
                   ...
            silex.phar
         --- Swift
         --- Symfony
         --- ... 
```

（我有所有需要的依赖项）

```
require __DIR__.'/../libraries/Silex/Provider/FormServiceProvider.php';
$app->register(
     new libraries\Silex\Provider\FormServiceProvider(),
     array('form.class_path' => __DIR__ . '/../libraries',
)); 
```

当我添加该代码来注册 FormServiceProvider 时，我网站的每个页面都变为空白，除了此行之前的引导程序之外什么都没有加载。

经过一番测试，我发现错误在这一行

```
new libraries\Silex\Provider\FormServiceProvider() 
```

（只是做一个 print_r(new libraries\Silex\Provider\FormServiceProvider()) 会犯同样的错误）。

但是控制台中没有出现任何内容（**编辑：**浏览器控制台），我不知道出了什么问题。我尝试修改我的错误级别以查看是否出现了某些内容，但什么也没有。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:40:58.223

激活错误日志，将其放入您的引导程序中：

```
error_reporting(E_ALL | E_STRICT); 
ini_set('display_errors', 1);
ini_set('log_errors', 1); 
```

闻起来像“找不到类”。

# iphone - CoreData 应用程序在执行获取请求 pthread_mutex_lock 时冻结

> ID：11630702
> 
> 赞同：3
> 
> 时间：2012-07-24T12:17:34.227
> 
> 标签：iphone, ios, multithreading, ios5, core-data

我正在使用 Core Data 将数据库管理到我的应用程序中。

我不能在这里发布代码，因为它太长了。但我想我可以用一小行代码和一些快照来解释我的问题。

```
+(NSArray *)checkusernameandpassword:(NSString *)entityname  username:(NSString *)username   password:(NSString *)password 
{
    managedobjectcontext=[Singleton sharedmysingleton].managedobjectcontext;
    NSEntityDescription *entity=[NSEntityDescription entityForName:entityname inManagedObjectContext:managedobjectcontext];

    NSFetchRequest *request=[[NSFetchRequest alloc] init];
    [request setEntity:entity];

    NSPredicate *predicates=[NSPredicate predicateWithFormat:[NSString stringWithFormat:@"userName==\"%@\" AND password==\"%@\"",username,password]];
    [request setPredicate:predicates];  
    //On Below line, My app frezes and goes into deadlock, this happens randomly while performing
    //some data request using Core data
    NSArray *arrayofrecord=[managedobjectcontext executeFetchRequest:request error:nil];    

    return arrayofrecord;
} 
```

我正在尝试附加一些调用堆栈的屏幕截图（当我暂停我的应用程序时会看到这些屏幕截图） **上面提到了图像中带有复选标记的方法，在该方法发生死锁** ![上面提到了图像中带有复选标记的发生死锁的方法](../Images/8c5ea619da1d0b553615b661e5fc4a1f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:31:35.997

你必须锁定线程。当多个线程访问同一段代码时会出现此问题。但最终不会陷入僵局。

```
static NSString *fetchRequest = @"fetchRequest";
    NSArray *results;
    @synchronized (fetchRequest){
        managedobjectcontext=[Singleton sharedmysingleton].managedobjectcontext;
        NSEntityDescription *entity=[NSEntityDescription entityForName:entityname inManagedObjectContext:managedobjectcontext];

        NSFetchRequest *request=[[NSFetchRequest alloc] init];
       [request setEntity:entity];

       NSPredicate *predicates=[NSPredicate predicateWithFormat:[NSString stringWithFormat:@"userName==\"%@\" AND password==\"%@\"",username,password]];
       [request setPredicate:predicates];  
       //On Below line, My app frezes and goes into deadlock, this happens randomly while performing
       //some data request using Core data
       results = [managedobjectcontext executeFetchRequest:request error:nil];    
}
return results; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T22:33:37.627

据我从您的转储中了解到，您在 MainThread 以外的不同线程中调用 CoreData Context。

请记住，CoreData Context 不是线程安全的，您有责任正确使用它。

[关于 CoreData 和 Thread](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/Articles/cdConcurrency.html)的 Apple 文档非常详尽。

上面提出的解决方案根本不安全：如果您在并发环境中编程（即您有多个线程，我们假设可以同时访问同一个 MOC），同步语句是无用的。

您可以尝试将您的上下文“限制”在线程生命周期内。例如：

```
dispatch_async(dispatch_get_global_queue(0, 0), ^(){
NSManagedObjectContext* context = [[NSManagedObjectContext alloc] init];
context.persistentStoreCoordinator = self.mainContext.persistentStoreCoordinator;

//Make the fetch and export results to main thread
...
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-01-26T08:39:01.330

`[private performBlock:^{}];`在多线程环境中使用 Core Data 时可以尝试。

有关更多详细信息，请查看此文档[https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreData/Concurrency.html#//apple_ref/doc/uid/TP40001075-CH24-SW1](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreData/Concurrency.html#//apple_ref/doc/uid/TP40001075-CH24-SW1)

# sql-server-2008 - 以日期时间类型插入日期和时间的单个命令，SQL Server

> ID：11630703
> 
> 赞同：-2
> 
> 时间：2012-07-24T12:17:37.913
> 
> 标签：sql-server-2008, datetime

在 Microsoft SQL Server 2008 数据库中，如何在单个命令中在日期时间类型的列中插入日期和时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:20:29.190

在 MySQL 中你可以使用函数 NOW() 在 MSSQL 中你可以使用 GETDATE() 函数。[http://msdn.microsoft.com/en-us/library/ms188383.aspx](http://msdn.microsoft.com/en-us/library/ms188383.aspx)

这是一个例子：

```
INSERT INTO `table`(`datetime`) VALUES(GETDATE()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:33:56.447

指定当前会话的[DATEFORMAT](http://msdn.microsoft.com/en-us/library/ms189491.aspx)值，并使用 INSERT 命令添加新记录，例如：

```
SET DATEFORMAT dmy;
INSERT INTO dbo.table1 VALUES (1, '24-07-2012 12:45:10')

SET DATEFORMAT mdy;
INSERT INTO dbo.table1 VALUES (2, '07-24-2012 12:45:10') 
```

# jquery - jquery同位素选择/选项和未排序列表

> ID：11630704
> 
> 赞同：1
> 
> 时间：2012-07-24T12:17:47.680
> 
> 标签：jquery, select, jquery-isotope

我想将 SELECT/OPTION 与 UNORDERED LIST 结合起来用于 jQuery 同位素组合过滤器。我让它与多个 SELECT/OPTION 一起工作，但不知道如何结合 SELECT 和 UL。有什么帮助吗？

这是我的 jsfiddle：http: [//jsfiddle.net/fgLUa/36/](http://jsfiddle.net/fgLUa/36/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T13:11:08.600

请检查这个。我已经用 UL 更新了你的小提琴。

这可能会对您有所帮助。希望这是你想要的...

[http://jsfiddle.net/fgLUa/39/](http://jsfiddle.net/fgLUa/39/)

# asp-classic - 根据像素长度而不是字符长度拆分字符串

> ID：11630706
> 
> 赞同：0
> 
> 时间：2012-07-24T12:17:53.620
> 
> 标签：asp-classic

是否可以根据像素长度而不是字符长度分割字符串？

我不希望文章的标题打破界限并“破坏”设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T17:05:27.430

ASP 页面在**服务器端**工作。

文本的像素长度或字符长度取决于**客户端**浏览器中使用的字体。

有一种字体叫做等距字体。这意味着字体的所有字母都有固定的长度。如果您使用这种类型的字体，那么您可以计算文本的*像素长度*。像：

```
<%
    letter_length = 12 
    pixel_length = letter_length * Len(strHeader)
%> 
```

或者，如果字体不是等距字体，那么也许您可以为自己的字体创建一个像素长度数组。也许计算整个文本的像素长度，但我不鼓励你这样做，因为它需要更多的硬代码！

我对您的问题的问题是..**为什么您要尝试使用 asp（服务器端语言）来实现这一目标？**

# redmine - 在 redmine 上隐藏 wiki 页面附件列表

> ID：11630709
> 
> 赞同：3
> 
> 时间：2012-07-24T12:18:01.690
> 
> 标签：redmine

在 wiki 页面的末尾，附有一个长长的文件列表（已经内联显示的图像）
是否可以隐藏文件列表？

# public-key-encryption - 非质因式分解公钥算法和代码？

> ID：11630710
> 
> 赞同：0
> 
> 时间：2012-07-24T12:18:17.910
> 
> 标签：public-key-encryption, prime-factoring, public-key

我正在寻找不基于素数分解难度的公钥算法。特别是，有传言称，某些国家安全机构结合了更好的算法和暴力破解的能力，正在解决素数分解问题。

我记得几年前读过有关基于其他同样困难的问题的替代算法，如果 P <> NP，这些问题将不容易解决。

不依赖质因数分解的安全和加密领域最有前途的研究途径是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T17:16:39.687

如今，椭圆曲线很大。不过，数学是相当令人难以置信的。

McEliece 是另一种符合您描述的选择。

除此之外，您可以浏览维基百科公钥加密参考。

# objective-c - 来自核心数据的值之间的 Objective-C 类型错误

> ID：11630711
> 
> 赞同：0
> 
> 时间：2012-07-24T12:18:24.930
> 
> 标签：objective-c, ios, xcode, cocoa

我的核心数据中有一个表，其中一个名为 userId 的字段是一个整数。

我成功获取它并将其分配给具有以下代码的 id：

```
id userId2 = [info valueForKey:@"userId"]; 
```

info 是我的 NSManagedObject 和 userId2 是一个 id。现在我想将 userId2 转换为字符串。我读到我可以直接执行以下操作：

```
NSString *userId3 = userId2; 
```

但是，当我在字符串和 userId3 之间执行 if 检查时，即使它们具有相同的值，检查也会失败。

还有一件事，Xcode 说 userId 在调试模式下不是 CFString 。

* * *

我的解决方案是通过以下方式将两个变量都转换为双精度：

```
double myDouble = [userId3 doubleValue]; 
```

还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:27:12.687

如果`userId`字段是数字，则不是`NSString`，而是`NSNumber`。对于这个简单的案例，您可以使用...

```
NSString *userId3 = [userId2 stringValue]; 
```

... 或者 ...

```
NSString *userId3 = [NSString stringWithFormat:@"%d", [userId2 intValue]]; 
```

...和字符串比较应该以这种方式完成...

```
if ( [str1 isEqualToString:str2] ) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:25:14.713

NSString 是一个可爱的类，文档中有很多可用的，特别是当你想将数字显示为 NSStrings 时，

如果你不熟悉 NSNumber、NSDecimalNumber 等，我会认真地玩弄它，当涉及到 int、float 和 doubles，然后处理 NSNumber + NSDecimalNumber 时会有点混乱。

我建议尽早“将其扼杀在萌芽状态”！

# iphone - iOS - 如何显示 iOS 应用的手势提示？

> ID：11630713
> 
> 赞同：1
> 
> 时间：2012-07-24T12:18:39.313
> 
> 标签：iphone, ios, gestures

我见过一些应用程序，当你在下载后第一次启动它们时（例如 iPhone 上的 Chrome 应用程序），它会在屏幕上显示一个动画手势列表，让你可以浏览应用程序。

我如何构建一个这样的东西？该应用程序如何知道仅在下载后第一次启动而不是此后启动？对于第二个问题，我猜测可以将“shown=TRUE”值保存在 PList 文件中，并在每次应用程序完成启动时检查该值。但我对创建引导式应用程序游览所涉及的机制更好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:29:19.050

您可以使用带有 的透明和半透明图像`UIImageView`，因此您可以用箭头和注释组成图像并覆盖整个屏幕。当用户点击时，您可以将其淡出。

要知道它是否是第一次运行应用程序，您应该使用`NSUserDefaults`而不是 plist；它更容易，你应该很容易找到一个快速教程。

此外，您可以在[此站点上查看类似](http://www.cocoacontrols.com/)[这样](http://www.cocoacontrols.com/platforms/ios/controls/emhint)的控件。我自己没有使用过任何一个，所以我不确定它们与普通的`UIImageView`. 不过它们看起来不错。

# r - 从 r 中的第二个数据帧中过滤 r 行名称中的数据帧

> ID：11630715
> 
> 赞同：1
> 
> 时间：2012-07-24T12:18:41.690
> 
> 标签：r, filter, dataframe

我有 data.frame ：

```
df1<-data.frame("Sp1"=1:6,"Sp2"=7:12,"Sp3"=13:18)
rownames(df1)=c("A","B","C","D","E","F")

df1

  Sp1 Sp2 Sp3
A   1   7  13
B   2   8  14
C   3   9  15
D   4  10  16
E   5  11  17
F   6  12  18 
```

`df1`我按截止值过滤`rowSums(df1)`并返回要包括在下游分析中的站点（行名称）。

```
include<-rownames(df1[rowSums(df1)>=22,])
include

[1] "B" "C" "D" "E" "F" 
```

我有第二个 data.frame ：

```
df2<-data.frame(site.x=c("A","B","C"), site.y=c("D","E","F"),score=1:3)

  site.x site.y score
1      A      D     1
2      B      E     2
3      C      F     3 
```

我想过滤 df2 使其仅包含与“包含”中列出的站点完全相同的行，`df2$site.x`即`df2$site.y`过滤掉包含“A”的行并返回。

```
 site.x site.y score    
2      B      E     2
3      C      F     3 
```

我试过了 ：

```
filter<-df2$site.x == include & df2$site.y == include   

filtered<-df2[filter,] 
```

感谢您的任何建议！

回答

用于％

```
filter<-df2$site.x %in% include & df2$site.y =%in% include  

filtered<-df2[filter,]
filtered

   site.x site.y score
 2      B      E     2
 3      C      F     3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:34:35.800

对我来说，它适用于：

```
filter<-df2$site.x %in% include & df2$site.y %in% include
df2[filter,] 
```

事实上，你已经把`df1`而不是放在`df2`你问题的最后两行。

# focus - 等待一个 JQuery 事件的结束来执行另一个

> ID：11630716
> 
> 赞同：2
> 
> 时间：2012-07-24T12:18:45.523
> 
> 标签：focus, jquery

实际上，我在某些输入上有一个带有 JQuery focusOut 事件的表单。但是如果焦点在这个输入之一并且用户想要提交。在执行提交事件之前，我需要等待 focusOut 事件结束。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:41:56.007

使用一对标志不应该太难。如果您想在完成某些事情之前暂停表单提交，只需：

1.  `inProgress`当你开始你想等待的事情时设置一个标志（或其他）

2.  挂钩提交事件

3.  如果`inProgress`设置了标志，请取消提交事件并设置一个标志，说明表单需要提交（`submitPending`或其他）

4.  当其他事情完成时，清除`inProgress`标志，如果`submitPending`已设置，则提交表单

重要的是你知道事情*会*完成。如果你不知道#4 肯定会触发，你不想取消#3 中的提交。

例如，假设`#theField`是字段并且`#theForm`是表单，它看起来像这样：

```
(function() {
    var inProgress = false,
        submitPending = false;

    // #2
    $("#theForm").submit(function() {
        if (inProgress) {
            // #3
            submitPending = true;
            return false;
        }
    });
    $("#theField").on("focusOut", function() {
        inProgress = true;
        startThingThatTakesTimeLikeAnimationOrAjax(function() {
            // This is the completion callback of the thing that takes time

            // #4

            // No longer in progress
            inProgress = false;

            // Submit if one is pending
            if (submitPending) {
                $("#theForm").submit();
            }
        });
    });
})(); 
```

# php - PHP：对抗劫持会话的最佳解决方案

> ID：11630721
> 
> 赞同：3
> 
> 时间：2012-07-24T12:18:56.087
> 
> 标签：php, security, session, symfony, csrf

> **可能重复：**
> [PHP 会话安全](https://stackoverflow.com/questions/328/php-session-security)

当我使用 PHP 启动我的第一个网站时，我将 user_id 直接存储到会话中。我很高兴，一切都很顺利。我可以检查用户是否已登录，或者他是否正在访问他有权访问的页面。直到我发现我的系统完全不安全的痛苦事实。所以我开始寻找解决方案。我发现了很多帖子和建议的解决方案，但是，总是有缺点，我们不应该接受缺点，即使是微小的错误也会付出代价，因为它关系到用户的帐户安全性。

到目前为止，我发现的策略如下：

*   检查 IP 地址。

*   检查用户代理。

*   每个短周期重新生成 session_id。

*   盐渍 MD5 哈希和指纹识别。
*   SSL 和 HTTPS。
*   以上这些的一些混合物。

除非您证明其中之一是可信的。

经过两天的搜索，我最终说：“那么现在呢？”。最常见的方法是什么？Stackoverflow 或 Facebook 使用什么？
我使用 Symfony2 作为框架，我检查了文档，但没有找到有关会话安全的内置内容。愿 Symfony2 专家帮助我。
我读了很多书，累了，因为这个问题不是新问题，所以任何直接的建议甚至有用的链接都将受到高度赞赏。我相信人们今天获得了更多的经验。

# oop - 在两个不相关的类中使用相同的方法 - 减少重复

> ID：11630734
> 
> 赞同：2
> 
> 时间：2012-07-24T12:20:01.483
> 
> 标签：oop, class, methods

假设我有两节课

```
class Driver{
    //attributes of driver ,ex: driving licence number
    // methods related to driving ,ex: drive(Car) , stop(Car)
    changeTyre(Car,Tyre);   // sometimes the driver can change the tyres right?
}
class Mechanic{
    // Hard mechanical stuff , ex: repairEngine(Car)
    changeTyre(Car,Tyre);  // Simple.hence sometimes the driver also does
} 
```

现在这两种`changeTyre()`方法的实现将是相同的。

现在我有两个问题，

1.  存在重复（重复）代码
2.  `changeTyre(Car,Tyre)`拥有一个包含该方法的 Super 类似乎没有意义

这类情况如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T13:24:59.643

为了扩展使用组合而不是继承（[威利的回答](https://stackoverflow.com/a/11631394/225085)），我认为您在关于使用 ChangeTyre 之类的评论中走在了正确的轨道上`car.ChangeTyre(Tyre)`。

每个机械师或司机都将与一辆车相关联，因此他们可以拥有 Car 属性 -

```
class Driver{

    Car driverCar;

    //constructor
    Driver(Car car)
    {
        driverCar = car;
    }

    //attributes of driver ,ex: driving licence number
    // methods related to driving ,ex: drive(Car) , stop(Car)
    changeTyre(Tyre) 
    {
        driverCar.changeTyre(Tyre);
    }
} 
```

`changeTyre`Driver 和 Mechanic 的方法可能相同，但更换轮胎的实际逻辑将集中在一个地方。我认为继承不起作用，因为机制不是驱动程序，并且继承支持“is-a”关系。强制到超类（比如 Person）可能没有意义`changeTyre`，因为不是每个从 Person 继承的类都需要有一个`changeTyre`方法。有关组合而不是继承的更多信息，请参阅[此问题](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:59:29.027

```
class Driver
{
    //attributes of driver ,ex: driving licence number
    // methods related to driving ,ex: drive(Car) , stop(Car)
    public TyreFunction TyreFunctions { get; set; }
}

class Mechanic {
    // Hard mechanical stuff , ex: repairEngine(Car)
    // Simple.hence sometimes the driver also does
    public TyreFunction TyreFunction { get; set; }
}

class TyreFunction
{
    change(Car,Tyre)
} 
```

做这个 ！

然后你在一个类中没有重复的代码和控制。您还可以创建所有函数列表以将特定函数添加到类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:59:46.240

我建议 Mechanic 实际上应该从 Driver 继承，因为我假设在您的上下文中，驾驶员可以做的任何事情，机械师都可以做（即驾驶汽车进行测试）。

changeTyre 方法应该是虚拟的，以便它可以被 Mechanic 覆盖，因为实现可能会有所不同（不同的工具等）。

我还建议将一些元素分离到接口中（驾驶方法、汽车保养方法等）。

# tomcat - 使用 Tomcat 管理器监控 Tomcat

> ID：11630736
> 
> 赞同：2
> 
> 时间：2012-07-24T12:20:06.367
> 
> 标签：tomcat, monitoring

我正在使用 Tomcat jmxproxy 和状态来监视 Web 应用程序，但是 jmxproxy 页面中有很多无用的信息，并且活动连接数等信息不在其中。有谁知道如何过滤 jmxproxy 页面以及我在哪里能找到这样的资料吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:55:32.647

[Tomcat 文档](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Using_the_JMX_Proxy_Servlet)非常清楚如何使用 jmxproxy 进行过滤。

活动连接的数量（无论您是在谈论 JDBC 数据源还是 HTTP/AJP 连接）都可以通过 JMX 获得，因此您只是通过 jmxproxy 提供的“无用”信息来寻找不够努力。

尝试阅读[Tomcat 监控常见问题解答](http://wiki.apache.org/tomcat/FAQ/Monitoring)以获取有关您可能想要监控的一些有用的 JMX bean 的信息。

# javascript - 为什么 microAjax 中的警报不输出从 php 文件回显的文本？

> ID：11630738
> 
> 赞同：0
> 
> 时间：2012-07-24T12:20:15.977
> 
> 标签：javascript, html, ajax

我正在尝试从文本文件中获取字符串。我有一个名为 genjsonGPS.php 的 php 文件，如下所示：

```
<?php

$myFile = "vesselGPS.txt";
$fh = fopen($myFile, 'r');
$vesselGPS = fread($fh, filesize($myFile));
fclose($fh);

echo("Hello");

?> 
```

当我运行它时，我会在浏览器中得到一个输出：

“你好”

我有一个带有使用 microAjax 的 js 文件的网页（来自 js 文件）：

```
microAjax("genjsonGPS.php", function (res) {
  alert (res);
}); 
```

当我运行网页时，我得到一个空白警报。当我将上面的功能更改为：

```
microAjax("genjsonGPS.php", function (res) {
  alert (res.toString);
}); 
```

我收到一条警报，上面写着： function toString() { [native code] }

如何让上面的函数像浏览器一样在警报中输出“Hello”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:50:17.893

请遵循这些提示。

*   监控你的 HTTP 服务器的访问日志，类似的东西`tail -f /var/log/apache/access.log`很有帮助。（假设您在 *nix 平台上工作）

*   如果您使用的是 Chrome，请查看`network`监视器面板。

你最好确保：

*   您的 php 页面被真正访问。
*   在服务器端和客户端都没有发生错误。

如果您仍然无法弄清楚哪里出了问题，那么让人们知道如何`microAjax`实施很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:21:06.623

如果你把 URL 写成这样会发生什么`"/genjsonGPS.php"`？

# java - 如何通过类型转换从现有列表中创建 Scala 中的列表？

> ID：11630748
> 
> 赞同：2
> 
> 时间：2012-07-24T12:20:42.573
> 
> 标签：java, string, scala, playframework-2.0

## 语境

我有一个这样的列表：

```
List[(User)] 
```

我需要一个这样的列表：

```
List[(String, String)] 
```

用户定义如下：

```
case class User(
    id:Pk[Long] = NotAssigned, 
    name: String
) 
```

事实上，初始列表是从 classes 构建的：

## 试过：

我的第一次“天真”尝试（来自 Java）是：

```
myList.map { u => u.id.get.toString, u.name } 
```

我有一个错误：

```
required List[(String, String)] 
given List[(java.lang.String, String)] 
```

## 解决方案

正如评论中引用的帖子中提到的，Scala 有一个 String 类型，它是 java.lang.String 的扩展。使用推理时，Scala 不会转换为 Scala 超类。为了使用 Scala String 类型，您必须显式定义返回类型。

例子：

```
// Returns List[(java.lang.String, String)]
myList.map { u => u.id.get.toString, u.name }

// Returns List[(String, String)]
def convert(m:List[User]):List[(String, String)] = {
    m.map { u => u.id.get.toString, u.name }    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:31:33.967

为什么这行不通？

```
def method(a:List[(Long,String)]):List[(String,String)] = a.map { case (value1,value2) => (value1.toString,value2)} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T12:53:26.867

你很亲密。只需要加上括号。

```
myList.map { u => (u.id.get.toString, u.name) } 
```

或者您可以将提取器用于`User`.

```
myList.map { case User(id, name) => (id.get.toString, name) } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T12:55:59.153

这适用于我的 REPL：

```
scala> case class User (id: Option[Long] = None, name:String)
defined class User

scala> val users = User(name = "Name") :: User(name = "LastName") :: Nil
users: List[User] = List(User(None,Name), User(None,LastName))

scala> val pairs = users.map{u => u.id.toString -> u.name}
pairs: List[(String, String)] = List((None,Name), (None,LastName)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T12:24:43.993

```
val xs: List[(Long, String)] = List((1l, "A"), (2l, "B"))
val ys: List[(String, String)] = xs.map{case (a, b) => (a.toString, b)} 
```

在上述解决方案中，为了能够将元组分解为其组成部分（此处为`a`和），使用了部分函数（实际上恰好是给定域的总函数`b`）。

您还可以使用元组的访问器方法来访问组件：

```
val zs: List[(String, String)] = xs.map(t => (t._1.toString, t._2)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T12:25:51.233

怎么样：

```
myList.map(t => t._1+"" -> t._2) 
```

或者：

```
myList.map { case(k,v) => (k.toString, v) } 
```

# ios - 从 CGFloat 数组创建属性 - iOS

> ID：11630755
> 
> 赞同：3
> 
> 时间：2012-07-24T12:21:09.940
> 
> 标签：ios, xcode, properties, cgfloat

试图创建一个属性，所以我可以在一个类的实例上设置 CGfloat 数组值。很难弄清楚如何去做。CGFloat 需要具有“大小”[2] 变量和数字组件，如下所示：

```
CGFloat locations[2] = {1.0, 0.0}; 
```

这是它在类本身中的外观（有效），在我创建属性以尝试从实例设置这些值之前（这通过 UIView sunclass 中的 drawRect 创建渐变 BTW）：

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGColorSpaceRef myColorspace=CGColorSpaceCreateDeviceRGB();
CGFloat locations[2] = {1.0, 0.0};
CGFloat components[8] = { 1.0, 0.0, 0.0, 1.0,  0.5, 0.25, 1.0, 1.0 };
CGGradientRef myGradient = CGGradientCreateWithColorComponents(myColorspace, components,locations, num_locations);
CGContextDrawLinearGradient (context, myGradient, myStartPoint, myEndPoint, 0); 
```

我尝试在 .h 中创建如下所示的属性

```
@property (nonatomic, assign) CGFloat locations; 
```

在.m

```
@synthesize locations; 
```

但我无法弄清楚如何正确设置 [size] 的值和实例中的组件。我在设置属性时也遇到错误：错误：“将'CGFloat'（又名'float'）传递给不兼容类型'const CGFloat *'（又名'const float *'）的参数；使用&获取地址”

您可以在这里获得项目，如果您想看看[tinyurl.com/cmgy482](http://tinyurl.com/cmgy482)任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:44:18.907

从此处找到的另一个答案：[“C 数组不是属性支持的数据类型之一”。](https://stackoverflow.com/a/1983022/1408546)我认为那是我的问题。我使用的解决方案是将属性设为 NSMutableArray 并将值转换为 CGFloat。

。H

```
@property (nonatomic, retain) NSMutableArray *locations; 
```

.m

```
CGFloat locationsFloat[[locations count]];

    for (int i = 0; i < [locations count]; i++) {
        NSNumber *number = [locations objectAtIndex:i];
        locationsFloat[i] = [number floatValue];        
    } 
```

视图控制器

```
- (void)viewDidLoad
{
    NSMutableArray *arrayPoints = [[NSMutableArray alloc]init];    
    [arrayPoints addObject:[NSNumber numberWithFloat:1.0]];
    [arrayPoints addObject:[NSNumber numberWithFloat:0.0]];

    [myInstance setLocations:arrayPoints];

... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T07:15:50.097

理想情况下，您可以像这样声明您的财产：

```
@property (nonatomic) CGFloat locations[2]; 
```

唉，clang 不允许您创建具有数组类型的属性。

一种替代方法是使用指针类型。您可能想写一条评论来解释它指向多少个元素：

```
#define kMyClassLocationCount 2

// This is an array of kMyClassLocationCount elements.  The setter copies
// the new elements into existing storage.
@property (nonatomic) CGFloat *locations; 
```

要实现它，您需要创建实例变量并定义 getter 和 setter：

```
@implementation MyClass {
    CGFloat _locations[kMyClassLocationCount];
}

- (CGFloat *)locations {
    return _locations;
}

- (void)setLocations:(CGFloat *)locations {
    memcpy(_locations, locations, kMyClassLocationCount * sizeof *_locations);
} 
```

请注意，您不需要`@synthesize`，因为您已经明确定义了`@synthesize`可能生成的所有内容。

当您使用该类的实例时，您可以像这样读取单个位置：

```
CGFloat location1 = myInstance.locations[1]; 
```

你可以像这样设置一个单独的位置：

```
myInstance.locations[0] = 0.5; 
```

您可以像这样一次设置所有位置：

```
CGFloat newLocations[2] = { 7, 11 };
myInstance.locations = newLocations; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T12:36:45.867

我认为你最好是这样的代码：

```
NSArray * locations = [[NSArray alloc ] initWithObjects:[NSNumber numberWithFloat:1.0f],[NSNumber numberWithFloat:0.0f],nil]; 
```

# php - 外部图像代理

> ID：11630759
> 
> 赞同：-1
> 
> 时间：2012-07-24T12:21:30.043
> 
> 标签：php, image, proxy, mirror

有没有办法在不下载外部图像的情况下代理它们？

我的想法是提供一个脚本（即`proxy.php`），我可以在这样的`src`属性中使用它：

```
<img src="http://myseconddomain.com/proxy.php?img=http://example.com/externalimage.png"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:25:29.893

您必须至少下载一次。完成后，您可以缓存它们并从缓存中提供图像。[这是更通用的缓存代理](https://en.wikipedia.org/wiki/Proxy_server#Caching)的一个子集。

# javascript - 使用回调处理程序调用函数内部的父对象方法

> ID：11630760
> 
> 赞同：7
> 
> 时间：2012-07-24T12:21:32.577
> 
> 标签：javascript, callback

我正在调用 ParentObject.doSomething() ，它又调用 WebService 对象来执行一些 ajax 调用，并且在 ajax 调用成功时，将执行回调函数。但是回调函数中的任何父函数都会失败。

我认为这与范围解析有关。我无法找到解决此问题的方法。

有没有更好的架构风格来模块化 ajax 服务和模型？

我还创建了一个 jsfiddle - [http://jsfiddle.net/bzKXr/2/](http://jsfiddle.net/bzKXr/2/)

```
var ParentObject =  {

     doSomething: function(){
         document.write("Inside doSomething <br />");
         var self = this;
         WebServices.firstService("some URL", self.successCallback);
     },

     changeData: function(data){
         //Manipulate data
         document.write("Inside changeData <br />");
     },

     successCallback: function(jsonData){
         document.write("Inside successCallback <br />");
         try {
             //Execution fails at this point. Possibly because of scope resolution
             this.changeData(jsonData);  
         }
         catch (error) {
             console.log(error);
             document.write(error);
         }  
     },
};

var WebServices = {
    firstService: function(url, successCallbackHandler){
        document.write("Inside firstService <br />");
        //Get data using the URL
        //on success call successCallback
        successCallbackHandler("some data");
    }
};

$(document).ready(function() {
    ParentObject.doSomething();

});
​ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T12:25:22.717

编写`self.successCallback`不会将函数绑定到`self`，您必须实际*调用*函数`self.successCallback()`才能正确绑定上下文。

您可以通过将调用包装在保留访问权限的闭包中轻松做到这一点`self`：

```
doSomething: function(){
     document.write("Inside doSomething <br />");
     var self = this;
     WebServices.firstService("some URL", function() {
        self.successCallback();
     });
 }, 
```

或者在 ES5 中，您可以使用`.bind()`which 确保`this`上下文`successCallback`始终是指定的参数：

```
doSomething: function(){
     document.write("Inside doSomething <br />");
     WebServices.firstService("some URL", this.successCallback.bind(this));
 }, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T12:41:59.847

这是最漂亮的方法：

```
WebServices.firstService("some URL", this.successCallback.bind( this )); 
```

但是，它不是跨浏览器。（阅读：IE8及以下无法使用）

这就是为什么 jQuery 有[`$.proxy`](http://api.jquery.com/jQuery.proxy/)：

```
WebServices.firstService("some URL", $.proxy( this.successCallback, this )); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T12:33:58.217

调用回调函数时，`this`无效。在 javascript 中，如果使用 , 调用函数`foo.bar()`，`this`将设置为`foo`，但如果您只调用，则将保留`foo()`先前设置，在您的情况下是事件的元素，可能是您的. 为避免这种情况，您必须使用闭包。您可以替换为。闭包意味着函数可以访问定义函数的范围内的变量，因此您的函数可以访问 ParenObject。`this``WebService``this.changeData(jsonData);``ParentObject.changeData(jsonData);`

更优雅的方式可能是：

```
var ParentObject =  {

    doSomething: function(){
        document.write("Inside doSomething <br />");
        var self = this;
        WebServices.firstService("some URL", function(jsonData) {
            document.write("Inside successCallback <br />");
            self.changeData(jsonData);
        }
    },

    changeData: function(data){
        //Manipulate data
        document.write("Inside changeData <br />");
    }
}; 
```

您的回调函数直接在您的`doSomething`函数中定义，因此您可以访问其中`self`定义的变量，并且可以调用`self.changeData()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T12:24:50.120

如果你改变`this.changeData(jsonData);`它`ParentObject.changeData(jsonData);`应该工作。

错误的原因是该`this`变量不再引用`ParentObject`AJAX 调用何时返回。

另一种方法是将引用存储`this`在另一个变量中（按照约定称为`that`）并更改您的代码以说`that.changeData(jsonData);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T12:27:51.080

另一种可能性是改变

```
WebServices.firstService("some URL", self.successCallback); 
```

到

```
WebServices.firstService("some URL", function(data){ return self.successCallback(data) }); 
```

基本问题是，与 Python 不同，Javascript 中的方法 Javascript 一旦您将它们传递到其他地方或设置另一个变量，就会忘记它们的所有者对象。

# java - 在 JPA 中，如果存在一行，我可以有一个只读布尔值吗？

> ID：11630768
> 
> 赞同：1
> 
> 时间：2012-07-24T12:22:03.413
> 
> 标签：java, spring, jpa, spring-mvc

因此，尝试进一步充实它...我有一个对象，让我们调用用户，我想知道该用户是否是员工。员工是他们自己的对象。所以我想要做的而不是拥有一个员工对象是有一个布尔值来告诉我该用户是否是员工。我认为这可以通过某种形式的只读加入来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:41:12.630

您可以使用 a`@JoinColumn`将`User`对象连接到`Employee`对象（您不必超过其中的 ID）。您也不需要为 Employee 对象创建一个 getter，但您现在可以编写一个`isEmployee()`方法来执行 check `employee != null`。您可能希望确保使用急切的获取来始终将信息保存在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:28:32.307

JPA 具有可在 JPQL 中使用的计数功能。您只需要在 where 子句中区分它是否是员工即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:58:49.520

您可以使用 @Transient 注释 getter 方法，并在此方法中编写逻辑操作，例如如果 user_type 是 EMP 则返回 true

# mongodb - 我正在使用 pymongo 使用 mapreduce 函数来获取结果，但我想要像组这样的 map reduce 的替代方案

> ID：11630769
> 
> 赞同：-1
> 
> 时间：2012-07-24T12:22:06.657
> 
> 标签：mongodb, count, pymongo

```
"tags" : ["MongoDB", "Map/Reduce", "Recipe"]

m = Code("function () {""  this.tags.forEach(function(z) {""    emit(z, 1);""  });""}")

r = Code("function (key, values) {var count = 0;for (var i = 0; i < values.length; i++) {count += values[i];}return count;}")

db.coll.map_reduce(m,r, out = "map_tags",query={"tags": {"$ne": ''},"organization":orgid},safe=True) 
```

我可以通过上面的代码得到正确的结果，但我需要替代解决方案。因为`map_reduce`在我的数据库中创建更多集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:38:37.300

如果您不希望保留 map-reduce 的结果，请使用[`inline_map_reduce`](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.inline_map_reduce)而不是`map_reduce`：

```
results = db.coll._inline_map_reduce(m, r, query={"tags": {"$ne": ''}, "organization":orgid}, safe=True) 
```

请注意，只有当您的结果集符合单个文档的 16MB 限制时，您才能使用此方法。

# javascript - 向下滑动时旋转图像

> ID：11630773
> 
> 赞同：0
> 
> 时间：2012-07-24T12:22:10.283
> 
> 标签：javascript, jquery, html, css, animation

我目前正在尝试在此站点[http://theflouringartisans.com/](http://theflouringartisans.com/)上旋转图像，目标是在展开联系表单时旋转顶部的箭头图像，并在折叠表单时再次旋转。这是我目前拥有的代码：

```
 $(document).ready(function(){

            $("#contactbutton").click(function(){
                if ($("#contact").is(":hidden")){
                    $("#contact").slideDown("slow");
                    $(".arrow").rotateRight(180);
                }
                else{
                    $("#contact").slideUp("slow");
                    $(".arrow").rotateRight(180);
                }
            });

        });

        function closeForm(){
            $("#thankyou").show("slow");
            setTimeout('$("#thankyou").hide();$("#contact").slideDown("slow")', 2000);
       } 
```

我还想让 div #thankyou 在提交表单 5 秒后淡出。

非常感谢您的帮助，感谢您抽出宝贵的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:47:26.053

我从未听说过名为 rotateRight() 的 jQuery 函数，但您可以使用[css3 旋转](http://www.w3schools.com/css3/css3_2dtransforms.asp)和一些 jQuery 组合来完成此操作。

[这是 css3 旋转动画示例，鼠标悬停在此处的绿色框上。](http://www.w3schools.com/css3/css3_transitions.asp)

jQuery：

```
$(document).ready(function(){
     $("#contactbutton").click(function(){
          if ($("#contact").is(":hidden")){
                 $("#contact").slideDown("slow");
                 $(".arrow").addClass('rotateRight');
          }else{
                 $("#contact").slideUp("slow");
                 $(".arrow").removeClass('rotateRight');
          }
      });
}); 
```

CSS：

```
.rotateRight {
transform: rotate(180deg);
-ms-transform: rotate(180deg); /* IE 9 */
-webkit-transform: rotate(180deg); /* Safari and Chrome */
-o-transform: rotate(180deg); /* Opera */
-moz-transform: rotate(180deg); /* Firefox */

/* if you want to do this move with animate use transition */
transition: .5s;
-moz-transition: .5s; /* Firefox 4 */
-webkit-transition: .5s; /* Safari and Chrome */
-o-transition: .5s; /* Opera */

} 
```

# c++ - 避免使用容器调用函数列表？

> ID：11630782
> 
> 赞同：1
> 
> 时间：2012-07-24T12:22:28.117
> 
> 标签：c++, function-pointers

我有一个返回布尔值的函数列表。我想遍历函数列表并为每个“测试 1 通过”、“测试 2 失败”等写一条消息。

我目前的解决方案是创建一个函数指针向量，推回每个函数，然后循环遍历该向量。代码如下。有没有办法在不为每个测试重复通用消息（通过/失败）代码的情况下避免容器（想象会有数百个测试）。感觉好像向量是不必要的，或者必须有一个更优雅的解决方案。

```
typedef bool (*Tests)();
std::vector<Tests> tests;
tests.push_back(FASTA_FILE_READER_TEST);
tests.push_back(EXACT_MATCH_TEST);

for (int i = 0; i < tests.size(); i++) {
    std::cout   << "Test " << i + 1 
                << (tests[i]() ? " PASSED" : " FAILED")
                << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:28:14.507

有什么东西阻止你使用数组吗？

```
#include <iostream>

bool FASTA_FILE_READER_TEST() { return false; }
bool EXACT_MATCH_TEST() { return false; }

int main()
{
    typedef bool (*Tests)();

    Tests tests[] = {FASTA_FILE_READER_TEST, EXACT_MATCH_TEST};

    for (int i = 0; i < sizeof(tests)/sizeof(Tests); i++) {
        std::cout   << "Test " << i + 1 
                    << (tests[i]() ? " PASSED" : " FAILED")
                    << std::endl;
    }    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T12:29:28.573

你可以使用一个函数来做到这一点：

```
template<typename Functor>
void test(Functor& functor){
    static int i = 0;

    bool ret = functor();
    if(ret){
        std::cout << "Test " << i++ << " passed" << std::endl;
    } else {
        std::cout << "Test " << i++ << " failed" << std::endl;
    }
}

void main(){
   test(FASTA_FILE_READER_TEST);
   test(EXACT_MATCH_TEST);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T12:40:55.380

如果您可以使用 C++11 功能：

```
#include <array>
#include <iterator>
#include <algorithm>
#include <iostream>

typedef bool (*Test)();

std::array<Test, 2> tests {{ FASTA_FILE_READER_TEST, EXACT_MATCH_TEST }};

void TestAll()
{
    size_t i = 1;
    std::for_each(std::begin(tests), std::end(tests),
         [&i](Test& t)
         {
             std::cout << "Test " << i++ << (t() ? " PASSED" : " FAILED") << std::endl; 
         });
} 
```

[演示。](http://ideone.com/SFck4)

这是做你已经拥有的另一种方式（而且你的方式很好，IMO）。如果向量可能留出的额外容量让您感到困扰，您可以在完成推回后对其调用[shrink_to_fit() 。](http://en.cppreference.com/w/cpp/container/vector/shrink_to_fit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T12:31:21.050

为每个测试创建一个类。然后是每个类的一个静态实例。类的构造函数运行测试。

这当然可能会导致问题，因为测试是在调用 main() 函数之前执行的。

# openfire - 糖果战争在哪里？

> ID：11630792
> 
> 赞同：0
> 
> 时间：2012-07-24T12:23:14.490
> 
> 标签：openfire, candy

在 Candy 与 Openfire 的集成中，提到了复制`candy.war`到`<Openfire_root>/plugins`目录中。我找不到这场战争在哪里。

你能告诉我它在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:12:33.080

在这里找到它[http://code.google.com/p/openfire-candy/downloads/list](http://code.google.com/p/openfire-candy/downloads/list)

# java - 如何在 Web 应用程序中运行 jar 文件

> ID：11630796
> 
> 赞同：0
> 
> 时间：2012-07-24T12:23:31.230
> 
> 标签：java, chat

现在我有两个 .jar 文件：一个是聊天客户端，另一个是聊天服务器。它们在我的桌面应用程序上运行良好，但现在我想上传它们以在我的网站上运行。这样做的最佳方法是什么？我有以下文件：

```
chatclient.jar
chatserver.jar 
```

有人可以建议如何将它们放在我的网页中，而无需在用户点击它们时下载它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:06:52.470

你没有提供足够的信息。
你想达到什么目标？
您在 JARS 中使用了哪些技术？为什么不将服务器 jar 与[Web 应用程序](http://www.j2eevideotutorial.com/2012/05/how-to-create-java-ee-web-app-without.html)一起打包？
您的客户端是否是桌面应用程序，如果是，为什么不将其放在客户端的类路径中？
也许考虑让客户端在 JavaScript 中实现，例如使用 jQuery 和一些 Web 套接字技术，
或者可能使用一些 Java Web 框架或像 GWT 或 Apache Wicket 这样的工具？

# regex - htaccess 正则表达式模式中的组文字字符串

> ID：11630798
> 
> 赞同：0
> 
> 时间：2012-07-24T12:23:35.213
> 
> 标签：regex, .htaccess

我需要重写类似于

```
/b 
```

到

```
/img/b.png 
```

以及类似的 URL

```
/b_c 
```

到

```
/img/b_c.png 
```

我试过这个：

```
RewriteRule ^b(?:/_c/)$     /img/$1.png 
```

这适用于第一种情况，但不适用于第二种情况（它不匹配“_c”并对其进行分组）。

我需要将文字字符串“_c”分组并放置在重写的 URL 中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:49:59.007

试试`RewriteRule ^(b(_c)?)$ /img/$1.png`。

这使得`$1`整个括号反向引用，并使`_c`可选，但它必须全部存在（你不能有`b_`匹配 - 尽管如果你愿意它可以匹配）。

# c# - 打开文档时阻止打开单词

> ID：11630799
> 
> 赞同：2
> 
> 时间：2012-07-24T12:23:40.603
> 
> 标签：c#, ms-word, ms-office, office-interop

我想在我的应用程序中打开几个文档，但是这样做时，Word 总是打开主窗口。我怎样才能防止这种情况发生？

我已经将应用程序和文档的可见性设置为`false`，但是当我启动程序时它仍然打开。

```
private static readonly Application word = new Application();

[...]

FileInfo fileInfo = (FileInfo)file;

object filename = fileInfo.FullName;
object confirmConversion = false;
object readOnly = true;
object visible = false;
object skipEncodingDialog = true;
object save = false;

word.Visible = false;

Document srcDoc = word.Documents.Open(ref filename, ref confirmConversion, ref readOnly, ref missing,
    ref missing, ref missing, ref missing, ref missing,
    ref missing, ref missing, ref missing, ref visible,
    ref missing, ref missing, ref skipEncodingDialog, ref missing); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:28:57.903

应用程序字=新应用程序（）；代表一个单词窗口。

```
private void OpenWord(string path)
{
Application word = new Application();
FileInfo fileInfo = (FileInfo)file;

object filename = fileInfo.FullName;
object confirmConversion = false;
object readOnly = true;
object visible = false;
object skipEncodingDialog = true;
object save = false;

word.Visible = false;

Document srcDoc = word.Documents.Open(ref path, ref confirmConversion, ref readOnly, ref missing,
    ref missing, ref missing, ref missing, ref missing,
    ref missing, ref missing, ref missing, ref visible,
    ref missing, ref missing, ref skipEncodingDialog, ref missing);
} 
```

# php - PHP 搜索相关结果

> ID：11630800
> 
> 赞同：1
> 
> 时间：2012-07-24T12:23:41.640
> 
> 标签：php, mysql

我被一个案子困住了。我希望进行搜索，如果用户犯了一些拼写错误，它将搜索 mysql 数据库并返回一个结果，如“你的意思*是什么*”。我已经完成了 levenshtein 方法，但它没有返回预期的结果。例如，如果我在 'apple'、'bean'、'chicken soup' 等一系列项目中搜索“chicken”；它返回我 bean 。有没有更好的方法来解决这个问题？我正在使用 PHP MYSQL 来实现此功能。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:08:45.293

我会推荐 MySQL 全文搜索。[你可以在这里](http://dev.mysql.com/doc//refman/5.5/en/fulltext-search.html)找到更多关于它的信息。

您要使用的语法是`MATCH() ... AGAINST`. 请务必使用 MyISAM 类型的表，并在要搜索的字段上创建索引。

希望这可以帮助，

布拉姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:30:55.900

尽管 Levensteins 距离应该可以解决问题，但您是否研究过[`similar_text()`](http://www.php.net/manual/en/function.similar-text.php)或[`soundex()`](http://www.php.net/manual/en/function.soundex.php).

我用过`similar_text`类似的东西，因为它可以返回匹配之间的相似度百分比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:57:49.203

您可以使用基于发音“发音相似产生相同的 soundex 键”的[Soundex 。](http://www.php.net/manual/en/function.soundex.php)

为了获得更好的结果，首先获得一组具有最小距离（比如 2 或 3）的单词，然后在过滤后的单词集上应用 soundex 以获得建议的单词。我在我过去的一个项目中实施，效果很好。

# java - 如何输出带有可见特殊字符的数据？

> ID：11630801
> 
> 赞同：2
> 
> 时间：2012-07-24T12:23:44.323
> 
> 标签：java, io

我有一个提供给我的文本文件，没有人知道它的编码。在文本编辑器中查看它，一切看起来都很好，正确地排列成整齐的列。

但是，当我**读取**数据时，我看到了一些异常情况。即使从视觉上看，“Foo”字段出现在文本文件的相同列中（例如，在第 15-20 列中），当我尝试使用`substring(15,20)`我的数据将其拉出时变化很大。有时我会提取字节 11-16，有时是 18-23，有时是 15-20……记录之间没有一致性。

我怀疑有一些特殊的字符，我的文本编辑器看不到，但可以被`String`方法读取（并计入索引）。Java中有什么方法可以用任何可见的特殊字符转储文件的内容，以便我可以看到我需要用正则表达式替换的字符串吗？

如果不是在 Java 中，任何人都可以推荐一个可以帮助我的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:25:46.413

您是否尝试将文件的内容打印为单个整数或字节？这样你就可以看到是否有任何隐藏的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:08:59.607

我将从直接查看文件开始。任何代码都会增加一层怀疑。使用 Total Commander（或您平台上的同等设备），查看文件 (F3) 并切换到十六进制模式。您建议特殊字符的行为在行之间甚至不一致，因此您应该在尝试通过算法修复它之前获得一些关于格式的视觉线索。

# asp.net-mvc-3 - 如何在 MVC3 中禁用 DropDownlist？

> ID：11630802
> 
> 赞同：1
> 
> 时间：2012-07-24T12:23:50.300
> 
> 标签：asp.net-mvc-3, c#-4.0

我正在绑定 FixedBYId 以绑定 Dropdownlist ...以显示下拉列表而不是编辑数据

```
MY View Code
-------------
  <%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<Gridview_BugTracker.Models.BugTracker_DataHelper>" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>BugHistory</title>
</head>
<body>
    <div>

     <%: ViewBag.Title = "BugHistory"%>
    <% using (Html.BeginForm())
       { %>      
      <%:Html.ValidationSummary(true)%>      

        <fieldset>
        <legend>BugHistory</legend>

       <div class="editor-label">
           <%:Html.LabelFor(model => model.FixedByID)%>
        </div>
        <div class="editor-field">
            <%:Html.EditorFor(model => model.EmployeName)%>
            <%:Html.ValidationMessageFor(model => model.EmployeName)%>
        </div>     

        <form action="BugHistory.aspx" method="post">  
        <p> <input type="submit" value="BugHistoryInsert" /></p> 
        </form>           
          </fieldset>   
       <% }%>            
    </div>
</body>
</html> 
```

* * *

这对我不起作用。我究竟做错了什么？谁能帮我做到这一点？

# algorithm - 如何在 0-1 矩阵中找到具有至少 K 1 个的最小子矩形

> ID：11630803
> 
> 赞同：5
> 
> 时间：2012-07-24T12:23:50.063
> 
> 标签：algorithm

我遇到了一个普通问题，给定一个 NxM 0-1 矩阵和一个数字 K(<=NxM)，我必须找到该 0-1 矩阵的最小子矩形区域，该子矩形内至少有 K 1 个。此外，它的面积（两个维度的乘积）应该最小化。

例如：
00000
01010
00100
01010
00000
K = 3

所以我可以找到一个最小面积为 6 的子矩形，其中包含 3 个 1。
10
01
10

请注意，我的意思是目标子矩形应该包含来自原始 0-1 矩阵的连续行数和列数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T13:39:32.330

```
Compute cumulative sum of rows R[i,j] and columns C[i,j].
For top-left corner (i,j) of each possible sub-rectangle:
   Starting from a single-row sub-rectangle (n=i),
   Search the last possible column for this sub-rectangle (m).
   While m>=j:
     While there are more than 'k' "ones" in this sub-rectangle:
       If this is the smallest sub-rectangle so far, remember it.
       Remove column (--m).
       This decreases the number of "ones" by C[m+1,n]-C[m+1,j-1].
     Add next row (++n).
     This increases the number of "ones" by R[m,n]-R[i-1,n]. 
```

时间复杂度为 O(NM(N+M))。

可以通过将线性搜索更改为二分搜索来优化两个嵌套循环（以更快地处理细长的子矩形）。

也有可能（在向子矩形添加一行/一列之后）在 O(1) 时间内减少列/行的数量，使得该子矩形的面积不大于该面积迄今为止最好的子矩形。

这两种优化都需要计算 O(1) 中的任何子矩形权重。为此，请预先计算子矩形 [1..i,1..j] (X[i,j]) 的所有元素的累积总和。然后任何子矩形 [i..m,j..n] 的权重计算为`X[m,n]-X[i-1,n]-X[m,j-1]+X[i-1,j-1]`。

* * *

```
Compute cumulative sum of columns C[i,j].
For any starting row (k) of possible sub-rectangle:
  For any ending row (l) of possible sub-rectangle:
    Starting column (m = 1).
    Ending column (n = 1).
    While n is not out-of-bounds
      While there are less than 'k' "ones" in sub-rectangle [k..l,m..n]:
        Add column (++n).
        This increases the number of "ones" by C[l,n]-C[k-1,n].
      If this is the smallest sub-rectangle so far, remember it.
      Remove column (++m).
      This decreases the number of "ones" by C[l,m-1]-C[k-1,m-1]. 
```

时间复杂度为 O(N ² M)。

当在其中处理的所有子矩形都是单列子矩形（行太多）或在其中处理的子矩形没有包含足够的“1”时（行数不足），“l”循环可能会终止）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:34:41.260

这个问题是[NP 难](http://en.wikipedia.org/wiki/Np-hard)的，因为可以将[集团决策问题](http://en.wikipedia.org/wiki/Clique_problem#Listing_all_maximal_cliques)简化为它。因此，没有比尝试所有可能的子矩阵的蛮力方法更有效的算法（除非 P=NP）。

可以通过以下方式将集团决策问题简化为您的问题：

*   令矩阵为图的邻接矩阵。
*   设置 K=L^2，其中 L 是我们要查找的团的大小。
*   在这个输入上解决你的问题。该图包含一个 L-clique ，[如果](http://en.wikipedia.org/wiki/Iff)您的问题的解决方案是一个仅包含一个的 LxL 子矩阵（可以在多项式时间内检查）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:53:36.273

在我的脑海中，您可以列出矩阵中所有坐标对（？），找到其中每个 K 组合的（最小）包含子矩形*，然后选择其中最小的.

* 由 K 组合中的最小和最大行和列索引定义。

# cakephp-1.3 - 我想在 cakephp 中重定向页面

> ID：11630807
> 
> 赞同：0
> 
> 时间：2012-07-24T12:24:18.140
> 
> 标签：cakephp-1.3

我有网址：-

```
http://mydomain/test/index.html 
```

我想要用户何时在 url 中输入：-`http://mydomain/test`

它将重定向到`http://mydomain/test/index.html`..

我尝试过的我在路线中给出了代码。

```
Router::connect('/', array('controller' => 'enrollments', 'action' => 'index')); 
```

我想重定向到 index.html 页面如何给..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:27:17.387

[Pages Controller](http://book.cakephp.org/1.3/en/view/958/The-Pages-Controller)通常用于提供静态页面。例如。如果您创建了一个视图文件 *app/views/pages/about_us.ctp*，您可以使用 url *http://example.com/pages/about_us* 访问它。

如果你已经[烘焙了你的应用程序](http://book.cakephp.org/1.3/en/view/1522/Code-Generation-with-Bake)，页面控制器应该已经被复制到你的`app/controllers/`文件夹并且能够修改它，或者你可以将`pages_controller.php`核心复制到你的应用程序。但是，如果您不需要修改它，即只显示静态内容，您不需要将 pages 控制器复制到`app/controllers/`.

**如何显示静态页面？**

好吧，如果您制作一个视图文件`app/views/pages/index.ctp`，您可以使用 url 访问它`http://example.com/pages/index`。然后要修改路线，您可以：

```
Router::connect('/test', array('controller' => 'pages', 'action' => 'display', index)); 
```

但是，这不会提供`http://www.example.com/test/index.html`但是：`http://www.example.com/test/index`。

# sass - 当资产中缺少图像时，允许中间人 sass 不抛出错误

> ID：11630809
> 
> 赞同：0
> 
> 时间：2012-07-24T12:24:32.590
> 
> 标签：sass, asset-pipeline, middleman

我正在使用 Middleman（一个用于前端演示开发的 sinatra 应用程序）。它有 sass 和资产管道。目前我有这个 sass 文件，许多规则都引用了背景图片：

```
 a
    background: image-url("main_layout/blog.png") no-repeat left top 
```

但是很多图片都丢失了，当这种情况发生时，Middleman 会给我这个错误页面：

```
Error compiling CSS asset
Errno:ENOENT: No such file or directory - (path) 
```

是否可以配置 Middleman（或 sass），以便 sass 中缺少的图像引用在查看页面时不会导致错误。我想要这个，因为这些 sass 文件在 Rails 中使用并且不会在页面上引发异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T16:05:56.793

尝试最新的 middleman-sprockets gem，这应该是固定的。

# google-apps-script - 访问 Google 文档中的评论

> ID：11630812
> 
> 赞同：2
> 
> 时间：2012-07-24T12:24:42.793
> 
> 标签：google-apps-script, google-docs

我无法弄清楚如何使用 Google Apps 脚本访问 Google 文档中的评论。查看 API 参考，我发现只有[CommentSection](https://developers.google.com/apps-script/class_commentsection)类，但它被标记为已弃用。寻求帮助。谢谢。

桑杰

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-02-18T23:57:34.820

在这篇文章的初步讨论之后，我设法通过使用[Drive API v2](https://developers.google.com/apps-script/advanced/drive)获得了文档中的评论。

这是我正在使用的代码：

```
function retrieveComments(fileId) {
  var info = [];
  //These arguments are optional
  var callArguments = {'maxResults': 100, 'fields': 'items(commentId,content,context/value,fileId),nextPageToken'}
  var docComments, pageToken;
  do { //Get all the pages of comments in case the doc has more than 100
    callArguments['pageToken'] = pageToken;
    //This is where the magic happens!
    docComments = Drive.Comments.list(fileId,callArguments);
    //I've created a "getCommentsInfo" to organize the relevant info in an array
    info = info.concat(getCommentsInfo(docComments.items));
    pageToken = docComments.nextPageToken;
  } while(pageToken);

  return(info);
} 
```

但是，由于**Drive API**是“高级服务”，您必须将其添加到：

1.  *脚本项目*- 使用“资源 > 高级 Google 服务”
2.  *谷歌开发者控制台*- 通过：
    1.  确保在顶部栏中选择正确的项目
    2.  为项目启用“Drive API”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:05:45.040

遗憾的是，目前无法使用 Google Apps 脚本访问文档的评论。[您可以在问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上为此提出功能请求。

# java - 向 SelectionListener 添加双向功能

> ID：11630813
> 
> 赞同：0
> 
> 时间：2012-07-24T12:24:43.637
> 
> 标签：java, eclipse-rcp, selection, bidirectional, textselection

我的选择侦听器遇到了一些问题，目前我已经独立尝试了从 TOP 到 BOTTOM 和 BOTTOM 到 TOP（鼠标移动）的文本选择，但是这些试验不能一起工作，即**一个**SelectionListener 是双向的......

```
private void setupSelectionListener() {

    this.contentValues.addSelectionListener(new SelectionListener() {

        @Override
        public void widgetSelected(SelectionEvent event) {

            StyledText text = (StyledText)event.widget;

            int x = event.x;
            int y = event.y;

            //Mouse Drag Listener here??? - Detects Right

                //FOR TOP TO BOTTOM SELECTION
                text.setSelection(event.x); 

                int beginPosition = event.x; 
                int beginByte = beginPosition / 3;

                int endPosition = event.y; 
                int endByte = endPosition / 3;

                setSelection(beginByte, endByte);

            //Mouse Drag Listener here??? - Detects Left

                //FOR BOTTOM TO TOP SELECTION
                text.setSelection(event.y);

                int beginPosition = event.y;
                int beginByte = beginPosition / 3;

                int endPosition = event.x;
                int endByte = endPosition / 3;

                setSelection(beginByte, endByte);               

        }

        @Override
        public void widgetDefaultSelected(SelectionEvent e) {
            // Does nothing...
        }
    }); 
```

所以要么我需要一个鼠标拖动监听器，就像我在评论中所说的那样，要么需要一个比较 event.x 和 event.y 的条件语句

我试图在选择侦听器中添加一个拖动检测侦听器**，**但这会破坏事件坐标选择的格式。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:11:45.290

如果发生事件的源小部件是 Styled Text 对象，则此选择将自动发生，无需任何侦听器正确，这意味着如果您按住鼠标拖动，内容将自动选择。

# php - 试图在侧边栏 PHP 中显示特定于类别的评论

> ID：11630816
> 
> 赞同：1
> 
> 时间：2012-07-24T12:24:47.547
> 
> 标签：php, wordpress

我正在尝试仅在当前类别中的侧边栏中显示评论。到目前为止，我有这个：

但它不起作用，它要么到处显示 0 条评论，要么到处都显示。我不明白我做错了什么...

问题似乎是这部分： // 类别（可以是父类别） $cat = get_query_var('cat'); $category_parent = $cat;

```
<?php
    // Posts per page setting
    $ppp = 8; //get_option('posts_per_page'); // either use the WordPress global Posts per page setting or set a custom one like $ppp = 10;
    $custom_offset = 0; // If you are dealing with your custom pagination, then you can calculate the value of this offset using a formula

    // category (can be a parent category)
    $cat = get_query_var('cat');
    $category_parent = $cat;

    // lets fetch sub categories of this category and build an array
    $categories = get_terms( 'category', array( 'child_of' => $category_parent, 'hide_empty' => false ) );
    $category_list =  array( $category_parent );

    foreach( $categories as $term ) {
        $category_list[] = (int) $term->term_id;
    }

    // fetch posts in all those categories
    $posts = get_objects_in_term( $category_list, 'category' );

    $sql = "SELECT comment_ID, comment_date, comment_content, comment_post_ID, user_id, comment_author
     FROM {$wpdb->comments} WHERE
     comment_post_ID in (".implode(',', $posts).") AND comment_approved = 1
     ORDER by comment_date DESC LIMIT $ppp OFFSET $custom_offset";

    $comments_list = $wpdb->get_results( $sql );

    if ( count( $comments_list ) > 0 ) {

        $date_format = get_option( 'date_format' );

        foreach ( $comments_list as $comment ) {
?>

            <li>
                <a href="<?php echo ( get_permalink( $comment->comment_post_ID ) ); ?>#comment-<?php echo($comment->comment_ID); ?>"><?php echo get_avatar( $comment->user_id, 50 ); ?></a>
                <span><strong><?php echo($comment->comment_author); ?></strong> commented on</span>
                <h3><a href="<?php echo ( get_permalink( $comment->comment_post_ID ) ); ?>"><?php echo get_the_title ( $comment->comment_post_ID ); ?></a></h3>
                <span><?php echo($comment->comment_date); ?></span>
                <p>"<?php comment_excerpt(); ?>" <a href="<?php echo ( get_permalink( $comment->comment_post_ID ) ); ?>#comment-<?php echo($comment->comment_ID); ?>">Read More</a></p>
                <div class="clearfloat"></div><!-- Very Important -->
            </li>

<?php
        }

    } else {
        echo '<p>No comments</p>';
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:27:41.113

WordPress 有一些可用的功能可以查询您需要的大部分内容。例如，有一个函数调用`[get_the_category()](http://codex.wordpress.org/Function_Reference/get_the_category)`，它将包括当前类别及其子/祖先。

**参考：**

*   `[get_the_category()](http://codex.wordpress.org/Function_Reference/get_the_category)`
*   `[query_posts()](http://codex.wordpress.org/Function_Reference/query_posts)`

* * *

```
<?php

  $ppp = 8;
  $custom_offset = 0;

  // get the current category (includes children/parents)
  $categories = get_the_category();

  // create an array that only has each category_id
  $category_ids = array_map(function($category) {
    return $category->cat_ID;
  }, $categories);

  // find all posts by the category ids
  $posts = query_posts('cat=' . implode(',', $category_ids));

  // create an array that only has each post_id
  $post_ids = array_map(function($post) {
    return $post->ID;
  }, $posts);

  // find all comments by post_ids
  $sql = "SELECT comment_ID, comment_date, comment_content, comment_post_ID, user_id, comment_author
       FROM {$wpdb->comments} WHERE
       comment_post_ID in (".implode(',', $post_ids).") AND comment_approved = 1
       ORDER by comment_date DESC LIMIT $ppp OFFSET $custom_offset";

  $comments = $wpdb->get_results( $sql );

  if( $comments ) {
    // do stuff with $comments
  }

?> 
```

# c++ - 20多种变种的Boost Spirit如何使用？

> ID：11630823
> 
> 赞同：2
> 
> 时间：2012-07-24T12:25:12.007
> 
> 标签：c++, boost-spirit, boost-mpl

我正在使用 Boost Spirit 解析一个非常复杂的语法，并且我遇到了一个具有 20 多种类型（此处为 21 种）的变体的问题：

```
namespace eddic { namespace ast {

typedef boost::mpl::vector<
            Integer,
            IntegerSuffix,
            Float,
            Litteral,
            VariableValue,
            DereferenceValue,
            Expression,
            Unary,
            Null,
            True,
            False,
            ArrayValue,
            FunctionCall,
            MemberFunctionCall,
            Cast,
            BuiltinOperator,
            Assignment,
            SuffixOperation,
            PrefixOperation,
            Ternary
        > types_initial;

typedef boost::mpl::push_back<types_initial, New>::type types;
typedef boost::make_variant_over<types>::type Value;

}} 
```

Boost Spirit 无法识别使用 push_back 添加的最后一个类型 (eddic::ast::New)。当我解析具有此元素的内容时，它会失败并出现以下错误：

> eddic: /usr/include/boost/variant/detail/visitation_impl.hpp:264: typename Visitor::result_type boost::detail::variant::visitation_impl(int, int, Visitor&, VoidPtrCV, mpl_::false_, NoBackupFlag, which*, step0*) [with which = mpl_::int_<0>; step0 = boost::detail::variant::visitation_impl_step, boost::mpl::v_item, boost::mpl::v_item, boost::mpl::v_item, boost::mpl::v_item, boost::mpl: :v_item, boost::mpl::v_item, boost::mpl::v_item, boost::mpl::v_item, boost::mpl::v_item, boost::mpl::v_item, boost::mpl::v_item , boost::mpl::v_item, boost::mpl::v_item, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0l>, boost::mpl::v_iter, boost::mpl::v_item, boost ::mpl::v_item, boost::mpl::v_item, boost::mpl: :v_item, boost::mpl::v_item, boost::mpl::v_item, boost::mpl::v_item, boost::mpl::v_item, boost::mpl::v_item, boost::mpl::v_item , boost::mpl::v_item, boost::mpl::v_item, boost::mpl::v_item, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0 >, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 0>, 21l> >; 访问者 = boost::variant, boost::mpl::vector, eddic::ast::Deferred, eddic::ast::Deferred, eddic::ast::Null, eddic::ast::True, eddic:: ast::False, eddic::ast::Deferred, eddic::ast::Deferred, eddic::ast::Deferred, eddic::ast::Deferred, eddic::ast::Deferred, eddic::ast: :Deferred, eddic::ast::Deferred, eddic::ast::Deferred, eddic::ast::Deferred >, 0> >, boost::detail::variant::void_, boost::detail::variant ::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::变量::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost ::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant ::void_, boost::detail::variant::void_, boost::detail::variant::void_>::assigner; voidPtrCV = 常量 void*; NoBackupFlag = boost::variant, boost::mpl::vector, eddic::ast::Deferred, eddic::ast::Deferred, eddic::ast::Null, eddic::ast::True, eddic:: ast::False, eddic::ast::Deferred, eddic::ast::Deferred, eddic::ast::Deferred, eddic::ast::Deferred, eddic::ast::Deferred, eddic::ast: :延期，eddic::ast::Deferred, eddic::ast::Deferred, eddic::ast::Deferred >, 0> >, boost::detail::variant::void_, boost::detail::variant::void_ , boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail: :variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::变量::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_>::has_fallback_type_; 类型名访客::result_type = void; mpl_::false_ = mpl_::bool_]: Assertion `!"Boost.Variant 内部错误：'which'

如果我交换两个元素（例如三元和新元素），则可以正确识别新元素，但不能正确识别三元元素。它只是失败的最后一个元素。

我已经尝试过使用 push_front 或 vector21，但它并没有改变任何东西，它总是最后一个有问题的元素。在我看来，这是因为 Spirit 在将其复制到我的 variant_over 类型之前在内部使用了一个变体。

这个问题有解决方法吗？

我或许可以将这个数字减少到 20 个，但问题是我将来肯定会拥有更多。

非常感谢任何想法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T12:30:41.677

定义`BOOST_MPL_LIMIT_VECTOR_SIZE`到您想要的任何新限制，但达到这么高通常暗示设计问题，因此可能值得考虑一下。

# sql-server-2005 - 单个查询中的 NHibernate 大数据检索

> ID：11630824
> 
> 赞同：-2
> 
> 时间：2012-07-24T12:25:12.810
> 
> 标签：sql-server-2005, nhibernate

我目前正在使用**NHibernate**读取**50k 行**的块。大约需要**20 分钟**。要读取的数据是通过在 SQLSERVER 2005 中加入超过*5 个表*来准备的。我主要关心的是 NHibernate**为每个行**检索准备一个新查询，这非常耗时。

我知道这是必要的，因为 NHibernate 必须将每一行映射到一个对象，但这种方法在阅读是主要关注点的情况下是无用的。

我不能使用无状态会话，因为我使用集合来存储数据

我还需要通过参数应用一些过滤器。我也实现了存储过程，但不知何故没有帮助。

有没有其他方法可以处理大量数据。

**------编辑-------**
这是我用来映射的两个配置文件

```
 <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="myNameSpace" assembly="myNameSpace">
    <class name="MyClass" table="TableNameFromDb">
        <id name="ID" column="ID">
            <generator class="native" />
        </id>
        <property name="prop1"/>
        <property name="prop2"/>

    <bag name="bag1" cascade="all-delete-orphan" inverse="false"  fetch="join" lazy="false">
            <key column="prop1"/>
            <one-to-many class="MyClass2" />
    </bag>
    </class>
</hibernate-mapping>    

<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="myNameSpace" assembly="myNameSpace">
    <class name="MyClass2" table="TableNameFromDb2">
        <id name="prop2" column="ID">
            <generator class="native" />
        </id>
        <property name="prop2"/>
        <property name="prop3"/>

    </class>
</hibernate-mapping> 
```

**现在这里主要关注的是 NHibernate 正在为每一行创建一个新查询并将其发送到数据库，这是一种开销。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:37:41.803

问题可能是由于原因；默认情况下，NHibernate 不会在其发送到 SQL Server 的查询中完全限定表名。为了充分利用`sp_execsql`，请求必须包含完全限定的表名。

要完全限定 NHibernate 查询，请在 app/web.config 文件中，在 NHibernate 设置中添加以下键：

```
<add value="my_DB_name.dbo" key="hibernate.default_schema" /> 
```

（根据需要更换*dbo*。）

试一试并告诉我们它是否能给您带来任何性能提升？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:58:44.037

首先，我认为您必须验证导致性能问题的原因。

正如 Felice Pollano 已经提到的那样，您可能正面临一个[select n+1 问题](http://ayende.com/blog/1328/combating-the-select-n-1-problem-in-nhibernate)。这可以通过修改映射来解决，或者通过指定必须在您用于检索数据的条件中使用的 FetchMode 来解决。

您应该考虑的另一件事：真的有必要一次性检索所有这些行吗？你想做什么？您真的需要实体表示的所有数据，还是可以使用仅加载您感兴趣的列的投影？
你可以使用[分页](https://stackoverflow.com/questions/1651723/nhibernate-paging-with-sql-server)吗？
也许您可以使用[MultiCriteria](http://ayende.com/blog/2413/nhibernate-multi-criteria) ...

但是，为了解决这个问题，我认为您需要更多的投入。

# r - 将 R 中的函数作为 .Fortran 参数传递

> ID：11630830
> 
> 赞同：5
> 
> 时间：2012-07-24T12:25:36.093
> 
> 标签：r, fortran

在互联网上花了几天时间搜索类似的东西之后，我仍然无法找到任何描述这个问题的东西。通读（否则非常推荐）“编写 R 扩展”也没有提供解决方案。因此，这是我最紧迫的问题：

是否可以通过 .Fortran(...) 调用将函数（为简单起见，假设一个简单的 R 函数 - 实际上，问题甚至更丑陋）作为函数/子例程参数传递给 Fortran - 如果可以，如何？

我写了两个简单的函数来测试它，第一个是 Fortran 子例程（专门使用我最初打算传递的函数，因此界面中的尺寸有点奇怪）：

```
subroutine foo(o, x)
    implicit none

    interface
        subroutine o(t, y, param, f)
            double precision, intent(in) :: t
            double precision, dimension(58), intent(in) :: y, param
            double precision, dimension(22), intent(out) :: f
        end subroutine
    end interface

    double precision, dimension(22), intent(out) :: x

    double precision, dimension(58) :: yt, paramt
    integer :: i

    do i = 1, 58
        yt(i) = rand(0)
        paramt(i) = rand(1)
    end do

    call o(dble(4.2), yt, paramt, x)
end subroutine 
```

和一个简单的 R 函数传递给上述函数：

```
asdf <- function(a, s, d, f){x <- c(a, s, d, f)} 
```

调用`.Fortran("foo", asdf, vector(mode="numeric", length=22))`yield `Error: invalid mode (closure) to pass to Fortran (arg 1)`并传递“asdf”（作为字符串）会导致段错误，因为参数显然不符合预期的类型（即函数）。

仅供参考，我不希望代码做任何有意义的事情（那将是另一个函数的任务），我主要想知道，是否可以从 R 传递函数（或函数指针）或者我是否最好给出立即采用这种方法并寻找可能有效的方法。

提前致谢，

院长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:10:55.093

您不能通过 R 对象传递`.Fortran`. 您需要使用`.Call`or`.External`接口将 R 对象传递给 C/C++ 代码。

您可以为您的 R 函数编写一个 C/C++ 包装器，然后您可以从您的 Fortran 代码中调用它（参见*编写 R 扩展*中[的 Calling-C-from-FORTRAN-and-vice-versa](http://cran.r-project.org/doc/manuals/R-exts.html#Calling-C-from-FORTRAN-and-vice-versa)）。

# ruby-on-rails - 具有不同逻辑的类别的模型设计应该是什么？

> ID：11630839
> 
> 赞同：1
> 
> 时间：2012-07-24T12:26:06.563
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, oop, inheritance

我计划为不同的类别赋予不同的逻辑，我不知道我是否应该制作 20 个不同的模型，或者我是否可以只拥有一个`StoreCategory`模型并将逻辑放入其中。有些逻辑很小，有些逻辑很大。

所以如果我有不同的商店类别，比如折扣、在线、送货、零售等，并且想给他们自己的特殊逻辑，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:35:20.970

这是个好问题。在您的位置，我将创建一个“类别”类，而我的其他类从第一个继承。在 Category 类中，我会将共享代码和特定代码放在子类中。如果有必要，您可以使用多态关联。这只是一个想法。

**编辑 1：添加代码示例**

```
class StoreCategory < ActiveRecord::Base

  before_save :something_private

  def a_public_function
    #...
  end

  protected 
    def a_protected_function
      #...
    end

  private
    def something_private
      #something after save
    end
end

class DiscountCategory < StoreCategory
  def my_first_function
    #I could use a_public_function and a_protected_function
  end
end

class OnlineCategory < StoreCategory
  def a_protected_function
    #I could use a_public_function
    #I could override a_protected_function
    #I could use super to run the Category's function
  end
end 
```

在保存每个子类之后调用函数 something_private。我认为它是清晰和有组织的。它像 ApplicationController 类一样工作。

# vb.net - file.copy 和 filestream 复制方法的性能比较

> ID：11630844
> 
> 赞同：-4
> 
> 时间：2012-07-24T12:26:16.710
> 
> 标签：vb.net, filestream, system.io.fileinfo

我有一个 Windows 应用程序（VB.net），它涉及将大量文件复制到指定位置，而性能是我需要检查的问题。我有两种方法：File.Copy 和其他使用 Filestream。以上哪个选项更快？还有其他更快的方法可以实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:36:45.573

`File.Copy`是比较快的（*）

*(*) 为什么你会相信论坛上的意见？您可以进行测试以查看哪种方法更快，而不是在这里等待答案*

# javascript - 将 div 拖放到表中并获取数据值

> ID：11630847
> 
> 赞同：0
> 
> 时间：2012-07-24T12:26:26.537
> 
> 标签：javascript, jquery, jquery-ui

我在表格单元格中设置了 div 数据值，我想要的是如何在 drop 时获取 div 数据值。

在我的代码中，我像这样在表中设置数据

```
 <script type="text/javascript">

 function createDynamicTable(tbody, rows, cols) {

      if (tbody == null || tbody.length < 1) return;

    for (var r = 1; r <= rows; r++) {

          var trow = $("<tr>");

         for (var c = 1; c <= cols; c++) {

              var cellText = "Cell " + r + "." + c

            $("<td>")

                     .addClass("tableCell")

                      .text(cellText)

                     .data("col", c)

                     .appendTo(trow);

        }

         trow.appendTo(tbody);

     }

  } 
```

在我的代码中，单击表格的单元格时，我得到行和列数据 div 值

```
 $(document).ready(function() {

    createDynamicTable($("#tbl"), 10, 5);

     $("#tbl td.tableCell")

             .click(function() {

                 alert("Clicked Col=" + $(this).data("col"));

             });

 }); 
```

它运行良好

完整代码查看网站：http: [//blogs.microsoft.co.il/blogs/linqed/archive/2009/03/04/generating-html-tables-with-jquery.aspx](http://blogs.microsoft.co.il/blogs/linqed/archive/2009/03/04/generating-html-tables-with-jquery.aspx)

我尝试这样，但在停止事件时无法获取表格单元格数据值。如何在拖放中获取设置的数据值。

```
$(".drag").draggable({

                    stop: function (ev, ui) {

                        var pos = $(ui.helper).offset();
                        var oldData = $("#tbl td.tableCell").data('col');
                        alert(oldData);
                        }
}); 
```

帮助我在拖放中获取数据值。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:47:55.360

拖放可能会重组 DOM。尝试使用 jQuery.live 而不是 jQuery.click（如果您的[jQuery 版本](http://api.jquery.com/live/)支持）来绑定 click 事件：

```
$("#tbl td.tableCell")
         .live('click', function() {
             alert("Clicked Col=" + $(this).data("col"));
          }); 
```

由于 .live() 已被弃用，您可能还想尝试 .on() 方法（如果使用 jQuery 1.7.x）。

# android - 类似 iOS 的 Android UI 库

> ID：11630849
> 
> 赞同：0
> 
> 时间：2012-07-24T12:26:34.540
> 
> 标签：android, user-interface

我想知道：

1）是否有任何看起来像 iPhone UI 的 Android UI 库？

2）如果没有，我打算创建一个作为开源项目。我会被苹果起诉吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:21:33.513

我知道的唯一库是这个： [https](https://github.com/thiagolocatelli/android-uitableview) ://github.com/thiagolocatelli/android-uitableview 它是 iOS 的 UITableView 的副本（就像 ListView 的 IOS 版本）。

对于您的另一个问题：我认为苹果不会起诉某人创建开源库。他们你会起诉开源联盟在 android 中实现它。

# c# - 将负值转换为 0

> ID：11630850
> 
> 赞同：2
> 
> 时间：2012-07-24T12:26:37.937
> 
> 标签：c#, validation, datagridview

我正在使用数据网格视图，这个数据网格视图允许用户编辑单元格，我想设置它，以便当用户插入负值时，它会将这个值转换为 0，最好的编码方式是什么这个，我在下面创建了以下代码，它似乎检查负值，但它不会将值更改为零

```
if (Convert.ToInt32(dgvDetails.CurrentRow.Cells[2].Value.ToString()) < -0)
                {
                   intQtyInsp = 0;
                }
                else
                {
                intQtyInsp = Int32.Parse(row.Cells[2].Value.ToString()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:29:08.083

那可能是因为`dgvDetails.CurrentRow.Cells[2].Value.ToString()`并且`row.Cells[2].Value.ToString()`可能不是您正在检查的同一单元格..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:32:48.947

```
intQtyInsp =Int32.Parse(dgvDetails.CurrentRow.Cells[2].Value.ToString());

if(intQtyInsp < 0)
  {
     intQtyInsp = 0;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T12:34:40.867

这将满足您的要求

```
private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
    DataGridViewCell currentCell = 
        dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex];
    int cellValue = Convert.ToInt32(currentCell.Value);
    if (cellValue < 0)
        currentCell.Value = 0.ToString();
} 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T12:30:09.233

我建议使用扩展方法来确保用户是否输入了 int。

### 扩展方法

```
public static class StringExtension
{
    public static int TryConvertToInt32(this string value)
    {
        int result = 0;
        if (Int32.TryParse(value, out result))
            return result;
        return result;
    }
} 
```

### 用法

```
// call the extension method
int intQtyInsp = dgvDetails.CurrentRow.Cells[2].Value.ToString().TryConvertToInt32();

// And check for lower than zero values.
intQtyInsp = intQtyInsp >= 0 ? intQtyInsp : 0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T12:34:17.703

```
int valueFromCell =  Convert.ToInt32(dgvDetails.CurrentRow.Cells[2].Value.ToString());
intQtyInsp = valueFromCell < 0 
               ?  0
               : valueFromCell ; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-10T16:36:46.213

```
if(score < 0) { *score = 0; } 
```

# spring - Spring Integration - 并发服务激活器

> ID：11630853
> 
> 赞同：7
> 
> 时间：2012-07-24T12:26:41.700
> 
> 标签：spring, asynchronous, concurrency, producer-consumer, spring-integration

我有一个队列通道和一个带有从该队列读取的轮询器的服务激活器。我想要配置说“我想要 50 个线程来轮询该队列，并且每次轮询并返回消息时，在该线程上调用服务激活器指向的服务。”

该服务没有`@Async`注释，但以并发方式运行是无状态且安全的。

下面会这样做吗？还有其他首选方法可以实现这一目标吗？

```
<int:channel id="titles">
    <int:queue/>
</int:channel>

<int:service-activator output-channel="resolvedIds" ref="searchService" method="searchOnTitle" input-channel="titles">
    <int:poller fixed-delay="100" time-unit="MILLISECONDS" task-executor="taskExecutor"></int:poller>
</int:service-activator>

<task:executor id="taskExecutor" pool-size="50" keep-alive="120" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T13:04:13.210

是的，我认为它可以满足您的需求。一旦你引入了一个 QueueChannel，交互就变成了异步的——你不需要@Async。如果您没有明确设置轮询器，它将使用默认轮询器。

您所概述的是实现它的最佳方法。您也可以考虑对队列大小进行限制 - 这样，如果在跟上生产者的速度上存在滞后，就不会导致内存不足的问题。如果指定了大小，则通道上的发送调用将阻塞 - 充当节流阀。

您拥有的配置将按预期工作。唯一的问题是，一旦您开始为每个端点创建执行器和轮询器，就很难找出整个应用程序的最佳配置。可以针对一些特定步骤进行这种优化 - 但不是针对所有端点（您的问题中没有任何内容表明您正在这样做，只是认为无论如何我都会提出它。

# iphone - 将对象添加到数组不起作用，当我遍历数组时，我看不到任何对象

> ID：11630854
> 
> 赞同：0
> 
> 时间：2012-07-24T12:26:46.117
> 
> 标签：iphone, objective-c, ios, nsmutablearray

我想要的是：

在 iPhone 上，用户输入几个值并点击保存按钮。应用程序应将值存储在 的实例中`VehicleClass`并将其添加到`NSMutableArray`.

希望你能帮忙。

视图控制器.h

```
#import <UIKit/UIKit.h>
#import "VehicleClass.h"

@interface ViewController : UIViewController

@property (weak, nonatomic) IBOutlet UITextField *producerTextField;
@property (weak, nonatomic) IBOutlet UITextField *modelTextField;
@property (weak, nonatomic) IBOutlet UITextField *pYearTextField;
@property (weak, nonatomic) IBOutlet UITextField *priceTextField;

@property (weak, nonatomic) NSMutableArray *carArray;
@property (weak, nonatomic) IBOutlet UILabel *statusLabel;

- (IBAction)addCar:(id)sender;
- (IBAction)showCars:(id)sender;

@end 
```

视图控制器.m

```
@synthesize producerTextField, modelTextField, pYearTextField, priceTextField, carArray;

- (void)viewDidLoad
{
    [super viewDidLoad];

    carArray = [NSMutableArray array];
}

- (IBAction)addCar:(id)sender
{
    VehicleClass *newVehic = [[VehicleClass alloc]initWithProducer:producerTextField.text 
                                                          andModel:modelTextField.text
                                                          andPYear:producerTextField.text
                                                          andPrice:priceTextField.text];

    [carArray addObject:newVehic];
    if (carArray != nil) {
        statusLabel.text = @"Car saved to array.";
    }
    else {
        statusLabel.text = @"Error, check your code.";
    }
} 
```

车辆类.h

```
#import <Foundation/Foundation.h>

@interface VehicleClass : NSObject

@property (weak, nonatomic) NSString *producer;
@property (weak, nonatomic) NSString *model;
@property (weak, nonatomic) NSString *pYear;
@property (weak, nonatomic) NSString *price;

-(id)initWithProducer:(NSString *)varProducer 
             andModel:(NSString *)varModel 
             andPYear:(NSString *)varPYear 
             andPrice:(NSString *)varPrice; 

@end 
```

车辆类.m

```
#import "VehicleClass.h"

@implementation VehicleClass

@synthesize model, price,pYear,producer;

-(id)initWithProducer:(NSString *)varProducer 
             andModel:(NSString *)varModel 
             andPYear:(NSString *)varPYear 
             andPrice:(NSString *)varPrice
{
    self = [super init];
    if (self != nil) 
    {
        producer = varProducer;
        model = varModel;
        pYear = varPYear;
        price = varPYear;
    }
    return self;
}

@end 
```

也许问题与我的 init 方法有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:30:20.623

`carArray`是弱属性，应该是强的。

另外：你应该使用`self.carArray`而不是`carArray`. 使用 时`carArray`，您使用的是基础 iVar，而不是实际属性。以后会造成混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:33:17.233

您的属性应该是，而不是`property (weak, nonatomic)`, `property (nonatomic, retain)`。

在您的 init 方法中，输入：

```
-(id)initWithProducer:(NSString *)varProducer 
             andModel:(NSString *)varModel 
             andPYear:(NSString *)varPYear 
             andPrice:(NSString *)varPrice
{
    self = [super init];
    if (self != nil) 
    {
        self.producer = varProducer;
        self.model = varModel;
        self.pYear = varPYear;
        self.price = varPYear;
    }
    return self;
} 
```

然后，检查你`carArray`是否有对象，而不是 using `if (carArray != nil)`， use `if ([carArray count] > 0)`，因为你已经初始化了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:15:10.047

你的 carArray 是弱属性。carArray 应该很强大。

# android - 安卓和ios开发

> ID：11630857
> 
> 赞同：2
> 
> 时间：2012-07-24T12:26:53.233
> 
> 标签：android, ios

> **可能重复：**
> [Android 和 iOS：如何为两者开发？](https://stackoverflow.com/questions/4100969/android-ios-how-to-develop-for-both)

我想为 android 和 iOS 设备开发一个应用程序。有没有办法开发一次应用程序并在两者上部署？还是必须为每个平台单独开发？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:32:58.480

您可以在一些跨平台技术上进行开发，例如 phoneGap、RHodes、Titanium、html5 Snecha。通过这些技术中的任何一种，您都可以开发适用于所有平台（Android、黑莓、iPhone、Windows）的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:33:42.630

当我曾经为 Android 和 iOS 开发时，我用 C++ 编写了我的代码，然后编写了代码来独立地通过访问 iOS 和 Android。对于大多数应用程序，您实际上只需要获取接触点，然后显示信息。通过 C++ 做到这一点并不难。

# linux - ubuntu 中的 Cron 作业未获得所需的输出

> ID：11630861
> 
> 赞同：3
> 
> 时间：2012-07-24T12:27:00.217
> 
> 标签：linux, cron, crontab

我正在尝试设置一个 cronjob 来每分钟执行一个脚本。

我的 test.sh 脚本：

```
#!/bin/bash
notify-send hello 
```

我已使上述脚本可执行。

这是我`crontab -e`的文件的输出[http://pastie.org/4316348](http://pastie.org/4316348)

现在，当我看到它的输出时，`syslog`它显示 cronjob 每分钟都在执行，但我看不到我想要的输出。

系统日志：

```
Jul 24 17:42:01 noob CRON[5291]: (noob) CMD (/home/noob/test.sh)
Jul 24 17:43:01 noob CRON[5364]: (noob) CMD (/home/noob/test.sh)
Jul 24 17:44:01 noob CRON[5374]: (noob) CMD (/home/noob/test.sh)
Jul 24 17:45:01 noob CRON[5386]: (noob) CMD (/home/noob/test.sh) 
```

所以，我想知道我在这里做错了什么以及为什么我看不到我想要的输出（通知）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:31:44.393

猜测一下，`notify-send`是一个使用 X 的程序；在这种情况下，它需要知道 X 显示器的显示器编号才能显示通知。当您在 X 中启动终端时，它会自动设置，但 crontab 没有该环境。

作为一个简单的开始，尝试将您的 crontab 行更改为：

```
 * * * * * DISPLAY=:0.0 /home/noob/test.sh 
```

# grails - Grails Spring Security 注册/注册用户

> ID：11630863
> 
> 赞同：3
> 
> 时间：2012-07-24T12:27:02.780
> 
> 标签：grails, spring-security

我已经在我的 Grails 应用程序中安装了 Spring Security 插件，看到登录效果很好，但是当我想为用户创建注册并在注册后对用户进行身份验证时，手动在代码中，我做不到。

有什么解决办法吗？Spring Security 怎么可能不允许简单地将经过身份验证的用户推送到会话或 Spring Security 上下文。这是我尝试过的：

```
UsernamePasswordAuthenticationToken uat = new UsernamePasswordAuthenticationToken(user.email, user.password, null); 
uat.setDetails(user);
SecurityContext context = SecurityContextHolder.getContext();
context.setAuthentication(uat); 
```

这将对用户进行身份验证，但我无法使用下一个代码让他：

```
springSecurityService.currentUser 
```

只有这样：

```
SecurityContextHolder.getContext().getAuthentication().getPrincipal(); 
```

我现在很困惑，使用 Spring Security 的正确方法是什么。

我现在开始构建自己的 UserDetailsS​​ervice，但我很困惑，不知道如果我想创建自己的身份验证方法，下一步是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:40:12.383

您可以通过以下方式强制进行身份验证：

```
springSecurityService.reauthenticate user.username 
```

请参阅[http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/6%20Helper%20Classes.html#6.2%20SpringSecurityService](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/6%20Helper%20Classes.html#6.2%20SpringSecurityService)

# jquery-ui - 只有一项时如何防止可排序

> ID：11630864
> 
> 赞同：1
> 
> 时间：2012-07-24T12:27:02.460
> 
> 标签：jquery-ui, jquery-ui-sortable

我正在使用可排序的 JQuery UI，当只有一个元素时如何防止可排序操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:34:59.083

可排序使用前检查。例如：

```
var n = $("div li").length;
 if(n>1)
 {
  $("div li" ).sortable({ items: 'li' });
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:33:11.457

计算元素具有的兄弟元素的数量，如果它等于 0，则只有一个元素，因此您可以调用 .sortable('destroy') 来删除可排序功能。

```
if ($(this).siblings().length < 2) {
  $(this).sortable('destroy');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T08:51:34.620

不幸的是，没有明确设置最小项目数量的选项，因此除了手动检查之外别无他法。

# android - ldpi、mdpi、hdpi 和 xhdpi 屏幕的背景应该是哪种尺寸？

> ID：11630868
> 
> 赞同：4
> 
> 时间：2012-07-24T12:27:22.327
> 
> 标签：android, android-layout, background

设计师给了我一个背景，可以包含在我的应用程序中。它有很多细节，所以当尝试创建一个 9-patch 图像时，它变得模糊。

那么，决定在 Android 设备中为所有主要屏幕密度设置背景，背景图像的大小到底应该是多少？

例如：

*   低密度脂蛋白 - 200 x 200
*   mdpi - 300 x 300
*   hdpi - 400 x 400

有什么我应该遵循的标准吗？

非常感谢，

费利佩

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T12:33:46.137

一般来说，它可能是这样的：

ldpi：240 * 320（小） mdpi：320 * 480（中） hdpi：480 * 800（大）

但是，它不会涵盖有关具有 480 * 854 屏幕分辨率的设备或具有 720 * 1280 的较新设备的很多可能性。

你有两个选择：

1）尝试设计一个新的背景，可以用作0.9

2) 尝试创建多层可绘制对象 - 可绘制对象将包含 .9 格式的图像，以及“粘合”在其上的所有细节

第二种方法需要您的大量工作。在此处阅读有关分层可绘制对象的信息：

[http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:40:09.877

超大屏幕至少为 960dp x 720dp。大屏幕至少为 640dp x 480dp。普通屏幕至少为 470dp x 320dp。小屏幕至少为 426dp x 320dp。

# linux - 计算字符串中出现的次数。Linux

> ID：11630869
> 
> 赞同：0
> 
> 时间：2012-07-24T12:27:24.777
> 
> 标签：linux, bash, shell

好的，所以我想弄清楚的是如何计算字符串中的句点数，然后将所有内容削减到该点但减去 2。意思是这样的：

```
string="aaa.bbb.ccc.ddd.google.com"

number_of_periods="5"

number_of_periods=`expr $number_of_periods-2`

string=`echo $string | cut -d"." -f$number_of_periods`

echo $string

result: "aaa.bbb.ccc.ddd" 
```

我正在考虑这样做的方式是将字符串发送到文本文件，然后只是像这样搜索次数：

```
 grep -c "." infile 
```

我不想这样做的原因是因为我想避免创建另一个文本文件，因为我没有这样做的权限。我现在尝试构建的代码也会更简单。

**编辑**

我认为我没有说清楚，但我想让查找周期数更加动态，因为我要查看的地址会随着脚本的前进而改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:34:29.660

如果您不需要*计算*点，而只需删除倒数第二个点以及之后的所有内容，则可以使用 Bash 的内置[字符串操作](http://tldp.org/LDP/abs/html/string-manipulation.html)。

> `${string%substring}``$substring`删除的*后面*的 最短匹配项`$string`。

例子：

```
$ string="aaa.bbb.ccc.ddd.google.com"
$ echo ${string%.*.*} 
aaa.bbb.ccc.ddd 
```

又好又简单，不需要`sed`，`awk`或者`cut`！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T12:34:56.100

那这个呢：

```
echo "aaa.bbb.ccc.ddd.google.com"|awk 'BEGIN{FS=OFS="."}{NF=NF-2}1' 
```

（通过@steve 的有用评论进一步缩短）

给出：

```
aaa.bbb.ccc.ddd 
```

`awk`命令：

```
 awk 'BEGIN{FS=OFS="."}{NF=NF-2}1' 
```

通过将输入行分隔为字段 ( `FS`) 来工作`.`，然后将它们作为输出 ( `OFS`) 与连接起来`.`，但字段 ( `NF`) 的数量已减少 2。`1`命令中的 final 负责打印。

这将通过消除最后两个以句点分隔的项目来减少给定的输入行。

这种方法是“*与外壳无关的*”:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:34:36.590

也许这会有所帮助：

```
#!/bin/sh

input="aaa.bbb.ccc.ddd.google.com"

number_of_fields=$(echo $input | tr "." "\n" | wc -l)
interesting_fields=$(($number_of_fields-2))

echo $input | cut -d. -f-${interesting_fields} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T12:38:21.833

```
grep -o "\." <<<"aaa.bbb.ccc.ddd.google.com" | wc -l
5 
```

# java - 证书问题： mvn exec:java 看到它，java -jar 没有

> ID：11630871
> 
> 赞同：0
> 
> 时间：2012-07-24T12:27:28.317
> 
> 标签：java, security, certificate

我已经安装了安全证书，但我遇到了问题。当我运行我的代码时

```
mvn exec:java -Dexec.mainClass="com.myproject.MyClass" 
```

它工作正常。但是当我尝试将东西打包在一个 JAR 中并运行它时：

```
java -jar MyProject.jar 
```

我得到一个

```
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
        at sun.security.validator.PKIXValidator.doBuild(Unknown Source)
        at sun.security.validator.PKIXValidator.engineValidate(Unknown Source)
        at sun.security.validator.Validator.validate(Unknown Source)
        at sun.security.ssl.X509TrustManagerImpl.validate(Unknown Source)
        at sun.security.ssl.X509TrustManagerImpl.checkTrusted(Unknown Source)
        at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(Unknown Source)
        ... 32 more
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
        at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(Unknown Source)
        at java.security.cert.CertPathBuilder.build(Unknown Source)
        ... 38 more 
```

我用以下方法创建罐子：

```
mvn clean install jar:jar 
```

在与 jar 相同的级别上，我有一个名为 的目录`lib`，其中`lib`包含所有依赖项。依赖项已添加到我的 jar 中的 MANIFEST.MF 文件中，它们的路径是正确的，行不会太长（每行一个依赖项）。

Maven 和 Java 使用相同的 JDK。它们通常也应该对类路径具有相同的依赖关系。但似乎`java -jar`忽略了证书。

有人可以解释为什么会这样吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:54:22.580

你见过这个吗 ？

[https://blogs.oracle.com/gc/entry/unable_to_find_valid_certification](https://blogs.oracle.com/gc/entry/unable_to_find_valid_certification)

和

[http://nodsw.com/blog/leeland/2006/12/06-no-more-unable-find-valid-certification-path-requested-target](http://nodsw.com/blog/leeland/2006/12/06-no-more-unable-find-valid-certification-path-requested-target)

这将解决您的问题

# jquery - jquery mobile .clone 可折叠菜单-fiddle

> ID：11630875
> 
> 赞同：1
> 
> 时间：2012-07-24T12:27:44.027
> 
> 标签：jquery, events, mobile, clone

我有一个带有可折叠菜单的页面。当`$(document).width()`低于指定菜单时，我想克隆并将整个菜单附加到标题并提供“菜单”链接。

由于菜单很大，我想用它的点击事件克隆已经丰富的 html。而不是第二次构建和丰富菜单。

除了`ui-collapsibles`在菜单中之外，这非常有效：

请看一下：（短代码示例） [http://jsfiddle.net/N7Z9e/1478/](http://jsfiddle.net/N7Z9e/1478/)

单击哪个可折叠并不重要，调用第一个的展开/折叠功能。

调查`.data("events")`我可以看到他们共享相同的 guid。有谁知道解决这个问题的任何技巧？

我正在使用`.clone(true)`- 复制注册的事件处理程序，因为有很多来自 mvc 的自定义处理程序。

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:57:26.210

我认为这是“mobile.collapsible”小部件的 jQuery Mobile 实现的问题。如果您在第 4673 行检查代码 (http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.js)，当“展开折叠”事件绑定到可折叠小部件时 (即 div#menu 在您的情况下），在第 4683 行，由事件切换的 collapsibleHeading 对象实际上是被克隆的原始元素的 collapsibleHeading；它不是克隆元素的 collapsibleHeading。

# jquery - 如何禁用 jScrollPane 的垂直滚动？

> ID：11630884
> 
> 赞同：1
> 
> 时间：2012-07-24T12:28:22.610
> 
> 标签：jquery, jquery-plugins, jscrollpane, jquery-jscrollpane

我正在使用 jQuery 插件[jScrollPane](http://jscrollpane.kelvinluck.com/)。我想为我设置的滚动窗格禁用垂直滚动。

我怎样才能做到这一点？

我检查了他们的网站，但他们没有官方的 API 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:33:19.513

他们可能没有官方的 api 页面，但他们确实有可以提供帮助的示例。例如，以下页面包含此问题的解决方案：http: [//jscrollpane.kelvinluck.com/arrows.html](http://jscrollpane.kelvinluck.com/arrows.html)

页面 javascript

```
$(function()
{
    $('.scroll-pane').jScrollPane({showArrows: true});
}); 
```

页面 CSS

```
/* Styles specific to this particular page */
.scroll-pane
{
    width: 100%;
    height: 200px;
    overflow: auto;
}
.horizontal-only
{
    height: auto;
    max-height: 200px;
} 
```

这似乎解释了如何在这里实现您的目标。

# couchdb - 限制用户访问 CouchDB 中的某些文档

> ID：11630885
> 
> 赞同：2
> 
> 时间：2012-07-24T12:28:23.763
> 
> 标签：couchdb, couchapp

我对 CouchDB 世界很陌生！我有一个所有用户都可以阅读的数据库，并且还可以编辑除设计文档之外的文档。有没有办法让特定用户只编辑他/她创建的文档。我正在使用 CouchApp 和 jquery.couch.js 插件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T13:26:32.697

CouchDB 没有每个文档的权限，只有每个数据库的权限。如果您授予用户写入权限，则他对数据库中的所有文档都有写入权限。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T14:59:31.200

假设您避免让所有用户成为管理员并且您使用 CouchDB 的内置身份验证机制，我认为这是默认行为。

如需创建普通用户，请参阅[在 CouchDB 中创建普通用户](https://stackoverflow.com/questions/3684749/creating-regular-users-in-couchdb)。

有关用户身份验证和授权如何实际工作的更多详细信息，请参阅[安全功能概述](http://wiki.apache.org/couchdb/Security_Features_Overview)，特别是[“身份验证数据库”](http://wiki.apache.org/couchdb/Security_Features_Overview#Authentication_database)下面的部分，其中概述了 CouchDB 中的内置规则。

只有管​​理员用户可以创建新用户，但没有什么可以阻止您让程序登录并自动执行（使用管理员用户，这是假设您正在寻找某种“注册”过程，例如电子邮件通过您的其他一些软件进行验证）。

# java - 在生成的类上应用构建器模式或类似模式

> ID：11630886
> 
> 赞同：2
> 
> 时间：2012-07-24T12:28:24.227
> 
> 标签：java, design-patterns, builder, consistency

我有以下问题：

框架从 DB 表生成一个类，每个表列都是类变量（字段）。生成的类有 30 多个字段，只有一个没有参数的构造函数。

要创建该类的实例，我必须使用一些 setter 30 次，这是对不一致的邀请。

我不能直接使用带参数的构造函数或 Builder 模式，因为我无法编辑生成的类。解决这个问题的最佳方法是什么 - 包装类、线程安全方法、经典模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:31:23.600

您可以创建一个外部`Builder`类，每当您创建一个新对象时，它将所有字段初始化为某个默认值，然后像标准`Builder`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:38:06.647

`BeanBuilder`我通过创建一个在内部使用反射的类为自己解决了这个问题。您给它您的 bean，然后调用类似`startBean`,`value`和类似的方法来为您的 bean 填充数据，就像构建 XML 树一样。

如果你喜欢类型安全，你可以为自己创建一个类似的类，专门用于你拥有的那个 bean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:38:55.073

您可以使用 Builder 模式。例如，如果您有`Car`带有字段`power`, `weight`,的对象`maxSpeed`，`color`那么您可以像这样使用 Builder：

```
CarBuilder{
private Car car = new Car();

public CarBuilder(int power,int weight){
car.setPower(power);
car.setWeight(weight);
}

public CarBuilder setColor(String color){
car.setColor(color);
return this;
}

public CarBuilder setMaxSpeed(int maxSpeed){
car.setMaxSpeed(maxSpeed);
return this;
}

public Car build(){
return car;
}
} 
```

您可以在 costructor 中设置必填字段，在 settters 中设置附加字段。您也可以在`build`方法中执行一些检查。

# ruby - 带有 AWS-SDK for Ruby 的未定义方法“batch_change_message_visibility”

> ID：11630891
> 
> 赞同：0
> 
> 时间：2012-07-24T12:28:46.570
> 
> 标签：ruby, amazon-web-services, amazon-sqs

我正在尝试编写一个 ruby​​ 脚本来更改消息错误，但我收到错误 batch_change_message_visibility is not a defined method。这是代码：

```
require 'rubygems'
require 'aws-sdk'

sqs = AWS::SQS.new(
    :access_key_id => access_key,
    :secret_access_key => access_secret)

queue = sqs.queues.named(queue_name)

messages = []
messages << { :message => message_handle, :visibility_timeout => 5 }
queue.batch_change_message_visibility(messages) 
```

任何的想法 ？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:53:44.727

该方法被调用`batch_change_visibility`- 文档中的方法名称错误。

# couchdb - CouchDB 中的一个视图，用于查找最近的零回复论坛主题

> ID：11630892
> 
> 赞同：3
> 
> 时间：2012-07-24T12:28:49.050
> 
> 标签：couchdb

假设我们有一个假设论坛的以下数据模型：

```
// Post
{
    "_id": 1,
    "type": "post",
    "text": "",
    "timestamp": 1,
}

// Reply
{
    "_id": 2,
    "post_id": 1,
    "type": "reply",
    "text": "",
    "timestamp": 2,
} 
```

1.  所有回复都是平的（没有回复回复，所有回复都是帖子）
2.  过去的帖子和回复的流量是无限的

理想情况下，我想在**没有任何回复的情况下找到最新的线程。**

* * *

到目前为止，我有这些 map/reduce 函数：

```
map: function(doc) {
    if (doc.type == "post") {
        emit(doc._id, 0);
    }
    if (doc.type == "reply") {
        emit(doc.post_id, 1);
    }
},
reduce: function(keys, vals, rereduce) {
    return sum(vals);
} 
```

如果我运行它并按键分组，它会给我一个所有线程的列表，其中未回复的值为 0。到目前为止，一切都很好。

但，

1.  鉴于流理论上是无界的，我无法在应用程序或 CouchDB 的列表/过滤器函数中对其进行排序或过滤，因为它们适用于返回的（并且已经被截断的）数据集；
2.  更改键或组级别会破坏我想要的分组，帖子 ID 必须是组键。

* * *

**问题：**如何找到 N 个最近没有回复的线程，如何按帖子的时间戳对缩减视图进行排序？

**更简单的问题：**如果有没有回复的线程（布尔解决方案），我该如何找到？这意味着*过滤*缩减的视图，以便只留下零值行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:25:54.873

我认为更简单的实现是为您添加附加字段`reply_count`，
默认为零，
当回复回复时，
reply_count+=1

来搜索零回复的帖子，
地图功能可以很简单：

```
function (doc) {
  if (doc.type == "post")
  {
    emit([doc.reply_count, doc.timestamp], null);
  }
} 
```

询问 ：

```
descending=true
startkey=[0,9999999999]
endkey=[0,0]
include_docs=true 
```

# parameters - 将 SELECT-OPTIONS 表作为参数传递给子例程？

> ID：11630897
> 
> 赞同：3
> 
> 时间：2012-07-24T12:29:11.287
> 
> 标签：parameters, abap, sap-selection-screens

所以我有这个：

`SELECT-OPTIONS gr_saord FOR gv_sales_order OBLIGATORY.`

然后

`PERFORM check_values CHANGING gr_saord.`

然后

`FORM check_values CHANGING p_gr_saord TYPE selopt.`

我还尝试过`SELOPT`使用 Table Type代替结构，`piq_selopt_t`而不是传递`gr_saord`给 pass `gr_saord[]`。

代码的呈现版本和替代结果都在相同的错误消息中：

> 在PERFORM或CALL FUNCTION“CHECK_VALUES”中，实参“GS_SAORD”与形参“P_GR_SAORD”不兼容。

基本上我想简单地传递一个`SELECT-OPTIONS`表作为参数并且无法做到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T12:56:48.097

这是因为 selopt 和 piq_selopt_t 不适用于 vbak-vbeln。与您的选择选项相比，这些数据类型中的 Low 和 High 的类型不同。

这应该工作

```
data: gv_sales_order type vbap-vbeln.

types: tr_vbeln like RANGE OF gv_sales_order.

SELECT-OPTIONS: gs_saord for gv_sales_order.

perform check_values CHANGING gs_saord[].

form check_values CHANGING p_gr_saord TYPE tr_vbeln.

endform. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:55:52.757

如果您很懒（并且有很多选择选项要传递）并且您只需要将它们传递给您的 FORM 中的选择语句，您可以跳过类型定义并定义您的表单

```
perform check_values CHANGING gs_saord[].

form check_values CHANGING p_gr_saord TYPE standard table.

endform. 
```

# matlab - Matlab：向二维绘图添加第三维

> ID：11630898
> 
> 赞同：3
> 
> 时间：2012-07-24T12:29:13.370
> 
> 标签：matlab, 3d, plot, 2d

我有以下代码来生成二维图或 2 个正态分布：

```
 res = zeros(2, 320); 
        index = 1:320;

        % assign some data to the res array and then approximate:  

        PD = fitdist(index','normal', 'frequency', res(1,:)')
        pdfNormal = normpdf(index',PD.mu,PD.sigma);
        plot(index', pdfNormal, 'Color', 'r', 'LineWidth', 2);
        hold on;
        PD = fitdist(index','normal', 'frequency', res(2,:)')
        pdfNormal = normpdf(index',PD.mu,PD.sigma);
        plot(index', pdfNormal, 'Color', 'b', 'LineWidth', 2); 
```

这段代码生成我然后下面的图片：

![我的数据的 2D 绘图](../Images/8686c33785ff8ba6eaaf95b76fffb30e.png)

现在我想知道如何在这个情节中添加第三个维度？本质上，我想绘制另外 2 个正态分布，但这次是在 Z 轴上，即在第三维上。

有人知道我怎么能轻松做到这一点吗？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:57:43.497

如果我理解正确，您可以简单地为绘图提供不同的 z 值。例子：

```
%# some random data
x = 1:300;
y = zeros(5,300);
for i=1:5
    y(i,:) = normpdf(x,100+i*20,10);
end

%# plot
hold on
clr = lines(5);
h = zeros(5,1);
for i=1:5
    h(i) = plot(x, y(i,:), 'Color',clr(i,:), 'LineWidth',2);
    set(h(i), 'ZData',ones(size(x))*i)
end
zlim([0 6]), box on, grid on
view(3)
hold off 
```

![截屏](../Images/9dfd438d6fdcbd58c9d40351cdba9a41.png)

# linq - SQL Server 数据库未通过 C# 代码更新

> ID：11630902
> 
> 赞同：2
> 
> 时间：2012-07-24T12:29:31.453
> 
> 标签：linq, c#-4.0

我正在执行记录更新操作。我的更新操作正常，但数据库没有更新值。下面是更新代码。

```
 SupPartEntityVal supplypart = new SupPartEntityVal();

        String sNum = sNumText.Text;
        String sName = sNameText.Text;
        String sStatus = sText.Text;
        String sCity = cText.Text;
        int rowIndex = int.Parse(rIndex.Text);

        ObjectQuery<S> supply = supplypart.S;
        var query =
        from product in supply
        select new { product.SNUM, product.SNAME, product.STATUS, product.CITY };
        S sup = supplypart.S.Single(product => product.SNUM == sNum);
        sup.SNAME = sName; sup.STATUS = short.Parse(sStatus); sup.CITY = sCity;

        this.supplypart.SaveChanges(); 
```

1.  进行更改后，我可以在 UI 上看到更新的值
2.  关闭应用程序后，再次重新打开，我可以在 UI 上看到更新的值
3.  关闭 Visual Studio，重新打开应用程序并再次运行它。
4.  我没有看到数据库的变化。

我错过了什么吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:22:34.310

You Can Check Your Record When Saving In Database through Select Query on Command.. And See That is record is Saving? If Yes.. Then Issue is in your Database ... Normally this occurs when we use OLEDB that is Storing Database in project,,,

# android - 如何使用 android json 网络服务器

> ID：11630904
> 
> 赞同：0
> 
> 时间：2012-07-24T12:29:48.817
> 
> 标签：android, mysql, json, webserver

大家好，我是服务器方面的新手。我想开发从服务器上的数据库中获取数据的程序，这是我第一次对这件事一无所知。

让我们说像登录和注销：

1.  如何在我的 PC 上制作用于测试的虚拟服务器
2.  如何将模拟器与此虚拟服务器连接
3.  我如何从你的数据库中请求数据

我需要像 Xamp 或 Wamp 这样的软件吗？如果是，我该如何使用它？

我发现了很多关于 json 和 webserver 的示例，但我不知道如何制作虚拟服务器并将模拟器连接到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:46:26.373

据我了解这个问题，您需要两个单独的软件。您将需要 1) 服务器。首先，您可以安装 XAMP 和 WAMP 以使 Apache 运行。关于如何在线设置 Apache Web 服务器的教程有数百万，首先您可以只返回一个字符串或一个简单的数据结构（例如 JSON 或 XML）。当你想做更复杂的事情时，你可以学到更多，但一开始想“容易做到”。从您的文字中，我预计您只想将测试作为概念证明。- 顺便说一句，你运行什么操作系统？

另一种解决方案是在可从 Internet 访问的服务器上租用一些空间。然后，无论您身在何处，都可以测试您的服务器端。

其次，您需要为 android 创建一个程序。有几个指南，但请看这里：http: [//developer.android.com/training/basics/network-ops/index.html](http://developer.android.com/training/basics/network-ops/index.html)。如果您选择通过 HTTP 协议使您的数据可用，那么对于如何下载和解析数据，有非常类似于样板的过程。

如果您在本地计算机上托管服务器端，则需要使用本地寻址，但如果您选择将其放在网上，只要您有互联网连接，您就可以从任何地方获取数据。

祝你好运！

# ms-access - 访问中的四舍五入

> ID：11630905
> 
> 赞同：0
> 
> 时间：2012-07-24T12:29:50.837
> 
> 标签：ms-access

以下代码工作正常，但它没有将存储的值四舍五入到最接近的便士，例如 8.025 即将到来而不是 8.01 有人可以建议修复吗？

```
Public Function Fs_Update_AccInvoices_Nexum() As Boolean
    Dim adoRsInvoiceDCID As New ADODB.Recordset
    Dim adoRsNexumInvoices As New ADODB.Recordset

    On Error Resume Next
    adoRsInvoiceDCID.Open "SELECT * FROM [tInvoiceDCID] where Issued=0" _
        , CurrentProject.Connection, 2, 2
    While Not adoRsInvoiceDCID.EOF
        adoRsNexumInvoices.Open "SELECT * FROM [tPrintInvoiceNumbersNexum] " _
            & " WHERE InvoiceID=" & adoRsInvoiceDCID("InvoiceID") _
            , CurrentProject.Connection, 2, 2
        If Not adoRsNexumInvoices.EOF Then
            DoCmd.SetWarnings off
            DoCmd.RunSQL "Update [Acc Invoices t Nexum] " _
                & " SET [Total Due] = Round((Fees/0.8)+(VAT/0.8)+OutLays,2)" _
                & " Fees = Round(Fees/0.8,2), VAT = Round(Vat/0.8,2)" _
                & " WHERE Invoice=" & adoRsNexumInvoices("PrintingasINVOICE")
        End If
        adoRsNexumInvoices.Close

        adoRsInvoiceDCID.MoveNext
    Wend
    adoRsInvoiceDCID.Close
End Function 
```

干杯罗斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:17:56.010

快速说明：我注意到 vba 的舍入函数存在格式函数无法修复的一些不准确之处。在我的特殊情况下，我试图四舍五入数字 3687.23486

回合（3687.23486）= 3687.23

格式（3687.23486，“#.00”）= 3687.23

在传统的四舍五入规则下，这应该会导致 3687.24 我已经看到在各种论坛上发布了几个自定义函数来解决舍入问题，但没有一个对我有用，所以我自己写了。

```
 Function trueRound(ByVal varNumber As Variant, ByVal intDecimals As Integer) As Double
    If IsNull(varNumber) Then
        trueRound = 0
        Exit Function
    End If
    Dim decimals As Integer, testNumber As Double
    decimals = 0
    If InStr(varNumber, ".") > 0 Then decimals = Int(Len(varNumber)) - Int(Len(Fix(varNumber)) + 1)
    If decimals = 0 Or intDecimals > decimals Then
        trueRound = varNumber
        Exit Function
    End If
    Do Until Len(varNumber) - Len(Fix(varNumber)) - 1 <= intDecimals
        testNumber = varNumber * 10 ^ (decimals - 1)
        varNumber = Round(testNumber, 0) / 10 ^ (decimals - 1)
        decimals = decimals - 1
    Loop
    trueRound = varNumber
End Function 
```

我很快就把它算出来了，所以没有错误处理，传递给函数的空值会导致 0，这可能并不适合所有情况。我经常在一些非常大的查询中使用它，希望它可以帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:32:19.247

“Round 函数执行从round to even，这与从round to large 不同。” - 微软

```
Debug.Print Round(19.955, 2)
'Answer: 19.95

Debug.Print Format(19.955, "#.00")
'Answer: 19.96 
```

另请参阅[如何在 MS Access、VBA 中舍入](https://stackoverflow.com/questions/137114/how-to-round-in-ms-access-vba/266745#266745)

# ruby-on-rails-3 - 如何显示相关表中的描述字段

> ID：11630906
> 
> 赞同：0
> 
> 时间：2012-07-24T12:29:52.283
> 
> 标签：ruby-on-rails-3, activerecord, associations, multiple-tables

刚开始玩 Ruby（没有 IT 背景），直到现在进展顺利。但是自从两天以来，我被困住了，不明白出了什么问题……非常感谢您帮助我解决了这个问题！情况如下所述：

我创建了一个包含以下列的*currencymaster*`currmasdesc:string`表： , `currmasiso:string`。我创建了一个包含以下列的*货币汇率*`currratemasteridd:integer`表： , `currratemasteridc:integer`, `currraterate:decimal`, `currratedate:date`。其中，该列`currratemasteridd`反映了主要货币，而`currratemasteridc`反映了转换后的货币以生成组合的货币对。

models/currencymaster.rb 看起来像这样：

```
class Currencymaster < ActiveRecord::Base
  has_many :CurrencyRateDom, :class_name => "Currencyrate", :foreign_key => "CurrRateMasterIDD" 
  has_many :CurrencyRateConv, :class_name => "Currencrate", :foreign_key => "CurrRateMasterIDC"
end 
```

models/currencyrate.rb 看起来像这样：

```
class Currencyrate < ActiveRecord::Base
  belongs_to :CurrencyDominant, :class_name => 'Currencymaster' , :foreign_key => "CurrRateMasterIDD", :validate => true
  belongs_to :CurrencyConverted, :class_name => 'Currencymaster' , :foreign_key => "CurrRateMasterIDC", :validate => true
end 
```

controllers/currencyrates_controller.rb 看起来像这样：

```
class CurrencyratesController < ApplicationController
  # GET /currencyrates
  # GET /currencyrates.json
  def index
    @currencyrates = Currencyrate.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @currencyrates }
    end
  end

  # GET /currencyrates/1
  # GET /currencyrates/1.json
  def show
    @currencyrate = Currencyrate.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @currencyrate }
    end
  end
end 
```

现在是我的问题，我无法在 view/currencyrates/index.html.erb 中显示相关的`currencymaster.currmasiso`而不是存储在表 currencyrate中的`currratemasteridd`& 。`currratemasteridc`

我希望这个问题中的所有信息都可用，否则请在需要其他信息时告诉我。再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:07:52.610

为什么不遵守约定？

您应该创建一个`CurrencyMaster`类，不要在列名中重复“currmas”或“currrate”。不要覆盖外键......你的代码应该是这样的：

```
class CurrencyMaster < ActiveRecord::Base
  has_many :currency_rate_doms
  has_many :currency_rate_convs
end 
```

在你的其他课程中也是如此。Rails 使用“约定优于配置原则。之后会更好。

欢迎来到精彩的 ruby​​/rails 世界。

# spring - 无法在 glassfish 3.1 上使用 Spring DM 部署简单的 Web 包

> ID：11630907
> 
> 赞同：1
> 
> 时间：2012-07-24T12:29:53.750
> 
> 标签：spring, spring-dm

我是 OSGI 和 Spring DM 的新手。我正在尝试将一个简单的 Hello World wen 应用程序部署为**Glassfish 3.1**上的战争， 但面临一些严重的问题。我有 3 个非网络 OSGI 包：

```
1\. helloworld-model.jar
2\. helloworld-service.jar
3\. helloworld-servicedao.jar 
```

还有一个 web 包 helloworld-web.war。我正在使用 Glassfish asadmin "deploy --type=osgi .jar/war" 来部署我的 osgi 包。Delpoyment 成功完成，server.log 中没有错误，甚至所有四个应用程序都显示在基于 Web 的管理控制台中。但是我无法访问我的 Web 应用程序，我使用 http 和 8080 端口访问它，我得到 404，这意味着我的应用程序不可用。我使用标准方法为所有捆绑包定义 MANIFEST.MF，并在我的 web.xml 中定义了必需的元素。

有人可以帮我调查这个问题的根本原因。此外，如果有人可以提供在 Glassfish 上创建和部署 web 包的基本步骤，我们将不胜感激。我浏览了很多网页，但找不到一个结构性地定义所有必需步骤的地方。

# linux - apache核心转储文件

> ID：11630915
> 
> 赞同：0
> 
> 时间：2012-07-24T12:30:39.983
> 
> 标签：linux, apache, shell, gdb

我正在尝试通过 gdb 读取 apache 核心转储文件

这是简短的输出而不是完整的输出，但我不能在这里发布整个输出

```
# gdb /usr/local/apache/bin/httpd core.27476
GNU gdb (GDB) CentOS (7.0.1-42.el5.centos)
Copyright (C) 2009 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i386-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /usr/local/apache/bin/httpd...(no debugging symbols found)...done.
[New Thread 27476]

warning: .dynamic section for "/lib/libssl.so.6" is not at the expected address

warning: difference appears to be caused by prelink, adjusting expectations

warning: .dynamic section for "/lib/libcrypto.so.6" is not at the expected address

warning: difference appears to be caused by prelink, adjusting expectations

warning: .dynamic section for "/lib/librt.so.1" is not at the expected address

warning: difference appears to be caused by prelink, adjusting expectations
Core was generated by `/usr/local/apache/bin/httpd -k start -DSSL'.
Program terminated with signal 11, Segmentation fault.
#0  0xb3986ca8 in ?? () 
```

我想知道究竟是什么导致了这个问题

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:38:24.420

你想从这个文档开始：[http://httpd.apache.org/dev/debugging.html](http://httpd.apache.org/dev/debugging.html)。

如果您发现它位于特定模块中 - [http://www.myiphoneadventure.com/linux-2/debugging-apache-modules-in-linux-with-gdbddd](http://www.myiphoneadventure.com/linux-2/debugging-apache-modules-in-linux-with-gdbddd)可以提供帮助。

[http://www.omh.cc/blog/2008/mar/6/fixing-apache-segmentation-faults-caused-php/](http://www.omh.cc/blog/2008/mar/6/fixing-apache-segmentation-faults-caused-php/)记录了一些不错的额外技巧。

# asp.net-mvc-3 - Asp.net MVC3 从剃刀视图访问内部类

> ID：11630919
> 
> 赞同：4
> 
> 时间：2012-07-24T12:30:51.813
> 
> 标签：asp.net-mvc-3, class, reference, internal

这不是一个重复的问题。我已经在 SO 上进行了搜索，但我需要不同的东西。

今天是一种从 Razor View 访问内部类的方法，我知道该程序集必须是可见的，并且是现在。

默认情况下，不能从视图访问在“内部”类中声明的任何属性或方法。我需要一种方法来覆盖它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-07T20:13:23.897

在大多数情况下，您可以将类从内部更改为公共。你可以在[`InternalsVisibleTo`](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.internalsvisibletoattribute)不需要的时候使用。

对于*使用资源 (.resx) 文件自动生成的*.Designer.cs 文件，您可以通过在“Designer”视图中打开 resx 文件将“访问修饰符”更改为“public”：

[![](../Images/3df9f9dc18212bda5a9057fd7744cf62.png)](https://i.stack.imgur.com/epkGi.png)

如果一切都失败了，你应该能够使用反射来获得你需要的东西。有关详细信息，请参阅[此处](https://stackoverflow.com/questions/920844/c-sharp-how-to-access-internal-class-from-external-assembly)的最佳答案

祝你好运！

# c# - c# - 如何反转二维数组

> ID：11630926
> 
> 赞同：0
> 
> 时间：2012-07-24T12:31:27.790
> 
> 标签：c#, arrays, rows

我有一个执行长时间处理的程序。第一步是将表格从 XML 格式转换为二维数组 (arr[,])。之后执行了许多步骤，并且只有在它们之后我才知道表格是否具有行标题或列标题。为了清楚起见，行标题表示如下表：

```
Name    city   id
Anna     NY     1
Joe      NJ     2 
```

列标题的意思：

```
Name    Anna     Joe
City    NY       NJ
id      1        2 
```

该表根据标题进行处理。我接受与某些标题相关的价值观并致力于它们。我正在寻找一种以一种方式表示表格的方法，因此我不应该每次都检查表格类型是行还是列。我想避免类似以下代码的事情：

```
List<Cell> cells;
if (tableType == rows)
  cells = table.getCol("Name");
else
  cells = table.getRow("Name") 
```

我很乐意接受任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:37:17.353

有一个被调用的方法，而不是`table.getCol`然后`table.getRow`调用它们。

就像是：

```
static bool IsColumns = true;
List<Cell> Get(string input)
{
    if (IsColumns) return table.getCol(input);
    else return table.getRow(input);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:33:57.540

有一些不错的代码取自[这个问题](https://stackoverflow.com/questions/42519/how-do-you-rotate-a-two-dimensional-array)

```
int[,] array = new int[4,4] {
    { 1,2,3,4 },
    { 5,6,7,8 },
    { 9,0,1,2 },
    { 3,4,5,6 }
};

int[,] rotated = RotateMatrix(array, 4);

static int[,] RotateMatrix(int[,] matrix, int n) {
    int[,] ret = new int[n, n];

    for (int i = 0; i < n; ++i) {
        for (int j = 0; j < n; ++j) {
             ret[i, j] = matrix[j, i];
        }
    }

    return ret;
} 
```

# php - 如果有 javascript 代码，请验证 php 变量

> ID：11630927
> 
> 赞同：2
> 
> 时间：2012-07-24T12:31:30.180
> 
> 标签：php, javascript

我在 PHP（字符串）中有一些变量，我想检查这些字符串中是否有一些 javascript 代码。如果是这样，我想让这段代码处于非活动状态并在网站上显示为字符串，而不是作为 javascript 代码执行。

这将是一种安全方法。

有没有办法在php中做到这一点？如果你能给我举个例子，那就更好了。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T12:33:15.497

您应该使用`htmlspecialchars()`输出到 HTML 中的任何内容。它会转义任何 HTML 实体，以便它们不会按字面意思理解。例如，`<`变成`&lt;`。这也解决了你的问题。

[http://php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T12:43:24.027

除了布拉德的回答，考虑阅读[这里](https://stackoverflow.com/questions/111933/why-shouldnt-i-use-hungarian-notation)的第一个答案以获得简短的总结，然后再阅读其中提到的[文章](http://www.joelonsoftware.com/articles/Wrong.html)。

这可以帮助您轻松避免意外输出不安全的字符串。

# git - git rebase 混合提交

> ID：11630928
> 
> 赞同：3
> 
> 时间：2012-07-24T12:31:32.970
> 
> 标签：git

我有一个非常奇怪的问题：我有两个独立的分支，我正在做一个简单的`git rebase --onto branchA tagOnMaster`. 这是通过一个脚本完成的，该脚本曾经在我的旧 32 位机器上完美运行。现在我切换到一台新的 64 位机器，它停止正常工作。
看起来 git 混合了提交。
例如，我有两次连续提交，第一次提交更改文件 a 和 b，第二次提交更改文件 c。现在，rebase 正确地创建了第一个提交，但是第二个提交包含对文件 c 的更改以及对第一个提交中更改的**还原**。然而，这种恢复的更改不知何故留在了磁盘上，并导致第三次提交出现问题。

我认为一些图像会更好地显示发生了什么：

第一个原始提交，它只是改变了一个空间： ![第一次原始提交](../Images/f44f672fc6a7d6744bc92113c02d0997.png)

第二个原始提交只添加了两个新文件： ![第二次原始提交](../Images/61af0be21244d16e6d4f50ed1a02910d.png)

第一次重新提交 - 这个是正确的： ![第一次重新提交](../Images/55843b848830fa534bdc11e25675d976.png)

但现在变得奇怪了：第二个 rebased 提交除了两个新添加的文件之外，还包含第一个 rebased 提交的反向： ![第二次重新提交](../Images/f752ed3fc4afc688712266f56cf9a914.png)

在第二次提交之后，rebase 无法继续显示此消息：

> Database/Scripts/Versions/2.0.0/PKG_BODIES/normalinvoices.sql：需要更新
> 您必须编辑所有合并冲突，然后使用 git add 将它们标记为已解决

查看本地更改会发现从提交 1 开始的更改再次出现： ![未分阶段的变化](../Images/bb2fd15e8a07a3716da2882fe1b969d9.png)

我**真的**很感激对此的任何见解。
这是一个已知的错误？一个*特点*？！难道我做错了什么？公司防病毒程序是否有可能以某种方式锁定文件并因此搞砸了一切？但是我看不到防病毒程序如何导致文件比它应该*更早地存在......*
**最重要的是：**如何让我的变基再次工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T17:16:12.600

您的问题是您正在使用 rebase --onto 我认为没有必要。查看“gitk --all &”的屏幕截图并了解此操作的结果会有所帮助。

Rebase --onto 是一个将部分分支移动到新基础的命令。

来自 git-rebase 文档：

以下是如何将基于一个分支的主题分支移植到另一个分支，假装您使用 rebase --onto 从后一个分支分叉了主题分支。

首先让我们假设您的主题是基于下一个分支。例如，在主题中开发的功能取决于下一个中的某些功能。

```
o---o---o---o---o  master
     \
      o---o---o---o---o  next
                       \
                        o---o---o  topic 
```

我们想从分支 master 分叉出主题；例如，因为主题所依赖的功能被合并到更稳定的主分支中。我们希望我们的树看起来像这样：

```
o---o---o---o---o  master
    |            \
    |             o'--o'--o'  topic
     \
      o---o---o---o---o  next 
```

我们可以使用以下命令来获取它：

```
git rebase --onto master next topic 
```

...

在您的情况下，最后一个值被省略，因此默认使用 HEAD 。那是给你带来问题。我认为您将“rebase --onto”的语法与用于简单 rebase 的简写混淆了：

```
git rebase master topic 
```

最后一条命令实际上意味着：

```
git checkout topic # switch to topic branch
git rebase master # rebase topic branch on master 
```

希望有帮助！

# jquery - 如何使用jquery根据先前的选择器选择元素

> ID：11630930
> 
> 赞同：3
> 
> 时间：2012-07-24T12:31:36.253
> 
> 标签：jquery

> **可能重复：**
> [Jquery：选择中的选择](https://stackoverflow.com/questions/1266604/jquery-selection-within-a-selection)

首先我从某个页面中选择 div 元素，代码如下：

```
var divs = $('div'); 
```

如何从 div 中选择带有 someClass 的 div。我尝试使用

```
divs.find('.someClass') or divs.find('div.someClass') 
```

他们两个都不能工作。

如果我想完成这个任务，我应该怎么做？顺便说一句，我知道我可以使用 `$('div.someClass')`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T12:33:49.243

您可以使用以下[`.filter()`](http://api.jquery.com/filter/)方法：

```
var someClassDivs = divs.filter('.someClass'); 
```

这会将匹配的元素集减少为匹配选择器的元素（换句话说，那些具有“someClass”类名的元素）。

您当前的尝试`.find()`不起作用，因为它查看*后代*元素。您正在尝试减少由（有效）兄弟姐妹组成的匹配集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:34:22.477

使用过滤器功能

```
 var divs = $('div');
    divs.filter(function(){
    return $(this).hasClass("some_class");
                           }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:36:59.557

你一开始不使用有什么原因`$('div.someClass')`吗？你需要一个包含所有 div 的数组来做其他事情吗？首先选择所有 div，然后过滤数组使用比简单地使用类名作为选择器更多的操作，并且可能会更慢。

我的建议是：

```
var divs = $('div.someClass') 
```

# php - Excel 读取文本数据库 - 在 PHP、HTML 等中查看

> ID：11630932
> 
> 赞同：1
> 
> 时间：2012-07-24T12:31:49.133
> 
> 标签：php, html, excel, text

我们在服务器 X 上有一个文件，该文件记录了我们拥有的程序的许可证使用情况（在文本文件中 - log.txt 是我们的数据库）。

我们创建了从该文件读取的 Excel（并添加了查看许可证状态所需的其他字段）。现在我们想以 HTML 或 PHP 等格式显示 Excel 中的数据。我们尝试了 PHP Excel Reader，但这对我们来说不是最佳选择，因为 Excel 必须打开，我们必须刷新 Excel 内容然后保存它，以便在 PHP 中进行任何更改看法。

任何想法？请帮忙，谢谢。

问候

# html - Div 标签在 IE 中没有扩展 .. 在所有其他浏览器中都可以

> ID：11630934
> 
> 赞同：0
> 
> 时间：2012-07-24T12:31:53.717
> 
> 标签：html, css, internet-explorer

我整天都在拉头发。任何帮助将不胜感激！！

我有一行 div，在 Chrome、IE 和 Safari 中，在此处放置许多行会将外部 div (.formRow) 推高以适应扩展的内容。在 IE 中，div.formRow 保持相同的大小和内容低于 div.formRow 的底部。我已经尝试了一切..任何人有任何想法...

这是我的 HTML：

```
<div class="formRow clear">
    <div class="leftCell">
        This is on the left<br>
        This is a new line<br>
        In FF and Chore, these new lines push the outer div down<br>
        In IE, theselines just go over the botto of the outer div and it doesn't expand
    </div>
    <div class="rightCell">
        This is on the right
    </div>
    <div class="rightNote">
        X
    </div>
    <br class="clear">
</div> 
```

这是我的这个 HTML 的 CSS：

```
br.clear {
    clear:both;
}
div.formRow {
    border-bottom: 1px solid #e4e4e4;
    padding:20px;
    font-size:11px;
    color:#6a6a6a;
}
div.formRow div.leftCell {
    width: 73%;
    float:left;
}
div.formRow div.rightCell {
    width: 20%;
    float:left;
}
div.formRow div.rightNote {
    width: 7%;
    float:left;
} 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:37:09.183

`<br/>`不要在末尾使用 a ，而是将其设为另一个`<div></div>`.

看到[这个 jsfiddle LIVE DEMO](http://jsfiddle.net/ZRKxR/2/)

代替...

```
 <br class="clear"> 
```

和...

```
 <div class="clear"></div> 
```

并更换...

```
br.clear {
  clear:both;
} 
```

和...

```
div.clear {
  clear:both;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:51:36.427

或者完全移除清除元素并将溢出：隐藏添加到父容器。

```
div.formRow { 
    overflow: hidden;  
} 
```

在我看来，总是更好的解决方案。

# java - PBKDF2，来自 C# 的 Java 实现

> ID：11630941
> 
> 赞同：3
> 
> 时间：2012-07-24T12:32:19.837
> 
> 标签：java, security, encryption, pbkdf2

试图获得 PBKDF2 的 java 实现，我用它作为我的 C# 版本：[https ://github.com/shawnmclean/SimpleCrypto.net](https://github.com/shawnmclean/SimpleCrypto.net)

我的代码：

```
import java.security.Key;
import java.security.NoSuchAlgorithmException;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.KeySpec;

import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.SecretKeySpec;

public class PBKDF2 {

    public static void main(String[] args) {
        try {
            SecretKeyFactory f = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
            KeySpec ks = new PBEKeySpec("iamtwentycharacterss".toCharArray(),"50.eGIYr3ZpxpWw67utH17s/A==".getBytes(),50,64);
            SecretKey s = f.generateSecret(ks);
            Key k = new SecretKeySpec(s.getEncoded(),"HmacSHA1");
            System.out.println(new String(k.getEncoded()));
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        } catch (InvalidKeySpecException e) {
            e.printStackTrace();
        }       
    }

} 
```

我在stackoverflow上尝试了各种答案：

[用于加密/解密的 Java SimpleCrypto 类在 Coldfusion 9 和 Java (Android) 中产生不同的结果](https://stackoverflow.com/questions/11418336/java-simplecrypto-class-for-encryption-decryption-producing-different-results)

[Java - 使用 HMACSHA256 作为 PRF 的 PBKDF2](https://stackoverflow.com/questions/9147463/java-pbkdf2-with-hmacsha256-as-the-prf)

[在 Java 中使用 PBKDF2 进行密码验证](https://stackoverflow.com/questions/2375541/password-verification-with-pbkdf2-in-java)

不幸的是结果不匹配，结果应该是： `mOs/Mw7ZRM99i/BTJ+xnmj5Pm6QlqP1vuPqrf/Qa3WwassxI1QJ447OqdoBzunbJjvrx7+bHAO1Dnj8ltS4TKA==`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:48:11.143

如果可能有帮助，我已经用以下代码解决了我的问题，Rfc2898DeriveBytes 类：[http ://pastebin.com/iReZJ3Vq](http://pastebin.com/iReZJ3Vq)

```
import java.nio.charset.Charset;

import org.bouncycastle.util.encoders.Base64;

public class PBKDF2 {

    public static void main(String[] args) {
        try {
            String password = "iamtwentycharacterss";
            String salt = "50.eGIYr3ZpxpWw67utH17s/A==";
            int iterations = Integer.parseInt(salt.substring(0, salt.indexOf('.')));
            byte[] saltBytes = salt.getBytes(Charset.forName("UTF-8"));

            Rfc2898DeriveBytes rfc2898 = new Rfc2898DeriveBytes(password, saltBytes, iterations);
            byte[] key = rfc2898.getBytes(64);
            String hash = new String(Base64.encode(key));
            System.out.println(hash);
        } catch (Exception ex) {
            System.out.println("ERROR: " + ex);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:01:12.763

我怎么错过了这一点......

程序中所需的密钥长度为 64，但您期望的结果密钥长度为 512。将 pbekeyspec 中所需的密钥长度更改为 512

```
KeySpec ks = new PBEKeySpec("iamtwentycharacterss".toCharArray(),"50.eGIYr3ZpxpWw67utH17s/A==".getBytes(),50,512); 
```

# android - Android - 在异步调用后更新 ListAdapter 时遇到问题

> ID：11630942
> 
> 赞同：2
> 
> 时间：2012-07-24T12:32:23.667
> 
> 标签：android, android-layout, android-asynctask

我正在设置这样的 ListView 适配器：

```
public class SeeAllQuestionsActivity extends Activity
{
    //ArrayAdapter<Question> adapter;   
    SimpleAdapter mSchedule = null;
    ListView list = new ListView (this);

    TextView loading_questions = null;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);        
        setContentView(R.layout.all_question_page);

        TextView loading_questions = (TextView) findViewById(R.id.loading_questions);

        list = (ListView) findViewById(R.id.list);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
        HashMap<String, String> map = new HashMap<String, String>();

        mSchedule = new SimpleAdapter(this, mylist, R.layout.questions_list,
                new String[] {"train", "from", "to"}, 
                new int[] {R.id.TRAIN_CELL, R.id.FROM_CELL, R.id.TO_CELL});

        list.setAdapter(mSchedule);

        list.setTextFilterEnabled(true);

        list.setOnItemClickListener(new OnItemClickListener() 
        {
            public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) 
            {              
              ... 
```

然后进行远程异步调用以从我的数据库中获取列表，并尝试在 onPostExecute 方法中执行此操作：

```
ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
                HashMap<String, String> map = new HashMap<String, String>();

                    try
                    {
                        JSONArray obj = new JSONArray(result);

                        if ( obj != null )
                        {

                            for ( int i = 0; i < obj.length(); i++ )
                            {
                                JSONObject o = obj.getJSONObject(i);

                                map.put("train", "Business Name");
                                map.put("from", ">");
                                map.put("to", ">");
                                mylist.add(map);
                                map = new HashMap<String, String>();
                                map.put("train", "103(x)");
                                map.put("from", "6:35 AM");
                                map.put("to", "7:45 AM");
                                mylist.add(map);                                                                    
                            }
                        }
                    }
                    catch ( Exception e )
                    {
                    }                   

                    list.setAdapter(mSchedule); 
```

但我在这一行得到一个空指针异常：

```
ListView list = new ListView (this); 
```

但我认为一般来说，我在 postExecute 方法中需要如何完成这项工作还有很长的路要走。非常感谢有关如何正确执行此操作的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:53:27.913

我记得并且作为一个合乎逻辑的结论：在你打电话的那一刻，**this**的引用是**null**。**这**将在**ListView**的构造函数中访问，因此将引发**NullPointerException 。**如果要动态创建它，则必须在**Activity的****onCreate**方法中调用**ListView**构造函数。

 ****如果可能的话，至少最好按照 MartijnVanMierloo 的建议来实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:17:00.200

在您的**OnCreate**中，您定义了一个新的 SimpleAdapter 并将其附加到您的 ListView。这是对的。数据源（`mylist`在您的情况下）此时为空，因此您将使用`AsyncTask`.

在您的**onPostExecute**中，您正在创建一个新的`ArrayList`. 根据您收到的结果，您填写它。完成此操作后，您将再次设置适配器。因为适配器没有数据，所以什么都不做。您想要做的是将新填充的列表提供给适配器，以便它可以`ListView`用您的数据填充。

**解决方案 1**

```
onPostExecute {
   // create a list to store your data
   new ArrayList

   // fill the new list with the data you received (result)
   fillArrayList from JSON

   // create an adapter and give the new list with it
   mAdapter = new SimpleAdapter(.., ArrayList, ...)
   listView.setAdapter(mAdapter);   
} 
```

这是您可以做到的一种方式，并且适合您当前的实现。

**解决方案 2**

我会选择这个解决方案

```
onPostExecute {
    // don't create a new arraylist but use the mylist-object you created in the OnCreate
    fill mylist object with new data 

    // mylist is the datasource of your adapter and it is now changed.
    // let the ListView know his adapter received new information
    mSchedule.notifyDataSetChanged
} 
```

**更新**

看看[这个教程](http://eureka.ykyuen.info/2010/01/03/android-simple-listview-using-simpleadapter/)。我使用相同的布局和相同的来源来填充我的列表，但我已经对其进行了更改，因此它与您的情况相似。祝你好运 ：）

*主要活动*

```
public class MainActivity extends Activity {

    private List<HashMap<String, String>> fillMaps;
    private SimpleAdapter adapter;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ListView lv = (ListView) findViewById(R.id.listview);

        String[] from = new String[] { "rowid", "col_1", "col_2", "col_3" };
        int[] to = new int[] { R.id.item1, R.id.item2, R.id.item3, R.id.item4 };

        // My data
        fillMaps = new ArrayList<HashMap<String, String>>();

        // Create an adapter which will tell my ListView what to show..
        // fillMaps is still empty so at the moment it my ListView will show
        // nothing.
        adapter = new SimpleAdapter(this, fillMaps, R.layout.row, from, to);
        lv.setAdapter(adapter);

        // Retreive data from somewhere
        new UpdateListWithAsyncTask().execute();
    }

    private class UpdateListWithAsyncTask extends AsyncTask<Void, Void, Void> {
        protected Void doInBackground(Void... params) {
            // do stuff
            return null;
        }

        protected void onPostExecute(Void result) {
            // Fill your datasource that your adapter has. In my case fillMaps
            for (int i = 0; i < 10; i++) {
                HashMap<String, String> map = new HashMap<String, String>();
                map.put("rowid", "" + i);
                map.put("col_1", "col_1_item_" + i);
                map.put("col_2", "col_2_item_" + i);
                map.put("col_3", "col_3_item_" + i);
                fillMaps.add(map);
            }

            // my datasource is now changed, I want my adapter to know this and
            // update my ListView
            adapter.notifyDataSetChanged();
        }
    }
} 
```****

# c# - 定时器会降低 WPF 应用程序的 UI 性能

> ID：11630943
> 
> 赞同：0
> 
> 时间：2012-07-24T12:32:26.740
> 
> 标签：c#, wpf, user-interface, timer, responsive-design

我有一个 WPF C# GUI 应用程序，它有许多菜单栏、按钮和网格控件。

在主 XAML 表单类中，我有五个 System.Timer.Timer 对象，它们在类级别声明，然后在 XAML 表单类构造函数中创建和实例化，如下所示（一个示例）

```
var factory = new TaskFactory();

                factory.StartNew(() =>
                                    {
                                        dtEmergencyQueueRefresh = new System.Timers.Timer(EmerTimeoutSecs * 1000);
                                        dtEmergencyQueueRefresh.Elapsed += dtEmergencyQueueRefresh_Tick;
                                        dtEmergencyQueueRefresh.Enabled = true;
                                    }
                                ); 
```

我这样做是为了让它们肯定会在后台线程上启动并运行，因为我注意到 GUI 性能很慢，但这似乎没有帮助。

当我注释掉所有用于启动计时器的代码并将它们保留为空声明时，GUI 按预期执行并且很好。

当我说性能下降时，点击仍然可以正常工作，但是当您下拉菜单时，“悬停”功能在大约 5-10 秒内不起作用，因此您所在的行不会突出显示，除非您等待 5 -10 秒，正如我所说。

我还尝试进入计时器调用的回调方法并注释掉所有代码，以便计时器只是执行空方法。性能仍然很差，所以只运行了 5 个定时器并且什么都不调用，仍然降低了性能，所以不是后台处理降低了性能，而是让定时器完全运行。

有没有人对为什么会发生这种情况以及如何让这些计时器在后台运行而不影响 GUI 有任何建议？

# android - 如何将android屏幕实时渲染到网页

> ID：11630945
> 
> 赞同：0
> 
> 时间：2012-07-24T12:32:30.810
> 
> 标签：android, ffmpeg, framebuffer, remote-control

我正在研究从网络浏览器远程控制 android 的东西。canvas 或 flash 之类的东西会绘制 android 设备的屏幕，我希望它非常流畅。

据我所知，我们可以使用帧缓冲区捕获 android 屏幕。有很多关于这个的文章。但是，fps非常多，最多4~5 fbs。有什么方法可以改善吗？

ffmpeg之类的东西会有帮助吗？</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:33:53.347

我确实认为你需要编写一个虚拟驱动程序（.so）并安装它，所有执行此操作的应用程序（如“droid VNC 服务器”）都需要 root 访问级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:20:23.100

您是否执行了基于 ARM NEON 的优化？它应该超过 4~5 fps。我正在做一个显示记录器应用程序，可以轻松做到 25fps。但是，它不是远程处理，而是将捕获的视频保存到本地存储中。

对于类似VNC的解决方案，关键是不要循环，捕获帧，它应该只在视频缓冲区更新时才这样做。

您还可以测试我们的 vnc 服务器是否可以在您的设备上运行。VMLite VNC Server是第一个不需要root的vnc服务器，但是需要用USB连接启动服务器。

[https://play.google.com/store/apps/details?id=com.vmlite.vncserver](https://play.google.com/store/apps/details?id=com.vmlite.vncserver)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:22:37.077

您将永远无法实时操作它。总会有一些延迟。这是由于许多因素，如互联网连接、设备硬件速度、屏幕捕获延迟等。全球有几家公司成功地做到了这一点，但并非没有延迟。

# assembly - 此代码的 64 位版本

> ID：11630955
> 
> 赞同：-1
> 
> 时间：2012-07-24T12:33:06.150
> 
> 标签：assembly, inline-assembly

我设法编写了一个接受 32 位整数并将其转换为数字数组以在另一个数字系统中表示它的代码问题：如何将其扩展为 64 位？在 Digital Mars C/C++ 编译器中：

```
void get_digits_asm()
{
    __asm
    {

        pushf       
        movd xmm0,eax
        movd xmm1,ebx
        movd xmm2,ecx
        movd xmm3,edx
        movd xmm4,edi

        mov eax,[variable_x]
        mov ebx,[number_system]
        mov ecx,0h
        mov edi,0h

        begin_loop:
        mov edx,0h
        div ebx             
        lea edi,digits  
        mov [edi+ecx*4],edx
        add ecx,01h
        cmp eax,ebx
        ja begin_loop

        mov edx,0
        div ebx
        lea edi,digits
        mov [edi+ecx*4],edx
        inc ecx
        mov [digits_total],ecx

        movd edi,xmm4//pop edi
        movd edx,xmm3//pop edx
        movd ecx,xmm2//pop ecx
        movd ebx,xmm1//pop ebx
        movd eax,xmm0//pop eax
        popf            
    }

} 
```

当此函数返回时，它将 LSB 提供给 MSB 排列的数字数组。

示例：在数字系统 2 中，5 是 101。在系统 8 中，232343435 是 54545...。我想了解如何在 64 位中进行此操作。我的操作系统是 32 位的。我的 CPU 是 pentium-M centrino-laptop 我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:17:41.080

你用

```
 mov edx,0h 
```

前

```
 div ebx 
```

在你的`begin_loop:`.

如果要处理 64 位数字，则使用 E​​DX 寄存器存储数字的高 32 位。所以，如果你的号码是

```
int64_t variable_x; 
```

然后将其加载到 EDX/EAX 对中。

代替

```
mov eax,[variable_x] 
```

做

```
mov esi, variable_x
mov eax, [esi]
mov edx, [esi + 4] 
```

我希望你能明白。抱歉，如果我忘记了 x86 的确切寻址规则。

当然，由于您在每次迭代中销毁 EDX，您可能会使用堆栈或另外一个寄存器来存储它。

您的问题与 64 位长模式无关，DIV 指令支持 64 位整数。它们只是成对存储。

# c# - facebook分享按钮的不同网址

> ID：11630964
> 
> 赞同：0
> 
> 时间：2012-07-24T12:33:20.200
> 
> 标签：c#, javascript, asp.net, facebook, facebook-sharer

我想在 Facebook 分享按钮中提供一个不同的 url，而不是当前页面的 url。

我试图在后面更改 asp.net 中的 url，但我没有成功。

如果有人能对此提供帮助，我将不胜感激。

我使用的一些代码，您可以在下面看到。

这是前端脚本

```
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript">
</script>
<script type="text/javascript">
function fbs_click() {
u = location.href;
t = document.title;
window.open('http://www.facebook.com/share.php?u=' + encodeURIComponent(u) +
'&t=' + encodeURIComponent(t), 'share', 'toolbar=0,status=0,width=626,height=436');
return false;
}
</script> 
```

这是分享按钮

```
<a name="fb_share" runat="server" id="aFbShare" type="button" class="sharelink">Paylaş</a> 
```

这就是我在背后做的

```
string wishListUrl = SEOHelper.GetWishlistUrl(NopContext.Current.User.CustomerGuid);
aFbShare.Attributes.Add("onclick", "fbs_click()");
aFbShare.Attributes.Add("target", "_blank");
aFbShare.HRef = "http://www.facebook.com/share.php?u=" + wishListUrl; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:04:14.443

你遇到的问题是这个。用户单击您的按钮：

```
<script type="text/javascript">
function fbs_click() {
   u = location.href;
   t = document.title;  
   window.open('http://www.facebook.com/share.php?u=' + encodeURIComponent(u) + '&t=' + encodeURIComponent(t), 'share', 'toolbar=0,status=0,width=626,height=436');
   return false;
}
</script> 
```

在这个函数中，u 是当前 URL，t 是当前标题。你打开一个新的 facebook 窗口，然后返回 false。这意味着您的链接实际上永远不会被关注，因为 false 告诉浏览器不应进一步处理点击。你应该做的是修改代码隐藏：

```
string desiredTitle = "My Wishlist";
string wishListUrl = SEOHelper.GetWishlistUrl(NopContext.Current.User.CustomerGuid);
aFbShare.Attributes.Add("onclick", "fbs_click('" + wishListUrl + "', '" + desiredTitle + "')"); 
```

并将客户端脚本修改为：

```
<script type="text/javascript">
function fbs_click(url, title) {
   window.open('http://www.facebook.com/share.php?u=' + encodeURIComponent(url) + '&t=' + encodeURIComponent(title), 'share', 'toolbar=0,status=0,width=626,height=436');
   return false;
}
</script> 
```

If you need to maintain your current title, just remove the title variable from the onclick call, and the function signature, and pull the title from the document as you were doing before.

# ios - 如何在 UITableView 中为不同的单元格和标题设置不同的随机颜色？

> ID：11630967
> 
> 赞同：0
> 
> 时间：2012-07-24T12:33:22.733
> 
> 标签：ios, uitableview

我有一个包含 17 个部分的表格视图，每个部分有 4 行。我想为每个部分设置随机不同的颜色，这样颜色不会重复，并且每次重新加载表格时，它们各自的颜色都会改变。例如：如果表格标题为灰色，则其单元格应具有不同的灰色阴影......并且.. 如果表格标题为绿色，则其单元格应具有不同的绿色阴影，依此类推。如何提前做这个谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:16:28.963

所以解决这个问题的方法是使用一个使用色相、饱和度和亮度的色彩空间。色调为 360 度或 2 弧度。如果您需要颜色，则开始将圆圈拆分为所需的切片数量，在该颜色空间中创建值（切片的色调，将饱和度设置为全开，将亮度设置为全开。在您的情况下，它是 360/17是你的切片度数。

我们在几年前工作的一家公司中使用了它。为此可能有示例 C 代码，但您必须自己搜索才能找到它。做起来并不难。

Apple 有一个关于颜色和颜色空间的很好的指南，您可以通过搜索“颜色和颜色空间”在 Xcode 文档窗格中阅读它。

# python - 暂停工作线程中的“运行”方法

> ID：11630968
> 
> 赞同：0
> 
> 时间：2012-07-24T12:33:24.557
> 
> 标签：python, multithreading, wxpython, python-multithreading

我的 wxPython 应用程序中有一个后台线程来保持 GUI 响应。在我的后台线程的“运行”方法中有一个 while(true) 循环，但我也有其他方法，有时我会从 GUI 线程调用。当我进入后台线程的另一种方法时，是否有停止运行方法的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:57:05.897

假设您有一些这样的代码：

```
import threading
import time

class MyWorkerThread(threading.Thread):
    def run():
        while True:
            # Do some important stuff here
            foo()
            time.sleep(0.5)

    def foo():
        # Do something important here too
        pass

class SomeRandomButton:
    def __init__(worker_thread):
        self.worker_thread = worker_thread

    # Function called when button is clicked
    def on_button_clicked():
        self.worker_thread.foo();

my_worker_thread = MyWorkerThread()
my_button = SomeRandomButton(my_worker_thread)

# Start thread
my_worker_thread.run()

# Initialize the GUI system (creating controls etc.)

# Start GUI system
GUISystem.run() 
```

上面的代码实际上并没有做任何事情，甚至不会运行，但我将使用它来说明线程对象 ( `MyWorkerThread.foo`) 中的函数不必*从*该特定线程调用，它可以从*任何*线程调用.

您可能想阅读更多关于多线程的信息，可能还想了解[信号量](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)以保护数据不被多个线程同时访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:40:07.430

做喜欢

```
while(alive):
  while(not stopped):
     """
        thread body

     """ 
```

在其他地方你可以暂停线程

```
stopped=True 
```

而不是使用

```
stopped = True
alive = False 
```

退出线程

# c++ - 使用正则表达式匹配字符串

> ID：11630980
> 
> 赞同：0
> 
> 时间：2012-07-24T12:34:00.410
> 
> 标签：c++, regex

我想在 C++ 程序中编写一个正则表达式来检查字符串是否与以下表达式匹配：

一个不包含 '_' 但它可以包含数字后跟的单词

'_' 其次是

连续三个数字（即 047）

后跟“_”，然后是

一个字符串（可以包含任何内容）

我尝试了以下表达式，但它似乎确实找到了如上所述的所需字符串。我怀疑问题出在第一部分，但我无法检测到它以便正确修改：

```
static const wregex stringForm("([^_]?)_?(\\d{3})_(.+)"); 
```

那么正确的 reg 表达式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:41:10.850

```
\b[^_]*?(_\d{3}.+?)?\b 
```

一个词（`\b`是词的边界，量词是非贪婪的）。零个或多个不是 _ ( `[^_]*?`) 的字符。可选 ( `(...)?`)，您描述的数字序列 ( `_\d{3}`) 后跟一个或多个任意字符 ( `.+?`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:39:19.677

你有没有试过这个：

```
static const wregex stringForm("([a-zA-Z0-9]*_[0-9]{3}.*)"); 
```

# xslt - XSLT format-number 函数不格式化

> ID：11630982
> 
> 赞同：4
> 
> 时间：2012-07-24T12:34:03.593
> 
> 标签：xslt, numbers, format

我需要将值格式化为特定格式，但它似乎不受支持。

我想使用：

```
format-number($value, '####,##,##,##0') 
```

但是尝试这样做时返回的值是`'###,###,##0'`

因此，如果我`$value = '123456789'`想将值输出为`1,24,56,789`但我得到`123,456,789`.

您可以执行的格式设置是否有限制？

如果你去[W3schools](http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog)并输入以下 xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<catalog>
    <cd>
        <title>Empire Burlesque</title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>123456789</price>
        <year>1985</year>
    </cd>
    <cd>
        <title>Hide your heart</title>
        <artist>Bonnie Tyler</artist>
        <country>UK</country>
        <company>CBS Records</company>
        <price>123456789</price>
        <year>1988</year>
    </cd>

</catalog> 
```

然后是以下xsl：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
<xsl:variable name="TestFormat" select="'###,##,##,##0'"/>
  <html>
  <body>
  <h2>My CD Collection</h2>
    <table border="1">
      <tr bgcolor="#9acd32">
        <th>Title</th>
        <th>Artist</th>
      </tr>
      <xsl:for-each select="catalog/cd">
      <tr>
        <td><xsl:value-of select="title"/></td>
        <td><xsl:value-of select="format-number(price, $TestFormat)"/></td>
      </tr>
      </xsl:for-each>
    </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

你可以看到我没有得到想要的格式。有什么建议么？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:10:29.547

对于 8 和 9 个字符串，以下将起作用：

```
 <td>
        <xsl:value-of select="substring(price,1,1)"/>
        <xsl:text>,</xsl:text>
        <xsl:value-of select="substring(price,2,1)"/>
        <xsl:value-of select="substring(price,4,1)"/>
        <xsl:text>,</xsl:text>
        <xsl:value-of select="substring(price,5,2)"/>
        <xsl:text>,</xsl:text>
        <xsl:value-of select="substring(price,7,3)"/>
        <xsl:if test="string-length(price) &lt; 9">
          <xsl:value-of select="0"/>
        </xsl:if>
      </td> 
```

根据您的意图，可能需要移动或更改“if”块以完成稍微不同的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:46:44.540

分组分隔符`,`仅在小数分隔符后第一次出现时才受到尊重。这是因为[W3C 指定](http://www.w3.org/TR/xslt/#format-number)格式*模式字符串采用 JDK 1.1 DecimalFormat 类指定的语法。* [查看该类](http://docstore.mik.ua/orelly/java/javanut/ch29_09.htm)会发现它具有整数分组大小属性，因此整个格式中的可变组大小无法由该类建模。

因此，在编写时`###,##,##,##0`，分组大小设置为三（最右边的分组分隔符`,`和格式字符串末尾之间的位数，而在编写时`###,##,##,0`，每个数字之间会有一个分组分隔符。

如果您*真的非常*想在没有任何外部格式化工具/函数的情况下在 XSLT 中执行此操作，您可以使用`string-length`,`concat`和`substring`函数并手动插入组分隔符来制作一些东西。

**更新：**这些语句仅对 XSLT 1.0 有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T21:21:06.893

现在是您迁移到 XSLT 2.0 的时候了。在当前版本的 Saxon 中，您的代码会生成以下输出：

```
<html>
   <body>
      <h2>My CD Collection</h2>
      <table border="1">
         <tr bgcolor="#9acd32">
            <th>Title</th>
            <th>Artist</th>
         </tr>
         <tr>
            <td>Empire Burlesque</td>
            <td>12,34,56,789</td>
         </tr>
         <tr>
            <td>Hide your heart</td>
            <td>12,34,56,789</td>
         </tr>
      </table>
   </body>
</html> 
```

# node.js - 如何在nodejs中缓存hbs渲染模板

> ID：11630983
> 
> 赞同：2
> 
> 时间：2012-07-24T12:34:05.417
> 
> 标签：node.js, handlebars.js, express

只是一个简单的问题。如果我在 nodejs 中有一个非常简单的把手模板，它可能会被渲染很多次，而无需更改缓存结果的最佳方法，以确保它不需要每次都渲染把手结果。

例如：

```
<html>
  <head></head>
  <body>
    {{hostname}}
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:24:08.923

Express 没有任何原生支持缓存服务器端，只需添加标头/标签来告诉您的客户端浏览器缓存 x 秒，因此要缓存服务器端，您需要在每个路由中自己实现它。

我建议使用诸如 Redis 或 Memcached 之类的键/值服务器来保存缓存，因为它们既简单又可扩展，如果需要的话。

在这个例子中，我将使用一个名为`cachey`（完全公开：我写的）的 NPM 模块

```
var express = require("express");
var app = express();
var redis = require('redis').createClient();
var cachey = require('cachey')(redis);

app.get("/", function (req, res, next) {
  // Arg 1: Key to save data under in Key/Value Store
  // Arg 2: Time To Live (In Seconds)
  // Arg 3: getData Function (returning via async callback "cb") This will be called if data isn't already cached
  // Arg 4: doWork Function / When the data is returned from cache or getData(), this is called providing the data
  cachey.cache("renderedHomepage", 10, function(cb) {
    cb(null, app.render("home.html"));
  }, function(err, homepageHTML) {
    res.send(homepageHTML);
  });
}); 
```

老实说，这个例子毫无意义，因为它只有在生成数据比从缓存中接收数据需要更长的时间时才值得缓存，但希望它向您展示了如何在 NodeJS、Express 和 Redis 中执行此操作的结构。

Cachey 链接：[NPM](https://npmjs.org/package/cachey) [GitHub](https://github.com/bencevans/node-cachey) ExpressJS 链接：[API Docs](http://expressjs.com/api.html)

# .htaccess - htaccess mod 用可选的斜杠重写

> ID：11630988
> 
> 赞同：0
> 
> 时间：2012-07-24T12:34:22.987
> 
> 标签：.htaccess

我们正在从旧站点切换到具有更好的 SEO 网址的新站点。我正在尝试这样做：

```
RewriteRule ^products/boots/materialid/(.*)/colour/(.*)$ http://www.mydomain.com/boots/$2/$1 [R=301,L] 
```

然而问题是：

`(.*)`1）我可以指定它可以包含以下字符而不是使用

*   任何字母数字字符`a-zA-Z0-9`
*   任何欧元字符，例如德语特殊 UTF8 字符
*   `_`和`-`符号
*   也可以包含一个`+`符号（例如黑色+皮革）

2）如果上述方法不起作用，并且就我对此的一般知识而言，我如何更新上述内容以便尾随斜杠是可选的？例如对于上述规则，去

```
www.mydomain.com/materialid/leather/colour/blue/ 
```

送我到

```
www.mydomain.com/blue//leather 
```

额外的斜线是因为原始 URL 中“蓝色”之后的斜线，但我需要排除它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T13:00:32.040

试试这个：

```
RewriteRule ^products/boots/materialid/([^/]*)/colour/([^/]*)/?$ http://www.mydomain.com/boots/$2/$1 [R=301,L] 
```

`[^/]`匹配任何不是斜线的字符。 `/?`表示可选的尾部斜杠（注意它在捕获括号之外，因此它不会包含在重写的 URL 中）。

**编辑**

根据您的评论，添加可选的 /index.php：

```
RewriteRule ^products/boots/materialid/([^/]*)/colour/([^/]*)(/|/index\.php)?$ http://www.mydomain.com/boots/$2/$1 [R=301,L] 
```

# powerpoint - PowerPoint幻灯片内文本区域上的滚动条

> ID：11630991
> 
> 赞同：2
> 
> 时间：2012-07-24T12:34:30.907
> 
> 标签：powerpoint

我想在 ppt 幻灯片中添加滚动条。我有microsoft office 2007。我已经搜索并知道我必须添加activex 控件。有人可以提供完整的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:45:18.743

在 Office 2007 中添加 ActiveX 控件工具箱，请按照以下步骤操作： 1\. 转到文件 -> 选项 2\. 选择自定义功能区 3\. 在从下拉列表中选择命令中选择所有命令 4\. 添加“控件”和“控件属性”和节省

现在您将能够在功能区中看到两个新选项，单击 Control -> Select Text Box 在幻灯片上绘制文本框，

选择此文本框并单击控件属性

将 Multiline 更改为 True 并将 ScrollBar 更改为您想要的值。

你将能够做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:41:44.857

您可以添加一个启用滚动条的文本框控件，如 Kris Selbekk 所述，或者添加一个独立的滚动条控件。两者都可以在默认情况下不可见的“开发人员”选项卡中找到。您可以启用 PowerPoint 选项中的选项卡，请参阅此处的操作方法：http: [//msdn.microsoft.com/en-us/library/bb608625.aspx](http://msdn.microsoft.com/en-us/library/bb608625.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:34:41.017

经过大量搜索后，我终于发现演示文稿中没有滚动条。我终于使用动画来产生这种效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-21T06:45:35.690

[http://www.ispringsolutions.com/articles/add-scroll-text-to-powerpoint.html](http://www.ispringsolutions.com/articles/add-scroll-text-to-powerpoint.html)

这很好用，同时让您的演示文稿可以在网络上使用。但它确实需要第三方软件。

（编辑：感谢您的指导性评论，伙计们。这里有一些关于该程序的更多信息。）

首先，您只需在 MS Word 中编写所需的文本并应用与您的 PPT 幻灯片相匹配的配色方案。然后，保存文档：**文件 → 保存 → 网页，已过滤**

准备好 HTML 文件后，您可以使用第 3 方 PowerPoint 插件。iSpring Pro 是提供此解决方案的最实惠的选择。安装后，您的 PowerPoint 工具栏/功能区上将出现一个新选项卡。单击**iSpring Pro**选项卡，然后单击**Web 对象**。左上角的下拉菜单将提供“Web 地址”和“本地路径”两个选项：选择“本地路径” **，**然后将路径粘贴到刚刚保存的 HTML 文件中。确保选中**显示在幻灯片**中，单击确定，然后对象占位符将出现在幻灯片上。根据您的规格调整尺寸。如果文本很多，滚动条会在您发布后自动出现。你可以点击**预览**在 iSpring Pro 功能区上查看结果。当您准备好发布时，单击**发布**。我建议**组合（Flash+HTML5）**以获得最佳质量/兼容性。

（旁注：显然，将网络对象添加到 PPT 幻灯片的能力远远超出了可滚动的文本框。我邀请您尝试各种本地和基于网络的资源！）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-10T13:04:00.360

我在[http://answers.microsoft.com/en-us/office/forum/office_2003-powerpoint/can-i-insert-a-scrolling-text-box-that-is-manually/fcece4ff-b340-找到了这个46dd-a3fe-0c11e08605b1](http://answers.microsoft.com/en-us/office/forum/office_2003-powerpoint/can-i-insert-a-scrolling-text-box-that-is-manually/fcece4ff-b340-46dd-a3fe-0c11e08605b1)。

> 查看 - 工具栏 - 控制工具箱 - 单击文本框按钮。用鼠标拖动所需的大小框。
> 
> 单击属性按钮，单击 MultiLine 并选择 true。
> 
> 单击 EnterKey 行为，更改为 true。
> 
> 单击滚动条并进行相应更改，如果您想要水平和垂直滚动条，请选择 3。
> 
> 关闭属性窗口。
> 
> 开始您的节目单击文本框并输入甚至粘贴您的文本。如果文本超过您在滚动条中放置的高度，则会出现。

不知道它是否有效，因为它似乎仅限 PC 并且我是 Mac 用户。但是，任何有兴趣的人都可以尝试并让原始海报知道。

# git - GitHub 网络软件版本

> ID：11630996
> 
> 赞同：2
> 
> 时间：2012-07-24T12:34:46.257
> 
> 标签：git, github

GitHub 的网络很棒，但速度很慢，有时因为更新不够快而不太可靠。

有没有它的软件版本？官方客户端好像没有。而且命令行也没有那么美观和实用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:41:00.367

AFAIK Github 界面虽然非常漂亮，但并未开放。

如果您想托管包含基于 Web 的界面的 Git，我建议您将 Gitweb 与 Gitolite 结合使用。在此处查看 Gitweb 的演示：http: [//git.kernel.org/](http://git.kernel.org/)