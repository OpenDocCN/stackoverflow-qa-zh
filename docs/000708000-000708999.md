# StackOverflow 问答 000708000-000708999

# java - 是否可以检查可能是未初始化的变量？

> ID：708000
> 
> 赞同：0
> 
> 时间：2009-04-02T01:45:40.040
> 
> 标签：java, variables, initialization

我正在研究一种递归方法...

```
public BinaryTree<T> TreeMirror ( BinaryTree<T> tree ) {
   BinaryTree mirror = new BinaryTree();
   mirror = clone(tree);
   ...
   TreeMirror(...)
   ...
} 
```

我不希望该方法在每个递归步骤中`mirror`引用不同的对象，也不希望在第一次迭代后重复该语句。我想知道是否可以进行 if 语句检查以查看 的实例是否已被初始化——在这种情况下将跳过and语句。`BinaryTree``mirror = clone(tree)``mirror``mirror = new BinaryTree()``mirror = clone(tree)`

如果不将`mirror`参数作为参数传递给方法或在类定义中定义它，我认为这是不可能的……但我想确定一下。

非常感谢任何建议。

- - - - -编辑 - - - - - -

我不允许更改方法签名，因此我无法在我的实现中传递对象。我可以创建镜像树，但只能通过将原始树修改为镜像，这是我想尽量避免的。我试图创建一个新`BinaryTree`对象，它是传入的原始树的镜像，但实际上无法弄清楚如何递归地执行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T01:51:03.880

很少看到像这样的公共递归函数。更好的解决方案可能是使用创建对象的公共方法，然后调用一个私有函数，该函数是递归的，只进行必要的更改。

通常很难让递归函数签名与您想向客户展示的内容相匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T01:49:33.057

镜像变量是方法的本地变量，并且总是在每次调用中都被初始化。

将 mirror 作为参数传递给该方法是一个非常好的选择。

编辑：如果你不能修改方法签名，你可以创建一个私有方法并调用它来执行递归吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T04:16:29.677

Uri 的答案是最好的......将其重构为私有方法并简单地初始化镜像，然后调用私有（recrsive）方法将镜像作为参数传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T01:50:38.140

“如果不将镜像作为参数传递给方法或在类定义中定义它，我认为这是不可能的……但我想确定一下。”

正确，这将是做你想做的事情的一种方法，因为镜像不是递归不变量。

另一种方法是您的递归算法仅克隆节点，而不是整个子树。

# apache2 - Apache 如何确定 FQDN？

> ID：708005
> 
> 赞同：3
> 
> 时间：2009-04-02T01:50:56.207
> 
> 标签：apache2, hostname, fqdn

我正在使用 Apache2，在重新加载/重新启动服务器时，我收到以下警告：

`apache2: Could not reliably determine the server's fully qualified domain name, using (my FQDN) for ServerName`

一切正常，但我试图找出导致错误的原因。我正在抓取源代码以查看是否可以找到它，但是由于我的 C 不是很好....

一些注意事项：

*   如果我更改系统主机名，Apache 将使用新主机名
*   我`ServerName`有一套；它与主机名相同
*   我有一个静态的唯一 IP -`dig (hostname)`返回（我的 ip），`dig -x (my ip)`返回（主机名）
*   我的主机文件是正确的

版本：

```
阿帕奇/2.2.9
Linux 2.6.24-23-xen x86_64
描述：Debian GNU/Linux 5.0 (lenny)

```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-02T02:37:30.697

你确定你有一个`ServerName`具有正确值的指令 - 在任何`<VirtualHost>`块之外？（当然，您还需要`ServerName`在每个`<VirtualHost>`块内都有一个）

当 Apache 发出该错误消息时，通常意味着它没有`ServerName`为整个服务器找到一个。如果您确实正确设置了该指令，我无法想象为什么 Apache 仍然会抱怨......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-17T09:32:37.390

在 Debian 上，主机名是在启动时设置的，这要归功于脚本 /etc/init.d/hostname.sh 使用文件 /etc/hostname。我们可以使用此文件来更新计算机主机名及其 FQDN（完全限定域名）。

如果`ServerName`在您的虚拟主机中是 my-computer.my-domain.ext，请确保在 /etc/hosts 中复制准确的名称

**注意：**在 /etc/hosts 文件中，必须遵守主机名和 FQDN 顺序。首先是 fqdn，然后是主机名和 localhost。

```
~$ echo "my-computer" > /etc/hostname
~$ echo "127.0.0.1 my-computer.my-domain.ext my-computer localhost" > /etc/hosts
~$ /etc/init.d/hostname.sh 
```

您可以使用以下几行检查更改：

```
~$ hostname
my-computer
~$ hostname --fqdn
my-computer.my-domain.ext 
```

旧的主机名可能仍会出现在命令行提示符中。只需注销然后登录即可使其消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-28T20:31:07.590

有关在 debian 上设置主机名和 FQDN 的更多信息（这也可以防止警告），请查看： http: [//movealong.org/hostname.html](http://movealong.org/hostname.html)

# c++ - 与构造函数/析构函数定义相关的c ++编译错误

> ID：708008
> 
> 赞同：26
> 
> 时间：2009-04-02T01:53:07.573
> 
> 标签：c++, constructor, destructor

我正在尝试定义我的类的构造函数和析构函数，但我不断收到错误消息：

> 隐式声明的 'x::x()' 的定义

这是什么意思？

部分代码：

```
///Constructor
StackInt::StackInt(){
    t = (-1);
    stackArray = new int[20];
};

///Destructor
StackInt::~StackInt(){
    delete[] stackArray;
} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-04-02T02:03:17.797

在类声明中（可能在头文件中），您需要具有如下所示的内容：

```
class StackInt {
public:
    StackInt();
    ~StackInt();  
} 
```

为了让编译器知道您不想要默认的编译器生成的版本（因为您正在提供它们）。

声明可能会比这更多，但你至少需要这些——这会让你开始。

您可以使用非常简单的方法看到这一点：

```
class X {
        public: X();   // <- remove this.
};
X::X() {};
int main (void) { X x ; return 0; } 
```

编译它并且它工作。然后删除带有注释标记的行并再次编译。你会看到你的问题出现了：

```
class X {};
X::X() {};
int main (void) { X x ; return 0; } 
```

```
`qq.cpp:2: error: definition of implicitly-declared `X::X()'` 
```

* * *

 `## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:22:35.657

要记住的另一件事是构造函数访问的所有内容都必须是公共的。我以前收到过这个错误。

```
class X{
   T *data;
 public:      // <-move this to include T *
   X();
   ~X();
} 
```

这段代码仍然有错误，因为在我的构造函数中我有以下内容：

```
X::X(){data = new T(); 
```

这意味着虽然我将构造函数和析构函数设为公开，但它们使用的数据仍然是私有的，并且我仍然得到“隐式声明的定义”错误。

# design-patterns - 策略模式的这种变体有名称吗？

> ID：708009
> 
> 赞同：1
> 
> 时间：2009-04-02T01:53:28.633
> 
> 标签：design-patterns

我有一个标准的 GOF 策略模式：客户端代码包含对 AbstractStrategy 的引用，它指向派生自或实现 AbstractStrategy 的几个 ConcreteStrategies 中的任何一个。

一个 ConcreteStrategy 委托给其他几个 ConcreteStrategies 中的任何一个，具体取决于其传递的参数，例如：

```
public class ConcreteStrategy0 {
public void doStrategy(SomeType someData) {
   switch( somefunc(someData ) {
    case 0: ConcreteStrategy1.singleton.doStrategy(someData); break; 
    case 1: ConcreteStrategy2.singleton.doStrategy(someData); break;
    default: ConcreteStrategy3.singleton.doStrategy(someData); break;
   }
} 
```

这不是一个 Coplien 信封/信函（因为意图并不完全相同）。

但它有名字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-03T13:08:29.043

这似乎是一种**[反模式](http://en.wikipedia.org/wiki/Anti-pattern)**；*对具体*`doStrategy`策略了解太多，每当添加新的具体策略时，您都必须更新.*`doStrategy`*

 *上面的代码违反了[开放/封闭原则](http://en.wikipedia.org/wiki/Open_Closed_Principle)，我想知道它是否可以命名或为上面命名`code`。

**经过思考**：打电话的时候`ConcreteStrategy0.doStrategy`，你基本上是这样称呼它的

```
new ConcreteStrategy0().doStrategy(someData); 
```

虽然它可以更好地重构为

```
// Inject strategy: Delegate object creation to a factory
new ConcreteStrategy0().doStrategy(StrategyFactory.Create(), someData);

// And update "doStrategy" to,
public void doStrategy(IStrategy strategy, SomeType someData)
{
    strategy.singleton.doStrategy(someData);
} 
```

或者将响应完全委托给策略，

```
// OR Let the strategy do stuff instead
StrategyFactory.Create().doStrategy(someData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T18:31:11.490

它看起来像策略和[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)模式的组合。我怀疑它有自己的名字。但是为什么你真的需要 switch 语句呢？我认为[抽象工厂模式](http://en.wikipedia.org/wiki/Abstract_factory_pattern)在这里会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T20:48:28.403

对我来说，它看起来像一个调度程序：它接受一个请求，并根据一些参数决定将它重定向到哪个处理程序。

我同意按原样执行违反了开放封闭原则（添加新策略时会发生什么？）。更好的解决方案是（使用弹簧配置）：

```
<bean id="client" class="...">
  <property name="strategy" ref="dispatcherStartegy"/>
</bean>
<bean id="dispatcherStartegy" class="...">
  <property name="strategies">
    <map>
      <entry key="0" ref="concreteStrategy1"/>
      <entry key="1" ref="concreteStrategy2"/>
    </map>
  </property>
  <property name="fallbackStrategy" ref="concreteStrategy3"/>
</bean>
<bean id="concreteStrategy1" ... />
<bean id="concreteStrategy2" ... />
<bean id="concreteStrategy3" ... /> 
```

课程如下：

```
class Client {
  Strategy strategy;
  public void setStrategey(Strategy strategy {... }
  public void doSomething(...) {
    ...
    strategy.doStrategy(...);
    ...
  }
}

class DispatcherStrategy implements Strategy {
  Map<Integer,Strategy> strategies;
  Strategy fallbackStrategy;
  ... getters, setters ...
  public void doStrategy(...) {
    Strategy s  = strategies.get(keyFromArguments);
    if ( s==null ) {
      s = fallbackStrategy
    }
    s.doStrategy(...)
  }
} 
```

通过这种方式，策略的任何更改都只会更改应用程序的配置，而不是代码。

# android - 如何在Android中声明全局变量？

> ID：708012
> 
> 赞同：606
> 
> 时间：2009-04-02T01:54:30.160
> 
> 标签：android, singleton, global-variables, state

我正在创建一个需要登录的应用程序。我创建了主要活动和登录活动。

在主要活动`onCreate`方法中，我添加了以下条件：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ...

    loadSettings();
    if(strSessionString == null)
    {
        login();
    }
    ...
} 
```

登录表单终止时执行的`onActivityResult`方法如下所示：

```
@Override
public void onActivityResult(int requestCode,
                             int resultCode,
                             Intent data)
{
    super.onActivityResult(requestCode, resultCode, data);
    switch(requestCode)
    {
        case(SHOW_SUBACTICITY_LOGIN):
        {
            if(resultCode == Activity.RESULT_OK)
            {

                strSessionString = data.getStringExtra(Login.SESSIONSTRING);
                connectionAvailable = true;
                strUsername = data.getStringExtra(Login.USERNAME);
            }
        }
    } 
```

问题是登录表单有时会出现两次（该`login()`方法被调用两次）并且当手机键盘滑动时登录表单再次出现，我猜问题是变量`strSessionString`。

有谁知道如何设置变量 global 以避免在用户已经成功验证后出现登录表单？

* * *

## 回答 #1

> 赞同：963
> 
> 时间：2009-04-02T04:34:27.543

我在 09 年写了这个答案，当时 Android 相对较新，Android 开发中有许多尚未完善的领域。我在这篇文章的底部添加了一个很长的附录，解决了一些批评，并详细说明了我对使用单例而不是继承应用程序的哲学分歧。阅读它需要您自担风险。

**原始答案：**

您遇到的更普遍的问题是如何跨多个活动和应用程序的所有部分保存状态。静态变量（例如，单例）是实现此目的的常见 Java 方法。然而，我发现，在 Android 中一种更优雅的方式是将您的状态与应用程序上下文相关联。

如你所知，每个Activity也是一个Context，是最广义上关于其执行环境的信息。您的应用程序也有一个上下文，Android 保证它将作为单个实例存在于您的应用程序中。

这样做的方法是创建您自己的[android.app.Application](http://developer.android.com/reference/android/app/Application.html)子类，然后在清单的应用程序标记中指定该类。现在 Android 将自动创建该类的一个实例，并使其可用于您的整个应用程序。`context`您可以使用该方法从任何地方访问它`Context.getApplicationContext()`（`Activity`还提供了一个`getApplication()`具有完全相同效果的方法）。以下是一个极其简化的示例，需要注意以下事项：

```
class MyApp extends Application {

  private String myState;

  public String getState(){
    return myState;
  }
  public void setState(String s){
    myState = s;
  }
}

class Blah extends Activity {

  @Override
  public void onCreate(Bundle b){
    ...
    MyApp appState = ((MyApp)getApplicationContext());
    String state = appState.getState();
    ...
  }
} 
```

这与使用静态变量或单例的效果基本相同，但可以很好地集成到现有的 Android 框架中。请注意，这不适用于跨进程（如果您的应用程序是少数具有多个进程的应用程序之一）。

从上面的例子中需要注意的一点；假设我们做了类似的事情：

```
class MyApp extends Application {

  private String myState = /* complicated and slow initialization */;

  public String getState(){
    return myState;
  }
} 
```

现在这个缓慢的初始化（比如打磁盘、打网络、任何阻塞等）将在每次应用程序实例化时执行！你可能会想，好吧，这个过程只有一次，无论如何我都必须支付费用，对吧？例如，正如 Dianne Hackborn 下面提到的，您的进程完全有可能被实例化 - 只是 - 处理后台广播事件。如果您的广播处理不需要这种状态，那么您可能只是白白做了一系列复杂而缓慢的操作。延迟实例化是这里的游戏名称。以下是使用 Application 的稍微复杂的方法，除了最简单的用途之外，它对任何事情都更有意义：

```
class MyApp extends Application {

  private MyStateManager myStateManager = new MyStateManager();

  public MyStateManager getStateManager(){
    return myStateManager ;
  }
}

class MyStateManager {

  MyStateManager() {
    /* this should be fast */
  }

  String getState() {
    /* if necessary, perform blocking calls here */
    /* make sure to deal with any multithreading/synchronicity issues */

    ...

    return state;
  }
}

class Blah extends Activity {

  @Override
  public void onCreate(Bundle b){
    ...
    MyStateManager stateManager = ((MyApp)getApplicationContext()).getStateManager();
    String state = stateManager.getState();
    ...
  }
} 
```

虽然我更喜欢应用程序子类化而不是在这里使用单例作为更优雅的解决方案，但我宁愿开发人员在确实需要时使用单例，而不是根本不考虑将状态与应用程序子类关联的性能和多线程影响。

**注意 1：**正如 anticafe 所评论的那样，为了正确地将您的应用程序覆盖绑定到您的应用程序，清单文件中需要一个标签。再次，请参阅 Android 文档了解更多信息。一个例子：

```
<application
     android:name="my.application.MyApp" 
     android:icon="..."
     android:label="...">
</application> 
```

**注意 2：** user608578 在下面询问这如何与管理本机对象生命周期一起工作。我丝毫没有跟上在 Android 上使用本机代码的速度，而且我没有资格回答这将如何与我的解决方案交互。如果有人对此有答案，我愿意相信他们并将信息放在这篇文章中以获得最大的知名度。

**附录：**

正如一些人所指出的，这**不是****持久**状态的解决方案，我可能应该在原始答案中更多地强调这一点。即，这并不是一种用于保存用户或其他要在应用程序生命周期中持久保存的信息的解决方案。因此，我认为下面的大多数批评与应用程序随时被杀死等有关......，没有实际意义，因为任何需要持久保存到磁盘的东西都不应该通过应用程序子类存储。它旨在成为一种解决方案，用于存储临时的、易于重新创建的应用程序状态（例如用户是否登录）和本质上是单实例的组件（例如应用程序网络管理器）（**不是**单例！）。

Dayerman 非常友好地指出了[与 Reto Meier 和 Dianne Hackborn 的一次有趣的对话，](https://plus.google.com/u/0/117230458394250799679/posts/DsfpW51Vvow)其中不鼓励使用 Application 子类，而是支持 Singleton 模式。Somatik 之前也指出了这种性质的东西，虽然我当时没有看到。由于 Reto 和 Dianne 在维护 Android 平台方面的角色，我不能真诚地建议忽略他们的建议。他们说什么，去。我确实希望不同意关于更喜欢单例而不是应用程序子类的观点。在我不同意的情况下，我将使用[StackExchange 对 Singleton 设计模式的解释中最好解释的概念](https://softwareengineering.stackexchange.com/a/40610/98638)，因此我不必在此答案中定义术语。我强烈建议在继续之前浏览链接。逐点：

Dianne 说，“没有理由从 Application 子类化。这与做一个单例没有什么不同……”第一个说法是不正确的。这有两个主要原因。1）Application类为应用开发者提供了更好的生命周期保障；它保证具有应用程序的生命周期。单例与应用程序的生命周期没有明确的联系（尽管它是有效的）。对于普通的应用程序开发人员来说，这可能不是问题，但我认为这正是 Android API 应该提供的合约类型，它还通过最小化关联的生命周期为 Android 系统提供了更大的灵活性数据。2) Application 类为应用程序开发人员提供了一个用于状态的实例持有者，这与单例状态的持有者非常不同。有关差异的列表，请参阅上面的 Singleton 解释链接。

Dianne 继续说道，“……当你发现你的应用程序对象变成了一个应该是独立应用程序逻辑的大杂烩时，你可能会后悔。” 这当然不是错误的，但这不是选择 Singleton 而不是 Application 子类的原因。Diane 的所有论点都没有提供使用 Singleton 比 Application 子类更好的理由，她试图建立的只是使用 Singleton 并不比 Application 子类差，我认为这是错误的。

她继续说，“这更自然地导致你应该如何管理这些事情——按需初始化它们。” 这忽略了这样一个事实，即您没有理由也不能使用 Application 子类按需初始化。再次没有区别。

Dianne 以“框架本身为它为应用程序维护的所有小共享数据（例如加载资源的缓存、对象池等）提供了大量的单例。它工作得很好。” 我并不是说使用 Singletons 不能正常工作或者不是一个合法的选择。我认为 Singleton 与 Android 系统之间的契约不如使用 Application 子类强，而且使用 Singleton 通常指向不灵活的设计，不易修改，并导致许多问题。恕我直言，Android API 为开发人员应用程序提供的强大合同是使用 Android 编程最吸引人和最令人愉悦的方面之一，并帮助导致早期开发人员采用，从而推动 Android 平台取得今天的成功。

Dianne 在下面也发表了评论，提到了使用 Application 子类的另一个缺点，它们可能会鼓励或更容易编写性能较低的代码。这是非常正确的，我已经编辑了这个答案以强调在这里考虑性能的重要性，如果您使用的是应用程序子类化，请采取正确的方法。正如 Dianne 所说，重要的是要记住每次加载进程时都会实例化您的 Application 类（如果您的应用程序在多个进程中运行，则可能一次多次实例化！）即使该进程只是为后台广播而加载事件。因此，重要的是更多地将 Application 类用作指向应用程序共享组件的指针的存储库，而不是用作进行任何处理的地方！

我给你留下了以下单例的缺点列表，这些缺点是从早期的 StackExchange 链接中窃取的：

*   无法使用抽象类或接口类；
*   无法子类化；
*   跨应用程序的高耦合（难以修改）；
*   难以测试（不能在单元测试中伪造/模拟）；
*   在可变状态的情况下难以并行化（需要大量锁定）；

并添加我自己的：

*   不适合 Android（或大多数其他）开发的不明确且难以管理的终身合同；

* * *

## 回答 #2

> 赞同：155
> 
> 时间：2010-07-26T20:31:08.863

创建这个子类

```
public class MyApp extends Application {
  String foo;
} 
```

在 AndroidManifest.xml 添加 android:name

**例子**

```
<application android:name=".MyApp" 
       android:icon="@drawable/icon" 
       android:label="@string/app_name"> 
```

* * *

## 回答 #3

> 赞同：142
> 
> 时间：2011-01-09T21:49:13.443

Soonil 建议的为应用程序保持状态的方法很好，但是它有一个弱点 - 在某些情况下操作系统会杀死整个应用程序进程。这是有关此[流程和生命周期](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html#Lifecycle)的文档。

考虑一个案例 - 你的应用程序进入后台，因为有人在给你打电话（电话应用程序现在在前台）。在这种情况下 && 在某些其他条件下（检查上面的链接以了解它们可能是什么）操作系统可能会终止您的应用程序进程，包括`Application`子类实例。结果，状态丢失。当您稍后返回应用程序时，操作系统将恢复其活动堆栈和`Application`子类实例，但该`myState`字段将为`null`.

AFAIK，保证状态安全的唯一方法是使用任何类型的持久化状态，例如对应用程序文件使用私有，或者`SharedPrefernces`（它最终对内部文件系统中的应用程序文件使用私有）。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2011-04-13T21:29:47.427

只是一个注释..

添加：

```
android:name=".Globals" 
```

或您将子类命名为**现有** `<application>`标签的任何内容。我一直试图`<application>`在清单中添加另一个标签，但会出现异常。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2011-02-25T18:32:51.533

那么如何确保收集具有这种全局结构的本机内存呢？

活动有一个`onPause/onDestroy()`在销毁时调用的方法，但 Application 类没有等价物。当应用程序被杀死或任务堆栈被置于后台时，建议使用什么机制来确保正确收集全局结构（尤其是那些包含对本机内存的引用）？

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2010-01-14T05:26:17.713

我也找不到如何指定应用程序标签，但经过大量谷歌搜索，从清单文件文档中可以明显看出：除了应用程序节中的默认图标和标签外，还使用 ​​android:name。

android:name 为应用程序实现的应用程序子类的完全限定名称。当应用程序进程启动时，这个类在应用程序的任何组件之前被实例化。

子类是可选的；大多数应用程序不需要一个。在没有子类的情况下，Android 使用基础 Application 类的实例。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2011-01-07T05:57:56.413

只需要定义一个如下所示的应用程序名称即可：

```
<application
  android:name="ApplicationName" android:icon="@drawable/icon">
</application> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2011-04-20T07:32:17.910

如果某些变量存储在 sqlite 中，并且您必须在应用程序的大多数活动中使用它们。那么应用程序可能是实现它的最佳方式。应用程序启动时从数据库中查询变量并将它们存储在字段中。然后你可以在你的活动中使用这些变量。

所以找到正确的方法，并没有最好的方法。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-11-02T08:53:25.603

就像上面讨论的那样，操作系统可以在没有任何通知的情况下终止应用程序（没有 onDestroy 事件），因此无法保存这些全局变量。

SharedPreferences 可能是一个解决方案，除非您有 COMPLEX STRUCTURED 变量（在我的情况下，我有整数数组来存储用户已经处理过的 ID）。SharedPreferences 的问题在于每次需要值时都很难存储和检索这些结构。

就我而言，我有一个后台 SERVICE，因此我可以将这些变量移到那里，并且因为该服务具有 onDestroy 事件，我可以轻松地保存这些值。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-04-02T02:19:44.217

你可以有一个静态字段来存储这种状态。或者将其放入资源 Bundle 并在 onCreate(Bundle savedInstanceState) 上从那里恢复。只需确保您完全了解 Android 应用程序管理的生命周期（例如，为什么 login() 会在键盘方向更改时被调用）。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-06-22T11:20:42.113

**不要**`<application>`在清单文件中 使用另一个标签。只需在现有`<application>`标签中进行一次更改，添加这一行`android:name=".ApplicationName"`，`ApplicationName`将是您即将创建的子类的名称（用于存储全局）。

所以，最后你的清单文件中的**唯一** `<application>`标记应该是这样的： -

```
<application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.AppCompat.NoActionBar"
        android:name=".ApplicationName"
        > 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-07-16T01:35:07.333

您可以使用 Intents、Sqlite 或 Shared Preferences。对于媒体存储，如文档、照片和视频，您可以创建新文件。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-12-19T13:03:07.883

您可以使用两种方法来做到这一点：

1.  使用应用程序类
2.  使用共享首选项

3.  使用应用程序类

例子：

```
class SessionManager extends Application{

  String sessionKey;

  setSessionKey(String key){
    this.sessionKey=key;
  }

  String getSessisonKey(){
    return this.sessionKey;
  }
} 
```

您可以使用上面的类在您的 MainActivity 中实现登录，如下所示。代码将如下所示：

```
@override 
public void onCreate (Bundle savedInstanceState){
  // you will this key when first time login is successful.
  SessionManager session= (SessionManager)getApplicationContext();
  String key=getSessisonKey.getKey();
  //Use this key to identify whether session is alive or not.
} 
```

此方法适用于临时存储。由于内存不足，您真的不知道操作系统何时会杀死应用程序。当您的应用程序处于后台并且用户正在浏览需要更多内存才能运行的其他应用程序时，您的应用程序将被终止，因为操作系统对前台进程的优先级高于后台进程。因此，在用户注销之前，您的应用程序对象将为空。因此，为此我建议使用上面指定的第二种方法。

2.  使用共享偏好。

    ```
    String MYPREF="com.your.application.session"

    SharedPreferences pref= context.getSharedPreferences(MyPREF,MODE_PRIVATE);

    //Insert key as below:

    Editot editor= pref.edit();

    editor.putString("key","value");

    editor.commit();

    //Get key as below.

    SharedPreferences sharedPref = getActivity().getPreferences(Context.MODE_PRIVATE);

    String key= getResources().getString("key"); 
    ```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-07-17T10:31:46.187

```
class GlobaleVariableDemo extends Application {

    private String myGlobalState;

    public String getGlobalState(){
     return myGlobalState;
    }
    public void setGlobalState(String s){
     myGlobalState = s;
    }
}

class Demo extends Activity {

@Override
public void onCreate(Bundle b){
    ...
    GlobaleVariableDemo appState = ((GlobaleVariableDemo)getApplicationContext());
    String state = appState.getGlobalState();
    ...
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-10-11T07:36:48.110

在恢复之前调用活动结果。因此，将您的登录检查移到简历上，一旦第二次活动返回肯定结果，您的第二次登录就会被阻止。On resume 每次都会被调用，所以不用担心它不会被第一次调用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-11-11T13:01:09.300

BARACUS 框架也使用了子类化方法。从我的角度来看，**子类**化Application 旨在与 Android 的生命周期一起工作；这就是**任何**应用程序容器所做的。然后我没有使用全局变量，而是将 bean 注册到这个上下文中，然后让它们被注入到上下文可管理的任何类中。每个注入的 bean 实例实际上都是一个单例。

[有关详细信息，请参阅此示例](http://baracusframework.blogspot.de/2013/10/baracus-from-scratch-part-2-defining.html)

如果你能拥有这么多，为什么还要手工工作？

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-11-28T13:05:10.287

您可以创建一个扩展`Application`类的类，然后将您的变量声明为该类的字段并为其提供 getter 方法。

```
public class MyApplication extends Application {
    private String str = "My String";

    synchronized public String getMyString {
        return str;
    }
} 
```

然后要在您的活动中访问该变量，请使用以下命令：

```
MyApplication application = (MyApplication) getApplication();
String myVar = application.getMyString(); 
```

# asp.net - 来自不同 *.aspx.cs 页面的 Asp.Net 调用函数

> ID：708013
> 
> 赞同：1
> 
> 时间：2009-04-02T01:54:44.480
> 
> 标签：asp.net, function, redirect

如果我在一页中有一个按钮，例如“main.aspx”。在被点击后，我希望“main.aspx.cs”中的点击方法从不同的 *.aspx.cs 页面调用函数，但也重定向到该 *.aspx 页面......这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T03:25:35.557

您正在尝试做的更具体的示例将很有用。否则你会得到各种各样的答案，其中很多都是不合时宜的。

您应该将通用代码放在 App_Code 文件夹中。您也不应该在表单代码隐藏中包含任何业务逻辑。

您需要一个页面来调用另一个页面中的方法这一事实表明您还没有这样做。页面用于显示和解释操作，但它们不应包含任何业务逻辑。

例如购物车的蹩脚示例。

```
    ProductView.aspx - 调用 Cart.AddToCart(Product p)
    CartView.aspx - 显示购物车中的所有商品以及用户
                    可以更新或删除项目。
        - 调用 Cart.RemoveItem(int cartIndex)
        - 调用 Cart.UpdateItem(int cartIndex, int newItemCount)

```

购物车本身不属于 CartView.aspx 或 ProductView.aspx。相反，它属于`~/App_Code/Cart.cs`

所以你的解决方案可能看起来像

```
/（您的网络文件夹的根目录）
 产品/
          产品视图.aspx
          ProductView.aspx.cs

 大车/
          购物车视图.aspx
          CartView.aspx.cs

 App_Code/
          购物车.cs
          产品.cs

```

此外，若要添加 App_Code 文件夹（如果它尚不存在），请右键单击 Web 项目并选择`Add ASP.NET folder`并选择`App_Code`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T03:11:50.160

您需要了解 ASP.NET 页面生命周期，然后您就会明白为什么这不是 Kosher。如果你真的需要从多个页面调用一个方法，这听起来像是一些外部类/对象的好选择。

或者，您可以设置一个会话标志，然后重定向到这个新页面，而不是使用查询字符串参数。然后在调用该页面的方法时清除会话标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T03:40:52.727

以一种非常基本的方式，用于在查询字符串上`Main.aspx`转到`Other.aspx`并传递一些少量数据以指示操作。

主.aspx

```
protected void OnSomeButtonClicked(object sender, EventArgs e)
{
  if( someCondition )
  {
    Response.Redirect("~/Other.aspx?action=runAway");
  }
} 
```

在其他.aspx

```
protected void Page_Load(object sender, EventArgs e)
{
  if( !IsPostBack )
  {
    if( "runAway".Equals(Request.QueryString["action"] )
    {
      RunAway();
    }
  }
} 
```

您还应该阅读[Server.Transfer 与 Response.Redirect](http://www.developer.com/net/asp/article.php/3299641)。使用哪一个取决于情况。

另请注意，用户可以轻松更改 QueryString 参数，因此请始终验证它们并且永远不要信任用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T05:04:43.947

从您的其他页面类实例化一个对象并调用该方法。

```
protected Button1_Clicked(Sender s, Eventargs e){
        MyNamespace.Page_Other po = new MyNamespace.Page_Other();
        po.Method1();
        Response.Redirect("~/page_other.aspx");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T02:01:00.533

为什么不直接使用查询字符串参数进行重定向，然后在目标页面上执行该函数？

# php - 请教一下mysql_pconnect

> ID：708015
> 
> 赞同：0
> 
> 时间：2009-04-02T01:55:25.587
> 
> 标签：php, mysql

我阅读了PHP函数的mysql_pconnect的规范。“mysql_pconnect是即使脚本的练习完成也不会关闭与SQL服务器的连接”。

除非连接关闭，否则它会一直存在，但是连接会一直持续到重新启动mysql的时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T02:24:15.783

我想，我可能错了，但是...

我认为 pconnect 是一个持久连接，不是为了运行脚本，而是在 PHP 会话/MySQL 会话期间，无论正在运行哪个脚本，PHP 都会维护一个套接字连接。有点像在 word 中打开多个文档而不是运行多个记事本实例。通过使用公共数据库链接，不需要创建单个链接的处理能力。

但是，在阅读之后，我认为如果 PHP 作为 Apache 模块运行，而不是在 CGI 模式下运行，这似乎是有益的。

告诉我我的错误信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T23:19:38.503

`mysql_pconnect`允许 Apache 的 mod_php 模块进行连接池。您仍然可以调用`mysql_close`，但 mod_php 不会真正关闭它；它只会使您的资源句柄无效。不幸的是，该模块对此没有任何配置，因此 MySQL 服务器通过其`wait_timeout`参数获取池连接。它的默认值非常高，因此如果您想利用它，您可能需要降低该变量。

连接池节省了两件事：连接设置和 MySQL 线程创建。与其他数据库相比，使用 MySQL 的连接设置非常快，但是需求量很大的网站仍然可以从减少此步骤中受益。MySQL 中创建线程的成本更多地取决于底层操作系统，但对于繁忙的站点来说，它仍然是一个胜利。

这两个方面都需要从网站速度和它在数据库中呈现的负载的大局来看。使用连接池的站点足够繁忙，可能会耗尽数据库上的连接线程。还有一个方面是您的应用程序需要尽最大努力使连接保持一致状态，因为您不能再依赖关闭连接来执行解锁表和回滚事务等操作。

[PHP 文档](http://www.php.net/manual/en/features.persistent-connections.php)中有更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T02:15:11.123

是的，但你**不能**使用[mysql___close](http://www.php.net/manual/en/function.mysql-close.php)来关闭它。

[当您重新启动 mysql 服务器时，或者当连接在配置变量wait_timeout](http://jayant7k.blogspot.com/2007/07/mysql-waittimeout.html)中定义的特定时间段内保持空闲（未使用）时，它将关闭。

# php - PHP 文件名（或其完整路径中的目录）可以包含 UTF-8 字符吗？

> ID：708017
> 
> 赞同：12
> 
> 时间：2009-04-02T01:56:06.270
> 
> 标签：php, apache, unicode, utf-8, url-rewriting

我想访问一个名称中包含 UTF-8 字符的 PHP 文件。

该文件中没有 BOM。它只包含一个显示几个 unicode 字符的 echo 语句。

从浏览器（FireFox 3.0.8、IE7）访问 PHP 页面会导致 HTTP 错误 500。

Apache 日志中有两个条目（文件是 /க.php；字母 க 是一个复合条目，对应于下面日志中的字符 \xe0\xae\x95）：

[Sat Apr 04 09:30:25 2009] [error] [client 127.0.0.1] PHP Warning: Unknown: failed to open stream: No such file or directory in Unknown on line 0

[2009 年 4 月 4 日星期六 09:30:25] [错误] [客户端 127.0.0.1] PHP 致命错误：未知：打开失败需要 'D:/va/ROOT/\xe0\xae\x95.php'（include_path=' .;C:\php5\pear') 在第 0 行的未知中

当文件和目录名称为英文时，相同的页面有效。在相同的设置中，对这些页面使用 SSI 没有问题。

*编辑*

删除了有关 url 重写的信息，因为它似乎不是一个因素。

移除 mod_rewrite 后，PHP 文件仍然无法工作。如果文件重命名为非 UTF 名称，则有效。但是，shtml 甚至可以在文件和/或路径名中使用 UTF 字符。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-12-11T12:01:04.740

我遇到了同样的问题并做了一些研究并得出以下结论。这适用于 Windows 上的 php5；在其他平台上可能是这样，但我没有检查过。

1.  所有 php 文件系统函数（dir、is_dir、is_file、file、filemtime、filesize、file_exists 等）仅接受和返回 ISO-8859-1 中的文件名，而与程序或 ini 文件中设置的 default_charset 无关。

2.  如果文件名包含 unicode 字符 dir->read 将返回它作为相应的 ISO-8859-1 字符（如果有），否则将替换为问号。

3.  在引用文件时，例如在 is_file 或文件中，如果您传入一个 UTF-8 文件名，则当该文件名包含任何两个字节或更多字符时，将找不到该文件。但是，如果 UTF-8 字符可以在 ISO-8859-1 中表示，is_file(utf8_decode($filename)) 等将起作用。

换句话说，PHP5 根本无法处理名称中包含多字节字符的文件。

如果请求带有多字节字符的 UTF-8 URL，并且它直接对应于文件，PHP 将无法打开该文件，因为它无法寻址。

如果您只是想要您的语言中漂亮的 URL，那么使用 mod_rewrite 的建议似乎是一个不错的选择。

但是，如果您正在存储和检索用户上传和下载的文件，则必须解决此问题。一种方法是在服务器上使用任意（非 UTF-8）文件名，例如递增的数字，并索引数据库或 XML 文件等中的文件。另一种方法是将文件作为 BLOB 存储在数据库本身中。另一种方法（这可能更容易看到发生了什么，并且如果您的索引损坏也不会出现问题）是自己编码文件名 - 一个好的技术是在存储在服务器上时对所有传入的文件名进行 urlencode（原文如此）在为下载设置 mime 标头中的文件名之前，对它们进行磁盘和 urldecode。然后，所有甚至模糊不寻常的字符（% 除外）都被编码为 %nn，因此文件名中的空格出现任何问题，

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-02T05:49:44.493

*   我知道 PHP 本身*可以*使用 Unicode URL，因为我尝试在 MediaWiki（基于 PHP，也运行 WikiPedia）中使用 Unicode 页面名称并且它确实有效。例如，/index.php/Page_name© 等 URL。所以PHP可以处理它。但是 Apache 查找源文件具有 UTF-8 名称的文件可能是个问题。

*   字符编码的 PHP.ini 设置不应该影响这一点；Web 服务器的工作是查找特定资源，然后在确定它是 PHP 文件后调用 PHP。这意味着 Web 服务器和底层文件系统本身必须能够处理 UTF-8 文件名。

*   没有 mod_rewrite 规则它可以工作吗？即，如果您在关闭 RewriteEngine 的情况下禁用重写引擎，然后请求 va.in/utf_dir/utf_file.php？如果是这样，则可能是 mod_rewrite 配置问题或规则问题。

*   当您只输入地址时，某些浏览器可能无法正确支持 URL 中的 Unicode，例如旧版浏览器。较旧的浏览器可能会跳过 UTF-8 编码步骤。但是，如果您正在关注页面上的链接，这不应该阻止它工作，但该页面是 UTF-8 编码的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-02T02:31:23.643

仅仅因为字符集是 UTF-8 并不意味着它支持 Unicode 的所有高级字符。

Unicode 支持是 PHP 6 中的主要新增功能之一，而 PHP 5 因缺乏 Unicode 支持而臭名昭著。

如果您的 PHP 脚本正在生成链接，则与 apache 直接解释 url 并重定向它可能是不同的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-05T13:51:59.297

不可以。PHP 文件名必须是 ASCII 格式，无论您如何设置服务器 PHP5 都无法应对，所以我们等待 PHP 6。在 PHP 脚本中，您可以使用 utf8_decode 处理 utf-8 文件名/url。您可以使用 .htaccess 和 SQL 来解决很多问题，但无法运行 unicode 文件名。

大卫厄尔的回答是正确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-22T12:09:13.050

使用“wfio://”进行复制写入等

[https://github.com/kenjiuno/php-wfio](https://github.com/kenjiuno/php-wfio)

对于文件夹：

.ht 访问：

`php_value auto_prepend_file C:/fix.php`

修复.php：

```
$file = $_SERVER['SCRIPT_FILENAME'];
if (!is_readable($file)) {
    $file="wfio://".$file;
                include $file;
                exit;
        } 
```

但更适合 php 使用 Linux OS

# php - imagecreatefromjpeg() 错误 - 为什么我的图像处理脚本失败？

> ID：708023
> 
> 赞同：1
> 
> 时间：2009-04-02T01:58:37.903
> 
> 标签：php, image-processing, image-manipulation

我目前正在使用图像处理脚本对上传的图像进行一些工作，并且在我的开发环境中遇到了问题。相同的代码适用于我的生产服务器。

错误是：

```
PHP Warning:  imagecreatefromjpeg(): php_network_getaddresses: 
  getaddrinfo failed: Name or service not known in /path/to/script.php
  on line 75 
```

75上的代码行是：

```
$this->img = imagecreatefromjpeg(PHPTHUMB."?src=/".$this->image_path); 
```

它创建一个从另一个由 phpThumb 制作的图像加载的图像，用于进一步操作。

关于如何解决这个问题的任何想法？任何人都可以阐明错误的含义吗？

谢谢，

**编辑：** 作为进一步的见解，如果我`PHPTHUMB . "?src=/" . $this->image_path`在浏览器中访问，图像加载正常

中的用户代理`php.ini`没有解决[此处所示的问题](http://www.mydigitallife.info/2006/04/21/php-5-unable-to-open-http-request-stream-with-fopen-or-fsockopen-functions/)

编辑（解决方案）：我必须将 INTERNAL 192.168.204.XXX IP 添加到主机文件中，以便[http://dev.mysite.com](http://dev.mysite.com)正确解析。尝试 127.0.0.1 和外部 IP 都没有结果，但内部工作完美。感谢大家的努力，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T02:05:58.277

我完全不确定该错误的原因，但这是我最好的猜测。

有一个特定的 PHP 设置使您能够将 URL 视为文件。我认为，通常 imagecreatefromjpeg 接受文件名。由于您传递的是 URL，因此您需要确保启用了特定设置。我相信你可以在这里找到更多信息：http: [//us2.php.net/file](http://us2.php.net/file)

> 文件名
> 
> ```
> Path to the file.
> Tip 
> ```
> 
> 如果启用了 fopen 包装器，则 URL 可以用作此函数的文件名。有关如何指定文件名和支持的协议/包装器列表的更多详细信息，请参阅 fopen() 以获取支持的 URL 协议列表。

Fopen 包装器：[http://us2.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen](http://us2.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)

您的开发环境可能没有设置，但您的生产环境可能是。

编辑

此页面列出了您的错误： [http ://bugs.php.net/bug.php?id=11058](http://bugs.php.net/bug.php?id=11058)

并提到一个可能的解决方法是修改您的主机文件以明确包含您正在访问的服务器的 ip/dns。

> 我尝试重新配置我的命名配置，但没有任何结果，以解决此问题。通过将以下行添加到我的 /etc/hosts 解决了这个问题：
> 
> 194.97.55.147 mx.freenet.de

也许你可以试试这个？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T19:34:11.820

您是否还检查了 php.ini 中的 allow_url_fopen 是否设置为 On？
我看到他们确实在您在帖子中提到的文章中提到了这一点。

**编辑：**另外，您正在运行什么操作系统和 PHP 版本？只需在[php.net](http://se.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)上阅读：

“在 PHP 4.3.0 之前的 Windows 版本上，以下函数不支持远程文件访问：include()、include_once()、require()、require_once() 和 imagecreatefromXXX 函数GD 功能扩展。”

**编辑2：**

我刚刚阅读了评论中写的内容，您的 allow_url_fopen 设置为 On，对此感到抱歉。但操作系统、PHP 版本和 phpinfo() 将有助于发现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T03:31:38.600

错误消息表明网络级别出现问题。因此，如果可能的话，绕过它。尝试使用缩略图生成器的路径，而不是网络地址。

如果这不是一个选项，请尝试一些可以为您提供更详细错误消息的方法。我建议卷曲。至少，它应该产生更多信息的错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T22:05:39.647

这失败的简单事实是因为在您的网络服务器上，您的 DNS 解析已损坏。

如果您对服务器具有 SSH 访问权限，请尝试以下命令

```
dig hostname 
```

其中 hostname 是 PHPTHUMB 中的主机名

这很可能会失败。

假设您使用的是 Linux，我的建议是编辑您的 /etc/resolv.conf（以 root 身份）

并在以“nameserver”开头的任何其他行之前添加以下行

```
nameserver 4.2.2.2 
```

这应该有望解决问题，尽管您可能必须重新启动 apache（或您正在使用的任何网络服务器）！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-07T02:20:58.613

这里的问题是 php 无法解析您提供为 PHPTHUMB 的 url，如[php.net 上的此错误报告中](http://bugs.php.net/bug.php?id=11058)所述。这可能意味着它是操作系统/Web服务器的故障，在这种情况下，您可以手动将您要连接的服务器的IP地址输入到您的[主机文件中。](http://en.wikipedia.org/wiki/Hosts_file#Location_and_default_content)

# c# - 命令行编译 Win Forms C# 应用程序

> ID：708029
> 
> 赞同：2
> 
> 时间：2009-04-02T02:04:39.043
> 
> 标签：c#, .net, compiler-construction, .net-2.0, cmd

我正在尝试创建一个脚本来从命令行编译一个 Windows Forms C# 2.0 项目（我知道，我知道..我正在重新发明轮子..再次..但如果有人知道答案，我会很感激它）。

该项目是一个标准的 Windows 窗体项目，它具有一些资源并引用了几个外部程序集。以下是文件列表：

```
    Program.cs // 无需对此进行扩展 :)
    frmMain.cs // 这是一个典型的 C# windows 窗体文件
    frmMain.designer.cs // .. 和设计器代码
    frmMain.resx // .. 和资源文件
    MyClasses.cs // 这包含几个类
    Properties\AssemblyInfo.cs // Properties 文件夹——同样非常标准
    属性\资源.Designer.cs
    属性\资源.resz
    属性\设置.Designer.cs
    属性\设置.settings
    References\AnAssembly.dll // 我从此应用程序中引用的组件

```

到目前为止，我已经确定了我需要的以下程序/工具：

```
    csc.exe // C# 编译器
    al.exe // 程序集链接器
    resgen.exe // 资源编译器

```

到目前为止，这是我的脚本：

```
    @echo 关闭
    设置输出=输出
    设置 AL=C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\al.exe
    设置 RESGEN="C:\Program Files\Microsoft Visual Studio 8\SDK\v2.0\Bin\resgen.exe"
    设置编译器=C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\csc.exe

    回声。
    回声编译器：%COMPILER%
    回声。

    如果 "%1"=="/help" 转到帮助

    ：开始
    回声开始...

    设置 REFERENCES=.\References\AReferencedll
    设置 SRCFILES=Program.cs frmMain.cs frmMain.designer.cs MyClasses.cs Properties\AssemblyInfo.cs Properties\Resources.Designer.cs Properties\Settings.Designer.cs

    德尔/Q %OUT%\*

    %RESGEN% /compile frmMain.resx,%OUT%\frmMain.resources

    光盘属性

    %RESGEN% /compile Resources.resx,..\%OUT%\Resources.resources

    光盘..

    %COMPILER% /target:module /out:%OUT%\app.module %SRCFILES% /reference:%REFERENCES%

    %AL% %OUT%\app.module /embed:%OUT%\frmMain.resources /target:winexe /out:%OUT%\app.exe /main:App.Program.Main

    完成
    ：错误
    回声 哎呀！

    ：完毕
    回声完成！！

```

最后，无论我如何旋转它，我都会从链接器中得到不同的错误，或者最终的可执行文件将无法运行 - 它崩溃了。

请帮忙（MSDN没有帮助太多..）！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-02T02:17:03.180

我喜欢为这些事情作弊。获取一个工作项目并在其上运行以下命令

```
msbuild Project.csproj /t:rebuild /clp:ShowCommandLine 
```

其输出将向您显示 msbuild 用于编译项目的命令，然后您可以根据需要对其进行修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T02:11:47.590

您不使用 msbuild 有什么原因吗？它可以在一个命令中编译任何 Visual Studio 项目/解决方案......

```
msbuild.exe <solution filename> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T02:12:59.210

只需使用[MSBuild](http://en.wikipedia.org/wiki/MSBuild)传入解决方案或项目文件。

使用 MSBuild 的最佳方式是通过 Visual Studio 命令提示符；它为您设置所有必需的环境变量。SDK 中也提供了此命令设置。

# iphone - 为什么 self.navigationItem.hidesBackButton 不起作用？

> ID：708033
> 
> 赞同：7
> 
> 时间：2009-04-02T02:06:18.307
> 
> 标签：iphone, objective-c

我有一个*UIViewController*被推送到*UINavigationController*并且当前显示。当我在视图控制器中启动一些异步任务时，我可以将**self.navigationItem**上的 hidesBackButton 设置为**YES**，并且后退按钮被正确隐藏。

一旦任务完成，我将**hidesBackButton**设置回**NO**（在 UI 线程上，我可能会添加，我已经确定了这一点），没有任何反应。后退按钮仍然隐藏。

有没有人见过这个？让我特别疯狂的是，在我的应用程序（同一个应用程序）中，在不同的*UINavigationController*层次结构中，完全相同的代码可以正常工作！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-03T07:45:41.157

你是从线程调用 hidesBackButton = NO 吗？所有 UI 操作都应该在主线程上完成，否则不会有任何效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T14:01:45.747

我无法在我的机器上复制您的问题。但是，即使我在主线程上更新我的 ui，我也面临与 tableviews 类似的问题。但调用 setNeedsDisplay 解决了这个问题。

你可以试试这个，看看这是否有效：

```
[self.navigationController.navigationBar setNeedsDisplay]; 
```

我想这应该可以，你需要做同样的事情，但是在导航栏上。请让我知道这是否有效 - 因为我无法测试我的解决方案，因为我从来没有遇到过这个问题 :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T03:33:08.457

您是否尝试过通过调用 setNeedsDisplay 来强制刷新视图？也许操作系统没有立即接受更改，您需要强制它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T05:23:28.660

您是否尝试过使用 setHidesBackButton:animated: 方法？也许这有一个稍微不同的行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-07-09T11:12:39.253

在我的情况下，我只需要给视图一个标题，如： self.navigationItem.title = @"Menu";

马里努斯

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-15T14:15:49.747

我最近遇到了类似的问题。我几乎尝试了我在 SO 和其他论坛中找到的所有内容 - 没有任何效果。

在我的例子中，有一个`UINavigationController`带有简单根控制器的模态显示，当按下按钮 A 或 B 时，它将分别将两个视图控制器（A 和 B）中的一个推送到控制器堆栈的顶部。控制器 B 是不应该显示后退按钮的控制器。但是，有时会，有时不会。

经过数小时的调试，我设法找到了它。控制器 A 是一个`UITableViewController`. 每次我在这个控制器中选择一个单元时，委托都会将控制器 A 从堆栈中弹出。但。我也使用了a `UISearchDisplayController`。事实证明，在搜索控制器仍处于活动状态时弹出视图会弄乱导航控制器中的某些内容，导致之后无法隐藏控制器 B 中的后退按钮（好吧，它最终保持隐藏在两者之间`viewDidLoad`，`viewDidAppear:`但随后它总是变得可见）。

所以解决方案（相当解决方法）是将这一行添加到控制器 A 被解雇的位置：

```
controllerA.searchDisplayController.active = NO;

// ...
// [self.navigationController popViewControllerAnimated:YES]; 
```

希望这可以节省某人几个小时。

# ruby-on-rails - 访问 POST 参数

> ID：708035
> 
> 赞同：10
> 
> 时间：2009-04-02T02:09:54.287
> 
> 标签：ruby-on-rails

当我使用脚手架创建 rails 应用程序添加新“产品”时，以下行正确添加了新产品

```
@product = Product.new(params[:product]) 
```

当我尝试使用以下 URL 添加新产品时（尝试从 java 程序中发布数据）。

```
http://localhost:3000/products?serial=555&value=111 
```

没有创建产品，但是我可以像这样访问“序列”和“值”值：

```
 @product = Product.new
 @product.serial=params[:serial]
 @product.value=params[:value]
 @product.save 
```

更让我困惑的是，如果我使用 rails 应用程序添加新产品，`params[:serial]`and`params[:value]`变量是空的。

有人可以指出我正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-02T02:21:44.510

Model.new 方法采用哈希。

`params[:product]`实际上包含类似的东西`{:serial => 555, :value => 111}`

您要使用的网址是：

```
http://localhost:3000/products?product[serial]=555&product[value]=111 
```

（确保您确实在使用 POST）

如果您想保留当前的 ​​url 方案，则必须使用：

```
@product = Product.new({:serial => params[:serial], :value => params[:value]}) 
```

您还可以通过使用以下命令将其打印到控制台来准确确定 params 内部可用的内容：

```
p params 
```

祝你好运！

# iis - 我想将站点（我在 Visual Web Developer Express Edition 中制作）部署到 IIS

> ID：708036
> 
> 赞同：1
> 
> 时间：2009-04-02T02:09:55.207
> 
> 标签：iis

我将使用 2,008 Visual Web Developer Express Edition 创建一个主页 我设置了 WebSite1/AppData /Default.aspx /Default.aspx.vb /web.config

，以及任何已完成的构建都没有错误。

如何部署 IIS 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T02:38:58.960

右键单击网站并单击“部署”，然后按照向导说明进行操作。

# c# - 如何在 C# 中隐藏封装？

> ID：708037
> 
> 赞同：1
> 
> 时间：2009-04-02T02:10:09.297
> 
> 标签：c#, .net, oop

`Socket.Dispose()`是一个不可访问的成员。但是，我们可以通过执行以下操作来绕过它：

```
((IDisposible)Socket).Dispose() 
```

两个问题：

1.  为什么允许这样做？
2.  这在内部如何运作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T02:16:21.230

我相信这个特性是“显式接口实现”。仅当对象显式转换为接口时，才允许调用已实现的方法。

这是一个关于这个的教程：

[http://msdn.microsoft.com/en-us/library/aa288461(VS.71).aspx](http://msdn.microsoft.com/en-us/library/aa288461(VS.71).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T02:22:59.437

每当一个类实现诸如 Close() 之类的方法完成与 Dispose() 相同的工作时，建议显式实现 IDisposable 接口，这样开发人员通常只会看到 Close() 方法，而 Dispose 方法仍然可以通过 IDisposable 接口访问，以供预期使用 Dispose 方法的框架使用。

有时，本质上以不同的名称公开 Dispose 是有意义的，例如 Close，这样可以使代码更具可读性。您可以在整个 .NET Framework 中看到这些内容，其中包含可以“关闭”的内容，例如文件句柄和连接。

编辑：见[http://www.amazon.com/Framework-Design-Guidelines-Conventions-Development/dp/0321246756](https://rads.stackoverflow.com/amzn/click/com/0321246756)

# javascript - 我为什么要使用 jQuery？

> ID：708040
> 
> 赞同：19
> 
> 时间：2009-04-02T02:12:58.447
> 
> 标签：javascript, jquery

（我知道其他人提出了类似的问题，并且它被关闭为“争论性”，但我真的很想了解围绕这个问题的论点。）

我非常了解 JavaScript。多年来，我一直在专业地写它。我已经内化了很多跨浏览器的不兼容和粗略，对 DOM 操作了如指掌，与业内一些最优秀的 Web 开发人员一起工作，并获得了很多他们的魔力。

我一直在检查 jQuery。我理解 javascript 库的意义（我写过多少次动画、getElementsByClass 和隐藏/显示函数？）。但老实说，学习一种同样复杂的全新语法似乎是在浪费时间。似乎我会撞到墙上来学习相同旧 JavaScript 的全新界面。

从技术上讲，我不是工程师，所以也许我遗漏了一些东西。有人能说明 jQuery 的权衡吗？学习和理解 jQuery 语法真的比学习 JavaScript 更快吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-04-02T02:24:10.760

使用框架而不是本地/手写代码有几个很大的好处：

*   **抽象**。我敢肯定，您为自己拥有足够多的 JS 能够从头开始编写动画而感到非常自豪。你应该！然而，从你自己身上抽象出常见的功能实际上是非常解放的。您只需调用该方法并知道内部将被执行，并且执行得很好。即使您自己编写低级东西的速度非常快，那仍然是您花在这上面的时间，而不是解决今天的问题。

*   **共同语言**。使用通用框架就像说通用语言。您可以非常轻松地与其他开发人员协作，并且每个人都可以从其他人停止的地方继续工作而不会发生摩擦。（与进入一个使用 jQuery 可以做的事情的本地库的应用程序相比。）

*   **专家**。从事 jQuery 工作的人是 JavaScript*之神*。我非常非常擅长 JavaScript，你可能也是，但普通优秀和 jQuery 优秀之间存在很大差异。一群非常优秀的人不断地研究一小部分常见的功能——调整它、调整它、增强它以使其成为可能的最佳状态。这代表了一个像你我这样的人根本无法复制的大量工时，无论我们多么优秀。如果你和 jQuery*人*一样优秀，你只能通过将你的才能与他们的才能结合起来并为 jQuery 代码库做出贡献而受益。这是一个疯狂人才的大熔炉。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-02T02:22:30.013

> 从技术上讲，我不是工程师，所以也许我遗漏了一些东西。有人能说明 jQuery 的权衡吗？学习和理解 jQuery 语法真的比学习 JavaScript 更快吗？

jQuery 不仅仅是 Javascript 的“另一个接口”。它允许您以比相应的 Javascript 实现更紧凑和简洁的方式表达自己。同时，它更清晰，更强大。具体来说，您获得的好处包括：

*   **表现力。**jQuery 本质上是一种用于 DOM 操作和查询的 DSL。这种特异性是其实用性和有效性的主要来源。

*   **跨浏览器。**在很大程度上，jQuery 是“一次编写，随处运行”。即使在 2009 年，对于基于 Web 的平台来说，这仍然是一个令人惊讶的罕见壮举。知道您不必浪费时间在 IE6 上调试晦涩难懂的问题（嗯，大多数时候），这令人欣慰和宽慰。

*   **高度完整的文档。**作为一名开发人员，我很欣赏那些花时间阐明所有移动部件应该做什么的 API 和框架。没有什么比知道 (1) 事情足够稳定以至于编写文档不是试图击中移动目标和 (2) 事情足够有用以至于它们已经吸引了足够多的人来充分充实文档更令人鼓舞。

总而言之，Javascript 和 jQuery 之间的区别类似于汇编语言和高阶编程语言之间的区别。尽管它们在技术上都是“机器语言的接口”并且都可以做类似的事情，但后者被认为更强大，因为它很容易表示事物并快速发展。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-02T03:03:09.747

我没有看到提到的一件事是，该库是为在各种流行的浏览器和平台上跨浏览器工作而编写的：IE6+、Firefox 2+、Safari 3+

仅此一项就足以让您使用 jQuery 来编写自己的 JavaScript 并自己担心跨浏览器问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-02T02:22:59.547

不学习 JavaScript 就无法学习 jQuery，不成为 JavaScript 大师就无法成为 jQuery 大师。

也就是说，使用 jQuery 做事确实比使用“裸机”JavaScript 快得多。此外，使用 jQuery 的方式比使用“裸机”JavaScript 的方式要抽象得多。此外，jQuery 语法非常基础，一点也不难学，尽管您对 jQuery 的看法与您对“裸机”JavaScript 的看法大不相同，但可以让您做得更多、更快。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-02T02:23:04.817

社区支持

其他开发人员编写和测试代码，使您可以做您根本没有时间做的事情。它不是关于做任何你不知道怎么做的事情，而是关于快速、高效和高质量的做事（它已经过测试）。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-02T02:53:44.697

从它的声音来看，您知道 jQuery 对 DOM 了解的很多东西，我只能假设您多年来为自己构建了一个很好的 DOM 工具集，其中包含了所有这些知识。简而言之，不，您不需要使用 jQuery。然而，我们中的一些人对 DOM 了解不多，而 jQuery 为我们提供了公平的竞争环境，因此我们可以继续为客户完成工作。

这并不是说您不应该*学习*jQuery（而不是*使用*它）。你可能会捡到一些你不知道的东西。将它与其他 DOM 库（可能包括您自己的库）区分开来的 3 个主要特性是：

1.  内置对 CSS 选择器语法的支持，对查找元素很有用
2.  对包装元素*集*进行操作的方法
3.  链接。jQuery.prototype 中的每个方法（具有“setter”行为）都返回`this`

就个人而言，1) 和 3) 的溢价并不高。但是2）对我来说是巨大的。直到 jQuery，我才意识到我的代码有多少倾向于在一组节点而不是单个节点上运行（如果有人问我，我会猜到相反的趋势）。2）实际上消除了`for`我的代码中的所有循环（或者`.forEach`我倾向于抽象它），这实际上是非常解放的。*现在我注意到这是我的代码必须*对某个单一元素进行操作的罕见情况。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-02T02:21:04.497

开发速度和代码周转。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-04-02T18:54:26.940

我在其他答案中没有看到的一件事是，最终，其他人将不得不维护您的代码。如果这都是自定义的，那么与使用更标准的库相比，他们的时间会更艰难。如果您不关心这些，并且您认为您可能不需要任何真正漂亮的 jQuery 模块，那么请继续您正在做的事情。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-04-02T19:10:17.807

对我来说，有几个好处，比如开发速度等。

但归根结底，它归结为一件事： **它删除了大量可以消耗大量时间和资源的跨浏览器 BS，所以我不必处理它**

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-02T02:17:50.493

jQuery 允许您编写更短、更简洁且易于理解的代码。许多人使用它，因此有许多插件可以与之配合使用，从而最大限度地减少臃肿。您自己的个人图书馆可能并非如此。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-02T02:19:52.890

如果您非常了解 JavaScript，您还应该知道 jQuery 的语法与 JavaScript 的语法没有什么不同。

您可能指的是`chaining`成语（在 jQuery 中随处使用），它似乎使事情看起来与其他类型的代码非常不同。嗯，这是有原因的，因为它与 DOM 的工作方式结合得非常好。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-04-02T03:16:33.473

如果您真正了解 JavaScript，那么您将在一周内掌握 jQuery 的运行速度。如果您还不熟悉 JavaScript，那么在顶部添加一个层可能弊大于利。但这就像其他任何事情一样！

您将以更快的速度编写更好看、更容易理解的 JavaScript，而且只写一次——而不是每个浏览器一次。缺点？您将使用另外约 50KB 的 JavaScript。这就是缓存的用途:)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-04-02T18:49:48.417

Jquery是设计者手中的javaScript。

这就像在元素上编写 CSS 样式一样简单。

Jquery 也是最容易理解、编写维护、添加插件的。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-04-02T20:02:28.103

我正在为客户开发一个画廊程序（它现在在 IE6 和 7 中表现出莫名其妙的行为 - 惊喜，惊喜 - 但我发现当我从裸机 Javascript 切换到 jQuery 时，很多工作变得容易得多。我，它在编写 Javascript 时提供了 DOM 的 CSS 视图——这使得遍历和操作更加直观。此外，跨浏览器的兼容性和简洁性也很棒。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-06-14T21:59:25.897

jQuery 是好是坏并不重要。它现在是强大的 JS 库，用于大量页面，未来的浏览器将不得不适应它，否则就会被视为错误。

* * *

我不喜欢 jQuery 的地方：我对它在测试套件中忽略手机浏览器的方式并不感到兴奋。它被拉入手机上的各种页面，但它不努力确保它在它们上运行良好。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-06-14T22:05:00.563

jQuery 优雅地降级，它是最快的**之一**（虽然不再是最快的了）：

[http://mootools.net/slickspeed/](http://mootools.net/slickspeed/)

那里有许多其他框架，无论您选择哪个，您可能都不会出错，但是我自己使用 jQuery，我肯定会推荐它。

:)

# c# - MS Access 互操作 - 数据导入

> ID：708042
> 
> 赞同：2
> 
> 时间：2009-04-02T02:13:24.000
> 
> 标签：c#, sql, ms-access, interop, import

我正在开发一个将 SQL 导出到 Access 的 exe，我们不想使用 DTS，因为我们有多个客户端，每个客户端都导出不同的视图，并且设置和维护 DTS 包的开销太大。

*编辑：对于许多客户来说，这个过程每晚都是自动化的，所以整个过程必须在存储过程中的游标内启动和控制。这是因为必须按项目过滤数据以进行导出。

我尝试了很多方法将数据从 SQL 中获取到 Access 中，最有希望的是使用 Access 互操作并运行

```
doCmd.TransferDatabase(Access.AcDataTransferType.acImport... 
```

我遇到了一个问题，我从视图导入并手动运行导入，似乎视图开始返回数据的速度不够快，因此访问会弹出一个 MessageBox 对话框，说它已超时。我认为这也发生在互操作中，但是因为它是隐藏的，所以方法永远不会返回！

我有什么办法可以防止弹出此消息，或增加导入命令的超时时间？

我目前的攻击计划是将视图展平为表格，然后从该表格导入，然后删除展平的表格。

很高兴有任何建议如何解决这个问题。

编辑：

关于我在做什么的更多信息：

我们有多个客户，每个客户都有一个标准的数据模型。“模块”之一是访问导出器（sproc）。它从参数表中读取要导出的视图，然后导出。视图按项目过滤，并为每个项目创建一个访问文件（每个视图都有项目字段）

我们正在运行 SQL 2005，并且不会很快迁移到 SQL 2005，我们可能会在几个月后跳到 2008。

然后我们有一个模块执行作业，它在每个数据库上执行配置的模块。在这个模块执行中运行了许多导入/导出/其他作业，并且访问导出器必须能够适应这个框架。所以我需要一个通用的 SQL -> Access 导出器，它可以通过我们的参数框架进行配置。

目前，sproc 调用我编写的 exe，并且我的 exe 通过互操作打开访问权限，我知道这对服务器不利，但是模块执行是编写的，因此一次只执行一个模块，因此该过程将永远不会运行更多一次不止一个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T02:24:31.070

您是否尝试过使用 VBA？您有更多配置连接的选项，而且我确信我过去曾在该上下文中使用过超时调整。

此外，我通常发现直接查询视图最简单（只要您可以使用 nolock 连接，或者容忍传输所需的时间）；这可能是创建中间临时表的一个很好的理由。

在单用户模式下显式打开访问权限也可能有好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-03T15:19:49.490

我们已经使用 ADO 来连接到源数据和目标数据。您可以根据需要设置连接和命令超时值，并读取/附加到每个记录集。

不是特别快，但我们可以让它在一夜之间运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T00:40:31.077

我已经确定了一种方法来做到这一点。

[http://support.microsoft.com/kb/317114](http://support.microsoft.com/kb/317114)描述了启动访问过程的基本步骤。

我已将 Process 设为类变量，而不是 ShellGetApp 方法的局部变量。这样，当我调用 Quit 函数进行访问时，如果它由于某种原因没有关闭，我可以显式地终止该进程。

```
app.Quit(Access.AcQuitOption.acQuitSaveAll);
if (!accessProcess.HasExited)
{
    Console.WriteLine("Access did not exit after being asked nicely, killing process manually");
    accessProcess.Kill();
} 
```

然后我在这里使用了一个方法超时函数来给访问调用一个超时。如果超时，我也可以终止访问进程（超时可能是由于弹出一个对话框窗口，我不希望进程永远挂起。我在这里得到了超时方法。

[实现 C# 通用超时](https://stackoverflow.com/questions/299198/implement-c-generic-timeout)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T01:14:27.953

我很高兴您有适合您的解决方案。为了其他阅读本文的人的利益，我将提到 SSIS 可能是解决此问题的方法。请注意，SSIS 和 DTS 之间的区别几乎是白天和黑夜。

参数化导出过程并不难，这样对于每个客户端，您都可以导出一组不同的视图。您可以遍历包含视图名称的文本文件的行，或者使用对配置数据库的查询来获取视图列表。其他参数可以来自相同的配置数据库，基于每个客户端和/或每个视图。

如有必要，还可以选择通过执行子进程或 pacakge（如果已配置）来执行每个客户端的预处理和后处理。

# winapi - 用于搜索的通用 LDAP 基础？

> ID：708046
> 
> 赞同：3
> 
> 时间：2009-04-02T02:17:15.503
> 
> 标签：winapi, active-directory, ldap, ldap-query

我正在编写一些 C++/Win32 代码来搜索 LDAP 目录中的用户（实际上我需要验证用户名/密码是否正确，然后验证组成员身份）。我有用户名，所以我希望以下内容可以工作：

```
(&(objectCategory=person)(objectClass=user)(uid={username})) 
```

当我`ldap_search`用这个搜索/过滤器调用时，我必须提供一个起始基础（节点/OU/whatever）来搜索。但我不知道从哪里开始搜索——我只有用户名。是否有指定与 OpenLDAP、Active Directory、Netscape LDAP 等一起使用的树的根？

此外，任何可以回答的人都可能对此有所帮助：uid 属性是否普遍受支持，或者我是否需要根据我正在与之交谈的 LDAP 服务器品牌搜索不同的属性？（我已经看到人们需要在`uid`,`CN`甚至上搜索`SAMAccountName`）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T08:59:49.623

关于您关于一般检索搜索库的第一个问题：

每个 LDAP 目录服务器（我认为符合 LDAP 协议）都会在一个名为**RootDSE**的节点下公开一些可操作的东西。您可以通过**RootDSE**检索的其中一件事是**命名上下文**，它基本上可以告诉您此服务器上托管的不同树。

因此，您可以为您的用户名搜索检索顶级搜索库。*请注意：某些 LDAP（例如 OpenLDAP）服务器可以托管多个树，因此当找到多个命名上下文时，您必须想出一个解决方案。*

RootDSE可以通过向服务器查询 DN ""（空字符串）并指定您也想要获取所有操作属性来检索**。**只是 OpenLDAP 服务器的一些示例：

```
ldapsearch -H ldap://ldap.mydomain.com -x -s base -b "" +
# note the + returns operational attributes 
```

这应该返回类似于下面显示的内容（来自 OpenLDAP 2.4.8） - 括号中的值是添加的解释，服务器不会返回：

```
dn:
structuralObjectClass: OpenLDAProotDSE
configContext: cn=config
namingContexts: dc=example,dc=com
namingContexts: dc=example,dc=net
monitorContext: cn=Monitor
supportedControl: 1.3.6.1.4.1.4203.1.9.1.1 (Contentsync RFC 4530)
[...]
supportedExtension: 1.3.6.1.4.1.4203.1.11.1 (ModifyPassword RFC3088)
[...]
supportedFeatures: 1.3.6.1.1.14 (Modify-Increment RFC4525)
[...]
supportedLDAPVersion: 3
supportedSASLMechanisms: NTLM
[...]
entryDN:
subschemaSubentry: cn=Subschema 
```

（*来自[http://www.zytrax.com/books/ldap/ch3/#operational](http://www.zytrax.com/books/ldap/ch3/#operational)*）

* * *

关于您关于`uid`属性可用性的第二个问题：

我不认为你应该依赖这个，因为它很大程度上取决于用于存储用户数据的模式（尽管`uid`我认为大多数用户模式类都会有一个属性）。但这取决于您想在程序中添加的灵活性。也许最好的方法是让最终用户可以配置用户过滤器字符串（您甚至可以使用搜索库来执行此操作，这将具有一些性能优势（当用户仅位于一个小的子树，不需要查询 RootDSE))。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-07T14:14:49.007

我不会依赖 uid 作为 LDAP 中用户条目的正确搜索属性。许多公司只会保证employeeID 在LDAP DIT 中是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T04:10:46.790

您需要定义开始搜索的容器。所以这就像

```
"LDAP://" + _ADSPath + ":" + _ADSPort + "/" + _ADSRootContainer 
```

其中 _ADSPath 是服务器主机名/IP；_ADSPort 为端口号（通常默认为 389）；并且 _ADSRootContainer 是容器路径的其余部分（例如 ou=Users。路径取决于您正在搜索的实现。您可以启动高于容纳用户的容器并在搜索对象上设置参数以使用多级搜索。但它会慢得多。

# c# - 单元测试的价值

> ID：708047
> 
> 赞同：11
> 
> 时间：2009-04-02T02:17:28.437
> 
> 标签：c#, .net, unit-testing

每当我提出将单元测试和代码覆盖率作为开发周期不可或缺的一部分的重要性时，我会从经理/老板那里得到一些典型的答案（按陈词滥调的升序排列）

1.  “那是 QA 的工作，只关注功能和开发”
2.  “该应用程序不是关键任务，如果有一些错误也不是世界末日”
3.  “我们不能花时间在单元测试上”
4.  “尽量不要太花哨”

尽管有做好工作的最佳意图，但最终到了责备游戏的时候，负担最终落在了开发人员身上。

我经常看到生产中出现问题，其中一些问题可以通过运行单元测试静态捕获这些错误来避免。

我只是想进行一次对话，以了解人们的经历以及解决此问题的最佳方法是什么。

更新：感谢大家提供了很多有见地的建议。我希望我可以选择几个答案作为正确答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-02T02:44:17.137

将单元测试引入开发过程就像投资：你必须先投入一些资金才能在以后获得利润。如果你坚持下去，管理层应该更加注意这个类比：描述需要哪些投资，然后制定利润计划。

例如： 投资：

*   实施测试基础设施所花费的时间（如果没有简化产品特定测试模式、测试数据创建/删除等的特定于测试的基础设施代码，就不可能进行认真的产品单元测试）；
*   花在编写实际测试上的时间；
*   花费在审查和支持测试上的时间；
*   等等

利润：

*   没有任何错误会在没有标志的情况下重新出现；
*   没有通过单元测试就不会发布主要功能；
*   大多数错误的周期开发-QA-修复错误减少了一半：开发-单元测试-修复错误；
*   等等

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-02T03:15:03.570

大多数经理在看到单元测试的实际意义之前不会看到单元测试的优势，所以根据经验，我的建议是采取以下步骤：

1.  **将单元测试应用于重复出现的错误**- 这是证明单元测试价值的最佳用例。当你有 bug 出现并在其他构建中重新出现时，单元测试将允许开发人员查看哪些更改导致了 bug，除了提前提醒他们修复是有序的。向管理层展示也很容易。
2.  **将单元测试应用于常规错误**- 现在清楚地证明了单元测试的有用性，从长远来看，几个反复出现的错误实例应该足以鼓励每个人使用单元测试来评估*所有*错误，以防止它们成为反复出现的错误。
3.  **将单元测试应用于新功能**- 通过单元测试确保旧错误不会再次出现，并确认它们首先已修复，下一步是将其应用于新功能以确保将错误最小化。明确指出不可能完全消除错误。
4.  **应用完整的 TDD** - 最后一步是在编码之前应用单元测试，作为一种设计工具，既有助于设计代码，又能最大限度地减少错误。

当然，我并不是说这很容易——我上面所说的过于简单化了，即使我每天都在挣扎——很难说服所有人。

如果稍后您决定转到另一家公司，您可能需要明确寻找一家实施 TDD 的公司。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-02T02:20:15.323

人们听他们的钱包。显示通过尽早发现错误可以节省多少时间。将其转化为节省美元。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-04-02T02:20:32.017

关于#3，在单元测试上花费时间很可能会缩短整体上市时间。很棒的文章 - [http://blog.scottbellware.com/2008/12/does-test-driven-development-speed-up.html](http://blog.scottbellware.com/2008/12/does-test-driven-development-speed-up.html)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-02T02:26:50.613

对我来说，采用单元测试的最大优势是我可以改变我的编码行为，使其更易于测试，换句话说，以更松散耦合的方式。

如果你因为管理问题不能在实际项目中练习单元测试，我会选择在一些小玩具项目上练习，只是为了强迫自己找到一种方法来编写可测试的代码，即使没有单元测试。

我自己的2美分。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-02T02:50:39.573

如果单元测试，我假设你在这里谈论 TDD，对你来说很重要，你应该用你自己的时间来编写它们（假设你有时间）。如果你这样做了，请记录下你实际花费了多少时间来编写它们，并在它们已经到位一两个发布周期后，带着一些数据去找你的经理。

如果您发布的答案确实是您的经理所说的，那么您为白痴工作，也许一些硬数据会影响他们。考虑到市场，退出不可能是一种选择，玩办公室政治不会让你有任何收获（或提高你的代码质量）。

除非您的经理了解 TDD不仅仅是为了防止错误或“测试”，否则他们永远不会得到它**。**TDD 是关于设计和整体代码质量的。

你必须向他们展示。如果他们不能被说服，那么我会开始寻找。悄悄地；）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-02T02:41:04.103

我简短且不完整的建议是：

*   只是换工作。一家经理给出这种答案的公司无论如何都会失败，而且很快就会失败。在为时已晚之前离开。

*   扭转指责游戏。每次在没有进行单元测试的情况下发布某些东西时，都要做出官方声明，说明它已经完成了，并且你不能保证它没有错误。

*   记下您在任务上花费的时间，*在部署失败后分离错误修复*，并将其与编写单元测试的（潜在）时间分配相加。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-02T05:50:13.260

你为什么不为你的代码编写单元测试呢？不知道有没有其他开发者有同样的问题？可能他们也会按照您的示例编写单元测试。

我认为问题不在于集成服务器的技术或成本。问题在于管理层对单元测试的态度。因此，请与所有开发人员一起说服他们。

这个线程中有很多提示（[Jon Limjap 的回答](https://stackoverflow.com/questions/708047/the-value-of-unit-testing/708147#708147)），试试吧！

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-04-02T06:02:11.670

不要以特定的方式推销管理；这会很困难，而且不会真的给你买太多东西。您的管理链是否喜欢经过单元测试的代码并不重要。

当然，对代码进行单元测试有很多与之相关的好处，但不要依赖管理层的认可来编写测试。当人们开始看到结果时，他们会涌向 The Right Thing。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-02T02:52:30.427

另一个想法要添加到该线程上的其他优秀评论（其中许多我已赞成）：确保您的管理层知道此时单元测试是非常高度自动化的。我发现在屏幕上弹出 NUnit，点击“全部运行”按钮并看到几十个绿灯测试在几秒钟内通过，这让我印象深刻。这样做一次，说“这证明了我所有的旧工作仍然是正确的，尽管我做了所有新的更改”，你可能会赢得一些转换。无论如何，他们会更加信任您——通过你可见的质量证明——超过他们对他人的信任。那只会对你的职业生涯有好处。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-02T02:55:03.650

经典的反应是越早发现错误，修复的成本就越低，我认为大多数经理都可以理解这一点。

正如马克所说，展示一些具体的东西是让 PHB 相信某些东西是好的最好方法，因为他们习惯于听谈话，可能不知道单元测试和其他测试之间的区别。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-17T05:50:30.983

现在有资源可以提供帮助。现代用例列表，TDD 的切实证据。

你需要让你的老板或队友相信 TDD 正在被使用吗？这不是什么理论？那不只是继承人的说法吗？

现在您可以查看[WeDoTDD.com](http://WeDoTDD.com)，查看 TDD 公司列表以及这些团队背后的故事。

这正是我创建这个网站的原因，以平息围绕“TDD 证明”和“TDD 是否有效”和“谁在做 TDD”的争论。

您还可以通过阅读这些公司和团队实践它背后的故事来了解很多关于该主题本身的信息。

# php - 跨平台 PHP 警告？

> ID：708057
> 
> 赞同：2
> 
> 时间：2009-04-02T02:21:00.190
> 
> 标签：php, cross-platform

我得到了一个现有的 PHP 应用程序，该应用程序最初部署在 LAMP 主机上。
因为我们团队的大多数人都是 .Net 开发人员，所以我们的老板希望将其部署在 windows 环境中。

期望这能正常工作是不是很疯狂？

以下是 LAMP 主机的一些附加信息：

*   Linux 2.4.32
*   PHP 5.2.6
*   没有非默认模块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T02:36:17.657

哎呀，即使只是从一台托管服务器迁移到另一台服务器，通常也需要一些调整和调整。我不认为必须在 Windows 环境中执行此操作会有很大不同。就在上周，我参与了一个大型 PHP 应用程序的迁移，我们（3 人）能够在大约半天的时间内完成任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T02:43:38.653

这取决于应用程序中正在执行的操作。需要研究的两个方面是应用程序在文件系统中查找文件的位置（使用 Linux 特定路径？）和查找任何 php 模块的 Windows 版本（特别是来自 PECL）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T03:18:24.093

以我的经验，它可以完成并且工作正常。我要记住的最重要的事情是：

1.  在 Windows 上使用 Apache，不要使用 IIS（即使可能）
2.  确保对目录使用 unix 样式的斜杠。这些都适用于两个平台。
3.  注意区分大小写。由于 Windows 不区分大小写（尽管它保留大小写），因此如果您包含一个文件并用错误的大小写拼写它，它将在 Windows 上工作而在 Linux 上失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T03:24:48.540

要非常小心，在任何时候都不会`exec`调用。编写了许多极其懒惰的代码来使用它，并且由于显而易见的原因它可能无法很好地移植。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-03T01:57:58.560

这些年来我经历的一些事情：

*   太旧/新的 PHP 数据库驱动程序
*   路径问题
*   从 32 位系统更改为 64 位系统或反之更改会影响 PHP 内部整数处理（位计算突然返回奇怪的结果）
*   语言环境和本地化问题
*   缺少功能（手册通常会指出它在 Windows 中不起作用或行为不同）
*   文件名大小写

并始终检查并仔细检查 Apache 模块和 PHP 模块是否至少与旧系统中的版本相同。

如果代码似乎不喜欢在 Windows 中运行，那么在 Windows 之上运行虚拟化的 GNU/Linux 也不错，例如 VMWare。

# c# - 理论上是否可以从 C# 访问任何库（也就是 PInvoke 在幕后做了什么）？

> ID：708073
> 
> 赞同：2
> 
> 时间：2009-04-02T02:29:30.183
> 
> 标签：c#, pinvoke, legacy-code

像很多地方一样，我的工作场所有遗留代码以及更现代的应用程序。例如，我们有一个仍然使用 Microsoft Fortran77 编译器的服务器应用程序。应用程序中较旧的部分是为 Visual Studio 6 C 编译器编写的，最近出现了一些使用 VS .Net 2008 C++ 编写新库的案例。程序/库有许多不同的机制来相互消费/通信，包括静态链接、共享内存（Windows 内存映射文件）、名称管道和 TCP 套接字。

是什么阻止了 C# 应用程序能够使用任何旧库，例如用过程语言编写的 Fortran77 库之一？

如果我的 C# 应用程序理解 Fortan77 或 C 库的文件格式并且能够找到它想要的过程调用，它是否可以编组托管对象，调用该过程并解组结果？

如果我将 .so 库文件从 Linux 复制到 Windows，并且我的 C# 应用程序理解文件格式，它是否可以调用该库中的函数？

我认为答案与初始化每个库/程序所需的各种 Fortran、C 等运行时有关。如果是这样，那么从根本上说，这些运行时是否与 CLR 大体相似（在 CLR 的情况下，它们具有不同的功能，例如内存管理等）？

编辑：

以另一种方式提出我的问题。如果外星人进来并给了我一个二进制库文件和文件格式规范，我可以从 C# 中使用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T03:04:58.040

如果 DLL 是有效的 DLL，并且导出的函数使用众所周知的调用约定，那么只要您在 .NET 中正确获取方法签名，即：正确的参数类型和返回类型，应该没有问题。CLR 不（也不能）关心库是用什么语言编写的。

至于 Linux 共享库，如果您有库的源代码，应该可以使用 Cygwin 或 MiniGW 为 Windows 编译它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T02:44:05.110

我不了解 Linux 中的 Fortan77 或 .so 库，但我知道您可以将 PInvoike 与 C 库一起用于方法调用。此外，您可能希望查看`unsafe`C# 中用于共享内存应用程序的关键字。它允许您退出内存管理，这可能是您需要的。命名管道和 TCP 套接字可以从 System.Net 命名空间完成。

基本上你说的都可以做到。我不知道实现它的难易程度，但您应该能够从您的 C# 应用程序访问所有这些本机应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T03:09:55.063

您还可以创建一个 C++/CLI DLL（编译时的 /CLR 选项），这将允许您编写托管和非托管代码。这使您可以在本机 C++ 中执行几乎所有可以执行的操作，并且还可以与 .NET 组件进行交互。我正在做这样的事情，通过让 C++/CLI dll 基本上位于它们之间，来桥接旧的 C 应用程序和 C# DLL。

# c# - Lucene RangeQuery 没有正确过滤

> ID：708075
> 
> 赞同：6
> 
> 时间：2009-04-02T02:30:28.653
> 
> 标签：c#, lucene, lucene.net

我`RangeQuery`用来获取数量在 0 到 2 之间的所有文档。当我执行查询时，Lucene 也会给我提供数量大于 2 的文档。我在这里想念什么？

这是我的代码：

```
Term lowerTerm = new Term("amount", minAmount);
Term upperTerm = new Term("amount", maxAmount);

RangeQuery amountQuery = new RangeQuery(lowerTerm, upperTerm, true);

finalQuery.Add(amountQuery, BooleanClause.Occur.MUST); 
```

这是我的索引中的内容：

```
doc.Add(new Field("amount", amount.ToString(), Field.Store.YES, Field.Index.UN_TOKENIZED, Field.TermVector.YES)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T09:26:26.673

**更新**：就像@basZero 在他的评论中所说，从 Lucene 2.9 开始，您可以在文档中添加[数字字段。](http://lucene.apache.org/java/2_9_0/api/core/org/apache/lucene/document/NumericField.html)请记住在搜索时使用[NumericRangeQuery](http://lucene.apache.org/java/2_9_0/api/core/org/apache/lucene/search/NumericRangeQuery.html)而不是 RangeQuery。

### 原始答案

Lucene 将数字视为单词，因此它们的顺序是字母顺序：

```
0
1
12
123
2
22 
```

这意味着对于 Lucene，12 介于 0 和 2 之间。如果要进行适当的数字范围，则需要索引数字零填充，然后执行 [0000 TO 0002] 的范围搜索。（您需要的填充量取决于预期的值范围）。

如果您有负数，只需为非负数添加另一个零。（编辑：**错错错**。见更新）

如果您的数字包含小数部分，请保持原样，并仅对整数部分进行零填充。

例子：

 ~~~~```
-00002.12
-00001 
```~~  ~~```
000000
000001
000003.1415
000022 
```

**更新**：负数有点棘手，因为 -1 按字母顺序排在 -2 之前。[这篇文章](http://wiki.apache.org/lucene-java/SearchNumericalFields)给出了关于在 Lucene 中处理负数和一般数字的完整解释。基本上，您必须将数字“编码”成使项目的顺序有意义的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-10T13:54:16.703

我创建了一个 PHP 函数，可以将数字转换为 lucene/solr 范围搜索。

`0.5`转换`10000000000.5`
`-0.5`为 转换为`09999999999.5`

```
function luceneNumeric($numeric)
{
    $negative = $numeric < 0;
    $numeric = $negative ? 10000000000 + $numeric : $numeric;

    $parts = explode('.', str_replace(',', '.', $numeric));

    $lucene = $negative ? 0 : 1;
    $lucene .= str_pad($parts[0], 10, '0', STR_PAD_LEFT);
    $lucene .= isset($parts[1]) ? '.' . $parts[1] : '';

    return $lucene;
} 
```

它似乎有效，希望这对某人有帮助！

# linux - 使用 Sed 逐列替换字符串

> ID：708081
> 
> 赞同：3
> 
> 时间：2009-04-02T02:34:44.290
> 
> 标签：linux, unix, sed, replace

鉴于此数据

```
34 foo
34 bar
34 qux
62 foo1
62 qux
78 qux 
```

如果它是“qux”，我想将第二列的字符串替换为“”。结果：

```
34 foo
34 bar
34 
62 foo1
62 
78 
```

你如何用 sed 做到这一点？特别是数据非常大，大约 10^7 行

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-02T02:38:26.777

我实际上*不*会这样做，`sed`因为这不是这项工作的最佳工具。每当有人提到专栏时，该`awk`工具是我的首选工具。

```
cat file | awk '$2 == "qux" { print $1 } $2 != "qux" { print $0 }' 
```

或最简单的形式：

```
cat file | awk '{ if ($2 == "qux") {$2 = ""}; print }' 
```

如果您必须使用`sed`：

```
cat file | sed 's/  *qux *$//' 
```

确保您使用正确的空格（以上仅使用空格）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T02:37:08.497

没有尾随空格：

```
sed 's/qux$//' < file 
```

如果它必须在第二列（可能超过三列）：

```
sed 's/\([0-9][  ]*\)qux\(.*\)/\1\2/' 
```

（请注意，有一个文字制表符和空格；sed 不匹配带有 '\t' 的制表符；

但 awk 更适合表格数据：

```
awk '{ if ($2 == "qux") {$2 = ""; print} else { print }; }' < file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-10-19T06:44:58.443

```
 nawk '{ gsub( /qux/, " " ); print }' filename 
```

# php - 如何在 PHP 中读取注释块？

> ID：708086
> 
> 赞同：9
> 
> 时间：2009-04-02T02:36:51.633
> 
> 标签：php, reflection, comments

我正在做一些自制的自动化文档，因为我有一个布局不是很标准的代码库，我想知道最好的方法是读取 PHP 文件并获取注释块的内容。我能想到的唯一方法是打开文件并逐行读取它，但我想也许有一些内置的魔法可以为我解析文档，类似于反射函数。

每个文件的基本布局是这样的：

```
<?php // $Id$
/**
 * Here is this script's documentation, with information in pseudo-javadoc
 * type tags and whatnot.
 *
 * @attr    something    some information about something
 * @attr    etc          etc etc
 */
 // rest of the code goes here. 
```

请务必注意，这些文件中没有定义任何函数或类。评论与整个剧本有关。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-02T02:39:39.317

查看[Tokenizer](http://www.php.net/manual/en/book.tokenizer.php)。

要获取名为`test.php`您的文件中的所有注释，请执行以下操作：

```
$tokens = token_get_all(file_get_contents("test.php"));
$comments = array();
foreach($tokens as $token) {
    if($token[0] == T_COMMENT || $token[0] == T_DOC_COMMENT) {
        $comments[] = $token[1];
    }
}
print_r($comments); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T02:45:41.160

看看 PHP5 附带的[反射 API](http://www.php.net/language.oop5.reflection)，更具体地说`getDocComment()`：

> PHP 5 带有一个完整的反射 API，它增加了对类、接口、函数和方法以及扩展进行逆向工程的能力。此外，反射 API 还提供了检索函数、类和方法的文档注释的方法。

此外，根据您的代码库的大小，您可以通过修改注释以适应[phpDocumentor](http://www.phpdoc.org/)语法来减少工作量，这似乎已经非常接近。

# c++ - C++ 使用命名空间来避免长路径

> ID：708089
> 
> 赞同：2
> 
> 时间：2009-04-02T02:38:05.110
> 
> 标签：c++, namespaces, using

我仍在学习 C++，而且我之前从未真正创建过自己的命名空间。我正在对它们进行试验，虽然我可以完成大部分工作，但我似乎仍然无法做一件事。我希望能够在类中调用静态方法，而无需键入类似`NameOfClass::method`. 这是我认为代码应该看起来的样子，但它无法编译：

文件`A.h`，

```
namespace Test
{
    class A
    {
        public:
            static int foo() { return 42; }
    };
} 
```

文件`main.cpp`，

```
#include <iostream>

#include "A.h"

using namespace std;
using namespace Test::A;

int main()
{
    cout << foo() << endl;

    return 0;
} 
```

编译器给了我：

```
main.cpp:6: error: ‘A’ is not a namespace-name
main.cpp:6: error: expected namespace-name before ‘;’ token
main.cpp: In function ‘int main()’:
main.cpp:10: error: ‘foo’ was not declared in this scope 
```

是否可以在不打字的情况下做我想做的事情`A::foo`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-02T02:47:53.150

在 C++ 中，您/尤其/必须仔细阅读编译器错误消息。

请注意，第一个错误是“错误：'A' 不是命名空间名称”。没错，A 是一个类名。

```
using namespace Foo; // brings in  all of foo;
using Bar::Baz // brings in only Baz from Bar 
```

你想写：

```
using Test::A; 
```

这样做有两个好处：它引入了 A 供您使用，并且没有引入所有其余的 Test，这也很好，因为您应该只引入您需要的东西，以免意外依赖你没有意识到你依赖的东西。

但是，由于 foo 在 A 中是静态的，因此您仍然必须显式引用 A::foo。（除非你写一个自由函数来转发到 A::foo；一般来说，如果你这样做只是为了节省一些输入，这是一个坏主意。）

有些人可能会建议根本不使用 using 声明，而是完全限定所有名称。

但这是（引用 Stroustrup 的话）“乏味且容易出错”，它妨碍了重构：假设你完全限定了类 FooMatic::Stack 的每次使用，然后管理层坚持，就在你即将去生产，你使用 BarMatic 非常相似的 Stack 类，因为 barMatic 刚刚收购了你的公司。

如果你在任何地方都完全合格，你会做很多 grepping，希望你的正则表达式是正确的。如果你使用了 using 声明，你可以对你的（希望是共享的）头文件进行修复。这样，使用声明很像“typedef int ourInt;”。或一个清单常量或 const：“const int FOO = 1;”，因为它提供了一个地方来更改引用到许多地方的东西。在每次使用时完全限定命名空间会带走这种好处。

相反，如果您使用了 using 指令并引入了所有命名空间 FooMatic，那么您的 grep 可能会更加困难，如果说管理层坚持使用 BarMatic::Foo 但您仍然必须使用 FooMatic:Baz，Baz 的 BarMatic 等价物用于无论什么原因无法使用。

因此，一次引入一种类型（类、函数、常量）通常是最灵活的，也是最好地保护自己免受不可避免但未知的变化的方法。与大多数编码一样，您希望在保持足够粒度的同时尽量减少繁琐的重复。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-02T02:44:41.723

没有办法绕过它，您需要为静态方法指定类名。

```
using namespace Test; 
```

然后：

```
int answerToEverything = A::foo(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T02:47:11.623

不，不可能以任何优雅的方式做你想做的事情。你能做的最接近的事情是创建一个宏或一个内联函数来委托给你的函数。然而，这两种选择都相当难看，所以我不打算发布任何代码示例。只需硬着头皮指定整个名称，或者重构代码，使静态方法只是全局函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T03:45:56.053

不要成为“使用命名空间”的滥用者。使用这些命名空间！

```
std::cout << Test::A::foo() << std::endl; 
```

# mysql - 简单选择第 n 高

> ID：708090
> 
> 赞同：2
> 
> 时间：2009-04-02T02:38:07.560
> 
> 标签：mysql, database

我试图找出在 mySQL 数据库中获得第 n 高记录的更有效方法：

```
SELECT * 
FROM table_name
ORDER BY column_name DESC
LIMIT n - 1, 1 
```

或者

```
SELECT *
FROM table_name AS a 
WHERE n - 1 = (
    SELECT COUNT(primary_key_column) 
    FROM products b 
    WHERE  b.column_name > a. column_name) 
```

column_name 上有一个索引。

我认为 mySQL 将有效地执行限制子句，第一个选项是要走的路。

我不太清楚第二个查询到底做了什么，所以如果这样更有效，有人可以解释原因。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T03:15:34.083

我在我的数据库上对这两个查询都尝试了 EXPLAIN （注意：优化器可能会为您的模式/数据选择不同的计划），而且它绝对看起来第一个在各个方面都获胜：它更易于阅读和理解，并且大多数可能会更快。

正如 aaronls 所说，并且 EXPLAIN 确认，第二个查询有一个相关的子查询，这将需要对每一行的整个表进行额外的迭代。

由于第一个更容易阅读，我会选择它。如果您确实发现这是一个瓶颈（在分析您的应用程序之后），您可以尝试第二个，但我看不出它怎么可能更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T02:49:48.483

我认为对于第二个查询，它将执行一个内部循环来运行子查询，以针对 table_name 中的每一行进行评估。如果是这种情况，这意味着您可能有类似 O(n^2) 运行时的东西。

基于此，我会亲自使用第一个查询，但如果它对我来说很重要，我会做一些性能测试。确保您还针对非常大的数据集进行测试，以便很好地了解性能如何扩展。对于非常小的数据集，以 O(n) 运行的东西更快，但对于大型数据集，以 O(log(n)) 运行的东西要好得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T02:54:37.223

对两个查询运行解释，看看 MySQL 认为哪个更复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T02:54:15.397

这不是一个真正的答案，但......

假设您的负载不是超重，就使用第一个查询，只是因为它有效且简单。如果真的有必要，您可以随时返回并进行更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T03:31:26.463

我建议（尽管我自己不确定确切的 SQL 语法）在一个简单查询中计算一个额外的 RANK 列，该查询根据需要对元素进行排序（DESC）。然后只需选择 RANK = n 的行。

我猜你可以用一个递增的变量来做到这一点。它基本上说明了这一行之前有多少行，所以它应该很容易计算。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-02T04:07:16.783

如果您真的关心效率，也许您应该考虑在 SQL 中实现[选择算法。](http://en.wikipedia.org/wiki/Selection_algorithm)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-09-10T19:32:58.503

**第二高记录**

从 OrderDetails 中选择 max(Price) 作为价格，其中 Price<(从 OrderDetails 中选择 max(Price))

**第 N 高记录**

SELECT * FROM OrderDetails AS a WHERE n-1 = ( SELECT COUNT(OrderNo) FROM OrderDetails b WHERE b.Price > a. Price)

# security - What is the main purpose of openssl's SSL_CTX_use_certificate_file?

> ID：708096
> 
> 赞同：3
> 
> 时间：2009-04-02T02:42:34.147
> 
> 标签：security, openssl

The man page did not clearly specify this. But looking at openssl's apps implementations, SSL_CTX_use_PrivateKey* calls are usually made after SSL_CTX_use_certificate_file succeeded. I assume this is mostly used at the server side.

I recently confused the above function with SSL_CTX_load_verify_locations wherein you could specify a CA certificate file and path. It turned out that SSL_CTX_load_verify_locations is the one I needed to verify a server certificate which is signed by a Trusted Authority.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T04:30:12.000

SSL_CTX_use_certificate_file() is used to load the certificates into the CTX object either in PEM or DER format. The certificates can be chained ultimately ending at the root certificates. SSL_CTX_use_certificate_file API loads the first certificate into the CTX context;not the entire chain of certificates. If you prefer that thorough check of certificates is needed then you need to opt for SSL_CTX_use_certificate_chain_file()

[http://publib.boulder.ibm.com/infocenter/tpfhelp/current/index.jsp?topic=/com.ibm.ztpf-ztpfdf.doc_put.cur/gtpc2/cpp_ssl_ctx_use_certificate_file.html](http://publib.boulder.ibm.com/infocenter/tpfhelp/current/index.jsp?topic=/com.ibm.ztpf-ztpfdf.doc_put.cur/gtpc2/cpp_ssl_ctx_use_certificate_file.html)

# xml - 自定义 dblatex 的 pdf 输出

> ID：708102
> 
> 赞同：1
> 
> 时间：2009-04-02T02:45:32.533
> 
> 标签：xml, latex, xslt, docbook, dblatex

我正在使用 Docbook 编写报告，并且我想自定义 dblatex 将 Docbook 转换为 Pdf 的方式。[这个页面](http://dblatex.sourceforge.net/doc/sec-custom-latex.html)应该记录这个问题，但它真的对我没有帮助。我怎样才能了解乳胶风格包的工作原理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-04T00:11:11.617

如果学习 LaTeX 确实是你的问题，那么请访问[http://www.latex-project.org/guides/](http://www.latex-project.org/guides/)并阅读那里所有的好文档。

# javascript - jQuery.map - 该功能的实际用途？

> ID：708105
> 
> 赞同：36
> 
> 时间：2009-04-02T02:47:30.437
> 
> 标签：javascript, jquery

我试图更好地理解[jQuery.map](http://docs.jquery.com/Utilities/jQuery.map)函数。

所以一般来说 .map 需要一个数组并将其“映射”到另一个项目数组。

简单的例子：

```
$.map([0,1,2], function(n){
    return n+4;
}); 
```

结果 [4,5,6]

我想我明白它的作用。我想知道为什么有人需要它。这个功能的实际用途是什么？您如何在代码中使用它？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-04-02T02:52:39.897

映射有两个主要目的：从项目数组中获取属性，并将每个项目转换为其他内容。

假设您有一个代表用户的对象数组：

```
var users = [
  { id: 1, name: "RedWolves" },
  { id: 2, name: "Ron DeVera" },
  { id: 3, name: "Jon Skeet" }
]; 
```

映射是一种从每个项目中获取特定属性的便捷方式。例如，您可以将其转换为用户 ID 数组：

```
var userIds = $.map(users, function(u) { return u.id; }); 
```

再举一个例子，假设您有一个元素集合：

```
var ths = $('table tr th'); 
```

如果您想存储这些表头的内容以供以后使用，您可以获取其 HTML 内容的数组：

```
var contents = $.map(ths, function(th) { return th.html(); }); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-04-02T03:02:17.097

`$.map`都是关于转换集合中的项目。

就 DOM 而言，我经常使用它从我的元素中快速提取值：

```
var usernames = $('#user-list li label').map(function() {
    return this.innerHTML;
}) 
```

以上将`<label>`用户列表中的元素转换为仅包含其中的文本。然后我可以这样做：

```
alert('The following users are still logged in: ' + usernames.join(', ')); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-02T03:50:41.673

Map 是一个[高阶函数](http://en.wikipedia.org/wiki/Map_(higher-order_function))，它使您能够将某个函数应用于给定序列，生成一个新的结果序列，其中包含每个原始元素的值以及所应用函数的值。

我经常使用它来获取我所有 jQuery UI 面板的有效选择器，例如：

```
var myPanels = $('a').map(function() { 
  return this.hash || null; 
}).get().join(','); 
```

这将返回当前页面中可用面板的逗号分隔字符串，如下所示：

```
"#home,#publish,#request,#contact" 
```

这是一个可以使用的有效选择器：

```
$(myPanels);// do something with all the panels 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-10T11:31:09.033

例子：

```
$.map($.parseJSON(response), function(item) {     
    return { value: item.tagName, data: item.id };
}) 
```

这里服务器将以 JSON 格式返回“响应”，通过使用`$.parseJSON`它将 JSON 对象转换为 Javascript 对象数组。

通过使用`$.map`每个对象值，它将调用`function(item)`来显示结果值：`item.tagName, data: item.id`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-02T02:50:26.763

这是您可以使用它的一件事。

```
$.map(["item1","item2","item3"], function(n){
    var li = document.createElement ( 'li' );
    li.innerHTML = n;
    ul.appendChild ( li );
    return li;
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-10T12:43:03.527

最近，我在实际环境中发现了一个很好的[.map示例。](http://api.jquery.com/jquery.map/)

鉴于**如何在给定此数组（或另一个数组）的情况下将选项附加到选择框的问题：**

```
selectValues = { "1": "test 1", "2": "test 2" }; 
```

[这个 StackOverflow 答案](https://stackoverflow.com/a/16058846/870729)使用`.map`：

```
$("mySelect").append(
  $.map(selectValues, function(v,k) {
     return $("<option>").val(k).text(v);
  })
); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-02T02:53:42.623

将代码值转换为代码文本将是一种可能的用途。例如当您有一个选择列表并且每个索引值都有相应的代码文本时。

# java - JBoss 上未生成线程转储

> ID：708108
> 
> 赞同：1
> 
> 时间：2009-04-02T02:48:25.850
> 
> 标签：java, jboss, jvm, thread-dump

我曾经通过运行 kill -quit 来生成线程转储，我会将它们放在我的服务器日志所在的日志文件中。当文件变得太大时，我使用 rm 将其删除并创建了一个同名的新文件。现在，当我使用 kill -quit 进行线程转储时，日志文件中没有任何内容被复制 - 它是空的。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T05:42:25.990

Unix 上的默认 JBoss 启动脚本通常如下所示：

```
nohup $JBOSS_HOME/bin/run.sh $JBOSS_OPTS >/dev/null 2>&1 & 
```

这是不幸的，因为它将标准错误发送到 /dev/null。通常这不是问题，因为一旦 log4j 初始化，那么大多数应用程序输出将转到 boot.log 或 server.log。但是，对于线程转储和其他低级错误，它们会丢失。

最好的办法是更改启动脚本以将 stdout 和 stderr 重定向到文件。此外，默认设置中忽略的一件事是重定向标准输入。对于守护进程，最好将标准输入重定向到 /dev/null。例如：

```
nohup $JBOSS_HOME/bin/run.sh $JBOSS_OPTS >> console-$(date +%Y%m%d).out 2>&1 < /dev/null & 
```

最后，如果您有一个正在运行的进程，您可以使用`jstack`JRE 中包含的 来获取线程转储。这将输出到调用它的控制台。我更喜欢 的输出`kill -3`，但`jstack`也允许您查看本机堆栈帧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T04:01:36.843

如果这是在 *nix 上，当您删除一个文件时，仍然打开该文件的每个人都将继续写入旧的（现在丢失的）文件。只有当所有文件句柄都关闭时，该文件才会真正被删除。

您必须使 JVM 关闭并重新打开日志文件。不知道这是否可以在不重新启动的情况下完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T22:41:01.383

如果你进入 jmx 并找到 jboss.system:service=Logging,type=Log4jService 你可以调用 reconfigure 方法，这会导致 log4j 重新打开它的任何日志文件。然后 kill -quit 应该可以工作。

# deployment - windows xp 是否包含 GdiPlus.dll？

> ID：708113
> 
> 赞同：4
> 
> 时间：2009-04-02T02:50:42.693
> 
> 标签：deployment, windows-xp, gdi+

我有一个关于部署应用程序的问题，我的应用程序需要 gdiplus.dll 来加载图像。windows xp 默认包含 GdiPlus.dll 吗？非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T03:02:30.167

我不认为这是保证，但根据我的经验，它几乎一直都存在。有一个[GDI+ 可再发行组件](http://www.microsoft.com/downloads/details.aspx?familyid=6A63AB9C-DF12-4D41-933C-BE590FEAA05A&displaylang=en)：

编辑：这里他们非常明确地声明 GDI+“[包含在 Windows XP 中](http://msdn.microsoft.com/en-us/library/ms533798(VS.85).aspx)”。因此，除非您要部署到其他操作系统之一，否则听起来您可以假设在 Windows XP 上它已经存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T03:53:19.110

Microsoft 的[DLL 帮助数据库](http://support.microsoft.com/dllhelp/)将为每个 DLL 准确地告诉您哪些产品的版本。您可以搜索它以查找您的特定 DLL，例如，查看它附带的最早的操作系统版本是什么。

# c++ - 将字节数组转换为位集

> ID：708114
> 
> 赞同：9
> 
> 时间：2009-04-02T02:51:11.583
> 
> 标签：c++, byte, bitset

我有一个由随机数生成器生成的字节数组。我想把它放到 STL 位集中。

不幸的是，Bitset 似乎只支持以下构造函数：

1.  一串 1 和 0，例如“10101011”
2.  一个无符号长。（我的字节数组会更长）

我现在能想到的唯一解决方案是逐位读取字节数组并制作一个由 1 和 0 组成的字符串。有没有人有更有效的解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-02T04:08:39.650

像这样的东西？

```
#include <bitset>
#include <climits>

template<size_t numBytes>
std::bitset<numBytes * CHAR_BIT> bytesToBitset(uint8_t *data)
{
    std::bitset<numBytes * CHAR_BIT> b;

    for(int i = 0; i < numBytes; ++i)
    {
        uint8_t cur = data[i];
        int offset = i * CHAR_BIT;

        for(int bit = 0; bit < CHAR_BIT; ++bit)
        {
            b[offset] = cur & 1;
            ++offset;   // Move to next bit in b
            cur >>= 1;  // Move to next bit in array
        }
    }

    return b;
} 
```

以及一个示例用法：

```
int main()
{
    std::array<uint8_t, 4> bytes = { 0xDE, 0xAD, 0xBE, 0xEF };
    auto bits = bytesToBitset<bytes.size()>(bytes.data());
    std::cout << bits << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T03:46:30.140

有第三个构造函数`bitset<>`- 它不接受参数并将所有位设置为 0。我认为您需要使用它，然后遍历数组调用`set()`字节数组中为 1 的每个位。

有点蛮力，但它会工作。将每个字节内的字节索引和位偏移量转换为位集索引会有一些复杂性，但没有什么想法（也许在调试器下运行）无法解决。我认为这很可能比尝试通过字符串转换或流运行数组更简单、更有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-04-25T11:56:12.470

伙计们，我花了很多时间编写一个反向函数（bitset -> byte/char array）。它是：

```
 bitset<SIZE> data = ...

    // bitset to char array
    char current = 0;
    int offset = 0;
    for (int i = 0; i < SIZE; ++i) {
        if (data[i]) { // if bit is true
            current |= (char)(int)pow(2, i - offset * CHAR_BIT); // set that bit to true in current masked value
        } // otherwise let it to be false
        if ((i + 1) % CHAR_BIT == 0) { // every 8 bits
            buf[offset++] = current; // save masked value to buffer & raise offset of buffer
            current = 0; // clear masked value
        }
    }

    // now we have the result in "buf" (final size of contents in buffer is "offset") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-24T15:10:25.263

这是我使用模板元编程的实现。
循环在编译时完成。
我采用了@strager 版本，对其进行了修改以准备 TMP：

*   更改了迭代顺序（以便我可以从中进行递归）；
*   减少使用变量的数量。

在运行时带有循环的修改版本：

```
template <size_t nOfBytes>
void bytesToBitsetRunTimeOptimized(uint8_t* arr, std::bitset<nOfBytes * CHAR_BIT>& result) {
  for(int i = nOfBytes - 1; i >= 0; --i) {
    for(int bit = 0; bit < CHAR_BIT; ++bit) {
      result[i * CHAR_BIT + bit] = ((arr[i] >> bit) & 1);
    }
  }
} 
```

基于它的TMP版本：

```
template<size_t nOfBytes, int I, int BIT> struct LoopOnBIT {
  static inline void bytesToBitset(uint8_t* arr, std::bitset<nOfBytes * CHAR_BIT>& result) {
    result[I * CHAR_BIT + BIT] = ((arr[I] >> BIT) & 1);
    LoopOnBIT<nOfBytes, I, BIT+1>::bytesToBitset(arr, result);
  }
};
// stop case for LoopOnBIT
template<size_t nOfBytes, int I> struct LoopOnBIT<nOfBytes, I, CHAR_BIT> {
  static inline void bytesToBitset(uint8_t* arr, std::bitset<nOfBytes * CHAR_BIT>& result) { }
};

template<size_t nOfBytes, int I> struct LoopOnI {
  static inline void bytesToBitset(uint8_t* arr, std::bitset<nOfBytes * CHAR_BIT>& result) {
    LoopOnBIT<nOfBytes, I, 0>::bytesToBitset(arr, result);
    LoopOnI<nOfBytes, I-1>::bytesToBitset(arr, result);
  }
};
// stop case for LoopOnI
template<size_t nOfBytes> struct LoopOnI<nOfBytes, -1> {
  static inline void bytesToBitset(uint8_t* arr, std::bitset<nOfBytes * CHAR_BIT>& result) { }
};

template <size_t nOfBytes>
void bytesToBitset(uint8_t* arr, std::bitset<nOfBytes * CHAR_BIT>& result) {
  LoopOnI<nOfBytes, nOfBytes - 1>::bytesToBitset(arr, result);
} 
```

客户端代码：

```
uint8_t arr[]={0x6A};
  std::bitset<8> b; 
  bytesToBitset<1>(arr,b); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-03-08T22:51:05.860

好吧，说实话，我很无聊，并开始认为必须有一种比设置每个位更快的方法。

```
template<int numBytes>
std::bitset<numBytes * CHARBIT bytesToBitset(byte *data)
{
    std::bitset<numBytes * CHAR_BIT> b = *data;

    for(int i = 1; i < numBytes; ++i)
    {
        b <<= CHAR_BIT;  // Move to next bit in array
        b |= data[i];    // Set the lowest CHAR_BIT bits
    }

    return b;
} 
```

这确实稍微快一些，至少只要字节数组小于 30 个元素（取决于传递给编译器的优化标志）。比这更大的数组和移动位集所用的时间使得设置每个位更快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-02T03:01:51.323

您可以从流中初始化位集。我不记得如何将 byte[] 争吵成流，但是......

来自[http://www.sgi.com/tech/stl/bitset.html](http://www.sgi.com/tech/stl/bitset.html)

```
 bitset<12> x;

  cout << "Enter a 12-bit bitset in binary: " << flush;
  if (cin >> x) {
    cout << "x =        " << x << endl;
    cout << "As ulong:  " << x.to_ulong() << endl;
    cout << "And with mask: " << (x & mask) << endl;
    cout << "Or with mask:  " << (x | mask) << endl;
  } 
```

# php - 如何将对象保存到 php 中的 C# 等数组列表

> ID：708117
> 
> 赞同：0
> 
> 时间：2009-04-02T02:53:15.277
> 
> 标签：php

如何将对象保存到 php 中的 C# 等数组列表

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T02:56:37.233

由于 PHP 的动态类型，PHP 中的对象数组和 ArrayList 之间没有区别。

编辑

以防万一这是你的意思：

```
$myArray[] = $obj; 
```

将对象 $obj 附加到数组 $myArray 上。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-02T03:00:13.700

如何将项目插入数组： [http ://www.justin-cook.com/wp/2006/08/02/php-insert-into-an-array-at-a-specific-position/](http://www.justin-cook.com/wp/2006/08/02/php-insert-into-an-array-at-a-specific-position/)

# cocoa - Cocoa 内存编辑检查

> ID：708126
> 
> 赞同：0
> 
> 时间：2009-04-02T02:57:37.153
> 
> 标签：cocoa, macos, memory, low-level

我将如何使用 Cocoa 编辑其他应用程序的内存？我知道必须以 root 身份进行编辑，但我首先要怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T04:09:29.400

我要指出[PTrace 在 OS X 上严重损坏](http://www.matasano.com/log/1100/what-ive-been-doing-on-my-summer-vacation-or-it-has-to-work-otherwise-gdb-wouldnt/)。希望这篇文章可以帮助您回避这些问题。您也可以直接使用 mach 来更改内存...查看[Mach_inject](http://rentzsch.com/mach_inject/)是如何做到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T03:07:04.807

Ptrace 是执行此操作的常用机制（与可可本身几乎/无关——它是一个 unix api，man ptrace）。一旦您附加到一个进程并且该进程停止，您就可以执行诸如从子指令或数据空间读取和写入、单步执行等操作。

# javascript - Greasemonkey 如何在页面中的 *anything* 之前运行？

> ID：708136
> 
> 赞同：5
> 
> 时间：2009-04-02T03:07:35.693
> 
> 标签：javascript, greasemonkey

*是否可以在页面上的任何*其他内容之前运行 Greasemonkey 脚本？

我知道`@run-at document-start`，但这似乎在`<HTML>`标签之后立即运行。通常这不是问题，但如果页面格式错误，如下例所示，我似乎无能为力。

我会很感激任何建议或想法。谢谢！

```
<script>alert('This is an annoying message.');</script>
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
    <HTML>
        <HEAD>
...etc... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-01-22T11:18:01.383

实际上，在页面中的任何内容`@run-at document-start` **之前**几乎都会运行 GM 脚本。

在您的情况下，以下代码将与`@run-at document-start`：

```
_oldAlert           = alert;
unsafeWindow.alert  = function () {};

/*-- Optionally, wait for the DOM, then set an onload handler to restore
    alert().
*/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-04T18:06:22.173

这是不可能的，因为 HTML 要求脚本在解析*期间*执行或根本不执行，例如，这是允许的：

```
<script> document.write('<!'+'--'); </script> 
```

如果浏览器不执行它就通过了这个脚本，它会看到完全不同的文档，因此你不能在脚本运行之前分析 HTML 文档的 DOM。

Opera通过触发事件在[UserJS](http://www.opera.com/browser/tutorials/userjs/specs/)中解决了这个问题`BeforeScript`，允许 UserJS 在最后一刻更改/删除脚本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-02T03:25:14.357

你有没有尝试过：

```
(function() {
    var yourFunction = function() 
    {
       // ...
    }
    window.addEventListener("load", yourFunction, false);
})(); 
```

# php - PHP致命错误：无法重新声明类

> ID：708140
> 
> 赞同：167
> 
> 时间：2009-04-02T03:11:03.703
> 
> 标签：php, class, fatal-error

有谁知道什么会导致这个问题？

> PHP致命错误：无法重新声明类

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2009-04-02T03:15:45.673

你有一个同名的类被声明了不止一次。也许通过多个包含。包含其他文件时，您需要使用类似的东西

```
include_once "something.php"; 
```

以防止多重夹杂物。这种情况很容易发生，尽管并不总是很明显，因为您可能会有一长串文件被彼此包含。

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2009-04-02T03:15:02.867

这意味着您已经创建了一个类。

例如：

```
class Foo {}

// some code here

class Foo {} 
```

第二个 Foo 会抛出错误。

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2009-04-02T03:46:28.813

当您在一个页面中多次声明一个类时，就会发生这种情况。您可以通过使用 if 语句（如下所示）包装该类来修复它，或者您可以将其放入单独的文件中并使用`require_once()`，而不是`include()`.

```
if (!class_exists('TestClass')) {
   // Put class TestClass here
} 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2011-07-15T08:21:41.620

使用`include_once();`- 这样，您的代码将只包含一次。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2010-01-30T10:44:43.777

如果我们使用 php 库中的任何内置类，就会发生这种情况。我使用类名作为目录，我得到了同样的错误。如果您首先收到错误，请确保您使用的类名不是内置类之一。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-07-08T13:32:55.897

如果您`__construct`多次定义该方法，也可能会发生此错误。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2011-07-04T00:37:51.023

有时这是由于 PHP 的 FastCGI 中的一些错误而发生的。

尝试重新启动它。在 Ubuntu 上是：

```
service php-fastcgi restart 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-09-12T09:26:05.353

我在使用时遇到了同样的问题，`autoload`如下所示：

```
<?php

function __autoload($class_name)
{
    include $class_name . '.php';
}

__autoload("MyClass1");

$obj = new MyClass1();

?> 
```

在其他班级有：

```
namespace testClassNamespace;

class MyClass1
{

    function  __construct()
    {
        echo "MyClass1 constructor";
    }
} 
```

解决方案是保持名称空间的兼容性，在我的示例`namespace testClassNamespace;`中，在这两个文件中。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2011-11-23T12:11:49.700

只需添加；

如果您错误地将一个函数放入另一个函数中，也会发生此错误。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-04-20T23:52:04.993

PHP 5.3（我认为也是旧版本）在不同情况下似乎有相同名称的问题。所以当我有类 Login 和它实现 LogIn 的接口时，我遇到了这个问题。在我将 LogIn 重命名为 Log_In 后，问题就解决了。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-06-20T09:10:38.840

每当您包含或需要文件名即 class.login.php 时，只需做一件事。你可以这样包含它：

```
include_once class.login.php or 
require_once class.login.php 
```

这样它永远不会抛出错误。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-07-18T18:07:34.080

此函数将打印一个堆栈，告诉您它是从哪里调用的：

```
function PrintTrace() {
    $trace = debug_backtrace();
    echo '<pre>';
    $sb = array();
    foreach($trace as $item) {
        if(isset($item['file'])) {
            $sb[] = htmlspecialchars("$item[file]:$item[line]");
        } else {
            $sb[] = htmlspecialchars("$item[class]:$item[function]");
        }
    }
    echo implode("\n",$sb);
    echo '</pre>';
} 
```

在包含您的类的文件顶部调用此函数。

有时它只会打印一次，即使您的课程被包含两次或更多次。这是因为 PHP 在执行任何代码之前实际上会解析文件中的所有顶级类并立即抛出致命错误。要解决此问题，请将您的类声明包装在 中`if(true) { ... }`，这将使您的类在范围内下移一个级别。然后你应该在 PHP 致命错误之前得到你的两个跟踪。

这应该可以帮助您找到在复杂项目中多次包含您的类的位置。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2011-11-14T09:55:08.417

你用过 Zend 框架吗？我也有同样的问题。
我通过在以下行中注释掉它来解决它`config/application.ini`：

```
;includePaths.library = APPLICATION_PATH "/../library" 
```

我希望这能帮到您。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-10-23T11:10:06.050

另一个可能的罪魁祸首是源代码控制和未解决的冲突。SVN可能会导致同一个类在冲突的代码文件中出现两次；它的两个替代版本（“我的”和“他们的”）。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-11-12T10:54:49.763

我遇到了同样的问题：较新的 php 版本不处理相同文件的多个包含（作为库），所以现在我必须通过一些 include_once 更改我的所有包含。

或者这个技巧可能会有所帮助，如果你的图书馆里没有太多的课程......

```
if( class_exists('TestClass') != true )
{
   //your definition of TestClass
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-04-11T12:27:53.997

我遇到了同样的问题“PHP 致命错误：无法重新声明类 XYZ.php”。

我有两个目录`controller`，`model`我在两个目录中错误地上传了 XYZ.php。（所以同名文件会导致问题）。

### 第一个解决方案：

在您的整个项目中查找并确保您只有一个类 XYZ.php。

### 第二种解决方案：

在您的类中添加一个命名空间，以便您可以使用相同的类名。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2011-07-04T11:35:35.747

我遇到了同样的问题。发现案例是类名。我通过更改名称来处理它。从而解决问题。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-12-25T05:19:39.960

这实际上意味着该类已经在页面中声明并且您正在尝试重新创建它。

一个简单的技术如下。

我用以下方法解决了这个问题。希望这会对您有所帮助。

```
if(!class_exists("testClassIfExist"))
{
    require_once("testClassIfExist.php");
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-11-04T22:03:12.770

您必须使用 require_once() 函数。

# mysql - 如何在 1 个查询中以 1:n 关系计算两个表中的所有记录？

> ID：708145
> 
> 赞同：2
> 
> 时间：2009-04-02T03:13:44.027
> 
> 标签：mysql, join, left-join

我猜这是一个相当简单的问题，但我已经多次遇到这个问题，我无法通过搜索（也许我不知道要搜索什么）或反复试验找到解决方案。

我有以下表结构和数据：

```
CREATE TABLE `table_a` (
  `id` int(11) NOT NULL auto_increment,
  `table_b_id` int(11) NOT NULL,
  `field` varchar(10) NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `table_b_id` (`table_b_id`)
);

INSERT INTO `table_a` VALUES(1, 1, 'test 1');
INSERT INTO `table_a` VALUES(2, 1, 'test 2');
INSERT INTO `table_a` VALUES(3, 0, 'test 3');

CREATE TABLE `table_b` (
  `id` int(11) NOT NULL auto_increment,
  `name` varchar(10) NOT NULL,
  PRIMARY KEY  (`id`)
);

INSERT INTO `table_b` VALUES(1, 'value 1');
INSERT INTO `table_b` VALUES(2, 'value 2'); 
```

如您所见， id 2 in`table_b`未使用 in`table_a`并且 id 3 in`table_a`的值为 0 `table_b_id`。我想要做的是检索 b 中每个值在 中使用的次数的计数`table_a`，包括 2 from`table_b`和所有不在中的值的计数`table_b`。

我想出了以下查询：

```
SELECT b.name, COUNT(a.id) AS number
FROM table_a AS a
LEFT JOIN table_b AS b ON (b.id = a.table_b_id)
GROUP BY a.table_b_id 
```

但它显然只返回以下内容：

```
name       number
-----------------
null       1
value 1    2 
```

如何仅使用 SQL 获得以下信息：

```
name       number
-----------------
null       1
value 1    2
value 2    0 
```

我正在使用 MySQL。我猜答案很简单。

**编辑：**除了联合查询之外没有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T03:16:22.850

```
SELECT b.name, SUM(case when a.id is null then 0 else 1 end) AS number
FROM table_a AS a
RIGHT JOIN table_b AS b ON (b.id = a.table_b_id)
GROUP BY b.id 
```

如果你想得到空行，那很特别。我相信你必须联合它。

```
SELECT b.name, SUM(case when a.id is null then 0 else 1 end) AS number 
FROM table_a AS a
RIGHT JOIN table_b AS b ON (b.id = a.table_b_id)
GROUP BY b.id
UNION
select null, count(1) from table_a where table_b_id not in ( select id from table_b ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T13:11:54.697

你想在这里做的事情叫做`FULL OUTER JOIN`.

就目前而言，`MySQL`缺少此功能，这意味着您需要使用 a 来模拟 is `UNION`（这还不错，因为您仍然在单个查询中执行此操作）。

```
SELECT  name, SUM(IF(a.id IS NULL, 0, 1))
FROM    table_b b
LEFT JOIN
        table_a a
ON      a.table_b_id = b.id
GROUP BY
        b.id
UNION ALL
SELECT  name, COUNT(*)
FROM    table_a a
LEFT JOIN
        table_b b
ON      b.id = a.table_b_id
WHERE   b.id IS NULL
GROUP BY
        b.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-05T08:54:44.643

[Xaprb](http://www.xaprb.com/blog/2006/05/26/how-to-write-full-outer-join-in-mysql/)在这篇文章中对解决此问题的各种方法进行了冗长的讨论。他展示了如何避免使用 a `UNION`，尽管替代机制需要一个额外的“互斥”表，并且他建议它比使用`UNION`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T13:01:45.343

这个嵌套查询适用于 mysql 5

```
SELECT b.name, (SELECT COUNT( * ) FROM table_a AS a WHERE a.table_b_id = b.id) AS amount FROM table_b AS b 
```

# iphone - 如何引用静态库的属性

> ID：708155
> 
> 赞同：0
> 
> 时间：2009-04-02T03:16:50.367
> 
> 标签：iphone, objective-c, xcode

我正在引用另一个项目的目标静态库。我成功地遵循[了这个网站的指示](http://tinyurl.com/cleuhw)。下面是使用`FileIO`从库中命名的类的项目。

我创建一个`FileIO`对象并将一个字符串分配给它的 name 属性。然后我得到一个`__TERMINATING_DUE_TO_UNCAUGHT_EXCEPTION__`关于名称的分配。

在`applicationDidFinishLaunching`我这样做：

```
fileObj = [[FileIO alloc] init];
fileObj.name = @"test"; 
```

这是在 .h 文件中：

```
@class FileIO;

@interface Nav1AppDelegate : NSObject <UIApplicationDelegate> {

    UIWindow *window;
    UINavigationController *navigationController;
    FileIO *fileObj;
} 
```

在库中，`FileIO`是一个简单的类，其中包含名称。我也尝试过`[fileObj setName:@"test"]`，但得到了相同的结果。这是堆栈跟踪：

```
2009-04-01 20:37:17.721 NavNew[81425:20b] *** -[FileIO setName:]: unrecognized selector sent to instance 0x5219b0

2009-04-01 20:37:17.723 NavNew[81425:20b] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[FileIO setName:]: unrecognized selector sent to instance 0x5219b0'

2009-04-01 20:37:17.724 NavNew[81425:20b] Stack: (

    2454561035,
    2461146683,
    2454590218,
    2454583564,
    2454583762,
    11275,
    816111650,
    816149355,
    2455110190,
    2454063909,
    2454064344,
    827745792,
    827745989,
    816114848,
    816160924,
    11128,
    10982
)
(gdb) 
```

我发现这只是实例成员（属性或方法）的问题。静态方法工作正常。我还在托管项目中打开了库 .a 文件。我在其中的任何地方都看不到实例属性。

关于我做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T15:30:22.127

在您用于“导入”静态库的[说明](http://t-machine.org/index.php/2009/02/26/using-shared-libraries-for-iphone-with-multiple-projects/)中，作者描述了几种随机发生的奇怪错误的情况，这就是为什么我建议采用不同的方法：使用 Xcode 跨项目引用和共享构建输出目录。这是一个带有屏幕截图的教程的链接：http: [//www.clintharris.net/2009/iphone-app-shared-libraries/](http://www.clintharris.net/2009/iphone-app-shared-libraries/)

几个月来，我一直在使用这个策略来处理多个项目和静态库——这很棒，而且我没有遇到任何问题。另一个非常好的好处是您使用 Xcode 环境变量来引用带有静态库（包括头文件）的项目；如果您有多个开发人员在同一个项目上工作，需要移动目录等，这使得解决方案非常灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T04:09:11.567

由于某种原因，`FileIO`您拥有的对象没有响应该`setName:`消息，因此`NSInvalidArgumentException`当您尝试发送该消息时它会抛出一个。我最好的猜测是共享库由于某种原因没有被正确`setName:`加载，所以没有加载的实现，所以运行时会感到困惑并认为`setName:`没有实现。

我不知道如何解决这个问题，但看起来确实`[[FileIO alloc] init]`成功了（或者至少到了不抛出异常的地步），所以至少有些东西在起作用。要获取允许的消息列表，您可以尝试以下操作：

```
unsigned int methodCount;
Method *methods = class_copyMethodList(object_getClass(fileObj), &methodCount);
for(unsigned int i = 0; i < methodCount; i++)
    NSLog(@"Method %u: %s", i, sel_getName(method_getName(methods[i])));
free(methods); 
```

有关各种 Objective-C 运行时方法的信息，请参阅[Objective-C 2.0 运行时参考](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)。

# html - XML-RPC 与 HTML 表单

> ID：708156
> 
> 赞同：1
> 
> 时间：2009-04-02T03:16:58.807
> 
> 标签：html, xml-rpc

谁能向我解释在直接 HTML 表单上使用 XML-RPC 的好处？乍一看，他们似乎完成了同样的事情。XML-RPC 使用 XML 进行“格式化”，但您可以在表单中执行相同的操作（想想文本框）。

我有一个应用程序从客户端 PC 上运行的脚本中获取数据。脚本的输出是 XML。目前它通过表单 POST 提交给应用程序（使用 CodeIgniter 的 PHP）。我被告知要考虑使用 XML-RPC，但我试图理解“为什么”......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T04:02:16.857

XML-RPC 的主要好处是您不必编写任何（或几乎任何）胶水代码来让远程进程进行通信。有多种 XML-RPC 客户端库可用于多种语言。如果您拥有丰富的 API 函数，XML-RPC 可以是一种将远程进程连接到该 API 的非常简单的方法。使用普通的 www-form-encoded POST 执行相同的任务将需要您将 API 转换为表单并将请求分派到 api 调用中。有一些系统可以帮助解决这个问题，但肯定比仅仅通过 XML-RPC 公开 API 更困难。

另一方面，如果（听起来）您已经拥有通过纯格式编码请求公开的丰富 API，那么很难证明将客户端和服务器都移植到另一个接口的工作是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T03:39:42.077

如果您的意思是以 www-form-encoded（或“查询字符串样式”）格式编码数据与 POSTing XML-RPC，这真的是一个口味问题。有些人喜欢对所有事情都使用 XML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T04:03:49.117

在我看来，XML-RPC 有点过时了。除非您谈论的是不同的协议，否则这是 SOAP 之前的协议。我根本不会使用它。相反，我要么使用基于 SOAP 的服务，要么使用基于 REST 的服务。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-02T03:32:33.293

HTML 表单无法与 XML-RPC 相提并论。

您使用 HTML 表单通过 WebPage 获取一些输入数据，同时使用 XML-RPC 使用 XML 执行远程过程。

通常，您将 XML-RPC 用于没有 UI 尝试远程执行某些过程的进程。

# hosting - 我的 IP 似乎被网络托管服务器阻止

> ID：708163
> 
> 赞同：-1
> 
> 时间：2009-04-02T03:23:31.427
> 
> 标签：hosting, ip, blocking, shared

我有一个奇怪的问题，我刚刚在共享主机上安装了我的 php 网站，所有服务都运行良好。但是在配置我的应用程序后，我只能访问我的网站一次，其他尝试给出：

> “服务器响应时间过长。”。

但是从我可以访问的其他IP，但只能访问一次，似乎所有IP地址在第一次访问后都被阻止（甚至ftp和其他服务都关闭了，根本无法从IP访问），任何人都可以帮助探索这个问题吗？我不认为这是我的应用程序问题，该应用程序在我的本地 PC 上运行良好。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T03:26:46.100

首先要尝试的是跟踪路由，以确定您的流量被阻止的位置。

在 Windows 命令提示符下：

```
tracert www.yoursharedhostingserver.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T03:25:04.670

如果您可以在它实际工作时访问它，则很有可能。问题很可能在 php 代码中而不是在服务器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T18:58:01.277

目前，尝试访问此地址会给出：

> 致命错误：在第 181 行的 /home/myicms/public_html/core/application/crApplication.class.php 中找不到类 'mainController'

我已经尝试了很多次，它并没有阻止我。可能你已经解决了这个问题。

据我所知，你所描述的行为只能由配置不当的智能防火墙来解释。您的主机可能配置错误。

如果您访问某个主机上的站点并且突然无法访问该主机上的 ftp，那么它要么是（非常糟糕的）防火墙，要么是（非常卑鄙的）站点，它明确添加了防火墙规则以忽略该地址。

您可能会研究的一些事情：

它也可能与identd有关。您在主机上配置的服务是什么？是否有任何类型的服务器控制面板（可能具有控制防火墙的能力）？

封锁是永久性的，还是在 24 小时后关闭，还是仅在重新启动服务器后才关闭？重新启动某些服务是否会使封锁解除？

您是否安装了任何“保护您的服务器免受端口扫描”的软件？这可能有点过于激进了。

祝你好运找到这个问题的根源！

# java - Java 重构工具

> ID：708164
> 
> 赞同：8
> 
> 时间：2009-04-02T03:23:38.963
> 
> 标签：java, eclipse, refactoring, eclipse-jdt

> **可能重复：**
> [像 ReSharper 这样的工具，但适用于 Java？](https://stackoverflow.com/questions/615334/a-tool-like-resharper-but-for-java)

我非常大量地使用 Eclipse 提供的 Java 代码重构工具（提取接口、重命名方法等）。有谁知道其他类似的工具（最好是 Eclipse 插件）可以执行默认情况下在 Eclipse 中不可用的 Java 代码重构，或者可以更好地执行相同的重构？

我知道可以识别需要重构的代码的各种 Eclipse 插件（例如 FindBugs、UCDetector），但我正在寻找能够真正进行重构的工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T04:09:58.897

RefactorIT... 可作为独立产品和 Eclipse 插件使用。唯一的缺点是，对于非开源项目，您被限制为 50 个类（但可以通过拆分为多个 Eclipse 项目并使用依赖项来解决这个问题）。RefactorIT 还具有代码生成工具，例如“封装字段”，您可以在包视图中选择（多个）字段（无论在哪里），它会自动创建 getter 和/或 setter，对于构造函数也是如此......很棒的工具！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T03:40:53.133

我同意*nevster*的观点，即 IntelliJ 的重构工具集更加完整和微妙。我已经使用它很长一段时间了，并且通过自动代码生成（本质上是相同的东西），一个广泛的重构工具包是使它与 Eclipse 相比真正脱颖而出的特性。

但是，我不建议如此轻易地迁移到 IntelliJ，原因有很多，随着时间的推移会变得非常烦人：

*   它不是免费的（我什至会说它很贵）
*   它有一个巨大的内存占用（半个 Gb？wtf？）并且启动速度很慢
*   它不能与基于 X 的窗口管理器很好地交互（在某些极端情况下会导致无声数据损坏）

因此，您必须平衡更好（诚然，非常出色）重构工具包的优势与 IntelliJ 的重量（字面意思）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T03:32:50.877

好吧，您可以免费试用 IntelliJ，感受一下它所能做的一切。它满足您的“在 Eclipse 中不可用”和“更好地执行相同的重构”但显然不是“最好的 Eclipse 插件”:)

这是一个概述： http: [//www.jetbrains.com/idea/features/refactoring.html](http://www.jetbrains.com/idea/features/refactoring.html)

# c# - 实体框架内存使用

> ID：708172
> 
> 赞同：5
> 
> 时间：2009-04-02T03:28:21.417
> 
> 标签：c#, .net, entity-framework

在将新对象插入数据库时​​，实体框架似乎使用了过多的内存。

```
for(int i = 0; i < numOwners; ++i)
{
    var owner = Owner.CreateOwner();
    db.AddToOwnerSet(owner);
    for(int j = 0; j < numChildren; ++j)
    {
        var child = Child.CreateChild();
        owner.Childs.Add(child);
    }
}
db.SaveChanges(); 
```

此时，这些对象包含很少的数据元素。将 140,000 个这些对象插入数据库时​​，应用程序的总内存使用量为 600 MB，而 300,000 则为 1.2 GB。这些对象很小，只是一个字符串名称和一个整数键。

我可以通过将 SaveChanges 调用放入循环来减少内存使用量，但是执行时间会变得更糟，而且已经很糟糕了。

任何人都知道为什么实体框架使用这么多内存，或者如何让它使用更少的内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T03:47:01.183

由于实体框架将数据保存在内存中（许多 ORM 也是如此），因此与许多内存中的集合一样，可能存在内部数组。当您将项目添加到集合中时，内部数组的容量会增加一倍。

例如，如果您有一个像 ArrayList 这样的集合，其中包含 256 个项目，并向其中添加第 257 个项目，那么内部发生的情况是为 512 个项目的数组分配了一个新的内存块，他们将 256 个项目的数组复制到新的512 项数组，然后 256 项数组可用于垃圾回收。因此，在过渡点，您将在内存中分配 768 个项目，因为您添加了第 257 个项目。在使用 memorystream 时，我对此感到头疼，因为您需要的连续未分段内存几乎是您真正需要的内存的 3 倍。这是您在集合中看到的 .Capacity 属性，它几乎总是 2 的幂（因为它会根据需要加倍）。

我敢打赌，内部数组的大小会根据需要增加一倍，以支持您的内存对象集合。因此，300,000 个相同类型的对象可能会保存在大小为 524,288 的内部数组中。此外，如果它类似于 .NET Framework 中其他地方的类似技术，那么每当添加第 262145 项时，内存中都存在 262144 和 524288 的数组，同时将这些项复制到新数组中。内存中共有 786432 项。旧数组会一直存在，直到垃圾收集器决定不再需要它。

实体框架中可能有一些关于并发支持的选项，您可以禁用这些选项可能会提高内存使用率。我只是在这里推测，但为了支持并发，它们将当前版本的数据存储在内存中，并且它是用于比较支持并发的原始版本。

我还会考虑过滤您正在与之交互的数据。尝试找到巧妙的标准来限制在内存中查询和加载的内容。例如，如果您有一个允许用户编辑客户帐户的应用程序，但只分配了某些帐户，则将其用作您的过滤条件，以便您仅将用户可能与之交互的那些帐户加载到内存中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-12-16T20:17:51.013

我知道这是一个老问题，但我今天遇到了同样的问题并设法找出导致它的原因！

似乎 SQL 脚本的生成是造成内存大跳跃的原因。我发现创建存储过程并将它们链接到我的对象（但请确保您返回[本文](http://learnentityframework.com/LearnEntityFramework/tutorials/using-stored-procedures-for-insert-update-amp-delete-in-an-entity-data-model/)中所示的 id 值）为我节省了超过 300mb 的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T10:09:51.187

就实际数据而言，您的对象可能是“小”的，但每个对象都不是 DTO - 实体框架将大量样板代码附加到您的每个实体，这意味着每个对象的实际大小非常大。

如果您一直在使用大型对象图，请考虑使用 NHibernate 之类的东西，它稳定、成熟且被证明可以工作。实体框架在功能和性能方面远远落后。

# dll - VS2005，如何设置应用程序使用应用程序路径中的某个dll？

> ID：708183
> 
> 赞同：1
> 
> 时间：2009-04-02T03:33:17.380
> 
> 标签：dll, visual-studio-2005, path

我通过 WinDebug 打开我的应用程序，看到以下信息，但一些 dll 正在使用路径：C:\WINDOWS\WinSxS\x86_Microsoft.VC80.MFC_1fc8b3b9a1e18e3b_8.0.50727.762_x-ww_3bf8fa05。这是否意味着当我在其他PC上部署此应用程序时，如果路径不包含dll，应用程序将无法初始化？我正在使用 vs2005 编写应用程序，如何修改应用程序以使用应用程序路径中包含的某个 dll？

```
ModLoad: 77d10000 77d9f000   C:\WINDOWS\system32\USER32.dll
ModLoad: 77ef0000 77f38000   C:\WINDOWS\system32\GDI32.dll
ModLoad: 782e0000 783ef000   C:\WINDOWS\WinSxS\x86_Microsoft.VC80.MFC_1fc8b3b9a1e18e3b_8.0.50727.762_x-ww_3bf8fa05\MFC80U.DLL
ModLoad: 78130000 781cb000   C:\WINDOWS\WinSxS\x86_Microsoft.VC80.CRT_1fc8b3b9a1e18e3b_8.0.50727.3053_x-ww_b80fa8ca\MSVCR80.dll
ModLoad: 77be0000 77c38000   C:\WINDOWS\system32\msvcrt.dll
ModLoad: 77f40000 77fb6000   C:\WINDOWS\system32\SHLWAPI.dll
ModLoad: 77da0000 77e49000   C:\WINDOWS\system32\ADVAPI32.dll
ModLoad: 77e50000 77ee2000   C:\WINDOWS\system32\RPCRT4.dll
ModLoad: 77fc0000 77fd1000   C:\WINDOWS\system32\Secur32.dll
ModLoad: 762f0000 762f5000   C:\WINDOWS\system32\MSIMG32.dll
ModLoad: 7d590000 7dd83000   C:\WINDOWS\system32\SHELL32.dll
ModLoad: 76990000 76acd000   C:\WINDOWS\system32\ole32.dll
ModLoad: 71a20000 71a37000   C:\WINDOWS\system32\WS2_32.dll
ModLoad: 71a10000 71a18000   C:\WINDOWS\system32\WS2HELP.dll
ModLoad: 7c420000 7c4a7000   C:\WINDOWS\WinSxS\x86_Microsoft.VC80.CRT_1fc8b3b9a1e18e3b_8.0.50727.3053_x-ww_b80fa8ca\MSVCP80.dll
ModLoad: 4ec50000 4edf6000   C:\WINDOWS\WinSxS\x86_Microsoft.Windows.GdiPlus_6595b64144ccf1df_1.0.2600.5581_x-ww_dfbc4fc4\gdiplus.dll 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T03:36:45.750

我建议你阅读[Side-by-side Assemblies](http://msdn.microsoft.com/en-us/library/aa376307.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-15T06:28:39.560

> 这是否意味着当我在其他PC上部署此应用程序时，如果路径不包含dll，应用程序将无法初始化？

是的，它会失败。您可以使用[Microsoft Visual C++ 2005 Redistributable Package](http://www.microsoft.com/downloads/details.aspx?familyid=32bc1bee-a3f9-4c13-9c99-220b62a191ee&displaylang=en)在目标机器上设置运行时库。或者将您的应用程序静态链接到运行时库（它不依赖于运行时 dll）。

# php - 如何将所有换行符加倍？

> ID：708184
> 
> 赞同：3
> 
> 时间：2009-04-02T03:34:41.540
> 
> 标签：php, regex

> **编辑**：下面描述的问题只是由我的 IDE 的“功能”引起的，所以正则表达式实际上没有任何问题。如果您对如何将换行符加倍感兴趣，那么您可以在一个简洁的包中找到您的问题和答案。:)

我想将字符串中的每个换行符更改为两个换行符：

```
"this is
an example
string"
// becomes:
"this is

an example

string" 
```

但是，它需要考虑 Unix/Windows 行尾。我已经编写了下面的代码，但它本身并没有表现出来。

```
$output = preg_replace("/(\r?\n)/", "$1$1", $input); 
```

但它不起作用。将替换字符串更改为此...

```
"$1 $1" 
```

...让它工作，但我之间有一个不需要的空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T04:35:13.767

等等。您只是直接将其输出到浏览器吗？你**查看源代码了吗？** 返回不显示在 HTML 中。如果您想将返回视为换行符，请尝试在`<pre>`之前和之后放置。`</pre>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T03:44:29.350

那很有意思。我刚刚在两个不同的 UNIX 系统（Ubuntu 和 FreeBSD 盒子，作为记录）上测试了您的示例代码。在这两种情况下，它都完全按照您所说的那样工作。因此，您的平台或您的配置可能有部分问题。

# flash - 尝试制作指向网站的 Flash 广告链接

> ID：708186
> 
> 赞同：0
> 
> 时间：2009-04-02T03:35:01.243
> 
> 标签：flash, linker, image

我有三个 Flash 广告需要充当广告商网站的直接链接。我无法让它工作！我将代码直接放入广告中，光标现在将出现在广告上方，但不会点击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T19:19:27.257

我将假设您使用的是 ActionScript 3。如果没有，您只需将项目的设置更改为 ActionScript 3，前提是横幅中没有其他代码。

转到第一个关键帧并编写以下代码：

```
stage.addEventListener(MouseEvent.CLICK, onClick);

function onClick(evt:MouseEvent):void {
    var req:URLRequest = new URLRequest('http://www.stackoverflow.com');
    navigateToURL(req);
} 
```

不过，鼠标光标不会变成一只手。您必须在最顶层创建一个透明的影片剪辑，然后代替之前的代码，编写：

```
 myMC.addEventListener(MouseEvent.CLICK, onClick);
 myMC.buttonMode = true;

function onClick(evt:MouseEvent):void {
    var req:URLRequest = new URLRequest('http://www.stackoverflow.com');
    navigateToURL(req);
} 
```

你的moviclip必须是舞台的高度和宽度，并且有一个任何颜色和0%不透明度的矩形。

PS：显然，替换`http://www.stackoverflow.com`为您希望横幅指向的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-11T00:18:21.763

如果您想要一个简单的复制和粘贴可重复使用的 AS3 解决方案，请将此代码粘贴到 .fla 中，然后重新发布：

```
 // change this to the url you want to go to, and use "_self" or "_blank"
// to open the url when clicked in the same window, or in a new one
makeAllClickable("http://www.stackoverflow.com", "_blank");

var url: String;
var window: String;
function makeAllClickable(_url: String, _window: String) : void
{
    url = _url;
    _window = _window;
    var clickArea: Sprite = new Sprite();
    clickArea.graphics.beginFill(0,0);
    clickArea.graphics.drawRect(0,0,stage.stageWidth,stage.stageHeight);
    clickArea.buttonMode = clickArea.useHandCursor = true;
    stage.addChild(clickArea);
    clickArea.addEventListener(MouseEvent.CLICK, gotoURL);
}
function gotoURL(event: MouseEvent) :  void
{
    navigateToURL(new URLRequest(url), window);
}
```

# csla - CSLA 3.6 - 在配置文件中找不到数据库名称

> ID：708195
> 
> 赞同：0
> 
> 时间：2009-04-02T03:40:23.883
> 
> 标签：csla

我正在使用 CSLA 3.6

我不断收到错误：

DataPortal.Fetch 失败（在配置文件 (AdventureWorksLT) 中找不到数据库名称）

我的 Dataportal_Fetch 代码如下所示：

```
Private Overloads Sub DataPortal_Fetch(ByVal criteria As SingleCriteria(Of Customer, Integer))
    Using ctx = ContextManager(Of DalLinq.AdventureWorksDataContext).GetManager(DalLinq.Database.AdventureWorksLTConnectionString)
        Dim data = (From p In ctx.DataContext.Customers Where p.CustomerID = criteria.Value Select p).Single
        LoadProperty(Of Integer)(CustomerIdProperty, data.CustomerID)
        LoadProperty(Of String)(CompanyNameProperty, data.CompanyName)
    End Using
End Sub 
```

我的 Database.vb 文件如下所示：

```
Public Class Database

    Public Const AdventureWorksLTConnectionString As String = "AdventureWorksLT"

End Class 
```

我的 App.Config 文件包含以下内容（由于stackoverflow，用 ( 和 ) 替换 < 和 > 字符：

```
(connectionStrings)
    (add name="AdventureWorksLT" connectionString="Data Source=(local);Initial Catalog=AdventureWorksLT;User Id=AdvWorks;Password=UserPW;"
            providerName="System.Data.SqlClient" /)
   (/connectionStrings) 
```

我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T06:24:05.617

确保您使用的是正确的 app.config 文件。ConfigurationManager 查看当前正在运行的项目（即您的测试项目和/或您的 Windows 窗体/控制台应用程序）。

ContextManager 的默认行为是使用 ConfigurationManager 来查找命名的连接字符串，除非您将 true 传递给 ContextManager 中的第二个参数，那么它将只使用提供的字符串作为连接字符串。

# php - php 数组。如何格式化我的结果

> ID：708199
> 
> 赞同：0
> 
> 时间：2009-04-02T03:43:14.063
> 
> 标签：php

我对 php 很陌生，并且可以肯定地使用一些帮助来理解如何从数据库查询中以我需要的方式获取我的结果。

我需要的是一个像这样的关联数组，'bla'=>'bla'。我从我的 foreach 循环中得到的是来自打印的：

```
[0] => Array
    (
        [0] => test0
        [name] => test0
        [1] => 1
        [customer_id] => 1
    )

[1] => Array
    (
        [0] => test
        [name] => test
        [1] => 2
        [customer_id] => 2
    ) 
```

这是我的循环：

```
foreach($res as $key=>$val)
{
  // have no idea..
} 
```

有人可以帮我格式化我的结果，使它们像'index'=>'value'

谢谢你的帮助。

* * *

这是一个示例代码，它使用了一个 foreach 但还拉了一个关联。我不明白。我认为我的索引结果集是因为我没有正确编写循环。这是使用 foreach 的代码

```
foreach ($items as $key=>$value) {
    if (strpos(strtolower($key), $q) !== false) {
        echo "$key|$value\n";
    }
} 
```

* * *

这是我用来获取结果的数据库类的一部分。

```
$returnArray = array();
$i=0;
while ($row = mysql_fetch_array($result, MYSQL_BOTH)) {
    if($row)
        $returnArray[$i++] = $row;
}
mysql_free_result($result);
return $returnArray; 
```

在使用给我的代码省略索引号之后，这就是我现在剩下的。它很接近但不是我需要的。

数组（ [id] => 1 [cust] => bobs auto ）

这就是上面的行应该是这样的

```
'1' => 'bobs auto' 
```

我要做的是为建议框的 JSON 调用格式化输出。

我不能让它工作。这是我的数据库连接后的所有内容。

```
$out_array = array();
foreach($items as $key=>$val)
{
    if(is_int($key))
    {
      continue;
    }
    $out[$key['id']] = $val['cust'];
}

//echo'<pre>';
//print_r($out_array);
//echo'</pre>';

foreach ($out_array as $key=>$value) {
    if (strpos(strtolower($key), $q) !== false) {
        echo "$key|$value\n";
    }
} 
```

* * *

好的，我想我要回到最后阶段了。我有我需要的东西。这是我到目前为止的代码。

```
$out_array = array();
foreach($items as $key)
{
    $out_array[$key] = $val;
//$out_array[$key['id']] = $key['cust'];
} 
```

请注意，注释行不起作用，它像 id 一样输出两次，但未注释掉的行工作得很好。这是它的输出。

```
Array
(
    [8] => 
    [FAT BURGER] => 
) 
```

从这一点来看，我会不会只使用另一个 foreach 来遍历整个数据集？您在上面看到的数组输出来自 print_r。

* * *

这就是我现在拥有的，它返回正确的关联但是，我必须注释掉 strpos 条件才能得到任何结果，我不知道为什么。我像我一样嵌套这些 foreach 循环是否正确？

```
$out_array = array();
foreach($items as $key)
{
  //    $out_array[$key] = $val;
  $out_array[$key['id']] = $key['cust'];

  foreach ($out_array as $key=>$value)
  {
      if (strpos(strtolower($key), $q) !== false)
      {
          echo "$key|$value\n";
      }
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T03:46:26.757

所以你不想要你的数组中的数字索引？您必须使用[mysql_fetch_array()](http://php.net/mysql_fetch_array)，它使用数字键和字符串键返回结果。使用[mysql_fetch_assoc()](http://php.net/mysql_fetch_assoc)获取仅包含字符串键的数组（字符串为列名）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T03:54:08.047

假设这是一个 MySQL 数据库，结果（如果有多个）作为多维数组返回。

当您运行查询时：

```
$query = "SELECT * FROM Table WHERE ...";
$query = mysql_query($query);

while($info = mysql_fetch_assoc($query)){

    //$info is now a single row, associative array
    echo print_r($info);
} 
```

echo print_r 现在以您正在查找的方式显示结果 'index'=>'value'

编辑：基于评论。

如果你绝对不能摆脱 mysql_fetch_array 那么你将不得不破解代码。它不干净，我强烈建议重构，但下面是您需要的代码，仅根据您给出的内容创建字段名称索引数组

```
$my_array = array();
$info = $data[0]; //grab the first row of your data set from the original question.
    foreach($info as $index => $value){
        if(!is_int($index)){
            $my_array[$index] = $value;
        }
    } 
```

新创建的 $my_array 将采用您正在寻找的格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T04:00:43.663

尝试这样的事情。它通过跳过整数索引并将非整数索引放入输出数组来工作。

```
$out_array = array();
foreach($res as $key=>$val) {
    if(is_int($key)) {continue;}
    $out_array[$key] = $val;
} 
```

编辑：

```
$out_array = array();
foreach($items as $key=>$val)
{
    if(is_int($key))
    {
      continue;
    }
}
$out[$out_array['id']] = $out_array['cust'];

//echo'<pre>';
//print_r($out_array);
//echo'</pre>';

foreach ($out as $key=>$value) {
    if (strpos(strtolower($key), $q) !== false) {
        echo "$key|$value\n";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T03:50:40.380

你从 PHP 的查询和结果函数中得到了这个数组，是吗？

如果您使用的是 mysql，实际上像下面这样更容易。

```
$query = mysql_query("SELECT * FROM dbname"); //Create the query to your database
while($data = mysql_fetch_array($query)) //Loop through our results from the query
{
    echo($data['fieldname']."<br/>"); //echo out data through the loop
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T04:45:17.597

```
$ret = array();

foreach($rows as $row)
{
    $ret[$row['id']] = $row['cust'];
}

$json = json_encode($ret);

echo $json;
// Prints something like:
//
// {1:'bob'} 
```

注意使用[`json_encode`](http://us.php.net/json_encode).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-02T06:05:32.193

好的，关于我的最后一个问题。我在嵌套 foreach 循环时不正确。我的代码中也有错字。它终于奏效了。感谢所有帮助过我的人！

# svn - Git 格式补丁与 svn 兼容？

> ID：708202
> 
> 赞同：99
> 
> 时间：2009-04-02T03:45:13.777
> 
> 标签：svn, git, format-patch

有什么方法可以让使用 git format-patch 创建的补丁与 svn 兼容，以便我可以将其提交到 svn repo？

我正在 github 上处理一个 svn 存储库，并希望将我的更改提交回主存储库。我需要创建一个补丁来执行此操作，但是无法应用该补丁，因为 git 格式的补丁与 svn 不同。有什么我还没有发现的秘密吗？

**更新：**虽然目前不存在执行此操作的脚本或本机 git 方法，但我确实设法从今年早些时候找到了一篇关于如何手动完成此操作的帖子。我已按照说明操作并成功让我的 git 补丁与 svn 一起使用。

如果有人可以尝试编写脚本来完成此任务并为 git 项目做出贡献，我将不胜感激。

[http://kerneltrap.org/mailarchive/git/2008/1/15/570308/thread#mid-570308](http://kerneltrap.org/mailarchive/git/2008/1/15/570308/thread#mid-570308)

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-11-14T11:01:21.933

我总是要谷歌这个，但我发现（对我来说）完美的方式是：

*   使用 创建补丁`git diff --no-prefix master..branch > somefile.diff`，master 和 branch 部分是可选的，取决于你想要如何获得你的差异。
*   将其发送到任何地方并使用 申请`patch -p0 < somefile.diff`。

它似乎对我来说总是很好，并且似乎是我遇到的最简单的方法。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-03-24T13:38:51.060

简短的回答是`patch -p1 -i {patch.file}`。

有关详细信息，请参阅此博客：[使用 git 创建 Subversion 补丁](http://codeprairie.net/blogs/chrisortman/archive/2008/01/14/creating-subversion-patches-with-git.aspx)。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2010-11-29T21:16:15.120

这是一个帮助脚本，用于针对最新的 svn 变更集和给定的提交进行差异：http: [//www.mail-archive.com/dev@trafficserver.apache.org/msg00864.html](http://www.mail-archive.com/dev@trafficserver.apache.org/msg00864.html)

```
#!/bin/sh
#
# git-svn-diff
# Generate an SVN-compatible diff against the tip of the tracking branch
TRACKING_BRANCH=`git config --get svn-remote.svn.fetch | sed -e 's/.*:refs\/remotes\///'`
REV=`git svn find-rev $(git rev-list --date-order --max-count=1 $TRACKING_BRANCH)`
git diff --no-prefix $(git rev-list --date-order --max-count=1 $TRACKING_BRANCH) $* |
sed -e "s/^+++ .*/&    (working copy)/" -e "s/^--- .*/&    (revision $REV)/" \
-e "s/^diff --git [^[:space:]]*/Index:/" \
-e "s/^index.*/===================================================================/" 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-04-02T04:20:59.667

SVN 可能无法理解 的输出`git diff -p`，但您可以诉诸蛮力：

1.  制作你的仓库的两个克隆
2.  在一个克隆中检查您的最新资料
3.  在另一个克隆结帐中，任何等同于 svn 上游。如果您提前计划好，您在自己的分支上有一份 svn 上游副本，或者您已经标记了最后一个 svn 版本。如果您没有提前计划，请使用 date 或 gitk 查找最接近 svn 状态的 git SHA1 哈希。
4.  `diff -r`现在通过运行两个克隆来计算一个真正的补丁。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2009-12-22T14:20:55.267

Subversion < 1.6 没有补丁支持。看起来 Subversion 1.7 将允许应用补丁，并且统一差异的 git/hg 扩展在我们的 TODO 列表中。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-02T04:20:10.403

这确实是2008 年初的[功能请求](https://web.archive.org/web/20081231045039/kerneltrap.org/mailarchive/git/2008/1/15/570032)

Linus Torvalds 当时说：

> 所以我认为你需要更强大的东西来说“不要做 git diff”，这也应该至少不允许重命名检测。
> 坦率地说，任何愚蠢到不接受当前 git 补丁（即 TortoiseSVN）的程序，那么我们该死的不应该只禁用它最微不足道的部分。我们应该确保我们不启用*任何*相当重要的扩展：
> 即使 ToirtoiseSVN 会忽略它们，如果忽略它们意味着它误解了差异，那么根本不应该允许它。

这可能就是为什么

```
 git-format-patch: add --no-binary to omit binary changes in the patch. 
```

已于 2008 年 5 月/7 月在 Git1.5.6 中引入（虽然我没有测试过）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T21:31:16.133

确保您的更改已提交并重新基于本地 git 分支，从 git bash 运行：

**git show --pretty >> myChangesFile.patch**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-16T03:28:35.027

Nicholas 提供的接受的答案工作正常，除非 a）二进制文件存在于差异中或 b）您在 windows Git 中工作并且目录带有空格。为了解决这个问题，我必须添加一个嵌套的 git diff 命令来忽略二进制文件和 sed 命令来转义空格。写起来有点麻烦，所以我创建了一个别名：

```
[alias]
svnpatch = "!f() { git diff --name-only --no-prefix master...$1 | grep -Ev \"\\.sdf|\\.Doc|\\.dll|\\.zip|\\.exe\" | sed 's_\\s_\\\\\\\\ _g'  | xargs git diff --no-prefix master...$1 > $1.patch; echo "Created $1.patch"; }; f" 
```

如果您随后键入：

```
git svnpatch Feature123 
```

...将使用分支 master 和分支 Feature123 的合并基础之间的差异创建补丁文件 Feature123.patch。

# c# - C# 对象类型比较

> ID：708205
> 
> 赞同：63
> 
> 时间：2009-04-02T03:46:10.250
> 
> 标签：c#, types

如何比较声明为类型的两个对象的类型。

我想知道两个对象是同一类型还是来自同一基类。

任何帮助表示赞赏。

例如

```
private bool AreSame(Type a, Type b) {

} 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2009-04-02T03:58:57.770

说`a`和`b`是两个对象。如果您想查看`a`和`b`是否在同一继承层次结构中，请使用**[`Type.IsAssignableFrom`](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)**：

```
var t = a.GetType();
var u = b.GetType();

if (t.IsAssignableFrom(u) || u.IsAssignableFrom(t)) {
  // x.IsAssignableFrom(y) returns true if:
  //   (1) x and y are the same type
  //   (2) x and y are in the same inheritance hierarchy
  //   (3) y is implemented by x
  //   (4) y is a generic type parameter and one of its constraints is x
} 
```

如果您想检查一个是否是另一个的基类，请尝试**[`Type.IsSubclassOf`](http://msdn.microsoft.com/en-us/library/system.type.issubclassof.aspx)**.

如果您知道具体的基类，那么只需使用`is`关键字：

```
if (a is T && b is T) {
  // Objects are both of type T.
} 
```

否则，您将不得不直接遍历继承层次结构。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2009-04-02T04:28:28.980

不过，这个想法有一点问题，因为每个对象（实际上，每个类型）都有一个公共基类 Object。您需要定义的是您想要在继承链上走多远（无论它们是相同的还是具有相同的直接父级，或者一个是另一个的直接父级，等等）并做你的那样检查。`IsAssignableFrom`对于确定类型是否相互兼容很有用，但不能完全确定它们是否具有相同的父级（如果这是您所追求的）。

如果您的严格标准是函数应该返回 true 如果...

*   类型相同
*   一种类型是另一种类型的父级（直接或其他）
*   这两种类型具有相同的直接父级

你可以使用

```
private bool AreSame(Type a, Type b) 
{
    if(a == b) return true; // Either both are null or they are the same type

    if(a == null || b == null) return false; 

    if(a.IsSubclassOf(b) || b.IsSubclassOf(a)) return true; // One inherits from the other

    return a.BaseType == b.BaseType; // They have the same immediate parent
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-04-02T03:53:57.423

如果您希望两个对象实例属于某种类型，您也可以使用“IS”关键字。这也适用于将子类与父类以及实现接口的类等进行比较。不过，这不适用于 Type 类型的类型。

```
if (objA Is string && objB Is string)
// they are the same.

public class a {}

public class b : a {}

b objb = new b();

if (objb Is a)
// they are of the same via inheritance 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T05:24:56.910

我使用接口和具体类尝试了以下层次结构。它遍历其中一种类型的基类链，直到到达“对象”，在该“对象”处，我们检查当前目标类型是否可分配给源类型。我们还检查类型是否具有公共接口。如果他们这样做，那么他们'AreSame'

希望这可以帮助。

```
 public interface IUser
{
     int ID { get; set; }
     string Name { get; set; }
}

public class NetworkUser : IUser
{
    public int ID
    {
        get;
        set;
    }

    public string Name
    {
        get;
        set;
    }
}

public class Associate : NetworkUser,IUser
{
    #region IUser Members

    public int ID
    {
        get;
        set;
    }

    public string Name
    {
        get;
        set;
    }

    #endregion
}

public class Manager : NetworkUser,IUser
{
    #region IUser Members

    public int ID
    {
        get;
        set;
    }

    public string Name
    {
        get;
        set;
    }

    #endregion
}

public class Program
{

    public static bool AreSame(Type sourceType, Type destinationType)
    {
        if (sourceType == null || destinationType == null)
        {
            return false;
        }

        if (sourceType == destinationType)
        {
            return true;
        }

        //walk up the inheritance chain till we reach 'object' at which point check if 
    //the current destination type is assignable from the source type      
    Type tempDestinationType = destinationType;
        while (tempDestinationType.BaseType != typeof(object))
        {
            tempDestinationType = tempDestinationType.BaseType;
        }
        if( tempDestinationType.IsAssignableFrom(sourceType))
        {
            return true;
        }

        var query = from d in destinationType.GetInterfaces() join s in sourceType.GetInterfaces()
                    on d.Name equals s.Name
                    select s;
        //if the results of the query are not empty then we have a common interface , so return true 
    if (query != Enumerable.Empty<Type>())
        {
            return true;
        }
        return false;            
    }

    public static void Main(string[] args)
    {

        AreSame(new Manager().GetType(), new Associate().GetType());
    }
} 
```

# c# - 如何在 C# 中通过 SSL 使用 HTTP GET 请求？（违反协议）

> ID：708210
> 
> 赞同：9
> 
> 时间：2009-04-02T03:47:12.697
> 
> 标签：c#, http, ssl

我目前正在尝试从在 C# 中使用 SSL 的服务器获取响应。我有在 Java 中执行此操作的代码，但看起来它们没有 1:1 翻译。

我确实有一些我发现适用于常规页面的代码，但不适用于我需要的那个（可能是因为 SSL 的事情）。这是代码：

```
 WebRequest request = WebRequest.Create("https://" + sslServerHost + ":" + sslServerPort);
    request.Proxy = null;
    request.Credentials = CredentialCache.DefaultCredentials;

    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
    Stream dataStream = response.GetResponseStream();
    StreamReader reader = new StreamReader(dataStream);
    string responseFromServer = reader.ReadToEnd(); 
```

更新：对不起，我似乎忘记了错误是什么。我在“HttpWebResponse response = (HttpWebResponse)request.GetResponse();”行中遇到协议违规异常。有任何想法吗？多谢你们。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-02T04:44:53.400

SSL 上的 HTTP 对话使用正确颁发的证书进行验证。

您可以使用 RemoteCertificateValidationCallback 委托来验证 SSL 证书，如下所示：

```
public static void ConnectSSL()
{

    WebRequest request = WebRequest.Create("https://" + sslServerHost + ":" + sslServerPort);
    request.Proxy = null;
    request.Credentials = CredentialCache.DefaultCredentials;

   //allows for validation of SSL certificates 

    ServicePointManager.ServerCertificateValidationCallback += new  System.Net.Security.RemoteCertificateValidationCallback(ValidateServerCertificate);

    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
    Stream dataStream = response.GetResponseStream();
    StreamReader reader = new StreamReader(dataStream);
    string responseFromServer = reader.ReadToEnd();

}

//for testing purpose only, accept any dodgy certificate... 
public static bool ValidateServerCertificate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
{
          return true; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T03:52:19.410

只是一个想法，但你试过用最后的“/”吗？此外 - 您可能会发现这种方法更容易：

```
string s;
using(WebClient client = new WebClient()) {
    client.UseDefaultCredentials = true;
    s = client.DownloadString("https://" + sslServerHost + ":"
       + sslServerPort + "/");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T17:46:57.750

这是我已成功用于测试 SSL 连接的一些测试代码...

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://www.dscoduc.com");
//request.Method = "HEAD";
//request.AllowAutoRedirect = false;
request.Credentials = CredentialCache.DefaultCredentials;

// Ignore Certificate validation failures (aka untrusted certificate + certificate chains)
ServicePointManager.ServerCertificateValidationCallback = ((sender, certificate, chain, sslPolicyErrors) => true); 

HttpWebResponse response = (HttpWebResponse)request.GetResponse();
Stream resStream = response.GetResponseStream();
StreamReader reader = new StreamReader(resStream);
string responseFromServer = reader.ReadToEnd(); 
```

# c# - 使用语句和关闭方法

> ID：708213
> 
> 赞同：14
> 
> 时间：2009-04-02T03:48:42.817
> 
> 标签：c#, .net

与数据库连接对象一起使用时， using 语句是否真的调用了 close 方法？[MSDN 文档](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)说它确保调用 Dispose 方法，但没有提及关闭。我在 Stack Overflow 上看到人们说它两者兼而有之的帖子。是否有人从微软或其他可靠的证据中得到了具体的答案？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-02T03:56:07.637

下面是 SqlConnection 类的“Dispose”方法：

```
protected override void Dispose(bool disposing)
{
    if (disposing)
    {
        this._userConnectionOptions = null;
        this._poolGroup = null;
        this.Close();
    }
    this.DisposeMe(disposing);
    base.Dispose(disposing);
} 
```

如您所见，它确实调用了 Close()

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-02T04:01:32.430

如果您使用`using`语句连接将被关闭，那么实现 IDisposable 的对象在被垃圾收集后将保持打开状态是没有意义的......

但是`Close()`和`Dispose()`不是一回事：

*   `Dispose()``Close()`总是隐式调用。
*   `Dispose()`清除 ConnectionString，`Close()`没有。
*   如果您要再次重新打开连接，则`Close()`不应`Dispose()`

如果你选择使用`Dispose()`不要直接调用它，`using`声明它是最好的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-02T03:52:18.130

调用`Close`方法会调用`Dispose`. 调用哪一个并不重要。

一个具体的例子是[`FileStream.Close()`](http://msdn.microsoft.com/en-us/library/aa328800.aspx)方法：

> Close 的此实现调用 Dispose 方法并传递一个真值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T03:56:32.363

如果任何类实现了 IDisposable 接口，它都可以有一个 Dispose 方法。

MSDN 说：“这个接口的主要用途是释放非托管资源。”

由实现者决定这到底意味着什么。

在 DBConnection 的情况下，disposing 也意味着关闭连接......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-02T06:05:27.717

请记住，所有 Close() 所做的只是将连接释放回连接池。您仍然会注意到与 SQL Server 中的数据库的活动连接。如果您需要确保它也被关闭，您可能需要考虑[ClearAllPools](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.clearallpools(VS.80).aspx)或[ClearPool](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.clearpool(VS.80).aspx)

从 [MSDN](http://msdn.microsoft.com/en-us/library/8xx3tyca(VS.80).aspx) 连接池减少了需要打开新连接的次数。pooler 维护物理连接的所有权。它通过为每个给定的连接配置保持一组活动连接来管理连接。每当用户在连接上调用 Open 时，池化程序都会查看池中是否有可用的连接。如果池连接可用，则将其返回给调用者，而不是打开新连接。**当应用程序在连接上调用 Close 时，池化程序将其返回到池中的活动连接集，而不是实际关闭它。一旦连接返回到池中，它就可以在下一次 Open 调用中被重用。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-02T03:57:33.577

Close 和 Dispose 做同样的事情。他们添加 Close 只是为了便于阅读，因为说您“关闭连接”更自然。

# silverlight - Silverlight 文本框中的捕获选项卡

> ID：708217
> 
> 赞同：7
> 
> 时间：2009-04-02T03:50:29.193
> 
> 标签：silverlight, textbox, tabs

如何捕获在 Silverlight 文本框中输入的选项卡并在其位置呈现 4 个空格（或选项卡）？

我不知道如何阻止标签导航。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-08T00:13:57.023

这是我所做的（类似于 Johannes 的代码）：

```
 private const string Tab = "    ";
    void textBox_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Tab)
        {
            int selectionStart = textBox.SelectionStart;
            textBox.Text = String.Format("{0}{1}{2}", 
                textBox.Text.Substring(0, textBox.SelectionStart),
                Tab,
                textBox.Text.Substring(textBox.SelectionStart + textBox.SelectionLength, (textBox.Text.Length) - (textBox.SelectionStart + textBox.SelectionLength))
                );
            e.Handled = true;
            textBox.SelectionStart = selectionStart + Tab.Length;
        }
    } 
```

即使您选择了一些文本并点击了“Tab”键，这也符合您的预期。

还有一件事：我尝试将制表符字符串设为“\t”，但无济于事。呈现的选项卡，但是是单个空格的宽度 - 因此 Tab const 的值是四个空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T09:23:16.720

我不知道如何解决您的问题，尽管这似乎可行，但我还是拼凑了一个解决方案。

如下设置 KeyDown 事件。

```
expenses.KeyDown += new KeyEventHandler(expenses_KeyDown); 
```

在那种情况下，我输入了以下代码：

```
void expenses_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.Key == Key.Tab)
            {
                expenses.Text += "    ";
                expenses.Focus();
                expenses.LostFocus += new RoutedEventHandler(expenses_LostFocus);
            }
        } 
```

然后在 LostFocus 中：

```
void expenses_LostFocus(object sender, RoutedEventArgs e)
        {
            expenses.Focus();
            expenses.Select(expenses.Text.Length - 1, 0);
        } 
```

LostFocus 的最后一行将编辑光标设置在文本的末尾，否则，当它获得焦点时，光标位置在文本框的开头

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-07-23T22:08:10.250

这对我来说似乎很有效，并且不需要第二个事件处理程序或文本框名称的硬编码：

```
void TabbableTextBox_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.Key == Key.Tab)
            {
                e.Handled = true;

                var tb = ((TextBox)sender);
                tb.Text += "\t";
                tb.Select(tb.Text.Length, 0);
            }
        } 
```

# c++ - 将多个结构的大小读/写到文件时编译错误

> ID：708229
> 
> 赞同：0
> 
> 时间：2009-04-02T03:55:07.500
> 
> 标签：c++, serialization, struct, compiler-errors

我已经问了两个与这个项目有关的问题，我已经得出了这个结论。将 Struct 的大小写入文件，然后将其读回是最好的方法。

我正在为家庭作业创建一个程序，该程序将允许我维护库存。我需要将多个相同类型的结构读/写到一个文件中。

问题是......这真的很复杂，我很难理解整个过程。我看过很多例子，我试图把它们放在一起。我收到编译错误......我对如何修复它们的线索为零。如果您能在这方面帮助我，我将不胜感激……谢谢。我现在很迷茫...

**** 希望最后的编辑 #3 *************

我的代码：

```
// Project 5.cpp : main project file.

#include "stdafx.h"
#include <iostream>
#include <fstream>
#include <string>
#include <vector>
#include <algorithm>

using namespace System;
using namespace std;
#pragma hdrstop

int checkCommand (string line);

template<typename Template>
void readFromFile(Template&);

template<typename Template>
void writeToFile(Template&);

template<typename T>
void writeVector(ofstream &out, const vector<T> &vec);

template<typename Template>
void readVector(ifstream& in, vector<Template>& vec);

struct InventoryItem {
    string Item;
    string Description;
    int Quantity;
    int wholesaleCost;
    int retailCost;
    int dateAdded;
} ;

int main(void)
{
    cout << "Welcome to the Inventory Manager extreme! [Version 1.0]" << endl;

    vector<InventoryItem> structList;

    ofstream out("data.dat");

    writeVector( out, structList );

    while (1)
    {

        string line = "";

        cout << endl;
        cout << "Commands: " << endl;
        cout << "1: Add a new record " << endl;
        cout << "2: Display a record " << endl;
        cout << "3: Edit a current record " << endl;
        cout << "4: Exit the program " << endl;
        cout << endl;
        cout << "Enter a command 1-4: ";

        getline(cin , line);

        int rValue = checkCommand(line);
        if (rValue == 1)
        {
            cout << "You've entered a invalid command! Try Again." << endl;
        } else if (rValue == 2){ 
            cout << "Error calling command!" << endl;
        } else if (!rValue) {
            break;
        }
    }

    system("pause");

    return 0;
}

int checkCommand (string line)
{
    int intReturn = atoi(line.c_str());
    int status = 3;

    switch (intReturn)
    {
        case 1:
            break;
        case 2:
            break;
        case 3:
            break;
        case 4:
            status = 0;
            break;
        default:
            status = 1;
            break;
    }
    return status;
}

template <typename Template>
void readFromFile(Template& t)
{
    ifstream in("data.dat");
    readVector(in, t); Need to figure out how to pass the vector structList via a Template
    in.close();
}

template <typename Template>
void writeToFile(Template& t)
{
    ofstream out("data.dat");
    readVector(out, t); Need to figure out how to pass the vector structList via a Template
    out.close();
}

template<typename T>
void writeVector(ofstream &out, const vector<T> &vec)
{
    out << vec.size();

    for(vector<T>::const_iterator i = vec.begin(); i != vec.end(); ++i)
    {
        out << *i; // SUPER long compile error
    }
}

template<typename T>
vector<T> readVector(ifstream &in)
{
    size_t size;
    in >> size;

    vector<T> vec;
    vec.reserve(size);

    for(int i = 0; i < size; ++i)
    {
        T tmp;
        in >> tmp;
        vec.push_back(tmp);
    }

    return vec;
} 
```

我的编译错误：

```
1>.\Project 5.cpp(128) : error C2679: binary '<<' : no operator found which takes a right-hand operand of type 'const InventoryItem' (or there is no acceptable conversion)
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\ostream(653): could be 'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const char *)'
1>        with 
```

这是我现在得到的唯一错误。我看到你的代码好多了。我的新编译器错误超长。我已经显示了错误指向的位置。你能帮我最后一次吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T04:20:24.957

您的读写功能有问题。特别是，您应该这样做：

```
template<typename T>
void write(ofstream &out, const T &t)
{
    out << T;
} 
```

**OLD：** `bind1st`需要你包含`functional`它才能工作：

```
#include <functional> 
```

但是，与其处理所有这些函数等，不如依赖迭代器：

```
template<typename T>
void writeVector(ofstream &out, const vector<T> &vec)
{
    out << vec.size();

    for(vector<T>::const_iterator i = vec.begin(); i != vec.end(); ++i)
    {
        out << *i;
    }
}

template<typename T>
vector<T> readVector(ifstream &in)
{
    size_t size;
    in >> size;

    vector<T> vec;
    vec.reserve(size);

    for(int i = 0; i < size; ++i)
    {
        T tmp;
        in >> tmp;
        vec.push_back(tmp);
    }

    return vec;
} 
```

您`InventoryItem`可能希望函数也可以读取和写入您的函数：

```
ostream &operator<<(ostream &out, const InventoryItem &i)
{
    out << i.Item << i.Description;  // FIXME Read/write strings properly.
    out << i.Quantity;
    out << i.wholesaleCost << i.retailCost;
    out << i.dateAdded;
}

istream &operator>>(istream &out, InventoryItem &i)
{
    // Keep in same order as operator<<(ostream &, const InventoryItem &)!
    in >> i.Item >> i.Description;  // FIXME Read/write strings properly.
    in >> i.Quantity;
    in >> i.wholesaleCost >> i.retailCost;
    in >> i.dateAdded;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T07:21:21.887

注意：这不是您遇到的编译错误的答案，而是您正在处理的持久性问题的更广泛的看法。

序列化和反序列化不是您可以解决的最简单的问题。我的建议是投资学习库（boost::serialization）并使用它们。他们已经解决了您将在某个时间或另一个时候面临的许多问题。此外，它们已经有不同的输出格式（二进制、xml、json...）

您必须决定的第一件事，即如果您决定继续实施自己的，是什么文件格式以及它是否适合您的所有需求。它会一直在同一个环境中使用吗？平台会改变（32/64 位）吗？您可以决定将其设为二进制，因为它是最简单的，或者使其对人类可读。如果您决定使用 XML、JSON 或任何其他更复杂的格式，请忘记它并使用库。

最简单的解决方案是处理二进制文件，它也是为您提供最小文件的解决方案。另一方面，架构更改是非常明智的（例如，您从 32 位架构/操作系统迁移到 64 位架构/操作系统）

在确定格式后，您将需要处理现在不属于您的对象但需要插入文件以供以后检索的额外信息。然后开始工作（和测试）从最小的部分到更复杂的元素。

另一个建议是从最简单、定义最明确的部分开始工作，然后从那里开始构建。开始尽可能地避免使用模板，一旦你清楚并适用于给定的数据类型，就开始研究如何将它推广到任何其他类型。

免责声明：我是直接在浏览器上编写代码的，所以可能会出现一些错误、拼写错误或任何问题 :)

**文本**

第一种简单的方法就是编写文本的文本表示。优点是它比二进制方法可移植且代码更短（如果不是更简单的话）。生成的文件将更大但用户可读。

此时您需要了解如何使用 iostreams 阅读文本。特别是，每当您尝试读取字符串时，系统都会读取字符，直到到达分隔符为止。这意味着以下代码：

```
std::string str;
std::cin >> str; 
```

只会读取到第一个空格、制表符或行尾。当读取数字（以整数为例）时，系统将读取所有有效数字，直到第一个无效数字。那是：

```
int i;
std::cin >> i; 
```

输入 12345a 将消耗所有字符，直到“a”。您需要知道这一点，因为这会影响您保存数据以供以后检索的方式。

```
// input: "This is a long Description"
std::string str;
std::cin >> str; // Will read 'This' but ignore the rest

int a = 1;
int b = 2;
std::cout << a << b; // will produce '12'
// input: 12
int read;
std::cint >> read; // will read 12, not 1 
```

因此，您几乎需要在输出中插入分隔符并解析输入。出于示例目的，我将选择“|” 特点。它必须是未出现在文本字段中的字符。

不仅分离元素而且添加一些额外信息（向量的大小）也是一个好主意。对于向量中的元素，您可以决定使用不同的分隔符。如果您希望能够手动读取文件，您可以使用 '\n' 以便每个项目都在自己的行中

```
namespace textual {
   std::ostream & operator<<( std::ostream& o, InventoryItem const & data )
   {
      return o << data.Item << "|" << data.Description << "|" << data.Quantity
         << "|" << data. ...;
   }
   std::ostream & operator<<( std::ostream & o, std::vector<InventoryItem> const & v )
   {
      o << v.size() << std::endl;
      for ( int i = 0; i < v.size(); ++i ) {
         o << v[i] << std::endl; // will call the above defined operator<<
      }
   }
} 
```

为了阅读，您需要将输入拆分为 '\n' 以获取每个元素，然后使用 '|' 解析 InventoryItem：

```
namespace textual {
   template <typename T>
   void parse( std::string const & str, T & data )
   {
      std::istringstream st( str ); // Create a stream with the string
      st >> data;  // use operator>>( std::istream
   }

   std::istream & operator>>( std::istream & i, InventoryItem & data )
   {
      getline( i, data.Item, '|' );
      getline( i, data.Description, '|' );

      std::string tmp;
      getline( i, tmp, '|' ); // Quantity in text
      parse( tmp, data.Quantity );
      getline( i, tmp, '|' ); // wholesaleCost in text
      parse( tmp, data. wholesaleCost );
      // ...
      return i;
   }

   std::istream & operator>>( std::istream & i, std::vector<InventoryItem> & data )
   {
      int size;

      std::string tmp;
      getline( i, tmp ); // size line, without last parameter getline splits by lines
      parse( tmp, size ); // obtain size as string

      for ( int i = 0; i < size; ++i )
      {
         InventoryItem data;
         getline( i, tmp ); // read an inventory line
         parse( tmp, data );
      }    
      return i;  
   }
} 
```

在向量读取函数中，我使用 getline + parse 来读取整数。这是为了保证下一个 getline() 将实际读取第一个 InventoryItem 而不是大小之后的尾随 '\n'。

最重要的一段代码是“解析”模板，它能够将字符串转换为定义了插入运算符的任何类型。它可用于读取基本类型、库类型（例如字符串）和定义了运算符的用户类型。我们用它来简化其余的代码。

**二进制**

对于二进制格式，（忽略架构，如果您迁移，这将是一件痛苦的事情）我能想到的最简单的方法是将向量中的元素数量写为 size_t （无论您的实现中的大小是多少），其次是所有元素。每个元素将打印出其每个成员的二进制表示。对于 int 等基本类型，它只会输出 int 的二进制格式。对于字符串，我们将求助于写入一个 size_t 数字，其中包含字符串中的字符数，后跟字符串的内容。

```
namespace binary
{
   void write( std::ofstream & o, std::string const & str )
   {
      int size = str.size();
      o.write( &size, sizeof(int) ); // write the size
      o.write( str.c_str(), size ); // write the contents
   }
   template <typename T>
   void write_pod( std::ofstream & o, T data ) // will work only with POD data and not arrays
   {
      o.write( &data, sizeof( data ) );
   }
   void write( std::ofstream & o, InventoryItem const & data )
   {
      write( o, data.Item );
      write( o, data.Description );
      write_pod( o, data.Quantity );
      write_pod( o, data. ...
   }
   void write( std::ofstream & o, std::vector<InventoryItem> const & v )
   {
      int size = v.size();
      o.write( &size, sizeof( size ) ); // could use the template: write_pod( o, size )
      for ( int i = 0; i < v.size(); ++i ) {
         write( o, v[ i ] );
      }
   }
} 
```

我为编写基本类型的模板选择了一个与编写字符串或 InventoryItems 的函数不同的名称。原因是我们不想稍后错误地使用模板来编写复杂类型（即包含字符串的 UserInfo），它将在磁盘中存储错误的表示。

从磁盘检索应该非常相似：

```
namespace binary {
   template <typename T>
   void read_pod( std::istream & i, T& data)
   {
      i.read( &data, sizeof(data) );
   }
   void read( std::istream & i, std::string & str )
   {
      int size;
      read_pod( i, size );
      char* buffer = new char[size+1]; // create a temporary buffer and read into it
      i.read( buffer, size );
      buffer[size] = 0;
      str = buffer;
      delete [] buffer;
   }
   void read( std::istream & i, InventoryItem & data )
   {
      read( i, data.Item );
      read( i, data.Description );
      read( i, data.Quantity );
      read( i, ...
   }
   void read( std::istream & i, std::vector< InventoryItem > & v )
   {
      v.clear(); // clear the vector in case it is not empty

      int size;
      read_pod( i, size );
      for ( int i = 0; i < size; ++i )
      {
         InventoryItem item;
         read( i, item );
         v.push_back( item );
      }
   }
} 
```

要使用这种方法，std::istream 和 std::ostream 必须以二进制模式打开。

```
int main()
{
   std::ifstream persisted( "file.bin", ios:in|ios::binary );
   std::vector<InventoryItem> v;
   binary::read( persisted, v );

   // work on data

   std::ofstream persist( "output.bin", ios::out|ios::binary );
   binary::write( persist, v );
} 
```

所有错误检查都留给读者作为练习:)

如果您对代码的任何部分有任何疑问，请询问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T04:12:30.797

**编辑：试图清除 FUD：**

`bind1st`是 STL`functional`标头的一部分。STL 在 boost 出现之前就已经存在。它在 C++0x 中被弃用，取而代之的是更通用的版本，即`bind`（aka `boost::bind`）。更多信息参见附录 D.8 粘合剂。

现在真正的问题（多次编辑可能会使这看起来很傻，但为了后代我会保留它）：

```
 write<long>(out, structList.size()); 
```

这是违规行。这需要 a`long`作为第二个参数，而`vector`'s`size()`是类型`size_t`或`unsigned int`引擎盖下的。

**更新有一个错字：使用`size_t`而不是`size_T`：**

```
write<size_t>(out, structList.size()); 
```

下一部分：

```
 for_each(structList.begin(), structList.end(), bind1st(write<InventoryItem>, out)); 
```

这应该是`structList`或其他类型。另外，包括`functional`可以使用`bind1st`。在顶部添加：

```
#include <functional> 
```

模板`bind1st`采用函子。如果没有其他一些技巧，就不可能传递普通的函数指针。您可以`boost::bind`用作替代方案。或者：

```
for(InventoryItem::iterator i = structList.begin(), f = structList.end();
         i != f; ++i)
    write<InventoryItem>(out, *i); 
```

现在对于其他挑剔：

什么是：

```
#include <String>
...
using namespace System; 
```

你确定你在这里使用什么？如果你想要 STL 字符串，你需要包括：

```
#include <string>

void main(void) 
```

不是标准签名。使用以下任何一种：

```
int main(void) 
```

或者

```
int main(int argc, char *argv[]); 
```

使用预定义的插入/提取操作符，I/O 通常会容易得多。您可以（并且确实应该）使用：

```
istream is(...);
is >> data; 
```

同样地

```
ostream os(...);
os << data; 
```

另请注意，您的`readFromFile`和`writeToFile`功能需要固定才能使用`vector<InventoryItem>`，而不是`vector`简单地使用。

# php - PHP Addslashes 在转义单引号时添加双反斜杠

> ID：708230
> 
> 赞同：6
> 
> 时间：2009-04-02T03:55:26.437
> 
> 标签：php

Addslashes 似乎有点困惑。给定以下 2 行代码

```
$name = "Dave's test";
$newName = addslashes($name); 
```

我*期待*$newName 成为**“Dave\'s test”**（我的单引号很好地逃脱了）

但是，我*得到*的是**“Dave\\'s test”**（注意双反斜杠）。这与我可以在 addlashes 上找到的所有在线文档相矛盾 - 并让我非常悲伤。

我正在通过error_log将addslashes之前和之后的结果转储到http错误日志中......

```
error_log("before=$name  after=$newName"); 
```

结果...

```
before=Dave's test  after=Dave\\'s test 
```

注意 - 这是 ajax 过程的一部分，所以我不能真正“回显”结果。

任何关于为什么 addlashes 会在 backslases 上加倍的见解都非常感谢。

仅供参考：我在 linux 下使用 PHP 5.2.6 并关闭魔术引号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T05:37:16.130

看起来 error_log 在内部调用了 addlashes。在阅读了针对我的原始问题发布的问题后，我创建了一个非常简单的脚本......

```
<?php
        $name = "Dave's test";
        $newName = addslashes($name);
        echo    "name=$name.   newName=$newName";
        error_log("name=$name.   newName=$newName");
?> 
```

回声结果：

```
name=Dave's test. newName=Dave\'s test 
```

error_log 的结果：

```
name=Dave's test.   newName=Dave\\'s test 
```

非常感谢所有花时间阅读和评论这个问题的人。这是我在 Stack Overflow 上的第一个问题，我被响应的速度所震撼。多么棒的社区！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T04:05:15.367

首先，你为什么要逃跑`addslashes()`？这充其量是一种不够充分的方法，尤其是当您试图防范 SQL 注入时。

您还能告诉我们有关您的配置的哪些信息，以便我们尝试和复制？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-07-03T03:38:03.337

您可以在 php.ini 文件中将 magic_quotes_gpc 设置为 Off。这将阻止你的双重逃避。请记住要谨慎执行此操作，就好像您正在使用 SQL 一样，无论如何您都在向一些简单的 SQL 注入敞开大门。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T04:31:23.760

无法在 5.2.6 或 5.2.0 安装上复制。

如果您在编写操作后立即**回显 $newName**，您是否看到双反斜杠？我之所以问，是因为我怀疑其他处理层的干预使反斜杠加倍，而不是 addlashes()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T04:02:23.690

我的猜测是该`error_log()`功能正在用另一个反斜杠转义*反斜杠本身。*

然后表示的字符串在技术上只有 1 个反斜杠，这是所需的结果。

试试这个作为一个简单的测试：

```
error_log('\a') 
```

看看你是否进入`\\a`日志

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-02T05:17:30.313

> 注意 - 这是 ajax 过程的一部分，所以我不能真正“回显”结果。

我认为这可能是问题的关键——我认为addslashes 可能正确地在该引号中添加了一个反斜杠，但是您的AJAX 进程以某种方式再次转义它。您是否通过 JSON 传递此文本（使用 json_encode）？如果是这样，您不需要转义它，因为 json_encode() 会透明地做到这一点。

如果您不能“回显”结果，也许将其写入文件？

```
$name = "Dave's test";
$newName = addslashes($name);
file_put_contents('/tmp/test.txt', $newName); // temporary 
```

这至少可以让您向自己证明您的addslashes() 正在做它应该做的事情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-09-20T08:08:24.967

我建议您使用**[sprintf](http://www.php.net/manual/en/function.sprintf.php)**格式化您的字符串，addslashes 可以在您的日志中留下斜杠，而您想要做的只是格式化一个字符串。

# c - 需要帮助了解编译器/HLL->Assembly

> ID：708231
> 
> 赞同：0
> 
> 时间：2009-04-02T03:55:26.937
> 
> 标签：c, compiler-construction, assembly

我是一名电子专业的学生，​​我主要在汇编中进行编程。昨晚我看到一篇很棒的文章，讨论了用 Ruby 编写编译器。作者所做的是使用 GCC 来查看 C 是如何转换为 Assembly 的。这让我产生了很大的共鸣。我终于可以看到 C 程序是如何转换为 Assembly 的。我在这里向社区提出的问题/请求是：您能否向我展示一些资源，以更好地讨论这两者之间的联系？我应该阅读有关编译器的信息吗？我应该学习系统编程吗？我不知道该怎么办。我真的很想在编程方面做得更好并更好地学习。感谢您的帮助。

有关的：

*   [学习编写编译器](https://stackoverflow.com/questions/1669/learning-to-write-a-compiler)
*   [程序员学习如何构建编译器是否有益？](https://stackoverflow.com/questions/424567/is-it-beneficial-for-a-programmer-to-learn-how-to-build-a-compiler)
*   [有人能告诉我计算机编程的基本原理吗？](https://stackoverflow.com/questions/273978/can-someone-tell-me-the-very-basics-of-how-computer-programming-works)

和别的...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T04:13:52.460

这里确实发生了一些事情。您应该看的第一件事是类似于编译器的书。有几本旧书，比如著名的[《龙书》](http://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools#Second_edition)，都非常好。[我今天刚刚从编写《汇编语言编程艺术》](http://webster.cs.ucr.edu/AoA/index.html)的同一个人那里发现了另一个关于[如何编写出色代码](http://webster.cs.ucr.edu/WriteGreatCode/index.html)的文章。到目前为止，我只阅读了示例章节，但它看起来*非常*好，而且似乎也能满足您的需求，而不会立即陷入 LALR(1) 语法的奇迹等等。

“系统编程”更多地是关于编程系统。在系统编程中，您将了解如何使用各种系统调用和其他东西来构建有用的程序。你也需要知道这一点，但它与“它是如何发生的”不同。

一本计算机组织的书，就像 aaronis 所指的那样，更多的是关于程序如何从汇编语言级别到实际的门等。它也被称为“计算机体系结构”，正如 Amdahl、Blaauw 和 Brooks 发明术语时使用的那样：指令集、它们是如何实现的，以及如何在事物设计中做出定量选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T04:14:36.330

关于编译器的经典参考书是 Aho 和 Ullman，**《编译器设计原理》**，又名龙书。当前版本有更多作者和更新的标题....

**[编译器：原理、技术和工具](http://www.amazon.com/s?search-alias=stripbooks&field-isbn=0321486811)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T04:02:36.107

当我参加计算机组织课程时，他们了解了处理器是如何形成的、它们如何处理指令以及汇编如何转换为机器代码的低级细节。可能比你要找的要低一点，但我认为了解这种类型的翻译是如何从高级语言到低级语言发生的真的很巧妙。我想我们用过这本书或类似的书：http: [//www.amazon.com/Computer-Organization-Design-Interface-Architecture/dp/1558606041](https://rads.stackoverflow.com/amzn/click/com/1558606041)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T04:36:05.467

另一个很好的资源是 Alan Holub 的[Compiler Design in C](http://www.holub.com/software/compiler.design.in.c.html)。

# windows - 如何向 mingw-gcc 编译的可执行文件添加图标？

> ID：708238
> 
> 赞同：94
> 
> 时间：2009-04-02T03:57:54.763
> 
> 标签：windows, gcc, icons, mingw

在 Windows 中，使用 mingw 的 gcc，是否有指定输出 exe 文件采用图标文件，以便 exe 文件在资源管理器中显示该图标？

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2009-04-02T05:14:20.553

您需要先创建图标。然后您需要创建一个包含以下内容的 RC 文件。这里我们将其命名为`my.rc`.

```
id ICON "path/to/my.ico" 
```

上面命令中`id`提到的几乎可以是任何东西。除非您想在代码中引用它，否则这无关紧要。然后运行windres如下：

```
windres my.rc -O coff -o my.res 
```

然后在构建可执行文件以及其他目标文件和资源文件时，包括`my.res`我们从上述步骤中获得的内容。例如：

```
g++ -o my_app obj1.o obj2.o res1.res my.res 
```

这应该就是它的全部。

* * *

而且，如果您想在应用程序中包含版本信息，无需额外费用，请将以下样板添加到新`.rc`文件中并按照上述步骤操作。

```
1 VERSIONINFO
FILEVERSION     1,0,0,0
PRODUCTVERSION  1,0,0,0
BEGIN
  BLOCK "StringFileInfo"
  BEGIN
    BLOCK "080904E4"
    BEGIN
      VALUE "CompanyName", "My Company Name"
      VALUE "FileDescription", "My excellent application"
      VALUE "FileVersion", "1.0"
      VALUE "InternalName", "my_app"
      VALUE "LegalCopyright", "My Name"
      VALUE "OriginalFilename", "my_app.exe"
      VALUE "ProductName", "My App"
      VALUE "ProductVersion", "1.0"
    END
  END
  BLOCK "VarFileInfo"
  BEGIN
    VALUE "Translation", 0x809, 1252
  END
END 
```

请注意，langID 用于英国英语（这是我能识别的最接近澳大利亚的本地化版本。）如果您想要美国“英语”，则将该`BLOCK` 行更改为：

```
BLOCK "040904E4" 
```

和翻译行：

```
VALUE "Translation", 0x409, 1252 
```

有关信息，请参阅[VERSIONINFO 资源](https://docs.microsoft.com/en-us/windows/desktop/menurc/versioninfo-resource)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-02T02:20:51.943

在 RC 文件中，*nameID*甚至不必是名称，它可以是一个整数。只有当*文件名*包含空格时，它才必须被引用。代替：

```
windres my.rc -O coff -o my.res 
```

您可以使用：

```
windres my.rc my.o 
```

*   [图标资源](http://msdn.microsoft.com/library/windows/desktop/aa381018)

*   [windres 手册页](http://man7.org/linux/man-pages/man1/windres.1.html)

*   [例子](http://github.com/svnpenn/rosso/blob/8e151be/rosso.rc)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-29T03:08:09.093

试试资源黑客。我能够在 Linux (WSL) 中交叉编译我的项目并从主页上的徽标生成一个图标。只需要一种简单的方法将其嵌入到 exe 中，并且该程序运行良好。 [安格斯·约翰逊的资源黑客](http://www.angusj.com/resourcehacker/)

# project-management - 更换管理层

> ID：708242
> 
> 赞同：3
> 
> 时间：2009-04-02T04:01:07.343
> 
> 标签：project-management, change-management

我目前正在一家拥有多个具有相同发布周期的产品的公司工作。

我遇到的问题是我需要创建发布文件，其中包括所有发布的文件以及更改的内容。在许多情况下，客户在接近发布日期时退出更改。

我遇到的困难是每次创建发布文件时，我都必须检查所有更改的文件并确定更改的目的，如果客户决定撤回，则回滚更改。

有谁知道我可以提供给管理层的更好的变革管理解决方案？

非常感谢

附言。我已经尝试查看 scrum，但我不确定它是否能够解决我的困难。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T05:36:14.777

## 版本控制

有一个版本控制系统是好的，有效地使用它的 bug 更好。有几种方法可以有效地进行分支和合并，其中两种可能对您有用的是“per-feature”和“per-client”。

**每个功能**

在此设置中，您为您实现的每个新功能创建主代码（主干）的副本。功能完成后，将其合并回主干。如果您在功能完成之前更新主干，或者您完成了不同的功能，则可以将主干中的这些更改合并到所有分支中。

**每个客户**

与每个功能相同，但每个客户端都有自己的分支，因此不会从另一个中删除为一个功能回滚的功能。要将两者结合起来，您可以像这样构建存储库：

```
回购
+---核心
| +---分支
| +---标签
| \ - -树干
+---客户1
| +---分支
| +---标签
| \ - -树干
\---客户端2
    +---分支
    +---标签
    \ - -树干

```

## 项目管理

现在，解决您的实际问题。从经验上我真的不能说太多，但我计划很快将[Trac](http://trac.edgewall.org/)添加到我的项目中，因为它看起来很容易使用，而且它是免费的。您可以从他们的网站看到 Trac 的开发人员如何使用他们自己的应用程序来设置里程碑和组织问题。如果您想了解更多可能性，那么 Wikipedia 提供了[一些](http://en.wikipedia.org/wiki/Comparison_of_issue_tracking_systems) [列表](http://en.wikipedia.org/wiki/List_of_project_management_software)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T04:25:12.823

您可能最好使用源代码存储库，例如 Git、Subversion、Mercurial 等。

使用哪一个在很大程度上取决于您的需求和平台，但是您可能是 SCM 工具的新手，所以我建议使用 TortoisSVN 进行颠覆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T10:01:24.450

使用[]project-open[](http://www.project-open.com)可以解决您的问题，但这并不容易：

*   ]po[ 包括一个工单跟踪器，可用于跟踪客户的变更请求。
*   实施变更请求后，您需要在提交注释中包含#ticket_id，以便]po[ 可以将提交与变更票关联。为此，您需要正确安装和配置 ]po[ 软件包 intranet-cvs-integration。包名中包含“CVS”，但也可以与SVN和GIT集成。
*   最后，您必须创建一个脚本，根据每个变更单的状态有选择地将提交应用到您的代码基线。

通过这种方式，您可以根据变更单的状态自动生成发布文件。

# vbscript - 使用 Rational ClearQuest 进行应用程序开发

> ID：708249
> 
> 赞同：1
> 
> 时间：2009-04-02T04:03:10.973
> 
> 标签：vbscript, clearquest

有没有人使用 ClearQuest 开发 Web 应用程序的经验？查看这些功能，它提到了流程自动化，但我不确定它可以支持多大的流程/应用程序。我们的小组将较大应用程序的一小部分交给了另一个小组，后者使用 ClearQuest 来启用 Web 流程，但现在正在向我们推送 ClearQuest 工具来启用整个应用程序的 Web 功能。我有 ASP.NET 背景，但 ClearQuest 非常像向导，我见过的唯一代码称为“BASIC”，它看起来很像 VBScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T04:11:31.093

Clearcase/Clearquest 与 Rational Applicaiton Developer 有很好的集成。我不确定您是询问它的优势还是实际上将 ClearQuest 暴露在网络上。您可以执行编写 CGI/PERL 脚本以向 Web 公开某些功能的强制性和蹩脚的活动。您可以使用 perl 或 VBScript 来编写 CC/CQ 挂钩。它有自己的 perl 构建，包含在名为 ratperl 的产品中。它具有出色的命令行支持，但代价是复杂性。如果您非常仔细地考虑组织中的实施，CC/CQ 就非常强大。它可以支持非常强大的工作流程并且是高度可定制的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-27T22:09:08.757

有几个 API 可以让你做你想做的事，写一个 WebApp。

CQWeb 本身是使用 CM API 构建的，它允许构建 Java 应用程序（Web 或非 Web）。教程在这里：

[http://www.ibm.com/support/knowledgecenter/SSSH5A_9.0.0/com.ibm.rational.team_api_cq_tut.doc/topics/teamapi_cq_abstract.htm](http://www.ibm.com/support/knowledgecenter/SSSH5A_9.0.0/com.ibm.rational.team_api_cq_tut.doc/topics/teamapi_cq_abstract.htm)

您可以使用 perl-CGI 实现一个基本的 Web 应用程序，因为 CQ 有一个 Perl API。

您可以编写一个 ASP/C# Web 应用程序，因为 ClearQuest 有一个 OLE (Visual Basic) API。最初的 ClearQuest Web 应用程序是使用 Visual Basic API 构建的

所以答案是肯定的，有可能。支持 JavaScript API 不是很好吗？然后我们可以编写 nodeJS CQ 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-07-24T16:33:04.920

查看[http://open-services.net/](http://open-services.net/)以获取有关使用 Open Services for Lifecycle Collaboration 进行开发的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-03-05T00:39:54.957

当然有可能，对于 VS 风格的集成，我会包装 cqole.dll 或使用 OSLC 连接器来访问 RESTful 接口。虽然 cqole 是 C++ API 并且它不受官方支持，但它比尝试使用 VBScript API 实现它更适合您。如果您更习惯于使用 Web 服务，我会查看 jazz.net，其中 wiki 详细解释了这座桥。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-10-25T02:30:00.263

您不完全使用 ClearQuest 开发 webapp，CQ 只是一个基于逻辑和状态转换的过程自动化工具，并且交互是用 VBScript 或 Perl 编写的。

但是请注意，管理 CQ 代码一直很痛苦，因为“设计器”本身是一个完全损坏的工具。它支持版本跟踪，但不告诉你版本之间的区别。内置代码编辑器没有语法高亮，不支持并行开发。我可以继续说下去。

在后来的版本中，（我想是版本 7 起），CQ 带有基于 eclipse 的客户端和设计器工具，据说可以增强整个体验。但我对此没有太多经验可以发表评论。

至于web组件，它运行在websphere层，简单来说就是一个应用/表现层，供用户通过HTTP协议访问CQ。它具有完整 CQ 客户端的 90% 的功能，并且通常更易于维护和部署到广泛的用户群。

# regex - 如何编写更易维护的正则表达式？

> ID：708254
> 
> 赞同：42
> 
> 时间：2009-04-02T04:05:51.810
> 
> 标签：regex, maintenance, readability

我开始觉得使用正则表达式会降低代码的可维护性。正则表达式的简洁和强大有一些不好的地方。Perl 将其与默认运算符等副作用结合在一起。

我确实有用至少一个句子给出基本意图和至少一个匹配内容的示例来记录正则表达式的习惯。

因为正则表达式是建立起来的，所以我觉得绝对有必要评论表达式中每个元素的最大组成部分。尽管如此，即使是我自己的正则表达式也让我摸不着头脑，就好像我在读克林贡语一样。

你是否故意降低你的正则表达式？您是否将可能更短且功能更强大的步骤分解为更简单的步骤？我已经放弃了嵌套正则表达式。是否存在由于可维护性问题而避免使用的正则表达式构造？

**不要让这个例子模糊了这个问题。**

如果迈克尔·阿什（[Michael Ash](http://regexlib.com/REDetails.aspx?regexp_id=113) ）的以下内容中存在某种错误，那么您是否有做任何事情但完全扔掉它的前景？

```
^(?:(?:(?:0?[13578]|1[02])(\/|-|\.)31)\1|(?:(?:0?[13-9]|1[0-2])(\/|-|\.)(?:29|30)\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:0?2(\/|-|\.)29\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:(?:0?[1-9])|(?:1[0-2]))(\/|-|\.)(?:0?[1-9]|1\d|2[0-8])\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$ 
```

根据请求，可以使用上面的 Ash 先生的链接找到确切的目的。

**比赛**01.1.02 | 2001 年 11 月 30 日 | 2000 年 2 月 29 日

**不匹配**02/29/01 | 2002 年 13 月 1 日 | 2002 年 11 月 00 日

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-04-02T04:18:03.310

使用[Expresso](http://www.ultrapico.com/ExpressoDownload.htm)，它给出了正则表达式的分层英文分解。

*或者*

Darren Neimke 的这个[提示](http://www.4guysfromrolla.com/articles/022603-1.aspx)：

> .NET 允许通过 RegExOptions.IgnorePatternWhitespace 编译器选项和嵌入在模式字符串的每一行中的 (?#...) 语法使用嵌入式注释来创作正则表达式模式。
> 
> 这允许在每一行中嵌入类似伪代码的注释，并对可读性产生以下影响：

```
Dim re As New Regex ( _
    "(?<=       (?# Start a positive lookBEHIND assertion ) " & _
    "(#|@)      (?# Find a # or a @ symbol ) " & _
    ")          (?# End the lookBEHIND assertion ) " & _
    "(?=        (?# Start a positive lookAHEAD assertion ) " & _
    "   \w+     (?# Find at least one word character ) " & _
    ")          (?# End the lookAHEAD assertion ) " & _
    "\w+\b      (?# Match multiple word characters leading up to a word boundary)", _
    RegexOptions.Multiline Or RegexOptions.IgnoreCase Or RegexOptions.IgnoreWhitespace _
) 
```

这是另一个 .NET 示例（需要`RegexOptions.Multiline`and`RegexOptions.IgnorePatternWhitespace`选项）：

```
static string validEmail = @"\b    # Find a word boundary
                (?<Username>       # Begin group: Username
                [a-zA-Z0-9._%+-]+  #   Characters allowed in username, 1 or more
                )                  # End group: Username
                @                  # The e-mail '@' character
                (?<Domainname>     # Begin group: Domain name
                [a-zA-Z0-9.-]+     #   Domain name(s), we include a dot so that
                                   #   mail.somewhere is also possible
                .[a-zA-Z]{2,4}     #   The top level domain can only be 4 characters
                                   #   So .info works, .telephone doesn't.
                )                  # End group: Domain name
                \b                 # Ending on a word boundary
                "; 
```

如果您的 RegEx 适用于常见问题，另一种选择是将其记录并提交给[RegExLib](http://www.regxlib.com/)，在那里将对其进行评级和评论。没有什么能比得上很多双眼睛……

另一个 RegEx 工具是[The Regulator](http://sourceforge.net/projects/regulator/)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-04-02T04:16:46.510

我通常只是尝试将所有正则表达式调用包装在它们自己的函数中，并使用有意义的名称和一些基本注释。我喜欢将正则表达式视为一种只写的语言，只有编写它的人才能阅读（除非它真的很简单）。我完全希望有人可能需要完全重写表达式，如果他们不得不改变它的意图，这可能是为了更好地保持正则表达式训练的活力。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-04-02T04:19:58.640

好吧，PCRE /x 修饰符的全部目的是让您编写更易读的正则表达式，就像在这个简单的例子中一样：

```
my $expr = qr/
    [a-z]    # match a lower-case letter
    \d{3,5}  # followed by 3-5 digits
/x; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-04-02T04:15:19.993

有些人将 RE 用于错误的事情（我正在等待关于如何使用单个 RE 检测有效 C++ 程序的第一个 SO 问题）。

我通常会发现，如果我的 RE 不能容纳在 60 个字符之内，最好是一段代码，因为它几乎总是更具可读性。

无论如何，我*总是*在代码中详细记录 RE 应该实现的目标。这是因为我从痛苦的经历中知道，让其他人（甚至是六个月后的我）进来并尝试理解是多么困难。

我不相信它们是邪恶的，尽管我确实相信某些使用它们的人是邪恶的（不是看着你，Michael Ash :-)。它们是一个很好的工具，但就像电锯一样，如果你不知道如何正确使用它们，你就会把腿砍掉。

更新：实际上，我刚刚点击了那个怪物的链接，它是为了验证 1600 年到 9999 年之间的 m/d/y 格式日期。这是完整代码更具可读性和可维护性的**经典**案例.

您只需将其分成三个字段并检查各个值。如果我的一个手下给我买了这个，我几乎会认为这是一种值得终止的罪行。我当然会把它们送回去以正确地写出来。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-02T10:29:58.687

这是分解成可消化部分的相同正则表达式。除了更具可读性之外，一些子正则表达式本身也很有用。更改允许的分隔符也容易得多。

```
#!/usr/local/ActivePerl-5.10/bin/perl

use 5.010; #only 5.10 and above
use strict;
use warnings;

my $sep         = qr{ [/.-] }x;               #allowed separators    
my $any_century = qr/ 1[6-9] | [2-9][0-9] /x; #match the century 
my $any_decade  = qr/ [0-9]{2} /x;            #match any decade or 2 digit year
my $any_year    = qr/ $any_century? $any_decade /x; #match a 2 or 4 digit year

#match the 1st through 28th for any month of any year
my $start_of_month = qr/
    (?:                         #match
        0?[1-9] |               #Jan - Sep or
        1[0-2]                  #Oct - Dec
    )
    ($sep)                      #the separator
    (?: 
        0?[1-9] |               # 1st -  9th or
        1[0-9]  |               #10th - 19th or
        2[0-8]                  #20th - 28th
    )
    \g{-1}                      #and the separator again
/x;

#match 28th - 31st for any month but Feb for any year
my $end_of_month = qr/
    (?:
        (?: 0?[13578] | 1[02] ) #match Jan, Mar, May, Jul, Aug, Oct, Dec
        ($sep)                  #the separator
        31                      #the 31st
        \g{-1}                  #and the separator again
        |                       #or
        (?: 0?[13-9] | 1[0-2] ) #match all months but Feb
        ($sep)                  #the separator
        (?:29|30)               #the 29th or the 30th
        \g{-1}                  #and the separator again
    )
/x;

#match any non-leap year date and the first part of Feb in leap years
my $non_leap_year = qr/ (?: $start_of_month | $end_of_month ) $any_year/x;

#match 29th of Feb in leap years
#BUG: 00 is treated as a non leap year
#even though 2000, 2400, etc are leap years
my $feb_in_leap = qr/
    0?2                         #match Feb
    ($sep)                      #the separtor
    29                          #the 29th
    \g{-1}                      #the separator again
    (?:
        $any_century?           #any century
        (?:                     #and decades divisible by 4 but not 100
            0[48]       | 
            [2468][048] |
            [13579][26]
        )
        |
        (?:                     #or match centuries that are divisible by 4
            16          | 
            [2468][048] |
            [3579][26]
        )
        00                      
    )
/x;

my $any_date  = qr/$non_leap_year|$feb_in_leap/;
my $only_date = qr/^$any_date$/;

say "test against garbage";
for my $date (qw(022900 foo 1/1/1)) {
    say "\t$date ", $date ~~ $only_date ? "matched" : "didn't match";
}
say '';

#comprehensive test

my @code = qw/good unmatch month day year leap/;
for my $sep (qw( / - . )) {
    say "testing $sep";
    my $i  = 0;
    for my $y ("00" .. "99", 1600 .. 9999) {
        say "\t", int $i/8500*100, "% done" if $i++ and not $i % 850;
        for my $m ("00" .. "09", 0 .. 13) {
            for my $d ("00" .. "09", 1 .. 31) {
                my $date = join $sep, $m, $d, $y;
                my $re   = $date ~~ $only_date || 0;
                my $code = not_valid($date);
                unless ($re == !$code) {
                    die "error $date re $re code $code[$code]\n"
                }
            }
        }
    }
}

sub not_valid {
    state $end = [undef, 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    my $date      = shift;
    my ($m,$d,$y) = $date =~ m{([0-9]+)[-./]([0-9]+)[-./]([0-9]+)};
    return 1 unless defined $m; #if $m is set, the rest will be too
    #components are in roughly the right ranges
    return 2 unless $m >= 1 and $m <= 12;
    return 3 unless $d >= 1 and $d <= $end->[$m];
    return 4 unless ($y >= 0 and $y <= 99) or ($y >= 1600 and $y <= 9999);
    #handle the non leap year case
    return 5 if $m == 2 and $d == 29 and not leap_year($y);

    return 0;
}

sub leap_year {
    my $y    = shift;
    $y = "19$y" if $y < 1600;
    return 1 if 0 == $y % 4 and 0 != $y % 100 or 0 == $y % 400;
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-02T04:25:45.427

我学会了避免使用最简单的正则表达式。我更喜欢其他模型，例如 Icon 的字符串扫描或 Haskell 的解析组合器。在这两种模型中，您都可以编写与内置字符串操作具有相同权限和状态的用户定义代码。如果我在 Perl 中编程，我可能会在 Perl 中安装一些解析组合器——我已经为其他语言做过。

一个非常好的替代方法是使用解析表达式语法，就像 Roberto Ierusalimschy 使用他的[LPEG](http://www.inf.puc-rio.br/~roberto/lpeg/lpeg.html)包所做的那样，但与解析器组合器不同，这是您无法在一个下午完成的事情。但是，如果有人已经为您的平台完成了 PEG，那么它是正则表达式的一个非常好的替代品。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-04-02T04:42:21.643

我发现一个很好的方法是将匹配过程简单地分解为几个阶段。它的执行速度可能不那么快，但您还可以获得额外的好处，即能够在更细粒度的级别上判断为什么没有发生匹配。

另一种方法是使用 LL 或 LR 解析。即使使用 perl 的非 fsm 扩展，某些语言也不能表达为正则表达式。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-04-02T05:23:04.167

哇，太丑了 看起来它应该可以工作，以一个不可避免的错误为模，将 00 处理为两位数的年份（它应该是四分之一时间的闰年，但没有世纪你无法知道它应该是什么）。有很多冗余可能应该被考虑到子正则表达式中，我将为三个主要案例创建三个子正则表达式（这是我今晚的下一个项目）。我还为分隔符使用了不同的字符以避免转义正斜杠，将单个字符交替更改为字符类（这很高兴让我们避免转义句点），并更改`\d`为`[0-9]`因为前者匹配任何数字字符（包括`U+1815` `MONGOLIAN DIGIT FIVE`： ᠕) 在 Perl 5.8 和 5.10 中。

警告，未经测试的代码：

```
#!/usr/bin/perl

use strict;
use warnings;

my $match_date = qr{
    #match 29th - 31st of all months but 2 for the years 1600 - 9999
    #with optionally leaving off the first two digits of the year
    ^
    (?: 
        #match the 31st of 1, 3, 5, 7, 8, 10, and 12
        (?: (?: 0? [13578] | 1[02] ) ([/-.]) 31) \1
        |
        #or match the 29th and 30th of all months but 2
        (?: (?: 0? [13-9] | 1[0-2] ) ([/-.]) (?:29|30) \2)
    )
    (?:
        (?:                      #optionally match the century
            1[6-9] |         #16 - 19
            [2-9][0-9]       #20 - 99
        )?
        [0-9]{2}                 #match the decade
    )
    $
    |
    #or match 29 for 2 for leap years
    ^
    (?:
    #FIXME: 00 is treated as a non leap year 
    #even though 2000, 2400, etc are leap years
        0?2                      #month 2
        ([/-.])                  #separtor
        29                       #29th
        \3                       #separator from before
        (?:                      #leap years
            (?:
                #match rule 1 (div 4) minus rule 2 (div 100)
                (?: #match any century
                    1[6-9] |
                    [2-9][0-9]
                )?
                (?: #match decades divisible by 4 but not 100
                    0[48]       | 
                    [2468][048] |
                    [13579][26]
                )
                |
                #or match rule 3 (div 400)
                (?:
                    (?: #match centuries that are divisible by 4
                        16          | 
                        [2468][048] |
                        [3579][26]
                    )
                    00
                )
            )
        )
    )
    $
    |
    #or match 1st through 28th for all months between 1600 and 9999
    ^
    (?: (?: 0?[1-9]) | (?:1[0-2] ) ) #all months
    ([/-.])                          #separator
    (?: 
        0?[1-9] |                #1st -  9th  or
        1[0-9]  |                #10th - 19th or
        2[0-8]                   #20th - 28th
    )
    \4                               #seprator from before
    (?:                              
        (?:                      #optionally match the century
            1[6-9] |         #16 - 19
            [2-9][0-9]       #20 - 99
        )?
        [0-9]{2}                 #match the decade
    )
    $
}x; 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-04-02T09:14:39.417

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。— comp.lang.emacs 中的 Jamie Zawinski。

保持正则表达式尽可能简单（[KISS](http://en.wikipedia.org/wiki/KISS_principle)）。在您的日期示例中，我可能会为每种日期类型使用一个正则表达式。

或者更好的是，将其替换为库（即日期解析库）。

我还会采取措施确保输入源有一些限制（即只有一种类型的日期字符串，最好是[ISO-8601](http://en.wikipedia.org/wiki/ISO_8601)）。

还，

*   当时的一件事（提取值可能除外）
*   如果正确使用高级构造是可以的（如简化表达式并因此减少维护）

编辑：

> “高级构造导致维护问题”

我最初的观点是，如果使用*得当*，它应该会导致*更简单*的表达式，而不是更难的表达式。更简单的表达式应该*减少*维护。

我已经更新了上面的文字以说明这一点。

我要指出，正则表达式本身几乎没有资格作为高级构造。不熟悉某个构念并不会使它成为一种高级构念，而只是一个不熟悉的构念。这并没有改变正则表达式强大、紧凑并且——如果使用得当——优雅的事实。就像手术刀一样，它完全掌握在使用它的人手中。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-02T04:12:27.550

我仍然可以使用它。我只是使用[Regulator](http://sourceforge.net/projects/regulator/)。它允许您做的一件事是保存正则表达式及其测试数据。

当然，我也可以添加评论。

* * *

这是 Expresso 制作的。我以前从未使用过它，但现在，Regulator 失业了：

```
// 使用 System.Text.RegularExpressions;

///
/// 为 C# 构建的正则表达式 on: Thu, Apr 2, 2009, 12:51:56 AM
/// 使用 Expresso 版本：3.0.3276，http://www.ultrapico.com
///  
/// 正则表达式的描述：
///  
/// 从 3 个选项中选择
/// ^(?:(?:(?:0?[13578]|1[02])(\/|-|\.)31)\1|(?:(?:0?[13-9 ]|1[0-2])(\/|-|\.)(?:29|30)\2))(?:(?:1[6-9]|[2-9]\d) ?\d{2})$
/// 行或字符串的开头
/// 匹配表达式但不捕获它。[(?:(?:0?[13578]|1[02])(\/|-|\.)31)\1|(?:(?:0?[13-9]|1[0- 2])(\/|-|\.)(?:29|30)\2)]
/// 从 2 个选项中选择
/// (?:(?:0?[13578]|1[02])(\/|-|\.)31)\1
/// 匹配表达式但不捕获它。[(?:0?[13578]|1[02])(\/|-|\.)31]
/// (?:0?[13578]|1[02])(\/|-|\.)31
/// 匹配表达式但不捕获它。[0?[13578]|1[02]]
/// 从 2 个选项中选择
/// 0?[13578]
/// 0，零或一重复
/// 此类中的任何字符：[13578]
/// 1[02]
/// 1
/// 此类中的任何字符：[02]
/// [1]：一个编号的捕获组。[\/|-|\.]
/// 从 3 个选项中选择
/// 字面量/
/// -
/// 字面量。
/// 31
/// 对捕获编号的反向引用：1
/// (?:(?:0?[13-9]|1[0-2])(\/|-|\.)(?:29|30)\2)
/// 返回
/// 新队
/// 匹配表达式但不捕获它。[(?:0?[13-9]|1[0-2])(\/|-|\.)(?:29|30)\2]
/// (?:0?[13-9]|1[0-2])(\/|-|\.)(?:29|30)\2
/// 匹配表达式但不捕获它。[0?[13-9]|1[0-2]]
/// 从 2 个选项中选择
/// 0?[13-9]
/// 0，零或一重复
/// 此类中的任何字符：[13-9]
/// 1[0-2]
/// 1
/// 此类中的任何字符：[0-2]
/// [2]：一个编号的捕获组。[\/|-|\.]
/// 从 3 个选项中选择
/// 字面量/
/// -
/// 字面量。
/// 匹配表达式但不捕获它。[29|30]
/// 从 2 个选项中选择
/// 29
/// 29
/// 30
/// 30
/// 对捕获编号的反向引用：2
/// 返回
/// 新队
/// 匹配表达式但不捕获它。[(?:1[6-9]|[2-9]\d)?\d{2}]
/// (?:1[6-9]|[2-9]\d)?\d{2}
/// 匹配表达式但不捕获它。[1[6-9]|[2-9]\d]，零次或一次重复
/// 从 2 个选项中选择
/// 1[6-9]
/// 1
/// 此类中的任何字符：[6-9]
/// [2-9]\d
/// 此类中的任何字符：[2-9]
/// 任意数字
/// 任意数字，正好 2 次重复
/// 行尾或字符串
/// ^(?:0?2(\/|-|\.)29\3(?:(?:(?:1[6-9]|[2-9]\d)?(?: 0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$
/// 行或字符串的开头
/// 匹配表达式但不捕获它。[0?2(\/|-|\.)29\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[ 2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00)))]
/// 0?2(\/|-|\.)29\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48] |[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00)))
/// 0，零次或一次重复2
/// [3]：一个编号的捕获组。[\/|-|\.]
/// 从 3 个选项中选择
/// 字面量/
/// -
/// 字面量。
/// 29
/// 对捕获编号的反向引用：3
/// 匹配表达式但不捕获它。[(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:( ?:16|[2468][048]|[3579][26])00))]
/// 匹配表达式但不捕获它。[(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16 |[2468][048]|[3579][26])00)]
/// 从 2 个选项中选择
/// (?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])
/// 匹配表达式但不捕获它。[1[6-9]|[2-9]\d]，零次或一次重复
/// 从 2 个选项中选择
/// 1[6-9]
/// 1
/// 此类中的任何字符：[6-9]
/// [2-9]\d
/// 此类中的任何字符：[2-9]
/// 任意数字
/// 匹配表达式但不捕获它。[0[48]|[2468][048]|[13579][26]]
/// 从 3 个选项中选择
/// 0[48]
/// 0
/// 此类中的任何字符：[48]
/// [2468][048]
/// 此类中的任何字符：[2468]
/// 此类中的任何字符：[048]
/// [13579][26]
/// 此类中的任何字符：[13579]
/// 此类中的任何字符：[26]
/// (?:(?:16|[2468][048]|[3579][26])00)
/// 返回
/// 新队
/// 匹配表达式但不捕获它。[(?:16|[2468][048]|[3579][26])00]
/// (?:16|[2468][048]|[3579][26])00
/// 匹配表达式但不捕获它。[16|[2468][048]|[3579][26]]
/// 从 3 个选项中选择
/// 16
/// 16
/// [2468][048]
/// 此类中的任何字符：[2468]
/// 此类中的任何字符：[048]
/// [3579][26]
/// 此类中的任何字符：[3579]
/// 此类中的任何字符：[26]
/// 00
/// 行尾或字符串
/// ^(?:(?:0?[1-9])|(?:1[0-2]))(\/|-|\.)(?:0?[1-9]| 1\d|2[0-8])\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$
/// 行或字符串的开头
/// 匹配表达式但不捕获它。[(?:0?[1-9])|(?:1[0-2])]
/// 从 2 个选项中选择
/// 匹配表达式但不捕获它。[0?[1-9]]
/// 0?[1-9]
/// 0，零或一重复
/// 此类中的任何字符：[1-9]
/// 匹配表达式但不捕获它。[1[0-2]]
/// 1[0-2]
/// 1
/// 此类中的任何字符：[0-2]
/// 返回
/// 新队
/// [4]：一个编号的捕获组。[\/|-|\.]
/// 从 3 个选项中选择
/// 字面量/
/// -
/// 字面量。
/// 匹配表达式但不捕获它。[0?[1-9]|1\d|2[0-8]]
/// 从 3 个选项中选择
/// 0?[1-9]
/// 0，零或一重复
/// 此类中的任何字符：[1-9]
/// 1\d
/// 1
/// 任意数字
/// 2[0-8]
/// 2
/// 此类中的任何字符：[0-8]
/// 对捕获编号的反向引用：4
/// 匹配表达式但不捕获它。[(?:1[6-9]|[2-9]\d)?\d{2}]
/// (?:1[6-9]|[2-9]\d)?\d{2}
/// 匹配表达式但不捕获它。[1[6-9]|[2-9]\d]，零次或一次重复
/// 从 2 个选项中选择
/// 1[6-9]
/// 1
/// 此类中的任何字符：[6-9]
/// [2-9]\d
/// 此类中的任何字符：[2-9]
/// 任意数字
/// 任意数字，正好 2 次重复
/// 行尾或字符串
///  
///
///
公共静态正则表达式正则表达式 = 新正则表达式（
      "^(?:(?:(?:0?[13578]|1[02])(\\/|-|\\.)31)\\1|\r\n(?:(?:0 ?[13-9]"+
      "|1[0-2])(\\/|-|\\.)(?:29|30)\\2))\r\n(?:(?:1[6-9]|[ 2-9]\\d)?\\d"+
      "{2})$|^(?:0?2(\\/|-|\\.)29\\3(?:(?:(?:1[6-9]|[2-9] \\d)?(?:0["+
      "48]|[2468][048]|[13579][26])|\r\n(?:(?:16|[2468][048]|[3579][2"+
      "6])00))))$|^(?:(?:0?[1-9])|(?:1[0-2]))\r\n(\\/|-|\ \.)(?:0?[1-9"+
      "]|1\\d|2[0-8])\\4(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$" ,
    RegexOptions.CultureInvariant
    | RegexOptions.Compiled
    );

```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-02T04:13:49.077

我认为维护正则表达式的答案不在于评论或正则表达式结构。

如果我的任务是调试您给出的示例，我会坐在一个正则表达式调试工具（如[Regex Coach](http://www.weitz.de/regex-coach/)）前，并逐步检查它必须处理的数据的正则表达式。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-09-04T13:49:34.390

我[最近发布了一个关于使用嵌入式评论评论正则表达式](https://stackoverflow.com/questions/1378627/including-comments-in-java-regular-expressions)的问题有有用的答案，特别是来自@mikej

> 有关提高正则表达式可读性的更多想法，请参阅 Martin Fowler 在 ComposedRegex 上的帖子。总之，他主张将复杂的正则表达式分解成更小的部分，这些部分可以被赋予有意义的变量名。例如

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-02T04:10:41.080

我不希望正则表达式是可读的，所以我只保留它们原样，并在需要时重写。

# c++ - Objective C 到 C++ 桥的自动代码生成

> ID：708257
> 
> 赞同：5
> 
> 时间：2009-04-02T04:06:51.993
> 
> 标签：c++, objective-c

我正在寻求 Mac/iPhone 开发人员对新项目的意见。这个想法是使用 swig (www.swig.org) 启动一个开源计划，以自动生成从目标 c 到 c++ 的桥梁，以便人们可以从 cocoa/cocoa touch 访问 c++ 应用程序。

Apple 为通过 Objective C++ 混合 Objective C 和 C++ 提供了很好的支持，但是手动编写这些桥可能很乏味并且容易出错。这个项目打算做的是提供一种在 c++ 上自动生成目标 c 接口和包装器的方法，以便任何可可或可可触摸应用程序碰巧看到下面带有 c++ 的面向对象的目标 c 接口。

对于这个想法的任何意见或建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T04:25:51.107

我不认为这是必要的。使用 Objective-C++，您根本不需要桥接器。给定一个定义的 C++ 类

```
class Foo {
  public:
    void someMethod(void);
} 
```

您可以在 Objective-C++ 代码中的任何地方使用该类。例如，在一个方法中：

```
- (void)myObjCMethod {
  Foo myFoo;

  myFoo.someMethod();

  //etc.
} 
```

您可以拥有指向 C++ 类的实例变量，因此您可以定义一个 Objective-C 类，例如

```
@interface Bar : NSObject {
  Foo *foo;
}

@property (assign) Foo * foo;
@end

@implementation
@synthesize foo;

- (void)dalloc {
  delete foo;
  [super dealloc];
}

- (id)init {
  if(self = [super init]) {
    foo = new Foo();
  }

  return self;
}

- (void)aMethod {
   self.foo->barMethod();
} 
```

我不认为您可以模板化 Objective-C 方法，但 Objective-C++ 中的 C++ 模板实例化是公平的游戏。正如 Objective-C 是 C 的严格超集一样，Objective-C++ 是 C++ 的超集，添加了 Objective-C 风格的类和消息传递。

如果您确实想“桥接”一个 C++ 类，那么您通常会遇到麻烦，因为 Objective-C 的对象模型不支持多重继承和运算符重载之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T04:17:22.140

我觉得这是一个足够好的想法，如果类似的东西不存在，我会感到惊讶。另一方面，由于您可以直接编译 C++，（看看 .mm 扩展名给您带来了什么）它可能有点微不足道。

# c++ - 是否有某种工具或助手可以将 MFC/C++ 应用程序移植到 OS X/Cocoa？

> ID：708285
> 
> 赞同：1
> 
> 时间：2009-04-02T04:16:58.413
> 
> 标签：c++, macos, mfc

我有一个用 MFC 编写的重要代码库，我的任务是为 Mac OS X 创建一个端口。我知道我必须在某个时候卷起袖子，做很多繁重的工作才能让一切正常工作，但是有没有什么工具可以让我走上正轨？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T04:19:14.367

老实说，这些模型是如此不同，以至于我怀疑您至少需要对大多数 UI 部分进行几乎完整的重新编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T04:36:36.323

我正在研究一个。

从 GUI 的角度来看，新版本的[AppMaker](http://www.aussiedesignedsoftware.com/AppMakerX.html)基于导入/生成模型。我用 AppMaker 完成的大部分商业工作都是另一种方式，将 Macintosh 应用程序移植到 Windows。但是，没有理由不能反过来应用相同的原则。

AppMaker v2 有一个非常好的 PowerPlant UI 资源和传统 Mac 对话框的导入器。由于它只能在 Classic 上运行，因此该代码库已被丢弃（您真的不想知道），我为 AppMaker v2 编写的最终生成器语言是一个 XML 导出器，它将整个对象模型转储到扩展的 XAML .

我已经有一个 XAML UI 生成器，目前正在开发一个 Cocoa xib 生成器——这是 6 月份参加 WWDC 的原因之一。在将注意力返回到 GUI 编辑器之前，此时的重点是导入/生成器套件。

我编写了[PP2MFC](http://www.oofile.com.au/pp2mfc/crossplatform.html)以允许为 Windows 编译 PowerPlant 应用程序 - 需要一个跨平台解决方案，因为当时（1997 年）没有其他框架或跨平台工具能够很好地满足硬件要求。从那以后，我与可以追赶的人讨论了一个相反的程序，我确信可以创建一个 MFC 可移植层来映射到 Cocoa 对象。虽然许多开发人员对 MFC 的消息映射体系结构有不好的看法，但大量基于宏的 API 位于一个相当干净的 OO 框架之上。

在这种项目中，您需要考虑长期可维护性——您是否想要最终成为与 Cocoa 一起使用的大量 MFC 代码，或者您想要迁移到惯用的 Cocoa 程序。

任何进一步的讨论都应该取消 SO - 在 oofile.com.au 上通过 dent 与我联系，但我很乐意在这里讨论技术细节和可行性。代码生成和瘦框架适配器层的组合比大多数人预期的效果更好。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-04-02T04:22:30.617

不，这样的工具几乎不可能写出来。

MFC 和 Cocoa 是完全不同的平台，没有简单的方法可以在两者之间进行转换。

根据您编写应用程序的方式，您将需要编写代码的 GUI 部分甚至整个代码库。

# winapi - C++ Windows API 覆盖？

> ID：708289
> 
> 赞同：1
> 
> 时间：2009-04-02T04:19:45.380
> 
> 标签：winapi

在 VS9 中，当我调用 GetTickCount() 函数时，它会在编译时自动将其转换为 GetTickCount64() 函数。第二个功能仅适用于 Vista+，因此我的程序在 XP 上运行时出错。

我怎样才能“覆盖”它，以便它调用原始的 GetTickCount() ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T04:23:33.250

设置`WINVER`为您要定位的 Windows 版本。或者也许是`_WIN32_WINNT`或`_WIN32_WINDOWS`。也许甚至他们所有人...

看看[http://blogs.msdn.com/oldnewthing/archive/2007/04/11/2079137.aspx](http://blogs.msdn.com/oldnewthing/archive/2007/04/11/2079137.aspx)了解关于那个小的 mess-o-version 宏的详细信息。

但是，我在 Windows SDK 中根本看不到重新定义 - 我们的设置中是否还有其他东西正在执行重新定义（或者我可能错过了它......）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T04:24:30.843

请记住，您不是为 Vista 或 Windows XP 编译应用程序，而是为 32 位或 64 位操作系统编译。如果您的应用程序需要支持 64 位 Vista 以外的其他 Windows 版本，则在构建选项中指定为 32 位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T05:41:04.373

我在 targetver.h 中设置了以下内容：

```
#define WINVER 0x0501 
#define _WIN32_WINNT 0x0501
#define _WIN32_WINDOWS 0x0501 
```

它仍然被重新定义。但是，当我创建一个打印出 GetTickCount() 的简单新项目时，即使我不必定义上述内容，它也可以在 XP 上正常工作。我没有更改项目设置中的任何内容。有效的示例 GetTickCount() 和无效的示例之间的唯一区别是它周围有很多其他代码并使用它，但这些代码都不应该改变任何东西。

这可能是什么原因造成的？

编辑：我使用的其他文件之一是直接调用 GetTickCount64()，我对此一无所知，所以我认为这是我自己的 GetTickCount() 函数。请忽略我上面写的

# .net - 使用 Unicode 排序规则时性能下降

> ID：708295
> 
> 赞同：0
> 
> 时间：2009-04-02T04:22:41.833
> 
> 标签：.net, asp.net, sql-server, linq-to-sql

（.NET 3.5 SP1、VS 2008、VB.NET、MSSQL Server 2008）

我正在编写一个小型网络应用程序来测试高棉 Unicode 和老挝 Unicode。我有一个表以高棉 Unicode 存储文本，其结构如下：

```
[t_id] [int] IDENTITY(1,1) NOT NULL
[t_chid] [int] NOT NULL
[t_vn] [int] NOT NULL
[t_v] [nvarchar](max) NOT NULL 
```

我可以正常使用 Linq to SQL 进行 CRUD。文本在网页上正确显示，即使我没有更改 MSSQL Server 2008 的默认排序规则。

当搜索列 [t_v] 时，页面将需要很长时间才能加载，事实上，它会加载该列的每一行。它从不与我用于搜索的“关键字”标准进行比较。这是我的搜索查询：

```
Public Shared Function SearchTestingKhmerTable(ByVal keyword As String) As DataTable

    Dim db As New BibleDataClassesDataContext()
    Dim query = From b In db.khmer_books _
                From ch In db.khmer_chapters _
                From v In db.testing_khmers _
                Where v.t_v.Contains(keyword) And ch.kh_book_id = b.kh_b_id And v.t_chid = ch.kh_ch_id _
                Select b.kh_b_id, b.kh_b_title, ch.kh_ch_id, ch.kh_ch_number, v.t_id, v.t_vn, v.t_v

    Dim dtDataTableOne = New DataTable("dtOne")
    dtDataTableOne.Columns.Add("bid", GetType(Integer))
    dtDataTableOne.Columns.Add("btitle", GetType(String))
    dtDataTableOne.Columns.Add("chid", GetType(Integer))
    dtDataTableOne.Columns.Add("chn", GetType(Integer))
    dtDataTableOne.Columns.Add("vid", GetType(Integer))
    dtDataTableOne.Columns.Add("vn", GetType(Integer))
    dtDataTableOne.Columns.Add("verse", GetType(String))

    For Each r In query
        dtDataTableOne.Rows.Add(New Object() {r.kh_b_id, r.kh_b_title, r.kh_ch_id, r.kh_ch_number, r.t_id, r.t_vn, r.t_v})
    Next
    Return dtDataTableOne

End Function 
```

请注意，我使用与老挝 Unicode 完全相同的代码和数据库设计，它工作得很好。我得到了搜索预期的返回查询。

我不知道在高棉表中搜索查询有什么问题。

* * *

我使用以下 Linq 加入表格：

```
Dim query = From b In db.khmer_books _
    Join ch In db.khmer_chapters On b.kh_b_id Equals ch.kh_book_id _
    Join v In db.testing_khmers On ch.kh_ch_id Equals v.t_chid _
    Where v.t_v.Contains(keyword) _
    Select b.kh_b_id, b.kh_b_title, ch.kh_ch_id, ch.kh_ch_number, v.t_id, v.t_vn, v.t_v 
```

但我仍然得到了该表中的所有行。任何想法 ？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T04:28:02.990

我很慢；问题是（我认为）连接；你有导航属性吗？你应该可以使用类似的东西

```
 from book in db.Books
         from chapter in book.Chapters
         from verse in chapter.Verses 
```

等 - 或（最坏的情况）使用 LINQ`join`语法。我认为这将比复合材料好得多`WHERE`；像这样：

```
 From b In db.khmer_books
    Join ch In db.khmer_chapters On b.kh_b_id Equals ch.kh_book_id Into ch
    Join v In db.testing_khmers On ch.kh_ch_id Equals v.t_chid Into v
    Where v.t_v.Contains(keyword)
   {your select} 
```

* * *

原来的：

首先要做的是获取生成的查询；您可以`db.Log = Console.Out`在运行查询之前分配，这会将 TSQL 推送到控制台（或者您可以使用任何其他`TextWriter`）。我很想看看它会产生什么......

然后，您可以在数据库（管理工作室）上测试这个 TSQL，看看它出现了什么可怕的错误。

在最坏的情况下，您可以编写一个 UDF 来进行搜索（使用固定的 TSQL），并从 LINQ-to-SQL 调用它。

你能发布TSQL吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T05:01:41.317

这是我从 SqlServerQueryVisualizer 获得的 TSQL：

```
SELECT [t0].[kh_b_id], [t0].[kh_b_title], [t1].[kh_ch_id], [t1].[kh_ch_number], [t2].[t_id], [t2].[t_vn], [t2].[t_v]
FROM [dbo].[khmer_book] AS [t0], [dbo].[khmer_chapter] AS [t1], [dbo].[testing_khmer] AS [t2]
WHERE ([t2].[t_v] LIKE '%ដាវីឌ%') AND ([t1].[kh_book_id] = [t0].[kh_b_id]) AND ([t2].[t_chid] = [t1].[kh_ch_id]) 
```

我在管理工作室运行它，即使表中有ដាវីឌ，我也没有得到任何东西。

# c#-2.0 - 对字符串类型的数据表列求和

> ID：708299
> 
> 赞同：4
> 
> 时间：2009-04-02T04:25:22.467
> 
> 标签：c#-2.0

如何计算`DataTable`字符串类型的两行的总和？
就我而言，我无法更改列类型。
我试过这些：

1)

```
object objSum;    
objSum = dt.Compute("Sum(WeightRate)", ""); 
```

2)

```
decimal total = (decimal)dt.Compute("SUM( [WeightRate] )", "");` 
```

但没有运气...

我的桌子：

> 计重车数 350.50
> 50
> 205.00 40

我需要结果

> 计重车数 555.50
> 90

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-02T04:31:05.743

Compute 方法允许进行一些基本的类型转换：

```
var sum = dt.Compute("Sum(Convert(WeightRate, 'System.Int32'))"); 
```

有关可以使用 Compute 方法调用执行什么操作的更多信息，请参阅 MSDN 帮助中的[DataColumn Expressions 。](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx)

**编辑**重新阅读您的问题后，您可能希望转换为 System.Decimal 而不是 System.Int32，但希望您明白了。;-)

# java - “容器 c=getContentPane();”的目的是什么 在摇摆？

> ID：708302
> 
> 赞同：5
> 
> 时间：2009-04-02T04:26:29.950
> 
> 标签：java, swing

```
import java.awt.*;
import javax.swing.*;
public class 
import javax.swing.*;
import java.awt.*;
import javax.swing.tree.*;
import javax.swing.event.*;
/*<applet code="JT.class" width=200 height=300>
</applet>*/ 
```

```
public class JT extends JApplet {
    JTree tree;
    JTextField box;
    Object nodeInfo;
    String node1;
    public void init() {
        Container c=getContentPane();
        c.setLayout(new BorderLayout());
        DefaultMutableTreeNode topNode=new DefaultMutableTreeNode("qiscet");
        DefaultMutableTreeNode cou=new DefaultMutableTreeNode("Courses");
        DefaultMutableTreeNode mca=new DefaultMutableTreeNode("MCA");
        DefaultMutableTreeNode mba=new DefaultMutableTreeNode("MBA");
        DefaultMutableTreeNode tech=new DefaultMutableTreeNode("B.tech");
        topNode.add(cou);
        cou.add(mca);   
        cou.add(mba);
        cou.add(tech);
        DefaultMutableTreeNode manage=new DefaultMutableTreeNode("Management");
        DefaultMutableTreeNode ac=new DefaultMutableTreeNode("Accounts");
        DefaultMutableTreeNode sp=new DefaultMutableTreeNode("Sports");
        DefaultMutableTreeNode lib=new DefaultMutableTreeNode("Library");
        topNode.add(manage);
        manage.add(ac); 
        manage.add(sp);
        manage.add(lib);
        tree=new JTree(topNode);
        c.add(tree,BorderLayout.NORTH);
        box=new JTextField("",80);
        c.add(box,BorderLayout.SOUTH);
    }
} 
```

我的问题是没有使用“Container c=getContentPane();” 我得到正确的输出。这怎么可能？这是什么原因？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-02T04:29:37.540

从 Swing 开始，您将 getContentPane() 用于 add() 和 setLayout() 之类的东西，以使您意识到存在不同的层。过了一会儿，我猜他们承认这是一种痛苦，所以他们在内部调用了 getContentPane()，这样你就不必再这样做了。

[这在 JDK 1.5 中有所改变](http://java.sun.com/j2se/1.5.0/docs/relnotes/features.html#swing)：

> 最后，七年后，我们使 jFrame.add 等同于 jFrame.getContentPane().add()

[这是原始原因背后的基本原理的链接。](http://weblogs.java.net/blog/hansmuller/archive/2005/11/jframeadd_conte.html)

# apache - 为什么这个 .htaccess 会剥离包含文件夹？

> ID：708305
> 
> 赞同：1
> 
> 时间：2009-04-02T04:28:10.460
> 
> 标签：apache, .htaccess, mod-rewrite

这是来自位于 /~new/ 下的 .htaccess

```
# invoke rewrite engine
    RewriteEngine On

# force domain.com to www.domain.com

RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$0 [R=301,L,NC] 
```

当访问[http://domain.com/~new/hello](http://domain.com/~new/hello)时，它被重写为[http://www.domain.com/hello](http://www.domain.com/hello)

`www.`正在按应有的方式添加，但由于某种原因，它忽略了 /~new/ 子目录。

有谁知道可能是什么原因造成的？仅供参考，TLD 中有一个 .htaccess，但它是空的。我知道我可以将 /~new/ 添加到正则表达式替换字符串，但我更喜欢通用解决方案（为了可移植性），我不确定为什么首先将其剥离。我也尝试过使用 RewriteBase，但无法让它工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T04:36:58.617

我认为通常 {REQUEST_URI} 会在您的重写规则中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www..*
RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} ^([^.]*).(com|com/)
RewriteRule ^.*$ www.%1.%2%{REQUEST_URI} [R=301,L] 
```

# asp.net - 尝试使用 Visual Studio 2008 附加到 ASP.NET 进程时，“Windows 64 位平台不支持混合模式调试”

> ID：708323
> 
> 赞同：2
> 
> 时间：2009-04-02T04:36:47.070
> 
> 标签：asp.net, visual-studio, visual-studio-2008, debugging, iis

在 .NET 2.0 和 VS.NET 2005 中调试 ASP.NET 应用程序时，我习惯于附加一个进程。我不知道在 VS.NET 2008 中这个功能发生了什么。

我也不想从起始页开始进行调试，因为当应用程序足够大时，您不希望它被编译，并且您有时无法从一开始就捕获一个案例，而您想在那段时间内捕获该案例.

我想不通这个。

我正在使用 VS.NET 2008 Team Suite 运行 Vista Ultimate x64。

同样在网站属性页面的启动选项中，服务器被选为“使用默认 Web 服务器”，自定义服务器显示为灰色，我无法检查。（我不知道我是否需要在这里进行一些更改，但我什至无法尝试）

最重要的是，我尝试从默认页面进行调试，但在这种情况下，我得到的是“无法在 Web 服务器上开始调试。Windows 64 位平台不支持混合模式调试”。什么？无论如何，我进入解决方案的配置管理器并将混合模式更改为任何 CPU，但没有运气。

没有调试的帮助会使 ASP.NET 降低到 PHP 或其他类型的水平。

补充笔记：

1.  我正在使用 DotNetNuke 5.0.1 并在其下构建模块。
2.  IIS 7 与集成模式一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T04:49:30.567

我在 64 位 Vista 上找到的用于调试的密钥如下。

1.) 确保 web 应用程序完全在 IIS 中运行，而不是 Cassini ( [http://localhost](http://localhost)地址) 2.) 附加到 w3wp.exe 进程时，一定要选择 T-SQL 类型的，托管，x64，而不是仅显示 x64 类型的

按照这两个步骤，我已经解决了我遇到的所有问题。类似于你上面列出的那些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-09-03T19:12:57.227

By the way, for anyone else finding this article based on the same error message (at least in my case) was to modify the app pool in IIS. Go to advanced settings, change "Enable 32-Bit Applications" to True. VS2010, Win 7 64 bit.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T04:52:16.783

好的，听起来您遇到了几个问题。

1) webdev 服务器的自动启动：这通常是由于您的解决方案中的某个项目设置为“调试时始终启动”引起的。只需在解决方案资源管理器中单击项目，然后按 F4 即可打开属性窗口，并将其从“True”更改为“False”。您可能需要检查解决方案中的所有项目。

2) 当网站发布到真正的 IIS 时，应该附加到进程，我假设你正在这样做。我对 Vista 下的 IIS 并不完全熟悉，但您需要深入了解它并确保为您的 Web 应用程序启用了调试功能。如果您正在这样做，则无需费心使用起始页或使用自定义服务器。

希望对一些人有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-05T11:50:35.703

米切尔·塞勒斯提供了帮助。他指出调试模式没问题，但是在附加到进程时，“附加到”是“自动：本机代码”。

更改为仅“托管代码”或仅选择“托管代码”后，它开始工作。

谢谢米切尔。

这是米切尔的最后一句话：

The "Script" option, is for classic ASP scripts, which ALWAYS run in 32 bit mode, thus debugging T-SQL and Script at the same time results in the "mixed mode", as T-SQL is 64 bit by default. Additionally without the "Managed" option selected, you would never be able to debug anyway.

Now, as to why it was different? I'm not sure, but once you change it you should be set to go for the future.

# java - Java 读写 XML 数据文件时出现“文件过早结束”错误

> ID：708327
> 
> 赞同：7
> 
> 时间：2009-04-02T04:43:05.713
> 
> 标签：java, xml, servlets

我一直在使用 JDOM 库通过 Java Servlet 读取和写入 XML 文件。

问题是当我使用 AJAX 向我的 servlet 发送许多请求时，这些请求在 XML 文件中读取和写入数据，很多时候它无法显示错误：文件过早结束。如何将所有这些读/写同步到文件，或者有没有其他方法可以防止这些问题？如果需要更多详细信息，请告诉我。

在这种情况下使用线程会有什么好处吗？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-02T05:10:02.997

两种可能的解决方案是：

*   将您的文件写入 thename.xml.part，然后在完成/关闭后重命名为 thename.xml，这使得写入更接近于原子 - 读者无法读取它，直到它确定完成，只要它正在寻找仅适用于“.xml”文件。
*   或者，使用数据库，原子性就是他们所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-04-12T10:18:45.477

我遇到过这类问题，但完全不一样。我正在分享我对这个错误的经验。请，对任何不便深表歉意。

**我遇到了以下问题**

1.  我必须用动态变量数据形成一个 xml 文件。并通过 Java 中的 PostMethod 将该 xml 发布到 URL。

2.  通常它可以工作。但是当动态变量数据为空时。然后它显示“文件提前结束”。

**解决方案：**

1.  只需检查变量是否为空。它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-12T07:38:08.580

尝试将所有写入请求添加到**进程队列**，然后通过队列的这些元素构建/附加 XML。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-11-02T06:51:28.720

我也遇到过这个问题。我的经验是...

1.  清洁项目
2.  重建项目

然后它将成功运行....

# language-agnostic - 语法高亮设计模式

> ID：708328
> 
> 赞同：5
> 
> 时间：2009-04-02T04:43:27.587
> 
> 标签：language-agnostic, syntax-highlighting

我正在寻找一些关于在文本框中启用语法突出显示的最佳实践和常见模式的良好概述。这似乎是一个非常常见的练习，几乎所有语言都有一个 UI 控件，可以在不同语言中启用语法突出显示。我只是想看看是否有一个共同的实现模式。

每个人都在使用正则表达式吗？是否有语法高亮场景中常用的正则表达式存储库？

语法高亮是否有替代/更好的方法？

**更新**

链接到有关以给定语言执行语法突出显示的相关资源或与语法突出显示相关的概念会很棒。Lexing（词法分析）在答案中提出，但没有链接以了解更多信息。任何有助于更好地理解这个普遍解决的问题的东西都会很棒。

[维基百科的词法分析](http://en.wikipedia.org/wiki/Lexical_analysis)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T05:25:21.230

正则表达式绝对是最开始的第一个地方。但是，它们无法真正应对大多数语言中遇到的许多边缘情况——看起来像关键字的文本可以在找到的字符串文字中，而字符串文字又可以包含转义的分隔符以及特殊字符。评论等也是如此。

基本上，要做好语法突出显示，您需要对源代码进行词法分析 - 使用特定于语言的启发式方法对其进行解析，以构建区域列表，其中源代码的每个区域都用它的样式进行注释.

随着编辑的进行，您可以再次应用语言规则来查看此更改可以在多大程度上改变区域的呈现方式。例如，在字符串文字中键入一个字母只会使字符串文字区域更长，但键入右引号会截断该区域并将其剩余部分转换为代码，这取决于所有其他词法规则。

# java - 使用 Object.wait(millisec) 模拟睡眠

> ID：708333
> 
> 赞同：5
> 
> 时间：2009-04-02T04:45:25.397
> 
> 标签：java, multithreading, concurrency

这是我在维护的一些代码中看到的一段代码。

```
Object lock = new Object();

synchronized( lock ) 
{
   try
   {
       lock.wait( 50000 );
       Thread.sleep( 3000 );
   } 
   catch(Exception ex)
   {
   }
} 
```

开发人员希望暂停当前线程一段时间，并使用 Object#wait 作为机制。显然，出于这个原因，使用等待/通知协议是不好的形式；但是，调用 wait(millisec) 和 Thread.sleep 之间有什么主要区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T04:53:34.970

除了必须在 wait() 之前获得监视器之外，只要没有外部人员将要进行 .notify() 操作，就没有太大区别了。

在古老的 Java 代码中，您会看到人们使用 wait() 而不是 Thread.sleep()，因为 Thread.sleep() 会冻结系统上的整个应用程序，而无需抢占式多任务处理（我在看你的 OS9）。从技术上讲，wait() 也可以让您使用纳米分辨率等待，但实际上它们很少那么准确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-02T07:24:21.053

请注意，在*同步*块中使用 Object.wait() 和 Thread.sleep() 有一个关键区别：Thread.sleep() 不会释放锁定的监视器，因此没有其他人可以成为监视器的所有者。

In addition, Object.wait() does not guarantee that the delay indicated will be obeyed strictly. First of all, after the delay passes, the thread may still be waiting for another thread that has become the monitor owner in the meantime; and it may compete with other threads waiting to grab the monitor.

Second, the mythical spurious wake-up, as it is described in the Java 6 API javadoc:

> A thread can also wake up without being notified, interrupted, or timing out, a so-called spurious wakeup.

Unlikely as it is, every piece of code using Object.wait() should take it into consideration.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-02T05:24:41.153

您说为此使用等待/通知是“显然”不好的形式，但我认为它没有任何问题。诚然，通过一个电话跟进它`sleep`是非常奇怪的（并且吞下异常是不好的），但我之前肯定被`Object.wait`用作“易碎的睡眠”。

想象一下，您有一个线程每分钟轮询一个资源，但是如果发生了某些事情（例如，资源位置已更改，或者计时器频率已更改，或者程序想要以优雅的方式退出），您希望被唤醒。Using`wait/notify`对此非常有效 - 它绝对比`interrupt`从其他地方调用线程更干净，因为通知是否在您实际处理而不是等待时发生并不重要。

# actionscript-3 - Flex 3 ColorPicker 更改 SWFLoader 中的影片剪辑

> ID：708335
> 
> 赞同：0
> 
> 时间：2009-04-02T04:45:50.043
> 
> 标签：actionscript-3, flex3, flash

如何在 Flex 3 中使用 ColorPicker 来更改从数组动态加载到 SWFLoader 的影片剪辑的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T06:12:15.157

收听 ColorPicker 的`change`事件。当它触发时，将 MovieClip 的`opaqueBackground`颜色设置为 ColorPicker 的`selectedColor`属性

# java - 在 Java 中实现工厂模式的最佳方法

> ID：708336
> 
> 赞同：6
> 
> 时间：2009-04-02T04:46:40.853
> 
> 标签：java, factory-pattern

我正在尝试编写工厂模式以在我的程序中创建 MainMode 或 TestMode。我之前用来创建这些对象的代码是：

```
play = (isMode) ? new MainMode(numberRanges, numberOfGuesses) : 
                  new TestMode(numberRanges, numberOfGuesses, randNo()); 
```

My Game (play) 将根据布尔值 (isMode) 创建 MainMode 对象或 TestMode 对象。如您所见，我在我的 TestMode 对象 (randNo()) 中添加了一个额外的值。此值在 TestMode 中用于允许用户输入他们自己的“随机数”，而在 MainMode 构造函数中这是随机生成的。在这个程序中，MainMode 和 TestMode 都是抽象类 Game 的子类。

现在我想用工厂模式替换这一行，尽管我不确定因为我的 TestMode 构造函数需要一个额外的对象，而且我不确定我需要在哪里传递这个值。如果我要创建一个工厂，它需要在一个新类中，可能命名为 GameFactory 或 ModeFactory 或类似的东西。

我该怎么办？

**编辑：**这里的问题是上面的代码在我的 GUI 中，其中 numberRanges、numberOfGuesses 和 randNo() 方法的值是。我想创建一个工厂类，但我无法传递这些值，因为 randNo() 会自行激活。这是我的 randNo() 方法。

```
private int randNo() {
    boolean isValidNumber = true;
    int testRandomNum = 0;
    while(isValidNumber) {
        try {
            testRandomNum = Integer.parseInt(JOptionPane.showInputDialog("Enter Random Number"));
            isValidNumber = false;
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(null, "Sorry, but the number you entered was invalid");
        }
    }

    return testRandomNum;
} 
```

问题是每当我通过 randNo() 时，它都会显示 JOptionPane。正如我已经说过的，GUI 和逻辑是分开的。GUI 位于 GUI 包中，而其余代码位于逻辑包中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-02T05:34:40.287

请注意，其他一些答案可能可以说是描述工厂，但没有描述*GOF 工厂模式*。

> 现在我想用工厂模式替换这一行，尽管我不确定因为我的 TestMode 构造函数需要一个额外的对象，而且我不确定我需要在哪里传递这个值。

好吧，你可以这样想：MainMode，而不是 TestMode，是做一件特殊事情的那个。它所做的特殊事情是*忽略*给定的数字，以确保它真的是随机的。以这种方式思考，MainMode 做了一些额外的事情。

或者，如果除了随机性之外，MainMode 和 TestMode 没有什么不同，那么您可能会认为您可以将这种相似性分解为一个类，该类提供了用于计算随机数的两种策略之一。一种策略实际上是随机的，一种是反常的，随机范围只有 1 个值。

但是让我们假设 MainMode 和 TestMode 之间还有其他区别——大概是 TestMode 输出额外的调试到 System.out 或其他东西。

我们仍然可以将“我们如何提供随机性”从我们是在测试还是在玩真正的游戏中分解出来。这些是*正交*的问题。

所以现在我们知道，除了“模式”所做的任何其他事情外，它还应该接受随机策略。然后我们可以，例如，当你被告知标准平台随机数不够随机时，你可以用更好的随机数替换它。

或者您可以进行测试，其中随机数的范围仅限于两个选择，或者总是从一到零交替，或者在每次调用时返回某个 Vecrtor 或 Iterator 中的下一个值。

所以我们使用 GOF 策略模式来构建随机策略：

```
interface RandomStrategy { 
  public double random();
}

public class NotSoRandom implements RandomStrategy {
  private double r;
  public NotSoRandom( final double r ) { this.r = r; }
  public double random() { return r; }
}

public class PlatformRandom implements RandomStrategy {
  public double random() { return Math.random(); }
} 
```

现在，如果您的整个应用程序只创建一个“模式”，则不需要工厂；当您需要一遍又一遍地创建相同的类类型时，您会使用工厂；工厂实际上只是一种创建正确类型（子）类的策略。

在生产代码中，我使用了工厂，其中我有一些创建东西的通用类，我需要告诉如何创建正确的子类来创建；我经过一家工厂来做那件事。

现在我们为 'Mode; 创建一个工厂模式；这将惊人地类似于策略模式：

```
abstract class Mode() {
 private RandomStrategy r;
 public Mode( final RandomStrategy r ) { this.r = r; }
 // ... all the methods a Mode has
}

public class MainMode implements Mode {
  public MainMode( final RandomStrategy r ) { super(r); }
}

public class TestMode implements Mode {
  public TestMode( final RandomStrategy r ) { super(r); }
}

interface ModeFactory{ 
  public Mode createMode( final RandomStrategy r );
}

public class MainFactory() {
  public Mode createMode( final RandomStrategy r ) {
      return new MainMode(r);
  }
}

public class TestFactory() {
  public Mode createMode( final RandomStrategy r ) {
      return new TestMode(r);
  }
} 
```

所以现在您知道了工厂模式和策略模式，以及它们在“形状”上的相似之处，但在使用方式上却有所不同：工厂模式是创建对象并返回要使用的对象；策略是对象行为的，通常显式创建一个实例，并持有对该实例的引用，以封装算法。但就结构而言，它们非常相似。

编辑：OP 在评论中询问“我如何将它集成到我的 GUI 中？”

好吧，这些都不属于你的程序的 GUI，除了可能的“模式”。您将创建 ConcreteStrategy 并将其传递给某些设置例程中的首选工厂，可能会根据命令行参数或配置文件确定要使用的工厂。基本上，您会选择正确的工厂，就像您在原始帖子中选择正确的课程一样。*再说一次，如果你只创建一个东西，你就不需要工厂。工厂用于大规模生产（或创建相关具体类型的系列——尽管这超出了这个问题的范围）。*

（假设我们有一个游戏，用户可以在命令行上选择是打机器人还是打龙；那么我们想要实例化一个产生 Opponents（接口）的 OpponentFactory，具有派生类 RobotOpponent 和 DragonOpponent，并通过该工厂到生成NewOpponent()的游戏部分。类似地，用户可能会选择勇敢或懦弱的对手，我们将其设置为策略。我们不需要制作更多的策略实例，因为策略通常是幂等的（无状态和单身）。）

```
static int main( String[] args ) {
// setup game world

final RandomStrategy r = "random".equals(args[0]) 
  ? new PlatformRandom() : new  NotSoRandom( Integer.intValue(args[0]) ) ;
// notice the simlarity to the code you originally posted;
// we factored out how to achieve "randomness" as a Strategy.

// now we will use our Strategy to setup our Factory;

final ModeFactory f = "test".equals(args[1])
  ? new TestFactory(r) : new MainFactory(r);
// also similar to your code
// we've just added an extra level of indirection: 
// instead of creating a Mode, we've created an object that can create Modes
//  of the right derived type, on demand.

// call something that uses our factory
functionThatRunsameAndNeedstoProduceModesWhenevertNeedsTo( f ); 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T05:15:14.950

工厂的全部意义在于它应该具有适当地创建游戏所需的状态。

所以我会建立一个这样的工厂：

```
public class GameFactory {
   private boolean testMode;

   public GameFactory(boolean testMode) {
     this.testMode = testMode;
   }

   public Game getGame(int numberRanges, int numberOfGuesses) {
     return (testMode) ? new MainMode(numberRanges, numberOfGuesses) : 
       new TestMode(numberRanges, numberOfGuesses, getRandom());
   }

   private int getRandom() {
     . . . // GUI code here
   }
} 
```

现在，您可以在应用程序的某个位置初始化这个工厂，并将其传递给创建游戏所需的任何代码。这段代码现在不需要担心它是什么模式，也不需要传递额外的随机参数——它使用一个众所周知的接口来创建游戏。所有需要的状态都由 GameFactory 对象内部化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T04:54:06.187

您的代码可能会更改为工厂模式。

就像是：

```
public static Mode createMode(boolean isMainMode)
{
    if(isMainMode) return new MainMode(...);
    return new TestMode(...);
} 
```

将此方法放在合理的地方（这个方法很棘手，可能是静态模式工厂）

这假设 MainMode 和 TestMode 是相同类型的子类型（子类或实现 Mode 接口）

现在所有需要做的就是调用 ModeFactory.createMode(...) 并传递适当的布尔值。

编辑（响应 OP 更新）：

您的 rand() 在调用实际构造函数之前被评估，并呈现 GUI。这就是你说的激活自己的意思吗？

你必须在你想决定模式的地方做出设计决定。如果你有一个 GUI 并且你有一个模型，最好设计 GUI 以在调用工厂方法之前知道是否需要调用随机生成（和弹出），然后将随机数传递给工厂方法，让它选择正确的构造函数。

反过来（模型调用你的 GUI）会更棘手，而且可能是个坏主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T04:55:54.047

尝试类似的东西，

```
abstract class ModeFactory {

    public static Mode getMode(isMode, numberRanges, numberofGuesses) {
        return isMode ? new MainMode(numberRanges, numberofGuesses) : new TestMode(numberRanges, numberOfGuesses, randNo());
    }

    public static Mode getMode(isMode, numberRanges, numberofGuesses, someNumber) {
        return isMode ? new MainMode(numberRanges, numberofGuesses) : new TestMode(numberRanges, numberOfGuesses, someNumber);
    }

} 
```

该类是抽象的，只是为了停止初始化。您可以修改它以使用 final ，然后创建一个私有构造函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T05:53:56.107

```
interface ModeFactory {
    Mode createMode(int numberRanges, int numberOfGuesses);
}

class MainModeFactory implements ModeFactory {
    Mode createMode(int numberRanges, int numberOfGuesses) {
        return new MainMode(numberRanges, numberOfGuesses);
    }
}

class TestModeFactory implements ModeFactory {
    Mode createMode(int numberRanges, int numberOfGuesses) {
        return new TestMode(numberRanges, numberOfGuesses, randNo());
    }
}

...

play = modeFactory.createMode(numberRanges, numberOfGuesses); 
```

因此，在启动时，您创建适当的模式工厂，将其传递到需要创建播放的任何位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-06-27T16:20:46.603

很简单，*总是使用一个参数*，如果不使用参数，发送`null`，如果你有其他“模式”的几个参数，将它们封装成一个参数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-09T14:43:34.703

如果您只是在使用工厂方法，那将为您创建一个给定名称的类，试试这个：

```
public static MyInterface createClass(String name) throws IllegalAccessException,
        InstantiationException, ClassNotFoundException {
    try {
        Class myClass = Class.forName(name);
        MyInterface myObj = (MyInterface) myObj.newInstance();
        return myObj;
    } catch (ClassNotFoundException ex) {
        logger.error("Could not find a class {}", name);
        throw ex;
    } catch (InstantiationException e) {
        logger.error("Class must be concrete {}", name);
        throw e;
    } catch (IllegalAccessException e) {
        logger.error("Class must have a no-arg constructor {}", name);
        throw e;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-03T16:24:45.457

你真正想做的是创建一个工厂，它返回一个抽象类或接口的对象（当然是他们的实现者）。然后在您决定的工厂方法中，选择哪个实现者。如果您选择一个抽象类，您可以在其中实现一些通用逻辑，并让其他方法未实现（将它们声明为抽象）。您可以让具体的下降者根据他们的需要来实现它们。这是工厂设计模式：

```
public class GridManagerFactory {
    public static AbstractGridManager getGridManager(LifecicleAlgorithmIntrface lifecicleAlgorithm, String... args){
        AbstractGridManager manager = null;

        // input from the command line
        if(args.length == 2){
            CommandLineGridManager clManager = new CommandLineGridManager();
            clManager.setWidth(Integer.parseInt(args[0]));
            clManager.setHeight(Integer.parseInt(args[1]));
            // possibly more configuration logic
            ...
            manager = clManager;
        } 
        // input from the file
        else if(args.length == 1){
            FileInputGridManager fiManager = new FileInputGridManager();
            fiManager.setFilePath(args[0]);
            // possibly more method calls from abstract class
            ...
            manager = fiManager ;
        }
        //... more possible concrete implementors
        else{
            manager = new CommandLineGridManager();
        }
        manager.setLifecicleAlgorithm(lifecicleAlgorithm);
        return manager;
    }
} 
```

抽象类中的公共逻辑可供其后代使用：

```
public abstract class AbstractGridManager {
    private LifecicleAlgorithmIntrface lifecicleAlgorithm;
    // ... more private fields

    //Method implemented in concrete Manager implementors 
    abstract public Grid initGrid();

    //Methods common to all implementors
    public Grid calculateNextLifecicle(Grid grid){
        return this.getLifecicleAlgorithm().calculateNextLifecicle(grid);
    }

    public LifecicleAlgorithmIntrface getLifecicleAlgorithm() {
        return lifecicleAlgorithm;
    }
    public void setLifecicleAlgorithm(LifecicleAlgorithmIntrface lifecicleAlgorithm) {
        this.lifecicleAlgorithm = lifecicleAlgorithm;
    }
    // ... more common logic and geter-seter pairs
} 
```

具体实现者只需要实现声明为抽象的方法：

```
 public class FileInputGridManager extends AbstractGridManager {

        private String filePath;

        @Override
        public Grid initGrid() {
            return this.initGrid(this.getFilePath());
        }

        public Grid initGrid(String filePath) {
            List<Cell> cells = new ArrayList<>();
            char[] chars;
            File file = new File(filePath); // for ex foo.txt
            // ... more logic
            return grid;
        }
    } 
```

AbstractGridManager 的接收者会调用他的方法并获取逻辑，在具体的后代（以及部分抽象类方法）中实现，而不知道他得到的具体实现是什么。这也称为控制反转或依赖注入

# php - php代码可以分解特定IP的共享托管服务吗？

> ID：708337
> 
> 赞同：1
> 
> 时间：2009-04-02T04:47:34.847
> 
> 标签：php, shared-hosting

抱歉，由于仍然没有解决方案，我不得不再次发布相同的帖子

我有一个奇怪的问题，我刚刚在共享主机（php、apache、mysql、linux）上安装了我的 php 网站，所有服务都运行良好。但是在配置我的应用程序后，我只能访问我的网站一次，其他尝试给出“服务器响应时间太长。”。但是从其他IP我可以访问，但只能访问一次，似乎所有IP地址在第一次访问后都被阻止（甚至ftp和其他服务都关闭了，根本无法从IP访问），任何人都可以帮助探索这个问题吗？我不认为这是我的应用程序问题，该应用程序在我的本地 PC 上运行良好。到目前为止，唯一的问题是我的代码中可能存在无限循环，因为我在本地电脑上遇到了这个问题，但我修复了它，应该在任何地方都能正常工作。无限循环可以阻止所有服务绑定（如果这是方式）到特定 IP 吗？但我不确定这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T05:05:00.653

我会更多地研究无限循环问题。我有一个类似的问题，只出现在共享服务器上，因为我的本地机器有不同版本的 php 和不同的错误设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T04:52:03.603

听起来像是会话或数据库连接的问题。您是否可以共享导致此问题的页面代码？

# apache-flex - 使用 RemoteObject 的同步调用

> ID：708338
> 
> 赞同：2
> 
> 时间：2009-04-02T04:48:34.110
> 
> 标签：apache-flex, actionscript

有没有办法在 Flex 中使用 RemoteObject 进行同步调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T15:09:40.387

Flex 中的所有 IO 都是异步的。处理此问题的典型模式是使用[`AsyncResponder`](http://livedocs.adobe.com/flex/3/langref/mx/rpc/AsyncResponder.html). 例如：

```
var t:AsyncToken = remoteObject.methodCall();
t.addResponder(new AsyncResponder(resultEvent, faultEvent)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T23:44:53.423

当您希望它是同步的时，请三思而后行。

你知道同步是什么意思吗？它将冻结您的应用程序，直到它收到数据。除非你很确定你的远程调用可以立即收到返回值（超快速的网络连接）。

如果您的函数调用相互依赖，我建议您实现一个状态机。例如

在第一次异步调用之后，您的状态变为 STATE_1，并且您的下一个函数调用将检查此状态变量，以决定下一步行动（忽略当前调用或继续）。

我的 2 美分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T12:37:08.210

如果您想要同步行为，只需在调用后添加一个等待。

编辑：我已经为我正在谈论的链接行为添加了代码。以后每次调用 remoteObject 时只需替换结果处理程序。

```
...
remoteObject.function1(...);
...

private var resultHandler1(event:ResultEvent):void
{
    ...
    remoteObject.removeEventListener(resultHandler1);
    remoteObject.addEventListener(ResultEvent.RESULT, resultHandler2);
    remoteObject.function2(...);
}

private var resultHandler2(event:ResultEvent):void
{
    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-27T04:24:21.427

我通过两种方式实现了相同的：第一，如上面所说的使用状态机。有时可能会变得棘手。其次，命令队列的使用——我认为这是最好的方法……但缺点是此时的 UI 可能不是很反射。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T09:26:28.403

不，你为什么要那样做。Flex 使事情变得异步，这样用户就不会被迫坐下来等待数据返回。如果每次应用程序请求数据时用户都必须等待它返回，然后其他任何事情都可能发生，这将是一个非常糟糕的用户体验。

* * *

来自评论

不，您不需要同步行为。如果您要打 2 个电话并且第 2 个电话在第 1 个电话之前进入，但 2 依赖于 1 内的数据，那么您将面临要么在 1 回来之前不要触发事件 2（这会减慢您的应用程序的速度） - 很像同步事件）或实现一种方法来检查事件 1 是否已在事件 2 的处理程序中返回（有很多方法可以做到这一点）。如果您要触发许多事件，那么为什么不使用一些描述的包装类来跟踪您的事件并且在所有事件都返回之前不对响应执行任何操作。您可以使用 AsyncToken 来跟踪单个请求，因此如果您立即触发负载，那么您可以准确地找出返回的内容和不返回的内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-02T13:19:36.613

您也许应该尝试使用您希望同步接收的所有数据发出一个请求，然后让需要数据的不同类监听该类的正确数据。

前任：

```
 // request
  remoteobject.GetData(); 

  // on received request
  private function receivedData(evt:ResultEvent):void   
  {

     for each (var resultobject:ResultObjectVO in evt.result)
     {

        var eventModel:Object;

        var event:DataEvents = new DataEvents(resultobject.ResultType);
        event.data          = eventModel;

        eventdispatcher.dispatchEvent(event);
     }
  } 
```

像这样的东西。希望这会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-12-09T11:33:10.403

也许如果你`XMLHttpRequest`在 Flex 上调用一个同步调用 JavaScript，你可以做到这一点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-06-22T10:32:21.707

你们都搞错了或者没有使用 adobe 中的 flex，如果你向服务器发送 2 个调用，无论每个调用是否有一个单独的 resquestObject，第二个调用只会在第一个调用完成后返回，即使第二个调用需要 1 毫秒来处理。试试斐波那契 1/40 的例子。

# c - 用 if(0) 中的四个 nop 修复了错误，世界不再有意义

> ID：708339
> 
> 赞同：6
> 
> 时间：2009-04-02T04:48:56.120
> 
> 标签：c, debugging, macos, gcc

我正在编写一个函数来确定给定的线性不等式系统是否有解决方案，但突然之间，在看似无害的变化之后，它开始给出错误的答案。

我取消了一些更改，重新进行了更改，然后在接下来的两个小时里继续摆弄，直到我将其简化为荒谬。

以下，插入到函数体的任何地方，但没有在程序的其他地方，修复它：

```
if(0) {
    __asm__("nop\n");
    __asm__("nop\n");
    __asm__("nop\n");
    __asm__("nop\n");
} 
```

这是一个学校作业，所以我可能不应该在网上发布这个功能，但这太荒谬了，我认为任何上下文都不会帮助你。该函数所做的只是一堆数学运算和循环。它甚至不会触及未在堆栈上分配的内存。

请帮助我理解这个世界！我不愿意把它归咎于 GCC，因为调试的第一条规则不是责怪编译器。但是，见鬼，我正要这样做。我在 G5 塔上运行 Mac OS 10.5，有问题的编译器将自己标识为“powerpc-apple-darwin9-gcc-4.0.1”，但我认为它可能是冒名顶替者......

更新：好奇和好奇......我区分了带有 nops 和没有的 .s 文件。不仅要检查的差异太多，而且没有 nops 的 .s 文件是 196,620 字节，而它是 156,719 字节。（！）

更新 2：哇，应该发布代码！今天回来看代码，眼睛一亮，立马就看到了错误。请参阅下面我羞怯的自我回答。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-02T04:58:17.473

大多数时候，当您不重要地修改代码并解决您的问题时，这是某种内存损坏问题。我们可能需要查看实际代码才能进行适当的分析，但这将是我的第一个猜测，基于可用信息。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-04-02T05:25:40.683

这是错误的指针算法，直接（通过指针）或间接（通过数组末尾）。检查所有阵列。不要忘记，如果您的数组是

```
 int a[4]; 
```

那么 a[4] 不存在。

您正在做的是意外覆盖堆栈上的某些内容。堆栈包含本地变量、参数和函数的返回地址。您可能会以额外的 noops 治愈的方式损坏退货地址。

例如，如果您有一些代码正在向返回地址添加一些内容，那么插入那些额外的 16 个字节的 noops 将解决问题，因为您不会返回下一行代码，而是返回到一些 noops 的中间。

您可能向返回地址添加内容的一种方法是越过本地数组或参数的末尾，例如

```
 int a[4];
  a[4]++; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-07T15:35:46.393

几天忙于其他事情后，我回到了这个问题，并立即解决了这个问题。抱歉，我没有尽快发布代码，但是很难找到显示问题的最小示例。

根本问题是我在递归函数中遗漏了返回语句。我有：

```
bool function() {
    /* lots of code */
    function()
} 
```

什么时候应该是：

```
bool function() {
    /* lots of code */
    return function()
} 
```

这是因为，通过优化的魔力，正确的值恰好在正确的时间出现在正确的寄存器中，并到达正确的位置。

该错误最初是在我将第一次调用分解为它自己的特殊情况函数时引入的。而且，在这一点上，额外的 nop 是第一种情况直接内联到一般递归函数中的区别。

然后，由于我不完全理解的原因，内联第一种情况导致正确的值不在正确的时间出现在正确的位置，并且函数返回垃圾。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-02T05:07:59.163

它是否发生在调试和发布模式构建中（有符号和没有符号）？使用调试器的行为方式是否相同？代码是多线程的吗？您是否正在使用优化进行编译？可以试试别的机器吗？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-02T05:19:26.907

当您添加 if(0) {nops} 时，您能否确认您确实获得了不同的可执行文件？我没有在我的系统上看到 nops。

```
$ gcc --version
powerpc-apple-darwin9-gcc-4.0.1 (GCC) 4.0.1 (Apple Inc. build 5490)

$ cat nop.c
void foo()
{
    if (0) {
        __asm__("nop");
        __asm__("nop");
        __asm__("nop");
        __asm__("nop");
    }
}

$ gcc nop.c -S -O0 -o -
    .
    .
_foo:
    stmw r30,-8(r1)
    stwu r1,-48(r1)
    mr r30,r1
    lwz r1,0(r1)
    lmw r30,-8(r1)
    blr

$ gcc nop.c -S -O3 -o -
    .
    .
_foo:
    blr 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-02T05:49:39.267

我的猜测是堆栈损坏——尽管 gcc 应该优化 if(0) out 中的任何内容，但我会想到。

您可以尝试在函数的堆栈上粘贴一个大数组，看看是否也能修复它——这也意味着堆栈损坏。

你确定你正在运行你认为你正在运行的东西吗？（愚蠢的问题，但它发生了。）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-02T16:00:35.890

### 看起来你需要付出一些努力和肘部油脂

您的问题听起来类似于我过去调试的问题，我的应用程序正常运行......当它突然跳到应用程序的不同部分并且调用堆栈完全搞砸了（但这是嵌入式编程）！

听起来您正在“思考”“应该发生什么”……而您应该“看”“实际发生的事情”。很多时候，最难的错误是你永远不会认为“应该发生”的事情。

我会这样处理这个问题：

1.  破解你最喜欢的调试器
2.  开始单步执行您的代码并观察调用堆栈和局部变量并查找可疑活动
3.  让系统失效
4.  专注于系统出现故障的地方

专注于迭代您的代码更改：

1.  进行将“使系统失败”的代码更改
2.  运行/调试和观看
3.  如果它运行良好，你正在寻找/尝试错误的东西，你需要尝试别的东西。如果你让它失败了，那么你已经在寻找错误方面取得了进展。
4.  如果您不知道系统在何处或如何发生故障，您将无法解决问题。

* * *

这将是培养您的调试技能的好机会。如需更多关于培养调试技能的帮助，请阅读[“调试的 9 条规则”](https://rads.stackoverflow.com/amzn/click/com/0814471684)一书。

这是这本书的海报：

[![9 调试镜像的规则](https://i.stack.imgur.com/yt6ih.jpg)](http://www.debuggingrules.com/debuggingrules.jpg)
[（来源：[google.com](http://tbn2.google.com/images?q=tbn:BXfm745sxN6oKM:http://www.debuggingrules.com/debuggingrules.jpg)）]

* * *

### 具体建议：

1.  如果您认为它是编译器，则运行不同的平台/操作系统/编译器。
2.  一旦你排除了平台/操作系统/编译器，然后尝试重构代码。寻找“聪明”的代码部分，看看他们是否真的在做代码应该做的事情……也许聪明的解决方案实际上并不聪明，而是在做其他事情。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-07T00:16:51.360

我是 Trevor Boyd Smith 在上面提到的“调试”一书的作者。他说得对——这里的关键规则是#2 Make It Fail（你似乎做得很好）和#3 Quit Thinking and Look。上面的猜想非常好（证明了对规则 1 的掌握——了解系统——在这种情况下，代码大小可以改变错误的方式）。但实际上用调试器观察它失败会告诉你实际发生了什么，而无需猜测。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-03T04:53:07.580

将一个函数拆分为单独的 .c 文件（或 .cpp 或其他文件）。仅将带有 nop 和不带 nop 的文件编译为 .s 文件并进行比较。

尝试旧版本的 gcc。回到 5 年或 10 年，看看事情是否变得陌生。

# php - 我可以在另一个函数中包含一个函数吗？

> ID：708341
> 
> 赞同：10
> 
> 时间：2009-04-02T04:49:43.467
> 
> 标签：php, function, scope

是否可以将一个功能包含在另一个功能中？为了学习函数，我正在尝试使用 PHP 创建一个战斗序列。序列如下所示：

1.  骰子会滚动，将数字分配给变量；
2.  打印 Hero1 攻击结果；
3.  骰子会滚动，将数字分配给变量；
4.  打印Hereo2攻击结果；
5.  骰子会滚动，将数字分配给变量；
6.  打印 Hero3 攻击结果。

掷骰子将是一项自动化功能。这是代码：

```
<?
rollSim();
combatSim();

function rollSim() {
    $hAttack = rand(1,20);
    $mDefend = rand(1,20);
    $mAttack = rand(1,20);
    $hDefend = rand(1,20);
    $mDamage = rand(10,25);
    $hDamage = rand(1,20);
} // end rollSim

function combatSim() {
    rollSim();
    if ($hAttack>$mDefend) {
        print "Hero hit monster for $hDamage damage.<br>";
    } else if ($hAttack<=$mDefend) {
        print "Hero missed monster.";
    }
} // end combatSim

?> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-02T04:56:37.180

您的`rollSim()`函数应该**返回**滚动的数字，而不是设置一些变量并尝试在其他函数中使用它们。我会将它们返回到关联数组中，如下所示：

```
function rollSim() {
    $roll['hAttack'] = rand(1,20);
    $roll['mDefend'] = rand(1,20);
    $roll['mAttack'] = rand(1,20);
    $roll['hDefend'] = rand(1,20);
    $roll['mDamage'] = rand(10,25);
    $roll['hDamage'] = rand(1,20);

    return $roll;
}

function combatSim() {
    $roll = rollSim();

    if ($roll['hAttack'] > $roll['mDefend']) {
        print "Hero hit monster for {$roll['hDamage']} damage.<br>";
    } else if ($roll['hAttack'] <= $roll['mDefend']) {
        print "Hero missed monster.";
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-02T05:04:31.263

不，你不能真的按照你的要求去做。即使您`rollSim()`在定义中嵌入了 of 的声明`combatSim()`（您可以这样做，这是合法的，但没有实际影响），您设置的变量`rollSim()`仍然是它的本地变量，并且无法通过`combatSim()`.

您需要一种更好的方式来传递您关心的信息。Jeremy Ruten 详细介绍了一个好方法。另一种方法是定义一个对象，该对象负责对您的战斗事件进行建模，并且具有`rollSim()`并且`combatSim()`两者都是其上的方法。

```
class myCombat {

    private $hAttack;
    private $mDefend;
    private $mAttack;
    private $hDefend;
    private $mDamage;
    private $hDamage;

    function rollSim() {
        $this->hAttack = rand(1, 20);
        $this->mDefend = rand(1, 20);
        $this->mAttack = rand(1, 20);
        $this->hDefend = rand(1, 20);
        $this->mDamage = rand(10, 25);
        $this->hDamage = rand(1, 20);
    }

    function combatSim() {
        $this->rollSim();
        if($this->hAttack > $this->mDefend)
            echo 'Hero hit monster for ' . $this->hDamage . ' damage.<br />';
        else
            echo 'Hero missed monster';
    }

}

$combat = new myCombat;
$combat->combatSim(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-02T04:54:07.263

你可以互相调用函数，当然......但我认为你想在另一个中使用一个范围，对吗？

共享范围是一项混乱的业务。你最好传递论点。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2011-01-24T22:00:11.453

如果你想在 PHP 的函数中定义函数，你可以这样做：

```
函数 a()
{
    函数 b()
    {
        回声“我是b”；
    }
    函数 c()
    {
        回声“我是c”；
    }
}
一个（）;
b();
C（）;

```

你必须先调用父函数，然后调用里面的函数。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-17T15:13:23.523

这是函数中的简单示例调用函数

```
class Percobaan{

  public function coba(){
    return "return value";
  }

  public function call(){
    //call coba function
    return $this->coba();
  }

} // end of class percobaan

//call the method
$klass = new Percobaan();
echo $klass->call(); 
```

输出将是：

```
"return value" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-04T18:14:31.003

如果你愿意，那将是一个关闭。

# iphone - 创建包含实例成员的库

> ID：708342
> 
> 赞同：0
> 
> 时间：2009-04-02T04:50:17.070
> 
> 标签：iphone, objective-c, xcode

关于我有点晚发现静态库（显然）不能有实例成员，[如何引用静态库的属性](https://stackoverflow.com/questions/708155/how-to-reference-property-on-library/708263#708263)，有没有办法创建一个包含实例和静态成员的共享库？

可能可行的方法是创建一个类文件，将其保存到某个共享目录并从多个项目中引用它。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T16:19:03.290

今天早上我刚刚阅读了一篇很棒的博客文章，其中有一篇关于共享代码的精彩文章：

[http://www.mobileorchard.com/code-sharing-via-static-libraries-and-cross-project-references](http://www.mobileorchard.com/code-sharing-via-static-libraries-and-cross-project-references)

# asp.net - DataGrid（Asp.Net）中动态生成的复选框列的 CheckedChanged 事件

> ID：708347
> 
> 赞同：0
> 
> 时间：2009-04-02T04:54:04.830
> 
> 标签：asp.net, c#-2.0

我有一个带有动态生成复选框列的数据网格（Asp.Net）。我无法为复选框生成checkedChanged事件。

这是我的代码：

public class ItemTemplate : ITemplate { //实例化复选框 void ITemplate.InstantiateIn(Control container) { CheckBox box = new CheckBox();
box.CheckedChanged += new EventHandler(this.OnCheckChanged); box.AutoPostBack = true; box.EnableViewState = true; box.Text = 文本；盒子.ID = id; container.Controls.Add(box); }

```
public event EventHandler CheckedChanged;

private void OnCheckChanged(object sender, EventArgs e)
{
    if (CheckedChanged != null)
    {
        CheckedChanged(sender, e);
    }
} 
```

}

这是事件

私人无效 OnCheckChanged（对象发送者，EventArgs e）{

}

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T18:17:30.117

When do you add your custom column? If it is on load, then it is too late. Load it on init. I.e. following works with your code:

```
protected void Page_Init(object sender, EventArgs e)
{
    ItemTemplate myTemplate = new ItemTemplate();
    myTemplate.CheckedChanged += new EventHandler(myTemplate_CheckedChanged);

    TemplateField col = new TemplateField();
    col.ItemTemplate = myTemplate;
    col.ItemStyle.Wrap = false;

    grid.Columns.Add(col);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T05:11:35.223

如果您的复选框 ID 在每次回发时都没有以相同的方式设置，那么在处理事件时它们永远无法连接到事件处理程序。您的字段“id”来自哪里？

# ruby-on-rails - Ruby 正则表达式帮助使用匹配来提取 html 文档片段

> ID：708350
> 
> 赞同：0
> 
> 时间：2009-04-02T04:54:12.677
> 
> 标签：ruby-on-rails, ruby, regex, pattern-matching

我有一个这种格式的 HTML 文档：

```
<tr><td colspan="4"><span class="fullName">Bill Gussio</span></td></tr>
    <tr>
        <td class="sectionHeader">Contact</td>
        <td class="sectionHeader">Phone</td>
        <td class="sectionHeader">Home</td>
        <td class="sectionHeader">Work</td>
    </tr>
    <tr valign="top">
        <td class="sectionContent"><span>Screen Name:</span> <span>bhjiggy</span><br><span>Email 1:</span> <span>wmgussio@erols.com</span></td>
        <td class="sectionContent"><span>Mobile: </span><span>2404173223</span></td>
        <td class="sectionContent"><span>NY</span><br><span>New York</span><br><span>78642</span></td>
        <td class="sectionContent"><span>MD</span><br><span>Owings Mills</span><br><span>21093</span></td>
    </tr>

    <tr><td colspan="4"><hr class="contactSeparator"></td></tr>

    <tr><td colspan="4"><span class="fullName">Eddie Osefo</span></td></tr>
    <tr>
        <td class="sectionHeader">Contact</td>
        <td class="sectionHeader">Phone</td>
        <td class="sectionHeader">Home</td>
        <td class="sectionHeader">Work</td>
    </tr>
    <tr valign="top">
        <td class="sectionContent"><span>Screen Name:</span> <span>eddieOS</span><br><span>Email 1:</span> <span>osefo@wam.umd.edu</span></td>
        <td class="sectionContent"></td>
        <td class="sectionContent"><span></span></td>
        <td class="sectionContent"><span></span></td>
    </tr>

    <tr><td colspan="4"><hr class="contactSeparator"></td></tr> 
```

所以它交替出现 - 联系信息块，然后是“联系分隔符”。我想获取联系信息，所以我的第一个障碍是获取联系人分隔符之间的块。我已经弄清楚了使用 rubular 的正则表达式。这是：

```
/<tr><td colspan="4"><span class="fullName">((.|\s)*?)<hr class="contactSeparator">/ 
```

您可以检查 rubular 以验证这是否隔离了块。

然而，我最大的问题是我在使用 ruby​​ 代码时遇到了问题。我使用内置的匹配功能并进行打印，但没有得到我期望的结果。这是代码：

```
page = agent.get uri.to_s    
chunks = page.body.match(/<tr><td colspan="4"><span class="fullName">((.|\s)*?)<hr class="contactSeparator">/).captures

chunks.each do |chunk|
   puts "new chunk: " + chunk.inspect
end 
```

请注意，page.body 只是 Mechanize 抓取的 html 文档的正文。html 文档要大得多，但具有这种格式。因此，意外的输出如下：

```
new chunk: "Bill Gussio</span></td></tr>\r\n\t<tr>\r\n\t\t<td class=\"sectionHeader\">Contact</td>\r\n\t\t<td class=\"sectionHeader\">Phone</td>\r\n\t\t<td class=\"sectionHeader\">Home</td>\r\n\t\t<td class=\"sectionHeader\">Work</td>\r\n\t</tr>\r\n\t<tr valign=\"top\">\r\n\t\t<td class=\"sectionContent\"><span>Screen Name:</span> <span>bhjiggy</span><br><span>Email 1:</span> <span>wmgussio@erols.com</span></td>\r\n\t\t<td class=\"sectionContent\"><span>Mobile: </span><span>2404173223</span></td>\r\n\t\t<td class=\"sectionContent\"><span>NY</span><br><span>New York</span><br><span>78642</span></td>\r\n\t\t<td class=\"sectionContent\"><span>MD</span><br><span>Owings Mills</span><br><span>21093</span></td>\r\n\t</tr>\r\n\t\r\n\t<tr><td colspan=\"4\">"
new chunk: ">" 
```

这里有两个惊喜给我：

1) 没有 2 个匹配项包含联系信息块，即使在 rubular 上我已经验证应该提取这些块。

2) 所有的 \r\n\t（换行符、制表符等）都显示在匹配项中。

任何人都可以在这里看到这个问题吗？

或者，如果有人知道一个好的免费 AOL 联系人进口商，那就太好了。我一直在使用黑皮书，但它在 AOL 上一直失败，我正在尝试修复它。不幸的是，AOL 还没有联系人 API。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T05:34:53.077

请参阅[您能否提供一些示例，说明为什么使用正则表达式难以解析 XML 和 HTML？](https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-rege) 为什么这是一个坏主意。请改用[HTML 解析器](http://www.google.com/search?q=ruby+html+parser)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T05:11:49.140

如果您只是从 XML 中提取信息，那么使用正则表达式以外的东西可能更容易。XPath 是从 XML 中提取信息的好工具。我相信有一些可用于 Ruby 的库支持 XPath，也许可以尝试 REXML：

*   [http://www.germane-software.com/software/rexml/](http://www.germane-software.com/software/rexml/)
*   [http://redhanded.hobix.com/inspect/noXpathOnMessyHtmlIsJustAsEasyInRuby.html](http://redhanded.hobix.com/inspect/noXpathOnMessyHtmlIsJustAsEasyInRuby.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-02T16:33:04.270

使用诸如 hpricot 之类的 HTML 解析器会省去很多麻烦 :)

> 须藤宝石安装 hpricot

它主要是用 C 编写的，所以它也很快

这是如何使用它：

[http://wiki.github.com/why/hpricot/hpricot-basics](http://wiki.github.com/why/hpricot/hpricot-basics)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T15:39:26.567

这是解析该 HTML 的代码。随意提出更好的建议：

```
contacts = []
    email, mobile = "",""

    names = page.search("//span[@class='fullName']")

    # Every contact has a fullName node, so for each fullName node, we grab the chunk of contact info
    names.each do |n|

      # next_sibling.next_sibling skips:
      # <tr>
      #   <td class=\"sectionHeader\">Contact</td>
      #   <td class=\"sectionHeader\">Phone</td>
      #   <td class=\"sectionHeader\">Home</td>
      #   <td class=\"sectionHeader\">Work</td>
      # </tr>
      # to give us the actual chunk of contact information
      # then taking the children of that chunk gives us rows of contact info
      contact_info_rows = n.parent.parent.next_sibling.next_sibling.children

      # Iterate through the rows of contact info
      contact_info_rows.each do |row|

        # Iterate through the contact info in each row
        row.children.each do |info|
          # Get Email. There are two ".next_siblings" because space after "Email 1" element is processed as a sibling
          if info.content.strip == "Email 1:" then email = info.next_sibling.next_sibling.content.strip end

          # If the contact info has a screen name but no email, use screenname@aol.com
          if (info.content.strip == "Screen Name:" && email == "") then email = info.next_sibling.next_sibling.content.strip + "@aol.com" end

          # Get Mobile #'s
          if info.content.strip == "Mobile:" then mobile = info.next_sibling.content.strip end

          # Maybe we can try and get zips later.  Right now the zip field can look like the street address field
          # so we can not tell the difference.  There is no label node
          #zip_match = /\A\D*(\d{5})-?\d{4}\D*\z/i.match(info.content.strip) 
          #zip_match = /\A\D*(\d{5})[^\d-]*\z/i.match(info.content.strip)     
        end  

      end

      contacts << { :name => n.content, :email => email, :mobile => mobile }

      # clear variables
      email, mobile = "", ""
    end 
```

# c# - 如何重新初始化或重置类的属性？

> ID：708352
> 
> 赞同：12
> 
> 时间：2009-04-02T04:56:26.790
> 
> 标签：c#, class, properties, instantiation

我创建了一个具有默认值属性的类。在对象生命周期的某个时刻，我想将对象的属性“重置”回实例化对象时的状态。例如，假设这是一个类：

```
public class Truck {
   public string Name = "Super Truck";
   public int Tires = 4;

   public Truck() { }

   public void ResetTruck() {
      // Do something here to "reset" the object
   }
} 
```

然后在某个时刻，在`Name`和`Tires`属性被更改后，`ResetTruck()`可以调用该方法，并将属性分别重置回“超级卡车”和 4。

将属性重置为其初始硬编码默认值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-02T05:03:13.060

您可以在方法中进行初始化，而不是在声明中内联。然后让构造函数和重置方法调用初始化方法：

```
public class Truck {
   public string Name;
   public int Tires;

   public Truck() {
      Init();
   }

   public void ResetTruck() {
      Init();
   }

   private void Init() {
      Name = "Super Truck";
      Tires = 4;
   }
} 
```

另一种方法是根本没有重置方法。只需创建一个新实例。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-08-14T19:53:00.740

反射是你的朋友。您可以创建一个辅助方法来使用 Activator.CreateInstance() 来设置值类型的默认值，并为引用类型设置“null”，但是为什么在 PropertyInfo 的 SetValue 上设置 null 时会这样做。

```
 Type type = this.GetType();
    PropertyInfo[] properties = type.GetProperties();
    for (int i = 0; i < properties.Length; ++i)
      properties[i].SetValue(this, null); //trick that actually defaults value types too. 
```

要为您的目的扩展它，请拥有私人成员：

```
//key - property name, value - what you want to assign
Dictionary<string, object> _propertyValues= new Dictionary<string, object>();
List<string> _ignorePropertiesToReset = new List<string>(){"foo", "bar"}; 
```

在构造函数中设置值：

```
 public Truck() {
    PropertyInfo[] properties = type.GetProperties();

    //exclude properties you don't want to reset, put the rest in the dictionary
    for (int i = 0; i < properties.Length; ++i){
        if (!_ignorePropertiesToReset.Contains(properties[i].Name))  
            _propertyValues.Add(properties[i].Name, properties[i].GetValue(this));
    }
} 
```

稍后重置它们：

```
public void Reset() {
    PropertyInfo[] properties = type.GetProperties();
    for (int i = 0; i < properties.Length; ++i){
        //if dictionary has property name, use it to set the property
        properties[i].SetValue(this, _propertyValues.ContainsKey(properties[i].Name) ? _propertyValues[properties[i].Name] : null);     
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-02T05:24:21.747

除非创建对象真的很昂贵（并且重置不是出于某种原因）。我认为没有理由实施特殊的重置方法。为什么不直接创建一个具有可用默认状态的新实例。

重用实例的目的是什么？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-02T05:03:59.953

如果您在 Reset 方法中进行了初始化，则可以：

```
public class Truck {
   public string Name;
   public int Tires;

   public Truck() {
    ResetTruck();
  }

   public void ResetTruck() {
      Name = "Super Truck";
      Tires = 4;
   }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-14T20:25:57.013

关注关注点分离（如评论中提到的 Brian），另一种选择是添加一个`TruckProperties`类型（您甚至可以将默认值添加到其构造函数中）：

```
public class TruckProperties
{
    public string Name
    {
        get; 
        set;
    }

    public int Tires
    {
        get; 
        set;
    }

    public TruckProperties()
    {
        this.Name = "Super Truck";
        this.Tires = 4;
    }

    public TruckProperties(string name, int tires)
    {
        this.Name = name;
        this.Tires = tires;
    }
} 
```

在您的`Truck`类中，您要做的就是管理该`TruckProperties`类型的一个实例，并让它进行重置。

```
public class Truck
{
    private TruckProperties properties = new TruckProperties();

    public Truck()
    {
    }

    public string Name
    {
        get
        {
            return this.properties.Name;
        }
        set
        {
            this.properties.Name = value;
        }
    }

    public int Tires
    {
        get
        {
            return this.properties.Tires;
        }
        set
        {
            this.properties.Tires = value;
        }        
    }

    public void ResetTruck()
    {
        this.properties = new TruckProperties();
    }
} 
```

对于这样一个简单的类，这当然可能是很多（不需要的）开销，但在更大/更复杂的项目中，它可能是有利的。

这就是关于“最佳”实践的事情......很多时候，没有灵丹妙药，但只有建议您必须持怀疑态度和您对在特定情况下适用于您的最佳判断。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-10T21:58:46.253

我用反射解决了类似的问题。您可以使用 `source.GetType().GetProperties()`获取属于该对象的所有属性的列表。

虽然，这并不总是一个完整的解决方案。如果您的对象实现了多个接口，您还将通过反射调用获得所有这些属性。

所以我写了这个简单的函数，它让我们可以更好地控制我们有兴趣重置哪些属性。

```
 public static void ClearProperties(object source, List<Type> InterfaceList = null, Type SearchType = null)
    {

        // Set Interfaces[] array size accordingly. (Will be size of our passed InterfaceList, or 1 if InterfaceList is not passed.)
        Type[] Interfaces = new Type[InterfaceList == null ? 1 : InterfaceList.Count];

        // If our InterfaceList was not set, get all public properties.
        if (InterfaceList == null)
            Interfaces[0] = source.GetType();
        else // Otherwise, get only the public properties from our passed InterfaceList
            for (int i = 0; i < InterfaceList.Count; i++)
                Interfaces[i] = source.GetType().GetInterface(InterfaceList[i].Name);

        IEnumerable<PropertyInfo> propertyList = Enumerable.Empty<PropertyInfo>();
        foreach (Type face in Interfaces)
        {
            if (face != null)
            {
                // If our SearchType is null, just get all properties that are not already empty
                if (SearchType == null)
                    propertyList = face.GetProperties().Where(prop => prop != null);
                else // Otherwise, get all properties that match our SearchType
                    propertyList = face.GetProperties().Where(prop => prop.PropertyType == SearchType);

                // Reset each property
                foreach (var property in propertyList)
                {
                    if (property.CanRead && property.CanWrite)
                        property.SetValue(source, null, new object[] { });
                }
            }
            else
            {
                // Throw an error or a warning, depends how strict you want to be I guess.
                Debug.Log("Warning: Passed interface does not belong to object.");
                //throw new Exception("Warning: Passed interface does not belong to object.");
            }
        }
    } 
```

它的用途：

```
// Clears all properties in object
ClearProperties(Obj);
// Clears all properties in object from MyInterface1 & MyInterface2 
ClearProperties(Obj, new List<Type>(){ typeof(MyInterface1), typeof(MyInterface2)});
// Clears all integer properties in object from MyInterface1 & MyInterface2
ClearProperties(Obj, new List<Type>(){ typeof(MyInterface1), typeof(MyInterface2)}, typeof(int));
// Clears all integer properties in object
ClearProperties(Obj,null,typeof(int)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-02T05:01:49.740

您可能需要将值保存在私有字段中，以便以后可以恢复它们。也许是这样的：

```
public class Truck
{
    private static const string defaultName = "Super Truck";
    private static const int defaultTires = 4;

    // Use properties for public members (not public fields)
    public string Name { get; set; }
    public int Tires { get; set; }

    public Truck()
    {
        Name = defaultName;
        Tires = defaultTires;
    }

    public void ResetTruck()
    {
        Name = defaultName;
        Tires = defaultTires;
    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-02T07:11:39.397

您本质上是在寻找[状态](http://www.dofactory.com/Patterns/PatternState.aspx)设计模式

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-17T14:59:24.240

如果您想要对象的特定过去“状态”，您可以创建一个特定的保存点以在每次需要时返回。这也让您可以为您创建的每个实例备份不同的状态。如果您的班级有许多不断变化的属性，这可能是您的解决方案。

```
public class Truck
{
    private string _Name = "Super truck";
    private int _Tires = 4;

    public string Name
    {
        get { return _Name; }
        set { _Name = value; }
    }
    public int Tires
    {
        get { return _Tires; }
        set { _Tires = value; }
    }

    private Truck SavePoint;

    public static Truck CreateWithSavePoint(string Name, int Tires)
    {
        Truck obj = new Truck();
        obj.Name = Name;
        obj.Tires = Tires;
        obj.Save();
        return obj;
    }

    public Truck() { }

    public void Save()
    {
        SavePoint = (Truck)this.MemberwiseClone();
    }

    public void ResetTruck()
    {
        Type type = this.GetType();
        PropertyInfo[] properties = type.GetProperties();
        for (int i = 0; i < properties.Count(); ++i)
            properties[i].SetValue(this, properties[i].GetValue(SavePoint));
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-27T01:52:50.940

如果您没有使用会发生冲突的代码生成器或设计器，另一种选择是通过 C# 的`TypeDescriptor`东西，这类似于反射，但意味着向类添加比反射更多的元信息。

```
using System.ComponentModel;

public class Truck {
   // You can use the DefaultValue Attribute for simple primitive properites
   [DefaultValue("Super Truck")]
   public string Name { get; set; } = "Super Truck";

   // You can use a Reset[PropertyName]() method for more complex properties
   public int Tires { get; set; } = 4;
   public void ResetTires() => Tires = 4; 

   public Truck() { }

   public void ResetTruck() {
      // Iterates through each property and tries to reset it
      foreach (PropertyDescriptor prop in TypeDescriptor.GetProperties(GetType())) {
        if (prop.CanResetValue(this))  prop.ResetValue(this);
      }
   }
} 
```

请注意，如果存在，ResetValue 也将重置为阴影属性。[文档](https://docs.microsoft.com/en-us/dotnet/api/system.componentmodel.propertydescriptor.resetvalue?view=net-5.0)中解释了选择哪个选项的优先级：

> 此方法按以下优先顺序确定要将属性重置为的值：
> 
> 1.  此属性有一个阴影属性。
> 2.  此属性有一个 DefaultValueAttribute。
> 3.  您已经实现了一个“ResetMyProperty”方法，其中“MyProperty”是您传递给它的属性的名称。

# tsql - TSQL -- 将日期插入动态 SQL

> ID：708361
> 
> 赞同：7
> 
> 时间：2009-04-02T05:02:30.020
> 
> 标签：tsql, datetime, date, dynamic-sql

考虑以下 TSQL：

```
SET @WhereClause1 = 'where a.Date > ' + @InvoiceDate 
```

我收到日期/字符串转换错误。 `@InvoiceDate`是一个日期时间变量。什么是正确的语法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-02T05:04:40.310

这可能会奏效。

```
SET @WhereClause1 = 'where a.Date > ''' + convert(varchar, @InvoiceDate) + '''' 
```

尽管如果值为 null 则会引发错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-02T05:11:43.697

这将起作用：

```
SET @WhereClause1 = 'where a.Date > ''' + cast(@InvoiceDate as varchar(100)) + '''' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T05:05:30.950

由于您首先将查询编写为字符串，因此我认为您需要将 @InvoiceDate 转换为具有类似[this](http://www.databasejournal.com/features/mssql/article.php/10894_2197931_1/Working-with-SQL-Server-DateTime-Variables-Part-Two---Displaying-Dates-and-Times-in-Different-Formats.htm)的字符串。[http://www.databasejournal.com/features/mssql/article.php/10894_2197931_1/Working-with-SQL-Server-DateTime-Variables-Part-Two---Displaying-Dates-and-Times-in-Different-格式.htm](http://www.databasejournal.com/features/mssql/article.php/10894_2197931_1/Working-with-SQL-Server-DateTime-Variables-Part-Two---Displaying-Dates-and-Times-in-Different-Formats.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T05:07:33.237

...并且您可能需要将日期字符串括在引号中。

在调用例程中构造日期字符串实际上可能会更好，因为您应该在那里检查空值和其他验证。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-04-26T19:32:37.063

```
EXEC sp_executesql N'SELECT * FROM Orders WHERE a.Date > @date',
                   N'@date datetime',
                   @date = @InvoiceDate 
```

# sql - 最便携的 SQL 日期字符串格式

> ID：708375
> 
> 赞同：4
> 
> 时间：2009-04-02T05:10:58.267
> 
> 标签：sql, datetime, date

在各种 SQL 方言中，最有可能正确解释 Date 和/或 DateTime 的哪种字符串表示形式？有 SQL 标准吗？这两个答案是否相同或相似？

编辑：

对于建议，我们都可以评论任何不符合的已知 SQL 方言吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-02T05:19:47.187

我敢打赌 ISO 8601 日期时间标准很可能就是其中之一。

'YYYY-MM-DDThh:mm:ssTZD'

或者可能有轻微的变化：

'YYYY-MM-DD hh:mm:ss'

[http://www.w3.org/TR/NOTE-datetime](http://www.w3.org/TR/NOTE-datetime)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T06:04:16.003

如果您想跨数据库移植，也许您应该考虑使用 ADO 或 OTL 之类的东西将所有内容抽象出来。几乎所有数据库都支持 ODBC 连接，您可以使用类似 OTL 的日期时间容器之类的东西来写入和读取日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T16:38:05.467

还有`DATE'2014-07-02'`，它被 Oracle、DB2、MySQL 和 Teradata 接受，但不被 MS SQL 或 PostgreSQL 接受。

# c# - 自动生成基类方法的实现

> ID：708384
> 
> 赞同：34
> 
> 时间：2009-04-02T05:15:27.570
> 
> 标签：c#, visual-studio

C#（VS 2008）中是否有某种快捷方式可以在派生类中自动实现虚拟和抽象基类方法？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-04-02T05:20:02.257

对于虚拟方法，您可以键入`override`然后一个空格。Intellisense 应该为您提供一个选项列表。

对于抽象方法和属性，您可以使用基类或接口上的智能标记（同样，`Ctrl`+`.`或`Shift`++将显示智能标记菜单`Alt`）`F10`来生成具体项。

例如，在下面的代码片段中，您可以将插入符号放在末尾`INotifyPropertyChanged`并按`Ctrl`+`.`键然后选择实现接口，`PropertyChanged`事件将被添加到`MyClass`：

```
class MyClass : INotifyPropertyChanged
{
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-04-02T05:27:28.323

只需键入您要实现的接口，然后单击智能标记，将弹出一个上下文菜单，然后您可以选择实现接口或显式实现接口：

> [![在此处输入图像描述](https://i.imgur.com/OJvS8.png)](https://i.imgur.com/OJvS8.png)

所有要被覆盖的成员都将包含在一个代码区域内，该代码区域被命名以反映其用途。

所有成员都会有一条抛出`NotImplementedException`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-02T05:18:24.490

对于虚拟方法类型**override**，给一个空格，intellisense 将显示所有可以继承的方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-21T14:02:46.320

当最初的问题被问到时，不要认为这存在，但至少从 VS 2013 开始，您可以自动为抽象方法和属性创建存根。只需右键单击抽象类名称（在您的类定义中）并选择“实现抽象类”。就像 CMS 展示的自动实现接口一样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-01-31T21:37:38.160

正如其他人所提到的，智能标记（通过`Ctrl+.`和`Alt+Shft+F10`）将解决您的问题，但是 Visual Studio 有一个烦人的选项，它会自动将生成的属性/方法与这样的区域包装起来：

```
#region INotifyPropertyChanged members
...
#endregion 
```

您可以通过转到 来打开此功能`Tools > Options > Text Editor > C# > Advanced`。有一个名为 的复选框`Implement Interface > Surround generated code with #region`。只要确保它没有被选中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-01T01:14:38.850

当前自动实现抽象基类的微软官方文档在这里：

[https://docs.microsoft.com/en-us/visualstudio/ide/reference/implement-abstract-class](https://docs.microsoft.com/en-us/visualstudio/ide/reference/implement-abstract-class)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-28T10:38:46.050

也许您希望所有继承/实现类都实现一个新定义的抽象方法。

1.  转到继承/实现类之一
2.  使用智能标签菜单`ctrl`+`.`
3.  实现抽象类/接口
4.  注意弹出窗口“项目”或“解决方案”底部的选项 [![智能标签菜单弹出](https://i.stack.imgur.com/yRozs.png)](https://i.stack.imgur.com/yRozs.png)

# broadcast - 广播主机名和 IP 地址

> ID：708387
> 
> 赞同：1
> 
> 时间：2009-04-02T05:17:41.387
> 
> 标签：broadcast

为了通知同一[局域网](http://en.wikipedia.org/wiki/Local_area_network)内的所有计算机我的存在，我想广播我的主机名和 IP 地址。

如果不将它们作为字符串发送，我该如何做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T08:26:35.260

Avik，这就是 DNS 的用途。虽然“常规”DNS 旨在保存每台机器的名称和 IP 地址（静态配置），但有一个动态 DNS 协议允许机器实时更新其 DNS 条目。

这种功能在我的客户的一些办公环境中使用，其中一台机器上的打印机是共享的，但它们连接的机器使用 DHCP（这意味着它们的 IP 地址可以更改）。

有关详细信息以及使用 DHCP 的 Windows 实施，请参见[此处](http://en.wikipedia.org/wiki/Dynamic_DNS)和[此处](http://www.microsoft.com/windows/windows2000/en/advanced/help/sag_DHCP_imp_InteroperabilityDNS.htm)。

让我们将您想要宣传自己的机器称为 SERVER 和所有可以使用它的机器，即 CLIENTS。

当然，动态 DNS 仅将名称/IP 映射通知 DNS 本身，如果客户端已经知道您的 SERVER 以便他们可以从 DNS 获取 IP 地址，则它很有用。如果您无法让 CLIENTS 发现您的 SERVER 刚刚被添加，您仍然需要偶尔广播一个数据包以指示您的 SERVER 存在（这将只需要 SERVER 名称，因为 CLIENTS 将使用 DNS 获取 IP 地址）。

这个广播数据包应该被所有的客户接收并保存在一个本地表中。如果从 CLIENT 到您的 SERVER 的通信失败，则应删除您的 SERVER 的本地表条目（当您的 SERVER 再次广播时将重新添加它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-05-12T10:14:58.617

基本上重新发明了[NetBIOS](http://en.wikipedia.org/wiki/NetBIOS)或[ZeroConf](http://en.wikipedia.org/wiki/Zeroconf)，在小型嵌入式设备中很流行，以便通过基于 Windows 或 OS X 的安装程序或设置实用程序进行发现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-05-12T10:25:21.753

您可以尝试使用[UPnP 发现](http://en.wikipedia.org/wiki/Universal_Plug_and_Play#Discovery)。

# java - 将xml导入数据库的最佳方法是什么（使用java）

> ID：708389
> 
> 赞同：2
> 
> 时间：2009-04-02T05:18:48.733
> 
> 标签：java, xml, database

我刚刚编写了一个程序，用于使用 dom4j 将数据从 xml 文件导入数据库。它最终成为一系列用 java 包装的 xpath 语句，并且它有效，但我强烈认为有更好的方法来做到这一点。

将数据从 xml 导入数据库的首选方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T06:43:38.203

根据您拥有的 XML 类型，[JAXB](http://java.sun.com/developer/technicalArticles/WebServices/jaxb/)（自 1.6 以来是 Java SE 的标准部分）可能是处理它的最直接的方法。只需创建一个类似于您的 XML 结构的类，将字段的 setter 和 getter 以及 @XmlRootElement 注释放在类的顶部。然后像

```
Unmarshaller um = JAXBContext.newInstance(YourClass.class).createUnmarshaller();
YourClass input = (YourClass) um.unmarshal(new FileReader("file.xml")); 
```

神奇地将您的 XML 文件转换为 Java 对象。然后应该很容易写入您选择的数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T08:43:29.037

我发现[Simple](http://simple.sourceforge.net/home.php)非常容易用于从 XML 创建 Java 对象。我们使用它来设置默认配置，然后我们可以使用 Hibernate 存储这些配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T05:22:37.787

我经常遇到同样的问题，并希望我 10 年前拥有与现在相同的工具。

如果您需要将现有的 XML 读入普通的 Java 类，我个人认为 apache digester 比 dom4j 更优雅且更易于使用，因为您只需指定映射即可。

然后，使用 Hibernate 将材料写入数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T05:21:26.510

这实际上取决于您的 XML 文件的格式。你能进一步详细说明吗？

在我的例子中，我有一个应用程序，它在 XML 中存储了一个简单的 Key->Value 对语法，我在其中使用 DOM 遍历节点并生成 SQL 来插入数据。

使用 XPath 来做到这一点将是一个完美的解决方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T05:33:19.290

在尝试其他任何事情之前，您应该问自己几个问题：

*   值得清洗吗？如果该应用程序的使用频率不高，请“不要修复未损坏的内容”。
*   它会经常改变吗？在这种情况下，易于维护和可读性是最重要的，而 dom4j 在这方面可能还不错。
*   性能重要吗？如果你的应用程序在一半的时间内运行没有任何区别，请回到上一个项目符号：“更好”仅意味着在这种情况下更整洁。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-14T18:12:32.983

这当然取决于你在做什么。我假设您想从 XML 文档中提取数据。如果是这样，xpath 可能工作正常，但我个人仍然更喜欢数据绑定：读取 XML，绑定到 java 对象，通过常规 Bean/POJO 访问器获取数据。或者更好的是，如果使用 ORM，则绑定到 ORM（如休眠）可以使用的对象/从对象绑定。

对于 datd 绑定，我会投票给[JAXB](http://jaxb.dev.java.net)或[XStream](http://xstream.codehaus.org)。如果使用 xpath，我只会使用任何 DOM 替代方案。

# perl - 为什么 Lucene 完全匹配只得分 0.4？

> ID：708395
> 
> 赞同：1
> 
> 时间：2009-04-02T05:20:48.307
> 
> 标签：perl, lucene

我有一个包含标题和描述的文档。其中一项商品描述包含“Amazon Prime 免费送货”等字样。

我使用 perl Lucene 在字段标题和描述上使用 lucene 搜索“使用 Amazon Prime 免费送货”

```
my $analyzer = new Lucene::Analysis::SimpleAnalyzer();
my @fields = ('title', 'description');
my $parser = new Lucene::MultiFieldQueryParser(\@fields, $analyzer); 
```

我只得到0.4的分数。我的猜测是标题（不匹配）为 0，描述（完全匹配）为 0.8，平均为 0.4。

在这种情况下，我怎样才能匹配标题和/或描述以使我获得 0.8 或更高的分数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T07:06:54.027

首先，你需要看一些[Lucene 评分理论](http://lucene.apache.org/core/3_6_2/scoring.html)。接下来，[explain()](https://lucene.apache.org/core/old_versioned_docs/versions/3_0_2/api/all/org/apache/lucene/search/Searcher.html#explain(org.apache.lucene.search.Query,%20int))解释了查询是如何获得分数的。我相信 Plucene 也有解释。第三，为什么分数一定要0.8以上？Lucene 分数是相对的，并且在特定查询的上下文中有效。它们的主要用途是订购命中。除非您出于其他目的需要分数，并且只要相对顺序保持不变，否则我不会关心绝对分数。

# ruby - Ruby 中允许“p *1..10”打印出数字 1-10 的功能是什么？

> ID：708403
> 
> 赞同：5
> 
> 时间：2009-04-02T05:23:45.523
> 
> 标签：ruby, syntax, splat

```
require 'pp'

p *1..10 
```

这打印出 1-10。为什么这么简洁？你还能用它做什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-02T05:38:53.397

它是“splat”运算符。它可用于分解数组和范围并在分配期间收集值。

这里收集分配中的值：

```
a, *b = 1,2,3,4

=> a = 1
   b = [2,3,4] 
```

在此示例中，内部数组（第`[3,4]`一个）中的值被分解并收集到包含数组中：

```
a = [1,2, *[3,4]]

=> a = [1,2,3,4] 
```

您可以定义将参数收集到数组中的函数：

```
def foo(*args)
  p args
end

foo(1,2,"three",4)

=> [1,2,"three",4] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-02T05:36:25.523

好：

*   `require pp`导入漂亮的打印功能
*   `p`是一个带有可变参数的漂亮打印方法，它漂亮地打印每个参数
*   `*`表示“将参数扩展*为*可变参数”，而不是将其视为单个参数
*   1..10 是Ruby中的[范围序列语法](http://www.techotopia.com/index.php/Ruby_Ranges)

这是否充分解释了它？如果不是，请详细说明哪一点令人困惑。

# umbraco - umbraco 4 中的文件夹

> ID：708407
> 
> 赞同：7
> 
> 时间：2009-04-02T05:25:13.070
> 
> 标签：umbraco

有没有办法在 umbraco 4 中简单地创建文件夹来组织内容？我搜索了论坛并没有找到合理的答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-02T06:33:42.967

这是一个文档有些缺乏的领域，但是它是完全可行的：

创建一个名为“内容文件夹”之类的文档类型。（您不能使用文件夹，因为它已在系统中使用）。

为新文档类型提供以下属性：

名称：重定向到

别名：umbraco重定向

类型：内容选择器

重要的一点是别名：umbracoRedirect。这是未记录的内置 umbraco 功能之一。它基本上将一个节点重定向到另一个节点（使其像文件夹一样）。

如果要从菜单中隐藏文件夹，则需要添加另一个未记录的属性：umbracoNaviHide，它在默认的 XSLT 导航示例中使用。

更多信息：[http ://www.umbraco.org/documentation/books/converting-existing-site-to-umbraco/creating-folders](http://www.umbraco.org/documentation/books/converting-existing-site-to-umbraco/creating-folders)

# umbraco - 为什么我不能在 Umbraco 4 中创建特定文档类型的节点？

> ID：708415
> 
> 赞同：2
> 
> 时间：2009-04-02T05:30:14.523
> 
> 标签：umbraco

如何让现有的*文档类型*显示在Umbraco 4 的*创建对话框中。*

我安装了 BlogForUmbraco4_1.0.0 包，我意识到它试图安装为主站点，但它也安装了所有必要的*Document Types*，包括*Blog*和*BlogPost*。为什么在我的网站中创建新项目时它们不是一个选项。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-02T07:21:06.677

Umbraco 使用基于权限的文档类型层次结构，以确保编辑不会在错误的位置创建奇怪的页面类型（例如博客下方的“主页”或图库中的“新闻项目”）。

因此，您需要允许您希望在创建对话框中出现的文档类型到您用作父页面的文档类型（这听起来可能没有意义;-)）。

*   因此，假设您已导入 Blog4Umbraco 包并希望在主页下方允许博客，您应该找出该主页的文档类型（查看文档上的属性选项卡并查看“文档类型” ）。
*   转到设置部分并打开文档类型并单击该文档类型（假设它称为“主页”）
*   单击“结构”选项卡，您将看到安装中所有文档类型的列表。其中一些已经被检查，那些是该类型下允许的。要允许博客，只需检查“博客”文档类型 :-)

# javascript - 在加载到 html 之前，如何获取图像大小？

> ID：708416
> 
> 赞同：3
> 
> 时间：2009-04-02T05:30:29.640
> 
> 标签：javascript, jquery

起初图像高度为零，之后通过刷新页面我得到它的实际高度。我需要第一次得到它的高度吗？任何机构都可以帮助我吗？

```
$j(document).ready(function(){
           var imgV = new Image();
           imgV.src="http://www.kerrvilletexascvb.com/Riverside%20Nature%20Center3.JPG";
           $j("#imgD").html(imgV.height);
           alert(imgV.height);
});

<div id="imgD"></div>
<img src="http://www.kerrvilletexascvb.com/Riverside%20Nature%20Center3.JPG" /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-02T05:42:45.680

您不必将图像插入 DOM 以获取其尺寸：

```
$("<img />")
    .attr("src", "http://www.google.com/intl/en_ALL/images/logo.gif")
    .load(function() {
        alert(this.width);
        alert(this.height);
    })
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T05:37:27.317

图像大小仅在加载图像时可用。很可能当您重新加载页面时，图像会立即从缓存中提供，因此其大小立即可用。

如果出于某种原因您需要在显示图像之前获取尺寸，您可以先将其显示在屏幕外。向它添加一个 onload 处理程序，该处理程序将在图像准备好时被调用 - 然后您可以检查它的大小，并将其附加到需要的地方。

通过在屏幕外显示，我的意思是将其粘贴到一个 1x1 像素的 div 中，并带有**溢出：隐藏**样式，位于页面底部的某个位置。

# asp.net - ASP.NET Outlook 预约安排

> ID：708417
> 
> 赞同：4
> 
> 时间：2009-04-02T05:30:40.920
> 
> 标签：asp.net, .net-2.0, outlook, integration

海科技

谁能告诉我如何从我的 ASP.NET 网页在 Outlook Express 中设置约会/提醒。我正在使用 ASP.NET 2.0

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T05:51:49.293

我认为您正在寻找的是电子邮件的 .ics 附件。这需要您创建带有 .ics 扩展名的特制文本文件并将其附加到您的电子邮件中。

“asp.net ics”的快速谷歌显示：http: [//www.codeproject.com/KB/applications/SendAppointment.aspx](http://www.codeproject.com/KB/applications/SendAppointment.aspx) 似乎适合您的需求。[维基百科对此](http://en.wikipedia.org/wiki/ICalendar)也有链接。

Stackoverflow 也有这个标签，其中包含更多信息： [https ://stackoverflow.com/questions/tagged/icalendar](https://stackoverflow.com/questions/tagged/icalendar)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-02T05:41:23.810

像[这样](http://www.aspnetemail.com/help/aspnetemail.calendaring.icalendar.html)使用 iCal 标准的东西可能会起作用。它也适用于谷歌日历。

# database - Zend 框架：开始使用 SQLite

> ID：708421
> 
> 赞同：6
> 
> 时间：2009-04-02T05:34:07.730
> 
> 标签：database, zend-framework, sqlite, directory-structure

抱歉，如果这过于简单化。

我决定使用 SQLite 数据库而不是 MySQL 数据库。我试图了解 SQLite 是多么简单，并且想要一个简单的答案教程，介绍如何将 SQLite 与 Zend 框架一起使用、将我的 SQLite 数据库放在我的目录结构中的什么位置、如何创建数据库等.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-08-11T01:16:36.720

@tuinstoel 是正确的，如果它不存在，附加到 SQLite 数据库会隐式创建它。

SQLite 还支持命令行客户端，它或多或少类似于 MySQL 的命令外壳，允许您发出临时命令或运行 SQL 脚本。请参阅此处的文档： [http ://www.sqlite.org/sqlite.html](http://www.sqlite.org/sqlite.html)

当然，您需要在 ZF 应用程序中更改 Zend_Db 适配器。ZF 仅支持 PDO SQLite 扩展的适配器。SQLite 不支持用户/密码凭据。此外，由于 SQLite 是嵌入式数据库而不是客户端/服务器，因此“主机”参数毫无意义。

```
$db = Zend_Db::factory("pdo_sqlite", array("dbname"=>"/path/to/mydatabase.db")); 
```

另一个警告：当您以关联数组格式获取查询结果时，某些版本的 SQLite 坚持使用“tablename.columnname”作为数组中的键，而其他品牌的数据库将键返回为简单的“列名”。ZF 中有一个关于此的突出错误，试图补偿并使 SQLite 与其他适配器的行为一致，但该错误尚未解决。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-02T05:52:23.753

如果您连接到一个不存在的数据库，则会即时创建一个数据库。（您可以关闭此行为）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-06T21:13:49.497

[Zend Framework 快速入门教程](http://framework.zend.com/docs/quickstart/create-a-model-and-database-table)（撰写本文时为 1.9.5 版）现已对此进行了介绍。只需创建一个新项目（使用 zf 命令行工具。在此处查找有关设置它[的精彩教程](http://akrabat.com/zend-framework-tutorial/)`config.ini`），将这些行添加到您的文件中，您就可以开始了：

```
; application/configs/application.ini
[production]
resources.db.adapter       = "PDO_SQLITE"
resources.db.params.dbname = APPLICATION_PATH "/../data/db/databaseName.db" 
```

现在，当您询问您的默认数据库适配器时，它将使用这个。我还建议下载快速入门教程源代码并使用该`load.sqlite.php`脚本。您可以创建架构和数据文件并使用这些表/列/值加载数据库。这很有帮助！只需查看[教程](http://framework.zend.com/docs/quickstart/create-a-model-and-database-table)。都在里面。

* * *

*此答案已从问题中移到 CW 答案中，以否认对内容的所有权*。

# svn - TortoiseSVN 无法打开 ra_local 会话到 URL win XP

> ID：708424
> 
> 赞同：7
> 
> 时间：2009-04-02T05:35:36.947
> 
> 标签：svn, tortoisesvn

我正在尝试在 windows xp 机器上通过 svnTortoise 使用 svn。它只是我，只是想在家里做。在我的笔记本电脑上，我安装了乌龟，一切都很好。然后我来到我的桌面并安装了svnTortoise并尝试了它。但是这次我得到了这些错误。

```
Checkout from file://F:/repos/mav_admin, revision HEAD, Fully recursive, Externals included
Unable to open an ra_local session to URL
Unable to open repository 'file://f:/repos/mav_admin'
Finished! 
```

我已经尝试过本地存储库，或者我的笔记本电脑使用的相同存储库......似乎没有任何效果。有任何想法吗？

每当我尝试在我的桌面上导入或结帐时，我都会收到上述错误，但在我使用笔记本电脑时不会。我的笔记本电脑正在运行 Vista ......（不想付费降级......）而我的台式电脑是 64 位电脑......但我正在运行 32 位 XP。

乌龟信息是

```
TortoiseSVN 1.6.0, Build 15855 - 32 Bit , 2009/03/21 12:36:36
Subversion 1.6.0, 
apr 1.3.3
apr-utils 1.3.4
neon 0.28.4
OpenSSL 0.9.8j 07 Jan 2009
zlib 1.2.3 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-04T23:24:12.547

您需要在驱动器号之前添加第三个“/”：

```
file:///F:/repos/mav_admin 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-02T06:15:34.277

有关类似问题，请参阅[无法打开存储库错误-on-windows-xp 。](https://stackoverflow.com/questions/507299/unable-to-open-repository-error-on-windows-xp)

可能的原因：

*   您是否在所有计算机上使用相同的客户端？我认为 Tortoise 1.6 可能会放弃对 file:// 访问的支持。
*   您使用的是 BDB 还是 fsfs 存储库？
*   您对存储库有正确的文件权限吗？

更新：来自[tsvn_1.6_releasenotes.html](http://tortoisesvn.tigris.org/tsvn_1.6_releasenotes.html)

> TortoiseSVN 1.6 不再支持通过 file:/// url 访问 BDB 存储库。这不会影响通过 svn:// 或 http:// 访问 BDB 存储库。
> 
> 如果您仍然通过 file:/// url 访问 BDB 存储库，则必须使用 SVN 命令行客户端中提供的 svnadmin 工具将存储库转换为 FSFS 格式。
> 
> 请按照 Subversion 手册中的说明转换存储库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-08-10T17:22:31.280

有同样的问题。还没有完全解决它，但我找到了一个简单（或愚蠢，无论你喜欢什么）的解决方法。TortoiseSVN 不会打开在 C 以外的其他驱动器中创建的存储库（安装了 WinXP 和 TortoiseSVN）。在 C 上，它工作得很好。我是 SVN 新手，所以如果这是众所周知的错误或预期行为，请发表评论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-10-05T13:57:10.853

我有同样的问题。Tortoise SVN 在导入时返回“无法打开到 URL 的 ra_local 会话”错误。这是因为 svn 无法找到存储库。请确保

1.  您已经创建了存储库，例如项目并且可以访问。
2.  此外，您创建了正确的结构，
    例如 C:\tmp\new\branches C:\tmp\new\tags C:\tmp\new\trunk
    1.  将\Project的内容移动到trunk子目录（C:\tmp\new\trunk）
    2.  右键单击“新建”目录并导入。这应该有效。

参考：[http ://www.shokhirev.com/nikolai/programs/SVN/svn.html](http://www.shokhirev.com/nikolai/programs/SVN/svn.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-27T08:18:27.047

转到 TortoiseSVN - 设置 - 保存的数据。点击 URL 历史记录、日志消息（输入对话框）和日志消息（显示日志对话框）中的清除按钮 不确定您是否必须点击所有 3 个清除按钮，但它为我解决了这个问题。之后，您必须重新键入存储库位置的 url。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-18T11:43:12.760

我知道这是一个旧线程，但找到了另一个解决方案......

我使用了很多“外部”，但一直在使用绝对文件位置。我只是将文件路径从绝对更改为引用，错误就消失了。

在 Repco 浏览器中，选择文件，然后选择它旁边的“...”按钮，然后选择确定。TortoiseSVN 使用引用自动转换文件路径。

# ruby - 什么是“太聪明”的 Ruby 代码示例？

> ID：708428
> 
> 赞同：13
> 
> 时间：2009-04-02T05:36:34.383
> 
> 标签：ruby

我正在与一些程序员朋友进行讨论，他们说他们看到 Ruby 程序员（特别是）生成了很多“太聪明”的代码。所以我想知道那会是什么样子？我指的是在某些简单的东西本来可以同样或更好地工作的上下文中不必要地使用晦涩的语言功能。知道这方面的任何好的 Ruby 示例吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-04-02T06:04:43.583

在直接回答你的问题之后，我也想对这个前提提出异议；每当一群程序员以这种方式描述另一种语言的用户时，很可能他们告诉你更多关于他们自己的信息，而不是关于他们所描述的社区的信息。

例如，你可以指责 c 程序员过于沉迷于底层细节，或者 haskell 程序员被他们对函数纯度的渴望蒙蔽了双眼；perl mongers 是为了简洁，等等。但是，恕我直言，当你这样做时，你会通过将因果关系倒退。

当我想编写一个以某种风格表达最好的程序时，我会尝试选择一种支持该风格的语言。有时你需要一个工具来让你做不寻常的事情，对于这样的任务，拥有像 ruby​​ 这样的语言就像在你的工具包中拥有用于数学的 mathematica 或用于浏览器操作的 javascript 一样有价值。如果我想玩排版，我会使用 postscript *，因为那是它最擅长的*。

这就像在说“你有没有注意到使用电钻的人总是在东西上戳洞？” 这是真的，但它有点错过了重点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-02T17:10:59.780

```
class Tree
  def initialize*d;@d,=d;end
  def to_s;@l||@r?"<#{@d},<#{@l}>,<#{@r}>>":@d;end
  def total;(@d.is_a?(Numeric)?@d:0)+(@l?@l.total: 0)+(@r?@r.total: 0);end
  def insert d
    alias g instance_variable_get
    p=lambda{|s,o|d.to_s.send(o,@d.to_s)&&
      (g(s).nil??instance_variable_set(s,Tree.new(d)):g(s).insert(d))}
    @d?p[:@l,:<]||p[:@r,:>]:@d=d
  end
end 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-02T12:24:07.900

双响：!!某事

我不会写它的作用。忘记你曾经见过这种语法。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-04-02T21:08:44.230

任何使用元编程而没有认真考虑是否有更好的方法来使用该语言的正常、非“元”习语来实现这一点，我往往会觉得很烦人。

对“DRY”（不要重复自己）的痴迷，其中调用了一些可怕的元编程意大利面来避免重复自己，比如说，以一种简单且实际上比替代方式更直接和可读性更强的方式重复自己.

特别是对“eval”的任何使用。随着元编程的发展，这应该是您尝试其他所有方法后的绝对最后手段。例如，很多红宝石爱好者似乎没有听说过 Class#define_method。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-02T05:47:38.837

yaml.rb的输出阶段；这就是我与人合着[zaml.rb](http://65.74.177.129/hallettj/zaml/commits/master/lib)的原因。标准 yaml 版本执行各种元编程（它最初是由Why-the-lucky-stiff 编写的，我通常很欣赏他），但是通过将其替换为直接映射到类树的直接分层版本，我们能够消除几个 O(n^3) 的情况，使感兴趣的情况加速十倍，修复几个错误，并在一小部分代码中完成。

另外，即使不是红宝石大师的人也可以看到它的作用。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-04-02T16:12:38.857

本文中的许多示例似乎都符合条件：

[你应该在自己的代码](http://www.rubyinside.com/21-ruby-tricks-902.html)中使用 21 个 Ruby 技巧

这篇文章的标题有点夸张，因为它写的是“应该”而不是“不应该”。代码“应该”是透明的。代码“不应该”很棘手。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-02T16:40:18.510

我不确定这是否算得上“太聪明了”，但我看到的代码让我怀疑作者是天才还是白痴。一位开发人员似乎有一条规则，即任何方法都不应包含超过两行代码。这将调用堆栈推得很深，使调试变得相当困难。好处是他的整体设计非常抽象，从远处看甚至很优雅。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-04-02T18:13:32.017

[黄瓜](http://cukes.info/)（或[RSpec Stories](http://times.usefulinc.com/2008/01/12-rspec-stories)）

引用自上述 RSpec Stories 链接：

> 基于应用程序行为的纯文本描述，它可以让您编写具有良好重用性和良好诊断报告的集成测试。
> 
> 例如，这是我为检查登录过程而写的一个故事。
> 
> ```
> Story: login as an existing user
>     As an unauthenticated user
>     I want to log in to Expectnation
>     So I can see my account details
> 
>     Scenario: login details are correct
>             Given an event provider
>             And my test@example.org account
>             When I log in with email test@example.org and password foofoo
>             Then I will be logged in
>             And I will be shown the account page 
> ```
> 
> 诸如“Given”、“When”和“Then”之类的词是故事运行者执行某些代码的提示。故事的背后是一系列步骤。以下是此测试的几个步骤：
> 
> ```
>  Given "my $email account" do |email|
>     @user = find_or_create_user_by_email({:email => email,
>       :password => 'foofoo',
>       :password_confirmation => 'foofoo'})
>   end
> 
>   When "I log in with email $email and password $password" do |email, password|
>     post '/user/account/authenticate',
>       :user => {:email => email, :password => password}
>   end 
> ```
> 
> 请注意，巧妙的字符串匹配是如何让您从故事散文中传递参数的。
> 
> 通过一点点螺栓连接，散文故事然后作为代码运行并执行测试。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-04-02T12:17:09.740

这取决于。（我喜欢“这取决于”问题）

这取决于作者和读者的知识。我曾经认为[在 Rails 中使用 Symbol#to_proc](http://blog.hasmanythrough.com/2006/3/7/symbol-to-proc-shorthand)是不必要的神秘，例如，更喜欢

```
a.map { |e| e.downcase } 
```

到

```
a.map(&:downcase) 
```

现在我读它时很高兴，尽管我仍然不想写它。

在某些库（Rails 和其他）领域，我觉得可能发生了过度和自我放纵的元编程，但“太聪明”和“确实非常聪明”之间的区别通常是纸上谈兵。DSL 是一个很好的领域：在类中提供“宏”的方式（想想 ActiveRecord::Base 或 ActionController::Base 之类的所有声明性优点）对于相对新手来说很难理解，并且可能似乎过于聪明。它对我有用。现在，我发现自己在实现类似功能时引用了相同的代码作为指导。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-02T18:34:55.520

method_missing 可能会被滥用，当您在编写代码 3 个月后必须修复错误时，这可能会导致您大发雷霆。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-02T20:28:09.570

看看 Markaby 的来源。疯狂。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-04-05T03:01:53.290

您不必为了不重复几行代码而从一个方法到另一个方法来试图弄清楚某事到底在做什么。过于关注 LOC 计数和超精简方法在当时可能会感觉很酷，但对于尝试调试或遵循代码的其他人来说会很耗时（几个月后有人可能是你）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-03T04:36:39.663

比较：

```
if MODELS.keys.inject(true) {|b, klass| b and klass.constantize.columns.map(&:name).include? association.options [:foreign_key]} then 
  # ... 
end 
```

1 行（如果），132 个字符，132 个平均长度，22.9 个浮点数

对比

```
fk = association.options[:foreign_key] 
columns = MODELS.keys.map { |key| key.constantize.columns.map { |c| c.name } } 
if columns.all? {|column| column.include? fk} then 
  # ... 
end 
```

4 行，172 个字符，43 个平均字符，15.9 个浮点数

也快得多。

原作者实际上争论第一个版本的可维护性。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-06-01T22:38:24.567

最近发现了这个怪物：

```
def id
  unless defined?(@id)
    @id = if id = local_body.to_s[/(?:#\s*|@[[:punct:]]?)#{URL_REGEX}/,1]
            id.to_i
          end
  end
  @id
end 
```

并不是说我不同意缓存计算，它可能会更清楚。

# security - 安全审查：客户端信用卡# 存储在服务器上，但一次性加密存储在客户端 cookie 中

> ID：708441
> 
> 赞同：0
> 
> 时间：2009-04-02T05:47:27.540
> 
> 标签：security, credit-card

我正在编写一个系统，像往常一样，客户要求提供方便的“记住您的信用卡详细信息”选项。

我已经告诉他们，这很可能是不可行的。但是，我刚才确实有一个好主意（tm），看到加密中的好主意（tm）实际上是坏主意（tm），我想我会把它放在这里进行审查，看看可以打出什么洞通过这。

本质上，我正在考虑`xor`使用为每个客户生成的一次性便笺簿来处理信用卡信息以及一些消息签名。该垫作为 cookie 变量存储在客户端浏览器上。下次用户尝试进行购买时，pad 会被发送到服务器，如果服务器可以正确解码其加密数据，它会显示信用卡信息已被填写。（抄送信息实际上并未传回）。服务器永远不会将 pad 存储在内存或页面文件之外的任何内容中。事实上，我打算将 pad 发送两次：一次是在到达 CC 页面时（服务器检查它是否应该请求 CC 信息），一次是在 CC 提交时获取实际信息。

用户还将被告知他们的信息“部分存储”在他们的 cookie 缓存中，这意味着他们预计如果他们的 cookie 被刷新，他们的 CC 信息就会丢失。

让我知道你认为这个计划在哪里严重失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-12-09T17:19:57.870

听起来很粗略，我很确定你误用了“一次性垫”这个词。

与其走这条路，不如考虑使用 Authorize.net 的[Customer Information Management](http://www.authorize.net/solutions/merchantsolutions/merchantservices/cim/)之类的服务。基本上，你给他们卡信息，他们给你一个 ID，你可以用它来为卡充电。该 ID 与网站的商户帐户相关联，不能用于向任何其他商户充值。

它要安全得多，并且应该得到相同的结果。

注意：我不支持 Auth.net 或其 CIM。这只是我最熟悉的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T05:49:44.913

我认为，在客户端存储 pad 会使其容易受到 XSS 的攻击。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T06:07:38.913

技术上：有缺陷。

法律上：可能有缺陷。和律师谈谈。

只有当该垫被安全保密时，一次性垫才有效。将其存储在 cookie 中绝对不能算作安全或机密（它是从服务器发送和从服务器发送的，它被放到用户的机器上，它可能是公共终端或共享机器）。这是一个非常糟糕的主意。这是一个聪明的想法，但最终非常有缺陷。我建议您阅读 PCI 合规性文档并做其他人做的事情（一般来说）：

1.  不要这样做。
2.  使用可以安全存储 CC 并处理账单的支付处理器（即 PayPal）。
3.  设置一个单独且安全性强的支付网关，这台机器只处理信用卡交易，它反过来访问一个存储信用卡数据的安全机器。
4.  请记住，存储信用卡号码基本上会违反 PCI，并且可能会违反任何商家协议，甚至可能在您的管辖范围内是非法的（隐私法等），请咨询律师。
5.  不要这样做。严重地。查找将为您处理此问题的支付处理商。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T06:10:27.580

如果信用卡存储在客户端，那么您将使用密钥存储它，这意味着它很容易受到攻击。

如果您正在存储信用卡服务器端，那么您不需要存储在客户端上的加密密钥的密钥。

如果您所描述的情况是这样一种情况，即用户不仅没有获得是否要存储其详细信息的选项，而且还需要重新填充它们而无需进行身份验证，这听起来像是一个非常危险的情况反正。如果我来到一家网吧并为我预先填写信用卡详细信息字段，我会非常高兴！

# javascript - 如何控制 Javascript 执行顺序？

> ID：708449
> 
> 赞同：2
> 
> 时间：2009-04-02T05:49:53.480
> 
> 标签：javascript, html, cross-browser

我正在构建的网页存在一些并发问题。基本上，我有三个脚本文件用于保存一些数据：

**脚本1.js：**

```
var myValue = 1; 
```

**脚本2.js：**

```
var myValue = 2; 
```

**脚本3.js：**

```
var myValue = 3; 
```

我有一页**mypage.html**基本上看起来像这样：

```
<html>
<script>
   function get_number()
   {
     var script_file = GetQueryStringValue( "run" );
     e = document.createElement('script');
     e.type='text/javascript';
     e.src = script_file + ".js"
     head.appendChild( e );

     document.write( myValue );
   }
</script>
<body onload="get_number()">
   <div onclick="get_number()">Click me!</div>
</body>
</html> 
```

这个页面的主要思想是您可以像这样查询它： `mypage.html?run=script1` 这将告诉`get_number()`函数动态插入`script1.js`到 mypage.htm。然后，我调用`get_number()`以显示从脚本加载的值。

现在，我已经将上面的内容精简到我认为相关的部分，显然我遗漏了很多东西。我的实际代码加载了大量值并且更有趣......但是，我希望有人可以帮助我解决这个问题。

我发现在 IE 中，数字显示正确。

在 Firefox、Chrome 和 Safari 中，我收到一个`myValue`未定义的错误。但是，如果我单击`Click me`我创建的 div，数字会正确显示。所以，我知道我正确加载了 javascript 外部文件。但是，它只是没有及时加载，我的`get_number()`功能才能正常工作`onload`。

现在，我稍微修改了我的文件，使`get_number`函数看起来像这样：

```
 function get_number()
 {
   var script_file = GetQueryStringValue( "run" );
   e = document.createElement('script');
   e.type='text/javascript';
   e.src = script_file + ".js"
   head.appendChild( e );

   setTimeout( function() { document.write( myValue ), 10 } );
 } 
```

在大多数情况下，setTimeout 延迟足以更新 DOM 和加载 javascript。但是，这完全是黑客攻击。Firefox 倾向于始终正确加载这个“改进”的代码，而 Chrome 和 Safari 设法获得大约 50% 的时间的值。

所以，我想我想知道，有没有更好的方法来完成我在这里尝试做的事情？值由外部驱动（由查询字符串）非常重要，但除此要求外，我非常灵活。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T06:03:29.157

这种使用 DOM 方法（如 head.appendChild）动态加载脚本文件的方法是异步的，这意味着页面在运行任何进一步的代码之前不会等待它加载。如果您不希望这种异步行为，您可以在 HTML 中使用常规元素加载它们，或者您可以使用“同步”XMLHttpRequest 来获取它并使用 eval() 来运行它。

不过，您可能不想这样做，因为无论如何，异步会使整个页面加载速度更快。您可能只需要添加一些逻辑，等待动态加载的脚本加载完毕，然后再继续执行下一段代码。但是，这可能涉及使用 setInterval() 进行轮询，直到您注意到包含脚本中的变量已被定义。或者，您可以在包含的脚本中添加代码，以调用任何一直在等待它的方法。

或者，你可以看看 jQuery 如何做类似的事情，寻找定义 ajax 方法的位置，特别是这些部分......

```
var script = document.createElement("script");

// then later ...

script.onload = script.onreadystatechange = function(){
    if ( !done && (!this.readyState ||
    this.readyState == "loaded" || this.readyState == "complete") ) {

        // do processing
            head.removeChild( script );
    }
};

// ...

head.appendChild(script); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T06:08:18.130

您是否可以在脚本文件中添加一个函数调用，以便在它们运行时调用执行您的函数的函数

```
document.write( myValue ); 
```

所以 script1.js 将是

```
var myValue = 1;
scriptLoaded(); 
```

并且您的主文件将具有：

```
function scriptLoaded(){
   document.write( myValue );
} 
```

# css - CSS Div 布局或表格布局

> ID：708452
> 
> 赞同：0
> 
> 时间：2009-04-02T05:52:06.547
> 
> 标签：css

如何使用 CSS 获得简单表单的布局

```
-------------------------------------------------- --------------------------------------
|日期从 | 下拉框 | 日期 | 下拉框| 按钮|
-------------------------------------------------- --------------------------------------
网格或表格

-------------------------------------------------- --------------------------------------

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T06:03:09.687

您是否打算在第一“行”下方有一个表格布局？如果是这样，那么使用表格。这是表格数据，这就是表格的计划。人们说您不应该使用表格，而是使用 css，这意味着您不应该将表格用于**布局**，但您可以将它们用于表格数据。

如果您只打算拥有那一行，则可以尝试将元素浮动到左侧。有点像这样：

CSS：

```
.selections div{float:left;} 
```

html:

```
<div class="selections">
    <div>
        <label for="dateFrom">Date from:</label>
        <select id="dateFrom">...</select>
    </div>
    <div>
        <label for="dateTo">Date to:</label>
        <select id="dateTo">...</select>
    </div>
    <div>
        <input type="button" value="Button"/>
    </div>
</div> 
```

我没有测试过这段代码，可能会有一些错误，但它应该给出大致的想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T06:07:32.437

```
<ul>
<li>CONTROL</li>
<li>CONTROL</li>
<li>CONTROL</li>
<li>CONTROL</li>
</ul>

ul {
  list-style: none;
}

li {
  display: inline;
} 
```

其中控制是 datefrom、dropdown 等。

如果你愿意，你也可以设置边框。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T03:09:36.923

为了便于制作网格

[http://www.pagecolumn.com/grid_layout_generator_wrapper_float.htm](http://www.pagecolumn.com/grid_layout_generator_wrapper_float.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T06:18:05.517

我在表格中看到的最大问题是，如果它们有边距，它们在 IE 和其他浏览器中的呈现方式会有所不同，这很痛苦。通常也认为使用 div 是更好的做法。

# c# - 在呼出电话上显示对话框

> ID：708456
> 
> 赞同：0
> 
> 时间：2009-04-02T05:55:02.750
> 
> 标签：c#, windows-mobile

我希望能够显示关于出站呼叫的对话框。该对话框用于询问用户是否需要 1\. 直接拨打电话号码 2\. 通过 PBX 拨打。

如果选择了选项二，我想拨打一个特定的号码并将拨打的号码作为 DTMF 发送。

1.  如何接听和停止拨出电话？
2.  如何获得拨打的号码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-04T17:40:17.150

在 Windows Mobile 中似乎无法拦截传出呼叫（例如，请参阅此[线程](http://groups.google.com/group/microsoft.public.win32.programmer.tapi/browse_thread/thread/673f257026c8640d)）。老实说，如果这是可能的，我会感到惊讶，因为这会给平台带来安全风险。任何人都可以编写通过特定网络重定向呼叫的病毒或特洛伊木马程序。此外，运营商不会对这个“功能”感到满意。

一种解决方案是编写一个应用程序并要求用户通过其用户界面拨打电话。然后，您可以轻松地通过 PBX 发起常规呼叫或呼叫。您当然需要整合联系人，但这并不难。查看 Microsoft.WindowsMo​​bile.PocketOutlook 命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T20:26:13.807

首先（可能有点离题）实际上有一个内置的 WM6 功能，允许呼叫通过蜂窝网络或使用内置拨号器的 SIP 路由。如果启用了 SIP 呼叫（或 UI 中的“互联网呼叫”）并且存在 WiFi 连接，则呼叫将通过 SIP 路由，如果没有，它将以正常方式通过 GSM 路由。如果也有可用的 3G/HSDPA 连接，实际上还有一个注册表设置允许呼叫通过 SIP 路由。

大多数制造商并未在其设备 ROM 上提供支持此功能的 WM6 操作系统部分（大概考虑到他们的通话收入），但它可以轻松安装在大多数 WM6 设备上。

其次，如果这不是您所追求的（如果您不想使用 SIP 但使用电话卡或需要在拨打电话后进行选择）我可以告诉您必须可以做您想做的事情这样做是因为这个应用程序可以做到 -[神奇](http://www.mobiion.com/magicall-screenshots.html)。我能想到的一种方法是获取呼叫通知，立即结束它，从日志中擦除它，打开您的 PBX 或 Cell 对话框，然后以用户请求的方式再次拨打电话。这样做的缺点是，如果原始调用是以编程方式启动的，那么这样做的应用程序会认为调用过早结束。也可能使用另一种技术，但那是我的知识用完的地方......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-09T07:21:17.407

它可以通过 TAPI 完成。我正在通过 elance.com 招聘一个人来做这件事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-03-27T01:28:54.217

这*是*可能的。几年前我为一个电话卡申请做了这件事。但是，它需要 C++。

很抱歉，我不记得我是怎么做到的，但这是可能的。

刚开始看这里：[TAPI 参考](http://msdn.microsoft.com/en-us/library/aa922068(v=MSDN.10).aspx)

# c++ - `<<` 的编译器错误

> ID：708460
> 
> 赞同：0
> 
> 时间：2009-04-02T06:00:30.457
> 
> 标签：c++, serialization, struct, compiler-errors

我一直在努力完成这个程序，它将多个结构保存到一个文件中，可以将它们读回并编辑它们，然后将它们全部保存回一个文件中。我一直在研究这个逻辑，更不用说其他人的大量帮助和大量的谷歌搜索......现在我遇到了编译错误。任何帮助将不胜感激。

**代码：**

```
template<typename T>
void writeVector(ofstream &out, const vector<T> &vec);

struct InventoryItem {
    string Item;
    string Description;
    int Quantity;
    int wholesaleCost;
    int retailCost;
    int dateAdded;
} ;

int main(void)
{
    vector<InventoryItem> structList;
    ofstream out("data.dat");
    writeVector( out, structList );
    return 0;
}

template<typename T>
void writeVector(ofstream &out, const vector<T> &vec)
{
    out << vec.size();

    for(vector<T>::const_iterator i = vec.begin(); i != vec.end(); i++)
    {
        out << *i; //  error C2679
    }
} 
```

**编译器错误：**

```
1>.\Project 5.cpp(128) : error C2679: binary '<<' : no operator found which takes a right-hand operand of type 'const InventoryItem' (or there is no acceptable conversion)
// listed overload variants skipped
1>        while trying to match the argument list '(std::ofstream, const InventoryItem)'
1>        .\Project 5.cpp(46) : see reference to function template instantiation 'void writeVector<InventoryItem>(std::ofstream &,const std::vector<_Ty> &)' being compiled
1>        with
1>        [
1>            _Ty=InventoryItem
1>        ] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-02T06:15:38.207

您没有`operator<<`定义将指定如何将您的内容`InventoryItem`打印到输出流。您尝试打印它并且编译器不知道如何打印。您需要定义一个像这样的函数：

```
std::ostream& operator<<(std::ostream &strm, const InventoryItem &i) {
  return strm << i.Item << " (" << i.Description << ")";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T06:05:33.550

您正在尝试将`<<`运算符用于您的结构，但未为该类型定义该运算符。尝试输出特定的数据成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T06:38:33.033

<< 运算符定义为“左移位”。

IO 类覆盖此运算符并定义 << 表示打印此结构。

当编译器在右侧看到一个整数项时，它假定您的意思是“向左移动机器人”并且正在左侧寻找一个整数，但找到了一个 IO 流对象。

在将整数值发送到流之前，请尝试将其显式转换为字符串。

# asp.net - 为 .NET 应用程序生成 HTML 到 PDF 控件

> ID：708464
> 
> 赞同：1
> 
> 时间：2009-04-02T06:03:30.060
> 
> 标签：asp.net, pdf, pdf-generation, winnovative

> **可能重复：**
> [从 HTML 生成 PDF（.NET 组件）](https://stackoverflow.com/questions/598980/generation-pdf-from-html-component-for-net)

有没有人使用任何开源或付费的 .NET Control 来完成从 html 到 pdf 文件的转换工作？目前，我正在使用 Winnovative 转换器控制。但它在生成 pdf 中的批量页面（如超过 1000 个）期间存在性能限制。当我们在 html 内容中使用更大的图像时，就会出现限制。从过去 4 个月开始，我一直致力于 winnovative 控制，并在其中发现了很多重大错误。对于小型应用程序和用法。winnovative 很好，但不适用于成千上万客户使用应用程序的级别。

请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-03T06:21:31.923

我们目前在我们更复杂的应用程序之一中使用 ABCpdf。它对我们很有帮助，而且一点也不贵。我喜欢这样一个事实，即我可以将原始 HTML 文本发送给它，它会将其呈现为内存中的 PDF 或作为文件，因此我们用于动态生成 PDF 并通过网络提供它们，而实际上从未将其保存在磁盘上。

我们已经使用它大约 3 年了，早期我不得不使用他们的支持来解决一个非常具体的非常奇怪的问题，并且支持非常快速并帮助快速解决了问题。

您可以在他们的网站上找到更多信息： [http ://www.websupergoo.com/abcpdf-1.htm](http://www.websupergoo.com/abcpdf-1.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T08:05:55.493

从[这个问题](https://stackoverflow.com/questions/514170/html-document-to-pdf)我最近了解到[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)。除了完全不发音的名称之外，它似乎在单页转换方面做得不错，并支持一些漂亮的选项来从标题生成书签和目录。

我不知道它如何处理重载......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T06:07:56.960

www.pdfsharp.com

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T07:23:24.363

这是讨论免费库的代码项目文章的链接：

[http://www.codeproject.com/KB/aspnet/Creating_PDF_documents_in.aspx](http://www.codeproject.com/KB/aspnet/Creating_PDF_documents_in.aspx)

还有activepdf：[http ://www.activepdf.com/](http://www.activepdf.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T07:57:55.980

我用过两个：

*   [Alt-Soft 的 Xml2PDF](http://www.alt-soft.com/Products_xml2pdf.aspx)（也将 XHTML 转换为 PDF）
*   ExpertPDF 的[Html-to-PDF](http://www.html-to-pdf.net/)

两者都工作得很好，但有他们的怪癖和麻烦。

马克

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-12T11:37:05.560

最后我的公司决定使用来自[www.realobjects.com](http://www.realobjects.com)的 pdfReactor 。与 winnovative pdf 控件相比，它更快更好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-05-11T13:12:44.647

我建议尝试使用具有将 HTML 转换为 PDF 的主要功能的[**PDF Duo .NET 组件。**](http://www.duodimension.com/html_pdf_asp.net/component_html_pdf.aspx)

# c# - 用户控件的动态标题

> ID：708483
> 
> 赞同：0
> 
> 时间：2009-04-02T06:10:16.707
> 
> 标签：c#

我已经开发了一个用户控件，我正在通过 .aspx 页面动态加载它。我开发了一个 XML 并将其转换为哈希表以便更快地搜索。哈希表包含页面名称和相应的标题。我正在使用该哈希表动态加载 .aspx 页面的标题。现在，我希望当调用用户控件时，它的标题也可以通过搜索该哈希表来动态设置。

我已经尝试了很多，但我面临的问题是我无法在运行时捕获请求的用户控制路径......如果你有其他解决方案，请告诉我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T06:27:46.710

如果此 XML 包含应显示为 Header 的 HTML，则只需使用 Xml 控件。

# c# - C++ 或 C# 对移动条码设备进行编程？

> ID：708484
> 
> 赞同：8
> 
> 时间：2009-04-02T06:10:24.257
> 
> 标签：c#, c++, windows-mobile, embedded

我将使用移动条形码扫描仪开发一些应用程序，并且需要在 C++ 和 C# 之间进行选择以**在扫描仪上进行编码。**

我正在考虑使用[Intermec 的 CK31](http://www.intermec.com/products/cmptrck31/index.aspx)或类似产品来组合 wifi、扫描选项、可编程性和用户界面选项。它根据其规格表运行 Windows CE .NET 4.2。

[Intermec 的开发人员库](http://epsfiles.intermec.com/eps_files/eps_man/934-006.pdf)带有 .Net 和 C++ SDK。我之前的 Win CE 2003 经验是使用 C++（MFC GUI、套接字和串行通信）。我对带有 WPF 的 C# 感到很舒服，如果需要的话，我可以学习其他 GUI 框架。这让我可以自由选择一种语言——有什么建议吗？

我**不是**在寻找提倡 C++ 而不是 C# 作为一般语言的答案——我在这两种语言中的生产力是相似的，而且我有足够的经验来创建复杂、强大的 C++ 解决方案。

我希望将*战争故事*或因素纳入我们的平台评估，关于**在这些设备上**进行编程。例如：C# 应用程序与 C++ 应用程序的电池寿命、内存消耗或语言选择的其他环境影响。如果要避免使用特定版本的 .Net CE，那将是一个很好的提示。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-03T14:53:26.607

几年来，我一直在用 C、C++ 和 C# 为 Windows Mobile 和 Windows CE 设计和开发软件。此外，我一直在为 Honeywell（前身为 Hand Held Products，于 2007 年被 Honeywell 收购）这样做，在那里我几乎处理了设备的所有方面，从驱动程序和服务到业务线 GUI 和实用程序。

首先，我*不会*告诉你一种语言比另一种更好……我可能会花 50/50 的时间在每种语言上，每个平台在移动开发中肯定有自己的位置。

但是，我会建议您远离任何运行 WinCE 4.2 之前操作系统的设备，尤其是在您考虑 .NET 开发的情况下。这样做的原因是 4.2 至多只有 .NET CF 1.0 嵌入在 ROM（OS ROM 映像的一部分）中，这意味着您需要一个 ~5MB CAB 文件才能安装至少 .NET CF 2.0 是的，您可以使用 CF 1.0 进行开发，但确实不值得使用这么旧的框架。如今，大多数 WinCE 5.0 设备都在 ROM 中安装了 CF（Compact Framework）2.0，所以我至少会寻找它。

同样，您甚至可能想考虑使用装有 Windows Mobile 6.0 或 6.1 的设备，因为它们易于编程并且总是预装 CF 2.0。如果您想知道为什么我没有提到 CF 3.0 或 CF 3.5，那只是因为第一个与这些版本一起发布的移动平台将是 Windows Mobile 6.5，它还没有发布。尽管您可以随时安装框架（~8MB CAB）。

诚然，WinCE 绝对比它的 Windows Mobile 表亲为您提供了更多“Windows”的 GUI 外观和感觉，所以这完全取决于您的编程偏好以及最终用户想要和需要什么。

关于[kgiannakakis](https://stackoverflow.com/questions/708484/c-or-c-to-program-mobile-barcode-device/708572#708572)关于 SDK 只是一个事物层的评论，这是不正确的。如果你有一个合适的 SDK，你应该拥有对任何设备或驱动程序的所有相同访问权限，就像在 C++ 中一样，但使用 C# 很容易。例如，霍尼韦尔为我们所有的 C++、VB 和 C# 设备提供了广泛的 SDK，SDK 的 C# 部分实际上比 C++ 部分具有**更多功能。**您将*永远*不必使用我们的 C# 代码执行 P/Invoke。

如果您想查看我正在谈论的 SDK，可以在[此处](http://www.handheld.com/Site.aspx/na/en/resources/product_downloads/software/?product=262)免费下载它并提供一些很好的示例。恕我直言，在许多情况下，我实际上认为提供的 SDK 比硬件更重要，因为在大多数情况下，设备的硬件几乎相同。他们都有 ARM CPU、WiFi、蓝牙、基于激光或图像的扫描仪等。不过，我查看了您发布的 Intermec 链接，看起来该设备实际上并没有内置扫描仪……您使用的是连接到设备的外部扫描仪？如果您愿意，请查看霍尼韦尔的[产品](http://www.handheld.com/Site.aspx/na/en/products/categories/?cat=10). 我们的设备可能是业内最好的基于成像器的条码扫描仪，内置于我们所有的设备中。我们有一个坚如磐石的 SDK（我应该知道，我写了很多）。SDK 为 .NET 提供了对设备上所有硬件的极大访问权限。好的...我现在停止我的推销。

至于一种语言而不是另一种语言......这真的完全取决于你到底想做什么。

驱动程序和服务*只能*用 Native (Win32) C 或 C++ 编写。所以 .NET 适合这样的事情。在保持轻量级方面，C 和 C++ 绝对可以成为您在移动设备上的朋友，因为您不需要整个 .NET 框架来运行添加。请记住，对于任何进程（不包括 DLL ..这是另一堂课），您最多有 32MB 的内存，所以如果您的应用程序要处理*大量*数据，C++ 可能是要走的路。

然而，我发现 C 和 C++ 在移动系统上的主要缺点之一是制作 GUI*比*使用 .NET 更难。实际上，我编写的大多数 C++ 应用程序都是完全无头的，并且没有 GUI全部... .NET CF （还）*没有*WPF，并且被 WinForms 卡住了，但它真的很容易上手。在设计器中几乎可以拖放。还要记住，就像我之前提到的，WinCE 具有与 Windows Mobile 完全不同的 GUI 范例。但是，有时 Windows Mobile 的方式还不错，因为它迫使您保持 GUI 简单且切中要害。

使用 .NET 时内存消耗*可能会更高，但并非总是如此。*一方面，将要使用的 CF 版本存储在 ROM 中的设备意味着与等效的 C++ 应用程序相比，.NET 应用程序通常不会使用更多内存。在某些情况下，.NET 甚至会使用*更少的*内存。例如，.NET 应用程序与使用 MFC 的 C++ 应用程序通常可以使用更少的内存，因为 C++ 应用程序必须加载 MFC 框架（因为它还没有被操作系统加载......）。此外，由于 C# 是托管的，因此您通常会使用更少的内存，因为垃圾收集器正在释放您可能在 C++ 应用程序中忘记执行的内存。

更现代的设备上的执行速度通常在两者之间没有区别。诚然，每种语言的小部分总是会比另一种更快，但 .NET 在这一点上已经足够成熟，因此速度并不是真正的问题。我用高度交互的动画 GUI 编写了速度极快的应用程序，这些 GUI 在具有 128MB RAM 和 420MHz ARM CPU 的设备上运行良好。我什至编写了一个我不得不*放慢速度的*应用程序，因为它通过 P/Invoke 调用本机 DLL，而 .NET 部分基本上变得“不耐烦”。

我从未见过一种语言与另一种语言的电池寿命有任何问题。但我也从未专门测试过它。

我真的认为，最终，它仍然归结为您选择的设备随附的 SDK。如果它对 .NET 的支持很差，那么你会发现自己做了很多额外的工作才能让一切正常工作，在这种情况下，我会选择 C++。但是，如果它有很好的 .NET 支持（就像我工作的那个），您会发现自己的工作量要少得多，并且可能会更快地完成工作。

另外，请记住，您必须考虑的不仅仅是硬件供应商的 SDK。虽然您需要特定的 SDK，因为每个设备都不同（即我之前链接的 SDK*无法*在该 Intermec 设备上运行），但所有非硬件相关的操作系统内容几乎都是标准的，这就是 Windows Mobile或者来自微软的 Windows CE SDK 进来。他们的 C++ 支持非常好，但是他们现在真的在推动所有*的*东西依赖于使用 .NET 并不是说​​你*不能*在 C++ 中做到这一点，只是他们没有为你完成他们在 .NET SDK 中所做的很多*工作*。

好的……那很​​长，但我试图将我多年经验中更美好的部分倾倒在一件事上。我希望这是有道理的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-02T06:52:33.203

您的问题的答案与您的应用程序类型有关。如果您的应用程序主要围绕与硬件进行通信，并且只需要一层薄薄的业务逻辑和用户界面，那么 C++ 将是更好的选择。要与扫描仪交互，您需要与司机交谈。使用 C++ 可以更好更快地实现这一点。.NET SDK 实际上是一个使用大量 P/Invoke 的 C++ 代码包装器，这会降低代码执行速度。

另一方面，如果您的应用程序需要重要的业务层和/或用户界面，那么 .NET（尤其是 C#）是更好的选择。在这种情况下，生产力的提升远远超过 C++ 的性能提升。

另一个重要因素是将应用程序部署到的设备类型。您是否仅针对 Windows Mobile 设备？那么.NET 是一个安全的选择。对于 Windows CE 设备，您需要调查是否预安装了紧凑框架。此外，某些 Windows CE 设备可能不支持所有 .NET 命名空间。

最后，我推荐阅读[移动架构袖珍指南](http://www.codeplex.com/AppArch/Release/ProjectReleases.aspx?ReleaseId=19798)，这是一份关于移动应用程序架构决策的最新文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-03T21:46:38.377

首先，出于基本相同的原因，我强烈赞同 Adam 的建议，反对在这一点上运行任何基于 CE .NET 4.2 的东西。在这一点上，它是一个古老的操作系统版本，除非您免费获得终端，否则不值得，如果您选择进行 C# 开发，下载 CAB 以运行 .NET 2 会很痛苦。

我们已经为 Motorola(Symbol) 和 Intermec 设备开发了很多应用程序。它们当前的 API 集都可以可靠地工作，因此我更担心设备的适用性而不是特定的 API。它们还都提供了合理的示例程序，可以轻松剪切和粘贴解决方案。

I have noticed one other big difference between Motorola and Intermec. On the Intermec devices I've worked with (in C#), it takes about a second for the decoder for each symbology to be loaded. This typically isn't a big deal if you use a limited number of symbologies and setup the scanner at the start of the application, but can cause significant delays if you change the decoders(symbologies) within the application.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T06:21:07.337

我已经开发了大约 15 年。大约 5 年的 C++ 和 3 年的 C#（目前是我选择的语言）。在 C++ 中，我总是使用 stdlib，有时也使用 boost。

自从我从 c++ 切换到 c# 以来，我的开发时间缩短了三分之一。这样做是因为几件事（没有科学依据，只是我的意见）：

1.  .Net 是一个比 stdlib 和 boost 组合更完整且更易于使用的框架。
2.  C# 具有更好的结构，可以更轻松地阅读其他代码和编写代码。
3.  .Net 中的单元测试与 C++ 中的单元测试相距甚远，尤其是使用 Resharper 和 xUnit（xUnit 语法简洁，resharper 让您可以直接在开发工作室中测试特定的测试方法）。

我主要编写服务器代码，GUI 编程应该更快。

# algorithm - 2值数组的稳定排序？

> ID：708495
> 
> 赞同：1
> 
> 时间：2009-04-02T06:17:08.390
> 
> 标签：algorithm, sorting

我有一个对象数组。对象中有一个布尔值，我想将其用作对数组进行排序的键（所有具有 true 的对象都在所有具有 false 的对象之前），但否则以相同的顺序保留事物。

是否有一个简单的、就地的 O(n) 解决方案？也许是[radix-sort](http://en.wikipedia.org/wiki/Radix_sort)的一些变体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T06:24:38.090

有关此主题的讨论，请参见[此处](https://stackoverflow.com/questions/682171/arrange-0s-1s-in-a-array)。您基本上可以拥有需要额外空间的 O(n) 解决方案或 O(n log n) 就地解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T06:18:44.987

合并排序。O(n log n)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T06:33:30.130

唔。使用链表应该是可行的——您将搜索第一个“假”条目并将其保留为“插入位置”。（如果没有“假”条目，那么你无论如何都完成了：）然后只需遍历整个列表 - 如果你在插入位置之前并找到一个“假”条目，或者如果你在插入位置之后并且找到一个“真实”条目，然后将其直接移动到“插入位置”之前。到目前为止，如此`O(n)`。

现在您可以将数组转换为链表 in`O(n)`并且可以将数据复制*回*`O(n)`. 所以我认为它会在*复杂性*方面起作用- 但它不是就地的。我会考虑是否可以就地完成...

# eclipse-plugin - Eclipse RCP：如何订购属于不同插件的透视按钮？

> ID：708502
> 
> 赞同：3
> 
> 时间：2009-04-02T06:20:51.423
> 
> 标签：eclipse-plugin, eclipse-rcp

我的应用程序有 5 个插件。每个插件都有自己的透视图，因此每个透视图扩展定义都在各个插件的 plugin.xml 下。

现在，我想控制这些透视图在我的应用程序中出现的顺序。怎么做？

有一个包含“ApplicationWorkBenchAdvisor.java”的主要插件。这有 initialize() 方法，我在其中迭代透视注册表使用

```
PlatformUI.getWorkbench().getPerspectiveRegistry().getPerspectives(); 
```

然后以逗号分隔的方式将透视 id 附加到字符串变量（pbar），稍后将像这样使用。

```
PlatformUI.getPreferenceStore().setDefault(IWorkbenchPreferenceConstants.PERSPECTIVE_BAR_EXTRAS, pbar);
PlatformUI.getPreferenceStore().setValue(IWorkbenchPreferenceConstants.PERSPECTIVE_BAR_EXTRAS, pbar); 
```

当遍历透视注册表时，我可以比较透视 id 并按照我希望它出现的方式对其进行排序（当通过比较 id 添加到“pbar”时）但是，我不想在这里进行排序，因为它看起来像肮脏的方式。

有没有其他地方可以确定视角出现的顺序？（每个视角驻留在不同的插件中）。

## 添加

1）我们还可以控制透视切换器中的顺序吗？

2）有没有办法控制进入透视注册表以产生所需的顺序。如果不能，我们可以写回透视注册表吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-02T06:43:06.223

如果您的应用程序被封装为 Eclipse 产品，您可以调整该[`plugin.properties/plugin_customization.ini`](http://dev.eclipse.org/newslists/news.eclipse.platform/msg71104.html)文件。[*（由产品*](http://help.eclipse.org/ganymede/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/product_def_extpt.htm)[扩展点](http://help.eclipse.org/ganymede/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/product_def_extpt.htm)中的 ' ' 属性
引用的文件。） 此文件是 java.io.Properties 格式文件。通常，此文件用于设置作为插件公共 API 的一部分发布的首选项的值。 （[此类文件的](http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.platform/plugin_customization.ini?revision=1.8&view=markup)示例）`preferenceCustomization`[](http://help.eclipse.org/ganymede/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/product_def_extpt.htm) *[`org.eclipse.platform`](http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.platform/plugin_customization.ini?revision=1.8&view=markup)*

 *因此，如果表示透视顺序的字符串可以作为属性引用，则可以在其中定义默认顺序。
由于[`IWorkbenchPreferenceConstants`](http://kickjava.com/src/org/eclipse/ui/IWorkbenchPreferenceConstants.java.htm)提及的源代码：

```
 /**
  * Lists the extra perspectives to show in the perspective bar.
  * The value is a comma-separated list of perspective ids.
  * The default is the empty string.
  *
  * @since 3.2
  */
 public static final String JavaDoc PERSPECTIVE_BAR_EXTRAS = "PERSPECTIVE_BAR_EXTRAS"; //$NON-NLS-1$ 
```

也许`plugin_customization.ini`文件中的一行：

```
org.eclipse.ui/PERSPECTIVE_BAR_EXTRAS=perspectiveId1,perspectiveId2,perspectiveId3 
```

将允许您指定该订单，而无需对其进行硬编码。

## 补充笔记：

[IPerspectiveRegistry](http://kickjava.com/src/org/eclipse/ui/IPerspectiveRegistry.java.htm)（或[PerspectiveRegistry](http://kickjava.com/src/org/eclipse/ui/internal/registry/PerspectiveRegistry.java.htm)）不是用来写任何东西的（尤其是对于在扩展中定义的透视图）

排序可以在工作台的状态中找到（存储在工作区中，然后再次启动时恢复，`.metadata/.plugins/org.eclipse.ui.workbench/workbench.xml`）

您是否确认：

```
IPerspectiveRegistry registry = PlatformUI.getWorkbench().getPerspectiveRegistry();
IPerspectiveDescriptor[] perspectives = registry.getPerspectives(); 
```

当`plugin_customization.ini`确实正确定义该顺序时，顺序不正确？

[利物浦 5-0 阿斯顿维拉](https://stackoverflow.com/users/65412/liverpool-5-0-aston-villa)确实证实了这一点（在评论中），但也表明**（有序）ini 文件条目在内部被记录到偏好存储**中，这意味着它们可以通过**偏好存储 API**检索：

```
PatformUI.getPreferenceStore().getDefault( 
    IWorkbenchPreferenceConstants.PERSPECTIVE_BAR_EXTRAS) 
```

利物浦 5 - 0 阿斯顿维拉然后补充：

> 透视注册表（最初的“ `PlatformUI.getWorkbench().getPerspectiveRegistry().getPerspectives();`”位）保持不变（并且无序）。
> 但是，您仍然可以通过**偏好存储“****轻松访问有序的视角列表**” 。 因此，对于其他任务，我们可以使用存储有序透视 id 列表的有序变量，而不是遍历透视注册表（仍然是无序的）。

 **.
.
.
.

* * *

注意：另一种可能性是[**替换 RCP 应用程序中的透视切换器**](http://eclipsesource.com/blogs/2009/03/31/replacing-the-perspective-switcher-in-rcp-apps/)

![替代文字](https://i.stack.imgur.com/7LACm.png) => 到：![替代文字](https://i.stack.imgur.com/o77CJ.png)

您可以更轻松地在菜单或按钮中定义顺序。

* * *

极端解决方案：[重新实现一个透视切换器](http://www.richclient2.eu/2006_08_29/creating-your-own-perspective-switcher-a-first-try/)。

![http://www.richclient2.de/wp-content/uploads/2006/08/persp_header.png](https://i.stack.imgur.com/tCZVe.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-08T06:47:40.257

总结所有的观察和发现，

1) 无法更改透视注册表中的条目。它是只读的。

2）要使透视在透视栏上按照我们想要的顺序出现，我们可以通过在plugin_customization.ini（或preferences.ini）中添加一个条目来实现，如下所示。

```
org.eclipse.ui/PERSPECTIVE_BAR_EXTRAS=perspectiveId1,perspectiveId2,perspectiveId3 
```

3）如果我们要获取这个有序列表，我们不能直接获取它。但是由于这个 ini 文件条目在内部被记录在 PreferenceStore 中，我们可以使用以下 API 从 PreferenceStore 中获取相同的值，如下所示。

```
PlatformUI.getPreferenceStore().getDefault( 
    IWorkbenchPreferenceConstants.PERSPECTIVE_BAR_EXTRAS); 
```

**为什么有人需要访问 ini 文件中定义的条目？**

好吧，就我而言，我有一个视图，我必须在其中显示每个视角的链接。由于我的透视栏按所需顺序排序，我还希望在显示透视链接时在我的视图中保持相同的顺序。

4) 没有已知的方法可以在**默认**透视切换器的显示中施加相同的排序顺序。同时可以编写一个新的自定义透视切换器来达到预期的效果。

# apache-flex - Flex：- 如何根据某些条件使链接按钮在 dataGrid 中可见为假

> ID：708503
> 
> 赞同：0
> 
> 时间：2009-04-02T06:20:53.310
> 
> 标签：apache-flex, adobe

我正在使用 flex，在我的应用程序中我使用的是 datGrid，里面有 6 到 7 列在最后一列中，有 5 个链接按钮。现在在 dataGris 中，我也有一个状态列。基于状态，我想隐藏其中一些链接按钮。例如，如果状态为“a”，则按钮 2 和 3 应该消失，而当状态变为“b”时，其他一些按钮将消失。并且不同的行也可能具有不同的状态，并且根据该链接按钮应该消失。

我怎样才能做到这一点？？？请....提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T06:48:58.907

将 LinkBut​​ton 的可见属性绑定到 DataGrid 的状态列或其自定义函数。

# css - 应用于 DIV 内容的 CSS

> ID：708505
> 
> 赞同：2
> 
> 时间：2009-04-02T06:21:19.800
> 
> 标签：css

我有一个如下的 DIV：

```
 <td>  
    <DIV>
    <script type="text/javascript">
    // link to some js
    </script>
    </DIV>
  </td> 
```

.js 在 div 中呈现最新的文章摘要。然而，它在 Calibri 10px 中呈现它。

我希望 DIV 中的任何内容都应呈现为 Verdana 10px。我正在使用第 3 方 .js，因此无法控制它。如何强制 DIV 以我想要的方式呈现内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T06:36:18.017

如果 Javascript 添加的元素有自己的样式声明，那么您将需要使用更多的 Javascript 来覆盖它们。

否则，您应该能够给您的 div 一个类，将您的样式应用于该类，然后它们应该传播到内部的任何内容。

例如

CSS：

```
.myClass {
  font-family: Verdana; 
  font-size: 10px;
} 
```

html:

```
 <td>  
    <div class="myClass">
    <script type="text/javascript">
    // link to some js
    </script>
    </div>
  </td> 
```

如果这不起作用，请将 CSS 更改为：

```
.myClass * {
  font-family: Verdana; 
  font-size: 10px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T06:25:50.257

如果 javascript 只放置内容而没有样式，你可以这样做：

```
 <td>  
    <DIV style='font-family: Verdana; font-size: 10px;'>
    <script type="text/javascript">
    // link to some js
    </script>
    </DIV>
  </td> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-02T06:26:49.537

您需要检查 javascript 生成的元素。在 FireFox 中使用 firebug 或在 Chrome 中使用“检查元素”。

当您知道该元素时，请在样式表中指定类似的内容。

```
body table tr td div elementOrClassNameThatYouFound {
  font: verdana 10px;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T06:39:18.930

你也可以在你的 CSS 中尝试一些东西，比如：

```
.myClass {
    font-family: Verdana !important;
    font-size: 10px !important;
} 
```

# wpf - WPF 用户控件

> ID：708511
> 
> 赞同：0
> 
> 时间：2009-04-02T06:25:35.140
> 
> 标签：wpf, user-controls, wpf-controls

我现在面临一个非常大的问题，那就是我有用户控件（由我创建），我已经添加到一个窗口中......点击按钮我想在窗口上显示另一个用户控件，我怎么能访问我的窗口对象控制（用户控制）

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T06:29:25.070

您可以通过访问 Parent 属性来做到这一点。但是为什么不从窗口中处理的 UserControl 中引发一个事件，然后添加另一个控件呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T07:29:28.093

您可以使用[`Window.GetWindow`](http://msdn.microsoft.com/en-us/library/system.windows.window.getwindow.aspx). 但是，您可能需要考虑重新设计其中的`Window`内容，而不是托管在`Window`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T08:59:42.290

或者您可以在用户控件中创建一个事件和一个委托并在窗口中处理它。

# .net - 巡航控制.NET

> ID：708517
> 
> 赞同：3
> 
> 时间：2009-04-02T06:28:09.860
> 
> 标签：.net, scripting, cruisecontrol

我只是 Cruise control.NET 的初学者。我怀疑 Cruise control.NET 有什么方法可以检测本地文件夹本身的变化（例如：C:/MYSource），而不是寻找源代码的变化控制存储库。我需要始终从 Web 仪表板强制构建。我希望 Cruise control.NET 检测更改并自行强制构建而不是手动干预。这非常重要，因为我正在做一个演示目的和成功实施我的演示后，我将能够去源代码控制存储库。

感谢和问候麦迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T06:32:08.777

是的，您可以检查本地文件夹中的更改。请参阅：[http](http://confluence.public.thoughtworks.org/display/CCNET/Filesystem+Source+Control+Block) ://confluence.public.thoughtworks.org/display/CCNET/Filesystem+Source+Control+Block 。

在我们的设置中，我们有两台 Cruisecontrol 服务器：一台用于构建解决方案，将结果存储在 zip 文件中，并将 zip 文件复制到第二台服务器上的共享中。第二台服务器上的 CruiseControl 检查共享目录中的新文件并触发测试过程。

# dns - 跨域错误

> ID：708519
> 
> 赞同：3
> 
> 时间：2009-04-02T06:29:52.370
> 
> 标签：dns

什么是跨域错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T06:43:57.657

当 Javascript（*大多数时候*）尝试访问它不应该访问的东西时，就会发生这种情况。

例如，如果您尝试读取另一个域的 cookie，那将无法正常工作。如果您尝试向另一个不起作用的域或协议（HTTP > HTTPS）发出 XMLHTTP 请求。因为如果你能做到这一点，你就可以劫持，窃取你在其他网站上的访问者会话。

它是安全功能，现在它是所有浏览器的标准。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T06:36:41.790

据我了解，当您尝试与服务器建立连接时，Silverlight（可能还有 Flash/Javascript）等客户端工具会引发跨域错误，而该服务器通常仅在与页面是从（某些来源策略）提供的。

例如，当您在测试服务器上查看页面时，它试图调用您的实时服务器，或者当您使用 file:// 将测试页面作为本地文件查看时，可能会引发跨域错误协议。

尝试确保您正在测试的域与该站点的设计目标相同。请注意，Flash 具有专门允许您执行跨域请求的 crossdomain.xml 功能。Javascript 也有办法绕过同源策略，但你应该意识到你正在做的事情的含义。

# c# - 如何从 SVN 存储库中签出单个文件（不是文件夹）？

> ID：708523
> 
> 赞同：2
> 
> 时间：2009-04-02T06:31:28.777
> 
> 标签：c#

目前我正在开发一个 C#.net 项目（visual studio 2005）。我可以从 SVN 存储库中签出一个项目，对文件进行更改并提交。

但是，如何使用 sharpSVN DLL 指定检出深度（稀疏检出）并检出单个文件？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T06:58:01.367

据我所知，Subversion 客户端通常不支持单文件检出。您当然*可以获得*单个文件（只需对 URL 发出一个简单的 HTTP GET 请求），但检查更改会更加困难。

这样做的原因是 Subversion 想要创建它的元数据目录 ( `.svn`) 来跟踪属性、URL、文件的旧版本等。这在单个文件中很难做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T07:25:38.880

就像@derobert 所说，您不能签出单个文件。您能做的最好的事情是对该文件的目录进行非递归检出。

# c++ - 用 C 或 C++ 实现插件系统

> ID：708527
> 
> 赞同：34
> 
> 时间：2009-04-02T06:34:03.840
> 
> 标签：c++, c, plugins

你对实现插件风格系统有什么建议？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-04-02T06:42:03.870

在 C 中（我也认为是 C++，尽管我自己没有做过），这通常是使用动态加载的模块来完成的。API:s 是平台相关的。

在 POSIX (Linux) 上，您使用`[dlopen()](http://linux.die.net/man/3/dlopen)`函数族。基本上你单独构建你的插件，然后在运行时加载它，按名称查找它的符号，然后可以调用它们。

对于 Win32，有`[LoadLibrary()](http://msdn.microsoft.com/en-us/library/ms684175%28VS.85%29.aspx)`一个非常相似的功能，您将代码构建到 DLL 中。

对于使所有这些变得简单和透明的便捷包装器，请查看 GLib 的[GModule](http://library.gnome.org/devel/glib/stable/glib-Dynamic-Loading-of-Modules.html) API。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-04-02T06:58:57.290

在 '92/'93 时间框架内，我为 Aldus PageMaker 开发了一个插件架构，它是用 C++ 编码的。PageMaker 建立在一个名为 VAMP 的 C++ OOP 框架之上，这有助于其在 Mac OS 和 Windows 之间的可移植性。

所以我们尝试利用C++的特性来构建插件架构。由于所谓的脆基类问题，这被证明对于 C++ 类来说是非常有问题的。我继续写了一篇发表在期刊上的论文，并在 OOPSLA '93 的反思研讨会上发表。我还在波特兰举行的 Usenix 会议上与 Bjarne Stroustrup 取得了联系，并继续与他进行了几个月的对话，在那里他代表我提出了处理易碎基类问题的问题。（唉，当时认为其他问题更重要。）

微软推出了 COM/DCOM 系统，并针对该平台被视为解决问题的可行解决方案。通过用于定义 COM 接口的抽象类，C++ 可以用作 COM 的实现语言。

然而，这些天来，开发人员避开了 COM/DCOM。

相比之下，NeXT 在 90 年代初期在 NeXT Step 框架中使用 Objective C 设计了一个插件架构。今天，它在苹果电脑和 iPhone 等重要平台上的 Mac OS X 中充满活力。

我提交了启用 Objective C 以更好地解决插件问题的方法。

我个人认为 C++ 脆弱的基类问题是它最致命的缺陷。

如果要使用基于 C 的语言系列构建插件架构，那么会使用 Objective C。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-03T13:03:55.503

我能给出的最好的平台和语言中立建议是：

**围绕插件 SDK 设计您的整个应用程序。**

IMO，插件 SDK 不应该是事后的想法。如果您将应用程序设计为基本上是一个加载插件的空壳，那么核心功能在您自己的 SDK 中实现，您将获得以下好处：

*   组件的高度模块化和明确的用途分离（这会迫使您的架构变得良好）
*   它迫使您的 SDK 非常好
*   它还允许其他第三方开发人员制作极其强大的核心级功能
*   新开发人员/新员工无需接触主应用程序即可轻松开始主要新功能的工作 - 他们可以在插件中完成所有工作（这可以防止他们搞砸其他任何事情）

在 C/C++ 中，您可能使用动态链接库和函数指针 (C) 或接口（仅由纯虚方法组成的类，对于 C++）。但是，即使您使用 Javascript，我仍然会推荐上述架构。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-03-04T17:58:02.630

Qt提供QPluginLoader：http: [//qt-project.org/doc/qt-4.8/qpluginloader.html](http://qt-project.org/doc/qt-4.8/qpluginloader.html)

如果您需要/想要更细粒度的控制，Qt 还提供了一种使用 QLibrary 动态加载库的方法：http: [//qt-project.org/doc/qt-4.8/qlibrary.html](http://qt-project.org/doc/qt-4.8/qlibrary.html)

更好的是，它们可以跨平台移植。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-04-04T00:58:05.933

这可能不是您想要的，但您可以在应用程序中嵌入脚本语言，例如 Lua。Lua 旨在嵌入到其他程序中，并用作编写插件的脚本语言。我相信将 Lua 解释器添加到您的程序中是相当容易的，尽管我不了解 Lua，所以我不能保证这将是多么有效的解决方案。其他对 Lua 有更多经验的人，请添加关于将 Lua 嵌入另一个应用程序的经验的评论。

当然，这意味着您的插件需要用 Lua 编写。如果你不喜欢 Lua，那么*事实上的*标准 Perl、Python 和 Ruby 解释器都是用 C 编写的，并且可以嵌入到 C 程序中。我知道有许多程序使用这些语言作为脚本语言扩展。

但是，我不知道您在寻找什么，因为您的问题有点模糊。也许有关您希望人们能够使用所述插件做什么的更多信息是合适的。对于某些任务，成熟的脚本语言可能有点矫枉过正。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-10-07T15:36:56.850

我写了一篇关于如何使用动态链接库实现插件系统的文章。本文是从 Windows 程序员的角度编写的，但该技术可以应用于 Linux/Unix 类型的环境。

这篇文章可以在这里找到：http: [//3dgep.com/ ?p=1759](http://3dgep.com/?p=1759 "使用动态链接库创建插件")

要点是，您应该创建一个由主应用程序（核心应用程序）和插件实现隐式链接的“通用”DLL。然后，核心应用程序可以在运行时显式链接和动态加载插件。

本文还展示了如何使用“通用”DLL 在多个 DLL 之间安全地共享类的静态（单例）实例。

本文还展示了如何从 DLL 导出“C”函数或变量，并在运行时在应用程序中使用导出的函数。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-03-04T18:21:03.760

看看[Poco Class Loader](http://pocoproject.org/slides/120-SharedLibraries.pdf)，它对你来说可能很有趣。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-04-04T00:07:37.677

最好使用像 ACE ( [http://www.cs.wustl.edu/~schmidt/ACE.html](http://www.cs.wustl.edu/~schmidt/ACE.html) ) 这样的框架，它可以（尽可能好地）保护您免受平台特定编码的影响。

ACE 包含一个基于共享库的插件框架，您可以使用它来创建动态组装的应用程序。

对于更高级别的抽象，请查看 CIAO ( [http://www.cs.wustl.edu/~schmidt/CIAO.html](http://www.cs.wustl.edu/~schmidt/CIAO.html) ) CORBA 组件模型的开源 C++ 实现。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-04-02T21:29:09.470

我编写了一个插件库[Pugg](http://pugg.sourceforge.net/ "哈巴狗")，它从 dll 文件加载 C++ 类，这是我使用的逻辑：

用户从具有唯一名称的 dll 中导出 ac 函数。此名称必须足够唯一，因为从 dll 加载时无法使用其参数区分函数。

C 函数注册一个或多个称为“驱动程序”的工厂类。每个 Driver 类都与一个字符串相关联。当主应用程序想要创建一个类时，它使用关联的字符串收集相关的工厂类。我还实现了一个版本检查系统来不加载旧插件。

DLL 加载是使用 LoadLibraryA 和 GetProcAddress 函数完成的（Pugg 目前在 Windows 上工作）。

值得一提的是，应该使用相同的编译器和相同的编译选项（发布/调试模式、优化设置、stl 版本等）编译主应用程序和 dll。否则，类的映射可能会出现问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-06-05T13:24:13.760

[这个关于插件架构的播客](http://www.se-radio.net/podcast/2008-07/episode-104-plugin-architectures)也可能很有趣。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-02T06:42:27.860

我使用一个相当幼稚的系统取得了一些成功：

*   为插件创建 API 规范
*   使用单例插件管理器
*   使用基于 LoadLibrary/GetProcAddress 的运行时动态链接
*   实现基于控制反转的事件处理以通知插件

# stored-procedures - iSeries 存储过程 - 如何处理假脱机文件输出？

> ID：708528
> 
> 赞同：0
> 
> 时间：2009-04-02T06:34:37.957
> 
> 标签：stored-procedures, ibm-midrange, rpgle

我们有一个使用 CL 和 RPG 程序组合编写的存储过程。在 iSeries 上本地调用时一切正常。当从外部调用（例如从 SQL 前端）时，RPG 程序无法在它生成的假脱机文件上获得一个 hadle，因为假脱机文件出现在不同的（随机？）作业号和用户下。作业在 QUSRWRK 子系统中以 QUSER 身份运行，但假脱机文件获取连接池中外部建立连接的用户 ID（即 USERA）。

有没有一种方法能够在作业运行时可靠地获取正确的 sppol 文件的句柄（而不是依赖于从该队列中选择最后一个假脱机字段等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-05T17:51:16.550

如果您正在运行存储过程（在作业 QZDASOINIT 中运行），您将无法通过程序状态数据结构访问假脱机输出。这些假脱机文件驻留在名为 user/QPRTJOB 的作业中，其中 user 是运行存储过程的“当前用户”。要访问假脱机文件，请运行 api QSPRILSP 以获取将您指向假脱机文件的结构。

IBM 的信息中心对行为和 API 都有很好的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-21T13:09:18.360

服务器作业（例如，用于 ODBC/JDBC 的数据库服务器实例）在系统用户配置文件下运行。对于存储过程，系统用户通常是 QUSER。在作业中创建的对象通常归作业用户所有。

服务器作业通常**代表**其他用户执行工作。您在建立连接时告诉服务器作业哪个用户。（请注意，在其生命周期内，给定的服务器作业可能代表许多不同的用户工作。）

特别是对于假脱机输出，这是一个问题，因为假脱机子系统的存在时间比我们拥有“Web”的时间还要长，并且在我们有大量用户连接到远程数据库之前。从一个用户切换到另一个用户的行为根本不是假脱机子系统构成的一部分，IBM 等供应商也无法确定假脱机文件何时应归特定作业用户或连接用户所有。（并且假脱机不是数据库连接的主要元素。）

[**IBM 确实通过默认“切换用户”输出收集到名为 QPRTJOB 的作业**](http://pic.dhe.ibm.com/infocenter/iseries/v6r1m0/index.jsp?topic=/rzalu/rzaluqprtjob.htm)中来调整假脱机与用户相关联的输出方式，但它并不完全符合您希望以后的 RPG 程序处理输出的方式。

但是，如果您创建一个生成假脱机输出的存储过程，则该过程可以选择谁拥有输出，从而选择将其保留在同一个作业中。考虑这些可以粘贴到 iSeries Navigator 'Run SQL Scripts' 函数中的示例 CALL：

```
call qsys2.qcmdexc ('OVRPRTF FILE(*PRTF) SPLFOWN(*JOB) OVRSCOPE(*JOB)' , 48);
call qsys2.qcmdexc ('DSPMSGD RANGE(CPF9899) MSGF(QCPFMSG) OUTPUT(*PRINT)' , 51);
call qsys2.qcmdexc ('DLTOVR FILE(*PRTF) LVL(*JOB)' , 28); 
```

如果您将它们作为一组运行，它们会创建假脱机输出，显示 CPF9899 的消息描述的属性。如果您之后检查，您应该会看到 QUSER 现在拥有一个名为 QPMSGD 的假脱机文件，并且它驻留在处理远程数据库请求的 QZDASOINIT 作业中。在这种情况下，该作业中的 RPG 程序可以轻松找到“*LAST”假脱机文件。此外，如果您删除了第一个和最后一个 CALL，现在只运行中间一个，您应该会发现您拥有下一个假脱机文件。

（QUSER 是 IBM 的默认值。如果您的系统使用不同的用户配置文件，请将该用户替换为“QUSER”。）

**推荐：**

更改您的 SP 以在后台处理您需要在作业中捕获的输出之前发出适当的 OVRPRTF 命令，并在生成输出后发出 DLTOVR。

您可以使用与此处显示的命令类似的命令来创建测试过程。尝试不同的 OVRSCOPE() 设置和 FILE(*PRTF) 或专门命名的文件。此外，在覆盖命令之前和之后创建输出，以查看它们的行为有何不同。

请注意，服务器作业可能会在您的 SP 完成后处理不同的用户（或者稍后可能会在作业中调用不同的 SP），因此您需要确保 DLTOVR 运行。（这是保持它接近 OVRPRTF 的原因之一。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-08T19:59:04.207

如果您可以修改 RPG 程序，您可以从[程序状态数据结构](http://publib.boulder.ibm.com/iseries/v5r1/ic2924/books/c092508381.htm)中检索作业信息，而[文件信息数据结构](http://publib.boulder.ibm.com/iseries/v5r1/ic2924/books/c092508378.htm)具有来自打开反馈区域的假脱机文件编号。但是我不确定工作信息是用于 QUSER 工作（不是您需要的）还是用于 USERA 工作（您需要什么）。假脱机文件编号足以处理后续的[Print API](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=/apis/print1.htm)调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T16:17:30.640

我需要更多信息，但我会做一些假设。如果我假设错了，请澄清。

QUSRWRK 行为中的 QUSER 是正确的。您现在正在通过 SQL 服务器（或类似服务器）运行。所有连接都在这些设置下运行。

有几种方法。

1）假设这一切都在一项工作中运行。使用“*”作为工作信息应该可以。

2) 另一个选项是使用 RTVJOBA CURUSER(&ME)。当前用户是登录的人。在这种情况下 USER 将不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T15:28:16.803

作业本身知道或可以找出（请参阅以前的答案），因此，如果所有其他方法都失败，请修改程序以将消息放置在提供所需信息的队列上。闲暇时读一读。

.

# asp.net - 优化 - ASP.NET 应用程序中的电子邮件

> ID：708529
> 
> 赞同：0
> 
> 时间：2009-04-02T06:35:21.857
> 
> 标签：asp.net, web-services, email

快速提问。只是想确认诸如 SMTP 服务器之类的网络调用不会占用任何 CPU 使用率。它只会阻止我的一个请求处理线程，并且触发电子邮件的用户必须等待我的网络服务器完成 SMTP 调用。如果我在另一个线程中发送电子邮件并让用户线程继续，那么我就摆脱了这个问题。对？？？

我的一位同事建议使用单独的自定义 Web 服务，该服务将使用 smtp 服务器发送电子邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T08:01:12.650

我建议将电子邮件排队，然后通过单独的进程（服务或工作线程）发送。最初实施起来要付出更多努力，但从长远来看会有所回报。

电子邮件服务器可能会脱机，或者速度很慢，因此强迫用户等待可能会给他们的应用程序带来不好的体验。

例如，如果您要发送注册验证电子邮件，如果他们在一段时间内（例如 1 天）未进行验证，您可能还需要稍后再发送电子邮件。使用支持排队设计的基础设施，这变得更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T08:48:28.340

我认为您最好的方法是简单地使用 SmtpClient 类的 SendAsync 方法来异步发送电子邮件。

例如：

```
SmtpClient client = new SmtpClient(mySMTPHost);
client.SendAsync(myMailMessage, null); 
```

您甚至可以将委托作为第二个参数传递给 SendAsync 方法，该方法将充当回调，并在 SendAsync 方法完成时被调用。请在[此处](http://msdn.microsoft.com/en-us/library/x5x13z6h.aspx)查看 MSDN 站点上的示例。

这应该为您提供两全其美的优势，因为您可以异步发送电子邮件而不会占用您的主执行线程，同时还避免产生和管理您自己的线程（或编写单独的“服务”）的复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T07:37:33.407

你的理论看起来很合理。发送电子邮件的线程应该将大部分时间花在等待响应或等待操作完成上，这不是 CPU 密集型的，也不应该占用其他线程的 CPU。

对我来说，调用单独的自定义 Web 服务听起来有点像不必要的开销。可以远程调用 SMTP 服务器本身；调用自定义 Web 服务只是添加另一层。但我可能误解了你同事的想法。

# c# - C#：将 CSS 注入 MSHTML 实例的最佳方法？

> ID：708530
> 
> 赞同：3
> 
> 时间：2009-04-02T06:35:35.460
> 
> 标签：c#, internet-explorer-8, browser, code-injection, mshtml

我正在尝试将一些伴随一些其他 HTML 的 CSS 注入到 C# 托管的 WebBrowser 控件中。我正在尝试通过底层的 MSHTML（DomDocument 属性）控件来执行此操作，因为此代码用作完整 IE8 BHO 的各种原型。

问题是，虽然我可以注入 HTML（通过 mydomdocument.body.insertAdjacentHTML）和 Javascript（通过 mydomdocument.parentWindow.execScript），但它完全拒绝了我的 CSS 代码。

如果我将包含要插入的 HTML 的字符串与注入后的目标页面源进行比较，则 MSHTML 的源将包含*除*`<style>`元素及其基础源之外的所有内容。

CSS 通过了 CSS 2.1 的 W3C 验证。它不会做任何太棘手的事情，除了一些背景图像属性将图像直接嵌入到 CSS 中（例如`background-image: url("data:image/png;base64`...），并且注释掉这些行不会改变结果。

更奇怪的是（我不确定这是否相关），上周我对此没有任何问题。这周我又回到了它，在切换了一些在实际注入之前处理要注入的 HTML 的代码之后，它不再起作用了。自然地，我认为我的其中一个更改可能是问题所在，但是在注释掉所有这些逻辑并将其输入一个直字符串之后，HTML 仍然显示为未格式化。

目前我正在注入`<body>`标签，虽然我已经尝试注入`<head>`并且遇到了类似的结果。

在此先感谢您的帮助！

汤姆

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-05T02:53:02.717

最终自己解决了这个问题：

```
mshtml.HTMLDocument test = (mshtml.HTMLDocument)webBrowser1.Document.DomDocument;

//inject CSS
if (test.styleSheets.length < 31) { // createStyleSheet throws "Invalid Argument if >31 stylesheets on page

    mshtml.IHTMLStyleSheet css = (mshtml.IHTMLStyleSheet)test.createStyleSheet("", 0);
    css.cssText = myDataClass.returnInjectionCSS(); // String containing CSS to inject into the page
        // CSS should now affect page

} else {
    System.Console.WriteLine("Could not inject CSS due to styleSheets.length > 31");
    return;
}
```

我没有意识到 createStyleSheet 在文档的 DOM 中创建了一个仍然“活动”的指针......因此您不需要将创建的样式表附加回其父级。我最终通过研究 Javascript 的动态 CSS 代码来解决这个问题，因为实现几乎相同。

# python - Python SAX 解析器说 XML 文件格式不正确

> ID：708531
> 
> 赞同：0
> 
> 时间：2009-04-02T06:35:38.017
> 
> 标签：python, xml, sax

我从 XML 文件中删除了一些我认为不必要的标签。现在，当我尝试解析它时，我的 SAX 解析器会抛出一个错误，并说我的文件格式不正确。但是，我知道每个开始标签都有一个结束标签。文件的开始标签有一个指向 XML 模式的链接。这会造成麻烦吗？如果是这样，那我该如何解决？

编辑：我想我找到了问题所在。我的字符数据包含“<”和“>”字符，大概来自 html 标签。在被解析之后，这些被转换为“<”和“>”字符，这似乎打扰了 SAX 解析器。有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T06:42:50.637

我建议将这些标签放回原处并确保它仍然有效。然后，如果你想把它们拿出来，一次一个地做，直到它坏掉。

但是，我质疑将它们取出来是否明智。如果它是您的 XML 文件，您应该更好地理解它。如果它是第三方 XML 文件，你真的不应该摆弄它（除非你更好地理解它:-)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T06:38:48.433

sax 解析器是否没有提供有关*它*认为格式不正确的详细信息？

您是否尝试将文件加载到 XML 编辑器中并在那里进行检查？其他 XML 解析器是否接受它？

无论 XML 格式是否正确，架构都不应更改；它可能会改变它是否*有效*。请参阅[wikipedia entry for XML well-formedness](http://en.wikipedia.org/wiki/Well-formed_XML_document)了解更多信息，或查看[XML 规范](http://www.w3.org/XML/Core/#Publications)了解更多详细信息 :)

编辑：要在文本中表示“&”，您应该将其转义为`&amp;`

所以：

```
&lt 
```

应该

```
&amp;lt 
```

（假设你真的想要＆符号，l，t）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T18:32:53.827

我第二次建议尝试使用另一个 XML 解析器来解析它。这应该表明它是错误的文档还是解析器。

此外，实际的错误消息可能很有用。例如，一个相当普遍的问题是 xml 声明（如果使用，它是可选的）必须是第一件事——在它之前甚至不允许有空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-03T21:31:39.550

如果您没有 XML 编辑器，您可以将其加载到 Firefox 中。Firefox 会显示错误。

# c# - 对象引用丢失，但保留的资源保留

> ID：708539
> 
> 赞同：2
> 
> 时间：2009-04-02T06:40:07.727
> 
> 标签：c#

```
IndentedTextWriter tw = new IndentedTextWriter(internalTW, "    "); 
```

'tw' 引用的对象丢失，但相关资源未在此处处理

```
 OleDbConnection con = new OleDbConnection(conStr);
 OleDbCommand cmd = new OleDbCommand(cmd1, con); 
```

'cmd' 引用的对象丢失，但相关资源未在此处处理

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T06:42:33.960

尝试

```
using (IndentedTextWriter tw = new IndentedTextWriter(internalTW, "    ")) {
  // use it here
} 
```

分别

```
using (OleDbConnection con = new OleDbConnection(conStr))
using (OleDbCommand cmd = new OleDbCommand(cmd1, con)) {
  // use it here
} 
```

在`using`块的末尾，`Dispose()`调用对象并且应该释放资源......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T06:44:35.533

这些类型都实现了`IDisposable`，因此**调用者有责任**`Dispose()`像这样调用

```
using(var tw = new IndentedTextWriter(internalTW, "    ")) {
    // do something with tw
} 
```

或通过显式调用`Dispose()`块`finally`。

# cakephp - 我可以使用在表单中输入的值作为列在 CakePHP 中动态创建表吗？

> ID：708543
> 
> 赞同：1
> 
> 时间：2009-04-02T06:42:22.010
> 
> 标签：cakephp

我可以使用基于网页中输入的值创建的列在数据库中动态创建表吗？

实际上我需要创建一个应用程序，用户可以使用它来创建表单和模板，通过邮寄链接从其他人那里获取数据并将它们存储在数据库中。每个用户可以创建具有不同字段的不同表单并将其发送给许多人，这些人反过来填写数据并提交表单。那么如何存储数据，因为每个表单都有不同的字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T19:11:30.050

与其动态创建表，不如看看这些数据如何在静态表中表示。

怎么样：

*   一个名为“forms”的表，其中包含“id”、“user_id”、“created”、“modified”等。
*   一个名为“字段”的表，其中包含“id”、“form_id”、“type”、“label”、“required”、“properties”等。
*   一个名为 'answers' 的表格，其中包含 'id'、'form_id'、'field_id'、'answer' 等。

这样你就可以依赖连接而不是执行大量的结构化 SQL。你的理智会感谢你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T07:02:21.590

是的，你可以这样做。这不是 cakePHP 特有的：您只需要知道用于创建和删除列的 SQL 代码，并将该 SQL 放入您的 query() 调用中。

[这个页面](https://dev.mysql.com/doc/refman/5.5/en/alter-table.html)是你的朋友。

你是否应该这样做是另一回事；通常，您不应在运行时修改数据库或表结构 - 仅在安装或升级期间。例如，如果您需要实现的是允许为用户配置文件或类似的东西创建自定义字段，那么在运行时修改表结构不是答案。您要做的是有一个包含所有自定义字段的单独表，以及一个包含所有值以及字段 ID 和用户 ID 的表。那将是使之正常化的正确方法；是的，它确实涉及三个表而不是一个，但它比将列 user_customfield1、user_customfield2、user_customfield3 都放在一个表中并在运行时修改该结构要好。

# c# - .NET 中的动态编译插件

> ID：708550
> 
> 赞同：1
> 
> 时间：2009-04-02T06:44:28.183
> 
> 标签：c#, .net, dynamic, plugins

是否有可能我可以将我的一些代码以非编译形式与我的应用程序一起使用，然后即时对其进行更改，然后应用程序就可以继续使用新版本？

如果有可能（我偷偷知道它正在使用 CodeDOM），是否有任何问题需要注意使用这种可插入性方法（除了代码保护问题）？

有没有我可以重复使用的示例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T06:48:29.827

您已经说过您知道如何使用 CodeDOM - 为什么不直接使用它呢？

如果您对它是 C# 代码感到满意，那么`CSharpCodeProvider`它的工作令人钦佩。如果您感觉更冒险，您可能需要考虑[Boo](http://boo.codehaus.org) -[阅读 Ayende Rahien 的关于在 Boo 中构建 DSL 的书以](http://manning.com/rahien/)获取更多信息和建议。

对于使用示例，您可以从我的[C# in Depth 网站](http://csharpindepth.com/Downloads.aspx)`CSharpCodeProvider`下载 Snippy 。基本上，Snippy 允许您输入代码片段并运行它，而无需声明一个类等。它除了构建和运行代码之外所做的事情不多，所以它是一个相当方便的示例 :)

有关更多示例，[请在 Stack Overflow 上搜索 CSharpCodeProvider](http://www.google.co.uk/search?q=site:stackoverflow.com+csharpcodeprovider)。这是一个简短但完整的代码——“hello world”的代码被编译然后执行。

```
using System;
using System.CodeDom.Compiler;
using Microsoft.CSharp;

class Test
{
    public static void Main(string[] args)
    {
        string code = @"
using System;

class CodeToBeCompiled
{
    static void Main()
    {
        Console.WriteLine(""Hello world"");
    }
}";

        var codeProvider = new CSharpCodeProvider();
        var parameters = new CompilerParameters
        {
            GenerateExecutable = true,
            OutputAssembly = "Generated.exe"
        };
        var results = codeProvider.CompileAssemblyFromSource
            (parameters, new[] { code });
        results.CompiledAssembly.EntryPoint.Invoke(null, null);
    }
} 
```

# broadcasting - 广播

> ID：708552
> 
> 赞同：0
> 
> 时间：2009-04-02T06:44:52.880
> 
> 标签：broadcasting

好的，为了广播，我创建了一个套接字：

```
 notifySock = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp); 
```

为了将我的计算机的主机名发送到连接到同一局域网的所有其他计算机，我使用了 send(Byte[] buffer) 方法：

```
 notifySock.Send(hostBuffer); 
```

hostBuffer 包含我的计算机的主机名。

但是，因为我使用的是“数据报”套接字类型，所以我需要格式化我需要发送的数据。如果可能，请提供我必须放在我输入的两行代码之间的代码，以创建套接字并发送数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T06:46:48.180

对于来自用户应用程序的广播，通常使用[UDP 。](http://en.wikipedia.org/wiki/User_Datagram_Protocol)您需要设计一个合适的协议，即一种将您要发送到UDP 数据包中的信息格式化的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T07:39:49.830

在您的示例中，您没有指定要发送给谁。你需要类似的东西：

```
UdpClient notifySock = new UdpClient(endPoint);  
notifySock.Send(buffer, buffer.Length, new IPEndPoint(IPAddress.Broadcast, 1234)); 
```

为了让 LAN 上的其他主机接收到它们必须在 UDP 端口 1234 上侦听。

# c++ - 编译错误 C++：无法推断“T”的模板参数

> ID：708555
> 
> 赞同：2
> 
> 时间：2009-04-02T06:47:07.443
> 
> 标签：c++, templates, serialization, compiler-errors

我正在尝试读取二进制数据以将结构加载回内存，以便我可以编辑它们并将它们保存回 .dat 文件。

readVector() 尝试读取文件，并返回已序列化的向量。但是当我尝试运行它时，我得到了这个编译错误。我的模板做错了什么？

********* 编辑 ******************

代码：

```
// Project 5.cpp : main project file.

#include "stdafx.h"
#include <iostream>
#include <fstream>
#include <string>
#include <vector>
#include <algorithm>

using namespace System;
using namespace std;
#pragma hdrstop

int checkCommand (string line);

template<typename T>
void writeVector(ofstream &out, const vector<T> &vec);

template<typename T>
vector<T> readVector(ifstream &in);

struct InventoryItem {
    string Item;
    string Description;
    int Quantity;
    int wholesaleCost;
    int retailCost;
    int dateAdded;
} ;

int main(void)
{
    cout << "Welcome to the Inventory Manager extreme! [Version 1.0]" << endl;

    ifstream in("data.dat");

    vector<InventoryItem> structList;

    readVector<InventoryItem>( in );

    while (1)
    {

        string line = "";

        cout << endl;
        cout << "Commands: " << endl;
        cout << "1: Add a new record " << endl;
        cout << "2: Display a record " << endl;
        cout << "3: Edit a current record " << endl;
        cout << "4: Exit the program " << endl;
        cout << endl;
        cout << "Enter a command 1-4: ";

        getline(cin , line);

        int rValue = checkCommand(line);
        if (rValue == 1)
        {
            cout << "You've entered a invalid command! Try Again." << endl;
        } else if (rValue == 2){ 
            cout << "Error calling command!" << endl;
        } else if (!rValue) {
            break;
        }
    }

    system("pause");

    return 0;
}

int checkCommand (string line)
{
    int intReturn = atoi(line.c_str());
    int status = 3;

    switch (intReturn)
    {
        case 1:
            break;
        case 2:
            break;
        case 3:
            break;
        case 4:
            status = 0;
            break;
        default:
            status = 1;
            break;
    }
    return status;
}

template<typename T>
void writeVector(ofstream &out, const vector<T> &vec)
{
    out << vec.size();

    for(vector<T>::const_iterator i = vec.begin(); i != vec.end(); i++)
    {
        out << *i;
    }
}

ostream& operator<<(std::ostream &strm, const InventoryItem &i) {
  return strm << i.Item << " (" << i.Description << ")";
}

template<typename T>
vector<T> readVector(ifstream &in)
{
    size_t size;
    in >> size;

    vector<T> vec;
    vec.reserve(size);

    for(int i = 0; i < size; i++)
    {
        T tmp;
        in >> tmp;
        vec.push_back(tmp);
    }

    return vec;
} 
```

编译器错误：

```
1>------ Build started: Project: Project 5, Configuration: Debug Win32 ------
1>Compiling...
1>Project 5.cpp
1>.\Project 5.cpp(124) : warning C4018: '<' : signed/unsigned mismatch
1>        .\Project 5.cpp(40) : see reference to function template instantiation 'std::vector<_Ty> readVector<InventoryItem>(std::ifstream &)' being compiled
1>        with
1>        [
1>            _Ty=InventoryItem
1>        ]
1>.\Project 5.cpp(127) : error C2679: binary '>>' : no operator found which takes a right-hand operand of type 'InventoryItem' (or there is no acceptable conversion)
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(1144): could be 'std::basic_istream<_Elem,_Traits> &std::operator >><std::char_traits<char>>(std::basic_istream<_Elem,_Traits> &,signed char *)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(1146): or       'std::basic_istream<_Elem,_Traits> &std::operator >><std::char_traits<char>>(std::basic_istream<_Elem,_Traits> &,signed char &)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(1148): or       'std::basic_istream<_Elem,_Traits> &std::operator >><std::char_traits<char>>(std::basic_istream<_Elem,_Traits> &,unsigned char *)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(1150): or       'std::basic_istream<_Elem,_Traits> &std::operator >><std::char_traits<char>>(std::basic_istream<_Elem,_Traits> &,unsigned char &)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(155): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(std::basic_istream<_Elem,_Traits> &(__cdecl *)(std::basic_istream<_Elem,_Traits> &))'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(161): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(std::basic_ios<_Elem,_Traits> &(__cdecl *)(std::basic_ios<_Elem,_Traits> &))'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(168): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(std::ios_base &(__cdecl *)(std::ios_base &))'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(175): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(std::_Bool &)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(194): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(short &)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(228): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(unsigned short &)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(247): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(int &)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(273): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(unsigned int &)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(291): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(long &)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(309): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(__w64 unsigned long &)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(329): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(__int64 &)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(348): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(unsigned __int64 &)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(367): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(float &)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(386): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(double &)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(404): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(long double &)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(422): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(void *&)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\istream(441): or       'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::operator >>(std::basic_streambuf<_Elem,_Traits> *)'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        while trying to match the argument list '(std::ifstream, InventoryItem)'
1>Build log was saved at "file://c:\Users\Owner\Documents\Visual Studio 2008\Projects\Project 5\Project 5\Debug\BuildLog.htm"
1>Project 5 - 1 error(s), 1 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

哦，我的上帝......我修复了我认为的那个错误，现在我又得到了一个。请你也帮我解决这个问题！这到底是什么意思？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T06:50:34.800

```
readVector( in ); // error C2783 
```

这应该是：

```
readVector<InventoryItem>( in ); 
```

依赖于参数的查找无助于推断模板，因此需要明确的规范。

```
in >> tmp; 
```

此行要求您具有以下功能：

```
istream& operator>>(ostream& is, InventoryItem& item) {
    // parse and read in the data to item
    return is;
} 
```

输入定义（我认为 strager 在您的另一个问题中提供了这个）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T06:51:31.367

当您调用 readVector 时，它通常会尝试从参数中推断出模板参数。

在您的示例中，唯一的模板部分是返回值，因此无法隐式计算出来。

改变你的电话

```
readVector(in) 
```

到

```
vector<InventoryItem> structList = readVector<InventoryItem>(in); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-02T07:02:43.040

我认为正在发生的事情是 ofstream 不知道如何序列化您的结构。

您可能需要为 InventoryItem 定义 >> 和 << 运算符：

```
ofstream& operator << ( ofstream& ofs, InventoryItem& );
ifstream& operator >> ( ifstream& ifs, InventoryItem& ); 
```

编辑：：

这是一个完整的示例。在编辑之前，我对 ifstream 几乎没有兴趣。

 `````
#include < iostream >
#include < fstream >
#include < string >

struct InventoryItem{
    std::string name;
    int id;
    float price;
};

using std::ofstream;
using std::ifstream;

ofstream& operator << (ofstream& ofs, InventoryItem& ii)
{
    ofs << ii.name << std::endl 
        << ii.id << std::endl
        << ii.price << std::endl;
    return ofs;
}

ifstream& operator >> ( ifstream& ifs, InventoryItem& ii )
{
    ifs >> ii.name >> ii.id >> ii.price;
    return ifs;
}

void printItem(const InventoryItem& ii)
{
    std::cout << "Name: " << ii.name << std::endl
        << "ID: " << ii.id << std::endl
        << "Price: " << ii.price << std::endl;
}

int main()
{
    ofstream outfile("testout.txt");
    InventoryItem list[] = { {"Item1", 1, 1.5}, {"Item2", 2, 2.5} };

    outfile << list[0] << list[1];
    outfile.close();

    std::ifstream infile("testout.txt");
    InventoryItem list2[2]; 

    infile >> list[0] >> list[1];

    printItem(list[0]);
    printItem(list[1]);

    return 0;
} 
````  `预期的输出是：

```
    名称：项目1
    编号：1
    价格：1.5
    名称：项目2
    编号：2
    价格：2.5

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T13:11:06.337

当编译器无法解析模板参数的类型时会发生此错误。

这是我的代码中的一个示例：

```
template QSP<VarDataInterface<qint64>> VarDataManager::interpolateFromDB( 
const DBWrapper & _db, const QString &variablePath, const QString &_unit, 
const DBWrapper * _dbRef /*= nullptr*/, 
const QString &refPath /*= QString::null*/, 
const QString &_unitRef /*= QString::null*/ );

template QSP<VarDataInterface<QString>> VarDataManager::interpolateFromDB( 
const TA5::IDBWrapper & _db, const QString &variablePath, 
const QString &_unit, const TA5::IDBWrapper * _dbRef /*= nullptr*/, 
const QString &refPath /*= QString::null*/, const QString &_unitRef /*= QString::null*/ );

template< class TYPE >
QSP<VarDataInterface<TYPE>> VarDataManager::interpolateFromDB( 
const DBWrapper & _db,   const QString &variablePath, const QString &_unit, 
const DBWrapper * _dbRef /*= nullptr*/, 
const QString &refPath /*= QString::null*/, 
const QString &_unitRef /*= QString::null*/ )
{
    const Header dbVar = _db.getDatabaseVariable( variablePath );

    if( !dbVar.isValid() )
        return QSP<VarDataInterface<TYPE>>(nullptr);

    TVariableHeader dbVarRef;
    if( _dbRef != nullptr )
    {
        //
    }
    else
    {
        //
    }

     return QSP<VarDataInterface<TYPE>>();
} 
```

在这里使用：

在第一次尝试中，我写了这个

```
m_Var = VarDataManager::interpolateFromDB(VarDataManager::getMainDB(), treeitem->text(0), QString::null, nullptr, QString::null, QString::null); 
```

并得到错误 C2783。解决了这个

```
m_Var = VarDataManager::interpolateFromDB<double>(VarDataManager::getMainDB(), treeitem->text(0), QString::null, nullptr, QString::null, QString::null); 
```

高温高压

# postgresql - 防止 PostgreSQL 中的递归触发器

> ID：708562
> 
> 赞同：28
> 
> 时间：2009-04-02T06:50:22.147
> 
> 标签：postgresql, recursion

如何防止触发器的递归执行？假设我想在会计科目表上构建一个“可树”的描述。所以我所做的是当插入/更新新记录时，我会更新父记录的`down_qty`，所以这会递归地触发更新触发器。

现在，我的代码没问题——我把它放在`UPDATE`触发器的第一行：

```
-- prevents recursive trigger
if new.track_recursive_trigger <> old.track_recursive_trigger then
    return new;
end if; 
```

当我需要更新父记录的数量时，这是来自我的触发器的示例代码：

```
update account_category set 
    track_recursive_trigger = track_recursive_trigger + 1, -- i put this line to prevent recursive trigger
    down_qty = down_qty - (old.down_qty + 1)
where account_category_id = m_parent_account; 
```

我在想 PostgreSQL 中是否有一种方法可以在不引入新字段的情况下检测递归触发器，类似于 MSSQL 的`trigger_nestlevel`.

**[编辑]**

我在树内循环，我需要将`down_qty`每个树`account_category`的根部冒泡。例如，我插入一个新的帐户类别，它需要增加`down_qty`其父`account_category`类的 ，同样当我更改帐户类别的父类时`account_category`，我需要减少其`down_qty`上`account_category`一个父类的`account_category`。尽管我认为可以，但我不会让 PostgreSQL 执行递归触发器。我之前使用了 MSSQL，其中触发递归深度级别仅限于`16`级别。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-01-10T16:14:04.457

这就是我在 PostgreSQL 9.2 中所做的，尽管我必须承认我没有发现这种方法被记录在案。`pg_trigger_depth()` [这里记录](http://www.postgresql.org/docs/9.2/static/functions-info.html)了一个函数，我用它来区分触发器中的原始调用和嵌套调用。

```
CREATE TRIGGER trg_taxonomic_positions
AFTER INSERT OR UPDATE OF taxonomic_position
ON taxon_concepts
FOR EACH ROW
WHEN (pg_trigger_depth() = 0)
EXECUTE PROCEDURE trg_taxonomic_positions() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-02T07:48:28.530

在 pg 中，跟踪触发器递归取决于您。

> 如果触发器函数执行 SQL 命令，那么这些命令可能会再次触发触发器。这称为级联触发器。级联级别的数量没有直接限制。级联可能导致对同一触发器的递归调用；例如，一个 INSERT 触发器可能会执行一个在同一个表中插入额外行的命令，从而导致 INSERT 触发器再次被触发。在这种情况下避免无限递归是触发器程序员的责任。

[https://www.postgresql.org/docs/13/trigger-definition.html](https://www.postgresql.org/docs/13/trigger-definition.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-10-14T03:55:12.283

在触发器定义的开始，您可以禁用该特定表上的触发器，并在最后重新启用它们（并确保异常不会在预期之前终止执行！）。这有很多深洞，但可能适用于一些轻量级的实现。请注意，对于此实现，您还需要权限来禁用触发器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T22:52:38.477

为避免无限递归，请[在此处查看我的答案](https://stackoverflow.com/a/14092775/905902)。正如其他人评论的那样，如果您的数据结构是一棵真正的树（根将没有父级）并且递归将始终在根处**停止。**对于只有一个父*指针的**节点*，无限递归的唯一方法是存在循环。*（我链接中的方法最多*访问任何节点一次）

 **# time-management - 设计对应用交付时间的影响

> ID：708566
> 
> 赞同：0
> 
> 时间：2009-04-02T06:51:27.777
> 
> 标签：time-management

一些开发人员在接到任务时会直接进入 IDE 并以很少的设计开始编码。他们可能在编码时对应用程序的去向有所了解。我是这些开发人员之一。我这样做是因为我觉得如果我花很多时间来设计我的应用程序交付时间会比我只是坐着编码我的想法要长得多。我的问题是应用程序设计如何影响项目的交付时间，它是否比敏捷方式编码有很大优势？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T07:04:31.130

给你举个例子，当你想旅行时，如果你的目的地在你的城镇附近或在你的城镇，你可以马上开始。当你想去另一个国家旅行时，你需要先把自己打包。

设计是为了准备，没有它，你不能走得太远（或走错路）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T07:06:45.150

这不是一个非黑即白的情况：对于一些项目来说，最好是跳进去开始编码，对于一些项目来说，最好有一个广泛的计划阶段，而对于另一些项目来说，这不是很明确。

如果项目小而简单，只有一个开发人员在做，而且如何构建它是显而易见的，他们可以在脑海中想象它的各个方面，那么他们可以很好地跳入并开始设计。

当您有多个开发人员时，或者当项目足够大且足够复杂以至于开发人员无法从一开始就知道它的工作方式时，就需要进行更广泛的规划，因为了解它的所有方面太复杂了在你的脑海里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-02T07:06:59.097

仅当您自己工作时，这种方法才真正有效。如果你必须在一个团队中工作，那么制定一个好的计划很重要，这样其他人都知道你认为的最终目标是什么。这不会降低创造力，它只是让您确保每个人都在同一页面上，并且减少了混淆的机会。 [（来源：][[yang.id.au](https://scott.yang.id.au/file/images/dilbert-agile-programming.png)][）][![Dilbert 谈敏捷](https://i.stack.imgur.com/maEpX.png)](https://i.stack.imgur.com/maEpX.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T07:13:27.803

你所描述的内容只有在你写的东西很好理解和包含的情况下才会有效。如果它与您编写的其他软件相似，则不需要新设计，因为您可以重复使用旧设计。但是，如果它是全新的东西，动态设计将会变得昂贵。你会发现自己重写了太多的代码，或者更糟的是，被糟糕的架构卡住了，这会减慢你的速度。同样，如果您需要可扩展代码，则需要提前计划。如果您需要它与其他人的组件一起使用，则需要提前计划。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-01T05:57:10.237

只是为您的方程式场景添加一条思路，让我在以后贡献一点：我在一家名为 YES INTERNATIONAL CORPORATION (www.yesintl.com.au) 的公司工作 有时，确实会发生开发人员之前可能已经开发过一些东西所以在那种情况下，设计已经在脑海中。例如，我过去开发过数据库解决方案，当我坐下来开始开发项目时，与我们的竞争对手相比，这使我们成为一个交付速度非常快的公司。随着时间的推移，更多的经验会让你变得超级完美......我希望这会有所帮助......安迪

# c++ - 静态公共成员函数 (C++)

> ID：708573
> 
> 赞同：0
> 
> 时间：2009-04-02T06:52:34.047
> 
> 标签：c++

我需要计算我的公共成员函数在循环中创建新数据的次数。每次读取数据时，都会将其保存到私有成员变量中。没有任何内容被覆盖。

```
// my classType.h
const int ImpliedIndex = 1000;

class classType
{
private:
  char privateMember[ImpliedIndex];
  char privateMember2[ImpliedIndex];
public:
  static void myMemberCounter;
  void printMyInformation():
  void mySupplier(const char[] );
  ...
};

//classType.cpp
int globalCounter = 0;

void classType::printMyInformation()
{
   ...
   cout << privateMember << endl;
   cout << globalCounter++ << endl;
}
void classType::mySupplier( const char buff[] )
{
   strcpy( privateMember, buff );

}

// The main should clear things up a bit.
// main.cpp

int main()
{
    while ( !inFile.eof() )
    {   
        for ( int x = 0; x < 20; x++ )
        {
       // do file I/O here
       // save each line of file into an temp array
       // supply temp array with a routine defined in myClass
       // re-use temp array until we run out of file
        }
    }    
//close file 
```

我需要将我的 20 更改为变量。请注意，在 classType 中，我使用 globalCounter 来检索类型的数量。

我想做的是，`globalCounter = memberCounter;`

但是我必须重新声明这两个变量，并且不能`myClass[ImpliedIndex].memberCounter`与赋值运算符 (=) 或二进制插入运算符 (<<) 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T07:20:03.950

这一行：

```
static void myMemberCounter; 
```

应该生成编译时错误。它看起来像一个变量，但有 type `void`，这没有意义。

如果你想要一个静态（“类变量”）计数器，你应该使用像`int`. 然后，该类很容易使用该计数器来计算实例的数量，只需在构造函数中递增计数器即可。外部世界可以通过添加`public`类函数来读取计数来返回它。

# linux - 通过 Find 命令在 AWK 上应用 Unix 的 Head

> ID：708577
> 
> 赞同：2
> 
> 时间：2009-04-02T06:53:34.043
> 
> 标签：linux, unix, find, awk, head

我想使用以下代码段在 find 给出的文件列表中输出前 10 行 AWK 命令：

```
$ find . -name "*.txt" -print -exec awk '$9 != ""'  \| head -n10 {} \; 
```

另请注意，我想打印出正在处理的文件名。

但是为什么我会收到这样的错误：

```
awk: cmd. line:2: fatal: cannot open file `|' for reading (No such file or directory)
./myfile.txt 
```

正确的方法是什么？

我尝试在管道之前不使用反斜杠。它仍然给出了一个错误：

```
find: missing argument to `-exec'
head: cannot open `{}' for reading: No such file or directory
head: cannot open `;' for reading: No such file or directory 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T07:41:50.403

当使用 find 的 -exec 运行命令时，您不会得到像管道运算符 (|) 这样的所有漂亮的 shell 东西。如果您愿意，您可以通过显式运行子shell 来重新获得它们，例如：

寻找 。-name '*.txt' -exec /bin/sh -c "回显一个名为 {} | head -n 15" \; 的文本文件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-03T14:28:08.087

如果您想对 find 中的每个文件运行一个 awk 程序，每次只打印前 10*行*。

```
$ find . -name "*.txt" -print -exec awk '$9 != "" && n < 10 {print; n++}' {} \; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T16:44:47.327

根据 Ashawley 的回答：

```
find . -name "*.txt" -print -exec awk '$9 != "" {print; if(NR > 9) exit; }' {} \; 
```

它应该表现更好，因为我们在第 10 条记录后退出 awk。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T07:21:57.937

你也可以这样做：

```
find . -name '*txt' -print -exec awk 'BEGIN {nl=1 ;print FILENAME} $9 !="" {if (nl<11) { print $0 ; nl = nl + 1 }}' {}  \; 
```

没有`head`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-02T07:44:55.667

仅使用`awk`应该有效：

```
find . -name "*.txt" -print -exec awk '{if($9!=""&&n<11){print;n++}}' {} \; 
```

# php - PHP APC 和 Imagick 与 cpanel

> ID：708584
> 
> 赞同：0
> 
> 时间：2009-04-02T06:54:24.480
> 
> 标签：php, linux, imagemagick, apc, cpanel

我目前购买了一台托管在 iWeb 上的专用服务器，并由他们管理。

我最近在注册后要求添加`php_apc` 和添加`php_imagick`到可用的库中。在他们看来，这是不可能的，因为 cPanel 不支持它。

我显然需要自己这样做......安装这两个库是否有任何风险？如果有的话会引发什么样的问题？以防我必须自己调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T07:33:09.270

将 Imagemagick 安装到您的系统本身不会有太大问题。

然而，为 PHP 添加对它和 APC 的支持可能是一个棘手的过程。您最好不要再使用 cPanel 提供的 PHP 并自己安装 PHP，它将进入 /usr/local，并自己运行配置脚本，编译您需要的任何扩展。这意味着您需要自己使 PHP 保持最新，但这也意味着您不会在下次 cPanel 升级它时清除所有对它的自定义。

如果有更好的建议，我也很想听听。

# php - 为什么即使报告为已发送电子邮件，也不会通过 PHP 发送电子邮件？

> ID：708596
> 
> 赞同：0
> 
> 时间：2009-04-02T07:03:24.660
> 
> 标签：php, email, cakephp

我正在尝试用 PHP 发送邮件。下面给出了我用于在[CakePHP](http://en.wikipedia.org/wiki/CakePHP)中发送邮件的代码。我在网页中收到“简单电子邮件已发送”消息，但邮件未发送到我的收件箱。我错过了什么吗？

和字段`to`中的值使用在用户界面中输入的值进行设置。`subject``link`

```
 $this->set('to',$this->params['form']['to']);
    $this->set('subject',$this->params['form']['subject']);
    $this->set('link',$this->params['form']['link']);
    $this->Email->to      = to;
    $this->Email->subject = subject;
    $this->Email->from    = 'someperson@somedomain.com';
    $this->Email->delivery= 'mail';
    $this->Email->sendAs='text';
    $this->Email->template = 'simple_message';
    //$this->Email->send(link);
    if ( $this->Email->send(link) ) {

        $this->Session->setFlash('Simple email sent');
    } else {
        $this->Session->setFlash('Simple email not sent');
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T07:24:03.237

在 Linux 系统上，您可能已经安装了 sendmail 脚本，PHP 将使用它。如果这是您所拥有的并且它不起作用，那么我会在您的 Linux 系统本身中查找邮件配置问题。

在 Windows 系统上，您需要配置您希望 PHP 向其发送邮件的 SMTP 服务器。执行此操作的正常方法是在 php.ini 中。 [这方面的说明在这里](http://au2.php.net/manual/en/mail.configuration.php)。

除非你设置了 Email->delivery，这对于 CakePHP 应该是一样的——它应该默认为 PHP 使用的任何东西。

注意：如果您使用自己的 Linux 安装，可能只是您的 ISP 阻止了您的邮件服务器正在使用的端口 25。在这种情况下，您需要配置 linux 以将电子邮件路由到您的 ISP 的电子邮件服务器。 [也许这会有所帮助？](http://www.freelock.com/kb/Postfix_relayhost)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T14:44:57.233

您需要使用变量语法来设置“to”行和“subject”行。这些行应该读

```
$this->Email->to      = to;
$this->Email->subject = subject; 
```

另外，我相信电子邮件组件中有一个名为 error 的属性（我目前在文档中找不到它）可以帮助您调试。这可能并不完全正确；我将电子邮件组件与 SMTP 一起使用，并且电子邮件组件设置了一个名为`smtpError`. 我相信有一个调用`error`可以用来检查错误——它应该包含可以告诉你问题所在的代码。

如果这是一个不正确的陈述，您可以`var_dump( $this->Email );`在尝试发送电子邮件后随时执行。这将转储对象的全部内容，因此您可以查看是否正确设置了属性，它应该可以帮助您找出错误属性的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T10:15:28.770

从什么时候'to'（第 4 行）成为有效的目标电子邮件地址？

# django - Django DB，查找项目都在子集中的类别

> ID：708598
> 
> 赞同：0
> 
> 时间：2009-04-02T07:03:46.780
> 
> 标签：django, django-models

我有两个模型：

```
class Category(models.Model):
    pass

class Item(models.Model):
    cat = models.ForeignKey(Category) 
```

我正在尝试返回所有该类别的所有项目都属于给定*项目*ID 子集的所有类别（已修复，谢谢）。例如，与该类别关联的所有项目在集合 [1,3,5] 中具有 id 的所有类别。

使用 Django 的查询语法（从 1.1 beta 开始）如何做到这一点？理想情况下，所有工作都应该在数据库中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T10:24:56.923

假设您要求所有项目都在以下集合中：

```
allowable_items = set([1,3,4]) 
```

一个蛮力解决方案是检查每个类别的 item_set，如下所示：

```
categories_with_allowable_items = [
    category for category in 
    Category.objects.all() if
    set([item.id for item in category.item_set.all()]) <= allowable_items
] 
```

但我们不必检查所有类别，因为 categories_with_allowable_items 始终是与所有具有 ids 在allowable_items 中的项目相关的类别的子集......所以这就是我们必须检查的全部（这应该更快）：

```
categories_with_allowable_items = set([
    item.category for item in
    Item.objects.select_related('category').filter(pk__in=allowable_items) if
    set([siblingitem.id for siblingitem in item.category.item_set.all()]) <= allowable_items
]) 
```

如果性能不是真正的问题，那么这两者中的后者（如果不是前者）应该没问题。如果这些表非常大，您可能必须想出一个更复杂的解决方案。另外，如果您使用的是特别旧的 python 版本，请记住您必须导入 sets 模块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T17:44:56.513

我玩过这个。如果 QuerySet.extra() 接受一个“有”参数，我认为可以在 ORM 中使用 HAVING 子句中的一些原始 SQL 来完成它。但事实并非如此，所以我认为如果你想让数据库完成这项工作，你必须用原始 SQL 编写整个查询。

**编辑：**

这是让您部分到达那里的查询：

```
from django.db.models import Count
Category.objects.annotate(num_items=Count('item')).filter(num_items=...) 
```

问题在于，要使查询正常工作，“...”需要是一个相关的子查询，它针对每个类别查找其在 allowed_items 中的项目数。如果 .extra 有一个“有”的论点，你会这样做：

```
Category.objects.annotate(num_items=Count('item')).extra(having="num_items=(SELECT COUNT(*) FROM app_item WHERE app_item.id in % AND app_item.cat_id = app_category.id)", having_params=[allowed_item_ids]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-04T22:59:02.077

```
Category.objects.filter(item__id__in=[1, 3, 5]) 
```

Django 在没有外键的模型上创建反向关系。您可以使用其相关名称（通常只是模型名称小写，但可以手动覆盖）、两个下划线和您要查询的字段名称对其进行过滤。

# sql - SQL 可移植性有多重要？

> ID：708601
> 
> 赞同：8
> 
> 时间：2009-04-02T07:05:17.963
> 
> 标签：sql, portability

在我看来，从个人经验和 SO 问题和答案来看，SQL 实现差异很大。SQL 问题的首要问题之一是：您使用的是什么 dbms？

在大多数情况下，使用 SQL 有多种方法可以构建给定的查询，即使使用相同的方言也是如此。但我发现有趣的是，各种方法的相对可移植性经常没有被讨论，也没有被高度重视。

但即使不考虑任何给定应用程序可能会或不会被转换的可能性，我认为我们更希望我们的技能、习惯和模式尽可能便携。

在您使用 SQL 的过程中，您对标准 SQL 语法的偏好程度如何？你如何积极地避免适当的变化？请在回答时不参考专有偏好，以便感知更好的性能，大多数人会承认这通常是一种足够合理的辩护。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-02T07:21:09.813

我投票反对标准/供应商独立的 sql

*   只有很少的数据库实际切换。
*   没有一个数据库完全符合当前的 sql 标准。因此，即使您符合标准，您也不是独立于供应商的。
*   供应商差异超出了 sql 语法。锁定行为是不同的。隔离级别不同。
*   数据库测试非常困难且尚未开发。如果您不是绝对需要它，则无需通过在游戏中投入多个供应商来使其变得更加困难。
*   供应商特定的调整有很多功能。（想想“限制”或“分析函数”或“提示”）

所以精髓： - 如果不需要供应商独立性，请专门针对您实际使用的供应商。- 如果需要供应商独立性，请确保谁来支付账单，这将花费金钱。确保每个 rdbms 都可用于测试。并且也使用它 - 将每条 sql 放在一个特殊的层中，该层是可插入的，因此您可以使用数据库的强大功能并与不同的供应商合作 - 只有在纯粹的语法问题不同的地方才符合标准，例如对（外部）连接使用 oracle 表示法与 ANSI 标准语法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-02T07:23:06.657

我们在我们的商店非常重视它。我们不允许非标准 SQL 或扩展，除非它们在所有主要平台上都受支持。即使这样，它们在代码中也被标记为非标准，并且需要证明。

应用程序开发人员不能让他们的查询快速运行，我们有明确的职责分离。查询只能由 DBMS 本身或 DBMS 的 DBA 调整来优化。

真正的数据库，比如 DB2/z :-)，处理标准 SQL 的速度非常快。

我们强制执行此操作的原因是为客户提供选择。他们比我们更不喜欢被锁定在特定供应商中的想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-02T07:31:20.070

根据我的经验，查询可移植性并不是那么重要。我们使用各种数据源（主要是 MSSQL 和 MySQL），但我们知道哪些数据存储在哪里，并且可以相应地进行优化。由于我们控制系统，因此我们决定何时（如果有的话）移动结构并且需要重写查询。

我还喜欢使用某些其他特定于服务器的功能，例如 MySQL 不提供的 SQL Server 中的查询通知。所以，再一次，我们尽可能使用它，而不用担心可移植性。

此外，我们的部分应用程序需要查询架构信息并对其采取行动。在这里，我们再次为不同系统提供特定于服务器的代码，而不是试图将自己限制在最低的公分母上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T07:15:21.637

SQL 可移植性是否可取并没有明确的答案——这在很大程度上取决于具体情况，例如应用程序的类型。

如果应用程序将成为一项服务 - 即只有您托管它，那么显然没有人会关心您的 SQL 是否足够便携，因此只要您没有具体计划放弃它，您就可以放心地忽略它支持您当前的平台。

如果应用程序要安装在多个站点，每个站点都有自己建立的数据库系统，显然 SQL 的可移植性对人们来说非常重要。它可以让你拓宽你的潜在市场，并且可能会让那些对他们的数据库系统持观望态度的客户放心。无论您是想支持这一点，还是只向 Oracle 客户销售产品，还是只向 MySQL/PostgreSQL 客户销售产品，都取决于您和您认为的市场。

如果您使用 PHP 进行编码，那么绝大多数潜在客户可能会期待 MySQL。如果是这样，那么假设 MySQL 没什么大不了的。或者类似地，如果您使用 C#/.NET，那么您可以假设 Microsoft SQL Server。然而，同样存在另一面，因为可能存在一个较小但竞争较弱的 PHP 或 .NET 用户市场，他们希望连接到其他数据库系统而不是通常。

因此，我在很大程度上将此视为市场研究问题，除非在我的第一个示例中，您提供的托管服务对用户无关紧要，在这种情况下，这只是为了您自己的方便。

# sql-server - 我可以使用 SQL Server 标识列来确定插入的行顺序吗？

> ID：708607
> 
> 赞同：7
> 
> 时间：2009-04-02T07:07:10.797
> 
> 标签：sql-server, identity

我需要能够确定哪些行已插入表中的顺序（没有更新）。我可以使用身份列来执行此操作吗？我知道可能存在差距，但是插入顺序是否保证值会增加？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-02T07:11:42.487

基本上是的，只要您不重置它或使用批量复制插入行，或使用[`IDENTITY_INSERT`](http://msdn.microsoft.com/en-us/library/ms188059.aspx). 当然，假设您没有溢出数据类型（这可能令人印象深刻）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T07:11:08.823

是的。任何由删除引起的空白将不会被重用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-02T10:45:13.923

正如 Marc 所讨论的，是的，您可以附带条件

但是，要彻底解决问题，您应该做的是添加一列

```
dteInserted datetime not null 默认 getdate()

```

然后您只需选择按此排序。

我自己会自动将这样的列添加到我正在设计的任何数据库中的任何“数据”表中。现在存储很便宜，并且在某行上为插入日期加上时间戳*总是*有用的。

# search-engine - 你如何建立一个种子文件索引器？

> ID：708611
> 
> 赞同：5
> 
> 时间：2009-04-02T07:09:19.217
> 
> 标签：search-engine, bittorrent

我对像 torrentz.com 这样的搜索引擎背后的技术很好奇。据我观察，它不托管任何 torrent 文件，而是将您连接到其他托管的服务器。

*   您搜索关键字，它会显示与您的搜索匹配的潜在标题列表。
*   然后您选择其中一个，它会为您提供另一个托管相应 torrent 文件的潜在服务器列表。

我特别感兴趣的是收集和索引所有内容背后的策略：

**他们如何收集然后汇总数据？**
它是一个提交基础服务，每个服务器都提交其内容以进行索引吗？
是爬虫算法吗？如果是这样，您甚至如何开始抓取 piratebay.org 之类的网站？
他们是否有权访问这些其他服务器的数据库？

我对 bittorrent 协议的知识和理解不是很详尽，但是我在网上找到的文档更多地指向了构建跟踪器服务所涉及的过程，这并不是我感兴趣的。任何见解和推荐阅读材料表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T07:23:38.417

开始索引他们的 RSS 提要并从中收集数据。下一步将是门户网站（如 Mininova、tpb 等）页面的索引，但要注意这样做可能会被禁止（基于 ip），因为这会引发从他们的服务器请求的大量数据（我不要认为他们对此感到太高兴）..

那就是说我怀疑他们是否有权访问其他服务器的数据库，而是它正在爬行+ rss。

您可以使用的另一件事是，当有人查询您的数据库中没有的项目时，您在主 bt 门户上进行查询，将结果缓存在您的数据库中，然后显示结果。然后，如果另一个用户进行相同的查询（这是非常常见的情况），您可以向他显示缓存数据 + 来自 rss 的新数据。

# .net - asp.net web-forms 命令参数问题

> ID：708612
> 
> 赞同：0
> 
> 时间：2009-04-02T07:09:51.150
> 
> 标签：.net, asp.net-mvc, webforms, controls

我遇到了 asp.net webforms 中的按钮控件问题。

在使用 mvc 之后，我也开始在 webforms 的 aspx 文件中使用 foreach，而不是转发器，这主要是转发器创建的所有垃圾视图状态的原因。

当您只迭代 html 控件时，它的效果很好。但是我很难使用按钮控件。

```
<% foreach (var r in Reports) { %>
    <asp:LinkButton OnClick="Click_DeleteResult" CommandArgument='<%= r.ResultId.ToString() %>' runat="server">Delete</asp:LinkButton>
<% } %> 
```

在回发时，该按钮上的命令参数变为“<%= r.ResultId.ToString() %>”。所以该代码不会被执行。有没有一种以这种方式填充控件属性的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T10:50:43.083

您是否尝试过 DataBinding 表达式

```
<%# r.ResultId %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T00:24:55.193

这很丑陋。使用 ASP.NET（尤其是 MVC）的第一大好处是分离逻辑和表示。每次我必须查看 aspx 文件来执行代码时，我都会感到畏缩。

如果您不喜欢 ViewState “垃圾”，那么只需为该控件关闭它！

```
<asp:Repeater ID="MyRepeater" runat="server" EnableViewState="false"> 
```

如果你坚持这一点...我见过这样的情况，除非我删除周围的引号，否则 ASP.NET 将无法正确解析服务器标记。像这样：

```
CommandArgument=<%= r.ResultId.ToString() %> 
```

可能不完全符合 HTML，但 ASP.NET 不在乎。如果您出于某种原因确实需要输出这些周围的引号，您可以将它们放在服务器标签内而不是外面。这是违反直觉的，但有时你必须这样做。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-02T12:45:31.483

通过后面的代码添加它怎么样，这是一个快速而肮脏的例子，但我想你明白了：

```
HtmlTable table = new HtmlTable();
foreach (var r in Reports)
{
    LinkButton lnkbtn = new LinkButton();
    lnkbtn.CommandArgument = r.ResultId;
    lnkbtn.Click += Click_DeleteResult;
    HtmlTableRow tr = new HtmlTableRow();
    HtmlTableCell tc_resultID = new HtmlTableCell();
    tc_caseNo.Controls.Add(lnkbtn);
    tr.Cells.Add(tc_resultID);
    table.Rows.Add(tr);
}
div_yourContainerDiv.Controls.Add(table); 
```

我有时更喜欢这个解决方案..取决于分配..但是可能有一个解决您当前问题的解决方案，不需要您将它带到后面的代码:)

如果您经常使用通用内容，这可能是一种非常好的方法，无需任何视图状态垃圾代码，这些代码会使 SE 的一切变得混乱。

或者，您可以做一些我在一些 SEO 关键项目上取得成功的事情。您可以将视图状态保存为会话，并改为创建视图状态的会话键。这样，您就可以让服务器而不是客户端来处理视图状态。它会产生额外的服务器负载，但总会有权衡。

# c# - klocwork 报告循环中的串联问题

> ID：708617
> 
> 赞同：-2
> 
> 时间：2009-04-02T07:12:53.810
> 
> 标签：c#

循环中的字符串连接。当我在 klocwork 中测试我的项目时，我得到了这个错误。我在循环中连接了许多字符串，这是一个很大的错误。

```
for(int j=0;j<nAttr;j++)
{
    builder = new StringBuilder();
    size=rnd.Next(1,10);
    for(int k=0; k<size; k++)
    {
        ch = Convert.ToChar(Convert.ToInt32(26 * rnd.NextDouble() + 65)) ;
        if(ch=='[' || ch==']')
            j--;
        else
            builder.Append(ch); 
    }
    strXml+=" "+builder.ToString();//here the bug arises 
    strXml+="="+"\""; 
```

我在测试时也发现了这个错误

类/结构数据成员被局部变量隐藏是什么意思

```
private void TraverseValues(XmlNode n,ArrayList arr)
{
    if(n.HasChildNodes )
    {   
        for(int i=0;i<n.ChildNodes.Count;i++)
        {
            if(n.ChildNodes[i].Name=="#text")
                arr.Add(n.ChildNodes[i].InnerText );
            else    
                TraverseValues(n.ChildNodes[i],arr)//here the code arises 
```

我完成了我的项目。它工作正常，然后我用 klocwork 测试了我的产品，它提出了这些错误。但我无法理解它说它在代码中有严重错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T07:37:36.310

Klickwork 创建了一个静态分析应用程序。

我认为 Arunachalam 将一些静态分析断言称为“错误”。

当 strXml 是字符串类型时，静态分析可能会显示`strXml+=" "+builder.ToString();`为错误代码（“错误”）。

从发布的代码来看，它绝对不是核心 .NET 库中的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T07:23:46.217

听起来您可能正在循环中定义一个与类中同名的变量？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T07:37:28.853

你预计会有什么类型的错误？您能否发布更多代码，以便我们了解，此操作会产生什么结果？

我刚刚将您的代码废弃到一个新项目中，稍微清理了代码，但它似乎按预期工作。

```
StringBuilder builder;
            int nAttr = 5;
            int size;
            char ch;
            Random rnd = new Random();
            for(int j=0;j<nAttr;j++)
            {
               builder = new StringBuilder();
                builder.Append(" ");
                size=rnd.Next(1,10);
                    for(int k=0; k<size; k++)
                    {
                            ch = Convert.ToChar(Convert.ToInt32(26 * rnd.NextDouble() + 65)) ;
                            if(ch=='[' || ch==']')
                                    j--;
                            else
                                    builder.Append(ch); 
                    }
                builder.Append("=\"");
                Console.WriteLine(builder.ToString());
            } 
```

我不明白的一件事是为什么要使用 StringBuilder，然后将 StringBuilder 的结果与文字连接到新字符串并再次连接。您应该使用您的 StringBuilder 来构建整个字符串，然后导出结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T07:38:59.770

你可能想拥有

```
if (ch=='[' || ch==']')
  k--; 
```

但即使这样也没有意义，因为你只会得到从“A”到“Z”的字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T07:47:37.970

如果我理解正确，听起来您的工具试图告诉您只更新`strXml`一次：

```
builder = new StringBuilder();
for(int j=0;j<nAttr;j++)
{
    builder.Append(" ");
    size=rnd.Next(1,10);
    for(int k=0; k<size; k++)
    {
            ch = Convert.ToChar(Convert.ToInt32(26 * rnd.NextDouble() + 65)) ;
            if(ch=='[' || ch==']')
                    j--;
            else
                    builder.Append(ch); 
    }
    builder.Append("\"");
    //...
}
strXml += builder.ToString(); 
```

# ruby - 是否有可能让 class.property = x 返回 x 以外的东西？

> ID：708618
> 
> 赞同：12
> 
> 时间：2009-04-02T07:13:03.000
> 
> 标签：ruby, properties, setter

假设我有一个 Ruby 类：

```
class MyClass
  def self.property
    return "someVal"
  end

  def self.property=(newVal)
    # do something to set "property"
    success = true

    return success # success is a boolean
  end
end 
```

如果我尝试做`MyClass.property=x`，整个语句的返回值总是 x。在许多基于 C/受启发的语言中，返回一个布尔“成功”值是一种约定——是否可以在 Ruby 中使用“等于语法”为 setter 执行此操作？

此外 - 如果这是不可能的，为什么不呢？允许“等于设置器”操作返回值是否有任何可能的缺点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-02T08:14:22.383

一个缺点是你会破坏链式赋值语义：

```
$ irb 
irb(main):001:0> x = y = 3
=> 3
irb(main):002:0> p x
3
=> nil
irb(main):003:0> p y
3
=> nil
irb(main):004:0> 
```

考虑：

```
x = MyClass.property = 3 
```

如果这按您的预期工作（右关联性），那么`x`将采取。`true`对于使用您的界面并习惯于典型语义的人来说，这可能是一个惊喜。

您还让我想到了并行分配，例如：

```
x, y = 1, 2 
```

显然，该表达式的返回值是[特定于实现的](http://spec.ruby-doc.org/wiki/Assignment)......我想我不会链接并行分配:)

好问题！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-02T12:12:07.273

正如 Martin 所说，这会破坏分配链。

ruby 分配方法被定义为工作的方式扩展`MyClass.property = 3`为`(lambda { |v| MyClass.send('property=', v); v })[3]`（不是真的，但这显示了链接是如何工作的）。赋值的返回值始终是赋值的值。

如果您想查看`MyClass#property=`方法的结果，请使用`#send`：

```
irb> o = Object.new
=> #<Object:0x15270>
irb> def o.x=(y)
irb>   @x = y+1
irb>   puts "y = #{y}, @x = #@x"
irb>   true
irb> end
=> nil
irb> def o.x
irb>   puts "@x = #@x"
irb>   @x
irb> end
=> nil
irb> o.x = 4
y = 4, @x = 5
=> 4
irb> o.x
@x = 5
=> 5
irb> o.send('x=', 3)
y = 3, @x = 4
=> true 
```

然而，红宝石的做法是有例外——如果在分配过程中出现问题，引发异常。然后，如果出现问题，所有调用者都必须处理它，这与返回值不同，返回值很容易被忽略：

```
# continued from above...
irb> def o.x=(y)
irb>   unless y.respond_to? :> and (y > 0 rescue false)
irb>     raise ArgumentError, 'new value must be > 0', caller
irb>   end
irb>   @x = y + 1
irb>   puts "y = #{y}, @x = #@x"
irb> end
=> nil
irb> o.x = 4
y = 4, @x = 5
=> 4
irb> o.x = 0
ArgumentError: new value must be > 0
    from (irb):12
    from :0
irb> o.x = "3"
ArgumentError: new value must be > 0
    from (irb):13
    from :0
irb> o.x
@x = 5
=> 5 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-02T07:19:08.757

我不是 Ruby 专家，但恐怕我会拒绝这种情况。属性设置器仅用于设置私有字段的值，不会产生任何副作用，例如返回结果代码。

如果您想要该功能，请忘记设置器并编写一个名为的新方法`TrySetProperty`或尝试设置属性并返回布尔值的东西。

# tfs - TFS 无法检索团队项目列表

> ID：708631
> 
> 赞同：4
> 
> 时间：2009-04-02T07:18:28.557
> 
> 标签：tfs

当我尝试从 TFS 访问我的项目列表时，错误消息如下提示

*TF31001：Team Foundation 无法从 Team Foundation Server 10.0.80.50 检索团队项目列表。Team Foundation Server 返回以下错误：创建“system.net/defaultProxy”配置部分中指定的 Web 代理时出错。。*

以前有没有人遇到过这个问题，你是如何解决的？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-08-26T13:52:36.233

我突然遇到了同样的错误。花了一些时间和我的同事一起尝试不同的 Visual Studio 2008 启动方式及其配置设置。我找到了几种绕过此错误的方法，尽管仍然不知道最初的原因是什么。1）用这样的命令行启动VS：devenv.exe /resetaddin。2) 注释掉 devenv.exe.config 中的 system.net 设置。像这样：

```
<system.net>
<!-- <settings>
        <ipv6 enabled="true"/>
     </settings>
 -->
</system.net> 
```

他们都工作。我发现第二个选项更大陆。如果没有这个 ipv6 设置，我不确定还有什么会受到影响。但是，至少我可以紧急连接到我的 TFS 服务器以签入一些文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-07T01:12:04.377

Team Explorer 通过 Web 服务连接到 TFS。听起来您在 IE 中的代理设置存在配置问题，阻止您连接到服务器。

尝试使用 IE 直接导航到 Web 服务之一（例如[http://yourtfsservername:8080/Services/v1.0/ServerStatus.asmx](http://yourtfsservername:8080/Services/v1.0/ServerStatus.asmx)）并查看是否出现错误。如果是这样，请检查您的代理设置 - 如果它们看起来不错，请查看您是否可以将 TFS 服务器排除在通过代理访问之外，而是直接访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-22T20:19:31.767

John Cheng 的回答很有帮助。我像他提到的那样更改了 devenv.exe.config 文件，并且能够连接到 TFS。在此之前，我什至尝试重新安装 Team Explorer，但没有任何好处。

# ruby - 如何在 ruby 中使基类方法不可覆盖？

> ID：708642
> 
> 赞同：4
> 
> 时间：2009-04-02T07:22:48.560
> 
> 标签：ruby, oop, overriding

我有一些基类 A 有一个不会被覆盖的方法。

```
class A
  def dont_override_me
    puts 'class A saying, "Thank you for not overriding me!"'
  end
end 
```

另一个类 B 扩展 A 并尝试覆盖该`dont_override_me`方法。

```
class B < A
  def dont_override_me
    puts 'class B saying, "This is my implementation!"'        
  end
end 
```

如果我实例化 B 并调用`dont_override_me`，则将调用 B 类的实例方法。

```
b = B.new
b.dont_override_me # => class B saying, "This is my implementation!" 
```

这是因为红宝石的特性。可以理解。

但是，如何强制基类方法`dont_override_me`不能被它的派生类覆盖？我在 java 中找不到像`final`ruby​​ 这样的关键字。在 C++ 中，可以将基类方法设置为非虚拟的，以便派生类无法覆盖它们。我如何在红宝石中实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T07:28:40.870

您可以通过挂钩更改事件并将其更改回来来做到这一点，但对我来说似乎有点臭：

[http://scie.nti.st/2008/9/17/making-methods-immutable-in-ruby](http://scie.nti.st/2008/9/17/making-methods-immutable-in-ruby)

它是定义 Ruby 的那些东西之一，所以与它对抗似乎有点毫无意义。如果有人重新定义了某些东西，所以它会严重损坏.. 那是他们的问题 ;-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-02T07:29:08.297

这是一种方法： [http ://www.thesorensens.org/2006/10/06/final-methods-in-ruby-prevent-method-override/](http://www.thesorensens.org/2006/10/06/final-methods-in-ruby-prevent-method-override/)

这也被打包成一个叫做“finalizer”的gem（gem install finalizer）

这利用了 method_added 回调并将新方法名称与您希望创建的方法列表进行比较`final`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-09T18:47:36.817

我建议：

```
class A #This is just as you've already defined it.
  def dont_override_me
    puts 'class A saying, "Thank you for not overriding me!"'
  end
end

module BehaviorForB
  def dont_override_me
    puts 'class B saying, "This is my implementation!"'        
  end

  def greet
    "Hello, Friend."
  end
end

class B < A
  include BehaviorForB
end

b = B.new
b.dont_override_me #=> class A saying, "Thank you for not overriding me!"
b.greet #=> Hello, Friend. 
```

通过将 B 的方法隐藏在一个 mixin 中，你会得到你想要的。B 的方法中任何不在 A 中的方法都将可用。已经在 A 中的方法不会被覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-25T19:02:18.557

防止方法被子类覆盖的一种方法（但不推荐）：

```
class Class
  def frozen_method(method)
    if class_variable_defined?(:@@__frozen_methods__)
      add= class_variable_get(:@@__frozen_methods__) | [method]
      class_variable_set(:@@__frozen_methods__,add)
    else
      class_variable_set(:@@__frozen_methods__,[method])
    end
    class << self
      def inherited(child)
        def method_added(method)
          if class_variable_get(:@@__frozen_methods__).include? method
            send(:remove_method, method)
            error="Cannot change method #{method} because it's not overridde"
            raise TypeError, error
          end
        end
      end
    end
  end
end

class Foo
  def hello
    'hello'
  end
  def foo
    'foo'
  end

  frozen_method :foo
end

class Bar < Foo
  def foo
    'new foo'
  end
end

#=> TypeError: Cannot change method foo because it's not overridde

Bar.new.foo  #=> 'foo' 
```

警告：此示例不完整。如果你在子类中添加`frozen_method`了一个之前定义的方法，当这个方法在子类中被修改时，它将失去它的实现。

# python - Python 注释：# vs. 字符串

> ID：708649
> 
> 赞同：29
> 
> 时间：2009-04-02T07:24:59.553
> 
> 标签：python

关于在 Python 源代码中添加注释的“标准”方式：

```
def func():
    "Func doc"
    ... <code>
    'TODO: fix this'
    #badFunc()
    ... <more code>

def func():
    "Func doc"
    ... <code>
    #TODO: fix this
    #badFunc()
    ... <more code> 
```

我更喜欢将一般注释写成字符串而不是前缀#。官方的 Python 风格指南没有提到使用字符串作为注释（如果我在阅读时没有错过的话）。

我喜欢这种方式主要是因为我认为这个`#`角色在评论区看起来很丑。据我所知，这些字符串没有任何作用。

这样做有缺点吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2009-04-02T07:36:08.217

不要滥用字符串（无操作语句）作为注释。文档字符串，例如模块、类或函数中的第一个字符串，是特殊的，绝对值得推荐。

请注意，**文档字符串是文档**，文档和注释是两个不同的东西！

*   文档对于理解代码的作用很*重要*。
*   注释解释了代码是如何做到的*。*

文档由*使用*您的代码的人阅读，由想要*理解*您的代码（例如维护它）的人发表评论。

使用字符串进行注释有以下（潜在的）缺点：

*   它使那些不知道字符串什么都不做的人感到困惑。
*   注释和字符串文字在代码编辑器中以不同的方式突出显示，因此您的风格可能会使您的代码更难阅读。
*   它可能会影响性能和/或内存使用（如果在字节码编译期间未删除字符串，则删除注释是在扫描仪级别完成的，因此它肯定更便宜）

对 Python 程序员来说最重要的是：它不是 Pythonic：

> 应该有一种——最好只有一种——明显的方法来做到这一点。

坚持标准，使用评论。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-02T07:28:17.253

我认为只有定义（或类）中的第一个字符串文字是“特殊的”，即由解释器存储到已定义对象（或类'）的[docstring](http://www.python.org/dev/peps/pep-0257/)中。

您在代码中放置的任何其他字符串文字，在最坏的情况下，意味着解释器将在运行时构建字符串值，然后将其丢弃。这意味着通过在代码中乱扔字符串常量来进行“注释”可能会在性能方面产生成本。

当然，我没有对此进行基准测试，也不太了解 Python 解释器，无法肯定地说。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-02T07:32:53.513

当然，缺点是其他人阅读它会发现代码字符串和注释字符串是交错的，这可能会造成混淆。

# vb.net - 如何检查麦克风是否打开

> ID：708654
> 
> 赞同：0
> 
> 时间：2009-04-02T07:26:56.367
> 
> 标签：vb.net, microphone

我正在使用 VisualBasic（我对它有点陌生）。如何检查麦克风是否打开？我正在从网络摄像头捕捉视频，但我还需要确保麦克风已打开。我不知道如何检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T08:08:51.040

您需要对一些音频进行采样，测量您接收到的信号电平（峰值或 RMS 等），然后判断它是否不仅仅是 PC 上麦克风输入的本底噪声。

我不认为有任何操作系统帮助专门做到这一点。

您可能需要返回“如何在 VB 中捕获一组音频样本？”或类似的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T08:34:43.443

没有 VB 经验，但如果您想检查用户麦克风是否正常工作（并且就您可以通过编程方式看到的那样），看看像 Skype 这样的应用程序是如何工作的可能会有所帮助；要求用户手动验证（我认为第 4 版在这方面做得很好）。像*Enemy Territory: Quake Wars*和 Source Engine 游戏这样的游戏做类似的事情。当然，这可能不适合你正在做的事情，像 Will 建议的那样可能更合适。

# c# - 将 NUnit 迁移/升级到团队系统

> ID：708660
> 
> 赞同：1
> 
> 时间：2009-04-02T07:29:58.590
> 
> 标签：c#, unit-testing, nunit, automated-tests

我们正在开发一个从**.Net** **1.1**升级到**3.5**的 C# windows 应用程序。该应用程序使用**NUnit**进行**自动化测试**，而我们又将其更改为**Team System 2008**。

*   在我看来，NUnit 使用类似的**属性**和代码进行 **断言**？
*   **升级**/ **迁移**此代码 的最佳方法是什么，是否有任何**需要****避免的****程序** ？

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T07:34:10.560

下面是属性如何从 NUnit 映射到 MSTest

```
[TestFixture] -> [TestClass]
[Test] -> [TestMethod]
[SetUp] -> [TestInitialize]
[TearDown] -> [TestCleanup]
[TestFixtureSetUp] -> [ClassInitialize]
[TestFixtureTearDown] -> [ClassCleanup] 
```

您可以考虑添加类似

```
using TestClassAttribute = NUnit.Framework.TestFixtureAttribute;
using TestAttribute = NUnit.Framework.TestMethodAttribute; 
```

到你的测试类的顶部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T07:38:03.813

主要是，测试框架之间的转换是一个“[Ctrl]+H”（全部替换）的工作。然而...

我认为“升级”这个词可能会令人困惑。我都用过，而且 NUnit 在很多方面都领先于 MSTest。MSTest 的最大优势是 (IMO) 与 IDE 中的团队覆盖集成 - 但您可以通过[TestDriven.NET](http://testdriven.net/) (Test With -> Team Coverage) 使用**现有的 NUnit 测试来获得这一点。**

使用 MSTest 需要注意的事项：

*   它需要一个解决方案文件来保存 testrunco​​nfig 等
*   您需要添加额外的属性（或 testrunco​​nfig 中的条目）以将文件部署到测试文件夹（它不只是使用输出“bin”文件夹）
*   仪器需要一个特殊的配置

# php - 将大型经典 ASP 页面迁移到 php？

> ID：708672
> 
> 赞同：2
> 
> 时间：2009-04-02T07:35:32.070
> 
> 标签：php, asp.net, asp-classic, migration

我们有一个大型的经典 asp 应用程序，我们考虑迁移到 asp.net 或 php。我不想谈论任何一个的优缺点，但我想知道在迁移到 php 时是否有办法避免一次性完全重写。我们不能仅仅为了重写就停止维护当前的代码库。所以事情必须齐头并进。

如果我们迁移到 asp.net，我们应该能够在两种技术之间共享会话数据，并用新的 asp.net 代码替换网站的某些部分，而其他部分则继续运行。php可以采用这种方法吗？有没有人有过这种迁移的经验，或者可以指出我一些好的读物？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-08T05:45:03.027

在 ASP Classic 和 ASP.NET 之间共享会话状态的能力不是这两种语言的固有特性，尽管它很容易实现。

微软提供示例代码： [http ://www.google.com/search?client=safari&rls=en-us&q=share%20session%20data%20between%20ASP%20and%20ASP.NET%20pages&ie=UTF-8&oe=UTF-8](http://www.google.com/search?client=safari&rls=en-us&q=share%20session%20data%20between%20ASP%20and%20ASP.NET%20pages&ie=UTF-8&oe=UTF-8)

通过使用 Microsoft 的示例，您可以很容易地在 PHP 中实现类似的东西。基本上你会使用上面微软代码的 ASP Classic 部分。然后在 PHP 中，您将编写一个相当简单的类，以便在加载每个页面时将会话状态从数据库读取到数组或集合中。这是 PHP 中的一些额外工作，但不应超过几天的额外编码和测试。

以我有限的经验，PHP 在 IIS6 上运行得很好，而且在 IIS7 中对它的支持据说更好。我遇到的唯一问题是，大多数 PHP 代码都假定您在 Linux/Unix 上运行......但通常这只是文件处理代码的问题（想想：用户图像上传）适用于本地文件系统路径。因为他们假设您的文件系统在 Windows 上使用 / 而不是 \ 。显然修复起来相当简单。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T07:42:18.187

是的; 可以在单个 Web 应用程序上的 ASP 和 ASP.NET 页面之间共享会话数据。我们在我的工作中使用我们的遗留代码来做到这一点。

我知道可以在 IIS 上运行 PHP。虽然不确定在 ASP 和 PHP 脚本之间共享会话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-09T02:46:47.503

“我想知道在迁移到 php 时是否有办法避免一次性完全重写”

欢迎来到我们的世界。

我们的 FogBugz 代码库是用经典的 ASP 编写的，当我们想在 Linux 上提供它时，最简单的解决方案是编写一个编译器来读取 asp 并发出 php。这并不难，而且只用了几个星期。

好处是当我们决定将整个应用程序切换到 .NET 时，它只意味着稍微调整编译器以输出 .Net 目标代码。

但是要回到您的答案，ASP 和 PHP 非常相似，并且根据您的应用程序，有非常天真的翻译器可能会让您大部分时间到达那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-08T05:48:13.690

只是另一种选择。John Booty 也有一个很好的建议。

如果会话数据不是敏感信息，您可以使用 cookie，这也将与平台无关，等待用户打开 cookie。

考虑到这篇文章，这可能不是您的最佳选择，而是另一个需要考虑的选择。

# c# - 为什么在方法结束时返回是一种好习惯

> ID：708675
> 
> 赞同：3
> 
> 时间：2009-04-02T07:36:29.277
> 
> 标签：c#, oop

> **可能重复：**
> [一个函数应该只有一个返回语句吗？](https://stackoverflow.com/questions/36707/should-a-function-have-only-one-return-statement)

一位程序员同事问我为什么我们总是要在方法结束时返回？

我们都被教导在一个方法中总是只有一个返回语句，而不是分散在整个代码中的多个语句。

这有什么好的理由吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-02T07:40:24.430

有一种观点认为，你应该有一个单一的入口点和一个单一的出口点。如果你有更多，你应该重构代码更清晰。

不过我不同意这种想法，并且经常使用保护子句，如下所示：

```
public void DoSomethingOnMales(Person p)
{
    if (p.Sex != Sex.Male)
        return;
    ....
} 
```

当然，你仍然应该尝试限制返回的数量，因为它们太多，虽然它们本身并不坏，但很好地表明你有一个复杂的方法，并且可能应该尝试简化它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T07:41:09.327

您可以随时返回，不必在方法的末尾。唯一需要注意的是您没有任何无法访问的代码：永远无法访问的代码，因为您总是在到达之前返回。

如果你担心在方法结束前返回会迷惑自己，导致出错，那就避免使用它。但是，我会毫不犹豫地在任何我想要的地方使用 return 语句，因为它很有用。

# domain-driven-design - .NET DDD 示例

> ID：708677
> 
> 赞同：23
> 
> 时间：2009-04-02T07:37:04.983
> 
> 标签：domain-driven-design, sample

有人可以指出我在.NET 平台上开发的“完整”DDD 示例。我发现的大多数示例都感觉​​“不完整”。

我真的很想看到 DDD 原则的实际应用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-02T07:57:59.723

[您可以尝试使用 C# 作为 .NET 域驱动设计的](http://www.wrox.com/WileyCDA/WroxTitle/-NET-Domain-Driven-Design-with-C-Problem-Design-Solution.productCd-0470147563.html)一部分构建的代码：问题 - 设计 - 解决方案一书。

该代码可从 Codeplex和本书[的](http://www.codeplex.com/dddpds)网站上免费获得，并且是一个功能相当完整的应用程序，用于演示使用 C# 进行 DDD。

从 codeplex 网站：

> 这本书是一个名为 SmartCA 的真实应用程序的大型案例研究，它是一个使用最新的 .NET 技术并遵循 DDD 原则实现的智能客户端应用程序。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2010-03-02T16:19:57.263

Eric Evans 的领域驱动设计书中的 .NET DDD 示例可以在这里找到：http: [//dddsamplenet.codeplex.com](http://dddsamplenet.codeplex.com)

Szymon（在 google 上搜索：simon-says-architecture dotCOM）几乎每天都在更新源代码。最后一个版本是 2010 年 1 月 28 日。

干杯，

雅库布·G

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-02T07:40:49.593

这些是 ASP.NET MVC 示例应用程序 - [这里](http://www.tampadev.org/News/Details/ASPNETMVCSampleApplicationsOpenSourceExamplesTutorials)
对我来说工作得很好。

在这里可以获得有关 DDD 的书籍 - [在这里](http://www.infoq.com/minibooks/domain-driven-design-quickly)
（如果您不想在那里注册，请使用 www.bugmenot.com）。

**快速编辑**
“ddd ...”还不够好。寻找“ddd 解决软件核心的复杂性”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-08-11T20:07:32.020

试试这个：

面向领域的 N 层 .NET 4.0 示例应用程序。微软 - 西班牙

使用 .NET 4.0 C#、Entity Framework 4.0 实现典型的 DDD 架构和设计模式

示例应用当前状态 - 测试版。（V0.9 兼容 VS.2010 RTM、最终 .NET 4.0 版本、Silverlight 4.0、UNITY 2.0 和 PEX&MOLES V0.92）

[http://microsoftnlayerapp.codeplex.com/](http://microsoftnlayerapp.codeplex.com/)

# c++ - 为什么当我从文件中加载它的序列化时，我的向量充满结构的大小如此之大？

> ID：708684
> 
> 赞同：1
> 
> 时间：2009-04-02T07:38:16.043
> 
> 标签：c++, serialization, file, vector, struct

正如你们中的大多数人可能已经知道我的一系列问题一样，我正在尝试创建一个程序，可以将多个结构序列化为一个 .dat 文件，通过加载它的序列化将它们读回，编辑内容，然后重新将它们写入文件等等。这是我正在尝试做的一个库存计划，但我无法让它为我的生活工作。

我正在加载的文件是空白的。我的程序甚至需要 10 秒才能加载，现在我知道为什么了。这是因为我的向量的大小是 25 万。哦等等……这次我运行它，我的向量大小是 5,172,285。那是一个非常大的充满结构的向量。没有任何运行时或编译错误，但我很确定我做错了什么。我正在加载的文件也是完全空白的。

**代码：**

```
// Project 5.cpp : main project file.

#include "stdafx.h"
#include <iostream>
#include <fstream>
#include <string>
#include <vector>
#include <algorithm>

using namespace System;
using namespace std;
#pragma hdrstop

int checkCommand (string line);

template<typename T>
void writeVector(ofstream &out, const vector<T> &vec);

template<typename T>
vector<T> readVector(ifstream &in);

struct InventoryItem {
    string Item;
    string Description;
    int Quantity;
    int wholesaleCost;
    int retailCost;
    int dateAdded;
} ;

int main(void)
{
    cout << "Welcome to the Inventory Manager extreme! [Version 1.0]" << endl;
    ifstream in("data.dat");
    if (in.is_open()) { cout << "File \'data.dat\' has been opened successfully." << endl; } else { cout << "Error opening data.dat" << endl; return 0;}
    cout << "Loading data..." << endl;
    vector<InventoryItem> structList = readVector<InventoryItem>( in );
    cout <<"Load complete." << endl;

    while (1)
    {

        string line = "";
        cout << "There are currently " << structList.size() << " items in memory.";
        cout << endl;
        cout << "Commands: " << endl;
        cout << "1: Add a new record " << endl;
        cout << "2: Display a record " << endl;
        cout << "3: Edit a current record " << endl;
        cout << "4: Exit the program " << endl;
        cout << endl;
        cout << "Enter a command 1-4: ";

        getline(cin , line);

        int rValue = checkCommand(line);
        if (rValue == 1)
        {
            cout << "You've entered a invalid command! Try Again." << endl;
        } else if (rValue == 2){ 
            cout << "Error calling command!" << endl;
        } else if (!rValue) {
            break;
        }
    }

    system("pause");

    return 0;
}

int checkCommand (string line)
{
    int intReturn = atoi(line.c_str());
    int status = 3;

    switch (intReturn)
    {
        case 1:
            break;
        case 2:
            break;
        case 3:
            break;
        case 4:
            status = 0;
            break;
        default:
            status = 1;
            break;
    }
    return status;
}

template<typename T>
void writeVector(ofstream &out, const vector<T> &vec)
{
    out << vec.size();

    for(vector<T>::const_iterator i = vec.begin(); i != vec.end(); i++)
    {
        out << *i;
    }
}

ostream &operator<<(ostream &out, const InventoryItem &i)
{
    out << i.Item << i.Description;
    out << i.Quantity;
    out << i.wholesaleCost << i.retailCost;
    out << i.dateAdded;
    return out;
}

istream &operator>>(istream &in, InventoryItem &i)
{
    in >> i.Item >> i.Description;
    in >> i.Quantity;
    in >> i.wholesaleCost >> i.retailCost;
    in >> i.dateAdded;
    return in;
}

template<typename T>
vector<T> readVector(ifstream &in)
{
    size_t size;
    in >> size;

    vector<T> vec;
    vec.reserve(size);

    for(unsigned int i = 0; i < size; i++)
    {
        T tmp;
        in >> tmp;
        vec.push_back(tmp);
    }

    return vec;
} 
```

有人可以简单地告诉我如何将其转换为一个程序，该程序实际上可以将充满结构的序列化向量写入文件，然后将它们读回，以便我可以编辑它们并将它们存储回去以供以后加载？哦，我的天哪，这是一次多么愉快的旅程！

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T07:45:28.897

你说文件实际上是空的。readVector 的第一行是这样的：

```
in >> size; 
```

你认为最终的尺寸会是多少？由于它是空的，这将导致您没有检测到的错误。该变量`size`将保持未初始化 - 因此您会在其中看到奇怪的值，因为它采用了当时恰好在内存中的任何值。您可以使用检查来检查流的状态：

```
if (in) 
```

在布尔上下文中处理它会告诉您是否发生错误 - 这也将涵盖诸如无法读取有效整数变量之类的事情。我建议您应该弄清楚如何在调试器中运行您的程序，您将能够单步执行您的代码并查看给定时间变量的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T07:46:13.590

因此，如果您的文件为空白并且您正在执行以下操作：

> ```
> size_t size;
> in >> size;
> 
> vector<T> vec;
> vec.reserve(size); 
> ```

你认为会发生什么？无法读取大小并使用随机值

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-02T07:46:15.103

如果您的输入文件为空，则`vector`应为空。你不应该越过这条线：

```
if (in.is_open()) 
```

-- 你的程序（当我在我的机器上运行它时）退出。

你能解释一下为什么你有以下吗？

```
#include <String>

using namespace System;

#pragma hdrstop 
```

最容易实现的是一次性读入文件内容，将项目保存在内存中，在内存中编辑它们，然后通过编辑一次写入文件。从内存占用或性能的角度来看，这当然不是一个很好的技术。但是，您要解决的问题并非微不足道。阅读[常见问题解答 36](http://www.parashift.com/c++-faq-lite/serialization.html)以更好地了解您的任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T07:47:16.567

您正在使用空白文件，但是当您加载文件时，您正在寻找一个大小。当文件在文件中没有大小时，您可能会将垃圾放入您的大小变量中。

所以尝试在“data.dat”文件的第一行输入一个零。

编辑：上述建议只是一个临时修复。你可以试试这个：

```
in >> size;
//input operation failed
if(in.fail())
    //return, or whatever you need to do 
```

# memcached - 多网络服务器配置的缓存解决方案？

> ID：708685
> 
> 赞同：2
> 
> 时间：2009-04-02T07:38:43.733
> 
> 标签：memcached, appfabric, distributed-caching

我正在研究用于多网络服务器配置的缓存解决方案。多年来，人们认为[memcached很便宜（免费）并且经过验证。](http://www.danga.com/memcached/)微软还在为 webfarm 开发一种缓存解决方案，称为[Velocity](http://msdn.microsoft.com/en-us/data/cc655792.aspx)，但这仍然在 CTP2 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T07:44:22.707

配置服务中使用了一个分布式缓存模型，它是[.NET Stocktrader 示例应用程序](http://msdn.microsoft.com/en-us/netframework/bb499684.aspx)的一部分。这是一个允许您通过集中配置管理、负载平衡和分布式缓存运行多个节点的框架。您可以按原样实现配置服务，也可以查看代码并获取适合您的内容。值得一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T08:14:37.687

当我收听 Scott Hanselman 对 StackOverflow 团队的播客采访时，给我留下的印象是：他们确实使用了某种缓存和b。他们对自己在这方面所做的工作几乎一无所知，只是摆弄了一些选择，然后写了一两篇博客文章。

他们目前似乎半心半意地使用客户端缓存（例如，图像的到期时间很短），我认为他们使用了很多 ASP.NET 用户模式缓存，我不知道他们是否使用 IIS内核模式缓存。（他们似乎也无法告诉斯科特。）

然而，播客是很久以前的，当时我正在开车，所以我的记忆可能是错误的和/或过时的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-09T17:41:52.303

在引入 memcached 之类的东西之前，您应该考虑一下。

*   缓存可以隐藏性能问题（“查询运行缓慢？只需缓存它，不要担心修复它！”）
*   使陈旧的数据失效是一场噩梦。
*   您可能会花费数天时间来寻找在清除缓存时被清除的错误，这会污染您的代码库。

我不是说不要这样做，而是在你做之前三思而后行。

如果您可以通过添加几台额外的机器（我认为 stackoverflow 可以）来获得足够的性能，那么就这样做并且不用担心缓存。从长远来看，它会便宜得多。

*注意我不是说 100 台机器。

# jar - 运行 Java 应用程序的问题

> ID：708689
> 
> 赞同：0
> 
> 时间：2009-04-02T07:39:50.687
> 
> 标签：jar, java

我开发了一个 Java swing 应用程序，然后我通过 .jar 包部署了它。

我在我的 PC 上运行我的应用程序，双击 .jar 文件，一切正常，命令行（dos 提示符）也一切正常。

这是我的问题。我试图在另一台 PC 上运行我的应用程序：

*   相同的操作系统（Windows XP）

*   相同的 JRE (1.6.0_U13)

*   但安装了 Oracle JInitiator 1.3.1.18（这是与我的 PC 的唯一区别）

该应用程序只能从命令行运行，但不能从 gui 运行！

双击 .jar 文件我收到此错误：

```
`Could not find the main class. program will exit!` 
```

这个错误可能是由于 JRE 和 JInitiator 之间的一些冲突造成的吗？

有没有人有同样的麻烦？

谢谢

* * *

编辑：

从 gui 执行 .jar 文件与“javaw”命令相关联

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T07:47:26.363

这可能是与 JInit 的冲突，它改变了 jar 文件和用于启动它们的 java 命令之间的关联。

看到这个[线程](http://forums.rptools.net/viewtopic.php?p=2076&highlight=&sid=501680a0db6427ccca839676fe455ac1)。

> 重新安装java，问题就消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T07:48:21.417

您是否检查了 PATH/CLASSPATH/JAVA_PATH 变量。有可能是Jinitiator在前面安装了错误的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T15:08:54.563

一个简单的描述可能是 - jinitiator 安装为一个完全实现的 JRE，在处理小程序时具有一些用于缓存下载的附加功能。

正如我最近看到的所有 JRE 安装程序所做的那样，无论它们是新的还是旧的，它们都会替换注册表中的几个条目以成为活动的 JRE。除非您提供 java.exe 的完整路径或更改注册表以重新指向不同的 JRE，否则您最后安装的任何内容都将运行。

检查：

*   HKEY_CLASSES_ROOT\jarfile\shell\open\command 看看javaw.exe的路径是否正确。（甚至包括在内）
*   HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\java.exe 和 javaw.exe 和 javaws.exe 也检查那里的路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T09:05:11.187

可能检查您的清单条目。查看 jar 中的 MANIFEST.MF 是否包含正确设置为应该调用的类的 Main-Class 属性，如果没有尝试设置它。

# java - 如何按字母顺序对列表进行排序？

> ID：708698
> 
> 赞同：212
> 
> 时间：2009-04-02T07:42:15.347
> 
> 标签：java, list, sorting, collections, alphabetical

我有一个`List<String>`包含国家名称的对象。如何按字母顺序对这个列表进行排序？

* * *

## 回答 #1

> 赞同：239
> 
> 时间：2009-04-02T07:45:51.173

假设那些是字符串，使用方便的静态方法[`sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)……</p>

```
 java.util.Collections.sort(listOfCountryNames) 
```

* * *

## 回答 #2

> 赞同：154
> 
> 时间：2009-04-02T09:51:37.703

## Collections.sort 的解决方案

如果您被迫使用该列表，或者您的程序具有类似的结构

*   创建列表
*   添加一些国家名称
*   排序一次
*   永远不要再更改该列表

那么 Thilos 的回答将是最好的方法。如果你将它与*Tom Hawtin - tackline*的建议结合起来，你会得到：

```
java.util.Collections.sort(listOfCountryNames, Collator.getInstance()); 
```

## 使用 TreeSet 的解决方案

如果您可以自由决定，并且如果您的应用程序可能变得更复杂，那么您可以更改代码以使用 TreeSet。这种集合仅在插入条目时对其进行排序。无需调用 sort()。

```
Collection<String> countryNames = 
    new TreeSet<String>(Collator.getInstance());
countryNames.add("UK");
countryNames.add("Germany");
countryNames.add("Australia");
// Tada... sorted. 
```

## 关于为什么我更喜欢 TreeSet 的旁注

这有一些微妙但重要的优点：

*   它只是更短。不过，只短了一行。
*   不用担心*这个列表现在是否真的排序*了，因为不管你做什么，TreeSet 总是排序的。
*   您不能有重复的条目。根据您的情况，这可能是有利的或不利的。如果您需要重复，请坚持您的清单。
*   一个有经验的程序员一看就`TreeSet<String> countyNames`知道：*这是一个没有重复的有序字符串集合，我可以确定这在每一刻都是正确的*。一个简短的声明中有这么多信息。
*   在某些情况下，真正的性能会获胜。如果您使用列表并经常插入值，并且可能在这些插入之间读取列表，那么您必须在每次插入后对列表进行排序。这套装置做同样的事情，但做起来要快得多。

为正确的任务使用正确的集合是编写简短且无错误的代码的关键。在这种情况下，它没有那么明显，因为您只需保存一行。但是我已经停止计算我看到有人使用列表的频率，他们想要确保没有重复项，然后自己构建该功能。或者更糟糕的是，当你真的需要一个地图时使用两个列表。

不要误会我的意思：使用 Collections.sort 不是错误或缺陷。但是在很多情况下，TreeSet 更干净。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-03-15T11:32:41.473

您可以使用 Java 8 Stream 或 Guava 创建一个新的排序副本：

```
// Java 8 version
List<String> sortedNames = names.stream().sorted().collect(Collectors.toList());
// Guava version
List<String> sortedNames = Ordering.natural().sortedCopy(names); 
```

另一种选择是通过 Collections API 就地排序：

```
Collections.sort(names); 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2014-09-14T10:32:56.903

迟到总比不到好！这是我们如何做到的（仅用于学习目的）-

```
import java.util.List;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;

class SoftDrink {
    String name;
    String color;
    int volume; 

    SoftDrink (String name, String color, int volume) {
        this.name = name;
        this.color = color;
        this.volume = volume;
    }
}

public class ListItemComparision {
    public static void main (String...arg) {
        List<SoftDrink> softDrinkList = new ArrayList<SoftDrink>() ;
        softDrinkList .add(new SoftDrink("Faygo", "ColorOne", 4));
        softDrinkList .add(new SoftDrink("Fanta",  "ColorTwo", 3));
        softDrinkList .add(new SoftDrink("Frooti", "ColorThree", 2));       
        softDrinkList .add(new SoftDrink("Freshie", "ColorFour", 1));

        Collections.sort(softDrinkList, new Comparator() {
            @Override
            public int compare(Object softDrinkOne, Object softDrinkTwo) {
                //use instanceof to verify the references are indeed of the type in question
                return ((SoftDrink)softDrinkOne).name
                        .compareTo(((SoftDrink)softDrinkTwo).name);
            }
        }); 
        for (SoftDrink sd : softDrinkList) {
            System.out.println(sd.name + " - " + sd.color + " - " + sd.volume);
        }
        Collections.sort(softDrinkList, new Comparator() {
            @Override
            public int compare(Object softDrinkOne, Object softDrinkTwo) {
                //comparision for primitive int uses compareTo of the wrapper Integer
                return(new Integer(((SoftDrink)softDrinkOne).volume))
                        .compareTo(((SoftDrink)softDrinkTwo).volume);
            }
        });

        for (SoftDrink sd : softDrinkList) {
            System.out.println(sd.volume + " - " + sd.color + " - " + sd.name);
        }   
    }
} 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2018-05-15T13:55:08.720

在一行中，使用 Java 8：

```
list.sort(Comparator.naturalOrder()); 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2015-05-21T12:29:15.183

除非您仅以无重音的英语对字符串进行排序，否则您可能希望使用`Collator`. 它将正确排序变音符号，可以忽略大小写和其他特定于语言的内容：

```
Collections.sort(countries, Collator.getInstance(new Locale(languageCode))); 
```

您可以设置[整理者强度](http://docs.oracle.com/javase/8/docs/api/java/text/Collator.html#setStrength-int-)，请参阅 javadoc。

这是斯洛伐克语的一个例子，`Š`应该去哪里`S`，但在 UTF`Š`中是在后面的某个地方`Z`：

```
List<String> countries = Arrays.asList("Slovensko", "Švédsko", "Turecko");

Collections.sort(countries);
System.out.println(countries); // outputs [Slovensko, Turecko, Švédsko]

Collections.sort(countries, Collator.getInstance(new Locale("sk")));
System.out.println(countries); // outputs [Slovensko, Švédsko, Turecko] 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2009-04-02T13:57:34.993

对 of 使用两个参数`Collections.sort`。您将需要一个合适`Comparator`的大小写（即进行词汇排序，而不是 UTF16 排序），例如可通过`java.text.Collator.getInstance`.

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2015-12-24T11:30:54.417

这是您正在寻找的

```
listOfCountryNames.sort(String::compareToIgnoreCase) 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2015-07-30T18:31:43.473

通过使用`Collections.sort()`，我们可以对列表进行排序。

```
public class EmployeeList {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        List<String> empNames= new ArrayList<String>();

        empNames.add("sudheer");
        empNames.add("kumar");
        empNames.add("surendra");
        empNames.add("kb");

        if(!empNames.isEmpty()){

            for(String emp:empNames){

                System.out.println(emp);
            }

            Collections.sort(empNames);

            System.out.println(empNames);
        }
    }
} 
```

输出：

```
sudheer
kumar
surendra
kb
[kb, kumar, sudheer, surendra] 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-03-09T11:27:34.023

降序字母：

```
List<String> list;
...
Collections.sort(list);
Collections.reverse(list); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-01-25T11:18:45.953

您可以使用以下行

`Collections.sort(listOfCountryNames, String.CASE_INSENSITIVE_ORDER)`

它类似于 Thilo 的建议，但不会区分大小写字符。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-25T12:30:31.710

爪哇 8 ,

```
countries.sort((country1, country2) -> country1.compareTo(country2)); 
```

如果[String 的 compareTo](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#compareTo-java.lang.String-)不适合您的需要，您可以提供任何其他比较器。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-04-27T12:10:53.137

在 JAVA 8 中相同：-

```
//Assecnding order
        listOfCountryNames.stream().sorted().forEach((x) -> System.out.println(x));

//Decending order
        listOfCountryNames.stream().sorted((o1, o2) -> o2.compareTo(o1)).forEach((x) -> System.out.println(x)); 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2015-01-07T08:09:56.423

```
//Here is sorted List alphabetically with syncronized
package com.mnas.technology.automation.utility;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.Iterator;
import java.util.List;

import org.apache.log4j.Logger;
/**
* 
* @author manoj.kumar
*/
public class SynchronizedArrayList {
static Logger log = Logger.getLogger(SynchronizedArrayList.class.getName());
@SuppressWarnings("unchecked")
public static void main(String[] args) {

List<Employee> synchronizedList = Collections.synchronizedList(new ArrayList<Employee>());
synchronizedList.add(new Employee("Aditya"));
synchronizedList.add(new Employee("Siddharth"));
synchronizedList.add(new Employee("Manoj"));
Collections.sort(synchronizedList, new Comparator() {
public int compare(Object synchronizedListOne, Object synchronizedListTwo) {
//use instanceof to verify the references are indeed of the type in question
return ((Employee)synchronizedListOne).name
.compareTo(((Employee)synchronizedListTwo).name);
}
}); 
/*for( Employee sd : synchronizedList) {
log.info("Sorted Synchronized Array List..."+sd.name);
}*/

// when iterating over a synchronized list, we need to synchronize access to the synchronized list
synchronized (synchronizedList) {
Iterator<Employee> iterator = synchronizedList.iterator();
while (iterator.hasNext()) {
log.info("Sorted Synchronized Array List Items: " + iterator.next().name);
}
}

}
}
class Employee {
String name;
Employee (String name) {
this.name = name;

}
} 
```

# vim - 有符号链接时在 VIM 中获取逻辑路径

> ID：708700
> 
> 赞同：8
> 
> 时间：2009-04-02T07:42:26.390
> 
> 标签：vim, symlink

我有以下设置：

```
mkdir /1
mkdir /1/2
mkdir /1/2/3
ln -s /1/2/3 /1/3 
```

如果我这样做`cd /1/3`，然后`pwd`，我得到`/1/3`。如果我用`pwd -P`，我可以得到`/1/2/3`，或者`pwd -L`给力`/1/3`。

在 VIM 中，我正在寻找一种方法来获取`/1/3`.
如果我在 中打开一个文件`/1/3/foo.txt`，并且我使用类似的东西`fnamemodify(bufname(winbufnr(0)), ':p:h')`，它会返回`/1/2/3`.
我怎么能告诉它给我相同的目录`pwd`呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-02T18:26:45.383

看来你不能，除了 via `system('pwd -L')`。根据[vim_use 邮件列表](http://groups.google.com/group/vim_use/browse_thread/thread/602b96cd5441fb03/751fda406ec5940a?lnk=gst&q=resolve+symlinks#751fda406ec5940a)， Vim 现在会自动解析符号链接。

请参阅周围的文本以`:h E773`获取基本原理；如果 Vim 使用符号链接而不是解析的文件名，则可能会在两个缓冲区中以两个不同的名称打开同一个文件，并且 Vim 会因为试图找出交换文件的位置而感到困惑。另见`:h version7.txt`：

> Unix：当通过符号链接编辑文件时，交换文件将使用符号链接的名称。现在使用实际文件的名称，以便检测到两次编辑同一个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T01:23:23.293

# 简短的回答：

您可以使用挂载绑定来代替符号链接。见`man mount`。

# 长答案：

我遇到了类似的问题，因为我有一个指向已安装分区的短符号链接，

```
/e -> /media/iam/ext4test 
```

我也有一个符号链接`~/.vimrc -> /e/configs/.vimrc`。

我在尝试弹出包含目录中的 Netrw 时遇到了麻烦（我正在登陆`~`，但我看不到避免这种情况的可靠方法，请记住使用书签等的愿望）。

我的解决方案是，在考虑可能更改挂载点之后，您可以*添加*挂载点。所以之后`unlink e`，我用了`mount --bind /media/iam/ext4test /e`。

现在，如果我正在`/e/configs/.vimrc`使用`:edit .`（或`:e.`等），它会将我弹出到包含目录中的 Netrw 中。

# 编辑：

该命令`mount --bind`进行临时更改。对于永久绑定挂载，我将以下内容添加到`/etc/fstab`,

```
# <file system>      <mount point>  <type>  <options>  <dump>  <pass>
/media/iam/ext4test  /e             none    bind       0       0 
```

# rest - 为什么大多数 Web 服务都是 REST 风格的，而不是（也）是 XML-RPC 的？

> ID：708702
> 
> 赞同：4
> 
> 时间：2009-04-02T07:43:11.287
> 
> 标签：rest, protocols, xml-rpc

我知道 Flickr 提供了 XML-RPC 和 REST 方式来使用它。

每种语言都有标准的 XML-RPC 库（例如，Python 有一个内置的`xmlrpclib`）。

标准 XML-RPC 库负责序列化/反序列化以及发送/接收响应。

在我看来，对相同 API 使用 REST 样式的网站最终会用每种语言编写自己的库。示例：雅虎！搜索 SDK。

对我来说，XML-RPC 方式似乎更好，但所有证据都相反。为什么？

所以：

1.  为什么大多数 Web 服务都是 REST 风格，而不是 XML-RPC？
2.  XML-RPC 是否存在不明显的缺点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T08:26:39.343

1.  休息不仅容易，而且容易得多。

2.  Xml-Rpc/soap 有很多活动部件和大量开销、认知
    和其他方面（通常）不需要，它很复杂，除非你特别需要它提供的一些功能，否则它不值得

3.  并非每个服务请求都需要打包为带参数的正式函数调用

4.  REST 也是一个定义明确的正式系统，是表示 Web 上可用资源的绝佳模型（因此称为 REST）

话虽如此，使用 REST 很容易犯很多新手错误，所以先用谷歌搜索一下如何使用它，你会很高兴你做到了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T12:17:31.317

这是一个很好的问题。除非您利用超媒体进行发现和标准媒体格式，否则您不太可能获得 REST 的好处。您不妨坚持使用 XML-RPC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T07:53:26.897

简单的答案：REST 往往更容易实现

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-02T08:48:18.713

网上有很多讨论，所以我不会深入回答。简而言之：这很容易。易于编写，易于理解，易于调试。你可以把它写在你的浏览器上，它可能会带回一些有用的东西。很好。

这种轻松是以更少的“可能性”为代价的，但理论认为，从长远来看，轻松可能更有价值。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-29T23:56:19.210

REST 是 Web 的原生架构风格。（事实上​​，它是从 Web 已经工作的方式逆向工程的。） XML-RPC 和 SOAP 尝试采用一种非常不同的（过程式、命令式）编程模型并将其适应 Web。结果是 REST 最终变得更干净、更灵活。

# c - MPI：一次锁定标准输出——1个进程？

> ID：708739
> 
> 赞同：0
> 
> 时间：2009-04-02T07:54:50.590
> 
> 标签：c, synchronization, mpi

我想打印出每个进程的整数数组的内容。问题是，由于比赛条件，一切都很混乱。

什么是最简单的解决方案？我不想调试。我想显示内容，因为我正在做排序算法。所以在排序前后显示是很有用的。

我在lock.c中添加了这个：

```
#include <stdio.h>
static int lock=0;   //Don't use if timing execution
void capture(int rank) {
    while(lock!=0);
    lock = 1;
    printf("\nCaptured by %d\n", rank);
}
void release() {
    lock = 0;
} 
```

并在打印之前调用 capture()，然后在打印后调用 release()。是的，这是一个类似信号量的 hack。但它不起作用，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-07T12:10:05.450

假设您使用的是收集所有进程的 STDOUT 的 MPI，您可以使用 MPI_Barrier() 来强制执行排序，如下所示：

```
for( int i = 0; i < size; ++i ) {
    MPI_Barrier( MPI_COMM_WORLD );
    if ( i == rank ) {
         printf( "..." );
    }
 } 
```

当然，这是低效的，但它可能比安排将所有信息发送回 0 级要简单一些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T08:11:38.693

假设您指的是消息传递接口，最好的方法是将输出字符串写入缓冲区并将它们发送到 rank 0 进程。此过程不应用于执行实际工作，而应仅用于过滤和输出输出字符串。

让其他队伍去做真正的工作。我认为您的上述解决方案不会起作用，因为我是每个级别的本地人。

您也不想使用消息传递来阻止各个等级（直到他们可以输出），因为他们将无法同时进行排序工作。

只需让从 1 到 N 的每个等级都完成它的工作并将字符串发送到等级 0。字符串可以是`"NNN:SSSSSS"`其中 N 是等级而 S 是字符串的形式。然后 Rank 0 可以过滤掉特定消息或将不同的消息写入不同的文件，然后在所有工作 rank 关闭后将它们组合（排序）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T08:09:26.513

每个进程都有自己的变量副本。所以它不是共享的，你不能用它来同步。

# memory - 什么是“标记内存”？

> ID：708740
> 
> 赞同：3
> 
> 时间：2009-04-02T07:54:57.720
> 
> 标签：memory

什么是“标记内存”以及它如何帮助减少程序大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-11-24T06:54:16.173

您可能指的是带[标签的 union](http://en.wikipedia.org/wiki/Tagged_union)，或者更具体地说是硬件实现，例如 LISP 机器中使用的带标签的体系结构。基本上是一种使用类型信息存储数据的方法。

在 LISP 机器中，这是通过使用更长的字长并使用一些额外的位来存储类型信息在内存中完成的。标签的处理和检查是在硬件中隐式完成的。

有关类型安全的 C++ 实现，请参阅 boost:variant。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T08:18:16.960

不确定，但您可能指的是[垃圾回收](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)，这是自动处理在运行程序时创建的不再使用的对象的过程。

“标记内存”可以是[mark-and-sweep](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Naive_mark-and-sweep)的同义词，这是实现垃圾收集的最基本方式。

如果这都是错误的，请编辑您的问题以澄清。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-01-11T05:50:48.823

Windows DDK 在从内核页面池中分配内存时使用“池标记”。每次分配占用 4 个字节的内存，但允许您标记（即标记）内核内存的部分，这可能有助于调试和检测内存泄漏。

顺便说一句，我看不出任何所谓的“标记内存”如何减少程序代码大小。这听起来像是额外的工作，翻译为“更多代码”和“更大的程序”。也许它是为了以某种方式减少内存占用？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T11:26:56.790

[这是](http://basen.oru.se/kurser/koi/2008-2009-p1/texter/gc/index.html)关于如何将其用于垃圾收集的实现细节的更多技术描述。您可能还想查看有关[标记指针](http://en.wikipedia.org/wiki/Tagged_pointer)的维基百科文章。

# c++ - C++ std::transform 副作用

> ID：708742
> 
> 赞同：6
> 
> 时间：2009-04-02T07:55:10.573
> 
> 标签：c++, stl

我已经像这样实现了 UnaryOperation

```
struct Converter
{
    Converter( std::size_t value ):
        value_( value ), i_( 0 )
    {}
    std::string operator() ( const std::string& word )
    {
        return ( value_ & ( 1 << i_++ ) ) ?
            word:
            std::string( word.size(), ' ' );
    }
    std::size_t value_;
    std::size_t i_;
}; 
```

我像使用它一样

```
std::vector v;
// initialization of v  
std::transform( v.begin(), v.end(),
                std::back_inserter( result ),
                Converter( data ) ); 
```

我的**问题**是我是否可以依赖我的假设，即算法将按照“Converter::i_”对应于“v”中元素数量的顺序调用我的“转换器运算符 ()”。

请引用标准以防我不能依赖订单或放置类似 stl 的解决方案以避免可能的问题（如果有）。

谢谢。

**编辑：** 

我知道转换算法标准中的“无副作用”要求。对于相同标准的函子，我找不到确切的“副作用”。

也许这个任务有一些好看的类似增强的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-02T09:17:38.363

来自标准：

> 25.2.3 Transform [lib.alg.transform]
> 要求：
> op 和 binary_op 不得有任何副作用。

[副作用（维基百科定义）](http://en.wikipedia.org/wiki/Side_effect_(computer_science))

在您的情况下，我们有下一个副作用：

```
Converter c( data );  
c( some_const_value ) != c( some_const_value ); 
```

您对算法没有任何保证，但我相信它几乎适用于所有 stl 实现。

**建议的解决方案**
似乎我知道一种方法可以满足您的需求：
使用 boost::counting_iterator - 迭代两个容器；

它看起来像：

```
bool bit_enabled( size_t data, unsigned char number )
{
    return ( data & 1 << number ) != 0;
}

std::string select_word( 
                const std::string& word,
                size_t data, 
                size_t number )
{
    return bit_enabled( data, number ) ? word : std::string( ' ', word.length() );
}

const size_t data = 7;
const boost::array< std::string, 3 > vocabulary = { "a", "b", "c" };
std::vector< std::string > result;
std::transform(
    vocabulary.begin(),
    vocabulary.end(),
    boost::counting_iterator< size_t >(0),
    back_inserter( result ),
    boost::bind( &select_word, _1, data, _2 )
); 
```

另外，如果您将定义位迭代器或将使用一些位容器，您将可以使用 boost::zip_iterator 来迭代这两个容器。

**编辑：**
昨天我发现[感兴趣的文章](http://www.ddj.com/cpp/184403769)包含标准的副作用定义。

> 标准对副作用的定义如下：访问由 volatile 左值指定的对象、修改对象、调用库 I/O 函数或调用执行任何这些操作的函数都是副作用，它们是执行环境的状态。

**编辑：**
我希望这将是最新的编辑。
我一直坚信“没有副作用”的意思是：
f(a) 应该始终等于 f(a)。（ f 独立于执行环境：内存/cpu/全局变量/成员变量，如您的情况等）。
“不产生副作用”的意思是——不改变执行环境。

但是在 c++ 标准中，我们对副作用有更多的低级定义。

将您在示例中所做的事情命名为**有状态**函子。
标准没有说“全状态”函子，也没有说函子的副本数——你不能使用这个技巧，因为它是未指定的行为。

请参阅标准库问题列表（ predicat 的类似问题）：
[http ://anubis.dkuug.dk/jtc1/sc22/wg21/docs/lwg-active.html#92](http://anubis.dkuug.dk/jtc1/sc22/wg21/docs/lwg-active.html#92)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T09:17:29.563

我刚刚检查了标准，如果我理解正确，答案是否定的。“转换”的描述有以下附加要求（25.2.3）：

> **要求**： op 和 binary_op 不应有任何副作用。

回到记忆深处，我记得[Nicolai Josuttis](http://www.josuttis.com/)在[ACCU](http://accu.org/)会​​议上的一次演讲，他展示了对于特定类型的容器和 STL 实现，函数对象被复制了。[Éric](https://stackoverflow.com/users/59781/201ric-malenfant)提供[了](http://www.ddj.com/cpp/184403769)Dobb 博士文章的链接，该文章更详细地讨论了这些差异。

**编辑：** 替代解决方案：

*for_each*算法没有此限制，因此您可以更改 Converter 对象以引用结果向量并在 Converter 函数中执行 push_back 。

```
struct Converter
{
  Converter( std::size_t value, std::vector<std::string> & result ):
      value_( value ), i_( 0 ), result_(result)
  {}
  void operator() ( const std::string& word )
  {
    result_.push_back ( value_ & ( 1 << i_++ ) ) ?
             word:
             std::string( word.size(), ' ' );
  }
  std::size_t value_;
  std::size_t i_;
  std::vector<std::string> & result_;
}; 
```

并使用*for_each*而不是*transform*：

```
std::vector v;
// initialization of v  
std::for_each ( v.begin()
              , v.end(),
              Converter( data, result ) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T23:45:02.810

作为副作用肯定是*坏事*的例子，考虑一个假设的并行 STL 实现，它在多个 CPU 之间分割工作。

我相信这是 STL 的作者的想法。最初的 STL 来自 SGI，它是构建大规模并行单图像和集群系统的较大名称之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T08:00:46.473

是和不是。这是因为您将迭代器提供给您的`Converter`对象。对于像`vector`您这样的序列容器，`i`可以对应元素的顺序。但是，对于像这样的关联容器`map/multimap/set/multiset`可能无效（很可能无效）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-02T09:27:05.533

我相信在某些情况下答案是肯定的，但也有一些确定的情况不是。如果无法回忆起哪个（对不起），并且为了使代码不那么脆弱，我不会依赖它并将 i 保持在仿函数之外以确保安全。即里面`Converter`做：

`Converter( std::size_t value, std::size_t& i ): value_( value ), i_ ( i ) {}`
然后
`std::size_t &i_;`

调用

`std::vector v;`
`std::size_t i(0);`
`// initialization of v`
`std::transform( v.begin(), v.end(), std::back_inserter( result ), Converter( data, i ) );`

凌乱，但更安全。

# java - 同一包的类可以分布在多个 Jar 文件中吗？

> ID：708744
> 
> 赞同：19
> 
> 时间：2009-04-02T07:56:51.660
> 
> 标签：java, jar

我正在使用 JAR 文件中的一些类，它们属于一个包 (com.abc.xyz)。

我正在编写的课程也属于那个包，但我无法将我的文件捆绑到那个 JAR 文件中。是否可以将属于同一包的类分布在多个 JAR 文件中？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-02T08:31:12.077

默认情况下，绝对。

但是，如果您*想*确保特定包中的类仅从*一个*jar 文件加载，您可以[将该信息添加到 manifest](http://java.sun.com/docs/books/tutorial/deployment/jar/sealman.html)中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-02T08:35:51.613

除非 JAR 已[密封](http://java.sun.com/docs/books/tutorial/deployment/jar/sealman.html)包装，否则这是完全可行的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-02T07:58:57.350

我不明白为什么不可能。重要的是类在类路径中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-02T13:52:32.960

这可能不是您应该想做的事情。如果它在同一个包中，是否应该不打包在一起（我相信 Jigsaw 打算允许在模块之间拆分包，但这是另一回事）。

如果清单中任何一个包裹被标记为已密封，则可以阻止它。当然，我建议将整个罐子标记为密封。

如果类上有不同的签名者并且类由同一个类加载器加载，它也可以被阻止。

如果您使用不同的类加载器加载类，尽管“命名空间”将是相同的，但您实际上不会获得包（和受保护的相关部分）访问权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-23T12:09:39.547

有时，如果您想扩展第三方库的功能但它们不是开源库和/或您没有源代码，则有时必须这样做

# asp.net - 为什么 System.Environment.Version 报告框架 2？

> ID：708747
> 
> 赞同：3
> 
> 时间：2009-04-02T07:58:53.577
> 
> 标签：asp.net

在针对 Framework 3.5 的网站中，在安装了最多 3.5 SP 1 的机器上，当我在页面中调用 System.Environment.Version 时，它报告 2.0.50727.3053。谁能建议为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-02T08:00:58.483

它告诉你 CLR 版本，仍然是 2.0x；它在 .NET 4.0 中跃升至 4.0 倍——但在那之前，所有 .NET 2.0、.NET 3.0 和 .NET 3.5 都共享一个 CLR 版本（给或取小数字；-p）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T08:01:11.587

因为 .NET framework 3.5 的底层 CLR 仍然是 2.0.50727.3053。

.NET 3.0 和 3.5 是对 .NET 2.0 的补充——底层 CLR 仍然相同。

这将随着带有新 CLR 4.0 的 .NET 4.0 而改变。

马克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T08:02:11.367

[Environment.Version 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.environment.version.aspx)这样说：

获取一个 Version 对象，该对象描述公共语言运行时的主要、次要、内部版本和修订号。

3.5 SP1 中的 CLR 版本仍然是 2.0。

因此，没有错误，它的行为与记录的完全相同。

# http - http流

> ID：708751
> 
> 赞同：2
> 
> 时间：2009-04-02T07:59:56.647
> 
> 标签：http, streaming

是否可以在不使用任何流媒体服务器的情况下进行 http 流媒体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T08:17:58.210

当然。您可以输出和刷新，它会在您结束脚本之前到达客户端，因此它是流式传输的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-02-26T13:16:43.887

对于仅分段的实时流媒体，例如 Apple HLS，目前还没有广泛支持分段 HLS 的其他变体（例如 OSMF）。来自微软的 IIS 也可以进行流畅的流式传输（Apple HLS 也是如此）。当您将流预先分段为块并仅上传到 Web 服务器路径时，任何 Web 服务器都可以支持 Apple HLS。

对于 VoD 流媒体，所有 Web 服务器都有很多模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-20T21:09:52.193

是的，尽管图书馆有不同程度的支持。需要使用的是“http 分块”，这样 lib 不会尝试在内存中缓冲整个请求/响应（以计算内容长度标头），而是指示内容以块的形式出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-06-13T07:30:34.923

是的，这不仅是可能的，而且已经被各种媒体服务器公司实施，唯一的原因是他们仍然出于商业目的使用服务器。基本上，您要流式传输的内容应分为块/数据包，然后客户端机器可以通过简单的 HTTP 获取请求来请求这些块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-03T19:52:39.553

是的，您的 http 流媒体问题的答案是 MPEG-DASH 技术

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-25T22:09:26.387

好吧，如果您有可用的 WebSockets，您实际上可以通过将视频帧作为 jpeg 发送来为低 fps 场景获得相当低的延迟流。

您还可以单独发送音频并使用浏览器上的 WebAudio 播放。我想它可以适用于不需要完美音视频同步的场景。

另一种方法是通过 WebSocket 流式传输 MPEG 块，使用 jsmpeg 在 JS 中对其进行解码并渲染到画布上。您可以在此处找到更多信息（仅限视频）：

[http://phoboslab.org/log/2013/09/html5-live-video-streaming-via-websockets](http://phoboslab.org/log/2013/09/html5-live-video-streaming-via-websockets)

# ios - OpenGL ES 1.1 中 glDrawPixels() 的等价物是什么？

> ID：708760
> 
> 赞同：2
> 
> 时间：2009-04-02T08:02:54.063
> 
> 标签：ios, opengl-es

谁能告诉我[`glDrawPixels()`](http://techpubs.sgi.com/library/tpl/cgi-bin/getdoc.cgi?coll=0650&db=man&fname=/usr/share/catman/g_man/cat3/OpenGL/gldrawpixels.z)OpenGL ES 1.1 中的等价物吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T09:19:35.783

你被迫使用纹理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T08:43:02.737

将您的像素坐标放入顶点数组并使用 GL_POINTS 绘制它。

看[http://gorillas.lyndir.com/trac/browser/Classes/SkyLayer.m](http://gorillas.lyndir.com/trac/browser/Classes/SkyLayer.m)（[大猩猩](http://gorillas.lyndir.com)代码）

[编辑] 此解决方案仅在您在屏幕上绘制点时才有用。当我发布它时，我不知道 glDrawPixels() 是什么，并假设绘制点是问题所在。

不要使用它来绘制任意像素数据......

# python - SQLAlchemy - 插入或替换等效项

> ID：708762
> 
> 赞同：13
> 
> 时间：2009-04-02T08:05:37.380
> 
> 标签：python, sqlalchemy

有人知道 SQLAlchemy 及其 SQL 表达式语言中的 SQL“INSERT OR REPLACE”子句的等价物吗？

非常感谢 - honzas

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2010-04-08T17:58:19.457

怎么样`Session.merge`？

```
Session.merge(instance, load=True, **kw) 
```

将实例的状态复制到具有相同标识符的持久实例上。

如果当前没有与会话关联的持久实例，它将被加载。返回持久实例。如果给定实例未保存，则保存副本并将其作为新的持久实例返回。给定的实例不会与会话关联。如果关联映射为 cascade="merge"，则此操作级联到关联实例。

来自[http://www.sqlalchemy.org/docs/reference/orm/sessions.html](http://www.sqlalchemy.org/docs/reference/orm/sessions.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-02T08:11:02.127

```
Session.save_or_update(model) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-02T12:10:45.623

我不认为（如果我错了，请纠正我）INSERT OR REPLACE 在任何 SQL 标准中；这是一个特定于 SQLite 的东西。有 MERGE，但也不是所有方言都支持。所以它在 SQLAlchemy 的通用方言中是不可用的。

正如 M. Utku 所建议的，最干净的解决方案是使用 Session。您也可以使用 SAVEPOINTs 保存，尝试：插入，除了 IntegrityError: 然后回滚并执行更新。第三种解决方案是使用 OUTER JOIN 和 WHERE 子句编写您的 INSERT，该子句过滤具有空值的行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-04-21T14:35:43.337

你可以在你的 SQLAlchemy中使用`OR REPLACE`所谓的——关于如何在你的 SQL 语句之间和中放置的文档是[here](http://www.sqlalchemy.org/docs/core/expression_api.html?highlight=prefix#sqlalchemy.sql.expression.Insert.prefix_with)`prefix``Insert``OR REPLACE``INSERT``INTO`

# command-line - 一根线逐块提取数据

> ID：708768
> 
> 赞同：3
> 
> 时间：2009-04-02T08:10:20.740
> 
> 标签：command-line, text

我总是处理由以下格式的许多数据块组成的数据文件：

```
*name* attr (
        VALID (
                late_lead_up xxx ar uclk reff xxx slope xxx
                late_lead_dn xxx af uclk reff xxx slope xxx
                early_trail_up xxx af uclk reff xxx slope xxx
                early_trail_dn xxx ar uclk reff xxx slope xxx
              )
        CEXT xxx
        CREF xxx
        REFF xxx
        QUALIFIED_CLOCK
) 
```

无论如何我可以从命令行中提取我有兴趣使用单行符的“名称”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T08:29:41.130

将此文件用于演示目的：

```
of_interest attr (
    1:VALID (
        1:late_lead_up xxx ar uclk reff xxx slope xxx
        1:late_lead_dn xxx af uclk reff xxx slope xxx
        1:early_trail_up xxx af uclk reff xxx slope xxx
        1:early_trail_dn xxx ar uclk reff xxx slope xxx
    1:)
    1:CEXT xxx
    1:CREF xxx
    1:REFF xxx
    1:QUALIFIED_CLOCK
)

boring attr (
    2:VALID (
        2:late_lead_up xxx ar uclk reff xxx slope xxx
        2:late_lead_dn xxx af uclk reff xxx slope xxx
        2:early_trail_up xxx af uclk reff xxx slope xxx
        2:early_trail_dn xxx ar uclk reff xxx slope xxx
    2:)
    2:CEXT xxx
    2:CREF xxx
    2:REFF xxx
    2:QUALIFIED_CLOCK
)

of_interest attr (
    3:VALID (
        3:late_lead_up xxx ar uclk reff xxx slope xxx
        3:late_lead_dn xxx af uclk reff xxx slope xxx
        3:early_trail_up xxx af uclk reff xxx slope xxx
        3:early_trail_dn xxx ar uclk reff xxx slope xxx
    3:)
    3:CEXT xxx
    3:CREF xxx
    3:REFF xxx
    3:QUALIFIED_CLOCK
) 
```

这个单行（为了便于阅读而拆分）：

```
awk '
    BEGIN               {s=0}
    /^of_interest /     {s=1}
    /^)$/               {if (s==1) {print};s=0}
                        {if (s==1) print}' 
```

或最低字符版本：

```
awk 'BEGIN{s=0}/^of_interest /{s=1}/^)$/{if(s==1){print};s=0}{if(s==1)print}' 
```

给你：

```
of_interest attr (
    1:VALID (
        1:late_lead_up xxx ar uclk reff xxx slope xxx
        1:late_lead_dn xxx af uclk reff xxx slope xxx
        1:early_trail_up xxx af uclk reff xxx slope xxx
        1:early_trail_dn xxx ar uclk reff xxx slope xxx
    1:)
    1:CEXT xxx
    1:CREF xxx
    1:REFF xxx
    1:QUALIFIED_CLOCK
)
of_interest attr (
    3:VALID (
        3:late_lead_up xxx ar uclk reff xxx slope xxx
        3:late_lead_dn xxx af uclk reff xxx slope xxx
        3:early_trail_up xxx af uclk reff xxx slope xxx
        3:early_trail_dn xxx ar uclk reff xxx slope xxx
    3:)
    3:CEXT xxx
    3:CREF xxx
    3:REFF xxx
    3:QUALIFIED_CLOCK
) 
```

我相信这就是你所追求的。

它基本上是一个简单的状态机，当它找到所需的块开始时打开打印，并在找到该块的结尾时关闭它。

**更新**：这是一个 perl 单行代码，可以满足您的qualified_clock 要求。享受 ：-）

```
perl -e '$s=1;while(<STDIN>){if(/^of_interest /){$s=1;$f=0;$x="";}if(($s==1)&&/QUALIFIED_CLOCK/){$f=1;}if(/^\)$/){if($s==1){$x.=$_;}if($f==1){print$x;}$s=0;next;}if($s==1){$x.=$_;}}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T10:25:13.770

[比Pax 少得多的](https://stackoverflow.com/users/14860/pax) [字符](https://stackoverflow.com/questions/708768/one-liner-to-extract-data-block-by-block/708806#708806)和更简单的解决方案

```
perl -ne '/^of_interest /../^\)/ and print' 
```

或者

```
awk '/^of_interest /,/^\)/{print}' 
```

或者

```
sed -n '/^of_interest /,/^)/p' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T08:25:22.467

如果你的块总是以' `*name* attr (`'开头并且总是以''结束并且`)`没有前导空格，你可以尝试（假设这`foo`是块名称并且`data.txt`是要解析的文件）：

```
awk '/ attr \($/ {if($1==n)b=1}  {if(b)print}  /^\)$/ {b=0}' n=foo data.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T08:27:16.707

好吧，你给它贴上了 Perl 的标签，所以这是我在 Perl 中的做法：

```
#!/usr/bin/perl

use strict;
use warnings;

die "usage: $0 name datafile\n    or cat datafile | $0 name\n" 
    unless @ARGV > 0;

my $name = shift;
my $re   = qr/\A$name attr/; 

my $rec = '';
while (my $line = <>) {
    $rec .= $line;
    next unless $line =~ /^\)/;
    print $rec if $rec =~ /$re/;
    $rec = '';
} 
```

你可以把它变成这样的单线

```
perl -ne '$a.=$_;next unless/^\)/;print$a if$a=~/^name/;$a=""' datafile 
```

但我更喜欢剧本。请记住将 name 替换为记录的名称。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-02T08:52:26.677

这是将其作为 Perl 单线的一种方法：

```
perl -ne '$m = 1 if /^insert_name_here attr/; print if $m; $m = 0 if /^\)$/' file.txt 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-04-02T09:23:22.560

我在您对另一个答案的评论中看到，您还想在块中搜索像“QUALIFIED_CLOCK”这样的字符串。

在这种情况下，**如果您的数据块被一个空行分隔，**您可以使用 Perl 的段落模式以块的形式读取它并打印出您感兴趣的部分。例如：

```
perl -00 -ne 'print if /^block_name/ and /QUALIFIED_CLOCK/' file.txt 
```

这也可以通过设置 RS 在 awk 中实现。

# agile - 如何教育开发经理了解软件设计的困难？

> ID：708775
> 
> 赞同：2
> 
> 时间：2009-04-02T08:16:05.563
> 
> 标签：agile, process

我遇到过一些开发经理，他们似乎不理解或不理解软件设计和实现的困难。

这些经理认为流程和方法完全解决了问题，我很难向他们解释事实并非如此，而且你不能阅读一本关于最新流程时尚的书，并希望通过按原样应用它们来获得结果。

我最近遇到的挫折是说服我的经理 (a) 给我的要求不是零碎的，而是尽可能多的一组。(b) 让我的团队有时间考虑如何设计、提出一些备选方案、制定实施草图、计划任务等。

由于敏捷方法论和对它的解释，即不进行前期设计（与瀑布中的 BIG 前期设计相反），产品所有者可以随时更改需求等等，挫败感更加复杂。

到目前为止，我还没有取得太大的成功，不得不忍受由此产生的挫败感。你能给我一些可以说服这些管理者的论据吗？

**EDIT-1**：回顾已经完成，尽管并不总是在每个 sprint 结束时进行，并且提出了问题。但正如我所提到的，我的经理不理解设计提前期的需要以及零碎的要求所带来的挫败感。

**EDIT-2** 我对更改要求没有问题。我知道它会是这样，但想象一下：你想要一个小功能开始，然后你不断地在它周围添加更多功能。经过几次迭代后，设计无法再处理它，需要重新设计（而不是重构）。如果将相关功能一起研究，那么首先通过前期设计可以更好地解决这个问题。它不是 BDUF，它是自然的方式（我称之为软件工程常识）。

我的经理不明白我为什么要花时间重新设计（有几次我只是称它为重构，以便它适合敏捷的方式，但它确实是重新设计）而不是开发和演示新功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T08:35:48.713

每次需求发生变化（或增加）时，也应如此

*   完成的估计，并且，
*   风险评估

每次获得更新的或新的需求时，开始提供更新的估计（即使您必须猜测）和风险列表。这将帮助您的经理建立联系。

尝试本着乐于助人的精神——“出于计划目的”——这样做，这样你就不会被认为是阻碍或缺乏“可以做的态度”。请记住，估计可以（理论上）下降，并且可以降低风险。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T16:47:47.433

无论您在哪里工作，业务需求都会发生变化。这不是你的错，不是你老板的错，也不是任何人的错。采取零碎的要求的全部目的是鼓励您考虑手头的问题，而不是您可能需要或可能不需要解决的其他问题。一旦你进入它的节奏，它就会非常自由。

将前期设计视为过早的优化。您可能不需要它，即使您知道自己需要它，两周后您对您的设计的了解也会比今天了解的更多。它将帮助您以关于代码状态的最佳知识来解决您的工程问题。

话虽如此，edg 是绝对正确的。当您添加更多需求时，估计值会发生变化。这不是开发人员或其他任何人的错。更多的工作意味着更多的工作，无论你如何调整它。如果您的老板没有意识到添加需求会导致对项目进行更大的估算，您需要向他解释敏捷并不是一个可以让您添加更多功能而无需支付任何费用的灵丹妙药。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T11:44:02.480

敏捷简单设计并不意味着不要预先进行任何设计/架构。这意味着预先做最小的设计，这样你就不会为合理的变更请求付出可怕的代价。

Scott Ambler 谈论变更案例 - [http://www.agilemodeling.com/artifacts/changeCase.htm](http://www.agilemodeling.com/artifacts/changeCase.htm) James Coplien 谈论敏捷架构 - [http://www.infoq.com/presentations/Agile-Architecture-Is-Not-Fragile -Architecture-James-Coplien-Kevlin-Henney](http://www.infoq.com/presentations/Agile-Architecture-Is-Not-Fragile-Architecture-James-Coplien-Kevlin-Henney) [http://blog.jaoo.dk/2009/03/04/handling-architecture-in-the-agile-world/](http://blog.jaoo.dk/2009/03/04/handling-architecture-in-the-agile-world/)

所有这一切的艺术/工艺在于如何以允许的方式对架构进行切片：

*   整体架构/基础设施的收敛速度相对较快——估计的开发时间大约为每月数天。
*   根据每个功能/要求开发“刚刚好”的架构/基础设施
*   与专注于今天的特点相比，为未来做适当的准备。

重要的是你的产品负责人也要意识到所有这些平衡行为，并且你们要协同工作。他应该明白，如果你不顾一切对未来的思考，每一次改变都将是非常昂贵的。灵活性是要付出代价的。

顺便说一句，它与 QA 和测试自动化的投资非常相似。你现在支付一些东西，只有在你测试代码 X 次后才会得到回报。如果代码从不改变，那就是浪费精力。但是每个人都知道大多数代码都会更改...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T08:38:36.180

给你的经理买[这本书](https://rads.stackoverflow.com/amzn/click/com/1590593898)。这就是我所做的，而且效果很好:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-03T21:10:06.813

首先这个问题似乎比较敏感，所以我在下面写的只是我个人的看法，不一定是明智的做法。

在我看来，如果你不知道它应该解决什么问题，你就无法制作软件。如果需求的小部分太小而无法监督问题，那么我只会就似乎缺少的部分提出问题。比如：“好吧，所以软件应该做 X，但这是否也意味着 Y 或者 Z？因为如果是 Y 那么......但如果是 Z 那么......”当然如果经理在中间提取需求然后他无法回答，但至少他知道仍然存在影响开发的悬而未决的问题。

About no lead time for design: design and development are an iterative process that could go hand in hand. It is just how you name the thing. If the manager wants to see some code at the end of the day, okay then I would just use the first half of the day to design and the second half of the day to make some code based on that design. If the manager does not want to see the design, fine with me then I'll just show the code.

# reporting - 一个好的报表设计工具/库

> ID：708776
> 
> 赞同：0
> 
> 时间：2009-04-02T08:16:34.593
> 
> 标签：reporting, report-designer

我必须定期制作多份报告；为整个客户群生成相同的报告。我的问题是设计报告的布局是一项漫长而乏味的工作。

我需要的是一个用于设计报告布局的 GUI 工具。

该工具的输出应该是用于批量创建报告的 xsl 文件。附加选项是收费将提供一个库，该库将允许基于 GUI 布局定义构建自定义批处理以创建报告。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T09:08:17.510

如果我理解正确，您正在使用来自 XML 数据的 HTML 格式的报告，对吗？如果报告不是“XSL 文件”条件，请尝试一些报告工具。他们有设计师，导出到 pdf/html/doc/etc...，还有一些最终用户设计师等等。

[我对类似问题的回答：Crystal Reports .Net Guidance](https://stackoverflow.com/questions/116324/crystal-reports-net-guidance/116371#116371)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T09:16:08.663

我们（我工作的公司）生产了一个名为[RSinteract](http://www.rsinteract.com)的工具。我不知道这是否正是您要查找的内容，因为您尚未指定要报告的数据源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-04T00:04:12.600

如果您正在寻找开源工具，请尝试使用BIRT ( [http://www.eclipse.org/birt/ )。](http://www.eclipse.org/birt/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-09T05:28:41.017

如果您想坚持使用 XSL [Altova 的 Stylevision 产品](http://www.altova.com/products/stylevision/xslt_stylesheet_designer.html)。如果您有兴趣查看以另一种 XML 方言保存报告的第三方工具，请查看我们的产品，网址为[http://www.datadynamics.com](http://www.datadynamics.com)

```
Scott Willeke
Data Dynamics / GrapeCity 
```

# .net - vs 2008 javascript intellisense in XML 文件问题

> ID：708780
> 
> 赞同：2
> 
> 时间：2009-04-02T08:18:04.247
> 
> 标签：.net, javascript, xml, visual-studio-2008, intellisense

我正在尝试让 javascript intellisense 在 .xml 文件中为 jQuery 工作。我已经使用自定义 XSD 为 XML 提供智能感知。在标签下，我混合了 HTML 和 javascript，它们由 . 而且它都是灰色的，所以那里没有智能感知。

添加 /// 也无济于事。

在 XML 文件中编写 javascript 时，我真的希望能够拥有智能感知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-23T17:32:58.900

[http://blogs.msdn.com/webdevtools/archive/2008/11/07/hotfix-to-enable-vsdoc-js-intellisense-doc-files-is-now-available.aspx](http://blogs.msdn.com/webdevtools/archive/2008/11/07/hotfix-to-enable-vsdoc-js-intellisense-doc-files-is-now-available.aspx)

这是对 java 脚本智能感知的热修复，可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T12:09:24.923

我可以通过调整工具-> 选项-> 文本编辑器-> 文件扩展名一次使javascript intellisense 或xml intellisense 工作，但不能同时工作。

这让我认为这应该在某个地方进行更多调整。注册表？

# zend-framework - 如何使用 Zend DB 获取列名

> ID：708782
> 
> 赞同：11
> 
> 时间：2009-04-02T08:18:42.047
> 
> 标签：zend-framework, zend-db

如何使用 Zend DB 获取列名

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-09-21T09:20:15.223

这是正确的答案，旧的答案是错误的或过时的：

```
$cols = $table->info(Zend_Db_Table_Abstract::COLS); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-02T08:29:17.573

```
$metadata = $db->describeTable($tableName);
$columnNames = array_keys($metadata); 
```

[http://framework.zend.com/manual/en/zend.db.html#zend.db.adapter.list-describe](http://framework.zend.com/manual/en/zend.db.html#zend.db.adapter.list-describe)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-22T10:57:42.630

先前的答案仅适用于版本 < 2。
对于当前版本的 ZF (2.2)，请使用：

```
$table = new Zend\Db\TableGateway\TableGateway('table', $Dbadapter, new Zend\Db\TableGateway\Feature\MetadataFeature());
$columns = $table->getColumns(); 
```

[http://framework.zend.com/manual/2.2/en/modules/zend.db.table-gateway.html#tablegateway-features](http://framework.zend.com/manual/2.2/en/modules/zend.db.table-gateway.html#tablegateway-features) [http://framework.zend.com/manual/2.2/en/modules/zend .db.metadata.html](http://framework.zend.com/manual/2.2/en/modules/zend.db.metadata.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T08:23:06.980

您可以使用 describeTable 方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-23T21:25:16.773

我喜欢这种方式：

```
$table->info('cols'); 
```

# c# - 用于数据库持久性的 c# 对象相等性

> ID：708786
> 
> 赞同：0
> 
> 时间：2009-04-02T08:22:28.603
> 
> 标签：c#, class, object, persistence, equality

我想了解其他人如何应对以下情况。

这不是家庭作业或任何形式的任务。创建示例类是为了更好地说明我的问题，但它确实反映了我们希望得到反馈的现实生活场景。

我们从数据库中检索所有数据并将其放入一个对象中。一个对象代表一条记录，如果数据库中存在多条记录，我们将数据放入记录对象的 List<> 中。

假设我们有以下课程；

```
 public class Employee
    {
        public bool _Modified;
        public string _FirstName;
        public string _LastName;
        public List<Emplyee_Address> _Address;
    }

    public class Employee_Address
    {
        public bool _Modified;
        public string _Address;
        public string _City;
        public string _State;
    } 
```

请注意，为清楚起见，类中省略了 Getter 和 Setter。在任何代码警察指责我没有使用它们之前，请注意仅在此示例中省略了。

该数据库有一个员工表和另一个员工地址表。

从概念上讲，我们所做的是创建一个 List 对象来表示数据库表中的数据。我们对该对象进行深度克隆，然后将其绑定到前端的控件。然后我们有两个对象（Orig 和 Final）代表数据库中的数据。

然后用户通过创建、修改、删除记录对“最终”对象进行更改。然后我们希望将这些更改持久化到数据库中。

显然我们希望尽可能优雅，只编辑、创建、删除那些需要它的记录。

我们最终想要比较两个 List 对象，以便我们可以；

1.  查看哪些属性已更改，以便可以将更改持久保存到数据库中。

2.  查看第二个 List<> 中不再存在哪些属性（记录），以便可以从数据库中删除这些记录。

3.  查看新 List<> 中存在哪些新属性，以便我们可以在数据库中创建这些属性。

谁想了解我们如何才能最好地实现这一目标。请记住，我们还需要深入到 Employee_Address 列表以检查是否有任何更改，而不仅仅是顶级属性。

我希望我已经说清楚了，并期待任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T09:01:12.223

将可为空的 ObjectID 字段添加到图层的基本类型。将其传递给前端并返回以查看特定实例是否保留在数据库中。即使您没有任何类型的身份映射，它也有许多其他用途

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T08:33:37.657

`Data`我会在他们的类中做与 .NET 完全相同的事情，即将记录状态（[`System.Data.DataRowState`](http://msdn.microsoft.com/en-us/library/system.data.datarowstate.aspx)想到）和所有相关版本一起保存在一个对象中。

这边走：

*   您可以一目了然地判断它是否已被修改、插入、删除或仍然是原始记录。
*   您可以通过查询新旧版本来快速找到更改的内容，而无需在另一个集合中挖掘旧版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T08:36:24.547

为什么要比较两个列表对象？您可能会使用大量内存来存储本质上是重复的数据。

我建议为每个对象设置一个状态属性，该属性可以告诉您该特定对象是新建、已删除还是已更改。如果您想进一步将属性设置为枚举，则可以将其设置为包含某种字典的对象，该字典包含要更新的更改，尽管这很可能仅适用于已更改状态的情况。

添加此类属性后，应该很容易浏览列表、添加新对象、删除已删除对象等。

您可能还想检查实体框架是如何做这种事情的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T08:45:04.353

您应该研究[身份映射](http://martinfowler.com/eaaCatalog/identityMap.html)模式的使用。与[Unit of Work](http://martinfowler.com/eaaCatalog/unitOfWork.html)相结合，这允许您维护各种对象“缓存”，您可以从中检查哪些对象需要保存到数据库中，并在读取时从身份映射返回对象，而不是创建新对象并返回那些.

# visual-studio-2008 - 在 Visual Studio 2008 中发布外部单元测试结果

> ID：708788
> 
> 赞同：0
> 
> 时间：2009-04-02T08:23:05.280
> 
> 标签：visual-studio-2008, unit-testing, tfs

我得到了一个带有测试结果的 xml 文件。我试图将结果添加到 Visual Studio 2008。除了将无法从 .xml 文件中提取到 .trx 文件的项目名称获取到 .trx 文件之外，我几乎做对了所有事情 问题是 .trx 文件的正确格式是什么所以它会告诉我项目名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T20:03:24.997

.trx 文件实际上并不包含它们所针对的项目的任何信息。

作为参考，如果您要将 NUnit 测试转换为 .trx 以便可以导入它们，您可能需要查看已经提供此功能的[http://codeplex.com/nunit4teambuild 。](http://codeplex.com/nunit4teambuild)

否则，您可能会发现查看[Dominic Hopton](http://blogs.msdn.com/dhopton/archive/2008/06/12/helpful-internals-of-trx-and-vsmdi-files.aspx)解释 trx 文件的一些内部结构的帖子很有用

# java - 帮助了解按下了哪个按钮编号

> ID：708794
> 
> 赞同：2
> 
> 时间：2009-04-02T08:25:26.460
> 
> 标签：java, swing

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.*;
import java.util.Random;
/**
 *
 */
public class GUI
{
    private static final int BTN_MAX = 8;

    private JFrame frame;
    private JPanel panel;
    private JPanel scores;
    private JButton[] buttons;
    private ImageIcon[] icons;

    private Random rand;

    private ImageIcon beach;
    private ImageIcon lips;
    private ImageIcon discoball;
    private ImageIcon flowers;
    private ImageIcon blank;

    /**
     *
     */
    public GUI()
    {        
        beach = new ImageIcon("beach.jpg");
        lips = new ImageIcon("lips.jpg");
        discoball = new ImageIcon ("discoball.jpg");
        flowers = new ImageIcon ("flowers.jpg");
        blank = new ImageIcon ("blank.jpg");

        buttons = makeButtons();
        rand = new Random();
        startingCondition();

        icons = new ImageIcon[] { beach, lips, discoball, lips, beach, flowers, discoball, flowers};

        makeFrame();
        makeMenuBar(frame);        
        frame.pack();
        frame.setVisible(true);

    }

    /**
     * Makes the frame for the gui, inclusive of adding all components.
     */
    private void makeFrame()
    {
        int horizGap = 25; // Using this for spaces between the grid layout components
        int vertGap = 25;  // Using this for the spaces between the grid layout componeents

        frame = new JFrame("Noughts and Crosses");
        Container contentPane = frame.getContentPane();
        contentPane.setLayout(new GridLayout(4,2));//set layout of frame to BorderLayout

        for (int i = 0; i < BTN_MAX; i++){
            contentPane.add(buttons[i]);
        }
    }

    /**
     * 
     */
    private void makeMenuBar(JFrame frame)
    {             
        JMenuBar menubar = new JMenuBar();
        frame.setJMenuBar(menubar);

        JMenu menu;
        JMenuItem item;

        menu = new JMenu("File");
        menubar.add(menu);

        item = new JMenuItem("Reset Entire Game");
            item.addActionListener(new ActionListener() 
            {
               public void actionPerformed(ActionEvent e)
               { 
               }
            });
        menu.add(item);

        item = new JMenuItem("Reset This Game");
            item.addActionListener(new ActionListener() 
            {
               public void actionPerformed(ActionEvent e) 
               { 
               }
            });
        menu.add(item);    

        item = new JMenuItem("Quit");
            item.addActionListener(new ActionListener() 
            {
               public void actionPerformed(ActionEvent e) 
               { 
               }
            });
        menu.add(item);            

        frame.addWindowListener(new WindowAdapter()
        {
            public void windowClosing(WindowEvent e)
            {

            }
        });  

        menu = new JMenu("About");
        menubar.add(menu); 

        item = new JMenuItem("About The Game");
            item.addActionListener(new ActionListener() 
            {
               public void actionPerformed(ActionEvent e) 
               { 
               }
            });
        menu.add(item);
    }    

    /**
     * 
     */
    private JButton[] makeButtons()
    {
        final JButton button[] = new JButton[8];
        for (int i = 0; i < BTN_MAX; i++)
        {
            button[i] = new JButton("");
            button[i].setPreferredSize(new Dimension(200, 100));
            final int tmp = i;
            button[i].addActionListener(new ActionListener()
            {
                public void actionPerformed(ActionEvent e)
                {  
                    checkForPair();
                    takeGo();
                }
            });
        }
        return button;
    }

    /**
     * 
     */
    private void startingCondition()
    {
        for (int i = 0; i < 8; i++){
            buttons[i].setIcon(blank);
        }
    }

    /**
     * 
     */
    public int returnButtonNumber()
    {
        return 0;
        // need to tell which button in the array has been clicked
        //so i can send a value to the takeGo method
        //appropriatley
    }  

    public ImageIcon getIcon(int number)
    {
        return icons[number];
    }

    /**
     * 
     */
    public boolean checkForPair()
    {
        return false;
    }

    /**
     * 
     */
    public void takeGo()
    {
        int i = returnButtonNumber();

        buttons[i].setIcon(getIcon(i));
    }
} 
```

嗨，我只是想知道是否有人可以帮助我确定按下了哪个按钮编号的方法，然后我可以将此值发送到另一个方法以显示适当的图像，欢迎所有想法，但请尝试为了尽可能避免完整的代码，因为我想自己尝试做，例子会很好

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T08:38:21.170

为了尽可能为您提供最少的信息；-)...尝试查看 JButton.setActionCommand()

此外，如果您要为每个按钮使用相同的 ActionListener 并检查哪个按钮被按下，您应该只实例化一次 ActionListener 并将其添加到每个按钮，而不是为每个按钮创建一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T13:46:17.593

`ActionListener`对每个不同的操作使用不同的实例。它很可能是同一个类，可能是用同一个参数化方法中的其他东西构造的。

如：

```
 addItem("Quit", quitCommand);
...
private void addItem(String text, final Runnable command) {
    JMenuItem item = new JMenuItem(text);
    item.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent event) { 
            command.run();
        }
    });
    menu.add(item);  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T09:12:02.167

您可以将 ActionEvent.getSource() 与您的 JButton[] 按钮结合使用，以找出触发该 actionPerformed 的按钮的索引。我希望这足够神秘:)

# python - 共享虚拟主机（对于 Python Django 站点）可以支持多少流量？

> ID：708799
> 
> 赞同：4
> 
> 时间：2009-04-02T08:27:42.960
> 
> 标签：python, hosting, web-hosting, shared-hosting

此线程中的某人

[共享虚拟主机可以占用多少流量？](https://stackoverflow.com/questions/685162/how-much-traffic-can-shared-web-hosting-take)

声明 Reliablesite.net 上 5 美元/月的共享主机帐户可以支持 10,000 - 20,000 个独立用户/天和 100,000 - 200,000 个页面浏览量/天。对于每月 5 美元的帐户来说，这似乎非常高。其他人告诉我，这远不止于此。你有什么经验？

我有一个基于 Python、Django、MySQL/Postgresql 的站点。它没有任何视频或其他带宽重的元素，但整个站点是动态的，每个页面大约需要 5 到 10 个 DB 查询，90% 读取，10% 写入。

Reliablesite.net 是一家 ASP.NET 托管公司。任何 Python/LAMP 托管公司可以在共享托管帐户上支持 100-200,000 次浏览量？如果不是，我在看什么样的数字？对好的托管公司有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T08:47:46.873

100,000 - 200,000 次浏览量/天平均为 2 次浏览量/秒，在繁忙时段最多您将获得 10-20 次浏览量/秒。这不是很多需要处理的，特别是如果你有缓存的话。

无论如何，我会去VPS。共享服务器的问题是你永远无法知道其他人的使用模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T09:41:07.043

Webfaction 托管托管我们的近 10 个站点，每天轻松处理超过 10,000 个用户。我还被告知 Slicehost 也一样好。

Webfaction 和 Slicehost 通常被视为 mod_wsgi python 托管，这正迅速成为托管 django 应用程序的首选方式。

这些主机每月的费用似乎略高一些；但这是值得的，因为它们是可靠的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-11T04:17:48.580

大多数主机支持多个站点，无需额外费用。不要因此而选择 GoDaddy。我从未使用过 GoDaddy 托管，但将它们用于域注册，它们绝对是可怕的。糟糕的用户界面，糟糕的性能。我永远不会相信他们托管一个网站。我使用它们进行域注册的唯一原因是它们似乎是最便宜的选择。

对于共享网络托管，尤其是 Python/Django，我推荐使用 WEBFACTION。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-22T21:33:21.403

我在共享主机上使用 mysql 已经有一段时间了，主要是在每天最多访问 300 次的信息网站上。我发现，主机几乎不能同时支持网站上超过 3 或 4 人，而不会几乎崩溃。

从理论上讲，如果您的用户一次都来一两个，我认为与大多数服务共享主机可以有效地支持大约每小时 60 个用户。这相当于一天内大约有 1500 个用户。然而，这是极不可能的，因为很多用户往往在一天中的某些时间在线，而且您还必须考虑到共享服务器由于服务器上其他人的滥用而变得马虎的事实。

我从可靠的消息来源听说，一些每月 40-50 美元的 vps 托管支持每月 500,000 次点击。我不确定网站配置是什么，我怀疑这些网站运行了许多动态数据库查询，或者可能只是静态的。

共享主机上常见的另一件事是将文件管理器与数据库主机分开。有时您的文件会很好地出现在网上，但运行您的实际网站的数据库会由于邻居的滥用而严重滞后。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-08T14:20:09.837

我与 GoDaddy.com 合作，您可以在同一个托管计划上拥有无限数量的网站，但您仅限于 100 个唯一用户。这意味着您的托管计划中是否有 1 个网站或 1000 个网站并不重要，您的所有网站加起来只能同时有 100 个访问者。在您的 GoDaddy 托管计划中，一些访客可能会离开，一些新访客可能会到达，但一次不会超过 100 人。我自己有 10 个网站，所以如果我有 100 个访问者访问[http://www.milliondollarmysterychallenge.com](http://www.milliondollarmysterychallenge.com)，那么在有人离开之前，我的其他网站都无法获得任何流量！这太臭了！如果有人知道更好的托管地点，请在评论中发布链接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-02T08:29:29.570

如果您的应用程序经过优化，您的共享主机帐户每天可以处理 10k 独立访问者。

[您可以在 WFT ( WebHostingTalk](http://www.webhostingtalk.com) )找到满足您需求的优质主机

最大的托管服务提供商之一是 GoDaddy（我推荐它）。他们使用 Python 的共享托管计划起价为每月 7 美元。有了它们，您可以在同一个帐户上托管多个网站，而无需额外付费。

[http://www.godaddy.com/gdshop/hosting/shared.asp?ci=9009](http://www.godaddy.com/gdshop/hosting/shared.asp?ci=9009)

并查看此优惠： http: [//mediatemple.net/webhosting/gs/features/](http://mediatemple.net/webhosting/gs/features/)

(mt) MediaTemplate 公司没有 GoDaddy 大，但信誉也很好。Reliable.net 太小了。

所以，这里推荐的选项是：

*   [GoDaddy](http://www.godaddy.com) -[信息](http://www.bizshark.com/company/godaddy.com)- [Alexa 排名：~410](http://alexa.com/siteinfo/godaddy.com)
*   [HostGator](http://www.hostgator.com) -[信息](http://www.bizshark.com/company/hostgator.com)- [Alexa 排名：~670](http://alexa.com/siteinfo/hostgator.com)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-10T06:42:51.833

我在 Godaddy 主持。但是我不知道这100个用户同时的事情。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-15T02:17:14.030

这听起来像是每月 5 美元的共享托管服务的延伸。我建议查看 MediaTemple Grid-Service，它每月 20 美元稍贵一些，但更有可能能够处理您的数量并与您一起增长。

# java - .NET 中的 Servlet 和 Applet 对应的是什么？

> ID：708800
> 
> 赞同：13
> 
> 时间：2009-04-02T08:28:06.407
> 
> 标签：java, .net, servlets, applet

我试图了解 .NET 中 servlet 和 applet 的对应对象是什么，但我在 JAVA 方面没有太多经验。

我认为applet 可以与silverlight 的东西进行比较，这意味着您可以独立于浏览器进行编码，但事实并非如此，因为（在其他事物之间）您可以在浏览器之外重用applet。

我需要为基于 JAVA 的大学课程演示 Web 技术，*只要我可以演示相同的东西*，我就可以使用 .NET 。

任何帮助或想法表示赞赏！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-02T08:58:09.347

在 .Net 中，HTTP 处理程序 (.ashx) 可能是最接近 servlet 的东西。至于小程序，没有直接的等价物，但 silverlight 可能是最接近的（尽管它更接近 Flash/JavaFX）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-15T01:59:01.067

我同意 Sandy 的观点，与 JSP 相比，ASP.Net 是最好的（这实际上只不过是一个专门的 servlet）。.Net servlet 模拟似乎是基类 System.Web.UI.Page。

[这很好地总结了比较（下面的示例公然抄袭）](http://www.stardeveloper.com/articles/display.html?article=2003032802&page=1)

```
import javax.servlet.*; 
import javax.servlet.http.*;

import java.io.*;

public class SimpleServlet extends HttpServlet {

    public void doGet(HttpServletRequest request, 
            HttpServletResponse response)
            throws ServletException, java.io.IOException {

        response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        out.println("<html><body>");
        out.println("Simple Servlet Body");
        out.println("</body></html>");

        out.close();
    }
}
//-----------------//
using System; 
using System.Web; 
using System.Web.UI; 

public class SimpleServlet : System.Web.UI.Page
{
    private void Page_Load(object sender, EventArgs args)
    {
        Response.ContentType = "text/html";

        Response.Write("<html><body>");
        Response.Write("Simple Servlet Body");
        Response.Write("</body></html>");
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-09T19:53:35.077

如果不是[Silverlight 2.0](http://silverlight.net/) ， Java 小程序似乎与 .NET 中的[WPF 浏览器应用程序](http://msdn.microsoft.com/en-us/library/aa970060.aspx)有最好的类比。在这方面，Java 和 .NET 之间没有完美的镜像——一些技术在某些方面似乎更相似，而另一些则在不同方面更相似。鉴于 Java 主要是为小程序而开发的，而 .NET 框架是为桌面应用程序开发的，自然会有根本的区别。尽管 WPF 浏览器应用程序当然受限于 Windows 平台（与 Silverlight 不同），但它们可能更类似于小程序，因为它们可以利用整个 .NET Framework 等。此外，正如已经指出的那样，Silverlight 更类似于 JavaFX。

就 servlet 而言，等效物实际上是整个 ASP.NET（此外是 Web 应用程序端，而不是网站），尽管这有点模糊。也许更准确地说，[JavaServer Pages](http://java.sun.com/products/jsp/)最类似于[ASP.NET](http://www.asp.net/)（WebForms 或 MVC [Model-View-Controller]）。在前者 (Java) 的情况下，内容被编译成 Java servlet，而在后者 (.NET) 的情况下，内容被编译成 .NET 程序集。*因此， Web 应用程序*的.NET 程序集可能最类似于 servelet ——尽管说实话，我对 Java 方面的了解还不够，无法得出很多结论。

有趣的是，.NET 和 Java 的历史开始有些不同（诚然，它们都是 VM 框架，并且是受 Java 启发的 .NET），尽管如此，它们在许多方面已经随着时间的推移而融合，所以现在你几乎可以在两者中找到等效的技术在这两个框架中，尽管经常合二为一，开发和/或成功明显更多（Silverlight 是支持 Microsoft 的一个例子，而 applet 可能支持 Sun）。无论如何，希望我至少概述了这两种技术的异同点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T08:31:26.243

.NET 中 Applet 的对应物是 ActiveX 控件。Silverlight 适用于 RIA，类似于 Adob​​e Flash 运行时。

Servlet 可以比作 ASP.NET 页面。关于他们如何进行端到端比较，请阅读 MSDN 上的以下文章， http: [//msdn.microsoft.com/en-us/library/aa478987.aspx](http://msdn.microsoft.com/en-us/library/aa478987.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-15T12:52:40.497

如果您正在尝试做一个演示，并且想要展示 .NET 和 servlet/applet 之间的一些相似之处，那么您可以这样做： 1) Servlet 演示：创建一个直接进入代码隐藏类的 .aspx 文件。使用浏览器调用 .aspx 文件并让代码隐藏类响应。

我使用 servlet 作为经常与 javascript ajax 调用进行通信的一种方式，并且在行为方面没有任何区别，我的 javascript 函数不知道它正在与什么语言或技术进行通信。

2) Applet 演示：这个有点棘手，因为 Silverlight 的设计似乎是为了与 Flash 竞争，但你可以制作一个时钟小部件并将其放在网页上，但你可以通过一些好的设计来解释这一点两者都可以在浏览器之外运行。

最好用两种语言进行演示，只是为了进行比较，以表明有多种方法可以解决问题，并且在使用哪种技术时需要权衡取舍。

# c++ - GCC/Make 构建时间优化

> ID：708807
> 
> 赞同：11
> 
> 时间：2009-04-02T08:29:43.813
> 
> 标签：c++, optimization, gcc, makefile, build-time

我们有使用 gcc 和制作文件的项目。项目还包含一个大子项目 (SDK) 和许多使用该 SDK 和一些共享框架的相对较小的子项目。

我们使用预编译的头文件，但这仅有助于重新编译更快。

是否有任何已知的技术和工具可以帮助进行构建时优化？或者，也许你知道一些关于这个或相关主题的文章/资源？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-02T09:43:26.727

您可以从两个方面解决这个问题：重构代码以降低编译器所看到的复杂性，或者加快编译器的执行速度。

无需接触代码，您就可以在其中添加更多的编译能力。使用 ccache 避免重新编译您已经编译的文件，并使用 distcc 在更多机器之间分配构建时间。使用 make -j 其中 N 是核心数+1，如果你在本地编译，或者更大的数字用于分布式构建。该标志将并行运行多个编译器。

重构代码。更喜欢前向声明而不是包含（简单）。尽可能多地解耦以避免依赖（使用 PIMPL 习惯用法）。

模板实例化很昂贵，它们在每个使用它们的编译单元中重新编译。如果您可以重构模板以转发声明它们，然后仅在一个编译单元中实例化它们。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-02T08:33:58.250

我能想到的最好的`make`就是`-j`选项。这告诉`make`并行运行尽可能多的作业：

`make -j`

如果要将并发作业的数量限制为*n*，可以使用：

`make -j` *n*

* * *

确保依赖项是正确的，这样`make`就不会运行它不需要的作业。

* * *

另一件需要考虑的事情是`gcc`与`-O`交换机相关的优化。您可以指定各种优化级别。优化程度越高，编译和链接时间越长。我使用的一个项目运行需要 2 分钟来链接 . `-O3`，半分钟`-O1`. 您应该确保您的优化没有超出您的需要。您可以在不优化开发构建和优化部署构建的情况下构建。

* * *

使用调试信息 ( ) 进行编译`gcc -g`可能会增加可执行文件的大小并可能影响构建时间。如果您不需要它，请尝试删除它以查看它是否会影响您。

* * *

链接的类型（静态与动态）应该有所不同。据我了解静态链接需要更长的时间（尽管我在这里可能错了）。您应该看看这是否会影响您的构建。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-23T19:59:52.200

从项目的描述中，我猜你每个目录都有一个 Makefile 并且经常使用递归 make。在这种情况下，[“Recursive Make Considered Harmful”](http://miller.emu.id.au/pmiller/books/rmch/)中的技术应该会很有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T08:43:02.067

如果您有多台计算机可用， gcc 由[distcc](http://distcc.samba.org/)很好地分发。

此外，您还可以使用[ccache](http://ccache.samba.org/)。

所有这些都只需要对 makefile 进行很少的更改即可。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-27T11:41:59.090

此外，您可能希望使源代码文件尽可能小且自包含/可行，即更喜欢许多较小的目标文件而不是一个巨大的单个目标文件。

这也将有助于避免不必要的重新编译，此外，您可以为每个源代码目录或模块拥有一个带有目标文件的静态库，基本上允许编译器尽可能多地重用以前编译的代码。

之前的任何回复中尚未提及的其他内容正在使符号链接尽可能“私有”，即如果代码不必在外部可见，则更喜欢代码的静态链接（函数、变量）。

此外，您可能还想研究使用[GNU gold 链接器](http://freebsd.stokely.org/2008/04/gnu-gold-linker.html)，它在为 ELF 目标编译 C++ 代码时[效率更高](http://en.wikipedia.org/wiki/Gold_(linker))。

基本上，我建议您仔细分析构建过程并检查花费最多的时间，这将为您提供一些关于如何优化构建过程或项目源代码结构的提示。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-03-25T18:42:26.310

您可以考虑切换到不同的构建系统（显然不适用于所有人），例如 SCons。SCons 比 make 聪明得多。它会自动扫描头依赖项，因此您始终拥有最小的重建依赖项集。通过将这一行添加`Decider('MD5-timestamp')`到您的 SConstruct 文件中，SCons 将首先查看文件的时间戳，如果它比先前构建的时间戳更新，它将使用文件的 MD5 来确保您确实更改了某些内容。这不仅适用于源文件，也适用于目标文件。这意味着如果您更改评论，例如，您不必重新链接。

头文件的自动扫描还确保我永远不必键入 scons --clean。它总是做正确的事。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-02T08:38:55.053

如果您有一个带有开发人员机器的 LAN，也许您应该尝试实现一个分布式编译器解决方案，例如[distcc](http://distcc.samba.org/)。

如果构建过程中的所有时间都花在分析依赖关系或执行一些单一的串行任务上，这可能无济于事。正如 Nathan 所建议的（在单台机器上），对于将许多源文件编译为目标文件的原始紧缩，并行构建显然会有所帮助。跨多台机器并行化可以更进一步。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-02T08:42:24.173

[http://ccache.samba.org/](http://ccache.samba.org/)大大加快了速度。

我从事一个中等规模的项目，这是我们加快编译时间的唯一方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-12-29T20:12:02.390

如果您可以访问多台机器，则可以使用[distcc分布式编译器来减少构建时间。](http://code.google.com/p/distcc/)这是来自 IBM developerWorks 的一篇与 distcc 相关的文章以及如何使用它： [http ://www.ibm.com/developerworks/linux/library/l-distcc.html](http://www.ibm.com/developerworks/linux/library/l-distcc.html)

另一种减少构建时间的方法是使用预编译头文件。这是[gcc 的起点](http://gcc.gnu.org/onlinedocs/gcc/Precompiled-Headers.html)。

如果您的机器有多个 cpu/core（2x cores/cpus 的数量就可以了），也不要忘记在使用 make 构建时使用 -j。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-27T20:32:57.790

使用小文件可能并不总是一个好的建议。磁盘的最小扇区大小为 32 或 64K，文件至少占用一个扇区。所以 1024 个 3K 大小的文件（内部的小代码）实际上会占用 32 或 64 Meg 的磁盘空间，而不是预期的 3 meg。需要由驱动器读取的 32/64 meg。如果文件分散在磁盘上，则寻道时间会增加读取时间。显然，这对磁盘缓存有一定的帮助。预编译的头文件也可以很好地帮助缓解这种情况。

因此，考虑到编码指南，将每个 strcuct、typedef 或实用程序类放入单独的文件中是没有意义的。

# c# - C#：帮助确定 TreeView 中选定的节点索引。NullReferenceException 错误？

> ID：708814
> 
> 赞同：3
> 
> 时间：2009-04-02T08:32:55.583
> 
> 标签：c#

我正在努力做到这一点，以便在 TreeView 中选择一个节点时运行某些事件。我运行代码，我收到一个错误，显示 NullReferenceException 未处理：对象引用未设置为对象的实例。

关于如何克服这个障碍的任何线索？

```
 private void tvNodes_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
    {
        switch (tvNodes.SelectedNode.Index)
        {
            case 0:
                //first item
                break;

            case 1:
                //second item
                break;

            case 2:
                //third item
                break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T08:38:37.160

`tvNodes.SelectedNode`与您点击的节点不同，可能为空。改为使用`e.Node.Index`。我很偏执；我可能*仍然*会检查那`e.Node`不是`null`第一个...

```
 if(e.Node == null) return;
    switch (e.Node.Index)
    {
        case 0:
            //first item
            break;

        case 1:
            //second item
            break;

        case 2:
            //third item
            break;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T10:40:08.040

> I'm trying to make it so I can run certain events when a node is **selected** in a TreeView.

Looks like you need to use AfterSelect event instead of NodeMouseClick:

```
private void tvNodes_AfterSelect(object sender, TreeViewEventArgs e)
{
     switch (e.Node.Index)
    {
        case 0:
            //first item
            break;

        case 1:
            //second item
            break;

        case 2:
            //third item
            break;
    }

} 
```

You should note, that AfterSelect occurs only once after Node selection changed whether via keyboard or by mouse. NodeMouseClick occured every time Node clicked with mice. In MSDN:

> This event occurs when the user clicks any portion of a tree node with the mouse, **including the plus sign (+) or minus sign (-)** that indicates whether the node is collapsed or expanded.

So SelectedNode may be null, because user clicks on [+] or [-].

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T08:46:44.147

```
private void tvNodes_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e) {
    var index = null != e.Node ? e.Node.Index : -1;
    switch (index) {
        case 0:
            //first item
            break;
        case 1:
            //second item
            break;
        case 2:
            //third item
            break;
    }
} 
```

# .net - 当 switch 语句确实有未处理的情况时，有没有办法让 c# 编译器显示警告？

> ID：708817
> 
> 赞同：9
> 
> 时间：2009-04-02T08:33:27.190
> 
> 标签：.net, compiler-construction, warnings, switch-statement

考虑以下代码：

```
 private enum myEnum
        {
            A,
            B
        }
        private void myMethod(myEnum m)
        {
            switch (m)
            {
                case myEnum.A:
                    //do stuff
                break;
                case myEnum.B:
                   //do stuff
                break;
                default:
                   throw new NotImplementedException(m.ToString());
            }
        } 
```

如果我将第三个成员 C 添加到 myEnum，我只会在运行时收到 NotImplementedException 警告

我想做的是让编译器在有未处理案例**且**没有默认值的开关时警告我：案例。

有没有办法做到这一点，或者这个问题的其他解决方案，最终目标是在编译时被警告缺少某些东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T08:38:19.190

不幸的是，这里没有编译器功能可以为您执行此操作。

与其拥有枚举，不如拥有一个基类或接口。MyMethod 是在接口上定义的。

现在，每个枚举成员都成为具有不同行为的 myMethod 类。如果您添加一个类（以扩展选项，目前您将添加一个枚举项）但不实现 myMethod，您将收到编译器错误。

在代码中有很多地方，您在选择语句中提供不同的行为是您可能需要使用多态性的味道。

**编辑**

我能给出的最好建议是为依赖 switch 语句的每个函数构建单元测试，并为枚举中的每个值调用它（您可以在运行时使用 Enum 类的 GetValues 成员获取值）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T08:53:50.260

不，语言中没有任何内容可以检查这一点。

你可以有一个：

```
default:
    throw new ArgumentOutOfRangeException("Invalid value or bug"); 
```

情况，但显然这是执行时间而不是编译时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T11:05:35.810

从未使用过它，但[FxCop](http://msdn.microsoft.com/en-us/library/bb429476.aspx)可能会有所帮助。它支持编写自定义规则。当然，这不是编译时检查，而是可以集成到您的流程中的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T22:49:30.140

这可能成为维护的噩梦，不得不花费大量时间尝试调试 switch 语句中缺少的枚举值。

写了一个小类，使 switch 语句变得更易于维护，

![在此处输入图像描述](https://i.stack.imgur.com/RbAhL.png)

该类确保所有枚举值都被处理或显式忽略，否则它会抛出 NotImplementedExpcetion。

[在此处](http://fmansoor.wordpress.com/2013/04/30/how-to-write-maintainable-enum-switch-statements/)查看源代码和更多详细信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-09T11:05:14.127

我编写了一个库，用于在 C# 中进行区分联合，这将是在编译时提供详尽匹配的解决方案。见[https://github.com/mcintyre321/OneOf](https://github.com/mcintyre321/OneOf)

`Install-Package OneOf`

它具有用于执行 DU 的通用类型，例如 OneOf 一直到 OneOf。其中每一个都有一个 .Match 和一个 .Switch 语句，您可以将它们用于编译器安全类型的行为，例如：

```
OneOf<A, B> aOrB = GetValue(); 
aOrB .Switch(
    a=> DoSomething(a),
    b=> DoSomethingElse(b)
) 
```

# playlist - 如何为 RealPlayer 创建播放列表？

> ID：708825
> 
> 赞同：1
> 
> 时间：2009-04-02T08:36:52.907
> 
> 标签：playlist, realplayer

我想通过 Perl 脚本在 RealPlayer 中创建一个播放列表，以避免每次打开 ReaPlayer 以获取音频或视频文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T09:04:08.347

您可以使用 CPAN 中的[Smil](http://search.cpan.org/~cdawson/Smil-0.898/lib/Smil.pm)模块。RealPlayer 支持 SMIL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T14:24:47.813

您只需要在文件中构造正确的文本。Lucas Gonze[对播放列表格式进行了很好的调查](http://gonze.com/playlists/playlist-format-survey.html)，包括 RealPlayer 所需的格式。

# eclipse - Eclipse 数据源资源管理器：SQL 剪贴簿

> ID：708832
> 
> 赞同：0
> 
> 时间：2009-04-02T08:38:49.627
> 
> 标签：eclipse, eclipse-3.4

是否可以在 Eclipse 3.4+ 中使用数据源资源管理器打开 SQL 剪贴簿？我发现了如何在适用于 eclipse 3.2+[的数据库资源管理器中打开 SQL 剪贴簿](http://www.eclipse.org/webtools/community/tutorials/RDBTutorial/RDBTutorial.html)，但似乎在最新版本中不受支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-08T09:52:16.527

在那里。您需要[数据工具项目](http://wiki.eclipse.org/Getting_Started_with_DTP)插件。

# c# - 将 DateTime 绑定到日期和时间 EditFields

> ID：708843
> 
> 赞同：3
> 
> 时间：2009-04-02T08:45:14.447
> 
> 标签：c#, .net, wpf, datetime, data-binding

我正在尝试构建一个包含编辑对象的 DateTime 值的 gui。DateTime 属性已绑定到时间的 DataPicker 和普通 TextBox。当我更改时间文本框中的值时，日期时间属性中写入的值是今天输入的时间，而不是仅仅更新时间，保留原始日期。

如何实现只更改 DateTime 时间但不更改日期的时间文本框？

当前绑定：

```
<TextBlock>Time</TextBlock>
<TextBox Template="{StaticResource RoundedTextBoxTemplate}">
    <Binding Path="Delivery.Date" StringFormat="HH:mm">
        <Binding.ValidationRules>
            <v:IsValidTimeRule />
        </Binding.ValidationRules>
    </Binding>
</TextBox> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T10:32:41.350

The only way I could think of to do it is to have a DateTime property where you only allow the setter change the time.

XAML:

```
<UserControl.Resources> 
    <mine:DateTimeConverter x:Key="MyDateTimeConverter" />
</UserControl.Resources>    
<Grid x:Name="LayoutRoot">
    <TextBox x:Name="myTextBox" Text="{Binding Path=TestDateTime, Converter={StaticResource MyDateTimeConverter}, Mode=TwoWay}" />
</Grid> 
```

C# Code behind:

```
 public partial class Page : UserControl
 {
      private TestClass m_testClass = new TestClass();

      public Page()
      {
           InitializeComponent();
           myTextBox.DataContext = m_testClass;
      }
  } 
```

C# TestClass where the property setter restriction is used:

```
public class TestClass : INotifyPropertyChanged
{
    private DateTime m_testDateTime = DateTime.Now;
    public DateTime TestDateTime
    {
        get { return m_testDateTime; }
        set
        {
            m_testDateTime = m_testDateTime.Date.Add(value.TimeOfDay);
            PropertyChanged(this, new PropertyChangedEventArgs("TestDateTime"));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged = (t, e) => {};
} 
```

C# IValueConverter:

```
public class DateTimeConverter : IValueConverter
{
    public object Convert(object value,
                       Type targetType,
                       object parameter,
                       CultureInfo culture)
    {
        DateTime date = (DateTime)value;
        return date.ToString("HH:mm");
    }

    public object ConvertBack(object value,
                              Type targetType,
                              object parameter,
                              CultureInfo culture)
    {
        string strValue = value.ToString();
        DateTime resultDateTime;
        if (DateTime.TryParse(strValue, out resultDateTime))
        {
            return resultDateTime;
        }
        return value;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-11-02T00:42:15.807

我稍微扩展了 sipWiz 的解决方案，但我把它全部留在了我的模型类中

我创建了两个字段 1\. `StartDay`2.这两个字段都可以在幕后`StartTime`访问我的主要字段。`StartDate`

```
public DateTime? StartTime
{
    get
    {
        return StartDate;
    }
    set
    {
        if (StartDate == null) StartDate = DateTime.Today;
        StartDate = StartDate.Value.Date.Add(value.HasValue ? value.Value.TimeOfDay: TimeSpan.Zero);
    }
}
public DateTime? StartDay
{
    get { return StartDate; }
    set
    {
        DateTime BaseDate = value.HasValue ? value.Value : DateTime.MinValue;
        StartDate = BaseDate.Date.Add(StartDate.HasValue ? StartDate.Value.TimeOfDay : TimeSpan.Zero);
    }
} 
```

然后您可以将 DatePicker 绑定到日期字段，将 TextBox 绑定到 StringFormat="HH:mm" 的时间字段。

# mfc - CDialog 在 ActiveX 控件中不接收 Windows 消息

> ID：708844
> 
> 赞同：0
> 
> 时间：2009-04-02T08:46:13.460
> 
> 标签：mfc, activex, messages

我在 MFC 中有一个处理图像的 ActiveX 控件，我正在尝试向它添加 TWAIN 扫描功能。

我需要能够从 TWAIN 驱动程序接收到一条 Windows 消息，该消息告诉我的控件何时扫描了图像，因此我创建了一个 CDialog 并将 Dialog 的 HWND 传递给驱动程序。

我在网上看到的所有示例代码都使用 PreTranslateMessage 来捕获来自 TWAIN 的消息，但在我的 ActiveX 控件中，这个方法永远不会被调用。

有谁知道我如何获取该对话框的消息？我也尝试过使用 PeekMessage，但没有成功。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T13:31:35.427

您不需要创建 CDialog。您只需要任何窗口来处理消息。任何与 TWAIN 打交道的事情都最好在其自己的线程中处理。因此，为 MFC 创建一个新线程（通过 CWinThread 或 AfxBeginThread）。在该线程中，创建一个 CWnd。这个 CWnd 的 HWND 是您将传递给 DSM 的所有调用等的那个。每个线程都有自己的消息队列，所以在那里设置一个。通过 PostMessage、SendMessage、PostThreadMessage 等与该线程通信。假设您发布一条消息`MY_SPECIAL_MESSAGE`以表示正在获取图像，您的消息循环应该如下所示：

```
MSG msg;
while (GetMessage(&msg, NULL, 0, 0))
{
    if (msg.message == MY_SPECIAL_MESSAGE)
    {   
        GetImageFromTWAIN();
    }
    else if (!ProcessTWAINMessage(&msg)) {
        TranslateMessage(&msg); 
        DispatchMessage(&msg); 
    }
} 
```

一定要查看 TWAIN 开发工具包中的源代码，以详细了解这一切是如何工作的。TWAIN 是一个狡猾的生物。

相信我，这是最好的方法。您可以使用主线程的消息队列在单个线程中完成所有操作，但应避免这样做。

# eclipse - 像VS中的单词完成一样的eclipse

> ID：708845
> 
> 赞同：1
> 
> 时间：2009-04-02T08:46:29.437
> 
> 标签：eclipse, visual-studio, autocomplete

VS 是否有选项，或者您是否知道具有与 Eclipse 中相同的“完整单词”功能的插件（源自 VIM）。谈论 Alt + / （默认）。这在任何方面都不是智能的，只是扫描上下首字母相同的单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T08:50:23.497

当 Intellisense 开启且索引成功（由 Intellisense 自动完成）时，VS2005/VS2008 中的 Control + Space。当然，您可以更改热键。尝试早期版本的 Visual Assist 插件。

# delphi - Delphi：表格可以自我释放吗？

> ID：708847
> 
> 赞同：16
> 
> 时间：2009-04-02T08:46:46.363
> 
> 标签：delphi, self-destruction

我有一个表格，我用它来显示一些信息几秒钟。表格可以自行释放吗？我可以在构造函数中启动一个计时器，然后在计时器事件中调用 self.free 吗？或者这可能会导致麻烦？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-04-02T09:16:24.887

此外，您可以使用表格调用`Release`.

它向表单发送 CM_RELEASE 消息。作为一种反应，它称为免费。释放的优点是没有任何可能导致崩溃的消息留给表单。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-04-02T09:03:28.303

您可以使表单在用户或代码关闭时自行释放：

```
procedure TForm27.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  Action := caFree;
end;

procedure TForm27.FormCreate(Sender: TObject);
begin
  Timer1.Enabled := True;
end;

procedure TForm27.Timer1Timer(Sender: TObject);
begin
  Timer1.Enabled := False;
  Close;
end; 
```

确保在构造函数中提供所有者，以防应用程序关闭并且表单当时没有被破坏。所有者将在释放自身之前释放表单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T08:54:08.497

我有一整套可以释放自己的对象，并且我已经对它们进行了各种测试，没有显示任何问题/泄漏。TForm 可能更复杂，但只要 Self.Free() 是最后一次调用，你应该是安全的。

（对于那些想知道为什么我有释放自己的对象的人；我经常在系统中传递它们，所以我通过自己的引用计数方案来实现。当最后一个引用被释放时，对象就会释放自己）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T09:28:58.693

这正是接口所做的。

# layout - CSS 填充 - 显然我错过了一些东西

> ID：708855
> 
> 赞同：2
> 
> 时间：2009-04-02T08:49:46.433
> 
> 标签：layout, padding, css

可以说我有一些这样的标记：

```
<html>
<head>
<style type="text/css">
    #container
    {
        margin: 0 auto;
        width: 900px;
        background: green;
    }
</style>
</head>
<body>
    <div id="container">

    </div>
</body>
</html> 
```

想象一下“容器”充满了数百个用于测试填充目的的 a。

现在，我想做的是在“容器”的边缘及其左右两侧的内容之间制作一个空白区域。所以我补充说：

```
padding-left: 50px;
padding-right: 50px; 
```

现在根据我（认为）我的理解，这意味着如果以前每行安装 100 个 a，那么现在只有 80 个左右可以安装。换句话说，“容器”将保持相同的宽度但*向下*增长。

但是，我看到的是“容器”的大小是水平而不是垂直增加的。

我怎样才能让“容器”垂直向下生长并水平保持相同的宽度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T08:51:40.173

您需要将宽度更改为 800 像素，然后添加填充。填充是宽度的附加值。

```
 W------W   - original width
   PW------WP  - original width plus padding either side
    PW----WP   - smaller width plus padding either side 
```

[盒子模型](http://www.w3.org/TR/CSS2/box.html)由[Can Berk Güder 提供](https://stackoverflow.com/users/2119/can-berk-g252der)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T08:58:10.797

什么 garry 说，如果您使用 Chrome 或 Firebug 的 Firefox 插件，您可以右键单击并“检查元素”并查看元素大小的可视化表示，在这些情况下真的很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T08:58:42.433

向元素添加填充或边距的影响完全取决于您正在查看页面的浏览器。填充和边距应该是加里所说的，但 IE6 并非如此，因此您需要围绕浏览器进行一些研究差异以及如何在样式规则中适应它们。

从您所做的事情来看，您只希望将填充应用于整个页面。您可以通过在 CSS 中直接引用 body 来做到这一点。所以你会有 -

```
body
{
    padding:0 50 0 50;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-02T08:57:33.263

您还可以为 div 内的任何内容添加边距：

```
<style type="text/css">    
#container    
{    
    margin: 0 auto;    
    width: 900px;    
    background: green;    
}
#container *
{
    margin-left: 50px;
    margin-right: 50px;
}
</style> 
```

# xna - 如何在 XNA 中选择 JPEG 的透明度颜色？

> ID：708856
> 
> 赞同：0
> 
> 时间：2009-04-02T08:50:10.677
> 
> 标签：xna, xna-3.0

在 XNA 2.0 中，我记得要指定颜色透明度，需要在 JPEG 的属性窗口中设置一个属性。现在我在 XNA 3.0 中，我再也找不到这个属性了！任何的想法 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T13:01:36.640

颜色键属性仍然存在。检查这个[XNA 文档页面](http://msdn.microsoft.com/en-us/library/bb975255.aspx)，也许这会有所帮助。

# ruby - 如何使用 ssl 通过 smtp 发送带有 ruby 的邮件（不使用 rails，对于 gmail 没有 TLS）

> ID：708858
> 
> 赞同：11
> 
> 时间：2009-04-02T08:50:52.560
> 
> 标签：ruby, ssl, smtp

我想要的只是使用 SSL 通过 SMTP 从我的 ruby​​ 脚本发送电子邮件。

我只找到从 Rails 或带有 TLS 的 Gmail 的示例。

我发现人们在谈论 ruby​​ 1.8.5 的 SMTPS 支持，但[libdoc](http://www.ruby-doc.org/stdlib/libdoc/net/smtp/rdoc/classes/Net/SMTP.html)没有提到它。

任何人都有通过 SMTP 和 SSL 在端口 465 上发送邮件的例子吗？

```
ruby -v
ruby 1.8.7 (2008-08-11 patchlevel 72) [i486-linux] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T16:26:57.753

我用下面的配置解决了这个问题：

```
config.action_mailer.perform_deliveries = true
config.action_mailer.raise_delivery_errors = false
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
    :address              => 'mail.domain.com',
    :port                 => '465',
    :domain               => 'yourdomain.com',
    :user_name            => 'email@yourdomain.com',
    :password             => 'yourpassword',
    :authentication       => :login,
    :ssl                  => true,
    :openssl_verify_mode  => 'none' #Use this because ssl is activated but we have no certificate installed. So clients need to confirm to use the untrusted url.
} 
```

它对我来说效果很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-07-29T03:18:11.000

小马呢？
宝石安装小马。
[http://github.com/adamwiggins/pony/tree/master](http://github.com/adamwiggins/pony/tree/master)
或者我不明白你的问题？

我希望它对你有帮助。
谢谢
tknv/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-24T03:38:20.763

我最近在程序化电子邮件中听到的唯一有趣的事情是 Lamson： http: [//lamsonproject.org/](http://lamsonproject.org/)

它是 Python，而不是 Ruby，但如果您愿意，可以从 Ruby 调用 Python（这是一种方法：[http](http://www.goto.info.waseda.ac.jp/~fukusima/ruby/python-e.html) ://www.goto.info.waseda.ac.jp/~fukusima/ruby/python-e.html ）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-24T03:42:08.637

[您可以使用诸如 mailsend ( http://www.muquit.com/muquit/software/mailsend/mailsend.html](http://www.muquit.com/muquit/software/mailsend/mailsend.html) )之类的第三方开源命令行程序来为您完成繁琐的工作。只需以它期望的格式将一些输出传递给它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-02-19T14:18:31.897

如果您必须使用 SSL 而不是 TLS，您可以像这样对 Net::SMTP 进行猴子补丁：

```
require "openssl"
require "net/smtp"

Net::SMTP.class_eval do

  def self.start( address, port = nil,
                  helo = 'localhost.localdomain',
                  user = nil, secret = nil, authtype = nil, use_tls = false,
                  use_ssl = false, &block) # :yield: smtp
    new(address, port).start(helo, user, secret, authtype, use_tls, use_ssl, &block)
  end

  def start( helo = 'localhost.localdomain',
             user = nil, secret = nil, authtype = nil, use_tls = false, use_ssl = false ) # :yield: smtp
    start_method = use_tls ? :do_tls_start : use_ssl ? :do_ssl_start : :do_start
    if block_given?
      begin
        send start_method, helo, user, secret, authtype
        return yield(self)
      ensure
        do_finish
      end
    else
      send start_method, helo, user, secret, authtype
      return self
    end
  end

  private

  def do_tls_start(helodomain, user, secret, authtype)
    raise IOError, 'SMTP session already started' if @started

    if VERSION == '1.8.6'
      check_auth_args user, secret, authtype if user or secret
    elsif VERSION == '1.8.7'
      check_auth_args user, secret
    end

    sock = timeout(@open_timeout) { TCPSocket.open(@address, @port) }
    @socket = Net::InternetMessageIO.new(sock)
    @socket.read_timeout = 60 #@read_timeout
    @socket.debug_output = STDERR #@debug_output

    check_response(critical { recv_response() })
    do_helo(helodomain)

    raise 'openssl library not installed' unless defined?(OpenSSL)
    starttls
    ssl = OpenSSL::SSL::SSLSocket.new(sock)
    ssl.sync_close = true
    ssl.connect
    @socket = Net::InternetMessageIO.new(ssl)
    @socket.read_timeout = 60 #@read_timeout
    @socket.debug_output = STDERR #@debug_output
    do_helo(helodomain)

    authenticate user, secret, authtype if user
    @started = true
  ensure
    unless @started
      # authentication failed, cancel connection.
        @socket.close if not @started and @socket and not @socket.closed?
      @socket = nil
    end
  end

  def do_ssl_start(helodomain, user, secret, authtype)
    raise IOError, 'SMTP session already started' if @started

    if VERSION == '1.8.6'
      check_auth_args user, secret, authtype if user or secret
    elsif VERSION == '1.8.7'
      check_auth_args user, secret
    end

    sock = timeout(@open_timeout) { TCPSocket.open(@address, @port) }
    raise 'openssl library not installed' unless defined?(OpenSSL)
    ssl = OpenSSL::SSL::SSLSocket.new(sock)
    ssl.sync_close = true
    ssl.connect
    @socket = Net::InternetMessageIO.new(ssl)
    @socket.read_timeout = 60 #@read_timeout
    @socket.debug_output = STDERR #@debug_output

    check_response(critical { recv_response() })
    do_helo(helodomain)

    do_helo(helodomain)

    authenticate user, secret, authtype if user
    @started = true
  ensure
    unless @started
      # authentication failed, cancel connection.
        @socket.close if not @started and @socket and not @socket.closed?
      @socket = nil
    end
  end

  def do_helo(helodomain)
     begin
      if @esmtp
        ehlo helodomain
      else
        helo helodomain
      end
    rescue Net::ProtocolError
      if @esmtp
        @esmtp = false
        @error_occured = false
        retry
      end
      raise
    end
  end

  def starttls
    getok('STARTTLS')
  end

  def quit
    begin
      getok('QUIT')
    rescue EOFError, OpenSSL::SSL::SSLError
    end
  end
end 
```

见[http://github.com/collectiveidea/action_mailer_optional_tls/blob/master/lib/smtp_tls.rb](http://github.com/collectiveidea/action_mailer_optional_tls/blob/master/lib/smtp_tls.rb)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-02T11:55:33.007

您可能已经了解[Net::SMTP 标准库](http://www.ruby-doc.org/stdlib/libdoc/net/smtp/rdoc/classes/Net/SMTP.html)

关于 SSL 部分，似乎不支持开箱即用，我发现了几个可能的指针：

*   [斯蒂芬朱博客文章](http://www.stephenchu.com/2006/06/how-to-use-gmail-smtp-server-to-send.html)
*   [ActionMailer SSL 设置示例](http://ianli.com/site/HowTo/RailsApplicationStarter-SetupActionMailer)（ActionMailer 在后台使用 Net::SMTP，AFIAK）

# c# - 使用 GDI+ 创建具有透明背景的图像？

> ID：708860
> 
> 赞同：25
> 
> 时间：2009-04-02T08:51:48.440
> 
> 标签：c#, asp.net, gdi+

我正在尝试创建具有透明背景的图像以显示在网页上。
我尝试了几种技术，但背景总是黑色的。
如何创建透明图像然后在其上绘制一些线条？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-04-02T09:00:21.570

调用`Graphics.Clear(Color.Transparent)`，好吧，清除图像。不要忘记使用具有 Alpha 通道的像素格式创建它，例如`PixelFormat.Format32bppArgb`. 像这样：

```
var image = new Bitmap(135, 135, PixelFormat.Format32bppArgb);
using (var g = Graphics.FromImage(image)) {
    g.Clear(Color.Transparent);
    g.DrawLine(Pens.Red, 0, 0, 135, 135);
} 
```

假设你是`using` `System.Drawing`和`System.Drawing.Imaging`。

编辑：似乎您实际上并不需要`Clear()`. 只需使用 Alpha 通道创建图像即可创建空白（完全透明）图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T09:12:13.460

这可能会有所帮助（我将 Windows 窗体的背景设置为透明图像的东西放在一起：

```
private void TestBackGround()
    {
        // Create a red and black bitmap to demonstrate transparency.            
        Bitmap tempBMP = new Bitmap(this.Width, this.Height);
        Graphics g = Graphics.FromImage(tempBMP);
        g.FillEllipse(new SolidBrush(Color.Red), 0, 0, tempBMP.Width, tempBMP.Width);
        g.DrawLine(new Pen(Color.Black), 0, 0, tempBMP.Width, tempBMP.Width);
        g.DrawLine(new Pen(Color.Black), tempBMP.Width, 0, 0, tempBMP.Width);
        g.Dispose();

        // Set the transparancy key attributes,at current it is set to the 
        // color of the pixel in top left corner(0,0)
        ImageAttributes attr = new ImageAttributes();
        attr.SetColorKey(tempBMP.GetPixel(0, 0), tempBMP.GetPixel(0, 0));

        // Draw the image to your output using the transparancy key attributes
        Bitmap outputImage = new Bitmap(this.Width,this.Height);
        g = Graphics.FromImage(outputImage);
        Rectangle destRect = new Rectangle(0, 0, tempBMP.Width, tempBMP.Height);
        g.DrawImage(tempBMP, destRect, 0, 0, tempBMP.Width, tempBMP.Height,GraphicsUnit.Pixel, attr);

        g.Dispose();
        tempBMP.Dispose();
        this.BackgroundImage = outputImage;

    } 
```

# memory - 在 Common Lisp (SBCL) 中处理和最小化内存使用

> ID：708861
> 
> 赞同：13
> 
> 时间：2009-04-02T08:52:16.397
> 
> 标签：memory, lisp, common-lisp, out-of-memory, sbcl

我有一个没有太多内存 (256Mb) 的 VPS，我正在尝试使用 SBCL+Hunchentoot 进行 Common Lisp 开发，以编写一些简单的网络应用程序。大量内存似乎在没有做任何特别复杂的事情的情况下被使用，并且在服务页面一段时间后它耗尽内存并且使用所有交换变得疯狂或者（如果没有交换）就死了。

所以我需要帮助：

*   找出正在使用所有内存的内容（尤其是库或我）
*   限制 SBCL 允许使用的内存量，以避免大量交换
*   当内存用完时干净地处理事情，而不是崩溃（因为它是一个网络应用程序，我希望它继续运行并尝试清理）。

我认为前两个相当简单，但第三个甚至可能吗？人们如何在 Lisp 中处理内存不足或内存受限的情况？

（另外，我注意到 64 位 SBCL 使用的内存似乎是 32 位的两倍。这是预期的吗？如果可以节省大量内存，我可以运行 32 位版本）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-02T09:53:16.110

要限制 SBCL 的内存使用，请使用 --dynamic-space-size 选项（例如，`sbcl --dynamic-space-size 128`将内存使用限制为 128M）。

要找出谁在使用内存，您可以`(room)`在不同的时间调用（告诉正在使用多少内存的函数）：在启动时，加载所有库之后，然后在工作期间（当然，`(sb-ext:gc :full t)`在房间之前调用而不是测量尚未收集的垃圾）。

此外，还可以使用 SBCL Profiler 来测量内存分配。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-03T15:31:57.137

> 找出正在使用所有内存的内容（尤其是库或我）

Attila Lendvai 有一些特定于 SBCL 的代码来找出分配对象的来源。请参阅[http://article.gmane.org/gmane.lisp.steel-bank.devel/12903](http://article.gmane.org/gmane.lisp.steel-bank.devel/12903)并在需要时给他写一封私人邮件。

请务必尝试另一种实现，最好使用精确的 GC（如 Clozure CL），以确保它不是特定于实现的泄漏。

> 限制 SBCL 允许使用的内存量，以避免大量交换

已经被别人回答了。

> 当内存用完时干净地处理事情，而不是崩溃（因为它是一个网络应用程序，我希望它继续运行并尝试清理）。

256MB 很紧，但无论如何：安排一个重复的（可能是 1 秒）定时线程来检查剩余的可用空间。如果可用空间小于 X，则使用 exec() 将当前的 SBCL 进程映像替换为新的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-02T20:21:11.553

如果您没有任何类型声明，我希望 64 位 Lisp 占用的空间是 32 位的两倍。即使是普通的（小）int 也会使用 64 位的内存块。我不认为它会使用少于一个机器词，除非你声明它。

我对#2 和#3 无能为力，但如果你弄清楚#1，我怀疑这不会有问题。我已经看到 SBCL/Hunchentoot 实例运行了很长时间。如果我使用了大量的内存，那通常是我自己的错。:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T09:47:17.217

我不会对使用两倍内存的 64 位 SBCL 感到惊讶，因为它可能会使用 64 位单元而不是 32 位单元，但是如果没有实际检查就不能肯定地说。

使内存停留时间超过预期的典型事情是不再有用的引用，它们仍然具有通往根分配集的路径（我发现哈希表是让这些事情逗留的好方法）。您可以尝试在代码中散布对 GC 的显式调用，并确保（尽可能）不将内容存储在全局变量中。

# directshow - 如何在 DirectShow 中更改输出引脚大小和颜色空间/压缩

> ID：708862
> 
> 赞同：0
> 
> 时间：2009-04-02T08:52:18.407
> 
> 标签：directshow

如何在 DirectShow 中更改视频源过滤器的输出引脚大小和颜色空间/压缩

我想知道输出引脚 PropertyPage 数据的存储位置以及如何通过我的代码更改这些数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-29T03:29:35.710

您必须编写自己的转换过滤器。或者，您可以使用像[FFDShow](http://ffdshow-tryout.sourceforge.net/)这样的过滤器，它支持图像大小调整以及其他视频修改和增强功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-02-14T16:14:13.830

您可以在过滤器的输出引脚上使用[IPin::EnumMediaTypes](http://msdn.microsoft.com/en-us/library/dd390426%28v=VS.85%29.aspx)来获取支持的媒体类型/视频格式的列表。

之后，调用[IAMStreamConfig::GetFormat](http://msdn.microsoft.com/en-us/library/dd319785%28v=VS.85%29.aspx)以获取 AM_MEDIA_TYPE 结构中的当前格式。根据需要修改此结构（确保设备支持您的格式），并使用相同的结构调用[IAMStreamConfig::SetFormat 。](http://msdn.microsoft.com/en-us/library/dd319788%28v=VS.85%29.aspx)

# c# - 为什么 INotifyPropertyChanged 仅在至少更改两个字符时才会触发？

> ID：708865
> 
> 赞同：1
> 
> 时间：2009-04-02T08:53:10.480
> 
> 标签：c#, wpf, silverlight, xaml, inotifypropertychanged

我终于得到了一个 Silverlight MVVM 示例，这样当我更改名字和姓氏文本框的值时，全名会自动更改。

然而，奇怪的是，我从 INotifyPropertyChanged 继承的模型只有在我更改名字或姓氏的***至少 2 个字符*****时才会收到通知。**

 **   如果我将“Smith”更改为“Smith1”，则**不会触发任何事件**
*   如果我将“Smith”更改为“Smith12”，则按预期触发事件

有没有人在 Silverlight/XAML/INotifyPropertyChanged 中遇到过这个问题？会是什么呢？**是否有一个设置指示文本框在通知自己“已更改”之前需要更改多少？**

以下是我正在使用的代码的主要部分：

**客户.cs：**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;

namespace TestMvvm345.Model
{
    public class Customer : INotifyPropertyChanged
    {
        public int ID { get; set; }
        public int NumberOfContracts { get; set; }

        private string firstName;
        private string lastName;

        public string FirstName
        {
            get { return firstName; }
            set
            {
                firstName = value;
                RaisePropertyChanged("FirstName");
                RaisePropertyChanged("FullName");
            }
        }

        public string LastName
        {
            get { return lastName; }
            set
            {
                lastName = value;
                RaisePropertyChanged("LastName");
                RaisePropertyChanged("FullName");
            }
        }

        public string FullName
        {
            get { return firstName + " " + lastName; }
        }

        #region INotify
        public event PropertyChangedEventHandler PropertyChanged;

        private void RaisePropertyChanged(string property)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(property));
            }
        } 
        #endregion

    }
} 
```

**CustomerHeaderView.xaml：**

```
<UserControl x:Class="TestMvvm345.Views.CustomerHeaderView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    Width="400" Height="300">
    <Grid x:Name="LayoutRoot" Background="White">
        <StackPanel HorizontalAlignment="Left">
            <ItemsControl ItemsSource="{Binding}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBox x:Name="FirstName" 
                                Text="{Binding Path=FirstName, Mode=TwoWay}" 
                                Width="150" 
                                Margin="3 5 3 5"/>
                            <TextBox x:Name="LastName" 
                                Text="{Binding Path=LastName, Mode=TwoWay}" 
                                Width="150"
                                Margin="0 5 3 5"/>
                            <TextBlock x:Name="FullName" 
                                Text="{Binding Path=FullName, Mode=TwoWay}" 
                                Margin="0 5 3 5"/>
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </Grid>
</UserControl> 
```

**客户视图模型.cs：**

```
using System.ComponentModel;
using System.Collections.ObjectModel;
using TestMvvm345.Model;

namespace TestMvvm345
{
    public class CustomerViewModel
    {
        public ObservableCollection<Customer> Customers { get; set; }

        public void LoadCustomers()
        {
            ObservableCollection<Customer> customers = new ObservableCollection<Customer>();

            //this is where you would actually call your service
            customers.Add(new Customer { FirstName = "Jim", LastName = "Smith", NumberOfContracts = 23 });
            customers.Add(new Customer { FirstName = "Jane", LastName = "Smith", NumberOfContracts = 22 });
            customers.Add(new Customer { FirstName = "John", LastName = "Tester", NumberOfContracts = 33 });
            customers.Add(new Customer { FirstName = "Robert", LastName = "Smith", NumberOfContracts = 2 });
            customers.Add(new Customer { FirstName = "Hank", LastName = "Jobs", NumberOfContracts = 5 });

            Customers = customers;
        }

    }
} 
```

**MainPage.xaml.cs：**

```
void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    CustomerViewModel customerViewModel = new CustomerViewModel();
    customerViewModel.LoadCustomers();
    CustomerHeaderView.DataContext = customerViewModel.Customers;
} 
```

# 更新：

我在 WPF 中重新制作了这个项目，它工作正常。也许这是 Silverlight 3 的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T11:13:58.350

使用您的示例代码，它对我来说非常有效。我进行了单个字符更改，然后移动焦点，FullName 更新正确发生

顺便说一句，您对 NotifyPropertyChanged 的​​使用存在缺陷

```
 public string FirstName
    {
        get { return firstName; }
        set
        {
            firstName = value;
            RaisePropertyChanged("FirstName");
            RaisePropertyChanged("FullName");
        }
    } 
```

应该：

```
 public string FirstName
    {
        get { return firstName; }
        set
        {
            if (firstName != value)
            {
                firstName = value;
                RaisePropertyChanged("FirstName");
                RaisePropertyChanged("FullName");
            }
        }
    } 
```

您希望避免在未更改时触发事件以及相关的重新绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-05T18:53:24.380

我在 Silverlight 2 中注意到了同样的问题。我认为这是一个错误。这是我的错误报告（目前未答复）：

[http://silverlight.net/forums/t/59207.aspx](http://silverlight.net/forums/t/59207.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-02T12:05:37.867

您可能还希望在 Binding 语句中包含“UpdateSourceTrigger=PropertyChanged”。IE

```
Text="{Binding Path=FirstName,UpdateSourceTrigger=PropertyChanged}" 
```

这将确保每次您在文本框中进行更改时都会更新该值。

# c# - C# 中的 Getter/Setter 问题

> ID：708866
> 
> 赞同：2
> 
> 时间：2009-04-02T08:53:20.840
> 
> 标签：c#, setter

我在做

```
static bool isWorking
    {
        get { return _isWorking; }
        set {
            myform.treeView1.Enabled = !value;
            _isWorking = value;
        }
    } 
```

并且单步调试器显示它在第一行停止。在尝试这条线之后

```
set { myform.treeView1.Enabled = !(_isWorking = value); } 
```

我看到 isWorking 已设置，但 myform.treeView1.Enabled 未设置。这是怎么回事？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-02T08:57:35.713

“调试器显示它停止”是什么意思？它可能`myform`是空的，还是`myform.treeView1`空的？

在这种情况下，我不记得*确切的*评估顺序，但它可以解释您所描述的症状。不过，了解调试器“停止”的原因至关重要。另一种可能性是您尝试从非 UI 线程访问 UI，这将阻止分配`Enabled`正常工作。

哦，请不要使用您的第二个版本 - 作为副作用，分配是非常非常罕见的好主意。我知道的唯一惯用用法是使用 IO 循环时：

```
string line;
while ( (line = reader.ReadLine()) != null) 
```

我只认为这是可以接受的，因为它相当普遍。在这种情况下，看起来您*的*意思是“==”而不是“=”。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2009-04-02T08:59:05.833

因为 (_isWorking = value) 总是返回 true。如果你要写：

```
myform.treeView1.Enabled = !(_isWorking == value); 
```

它的工作原理如下：如果 isWorking 等于值，则禁用 treeView。但在你的情况下 - 不

# javascript - 如何在图表上显示叠加标签？

> ID：708868
> 
> 赞同：0
> 
> 时间：2009-04-02T08:53:54.177
> 
> 标签：javascript, reporting, birt

我有一个用 Birt 创建的图表，我想在其上添加一些标签以指定由 2 个红色标记分隔的 4 个区域（见下图），每个象限中有一个标签（如果可能，居中）。

我正在寻找一种解决方案，直接使用 birt 图表编辑器或使用 javascript（就像我为红色标记所做的那样）。

![替代文字](https://i.stack.imgur.com/iHUsj.jpg "图表")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-03T13:55:29.147

为了在图形的每个象限中动态地居中某种类型的标签，您必须有某种计算坐标的方法。当然，我对 Birt 并不是很熟悉，我假设图表的红色标记会有所不同。

无论如何，假设您可以获取坐标，您可以编写一个基于几个参数动态生成标签的函数：

```
function generateLabel(sContent, iXoffset, iYoffset) {

  var eLabel = document.createElement('span');
  eLabel.appendChild(document.createTextNode(sContent));

  var eDivision = document.createElement('div');
  eDivision.appendChild(eLabel);

  eDivision.style.left = iXoffset + 'px';
  eDivision.style.top = iYoffset + 'px';
  // include other styles here...

  return eDivision;

} 
```

然后从那里，您可以使用设置的标签内容和偏移坐标调用此函数：

```
var eQuadrantOneLabel = generateLabel('Quadrant One', 10, 25);
// and so on... 
```

然后只需将元素添加到图形的容器中（假设它有一个`id`of，比如说，`graph`）：

```
var eGraphContainer = document.getElementById('graph');
eGraphContainer.appendChild(eQuadrantOneLabel);
// and so on for each label... 
```

# c# - 如何从这个奇怪的域中获取 Cookie？

> ID：708871
> 
> 赞同：1
> 
> 时间：2009-04-02T08:54:48.747
> 
> 标签：c#, http, cookies

大家好，我有问题。我遇到了 m_domainTable 中的域以“。”开头的情况。（点），我怎样才能从这种域中获取 cookie？我无法使用例如[http://.testdomain.com创建 Uri](http://.testdomain.com)

[替代文字 http://img19.imageshack.us/img19/1817/questionh.png](http://img19.imageshack.us/img19/1817/questionh.png "问题")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T09:08:06.700

尝试在域前面使用一些虚拟文本。 `http://dummy.testdomain.com`

这 。前缀表示 cookie 对 testdomain 内的任何子域或主机都有效。

# c++ - 需要 C++ 运行时？

> ID：708872
> 
> 赞同：3
> 
> 时间：2009-04-02T08:55:12.457
> 
> 标签：c++, deployment, runtime

为什么有些 C++ 项目需要安装运行时包，而有些则不需要？

编辑：如何使项目在没有运行时的情况下工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-02T08:56:53.747

有些将是静态链接的，而另一些将依赖于在运行时加载的动态库。要静态链接您自己的项目，您需要更改项目配置 - 如何执行此操作取决于您使用的编译器/链接器和/或 IDE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T09:55:49.753

一些应用程序是与系统库链接的，这是*动态链接程序*。其他程序包含库的代码到可执行文件中，这是*静态链接程序*。

动态链接的优点：

*   较小的程序可执行文件。
*   如果动态链接库是共享的，则内存消耗更少。
*   更好的性能。

动态链接的缺点：

*   对库的依赖。
*   部署更加困难。

静态链接的优点：

*   没有依赖关系。
*   更容易部署应用程序。

静态链接的缺点：

*   可执行文件更大。

要获取静态项目，您需要在项目属性中设置选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T08:58:49.470

我认为这是指 VS2005 service pack 1 运行时。出于某种原因，MS 为其添加了一些非向后兼容的功能，因此任何使用 VS2005sp1 构建的应用程序都需要运行时来配合它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T11:08:09.253

您需要安装运行时包，以防您使用链接为 DLL 而不是静态库的标准 C/C++ 库。因此，避免它的一种方法是静态链接标准 C/C++ 库（C++ 项目设置）。在您的情况下可能会，也可能不会。

如果没有，您可以使用 Visual Studio 发行版中的依赖项遍历器工具来识别您的应用程序所需的 DLL，并将它们放在您的可执行文件附近。

在 Visual Studio 2005 及更高版本中您应该知道的是，二进制文件的清单可以（并且可能会：）让您的生活更加艰难。特别是因为 Visual Studio 2005 的 SP1 更改了 C++ 库的版本以及清单。

# c# - C# ASP.Net 中基于开源论坛的项目

> ID：708873
> 
> 赞同：6
> 
> 时间：2009-04-02T08:55:14.983
> 
> 标签：c#, asp.net, forum

我想知道 C# ASP.Net 中是否有任何基于开源论坛的项目

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-02T09:04:23.747

[另一个论坛网](http://www.yetanotherforum.net/)

这个很不错。我以前用过它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T11:34:13.137

**社区服务器快捷版**

[http://communityserver.com/products/express/](http://communityserver.com/products/express/)

不是严格开源的，但可以作为 SDK 的一部分下载源代码

[http://get.communityserver.com/Download/moredownloads.aspx](http://get.communityserver.com/Download/moredownloads.aspx)

“CS 是一个半开源项目。主要源代码由智能保持关闭，但是一旦它达到 RTM，他们就会发布一个带有整个项目源代码的 SDK。然后您可以根据自己的喜好自定义代码。您遇到的任何错误找到，我们鼓励您发布有关它们的信息。”

[http://dev.communityserver.com/forums/p/490434/593486.aspx#593486](http://dev.communityserver.com/forums/p/490434/593486.aspx#593486)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T10:51:58.463

[另一个论坛网](http://www.yetanotherforum.net/)

您可以测试这个较旧的论坛： http: [//www.codetoad.com/asp.net_forum.asp](http://www.codetoad.com/asp.net_forum.asp)（Framework 1.1 Vb.Net）

# windows - 通过命令行配置windows服务

> ID：708875
> 
> 赞同：6
> 
> 时间：2009-04-02T08:57:21.390
> 
> 标签：windows, command-line, service

我需要通过命令行在*服务属性中启用***“允许服务与桌面交互”**选项。 如何做到这一点？ 我尝试了**“sc”**命令。但我无法达到我所需要的。

 **** * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-02T09:00:31.227

您是否尝试过“sc config servicename type=interact type=own”

另外：[http ://social.microsoft.com/Forums/en-US/vcgeneral/thread/3311c5b7-be80-466e-8d49-fc431115aea9/](http://social.microsoft.com/Forums/en-US/vcgeneral/thread/3311c5b7-be80-466e-8d49-fc431115aea9/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-02T09:22:06.620

请记住，此功能在较新版本的 Windows 中几乎消失了，例如在 Vista 中它被忽略 - 出于安全原因，不再允许服务与桌面交互

# jsp - JSP - 测验

> ID：708879
> 
> 赞同：1
> 
> 时间：2009-04-02T08:58:05.400
> 
> 标签：jsp

我正在开发一个测验模块。我已将所有问题、选项和其他详细信息存储在向量数组中。

我想向用户显示第一个问题，当他提交它时，第二个问题应该显示在页面上......等等......即点击提交时应该发生一个事件，以便计数器获取递增并显示向量数组中的值...我应该怎么做..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-05T20:49:07.893

如果您不想重新加载页面，我会让您的 JSP 编写 javascript 来反映向量。例如，

```
Vector questions = <some Vector of Question objects>;
int size = questions.size();
%><script>
    var questions[] = new Array(<%= size %>);
<%
  for(int a =0; a < size; a++){
      Question myQ = (Question)questions.get(a);
      %>questions[<%= a %>] = '<%= myQ.getQuestionText() %>';<%
  }
%></script> 
```

然后，你可以写一个 onclick="displayNextQuestion();" 对于提交按钮，javascript 函数将更改页面的 HTML 以显示下一个问题及其表单字段等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-02T11:54:05.857

将当前步骤作为隐藏输入值传递。

例如在 JSP 中：

```
<input type="hidden" name="step" value="${step}"> 
```

在 Servlet 的 doGet() 中（被调用以进行初始显示）：

```
int step = 1;
Question firstQuestion = questionDAO.find(step);
request.setAttribute("step", step);
request.setAttribute("question", question); 
```

并在 Servlet 的 doPost() （处理每个表单提交）中：

```
int currentStep = Integer.valueOf(request.getParameter("step"));
int nextStep = currentStep++;
Question nextQuestion = questionDAO.find(nextStep);
request.setAttribute("step", nextStep);
request.setAttribute("question", nextQuestion); 
```

或者，您也可以将“步骤”设为问题的“ID”，这样您就无需为“步骤”设置额外的属性，而只需执行以下操作：

```
<input type="hidden" name="id" value="${question.id}"> 
```

祝你好运。

# php - 达到某个字符限制时将文本块修剪为最近的单词？

> ID：708882
> 
> 赞同：1
> 
> 时间：2009-04-02T08:58:24.523
> 
> 标签：php, string

这是一个问题：当一定数量的字符过去时，您如何将一段文本修剪为最接近的单词。我不是要限制某个数量的单词或字母，而是限制字母并在最近的单词处将其切断。

假设我有两个字符串：

```
"This is a block of text, blah blah blah"
"this is another block of txt 2 work with" 
```

假设我想将其限制为 27 个字符，第一行将以“blah”结尾，第二行将以“txt”结尾，即使在这些单词中达到了字符限制。

这个问题有什么干净的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T09:06:50.573

请参阅[wordwrap](http://php.net/manual/en/function.wordwrap.php)函数。

我可能会做类似的事情：

```
function wrap($string) {
  $wstring = explode("\n", wordwrap($string, 27, "\n") );
  return $wstring[0];
} 
```

（如果您的字符串已经跨越了严重的行，请使用其他字符 - 或模式 - 用于“\n”以外的拆分）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T10:41:23.043

我写了一个[max-string-length](http://aleembawany.com/projects/code-snippets/#toc-max-string-length)函数，它就是这样做的，而且非常干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T09:03:02.157

使用占位符连接字符串会不会更简单（即：###PLACEHOLDER###），计算字符串的字符减去占位符，用 substr 将其修剪到正确的长度，然后按占位符分解?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T09:25:29.187

我认为这应该可以解决问题：

```
function trimToWord($string, $length, $delimiter = '...')
{
    $string        = str_replace("\n","",$string);
    $string        = str_replace("\r","",$string);
    $string        = strip_tags($string);
    $currentLength = strlen($string);

    if($currentLength > $length)
    {
        preg_match('/(.{' . $length . '}.*?)\b/', $string, $matches);

        return rtrim($matches[1]) . $delimiter;
    }
    else 
    {
        return $string;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T10:34:24.230

您可以对 str_word_count 使用鲜为人知的修饰符来帮助执行此操作。如果您传递参数“2”，它将返回单词位置所在的数组。

以下是使用它的简单方法，但可能会更有效地做到这一点：

```
$str = 'This is a string with a few words in';
$limit = 20;
$ending = $limit;

$words = str_word_count($str, 2);

foreach($words as $pos=>$word) {
    if($pos+strlen($word)<$limit) {
        $ending=$pos+strlen($word);
    }
    else{
        break;
    }
}

echo substr($str, 0, $ending);
// outputs 'this is a string' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-12-09T16:55:21.937

```
// Trim very long text to 120 characters. Add an ellipsis if the text is trimmed.
if(strlen($very_long_text) > 120) {
  $matches = array();
  preg_match("/^(.{1,120})[\s]/i", $very_long_text, $matches);
  $trimmed_text = $matches[0]. '...';
} 
```

# javascript - 彗星Javascript错误

> ID：708894
> 
> 赞同：3
> 
> 时间：2009-04-02T09:01:30.693
> 
> 标签：javascript, json, orbited

我在 localhost 上使用 Orbited 作为 Comet 服务器。它正在监听端口：

```
9000 for http
61613 for stomp 
```

我的 JavaScript 调试器报告错误：*JSON 未*在以下行中定义：

```
var vals = JSON.parse(payload); 
```

可能是什么原因，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T15:58:29.953

JSON 库未内置在 Javascript 中。您必须包含一个[javascript JSON 库](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)。如果您使用我链接的那个，您的代码应该可以工作。

或者，由于 JSON 是 Javascript 对象文字的子集，您可以这样做：

```
var vals = eval('(' + payload + ')'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-15T00:44:45.540

您必须有一个 javascript 包含标记，用于在您的 html 页面中加载轨道 json 库

对于您的设置，它将位于 http://:9000/static/JSON.js

# javascript - 如何使用 JavaScript 动态设置样式 -webkit-transform？

> ID：708895
> 
> 赞同：119
> 
> 时间：2009-04-02T09:01:33.347
> 
> 标签：javascript, webkit

我想`-webkit-transform: rotate()`使用JavaScript动态更改属性，但常用`setAttribute`的不起作用：

```
img.setAttribute('-webkit-transform', 'rotate(60deg)'); 
```

也不起作用`.style`...

如何在 JavaScript 中动态设置它？

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2009-04-02T09:08:26.170

JavaScript 样式名称是`WebkitTransformOrigin`和[`WebkitTransform`](http://developer.apple.com/safari/library/documentation/AppleApplications/Reference/SafariJSRef/WebKitCSSTransformValue/WebKitCSSTransformValue.html)

```
element.style.webkitTransform = "rotate(-2deg)"; 
```

[在此处](https://developer.apple.com/documentation/webkitjs)查看 WebKit 的 DOM 扩展参考。

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2013-01-29T15:00:57.607

以下是大多数常见供应商的 JavaScript 符号：

```
webkitProperty
MozProperty
msProperty
OProperty
property 
```

我重置了内联变换样式，例如：

```
element.style.webkitTransform = "";
element.style.MozTransform = "";
element.style.msTransform = "";
element.style.OTransform = "";
element.style.transform = ""; 
```

像这样使用jQuery：

```
$(element).css({
    "webkitTransform":"",
    "MozTransform":"",
    "msTransform":"",
    "OTransform":"",
    "transform":""
}); 
```

请参阅博客文章*[使用 JavaScript 编码供应商前缀](http://www.developerdrive.com/2012/03/coding-vendor-prefixes-with-javascript/)*(2012-03-21)。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-04-02T09:07:26.857

尝试使用

```
img.style.webkitTransform = "rotate(60deg)" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-27T01:10:19.263

如果您想通过这样做，您可以像这样`setAttribute`更改`style`属性：

```
element.setAttribute('style','transform:rotate(90deg); -webkit-transform: rotate(90deg)') //etc 
```

如果您想重置所有其他内联样式并仅再次设置所需样式属性的值，这将很有帮助，但在大多数情况下您可能不希望这样做。这就是为什么每个人都建议使用这个：

```
element.style.transform = 'rotate(90deg)';
element.style.webkitTransform = 'rotate(90deg)'; 
```

以上等价于

```
element.style['transform'] = 'rotate(90deg)';
element.style['-webkit-transform'] = 'rotate(90deg)'; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-16T11:55:29.033

**要为您的 3D 对象设置动画，请使用以下代码：**

```
<script>

$(document).ready(function(){

    var x = 100;
    var y = 0;
setInterval(function(){
    x += 1;
    y += 1;
    var element = document.getElementById('cube');
    element.style.webkitTransform = "translateZ(-100px) rotateY("+x+"deg) rotateX("+y+"deg)"; //for safari and chrome
    element.style.MozTransform = "translateZ(-100px) rotateY("+x+"deg) rotateX("+y+"deg)"; //for firefox
},50);
//for other browsers use:   "msTransform",    "OTransform",    "transform"

});

</script> 
```

# c# - 在 Visual Studio 2005/2008 中，为什么“打开 xxxxx.cs”快捷方式不适用于表单？

> ID：708897
> 
> 赞同：1
> 
> 时间：2009-04-02T09:01:46.717
> 
> 标签：c#, visual-studio, ide, keyboard-shortcuts

在 Visual Studio 中，有一个方便的 IDE 快捷方式可以直接跳转到文件，即

`Ctrl`+ `/`（选择查找组合框）
然后输入`>open myclass.cs`

这比通过解决方案资源管理器打开指定的类要快得多。

但是，如果您尝试以这种方式打开表单的代码部分（而不是设计器部分），那么 Visual Studio 只会返回：

> 操作无法完成

...这意味着我必须通过解决方案资源管理器才能打开它们。

有什么方法可以让这个快捷方式适用于表单，还是有其他快捷方式？

**更新：问题似乎出在智能感知上......**

如果我输入`>open form1.cs`然后这工作...

但是，如果我键入`>open form`然后使用向上和向下键从智能感知中进行选择，以便组合读取`>open "Form1.cs (OpenShortcutTest)"`，那么该操作将失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T12:46:54.850

为什么不直接用`F7`查看后面的代码呢？也许我错过了什么？

[编辑]我刚刚在 VS 2008 中尝试过，“打开 form2.cs”工作正常。[/编辑]

# language-agnostic - 在小子集上密集操作时构建内存索引并绕过数据库是一个好主意吗？

> ID：708898
> 
> 赞同：2
> 
> 时间：2009-04-02T09:02:15.997
> 
> 标签：language-agnostic, optimization, database-connection, rdbms

我正在开发一个程序来自动找到最佳的班次分配，但受到很多限制。我正在使用[grails](http://www.grails.org/)，即有关工人、轮班和分配的数据将保存在 DBMS 中。

对于优化本身，我必须非常集中地处理一小部分数据（来自大约 5 个不同表的总共大约 600 行）。我将不得不迭代并搜索各种子子集数十次以计算适应度函数、更改一些值、再次计算适应度、起泡、冲洗、重复，也许数百次。

现在，虽然搜索和迭代正是 DBMS 的用途，但我相信在这种情况下，数百个 DB 请求的开销会使实际完成的工作相形见绌，即使对于像 HSQLDB 这样的内存 DBMS 也是如此。因此，相反，我计划在开始时将整个子集放入内存中，为我必须要做的查找构建我自己的索引（主要是 HashMap），然后只使用这些索引，远离数据库直到我已经完成并将我的结果写入它。

这是一种合理的方法吗？有更好的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T09:45:53.910

我假设您必须向数据库发出数百个命令？没有办法在数据库中执行代码？

我最担心的是完整性。确保您正确处理锁定。您可能希望将版本号存储在某处，这样您就不需要在处理期间锁定整个数据集。在更新事务中，您首先要确保版本号与您开始阅读时的版本号相同。

最后，对标吗？在过去一年左右的时间里，我做了一些应用程序，每个请求都有类似的非常密集的计算过程。使用进程内对象来表示数据比每次请求访问数据库效率要高几个数量级。但是每个应用程序都是不同的，可能会有一些没有考虑到的事情会影响它。

# java - 如何用 JAVA 发回 JSON？

> ID：708901
> 
> 赞同：11
> 
> 时间：2009-04-02T09:03:31.110
> 
> 标签：java, json

我在同时[使用 Gzip 压缩和 JQuery](https://stackoverflow.com/questions/706412/use-gzip-json-responses-and-jquery)时遇到问题。看来这可能是由我在 Struts Actions 中发送 JSON 响应的方式引起的。我使用下一个代码将我的 JSON 对象发回。

```
public ActionForward get(ActionMapping mapping,
    ActionForm     form,
    HttpServletRequest request,
    HttpServletResponse response) {
       JSONObject json = // Do some logic here
       RequestUtils.populateWithJSON(response, json);
       return null;             
}

public static void populateWithJSON(HttpServletResponse response,JSONObject json) {
    if(json!=null) {
        response.setContentType("text/x-json;charset=UTF-8");           
        response.setHeader("Cache-Control", "no-cache");
        try {
             response.getWriter().write(json.toString());
        } catch (IOException e) {
            throw new ApplicationException("IOException in populateWithJSON", e);
        }                               
    }
 } 
```

有没有更好的方法在 Java Web 应用程序中发送 JSON？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-02T09:13:00.603

代替

```
try {
       response.getWriter().write(json.toString());
} catch (IOException e) {
       throw new ApplicationException("IOException in populateWithJSON", e);
} 
```

试试这个

```
try {
        json.write(response.getWriter());
} catch (IOException e) {
        throw new ApplicationException("IOException in populateWithJSON", e);
} 
```

因为这将避免创建字符串，并且 JSONObject 将直接将字节写入 Writer 对象

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-02T09:09:29.117

在我们的项目中，除了我们使用 application/json 作为内容类型之外，我们所做的几乎相同。

维基百科说[JSON 的官方互联网媒体类型是 application/json](http://en.wikipedia.org/wiki/JSON)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-04T03:52:57.543

就个人而言，我认为使用 JAX-RS 是处理数据绑定的最佳方式，无论是 XML 还是 JSON。[Jersey](http://jersey.dev.java.net)是一个很好的 JAX-RS 实现（RestEasy 也很好），并且有很好的支持。这样您就可以使用真实的对象，而无需使用 Json.org 库的专有类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T02:23:14.997

响应.getWriter()。**写**（json.toString（））；

更改为：response.getWriter()。**打印**(json.toString());

# refactoring - DevExpress Refactor Pro 与 JetBrains ReSharper

> ID：708907
> 
> 赞同：11
> 
> 时间：2009-04-02T09:05:36.690
> 
> 标签：refactoring, resharper

在我的部门，我们目前正在使用 ReSharper 4.0，并决定是否在下周发布时升级到 4.5。我个人是 ReSharper 的忠实粉丝，但我的一些同事指出，他们一直在使用 DevExpress 的一个名为 Refactor Pro 的插件，它执行类似的功能。

[http://www.devexpress.com/Refactor](http://www.devexpress.com/Refactor)
[http://www.jetbrains.com/resharper/beta.html](http://www.jetbrains.com/resharper/beta.html)

以前有没有人比较过这些工具，并对哪种工具可以最大程度地提高生产力有任何强烈的看法？为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-09T19:58:06.033

在我的部门，我们也使用 ReSharper。今天我安装了4.5，但是之前已经用过3.something，4.0和4.1。它确实提供了许多很棒的重构和代码编写支持功能、重命名方法和函数、重新排序参数......我真正喜欢的是，根据您的公司代码风格，您可以配置 ReSharper 以在不同严重程度的风格违规方面为您提供提示级别（并根据更改快速应用，如 MS StyleCop，但更容易配置和更微妙）。我最喜欢的功能是通过仅输入 CamelCases 进行类搜索，即您键入 TSHWLOV，ReSharper 会知道您的意思是来自某个名为“TerrificSearchHelperWithLotsOfVoodoo”的引用库中的类。

去年我尝试了 DevExPress CodeRush/RefactorThis-Alternative，在我对 Oliver Sturm 在 BASTA Spring 08 上所做的事情印象深刻之后。界面比 Resharper 更吸引人，更令人印象深刻，有巨大的箭头在你的 IDE 周围翻转和类似的事情，尽管核心功能非常相似。我感觉 CodeRush 更专注于代码创建而不是重构，即创建变量等任务的更多快捷方式。我最喜欢的功能是侧边栏，它总是向您显示当前上下文中可用的所有键盘快捷方式。这使您可以快速学习这些命令，而在 ReSharper 中，您必须在嵌套子菜单中查找大部分命令。这两个套件都非常强大，使用它们几个月后，您可能仍会发现新功能，你在不知不觉中一直需要它。然而，我决定支持 ReSharper 主要是因为我更熟悉它，而且 DevExpress 在我的笔记本上使用了很多资源，有时甚至会减慢它的速度。现在，我再次使用更强大的机器，也许我很快会再试一次。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-04-04T22:47:47.190

我个人更喜欢 CodeRush。

我发现 R# 的界面让我的（当然是次要的）强迫症倾向变得疯狂。小灯泡坚持出现在屏幕的最左侧，即使它的建议与中间或右侧的某些内容有关。我觉得它花哨和分散注意力。

相比之下，CodeRush 的等效智能标签对比度较低且较小。因此，它能够在代码中定位自己而不会分散对所述代码的注意力。我发现我可以在需要时忽略这个 SmartTag，当我决定需要它时，它总是在我面前。

主要是这一点，阻止了我进一步探索 R#。

至于 CodeRush 的功能集：代码分析、重构、CodeProviders、模板、TabToNextReference、QuickNavigation 等等。

我特别喜欢 CodeRush 的可扩展性，它允许我和其他几个人创建许多插件以供在其中使用。( [http://code.google.com/p/dxcorecommunityplugins/](http://code.google.com/p/dxcorecommunityplugins/) )

CodeRush 也有一些高质量的支持和一个非常活跃的用户社区。

当然，R# 或 CodeRush 都不适合所有用户。每个人都有自己的喜好。但是，如果您还没有尝试过这两种方法，那么您当然应该这样做。

如果您来自等式的 R# 方面并希望测试 CodeRush，那么您可能会发现兼容性插件很有用 ( [http://code.google.com/p/dxcorecommunityplugins/wiki/CR_ReSharperCompatibility](http://code.google.com/p/dxcorecommunityplugins/wiki/CR_ReSharperCompatibility) )

此外，CodeRush 有一个[免费版“CodeRush Xpress”](http://devexpress.com/crx)，微软委托 DevExpress 创建，并代表 Visual Studio 2008 的每个用户获得许可。这种合作关系将在 VS2010 发布后继续。

如果您对 CodeRush 有任何疑问，可以在[我的社区 wiki 页面](http://code.google.com/p/dxcorecommunityplugins/wiki/RoryBecker)底部找到与我联系的详细信息。

我应该说我不为 DevExpress 工作。我就是你所说的 DevExpress MVP。为了保持这一立场，我在 DevExpress 论坛中回答问题（仅此而已）。

我所说的一切都是我自己的诚实意见。

如果您有任何问题，请[随时与我联系](http://code.google.com/p/dxcorecommunityplugins/wiki/RoryBecker)：）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-02T09:13:48.340

我正在使用具有很多“隐藏”功能的 DevExpress，因此您需要阅读手册以了解如何激活某些功能。我觉得它非常被动和微妙。

我使用了 ReSharper，发现它在我的编码风格中存在问题并且非常具有侵入性。括号关闭让我发疯，它忽略了我的偏好并且无法应对我如何编写代码行 - 这可能不是最有效的，但它是不会改变的事情之一！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-04-05T09:40:28.293

我都试过了，真的没有和 ReSharper 相处。我发现它对我的编码风格来说太麻烦了。当我切换到 CodeRush / Refactor！就像我找到了提高工作效率的完美帮手。在大多数情况下，重构正是我想从这种产品中看到的。

但是，它是课程的马，您很可能会发现您更喜欢 ReSharper。我能给出的最好建议是尝试其他产品，看看你更喜欢哪一种。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T19:16:15.790

当然，唯一正确的答案是两者都使用！我愿意。不过，您需要一台功能强大的笔记本电脑。如果只能选择一个，我会选择 ReSharper……我认为静态代码分析要好得多。ReSharper 有很多很棒的功能，DevExpress 有很多很棒的功能。当你把两者放在一起时，你最终会得到很多很棒的东西。你需要跳过几个圈才能让它们一起玩得很好：http: [//frazzleddad.blogspot.com/2010/01/making-devexpress-resharper-play-nicely.html](http://frazzleddad.blogspot.com/2010/01/making-devexpress-resharper-play-nicely.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-09T13:29:53.963

如果您拥有 4.0 许可证，则 R# 4.5 是免费升级。所以我建议获取并使用它——改变“生产力工具”总是很痛苦，因为你必须习惯不同的方式、键盘快捷键等做事——不管工具实际上有多好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-15T13:44:40.483

我有 Refactor Pro 的个人副本，但我使用 R# 4.1 与 StyleCop 插件一起工作，因为这是团队标准工具。我喜欢比 R# 更好的 RfP 的箭头和代码定位的东西。否则工具非常相似。

然而，在这个时候，它的 StyeCop 插件对我来说有利于 R#。

干杯本杰

# google-app-engine - Google App Engine 与网络托管计划相比如何？

> ID：708910
> 
> 赞同：26
> 
> 时间：2009-04-02T09:06:58.060
> 
> 标签：google-app-engine, hosting, web-hosting, shared-hosting

Google App Engine 提供每天 1 GB 出站流量和每天 6.5 CPU 小时（基于 1.2 GHz Intel x86 处理器）的免费配额。

这些免费配额与网络托管计划相比如何？例如，免费配额支持的流量——通常高于还是低于典型的 5 美元/月共享主机帐户支持的流量？

在免费配额之上，Google 收取每 GB 传出流量 0.12 美元、每 GB 传入流量 0.10 美元、每 CPU 小时 0.10 美元、每月每 GB 存储 0.15 美元的费用。

这些数字如何转化为正常的网络托管计划？例如，40 美元/月的 VPS 计划和 200 美元/月的专用服务器计划可以支持的流量，它们在 Google App Engine 上的成本是多少？

我知道这取决于很多因素，但如果有人愿意分享任何大概的估计或经验，我将非常感激。

我正在尝试在 App Engine 和标准 Web 托管之间为一个 DB 支持的 Python 网站做出决定。该网站将从小型网站开始，但如果流量增加，我想看看哪个是长期更好的选择。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-02T10:02:40.377

正如你所说，这取决于很多。不仅是您要托管的网站，还包括您要与谁进行比较。给你一个粗略的想法，我在 App Engine 上托管了一个每天 20k 到 30k 页面浏览量的网站，每周花费 17c。这是默认配额之外的额外存储空间——所有其他配额都在自由区内。

就具体比较而言，如果我们看一下[Linode](http://www.linode.com/index.cfm)，例如，他们的基本计划是 20 美元，用于 12GB 的存储和每月 120GB 的传输。以 App Engine 的价格计算，这将花费您每月最多 16.20 美元 - 假设它是所有传出流量。如果你在一个月内做的比这少，你的成本就会更低。显然，您在 App Engine 上没有 VPS 所拥有的所有多功能性，但您还拥有更好的可扩展性和可靠性。

与其他托管服务进行比较相当容易。我认为 App Engine 通常会走在前面，所以主要取决于您的应用是否适合 App Engine。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-07-14T21:50:34.170

如果您的应用程序已经在 python 中，请使用应用程序引擎！您不能要求一个更可靠、可扩展、高效的托管平台。就美元而言，您无法击败它。我现在正在将我编写的所有应用程序移植到 python 以利用谷歌应用程序引擎。想象一下，vps 不再担心服务器问题。好好利用它！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-12-03T00:42:57.373

试试这个免费的诊断。它比较 Azure / AWS / Appengine 并准确告诉您应该使用哪个平台以及使用多少： http: [//www.whitestratus.com/cloud-platform-diagnostic-tool](http://www.whitestratus.com/cloud-platform-diagnostic-tool)

# c# - 使用 Case/Switch 和 GetType 确定对象

> ID：708911
> 
> 赞同：171
> 
> 时间：2009-04-02T09:07:04.317
> 
> 标签：c#, .net, reflection, switch-statement, case

> **可能重复：**
> [C# - 有没有比这更好的选择来“打开类型”？](https://stackoverflow.com/questions/298976/c-sharp-is-there-a-better-alternative-than-this-to-switch-on-type)

如果你想`switch`在一种对象上，最好的方法是什么？

### 代码片段

```
private int GetNodeType(NodeDTO node)
{
    switch (node.GetType())
    { 
        case typeof(CasusNodeDTO):
            return 1;
        case typeof(BucketNodeDTO):
            return 3;
        case typeof(BranchNodeDTO):
            return 0;
        case typeof(LeafNodeDTO):
            return 2;
        default:
            return -1;
    }
} 
```

我知道这不起作用，但我想知道你如何解决这个问题。`if/else`在这种情况下陈述是否合适？

还是您使用开关并添加`.ToString()`到类型？

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2011-02-04T19:41:58.830

这不会直接解决您的问题，因为您想打开自己的用户定义类型，但为了其他只想打开内置类型的人的利益，您可以使用[TypeCode](http://msdn.microsoft.com/en-us/library/system.typecode.aspx)枚举：

```
switch (Type.GetTypeCode(node.GetType()))
{
    case TypeCode.Decimal:
        // Handle Decimal
        break;

    case TypeCode.Int32:
        // Handle Int32
        break;
     ...
} 
```

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2009-04-02T09:10:32.327

如果我*真的*必须`switch`使用对象类型，我会使用`.ToString()`. 然而，我会不惜一切代价避免它：`IDictionary<Type, int>`会做得更好，[访问者](http://en.wikipedia.org/wiki/Visitor_pattern)可能是一个矫枉过正，但否则它仍然是一个完美的解决方案。

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2009-09-15T11:36:23.887

在 MSDN 博客文章*[Many Questions: switch on type](http://blogs.msdn.com/peterhal/archive/2005/07/05/435760.aspx)*中提供了一些关于为什么[.NET](http://en.wikipedia.org/wiki/.NET_Framework)不提供开关类型的信息。

像往常一样 - 变通办法总是存在的。

这不是我的，但不幸的是我失去了来源。它使切换类型成为可能，但我个人认为这很尴尬（字典的想法更好）：

```
 public class Switch
  {
      public Switch(Object o)
      {
          Object = o;
      }

      public Object Object { get; private set; }
  }

  /// <summary>
  /// Extensions, because otherwise casing fails on Switch==null
  /// </summary>
  public static class SwitchExtensions
  {
      public static Switch Case<T>(this Switch s, Action<T> a)
            where T : class
      {
          return Case(s, o => true, a, false);
      }

      public static Switch Case<T>(this Switch s, Action<T> a,
           bool fallThrough) where T : class
      {
          return Case(s, o => true, a, fallThrough);
      }

      public static Switch Case<T>(this Switch s,
          Func<T, bool> c, Action<T> a) where T : class
      {
          return Case(s, c, a, false);
      }

      public static Switch Case<T>(this Switch s,
          Func<T, bool> c, Action<T> a, bool fallThrough) where T : class
      {
          if (s == null)
          {
              return null;
          }

          T t = s.Object as T;
          if (t != null)
          {
              if (c(t))
              {
                  a(t);
                  return fallThrough ? s : null;
              }
          }

          return s;
      }
  } 
```

用法：

```
 new Switch(foo)
     .Case<Fizz>
         (action => { doingSomething = FirstMethodCall(); })
     .Case<Buzz>
         (action => { return false; }) 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2009-12-02T20:17:25.687

我面临同样的问题并遇到了这篇文章。这就是 IDictionary 方法的含义：

```
Dictionary<Type, int> typeDict = new Dictionary<Type, int>
{
    {typeof(int),0},
    {typeof(string),1},
    {typeof(MyClass),2}
};

void Foo(object o)
{
    switch (typeDict[o.GetType()])
    {
        case 0:
            Print("I'm a number.");
            break;
        case 1:
            Print("I'm a text.");
            break;
        case 2:
            Print("I'm classy.");
            break;
        default:
            break;
    }
} 
```

如果是这样，我不能说我喜欢将字典中的数字与案例陈述相协调。

这将是理想的，但字典参考杀死了它：

```
void FantasyFoo(object o)
{
    switch (typeDict[o.GetType()])
    {
        case typeDict[typeof(int)]:
            Print("I'm a number.");
            break;
        case typeDict[typeof(string)]:
            Print("I'm a text.");
            break;
        case typeDict[typeof(MyClass)]:
            Print("I'm classy.");
            break;
        default:
            break;
    }
} 
```

还有另一个我忽略的实现吗？

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2009-04-02T09:12:16.970

我只会使用 if 语句。在这种情况下：

```
Type nodeType = node.GetType();
if (nodeType == typeof(CasusNodeDTO))
{
}
else ... 
```

另一种方法是：

```
if (node is CasusNodeDTO)
{
}
else ... 
```

第一个示例仅适用于精确类型，后者也检查继承。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2010-08-04T00:52:52.080

你可以这样做：

```
function void PrintType(Type t) {
 var t = true;
 new Dictionary<Type, Action>{
   {typeof(bool), () => Console.WriteLine("bool")},
   {typeof(int),  () => Console.WriteLine("int")}
 }[t.GetType()]();
} 
```

这很清楚而且很容易。它比在某处缓存字典要慢一些..但是对于很多代码来说，这无论如何都无关紧要..

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2009-04-02T09:12:33.913

你可以这样做：

```
if (node is CasusNodeDTO)
{
    ...
}
else if (node is BucketNodeDTO)
{
    ...
}
... 
```

虽然这会更优雅，但它可能不如这里的其他一些答案那么有效。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2009-04-02T09:13:11.027

一种方法是向 NodeDTO 添加纯虚拟 GetNodeType() 方法并在后代中覆盖它，以便每个后代返回实际类型。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2009-04-02T14:08:20.270

根据您在 switch 语句中所做的事情，正确的答案是多态性。只需在接口/基类中放置一个虚函数并覆盖每个节点类型。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-06T20:11:21.133

我实际上更喜欢这里给出的答案： [有比这更好的选择来“打开类型”吗？](https://stackoverflow.com/questions/298976/c-sharp-is-there-a-better-alternative-than-this-to-switch-on-type)

然而，关于在 C# 等面向对象的语言中不实现任何类型比较方法，这是一个很好的论点。作为替代方案，您可以使用继承来扩展和添加额外的必需功能。

这一点在作者博客的评论中讨论过：http: [//blogs.msdn.com/b/jaredpar/archive/2008/05/16/switching-on-types.aspx#8553535](http://blogs.msdn.com/b/jaredpar/archive/2008/05/16/switching-on-types.aspx#8553535)

我发现这是一个非常有趣的观点，它改变了我在类似情况下的方法，只希望这对其他人有所帮助。

亲切的问候，韦恩

# http - 检测 HTTP POST 请求的字符编码

> ID：708915
> 
> 赞同：59
> 
> 时间：2009-04-02T09:08:22.083
> 
> 标签：http, rest, http-headers

我正在构建一个 Web 服务并有一个接受 POST 以创建新资源的节点。该资源需要两种内容类型之一——我将定义的 XML 格式或表单编码的变量。

这个想法是消费应用程序可以直接发布 XML 并从更好的验证等中受益，但是还有一个 HTML 界面可以发布表单编码的内容。显然 XML 格式有一个字符集声明，但我看不出我是如何仅通过查看 POST 来检测表单的字符集的。

从 Firefox 到表单的典型帖子如下所示：

```
POST /path HTTP/1.1
Host: www.myhostname.com
User-Agent: Mozilla/5.0 [...etc...]
Accept: text/html,application/xhtml+xml, [...etc...]
Accept-Language: en-gb,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive: 300
Connection: keep-alive
Content-Type: application/x-www-form-urlencoded
Content-Length: 41

field1=value1&field2=value2&field3=value3 
```

这似乎不包含任何有用的字符集指示。

据我所知，application/x-www-form-urlencoded 类型完全用 HTML 定义，它只是列出了 %-encoding 规则，但没有说明数据应该在什么字符集中。

基本上，如果我不知道 HTML 最初呈现的字符集是什么，有什么方法可以告诉字符集？否则，我将不得不尝试根据存在的字符来猜测字符集，而我所知道的总是有点不确定。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2009-04-02T09:16:24.043

HTTP POST 的默认编码是 ISO-8859-1。

否则，您必须查看 Content-Type 标头，然后看起来像

```
Content-Type: application/x-www-form-urlencoded ; charset=UTF-8 
```

您可以使用以下方式声明您的表格

```
<form enctype="application/x-www-form-urlencoded;charset=UTF-8"> 
```

或者

```
<form accept-charset="UTF-8"> 
```

强制编码。

一些参考资料：

[http://www.htmlhelp.com/reference/html40/forms/form.html](http://www.htmlhelp.com/reference/html40/forms/form.html)

[http://www.w3schools.com/tags/tag_form.asp](http://www.w3schools.com/tags/tag_form.asp)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-02T09:16:15.137

POST 中使用的字符集将与托管表单的 HTML 中指定的字符集相匹配。因此，如果您的表单是使用 UTF-8 编码发送的，那么该编码就是用于发布内容的编码。在将值转换为字符编码的八位字节集后应用 URL 编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-02-28T00:41:47.527

尝试在您的 Content-Type 上设置字符集：

```
httpCon.setRequestProperty( "Content-Type", "multipart/form-data; charset=UTF-8; boundary=" + boundary ); 
```

# visual-c++ - VC++ 6.0 中的回调函数

> ID：708919
> 
> 赞同：0
> 
> 时间：2009-04-02T09:09:19.537
> 
> 标签：visual-c++

什么是回调函数[CALLBACK EXPORT]，它是如何工作的，它是无限循环还是递归。我在 vc++ 6.0 中有一段代码，任何人都可以解释它是如何工作的。

```
timer_result=SetTimer(NULL,1,(t*1000),Timerflow); //say t=2,or t=10,

===

void  CALLBACK EXPORT Timerflow(HWND hWnd, UINT nMsg, UINT nIDEvent, DWORD dwTime)
{
----
----
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T09:14:35.750

回调函数是从您自己的代码外部调用的函数，通常由操作系统调用。在您给出的示例中， SetTimer 函数要求操作系统在经过固定时间后调用您的回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T09:17:54.587

像这样的回调可用于在没有内置事件的语言（如 .Net 语言）中提供事件处理。

您调用 settimer 函数，传递一个指向您的函数之一的指针，该函数将在所需时间过去时调用。

Callback 宏用于告诉 32 位之前的编译器如何在 API 和您的函数之间传递函数争论，请参阅本文中的此[片段](http://www.ubercode.com/learning-to-write-programs-in-c.html)

> **DLL 回调以及为什么 WINAPI 与 CALLBACK 相同**
> 
> 允许 DLL 调用回客户端代码是可能的，如果您正在编写 DLL 以实现回调函数或设计事件驱动的接口，这将非常有用。其概念是客户端调用 DLL 中的函数，将指向驻留在客户端中的函数的指针传递给 DLL，然后 DLL 函数将使用指针调用回客户端。

# linux - Linux iptables TRIGGER 目标描述

> ID：708934
> 
> 赞同：3
> 
> 时间：2009-04-02T09:14:15.890
> 
> 标签：linux, documentation, firewall, iptables

我正在编写控制 Linux 防火墙的应用程序（使用 iptables）。我需要实现一些端口触发。有似乎适合它的 TRIGGER 目标。但是，我找不到它的好文档（实际上很难找到这个目标的任何文档）。有人可以将我重定向到有关 iptables 的 TRIGGER 目标的任何信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T14:25:54.160

我认为 ipt_RECENT 更好地处理“端口敲击”或其他问题。

您当然可以使用 ipt_RECENT 设置规则，以允许（或实际上，禁止）在最近看到与另一个端口的连接后通过一个端口的流量。

有关更多信息，请参阅 iptables 手册页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T09:31:18.580

[这](http://netfilter.org/documentation/index.html#documentation-faq)是 iptables 的官方文档。我无法直接找到明确的答案，但是由于您没有提到看过那里，所以我认为值得包括在内。

# c# - Web 应用程序仅返回 XML 的最佳方法？

> ID：708937
> 
> 赞同：1
> 
> 时间：2009-04-02T09:14:48.027
> 
> 标签：c#, .net, web-services

我正在构建一个 Web 应用程序，它将基于特定模式并根据查询字符串上携带的某些输入参数（例如日期或搜索词）从数据库生成 XML。

编写返回所需 XML 的 Web 服务或编写输出 XML 的 ashx 处理程序的最佳方法是什么？

我是否能够在每个实例中完全按照我的需要指定 XML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-20T20:24:05.687

在这种情况下，我会做 ashx。根据您的描述，这听起来像是一个搜索工具、一个表（或单个数据库中的有限表组）和相对有限的范围。所有 MVC 的东西可能都是矫枉过正的。不要过度设计它。

只需创建一个实现 IHttpHandler 的类（或者，如果您使用 Visual Studio 2005 或更高版本，则只需执行一个通用处理程序），解析查询字符串，创建动态 SQL 字符串或将参数传递给存储过程，然后使用XmlTextWriter 创建输出。您可以将 XmlTextWriter 指向响应的输出流或内存流。我使用内存流方法是因为它为我提供了更好的错误处理选项。然后将内容类型设置为 application/xml 并流式传输结果。

我喜欢这种方法，因为它易于理解、易于实施、易于维护，并且可以让您完全控制。缺点是它与数据库紧密绑定，如果您的应用程序的范围随着时间的推移而增加，它可能不如基于 Web 服务框架的方法之一灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T09:21:45.577

[考虑使用WebHttpBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.webhttpbinding.aspx)编写 REST 样式的 WCF 服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T09:24:19.500

我找到了开始做这种事情的最快方法，特别是如果它是一个简单的 REST 类型的服务 - 例如。使用简单的HTTP GET——就是使用ASP.MVC。我相信您已经阅读过，这使您可以完全控制 HTML，但这也意味着您可以完全控制是否返回 HTML。您甚至不需要视图，只需返回一个 ContentResult。

它有点“浪费”MVC，但它是一种非常快速的方式来让球滚动。我使用了类似的方法，但最后用我自己的 HttpHandler 和 RouteHandler 将其形式化，这基本上允许我将 URL 映射到一段代码，几乎不需要额外的设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T09:30:39.237

从 Ch00k 的回答开始，下面的博客（不，这不是我的 :-)）有他关于使用 ASP.MVC 和制作 Restful Web 服务以返回 XML、JSON 等的发现。也许这对你来说是一本有用的读物​​......[博客链接](http://shouldersofgiants.co.uk/blog/default.aspx)。

要记住的主要事情是，您希望返回 xml 字符串而不是实际的 .net XmlDocument 类型（我可能误解了问题的重点），否则很难从其他平台使用它。

希望这可以帮助 ：-）

# java - 计算空心三维几何对象的体积

> ID：708938
> 
> 赞同：2
> 
> 时间：2009-04-02T09:14:54.407
> 
> 标签：java, math, geometry

我们在 Java 中完成了一项与继承有关的家庭作业。我对编程本身没有问题，但我对一些数学有点不确定，并希望得到更有知识的人的确认/更正。

分配从一个抽象类 GeometricObject 开始，它被扩展为三个二维对象。一个长方形、一个圆形和一个三角形。然后将这三个扩展为矩形的长方体，圆形的圆柱体和球体，并将三角形扩展为三棱柱。

这些三维物体中的每一个都是空心的，都有一定的厚度，并且是由一种特殊的金属制成的，所以我们要计算它们的重量。这就是问题所在，因为我有点不确定如何在其中一些上找到“内部体积”。

*   长方体：这里我假设我可以从宽度、高度和深度中减去 2 * 厚度，然后一切看起来都很好。
*   圆柱体：从构成底部的半径中减去厚度，从高度中减去 2* 厚度
*   球体：从半径中减去厚度
*   棱镜：这是我有点卡住的地方。每个对象都通过基线、三角形的高度和整个棱镜的高度。我如何使用它来找到代表内部体积的“内部棱镜”？

*更新*：忘了说在创建对象的时候，我们指定了最外面的尺寸，空心的部分在这个里面。不允许反其道而行之。

*再次更新*：三角形是等腰三角形。

*再次更新*：混合了圆形的半径和直径。现已更正。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T09:50:08.160

我认为您无法从您拥有的数据（基线长度和三角形高度）中获得此结果。您必须获取其他信息，例如点的位置或基线处的角度。

编辑：因为三角形是等腰的：

正如 AnthonyWJones 已经指出的那样，内三角形与外三角形相似。因此，您唯一需要做的就是找到两者之间的比率。

[素描 http://img76.imageshack.us/img76/4164/g2654.png](http://img76.imageshack.us/img76/4164/g2654.png)

你可以很容易地从高处找到它。由于三角形 CQP 和 ACS 相似

```
h2 : |PQ| = |AC| : |AS| 
```

在哪里

```
|PQ| = h1 (= the thickness of the metal)
|AC| = sqrt(base^2/4+height^2)
|AS| = base/2 
```

然后，您计算`h2`并且比率`r = (height - h1 - h2)/height`是两个三角形之间的比率。则内三角形的面积为`r^2 * area of the outer triangle`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T09:34:22.660

获取形状的体积，就好像它们不是空心的一样，然后，只得到空心的体积（形状 - 厚度）

从空心体积中减去全体积以获得金属的实际体积。

例子：

立方体：

```
Full Volume: Height * Width * Depth

hollow volume: (Height - Thickness) * ( Width - Thickness ) * ( Depth - Thickness)

Volume of the metal used: Full Volume - hollow Volume 
```

根据所用金属的体积计算重量。

* * *

假设你的棱镜是三角形~~的，三角形是等边~~的，基线是三角形的底边，高度是从基线到对面的点（高度线与基线成直角）。

那么完整的音量将是

```
fv = (1/2 * baseLine * triangleHeight) * prismHeight 
```

空心体积将是

```
hv = (1/2 * (baseline - thickness) * (triangleHeight - thickness)) * (prismHeight - thickness) 
```

* * *

在阅读了您对 jpaleck 的评论后，~~您的基线似乎是三角形的斜边（最长的线），~~以上内容应该仍然适用。

* * *

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-02T10:28:02.717

关于内棱镜，您知道的一件事是它与外棱镜具有相同的比率。换句话说，给定内棱镜的高度，您可以计算内底长度并从那里计算体积。

您知道底座将有 1 个单位的厚度。这样就剩下计算从内棱镜顶点到外棱镜顶点的距离了。

该距离是直角三角形的斜边。三角形中的角度是已知的，因为它们是基础长度和高度的函数。三角形的一侧的`thickness`长度是从内顶点处的内边缘到外边缘的垂直线。（三角形的最后一边是垂直线与外边缘相交的地方，直到外尖峰）。

这足以使用标准三角函数来计算斜边长度。这个长度加上从原始高度减去的 1 厚度（对于底座）给出了内部高度。内部和外部高度之间的比率可以应用于基础长度。

可能有更聪明的方法可以做到这一点，但这将是我常用的方法。

# user-interface - UI 驱动开发

> ID：708939
> 
> 赞同：6
> 
> 时间：2009-04-02T09:15:01.113
> 
> 标签：user-interface, requirements

UI 驱动开发的想法是否有意义？我们的大多数客户都喜欢以屏幕的形式表达他们的要求。例如，我想要一个屏幕来做这个和那个。有时他们甚至会自己决定屏幕的布局（这可能是因为今天的客户已经在他们的大部分任务中使用了软件应用程序）。

此外，这种需求收集方法似乎可以自动传达数据和相关行为。

你们有什么感想？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T09:37:04.790

实际上，在这方面它是有道理的。用例在这里的不同之处在于它们不能以相同的方式使用。用例将有助于提取和形式化需求。

不久前我在一个 UI 实验室工作，我们玩弄了这个概念，尽管我们没有这样称呼它。这里的基本思想是我们将使用敏捷迭代方法进行开发，我们将使用可用性测试来帮助收敛到所需的解决方案。

典型的周期是：

*   起草一些需求和用例，范围非常有限，非常集中。
*   创建一个测试协议，使我们能够收集有关此功能的数据（可用性、易用性、接受度、性能等）。
*   创建或扩展应用程序以包含此功能
*   让一些用户使用可用性测试的敏捷调整来测试应用程序（请参阅[Ruben 的可用性测试手册](http://portal.acm.org/citation.cfm?id=561768)），我们将测试会话限制为 15 分钟，并进行 15 分钟的 debreifing。
*   从测试中提取有用的数据以注入未来的迭代。

当用户要么不确切知道他们想要什么或不能告诉我们时，这种方法特别有用。因此，我们必须设计测试来收集关于软件对用户的实际有用性的客观数据，并因此尝试调整下一次迭代。（我们的许多“客户”，如果我可以这样称呼他们的话，他们是重度残障人士，不会说话，所以我们必须要有创意）。

这种工作方式迫使我们在软件开发生命周期的早期就为客户提供 GUI，因为它是我们直接测试的中心点，可以说它是 GUI 驱动的设计，因为融合的驱动力是用户与系统的交互。

尽管我们主要针对非常特定的情况开发了这种技术，但我们在普通软件上与普通用户进行了一些测试，并获得了非常积极的结果。设计将很快收敛到用户的需求。他们参与这种设计方法的事实也对目标社区对产品的接受度产生了非常积极的影响。

不幸的是，在我们能够发表我们的结果并扩大这一研究范围之前，内部冲突已经拆除了实验室，真的很遗憾。

因此，UIDD（如果你原谅这个不好的首字母缩写词）将成为 TDD 系列软件开发方法的成员，其中迭代取决于用户交互。

* * *

关于该主题的补充阅读：

[http://www.codinghorror.com/blog/archives/001091.html](http://www.codinghorror.com/blog/archives/001091.html)

[http://cakebaker.42dh.com/2007/07/07/usability-driven-development/](http://cakebaker.42dh.com/2007/07/07/usability-driven-development/)

[http://www.springerlink.com/content/l413k76812896gnt/](http://www.springerlink.com/content/l413k76812896gnt/)

[http://www.agilemodeling.com/essays/agileUsability.htm](http://www.agilemodeling.com/essays/agileUsability.htm)

[http://www.uxbooth.com/blog/how-test-driven-development-increases-overall-usability/](http://www.uxbooth.com/blog/how-test-driven-development-increases-overall-usability/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T09:50:21.950

你在做什么开发？当我开发 Web 应用程序（flex 或 php）时，我使用绘图（线框），这样我就可以让客户了解应用程序的流程/外观，而无需编写任何代码。

没有适合每个人的“正确的发展方式”，您只需要找到最适合您的方式。干杯！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T09:20:50.743

我发现这是收集需求的合理方式。我会小心实际构建屏幕，然后直接开发功能。您会发现代码重用率很低，并且您将拥有一个看起来很漂亮的应用程序，但速度很慢或不能完全正确地工作。它将适用于某些项目，而不适用于其他项目，具体取决于需求的复杂程度以及预测数据瓶颈、缓存问题等问题的能力。

听起来它类似于行为驱动开发、线框图和用户故事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T09:18:53.523

我认为您在这里真正谈论的是 **用例**- 请参阅[本文](http://en.wikipedia.org/wiki/Use_Case)以获取介绍。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T09:20:22.850

故事测试驱动开发只要你认真对待自动化部分，我认为这是一个很好的主意。如果你不能自动化你的测试，那么你就有麻烦了。在这里查看一篇关于它的论文：http: [//www.industriallogic.com/papers/storytest.pdf](http://www.industriallogic.com/papers/storytest.pdf) 这听起来不像您的客户正在为您提供自动化 UI 测试，但我认为这是最好的方法。

# java - 如何将重复模式与 Java 正则表达式匹配？

> ID：708947
> 
> 赞同：4
> 
> 时间：2009-04-02T09:17:57.987
> 
> 标签：java, regex

给定以下输入字符串*3481.7.1071.html*

我想确认

1.  该字符串有 1 个或多个数字，后跟一个句点。
2.  字符串以*html*结尾。

最后，我想提取最左边的数字（即 3481）。

我当前的正则表达式几乎就在那里，但我无法捕获正确的组：

```
final Pattern p = Pattern.compile("(\\d++\\.)+html");   
final Matcher m = p.matcher("3481.7.1071.html");
if (m.matches()) {
    final String corrected = m.group(1)+"html"; // WRONG! Gives 1071.html
} 
```

**如何捕捉第一场比赛？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-02T09:21:21.083

你可以把它分解出来：

```
(\d+\.)(\d+\.)*html 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T09:54:15.200

```
"^(\\d+)\\.(\\d+\\.)*html$" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T16:57:05.397

Java风格：`"(\\d+)\\..*?\\.html$"`

这将 1) 获取第一组连续数字，2) 在单词之后需要一个点，3) 跳过除 3) 文字字符串“.html”之外的所有内容。

如果您的意思是“一个或多个 [*组*] 数字后跟一个句点”，那么这更符合您的要求。

```
"(\\d+)(?:\\.\\d+)*\\.html$" 
```

这样你得到一个*数字*而不是点。并且不需要捕获任何其他模式，所以它们不是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T14:38:50.797

是的你可以。

如果`123.html`and`1.23html`是**有效**的，[使用这个](http://regexr.com?320p9)：

```
^(?:(\d+)\.).*?html$ 
```

如果**无效**`123.html`但**有效**，请[使用](http://regexr.com?320pc)：**`1.23html`**

 ****```
^(?:(\d+)\.(?!h)).*?html$ 
```

如果`123.html`和**无效**但仅`1.23html`有效**，**请[使用](http://regexr.com?320pf)：**`1.23.html`**

 ****```
^(?:(\d+)\.).*?\.html$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T14:11:35.493

```
groovy:000> p = java.util.regex.Pattern.compile("(\\d+).*") 
===> (\d+).*
groovy:000> m = p.matcher("3481.7.1071.html")
===> java.util.regex.Matcher[pattern=(\d+).* region=0,16 lastmatch=]
groovy:000> m.find()
===> true
groovy:000> m.group(1)+".html"
===> 3481.html
groovy:000> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-04-02T09:56:39.283

jpalecek 的解决方案失败了；它捕获最右边的数字。原始海报更接近，但他得到了*最右边的*数字。要获得最左边的数字，请忽略第一个点之后的任何内容：

```
[^\d]*(\d+)\..*html 
```

[^\d]* 忽略最左边数字之前的所有内容（因此 X1.html 捕获数字 1）（\d+）。捕获第一个数字，如果它们后跟一个点。.* 忽略点和最终 html 之间的所有内容。

# c++ - STL 迭代器什么时候会为零？

> ID：708948
> 
> 赞同：2
> 
> 时间：2009-04-02T09:18:47.737
> 
> 标签：c++, stl, iterator

我有一个像这样的程序

```
list<int>:: iterator n = alist.begin();
while(n!= (list<int>::iterator)0)
{
    printf("Element is %d\n",*n);
    n = alist.erase(n);
} 
```

所以在这里我将迭代器与零进行比较。但在删除最后一个元素后，编译器显示此错误。

```
*** 检测到 glibc *** ./new: free(): 无效指针：0xbf99cb10 ***
======= 回溯：=========
/lib/libc.so.6[0xb7d956e1]
/lib/libc.so.6(cfree+0x89)[0xb7d96d79]
/usr/lib/libstdc++.so.6(_ZdlPv+0x21)[0xb7f3ff81]
./新[0x8048c81]
./新[0x8048ca6]
./新[0x8048d07]
./新[0x8048d39]
./new(__gxx_personality_v0+0x216)[0x804888e]
/lib/libc.so.6(__libc_start_main+0xdc)[0xb7d46f9c]
./new(__gxx_personality_v0+0x49)[0x80486c1]
======= 内存映射：========
08048000-0804a000 r-xp 00000000 08:09 3704751 /home/sathya/chaithra/archivesthrash/新

```

如果队列/列表为空，我希望迭代器为零。我应该怎么做？因为在我的项目中，我需要将此迭代器仅与零进行比较，而不是与 alist.end().. 可能的解决方案是什么......？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-02T09:21:53.033

为什么您认为迭代器将永远“为零”？迭代器不是指针或索引。如果需要检查容器是否为空，请使用 empty() 成员函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T10:44:33.583

将此更改为

```
list<int>:: iterator n = alist.begin();
while(n!= alist.end())
{
    printf("Element is %d\n",*n);
    n = alist.erase(n);
} 
```

或者

```
list<int>:: iterator n = alist.begin();
while(alist.size() > 0)
{
    printf("Element is %d\n",*n);
    n = alist.erase(n);
} 
```

因为您不能将迭代器与 NULL 进行比较 - 这不是迭代器的定义状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T10:59:42.547

也许您想测试迭代器的内容是否为0。在这种情况下......您需要更改为：

```
list<int>::iterator n = alist.begin();
while( !alist.empty() && 0 != *n) 
{
    printf("Element is %d\n",*n);
    n = alist.erase(n);
} 
```

# c# - 如何在 C# 中使用私有构造函数实例化对象？

> ID：708952
> 
> 赞同：41
> 
> 时间：2009-04-02T09:20:29.730
> 
> 标签：c#, constructor, instantiation, private-constructor

我绝对记得在某处看到一个使用反射或其他东西的例子。这是与用户无法创建的事情有关`SqlParameterCollection`（如果我没记错的话）。可惜再也找不到了。

有人可以在这里分享这个技巧吗？并不是说我认为它是一种有效的开发方法，我只是对这样做的可能性非常感兴趣。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2009-04-02T09:27:57.730

**您可以使用Activator.CreateInstance**的重载之一来执行此操作：[`Activator.CreateInstance(Type type, bool nonPublic)`](https://msdn.microsoft.com/en-us/library/he47tyc4(v=vs.110).aspx)

用于论证`true`。`nonPublic`因为`true`匹配一个公共或非公共的默认构造函数；并且`false`仅匹配公共默认构造函数。

例如：

```
 class Program
    {
        public static void Main(string[] args)
        {
            Type type=typeof(Foo);
            Foo f=(Foo)Activator.CreateInstance(type,true);
        }       
    }

    class Foo
    {
        private Foo()
        {
        }
    } 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2009-04-02T09:38:34.100

```
// the types of the constructor parameters, in order
// use an empty Type[] array if the constructor takes no parameters
Type[] paramTypes = new Type[] { typeof(string), typeof(int) };

// the values of the constructor parameters, in order
// use an empty object[] array if the constructor takes no parameters
object[] paramValues = new object[] { "test", 42 };

TheTypeYouWantToInstantiate instance =
    Construct<TheTypeYouWantToInstantiate>(paramTypes, paramValues);

// ...

public static T Construct<T>(Type[] paramTypes, object[] paramValues)
{
    Type t = typeof(T);

    ConstructorInfo ci = t.GetConstructor(
        BindingFlags.Instance | BindingFlags.NonPublic,
        null, paramTypes, null);

    return (T)ci.Invoke(paramValues);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T09:21:40.630

如果该类不是您的类，那么听起来 API 是故意编写的以防止这种情况发生，这意味着您的方法可能不是 API 编写者的意图。查看文档，看看是否有推荐的方法来使用这个类。

如果您*确实*可以控制该类并希望实现此模式，那么它通常通过类上的静态方法来实现。这也是构成单例模式的一个关键概念。

例如：

```
public PrivateCtorClass
{
    private PrivateCtorClass()
    {
    }

    public static PrivateCtorClass Create()
    {
        return new PrivateCtorClass();
    }
}

public SomeOtherClass
{
    public void SomeMethod()
    {
        var privateCtorClass = PrivateCtorClass.Create();
    }
} 
```

SqlCommandParameter 就是一个很好的例子。他们希望你通过调用这样的东西来创建参数：

```
var command = IDbConnnection.CreateCommand(...);
command.Parameters.Add(command.CreateParameter(...)); 
```

我的示例不是很好的代码，因为它没有演示设置命令参数属性或重用参数/命令，但您明白了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-22T10:12:14.513

`Type`如果您的is`private`或，它也会有所帮助`internal`：

```
 public static object CreatePrivateClassInstance(string typeName, object[] parameters)
    {
        Type type = AppDomain.CurrentDomain.GetAssemblies().
                 SelectMany(assembly => assembly.GetTypes()).FirstOrDefault(t => t.Name == typeName);
        return type.GetConstructors()[0].Invoke(parameters);
    } 
```

# windows-server-2008 - 使用命令在服务器之间传输文件

> ID：708961
> 
> 赞同：1
> 
> 时间：2009-04-02T09:23:23.123
> 
> 标签：windows-server-2008

在我的工作场所，我在不同的 Windows 服务器上实例化了各种 Sql Server。当我对 Sql Server 数据库实例进行备份时，它位于该 Windows Server 上而不是我的机器上，因此要查看该文件（例如，能够右键单击 > 属性），我需要远程桌面进入该服务器。

但是，可以使用哪些命令将文件复制到我的桌面/机器？我看到人们通过在 Windows 资源管理器中键入 C$ 之类的内容来运行命令，从另一个将文件粘贴到我的桌面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T09:33:41.740

您可以在其中一台机器上运行 FTP 服务器，然后使用[FTP 批处理脚本](http://support.microsoft.com/kb/96269)来复制您需要的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T11:13:19.957

“C$”的东西被称为“管理共享”，出于安全原因，你真的希望禁用它 - 谷歌它。

但假设管理共享已打开，您可以在自己的机器上键入类似以下内容：打开 shell，然后键入“copy \server.domain.com\C$\path\to\backup.dump c:\local\path " ，假设备份在 C: - 对于另一个分区，猜猜你要改变什么？:)。这要求您的本地帐户也与远程服务器上的帐户（具有管理权限）匹配。

更好的做法是在具有备份的服务器上显式共享文件夹，这样您就可以显式控制访问限制。

# security - 如何检查我的 Web 服务器上的 SSL 漏洞？

> ID：708965
> 
> 赞同：7
> 
> 时间：2009-04-02T09:25:31.807
> 
> 标签：security, ssl, pci-dss

是否有简单的方法或在线工具来检查站点的 SSL 漏洞问题？

从[PCI](https://www.pcisecuritystandards.org/)标准中，我看到一个站点必须强制使用 SSLv3 或 TLSv1 协议和高安全性加密算法。我需要检查我的站点是否符合那些 PCI DSS 标准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-03T14:31:52.337

您可以下载免费的[Nessus](http://www.nessus.org/) ，它会扫描许多已知的 SSL 漏洞以查看与 SSL 相关的扫描列表，[转到](http://www.nessus.org/plugins/index.php)左侧的此链接单击搜索，然后在搜索框中输入 SSL，有超过 200 项 SSL 安全检查。（注意：大多数不一定适用于您的情况）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-04-24T20:29:10.747

这三个网站目前（2011 年 4 月）都提供免费扫描...

[https://www.ssllabs.com/ssldb/index.html](https://www.ssllabs.com/ssldb/index.html)

[http://www.serversniff.net/content.php?do=ssl](http://www.serversniff.net/content.php?do=ssl)

[http://www.sslshopper.com/ssl-checker.html](http://www.sslshopper.com/ssl-checker.html)

# sql - 在Sql Server中获取以某个字母开始按字母顺序排列的记录

> ID：708967
> 
> 赞同：4
> 
> 时间：2009-04-02T09:25:35.020
> 
> 标签：sql, sql-server, regex, sql-order-by

在 SQLSERVER/MSSQL 中，问题如下：

```
SELECT * from [Translation Color] order by [Language Code] 
```

我想要以“I”字母开头的字母顺序排列的记录。

结果示例：

'Ioren' 'Iumen' 'Tart' 'Arfen' 'Coldry'

我不想使用联合或更多的 sql 语句.. 只是尝试用特殊子句的顺序来捕获它。

我试过：

```
ORDER BY <field> REGEXP '^I' DESC 
```

但它没有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T09:27:31.320

这应该这样做：

```
ORDER BY CASE WHEN SUBSTRING([Translation Color],1,1) = 'l' 
     THEN 1 ELSE 0 END DESC 
```

编辑：

完全从 i 开始排序，然后循环回到 h 的完整答案是：

```
ORDER BY CASE WHEN ASCII(UPPER(SUBSTRING([Translation Color],1,1))) < 73 
         THEN ASCII(UPPER(SUBSTRING([Translation Color],1,1))) + 26
         ELSE ASCII(UPPER(SUBSTRING([Translation Color],1,1))) END ASC,       
         [Translation Color] ASC 
```

请注意，这将影响大型表的性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T10:01:02.267

或者这有什么好处：

```
select [Translation Color], 
  case when [Translation Color] < 'l' then 1
                     else 0 
                     end as Priority
from t1 
order by Priority, [Translation Color] 
```

这将从'l'开始按字母顺序排列

**编辑** 这个解决方案似乎对我有用：

```
create table t1 ( c1 varchar(20) collate SQL_Latin1_General_Cp437_CI_AS) 
```

然后我填充了一些测试数据然后运行：

```
select c1 
from t1 
order by case when c1 >= 'l' then 0 else 1 end, c1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-02T10:26:38.243

```
SELECT *
FROM [Translation Color]
ORDER BY
    CASE WHEN [Language Code] LIKE '[I-Zi-z]%' THEN 0 ELSE 1 END,
    [Language Code] 
```

# windows - 可执行dll加载（x32，x64）：选择正确的

> ID：708970
> 
> 赞同：1
> 
> 时间：2009-04-02T09:26:39.510
> 
> 标签：windows, dll, 64-bit

我有一个包含多个 3rd 方库的大型项目。我想为 32 和 64 位架构构建一切。几个库创建共享库（dll）。将这些 dll 提供给我项目中已编译的可执行文件的最佳方法是什么？我想我可以将所有这些 dll 放入一个添加到 PATH 变量的目录中。但是大多数从 3rd 方库创建的 dll 在 32 位和 64 位编译下都以相同的方式命名，所以我不能将它们放在一个目录中。我可以创建两个目录，一个用于 32 位 dll，一个用于 64 位 dll，并且可执行文件选择正确的 dll？或者你有更好的主意让我的可执行文件加载正确的 dll 吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-09T12:55:54.903

由于 32 位可执行文件不能选择 64 位 DLL，反之亦然。您只有一个包含所有 32 位（可执行文件 + DLL）的目录和另一个包含所有 64 位的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T09:29:52.857

目标系统是 32 位或 64 位，绝不是两者。您应该根据系统的位数仅安装所需的版本。然后，您只需拥有两组不相交的二进制文件并安装目标系统所需的一组，并且在运行时检测要加载的内容永远不会遇到问题。

# objective-c - 录制时播放短音频？

> ID：708971
> 
> 赞同：0
> 
> 时间：2009-04-02T09:26:52.117
> 
> 标签：objective-c

我需要在录制时播放一段简短的音频。在 Simualtor 上运行非常好，但在设备上录制时无法播放音频。我看到 SpeakHere 示例并将“kAudioSessionCategory_RecordAudio”更改为“kAudioSessionCategory_PlayAndRecord”。

有人帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-07T16:04:00.790

实际上我找到了解决方案..试试这个：

```
UInt32 category = kAudioSessionCategory_PlayAndRecord; 
status |= AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(category), &category);
UInt32 allowMixing = true;
status |= AudioSessionSetProperty (
                                            kAudioSessionProperty_OverrideCategoryMixWithOthers,  // 1
                                            sizeof (allowMixing),                                 // 2
                                            &allowMixing                                          // 3
                                            );
status |= AudioSessionSetProperty (
                                   kAudioSessionProperty_OtherMixableAudioShouldDuck,  // 1
                                   sizeof (allowMixing),                                 // 2
                                   &allowMixing                                          // 3
                                   ); 
```

最后两个`AudioSessionSetProperty`调用是 3.0 操作系统中的新调用。

# asp.net - 恢复sql不触发

> ID：708973
> 
> 赞同：1
> 
> 时间：2009-04-02T09:27:04.470
> 
> 标签：asp.net, sql, sql-server, asp-classic, database-restore

我正在尝试使用应用程序代码从备份中动态恢复数据库

用于恢复的简单 sql 命令

```
con.execute("RESTORE FILELISTONLY FROM DISK='c:\old.bak' " & vbcrlf &_
        "RESTORE DATABASE newdb " & vbcrlf &_
        "FROM DISK='c:\old.bak' " & vbcrlf &_
        "WITH MOVE 'newdb' TO 'c:\newdb.mdf', " & vbcrlf &_
        "MOVE 'newdb_log' TO 'c:\newdb_log.ldf'") 
```

但它不会触发，我的意思是没有任何错误尝试使用 sql profiler 检查并正确查看

```
RESTORE FILELISTONLY FROM DISK='c:\old.bak' 
RESTORE DATABASE newdb 
FROM DISK='c:\old.bak' 
WITH MOVE 'newdb' TO 'c:\newdb.mdf', 
MOVE 'newdb_log' TO 'c:\newdb_log.ldf' 
```

如果我从 sql profiler 运行 sql 它的工作原理

你怎么解释这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T10:54:45.853

我猜你使用的连接是数据库的锁，所以它无法恢复。当你直接运行它时，你没有。

那这个呢？

```
con.execute("USE master" & vbcrlf &_
        "RESTORE FILELISTONLY FROM DISK='c:\old.bak' " & vbcrlf &_
        "RESTORE DATABASE newdb " & vbcrlf &_
        "FROM DISK='c:\old.bak' " & vbcrlf &_
        "WITH MOVE 'newdb' TO 'c:\newdb.mdf', " & vbcrlf &_
        "MOVE 'newdb_log' TO 'c:\newdb_log.ldf'") 
```

或者更改连接字符串中的数据库？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T09:29:56.617

如果数据库正在与其他会话一起使用，则要执行还原，您将被阻止。确保等待整整 60 秒，然后查看是否有任何超时错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T12:14:07.173

在运行还原之前尝试杀死要还原到的数据库中的所有用户，如果有任何活动连接到数据库，还原将失败。有如何从头到尾执行此操作的示例代码[。](http://www.google.com/search?q=kill+all+users+database+sql+server)

还要确保从应用程序调用还原时使用的连接字符串不会连接到还原到的数据库，而是连接到 master 或 msdb 之类的东西。

# c# - Visual Studio 类图不显示关系

> ID：708977
> 
> 赞同：84
> 
> 时间：2009-04-02T09:28:56.400
> 
> 标签：c#, .net, visual-studio

当我定义我的类属性而不使用字段（使用 C# 3.0 启用）时，类图没有显示我的一对一/多关系。虽然继承在图中可见..

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2009-04-02T09:32:02.587

当您右键单击字段或属性时，您可以选择显示为关联或显示为集合关联。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2013-01-06T03:20:29.483

它适用于像我这样在 1 分钟内找不到菜单项的人。![在此处输入图像描述](https://i.stack.imgur.com/tbcCd.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-18T23:03:37.973

在 Visual Studio 2013 中：右键单击类，单击**Add**，然后选择所需的关系。

![在此处输入图像描述](https://i.stack.imgur.com/moeiq.png)

更多信息：http: [//msdn.microsoft.com/en-us/library/ff657806.aspx](http://msdn.microsoft.com/en-us/library/ff657806.aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-05-25T23:18:50.880

这与 Visual Studio 相结合，可以完成您想要对类图执行的所有操作。 [http://modeling.codeplex.com/](http://modeling.codeplex.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-10T18:40:47.330

由于有人问如何从旧的 codeplex.com 下载文件，我将简要解释以下步骤。

1.  访问链接。在这种情况下，它是[http://modeling.codeplex.com/](http://modeling.codeplex.com/)。
2.  单击“下载存档”按钮下载存档。
3.  打开下载的 zip 文件。ex)modeling.zip[归档文件中的文件结构](https://i.stack.imgur.com/1SIWG.png)
4.  如果您在二进制而不是源之后导航到“发布”文件夹。
5.  打开 releaseList.json 文件以查看每个文件的描述和实际名称。[每个文件的详细信息](https://i.stack.imgur.com/LMYDH.png)
6.  找到您想要的并从 releaseList.json 中获取文件夹 Id、文件 Id 和 FileName。
7.  导航到与文件夹 ID 匹配的文件夹。例如）2
8.  选择与文件 ID 匹配的文件并复制到其他位置。使用 releaseList.json 中的 FileName 重命名文件。
9.  你可以从那里去。

# c++ - readv()、writev()、WSARecv()、WSASend()

> ID：708990
> 
> 赞同：0
> 
> 时间：2009-04-02T09:31:51.637
> 
> 标签：c++, c, windows, sockets, network-programming

我希望你能帮助我。

我正在尝试通过 TCP/IP 通过网络发送 1000 位的数据包，我希望能够在 Cygwin 和 Windows 中使用 Overlapped I/O 技术。

在 Cygwin 中，我试图使用“readv() 和 writev()”函数调用来发送 1000 位，而在 Windows 中，我试图在 winsock2.h 头文件中使用 WSASend() 和 WSARecv() API .

看来我只能将 1000 位从 Cygwin（client.cpp）发送到 Windows（server.cpp）。超过 1000 位，我遇到了意想不到的结果。似乎这些位被缠绕或覆盖。

我已经在互联网上进行了搜索，但似乎没有人像我一样尝试过使用这种方法来处理事情，因此我正在寻求你的帮助，拜托。

谢谢你和最好的问候，科尼利厄斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T12:11:39.457

如果你想在 Windows 上使用重叠 I/O，那么你可能想看看我在 The Code Project 上写的一些文章，这可能会为你提供一个起点。它们使用 IO 完成端口，这是在 Windows 上进行重叠 I/O 的最有效方式，并附带完整的源代码。[此处](http://www.serverframework.com/products---the-free-framework.html)有文章链接和最新来源。

从您简短的问题描述中，很难准确判断可能出了什么问题。您很可能假设您的读取将读取您正在写入的相同数量的数据，而 TCP 并非如此。TCP 是一个字节流，您的读取需要考虑到这一点并相应地循环，直到您重新组装了一个完整的“消息”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T09:36:24.590

你的问题很不清楚，你需要澄清一下。这里有一些想法，仍然：

*   使用 TCP 发送“数据包”不是一个好主意。TCP 的数据模型是字节流。
*   你确定你的意思是 1000 位，而不是 1000 字节？
*   您需要澄清“意外结果”的含义，它非常模糊。
*   [重叠 I/O](http://en.wikipedia.org/wiki/Overlapped_I/O)似乎是一种特定于 Windows 的异步 I/O 技术，我不希望它在 Cygwin 中工作。

# reference - 微软多点sdk开发有什么好的资源吗？

> ID：708992
> 
> 赞同：0
> 
> 时间：2009-04-02T09:32:24.240
> 
> 标签：reference, sdk, multipoint

我只是设法让自己陷入困境，似乎我们公司正在考虑开发微软多点应用程序的想法，有趣的是我们并不是真正的 .net 开发人员，因为我们大多是只是使用 Perl 的 LAMP 家伙。

最重要的是，我需要向我的老板提供一些估计，这些应用程序的开发将在明天中午之前花费多长时间。因此这些功能可能类似于 powerpoint 宏，它允许您为测验创建问题，这将允许多个用户与多个鼠标进行交互。

有这么多未知数，时间线很少，最糟糕的是，即使我向强大的谷歌祈祷，也没有太多有用的链接，我就像干杯一样好:(

有人知道任何可能有用的好的参考资料吗？谢谢~死人走路

更新：到目前为止[，微软的好人在线提供了一些视频和文档。](http://www.microsoft.com/downloads/details.aspx?FamilyID=f851122a-4925-4788-bc39-409644ce0f9b&displayLang=en#filelist)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T10:04:29.687

您链接到的 SDK 用于 WPF。您可以尝试在 WPF 中嵌入 powerpoint，但我不想自己这样做！

[PowerPoint 和 WPF](https://stackoverflow.com/questions/594052/powerpoint-and-wpf)

或者，您可以在 WPF 中编写自己的 PowerPoint 编辑器，然后将其导出为 XML（Powerpoint 2007 是 XML 格式）。

# java - 如何将文件拖放到 JTable 中？

> ID：708994
> 
> 赞同：7
> 
> 时间：2009-04-02T09:32:59.433
> 
> 标签：java

我想将外部文件（例如从 Windows 资源管理器）拖放到 JTable 中。有人有一些示例代码来说明这是如何完成的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-07T06:57:56.653

只需使用 DropTarget 类来接收放置事件。您可以区分拖放到当前表（可用列/行）和滚动窗格（例如添加新行）

```
import java.awt.BorderLayout;
import java.awt.Point;
import java.awt.dnd.DropTarget;
import java.awt.dnd.DropTargetDropEvent;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;

public class SwingTest extends JFrame{
    private JTable table = new JTable();
    private JScrollPane scroll = new JScrollPane(table);
    private DefaultTableModel tm = new DefaultTableModel(new String[]{"a","b","c"},2);

    public SwingTest() {
        table.setModel(tm);
        table.setDropTarget(new DropTarget(){
            @Override
            public synchronized void drop(DropTargetDropEvent dtde) {
                Point point = dtde.getLocation();
                int column = table.columnAtPoint(point);
                int row = table.rowAtPoint(point);
                // handle drop inside current table
                super.drop(dtde);
            }
        });
        scroll.setDropTarget(new DropTarget(){
            @Override
            public synchronized void drop(DropTargetDropEvent dtde) {
                // handle drop outside current table (e.g. add row)
                super.drop(dtde);
            }
        });
        this.getContentPane().setLayout(new BorderLayout());
        this.getContentPane().add(scroll);
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
        this.setSize(800,600);
        this.setVisible(true);
    }

    public static void main(String[] args) {
        new SwingTest();
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2011-04-23T23:14:29.290

@yossale 您需要将以下代码添加到方法中：

```
public synchronized void drop(DropTargetDropEvent dtde)      
{
                dtde.acceptDrop(DnDConstants.ACTION_COPY_OR_MOVE);
                Transferable t = dtde.getTransferable();
                List fileList = (List)t.getTransferData(DataFlavor.javaFileListFlavor);
                File f = (File)fileList.get(0);
                table.setValueAt(f.getAbsolutePath(), row, column);
                table.setValueAt(f.length(), row, column+1);
  } 
```

您可以在验证数据不重复并将文件信息作为新行添加到表时将行附加到表中，而不是设置。

# performance - 您如何在全球多个地点测试您的网站的性能？

> ID：708995
> 
> 赞同：3
> 
> 时间：2009-04-02T09:33:08.310
> 
> 标签：performance, testing, location

继[如何测试网站的性能？](https://stackoverflow.com/questions/53738/how-do-you-test-the-performance-of-a-website)：

您使用哪些工具/网站/服务从世界各地的多个位置了解您的网站的性能？

总是有人抱怨网站在某些情况下速度很慢（尤其是从物理上遥远的地方），如果能够分辨出它在哪里特别慢，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-29T06:36:08.140

你可以试试[Atatus](https://www.atatus.com)：

[https://www.atatus.com/browser-real-user-monitoring](https://www.atatus.com/browser-real-user-monitoring)

Atatus 的性能监控服务会根据真实的用户数据告诉您网站的实际运行情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-05T13:48:57.070

[Pingdom](http://www.pingdom.com "王国") 很好，而且很便宜。他们会告诉您您的网站是否突然从世界某个地方开始变得更糟。

[Gomez](http://www.gomez.com)非常出色（他们可以测试所有图像/css/js 等以及 HTML 本身的加载，使用与浏览器相同的管道规则），他们不仅可以从数据中心位置进行测试，还可以从最终用户宽带连接进行测试 -但它们非常昂贵。

还值得使用[YSlow](http://developer.yahoo.com/yslow/)之类的工具对您的应用程序进行基本分析，并指出可能导致网络连接缓慢的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-08T05:54:59.257

我用这个网站查了一下[http://www.check-info.com](http://www.check-info.com)，有很多站长工具

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T09:37:05.617

你可以试试这个：

[http://www.dotcom-monitor.com/task_instant_test.aspx](http://www.dotcom-monitor.com/task_instant_test.aspx)

这是一项免费服务，可从全球有限的地点列表中进行测试，但至少是一个起点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-29T00:33:46.930

当您谈论测试站点时，我想知道该站点是实时的还是在您的测试环境中？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-10-12T20:22:32.273

[您可以通过在 Amazon 的Mechanical Turk](http://aws.amazon.com/mturk/)上提供任务，让用户以非常便宜的价格测试您的网站。

# c# - 从另一个线程关闭 main

> ID：708996
> 
> 赞同：0
> 
> 时间：2009-04-02T09:33:16.920
> 
> 标签：c#, multithreading

我正在尝试在另一个线程完成时以某种方式关闭应用程序。我正在使用 c#。下面的代码只是一个例子

```
class main
{
  constuctor
  {
    thread t = new thread(open loading screen);

  }

  public void open loading screen()
  {
    if (error) 
     exit program
      application.exit(); // doesn't work
     this.Close; // doesn't work
    thread.abort or mainform.abort doesnt work.
  }
} 
```

如果我用 application.exit 在 main 上调用一个函数，这不起作用，因为调用是从另一个线程进行的。

那我怎么退出程序？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T09:37:29.627

工作线程应该设置一个变量或发出某种事件的信号，主线程应该定期检查它——它可以在可以时以正常方式关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T09:38:13.197

在主线程中使用 IsAlive 检查其他线程是否已结束，如果已结束则退出。

[http://www.java2s.com/Code/CSharp/Thread/UseIsAlivetowaitforthreadstoend.htm](http://www.java2s.com/Code/CSharp/Thread/UseIsAlivetowaitforthreadstoend.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T12:50:54.823

使用后台工作者类而不是普通线程。backgroundworker 可用于在 UI 线程之外的另一个线程中工作。它还有一些方便的事件，可用于将进度更新发送回“拥有”线程。看一眼：

[ProgressChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)和[RunWorkerCompleted](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-07T15:54:25.677

经过一番严厉的批评后，我想我已经取得了一些进展。我不是 100% 确定，但你能在构造函数完成并加载主窗体之前退出应用程序吗？

```
constuctor  {    thread t = new thread(open loading screen);  } 
```

我使用主 for 和另一个之间的变量对退出屏幕执行完全相同的操作。如果它返回true，我在main中有一个应用程序退出。

一开始我有一个加载屏幕，但尚未加载主窗体，并且已从构造函数进行调用，而构造函数尚未完成。

还有一件事应该在主构造函数中完成所有线程/类/加载//程序设置，或者如果是这样，请告知其他方式。

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-02T12:03:50.917

这是一行代码中的解决方案

```
mainForm.Invoke((MethodInvoker)(() => mainForm.Close())); 
```

在 mainform 中有一个 Closing 事件，如果在此之后它没有自行关闭，则关闭线程

# java - Java 应用程序访问 Windows 进程和发送命令的最佳方法

> ID：708998
> 
> 赞同：1
> 
> 时间：2009-04-02T09:34:01.320
> 
> 标签：java, winapi

基本上我试图从一个java应用程序控制一个win32应用程序（按下一个按钮，将东西添加到一个文本字段）等。

尝试这个的最佳方法是什么（即是否有任何工具包，DDE？）或者我是否必须尝试执行某种 FindWindowEx，然后发送 WM_LBUTTONDOWN 或其他什么？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T09:42:37.197

似乎这被封装在 java.net 项目的 jna 项目中：

[https://github.com/twall/jna](https://github.com/twall/jna)

好吧，无论如何这是一种可能性。

在一个示例中，它显示了一些看起来可能对您有用的导入：

```
import com.sun.jna.examples.win32.GDI32;
import com.sun.jna.examples.win32.User32;
import com.sun.jna.examples.win32.GDI32.BITMAPINFO;
import com.sun.jna.examples.win32.User32.BLENDFUNCTION;
import com.sun.jna.examples.win32.User32.POINT;
import com.sun.jna.examples.win32.User32.SIZE;
import com.sun.jna.examples.win32.W32API.HANDLE;
import com.sun.jna.examples.win32.W32API.HBITMAP;
import com.sun.jna.examples.win32.W32API.HDC;
import com.sun.jna.examples.win32.W32API.HRGN;
import com.sun.jna.examples.win32.W32API.HWND; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T16:12:47.720

使用 Java 机器人。类是 java.awt.robot。它非常适合控制其他应用程序。看这里：

[http://java.sun.com/javase/6/docs/api/java/awt/Robot.html](http://java.sun.com/javase/6/docs/api/java/awt/Robot.html)

当我玩很多游戏时，我实际上用它来自动登录魔兽世界。我玩的服务器几乎总是有一个登录队列，需要大约 30 分钟才能通过。所以我让 Windows 调度程序在下午 4 点 45 分左右启动了我的机器人程序。它将向 Windows 发送快捷方式组合以启动 WoW。然后它会暂停一段时间，然后发送击键以输入我的密码并让我登录。当我下班回家时，我已经准备好玩了，而不必在队列中等待。******************``***~~~~*`