# StackOverflow 问答 10864000-10864999

# c# - c# flowlayourpanel 滚动宽度

> ID：10864001
> 
> 赞同：1
> 
> 时间：2012-06-02T16:24:02.400
> 
> 标签：c#, .net, winforms, scrollbar, flowlayoutpanel

我需要更改 ac# winform 的滚动条宽度，`FlowLayoutPanel`但没有找到方法。

有谁知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:38:31.327

只需将垂直滚动设置为：

```
flowLayoutPanel1.Controls.OfType<VScrollBar>().First().Width = 20; //or any int value as you want 
```

对于水平：

```
flowLayoutPanel1.Controls.OfType<HScrollBar>().First().Height = 15; 
```

但在此代码段之前，您可能需要确保控件上是否显示滚动条..

我之前没有使用flowLayoutpanel..所以我不知道你为什么在winforms中使用这个控件..

但是给你一个逻辑/想法来控制控件上是否显示滚动条..

我将此逻辑与datagridview ..

1-）我，只需计算“显示的总行高”和“总显示的列宽”

2-）如果总行高大于当前datagridview高度，则意味着会有一个滚动条。其他滚动条也一样（列宽大于dgv宽度）

但是，如果您确定控件上显示了滚动条，那么上面的代码行将根据您的需要设置宽度或高度..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T17:00:29.097

**我认为你不能以你想要的方式做到这一点**。也许您可以自己构建，请看[这里](http://www.codeproject.com/KB/miscctrl/customscrollbar.aspx) [http://www.codeproject.com/KB/miscctrl/customscrollbar.aspx](http://www.codeproject.com/KB/miscctrl/customscrollbar.aspx)

[这里](https://stackoverflow.com/questions/4325452/customize-windows-form-scrollbar)已经有一些关于这个问题的 Q/A 。

# c# - IEnumerable 项目消失 - 存在于 DAL 但不存在调用者

> ID：10864002
> 
> 赞同：4
> 
> 时间：2012-06-02T16:24:27.403
> 
> 标签：c#, linq, entity-framework, ienumerable, iqueryable

我有一个检索项目的 DAL 方法。这些项目存在于 DAL 方法中，但不存在于调用代码中。这怎么可能？

**调用代码：**

```
IEnumerable<InstallationSummary> installationSummaryList =
InstallationSummaryLogic.GetByServerAppAndGroup(appServer, appWithValidGroup); 
```

**显示项目确实存在的 DAL 方法：**

![在此处输入图像描述](../Images/b6417a8b11ed57db6c033a2f258be5b9.png)

**调用代码，没有显示任何项目。他们去哪儿了？**
（这是本问题顶部显示的同一行。）

![在此处输入图像描述](../Images/49a0e9bd8718ad9b8cbc768858dfbba8.png)

**DAL 方法和调用代码之间唯一的东西是一个逻辑类，它只是一个传递。为了完整起见，我将其包含在此处：**

```
 public static IEnumerable<InstallationSummary> GetByServerAppAndGroup(ApplicationServer appServer, ApplicationWithOverrideVariableGroup appWithGroup)
    {
        return DataAccessFactory.GetDataInterface<IInstallationSummaryData>().GetByServerAppAndGroup(appServer, appWithGroup);
    } 
```

**编辑 - 显示整个 DAL 方法**

```
public IEnumerable<InstallationSummary> GetByServerAppAndGroup(ApplicationServer appServer, ApplicationWithOverrideVariableGroup appWithGroup)
{
    IQueryable<InstallationSummary> summaries = this.Database.InstallationSummaries
        .Include(x => x.ApplicationServer)
        .Include(x => x.ApplicationWithOverrideVariableGroup.Application)
        .Include(x => x.ApplicationWithOverrideVariableGroup.CustomVariableGroup)
        .Where(x => x.ApplicationServer.IdForEf == appServer.IdForEf)
        .Where(x => x.ApplicationWithOverrideVariableGroup.Application.IdForEf == appWithGroup.Application.IdForEf);

    if (appWithGroup.CustomVariableGroup == null)
    {
        return summaries.Where(x => x.ApplicationWithOverrideVariableGroup.CustomVariableGroup == null);
    }

    return summaries
        .Where(x =>
        x.ApplicationWithOverrideVariableGroup != null &&
        x.ApplicationWithOverrideVariableGroup.CustomVariableGroup != null &&
        x.ApplicationWithOverrideVariableGroup.CustomVariableGroup.IdForEf == appWithGroup.CustomVariableGroup.IdForEf);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T16:28:08.270

您的方法使用调用`GetByServerAppAndGroup`过滤（我们看不到它的真正含义 - 如果您剪切并粘贴方法本身会很有帮助）。我的猜测是，其中没有一个结果通过调用中的过滤器。`summaries``Where``summaries``Where`

# c# - 可以检查核心 C# 功能的内部结构

> ID：10864004
> 
> 赞同：2
> 
> 时间：2012-06-02T16:24:35.103
> 
> 标签：c#, implementation, il, mscorlib

我今天被打动了，有比较内脏的倾向，`Buffer.BlockCopy`我`Array.CopyTo.` 很好奇是否`Array.CopyTo`被称为`Buffer.BlockCopy`幕后。这背后没有任何实际目的，我只是想进一步了解C#语言以及它是如何实现的。不要过分指责我微优化，但你可以指责我好奇！

当我在 mscorlib.dll 上运行 ILdasm 时，我收到了这个`Array.CopyTo`

```
.method public hidebysig newslot virtual final 
    instance void  CopyTo(class System.Array 'array',
                          int32 index) cil managed
{
  // Code size       0 (0x0)
} // end of method Array::CopyTo 
```

这对于`Buffer.BlockCopy`

```
.method public hidebysig static void  BlockCopy(class System.Array src,
                                            int32 srcOffset,
                                            class System.Array dst,
                                            int32 dstOffset,
                                            int32 count) cil managed internalcall
{
  .custom instance void System.Security.SecuritySafeCriticalAttribute::.ctor() = ( 01 00 00 00 ) 
} // end of method Buffer::BlockCopy 
```

坦率地说，这让我感到困惑。我从来没有在我没有创建的 dll/exe 上运行 ILdasm。这是否意味着我将无法看到这些功能是如何实现的？四处搜索只发现[了一个 stackoverflow 问题](https://stackoverflow.com/questions/2353947/buffer-blockcopy-vs-unsafe-byte-pointer-copy)，Marc Gravell 说

> [ `Buffer.BlockCopy`] 基本上是原始内存副本的包装器

虽然很有见地，但它并不能回答我的问题 if `Array.CopyTo`calls `Buffer.BlockCopy`。我特别感兴趣的是我是否能够看到这两个函数是如何实现的，如果我以后对 C# 的内部有疑问，我是否有可能对其进行调查。还是我运气不好？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T16:50:27.803

从您发布的内容来看，这里最大的问题是您正在查看*参考程序集，特别是对于 .NET 4 的参考程序集。*它们是特殊的程序集，它们的所有 IL 都被剥离了，只包含元数据。这是 .NET 4 中的新功能，它解决了 .NET 早期版本中的一个老问题。参考程序集只是安装在 GAC 中的实际程序集的副本。

这引起了麻烦，在后来的版本和服务包中进行了破坏程序的更改。尤其是 WaitHandle.WaitOne(int) 重载是臭名昭著的，它是在 .NET 3.0（又名 .NET 2.0 SP1）中添加的。并且无意中被程序员使用，他们发现重载 heckofalot 比神秘的 WaitOne(int, bool) 重载更容易使用。但问题是他们的程序将不再在原始 .NET 2.0 发行版上运行，从而产生 MissingMethodException。

添加这个重载通常是一件非常顽皮的事情，他们修改了 mscorlib.dll，但没有*改变*它的 [AssemblyVersion]。通过在 .NET 4 中提供单独的参考程序集，此问题不再发生。Microsoft 现在可以修改 .NET 类型的公共接口而不会破坏任何内容。并且热情地这样做了，几个 .NET 4 中间版本已经在没有任何人注意到的情况下顺利发布。

所以一定要反汇编*真正*版本的 mscorlib.dll，即 GAC 中的那个。对于 .NET 4，它存储在不同的目录中，c:\windows\microsoft.net\assembly，而不是 c:\windows\assembly。它不再受资源管理器外壳命名空间扩展保护，您可以简单地使用 File + Open 浏览 GAC 目录。您将在 C:\Windows\Microsoft.NET\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089 目录中找到 32 位版本。

故事还没有结束，当您深入研究时，您会发现 Array.CopyTo() 调用了一个名为 Array.Copy() 的内部辅助方法，该方法具有 [MethodImpl(MethodImplOptions.InternalCall)] 属性。同样，没有方法体。该属性告诉即时编译器该方法实际上是在 CLR 内部的 C++ 中实现的。请参阅[此答案](https://stackoverflow.com/questions/8870442/how-is-math-pow-implemented-in-net-framework/8870593#8870593)以了解如何查看此类方法的源代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T16:27:36.443

[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)是一个免费的 .NET 反编译器。您可以使用它来检查任何 .NET DLL，包括 mscorlib。

`Array.CopyTo`来电`Array.Copy`。`Array.Copy`和都是方法，这意味着它们是在本机代码`Buffer.BlockCopy`中`extern`定义的，而不是在托管的 .NET 代码中定义的，所以我无法再告诉您它们是如何工作的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T01:10:34.613

我要回答我自己的问题。我意识到这是一种糟糕的风格，但如果不是以前的答案为我提供的精彩资源，我无法制定答案。谢谢你。

首先，那些来到这里想知道一般情况下如何检查 C# 函数内部的人，Tim 发布了一个很棒的资源[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)。这适用于未在外部定义方法的情况。当它们在外部定义时，获得答案的唯一希望似乎是下载[SSCLI 2.0](http://www.microsoft.com/en-us/download/details.aspx?id=4917)。由于这是针对 .Net 2.0 而不是 4.0，因此我提供的信息可能已过时。但是，我将继续假设所讨论的方法没有太大变化。看完源文件，相信可以回答“Array.CopyTo在后台调用Buffer.BlockCopy吗？”的问题</p>

在我进入问题的核心之前，其他人已经指出 CopyTo 调用 Array.Copy。Array.Copy 是在外部定义的，所以我将查询更改为“Array.Copy 是否在后台调用 Buffer.BlockCopy？” 我发现有趣的一个小[花絮来自 MSDN 上 Array.CopyTo 的文档](http://msdn.microsoft.com/en-us/library/06x742cw.aspx)

> 如果没有明确要求实现 System.Collections.ICollection，请使用 [Array.]Copy 以避免额外的间接寻址。

让我区分每个要执行的功能必须为真的检查类型：

块复制：

1.  目的地和来源不能为空
2.  Destination 和 Source 数组由原语或字符串组成，但没有对象。
3.  长度和偏移量必须有效

数组.复制：

1.  目的地和来源不能为空
2.  Destination 和 Source 必须是一个数组
3.  对方法表和等级进行多项检查
4.  更深入的长度和偏移检查
5.  类型必须以某种方式匹配（通过取消/装箱、强制转换或扩大）

在这些检查之后，BlockCopy 调用 m_memmove，这是不言自明的，但非常有趣。m_memmove 依赖于架构；在 32 位机器上放弃传统的 memmove，转而支持一次手动滚动 16 个字节的副本。

可以想象，数组不仅仅包含基元。

*   如果源和目标数组的类型相同，Copy 调用 m_memmove。然后，如果基础类型不是原始类型，则执行垃圾收集操作。
*   否则，根据传入的元素类型，Copy 将在传输每个元素时对其进行拆箱、装箱、投射或加宽。据我所知，这些函数不调用 m_memmove，而是一次转换每个元素。

因此，要回答我最初的问题，“Array.Copy 会在幕后调用 Buffer.BlockCopy 吗？” 有点，如果我们考虑到这两种方法在处理 m_memmove 方面的相似之处。BlockCopy 将始终调用 m_memmove，而 Copy 只有在处理完全相同类型的数组时才会调用它。然后我的建议是，如果想将字节数组复制到整数，或者他们只关心原始数据的类似内容，请使用 BlockCopy，因为它将能够利用 m_memmove。

供参考：.Net 定义的原语（取自 cortypeinfo.h）

1.  空白
2.  布尔
3.  字符
4.  有符号和无符号字节
5.  有符号和无符号短
6.  有符号和无符号整数
7.  有符号和无符号长
8.  浮动和双重
9.  有符号和无符号 IntPtr
10.  ELEMENT_TYPE_R（不确定这是什么）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T17:08:58.047

Both `Array.CopyTo` and `Buffer.BlockCopy` are (ultimately) implemented with the pseudo-attribute:

```
[MethodImpl(MethodImplOptions.InternalCall)] 
```

If you take a look at the second question on [this page](http://msdn.microsoft.com/en-us/magazine/cc163896.aspx) from general clever-man, Steven Toub, there's and excellent explanation of what this means.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T16:35:07.763

当我在 Buffer.BlockCopy 上使用 Telerik JustDecompile 时，我发现：

```
[SecuritySafeCritical]
public static extern void BlockCopy(Array src, int srcOffset, Array dst, int dstOffset, int count); 
```

这意味着它不是使用产生 IL 代码的东西来实现的。

和 Array.CopyTo：

```
public void CopyTo(Array array, int index) {
  if (array != null && array.Rank != 1) {
    throw new ArgumentException(Environment.GetResourceString("Arg_RankMultiDimNotSupported"));
  }
  Array.Copy(this, this.GetLowerBound(0), array, index, this.Length);
} 
```

Array.Copy 显示：

```
[SecuritySafeCritical]
[ReliabilityContract(Consistency.MayCorruptInstance, Cer.MayFail)]
public static void Copy(Array sourceArray, int sourceIndex, Array destinationArray, int destinationIndex, int length) {
  Array.Copy(sourceArray, sourceIndex, destinationArray, destinationIndex, length, false);
} 
```

那个超载：

```
[SecurityCritical]
[ReliabilityContract(Consistency.MayCorruptInstance, Cer.MayFail)]
internal static extern void Copy(Array sourceArray, int sourceIndex, Array destinationArray, int destinationIndex, int length, bool reliable); 
```

所以这也不是 IL 代码。

如果你想检查方法，你必须拿出反汇编程序。

# variables - 使用 awk 将字符串替换为随机数

> ID：10864011
> 
> 赞同：1
> 
> 时间：2012-06-02T16:25:19.817
> 
> 标签：variables, random, awk, gsub

我目前正在尝试创建一个脚本，该脚本将在一个新的 IP 范围内启动一个 vpn 服务器。我有多个服务器，因此如果 2 个服务器使用相同的范围，则可能会发生冲突。

因此，我想随机化服务器启动的 IP 范围。理想情况下，我希望在生成的配置文件中以下列方式随机化 IP；

```
 ifconfig 10.xxx.yyy.1 255.255.255.248
    server 10.xxx.yyy.0 255.255.255.248 
```

我使用的 shell 非常受限制，因此无法使用 od 等许多实用程序来创建随机数。但是 awk 是可用的，所以我认为这将是合适的。我尝试创建一个命令，该命令将用 0 到 255 之间的随机数替换 xxx 和 yyy，但我没有成功。谁能帮我这个？

```
 awk '{var = int(rand() * 256); var2 = int(rand() * 256);  gsub(/xxx/, var ); gsub(/yyy/, var2 ) ; print}' /tmp/vpn.conf 
```

此命令将值更改为

```
 ifconfig 10.125.248.1 255.255.255.248
    server 10.74.196.0 255.255.255.248 
```

这显然是不可取的，因为 xxx 和 yyy 应该是相同的，例如

```
 ifconfig 10.25.64.1 255.255.255.248
    server 10.25.64.0 255.255.255.248 
```

任何人都可以协助让 awk 执行预期的功能吗？或者，任何简化的随机数脚本也足够了，但是由于缺乏可用的 shell 实用程序，我不希望这种工作。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T16:40:10.100

`BEGIN`在块中生成随机数。

```
awk 'BEGIN{var = int(rand() * 256); var2 = int(rand() * 256)}  {sub(/xxx/, var ); sub(/yyy/, var2 ) ; print}' /tmp/vpn.conf 
```

此外，没有理由使用`gsub`，只需使用，`sub`因为特定模式的每一行只有一个替换。

# installation - 安装卡布奇诺（目标 J）

> ID：10864012
> 
> 赞同：0
> 
> 时间：2012-06-02T16:25:22.670
> 
> 标签：installation, cappuccino

我必须承认我不是 Mac OS 专家，但我正在尝试安装 Cappuccino。我运行了脚本，以下文件现在位于“narwhal”子目录中。麻烦的是，我不知道下一步该做什么。似乎没有安装可执行文件，也没有出现调用开发环境的图标。任何帮助表示赞赏。

这些是下载的文件：

![在此处输入图像描述](../Images/9c941c4c1095ef9fc556e75be31c33f2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:48:34.217

我假设你已经在网站上下载了这个包，有一个 shell 脚本。在终端中运行 bootstrap.sh 文件：

```
./bootstrap.sh 
```

然后，您将安装 Cappuccino。在 Cappuccino 目录中输入：

```
jake install 
```

或者有时

```
jake sudo-install 
```

是必须的。（如果您需要使用 sudo-install，它会抱怨权限）

这将安装卡布奇诺本身。

要创建一个新的卡布奇诺项目，您需要使用“capp”工具

```
capp gen MyNewProjectName 
```

或者`capp --help`

将告诉您如何使用 capp 工具的一些更高级的功能。这将为您提供一个空白项目，您可以在其中开始工作。当您准备好部署时，您可以（并且会想要）使用其他工具，但我们可以在时机成熟时使用这些工具。

此外，当涉及到这类问题时，邮件列表非常有帮助，而且它的监控比 SO 更密切。:)

# iphone - iPhone iOS 如何为 iPhone 游戏演示创建房间？

> ID：10864013
> 
> 赞同：1
> 
> 时间：2012-06-02T16:25:23.160
> 
> 标签：iphone, ios5, opengl-es, uikit, core-motion

我正在构建一个 iPhone 核心动作游戏演示，并希望在用户周围有一个虚拟“房间”。用户将使用具有核心动作的电话通过电话“环顾”房间。附上一个例子。

我不是在寻找任何花哨的东西。墙壁用 4 个纯色面板，地板和天花板用 2 个面板就可以了。几乎是一个大立方体，中间在用户的位置

**对我来说，创建一个带有盒子几何形状的房间并将用户放在中间的最快方法是什么？这可以用 UIKit 对象来完成，还是我需要使用 openGL 来渲染面板？**也许有某种游戏引擎可以用于这些目的？

我想在未来旋转房间。

谢谢您的意见！

![沃尔夫斯坦斯坦](../Images/98123e5e29b863f1488ff68c4fa05d00.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:30:58.173

如果不以某种形式使用 OpenGL，您将无法创建 3 维环境。最好的入门方法是遵循一个很好的 OpenGL 教程，例如[这个](http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial)。您甚至可以学习本教程并将相机放在立方体内，瞧，即时房间。你只需要从核心运动中添加视图旋转逻辑，你就可以设置好了。

# c++ - 将 Microsoft COM IDL 编译/翻译为惯用 C++？

> ID：10864020
> 
> 赞同：1
> 
> 时间：2012-06-02T16:25:55.180
> 
> 标签：c++, qt, com, mfc, idl

我正在做一个相当大的项目，主要是使用 MFC 用 C++ 编写的。我们的任务是逐步移植这个应用程序以使用 Qt。多年前，我们的大部分功能的包装器都是使用 COM 编写的。我觉得使用新 Qt 代码中的 COM 包装器将有助于隔离强制依赖 MFC 的代码。不幸的是，我们还被要求减少对 COM/ActiveX 的使用。因此，在 Qt 中引入我们的 COM 包装器的新消费者并不理想。Visual Studio 有一个类向导，它将基于 TLB 文件中的接口生成 C++ 类，但它依赖于 MFC，并且接口仍然公开 COM（`LPDISPATCH`、、`SAFEARRAY*`等）。

综上所述，有没有人知道一个工具（免费或商业）可以获取 Microsoft IDL 文件并将其转换为 C++，谁的接口不依赖于 MFC 或 COM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:21:25.070

> 并使用由 midl.exe 生成的代码

那是挂机第一。Midl.exe 不*生成*代码，它只生成声明。C++ 中的纯虚拟类，只有*没有*实现的方法声明。到 .h 文件或 .tlb 类型库文件。类型库很方便，因为它很容易被工具读取，它有一个受限的 COM 子集，称为自动化。并由 Windows 上的几乎任何语言运行时实现。

关键是这些只是声明，使用不同模块和/或不同语言或类库编写的代码协同工作的粘合剂。 *在大型项目中非常*重要，接口将各个部分联系在一起。

> 我们的系统架构师了解了我们的方法，并建议我们找到一种方法，不要将这些特定于 COM 的内容添加到我们的新 Qt 项目中。

这是非常无益的建议。“不要那样做”是我的医生告诉我，当我的手臂放在背后很痛时。我可以忍受，我有一个很好的选择，可以转身。在你的情况下，我不得不对建筑师提出*更多*要求。他在弄乱身体部位，他把躯干与腿、头、脚和手分开。大脑彻底脱节。使您现在拥有的不同代码块一起工作的粘合剂。破坏该界面，您将严重破坏您的应用程序，Netscape 风格。

当心宇航员建筑师（另一个 Spolsky 的最爱），他很乐意强迫你去做*他*理解但不必实施的事情。需要一个合理的替代方案，一种*架构*方法，因为破坏接口会对您的应用程序产生深远的架构影响。*当您更改接口时，每个人都从接口实现*的那些 MFC 类几乎是垃圾。将它们全部重写为 Q 类会严重地让你在一段时间内无法工作。并且编写非常无聊的代码。只是为了生产同样的东西，但有更多的错误。你不应该做的事情，第 2 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:57:49.660

如果您能够继续使用 Visual C++，一个解决方案是使用对 COM 的普通编译器支持。

你需要#import你的TLB文件

[http://msdn.microsoft.com/en-us/library/8etzzkb6%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/8etzzkb6%28v=vs.100%29.aspx)

然后您可以利用 COM 编译器支持来处理 COM 对象实例，

[http://msdn.microsoft.com/en-us/library/h31ekh7e.aspx](http://msdn.microsoft.com/en-us/library/h31ekh7e.aspx)

# ruby-on-rails - 从 Rails 中的外部匹配类调用方法

> ID：10864024
> 
> 赞同：0
> 
> 时间：2012-06-02T16:26:14.440
> 
> 标签：ruby-on-rails

我在`/lib/`文件夹下有很多不同的类，有很多动作。

在保存一个对象之前，我需要从一个类中调用一个方法，该类的名称与对象内部的一个属性相匹配，即给定这个

```
User.gateway = "something" 
```

在保存对象之前，我需要`myfunction`从类中调用。`something`

不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:55:24.323

[恒定](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-constantize)化和[分类](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-classify)将为您完成工作。假设你有：

```
class Foo
end 
```

和`"foo"`字符串。你可以做：

```
"foo".classify.constantize.new.myfunction 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:55:47.637

你的问题很模糊，这是你需要的吗？

```
# user.rb
before_save :myfunction

protected

def myfunction
   g = self.gateway
   case g 
   when String | Symbol 
     begin
       g.classify.constantize.myfunction
     rescue NameError
       # if there is no something class
     end
   else
     # no good value
   end
end

    enter code here 
```

# ip - 在线投票的 IP 地址记录

> ID：10864028
> 
> 赞同：0
> 
> 时间：2012-06-02T16:26:40.883
> 
> 标签：ip, voting-system

我即将开始在线投票（我只是在运行网站，没有做任何编码），作为投票过程的一部分，选民需要点击确认电子邮件来登记投票。

记录 IP 地址以阻止多个帐户投票，但我的问题是，将记录哪个 IP，来自投票的计算机的 IP，还是确认投票的计算机的 IP？（当然，如果它们是在不同的计算机上完成的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:04:37.287

You can get both. Record one at vote placement, and another at vote confirmation.

BTW, if you use e-mail account, and suppose that one person = one e-mail, you don't need IP address.

# c# - 如何格式化 WPF 菜单项中的文本？

> ID：10864038
> 
> 赞同：2
> 
> 时间：2012-06-02T16:28:05.327
> 
> 标签：c#, wpf

我有一个这样的菜单项：

```
menu.Items.Insert(0, new MenuItem
{
    Header = String.Format("Foo \"{0}\" bar", "qux")
}); 
```

我的问题是：如何将一些文本格式的东西（如`Foreground`颜色）应用到`{0}`零件上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:52:18.680

您可以使用`TextBlock`具有不同格式`Inline`元素的 a：

```
TextBlock text = new TextBlock();
text.Inlines.AddRange(
    new Inline[]
        {
            new Run("Foo "),
            new Run(string.Format("\"{0}\"", "qux")) {Foreground = Brushes.Red},
            new Run(" bar")
        });

menu.Items.Insert(0, new MenuItem
{
    Header = text
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T16:53:05.353

该`Header`属性是 MenuItem 的内容元素，类型为`object`。

考虑如何使用 Xaml 格式化菜单项，一个示例可能是：

```
<MenuItem>
    <MenuItem.Header>
        <TextBlock>
            <Run Background="Yellow" Foreground="Red" FontWeight="Bold">
                Foo
            </Run>
            ... etc
        </TextBlock>
    </MenuItem.Header>
</MenuItem> 
```

在代码中模拟它。

# java - 使用 JMX 通过 snmp 监控 JVM 指标。

> ID：10864040
> 
> 赞同：0
> 
> 时间：2012-06-02T16:28:10.040
> 
> 标签：java, monitoring, jmx, snmp

我们有多个 Web 逻辑和基于 Tomcat 的应用程序。对于这些具有不同垃圾收集格式的不同 java 应用程序，获得用于监视堆问题、占用线程等的“标准”方法的典型解决方案是什么？

通常我想做的是从这些应用程序中获取最后一个完整的垃圾收集和常规垃圾收集条目，并希望从中获取初始最大值。进行计算，将数据保存到报告中，并在达到阈值时生成警报。

最好的方法是什么？

谢谢博帕利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:55:07.410

当你可以使用一个时，为什么还要写一个？

[http://www.manageengine.com/products/applications_manager/monitor-tomcat.html?gclid=CN_Z68OCsLACFWkCQAodbi17Uw](http://www.manageengine.com/products/applications_manager/monitor-tomcat.html?gclid=CN_Z68OCsLACFWkCQAodbi17Uw)

# python - 如何检查编译vim的python版本？

> ID：10864042
> 
> 赞同：38
> 
> 时间：2012-06-02T16:28:21.387
> 
> 标签：python, vim

在终端中，它可以做

```
python -c "import sys; print(sys.version)" 
```

但做

```
:python -c "import sys; print(sys.version)" 
```

在 vim 中抛出一个 SyntaxError。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-02T16:44:18.383

我刚刚在[这里](https://stackoverflow.com/questions/5872079/compiling-vim-with-specific-version-of-python)发现你也可以这样做

```
:python import sys; print(sys.version) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-02T16:39:35.040

我想你想要这个：

类型：

```
:python << EOF
import sys;
print(sys.version);
EOF 
```

如果 vim 是用 python 编译的，当你输入`:python << EOF`命令行时，命令行会用换行符展开并等待 EOF。在 EOF 之前，键入您的 python 代码，并以 EOF 终止。

**编辑：**正如您已经发现的那样，这`EOF`是不必要的，您可以将脚本放在一行中，不带引号和`-c`. EOF 技巧非常适合在命令行中测试 python/VIM 脚本。

```
:python import sys; print(sys.version); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-09-13T21:48:44.587

[`:ve[rsion]`](http://vimdoc.sourceforge.net/htmldoc/various.html#:version)在[命令行模式下](https://en.wikibooks.org/wiki/Learning_the_vi_Editor/Vim/Modes#command-line)运行或[`vim --version`](https://linux.die.net/man/1/vi)从[Bash](https://en.wikipedia.org/wiki/Bash_(Unix_shell))运行。

1.  如果是**用 Python 3**[`vim`](https://en.wikipedia.org/wiki/Vim_(text_editor))编译的，你会发现和.**`-python``+python3`**
***   如果是**用 Python 2**[`vim`](https://en.wikipedia.org/wiki/Vim_(text_editor))编译的，你会发现和.**`+python``-python3`*****   如果在**没有 Python**[`vim`](https://en.wikipedia.org/wiki/Vim_(text_editor))支持的情况下编译，你会发现¹。**`-python``-python3`******

 ******我不确定是否可以在输出中同时找到`+python`和- 目前**[可能不是](https://vi.stackexchange.com/questions/779/how-do-i-get-vim-to-be-able-to-run-both-python-and-python3-on-a-linux-system-in)**.`+python3`[`:ve`](http://vimdoc.sourceforge.net/htmldoc/various.html#:version)

* * *

¹目前`-python`并且`-python3` [似乎](https://vi.stackexchange.com/questions/10242/vim-8-0-python-support)是[Debian](https://en.wikipedia.org/wiki/Debian) [`vim`软件包](https://packages.debian.org/sid/vim)的默认设置。如果您需要[`vim`](https://en.wikipedia.org/wiki/Vim_(text_editor))对脚本语言的支持，请安装[`vim-nox`](https://packages.debian.org/sid/vim-nox)专用于它们的安装程序，因此（除其他外）已`+python3`启用。还有一个有趣的、经过大量重构的[`vim`](https://en.wikipedia.org/wiki/Vim_(text_editor))fork，称为[`neovim`](https://neovim.io/)（或[`nvim`](https://neovim.io/)简称）。顺便说一句：在[Debian](https://en.wikipedia.org/wiki/Debian)上，您可以通过运行列出所有已安装[`vim`](https://en.wikipedia.org/wiki/Vim_(text_editor))的版本[`update-alternatives --list vim`](https://linux.die.net/man/8/update-alternatives)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-07-25T07:35:53.770

你可以`python --version`直接在 Vim 中运行：

1.  打开vim。
2.  在正常模式（非插入模式）下，键入`:!python --version`.
3.  输入。

显示 python 的版本。******

# java - 是否有允许在集群应用程序中订购事件的 API？

> ID：10864043
> 
> 赞同：0
> 
> 时间：2012-06-02T16:28:23.840
> 
> 标签：java, events

鉴于以下事实，是否存在一个现有的开源 Java API（可能作为某些更大产品的一部分），它实现了一种算法，可以在集群环境中对事件进行可重现的排序：

```
1) There are N sources of events, each with a unique ID.
2) Each event produced has an ID/timestamp, which, together with
   its source ID, makes it uniquely identifiable.
3) The ids can be used to sort the events.
4) There are M application servers receiving those events.
   M is normally 3.
5) The events can arrive at any one or more of the application
   servers, in no specific order.
6) The events are processed in batches.
7) The servers have to agree for each batch on the list of events
   to process.
8) The event each have earliest and latest batch ID in which they
   must be processed.
9) They must not be processed earlier, and are "failed" if they
   cannot be processed before the deadline.
10) The batches are based on the real clock time. For example,
    one batch per second.
11) The events of a batch are processed when 2 of the 3 servers
    agree on the list of events to process for that batch (quorum).
12) The "third" server then has to wait until it possesses all the
    required events before it can process that batch too.
13) Once an event was processed or failed, the source has to be
    informed.
14) [EDIT] Events from one source must be processed (or failed) in
    the order of their ID/timestamp, but there is no causality
    between different sources. 
```

不太正式，我有那些接收事件的服务器。它们从相同的初始状态开始，并且应该通过同意以何种顺序处理哪个事件来保持同步。对我来说幸运的是，这些事件不会尽快处理，而是“稍后”处理，这样我就有时间让服务器在截止日期前达成一致。但我不确定这是否真的会对算法产生任何真正的影响。如果所有服务器都同意所有批次，那么它们将始终保持同步，因此在查询时呈现一致的视图。

虽然我对 Java API 最满意，但如果我可以从 Java 调用它，我会接受其他东西。如果没有开源 API，但有一个清晰的算法，我也会把它作为答案并尝试自己实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-17T13:00:01.573

查看问题和您的后续行动，可能“没有”API 可以满足您的要求。今天你可以看看 Kafka（来自 LinkedIn）

*   [阿帕奇卡夫卡](http://kafka.apache.org/)

还有“日志”实体的一般概念，人们喜欢称之为“大数据”：

*   [日志：每个软件工程师都应该了解实时数据的统一抽象](http://engineering.linkedin.com/distributed-systems/log-what-every-software-engineer-should-know-about-real-time-datas-unifying)

实际上，对于您的问题，我将从有关“日志”的博客开始。在我看来，它的工作方式——而且 Kafka 并不是唯一一个进行日志处理的包——工作方式如下：

*   而不是基于队列的消息传递/发布订阅
*   Kafka 使用消息的“日志”
*   订阅者（或端点）可以使用日志
*   日志保证“有序”；它处理千兆数据，速度很快
    *   仔细检查保证，通常需要权衡可靠性
*   您只是阅读了日志，我认为默认情况下读取是破坏性的。
*   如果有一个订阅者组，每个人都可以在日志条目消失之前“阅读”。

日志的基本处理（计算）过程是 Map-Reduce-Filter 模型，因此您可以非常快速地读取所有内容；只保留你想要的东西；处理它（减少）产生结果。

缺点似乎是你需要集群和其他东西才能让它真正发光。由于提到了不同的服务器或站点，我认为我们仍在进行中。我发现启动并运行 Apache 下载是一件很挑剔的事情，因为它倾向于假设非 Windows 环境（*呵呵*）。

另一个“快速”选项是

*   [阿帕奇阿波罗](http://www.infoq.com/news/2011/12/apollo-benchmarks)

这需要你做连接不同服务器的管道。由于要求包括...

> 接收事件的服务器。它们从相同的初始状态开始，并且应该通过同意以何种顺序处理哪个事件来保持同步。对我来说幸运的是，这些事件不会尽快处理，而是“稍后”处理，这样我就有时间让服务器在截止日期前达成一致

我建议查看[Kafka 的“入门”示例或教程，](https://www.google.com.au/search?num=50&newwindow=1&q=simple%20kafka%20demo&oq=simple%20kafka%20demo)然后查看类似的 ZooKeeper 组织的消息/日志软件。祝你好运，享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T09:56:22.267

到目前为止，我还没有得到明确的答案，但我认为任何有兴趣了解我发现的人都会很有用。

以下是与该主题相关的一些理论讨论：

[用于事件一致排序的动态矢量时钟](http://www.vs.inf.ethz.ch/edu/HS2010/VS/exercises/DVC_Landes.pdf)

[无冲突的复制数据类型](http://hal.inria.fr/docs/00/60/93/99/PDF/RR-7687.pdf)

使多个并发进程相互等待的一种方法是分布式屏障，我可以用它来同步“批次”。一个 Java 实现似乎可以在[Hazelcast 之上](https://github.com/hazelcast/hazelcast/issues/31)使用，另一个使用[ZooKeeper](http://zookeeper.apache.org/doc/r3.1.2/recipes.html#sc_recipes_eventHandles)

我发现的一种更简单的替代方法是使用数据库。每个进程都将它接收到的所有事件插入到数据库中。根据 DB 设计，这可以是完全并发且无锁的，例如在 VoltDB 中。然后每隔一秒，一些“cron 作业”会运行，选择并标记要在下一批中处理的事件。该作业可以在每台服务器上运行。第一个为一批运行作业的人修复了一组事件，以便其他人可以使用第一个定义的列表。像这样，我们保证所有批次在所有服务器上都包含相同的事件集。如果我们可以对整个批次使用完整的顺序，cron 作业可以自行指定，那么服务器的状态将保持同步。

# php - PHP - utf8_decode() 到错误的字符

> ID：10864044
> 
> 赞同：3
> 
> 时间：2012-06-02T16:28:25.957
> 
> 标签：php, utf8-decode

尝试使用 Twitter 搜索 API。当我调用`utf8_decode`重新发布的推文时，我得到语音标记/引号显示为问号......

代码：

```
$output .= '
        <div class="leftcoltweet">
            <div class="timg">
                <a href="' . $account . '" target="_blank"><img src="' . $image .'"></a>
            </div>
            <div class="ttweet">
                ' . utf8_decode($tweet) . '
            </div>
            <div class="clr"></div>
            <div class="ttime">' . $time . '</div>
            <div class="clr"></div>
        </div>
    '; 
```

输出：

```
RT @IVAOAERO: ?@FilipJonckers: We are aware of and working on a fix for the ATIS issue introduced after last nights network upgrade http://t.co/6FODzr0Y? 
```

所有其他符号均正确显示。

我必须设置要使用的语言吗？如果您想知道我所做的原子查询或其他任何事情，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T16:33:12.393

请注意，**仅**`utf8_decode()`适用于 iso-8859-1 (latin) 编码字符串。如果你知道字符串的字符集，你可以调用：

 **```
echo iconv("THE_CHARSET","utf8",$tweet); 
```**

# javascript - 如何在选中数组复选框的情况下获取数组文本框的验证

> ID：10864048
> 
> 赞同：0
> 
> 时间：2012-06-02T16:29:01.767
> 
> 标签：javascript, arrays, validation

我在相应的行中有一组带有指定数组文本框的复选框。如果用户选择了特定的复选框，例如前三个复选框，我想验证相应的文本框（空验证）。我怎样才能做到这一点？我已经尝试过整个数组文本框，它工作正常。但我只想验证已检查的。我提供代码供您参考：

```
dml=document.forms['form1'];
// get the number of elements from the document
len = dml.elements.length;
for( i=0 ; i<len ; i++)
{
    //check the textbox with the elements name
    if (dml.elements[i].id=='noofdays[]')
    {
        // if exists do the validation and set the focus to the textbox
        if (dml.elements[i].value=="")
        {
            alert("Please enter no of Days");
            dml.elements[i].focus();
            return false;     
        }
    }
} 
```

感谢您的快速回复。但在我的过程中。我从我的数据库中获取复选框值作为 id。我已提供我的代码供您参考。

```
<? while(($count<$rpp) && ($i<$tcount))
   {
       mysql_data_seek($res,$i);
       $_SESSION['cardid'][$i]=$row['id'];
       $row = mysql_fetch_array($res);
?>

<tr>
  <td align="center" bgcolor="#e9e9e9" class="running_text"><input name="id[]" type="checkbox" id="id[]" value="<?=$row['jobid']?>" onchange="enableTextField(this)" /></td>
  <td height="28" align="center" bgcolor="#e9e9e9" class="running_text"><?=$row['jobtitle']?></td>
  <td align="center" bgcolor="#e9e9e9" class="running_text"><?=$row['jobcategoryid']?></td>
  <td align="center" bgcolor="#e9e9e9" class="running_text"><?=$row['practicename']?></td>
  <td align="center" bgcolor="#e9e9e9" class="running_text"><?=$row['subscriptiontype']?></td>
  <td width="82" align="center" bgcolor="#e9e9e9" class="running_text"><input type="text" size="1" value="0" name="noofdays[<?php echo $row['jobid']; ?>]" id="noofdays[]">
     < /td>
  <td width="28" align="center" bgcolor="#e9e9e9" class="running_text"><a href="viewjobdetails.php?jobid=<?=$row['jobid']?>&ss=<? echo $_POST['noofdays'][$jobsid];?>"><img src="images/view-detail-icon.png" width="16" height="16" title="View" /></a></td>
  <td width="31" align="center" bgcolor="#e9e9e9" class="running_text"><a onClick="return del(<?=$row['jobid']?>)" class="deleteimage"><img src="images/Delete-icon.png" width="16" height="16" title="Delete" /></a></td>
</tr>

<?     $i++; 
       $count++; 
    } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:38:53.400

为您的复选框提供一个与您的文本输入的类名匹配的值。使用类名对文本输入进行分组。

```
<input type="checkbox" value="lips"/> <--------Grouper

<input type="text" class='lips' />​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ <-Groupeee
<input type="text" class='lips' /> <-Groupeee
<input type="text" class='lips' />​ <-Groupee

<script type="text/javascript">
    var ckBxs = document.querySelectorAll('input[type=checkbox]'),
                    i = ckBxs.length;
    while (i--) {
        ckBxs[i].onchange = checkBoxCheck;
    };
    function checkBoxCheck() {
        var txBxs = document.getElementsByClassName(this.value),
                        i = cxBxs.length;
        while (i--) {

            switch (txBxs[i].class) {

                case 'lips':
                    if (txBxs[i].value != 'To what ever your checking for')
                    { alert('You\'re in focus Fool!'); };
                    break;
                    //

                case 'nextClassGroup':
                    if (txBxs[i].value != 'To what ever your checking for')
                    { alert('You\'re in focus Fool!'); };
                    break;
            };
        };
    };
</script> 
```

# json - 将 JSON 对象数组映射到 @RequestBody 列表 使用杰克逊

> ID：10864049
> 
> 赞同：20
> 
> 时间：2012-06-02T16:29:02.643
> 
> 标签：json, spring, hibernate, jackson

我在使用 Jackson 映射 Javascript 发布的 JSON 哈希数组（标签）时遇到问题。

这是控制器@RequestBody 接收到的数据（它使用正确的json requestheader 发送）：

```
[{name=tag1}, {name=tag2}, {name=tag3}] 
```

这是控制器：

```
@RequestMapping(value = "purchases/{purchaseId}/tags", method = RequestMethod.POST, params = "manyTags")
@ResponseStatus(HttpStatus.CREATED)
public void createAll(@PathVariable("purchaseId") final Long purchaseId, @RequestBody final List<Tag> entities)
{
        Purchase purchase = purchaseService.getById(purchaseId);

        Set<Tag> tags = purchase.getTags();
        purchaseService.updatePurchase(purchase);
    } 
```

当我调试和查看“实体”值时，它显示为通用对象的 ArrayList，而不是我期望的“标记”类型的对象列表。

如何让杰克逊将传递的对象数组映射到“标签”类型的对象列表？

谢谢

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-02T17:20:01.683

听起来 Spring 出于某种原因没有传递完整的类型信息，而是一个类型擦除的版本，好像声明类似于`List<?> tag`. 我不知道可以做些什么来完全解决这个问题（可能需要 Spring 集成团队提供的东西），但一种解决方法是定义您自己的类型，例如：

```
static class TagList extends ArrayList<Tag> { } 
```

并改用它。这将通过超类型声明保留通用参数化，因此即使 Spring 仅传递等效的`TagList.class`，Jackson 也可以找出`Tag`参数。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-06-03T16:17:25.540

另一种方法是获取数组而不是列表，如下所示：

```
@RequestBody Tag[] entities 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-03T17:57:29.023

Jackson 需要在自定义对象上没有参数的默认构造函数，因此您只需将默认构造函数添加到您的`Tag`类。

在您的情况下，只需添加到您的`Tag`课程中：

```
public Tag(){} 
```

# android - 我不断收到错误 FATAL EXCEPTION。无法实例化活动

> ID：10864056
> 
> 赞同：0
> 
> 时间：2012-06-02T16:30:15.707
> 
> 标签：android

致命异常 E/AndroidRuntime(535)：java.lang.RuntimeException：无法实例化活动 ComponentInfo{com.This.Calculator/com.This.Calculator.BatteryCalculatorActivity}：java.lang.ClassNotFoundException：com.This.Calculator.ThisBatteryCalculatorActivity

我只是在关注 Android Developers for Tab View 的教程，我想我已经遵循了这个词......但似乎我没有。有人可以帮帮我吗？我正在使用日食顺便说一句。

这是我的代码：

对于 ThisBatteryCalculator

```
 package com.This.Calculator;

import android.app.TabActivity;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.widget.TabHost;

@SuppressWarnings("deprecation")
public class ThisBatteryCalculator extends TabActivity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Resources res = getResources(); // Resource object to get Durables
    TabHost tabHost = getTabHost();  // The activity TabHost
    TabHost.TabSpec spec;  // Reusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, ArtistsActivity.class);

    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabHost.newTabSpec("artists").setIndicator("Artists",
                      res.getDrawable(R.drawable.ic_tab_artists))
                  .setContent(intent);
    tabHost.addTab(spec);

    // Do the same for the other tabs
    intent = new Intent().setClass(this, AlbumsActivity.class);
    spec = tabHost.newTabSpec("albums").setIndicator("Albums",
                      res.getDrawable(R.drawable.ic_tab_albums))
                  .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, SongActivity.class);
    spec = tabHost.newTabSpec("songs").setIndicator("Songs",
                      res.getDrawable(R.drawable.ic_tab_songs))
                  .setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(2);
}
} 
```

对于我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.This.Calculator"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".ThisBatteryCalculatorActivity"          
        android:label="@string/app_name" >
        android:theme="@android:style/Theme.NoTitleBar">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
 </activity>
        <activity android:name=".ArtistsActivity"
          android:label="@string/app_name" 
          android:theme="@android:style/Theme.NoTitleBar">
</activity>

<activity android:name=".SongActivity"
          android:label="@string/app_name" 
          android:theme="@android:style/Theme.NoTitleBar">
</activity>

<activity android:name=".AlbumsActivity"
          android:label="@string/app_name" 
          android:theme="@android:style/Theme.NoTitleBar">
</activity>

</application>

</manifest> 
```

最后是我的 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp" />
</LinearLayout>
</TabHost> 
```

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:32:47.557

在您的清单中，您拥有`ThisBatteryCalculatorActivity`活动类的名称。

在您的源代码中，您拥有`ThisBatteryCalculator`活动类的名称。

`ThisBatteryCalculatorActivity`并且`ThisBatteryCalculator`不一样。它们必须相同。你选择哪一个取决于你。将类重命名为`ThisBatteryCalculatorActivity`或调整清单以引用`ThisBatteryCalculator`.

# jquery - jquery UI 对话框滚动跟随？

> ID：10864059
> 
> 赞同：3
> 
> 时间：2012-06-02T16:30:41.867
> 
> 标签：jquery, user-interface

jquery UI 对话框如何跟随窗口滚动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-14T10:04:07.430

这是可能的，但您需要覆盖基本的 jQueryUI 样式，因此请确保（在您的 CSS 中）您拥有：

```
.ui-dialog {
    position: fixed !important;
} 
```

这是一个例子：

```
$(function() {
  $("#dialog-modal").dialog({
    height: 140,
    modal: true
  });
});
```

```
body {
  height: 3000px;
  }

p {
  margin-bottom: 300px;
  }

.ui-dialog {
  position: fixed !important;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<link href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" rel="stylesheet" />
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

<div id="dialog-modal" title="Basic modal dialog">
  <p>Adding the modal overlay screen makes the dialog look more prominent because it dims out the page content.</p>
</div>

<!--these are here to help show that the dialogue is actually fixed -->
<p>A</p>
<p>B</p>
<p>C</p>
<p>D</p>
<p>E</p>
<p>F</p>
```

# singleton - EJB3 单例会话 Bean 和 ConcurrentHashMap

> ID：10864060
> 
> 赞同：3
> 
> 时间：2012-06-02T16:30:46.543
> 
> 标签：singleton, ejb-3.1, concurrenthashmap

如果使用 EJB3 Singleton Session Bean，那么有 ConcurrentHashMap 状态变量是没有意义的——对吗？我可以只使用由容器并发管理器管理的常规 HashMap 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T17:10:42.530

那是对的。如果没有指定其他内容，默认情况下单例会话 bean 使用容器管理的并发。此外，如果没有指定，每个业务和超时方法都默认具有 LockType.WRITE。结果是单例中没有多个线程同时执行方法，因此使用常规 java.util.HashMap 非常好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T15:02:01.117

对于所有方法，默认设置为`@ConcurrencyManagement(CONTAINER)`with ，因为所有方法调用都会阻塞等待写锁`@Lock(WRITE)`，所以它的扩展性不如 a 。`ConcurrentHashMap`您可以使用`@Lock(READ)`and`ConcurrentHashMap`来允许多个线程，但在这一点上，您不妨使用`@ConcurrencyManagement(BEAN)`来完全摆脱容器管理的并发性。

# ruby - 文件名错误

> ID：10864064
> 
> 赞同：0
> 
> 时间：2012-06-02T16:31:20.007
> 
> 标签：ruby, filenames

我有一个这样声明的文件名；

```
filename = Time.now.strftime("%H:%M:%S")+'.json' 
```

当我这样做时会发生错误

```
File.open(filename,'w') do |f|
 f.write(rsp)
end 
```

错误出现在“初始化”中：无效参数 - 18:28:20.json 我认为这是因为文件名。当我做一些“正常”的名字时，一切正常，所以有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:46:26.753

尝试：

```
filename = Time.now.strftime("%H_%M_%S")+'.json' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:42:51.740

Windows 使用冒号作为驱动器号分隔符；有关其他特殊字符，请参见此[SO 问题](https://stackoverflow.com/questions/1665724/colon-asterisk-as-a-filename-delimiter)。

使用不同的分隔符。您也许可以逃脱它，但 IMO 并不值得。

FWIW，对于我倾向于`yyyymmdd-hhmmss`或类似的时间戳文件名。

对于文件之类的东西，在问题中包含更完整的信息总是好的——众所周知，操作系统之间的命名约定是不同的。

# cloud-foundry - 在 cloudfoundry 上部署 xwiki

> ID：10864065
> 
> 赞同：0
> 
> 时间：2012-06-02T16:31:32.230
> 
> 标签：cloud-foundry

尝试将最新的 xwiki（xwiki-enterprise-web-4.1-milestone-2）war 文件部署到 cloudfoundry（不耦合到 MySql 数据库）并出现奇怪的错误（在控制台中，尝试使用 STS 启动 xwiki 时）：

```
java.io.FileNotFoundException: /var/vcap/data/dea/apps/politic-xwiki-0-4aa67856cdca2e052aea5e0761b23636/tomcat/../tomcat.state (Too many open files)
at java.io.FileOutputStream.open(Native Method)
at java.io.FileOutputStream.<init>(FileOutputStream.java:179)
at java.io.FileOutputStream.<init>(FileOutputStream.java:70)
at java.io.PrintWriter.<init>(PrintWriter.java:146)
at com.vmware.appcloud.tomcat.AppCloudLifecycleListener.handleNotification(AppCloudLifecycleListener.java:48)
at javax.management.NotificationBroadcasterSupport.handleNotification(NotificationBroadcasterSupport.java:257)
at javax.management.NotificationBroadcasterSupport$SendNotifJob.run(NotificationBroadcasterSupport.java:322)
at javax.management.NotificationBroadcasterSupport$1.execute(NotificationBroadcasterSupport.java:307)
at javax.management.NotificationBroadcasterSupport.sendNotification(NotificationBroadcasterSupport.java:229)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4767)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1079)
at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:1002)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:506)
at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:39:40.017

[之前在 Cloud Foundry论坛](http://support.cloudfoundry.com/entries/21149021-too-many-open-files)上提出了太多打开文件的问题。

我之前（在我的 Micro Cloud Foundry 实例上）使用[此处](http://mdahlman.wordpress.com/)概述的方法解决了这个问题。

您需要编辑 /var/vcap/packages/dea/dea/lib/dea/agent.rb 以增加打开文件的限制。[您可以按照 Martin Englund 在他的论坛帖子](http://support.cloudfoundry.com/entries/21042938-mcf-1-2-0-configuration-error-s)中描述的方式执行此操作。显然，您不能在 CloudFoundry.com 上执行此操作。

希望这可以帮助。

# android-monkey - MonkeyTalkIDE 未找到 Java (JRE) / (JDK) 虚拟机

> ID：10864066
> 
> 赞同：0
> 
> 时间：2012-06-02T16:31:36.417
> 
> 标签：android-monkey

我正在尝试安装 MonkeyTalkIDE 但显示此错误

必须有 Java 运行时环境 (JRE) 或 Java 开发工具包 (JDK) 才能运行 MonkeyTalkIDE。搜索以下位置后未找到 Java 虚拟机：当前 PATH 中的 C:\Program Files\MonkeyTalkIDE\jre\bin\javaw.exe javaw.exe。

我还为java设置了环境变量。

怎样才能解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:36:23.770

[在此处](http://java.com/en/download/index.jsp)下载 Java JDK 。

您可能需要将 JAVA_HOME 设置为指向安装 Java 的目录。（我假设你知道怎么做。）

```
set JAVA_HOME=<directory-where-you-installed-JDK> 
```

将 Java /bin 目录的路径添加到 PATH 环境变量中。（我假设你知道怎么做。）如果你做第二步，它会是

```
PATH=%PATH%;%JAVA_HOME%\bin; 
```

# ios - 查看 ios 应用程序发出的 http 请求

> ID：10864067
> 
> 赞同：3
> 
> 时间：2012-06-02T16:32:01.113
> 
> 标签：ios, web-services, debugging, http

我想查看 iphone 应用程序发出的请求/响应。我主要从事网络应用程序，我可以使用 firebug / fiddler 来查看它们。但是，如果我在无线设备上运行 iOS 应用程序，我如何查看它的传入/传出流量？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-02T17:37:11.103

如果配置正确，[Charles Web 代理](http://charlesproxy.com)（我也相信 Fiddler）允许来自外部主机的连接。在 Charles 中，您需要确保将您的 iPhone 添加到代理 -> 访问控制设置中的访问控制列表中。

之后，您可以简单地将 iPhone 的代理设置为计算机的 Charles 或 Fiddler 实例。就我而言，我的本地桌面位于 192.168.10.1，因此我的 iPhone 的代理设置为：

```
192.168.10.1:8888 
```

但是，一个问题可能是您要解密 SSL 流量。可能很难让 iPhone 将 Fiddler 或 Charles 的证书添加到钥匙串中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T16:42:57.077

你可以将你的mac无线分享到iphone然后使用一些工具，我个人使用[http://www.charlesproxy.com/](http://www.charlesproxy.com/)来解决这些问题

[您可以从https://superuser.com/questions/99870/mac-wireshark-alternatives](https://superuser.com/questions/99870/mac-wireshark-alternatives)中选择一个工具

# java - 安卓Java。invalidate(Rect) 的奇怪行为

> ID：10864073
> 
> 赞同：1
> 
> 时间：2012-06-02T16:32:43.930
> 
> 标签：java, android

我用无效（矩形）得到了奇怪的效果。

我在画布上使用 onDraw 方法。在最简单的情况下，我有一个背景和一个精灵。

在第一次通过 onDraw 时，我绘制背景并使用 invalidate(Rect) （一个覆盖整个运动场的矩形），在同一次通过中，我绘制一个精灵并且（因为所有通道的代码都是相同的）我做sprite 所在的 Rect 的 invalidate(Rect) 。

第一次传球后，比赛场地是正确的。整个背景就位，精灵叠加。

在下一次和后续通过 onDraw 时，我绘制精灵所在背景的“脏”位，并在其上执行 invalidate(Rect)，连同精灵及其新的“脏”矩形，以及另一个 invalidate( Rect) 用于精灵。

在此通道和所有后续通道之后，我只看到精灵。就好像画布已经被清理干净了。

是否不允许一次执行多个无效（矩形）？这是问题吗？我遇到了一些异步问题吗？

这是 onDraw() 代码。如果我在 onDraw() 结束时执行全屏 invalidate() 代替，它可以正常工作，但速度很慢。它还缩放所有图像。所有图像和屏幕位置均基于 640x480 的游戏场，并缩放到当前 android 设备的大小。在我尝试使用 invalidate(Rect) 优化屏幕绘图之前，所有这些都可以正常工作。

```
 @Override
    protected void onDraw(Canvas canvas) 
{
    int ii;

    // Draw the background scene
    // Restore all the bits of the backcloth that got 
    // trampled on by any sprites or the cursor 
    // On the first pass the whole playfield dirty rectangle is in place in mask
    paint.reset();
    mask.collapse();
    ArrayList <Rect> usedSet = mask.getUsedRectSet();
    for (ii = 0; ii < usedSet.size(); ii++)
    {
        Rect src = rescaleRect(usedSet.get(ii));
        Rect dst = displaceRect(src);
        canvas.drawBitmap(backcloth, src, dst, paint);
        invalidate(dst);
    }
    // Leave used Rect set clear for next set of sprites
    mask.ClearUsedRectSet();

    //
    // draw Sprites
    //   screen scaling and
    //   displacement is done here.
    //
    ArrayList <Sprite> slist = jadedata.getCurrentSprites();
    //Sort sprites into ascending order of priority
    //      This is a sinking sort. On first pass, the highest
    //      priority sprite arrives at the bottom. On second,
    //      the next highest arrives at second bottom, etc.
    //      Sprites of the same priority remain in their
    //      original sequence with respect to each other.
    for (ii = 0; ii< slist.size()-1; ii++)
    {
        int sw=0;
        for (int jj = 0; jj < (slist.size()-ii-1); jj++)
        {
            Sprite spare1 = slist.get(jj);
            Sprite spare2 = slist.get(jj+1);
            if (spare1.getPriority() > spare2.getPriority())
            {
                slist.set(jj+1, spare1);
                slist.set(jj, spare2);
                sw=1;
            }
        }
        if (sw==0) break;  // exit if slist is already in sequence
    }

    for (ii = 0; ii< slist.size(); ii++) 
    {
        Point p = new Point();
        Point e = new Point();
        Rect o = new Rect();
        Sprite sprite = (Sprite)slist.get(ii);
        // Zero-priority sprites do not get drawn
        if (sprite.getPriority() == 0) continue;
        p = sprite.getPosition();
        e = sprite.getExtent();
        // make a rect for usedRects
        Rect r = new Rect(0, 0, e.x-1, e.y-1);
        Rect src = new Rect(r);
        // move it to the model playfield position
        r.offset(p.x-e.x/2, p.y-e.y/2);
        // make an overlap rect so we can apply it to the source image
        o = overlapRect(r, 0, 0, iWidth, iHeight);
        // trim r for the used rectangles
        r = trimRect(r, 0, 0, iWidth, iHeight);
        // add it to used Rectangles
        mask.addNewRect(r);
        // draw the sprite image
        Rect d = rescaleRect(usedSet.get(ii));
        Rect dst = displaceRect(d);
        Bitmap spriteim = sprite.getCurrentImage();
        src.top += o.top;
        src.left += o.left;
        src.bottom -= o.bottom;
        src.right -= o.right;
        canvas.drawBitmap(spriteim, src, dst, paint);
        invalidate(dst);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:46:46.373

由于您没有提供代码，因此不确定您在做什么，所以我将给出一个一般提示：

对于第一遍之后的遍，仅在脏矩形上使用无效，并在 onDraw 方法中绘制需要绘制的所有内容，但仅在脏矩形内绘制。

# c++ - 在 DLL 中启动应用程序

> ID：10864080
> 
> 赞同：1
> 
> 时间：2012-06-02T16:32:56.317
> 
> 标签：c++, winapi, dll

所以我想创建一个包含应用程序的 Dll。我的代码：

```
BOOL APIENTRY DllMain( HANDLE hModule, 
                       DWORD  ul_reason_for_call, 
                       LPVOID lpReserved
                     )
{
    switch(ul_reason_for_call)
    {
        case DLL_PROCESS_ATTACH:
            StartApp();
            break;
    }

    return TRUE;
} 
```

和 StartApp 功能：

```
void StartApp()
{   
    //some declartions
    iPtr->Start();
} 
```

问题是函数 Start() 在连续循环中运行（比如 while(true)），我认为这是导致 dll 永远不会中断并返回 true 的问题。我试图在不同的线程中运行它，但这不起作用。

所以我的问题是我该怎么做才能使用 dll？

如果 DllMain 没有完成并且不返回 TRUE，是否有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:02:44.693

是的，有一个问题是 DllMain 没有返回，如文档所述：

`When a DLL entry-point function is called because a process is loading, the function returns TRUE to indicate success. For processes using load-time linking, a return value of FALSE causes the process initialization to fail and the process terminates. For processes using run-time linking, a return value of FALSE causes the LoadLibrary or LoadLibraryEx function to return NULL, indicating failure. (The system immediately calls your entry-point function with DLL_PROCESS_DETACH and unloads the DLL.) The return value of the entry-point function is disregarded when the function is called for any other reason.`

[来源](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682596%28v=vs.85%29.aspx)。

您可以为 StartApp 函数创建一个包装函数，并通过您的 dll 公开它。之后，您可以从可执行文件中调用导出的 StartApp 函数（在加载 dll 之后）。确保从不同的线程调用它，因为它会阻塞。

# sql-server - 如何重写我的查询，使函数不会被多次调用？

> ID：10864081
> 
> 赞同：4
> 
> 时间：2012-06-02T16:33:00.410
> 
> 标签：sql-server, tsql

我正在定期（每月）导入大量数据。在转换过程中，我将一个字符串拆分为多个列，但这不仅仅是一个简单的拆分。有一点逻辑可以决定字符串的哪个部分进入哪个字段。

我编写了一个内联函数，它将字符串分成多个部分，并为您提供指定索引处的值。

参数是：

1.  字符串值
2.  分隔符
3.  指数

例如：

如果字符串值是`X4-728Z5-121-84gff`并且您希望函数为您提供 121，那么您可以像这样调用该函数：

```
fn_MyFunc('X4-728Z5-121-84gff', '-', 3) 
```

我的问题是这样的：

在我的导入查询中，特定字段值所需的索引取决于另一个索引处的值。如果索引 1 处的值 =`X4`那么我想要索引 3，否则索引 4。

在单个查询中，我调用此函数 4 或 5 次，具体取决于某些 case 语句的结果。

该功能基本上一遍又一遍地做同样的事情......但每次，我都会得到不同的索引。如何减少工作量，使得拆分字符串的辛苦工作只完成一次，并且在同一个查询中，我可以轻松获得不同的索引？

请记住，这是在从外部源导入数据的过程中，任何建议标准化或索引视图等的答案都无济于事。

**编辑**

我被要求发布我的查询：

```
SELECT
    ComplexString,
    CAST(fn_MyFunc(ComplexString, '-', 1) AS NVARCHAR(2)) AS LocationCode,
    CAST(fn_MyFunc(ComplexString, '-', 2) AS NVARCHAR(25)) AS CompanyCode,
    NULLIF(CASE
        WHEN fn_MyFunc(ComplexString, '-', 1) = 'R1' THEN NULL
        ELSE CAST(fn_MyFunc(ComplexString, '-', 3) AS INT)
    END, 0) AS ManagementType,
    CASE
        WHEN fn_MyFunc(ComplexString, '-', 1) = 'R1' THEN CAST(fn_MyFunc(ComplexString, '-', 3) AS VARCHAR(25))
        ELSE CAST(fn_MyFunc(ComplexString, '-', 4) AS NVARCHAR(25))
    END AS Network,
    .
    .
    .
FROM MyTable 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T16:48:17.320

如果所有字符串的最大值为 4 部分，则您可以内联执行此操作，而不是您的函数：

```
SELECT PARSENAME(REPLACE(column, '-', '.'), 
  CASE WHEN (condition for 4th element) THEN 1 
       WHEN (condition for 3rd element) THEN 2
       WHEN (condition for 2nd element) THEN 3
       WHEN (condition for 1st element) THEN 4
   END
FROM ... 
```

您还可以考虑：

(a) 将字符串的每个部分存储在单独的计算列中。您甚至可以对计算列进行持久化/索引。

(b) 首先分别存储字符串的各个部分——连接总是比拆分更容易。

**编辑**给定更新的查询

```
;WITH x AS
(
  SELECT ComplexString,
         p1 = LEFT(ComplexString, 2),
         p2 = dbo.fn_MyFunc(ComplexString, '-', 2),
         p3 = dbo.fn_MyFunc(ComplexString, '-', 3),    
         p4 = dbo.fn_MyFunc(ComplexString, '-', 4)
         -- , other columns
  FROM dbo.MyTable
)
SELECT
    ComplexString,
    p1 AS LocationCode,
    LEFT(p2, 25) AS CompanyCode,
    CASE WHEN p1 <> 'RI' THEN CONVERT(INT, LEFT(p3, 3)) ELSE 0 END 
      AS ManagementType,
    LEFT(CASE WHEN p1 = 'RI' THEN p3 ELSE p4 END, 25) AS Network
FROM x; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T17:29:23.857

创建一个拆分函数，将您的字符串拆分为列，并在`cross apply`.

拆分为 5 列的函数可能如下所示。

```
alter function [dbo].[SplitString]
(
    @Value nvarchar(max),
    @Delim nchar(1)
)
returns table as return
(
    select substring(T.Value, 1, T1.P - 1) as C1,
           substring(T.Value, T1.P + 1, T2.P - T1.P - 1) as C2,
           substring(T.Value, T2.P + 1, T3.P - T2.P - 1) as C3,
           substring(T.Value, T3.P + 1, T4.P - T3.P - 1) as C4,
           substring(T.Value, T4.P + 1, T5.P - T4.P - 1) as C5
    from (select @Value+replicate(@Delim, 5)) as T(Value) 
      cross apply (select charindex(@Delim, T.Value)) as T1(P)
      cross apply (select charindex(@Delim, T.Value, T1.P + 1)) as T2(P)
      cross apply (select charindex(@Delim, T.Value, T2.P + 1)) as T3(P)
      cross apply (select charindex(@Delim, T.Value, T3.P + 1)) as T4(P)
      cross apply (select charindex(@Delim, T.Value, T4.P + 1)) as T5(P)
) 
```

它会像这样使用。

```
select *
from YourTable as Y
  cross apply dbo.SplitString(Y.ColumnToSplit, '-') as S 
```

该函数将为每一行调用一次，您可以使用`C1, C2, C3, ...`字段列表或 where 子句中的列，而无需重新调用 split 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T16:39:44.360

如果字符串的各个部分是您希望对数据执行的操作的核心，则可以通过将这些部分存储为单独的列或相关表中来进一步规范化。

或者，如果您需要多次访问这些部分，则返回各个部分的表值函数将使您能够提高性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T17:15:10.383

如果您的字符串具有固定（或确定的最大）数量的部分，您可以创建一组变量，如@part1、@part2 等（如果每个部分都有特定的含义，则使用更好的名称）。使用您的函数填充变量一次，并使用变量而不是重新解析。

- 或者 -

使用解析方法将您的字符串转换为具有一`varchar`列和一个`tinyint`标识列的窄临时表或表变量（关于该主题有许多关于 SO 的帖子 -[这](http://www.sommarskog.se/arrays-in-sql-2005.html#CSV) 是一篇不错的文章，面向 csv，但很容易适应你的情况）。然后，您可以使用 a 中的序列列`select`来定位您需要的字符串部分。

# django - Django 管理面板内容发布错误

> ID：10864089
> 
> 赞同：10
> 
> 时间：2012-06-02T16:33:39.320
> 
> 标签：django, nginx, uwsgi

当我在管理面板上为我的 django 网站添加内容时，我收到了错误。添加 10-15 内容后，网站给出了这个错误。" `The page you are looking for is temporarily unavailable.`"

我分析了 nginx 和 uwsgi 日志。

Nginx 日志包含以下行。

```
2012/06/02 22:02:53 [error] 5203#0: *602 recv() failed (104: Connection reset by peer) while reading response header from upstream, client: 92.10.214.1, server: server.com, request: "POST /admin/hdduyuru/duyurular/add/ HTTP/1.1", upstream: "uwsgi://127.0.0.1:1235", host: "127.0.0.1", referrer: "http://127.0.0.1/admin/hdduyuru/duyurular/add/" 
```

并且 uwsgi 日志包含到下面的行。

```
invalid request block size: 4169 (max 4096)...skip 
```

我正在使用下面的行在 uwsgi+nginx 上部署我的网站

```
/usr/bin/uwsgi --socket 127.0.0.1:1245 --master --workers 5 --harakiri 30 --disable-logging --daemonize /tmp/daemonize.log --pidfile /tmp/pidfile.txt --vacuum --gid 500 --uid 500 --ini /home/uwsgi.ini 
```

/home/uwsgi.in

```
[uwsgi]
chdir=/home/
module=hdblog.wsgi:application
master=True
pidfile=/tmp/project-master.pid
vacuum=True
max-requests=5000
daemonize=/tmp/hdblog.log 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-02T17:09:36.447

看起来请求标头可能超过了默认的 uwsgi 最大缓冲区大小 4k。尝试通过添加`buffer-size=32768`到`uwsgi.ini`文件来增加缓冲区大小。

# css - Wordpress/Disqus 视觉故障：空白

> ID：10864095
> 
> 赞同：0
> 
> 时间：2012-06-02T16:34:38.887
> 
> 标签：css, wordpress, disqus, clearfix

WP Disqus 官方插件评论和它的社交栏（Like/Dislike/Settings）之间有一个巨大的空白区域，如下截图所示：http: [//i.imgur.com/RjRs6.jpg](http://i.imgur.com/RjRs6.jpg) 巧合的是，空白区域结束于右侧边栏结束。正如 Firebug 所示，disqus_thread 或 disq-content 中的某些内容会导致此故障。我尝试删除我的个人 style.css clearfix 代码或仅删除 height:0，但没有任何改变

```
.clearfix:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
} 
```

[您可以在我的博客（即http://www.flapane.com/blog/2010/11/rai-rinuncia-ad-acquistare-diritti-champions-league/](http://www.flapane.com/blog/2010/11/rai-rinuncia-ad-acquistare-diritti-champions-league/)）的任何帖子上看到它“直播” ，就在两者之间帖子本身和 Disqus 评论。

有什么提示吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:49:10.967

固定的。Disqus 针对以下情况提供了解决方案：

```
#dsq-content { overflow:auto !important; } 
```

但是它显示了一个垂直滚动条，所以我将其更改为：

```
#dsq-content { overflow:hidden !important; } 
```

# javascript - jQuery插件上的点击功能只允许单击

> ID：10864096
> 
> 赞同：1
> 
> 时间：2012-06-02T16:34:41.377
> 
> 标签：javascript, jquery, jquery-plugins

我创建了这个简单的插件来在单击时添加多个动画，但问题是一旦单击对象，它就无法通过再次单击来重复动画，我无法弄清楚为什么添加的类在单击后没有自行删除功能已完成，允许再次单击并重复..有什么建议吗？

```
(function($) {
    $.fn.vivify = function(options) {
        var defaults = {
            animation: 'bounce',
        };
        var options = $.extend(defaults, options);
        return this.each(function() {
            var o = options;
            var obj = $(this);
            var animation = o.animation;
            obj.bind("click", function() {
                obj.addClass(o.animation);
                obj.addClass('vivify');
            }, function() {
                obj.removeClass(o.animation);
            });
        })
    }
})(jQuery);​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:59:31.410

这是一个工作示例（我猜，因为我不确切知道您的插件的预期效果是什么）：

[http://jsfiddle.net/gabrieleromanato/Fmr9g/](http://jsfiddle.net/gabrieleromanato/Fmr9g/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:39:10.273

```
obj.bind("click", function() {
        obj.addClass(o.animation);
        obj.addClass('vivify');
}, 
// this callback is not valid
function() {
     obj.removeClass(o.animation);
 }); 
```

因为`.bind()`接受如下参数：

```
.bind(eventName, [eventData], [callback]) 
```

阅读[`.bind()`](http://api.jquery.com/bind)

要删除课程，您可以执行以下操作：

```
obj.bind("click", function() {
    obj.addClass(o.animation);
    obj.addClass('vivify');
    // you can removeClass here
    obj.removeClass(o.animation);

   // but you need some delay

   setTimeou(function() {
      obj.removeClass(o.animation);
   }, 5000);
}); 
```

要增加超时，您可以执行以下操作：

```
return this.each(function(index, val) {
       var o = options;
       var obj = $(this);
       var animation = o.animation;
       obj.bind("click", function() {
         obj.addClass(o.animation);
         obj.addClass('vivify');
       }, index * 2000);
}); 
```

# jquery - 使用 jquery 和 livevalidation 进行表单验证

> ID：10864100
> 
> 赞同：1
> 
> 时间：2012-06-02T16:35:00.520
> 
> 标签：jquery, html, forms, validation, livevalidation

我正在尝试使用 livevaldation 和 jquery 进行一些表单验证。

我有一个像这样的输入字段的公式：

```
<div id="prenameDiv" class="control-group">
     <input id="prename" name="prename" class="input-large" placeholder="Max"/>
</div> 
```

因此，如果验证“livevalidaton”出现错误，则将“LV_invalid_field”类添加到输入中 - 它看起来像这样：

```
<div id="prenameDiv" class="control-group">
    <input id="prename" name="prename" class="input-large LV_invalid_field" placeholder="Max"/>
</div> 
```

没关系，但是现在我将在 DOM 更改为如下所示时将另一个类 'error' 添加到 div 'prenameDiv' 中：

```
<div id="prenameDiv" class="control-group error">
     <input id="prename" name="prename" class="input-large LV_invalid_field" placeholder="Max"/>
</div> 
```

我是这样尝试的：

```
if ($("#prenameDiv").bind("DOMSubtreeModified")){
     if ($("#prename").hasClass("LV_invalid_field")) {
         $("#prenameDiv").addClass("error");
     }
} 
```

但什么都没有改变？你有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:59:37.450

您可以使用[.find](http://api.jquery.com/find/)来实现这一点。

```
if(($("#prenameDiv").find(".LV_invalid_field").length!=0)
{
   $("#prenameDiv").addClass("error");
} 
```

# python - 我在哪里可以找到 python 的 itk 文档？

> ID：10864106
> 
> 赞同：2
> 
> 时间：2012-06-02T16:36:36.000
> 
> 标签：python, itk

有一个类似的问题：[我在哪里可以找到 python 的 vtk 文档？](https://stackoverflow.com/questions/6927352)

我在python上使用**itk 。**我试图找到可以用于文档的东西。c++ 文档没有用。

非常感谢！

# ios - 使用其 UIPanGestureRecognizer 复制 UIImageView

> ID：10864107
> 
> 赞同：0
> 
> 时间：2012-06-02T16:36:44.373
> 
> 标签：ios, uiimageview, xcode4.3, uipangesturerecognizer

我有一个`UIImageView`对象`UIPanGestureRecognizer`，我想附加到它上面。UIPanGestureRecognizer 获取 move 方法作为选择器。我想做的是：当我拖动 ImageView 时，我想对其进行克隆，并为其添加一个手势识别器。问题是 move 方法只有一个参数，就像 move ( `UIPanGestureRecognizer *`)sender

但问题是 move 方法只知道第一个 imageview 对象。我尝试创建一种方法，例如`move:(UIPanGestureRecognizer*)sender :(UIImageView *)img`发送不同的图像视图作为第二个参数，但它在以下代码中引发错误（无法识别的选择器 ....）。如何向选择器添加具有多个参数的方法？

```
UIPanGestureRecognizer *panRecognizer = [[[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:imageView:)] autorelease]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:39:53.403

你可以简单地从手势识别器中获取图像视图，使用它的`view`属性。

# ruby-on-rails - 如何在 rails 3.2 (ActionView::PathSet) 中添加 rails 视图路径

> ID：10864108
> 
> 赞同：10
> 
> 时间：2012-06-02T16:36:48.210
> 
> 标签：ruby-on-rails

我正在尝试将视图添加到 rails 视图数组，例如

prepend_view_path("#{Rails.root}/app/views/custom/blah")

这很好用，但是在我的测试套件中我一直看到

**弃用警告： process_view_paths 已弃用，将从 Rails 3.2 中删除。**

经过一番研究，我看到提到了 ActionView::PathSet，但在搜索谷歌或 Rails API 文档中找不到任何帮助。我需要知道如何在 rails 3.2 中使用这种预先添加路径的新方法

我真的很想摆脱这个警告。有什么想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-02T20:53:47.750

如果它是动态的（基于每个请求设置）：

```
class ApplicationController < ActionController::Base
  before_filter :set_view_path

  def set_view_path
    prepend_view_path "#{Rails.root}/app/views/custom/blah"
  end  
end 
```

我认为它去了`AbstractController::ViewPaths`，但仍然可以从控制器获得 - 应该没有弃用。

如果您预先添加静态固定路径：

```
# config/application.rb    
config.paths.app.views.unshift("#{Rails.root}/app/views/custom/blah") 
```

# android - 删除 SQlite 行时出错

> ID：10864111
> 
> 赞同：0
> 
> 时间：2012-06-02T16:37:06.780
> 
> 标签：android, sqlite

当我调用我的函数从我的数据库中删除一行时：

```
public void deleteRow(int rowId) {
     getWritableDatabase().delete(DatabaseHelper.orderTable, "id="+rowId,null); 
```

我在 logcat 中收到很多错误消息：

```
06-02 16:32:14.356: E/WindowManager(2770): Activity com.Sagi.MyOrders.FindOrder has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f50540 that was originally added here
06-02 16:32:14.356: E/WindowManager(2770): android.view.WindowLeaked: Activity com.Sagi.MyOrders.FindOrder has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f50540 that was originally added here
06-02 16:32:14.356: E/WindowManager(2770):  at android.view.ViewRoot.<init>(ViewRoot.java:247)
06-02 16:32:14.356: E/WindowManager(2770):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
06-02 16:32:14.356: E/WindowManager(2770):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
06-02 16:32:14.356: E/WindowManager(2770):  at  android.view.Window$LocalWindowManager.addView(Window.java:424)
06-02 16:32:14.356: E/WindowManager(2770):  at android.app.Dialog.show(Dialog.java:241)
06-02 16:32:14.356: E/WindowManager(2770):  at com.Sagi.MyOrders.FindOrder.alert_editlist(FindOrder.java:56)
06-02 16:32:14.356: E/WindowManager(2770):  at com.Sagi.MyOrders.FindOrder.onItemLongClick(FindOrder.java:138)
06-02 16:32:14.356: E/WindowManager(2770):  at android.widget.AbsListView.performLongPress(AbsListView.java:1753)
06-02 16:32:14.356: E/WindowManager(2770):  at android.widget.AbsListView.access$600(AbsListView.java:72)
06-02 16:32:14.356: E/WindowManager(2770):  at android.widget.AbsListView$CheckForLongPress.run(AbsListView.java:1711)
06-02 16:32:14.356: E/WindowManager(2770):  at android.os.Handler.handleCallback(Handler.java:587)
06-02 16:32:14.356: E/WindowManager(2770):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-02 16:32:14.356: E/WindowManager(2770):  at android.os.Looper.loop(Looper.java:123)
06-02 16:32:14.356: E/WindowManager(2770):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-02 16:32:14.356: E/WindowManager(2770):  at java.lang.reflect.Method.invokeNative(Native Method)
06-02 16:32:14.356: E/WindowManager(2770):  at java.lang.reflect.Method.invoke(Method.java:521)
06-02 16:32:14.356: E/WindowManager(2770):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-02 16:32:14.356: E/WindowManager(2770):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-02 16:32:14.356: E/WindowManager(2770):  at dalvik.system.NativeStart.main(Native Method) 
```

我寻找了一个打开的光标或一个数据库，但我找不到任何东西。函数返回后，有：

```
finish(); 
```

这是我的 alertDialog 创建者：

```
private void alert_editlist(final int id) {
        // TODO Auto-generated method stub
        final CharSequence[] items = {"Edit", "Delete"};

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("What do you want to do?");
        builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) {
                if (items[item]=="Edit") {
                }
                else if(items[item]=="Delete"){
                   finish();
                }
                finish();
            }
        });
        AlertDialog alert = builder.create();
        alert.show();
    } 
```

**谢谢 ！！！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:58:46.470

你关闭一个对话框`dismiss();`

更改`finish();`为`dismiss()`（在它之前插入您的删除方法调用），您应该会得到更好的结果。

# django - 如何在我的 Django 应用程序中为用户指定 (1) 订单和 (2) 有意义的字符串表示？

> ID：10864112
> 
> 赞同：1
> 
> 时间：2012-06-02T16:37:12.690
> 
> 标签：django, django-forms

我有一个带有用户的 Django 应用程序。我有一个名为“Course”的模型，带有一个名为“teacher”的外键，用于 Django 提供的默认用户模型：

```
class Course(models.Model):
    ...
    teacher = models.ForeignKey(User, related_name='courses_taught') 
```

当我创建一个模型表单来编辑个别课程的信息时，教师字段的可能用户出现在这个用户名的长选择菜单中。

![在此处输入图像描述](../Images/ad0eae1c6364e1e481dbdbb43cf211c1.png)

这些用户是按 ID 排序的，这对我来说用处不大。我怎样才能

1.  按姓氏对这些用户排序？
2.  将 User 类的字符串表示形式更改为“Firstname Lastname (username)”而不是“username”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:09:06.873

# 抽象的

如果您只与管理员打交道，最好不要修改`User`模型本身，因为子类`User`化可能会很痛苦（特别是当/如果其他开发人员要处理您的项目时），但使用管理员的自定义选项。

# 解决方案

要在管理员中解决您的问题，您可以使用`ModelAdmin`选项`raw_id_fields`.

这将`<select>`用一个小部件替换输入，您可以单击该小部件以重定向到您的`User`管理员并从中选择您的用户。

从那里，自定义您的`User`管理员是微不足道的，以便它：

*   按相关顺序显示您的用户 ( `ModelAdmin.ordering`)
*   显示您感兴趣的字段 ( `ModelAdmin.list_display`)

请记住，当您注册`User`管理员时，您需要使用：

```
admin.site.unregister(User) #This!
admin.site.register(User, MyCustomUserAdmin) 
```

# 替代解决方案

或者，您始终可以使用`ModelAdmin.formfield_overrides`，它更强大但更复杂。

# 参考

您应该查看[Django 文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)以获取有关如何使用这些属性的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T07:01:26.313

You could achieve this by customizing form field, here the `forms.ModelChoiceField`

```
 class CustomizedModelChoiceField(forms.ModelChoiceField):
     def __init__(self, *args, **kwargs):
         # change default ordering
         super(CustomizedModelChoiceField, self).__init__(*args, **kwargs)
         self.queryset = self.queryset.order_by('last_name')

     def label_from_instance(self, obj):
         # change representation per item
         return u'{obj.first_name} {obj.last_name} ({obj.username})'.format(obj=obj) 
```

Then use it in your form to replace default `ModelChoiceField`.

In Django Admin, it looks like

```
class CourseAdmin(admin.ModelAdmin):    
     def formfield_for_dbfield(self, db_field, **kwargs):
         if db_field.name == 'teacher':
             kwargs['form_class'] = CustomizedModelChoiceField
         return super(CourseAdmin, self).formfield_for_dbfield(db_field, **kwargs) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T16:53:05.170

首先，顺序。[您可以使用嵌套`Meta`类](https://docs.djangoproject.com/en/dev/ref/models/options/)定义模型的默认顺序。检查[订购](https://docs.djangoproject.com/en/dev/ref/models/options/#ordering)部分。

其次，代表性。您必须为模型定义`__str__()`/`__unicode__()`方法。它们应该返回一个代表对象的字符串。您可以在文档中查看示例。但是，由于`User`是来自外部模块的模型，因此可能很难以这种方式进行。

您可能可以：

*   `User`在应用程序初始化期间猴子修补模型元类或
*   子类化`User`模型，添加`Meta`到子类并使用它代替`User`OR
*   编写一个使用对象属性而不是调用的自定义字段/表单模板`str()`

这一切都取决于当前的情况

# sass - 在 Fire.app 中使用 ERb 创建菜单栏

> ID：10864113
> 
> 赞同：0
> 
> 时间：2012-06-02T16:37:22.567
> 
> 标签：sass, navigation, erb, compass-sass

我最近开始将 Handlino 的 Fire.app 与 SCSS 和 ERb 预处理器一起使用，我需要一种方法来构建一个知道你在哪个页面上的导航栏。使用`<%= render :partial => "nav" %>`html 或仅使用内联 html 来提示用户当前在哪个页面上，例如更改类等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:01:50.300

您可以尝试将局部变量传递给局部变量：

```
#on some page
<%= render :partial => "nav", :locals => { :current_page => 'some_page' } %>

#_nav.html.erb
<% if current_page == 'some_page' %>
  I'm on a some page.
<% end %> 
```

# php - 清理或验证电子邮件 php

> ID：10864120
> 
> 赞同：2
> 
> 时间：2012-06-02T16:38:22.087
> 
> 标签：php

我在用`filter_var`

以及检查电子邮件是否有效的功能

```
function checkEmail($email)
{
    return filter_var($email, FILTER_VALIDATE_EMAIL);
} 
```

这是我唯一要做的事情。例如，在注册中，我使用此功能验证电子邮件，然后插入数据库（使用 ofc 的准备语句）**但是在此功能中也必须使用清理功能吗？**是否有任何“有效”但“危险”的电子邮件可能导致问题......？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T16:51:43.953

`FILTER_VALIDATE_EMAIL`确保电子邮件地址有效。它与从字符串中消除“危险”字符（即在某些上下文中具有特殊含义的字符）无关。

因此，输入验证一切都很好，并且对于检查您的数据是否符合业务规则是必要的，但是当您将值注入另一个上下文时，它并不能免除您转义特殊字符的责任。

因此，您放入 HTML 页面的任何字符串都必须继续使用`htmlspecialchars()`，并且您放入 MySQL 查询中的文字中的任何字符串都必须继续使用`mysql_real_escape_string()`（或者，更好的是，使用 mysqli 或 PDO 中的参数化查询，以避免在查询中停止字符串）。输出转义必须始终在构建内容时发生，无论您进行了何种输入验证。

> 是否有任何“有效”但“危险”的电子邮件可能导致问题......？

当然。`a&a@b.com`注入 HTML 时会中断；`a%a@b.com`注入 URL 组件时会中断；`a'a@b.com`注入 SQL 字符串文字时会中断。依赖于上下文的输出转义是至关重要的；试图删除在*某些*情况下可能会造成麻烦的所有字符将意味着删除几乎所有的标点符号，这并不是很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:47:50.780

验证和卫生是两种不同的操作。

进行验证以确保用户输入的格式正确。虽然卫生是为了防止恶意用户损坏您的数据库/应用程序。

通常需要这两种操作。

如果使用 MySQLi 或 PDO 使用准备好的语句，则可以跳过清理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T16:45:38.443

为了安全起见，我会在验证之前对其进行清理，因为如果电子邮件地址包含换行符，它也会通过验证，这可能会导致问题（[安全公告](http://www.php-security.org/MOPB/PMOPB-45-2007.html)）。

```
return filter_var(
         filter_var(
           $email,
           FILTER_SANITIZE_EMAIL
         ),
         FILTER_VALIDATE_EMAIL); 
```

您还可以使用`trim()`删除尾随空格和换行符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T16:48:41.730

根据维基百科关于电子邮件地址的条目，[邮件地址](http://en.wikipedia.org/wiki/Email_address#Local_part)中允许使用几个特殊字符，例如`'`和`%`。因此，您应该清理或使用准备好的语句。

# monodevelop - 在 Monodevelop 中搜索引用类型

> ID：10864123
> 
> 赞同：1
> 
> 时间：2012-06-02T16:38:29.883
> 
> 标签：monodevelop

我正在尝试在 Monodevelop 中搜索引用类型。

我对 Mono（和一般的 .NET 开发）相当陌生。在 Eclipse 中，我会打开一个窗口，然后我可以在项目的任何引用库中搜索任何给定的类型/类。

在 Monodevelop 中可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:57:12.187

要在 MD 3.0 中搜索引用程序集中的类型，请打开程序集浏览器并使用那里的搜索面板。要导航到您自己项目中的类型，请使用“[导航至”](http://mjhutchinson.com/journal/2011/02/monodevelop_tips_navigate_files_and_types)命令。

# objective-c - 如何使用带有 SELECT 语句和 JOIN 的 FMDB 获取行数？

> ID：10864130
> 
> 赞同：0
> 
> 时间：2012-06-02T16:39:41.693
> 
> 标签：objective-c, sqlite, fmdb

这是我获取 OrderData 行数的 SQL。使用直接 SQL（在 SQLite 数据库浏览器中）它给了我正确的值；当我在带有 FMDB 的应用程序中使用此 select 语句时，我得到的计数为零 (0)。

```
 //  get count of line items for each order
FMResultSet *rs2 = [fmdb executeQuery:@"select count(orderdata.order_id) from orderdata "
                    "join custdata on custdata.customer_id = orderinfo.cust_id "
                    "join orderinfo on orderdata.order_id = orderinfo.order_id "
                    "where custdata.Bus_name = '?'", globalBusinessName];

while([rs2 next])  {
    globalItemCount = [rs2 intForColumnIndex: 0];
} 
```

我在 WHILE 语句中遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:11:39.290

我相信这里的问题是围绕带有撇号的替换查询。在使用参数替换进行查询时，它们是不必要的（也是有害的），所以你只想`executeQuery`用

```
"where custdata.Bus_name = ? ", globalBusinessName]; 
```

我的猜测是你要么得到 rs2 的 nil （你应该检查然后评估错误状态），或者查询没有找到任何结果，因此返回一个有效的 rs2，但计数为 0 .

# grails - Google API：阅读文档

> ID：10864137
> 
> 赞同：0
> 
> 时间：2012-06-02T16:41:37.447
> 
> 标签：grails, google-api

每个人。

我在使用 Google API 时遇到了一些问题：想阅读文档列表，但在第一行

```
DocsService client = new DocsService("yourCo-yourAppName-v1"); 
```

有一个例外：

```
Could not initialize class com.google.gdata.client.docs.DocsService. Stacktrace follows:
Caused by NoClassDefFoundError: Could not initialize class com.google.gdata.client.docs.DocsService 
```

有什么想法和建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:45:53.433

从错误来看，您似乎缺少依赖项`NoClassDefFoundError`。确保您的 gsp/HTML 头部有正确的 google API 引用或 groovy 文件中的正确导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T17:47:30.830

检查此页面以获取外部依赖项列表：[https ://developers.google.com/gdata/articles/java_client_lib](https://developers.google.com/gdata/articles/java_client_lib)

# java - 在我的网页中截取第 3 方小程序的“截图”

> ID：10864141
> 
> 赞同：0
> 
> 时间：2012-06-02T16:42:12.850
> 
> 标签：java, image, applet, screenshot, awtrobot

我有一个要嵌入到我的网页中的第三方 Java 小程序，*但我无权访问小程序代码。*

但我想在我的页面上创建一个单击按钮，该按钮将创建小程序的屏幕截图（但不是整个屏幕）。我尝试使用 Robot 类，但这会占用我不想要的整个屏幕

```
BufferedImage screencapture = new Robot().createScreenCapture(
    new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()) ); 
```

我在网上查看并找到了代码，但那些需要访问我没有的小程序。

是否可以使用java来做到这一点？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:59:45.577

我看到至少有两个选择。

## 第二个小程序

*   使用第二个小程序获取对小程序的引用，使用[`AppletContext.getApplet(name)`](http://docs.oracle.com/javase/7/docs/api/java/applet/AppletContext.html#getApplet%28java.lang.String%29).
*   求[`Applet.getLocationOnScreen()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getLocationOnScreen%28%29)坐标。
*   这是您的页面，因此除非使用百分比设置小程序大小，否则您知道要捕获的宽度 x 高度。
*   使用套接字连接到桌面/CLI 应用程序。截屏，或使用小程序截屏。无论哪种方式，都需要applet 是可信的。

## 扩展小程序

扩展原始小程序并添加一个新方法来返回或导出当前小程序表面的图像。有关示例，请参见[ComponentImageCapture.java 。](https://stackoverflow.com/questions/5853879/java-swing-obtain-image-of-jframe/5853992#5853992)

导出图像的选项：

*   [使用JWS](https://stackoverflow.com/tags/java-web-start/info)部署小程序- 使用 JNLP 文件 API 将图像导出到本地文件系统。
*   `JFileChooser`使用更常见的/对小程序进行数字签名，将图像导出到本地文件系统`File`。
*   将其传递回主机站点，这可以通过沙盒小程序完成。

# c# - 来自另一个 xaml 的操作

> ID：10864146
> 
> 赞同：0
> 
> 时间：2012-06-02T16:43:02.483
> 
> 标签：c#, silverlight, windows-phone-7

我有很多 xaml 文件，需要使用一些我不想复制代码的函数：

主要的.xaml.cs

```
 void gotoUrL(..){}

 void goroUsers(..){}

main.xaml
 <Image Tap="gotoUrl">.. 
```

我怎么能做到这一点？东西.xaml

```
<Image Tap="gotoUrl"> 
```

//gotoUrl 引用自 main.xaml.cs

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:33:19.207

一种方法可能是您编写一个单独的辅助类：`Helper.cs`. （您可以将其设为静态）。中`Helper.cs`，您可以放置​​所有不想复制的功能。然后调用那个特定的辅助类函数：`Helper.gotoUrl()`从and的`gotoUrl()`方法。您的代码不再重复。`main.xaml.cs``something.xaml.cs`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:09:36.053

你有几个选项`UserControls`.. 如果你只需要一个特定的图像，它会保持不变，你可以简单地`UserControl`用里面的图像制作一个新的。

如果功能可能会有所不同，您可以`UserControl`点赞（我们称之为 GoToUrlControl）：

```
//all the xaml at the top of the file

x:Name="Control">

<Grid Tap="OnTapped">
   <ContentControl Content="{Binding Path=Body, ElementName=Control}"/>
</Grid> 
```

然后，在后面的代码中，创建一个`DependencyProperty`（键入`propdp`并点击`tab`两次）命名它`Body`

最后，要在任何 xaml 页面上使用它，请添加 xaml 引用，以及类似的内容

```
<myControls:GoToUrlControl>
   <GoToUrlControl.Body>
      <//put any content here here />
   </GoToUrlControl.Body>
</myControls:GoToUrlControl> 
```

我不在一台可以为您提供完整工作代码的计算机上，但是此链接应填写缺失的部分。

[如何实现依赖属性](http://www.codeproject.com/Articles/42203/How-to-Implement-a-DependencyProperty)

# c++ - 在 C++ 中使用类似 c 的初始化或构造函数初始化是否被认为更好？

> ID：10864148
> 
> 赞同：4
> 
> 时间：2012-06-02T16:43:13.853
> 
> 标签：c++, constructor, initialization

> **可能重复：**
> [什么时候应该使用直接初始化，什么时候应该使用复制初始化？](https://stackoverflow.com/questions/4293596/when-should-you-use-direct-initialization-and-when-copy-initialization)

我知道两者

```
int a = 1; 
```

和

```
int a(1); 
```

在 C++ 中工作，但哪个更好用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T16:52:38.733

因为`int`没有区别。`int a = 1;`语法是*复制*初始化，而`int a(1);`直接*初始化*。即使对于一般类类型，编译器也几乎可以保证生成相同的代码，但是复制初始化要求该类*没有*声明的复制构造函数`explicit`。

为了说明这一点，直接初始化直接调用相应的构造函数：

```
T x(arg); 
```

另一方面，复制初始化的行为“好像”复制了一份：

```
T x = arg; // "as if" T x(T(arg));, but implicitly so 
```

复制省略是明确允许和鼓励的，但“好像”构造必须仍然有效，即复制构造函数必须是可访问的，而不是显式或删除的。一个例子：

```
struct T
{
    T(int) { } // one-argument constructor needed for `T x = 1;` syntax

    // T(T const &) = delete;            // Error: deleted copy constructor
    // explicit T(T const &) = default;  // Error: explicit copy constructor
    // private: T(T const &) = default;  // Error: inaccessible copy constructor
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:44:52.843

当全部为 1 和 0 时，两者最终都相同，只要保持一致即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T16:58:54.503

当您在示例中使用原始类型时，它没有任何区别。对于类，赋值形式理论上效率较低，因为它可能涉及对复制构造函数的额外调用；但是在实践中，我希望这个调用几乎总是被优化掉。

另一方面，第二种形式可能会导致所谓的[C++ 最令人烦恼的 parse](http://en.wikipedia.org/wiki/Most_vexing_parse)，即如下语句：

```
a b(c()); 
```

被解释为函数声明而不是变量定义。

我认为第二个问题比第一个问题更令人担忧，所以我一直使用变量定义的赋值风格。

# objective-c - 单击按钮，增加标题中的数字

> ID：10864150
> 
> 赞同：-2
> 
> 时间：2012-06-02T16:43:26.873
> 
> 标签：objective-c, uibutton, int

我是 Objective C 的新手，正在试图找出我做错了什么。这是我想要做的：

ButtonA1 以 0-4 的随机数开头。我使用以下代码做到了这一点：

```
int intA1 = arc4random() % 5;
NSString *A1 = [NSString stringWithFormat:@"%d", intA1];
[ButtonA1 setTitle:A1 forState:UIControlStateNormal]; 
```

这很好用。

然后我希望能够单击 ButtonA1，并让它获取按钮标题中的数字，并将其加一。我提出的用于提取按钮标题中的数字的代码不起作用。

```
- (IBAction)pushButtonA1:(id)sender {
int buttonCount = [ButtonA1.titleLabel intValue];
} 
```

它给了我一个错误“'UILabel'没有可见的@interface声明选择器'intValue'”

关于我应该做什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:51:34.240

```
int buttonCount = [ButtonA1.titleLabel.text intValue]; 
```

您需要访问`text`标签的属性（您不能调用`intValue`a `UILabel`）。

# google-chrome-extension - 使用 chrome 扩展更改谷歌翻译字体大小？

> ID：10864152
> 
> 赞同：1
> 
> 时间：2012-06-02T16:44:03.287
> 
> 标签：google-chrome-extension, google-translate

是否可以使用 chrome 扩展名更改[谷歌翻译的输入语言文本框的字体大小？](http://translate.google.com/)

阿拉伯语和许多其他语言对我来说看起来太小了。我希望能够自己设置字体大小。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:59:27.623

事实证明这是可能的，并且已经有一个扩展可以做到这一点。[Stylebot](https://chrome.google.com/webstore/detail/oiaejidbmkiecgbjeifoejpgmdaleoha)是一个不错的选择。谢谢

# c++ - 不能将一个类的方法定义为另一个类的朋友

> ID：10864156
> 
> 赞同：0
> 
> 时间：2012-06-02T16:45:00.197
> 
> 标签：c++, friend, access-control

我正在尝试使 MainScheduler 的方法 addJob 成为 Job 类的友元函数，如下所示：

```
#include "MainScheduler.h"
//forward declaration
class MainScheduler;

class Job:
{
    friend void MainScheduler::addJob( Job* const job );
    ...
} 
```

但我不断收到错误

> 错误 C2027：使用未定义类型“MainScheduler”

你知道我为什么会收到这条消息，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T17:06:25.970

您只能命名已声明的成员函数，即使是友谊声明。这意味着必须定义类，而不仅仅是前向声明。

错误的：

```
class X;

class Y
{
    friend void X::f(); // ERROR
}; 
```

对：

```
class X
{
public:
    void f();
};

class Y
{
    friend void X::f();
}; 
```

不清楚为什么您`#include "MainScheduler.h"`没有使`class MainScheduler`可见的定义，所以那里发生了其他奇怪的事情。

这条规则意味着不可能做`A::f()`is afriend of`B`和`B::g()`is `A`afriend of 之类的事情，所以有时你只需要满足于与整个班级交朋友。（或者有一些奇特的方法可以使用帮助类来请求/授予某些函数集的权限，但是当您需要可扩展的库接口时，这会更有帮助。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T17:21:34.917

问题很简单：你不能有依赖循环。

```
// MainScheduler.h
#ifndef MAINSCHEDULER
#define MAINSCHEDULER

#include "Job.h"

class MainScheduler { friend class Job; };

#endif

// Job.h
#ifndef JOB
#define JOB

#include "MainScheduler.h"

class Job { friend class MainScheduler; };

#endif 
```

解析 MainScheduler.h 时发生的情况如下：

*   `MAINSCHEDULER`未定义，因此解析开始
*   预处理器定义`MAINSCHEDULER`
*   预处理器包括 Job.h
*   因为`MAINSCHEDULER`已经定义，所以它跳过 MainScheduler.h 的包含
*   它包括来自的令牌`Job`
*   包括 Job.h 结束
*   它包括来自的令牌`MainScheduler`

这会产生以下预处理器输出，编译器会看到：

```
// ignored #include "MainScheduler.h"

class Job { friend class MainScheduler; };

class MainScheduler { friend class Job; }; 
```

这就是为什么在您引入前向声明之前，编译器会抱怨`MainScheduler`.`Job`

您的标头不能将自己包含在循环中，并且您不能仅通过前向声明与成员函数成为朋友。

我建议您将 Job.h 重写为：

```
class MainScheduler; // forward declaration

class Job {
    friend class MainScheduler;
public:
    // whatever

}; 
```

通过与全班同学交朋友，您只需提前声明即可逃脱并打破循环。

# php - 用 Twitter 链接替换以 @ 开头的单词

> ID：10864158
> 
> 赞同：0
> 
> 时间：2012-06-02T16:45:07.247
> 
> 标签：php, twitter, preg-replace

我需要用指向该 Twitter 帐户的相应链接替换文本中以 @ 开头的所有单词。现在我正在使用这样的东西：

```
$tweet_text = preg_replace('/(@\w+)/', '<a href=\'#\'>\1</a>', $string); 
```

那行得通，但是链接无处可去。我决定使用 strpos() 和 substr() 的组合来获取实际单词，然后能够链接到该 Twitter 帐户，但我想知道是否有更好的解决方案。有任何想法吗？

例子：

更换前：

```
'Imperfection is the new perfection... RT @xHausOfCandy: @katyperry i think your bottom teeth and your wonk eye make you even more adorable.' 
```

更换后：

```
'Imperfection is the new perfection... RT <a href=''#''>@xHausOfCandy</a>: <a href=''#''>@katyperry</a> i think your bottom teeth and your wonk eye make you even more adorable.' 
```

期望：

```
'Imperfection is the new perfection... RT <a href=''http://twitter.com/xHausOfCandy''>@xHausOfCandy</a>: <a href=''http://twitter.com/katyperry''>@katyperry</a> i think your bottom teeth and your wonk eye make you even more adorable.' 
```

希望现在更清楚了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T16:55:55.207

在它自己的捕获组中有名称，并在替换中引用它时使用 \2。

```
$tweet_text = preg_replace('/(@(\w+))/', '<a href="http://twitter.com/\2">\1</a>', $string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:51:16.317

您可以使用[twitter-text](https://github.com/mzsanford/twitter-text-php)库

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T17:00:02.813

```
$string = 'Imperfection is the new perfection... RT @xHausOfCandy: @katyperry i think your bottom teeth and your wonk eye make you even more adorable.';
$tweet_text = preg_replace('/@(\w+)/', '<a href="http://twitter.com/#\1">@\1</a>', $string); 
```

# php - 如何将距离矩阵保存在本地数据库中？

> ID：10864164
> 
> 赞同：2
> 
> 时间：2012-06-02T16:46:25.563
> 
> 标签：php, mysql, perl, sqlite, google-maps

我有一个通过引用距离矩阵来工作的应用程序。在当前设计中，我们从 Google Maps v3 API 收集距离矩阵，将其转换为哈希并保存到本地文本文件中。

我的数据包括一个点到另一个点之间的距离；我有5000分。

我面临与尺寸有关的问题。文件大小已经是 250MB。

1.  存储此类数据的最佳方式是什么？
2.  有什么方法可以快速获取这么多数据吗？
3.  如何从这么大的列表中搜索数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:22:27.730

我不相信 Google 的[服务条款](https://developers.google.com/maps/terms)允许您存储他们的数据。见 10.1.3(b)：

> 您不得预取、缓存或存储任何内容，除非您可以存储：(i) 有限数量的内容，以提高 Maps API 实施的性能，前提是您临时、安全且在不允许在服务之外使用内容的方式；(ii) Maps API 文档明确允许您存储的任何内容标识符或密钥。例如，您不得使用内容创建独立的“地点”数据库或其他本地列表信息。

“不允许在服务之外使用内容”的“临时、安全”存储基本上是浏览器缓存。它*可能*包括浏览器中的 HTML5 本地存储。它不包括任何允许数据在其他任何地方使用的外部数据库。而且 250MB 并不是“有限的数量”！

距离矩阵文档中的任何内容都不会覆盖该条款并允许存储该数据。

所以：您只能存储直线距离（前提是您不使用 Google 地理编码器来查找位置）。

我不完全确定为什么 Google 会这么严格。这可能是他们自己从数据提供商那里获得许可的结果。

* * *

所以这并不完全是厄运和悲观，存储距离数据将需要一个包含三列的表`origin`：`destination`和`distance`。从 5000 行中选择一行会很快。

# recursion - Clojure：只能从尾部位置重复

> ID：10864172
> 
> 赞同：23
> 
> 时间：2012-06-02T16:47:08.787
> 
> 标签：recursion, clojure

我正在尝试递归地反转列表，但正在 `Can only recur from tail position`运行。这究竟意味着什么？如何改进我的代码以使其正常工作？

```
(defn recursive-reverse [coll]
  (loop [coll coll]
    (if (< (count coll) 2) '(coll)
      (conj (first coll) (recur (rest coll)))
      ))) 
```

编辑

Oscar 解的输出。它适用于列表但不适用于向量？

```
user=> (= (recursive-reverse [1 2 3 4 5]) (recursive-reverse '(1 2 3 4 5)))
false
user=> (= '(1 2 3 4 5) [1 2 3 4 5])
true
user=> (recursive-reverse [1 2 3 4 5])
[1 2 3 4 5]
user=> (recursive-reverse '(1 2 3 4 5))
(5 4 3 2 1) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-02T18:22:21.113

该错误`Can only recur from tail position`意味着您没有调用`recur`函数递归部分中的最后一个表达式 - 事实上，在您的代码`conj`中是最后一个表达式。

使您的代码工作的一些改进：

*   询问集合是否为空作为基本情况，而不是比较其长度是否小于两个
*   `conj`接收其第一个参数的*集合*，而不是元素
*   使用`cons`代替（根据[文档](http://clojuredocs.org/clojure_core/clojure.core/conj)`conj`，根据集合的具体类型在不同位置添加新元素）是一个更好的主意。这样，如果输入集合是列表或向量，则返回的集合将被反转（尽管返回的集合的类型始终为，无论输入集合的类型如何）`clojure.lang.Cons`
*   请注意，这`'(coll)`是一个包含单个元素（符号`coll`）的列表，而*不是*实际的集合
*   为了正确反转列表，您需要遍历输入列表并将每个元素附加到输出列表的开头；为此使用累加器参数
*   为了利用`recur`函数尾部位置的尾部递归调用；这样每次递归调用都会占用一定数量的空间，并且堆栈不会无限增长

我相信这就是您的目标：

```
(defn recursive-reverse [coll]
  (loop [coll coll
         acc  (empty coll)]
        (if (empty? coll)
            acc
            (recur (rest coll) (cons (first coll) acc))))) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-02T17:18:09.867

您只能从 Clojure 中的尾部位置调用 recur。它是语言设计的一部分，是与 JVM 相关的限制。

您可以在不使用 recur 的情况下调用您的函数名称（使用递归），并且取决于您构建程序的方式，例如您是否使用惰性序列，您可能不会让堆栈爆炸。但是你最好使用 recur，并且使用带有 recur 的循环可以让你进行一些本地绑定。

[这是一个来自4Clojure.com](http://4Clojure.com)的示例，其中使用递归而不使用递归。

```
(fn flt [coll]
  (let [l (first coll) r (next coll)]
    (concat 
      (if (sequential? l)
        (flt l)
        [l])
      (when (sequential? r)
        (flt r))))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T19:40:08.440

使您的代码工作的最简单方法是使用函数名称而不是`recur`：

```
(defn recursive-reverse [coll]
  (loop [coll coll]
    (if (< (count coll) 2) '(coll)
      (conj (first coll) (recursive-reverse (rest coll)))
      ))) 
```

当然，对于足够大的输入，它会使调用堆栈变得巨大并出错。

这是另一种编写尾调用友好版本的递归反向的方法：

```
(defn recursive-reverse [s]
  (letfn [
    (my-reverse [s c]
      (if (empty? s)
        c
        (recur (rest s) (conj c (first s)))))]
    (my-reverse s '()))) 
```

它从输入列表的头部提取项目并将它们添加到累加器列表的头部。

“尾部位置”仅表示`recur`函数在返回之前所做的最后一件事。这与您的“自然递归”解决方案不同，在该解决方案中，函数在调用自身和返回之间仍有工作要做。

# c# - 从任何找到的标记中投影出已知的增强现实标记位置

> ID：10864175
> 
> 赞同：0
> 
> 时间：2012-06-02T16:47:30.470
> 
> 标签：c#, math, xna, computer-vision, augmented-reality

我有一组从 0-5 索引的方形标记。这些标记由与其父级的偏移量和一组旋转 (x,y,z) 表示。父母是另一个标记（0-5）。例如，我可以让标记 0 作为根标记，1 是 0 的子标记，偏移量 (x:10,y:0,z:5) 和旋转 (x:0.5,y:0.1,z:0)， 2 是 1 的孩子，3 是 0 的孩子，依此类推。

要从基本标记中找到标记的相对 3D 位置，您只需链接由偏移和旋转形成的变换矩阵。

该过程的第二步是从摄像机视图中检测这些标记。我使用类似于 ARToolkit 的 ALVAR 标记跟踪器完成了这项工作。我正在使用一个包装器，它允许我以 XNA 矩阵格式访问每个检测到的标记的相机变换矩阵（这是通过包装器从 OpenGL 格式更正的）。

我想测试检测到的标记模型与我定义的模型的匹配程度。为此，我选择一个检测到的标记作为“基础”标记，并从中重新投影出定义的标记模型。

使用 XNA 的代码是这样的：

首先，我们从 0（根）标记找到“基础”标记的相对变换：

```
Matrix globalTransformToPerform=Matrix.Identity;

//Find the markerIDTOBAse on
int mibo = 0;
foreach (Bone b in model.bones)
{
   foreach (Marker m in b.markers)
   {
       if (mibo != markerIDToBaseOn)
       {
           mibo++;
           continue;
        }
        else
        {
           //Chain Marker transform
           Matrix markerTransform =
                             Matrix.CreateRotationZ(m.z) *
                             Matrix.CreateRotationX(m.x) *
                             Matrix.CreateRotationY(m.y) *
                             Matrix.CreateTranslation(m.offset);

            //Add bone transform
            markerTransform *= Matrix.CreateRotationZ(MathHelper.ToRadians(b.z)) *
                             Matrix.CreateRotationX(MathHelper.ToRadians(b.x)) *
                             Matrix.CreateRotationY(MathHelper.ToRadians(b.y)) *
                             Matrix.CreateTranslation(b.Offset);

            //Chain parents transforms
            Bone parent = b.parent;
            while (parent != null)
            {
                 Matrix parentLocalTransform = Matrix.CreateRotationZ(MathHelper.ToRadians(parent.z)) *
                                               Matrix.CreateRotationX(MathHelper.ToRadians(parent.x)) *
                                               Matrix.CreateRotationY(MathHelper.ToRadians(parent.y)) *
                                               Matrix.CreateTranslation(parent.Offset);

                 markerTransform *= parentLocalTransform;

                 parent = parent.parent;
            }
                 globalTransformToPerform = markerTransform;
                 mibo++;
          }
       }
 } 
```

现在，对于每个标记的每个角，我们根据“基础”标记在屏幕上找到它的预期 2D 投影位置。

```
 foreach (Bone b in model.bones)
 {
    foreach (Marker m in b.markers)
    {
        //foreach of the corners...
        for (int i = 0; i < 4; i++)
        {

            Matrix cornerTransform = Matrix.CreateTranslation(Global.cornerModel[i]);

            //Chain Marker transform
             Matrix markerTransform = cornerTransform *
                                      Matrix.CreateRotationZ(m.z) *
                                      Matrix.CreateRotationX(m.x) *
                                      Matrix.CreateRotationY(m.y) *
                                      Matrix.CreateTranslation(m.offset);

            //Add bone transform
            markerTransform *= Matrix.CreateRotationZ(MathHelper.ToRadians(b.z)) *
                               Matrix.CreateRotationX(MathHelper.ToRadians(b.x)) *
                               Matrix.CreateRotationY(MathHelper.ToRadians(b.y)) *
                               Matrix.CreateTranslation(b.Offset);

            //Chain parents transforms
            Bone parent = b.parent;
            while (parent != null)
            {
                  Matrix parentLocalTransform = Matrix.CreateRotationZ(MathHelper.ToRadians(parent.z))*        Matrix.CreateRotationX(MathHelper.ToRadians(parent.x))     *
                                                Matrix.CreateRotationY(MathHelper.ToRadians(parent.y)) *
                                                Matrix.CreateTranslation(parent.Offset);

                   markerTransform *= parentLocalTransform;

                   parent = parent.parent;
             }

             //Find 3D position
             Vector3 location = (markerTransform).Translation;

             //Now project
             Vector3 v = viewPort.Project(location * scalingFactor, projectionMatrix, Matrix.CreateLookAt(new Vector3(0, 0, 3), Vector3.Zero, Vector3.Up), worldTransform*globalTransformToPerform);
              Vector2 res = new Vector2(v.X, v.Y);

              //Store result
              cornersToRet.Add(res);
         }

      }
  } 
```

问题是，标记没有按预期显示。我尝试过的事情：

*   包装器工作正常，这已经过测试
*   模型是正确的，我已经使用 XNA 将其绘制到屏幕上，并且符合预期。
*   我使用与上述代码相同的转换将模型绘制到屏幕上。

这是我运行它时发生的情况：

绿色是标记跟踪器检测到的标记，投影到屏幕上。红色是基于“基础”标记的模型的标记角。

模型如下： ![在此处输入图像描述](../Images/ac1e3cac81725f41a723abb5f86e2d0f.png)

实验： 1\. 0 是碱基标记，这个是有效的，因为从碱基的转换是相同的

![在此处输入图像描述](../Images/38ca8128b42a12cf1b9f2c0a40191611.png)

2.  1 是基础标记。这是不正确的。

任何解决此问题的帮助将不胜感激

![在此处输入图像描述](../Images/8631eb5081114cff736b1d4d428a0e99.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T04:59:43.587

这是一个很长的镜头..但是根据我在您的解释中读到的内容，您首先检测到标记#1，然后检测到标记#2，依此类推...我假设如果您沿途未能识别标记，则使以前的标记也是如此。实际上纸 - >标记＃1无法正确识别，因为下一个标记＃2不在标记＃1的右侧，因此两者都无效。正如我所说，这是一个很长的镜头，但是..您尝试将纸张顺时针旋转 90 度怎么样？

# jquery - 特定元素的 JQuery AjaxStart

> ID：10864182
> 
> 赞同：2
> 
> 时间：2012-06-02T16:48:16.043
> 
> 标签：jquery, ajax

我的页面上有 2 个使用 Ajax 的元素。一个是简单的复选框（设置默认值），另一个是由链接触发的弹出窗口。弹出窗口必须加载一堆元素，所以我有一个由 ajaxStart() 触发并隐藏在 ajaxStop() 处的“正在加载...”覆盖 div。

一切正常，除了复选框和弹出窗口都触发了 ajaxStart() 加载覆盖。它对复选框来说很烦人，因为它是我不想要的 div 的快速“闪烁”。

我的问题：我如何只为页面上的特定元素而不是页面上的每个 Ajax-able 元素触发 AjaxStart？

* * *

HTML

```
<input type="checkbox" id="defaultproject"  />
<a class="openDialog" data-dialog-id="subscriberDialog" data-dialog-title="Project Subscriber" href="/Project/CreateSubscriber/1020" id="newsubscriber">Add Subscriber</a> 
```

Javascript

```
 //POPUP 
    $(document).ready(function () {
    $(".openDialog").live("click", function (e) {
        e.preventDefault();

        $("<div></div>")
            .addClass("dialog")
            .attr("id", $(this).attr("data-dialog-id"))
            .appendTo("body")
            .dialog({
                title: $(this).attr("data-dialog-title"),
                close: function () { location.reload() },
                modal: true,
                draggable: false,
                resizable: false,
                width: 500

            })
            .load(this.href);
    });

    $(".close").live("click", function (e) {
        e.preventDefault();
        $(this).closest(".dialog").dialog("close");
    });  

    //CHECKBOX
    $("#defaultproject").change(function () 
    {

     var isitchecked = document.getElementById("defaultproject").checked

     $.ajax({
        url: '@Url.Action("SetDefaultProject")',
        data:  {"id": ProjectId, "isitchecked": isitchecked },
        type: 'POST',
        cache: 'false',
        success: function (response) {
            document.getElementById("defaultproject").disabled = "disabled";
        },
        error: function (xhr) {
            alert('There was an error.  Please try again');
            document.getElementById("defaultproject").checked = ""
        }
    });

   });

    //SHOW LOADING DIV
    //*** THIS IS WHERE I'M HAVING PROBLEMS

    $('.openDialog').ajaxStart(function () {
        $('#loadingdiv').show();
    }).ajaxStop(function () {
        $('#loadingdiv').hide();
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T17:27:30.667

为什么要使用事件？如果它仅特定于 pop 使用回调函数：

```
$(".openDialog").live("click", function (e) {
    e.preventDefault();

    $('#loadingdiv').show();
    $("<div></div>")
        .addClass("dialog")
        .attr("id", $(this).attr("data-dialog-id"))
        .appendTo("body")
        .dialog({
            title: $(this).attr("data-dialog-title"),
            close: function () { location.reload() },
            modal: true,
            draggable: false,
            resizable: false,
            width: 500

        })
        .load(this.href,function(){
            $('#loadingdiv').hide();
        });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T17:05:20.600

jQuery 似乎没有向 ajaxStart 传递任何东西，让您知道启动了什么 ajax 请求。

因此，最好只处理 ajax 调用源中的区别，而不是尝试在 ajaxStart 处理程序中处理它。

你可以通过一个全局变量来实现这一点。声明一个全局变量，如

```
 var checkBoxAjax = false; 
```

然后在放置复选框ajax调用之前使其成为真的

```
 $("#defaultproject").change(function () 
  {
   checkBoxAjax = true;

 var isitchecked = document.getElementById("defaultproject").checked

 $.ajax({
    url: '@Url.Action("SetDefaultProject")',
    data:  {"id": ProjectId, "isitchecked": isitchecked },
    type: 'POST',
    cache: 'false',
    success: function (response) {
        document.getElementById("defaultproject").disabled = "disabled";
    },
    error: function (xhr) {
        alert('There was an error.  Please try again');
        document.getElementById("defaultproject").checked = ""
    }
}); 
```

});

并在您的 ajaxStart 添加一个检查

```
$('.openDialog').ajaxStart(function () {
    if(!checkBoxAjax)   
        $('#loadingdiv').show();
    else
        checkBoxAjax = false;
}).ajaxStop(function () {
    $('#loadingdiv').hide();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T17:09:31.300

这里的问题是，将 ajax 调用绑定到特定的 dom 对象仅特定于加载函数或设置上下文时。

因此，整个任务不是确定性的。考虑以下示例：

```
$.ajax({
   url: "example.com",
   success: function(response) {
       $('.openDialog').html(response);
   }
}); 
```

由于调用`$.ajax`没有`.openDialog`在其选项参数中明确提及任何地方，因此无法判断成功函数是否确实将 html 加载到其中。

但是，您可以做的是在设置上下文对象时触发事件。这不是很可靠，但出于某些目的，它可能没问题。

```
(function(ajax) {
    $.fn.ajax = function(options) {
        if (options.context) {
           $(options.context).trigger("ajaxLoadStart");

            return ajax.apply(this, arguments).then(function() {
               $(options.context).trigger("ajaxLoadEnd");
            });           
        }

        return ajax.apply(this, arguments);
    };   
})($.fn.ajax); 
```

现在您可以绑定到`ajaxLoadStart`and `ajaxLoadEnd`：

```
$(document).on("ajaxLoadStart", ".dialog", function () {
    $('#loadingdiv').show();
}).on("ajaxLoadEnd", ".dialog", function () {
    $('#loadingdiv').hide();
}); 
```

（注意与**弃用**`$(document).on(event, selector, callback)`的相同） **`$(selector).live(event, callback);`**

 **现在，只要带有类的 div`dialog`作为上下文包含在 的选项对象中`$.ajax`，它就会触发`ajaxLoadStart`然后`ajaxLoadEnd`。据我所知，jQuery 的`.load()`内部调用`$.ajax`是在各个对象上设置的上下文。

## 更新

不幸的`.load`是不使用`$.ajax`上下文。因此，您还需要将触发器附加到`.load`：

```
(function(load) {
    $.fn.load = function(url, params, callback) {
        if ( typeof url !== "string")
            return load.apply(this, arguments);

        this.trigger("ajaxLoadStart");

        var done = (function(callback) {
            return function() {
                $(this).trigger("ajaxLoadEnd");

                if ($.isFunction(callback))
                    callback.apply(this, arguments);
            };
        })($.isFunction(params) ? params : callback);

        return load.call(this, url, $.isFunction(params) ? done : params, $.isFunction(callback) ? done : callback);
    };   
})($.fn.load); 
```

这两个适配器现在应该都能正常工作。但是，如果您每次升级 jquery 时都需要修改它们，因为如果 jquery 的内部工作发生变化，这很容易中断（事件的双重触发）。**

# c++ - 如何解决opencv和c ++中霍夫变换中的错误

> ID：10864187
> 
> 赞同：1
> 
> 时间：2012-06-02T16:48:41.903
> 
> 标签：c++, image-processing, opencv

```
#include <cv.h>
#include <highgui.h>
#include <math.h>

int main(int argc, char** argv)
{
    IplImage* src;
    if( argc == 2 && (src=cvLoadImage("qqqq.jpg", 0))!= 0)
    {
        IplImage* dst = cvCreateImage( cvGetSize(src), 8, 1 );
        IplImage* color_dst = cvCreateImage( cvGetSize(src), 8, 3 );
        CvMemStorage* storage = cvCreateMemStorage(0);
        CvSeq* lines = 0;
        int i;
        cvCanny( src, dst, 50, 200, 3 );
        cvCvtColor( dst, color_dst, CV_GRAY2BGR );
#if 1
        lines = cvHoughLines2( dst,
                               storage,
                               CV_HOUGH_STANDARD,
                               1,
                               CV_PI/180,
                               100,
                               0,
                               0 );

        for( i = 0; i < MIN(lines->total,100); i++ )
        {
            float* line = (float*)cvGetSeqElem(lines,i);
            float rho = line[0];
            float theta = line[1];
            CvPoint pt1, pt2;
            double a = cos(theta), b = sin(theta);
            double x0 = a*rho, y0 = b*rho;
            pt1.x = cvRound(x0 + 1000*(-b));
            pt1.y = cvRound(y0 + 1000*(a));
            pt2.x = cvRound(x0 - 1000*(-b));
            pt2.y = cvRound(y0 - 1000*(a));
            cvLine( color_dst, pt1, pt2, CV_RGB(255,0,0), 3, 8 );
        }
#else
        lines = cvHoughLines2( dst,
                               storage,
                               CV_HOUGH_PROBABILISTIC,
                               1,
                               CV_PI/180,
                               80,
                               30,
                               10 );
        for( i = 0; i < lines->total; i++ )
        {
            CvPoint* line = (CvPoint*)cvGetSeqElem(lines,i);
            cvLine( color_dst, line[0], line[1], CV_RGB(255,0,0), 3, 8 );
        }
#endif
        cvNamedWindow( "Source", 1 );
        cvShowImage( "Source", src );

        cvNamedWindow( "Hough", 1 );
        cvShowImage( "Hough", color_dst );

        cvWaitKey(0);
    }

} 
```

我将此代码用于opencv中的“霍夫变换”来检测图像中的对象。并且程序运行没有任何错误。但结果只是一个控制台窗口快速出现并快速消失。我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:08:25.260

这是你在那里得到的一些糟糕的逻辑：

*   第一：如果`argc`大于或小于 2，您的主代码将不会运行，也不会通知您。
*   第二：如果由于任何原因`cvLoadImage()`失败，您也不会收到通知。

我怀疑这两种情况之一正在发生：要么您没有使用正确数量的参数调用程序，要么`cvLoadImage()`失败（无法找到文件或不支持文件类型）。

我建议您添加适当的调试（printf 调用）以查看实际情况。

**编辑：**

几点注意事项：

*   如果您的图像正在加载`"qqqq.jpg"`并且如果您正在从 Visual Studio 中运行程序，则需要将图像放在与源代码文件相同的文件夹中（而不是放在 .exe 所在的文件夹中）；
*   如果您使用的是 Windows 并尝试使用完整路径加载图像，请不要忘记转义斜杠：`C:\\folder\\qqqq.jpg`
*   仅供参考，`argc == 2`意味着您正在使用以下格式从命令行运行应用程序：`app.exe param1`

# java - Android split() 适用于模拟器但不适用于设备

> ID：10864188
> 
> 赞同：0
> 
> 时间：2012-06-02T16:48:55.490
> 
> 标签：java, android, string, split

我目前正面临该`str.split()`功能的一个奇怪问题。首先这是我的代码：

```
 String[] seperated = content.split("<div id=\"results\" style=\"width: 175px; \">");
             Log.d("seperated length", "" + seperated.length);

             if(seperated.length>1){
                 Log.d("sep1 t2.", seperated[1]);

                 String[] sep2 = seperated[1].split("<div id=\"map\" ");

                 Log.d("sep2 t1", sep2[0]);

                 String[] sep3 = sep2[0].split("<div class=\"resultLine\">");
                 result = new String[sep3.length];
                 for(int i=1; i<sep3.length; i++){
                    String[] temp = sep3[i].split("class=\"icon1\">");
                    String[] temp2 = temp[1].split("<br>");
                    String[] temp3 = temp2[1].split("<br");
                    String[] temp4 = temp3[0].split("</a>");
                    result[i-1] = temp2[0] + " " +temp4[0];
                    Log.d("places", result[i-1]);

                 }
                 handler.sendEmptyMessage(0);
             } else {
                handler.sendEmptyMessage(1);

             } 
```

在模拟器上生成结果数组没有问题，但在设备上第一次拆分失败，没有错误或任何东西。字符串内容与模拟器上的相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:19:14.550

使用[StringUtils.split()](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#split%28java.lang.String%29)来拆分字符串，而不是使用内置的 String 方法。String.split() 参数是一个正则表达式（需要正确转义特殊字符等）这一事实会导致很多错误。

您真的不想在那儿弄乱正则表达式，您只想将字符串分成标记，对吗？

# virtualization - Qemu 检查客人是否起床

> ID：10864194
> 
> 赞同：0
> 
> 时间：2012-06-02T16:50:08.147
> 
> 标签：virtualization, qemu

我的情况是，我必须使用 qemu 远程启动 vms，然后跟踪来宾是否启动。有没有办法做到这一点？

我想如果我能得到客人的IP地址，我可以解决它，但我还没有找到找到这个的方法。

我正在使用 qemu-0.13 的自定义版本，而 libvirt 对我来说并不是一个真正的选择，因为我需要将自定义参数传递给 qemu，我读到的并不完全支持。

任何帮助或建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:23:11.380

*   您可以为您的访客机器提供静态 ip 并不断 ping 以检查它是否已启动。

*   使用 /etc/inittab 当来宾启动并配置网络时，您可以将数据包从来宾发送到主机。

*   通常来宾 ip 是 10.0.xy 并且相应的主机 ip 是 10.0.2.2（仅从来宾的视图），因此您可以从来宾 ping 主机`ping 10.0.2.2`。但是从主机到客人的 ping 是不可能的。因此，您可以创建一个反向 ssh 隧道来打开主机上的一个端口，该端口将所有到该端口的请求重定向到来宾。

# templates - 在 Jade 中扩展对象以设置属性

> ID：10864196
> 
> 赞同：8
> 
> 时间：2012-06-02T16:50:20.703
> 
> 标签：templates, attributes, pug

我希望能够传入一个带有表示元素属性的键/值对的对象。翡翠可以吗？

任何允许我将属性集合传递到我的模板中的解决方案就足够了，但是将显式声明的属性与从对象中提取的属性（如下所示）混合的能力将是理想的。

**以下语法不起作用，它只是我想做的一个例子。**

例如，如果我通过了这个：

```
{ 
    name:'username',
    value:'bob',
    attributes: {
        maxlength: 16
    }
} 
```

到这个模板：

```
input(name=name, value=value, attributes) 
```

所需的输出将是：

```
<input name="username" value="bob" maxlength="16" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-12T00:15:28.553

由于您是GitHub 上[此问题](https://github.com/visionmedia/jade/issues/664#issuecomment-32261710)的一部分，因此您可能已经知道答案。但是，对于其他任何人，这是答案：

玉：

```
input.foo(name=name value=value)&attributes(attrs) 
```

将此数据传递给您的渲染函数：

```
{
    name: 'username',
    value: 'bob',
    attrs: {
        maxlength: 16
    }
} 
```

输出：

```
<input name="username" value="bob" class="foo" maxlength="16"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:41:57.217

您需要传递对象名称或使用关键字“全局”，如下所示：

```
partial('myview', { { 
    name:'username',
    value:'bob',
    attributes: {
        maxlength: 16
    }
}, as: global }); 
```

否则，您需要为对象命名并通过该范围访问它们。

[查看文档](http://expressjs.com/guide.html#view-partials)

# magento - Magento SOAP v2：电子邮件客户跟踪号

> ID：10864206
> 
> 赞同：3
> 
> 时间：2012-06-02T16:51:59.997
> 
> 标签：magento, soap, magento-1.6

我已经能够通过 SOAP 创建一个货件并添加一个跟踪号，但我一直在弄清楚如何通过 API 向客户发送他们的跟踪号。创建货件时，我可以发送电子邮件，但必须先创建货件，然后才能添加跟踪号。我意识到我可以创建自己的电子邮件并将其发送出去，但如果可能的话，我宁愿坚持使用 API。

我可以使用 SOAP 方法来执行此操作吗？

创建跟踪号：

```
public function addTrackingNumber($trackingNumber)
{

    $shipmentID = $this->createShipment();
    return $this->client->salesOrderShipmentAddTrack(
                $this->sessionId,
                $shipmentID,
                "ups",
                "UPS",
                $trackingNumber
            );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-14T21:09:13.973

发货 API 有一个未记录的`sendInfo`端点。我不确定它是什么时候添加的，所以它可能不在你的 Magento 版本中，但你可以在`app/code/core/Mage/Sales/Model/Order/Shipment/Api.php`. 在 Magento 1.9.1.0 中，它看起来像这样：

```
public function sendInfo($shipmentIncrementId, $comment = '') 
```

您需要从这里向后工作，以获得您正在使用的 API 版本的正确代码。这是我的请求的样子（V1）：

```
$result = $client->call($session, 'sales_order_shipment.sendInfo', array('100000001', 'an optional comment')); 
```

在您的应用程序中，我怀疑它看起来像这样：

```
return $this->client->salesOrderShipmentSendInfo($shipmentID, 'an optional comment'); 
```

因此，您需要进行三个 API 调用：第一个创建货件（**不**发送通知电子邮件），第二个添加跟踪号，第三个最终发送通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T09:42:57.803

这个问题有点过时了，但我遇到了同样的问题，并通过查看该方法的 Magento [API](http://www.magentocommerce.com/api/soap/sales/salesOrderShipment/sales_order_shipment.create.html)解决了这个问题。
它说如果您也想通知用户，则必须使用参数创建货件。

# facebook - 当我将链接粘贴到帖子/状态/评论中时，如何让 Facebook 显示我的网站徽标？

> ID：10864208
> 
> 赞同：37
> 
> 时间：2012-06-02T16:52:12.470
> 
> 标签：facebook, thumbnails

Facebook 有时会做这种非常巧妙的事情，他们会在状态更新中显示您链接到的网站的缩略图预览。它通常是网站的标志。

[![脸书状态](../Images/1d949155a81cb44f81730df63f5de833.png)](https://i.stack.imgur.com/gcrE6.png)

我想知道让这个对我的网站起作用的诀窍是什么，所以如果我要分享[http://www.example.com](http://www.example.com)，我会在那个预览框中看到我的网站的徽标/favicon。我该怎么做？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-02T16:57:41.667

在这个 facebook 调试器工具中尝试您的网站。

[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

它会告诉你缺少什么。例如。在页眉下方

```
<meta property="og:image" content="[url to image]" />
<meta property="og:title" content="[page name]" />
<meta property="og:description" content="[content description]" /> 
```

根据您的网站的构建方式，有不同的方法。例如。[这个](http://wordpress.org/extend/plugins/facebook-and-digg-thumbnail-generator/)Wordpress 插件为页面上的每个图像创建一个链接，因此您可以在您的徽标和页面上的任何其他帖子图像之间进行选择。

**2017 年更新**：现在建议为您的网站[注册一个 Facebook 应用 ID](https://developers.facebook.com/docs/apps/register)，否则调试器会给您一个错误。[更多标签和信息](https://developers.facebook.com/docs/sharing/webmasters)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T16:57:01.467

您可以将其放在页面的源代码中：

`<link rel="image_src" href="http://somesite.org/img/title.jpg" />`

# python - Django保存方法和图像处理

> ID：10864211
> 
> 赞同：0
> 
> 时间：2012-06-02T16:52:30.090
> 
> 标签：python, django

在模型中覆盖保存方法时，我无法以正确的格式保存图像。

我的代码：

```
class Whatever(models.Model):
    image = models.ImageField(upload_to="whatever")

    def save(self, *args, *kwargs):
        # Here I save file to the disk
        super(Whatever, self).save(*args, **kwargs)
        # Then i get this file
        filename = MEDIA_ROOT + '/' + self.image.name
        # And do something with it
        img = cut_circle(filename, (42, 42), 42)
        # Now save it
        img.save(filename+) 
```

这就是问题所在，我需要结果图像的透明度，但用户可以上传到服务器错误格式，例如 jpeg。

那么，我如何更改base中的文件格式？我尝试了self.image.save，但我认为这种方式很复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:06:15.953

我不知道您使用的是什么库`cut_circle`，但如果是`PIL`，它可以通过将其作为格式关键字参数传递来将图像保存为 PNG；所以你可以这样做：

```
img.save(filename,format='png') 
```

这对 JPG 来说似乎很好；但是，如果您想保留 gif 等格式的透明度，您将需要明确地处理[Nadia 所涵盖](http://nadiana.com/pil-tips-converting-png-gif)的格式。

# mongodb - 如何更新 Blob 属性？

> ID：10864221
> 
> 赞同：0
> 
> 时间：2012-06-02T16:54:32.723
> 
> 标签：mongodb, playframework, morphia, gridfs

是否应该在设置新值之前删除现有属性？每次更新属性时，我的实现都会不断向文件和块添加新条目。

```
Blob photo;

public void setPhoto(File file){
    String type = MimeTypes.getContentType(file.getName());
    photo = new Blob(file, type);
    save();
} 
```

来电：

```
foo.setPhoto( barFile ); 
```

将按预期将文件存储在 gridfs 中。再次调用它（用新照片更新），以前的文件保留在 mongodb 中，并且属性返回错误的文件。

```
foo.photo.get(); 
```

查看 playmorphia 的示例，删除不是必需的，但我发现它是必要的。

playmorphia v1.2.7 模块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:48:18.260

您可能想在放入新插件后自己删除。我建议跟进播放插件的人，看看是否有一个选项可以自动执行此操作并返回最新照片。

如果您想每次都获取最新的文件，我认为您想存储对文件名的引用，而不是上传文件的 id。所以它比_id更像是一个查询。再一次，可能需要跟进播放插件的人。

# java - Java中的动态变量名

> ID：10864226
> 
> 赞同：-3
> 
> 时间：2012-06-02T16:54:43.960
> 
> 标签：java, arraylist, hashmap, dynamic-variables

我正在读取一个逗号分隔的文件并将内容拆分为一个数组。我在 while 循环中执行此操作，因此我希望我的数组动态具有不同的名称，因为文件中的最后一行最终会覆盖我的数组内容。下面是我所涉及的代码片段。

```
 TextView txt1;
  TextView txt2;

  Scanner in = new Scanner(result);
  in.nextLine(); //skip first line

  while(in.hasNextLine()){
    String line = in.nextLine();
    String []dataset = line.split(",");//store values in array

    txt1.setText(dataset[4]);//Should be 5th element of first line
    txt2.setText(dataset[4]);//Should be 5th element of second line
  } 
```

从上面的代码可以看出，我想在文件的第一行将 txt1 的值设置为 val，类似于 txt2。我读过 HashMaps 或 Maps 或 ArrayList 会对我有所帮助，但我不确定如何实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T17:01:37.127

您需要将数据集数组添加到列表中。所以，在你的 while 循环之前：

```
List datalist = new ArrayList(); 
```

然后：

```
String []dataset = line.split(",");//store values in array 
```

添加：

```
datalist.add(dataset); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T17:05:59.070

如果我理解您想要正确执行的操作，那么您希望 txt1 等于第一行数组中的第 5 个元素，而 txt2 在第 2 行包含第 5 个元素的文本（您的评论说 3ed 元素，但代码是拉第五）。

这可以通过条件和计数器来实现。

```
Scanner in = new Scanner(result);
   in.nextLine(); //skip first line
   int count = 0;
   while(in.hasNextLine()){

      String line = in.nextLine();
      String []dataset = line.split(",");//store values in array
      if (count == 0){
          txt1.setText(dataset[4]);//Should be 3 element of first line
      }else if (count ==1){
          txt2.setText(dataset[4]);//Should be 3 element of second line
      }
    count++;
   }
  } 
```

编辑：

所以现在我知道你想要一个数组，设置很容易。如果您事先不知道要处理的数据量，则外部数组应该是可变的。

```
ArrayList<String[]> dataSet = new ArrayList(10000)//number should be a guess at the amount of data
Scanner in = new Scanner(result);
   in.nextLine(); //skip first line
   while(in.hasNextLine()){

      String line = in.nextLine();
      String []dataset = line.split(",");//store values in array
      dataSet.add(dataset);
   }
   txt1.setText(dataSet.get(0)[4]);
   txt2.setText(dataSet.get(1)[4]);
  } 
```

如果您愿意，您还可以创建这些文本标签并以类似的方式存储它们，并随时设置文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T17:28:25.310

正要评论迈克尔的帖子，但没有足够的空间！如果您期望输入中有任意数量的行，并希望在循环之外处理它们，您可以将 Michael 的方法与我的方法结合起来，最终得到：

```
 Scanner in = new Scanner(result);
   in.nextLine(); //skip first line

   List txtList = new ArrayList(); //create list

   while(in.hasNextLine()) {
     String line = in.nextLine();
     String[] dataset = line.split(","); //store values in array

     Text txt1 = new Text(); //assuming txt1 is an instance of "Text"
     txt1.setText(dataset[4]); //Should be 5th element of first line

     txtList.add(txt1); //add 5th element of each line to list
   }

   /*
    * txtList now contains instance of Text containing the 5th value from each
    * line of input
    */ 
```

# vb.net - sqlite vb.net multi 从数据表中插入一个命令

> ID：10864235
> 
> 赞同：0
> 
> 时间：2012-06-02T16:56:35.063
> 
> 标签：vb.net, sqlite, datatable

我有这段代码，但它只插入了 54 条记录中的 7 条记录。我确信数据表中的记录很好。

```
Dim dt As DataTable
Dim sc As SQLiteCommand
Dim Script As String = Nothing
Dim Script2 As String = Nothing
Dim Script3 As String = Nothing
Script = "insert into paperdate(dtime,papernum,paperstat,user) select " & "'" & dt.Rows(0)(0) & "'" & " as " & "dtime" & "," & dt.Rows(0)(1) & " as " & "papernum" & "," & "'" & dt.Rows(0)(2) & "'" & " as " & "paperstat" & "," & "'" & dt.Rows(0)(3) & "'" & " as " & "user"
For i As Integer = 1 To dt.Rows.Count - 1
Script2 = " union select " & "'" & dt.Rows(i)(0) & "'" & "," & dt.Rows(i)(1) & "," & "'" & dt.Rows(i)(2) & "'" & "," & "'" & dt.Rows(i)(3) & "'"
Script3 = Script3 & Script2
Next
sc = New SQLiteCommand(Script & Script3, mycon)
sc.ExecuteNonQuery()
sc.Dispose() 
```

希望有大神解答，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:14:58.737

可能是您在第二次选择中有重复的记录。如果是这种情况，那么解决方案是使用`UNION ALL`而不是`UNION`.

> 使用 UNION ALL 运算符创建的复合 SELECT 返回 UNION ALL 运算符左侧的 SELECT 中的所有行，以及右侧的 SELECT 中的所有行。UNION 运算符的工作方式与 UNION ALL 相同，只是从最终结果集中删除重复行。

参考：[http ://www.sqlite.org/lang_select.html](http://www.sqlite.org/lang_select.html)

如果不是这样，那么您可能想要跟踪 SQL，并`SELECT`直接在 sqlite 客户端中运行这些部分。

**更新**

根据您的评论，这是您将对代码进行的更改：

```
Script2 = " union select " & "'" & dt.Rows(i)(0) & "'" & "," & dt.Rows(i)(1) & "," & "'" & dt.Rows(i)(2) & "'" & "," & "'" & dt.Rows(i)(3) & "'" 
```

变成

```
Script2 = " union all select " & "'" & dt.Rows(i)(0) & "'" & "," & dt.Rows(i)(1) & "," & "'" & dt.Rows(i)(2) & "'" & "," & "'" & dt.Rows(i)(3) & "'" 
```

# android - 如果没有 internetConnection，ProgressDialog Dismiss 和 AlertDialogShow

> ID：10864236
> 
> 赞同：0
> 
> 时间：2012-06-02T16:56:46.483
> 
> 标签：android, progressdialog, android-alertdialog, internet-connection

我正在为我的应用程序使用 Web 服务。方法 callWebService() 中的数据正在增加。我在填充我的 ListView 时显示 ProgressDialog。我还想检查是否没有网络连接来关闭 ProgressDialog 并显示 AlertDialog用户。有人可以帮我吗这是我的代码

```
 myProgressDialog = ProgressDialog.show(ExchangeMoneMK1Activity.this,
                     "Please wait...", "Loading...", true);
         Thread thread = new Thread(this);
         thread.start();

 private boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager 
          = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
    return activeNetworkInfo != null;
}

private Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        switch(msg.what){
        case 0:

            myProgressDialog.dismiss();
            int resID = R.layout.list_item;
            aa = new ExchangeRateAdapter(ExchangeMoneMK1Activity.this, resID,currencyList);

            lw.setAdapter(aa);
            break;
        }

    } 
```

};

```
public void run() {
    // TODO Auto-generated method stub

    try {
        if(isNetworkAvailable())
        callWebService();
        handler.sendEmptyMessage(0);
    }

     catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

我还没有警报对话框，因为如果没有互联网连接，进度条不会消失，我已经放入了 AndroidManifest 权限

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:11:46.710

finally 也与 try catch 和 put handler.sendEmptyMessage(0) 一起使用；在最后...

因为我认为你得到了任何 excption 并且你的流程跳转到 callWebService() ..... 而没有到达 handler.sendEmptyMessage(0); 线........

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T17:14:47.593

使用异步任务。它会简单得多。一般模式如下。可能会有一些小的编译错误，但是，这会给你一个想法。

```
class MyTask extends AsyncTask<Void, Void, ArrayList> {
    protected Void doInBackground(Void... params) {
        ArrayList currencyList;
        if(isNetworkAvailable())
            currencyList = callWebService();
        return currencyList;
    }
    void onPreExecute() {
        myProgressDialog = ProgressDialog.show(ExchangeMoneMK1Activity.this,
                 "Please wait...", "Loading...", true);
    }
    void onPostExecute(ArrayList currencyList) {
        myProgressDialog.dismiss();
        if (currencyList == null) {
            //Handle error
            return;
        }
        int resID = R.layout.list_item;
        aa = new ExchangeRateAdapter(ExchangeMoneMK1Activity.this, resID,currencyList);

        lw.setAdapter(aa);
    }
} 
```

# php - Mod_security 有时会阻止我的 ajax 脚本 - 我怎样才能找出原因？

> ID：10864238
> 
> 赞同：1
> 
> 时间：2012-06-02T16:57:19.437
> 
> 标签：php, mod-security

我已经使用 php 和 mysql 构建了某种 CMS 应用程序。一切都在 localhost 上运行良好，所以我把它移到了网络上。现在，当有人添加新文章时，我遇到了奇怪的问题。有时它只是正常添加，有时用户会得到这个错误：

> 不可接受 在此服务器上找不到请求资源 /path_to/file.php 的适当表示。

在 Google 上呆了一段时间后，我发现 mod_security 正在阻止我的脚本（或类似的东西）。有什么方法可以让我看到它为什么会阻止我的脚本？

我对 mod_security 不是很熟悉，但据我所知，它可以通过强制执行一些规则来为 Web 应用程序提供另一个级别的安全性。那么我可以查看哪个规则阻止了我的应用程序以便我可以修复它吗？

一些附加信息：

/path_to/file.php（发生此 Not Acceptable 错误的文件）是仅用于 AJAX 的 .php 文件。我正在通过 POST 向它发送一些数据，并且我也在发送一些文件（图片、文本文档等）。服务器上的文件上传限制为 20MB。目前我正在发送 17 张图片（约 10MB），但仍然失败（我收到 Not Acceptable 错误）。但我也尝试只发送一张图片和文件，并且没有问题。

编辑：我正在使用共享主机（使用 CPanel）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:04:31.513

mod_security 能够在日志文件中记录所有块。您可以在该日志文件中确切看到它是什么规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T20:55:30.753

在大多数情况下，我使用 Emil 指出的日志文件。

mod_Security 创建两个单独的日志文件，Apache 在自己的日志中报告错误。两者都有用。实际上，如果您在 Apache 中发现错误，它应该为您提供 mod_security 文件和阻止您的 POST 工作的规则的行号。

现在，在大多数情况下，他们检测到无效的标头，通常是 HTTP 协议所期望的缺少某些东西（尽管他们测试了一些不需要但在 99.9% 的时间存在的东西。）

在 mod_security 提供的两个文件中，不太可能没有创建其中一个：审计文件在将事务的所有详细信息写入磁盘时使用大量磁盘空间。

在 POST 的情况下，变量的数量或变量是否未正确定义是 mod_security 检测到的常见错误。

在 Ubuntu (Debian) 上，日志文件最终位于 /var/log/apache2/...（Apache 输出）和 /var/log/apache2-more/...（mod_security）下。

# automatic-ref-counting - 关闭模式视图控制器后自动释放崩溃

> ID：10864239
> 
> 赞同：1
> 
> 时间：2012-06-02T16:57:37.367
> 
> 标签：automatic-ref-counting, modalviewcontroller, autorelease

我正在使用以下代码（http://stackoverflow.com/questions/44712​​89/how-to-filter-nsfetchedresultscontroller-coredata-with-uisearchdisplaycontroll）创建的模态视图控制器中呈现一个表格视图，因此我可以使用核心数据，NSFetchedResults和一个 UISearchbar。我终于在表格视图/搜索/详细视图结束时一切正常，但我刚刚发现了一个我似乎无法弄清楚的显示停止器。

当我使用以下方法关闭 tableview 时：

```
 - (IBAction)doneButtonPressed:(id)sender {[self dismissModalViewControllerAnimated:YES];} 
```

模态视图关闭，主视图加载，然后应用程序崩溃。它已经够远了，我可以从主视图控制器调用这个 nslog：

```
-(void) viewDidAppear:(BOOL)animated { NSLog(@"do I crash");} 
```

我在这里遇到了错误的访问错误：

```
 int main(int argc, char *argv[]) 
   {
       @autoreleasepool {
         return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));}} 
```

我相信这些问题可能与弧有关。我使用的代码模板不是用于arc的，所以我做了以下更改：

```
 @property (nonatomic, retain) NSManagedObjectContext *managedObjectContext;
    @property (nonatomic, retain, readonly) NSFetchedResultsController *fetchedResultsController; 
```

到

```
 @property (nonatomic, strong) NSManagedObjectContext *managedObjectContext;
    @property (nonatomic, strong, readonly) NSFetchedResultsController *fetchedResultsController;

    @property (nonatomic, retain) NSFetchedResultsController *fetchedResultsController;
    @property (nonatomic, retain) NSFetchedResultsController *searchFetchedResultsController;
    @property (nonatomic, retain) UISearchDisplayController *mySearchDisplayController; 
```

到

```
 @property (nonatomic, strong) NSFetchedResultsController *fetchedResultsController;
    @property (nonatomic, strong) NSFetchedResultsController *searchFetchedResultsController;
    @property (nonatomic, strong) UISearchDisplayController *mySearchDisplayController; 
```

此外，我从 didreceivememorywarning 中删除了以下内容：

```
 [fetchedResultsController_ release];
   [searchFetchedResultsController_ release]; 
```

并更改了以下内容 - (NSFetchedResultsController *)fetchedResultsController

```
 return [[fetchedResultsController_ retain] autorelease]; 
```

到

```
 return fetchedResultsController; 
```

并在 - (NSFetchedResultsController *)searchFetchedResultsController

```
 return [[searchFetchedResultsController_ retain] autorelease]; 
```

到

```
 return searchFetchedResultsController; 
```

我完全被难住了。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:36:15.510

嗯，问题解决了。我无法想象我是第一个或最后一个遇到这个问题的人，所以如果你遇到类似的困难......

在搜索了搜索代码之后（我认为它必须与此有关，因为如果我在关闭模态视图之前进行搜索，它不会崩溃），我仍然找不到任何错误。

然而，我意识到我正在以编程方式创建我的 searchBar 和 searchDisplayDelegate。一时兴起，我决定在故事板中创建 searchBar 和 displayDelegate，然后将它们链接起来。添加它们后，我从 loadView 中注释掉：

```
//  UISearchBar *searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, self.tableView.frame.size.width, 44.0)];
//   self.mySearchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:searchBar contentsController:self]; 
```

此外，在情节提要中添加它们会在 viewDidUnload 中自动创建以下内容：

```
[self setSearchBar:nil];
[self setMySearchDisplayController:nil]; 
```

中提琴！没有更多的崩溃......我认为这只是 mySearchDisplayController 没有正确卸载。希望对其他人有所帮助！

# ms-access-2007 - 计算平均每周

> ID：10864246
> 
> 赞同：2
> 
> 时间：2012-06-02T16:59:11.117
> 
> 标签：ms-access-2007

我在 ms-access 中有一个表格，用于保存有关每日来电的数据。通常有人每天可以回答 5-7 个。其中一个字段名为“completed_date”。当此日期不为空时，表示呼叫已被应答/完成。

如何返回每周的平均呼叫应答？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:00:53.593

使用 DatePart 函数根据您的`completed_date`值计算周数。

```
SELECT
    DatePart("ww", completed_date) AS week_number,
    Count(*)
FROM YourTable
WHERE completed_date Is Not Null
GROUP BY DatePart("ww", completed_date); 
```

这可能适用于单个日历年内的数据。但是，如果您的数据跨度超过一年，请`Year(completed_date)`作为附加字段表达式和 GROUP BY 项包括在内。

Note`DatePart()`接受可选参数，因此您可以指定`firstdayofweek`和`firstweekofyear`。如果您的组织的周编号策略与 不兼容`DatePart()`，您可以创建一个日历表来映射日期和周数，然后将该日历表与您的原始数据源表连接起来。

# javascript - 禁用 HTML 画布上的右键单击上下文菜单？

> ID：10864249
> 
> 赞同：44
> 
> 时间：2012-06-02T16:59:19.860
> 
> 标签：javascript, jquery, html, canvas

使用 HTML5 和 Canvas 制作绘画应用程序。

我想我希望有一个类似于 Paint 和 Photoshop 之类的应用程序的系统，您可以在其中选择主色和辅助色，并使用左键单击以使用主色进行绘制，然后单击右键以使用辅助色进行绘制。

但是，在松开鼠标右键后，浏览器中的上下文菜单会弹出（查看图像、保存图像、全选）。

这可以优雅地禁用吗？我不希望它成为一个只适用于某些浏览器的骇人听闻的解决方案，如果可能的话。

谢谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-02T17:09:12.383

**你可以使用这个：**

```
$('img').bind('contextmenu', function(e){
    return false;
}); 
```

请参阅此[工作示例](http://jsfiddle.net/zuul/hpUWD/2/)！

**使用最新的 jQuery：**

```
$('body').on('contextmenu', 'img', function(e){ return false; }); 
```

**注意：**您应该使用比`body`可能的更窄的东西！

**或者没有 jQuery，在画布上应用：**

```
canvas.oncontextmenu = function(e) { e.preventDefault(); e.stopPropagation(); } 
```

* * *

## 已编辑

更新了[Fiddle 示例](http://jsfiddle.net/zuul/hpUWD/)以显示上下文菜单仅限于画布而不是图像。

**查询**

```
$('body').on('contextmenu', '#myCanvas', function(e){ return false; }); 
```

**HTML 示例**

```
<canvas id="myCanvas" width="200" height="100">
  Your browser does not support the canvas element.
</canvas>

<img src="http://db.tt/oM60W6cH" alt="bubu"> 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-02-24T16:12:44.210

试试这个

```
canvas.oncontextmenu = function (e) {
    e.preventDefault();
}; 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-10-06T11:51:51.537

这将禁用画布上的上下文菜单。

```
<canvas oncontextmenu="return false;"></canvas> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-10-12T21:26:19.753

与其他答案相比，这应该使用更现代（和可读）的语法来完成这项工作。

```
const canvas = document.getElementById('myCanvas');
canvas.oncontextmenu = () => false; 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-06-02T17:04:29.550

尝试添加`oncontextmenu="return false;"`body 标签。它应该禁用上下文菜单。

如果我相信这个来源： http: [//javascript.about.com/library/blnoright.htm](http://javascript.about.com/library/blnoright.htm)这是谷歌对您应该尝试过的查询“javascript disable right click”的第一个结果。

编辑 ：

*   关于画布我不知道该元素，但是您是否尝试 `stopPropagation()`在函数结束后调用事件元素？
*   或以前在画布标签上的解决方案而不是正文...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-15T21:28:16.127

为了避免对 Jquery Js 的依赖，我不仅在画布上尝试了 preventDefault 事件，还在其他元素中尝试了此事件。关于我查看此页面的 crossBrowser：[Events - Contextmenu](https://www.quirksmode.org/dom/events/contextmenu.html)。

您可能需要验证返回未定义但它用作演示的项目。

```
(function(w, d){
	d.body.addEventListener('contextmenu', function(event){
		var blockContext = [
			{ type: 'tag', value: 'canvas'},
			{ type: 'id',  value: 'fooId'},
			{ type: 'tag',  value: 'img'},
		];
		blockContext.map(
			elm => {
				var _elm

				if(elm.type == 'tag') _elm = d.querySelector(elm.value);
				if(elm.type == 'id') _elm = d.getElementById(elm.value);

				if(event.target == _elm) event.preventDefault();
			}
		);
	});
})(window, document);
```

```
canvas {
background-color: grey;
}
```

```
<canvas></canvas>
<img src="https://via.placeholder.com/200x200"/>
<p id="fooId">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin eget lorem luctus nisi fermentum imperdiet in ac tortor. Vestibulum interdum risus vitae metus finibus pretium. Nullam facilisis lacus nec pellentesque faucibus. In tempus lorem ut mi sodales, vitae scelerisque quam pretium. Duis venenatis enim in nunc laoreet venenatis. Aliquam at magna vitae purus tincidunt posuere. Donec dictum pharetra ipsum, eu auctor lorem aliquet vitae. Donec faucibus metus quis laoreet ultricies. Aliquam aliquet, lectus a tempor tristique, diam sem auctor felis, sed ultrices magna nunc ut sem. Curabitur congue diam lacinia risus sodales luctus. In nec maximus ex. Nulla ultrices diam a erat imperdiet, nec convallis nisl pulvinar. Etiam quis placerat arcu, eu elementum felis. Phasellus lectus massa, faucibus faucibus nibh ut, dignissim tempor neque.
<p/>
```

# haskell - 如何正确定义像“any”这样的函数

> ID：10864254
> 
> 赞同：4
> 
> 时间：2012-06-02T16:59:42.877
> 
> 标签：haskell

学习Haskell，我正在尝试编写一个`takeIf`给定条件的函数，并且列表返回满足条件的所有列表元素。

所需输出的示例：

```
takeIf (>0) [] --> []
takeIf (>0) [-1, 0, 1, 2] --> [1,2] 
```

我试过这个定义：

```
takeIf cond [] = []
takeIf cond (x:xs) = if (cond x) 
                    then x:(takeIf cond xs)
                    else []:(takeIf cond xs) 
```

但它不起作用。

我的第一个问题是：我有

```
:t takeIf --> ([a] -> Bool) -> [[a]] -> [[a]] 
```

为什么？为什么不：

```
:t takeIf --> (a -> Bool) -> [a] -> [a] 
```

我怎样才能让这个代码工作？

这是我得到的错误：

![在此处输入图像描述](../Images/1e3101616c5491ab926c3cb3bcd8d289.png)

如果有帮助，我正在使用`ghci`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-02T17:06:56.207

```
[]:(takeIf cond xs) 
```

在这里，您尝试将 [] 作为新的第一个元素添加到`takeIf cond xs`. 由于`[]`是一个列表，GHC 从中推断出结果`takeIf cond xs`必须是一个列表的列表。由于 takeIf 的结果与其参数具有相同的类型，这意味着`xs`也必须是列表的列表。并且由于`x`是 的一个元素`xs`，`x`因此必须是一个列表。

似乎您`[]:`的意思是“在列表中不添加任何内容”，但`[]`不是什么都没有，它是空列表。`[] : []`，不给你`[]`，它给你`[[]]`。同样`[] : [1,2,3]`会给你`[[], 1, 2, 3]`- 除了那不是很好的类型，所以它真正给你的是一个类型错误。

如果您不想在列表中添加任何内容，请不要在列表中添加任何内容，即只需使用`someList`而不是`[] : someList`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T17:14:51.197

因为 sepp2k 比我快 - 我只想补充一点，您可能想看看[`filter`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3afilter)它的源代码，这正是您尝试重新实现的功能。
这是实际来源

```
filter :: (a -> Bool) -> [a] -> [a]
filter _pred []    = []
filter pred (x:xs)
  | pred x         = x : filter pred xs
  | otherwise      = filter pred xs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T10:24:15.090

另一种选择是折叠，例如

```
filter' f = foldr go [] where 
   go x xs = if f x then x:xs else xs 
```

# android - xml参考参数中的android按钮onClick

> ID：10864260
> 
> 赞同：0
> 
> 时间：2012-06-02T17:00:15.147
> 
> 标签：android

仅用于学习目的

```
<Button 
android:id="@+id/button"
android:text=""
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:onClick="updateTime"/>

public class MainActivity extends Activity {
Button btn;

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    btn = (Button) findViewById(R.id.button);
    updateTime(btn);

}

public void updateTime(View b) {
    btn.setText(new Date().toString());
} 
```

}

如果 View b 它是对 btn 的引用，如何传递它

作为视图？我试过像

```
public void updateTime(Button b) {
    b.setText(new Date().toString());
} 
```

但它不起作用你能帮帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:06:05.973

你有没有尝试过：

```
public void updateTime(View b) {
    ((Button)b).setText(new Date().toString());
} 
```

从[文档](http://developer.android.com/reference/android/view/View.html#attr_android%3aonClick)中：

> 此名称必须对应于只采用一个 View 类型参数的公共方法

因此，如果您将 updateTime 定义为 xml 布局中的单击操作侦听器，那么您的回调必须与签名匹配`public void updateTime(View v)`，这意味着您不能将其声明为接受 Button 作为参数。

此外，`android:onClick`仅适用于 API 级别 4 及更高级别，因此如果您的目标 API 级别低于该级别，则必须在代码中声明单击操作侦听器。

# javascript - 在 Rails 中使用 JQCloud 的一些问题

> ID：10864268
> 
> 赞同：2
> 
> 时间：2012-06-02T17:02:13.277
> 
> 标签：javascript, jquery, ruby-on-rails

我想将哈希从我的控制器传递到 JS 数组，但它可以工作。这些是我所做的： 在控制器中：

```
@tag_cloud = []    
@tag_cloud[0] = {}
@tag_cloud[0]["text"]="Lorem"
@tag_cloud[0]["weight"]=15
..... 
```

鉴于：

```
 var word_list =<%=@tag_cloud.to_json%>
 $(function() {
   $("#my_tag_cloud").jQCloud(word_list);
 }); 
```

我不明白为什么 json 无法加载到`word_list`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T14:10:12.213

利用

```
var word_list =<%= raw @tag_cloud.to_json%> 
```

防止将引号转义为`&quot;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:59:18.620

jQCloud 使用小写属性。例如 "text","link" ，但不是 "Text","Link" 等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T11:30:02.517

因为我在其他地方找不到最小的工作导轨版本：

我假设您已按照[安装说明](https://github.com/archit/jqcloud-rails)进行操作。

为了让 JQCloud rails gem 发挥它的魔力，一种方便的格式是哈希数组。通常我们在模型中构建它以保持控制器苗条，但为了展示一个最小的演示，您可以将以下定义放入控制器动作中：

```
@tag_cloud = [
   { text: "test", weight: 15},
   { text: "Ipsum", weight: 9, link: "http://jquery.com/"},
   { text: "Dolor", weight: 6, html: {title: "I can haz any html attribute"}},
   { text: "Sit", weight: 7},  {text: "Amet", weight: 5}
] 
```

现在，在您相应的视图中，添加

```
<script type="text/javascript">
  var word_array =  <%= raw @tag_cloud.to_json %> ;
  $(function() {
    // When DOM is ready, select the container element and call
    // the jQCloud method, passing the array of words as the first argument.
    $("#example").jQCloud(word_array);
  });
</script>

<div id="example" style="width: 550px; height: 350px;"></div> 
```

...你应该看到词云。

# javascript - 使 Javascript getSeconds 更准确或使用不同的功能

> ID：10864269
> 
> 赞同：1
> 
> 时间：2012-06-02T17:02:20.340
> 
> 标签：javascript

我正在使用以下内容来计算经过的时间：

```
 var start = new Date();
    var end;
    var total;
    end = new Date();
    total = end.getSeconds() - start.getSeconds(); 
```

现在这将产生“总数”，例如 8、4、14。我如何修改它以给我 4.23、8.56、14.12？我是否需要将某些内容传递给 getSeconds 或使用其他功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:04:13.400

使用`getTime()`而不是`getSeconds()`，它将以毫秒为单位返回时间。

`end`此外，如果提前一分钟以上，您的方法将中断`start`。如果您`start`在 12:30:52 和`end`12:31:01 录制，那么您预计`total`是 9，但使用您的代码它将是 -51。

# iphone - 状态栏全屏视图解除错误

> ID：10864279
> 
> 赞同：0
> 
> 时间：2012-06-02T17:03:31.387
> 
> 标签：iphone, objective-c, ios, xcode, statusbar

当我关闭模态视图以返回导航控制器视图时，我的状态栏出现了这种奇怪的行为 ![在此处输入图像描述](../Images/a877b49b850fcfd3677c357edae36398.png)

我`[[UIApplication sharedApplication] setStatusBarHidden:YES];`在`ViewDidLoad`模态视图中使用`[[UIApplication sharedApplication] setStatusBarHidden:NO];`，在导航控制器视图中使用。

关于如何防止这种情况的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:31:44.920

尝试将代码移动到您呈现的模态视图控制器的 viewDidDisappear 方法：

```
- (void)viewDidDisappear:(BOOL)animated {
    [[UIApplication sharedApplication] setStatusBarHidden:NO];
} 
```

进一步说明：旧视图在窗口中显示得太晚了，在旧视图重新显示时状态栏仍然隐藏，因此旧控制器的 uiview 将获得寡妇的全尺寸（没有状态栏) 导致出现在视图上部的 20 px 偏移

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T17:31:41.570

你试过动画吗？

```
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:YES];

[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:YES]; 
```

# javascript - Javascript 浏览器关闭事件

> ID：10864285
> 
> 赞同：0
> 
> 时间：2012-06-02T17:04:32.963
> 
> 标签：javascript, jquery

嗨，我使用 localStorage 来存储变量的值。问题是 localStorage 永远不会从我在互联网上找到的内容重置。我有兴趣在浏览器关闭时重置 localStorage。

有没有办法做到这一点？

我曾尝试使用 jQuery 中的 $(window).unload ，但它检测到与窗口相关的更改并将 localStorage 变量重置为很快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:09:47.087

阅读[我的答案](https://stackoverflow.com/questions/10311341/confirmation-before-closing-of-tab-browser/10311375#10311375)，其中我解释了如何检测浏览器关闭，$(window).unload 并不总是有效。

```
<script>
 window.onbeforeunload = function (e) {

 if (localStorage) {
    localStorage.clear();
 }
 };
</script> 
```

但是，是的，我建议使用**Cookie**或**会话变量**，它们会在浏览器关闭时被销毁，而不是 localStorage。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T17:18:33.093

您可能想改用[window.sessionStorage](https://developer.mozilla.org/en/DOM/Storage#sessionStorage)。

> 会话存储
> 
> 这是一个全局对象 (sessionStorage)，它维护一个在页面会话期间可用的存储区域。只要浏览器打开并在页面重新加载和恢复后仍然存在，页面会话就会持续。在新选项卡或窗口中打开页面将导致启动新会话。

# javascript - 如何在 JavaScript 中将字符串中的 7 格式化为“07”？

> ID：10864288
> 
> 赞同：3
> 
> 时间：2012-06-02T17:04:46.270
> 
> 标签：javascript, jquery

我有 JavaScript 日、月和年。我需要我的一天是 2 位数，我的月份也是 2 位数，年份也是 4 位数。

**例如。**如果月份是`7`它应该给我字符串为`'07'`. 如果是，`12`那么它应该返回`'12'`。

我用谷歌搜索它，但我只发现`toFixed`and `toPrecision`，两者都有不同的功能。我该如何格式化？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-02T17:29:13.357

你可以这样做...

```
mth = ("0" + mth).slice(-2); 
```

* * *

另外，请记住，月份是`0`基于的，所以你可能想要这个......

```
mth = ("0" + ++mth).slice(-2); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T17:05:47.940

```
var newmonth = month < 10 ? '0' + month : month; // if month is number
                                                 // else use parseInt(month, 10) 
```

您还可以制作一般用途的功能：

```
function formatting(target) {
  return target < 10 ? '0' + target : target;
} 
```

您可以将上述方法用于月份和日期。

并获得 4 位数的年份，您可以使用[`.getFullYear()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getFullYear)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T17:48:47.193

如果您正在寻找比简单的零填充功能更强大的功能，您可能想查看 sprintf Javascript 库。

[http://www.diveintojavascript.com/projects/javascript-sprintf](http://www.diveintojavascript.com/projects/javascript-sprintf)

Underscore.string 也有一个实现。

[https://github.com/edtsech/underscore.string](https://github.com/edtsech/underscore.string)

# php - 使用 php facebook sdk 在 feed 帖子上标记朋友

> ID：10864307
> 
> 赞同：0
> 
> 时间：2012-06-02T17:07:03.837
> 
> 标签：php, facebook, sdk, tags, publish

我要花 4 个小时在 facebook 上的页面上发送帖子

```
$attachment = array(
        'message' => "@[".$id.":1:".$name.'] dsf sadfewqr',
                    'name' => "test test etst etst test test",
                    'link' => "http://www.tiscali.it",
                    'description' => "test",
        'picture'=> "http://www.example.com/img.jpg",
        'message_tags' => array(
            'data' => array(
                'id' => $id,
                'name' => $partecipant['name_screen'],
                'offset' => 0,
                "type" => "user",
                'length' => strlen($name)
            )
        ),
        'access_token' => '--fanpageaccesstoken--'
    );

    $facebook->api('/'.$idfanpage.'/feed', 'POST', $attachment); 
```

每次我只收到没有标签的消息。我做错了什么？

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T17:31:22.187

你从哪里得到 message_tags 参数？

根据[https://developers.facebook.com/docs/reference/api/user/#posts](https://developers.facebook.com/docs/reference/api/user/#posts)，您应该使用*tags*参数来提供逗号分隔的用户 ID 列表。

并注意注释说，*如果不指定地点，您将无法指定此字段。*

# translation - 我应该怎么做才能在 iOS 中使用 bing 翻译器？

> ID：10864310
> 
> 赞同：1
> 
> 时间：2012-06-02T17:07:12.053
> 
> 标签：translation, bing-api

我想在我的应用程序中翻译一个单词。首先我想使用谷歌翻译，但我看到谷歌翻译的 API 不是免费的。所以我尝试使用必应翻译，我按照本[教程](http://www.microsoft.com/web/post/using-the-free-bing-translation-apis)进行操作，但在第 3 步中我找不到“*立即申请 AppId 开始*”。那么如何创建一个appID呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T17:32:26.403

看起来 Bing Translate API 已重命名为 Microsoft Translator。

该页面内容如下：

> 拥有现有 AppID 的开发人员可以在 2012 年 8 月 1 日之前继续使用 Bing Search API 2.0。自此日期起，Bing Search API 2.0 AppID 将不再返回结果。开发人员可以通过在 Windows Azure Marketplace 中注册来继续使用 API。阅读迁移指南和常见问题以开始使用。

因此，如果您想继续使用 Bing API，您似乎必须注册 Windows Azure Marketplace。

[您可以在此](https://datamarket.azure.com/dataset/1899a118-d202-492c-aa16-ba21c33c06cb)链接的 Azure 市场上找到 Microsoft 翻译。从外观上看，它看起来也不是免费的。[此](http://msdn.microsoft.com/en-us/library/ff512419.aspx)链接具有类似于 API 文档的内容。还要检查关于 SO 的[这个相关问题。](https://stackoverflow.com/questions/1778651/how-to-propertly-use-bing-translate-api)

Github 上有一个[项目](https://github.com/H2CO3/BingTranslate)，它为 iOS 的 API 提供了一个客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T01:17:25.397

上述信息大部分是正确的，只是它不是免费的部分。仍然可以通过 Bing/Microsoft 翻译器获得免费的服务层级。当您完成订阅过程时，只需选择免费套餐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:12:51.783

似乎 github 上的示例应用程序不支持 bing 翻译器现在使用的新身份验证 Azure 市场令牌。我下载了它，它不起作用，只是一直返回“invalid appid”错误。您甚至无法再从 Microsoft 获得应用程序 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-18T10:02:41.413

免费的翻译 API 很少。谷歌翻译 API 也不是免费的，但谷歌翻译 API 是最便宜且易于使用的。它对 100 万个字符收费 20 美元，并支持多种语言。你可以在这里查看更多信息，

[https://developers.google.com/translate/v2/getting_started](https://developers.google.com/translate/v2/getting_started)。

谢谢。

# c# - 是否有用于解析字符串以创建 C# func 的工具？

> ID：10864311
> 
> 赞同：5
> 
> 时间：2012-06-02T17:07:22.470
> 
> 标签：c#, string, parsing, function, string-parsing

我需要知道是否有任何库可以让我在给定表示数学函数的某个字符串的`x^2+x+1`情况下生成一个 C# func这将代表所述功能。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T17:35:52.597

使用 FLEE（Fast Lightweight Expression Evaluator）已经有一段时间了，效果很好。他们的版本也为 Silverlight 保留了大部分功能。它的设计几乎完全符合您的要求，甚至更多。

[http://flee.codeplex.com/](http://flee.codeplex.com/)

> Flee 是 .NET 框架的表达式解析器和求值器。它允许您在运行时计算字符串表达式的值，例如 sqrt(a^2 + b^2)。它使用自定义编译器、强类型表达式语言和轻量级代码生成器将表达式直接编译为 IL。这意味着表达式评估非常快速和高效。

从您的评论中给出您要评估的示例`x^2+x+1`（用记事本编写）：

```
public Func<double, double> CreateExpressionForX(string expression)
{

    ExpressionContext context = new ExpressionContext();
    // Define some variables
    context.Variables["x"] = 0.0d;

    // Use the variables in the expression
    IDynamicExpression e = context.CompileDynamic(expression);

    Func<double, double> expressionEvaluator = (double input) =>
    {
        content.Variables["x"] = input;
        var result = (double)e.Evaluate();
        return result;
    }

    return expressionEvaluator;
}

Func<double, double> expression = CreateExpressionForX("x^2 + x + 1");

double result1 = expression(1); //3
double result2 = expression(20.5); //441.75
double result3 = expression(-10.5); //121.75

Func<double, double> expression2 = CreateExpressionForX("3 * x + 10");

double result4 = expression2(1); //13
double result5 = expression2(20.5); //71.5
double result6 = expression2(-10.5); //-21.5 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T17:14:51.610

看看[Roslyn API](http://www.codeproject.com/Articles/113169/C-As-A-Scripting-Language-In-Your-NET-Applications)。它将允许您在运行时编译字符串

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T17:20:27.227

您可以使用**CSharpCodeProvider**类将代码编译为文件/程序集并动态加载已编译的程序集。[此处](http://support.microsoft.com/kb/304655)描述了如何从您的程序中使用编译器 。这个[Stackoverflow 问题](https://stackoverflow.com/questions/1137781/c-sharp-correct-way-to-load-assembly-find-class-and-call-run-method)展示了如何加载已编译的程序集。请记住，您需要将函数包装在一个类中以便稍后加载和执行它。

或者，您可以使用[CS-Script](http://www.csscript.net/)来完成脏程序集的编译、加载和执行工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T18:02:53.010

你可以使用[CodeDOM](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)来动态编译一个类型，关于这个，你可以[在这里](http://fluentcodedom.codeplex.com)找到一个流畅的接口来简单地编写代码，例如：

```
var compileUnit = new FluentCodeCompileUnit()
    .Namespace("Sample1")
                .Class("Program")
                    .Method(MemberAttributes.Public | MemberAttributes.Static, "Main").Parameter(typeof(string[]), "args")
                        .CallStatic(typeof(Console), "WriteLine", Expr.Primitive("Hello Fluent CodeDom"))
                    .EndMethod

                    .Method(MemberAttributes.Public | MemberAttributes.Static, "Linq2CodeDomSupport").Parameter(typeof(string[]), "args")
                        .Stmt(ExprLinq.Expr(() => Console.WriteLine("Hello Linq2CodeDOM")))
                        .Declare(typeof(int), "random", ExprLinq.Expr(() => new Random().Next(10)))
                        .If((int random) => random <= 5)
                            .Stmt(ExprLinq.Expr(() => Console.WriteLine("Smaller or equal to 5.")))
                        .Else
                            .Stmt(ExprLinq.Expr(() => Console.WriteLine("Bigger than 5.")))
                        .EndIf
                    .EndMethod
               .EndClass
            .EndNamespace
        .EndFluent();

        var assembly = Helper.CodeDomHelper.CompileInMemory(compileUnit);
        assembly.GetType("Sample1.Program").GetMethod("Main").Invoke(null, new object[] { null }); 
```

我必须在 CodePlex 上发布一个更流畅的接口 API，当它在 RTM 中发布时也将使用[Roslyn 。](http://www.microsoft.com/en-us/download/details.aspx?id=27744)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T17:19:07.277

[这](http://www.csscript.net/)看起来是一个不错的解决方案。当然，它也可以通过使用[表达式树](http://blogs.msdn.com/b/csharpfaq/archive/2009/09/14/generating-dynamic-methods-with-expression-trees-in-visual-studio-2010.aspx)和从字符串到表达式的解析来解决，稍后可以编译（在运行时）并执行。

# ios - 将 UIView 旋转 360 度等

> ID：10864313
> 
> 赞同：1
> 
> 时间：2012-06-02T17:07:55.620
> 
> 标签：ios, objective-c, uiview, rotation, cgaffinetransform

在最好的情况下，我对弧度感到很困惑，所以当我旋转 UIView 时，我倾向于以度数工作。到目前为止，我一直在使用以下公式将度数转换为弧度：

```
#define radians(x) (M_PI * x / 180.0) 
```

到现在为止还挺好。当我在屏幕上有一个 UIView 用户正在旋转 360 度或更多时，问题就出现了，我想在屏幕上显示图像旋转了多少度。我有这个，它可以正常工作到 180 度：

```
float rot = [recognizer rotation];
[self.steeringWheel setTransform:CGAffineTransformRotate([self.steeringWheel transform], (rot))]; // turn wheel

CGFloat radians = atan2f(steeringWheel.transform.b, steeringWheel.transform.a); 
CGFloat degrees = radians * (180 / M_PI);

self.degreesBox.text = [NSString stringWithFormat:@"%1.0f", degrees]; // show degrees of rotation on screen 
```

180 度后，我的读数变为 -179、-178 等，一直回到零。相反，我希望它继续计数到 359（如果可能，然后回到零、1、2 等）。

我可以使用将 2 加到 179、3 加到 178 等的公式来获得正确的数量，但是当我然后去向相反方向转动车轮时，这将不起作用（-1 度转动读数为 359，当我真的希望它读出为 1 或 -1 时）。

我希望这是有道理的。基本上，我想了解车轮从起点开始在每个方向上转动了多少。我现在得到的是通过最短路线返回起点的度数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:11:37.770

试试这个代码：

```
CGFloat radians = atan2f(steeringWheel.transform.b, steeringWheel.transform.a); 
if (radians < 0.0) radians += 2 * M_PI;
CGFloat degrees = radians * (180 / M_PI); 
```

编辑：

重读你的问题后，我看到了你的问题到底出在哪里。[atan2](http://en.wikipedia.org/wiki/Atan2)将始终返回 (−π, π] 范围内的结果。

看起来您希望方向盘能够向左旋转一整圈，向右旋转一整圈。您可以通过将新角度与旧角度进行比较来解决此问题，这样您就可以知道用户是在顺时针还是逆时针旋转车轮。

当用户从起始（空闲）位置向左（CCW）旋转滚轮时，您还可以设置一个标志以相应地管理标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-26T10:27:19.163

**Swift 3**：
*嵌套闭包的动画比动画延迟块更好。*

```
UIView.animate(withDuration: 0.5, animations: { 
     button.transform = CGAffineTransform(rotationAngle: (CGFloat(Double.pi)) 
}) { (isAnimationComplete) in

           // Nested Block
            UIView.animate(withDuration: 0.5) { 
               button.transform = CGAffineTransform(rotationAngle: (CGFloat(Double.pi * 2))
           }    
     } 
```

带有延迟和选项的动画：

```
// Rotation from 0 to 360 degree    
UIView.animate(withDuration:0.5, animations: { () -> Void in
      button.transform = CGAffineTransform(rotationAngle: CGFloat(Double.pi))
})

// Rotation from 180 to 360 degree
UIView.animate(withDuration: 0.5, delay: 0.45, options: .curveEaseIn, animations: { () -> Void in
       button.transform = CGAffineTransform(rotationAngle: CGFloat(Double.pi * 2))
}, completion: nil) 
```

# java - 如何使用Java将文件分成几部分？

> ID：10864317
> 
> 赞同：14
> 
> 时间：2012-06-02T17:08:44.037
> 
> 标签：java, file, io

我有一个奇怪的问题要问 - 如何使用 Java（任何文件类型）将给定文件分成小块？然后我可以把这些碎片放在一些 CD 和/或随身碟上，然后把它们拿走。我试过这样[做](https://stackoverflow.com/questions/10863522/java-reading-bytes-from-a-txt-file-line-by-line)

但正如大多数用户所评论的那样，我正在尝试的事情无法以这种方式实现。因此，我决定提出一个新问题，以获得正确的文件破解方法。

当我将一个文件分成几块（比如 30 块）时，必须有一种方法可以重新组合它们并重新创建原始文件。请帮忙。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-02T17:12:19.107

当缓冲区已满或文件结束时，将部分字节读取到字节数组并将它们存储在新文件中。

例如（代码并不完美，但应该有助于理解流程）

```
class FileSplit {
    public static void splitFile(File f) throws IOException {
        int partCounter = 1;//I like to name parts from 001, 002, 003, ...
                            //you can change it to 0 if you want 000, 001, ...

        int sizeOfFiles = 1024 * 1024;// 1MB
        byte[] buffer = new byte[sizeOfFiles];

        String fileName = f.getName();

        //try-with-resources to ensure closing stream
        try (FileInputStream fis = new FileInputStream(f);
             BufferedInputStream bis = new BufferedInputStream(fis)) {

            int bytesAmount = 0;
            while ((bytesAmount = bis.read(buffer)) > 0) {
                //write each chunk of data into separate file with different number in name
                String filePartName = String.format("%s.%03d", fileName, partCounter++);
                File newFile = new File(f.getParent(), filePartName);
                try (FileOutputStream out = new FileOutputStream(newFile)) {
                    out.write(buffer, 0, bytesAmount);
                }
            }
        }
    }

    public static void main(String[] args) throws IOException {
        splitFile(new File("D:\\destination\\myFile.mp4"));
    }
} 
```

myFile.mp4 大小=12,7 MB

拆分后我有13个文件

*   `myFile.mp4.001`-`myFile.mp4.012`大小为 1 MB
*   `myFile.mp4.013`大小为 806 KB

* * *

如果要合并这些文件，可以使用

```
public static void mergeFiles(List<File> files, File into)
        throws IOException {
    try (FileOutputStream fos = new FileOutputStream(into);
         BufferedOutputStream mergingStream = new BufferedOutputStream(fos)) {
        for (File f : files) {
            Files.copy(f.toPath(), mergingStream);
        }
    }
} 
```

您还可以创建一些额外的方法来让您的生活更轻松。例如，该方法将根据其中一个文件的名称（和位置）创建包含分隔部分的文件列表。

```
public static List<File> listOfFilesToMerge(File oneOfFiles) {
    String tmpName = oneOfFiles.getName();//{name}.{number}
    String destFileName = tmpName.substring(0, tmpName.lastIndexOf('.'));//remove .{number}
    File[] files = oneOfFiles.getParentFile().listFiles(
            (File dir, String name) -> name.matches(destFileName + "[.]\\d+"));
    Arrays.sort(files);//ensuring order 001, 002, ..., 010, ...
    return Arrays.asList(files);
} 
```

使用该方法，我们可以重载`mergeFiles`方法以仅使用其中一个文件`File oneOfFiles`而不是整个列表`List<File>`（我们将根据其中一个文件生成该列表）

```
public static void mergeFiles(File oneOfFiles, File into)
        throws IOException {
    mergeFiles(listOfFilesToMerge(oneOfFiles), into);
} 
```

你也可以重载这些方法来`String`代替`File`（我们将在需要时将每个字符串包装在 File 中）

```
public static List<File> listOfFilesToMerge(String oneOfFiles) {
    return listOfFilesToMerge(new File(oneOfFiles));
}

public static void mergeFiles(String oneOfFiles, String into) throws IOException{
    mergeFiles(new File(oneOfFiles), new File(into));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T17:10:33.670

以 raw 形式读取和写入流`byte[]`。避免文本流和读者。

在您的最后一个问题中，您显然是根据“行”分解文件。要复制该行为，只需使用固定大小的`byte[]`来读取。仔细注意上一个问题的注释中的警告，以检查读取了多少字节。A`byte[2^16]`不一定会在一次读取中填写。

# actionscript-3 - How to: force output sound of application to go through Bluetooth headset

> ID：10864320
> 
> 赞同：4
> 
> 时间：2012-06-02T17:09:09.510
> 
> 标签：actionscript-3, audio, bluetooth

I have a Bluetooth headset (coupled with my smartphone) which produces sound of dial signal while waiting for connection and your interlocutor during conversation.

All other sounds like: keypress sound, mp3, other sounds of different applications is generated by the speaker of the smartphone.

My question: Is there any possible way, to write an application in AS 3.0 which will force the sound of this application to go through bluetooth headset (but not through a smartphone speaker)? I know that it may be connected with something called "system sound", but all my reaserch come to naught.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:07:48.270

第一个解决方案：安装[BTmono](https://play.google.com/store/apps/details?id=com.bedoig.BTmono) 这个第四方允许您将声音从应用程序发送到耳机。第二：使用[Native Extensions，](http://www.adobe.com/devnet/air/native-extensions-for-air.html)写在Android SDK中。[在这](https://stackoverflow.com/questions/2144694/routing-audio-to-bluetooth-headset-non-a2dp-on-android)方面，您会在 Internet 上找到很多帮助，例如. 这将是很多工作，需要 AS 和 Java 知识。也不要忘记在权限中标记 BT 耳机。

# ios - iOS 5 Search Display Controller and reuse of UITableViewController

> ID：10864322
> 
> 赞同：2
> 
> 时间：2012-06-02T17:09:13.480
> 
> 标签：ios, uitableview, uisearchbar, uistoryboard

**The background**

I have an iPhone app that makes use of a `UITableViewController` sub class in several places by sub classing again for each use. One of those uses is a search controller.

```
@interface TableViewController : UITableViewController
// ...
@interface SearchTableViewController : TableViewController <UISearchDisplayDelegate, UISearchBarDelegate> 
```

In the storyboard editor I have the same table view, cell structure, and reuse identifier in each view that makes use of `TableViewController`. Everywhere I am using it the storyboard is generating cells for me based on my design time prototypes so that in the `tableView:cellForRowAtIndexPath:` method I don't have to include the `if (cell == nil)` section.

**The problem**

I have done something wrong and my search controller's cells aren't being generated by the storyboard like the others. At first, I added in the `if (cell == nil)` bit to solve the problem but it causes my search to display blank rows. Actually, the search shows the correct number of blank rows. After you cancel the search, the results appear from out of the background. Here's the code from `TableViewController`:

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    ModelObject* obj = [self.dataSource modelAtIndex:indexPath.row];
    UILabel* name = (UILabel*) [cell viewWithTag:1];
    name.text = obj.name;
    return cell;
} 
```

I suspect there may be other details necessary to identify the issue but any tips on what kinds of things could cause this would be helpful. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:17:31.480

如果您使用 Storyboard，请选择对象“带有搜索显示控制器的搜索栏”并将其放置在您的视图控制器中（比如说 VC）。然后 Xcode 会自动将搜索栏链接到 VC 中的搜索显示控制器。因此在 VC 中，您可以通过以下方式访问搜索显示控制器，`self.searchDisplayController` 并且您的 VC 应采用协议，例如`UISearchBarDelegate, UISearchDisplayDelegate` 您的搜索栏也可以通过以下方式访问`self.searchDisplayController.searchBar`

在 UISearchDisplayDelegate 协议中实现相关方法（表格视图等）。答对了！您的搜索结果将自动显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-09T09:20:48.077

“tableview”的部分是错误的。

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

您应该改用 self.tableview （或链接到 tableview 的 IBOutlet 变量名）。像这样;

```
UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

当搜索完成时，cellForRowAtIndexPath 中的 tableview 参数将不是您在视图控制器中拥有的参数。这就是问题的原因。

# php - How can I get user data using facebook php sdk?

> ID：10864324
> 
> 赞同：0
> 
> 时间：2012-06-02T17:09:21.933
> 
> 标签：php, facebook

I want to get user data using php sdk ..

```
$facebook = new Facebook($config);
$user_id = $facebook->getUser();
var_dump($user_id ); 
```

It returns me int(0) although I am logged in to facebook .Hiw can I fix this ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:15:47.133

用户需要连接到您的 Facebook 应用程序。您需要向他请求访问数据的权限。Facebook SDK 文档包含您需要了解的有关权限等的所有信息。

Edit_：这是一个关于如何向用户请求权限的示例（取自[https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)）

```
$params = array(
  'scope' => 'read_stream, friends_likes',
  'redirect_uri' => 'https://www.myapp.com/post_login_page'
);

$loginUrl = $facebook->getLoginUrl($params); 
```

获取登录 URL 后，只需将用户重定向到此 URL 或使用如下`a`标记：

```
<a href="<?php echo $loginUrl; ?>">Login with Facebook</a> 
```

# drupal - 每周一次的drupal节点更新权限

> ID：10864326
> 
> 赞同：0
> 
> 时间：2012-06-02T17:09:27.420
> 
> 标签：drupal, permissions

是否已经制作了这样的模块，假设用户只能访问页面一次或每周只能访问一次，现在真的一直在寻找这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:30:24.753

我认为您不需要为此使用模块。为相关节点创建自定义模板。

首先，添加按页面标题创建页面模板的功能将其添加到主题的 template.php

```
function themename_preprocess_page(&$vars, $hook) {//bofun
  if (isset($vars['node'])) {
  // If the page title is "restricted" the template suggestion will be "page--restricted.tpl.php".
     $vars['theme_hook_suggestions'][] = 'page__'. str_replace(' ', '__', strtolower($vars['node']->title));

  }

}//eofun 
```

在模板文件夹中，复制 page.tpl.php 并将新文件重命名为 page--restricted.tpl.php。编辑新文件。将此添加到显示内容的 div 的开头

```
 <?php if (in_array('Staff', $user->roles) && date('l') == "Wednesday" ): /*only display users who have the user role type of Staff and display only on Wednesday*/ ?>
<div>
The restricted content
</div>
<?php else: echo "<h1 class='title' id='page-title'>Access Denied</h1><br />You are not authorized to access this page."; endif; ?> 
```

# c++ - unique_ptr、nullptr 并支持 gcc 4.5.x 和 4.6.x

> ID：10864329
> 
> 赞同：5
> 
> 时间：2012-06-02T17:09:39.427
> 
> 标签：c++, gcc, c++11, unique-ptr, nullptr

我正在开发一个有两个不同最终用户的库，其中一个正在使用 gcc 4.5.3，另一个刚刚移到 gcc 4.6.3。该库使用新的 C++11 智能指针（特别是 unique_ptr）并在 gcc 4.5.3 上编译良好。但是，在这两个版本之间，gcc 开始支持 nullptr，因此 unique_ptr 的 API 发生了变化，以更接近标准。现在这样做，以下代码从精细变为模棱两可

```
unique_ptr up( new int( 30 ) );
...
if( up == 0 ) // ambiguous call now to unique_ptr(int) for 0 
```

是否有一种干净的（即下一句）方法来更改上面的 if 语句，以便它在有和没有 nullptr 的情况下都有效？如果可能的话，我想避免配置检查，然后像下面这样的宏（我认为它会起作用）

```
#if defined NULLPOINTER_AVAILABLE
  #define NULLPTR (nullptr)
#else
  #define NULLPTR (0)
#endif 
```

还是这是获得我正在寻找的行为的唯一方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T17:17:24.437

你遇到了什么错误？

```
#include <iostream>
#include <memory>
int main() {
 using namespace std;
 unique_ptr<int> up( new int( 30 ) );
 if (up == 0)
     cout << "nullptr!\n";
 else cout << "bam!\n";
} 
```

与`g++ -std=c++0x -Wall nullptr.cpp -o nullptr`（gcc 4.6.2）一起编译得很好。

此外，请阅读 Stroustrup 和 Sutter 的[N2431](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2431.pdf)论文，其中在其中一个示例中明确列出`nullptr`了类似的用法（与 比较）。`0`

# google-app-engine - 在中国间歇性访问具有自定义域的 Google App Engine 应用

> ID：10864333
> 
> 赞同：5
> 
> 时间：2012-06-02T17:10:21.703
> 
> 标签：google-app-engine, dns

这是一个奇怪的。我们有一个 Google App Engine (GAE) 应用程序和一个自定义域[http://www.tradeos.com](http://www.tradeos.com) CNAME'd 到 ghs.google.com。在中国，我们经常在 20 分钟左右没有收到来自服务器的任何响应，然后它会在一段时间内正常工作，有时会持续几个小时。

CNN 等其他非中国网站似乎在持续运行，因此国际互联网出现故障并不是普遍问题。在其他国家，我们认为没有问题。

顺便说一句，非自定义谷歌域 x.appspot.com 似乎根本无法访问，大概被防火墙阻止了。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:38:32.957

你知道GFW，谷歌CNAME在中国被屏蔽了，你可以切换CNAME IP，或者使用反向代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:02:45.533

您可以使用反向代理来解决此问题。您可以访问运行 apache 或 nginx 的服务器吗？如果是这样，您可以将其配置为您的反向代理。否则有一些 SAAS 会为您反向代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:21:19.837

似乎这是中国的防火墙（GFW）问题。Google App Engine 不断切换 IP，其中一些在中国被屏蔽。我们暂时使用 CloudFlare 解决了这个问题，尽管它还有其他问题，例如偶尔的 502 错误。

# cookies - 当第三方 cookie 被阻止时获取 access_token（FB.getLoginStatus 返回未知）

> ID：10864347
> 
> 赞同：2
> 
> 时间：2012-06-02T17:12:47.263
> 
> 标签：cookies, facebook-javascript-sdk

我有一个使用 Facebook JS SDK 查询 /me/friends 的应用程序。为此，我需要一个我使用的 access_token `FB.getLoginStatus()`。

如果有人在禁用 3rd 方 cookie 的情况下访问，`FB.getLoginStatus()`则返回一个`unknown`状态（按设计），并且没有 access_token。其他人如何处理这个问题？还有另一种通过 JS SDK 获取 oauth 令牌的方法吗？您只是不加载该功能，还是退回到服务器端方法？谢谢！

# mysql - 单个wordpress站点多个mysql数据库

> ID：10864350
> 
> 赞同：0
> 
> 时间：2012-06-02T17:13:07.573
> 
> 标签：mysql, wordpress

我有一个域的多个 MySQL 数据库（包括旧的和新的）。现在我正在考虑使用所有这些数据库，但由于服务器限制，我不会将它们转储到单个数据库（每个数据库都很大）。

所以，我的问题是：是否可以为单个 wordpress 站点同时使用多个数据库？（我想把我的 MySQL 数据库放在几台服务器上）。

这就是 HyperDB 插件的设计目的吗？我阅读了插件页面上的说明，但无法具体理解我需要做什么。

有人有什么建议吗？

# android - 自定义 Listview 视图 NullPointerException

> ID：10864351
> 
> 赞同：1
> 
> 时间：2012-06-02T17:13:13.793
> 
> 标签：android, listview, view, viewgroup

我有一个自定义 SimpleCursor listView 和 Chronometer。我尝试在`Chronometer`(timer) 为 00:10 时绘制一行颜色，但它会抛出 NullPointerException。

感谢您的帮助这是代码：

```
public class ListViewcursorActivity extends ListActivity {
/** Called when the activity is first created. */
Chronometer timer;
ListView lvItems;
SimpleCursorAdapter colours;
private testDBAdapter thisTestDBAdapter;
LinearLayout[] Row;
View[] v;
@Override
public void onCreate(Bundle savedInstanceState) {

    thisTestDBAdapter = new testDBAdapter(this);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    lvItems =getListView();fillData();

    timer = (Chronometer)findViewById(R.id.chronometer1);

    timer.setBase(android.os.SystemClock.elapsedRealtime());
    timer.start();

     Row =new LinearLayout[lvItems.getCount()];
     v = new View[lvItems.getCount()];
    for(int i=0;i<lvItems.getChildCount();i++) {
        v[i] =lvItems.getChildAt(i);
        Row[i] = (LinearLayout)v[i].getParent();    
    }
    timer.setOnChronometerTickListener(new Chronometer.OnChronometerTickListener() {

        public void onChronometerTick(Chronometer chronometer) {
            // TODO Auto-generated method stub
            for(int i=0;i<lvItems.getChildCount();i++){

            //  TextView child =(TextView)Row[i].getChildAt(0);
                if(  chronometer.getText().toString().equalsIgnoreCase("Timer: 00:10")){

                    try {
                        Row[1].setBackgroundColor(Color.RED);
                    } catch (NullPointerException e) {
                        // TODO Auto-generated catch block
                        Toast.makeText(ListViewcursorActivity.this, e.toString(), Toast.LENGTH_SHORT).show();
                    }
                }

            }
    }
    });
} 
```

问题是： // TextView child =(TextView)Row[i].getChildAt(0); 和 Row[1].setBackgroundColor(Color.RED);

```
 06-02 17:00:57.263: E/AndroidRuntime(869): Uncaught handler: thread main exiting due to uncaught exception
06-02 17:00:57.263: E/AndroidRuntime(869): java.lang.NullPointerException
06-02 17:00:57.263: E/AndroidRuntime(869):  at net.deneme.cursorlist.ListViewcursorActivity$1.onChronometerTick(ListViewcursorActivity.java:91)
06-02 17:00:57.263: E/AndroidRuntime(869):  at android.widget.Chronometer.dispatchChronometerTick(Chronometer.java:276)
06-02 17:00:57.263: E/AndroidRuntime(869):  at android.widget.Chronometer$1.handleMessage(Chronometer.java:268)
06-02 17:00:57.263: E/AndroidRuntime(869):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-02 17:00:57.263: E/AndroidRuntime(869):  at android.os.Looper.loop(Looper.java:123)
06-02 17:00:57.263: E/AndroidRuntime(869):  at android.app.ActivityThread.main(ActivityThread.java:4363)
06-02 17:00:57.263: E/AndroidRuntime(869):  at java.lang.reflect.Method.invokeNative(Native Method)
06-02 17:00:57.263: E/AndroidRuntime(869):  at java.lang.reflect.Method.invoke(Method.java:521)
06-02 17:00:57.263: E/AndroidRuntime(869):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-02 17:00:57.263: E/AndroidRuntime(869):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-02 17:00:57.263: E/AndroidRuntime(869):  at dalvik.system.NativeStart.main(Native Method)
06-02 17:00:57.273: I/dalvikvm(869): threadid=7: reacting to signal 3
06-02 17:00:57.273: E/dalvikvm(869): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:30:25.300

```
TextView child =(TextView) Row[i].getChildAt(0); 
```

为什么不通过 id 获取呢？

```
LinearLayout row = (LinearLayout) Row[i];
if(row != null) {
    TextView textView = (TextView) row.findViewBy(R.id.textviewid);
    if(TextView != null)
       //do stuff
} 
```

这有帮助吗？

还要更多地研究代码什么是行？线性布局对吗？这是一种不清楚的代码。也许组织得更好一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T17:31:56.503

空指针异常通常意味着您正在尝试访问当前上下文中不存在的内容。

验证您的 XML 在 Java 代码中被正确引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T17:50:11.093

我看不到适配器在您的`onCreate`. 设置适配器，看看它是否能解决问题。设置适配器后，将创建项目并且它们将具有父项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T17:51:26.950

对于空指针异常，您可以使用调试来跟踪空指针异常，它可以告诉您空指针异常发生的位置。

# jquery - .on() 和切换一起工作

> ID：10864353
> 
> 赞同：10
> 
> 时间：2012-06-02T17:13:45.200
> 
> 标签：jquery, toggle

小伙伴们在这里快速提问，我似乎无法得到这个

```
$('#wrap').on('toggle', '#image', function(){
    <!-- Do stuff -->
  }); 
```

能够在里面有一个切换？有任何想法吗？我试过谷歌搜索，但没有运气。

这是我试图使用.on的代码，因为目前它不会将更改应用于页面上的所有元素（具有#image和#brick）

```
$("#result_options").toggle(function() {
        var image_width = $('#image').width() / 2;
        var brick_width = $('#brick').width() / 2;
        $("#image").css("width",image_width);
        $("#image").css("padding","4px");
        $("#brick").css("width",brick_width);
    },function (){
        $("#image").css("width","300");
        $("#image").css("padding","8px");
        $("#brick").css("width","314");
        $(this).html("Smaller Results");
    });
}); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-02T17:21:27.143

您面临的问题是没有`toggle`事件；`toggle()`是一个 jQuery 方法。要实现`toggle()`,`on()`我认为您需要使用一个`click`事件，然后使用一个`if`语句来测试是否已打开或关闭/未切换某些内容

```
$('#wrap').on('click', '#image', function(){
    if (!$(this).attr('data-toggled') || $(this).attr('data-toggled') == 'off'){
        /* currently it's not been toggled, or it's been toggled to the 'off' state,
           so now toggle to the 'on' state: */
           $(this).attr('data-toggled','on');
           // and do something...
    }
    else if ($(this).attr('data-toggled') == 'on'){
        /* currently it has been toggled, and toggled to the 'on' state,
           so now turn off: */
           $(this).attr('data-toggled','off');
           // and do, or undo, something...
    }
}); 
```

# jquery - 如何阻止jQuery淡入淡出/淡出连续循环？

> ID：10864354
> 
> 赞同：2
> 
> 时间：2012-06-02T17:13:57.980
> 
> 标签：jquery, fadein, fadeout, fadeto

我希望我的徽标在 5 秒后不可见，我已经能够做到这一点。当鼠标移到我的标题 div 上时，我还希望徽标再次出现，然后如果鼠标移出标题 div，则再次淡出。问题是，将鼠标放在header div上然后移开后，它连续淡入淡出3次，几乎就像一个闪烁的效果。我怎样才能阻止这种情况发生？

我曾尝试将我的脚本放在正文和头部中，看看如果没有成功会有什么不同。我还尝试将函数放在单独的脚本标签中......

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#logo').delay(5000).fadeTo( 5000, 0 );
    });
</script>

<script type="text/javascript">
function showLogo()
{
    $('#logo').fadeTo( 2500, 1 );
}
</script>

<script type="text/javascript">
function hideLogo() {
    $('#logo').delay(2500).fadeTo( 2500, 0 );
}
</script> 
```

这是 HTML：

```
<header id="header" onmouseover="showLogo()" onmouseout="hideLogo()">
<div id="logo">
<img src="images/logo.png">
</div> 
```

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:22:43.467

您可以使用以下[`stop()`](http://api.jquery.com/stop/)方法：

```
$('#header').hover(function(){
    $('#logo').stop().fadeToggle(2500);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T17:38:07.553

我在以下方面很幸运：

```
$(document).ready(function () {
    $('#logo').delay(5000).fadeTo( 5000, 0 );
    $('#header').mouseenter(function(e){showLogo();});
    $('#header').mouseleave(function(e){hideLogo();});
}); 
```

而不是将处理程序挂接到标题标签中。

# c# - 如果鼠标位于具有工具提示的图像上，C# .Net Form 将不会绘制

> ID：10864365
> 
> 赞同：4
> 
> 时间：2012-06-02T17:15:14.650
> 
> 标签：c#, forms, tooltip, picturebox

我有一个带有图片框的表单，图片框有工具提示。问题是当表单加载并且鼠标悬停在图像上时，表单不会绘制 - 参见图像。当鼠标离开图片框时，一切正常。

# Form1.cs

```
using System;
using System.Windows.Forms;

namespace testTooltip
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
        {
            if(toolTip1.Active)
            toolTip1.Show(e.X + " " + e.Y, this, e.X, e.Y);
        }

        private void pictureBox1_MouseLeave(object sender, EventArgs e)
        {
            toolTip1.Hide(this);
        }
    }
} 
```

# Form1.designer.cs

```
namespace testTooltip
{
    partial class Form1
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.components = new System.ComponentModel.Container();
            this.toolTip1 = new System.Windows.Forms.ToolTip(this.components);
            this.pictureBox1 = new System.Windows.Forms.PictureBox();
            ((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).BeginInit();
            this.SuspendLayout();
            // 
            // toolTip1
            // 
            this.toolTip1.AutomaticDelay = 5000;
            this.toolTip1.OwnerDraw = true;
            this.toolTip1.ToolTipTitle = "Test";
            // 
            // pictureBox1
            // 
            this.pictureBox1.Image = global::testTooltip.Properties.Resources.screen000;
            this.pictureBox1.Location = new System.Drawing.Point(29, 12);
            this.pictureBox1.Name = "pictureBox1";
            this.pictureBox1.Size = new System.Drawing.Size(678, 429);
            this.pictureBox1.TabIndex = 0;
            this.pictureBox1.TabStop = false;
            this.pictureBox1.MouseLeave += new System.EventHandler(this.pictureBox1_MouseLeave);
            this.pictureBox1.MouseMove += new System.Windows.Forms.MouseEventHandler(this.pictureBox1_MouseMove);
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(730, 457);
            this.Controls.Add(this.pictureBox1);
            this.DoubleBuffered = true;
            this.Name = "Form1";
            this.Text = "Form1";
            ((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).EndInit();
            this.ResumeLayout(false);

        }

        #endregion

        private System.Windows.Forms.ToolTip toolTip1;
        private System.Windows.Forms.PictureBox pictureBox1;
    }
} 
```

这是预览 [http://www.bildites.lv/images/1iftt7hxbqloz0vw949.png](http://www.bildites.lv/images/1iftt7hxbqloz0vw949.png) 这是鼠标离开图片框的时候 [http://www.bildites.lv/images/tp47375fpl6q3oguh6e.png](http://www.bildites.lv/images/tp47375fpl6q3oguh6e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:05:41.313

我建议您尝试使用`Label`控件而不是`ToolTip`.

# java - 添加 if 语句以标记化

> ID：10864368
> 
> 赞同：0
> 
> 时间：2012-06-02T17:15:54.003
> 
> 标签：java, if-statement, tokenize, stringtokenizer

我正在尝试编写一个程序，该程序将使用诸如插入、删除和排序等命令的文本文件，并让它们从链接列表中插入或删除节点。到目前为止，我已经能够标记字符串并将它们写出来；但我也想使用 if 语句，无论文本行是说插入还是说删除。这就是我到目前为止所拥有的。感谢您的任何帮助。

(车道.txt)

```
 insert 1

         insert 7

         insert 5

         delete 7

         insert 2

         insert 4

         delete 5 
```

和代码：

导入 java.io。*; 导入 java.util。*;

类令牌测试 {

```
 public static void main (String[] args) {
    TokenTest tt = new TokenTest();
    tt.dbTest();
 }

 void dbTest() { 

    DataInputStream dis = null;
    String dbRecord = null;

    try { 

       File f = new File("lane.txt");
       FileInputStream fis = new FileInputStream(f); 
       BufferedInputStream bis = new BufferedInputStream(fis); 
       dis = new DataInputStream(bis);

       // read the first record of the database
       while ( (dbRecord = dis.readLine()) != null) {

          StringTokenizer st = new StringTokenizer(dbRecord, " ");
          String action = st.nextToken();
          String key = st.nextToken();

          System.out.println("Action:  " + action);
            if(action == "insert")
            {
                System.out.println("holla");
            }
          System.out.println("Key Value:   " + key);
             if(action == "delete")
            {
                System.out.println("holla");
            }
          System.out.println(" ");

       }

    } catch (IOException e) { 
       // catch io errors from FileInputStream or readLine() 
       System.out.println("Uh oh, got an IOException error: " + e.getMessage()); 

    } finally { 
       // if the file opened okay, make sure we close it 
       if (dis != null) {
          try {
             dis.close();
          } catch (IOException ioe) {
             System.out.println("IOException error trying to close the file: "); 
          }

       } // end if

    } // end finally

 } // end dbTest 
```

} // 结束类

输出：

行动：插入键值：1

行动：插入键值：7

行动：插入键值：5

行动：删除键值：7

行动：插入键值：2

行动：插入键值：4

行动：删除键值：5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T17:18:11.983

应使用以下方法比较字符串`equals`：

```
if (action.equals("insert")) { // etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T17:23:21.823

现在有了 java 7，我相信你可以在 switch case 中使用字符串。

我猜java 7现在允许以下语法：

```
String s = ....;
switch(s)
{
   case "insert": 
      break;
   default:
      break;
} 
```

# html - HTML5 CSS3 布局不起作用

> ID：10864369
> 
> 赞同：0
> 
> 时间：2012-06-02T04:07:41.090
> 
> 标签：html, css

基于以下答案的大规模编辑

原帖在这里[http://webmasters.stackexchange.com](https://webmasters.stackexchange.com/q/30446/15953)在miration之前。

我终于在所有浏览器（所有主要浏览器；Chrome、Opera、Safari、Firefox）上进行了页面布局，除了 IE 9 和可能的旧版本。目前，链接在第二个链接（具有下拉菜单）之后停止显示在“导航”栏中。链接对于下拉菜单都是水平安全的，直到第三个链接出现，它们都显示在“导航”栏下方并作为垂直列表显示。我确信这个问题需要一个单独的 IE 样式表，但问题是主样式表还是菜单样式表，目的是什么？

这是布局的图片：

[![这里](../Images/0197ac6672c06753245be563cada39e6.png)](https://docs.google.com/file/d/0Bwns2GT2GHK8V1RsTXNOcWMtLU0/edit?pli=1# "我的 Google 文档中的图片链接") HTML5-核心布局-

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>College Of Martial Arts</title>
<link href="menu.css" rel="stylesheet" type="text/css">
<link href="master.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</head>

<body>

<div class="wrap">
  <div id="logo" class="logo"><img src="images/comalogo.png" width="100" height="150"></div>
<header>
    <p> College Of Martial Arts</p>
  </header>

<!-- This is the HTML for the navigation bar at the top of the website -->   
    <nav>
 <ul id="menu"><b>
        <li><a href="#">News</a></li>
            <li>·</li>
        <li><a href="#">About Us</a>
        <ul>
                    <li><a href="#">The Instructors</a></li>
                    <li><a href="#">Our Arts</a></li>

        </ul>
         </li>
            <li>·</li>
        <li><a href="#">Location</a></li>
            <li>·</li>
        <li><a href="#">Gallery</a></li>
            <li>·</li>
        <li><a href="#">MMA.tv</a></li>
            <li>·</li>
        <li><a href="#">Schedule</a></li>
            <li>·</li>
        <li><a href="#">Fight Gear</a></li></b>
        </ul>
</nav>

<!-- end nav -->  

  <div class="midwrap">
    <div class="sidebar1">
    <aside>

      <p>This is an area for module/blocks for various uses such as; upcoming events, shout box, mini calendar and many more possibilities.</p>
    </aside>
  <!-- end .sidebar1 --></div>
  <article class="content">
    <h1>Main Content Area</h1>
    <section>
     <h2>A place to post content</h2>
      <p>"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?"

<a href="http://www.lipsum.com/">http://www.lipsum.com/</a>.</p>
    </section>
    <div class="clearfooter"></div>
    <!-- end .content --></article></div>
  <footer>
    <p>This footer contains the declaration position:relative; to give Internet Explorer 6 hasLayout for the footer and cause it to clear correctly. If you're not required to support IE6, you may remove it.</p>
    <address>
      Address Content
    </address>
  </footer>
  <!-- end .wrap --></div>
</body>
</html> 
```

CSS3 - 菜单样式表

```
@charset "utf-8";
/* CSS Document */

/* Main */
#menu
{
        width: 100%;
        margin: 0;
        padding: 10px 0 0 0;
        list-style: none;
        background: url(images/menubg.png) repeat-x;
        background: -moz-linear-gradient(#000, #333);
        background: -webkit-gradient(linear,left bottom,left top,color-stop(0, #444),color-stop(1, #000));
        background: -webkit-linear-gradient(#000, #333);
        background: -o-linear-gradient(#000, #333);
        background: -ms-linear-gradient(#000, #333);
        background: linear-gradient(#000, #333);
        -moz-border-radius: 5px;
        border-radius: 5px;
        -moz-box-shadow: 0 2px 1px #9c9c9c;
        -webkit-box-shadow: 0 2px 1px #9c9c9c;
        box-shadow: 0 8px 8px #9c9c9c;
        /* outline:#000 solid thin; */

}

#menu li
{
        left:150px;
        float: left;
        padding: 0 0 10px 0;
        position:relative;
        color: #FC0;
        font-size:15px;
        font-family:'freshman' cursive;
        line-height:15px;
        display: inline-block;
}

#menu a
{
        float: left;
        height: 15px;
        line-height:15px;
        padding: 0 10px;
        color: #FC0;
        font-size:15px;
        text-decoration: none;
        text-shadow: 1 1px 0 #000;
        text-align:center;
}

#menu li:hover > a
{
        color: #fafafa;
}

*html #menu li a:hover /* IE6 */
{
        color: #fafafa;
}

#menu li:hover > ul
{
        display: block;
}

/* Sub-menu */
#menu ul
{
    list-style: none;
    margin: 0;
    padding: 0;
    display: none;
    position: absolute;
    top: 25px;
    left: 0;
    z-index: 99999;
    background: url(images/menubg.png) repeat-x;
    background: -moz-linear-gradient(#000, #333);
    background: -webkit-gradient(linear,left bottom,left top,color-stop(0, #111),color-stop(1, #444));
    background: -webkit-linear-gradient(#000, #333);
    background: -o-linear-gradient(#000, #333);
    background: -ms-linear-gradient(#000, #333);
    background: linear-gradient(#000, #333);
    -moz-border-radius: 5px;
    border-radius: 5px;
    /* outline:#000 solid thin; */
}

#menu ul li
{
    left:0;
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
}

#menu ul a
{
    padding: 10px;
    height: auto;
    line-height: 1;
    display: block;
    white-space: nowrap;
    float: none;
    text-transform: none;
}

*html #menu ul a /* IE6 */
{
        height: 10px;
        width: 200px;
}

*:first-child+html #menu ul a /* IE7 */
{
        height: 10px;
        width: 200px;
}

/* Clear floated elements */
#menu:after
{
        visibility: hidden;
        display: block;
        font-size: 0;
        content: " ";
        clear: both;
        height: 0;
}

* html #menu             { zoom: 1; } /* IE6 */
*:first-child+html #menu { zoom: 1; } /* IE7 */ 
```

CSS3 -主样式表-

```
@charset "utf-8";

*{
    margin: 0;
    padding: 0;
}

html{
    height:100%;
}

body {
    font: 100%/1.4 Verdana, Arial, Helvetica, sans-serif;
    background: #000;
    margin: 0;
    padding: 0;
    color: #000;
}

/* ~~ Element/tag selectors ~~ */
ul, ol, dl { /* Due to variations between browsers, it's best practices to zero padding and margin on lists. For consistency, you can either specify the amounts you want here, or on the list items (LI, DT, DD) they contain. Remember that what you do here will cascade to the .nav list unless you write a more specific selector. */
    padding: 0;
    margin: 0;
}
h1, h2, h3, h4, h5, h6, p {
    margin-top: 0;   /* removing the top margin gets around an issue where margins can escape from their containing block. The remaining bottom margin will hold it away from any elements that follow. */
    padding-right: 15px;
    padding-left: 15px; /* adding the padding to the sides of the elements within the blocks, instead of the block elements themselves, gets rid of any box model math. A nested block with side padding can also be used as an alternate method. */
}
a img { /* this selector removes the default blue border displayed in some browsers around an image when it is surrounded by a link */
    border: none;
}
/* ~~ Styling for your site's links must remain in this order - including the group of selectors that create the hover effect. ~~ */
a:link {
    color: #FC0;
    text-decoration: underline; /* unless you style your links to look extremely unique, it's best to provide underlines for quick visual identification */
}
a:visited {
    color: #FC0;
    text-decoration: underline;
}
a:hover, a:active, a:focus { /* this group of selectors will give a keyboard navigator the same hover experience as the person using a mouse. */
    text-decoration: none;
}
/* ~~ This fixed width container surrounds all other blocks ~~ */
.wrap {
    position: relative;
    width: 1250px;
    min-height: 100%;
    margin: 0 auto; /* the auto value on the sides, coupled with the width, centers the layout */
    color: #fff;
}

div.logo{
    position: absolute;
    top: 25px;
    left: 20px;
}

header {
    background-color: #999;
    color: #FC0;
    margin-left: 5px;
    height: 80px;
    width: 1240px;
    line-height: 70px;
    font-family: 'freshman' cursive;
    font-size: 50px;
    text-shadow: 8px 8px #9c9c9c;
    text-outline: 1px 1px #000;
    text-align: center;     
}

/* ~~ These are the columns for the layout. ~~ 

1) Padding is only placed on the top and/or bottom of the block elements. The elements within these blocks have padding on their sides. This saves you from any "box model math". Keep in mind, if you add any side padding or border to the block itself, it will be added to the width you define to create the *total* width. You may also choose to remove the padding on the element in the block element and place a second block element within it with no width and the padding necessary for your design.

2) No margin has been given to the columns since they are all floated. If you must add margin, avoid placing it on the side you're floating toward (for example: a right margin on a block set to float right). Many times, padding can be used instead. For blocks where this rule must be broken, you should add a "display:inline" declaration to the block element's rule to tame a bug where some versions of Internet Explorer double the margin.

3) Since classes can be used multiple times in a document (and an element can also have multiple classes applied), the columns have been assigned class names instead of IDs. For example, two sidebar blocks could be stacked if necessary. These can very easily be changed to IDs if that's your preference, as long as you'll only be using them once per document.

4) If you prefer your nav on the left instead of the right, simply float these columns the opposite direction (all left instead of all right) and they'll render in reverse order. There's no need to move the blocks around in the HTML source.

*/
.midwrap{
    float: left;
    background-color: #999;
    margin-left: 5px;
    width: 1240px;
    color: #FFF;

}

.sidebar1 {
    float: right;
    width: 250px;
    background: #999;
    padding: 10px 0px 0px 10px;
    }

.content {
    padding: 10px 0;
    width: 850px;
    float: right;
    background:#999;
}

/* ~~ This grouped selector gives the lists in the .content area space ~~ */
.content ul, .content ol {
    padding: 0 15px 15px 40px; /* this padding mirrors the right padding in the headings and paragraph rule above. Padding was placed on the bottom for space between other elements on the lists and on the left to create the indention. These may be adjusted as you wish. */
}

.clearfooter {
height: 330px;
}

/* ~~ The footer ~~ */
footer {
    margin-left:5px;
    height: 330px;
    width:1240px;
    padding: 10px 0;
    background: #69F;   
    bottom: 0;
    position: relitive;/* this gives IE6 hasLayout to properly clear */
    clear: both; /* this clear property forces the .container to understand where the columns end and contain them */
}

/*HTML 5 support - Sets new HTML 5 tags to display:block so browsers know how to render the tags properly. */
header, section, footer, aside, nav, article, figure {
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T08:02:48.890

在你的 CSS 而不是你的 body 中试试这个。

"*" { 边距：0; 填充：0；}

明星周围没有引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T05:23:09.030

和`</li>`之后`</ul>`被交换了`<li>Our Arts</li>`，这让 CSS 关闭了。为了更好地衡量，在 CSS 中`display: inline-block;`使用`#menu ul {}`and `#menu li {}`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T20:27:39.967

首先，我建议将modernizr放在头脑中。

[http://modernizr.com/](http://modernizr.com/)

我会改变：

```
div.wrap {
    left: 50%;
    margin-left: -625px;
    min-height: 100%;
    position: absolute;
    width: 1250px;
} 
```

到

```
div.wrap {
margin: 0 auto;
min-height: 100%;
position: relative;
width: 1250px; 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T20:45:29.873

布局问题通常与 HTML 或 CSS 的版本无关，除非浏览器不理解 HTML 或 CSS 或其特定版本。例如，由于 IE8- 不了解 HTML5，开发人员通常使用使用 JavaScript 块的解决方法来使其理解 HTML5 元素。

无论如何，由于您提供的代码非常长（并且您可能会发送它的小提琴版本），我建议您检查此列表：

1.  确保您的浏览器同时支持 HTML5 和 CSS3，至少与您使用的一样多。
2.  一行一行，去掉CSS规则，看看能不能找出问题出在哪里。
3.  更改您的`DOCTYPE`声明并使用全小写`html`而不是`HTML`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-02T17:51:11.770

在您的问题边缘，请记住 CSS3 是 HTML5 的一部分...

您应该更好地使用 HTML5 的功能：

*   `<header>`代替`<div id="header" class="header">`
*   `<nav>`代替`<div id="nav" class="nav">`
*   `<footer>`代替`<div id="footer" class="footer">`
*   `<aside>`为您的右侧栏
*   ETC...

# php - 我是否需要在注册表单中使用密码输入字段来输入所需的密码？

> ID：10864371
> 
> 赞同：2
> 
> 时间：2012-06-02T17:16:04.127
> 
> 标签：php, html, forms, security

我在 PHP 中构建了一个简单的注册表单。我想知道如果我决定使用简单的输入字段而不是密码输入字段来输入用户所需的密码，是否会出现安全问题。我看到其他网站在注册期间不使用密码输入，经过一番谷歌搜索后，我无法找到任何结论性的答案。

我更喜欢使用普通的文本字段，因为在注册过程中对用户来说会更容易，但我担心第 3 方会有一些方法来捕获这些。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T17:17:57.900

`<input type="password" />`an和 an之间的唯一区别`<input type="text" />`是密码 one 将所有字符都用浏览器决定的任何字符（项目符号/星号/其他）屏蔽。

唯一的一点是确保人们在输入密码时无法看到密码。

如果与服务器的通信不安全，则该字段是否为密码类型没有区别（顺便说一句，如果通信被加密也没有区别）。也就是说，如果信息很敏感，您应该使用安全通道（密码字段在这方面没有任何作用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T17:19:05.570

唯一真正的区别是他们不能与站在他们身后的人注册，因为密码将在他们的屏幕上可见。

除非您使用 https，否则密码都以纯文本形式传输。

请记住，您的用户可能不知道这是唯一的区别，并且可能对您的网站失去信心，因为他们已经习惯于隐藏密码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T17:19:55.600

密码字段旨在防止肩负。即当用户正在输入他的密码并且有人在他的肩膀上看着屏幕并且可以很容易地看到疲惫的密码时。

如果您认为这不是问题，则可以使用正常输入。

除此之外没有任何区别。两个字段都以相同的方式发送，无论是痛苦文本还是加密到服务器。差异只是isisual。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T17:18:09.083

浏览器会将用户输入的文本显示为文本，并且不会对其进行屏蔽。此外，一些浏览器可能会存储用户输入的值，并在下次有人打开页面时提供它。

此外，大多数浏览器不会提供“保存此密码”选项，因为它们不将其识别为密码字段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-02T20:01:50.070

没有明确的答案，因为浏览器可能会按照自己喜欢的方式处理密码字段。其他答案中已经很好地描述了一些可能的特征。此外，当用户告诉浏览器清除缓存信息时，浏览器可能会以不同于文本输入字段的方式处理密码字段。

一般来说，浏览器中任何与安全相关的功能都应该被`input type=password`视为密码输入，而所有其他输入元素都应该被视为其他内容。

诚然，用星号隐藏用户输入通常很麻烦。它最初是基于人们在教室、公共场所等使用计算机的想法。这方面仍然部分相关。但长期的解决方案可能是浏览器让用户决定是否将密码回显为未屏蔽。（一些浏览器已经将最近输入的字符不加掩码。）

如果您决定使用文本输入字段来读取密码，那么添加该属性`autocomplete=off spellcheck=false`可能会有所帮助。

也可以同时拥有两种类型的字段，让用户决定使用哪一种。问题是这可能会令人困惑，甚至对用户来说看起来很可疑。

# shell - 如何在不实际运行“vagrant ssh”的情况下 ssh 到 vagrant？

> ID：10864372
> 
> 赞同：169
> 
> 时间：2012-06-02T17:16:14.983
> 
> 标签：shell, command-line, ssh, vagrant

我想重现 Vagrant 在 shell 脚本中使用`ssh`命令登录到我的虚拟机的方式，所以我为我的 Vagrant 实例创建了一个别名。

`ssh`使用常规命令访问它的命令语法是什么？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2014-05-15T17:58:37.417

已经有很多答案，但它们似乎都过于复杂或解决了提问者没有的问题。

简单地：

```
# save the config to a file
vagrant ssh-config > vagrant-ssh

# run ssh with the file.
ssh -F vagrant-ssh default 
```

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2012-10-17T16:04:39.413

我不得不重新实现“vagrant ssh”，因为它的`-c`选项没有正确传递参数。这*基本上*就是它的作用（可能还有更多，但这样可以正常工作）

```
#!/bin/sh
PORT=$(vagrant ssh-config | grep Port | grep -o '[0-9]\+')
ssh -q \
    -o UserKnownHostsFile=/dev/null \
    -o StrictHostKeyChecking=no \
    -i ~/.vagrant.d/insecure_private_key \
    vagrant@localhost \
    -p $PORT \
    "$@" 
```

作为一个单行者（感谢kgadek）：

```
ssh $(vagrant ssh-config | awk 'NR>1 {print " -o "$1"="$2}') localhost 
```

考虑到当你有多个流浪主机时，这将选择所需的主机，并从配置中剔除空白行（使用 sed）：

```
HOST=name-of-my-host
ssh $(vagrant ssh-config $HOST | sed '/^[[:space:]]*$/d' |  awk 'NR>1 {print " -o "$1"="$2}') localhost 
```

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2014-09-14T09:42:10.663

在终端运行

```
vagrant ssh 
```

在另一个终端窗口/选项卡中运行

```
ps aux | grep ssh 
```

在那里，您将看到 Vagrant 执行的实际命令，如下所示：

```
ssh vagrant@127.0.0.1 -p 2222 -o Compression=yes -o DSAAuthentication=yes -o LogLevel=FATAL -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -i ~/.vagrant.d/less_insecure_private_key -o ForwardAgent=yes 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-01-03T16:26:22.777

只需将整个`vagrant ssh-config`作为配置文件传递`ssh`给[`-F configfile`](http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1)参数即可。`vagrant ssh-config`要连接的主机别名在;的第一行中定义。`Host default`表示您可以与`ssh default`.

我看不到从标准输入读取配置文件的选项，所以选择了临时文件路径。这是一个单线，之后也清理临时`$TMPDIR.vagrant-ssh-config`文件。`Vagrantfile`假设您的 vagrant box 已启动并正在运行，它需要在与您的相同目录中执行。

```
vagrant ssh-config > $TMPDIR.vagrant-ssh-config && ssh default -F $TMPDIR.vagrant-ssh-config ; rm $TMPDIR.vagrant-ssh-config 
```

注意：在我的 Mac OSX 系统上，`$TMPDIR`扩展为`/var/folders/46/yltlhtgx8m5cg68_w95wgvy41324gn/T/`（现在）。如果您的系统上未设置，请使用[另一个](https://stackoverflow.com/questions/4790471/how-can-i-get-the-temporary-directory-path-in-ubuntu) [变量或另一个文件夹。](https://stackoverflow.com/questions/2435062/what-happened-to-the-tmp-environment-variable)

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2017-08-04T18:00:55.883

我以一种非常简单的方式解决了这个问题：当你启动 vagrant box 时，它会像这样显示 ssh 地址

```
SSH address: 127.0.0.1:2222 
```

然后您可以使用 vagrant 用户、主机和您获得的端口连接到盒子

```
ssh vagrant@127.0.0.1 -p 2222 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-12-20T11:50:45.197

**如果您不需要使用标准输入**（`ssh`例如，您只想执行一个命令并注销），您可以使用：

```
vagrant ssh-config --host default | ssh -F /dev/stdin default 
```

建议使用此方法以响应[google groups](https://groups.google.com/forum/#!topic/vagrant-up/B5WIfDcIRtE)上的类似问题。

不幸的是， [bash 进程替换](http://tldp.org/LDP/abs/html/process-sub.html)也不起作用（有关更多详细信息，请参阅[unix.stackexchange](https://unix.stackexchange.com/questions/101900/why-doesnt-the-process-substitution-work-with-ssh-f)上的这个问题）。

如果您想要一个交互式外壳，您拥有的最佳选择是创建一个临时文件并将其与其他答案的建议一起使用`ssh -F`或使用。`awk`

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-08-24T07:19:58.763

您可以将 vagrant 主机配置添加到本地 ssh 配置中。

1.  **vagrant ssh-config >> ~/.ssh/config**

2.  **ssh vagrant@{主机}**

前任。猫 ~/.ssh/config

```
Host kmaster
  HostName 127.0.0.1
  User vagrant
  Port 2222..
  .... 
```

*   **ssh vagrant@kmaster**

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-07-17T21:58:45.447

如果您只想设置它以便可以使用普通的 ssh 命令行以及 scp 等，您可以运行`vagrant ssh-config`并将输出附加到您的默认 ssh 配置。如果您将“主机默认值”行替换为更具描述性的主机名，那么您应该很高兴。

```
vagrant ssh-config |sed -e "s/Host default/Host my_cool_dev_box/" >> ~/.ssh/config
ssh my_cool_dev_box 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-06-25T23:45:04.203

如果您只希望以最低限度的命令连接到您的机器，您需要知道它正在使用的端口（在执行时打印`vagrant up`或可见执行`vagrant ssh-config`）以及您的私有 SSH 密钥在哪里（执行时也可见`vagrant ssh-config`）

然后只需提供密钥和端口即可：

`ssh -p 2222 -i $HOME/vagrantenv/.vagrant/machines/default/virtualbox/private_key vagrant@127.0.0.1`

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-02-24T04:19:27.663

许多其他答案假设您安装了 Vagrant。

我在 Windows 10 上安装了 Vagrant，但我不能，`vagrant ssh`因为我使用 PuTTy 作为我的 SSH 客户端，vagrant 不会接受。

> 在 PATH 中找到的`ssh`可执行文件是 PuTTY Link SSH 客户端。Vagrant 仅与 OpenSSH SSH 客户端兼容。

但是，在 Windows 10 中，我们在 Windows 上的 Ubuntu 上也有 Bash。所以，我只是将它与以下命令一起使用：

```
ssh vagrant@127.0.0.1 -p2222 -i .vagrant/machines/default/virtualbox/private_key -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o LogLevel=Fatal 
```

在 Win10-Ubuntu 上安装 Vagrant 很容易，但出于某种原因它也希望你安装 Virtualbox，我不想这样做。

注意我已经尝试过这种`ssh default -F vagrant-ssh-config`方法，但我只是得到

> 权限被拒绝（公钥、密码）。

我猜这是因为`IdentityFile`路径是 Windows 路径，而在 Bash 中，它应该以`/mnt/c/`. 我想你可以写出文件然后修改它，如果它更适合你。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-06-09T14:01:52.500

有一种方法可以复制远程用户登录系统的方式

1.  编辑您的实例的 Vagrantfile 添加

`config.vm.network "private_network", ip: "192.168.33.10"`

这会为主机添加一个私有 IP（只要它尚未使用，就让它在 192.168 范围内成为您希望的样子）

2.  从命令行使用 vagrant reload 重新启动实例
3.  将 vagrant private_key 文件复制到您应该在您的机器上运行的某个 Linux 等效文件（例如，如果在 Windows 上，我使用 Windows 10 的 Cygwin）到您的 cygwin 主目录，并将其重命名为描述要使用密钥的主机的内容例如

`your_virtual_host_name.pem`

4.  您将在 .vagrant\machines\default\virtualbox\private_key 下找到密钥

5.  转到您的主目录并执行通常的 Unix ssh，所以

`ssh -i your_virtual_hostname.pem username@192.168.33.10`

如果您有一个标准框，则用户名可能是 vagrant，请查看 vagrant ssh-config 的输出以获取该框的 ssh 标准详细信息。

就是这样

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-03-30T18:57:43.147

**Vagrant**将私钥存储在其中`~/.vagrant.d/insecure_private_key`并使用它通过 连接到每台机器`ssh`，考虑到它被配置为连接到端口 2200（默认），它类似于：

`ssh vagrant@localhost -p 2200 -i ~/.vagrant.d/insecure_private_key`

*注意：确保私钥归运行`Vagrant`*.

尽管如果您的目标是拥有一个[多机环境](https://docs.vagrantup.com/v2/multi-machine/)，您可以使用`config.vm.define`.

这是一个示例，说明具有 2 台机器的环境，一台被调用`web`，另一台是`databases`：

```
config.vm.define 'web', primary: true do |web|
        web.vm.box = 'CentOS64'
        web.vm.hostname = 'vic-develop'
        web.vm.network 'private_network', ip: '192.168.50.10', virtualbox__intnet: true
        web.vm.synced_folder '../code', '/var/www/project', :mount_options => ["dmode=777,fmode=777"]

        web.vm.provision 'ansible' do |ansible|
            ansible.playbook = 'development-web.yml'
            ansible.sudo = true
        end
end

config.vm.define 'databases' do |db|
    db.vm.box = 'CentOS64'

    db.vm.network 'private_network', ip: '192.168.50.20', virtualbox__intnet: true
    db.vm.network :forwarded_port, guest: 3306, host: 8206

    db.vm.provision 'ansible' do |ansible|
        ansible.playbook = 'development-db.yml'
        ansible.sudo = true
    end
end 
```

然后，您将拥有每台机器可用的所有 Vagrant 命令，即`vagrant ssh web`和`vagrant provision databases`.

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-11-10T11:22:40.527

`ssh vagrant@<host>`密码：`vagrant`

例子：

*   `ssh vagrant@vagrant.local`

*   或在检查 IP 之后（从内部，使用`vagrant ssh`）`ssh vagrant@172.28.128.3`

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-03-23T18:05:14.750

您可以将 vagrant 主机的 ssh 配置添加到 ssh 配置。

1.  在 vagrant 文件夹中获取 vagrant 机器的 ssh 配置：`vagrant ssh-config`

2.  打开`{UserDir}/.ssh/config`并附加上一个命令的结果。**注意**：第一行`Host default`表示您稍后将用于`ssh`命令的别名。将其命名为您的流浪机器或目录。如果你只有一个 vagrant dir - 你可以命名它`Host vagrant`

3.  SSH到流浪者：`ssh vagrant`。姓氏是上一步的别名。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-09-09T02:07:14.073

您可以采用任何`ssh-config`参数，并将它们作为`-o Key=value`. 因此，对于简单的单主机 vagrant 设置（对于多主机设置，您可能需要做更多的工作），您可以执行以下操作（或`grep`根据需要替换）：`perl``perl``sed`

```
ssh `vagrant ssh-config | tail -8 | perl -pe 's/^\s+/-o@/; s/\s/\=/;s/@/ /;s/\n/ /'` vagrant@localhost 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-11-12T07:38:14.273

我的环境 是Win7 + Centos。大多数同意的答案对我不起作用。在尝试失败后`ssh -p [port] [usrname]@127.0.01`，我只是使用 XShell 添加一个带有 vagrant 端口和用户名的新会话。

**有用。**

也许 Xshell 是一个候选人。

# javascript - 用户创建的应用程序的安全性

> ID：10864373
> 
> 赞同：0
> 
> 时间：2012-06-02T17:16:28.003
> 
> 标签：javascript, python, security, dsl

我有一个聊天网站。这是一个非常标准的 IRC 风格聊天，可以在您的浏览器中使用。我希望允许用户创建和上传可以增强聊天体验的应用程序。应用程序的一个示例是问答游戏。用户可以通过发布聊天消息来使用它，例如`/addtriviaquestion "foo"`.

我坚持的技术问题是我如何在执行用户代码的同时防止它是恶意的。

我的网站是用 django/python 构建的。我很想为这些应用程序使用 javascript。例如，琐事模块可以这样工作：

```
register.command('/addtriviaquestion', function() {foo;});
register.command('/answerquestion', function() {foo;}); 
```

任何人都知道如何让 python 执行这个被监禁和不受信任的 javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T01:21:38.913

也许您可以使用执行 javascript 的 phantomjs [http://code.google.com/p/phantomjs/](http://code.google.com/p/phantomjs/)来获取由 javascript 生成的 html，如这篇文章[http://inka-labs.com/es/blog/2012/ 05/24/get-executed-html/](http://inka-labs.com/es/blog/2012/05/24/get-executed-html/)然后用 BeautifulSoup 清理代码，问题是结果不再是动态 HTML。另一个想法是让上传的代码在具有不同域的 iframe 上运行，在这种情况下，默认浏览器 iframe 安全性会阻止 iframe 脚本修改其父元素的任何尝试。

# iphone - 改变音频口音 iPhone sdk 的方法

> ID：10864377
> 
> 赞同：1
> 
> 时间：2012-06-02T17:17:33.977
> 
> 标签：iphone, ios, avaudioplayer, openal

我正在寻找一个框架或**第三方 API 来改变音量的重音**，因为 Talking Tomcat 正在改变音量音高，同样我需要改变口音。

如果改变口音不可行，那么任何设置音高的方法都可以代表类似于印度、阿拉伯、英国或美国等任何口音的东西。

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:36:41.897

作为第 3 方库，我推荐[Dirac3](http://dirac.dspdimension.com/Dirac3_Technology_Home_Page/Dirac3_Technology.html)。库中包含一些示例项目。

您还可以从[Make that Talking App 下载使用 Dirac 的示例应用程序！](http://purplelilgirl.tumblr.com/post/9377269385/making-that-talking-app)由小伟陈。这个应用程序还在下面使用了 Cocos2D（这并不是真正需要的），但无论如何都可以达到目的。

# android - 如何使用动画为搜索栏设置动画

> ID：10864388
> 
> 赞同：8
> 
> 时间：2012-06-02T17:18:45.663
> 
> 标签：android, animation, seekbar

我是安卓新手。我正在尝试为水平搜索栏设置动画，但到目前为止还做不到。我只想要一个动画，其中 seekbar 在一段时间内显示进度，比如 1 分钟。有人可以就如何为标准搜索栏设置动画提出建议/提供想法/代码片段吗？

我应该使用什么样的动画，比如 objectanimator 或 valueAnimation？我是否需要定义一个运行方法（不确定！）来为拇指设置动画以移动到下一个位置？

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-02T21:39:03.780

一种方法是使用 ValueAnimator：

```
final SeekBar seekBar = findViewById(R.id.seekBar);
ValueAnimator anim = ValueAnimator.ofInt(0,seekBar.getMax());
anim.setDuration(1000);
anim.addUpdateListener(new AnimatorUpdateListener() {

        @Override
        public void onAnimationUpdate(ValueAnimator animation) {
            int animProgress = (Integer) animation.getAnimatedValue();
            seekBar.setProgress(animProgress);
        }
    }); 
```

另一种方法可能是（没有测试过）：

```
final SeekBar seekBar =  findViewById(R.id.seekBar); 
ObjectAnimator anim = ObjectAnimator.ofFloat(seekBar, "progress", 0,seekBar.getMax());
anim.setDuration(10000);
anim.start(); 
```

# objective-c - CGContextStrokePath(context) 崩溃。为什么？

> ID：10864394
> 
> 赞同：0
> 
> 时间：2012-06-02T17:19:23.763
> 
> 标签：objective-c, ios, quartz-2d, cgcontext

我是 Quartz 2D 和上下文世界的新手。为什么这段代码会崩溃？

```
NSMutableData* pdfData = [[NSMutableData alloc] initWithLength:1000];

CGRect bounds = (CGRectMake(100, 100, 100, 100));
NSDictionary* documentInfo = nil;

UIGraphicsBeginPDFContextToData (pdfData,
                                 bounds,
                                 documentInfo);

CGContextRef context = UIGraphicsGetCurrentContext();
NSLog (@"context: %@", context);

// Drawing lines with a white stroke color
CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0);
// Draw them with a 2.0 stroke width so they are a bit more visible.
CGContextSetLineWidth(context, 2.0);

// Draw a single line from left to right
CGContextMoveToPoint(context, 10.0, 30.0);
CGContextAddLineToPoint(context, 310.0, 30.0);
CGContextStrokePath(context);

[pdfData release]; 
```

代码在 CGContextStrokePath(context) 与 EXC_BAD_ACCESS 崩溃

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:32:29.143

在绘制到 PDF 图形上下文之前，您需要使用 `UIGraphicsBeginPDFPage`或 创建一个页面`UIGraphicsBeginPDFPageWithInfo`。

```
CGRect bounds = CGRectMake(0, 0, 100, 100);
UIGraphicsBeginPDFContextToData(pdfData, bounds, nil);
UIGraphicsBeginPDFPage(bounds, nil); 
```

# php - PHP/ARRAYS/API/JSON - 我不明白为什么我没有得到任何结果

> ID：10864395
> 
> 赞同：2
> 
> 时间：2012-06-02T17:19:36.543
> 
> 标签：php, arrays

所以我得到了这个数组（见下文），我通过获取 API URL 的 file_contents 然后对结果执行 json_decode($url,true) 得到一个数组。

```
Array ( [0] => 
        Array ( 
            [Id] => 1104 
            [Key] => 100-og 
            [Name] => $100 OG 
            [Category] => Hybrid 
            [Symbol] => 100 
            [Abstract] => 
            [Url] => http://www.leafly.com/hybrid/100-og 
            [DetailUrl] => http://www.leafly.com/api/details/100-og 
            [RateUrl] => http://www.leafly.com/me/create/100-og 
            [Rating] => 8.2 
            [TopEffect] => Euphoric 
            [TopMedical] => Stress 
            [TopActivity] => Relax at home ) 
        ) 
```

因此，该数组位于一个名为 $strain_data 的变量中，当我尝试访问该数组时，可以这样说： echo $strain_data['name']; 我收到这样的错误：

> 注意：未定义的索引：名称

我看到的唯一能做的就是计算总共有多少个项目 ($strain_total = count($strain_data);) 说有 545 个。

我真的不明白。如果您能帮助解释这一点，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T17:21:26.710

区分大小写会严重影响您。-`Name`不是`name`。除此之外，您忘记了，`[0]`因为您有一个数组数组。

尝试`$strain_data[0]['Name']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T17:23:06.663

这是一个关联数组。尝试这个

```
$strain_data[0]['Name']; 
```

# python - Python Tkinter - 在菜单中添加外部函数作为命令

> ID：10864410
> 
> 赞同：3
> 
> 时间：2012-06-02T17:22:20.300
> 
> 标签：python, menu, command, tkinter, external

我在使用 Tkinter 菜单时遇到问题。这是我的 gui.py 文件的代码：

```
from tkinter import *
from SS2 import file

class AppUI(Frame):

    def __init__(self, master=None):
        Frame.__init__(self, master, relief=SUNKEN, bd=2)

        self.menubar = Menu(self)

        menu = Menu(self.menubar, tearoff=0)
        self.menubar.add_cascade(label="File", menu=menu)
        menu.add_command(label="Open", command=file.open())
        menu.add_command(label="Save")
        menu.add_command(label="Save as...")
        menu.add_command(label="Exit",
                         command=root.quit)

        menu = Menu(self.menubar, tearoff=0)
        self.menubar.add_cascade(label="Image", menu=menu)
        menu.add_command(label="Size")
        menu.add_command(label="Rotate")
        menu.add_command(label="Crop")

        menu = Menu(self.menubar, tearoff=0)
        self.menubar.add_cascade(label="Color", menu=menu)

        menu = Menu(self.menubar, tearoff=0)
        self.menubar.add_cascade(label="Filter", menu=menu)
        menu.add_command(label="Blur")
        menu.add_command(label="Contour")
        menu.add_command(label="Emboss")
        menu.add_command(label="Smooth")
        menu.add_command(label="Sharpen")

        menu = Menu(self.menubar, tearoff=0)
        self.menubar.add_cascade(label="Help", menu=menu)
        menu.add_command(label="About")

        try:
            self.master.config(menu=self.menubar)
        except AttributeError:
            # master is a toplevel window (Python 1.4/Tkinter 1.63)
            self.master.tk.call(master, "config", "-menu", self.menubar)

        self.canvas = Canvas(self, bg="white", width=400, height=400,
                             bd=0, highlightthickness=0)
        self.canvas.pack()

root = Tk()

app = AppUI(root)
app.pack()

root.mainloop() 
```

这是我的 file.py 的代码：

```
from tkinter import *
from tkinter.filedialog import askopenfilename

def open():
    filename = askopenfilename(filetypes=[("allfiles","*"),("imagesfiles","*.png")]) 
```

问题是，当我运行 gui.py 文件时，文件对话框总是出现在菜单之前，当我关闭它并尝试通过菜单打开访问它时，什么也没有发生。我在这里做错了什么？请提前帮助和感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:29:45.447

命令应该给出方法的名称。您正在做的是*调用*该方法。然后 Tkinter 将使用该方法的返回值作为按钮命令。解决方案：省略括号。

```
..., command=file.open 
```

代替

```
..., command=file.open() 
```

不过，您为退出按钮做得对！

# javascript - jQuery - 全局变量问题

> ID：10864411
> 
> 赞同：0
> 
> 时间：2012-06-02T17:22:32.027
> 
> 标签：javascript, jquery, html, css

我遇到了一个问题，可能是使用全局变量的经验不足，这会导致一些问题。

请检查这个[http://jsfiddle.net/ZgXKx/](http://jsfiddle.net/ZgXKx/)当你点击**点击我！**我正在使用全局变量为某些元素动态设置 id。

我对这段代码有问题：

```
$("#service-sets").on('click', "#facebook-del-"+a, function() {           
    var aa = $("#facebook-del-"+a).parent().parent().parent().attr("id");
    $('#'+aa).remove(); 
```

它没有进入 click 事件，因为`"#facebook-del-"+a`in`.on('click')`不工作，而 click 事件中的一个正在工作（显示 value `"#facebook-del-1"`）。

当我像这样更改代码时，它没有问题

```
$("#service-sets").on('click', "#facebook-del-1", function() {           
    var aa = $("#facebook-del-"+a).parent().parent().parent().attr("id");
    $('#'+aa).remove(); 
```

你可以在这里查看[http://jsfiddle.net/ZgXKx/1/](http://jsfiddle.net/ZgXKx/1/)

那么我犯了什么错误？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:28:45.653

```
$("#service-sets").on('click', "[id^=facebook-del]", function() {          
    $(this).closest('div.tag').remove();
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/qxKHg/)**

这里，

`[id^=facebook-del]`是那些以 .`id`开头的元素（交叉） `facebook-el`。因此，像这样设置委托事件不需要使用全局变量进行任何索引`a`。

`$(this).closest('div.tag')`target to `div.tag`，这是点击的十字架的容器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T17:27:39.863

问题源于这样一个事实，与它看起来相反，“a”变量**不是**全局的。它位于 jsfiddle 本身为您创建的函数中。

将左侧的控件设置为将您的代码放在“onload”处理程序中`<head>`而不是放在“onload”处理程序中，它会起作用。

此外，没有理由使用该代码执行您正在执行的操作来删除添加的标记。也就是说，找到一个元素，获取它的“id”值，然后通过“id”重新找到它的过程是没有意义的。一旦你找到了带有“.parent()”调用的元素（这本身就是一种非常脆弱的做事方式；给外部包装器一个类然后使用会更好`.closest(".whatever")`），你就有了它，并且没有理由再次找到它。

*编辑*——现在我想起来了，尽管我所说的“a”是真的——它并不是真正的全球性——在这种情况下应该没关系。然而，它是 jsfiddle 激怒的常见原因（当然，祝福他们的心）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T17:34:09.883

`a`在点击回调之前，您不会增加`#facebook-button`。当它运行时：

```
$("#service-sets").on('click', "#facebook-del-"+a, function() {           
    ..
}); 
```

`a`仍然是 0，并且你只处理`#facebook-del-0`永远不会存在的点击事件。

您可以使用一个类来代替。给你的关闭按钮类“facebook-del”，然后用它来关闭它：

```
$("#service-sets").on('click', '.facebook-del', function() {           
    $(this).parent().parent().parent().remove();
}); 
```

[**JSFiddle**](http://jsfiddle.net/Paulpro/ZgXKx/3/)

# javascript - 隐藏所有网站的 div

> ID：10864421
> 
> 赞同：2
> 
> 时间：2012-06-02T17:23:52.907
> 
> 标签：javascript, html, css

由于我们无法检测一个网站是否在 php 中是独立的，所以我在 javascript 中完成了它。我想用一个白色的 div 隐藏所有网站，并在其中写一个小句子说将应用程序添加到主屏幕。（我在测试时将其设为红色）。

我当然也尝试过`<div style="width:100%;height:100%;" ></div>`100% 的 body 和 html；但是页面的右侧和底部有一个空白区域。（我认为这是用于滚动条）。

然后我将宽度和高度设置为 110% 并将 body 和 html 的溢出设置为隐藏；但它没有用。（溢出问题：隐藏在 iPhone 中）。

然后我想将我的 div 的大小设置为设备的大小（使用媒体查询），但是当我从纵向切换到横向时，大小保持不变并且 div 不会扩展。

有人可以告诉我这样做的方法吗？（也许使用javascript来改变类）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:28:19.787

只需将 div 放在身体下方：

```
<body>
    <div id="myDiv"></div>
</body> 
```

CSS：

```
#myDiv {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 999;
} 
```

这将使 div 与屏幕一样大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T17:28:33.233

您可以使用以下样式：

```
​div {
    width: 100%;
    height: 100%;
    position: fixed;
    left: 0;
    top: 0;
    background: #fff;
    z-index: 100000;
}​ 
```

如果您需要隐藏正文滚动条，只需添加

```
body {
    overflow: hidden;
} 
```

**演示： http:** [//jsfiddle.net/MJAAU/](http://jsfiddle.net/MJAAU/) ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T17:43:07.767

使用位置：固定，宽度：100%；& height:100% 对于那个 div & 使 html & body 的高度和宽度 100% 是安全的。我想这会对你有所帮助。

# c++ - 来自服务器端的 C++ 套接字主机名

> ID：10864423
> 
> 赞同：0
> 
> 时间：2012-06-02T17:24:04.850
> 
> 标签：c++, sockets, client, hostname

您好，我刚刚第一次拿起套接字，我正在使用本教程来学习基本步骤....

[http://www.linuxhowtos.org/C_C++/socket.htm](http://www.linuxhowtos.org/C_C++/socket.htm)

到目前为止一切似乎都很好，但我的问题是我不确定如何让我的主机名从客户端连接到服务器。有没有办法可以在服务器端输出主机名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:31:04.900

根据定义，客户端在您连接它们之前不会连接到服务器。因此，为了让客户端发现服务器的身份，您必须使用*其他一些协议*。常见的、简单的情况当然是 DNS。您为 myservice.mydomain.com 创建一个 DNS 条目并让客户端查找它。

如果您的客户不能“知道名称”，那么还有其他服务发现协议，例如 Bonjour。此处的一般协议类在 Wikipedia 下进行了描述

[http://en.wikipedia.org/wiki/Zero_configuration_networking](http://en.wikipedia.org/wiki/Zero_configuration_networking)

如果每个人都在同一台机器上，那么主机名是文字字符串“localhost”，它映射到 IP 127.0.0.1。

# python - lxml - 在 findall() 中使用正则表达式按属性值查找标签

> ID：10864426
> 
> 赞同：4
> 
> 时间：2012-06-02T17:24:39.873
> 
> 标签：python, html, lxml

我正在尝试使用 lxml 来获取格式为的评论数组

```
<div id="comment-1">
  TEXT
</div>

<div id="comment-2">
  TEXT
</div>

<div id="comment-3">
  TEXT
</div>
... 
```

我尝试使用

```
html.findall(".//div[@id='comment-*']") 
```

但这会搜索文字星号。

对于我正在尝试做的事情，正确的语法是什么？

**编辑：**我终于让它工作了

```
doc = lxml.html.parse(url).getroot()
comment_array = doc.xpath('.//div[starts-with(@id, "comment-")]') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-06T08:51:54.153

You can use [regular XPath functions](https://www.w3.org/TR/xpath/#corelib) to find the comments as you suggested:

```
comments = doc.xpath('.//div[starts-with(@id, "comment-")]') 
```

But, for more complex matching, you could use **regular expressions**: with lxml, XPath supports regular expressions in the EXSLT namespace. See the official documentation [Regular expressions in XPath](http://lxml.de/xpathxslt.html#regular-expressions-in-xpath).

Here is a demo:

```
from lxml import etree

content = """\
<body>
<div id="comment-1">
  TEXT
</div>

<div id="comment-2">
  TEXT
</div>

<div id="comment-3">
  TEXT
</div>

<div id="note-4">
  not matched
</div>
</body>
"""

doc = etree.XML(content)

# You must give the namespace to use EXSLT RegEx
REGEX_NS = "http://exslt.org/regular-expressions"

comments = doc.xpath(r'.//div[re:test(@id, "^comment-\d+$")]',
                          namespaces={'re': REGEX_NS}) 
```

To see the result, you can "dump" the matched nodes:

```
for comment in comments:
    print("---")
    etree.dump(comment) 
```

You get:

```
---
<div id="comment-1">
      TEXT
    </div>

---
<div id="comment-2">
      TEXT
    </div>

---
<div id="comment-3">
      TEXT
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:45:13.110

该`path`部分[`html.findall`](http://lxml.de/api/lxml.etree._Element-class.html#findall)仅允许将 an[`XPath subset`](http://lxml.de/xpathxslt.html#xpath)用作表达式，默认情况下不使用正则表达式。

为此，您必须`EXSLT`按照描述使用扩展名[`here`](http://lxml.de/xpathxslt.html#regular-expressions-in-xpath)- 或者您可以使用[`xpath core functions`](http://www.w3.org/TR/xpath/#corelib).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:18:01.773

I had a similar desire and did something that while I'm not terribly proud of, got the job done.

```
def node_checker(node):
    if node.attrib['id'].find('hurf-durf') > -1:
        return True
    else:
        return False

for node in itertools.ifilter(node_checker, r.iterdescendants(tag='sometag')):
    print node.tag 
```

Not my finest work, but it got me close enough to getElementById with some flexibility that I was able to move on to another problem.

# facebook - 仅当用户喜欢某个页面时才在网站上显示内容

> ID：10864427
> 
> 赞同：0
> 
> 时间：2012-06-02T17:25:26.777
> 
> 标签：facebook

我是 Facebook 页面的管理员，想在访问我的域时向喜欢我的页面的人显示一条消息。

我可以找到一些关于如何将其作为页面选项卡执行的教程，但我想在我的网站上展示它。我怎样才能让它工作？我已经扫描了[https://developers.facebook.com/docs/guides/web/](https://developers.facebook.com/docs/guides/web/)但我不知道从哪里开始？

我已经做了一个应用程序，并且有一个应用程序 ID 和应用程序秘密......但是......

谁能指出我正确的方向？

* * *

谢谢你的回答，但我猜我不清楚我想要什么。我不需要的是：一种注册点击赞按钮的方法。

我想要的是以下内容：用户喜欢我的 Facebook 页面，然后访问我的网站。在我的网站上，我想向用户显示一条消息，例如：“你在 Facebook 上喜欢我们！干得好” 将来我们想向用户显示免费啤酒或其他东西的优惠券代码。

很抱歉对于这个误会！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:45:21.027

You need to create an event listener. It basically 'watches' the like button and 'snitches' when someone clicks on it

Add this somewhere in the head of your document

```
 <div id="fb-root"></div>
 <script src="http://connect.facebook.net/en_US/all.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    FB.init({ apiKey: 'xxxxxxxxxxxxx' });

 });
</script> 
```

Now we add the snitch

```
window.fbAsyncInit = function() {
 FB.Event.subscribe('edge.create', function(href, widget) {
 alert('You just liked the stUrbs URL '+href);

 });
 //Add the comment snitch here if you need it. Shown below
 }; 
```

You can go further and snitch when someone adds a comment:

```
 FB.Event.subscribe('comment.create', function(href, widget) {
alert('You just commented on stUrbs URL '+href);

 }); 
```

Naturally, you'll want to do something more elegant than alerts

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T17:30:03.070

我假设您使用 javascript，因为您写了“当他们访问我的域时”。我从我的一个旧项目中挖掘了这段代码：

```
// load fb
// don't load if already loaded
var js, id = 'facebook-jssdk';
if(document.getElementById(id)){
    return;
}

js = document.createElement('script');
js.id = id;
js.async = true;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
document.getElementsByTagName('head')[0].appendChild(js);

// when fb has loaded, initialize and add some listeners
window.fbAsyncInit = function() {
    FB.init({appId: null, status: true, cookie:true, xfbml:true, trace:true});
    FB.Event.subscribe('edge.create', function(h, widget) {
        // h = liked link
            // do something eg show message or save state via js cookie or ajax php call
    });
    FB.Event.subscribe('edge.remove', function(h, widget) {
        // h = unliked link
            // do something ag hide message or save state via js cookie or ajax php call
    });
}; 
```

这实际上是对 facebook javascript API 加载脚本的修改。

# asp.net-mvc - 获取我们调用的网站的 URL

> ID：10864432
> 
> 赞同：3
> 
> 时间：2012-06-02T17:26:05.253
> 
> 标签：asp.net-mvc, url, httpcontext

我正在尝试获取当前网站的路径，并且这样做是为了获取 url。

```
Uri uri = HttpContext.Current.Request.Url;
string callbackUrl  = uri.Scheme + "://" + uri.Host + (uri.IsDefaultPort ? "" : ":" + uri.Port) + "/Work"; 
```

它在开发服务器上运行良好，但在作为 https 站点的生产环境中不起作用。

uri.Scheme 给了我 http。我在这里做错了什么。当从 https 站点调用此代码时，是否有 uri.Scheme 返回 https 而不是 http 的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:36:45.780

IIS 对 https 请求执行一些影响 Request.Url 的过滤。最后做了一些谷歌搜索，似乎有一些限制。您可能必须根据[此](http://blog.stevensanderson.com/2008/08/05/adding-httpsssl-support-to-aspnet-mvc-routing/)博客文章提出自定义解决方案。

# r - 将每个元素与对象的所有其他元素组合在一起（叉积）

> ID：10864433
> 
> 赞同：4
> 
> 时间：2012-06-02T17:26:25.970
> 
> 标签：r, cross-product

我有两个整数向量，比如说`v1=c(1,2)`和`v2=c(3,4)`，我想组合并获得它作为结果（作为 data.frame 或矩阵）：

```
> combine(v1,v2) <--- doesn't exist
1 3
1 4
2 3
2 4 
```

这是一个基本案例。稍微复杂一点怎么样 - 将每一行与其他行结合起来？例如，假设我们有两个 data.frames 或矩阵 d1 和 d2，我们想将它们组合起来得到以下结果：

```
d1
1 13
2 11

d2
3 12
4 10

> combine(d1,d2) <--- doesn't exist
1 13 3 12
1 13 4 10
2 11 3 12
2 11 4 10 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T17:39:15.563

对于向量的简单情况，有`expand.grid`

```
v1 <- 1:2
v2 <- 3:4
expand.grid(v1, v2)
#  Var1 Var2
#1    1    3
#2    2    3
#3    1    4
#4    2    4 
```

~~我不知道会自动执行您想要对数据框执行的操作的功能~~（请参阅编辑）

我们可以使用 expand.grid 和 cbind 相对轻松地完成此操作。

```
df1 <- data.frame(a = 1:2, b=3:4)
df2 <- data.frame(cat = 5:6, dog = c("a","b"))

expand.grid(df1, df2) # doesn't work so let's try something else
id <- expand.grid(seq(nrow(df1)), seq(nrow(df2)))
out <-cbind(df1[id[,1],], df2[id[,2],])
out
#    a b cat dog
#1   1 3   5   a
#2   2 4   5   a
#1.1 1 3   6   b
#2.1 2 4   6   b 
```

* * *

编辑：正如 Joran 在评论中指出的那样`merge`，我们为数据框做了这件事。

```
df1 <- data.frame(a = 1:2, b=3:4)
df2 <- data.frame(cat = 5:6, dog = c("a","b"))
merge(df1, df2)
#  a b cat dog
#1 1 3   5   a
#2 2 4   5   a
#3 1 3   6   b
#4 2 4   6   b 
```

# python - Python 线程和子进程

> ID：10864434
> 
> 赞同：3
> 
> 时间：2012-06-02T17:26:33.460
> 
> 标签：python, multithreading, gtk

所以我遇到了线程问题。我已经包含了一个类似于我在程序中遇到的示例。当我运行以下代码时，它只会在按下菜单中的“退出”按钮后打印“hello”。它似乎挂在 subprocess.call() 上。我不明白出了什么问题！

另外，我对 Python 中的线程没有经验，而且我对整个语言都是新手，所以请随意对我大喊大叫，因为结构缺陷以及 Python 编程约定！:)

谢谢！

```
import threading
import subprocess

import gtk

class TestDaemon:
    def __init__(self):

        # start thread here
        cmdman = CommandManager()
        threading.Thread(target=cmdman.run, args=('CmdThread', 1)).start()

        self.icon = gtk.StatusIcon()
        self.icon.set_from_stock(gtk.STOCK_ABOUT)
        self.icon.set_visible(True)

        self.menu = gtk.Menu()
        self.menu_item = gtk.ImageMenuItem(gtk.STOCK_QUIT)
        self.menu_item.connect('activate', self.quit_app, self.menu)
        self.menu.append(self.menu_item)

        self.icon.connect('popup-menu', self.popup_menu, self.menu)
        self.icon.set_visible(True)

        gtk.main()

    def quit_app(self, widget, data = None):
        gtk.main_quit()

    def popup_menu(self, widget, button, time, data = None):
        if button == 3 and data:
            data.show_all()
            data.popup(None, None, gtk.status_icon_position_menu,
                       3, time, self.icon)

class CommandManager:
    def __init__(self):
        pass

    def run(self, *args):
        subprocess.call('echo "hello"', shell=True)

if __name__ == '__main__':
    TestDaemon() 
```

编辑：我忘了提，如果我在 subprocess.call() 之前添加一个 sys.stdout.write()，sys.stdout.write() 将运行，但 subprocess.call() 不会。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T20:44:30.603

（最初作为评论发布）：

退出前加入线程：

```
class TestDaemon:
    def __init__(self):

        # start thread here
        cmdman = CommandManager()
        self.cmdThread = threading.Thread(target=cmdman.run, args=('CmdThread', 1))
        self.cmdThread.daemon = True
        self.cmdThread.start()

        ...

    def quit_app(self, widget, data = None):
        self.cmdThread.join()
        gtk.main_quit() 
```

将线程设置为守护进程是针对主线程引发一些异常并且未调用 join() 的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:28:24.757

您应该使用`gtk.mainloop()`而不是`gtk.main()`then 它应该可以工作。

这里的问题是`gtk.main()`阻塞并且不允许其他线程运行，它可能不会释放 GIL。

# assembly - 在模式 13h（X86 汇编）下使文本看起来正常

> ID：10864435
> 
> 赞同：1
> 
> 时间：2012-06-02T17:26:34.660
> 
> 标签：assembly, x86

我正在使用 X86 Assembly 来制作一个带有 GUI 而不仅仅是文本的操作系统。所以我将视频模式设置为 13h（320x200,256 色），这样我就可以绘制对话框和排序。但是当我想打印文本时，它会像像素一样大。使用图形模式时，有没有办法以类似于文本视频模式（0-3）的分辨率打印文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:33:16.327

> 使用图形模式时，有没有办法以类似于文本视频模式（0-3）的分辨率打印文本？

唯一的方法是使用高分辨率图形模式。VGA 80x25 文本对应于 720x400 像素模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:55:57.907

基本上没有。如果你真的必须使用模式 13h，你可以使用抗锯齿字体，另一方面，还有其他模式，但不如 13h 兼容，可以为你提供 640x400x256 甚至更高，寻找更高分辨率的 VESA 标准。

# django - 获取 TypeError：'Module' 对象在 celery 任务装饰器上不可调用

> ID：10864436
> 
> 赞同：7
> 
> 时间：2012-06-02T17:26:39.727
> 
> 标签：django, celery

在为 django 试用 celery 时，我遇到了 @task 装饰器的问题。这是在 Windows 7 上运行的。

在我的 celerytest.tasks 模块中，我有以下代码

```
from celery import task

@task
def add(x,y):
    return x + y 
```

从命令提示符我运行：

```
python manage.py shell 
```

尝试从 shell 导入我的模块：

```
from celerytest.tasks import add 
```

我收到以下错误：

```
>>> from celerytest.tasks import add
Traceback (most recent call last):
File "<console>", line 1, in <module>
File "d:\...\celerytest\tasks.py", line 8, in <module>
   @task
TypeError: 'module' object is not callable 
```

我试着用谷歌搜索了很长时间，但似乎我是世界上唯一一个遇到这个问题的人。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T17:53:08.000

好吧，我正在阅读 2.6.0 rc3 的文档，但安装了 2.5.3。

[http://ask.github.com/celery/django/first-steps-with-django.html](http://ask.github.com/celery/django/first-steps-with-django.html)

像这样使用导入时：

```
from celery.task import task 
```

一切似乎都有效。

# javascript - 下划线模板选择器

> ID：10864443
> 
> 赞同：1
> 
> 时间：2012-06-02T17:27:50.190
> 
> 标签：javascript, backbone.js, underscore.js

我使用下划线模板来呈现我的页面。当我使用时，问题就开始了：

```
$(function(){
   console.log($('.input-placeholder'));
}); 
```

我有时可以访问它们，有时它只是不起作用，因为页面在文档加载后呈现。

所以我用

```
$('#application').html(_.template('<div class="input-placeholder"></div>', {})); 
```

它有时会打印到控制台它找到了输入占位符，但并非一直如此。如何确保在加载模板后触发 $(function(){})。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:11:34.347

[http://lostechies.com/derickbailey/2011/11/09/backbone-js-object-literals-views-events-jquery-and-el/](http://lostechies.com/derickbailey/2011/11/09/backbone-js-object-literals-views-events-jquery-and-el/)

在 render 方法中读取模板：

```
 Backbone.View.extend({
  render: function(){
    var html = _.template($("#my-template"));
    this.$el.html(html);
  }
}); 
```

然后等到 DOMReady 事件触发之后再启动您的应用程序，创建您的视图实例并呈现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T00:46:09.040

我不确定您要达到什么目标，但您可以尝试这种替代 Derick 解决方案的方法。

```
Backbone.View.extend({
    el: document.createElement('div'),
    template: null,
    render: function(){
        if(this.template === null){
            this.template = _.template($('#my-template'));
        }
        this.$el.html(this.template({}));
    }
}); 
```

请注意，如果您这样做：

```
var something = _.template('<div><%= haha %></div>'); 
```

`something`当你给它数据时变成一个给你html的函数，你不应该每次都重新编译。

# java - 从 .smd 模型导入 3D 骨骼动画

> ID：10864453
> 
> 赞同：4
> 
> 时间：2012-06-02T17:29:11.903
> 
> 标签：java, opengl, lwjgl

我正在编写一个 .smd 导入器，但我被困在骨骼动画部分。问题是我不知道它是如何工作的。我正在使用它[来](https://developer.valvesoftware.com/wiki/Studiomdl_Data)编写导出器，但它没有显示如何使用存储在文件中的信息。

*我想所有具有相同骨骼 id 的顶点都应该被分组、平移和旋转，因为你不能旋转每个顶点。但我不知道我是否正确，即使我是，我仍然不知道如何通过脚本来做到这一点......*

所以问题是：**我如何使用存储在文件中的骨骼动画信息？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-03T00:09:54.873

我不熟悉 SMD 格式，但这里有......

***注意：**此答案假设您知道如何为对象/节点构造复合变换。这是结合了它的平移、旋转和缩放的矩阵（虽然 SMD 中似乎没有使用缩放）。此外，还使用了矩阵乘法、矩阵求逆和矩阵 * 向量乘法。*

## 骨骼和动画

模型的骨骼节点形成一棵树；每个骨骼都有一个父骨骼，除了根骨骼（`nodes`截面）。每个节点都有自己的局部变换（位置和旋转）。

**局部节点变换**：节点的局部变换是一个由其位置和旋转构成的 4x4 矩阵，它将点从其局部空间变换到其父节点空间：如果一个向量表示节点空间中的一个位置，则将其与矩阵相乘得到父空间中的那个向量。有关如何执行此操作的详细信息，请参阅[此链接。](http://www.matrix44.net/cms/notes/opengl-3d-graphics/basic-3d-math-matrices)[谷歌](http://www.google.com/search?q=3d+matrix+math)更多。

在 SMD 中，骨骼变换*仅*在动画的关键帧中定义（该`skeleton`部分）。“参考”SMD 文件具有单帧动画；模型**参考位置**中每个骨骼节点的位置和旋转。

动画 SMD 文件具有包含多个帧的动画序列，每个帧为（某些）骨骼指定不同的变换。播放动画时，您根据帧时间和当前场景/游戏时间在帧之间进行插值，并为每个骨骼提供变换（位置 + 旋转）。

## 获取静止骨骼变换

在预处理中（加载网格时左右），您需要计算所谓的“静止”骨骼变换。这些是每个骨骼在**参考位置**时的模型到骨骼空间变换。原因如下：

所有顶点位置都在**模型空间**中定义，但最终，顶点变换必须从**骨骼空间**开始，因为您希望顶点与单个骨骼一起移动。因此，必须首先将顶点位置转换为骨骼空间。这就是静止骨骼变换的用武之地。

所以我们正在寻找的静止变换将顶点从模型空间变换到骨骼空间。将所有骨骼放在参考位置。从根节点开始遍历树，并连接变换矩阵。因此，例如，对于上臂节点，您将获得转换：

```
transform = root * spine * shoulderR * upperArmR 
```

然而，这是从上臂空间到模型空间的变换。因此，只需**反转矩阵**即可获得静止骨骼变换。对每个骨骼执行此操作并存储这些矩阵。

*请注意，静止变换不会随时间变化；它们是根据模型的参考位置固定的。*

## 顶点/骨骼关联

每个顶点与 1 个或多个骨骼节点相关联。对于每个这样的关联，顶点都有相应的权重。通常，所有权重总和为`1`。在 SMD 中，这些关联是在`triangles`段中定义的。根据您链接到的页面，格式为：

```
triangles
my_material
bone_id    x y z    nx ny nz    u v    bone_links 
```

这定义了一个顶点`(x, y, z)`并最初将其与骨骼相关联`bone_id`（`1`我假设的权重）。该`bone_links`部分可以（某种程度上）覆盖它并指定多个关联，如下所示：

```
bone_links = num_links bone_id[0] weight[0] bone_id[1] weight[1] ... etc. 
```

*如果权重加起来不等于 1，则剩余权重将归于与原始 的关联`bone_id`。*

因此，与骨骼 0、1 和 2 关联的示例顶点将是：

```
0    x y z   nx ny nz   u v    3   0 0.15  1 0.35  2 0.5 
```

## 顶点变换

这是我们最终根据当前骨骼变换确定顶点位置的地方。如前所述；根据当前时间和动画，您确定（插值）当前骨骼变换。对于每个骨骼，计算骨骼到世界的变换。示例（我们之前看到过）：

```
boneToWorld = root * spine * shoulderR * upperArmR 
```

现在，对于与单个骨骼关联的顶点，以下给出其动画/蒙皮位置：

```
vertexPosAnimated = boneToWorld * boneAtRest * vertexPosModel 
```

这首先将顶点位置从模型空间 ( `vertexPosModel`) 转换为与之关联的骨骼空间（此转换不会随时间改变）。然后，使用骨骼的当前位置，再次将顶点从骨骼转换到模型空间。这允许它随着骨骼的变换变化而移动。

*观察到，当骨骼当前处于静止位置时，`boneAtRest`是 的倒数`boneToWorld`，`boneToWorld * boneAtRest`单位矩阵也是，所以顶点位置保持不变，这是正确的！*

最后，由于顶点可以与多个骨骼相关联，因此我们为每个相关联的骨骼计算上述的加权和，而不是上面的。例如，对于与 3 个骨骼关联的顶点：

```
vertexPosAnimated =
    boneToWorld[0] * boneAtRest[0] * vertexPosModel * weight[0] +
    boneToWorld[1] * boneAtRest[1] * vertexPosModel * weight[1] +
    boneToWorld[2] * boneAtRest[2] * vertexPosModel * weight[2]; 
```

## 最后的想法

这些是一些广泛的笔触，我什至没有讨论着色器的实现（如果这就是你要做的），但我想我已经涵盖了所有原则，而且它已经是一个很长的答案了。

过去我发现对 3D 引擎开发很有帮助的一件事是 M3G 文档（旧的 Java Mobile 3D API）。上的条目`[SkinnedMesh](http://www.j2megame.org/j2meapi/JSR_184_Mobile_3D_Graphics_API_1_1/javax/microedition/m3g/SkinnedMesh.html)`基本上也描述了我在这里发布的内容。

*此外，尝试理解使用静止*骨骼变换将顶点从模型空间变换到骨骼空间的概念，然后使用*当前*变换再次返回。这是整个事情的关键。

祝你好运！

# sql-server - 优化器如何处理对具有相同参数值的标量函数的调用？

> ID：10864457
> 
> 赞同：2
> 
> 时间：2012-06-02T17:29:48.213
> 
> 标签：sql-server

我有一个使用标量函数的查询。唯一函数参数的值取自我查询中的字段（如下所示）：

```
SELECT
    fn_MyFunc(MyField)
FROM MyTable 
```

如果这个表中有几千行，并且只有几个不同的值`MyField`，优化器是否足够聪明，知道它以前已经看到过这个值，还是会一遍又一遍地执行函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:36:10.623

用户定义函数仅存储执行计划。现有的优化器无法缓存这些有用的信息。标量 udf 是一个黑盒子。优化器不会为您手动记忆 UDF。

如果函数是确定性的，则提高性能的解决方案意味着相同的输入返回相同的输出，而与时间和数据库无关：

为这个 UDF 的所有可能结果创建一个表，并将这个表与查询连接起来。它将提供最佳性能/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T17:49:09.373

简单的答案是否定的，它不够聪明，是的，它会执行该函数的次数与调用它的次数一样多。

如果您可以使用派生表创建不同的值，则可能会提高性能：

```
SELECT fn_MyFunc(distinct_field) 
FROM (
    SELECT
        DISTINCT MyField as distinct_field
     FROM MyTable) tbl 
```

此外，解开函数的代码并将其嵌入到查询中可能会有所帮助。

# android - 如何将 SharedPreferences 备份到 SD 卡？

> ID：10864462
> 
> 赞同：18
> 
> 时间：2012-06-02T17:30:26.000
> 
> 标签：android, sharedpreferences, android-preferences

我在很多地方看到将 SharedPreferences 文件复制到 sd 卡是一个问题，因为每个制造商都将它放在其他地方。

无论文件位于何处，我都想在 sd 卡上备份。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-02T17:30:26.670

该`SharedPreferences`接口包含一个调用的方法`getAll()`，该方法返回一个带有键值对的映射。因此，我没有复制文件本身，而是序列化从该方法返回的映射，然后再将其取回。

一些代码：

```
private boolean saveSharedPreferencesToFile(File dst) {
    boolean res = false;
    ObjectOutputStream output = null;
    try {
        output = new ObjectOutputStream(new FileOutputStream(dst));
        SharedPreferences pref = 
                            getSharedPreferences(prefName, MODE_PRIVATE);
        output.writeObject(pref.getAll());

        res = true;
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }finally {
        try {
            if (output != null) {
                output.flush();
                output.close();
            }
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
    return res;
}

@SuppressWarnings({ "unchecked" })
private boolean loadSharedPreferencesFromFile(File src) {
    boolean res = false;
    ObjectInputStream input = null;
    try {
        input = new ObjectInputStream(new FileInputStream(src));
            Editor prefEdit = getSharedPreferences(prefName, MODE_PRIVATE).edit();
            prefEdit.clear();
            Map<String, ?> entries = (Map<String, ?>) input.readObject();
            for (Entry<String, ?> entry : entries.entrySet()) {
                Object v = entry.getValue();
                String key = entry.getKey();

                if (v instanceof Boolean)
                    prefEdit.putBoolean(key, ((Boolean) v).booleanValue());
                else if (v instanceof Float)
                    prefEdit.putFloat(key, ((Float) v).floatValue());
                else if (v instanceof Integer)
                    prefEdit.putInt(key, ((Integer) v).intValue());
                else if (v instanceof Long)
                    prefEdit.putLong(key, ((Long) v).longValue());
                else if (v instanceof String)
                    prefEdit.putString(key, ((String) v));
            }
            prefEdit.commit();
        res = true;         
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }finally {
        try {
            if (input != null) {
                input.close();
            }
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
    return res;
} 
```

我希望我帮助了某人，如果这里有问题，请告诉我。

埃拉德

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-20T04:48:41.153

使用 ObjectOutputStream/ObjectInputStream 的替代方法是将 Android 源中的 XmlUtils.java 和 FastXmlSerializer.java 文件添加到您的项目中，然后使用 XmlUtils.writeMapXml() 和 XmlUtils.readMapXml()：

```
boolean res = false;
FileOutputStream output = null;
try {
    output = new FileOutputStream(dst);
    SharedPreferences pref = 
                        getSharedPreferences(prefName, MODE_PRIVATE);
    XmlUtils.writeMapXml(pref.getAll(), output);

    res = true;
    } 
```

......

```
FileInputStream input = null;
try {
    input = new FileInputStream(src);
        Editor prefEdit = getSharedPreferences(prefName, MODE_PRIVATE).edit();
        prefEdit.clear();
        Map<String, ?> entries = XmlUtils.readMapXml(input);
        for (Entry<String, ?> entry : entries.entrySet()) {
            putObject(prefEdit, entry.getKey(), entry.getValue());
        }
    } 
```

......

```
static SharedPreferences.Editor putObject(final SharedPreferences.Editor edit,
                                          final String key, final Object val) {
    if (val instanceof Boolean)
        return edit.putBoolean(key, ((Boolean)val).booleanValue());
    else if (val instanceof Float)
        return edit.putFloat(key, ((Float)val).floatValue());
    else if (val instanceof Integer)
        return edit.putInt(key, ((Integer)val).intValue());
    else if (val instanceof Long)
        return edit.putLong(key, ((Long)val).longValue());
    else if (val instanceof String)
        return edit.putString(key, ((String)val));

    return edit;
} 
```

然后，存储格式将与用于存储 SharedPreferences 的 XML 相同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-18T05:52:58.103

```
File ff = new File("/data/data/"
                            + MainActivity.this.getPackageName()
                            + "/shared_prefs/pref file name.xml");

                    Log.i("ddddddddddddd", ff.getPath() + "");

                    copyFile(ff.getPath().toString(), sdcard path/save file name.xml");

private void copyFile(String filepath, String storefilepath) {
    try {
        File f1 = new File(filepath);
        File f2 = new File(storefilepath);
        InputStream in = new FileInputStream(f1);

        OutputStream out = new FileOutputStream(f2);

        byte[] buf = new byte[1024];
        int len;
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }
        in.close();
        out.close();
        System.out.println("File copied.");
    } catch (FileNotFoundException ex) {
        System.out.println(ex.getMessage());

    } catch (IOException e) {
        System.out.println(e.getMessage());
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-12T16:04:48.353

```
try {
    input = new FileInputStream(src1);
    SharedPreferences.Editor prefEdit =   getSharedPreferences("prueba100", MODE_PRIVATE).edit();
    prefEdit.clear();
    Map<String, ?> entries = XmlUtils.readMapXml(input);
    for (Map.Entry<String, ?> entry : entries.entrySet()) {
        putObject(prefEdit, entry.getKey(), entry.getValue());
    }
    prefEdit.apply();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (XmlPullParserException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

# google-app-engine - gae搜索服务数据存储

> ID：10864464
> 
> 赞同：1
> 
> 时间：2012-06-02T17:30:32.203
> 
> 标签：google-app-engine, full-text-search, google-cloud-datastore

为了使用新的 GAE 搜索服务，必须使用 Document 对象（使用 Document.Builder 类构建）创建数据。是否有人对文档样式 CRUD 与使用 JDO 或 JPA 处理相同数据的比较有什么感觉？具体来说就是性能，比如创建数据、更新数据等等……如果它们是可比的，为什么不总是使用文档样式的数据存储呢？

# ruby-on-rails - 为 Rails 3.2 应用程序进行捆绑安装时，ruby 1.9.3 出现分段错误错误

> ID：10864472
> 
> 赞同：3
> 
> 时间：2012-06-02T17:31:52.473
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我刚刚使用[Rails_App_Composer](https://github.com/RailsApps/rails_apps_composer)安装了 Rails ，当我尝试运行`bundle install`时出现此错误：

```
Resolving deltas: 100% (17189/17189), done.
Fetching gem metadata from https://rubygems.org/./.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799: [BUG] Segmentation fault
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0]

-- Control frame information -----------------------------------------------
c:0046 p:---- s:0243 b:0243 l:000242 d:000242 CFUNC  :connect
c:0045 p:0011 s:0240 b:0240 l:001ab0 d:000239 BLOCK  /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799
c:0044 p:0031 s:0238 b:0238 l:000237 d:000237 METHOD /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:54
c:0043 p:0026 s:0226 b:0226 l:000225 d:000225 METHOD /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99
c:0042 p:0485 s:0220 b:0220 l:001ab0 d:001ab0 METHOD /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799
c:0041 p:0011 s:0212 b:0212 l:000211 d:000211 METHOD /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:755
c:0040 p:0089 s:0209 b:0209 l:000208 d:000208 METHOD /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:750
c:0039 p:0340 s:0206 b:0206 l:000205 d:000205 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/net/http/persistent.rb:224
c:0038 p:0157 s:0198 b:0198 l:000197 d:000197 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/net/http/persistent.rb:358
c:0037 p:0081 s:0184 b:0184 l:000183 d:000183 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/fetcher.rb:145
c:0036 p:0105 s:0176 b:0176 l:000175 d:000175 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/fetcher.rb:173
c:0035 p:0141 s:0166 b:0166 l:000165 d:000165 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/fetcher.rb:132
c:0034 p:0178 s:0156 b:0156 l:000155 d:000155 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/fetcher.rb:70
c:0033 p:0042 s:0148 b:0148 l:000137 d:000147 BLOCK  /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/source.rb:234
c:0032 p:---- s:0143 b:0143 l:000142 d:000142 FINISH
c:0031 p:---- s:0141 b:0141 l:000140 d:000140 CFUNC  :each
c:0030 p:0079 s:0138 b:0138 l:000137 d:000137 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/source.rb:232
c:0029 p:0018 s:0128 b:0128 l:000127 d:000127 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/source.rb:165
c:0028 p:0025 s:0124 b:0124 l:000123 d:000123 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/source.rb:70
c:0027 p:0059 s:0121 b:0120 l:000102 d:000119 BLOCK  /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/definition.rb:191
c:0026 p:---- s:0116 b:0116 l:000115 d:000115 FINISH
c:0025 p:---- s:0114 b:0114 l:000113 d:000113 CFUNC  :each
c:0024 p:0043 s:0111 b:0111 l:000102 d:000110 BLOCK  /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/definition.rb:188
c:0023 p:0020 s:0107 b:0107 l:000106 d:000106 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/index.rb:9
c:0022 p:0031 s:0103 b:0103 l:000102 d:000102 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/definition.rb:184
c:0021 p:0120 s:0100 b:0097 l:000096 d:000096 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/definition.rb:178
c:0020 p:0027 s:0092 b:0092 l:000091 d:000091 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/definition.rb:113
c:0019 p:0047 s:0086 b:0086 l:000085 d:000085 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/definition.rb:108
c:0018 p:0303 s:0083 b:0083 l:000082 d:000082 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/installer.rb:81
c:0017 p:0033 s:0077 b:0077 l:000076 d:000076 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/installer.rb:14
c:0016 p:0995 s:0070 b:0070 l:000069 d:000069 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/cli.rb:227
c:0015 p:0036 s:0061 b:0061 l:000060 d:000060 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/task.rb:22
c:0014 p:0071 s:0055 b:0055 l:000054 d:000054 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/invocation.rb:118
c:0013 p:0221 s:0049 b:0049 l:000048 d:000048 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor.rb:263
c:0012 p:0082 s:0038 b:0038 l:000037 d:000037 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/base.rb:386
c:0011 p:0017 s:0032 b:0032 l:000025 d:000031 BLOCK  /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/bin/bundle:14
c:0010 p:0009 s:0030 b:0030 l:000029 d:000029 METHOD /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/friendly_errors.rb:4
c:0009 p:0062 s:0026 b:0026 l:000025 d:000025 TOP    /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/bin/bundle:14
c:0008 p:---- s:0024 b:0024 l:000023 d:000023 FINISH
c:0007 p:---- s:0022 b:0022 l:000021 d:000021 CFUNC  :load
c:0006 p:0127 s:0018 b:0018 l:000c18 d:002640 EVAL   /.rvm/gems/ruby-1.9.3-p194@global/bin/bundle:19
c:0005 p:---- s:0015 b:0015 l:000014 d:000014 FINISH
c:0004 p:---- s:0013 b:0013 l:000012 d:000012 CFUNC  :eval
c:0003 p:0101 s:0007 b:0007 l:000c18 d:002630 EVAL   /.rvm/gems/ruby-1.9.3-p194@global/bin/ruby_noexec_wrapper:14
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:0000 s:0002 b:0002 l:000c18 d:000c18 TOP   

-- Ruby level backtrace information ----------------------------------------
/.rvm/gems/ruby-1.9.3-p194@global/bin/ruby_noexec_wrapper:14:in `<main>'
/.rvm/gems/ruby-1.9.3-p194@global/bin/ruby_noexec_wrapper:14:in `eval'
/.rvm/gems/ruby-1.9.3-p194@global/bin/bundle:19:in `<main>'
/.rvm/gems/ruby-1.9.3-p194@global/bin/bundle:19:in `load'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/bin/bundle:14:in `<top (required)>'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/bin/bundle:14:in `block in <top (required)>'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/base.rb:386:in `start'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor.rb:263:in `dispatch'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/task.rb:22:in `run'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/cli.rb:227:in `install'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/installer.rb:14:in `install'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/installer.rb:81:in `run'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/definition.rb:108:in `resolve_remotely!'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/definition.rb:113:in `specs'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/definition.rb:178:in `resolve'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/definition.rb:184:in `index'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/index.rb:9:in `build'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/definition.rb:188:in `block in index'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/definition.rb:188:in `each'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/definition.rb:191:in `block (2 levels) in index'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/source.rb:70:in `specs'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/source.rb:165:in `fetch_specs'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/source.rb:232:in `remote_specs'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/source.rb:232:in `each'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/source.rb:234:in `block in remote_specs'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/fetcher.rb:70:in `specs'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/fetcher.rb:132:in `fetch_remote_specs'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/fetcher.rb:173:in `fetch_dependency_remote_specs'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/fetcher.rb:145:in `fetch'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/net/http/persistent.rb:358:in `request'
/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/net/http/persistent.rb:224:in `connection_for'
/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:750:in `start'
/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `connect'
/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `block in connect'
/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `connect'

-- C level backtrace information -------------------------------------------

   See Crash Report log file under ~/Library/Logs/CrashReporter or
   /Library/Logs/CrashReporter, for the more detail of.

-- Other runtime information -----------------------------------------------

* Loaded script: /.rvm/gems/ruby-1.9.3-p194@global/bin/bundle

* Loaded features:

    0 enumerator.so
    1 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/enc/encdb.bundle
    2 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/enc/trans/transdb.bundle
    3 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/defaults.rb
    4 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/rbconfig.rb
    5 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/deprecate.rb
    6 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/exceptions.rb
    7 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb
    8 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems.rb
    9 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/version.rb
   10 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/requirement.rb
   11 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/platform.rb
   12 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb
   13 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/path_support.rb
   14 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb
   15 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/etc.bundle
   16 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/fileutils.rb
   17 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/pathname.bundle
   18 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/pathname.rb
   19 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/syntax_error.rb
   20 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/psych.bundle
   21 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/stringio.bundle
   22 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/node.rb
   23 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/stream.rb
   24 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/document.rb
   25 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/sequence.rb
   26 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/scalar.rb
   27 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/mapping.rb
   28 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/alias.rb
   29 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes.rb
   30 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/streaming.rb
   31 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/visitor.rb
   32 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/strscan.bundle
   33 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/scalar_scanner.rb
   34 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/to_ruby.rb
   35 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/emitter.rb
   36 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb
   37 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/json/ruby_events.rb
   38 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/json_tree.rb
   39 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/depth_first.rb
   40 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors.rb
   41 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/handler.rb
   42 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/tree_builder.rb
   43 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/parser.rb
   44 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/omap.rb
   45 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/set.rb
   46 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/coder.rb
   47 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/core_ext.rb
   48 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/date_core.bundle
   49 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/date/format.rb
   50 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/date.rb
   51 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/deprecated.rb
   52 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/stream.rb
   53 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/json/yaml_events.rb
   54 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/json/tree_builder.rb
   55 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/json/stream.rb
   56 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/handlers/document_stream.rb
   57 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb
   58 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/yaml.rb
   59 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/psyched_yaml.rb
   60 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/gem_helpers.rb
   61 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/match_platform.rb
   62 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/rubygems_ext.rb
   63 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb
   64 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/psych_additions.rb
   65 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/psych_tree.rb
   66 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/syck_hack.rb
   67 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/rubygems_integration.rb
   68 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/version.rb
   69 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler.rb
   70 /.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/noexec.rb
   71 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/core_ext/hash_with_indifferent_access.rb
   72 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/core_ext/ordered_hash.rb
   73 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/error.rb
   74 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/shell.rb
   75 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/invocation.rb
   76 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/parser/argument.rb
   77 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/parser/arguments.rb
   78 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/parser/option.rb
   79 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/parser/options.rb
   80 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/parser.rb
   81 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/task.rb
   82 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/util.rb
   83 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/base.rb
   84 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor.rb
   85 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/common.rb
   86 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/generic.rb
   87 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/ftp.rb
   88 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/http.rb
   89 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/https.rb
   90 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/ldap.rb
   91 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/ldaps.rb
   92 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/mailto.rb
   93 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri.rb
   94 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/core_ext/file_binary_read.rb
   95 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/actions/empty_directory.rb
   96 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/actions/create_file.rb
   97 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/actions/create_link.rb
   98 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/actions/directory.rb
   99 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/erb.rb
  100 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/time.rb
  101 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb
  102 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/actions/file_manipulation.rb
  103 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/actions/inject_into_file.rb
  104 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/actions.rb
  105 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendored_thor.rb
  106 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/user_interaction.rb
  107 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/cli.rb
  108 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/friendly_errors.rb
  109 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/delegate.rb
  110 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/tmpdir.rb
  111 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/thread.rb
  112 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/tempfile.rb
  113 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/shell/basic.rb
  114 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/thor/shell/color.rb
  115 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/ui.rb
  116 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/settings.rb
  117 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/shared_helpers.rb
  118 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/socket.bundle
  119 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/socket.rb
  120 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb
  121 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/protocol.rb
  122 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/zlib.bundle
  123 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb
  124 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/net/http/faster.rb
  125 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/cgi/core.rb
  126 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/cgi/cookie.rb
  127 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/cgi/util.rb
  128 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/cgi.rb
  129 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendor/net/http/persistent.rb
  130 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/vendored_persistent.rb
  131 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/fetcher.rb
  132 /.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/wrapper.rb
  133 /.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/rubygems_bundler_installer.rb
  134 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/optparse.rb
  135 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/command.rb
  136 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/command_manager.rb
  137 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package/f_sync_dir.rb
  138 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_header.rb
  139 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/enc/iso_8859_1.bundle
  140 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_input.rb
  141 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_output.rb
  142 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_reader/entry.rb
  143 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_reader.rb
  144 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_writer.rb
  145 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package.rb
  146 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/format.rb
  147 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/ext/builder.rb
  148 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/ext/configure_builder.rb
  149 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/ext/ext_conf_builder.rb
  150 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/ext/rake_builder.rb
  151 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/ext.rb
  152 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/require_paths_builder.rb
  153 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb
  154 /.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/regenerate_binstubs_command.rb
  155 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/digest.bundle
  156 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/digest.rb
  157 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/digest/sha1.bundle
  158 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/set.rb
  159 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/definition.rb
  160 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/dependency.rb
  161 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/dsl.rb
  162 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/remote_fetcher.rb
  163 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/errors.rb
  164 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/text.rb
  165 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/spec_fetcher.rb
  166 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/gem_installer.rb
  167 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/source.rb
  168 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/tsort.rb
  169 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/forwardable.rb
  170 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/spec_set.rb
  171 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency_list.rb
  172 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency_installer.rb
  173 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/environment.rb
  174 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/installer.rb
  175 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/index.rb
  176 /.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails_admin-7bfad1add513/lib/rails_admin/version.rb
  177 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/resolver.rb
  178 /.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.0.pre.1/lib/bundler/dep_proxy.rb
  179 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/openssl.bundle
  180 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/bn.rb
  181 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/cipher.rb
  182 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/config.rb
  183 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/digest.rb
  184 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/buffering.rb
  185 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/fcntl.bundle
  186 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/ssl-internal.rb
  187 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/x509-internal.rb
  188 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl.rb
  189 /.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/https.rb

[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Abort trap: 6 
```

1.  我不习惯看到这种冗长的错误消息 - 这是 Rails 3.2.x 的事情，还是有特定于 Rails_App_Composer 的 gem 产生这些冗长的错误消息？
2.  关于可能导致此问题的原因以及如何解决此问题的任何想法？我正在跑步`ruby-1.9.3p194`。
3.  当我尝试它的稳定版本时，`ruby-1.9.2`它给了我另一个错误，但仍然没有工作。如果您也需要我粘贴该错误，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T18:50:06.500

我曾经安装了一个小小的 ruby​​ 安装程序，导致分段错误。我做了

```
rvm implode 
```

从头开始，大约一个小时后一切都恢复正常了

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-15T19:23:53.387

我发现这比其他答案的影响小，内爆并不总是一种选择，尤其是在开发环境中..摘自此博客[https://coderwall.com/p/f4hyqw的片段](https://coderwall.com/p/f4hyqw)

OS X 10.6 和 10.7 附带的 OpenSSL 版本较旧并导致此问题。

有许多选项可以解决这个问题。这里有几个：

# MacPorts

```
port selfupdate
port install openssl
port install libyaml 
```

虚拟机

> rvm install 1.9.3 --with-openssl-dir=/opt/local --with-opt-dir=/opt/local

rbenv

> CONFIGURE_OPTS='--with-openssl-dir=/opt/local --with-opt-dir=/opt/local' rbenv install 1.9.3-p194

# 家酿

```
brew update
brew install openssl 
```

虚拟机

> rvm 安装 1.9.3 --with-openssl-dir=`brew --prefix openssl`

rbenv

> CONFIGURE_OPTS="--with-openssl-dir= `brew --prefix openssl`" rbenv 安装 1.9.3-p194

# 虚拟机

```
rvm pkg install openssl
rvm reinstall 1.9.3 --with-openssl-dir=$rvm_path/usr 
```

# ios - 使用 NSUserDefaults 首次启动应用程序时将开关位置设置为 ON

> ID：10864478
> 
> 赞同：0
> 
> 时间：2012-06-02T17:32:59.327
> 
> 标签：ios, xcode, switch-statement, default, nsuserdefaults

我的应用程序中有按标准用户默认值存储位置的开关，但是当应用程序第一次启动时，我的所有开关都处于关闭位置。如何将它们默认设置为 ON？

节省

```
NSUserDefaults *defs1 = [NSUserDefaults standardUserDefaults];
    [defs1 setBool: blackSwitch.on forKey: @"blackKey"];
    [[NSUserDefaults standardUserDefaults] synchronize]; 
```

加载

```
NSUserDefaults *defs1 = [NSUserDefaults standardUserDefaults];
    blackSwitch.on = [defs1 boolForKey: @"blackKey"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:37:07.793

首先

请执行下列操作

```
NSUserDefaults *defs1 = [NSUserDefaults standardUserDefaults];
BOOL isOn = [defs1 boolForKey: @"blackKey"];
if(isOn) NSLog(@"isOn"); 
```

第二个确保 blackSwitch 不是 nil

```
if(blackSwitch) NSLog(@"blackSwitch is not nil"); 
```

如果 blackswitch 为 nil，这意味着您仍处于视图控制器初始化的早期阶段，您应该将设置它的代码移动到 viewDidLoad 或 viewWillAppear

要设置默认值，请使用此代码

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; 
NSNumber *testValue = [NSNumber numberWithBool:YES];
NSDictionary *appDefaults = [[NSDictionary alloc] initWithObjectsAndKeys:
testValue, @"blackKey", nil];

[defaults registerDefaults:appDefaults]; 
[appDefaults release]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T17:48:58.067

使用该`NSUserDefaults`方法`registerDefaults`将默认值 'true' 与您的 @"blackKey" 键一起传递。这将确保 @"blackKey" 设置为 ON，直到用户自己对其进行更改。

# ipad - CoreData 为最终迁移做准备

> ID：10864479
> 
> 赞同：0
> 
> 时间：2012-06-02T17:33:04.883
> 
> 标签：ipad, core-data, core-data-migration

我有一个 ipad 应用程序，它有一个带有两个实体的简单核心数据模型。最终，我将在应用程序的更新中添加第三个实体。我需要对当前版本的数据模型做些什么来为最终迁移做准备吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:32:54.863

并不真地。为了使迁移工作，此时您需要在模型中包含模型的两个版本。（一个模型可以包含多个版本，一个是*当前*版本）。

# 3d - 如何获得相机的聚焦点？

> ID：10864480
> 
> 赞同：0
> 
> 时间：2012-06-02T17:33:11.647
> 
> 标签：3d, camera, geometry

我正在尝试计算相机正在查看的点。相机绕 X 轴和 Y 轴旋转。我想计算与我的相机相距 1 厘米且在同一条线上的点。

我知道如何在 2D 中计算这样的东西，但是当我进入 3D 时，我遇到了麻烦。

这适用于 2D（仅 x 和 z 轴）：

```
float c = 1f;
float a = c * Math.cos(Math.toRadians(rotationY));
float b = (Math.sin(Math.toRadians(rotationY)) * c);
newPosition.z -= a;
newPosition.x += b; 
```

但是对于 3D，我需要帮助。

我希望这里有人知道遮阳篷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:41:19.747

One way would be to take the inverse of the camera's view matrix, and then transform a point 1cm in front of the camera by this matrix.

If your camera first is rotated by X degrees around the X axis, and Y degrees around the y axis, then in pseudocode it might look like this:

```
Matrix4D camMM = Matrix4D.Identity(); //camera model matrix
camMM.Rotate(X, 1, 0, 0);
camMM.Rotate(Y, 0, 1, 0);
Vector4D focusPoint = camMM * vector4D(-1cm, 0, 0, 1); 
```

# objective-c - NSUserDefault 线程安全吗？

> ID：10864482
> 
> 赞同：37
> 
> 时间：2012-06-02T17:33:15.490
> 
> 标签：objective-c, arrays, thread-safety

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)说是

> ...应该通过禁用任何适当的控件来防止用户编辑该首选项。
> 
> **NSUserDefaults 类是线程安全的**。NSURL 和文件引用 URL 的持久性...

这个长时间的讨论说它不是

[http://www.cocoabuilder.com/archive/cocoa/155227-nsuserdefaults-thread-safety.html](http://www.cocoabuilder.com/archive/cocoa/155227-nsuserdefaults-thread-safety.html)

那么哪一个是对的呢？还有为什么意见不同。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-06-02T18:19:45.077

Apple iOS 5.1 和 OS X 10.7 文档说它是线程安全的；因此它是线程安全的。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2015-01-20T16:48:47.227

谈到 10.10 和 iOS8，如果您查看实现，您会发现`-[NSUserDefaults setObject:forKey:]`正在调用`__CFPreferencesSetAppValueWithContainer`，最终将在`+[CFPrefsSource withSourceForIdentifier:user:byHost:container:perform:]`. 此方法使用 a`pthread_mutex_t`来锁定对包含值的字典的访问。

**所以 NSUserDefaults 是线程安全的。**

# actionscript-3 - 如何使用 FigPanZoom 正确创建相对于图像的点？

> ID：10864485
> 
> 赞同：0
> 
> 时间：2012-06-02T17:33:30.100
> 
> 标签：actionscript-3, apache-flex, flex4

我有一个 5000 x 5000 像素的图像。它会定期放大和缩小，以使图像的不同部分适合窗口。

我正在制作一个功能，专注于图像上的不同位置（如地图），然后放大到我指定的特定比例。

我将我的观点传递给这个函数（例如 new Point(2000,2500)）但是这总是会中断，因为它与图像无关。

如何在任何给定时间以图像的给定比例使点相对于图像？

附加信息：我在这里使用指南[http://www.adobe.com/devnet/flex/samples/fig_panzoom.html](http://www.adobe.com/devnet/flex/samples/fig_panzoom.html)进行平移和缩放功能。

**解决了：**

我的一个陷阱是我使用了可能的 bitmapScaleFactor > 1，这会弄乱缩放比例。这是适合我使用的最后一个功能。

```
protected function testFocus(p:Point):void
        {
            var content:ContentRectangle = boardViewer._contentRectangle;
            var panToPoint:PanToPointCommand = new PanToPointCommand(boardViewer, content);
            var scale:Number = boardViewer.bitmapScaleFactor;

            var location = new Point((p.x*scale)+content.x, (p.y*scale)+content.y);             
            var center = new Point(boardViewer.width/2, boardViewer.height/2);

            //Move the point to the center
            panToPoint.fromPoint = location;
            panToPoint.toPoint = center;
            panToPoint.execute();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:45:49.497

I've not tested this but how about using the scale factor that is being applied to the image to alter the point coordinates.

e.g.

```
var scaler:Number = 0.5;

image.scaleX = image.scaleY = scaler;

new Point(2000*scaler,2500*scaler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:05:58.573

你在找`[DisplayObject.mouseX](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#mouseX)/mouseY`吗？然而，这些没有考虑任何轮换。

要考虑轮换，您可以执行以下操作（未经测试的代码）：

```
var mat:Matrix = image.transform.concatenatedMatrix;
mat.invert();

// now use mat to transform point from 'stage space' to 'image space'
var pImage:Point = mat.transform(new Point(stage.mouseX, stage.mouseY)); 
```

# node.js - 特定于平台的新行的 Node.JS 常量？

> ID：10864486
> 
> 赞同：131
> 
> 时间：2012-06-02T17:33:56.403
> 
> 标签：node.js

Node.JS 中是否有一个常量可用于特定于运行应用程序的平台的换行符？

例如：

*   视窗：`\r\n`
*   *尼克斯：`\n`

* * *

## 回答 #1

> 赞同：270
> 
> 时间：2012-12-28T01:22:36.550

不确定这在 0.8.x 中是否是新的，但现在有一个常量[http://nodejs.org/api/os.html#os_os_eol](http://nodejs.org/api/os.html#os_os_eol)

```
const {EOL} = require('os'); 
```

# php - 使用 mysql 构建 php 错误数据库的最佳方法？

> ID：10864490
> 
> 赞同：0
> 
> 时间：2012-06-02T17:34:36.950
> 
> 标签：php, mysql, sql, error-handling, pdo

我正在构建一个时事通讯 CMS，我想将任何错误记录到数据库中，其中包含时间戳、错误、用户 ID 和函数信息等信息。最好的方法是什么？

我在想我应该构建一个类来处理错误并使用 PDO 将它们输入到 MYsql 表中。

伪代码：

```
 class sbmtErr
{
   private $errStrng;

   protected function sndErr($err, $usrData, $mthd){

      $sndErrPDO = new myPDO;

      $this->errStrng = "INSERT INTO errTbl (error, userID, method) VALUES ('".$err."', ".usrData['usrID'].", '".$mthd."')";

      $sndErrPDO->sqlQry($errStrng);
   }
} 
```

我的问题是我不知道如何隔离引发错误的方法。

有一个更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:51:42.067

扩展异常类。`CMSErrorException`，当抛出（即在构造上）时，使用反射来找出函数、行号等内容。您如何找到用户的 id 取决于您如何保留它。

然后，无论您在捕获它时做什么，都调用一个方法（同样来自构造），将其记录到数据库中。

小心不要在异常代码中抛出这些自定义异常，因为它可能会在数据库错误的情况下导致无限循环。

# android - ActionBar 自动显示搜索 (SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW)

> ID：10864493
> 
> 赞同：0
> 
> 时间：2012-06-02T17:34:47.560
> 
> 标签：android, android-actionbar

我想在 ActionBar 中使用 ACTION_COLLAPSE_ACTION_VIEW。所以我会在 ActionBar 中有搜索和搜索建议。是否可以显示此输入文本，而无需先单击菜单？

我的活动仅用于搜索目的，因此当用户需要首先单击搜索时，它并不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:38:39.277

我设法通过使用自定义视图并在那里显示一些输入字段来解决我的问题。

# ios - 将 JSON 数据发送到 URL

> ID：10864497
> 
> 赞同：2
> 
> 时间：2012-06-02T17:35:19.933
> 
> 标签：ios, nsurlconnection

我有一个特定的 URL “http://dev.mycompany.com”，我需要向它发送一些数据（以 JSON 格式）并获得响应。

我无法通过 SO 上的大量文档和相关问题找到自己的方式。我已经设法使用 NSURLConnection 获取数据（不发送任何数据）并且效果很好，到目前为止我的代码与[https://developer.apple.com/library/mac/#documentation/上的代码几乎相同Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)，所以我看不到发布我拥有的代码的任何意义。

我无法将一些字符串附加到我的 URL，因为我需要发送的数据是 JSON 数据。如果我听起来像个菜鸟，我很抱歉，但我在 Obj-C 和服务器通信方面的经验很少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T17:41:16.983

You should send them as parameter to a post NSUrlRequest

As following:

```
NSURL *aUrl = [NSURL URLWithString:@"http://dev.mycompany.com"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:aUrl
                                         cachePolicy:NSURLRequestUseProtocolCachePolicy
                                     timeoutInterval:60.0];
[request setHTTPMethod:@"POST"];
NSString *postString = @"yourVarialbes=yourvalues";
[request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection *connection= [[NSURLConnection alloc] initWithRequest:request 
                                                             delegate:self];
[connection start]; 
```

For sending JSON Pelase read [How to send json data in the Http request using NSURLRequest](https://stackoverflow.com/questions/4456966/how-to-send-json-data-in-the-http-request-using-nsurlrequest)

# android - 加载一个活动后，它有时可以工作，有时不能，为什么？

> ID：10864498
> 
> 赞同：0
> 
> 时间：2012-06-02T17:35:30.507
> 
> 标签：android, progress-bar, loading

我有一个我无法解决的问题，因为它可能是一个错误或类似的东西。我想用androidplot做一个图表，效果很好，但当然需要一些时间来绘制它（使用数百个数据），所以我使用进度对话框来指示加载。但是发生的事情真的很奇怪。我可以定义活动在加载和加载时的外观。当它加载时，我在后台定义一个文本视图，将其文本设置为“加载”，如果它被加载，该文本视图包含大量数据、文本等。

```
onCreate
{

        Thread thread = new Thread(new Runnable() {  
               public void run() {

-------what needs to be appeared after its loaded ----
Textview -> 12,3245,456,78,789

}

----what is on the screen while the progressbar is on---
TextView -> loading..
} 
```

但是在进度对话框消失后的大多数情况下，什么都没有发生，textview 仍然说“正在加载”，并且很少加载数据并使数据出现并更改 textview。我注意到，我想出现的数据越多，它就越少停留在加载阶段。当然，每次加载进度条出现时都会消失。有什么建议吗？这真的很奇怪，因为我在选项卡布局中使用它，而其他选项卡从不这样做，总是让数据出现。

提前致谢！

UP：好的，它总是第一个选项卡，无论它包含什么，所以第一个选项卡在某种程度上是错误的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:48:05.533

```
The Andoid UI toolkit is not thread-safe. So, you must not manipulate your UI 
from a worker thread—you must do all manipulation to your user interface from
the UI thread. Thus, there are simply two rules to Android's single thread model:

1\. Do not block the UI thread
2\. Do not access the Android UI toolkit from outside the UI thread 
```

阅读[本文](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html)以获取有关如何从外部访问 UI 元素的更多信息。
编辑：：

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) ::

```
onCreate
{

     new myLoading().execute();    
}

class myLoading extends AsyncTask<Void, Void, Void>
{
     protected Void doInBackground(Void ... ) {
      .......... do all the loading here .........
     }
     protected void onPostExecute(Void ) {
        Textview -> 12,3245,456,78,789
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T21:25:31.043

我想出了一些解决方法。我对解决方案没有任何线索，我唯一的猜测是加载屏幕以某种方式超过了所有数据的到达，因此无法绘制图表。或其他什么...我放了一个 thread.sleep(1000) ，现在它可以工作了。

# android - Android 布局 XML 中带和不带“+”的 ID

> ID：10864501
> 
> 赞同：1
> 
> 时间：2012-06-02T17:36:09.060
> 
> 标签：android, xml, layout, android-relativelayout

> **可能重复：**
> [Android中“@id/”和“@+id/”的区别](https://stackoverflow.com/questions/5025910/difference-between-id-and-id-in-android)

在为 Android 应用程序创建布局 XML 文件时，通常将每个布局元素的 ID 声明为：

```
@+id/elementID 
```

不是吗？我猜“+”表示这个元素的 ID 是刚刚创建的，因此您需要加号，对吗？

但是，当您在创建布局元素之前引用它时，您需要做什么？你是用“+”引用它，然后在没有“+”的情况下创建它吗？简单地说，以下代码是否正确（在 RelativeLayout 容器中）？

```
<ImageButton
    android:id="@+id/helpButton"
    android:layout_toLeftOf="@+id/moreButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />
<ImageButton
    android:id="@id/moreButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:44:33.083

> I guess the "+" means that this element's ID is just created and therefore you need the plus, right?

Yes.

> Do you refer to it with "+" and then create it without "+"?

Yes. The *first occurrence of the ID* gets the `+`. Second and subsequent occurrences can leave it off.

> Simply put, is the following code correct (in a RelativeLayout container)?

Well, your `ImageButtons` are missing images... :-)

That being said, your use of the `+` sign there seems fine.

# matlab - 网格数据中的线性插值

> ID：10864510
> 
> 赞同：0
> 
> 时间：2012-06-02T17:37:24.143
> 
> 标签：matlab, interpolation

我想知道如何[`griddata`](http://www.mathworks.com/help/techdoc/ref/griddata.html)使用线性插值。

它只是考虑我们想要找到值的点的四个相邻点还是使用整个凸包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:02:49.993

griddata 的文档将在这方面为您提供指导。本质上，它会对您的点集进行 delaunay 三角剖分，然后对于任何新点，确定该点属于哪个单纯形。单纯形内的插值是线性的。因此在二维中，三个点定义了一个三角形，三个点确定了 z(x,y) 的局部平面模型。

# eclipse - eclipse调试配置忽略-Dlog4j.debug设置，为什么？

> ID：10864511
> 
> 赞同：1
> 
> 时间：2012-06-02T17:37:26.113
> 
> 标签：eclipse, log4j

我想知道为什么我为桌面应用程序设置 log4j 配置的努力不起作用。这里的许多答案建议首先将设置 -Dlog4j.debug 设置为 VM，以进行调试。在命令行上这有效。当我将它放在运行/调试配置.../VM 参数字段中并单击调试时，控制台视图中没有显示任何内容（在我的配置后正确标记）。为什么？

附加信息：log4j.jar 在构建路径设置中，eclipse 版本是 indigo 20110909

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:14:40.280

如果您碰巧在使用 slf4j，并且尚未安装`slf4j-log4j12-x.x.x.jar`，那么`-Dlog4j.debug`无论 log4j 是否在类路径上，该标志都不会给出任何输出。slf4j 希望有一个后端记录器（由一个后端 jar 文件指定）。

在我替换`slf4j-jdk14-x.x.x.jar`为之后`slf4j-log4j12-x.x.x.jar`，一切正常。

# cakephp - cakephp在编辑时获取字段（父键）的值

> ID：10864513
> 
> 赞同：0
> 
> 时间：2012-06-02T17:37:31.300
> 
> 标签：cakephp, redirect

在 cakephp 2.1 上，我使用这种结构在保存时截取数据：

```
$this->request->data['Setup']['active'] = 1; 
```

现在，在编辑记录（Dir）之后，我想通过以这种方式获取父 id 来重定向到它的父（project_id）：

```
$ownParentId = $this->request->data['Dir']['project_id']; 
```

但它只是没有在这里传递任何价值：

```
$this->redirect(array('controller' => 'projects', 'action' => 'edit', $ownParentId)); 
```

所以我的重定向失败了。

============= 回复后==============
由于以下原因，project_id 似乎根本没有旅行：

在我的目录编辑表单上，我评论道：

```
//echo $this->Form->input('project_id'); 
```

因为用户不应该更改项目 ID。

我只是尝试取消注释该行，并且表单现在显示一个空的或空的选择控件，该控件不发布任何内容。我期待一个编辑控件，我可以以某种方式隐藏或禁用。

我的目录表上的字段 project_id

```
CREATE TABLE IF NOT EXISTS `dirs` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  `project_id` int(10) NOT NULL,
  .... 
```

绑定到
我的项目表上的 id 字段：

```
CREATE TABLE IF NOT EXISTS `projects` (
`id` int(10) NOT NULL AUTO_INCREMENT,
`name` varchar(200) NOT NULL,
`pr_number` varchar(10) NOT NULL,
`client_id` int(5) NOT NULL,
`exec_id` int(5) NOT NULL,
 .... 
```

项目模型

```
var $hasMany = array('Daily', 'Dir'); 
```

目录模型

```
var $belongsTo = array('Project'); 
```

也许我只需要一个漂亮的 find() 结构来填充我的编辑表单上的 project_id 控件？-或 -
在保存编辑之前获取 project_id 值？（projectt_id 已经保存，因为是一个编辑。
我已经在[http://carlosgarcia.us/support/DirsController.txt](http://carlosgarcia.us/support/DirsController.txt)发布了完整的 dirs 控制器。

你能帮我吗？非常感谢。

卡洛斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:26:14.763

要在编辑或删除子记录后重定向，首先我得到了父 ID（我的控制器上的编辑/删除方法）

```
 $ownParentId = $this->Dir->find
                    (
                    'first', array
                (
                // recursive 0 so no child tables travel, use 1 to retrieve ALL tables  
                'recursive' => 0,
                'fields' => array('Dir.project_id'),
                'conditions' => array('Dir.id' => $id)
                    )
    ); 
```

然后保存后重定向：

```
$this->redirect(array('controller' => 'projects', 'action' => 'edit', $ownParentId['Dir']['project_id'])); 
```

添加孩子后重定向到父记录有点棘手 - 因为我是一个假人 -

1.- 在我看来，添加链接是否发送了一个我称为 parentProject 的参数：

```
echo $this->Html->link(__('Add'), array('controller' => 'dirs', 'action' => 'add', 'parentProject' => $project['Project']['id'])); 
```

2.- 在我的子控制器中，将此参数设置为数组（添加方法）：

```
$this->set('parentProject', $this->request->params['named']['parentProject']); 
```

3.- 保存之前，为我的子记录设置字段值：

```
$this->request->data['Dir']['project_id'] = $this->request->params['named']['parentProject']; 
```

4.-保存后使用相同的值重定向：

```
$this->redirect(array('controller' => 'projects', 'action' => 'edit', $this->request->data['Dir']['project_id'])); 
```

此外，这种方式允许我在添加/编辑子项时从父模型中获取我需要的所有数据：

```
 $ProjectData = $this->Dir->Project->find
                    (
                    'first', array
                (
                // recursive 0 so no child tables travel, use 1 to retrieve ALL tables  
                'recursive' => 0,
                'fields' => array('Project.name', 'Project.pr_e_start'),
                'conditions' => array('Project.id' => $this->request->params['named']['parentProject'])
                    )
    );

    $this->set(compact('ProjectData')); 
```

很高兴它奏效了，并想分享给像我这样苦苦挣扎的初学者。

卡洛斯。

# actionscript-3 - AS3 - 计时器不显示

> ID：10864514
> 
> 赞同：0
> 
> 时间：2012-06-02T17:37:32.600
> 
> 标签：actionscript-3, flash, timer

我正在使用 Flash Pro CS6 制作一个简单的游戏，其中一些立方体掉落。我添加了一个文本字段（实例名称是 timerText），我在其中等待显示时间。这是代码：

```
var time:int =0;
var timer:Timer = new Timer(1000,0);

timer.start();
timer.addEventListener(TimerEvent.TIMER, cubeFall);

function cubeFall(t:TimerEvent) {

time++;
timerText.text = time.toString();

if (time == 3) {
    cube_1.play();
    }
} 
```

我的问题是文本字段，当游戏开始时，1 秒后出现数字 1，但它不会继续。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T22:58:47.280

```
 var time:int =0;
var timer:Timer = new Timer(1000,0);

timer.addEventListener(TimerEvent.TIMER, cubeFall);
timer.start();

function cubeFall(t:TimerEvent) {

time++;
timerText.text = time.toString();

if (time == 3) {
    cube_1.play();
    }
}

//try this one you set the event and then start 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:06:25.987

你的代码对我有用吗？（Flash CS5.5 输出到 Flash Plater 10.2）。

尝试将文本字段字体设置为 _sans。如果可行，可能是因为您需要嵌入字体。

# objective-c - 我需要使用示例代码

> ID：10864515
> 
> 赞同：-4
> 
> 时间：2012-06-02T17:37:36.780
> 
> 标签：objective-c, xcode4.3, nsnotifications

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNotificationCenter/postNotificationName:object:userInfo](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNotificationCenter/postNotificationName:object:userInfo)：

postNotificationName：对象：用户信息：

基本上观察者是如何获得该用户信息的？

是否有一个简短的示例代码可以显示整个事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:47:10.813

> 基本上观察者是如何获得该用户信息的？

请参阅 NSNotification 类参考。它有一个属性`userInfo`，它是一个 NSDictionary。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T18:13:40.597

```
#import <Foundation/Foundation.h>

#define kSomeKey @"key"
#define kNotificationName @"MyMadeUpNameNotification"
@interface Test : NSObject
@end
@implementation Test
-(void) handleNotification:(NSNotification*)notification {
    NSString *object = [notification.userInfo objectForKey:kSomeKey];
    NSLog(@"%@",object);
}
-(void) run {
    [[NSNotificationCenter defaultCenter] addObserver: self 
                                             selector: @selector(handleNotification:) 
                                                 name: kNotificationName 
                                               object: nil]; 
    NSString *anyObject = @"hello";
    NSDictionary *userInfo = [NSDictionary dictionaryWithObject:anyObject forKey:kSomeKey];
    NSNotification *notification = [NSNotification notificationWithName:kNotificationName object:nil userInfo:userInfo];
    [[NSNotificationCenter defaultCenter] postNotification:notification];
}
@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        [[Test new] run];
    }
} 
```

# jquery - Jquery - 确认已在需要的地方检查了复选框组

> ID：10864520
> 
> 赞同：0
> 
> 时间：2012-06-02T17:38:05.280
> 
> 标签：jquery, checkbox, radio-button

有人可以告诉我如何解决这个验证问题吗？

我正在尝试为我们正在开发的应用程序编写一个特殊的验证脚本。 **我们不想使用 jquery val 插件**，有几个原因。获取代码的布局非常容易，我让它适用于文本、文本区域和下拉框，但我一直在检查复选框和单选按钮。我对其进行了编码以查找可见字段集，然后在这些可见字段集中找到所需的[类名将具有'-required']复选框和单选字段。

保持我的代码的相同结构，我如何调整我拥有的内容，然后它将过滤上面未检查的内容，并在提交表单之前提供错误消息。 **在产品类型下拉列表中选择“船”。**查看所需的检查和单选字段。

我试过了`not(':checked')`，但这不起作用。我被困住了。请帮忙。

**我的jsfiddle在这里：** `http://jsfiddle.net/justmelat/X3CGW/`

**html和jquery如下：**

```
 <form method="post" action="">
    <div id="holdErrMsg"></div>
    <fieldset id="mainSection" name="mainSection">
                <legend style="color:blue; font-weight:bold">Project Overview Section</legend>

                <table style="width: 100%">
                    <tr>
                        <td style="height: 33px; width: 178px;">Name<span style="color: red">*</span></td>
                        <td style="height: 33px"><input  id="1125" name="1125" class="1125-required" type="text" />1125</td>
                    </tr>
                    <tr>
                        <td style="height: 33px; width: 178px;">Email<span style="color: red">*</span></td>
                        <td style="height: 33px"><input id="1026" name="1026" class="1026-required" type="text" />1026</td>
                    </tr>
                    <tr>
                        <td style="width: 178px">Product Title</td>
                        <td><input  id="1089" name="1089" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="width: 178px">Product Type<span style="color: red">*</span></td>
                        <td><select id="1169" name="1169" class="1169-required">
                        <option value="">Select</option>
                        <option value="Cars">Cars</option>
                        <option value="Boats">Boats</option>
                        <option value="Planes">Planes</option>
                        </select>1169</td>
                    </tr>
                                        <tr><td>
                                        <button id="btnCatchReqFlds" type="button" name="btn">Check Required Fields</button>
                                        </td></tr>
                                    </table>
            </fieldset>

            <fieldset id="section-11" name="section-11">
                <legend style="color:fuchsia; font-weight:bold">Car Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:<span style="color: red">*</span></label></td>
                        <td style="height: 35px"><input id="1245" class="1245-required" name="1245" type="text" />1245</td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:<span style="color: red">*</span></td>
                        <td style="height: 35px">
                        <select id="1433" class="1433-required" name="1433">
<option value="">Select</option>
                <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select>1433</td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>

            <fieldset id="section-12" name="section-12">
                <legend style="color:fuchsia; font-weight:bold">Plane Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color<span style="color: red">*</span>:</td>
                        <td style="height: 35px">
                                                <input type="checkbox" name="1433[]" id="1433[]" value="Orange" class="1433[]-required"/>Orange
                                                <input type="checkbox" name="1433[]" id="1433[]" value="Blue" class="1433[]-required"/>Blue
                                                <input type="checkbox" name="1433[]" id="1433[]" value="Green" class="1433[]-required"/>Green
                       >>1433[] </td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>
            <fieldset id="section-13" name="section-13">
                <legend style="color:fuchsia; font-weight:bold">Boat Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:<span style="color: red">*</span></td>
                        <td style="height: 35px">
                                                <input type="radio" name="1834" id="1834" value="None" class="valuetext 1834-required">None
                                                <input type="radio" name="1834" id="1834" value="All" class="valuetex 1834-required">All
                      &nbsp;&nbsp;|1834[] </td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Approver:</td>
                        <td style="height: 35px">
                                                <input type="checkbox" name="1149[]" id="1149[]" value"John  Marsh" class="1149[]-not_required"/>John Marsh
                                                <input type="checkbox" name="1149[]" id="1149[]" value"Phil Collins" class="1149[]-not_required"/>Phil Collins
                                                <input type="checkbox" name="1149[]" id="1149[]" value"Tom Green" class="1149[]-not_required"/>Tom Green
                       |1149[] </td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Engine:<span style="color: red">*</span></td>
                        <td style="height: 35px">
                                                <input type="radio" name="1898" id="1898" value="Type 1" class="valuetext 1898-required">Type 1
                                                <input type="radio" name="1898" id="1898" value="Type 2" class="valuetext 1898-required">Type 2
                      &nbsp;&nbsp;|1898 </td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset><br>
<fieldset id="section-1011" name="section-1011">
                <legend style="color:green; font-weight:bold">Misc Info Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1301" name="1301" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:</td>
                        <td style="height: 35px">
                        <select id="1302" name="1302">
                <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select></td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1303" name="1303" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>

</form>

$("#section-11,#section-12,#section-13,#section-1011").hide();

var projtype = new Array(
        {value : 'Cars', sect_id : 'fieldset#section-11'},
        {value : 'Planes', sect_id : 'fieldset#section-12'},
        {value : 'Boats', sect_id : 'fieldset#section-13'}
    );
$("select#1169").on('change',function () {
var thisVal = $(this).val();
 var sect_id ="";
     //$('fieldset[id!="mainSection"]').hide();
    $(projtype).each(function() {
$(this.sect_id).hide();
        if(this.value == thisVal) {
        $(this.sect_id).show();
        }
    });        
$("#btnCatchReqFlds").on('click', function() {

    $("#holdErrMsg").empty();
    var chk_requiredButEmpty = $("fieldset:visible").find('input:checkbox[class*="-required"]').filter(function() {
        return not(':checked');
    });

    if (chk_requiredButEmpty.length) {
        chk_requiredButEmpty.each(function () {

            $("#holdErrMsg").append("Please fill in the " + this.name + "<br />");
        });
    }
    return !chk_requiredButEmpty.length;
}); 
```

}) ​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:47:57.847

更新：

为了使这更清晰，更容易理解，我认为您应该将所需的类完全分开。我也提倡使用有效的类名和 id，但这是你的电话，所以使用你的 html，我会通过删除类旁边的 - 来改变这一点。

```
<input type="checkbox" id="a1433[]" value="Orange" class="a1433[] required"/>Orange
                                                <input type="checkbox"  id="a1433[]" value="Blue" class="a1433[] required"/>Blue
                                                <input type="checkbox" id="a1433[]" value="Green" class="a1433[] required"/>Green 
```

现在以下将正常工作：

```
 var chk_requiredButEmpty = $("fieldset:visible input[type=checkbox].required").not(':checked'); 
```

原来的：

我认为您需要将行更改为：

```
var chk_requiredButEmpty = $("fieldset:visible").find('input:checkbox[class*="-required"]').filter(function() {
    return $(this).not(':checked');
}); 
```

此外，您输入的 id 应该以字母开头。尽管它们可能仍然有效，但它们现在仍然无效。

# c++ - 使用 #ifdefs 指定平台

> ID：10864522
> 
> 赞同：4
> 
> 时间：2012-06-02T17:38:18.540
> 
> 标签：c++, c

为了处理 Mac 和 Windows 之间的平台特定代码，**WIN32**和**APPLE**是要使用的术语，对吗？

因此，thw 代码如下所示：

```
#ifdef _WIN32
    // Windows code
#endif
#ifdef __APPLE__
    // Mac code
#endif 
```

Linux 呢？

我怎样才能为这三个人做到这一点？正确的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T17:43:47.800

It's similar:

```
#ifdef __linux__
    // Linux code
#endif 
```

Since you are going to have either one of these three defined at a time, this should be ok for all three.

[List of defines.](http://sourceforge.net/apps/mediawiki/predef/index.php?title=Operating_Systems#linux)

# jquery - mysql表结果上的jquery计算不起作用

> ID：10864523
> 
> 赞同：-1
> 
> 时间：2012-06-02T17:38:18.180
> 
> 标签：jquery, mysql

我正在构建一个多选项卡应用程序，它根据下拉字段中选择的值计算梦幻足球得分。我让它在 6 个选项卡中的 5 个选项卡中工作，但我无法让它在第 6 个选项卡中工作。我希望一双新的眼睛会发现我缺少的东西：

```
<?php
// contact to database
$connect = mysql_connect("localhost", "dariia", "celtic03") or die ("Error , check your server connection.");
mysql_select_db("football");
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head>

<body>

<script type="text/javascript">
$(function(){
function calcTFP(e) {
if(e) e.preventDefault();

var $tds, Sacks, Int_Caught, Def_TD, ST_TD, Shutouts, TFP;

$("tbody#dst tr").each(function() {
    $tds = $(this).find("td");
    Sacks = Number($tds.eq(1).text());
    Int_Caught = Number($tds.eq(2).text());
    Def_TD = Number($tds.eq(3).text());
    ST_TD = Number($tds.eq(4).text());
    Shutouts = Number($tds.eq(5).text());

    TFP = Number($s_sacks_pts.val()) * Sacks;
    TFP += Number($s_int_caught_pts.val()) * Int_Caught;
    TFP += Number($s_def_td_pts.val()) * Def_TD;
    TFP += Number($s_st_td_pts.val()) * ST_TD;
    TFP += Number($s_shut_pts.val()) * Shutouts;

    $tds.eq(6).text(TFP.toFixed(2));//display calculated points in row's TFP column
});
}

//Sacks
var $s_sacks_pts = $("#s_sacks_pts").on('change', calcTFP);

//Int Caught
var $s_int_caught_pts = $("#s_int_caught_pts").on('change', calcTFP);

//Defense TDs
var $s_def_td_pts = $("#s_def_td_pts").on('change', calcTFP);

//Special Teams TDs
var $s_st_td_pts = $("#s_st_td_pts").on('change', calcTFP); 

//Shutouts
var $s_shutouts_pts = $("#s_shutouts_pts").on('change', calcTFP);

calcTFP();//initial calculation on page load
});
</script>

<form id="calc">
<table cellspacing="0" cellpadding="0">
<tr>
    <td style="padding-right:33px"><strong>Sacks:</strong><br />     
    <div style="float:left ; text-align:center">
    <select id="s_sacks_pts">
    <option value="0">0 pts</option>
    <option value="1">1 pt</option>
    <option value="2">2 pts</option>
    <option value="3">3 pts</option>
    <option value="4">4 pts</option>
    <option value="5">5 pts</option>
    <option value="6" selected>6 pts</option>
    <option value="7">7 pts</option>
    <option value="8">8 pts</option>
    <option value="9">9 pts</option>
    <option value="10">10 pts</option>
    </select>
    </div>
    <div style="float:left ; padding:9px 0px 0px 5px">per Sack</div> 
    </td>
    <td style="padding-right:33px"><strong>Int Caught</strong><br />     
    <div style="float:left ; text-align:center">
    <select id="s_int_caught_pts">
    <option value="0">0 pts</option>
    <option value="1">1 pt</option>
    <option value="2">2 pts</option>
    <option value="3">3 pts</option>
    <option value="4">4 pts</option>
    <option value="5">5 pts</option>
    <option value="6" selected>6 pts</option>
    <option value="7">7 pts</option>
    <option value="8">8 pts</option>
    <option value="9">9 pts</option>
    <option value="10">10 pts</option>
    </select>
    </div>
    <div style="float:left ; padding:9px 0px 0px 5px">per Int Caught</div>
    </td>   
    <td style="padding-right:33px"><strong>Def TDs:</strong><br />     
    <div style="float:left ; text-align:center">
    <select id="s_def_td_pts">
    <option value="0" selected>0 pts</option>
    <option value="1">1 pt</option>
    <option value="2">2 pts</option>
    <option value="3">3 pts</option>
    <option value="4">4 pts</option>
    <option value="5">5 pts</option>
    <option value="6">6 pts</option>
    <option value="7">7 pts</option>
    <option value="8">8 pts</option>
    <option value="9">9 pts</option>
    <option value="10">10 pts</option>
    </select>
    </div>
    <div style="float:left ; padding:9px 5px 0px 5px">per TD</div>
    </td>
    <td style="padding-right:33px"><strong>ST TDs:</strong><br />     
    <div style="float:left ; text-align:center">
    <select id="s_st_td_pts">
    <option value="0" selected>0 pts</option>
    <option value="1">1 pt</option>
    <option value="2">2 pts</option>
    <option value="3">3 pts</option>
    <option value="4">4 pts</option>
    <option value="5">5 pts</option>
    <option value="6">6 pts</option>
    <option value="7">7 pts</option>
    <option value="8">8 pts</option>
    <option value="9">9 pts</option>
    <option value="10">10 pts</option>
    </select>
    </div>
    <div style="float:left ; padding:9px 5px 0px 5px">per TD</div>
    </td>            
    <td style="padding-right:33px"><strong>Shutouts:</strong><br />     
    <div style="float:left ; text-align:center">
    <select id="s_shutouts_pts">
    <option value="0" selected>0 pts</option>
    <option value="1">-1 pt</option>
    <option value="2">-2 pts</option>
    <option value="3">-3 pts</option>
    <option value="4">-4 pts</option>
    <option value="5">-5 pts</option>
    <option value="6">-6 pts</option>
    <option value="7">-7 pts</option>
    <option value="8">-8 pts</option>
    <option value="9">-9 pts</option>
    <option value="10">-10 pts</option>
    </select>
    </div>
    <div style="float:left ; padding:9px 5px 0px 5px">per TD</div>
    </td>
</tr>            
</table>                                              
</form>
<p>* Note: You can sort Def / ST projections by any stat you like. Just click on the stat name to sort.</p>
<table id="table-def" class="tablesorter" cellspacing="0" cellpadding="5" border="1" width="630">
<thead>
<tr style="text-align:center">
<th>Team</th>
<th>Sacks</th>
<th>Int</th>
<th>Def TD</th>
<th>ST TD</th>
<th>Shutouts</th>
<th>TFP</th>
</tr>
</thead>
<tbody id="dst">
<?php
$result = mysql_query("SELECT Team, Sacks, Int_Caught, Def_TD, ST_TD, Shutouts, Total_Fantasy_Pts FROM ff_projections WHERE Position = 'Def' ORDER BY Pass_Yds DESC;");

while($row = mysql_fetch_array($result))
{
echo "<tr style=\"text-align:center\"><td>{$row['Team']}</td>";
echo "<td>{$row['Sacks']}</td>";
echo "<td>{$row['Int_Caught']}</td>";
echo "<td>{$row['Def_TD']}</td>";
echo "<td>{$row['ST_TD']}</td>";
echo "<td>{$row['Shutouts']}</td>";
echo "<td>{$row['Total_Fantasy_Pts']}</td></tr>";
}
?>
</tbody>
</table>      

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:40:47.337

DOH! It was an oversight on my part.

```
TFP += Number($s_shut_pts.val()) * Shutouts; 
```

should have been

```
TFP += Number($s_shutouts_pts.val()) * Shutouts; 
```

Sigh...I've gone code-blind.

# c# - 面包屑模式实现

> ID：10864525
> 
> 赞同：1
> 
> 时间：2012-06-02T17:38:44.560
> 
> 标签：c#, asp.net, asp.net-mvc

我正在开发一个 asp.net mvc 2.0 应用程序，我想在其中实现面包屑模式，但我不知道如何在 asp.net 中实现它。通过浏览不同的站点，我开始了解 MVCSiteMap Provider，但我不知道如何使用它以及如何使用 mvcsitemap 在 asp.net mvc 2.0 中实现面包屑。请帮我。

提前致谢。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T17:56:27.320

[顾名思义， MvcSiteMapProvider](https://github.com/maartenba/MvcSiteMapProvider/wiki)是 ASP.NET MVC 框架的 ASP.NET MVC SiteMapProvider 实现。它以 ASP.NET MVC 2 为目标，提供站点地图 XML 功能以及与经典 ASP.NET 站点地图控件的互操作性，例如用于呈现面包屑的 SiteMapPath 控件和菜单控件。

**创建第一个站点地图**

以下是一个可以与 MvcSiteMapProvider 一起使用的简单站点地图 XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?> 
<mvcSiteMap xmlns="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0" enableLocalization="true"> 
  <mvcSiteMapNode title="Home" controller="Home" action="Index" changeFrequency="Always" updatePriority="Normal"> 
    <mvcSiteMapNode title="Browse Store" controller="Store" action="Index" /> 
    <mvcSiteMapNode title="Checkout" controller="Checkout" /> 
  </mvcSiteMapNode> 
</mvcSiteMap> 
```

**在代码中定义站点地图节点**

在某些情况下，在代码中定义站点地图节点比在站点地图 xml 文件中定义它更方便。为此，请使用 MvcSiteMapNodeAttribute 属性装饰一个操作方法。例如：

```
// GET: /Checkout/Complete 
[MvcSiteMapNodeAttribute(Title = "Checkout complete", ParentKey = "Checkout")] 
public ActionResult Complete(int id) 
{ 
    // ... 
} 
```

[MvcSiteMapProvider](https://github.com/maartenba/MvcSiteMapProvider/wiki)

[MVC Sitemap Provider 教程和示例](http://edspencer.me.uk/2011/02/10/mvc-sitemap-provider-tutorial/)

[MVC Sitemap Provider 教程 2 – 面包屑](http://edspencer.me.uk/2011/09/20/mvc-sitemap-provider-tutorial-2-breadcrumbs/)

# python - Python 字符串编码和 ==

> ID：10864526
> 
> 赞同：1
> 
> 时间：2012-06-02T17:38:44.513
> 
> 标签：python, string, utf-8

当我认为它们应该存在时，我在 python 中的字符串不存在时遇到了一些问题`==`，我相信这与它们的编码方式有关。基本上，我解析了一些存储在 zip 档案中的逗号分隔值（特别是 GTFS 提要，对于那些好奇的人）。

我在 python 中使用 ZipFile 模块打开 zip 存档中的某些文件，然后将那里的文本与一些已知值进行比较。这是一个示例文件：

```
agency_id,agency_name,agency_url,agency_phone,agency_timezone,agency_lang
ARLC,Arlington Transit,http://www.arlingtontransit.com,703-228-7433,America/New_York,en 
```

我正在使用的代码试图识别文本第一行中字符串“agency_id”的位置，以便我可以在任何后续行中使用相应的值。这是代码片段：

```
zipped_feed = ZipFile(feed_name, "r")
agency_file = zipped_feed.open("agency.txt", "r")

line_num = 0
agencyline = agency_file.readline()
while agencyline:
    if line_num == 0:
        # this is the header, all we care about is the agency_id
        lineparts = agencyline.split(",")
        position = -1
        counter = 0
        for part in lineparts:
            part = part.strip()
            if part == "agency_id":
                position = counter              
        counter += 1
        line_num += 1
        agencyline = agency_file.readline()
    else:
        ..... 
```

此代码适用于某些 zip 档案，但不适用于其他档案。我做了一些研究并尝试打印 repr(part)，我得到了 '\xef\xbb\xbfagency_id' 而不是 'agency_id'。有谁知道这里发生了什么以及我该如何解决？感谢所有的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T17:45:43.513

那是一个[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)，它告诉文件的编码，在 UTF-16 和 UTF-32 的情况下，它还告诉文件的字节序。您可以解释它或检查它并将其从字符串中删除。要删除它，您可以这样做：

```
import codecs

unicode(part, "utf8").lstrip(codecs.BOM_UTF8.decode("utf8", "strict")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T17:45:34.213

您的输入文件似乎是 utf-8 并以`'ZERO WIDTH NO-BREAK SPACE'`-character 开头，

```
import unicodedata
unicodedata.name('\xef\xbb\xbf'.decode('utf8'))
# gives: 'ZERO WIDTH NO-BREAK SPACE' 
```

用作 BOM（或更准确地说，将文件标识为 utf8，因为 utf8 的字节顺序并不准确，但无论如何它通常称为 BOM）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T17:48:50.627

很简单：您的一些 zip 档案在字符串的开头打印[Unicode BOM（字节顺序标记） 。](http://en.wikipedia.org/wiki/Byte_order_mark)这用于指示用于多字节编码的字节顺序。这意味着您正在将 Unicode 字符串（可能是 UTF-16 编码）作为字节字符串读取。最简单的方法是在字符串的开头检查它并将其删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T17:53:08.423

你得到的是一个文件，它可能偶尔在文件的前面有一个 Unicode 字节顺序标记。有时这是由编辑引入以指示编码。

这里有一些细节 - [http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)

底线是您可以查找 \xef\xbb\xbf 字符串，它是 UTF-8 编码数据的标记，然后将其剥离。或者另一种选择是使用编解码器包打开它

```
with codecs.open('input', 'r', 'utf-8') as file: 
```

或者在你的情况下

```
zipped_feed = ZipFile(feed_name, "r")
# adding a StreamReader around the zipped_feed.open(...)
agency_file = codecs.StreamReader(zipped_feed.open("agency.txt", "r")) 
```

# java - 在为登录用户选择类型菜单的情况下，使用 Eq (JSTL) 违反 MVC 原则

> ID：10864528
> 
> 赞同：0
> 
> 时间：2012-06-02T17:39:05.333
> 
> 标签：java, jsp, jstl, jsp-tags

我面临下一个问题。我使用 2 种菜单（导师和学生）。我决定根据角色登录用户包含菜单。一切正常。但我使用下一个构造：

```
<div class="left"> 
    <c:if test="${role eq 'TUTOR'}">
        <c:import url="/page/tutor/menuForTutor.jsp" charEncoding="UTF-8"/>
    </c:if>

    <c:if test="${role eq 'STUDENT'}">
        <c:import url="/page/student/menuForStudent.jsp" charEncoding="UTF-8"/>
    </c:if>
</div> 
```

人们说使用`'eq'`是一种糟糕的风格。我试图逃避这种情况：我创建了用户标签。但是当我接下来做

```
if (Role.TUTOR.equals(role)) {
            try {
                pageContext.getOut().write("<c:import url=\"/page/tutor/menuForTutor.jsp\" charEncoding=\"UTF-8\"/>");
            } catch (IOException ex) {
                Logger.getLogger(MenuTag.class.getName()).log(Level.SEVERE, null, ex);
            } 
```

我无法得到我期望的结果，因为据我所知，html 中的转换 jsp 发生在创建用户标签之前。

你能建议我做我想做的其他方法吗？谢谢

PS而且我在我的jsp文件中使用本地化菜单（fmt）

```
<fmt:bundle basename="by.bsuir.testing.resource.content" prefix="content.">
    <fmt:message key="menu" var="Menu"/>
    <fmt:message key="startPage" var="StartPage"/>
    <fmt:message key="menuitem.editInfoAboutTest" var="MenuItemEditInfoAboutTest"/>
</fmt:bundle>
<h1>${Menu}</h1>
<ul>    
    <li>
        <a href="${pageContext.servletContext.contextPath}/page/common/login.jsp">
            ${StartPage}
        </a>
    </li>            
    <li>
        <a href="controller?command=all_Subject_Edit">
            ${MenuItemEditInfoAboutTest}
        </a>
    </li>  
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:19:09.853

我不知道为什么 'eq' 是一种不好的风格（或 '==' 是一样的）。

但是您的标签将不起作用，因为您无法将 JSP 指令写入 out 并期望它会起作用：

```
pageContext.getOut().write(
   "<c:import url=\"/page/tutor/menuForTutor.jsp\" charEncoding=\"UTF-8\"/>"); 
```

您只能编写 HTML - 因为它是发送到浏览器的输出，而不是用于编译到 Web 容器。

您可以尝试直接调用`ImportTagImportTag`：

```
ImportTag tag = new ImportTag();
tag.setUrl("/page/tutor/menuForTutor.jsp");
tag.setCharEncoding("UTF-8");
tag.setContext(pageContext);
tag.doStartTag(); 
```

PS 但我会使用 'eq' 或 '==' 代替。

# google-app-engine - AppEngine - JDO - 对批量获取 query.execute(...) 的单个调用会引发多个 datastore_v3.Get 调用

> ID：10864533
> 
> 赞同：0
> 
> 时间：2012-06-02T17:39:47.297
> 
> 标签：google-app-engine, google-cloud-datastore, jdo, datanucleus

我已经实现了一个 AppEngine Java 应用程序。它运行得很好——除了我有太多的数据存储读取操作。

所以我安装了`appstats`工具来分析它。它表明，在我的代码的一个点上，我正在做一个请求：

```
Query query = persistenceManager.newQuery(Info.class,
                    ":keys.contains(key)");
List<Info> storedInfos = (List<Info>) query.execute(keys); 
```

一次调用会`execute(...)`导致多次`datastore_v3.Get`调用。我多次得到这个堆栈跟踪：

```
com.google.appengine.tools.appstats.Recorder:297 makeAsyncCall()
com.google.apphosting.api.ApiProxy:184 makeAsyncCall()
com.google.appengine.api.datastore.DatastoreApiHelper:59 makeAsyncCall()
com.google.appengine.api.datastore.AsyncDatastoreServiceImpl:351 doBatchGetBySize()
com.google.appengine.api.datastore.AsyncDatastoreServiceImpl:400 doBatchGetByEntityGroups()
com.google.appengine.api.datastore.AsyncDatastoreServiceImpl:292 get()
com.google.appengine.api.datastore.DatastoreServiceImpl:87 get()
com.google.appengine.datanucleus.WrappedDatastoreService:90 get()
com.google.appengine.datanucleus.query.DatastoreQuery:374 executeBatchGetQuery()
com.google.appengine.datanucleus.query.DatastoreQuery:278 performExecute()
com.google.appengine.datanucleus.query.JDOQLQuery:164 performExecute()
org.datanucleus.store.query.Query:1791 executeQuery()
org.datanucleus.store.query.Query:1667 executeWithArray()
org.datanucleus.api.jdo.JDOQuery:243 execute()
de.goddchen.appengine.app.InfosServlet:78 doPost() 
```

它甚至在打电话`executeBatchGetQuery`，为什么会多次发出？

我已经尝试了一些数据存储/持久性管理器设置，但没有任何帮助:(

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:12:39.570

您可能会看到键被分成组并且查询正在异步执行。您要查询多少个键？

# java - Java XSD validator can't find element declaration

> ID：10864536
> 
> 赞同：4
> 
> 时间：2012-06-02T17:40:04.700
> 
> 标签：java, xml, xsd, schema, sax

I have a simple schema validator method:

```
// Throws runtime exception if anything goes wrong.
public void validate(String schemaURL, String xml) throws Throwable {
    SAXParserFactory oSAXParserFactory = SAXParserFactory.newInstance();
    SAXParser oSAXParser = null;
    oSAXParserFactory.setNamespaceAware(true);
    SchemaFactory oSchemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    oSAXParserFactory.setSchema(oSchemaFactory.newSchema(new URL(schemaURL)));
    oSAXParser = oSAXParserFactory.newSAXParser();
    SaxErrorHandler handler = new SaxErrorHandler();
    oSAXParser.parse(new InputSource(new StringReader(xml)),handler);
} 
```

I have a schema hosted at `http://myserver.com/schemas/app-config/1.0/app-config-1.0.xsd`:

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
    <xs:element name="application">
        <xs:complexType>
            <xs:choice>
                <xs:element ref="info"/>
            </xs:choice>
        </xs:complexType>
    </xs:element>
    <xs:element name="info">
        <xs:complexType>
            <xs:attribute name="name" type="xs:string" use="optional"/>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

Observe the follow instance of that schema:

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://myserver.com/schemas/app-config/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://myserver.com/schemas/app-config/1.0
        http://myserver.com/schemas/app-config/1.0/app-config-1.0.xsd">
    <info
        name="Dummy Application"
    />
</application> 
```

When I pass my `validate` method the following:

```
String xmlInstance = readXMLIntoString();
String schemaURL = "http://myserver.com/schemas/app-config/1.0/app-config-1.0.xsd";

validate(schemaURL, xmlInstance); 
```

I get the following error:

> org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'application'.

*   Is something wrong with my schema?
*   Is something invalid with my instance?
*   Is there a problem with me actually hosting the schema at the URL (although the one used in this example is a mockup, I assure you that the XSD file really is hosted at the URL I'm hitting in the code)?

Why can't the validator find `application` declaration?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T18:18:18.020

You're XML Schema is missing a *targetNamespace*.

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
  targetNamespace="http://myserver.com/schemas/app-config/1.0"
  elementFormDefault="qualified">
  ... 
```

Instead of declaring a *targetNamespace* in your XML Schema you could drop all that *mumbo jumbo* from your XML.

```
<application>
  ... 
```

Still, try to stick to the first solution.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T17:57:31.437

My original answer stated that schemaLocation was incorrect, which is in fact the case, but for a different reason than I suggested originally. As Kohányi Róbert said, your schema is missing a `targetNamespace`. Either follow his approach and modify your schema, or replace `schemaLocation` with `noNamespaceSchemaLocation`.

# java - java Regex - 拆分但忽略引号内的文本？

> ID：10864537
> 
> 赞同：1
> 
> 时间：2012-06-02T17:40:17.173
> 
> 标签：java, regex

仅使用正则表达式方法、方法 String.replaceAll 和 ArrayList 我如何将字符串拆分为标记，但忽略引号内存在的分隔符？分隔符是任何不是字母数字或引用文本的字符

例如：字符串：

> 你好^world'这个*有两个标记'

应该输出：

> *   你好
> *   worldthis* 有两个标记

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T18:43:54.690

我知道已经存在一个该死的好且公认的答案，但我想添加另一种基于正则表达式（我可以说更简单）的方法来使用不在单引号内的任何非字母数字分隔符拆分给定文本

**正则表达式：**

```
/(?=(([^']+'){2})*[^']*$)[^a-zA-Z\\d]+/ 
```

这基本上意味着如果非字母数字文本**后跟偶数个单引号**，则匹配非字母数字文本，换句话说，如果它在单引号之外，则匹配非字母数字文本。

**代码：**

```
String string = "hello^world'this*has two tokens'#2ndToken";
System.out.println(Arrays.toString(
     string.split("(?=(([^']+'){2})*[^']*$)[^a-zA-Z\\d]+"))
); 
```

**输出：**

```
[hello, world'this*has two tokens', 2ndToken] 
```

**演示：**

[**`Here is a live working Demo of the above code.`**](http://ideone.com/xmDsU)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T17:42:23.337

You cannot in any reasonable way. You are posing a problem that regular expressions aren't good at.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-02T17:46:28.900

使用 a[`Matcher`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#find%28%29)来标识要保留的部分，而不是要拆分的部分：

```
String s = "hello^world'this*has two tokens'";
Pattern pattern = Pattern.compile("([a-zA-Z0-9]+|'[^']*')+");
Matcher matcher = pattern.matcher(s);
while (matcher.find()) {
    System.out.println(matcher.group(0));
} 
```

在线查看它：[ideone](http://ideone.com/Uxa5e)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T17:45:53.960

不要为此使用正则表达式。它行不通。改为使用/编写解析器。

您应该为正确的任务使用正确的工具。

# javascript - Javascript GC and assigning objects to null

> ID：10864544
> 
> 赞同：2
> 
> 时间：2012-06-02T17:41:26.870
> 
> 标签：javascript, memory-management, garbage-collection

Say I instantiate a large object with `var` and `new`. After I'm done with it, can I "free" it by setting it to `null`? Is this something Javascript GCs look for?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T17:43:28.877

The garbage collection is interested in objects, that are not referenced by ANY other object. So make sure there are no references left anywhere in your application (Arrays etc.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T17:43:16.237

You can break the reference by setting the variable to `null`, but it doesn't break any other references.

All references need to be broken individually before the object can be GC'd.

So yes, if the only reference to the object that is held by that variable, then setting it to `null` will free it for eventual GC.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T17:49:32.807

正如我所说的那样，您需要中断所有引用才能使变量有资格进行垃圾收集。如果您无法追踪对特定对象的最后引用，这可能是一项艰巨的任务，因此请使用您可用的工具来完成此任务。我个人使用 Chrome 的堆分析器，您可以[在 chrome 文档](https://developers.google.com/chrome-developer-tools/docs/heap-profiling)中阅读。

另外，请注意只有非原始类型通过引用传递（因此只有非原始类型可以被 GC'd）。

# aptana - Aptana Warns about script and link tags when it shouldn't

> ID：10864546
> 
> 赞同：12
> 
> 时间：2012-06-02T17:41:40.707
> 
> 标签：aptana, aptana3

I'm running Aptana Studio 3, build: 3.1.3.201205292243, Win7 64bit, and I've noticed that after the last update, Aptana is warning me (annotations on the vertical) that I should "trim empty " tags, but these are normal script tags linking an external js file like this:

```
 <!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->

    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="js/jquery.lightbox-0.5.js"></script>
    <script src="js/flickrapi3.js"></script>
    <link rel="stylesheet" href="css/jquery.lightbox-0.5.css" />
    <link rel="stylesheet" href="css/flickrStyle.css" /> 
```

Furthermore, it also warns me about the rel attribute inside the link tag as having an "invalid value" and yet these are the defaults included in the HTML5 template Aptana bundles with the release.

I've checked in Preferences>Editors>Text Editors and I see annotation settings but I don't see where I can correct these completely off the wall warnings. Am I missing something entirely here? Are these known bugs? How do I correct these issue?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-06T21:18:40.127

转到窗口 > 首选项 > Aptana Studio > 验证 > HTML。

将“HTML Tidy Validator”的两项检查改为“X”。或者，您可以单击“+”添加正则表达式以过滤掉错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-03T16:53:25.373

这只是一个技巧，并`</script>`在一个新的行中，警告将消失，如下所示：

```
<script src="js/jquery.lightbox-0.5.js">
</script> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-04T20:14:53.703

隐藏警告的另一个更简单的解决方法是在标签之间放置一个空格。

```
<script src="js/jquery.lightbox-0.5.js"> </script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-14T23:02:55.650

如果您发现警告不仅仅是脚本标签很烦人，您可以禁用它所有标签

转到窗口 > 首选项 > Aptana Studio > 验证

选择`HTML Tidy Validator`然后会出现一些可折叠的选项。选择`Elements`，它将显示选项列表。现在转到列表底部，您将看到将`Trim empty elements`其从更改`warning`为`ignore`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T19:53:03.023

这应该在版本 3.2.0.201206061952 中得到修复： [https](https://jira.appcelerator.org/browse/APSTUD-4724) ://jira.appcelerator.org/browse/APSTUD-4724 所以你可以拉一个夜间构建或者只是等待他们推广它来发布。

# debugging - Debugging mono applications directly on ARM target

> ID：10864548
> 
> 赞同：6
> 
> 时间：2012-06-02T17:42:39.853
> 
> 标签：debugging, mono, arm, monodevelop, beagleboard

I've recently installed Mono on a BeagleBone embedded ARM device, looking to connect a Kinnect sensor by USB and control it with C#/Mono

I'm wondering, does Mono (I'm using MonoDevelop but I guess this question also applies to VS) allow you to develop locally and then debug the code against a remote target? If so how can this be accomplished?

I've heard that the Soft Debugger might be what I need but after poking around in the configuration and having a look at the docs I can't find what I need....

Thanks!

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T18:56:31.347

如果您有网络连接，Monodevelop 可以调试远程目标。在启动 monodevelop 之前，您需要设置环境变量：

```
MONODEVELOP_SDB_TEST=1 
```

然后，当您启动 MD 时，您将拥有“自定义 Mono Soft Debugger”作为“调试方式”选项。

在远程主机上，像这样启动您的调试目标（我假设它有一个外壳）：

```
mono --debug \
--debugger-agent=transport=dt_socket,address=0.0.0.0:12345,server=y \
myprogram.exe 
```

在 Mono 开发中，设置断点，然后输入目标机器的 IP 地址和上面的端口号，然后单击连接。那应该远程进入调试器。

# php - 会话在我的网站上不起作用

> ID：10864551
> 
> 赞同：0
> 
> 时间：2012-06-02T17:42:55.657
> 
> 标签：php, session-variables

我正在网站上使用会话，但无法获取其他页面上的数据。我已经在其他主机上使用了代码，并且在其他主机上运行良好，所以我认为是主机问题。

**我用来保存会话的代码是：**

```
session_start();

$_SESSION["std_id"] = 'rst';

echo "<pre>";
print_r($_SESSION);
echo "</pre>"; 
```

**我正在使用以下代码在另一页上检索它：**

```
session_start();
echo "<pre>";
print_r($_SESSION);
echo "</pre>"; 
```

正如我所说，它在 other`host`和 on 上都可以正常工作`localhost`，所以这是服务器问题，但我需要保留用户的登录信息，因为我们用来通过会话维护登录记录。

我们已经在该站点上安装了 Joomla，它运行良好，可以维护所有登录信息和所有内容。

除了更改主机之外，任何人都可以建议我解决方案:) 谢谢。

**编辑：** 由于某种原因，我无法显示主机名。我使用的域是大学部门的子域，主站点是大学站点，我在子域的新文件夹下使用此代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:15:43.593

您的错误日志或 php 错误报告 ( [error_reporting](http://php.net/manual/en/function.error-reporting.php) ) 中是否有任何错误？像`"No session exists - writing to test_value"`

you can also test your current session directory if its writeable:

```
$writeable = is_writable(ini_get("session.save_path")); 
```

one solution is to `change your session directory` with this: (create the **/tmp** directory `by hand` in your root)

```
ini_set("session.save_path","/tmp"); 
```

or to your **.htaccess**

```
php_value session.save_path /tmp 
```

and give `0777` permission in that **/tmp** directory, which must be in your root.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T17:47:17.563

正如我在您的代码中看到的，一切看起来都很好。您无需更改您的主机，只需联系您的主机提供商即可。我之前也遇到过类似的问题。如果您联系他们，他们将编辑您的 php.ini 文件以允许您开始会话。

**注意：**并非每个主机提供商都允许用户使用 PHP 的许多功能。你有它要求他们设置它。他们关闭这些功能以节省 CPU 使用率。

# java - Android 初学者：电子邮件和字符串

> ID：10864558
> 
> 赞同：1
> 
> 时间：2012-06-02T17:43:45.940
> 
> 标签：java, android, eclipse, android-layout, android-intent

我正在创建一个带有建议框的应用程序。当用户将信息输入到编辑文本中时，将检索信息并将其放入字符串值中。然后将该字符串放入电子邮件的文本中。但是，发送电子邮件时，文本不包含编辑文本的值。

这是我的代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.suggestions);

        Spinner spinner = (Spinner) findViewById(R.id.emailArea);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter
                .createFromResource(this, R.array.email_array,
                        android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);
        spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

        Button send = (Button) findViewById(R.id.emailSendButton);
        EditText ettext = (EditText) findViewById(R.id.etEmailText);
        EditText returnAddress = (EditText) findViewById(R.id.etReturnAddress);

        String text = ettext.getText().toString();
        String returnAddressText = returnAddress.getText().toString();

        emailText =
                "\n\nArea in the Guide: " + area
                + "\n\nSuggestion or Comment: " + text + 
                "\n\nReturn Address: "+ returnAddressText;

        send.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                Intent emailIntent = new Intent(
                        android.content.Intent.ACTION_SEND);

                emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,
                        address);
                emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
                        "Suggestions/Comments: Black Ops 2");
                emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,
                        emailText);
                emailIntent.setType("text/plain");

                startActivity(Intent.createChooser(emailIntent, "Send Mail"));
                finish();
            }

        });
    }

    private void showToast() {
        Toast.makeText(this, "Thank you. Your message has been sent.",
                Toast.LENGTH_SHORT).show();// TODO Auto-generated method stub

    }

    public class MyOnItemSelectedListener implements OnItemSelectedListener {

        public void onItemSelected(AdapterView<?> parent, View view, int pos,
                long id) {

            area = areas[pos];
        }

        public void onNothingSelected(AdapterView parent) {

        }
    }
} 
```

但是，无论输入什么，我总是得到空白文本和微调器的空值。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:14:07.283

检索`EditText`里面的值`onClickListener`并使用它。

```
EditText etText;
EditText returnAddress;
public void onCreate(Bundle savedInstanceState) {
    //....
    Button send = (Button) findViewById(R.id.emailSendButton);
    etText = (EditText) findViewById(R.id.etEmailText);
    returnAddress = (EditText) findViewById(R.id.etReturnAddress);
     send.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            String text = etText.getText().toString();
            String returnAddressText = returnAddress.getText().toString();

            emailText =
                "\n\nArea in the Guide: " + area
                + "\n\nSuggestion or Comment: " + text + 
                "\n\nReturn Address: "+ returnAddressText;

            Intent emailIntent = new Intent(
                    android.content.Intent.ACTION_SEND);

            emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,
                    address);
            emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
                    "Suggestions/Comments: Black Ops 2");
            emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,
                    emailText);
            emailIntent.setType("text/plain");

            startActivity(Intent.createChooser(emailIntent, "Send Mail"));
            finish();
        }

    });
    //...
} 
```

# asp.net-mvc - Should a PUT identifier come from the URL or from the HTTP request data?

> ID：10864560
> 
> 赞同：1
> 
> 时间：2012-06-02T17:44:12.900
> 
> 标签：asp.net-mvc, rest, put, restful-url

This question is probably a dupe, but I couldn't find a similar one (not sure exactly what to search for).

Say I have a restful resource URL like this:

```
/my/items/6/edit 
```

There is a form at this page which allows me to edit my #6 item. When I submit the form, it POSTS to `/my/items/6`, with a PUT X-HTTP-Method-Override header.

My question is, where should the server handler get the value "6" from? Should it get it from the URL? Or from the HTTP POST data (say the id was rendered as a hidden input field on the form)?

It seems to me like it should come from the URL. However this makes it a little more trouble to get it out. For example in .NET MVC, you might get it like this from a controller action method:

```
var id = int.Parse(ControllerContext.RouteData.Values["id"].ToString()); 
```

...which seems like more trouble than it's worth. However, if we get it out of the HTTP POST data, then technically you could post/put data for my item #6 to `/my/items/7`, and the server would still save the item data under id #6\.

Are there any standard practices here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:52:34.600

检查这个： http: [//www.codeproject.com/Articles/190267/Controllers-and-Routers-in-ASP-NET-MVC-3](http://www.codeproject.com/Articles/190267/Controllers-and-Routers-in-ASP-NET-MVC-3)

我不是 .net 开发人员，尽管所有平台的最佳实践是将您的 URI 模板映射到控制器。路由器必须解析和准备这些信息并将其传递给您的函数/方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T04:21:17.057

它绝对应该来自 URL。在 ASP.NET MVC 中，如果您有这样定义的路由：

```
routes.MapRoute(
    "Default",
    "/my/{controller}/{id}/{action}",
    new { controller = "items", action = "Index" }
); 
```

您将能够从 ActionResult 方法签名中引用 ID，如下所示：

```
[HttpPut]
public ActionResult Index(int id, MyItemEditModel model)
{
    // id would be 6 if the URL was /my/items/6/
    // and the model need not contain the id
    ... 
```

# php - How to use SSL connection with php?

> ID：10864561
> 
> 赞同：0
> 
> 时间：2012-06-02T17:44:22.893
> 
> 标签：php, ssl, ftp

I read about `ftp_ssl_connect()` method, but it doesn't exists. I enabled it in php.ini and also `phpinfo();` say every SSL is enabled. Furthermore, I read php should be recompiled, it requies C++ compiler, etcetcetc which I dont want. Is there any solution for this?

# c#-4.0 - 我如何知道我是否需要 XDocument 或 XElement？

> ID：10864576
> 
> 赞同：2
> 
> 时间：2012-06-02T17:45:58.770
> 
> 标签：c#-4.0, linq-to-xml, xelement

我知道它们非常相似，并且 XDocument 代表整个文档，而 XElement 代表整个文档的片段，但是在加载和查询/更新数据时它们似乎非常相似。我将把模板保存到磁盘上，当我加载它们时，我想查询它们并插入、更新和删除数据部分，无论是属性还是元素。XDocument 或 XElement 在这里有什么不同吗？如果我首先在动态上构建模板会有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:37:16.163

对于初学者，它们[在加载文档时的行为方式不同](http://msdn.microsoft.com/en-us/library/bb675196.aspx)，这意味着当您选择一个而不是另一个时，您必须以不同的方式编写查询。除此之外，[msdn](http://msdn.microsoft.com/en-us/library/bb387063.aspx)指出

> XDocument 类包含有效 XML 文档所需的信息。这包括 XML 声明、处理指令和注释。请注意，如果您需要 XDocument 类提供的特定功能，您只需创建 XDocument 对象。在许多情况下，您可以直接使用 XElement。直接使用 XElement 是一种更简单的编程模型

所以我会坚持使用 XElement，除非需要任何上述关于 xml 的元数据（这似乎不是这种情况）。

# django - Django ModelForm ValueError

> ID：10864577
> 
> 赞同：0
> 
> 时间：2012-06-02T17:46:02.680
> 
> 标签：django, django-mptt, mptt

我有一个 Django 模型

```
class Category(MPTTModel):
    name = models.CharField(max_length=50, unique=True)
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')

    def __unicode__(self):
        return self.name
    class MPTTMeta:
        order_insertion_by = ['name'] 
```

和模型形式

```
class UploadForm(ModelForm):
   file = forms.FileField()
   category = mpttform.TreeNodeMultipleChoiceField(queryset=Category.objects.filter(lft=F('rght')-1))
   class Meta:
         model = UploadedFile 
```

但是，我在 UploadForm 中的这个类别字段有问题，它应该是类别实例（在模型中定义），但是我的查询集返回类别对象的列表，我在模板中使用它来显示所有叶类别。如果我选​​择任何表格上的类别并提交它，我收到此错误（如果我选择 cat5）“无法分配 [类别：cat5]：“UploadedFile.category”必须是“类别”实例。所以我明白为什么会发生这个错误，但我想使用 ModelForm 因为 save() 方法，但不知道如何解决这个问题。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T03:38:32.060

我认为

```
category = mpttform.TreeNodeMultipleChoiceField(queryset=Category.objects.filter(lft=F('rght')-1)) 
```

适用于 m2m 关系，我猜类别是模型上传文件中的 ForeignKey。如果是这样，你应该使用

```
category = mpttform.TreeNodeChoiceField(queryset=Category.objects.filter(lft=F('rght')-1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T02:13:27.063

Django 告诉您必须启动一个类别实例才能迭代类别。因此，类别实例从 url 中获取参数，在 urls.py 中使用正则表达式的 url 参数。因此，您需要捕获参数并使其成为视图中的类别实例。

*请参阅基于类的通用视图，这些视图会自动为您提供 params 上下文变量。

# javascript - 将动画添加到选项卡导航

> ID：10864580
> 
> 赞同：0
> 
> 时间：2012-06-02T17:46:38.213
> 
> 标签：javascript, jquery, tabs, jquery-animate

我想知道将动画添加到某些选项卡导航的最简单方法是什么。我正在开发一个小型文档网站[Documentation](http://rolandgroza.com/projects/doc/)，如您所见，我有一个小箭头，在导航时会添加到选项卡中。

好吧，我在想的是，如果我可以这样做：[示例](http://www.elegantthemes.com/preview/Glider/)；我尝试了一些东西，我通过 JS 添加了一个跨度，然后点击事件（应用于`li`元素）触发箭头动画。问题是我停止了脚本，该脚本负责使选项卡在它们停止时工作。

那么还有另一种方法可以实现这样的目标吗？逻辑是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:12:02.750

最简单的方法是在 st_slide_container 中添加一个狭窄的绝对位置 div 并将位置放在右侧。在该新元素内添加另一个元素，该元素刚好适合您的箭头图标并且是绝对位置。

使用选项卡更改的回调（取决于插件 API 中可用的内容）或将另一个单击处理程序添加到 a.st_tab。在此事件处理程序中，您可以获得当前选项卡的索引并将位置顶部的动画应用于小箭头元素

编辑：获取索引的单击处理程序示例，该索引将成为`top`动画的乘数

```
$('a.st_tab').click(function(){
   alert($(this).parent().index())
}) 
```

# entity-framework - 没有数据库的实体框架

> ID：10864582
> 
> 赞同：10
> 
> 时间：2012-06-02T17:47:08.637
> 
> 标签：entity-framework, linq-to-entities, dataset

我喜欢使用实体框架有很多原因——实体设计器的易用性、linq 的强大功能以及绑定的易用性。有时我想构建一个不需要使用数据库但仍需要处理数据并将其显示在屏幕、网格等中的简单应用程序，因此我只想创建一个快速 EF 模型并将其用于此目的，但仅将其用于本地数据似乎并不能很好地工作。

我的问题是 - 是否正确使用 EF 来处理本地数据，然后可能只是将整个上下文序列化/反序列化到文件中？或者这只是为了正常工作而付出的太多努力？我曾经以这种方式使用数据集，以及 Linq to Dataset，它运行良好......所以也许这些仍然是这种场景的更好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-15T12:55:03.863

是的，您可以将实体框架用作本地，还可以访问当前内存中的数据，请阅读以下链接的详细信息：

[http://msdn.microsoft.com/en-us/data/jj592872.aspx](http://msdn.microsoft.com/en-us/data/jj592872.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T17:59:03.650

我不知道您所说的“本地数据”到底是什么意思（听起来它不是数据库），但我认为您帖子的 Datasets vs. EF 部分是（对我而言）真正的问题。

当您需要对健壮的业务逻辑进行建模、正在实现域模型模式、使用域驱动设计等时，EF 非常有用：基本上任何不适合表模块或 Active Record 模式的场景。

当您只需要显示一些数据网格，并且业务逻辑非常简单时，Datasets 绝对是要走的路（以我的经验）。

# html - 网站可在 Google Chrome 中运行，但不能在 Internet Explorer 中运行

> ID：10864584
> 
> 赞同：-1
> 
> 时间：2012-06-02T17:47:12.150
> 
> 标签：html, security, firefox, google-chrome

我已经检查了几个地方的答案，但我找不到一个，所以我想我会问。我在一个免费的 HTML5 模板上创建了一个网站（该模板用于照片库）。该网站在 Google Chrome 和 Firefox 上运行良好，但出于某种原因，某些东西（如字体）不会出现在 Internet Explorer 中（尝试了在 IE9 上使用和不使用兼容性设置）。这可能是因为 IE 的安全措施还是我编码错误？

该网站位于[masidtech.com](http://www.masidtech.com)

在 Chrome 上看起来像

![http://masidtech.com/working.jpg](../Images/7982eac04d1454cabef7567ec05cbda2.png)

但在 Internet Explorer 上看起来像

![在此处输入图像描述](../Images/6a7fe98b78d09c61d56f2ae456a0b8fd.png)

我打算使用粘贴箱，但粘贴看起来真的很难看源代码。

所以我已经将整个网站上传到了[http://www.mediafire.com/?9m2108pgzyje79t](http://www.mediafire.com/?9m2108pgzyje79t)的 MediaFire， 它是一个 7Zip 文件（或者我猜你可以查看源代码）

+我不是编码大师，所以如果你能提供一些外行，我真的很感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:54:49.000

我最近也遇到过类似的问题。如果您提供某些详细信息，我可以帮助您。我刚刚检查了带有工作图像的链接。我还用 notworking.jpg 测试了链接

你能告诉我你在[http://masidtech.com/](http://masidtech.com/)之后看到 的非工作图像的浏览器中的确切 url。

这不是一个大问题，在场景中使用现代浏览器，并且由于其严格的安全策略，同一网站在不同浏览器中的行为不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:00:33.603

似乎 cufon 在 IE9 中不起作用 - 一位朋友本周遇到了类似的问题。我不确定为什么，或者是否有办法让 cufon 工作，因为我没有使用它。

有两个选项 - 继续使用 Cufon（为什么？我真的不明白为什么存在 Cufon！），并将其添加到您的第一个 replace() 调用之上：

```
<!--[if gte IE 9]>
    <script type="text/javascript">
        Cufon.set('engine', 'canvas');
    </script>
<![endif]--> 
```

或者，最好使用 font-face。如果您使用字体的 eot、ttf 和 woff 版本，它可以在任何地方使用。[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)有一个工具可以从 ttf 生成字体和代码，如果字体允许的话。

您可能会发现[http://www.google.com/webfonts](http://www.google.com/webfonts)具有所需的字体，这是 Google 托管字体的方式。

编辑：我看了看，发现谷歌有它：[http](http://www.google.com/webfonts/specimen/Quicksand) ://www.google.com/webfonts/specimen/Quicksand 。按照向导，将他们的一行代码粘贴到您的 中`<head>`，删除 cufon 即可。

顺便说一句，漂亮的网站设计:)

# c - C 指针不一致

> ID：10864586
> 
> 赞同：2
> 
> 时间：2012-06-02T17:47:17.910
> 
> 标签：c, pointers

我正在为 C 类编写一个程序，但我已经到了不知道该做什么的地步。我们正在实现一个字符串库类型。

我有我的头文件（MyString.h）

```
typedef struct {
    char *buffer;
    int length;
    int maxLength;
} String;

String *newString(const char *str); 
```

实现函数的文件 (MyString.c)

```
#include <stdlib.h>
#include <stdio.h>
#include "MyString.h"

String *newString(const char *str) {

// Allocate memory for the String
String *newStr = (String*)malloc(sizeof(String));

if (newStr == NULL) {
    printf("ERROR: Out of memory\n");
    return NULL;
}   

// Count the number of characters
int count;
for (count = 0; *(str + count) != '\0'; count++);
count++;

// Allocate memory for the buffer
newStr->buffer = (char*)malloc(count * sizeof(char));

if (newStr->buffer == NULL) {
    printf("ERROR: Out of memory\n");
    return NULL;
}

// Copy into the buffer
while (*str != '\0')
    *(newStr->buffer++) = *(str++);
*(++newStr->buffer) = '\0';

// Set the length and maximum length
newStr->length = count;
newStr->maxLength = count;

printf("newStr->buffer: %p\n",newStr->buffer); // For testing purposes

return newStr;
} 
```

和一个测试人员（main.c）

```
#include <stdio.h>
#include "MyString.h"

main() {
char str[] = "Test character array";

String *testString = newString(str);

printf("testString->buffer: %p\n",testString->buffer); // Testing only
} 
```

问题是，即使 testString 指向在 newString() 中创建的字符串，它们的缓冲区指向不同的内存地址。这是为什么？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T17:54:48.833

通过使用`*(++newStr->buffer)`and `*(newStr->buffer++)`，您`newStr->buffer`实际上将指向字符串的末尾。您需要这样修改代码：

```
#include <stdlib.h>
#include <stdio.h>
#include "MyString.h"

String *newString(const char *str) {
    // Allocate memory for the String
    String *newStr = (String*)malloc(sizeof(String));

    if (newStr == NULL) {
        printf("ERROR: Out of memory\n");
        return NULL;
    }

    // Count the number of characters
    int count;
    for (count = 0; *(str + count) != '\0'; count++);
    count++;

    // Allocate memory for the buffer
    newStr->buffer = (char*)malloc(count * sizeof(char));

    if (newStr->buffer == NULL) {
        printf("ERROR: Out of memory\n");
        return NULL;
    }

    char *pBuffer = newStr->buffer; // don't move newStr->buffer, have another pointer for that.

    // Copy into the buffer
    while (*str != '\0')
        *(pBuffer++) = *(str++);
    *pBuffer = '\0';

    // Set the length and maximum length
    newStr->length = count;
    newStr->maxLength = count;

    printf("newStr->buffer: %p\n", newStr->buffer); // For testing purposes

    return newStr;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T18:15:47.990

正如其他同事已经指出的那样，您修改了分配指针，这是不可以的。这是您的示例，但翻译为更“专业”的方式。

我会将您的结构更改为：

```
typedef struct {
   char *buffer;
   size_t length;        /* strings and allocation in C are of type size_t not int */
   size_t alloclength;
} String;

String *newString(const char *str); 
```

并且功能将更改为。

```
#include <stdlib.h>
#include <stdio.h>
#include "MyString.h"

String *newString(const char *str)
{
  // Allocate memory for the String
  String *newStr = malloc(sizeof (String));  /* No typecast of void * in C, it's bad taste. */

  if(!newStr) {
    fprintf(stderr, "ERROR: Out of memory\n");     /* Errors are meant to be printed on stderr, not stdio */
    return NULL;
  }   
  // Count the number of characters
  newStr->length = strlen(str);          /* Learn to use the stdlib, there are a lot of usefull functions */
  newStr->alloclength = newStr->length+1;
  // Allocate memory for the buffer
  newStr->buffer = malloc(newStr->alloclength);   /* sizeof (char) is by definition always 1 */
  if(!newStr->buffer) {
    fprintf(stderr, "ERROR: Out of memory\n");
    free(newStr);      
    return NULL;
  }
  // Copy into the buffer
  strcpy(newStr->buffer, str);   /* Because we already scaned the input with strlen, we can use safely the "unsafe" strcpy function. The strcpy will add the trailing 0 */
  printf("newStr->buffer: %p\n",newStr->buffer); // For testing purposes
  return newStr;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T17:56:47.943

您正在修改新创建的 String 结构内的缓冲区指针。

你应该做：

```
char *newBuffer = newStr->buffer;
// Copy into the buffer
while (*str != '\0')
    *(newBuffer++) = *(str++);
*(++newBuffer) = '\0'; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-20T16:04:00.750

问题已得到解答，但我认为您应该添加一段代码以避免内存泄漏的微妙来源：

```
// Allocate memory for the buffer
newStr->buffer = (char*)malloc(count * sizeof(char));

if (newStr->buffer == NULL) {
    printf("ERROR: Out of memory\n");
    free(newStr); // free the memory allocated for newStr
    return NULL;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-02T18:03:56.600

解释很简单：您正在修改`newString()`函数中的缓冲区指针：

```
// Copy into the buffer
while (*str != '\0')
    *(newStr->buffer++) = *(str++);
*(++newStr->buffer) = '\0'; 
```

您可以在此处使用临时指针（如其他答案中建议的那样），但我建议您使用以下提供的标准函数`string.h`：

```
// Count the number of characters
int count;
count = strlen(str) + 1;

// Copy into the buffer
memcpy(newString->buffer, str, count) 
```

# html - 如何使用百分比将内容 DIV 高度限制为其容器高度？

> ID：10864588
> 
> 赞同：4
> 
> 时间：2012-06-02T17:47:38.573
> 
> 标签：html, height, css

我有以下 HTML 结构部分（为简单起见省略了结束标签，缩进表示嵌套标签）：

```
...
- <div class="main-content-wrapper">
  - <div class="item-image-wrapper">
    - <img class="item-image fit">
  - <div class="item-text">
    - <h2 id="itemTitle">
    - <p id="itemContent"> 
```

使用以下 CSS

```
.itemdetailpage section[role=main] article .main-content-wrapper {
    display: -ms-grid;
    -ms-grid-rows: auto auto;
    width: 100%;
    height: 100%;
}

.itemdetailpage section[role=main] article .item-image-wrapper {
    -ms-grid-row: 1;
    width: 100%;
    height: 100%;
}

.itemdetailpage section[role=main] article .item-image {
    margin-top: 0px;
    margin-left: 0px;
}

.itemdetailpage section[role=main] article .item-image.fit {
    /* Fit image to page size */
    max-width: 100%; 
    max-height: 100%;
}

.itemdetailpage section[role=main] article .item-text {
    -ms-grid-row: 2;
    margin-right: 5px;
} 
```

目标是使 IMG 不比主要内容允许的高（也不宽），即，如果大于此，则适合主要内容空间，或者如果较小，则保持其原始大小。文本可以在图像下方流动，因此也可以在折叠下方，这没问题。这应该在没有 JS 代码的情况下发生，只有 CSS。

当项目文本比图像窄时，一切正常。图像包装器比图像高一些像素，不知道为什么，但看起来还可以。

我在这里看到的问题是同时：图像高于可用高度，并且项目文本比图像宽（特别是项目标题）。在这种情况下，图像包装器变得比其容器高，因此跟随图像。例如`.main-content-wrapper`，接收到 900 像素的（正确）高度，但高度为 1024 像素，`item-image-wrapper`图像高度为 1024 像素（其自然高度）。

我知道这个 100% DIV 高度一次又一次地出现，我一直在寻找答案，但我找不到适合这种情况的答案。

**编辑：**

我找到了这个[SitePoint 参考](http://reference.sitepoint.com/css/max-height)，它说“百分比值是指...的高度”的段落：有人知道这个规则吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T00:45:42.887

在某些情况下，您可以做的一件事是向每个中间元素添加`width: 100%`和`height: 100%`，如果图像占用了所有可用空间，则依赖于从其包含块延伸出来的文本。这并不适用于所有情况，因为很难在页面上获得任何其他内容来为扩展文本腾出空间，但是在一个不包含任何其他内容的 vanilla HTML 页面上它可以工作，并且有可能让它工作在在其他一些情况下，通过在文本内容的末尾放置一个浮动元素并在该文本内容之后需要出现的任何位置放置一个清除元素，如在这个 jsFiddle 中：http: [//jsfiddle.net/t6LvY/2/](http://jsfiddle.net/t6LvY/2/)

然而，随着设计复杂性的累积，这可能会很快变得令人讨厌。您最好使用一点 JavaScript 将图像的最大高度设置为窗口调整大小时的窗口高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T17:52:28.557

我认为您应该从图像类 max-width:100% 中删除 max-height 足以将该图像适合图像的父容器。我不知道这对你有没有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T20:51:14.830

我自己提出的（悲伤的）答案：如果我想保持 DIV 的百分比高度，并坚持纯 CSS（即没有 JS），那么目标就无法实现。

[W3C 规范](http://www.w3.org/TR/CSS21/visudet.html#min-max-heights)说，在这种情况下，百分比基本上被忽略（查找文本“百分比*是用...计算的*”）。并且[Internet Explorer 文档](http://msdn.microsoft.com/en-us/library/ie/ms530809%28v=vs.85%29.aspx)（我正在使用的浏览器）说的基本相同（查找文本“* 如果包含块的高度...*”）。

# ruby-on-rails - Ruby on Rails 两个模型之间的多对多关系

> ID：10864590
> 
> 赞同：3
> 
> 时间：2012-06-02T17:47:46.440
> 
> 标签：ruby-on-rails, ruby, database, migration

我有两个关系 m:n 类型，将 table`Users`与 table链接起来`Videos`。我通过这些行命令创建它：

```
rails generate migration users_comments_videos
rails generate migration users_views_videos 
```

在文件 user.rb 和 videos.rb 中，我分别添加了说明：

```
has_and_belongs_to_many :users
has_and_belongs_to_many :videos 
```

这两个指令对我创建的两个关系都有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:37:59.637

选择不同的关联名称，然后指定模型。

用户.rb

```
class User
  has_many :comments
  has_many :views
  has_many :comment_videos, :through => :comments, :source => 'Video'
  has_many :view_videos, :through => :views, :source => 'Video'
end 
```

视频.rb

```
class Video
  has_many :comments
  has_many :views
  has_many :comment_users, :through => :comments, :source => 'User'
  has_many :view_users, :through => :views, :source => 'User'
end 
```

# c - C语言中Realloc的实现

> ID：10864593
> 
> 赞同：3
> 
> 时间：2012-06-02T17:48:07.020
> 
> 标签：c, malloc, free, realloc

```
int getmin(int a, int b)
{
    return a<b?a:b;
}

void *reallocation(void *ptr, size_t size) //size_t in bytes
{

    void *newptr;

    int msize;
    msize = getsize(ptr);

    msize = getmin(msize, size);

        printf("msize = %d", msize);

    newptr = malloc(size);
    newptr = memcpy(newptr, ptr, msize);
    free(ptr);

    return newptr;

} 
```

我已经实现了自己的 realloc，并且为了使用 malloc 获取分配内存的大小（但是我知道在 c 中没有任何方法）。

我的重新分配功能在我的系统上运行良好我们如何获得 malloc() 分配的内存大小。

如果先前分配的内存大小大于新的要求，我们是否可以就地重新分配？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-02T18:46:08.453

没有可移植的方法来获取 malloc() 分配的内存大小。

但是，人们总是可以做类似的事情来模拟你想要的。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void myfree(void * p) {
    size_t * in = p;
    if (in) {
        --in; free(in);
    }
}

void * mymalloc(size_t n) {
    size_t * result = malloc(n + sizeof(size_t));
    if (result) { *result = n; ++result; memset(result,0,n); }
    return result;
}

size_t getsize(void * p) {
    size_t * in = p;
    if (in) { --in; return *in; }
    return -1;
}

#define malloc(_x) mymalloc((_x))
#define free(_x) myfree((_x))

void *reallocation(void *ptr,size_t size) {
    void *newptr;
    int msize;
    msize = getsize(ptr);
    printf("msize=%d\n", msize);
    if (size <= msize)
        return ptr;
    newptr = malloc(size);
    memcpy(newptr, ptr, msize);
    free(ptr);
    return newptr;
}
int main() {
    char * aa = malloc(50);
    char * bb ;
    printf("aa size is %d\n",getsize(aa));
    strcpy(aa,"my cookie");
    bb = reallocation(aa,100);
    printf("bb size is %d\n",getsize(bb));
    printf("<%s>\n",bb);
    free(bb);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T17:55:20.507

`malloc`不会将内存初始化为零。（`calloc`是等价的。）如果您看到设置为零，那是偶然的。

我相信库版本`realloc`使用堆中不直接可用的长度信息。（而且它可能会高估原始分配，这意味着它在使用扩展分配时可能会复制一点额外的内存`realloc`。这通常没有效果。）

`realloc`缩小分配时可能不会进行复制。

另外，我应该注意，在相同的情况下，即使增加大小，您也不必进行复制`realloc`，例如，如果堆中的下一个块是空闲的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T17:55:49.473

> malloc 分配的内存被初始化为零，所以我正在检查这种情况。

这是不正确的。从草案中：

> **描述**
> 
> **2** malloc 函数为大小由大小指定且值不确定的对象分配空间。

你的`getsize`需要得到解决。

> 我的重新分配功能运行良好。

您甚至没有修复对齐 - 对于某些类型它可能会失败。阅读[这个](https://stackoverflow.com/questions/227897/solve-the-memory-alignment-in-c-interview-question-that-stumped-me)SO 问题。

> 如果先前分配的内存大小大于新的要求，我们是否可以就地重新分配？

*就地重新分配*意味着什么？这不应该是一个简单的无操作吗？

# windows - 有什么方法可以铸造一个句柄？

> ID：10864594
> 
> 赞同：0
> 
> 时间：2012-06-02T17:48:08.663
> 
> 标签：windows, delphi, casting, handle

再会，

我有来自不同非 VLC 对象（如（SysListView32、ToolbarWin32）的不同句柄，我想知道是否有任何方法可以转换这些句柄（HWND）。

例如，我得到了开始按钮（位于桌面左下角）句柄。然后我找到了类名“Button”。

我想投射他并从他那里检索标题属性“开始”。例如：

```
type 
  TButtonStartMenuFictiveClass = class(TButton)
  public
    Text: string;
  end;

if classname = 'button' then
begin
  ShowMessage((objecthandle as TButtonStartMenuFictiveClass).Text);
end; 
```

我正在寻找挂钩所有对象并显示它们的文本。就像 Windows 中的叙述者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T22:45:40.327

在某些情况下，您可以实例化一个 VCL 对象并将外部分配`HWND`给它的`WindowHandle`属性，例如：

```
var
  S: String;

with TButton.Create(nil) do
try
  WindowHandle := TheButtonWnd;
  try
    S := Caption;
  finally
    WindowHandle := 0; // important
  end;
finally
  Free;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T19:32:31.567

正如我在[上一个问题](https://stackoverflow.com/questions/10862817/get-focus-control-from-all-window-forms-using-delphi)中解释的那样，您需要使用 Windows API 来访问外部窗口控件的属性。您不能简单地将窗口句柄转换为对象。它们不是指向 Delphi 对象的指针。

我链接的示例不仅显示了您悬停的控件的类名，还显示了控件的标题（文本）。这个函数也可以解决问题：

```
function GetWndText(const Handle: Hwnd): string;
var
  Len: Integer;
begin
  Len := GetWindowTextLength(Handle) + 1;
  SetLength(Result, Len);
  GetWindowText(Handle, PChar(Result), Len);
end; 
```

# .net - 不编码插件时获取当前的 EnvDTE 或 IServiceProvider

> ID：10864595
> 
> 赞同：11
> 
> 时间：2012-06-02T17:48:30.447
> 
> 标签：.net, visual-studio-2010, visual-studio, envdte, visual-studio-extensions

我正在编写一些设计时代码。我想使用这个片段：（[在这里](http://social.msdn.microsoft.com/Forums/br/netfxbcl/thread/7548f267-2b73-4996-a9c5-eaa707037add)找到）

```
var dte = (EnvDTE.DTE) GetService(typeof(EnvDTE.DTE));
if (dte != null)
{
    var solution = dte.Solution;
    if (solution != null)
    {
        string baseDir = Path.GetDirectoryName(solution.FullName);
    }
} 
```

问题是这不能编译。（GetService 不是已知的方法调用）我尝试添加 Microsoft.VisualStudio.Shell（和 Microsoft.VisualStudio.Shell.10.0），但没有帮助。

在互联网上环顾四周，我发现您需要一个 IServiceProvider 来调用它。

但是所有展示如何获取 IServiceProvider 的示例都使用 EnvDTE。

因此，要获得当前的 EnvDTE，我需要 IServiceProvider。但要获得 IServiceProvider，我需要一个 EnvDTE。（我的桶里有个洞……）

所以，这是我的问题：

**在普通的 WPF 应用程序中，如何获取EnvDTE的*当前实例？***

注意：我不是在寻找任何旧的 EnvDTE 实例。我需要一个用于我当前的 Visual Studio 实例（我一次运行 3-4 个 Visual Studio 实例。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T14:24:03.903

这个问题有你正在寻找的答案。

[在 Visual C# 2010 中获取 DTE2 对象的引用](https://stackoverflow.com/questions/4724381/get-the-reference-of-the-dte2-object-in-visual-c-sharp-2010)

具体来说

[https://stackoverflow.com/a/4724924/858142](https://stackoverflow.com/a/4724924/858142)

***这是代码：***

用途：

```
using System;
using System.Runtime.InteropServices;
using System.Runtime.InteropServices.ComTypes;
using EnvDTE;
using Process = System.Diagnostics.Process; 
```

方法：

```
[DllImport("ole32.dll")]
private static extern void CreateBindCtx(int reserved, out IBindCtx ppbc);
[DllImport("ole32.dll")]
private static extern void GetRunningObjectTable(int reserved,
                                                 out IRunningObjectTable prot);
internal static DTE GetCurrent()
{
   //rot entry for visual studio running under current process.
   string rotEntry = String.Format("!VisualStudio.DTE.10.0:{0}",
                                    Process.GetCurrentProcess().Id);
   IRunningObjectTable rot;
   GetRunningObjectTable(0, out rot);
   IEnumMoniker enumMoniker;
   rot.EnumRunning(out enumMoniker);
   enumMoniker.Reset();
   IntPtr fetched = IntPtr.Zero;
   IMoniker[] moniker = new IMoniker[1];
   while (enumMoniker.Next(1, moniker, fetched) == 0)
   {
       IBindCtx bindCtx;
       CreateBindCtx(0, out bindCtx);
       string displayName;
       moniker[0].GetDisplayName(bindCtx, null, out displayName);
       if (displayName == rotEntry)
       {
           object comObject;
           rot.GetObject(moniker[0], out comObject);
           return (DTE)comObject;
       }
   }
   return null;
} 
```

正如另一个答案所示，这在调试时不起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T06:38:53.590

您需要一个[IServiceProvider](http://msdn.microsoft.com/en-us/library/system.iserviceprovider.aspx)，然后您可以调用它的 GetService 方法。
`dte = (DTE)serviceProvider.GetService(typeof(DTE));`

**所以问题是如何获得对`IServiceProvider`接口的引用。**

例如，如果您使用工具窗口（从[ToolWindowPane](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.toolwindowpane.aspx)继承）创建[VsPackage](http://msdn.microsoft.com/en-us/library/bb166424%28v=vs.100%29.aspx)，则 ToolWindow 类本身[实现 IServiceProvider](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.windowpane.aspx)。在这种情况下，当您想在 WPF 控件中使用 IServiceProvider 时，您可以在工具窗口构造函数上创建它的实例，并简单地将其作为参数传递给控件的构造函数。`this`

```
[Guid("f716c629-b8e3-4ab2-8dbd-8edd67165609")]
public class MyToolWindow : ToolWindowPane
{
    /// <summary>
    /// Standard constructor for the tool window.
    /// </summary>
    public MyToolWindow() :
        base(null)
    {
        ...
        // This is the user control hosted by the tool window
        base.Content = new MyControl(this);
    } 
```

您的控件的构造函数`IServiceProvider`作为参数获取：

```
public MyControl(IServiceProvider _serviceProvider) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T22:36:40.257

我们使用以下代码成功完成了此操作：

```
System.Runtime.InteropServices.Marshal.GetActiveObject("VisualStudio.DTE.10.0") 
```

虽然它并不完美——它需要运行 1 个 Visual Studio 实例（如果有多个，该方法将返回其中一个，但您无法控制哪一个）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T16:22:00.603

我已经发布了关于这个类似问题[的答案：](https://stackoverflow.com/a/13034842/385995) [Get the reference of the DTE2 object in Visual C# 2010](https://stackoverflow.com/questions/4724381/get-the-reference-of-the-dte2-object-in-visual-c-sharp-2010)。

我的方法是将 DTE2.Solution.FullName 与执行的程序集路径进行比较，这样可以在使用与 Quickhorns 答案中相同的 ROT 枚举来过滤可能的候选者之后找到正确的 Visual Studio 实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-02T21:13:12.397

对于有兴趣使用 F# 执行此操作的任何人，这里有一个几乎完整的转换（当前设置为在 linqpad 中运行）：

```
open System;
open System.Runtime.InteropServices;
open System.Runtime.InteropServices.ComTypes;
open EnvDTE;
open System.Diagnostics;
//http://stackoverflow.com/questions/10864595/getting-the-current-envdte-or-iserviceprovider-when-not-coding-an-addin

//http://stackoverflow.com/questions/6558789/how-to-convert-out-ref-extern-parameters-to-f
//http://stackoverflow.com/questions/1689460/f-syntax-for-p-invoke-signature-using-marshalas

[<System.Runtime.InteropServices.DllImport("ole32.dll")>] 
extern int CreateBindCtx(System.IntPtr inRef, IBindCtx& outParentRef);
[<System.Runtime.InteropServices.DllImport("ole32.dll")>]
extern int GetRunningObjectTable(System.IntPtr inRef, IRunningObjectTable& outParentRef);
//let dte = System.Runtime.InteropServices.Marshal.GetActiveObject("VisualStudio.DTE.12.0") :?> EnvDTE80.DTE2
let comName="VisualStudio.DTE.12.0"
let rotEntry = "!"+comName
//let mutable rot:IRunningObjectTable =null

let rot=
    let mutable result:IRunningObjectTable = null
    GetRunningObjectTable(nativeint 0, &result) |> ignore
    result

let mutable enumMoniker:IEnumMoniker = null
rot.EnumRunning (&enumMoniker) 
enumMoniker.Reset() |> ignore
let mutable fetched = IntPtr.Zero
let mutable moniker:IMoniker[] = Array.zeroCreate 1 //http://msdn.microsoft.com/en-us/library/dd233214.aspx

let matches = seq {
    while enumMoniker.Next(1, moniker, fetched) = 0 do
        "looping" |> Dump
        let mutable bindCtx:IBindCtx = null
        CreateBindCtx(nativeint 0, &bindCtx) |> ignore
        let mutable displayName:string = null
        moniker.[0].GetDisplayName(bindCtx,null, &displayName)
        displayName |> Dump
        if displayName.StartsWith(rotEntry) then
            let mutable comObject = null
            rot.GetObject(moniker.[0], &comObject) |> ignore
            let dte =  comObject:?>EnvDTE80.DTE2
            yield displayName,bindCtx,comObject,dte.FullName, dte
}
matches |> Dump 
```

# xml - 是否可以从 xml 文件生成类？

> ID：10864601
> 
> 赞同：1
> 
> 时间：2012-06-02T17:49:09.813
> 
> 标签：xml, c#-4.0, linq-to-xml

我通常首先通过构建和 xsd 文件来自动生成类。是否可以给定一个 xml 文件，让它为您生成 poco 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:52:14.043

这是可能的 - XSD 将是近似的（它将符合您提供工具的文档，这可能是也可能不是您正在寻找的文件）。

[`xsd.exe`](http://msdn.microsoft.com/en-us/library/x6c1kb0s.aspx)有这个功能。

从几种操作模式：

> XML 到 XSD：从 XML 文件生成 XML 模式。

和：

> XSD 到类：从 XSD 模式文件生成运行时类。生成的类可以与 System.Xml.Serialization.XmlSerializer 结合使用，以读取和写入遵循架构的 XML 代码。

这为您提供了一种从 XML 文件中自动获取类的方法。

# visual-c++ - 如何使用霍夫变换将行存储保存在矩阵中？

> ID：10864602
> 
> 赞同：0
> 
> 时间：2012-06-02T17:49:23.067
> 
> 标签：visual-c++, opencv, feature-detection

我想使用概率霍夫变换保存检测到的线。使用 houghlines2 命令有一个名为 line_storage 的参数。line_storage 是该函数存储其结果的地方。这可以是 CvMemoryStorage 结构或具有 N 行的矩阵。在概率霍夫变换模式下，矩阵必须是 N 行 x 1 列和 4 个通道 (CV_32FC4)。它存储线段的两个端点（ (x,y) 两次）。

我试图将此矩阵保存在 xml 文件中。但在 project_test.exe 中的 0x75db9617 处出现未处理的异常：Microsoft C++ 异常：cv::Exception at memory location 0x001bf0a0 ..我用来保存矩阵的代码,如下图所示。你能解释一下我做错了什么吗？谁能告诉我如何将此矩阵保存在 xml 文件中。

```
#include "stdafx.h"
#include"cv.h"
#include"highgui\highgui.hpp"
#include<math.h>
#include"cxcore.h"

int main()
 {
IplImage* source=cvLoadImage("image581.jpg");
CvSize imgsize=cvGetSize(source);

IplImage *detected=cvCreateImage(imgsize,8,1);
IplImage* imgBlue=cvCreateImage(imgsize,8,1);
IplImage* imgRed=cvCreateImage(imgsize,8,1);
IplImage* imgGreen=cvCreateImage(imgsize,8,1);

cvSplit(source,imgBlue,imgGreen,imgRed,NULL);

cvAnd(imgBlue,imgGreen,detected);
cvAnd(detected,imgRed,detected);

cvErode(detected,detected);
cvDilate(detected,detected);

cvThreshold(detected,detected,100,250,CV_THRESH_BINARY_INV);

CvMat* lines=cvCreateMat(50,1,CV_32FC4);
cvHoughLines2(detected,lines,CV_HOUGH_PROBABILISTIC,1,CV_PI/180,100,80,5);

cvNamedWindow("Source");
cvNamedWindow("Red");
cvNamedWindow("Final");

    cvShowImage("Source",source);
    cvShowImage("Red",imgRed);
    cvShowImage("Final",detected);

    cvWaitKey(0);

    cvSave("Result-line.xml",lines);

    cvDestroyWindow("Source");
    cvDestroyWindow("Red");
    cvDestroyWindow("Final");
    cvReleaseMat(&lines);

    return 0; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:52:50.223

它在抛出异常

```
cvHoughLines2(detected,lines,CV_HOUGH_PROBABILISTIC,1,CV_PI/180,100,80,5); 
```

因为“目标矩阵数据类型不合适”。因为您为 CV_32FC4 而不是 CV_32SC4 创建了矩阵。请参阅以下 opencv 文档链接。

[http://opencv.willowgarage.com/documentation/feature_detection.html](http://opencv.willowgarage.com/documentation/feature_detection.html)

# android - 如何下载 Android dungeons 应用内计费示例？

> ID：10864610
> 
> 赞同：0
> 
> 时间：2012-06-02T17:50:29.230
> 
> 标签：android, in-app-billing

我正在阅读有关应用内计费的 Android 页面，他们在这里讨论了一个示例程序：

[http://developer.android.com/guide/market/billing/billing_integrate.html#billing-download](http://developer.android.com/guide/market/billing/billing_integrate.html#billing-download)

但我不知道如何下载它。他们有许多下载链接，所有链接都位于下载部分的顶部。

知道如何实际下载该示例应用程序吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T17:57:44.763

**编辑：**

正如 nmr 在他的评论中指出的那样，该示例的当前（新）文件夹是：

**< sdk >/extra/play_billing/market_billing_r02.zip**

仔细阅读：

> 应用内计费示例应用程序作为 Android SDK 的可下载组件提供。要下载示例应用程序组件，请启动 Android SDK Manager，然后选择 Google Market Billing 包组件（参见图 1），然后单击 Install Selected 开始下载。

所以使用`Android SDK Manager`下载它（查看列表底部（`Extras`文件夹））。安装该软件包后，您可以在以下位置找到示例项目：

```
<sdk>/extras/google/market_billing/ 
```

<sdk> 是您安装`android SDK`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T17:58:12.430

应用内计费示例应用程序作为 Android SDK 的可下载组件提供。要下载示例应用程序组件，请启动 Android SDK Manager，然后选择 Google Market Billing 包组件（参见图 1），然后单击 Install Selected 开始下载。 ![在此处输入图像描述](../Images/a5c8d3249be15d257c6ae10fa2489c04.png)

下载完成后，Android SDK Manager 将组件保存到以下目录：

```
<sdk>/extras/google/market_billing/ 
```

# c# - 如何判断一个类型是否是一个集合类型？

> ID：10864611
> 
> 赞同：49
> 
> 时间：2012-06-02T17:50:33.513
> 
> 标签：c#, collections, types, refactoring

我正在尝试确定运行时类型是否是某种集合类型。我在下面的工作，但我必须像我所做的那样在数组中命名我认为是集合类型的类型似乎很奇怪。

在下面的代码中，通用逻辑的原因是，在我的应用程序中，我希望所有集合都是通用的。

```
bool IsCollectionType(Type type)
{
    if (!type.GetGenericArguments().Any())
        return false;

    Type genericTypeDefinition = type.GetGenericTypeDefinition();
    var collectionTypes = new[] { typeof(IEnumerable<>), typeof(ICollection<>), typeof(IList<>), typeof(List<>) };
    return collectionTypes.Any(x => x.IsAssignableFrom(genericTypeDefinition));
} 
```

我将如何重构此代码以使其更智能或更简单？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-06-02T17:53:14.093

真的所有这些类型都继承了[`IEnumerable`](http://msdn.microsoft.com/library/system.collections.ienumerable.aspx). 您只能检查它：

```
bool IsEnumerableType(Type type)
{
    return (type.GetInterface(nameof(IEnumerable)) != null);
} 
```

或者如果你真的需要检查 ICollection：

```
bool IsCollectionType(Type type)
{
    return (type.GetInterface(nameof(ICollection)) != null);
} 
```

查看“语法”部分：

*   [`List<T>`](http://msdn.microsoft.com/library/6sh2ey19.aspx)

*   [`IList`](http://msdn.microsoft.com/library/system.collections.ilist.aspx)

*   [`ICollection`](http://msdn.microsoft.com/library/system.collections.icollection.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T17:54:51.140

你可以使用这个帮助方法来检查一个类型是否实现了一个开放的泛型接口。在您的情况下，您可以使用`DoesTypeSupportInterface(type, typeof(Collection<>))`

```
public static bool DoesTypeSupportInterface(Type type,Type inter)
{
    if(inter.IsAssignableFrom(type))
        return true;
    if(type.GetInterfaces().Any(i=>i. IsGenericType && i.GetGenericTypeDefinition()==inter))
        return true;
    return false;
} 
```

或者您可以简单地检查非通用`IEnumerable`. 所有集合接口都继承自它。但我不会调用任何实现`IEnumerable`集合的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-25T19:18:19.587

您可以使用 linq，搜索接口名称，例如

```
yourobject.GetType().GetInterfaces().Where(s => s.Name == "IEnumerable") 
```

如果 this 有值是`IEnumerable`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-18T08:27:35.493

该解决方案将处理`ICollection`和`ICollection<T>`。

```
 static bool IsCollectionType(Type type)
    {
        return type.GetInterfaces().Any(s => s.Namespace == "System.Collections.Generic" && (s.Name == "ICollection" || s.Name.StartsWith("ICollection`")));
    } 
```

# tomcat - 使用 JMX MBean 检索部署在 Tomcat 上的 webapps 的名称

> ID：10864616
> 
> 赞同：1
> 
> 时间：2012-06-02T17:51:37.950
> 
> 标签：tomcat, jmx, mbeans

是否可以使用暴露的 mbean 确定所有 webapps 都部署在 tomcat 服务器上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:31:08.030

对于 Tomcat 7.0.x（你没有说你使用的是哪个版本）。这样的事情应该可以解决问题：

```
MBeanServer mbeanServer = ManagementFactory.getPlatformMBeanServer();

ObjectName on = new ObjectName("Catalina:j2eeType=WebModule,name=//*/*,J2EEApplication=*,J2EEServer=*");

Set<ObjectName> results = mbeanServer.queryNames(on, null); 
```

# permalinks - 如何根据输入的文本创建永久链接（使用 PHP 代码）

> ID：10864618
> 
> 赞同：0
> 
> 时间：2012-06-02T17:51:58.267
> 
> 标签：permalinks

我的代码是这样的

```
<script> 
function doDashes2(str) {
    return str.replace(/[^a-z0-9]+/gi, '-').replace(/^-*|-*$/g, '').toLowerCase();
}
str="this permalink! __is_ created, using javascript (jQuery)";
alert(doDashes2(str));

</script> 
```

输出为“this-permalink-is-created-using-javascript-jquery”

任何人都可以建议，如何使用 PHP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:32:31.327

用这个。

```
function sterilize($title)
{
    $result = strtolower($title);
    // strip all non word chars
    $result = preg_replace('/\W/', ' ', $result);
    // replace all white space sections with a dash
    $result = preg_replace('/\ +/', '-', $result);
    // trim dashes
    $result = preg_replace('/\-$/', '', $result);
    $result = preg_replace('/^\-/', '', $result);

    return $result;
} 
```

# android - 具有 4 列的 Android 网格视图

> ID：10864622
> 
> 赞同：0
> 
> 时间：2012-06-02T17:52:23.283
> 
> 标签：android, gridview

我必须制作一个类似于 .NET gridview、4 列的 UI。

1.  产品名称（文本视图）
2.  product_quantity（微调器）
3.  价格（文本视图）
4.  删除按钮（按钮，删除行）

所以，我的问题是，执行上述 UI 的最佳方式/控制 Android sdk 是什么。由于我是 Android 新手，所以我认为 Gridview 很好。

已经遵循[http://www.mkyong.com/android/android-gridview-example/](http://www.mkyong.com/android/android-gridview-example/)但是当我尝试使用 4 列和微调器时，只显示文本。如何在 gridview 中显示小微调器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:56:17.890

ListView 最适合您的情况，因为您的数据是重复的，并且包含多个难以在 gridview 中查看的属性。请参阅本教程：[http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# javascript - JQuery - 图像的悬停事件在另一个图像后面

> ID：10864625
> 
> 赞同：2
> 
> 时间：2012-06-02T17:52:47.283
> 
> 标签：javascript, jquery, html, hover, mouseover

如何将悬停在另一个元素后面？（在这种情况下，我有两张图片）我搜索了很多，发现有些人有同样的问题，但他们得到的解决方案只是做他们想做的其他方式，而不是真正实现的方式这个“背景悬停”。谢谢编辑：非常感谢，我尝试了指针事件：无；正如你所说，它可以工作，但不能在 IE 中，这是一个主要问题。我想我必须通过以另一种方式构建解决方案来解决这个问题：

我在一个由许多小方形图像（必须是图像）构建的网格上工作。我用光标在它的顶部移动另一个图像，它的大小为 4 个正方形，代表网格的 4 个元素的选择器。图像必须在网格元素上移动，所以这不是简单的光标图像。

目前，我在网格元素上使用了诸如悬停/鼠标输入之类的东西，这会导致选择器移动到网格的元素位置。但是当它移动时，顶部的图像是选择器而不是网格，所以悬停不再起作用，只有当我将鼠标移出选择器时才会起作用。

希望你能理解^^

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T17:57:18.117

将`pointer-events: none`CSS 添加到顶部元素。

## [看演示](http://jsfiddle.net/HA4PK/)

# javascript - 获取并存储所有属性和值，然后将它们重新应用回同一元素

> ID：10864632
> 
> 赞同：0
> 
> 时间：2012-06-02T17:53:19.300
> 
> 标签：javascript, jquery, image, jquery-plugins

我正在开发一个插件，为了跨浏览器工作，需要在其附加的图像加载后运行。

我可以使用**new Image()**然后**等待它加载**然后附加它等等。

但这意味着**重新设置所有**似乎不可行的属性，因为某些插件选项可以存储在数据属性中，这使得很难跟踪它们。

如果有更好的方法请分享:)

我基本上只需要在加载附加的图像后实例化我的插件:)

请不要建议

`$('img').load(function(){//do something});`

因为它不能始终如一地工作。:)

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:03:09.720

您可以在 $(window).load() 而不是 $(document).ready() 上初始化插件，这将在页面上的所有内容加载后运行插件。

像这样：

```
$(window).load(function(){
    // Initialize Plugin
}); 
```

唯一需要注意的是，这只有在插件使用的所有图像都已经在 DOM 中时才有效。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:09:52.043

如果您尝试在浏览器或会话之间保存状态，我认为现在使用 javascript 是不可能的；但是，它很快就会到来。

我可能错了，但我相信您将不得不将数据打包并解压缩到本地存储中。

尝试使用 localStorage.setItem('key', 'value');

你可以使用准备好的文件吗？

将您的插件包装在为 jQuery 准备的文档中。

```
$(function () {

            //wrapp plugin

}) 
```

# ios - 无法将试用版应用程序上传到 iPhone 进行测试

> ID：10864639
> 
> 赞同：0
> 
> 时间：2012-06-02T17:54:37.267
> 
> 标签：ios, iphone, xcode, version, development-environment

我猜我的 iPhone 版本太新，所以我的应用程序不会上传到我的手机？这是我看到的屏幕： ![xcode 组织者视图](../Images/273ed07f437220cc41f7804aacca27df.png)

我想在我的手机上测试我的应用程序，但我不知道如何更改版本，如果我确实更改了版本，它是否会搞砸我现在手机上的所有内容。我很确定我的配置文件和所有内容都井井有条，似乎只是该版本正在阻止我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T17:57:05.380

**您需要将 Xcode 升级到最新版本（4.3.2），并在 Xcode 中下载 iOS 5.1 库。这样，Xcode 就会将 iOS 5.1 识别为实际系统。** 此版本的 Xcode 在 iOS 5.1 之前发布。

与往常一样，通过 Mac App Store 更新 Xcode。

# javascript - 在 jquery 中创建确认对话框

> ID：10864645
> 
> 赞同：3
> 
> 时间：2012-06-02T17:55:12.930
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

```
$("#first").dialog({ width: 304, modal: true,

  beforeclose: function (e, ui) 
  {
        $("#confirm").dialog({ width: 500, modal: true,
            buttons: {
                "Confirm": function () {
                    document.location.href = "/Home/Index";
                },
                "Cancel": function () {
                    $(this).dialog('close');
                    return false;
                }
            }
        });
    }
}); 
```

对话框`#first`关闭，无需等待`#confirm`对话框打开。我知道`confirm()`javascript 的功能，但我想在这种情况下使用对话框。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T18:13:56.353

来自[精美手册](http://api.jqueryui.com/dialog/#event-beforeClose)：

> **beforeClose（事件，用户界面）**
> 
> 当对话框即将关闭时触发。如果取消，对话框将不会关闭。

因此，您希望您的`beforeClose`处理程序`return false`阻止对话框关闭：

```
beforeClose: function(e, ui) {
    $("#confirm").dialog({ width: 500, modal: true, /* ... */ });
    return false;
} 
```

您的*确认*按钮会更改位置，因此您不必担心您的`beforeClose`处理程序会阻止第二个对话框关闭第一个对话框。如果您没有更改页面位置，那么您需要某种标志来`beforeClose`防止阻止所有关闭；例如这样的事情：

```
beforeclose: function(e, ui) {
     var $dlg = $(this);
     if($dlg.data('can-close')) {
         $dlg.removeData('can-close');
         return true;
     }
     $("#confirm").dialog({
         //...
         buttons: {
             Confirm: function() {
                 $(this).dialog('close');
                 $dlg.data('can-close', true);
                 $dlg.dialog('close');
             },
             Cancel: function() {
                 $(this).dialog('close');
             }
         }
     });
     return false;
 } 
```

演示：http: [//jsfiddle.net/ambiguous/jYZpD/](http://jsfiddle.net/ambiguous/jYZpD/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T18:11:07.777

我将回答我自己的问题，这很好用：

```
$("#first").dialog({ width: 304, modal: true,

  beforeclose: function (e, ui) 
  {
        $("#confirm").dialog({ width: 500, modal: true,
            buttons: {
                "Confirm": function () {
                    document.location.href = "/Home/Index";
                },
                "Cancel": function () {
                    $(this).dialog('close');
                }
            }
        });
      return false;
    }
}); 
```

# r - 有没有办法知道 R 脚本是直接运行还是在另一个脚本中运行？

> ID：10864647
> 
> 赞同：11
> 
> 时间：2012-06-02T17:55:23.470
> 
> 标签：r

我正在使用 R 工作室。

有没有办法知道 R 脚本是通过控制台中的源命令直接运行还是在另一个脚本中运行。IE。另一个脚本是源代码，它调用了第一个脚本。

在某些情况下，这对于提示某些值很有用。

我现在正在做的是将变量设置为 true 或 false，并在脚本中检查该变量。这可行，但自动方式更好。

谢谢你的时间。

# 编辑：更多信息

假设我有一个运行良好的独立脚本，但该脚本是在另一个脚本完成后运行的进程的一部分。如果我必须同时运行，我可以运行第一个，然后运行第二个；但我也有机会参加第二场比赛。

我要问的是是否有办法（在第二个脚本中）验证第二个是否是从第一个调用的。

看看他的简单例子（灵感来自[Greg Snow](https://stackoverflow.com/a/10865382/5861244)的回答）。首先是我在 Rstudio 中调用的文件

```
# scripta.R
writeLines("script A")
if (interactive()) writeLines("interactive: true") else writeLines("interactive false")
source("scriptb.r")
writelines("after B") 
```

然后是源文件

```
# scriptb.R
writeLines("script B")
if (interactive()) writeLines("interactive: true") else writeLines("interactive false")
writeLines("end B") 
```

Rstudio 中的结果是

```
script A
interactive: true
script B
interactive: true
end B
after B 
```

我喜欢有类似的东西

```
script A
interactive: true
script B
interactive: false
end B
after B 
```

我希望现在更清楚。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T19:41:38.047

不是您问题的直接答案，但相关的是查看`interactive`功能。`TRUE`如果 R 认为您处于交互式会话中并且可以合理地假设有人可以回答问题，则此函数将返回，`FALSE`如果在 BATCH 模式下运行并且相当确定没有人（或外星人，智能动物等）来回答问题。

不完全是您的要求，但它可能有助于决定是否提示您提供信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T19:30:41.467

如果我理解正确，一个简单的`message()`命令应该做（我认为）你需要的。由于您正在根据逻辑检查调用多个脚本之一，因此在每个脚本的开头都会回显一条消息，例如：

`message("R has now entered script_1.R \n")`

应该这样做。如果由于某些变量设置为而从未调用脚本`FALSE`，那么您将永远不会看到此消息。

如果您需要提示并从控制台读取值，则插入如下行：

`new_input <- readline("Enter a value for x: ")`

也会对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-12T09:43:17.483

这可能会做到。首先你运行的脚本

```
# script-A.R
cat("script A\n")
if (interactive()) 
  cat("interactive: true\n") else cat("interactive: false\n")

source_func <- function(file){
  # check that the variable does not exist already
  pa <- .GlobalEnv
  has_old <- if(exists("is_sourced", where = pa))
    stop(sQuote("is_sourced"), " exists already")
  pa$is_sourced <- TRUE
  # make sure to remove the variable again
  on.exit(rm(is_sourced, envir = pa)) 
  source(
    file, 
    # .GlobalEnv is used anyway but now it is easy to change to another environment
    local = pa) 

  invisible()
}

source_func("script-B.R")
cat("after B\n") 
```

然后你来源的脚本

```
# script-B.R
if(!exists("is_sourced"))
  if(!interactive())
    # throw an error if interactive and `is_sourced` is not set
    is_sourced <- FALSE else stop("Set ", sQuote("is_sourced"))

if (interactive() && !is_sourced) 
  cat("interactive: true\n") else cat("interactive: false\n")
cat("end B\n") 
```

运行的结果`script-A.R`是

```
script A
interactive: true
script B
interactive: false
end B
after B 
```

# java - 比较Java中的两个csv文件

> ID：10864654
> 
> 赞同：10
> 
> 时间：2012-06-02T17:56:40.173
> 
> 标签：java, csv

我们需要比较两个 CSV 文件。假设文件一有几行，第二个文件可以有相同的行数或更多。大多数行在两个文件上都可以保持相同。寻找在这两个文件之间进行差异的最佳方法，并仅读取第二个文件与第一个文件有差异的那些行。处理该文件的应用程序使用 Java。

什么是最好的方法？

注意：如果我们能知道在第二个文件中更新、插入或删除了一行，那就太好了。

要求：-

1.  不会有任何重复记录
2.  文件 1 和文件 2 的记录数可能相同，文件 2 中有几行更新值（记录已更新）
3.  文件 2 可能删除了几行（这被视为已删除记录）
4.  文件 2 可能添加了一些新行（这被视为插入记录）
5.  列中的一个可以被视为记录的主键，这在两个文件中都不会改变。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-02T18:00:53.990

一种方法是使用 java 的[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)接口；将每一行读取为一个字符串，将其添加到集合中，然后[`removeAll()`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#removeAll%28java.util.Collection%29)在第一组上对第二组执行 a ，从而保留不同的行。当然，这假设文件中没有重复的行。

```
// using FileUtils to read in the files.
HashSet<String> f1 = new HashSet<String>(FileUtils.readLines("file1.csv"));
HashSet<String> f2 = new HashSet<String>(FileUtils.readLines("file2.csv"));
f1.removeAll(f2); // f1 now contains only the lines which are not in f2 
```

**更新**

好的，所以你有一个PK领域。我只是假设您知道如何从您的字符串中获取它；使用 openCSV 或正则表达式或任何你想要的。做一个实际的`HashMap`而不是`HashSet`上面的 a，使用 PK 作为键和行作为值。

```
HashMap<String, String> f1 = new HashMap<String, String>();
HashMap<String, String> f2 = new HashMap<String, String>();
// read f1, f2; use PK field as the key
List<String> deleted = new ArrayList<String>();
List<String> updated = new ArrayList<String>();
for(Map.Entry<String, String> entry : f1.keySet()) {
    if(!f2.containsKey(entry.getKey()) {
        deleted.add(entry.getValue());
    } else {
        if(!f2.get(entry.getKey().equals(f1.getValue())) {
            updated.add(f1.getValue());
        }
    }
}
for(String key : f1.keySet()) {
    f2.remove(key);
}
// f2 now contains only "new" rows 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T18:01:40.643

读取整个第一个文件，并将其放入`List`. 然后一次读取第二个文件一行，并将每一行与第一个文件的所有行进行比较，看看它是否重复。如果它不是重复的，那么它就是新信息。如果您在阅读时遇到问题，请查看[http://opencsv.sourceforge.net/](http://opencsv.sourceforge.net/)，它是一个非常好的用于在 Java 中读取 CSV 文件的库。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-02T23:21:46.763

Try using the [java-diff-utils](http://code.google.com/p/java-diff-utils/wiki/SampleUsage) library

# Example

I use groovy for quick demos of java libraries:

The following differences are reported between two sample files:

```
$ groovy diff
[ChangeDelta, position: 0, lines: [1,11,21,31,41,51] to [1,11,99,31,41,51]]
[DeleteDelta, position: 2, lines: [3,13,23,33,43,53]]
[InsertDelta, position: 5, lines: [6,16,26,36,46,56]] 
```

## files1.csv

```
1,11,21,31,41,51
2,12,22,32,42,52
3,13,23,33,43,53
4,14,24,34,44,54
5,15,25,35,45,55 
```

## file2.csv

```
1,11,99,31,41,51
2,12,22,32,42,52
4,14,24,34,44,54
5,15,25,35,45,55
6,16,26,36,46,56 
```

## diff.groovy

```
//
// Dependencies
// ============
import difflib.*

@Grapes([
    @Grab(group='com.googlecode.java-diff-utils', module='diffutils', version='1.2.1'),
])

//
// Main program
// ============
def original = new File("file1.csv").readLines()
def revised  = new File("file2.csv").readLines()

Patch patch = DiffUtils.diff(original, revised)

patch.getDeltas().each {
    println it
} 
```

# Update

According to the [dbunit FAQ](http://www.dbunit.org/faq.html#streaming) performance of this solution can be improved for very large datasets by using a streamed revision of the ResultSetTableFactory interface. This is enabled within the ANT task as follows:

```
ant.dbunit(driver:driver, url:url, userid:user, password:pass) {
    compare(src:"dbunit.xml", format:"flat")
    dbconfig {
        property(name:"datatypeFactory", value:"org.dbunit.ext.h2.H2DataTypeFactory")
        property(name:"resultSetTableFactory", value:"org.dbunit.database.ForwardOnlyResultSetTableFactory")
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T06:37:35.767

有一个程序可以比较/减去两个 CSV 文件。它使用 ArrayList

```
import java.io.*;
import java.util.ArrayList;

/* file1 - file2 = file3*/
public class CompareCSV {
public static void main(String args[]) throws FileNotFoundException, IOException
{
    String path="D:\\csv\\";
    String file1="file1.csv";
    String file2="file2.csv";
    String file3="p3lang.csv";
    ArrayList al1=new ArrayList();
    ArrayList al2=new ArrayList();
    //ArrayList al3=new ArrayList();

    BufferedReader CSVFile1 = new BufferedReader(new FileReader(path+file1));
    String dataRow1 = CSVFile1.readLine();
    while (dataRow1 != null)
    {
        String[] dataArray1 = dataRow1.split(",");
        for (String item1:dataArray1)
        { 
           al1.add(item1);
        }

        dataRow1 = CSVFile1.readLine(); // Read next line of data.
    }

     CSVFile1.close();

    BufferedReader CSVFile2 = new BufferedReader(new FileReader(path+file2));
    String dataRow2 = CSVFile2.readLine();
    while (dataRow2 != null)
    {
        String[] dataArray2 = dataRow2.split(",");
        for (String item2:dataArray2)
        { 
           al2.add(item2);

        }
        dataRow2 = CSVFile2.readLine(); // Read next line of data.
    }
     CSVFile2.close();

     for(String bs:al2)
     {
         al1.remove(bs);
     }

     int size=al1.size();
     System.out.println(size);

     try
        {
            FileWriter writer=new FileWriter(path+file3);
            while(size!=0)
            {
                size--;
                writer.append(""+al1.get(size));
                writer.append('\n');
            }
            writer.flush();
            writer.close();
        }
        catch(IOException e)
        {
            e.printStackTrace();
        }
}} 
```

> [http://p3lang.com/subtract-one-csv-from-another-in-java/](http://p3lang.com/subtract-one-csv-from-another-in-java/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T18:22:27.087

你提到检测“更新”的行。我想这意味着一行在更新后以某种方式具有身份。也许单列或复合列提供标识。那是您个人需要整理和实施的实施细节，它只会为您的解决方案添加更多代码。

无论如何...数据库往往对处理集合数据和从 csv 文件加载数据有很好的支持。所有大名鼎鼎的关系数据库都以简单的语法将 csv 文件中的数据加载到表中提供了强大的支持。此时，在两个表之间查找新行或修改的行是非常简单的 sql 查询。

它显然不是一个纯 Java 解决方案，但我认为值得一提。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-06T08:04:25.577

如果您想比较存储在字符串变量中的两个 csv 响应（如果您通过 REST 调用获取它们），我的简单解决方案。就我而言，我想在 10 个不同行的阈值后退出检查。

```
 BufferedReader baseline = new BufferedReader(new StringReader(responseBaseline));
        BufferedReader tested = new BufferedReader(new StringReader(responseTested));
        String lineBaseline = null;
        String lineTested = null;
        boolean linesExist = true;
        boolean foundDiff = false;
        int lineNumber = 0;
        int errorNumber = 0;
        int errorThreshold = 10;
        String message = "";
        while (linesExist) {
            try {
                lineBaseline = baseline.readLine();
                lineTested = tested.readLine();
                lineNumber++;
                if ((lineBaseline != null) && (lineTested != null)) {
                    if (!lineTested.equals(lineBaseline)) {
                        foundDiff = true;
                        errorNumber++;
                        if (errorNumber > errorThreshold) {
                            message = message + "\r\n" + "Found more than " + errorThreshold + " lines that were different. Will exit check.";
                            break;
                        }
                        message = message + "\r\n" + "\r\n#Found differences for line number " + lineNumber + "\r\nLine baseline: " + lineBaseline + "\r\nLine tested: " + lineTested;
                    }
                } else {
                    linesExist = false;
                }
            } catch (IOException e) {
                throw new Error("Problems with reading csv files");
            }
        }
        if (foundDiff) {
            throw new Error("Found differences between csv files. " + message);
        }
    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-02T18:14:12.983

我的建议：

您可以读取文件以创建由 分隔的标记，并从两侧修剪每个标记，以便处理额外的空间，然后将它们存储在有序的数据结构中（类似于链接哈希集、链接哈希映射等（如果您想通过文件中的重复项（如果有的话），然后对另一个文件重复它。

Java 提供了许多实用方法来比较这些数据结构。:)

# php - 将用户信息存储在 wp 数据库和注册时的单独数据库中

> ID：10864656
> 
> 赞同：0
> 
> 时间：2012-06-02T17:56:55.120
> 
> 标签：php, mysql, wordpress

我正在为已经在使用程序来安排客户并保留他们的信息的公司工作。该程序还允许通过网络访问数据库。由于某些要求，我在该网站上选择使用 Wordpress。

我的问题是他们希望允许人们在线注册。那么**，如果我创建了一个自定义注册表单，如何将一些数据存储在 wordpress 数据库中，而将其余数据存储在另一个数据库中呢？**

我还计划调用程序数据库以在站点上显示有关用户的其他信息，例如他们的日程安排。我是否走错了方向，这会在未来引起问题吗？

附加信息：

*   他们使用的程序叫做 Links Modular Solutions

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T23:12:35.453

您必须为不同的数据库指定两个连接，并存储您想要的内容和位置。

例如算法如下：

```
# connect to db1 host
# select db1
# query/insert db1
# connect to db2 host
# select db2
# query/insert db2 
```

不用说，您将需要数据库访问数据和对 PHP 脚本/服务器的访问

# google-maps - Google 将 api 结果映射到 div 或 table

> ID：10864660
> 
> 赞同：0
> 
> 时间：2012-06-02T17:57:23.213
> 
> 标签：google-maps

嗨，我使用 Google Maps Api V3，我会将结果打印到 table 或 div 中。在示例中，结果将显示在带有以下代码的选择中：

Javascript

```
function createOption(name, distance, num) {
      var option = document.createElement("option");
      option.value = num;
      option.innerHTML = "" + name + "";
      locationSelect.appendChild(option);
    } 
```

所有代码：http: [//jsfiddle.net/dgqWm/1/](http://jsfiddle.net/dgqWm/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:54:20.943

如果您有服务器端（PHP），您可以简单地在服务器上编写 HTML 元素（下拉列表）。丑陋的例子：

```
echo "<select id='locationSelect' onchange='OnLocationChanged();'>";
foreach( $entries as $num => $name )
{
    echo sprintf("<option value='%d'>%s</option>", $num, $name);
}
echo "</select>"; 
```

# ios - Set nil to child view controllers in viewDidUnload

> ID：10864665
> 
> 赞同：0
> 
> 时间：2012-06-02T17:57:53.183
> 
> 标签：ios, memory-management, viewdidunload, childviewcontroller

My iOS app is navigation-based with the following structure:

```
@interface ViewControllerA : UIViewController
@property (strong,nonatomic) ViewControllerB *viewControllerB;
@property (strong,nonatomic) ViewControllerC *viewControllerC;
... 
```

`viewControllerB` and `viewControllerC` get instantiated before `ViewControllerA`'s `navigationController` pushes them.

In my understanding, everything that is retained in `ViewControllerA` should be set to nil in `ViewControllerA`'s `viewDidUnload`. Should I do the same to child view controllers? Like this:

```
-(void)viewDidUnload
{
    self.viewControllerB=nil;
    self.viewControllerC=nil;
} 
```

I found an issue when there was "received memory warning" initiated from `viewControllerC`. Afterward, `viewDidUnload` of the parent view controller (i.e. `viewControllerA`) was called, thereby setting nil to 'viewControllerB'. Unexpectedly, viewDidUnload of viewControllerB is also called. So I got "message sent to deallocated object" if I set nil to `viewControllerB`'s subviews (in `viewControllerB`'s `viewDidUnload`).

Does it mean that I should not set nil to child view controllers? What is the best practice for memory management in this situation?

P.S. I use ARC.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:59:26.707

After a call to `viewDidUnload`, a `UIViewController` should maintain its state, i.e. not releasing anything that cannot be easily recreated. Usually you set to nil any data that is related to the view hierarchy, for example strong references to some subviews or custom data created in the `viewDidLoad`. In you example, your parent controller A is expected to be able to recover after `viewDidUnload` was called, meaning that in the future a call `viewDidLoad` will restore your controller and not crash.

Moreover, all view controllers are registered for memory warning notifications, so when a memory warning occurs they can unload any views that isn't currently shown. I don't know if the order the view controllers are called is deterministic, for example called starting from the top view controller, so you should be cautious when setting a nested `UIViewController` to nil in the parent controller `viewDidUnload`.

But as you must maintain the state of yours controllers after `viewDidUnload`, you must not set your child controllers to nil. What you must do is relinquish every strong references you have on the controller subviews (for example a strong reference to a UILabel etc.), but not relinquish the controller itself.

# random - 是否可以使用物理传感器生成随机数？

> ID：10864668
> 
> 赞同：13
> 
> 时间：2012-06-02T17:58:21.940
> 
> 标签：random, arduino, microcontroller, avr, entropy

我听说有人使用光传感器、盖革计数器和其他物理传感器来生成随机数，但我对此表示怀疑。真的有办法通过测量物理世界（使用 Arduino 或任何其他微控制器）来生成随机数吗？如果是这样，这些数字真的会是随机的吗？

澄清一下：问题是关于使用微控制器收集的数据生成随机数的可行性，这些随机数可以很好地应用于密码学——一种依赖设备熵的替代方案。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-03T14:18:56.057

进行模拟“真实世界”测量通常是[熵](http://en.wikipedia.org/wiki/Entropy_%28information_theory%29)的良好来源（又名真实随机数据）。模拟源总是会叠加一些不可预测的噪声，这些噪声可以被“捕获”。然而，如前所述，测量数据很少是无偏的。

模拟电气测量也可能或多或少容易受到无法控制的影响或什至来自外部的攻击，例如通过导致传感器饱和。EMI 也可能会干扰测量；在通话期间将普通手机放置在合理靠近电路的位置很可能会对任何模拟信号造成严重破坏。

## 偏见

无偏的、均匀分布的高熵数通常是人们想要的，因为它们的*属性*（而不是*值*）在某种程度上被归一化，因此可以更可靠地预测。

当以 10 位分辨率测量模拟输入时，理想情况下，从测量中收集的数字范围将涵盖从 0 到 1024 的所有值，并且每个值将以与该范围内的任何其他值相同的频率（或概率）出现。

实际上，这些值通常（或多或少）正态分布（高斯分布）围绕具有一些特征标准偏差的某个平均值，例如每个样本大约 500 @ 10 位。

## 去偏

因此，为了生成具有所需属性的随机值（见上文），需要进行一些去偏操作：需要某种[随机提取器。](http://en.wikipedia.org/wiki/Randomness_extractor)

使用加密函数，如（单向）哈希函数或密码算法，通常也很容易产生所需的结果；但是这是有代价的：这些功能的“混合”在设计上非常强大，这使得在转换后无法确定源数据的质量（=随机性）。即使是最简单的确定性值序列（例如 {1,2,3,4,5...}全部。

## 在 µC 上生成熵

### 定时

在微控制器环境中，很少想到的一个很好的熵来源是事件的*时间*。使用高速计时器，可以通过读取计时器值以响应某些异步事件来收集真正的熵。这种与运行定时器无关的事件可能是用户按下按钮、另一个（子）系统或 IC 启动的通信开始，或者基本上任何其他未由 µC 触发的事件（或任何同步子系统）本身。

事实上，熵甚至可以从两个*独立*的时钟源中获取。例如，通过另一个时钟对一个时钟的计时周期进行计时。这为 Atmel AVR µC（在 Arduino 中使用）打开了几个非常有趣的可能性，具体取决于 µC 的功能：

*   大多数 AVR 都有内部 EEPROM 存储器。对此存储器的写操作由独立于主系统时钟的专用定时器定时~~（-据报道有一些芯片（不是类型！）测量表明情况可能并非如此）~~*（编辑：请注意，在某些 AVR , 以ATTiny25/45/85为例，EEPROM时序来源于内部RC振荡器，因此当该振荡器也被选为系统时钟源时，不会采集熵）*；这可能取决于主时钟源（内部 R/C 与外部晶体/谐振器）。因此，相对于主系统时钟，在写入 EEPROM 所需的时间内，预计会有一些（真正随机的）抖动，这又可以通过高速定时器/计数器来测量。

*   较新的 AVR 能够让看门狗定时器产生软件中断而不是硬件复位。看门狗定时器设计为由其自己的独立时钟源控制，从而产生可以测量的相对抖动。

*   许多 AVR 能够使用外部 32kHz 晶振为专用定时器/计数器提供时钟，以提高实时测量的准确性。这个外部晶体是与主时钟不相关的另一个事件源。（否则一开始多出来的水晶就没用了……）

后者似乎很有希望，因为它具有相对较高带宽的潜力：当使用运行速度明显更快的系统定时器对每个 32kHz 时钟周期进行计时时（在当前的 AVR @ 20 MHz 上可以实现 600+ 的因子！）并且保守地假设只有 1 位每次测量的熵，这会导致每秒 32000+ 位的熵*——*远远超过一个 µC 本身消耗的量。

编辑：同时，我对 32kHz 定时器方法进行了一些简单的测试，短期结果似乎质量很低。每个样本生成的熵的上限似乎非常低，而我什至没有测试样本是否存在源自或多或少规则相移的非明显模式。这个结果可能是由于我的 DUT 的主时钟由外部晶体驱动，当在有限的时间范围内观察时，可以预期（在测量精度范围内）与 32kHz 石英的频率一样稳定。延长两个样本之间的时间（分钟？）可能会返回良好的熵，但带宽非常低。（注：

编辑#2：我的 DUT（ATmega1284）的内部 RC 振荡器似乎产生了显着的频率抖动（几 kHz/s）；当由外部 32kHz 晶体定时时，在这个振荡器上运行确实似乎产生了相当多的熵 (kBits/s)。

在一个小实验中，我最近研究了前两种方法。在我的 DUT 上，EEPROM 时序通常比 WDT 更有利：

对 EEPROM 写入进行计时，每次写入操作产生约 4.82 位的熵，而看门狗定时器在频率方面似乎更稳定，每次看门狗超时产生约 3.92 位。此外，EEPROM 的写入时间看起来更加平滑高斯分布，而 WDT 的分布似乎有些不对称并且有很多像差。

注意：为单个熵测量聚合多个“随机”事件实际上可能会降低获得的熵：源中快速的随机波动可能会部分地相互补偿，从而产生与平均值偏差较小的结果值。*因此，例如，在同一时间进行 32k 次定时（晶体的每个*周期一个），可以预期一个实时秒（RTC 晶体的 32k 周期）会产生更多的熵，而不是定时。

### 未初始化的内存

Avr-gcc 编译的应用程序通常在执行用户代码之前将整个片上 RAM 清除为 0x00，即`main()`. 将代码放入早期`.init`部分可以在原始未初始化 RAM 内容被 gcc 的初始化例程覆盖之前访问它。

由于 RAM 的物理存储单元（位）的微小差异以及取决于一些真正的随机热噪声（和其他影响），当电源（重新）应用于芯片时，并非每个单元都会将自身初始化为相同的已知状态。在上电后立即将芯片 RAM 的内容与某些功能相结合可以产生大量的熵以供以后使用。- 这样做的缺点是它只能在电源关闭一段时间然后再次打开时才能可靠地工作。正常的芯片*复位*，通过硬件、软件或外部信号，将保留 RAM 以前的内容，因此不是（总是）一个好的熵源。但是，由于在相当复杂的应用程序中很难预测重置时整个系统 (RAM) 的状态，因此无论如何可能在重置后立即收集一些熵。

## 带宽要求

熵源的质量必须与其带宽和应用程序使用熵的带宽有关。一些熵收集方法在几秒钟内可能不会产生超过一位的熵，而其他方法（不是真的在 µCs 上......）可能会产生 100 kbit/s 或更多。

必须注意的是，不能通过算法从现有熵中“创建”新熵！- 一位熵不能通过计算转换为两位熵。

因此，一个人（平均而言）每个时间单位消耗的（实际）熵不能比同时从熵源收集的熵多。

## 提议

[当需要强随机数时，将一个或多个真实熵源与强PRNG](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)结合起来并不少见，每次新熵可用时，使用收集到的熵来（重新）播种 PRNG。

PRNG 可用于生成比熵源在同一时间实际提供的更多基本不可预测的数据。

作为一种特殊的 PRNG，可以使用加密密码函数，其中熵用于初始化和更新密码的密钥。

Linux[`/dev/urandom`](http://en.wikipedia.org/wiki//dev/random)通常以这种方式实现。

## 结论

如上所述，在普通微控制器上生成真正的随机数是非常可行的。对于所有其他熵源，需要分析熵源提供的原始数字，了解它们包含的真实熵量以及每个时间单位产生的熵量，以确定该源是否适合用例与否。

真正的熵源和强 PRNG 的组合是通常实现的方法，也应该在微控制器上使用。

编辑：

PRNG 方法可能不是加密*密钥生成*的最佳选择。为此，应该只使用真正的随机位来生成安全密钥。收集这么多的熵可能需要一些时间（可能是几秒钟），但由于在 µC 上通常不会非常频繁地执行密钥生成，因此这很可能是可以接受的。（在每秒有数百或更多 SSL (HTTPS) 连接的重负载服务器上，这将是另一个问题......）

为了产生适合密钥生成的高质量高熵比特流，应该使用上面提到的[随机提取器。](http://en.wikipedia.org/wiki/Randomness_extractor)

（另一方面，如果可以测量或估计源输出中的熵量，则可以简单地将密钥长度按因子缩放`(bitlength of key)/(entropy per bit sampled)`，然后直接使用来自熵源的原始低熵数据来生成这个更长的密钥，然后它将具有与原始长度的完全随机密钥相同的整体熵。但是，如果这确实有效，则取决于密码如何处理不同长度的密钥。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T18:14:11.340

取决于传感器的范围、采样频率和灵敏度。您可以将传感器测量值视为位串或浮点数，这并不重要。关键是，最高有效位/前导小数不是很随机，它们甚至可能几乎不会改变。同样，最低有效位是不可靠的随机源，因为由于传感器灵敏度有限，它们可能会显示阶跃效应，并且取决于传感器，它们可能在时间上具有很强的相关性（例如，温度或电压将具有逐渐变化的趋势）。然而，中间位/数字很可能是真正随机值的来源。

假设您有一个传感器输出 0 到 200 范围内的值，精度为 0.01。假设它是一个压力计，也许是一个分贝计。您需要对此进行广泛测试并查看特定传感器和环境的值分布，但我认为 10^0 和 10^-1 位置的数字很可能均匀分布且没有可辨别的顺序。

最适合的是可以进行非常精确的测量但无论如何都必须处理高水平噪声的传感器。这可能会造成问题，因为大多数传感器并非旨在提供不必要/不可靠的精度水平。此外，当然首选始终和各处（噪声除外）大致相同的测量值。宇宙背景辐射就是一个很好的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T21:58:22.480

我一直在尝试使用硬件资源来生成随机数，到目前为止，它们似乎提供了一个不可预测的资源。如果使用白化技术，则会减少/消除任何潜在的偏差，以允许它们产生均匀的随机整数序列。

如果您想尝试和实验，我已经实现了一个 Arduino 兼容库，它使用与看门狗定时器相关的抖动来生成随机数。初步结果表明它正在产生适合加密目的的结果。

可以在[Code.google 库中找到](http://code.google.com/p/avr-hardware-random-number-generation/)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-06-03T17:58:35.943

谷歌：真随机数生成器

这就是你的做法，你制造噪音并对其进行采样。您无法从软件算法之类的确定性事物中创建真正随机的事物。

# machine-learning - 将 CMU Sphinx 的置信度分数转换为概率时的偏差

> ID：10864672
> 
> 赞同：1
> 
> 时间：2012-06-02T17:59:24.660
> 
> 标签：machine-learning, speech-recognition, probability, cmusphinx, sphinx4

我正在尝试将 CMU Sphinx 识别器的输出（即列表 < 假设（即短语）、分数（在日志中）> 通过调整 test_ps_nbest.c 获得）转换为以下形式：列表 < 假设（即短语）、“概率”（介于0 和 1) >

我现在使用的一个简单方法如下：

1.  将每个置信度分数除以语言权重（例如：11）
2.  标准化对数域中的置信度得分列表
3.  输出概率 = exp（归一化置信度得分）

问题是上述方法的输出概率是有偏差的。你有什么建议可以用来获得概率偏差吗？

我必须实施以纠正偏差的示例方法：

矢量<双> getBias（矢量<字符串>短语，矢量<双> logConfidenceScores）

上述讨论的示例输入：

<“他在我们的头部心脏肺中做了标记”，-43278 >

< “他在我们班上拿了钱，他做了标记”，-43449 >

<他在心脏和肺上得到了能量并且他做了标记”，-43368 >

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T06:05:31.480

> ```
> A trivial method which I am using now is as follows:
> Divide each confidence score by language weight (eg: 11) 
> ```

首先，它不是信心分数，而是分数。你为什么要分？列表中的分数也是声学分数，语言权重在这里没有任何意义

> ```
> Normalize the list of confidence score in log domain 
> ```

这也是一件毫无意义的事情，因为您没有考虑到巨大的概率质量。

> ```
> Output probability = exp(normalized confidence score) 
> ```

动作序列没有任何数学意义，你没有得到好的结果并不奇怪。

如果您想要每个话语的置信度分数，您可能需要先回顾一个理论：

[http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.93.6890&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.93.6890&rep=rep1&type=pdf)

# windows-phone-7 - 寻找用于备份 SMS 消息的 API

> ID：10864679
> 
> 赞同：0
> 
> 时间：2012-06-02T18:00:56.330
> 
> 标签：windows-phone-7, sms

是否有可用的 API 可用于制作用于在 WP7 中备份 SMS 消息的应用程序？我一直在寻找这个很长时间，但没有找到任何令人满意的答案。如果存在，我正在尝试查找直接 API 或间接（即 REST API）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:16:17.910

具有“互操作”解锁的设备是可能的，但您不会通过市场提交过程获得应用程序。

也就是说，这里有一个可用的 SMS 备份工具[SMS Backup](http://forum.xda-developers.com/showthread.php?t=1448197)可能是您正在寻找的 / 帮助您从技术角度了解如何实现它。

# ruby-on-rails - after_initialize 中的 Rails 关联为零

> ID：10864680
> 
> 赞同：9
> 
> 时间：2012-06-02T18:01:12.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有两个具有一对多关联的模型。我想在初始化时根据父级的某些状态在子模型上设置一个默认值。这涉及在需要通过 belongs_to 关联访问父级的子级上触发 after_initialize 回调。问题是当我使用 build 方法实例化子时，在 after_initialize 回调中与父级的关联为零。这是预期的行为吗？我在轨道上 3.0.6

一个玩具例子：

```
class Merchant < ActiveRecord::Base
    has_many :products
end

class Product < ActiveRecord::Base
    belongs_to :merchant

    after_initialize :set_default_value

    def set_default_value
        if merchant.state
            self.foo = some_value
        else
            self.foo = some_other_value
        end
    end
end 
```

在控制器中：

```
product = merchant.products.build 
```

在对 set_default_value 的调用中，商家是 nil，尽管它似乎不应该是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:50:14.107

我将代码更改如下：

```
class Product < ActiveRecord::Base
  ...
  def set_default_value(state = merchant.state)
    if state
      self.foo = some_value
    else
      self.foo = some_other_value
    end
  end
end 
```

然后将您的来电者更改为：

```
product = merchant.products.build(:state => merchant.state) 
```

另外，我发现 after_initialize 回调很慢。所以另一种选择是将逻辑移动到产品的构建器中。

```
product = merchant.products.build(:foo => merchant.state ? some_value : some_other_value) 
```

这也从代码中消除了违反得墨忒耳法则（即产品不应该知道/关心商家的状态是什么）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:31:08.870

我在 Rails 2.3 上，我可以确认

```
product = merchant.products.build 
```

不会在 after_initialize 回调中返回正确的商家 ID 关联

但我发现它可以正常工作

```
product = merchant.products.new 
```

我认为它已通过此提交修复（不过我真的不知道，我并不十分熟悉 git 工作流程）：

[https://github.com/rails/rails/issues/1842](https://github.com/rails/rails/issues/1842)

因为在 rails 3.1.11 它同时适用于`build`和`new`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T23:03:43.000

您可能会寻找`inverse_of`

```
has_many :products, inverse_of: :merchant 
```

# objective-c - 以编程方式创建了一个 TabBar 控制器 - 但是 xib 文件在哪里？

> ID：10864681
> 
> 赞同：0
> 
> 时间：2012-06-02T18:01:13.270
> 
> 标签：objective-c, cocoa-touch, uiviewcontroller

我实现了一个 TabBar 控制器，它是这样初始化的

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
     firstView = [[FirstView alloc]init];
     secondView = [[SecondView alloc]init];

     firstItem = [[UITabBarItem alloc]initWithTitle:@"First" image:nil tag:0];
     secondItem = [[UITabBarItem alloc]initWithTitle:@"Second" image:nil tag:1];

     firstView.tabBarItem = firstItem;
     secondView.tabBarItem = secondItem;

     NSArray *viewArray = [[NSArray alloc]initWithObjects:firstView, secondView, nil];
     [self setViewControllers:viewArray];
    }
return self;
} 
```

在 AppDidFinishedLoading 我只是这样做了：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
mainbarController = [[MainBarController alloc]initWithNibName:@"MainBarController" bundle:nil];
[self.window setRootViewController:mainbarController];
[self.window makeKeyAndVisible];
return YES;
} 
```

我的问题是，我想将 tabBar 放在其他地方，而不是在底部，就像我运行项目时那样。但我找不到我的代码的 xib 文件。mainwindow.xib 只是一个空窗口。我知道这是非常基本的，但我对此感到困惑。

不管怎么说，还是要谢谢你

# c# - 为什么父的构造函数被调用？

> ID：10864682
> 
> 赞同：4
> 
> 时间：2012-06-02T18:01:28.360
> 
> 标签：c#, generics, inheritance, constructor

我有一个抽象类示例。另一个泛型类 UsesExample 使用它作为一个约束，带有一个 new() 约束。后来，我为 Example 类创建了一个子类 ExampleChild，并将它与泛型类一起使用。但不知何故，当泛型类中的代码尝试创建新副本时，它调用的不是子类中的构造函数，而是父类中的构造函数。为什么会这样？这是代码：

```
abstract class Example {

    public Example() {
        throw new NotImplementedException ("You must implement it in the subclass!");
    }

}

class ExampleChild : Example {

    public ExampleChild() {
        // here's the code that I want to be invoken
    }

}

class UsesExample<T> where T : Example, new() {

    public doStuff() {
        new T();
    }

}

class MainClass {

    public static void Main(string[] args) {

        UsesExample<ExampleChild> worker = new UsesExample<ExampleChild>();
        worker.doStuff();

    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T18:06:02.820

当你创建一个对象时，所有的构造函数都会被调用。首先，基类构造函数构造对象，以便初始化基成员。稍后调用层次结构中的其他构造函数。

此初始化可能会调用静态函数，因此如果抽象基类事件没有数据成员，则调用它的构造函数是有意义的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-02T18:08:12.653

每当您创建派生类的新实例时，都会隐式调用基类的构造函数。在您的代码中，

```
public ExampleChild() {
    // here's the code that I want to be invoked
} 
```

真的变成了：

```
public ExampleChild() : base() {
    // here's the code that I want to be invoked
} 
```

由编译器。

您可以在 Jon Skeet关于 C# 构造函数的详细[博客文章中阅读更多内容。](http://www.yoda.arachsys.com/csharp/constructors.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T18:08:34.213

> 在派生类中，如果未使用 base 关键字显式调用基类构造函数，则隐式调用默认构造函数（如果有）。

也来自[msdn](http://msdn.microsoft.com/en-us/library/ms173115%28v=vs.80%29.aspx) ，你可以[在这里阅读](http://www.yoda.arachsys.com/csharp/constructors.html)

# jquery-mobile - 如何在通过 Ajax 拉入的元素上使用 Jquery document.on()？

> ID：10864683
> 
> 赞同：12
> 
> 时间：2012-06-02T18:01:37.283
> 
> 标签：jquery-mobile, jquery

我有一个 Jquery Mobile shell 页面，我正在使用 Ajax 将表单加载到该页面中。该表单有一些复选框，我需要绑定到这些复选框。

奇怪的是，我可以让它直接在按钮上设置监听器，如下所示：

```
$('input[name="ohneiln"]').on('change', function() {
   alert("hello");
   }); 
```

但是，当我尝试将侦听器设置为`$(document)`并委托给 时`checkbox`，侦听器永远不会触发：

```
$(document).on('change', 'input[name="ohneiln"]', function() {
   alert("hello");
}); 
```

**问题：**
为通过 Ajax 加载的“动态”元素设置事件绑定的正确方法是什么`$(document).on()`？这对于事件来说是不可能的，`change`或者我为什么会遇到麻烦？

感谢帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T18:32:31.367

该方法的`.on()`工作方式会根据您使用它的方式而有所不同。在您的第一个示例中，该`.on()`方法的行为类似于`bind`并且仅适用于已经存在的元素。

第二个示例的行为类似于`.live()`或`delegate()`在许多方面。并且适用于稍后添加的元素。

阅读文档以获取详细说明[http://api.jquery.com/on/](http://api.jquery.com/on/)

# dotcloud - 添加自定义域后，是否仍可以访问旧的 appname-xyzabc.dotcloud.com 地址？

> ID：10864686
> 
> 赞同：0
> 
> 时间：2012-06-02T18:01:46.360
> 
> 标签：dotcloud

当我向我的 DotCloud 服务添加域别名时，旧的 appname-xyzabc.dotcloud.com 地址是否仍然可用？我想继续使用它的原因是用于内部 API 请求的 SSL（来自我们的移动应用程序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:42:48.627

是的，它仍然可用。

# c# - 3 层应用程序 - 导航属性

> ID：10864687
> 
> 赞同：2
> 
> 时间：2012-06-02T18:01:58.190
> 
> 标签：c#, entity-framework, repository-pattern

我会在我的 Web 项目中使用 3 层架构。DAL -> EF 4 包装器，带有经典的 CRUD 方法（AddEntity、RemoveEntity 等） BAL -> 业务逻辑和查询公开（selectByName、byCity、bySomeOtherProperty）。用户界面 - Aspx 页面

我的问题是关于 EF 公开的 navigationProperty。如果我有一个 CustomerRepostiory，aspx 方面我不想允许对不是客户的实体进行操作，假设以下 POCO 类：

```
public class Customer
{
    public int Id {get; set;}
public string Name {get; set;}
public ICollection<Orders> Order{get;set;}
} 
```

并在 aspx 上执行如下操作：

```
var customer = bll.getCustomerByName("alex");
customer.Order.Add(new ..) // BAD, I don't want allow it 
```

我该怎么办？也许我必须创建一个 poco 类包装器才能“隐藏”一些属性？哪个真的是最好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:16:48.260

相反，将您的收藏公开`IEnumerable`，这样该收藏将是只读的

您必须执行以下操作：

```
class Customer
{
   private List<Order> orders();
   Customer()
   {
      this.orders = new List<Order>();
   }

   public IEnumerable<Order> Orders { get { return this.orders.AsEnumerable(); } }

   // you will need a public method to mutate the collection

   public void AddOrder(Order order)
   {
      // implement custom logic, fire domain events, etc
      this.orders.Add(order);
   }
} 
```

**编辑：**

如果你不能修改你的实体（这对我来说似乎很奇怪......）你可以尝试使用`ObservableCollection<>`

像这样**奇怪的东西**

```
class MyCustomer : Customer
{
   private ObservableCollection<Order> orders;
   internal bool AllowMutateCollection;
   public MyCustomer()
   {
      this.Orders = this.orders = new ObservableCollection<string>();
      this.orders.CollectionChanged += (_, __) =>
      {
          if(!this.AllowMutateCollection)
          {
             throw new NotImplementedException();
          }
      };
   }
} 
```

现在您必须设置`AllowMutateCollection`何时允许对您的实体进行变异，这变得非常痛苦，并且可能这会导致一些错误......我不推荐它

但是，我强烈建议您重新定义一点您的设计，包装您的类并`IEnumerable`改为公开一个，这将更清洁且更易于维护

检查这个问题

[集合更改时触发事件（添加或删除）](https://stackoverflow.com/q/1607544/1268570)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T19:24:33.700

为 Customer 写一个子类，覆盖 Orders，让 getter 做任何你想要的访问权限检查

# android - Android设置自定义标题栏高度

> ID：10864688
> 
> 赞同：6
> 
> 时间：2012-06-02T18:02:19.530
> 
> 标签：android, height, titlebar

我做了一个自定义标题栏。标题栏中有两个相邻的图像视图和一个文本视图。它工作正常，但我只看到文本视图的顶部。所以我认为标题栏在底部被裁剪。有人知道如何设置自定义标题栏的高度吗？编辑：我的自定义标题栏：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="45dip"
    android:orientation="vertical"
    android:id="@+id/header_root"> 
<RelativeLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
<ImageView
    android:id="@+id/header_image"
    android:layout_width="wrap_content"
    android:layout_height="27dip"
    android:src="@drawable/header_image"
    />

<ImageView
    android:id="@+id/options"
    android:layout_width="wrap_content"
    android:layout_height="27dip"
    android:layout_margin="-8dip"
    android:layout_toRightOf="@+id/header_image"
    android:src="@drawable/options" />

</RelativeLayout>
<TextView 
    android:text="Vissenencyclopedie"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:textSize="15dp"
    android:id="@+id/titel"
    android:layout_marginTop="-7dip"
    />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T11:59:17.410

使用风格：

```
 <style name="CustomTheme" parent="@android:style/Theme.Light">
    <item name="android:windowTitleSize">30dp</item>
</style> 
```

并添加到清单：

```
 <activity
        android:name=".MainActivity"
        android:theme="@style/CastomTheme" >
 </activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T18:08:50.067

我假设标题栏在某种布局中，所以你可以做的是设置布局的高度，例如：

```
android:height="30dp" 
```

您还可以为文本视图提供填充，例如：

```
android:paddingBottom="10dp" 
```

这应该确保显示文本。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T19:34:03.397

我认为问题在于`android:layout_height="45dip"`您为外部 LinearLayout 指定的问题。替换该行，`android:layout_height="wrap_content"`我想这将解决您的问题。

# cocoa - 使用可可应用程序中的 Qt 小部件

> ID：10864689
> 
> 赞同：0
> 
> 时间：2012-06-02T18:02:21.350
> 
> 标签：cocoa, qt

是否可以在本机 Cocoa 应用程序中编写（或重用）来自 Qt 的一些小部件？例如，当我不需要整个基础架构时，只需一种我可以的“NSView”——导入到 xcode cocoa 项目（如静态库等）——使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:22:52.137

是的。

[http://doc.qt.io/qt-5/qmacnativewidget.html](http://doc.qt.io/qt-5/qmacnativewidget.html)

> QMacNativeWidget 类为 Mac OS X 提供了一个小部件，它提供了一种将 Qt 小部件放入 Carbon 或 Cocoa 层次结构的方法，具体取决于 Qt 的配置方式。

# iphone - 更改 NavigationBar 颜色（背景颜色）

> ID：10864691
> 
> 赞同：6
> 
> 时间：2012-06-02T18:02:36.103
> 
> 标签：iphone, objective-c, xcode

我一直在阅读以更改导航栏上的默认颜色我只需要将 appdelegate 中的第一个方法更新为此

```
self.window.rootViewController.navigationController.navigationBar.tintColor = [UIColor whiteColor]; 
```

但它似乎不起作用，所以我也尝试在 firstview 的 viewDidLoad 方法中设置它：

```
self.parentViewController.navigationController.navigationBar.tintColor = [UIColor whiteColor]; 
```

这也不起作用。我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T18:12:25.857

不要使用`self.parentViewController`，但是`self`：

```
self.navigationController.navigationBar.tintColor = [UIColor whiteColor]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:58:53.660

当 iphone 5 来时，我们必须设置两种设备类型。所以用这个

```
if([self.navigationController.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)] ) {
    //iOS 5 new UINavigationBar custom background
    [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"navbg_ForiPhone5_Imagename.png"] forBarMetrics: UIBarMetricsDefault];
} else {
    [self.navigationController.navigationBar insertSubview:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"navbg_ForOtherIphone_Imagename.png"]] atIndex:0];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-02T13:34:24.557

在IOS7你可以试试这个：

```
[[UINavigationBar appearance] setBarTintColor:[UIColor redColor]]; 
```

您可以按照以下步骤操作：

我创建了一个新`UINavigationController`的例子`UIDemoNavController`，结果是：

```
- (void)viewDidLoad{
    [[UINavigationBar appearance] setBarTintColor:[UIColor redColor]];  
    [super viewDidLoad];
} 
```

这是完整的演示课程：

```
#import "UIDemoNavController.h"

@interface UIDemoNavController()

@end

@implementation UIDemoNavController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {}
    return self;
}

- (void)viewDidLoad{
    [[UINavigationBar appearance] setBarTintColor:[UIColor redColor]];
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning{
    [super didReceiveMemoryWarning];
}

@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T18:11:13.623

Try`self.navigationController.navigationBar.tintColor = [UIColor whiteColor];`
`UIViewController`类有一个属性`navigationController`，它返回它嵌入的导航控制器，不管它有多深，否则它返回`nil`。

# iphone - 自我与超人的区别

> ID：10864692
> 
> 赞同：1
> 
> 时间：2012-06-02T18:02:41.210
> 
> 标签：iphone, objective-c, ios, ipad, inheritance

刚刚有一个菜鸟问题。我试图理解调用 self 和 super 之间的区别。现在我了解了继承和其他基本的 OOP 概念，但是我仍然不清楚 self 和 super 的概念。我将用一个例子来说明我的问题。

因此，当手机倒置时，下面的代码会执行 segue。我知道“Scene2ViewController”是“UIViewController”的子类，因此“Scene2ViewController”继承了 UIViewController 的所有方法。所以下面我调用了 performSegueWithIdentifier 方法，消息的接收者是 self。现在，当我将“self”更改为“super”时，代码仍然以相同的方式执行。调用 super 和调用 self 不一样吗？如果有人可以向我解释这一点，将不胜感激，谢谢。

```
//Scene2ViewController.m
- (BOOL)shouldAutorotateToInterfaceOrientation:  (UIInterfaceOrientation)interfaceOrientation
{
if (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown) {
    [self performSegueWithIdentifier:@"SegueToScene1" sender:self];
}

return (interfaceOrientation == 
        UIInterfaceOrientationPortrait);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T18:05:06.040

`self`实际上两者`super`都指向同一个对象。`super`是一个关键字，它告诉编译器生成开始在超类中而不是在当前类中搜索方法定义的指令。

```
@interface A : NSObject {}
- (void)foo;
@end

@implementation A
- (void)foo {
    NSLog(@"A's foo!");
}
@end

@interface B : A
@end

@implementation B
- (void)foo {
    NSLog(@"B's foo!");
}
@end

//...somewhere in a method of class B...
[self foo];    // prints "B's foo" in the console
[super foo];    // prints "A's foo" in the console 
```

如果我们根据注释假设最后几行在 B 的某个方法中，则`self`指向 B 的某个实例。`super`也指向 B 的同一个实例。但是当您使用`self`to call`foo`时，搜索的实现`foo`从类 B 开始。使用`super`时，搜索`foo`从 B 的超类 A 开始。

`super`当您想要保留继承的行为但添加一些东西时特别方便。因此，我们可以使用 B 实现`foo`调用 A 的版本`[super foo]`。如果没有`super`，就无法调用继承的方法，并且`foo`从重写的方法调用将导致无限递归。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T18:07:09.510

当你调用一个方法`self`（或者更确切地说是向 Objective-C 术语发送消息`self`）时，运行时将在继承层次结构中搜索该方法的实现，从 开始`self`，一直到`NSObject`. 因此，如果`self`实现了该方法，它将被执行。如果不是，`super`则将检查该类，依此类推。

将消息发送到非常相似，不同之处在于运行时将开始在和 skip`super`中寻找实现。`super``self`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T18:09:22.503

有时，在子类中，您可能会覆盖已在父类中定义的函数。这经常发生在 init 函数中。所以如果你需要调用父类的init函数你调用super。如果您需要子类的功能，您可以调用 self. 如果只有父级声明了函数，则 Self 和 super 行为相同。但是如果只有子类有声明，那么你不能从 super 调用函数。

# oop - Autofac - 生命周期和模块

> ID：10864695
> 
> 赞同：9
> 
> 时间：2012-06-02T18:03:00.960
> 
> 标签：oop, autofac

**问题（摘要）**

给定一个注册依赖项 X 的模块。依赖项 X 在 MVC3 应用程序中具有不同的生命周期（每个 HttpRequest 的生命周期），然后在控制台应用程序中（每个生命周期范围的依赖项和名称）。在哪里或如何指定依赖项 X 的生命周期？

**案子**

我已将所有与数据库相关的代码放在一个程序集中，其中包含一个注册所有存储库的模块。现在 ISession (Nhibernate) 注册也在模块中。

ISession 是依赖项 X（在给定的问题情况下）。ISession 在 MVC3 应用程序中具有不同的生命周期（每个请求的生命周期），然后在我定义命名生命周期范围的控制台应用程序中。

ISession 的注册是否应该在模块之外？会很奇怪，因为它是一个实现细节。

在这里最好的情况是什么？设计缺陷还是为此有智能结构:)？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T16:53:25.613

鉴于您的用例描述，我想说您有几个选择。

首先，**您可以让每个应用程序注册自己的一组依赖项，**包括生命周期范围。考虑到应用程序之间的差异以及注册看起来相当小的事实，在这方面拥有一两个“重复”代码并不是什么大问题。

其次，您可以将公共部分（减去生命周期范围）包装到可以在每个应用程序中使用**的 ContainerBuilder 扩展方法中。**这仍然意味着每个应用程序都有一些“重复代码”，但通用逻辑将包含在一个简单的扩展中。

```
public static IRegistrationBuilder<TLimit, ScanningActivatorData, DynamicRegistrationStyle>
  RegisterConnection<TLimit, ScanningActivatorData, DynamicRegistrationStyle>(this ContainerBuilder builder)
{
  // Put the common logic here:
  builder.Register(...).AsImplementedInterfaces();
} 
```

在每个应用程序中使用这样的扩展程序如下所示：

```
builder.RegisterConnection().InstancePerHttpRequest();
// or
builder.RegisterConnection().InstancePerLifetimeScope(); 
```

最后，如果您知道它是 Web 还是非 Web，**您可以制作一个处理开关的自定义模块**：

```
public class ConnectionModule : Autofac.Module
{
  bool _isWeb;
  public ConnectionModule(bool isWeb)
  {
    this._isWeb = isWeb;
  }

  protected override void Load(ContainerBuilder builder)
  {
    var reg = builder.Register(...).AsImplementedInterfaces();
    if(this._isWeb)
    {
      reg.InstancePerHttpRequest();
    }
    else
    {
      reg.InstancePerLifetimeScope();
    }
  }
} 
```

在每个应用程序中，您可以注册模块：

```
// Web application:
builder.RegisterModule(new ConnectionModule(true));

// Non-web application:
builder.RegisterModule(new ConnectionModule(false)); 
```

或者，您提到您的其他应用程序中的生命周期范围有一个名称。**你可以让你的模块取名字**：

```
public class ConnectionModule : Autofac.Module
{
  object _scopeTag;
  public ConnectionModule(object scopeTag)
  {
    this._scopeTag = scopeTag;
  }

  protected override void Load(ContainerBuilder builder)
  {
    var reg = builder.Register(...)
                     .AsImplementedInterfaces()
                     .InstancePerMatchingLifetimeScope(this._scopeTag);
  }
} 
```

消费类似：

```
// Web application (using the standard tag normally provided):
builder.RegisterModule(new ConnectionModule("httpRequest"));

// Non-web application (using your custom scope name):
builder.RegisterModule(new ConnectionModule("yourOtherScopeName")); 
```

**我建议不要简单地`InstancePerLifetimeScope`在 Web 应用程序中使用，除非这实际上是您想要的。**如其他答案/评论中所述，`InstancePerHttpRequest`使用特定的命名生命周期范围，以便创建子生命周期范围是安全的；using`InstancePerLifetimeScope`没有这样的限制，因此*您实际上会为每个子范围获得一个连接，而不是为 request 获得一个连接*。我个人不认为其他开发人员不会使用子生命周期范围（[这是推荐的做法](http://nblumhardt.com/2011/01/an-autofac-lifetime-primer/)），所以在我的应用程序中我非常具体。如果您完全控制了您的应用程序，并且您可以确保您没有创建额外的子范围，或者您确实希望每个范围有一个连接，那么也许`InstancePerLifetimeScope`将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:40:22.803

每个 http 请求使用一个连接是常见的做法。在这种情况下，将使用 .InstansePerLifetimeScope() 注册连接。例如，您可能会执行以下操作：

```
builder
    .Register(c => {
                       var conn = new SqlConnection(GetConnectionString());
                       conn.Open();
                       return conn;
                   })
    .AsImplementedInterfaces()
    .InstancePerLifetimeScope(); 
```

# javascript - 动态导入 JavaScript

> ID：10864701
> 
> 赞同：4
> 
> 时间：2012-06-02T18:04:24.053
> 
> 标签：javascript, web, dynamic-html

请问将JavaScript（.js）文件动态导入父JavaScript代码的正确方法是什么？

我正在使用以下代码，但似乎不正确：

```
 function loadjscssfile(filename, filetype)
{
    //if filename is a external JavaScript file
    if (filetype=="js")
    {
        var fileref=document.createElement('script');
        fileref.setAttribute("type","text/javascript");
        fileref.setAttribute("src", filename);
    }
    //if filename is an external CSS file
    else if (filetype=="css")
    {
        var fileref=document.createElement("link");
        fileref.setAttribute("rel", "stylesheet");
        fileref.setAttribute("type", "text/css");
        fileref.setAttribute("href", filename);
    }
    if (typeof fileref!="undefined")
    document.getElementsByTagName("head")[0].appendChild(fileref)
} 
```

我认为，代码不正确，因为在主 JavaScript 代码中，我无法读取导入代码中定义的变量，例如：

```
var fileRef = loadjscssfile('Language/svk.js', 'js');
alert("Pet Name: " + PETNAME); 
```

导入的 svk.js 文件包含唯一的代码：

```
// JavaScript Document
var PETNAME = "Beauty"; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T18:11:04.367

插入`<script>`标签后，不能立即使用外部 JS 文件中定义的变量和函数。浏览器需要几毫秒来加载文件并执行它。

您必须使用某种回调才能为您的 JavaScript 设置正确的加载顺序。

对于 JavaScript 的正确条件加载，请查看[Require.js](http://requirejs.org/)。那里实现了异步模块定义模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T18:19:19.923

`svk.js`添加以下内容（在变量减速之后）：

```
svkLoaded(); 
```

在主代码文件中添加以下内容：

```
function svkLoaded()
{
    alert("Pet Name: " + PETNAME);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T18:12:01.417

您无法读取`PETNAME`变量的原因是像这样动态注入脚本是异步且非阻塞的。这意味着您`alert`在脚本实际加载之前执行。相反，您可能必须轮询`PETNAME`变量是否存在：

```
var waitForPETNAME = function(){
        if (typeof PETNAME === 'undefined') {
            setTimeout(waitForPETNAME, 15);
        } else {
            // execute code that uses PETNAME
        }
    };

waitForPETNAME(); 
```

此外，动态注入元素的更简单的方法是将它们插入到第一个脚本元素之前，因为您确定必须存在脚本元素（否则您将不会执行代码）。换句话说，替换：

```
document.getElementsByTagName("head")[0].appendChild(fileref) 
```

和：

```
var insref = document.getElementsByTagName('script')[0];
insref.parentNode.insertBefore(fileref, insref); 
```

# ms-access - 在 Access 中激活子表单

> ID：10864702
> 
> 赞同：1
> 
> 时间：2012-06-02T18:04:54.760
> 
> 标签：ms-access, vba, subform

我有一个包含许多子表单的 MS Access 主仪表板表单。表和记录位于在线数据库中，我使用 ODBC 连接到表。而不是在仪表板加载时显示所有子表单，我更希望从仪表板按需打开它们 - 这将加快仪表板表单的加载。子表单背后有一些复杂的查询。当仪表板表单首次打开时（因此它打开得很好且快速），然后使用按钮单击按需打开子表单，是否有任何方法可以让子表单处于休眠状态，即仅在需要时通过 ODBC 下拉子表单的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T19:35:08.017

您可以创建一个子表单对象，然后以编程方式使用`Me.Child0.SourceObject = "MySubForm"`

# c# - 使用 Ast.Expressions 创建委托

> ID：10864703
> 
> 赞同：0
> 
> 时间：2012-06-02T18:04:56.490
> 
> 标签：c#, .net-3.5, expression-trees

我正在试验表达式（Microsoft.Scripting.Ast），需要将带有委托的委托变量分配给另一个实例方法，然后调用该委托。不幸的是我很无知:(

```
var @delegate = Expression.Variable (typeof (Delegate));
var expression = Expression.Block(
     new [] { @delegate },
     Expression.Assign(@delegate, /* MISSED PART */),
     Expression.Call(@delegate, typeof(Delegate).GetMethod("DynamicInvoke"))
); 
```

*如果我错过了什么，请告诉我。这是我最近开始的实习。所以可能根本没有意义^^*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:04:14.983

答案是`Expression.GetDelegateType(...)`

这是为 a 创建委托的代码片段`MethodInfo`：

```
public static Type GetDelegateType (this MethodInfo methodInfo)
{
  var parameterTypes = methodInfo.GetParameters ().Select (x => x.ParameterType);
  var returnType = new[] { methodInfo.ReturnType };

  var delegateTypes = parameterTypes.Concat (returnType).ToArray ();
  return Expression.GetDelegateType (delegateTypes);
} 
```

# c# - 如何在 asp.net mvc 2.0 中使用剃刀语法

> ID：10864705
> 
> 赞同：-1
> 
> 时间：2012-06-02T18:05:16.830
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, razor

我正在asp.net mvc 2.0 中开发一个应用程序，我想在其中实现面包屑模式。为此，我浏览了很多网站，并通过 mvcsitemap 提供程序在 MVC 3.0 中找到了我的问题的解决方案。他们使用 razor 语法，我无法在 MVC 2.0 中使用 razor 语法。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:24:43.707

要使用 Razor View Engine，您可以将 MVC 2 应用程序转换为 MVC 3。在 MVC 2 中将无法使用 Razor。

**MVC 3 项目升级工具**

[MVC 3 项目升级工具](http://aspnet.codeplex.com/releases/view/59008)

此独立应用程序将 ASP.NET MVC 2 应用程序升级到 ASP.NET MVC 3。它适用于 ASP.NET MVC 3 RC 2 和 RTM。该工具仅支持面向 .NET 4 的 Visual Studio 2010 解决方案和 MVC 2 项目。

它不适用于 VS 2008 解决方案、MVC 1 项目或面向 .NET 3.5 的项目。这些项目首先必须使用 Visual Studio 2010 升级和/或重新定位到 .NET 4。

# android - 在 FragmentTransaction.commit() 之后不会立即调用 onCreateView()

> ID：10864708
> 
> 赞同：16
> 
> 时间：2012-06-02T18:06:04.190
> 
> 标签：android, design-patterns, android-fragments

我有一个动态替换片段的活动：

```
private void goToFragment(Fragment newFragment, String tag) {
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.replace(R.id.fragment_container, newFragment, tag);
    ft.addToBackStack(null);
    ft.commit();
} 
```

现在，我想访问片段内的视图，以便在调用`goToFragment`.

问题是，在片段`onCreateView`完全渲染之前，片段不会被调用，至少在我的理解中是这样。

我知道覆盖`onAttach(Activity activity)`片段中的 是一种解决方法，但是我必须将它专门用于我的活动 - 我只是想避免这种情况，因为我认为片段依赖于特定活动是不好的做法.

据我所知，`Fragment`没有实现任何听众（作为主题）。

所以我想我必须创建自己的侦听器（使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)使片段成为主题，活动成为观察者），然后在`onCreateView`or`onAttach`完成时调用它，然后最后用数据回调到片段需要设置。但是，我需要对几个片段执行此操作，因此我必须为每个片段创建一个侦听器，我再次认为这很糟糕。

有没有更好/更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-02T20:03:09.203

`FragmentTransaction`调用后不会立即应用`commit()`。您可以手动强制更新：

```
...
mFragmentManager.executePendingTransactions(); 
```

AFAIK 事件回调的目的是`Fragment`超出其通常的生命周期的自定义通信。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T18:09:53.573

*正确*的方法是为`Activity`希望显示您`Fragment`应该实现的类定义一个接口。这样，`onAttach`您就不会投射到特定的`Activity`而是投射到您的界面。

参见例如：http: [//developer.android.com/guide/topics/fundamentals/fragments.html#EventCallbacks](http://developer.android.com/guide/topics/fundamentals/fragments.html#EventCallbacks)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T18:18:38.830

您应该使用`onActivityCreated`来设置值。

在 中设置引用，`onCreateView`然后在 中为它们设置值`onActivityCreated`。

# objective-c - 带有 FMDB 包装器的 Sqlite 数据库不插入数据

> ID：10864711
> 
> 赞同：1
> 
> 时间：2012-06-02T18:06:17.083
> 
> 标签：objective-c, sqlite, fmdb

我有一个使用 FMDB 作为包装器的 sqlite 数据库的 iPad 应用程序。我能够成功地从数据库中查询数据；但是，当我尝试使用 executeUpdate 插入数据时，该方法会正确触发（即我没有收到任何错误，它返回 YES），但实际上没有将任何内容插入到数据库中。我尝试立即检索我刚刚插入的对象，它为空。我还尝试查看我插入的表中的行数，并且该表为空。知道我做错了什么吗？这是一些代码：

--处理我所有数据库工作的类的init方法

```
 -(NSString *)getDbPath {    
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        return [documentsDirectory stringByAppendingPathComponent:@"iRecipeBox.db"];
     }

    -(id)init {
        self = [super init];
        if(self) {
           database = [FMDatabase databaseWithPath:[self getDbPath]];
           [database open];
        }

       return self;
     } 
```

--将我的数据库移动到文档目录的应用程序委托代码

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        // Override point for customization after application launch.
        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSError *error;
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];

        NSString *docsPath = [documentsDirectory stringByAppendingPathComponent:@"iRecipeBox.db"];

        if ([fileManager fileExistsAtPath:docsPath] == NO) {
            NSString *resourcePath = [[NSBundle mainBundle] pathForResource:@"iRecipeBox" ofType:@"db"];
            [fileManager copyItemAtPath:resourcePath toPath:docsPath error:&error];
         }
         return YES; 
```

}

--将数据插入其中一张表的代码

```
 recipeID = [NSNumber numberWithInt:newRecipeID];
    [database beginTransaction];
    NSArray *newRow = [[NSArray alloc] initWithObjects:recipeID,title, description, picFile, prepTime, cookTime, ovenTemp, nil];
    NSString *sql = @"insert into recipes (id, name, descr, picFile, prepTime, cookTime, ovenTemp) values (?, ?, ?, ?, ?, ?, ?)";
    NSLog(@"Before update, the number of args is %i", [newRow count]);

    if([database executeUpdate:sql withArgumentsInArray:newRow]) {
        [database commit];
        NSLog(@"the insert worked");
    } else {
        [database rollback];
        NSLog(@"the insert failed");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:13:50.300

[FMDatabase databaseWithPath:] 返回一个自动释放的对象，所以如果你不使用 ARC，你会想要保留它。

在 executeUpdate: 之后检查 [database lastError]，看看它是否说明了什么。

最后 - 如果它只是一个插入，那么使用事务是没有意义的。

# c - 算法编程 Q - 为看似正确的解决方案得到错误的答案

> ID：10864716
> 
> 赞同：0
> 
> 时间：2012-06-02T18:06:55.790
> 
> 标签：c

[这](http://www.codechef.com/JUNE12/problems/CAKEDOOM)就是问题。我想出了一个算法，但我一直收到错误答案状态。我需要知道我的方法有什么问题。

这是我的算法：

```
 Traverse the char array s: for i in range(0,len(s))
1\. If c = '?' start from p=0 and check if p is present in left or right. If yes then increment it and repeat this step until p != left and p != right.
2\. Check if p >= k. If yes then print NO and continue to the next test case.
3\. Put the value of p in s[i] and continue
4\. If c != '?', then check if c = its left and right digits. If it is, then print NO and continue to the next test case. 
```

当 k=2 和 s[0] = '?' 时，我必须处理一个特殊情况。（对我的算法的输入进行试运行`k = 2, s = ???0`，输出结果将是**NO**，而它应该是**1010**，所以很容易弄清楚为什么这是一个特殊情况）。对于**k=2**，数字*将*交替出现。因此，如果第一个字符为 1，则可以确定整个字符串。如果 s[0] 是“？”，那么在答案中 s[0] 可能是 0 或 1。这是我考虑过的特殊情况。

这里有一些关于为什么我的程序（根据我）总是能正常工作的理论。

我已经正确处理了**k = {1,2}**的情况，并且对于所有**k >= 3**，答案永远不会是 NO，前提是输入的测试用例尚未不正确（至少有一对相同的相邻数字） . 这是因为，任何数字（在圆圈中）将恰好有 2 个邻居，并且我将至少有 3 种颜色可供放置，因此所有情况 k>=3 也都被处理。现在，根据我的说法，我的逻辑在任何方面都没有错，但是当我提交时，我得到了一个错误的答案。

更多细节，这里是 C 代码：

```
#include <stdio.h>
#include <string.h>
int main()
{
    int t; scanf("%d\n",&t);
    while(t--)
    {
        int a=0,k,len; scanf("%d\n",&k);
        char s[101]; scanf("%s\n",&s);
        len = strlen(s);
        if(k==2 && s[0] == '?') // the special test case I was talking about
        {
            while(s[++a] == '?');
            if(a < len && ((a%2 == 0 && s[a] == 49) || (a%2 == 1 && s[a] == 48))) s[0] = 49;
        }
        for(a=0;a<len;a++)
        {
            int l = a==0 ? len-1 : a-1, r = a==len-1 ? 0 : a+1, p=0;
            if(s[a] == '?')
            {
                while(s[l]-48 == p || s[r]-48 == p) p++;
                if(p >= k) goto NP;
                s[a] = p+48;
            }
            else // checking the validity of input string
            {
                if(s[a] == s[l] || s[a] == s[r] || s[a] >= k+48) goto NP;
            }
        }
        printf("%s\n",s); continue;
        NP:
        printf("NO\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T18:51:39.017

从问题陈述：

> 在 N = 1 的情况下，只要用于该排列的唯一樱桃的颜色小于 K，任何排列都是有效的。

使用以下输入运行您的代码：

```
1
5
2 
```

也就是T=1，K=5，一饼一樱桃色“2”

它应该做什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T06:47:59.743

好吧，对于 k=2 ， s=??1 情况，101 似乎不正确。根据问题陈述，它应该是 NO。

# c# - 多线程 TcpClient 长时间打开连接后发送超时

> ID：10864721
> 
> 赞同：1
> 
> 时间：2012-06-02T18:07:39.153
> 
> 标签：c#, multithreading, timeout, tcpclient, streamwriter

在连接打开很长一段时间（几个小时或一夜之间）后，我在多线程应用程序中因发送超时而关闭 TcpClient 时遇到问题。NetworkStream 被两个线程使用，一个 UI 线程和一个后台线程。StreamReader 用于读取传入数据，StreamWriter 用于传出数据。StreamReader 只被一个线程（后台线程）访问，但 StreamWriter 被 UI 线程和后台线程访问。

发生的情况是，如果我打开连接并连接到远程服务器，我可以立即发送和接收数据而不会出现任何问题。我没有收到任何发送超时，并且数据已正确发送和接收。但是，如果我随后走开几个小时不发送任何数据，然后返回并开始发送数据（如果这有助于使其有意义，这是一个聊天应用程序），则套接字将在发送时超时。在我离开的那段时间里，接收数据完全没有问题。此外，远程服务器轮询活动连接，我的客户端必须对此做出响应，并且由于连接打开了几个小时，它必须正确发送响应。不过，此轮询响应仅在后台线程上发送。我输入的数据是从 UI 线程发送的，这就是超时发生的地方。

我猜这与并发访问有关，但我不知道是什么原因造成的，以及为什么我最初可以毫无问题地从 UI 发送数据，并且只有在空闲几个小时后才会超时。

下面是相关代码。顶部的变量在类中声明。地址和端口是类中的属性。WriteLine 是应用程序中使用 StreamWriter 发送数据的唯一方法。我锁定了对 StreamWriter.WriteLine 的调用，希望这能纠正任何同步问题。从 ParseMessage 内部的后台线程和 UI 的其他地方调用 WriteLine。

如果我将 TcpClient.SendTimeout 增加到更大的值，那并不能解决任何问题。套接字超时只需要更长的时间。我不能让后台线程同时读取和写入，因为后台线程在 ReadLine 上阻塞，所以什么都不会被写入。

```
private TcpClient _connection;
private StreamWriter _output;
private Thread _parsingThread;
private object _outputLock = new object();

public void Connect(string address, int port)
{           
    Address = address;
    Port = port;

    _parsingThread = new Thread(new ThreadStart(Run));
    _parsingThread.IsBackground = true;
    _parsingThread.Start();
}

private void Run()
{
    try
    {
        using (_connection = new TcpClient())
        {
            _connection.Connect(Address, Port);
            _connection.ReceiveTimeout = 180000;
            _connection.SendTimeout = 60000;

            StreamReader input = new StreamReader(_connection.GetStream());
            _output = new StreamWriter(_connection.GetStream());

            string line;
            do
            {
                line = input.ReadLine();

                if (!string.IsNullOrEmpty(line))
                {
                    ParseMessage(line);
                }
            }
            while (line != null);
        }
    }
    catch (Exception ex)
    {
        //not actually catching exception, just compressing example
    }
    finally
    {
       //stuff
    }
}

protected void WriteLine(string line)
{
    lock (_outputLock)
    {
        _output.WriteLine(line);
        _output.Flush();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:36:40.623

类的阻塞方法 (`Read`和`Write`)[`NetworkStream`](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.aspx)不是为从多个线程同时使用而设计的。来自 MSDN：

> 使用`Write`和`Read`方法进行简单的单线程同步阻塞 I/O。如果要使用单独的线程处理 I/O，请考虑使用`BeginWrite`and`EndWrite`方法或`BeginRead`and`EndRead`方法进行通信。

我的假设是，当您从 UI 线程调用`WriteLine`（并且，内部，`NetworkStream.Write`）时，它会阻塞，直到并发`ReadLine`（内部，`NetworkStream.Read`）操作在后台线程中完成。如果后者在 内不这样做`SendTimeout`，那么`Write`将超时。

要解决您的问题，您应该将实现转换为使用非阻塞方法。但是，作为首先测试这是否真的是问题的快速技巧，请尝试`DataAvailable`在您之前引入民意调查`ReadLine`：

```
NetworkStream stream = _connection.GetStream();
StreamReader input = new StreamReader(stream);
_output = new StreamWriter(stream);

string line;
do
{
    // Poll for data availability.
    while (!stream.DataAvailable)
        Thread.Sleep(300);

    line = input.ReadLine();

    if (!string.IsNullOrEmpty(line))
    {
        ParseMessage(line);
    }
}
while (line != null);

line = input.ReadLine(); 
```

# android - SkImageDecoder::Factory 返回 null

> ID：10864729
> 
> 赞同：4
> 
> 时间：2012-06-02T18:08:43.197
> 
> 标签：android, image, remoteobject

我正在 Android 上编程并通过此调用从远程 URL 读取图像

`BitmapFactory.decodeStream( ....`

随机，我得到错误：

`SkImageDecoder::Factory returned null`

我在这里读了一些线程，但没有解决我的问题（对 InputStream 类使用包装器，使用 drawable 等）

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-06T13:27:51.633

我也有这个问题......最终我发现图像太大而导致错误。我建议您尝试使用您知道或多或少适合的图像。您也可以使用 lib [picasso](http://square.github.io/picasso/)：

```
Picasso.with(context).load("http://i.imgur.com/DvpvklR.png").into(imageView); 
```

但对我来说，即使是毕加索，我也得到了错误......再次因为图像太大。

希望能帮助到你 （：

# javascript - JavaScript：访问外部 .js 文件中定义的变量

> ID：10864732
> 
> 赞同：5
> 
> 时间：2012-06-02T18:09:10.400
> 
> 标签：javascript, web

> **可能重复：**
> [动态导入 JavaScript](https://stackoverflow.com/questions/10864701/dynamically-importing-javasscript)

有没有办法访问来自外部导入的 JavaScript .js 文件的变量？

在外部 .js 文件中，我定义了一个变量，如下所示：

```
// JavaScript Document
var PETNAME = "Beauty"; 
```

动态导入该代码后，我希望访问 PETNAME 变量，但我没有得到定义的值：

```
alert("Pet Name: " + PETNAME); 
```

有什么问题，有没有办法将外部 .js 代码中的值带入主 JavaScript？

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T18:18:47.607

要动态导入 JS，您需要考虑在脚本被浏览器解析`onreadystatechange`并`load`可供您使用时运行的事件。您可以使用此功能：

```
function getScript(url, callback) {
   var script = document.createElement('script');
   script.type = 'text/javascript';
   script.src = url;

   script.onreadystatechange = callback;
   script.onload = callback;

   document.getElementsByTagName('head')[0].appendChild(script);
} 
```

你可以像这样使用它：

```
getScript('path to your js file', function(){
  alert("Pet Name: " + PETNAME);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T18:18:23.810

确保在尝试访问其中定义的变量之前包含外部文件。还要确保外部文件中的变量未在函数内部定义，在这种情况下，它们的范围仅限于该函数。如果这无助于尝试`var`在变量之前删除关键字，这将创建全局变量。

# html - 无法将包含子 div 的父 div 的背景颜色设置为黑色

> ID：10864735
> 
> 赞同：0
> 
> 时间：2012-06-02T18:09:31.740
> 
> 标签：html, css

这是没有高度属性：http: [//jsfiddle.net/karthik64/pFcpX/](http://jsfiddle.net/karthik64/pFcpX/)

这与高度属性：http: [//jsfiddle.net/karthik64/pFcpX/1/](http://jsfiddle.net/karthik64/pFcpX/1/)

问题是我需要设置一个固定的“高度”属性以使背景颜色为黑色，如果我从 CSS 属性中删除高度属性，背景颜色将不会是黑色。我必须告诉你，我的 div 的高度是动态的。这取决于从数据库中获取的数据。

我已经尝试过`!important`，类似的东西，但它没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:12:03.110

添加`overflow: hidden`到外部的样式`div`

看到这个[JsFiddle](http://jsfiddle.net/WXfyR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T18:24:02.193

我只是稍微更改了您的代码。我在最后一个关闭 div 之前添加了一个 div，并添加了一个类名 clearfix。并添加`clear:both`到清除修复类。现在你可以在任何有浮动 div 的地方使用这个类。

HTML：

```
<div style="width:690px;background-color:#000000;margin-left:40px;margin-top:4px">

        <div style="float:left;width:310px;font-family:Arial,Helvetica,sans-serif;padding-left:30px; color:#fff;"> 

        <div style="font-size:1.6em;margin-top:15px"> Hello! </div>

        <div id="iamm"> Niko </div>

        <div style="font-size:12px"> I'm a Student               </div>

        <div style="font-size:12px"> gender Male                 </div>

            <div style="font-size:12px"> I stay at India </div></div>

    <div class="clearfix"></div>
</div> 
```

检查小提琴：http: [//jsfiddle.net/pFcpX/9/](http://jsfiddle.net/pFcpX/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T18:47:18.967

将以下给定的 css 添加到您的样式表中，并在您遇到此问题时使用此类 clearfix。它用于 HTML5 Bolerplate。

```
.clearfix:before, .clearfix:after { content: ""; display: table; }
.clearfix:after { clear: both; }
.clearfix { *zoom: 1; } 
```

这是小提琴：http: [//jsfiddle.net/pFcpX/10/](http://jsfiddle.net/pFcpX/10/)

我将此类清除修复添加到具有黑色背景的顶部 div 中。

# ios5 - 参考错误：找不到变量：ChildBrowser、Cordova 1.7.0、jQueryMobile 1.0.1、iOS 5.1

> ID：10864740
> 
> 赞同：1
> 
> 时间：2012-06-02T18:09:55.920
> 
> 标签：ios5, jquery-mobile, cordova, phonegap-plugins

我正在开发我的第一个 PhoneGap/Cordova 应用程序并使用 jQueryMobile。我正在尝试使 ChildBrowser 插件正常工作，但在尝试调用时出现标题错误

```
ChildBrowser.install() 
```

它在我的 onDeviceReady 函数中被正确调用，我什至通过添加警报并将该文件的匿名函数包装在 try/catch 中来验证 ChildBrowser.js 文件正在被调用，它似乎没有抛出任何执行过程中的错误。但是 var 在我的 index.html 文件中似乎无效。

大概这里有一些我不知道的“问题”。有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T06:53:05.410

结合来自[http://blog.digitalbackcountry.com/2012/03/installing-the-childbrowser-plugin-for-ios-with-phonegapcordova-1-5/](http://blog.digitalbackcountry.com/2012/03/installing-the-childbrowser-plugin-for-ios-with-phonegapcordova-1-5/)的信息和他的链接帖子[https://github.com/phonegap -starter/ChildBrowserPlugin](https://github.com/phonegap-starter/ChildBrowserPlugin)似乎

```
ChildBrowswer.install(); 
```

步骤不再是必要的。我现在也在使用 jQueryMobile 1.1。用于在下面包含的 ChildBrowser 中启动 google 的示例函数。我按照第一个链接中的 .plist 设置进行操作。

```
 function onLinkClick() {
    window.plugins.childBrowser.onLocationChange = function(loc){ alert("In index.html new loc = " + loc); };
    window.plugins.childBrowser.onClose = function(){alert("In index.html child browser closed");};
    window.plugins.childBrowser.onOpenExternal = function(){alert("In index.html onOpenExternal");};        

    window.plugins.childBrowser.showWebPage('http://www.google.com',
                                    { showLocationBar: true });
    console.log(window.plugins.childBrowser);

} 
```

以及链接本身的完整性

```
<p><a href="#" onclick="onLinkClick()">Click here</a> to open a child browser window to Google</p> 
```

希望这对其他人有所帮助，因为这个问题几天都没有得到解答。

# mysql - 复制 3 个表并更改它们的名称

> ID：10864743
> 
> 赞同：-3
> 
> 时间：2012-06-02T18:10:33.000
> 
> 标签：mysql, import

我需要复制三个表并在同一个 MySQL 数据库中重命名它们。有谁知道我可以执行的语句，还是我需要导出和导入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:15:30.683

答案在 StackOverflow 上，隐藏在数据库重命名操作下（可以通过创建新数据库来重命名数据库，然后“移动”表）。

[https://stackoverflow.com/a/2298602/584490](https://stackoverflow.com/a/2298602/584490) `RENAME TABLE db.table TO db.table;`

来自评论：“我刚刚使用了具有 30 多个表的 InnoDB 数据库，使用 file_per_table 设置，即使有些表是 3+ 百万行，它在 < 1 秒内完成。它似乎只是移动了文件在存储上，而不是做任何更复杂的事情......如果可能的话+2 :)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:19:01.777

您应该查看 SELECT INTO 的 mysql 等效项：http: [//dev.mysql.com/doc/refman/5.0/en/ansi-diff-select-into-table.html](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-select-into-table.html)。

使用新名称创建新表，然后使用上述方法将旧表数据复制到新表中。

# security - 临时凭证中需要令牌，amazon s3

> ID：10864749
> 
> 赞同：0
> 
> 时间：2012-06-02T18:11:37.007
> 
> 标签：security, authentication, amazon-s3, amazon

我查看了 Amazon S3 文档，并意识到当添加永久 IAM 用户时，会生成一个 AccessID 和一个 SecretID。但是，当添加临时用户时，会生成一个 AccessID、一个 SecretID 和一个令牌。该令牌必须作为参数在随后的请求中传递。详细信息可以在[这里](http://docs.amazonwebservices.com/AmazonSimpleDB/latest/DeveloperGuide/UsingTemporarySecurityCredentials_SDB.html)找到。

为什么要使用令牌？它满足的需求/用例是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:08:37.200

[您是否看到有关授予临时访问权](http://docs.amazonwebservices.com/STS/latest/UsingSTS/STSUseCases.html)的用例的 Amazon 文档？

我已经通过音乐服务使用这种临时访问权限来授予 Web 和移动用户对存储在 S3 上的音乐文件的临时访问权限。我为每个 S3 文件的用户生成了一个自定义 URL——该 URL 将立即过期，因此无法与其他人共享。

# android - 我需要为安卓设备的 ARFCN 找到上行和下行频率

> ID：10864750
> 
> 赞同：4
> 
> 时间：2012-06-02T18:11:42.680
> 
> 标签：android, network-programming, telephony

以下是在给定频段、ARFCN 和偏移量的情况下计算某些频段的上行链路和下行链路频率的方法。

GSM 900

向上 = 890.0 + (ARFCN * .2)
向下 = 向上 + 45.0

**我获得了 GSM 类型，我如何获得 UP 和 DOWN frq，哪个 API 将提供，我的目标是获得 ARFCN**

# c# - 添加和读取配置文件

> ID：10864755
> 
> 赞同：60
> 
> 时间：2012-06-02T18:12:10.103
> 
> 标签：c#, configuration-files

我创建了一个`C# console based project`. 在那个项目中，我有一些变量`companyName`，`companyType`例如字符串。

```
companyName="someCompanyName";
companyType="someCompanyType"; 
```

`companyName`我需要创建一个配置文件并从中读取值，然后`companyType`在代码中初始化变量。

1.  如何创建配置文件（或等效文件）？
2.  如何从配置文件中读取？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-06-02T18:17:56.313

1.  将项目添加[`Application Configuration File`](https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/index?redirectedfrom=MSDN)到您的项目（`Right -Click`项目 > 添加项目）。这将创建一个`app.config`在您的项目中调用的文件。

2.  `<add key="keyname" value="someValue" />`通过在`<appSettings>`标签中添加条目来编辑文件。

3.  添加对`System.Configuration`dll 的引用，并使用`ConfigurationManager.AppSettings["keyname"]`.

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-02T18:26:22.043

```
Configuration configManager = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
KeyValueConfigurationCollection confCollection = configManager.AppSettings.Settings;

confCollection["YourKey"].Value = "YourNewKey";

configManager.Save(ConfigurationSaveMode.Modified);
ConfigurationManager.RefreshSection(configManager.AppSettings.SectionInformation.Name); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-02T18:15:07.590

1.  右键单击项目文件 -> 添加 -> 新建项目 -> 应用程序配置文件。这会将一个`app.config`（或`web.config`）文件添加到您的项目中。

2.  上课会[`ConfigurationManager`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)是一个好的开始。您可以使用它从配置文件中读取不同的配置值。

我建议您开始阅读有关[Configuration Files](http://msdn.microsoft.com/en-us/library/1xtk877y.aspx)的 MSDN 文档。

# php - 检查重复的数据库条目

> ID：10864768
> 
> 赞同：1
> 
> 时间：2012-06-02T18:14:22.220
> 
> 标签：php, mysql

我最近一直在做一个表格。它工作正常。我只想向它添加一个调整，如果一个人注册了一个已经在数据库中注册的电子邮件 ID，它会显示一个错误。这是我的整个 php 代码::

```
<?php
      //include the connection file

      require_once("validation.php");

if( isset($_POST['send']) && (!validateName($_POST['name']) || !validateEmail($_POST['email']) || !validatePasswords($_POST['pass1'], $_POST['pass2']) || !validateContact($_POST['contact']) || !validateAge($_POST['age'])) ):?>
            <div id="error">    
                <ul>
                    <? if(!validateName($_POST['name'])):?>
                        <li><strong>Invalid Name:</strong> We want names with more than 3 letters.</li>
                    <? endif?>
                    <? if(!validateEmail($_POST['email'])):?>
                        <li><strong>Invalid E-mail:</strong> Type a valid e-mail please.</li>
                    <? endif?>
                    <? if(!validatePasswords($_POST['pass1'], $_POST['pass2'])):?>
                        <li><strong>Passwords are invalid:</strong> Passwords doesnt match or are invalid!</li>
                    <? endif?>
                    <? if(!validateContact($_POST['contact'])):?>
                        <li><strong>Please enter a valid number.</strong></li>
                    <? endif?>
                    <? if(!validateAge($_POST['age'])):?>
                        <li><strong>Please enter a valid age</strong></li>
                    <? endif?>
                    <? if(!validateWork($_POST['work'])):?>
                        <li><strong>Please enter work</strong></li>
                    <? endif?>
                    </ul>
            </div>
        <?php elseif(isset($_POST['send'])):?>
            <div id="error" class="valid">
                <ul>
                <?php
                require_once('connection.php'); 
                $query = "INSERT INTO employee (name, password, email, contact, age, gender, location, skill, work) VALUES ";                           
                $query .= "('".$_POST['name']."', '".$_POST['pass1']."', '".$_POST['email']."','".$_POST['contact']."','".$_POST['age']."','".$_POST['gender']."','".$_POST['location']."','".$_POST['skill']."','".$_POST['work']."')";
                // run the query
                mysql_query($query);?>
                <li><strong>Congratulations!</strong> You have been successfully registered!</li>
                </ul>
            </div>
    <?php endif?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:17:47.843

您可以给电子邮件字段一个`UNIQUE`约束，这样就不会有重复。在这种情况下，`INSERT`查询将失败，您的查询将返回`false`。

```
if (!mysql_query($query)) {
    // Error, email already exists, no data was inserted
} else {
    // Successfully inserted row, print success message.
} 
```

`INSERT`查询实际上**会失败**，而不仅仅是返回 0 行已修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T18:35:09.637

首先，让您的**电子邮件**与众不同：

```
CREATE TABLE employee { ..., UNIQUE KEY theemail (email) }   # in create table 
```

或通过查询：

```
ALTER TABLE employee ADD UNIQUE KEY theemail (email);   # via console etc. phpmyadmin 
```

然后，您可以像上面@sachleen 所说的那样检查 mysql_affected_rows ：

```
$query = "INSERT INTO employee (name, password, email, contact, age, gender, location, skill, work) VALUES ";                           
$query .= "('".$_POST['name']."', '".$_POST['pass1']."', '".$_POST['email']."','".$_POST['contact']."','".$_POST['age']."','".$_POST['gender']."','".$_POST['location']."','".$_POST['skill']."','".$_POST['work']."')";
$result = mysql_query($query);
$affected_rows = ($result ? mysql_affected_rows($result) : 0);
if ($affected_rows==0) {
   // fail
} 
```

更简单地说：

```
$result = mysql_query($query);
if (!$result) {
   // fail
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T19:34:18.093

DDL：

```
ALTER TABLE employee ADD UNIQUE KEY idx_email (email); 
```

QUERY：不变，使用您的查询。

PHP层：

```
$query = "...";
try {
    mysql_query($query);
} catch(Exception $ex) {
    if (mysql_errno() == 1062) {
        throw new Exception('The email you used exists already');
    } else {
        throw $ex;
    }
} 
```

每当唯一键被破坏时，都会引发 1062 错误。由于唯一的电子邮件字段，我们需要捕获它，但也可能因为您破坏了主键或另一个我们忽略存在的唯一字段而引发它。您将不得不修改此代码，以防您认为在此查询期间某些其他唯一约束也可能会中断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T19:40:06.783

所有答案都建议向表中添加索引，但由于电子邮件是文本输入，因此根据您的数据库，索引可能会变得非常大。我会从一开始就最多在 5 个符号上添加一个索引，然后查询特定的电子邮件（从而将唯一性检查移动到 php 端），而不是在整个列上添加索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T19:53:51.350

首先，我不会`$_POST['name']`直接在查询中使用。这是开放的[sql 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。所以将它包装在[mysql_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)中。*除非这是不会在任何地方使用的“玩代码”。*

要进行独特的电子邮件验证，请`Unique`对电子邮件字段应用约束，如前所述。但在插入新行之前，请执行如下查询：`'select email from employee where email = '. mysql_escape_string($_POST['email'])`. 然后检查此查询是否返回任何内容。如果返回的行数大于零，则此电子邮件已被占用。否则，我们可以根据您已有的插入查询插入新行。

另一件事，将您的表单代码、验证和数据库代码分开。就像添加将检查所有表单条目的函数 Validate_form() 一样。如果有错误，返回一个包含所有描述的问题的字符串。如果没有错误，则返回 null。此 validate_form 可能包含用于检查现有电子邮件的代码，并提供错误文本以防电子邮件已被占用。

因此，如果 validate_form() 没有检测到任何错误，则运行插入查询。

# grails - groovy 和 grails 的编辑器？

> ID：10864770
> 
> 赞同：21
> 
> 时间：2012-06-02T18:14:34.217
> 
> 标签：grails, groovy, syntax-highlighting, text-editor

是否有任何像 notepad++ 这样的 groovy
编辑器或任何支持 .groovy 突出显示的编辑器。
请帮助提供链接和名称。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-29T18:24:02.933

您在问题中提到了 NotePad++。如果您想在 NotePad++ 中突出显示 Groovy 语法，请从以下网址下载用户定义的语言文件

~~[http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=User_Defined_Language_Files](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=User_Defined_Language_Files)~~ [http://docs.notepad-plus-plus.org/index.php?title=User_Defined_Language_Files](http://docs.notepad-plus-plus.org/index.php?title=User_Defined_Language_Files)

并将其添加到安装目录。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-02T18:19:23.563

[IntelliJ](http://www.jetbrains.com/idea/)有很好的[Groovy 和 Grails 支持](http://www.jetbrains.com/idea/features/groovy_grails.html)；免费社区版[不支持 Grails](http://www.jetbrains.com/idea/features/editions_comparison_matrix.html)。

[Sublime Text 2](http://www.sublimetext.com/2)是我目前最喜欢的跨平台编辑器。AFAIK 它没有特定于 GSP 的模式，但是 (a) 确实有 JSP，并且 (b) 是可定制的。它使用 TextMate 包、Groovy 和 Grails 可用：

*   [Groovy 捆绑包](https://github.com/textmate/groovy.tmbundle)
*   [Grails 捆绑包](https://github.com/textmate/groovy-grails.tmbundle)
*   [Sublime 特定的 Grails](https://github.com/osoco/sublimetext-grails)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-29T15:36:11.560

一个了不起的 IDE 是[STS](http://www.springsource.org/sts) — 由 Springsource 提供支持，基于 Eclipse 和独立的。免费，准备部署（使用专用插件）。我使用专门用于 Groovy 和 Grails 的 GGTS：SpringSource 提供的基于 Eclipse 的免费 IDE。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-02T21:06:31.610

请参阅[http://groovy.codehaus.org/IDE+Support](http://groovy.codehaus.org/IDE+Support)和[http://groovy.codehaus.org/Other+Plugins](http://groovy.codehaus.org/Other+Plugins)

更新：当前有用的页面是：http: [//groovy-lang.org/ides.html](http://groovy-lang.org/ides.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-04T20:31:47.983

猜猜什么[sublime](http://www.sublimetext.com/)对 groovy 有很大的支持。这不是 IDE，它只是一个文本编辑器

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-31T16:18:15.007

Vim/gVim 有 Groovy 突出显示，如果你想踢它老派。

# haskell - 在 Haskell 中搜索玫瑰树

> ID：10864771
> 
> 赞同：3
> 
> 时间：2012-06-02T18:15:04.373
> 
> 标签：haskell

我正在尝试编写一个函数来搜索玫瑰树中的给定元素并返回它的位置。

当我向您展示我已经得到的东西时，可能会更清楚：

给定具有定义的树：

数据树文本 = 节点值 [树值]

例如：

```
test = Node "1" [
          Node "11" [
               Node "111" [], 
               Node "112" [
                  Node "1121" [], Node "1122" [], Node "1123" []
               ]
          ], 
          Node "12" []
      ]

            1
      11         12
111      112    
     1121 1122 1123 
```

我正在寻找功能搜索：

```
search :: String -> Tree String -> [Integer] 
```

搜索 1123 测试 -> 应返回 [1,2,3]
- 1=11 的第一个子树 -> 11=112 的第二个子树，112=1123 的第三个子树

我知道如何遍历树，

```
display (Node v xs) = v ++ concatMap display xs 
```

但是不知道如何为子树数组的每个元素分配整数值，并另外从树的上部到下部递归地传递它。你们能指导我在哪里/如何寻找解决方案吗？我对 Haskell 很陌生..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T18:26:44.943

最简单的方法是让函数首先返回具有所需数据的节点的所有路径列表（我想，树中最多应该只有一个，但这没关系），然后使用第一个：

```
searchList :: (Eq a) => a -> Tree a -> [[Integer]]
searchList val (Node dat subs)
    | val == dat = [[]]  -- empty path
    | otherwise  = concat [map (c:) (searchList val t) | (c,t) <- zip [1 .. ] subs]

search :: Eq a => a -> Tree a -> [Integer]
search val t = case searchList val t of
                 (p:_) -> p
                 _ -> error "Value not found" 
```

如果 Daniel Wagner 的怀疑是正确的并且您的树是尝试的，那么您可以更有效地搜索，但原理保持不变，但是，由于我们现在知道我们要么有一个节点具有所需的数据，要么没有，结果更合适的是`Maybe [Integer]`：

```
import Data.List (isPrefixOf)
import Control.Monad -- for the MonadPlus instance of Maybe

searchTrie :: String -> Tree String -> Maybe [Integer]
searchTrie target (Node val subs)
    | val == target = Just []
    | val `isPrefixOf` target = case dropWhile smaller (zip [1 .. ] subs) of
                                  ((c,t):_) -> fmap (c:) $ searchTrie target t
                                  _ -> Nothing
    | otherwise = Nothing
      where
        smaller (_,Node v _) = v < take (length v) target 
```

# qt - QML：Symbian 设备上的文本元素和抗锯齿

> ID：10864772
> 
> 赞同：3
> 
> 时间：2012-06-02T18:15:06.253
> 
> 标签：qt, fonts, symbian, qml, antialiasing

我正在使用 Symbian^3 Qt 4.7.3 开发一个简单的程序。用户界面使用 QML 构建并包含文本元素。我使用 FontLoader 加载自定义字体并使用诺基亚 500 作为测试设备。

在模拟器 (Mac) 中，文本渲染看起来很棒……</p>

[http://korkalainen.net/text_qt_simulator_mac.jpg](http://korkalainen.net/text_qt_simulator_mac.jpg)

…但在诺基亚 500 中，抗锯齿看起来像这样（在我看来这很糟糕）：

[http://korkalainen.net/text_nokia500.jpg](http://korkalainen.net/text_nokia500.jpg)

有什么方法可以改进或更改设备上使用的抗锯齿设置？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:23:02.007

我也有这个问题。唯一的解决方案是返回使用设备上预装的字体。

# php - 有没有办法用 PHP 配置文件而不是 YAML 下载 Symfony 2？

> ID：10864774
> 
> 赞同：1
> 
> 时间：2012-06-02T18:15:12.203
> 
> 标签：php, symfony, yaml

我已经搜索了高低，但我没有看到一个明确的方法来做到这一点。我只是希望将 config 文件夹中的所有 YAML 文件替换为 PHP 文件。我在哪里可以找到这个？或者有关于它的文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:43:29.190

我不相信有人做过这样的分发。标准版混合使用 YAML、注释和 XML（主要是 YAML）。不过，YAML 非常简单和直观。我认为将其用于标准配置不会有问题。您仍然可以将 PHP 用于您自己创建的任何包。此外，大多数包使用 YAML 作为其默认值，因此仅使用它们而不是将它们的示例转换为 PHP 可能会更快。

# objective-c - 从 pdf 上下文中获取 pdf 数据

> ID：10864777
> 
> 赞同：0
> 
> 时间：2012-06-02T18:15:33.733
> 
> 标签：objective-c, ios, cgcontext

我对上下文世界很陌生。

1.  我使用以下方法创建一个 pdfcontext：

    ```
    NSMutableData* pdfData = [ [[NSMutableData alloc] initWithLength:1000] retain];
    CGRect bounds = (CGRectMake(100, 100, 100, 100));
    NSDictionary* documentInfo = nil;
    UIGraphicsBeginPDFContextToData (pdfData,
                                 bounds,
                                 documentInfo);
    UIGraphicsBeginPDFPage(); 
    ```

2.  然后我用不同的类画它

3.  然后我发出

    ```
    UIGraphicsEndPDFContext(); 
    ```

当我画完它。

我不清楚的是如何从上下文中获取 pdfData，以便我可以将其作为 NSData 发送回我的调用者。任何帮助表示赞赏。我假设在我的方法中 pdfData 被保留在上下文中。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:23:10.290

当您调用 时`UIGraphicsEndPDFContext`，它会将 PDF 数据放入`pdfData`您提供的对象中。由于 an`NSMutableData`是 的子类`NSData`，因此您可以将其返回给调用者。没有必要做任何其他事情。

另外，不要这样做：

```
NSMutableData* pdfData = [[[NSMutableData alloc] initWithLength:1000] retain]; 
```

alloc/init 返回一个保留对象。没有必要再次保留它。此外，无需指定数据的大小——它会自动扩展。所以只需这样做：

```
NSMutableData* pdfData = [[NSMutableData alloc] init]; 
```

# ios - 推送通知突然停止

> ID：10864779
> 
> 赞同：3
> 
> 时间：2012-06-02T18:15:46.233
> 
> 标签：ios, apple-push-notifications

我是 iPhone 应用程序开发的新手。我有带有推送通知的应用程序，在安装到我的4S（ios 5.0.1）中进行测试后它工作了一天半后，它突然停止接收警报消息。经过一番研究，我在手机中加载了 APS/PC 日志配置文件，现在我看到以下日志：

```
<APSCourier: 0xe60c910>: Connected to courier 1-courier.sandbox.push.apple.com. (17.172.238.205)

Jun  2 10:55:40 unknown apsd[60] <Warning>: <APSCourier: 0xe60c910>: Sending connect message with token '<2dd3393d 1d1e58ef 1692ba6b 64f6fa72 efb88099 c48375e5 ac9d6979 xxxxxxxx>'

Jun  2 10:55:41 unknown apsd[60] <Warning>: <APSCourier: 0xe60c910>: Stream error occurred for <APSTCPStream: 0x114b00>: Error Domain=NSOSStatusErrorDomain Code=-9833 "The operation couldn’t be completed. (OSStatus error -9833.)" UserInfo=0xe60e270 {}

Jun  2 10:55:41 unknown apsd[60] <Warning>: <APSCourier: 0xe60c910>: Disconnected in response to connection failure. (Consecutive failures: 14)

Jun  2 10:55:41 unknown apsd[60] <Warning>: Advising client to enter reconnect mode in response to a connection failure since currently in reconnect mode 
```

我确实重建了应用程序并重新安装到手机中，重新发布了新的配置文件，在 iPhone 中重置了网络设置，通过飞艇发送了测试令牌，没有报告错误，甚至直接从我自己的服务器向 APNS 发送了请求命令，没有错误，然后关闭/on 手机中应用程序的通知中心，这些操作似乎无法解决问题。任何人都知道如何解决这个问题？

# ajax - 如何通过 ajax 请求 fields_for 部分？

> ID：10864781
> 
> 赞同：2
> 
> 时间：2012-06-02T18:15:54.147
> 
> 标签：ajax, ruby-on-rails-3, forms, nested-forms, formbuilder

我有一个嵌套表单模型

```
<%= simple_form_for(@product, :html => { :multipart => true })  do |f| %>
 <%= f.input :name %>
 #... and some other

 <%= f.simple_fields_for :productgroups do |builder| %>
   <%= render 'form_productgroup', { :f => builder } %>
 <% end %>

<% end %>

## partial-level-1: form_productgroup
<%= f.input :extrapercentage %>
#... and some other

<%= f.simple_fields_for :productmaterials do |builder| %>
  <%= render 'form_productmaterial', { :f => builder } %>
<% end %>

## partial-level-2: form_productmaterial
<%= f.input :price %>
#... and some other 
```

=> 服务器端一切正常，但我需要通过 ajax 添加记录，因为每个产品组或产品材料都属于特定类型

现在的问题：

如何创建一个返回新材料形式的控制器动作？

此代码返回 f 不存在的错误：

```
def new_productgroup
  @product = Product.find(params[:id])
  @productgroup = Productgroup.new(:product_id => @product.id, :materialgroup_id => params[:materialgroup_id])
  render "form_productgroup", { :f => ???? }
end 
```

请帮我！

# actionscript-3 - AS3 - 计分器广告块的下降

> ID：10864782
> 
> 赞同：0
> 
> 时间：2012-06-02T18:16:35.077
> 
> 标签：actionscript-3

我正在使用 Flash Pro CS6 制作游戏，您需要在其中避免掉落的立方体。当您避免使用 une cube (cube_1) 时，您会得到一分。我制作了一个 scoreCounter texfield 并将其设置为动态文本。我不知道如何告诉 Flash 影片剪辑“cube_1”的动画完成后，它应该添加了一个点，所以我做了一个 if 语句，取决于立方体的 Y 坐标（> 比舞台 Y ），你得到一个点。问题是我没有任何意义！

代码是这样的：

```
timer.addEventListener(TimerEvent.TIMER, cubeFall);

function cubeFall(t:TimerEvent) {
time++;
if (time == 3) {
    cube_1.play();
} else if (time == 10) {
    cube_2.play();
} else if (time == 20) {
    cube_3.play();
} else if (time == 30) {
    cube_4.play();
} else if (time == 35) {
    cube_5.play();
} else if (time == 40) {
    cube_6.play();
} else if (time == 50) {
    cube_7.play();
} else if (time == 60) {
    cube_8.play();
}

// Add Score

else if (cube_1.y > 480 || cube_2.y > 480 || cube_3.y > 480 || cube_4.y > 480 || cube_5.y > 480 || cube_6.y > 480 || cube_7.y > 480 || cube_8.y > 480 ) {
    score++;
    scoreCounter.text = "Score:  " + score;
} 
```

}

# javascript - Javascript RegExp 非捕获组

> ID：10864783
> 
> 赞同：11
> 
> 时间：2012-06-02T18:16:35.037
> 
> 标签：javascript, regex, capturing-group, regex-group

我正在编写一组正则表达式来将 CSS 选择器转换为 id 和类数组。

例如，我希望 '#foo#bar' 返回 ['foo', 'bar']。

我一直在努力实现这一目标

```
"#foo#bar".match(/((?:#)[a-zA-Z0-9\-_]*)/g) 
```

但是当非捕获前缀 ?: 应该忽略 # 字符时，它会返回 ['#foo', '#bar']。

有没有比对每个返回的字符串进行切片更好的解决方案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-02T18:29:51.097

您可以使用`.replace()`or`.exec()`在循环中构建一个数组。

与`.replace()`：

```
var arr = [];
"#foo#bar".replace(/#([a-zA-Z0-9\-_]*)/g, function(s, g1) {
                                               arr.push(g1);
                                          }); 
```

* * *

与`.exec()`：

```
var arr = [],
    s = "#foo#bar",
    re = /#([a-zA-Z0-9\-_]*)/g,
    item;

while (item = re.exec(s))
    arr.push(item[1]); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T18:19:40.050

它匹配`#foo`并且`#bar`因为*外部*组（＃1）正在捕获。内部*组*(#2) 不是，但这可能不是您要检查的。

如果您没有使用全局匹配模式，则立即修复将改为使用`(/(?:#)([a-zA-Z0-9\-_]*)/`。

使用全局匹配模式，结果不能只在一行中得到，因为[`match`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)行为不同。仅使用正则表达式（即没有字符串操作），您需要这样做：

```
var re = /(?:#)([a-zA-Z0-9\-_]*)/g;
var matches = [], match;
while (match = re.exec("#foo#bar")) {
    matches.push(match[1]);
} 
```

[看到它在行动](http://jsfiddle.net/fpvrv/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T18:32:25.050

我不确定你是否可以使用 match() 来做到这一点，但你可以使用 RegExp 的 exec() 方法来做到这一点：

```
var pattern = new RegExp('#([a-zA-Z0-9\-_]+)', 'g');
var matches, ids = [];

while (matches = pattern.exec('#foo#bar')) {
    ids.push( matches[1] ); // -> 'foo' and then 'bar'
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T18:44:04.037

您可以使用否定的前瞻断言：

```
"#foo#bar".match(/(?!#)[a-zA-Z0-9\-_]+/g);  // ["foo", "bar"] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-02T18:31:16.743

不幸的是，Javascript RegExp 中没有后向断言，否则你可以这样做：

```
/(?<=#)[a-zA-Z0-9\-_]*/g 
```

除了将它添加到一些新版本的 Javascript 之外，我认为使用`split`后处理是你最好的选择。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-19T00:50:55.360

几年前 mVChr 提到的后向断言被[添加到 ECMAScript 2018](https://github.com/tc39/proposal-regexp-lookbehind)中。这将允许您这样做：

`'#foo#bar'.match(/(?<=#)[a-zA-Z0-9\-_]*/g)`（返回`["foo", "bar"]`）

（也可以使用否定的lookbehind：用于`(?<!#)`匹配除# 之外的任何字符，而不捕获它。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-12T21:04:22.017

MDN 确实记录了[“使用带有全局 /g 标志的 match() 时忽略捕获组”](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll#Better_access_to_capturing_groups)，并建议使用`matchAll()`. `matchAll() isn't available on Edge or Safari iOS, and you still need to skip the complete match (including the`#`）。

一个更简单的解决方案是切掉前导前缀，如果您知道它的长度 - 在这里，1 表示`#`.

```
const results = ('#foo#bar'.match(/#\w+/g) || []).map(s => s.slice(1));
console.log(results);
```

`[] || ...`如果没有匹配，则该部分是必需的，否则`match`返回 null，并且`null.map`将不起作用。

```
const results = ('nothing matches'.match(/#\w+/g) || []).map(s => s.slice(1));
console.log(results);
```

# matlab - 划分地理区域

> ID：10864786
> 
> 赞同：2
> 
> 时间：2012-06-02T18:17:08.617
> 
> 标签：matlab, geospatial, geography, gis

我有一个由左下角和右上角坐标定义的地理区域。我如何将此区域划分为 20x20km 的区域。我的意思是实际上地球的形状不是扁平的，而是圆形的。边界框只是一个近似值。它甚至不是真正意义上的矩形。这只是一个假设。假设左下坐标由 x1,y1 给出，右上坐标由 x2,y2 给出，y1 处 x1 到 x2 的长度与 y2 处 x1 到 x2 之间的长度不同。我该如何克服这个问题

实际上，我必须使用 matlab 的 meshgrid 函数为这个区域创建一个空间网格网格。这样网格的面积为 20x20km。

```
meshgrid(x1:deltaY:x2,y1:deltaX:y2) 
```

如您所见，我只能拥有一个 deltaX 和一个 deltaY。我想选择 deltaX 和 deltaY 以便增量创建大小为 20x20km 的网格。然而，这个 deltaX 和 deltaY 应该根据位置而变化。有什么建议么？

我的意思是说 deltaX=del1。然后点 (x1,y1) 到 (x1,y1+del1) 之间的距离为 20 公里。但是当我测量点 (x2,y1) 到 (x2, y1_del1) 之间的距离时，距离小于 20 公里。上面的 meshgrid 函数确实创建了网格。但距离并不一致。任何想法如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:11:37.187

请记住，地球表面 20 公里的距离非常短，大​​约为 0.01 弧度 - 因此，对于任何非科学领域，您所看到的区域都将近似为平坦的。假设它是科学的...

要在 meshgrid 中获得除单调步骤之外的其他内容，您应该创建一个函数，该函数将您想要的 (x,y) 作为其输入，并将其相对于您选择的单位中的 (x_0,y_0) 和 (x_max,y_max) 映射。这是一个内联函数，演示了将函数用于网格网格步骤的想法

```
step=inline('log10(x)');
[x,y]=meshgrid(step(1:10),step(1:10));
image(255*x.*y)
colormap(gray(255)) 
```

那么你如何确定函数应该是什么？如果没有更多关于您的数据集是什么样子、您如何与之交互以及您的准确性要求是什么的更多信息，我们很难准确地回答这个问题。如果您可以访问每个点的实际位置，则应一次更改一个维度（例如，如果您的数据网格与您的纬度网格对齐）并使用模型选择技术（akaike/bayes 标准）进行曲线拟合为您的数据找到最佳功能。

# java - 无法解析为类型

> ID：10864805
> 
> 赞同：1
> 
> 时间：2012-06-02T18:19:38.717
> 
> 标签：java

我有一个这样读取的服务接口

```
package services;

import domain.Items;

public interface IItemsService extends IService {

public final String NAME = "IItemsService";

/** Places items into the database */
public void storeItem(Items items);

/** Retrieves items from the database
 * 
 * @param category
 * @param amount
 * @param color
 * @param type
 * @return
 * @throws ClassNotFoundException 
 */
public Items getItems (String category, float amount, String color, String type) throws ItemNotFoundException, ClassNotFoundException;

} 
```

还有一个看起来像这样的工厂...

```
package services;
public class Factory {

public Factory(){}

@SuppressWarnings("unchecked")
public IService getService(String name) throws ServiceLoadException {
    try {
        Class c = Class.forName(getImplName(serviceName));
        return (IService)c.newInstance();
    } catch (Exception e) {
        throw new ServiceLoadException(serviceName + "not loaded");
    }
}

private String getImplName (String name) throws Exception {
    java.util.Properties props = new java.util.Properties();
        java.io.FileInputStream fis = new java.io.FileInputStream("properties.txt");
            props.load(fis);
                fis.close();
                return props.getProperty(serviceName);
}
} 
```

这应该很简单 - 但我不断收到两个错误 - IService 无法解析为类型（在工厂和服务上），并且 serviceName 也无法解析为工厂中的变量错误。我知道我错过了一些简单的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:26:11.133

那么第二个错误很简单：*没有一个名为`serviceName`*. 如果你认为有，请指出它的声明。我怀疑您*打算*使用参数 - 在这种情况下，只需更改参数名称以匹配您尝试使用的名称：

```
public IService getService(String serviceName) throws ServiceLoadException 

...

private String getImplName (String serviceName) throws Exception 
```

这是一个非常简单的错误——您应该考虑一下您的诊断有哪些让您在自己解决问题时感到失望。（顺便说一句，您还应该更明智地缩进您的代码。）

至于`IService`失踪 - 我们不知道`IService`应该在哪里声明，这使得在这方面很难帮助你......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T18:26:49.083

关于类型错误：如果`IService`不在包`services`中，则`IItemService`无法访问它，您将需要`import some.package.name.IService`.

第二个答案很简单：在`getService`and`getImplName`方法中，参数名为`name`。在方法主体中，您将其称为`serviceName`. 您可能应该更改`name`为`serviceName`每个。

另一方面，如果您尝试访问实例变量，请注意，在 Java 中，您必须先声明所有实例变量，然后才能访问（读取/写入）它们。您需要像这样修改类：

```
public class Factory {

    private String serviceName;

    public Factory () {}

    // other code
} 
```

# c# - 接口中的静态

> ID：10864808
> 
> 赞同：2
> 
> 时间：2012-06-02T18:19:46.840
> 
> 标签：c#, serialization, interface, model, ado

我想编写自己的序列化（xml 和二进制不适合我，我想要“更 ADO”的方式）

所以我定义了一个接口：

```
interface ISerializeData
{
    DataTable GetDataSchema();
    DataTable SerializeData();
    object DeserializeData(DataTable data);
} 
```

现在我不想创建一个对象的实例来让我获取该对象的架构。

并且： DeserializeData 应该返回一个实例，而不是使用实例。因此我认为它也应该是静态的。（好的，它可以从数据表中初始化一个实例......）

有任何想法吗？我该如何建模？接口中不允许使用静态，并且我的类已经从另一个抽象基类继承。

任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:22:50.317

这个问题就是为什么其他序列化程序使用属性，因为它们允许您提供有关如何存储类的元数据，而不会强迫您处理类本身的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T21:09:15.693

也许我错了，但这实际上更像是实用程序类的任务。以`DeserializeData`为例。在代码中的某处，您决定要构建哪种类型。在您提议的代码中，您将选择类型并调用其静态方法。怎么办？每种类型都有自己的代码来进行序列化吗？您可能最终会创建一些类来完成所有工作，以保持 DRY。因此，您不妨`DeserializeData`在实用程序类中使用一种方法，例如：

```
public static T DeserializeData(DataTable data)
    where T : new
{
    var T = new T();
    .... // Set properties
} 
```

在这种方法中，您可能会获得数据模式。

也许`SerializeData()`可以是一个实例方法，但这也会将它的工作委托给某个实用程序类。

如果我完全误解了你的问题，请告诉我。

# android - Drawable 不在画布上绘制

> ID：10864810
> 
> 赞同：6
> 
> 时间：2012-06-02T18:19:58.243
> 
> 标签：android, android-canvas

我有一个自定义视图和一个要在其上绘制的可绘制对象，但由于某种原因，可绘制对象并未在视图的画布上绘制自身。以下是可绘制对象的创建方式：

```
int[] gradientColors=new int[] { 0xFFFF0000,0xFFFFFF00,0xFF00FF00,
        0xFF00FFFF,0xFF0000FF,0xFFFF00FF,0xFFFF0000 };
gradient=new GradientDrawable(GradientDrawable.Orientation.LEFT_RIGHT,
        gradientColors); 
```

这是`onDraw`功能：

```
@Override protected void onDraw(Canvas canvas)
{
    super.onDraw(canvas);
    int width=canvas.getWidth();
    int height=canvas.getHeight();
    gradientBitmap=Bitmap.createBitmap(width,height,Bitmap.Config.ARGB_8888);
    canvas.setBitmap(gradientBitmap);
    gradient.setBounds(0,0,width,height);
    gradient.draw(canvas);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T18:54:59.137

尝试查看此代码，它可以帮助您学习如何处理自定义视图的绘图：

```
public class MainActivity extends Activity {
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(new SampleView(this));
        }

           private static class SampleView extends View {
                private Rect    mRect;
                private GradientDrawable mDrawable;

                public SampleView(Context context) {
                    super(context);
                    setFocusable(true);

                    mRect = new Rect(0, 0, 220, 120);

    /*              GradientDrawable.Orientation  BL_TR  draw the gradient from the bottom-left to the top-right   
                      BOTTOM_TOP  draw the gradient from the bottom to the top   
                      BR_TL  draw the gradient from the bottom-right to the top-left   
                      LEFT_RIGHT  draw the gradient from the left to the right   
                      RIGHT_LEFT  draw the gradient from the right to the left   
                      TL_BR  draw the gradient from the top-left to the bottom-right   
                      TOP_BOTTOM  draw the gradient from the top to the bottom   
                      TR_BL  draw the gradient from the top-right to the bottom-left   
    */

                    mDrawable = new GradientDrawable(GradientDrawable.Orientation.LEFT_RIGHT,
                                                     new int[] { 0xFFFF0000, 0xFF00FF00,
                                                         0xFF0000FF });
                    mDrawable.setShape(GradientDrawable.RECTANGLE);
                    mDrawable.setGradientRadius((float)(Math.sqrt(2) * 60));
                }

                static void setCornerRadius(GradientDrawable drawable, float r0,
                                           float r1, float r2, float r3) {
    /*              setCornerRadii
                    Specify radii for each of the 4 corners. For each corner, 
                    the array contains 2 values, [X_radius, Y_radius]. 
                    The corners are ordered top-left, top-right, bottom-right, 
                    bottom-left 
    */
                    drawable.setCornerRadii(new float[] { r0, r0, r1, r1,
                                                          r2, r2, r3, r3 });
                }

                @Override protected void onDraw(Canvas canvas) {

                    mDrawable.setBounds(mRect);

                    float r = 35;

                    canvas.save();
                    canvas.translate(10, 10);
                    mDrawable.setGradientType(GradientDrawable.LINEAR_GRADIENT);
                    setCornerRadius(mDrawable, r, r, 0, 0);
                    mDrawable.draw(canvas);
                    canvas.restore();

                    canvas.translate(0, mRect.height() + 10);
                    canvas.save();
                    canvas.translate(10, 10);
                    mDrawable.setGradientType(GradientDrawable.RADIAL_GRADIENT);
                    setCornerRadius(mDrawable, 0, 0, r, r);
                    mDrawable.draw(canvas);
                    canvas.restore();

                    canvas.translate(0, mRect.height() + 10);
                    canvas.save();
                    canvas.translate(10, 10);
                    mDrawable.setGradientType(GradientDrawable.SWEEP_GRADIENT);
                    setCornerRadius(mDrawable, 0, r, r, 0);
                    mDrawable.draw(canvas);
                    canvas.restore();

                }
            }
        } 
```

**更新**

```
public class MyView extends View {
    private static int measuredWidth = 300;
    private static int measuredHeight = 300;
    private Rect    mRect;
    private GradientDrawable mDrawable;

    public MyView(Context context) {
        super(context);
        initializeView();

    }

    public MyView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        initializeView();
    }

    private void initializeView() {

        mDrawable = new GradientDrawable(GradientDrawable.Orientation.LEFT_RIGHT,
                new int[] { 0xFFFF0000,0xFFFFFF00,0xFF00FF00,
                0xFF00FFFF,0xFF0000FF,0xFFFF00FF,0xFFFF0000 });
        mDrawable.setShape(GradientDrawable.RECTANGLE);
        mDrawable.setGradientRadius((float)(Math.sqrt(2) * 60));
    }

    public MyView(Context context, AttributeSet attrs) {
        super(context, attrs);
        initializeView();
    }

    @Override protected void onDraw(Canvas canvas) {
        mRect = new Rect(0, 0, measuredWidth, measuredHeight);
        mDrawable.setBounds(mRect);
        canvas.save();
        canvas.translate(10, 10);
        mDrawable.setGradientType(GradientDrawable.LINEAR_GRADIENT);
        //setCornerRadius(mDrawable, r, r, 0, 0);
        mDrawable.draw(canvas);
        canvas.restore();

    } 
```

我为您尝试了这个，它基于您的代码并且可以工作，除了我固定了高度和宽度：

# css - 在 Eclipse 中更改 css 样式表的格式

> ID：10864811
> 
> 赞同：7
> 
> 时间：2012-06-02T18:20:09.027
> 
> 标签：css, eclipse

所以 Eclipse 可以在 Source->Format 下自动格式化我的 css 文件，或者通过点击 Cntl-Shift-F。

当我为单个规则分组选择器时，eclipse 将其格式化如下：

```
.planner th,.planner td {
    border: 1px solid black;
} 
```

我真的希望 Eclipse 在选择器之间添加一个空格以提高可读性，如下所示：

```
.planner th, .planner td {
    border: 1px solid black;
} 
```

有什么方法可以配置 Eclipse 来做到这一点？我正在运行 Eclipse Indigo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:22:39.503

解决问题的最简单方法是像这样运行查找/替换命令。

1.  在 CSS 文件上打开文件/替换 ( `Ctrl`+ )。`F`
2.  寻找：`,\.`
3.  代替：`, \.`
4.  选中该`regular expressions`框。
5.  单击`Replace All`。

或者，如果您的需求无法通过 CSS 编辑器进行配置（似乎是这样），那么您将不得不为它制作一个插件。

CSS 编辑器位于此处：

```
Preferences > Web > CSS Files > Editor 
```

如果您正在考虑制作插件，请查看软件包`org.eclipse.jdt.core.formatter`以获取帮助。

更多信息在这里：

*   [Eclipse CSS 编辑器选项](http://www.myeclipseide.com/htmlpages-func-display-pid-305.html)
*   [Eclipse 插件教程](http://www.eclipse.org/articles/Article-Your%20First%20Plug-in/YourFirstPlugin.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T07:52:28.483

Eclipse的[Aptana Studio](http://www.aptana.com/)插件有一个根据您的需要预先配置的格式化程序。

我建议使用它，因为它极大地简化了 Web 开发人员的开发过程（各种漂亮的功能，如内置 Git 集成、常见 JavaScript 库的代码辅助、集成 FTP 客户端、嵌入式 AJAX 服务器 [Jaxer]，不错主题包括，等等，等等......）。

**参考：**

*   [Aptana Studio 下载页面](http://www.aptana.com/products/studio3/download)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:24:38.683

您可以添加 CSS 类宏规则甚至宏，它在文本文件中效果很好，但在 Java 编辑器中效果不佳。

但是您的最终答案是在 ICSSStyleSheet 中添加/更改规则，这里有一个解释：http://lab.benstucki.net/flashsac/doc/org/w3c/css/dom/ICSSStyleSheet.html#insertRule [(](http://lab.benstucki.net/flashsac/doc/org/w3c/css/dom/ICSSStyleSheet.html#insertRule) ) <--包括那些括号。

# c++ - C++ 链接失败，未定义引用

> ID：10864813
> 
> 赞同：3
> 
> 时间：2012-06-02T18:20:49.190
> 
> 标签：c++, gcc, linker

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)
> [与字符串 (GCC)](https://stackoverflow.com/questions/614233/undefined-reference-to-function-template-when-used-with-string-gcc)
> [C++ 模板一起使用时对函数模板的未定义引用，未定义引用](https://stackoverflow.com/q/648900/)

我觉得我缺少链接 C++ 项目的东西。我不确定问题出在标头源中还是包含在内，因此我制作了一个最小的代码示例来演示它。

主模块 minmain.cpp：

```
 #include <stdio.h>
 #include <vector>
 #include <string>
 #include "nodemin.h"

 using namespace std;

 int main()
 {
     // Blist libs are included
     Node<int>* ndNew = ndNew->Root(2);

     return 0;
 } 
```

头文件 nodemin.h：

```
 #ifndef NODETEMP_H_
 #define NODETEMP_H_

 using namespace std;

 template<class T>
 class Node
 {
 protected:

    Node* m_ndFather;
    vector<Node*> m_vecSons;
    T m_Content;

    Node(Node* ndFather, T Content);

 public:

     // Creates a node to serve as a root
         static  Node<T>* Root(T RootTitle);
 };

 #endif 
```

节点模块 nodemin.cpp：

```
 #include <iostream>
 #include <string.h>
 #include <vector>
 #include "nodemin.h"

 using namespace std;

 template <class T>
 Node<T>::Node(Node* ndFather, T Content)
 {
    this->m_ndFather = ndFather;
    this->m_Content = Content;
 }

 template <class T>
 Node<T>* Node<T>::Root(T RootTitle) { return(new Node(0, RootTitle)); } 
```

编译行：

```
 #g++ -Wall -g mainmin.cpp nodemin.cpp 
```

输出：

```
 /tmp/ccMI0eNd.o: In function `main':
 /home/******/projects/.../src/Node/mainmin.cpp:11: undefined reference to`Node<int>::Root(int)'
 collect2: error: ld returned 1 exit status 
```

我尝试编译成对象，但链接仍然失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:27:51.753

添加`template class Node<int>;`到 nodemin.cpp：

```
#include <iostream>
#include <string.h>
#include <vector>
#include "nodemin.h"

using namespace std;

template <class T>
Node<T>::Node(Node* ndFather, T Content)
{
   this->m_ndFather = ndFather;
   this->m_Content = Content;
}

template <class T>
Node<T>* Node<T>::Root(T RootTitle) { return(new Node(0, RootTitle)); }

template class Node<int>; 
```

# java - Java：Joptionpane 消息对话框未打开

> ID：10864815
> 
> 赞同：1
> 
> 时间：2012-06-02T18:21:26.043
> 
> 标签：java, message, calculator

我决定制作一个简洁的小计算器程序，但是现在，当我按下计算并运行计算脚本时，它并没有打开一个说明答案的框。我找不到问题。谁能告诉我？

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Gui extends JFrame{

    private JTextField text;
    private JTextField text2;
    private JRadioButton plus;
    private JRadioButton divide;
    private JRadioButton multiply;
    private JRadioButton subtract;
    private ButtonGroup group;
    private JButton button;
    private int str = 1;
    private String txt;
    private String txt2;
    private int num1;
    private int num2;
    private int ans;

    public Gui(){

        super("Calculator");
        setLayout(new FlowLayout());

        text = new JTextField(10);
        text2 = new JTextField(10);
        add(text);
        add(text2);
        plus = new JRadioButton("Add", true);
        divide = new JRadioButton("Divide", false);
        multiply = new JRadioButton("Multiply", false);
        subtract = new JRadioButton("Subtract", false);
        group = new ButtonGroup();
        group.add(plus);
        group.add(divide);
        group.add(multiply);
        group.add(subtract);
        add(plus);
        add(divide);
        add(multiply);
        add(divide);
        add(subtract);
        button = new JButton("Calculate");
        add(button);

        plus.addItemListener(
                new ItemListener(){
                    public void itemStateChanged(ItemEvent event){
                        str = 1;
                        System.out.println(str);
                    }
                }
            );
        divide.addItemListener(
                new ItemListener(){
                    public void itemStateChanged(ItemEvent event){
                        str = 2;
                        System.out.println(str);
                    }
                }
            );
        multiply.addItemListener(
                new ItemListener(){
                    public void itemStateChanged(ItemEvent event){
                        str = 3;
                        System.out.println(str);
                    }
                }
            );
        subtract.addItemListener(
                new ItemListener(){
                    public void itemStateChanged(ItemEvent event){
                        str = 4;
                        System.out.println(str);
                    }
                }
            );
        HandlerClass handler = new HandlerClass();
        button.addActionListener(handler);

    }

    private class HandlerClass implements ActionListener{
        public void ActionPerformed(ActionEvent event){
                txt = text.getText();
                txt2 = text2.getText();
                num1 = Integer.parseInt(txt);
                num2 = Integer.parseInt(txt2);
                if(str==1){
                    ans=num1+num2;
                }
                if(str==2){
                    ans=num1/num2;
                }
                if(str==3){
                    ans=num1*num2;
                }
                if(str==4){
                    ans=num1-num2;
                }
                JOptionPane.showMessageDialog(null, String.format("Answer: %s", ans));

            }
        }
    } 
```

如果需要，这是运行它的脚本：

```
import javax.swing.JFrame;

public class apples {
    public static void main(String[] args){
        Gui bucky = new Gui();
        bucky.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        bucky.setSize(300,150);
        bucky.setVisible(true);
    }
} 
```

这是我单击“计算”时的错误代码：

线程“AWT-EventQueue-0”java.lang.Error 中的异常：未解决的编译问题：类型 Gui.HandlerClass 必须实现继承的抽象方法 ActionListener.actionPerformed(ActionEvent)

```
at Gui$HandlerClass.actionPerformed(Gui.java:85)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:41:33.240

您正在尝试运行不可编译的代码——**不要这样做！**

而是在编译时修复所有编译问题，然后仅在代码编译良好时运行。

首先：您需要`actionPerformed(...)`正确大写。

下一步：您的 JRadioButtons 上不应有*任何侦听器。*而是检查仅在主计算 JButton 的 ActionListener 中按下了哪个按钮。原因是您不关心用户是否选择了一个 JRadioButton，然后后者改变了主意并选择了另一个，而是您只关心按下计算 JButton 时选择了*哪个JRadioButton。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T18:36:17.690

问题可能出在你的听众身上。您所有的单选按钮都使用`ItemListener`s，这很好，但您的 JButton 也是：使用的标准侦听器`JButton`是`ActionListener`. 如果您将您的更改`ItemListener`为`ActionListener`（并将事件更改为`ActionEvent`），它应该可以工作。

item 事件没有被触发的原因是只有在[被调用](https://stackoverflow.com/a/3709043/732016)[`JButton`时才会触发事件`setSelected`](https://stackoverflow.com/a/3709043/732016)。

**更新**：你的新代码中的错误是你把`ActionPerformed`而不是`actionPerformed`作为方法名称。案件很重要。

**更新 2**：在声明所有变量的地方，添加以下变量：

`private ArrayList<JRadioButton> radioButtons = new ArrayList<JRadioButton>`

`java.util.ArrayList`如果您还没有，您可能需要导入。

然后，在线条下方

```
plus = new JRadioButton("Add", true);
divide = new JRadioButton("Divide", false);
multiply = new JRadioButton("Multiply", false);
subtract = new JRadioButton("Subtract", false); 
```

添加以下内容：

```
radioButtons.add(plus);
radioButtons.add(divide);
radioButtons.add(multiply);
radioButtons.add(subtract); 
```

当您需要检查选择了哪个按钮时，请使用以下代码：

```
for (JRadioButton button : radioButtons) { // Iterate over each button in the list
    if (button.isSelected()) { // If the button is selected...
        // do something
    }
} 
```

* * *

您的其他代码看起来不错，但我建议使用字符串常量（或者更好的是枚举）来管理 +-/* 操作。也就是说`str = "add"`，您应该声明以下枚举，而不是 (et. al.)：

```
private enum OperationType {
    ADD, SUBTRACT, MULTIPLY, DIVIDE;
} 
```

和改变

```
private String str = "add" 
```

至

```
private OperationType op = OperationType.ADD; 
```

这样做的结果是任何键入错误（包括 tpyo 或意外大写）都将导致字符串无效，并且您会得到奇怪的行为。

这也意味着你可以使用一个`switch`语句：而不是使用大量的`if .. else`语句，试试这个：

```
switch (op):
    case ADD:
        // blah
        break;
    case SUBTRACT:
        // blah
        break;
    case MULTIPLY:
        // blah
        break;
    case DIVIDE:
        // blah
        break;
    default:
        System.out.println("Error: unsupported operation");
        // or whatever
} 
```

这通常被认为是更干净的代码，它看起来更好并且更容易维护。

祝你好运！

# jquery - Uploadify浏览器兼容性问题

> ID：10864819
> 
> 赞同：1
> 
> 时间：2012-06-02T18:22:15.980
> 
> 标签：jquery, file-upload, upload, uploadify

我正在使用 uploadify 插件来允许用户将文件上传到我的网站。该脚本在 chrome 中运行良好，但在 ie 和 firefox 中不起作用

```
 $(function() {
    $('#file_upload').uploadify({
     'checkExisting' : 'check-exists.php',
    'buttonText' : 'Select project',
    'fileSizeLimit' : '163840KB',
     'fileTypeDesc' : 'Image Files',
    'fileTypeExts' : '*.zip; *.rar',
        'swf'      : 'uploadify.swf',
        'uploader' : 'uploadify.php',
        'onUploadError' : function(file, errorCode, errorMsg, errorString) {
         $("input[type=submit]").attr("disabled", "disabled");
alert('The file ' + file.name + ' could not be uploaded: ' + errorString);
        },
        'onUploadSuccess' : function(file, data, response) {
            $("input[type=submit]").removeAttr("disabled");
    },

    }); 
```

有什么建议么 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:13:31.340

您发布的代码有一个尾随逗号（最后一个），这可能在某些版本的 IE 中不起作用（[请参阅此问题](https://stackoverflow.com/questions/7246618/trailing-commas-in-javascript)）。

此外，您的括号并非全部关闭。尝试更改`});`为`}) });`

# c - C：NaCl如何创建'PPB_Graphics3D

> ID：10864822
> 
> 赞同：2
> 
> 时间：2012-06-02T18:22:38.843
> 
> 标签：c, webgl, google-nativeclient

在 Native Client 中，如何`PPB_Graphics3D`在 C（不是 C++）中创建正确的实例？

我看过“Tumbler”本机客户端演示，但它是用 C++ 编写的，并且似乎正在调用一个静态方法来创建对象……但是如何`PPB_Graphics3D`在 C 中创建呢？

[此处](https://developers.google.com/native-client/pepperc/struct_p_p_b___graphics3_d__1__0)的 Google 文档显示它正在使用如下实例`PPB_Graphics3D`：

```
g3d->Create(instance, attribs, &context); 
```

但不是如何实际创建它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T08:11:37.677

```
int32_t PPP_InitializeModule(
    PP_Module module,
    PPB_GetInterface get_browser_interface) {
  PPB_Graphics3D *g3d =
      get_browser_interface(PBB_GRAPHICS_3D_INTERFACE);
} 
```

# emacs - 在 org-mode 中组织我的论文

> ID：10864824
> 
> 赞同：17
> 
> 时间：2012-06-02T18:22:52.990
> 
> 标签：emacs, org-mode

我刚刚开始使用 org-mode，到目前为止发现它非常有用。我在目录树中收集了*大量*的技术论文，我想通过它们并通过 org-mode 对它们进行索引。我想要的是有一种方法可以浏览它们并查看未注释的，并逐个注释它们。我想通过首先制作一个链接文件，例如 [[xxx.pdf][not done yet]]，然后呈现未完成的链接，查看它们并决定如何添加注释。此外我想添加标签。我真正想要的是能够即时制作新标签。有没有人在组织模式下做过这样的事情？

胜利者

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-07T23:36:51.970

如果你的论文是这样组织的，

```
% ls -1 ~/References/functional-programming
The Lambda Calculus.pdf
Recursive Functions of Symbolic Expressions and Their.pdf 
```

您可以运行快速脚本来构建 org 文件。将以下内容另存为`make-org`并从您的论文目录中运行它 ( `sh make-org > papers.org`)。

```
#! /bin/sh
#
# make-org -- generates an org-mode file from a directory of PDFs
#
# AUTHOR:
#   Jon-Michael Deldin
# USAGE:
#   cd ~/path/to/papers && make-org > papers.org
#

echo "#+TITLE:   Research Papers"
echo "#+STARTUP: align hidestars indent lognotedone"
echo

for f in *.pdf; do
    name=${f%.*} # strip extension
    path=$(echo $f | sed 's/ /%20/') # encode spaces as %20
    echo "* TODO $name :unread:"
    echo
    echo "[[file:$path][$name]]"
    echo
done 
```

`papers.org`在 Emacs 中打开，运行`C-u C-c C-q`以重新对齐标签。您的文件现在应如下所示：

![组织模式研究论文](../Images/788551207ed89f9c0d8b28b2b34d38e2.png)

> 另外我想添加标签。我真正想要的是能够即时制作新标签。

一旦你有了一个标题（`*`开头的东西，你可以点击`C-c C-c`并添加你想要的任何标签。

您可能会发现[使用 org-mode 和 RefTeX 的详细说明](http://tincman.wordpress.com/2011/01/04/research-paper-management-with-emacs-org-mode-and-reftex/)或[这种替代方法](http://www-public.it-sudparis.eu/~berger_o/weblog/2012/03/23/how-to-manage-and-export-bibliographic-notesrefs-in-org-mode/)很有用，尤其是在您使用 LaTeX 时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-01T12:14:16.500

Heres 是适用于目录的修改版本。

```
#! /bin/sh
#
# make-org -- generates an org-mode file from a directory of PDFs
#
# AUTHOR:
#   Jon-Michael Deldin
# USAGE:
#   cd ~/path/to/papers && make-org > papers.org
#

echo "#+TITLE:   Research Papers"
echo "#+STARTUP: align hidestars indent lognotedone"
echo

for f in $(find . -name '*.pdf'); do
name=${f%.*} # strip extension
path=$(echo $f | sed 's/ /%20/') # encode spaces as %20
echo "* TODO $name :unread:"
echo
echo "[[file:$path][$name]]"
echo
done 
```

# java - java和tomcat 5中的SSL配置和X509Certificate

> ID：10864826
> 
> 赞同：0
> 
> 时间：2012-06-02T18:22:59.813
> 
> 标签：java, linux, tomcat, ssl, tomcat5.5

您好我已经在 tomcat 5.5 中配置了 SSL，server.xml 条目如下。

**

```
<Connector port="6922" maxHttpHeaderSize="8192"
   maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
   enableLookups="true" disableUploadTimeout="true"
   acceptCount="100" scheme="https" secure="true"
   keystoreFile="/home/mrsx/cert/keystore.keystore"
   keystorePass="XXXX"
   truststoreFile="/home/mrsx/cert/keystore.keystore"
   truststorePass="XXXXX" clientAuth="true" sslProtocol="TLS" /> 
```

**

当客户端试图访问应用程序时，由于请求中的“ **javax.servlet.request.X509Certificate** ”参数为NULL，应用程序抛出异常。

我已经创建了一个密钥库并将 CA 证书导入到密钥库中。谁能告诉我为什么我要获取 NULL 证书。我没有在密钥库中导入任何客户端证书。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:13:33.117

根据你上面给出的，

```
SSL启用=“真”
```

声明丢失。

如果这没有帮助，请尝试在客户端添加 ssl 调试，您应该能够获得更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:59:52.827

正如@Krroae27 指出的那样，您启用了两种方式的 SSL/TLS：

```
clientAuth="true" 
```

仅当您希望客户端使用证书提供凭据时才执行此操作。如果你打算这样做，你通常需要设置一个[Realm](http://tomcat.apache.org/tomcat-6.0-doc/realm-howto.html)配置，比如**tomcat-users.xml**，它将客户端证书映射到本地主体。

# jquery - 通过 jQuery 发布数组

> ID：10864831
> 
> 赞同：4
> 
> 时间：2012-06-02T18:23:18.210
> 
> 标签：jquery, ajax, arrays, post

我有一个表单，其中包含一些唯一的输入字段和其他一些具有重复名称的字段，如下所示：

```
<form method="post">
  Title: <input type="text" name="title" /><br />
  Content: <input type="text" name="content" /><br />
  Name: <input type="text" name="name" /><br />
  Email: <input type="text" name="email" /><br />
  Name: <input type="text" name="name" /><br />
  Email: <input type="text" name="email" /><br />
  Name: <input type="text" name="name" /><br />
  Email: <input type="text" name="email" />
</form> 
```

所以 'title' 和 'content' 只是字符串值，但 'name' 和 'email' 发送一个字符串数组到目的地。这就是我要的。我会将标题和内容值存储到一个表中，并将名称/电子邮件组合保存为不同表中的行。

如果我以标准方式发布此表单（仅通过在表单标记中指定“操作”参数），那么这些值将被发送到 ASP.NET 页面，并且可以作为字符串和字符串数组处理，理论上它们可以相当轻松插入数据库。

但是，该应用程序不允许以传统方式提交表单。相反，我必须使用 jQuery AJAX 来发布表单。

问题是，如何使用 jQuery AJAX 复制传统表单发布的行为、维护数组值？

我知道可以序列化表单值，但是我需要做一些服务器端逻辑来反序列化并有效地创建数组，这是一个额外的步骤。

有谁知道在通过 jQuery AJAX 传递字符串数组时复制与执行标准表单发布时相同的行为的方法？

谢谢各位！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T18:25:55.873

你可以像这样使用 jQuery 的[serialize](http://api.jquery.com/serialize/) () 函数：

```
<form method="post" id="testform">
  Title: <input type="text" name="title" /><br />
  Content: <input type="text" name="content" /><br />
  Name: <input type="text" name="name[]" /><br />
  Email: <input type="text" name="email[]" /><br />
  Name: <input type="text" name="name[]" /><br />
  Email: <input type="text" name="email[]" /><br />
  Name: <input type="text" name="name[]" /><br />
  Email: <input type="text" name="email[]" />
</form> 
```

...

```
$.post("test.php", $("#testform").serialize()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T18:29:27.607

```
$.ajax({

  url: "form.aspx", 
  data: $("form").serialize(),
  contentType: "application/json; charset=utf-8",
  dataType: 'json',
  method: 'POST',
  success: function() {

  }
}); 
```

阅读[`.serialize()`](http://api.jquery.com/serialize/)和[`.ajax()`](http://api.jquery.com/jQuery.ajax/)。你也有选择[`.serializeArray()`](http://api.jquery.com/serializeArray/)

简而言之，你可以[`$.post()`](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T18:25:32.650

您可以使用 jQuery 的[$.serialize](http://api.jquery.com/serialize/)或[$.serializeArray](http://api.jquery.com/serializeArray/)序列化表单字段以使用 ajax 发送它们，如下所示

```
$.post('URL',$('form').serialize(),function(data){
     // success
}) 
```

阅读更多关于[$.post](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T18:28:59.943

你只需要在javascript中，你可以把你所有的数据放在数组和ajax数据发送数组中，在服务器端你可以爆炸

```
 var myarray=array();
   myarray[]='mytestvaliye1';
   myarray[]='mytestvaliye2';
   myarray[]='mytestvaliye3';

   $.ajax( {
   url :  'myrurl',
   data : myarray, 
   success: function (){}
   }

   ) 
```

# eclipse - 以编程方式操作 Eclipse RCP EditorArea Sashes

> ID：10864832
> 
> 赞同：1
> 
> 时间：2012-06-02T18:23:34.243
> 
> 标签：eclipse, rcp

我有一个使用和编辑器区域的 Eclipse RCP 应用程序。我想以编程方式做一些事情，但找不到任何文档：

1) 不要恢复编辑器窗扇布局。即，我喜欢使用 rcp saveAndRestore 功能，但对于我的观点、观点和其他重要时刻。但是，我根本不想恢复编辑器区域的多个选项卡组。我选择不实现 IPersistableEditor 接口，因此我的编辑器会话没有恢复，但是当我的应用程序重新启动时，它仍然有拆分窗口（多个选项卡组的 swt 窗扇）等，我希望它只是 1 个编辑器区域选项卡像默认组一样。

2）我想以编程方式将编辑器拆分/复制到另一个选项卡组中，例如，我想要一个显示“水平拆分”的按钮，并在当前选项卡组旁边的新选项卡组中打开一个新编辑器。

任何帮助深表感谢！快乐编码！

/P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:48:54.980

1）有趣，似乎是平台中的一个错误。您可以在工作台窗口关闭时显式关闭所有编辑器。一种选择是覆盖 WorkbenchWindowAdvisor 中的 preWindowShellClose 方法：

```
public class ApplicationWorkbenchWindowAdvisor extends WorkbenchWindowAdvisor {
    @Override
    public boolean preWindowShellClose() {
        getWindowConfigurer().getWindow().getActivePage().closeAllEditors(true);
        return super.preWindowShellClose();
    }
} 
```

如果您无权访问 ApplicationWorkbenchWindowAdvisor，您可以尝试对 IPerspectiveListenerX 执行相同操作

2）我认为没有公共API。编辑器区域行为在表示工厂中定义（参见 org.eclipse.ui.presentationFactories 扩展点）。您可以克隆 RCP 标准演示文稿并实现所需的按需拆分编辑器区域功能。

# javascript - $(document).ready(function(){ Uncaught ReferenceError: $ is not defined

> ID：10864833
> 
> 赞同：24
> 
> 时间：2012-06-02T18:23:34.233
> 
> 标签：javascript, jquery, referenceerror

嗨，我在使用波纹管代码时遇到“未捕获的 ReferenceError：$ 未定义”

我目前在我的日志中收到以下错误。我一直在查看框架中的示例，但似乎无法找到错误所在。自从我做任何 HTML 或 js 以来已经十多年了，那时我所做的只是非常基本的东西。任何帮助，将不胜感激

```
<script type="text/javascript">
var sQuery = '<?php echo $sQuery; ?>';

$(document).ready(function(){
    if($('input[name=sPattern]').val() == sQuery) {
        $('input[name=sPattern]').css('color', 'gray');
    }
    $('input[name=sPattern]').click(function(){
        if($('input[name=sPattern]').val() == sQuery) {
            $('input[name=sPattern]').val('');
            $('input[name=sPattern]').css('color', '');
        }
    });
    $('input[name=sPattern]').blur(function(){
        if($('input[name=sPattern]').val() == '') {
            $('input[name=sPattern]').val(sQuery);
            $('input[name=sPattern]').css('color', 'gray');
        }
    });
    $('input[name=sPattern]').keypress(function(){
        $('input[name=sPattern]').css('background','');
    })
});
function doSearch() {
    if($('input[name=sPattern]').val() == sQuery){
        return false;
    }
    if($('input[name=sPattern]').val().length < 3) {
        $('input[name=sPattern]').css('background', '#FFC6C6');
        return false;
    }
    return true;
}
</script> 
```

![在此处输入图像描述](../Images/8b09be9ab01c78fc38f1cac4a79cf30e.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-02T18:25:00.570

看来您不导入[jquery](http://jquery.com/)。这些 $ 函数带有这个非标准（但非常有用）的库。

阅读那里的教程：http://docs.jquery.com/Tutorials: [Getting_Started_with_jQuery](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery) 它从如何导入库开始。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-04T04:21:06.327

无需使用`jQuery.noConflict`和所有

试试这个：

```
// Replace line no. 87 (guessing from your chrome console) to the following

jQuery(document).ready(function($){

// All your code using $

}); 
```

如果您在第 87 行仍然出现错误，例如`Uncaught reference error: jQuery is not defined`，那么您需要在使用之前包含 jQuery 文件，您可以查看上面的答案

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-06-05T12:56:35.000

将此代码放在`<head></head>`标签中：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.10.0.min.js"></script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-02T19:33:30.573

如果您确定包含 jQuery，请尝试将**$**替换为**jQuery 并重**试。

就像是

```
jQuery(document).ready(function(){.. 
```

尽管如此，如果您遇到错误，您还没有包含 jQuery。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-19T02:03:13.803

我知道这是一个老问题，大多数人都给出了很好的答案。但仅供参考，希望能节省别人的时间。检查您的功能是否：

```
$(document).ready(function(){} 
```

加载 JQuery 库 **后**调用

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-03T07:33:13.567

许多其他人在上面回答了您的问题。当您的脚本找不到 jQuery 脚本并且如果您使用其他框架或 cms 时会出现此问题，那么 jQuery 和其他库之间可能存在冲突。在我的情况下，我使用如下 - `

```
<script src="js_directory/jquery.1.7.min.js"></script>
    <script>
    jQuery.noConflict();
    jQuery(document).ready(
    function($){
    //your other code here
    });</script> 
```

`

这可能是一些语法错误。请原谅我，因为我是用手机写的。谢谢

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-27T10:33:52.453

`$`是jQuery库提供的一个函数，除非你加载了jQuery库，否则它是不可用的。

您需要添加`jQuery`（通常使用`<script>`可以指向库的本地副本或托管在 CDN 上的元素的元素）。确保您使用的是*当前*受*支持*的版本：有关此问题的许多答案建议使用 jQuery 的 1.x 或 2.x 版本，它们不再受支持并且存在已知的安全问题。

```
<script src="/path/to/jquery.js"></script> 
```

确保在运行任何依赖它的脚本*之前加载 jQuery。*

[jQuery 主页](https://jquery.com/)将有一个下载当前版本库的链接（在撰写本文时它是 3.5.1，但在您阅读本文时可能会发生变化）。

在页面的下方，您将找到[一个关于将 jQuery 与 CDN 结合使用的部分，该部分](https://jquery.com/download/#using-jquery-with-a-cdn)链接到将为您托管库的许多地方。

* * *

（注意：其他一些库提供了一个`$`函数，并且浏览器具有`$`仅在开发人员工具控制台中可用的本机变量，但这个问题与这些无关）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-30T23:25:36.643

请记住，您必须先加载 jquery 脚本，然后再加载脚本 js

```
<script type="text/javascript" src="http://code.jquery.com/jquery-2.2.4.min.js"></script>
<script type="text/javascript" src="example.js"></script> 
```

Html 是按顺序读取的！

# iphone - 监控连接状态和处理丢包

> ID：10864835
> 
> 赞同：3
> 
> 时间：2012-06-02T18:23:51.670
> 
> 标签：iphone, ios, nsstream, cfnetwork

**我已经实施了一个可行的解决方案，请在下面查看我的评论**

您好，感谢您抽出宝贵时间阅读这篇文章！

我正在开发一个应用程序，该应用程序连接到广播自己的 AdHoc WiFi 网络的硬件设备。我能够通过 CFNetwork 与 NSStream 的免费桥接连接到设备、发送字节和接收字节。我正在使用相当“事实上”的流打开代码，并且流委托正在报告 NSStreamEvents。

初始化与设备的连接后，我可以看到输入和输出流都打开（NSStreamEventOpenCompleted），并且由于硬件设备不断发送“HELLO！”，因此输入流上立即有 BytesAvailable（NSStreamEventHasBytesAvailable）。

在 NSStreamEventHasBytesAvailable 的案例事件中，我从 inputStream 读取数据并将其记录为：

```
 case NSStreamEventHasBytesAvailable:
        NSLog(@"CASE LOG -- NSStreamEventHasBytesAvailable");
        uint8_t buffer[256];
        int len;

        while ([inputStream hasBytesAvailable]) {
            //NSLog(@"LOG -- inputStream hasBytesAvailable");
            len = [inputStream read:buffer maxLength:sizeof(buffer)];
            if (len > 0) {

                NSLog(@"Length of inputStream Bytes -- %i",len);
                NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSASCIIStringEncoding];

                // This global boolean affects the rest of the apps functionality. Buttons are not able to send bytes to the hardware device if this boolean is FALSE.                    
                deviceIsConnected = true;

                // If buttons to send bytes are disabled due to lack of network connection on appLaunch, then go ahead and show them, allowing the user to send bytes to the hardware device
                if(buttonsAreDisabled == true)
                {
                    [ self setButtonVisibility:true ];

                    // Reset the status of the "No Connection" Alert
                    connectionAlertShown = false;
                }

                // Log the incoming data
                if (nil != output) {
                     NSLog(@"LOG -- device said: %@", output);
                }
            }
        }
   break; 
```

正如预期的那样，当我的设备连接时，我有一个恒定的“LOG -- 设备说：xxxx”流。但是，如果我断开设备与电源的连接，我不会收到任何类型的流事件；日志记录只是一起停止。

我试图通过在我的 viewDidLoad 中启动一个 backgroundTimer 来解决这个问题，它每 0.1 秒尝试从 inputStream 中读取。如果无法读取，则布尔值`deviceIsConnected`设置为`FALSE`，我会显示一条警报，通知用户他们与设备的连接已断开。

这种方法已被证明是相当不可靠的，也是一种非常不优雅的方式来执行一项看似简单的检测套接字连接关闭的任务。如果我理解正确， NSStream 类本质上是底层 BSD 套接字架构之上的“中间人”或抽象层。

将硬件设备与其电源断开是模拟走出设备板载 WiFi 芯片的范围。这不是“真实世界”的测试，就像您在*物理上*离开设备一样，您不会突然失去连接；相反，inputStream 接收到的数据会慢慢恶化，从而导致“网络警报”弹出窗口在设备在“已连接”和“未连接”之间跳转时不断闪烁。

我想实现某种 KeepAlive 处理程序，但我缺乏 iPhone / iOS / BSD 套接字的经验严重阻碍了我。如果你们中的任何一个出色的人可以提供一个方法的基本示例（可能在计时器上运行，我认为我在正确的道路上！）可以检测到套接字变得不可用并继续尝试重新建立连接，我将永远感激不尽。我不知疲倦地搜索了谷歌，发现了一些有希望的想法，但都未能成功实施。

CocoaASyncSocket 能否成为我所有问题/挫折的答案？

再次感谢您花时间阅读这篇文章。我希望我已经清楚地解释了我的问题和我想要的解决方案。如果您有任何问题，请随时提出，我会尽力回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:39:15.923

我之前解释的理论（见评论）确实奏效了。我现在能够使用以下逻辑成功监控设备连接的状态（请理解以下代码块存在于整个应用程序中）。我能够确定设备变得不可用的确切时间；无论是由于缺乏 WiFi 连接，还是设备断电。

```
// Define two socket objects, a "Main" socket and "Observer" socket

asyncSocketMain = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];
dispatch_queue_t secondaryQueue = dispatch_get_current_queue();
asyncSocketObserver = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:secondaryQueue];

// On application launch, attempt to open asyncSocketMain
[asyncSocketMain connectToHost:host onPort:port withTimeout: 2.0 error:&error]

// Determine which socket object is connecting in the didConnectToHost method
- (void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port
{
NSString *currentSocketId = (NSString *)sock;

// Determine Which Socket Object is Connecting...
if(currentSocketId == (NSString *)asyncSocketMain)
{
    NSLog(@"Main Socket has Connected!");
    connectionIsOpening = false;  // Allow for Future Reconnect Attempts
    deviceIsConnected   = true;   // Allow Connection Monitoring

    // If the Main Socket has been attempting to reconnect, stop doing that!
    if(reconnectTimer)
    {
        [ reconnectTimer invalidate ]; // Stop the reconnectTimer
        reconnectTimer = nil;          // And also set its value to nil
    }
    [ self setupMonitorTimer ];   // Begin Monitoring the Connection
}else{
    if(currentSocketId == (NSString *)asyncSocketObserver)
    {
        NSLog(@"Observer Socket attempting connection! Socket: %@", sock);
    }else{
        NSLog(@"ALERT ALERT -- UNKNOWN SOCKET CONNECTING!!!");
    }
}
} // close void 
```

现在，当观察者套接字尝试连接时，将抛出错误。这就是我能够确定当前连接的方式。`asyncSocketMain`如果套接字已经连接，观察者总是会抛出错误代码 7 。如果`asyncSocketObserver`尝试连接时超时，则意味着设备已关闭、超出范围或不可用（例如，用户手机未连接到正确的 WiFi 网络）。在这种情况下，应停止所有“监控”，并启动计时器`asyncSocketMain`以尝试重新连接。

```
- (void)socketDidDisconnect:(GCDAsyncSocket *)sock withError:(NSError *)err
{

NSString *connectingSocket = (NSString *)sock;

// Figure out hte Error Code Info  
NSError * error;
error = err;
NSInteger errorNum = error.code;

if(connectingSocket == (NSString *)asyncSocketMain)
{
    // This may occur if the app is opened when the device is out of range
    NSLog(@"The MAIN SOCKET Encountered an Error while Connecting! [ CODE: %d ]", errorNum);
    [ asyncSocketMain disconnect ]; // Disconnect the Main Socket to allow for reconnects
    connectionIsOpening = false;    // Allow Main Connection Attempts
    deviceIsConnected = false;      // Device is NOT CONNECTED -- Do NOT RUN MONITORING
    if(!reconnectTimer)
    {
        NSLog(@"Starting the reconnectTimer");
        [ self setupReconnectTimer ];   // Start attempting to reconnect
    }else{
        NSLog(@"Reconnect Timer is Already Running!");
    }
}
else
if(connectingSocket == (NSString *)asyncSocketObserver)
{
    switch (errorNum)
    {
        case 1:
            // Not much to do here...
            NSLog(@"OBSERVER ERROR - There is already a socket attempting to connect!");
            break;

        case 2:
            // Not much to do here...
            NSLog(@"OBSERVER ERROR - Event 2");
            break;

        case 3:
            // Time Out -- The device is out of range. Halt observer connection attempts, disconnect the main
            // socket object, then proceed to attempt to reconnect with the main socket.
            NSLog(@"OBSERVER ERROR - Connected Timed out -- Device not available!!!!");

            // The Observer Socket Timed out -- It's time to start reconnecting
            connectionIsOpening = false; // Allow Main Connection Attempts
            deviceIsConnected   = false; // Device is NOT CONNECTED - DO NOT RUN MONITORING and ALLOW CONNECTION ATTEMPTS
            if(monitorTimer)
            {
                // Stop trying to reconnect with the observer socket, thus allowing the Main socket to connect
                NSLog(@"Stopping the Monitoring Method...");
                [monitorTimer invalidate];
                monitorTimer = nil;
            }else{
                NSLog(@"Connection Monitoring already halted!");
            }

            // If the reconnectTimer is not running (it shouldnt be, otherwise something is wrong) then go ahead and run it
            // This will attempt to reconnect asyncSocketMain
            if(!reconnectTimer)
            {
                NSLog(@"Starting the reconnectTimer");
                [ asyncSocketMain disconnect ]; // Deallocate the main socket to allow for reconnects
                [ self setupReconnectTimer ];
            }else{
                NSLog(@"Reconnection Attempts are already happening! [ reconnectTimer: %@ ]",reconnectTimer);
            }

            break;

        case 7:
            NSLog(@"OBSERVER ERROR - The Main Socket is Already Connected!");
            break;
    }
}
else{
    NSLog(@"An Unknown Socket Connection Encountered and Error...");
}
} // end void 
```

作为参考，我将所有数据写在`asyncSocketMain`. `asyncSocketObserver`对象总是尝试在计时器上连接，无论何时`deviceIsConnected = TRUE`。

这可能不是监视连接的最优雅的方式，但它确实有效。一旦我从我的设备上断开电源，就会`asyncSocketObserver`超时，然后（根据代码）会停止所有“连接监控”并成为“重新连接”计时器，一旦建立连接，该计时器就会失效。

再次感谢@rokjarc 提供的有用知识和输入，我希望我在这里提供的半伪代码（确实按预期运行！）帮助其他一些开发人员，因为这是我至少为之苦苦挣扎的事情一周！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T19:03:10.783

CocoaAsyncSocket 也会有同样的问题（尽管它是一个很棒的项目）。TCP 连接正常工作，但只有在对方“按规则”断开连接时才会检测到断开连接。如果线路中断（关闭设备，超出范围......），您需要一些机制来检测这一点。这是客户的任务。

您正在考虑使用`NSTimer`.

有几种方法可以解决这个问题，主要取决于一件事：您的设备是自己发送数据（成功连接后）还是您的应用程序必须请求数据。

但解决方案基本相同。成功连接后，您将创建一个可重复的 NSTimer。您还需要某种`dataAge`变量。这个计时器（可以称为`connectionMonitor`）`dataAge`每次触发时都会增加。

如果`dataAge`太大（> 5s），则破坏连接（也是计时器）并重新开始连接过程。

当然，`dataAge`每次从设备获取数据时都应该重置。

您还应该处理事件`NSStreamEventErrorOccurred`和`NSStreamEventEndEncountered`：可能会破坏`connectionMonitor`和重新启动连接过程。

您可能知道本教程，但以防万一：[iPhone 网络编程](http://www.devx.com/wireless/Article/43551/1954)

# mysql - 如何反向远程 mySQL 访问？

> ID：10864839
> 
> 赞同：1
> 
> 时间：2012-06-02T18:24:22.530
> 
> 标签：mysql, database, apache, security

在启用对我的数据库的远程 mySQL 访问（以及典型的所需 my.cnf）更改的过程中，我使用了以下命令：

```
mysql> update db set Host='123.123.123.123' where Db='yourdatabasename';
mysql> update user set Host='123.123.123.123' where user='yourdatabaseUsername'; 
```

如何将其反转回不允许外部连接的配置？

我对以这种方式进行此设置的想法感到不安，并且不想造成安全问题。还有什么推荐的工具可以用来扫描我的 mySQL 实现以查找可能由错误配置引起的安全漏洞吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:27:31.340

如果我没记错的话，您可以简单地执行命令，但使用“localhost”作为`Host='localhost'`参数。

```
mysql> update db set Host='localhost' where Db='yourdatabasename';
mysql> update user set Host='localhost' where user='yourdatabaseUsername'; 
```

此外，这里有一些关于保护 MySQL 安装的好信息：

[http://dev.mysql.com/doc/refman/5.0/en/mysql-secure-installation.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-secure-installation.html)

# android - 语音识别android中的异常

> ID：10864840
> 
> 赞同：0
> 
> 时间：2012-06-02T18:24:42.793
> 
> 标签：android, voice-recognition

我想从音频中识别声音。它将显示识别的单词列表视图。我写了一个代码来执行这项工作，但得到一个致命的异常“android.content.ActivityNotFoundException”。

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tView=(TextView) findViewById(R.id.Textshow);
    vButton=(Button) findViewById(R.id.speakButton);
    lView=(ListView) findViewById(R.id.listView);
    vButton.setOnClickListener(this);
}

@Override
public void onClick(View arg0) 
{
    Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Voice recognition Demo...");
    startActivityForResult(intent, REQUEST_CODE);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    if(requestCode==REQUEST_CODE && resultCode==RESULT_OK)
    {
        ArrayList<String> result=data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
        lView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,result));
    }

    super.onActivityResult(requestCode, resultCode, data);
} 
```

这种异常的原因是什么？我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:24:48.557

那是因为您的设备不支持该意图，请使用：

```
try {
startActivityForResult(intent, REQUEST_CODE);
} catch(ActivityNotFoundException e){
   Log.e("speech", e.toString());
} 
```

并尝试在具有语音识别器的设备上进行测试，然后看看效果如何。

也看看这里：[ActivityNotFoundException + Speech on SO](https://stackoverflow.com/search?q=%5Bandroid%5D%20ActivityNotFoundException%20speech%20is:question)

# sybase - 从子过程访问在一个过程中创建的 Sybase #temp 表

> ID：10864842
> 
> 赞同：2
> 
> 时间：2012-06-02T18:24:59.080
> 
> 标签：sybase

我在TestProc 中创建了一个# 表并在TestProc 中调用SubProc。现在，使用 SubProc，我试图引用我在 TestProc 中创建的 # 表。可能吗？以下代码供您参考：

```
-- Main Procedure
create procedure TestProc (
      @id smallint,
      @name varchar
 ) as
 select id, name into #myTab from myTable
 exec SubProc @rVal output

 -- Sub Procedure
 create procedure SubProc (
      @rVal integer output
 ) as 
 select @rVal=count(1) from #myTab 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:06:59.310

是的，虽然不理想，但这是完全可能的，但这是在“子”proc 下使用它时可以充分利用“父”proc 上的索引创建的方法之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:52:00.430

这是不可能的，你应该避免它。

您可以在 tempdb 数据库中创建表，但我建议您也避免使用它！

# ruby-on-rails - Minitest 在两次连续运行中给出不同的结果

> ID：10864845
> 
> 赞同：1
> 
> 时间：2012-06-02T18:25:16.903
> 
> 标签：ruby-on-rails, ruby, testing, minitest

我一直在玩 Minitest，并发现了我似乎无法找到解释的行为

我有一个非常简单的模型测试文件如下：

```
require 'minitest_helper'

describe User do

  before do
    @user = User.new(name: "Example User", email: "user@example.com",
                     password: "foobards", password_confirmation: "foobards")
  end

  describe "with admin attribute set to 'true'" do
    before { @user.toggle!(:admin) }

    it { @user.admin.must_equal true }
  end 
end 
```

当我在“rake db:test:prepare”之后第一次运行此代码时，测试通过

当我连续第二次运行它时，它给了我一个错误：

> test_0001_anonymous 0:00:00.132
> 错误 SQLite3::ConstraintException：列电子邮件不是唯一的：插入“用户”（“管理员”、“创建的_at”、“电子邮件”、“名称”、“密码摘要”、“更新的_at”）值（ ?, ?, ?, ?, ?, ?)

然而，如果我取出这个错误似乎不会发生

```
before { @user.toggle!(:admin) } 
```

我的 minitest_helper.rb 如下：

```
ENV["RAILS_ENV"] = "test"
require File.expand_path("../../config/environment", __FILE__)
require "minitest/autorun"
require "capybara/rails"
require "active_support/testing/setup_and_teardown"

class IntegrationTest < MiniTest::Spec
  include Rails.application.routes.url_helpers
  include Capybara::DSL
  register_spec_type(/integration$/, self)
end

class HelperTest < MiniTest::Spec
  include ActiveSupport::Testing::SetupAndTeardown
  include ActionView::TestCase::Behavior
  register_spec_type(/Helper$/, self)
end

Turn.config.format = :outline 
```

我似乎无法理解这是一个错误还是（更有可能）我遗漏了一些东西。比我更懂的人能解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:33:27.687

[`toggle!`](http://apidock.com/rails/ActiveRecord/Persistence/toggle%21)方法保存记录。因此，当您第二次运行测试时，数据库中已经有一条电子邮件为“user@example.com”的记录。并且保证电子邮件地址唯一性的验证失败。

尝试使用[`toggle`](http://apidock.com/rails/ActiveRecord/Persistence/toggle)（没有爆炸）代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T19:06:42.853

您需要将每个测试包装在事务中（并将其回滚以便永远不会保存更改）或清除测试之间的所有表。如果不是从数据库中留下的垃圾会干扰后续的测试运行

database_cleaner gem 是执行此操作的一种方法，它支持一系列 ORM 的多种策略（事务、截断等）

# ruby-on-rails-3 - 如何让 rails/pg/postgresql 寻找不同的主机名/套接字？

> ID：10864849
> 
> 赞同：1
> 
> 时间：2012-06-02T18:25:49.603
> 
> 标签：ruby-on-rails-3, macos, postgresql, pg

如何让 rails/pg 在“/tmp/.s.PGSQL.5432”而不是“/var/pgsql_socket/.s.PGSQL.5432”中查找 psql 数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:49:49.220

您需要将 socket 选项添加到您的 database.yml 文件中。

**例子：**

```
development:
  host: /tmp/.s.PGSQL.5432
  adapter: postgresql
  username: root
  password: password
  database: my_app_development 
```

# java - 究竟什么时候使用（匿名）内部类是安全的？

> ID：10864853
> 
> 赞同：341
> 
> 时间：2012-06-02T18:26:22.473
> 
> 标签：java, android, memory-leaks, inner-classes

我一直在阅读一些关于 Android 内存泄漏的文章，并观看了来自 Google I/O[的有关该主题的](http://www.youtube.com/watch?v=_CruQY55HOk)有趣视频。

不过，我并不完全理解这个概念，尤其是当它对**Activity 中的用户内部类**是安全或危险的时候。

这是我的理解：

如果内部类的实例比其外部类（活动）的存活时间更长，则会发生内存泄漏。->**在哪些情况下会发生这种情况？**

在这个例子中，我认为没有泄漏的风险，因为匿名类扩展`OnClickListener`的寿命不可能比活动长，对吧？

```
 final Dialog dialog = new Dialog(this);
    dialog.setContentView(R.layout.dialog_generic);
    Button okButton = (Button) dialog.findViewById(R.id.dialog_button_ok);
    TextView titleTv = (TextView) dialog.findViewById(R.id.dialog_generic_title);

    // *** Handle button click
    okButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            dialog.dismiss();
        }
    });

    titleTv.setText("dialog title");
    dialog.show(); 
```

现在，这个例子是否危险，为什么？

```
// We are still inside an Activity
_handlerToDelayDroidMove = new Handler();
_handlerToDelayDroidMove.postDelayed(_droidPlayRunnable, 10000);

private Runnable _droidPlayRunnable = new Runnable() { 
    public void run() {
        _someFieldOfTheActivity.performLongCalculation();
    }
}; 
```

我怀疑理解这个主题与详细理解活动被销毁和重新创建时保留的内容有关。

是吗？

假设我刚刚更改了设备的方向（这是最常见的泄漏原因）。什么时候`super.onCreate(savedInstanceState)`在 my 中调用，`onCreate()`这会恢复字段的值（就像它们在方向改变之前一样）？这也会恢复内部类的状态吗？

我意识到我的问题不是很精确，但我非常感谢任何可以使事情更清楚的解释。

* * *

## 回答 #1

> 赞同：682
> 
> 时间：2012-06-10T12:27:43.680

你问的是一个非常棘手的问题。虽然您可能认为这只是一个问题，但实际上您同时提出了几个问题。我会尽我所能，我必须覆盖它，希望其他一些人能加入来覆盖我可能会错过的东西。

**嵌套类：简介**

由于我不确定您对 Java 中的 OOP 是否满意，因此这将涉及一些基础知识。嵌套类是指一个类定义包含在另一个类中。基本上有两种类型：静态嵌套类和内部类。它们之间的真正区别是：

*   静态嵌套类：
    *   被认为是“顶级”。
    *   不需要构造包含类的实例。
    *   在没有明确引用的情况下，不得引用包含的类成员。
    *   有自己的一生。
*   内部嵌套类：
    *   始终需要构造包含类的实例。
    *   自动隐式引用包含的实例。
    *   可以在没有引用的情况下访问容器的类成员。
    *   生命周期*应该*不超过容器的生命周期。

**垃圾收集和内部类**

垃圾收集是自动的，但会根据是否认为正在使用对象来尝试删除对象。垃圾收集器非常聪明，但并非完美无缺。它只能通过是否存在对该对象的活动引用来确定是否正在使用某物。

这里真正的问题是当一个内部类的存活时间比它的容器长。这是因为对包含类的隐式引用。发生这种情况的唯一方法是，如果包含类之外的对象保持对内部对象的引用，而不考虑包含对象。

这可能导致内部对象处于活动状态（通过引用）但对包含对象的引用已从所有其他对象中删除。因此，内部对象使包含对象保持活动状态，因为它将*始终*具有对它的引用。这样做的问题是，除非它被编程，否则无法返回包含对象以检查它是否还活着。

这种实现最重要的方面是它是在 Activity 中还是在可绘制对象中都没有区别。在使用内部类时，您***总是***必须有条不紊，并确保它们永远不会超过容器的对象。幸运的是，如果它不是代码的核心对象，那么泄漏可能比较小。不幸的是，这些是最难发现的一些漏洞，因为它们很可能会被忽视，直到它们中的许多已经泄露。

**解决方案：内部类**

*   从包含对象获取临时引用。
*   允许包含对象成为唯一保留对内部对象的长期引用的对象。
*   使用已建立的模式，例如工厂。
*   如果内部类不需要访问包含的类成员，请考虑将其转换为静态类。
*   谨慎使用，无论它是否在 Activity 中。

**活动与观点：简介**

活动包含许多能够运行和显示的信息。活动由它们必须具有视图的特征定义。他们也有某些自动处理程序。无论您是否指定，Activity 都会隐式引用它所包含的 View。

为了创建一个视图，它必须知道在哪里创建它以及它是否有任何子视图以便它可以显示。这意味着每个 View 都有一个对 Activity 的引用（通过`getContext()`）。此外，每个 View 都保留对其子项的引用（即`getChildAt()`）。最后，每个 View 都保留对表示其显示的渲染位图的引用。

每当您引用 Activity（或 Activity 上下文）时，这意味着您可以沿着布局层次结构的整个链向下移动。这就是为什么有关活动或视图的内存泄漏如此之大的原因。可能会同时泄漏**大量**内存。

**活动、观点和内部课程**

鉴于上面有关内部类的信息，这些是最常见的内存泄漏，但也是最常避免的。虽然希望内部类可以直接访问活动类成员，但许多人愿意将它们设为静态以避免潜在问题。活动和视图的问题远不止于此。

**泄露的活动、视图和活动上下文**

这一切都归结为上下文和生命周期。某些事件（例如方向）会杀死 Activity 上下文。由于如此多的类和方法需要上下文，开发人员有时会尝试通过获取对上下文的引用并保持它来保存一些代码。碰巧的是，我们必须为运行 Activity 而创建的许多对象必须存在于 Activity LifeCycle 之外，以允许 Activity 执行它需要执行的操作。如果你的任何对象在销毁时碰巧引用了一个 Activity、它的 Context 或它的任何视图，那么你只是泄露了该 Activity 及其整个视图树。

**解决方案：活动和观点**

*   不惜一切代价避免对视图或活动进行静态引用。
*   所有对活动上下文的引用都应该是短暂的（函数的持续时间）
*   如果您需要一个长期存在的上下文，请使用应用程序上下文（`getBaseContext()`或`getApplicationContext()`）。这些不会隐式保留引用。
*   或者，您可以通过覆盖配置更改来限制 Activity 的销毁。但是，这并不能阻止其他潜在事件破坏 Activity。虽然您*可以*这样做，但您可能仍想参考上述做法。

**Runnables：简介**

Runnables 实际上并没有那么糟糕。我的意思是，他们*可能*是，但实际上我们已经触及了大部分危险区域。Runnable 是一种异步操作，它执行独立于创建它的线程的任务。大多数可运行对象都是从 UI 线程实例化的。从本质上讲，使用 Runnable 是在创建另一个线程，只是稍微管理一些。如果您像标准类一样对 Runnable 进行分类并遵循上述准则，您应该会遇到一些问题。现实情况是，许多开发人员不这样做。

出于易用性、可读性和逻辑程序流程的考虑，许多开发人员使用匿名内部类来定义他们的 Runnable，例如您在上面创建的示例。这会产生一个与您在上面键入的示例类似的示例。Anonymous Inner Class 基本上是一个离散的 Inner Class。您不必创建一个全新的定义并简单地覆盖适当的方法。在所有其他方面，它是一个内部类，这意味着它保持对其容器的隐式引用。

**可运行文件和活动/视图**

耶！这部分可以很短！由于 Runnables 在当前线程之外运行，这些危险来自于长时间运行的异步操作。如果在 Activity 或 View 中将 runnable 定义为匿名内部类或嵌套内部类，则存在一些非常严重的危险。这是因为，如前所述，它***必须***知道它的容器是谁。输入方向更改（或系统终止）。现在只需回到前面的部分来了解刚刚发生的事情。是的，你的例子很危险。

**解决方案：Runnables**

*   如果它不会破坏代码的逻辑，请尝试扩展 Runnable。
*   如果扩展的 Runnables 必须是嵌套类，请尽量使它们成为静态的。
*   如果必须使用 Anonymous Runnables，请避免在对正在使用的 Activity 或 View 具有长期引用的***任何对象中创建它们。***
*   许多 Runnable 可以很容易地成为 AsyncTask。考虑使用 AsyncTask，因为它们默认由 VM 管理。

**现在回答最后一个问题**以回答本文其他部分 未*直接解决的问题。*你问“内部类的对象什么时候可以比外部类存活更长的时间？” 在我们开始之前，让我再次强调：尽管您在活动中担心这一点是正确的，但它可能会导致任何地方的泄漏。我将提供一个简单的示例（不使用 Activity）来演示。

下面是一个基本工厂的常见示例（缺少代码）。

```
public class LeakFactory
{//Just so that we have some data to leak
    int myID = 0;
// Necessary because our Leak class is an Inner class
    public Leak createLeak()
    {
        return new Leak();
    }

// Mass Manufactured Leak class
    public class Leak
    {//Again for a little data.
       int size = 1;
    }
} 
```

这是一个不常见的示例，但足以简单地演示。这里的关键是构造函数...

```
public class SwissCheese
{//Can't have swiss cheese without some holes
    public Leak[] myHoles;

    public SwissCheese()
    {//Gotta have a Factory to make my holes
        LeakFactory _holeDriller = new LeakFactory()
    // Now, let's get the holes and store them.
        myHoles = new Leak[1000];

        for (int i = 0; i++; i<1000)
        {//Store them in the class member
            myHoles[i] = _holeDriller.createLeak();
        }

    // Yay! We're done! 

    // Buh-bye LeakFactory. I don't need you anymore...
    }
} 
```

现在，我们有泄漏，但没有工厂。即使我们发布了 Factory，它也会保留在内存中，因为每个 Leak 都会引用它。外部类没有数据甚至都没有关系。这种情况发生得比人们想象的要频繁得多。我们不需要创造者，只需要它的创造物。所以我们暂时创造一个，但无限期地使用这些创造。

想象一下当我们稍微改变构造函数时会发生什么。

```
public class SwissCheese
{//Can't have swiss cheese without some holes
    public Leak[] myHoles;

    public SwissCheese()
    {//Now, let's get the holes and store them.
        myHoles = new Leak[1000];

        for (int i = 0; i++; i<1000)
        {//WOW! I don't even have to create a Factory... 
        // This is SOOOO much prettier....
            myHoles[i] = new LeakFactory().createLeak();
        }
    }
} 
```

现在，这些新的 LeakFactories 中的每一个都刚刚被泄露。你对那个怎么想的？这些是内部类如何比任何类型的外部类寿命更长的两个非常常见的示例。如果那个外部类是一个 Activity，想象一下它会有多糟糕。

**结论**

这些列出了不当使用这些对象的主要已知危险。总的来说，这篇文章应该涵盖了你的大部分问题，但我知道这是一篇冗长的文章，所以如果你需要澄清，请告诉我。只要遵循以上做法，就很少担心漏电了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-21T12:48:45.260

只要您知道您的内部（匿名）类的生命周期较短或与外部类的生命周期完全相同，您就可以安全地使用它们。

例如，您使用`setOnClickListener()`Android按钮，大多数时候您使用匿名类，因为没有其他对象持有对它的引用，并且您不会在侦听器内部进行一些长时间的处理。一旦外部类被销毁，内部类也可以被销毁。

[![在此处输入图像描述](../Images/b3cc55cb69a0cc1ee098fd343fbf6655.png)](https://i.stack.imgur.com/rorRG.png)

另一个有内存泄漏问题的例子是 Android`LocationCallback`作为打击的例子。

```
public class MainActivity extends AppCompatActivity {

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    initLocationLibraries();
  }

  private void initLocationLibraries() {
    mFusedLocationClient = LocationServices.getFusedLocationProviderClient(this);
    mSettingsClient = LocationServices.getSettingsClient(this);

    mLocationCallback = new LocationCallback() {
        @Override
        public void onLocationResult(LocationResult locationResult) {
            super.onLocationResult(locationResult);
            // location is received
            mCurrentLocation = locationResult.getLastLocation();
            updateLocationUI();
        }
    };

    mRequestingLocationUpdates = false;

    mLocationRequest = new LocationRequest();
    mLocationRequest.setInterval(UPDATE_INTERVAL_IN_MILLISECONDS);
    mLocationRequest.setFastestInterval(FASTEST_UPDATE_INTERVAL_IN_MILLISECONDS);
    mLocationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);

    LocationSettingsRequest.Builder builder = new LocationSettingsRequest.Builder();
    builder.addLocationRequest(mLocationRequest);
    mLocationSettingsRequest = builder.build();
  }
} 
```

现在不仅Activity持有LocationCallback的引用，Android GMS服务也持有它。GMS 服务的生命周期比 Activity 长得多。这将导致活动的内存泄漏。 [![在此处输入图像描述](../Images/d95e5efb666b96ef04291dd279077a89.png)](https://i.stack.imgur.com/dmyNs.png)

更多细节在[这里](https://medium.com/@weidianhuang/how-to-avoid-memory-leak-android-and-jvm-languages-b5283c58fe1f)解释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-01T13:12:43.090

您在 1 个帖子中有 2 个问题：

1.  使用内部类而不将其声明为`static`. 它不仅限于 Android，而是适用于整个 Java 世界。

更详细的解释[在这里](https://www.infoworld.com/article/3526554/avoid-memory-leaks-in-inner-classes.html)

检查您是否正在使用`static class InnerAdapter`或只是`class InnerAdapter`列表（`ListView`或`RecyclerView`，选项卡+页面布局（`ViewPager`），下拉和**AsyncTask 子类的常见内部类示例**

2.  无论您使用 Handler + Runnable、AsyncTask、RxJava 还是其他任何东西，如果在 Activity/Fragment/View 销毁后操作完成，您将创建 Activity/Fragment/View 对象的 rouge 引用（它们是巨大的）无法垃圾收集（无法释放的内存插槽）

所以请确保取消那些长时间运行的任务，`onDestroy()`并且不会有内存泄漏

# mysql - 使用 iptables 和不同的网络接口转发 MySQL 连接

> ID：10864854
> 
> 赞同：1
> 
> 时间：2012-06-02T18:26:32.113
> 
> 标签：mysql, linux, iptables, nat, portforwarding

我有一台带有 Ubuntu 作为路由器的 PC。它具有与 Internet 的公共 IP 的 3G 连接，并且有一个私有无线子网。所以它有两个活动接口：

*   ppp0：公共 IP（广域网）
*   wlan0：私有IP（局域网）

使用**iptables**，我想**将每个 MySQL 连接**（端口 3306）转发到子网的本地计算机（10.42.43.10）。

我输入这些 iptables 命令：

```
iptables -A PREROUTING -t nat -i ppp0 -p tcp --dport 3306 -j DNAT --to 10.42.43.10:3306
iptables -A FORWARD -p tcp -i ppp0 -o wlan0 -d 10.42.43.10 --dport 3306 -j ACCEPT 
```

但它不起作用。telnet publicip 3306 失败:-(

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:42:53.697

您可以创建一个 ssh 隧道来转发连接。它比使用 iptables 更容易和安全：

ssh -L YOUR_PUBLIC_IP:3306:[IP]:3306 YOUR_USER@[IP]

您必须输入 ssh 用户凭据，然后通过隧道进行重定向。快速、简单和安全:)

# android - 如何在另一个活动中打开新活动？

> ID：10864855
> 
> 赞同：0
> 
> 时间：2012-06-02T18:26:37.020
> 
> 标签：android, android-intent, android-activity

我是 android 新手，我正在开发一个 Photoshop 应用程序。在我的应用程序中，我的主要活动（屏幕）带有 2 个按钮加载图像并退出，如果我按下加载图像，我的程序应该从图库中读取图像，如果按下退出，应用程序将退出。我的问题是从图库中读取图像后，我想打开另一个可以编辑该图像的活动。我想知道从哪里开始新活动？因为我在我的主要活动的 onActivityResult 中获取图像，这是第二个活动的结果。如果有人知道答案帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:30:32.023

在那里，在您的 onActivityResult 中，您可以启动新的 Activity 来编辑选定的图像。您只需要：

```
Intent goToEditActivity = new Intent (this, EditActivity.class);
goToEditActivity.putExtra ("picturePath", picturePath);
startActivity (goToEditActivity); 
```

其中图片路径作为额外传递，因此新活动可以显示它。而不是 EditActivity.class 你应该写你的活动名称。不要忘记将其添加到清单中。

# c# - 如何将数据集设置为等于 .xsd 文件

> ID：10864864
> 
> 赞同：3
> 
> 时间：2012-06-02T18:28:13.497
> 
> 标签：c#, asp.net

我在一个名为 DataSetsForReporting 的文件夹下有一个数据集，这个 xsd 被称为：

```
DataSet_Clients.xsd 
```

我的问题是如何将上面提到的数据集设置为我页面中数据集的实例？例如：

数据集 myDataSet = new DataSet();

```
myDataSet = (the data set under that folder). 
```

这是可能的，如果是我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:33:26.383

```
 // Load the schema file.
    myDataSet.ReadXmlSchema("DataSet_Clients.xsd"); 
```

如果 app_Data 文件夹下的 xsd

```
 myDataSet.ReadXml(Server.MapPath("~/App_Data/DataSet_Clients.xsd")); 
```

# android - 为什么我的gridview在一次请求时刷新但在另一点不刷新？

> ID：10864866
> 
> 赞同：1
> 
> 时间：2012-06-02T18:28:14.947
> 
> 标签：android, gridview

我写了一个简单的记忆游戏。您单击 16 张卡片中的一张（图像按钮），将其翻转以显示水果（例如香蕉的图片），然后单击另一张卡片将其翻转并显示为水果。然后，如果图像匹配，则在一两秒后，这两个图块被替换为空白（即从板上移除）。这种情况会一直发生，直到所有内容都被删除。水果的名称也被口头读出。提到的一切都完美无缺，第一张卡片被翻转并显示图像，除了点击第二张卡片时，它从不显示水果。说出了正确的水果名称，并且我在第二张卡片点击时使用了与第一张卡片点击类似的代码。你能找到我哪里出错了吗？

我下面代码中的关键部分如下所示：“//因此选择了两个图像！它们匹配吗？”

第一个图像在单击时更新。但是，无论点击的第一个水果 = 点击的第二个水果，空白图块都不会“转动”以显示图像。

代码：....继续

```
 gridview.setOnItemClickListener(new OnItemClickListener() 
    {

         public void onItemClick(AdapterView<?> parent, View v, int position, long id) 
         { 
            int fruitselected = (int)FruitToChooseFromImages.get(position);  

             // start   
                if (position == firstfruitselpos && imagesSelectedThusFar == 1 || fruitselected == R.drawable.blank)
                    {  
                    // (if blank icon clicked) then DO NOTHING
                    }   

                else
                {   // a valid fruit has been selected, so firstly, say the fruit's name
                    int soundtoplaynow = getrightsound(position, fruitselected);
                    SoundManager.playSound(soundtoplaynow, 1);
                    // next
                    if (imagesSelectedThusFar == 0) 
                    {
                        imagesSelectedThusFar = 1;

                        firstfruitselected = fruitselected; firstfruitselpos = position;
                        FruitToDisplayImages.set(position, fruitselected);

                        MyGridviewAdapter1.notifyDataChanged();
                        gridview.invalidateViews();
                        }
                    else // so two images have been selected! do they match?
                    {
                        imagesSelectedThusFar = 0; // has reached 2, so reset to zero
                        secondfruitselected = fruitselected; secondfruitselpos = position;
                        FruitToDisplayImages.set(position, fruitselected);
                        MyGridviewAdapter1.notifyDataChanged();
                        gridview.invalidateViews();

                        try{ Thread.sleep(1500); }catch(InterruptedException e){ }

                        if (firstfruitselected == secondfruitselected) //yes they match
                            {
                            SoundManager.playSound(50, 1);// play happy sound

                            //switch fruit image to blank and display blank at position clicked **
                            FruitToDisplayImages.set(position, R.drawable.blank);
                            FruitToChooseFromImages.set(position, R.drawable.blank);

                            FruitToDisplayImages.set(firstfruitselpos, R.drawable.blank);
                            FruitToChooseFromImages.set(firstfruitselpos, R.drawable.blank);                            
                            MyGridviewAdapter1.notifyDataChanged();
                            gridview.invalidateViews();   

                            fruitleft = (fruitleft - 2);
                            }

                        else // nope, dont match
                        { // you selected the wrong fruit, sorry.
                        SoundManager.playSound(60, 1); // play UNhappy sound
                        try{ Thread.sleep(1500); }catch(InterruptedException e){ }
                        FruitToChooseFromImages.set(firstfruitselpos, firstfruitselected);
                        FruitToDisplayImages.set(firstfruitselpos, R.drawable.blanktile);
                        FruitToDisplayImages.set(secondfruitselpos, R.drawable.blanktile);
                        MyGridviewAdapter1.notifyDataChanged();
                        gridview.invalidateViews();
}   
                    }

            }    

              // end

             if (fruitleft == 0)
                { //end game - add code here
                 SoundManager.playSound(70, 1); // play big happy congrats sound

                }             }
     }); 
```

ETC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:50:42.430

日志语句告诉我一切都按照幕后设计的方式工作，只是没有像我要求的那样升级 gridview！我修改了这段代码，使用常见的故障排除实践，但没有任何效果。它只是做了同样的事情。

在使要显示的图像根本不重置而是在其他地方更新视图之后，稍后在 onclick 侦听器事件链中，我发现网格视图稍后会在我调用它更新时正确刷新/显示。在尝试使用 sleep 延迟 gridview 更新以获得相同效果后，认为这是解决方案并且未能解决问题，我创建了一个处理程序，该处理程序将磁贴重置为空白或清除，从而允许显示图像。问题解决了。

# css - 定位这些 DIV 时遇到一些问题

> ID：10864867
> 
> 赞同：3
> 
> 时间：2012-06-02T18:28:17.993
> 
> 标签：css, html, css-float

这里有点麻烦。我有 4 个 DIV。我希望它们的位置如下：

![在此处输入图像描述](../Images/fbe9905fb15f51bdd33e991f7327d0e5.png)

因此，我将 DIV 1 浮动到左侧，并将 DIV 4 浮动到右侧。到目前为止，一切都很好。但是，当我包含 DIV 2 和 3 时，一切都开始崩溃。根据我在 HTML 中对 DIV 的排序方式，有时它们根本不显示、在下一行、乱序等等。这一切都变得相当混乱。我没有看到`float:center;`CSS 代码，所以我不确定如何执行此操作。

一些帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:35:30.663

没有 float:center ，一个向左浮动，另一个向右浮动不会让其余部分移到中间。您必须在向右浮动的内容和向左浮动的内容之间做出选择。

在您的情况下，我认为向左浮动 1 和向右浮动 2,3 和 4 可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:34:37.180

如何将每个 div 的 css 显示设置为内联，并用外部 div（显示块）包装。您还想设置宽度...

# javascript - 滚动跨域子 iframe？

> ID：10864870
> 
> 赞同：4
> 
> 时间：2012-06-02T18:28:36.247
> 
> 标签：javascript, iframe

是否可以加载跨域子 iframe 并将其滚动到某个部分？

例如，我想在 Stack Overflow 上引用一个问题，然后使用 JavaScript 将其滚动到问题所在页面的特定部分，并可能覆盖一个突出显示或其他内容。

我的技巧是加载高度很大的 iframe，就像真的很高一样，然后通过移动位置来滚动它。

好烦啊，有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:41:24.630

如果 iframe 是从不同的源域加载的，那么您几乎无法与之交互。浏览器强制执行跨源安全性，不允许您直接操作 iframe 内容。如果您对加载到 iframe 中的内容有一些控制权，则可以使用`postMessage`函数。

`postMessage`API 似乎得到[了很好](http://caniuse.com/#feat=x-doc-messaging)的支持。您可以查看[规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/web-messaging.html#crossDocumentMessages)和[演示](http://72lions.com/2011/05/cross-origin-communication-with-html5)。

这篇[博客文章](http://www.cakemail.com/the-iframe-cross-domain-policy-problem/)似乎很好地概述了解决问题的方法。

您仅设置 iframe 高度的技巧是一个有趣的想法，但是您必须知道它需要多长时间，因此只有在您了解要显示的内容的情况下它才会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-13T22:44:07.433

一种方法是在 iframe 上设置一个负顶部，然后将其设置得比您需要的高。

例如，如果你想显示它滚动到`100px`，然后设置`top:-100px`并添加 100px 到高度。

然后，您只需要隐藏 iframe 的顶部，例如在屏幕顶部或其他元素下方（使用 z-index）。

这可能会与`scrolling="no"`iframe 元素结合使用。

# c - OpenGL 抗锯齿与 freeglut

> ID：10864878
> 
> 赞同：6
> 
> 时间：2012-06-02T18:30:05.223
> 
> 标签：c, opengl, freeglut

我正在使用freeglut。我正在尝试让 FSAA 正常工作，但似乎没有任何效果。样本缓冲区为 1，样本为 4。但我没有看到任何抗锯齿。我错过了什么吗？目前，我正在运行 Ubuntu 12.04；不确定这是否会改变任何东西。

```
#include <GL/glut.h>
#include <GL/glext.h>
#include <stdio.h>

void render(void);

int main(int argc, char **argv){    
    glutInit(&argc,argv);

    //Initialize the window
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA | GLUT_MULTISAMPLE);
    glutInitWindowPosition(100,100);
    glutInitWindowSize(200,200);
    glutCreateWindow("Testing");
    glutDisplayFunc(render);

    //Enable FSAA       
    glEnable(GL_MULTISAMPLE);

    //2D graphics
    glDisable(GL_DEPTH_TEST);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, glutGet(GLUT_WINDOW_WIDTH), glutGet(GLUT_WINDOW_HEIGHT), 0, 0, 1);
    glMatrixMode(GL_MODELVIEW);

    GLint buf, sbuf;
    glGetIntegerv(GL_SAMPLE_BUFFERS, &buf);
    printf("number of sample buffers is %d\n", buf);
    glGetIntegerv(GL_SAMPLES, &sbuf);
    printf("number of samples is %d\n", sbuf);

    glutMainLoop();
    return 0;
}

//Draw some stuff
void render(void){  
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glClearColor(1.0f, 1.0f, 1.0f, 1.0f);

    glColor3f(0.0f,1.0f,0.0f);
    glBegin(GL_LINE_LOOP);
        glVertex2f(10.0,10.0);
        glVertex2f(170.0,60.0);
        glVertex2f(50.0,130.0);
        glVertex2f(50.0,60.0);
    glEnd();    

    glutSwapBuffers();
} 
```

我很了解 SDL 和 GLFW。不过，我想让它在 freeglut 中工作。

**更多信息：**
显卡：ATI Radeon HD 4250
OpenGL 版本：3.3.11627 兼容性配置文件上下文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:47:12.360

您的代码在我的计算机（运行 Windows）上运行正常。只要确保您使用的是 freeglut 而不仅仅是普通的 GLUT。因此，您应该链接到正确的库文件（如 windows 上的 freeglut.lib/freeglut.dll）。此外，包含 freeglut.h 而不是 glut.h 以确保您实际上包含了您想要的头文件，这不是一个坏主意。

此外，无需调用`glClearColor`每一帧。只有当你想改变清晰的颜色时才需要调用它。请记住，like`glColor`仅`glClearColor`适用于在它之后发生的函数调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T23:58:52.113

我的 Windows 7 NVIDIA 上的 GLUT 不知何故也无法正常工作。Sample`buffers`和`Samples`.

但是，freeglut 解决了这个问题，并为您提供了设置`Samples`.

```
glutSetOption(GLUT_MULTISAMPLE, 4);
glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH | GLUT_MULTISAMPLE); 
```

打开它

```
void glexMultisample(int msaa)
{
    if (msaa)
    {
        glEnable(GL_MULTISAMPLE);

        // detect current settings
        GLint iMultiSample = 0;
        GLint iNumSamples = 0;
        glGetIntegerv(GL_SAMPLE_BUFFERS, &iMultiSample);
        glGetIntegerv(GL_SAMPLES, &iNumSamples);
        printf("MSAA on, GL_SAMPLE_BUFFERS = %d, GL_SAMPLES = %d\n", iMultiSample, iNumSamples);
    }
    else
    {
        glDisable(GL_MULTISAMPLE);
        printf("MSAA off\n");
    }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T20:03:04.153

要在 2D 中消除点和线的锯齿，您还可以这样做：

```
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

glEnable(GL_LINE_SMOOTH);
glHint(GL_LINE_SMOOTH, GL_NICEST);

glEnable(GL_POINT_SMOOTH);
glHint(GL_POINT_SMOOTH, GL_NICEST); 
```

# android - 我应该在 contentDescription 属性中为字段分隔符等装饰图像添加什么？

> ID：10864879
> 
> 赞同：10
> 
> 时间：2012-06-02T18:30:15.507
> 
> 标签：android, accessibility

我给了一个空字符串。林特仍然抱怨。

```
<ImageView style="@style/DetailFieldSeparator"/>

<style name="DetailFieldSeparator">
  <item name="android:src">@android:drawable/divider_horizontal_textfield</item>
  <item name="android:layout_width">match_parent</item>
  <item name="android:layout_height">wrap_content</item>
  <item name="android:scaleType">fitXY</item>
  <item name="android:paddingTop">5dp</item>
  <item name="android:paddingBottom">5dp</item>
</style> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-09T02:17:50.803

您可以将纯装饰图像的内容描述设置为“@null”以避免 Lint 警告并让屏幕阅读器知道跳过该图像。

```
<ImageView
    style="@style/DetailFieldSeparator"
    android:contentDescription="@null" /> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-09T22:42:29.247

我通过在 res/values/string.xml 中创建一个文本来修复该警告。然后我只需要从我的所有图像视图中引用该文本

# php - PDO。数据库管理器类 - 非对象上的函数 query()

> ID：10864880
> 
> 赞同：1
> 
> 时间：2012-06-02T18:30:23.350
> 
> 标签：php, mysql, pdo

我的代码中有错误：

> 致命错误：在第 47 行对 ... 中的非对象调用成员函数 query()

第 47 行：

```
$query = $this->link->query("SELECT * FROM links ORDER BY DESC"); 
```

完整代码：

```
<?php

    class Manage{
        public $link;

        function __construct() {
            include_once 'class_database.php';
            $conn = new database;
            $this->link = $conn->connect();

            return $this->link;
        }

        function getData($table_name, $id=null){
            if(isset($id)){
                $query = $this->link->query("SELECT * FROM $table_name");
            }else{
                $query = $this->link->query("SELECT * FROM $table_name ORDER BY id ASC");
            }
            $rowCount = $query->rowCount();
            if($rowCount >=1)
            {
                $query->setFetchMode(PDO::FETCH_ASSOC);
                $result = $query->fetchAll();
            }
            else{
                $result = 0;
            }
            return $result;
        }

        function insertData($table_name, $fields_name, $bind_param, $field_values){
            $query = $this->link->prepare("INSERT INTO $table_name ($fields_name) VALUES      ($bind_param)");
            $query->execute($field_values);

            $rowCount = $query->rowCount();
            return $rowCount();
        }

        function deleteData($table_name, $id){
            $query = $this->link->query("DELETE FROM $table_name WHERE id = '$id'");
            $rowCount = $query->rowCount();
            return $rowCount;
        }

        function selectLinks(){
            $query = $this->link->query("SELECT * FROM links ORDER BY DESC");
            $rowCount = $query->rowCount();

            if($rowCount >=1)
            {
                $query->setFetchMode(PDO::FETCH_ASSOC);
                $result = $query->fetchAll();
            }
            else{
                $result = 0;
            }
            return $result;
        }
    } 
```

怎么修？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T21:37:00.663

关于“非对象”的错误是您的问题......数据库对象不是从一开始就创建的，因此对该不存在对象的后续操作将失败。您有关授权的附加信息是您必须修复的...正确授权并连接，然后将创建数据库对象，因此在您使用它时存在。

# android - Phonegap/Cordova - TypeError：表达式“navigator.network”[未定义]的结果不是对象

> ID：10864881
> 
> 赞同：5
> 
> 时间：2012-06-02T18:30:31.347
> 
> 标签：android, cordova

我`navigator.network.connection.type`用来获取设备的网络状态。但它显示了错误

```
TypeError: Result of expression 'navigator.network' [undefined] is not an object. 
```

我尝试使用 Phonegap 1.0.0、Cordova 1.7.0、Cordova 1.7.0rc1，但我仍然遇到同样的错误。

它在 iOS 上运行良好，但在 Android 上却不行。有人可以帮我弄这个吗？

这是我的代码：

```
<script type="text/javascript" charset="utf-8">
    document.addEventListener("deviceready",onDeviceReady,false);

    function onDeviceReady() {
        checkConnection();
        loaddb();
    }
    function checkConnection() {
        alert(navigator.network);
        if(navigator.network==undefined) {
            window.localStorage.setItem("internetAccessFlag","false");
        } else {
            var networkState = navigator.network.connection.type;
            var states = {};
            states[Connection.UNKNOWN]  = 'Unknown connection';
            states[Connection.ETHERNET] = 'Ethernet connection';
            states[Connection.WIFI]     = 'WiFi connection';
            states[Connection.CELL_2G]  = 'Cell 2G connection';
            states[Connection.CELL_3G]  = 'Cell 3G connection';
            states[Connection.CELL_4G]  = 'Cell 4G connection';
            states[Connection.NONE]     = 'No network connection';

            if(networkState==Connection.UNKNOWN || networkState==Connection.NONE) {
                window.localStorage.setItem("internetAccessFlag","false");
            } else {
                window.localStorage.setItem("internetAccessFlag","true");   
            }
            //alert(window.localStorage.getItem("internetAccessFlag"));
        }
    }
</script> 
```

**编辑：-**我正在使用 Cordova 1.7.0 和 plugins.xml

```
<plugin name="NetworkStatus" value="org.apache.cordova.NetworkManager"/> 
```

我和这有什么关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:07:11.080

这是非常适合我的代码：

```
<!DOCTYPE HTML>
<html>
  <head>
      <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
      <script type="text/javascript" charset="utf-8">

    var deviceInfo = function(){
      alert(navigator.network.connection.type);
    }

    function init(){
        console.log("GOT AN ONLOAD!!!")
        document.addEventListener("deviceready", deviceInfo, true);
    }
  </script>
  </head>
  <body onload="init();">
      A body...
  </body>
</html> 
```

另外，当您从 iOS 迁移到 Android 时，您是否使用过 Android 版本的 cordova.js？每个平台都有一个依赖于平台的cordova.js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T20:47:56.277

检查您的 phonegap 版本，然后为您正在使用的当前版本下载 PLUGIN。例如 Cordova 3.X：[http ://docs.phonegap.com/en/3.3.0/cordova_connection_connection.md.html](http://docs.phonegap.com/en/3.3.0/cordova_connection_connection.md.html)

# gcc - Stacktrace arm-linux-gcc

> ID：10864882
> 
> 赞同：3
> 
> 时间：2012-06-02T17:10:03.550
> 
> 标签：gcc, stack-trace, arm

我想转储我的程序的堆栈跟踪，作为[backtrace[3]](http://linux.die.net/man/3/backtrace)中演示的示例，但是我得到了下面的结果。

我正在使用**linux 2.6**和**arm-linux-gcc 4.3.2**。

跑步：
`arm-linux-gcc prog.c -o prog -rdynamic`

结果是：

> backtrace() 返回 1 个地址
> 
> /lib/ld-linux.so.3 [0x40025000]

你能帮我解决这个问题吗？

谢谢

* * *

我对 gcc 没有任何问题，但是我无法使用 arm-linux-gcc 获得跟踪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:40:29.380

根据[GCC ARM Options 文档](http://gcc.gnu.org/onlinedocs/gcc/ARM-Options.html)，您需要将*-mapcs-frame*选项传递给 GCC 以在 ARM 平台上生成堆栈帧。

> *-mapcs-frame*
> 为所有函数生成一个符合 ARM 过程调用标准的堆栈帧，即使这对于正确执行代码并不是绝对必要的。使用此选项指定*-fomit-frame-pointer*会导致不为叶函数生成堆栈帧。默认值为*-mno-apcs-frame*。

[**在对我的Linux 特定回答**](https://stackoverflow.com/a/1925461/203667)How to [generate a stacktrace when my gcc C++ app crash](https://stackoverflow.com/q/77005/203667)的评论中向我指出了这一点，您可能也会发现它很有用。

# c# - 无需担心超出字符串边界的简单子字符串方法？

> ID：10864883
> 
> 赞同：3
> 
> 时间：2012-06-02T18:31:13.927
> 
> 标签：c#, .net

我现在正在使用这样的部分字符串：

```
something.Substring(0, something.Length >= 8 ? 8 : something.Length) 
```

这种额外混乱的唯一原因是因为有时长度小于我在方法参数中输入的长度，这会导致错误。

*有没有更简单的方法来安全地*裁剪文本？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-02T19:13:04.787

这里真的不需要丑陋的三元表达式。

```
return something.Substring(0, Math.Min(length, something.Length)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-02T18:33:19.033

编写一个扩展方法`string`来隐藏“混乱”。

```
public static string SafeSubstring(this string orig, int length)
{
  return orig.Substring(0, orig.Length >= length ? length : orig.Length);
}

something.SafeSubstring(8); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-02T18:47:49.353

Visual Basic 实现 Right() 和 Left() 字符串函数。不妨偷他们，他们已经过很好的测试：

```
public static class Extensions {
    public static string Right(this string str, int Length) {
        if (Length < 0) throw new ArgumentOutOfRangeException("Length");
        if (Length == 0 || str == null) return string.Empty;
        int len = str.Length;
        if (Length >= len) return str;
        else return str.Substring(len - Length, Length);
    }
    public static string Left(this string str, int Length)
    {
        if (Length < 0) throw new ArgumentOutOfRangeException("Length");
        if (Length == 0 || str == null) return string.Empty;
        int len = str.Length;
        if (Length >= len) return str;
        else return str.Substring(0, Length);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T19:04:30.437

这不是最有效的方法，我会使用 Oded 的解决方案，但这也是实现您正在寻找的方法的一种方法：

```
new string(something.Take(8).ToArray()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-15T13:29:41.130

受[Hans Passant 的回答](https://stackoverflow.com/a/10864985/1633949)启发，这里有一种更直接的“窃取”Visual Basic 实现的方法。（*此方法需要添加对 Microsoft.VisualBasic.dll 的引用*）

```
public static class Extensions
{
    public static string Right(this string str, int Length) =>
        Microsoft.VisualBasic.Strings.Right(str, Length);

    public static string Left(this string str, int Length) =>
        Microsoft.VisualBasic.Strings.Left(str, Length);
} 
```

# eclipse - 在没有 Maven 的情况下使用 Eclipse/WTP 进行令牌替换

> ID：10864885
> 
> 赞同：3
> 
> 时间：2012-06-02T18:31:18.653
> 
> 标签：eclipse, eclipse-wtp

有什么方法可以让 Eclipse WTP 在发布/部署程序集上进行令牌替换？

我想在 web.xml 或属性文件中 有类似的标记`${hostname}`，在构建时从某些上下文中替换。`${environment}`

persistence.xml 中的一个具体示例：

```
<property name="javax.persistence.jdbc.url" value="${jdbc.url}"/> 
```

有没有什么方法可以在没有 Maven 管理我的构建的情况下使用 Eclipse/WTP 做到这一点？更准确地说，我可以让 WTP 逐步发布更改，而无需重新构建 WAR 中的每个类/资源并将其重新部署到服务器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:08:47.503

从用户的角度来看，我不相信有任何现有的方法可以挂钩 WTP 发布机制。但是，您可以创建一个 Eclipse 插件来挂钩 WTP 发布（甚至是增量发布）过程并将其安装到您的主机 Eclipse 环境中。

# .net - 以字母/_开头和（可能）在字母/数字/_之后的字符串的正则表达式

> ID：10864886
> 
> 赞同：3
> 
> 时间：2012-06-02T18:31:22.310
> 
> 标签：.net, regex, f#

为什么这个正则表达式不适用于字符串“Array a”？

```
let mutable line = "Array a"
let regexIdentifier = new Regex("^[a-zA-Z_][a-zA-Z0-9_]*$")   
line <- regexIdentifier.Replace(line, "\r\n$&\r\n")   //KEYWORDS separation
Console.WriteLine(line) 
```

（我希望程序将“Array”和“a”分开到不同的行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:39:25.223

中的空格`"Array a"`不匹配。

更好地使用正则表达式`"^[\w_]+ [\w_]+$"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:47:25.813

此模式将“Array a”分成两个不同的匹配项

```
string rPattern = @"\b[A-Za-z_][A-Za-z_0-9]+\b"; 
```

也适用于类似的字符串

```
"Exam_ple1 a9" 
```

*   限制了单词边界处的`\b`模式。（如果您之间有多个空格，这也会为输入文本返回两个匹配项）
*   第一个字符应来自 A-Za-z 范围或下划线（不是数字）。
*   以下字符应来自范围 A-Za-z0-9 或下划线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T20:57:54.773

^ 表示行首
$ 表示行尾
^[a-zA-Z_][a-zA-Z0-9_]*$ 表示从上到尾

使用@"[a-zA-Z_][a-zA-Z0-9_]*"

# c# - OAuth C# 服务器

> ID：10864888
> 
> 赞同：3
> 
> 时间：2012-06-02T18:31:37.213
> 
> 标签：c#, oauth

我想创建允许用户使用用户数据登录到另一个站点（如 FB）的门户。是否有任何 .NET OAuth 服务器实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:17:13.457

我试图在我的项目中使用[这个库](http://code.google.com/p/devdefined-tools/wiki/OAuth)（上面提到的那个）来在托管 RESTful web 服务的服务器上实现一个提供程序。关注[我的问题](https://stackoverflow.com/questions/11777665/c-sharp-oauth-provider)，看看我的表现如何！我希望这会起作用，以便对您和其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T18:37:54.713

至少有[一种实现](http://code.google.com/p/devdefined-tools/wiki/OAuth)出现在 Google 中。没用过，不知代码库是否符合最新标准：

# mysql - 为此用例选择的最佳数据库和硬件

> ID：10864889
> 
> 赞同：-3
> 
> 时间：2012-06-02T18:32:18.817
> 
> 标签：mysql, mongodb, bigdata, database, nosql

我将拥有一个包含 uuid、年龄、性别、家庭收入和 12 个这样的字段的用户表数据库。其中大约有 40 - 5000 万。我需要根据年龄范围、收入范围等进行查询，并获取 uuid 的列表。如果连接，每行应该是大约 400 个字符。将 400 字节乘以 50Mil 得到大约 17 - 18 GB 约。它会增长，但速度很慢。

这将是保存这些数据并执行快速查询的最佳数据库系统。蒙戈还是 MySQL？另外，最好保留哪种硬件。

另外，有人可以根据经验告诉 mySQL 或 Mongo 的查询时间吗？我需要在此基础上设计整个系统的一些其他组件的架构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:37:55.787

我不会说 40-50 百万条记录或 17-18GB 将被视为“大”。任何关系数据库都应该足够了。

任何现代服务器都足够了。Windows、Linux - 选择您最了解的那个。我想说64位是必需的。添加[足够的 RAM](https://serverfault.com/questions/31394/where-to-purchase-a-server-capable-of-512gb-of-ram)，您就可以将整个内容保存在内存中。

没有人能告诉您查询时间，因为它取决于太多因素：硬件、模式、索引等。最好的办法是自己计时并查看。

我认为您最大的问题将是按范围查询。这听起来不太像事务数据库，而更像是数据挖掘仓库。也许具有时间、位置、收入等维度的星型模式更适合您尝试做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:55:35.897

没有理由将所有这些信息存储在一个表中，尤其是具有那么多行的表。对于这么大的项目，我强烈建议学习关系数据库的工作原理以及索引的工作原理。您将要实现的方式在您投入的任何数据库或硬件上都会很慢。如果您将其设计为关系数据库，使用几个单独的表来存储内容并使用外键访问其他表，那么您将大大提高性能。

[这很干](http://www.deeptraining.com/litwin/dbdesign/FundamentalsOfRelationalDatabaseDesign.aspx)，但必不可少。你真的应该试着去很好地理解它。

此外，您应该阅读有关[索引](http://en.wikipedia.org/wiki/Database_index)的内容。每个数据库的功能都略有不同，因此您如何实现它取决于您选择的数据库。

我的意思是你会大大提高你的表现。我已经看到并重新设计了耗时 15-20 分钟的糟糕查询，通过关系数据库设计、索引和优化查询设计对它们进行了优化，并将它们减少到毫秒。

# objective-c - 访问数组对象

> ID：10864893
> 
> 赞同：0
> 
> 时间：2012-06-02T18:32:46.703
> 
> 标签：objective-c, xcode, arrays, object, nsmutablearray

我创建一个数组并用对象初始化它。我试图访问数组对象，但我得到一个（null）。我做错了什么？

```
 photoArray = [[NSMutableArray alloc] init];
    PhotoItem *photo1 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"1.jpg"] name:@"roy rest"  photographer:@"roy"];
    PhotoItem *photo2 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"2.jpg"] name:@"roy's hand" photographer:@"roy"];
    PhotoItem *photo3 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"3.jpg"] name:@"sapir first" photographer:@"sapir"];
    PhotoItem *photo4 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"4.jpg"] name:@"sapir second" photographer:@"sapir"];
    [photoArray addObject:photo1];
    [photoArray addObject:photo2];
    [photoArray addObject:photo3];
    [photoArray addObject:photo4]; 
```

我尝试通过这行代码访问其中一个对象（返回（null））：

```
photoName.text = [NSString stringWithFormat:@"%@", [[photoArray objectAtIndex:2] nameOfPhotographer]] 
```

更新：photoitem的代码：

```
-(id)initWithPhoto:(UIImage*)image name:(NSString*)photoName photographer:(NSString*)photographerName
{
    self = [super init];
    if(self)
    {
    imageItem = image;
    name = photoName;
    nameOfPhotographer = photographerName;

    //[self setName:photoName];
    //[self setNameOfPhotographer:photographerName];
    //[self setImageItem:image];
}
return self;
} 
```

问题是什么？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:59:05.757

你应该这样做：

> @property(strong, nonatomic) NSString* nameOfPhotographer;

而在`initWith....`

> self.nameOfPhotographer = 摄影师姓名；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T06:44:34.717

首先，确保您的 PhotoItem 接口文件与此类似：

```
@interface PhotoItem : NSObject
{
  UIImage *imageItem;
  NSString *name;
  NSString *photographer;
}

@property (nonatomic, retain) UIImage *imageItem;
@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSString *photographer;

@end 
```

其次确保你的实现部分是这样的：

```
@implementation PhotoItem
@synthesize imageItem, name, photographer;

-(id)initWithPhoto:(UIImage*)image name:(NSString*)photoName photographer:(NSString*)photographerName
{
  self = [super init];

  if(self)
  {
    self.imageItem = image;
    self.name = photoName;
    self.photographer = photographerName;
  }

  return self;
}

- (NSString *)description
{
  return [NSString stringWithFormat:@"name:%@\nphotographer:%@", self.name, self.photographer];
}

@end 
```

现在，由于 description 是您记录对象时对对象的默认调用，因此您现在可以真正轻松地诊断您的问题。

我添加了类文件来向您展示属性是多么方便。

现在，当您想访问时说出摄影师的姓名，只需执行以下操作：

```
photo1.photographer 
```

好的，现在在您的代码中，不要立即将所有内容都放入数组中，而是这样做以确保一切正常：

```
PhotoItem *photo1 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"1.jpg"] name:@"roy rest"  photographer:@"roy"];

NSLog(@"%@", [photo1 description]); 
```

它们实际上应该是，我给你的类代码应该可以正常工作。现在根据需要将它们全部放入一个数组中，并确保数组中的所有内容都符合要求，请执行以下操作：

```
NSLog(@"%@", photoArray); //Description is the default when logging an object
//An array will call the description method on each of it's containing objects 
```

希望这可以帮助！

# json - 尝试使用 segues 将 Array 传递给 detailViewController？

> ID：10864896
> 
> 赞同：0
> 
> 时间：2012-06-02T18:33:02.417
> 
> 标签：json, ios5, dataview, uistoryboard, uistoryboardsegue

好的，所以我试图将解析的 JSON 数据数组传递给 detailViewController，但它发送空数据（不正确）。我不确定我的 segue 方法有什么问题。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    if ([[segue identifier] isEqualToString:@"ShowSelectedServers"])
    {
        DetailsViewController *detailViewController = [segue destinationViewController];

        NSIndexPath *selectedRowIndex = [_tableView indexPathForSelectedRow];

        detailViewController.data = [_data objectAtIndex:selectedRowIndex];
    }
} 
```

# git - github是否允许预接收挂钩？

> ID：10864903
> 
> 赞同：41
> 
> 时间：2012-06-02T18:33:28.480
> 
> 标签：git, github

GitHub 是否允许预接收或更新挂钩？

我想做的是防止主要分支被推送到（即主分支、修补程序、开发），并要求它们通过 GitHub 拉取请求合并。这是一个私人仓库，所以 GitHub 风格的分叉不是一个选项。

任何关于如何实现这一点的建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-02T19:51:34.663

只有您列出“合作者”的人才能推送到 Github 托管的存储库。请参阅存储库的“管理”页面以添加协作者。其他所有人都需要提交“拉取请求”以使存储库管理员接受他们的添加。请参阅[Github 访问权限](https://help.github.com/articles/what-are-the-different-access-permissions)。（没有每个分支的访问权限。）因此，为了实现您的目标，您不需要钩子；你需要的东西已经内置了。

两个注意事项：

1.  私有 Github 存储库可以有多个贡献者
2.  鉴于挂钩包含任意代码，Github 支持预接收挂钩（或任何其他服务器挂钩）是不寻常的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-04-27T17:06:08.747

尽管 GitHub 本身不允许预接收挂钩，但 GitHub Enterprise 2.6 版确实包含预接收挂钩支持。关于它的更多信息可以在这里找到：[https](https://help.github.com/enterprise/admin/guides/developer-workflow/using-pre-receive-hooks-to-enforce-policy/) ://help.github.com/enterprise/admin/guides/developer-workflow/using-pre-receive-hooks-to-enforce-policy/ 。这些是实例范围的预接收挂钩，可防止将任何信息推送到任何存储库中。

> 我想做的是防止主要分支被推送到（即主分支、修补程序、开发），并要求它们通过 GitHub 拉取请求合并。

但是，到目前为止，您可以使用受保护的分支配置 GitHub 或 GitHub Enterprise 存储库。这样做是为了防止分支被删除、强制推送、只有某些人或团队可以合并，或者在允许合并之前需要通过状态检查。请参阅[https://help.github.com/articles/about-protected-branches/](https://help.github.com/articles/about-protected-branches/)了解更多信息！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-05T14:38:09.537

如果你正在与一个值得信赖的团队合作（我假设你是这样，因为它是一个私人仓库）并且你想实现这个只是为了防止人们出于纯粹的习惯而意外违反你的标准操作程序，最好的办法是分发`pre-push`每个人都可以安装到他们的`.git/hooks`目录中的自定义钩子脚本。（我最近做了类似的事情，坚持让每个人都运行`git config branch.autosetuprebase always`隐式更改`git pull`以`git pull --rebase`在存在本地未推送提交时消除不必要的合并）

如果由于某种原因不起作用，我发现事后失去提交者权利的威胁通常是保持人们诚实的有效机制。

# glassfish - Glassfish v3 servlet 容器

> ID：10864904
> 
> 赞同：7
> 
> 时间：2012-06-02T18:33:34.333
> 
> 标签：glassfish

我想知道 Glassfish 中的 servlet 容器是什么。在一些资料中，我看到 Glassfish 使用了 Grizzly 之类的东西，但 Grizzly 是一个 Web 框架：

> Grizzly NIO 和 Web 框架旨在帮助开发人员利用 Java™ NIO API。Grizzly 的目标是帮助开发人员使用 NIO 构建可扩展且强大的服务器，我们还提供扩展的框架组件：Web 框架 (HTTP/S)、Bayeux 协议、Servlet、HttpService OSGi 和 Comet。

这是什么意思？Glassfish 是否使用 Grizzly 作为 Web 容器。或者可能是 Tomcat 和 Grizzly 作为扩展？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T19:20:50.523

Grizzly 是 HTTP 连接器。Glassfish 使用 Tomcat 引擎 (Catalina) 的一个分支作为 servlet 容器。一个简单的证据是在您的业务代码中发生某些异常时检查堆栈跟踪。您将`org.apache.catalina.*`在跟踪的深处，在`com.sun.grizzly.*`您自己的业务代码的行与行之间看到。它通常看起来像这样：

```
...
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:680) 
```

顺便说一句，Glassfish 不是唯一使用 Catalina 的，JBoss AS 和 IBM WebSphere 也使用它。

# android - Android：adb：将文件复制到 /system（权限被拒绝）

> ID：10864907
> 
> 赞同：16
> 
> 时间：2012-06-02T18:34:00.650
> 
> 标签：android, permissions, push, adb

实际上我尝试在我的 HTC Desire 上安装busybox。因此我尝试将busybox-binary 复制到/system/bin。所以我用 rw 重新安装了 /system：

```
mount -o rw,remount -t ext3 /dev/block/mmcblk1p21 /system 
```

在此之后，我没有收到“只读文件系统”错误。但是现在我在尝试将文件推送到 /system/bin 时遇到“权限被拒绝”。我还尝试将我的文件推送到 /sdcard，然后将其移动到 /system/bin，但这也不起作用：

```
$ mv /sdcard/busybox /system/bin
failed on '/sdcard/busybox' - Cross-device link 
```

一些想法，如何解决这个问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-12T07:19:07.083

挂载是不够的，你必须以 root 身份运行（这就是权限被拒绝的原因）。这就是我推动busybox的方式：

```
adb root
adb remount
adb push busybox /system/bin 
```

我遇到了一些您需要重新安装的设备，`mount -o remount,rw /system`而不是`adb remount`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T20:17:54.293

做一个`mount`检查设备是否真的被重新安装为 RW。

同样的错误发生在我身上，然后我简单地做了一个 cp orig dest，然后在 orig 上做了一个 rm，很奇怪，但 seams mv 的行为是这样的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-10T21:55:56.227

不确定，但既然您询问了想法，我会提到我从未指定 -t 选项。

`mount -o remount,rw /system`

一直为我工作

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-15T08:49:53.823

mv 只是*在单个文件系统*中移动硬链接。如果要在两个文件系统之间移动文件，则需要复制然后删除原始文件。例如

```
if ( cp -R /sdcard/busybox /system/bin ); then
rm -fR /sdcard/busybox
fi 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-13T23:05:39.183

如果某些命令不起作用，请尝试将busybox放在它前面。（如果已安装）

前任

```
root@android:/ # mv /sdcard/androidLTheme/bootanim/bootanimation.zip /system/media/
failed on '/sdcard/androidLTheme/bootanim/bootanimation.zip' - Cross-device link
root@android:/ # _ 
```

但

```
root@android:/ # busybox mv /sdcard/androidLTheme/bootanim/bootanimation.zip /system/media/
root@android:/ # _ 
```

# iphone - 在应用程序启动时设置状态栏样式

> ID：10864913
> 
> 赞同：0
> 
> 时间：2012-06-02T18:35:38.377
> 
> 标签：iphone, ios, statusbar, launching

状态栏样式设置如下：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
[application setStatusBarStyle:UIStatusBarStyleBlackOpaque];
} 
```

但是应用启动时的状态栏样式是`UIStatusBarStyleDefault`. 应用启动时如何设置状态栏样式？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T18:42:04.460

转到您的项目，将键值对添加到 project-Info.plist

```
Key = UIStatusBarStyle
Value = UIStatusBarStyleBlackOpaque 
```

这将使默认状态栏变为 UIStatusBarStyleBlackOpaque

有关更多信息，请查看以下 [如何更改 UIStatus 栏颜色？](https://stackoverflow.com/questions/3762013/how-to-change-the-uistatus-bar-color)

# html - 为什么 VS 2012 RC 在 Web 工具栏中同时具有“DOCTYPE: HTML5”和“HTML5”？

> ID：10864914
> 
> 赞同：2
> 
> 时间：2012-06-02T18:35:55.803
> 
> 标签：html, visual-studio

我刚刚安装了 VS 2012 RC，在 HTML 工具栏下拉列表中它具有以下两个：

*   文档类型：HTML5
*   HTML5

两个 HTML5 选项有什么区别？我认为 HTML5 的建议是不指定 DOCTYPE，所以第一个选项有点像“你想要一些咖啡因和无咖啡因吗？”

注意：除非您正在编辑 HTML 页面并且不用于任何类型的代码生成，否则该工具栏将被禁用。工具栏选择与验证您正在编辑的文件的内容有关（无论是整页、布局还是部分视图），我正在寻找究竟选择一个选项或另一个。

如果任何答案都是基于实际知识，而不是猜测添加的“DOCTYPE：”前缀可能暗示什么，我也会很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-09T19:36:55.727

答案来自：[https ://stackoverflow.com/a/14944039/1145177](https://stackoverflow.com/a/14944039/1145177)

关于 HTML5 vs. DOCTYPE:HTML5 问题，这是我在使用 VS 2012 RTM 时观察到的：

DOCTYPE:{value} 选项告诉 VS 检查您的页面并尝试从 DOCTYPE 和 html 标签中找出要应用的验证级别。例如，如果我创建一个以如下开头的页面：

```
<!DOCTYPE html>
<html>
... 
```

然后 DOCTYPE:{value} 选项变为 DOCTYPE: HTML5。但是，如果我的页面是这样开始的：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
... 
```

然后它变成 DOCTYPE: XHTML5。

没有 DOCTYPE: 前缀的选项强制 VS 使用选定的验证级别，而不管页面的结构/内容可能建议什么。

# php - 将数组插入mysql

> ID：10864922
> 
> 赞同：0
> 
> 时间：2012-06-02T18:38:20.117
> 
> 标签：php, mysql, arrays

我有一个 mysql 表，我在其中跟踪成员和他们的朋友，在该表内我有一个名为“朋友”的字段。因此，如果成员 frends 请求另一个成员，则该字段将更新为具有各自 id 的两者。

例如：如果成员 id: 125 朋友请求成员 id: 10 然后我插入字段 10, 125 为成员 125 和 125, 10 为成员 10。为了更好地解释这里是我的代码。

问题是，如果用户没有任何以前的朋友，查询仍然会更新朋友字段并插入“Array, 125”而不是插入“10, 25”。

```
$friends = '';

$friendArray = explode(",", $friendArray);
$friendCount = count($friendArray);

if($friendArray != "" && !is_null($friendArray))
{
    $sum = '<h1> '.$friendArray.'\'s friends('.$friendCount.') </h1>';
} 
```

但是 count 变量输出 1 而不是 0！并且该字段为NULL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:42:11.790

这对我来说听起来像是一个糟糕的设计。它打破了正常的形式。您不必解析该列来找出关系。

更好的解决方案是使用外键。一个人可以有很多朋友，所以在你的模式中建立一个 1:m 的关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T18:42:30.967

不要这样做。这不是关系数据库设置 - 这更像是 MongoDB 类型的设置。对于 MySQL，创建一个“friends”表并创建数据映射。

```
+----+-------------+-------------------+
| ID | User_ID     | Friend_ID         |
+----+-------------+-------------------+
| 1  | 102         | 213               |
| 2  | 64          | 23                |
| 3  | 4           | 344               |
| 4  | 102         | 2                 |
| 5  | 102         | 90                |
| 6  | 64          | 88                |
+----+-------------+-------------------+ 
```

这假设它是一种相互的友谊。如果朋友 ​​B 不想和朋友 A 成为朋友，那么朋友 A 就不能和朋友 B 成为朋友。

# html - 显然 Chrome 不认为 0 是一个数字？

> ID：10864923
> 
> 赞同：1
> 
> 时间：2012-06-02T18:38:24.547
> 
> 标签：html, google-chrome, chromium

让我们看一下这段 HTML 代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Test</title>
    </head>
    <body>
        <form name='test'>
            <input type='number' min='0' max='255' step='10' name='testValue' value='50'>
        </form>
    </body>
</html> 
```

所以，这是一个应该接受从 0 到 255 的任何数字的字段，对吧？嗯，不完全是。

在 Chrome 21.0.1155.2 中，您可以在此字段中输入任何内容，但输入任何小于零或大于 255 的内容将导致无法提交表单。唯一的例外是，**如果您输入 0，该值将返回到您更改之前的值**。在这里，自己尝试一下：http: [//pastehtml.com/raw/c05v9ofph.html](http://pastehtml.com/raw/c05v9ofph.html)

这是 Chrome 中的错误还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:16:04.553

这是[Chrome 中已确认的错误](http://code.google.com/p/chromium/issues/detail?id=130910)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:53:47.363

我使用 Chrome，提交 0 没有问题

我还发现它允许我提交 -0，因为它在提交时显示在地址栏中。

这意味着您的代码中有一个使用 int 作为字符串的错误。

# ios - CALayer setCornerRadius 在 iPad 的 UITableView 中滞后？

> ID：10864925
> 
> 赞同：0
> 
> 时间：2012-06-02T18:39:22.457
> 
> 标签：ios, ipad, uitableview, lag

我正在为 iPhone/iPad 制作一个通用应用程序，以下代码似乎有很多滞后：

```
CALayer *imageLayer = [cell.myImageView layer];
[imageLayer setMasksToBounds:YES];
[imageLayer setCornerRadius:6.0]; 
```

奇怪的是，iPhone 版本没有滞后，而 iPad 版本有一些滞后。我对两种设备之间的代码没有区别，但是如果我注释掉上面的代码，那么这两种设备上的一切似乎都很好。但是，我仍然想要我的 UIImageView 上的圆角，“myImageView”。

我只在第一个单元初始化期间在 cellForRowAtIndexPath 中执行那段代码，因为我的所有单元都是相同的。

有谁知道为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:30:57.880

CALayer 操作正在使用大量的 cpu 功率来绘制。

所以最好的解决方案是使用核心图形绘制图像。Loren Brichter 是第一个向我们展示如何：

这是他的 ABTableViewCell 标头 (.h) 文件的代码

```
// Copyright (c) 2008 Loren Brichter
// 
// Permission is hereby granted, free of charge, to any person
// obtaining a copy of this software and associated documentation
// files (the "Software"), to deal in the Software without
// restriction, including without limitation the rights to use,
// copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the
// Software is furnished to do so, subject to the following
// conditions:
// 
// The above copyright notice and this permission notice shall be
// included in all copies or substantial portions of the Software.
// 
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
// OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
// HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
// WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
// OTHER DEALINGS IN THE SOFTWARE.
//
//  ABTableViewCell.h
//
//  Created by Loren Brichter
//  Copyright 2008 Loren Brichter. All rights reserved.
//

#import <UIKit/UIKit.h>

// to use: subclass ABTableViewCell and implement -drawContentView:

@interface ABTableViewCell : UITableViewCell
{
    UIView *contentView;
}

- (void)drawContentView:(CGRect)r; // subclasses should implement

@end 
```

这里是 impelementation (.m) 文件的代码：

```
// Copyright (c) 2008 Loren Brichter
// 
// Permission is hereby granted, free of charge, to any person
// obtaining a copy of this software and associated documentation
// files (the "Software"), to deal in the Software without
// restriction, including without limitation the rights to use,
// copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the
// Software is furnished to do so, subject to the following
// conditions:
// 
// The above copyright notice and this permission notice shall be
// included in all copies or substantial portions of the Software.
// 
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
// OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
// HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
// WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
// OTHER DEALINGS IN THE SOFTWARE.
//
//  ABTableViewCell.m
//
//  Created by Loren Brichter
//  Copyright 2008 Loren Brichter. All rights reserved.
// 

#import "ABTableViewCell.h"

@interface ABTableViewCellView : UIView
@end

@implementation ABTableViewCellView

- (void)drawRect:(CGRect)r
{
    [(ABTableViewCell *)[self superview] drawContentView:r];
}

@end

@implementation ABTableViewCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    if ((self = [super initWithStyle:style reuseIdentifier:reuseIdentifier])) {
        contentView = [[ABTableViewCellView alloc]initWithFrame:CGRectZero];
        contentView.opaque = YES;
        [self addSubview:contentView];
    }
    return self;
}

- (void)setFrame:(CGRect)f
{
    [super setFrame:f];
    CGRect b = [self bounds];
    b.size.height -= 1; // leave room for the seperator line
    [contentView setFrame:b];
}

- (void)setNeedsDisplay
{
    [super setNeedsDisplay];
    [contentView setNeedsDisplay];
}

- (void)drawContentView:(CGRect)r
{
    // subclasses should implement this
}

@end 
```

现在您需要做的是使用 Core Graphics 在 drawContentView 方法中绘制您的单元格。

这是我在正在开发的应用程序中使用的部分代码：

```
 CALayer *cellLayer = [[CALayer alloc] init];
    CGRect cellFrame = self.bounds;
    CGRect layerFrame = CGRectInset(cellFrame, 3, 3);

    cellLayer.frame = cellFrame;
    cellLayer.contentsScale = [[UIScreen mainScreen] scale];

     //round corners in Core Graphics (much faster than using the CALayer cornerRadius)
     UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO, [[UIScreen mainScreen] scale]);

     CGContextRef imgContext = UIGraphicsGetCurrentContext();

    CGContextSaveGState(imgContext);  
    //create the rounded rectangle to draw the image in
    CGPathRef clippingPath = [UIBezierPath bezierPathWithRoundedRect:layerFrame cornerRadius:6.0f].CGPath;
    CGContextAddPath(imgContext, clippingPath);
    CGContextClip(imgContext);

CGDataProviderRef imgDataProvider = CGDataProviderCreateWithCFData((__bridge CFDataRef)[NSData dataWithContentsOfFile:ImageName]);
            CGImageRef imageRef = CGImageCreateWithJPEGDataProvider(imgDataProvider, NULL, true, kCGRenderingIntentDefault);
            CGDataProviderRelease(imgDataProvider);
            CGContextDrawImage (imgContext, layerFrame, imageRef);
            CGImageRelease(imageRef);

CGContextRestoreGState(imgContext);

        //draw white outline
        CGPathRef path = [UIBezierPath bezierPathWithRoundedRect:CGRectInset(cellFrame, 3, 3) cornerRadius:6.0f].CGPath;
        CGContextAddPath(imgContext, path);
        CGContextSetLineWidth(imgContext, 2.0);
        CGContextSetRGBStrokeColor(imgContext,1,1,1,1);
        CGContextStrokePath(imgContext);

        // Get the image from the context
        UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        cellLayer.contents = (__bridge id)img.CGImage; 
```

要使用自定义单元格，您需要以这种方式在 tableView CellForRowAtIndexPath 数据源方法中对其进行初始化：

```
 static NSString *CellIdentifier = @"TableCell";

    ABTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {        
        cell = [[ABTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
} 
```

还请记住，由于您正在进行自定义绘图，因此当您使用以下方法修改自己的内容时，您需要始终重新调整单元格视图：

```
[cell setNeedsDisplay]; 
```

# jquery - 用jquery过滤动态html

> ID：10864929
> 
> 赞同：3
> 
> 时间：2012-06-02T18:39:51.880
> 
> 标签：jquery

我正在尝试通过 jquery 创建一些动态 html，将其过滤到我感兴趣的部分，并将该部分 html 附加到页面上的现有元素但它不起作用。我在这个小提琴中做错了什么？

[http://jsfiddle.net/3zKeL/4/](http://jsfiddle.net/3zKeL/4/)

HTML：

```
<div id="output">This is the output:<br></div> 
```

问：

```
var response = "<html><body><h1>hello</h1></body></html>";
$(response).filter("body").appendTo("#output"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T18:42:40.590

```
$(response)
          .filter(function() { 
             return $("body");
          })
          .appendTo("#output"); 
```

[**演示**](http://jsfiddle.net/thecodeparadox/3zKeL/5/)

你也可以这样做

```
$('<div/>')           // add response to fake div
    .append(response)  
    .find('body')     // find your target
    .appendTo('#output'); // append the target 
```

**[演示](http://jsfiddle.net/thecodeparadox/3zKeL/13/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T22:13:59.923

好的，想通了。jQuery 在动态生成的 html 中遇到“html”和“body”标签时会默默地呕吐。我只需要更换或剥离这些标签，现在它可以按预期工作。

[http://jsfiddle.net/pqyeM/13/](http://jsfiddle.net/pqyeM/13/)

```
var response = "<html><head><title>test</title><style>body{font-size:.9em;}</style></head><body bgcolor=\"white\"><h1>hello</h1></body></html>";

// we have to remove/replace certain tags or jquery will vomit with unexpected results
var modifiedResponse = response.replace("<html>", "").replace("</html>", "").replace("<body", "<div id='content'").replace("</body>", "</div>");

var wrappedSet = $(modifiedResponse);

wrappedSet.filter("div[id='content']").appendTo("#output"); 
```

# c - 我不知道 C 中的“检测到 glibc”

> ID：10864931
> 
> 赞同：-5
> 
> 时间：2012-06-02T18:39:56.050
> 
> 标签：c, unix, glibc

当我结束我的程序时，我发现像这样的“检测到 glibc”消息。但是，我不知道这是错误或警告，否则..有人可以解释这条消息的含义以及我该怎么做吗？

![在此处输入图像描述](../Images/229d6a62fa7d1a8a80a548284038024c.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T18:53:02.700

这意味着您的程序中有堆损坏。您可能使用 分配了一些内存`malloc`，但在实际范围之外写入，从而破坏了堆。当您调用 时`free`，glibc 检测到损坏并报告它（具体来说，下一个空闲块的大小被覆盖）。

你绝对应该解决这个问题。 [Valgrind](http://valgrind.org)可以在跟踪实际导致堆损坏的代码方面提供巨大帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T19:08:45.183

您已经破坏了程序中某处的堆。您可能已经使用`realloc`和编写了外部内存`malloc`。但是当你试图释放内存时，`malloced`内存被释放了，但是你写的越界内存也没有，这导致你得到的损坏错误。有一些工具，例如：[Debugging for Windows](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)以及[electricfence](http://perens.com/FreeSoftware/ElectricFence/)、[dmalloc](http://dmalloc.com/)、[valgrind](http://valgrind.org/)。此外，您可能需要检查循环，因为它可能是简单的`while loop`或`for loop`由于未正确检查循环中的边界或限制而导致错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-02T18:55:09.240

你破坏了堆，所以你在内存管理的某个地方犯了一个错误；使用[Valgrind](http://valgrind.org/ "瓦尔格林德")之类的工具来查找和修复此类错误。

# javascript - 多个 Javascript 文件创建警报框

> ID：10864935
> 
> 赞同：1
> 
> 时间：2012-06-02T18:41:06.033
> 
> 标签：javascript, alert

我得到了一个项目——一个 HTML 页面包含大约 45 个不同的 javascript 文件。当我单击某些元素时出现警报框 - 哪个 javascript 文件发出警报？我如何确定这一点，最好是javascript文件中的哪一行，但我可以从哪个文件开始......

如果这可以在网络浏览器中完成（我不在乎哪个网络浏览器），请告诉我如何......我已经查看了 chrome 中的资源选项卡，但它对我没有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:43:40.263

使用文本编辑器替换所有

```
alert 
```

经过

```
console.log 
```

然后使用[Chrome 检查器](https://developers.google.com/chrome-developer-tools/docs/console)查看日志的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:49:04.687

在页面顶部包含您自己的 javascript 文件并使用以下命令预定义警报：

```
alert = function(msg) {
     alert(msg); // put breakpoint here
} 
```

然后使用调试器（Firefox 中的 Firebug，或 Chrome 中的开发者工具）设置断点，如上所述。调试器中的堆栈跟踪视图将显示哪个脚本行/文件正在创建警报

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T19:27:45.493

在 Firebug 中使用分析器

控制台 -> 配置文件 -> 单击以启用。它将显示所有正在调用的函数，搜索该函数名称，并添加断点进行调试。

# java - NetBeans 7.1 中的 JavaFX 2.1 CSS 样式警告

> ID：10864936
> 
> 赞同：1
> 
> 时间：2012-06-02T18:41:10.257
> 
> 标签：java, css, netbeans, javafx, fxml

我收到了无法弄清楚的警告，或者至少是一种将它们从我的项目中隐藏起来的方法，因为它对我的应用程序没有很好的影响。

```
WARNING: com.sun.javafx.css.StyleHelper lookup Could not resolve '-fx-shadow-highlight-color' while resolving lookups for '-fx-background-color' from rule '*.text-field' in stylesheet jar:file:/C:/Program%20Files/Oracle/JavaFX%202.1%20Runtime/lib/jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.css
WARNING: com.sun.javafx.css.StyleHelper lookup Could not resolve '-fx-shadow-highlight-color' while resolving lookups for '-fx-background-color' from rule '*.text-field' in stylesheet jar:file:/C:/Program%20Files/Oracle/JavaFX%202.1%20Runtime/lib/jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.css
WARNING: com.sun.javafx.css.StyleHelper lookup Could not resolve '-fx-focus-color' while resolving lookups for '-fx-background-color' from rule '*.text-field:focused' in stylesheet jar:file:/C:/Program%20Files/Oracle/JavaFX%202.1%20Runtime/lib/jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.css
WARNING: com.sun.javafx.css.StyleHelper lookup Could not resolve '-fx-focus-color' while resolving lookups for '-fx-background-color' from rule '*.text-field:focused' in stylesheet jar:file:/C:/Program%20Files/Oracle/JavaFX%202.1%20Runtime/lib/jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.css 
```

他们只是链接到 javafx 核心文件，不知道如何解决这些问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T03:22:17.723

```
#header {  
  -fx-background-image: url("../images/header-background.png");
}
#header .button {
  -fx-cursor: hand;  
  -fx-background-color: #cacaca;    
  -fx-background-repeat: no-repeat;  
  -fx-effect: dropshadow( three-pass-box , #000000 , 10, 0.5 , 0 , 0 );
}

#button1 { -fx-background-image: url("../images/dashboard-icon.png"); }
#button2 { -fx-background-image: url("../images/user-icon.png"); }
#button3 { -fx-background-image: url("../images/product-icon.png"); }
#button4 { -fx-background-image: url("../images/category-icon.png"); }
#button5 { -fx-background-image: url("../images/settings-icon.png"); }

#header .button:hover {
  -fx-background-color: #f0f0f0;  
}
#header .button:focused {
  -fx-background-color: #f0f0f0;
}
#account {
  -fx-background-image: url("../images/blue-background.jpg");
  -fx-border: 1px;
  -fx-border-color: #13273f;
}
#dashboard {
  -fx-background-image: url("../images/dashboard-background.png");
}
.controlPanel {
  -fx-background-image: url("../images/header-background.png");
}
.controlPanel .text-field, .controlPanel .text-area {
  -fx-background: none;
  -fx-text-fill: white;
  -fx-border: 1px;
  -fx-border-color: rgb(0,0,0);
  -fx-font-size: 16px;
  -fx-padding: 0 10px;
}

.controlPanel .label {
  -fx-font-size: 16px;
  -fx-text-fill: white;
}
.validatedFields.error {
  -fx-background-image: url("../images/error-icon.png");
  -fx-background-repeat: no-repeat;
  -fx-background-position: 265 center;  
}
.validatedFields.clean {
  -fx-background-position: -50 -50;
}
.category_label.selected {
  -fx-border: 1px;
  -fx-border-color: black;
}
.category_label.clear {
  -fx-border: 0px;
}

.level_vbox {  
  -fx-background-image: url("../images/blue-background.jpg");

}

#productPane {
  -fx-background: none;
}
#hBox1 {
  -fx-background: none;
} 
```

和其他 css 文件

```
#AnchorPane {
  -fx-background: none;
  -fx-background-image: url("../images/background.jpg");
}

#username_icon {
  -fx-background-image: url("../images/username-icon.png");
}

#password_icon {
  -fx-background-image: url("../images/password-icon.png");
}

.text-field {
  -fx-background: none;
  -fx-padding: 0 40 0 40;
  -fx-text-fill: rgb(255, 255, 255);
  -fx-border: 1px;
  -fx-border-color: rgb(0,0,0);
  -fx-line-height:20px;
  -fx-hpos: RIGHT;
}

#login_button {
  -fx-background-image: url("../images/login-button.png");
  -fx-border: none;
}

#login_button:hover {
  -fx-background-image: url("../images/login-hover.png");
}

#username_error_icon {
  -fx-background-image: url("../images/error-icon.png");
}
#password_error_icon {
  -fx-background-image: url("../images/error-icon.png");
} 
```

# git - 当'test'是'dev'的一个分支时，如何将'test'分支变成'master'？

> ID：10864937
> 
> 赞同：1
> 
> 时间：2012-06-02T18:41:24.473
> 
> 标签：git, github, git-branch

查看 github 项目的网络图，我看到了 3 个感兴趣的分支；大师，测试，开发。

进一步查看 github 网络图，我被引导相信 test 是 dev 的一个分支，而不是 master 的一个分支。

在某个时候，我会想把测试的内容放到master中。

我是否需要删除 master 并从 test 中创建一个名为 master 的新分支才能将测试“获取”到 master 中？顺便说一句，我想保留主历史记录，以便在需要时回滚到更早的提交。所以，删除听起来很糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:45:28.330

你应该合并`test`到`master`那时。

```
$ git checkout master
$ git merge test 
```

像“test 是 dev 的一个分支，而不是 master 的一个分支”这样的陈述在 Git 中并不是真的。`test`可能已经从 的提交中分支出来`dev`，但假设在某个时候分支了，那么传递属性`dev`也分支了。`master``test``master`

# android - 可以在android中动态地将控件添加到TableRow吗？

> ID：10864945
> 
> 赞同：0
> 
> 时间：2012-06-02T18:42:22.737
> 
> 标签：android, tablelayout

我尝试将按钮动态添加到 TableRow，但遇到了错误。

布局xml

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="wrap_content" android:layout_height="wrap_content"  android:layout_centerInParent="true" android:id="@+id/layout" >
<TableRow android:id="@+id/jumble">
</TableRow>
</TableLayout> 
```

错误线

```
TableRow tr = (TableRow) findViewById(R.id.jumble); 
```

得到一个空异常。

甚至有可能做到这一点吗？或者我必须将 TableRow 动态添加到 TableLayout？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:46:51.293

我相信你必须先找到父 ViewGroup，然后从中获取子视图。

```
TableLayout layout = (TableLayout) findViewById(R.id.layout);
TableRow row = layout.findViewById(R.id.jumble);
// add buttons to the row 
```

这是假设您已在其 onCreate 方法中将 TableLayout 设置为活动的主要布局。

```
setContentView(R.layout.layout); 
```

# c# - 为什么 List 有实际原因吗 .IndexOf(T) 不返回可为空的 int？

> ID：10864947
> 
> 赞同：9
> 
> 时间：2012-06-02T18:42:27.017
> 
> 标签：c#, list, nullable

如果找到，该方法[`List<T>.IndexOf()`](http://msdn.microsoft.com/en-us/library/8bd0tetb.aspx)返回[整个 List 中第一次出现的 item 的从零开始的索引；否则，–1](http://msdn.microsoft.com/en-us/library/e4w08k17.aspx)。

我看到了这与我刚刚在[Code Complete](http://www.cc2e.com/Default.aspx)中读到的内容之间的相似之处，这告诉我“避免使用具有隐藏含义的变量”。

> 例如：变量 pageCount 中的值可能表示打印的页数，除非它等于 -1，在这种情况下，它表示发生了错误。

好吧，我不知道意思是否“隐藏”，因为它的记录足够清楚，但**null似乎比****-1**向我传达了更好的含义，而且[.HasValue](http://msdn.microsoft.com/en-us/library/sksw8094.aspx)读起来比**> -1**更好。据我所知，List 和可为空的类型都是在 C# 2.0 中引入的，所以我认为重新调整 an 的原因`int`与向后兼容性无关。那么，您知道是否有原因，或者这是否只是某人忘记实施的事情，而我们现在必须永远忍受这个错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-02T18:49:17.793

List 与 2.0 版本的运行时一起发布，T 也是可空的。但 List 实现了[IList](http://msdn.microsoft.com/en-us/library/system.collections.ilist.indexof.aspx)，它与 1.0 版本的运行时一起存在，它不仅没有可空而且不支持泛型。为了满足 IList 接口的约定，实现者必须在 indexof 失败时返回 -1。Code complete 还认为您必须满足您同意的合同，因此 List.Indexof 必须返回 -1。

* * *

回复评论：

到带有泛型的 2.0 运行时，已经有数千个针对非泛型版本编写的应用程序。通过支持泛型接口作为非泛型接口的扩展，可以最有效地迁移该代码。此外，图像必须具有相同名称和 90% 相同用法的类，但在几个方法的情况下，语义完全不同。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T18:47:33.550

`System.Collections.Generic.List`可能已经在 .NET 2.0 中引入，以及可为空的，但 -1 的使用早于它。 `ArrayList.IndexOf()`, `Array.IndexOf()`, `String.IndexOf()`,`SelectedIndex`列表框等。所以`List<T>`很可能为了与现有库保持一致而做了同样的事情。（事实上​​，即使是经典的 VB 也有这个含义，所以它甚至早于 .NET 1.0）

正如[@rerun](https://stackoverflow.com/a/10864994/103167)指出的那样，这不仅仅是风格上的一致性，它实际上是接口契约的一部分。所以给他+1。

虽然`List<T>`不必跟随`ArrayList`也不必实现`IList`，但这样做对于已经熟悉这些的程序员来说更加有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T19:12:39.840

只是一个猜测，但我认为这与历史原因和可读性有关。即使 -1 是一个“特殊值”，它也不会在任何其他情况下返回。我认为您引用的规则主要是为了防止您返回可能具有多个含义的值。-1 在 c++ 和类似语言中是标准的，因此它在某种程度上已成为跨语言的习惯用法。此外，虽然 hasvalue 可能更具可读性，但我认为最好在整个框架中保持一致的风格，这需要从头开始。最后，恕我直言，以我有限的经验，因为必须将可空类型拆箱才能在其他地方使用它们，它们可能比它们的价值更麻烦，但这只是我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T18:46:22.703

我认为这是为了向后兼容，因为在框架 1.1 中没有可空值，并且当时创建了 API。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-02T18:56:59.337

原因可能是一个简单的事实，即`Nullable<T>`（您编写时使用的实际类型`T?`）对于像索引搜索这样简单的事情涉及不必要的复杂性。因为`T? x`做`x == null`实际上只是语法糖`x.HasValue`，当事实证明它不是`null`你仍然必须通过`x.Value`.

与仅返回一个负值相比，您并没有真正获得任何东西，这也不是一个有效的索引。事实上，你让事情变得更加复杂。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-02T18:50:47.870

这遵循与 相同的模式`String.IndexOf`，以及许多其他实现和`IndexOf`方法的变体，不仅在 .NET 库中。

使用 -1 作为返回值是一个神奇的数字，通常应该避免使用。但是，这种模式是众所周知的，当您实现库方法时，这显然是一个优势。

# visual-c++ - 捕获具有准确时间戳的网络数据包

> ID：10864950
> 
> 赞同：0
> 
> 时间：2012-06-02T18:42:42.303
> 
> 标签：visual-c++, network-programming, packet-capture, hardware-interface, transport-stream

我正在使用 winpcap 库捕获网络数据包（传输流）及其到达时间。但是我遇到了一些问题。每当我在我的机器上播放音频或从网络复制一个大文件时，我捕获的数据包的时间信息就会失真。一些数据包的时间戳彼此非常接近，而另一些则有点远。是有任何解决方案（软件/硬件）来纠正这个问题。我需要准确的网络数据包时间戳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:39:46.083

您可以使用任务管理器将捕获应用程序的进程优先级提高到高。

但是你真的需要考虑你想要达到的目标和原因。你想知道数据包什么时候到达网卡，什么时候被内核处理，什么时候内核把它放在捕获程序的套接字缓冲区中，什么时候捕获程序从它的缓冲区中读取它，内核什么时候把它放入其他一些程序套接字缓冲区，或者当一些其他程序从其套接字缓冲区中读取它时？

所有这些时间戳都是不同的，当系统处于负载状态时，差异必然会变得更大。来自捕获程序的时间信息很可能会反映捕获程序从其自己的套接字缓冲区中读取数据包的时间。增加捕获应用程序的进程优先级将使这一过程更加顺利，但它会使任何其他应用程序处理数据包的可靠性降低。

# objective-c - 导入 Cocoalibspotify

> ID：10864951
> 
> 赞同：0
> 
> 时间：2012-06-02T18:42:44.770
> 
> 标签：objective-c, ios, static-libraries, spotify, cocoalibspotify-2.0

我正在尝试将 cocoalibspotify 导入我的 Xcode 项目。[https://github.com/spotify/cocoalibspotify](https://github.com/spotify/cocoalibspotify)

但是，我完全不知道需要导入哪些文件以及如何导入。我仍然是初学者，spotify 网站上的稀疏信息并没有真正帮助我。不过，我确实设法运行了 Simple Player 示例项目，并尝试查看导入了哪些文件。但我并没有走得太远。

我尝试通过将这些文件拖放到我的项目中来导入 zip 附带的以下文件：

*   CocoaLibSpotify iOS 库.xcodeproj
*   CocoaLibSpotify iOS 库-Prefix.pch
*   SPLoginResources.bundle
*   CocoaLibSpotify iOS 测试容器（文件夹）
*   视图控制器（文件夹）

然而，在这样做之后，我的项目将不再编译。我收到各种各样的错误。我猜这些与设置错误的目标有关？？？

![在此处输入图像描述](../Images/dc41f6591311b8b5dce5951d6a018293.png)

[当您向下滚动页面https://github.com/spotify/cocoalibspotify](https://github.com/spotify/cocoalibspotify)时，该网站确实提到了更多针对 iOS 的说明

我确实设法导入了框架，但其他东西超出了我的范围。

所以如果有人愿意指导我完成这个，那就太好了！

* * *

编辑：

我想我越来越近了。我通过打开“CocoaLibSpotify iOS Library.xcodeproj”并进行构建创建了一个“.a”文件。然后我导入生成的 libCocoaLibSpotify.a 文件以及一个名为“include”的文件夹，其中包含很多头文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T19:56:27.030

您*只需*要将`CocoaLibSpotify iOS Library.xcodeproj`文件包含在您的项目中。

完成此操作后，请确保将 CocoaLibSpotify 添加到项目的“目标依赖项”和“将二进制文件与库链接”构建阶段，方法是单击每个阶段中的“+”按钮并从列表中选择它。

除此之外，请确保您严格按照 CocoaLibSpotify 的 README.markdown 文件的“构建 - iOS”部分中的说明进行操作，然后您将完成设置。

# jquery - Jquery - 如何删除复选框和收音机上的多个味精返回

> ID：10864954
> 
> 赞同：0
> 
> 时间：2012-06-02T18:42:57.807
> 
> 标签：jquery, checkbox, radio

感谢这个论坛上的人们，我在代码工作中遇到了主要的痛苦，但我遇到了一些问题。

验证复选框/单选字段时，返回消息会给我一个针对每个未选中单选/复选框的响应。回信应该只写一个'**请填写1433** '**不是** 请填写1433 请填写1433 请填写1433【组内每张支票/单选一条信息】

在这个继承的代码中，我实际上将字段的名称添加到类中，但是在确定未选择所需的检查/无线电组中的任何内容后，我如何只获得一个消息？

**我的小提琴在这里**：http: [//jsfiddle.net/justmelat/X3CGW/](http://jsfiddle.net/justmelat/X3CGW/) [**选择船或飞机然后单击检查必填字段btn** ]

**html/jquery 如下：**

```
 <form method="post" action="">
        <div id="holdErrMsg"></div>
        <fieldset id="mainSection" name="mainSection">
                    <legend style="color:blue; font-weight:bold">Project Overview Section</legend>

                    <table style="width: 100%">
                        <tr>
                            <td style="height: 33px; width: 178px;">Name<span style="color: red">*</span></td>
                            <td style="height: 33px"><input  id="1125" name="1125" class="1125-required" type="text" />1125</td>
                        </tr>
                        <tr>
                            <td style="height: 33px; width: 178px;">Email<span style="color: red">*</span></td>
                            <td style="height: 33px"><input id="1026" name="1026" class="1026-required" type="text" />1026</td>
                        </tr>
                        <tr>
                            <td style="width: 178px">Product Title</td>
                            <td><input  id="1089" name="1089" type="text" /></td>
                        </tr>
                        <tr>
                            <td style="width: 178px">Product Type<span style="color: red">*</span></td>
                            <td><select id="1169" name="1169" class="1169-required">
                            <option value="">Select</option>
                            <option value="Cars">Cars</option>
                            <option value="Boats">Boats</option>
                            <option value="Planes">Planes</option>
                            </select>1169</td>
                        </tr>
                                            <tr><td>
                                            <button id="btnCatchReqFlds" type="button" name="btn">Check Required Fields</button>
                                            </td></tr>
                                        </table>
                </fieldset>

                <fieldset id="section-11" name="section-11">
                    <legend style="color:fuchsia; font-weight:bold">Car Details Section</legend>

                    <table cellpadding="2" style="width: 100%">
                        <tr>
                            <td style="width: 334px; height: 35px"><label>Size:<span style="color: red">*</span></label></td>
                            <td style="height: 35px"><input id="1245" class="1245-required" name="1245" type="text" />1245</td>
                        </tr>
                        <tr>
                            <td style="height: 35px; width: 334px">Color:<span style="color: red">*</span></td>
                            <td style="height: 35px">
                            <select id="1433" class="1433-required" name="1433">
    <option value="">Select</option>
                    <option value="Orange">Orange</option>
                            <option value="Blank">Blank</option>
                            <option value="Green">Green</option>
                </select>1433</td>
                        </tr>
                        <tr>
                            <td style="width: 334px">Description:</td>
                            <td>
                            <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                        </tr>
                    </table>
                                </fieldset>

                <fieldset id="section-12" name="section-12">
                    <legend style="color:fuchsia; font-weight:bold">Plane Details Section</legend>

                    <table cellpadding="2" style="width: 100%">
                        <tr>
                            <td style="width: 334px; height: 35px"><label>Size:</label></td>
                            <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                        </tr>
                        <tr>
                            <td style="height: 35px; width: 334px">Color<span style="color: red">*</span>:</td>
                            <td style="height: 35px">
                                                    <input type="checkbox" name="1433[]" id="1433[]" value="Orange" class="1433[]-required"/>Orange
                                                    <input type="checkbox" name="1433[]" id="1433[]" value="Blue" class="1433[]-required"/>Blue
                                                    <input type="checkbox" name="1433[]" id="1433[]" value="Green" class="1433[]-required"/>Green
                           >>1433[] </td>
                        </tr>
                        <tr>
                            <td style="width: 334px">Description:</td>
                            <td>
                            <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                        </tr>
                    </table>
                                </fieldset>
                <fieldset id="section-13" name="section-13">
                    <legend style="color:fuchsia; font-weight:bold">Boat Details Section</legend>

                    <table cellpadding="2" style="width: 100%">
                        <tr>
                            <td style="width: 334px; height: 35px"><label>Size:</label></td>
                            <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                        </tr>
                        <tr>
                            <td style="height: 35px; width: 334px">Color:<span style="color: red">*</span></td>
                            <td style="height: 35px">
                                                    <input type="radio" name="1834" id="1834" value="None" class="valuetext 1834-required">None
                                                    <input type="radio" name="1834" id="1834" value="All" class="valuetex 1834-required">All
                          &nbsp;&nbsp;|1834[] </td>
                        </tr>
                        <tr>
                            <td style="height: 35px; width: 334px">Approver:</td>
                            <td style="height: 35px">
                                                    <input type="checkbox" name="1149[]" id="1149[]" value"John  Marsh" class="1149[]-not_required"/>John Marsh
                                                    <input type="checkbox" name="1149[]" id="1149[]" value"Phil Collins" class="1149[]-not_required"/>Phil Collins
                                                    <input type="checkbox" name="1149[]" id="1149[]" value"Tom Green" class="1149[]-not_required"/>Tom Green
                           |1149[] </td>
                        </tr>
                        <tr>
                            <td style="height: 35px; width: 334px">Engine:<span style="color: red">*</span></td>
                            <td style="height: 35px">
                                                    <input type="radio" name="1898" id="1898" value="Type 1" class="valuetext 1898-required">Type 1
                                                    <input type="radio" name="1898" id="1898" value="Type 2" class="valuetext 1898-required">Type 2
                          &nbsp;&nbsp;|1898 </td>
                        </tr>
                        <tr>
                            <td style="width: 334px">Description:</td>
                            <td>
                            <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                        </tr>
                    </table>
                                </fieldset><br>
    <fieldset id="section-1011" name="section-1011">
                    <legend style="color:green; font-weight:bold">Misc Info Section</legend>

                    <table cellpadding="2" style="width: 100%">
                        <tr>
                            <td style="width: 334px; height: 35px"><label>Size:</label></td>
                            <td style="height: 35px"><input id="1301" name="1301" type="text" /></td>
                        </tr>
                        <tr>
                            <td style="height: 35px; width: 334px">Color:</td>
                            <td style="height: 35px">
                            <select id="1302" name="1302">
                    <option value="Orange">Orange</option>
                            <option value="Blank">Blank</option>
                            <option value="Green">Green</option>
                </select></td>
                        </tr>
                        <tr>
                            <td style="width: 334px">Description:</td>
                            <td>
                            <textarea id="1303" name="1303" rows="2" style="width: 433px"></textarea></td>
                        </tr>
                    </table>
                                </fieldset>

    </form>​

    $("#section-11,#section-12,#section-13,#section-1011").hide();

    var projtype = new Array(
            {value : 'Cars', sect_id : 'fieldset#section-11'},
            {value : 'Planes', sect_id : 'fieldset#section-12'},
            {value : 'Boats', sect_id : 'fieldset#section-13'}
        );
    $("select#1169").on('change',function () {
    var thisVal = $(this).val();
     var sect_id ="";
         //$('fieldset[id!="mainSection"]').hide();
        $(projtype).each(function() {
    $(this.sect_id).hide();
            if(this.value == thisVal) {
            $(this.sect_id).show();
            }
        });        
    $("#btnCatchReqFlds").on('click', function() {

        $("#holdErrMsg").empty();
       var chk_requiredButEmpty = $("fieldset:visible").find(":input:checkbox[class*='-required'],:input:radio[class*='-required']").filter(function() {
            return $(this).not(':checked');
        });

        if (chk_requiredButEmpty.length) {
            chk_requiredButEmpty.each(function () {

                $("#holdErrMsg").append("Please fill in the " + this.name + "<br />");
            });
        }
        return !chk_requiredButEmpty.length;
    });

}); 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:51:11.683

这是一个轻微的修改，首先创建一个空数组。在`each`循环中，它检查名称是否已经在数组中，如果没有，它将错误写入页面并将名称添加到数组中

[http://jsfiddle.net/X3CGW/6/](http://jsfiddle.net/X3CGW/6/)

# sencha-touch-2 - Ext.NestedList 的详细信息卡内的列表

> ID：10864957
> 
> 赞同：3
> 
> 时间：2012-06-02T18:43:16.527
> 
> 标签：sencha-touch-2

我的应用程序从数据库接收数据。

“食谱”包含**Ext.NestedList**。

[http://www.senchafiddle.com/#VovtL#o7GJJ](http://www.senchafiddle.com/#VovtL#o7GJJ)

我需要在详细卡片中显示一个列表：

[http://www.senchafiddle.com/#4hKD8#uZlr7](http://www.senchafiddle.com/#4hKD8#uZlr7)

列表中的值应该取自基础，依赖于嵌套列表中的键值。我看了厨房水槽示例，但我能理解的很少。是否可以实施？还是更好地用一组按钮替换嵌套列表？我很高兴有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:21:19.880

```
onLeafItemTap: function(nestedList, list, index, node, record, e) {
        var detailCard = nestedList.getDetailCard();
        detailCard.removeAll(true, false);
        detailCard.setHtml('');
        detailCard.setLayout('fit');
        var urList = Ext.create('Ext.List', {
            fullscreen: true,
            itemTpl: '{title}',
            data: [
                { title: 'Item 1' },
                { title: 'Item 2' },
                { title: 'Item 3' },
                { title: 'Item 4' }
            ]
        });
        detailCard.add(urList);
    } 
```

该代码是非常自我解释的。您只需将 urList 替换为您的列表。并改变商店..如果有任何问题让我知道

# perl - 根据循环中的迭代进行输出的文件句柄

> ID：10864961
> 
> 赞同：0
> 
> 时间：2012-06-02T18:43:56.870
> 
> 标签：perl

我需要遍历某些数字并在某个字符串中找到这些数字，然后据此我需要将其输出到某个文件。基本上，我的问题是如何根据循环迭代打开文件句柄以在循环中输出？

示例代码：

```
$rec_1= "481";

for my $all (@seq)
{ 
  my $match = index($rec_1, $seq[$all]);
  if ($match != -1)
  {
    # I want to open a file handle and output the contents of rec_1
    # accordingly. (there will be 12 different files in the end.)
  }
  else 
  {
    # print the data from rec_1 to not matches (another file)
  }
} 
```

总的来说，我知道将有 12 个序列我必须查看，所以我需要检查序列是否存在，我只需遍历`rec_1`数据，如果`rec_1`包含该序列，我将其添加到具有先前数据的文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T19:32:42.950

您可以像这样使用 FileHandles 数组：

```
#!/usr/bin/perl
use warnings;
use FileHandle;

my @fh;
$fh[0] = FileHandle->new;
$fh[0]->open( ">file0") or die "open failed";
my $i = 0;
$fh[$i]->print("Output for file 0"); 
```

# web-services - Web服务中访问密钥的优势

> ID：10864963
> 
> 赞同：0
> 
> 时间：2012-06-02T18:44:01.947
> 
> 标签：web-services, security, rest, amazon-s3, amazon-web-services

我刚刚阅读了有关如何使用访问密钥和秘密 ID 将经过身份验证的请求发送到 RESTful Web 服务的信息。但是，假设与服务器的所有通信都是通过 HTTPS 进行的，我不明白使用它相对于其他替代方法的优势（例如通过用户名和密码发送）。

使用这种机制有什么好处？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:44:47.673

访问密钥大致相当于用户名，访问秘密大致相当于密码。访问密钥使服务能够确定您是谁，并且访问密钥确认它确实是您（在这种情况下，“您”是您的站点）。访问密钥不敏感，通常可以在前端代码中发布（Javascript、HTML 中的链接等），而您需要保密的访问秘密，因为否则其他人/网站将能够冒充您对服务的请求。密钥/秘密和用户名/密码方案没有太大区别；主要区别在于密钥和秘密通常是由服务随机生成的，这可以防止人们使用诸如“default/12345”之类的值和类似的废话。

# java - Android：ListView的onItemClick监听器 - 如何识别项目？

> ID：10864964
> 
> 赞同：0
> 
> 时间：2012-06-02T18:44:03.927
> 
> 标签：java, android

我创建了一个`ArrayAdapter`填充`ListView`. 适配器中的数据是我从服务器获取的 POJO 列表。每个 POJO 都有一个服务器给定的唯一 id，我对那个 id 没有影响。id 仅供内部使用，这意味着它不会在`ListView`.

我的意图：如果用户单击列表中的某个项目，我想将 id 传递回服务器。第一步是创建一个`onItemClickListener`：

```
ListView lv = getListView();
lv.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void OnItemClick(AdapterView<?> parent, View view, int position, long id) {

    // call the server in a new thread

    // BUT: how do I get the POJO id from this position?

    }
}); 
```

我的问题是：我不知道如何获取 POJO 的 id。由于它不向用户显示，因此不在我在侦听器中传递的 TextView 中。其他参数 - 位置和 id -似乎**也不是我需要的。**描述：

*   position：视图在适配器中的位置。
*   id：被点击的项目的行id。

我希望你明白我的意思，否则告诉我。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T18:51:14.567

`parent.getItemIdAtPosition(int position)`将为您提供该索引处的 pojo 对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T18:47:07.703

这将取决于您的*适配器*如何工作。该`id`参数将与*适配器*正在*适应*的项目之一对应。基于此`id`，以及*适配器*的工作方式，您可以检索由单击的视图表示的原始逻辑项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T23:35:16.140

```
@Override
public void OnItemClick(AdapterView<?> parent, View view, int position, long id) {

    Object item = parent.getAdapter().getItem(position);
} 
```

# php - 引号内变量名前的冒号 (:) 如何工作？

> ID：10864967
> 
> 赞同：2
> 
> 时间：2012-06-02T18:44:45.333
> 
> 标签：php, yii

我假设`:parent_id`评估为一个数字。但是，这段代码究竟是如何工作的？我什么时候应该使用这种语法 ( `:name`)？

```
$data = Location::model()->findAll('parent_id=:parent_id',array(
                ':parent_id' => (int) $_POST['Current-Controller']['country_id']
        )); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T18:48:37.507

冒号没有任何特殊含义。整个模式确实如此，但这只是因为您选择在条件 ( )`:parent_id`中将其用作变量名。`WHERE``parent_id=:parent_id`

你也可以选择写

```
$data=Location::model()->findAll('parent_id=the_quick_brown_fox',
     array('the_quick_brown_fox'=>(int) $_POST['Current-Controller']['country_id'])); 
```

在实践中使用冒号是因为您为变量选择的名称也存在作为条件的合法部分存在的风险，在这种情况下，它的所有实例都将被替换为值并且结果将是意外的。

例如，这个：

```
$data=Location::model()->findAll('parent_id=parent_id',
     array('parent_id'=> 1 /*anything, really*/)); 
```

将导致条件`1=1`匹配所有记录。

# java - 有没有办法更改启动线程的名称？

> ID：10864970
> 
> 赞同：3
> 
> 时间：2012-06-02T18:45:05.090
> 
> 标签：java, multithreading

有没有办法更改启动的名称`Thread`或`Thread.setName(String name)`仅在线程初始化块中可用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T18:48:56.873

该函数称为 setName(String name);

```
Thread t = new Thread(...);
t.start();
t.setName("..."); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T18:49:35.787

只要 SecurityManager 允许，您可以在代码中仍然引用原始线程的任何部分设置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T19:02:42.407

可以在实例化 Thread 对象时设置 Thread 名称*，也可以在事后*使用`Thread.currentThread().setName`

```
public class NamedThreadExample implements Runnable {

  public static final String THREAD_NAME_GOES_HERE = "Original Name";
  public static final String NEW_THREAD_NAME_GOES_HERE = "New Name";

  public void run() {
    System.out.println("I am a Thread and my name is " 
                        + Thread.currentThread().getName());

    Thread.currentThread().setName(NEW_THREAD_NAME_GOES_HERE);

    System.out.println("I am a Thread and my name is " 
                        + Thread.currentThread().getName());
  }

  public static void main(String args[]) {
    (new Thread(new NamedThreadExample(), THREAD_NAME_GOES_HERE)).start();
  }
} 
```

产生输出

```
I am a Thread and my name is Original Name
I am a Thread and my name is New Name 
```

请参阅[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#Thread%28java.lang.Runnable,%20java.lang.String%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#Thread%28java.lang.Runnable,%20java.lang.String%29)

# firefox - 移植到 Firefox 的 Chrome 扩展程序不起作用（indexedDB 错误）

> ID：10864973
> 
> 赞同：0
> 
> 时间：2012-06-02T18:45:38.633
> 
> 标签：firefox, google-chrome-extension, firefox-addon, indexeddb

我正在尝试将[Twitter 通知程序](https://chrome.google.com/webstore/detail/ikknnkomiokeodcdkknnhgjmncfiefmn)扩展移植到 FF。
我对 JavaScript 不太熟悉，所以我只是使用[扩展工厂](http://www.extensionfactory.com/labs/conversion/)将其转换为 FF。

不幸的是，它不起作用；我没有收到任何 HTML5 桌面通知。
我看了一点代码，我认为问题出在 twitter.js 上，它应该在路径“resources\extension-data\js”中找到。

[http://pastebin.com/C0NqU4Ur](http://pastebin.com/C0NqU4Ur)

首先我变了

```
twitter.messagesDB = window.webkitIndexedDB.open("messagesDB"); 
```

到

```
twitter.messagesDB = window.mozIndexedDB.open("messagesDB"); 
```

但它仍然无法正常工作。错误控制台也没有显示任何错误。

当我将 console.log 命令放入 twitter.messagesDB.onsuccess 函数时，没有任何内容输出到错误控制台。当我创建一个 onerror 函数时也没有输出。所以我想用 try 和 catch 子句包围函数，但没有抛出错误。

所以我试着把 twitter.messagesDB = twitter.messagesDB.result; 退出函数，错误控制台中显示以下错误：

```
Error: uncaught exception: [Exception... "A mutation operation was attempted on a database that did not allow mutations."  code: "6" nsresult: "0x80660006 (NS_ERROR_DOM_INDEXEDDB_NOT_ALLOWED_ERR)"  location: "chrome-extension://gjlehiopfilnaggndcmbhphaglkbkekf/js/twitter.js Line: 28"] 
```

这意味着什么？我怎样才能让它在 Firefox 中工作？

提前致谢！

编辑：我在 Windows 上使用 Firefox 12

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T00:05:12.387

这是由于支持 2011 年 12 月发布的最新 IndedexDB 协议的 IndexedDB 的 Firefox 实现与支持之前版本的 Chrome 实现之间不兼容。

重大变化是如何创建数据库，旧版 (Chrome) 实现使用`setVersion`事务，而新版 (FF) 使用`onupgradeneeded`事件和回调。

要查看此更改，[请在此问题上加注星标](http://code.google.com/p/chromium/issues/detail?id=108223)。

# ios - 核心图饼图上的奇怪边框

> ID：10864976
> 
> 赞同：2
> 
> 时间：2012-06-02T18:46:17.420
> 
> 标签：ios, core-plot, pie-chart

为什么 Core Plot 会画出这两条线？

![ios图](../Images/67e38fce5f5a52c6b8dd2a4e8059ebea.png)

这就是我设置图表的方式：

```
// setup the pie chart
graph = [[CPTXYGraph alloc] initWithFrame:[_pieView bounds]];
[_pieView setHostedGraph:graph];

CPTPieChart *pieChart = [[CPTPieChart alloc] init];
[pieChart setDataSource:self];
[pieChart setPieRadius:75.0];
[pieChart setIdentifier:@"PieChart1"];
[pieChart setStartAngle:M_PI_4];
[pieChart setSliceDirection:CPTPieDirectionClockwise];

[graph addPlot:pieChart]; 
```

（`_pieView`是`CPTGraphHostingView*`）

怎么去掉两条黑线？我尝试执行[How do remove the border around a core-plot graph](https://stackoverflow.com/questions/2194290/how-do-remove-the-border-around-a-core-plot-graph)中描述的操作，但无济于事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T20:41:50.113

这不是边框——它是带有`CPTXYGraph`. 删除它们只需一行代码：

```
graph.axisSet = nil; 
```

# java-me - 音频流 OutOfMemoryError

> ID：10864986
> 
> 赞同：0
> 
> 时间：2012-06-02T18:48:19.517
> 
> 标签：java-me, j2mepolish, java-micro-editon-sdk3.0

我正在尝试从服务器流式传输音频内容 (AAC)。播放器启动没有任何问题，一段时间后抛出 OutOfMemoryError。我想我需要缓冲音频。请任何人指导我实施（或消除此错误）缓冲。

这是我的代码。

```
 `HttpConnection c = null; 
    InputStream is = null;
    try {
        c = (HttpConnection) Connector.open(streamURL, 
                Connector.READ_WRITE);
        int rc = c.getResponseCode(); 
        System.out.println("Response Code " + rc);

        if (rc != HttpConnection.HTTP_OK) {
            showAlert("Server error returned");

        } else {
            playerForm.append("openInputStream");
            is = c.openInputStream();
            player = Manager.createPlayer(is, "audio/aac");
            player.realize();

             // get volume control for player and set volume to max
            VolumeControl vc = (VolumeControl) player.getControl("VolumeControl");
            if(vc != null)
            {
              vc.setLevel(100);
            }

            player.prefetch();

            player.start();
        } 
    } catch (Exception f) {
        playerForm.append("Exception in player " + f.getMessage() + "\n");
    } finally { // AufrÃ¤umarbeiten ausfÃ¼hren
        if (is != null)
            try {
                is.close();                 
            } catch (IOException e) {
            }
        if (c != null)
            try {
                c.close();                  
            } catch (IOException e) {
            }
    }` 
```

提前致谢。

问候阿尼什。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:04:42.843

而不是 Exception in catch 只是使用 Throwable 类它将处理 OutOfMemoryError

# php - 用php下载jpg、doc、ppt文件损坏

> ID：10864998
> 
> 赞同：0
> 
> 时间：2012-06-02T18:49:55.330
> 
> 标签：php, mime-types, content-type

我正在尝试使用 php 下载一些文件以隐藏文件路径，但某些文件类型总是被破坏。pdf 和 mp3 等文件类型效果很好。doc、ppt、jpg 等文件类型总是下载损坏。

我使用这些 mimetypes

```
if (file_exists($file_real)){ 
$extension = strtolower(substr(strrchr($file, "."), 1)); 
switch($extension){ 
case "ppt": $type = "application/vnd.ms-powerpoint"; break; 
case "pdf": $type = "application/pdf"; break; //------ok
case "doc": $type = "application/msword"; break; 
case "mp3": $type = "audio/mpeg"; break;//------ok
case "jpg": $type = "image/jpg"; break;  
default: $type = "application/force-download"; break; 
} 
```

和这些标题

```
header("Pragma: public"); 
header("Expires: 0"); 
header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
header("Cache-Control: public", false); 
header("Content-Description: File Transfer"); 
header("Content-Type: " . $type); 
header("Accept-Ranges: bytes"); 
header("Content-Disposition: attachment; filename=\"" . $header_file . "\";"); 
header("Content-Transfer-Encoding: binary"); 
header("Content-Length: " . filesize($file_real));
if ($stream = fopen($file_real, 'rb')){
            while(!feof($stream) && connection_status() == 0){
                set_time_limit(0);
                print(fread($stream,1024*8));
                flush();
            }
            fclose($stream);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:04:54.183

我的猜测是您在 PHP 代码中输出空白字符。可能是换行符。这是通过 PHP 提供二进制文件时文件损坏的一个非常常见的原因，并且很难发现。在某些文件类型已损坏而其他文件类型未损坏的情况下，这也是非常典型的情况，因为某些文件类型可以处理额外的空白。

空格很容易进入 PHP 程序，只需在源代码中的`<?php`and`?>`标记之外添加换行符即可。

检查您的 PHP 程序 - 以及所有包含的内容 - 以确保它们在程序结束后没有任何尾随空行`?>`。还要检查标记之前的文件顶部`<?php`，但程序末尾的空行更为常见。

事实上，最好`?>`完全删除结束标记 - 无论如何它是可选的，删除它意味着您绝对不会在 PHP 文件的末尾出现任何空白问题。

希望有帮助。