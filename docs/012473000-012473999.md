# StackOverflow 问答 12473000-12473999

# file - Bash 监视文本文件

> ID：12473004
> 
> 赞同：2
> 
> 时间：2012-09-18T08:20:39.573
> 
> 标签：file, bash, text, watch

我正在尝试制作一个小脚本来监视文件夹中的最新日志文件并从日志中获取聊天内容，然后我将其显示在 tmux 面板中，但由于某种原因，它在执行时找不到文件存在

```
FILENAME=server_logs/$(ls -t1 server_logs | head -n 1)
watch -n3 'grep "\] " '$FILENAME' | tail -n15' 
```

当我运行该文件时，它给了我这个 grep： server_logs/server_log_09_18_12.txt ：没有这样的文件或目录

但如果我使用 `watch -n3 'grep "\] " server_logs/server_log_09_18_12.txt | tail -n15'`它确实有效。所以我的问题是为什么找不到文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:40:44.163

> 观看 -n3 'grep "] " '$FILENAME' | 尾-n15'

有两组 ' 引号。你想逃避内在的 ' 标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:47:37.797

我发现它为什么不起作用， $FILENAME 末尾有一些空格导致找不到文件错误，所以我使用了这个：

```
FILENAME="${FILENAME#"${FILENAME%%[![:space:]]*}"}"   # remove leading whitespace characters
FILENAME="${FILENAME%"${FILENAME##*[![:space:]]}"}"   # remove trailing whitespace characters 
```

我在[另一个 Stackoverflow 问题](https://stackoverflow.com/questions/369758/how-to-trim-whitespace-from-bash-variable)中发现了这一点。

感谢您的回复。

# php - 清漆缓存 - 页面缓存多长时间？

> ID：12473024
> 
> 赞同：3
> 
> 时间：2012-09-18T08:21:49.730
> 
> 标签：php, apache, caching, varnish, varnish-vcl

我对消失缓存的工作有疑问。我用我的 apache 网络服务器安装了清漆缓存并正确配置了它，这样我就可以通过清漆缓存访问网页。

问题就在这里，我创建了一个“test.php”页面，可以通过浏览器访问。我已经更改了页面的内容，并立即再次通过浏览器访问了同一页面。第二次显示更改的内容。为什么会这样？据我所知，第二次也应该显示旧内容（？）；因为清漆缓存将保留网页内容一段时间。我需要更改任何设置吗？请指教。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:31:49.073

如果您每次刷新时都看到最新的内容，那么您没有正确设置清漆。

Varnish 应该位于与 Apache 不同的端口上，因此请确保您在 varnish 端口上访问 test.php。

你可以把它放在你的配置中，看看它是否正在缓存..

```
sub vcl_deliver {
    # Add a header to indicate a cache HIT/MISS
    if (obj.hits > 0) {
        set resp.http.X-Cache = "HIT";
    } else {
        set resp.http.X-Cache = "MISS";
    }
    return (deliver);
} 
```

如果您看到 X-Cache 标头，那么您知道它至少是通过清漆运行的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T08:34:23.660

您在页面中设置的 http 标头在决定是否缓存它们方面发挥着重要作用。阅读有关此[的清漆文档](https://www.varnish-cache.org/docs/3.0/tutorial/increasing_your_hitrate.html#the-role-of-http-headers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-04T06:34:49.673

这个线程看起来很旧。但是这个值可以在 vanish config 中找到，设置**VARNISH_TTL的值**

```
# # Default TTL used when the backend does not specify one
VARNISH_TTL= 120 
```

默认值为 120 秒，我相信您可以从那时起更改它

# clearcase - 使用 clearcase 自动构建

> ID：12473027
> 
> 赞同：2
> 
> 时间：2012-09-18T08:22:13.463
> 
> 标签：clearcase, clearcase-automation

有没有办法使用 ClearCase 自动化层或创建 perl 脚本为多个目标构建？我想在签入项目时自动化 Linux 和 Windows 的构建过程。任何输入将不胜感激。

问候，马格努斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:35:42.573

您可以使用持续集成服务器[Jenkins](http://www.jenkins-ci.org)的矩阵配置来构建多个目标，并使用[Base ClearCase 插件](https://wiki.jenkins-ci.org/display/JENKINS/ClearCase+Plugin)或 ClearCase UCM 插件，具体取决于您的 ClearCase 安装。

不过，目前 ClearCase UCM 插件不支持 Linux，但它正在开发中。

抱歉，由于代表太少，无法添加我想要的所有链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:35:42.610

**[配置矩阵](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+matrix+project)**是针对“您的构建将执行许多类似构建步骤的实例，否则您将重复步骤”。

不同的步骤是 ClearCase 视图创建/参数化，每个平台都不同，因为 ClearCase 区域、视图存储路径和文件分隔符会不同。
即使您使用的是 UCM，基本的 ClearCase 插件也足以检测分支上的更改：使用 Stream 的名称作为分支。

# signalr - SignalR：如何将数据发送到 IConnected.Connect()

> ID：12473030
> 
> 赞同：21
> 
> 时间：2012-09-18T08:22:27.833
> 
> 标签：signalr

我`Connect()`在接口上实现该方法`IConnected`以将新连接添加到正确的组。这很好用，除了一件事：为了将用户添加到正确的组，我需要发送一个值以在此方法中读取。我尝试向客户端中心添加属性：

```
var uIHub = $.connection.uIHub;
uIHub.SessionType = "Edit"; 
```

但它不能从`Connect`方法中访问：

```
if (string.IsNullOrEmpty(Caller.SessionType) || Caller.SessionType == "Edit") {
     sessionId = WAFContext.EditSession.SessionId.ToString();                
} else {
     sessionId = WAFContext.ViewSession.SessionId.ToString();
}
Groups.Add(Context.ConnectionId, sessionId); 
```

`Caller.SessionType`始终为空。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-18T08:55:58.897

我通过将我的信息添加到查询字符串中解决了这个问题，该方法在该`IConnected.Connect()`方法中可用。

在 .NET 客户端上，您将查询字符串传递到您的`HubConnection`：

```
var connection = new HubConnection("http://localhost:8080/", "myInfo=12345"); 
```

在 JS 客户端上，`qs`在开始连接之前设置属性：

```
$.connection.hub.qs = "myInfo=12345"; 
```

然后，您可以通过以下`Connect()`方法访问服务器上的这些信息：

```
var myInfo = Context.QueryString["myInfo"];
Groups.Add(Context.ConnectionId, myInfo); 
```

# android - 如何在RelativeLayout中设置相同的高度？

> ID：12473033
> 
> 赞同：3
> 
> 时间：2012-09-18T08:22:57.427
> 
> 标签：android, android-relativelayout

下面是我的xml代码：

```
<RelativeLayout
    android:id="@+id/ib"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:gravity="center" >

    <ImageButton
        android:id="@+id/button_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    <TextView
        android:id="@+id/tv"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/ib"
        android:gravity="center"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />
</RelativeLayout> 
```

ImageButton ib 和 TextView tw 具有不同的高度。
我希望 ib 和 tv 具有相同的高度。
即如果ib的高度> tv，则将tv的高度设置为与ib相同。
如果不是，则将 ib 的高度设置为与 tv 相同。
我该怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-18T08:44:48.690

将`android:layout_alignBottom="@+id/button_icon"`属性添加到 textview

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T08:43:03.317

使用 LinearLayout 并将`ImageButton`高度设置`"wrap_content"`为`TextView`并将高度设置为`"fill_parent"`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T08:33:07.540

您将需要制作is的**高度**并拥有just 。您需要将它们都包装在布局父级中。这样它们就与同一个布局父级相关联。`ImageButton``"wrap_content"``TextView``"fill_parent"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-24T14:48:51.073

**将元素放入 LinearLayout，设置 layout_width="match_parent" 并添加属性 "layout_weight"="1"**

```
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="sample text"/>

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="sample text"/>

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="sample text"/>
    </LinearLayout> 
```

# android - 为什么要关闭数据库连接

> ID：12473034
> 
> 赞同：0
> 
> 时间：2012-09-18T08:23:09.577
> 
> 标签：android, android-sqlite

为什么要关闭数据库连接？如果连接保持打开状态会发生什么？应用程序退出时连接会自动关闭吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:38:52.330

1) 尽可能晚地打开连接

2）尽快关闭连接

连接本身返回到连接池。连接是有限的资源。您建立的任何具有完全相同连接字符串的新连接都将能够重用池中的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:35:29.960

关闭数据库连接并不是真正必要的。[有关更详细的解释，](https://stackoverflow.com/questions/7414049/android-when-to-close-the-databasehelper)请参阅 stackoverflow 上的这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T08:35:42.067

要释放handler之类的资源，我们应该使用DBHelper.close()；关闭数据库，如果你不关闭数据库，当你尝试重新连接到数据库时可能会出现问题。所以要克服这个问题，我们必须关闭数据库。

# tableau-api - 我可以将 ActivePivot 连接到 tableau 软件吗？

> ID：12473037
> 
> 赞同：0
> 
> 时间：2012-09-18T08:23:13.260
> 
> 标签：tableau-api, activepivot

我想知道是否可以将 activepivot 连接到 tableau 软件？顺便问一下，可以连接到微软报告服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:51:51.467

根据我在这里看到的信息：

[http://quartetfs.com/en/products/activepivot/open-component](http://quartetfs.com/en/products/activepivot/open-component)

...产品理解 MDX。它还允许从 Excel 进行连接，这表明 Tableau 也可能利用 ODBC/其他驱动程序。

所以，我怀疑答案是“是”，但您需要告诉我们更多关于 ActivePivot 的连接选项的信息，然后才能确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:18:42.320

ActivePivot 实现了 OLAP 的标准：

*   MDX 查询语言
*   用于通信的 XMLA 协议

Tableau Software 也是如此。

当多维 (MDX) 查询被发送到像 ActivePivot 这样的 OLAP 提供程序时，会返回一个单元集，并以 XMLA 协议进行编码。大多数 OLAP 前端（尤其是 Microsoft Excel）依靠“多维格式”来表示 XMLA 中的单元格集。但少数依赖于较旧的“表格格式”，例如 Tableau Software（以及 Microsoft SQL Server Reporting Services）。

ActivePivot 从 2.0 版开始支持 XMLA 多维格式，从 4.3.3 版开始支持表格格式。ActivePivot 4.3.3 已经过测试，可与 Tableau Software 一起使用。

# excel - 从EXCEL中的数据值中获取char

> ID：12473038
> 
> 赞同：-1
> 
> 时间：2012-09-18T08:23:21.530
> 
> 标签：excel, excel-formula

我有一个值为：15.09.2012 的单元格。如何从中获取（使用 Excel 公式）每个字符？例如在 c# 中，我将采用 char 数组，然后按索引获取元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:36:28.617

如果字符串在`A1`并且索引号在`A2`

```
=MID(A1, A2, 1) 
```

# oracle - Hibernate 错误地格式化 oracle sql

> ID：12473040
> 
> 赞同：1
> 
> 时间：2012-09-18T08:23:24.660
> 
> 标签：oracle, hibernate

我正在迁移到休眠 4.1 并添加对 oracle 11g 的支持。mysql 设置迁移到 4.1 似乎没有问题，我正在调试 oracle 特定问题。我有一个 Oracle 抱怨的问题

```
java.sql.SQLException: ORA-00903: invalid table name 
```

我应该提到这个设置也使用 c3p0 和 ehcache。

导致此异常的查询是：

```
DEBUG org.hibernate.SQL  - 

select
    dp.id as id168_,
    dp.Description as Descript2_168_,
    dp.name as name168_,
    case 
        when dp1_.id is not null then 1 
        when dp2_.id is not null then 2 
        when dp.id is not null then 0 
    end as clazz_ 
from
    .tableA dp 
left outer join
    .tableB dp1_ 
        on dp.id=dp1_.id 
left outer join
    .tableC dp2_ 
        on dp.id=dp2_.id 
```

我在 SQL Developer 中尝试了这个查询，但失败了。问题似乎与“。”有关。在表名上。如果我删除它或在查询良好之前放置数据库用户/模式。

是否有关闭此符号的设置？我没有提供需要的财产吗？

```
<properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/>
        <property name="hibernate.connection.driver_class" value="oracle.jdbc.OracleDriver"/>
        <property name="hibernate.connection.username" value="myUser"/>
        <property name="hibernate.connection.password" value="myPassword"/>
        <property name="hibernate.connection.url" value="jdbc:oracle:thin://@192.168.X.X:1521:oracledb"/>
        <property name="hibernate.archive.autodetection" value=""/>

        <property name="hibernate.format_sql" value="true"/>
        <property name="hibernate.show_sql" value="true"/>
        <property name="hibernate.default_schema" value="public"/>

        <property name="hibernate.ejb.cfgfile" value="META-INF/hibernate.cfg.xml"/>

        <!-- cache configuration -->
        <property name="hibernate.cache.region.factory_class" value="org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory" />
        <property name="hibernate.cache.use_second_level_cache" value="true"/>
        <property name="hibernate.cache.use_query_cache" value="true"/>

        <!-- pool configuration -->
        <property name="hibernate.connection.provider_class" value="org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider" />
        <property name="hibernate.c3p0.max_size" value="50" />
        <property name="hibernate.c3p0.min_size" value="5" />
        <property name="hibernate.c3p0.acquire_increment" value="1" />
        <property name="hibernate.c3p0.idle_test_period" value="17" />
        <property name="hibernate.c3p0.max_statements" value="0" />
        <property name="hibernate.c3p0.timeout" value="3600" />
        <property name="hibernate.c3p0.preferredTestQuery" value="SELECT 1 FROM DUAL"/>

    </properties> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:09:16.737

这个问题与

```
<property name="hibernate.default_schema" value="public"/> 
```

此值需要与您创建的架构相匹配。

ctapobep 的评论有助于确定这个问题。

# java - TestNG.xml 套件包含所有包的所有文件

> ID：12473047
> 
> 赞同：17
> 
> 时间：2012-09-18T08:24:13.497
> 
> 标签：java, maven, automated-tests, testng

即将用 Maven+TestNG+Selenium 实现一个测试框架。

你如何声明一个告诉 TestNG 运行*所有*测试的 suite.xml？我已经尝试了所有这些都无济于事：

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >
<suite name="Toplevel TestNG configuration" verbose="10">
  <test name="all">
    <classes>
      <class name="*" />
    </classes>
  </test>
</suite>

<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >
<suite name="Toplevel TestNG configuration" verbose="10">
  <test name="all">
    <groups>
      <run>
        <include name="*" />
        <exclude name="disabled" />
      </run>
    </groups>
  </test>
</suite>

<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >
<suite name="Toplevel TestNG configuration" verbose="10">
  <test name="all">
    <packages>
      <package name="*" />
    </packages>
  </test>
</suite> 
```

我需要使用不同的参数指定不同的套件配置，但都运行所有测试。我可以挖掘的每个示例都明确列出了对我来说意义不大的每个类或包。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-11-04T07:28:28.813

据我所知，应该使用 .* 来匹配它们。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-18T08:42:51.103

`testng.xml`您可以通过将文件声明为来在包中添加所有测试类

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >
<suite name="sampleTest" parallel="false">

    <test name="sample-Test" preserve-order="true" verbose="2">
        <packages>
            <package name="org.sample.something.*"/>
        </packages>
    </test>

</suite> 
```

没有地方可以通过测试作为搜索选项。如果你想做类似的事情，你必须在代码中实现套件并在那里实现搜索场景。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-06T14:39:40.230

假设你有一个三级包，你的测试类在`com.abc.xyz`包下。

```
<package name="*" /> </packages> , doesn't work. 
<package name="com.*.*" />  doesn't work. 
<package name="com.abc.*" />  does work. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T10:48:59.467

AFAIK testng 没有您正在寻找的正则表达式选项。

但是，我认为你可以通过两种方式得到你想要的：

1.  如果您正在使用 Testng 插件在 Eclipse 上工作。您只需选择定义了所有包的测试文件夹即可。使用 maven，它主要是您的 src/test/java 文件夹，右键单击并说 run as testng。这样做会创建一个临时的 customsuite.xml，其中列出了您的所有类。您可以将 xml 保存为默认 xml。

2.  带有 maven 的 surefire 插件可以选择指定[包含](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#includes)，然后指定模式。您可以尝试将其设置为 * */* .java 我认为它会拾取所有测试用例（虽然没有尝试过）。然后，您可以将测试调用为 mvn test。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-24T16:50:17.317

下面的作品来自 TestNg 的 3 级 Pkg

```
<package name="orgPkg.namePkg.appnamePkg.applicationPkg.functionalityPkg"/></packages> 
```

# r - 在时间序列上反转 ARMA 模型以获得 R 中的残差

> ID：12473053
> 
> 赞同：1
> 
> 时间：2012-09-18T08:24:37.003
> 
> 标签：r, time-series

这似乎是一件显而易见的事情，但我找不到这样做的功能：

我有一个时间序列的观察，比如 x_t，以及由 AR 系数给出的 ARMA 模型规范，比如 \alpha_1, ..., &\alpha_p 和 MA 系数 \beta_1, ..., \beta_q。我想计算推动创新的向量，比如 e_t。

我已经阅读了过滤器的帮助，但它似乎与我需要的相反（即它需​​要创新和系数并计算观察结果）。

我可以通过将系统写成 Ax = Be 然后使用 B^{-1}Ax 来做到这一点，但是对于大系列来说这需要时间，而且我担心反演的数值稳定性。

我们可以使用生成样本观察

```
 ts1 <- arima.sim(model=list(AR=0.5, MA=0.5), n=10) 
```

那么，我们如何找到创造观察结果的创新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T23:04:59.267

正如@evilphil 建议的那样，只需使用`arima()`固定参数即可。这是一个例子：

```
ts1 <- arima.sim(model=list(ar=0.5, ma=0.5), n=10)
fit <- arima(ts1, order=c(1,0,1), fixed=c(.5,.5,0))
res <- residuals(fit) 
```

`arima.sim()`但是，由于初始化的影响，这实际上不会给出所使用的创新。但是，对于一个长系列，它们将与前几个值相距很近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:58:52.567

认为我想太多了-通过递归在第一次观察之前对白噪声项做出假设来解决这个问题很容易。

显然，这在 R 中给出了一个循环。

一种解决方法是使用具有固定设置的 arima 来设置您的建模参数。

# qt - Qt中的glload错误

> ID：12473054
> 
> 赞同：2
> 
> 时间：2012-09-18T08:24:51.237
> 
> 标签：qt, opengl, qt4, mingw, mingw32

尝试在 Qt 中使用 glload 创建一个 OpenGL 应用程序，我测试了示例代码。

```
#include <iostream>
#include <windows.h>
#include <glload/gl_all.h>
#include <glload/gll.hpp>

using namespace std;

int main()
{
    glload::LoadFunctions();
    cout << "Hello World!" << endl;
    return 0;
} 
```

但是当我运行它时，它停止工作。调试错误是

> 无法运行“：请求的操作需要提升。

构建命令是

> qmake.exe C:\Users\Benbroher\test\test.pro -r -spec win32-g++ "LIBS+=-lglloadD" "LIBS+=-lopengl32"

我的 Qt 是 4.8.1，而 glsdk 是 0.4.4。我正在运行 64 位版本的 windows7，它发生在 32 位版本的 winXP 中。

什么可能导致这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:53:41.067

您的 QApplication 对象实例在哪里？没有这个，大部分 Qt 都无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:20:44.087

在创建有效的 OpenGL 上下文并使其成为当前上下文之前，您无法加载 OpenGL 函数。[文档对此非常清楚](http://glsdk.sourceforge.net/docs/html/group__module__glload.html#glload_initialization)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:30:54.853

我假设您的直接问题与 Qt 或 OpenGL 无关。（尽管其他答案中关于 Qt 和 OpenGL 的观点都是有效的。考虑到它们）。

我的假设是缺少嵌入式清单是您的主要问题。鉴于您在 Windows 上，我假设它使用的是 qmake/mingw，这可能意味着没有自动嵌入清单。

这有时会导致 Windows 假设应用程序需要以管理员权限运行。特别是对于一些特定的应用程序名称。也许您可以告诉我们您的应用程序（exe）被称为什么。现在我认为这是问题所在。

有关如何嵌入标准清单的信息，请查看[此出色的博客条目](http://blog.strixcode.com/2010/08/embedding-application-manifest-and.html)。

# sql - 以下查询有什么问题

> ID：12473056
> 
> 赞同：0
> 
> 时间：2012-09-18T08:25:05.100
> 
> 标签：sql, sql-server

嗨，我有一个 SQL 服务器数据库，当我执行以下查询时，我得到 4 个结果：

```
WITH MyCTE (ID, hasLead, SubgroupFk, SubTeamFk)
AS (
SELECT [ID],[hasLead],[SubgroupFk],[SubTeamFk]
FROM [LocalGTPDatabase].[dbo].[LinkProject-Area]
where [ProjectFk]=90
)
SELECT 
*
FROM MyCTE 
INNER JOIN EmplTeam ON EmplTeam.ID = MyCTE.SubTeamFk 
INNER JOIN [Department] ON [Department].ID = MyCTE.SubgroupFk 
```

对于每个 LinkProjectArea Id，我有 1 个 Headcount 项目/年
Headcount 表连接到：LinkProjectAreaFk 到前面提到的表

所以我想我可以将人数与以下查询结合起来：

```
WITH MyCTE (ID, hasLead, SubgroupFk, SubTeamFk)
AS (
SELECT [ID],[hasLead],[SubgroupFk],[SubTeamFk]
FROM [LocalGTPDatabase].[dbo].[LinkProject-Area]
where [ProjectFk]=90
)
SELECT 
*
FROM MyCTE 
INNER JOIN EmplTeam ON EmplTeam.ID = MyCTE.SubTeamFk 
INNER JOIN [Department] ON [Department].ID = MyCTE.SubgroupFk 
INNER JOIN [HeadCount] ON [HeadCount].LinkProjectAreaFk = MyCTE.ID 
```

但是当我执行这个查询时，我没有得到任何结果，但是这个查询的每个 id 都有一个人数。我究竟做错了什么？
我真的不知道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:35:24.187

你加入了错误的专栏！

您还需要使用 HeadCount 表上的 ID 列：

```
INNER JOIN [HeadCount] ON [HeadCount].ID = MyCTE.ID 
```

* * *

此答案基于您的评论：

> Select * from HC where **ID** =97 or **ID** =98 or **ID** =99 or **ID** =100 我确实得到 4 个结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:35:45.343

运行以下查询以确保这些 ID 上是否存在 FK 引用：

```
SELECT *
FROM HeadCount
WHERE HeadCount.LinkProjectAreaFk IN
(SELECT [ID]
FROM [LinkProject-Area]
where [ProjectFk]=90) 
```

如果它没有返回，则意味着这些 ID 在 HeadCount 中不作为外键存在

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T08:36:03.007

如果您没有收到错误但没有数据，则可能没有数据。也许如果有一个“HeadCount”项目，就没有适合的部门项目或 Empl 团队项目。

基本上你有一个and-Connection。显示 MyCTE、EmplTeam、Department 和 HeadCount 的所有组合，其中您的三个“ON-Conditions”都有效。

# ruby-on-rails - act_as_taggable 对每个请求运行查询

> ID：12473058
> 
> 赞同：1
> 
> 时间：2012-09-18T08:25:18.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, acts-as-taggable-on, acts-as-taggable

我有一个`User.rb`包含以下行的模型：

```
acts_as_taggable_on :industries, :uxes 
```

[“uxes”术语包含属于用户的 UX 偏好，例如他们是否关闭了某个帮助框。]

我注意到的是，每个涉及 a 的请求的顶部都会加载以下查询`@user`：

```
User Load (1.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 354 LIMIT 1
ActsAsTaggableOn::Tag Load (0.4ms)  SELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.id = `taggings`.tag_id WHERE ((`taggings`.taggable_id = 354) AND (`taggings`.taggable_type = 'User')) AND (taggings.context = 'uxes' AND taggings.tagger_id IS NULL)  
AREL (0.3ms)  UPDATE `users` SET `last_request_at` = '2012-09-17 09:44:24', `perishable_token` = 'un5eK7SHDNzTegt7GPUk', `updated_at` = '2012-09-17 09:44:24' WHERE `users`.`id` = 354
ActsAsTaggableOn::Tag Load (0.3ms)  SELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.id = `taggings`.tag_id WHERE ((`taggings`.taggable_id = 354) AND (`taggings`.taggable_type = 'User')) AND (taggings.context = 'uxes' AND taggings.tagger_id IS NULL)
ActsAsTaggableOn::Tagging Load (0.4ms)  SELECT `taggings`.* FROM `taggings` WHERE `taggings`.`tagger_type` IS NULL AND `taggings`.`tagger_id` IS NULL AND `taggings`.`context` = 'uxes' AND `taggings`.`tag_id` IN (NULL) AND (`taggings`.taggable_id = 354 AND `taggings`.taggable_type = 'User') 
```

这些查询增加了加载用户的每个页面加载的时间（即所有页面加载的 90% 以上）。为什么要`acts_as_taggable`强制这些查询发生，除非必要，否则我如何阻止它加载它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:43:27.490

据称 `ActsAsTaggableOn`gem 支持直接在模型中[缓存您的标签列表](https://makandracards.com/makandra/3203-actsastaggableon-cache-tag-lists)，另请参阅此[问题](https://stackoverflow.com/questions/3946783/how-to-cache-tags-with-acts-as-taggable-on)。要为标签列表启用缓存，只需`cached_tag_list`在表中添加一列，因为缓存方法会在[acts_as_taggable](http://cheat.errtheblog.com/s/acts_as_taggable_on/)记录表中查找名为“cached_#{context}_list”的列。不过，不确定这是否有效。

# rspec - 将设计异步 gem 与 RSpec 一起使用

> ID：12473060
> 
> 赞同：2
> 
> 时间：2012-09-18T08:25:19.903
> 
> 标签：rspec, devise, resque

我正在使用 devise-async gem 异步发送我的设计电子邮件 - 使用 Resque。

我正在做一些简单的 RSpec 控制器测试，以确保通过检查 ActionMailer::Base.deliveries 数组来发送忘记密码。

在我开始使用 devise-async gem 之前，这曾经有效。如何立即“发送”队列中的电子邮件，以便它们最终出现在 ActionMailer::Base.deliveries 中？

例如 - 当我使用delayed_job 异步发送它们（不使用devise-async gem）时，我可以将它添加到我的设计初始化程序中：

```
Delayed::Worker.delay_jobs = !Rails.env.test? 
```

这将立即发送电子邮件以使其更易于测试。那么 - 在使用 devise-async 时我可以使用类似的技术吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-16T12:02:34.777

我在 spec_helper.rb 中加入以下行：

```
Devise::Async.enabled = false 
```

它奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T10:21:31.937

好的 - 我找到了答案：

在初始化程序文件中，执行以下操作：

```
Resque::Mailer.excluded_environments = [:test] 
```

对于一般 Resque 作业，添加以下内容：

```
Resque.inline = Rails.env.test? 
```

# .net - 应用程序初始化失败 0xc0150002

> ID：12473066
> 
> 赞同：0
> 
> 时间：2012-09-18T08:25:46.177
> 
> 标签：.net, windows-7, exception-handling, windows-xp

很多人都面临这个错误，但我仍然无法得到正确的解决方案。我在论坛上尝试了很多建议，但没有任何帮助。

我在 VS 2010 上开发了一个应用程序。该应用程序是一个 winform 应用程序，并使用 OpenCV 库来完成一些简单的图像处理任务。
最初我在 Windows 7 上进行了整个开发。现在我正在转向 Windows XP。

我从 windows 7 机器复制整个项目文件夹并粘贴到 xp 机器中。然后我从这个项目文件夹中启动了解决方案文件 .sln。该文件可以正常打开并编译，没有任何问题。但是当我运行exe时，它给出了以下错误：

> 应用程序未能正确初始化 0xc0150002 ....

我在发布模式和调试模式下都试过了，但是我遇到了同样的问题。

我的猜测是当我在 Windows 7 上开发时，在后台发生了一些特定于操作系统的更改，现在这些更改与 windows xp 不兼容。

如果有人能给我一些提示来解决这个问题，我将不胜感激。

**更新：** 在事件日志中我找不到应用程序，但有一个错误可见并以红色显示！是 ：

```
Event Type: Error
Event Source:   .NET Runtime Optimization Service
Event Category: None
Event ID:   1103
Date:       9/18/2012
Time:       2:40:51 PM
User:       N/A
Computer:   MAYA-ACMTTE
Description:
.NET Runtime Optimization Service (clr_optimization_v2.0.50727_32) - Tried to start a    
service that wasn't the latest version of CLR Optimization service. Will shutdown 
```

当我安装 .net framework 3.5 时出现此错误（除了已经安装的 4.0）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T08:42:51.037

我认为这是一个dll文件问题，首先你必须在win xp上安装windows installer并安装framework 3.5。或者您必须将您的应用程序切换到发布模式并在解决方案资源管理器窗口中单击全部显示并在 myproject 下选中所有复选框并运行您的应用程序然后转到发布文件夹并将此文件夹复制到 xp os 并尝试

# ios - UIScrollView 和 UIImageView 模拟相册

> ID：12473067
> 
> 赞同：0
> 
> 时间：2012-09-18T08:25:52.883
> 
> 标签：ios

当我尝试使用`UIScrollView`和`UIImageView`来模拟相册时，我遇到了一些问题。

我在`UIImageView`. 但是当我点击 时`UIImageView`，图像被放大了。我无法获得图像的实际大小，因此无法准确`contentSize`计算`UIScrollView`。

所以我不能完美地模拟照片浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:36:38.057

如果您的问题是如何获取图像的实际大小，以便您可以设置滚动视图的 contentSize，那么试试这个：

```
CGSize size = imageView.image.size; 
```

否则，请在您的问题和一些代码中添加更多信息，以便我们知道您尝试做什么。

# java - 为 Android 应用返回 base64 字符串而不是 png

> ID：12473068
> 
> 赞同：0
> 
> 时间：2012-09-18T08:25:54.923
> 
> 标签：java, android

我有一些 Java 代码可以截屏并输出一个 png，该代码旨在保存到手机的“图片”图库中。它看起来像这样：

```
 package org.apache.cordova;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;

import android.graphics.Bitmap;
import android.os.Environment;
import android.view.View;

public class Screenshot extends Plugin {

    @Override

    public PluginResult execute(String action, JSONArray args, String callbackId) {
        // starting on ICS, some WebView methods
        // can only be called on UI threads
        final Plugin that = this;
        final String id = callbackId;
        super.cordova.getActivity().runOnUiThread(new Runnable() {
            //@Override
            public void run() {
                View view = webView.getRootView();

                view.setDrawingCacheEnabled(true);
                Bitmap bitmap = Bitmap.createBitmap(view.getDrawingCache());
                view.setDrawingCacheEnabled(false);

                try {
                    File folder = new File(Environment.getExternalStorageDirectory(), "Pictures");
                    if (!folder.exists()) {
                        folder.mkdirs();

                    }

                    File f = new File(folder, "screenshot_" + System.currentTimeMillis() + ".png");
                    System.out.println(folder);
                    System.out.println("screenshot_" + System.currentTimeMillis() + ".png");
                    FileOutputStream fos = new FileOutputStream(f);
                    bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
                    that.success(new PluginResult(PluginResult.Status.OK), id);
                    System.out.println("get here?");

                } catch (IOException e) {
                    that.success(new PluginResult(PluginResult.Status.IO_EXCEPTION, e.getMessage()), id);
                    System.out.println("and here?");
                }
            }
        });

        PluginResult result = new PluginResult(PluginResult.Status.NO_RESULT);
        result.setKeepCallback(true);
        return result;
    }

} 
```

现在出于我正在处理的项目的目的，我不想将 t 保存到画廊，而是输出一个可以操作的 base64 字符串。我是 Java 新手，但是在浏览了一些东西之后，我发现了一个 base64 Java 编码器。但似乎有一个名为 Base64OutputStream 的 android util 方法。

我认为我需要替换的代码是：

```
FileOutputStream fos = new FileOutputStream(f);
bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos); 
```

起初我试过：

```
Base64OutputStream os = new Base64OutputStream(); 
```

但它抛出了错误，然后我一直在玩我发现的其他代码。如：

```
ByteArrayOutputStream os = new ByteArrayOutputStream();
OutputStream b64 = new Base64.OutputStream(os);
ImageIO.write(bi, "png", b64);
String result = os.toString("UTF-8"); 
```

它再次不起作用，而不是为我的项目的一小部分实现 base64 编码库，我想知道是否有人能指出我正确的方向，或者告诉我我是否走在正确的道路上。我是Java新手，但觉得android提供的Base64OutputStream一定是关键。有人有任何指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:38:28.373

图像的编码非常简单。

编码来源：

```
 Bitmap bm = BitmapFactory.decodeFile(picturePath);
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            bm.compress(Bitmap.CompressFormat.JPEG, 100, baos);
            byte[] byteArray = baos.toByteArray();

            encodedImage = Base64.encodeToString(byteArray, Base64.DEFAULT);

    ImageView imageView = (ImageView) findViewById(R.id.imageView1);
            imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath)); 
```

解码源：

```
byte[] decodedString;
        decodedString = Base64.decode(picture, Base64.DEFAULT);

        imageView1.setImageBitmap( BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:42:06.260

我看到你已经标记了 Android。如果您可以导入**org.kobjects.base64**包（在*ksoap2-android-assembly-2.4-jar-with-dependencies.jar 中*找到），那么您可以从那里使用一些实用程序。使用 PNG 图像的字节数组，您只需要执行以下操作：

```
String pngAsBase64String = Base64.encode(/*PNG byte array*/); 
```

我发现这些实用程序比 Sun 的 Base64 编码器和解码器更易于使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T08:48:59.120

试试这个代码，这应该对你有用......

```
 ByteArrayOutputStream baos = new ByteArrayOutputStream();  
        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
        byte[] b = baos.toByteArray();
        base64String = Base64.encodeToString(b, Base64.DEFAULT); 
```

# java - java认为新文件是文件夹

> ID：12473076
> 
> 赞同：4
> 
> 时间：2012-09-18T08:26:55.730
> 
> 标签：java, file

我的 java 程序一直认为每个新文件都不是文件而是文件夹。

我一直在寻找错误，现在它不允许我使用`FileWriter`. 如果我创建一个新文件，然后检查它是文件还是目录，它说它是一个目录。

我最初创建了一条很长的路径，所以我摆脱了它。我也曾经在一个单独的线程中完成写作，并且也摆脱了它，但问题仍然存在。

如果我创建一个新类，只需一个简单的

```
java.io.File file = new java.io.File("test.csv");
output.print(file.isDirectory()); 
```

这是真的。

但是，我仍然可以使用 javax.imageio.* 保存图形

任何人都可以帮忙吗？

编辑：我使用 eclispe 3.7.2 和 java 1.7.0 ... File.isFile() 为假，File.createNewFile() 失败（java.io.FileNotFoundException（访问被拒绝））。查看我指定的目录时，那里有一个名为 test.csv 的新文件夹。所以它正在创建一个新文件夹，并将其视为一个文件夹，尽管我指定它是一个 csv 文件。我尝试过其他文件类型，甚至没有文件类型。但同样的问题。它认为它是一个文件夹而不是一个文件。这让我很困惑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T08:36:11.503

Java`new File()`不会**自己**创建文件或目录。所以你应该展示你的代码。我怀疑您在`file.mkdirs();`某个地方有类似的东西-如果此时您`file`指的是“test.csv”，**它将**创建一个名为“test.csv”的目录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T08:37:03.490

在您的示例代码中，您实际上还没有*创建*文件。为了我们的娱乐，你能不能也打印一下 的值`file.isFile()`？

`file.createNewFile()` *然后做同样的事情，但首先*调用例如，以实际获取文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T08:37:25.560

我认为您遗漏了某些东西，可能您有一个程序所在的目录，该目录与您尝试创建的文件的名称相同，您可以使用[isFile()](http://openjdk.java.net/projects/nio/javadoc/java/io/File.html#isFile%28%29)函数对其进行测试，以确保它不是文件和尝试使用 [getAbsolutePath()](http://openjdk.java.net/projects/nio/javadoc/java/io/File.html#getAbsolutePath%28%29)获取路径以本地化设置此目录的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T13:06:48.680

发现了问题。不出所料，这是我自己的愚蠢，因为我知道它一定是。在将文件名添加到文件路径后，我移动了 File.mkdirs() 方法，使包括文件在内的完整路径成为一个目录。然后我无法写入它，因为它已经被创建为一个目录。

我本可以发誓我在没有 mkdirs() 命令的情况下对其进行了测试，但我猜不是。那好吧。再抓一个愚蠢的东西，而不是正确地删除所有可能的选项。

感谢所有的提示！

# java - Hibernate 不在 JBoss 7.1.1 的 H2 中保存数据

> ID：12473079
> 
> 赞同：2
> 
> 时间：2012-09-18T08:27:06.220
> 
> 标签：java, hibernate, jpa, jboss, h2

我目前正在使用 JPA（使用 Hibernate）和 Spring 开发 JBoss 7.1.1。我有春天`@Transactional`来处理交易。我目前正在使用`H2 database`JBoss 7.1.1 的内部。当服务器启动时，所有事务都可以正常工作。但是一旦我关闭我的服务器，对实体 bean 所做的所有更改都不会保存在**JBoss server restart**的 H2 数据库文件中。JBoss 服务器关闭后，当我使用文件连接到 H2 数据库时，我看到架构已创建但数据未保存。

我觉得这不是我的代码的问题，而是一些配置的问题，因为它在应用程序运行时工作正常。

这是我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">
    <persistence-unit name="myappname" transaction-type="JTA">
        <jta-data-source>java:/DefaultDS</jta-data-source>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect" />
            <property name="hibernate.hbm2ddl.auto" value="update" />
            <property name="jboss.entity.manager.factory.jndi.name" value="java:app/myappname"/>
        </properties>
    </persistence-unit>

</persistence> 
```

Standalone.xml 中的数据源：

```
<datasource jta="true" jndi-name="java:/DefaultDS" pool-name="DefaultDS" enabled="true" use-java-context="true">
    <connection-url>jdbc:h2:file:${jboss.server.data.dir}${/}h2${/}localDB</connection-url>
    <driver>h2</driver>
    <pool>
        <min-pool-size>5</min-pool-size>
        <max-pool-size>20</max-pool-size>
    </pool>
    <security>
        <user-name>sa</user-name>
    </security>
    <timeout>
        <idle-timeout-minutes>0</idle-timeout-minutes>
    </timeout>
    <statement>
        <prepared-statement-cache-size>32</prepared-statement-cache-size>
    </statement>
</datasource> 
```

我怎样才能得到这个工作？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-02T16:31:19.420

在你的 hibernate.cfg.xml 文件中你应该有

```
<property name="hibernate.hbm2ddl.auto">create</property> 
```

而不是**create**总是删除并重新创建表使用**validate**。

```
<property name="hibernate.hbm2ddl.auto">validate</property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:23:26.357

显示的persistence.xml 和数据源配置唯一看起来不寻常的是数据库路径，但是，我已经在JBoss AS 7.1.1 上尝试了您的配置，具有类似的数据库路径，但我无法复制问题。我绝对可以访问应用程序保存的数据，即使在服务器重新启动或关闭后也是如此。但是，我的应用程序不使用 Spring；也许问题出在 Spring 配置或其他地方？您确定要连接到您的应用程序正在使用的同一个 H2 数据库文件吗？

# java - 何时更喜欢 EJB 而不是 GWT Servlet

> ID：12473080
> 
> 赞同：5
> 
> 时间：2012-09-18T08:27:09.017
> 
> 标签：java, gwt, ejb

我的同事说我使用本地 EJB 不是一个好主意，因为它们充当封装在 JAR 中的类（即仅使用 EJB 时，因为它们`local`与普通类相比没有任何优势）。只有当某些代码可能被多个应用程序使用时，我才必须使用 EJB。但我读到了 EJB 的更多优点（安全性、线程安全性、事务处理等）。

所以我很困惑：什么时候使用 GWT Servlet（它比简单方便`HTTPServlet`，它提供 RPC 风格的方法调用）以及什么时候使用 EJB？

PS 我不使用 JPA 2.0、CDI 等任何未来（因为我只能在 WAS 7 上使用 Java EE 5）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T10:49:56.617

> 我的同事说我使用本地 EJB 不是一个好主意

我强烈不同意这一点。**本地 EJB**是一个**非常**好的主意，因为它们是实现业务逻辑的完美 bean 类型。当前的 EJB bean 产量非常轻，因此您不必因为任何所谓的重量级而避免使用它们。

这些类型的 bean 的最大优势可能是它们的自动事务管理，在执行任何类型的数据库工作时都会派上用场。

这不仅仅是需要访问 JMS 队列和复杂的 EIS 系统的企业应用程序。任何一次对数据库进行多次写入的 Web 应用程序都会从​​中受益匪浅。如果没有事务，您最终会说`User`，每当发生异常或崩溃时，它只保留在数据库中的一半。如果没有 EJB，您将不得不在您的代码中添加大量非常冗长的`start\commit\rollback`语句，更不用说将您的事务（通常通过“连接”）传播到您的所有代码中，并且在事务处于或不处于活动状态时有单独的情况。

使用 EJB bean，所有这些复杂性都消失了。这就像垃圾收集与手动内存管理。

还有很多其他有趣的功能，即使是最简单的 Web 应用程序也可以使用，例如声明性角色检查 ( `@RolesAllowed`)、bean 池（以限制吞吐量等）和线程安全。

在 Java EE 6 中，它们确实变得更易于用于简单的 Web 应用程序，并且它们可以出现在 .war 中的任何地方（不再需要单独的 .jar 和伞形 .ear）。

> 所以我很困惑：何时使用 GWT Servlet（它比简单的 HTTPServlet 更方便，它提供 RPC 样式的方法调用）以及何时使用 EJB？

所以现在我们正在谈论**远程 EJB**。在这种情况下，答案是不同的。

如果客户端从 Internet 连接，您几乎不会使用远程 EJB。通常需要打开大量端口，包括客户端上的端口。

同样，如果您有异构客户端（.NET、C++ 甚至 Java 客户端，它们运行与远程 EJB 使用的 AS 版本略有不同的版本），您通常不会使用远程 EJB。

尽管理论上支持 Corba (IIOP) 并因此允许不同类型的客户端，但实际上远程 EJB 通信仅在客户端和服务器都运行 Java 并且除了相同的 AS（应用程序服务器）或其中之一是 Java SE 客户端时才有效使用远程服务器的客户端库（可能*很大*）。

对于远程技术来说这有点尴尬，但是 EJB 规范甚至没有指定如何首先设置远程连接。事实上的标准是远程 JNDI，但由于这不是规范，JBoss 例如希望在 JBoss AS 7 中停止支持它。

在所有这些情况下，您将使用一种`Web Service`技术而不是远程 EJB。`GWT Servlet`可能是一种选择，但在这里并不是一个真正的典型例子。除非您已经在使用 GWT，否则我不建议仅将它安装用于来自任意（非 GWT）客户端的一般 web/rpc 连接。

一般的 Java 解决方案是 JAX-WS 和 JAX-RS，它们是 SOAP 和 REST 实现（两者都可以与 EJB 结合使用）。众所周知的 JAX-RS 实现是[Jersey](http://jersey.java.net)（[示例](http://vogella.com/articles/REST/article.html)）和[RestEasy](http://jboss.org/resteasy)。在 Java EE 6 中，您不必为它们安装任何东西，因为它们已经是平台的一部分。对于 Java EE 5，您必须单独安装 JAX-RS，但 JAX-WS 已经存在。

人们通常会发现 JAX-RS 更容易上手和更现代的方法，尽管 JAX-WS 具有更多内置的类型安全特性（这也正是其大部分复杂性的来源）。

最后，我们*什么*时候使用远程 EJB？通常，您会为运行相同 AS 的本地网络上的应用程序之间的通信执行此操作。在这种情况下，有潜在的性能优势（二进制序列化可以比 json/xml 转换更快），并且有一些强大的选项用于传播安全上下文和协调分布式事务。简单的 Web 应用程序很可能不需要经常使用最后一个功能（如果有的话）。

一种常见的模式是 JAX-RS 资源（bean）模式，它接受来自远程（Web）客户端的请求，然后将工作委托给包含实际业务逻辑的本地 EJB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:02:00.987

EJB 是一种在其自己的容器上用于后端的技术，并提供了一些对开发人员透明的功能，例如事务安全性等。

来自 Java EE 教程：

> 如果您的应用程序具有以下任何要求，则应考虑使用企业 bean：
> 
> **应用程序必须是可扩展的。**为了适应越来越多的用户，您可能需要将应用程序的组件分布在多台机器上。应用程序的企业 bean 不仅可以在不同的机器上运行，而且它们的位置对客户端也将保持透明。
> 
> **事务必须确保数据完整性**。企业 bean 支持事务，即管理共享对象的并发访问的机制。
> 
> **该应用程序将有各种客户端**。只需几行代码，远程客户端就可以轻松找到企业 bean。这些客户端可以是瘦的、多样的和众多的。

现在，当您只在单个 Web 服务器中进行 Web 开发时，EJB 不会真正帮助您，还有其他更简单的选项，例如 GWT Servlet。

但是，如果您想使用托管事务、连接到 JMS 队列或在后台进行一些批处理，那么 EJB 就可以发挥作用了。

例如，您有一个订单，您需要与不同的部门沟通以完成订单。在这种情况下，您将需要一个后台进程来完成这项工作，同时前端会通知客户订单正在准备中。servlet 可以将订单发送到一个队列，消息驱动的 bean 可以在该队列中获取它并通过调用其他 EJB 进行一些处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T10:47:48.167

这取决于您的应用程序/项目要求范围。EJB 用于支持 Java EE 功能。它不包括在您的项目范围内。不要使用它。[Java EE 特性](http://docs.oracle.com/cd/E19263-01/817-5764/intro.html)

# matlab - IPC方法的选择

> ID：12473083
> 
> 赞同：0
> 
> 时间：2012-09-18T08:27:31.320
> 
> 标签：matlab, x86, ipc, 64-bit

我有几个数学 dll，其中一些用于 x64 平台，一些用于 x86。我还需要与几个 COM 接口（特别是 64 位版本的 Matlab 和 STATISTICA）进行通信。因此，为了解决混合 dll 的问题，我将我的软件分成 3 个独立的程序 - 其中 2 个是 32 位和 1 个 - 64 位。所有程序都必须相互通信并连接到相互 SQL 数据库。此外，有可能一个程序将在客户端计算机上运行，​​而另一个程序将在服务器计算机上运行。

连接流程的最佳技术（就性能而言）是什么？我需要真正快速地将数据数组从 x86 程序发送到 x64，执行计算并将它们发回。事实上，使用网络的能力并不重要。

我只是没有太多时间对不同的方法（管道、WCF 等）进行基准测试，而是想专注于研究一种技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:44:08.997

在非托管代码中，COM 可用于此目的（查找进程外服务器，即本地服务器）。COM 在内部使用 RPC，但比 RPC 更方便，因为客户端使用对象就好像它们在客户端进程自己的地址空间中一样（而它们在服务器进程的地址空间中）。COM也可以用来跨电脑通信，查DCOM。

.NET 中也有类似的东西，WCF 就是其中之一，但我不确定它们的效率如何。特别是 WCF 似乎使用基于文本的协议，这可能不如 COM 的 RPC 有效。

# vb.net - 在 AS400 vb.net 上监控消息等待

> ID：12473087
> 
> 赞同：1
> 
> 时间：2012-09-18T08:27:51.120
> 
> 标签：vb.net, ibm-midrange

我试图做的是监视在 as400 上的活动作业上等待的消息，我在 Google 上看了看，但没有真正的好例子可以证明我在猜测，因为它不是最简单的事情，甚至根本不可能。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:22:10.527

It might be possible to call the appropriate APIs directly from VB.NET but it would be far easier to call a wrapper and have VB.NET process the result set. The APIs to use are either the [List Job (QUSLJOB) API](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/apis/qusljob.htm) or the [Open List of Jobs (QGYOLJOB) API](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/apis/qgyoljob.htm). QUSLJOB is simpler, but the wrapper will need to filter out jobs which are not MSGW, QGYOLJOB is more complex, but the wrapper can select only MSGW jobs in the initial criteria.

# asp.net - 使用多个版本的 nlog

> ID：12473089
> 
> 赞同：3
> 
> 时间：2012-09-18T08:27:54.300
> 
> 标签：asp.net, iis-7, web-config, gac, nlog

我是nlog的新手，如果我错过了一些琐碎的事情，请原谅我的无知。

我正在使用 IIS7 托管几个应用程序，一些使用 nlog 1.0.0.505，一些使用 NLog 2.0。我不确定如何创建一个 web.config 来适应这两个版本。

是否可以将多个版本的 nlog.dll 放入 GAC，以便每个应用程序都有一个可供选择的版本列表？

从 GAC 中删除 nlog 并让应用程序使用它部署时使用的 nlog 是否是一个更好的主意？在这种情况下，我如何在 web.config 中引用 nlog（设置目标等）

非常感谢任何帮助或指向我可以阅读更多内容的地方。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:19:15.217

You'll want to create separate App Domains for each application or at least for each application that uses a different version of a dependent dll. A single App Domain can't load multiple versions of the same dll.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:39:11.973

我们最终让应用程序提供 nlog.dll 文件，并且没有在全局 web.config 中指定版本号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-05T11:12:04.973

经过一番战斗......（如果你不想要这个故事，只需复制下面的代码）

让我们首先说 GAC（全局汇编缓存）被发明的原因之一是在同一个地方使用多个版本的 dll。

所以..我有一个带有 NLog 2.0 的 Sharepoint 项目，我需要添加一个依赖于 NLog 3.2 的带有 dll 的第二个解决方案，问题是，在将所有内容推送到 GAC（对 SafeControls - 对于 sp 开发人员而言）之后，记录器只是从未登录过新的解决方案。

当我再次查看我的 web.config 时，铃声响起

```
<section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog, Version=2.0.0.0, Culture=neutral, PublicKeyToken=5120e14c03d0593c" /> 
```

注意**版本=2.0.0.0**

所以后来我知道 NLog 只是加载旧项目的配置，并且在开始使用 3.2 dll 时以某种方式没有传递它。

我也尝试重新加载配置，做 DeepCopy，不明白为什么那不起作用。

然后我`LoggingConfiguration`在代码中重新定义了 a 以在保存旧配置的同时重新初始化记录器，登录该类，然后在析构函数中再次使用旧配置重新初始化。

我猜结果是记录器现在在任何地方都使用 3.2 和 2.0 配置。

但后来我讨厌两件事：1 - 有一个析构函数，2 - 没有来自 web.config 的配置，并试图做所有的海峡没有工作，并观察到有时我认为有一些延迟的日志有可能是一些队列或者我最终找到了正确的方法来制作一个知道适当地重新启动 NLog 的 CTOR：

```
 public EncryptEventReceiver()
    {
        oldConfig = LogManager.Configuration;

        Task t = new Task(() =>
        {
            FileTarget target = new FileTarget();
            target.FileName = "c:\\Data\\Logs\\MyProj\\EncryptEventReceiver.txt";
            target.Layout = "${message}";
            target.Encoding = Encoding.UTF8;

            LoggingRule rule = new LoggingRule("*", LogLevel.Trace, target);

            LoggingConfiguration config = new LoggingConfiguration();
            config.AddTarget("FileLog", target);
            config.LoggingRules.Add(rule);

            LogManager.Configuration = config;

            var _logger = LogManager.GetCurrentClassLogger();
            _logger.Trace("EncryptEventReceiver CTOR initialized Logger");
        });

        t.Start();
        t.Wait();

        LogManager.GetCurrentClassLogger().Trace("EncryptEventReceiver MIDDLE");
        LogManager.Configuration = oldConfig;
        nlog3 = LogManager.GetCurrentClassLogger();
        nlog3.Trace("EncryptEventReceiver CTOR done, nlog3 ready");
    } 
```

编辑：最后导致一些日志丢失，所以我回到了 CTOR-Destrucor，建议更频繁地使用 web-config

```
 public static Logger nlog3;
    private static LoggingConfiguration oldConfig;

    public EncryptEventReceiver()
    {
        oldConfig = LogManager.Configuration;

        FileTarget target = new FileTarget();
        target.FileName = "c:\\Data\\Logs\\MyProj\\EncryptEventReceiver.txt";
        target.Layout = "${date:format=yyyy-MM-dd HH\\:mm\\:ss}   ${level}   ${message}   ${exception:format=tostring}";
        target.ArchiveAboveSize = 5242880;
        target.ArchiveFileName = "c:\\Data\\Logs\\MyProj\\Archive_EncryptEventReceiver\\EncryptEventReceiver_${shortdate}_{#}.txt";
        target.Encoding = Encoding.UTF8;

        LoggingRule rule = new LoggingRule("*", LogLevel.Trace, target);

        LoggingConfiguration config = new LoggingConfiguration();
        config.AddTarget("FileLog", target);
        config.LoggingRules.Add(rule);

        LogManager.Configuration = config;

        nlog3 = LogManager.GetCurrentClassLogger();
        nlog3.Trace("EncryptEventReceiver CTOR done, nlog3 ready");
    }

    ~EncryptEventReceiver()
    {
        nlog3.Trace("EncryptEventReceiver Destructor");
        LogManager.Configuration = oldConfig;
        LogManager.GetCurrentClassLogger().Trace("EncryptEventReceiver Destructor done");
    } 
```

# php - 在 AJAX / PHP 中获取 Vimeo 上传进度

> ID：12473095
> 
> 赞同：1
> 
> 时间：2012-09-18T08:28:19.783
> 
> 标签：php, ajax, upload, vimeo, put

我正在尝试将 Vimeo PHP 库 (http://github.com/vimeo/vimeo-php-lib/blob/master/vimeo.php) 与 BlueImp 的 jQuery 文件上传器 (https://github.com/ blueimp/jQuery-文件上传）。我的问题是在上传过程中收到进度事件，这可能吗？这是我上传的临时页面（视频上传是临时硬编码的）

```
<?php if($_SESSION['ticket']){ 
  //check upload status
}
?>
<button id="btn">Upload to vimeo</button>
<div id="status"></div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
$('#btn').click(function(){
//alert('clicked');
$('#status').html('working...'); //this will continue in the background, need to set a session variable so the same file isn't uploaded twice. but how to get response? check ticket ID which should also be part of the session variable
$.ajax({
    url: 'vimeo/upload.php',
    data: { file: '13TimberAlley.mov'}
}).done(function(data){
    alert('done');
    var obj = jQuery.parseJSON(data);
    $('#status').html( obj.video_id != undefined ? 'http://vimeo.com/'+obj.video_id:$('#status').html() );
    $('#status').html( obj.error != undefined || obj.message != undefined ? obj.error+' '+obj.message:$('#status').html() )
    clearInterval(status);
});

status = setInterval(checkUpload,1000);

function checkUpload() {
    //alert('check: reload this page to get session vars?');    
}
});
</script> 
```

Vimeo 上传 API (https://developer.vimeo.com/apis/advanced/upload) 声明我可以通过流式传输 (https://developer.vimeo.com/apis/advanced/upload) 检查上传状态#streaming-step4）或发布（https://developer.vimeo.com/apis/advanced/upload#post-step4）

我可以看到 vimeo api 使用 post 方法，但我的问题是何时/何处将进度返回给浏览器。如果我使用上面的方法（setInterval），那么我不知道如何从初始 ajax 调用到 checkUpload javascript 函数中获取票证 ID 和/或端点。我想我可以通过 PHP 中的会话变量来做到这一点，但我无法让页面重新加载（以显示远程文件中设置的会话变量），直到上传完成

我在第 413 行附近修改了“vimeo.php”，内容如下：

```
//store ticket id to session variable so we can check upload status, or resume progress indicator if page is reloaded (doesn't work if browser is closed)
session_start(); 
$_SESSION['ticket']=$ticket;
$_SESSION['endpoint']=$endpoint; 
```

在第 500 行附近，有以下内容：

```
// Confirmation successful, return video id
if ($complete->stat == 'ok') {
//upload was successful, we do not need to store this variable to check progress anymore
unset($_SESSION['ticket']);
unset($_SESSION['endpoint']);
$_SESSION['last_upload'] = 'http://vimeo.com/'.$complete->ticket->video_id;
return $complete->ticket->video_id;
} 
```

有任何想法吗？

# php - jquery适配器和ckeditor问题

> ID：12473098
> 
> 赞同：0
> 
> 时间：2012-09-18T08:28:33.653
> 
> 标签：php, jquery, ckeditor

我正在我的页面上使用 jquery 适配器和 ckeditor 进行一些 php 编程。让我展示一下我所拥有的。我正在处理的页面是 index.php

一个 jquery 适配器：

```
 function sendid(id)
     {
    jQuery('#mydiv').showLoading();
    $.ajax({
        type: "POST",
        url: "",
        data: id,
        error: function(){

          alert('error');
      },
      success: function(data){
        jQuery('#mydiv').hideLoading();
            $('#mydiv').html(data);
  }
  });
}
} 
```

该函数向 index.php 发送一个 id。有了这个 ID，我正在获取我的数据库并获取一些记录。有了我得到的记录，我通过 ckeditor 显示它，如下所示：

```
 <?php
            $ckeditor = new CKEditor();
            $ckeditor->basePath  = 'ckeditor/' ;
            CKFinder::SetupCKEditor( $ckeditor, 'ckfinder/' ) ;
            $config['height'] = '300';
            $initialValue = $queryresult['content'];
            $ckeditor->editor('FCKeditor1', $initialValue, $config);
        ?> 
```

每当我单击调用 sendid() 函数的按钮时，ckeditor 就会出现在 id 列表上方。当我第一次调用 sendid() 函数时，它可以正常工作并将记录放入 ckeditor。但是我第二次调用 sendid() 函数 ckeditor 消失了。

我在此链接中找到了一个主题：

[CKEditor 实例已经存在](https://stackoverflow.com/questions/1794219/ckeditor-instance-already-exists)

但对我来说，将链接中提到的代码放在哪里变得非常困难。据我了解，每次单击将 id 发送到 sendid() 函数的按钮时，我都必须杀死或销毁编辑器。但是，每当我将 destroy 或 kill ckeditor 放入 sendid() 函数时，它都不起作用。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:03:15.833

请从[http://ckeditor.com/download](http://ckeditor.com/download)下载最新的 CKEditor 。在您的服务器上解压缩它，以便您可以运行它，例如`http://localhost/ckeditor_test/`（在您喜欢的任何地方）。

现在，将以下代码保存在所有编辑器文件已解压缩（等）的同一目录中`ckeditor.js`，并保存为.`ckeditor_php5.php``index.php`

打开网站并享受单击按钮的乐趣。该示例（实际上是沙盒）将让您了解如何动态替换编辑器并销毁现有实例以避免冲突。

```
<?php if ( $_SERVER[ 'REQUEST_METHOD' ] === 'POST' ): ?>
    <?php
        include( 'ckeditor_php5.php' );

        $ckeditor = new CKEditor();
        $ckeditor->editor( $_POST[ 'id' ], 'This is my initial value!', array(
            'height' => '300'   // Config to be used
        ));
    ?>
<?php else: ?>

    <!DOCTYPE html>
    <html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
    </head>
    <body>
        <div id="mydiv" style="outline: 2px dashed orange; padding: 20px; margin: 0 0 20px;">
            This is where the editor will be loaded.
        </div>
        <button id="load" type="submit">Load the editor via AJAX!</button>
        <script>

            (function( $ ) {
                var id = 'idOfTheEditor';

                $( '#load' ).on( 'click', function() {
                    $.ajax({
                        type: 'POST',
                        url: 'index.php',
                        data: {
                            id: id
                        },
                        error: function(){
                            console.log( 'Error?' );
                        },
                        success: function( data ) {
                            if ( window.CKEDITOR && CKEDITOR.instances[ id ] ) {
                                console.log( 'Desytroying an existing instance!' );
                                CKEDITOR.instances[ id ].destroy();
                            }
                            $( '#mydiv' ).html( data );
                        }
                    });
                });

            })( jQuery );

        </script>
    </body>
    </html>
<?php endif ?> 
```

您最终可以像这样封闭，`$( '#mydiv' ).html( data )`以`setTimeout`查看您的代码以“慢动作”运行：

```
setTimeout( function() {
        $( '#mydiv' ).html( data );
}, 1000 ); 
```

玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T08:48:00.190

我相信你的 jQuery 代码应该看起来像这样才能使补丁工作：

```
function sendid(id)
     {
    jQuery('#mydiv').showLoading();
    $.ajax({
        type: "POST",
        url: "",
        data: id,
        error: function(){

          alert('error');
      },
      success: function(data){
        jQuery('#mydiv').hideLoading();

        var instance = CKEDITOR.instances['FCKeditor1'];
        if(instance) {
            instance.destroy(true);
        }
        CKEDITOR.replace('FCKeditor1');

        $('#mydiv').html(data);
  }
  });
}
} 
```

# directx - issus with render a rectangle on dx11(metro style app)

> ID：12473103
> 
> 赞同：1
> 
> 时间：2012-09-18T08:29:00.293
> 
> 标签：directx, microsoft-metro

i want draw a rectangle on screen but something wrong ,i cannot see anything on my screen. i'm using dx11 (metro style app) the shader code is the same with Sample Code(D3D-Cude Sample) in VS 2012

anyone give me some suggestion?

here is my code below:

```
// get color

    COLOR4F clr = m_SytleInterface->GetBackGroundDefaultClr();
            VPOINTF3 ptDes[4];
            VFloat iWidth = 256.0;
            VFloat iHeight = 256.0;
            VFloat fLX = -466.0;
            VFloat fBY = -819.0;
    //set world view projection matrix
            g_constantBufferData.world = 
    XMMatrixTranslation(-116.5, -204.75, 0) * CVBGL::m_world;
            g_constantBufferData.view = CVBGL::m_view;
            g_constantBufferData.projection = (XMMATRIX)CVBGL::m_projection;

    D3D11_BUFFER_DESC constantBufferDesc = {0};
    constantBufferDesc.ByteWidth = sizeof(g_constantBufferData);
            constantBufferDesc.Usage = D3D11_USAGE_DEFAULT;
            constantBufferDesc.BindFlags = D3D11_BIND_CONSTANT_BUFFER;
            constantBufferDesc.CPUAccessFlags = 0;
            constantBufferDesc.MiscFlags = 0;
            //constantBufferDesc.StructureByteStride = 0;
            DX::ThrowIfFailed(
                m_d3dDevice->CreateBuffer(
                    &constantBufferDesc,
                    nullptr,
                    &m_constantBuffer
                    )
                );
            m_d3dContext->UpdateSubresource(
                    m_constantBuffer.Get(),
                    0,
                    nullptr,
                    &g_constantBufferData,
                    0,
                    0
                );
    //init Vertex
            ptDes[0].x = 0.0f;
            ptDes[0].y = 0.0f;
            ptDes[0].z = 0.0f;
            ptDes[1].x = 0.0f;
            ptDes[1].y = 256;
            ptDes[1].z = 0.0f;
            ptDes[2].x = 256;
            ptDes[2].y = 256;
            ptDes[2].z = 0.0f;
            ptDes[3].x = 256;
            ptDes[3].y = 0.0f;
            ptDes[3].z = 0.0f;

    ByteArray loadVSTask = ReadData("SimpleVertexShader.cso");
            ByteArray loadPSTask = ReadData("SimplePixelShader.cso");

            DX::ThrowIfFailed(
                m_d3dDevice->CreateVertexShader(
                    bytecodeVS->Data,
                    bytecodeVS->Length,
                    nullptr,
                    &vertexShader
                    )
                );

            const D3D11_INPUT_ELEMENT_DESC basicVertexLayoutDesc[] =
            {
                { "POSITION", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 0,  D3D11_INPUT_PER_VERTEX_DATA, 0 },
                { "COLOR",  0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 12, D3D11_INPUT_PER_VERTEX_DATA, 0 },
            };

            ComPtr<ID3D11InputLayout> inputLayout;
            DX::ThrowIfFailed(
                m_d3dDevice->CreateInputLayout(
                    basicVertexLayoutDesc,
                                  ARRAYSIZE(basicVertexLayoutDesc),
                                  bytecodeVS->Data, 
                                  bytecodeVS->Length,
                                  &inputLayout)
                                );
            m_d3dContext->IASetInputLayout(inputLayout.Get());

            ComPtr<ID3D11PixelShader> pixelShader;
            DX::ThrowIfFailed(
                m_d3dDevice->CreatePixelShader(
                    bytecodePS->Data,
                    bytecodePS->Length,
                    nullptr,
                    &pixelShader
                    )
                );

            VertexPositionColor  Vertices[4] =
            {
                { XMFLOAT3(ptDes[0].x, ptDes[0].y, ptDes[0].z), XMFLOAT4( clr.fRed, clr.fGreen, clr.fBlue, clr.fAlpha) }, // +Y (top face)
                { XMFLOAT3(ptDes[1].x, ptDes[1].y, ptDes[1].z), XMFLOAT4( clr.fRed, clr.fGreen, clr.fBlue, clr.fAlpha) },
                { XMFLOAT3(ptDes[2].x, ptDes[2].y, ptDes[2].z), XMFLOAT4( clr.fRed, clr.fGreen, clr.fBlue, clr.fAlpha) },
                { XMFLOAT3(ptDes[3].x, ptDes[3].y, ptDes[3].z), XMFLOAT4( clr.fRed, clr.fGreen, clr.fBlue, clr.fAlpha) },
            };

            D3D11_BUFFER_DESC vertexBufferDesc = {0};
            vertexBufferDesc.ByteWidth = sizeof(VertexPositionColor) * ARRAYSIZE(Vertices);
            vertexBufferDesc.Usage = D3D11_USAGE_DEFAULT;
            vertexBufferDesc.BindFlags = D3D11_BIND_VERTEX_BUFFER;
            vertexBufferDesc.CPUAccessFlags = 0;
            vertexBufferDesc.MiscFlags = 0;
            //vertexBufferDesc.StructureByteStride = 0;

            D3D11_SUBRESOURCE_DATA vertexBufferData;
            vertexBufferData.pSysMem =Vertices;
            vertexBufferData.SysMemPitch = 0;
            vertexBufferData.SysMemSlicePitch = 0;

            ComPtr<ID3D11Buffer> vertexBuffer;
            DX::ThrowIfFailed(
                m_d3dDevice->CreateBuffer(
                    &vertexBufferDesc,
                    &vertexBufferData,
                    &vertexBuffer
                    )
                );

            UINT stride = sizeof(VertexPositionColor);
            UINT offset = 0;
            m_d3dContext->IASetVertexBuffers(
                0,
                1,
                vertexBuffer.GetAddressOf(),
                &stride,
                &offset
                );

 // Specify the render target and depth stencil we created as the output target.
                m_d3dContext->OMSetRenderTargets(
                    1,
                    m_renderTargetView.GetAddressOf(),
                    m_depthStencilView.Get()
                    );

                // Clear the render target to a solid color, and reset the depth stencil.
                const float clearColor[4] = { 0.071f, 0.04f, 0.561f, 1.0f };
                m_d3dContext->ClearRenderTargetView(
                    m_renderTargetView.Get(),
                    clearColor
                    );

        m_d3dContext->IASetPrimitiveTopology(D3D11_PRIMITIVE_TOPOLOGY_TRIANGLESTRIP);

            m_d3dContext->VSSetShader(
                vertexShader.Get(),
                nullptr,
                0
                );

            m_d3dContext->PSSetShader(
                pixelShader.Get(),
                nullptr,
                0
                );

            m_d3dContext->Draw(4,0);

            DX::ThrowIfFailed(
                m_swapChain->Present(1, 0)
                ); 
```

# c# - 通过自定义控件动态更改下拉列表和文本框

> ID：12473105
> 
> 赞同：0
> 
> 时间：2012-09-18T08:29:07.493
> 
> 标签：c#, asp.net, textbox, custom-controls, html-select

`DropDownList`我想编写一个涉及 a和 a的自定义控件`TextBox`。实际上，我想动态渲染`DropDownList`和 `TextBox`. 例如：当用户点击 a`Checkbox`时，`Textbox`将变为 a `DropdownList`。另一方面，当用户取消选择 时`Checkbox`，`Dropdownlist`将变为`Textbox`。

我知道这可以使用两个控件来完成，这两个控件都设置了可见性。但是我可以在自定义控件上做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:53:42.410

如果您仍想采用这种方法，这是您的代码。

在设计文件中：-

```
 <asp:CheckBox ID="CheckBox1" runat="server" AutoPostBack="True"
 oncheckedchanged="CheckBox1_CheckedChanged" />

 <div id ="control" runat="server">

 </div> 
```

在文件后面的代码中： -

```
protected void Page_Load(object sender, EventArgs e)
{
  if (!Page.IsPostBack)
   {
     TextBox txt = new TextBox();
     txt.ID = "txt";
     control.Controls.Add(txt);
   }
}
protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
{
   if (CheckBox1.Checked)
    {
       for (int ix = this.Controls.Count - 1; ix >= 0; ix--)
           if (this.Controls[ix] is TextBox) this.Controls[ix].Dispose();

       DropDownList ddl = new DropDownList();
       ddl.ID = "ddl";

      control.Controls.Add(ddl);
    }
    else
    {
      for (int ix = this.Controls.Count - 1; ix >= 0; ix--)
          if (this.Controls[ix] is DropDownList) this.Controls[ix].Dispose();

       TextBox txt = new TextBox();
       txt.ID = "txt";

       control.Controls.Add(txt);
    }
} 
```

希望这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:46:41.010

你可以试试这段代码

**ASPX**

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="dynamicControl.ascx.cs" Inherits="dynamicControl" %>
<asp:CheckBox ID="CheckBox1" runat="server" AutoPostBack="true" 
    oncheckedchanged="CheckBox1_CheckedChanged" />
<asp:DropDownList ID="DropDownList1" runat="server" visible="false">
</asp:DropDownList>
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox> 
```

**代码隐藏**

```
protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
{
    DropDownList1.Visible = CheckBox1.Checked;
    TextBox1.Visible = !CheckBox1.Checked;
} 
```

如果CheckBox 被**选中**，则此代码段将**显示一个 dropDownList ，如果**未选中**则更***改为***TextBox**。尽管这是可能的*，但我认为这不是正确的方法。*（例如：需要 AutoPostBack，设置可见性...）

 ********你想达到什么目标？********

# java - Java、Maven 依赖项

> ID：12473107
> 
> 赞同：1
> 
> 时间：2012-09-18T08:29:16.493
> 
> 标签：java, maven, compilation

我是 Maven 和 JSF 的新手，在编译我的项目时遇到以下问题：

`Failed to execute goal on project ViewController: Could not resolve dependencies for project com.km.eFarmer:ViewController:war:1.0.1-alpha1-SNAPSHOT: The following artifacts could not be resolved: com.sun.faces:jsf-api:jar:2.0.3-FCS, com.sun.faces:jsf-impl:jar:2.0.3-FCS, org.openfaces:openfaces:jar:3.0.2-KM, cssparser:cssparser:jar:0.9.5, it.eng.spago:sbi-utils:jar:3.3.0: Failure to find com.sun.faces:jsf-api:jar:2.0.3-FCS in http://repo1.maven.org/maven2/ was cached in the local repository, resolution will not be reattempted until the update interval of maven.maven2 has elapsed or updates are forced -> [Help 1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T08:34:05.757

这意味着该工件`com.sun.faces:jsf-api:jar:2.0.3-FCS`在存储库中不存在 `http://repo1.maven.org/maven2/`。

事实上，这个 repo 中没有`jsf-api.jar`with 版本`2.0.3-FCS`。有一个[可用版本](http://search.maven.org/#search%7Cgav%7C3%7Cg%3a%22com.sun.faces%22%20AND%20a%3a%22jsf-api%22)列表。因此，您应该更改工件版本或存储库 url

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-18T08:31:27.913

简单地删除文件夹本地存储库 com/sun/faces 并重试。

# javascript - execCommand 给出错误

> ID：12473113
> 
> 赞同：0
> 
> 时间：2012-09-18T08:29:30.037
> 
> 标签：javascript, html, iframe, execcommand

我创建了一个新的 iframe，然后将其附加到主窗口文档并执行此 javascript：

```
frame.contentDocument.execCommand('insertimage',0,'obama.jpg'); 
```

其中 frame 是 iframe 元素。不幸的是，我收到此错误：

```
Error: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIDOMHTMLDocument.execCommand] 
```

如何在 iframe 中启用 execCommand() 函数？有什么遗漏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:55:40.117

文档必须是可编辑的。这可以通过以下任一方法完成：

```
frame.contentDocument.designMode = 'on';           // = 'off'; to disable`
frame.contentDocument.body.contentEditable = true; // = false; to disable` 
```

`execCommand`应该只用于可编辑元素。您的错误表明情况并非如此。如果要在文档中插入新图像，只需使用：

```
var img = new Image();
img.src = 'http://example.com/obama.jpg';
frame.contentDocument.appendChild(img); 
```

# postgresql - psql: could not connect to server [ubuntu]

> ID：12473115
> 
> 赞同：0
> 
> 时间：2012-09-18T08:29:33.500
> 
> 标签：postgresql, postgresql-9.2

Under the postgres user, I tried the `psql` command and I'm getting this error:

> psql: could not connect to server: No such file or directory Is the server running locally and accepting connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"

But when I run `/usr/local/pgsql/bin/psql`, it is working.

Is there anything wrong with my configuration?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:21:31.730

上述问题似乎与 PostgreSQL 默认端口号有关，

更改 postgresql.conf 文件中的端口号并重新启动数据库服务器。如果您在安装时更改了端口。

（或者）

而不是 psql 输入完整的命令

```
 "psql -p 5432 -h localhost" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T18:25:09.777

您也可以包括数据库用户：

`psql -U postgres -p 5432 -h localhost`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-12T11:17:36.643

您是否重新安装了 postgresql-9.6.3 ？

您需要完全卸载 postgresql

`sudo apt-get --purge autoremove postgresql*`

`sudo apt install postgresql-9.6`

# android - Error during create an AVD in 16

> ID：12473116
> 
> 赞同：0
> 
> 时间：2012-09-18T08:29:35.153
> 
> 标签：android, sdk

I have installed `Android sdk version 16`. But cannot create an `AVD`.

The following command return as an error message.

```
android create avd -n sandwitch -t 20 
```

**Error:**

```
Valid ABIs: no ABIs.
Error: This platform has more than one ABI. Please specify one using --abi. 
```

The following error shows when i try to create using eclipse.

```
[2012-09-18 14:28:32 - SDK Manager] Unable to find a 'userdata.img' file for ABI armeabi to copy into the AVD folder. 
```

# EDITED

SDK: ![enter image description here](../Images/7cdb18b781674bac217142a876e60f0c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:32:28.827

转到 Windows -> Android SDK Manager -> 选择并安装 ARM V7a 系统映像

安装基于 ADT 的映像并选择您需要的正确 API

我希望你的问题能得到解决我的朋友

# x86 - 我可以在 x86 应用程序中加载用于 x64 构建的资源库 (DLL) 吗？

> ID：12473122
> 
> 赞同：0
> 
> 时间：2012-09-18T08:29:54.393
> 
> 标签：x86, 64-bit, loadlibrary

我想加载在默认 Windows 打印机驱动程序资源文件中使用的 unired.dll。我可以为 Windows Vista x86 加载 unires.dll。

它位于 C:\Windows\System32\spool\drivers\w32x86\3

但现在我使用的是 Windows 7 Pro x64。

因此无法加载位于 C:\Windows\System32\spool\drivers\x64\3 中的同名 unires.dll。

通过以下代码，GetLastError() 返回 193

是否可以？还是不可能？我使用 Visual Studio 2005 Pro。尝试构建 x64 和 x86，但它们都失败了。

```
TCHAR libName[MAX_PATH];
wsprintf(libName , _T("unires.dll"));

HINSTANCE hLibraryInstance = ::LoadLibrary(libName);
DWORD ErrorId=::GetLastError();

std::wofstream out;
out.open(_T("unires.txt"));

for(UINT resKey=0;resKey<100000;resKey++)
{

    TCHAR * resBuf=new TCHAR[CHAR_MAX]; 
    int BufferMaxSize=CHAR_MAX;
    int Result=::LoadString(hLibraryInstance, resKey, resBuf, BufferMaxSize);

    wstring resStr=resBuf;

    if(!resStr.empty())
    {
        out<<resKey;
        out<<" ";
        out<<resStr.c_str();
        out<<endl;
    }

    if(resBuf!=NULL)
    {
        delete [] resBuf;
    }
}

out.close(); 
```

请帮我。最好的祝福！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:35:11.320

如评论链接中所述，您无法在 x86 进程中加载​​ x64 库。

解决方案可能是将您的程序移植到 64 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:38:21.787

根据 MSDN 文章介绍 LoadResource，第一个参数应该是可选的。

对我来说，当我尝试访问位于另一个 exe 文件中的资源而不传递 hModule 参数时，LoadResource 会产生错误代码 193。

不起作用：

```
HRSRC hResource = FindResource(LoadLibrary(strFileName.c_str()), MAKEINTRESOURCE(1), RT_STRING);
HGLOBAL hResHandle = LoadResource(NULL, hResource); 
```

奇迹般有效：

```
HMODULE hExe = LoadLibrary(strFileName.c_str());
HRSRC hResource = FindResource(hExe, MAKEINTRESOURCE(1), RT_STRING);
HGLOBAL hResHandle = LoadResource(hExe, hResource); 
```

# php - codeigniter中的表单验证自定义消息？

> ID：12473124
> 
> 赞同：2
> 
> 时间：2012-09-18T08:30:05.097
> 
> 标签：php, codeigniter, validation

在 codeigniter 中，我在许多控制器中使用了 codeigniter 表单验证库，

前任： -

> $this->form_validation->set_rules('rank', 'Rank', 'required');

如果表单验证失败，则显示

```
 "The Rank field is required." 
```

在这里我想显示自定义消息，我可以遵循的一种方法是

> $this->form_validation->set_message('必填', '%s不能为空');

如果我使用这种方法，那么我需要在每个控制器中重复这个代码，无论我在哪里使用“必需”表单验证方法

我的问题是有什么方法可以在配置文件中声明此自定义消息并在我使用表单验证规则“必需”时自动使用此自定义消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T08:37:10.963

如果您想永久覆盖错误消息，只需将其硬编码到**form_validation_lang.php**文件中。
（位于*系统/语言/英语*）

如果您希望选择扩展 form_validation 类，添加您的自定义所需函数并在 lang 文件中添加适当的错误消息。

例如;

```
class MY_Form_validation {
    public function custom_required($str) {
        if ( ! is_array($str)) {
            return (trim($str) == '') ? FALSE : TRUE;
        } else {
            return ( ! empty($str));
        }
    }
} 
```

然后在lang文件中；

```
$lang['custom_required'] = "%s can not be blank."; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T08:37:17.690

从 CI 文档本身：

“所有本机错误消息都位于以下语言文件中：language/english/form_validation_lang.php

要设置您自己的自定义消息，您可以编辑该文件，或使用以下函数：
`$this->form_validation->set_message('rule', 'Error Message');"`

[http://codeigniter.com/user_guide/libraries/form_validation.html#settingerrors](http://codeigniter.com/user_guide/libraries/form_validation.html#settingerrors)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T17:47:40.803

```
class MY_Form_validation extends CI_Form_validation {

    public function __construct()
    {
        parent::__construct();
    }
    function required_select($input)
    {
        $this->set_message('required_select','select %s');
        return FALSE;
    }

} 
```

为我工作:)

# file - Struts2 - 文件选择字段值在验证错误时消失

> ID：12473126
> 
> 赞同：3
> 
> 时间：2012-09-18T08:30:16.293
> 
> 标签：file, validation, struts2

我有一个带有文件选择字段的典型 struts2 表单：

```
<s:form action="%{#parameters.myAction}" namespace="/" method="post" name="myForm" enctype="multipart/form-data" focusElement="storeBrandNameId">
 <s:textfield name="storeBrandName" id="storeBrandNameId" size="40" maxlength="50" required="true" key="storeBrandName-label" tooltip="%{getText('storeBrandName-label-help')}" />
 <s:file name="storeImage" key="storeImage-label"/>
 /* ... Other fields removed for clarity ... */
 <s:submit key="submit" />
</s:form> 
```

该表单工作正常，除非我遇到验证错误（使用 XML 验证）。在这种情况下，除了所选文件（如果有）之外，所有字段值都将保留。

为什么在验证错误时清除所选文件？这是我这边的错误吗？struts2 的限制？还是典型的浏览器限制？有办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:39:47.633

文件字段可能未预先填写；这是一个 HTML 的东西，出于安全目的。

如果文件已经上传，您可以记住并提供使用刚刚上传的文件。我仍然会显示文件输入框。这会（稍微）使验证复杂化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T10:13:29.283

出于安全原因，不能更改或初始化文件输入字段的值。

在您的表单中，您有两个字段，文本字段和文件字段。当他们选择的文件错误时，我认为用户不会关心他们是否会丢失输入字段的值。只有当文本字段中的值错误时，他们才会生气，因此他们需要再次提取文件。因此，您可以在提交表单之前对文本字段值进行 ajax 验证（或者更好，因为他们键入值！）。如果有问题，表单没有提交，用户修复它并且不要丢失文件字段值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T09:29:57.330

好吧，这是一个正常的用例，您需要处理它以保存数据并向用户显示所选值，即使在验证错误时也是如此。

通常验证错误让工作流拦截器重定向回页面并显示有错误的页面，这意味着您的实际方法永远不会被调用。

Struts2 提供了一种方法来准备您的操作正常工作所需的任何数据。用户可[准备](http://struts.apache.org/2.3.4/docs/preparable-interface.html)接口并使用其准备方法。

它的`prepare()`方法在验证之前被调用，您可以设置显示是否有任何错误所需的任何值。

简而言之`prepare()`，方法工作作为 init 方法来完成任何此类工作

# java - 无法理解代码，特别是 &

> ID：12473131
> 
> 赞同：0
> 
> 时间：2012-09-18T08:30:35.417
> 
> 标签：java, bit-manipulation

我正在阅读有关 Java pacman 游戏的教程。

这是有问题的代码。

```
 if (pacmanx % blocksize == 0 && pacmany % blocksize == 0) {
        pos = // integer         
        ch = screendata[pos];

        if ((ch & 16) != 0) { // do not understand this.
            screendata[pos] = (short)(ch & 15);
            ...
        } 
```

我不是很了解单&。我了解此操作数检查 if 语句的两侧，或者是按位运算符。但是，根据下面的测试，它似乎也不是：

```
if I was to test (ch = 18):
(ch & 16) = 16
(ch & 8) = 0
(ch & 2) = 2 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T08:32:45.470

`&`是[位运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)AND：

```
18 = 10010
16 = 10000
----------
16 = 10000

18 = 10010
 8 = 01000
----------
 0 = 00000 
```

因此`if`将检查第五位是 1 还是 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T08:33:02.863

单曲`&`是[按位](http://en.wikipedia.org/wiki/Bitwise_operation) `AND`的。这是对您号码的各个位执行的和操作。

考虑一下您的短片的可能位表示：

```
10011011 &   : screendata[pos]
00010000 =   : 16
----------
10010000 
```

特别是这一行：

```
if ((ch & 16) != 0) { 
```

检查您的号码的第 5 位 (2^ (5 -1)) 是否设置为 1（不同于 0）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T08:34:51.377

这不是布尔值，它始终是`&&`; 相反，它是按位和。它正在检查右边的第 5 位是否设置为`ch`.

```
ch = 18  //      ch = 0b00010100
ch & 16  //      16 = 0b00010000
         // ch & 16 = 0b00010000 != 0
ch & 8   //       8 = 0b00001000
         // ch &  8 = 0b00000000 == 0
ch & 2   //       2 = 0b00000010
         // ch &  2 = 0b00000010 != 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T08:32:40.487

给定`ch = 18`

```
(ch & 16) = 16
(ch & 8) = 0
(ch & 2) = 2 
```

似乎是正确的。二进制中的 18 是什么？`16 | 2`或`10010`二进制。

需要明确的是，`&`是位运算符。但是`&&`，如果两个操作数都为真，则返回真。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T08:32:50.907

单与号是按位与运算符。

如果值是十六进制的，您可能会发现更容易“获取”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T08:34:28.637

按位与运算符`&`对两个整数的每一位执行“与”以确定结果。

所以：

18 = 0001 0010
16 = 0001 0000
18&16 = 0001 0000

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-18T08:36:24.990

& 是按位运算符 AND。您可以在[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html中查看详细信息](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)

# sql-server-2008 - No sql server database connection with localy used IIS

> ID：12473132
> 
> 赞同：0
> 
> 时间：2012-09-18T08:30:39.403
> 
> 标签：sql-server-2008, iis, web-config

i am trying to get a database connection through my IIS with an MVC Webproject.
In my Web.conf connection string i use following parameters:

`data source=[Computername]\[DatabaseInstanceName]`

This doesn't work for me.But when change the [Computername] to my IP-Adress it works.

Somebody with an idea what i can do? Because it's annoying to change this everyday in several files.

edit: i am using the IIS 8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:02:46.550

有几种方法可以验证我的连接

1）如果您使用的是视觉工作室，

a) 在`Data`菜单上单击`Transact-SQL Editor`并检查此对话框

![在此处输入图像描述](../Images/4fbe3b42fd021c0f20fc7ebd44b56912.png)

b) 另一个技巧是我尝试创建一个数据源，按照对话框复制 Visual Studio 生成的连接字符串

c）如果查看服务器资源管理器，您可以在那里找到您的数据库，右键单击数据库并单击属性

![在此处输入图像描述](../Images/9b998ccee0674f3ba0cb66b2998babdb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:06:36.907

`computername`需要机器可以访问。目前只有 IP 地址有效，因为没有任何东西告诉系统`myComputerName`是位于 IP 地址的机器。

您可以将条目添加到主机文件或本地 DNS 服务器（如果使用）。如果添加到您的主机文件（它会在某个地方`C:\Windows\System32\drivers\etc`），并且您需要以管理员身份运行您的文本编辑器。该条目将如下所示：

```
192.168.1.1    JSCWorkstation 
```

（显然将 IP 和计算机名称更改为您的实际值。如果数据库与应用程序在同一台机器上运行，您可以使用本地环回地址 (127.0.0.1) 作为条目的 IP。

如果您在具有本地 DNS 服务器的环境中，您可以要求管理员在 DNS 服务器中添加类似的条目。

完成此操作后，可以通过名称而不是 IP 地址找到您的计算机。您可以通过打开命令提示符并键入来进行测试

`ping myComputername`. 如果你得到回复，一切都很好。

# java - Java - 当我试图获取源代码服务器返回的 HTTP 响应代码：400

> ID：12473134
> 
> 赞同：0
> 
> 时间：2012-09-18T08:30:47.507
> 
> 标签：java, html, http

我的问题在我的标题中，我也会给出java代码和细节。

```
void getSourceCode(String text_url){

    String source_code="";
    BufferedReader reader = null;

    try {
          reader = new BufferedReader(new InputStreamReader((new URL(text_url)).openStream(), Charset.forName("UTF-8")));
          String inputLine;
          while ((inputLine = reader.readLine()) != null) {
            source_code+=inputLine.replace(" ", "");
          }
    } 

    catch (Exception e) {
        e.printStackTrace();
    } 

    finally {
          if (reader != null) {
                try {
                  reader.close();
                } 
                catch (IOException e) {
                  e.printStackTrace();
                }
          }
    }

    System.out.println( source_code );
} 
```

例如，我通过 html a href="..." 解析发送“http://ekenlermangalkomuru.com/urunlerimiz/liste/144/BinarKömürü”作为参数，但错误报告是：

> java.io.IOException：服务器返回 HTTP 响应代码：400 用于 URL： [http](http://ekenlermangalkomuru.com/urunlerimiz/liste/144/BinarK%C3%B6m%C3%BCr%C3%BC)
> ://ekenlermangalkomuru.com/urunlerimiz/liste/144/BinarKömürü at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source) at java.net.URL.openStream（未知来源）

该链接适用于所有浏览器，但是当我尝试通过 java 代码连接时它不起作用。我该如何解决？谢谢大家的建议。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:41:33.230

错误 400 表示请求格式错误，导致服务器无法处理它。您确定您对请求 URL 进行了正确的 URL 编码吗？对于类似：[http](http://ekenlermangalkomuru.com/urunlerimiz/liste/144) ://ekenlermangalkomuru.com/urunlerimiz/liste/144 /BinarKömürü，至少 ö 和 ü 不是 ASCII 字母，需要进行编码以创建格式正确的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T08:37:57.843

错误 400 表示您没有向该站点发出“好的”请求。我认为您需要的不仅仅是 BufferedReader 来通过 HTTP 打开 URL。那是因为协议需要知道你想看到什么以及你是否有可用的缓存等。要打开一个 URL，你应该使用 HttpUrlConnection，检查[如何在 java 中发送 HTTP 请求？](https://stackoverflow.com/questions/1359689/how-to-send-http-request-in-java)了解信息，[http://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html](http://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html)也可能会有所帮助。

# objective-c - Weak linking popoverBackgroundViewClass to make it work in <5.0 IOS

> ID：12473135
> 
> 赞同：0
> 
> 时间：2012-09-18T08:30:51.213
> 
> 标签：objective-c, ios5, backwards-compatibility, weak-linking

Already checked this question: [Weak linking UIPopoverBackgroundView](https://stackoverflow.com/questions/11428675/weak-linking-uipopoverbackgroundview) and already read: [http://www.marco.org/2010/11/22/supporting-older-versions-of-ios-while-using-new-apis#fnref:1](http://www.marco.org/2010/11/22/supporting-older-versions-of-ios-while-using-new-apis#fnref:1)

I have a custom PopoverBackgroundView declared in a .h and implemented in a .m file. Then, in just one file, I instantiate it like this

```
 self.settingsPopover.popoverBackgroundViewClass = [CustomPopoverBackgroundView class]; 
```

I´ve tried doing it like marco says in the link above:

```
if ([UIPopoverBackgroundView class] != nil) {
    self.settingsPopover.popoverBackgroundViewClass = [CustomPopoverBackgroundView class];
} 
```

But I get the same launch error when I run in a 4.3 ipad simulator

```
dyld: Symbol not found: _OBJC_CLASS_$_UIPopoverBackgroundView 
```

My base sdk is IOS 5.1, and my target deployment is 5.1 as well. Im using LLVM compiler 4.0.

Any ideas? Thanks a lot!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:27:36.967

您是否尝试过使用`respondsToSelector`相关`UIPopoverController setBackgroundViewClass`方法？请记住，除了普通的属性语法之外，属性会自动生成您可以使用的 setter 和 getter 方法。

您仍然收到链接器错误的原因是因为您仍在尝试调用该类的方法，该方法不存在。

如果是整个类都不存在的情况，Apple 建议使用`NSClassFromString(@"UIPopoverController")`并检查返回的结果是否为 nil。

# c++ - c++ 我可以在构造函数中声明类成员并初始化它吗

> ID：12473138
> 
> 赞同：1
> 
> 时间：2012-09-18T08:31:05.293
> 
> 标签：c++

```
class Monitor {
public:
    Monitor(string someData);
    Person person_;
}

class Person {
public:
    Person(string personId);
} 
```

Person 没有默认构造函数。它有一个参数构造函数。我只能**在**Monitor 构造函数中初始化它。我来自java，其中声明只是指针，因此您在声明时不需要初始化新实例。

没有默认构造函数的类成员的最佳实践是什么？我应该添加默认构造函数（缺点 - 没有用）还是使用指针。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T08:33:52.753

是的，你可以，而且你总是*应该*通过*构造函数初始化列表*：

```
class Monitor
{
    Person p; 
    bool   state;
    const  int n;
    double & d;

    Monitor(std::string const & pname, double & dbl)
    : p(pname)
    , state(false)
    , n(some_other_function(p, state))
    , d(dbl)
    {
         // constructor body should be as short as possible
    }

    // ...

}; 
```

如您所见，初始化不仅仅是一个噱头；相反，它是 C++ 类型系统的一个深刻必要性：有很多变量*必须*初始化且不能赋值，例如常量和引用，还有没有默认构造函数的用户定义类型。（即使有*一个*默认的构造函数，你也需要一个赋值操作符，而且在任何情况下构造一些你不想稍后覆盖它的东西仍然是浪费的。）

还要注意类成分的构造顺序：当您创建类的新实例时，首先构造成员对象，按照它们在类定义中声明的顺序，但*按照初始化列表*。构造所有成员后，构造函数的*主体*运行。

实际上，甚至在成员对象之前还构造了另一件事：基础子对象。自然地，它们的初始化器也出现在初始化器列表中：

```
struct Foo { Foo(int, bool);               /* ... */ };
struct Bar { Bar(std::string const &, int) /* ... */ };

class Monitor : public Foo, private Bar
{
    Person p;

    Monitor(std::string const & pname, int a, int b)
    : Foo(a, a == b)
    , Bar(pname, b)
    , p(pname)
    {
        // constructor body
    }

    // ...
}; 
```

强烈建议（尽管不强制）在构造函数初始化器列表中按照它们的执行顺序编写初始化器！

# android - 刷新活动后 Webview 缩放功能不稳定

> ID：12473142
> 
> 赞同：0
> 
> 时间：2012-09-18T08:31:18.717
> 
> 标签：android, webview

在我的活动中，所有内容都在 webview 中使用所有 web 设置进行管理。我的活动内容每 1 秒刷新一次。因此，当我尝试缩放 webview 时。每隔一秒的 webview 就会保持原来的位置。

> 我想在 webview 中保持缩放状态。这仅在版本 4.0.3 中发生。
> 
> ```
> my webview is in Timer function . and all settings of webview are below .which 
> outside of Timer function : 
> ```

```
 web.getSettings().setBuiltInZoomControls(true);
 web.getSettings().setSupportZoom(true); 
```

请帮我。如果有人知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:12:56.683

Maybe if you use these function:

[https://developer.android.com/reference/android/webkit/WebSettings.html#getDefaultZoom](https://developer.android.com/reference/android/webkit/WebSettings.html#getDefaultZoom)()

[https://developer.android.com/reference/android/webkit/WebSettings.html#setDefaultZoom(android.webkit.WebSettings.ZoomDensity](https://developer.android.com/reference/android/webkit/WebSettings.html#setDefaultZoom(android.webkit.WebSettings.ZoomDensity))

You'll be able to read the zoom level before refreshing, and set it again after the refresh if finished?

# iphone - 如何从库中选择闹钟铃声？

> ID：12473143
> 
> 赞同：-2
> 
> 时间：2012-09-18T08:31:20.370
> 
> 标签：iphone, sdk

我是 iPhone 开发的新手。我正在尝试开发一个**警报**应用程序。我想让用户选择从库中选择闹钟铃声，例如`UIImagePickerController`.

这可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:33:59.900

不，这是不可能的，这`UIImagePickerController`仅适用于图像，并且没有用于选择铃声的控制器。

此外，如果您通过[`UILocalNotification`](https://developer.apple.com/library/prerelease/ios/#documentation/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)该`soundName`属性安排警报，则必须包含应用程序包中的声音文件的名称。

> 对于此属性，指定应用程序主包中声音资源的文件名（包括扩展名）或 UILocalNotificationDefaultSoundName 以请求默认系统声音。当系统显示本地通知的警报或标记应用程序图标时，它会播放此声音。默认值为 nil（无声音）。不支持持续时间超过 30 秒的声音。如果您指定的文件的声音播放时间超过 30 秒，则会播放默认声音。

# iphone - 在 iPhone 3GS 上通过 coreBluetooth 访问 BT 2.1 + EDR 设备

> ID：12473147
> 
> 赞同：0
> 
> 时间：2012-09-18T08:31:30.973
> 
> 标签：iphone, ios5, core-bluetooth, bluetooth-lowenergy

我正在编写一个应用程序并尝试配置鼠标、游戏手柄和手机。这些 BT 设备使用 BT 4.0 芯片组（单模）和 BT3.0/BT4.0（双模）。他们都接受 GATT 协议。

我想知道 iOS 5.x - coreBluetooth 框架，我的应用程序是否有机会通过 iPhone 3GS 上的 GATT 与 BT3.0/BT4.0 设备通信。

由于 iPhone 3GS 没有 BT 4.0 模块，因此 coreBluetooth 似乎无法在 iPhone 3GS 上运行。

我对吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:46:15.740

你是对的。CoreBluetooth 仅适用于蓝牙 4.0 (BLE) 通信。所以它不会在你的 3GS 上工作。

# java - 获取 DOM 元素的计算样式

> ID：12473148
> 
> 赞同：1
> 
> 时间：2012-09-18T08:31:45.157
> 
> 标签：java, flying-saucer, xhtmlrenderer

布局完成后，我想解析 DOM 树并获取每个元素的计算样式。这可能吗。

我能得到的最接近的是下面的代码片段，但它只提供未计算的样式。

```
Element elm = (Element) _doc.getElementsByTagName("table").item(0);
Map props = _sharedContext.getCss().getCascadedPropertiesMap(elm); 
```

是否也可以获得元素所在的“ **Box ”。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:31:45.913

您可以使用 访问文档中的计算样式`ITextRenderer.getRootBox()`。

此方法返回一个`org.xhtmlrenderer.render.Box`对象树，您可以对其进行扫描以找到您的元素。

你可以得到盒子计算样式，`Box.getStyle()`你可以得到盒子引用的元素`Box.getElement()`。

# asp.net - 动态生成html/asp

> ID：12473153
> 
> 赞同：0
> 
> 时间：2012-09-18T08:32:22.303
> 
> 标签：asp.net, html, vb.net

我有一个从表中填充的文件夹/链接的树视图类型结构。我试图做的是通过我的记录集进行程序循环并在 page_init 中生成我的 html，然后尝试绑定控件。当我尝试将链接按钮添加到 html 中的占位符时，它似乎永远找不到它们。

我可能在这里遗漏了一些基本的东西，我看到的所有示例都绑定了页面上已经存在的控件，我无法在 page_init 中自己生成 html 吗？

例子

```
Protected Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init
  content_div.Innerhtml = "<asp:PlaceHolder id=""test"" runat=""server"" ></asp:PlaceHolder>"
End Sub

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)
   Dim _linkb As New LinkButton
   _linkb.ID = "lb_cat_" & cat.uID
   _linkb.Attributes.Add("href", "javascript: sltoggle('cat_" & cat.uID & "');")
   _linkb.Attributes.Add("Text", "Expand/Close")
   _linkb.Attributes.Add("runat", "server")
   Dim ph As PlaceHolder = DirectCast(TRIEDEVERYTHINGUNDERTHESUN.FindControl("test"), PlaceHolder)
   ph.Controls.Add(_linkb)
End Sub 
```

如果有人能指出我正确的方向，将不胜感激

问候，皮特

更新 - 完整代码

```
Private Sub load_dynamic_file_view()
    Dim _sb As New StringBuilder
    Dim _sfc As New sf_file_category, _sff As New sf_file
    _lsfc = _sfc.get_all_sf_file_category
    _lsff = _sff.get_active_sf_files

    Dim _list_root As List(Of sf_file_category) = _lsfc.FindAll(Function(p) p.parent_id = 0)
    If Not _list_root Is Nothing Then
        _sb.Append("<strong>File Downloads</strong><br />")
        _sb.Append("<div class=""indent-me"" ><br />")
        For Each cat As sf_file_category In _list_root
            'header/Open Link
            Dim _linkb As New LinkButton
            _linkb.ID = "lb_cat_" & cat.uID
            _linkb.Attributes.Add("href", "javascript: sltoggle('cat_" & cat.uID & "');")
            _linkb.Attributes.Add("Text", "Expand/Close")
            _linkb.Attributes.Add("runat", "server")
            Dim ph As PlaceHolder = DirectCast(Me.Master.FindControl("lb_cat_" & cat.uID), PlaceHolder)
            ph.Controls.Add(_linkb)

            _sb.Append(HtmlDecode(cat.name) & " &nbsp;&nbsp;&nbsp;<Asp:PlaceHolder id=""lb_cat_" & cat.uID & """ runat=""server"" /><br />")
            '_sb.Append("<div id=""cat_" & cat.uID & """ class=""toggle-hide"">")
            '_sb.Append(add_child_folder(cat.uID, content))
            '_sb.Append(show_files(cat.uID, content))
            '_sb.Append("</div><div class=""clearfix"" />")
        Next
        _sb.Append("</div>")
        _sb.Append("<br /><br />")
    End If

    content_div.InnerHtml = _sb.ToString
End Sub

Private Function add_child_folder(ByVal catid As Long, ByRef content As ContentPlaceHolder) As String
    Dim _sb As New StringBuilder
    Dim _cl As List(Of sf_file_category) = _lsfc.FindAll(Function(p) p.parent_id = catid)
    If Not _cl Is Nothing Then
        _sb.Append("<div class=""indent-me"" ><br />")
        'For Each _c As sf_file_category In _cl.OrderBy(Function(p) p.view_order)

        _cl.Sort(Function(c1 As sf_file_category, c2 As sf_file_category)
                     Return c1.view_order.CompareTo(c2.view_order)
                 End Function)

        For Each cat As sf_file_category In _cl
            Dim _linkb As New LinkButton
            _linkb.ID = "lb_cat_" & cat.uID
            _linkb.Attributes.Add("href", "javascript: sltoggle(&#39;cat_" & cat.uID & "&#39;);")
            _linkb.Attributes.Add("Text", "Expand/Close")
            _linkb.Attributes.Add("runat", "server")
            Content.Controls.Add(_linkb)

            _sb.Append(HtmlDecode(cat.name) & "&nbsp;&nbsp;&nbsp;<Asp:LinkButton id=""lb_cat_" & cat.uID & """ runat=""server"" Text=""Expand/Close"" href=&#39;javascript: sltoggle(&#39;cat_" & cat.uID & "&#39;);&#39; /><br />")
            '_sb.Append("<div id=""cat_" & cat.uID & """ class=""toggle-hide"">")
            _sb.Append(add_child_folder(cat.uID, content))
            _sb.Append(show_files(cat.uID, content))
            '_sb.Append("</div><div class=""clearfix"" >")
        Next
        _sb.Append("</div><br />")
    End If

    Return _sb.ToString
End Function

Private Function show_files(ByVal catid As Long, ByRef content As ContentPlaceHolder) As String
    Dim _sb As New StringBuilder
    Dim _fl As List(Of sf_file) = _lsff.FindAll(Function(p) p.file_category = catid)
    If Not _fl Is Nothing Then
        _sb.Append("<div class=""indent-me"" ><br />")
        For Each _f As sf_file In _fl
            Dim _linkb As New LinkButton

            _linkb.ID = "file_" & _f.uID
            _linkb.Attributes.Add("onCommand", "download_file")
            _linkb.Attributes.Add("CommandArgument", _f.uID.ToString)
            _linkb.Attributes.Add("Text", _f.file_name)
            _linkb.Attributes.Add("runat", "server")
            AddHandler _linkb.Command, AddressOf download_file
            content.Controls.Add(_linkb)

            _sb.Append("<asp:LinkButton id=""file_" & _f.uID & """ runat=""server"" onCommand=""download_file"" commandArgument=""" & _f.uID & """ Text=""" & _f.file_name & """ /><br />")
        Next
        _sb.Append("</div><br />")
    End If
    Return _sb.ToString
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:42:26.700

看起来您尝试向 . 添加占位符`content_div`，但是，您正在做的是将标签呈现为 HTML 内容。

我不知道究竟是什么类型的控制`content_div`，但你不能试试：

```
content_div.controls.add(new placeholder() { ID = "test" }); 
```

然后，这将允许您在控件中找到`content_div`控件。

**但是**，对您来说可能更简洁的解决方案可能如下：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)
   Dim _linkb As New LinkButton
   _linkb.ID = "lb_cat_" & cat.uID
   _linkb.Attributes.Add("href", "javascript: sltoggle('cat_" & cat.uID & "');")
   _linkb.Attributes.Add("Text", "Expand/Close")
   //you don't need this when using code behind
   //_linkb.Attributes.Add("runat", "server")

   //this will add your linkbutton to the content_div control
   content_div.Controls.Add(_linkb)
End Sub 
```

给这个之前，你应该会发现它是一个有用的方式来动态地构建你的页面与 asp 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:48:43.980

您只生成 HTML 标记而不生成 ASP.Net 标记，因为它们不能被浏览器解析。

我认为你的代码应该像

```
content_div.Innerhtml = "<div id='test'></div>" 
```

ASP:Placeholder 控件只是一个占位符，它不等于 div HTML 标签。例如，我在这里给出了 div 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:16:55.093

页面不知道作为文本添加的 asp.net 控件，因此没有为其存储视图状态/对象，因此您永远无法使用 Findcontrol 找到它。

使用控件的对象并将其添加到父控件的控件集合中，例如

```
div.Controls.Add(new PlaceHolder() { ... }); 
```

在 Render 事件之前添加它后，它的状态将被保存并可以访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T12:06:16.527

您的完整代码显示的是您构建了大量的 HTML 字符串。这对于一些*较小的*情况很好，但是您的代码现在显然变得相当大，我建议您更改这种方法。

我建议您声明 Web 控件等效项，例如：

```
new HtmlGenericControl("div") instead of <div></div> 
```

或者

```
new HtmlAnchor() OR new LinkButton() instead of <a></a> 
```

在树结构示例中，HTML 可能如下所示：

```
<ul>
    <li>
        <a href="root.htm">ROOT</a>
        <ul>
            <li>
                <a href="levelone">LEVEL 1</a>
            </li>
        </ul>
    </li>
</ul> 
```

要在代码中生成它，您可以执行以下操作：

```
'Menu Holder
Dim treeStruct As HtmlGenericControl("ul")

'Root
Dim branch As HtmlGenericControl("li")
Dim branchItem as HtmlAnchor("a")

'Level 1 
Dim subLevel As HtmlGenericControl("ul")
Dim subBranch As HtmlGenericControl("li")
Dim subBranchItem as HtmlAnchor("a")

'Setup Level 1
subBranchItem.InnerText = "LEVEL 1"
subBranchItem.Href = "levelone"

subBranch.Controls.Add(subBranchItem)
subLevel.Controls.Add(subBranch)

'Setup Root
branchItem.InnerText = "ROOT"
branchItem.Href = "root.htm"

'Add Link To Root
branch.Controls.Add(branchItem)
'Add Sub Branch To Root
branch.Controls.Add(subLevel)

treeStruct.Controls.Add(branch) 
```

**重要**上面的代码仅用于示例，理想情况下，您可以将功能分离为用于创建分支的函数，然后使用 for 循环遍历您的元素。

您还会注意到我使用了 an`<UL>`而不是，`<DIV>`因为我认为树结构是无序列表。此外，您还将从这种更有棱角的结构中获得造型优势。

我希望这有帮助

# jquery - 模型中的更新数据未在视图中填充

> ID：12473165
> 
> 赞同：0
> 
> 时间：2012-09-18T08:32:53.250
> 
> 标签：jquery, asp.net-mvc, c#-4.0

* * *

我正在使用 MVC 4 Razor 开发一个 jQuery Mobile 应用程序。

在页面加载时，我借助以下代码从数据库中显示一些默认信息，

```
@Html.LabelFor(m => MyModel.MyEntity.SomeProperty, MyModel.MyEntity.SomeProperty) 
```

即用我的模型中的一些属性填充标签。

这第一次很好用。

现在，我的视图上有一个下拉列表，要求是用户何时更改下拉列表选项，我必须再次从数据库中获取与该选项相关的数据并显示此更新信息。

这是问题区域，更新的信息没有显示在视图上，但我可以检查更新的信息是否来自数据库。

我正在通过以下语句跟踪更改下拉选择的选项：-

```
$('#ddlDropdown').change(function()) 
```

然后调用一些 Ajax 函数从控制器执行一种方法以获取更新的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:14:26.663

如果信息来自数据库做客户端代码并且标签没有更新，那么您的更新代码肯定有一些错误，可能与引用它有关。

但是没有任何代码很难指出错误。你能把代码放在你的更改函数中吗？

# clearcase - Clearcase 命令查看特定用户创建的分支

> ID：12473171
> 
> 赞同：3
> 
> 时间：2012-09-18T08:33:25.127
> 
> 标签：clearcase

获取 Clearcase 中特定用户创建的分支列表的命令是什么？此外，是否有使用正则表达式按名称获取分支列表的命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:47:51.293

不支持正则表达式。

您可以使用 列出分支[`cleartool lstype -fmt "%n %u\n" -kind brtype`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r1m2/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_lstype.htm?resultof=%22lstype%22)，但您仍然需要解析结果以获取您创建的分支。

使用这些[`fmt_ccase`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r1m2/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)选项，您可以显示分支的创建者和名称，供您解析。

# java - HttpURLConnection 两次读取 InputStream

> ID：12473180
> 
> 赞同：4
> 
> 时间：2012-09-18T08:34:03.423
> 
> 标签：java, android, inputstream, httpurlconnection

我通过向服务器发出http get请求`HttpURLConnection`，我需要读取响应（`InputStream`）两次：用于记录目的和解析响应。返回的是不支持标记（return ）`InputStraem`的实例。`org.apache.harmony.luni.internal.net.www.protocol.http.ChunkedInputStream``is.markSupported()``false`

因此我不能流式传输`mark()`并且`reset()`在日志中写入响应后我无法解析它。当然，我可以将响应读入一次`String`或其他内容，记录它们并稍后解析。但是当我使用流时，我可能会避免`OutOfMemomryError`，因为流处理缓冲而不是我。

在这种情况下，什么是最好的解决方案，它可以保持使用流的好处并帮助实现预期的结果：同时记录到日志和解析响应？

**编辑：**将响应写入临时文件的解决方案不合适

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T08:48:06.890

我不确定我是否完全理解，你想读`InputStream`一次（不是真的两次，这有点不干净IMO，因为如果错误只发生在日志流而不是你正在解析的流上怎么办？）然后简单地记录和解析一样`InputStream`吗？

如果是上面的情况，这里伪显示解决方案：

```
InputStream is=...;
byte[] bytes=new byte[1028];
while(is.read(bytes)!=-1) {
log(bytes); //call function to log
parse(bytes);//call function to parse
} 
```

对于同时记录和记录，更好的方法是为这两种方法创建一个新的`Thread`/ `Runnable`，启动它们并使用 ( ) 等待它们返回`thread.join();`：

```
InputStream is=...;
byte[] bytes=new byte[1028];
while(is.read(bytes)!=-1) {
Thread t1=new Thread(new Runnable() {
        @Override
        public void run() {
          log(bytes); //call function to log
        }
    });
Thread t2=new Thread(new Runnable() {
        @Override
        public void run() {
           parse(bytes);//call function to parse
        }
    });
     t1.start();
     t2.start();
try {
     t1.join();
     t2.join();
    }catch(Exception ex) {
      ex.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T08:57:57.163

您永远不需要读取输入流两次。在阅读时记录下来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T08:44:59.107

如果您事先不知道流的潜在大小（或者如果它太大而无法放入 a`String`或 a中`byte[]`），那么我将使用 the`InputStream`来`HttpURLConnection`记录（如果需要，可能在单独的文件中）和我将使用日志文件进行解析。

这可能不是最有效的复制方式，`InputStream`但可能是最安全的内存方式之一。

# php - 如何显示来自另一个网页的文章的快照？

> ID：12473186
> 
> 赞同：0
> 
> 时间：2012-09-18T08:34:29.960
> 
> 标签：php, javascript, html, web

我为我的橄榄球俱乐部开发了一个网站。我们目前有一页上有新闻文章（每个故事都有自己唯一的 ID）。

我想做的是为每个故事设置一个单独的页面，然后在标题页面上显示该故事的快照（例如标题和第一段）。

我怎么能这样做？通过javascript还是php？（原谅新手）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:42:56.630

在表中使用一个`headline`字段和一个字段。`text``Article`

要提取文本的第一段，请使用[explode](http://php.net/manual/fr/function.explode.php)函数。

```
$paragraph = explode("\n", $text);

echo $paragraph[0]; 
```

如果您的文本包含`<p></p>`：

```
$paragraph = explode("</p>", $text);

echo $paragraph[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:38:00.947

您可以使用[Links With URL Preview](http://cssglobe.com/lab/tooltip/03/) from [Easiest Tooltip 和 Image Preview Using jQuery](http://cssglobe.com/easiest-tooltip-and-image-preview-using-jquery/)。

参见示例 3：

### 示例 3：带有 URL 预览的链接

> 这需要更多的努力，但作为添加到您网站的额外功能可能是值得的。您需要的是目标网址的小尺寸屏幕截图。您将把截图图像的位置放在 A 标签的 REL 属性中，剩下的就交给脚本了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T08:38:41.283

一种方法是使用[jQuery 的 load()](http://api.jquery.com/load/)功能来抓取文章页面，并删除不需要的内容。我不一定会推荐这个，因为加载的文件算作一次页面访问，并且可能会搞砸你的分析。

你在使用 CMS 吗？这是 Wordpress、Joomla、Perch 等系统的一个相当标准的功能。

# linux - Unable to determine right mime-type on Linux

> ID：12473187
> 
> 赞同：2
> 
> 时间：2012-09-18T08:34:35.797
> 
> 标签：linux, mime-types

I'm using [mime-util-2.1.3](http://www.rgagnon.com/javadetails/java-0487.html) to check mime types a file. I have noticed that on linux it is unable to correctly detect flv files. The mime type is shown as application/octet-stream, while on windows the mime type is correctly determined as video/x-flv. mp4 videos were detected though. How do I make the application to recognize the flv mime type on Linux ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:34:12.160

尝试用这个初始化：`MimeUtil.registerMimeDetector("eu.medsea.mimeutil.detector.MagicMimeMimeDetector"); MimeUtil.registerMimeDetector("eu.medsea.mimeutil.detector.ExtensionMimeDetector"); MimeUtil.registerMimeDetector("eu.medsea.mimeutil.detector.OpendesktopMimeDetector");` 我只注册了第一个，MagicMimeMimeDetector。一旦我添加了另外两个，它就开始正常工作了。

# php - PHP preg_replace 某些字符串

> ID：12473189
> 
> 赞同：2
> 
> 时间：2012-09-18T08:34:47.217
> 
> 标签：php, regex, preg-replace

我在一个文本文档（存储在 $content 中）中有几个这样的标签，还有很多其他内容：

```
[[tag:author|id:6329]] 
```

我一直在尝试用给定的 id（在本例中为 6329）用另一个字符串替换所有这些标签。

```
$id = 6329;
$replacement = $this->format($id);
$pattern = "/(\[\[tag:author|id:".$id."\]\])/";
preg_replace($pattern, $replacement, $content); 
```

虽然这似乎不起作用，而且在过去的几个小时里我一直在扯头发。任何人都可以看到错误吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:38:00.040

你也需要逃跑`|`，不需要用`()`.

尝试：

```
$pattern = "/\[\[tag:author\|id:".$id."\]\]/"; 
```

# android-sqlite - 从表中获取单行

> ID：12473194
> 
> 赞同：15
> 
> 时间：2012-09-18T08:35:21.167
> 
> 标签：android-sqlite

这些是我表中的 ID：

```
KEY_ID(autoincremented integer primary key)   KEY_NAME(text)     KEY_PH_NO(text)

1                                             james                   1234567890
2                                             kristein                6484996755
3                                             Roen                    4668798989
4                                             Ashlie                  6897980909 
```

我想知道的是，我怎样才能从这个表中得到一条记录`unique(KEY_ID)`，为此我建立了一个`getContact()`这样的方法，

```
Contact getContact(int id) {
    SQLiteDatabase db = this.getReadableDatabase();

    Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID,
            KEY_NAME, KEY_PH_NO }, KEY_ID + "=?",
            new String[] { String.valueOf(id) }, null, null, null, null);
    if (cursor != null)
        cursor.moveToFirst();

    Contact contact = new Contact(Integer.parseInt(cursor.getString(0)),
            cursor.getString(1), cursor.getString(2));
    // return contact
    return contact;
} 
```

并且`Contact`是一个类，我为所有属性设置了所有 getter 和 setter 方法。

请帮助提供完整的代码。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-24T11:32:45.790

看看能不能帮到你。。

假设您的表名是 Employee

```
public String getEmployeeName(String empNo) {
    Cursor cursor = null;
    String empName = "";
    try {
        cursor = SQLiteDatabaseInstance_.rawQuery("SELECT EmployeeName FROM Employee WHERE EmpNo=?", new String[] {empNo + ""});
        if(cursor.getCount() > 0) {
            cursor.moveToFirst();
            empName = cursor.getString(cursor.getColumnIndex("EmployeeName"));
        }
        return empName;
    }finally {
        cursor.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-22T19:22:23.913

```
Contact getContact(int id) {
    SQLiteDatabase db = this.getReadableDatabase();

    Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID,
        KEY_NAME, KEY_PH_NO }, KEY_ID + "=?",
        new String[] { String.valueOf(id) }, null, null, null, null);
    if (cursor != null)
        cursor.moveToFirst();

    Contact contact = new Contact(Integer.parseInt(cursor.getString(0)),
                        cursor.getString(1), cursor.getString(2));
    // return contact
    return contact;
} 
```

假设您有用于联系的实体类，然后您只需将其称为上面的方法即可。

```
Contact singleContact = database.getContact(id); 
```

然后调用联系实体，我假设你有方法 getter getPhone();

```
Log.d("Phone Number :" , singleContact.getPhone()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-07T16:01:41.960

尝试这个

`cursor.moveToPosition(position); cursor.getString(listaTarefas1.getColumnIndex("Item"))`

# android - 删除 droidText 中 TextField 的外观：Android

> ID：12473197
> 
> 赞同：0
> 
> 时间：2012-09-18T08:35:25.783
> 
> 标签：android, pdf-generation, textfield, android-droidtext

我正在尝试使用**droidText**库创建 PDF。在那里，我想在页面中间放置一些文本内容，但左对齐。我无法处理`Paragraph`类和`setAlignment()`方法。所以我决定使用`TextField`类。下面是我使用的代码，

```
Document document = new Document(PageSize.A4);

try {

    PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(android.os.Environment.getExternalStorageDirectory() + java.io.File.separator + "TextFields.pdf"));

    document.open();

    TextField tf = new TextField(writer, new Rectangle(100, 300, 200, 350), "Content");
    tf.setText("This is the content of text field");
    tf.setAlignment(Element.ALIGN_CENTER);
    tf.setOptions(TextField.MULTILINE | TextField.REQUIRED);

    PdfFormField field = tf.getTextField();
    writer.addAnnotation(field);

} catch (DocumentException de) {
    System.err.println(de.getMessage());
} catch (IOException ioe) {
    System.err.println(ioe.getMessage());
}

document.close(); 
```

代码工作完美，但我得到的输出 PDF 文件有这个 TextField，它可以编辑，当我点击 TextField 时还可以更改字体外观。我不希望它出现在我的最终 PDF 中。如何删除该属性？如果不可能，*有没有其他方法可以使用 Android 中的 droidText 库在 PDF 文件中放置一些文本？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:18:29.690

1.  您正在使用完全不受支持的软件库。请参阅[http://lowagie.com/iText2](http://lowagie.com/iText2) iText Software 提供了最新 iText 版本的官方 Android 端口。它不需要 Apache Harmony，它使用 SpongyCastle 而不是 BouncyCastle 来解决冲突 BC 版本的问题。见[http://lowagie.com/iText2](http://lowagie.com/iText2)
2.  好像你想添加一个水印。在这种情况下，您实际上并不需要 TextField。TextField 对象用于创建交互式表单（您指出这不是您想要的）。在页面中间添加短语的最简单方法是使用[ColumnText.showTextAligned()](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/ColumnText.html#showTextAligned%28com.itextpdf.text.pdf.PdfContentByte,%20int,%20com.itextpdf.text.Phrase,%20float,%20float,%20float%29)。有关更多信息，请参阅“iText in Action — Second Edition”[第 3 章](http://itextpdf.com/themes/keyword.php?id=60)的示例。

# metadata - 在 Visual Studio 中加载元数据时出错

> ID：12473201
> 
> 赞同：2
> 
> 时间：2012-09-18T08:35:37.243
> 
> 标签：metadata, ssas, olap, cube

加载元数据时出错：无法从服务器检索“我的多维数据集名称”多维数据集。验证服务器是否正在运行并且多维数据集已被处理。

在处理和部署多维数据集后，我收到相同的错误消息......

有任何想法吗......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:51:04.533

检查多维数据集的`Visible`属性是否设置为`True`. 您可以在这里找到更多信息：http: [//social.msdn.microsoft.com/Forums/en-US/sqlanalysisservices/thread/0d404944-ea14-4e1f-89d6-069900eb9b92/](http://social.msdn.microsoft.com/Forums/en-US/sqlanalysisservices/thread/0d404944-ea14-4e1f-89d6-069900eb9b92/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T00:37:16.883

当服务器文件（在 Microsoft SQL Server\\OLAP\Data 文件夹中）中的某些内容损坏时，我遇到了这个问题。当它发生时，我能够解决这个问题的唯一方法是使用 Management Studio 物理删除数据库，然后从 BIDS (Visual Studio) 重新部署项目。

# javascript - 为什么我的 js 变量没有正确找到 php 变量

> ID：12473209
> 
> 赞同：0
> 
> 时间：2012-09-18T08:35:52.787
> 
> 标签：javascript

我正在阅读一个文本文件。然后在名为“$arrpg”的数组中将其拆分为 100 个单词，然后在我的 js 代码中将其加载到 js 变量中，var 无法正确获取数组值。如果您不介意，请查看我出于测试目的上传的链接（[链接](http://leiame.patio.com.br/read/readf/muricoca)）

这里我的输入文本文件是“

> A MUSIISTA EO GUERREIRO À noite, deitado, no escuro, não tenho forças para evitar o Concerto da virtuose muriçoca。Ela vem dali até aqui na velocidade do som。Procuro capturá-la com a mão, ela -- vivace -- ......................还有更多

"

我的js代码是

```
 <script type="text/javascript" charset="UTF-8">

$(document).ready(function() {

    var ind=0;
   var tempv1;
   var tempv2;

    var pages=<?php echo json_encode((int)($page_num));?>;

    var jsarr= <?php echo json_encode($arrpg); ?>;

    var wmap=<?php 

    echo json_encode($word_map); ?>;
    var myurl=<?php echo json_encode($my_link.'write_comment/'.$file_name.'/'.$total_word.'/');?>

     $('.more').each(function() {

        pages++;

           $(this).html(jsarr[ind]);

        tempv2= ' <a class="link2" href="'+myurl+wmap[0]  + '">';

        if(pages!==1)
        {

            tempv1='<span>.... <a href=""class="link1">Read more</a></span>';
            tempv2='<br><br>'+tempv2+'Stop reading</a>';
            $('div.link1').html(tempv1);
            $('div.link2').html(tempv2);

        }
        else
        {

            tempv2='<br><br>'+tempv2+'Please a feedback</a>';

            $('div.link2').html(tempv2);

        }

            scroll();

        });   

    $(".link1").click(function(){

        ind++;

        $('div.more').append(jsarr[ind]);

        tempv2= '<a class="link2" href="'+myurl+wmap[ind]  + '">';

        if(ind<(pages-1) )
        {
            tempv1='<span>.... <a href=""class="link1">Read more</a></span>';
            tempv2='<br><br>'+tempv2+'Stop reading</a>';

            $('div.link1').html(tempv1);
            $('div.link2').html(tempv2);

        }
        else 
        {
            tempv2='<br><br>'+tempv2+'Please a feedback</a>';

            tempv1='';
            $('div.link1').html(tempv1);

            $('div.link2').html(tempv2);

        }

        scroll();

        return false;
    });
});

            function scroll(){
  $('html, body').animate({
    scrollTop: $("#ft").offset().top
  }, 0);
}

</script> 
```

在 jsarr 的此代码声明中无法正确获取值。看到链接你会意识到更多。请帮忙。

第一次编辑后

```
`<script type="text/javascript" charset="UTF-8">

$(document).ready(function() {

    var ind=0;
   var tempv1;
   var tempv2;

    var pages=5;

    var jsarr= [" A MUSICISTA E O GUERREIRO\r\n"," a m"," agudo violino. Cubro a\\norelha, sinto calor, descubro a orelha, escuto a muri"," da habilidosa\\ninstrumentista. Na manh"," palmas de\\nminhas m"," morta, rubronegra\\n-- na plan"];
    alert(jsarr);

    var wmap=[30,60,90,120,150,175];
    var myurl="http:\/\/leiame.patio.com.br\/read\/write_comment\/muricoca\/175\/"  

     $('.more').each(function() {

        pages++;

           $(this).html(jsarr[0]);

        tempv2= ' <a class="link2" href="'+myurl+wmap[0]  + '">';

        if(pages!==1)
        {

            tempv1='<span>.... <a href=""class="link1">Read more</a></span>';
            tempv2='<br><br>'+tempv2+'Stop reading</a>';
            $('div.link1').html(tempv1);
            $('div.link2').html(tempv2);

        }
        else
        {

            tempv2='<br><br>'+tempv2+'Please a feedback</a>';

            $('div.link2').html(tempv2);

        }

            scroll();

        });   

    $(".link1").click(function(){

        ind++;

        $('div.more').append(jsarr[ind]);

        tempv2= '<a class="link2" href="'+myurl+wmap[ind]  + '">';

        if(ind<(pages-1) )
        {
            tempv1='<span>.... <a href=""class="link1">Read more</a></span>';
            tempv2='<br><br>'+tempv2+'Stop reading</a>';

            $('div.link1').html(tempv1);
            $('div.link2').html(tempv2);

        }
        else 
        {
            tempv2='<br><br>'+tempv2+'Please a feedback</a>';

            tempv1='';
            $('div.link1').html(tempv1);

            $('div.link2').html(tempv2);

        }

        scroll();

        return false;
    });
});

            function scroll(){
  $('html, body').animate({
    scrollTop: $("#ft").offset().top
  }, 0);
}

</script>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:44:36.540

json_encode 对非 utf8 字符有一些问题。

json 编码中的字符串解析然后在找到的第一个非 utf8 字符处停止。

所以我建议：

在提交到 json_encode 之前，对 $arrpg 中的每个值进行 utf8_encode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:01:36.540

```
function fix_encoding (&$item, $key)
{
    $item = utf8_encode ($item);
}

array_walk_recursive ($arrpg, 'fix_encoding'); 
```

# mysql - MySQL OUTER JOIN 语法错误

> ID：12473210
> 
> 赞同：25
> 
> 时间：2012-09-18T08:35:54.687
> 
> 标签：mysql, syntax, outer-join

也许对你们来说是一个面子，但作为一个 SQL 查询新手，我遇到了语法问题。有谁知道怎么了？

```
SELECT * FROM company C
OUTER JOIN company_address A ON C.company_id = A.company_id
WHERE A.company_id IS NULL 
```

给出错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds 
to your MySQL server version for the right syntax to use near 
'OUTER JOIN company_address A ON C.company_id = A.company_id WHERE A.address_id 
' at line 2 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-18T08:42:52.770

[在 MySQL 中](http://dev.mysql.com/doc/refman/5.0/en/join.html)，您应该使用`LEFT OUTER JOIN`or `RIGHT OUTER JOIN`。没有正义`OUTER JOIN`。如果您需要`FULL OUTER JOIN`在 MySql 中[，](https://stackoverflow.com/questions/4796872/full-outer-join-in-mysql)[您可以使用和`UNION``LEFT JOIN``RIGHT JOIN`](https://stackoverflow.com/questions/4796872/full-outer-join-in-mysql)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-18T08:42:33.327

尝试

```
SELECT * FROM company C
LEFT JOIN company_address A ON C.company_id = A.company_id
WHERE A.company_id IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-26T09:57:21.133

您必须编写 LEFT JOIN,RIGHT JOIN,INNER JOIN 或 FULL OUTER JOIN 而不仅仅是**OUTER JOIN**。

你的表名也有一个错误，这样的表的字母之间不应该有**空格[****公司 C** - 它应该命名为**company_C** ]

我希望那会奏效……一切顺利！

# php - 以编程方式调用 Plupload

> ID：12473212
> 
> 赞同：0
> 
> 时间：2012-09-18T08:36:03.937
> 
> 标签：php, javascript, jquery, plupload

我是否可以使用任何运行时以编程方式调用[plupload](http://www.plupload.com)文件上传对话框？

实际上，我有一个包含 9 个单元格的表格。我希望当用户单击单元格时，它会调用文件上传对话框并在同一对话框中上传图像。

可以通过Plupload吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:10:31.173

您可以在客户端以编程方式调用 plupload，甚至在您的页面上有多个上传器。

一种方法：

*   有 9 个不可见的 div 容器，ID 为 pludiv1, ... , pludiv9。它们将包含您的上传者
*   将所有的 plupload 初始化代码嵌入到一个以 id 作为参数的 pluploadInit 函数中。在函数中，您将使用此 id 检索 div 并在其中初始化上传器。
*   单击 buttonX 时，首先显示 pludivX（重要），然后以“pludivX”作为参数调用 pluploadInit。

由于您将有多个上传者，因此请注意他们的上下文。例如，您将必须添加一些额外的参数来识别您对服务器的发布请求中的按钮上传器。

# css - 基于“平滑度”的 CSS 过渡回退

> ID：12473215
> 
> 赞同：2
> 
> 时间：2012-09-18T08:36:11.107
> 
> 标签：css, css-transitions

我有一个 Web 应用程序 (HTML/CSS/JS)，它可以在不同的屏幕之间“转换”——屏幕相当复杂——上面有很多元素。实际上，它与[http://beta.usatoday.com/](http://beta.usatoday.com/)非常相似，只是它上下以及从左到右。（而且它可能稍微不那么复杂）。

所以我使用 CSS3 过渡来管理视图之间的滑动。在我的机器上，它们既光滑又漂亮，而且应用程序看起来非常好。但是，在较旧的机器上，体验就不太令人满意了。例如带有集成显卡的 Core2Duo 笔记本电脑 - 大约 3 岁。在这一点上，我得到了非常跳跃的过渡，而且过渡需要很长时间。它们设置为 0.3 秒的持续时间，但是，在较旧的机器上，它们需要 4/5 秒。

所以我的问题是：

*   我可以做些什么来提高旧硬件的流畅度？
*   如果我不能，有没有办法基于硬件（或通过测量转换实际持续时间）进行回退，以便我可以设置位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:35:50.240

对于某些浏览器版本和移动浏览器，webkit 中存在一个错误，导致转换非常滞后。对我有用的修复之一是添加：

```
-webkit-transform: translate3D(0, 0, 0); 
```

另一个解决方案与在过渡期间如何呈现背面可见性有关。对此的修复是添加以下内容，即使背面之前没有更改。

```
-webkit-backface-visibility: hidden; 
```

如果没有看到您的代码，很难说这些是否会有所帮助，但请尝试一下（并且显然是在浏览器的适当前缀中添加）。

# c# - 它说 command.ExecuteNonQuery() 没有初始化

> ID：12473217
> 
> 赞同：1
> 
> 时间：2012-09-18T08:36:21.060
> 
> 标签：c#, ado.net

我的代码：

```
// Get Connection String
string conn = WebConfigurationManager.ConnectionStrings["GraduatesConnectionString"].ToString();
// Create connection object
SqlConnection connection = new SqlConnection(conn);
SqlCommand command = connection.CreateCommand();
try
{
    // Open the connection.
    connection.Open();
    // Execute the insert command.
    command.CommandText = ("INSERT INTO PersonalInfo(Id,Name,LastName,ContactNumber, Address,Gender, Date_Of_Birth) VALUES(\'"
                + (this.txtID.Text + ("\',\'"
                + (this.txtName.Text + ("\',\'"
                + (this.txtLastName.Text + ("\',\'"
                + (this.txtContactNumber.Text + ("\',\'"
                + (this.txtAddress.Text + ("\',\'"
                + (this.gender + ("\',\'"
                + (this.txtDateofBirth.Text + ("\',\'"
             )))));
    command.ExecuteNonQuery();
}
finally
{
    // Close the connection.
    connection.Close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T08:47:47.320

```
using (SqlConnection connection = new SqlConnection(connectionString))
using (SqlCommand command = connection.CreateCommand())
{
    command.CommandText = "INSERT INTO PersonalInfo (Id, Name, LastName, ContactNumber, Address, Gender, Date_Of_Birth) VALUES (@Id, @Name, @LastName, @LastName, @Address, @Gender, @DateOfBirth)";

    command.Parameters.AddWithValue("@Id", txtID.Text);
    ...

    connection.Open();
    command.ExecuteNonQuery();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T08:48:26.507

您缺少结束语`)`，`txtDateofBirth`因此您的陈述不完整。

**但**请注意@podiluska 的评论。这段代码真的很容易被滥用。假设我在中输入类似以下文本的内容`txtDateofBirth`：

```
;DROP TABLE PersonalInfo; 
```

然后您会收到如下查询：

```
INSERT INTO PersonalInfo(...)
VALUES (...);DROP TABLE PersonalInfo; 
```

所以*请*使用@abatishchev 描述的参数化查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T08:53:58.323

我很想将您的代码更改为：

```
string conn = WebConfigurationManager.ConnectionStrings["GraduatesConnectionString"].ToString();
// Create connection object
using(SqlConnection connection = new SqlConnection(conn))
{
    string queryText = "INSERT INTO PersonalInfo(Id,Name,LastName,ContactNumber, Address,Gender, Date_Of_Birth) VALUES(@id,@name,@lastName,@contactNumber, @address,@gender, @date_Of_Birth)";

    using(SqlCommand command = new SqlCommand(queryText, connection))
    {
        try
        {
            // Open the connection.
            connection.Open();

            command.Parameters.AddWithValue("@id", this.txtID.Text);
            command.Parameters.AddWithValue("@name", this.txtName.Text);
            command.Parameters.AddWithValue("@lastName", this.txtLastName.Text);
            command.Parameters.AddWithValue("@contactNumber", this.txtContactNumber.Text);
            command.Parameters.AddWithValue("@address", this.txtAddress.Text);
            command.Parameters.AddWithValue("@gender",this.gender );
            command.Parameters.AddWithValue("@date_Of_Birth", this.txtDateofBirth.Text);
            command.ExecuteReader();
        }
        finally
        {   
            // Close the connection.
            if(connection.State != ConnectionState.Closed)
                connection.Close();
        }
    }
} 
```

# javascript - 带有未定义参数且参数在函数体中定义的Javascript函数，是全局变量吗？

> ID：12473223
> 
> 赞同：0
> 
> 时间：2012-09-18T08:36:29.590
> 
> 标签：javascript

假设我们有一个 javascript 函数，我们想检查第二个参数是否*未定义*，在这种情况下，我们想为它分配一个值，例如

```
function myFunc(a,b){ 
   if(typeof b==="undefined" ){
      b=0;
   }
   //do stuff
} 
```

*if*块中的变量*b*是否仍然引用函数的参数或创建了一个名为*b*的全局变量？

 **干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T08:38:28.320

是的，分别在（ES5）（ES3）`b`中得到解决。即使通过访问纯名称也存在全局变量，它也将始终在本地解析。`lexicalEnvironment``Activation Object``b`

您需要`window.b`分别显式调用`global.b`（节点）以访问具有相同名称的全局变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T08:38:37.140

它指的是函数的参数。你可以像这样测试自己：

```
var b = 45;
function myFunc(a,b){ 
   if(typeof b==="undefined" ){
      b=0;
   }
   alert( b ); //It will output 0
   //do stuff
}

myFunc(''); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T08:48:22.320

@Andre 和 @Nelson 的答案都是正确的，但只是为了清楚起见：

```
var c = 123;
var func = (function(a)//a === 1234
{
    var b = c;//local b === global c
    return function(a,c)
    {
        console.log(c === b);//false, unless second argument was 123
        console.log(a === 1234);//false, unless first arg was 1234
        console.log('a masks the a of the outer scope');
    };
})(1234); 
```

JS 将首先扫描被调用函数的范围，对于任何使用的 var，如果它没有在那里找到它们，它会移动到外部范围。这可以是另一个函数，或者最终是全局范围。在此示例中，内部（返回）函数将无法访问`a`外部函数中定义的值。当外部函数返回时，它被 GC 处理，因为它没有在任何地方被引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T08:41:21.663

代码：

```
function myFunc(a,b){
   if(typeof b==="undefined" ){
      b=0;
   }
    console.log('b from myFunc:'+b)
}
myFunc(5);
console.log('global:'+b) 
```

输出：

```
b from myFunc:0

b is not defined 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-18T08:43:30.717

Javascript 首先在局部范围内查找局部变量或命名函数参数。如果它在那里找到符号，则该变量就是使用的变量。

仅当未找到匹配的局部符号时才使用全局符号。

因此，在您的示例中，您将设置`b`函数参数的值。

一旦在局部变量或命名函数参数中定义了局部符号，就不能再单独使用该名称来访问同名的全局变量。如果您特别想处理全局变量，可以通过在其前面加上`window.`as in 来实现`window.b`。这专门针对全局范围，因此不使用本地范围。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-18T08:44:10.180

变量保留在函数上，如果；

1.  `var`使用或不使用它在函数内部声明变量
2.  变量被声明`this`为它的父节点函数，下面的例子

    `function foo(){ this.bar = 'hello'; }`

变量在全局范围内可用时

1.  `var`变量在使用或不使用它的任何函数之外声明

2.  该变量被声明为它的父节点是`window`下面的例子

`window.bar ='i am global'`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-18T08:47:07.547

您需要在全球范围内定义变量：

在下面的代码中 t2 是未定义的。

```
 <script>

var t1="";
var t2;
function check(t1,t2){
if (t1===undefined)
{
alert("t1 is undefined");
}
if (t2===undefined)
{
alert("t2 is undefined");
}
}
</script> 
```

参考： [http ://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_undefined](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_undefined)**

# c# - 除非 DGV 可见，否则着色单元不起作用

> ID：12473230
> 
> 赞同：0
> 
> 时间：2012-09-18T08:36:41.587
> 
> 标签：c#, datagridview

我有一个 TabControl，它在单独的选项卡上包含 2 个 DataGridView。这两个都是根据第三个 DGV 上选定行的值填充的，该 DGV 位于 TabControl 之外。

我正在尝试将其中一个 DGV 的左侧列着色为蓝色，如果包含该 DGV 的页面当前可见，则该列工作正常。如果当前不可见，则颜色不会更改。我用来更改单元格颜色的代码是

```
foreach (DataGridViewRow row in this.dgvInformation.Rows)
{
    DataGridViewCellStyle blueStyle = new DataGridViewCellStyle();
    blueStyle.Font = new Font("Microsoft Sans Serif", 8.25F, FontStyle.Regular);
    blueStyle.BackColor = Color.LightBlue;
    row.Cells["InfoType"].Style = blueStyle;
} 
```

我已经逐步完成了代码，无论 DGV 是否可见，它都采用相同的路径，但单元格颜色仅在可见时才会更改。

如果当前未显示 DGV，是否有理由无法更改其单元格颜色？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:29:20.900

[抱歉在这里回答我自己的问题 - 功劳属于 Shane CI，只是不喜欢留下未回答的问题！]

修复方法是将单元格着色代码添加到 DataGridView 的 VisibleChanged 事件中，如果允许排序，还添加到 Sorted 事件中

# objective-c - 手势和响应者链

> ID：12473235
> 
> 赞同：6
> 
> 时间：2012-09-18T08:36:56.807
> 
> 标签：objective-c, ios, xcode

我正在开发一个 ipad 应用程序。我有一个外部滚动视图和内部滚动视图。在内部滚动视图中，我使用网格视图来呈现我的项目。我为此使用了一个名为 GMGridView 的库。

并在网格视图中使用手势。（例如：平移手势）。网格视图作为子视图添加到外部滚动视图。因此，如果我对响应者链的理解是正确的，那么首先应该是超级视图响应，然后是子视图。但是现在发生的事情是当我触摸gridview时，控件立即转到gridview。

知道为什么会这样吗？基本上我想要做的是在控件进入内部滚动视图之前要滚动的外部滚动视图，内部滚动视图是一个垂直滚动视图。

如果有人可以帮助我解决这个问题，那就太好了。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:44:47.747

手势识别器不参与响应者链，请参见此处：http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)

# android - 在禁用的编辑文本中水平滚动

> ID：12473243
> 
> 赞同：0
> 
> 时间：2012-09-18T08:37:19.310
> 
> 标签：android, android-layout, android-edittext

在代码中启用或禁用编辑文本（如果按下或未按下“编辑”按钮）。

问题是：如果 edittext 包含一个大文本并且他的状态是禁用的，我不能水平滚动查看所有文本。（如果他的状态是启用的，我可以正常水平滚动）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:13:19.223

如果你把你的包装`EditText`在 `HorizontalScrollView`用户中，即使 EditText 被禁用，用户也可以水平滚动它：

```
<HorizontalScrollview
   android:layout_width="wrap_content"
   android:layout_height="wrap_content">

   <EditText
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"/>

</HorizontalScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T07:04:44.997

您可以在编辑文本中使用以下参数。

```
edittext.setFocusable(false);
edittext.setClickable(false);
edittext.setFocusableInTouchMode(false);
edittext.setEnabled(true);
edittext.setKeyListener(null);
edittext.setHorizontallyScrolling(true); 
```

所以它将作为所需的行为工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-13T06:07:15.263

这是我在 XML 中的 Edittext

```
 <EditText
                            android:id="@+id/et_myEdtitText"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:maxLines="1"

                            /> 
```

并在 JAVA 中添加这个，

```
 et_myEdtitText.setKeyListener(null); 
```

现在我将无法在 Edittext 中添加任何文本。因为，我已禁用 KeyListener，但我将能够水平滚动您的 Edittext

# javascript - 传递一个返回 ko.computed 值的函数

> ID：12473249
> 
> 赞同：4
> 
> 时间：2012-09-18T08:37:31.430
> 
> 标签：javascript, knockout.js

我有两个功能`generate`和`test`. 当用户单击一个按钮时，该按钮`generate`被调用，然后调用`test`函数。我收到以下错误：

> 传递一个返回 ko.computed 值的函数。

在测试函数的这一行中抛出错误。：

```
var unmapped = ko.mapping.toJS(this); 
```

`this`是我的具有 ko.observable 属性的视图模型。

这是两个函数。如果我将`test`函数的内容移动到`generate`一切正常，但我需要将逻辑放在两个不同的函数中。我能做些什么？

我很困在这里。任何帮助将不胜感激。

```
generate = function () {
            if (!omega.validatableFranchiseGeneration.validate()) {
                return false;
            }
            omega.franchiseInfo.IsForGeneration(true);

            test();
        }

 var test = function () {
        getIpsAndPorts();

        for (var i = 0; i < omega.franchiseInfo.LanguagesInfoViewModel().length; i++) {
            if ($.isArray(omega.franchiseInfo.LanguagesInfoViewModel()[i].SubMenuItemsViewModel)) {
                omega.franchiseInfo.LanguagesInfoViewModel()[i].SubMenuItemsViewModel = omega.franchiseInfo.LanguagesInfoViewModel()[i].SubMenuItemsViewModel[0];
            }
        }

        var unmapped = ko.mapping.toJS(this);

        var jsonData = ko.toJSON(unmapped);
        $.ajax({
            url: "/franchise/Save",
            type: "POST",
            // data: ko.toJSON({ folderName: FolderName }),
            data: { franchiseInfoViewModel: jsonData },
            //traditional: true,
            //contentType: "application/json; charset=utf-8",
            dataType: 'json',
            success: function (data, textStatus, xhr) {
                window.location.href = data.redirectToUrl;
            },
            error: function (request, status, error) {
                jsonValue = jQuery.parseJSON(request.responseText);
                omega.franchiseInfo.errorMessages([]);
                for (var i = 0; i < jsonValue.errorMessages.length; i++) {
                    omega.franchiseInfo.errorMessages.push({ errorMessage: ko.observable(jsonValue.errorMessages[i].ErrorMessage) });
                }
                for (var i = 0; i < omega.franchiseInfo.LanguagesInfoViewModel().length; i++) {
                    InitializeViewLanguagesInfo(omega.franchiseInfo.LanguagesInfoViewModel()[i]);
                }
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:42:34.227

如果没有看到你所有的代码，这很难确定，但如果代码（原样）直接包含在生成中时有效，那么我敢打赌，这`this`不是你认为它在`test`函数中的样子。 函数`this`内部的含义与内部的含义不同。`test``generate`

启动 Chrome 或 Firebug 并在该`var unmapped = ko.mapping.toJS(this);`行设置断点。运行您的程序，当断点命中时转到控制台并查看`this`. 是你的 ViewModel 吗？

如果`this`是你所期望的，`generate`你总是可以这样调用`test`：

```
test.apply(this); 
```

这将显式设置`this`方法调用的上下文。

另一种选择是`self`在 ViewModel 中设置一个变量。这通常在顶部完成，看起来像：`var self = this;`. 通过创建此变量，您可以参考`self' inside any functions within the outer "function" scope, and not have to worry about the value of`this` 波动。

--

这是一个简单的小提琴来模拟我认为正在发生的事情：http: [//jsfiddle.net/jearles/aLFWe/](http://jsfiddle.net/jearles/aLFWe/)

打开 Chrome 或 Firebug 控制台并查看记录的对象。请注意，这`Window`是我刚刚调用时记录的对象`updatea()`，但`Object`在原始点击函数中以及当我调用`updateb.apply(this)`or `updatec()`（引用`self`）时。

# php - AJAX NS_ERROR_XPC_BAD_CONVERT_JS：无法转换 JavaScript 参数 jquery.js:7065

> ID：12473251
> 
> 赞同：5
> 
> 时间：2012-09-18T08:37:35.393
> 
> 标签：php, jquery

我是 jQuery 和 Ajax 的新手，我遇到了问题。我在控制台上收到以下错误：

```
NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument @ http://localhost
/jquery.js:7065 
```

为什么我会收到此错误？

这是我正在使用的代码：

```
function upload_file(){
    var file = document.form1.file_upload;
    var date = document.form1.date_added;
    var author = document.form1.author;
    var user = document.form1.user;
    var semester = document.form1.semester;
    var class1 = document.form1.class;
    var subject = document.form1.subject;
    $.ajax({
        type:"get",
        url:"upload_file.php",
        data:{
        "file":file,
        "date":date,
        "author":author,
        "user":user,
        "semester":semester,
        "class":class1,
        "subject":subject
        },
        success:function(result){
        $("#result").html(result);
        }
    });
    } 
```

我在等你的回复。

> PS：我搜索了论坛，但没有得到我想要的，所以如果我错过了什么，请提前道歉。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T17:16:16.707

我认为问题在于您正在尝试将完整的对象传递给 JSON。您应该使用值而不是对象。例如，替换：

```
var subject = document.form1.subject; 
```

和：

```
var subject = document.form1.subject.value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:44:00.213

用这个，我猜括号不匹配——

```
 $.ajax(
                 {
        type:"get",
        url:"upload_file.php",
        data:{
        "file":file,
        "date":date,
        "author":author,
        "user":user,
        "semester":semester,
        "class":class1,
        "subject":subject
        },
        success:function(result)
               {
        $("#result").html(result);
        }
    ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:12:58.773

我们有同样的错误。

升级到最新版本的 JQuery 并解决了问题。

[这似乎也适用于一些](http://siderite.blogspot.com/2009/07/jquery-firexof-error-could-not-convert.html)[在这里](https://stackoverflow.com/questions/1326896/could-not-convert-javascript-argument-arg-0-nsresult-0x80570009-ns-error-xpc)看到该解决方案的人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T08:37:38.337

我遇到了同样的错误，但我的问题是不同的。

事实证明，我在 ajax 调用中传递了一个根本不存在于我的 DOM 中的参数。

在@ZackValentine-s 的情况下（或对于将来阅读此内容的人），请在实际调用本身**之前检查您将要传递给 ajax 调用的所有数据项的值。**

# ios - 在 iphone5 兼容的应用程序中使用 UIScrollview

> ID：12473252
> 
> 赞同：0
> 
> 时间：2012-09-18T08:37:36.143
> 
> 标签：ios, layout, uiscrollview, keyboard, ios6

我在调整我的应用程序以适应新的 iphone5 布局时遇到问题，我通过了以下方法：

1.  添加了视网膜 4" 初始图像
2.  使用“尺寸检查器”修改了我的故事板中的界面以更改小部件的锚定
3.  使用 iOS6“retina 4”模拟器测试了该应用程序。

该应用程序按预期工作，除非当用户弹出键盘编辑文本时，我对这种特殊情况使用“拉伸滚动视图”方法，这似乎与我的小部件的“自动调整大小”属性不兼容，这是一个示例，来自 iOS6 模拟器，不带和带键盘：

![与未锚定以填充 iphone5 屏幕的中间项的接口](../Images/ebbef3f7a0b55363896e12bb2319c041.png)

这就是发生的事情：

![显示键盘后发生的混乱](../Images/0486d85997c98797b53268dfa2e3ce5f.png)

我很确定这是一个连贯的行为，因为我的主视图被拉伸了，所以它里面的其他项目在它们锚定后被拉伸，事实是我希望我以前的固定位置具有相同的行为（所有小部件都锚定到左上角）与 iphone5 gui 扩展，这可能吗？

您如何解决以 iphone 5 兼容方式显示键盘和滚动隐藏内容的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:07:52.150

我一直有类似的问题。从我目前发现的情况来看，我们可能需要删除可滚动视图中视图上的所有约束，因为它的内容似乎随着滚动视图的框架一起调整大小。我知道在 viewWillAppear 中手动设置内部视图的框架会起作用，但是你会被困在 iPhone4 和 iPhone5 大小相同的视图中（尽管它会滚动）。或者您可以在情节提要中“固定高度和固定宽度”的内部视图。

两种可能可行的方法。抱歉，我无法确认这些，因为我正在放弃并围绕这个问题重新设计。
1\. 以编程方式向您的内部视图的子视图添加约束。编程约束将允许您按比例“弹出”元素之间的距离。以编程方式添加约束时，您可以访问一个称为“乘数”的因子（不要与优先级混淆），我在 stackoverflow 上看到其他人发布过这个因子。
2\. 您可以将 Interface Builder 中的 internalView 设计为带有 .xib 文件的单独 viewController，然后使用 storyboard 将其作为嵌入式 viewController 加载到“containerView”对象，您将把它作为新的“内部视图” "的滚动视图。也许然后 .xib 会首先调整到正确的 iOS 设备，然后你可以使用它的框架来调整 containerView 的大小。

我的建议是在实施之前创建一个小型测试用例，否则你最终会像我一样，在错误的道路上花费数小时并面临死胡同。

更新 12/4/12 通过不将 ScrollView 设置为 ViewController 的主视图，让您的生活更轻松。--相反，使 ViewController.view 成为一个虚拟/空白视图，并在该视图中嵌入一个滚动视图。然后，在 ScrollView 中嵌入另一个视图（我的 CustomView）。CustomView 包含所有可见的控件和文本框和按钮。CustomView 上没有高度限制。

# asp.net - 找不到 ID 为“Safari1Plus”的浏览器或网关元素

> ID：12473259
> 
> 赞同：6
> 
> 时间：2012-09-18T08:38:05.533
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2010, iis, user-controls

我的机器上有一个奇怪的错误，我的应用程序的 app_browser 中有一个 .browser 文件，它有以下几行：

```
browsers>
<!-- Disable the Menu Adapter for the Safari/Chrome browser-->
<browser refID="Safari1Plus">
    <controlAdapters>
        <adapter controlType="System.Web.UI.WebControls.Menu"
                         adapterType="" />
    </controlAdapters>
</browser> 
```

当我尝试加载应用程序时，我得到了主题中的错误，但我的同事（我们都使用相同的代码库）都没有得到它。

我本能地认为该错误与 IIS 有关，我花了一整天的时间试图解决这个问题，但没有成功。

为了同时进行这项工作，我已将 safari1plus 替换为默认值，但潜在的问题是我的一个页面上有一个 gridview，它在我的本地机器上不显示任何内容，它在其他开发机器上工作。我不确定这是为什么或原因，但看起来这是一个基于配置的问题，也许一两个人不得不处理这个问题。

欢迎任何有想法的人。

显然操作系统是 Win 7 64 位，带有 VS2010 Professional 和 IIS7。

我还检查了 Windows\Microsoft.NET\Framework\v2.0.50727\CONFIG\Browsers 和 Windows\Microsoft.NET\Framework\v4.0.30319\Config\Browsers 以及 Framework64 目录的内容，看起来都一样（与其他开发机器相比）

非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-10T16:14:26.777

您应该`refId`在位于`<windir>\Microsoft.NET\Framework[64]\<ver>\CONFIG\Browsers`.

对于 .NET 4.0，`refId`is`WebKit`和 not `Safari1Plus`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T10:08:52.260

因为我怀疑这是一个 IIS 问题，我不小心通过检查所有 Web 应用程序的所有设置来解决它。我的应用程序有 7 个应用程序共享相同的数据层。

我解决它以确保所有应用程序都使用 ASP.Net v2.0 集成池作为应用程序池的方式，显然这没有任何意义，但这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-26T21:22:39.423

在 mi PC C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Config\Browsers\safari.browser 中，safari 的行是

```
<browser id="Safari3Plus" parentID="Safari"> 
```

然后我只需更改`<browser refID="safar1plus">`为`<browser refID="safari3plus">`Web 项目 App_Browsers 中的 BrowserFile.browser 即可！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-06T16:08:31.590

嗯，这是由于浏览器定义继承自 .NET 框架 v2 上存在的定义，而 v4 上不再存在。

删除 \App_Browsers 文件夹中的浏览器定义文件。

或者

确保所有应用程序都使用 ASP.Net v2.0 集成池作为应用程序池。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-02T10:12:58.697

尝试在 Windows 10 机器上运行我的 sharpoint 2010 Foundation 应用程序时遇到了同样的问题。

我通过以下方式解决：

1.  在 IIS > 应用程序池 > 选择所需的应用程序池 > 右键单击​​ > 基本设置 > 将“.Net CLR 版本”更改为“v2.0.50727”并保存。
2.  转到站点>选择站点>双击“身份验证”>启用基本身份验证。

这同样适用于任何期望版本 2.0 作为目标版本的 asp.net 应用程序。

# vba - 进度条没有出现在我的表单中

> ID：12473267
> 
> 赞同：0
> 
> 时间：2012-09-18T08:38:22.523
> 
> 标签：vba, ms-access, ms-access-2003

我想在删除并插入表格时向用户显示进度条。我使用了这段代码，但在表单中看不到进度条。你能帮我解决这个问题吗？

```
SysCmd acSysCmdInitMeter, "Updating: ", 1000
For Counter = 1 To 1000
    SysCmd acSysCmdUpdateMeter, Counter

    On Error GoTo PROC_ERR
  Set db = CurrentDb
   ssql = "DELETE FROM Test_Table"
   db.Execute ssql, dbFailOnError

  ssql = "INSERT INTO Test_Table SELECT DISTINCT tb_KonzeptDaten.DFCC,  " _
  & "tb_KonzeptDaten.OBD_Code AS Konzept_Obd,tb_KonzeptDaten.DFC " _
  & "FROM tb_KonzeptDaten"
  db.Execute ssql, dbFailOnError
  Msgbox "Die Tabelle wurde erfolgreich aktualisiert"
ExitSub:
'Clean  Up Code
Exit Sub
PROC_ERR:
Msgbox Err.Description
GoTo ExitSub:

Next Counter
SysCmd acSysCmdRemoveMeter 
```

谢谢你

**编辑：** 我认为，我应该让我的问题更简单。我想在状态栏中显示进度条，因此我编写了这段代码进行测试：

```
Private Sub Befehl80_Click()
 Dim Progress_Amount As Integer, RetVal As Variant
  RetVal = SysCmd(acSysCmdInitMeter, "Reading Data...", 2000)
  For Progress_Amount = 1 To 2000
  RetVal = SysCmd(acSysCmdUpdateMeter, Progress_Amount)
  Next Progress_Amount 
End Sub 
```

我有这个期望，如果我点击这个按钮，我可以看到状态栏，但不幸的是当我点击这个按钮时我看不到它，但是如果我关闭这个访问项目，那么这个状态栏就会出现。你有什么想法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-22T18:25:22.340

这是屏幕刷新问题。在代码完成运行之前，您的屏幕不会被刷新。为了解决这个问题，您需要使用 DoEvents 命令来允许屏幕在仍在运行代码时*刷新*。

```
SysCmd acSysCmdInitMeter, "Updating: ", 1000
For Counter = 1 To 1000
    SysCmd acSysCmdUpdateMeter, Counter

    ' Put your DoEvents here, so the screen has time to refresh
    DoEvents

    On Error GoTo PROC_ERR
  Set db = CurrentDb
   ssql = "DELETE FROM Test_Table"
   db.Execute ssql, dbFailOnError

  ssql = "INSERT INTO Test_Table SELECT DISTINCT tb_KonzeptDaten.DFCC,  " _
  & "tb_KonzeptDaten.OBD_Code AS Konzept_Obd,tb_KonzeptDaten.DFC " _
  & "FROM tb_KonzeptDaten"
  db.Execute ssql, dbFailOnError
  Msgbox "Die Tabelle wurde erfolgreich aktualisiert"
ExitSub:
'Clean  Up Code
Exit Sub
PROC_ERR:
Msgbox Err.Description
GoTo ExitSub:

Next Counter
SysCmd acSysCmdRemoveMeter 
```

# osgi - 我如何使用在 osgi 包中不能作为包使用的 jar？

> ID：12473271
> 
> 赞同：1
> 
> 时间：2012-09-18T08:38:31.703
> 
> 标签：osgi

我正在将我的 spring-java 项目移动到 osgi。

我有一些依赖项在 spring ebr repo 或 maven repo 中不能作为捆绑包提供。处理它们的最佳方法是什么？

我能想到的选项是

1.  创建一个本地 maven 存储库，将 jar 转换为捆绑包并使用它们（这对于 jar 的传递依赖和更新将变得困难）
2.  将它们添加到包类路径中（我的包变得很大，并且升级管理这些 jar 并不容易）
3.  将所有此类 jar 保存在另一个包的类路径中，导出包并使用它们（再次管理 jar 很困难）

任何其他建议或以上哪个是可取的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T15:21:06.660

最明智的方式是您的第一个选择，因为那是“OSGi 方式”。通过这种方式，您可以更好地模块化您的应用程序并在不同的客户端包中共享相同的包。您还可以从 OSGi 中固有的版本管理中受益。

您不一定必须使用 Maven 从 JAR 创建包，尽管这可能会有所帮助。您还可以使用 bnd 将 JAR 包装为 OSGi 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:43:27.140

如果您使用 apache karaf，则可以选择即时捆绑来自 maven repo 的任何 jar。您只需使用 uri install -s wrap:mvn:groupId/artifactId/version。这将使用 bnd 将 jar 与默认设置捆绑并安装它。例如，这适用于 oracle jdbc 驱动程序。

# c - 在 C 中另存为二进制文件，但不显示零和一

> ID：12473272
> 
> 赞同：1
> 
> 时间：2012-09-18T08:38:34.483
> 
> 标签：c, file, struct, binary, fopen

据我所知，通过使用 wb 模式在 C 中保存文件，我不应该在保存的文件中看到二进制数（零和一）。

当我以 wb 模式保存时，文件中的输出为：

> Feras Wilson — n FFFF îè` c P xHF F û¥2012

但这不是二进制零和一。如何保存文件以包含零和一，然后能够在 C 中读取它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T08:41:43.210

它保存为 0 和 1，但您的文本编辑器将它们读取为字节（它将它们分组为 8 位）并使用 ASCII 显示它们。[1]

当您写入文本文件时，需要付出很多努力来解释您希望写入的二进制数据，以便将其放入人类可读的格式中。

例如，如果您写数字`255`，则必须将其带到表格`'2'`, `'5'`, `'5'`（它们是字符！），然后写下每个字符。

如果它写入二进制文件，它只会将实际的二进制数据放入文件中。这取决于它是什么类型的变量（取决于它在多少个八位字节上表示它）以及字节顺序和其他东西。如果它是无符号字符，它将放入二进制文件`0b11111111`（这是实际的原始数字，而不是字符！）。

[1] [http://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T08:41:46.140

这只是您的编辑器或命令对文件的文本表示。在内部，所有文件都以 0 和 1 存储在 HDD/SDD/RAM/... - 尝试使用十六进制编辑器打开文件`bless`（在 linux 上易于使用，Windows 需要 Mono - 或者搜索您想要的另一个十六进制编辑器使用）查看字节是如何存储的。此外，我建议使用`bless`，因为 if 以不同的格式提供不同的表示。

在您的代码中，您可以使用 read 方法按字节存储内容并对其进行解释。如果您一次读取多个字节，请记住可能的[字节顺序修复。](http://en.wikipedia.org/wiki/Endianness)也就是说，Little Endian 和 Big Endian 系统以“相反”的顺序存储和读取字节。正在读取的单词`0x1337`可能被读取为`0x3713`. 只需熟悉这个术语并在必要时使用 Wikipedia 来了解如何处理它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-18T08:47:03.840

所有文件都以二进制形式存储！这只是一个连续程序如何查看/解释这个二进制文件的问题。根据您使用此文件的方式，它将被读取为表示字符的字节序列，或表示指令的字节序列，或表示 Unicode 等的单词等。

如果您想查看不同格式的文件，请使用[`od`](http://unixhelp.ed.ac.uk/CGI/man-cgi?od)：

> 姓名
> 
> ```
>  od - dump files in octal and other formats 
> ```

它将以十六进制、字符、八进制等形式转储您的文件（它不会做的一件事是以二进制形式显示，但您可以很容易地从八进制/十六进制输出中导出它）

# ios - 对多个数组进行排序

> ID：12473279
> 
> 赞同：0
> 
> 时间：2012-09-18T08:38:57.220
> 
> 标签：ios, sorting, nsarray

这是我的情况：

我操作了 6 个 NSMutableArrays。其中一个有`NSDate`s 个对象，其他的有`NSNumber`s 个。当我填充它们时，我`addObject:`对它们中的每一个都使用它们，因此每个数组的索引 0 包含我想要的日期数组中索引 0 处的所有日期值。

我想确保数组都根据日期数组排序（按日期排序，升序），这意味着在排序过程中，如果日期数组的第 5 行移动到第 1 行，则必须将其应用于所有其他数组也是如此。

我**以前**使用过CoreData，但我**不能**再使用它了（请不要问为什么，这是题外话；））。在 CoreData 中，我可以使用`NSSortDescriptor`，但我不知道如何使用多个`NSArray`s ...

一如既往，提示/答案/解决方案总是受到赞赏:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T08:43:18.573

这是一个常见的问题。使用以下方法。

1.  将您的六个数组封装到一个对象中——每个实例都有六个属性。
2.  `compare:`在这个对象上实现方法，使用`[NSDate compare:]`（这一步可以跳过，但这样更干净）。
3.  现在您只有一个数组 - 使用步骤 2 中的方法对其进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T08:43:59.837

我认为拥有 NSDictionary 对象的 NSArray 是更好的解决方案。

```
NSArray *allValues = [[NSArray alloc] init];
NSDictionary *dict = @{"Date" : [NSDate date], @"Key1" : @"Value1", @"Key2" : @"Value2"}; 
```

然后，您可以使用 sortDescriptor 对该数组进行排序，而不会出现任何问题。然后您还可以根据需要使用 Comparator 或 Sort Desriptor。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T08:45:15.400

将您存储在数组中的所有项目包装到一个对象中。您之前的 6 个数组中的每一个都将是一个属性。

在该对象内，您可以实现

```
 - (NSComparisonResult)compare:(YourClass *)otherObject {
     return [self.date compare:otherObject.date];
} 
```

您现在可以对数组进行排序，它们将按日期排序。

# ndepend - 如何使用 Ndepend 选择具有特定属性的属性

> ID：12473280
> 
> 赞同：0
> 
> 时间：2012-09-18T08:38:59.007
> 
> 标签：ndepend

我有这样的属性 [Audit]

```
[Audit]
public string WorkPhone
{
     get { return workPhone; }
     set { workPhone = value; }
} 
```

我需要选择所有这些属性。但是没有预定义的域 - Ndepend 的属性。并且查询`from prop in Methods where prop.HasAttribute("Audit.Audit") select prop` 返回没有匹配的方法。

那么是否存在任何选择具有属性的属性的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:14:03.397

实际上，您需要将属性`[Audit]`放在 getter 和/或 setter 上才能使用查询：

```
from prop in Methods where prop.HasAttribute("Audit.Audit") select prop 
```

# .net - 将数据推送到 .net 应用程序

> ID：12473284
> 
> 赞同：0
> 
> 时间：2012-09-18T08:39:26.917
> 
> 标签：.net, http, sockets

是否可以在不使用原始 TCP 套接字的情况下将数据直接从服务器发送到 vb.net 客户端应用程序？

创建多线程 TPC 套接字服务器比使用一些简单的带有 get 和 post 命令的 php 脚本要困难得多。我知道使用 http 客户端必须请求数据，所以如果我想快速响应新数据，我将不得不经常轮询并且我想避免这种情况。

我的要求基本上是尽快响应到达服务器的新内容，同时尽量减少数据传输。什么协议最适合这个，或者我必须使用原始 TCP 套接字？

我仍然必须创建服务器，所以我可以用任何语言来做，但我希望它尽可能简单。我正在使用亚马逊网络服务，所以我认为扩展或连接过多不会成为问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:49:13.690

1.  你会有很多客户还是只有一个？
2.  “原始” TCP 套接字在 .NET 中并不可怕（见下文）
3.  延迟是否是一个关键问题，如果是，在什么阈值？
4.  您的信息传递是否重要？

查看在[TCP 端口 C# 上侦听数据以](https://stackoverflow.com/questions/627031/listen-for-data-on-tcp-port-c-sharp)获取有关如何执行所需操作的链接。

编辑：

您还可以使用[WCF](http://www.codeproject.com/Articles/22796/WCF-Implementation-of-the-Publisher-Subscriber-Mod)（客户端向服务器注册以进行回调）、Colin 建议的[SignalR或](https://github.com/SignalR/SignalR/wiki)[NServiceBus](http://docs.particular.net/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T08:53:32.240

你试过 SignalR 吗？Scott Hanselmann 有一篇关于这个[http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)的优秀帖子。

# android - 在函数中发送linkedarray时出错

> ID：12473286
> 
> 赞同：0
> 
> 时间：2012-09-18T08:39:42.670
> 
> 标签：android

我想在 pbitmap/canvas 上进行撤消/重做，但是在 drawhandler.java 和 panel.java 之间发送linkedarray时遇到了问题。

错误：只能遍历数组或 java.lang.Iterable 的实例

LinkedArray 无法解析为类型

public void onDrawAll（LinkedArray 路径，油漆）；<-----错误在这一行

我所有的代码都可以在[这里看到](http://pastebin.com/V2LYZX7r)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:49:06.780

也许你想写`LinkedList`而不是`LinkedArray`？
我不知道标准 java api 中有这样的类 LinkedArray，或者我遗漏了一些东西，或者该类来自您使用的第三方库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:43:10.073

```
public interface OnDrawListener 
{
          public void onDrawShape(Shape shape, Paint paint); // narišeš shape dokončno

          public void onDrawShapeTemp(Shape shape, Paint paint); // narišeš shape, in ga potem ko je narisan, izbrišeš, če shape ni freehand

          public void onDrawAll(LinkedArray<Path>  paths, Paint paint); <-----there is errror 
} 
```

# java - ORACLE 的 Apache Roller Weblogger 配置

> ID：12473289
> 
> 赞同：2
> 
> 时间：2012-09-18T08:40:02.050
> 
> 标签：java, blogger

我正在使用**Apache Roller 5.0.1** Weblogger，部署在**Tomcat6.0.29**和**Oracle**数据库中，所有配置都在**roll-custom.properties**中。

我可以登录并创建博客。但是在创建博客之后，如果我尝试通过`**//localhost:8080/roller/blogname**`浏览器中的链接访问创建的博客，但我得到了一个**意外异常**：

```
Status Code: 500 
Message  
Type  
Exception:   Roller has encountered and logged an unexpected exception 
```

任何人都可以帮忙吗？

# extjs - ExtJS 4.1：如何将列宽调整为网格中的内容？

> ID：12473292
> 
> 赞同：5
> 
> 时间：2012-09-18T08:40:20.463
> 
> 标签：extjs, grid

我有一列显示 db id，我希望此列自动将其宽度调整为最长的。我找到了一个名为的配置选项，[`shrinkWrap`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-shrinkWrap)但我在屏幕上看不到任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-08T07:44:53.053

有一个私有函数`expandToFit`可用于网格标题的容器对象。

在所有记录都加载到网格中之后，在对象上尝试这样的操作`Ext.grid.column.Column`，例如：`viewReady``Ext.grid.Panel`

```
column.ownerCt.expandToFit(column); 
```

遍历列并为每个要扩展的列调用上述语句。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-18T08:44:54.917

尝试像这样使用 flex 属性：

```
{
   text:"Ids",
   dataIndex:'Ids',
   flex:1
} 
```

# php - 创建 Web 服务以发送数据库每日报告的电子邮件

> ID：12473300
> 
> 赞同：2
> 
> 时间：2012-09-18T08:40:46.573
> 
> 标签：php, database, web-services, email

我在 Android 中构建了一个更新特定数据库的应用程序。现在我的老板告诉我要构建一个**Web 服务**，该服务会生成每日条目的每日报告并将其发送到他的电子邮件 ID。它应该无需人工交互即可工作。**我只需将它上传到我们的服务器，它就会每天生成一封报告邮件**（不要点击按钮或其他东西）。

现在，我熟悉了 php，并生成了一段代码（不是 Web 服务），它每天都会生成一份每日报告。但是*它应该在没有人机交互*的情况下工作的条件是我无法想到的。出于同样的目的，我需要了解 Web 服务，我对此知之甚少。

自最近两天以来，我一直在搜索该主题，但没有发现任何帮助。任何人都可以在我的道路上指导我，我应该参考哪些材料，因为我被卡住了。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:29:59.710

好消息：

*   它不是真正的 Web 服务：请参阅
    [http://en.wikipedia.org/wiki/Web_service](http://en.wikipedia.org/wiki/Web_service)

*   这实际上是一个计划任务

*   在 php 中，发送电子邮件是单行的：http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)。所以电子邮件部分很简单。只需生成或阅读报告并使用 mail() 函数发送即可。

调度部分取决于您服务器上的环境。在 Windows 上，您可以通过计划任务来完成。安排这样的命令；记得提供正确的目录等：php -f my-mailer.php。您可能希望将命令包装到 .bat/.cmd 文件中。

您还需要确保您的 php 配置为从命令行运行。

要进行测试，首先手动运行命令以将报告发送到*您*的电子邮件，然后安排一些较短的时间间隔。然后更改为生产值。

# java - 如何让我的 Servlet 过滤器调用未经身份验证的请求？

> ID：12473302
> 
> 赞同：0
> 
> 时间：2012-09-18T08:40:55.963
> 
> 标签：java, authentication

我想编写一个 servlet 过滤器来处理 BASIC 身份验证标头，即使 Web 应用程序是使用 FORM 身份验证配置的。我看到这是可能的，因为詹金斯设法做到了。（参见：[http](http://sorcerer.jenkins-ci.org/) ://sorcerer.jenkins-ci.org/ --> jenkins.security.ApiTokenFilter）

我有一个简单的演示，其中包含一个简单的日志记录`MyAuthFilter`、一个安全的 Web 资源和以下内容`web.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">-->
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID"
    version="2.5">
    <filter>
        <filter-name>MyAuthFilter</filter-name>
        <filter-class>com.foobar.auth.MyAuthFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>MyAuthFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <servlet>
        <servlet-name>ServletAdaptor</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.ericsson</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>ServletAdaptor</servlet-name>
        <url-pattern>/secure/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <security-constraint>
        <display-name>SecurityConstraint</display-name>
        <web-resource-collection>
            <web-resource-name>all</web-resource-name>
            <description>all</description>
            <url-pattern>/*</url-pattern>
            <http-method>GET</http-method>
            <http-method>POST</http-method>
            <http-method>HEAD</http-method>
            <http-method>PUT</http-method>
            <http-method>OPTIONS</http-method>
            <http-method>TRACE</http-method>
            <http-method>DELETE</http-method>
        </web-resource-collection>
        <auth-constraint>
            <role-name>AuthenticatedUser</role-name>
        </auth-constraint>
    </security-constraint>
<!--    <login-config>
        <auth-method>BASIC</auth-method>
        <realm-name>foobar</realm-name>
    </login-config>-->
    <login-config>
       <auth-method>FORM</auth-method>
       <realm-name>ossrealm</realm-name>
       <form-login-config>
           <form-login-page>/public/login.jsp</form-login-page>
           <form-error-page>/public/error.html</form-error-page>
       </form-login-config>
   </login-config>
</web-app> 
```

我的问题是，`MyAuthFilter`当我请求受保护的资源时，它永远不会被调用，我被静默地重定向到登录页面。如果我禁用限制过滤器的安全性，则会被调用。

我想念什么？如何实现基于 FORM 和 BASIC auth 的混合？

注意：请不要评论目标本身（混合方法），这是因为我的 Web 应用程序包含一个 RESTful 服务，该服务必须可以通过脚本的 BASIC auth 访问（就像 Jenkins 一样），但是在以下情况下重定向到登录页面是必要的从网络浏览器使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:21:03.487

根据我的尝试，没有办法。只能通过使用 Spring Security 来做到这一点。

# macos - Node.js：错误：找不到模块“堆栈”

> ID：12473304
> 
> 赞同：0
> 
> 时间：2012-09-18T08:40:59.147
> 
> 标签：macos, node.js

我试图 在我的 Osx 上安装[howtonode.org](https://github.com/creationix/howtonode.org)

```
cd ~/Sites/
git clone git@github.com:creationix/howtonode.org 
```

我的上下文如下：

```
OSx version: 10.7.4
node -v v0.6.15 
```

当我尝试运行以下命令时

```
~/Sites/howtonode.org node server/server.js & 
```

我收到以下错误：

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: Cannot find module 'stack'
    at Function._resolveFilename (module.js:332:11)
    at Function._load (module.js:279:25)
    at Module.require (module.js:354:17)
    at require (module.js:370:17)
    at Object.<anonymous> (/Users/antoniopierro/Sites/howtonode.org/server/server.js:2:13)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:31)
    at Function._load (module.js:308:12)
    at Array.0 (module.js:479:10)

[1]+  Exit 1                  node server/server.js 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:43:54.813

尝试跑步`node ~/Sites/howtonode.org/server/server.js &`或去`~/Sites/howtonode.org/server/`跑步`node server`

此外，您还没有从 package.json 安装依赖项。

转到`~/Sites/howtonode.org/`并键入 inn `npm install`。这将安装所有依赖项`~/Sites/howtonode.org/node_modules`。然后，您可以运行服务器。

# javascript - 我可以告诉浏览器开始显示已经向下滚动的网页吗？

> ID：12473305
> 
> 赞同：0
> 
> 时间：2012-09-18T08:41:07.130
> 
> 标签：javascript, html, web

我有一个具有固定大小布局的网页，即使它远非“最先进的”，它在当前的实现中也很好，但对于移动设备屏幕来说有点太高了。

由于“标题”部分对任何人都无关紧要，因此每个人都希望在移动设备上查看页面时立即平移/向下滚动一点（或者，从广义上讲，在比页面固定高度短的视口上）。

我可以做一些 HTML 或 JS 魔术来告诉浏览器开始显示已经向下滚动 X 像素的页面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:45:33.357

您可以尝试链接和锚点之类的东西。

```
http://www.yourdomain.com/main.html#bottom 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:09:07.683

如果您尝试在主页上实现此功能，则不确定锚点是否有效。如果标题在移动浏览器中完全没有意义，那么您可以使用 html 来检测正在使用移动浏览器，然后从此加载隐藏标题的 CSS，或者将其加载到底部。如果这听起来像是一个可行的选择，我可以发布示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T08:48:05.533

如果你使用 jQuery，你可以试试[scrollTo](http://demos.flesler.com/jquery/scrollTo/)。但是，您需要确定目标在页面上的位置...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T08:47:03.900

Anchors 是一种解决方案，但我觉得非常好的方法是使用[http://archive.plugins.jquery.com/project/LocalScroll](http://archive.plugins.jquery.com/project/LocalScroll)。因此使用可以检测 Javascript 中的用户代理并使用此插件向下滚动到适当的位置。

干杯!

# c# - ServiceStack Social Bootstrap API 示例 - 登录

> ID：12473313
> 
> 赞同：1
> 
> 时间：2012-09-18T08:41:27.027
> 
> 标签：c#, jquery, asp.net, underscore.js, servicestack

我正在启动 ServiceStack social bootstrap api 示例，看看它是如何工作的。

我点击了“登录”链接，什么也没发生。我查看了代码（见附件图片 1）

```
<a data-cmd="signIn">sign in</a> 
```

在“登录”链接的点击事件中，我的理解是 e.srcElement 在这里会是“a”标签吗？

但是，它说 e.srcElement “未定义”（参见附件图 2）。因此，从未达到“signIn”cmd。

我没有在社交引导 api 示例中进行任何更改。我究竟做错了什么？？

*（对不起图片大小，请用浏览器放大一点看文字更清楚）*

![在此处输入图像描述](../Images/6ecef0e33515060b7bd008e9e589ff3b.png) ![在此处输入图像描述](../Images/c3e925323cb52ee078cdd2124d8841f8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:03:32.390

呸！花了很多时间四处挖掘。找出示例为什么会做所有奇怪的事情。

我发现它不适用于 IE 或 Firefox，这是我正在测试的两个浏览器。

该示例是在 Chrome 下开发和测试的，仅适用于 Chrome。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:36:16.083

虽然我在演示中不关心 IE，但我确实想支持 Firefox。我已将问题追溯到[此 javascript 错误](https://github.com/ServiceStack/SocialBootstrapApi/commit/5760296342d10d28a71bb1a7aab5721164ee5238)，例如我已更改：

```
var dataCmd = $(e.srcElement).data('cmd'); 
```

到

```
var dataCmd = $(e.srcElement || e.target).data('cmd'); 
```

此更改已重新部署到[http://bootstrapapi.apphb.com](http://bootstrapapi.apphb.com)

基本上它的工作方式是我有一个全局点击处理程序来捕捉任何点击，如果 src/target 元素有一个`cmd`定义，我将它发布到所有注册的模块：

```
$(document.body).click(function (e) {
    console.log("handleClicks", e);
    var dataCmd = $(e.srcElement || e.target).data('cmd');
    if (!dataCmd) return;

    var cmd = dataCmd.split(':'),
        evt = cmd[0],
        args = cmd.length > 1 ? cmd[1].split(',') : [];

    app.sendCmd(evt, args);
}); 
```

因此，任何对该点击感兴趣的人都可以处理它。在这种情况下，`data-cmd="signIn"`将是[register.js](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/Content/js/app/register.js#L45)模块，它只是在 Backbone 模型上设置用户首选项：

```
signIn: function(e) {
    this.model.set({ hasRegistered: true });
}, 
```

# java - 如何从 Cucumber 访问 Selenium 对象

> ID：12473315
> 
> 赞同：0
> 
> 时间：2012-09-18T08:41:33.523
> 
> 标签：java, selenium, junit, cucumber

我使用 Cucumber 和 JUnit 作为前端来驱动我的测试，使用 Selenium 作为后端来与浏览器交互。

在大多数情况下，我使用 Web 驱动程序访问 Selenium。代码看起来像：

```
WebDriver driver = WebDriverFactory.getDriver();
driver.findElement().... 
```

对于我的大多数测试来说，这是可以的，但是我也想使用 com.thoughtworks.selenium.Selenium 对象上的一些方法。我似乎找不到返回此对象的合适吸气剂。知道这应该怎么做吗？

# javascript - Jquery-Image-gallery->>最初显示4张图片

> ID：12473321
> 
> 赞同：0
> 
> 时间：2012-09-18T08:41:53.917
> 
> 标签：javascript, jquery

我正在创建 n 个图片库。

最初我需要显示 4 张图像。并单击下一个 4images/video 应显示。

我一次只能显示一张图像。

我需要帮助

这就是我尝试过的 [http://jsfiddle.net/T657N/43/](http://jsfiddle.net/T657N/43/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:50:12.130

使用**[gt](http://api.jquery.com/gt-selector/)**：选择匹配集中索引大于索引的所有元素。

例如

```
$('.thumb-layout:gt(4)').hide(); 
```

隐藏所有`$('.thumb-layout')`索引大于`4`

[**演示**](http://jsfiddle.net/T657N/44/)

```
$('p:gt('+i+'):lt('+inRow+')').show() 
```

显示`inRow`索引大于的元素`i`

* * *

按照评论修改：http: [//jsfiddle.net/T657N/50/](http://jsfiddle.net/T657N/50/)

# java - Java 编程帮助：If 语句方向的问题

> ID：12473326
> 
> 赞同：0
> 
> 时间：2012-09-18T08:42:11.907
> 
> 标签：java, loops, if-statement, while-loop

我已经编写了一个测试闰年的代码，但希望添加一个修正来指示它是否在过去。为此，我添加了一个条件，即如果输入恰好是 2012 年或更大，那么现在时证明是正确的，否则它采用过去时。就目前而言，它忽略了这个限定符，只执行第一条语句。任何帮助完成这项工作将不胜感激。

*代码如下*

```
{
    int input;

    System.out.println("Enter year:");
    Scanner keyboard = new Scanner(System.in);
    input = keyboard.nextInt();

    while (input >= 2012){

    if ((input%4==0) && input%100!= 0)
    {
        System.out.println(input + " is a leap year.");
    }
    else if (input%400==0)
    {
        System.out.println(input + " is a leap year.");
    }
    else
    {
        System.out.println(input + " is not a leap year.");
      }
}
    while (input < 2012){

    if ((input%4==0) && input%100!= 0)
    {
        System.out.println(input + " was a leap year.");
    }
    else if (input%400==0)
    {
        System.out.println(input + " was a leap year.");
    }
    else
    {
        System.out.println(input + " was not a leap year.");
    }
}

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:42:47.470

我认为你在这里错了—— 也`while (input >= 2012)`
用 ie`if`代替`while``if (input >= 2012)`
`if (input <= 2012)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:00:45.270

我认为您并不真正知道 while 循环的用途。这是一个循环，这意味着它会重复直到条件不满足。一个例子：

```
x=10
while(x!=0){ int dosomething = 1; x--} 
```

此循环重复 10 次。因此，只需将您的 while 更改为 if，代码就可以正常工作。

# jquery - 如何等到json文件加载

> ID：12473328
> 
> 赞同：0
> 
> 时间：2012-09-18T08:42:16.277
> 
> 标签：jquery

我正在使用 jquery 的 $.getJSON 方法来获取两个 json 文件。

这是我的代码的简单结构

```
$.getJSON(url1, function(data) {
 //some code
}
$.getJSON(url2, function(data) {
 //some code
}
fillList(); 
```

我希望只有在两个 json 数据都成功加载后才调用 fillList() 方法。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:06:01.053

[jQuery延迟对象](http://api.jquery.com/category/deferred-object/)可以帮助你，即使我没有测试它，但试试下面

```
var dfd = $.Deferred();

function fn1()
{
   $.getJSON(url1, function(data) {
     //some code
  }
  $.getJSON(url2, function(data) {
   //some code
  }
}

dfd.done(fn1,fillList); 
```

或者[.getJSON上有一个示例](http://api.jquery.com/jQuery.getJSON/)

```
var jqxhr = $.getJSON("example.json", function() {
  alert("success");
})
.success(function() { fillList(); }) 
```

# php - 如何显示从 fread() 获得的图像？

> ID：12473329
> 
> 赞同：-1
> 
> 时间：2012-09-18T08:42:16.373
> 
> 标签：php

> **可能重复：**
> [php：从二进制数据重新创建并显示图像](https://stackoverflow.com/questions/2070603/php-recreate-and-display-an-image-from-binary-data)

我想在我的页面中显示我从这段代码中获得的图像：

```
$contents = fread($handle, filesize($filename)); 
```

我如何显示它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:43:59.943

您必须打印出图像的内容并根据文件类型设置正确的标题。

例子：

```
<?php

$contents = fread($handle, filesize($filename));

header('Content-Type: image/jpeg');
echo $contents; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:44:26.650

如果您已经有一个输出 HTML 的文件，并且您想在该页面中显示图像，则需要使用`<img>`标签。您可以调用另一个文件来执行其他海报建议的内容以输出内容。但是`Content-Type`您将输出的内容取决于图像 MIME 类型。如果它是 PNG 文件，那么您将使用不同的标头参数：

```
<?php

$contents = fread($handle, filesize($filename));

header('Content-Type: image/png'); // or image/gif, depending on what $filename is.
echo $contents; 
```

[您的另一个选择是使用data URI](http://en.wikipedia.org/wiki/Data_URI_scheme)内联输出此图像：

这是一个例子：

```
<?php
// take note that this is for PNG files - just change it to JPG or GIF depending on whatever your image is
$filename = 'image.png';
echo 'The following image is a PNG file... <img src="data:image/png;base64,'.base64_encode(file_get_contents($filename)).'" />';
?> 
```

# javascript - 相对于另一个 div 固定

> ID：12473334
> 
> 赞同：2
> 
> 时间：2012-09-18T08:42:45.523
> 
> 标签：javascript, jquery, html, css

我有一个右侧带有文本的 div 和右侧带有菜单的 div。两者都用一个 div 包裹起来以使其居中。当用户滚动文本时，我可以让 div 跟随屏幕吗？我的意思是 div 右侧保持“固定”在同一个位置，但用户可以移动和滚动文本。（这不是经典的固定位置。我不确定我是否应该将其称为固定相对于另一个div？）

HTML：

```
<div id="wrapper">

<div id="text">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque convallis adipiscing dolor, eget rutrum lectus malesuada id. Phasellus vulputate, lorem et convallis vulputate, enim nulla scelerisque nunc, vel auctor orci tellus eget diam. Praesent scelerisque, mauris a molestie lobortis, lectus nisi dignissim massa, eget tempor ante sem in nisi. Proin fermentum euismod ullamcorper. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Proin nec orci arcu. Nullam molestie consequat porttitor. Pellentesque sit amet nisl odio. Ut vel mi a eros commodo vehicula sagittis ut mi. Donec eu ante velit, vel ullamcorper arcu. Etiam eros sapien, lobortis a porttitor quis, congue vel velit. Nam et dui auctor augue interdum interdum.<br /><br />

</div>

<div id="right"></div>

</div><!-- final de contingut --> 
```

CSS：

```
body {background-color: #f2f2f2;font-size: 13px;margin: 0;padding: 0;}

#wrapper {margin:0 auto;width:700px;height:900px;background-color:#fff;}

#right {
    float:right;
    width:200px;
    height:500px;
    right:0px;
    border:solid thin #f00;
}

#text {
    float:left;
    width:400px;
    padding:40px;
} 
```

我在这里有一个例子：http: [//jsfiddle.net/u7xRX/1/](http://jsfiddle.net/u7xRX/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:16:48.727

据我了解，您可以为此使用**javascript 。**像这样写：

```
$(document).scroll(
    function(){
        var scrollOffset = $(window).scrollTop();
        if(scrollOffset >= 100){
            $('#right').css({position: 'fixed',top:'0', left:'650px'});
        }
        else{
            $('#right').css({position: 'absolute',top:'100px', left:'650px'});
        }
    }
); 
```

检查这个[http://jsfiddle.net/ZVrMF/1/](http://jsfiddle.net/ZVrMF/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:50:09.850

很长一段时间后，我可以找到仅使用 css 的解决方案。我认为如果你没有给出正确的位置，它会从父 div 获取它，在这种情况下是包装器。在另一边，我添加了一个边距以将其定位在右侧

[http://jsfiddle.net/u7xRX/3/](http://jsfiddle.net/u7xRX/3/)

```
body {background-color: #f2f2f2;font-size: 13px;margin: 0;padding: 0;}

#wrapper {position: relative; margin:0 auto;width:700px;height:900px;background-color:#fff;}

#right {
    position: fixed;
    top: 40px;
    /* right:0px; important not give right position */
    width:200px;
    height:200px;
    margin:0 0 0 500px; /* important to position it on the right */
    background-color: red;
}

#text {
    position: absolute;
    left: 0px;
    width:400px;
    padding:40px;
} 
```

# magento - 如何在 Magento 的列中添加日期选择器？

> ID：12473335
> 
> 赞同：1
> 
> 时间：2012-09-18T08:42:44.863
> 
> 标签：magento

我有以下代码，它在我的 Grid.php 中为迭代日期创建列。现在它从空的 DB 字段中获取数据，因为我想在列中使用日期选择器，它将选择的日期保存在 DB 中，然后将其显示给管理员。我知道可以这样做，`$fieldset`但我需要使用`addColumn`

```
$this->addColumn('expiration_date', array(
            'header' => Mage::helper('AdvancedStock')->__('Expiration Date'),
            'index' => $this['expiration_date'],
            'type' => 'datetime',
    )); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:24:44.890

我不确定你从哪里得到这个：**$this['expiration_date']**

但这应该可行，请尝试手动设置文件管理器和可排序。

```
array(
    'index'     => 'fieldname',
    'filter'    => true,
    'sortable'  => true,
    'type'      => 'datetime',
) 
```

如果它是您添加的非标准字段，您还需要通过修改 _prepareCollection() 方法确保您已将您的字段名包含在集合查询中。

根据您使用的集合模型，这将略有不同

```
$collection->addFieldToSelect('fieldname'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:12:52.880

而不是 type => 'datetime' 尝试 type='date' 。希望能帮助到你。你必须添加

```
 <reference name="head">
        <action method="addItem">
            <type>js_css</type>
            <name>calendar/calendar-win2k-1.css</name>
            <params/><!--<if/><condition>can_load_calendar_js</condition>-->
        </action>
        <action method="addItem">
            <type>js</type>
            <name>calendar/calendar.js</name><!--<params/><if/><condition>can_load_calendar_js</condition>-->
        </action>
        <action method="addItem">
            <type>js</type>
            <name>calendar/calendar-setup.js</name><!--<params/><if/><condition>can_load_calendar_js</condition>-->
        </action>
    </reference> 
```

在 design/adminhtml/ .../layout 中，在您的 xml 文件中对应于您修改的模块。

# c# - 如何在图像地图上设置热点区域的颜色

> ID：12473341
> 
> 赞同：0
> 
> 时间：2012-09-18T08:42:54.213
> 
> 标签：c#, javascript, jquery, asp.net, imagemap

我已经动态创建了一个热点区域，我想改变这个热点区域的颜色，我该如何实现？我还想显示热点区域的边界。

这是我在 C# 中动态地在图像地图上创建热点的代码

```
protected void txtall_TextChanged(object sender, EventArgs e)
{
    string[] arr = txtall.Text.Split(',');
//create hotspot once there are 10 cordinates
    if (arr.Length == 10)
    {
        PolygonHotSpot Polygon1 = new PolygonHotSpot();
        Polygon1.Coordinates = arr[0].ToString() + "," + arr[1].ToString() + "," + arr[2].ToString() + "," + arr[3].ToString()
            + "," + arr[4].ToString() + "," + arr[5].ToString() + "," + arr[6].ToString() + "," + arr[7].ToString() + "," + arr[8].ToString() + "," + arr[9].ToString();// "128,185,335,157,400,224,400,400,228,400";

        Polygon1.NavigateUrl="http://www.google.com";
        Polygon1.AlternateText = "Southern Region";

        ImageMap1.HotSpots.Add(Polygon1);
    }
} 
```

我试图从[这里](http://www.outsharked.com/imagemapster/)使用 jquery，但我无法成功。我对 jquery 完全陌生，我只是复制粘贴了 jquery 函数并添加了参考，但它对我不起作用。我不喜欢 js 代码，因为它只是从上面的链接复制粘贴。任何人都可以提供简单的样式或任何 java/jquery 函数，所以我可以看到对热点区域的影响？

请帮助。谢谢。

**更新：** *JAVASCRIPT*

```
<script type="text/javascript" src="JS/JScript.js"></script>
    //
    <script type="text/javascript" src="JS/jquery.imagemapster.js"></script>
    <script type="text/javascript">
        function point_it(event) {
            pos_x = event.offsetX ? (event.offsetX) : event.pageX - document.getElementById("pointer_div").offsetLeft;
            pos_y = event.offsetY ? (event.offsetY) : event.pageY - document.getElementById("pointer_div").offsetTop;
            document.getElementById("ImageMap1").style.left = (pos_x - 1);
            document.getElementById("ImageMap1").style.top = (pos_y - 15);

            document.getElementById("txt1").value = pos_x;
            document.getElementById("txt2").value = pos_y;
            if (document.getElementById("txtall").value == "") {
                document.getElementById("txtall").value = pos_x + "," + pos_y;
            }
            else {
                document.getElementById("txtall").value = document.getElementById("txtall").value + "," + pos_x + "," + pos_y;
            }
            var str = document.getElementById("txtall").value;
            var stringArray = new Array();
            stringArray = str.split(",");
            for (i = 0; i < stringArray.length; i++) {
                stringArray[i];
            }
            if (i == 10) {
            //Creates Hotspot Dynamically
                __doPostBack('txtall ', '');

                //Effects to be applied for the hotspot created
                  var image = $('#ImageMap1');

    image.mapster(
    {
        fillOpacity: 0.4,
        fillColor: "d42e16",
        stroke: true,
        strokeColor: "3320FF",
        strokeOpacity: 0.8,
        strokeWidth: 4,
        singleSelect: true,
        mapKey: 'name',
        listKey: 'name',

        areas: [
            {
                fillColor: "ffffff"
            },

            ]
    });​
            }
            //Clears hotspot
            if (i >= 10) {
                __doPostBack('txtall ', '');
                str = "";
                i = 0;
                stringArray = [];
            }
        }
    </script> 
```

*ASPX*

```
<form name="pointform" runat="server">
    <div id="pointer_div" onclick="point_it(event)" style="width: 500px; height: 333px;">
        <asp:ImageMap ID="ImageMap1" runat="server" ImageUrl="~/Images/WMap.JPG" Style="width: 500px;
            height: 333px;">
        </asp:ImageMap>
    </div>
    <br />
    <asp:TextBox ID="txt1" runat="server"></asp:TextBox>
    <asp:TextBox ID="txt2" runat="server"></asp:TextBox>
    <br />
    <asp:TextBox ID="txtall" runat="server" OnTextChanged="txtall_TextChanged" AutoPostBack="true"></asp:TextBox>
    </form> 
```

如果我把 jquery`image.mapster`比我得到的异常`point_it(event)`是未定义的.. 如果我删除 jqery，代码工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:15:43.903

为此使用任何 JQuery 插件。

一个在[这里找到](http://www.jquery4u.com/image-scripts/highlight-image-map-area-hotspots-jquery/#.UFg7W7Lib8o)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:48:27.500

我拿走了你的代码并编辑了它。它现在**对 txtall 进行回发，有 10 个坐标**。*之后*有一个**postBack**然后*你会看到你的彩色区域！*

**脚本代码**

```
<script src="js/jquery-1.7.1.js" type="text/javascript"></script>
<script type="text/javascript" src="js/imageMapster/jquery.imagemapster.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        var image = $('#ImageMap1');
        image.mapster({
            fillOpacity: 0.4,
            fillColor: "d42e16",
            stroke: true,
            strokeColor: "3320FF",
            strokeOpacity: 0.8,
            strokeWidth: 4,
            singleSelect: true,
            mapKey: 'shape',
            listKey: 'shape'
        });

        $("#pointer_div").click(function(event) {
            pos_x = event.offsetX ? (event.offsetX) : event.pageX - document.getElementById("pointer_div").offsetLeft;
            pos_y = event.offsetY ? (event.offsetY) : event.pageY - document.getElementById("pointer_div").offsetTop;
            document.getElementById("ImageMap1").style.left = (pos_x - 1);
            document.getElementById("ImageMap1").style.top = (pos_y - 15);

            document.getElementById("txt1").value = pos_x;
            document.getElementById("txt2").value = pos_y;
            if (document.getElementById("txtall").value == "") 
                document.getElementById("txtall").value = pos_x + "," + pos_y;
            else 
                document.getElementById("txtall").value = document.getElementById("txtall").value + "," + pos_x + "," + pos_y;

             var str = document.getElementById("txtall").value;
             var stringArray = new Array();
             stringArray = str.split(",");
             for (i = 0; i < stringArray.length; i++) {
                stringArray[i];
            }
            if (i == 10) 
            {
                __doPostBack('txtall ', '');

            }
            //Clears hotspot
            if (i >= 10) {
                __doPostBack('txtall ', '');
                str = "";
                i = 0;
                stringArray = [];
            }
        });
    });                
</script> 
```

**ASPX 代码**

```
<form id="form1" runat="server">
<div>
    <div id="pointer_div" style="width: 500px; height: 333px;">
        <asp:ImageMap ID="ImageMap1" runat="server" ImageUrl="pic/usa_map_720.png" Style="width: 500px;
            height: 333px;">
        </asp:ImageMap>
    </div>
    <br />
    <asp:TextBox ID="txt1" runat="server"></asp:TextBox>
    <asp:TextBox ID="txt2" runat="server"></asp:TextBox>
    <br />
    <asp:TextBox ID="txtall" runat="server" AutoPostBack="true" OnTextChanged="txtall_TextChanged" Text=""></asp:TextBox>
</div>
</form> 
```

**代码隐藏**

```
protected void txtall_TextChanged(object sender, EventArgs e)
{
    string[] arr = txtall.Text.Split(',');
    //create hotspot once there are 10 cordinates
    if (arr.Length == 10)
    {
        PolygonHotSpot Polygon1 = new PolygonHotSpot();
        Polygon1.Coordinates = arr[0].ToString() + "," + arr[1].ToString() + "," + arr[2].ToString() + "," + arr[3].ToString()
            + "," + arr[4].ToString() + "," + arr[5].ToString() + "," + arr[6].ToString() + "," + arr[7].ToString() + "," + arr[8].ToString() + "," + arr[9].ToString();// "128,185,335,157,400,224,400,400,228,400";

        Polygon1.NavigateUrl = "http://www.google.com";
        Polygon1.AlternateText = "Southern Region";

        ImageMap1.HotSpots.Add(Polygon1);
    }
} 
```

# c# - 如何使用 C# 最小化 IE 浏览器？

> ID：12473343
> 
> 赞同：2
> 
> 时间：2012-09-18T08:42:57.930
> 
> 标签：c#, internet-explorer, c#-4.0, window, minimize

如何使用 C# 最小化 IE 浏览器？我尝试了下面提到的代码，但它不起作用：

```
var processes = Process.GetProcessesByName("*iexplorer.*");

if (processes.Any()) 
{

    var handle = processes.First().MainWindowHandle;
    ShowWindow(handle, SW_SHOWMINIMIZED); 

} 
```

有没有其他方法可以实现 IE 浏览器的最小化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T11:57:25.833

正如 Damien 所说，由于用户拥有浏览器，而不是您的应用程序，因此没有完全可靠的方法可以做到这一点。您的代码不起作用，因为您尝试像在 Google 上那样使用通配符 (*)，但这在这里不起作用。`GetProcessesByName`字面上是在寻找一个名为`*iexplorer.*`. 您可以通过在该行下方放置一个断点来确认这一点，并将鼠标悬停在 上`processList`，它是一个空数组。改变它来`iexplore`解决这个问题。

一些经过测试和工作的代码如下：

```
using System;
using System.Diagnostics;
using System.Runtime.InteropServices;

namespace ConsoleApplication1
{
    class Program
    {
        [DllImport("user32.dll")]
        static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);

        static void Main()
        {
            var processes = Process.GetProcessesByName("iexplore");

            foreach (var process in processes)
            {
                ShowWindow(process.MainWindowHandle, 2);
            }
        }
    }
} 
```

# jquery - 每个 div 的 jquery 循环

> ID：12473344
> 
> 赞同：0
> 
> 时间：2012-09-18T08:42:57.977
> 
> 标签：jquery, each, cycle

我想在一页上制作几个（超过 12 个）幻灯片，这些幻灯片会在鼠标悬停时进行动画处理。现在只有第一个 div 是动画的。这是我的代码：

```
jQuery:

$(document).ready(function() {
  $('#reference').each(function() {
    $(this).cycle({
      speed:      200, 
      //timeout:     0, 
      fx:     'fade',
    });
  });
});

HTML:

<div class="columns-3">
    <div class="column firstCol">
        <div class="columns-3-Content">
            <div id="reference">
                <img src="images/img1.png" />
                <img src="images/img2.png" />
            </div>
        </div>
    </div>
    <div class="column">
        <div class="columns-3-Content">
            <div id="reference">
                <img src="images/img1.png" />
                <img src="images/img2.png" />
            </div>
        </div>
    </div>
    <div class="column lastCol">
        <div class="columns-3-Content">
            <div id="reference">
                <img src="images/img1.png" />
                <img src="images/img2.png" />
            </div>
        </div>
    </div>
</div>
<div style="clear:both;"></div> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:45:15.447

你应该传递一个类而不是一个唯一的 div ID。jQuery：

```
$(document).ready(function() {
  $('.reference').each(function() {
    $(this).cycle({
      speed:      200, 
      //timeout:     0, 
      fx:     'fade',
    });
  });
}); 
```

编辑（感谢 Gerald Schneider :)）：

你也可以这样做：

```
$('.reference').cycle({ speed: 200, fx: 'fade' }); 
```

HTML：

```
<div class="columns-3">
    <div class="column firstCol">
        <div class="columns-3-Content">
            <div class="reference">
                <img src="images/img1.png" />
                <img src="images/img2.png" />
            </div>
        </div>
    </div>
    <div class="column">
        <div class="columns-3-Content">
            <div class="reference">
                <img src="images/img1.png" />
                <img src="images/img2.png" />
            </div>
        </div>
    </div>
    <div class="column lastCol">
        <div class="columns-3-Content">
            <div class="reference">
                <img src="images/img1.png" />
                    <img src="images/img2.png" />
            </div>
            </div>
        </div>
    </div>
    <div style="clear:both;"></div> 
```

# sql - 从一个表中删除并更新另一个表

> ID：12473345
> 
> 赞同：1
> 
> 时间：2012-09-18T08:42:58.290
> 
> 标签：sql, sql-update, delete-operator

我有两个包含以下列的表：

```
SUMMARY(sum_id, sum_number) and DETAILS(det_id, det_number, sum_id) 
```

我想从`DETAILS`ID 列表中具有 det_id 的表中删除行，可以通过以下方式完成：

```
DELETE FROM details WHERE det_id in (1,2,3...) 
```

但

1.  同时我需要更新表`SUMMARY`如果`summary.sum_id=details.sum_id`

    ```
    UPDATE summary SET sum_number-=somefunction(details.det_number) 
    WHERE summary.sum_id=details.sum_id 
    ```

2.  `SUMMARY`此外，如果之后从表中删除行会非常棒`sum_number<=0`

如何以智能的方式完成这一切？

如果我从一开始就知道两个 ID：（`details.det_id`删除）AND`summary.sum_id`对应于`details.det_id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:21:56.560

您没有指定 DBMS，所以我假设是 PostgreSQL。

您可以使用新的可写 CTE 功能通过单个语句执行此操作：

```
with deleted as (
   delete from details
   where det_id in (1,2,3...)
   returning details.*
),
new_summary as (
   update summary 
      set sum_number = some_function(deleted.det_number)
   from deleted
   where delete.sum_id = summary.sum_id
   returning summary.sum_id
) 
delete from summary 
where sum_number <= 0
and sum_id in (select sum_id from new_summary); 
```

外部删除中的`in`条件不是绝对必要的，但您可能没有不使用的 CTE 定义，因此该条件确保`new_summary`CTE 实际用于语句中。此外，它可能会稍微提高性能，因为只检查更改的摘要行（不是全部）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:48:48.877

不可能在单个语句中执行所有这些操作。你必须做这样的事情：

```
UPDATE summary SET sum_number = somefunction(details.det_number)
FROM summary INNER JOIN details ON summary.sum_id = details.sum_id

DELETE FROM details WHERE det_id IN (1,2,3,...)

DELETE FROM summary WHERE sum_number <= 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T10:55:55.363

我会使用触发器......然后数据库负责删除。

使用更新触发器，一旦/如果更新成功，如果将触发触发器，它可以根据您的需要执行尽可能多或尽可能少的操作……即它可以执行 2 次删除操作。

例如阅读本教程：

[http://www.mysqltutorial.org/create-the-first-trigger-in-mysql.aspx](http://www.mysqltutorial.org/create-the-first-trigger-in-mysql.aspx)这个答案（http://stackoverflow.com/questions/6296313/mysql-trigger-after-update-only-if-来自stackoverflow 的row-has-changed）也提供了一个很好的例子。

# jquery - Onclick，更改悬停图像 JQUERY

> ID：12473347
> 
> 赞同：0
> 
> 时间：2012-09-18T08:43:03.723
> 
> 标签：jquery, hover, state

我有一个标准列表，用户单击标题并使用 jQuery 的 slideToggle() 向下滚动当前隐藏的 DIV 中的项目。

在标签中，我的 CSS 文件声明：

`a.showBlind:hover {background:url('img/scroll.png') right center no-repeat;}`

但是一旦单击，我希望悬停图像有所不同（即关闭百叶窗的 X 图标）。如何使用 jQuery 进行设置？

我可以找出我的 DIV 的状态没问题。目前我的 Jquery 看起来像这样（未完成）：

```
$(".showBlind").click(function () {
            var group = $(this).attr("rel");
            $(".group"+group).slideToggle("slow",function () {
                var state = $(".group"+group).css("display");
            });
            switch (state)
            {   case "none":

                    break;
                case "block":

                    break;
            }
        }); 
```

在`switch(state)`我想修改 a:hover 的 CSS。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:56:15.583

如果我的理解是正确的并且您只需要更改悬停图像，您可以执行以下操作。

像这样创建css：

```
a.showBlind:hover {background:url('img/scroll.png') right center no-repeat;}
a.showBlind.closeIcon:hover {background:url('img/close.png') right center no-repeat;} 
```

而不是在你的代码中

```
$(".showBlind").click(function () {
            var group = $(this).attr("rel");
            $(".group"+group).slideToggle("slow",function () {
                var state = $(".group"+group).css("display");
            });
            switch (state)
            {   case "none":
                    $(this).removeClass('closeIcon');
                    break;
                case "block":
                    $(this).addClass('closeIcon');    
                    break;
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:45:47.360

```
$(this).css('background-image', 'path/to/image.jpg'); 
```

请记住，您的路径现在将与您的 HTML 文档相关，而不是 CSS 文件。

编辑：这里的jsFiddle：

[http://jsfiddle.net/YZFMf/](http://jsfiddle.net/YZFMf/)

（您的 switch 语句在 slidetoggle 函数之外，这意味着“状态”的范围不正确......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:03:10.603

在您的 CSS 中，添加另一个条目，如下所示：

```
a.showBlind.hover:hover {background:url('img/X.png') right center no-repeat;} 
```

并在您的 JavaScript 中将类“悬停”添加到相关元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T09:07:08.027

谢谢 MassivePenguin 和 FAngel，在你们的帮助下，我现在已经解决了！

我的代码如下：

```
$(".showBlind").click(function () {
            var group = $(this).attr("rel");
            var myARef = $(this);
            $(".group"+group).slideToggle("slow",function () {
                var state = $(".group"+group).css("display");
                switch (state)
                {   case "none":
                        myARef.removeClass('closeIcon');
                        break;
                    case "block":
                        myARef.addClass('closeIcon');    
                        break;
                }
            });

        }); 
```

使用 FAngel 建议的 CSS：

```
a.showBlind             {width: 100%; display: block;}
a.showBlind:hover       {background: url('/img/scroll.png') right center no-repeat;}
a.showBlind.closeIcon:hover {background: url('/img/close.png') right center no-repeat;} 
```

谢谢！

# ruby-on-rails - 如何检查和提高网站性能？（导轨）

> ID：12473352
> 
> 赞同：0
> 
> 时间：2012-09-18T08:43:24.397
> 
> 标签：ruby-on-rails, performance, performance-testing

我阅读了有关提高站点性能的信息并尝试使用其中的一些，但由于经验不足，我在这方面不是很胜任。

首先我需要满足，我正在使用瘦服务器。

这是我所做的：

1.  我为图标制作了精灵图像（静态，悬停，活动）
2.  添加了压缩
3.  添加编译

我将此添加到我的 development.rb 文件中（以前安装了所需的 gem）：

```
config.assets.compress = true

config.assets.debug = false

config.assets.css_compressor = :yui

config.assets.js_compressor = :uglifier 
```

第一次打开页面时，我的结果非常糟糕：

![](../Images/9ad624e803b2e2fc156e0e00556ebeaa.png) 刷新后会好一点 ![](../Images/9b1b6f6f8425981bc7ba003ac091ea16.png)

**问题：**

1.  使用图像作为背景（精灵）对性能更好吗？
2.  如何检查现场性能并查看我应该在哪里工作？
3.  我正在使用编译/压缩赖特吗？
4.  我应该把我所有的图像放在资产文件夹中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:15:23.533

以下是我对您的问题的回答：

1）您应该尽可能少地使用图片，因为图片会大大减少页面加载时间。应该使用 CSS 代替，在我们不能使用 CSS 的地方使用图像。多张图片应该合并成一张以减少请求的数量（http://www.w3schools.com/css/css_image_sprites.asp）。

2) 有很多工具可以帮助我们监控和提高应用程序的性能。我们可以检查和改进的两件事是页面加载时间（包括静态资产，如图像、css、js ......）和后端代码（Ruby 代码）的基准测试。

我推荐这两个工具来进行上述测量：

*   YSlow（Firefox 和 Chrome 的附加组件）：测量页面加载时间并提供大量改进说明。
*   New Relic：测量后端代码的工具：[https ://github.com/newrelic/rpm](https://github.com/newrelic/rpm)

另一个提示，在优化代码以提高性能时，您应该在开发环境中运行 Rails。因为应用程序在开发模式下比在生产模式下运行得更慢。如果它在开发模式下运行得很快，它会在生产模式下运行得更快；）。

3）您使用资产压缩的方式并没有错，但很奇怪:)，因为您试图在开发模式下压缩资产（在 development.rb 中配置），而我们应该在生产模式下进行压缩（在 production.rb 中配置） .

4）这取决于你的选择。但是，是的，您应该将所有图像放在 assets/images/ 文件夹中。

# c# - 将二维数组数据显示为矩阵

> ID：12473355
> 
> 赞同：0
> 
> 时间：2012-09-18T08:43:41.680
> 
> 标签：c#, asp.net

我在二维矩阵中有一些随机数。我需要以矩阵格式在网页上显示它们，每个值都适合行和列。我需要对矩阵中的值应用 DBSCAN 算法以找到附近的等效值。因此，我对选择显示器的初衷很感兴趣。这是最好的方法吗？使用表格或数据表或任何其他方式...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:50:42.490

使用表格是表格数据（例如矩阵）的最明显选择。您的数据应该被支持在一个变量（或引用）中，而不仅仅是显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:52:19.320

矩阵有多大？我会用 Javascript 编写一个函数，从给定的数组生成 MathML 代码并处理算法。在这个数组上。然后您可以使用此功能来可视化每个步骤。老实说：我从来没有听说过这个算法。

看看（[MathML Matrixelement](http://zvon.org/xxl/MathML/Output/el_matrix.html)）。

# asp.net - pdf 文件未显示在 Internet Explorer 中

> ID：12473356
> 
> 赞同：2
> 
> 时间：2012-09-18T08:43:47.993
> 
> 标签：asp.net, pdf-generation, itextsharp

语言：ASP.NET/VB.NET

我正在使用 itextsharp 库创建 pdf 文件。在我的开发机器上生成的文件打开没有任何问题。但是当我在生产服务器上上传编译好的程序时，Internet Explorer 只是打开和关闭窗口，但不显示 pdf 文件。其他浏览器正在显示 pdf 文件。

这是我正在使用的代码

```
 Dim LABNO As Integer = Request.QueryString("LABNO")
        Dim vDoc As New iTextSharp.text.Document(PageSize.A4, 20, 20, 50, 50)

        Dim vOutPut As New IO.MemoryStream
        Dim vWriter = pdf.PdfWriter.GetInstance(vDoc, vOutPut)
        Dim cb As New PdfContentByte(vWriter)
        MakeReceipt(LABNO, vDoc, cb)
        vDoc.NewPage()
        MakeReceipt(LABNO, vDoc, cb)
        'MakeSheet(LABNO)
        vDoc.Close()

        Dim rnd As New Random
        Response.Clear()
        Response.ClearContent()
        Response.ClearHeaders()

        Response.ContentType = "Application/pdf"
        Response.AddHeader("Content-Disposition", String.Format("attachment;filename=Rct-{0}.pdf", rnd.Next.ToString()))
        Response.BinaryWrite(vOutPut.ToArray())
        Response.Flush() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:10:00.937

这个问题（由于 MSIE 接受字节的方式）在“iText in Action”书籍中进行了解释。您可以通过添加额外的标头来解决它：（`Content-Length`该值是 vOutPut 中的字节数。

为什么会出现这个问题？如果您不告诉 MSIE 需要多少字节，它将下载特定大小的块（例如，一次 1028 个字节）。如果您的 PDF 的大小不是这个大小的精确倍数，那么最后会添加额外的（垃圾）字符。一些 PDF 查看器无法处理这些额外的字符。

根据经验，我还添加了以下标题：

```
"Expires", "0"
"Cache-Control", "must-revalidate, post-check=0, pre-check=0"
"Pragma", "public" 
```

我不知道它们是否真的有必要，但它们并没有伤害。

# python - Google App Engine WebApp/Python 自定义 404 处理程序实现

> ID：12473368
> 
> 赞同：4
> 
> 时间：2012-09-18T08:44:13.743
> 
> 标签：python, google-app-engine, web-applications

我正在使用 GAE，Google App Engine 和使用 Python 的 Webapp。

我一直在尝试实现自定义错误处理程序或模板，或者沿着这些思路。GAE[在这里](https://developers.google.com/appengine/docs/python/config/appconfig#Custom_Error_Responses)提供了一些文档，但是在示例中它没有提供足够的实现（对我来说）。

我还在[这里](https://stackoverflow.com/questions/189751/google-app-engine-and-404-error)查看了关于另一个 StackOverflow 问题的所有这些精彩示例- 但无法理解如何将其实现到我当前的**main.py**文件中。

```
import os
from google.appengine.ext import webapp
from google.appengine.ext.webapp import util
from google.appengine.ext.webapp import template

class MainHandler(webapp.RequestHandler):
 def get (self, q):
    if q is None:
      q = 'static/index.html'

    path = os.path.join (os.path.dirname (__file__), q)
    self.response.headers ['Content-Type'] = 'text/html'
    self.response.out.write (template.render (path, {}))

def main ():
  application = webapp.WSGIApplication ([('/(.*html)?', MainHandler)], debug=False)
  util.run_wsgi_app (application)

if __name__ == '__main__':
  main () 
```

我尝试制作另一个类，`MainHandler`并`def`在`MainHandler`. 我唯一一次显示 404，它是全局显示的，这意味着即使`index.html`文件是“404”。

我尝试的最后一件事是按照以下方式实现：

```
if not os.path.exists (_file_):
 self.redirect(/static/error/404.html) 
```

我的**app.yaml**文件是：

```
application: appname
version: 1
runtime: python
api_version: 1

error_handlers:
  - file: static/error/404.html

  - error_code: over_quota
    file: static/error/404.html

handlers:
- url: /(.*\.(gif|png|jpg|ico|js|css))
  static_files: \1
  upload: (.*\.(gif|png|jpg|ico|js|css))

- url: /robots.txt
  static_files: robots.txt
  upload: robots.txt 

- url: /favicon.ico
  static_files: favicon.ico
  upload: favicon.ico    

- url: .*
  script: main.py 
```

我找不到任何有关 404 处理程序实现的指南/教程，只有代码摘录。

非常感谢大家！

编辑：根据下面 Hans 的说明，**当文件系统中不存在文件（或目录）时，我想返回 404。**

我试过了：

```
class ErrorHandler(webapp.RequestHandler):
  def get(self):
     if not os.path.isfile(_file_):
        self.redirect('/static/error/404.html') 
```

无济于事。什么是正确的实现/语法？

编辑：致沃斯考萨

```
import os
from google.appengine.ext import webapp
from google.appengine.ext.webapp import util
from google.appengine.ext.webapp import template
import logging

import webapp2

def handle_404(request, response, exception):
    logging.exception(exception)
    response.write('Oops! I could swear this page was here!')
    response.set_status(404)

def handle_500(request, response, exception):
    logging.exception(exception)
    response.write('A server error occurred!')
    response.set_status(500)

app = webapp2.WSGIApplication([
    webapp2.Route('/', handler='handlers.HomeHandler', name='home')
])
app.error_handlers[404] = handle_404
app.error_handlers[500] = handle_500

class MainHandler(webapp.RequestHandler):
  def get (self, q):
    if q is None:
      q = 'static/index.html'

    path = os.path.join (os.path.dirname (__file__), q)
    self.response.headers ['Content-Type'] = 'text/html'
    self.response.out.write (template.render (path, {}))

def main ():
  application = webapp.WSGIApplication ([('/(.*html)?', MainHandler)], debug=True)
  util.run_wsgi_app (application)

if __name__ == '__main__':
  main () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:00:01.540

**解决方案 1：让 appengine 处理您的静态文件**

您可以让 GAE 为您处理静态文件，如下所示：

```
application: appname
version: 1
runtime: python
api_version: 1

handlers:
- url: /static
  static_dir: static

- url: .*
  script: main.py 
```

这样做更好，因为为您提供静态文件会更容易，而且它也不会计入您的 CPU 配额。

只有一个警告。如果在下面找不到文件，则无法指定处理的自定义错误`/static`。一旦处理程序接收到一个 url，它就会尝试完成请求。如果静态 dir 处理程序找不到 url，它不会将控制权交还给`main.py`，现在这是您的通配符解决方案。它只会从 appengine 返回默认的 404 错误页面。

**解决方案 2：从您的应用程序中提供静态文件**

如果你**真的**必须为你的静态创建一个**自定义**的404 页面，你必须在你的应用程序中进行。（我不建议你这样做，以防不清楚。）在那种情况下，你是在正确的轨道上。您应该像示例中那样创建一个额外的处理程序。改写一行：

```
path = os.path.join(os.path.dirname(__file__), 'static', q) 
```

在您的应用程序行中，添加您的处理程序，如下所示：

```
('/static/(.*)?', MainHandler), 
```

如果找不到该文件，您应该调用 self.response.set_status(404) 并编写您需要的任何自定义响应消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:13:37.210

看看：[http](http://webapp-improved.appspot.com/guide/exceptions.html) ://webapp-improved.appspot.com/guide/exceptions.html处理 404 和 500 异常。Webapp2 现在是 GAE python 应用程序的首选框架。

# sql - Oracle SQL 多次插入忽略重复行

> ID：12473372
> 
> 赞同：2
> 
> 时间：2012-09-18T08:44:31.263
> 
> 标签：sql, oracle, oracle11g

我想知道 Oracle 中将多条记录复制到忽略某个索引上的重复值的数据库中的首选技术是什么。语句在语句中明确说明并且不来自另一个表

```
INSERT INTO EXAMPLE (A, B, C, D) VALUES (null,'example1','example2',EXAMPLE_SEQ.nextval);
INSERT INTO EXAMPLE (A, B, C, D) VALUES (null,'example2','example3',EXAMPLE_SEQ.nextval);
INSERT INTO EXAMPLE (A, B, C, D) VALUES (null,'example4','example5',EXAMPLE_SEQ.nextval); 
```

我目前正在这样做并手动检查，但需要找到一种方法以便将这些作为脚本处理

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:01:01.480

如果您决定坚持使用`INSERTs`，则可以通过使用约束（无论是主键还是唯一键）来防止插入重复行。如果它碰巧违反了唯一约束，您的脚本将停止，您将不得不回滚先前插入所做的所有更改（除非您已提交所有更改）。要处理该异常，您可以编写类似的 pls/sql 块。

```
declare
  l_unique_exception exception;
  pragma exception_init(l_unique_exception, -1);
begin
  insert into test(id, test_vector)
    values(1, 123);
  insert into test(id, test_vector)
   values(1, 123);
  ......
  Insert into 
  commit;
exception
  when l_unique_exception
    then process the exception;    
end; 
```

**此外**

如果您想在其中一个插入引发异常后继续，那么下面的示例可能会派上用场。

1.  创建一个包含错误的表。例如。

    `CREATE TABLE tb_errors ( ErrorTag varchar2(123) )`

2.  [提供调用DBMS_ERRLOG](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_errlog.htm)包的[CREATE_ERROR_LOG](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_errlog.htm)过程 的错误日志记录

    `DBMS_ERRLOG.CREATE_ERROR_LOG('YourDmlTable. Test in this case', 'tb_errors');`

3.  为每个添加`log errors into`子句`insert`

这是一个例子

```
declare
begin
  insert into test(id, col1)
     values(1, 123)
     log errors into tb_errors('simple expression') reject limit unlimited;   
  insert into test(id, col1)
     values(1, 123)
     log errors into tb_errors('simple expression') reject limit unlimited;   
  insert into test(id, col1)
     values(1, 123) 
     log errors into tb_errors('simple expression') reject limit unlimited;
  commit;
end; 
```

脚本完成后，您可以查询错误记录表，`tb_errors`在这种情况下，查看发生了什么问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T08:56:04.133

你应该看看`MERGE`语法。

[http://en.wikipedia.org/wiki/Merge_(SQL](http://en.wikipedia.org/wiki/Merge_(SQL) )

```
merge example target
using (select 1 as id, 'a' as val) as source
    on source.id = target.id
    and source.val = target.val
when not matched then
    insert (id, val) values (source.id, source.val); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:59:26.387

如果您的目标是对不正确的数据提供额外的处理，我建议您使用 LOG 错误子句。请考虑[http://www.oracle-base.com/articles/10g/dml-error-logging-10gr2.php](http://www.oracle-base.com/articles/10g/dml-error-logging-10gr2.php) - 有很好的例子。

# google-maps - 在没有街景小人的情况下查看启用街景的街道

> ID：12473374
> 
> 赞同：1
> 
> 时间：2012-09-18T08:44:36.853
> 
> 标签：google-maps, google-street-view

我不想使用街景，我只想看看哪些街道允许它并捕获图形（以便识别汽车无法进入的封闭社区。）当然可以拖出街景小人并做一个屏幕捕获（如果想将它们缝合在一起，则可以捕获多个）。可以使用该方法（没有街景小人）来捕获地图（没有突出显示 s/v/e 街道）但是有[更好的方法](http://www.codres.de/google-map-saver/gms-download)来获得 8000 x 8000 像素的地图（例如）。

> 问题：是否有相同的方法可以在不悬停街景小人的情况下保持启用街景的街道的显示？）

我曾经在使用 Gmaps 时发生过这种情况（可能是因为我把那个人丢在了哪里），但从未复制过它。

# java - 用于 Windows 7 64 位的 Java 中的 ODBC 连接

> ID：12473376
> 
> 赞同：1
> 
> 时间：2012-09-18T08:44:44.197
> 
> 标签：java

我有一个关于在 Windows 7 - 64 位的 java 中连接访问数据库的问题。

当我在 Windows 7 64 位上工作时，即使我通过使用添加数据库，连接数据库也存在问题`C:\windows\sysWOW64\odbcad32.exe`

# java - 将两个 TokenStream 流加在一起（ASCIIFoldingFilter 案例）

> ID：12473384
> 
> 赞同：1
> 
> 时间：2012-09-18T08:45:14.440
> 
> 标签：java, spring, hibernate, lucene, hibernate-search

我编写了一个使用 ASCIIFoldingFilter 的自定义分析器，以便将位置名称中的扩展拉丁语集减少为常规拉丁语。

```
public class LocationNameAnalyzer extends Analyzer    {

    @Override
    public TokenStream tokenStream(String arg0, Reader reader) {

        //TokenStream result = new WhitespaceTokenizer(Version.LUCENE_36, reader);
        StandardTokenizer tokenStream = new StandardTokenizer(Version.LUCENE_36, reader);

        TokenStream result = new StandardFilter(tokenStream);
        result = new LowerCaseFilter(result);

        result = new ASCIIFoldingFilter(result);

        return result;
    }

} 
```

我知道它充满了不推荐使用的东西，就像现在一样，但我稍后会更正。我现在的问题是，当我应用此分析器时，我能够使用标准拉丁语找到结果，但在搜索原始名称时却不行。

例如：“Munchen”为我带来了与慕尼黑相关的结果，但“München”不再提供。

我假设在我的情况下， ASCIIFoldingFilter 只是覆盖了我的流中的字符，所以问题是如何将两个流加在一起（普通流和折叠拉丁流）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:24:21.773

您应该在分析器和搜索器上都使用过滤器，这样用于搜索的标记将与存储在索引中的标记相同。

# c# - 为c#编译批处理脚本

> ID：12473385
> 
> 赞同：0
> 
> 时间：2012-09-18T08:45:14.910
> 
> 标签：c#, batch-file

我写了下面的批处理脚本来编译cs代码，但是它不起作用。有任何想法吗？

```
 @echo off
   %comspec% /k ""C:\Program Files\Microsoft Visual Studio 10.0\VC\vcvarsall.bat"" x86
   csc.exe -target:exe *.cs 
```

它会打开 vcvarsall.bat，但最后一行不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:51:23.460

using`/k`将意味着`%comspec%`将保留在内存中，直到您**退出**shell。
使用`/c`，并且该批处理文件应该在另一个批处理文件运行后继续。

`call`此外，您可以使用`%comspec% /c`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:08:50.600

让它工作：

1-将此路径添加到系统环境：

```
 C:\Windows\Microsoft.NET\Framework\v4.0.30319 
```

2-将 .bat 文件更改为：

```
 @echo off
   csc.exe -target:exe *.cs 
```

.

# javascript - 通过单击 div [jQuery] 更改 div 的内容

> ID：12473388
> 
> 赞同：0
> 
> 时间：2012-09-18T08:45:16.133
> 
> 标签：javascript, jquery, html

我正在尝试更改我网站的投资组合部分的内容。我有一个名为 .portfolio_box 的 div，其中包含项目的小预览（每个项目 div 也有不同的 id）。当您单击此 div (.portfolio_box) 时，我希望内容 div (#main_content) 的内容消失并替换为相应的内容。

我找到[了以下教程](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-load-in-and-animate-content-with-jquery/)并根据我的需要调整了脚本：

```
<script type="text/javascript">
    $(document).ready(function() 
    {  
        $("#thomasschoof_old").click(function()
        {  

            /*hide( 'fast', function() 
            { 
                $('#main_content').load(thomasschoof_old.html,'',showNewContent); 
            } );

           var toLoad = $(this).attr('href')+' #main_content';  */
            $('#main_content').hide('fast',loadContent);  
            $('#page').append('<span id="load">LOADING...</span>');  
            $('#load').fadeIn('normal'); 

            }); 

            function loadContent() 
            {  
                $('#main_content').load('thomasschoof_old.html #project','',showNewContent)  
            }  

            function showNewContent() 
            {  
                $('#main_content').show('normal',hideLoader);  
            }  

            function hideLoader() 
            {  
                $('#load').fadeOut('normal');  
            } 
            return false;           

    });  
</script> 
```

但是当我点击 div #thomasschoof_old 时，什么也没有发生。我不太了解 jQuery 或 Javascript（只是进入它），我真的无法弄清楚。

您可以在此处查看网页：http: [//jowannes.com/thomasschoof/portfolio.html](http://jowannes.com/thomasschoof/portfolio.html)

我希望有人可以帮助我，在此先感谢！托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T08:54:15.873

您的问题是，您在用于加载外部脚本文件（jQuery）的脚本标签中编写了 JS 代码。您的脚本不会以这种方式执行。

> **src**：该属性指定外部脚本的 URI；这可以用作直接在文档中嵌入脚本的替代方法。**指定了 src 属性的脚本元素不应在其标签中嵌入脚本。**

来自：[https ://developer.mozilla.org/en-US/docs/HTML/Element/Script](https://developer.mozilla.org/en-US/docs/HTML/Element/Script)

为您的代码设置一个单独的脚本标签，或者从第二个外部脚本文件中包含它，看看会发生什么。

# reporting-services - 未使用时在 Azure 上的 SQL 报告中计划禁用/启用

> ID：12473401
> 
> 赞同：1
> 
> 时间：2012-09-18T08:46:16.087
> 
> 标签：reporting-services, azure, azure-sql-database

由于 Microsoft 已决定从 7 月 31 日起对 SQL 报告收费，我是否可以每天安排一次禁用/启用，以便在不使用时不会增加时间/成本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:20:22.117

不幸的是，你不能在当前版本中。您可能想在以下网址添加对该功能的投票：[http ://www.mygreatwindowsazureidea.com/forums/169380-business-analytics-sql-reporting](http://www.mygreatwindowsazureidea.com/forums/169380-business-analytics-sql-reporting)

# html - hiutil 没有在 Mountain Lion 中正确索引？

> ID：12473402
> 
> 赞同：3
> 
> 时间：2012-09-18T08:46:18.817
> 
> 标签：html, macos

我使用 Voodoopad 来创建我的帮助文档，如此[处](http://developer.casgrain.com/?p=16)所述。基本上我有一个运行脚本构建阶段，它告诉 Voodoopad 将我的文档导出为 html。Voodoopad 文档设置为在导出时运行 hiutil 以创建帮助索引。

在注意到我的许多帮助锚都不起作用后，我将其追溯到 hiutil。当我在从 Voodoopad 导出的 html 上运行 hiutil 时，我得到了一堆错误：

```
Zach-iMac:Desktop zach$ hiutil -a --create Help/ --file Help/Help.helpindex -1 -vvv
index.html -- Parse error: The operation couldn’t be completed. (NSXMLParserErrorDomain error 76.)
index.html -- Parse error: Error 76, Description: (null), Line: 14, Column: 8
index.html -- Finished parsing 
```

每个文件都会重复这些错误。第 14 行第 8 列是 head 标签的结束。每个文件的第一部分基本相同：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta name="AppleTitle" content="VideoBuffet Help">
<meta name="AppleIcon" content="appicon16.png">
<title>Index</title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1138.23">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Lucida Grande'}
</style>
</head>
<body> 
```

这个精确的 HTML 过去在 hiutil 中工作得很好。自从我上次运行它以来，我升级到了 Mountain Lion 和 Xcode 4.5。

有其他人在使用 hiutil，它对你有用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:14:29.647

如果您在 HTML 文件的顶部使用此序言：

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http ://www.w3.org/1999/xhtml">

并通过像[http://validator.w3.org/#validate_by_upload+with_options这样的验证器运行您的 HTML](http://validator.w3.org/#validate_by_upload+with_options)

并修复所有问题，直到验证器返回成功，它应该与 hiutil 1.3 一起使用。无论如何，它对我有用。

另请参阅[http://lists.apple.com/archives/apple-help-authoring/2012/Sep/msg00018.html](http://lists.apple.com/archives/apple-help-authoring/2012/Sep/msg00018.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T04:43:13.840

这不是一个正确的答案，但我的解决方法是使用 Lion (1.2) 附带的 hiutil 版本来构建我的帮助索引。

我对此不太满意，但现在可以了。如果有人有这个问题，并且想学习如何做，你可以[阅读我的博客文章](http://zpasternack.blogspot.com/2012/09/working-around-broken-hiutil-in.html)。

更新：发布[rdar://12326432](http://openradar.appspot.com/12326432)

更新：我从 Apple 听说这是错误 #11981648 的副本（目前仍处于打开状态）。

# grails - 全删除孤儿忽略？

> ID：12473403
> 
> 赞同：0
> 
> 时间：2012-09-18T08:46:22.013
> 
> 标签：grails, grails-orm

我必须从excel导入数据库。数据库的一部分如下所示：

```
class Network {

   String externalId
   String name

   static hasMany = [phones: Phone]

   static mapping = {
      phones cascade: 'save-update,delete,all-delete-orphan'
   }
}
class Phone{

   String number

   static belongsTo = [Network]
} 
```

我还有一个定义 excel 记录的类：

```
class NetworkExcelRecord{
   String externalId
   String name
   String phone1
   String phone2

   public def updateDomain() {
      if (!externalId)
         return null
      Network instance = Network.findByExternalId(externalId) ?: new Network()
      instance.properties = this.properties
      if (instance.isDirty() || !instance.id)
        instance.save(failOnError: true,flush: true)
   }

   private def getPhones() {
    def phonesOld = Network.findByExternalId(externalId)?.phones
    def phonesNew = []
    (1..2).collect {this."phone$it"}.eachWithIndex {String phoneNumber, Integer index ->
        if (phoneNumber) {
            Phone phone = phonesOld.find {it.number == phoneNumber}
            if (!phone)
                phone = new Phone(number: phoneNumber)
            phone.sortOrder = index
            phone.save()
            phonesNew << phone
        }
    }
    phonesNew
   }
} 
```

但引用网络 - 电话会更新，但孤立电话不会被删除。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:56:13.867

尝试`belongsTo`在您的`Phone`班级中删除。通过`cascades`在映射中定义`Network`您不需要`belongsTo`，因为它仅定义了关系的保存-删除级联。

# python - scipy.optimize.leastsq 返回最佳猜测参数而不是新的最佳拟合

> ID：12473406
> 
> 赞同：4
> 
> 时间：2012-09-18T08:46:32.640
> 
> 标签：python, scipy, data-fitting

我想将洛伦兹峰拟合到一组数据 x 和 y，数据很好。OriginLab 等其他程序非常适合它，但我想用 python 自动拟合，所以我有以下基于[http://mesa.ac.nz/?page_id=1800的代码](http://mesa.ac.nz/?page_id=1800)

我遇到的问题是 scipy.optimize.leastsq 作为最适合我传递给它的初始猜测参数返回，基本上什么都不做。这是代码。

```
#x, y are the arrays with the x,y  axes respectively
#defining funcitons
def lorentzian(x,p):
  return p[2]*(p[0]**2)/(( x - (p[1]) )**2 + p[0]**2)

def residuals(p,y,x):
  err = y - lorentzian(x,p)
  return err      

p = [0.055, wv[midIdx], y[midIdx-minIdx]]   
pbest = leastsq(residuals, p, args=(y, x), full_output=1)
best_parameters = pbest[0]
print p
print pbest 
```

p 是初始猜测，best_parameters 是从 leastsq 返回的“最佳拟合”参数，但它们始终相同。

这是由 full_output=1 返回的（长数值数组已缩短但仍具有代表性）

```
 [0.055, 855.50732, 1327.0]
    (array([  5.50000000e-02,   8.55507324e+02,   1.32700000e+03]), 
    None, {'qtf':array([ 62.05192947,  69.98033905,  57.90628052]), 
    'nfev': 4, 
    'fjac': array([[-0.,  0.,  0., 0.,  0.,  0.,  0.,],
    [ 0., -0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,
    0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,
    0.,  0.],
    [ 0.,  0., -0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,
    0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,
    0.,  0.]]), 
    'fvec': array([  62.05192947,   69.98033905,   
    53.41218567,   45.49879837,   49.58242035,   36.66483688,
    34.74443436,   50.82238007,   34.89669037]), 
    'ipvt': array([1, 2, 3])},  
    'The cosine of the angle between func(x) and any column of the\n  Jacobian 
    is at most 0.000000 in absolute value', 4) 
```

谁能看到有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T12:36:27.487

快速的谷歌搜索提示数据为单精度的问题（您的其他程序几乎肯定也向上转换为双精度，尽管这显然也是 scipy 的问题，另请参阅此[错误报告](http://projects.scipy.org/scipy/ticket/920)）。如果您查看您的`full_output=1`结果，您会看到雅可比在任何地方都近似为零。因此，明确给出雅可比行列式可能会有所帮助（尽管即使那样你也可能想要向上转型，因为你可以通过单精度获得的相对误差的最小精度非常有限）。

*解决方案：*最简单和数值最佳的解决方案（当然，给出真正的雅可比也是一个奖励）是将你的`x`和`y`数据转换为双精度（`x = x.astype(np.float64)`例如）。

我不建议这样做，但您也可以`epsfcn`通过手动设置关键字参数（以及可能的容差关键字参数）来修复它`epsfcn=np.finfo(np.float32).eps`。这似乎在某种程度上解决了这个问题，但是（因为大多数计算都是使用标量，并且标量不会在您的计算中强制向上转换）计算是在 float32 中完成的，并且精度损失似乎相当大，至少在没有的时候提供 Dfunc。

# python - 查找数字是否存在于排序列表的两个数字之间的更好方法

> ID：12473413
> 
> 赞同：3
> 
> 时间：2012-09-18T08:46:59.177
> 
> 标签：python, list, sorting

我有一个这样的排序列表

```
s = [1 , 4 ,6 , 9  ,10 ] 
```

我想知道列表中是否存在一个数字，或者它是否存在于两个数字之间。如果它存在于两个数字之间，我想将它们打印出来。

现在我的代码看起来像这样

```
for x in s:
   if b == x: \\ b is the number
       print b
   elif b > x and b < s[s.index(x) + 1] and s.index(x) < len(s):
       print b , s[s.index(x) + 1] 
```

有更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T08:49:47.890

[bisect 模块](http://docs.python.org/library/bisect.html#module-bisect)正是这样做的：

```
s = [1 , 4 ,6 , 9  ,10 ]
import bisect

x = 5
n = bisect.bisect_left(s, x)
if s[n:n+1] == [x]:
    print x, 'is in the list'
else:
    print x, 'comes between', s[n-1:n], 'and', s[n:n+1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:52:59.047

这不是完美的优化，但您可以避免多次使用 index() 方法！

```
for i,j in enumerate(s,1):
 if b == j: \\ b is the number
   print b
 elif b > j and b < s[i+1] and s[i] < len(s):
   print b , s[i + 1] 
```

# sql - sql server 中的 Oracle varchar2 等效项

> ID：12473422
> 
> 赞同：3
> 
> 时间：2012-09-18T08:47:29.213
> 
> 标签：sql, sql-server, sql-server-2008

```
create table #temp(name nvarchar(10))
insert into #temp values('one')
select * from #temp where name = 'one'
select * from #temp where name = 'one ' --one with space at end
drop table #temp 
```

在上面我使用 nvarchar 作为名称。我的要求是第一个选择查询的结果应该存在，第二个查询不应该返回。不要修剪名称。建议我在 sql server 中可以使用哪种数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:01:22.977

它不是可以解决此问题的数据类型。你需要看这篇文章： [INF：SQL Server 如何比较字符串和尾随空格](http://support.microsoft.com/kb/316626)

> SQL Server 遵循关于如何比较字符串和空格的 ANSI/ISO SQL-92 规范（第 8.2 节，一般规则 #3）。ANSI 标准要求对比较中使用的字符串进行填充，以便它们的长度在比较之前匹配。填充直接影响 WHERE 和 HAVING 子句谓词的语义以及其他 Transact-SQL 字符串比较。例如，Transact-SQL 认为字符串“abc”和“abc”对于大多数比较操作是等效的。

有几种方法可以克服这个问题，一种是使用`Like`.

```
select * from #temp where name like 'one ' --one with space at end 
```

这将不返回任何结果。

您应该看到这篇博文：AnthonyBloesch的[测试字符串的相等计数尾随空格](http://blogs.msdn.com/b/anthonybloesch/archive/2009/02/20/sql-equality-and-trailing-spaces.aspx)

# javascript - 在javascript中转换时间

> ID：12473424
> 
> 赞同：-2
> 
> 时间：2012-09-18T08:47:38.297
> 
> 标签：javascript, google-apps-script

如何在 javascript 中将 09:00:00 转换为 9:00？或相反亦然。我在谷歌应用脚​​本中有一个 GUI，有人在其中输入时间，我需要它让他们看起来很正常。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:54:40.147

```
var timestring = '09:00:00';
var timechunks = timestring.split(':');
var newdata= parseInt(timechunks[0],10)+':'+timechunks[1];
console.log(newdata);//9:00 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-18T09:17:55.023

I would suggest you to use [Datejs](http://www.datejs.com/). Something like this should do the trick:

```
Date.parse('09:00:00').toString('HH:mm') 
```

# mysql - 我可以检查执行是否可以在 Perl mysql 中死掉的情况下运行吗？

> ID：12473426
> 
> 赞同：-1
> 
> 时间：2012-09-18T08:47:41.513
> 
> 标签：mysql, perl, execute

我正在连接到一个数据库，并且我正在从 STDIN 获取一个输入，我将其用作执行的一部分。所以我有：

```
my $i = 0;

while($i != 1) {
    print "Input: ";
    my $input = <STDIN>;
    chomp $input;
    my $test = $dbh->prepare("show tables like $input"); 
```

然后我想检查输入是否是数据库中的有效条目，如果不是，则再次循环：

```
 if ($test->execute()) {
        print "Input exists in database\n";
        $i = 1;
    }
    else {
        print "Input does not exist.\n";
    }
} # end of while 
```

我知道这不起作用，但我想要类似的东西，`execute or die`因为我不想退出我的程序。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:03:23.073

你有两个选择：

1) 禁用数据库句柄的 RaiseError 属性。这可以在创建连接时完成：

```
$dbh = DBI->connect($dsn, $user, $password, { RaiseError => 0 }); 
```

这当然需要您通过在适当的地方测试 $DBI::err 来自己处理错误。

2) 捕捉错误。要么使用 Try/Catch 框架之一（我推荐使用 TryCatch 或 Try::Tiny），要么手动使用 eval。例如：

```
if (defined( eval { $test->execute() // 0 } ) {
    print "Success";
} else {
    pring "Bugger, I died...: $DBI:Err";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:22:44.963

我实际上找到了我想要的不同方式的解决方案，但感谢 pmakholm 的回答。

```
my $i = 0;

while($i != 1) {
    print "Input: ";
    my $input = <STDIN>;
    chomp $input;
    my $test = $dbh->prepare("show tables like $input");
    my $var = $test->execute();
    if ($var != 0) {
        print "Input exists in database\n";
        $i = 1;
    }
    else {
        print "Input does not exist.\n";
    }
} # end of while 
```

我没有想到的是，即使我在数据库中输入废话，我也会查看该**表**是否存在 - 如果不存在，它只会返回一个空集，所以我可以检查是否为零（检查是否`NULL`或类似可能会更好，但这有效）。我以为它会返回错误，但事实并非如此。pmakholm - 如果我需要检查查询是否有效，我将使用您的方法，谢谢。

# algorithm - Perlin/Simplex Noise 算法的随机性质量如何？

> ID：12473434
> 
> 赞同：6
> 
> 时间：2012-09-18T08:47:59.667
> 
> 标签：algorithm, random, noise, perlin-noise, prng

Perlin 噪声算法和 Simplex 噪声算法的随机性质量如何？

两者哪个算法的随机性更好？

与标准的伪随机生成器相比，使用 Perlin/Simplex 作为随机数生成器有意义吗？

更新：我知道 Perlin/Simplex Noise 的用途。我只是对随机性感到好奇。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T17:31:10.070

Perlin 噪声和单纯形噪声旨在产生有用的噪声，而不是完全随机的。这些算法通常用于创建程序生成的景观等。例如，它可以生成这样的地形（图片来自[这里](http://digitalerr0r.wordpress.com/2011/05/25/procedural-landscapes-using-perlin-noise/)）：

![柏林噪声生成的地形](../Images/fce6f72ec026c330e5dc0e7f2b7cc18a.png)

在此图像中，噪声会生成一个 2D 高度图，如下所示（来自[此处](http://en.wikipedia.org/wiki/File:Perlin.png)的图像）：

![perlin 噪声生成的高度图](../Images/12cfe4cdba54957c27961079b42b749e.png)

每个像素的颜色代表一个高度。生成高度图后，渲染器用于创建与图像的“高度”（颜色）匹配的地形。

因此，算法的结果实际上并不是“随机的”；如您所见，有许多易于辨别的模式。

据称，单纯形看起来有点“好”，这意味着更少的随机性，但它的主要目的是它产生类似的噪声，但可以更好地扩展到更高的维度。也就是说，如果产生 3D、4D、5D 噪声，单纯形噪声将优于 Perlin 噪声，并产生相似的结果。

如果您想要一个通用的伪随机数生成器，请查看[Mersenne twister](http://en.wikipedia.org/wiki/Mersenne_twister)或[其他 prngs](http://en.wikipedia.org/wiki/List_of_pseudorandom_number_generators)。请注意，对于密码学，prngs 可能充满警告。

**更新：**

（对 OPs 更新问题的回应）

至于这些噪声函数的随机属性，我知道 perlin 噪声使用（非常）穷人的 prng 作为输入，并在相邻的“随机”像素之间进行一些平滑/插值。输入随机性实际上只是伪随机索引到预先计算的随机向量中。

索引是使用一些简单的整数运算来计算的，没什么花哨的。例如，noise++ 项目使用预先计算的“randomVectors”（参见[此处](http://noisepp.svn.sourceforge.net/viewvc/noisepp/trunk/noisepp/core/NoiseGenerator.h?revision=57&view=markup#l296)）来获取其源噪声，并在来自该向量的不同值之间进行插值。它通过一些简单的整数运算在这个向量中生成一个“随机”索引，添加少量的伪随机性。这是一个片段：

```
int vIndex = (NOISE_X_FACTOR * ix + NOISE_Y_FACTOR * iy + NOISE_Z_FACTOR * iz + NOISE_SEED_FACTOR * seed) & 0xffffffff;
vIndex ^= (vIndex >> NOISE_SHIFT);
vIndex &= 0xff;

const Real xGradient = randomVectors3D[(vIndex<<2)];

... 
```

然后将稍微随机的噪声平滑并实际上与相邻像素混合，从而产生图案。

在产生初始噪声之后，perlin/simplex 噪声具有噪声倍频程的概念；也就是说，在不同的尺度上将噪声重新混合到自身中。这会产生更多的模式。所以噪声的初始质量可能只与预先计算的随机数组一样好，加上伪随机索引的效果。但毕竟柏林噪声对它的影响，明显的随机性显着降低（我认为它实际上分布在更广泛的区域）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T17:37:15.823

我想你很困惑。

perlin 和 simplex 从其他来源获取随机数并*降低它们的*随机性，使它们看起来更像自然景观（仅随机数看起来不像自然景观）。

所以它们不是随机数的来源——它们是从其他地方处理随机数的一种方式。

即使它们是一个来源，它们也不是一个好的来源（这些数字是密切相关的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-03T01:49:31.817

如“随机数的统计”中所述，[AI Game Wisdom 2](http://www.aiwisdom.com/resource_aiwisdom2.html)询问哪个产生“更好”的随机性取决于您使用它的目的。通常，PRNG 的质量通过测试电池进行比较。在印刷时，作者指出用于测试 PRNG 随机性的最著名和最广泛使用的测试电池是[ENT](http://www.fourmilab.ch/random/) & [Diehard](http://stat.fsu.edu/pub/diehard/)。此外，请参阅有关[如何测试随机数](https://stackoverflow.com/questions/778718/how-to-test-random-numbers)以及[为什么统计随机性测试似乎是临时](https://mathoverflow.net/questions/37518/why-do-statistical-randomness-tests-seem-so-ad-hoc)的相关问题。

除了测试典型 PRNG 的标准问题之外，将 Perlin 噪声或 Simplex 噪声测试为 PRNG 更为复杂，因为：

1.  两者在内部都需要一个 PRNG，因此它们输出的随机性受底层 PRNG 的影响。
2.  大多数 PRNG 缺少可调参数。相比之下，Perlin 噪声是一个或多个相干噪声函数（八度音阶）的总和，具有不断增加的频率和不断减小的幅度。由于最终图像取决于使用的八度音阶的数量和性质，因此随机性的质量会相应变化。[libnoise：修改噪声模块的参数](http://libnoise.sourceforge.net/tutorials/tutorial4.html#octaves)
3.  类似于 #2 的论点适用于改变单纯形噪声中使用的维数，因为“4D 单纯形噪声的 3D 部分不同于 3D 单纯形噪声”。Stefan Gustavson 的[Simplex 噪声揭开了神秘面纱](http://webstaff.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-24T19:04:54.943

不要使用 perlin 或 simplex 来获得随机性。他们不是为此而生的。它们是随机性的/应用/。

人们选择这些是因为他们的视觉吸引力，这还没有得到充分的讨论，所以我将重点关注这一点。

带有 smoothstep 的 perlin/simplex 非常平滑。无论您缩放多远，它们都将始终是渐变，而不是顶点或边缘。

输出范围为 (+/- 1/2 x #dimensions)，因此您需要对此进行补偿，以根据需要使其达到 0 到 1 或 -1 到 1 的范围。解决这个问题是标准的。添加八度音阶将通过八度音阶的比例因子来增加这个范围（当然，它通常是更大八度音阶的一半）。

perlin/simplex 噪声具有奇怪的质量，放大时为棕色噪声，缩小时为蓝色噪声。无论是一个缩放还是中间缩放都不是特别适合prng目的，但是它们非常适合伪造自然发生（这不是真正随机的，并且/是/有空间偏见的）。

perlin 和单纯形噪声都倾向于沿轴有一些偏差，而 perlin 在这方面还有一些问题。编辑：在三个维度上摆脱更多的偏见是非常复杂的。很难（不可能？）在球体上生成大量无偏点。

perlin 结果往往是带有八边形偏差的圆形，而单纯形往往会产生带有六边形偏差的椭圆形。

一片高维单纯形看起来不像低维单纯形。但是 3d perlin 的 2d 切片看起来很像 2d perlin。

大多数人认为单纯形实际上无法处理更高的维度——对于更高的维度，它往往“看起来越来越糟”。据称 perlin 没有这个问题（虽然它仍然有偏见）。

我相信一旦“八度”，它们在分层时都有相似的输出三角形分布，（类似于滚动 2 个骰子）（如果有人可以为我仔细检查的话，我很喜欢。）因此两者都受益于平滑步骤。这是标准的。（它可能会偏向相同输出的结果，但由于空间相关性高，它仍然会存在尺寸偏差，导致 prng 质量测试失败，这是 /the/ 功能，而不是错误。）

请注意，八度技术不是 perlin 或 simplex 定义的一部分。这只是经常与它们结合使用的技巧。perlin 和 simplex 在均匀分布的点处混合渐变。这种噪声的八度音阶被组合起来以创建更大和更小的结构。这也经常用于“值噪声”，它基本上使用与此概念等效的白噪声而不是柏林噪声。带有八度音阶的值噪声也会表现出/甚至更糟/八角形偏差。因此为什么首选 perlin 或 simplex。

单纯形在所有情况下都更快 - /特别是/在更高维度。

所以 simplex 解决了 perlin 在性能和视觉上的问题，但引入了它自己的问题。

# android - 如何告诉 Android 相对布局占用两个元素之间的所有空间。不管那个空间有多大

> ID：12473436
> 
> 赞同：0
> 
> 时间：2012-09-18T08:47:59.713
> 
> 标签：android, android-layout, android-relativelayout

如何告诉 Android 相对布局占用两个元素之间的所有空间。不管那个空间有多大。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical">

<TableLayout android:layout_below="@id/title_container"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id = "@+id/usb_config_title">

    <TableRow android:layout_gravity="center_horizontal">
        <TextView android:layout_width="398dp"
            android:layout_height="4px"
            android:text="     "/>
        <TextView android:layout_width="4px"
            android:layout_height="4px"
            android:text="     "
            android:background="@color/title_background"/>
        <TextView android:layout_width="398dp"
            android:layout_height="4px"
            android:text="     "/>
    </TableRow>

    <TableRow android:layout_gravity="center_horizontal">
        <TextView android:text="@string/usb_stick"
            android:layout_width="398dp" 

            android:gravity="center"
            android:layout_height="wrap_content"
            android:textSize="22dp"/>
        <TextView android:layout_width="4px"
            android:layout_height="fill_parent"
            android:text="     "
            android:background="@color/title_background"/>
        <TextView android:text = "@string/usb_internal_memory"

        android:layout_width="398dp" 
            android:gravity="center"
                android:layout_height="wrap_content"
            android:textSize="22dp"/>
    </TableRow>

    <TableRow android:layout_gravity="center_horizontal">
        <TextView android:layout_width="398dp"
            android:layout_height="5px"
            android:text="     "/>
        <TextView android:layout_width="4px"
            android:layout_height="5px"
            android:text="     "
            android:background="@color/title_background"/>
        <TextView android:layout_width="398dp"
            android:layout_height="5px"
            android:text="     "/>
    </TableRow>
</TableLayout>

<LinearLayout android:orientation="horizontal"
            android:layout_below="@id/usb_config_title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    >
    <ListView
        android:id="@+id/list3"
        android:layout_width="398px"
        android:layout_height="wrap_content"

        android:drawSelectorOnTop="false"
        android:scrollbarAlwaysDrawVerticalTrack="true"
    />

    <TextView android:layout_width="4px"
        android:layout_height="fill_parent"
        android:text="     "
        android:background="@color/title_background"/>
    <ListView
        android:id="@+id/list4"
        android:layout_width="398px"
        android:layout_height="wrap_content"
        android:drawSelectorOnTop="false"
        android:scrollbarAlwaysDrawVerticalTrack="true"
    />
</LinearLayout>
<include layout="@layout/buttons_bottom_with_relative"/>      
</RelativeLayout> 
```

所以我需要 id/list3 持续到按钮栏。目前 id/list3 被按钮栏覆盖。

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:gravity="bottom"
            android:layout_weight="1"
    android:id="@+id/controls" 
    android:orientation="horizontal"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:baselineAligned="false"
    style="@android:style/ButtonBar"
    android:background="@drawable/bottom_layout_selector"
>
    <Button 
        android:layout_width="100px" 
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:id="@+id/startButton"
        android:text="@string/start" 
        android:visibility="invisible"
    />

    <Button 
        android:layout_width="100px" 
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:id="@+id/stopButton"
        android:text="@string/stop" 
        android:visibility="invisible"
    />

    <Button 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:id="@+id/nextButton"
        android:text="@string/next"
        android:visibility="invisible"
    />

    <Button 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:id="@+id/resetStatistics"
        android:text="@string/reset_statistics"
        android:visibility="invisible" 
    />

    <Button 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:id="@+id/histogramSettings"
        android:text="@string/histogram_settings"
        android:visibility="invisible" 
    />

    <Button 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:id="@+id/saveButton"
        android:text="@string/save"
        android:visibility="invisible"
    />

    <Button 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:id="@+id/loadConfig"
        android:text="@string/load_config"
        android:visibility="invisible" 
    />

    <Button 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:id="@+id/saveConfig"
        android:text="@string/save_config"
        android:visibility="invisible" 
    />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:20:59.447

您是否尝试过将此添加到包含 list3 的线性布局中

```
 android:layout_below="@id/usb_config_title"
    android:layout_above="@id/controls" 
```

所以线性布局将自己定位在这两者之间。

我认为您不能将 weight 属性用于相对布局。如果您将一种布局与屏幕顶部对齐，而将一种布局与底部对齐，则将中间的布局告诉其他两个布局的上方和下方，它应该填充空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:09:09.900

您可能需要设置相对布局的 layout_weight 属性，并将整个内容设置在 LinearLayout 中。如果您可以向我们展示您目前拥有的 XML，我们肯定可以看到！

# android - 我们可以在android中使用imagemagick库吗？

> ID：12473442
> 
> 赞同：1
> 
> 时间：2012-09-18T08:48:16.030
> 
> 标签：android, imagemagick, jmagick

但是imagemagick网站上只有Jmagick JAVA接口吗？我们可以让那个 java 库包含在 android 中吗？不推荐使用 NDK，因为可能会发生内存泄漏。而且 github 中使用 ndk 的代码还没有完全完成。如果没有办法在 android 中包含 imagemagick，你能提供一个很好的 api 用于具有相同数量过滤器的图像编辑吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:37:37.833

JMagick 是 ImageMagick 的开源 Java 接口。

因此，它由一个包含接口的 Java 部分和一个包含实际实现的二进制部分组成。只要您没有找到适用于 Android / ARM 架构的预编译 JMagic 二进制文件，您就必须自己编译它。

但最终这个 JMagic 二进制文件必须由 NDK 构建，并且由于它基于 C 代码，因此可能存在内存泄漏。因此，如果您想使用 ImageMagick/JMagick，您必须接受这一点。

# android - 连接到网站并从中读取数据的最简单方法是什么

> ID：12473460
> 
> 赞同：0
> 
> 时间：2012-09-18T08:49:34.930
> 
> 标签：android, http

我想连接到一个网站并从中处理或读取数据。

1-是否可以通过 android 活动来实现，最简单的方法是什么？

2-模拟器能否模拟互联网连接。

更新：请提供示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:58:05.997

1.  这是连接服务并在android中获取数据的教程

[http://lukencode.com/2010/04/27/calling-web-services-in-android-using-httpclient/](http://lukencode.com/2010/04/27/calling-web-services-in-android-using-httpclient/)

[http://java.dzone.com/articles/invoke-webservices-android](http://java.dzone.com/articles/invoke-webservices-android)

2.如果您的系统有互联网连接并且需要在您的清单文件中提供适当的权限，那么您可以使用您的模拟器来连接服务并获取您的数据。

允许：`<uses-permission android:name="android.permission.INTERNET"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:53:41.973

1.  从站点读取数据的最简单方法是该特定站点通过您可以消费内容为您提供 API，如果它不提供 API，那么您将发出请求并解析 HTML 响应以查找您需要的内容。

2.  是的，模拟器可以模拟互联网连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T08:53:42.817

在 Android Manifest.xml 文件中创建权限，如下面的链接所示

```
 <uses-permission android:name="android.permission.INTERNET"/> 
```

然后在活动中，您可以使用 url 在您的活动中打开互联网

因此模拟器可以从互联网加载数据

# jsf - Twitter Bootstrap + JSF 2 - 活动菜单样式

> ID：12473461
> 
> 赞同：1
> 
> 时间：2012-09-18T08:49:36.187
> 
> 标签：jsf, twitter-bootstrap

```
<ul class="nav">
    <li class="active"><a href="home.xhtml">Home</a></li>
    <li><a href="about.xhtml">About us</a></li>
    <li><a href="contact.xhtml">Contact us</a></li>                         
</ul> 
```

有没有一种简单的方法可以使用 JSF 进行模板化，所以我不必在每个页面上都包含它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T12:38:45.060

您可以`#{view.viewId}`在 EL 中使用来获取当前视图 ID。

因此，这应该使其适用于所有页面：

```
<ul class="nav">
    <li class="#{view.viewId == '/home.xhtml' ? 'active' : ''}"><a href="home.xhtml">Home</a></li>
    <li class="#{view.viewId == '/about.xhtml' ? 'active' : ''}"><a href="about.xhtml">About us</a></li>
    <li class="#{view.viewId == '/contact.xhtml' ? 'active' : ''}"><a href="contact.xhtml">Contact us</a></li>                         
</ul> 
```

如果您在 EL 范围内的某个地方有一组页面，那会更加干燥：

```
<ul class="nav">
    <ui:repeat value="#{app.pages}" var="page">
        <li class="#{view.viewId == page.viewId ? 'active' : ''}"><h:link value="#{page.title}" outcome="#{page.viewId}" /></li>
    </ui:repeat>
</ul> 
```

请注意，`<h:link>`将自动在 URL 中添加上下文路径，因此`/`在视图 ID 中添加无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T08:52:10.710

对于 DRY 解决方案，我不希望在某个地方有页面列表。

我的解决方案基于自定义组件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:composite="http://java.sun.com/jsf/composite" xmlns:c="http://java.sun.com/jsp/jstl/core" >
<composite:interface>
    <composite:attribute name="outcome" />
    <composite:attribute name="label" />
</composite:interface>

<composite:implementation>
    <li class="menuItem #{view.viewId == cc.attrs.outcome ? 'active' : ''}">
        <h:outputText value="#{cc.attrs.label}" rendered="#{view.viewId eq cc.attrs.outcome}"/>
        <h:link outcome="#{cc.attrs.outcome}" value="#{cc.attrs.label}" rendered="#{view.viewId ne cc.attrs.outcome}" />
    </li>
</composite:implementation>
</html> 
```

代码中使用：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:my="http://java.sun.com/jsf/composite/my">
...
<ul class="nav">
     <my:menuItem outcome="/home.xhtml" label="Home" />
</ul> 
```

# categories - 从 NotesView 获取所有顶级条目值

> ID：12473465
> 
> 赞同：0
> 
> 时间：2012-09-18T08:49:58.533
> 
> 标签：categories, lotus-domino, notesview

从注释视图中获取所有顶级条目值的最简单方法是什么？我发现属性“TopLevelEntryCount”返回所有类别的数量，但我也想要这些值。

迭代视图条目和列值需要太多时间。

```
Set ecl = view.Allentries
Set ve = ecl.Getfirstentry()
While Not(ve Is Nothing)
    If IsArray(ve.Columnvalues(0)) Then
        If flag = "" Then
            arr = ve.Columnvalues(0)
        Else
            arr = ArrayUnique(ArrayAppend(arr, ve.Columnvalues(0)))
        End If
    Else
        'error if arr is not already an array
        arr = ArrayUnique(ArrayAppend(arr, ve.Columnvalues(0)))
    End If

    flag = "1"
    Set ve = ecl.Getnextentry(ve)
Wend 
```

有人知道更快的方法吗？它一定不能用 LotusScript 编写，实际上我更喜欢 Java、JS 或 SSJS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T22:48:52.253

**思路一：** 可以使用 NotesViewNavigator 类，调用 getFirst() 和 getNextCategory() 方法。这应该比遍历所有条目更快。

**想法 2：** 您可以将 NotesSession.Evaluate() 与在 @DbColumn 上为视图的第一列执行 @Unique 的公式一起使用。那应该带你回来一个数组，你可以得到数组的 ubound 。公式往往很快，但 evaluate() 必须先编译它们，所以我不知道这是否会更快。这种方法的缺点是对于非常大的视图，这可能会超出公式语言的大小限制。但如果它确实被证明更快，您可以捕获异常并回退到较慢的迭代方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:36:20.887

理查德的回应是完美的！对于 java 版本，它几乎是相同的：请参阅 getNextCategory 的 Domino 帮助 下面给出的示例 ViewNavigator 确实满足了您的需求：[link here](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_EXAMPLES_GETNEXTCATEGORY_METHOD_NAV_JAVA.html)
评估方法在 java Session 中也可用

# c - 总和未正确存储

> ID：12473467
> 
> 赞同：0
> 
> 时间：2012-09-18T08:50:01.617
> 
> 标签：c, parallel-processing, cuda

这是我第二次尝试 CUDA 程序和并行开发。

我试图找出点积两个数组的原因。

例子：

给定

```
A = [1 2 3] 
B = [4 5 6]

C[0] = (1)(4) + (1)(5) + (1)(6)  
C[1] = (2)(4) + (2)(5) + (2)(6)  
C[2] = (3)(4) + (3)(5) + (3)(6) 
```

我初始化 2 个数组 A 和 B ，随机填充一个范围内的元素，然后将每个元素`A`与每个 in相乘`B`，并将乘积的总和存储在标识为 的第三个数组中`C`。我已将数组 A、B 和 C 的大小设置为 100。

这给了我 10'000 次乘法，这些乘法是我使用 100 个块和 128 个线程（由于扭曲大小）并行化的。

这是我的内核函数：

```
__global__ void kernel(float *a, float *b, float *c, const int N) {
    if( threadIdx.x < N ) 
        c[blockIdx.x] += a[blockIdx.x] * b[threadIdx.x];
} 
```

这是我的推理，因为必须累积聚合，`C`其中的索引与枢轴索引相同，`A`因此我可以重用`blockidx.x`并且“应该”正常工作；但事实并非如此。

我的怀疑是`C`当线程更改时索引被清除或不共享，但我真的不确定这就是我寻求建议的原因。

这是完整的代码，为了简短起见，我明确避免使用`HANDLE_ERROR`函数包装器

```
#include <stdio.h>
#include <cuda.h>
#include <time.h>

#define M 100

__global__ void kernel(float *a, float *b, float *c, const int N) {
    if(threadIdx.x < N) 
        c[blockIdx.x] += a[blockIdx.x] * b[threadIdx.x];
}

void init_array(float*, const int);
void fill_array(float*, const int, const float); 
void print_array(float*, const int, *char);

int main (void) {
    srand( time(NULL) );

    float a[M], b[M], c[M] = { 0.0 };
    float *dev_a, *dev_b, *dev_c;
    const int S = sizeof(float) * M;

    init_array(a, M);
    init_array(b, M);

    print_array(a, M, "a");
    print_array(b, M, "b");
    print_array(c, M, "c");

    cudaMalloc((void**)&dev_a, S);
    cudaMalloc((void**)&dev_b, S);
    cudaMalloc((void**)&dev_c, S);

    cudaMemcpy(dev_a, a, S, cudaMemcpyHostToDevice);
    cudaMemcpy(dev_b, b, S, cudaMemcpyHostToDevice);
    cudaMemcpy(dev_c, c, S, cudaMemcpyHostToDevice);

    kernel<<<M, M + 28>>>(dev_a, dev_b, dev_c, M);

    cudaMemcpy(c, dev_c, S, cudaMemcpyDeviceToHost);

    cudaFree(dev_a);
    cudaFree(dev_b);
    cudaFree(dev_c);

    print_array(c, M, "c");

    return 0;
}

void init_array(float *a, const int N) {
   int i;  
   for(i=0; i<N; i++)
       a[i] = rand() % M + 1;
}

void fill_array(float *a, const int N, const float v) {
   int i;  
   for(i=0; i<N; i++)
       a[i] = v;
}

void print_array(float *a, const int N, char *d) {
   int i;  
   for(i=0; i<N; i++)
       printf("\n%s[%d]: %f",d, i, a[i]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:16:06.033

使用 cuBLAS 会简单得多：`cublasSdot()`例程执行您要查找的操作（即点积两个向量）。

这并不能帮助您学习如何编写并行代码或在 CUDA 中工作，但它会给您带来良好的性能，并且会针对不同的 GPU 进行优化。最佳实践是尽可能使用库，除非有充分的理由不这样做。

另一个答案指出，您需要使用原子或其他方法来避免竞争。一种更有效的方法是让每个线程计算部分结果，进行逐块归约（参见 SDK 中的示例），最后让每个块中的一个线程在全局内存中进行原子加法以累积结果来自不同的块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:03:11.177

将结果累加到 C 中时，您会遇到互斥。您不能让多个线程更新同一个数组索引。解决它的一种方法是使用原子指令，在您的情况下是 atomicAdd(..)。

这不起作用的原因是块 0 中的线程 0 和 1 更新了 C 数组中的相同位置。你得到一个比赛条件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-18T09:49:13.010

您的代码将多个值写入全局内存中的同一位置，而无需同步和考虑。您可以使用某种关键部分来修复它。这是执行您想要的代码：

```
#include <stdio.h>
#include <cuda.h>
#include <time.h>

#define M 5

__global__ void kernel(float *a, float *b, float *c, const int N) {
    __shared__ int lock;
    lock=0u;
    if(threadIdx.x < N) {
        __syncthreads();
        float mult = a[blockIdx.x] * b[threadIdx.x];

        int leaveLoop = 0;
        while (leaveLoop==0) {
            if (atomicExch(&lock, 1u) == 0u) {
                //critical section
                c[blockIdx.x] += mult;
                leaveLoop = 1;
                atomicExch(&lock,0u);
            }
        }
        __syncthreads();
    }
}

void init_array(float *a, const int N) {
    int i;  
    for(i=0; i<N; i++)
        a[i] = rand() % M + 1;
}

void fill_array(float *a, const int N, const float v) {
    int i;  
    for(i=0; i<N; i++)
        a[i] = v;
}

void print_array(float *a, const int N, char *d) {
    int i;  
    for(i=0; i<N; i++)
        printf("\n%s[%d]: %f",d, i, a[i]);
}

int main (void) {
    srand( time(NULL) );

    float a[M], b[M], c[M] = { 0.0 };
    float *dev_a, *dev_b, *dev_c;
    const int S = sizeof(float) * M;

    init_array(a, M);
    init_array(b, M);

    print_array(a, M, "a");
    print_array(b, M, "b");
    print_array(c, M, "c");

    cudaMalloc((void**)&dev_a, S);
    cudaMalloc((void**)&dev_b, S);
    cudaMalloc((void**)&dev_c, S);

    cudaMemcpy(dev_a, a, S, cudaMemcpyHostToDevice);
    cudaMemcpy(dev_b, b, S, cudaMemcpyHostToDevice);
    cudaMemcpy(dev_c, c, S, cudaMemcpyHostToDevice);

    kernel<<<M, M + 28>>>(dev_a, dev_b, dev_c, M);

    cudaMemcpy(c, dev_c, S, cudaMemcpyDeviceToHost);

    cudaFree(dev_a);
    cudaFree(dev_b);
    cudaFree(dev_c);

    print_array(c, M, "c");

    return 0;
} 
```

为了实现聚合数组乘法之和的目标，我建议您尽可能使用@Tom 提出的建议。我编写此代码是因为有时使用您的代码而不是外部库更容易。

# c++ - 包含相同类类型实例的类

> ID：12473468
> 
> 赞同：0
> 
> 时间：2012-09-18T08:50:04.930
> 
> 标签：c++, oop

我需要在类中包含同一类的指针（类似于链接列表，包含指向下一个链接的指针）。我的要求是这样的：

```
 class A
    {
        class A* child;
    } 
```

我想确保 A->child->child 始终为 NULL 并且没有人可以更改它。（确保链接列表不超过两个节点）。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T08:53:43.473

任何这样的限制都会很尴尬（如果可能的话）。我会改用一个固定长度的数组：

```
A* l[3]; 
```

如果您需要防止切片，或者只是

```
A l[3]; 
```

除此以外。

您可以通过以下方式以编程方式强制执行该限制：

```
class A
{
   A* child;
public:
   void addChild(A* newChild)
   {
       if ( child == NULL )
           child = newChild;
       else if ( child->child == NULL )
           child->child = newChild;
       else 
           throw std::exception("list is already at full capacity");
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:58:03.540

它无法完成，无论如何都不使用单个链接。如果您有一个指向“父”的链接，则可以通过将成员变量`child`和`parent`成员变量设为私有来完成，然后具有特殊的访问功能，以确保您不能向链中的第一个对象添加两个以上的链接。

我建议使用“父”链的原因是因为您可以强制链中的第一个对象检查它的`child`链，但如果您可以访问例如链中的最后一个对象，您可以在该链中再添加*两个*子对象。

# flash - 在浏览器中播放 4K 视频

> ID：12473469
> 
> 赞同：0
> 
> 时间：2012-09-18T08:50:06.283
> 
> 标签：flash, video, browser

在浏览器中播放 4K 视频的最佳解决方案是什么？我也想翻译和缩放它。

我尝试了 HTML5、FlowPlayer 和 Quicktime，但都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:06:48.807

Youtube 使用 Flash 执行此操作。

大多数时候，流媒体中的 4k 是一个笑话，如果您想要质量，请提高 1080p 的比特率。与 4k 上的相同比特率相比，它将为您提供更好的结果。

# android - 我对 GCM 注册感到困惑

> ID：12473473
> 
> 赞同：0
> 
> 时间：2012-09-18T08:50:17.047
> 
> 标签：android, google-cloud-messaging

我是 Android GCM 的新手，我下载了 Google 提供的 appengine 演示应用程序。我在查看服务器端，首先我认为 servlet（HomeServlet、RegisterServlet 等）是 GCM 的一部分，但是当我查看客户端时，我首先看到它被称为 GCMRegistrar.register，如果它成功，那么一个 post 请求被发送到服务器端的 register servlet。

所以我想这些 servlet 应该被我的服务器应用程序替换（它当前在没有 GCM 的情况下运行），我只需要在我的客户端调用 GCMRegistrar.register 来注册设备。我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:30:17.890

> 所以我想这些 servlet 应该被我的服务器应用程序替换（它目前在没有 GCM 的情况下运行）

正确的。

> 我只需要在客户端调用 GCMRegistrar.register 即可注册设备。

也正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:38:05.827

这是实施 GCM 的分步概述。它包括在设备上注册，然后发送到您的服务器进行存储（注册 id），最后从您的服务器向 GCM 发送通知。

[http://fryerblog.com/post/30057483199/implementing-push-notifications-with-gcm](http://fryerblog.com/post/30057483199/implementing-push-notifications-with-gcm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:38:56.690

这也是一个简单的教程，逐步实现

[http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/](http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/)

# linux - 用于从 FTP 下载最新文件的 shell 脚本

> ID：12473475
> 
> 赞同：3
> 
> 时间：2012-09-18T08:50:19.557
> 
> 标签：linux, shell, ftp

我是第一次编写 shell 脚本，我想从 FTP 下载最新的创建文件。我想下载特定文件夹的最新文件。下面是我的代码。但它正在下载文件夹中的所有文件，而不是最新的文件。

```
ftp -in ftp.abc.com << SCRIPTEND
user xyz xyz
binary
cd Rpts/
mget ls -t -r | tail -n 1
quit
SCRIPTEND 
```

请帮帮我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:27:36.590

尝试使用 wget 或 lftp 实用程序，它比较文件时间/日期和 AFAIR，其目的是 ftp 脚本。如果可能，切换到 ssh/rsync，你可以在这里阅读一些关于 lftp 而不是 rsync 的信息：

[https://serverfault.com/questions/24622/how-to-use-rsync-over-ftp](https://serverfault.com/questions/24622/how-to-use-rsync-over-ftp)

可能最简单的方法是将服务器端的最后一个版本链接到“当前”，并始终指向文件。如果你不是服务器的管理员，你需要列出所有文件的日期/时间，获取信息，解析它，决定哪个是最新的，同时服务器上的状态可以改变，你会发现自己在更多复杂的解决方案比它的价值。

关键是，“ls”以某种方式对输出进行排序，时间可能不是默认值。有一些开关可以根据修改时间对其进行排序，但是即使服务器在 ls -t 上以 OK 响应，您也不能确定它是否真的支持排序，它可以忽略所有开关并始终返回相同的列表，这就是为什么管理员通常使用“当前”链接 (ln -s)。如果没有“当前”，为确保您拥有正确的文件，无论如何您都需要解析列表（ ls -al ）。

[http://www.catb.org/esr/writings/unix-koans/shell-tools.html](http://www.catb.org/esr/writings/unix-koans/shell-tools.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:17:17.957

看代码，行

`mget ls -t -r | tail -n 1`

不按你的想法做。它实际上抓取了 的所有输出，`ls -t`然后`tail`处理`mget`. 您可以将此行替换为

`mget $(ls -t -r | tail -n 1)`

但我不确定是否`ftp`会支持这样的电话......

尝试使用除`ftp`. 例如，`curlftpfs`可在[curlftpfs.sourceforge.net](http://curlftpfs.sourceforge.net/)上找到一个很好的选择，因为它允许您将 FTP 挂载到一个目录，就好像它是一个本地文件夹一样，然后对那里的文件运行不同的命令（包括 find、grep 等） . [看看这篇文章](http://www.debian-administration.org/articles/594)。

这样，由于输出来自本地命令，您可以更确定`ls -t`返回正确排序的列表。

顺便说一句，它的使用`ls -t | head -1`比`ls -t -r | tail -1`. 它们产生相同的结果，但是当您可以抓住头部时，为什么要反转并从尾部抓住:)

如果您使用 curlftpfs，那么您的脚本将是这样的（假设服务器 ftp.abc.com 和用户 xyz，密码为 xyz）。

```
mkdir /tmp/ftpsession
curlftpfs ftp://xyz:xyz@ftp.abc.com /tmp/ftpsession
cd /tmp/ftpsession/Rpts
cp -Rpf $(ls -t | head -1) /your/destination/folder/or/file
cd -
umount /tmp/ftpsession 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-10T07:34:13.353

我的解决方案是这样的：

```
curl 'ftp://server.de/dir/'$(curl 'ftp://server.de/dir/' 2>/dev/null | tail -1 | awk '{print $(NF)}') 
```

# php - 如果 Child 用 php 为空，则删除节点？

> ID：12473477
> 
> 赞同：0
> 
> 时间：2012-09-18T08:50:23.333
> 
> 标签：php, xml

如果特定子节点为空，我希望能够删除节点树，但似乎做错了什么？

这是我得到的：

```
$xml = new DOMDocument();
$xml->loadXML('<?xml version="1.0" encoding="ISO-8859-1"?>
<data>
  <game id="1">
    <opponent>Michael</opponent>
    <oppid>1</oppid>
  </game>
  <game id="2">
    <opponent>Trish</opponent>
    <oppid>55</oppid>
  </game>
  <game id="3">
    <opponent/>
    <oppid>24</oppid>
  </game>
  <game id="4">
    <opponent>Betty</opponent>
    <oppid>12</oppid>
  </game>
</data>

');

echo "<xmp>OLD \n". $xml->saveXML() ."</xmp>";

$xpath = new DOMXpath($xml);
foreach($xpath->query('//game') as $node) {
    if($node->opponent == ''){
        echo 'Test<br>';
        $node->parentNode->removeChild($node);
    }

}

echo "<xmp>NEW \n". $xml->saveXML() ."</xmp>"; 
```

我打印出 4 个“测试”，在新的 xmp 中我什么也没得到？我究竟做错了什么？

请提前帮助和感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:01:45.610

将您的条件更改`if`为以下内容：

```
if($node->opponent->nodeValue == '') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:13:18.150

```
<?php
$xml = new DOMDocument();
$xml->loadXML('<?xml version="1.0" encoding="ISO-8859-1"?>
<data>
<game id="1">
    <opponent>Michael</opponent>
    <oppid>1</oppid>
</game>
<game id="2">
    <opponent>Trish</opponent>
    <oppid>55</oppid>
</game>
<game id="3">
    <opponent/>
    <oppid>24</oppid>
</game>
<game id="4">
    <opponent>Betty</opponent>
    <oppid>12</oppid>
</game>
</data>

');

echo "<xmp>OLD \n". $xml->saveXML() ."</xmp>";

$opNodes = $xml->getElementsByTagName('opponent');
foreach($opNodes as $node) {
    $innerHtml = trim($node->nodeValue);
    if(empty($innerHtml)){
        $gameNode = $node->parentNode;
        $gameNode->parentNode->removeChild($gameNode);
    }
}

echo "<xmp>NEW \n". $xml->saveXML() ."</xmp>"; 
```

我想知道为什么它不起作用......现在它起作用了。

# java - 我应该如何转义 CSV 文件中的逗号和语音标记，以便它们在 Excel 中工作？

> ID：12473480
> 
> 赞同：119
> 
> 时间：2012-09-18T08:50:36.623
> 
> 标签：java, excel, csv, special-characters

我正在生成一个 CSV 文件（由逗号而不是制表符分隔）。我的用户很可能会通过双击在 Excel 中打开 CSV 文件。我的数据可能包含逗号和语音标记，因此我将按如下方式转义。

```
Reference, Title, Description
1, "My little title", "My description, which may contain ""speech marks"" and commas."
2, "My other little title", "My other description, which may also contain ""speech marks"" and commas." 
```

据我所知，这一直是这样做的方式。这是我的困惑：当我在 Excel 2010 中打开此文件时，我的转义不受尊重。语音标记出现在工作表上，逗号导致新列。

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2012-09-18T08:50:36.623

我们最终找到了这个问题的答案。

如果列值前面没有空格，Excel 只会尊重逗号和语音标记的转义。所以生成这样的没有空格的文件......

```
Reference,Title,Description
1,"My little title","My description, which may contain ""speech marks"" and commas."
2,"My other little title","My other description, which may also contain ""speech marks"" and commas." 
```

...解决了问题。希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2014-02-13T09:01:46.777

如果您认为这是随机的，以下是规则。可以根据这些规则创建效用函数。

1.  如果该值包含逗号、换行符或双引号，则返回的字符串值应包含在双引号中。

2.  值中的任何双引号字符都应使用另一个双引号进行转义。

3.  如果该值不包含逗号、换行符或双引号，则应原样返回 String 值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-26T14:17:16.230

根据 Yashu 的说明，我编写了以下函数（它是 PL/SQL 代码，但它应该很容易适应任何其他语言）。

```
FUNCTION field(str IN VARCHAR2) RETURN VARCHAR2 IS
    C_NEWLINE CONSTANT CHAR(1) := '
'; -- newline is intentional

    v_aux VARCHAR2(32000);
    v_has_double_quotes BOOLEAN;
    v_has_comma BOOLEAN;
    v_has_newline BOOLEAN;
BEGIN
    v_has_double_quotes := instr(str, '"') > 0;
    v_has_comma := instr(str,',') > 0;
    v_has_newline := instr(str, C_NEWLINE) > 0;

    IF v_has_double_quotes OR v_has_comma OR v_has_newline THEN
        IF v_has_double_quotes THEN
            v_aux := replace(str,'"','""');
        ELSE
            v_aux := str;
        END IF;
        return '"'||v_aux||'"';
    ELSE
        return str;
    END IF;
END; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-12T10:19:09.403

单引号也可以正常工作，即使没有转义双引号，至少在 Excel 2016 中：

```
'text with spaces, and a comma','more text with spaces','spaces and "quoted text" and more spaces','nospaces','NOSPACES1234' 
```

Excel 会将其放在 5 列中（如果您在“文本到列”向导中选择单引号作为“文本限定符”）

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-10-09T09:48:01.430

即使在双引号之后，我也遇到了这个问题几天。

用逗号替换了管道分隔符，然后一切正常。

# java-me - 在 LWUIT 中处理软键操作

> ID：12473484
> 
> 赞同：1
> 
> 时间：2012-09-18T08:50:55.733
> 
> 标签：java-me, lwuit, keypress, nokia

我正在为 Nokia C2 Mobile 开发应用程序，我想处理键盘的软键

附上我要处理的按钮的图像

我试过 Handle KeyPressed 并且当我按下这个按钮时返回的键码是 0

请问我该怎么办？

![在此处输入图像描述](../Images/d773b92ea768e0cc47ecca5eacc75743.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:59:07.710

指向的按钮是`Right Soft Key (RSK)`。在那张照片中，他们`added commands GoTo, Menu and Names`。就像那样，将命令添加到表单中。在命令侦听器中键入代码以处理该事件。

# install4j - 如何在“开始菜单项”中添加工具提示

> ID：12473486
> 
> 赞同：1
> 
> 时间：2012-09-18T08:51:02.817
> 
> 标签：install4j

我通过“添加操作->“桌面集成”->“创建开始菜单条目”添加了“开始菜单”

我想添加工具提示（描述）这个菜单如下

![在此处输入图像描述](../Images/12688e8844e27a05fb9b5ebc7b75cd2b.png)

如何在“开始菜单”中添加它

如果没有，如何通过自定义代码进行“开始菜单条目”

# java - 计算基于 java 的服务器的内部响应时间

> ID：12473487
> 
> 赞同：1
> 
> 时间：2012-09-18T08:51:05.563
> 
> 标签：java, testing, logging, web, log4j

我需要在压力测试的背景下计算内部响应时间。我可以使用从不同服务器运行的 pylot 进行负载测试。我如何计算不包括网络延迟的内部响应时间。我可以从同一台机器上运行 pylot，但这似乎不是一个好主意。我可以考虑使用 log4j 等日志记录工具以及分别接收和发送请求和响应的日志时间。

还有其他好的方法可以做到这一点......或者人们目前如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:54:39.743

我通常会创建一个 servlet 过滤器或类似的过滤器，在分派到 servlet 之前捕获服务器中的请求/响应，并记录 servlet 所用的时间量。

在我之前做过的地方，我已经在 servlet 过滤器中记录了统计数据并计算了最小/最大/平均值，并在另一个 servlet 中或通过 JMX 呈现了这些信息 - 它使生产问题诊断变得非常容易。我还使用过滤器来记录请求和响应，因此日志文件会记录每次访问。

另一种（粗略的？）方法是通过 ping 或类似方法记录平均网络延迟，然后从记录的客户端时间中减去该延迟。不要忘记减去请求*和*响应。然而，这是非常粗略的，并且没有考虑（例如）服务器端的流解压缩/编组等。

# php - 在 Wordpress 中对自定义字段进行地理编码

> ID：12473488
> 
> 赞同：-1
> 
> 时间：2012-09-18T08:51:05.970
> 
> 标签：php, wordpress, google-maps, geocoding

我有数百篇带有地址自定义字段的帖子，有时该字段是摘录。我根据自定义帖子类型从这些字段中提取地址，以便对其进行整理。然后我希望在functions.php中创建一个函数，我可以将此地址传递给并生成地图。

我环顾四周，并尝试了以下代码，但它仅适用于 Chrome，我做错了什么？它在 FF 和 IE 中不起作用。

```
function make_map($address) {

    $google_api_key = 'API';

    if($address): ?>
    <script src="http://maps.google.com/maps?file=api&amp;v=3&amp;sensor=false&amp;key=<?php echo $google_api_key; ?>" type="text/javascript"></script>
    <div id="map_canvas" style="width: 250px; height: 250px"></div>
    <script type="text/javascript">

    function showAddress(address) 
    {
        var map = new GMap2(document.getElementById("map_canvas"));
        var geocoder = new GClientGeocoder();
        geocoder.getLatLng(
            address,
            function(point) 
            {
                if (!point) 
                {
                alert(address + " not found");
                } 
                else 
                {
                map.setCenter(point, 13);
                var marker = new GMarker(point);
                map.addOverlay(marker);
                }
            }
        );
    }
    showAddress("<?php echo $address; ?>");
    </script>
    <br>
    <?php endif;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:35:14.090

这不应该在任何浏览器中工作。您使用的是 Google Maps API v2 语法，但包括 Google Maps API v3。

请注意，Google Maps API v2 已弃用，可能会在 2013 年 5 月停止工作。

# php - php curl_exec 函数挂起并以错误 500 结束

> ID：12473489
> 
> 赞同：0
> 
> 时间：2012-09-18T08:51:08.330
> 
> 标签：php, curl

我有一个 curl 请求，它在我的本地主机中运行良好，我已将它上传到服务器，但它挂起并以错误 500 内部服务器错误结束。如果删除该行`echo $output = curl_exec($ch);`它工作正常。

```
$url = "https://someserver.com/api/";
$username = "some_user";
$password = "some_apss";
if(!extension_loaded('curl')){
    die("Curl extension not loaded");
}
if(!function_exists('curl_init')){
    die("curl_init not found");
}

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);     
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2); 
echo $output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch);` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:53:06.560

这是服务器端的问题。不是这个脚本的错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:12:25.527

那是我的服务器端口的问题。那个港口被关闭了。打开端口后，它的工作完美。谢谢你们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:01:06.867

可能使用脚本安装在服务器上的 curl 扩展未使用 ssl 支持编译。在服务器上执行以下代码并回传结果：

```
<?php
    $version = curl_version();
    $ssl_supported= ($version['features'] & CURL_VERSION_SSL);
    echo $ssl_supported == CURL_VERSION_SSL; 
```

它应该输出 1。如果不是，您必须为 curl 安装 ssl 支持

# ios - 有什么方法可以检测 iOS 6 上的漫游状态吗？

> ID：12473490
> 
> 赞同：14
> 
> 时间：2012-09-18T08:51:13.347
> 
> 标签：ios, jailbreak, ios6, roaming

我的应用程序使用以下方法检测 iOS 4 和 5 中的漫游。

```
NSString *carrierPListSymLinkPath = @"/var/mobile/Library/Preferences/com.apple.carrier.plist"; 
NSString *operatorPListSymLinkPath = @"/var/mobile/Library/Preferences/com.apple.operator.plist"; 

NSFileManager *fm = [NSFileManager defaultManager]; 
NSError *error = nil; 

NSString *carrierPListPath = [fm destinationOfSymbolicLinkAtPath:carrierPListSymLinkPath error:&error];     

NSString *operatorPListPath = [fm destinationOfSymbolicLinkAtPath:operatorPListSymLinkPath error:&error];

return (![operatorPListPath isEqualToString:carrierPListPath]); 
```

但是这段代码在iOS6上总是返回false（即使我没有漫游，它总是返回false），我认为它可能是Apple更改了plist文件位置，有没有人面临同样的问题，有人可以帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T14:49:40.333

这是我从苹果那里得到的答案：

“确实。不幸的是，这些文件从未被记录为公共 API，因此从未打算被第三方应用程序使用。在很多情况下，这些限制是由 iOS 沙箱技术上或由 App Review 在管理上强制执行的。然而，这两个过程都不​​是完美的，有时应用程序最终会做他们不应该做的事情。不幸的是，当执行改进时，这会使这些应用程序处于困境，就像在这种情况下发生的那样。

至于直接的解决方法，真的没有。iOS 上唯一的公共电话 API 由 Core Telephony 框架提供。它的 CTTelephonyNetworkInfo 类为您提供有关用户的“家庭”蜂窝服务器的信息，而不是有关他们正在漫游的网络的信息。”

他们建议您使用地理 IP 检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:35:14.227

自 iOS6 beta 1 以来，这里面临同样的问题，因为该版本*/var/mobile/Library/Preferences/com.apple.operator.plist 符号*链接不再可逆。

现在还没有其他公开的设备方式，与此同时，唯一的解决方案是通过 geo-ip 检查 ip，正如 Trausti Thor 所说，或者如果您正在为单个运营商开发应用程序，则检查**ip 类。**

# mobile - Facebook 和在支持移动设备的网站上打开移动应用程序而不是浏览器窗口的共享按钮？

> ID：12473493
> 
> 赞同：8
> 
> 时间：2012-09-18T08:51:42.690
> 
> 标签：mobile, share, social-networking, mobile-application

Android 网络电话（可能还有其他手机操作系统）的一大缺陷：您正在浏览某个网站，并想使用该网站的嵌入式共享按钮来表示 Twitter。您希望使用嵌入式 Twitter 共享，因为它会根据网站的设计方式预先填充推文：即，它具有页面标题和链接，可能还有相关的 Twitter 主题标签。如果您要使用移动浏览器的共享功能，您只能获得链接，并且必须尝试输入标题并猜测相关的主题标签——这并不理想。其他社交媒体共享的情况也是如此，例如 Facebook。

因此，从上述内容中，您可以理解为什么用户更喜欢使用给定网站自己的嵌入式共享功能，而不是内置在移动浏览器中的共享功能。

但是，如果用户单击该站点的嵌入式社交媒体共享按钮，则会为该社交媒体打开一个新的浏览器窗口。理想情况下，这不会发生，因为典型用户不会使用移动浏览器登录这些社交工具，并且由此产生的弹出式共享在移动小屏幕上使用起来很笨拙。相反，理想情况下，您将单击该站点的嵌入式共享按钮，它会尝试至少在您的手机上打开官方推特（或其他）应用程序。这是理想的，因为用户倾向于使用应用程序来使用他们的社交媒体，因此已经登录。此外，这样的应用程序显然针对移动使用进行了优化，因此不会那么笨重。

然而，这显然不存在......我说的对吗？

也就是说，作为一名网页设计师，我无法在我嵌入的 Twitter 和 Facebook 分享按钮上做任何事情来提示手机用户使用官方应用程序进行分享（而不是通过手机浏览器）。那正确吗？

谢谢，德里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-01T08:15:03.313

至少在我的 iPhone 上，twitter url-scheme 确实有效。
以下打开推特应用程序：

`twitter://post?message=hello%20world`

而且 facebook 是 fb://
没有在 android 上测试过。
（通过：[http](http://wiki.akosma.com/IPhone_URL_Schemes) ://wiki.akosma.com/IPhone_URL_Schemes ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:38:36.510

打开一个弹出框（不是窗口）怎么样 - 当我们单击链接以共享我们所在的 URL 站点/页面时，无需通过移动浏览器？只是一个弹出框。

你认为有可能吗？或者任何社交媒体链接会在浏览器中自动打开？

# javascript - 为什么反序列化我的目标数组的序列化副本可以解决内存泄漏问题？

> ID：12473495
> 
> 赞同：0
> 
> 时间：2012-09-18T08:51:52.933
> 
> 标签：javascript, json, algorithm, node.js

我有 2 个函数用于去重复和搜索数组。这是微不足道的东西。我注意到在某些情况下，对于包含超过 100 个元素的数组，在使用这些函数时会发生巨大的内存泄漏，并且我的 node.js javascript 应用程序会死掉。

我的数组 arr 可能有什么“错误”，这意味着反序列化它的序列化版本可以修复内存泄漏？为什么反序列化我的目标数组的序列化副本会修复内存泄漏问题？

可能相关：

arr 是通过对 concat 的几十次调用构建的。

搜索功能：

```
function findObjInArray(arr, obj, lookupKeyChain){
    var tmpObj = undefined;
    for(var i = 0; i < arr.length; i++){
        tmpObj = arr[i];
        for(var j = 0; j < lookupKeyChain.length; j++){
            tmpObj = tmpObj[lookupKeyChain[j]]
            if(!tmpObj){
                break;
            }else if(j==lookupKeyChain.length-1){
                if(tmpObj==obj){
                    return arr[i];
                }
            }
        }
    }
    return undefined;
} 
```

重复数据删除功能：

```
function combineProducts(productList, idKey){
    var deDupedProducts = []
    for(var i = 0; i < productList.length; i++){
        var precedent = findObjInArray(deDupedProducts, productList[i][idKey], [idKey]);
        if(precedent){
            //just add tag data to precedent
            for(var j = 0; j < productList[i].tags.length; j++){
                precedent.tags.push(productList[i].tags[j]);
            }
        }else{
            deDupedProducts.push(productList[i]);
        }
    }
    return deDupedProducts;
} 
```

arr 中的结构示例：

```
 [
        {
            "price": "$9.99",
            "name": "Big Widgets",
            "tags": [
                {
                    "tagClass": "Category",
                    "tagName": "On Sale"
                }
            ]
        },
        {
            "price": "$5.00",
            "name": "Small Widgets",
            "tags": [
                {
                    "tagClass": "Category",
                    "tagName": "On Sale"
                },

            ]
        },
        ...
    ] 
```

导致内存泄漏的调用：

```
combineProducts(
    arr,
    "name"
) 
```

解决问题并给了我正确结果的电话：

```
combineProducts(
    JSON.parse(JSON.stringify(arr)),
    "name"
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:13:35.910

Unrelated, but an object-based algorithm is much more efficient (and concise) for large lists than your ever-expanding linear search.

```
function combineProducts(productList, idKey) {
    var lookup = {};

    productList.forEach(function(product) {
        var precedent = lookup[product[idKey];

        if (precedent) {
            precedent.tags = precedent.tags.concat(product.tags);
        }
        else {
            lookup[product[idKey]] = product;
        }
    });

    return Object.keys(lookup).map(function(idValue) {
        return lookup[idValue];
    });
} 
```

Only difference to your function is that ordering is not preserved (though if the data was ordered by the `idKey` to start with, a single-pass algorithm would be even better).

# mysql - 由于外键无法创建表

> ID：12473498
> 
> 赞同：1
> 
> 时间：2012-09-18T08:52:02.420
> 
> 标签：mysql, database, foreign-keys, innodb

我似乎无法在这里创建第三个表。这是怎么回事？我收到通用无法创建表 errno 150 消息。似乎与外键有关

*餐桌食谱*

```
CREATE TABLE recipe(
    recipe_id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    name VARCHAR(40) NOT NULL,
    description VARCHAR(40) NOT NULL,
    PRIMARY KEY (recipe_id)
)
ENGINE=INNODB CHARACTER SET utf8 COLLATE utf8_swedish_ci; 
```

*表成分类型*

```
CREATE TABLE ingredient_type(
    ingredient_type_id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    ingredient_type VARCHAR(40) NOT NULL,
    description VARCHAR(40) NOT NULL,
    PRIMARY KEY (ingredient_type_id)
)
ENGINE=INNODB CHARACTER SET utf8 COLLATE utf8_swedish_ci; 
```

*餐桌配料*

```
CREATE TABLE ingredient(
    ingredient_id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    ingredient_type_id INT(10) NOT NULL,
    name VARCHAR(40) NOT NULL,
    brand_name VARCHAR(40) NOT NULL,
    FOREIGN KEY (ingredient_type_id) REFERENCES ingredient_type (ingredient_type_id),
    PRIMARY KEY (ingredient_id)
)
ENGINE=INNODB CHARACTER SET utf8 COLLATE utf8_swedish_ci; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:26:03.510

> Corresponding columns in the foreign key and the referenced key must have similar internal data types inside InnoDB so that they can be compared without a type conversion. *The size and sign of integer types must be the same.* The length of string types need not be the same. For nonbinary (character) string columns, the character set and collation must be the same.
> 
> **Source: [FOREIGN KEY Constraints in the MySQL manual](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)**

The problem in your code is that `ingredient_type.ingredient_type_id` is `unsigned`, but `ingredient.ingredient_type_id` is not.

# struts2 - Struts 分页

> ID：12473501
> 
> 赞同：3
> 
> 时间：2012-09-18T08:52:13.963
> 
> 标签：struts2, struts

我们在我们的项目中使用了struts，spring和hibernate，我想在struts中使用分页，我们可以使用hibernate进行分页，有人知道我们如何在struts中做到这一点吗？

谢谢

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T09:44:57.550

您需要使用外部 jar，您可以使用 [Struts Jquery Plugin](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)，它非常好用且简单；
另一种解决方案是[Displaytag](http://displaytag.sourceforge.net/1.2/)
祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:35:35.820

Struts2 在这里无能为力，您只需要从 JSP 页面传递某些值并使用 hibernate 来获取这些记录。例如

您可以获得将要显示的记录总数以及每页需要显示的记录数

Total Record=100/10（每页的记录数）=10 这表明您需要在10页中显示数据。其次，您需要传递 start-index 和 offset 以从数据库中获取该数量的记录。

要显示记录，您可以使用 Struts2 迭代器标记。我希望这会给你一些想法，如果你需要任何例子，可以提供，但我相信自己尝试总是好的。

或者可以使用带有分页功能的显示标签。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T10:22:06.357

带有 struts 的 jquery 存在错误/问题或其他问题。当您渲染第二页然后单击浏览器返回时，再次访问该页面后显示错误的悬停。

正如 Umesh Awasthi 所说，你在行动中实现逻辑。这使您可以以最优化的方式以您想要实现的方式处理分页。

仅获取那些必要的记录。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T12:55:49.823

您可以使用struts中的display-tag库在分页视图中显示记录。它只需要显示pojo列表。它会自动在分页中显示该pojo。您可以设置它的属性，如页面大小等

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-20T12:55:32.600

在我早期的项目中，我使用了带有 hibernate 的 struts。我们已经实现了分页，但是以一种棘手的方式。我们没有在前端或服务器端使用任何第三方库。我们基本上做了什么，在 jsp 页面中，我们有目标页码的隐藏字段，每页没有记录。在点击分页按钮/页码时，我们实际上提交了页面，在休眠级别上，我们正在查询，以便使用这些隐藏值获取所需的记录。在整个应用程序中都使用了相同的操作以进行分页。

# jquery - JQuery 背景淡入淡出

> ID：12473504
> 
> 赞同：0
> 
> 时间：2012-09-18T08:52:28.183
> 
> 标签：jquery, html, css

我试过用这个代码[淡入淡出背景图像和jQuery？](https://stackoverflow.com/questions/5533171/fade-background-image-in-and-out-with-jquery)这太棒了。任何人都可以帮助快速调整，因为我是 jquery 的初学者。

我想要同样的（褪色旋转背景图像）。我调整了代码中的时间，使旋转很好而且很慢（8 秒），但这会延迟第一个图像的出现。是否可以让第一张图像立即出现然后缓慢旋转？

谢谢你，艾米

**更新：** 感谢大家的帮助。这是我的修复，以防它有用。请原谅我之前没有使用过 jsfiddle 或 stackoverflow。我发现在常规浏览器（在 jsfiddle 之外）上运行页面时，当我希望旋转速度非常慢时，加载第一张图像会有延迟。即在图像加载之前，屏幕只是黑了很长时间。

我（想我已经）通过在 jsquery 脚本之外添加一个新图像来解决这个问题，该脚本在旋转背景开始之前首先加载。

我在这里包含了脚本 - [http://jsfiddle.net/aha56/9CHKE/](http://jsfiddle.net/aha56/9CHKE/) 这只是对这个[http://jsfiddle.net/RnqQL/109/](http://jsfiddle.net/RnqQL/109/)的一个小调整，我在这里找到了[淡入淡出背景图像jQuery？](https://stackoverflow.com/questions/5533171/fade-background-image-in-and-out-with-jquery)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:18:35.263

Instead of delay fade in you need to delay fade out? like this that you want?

```
$(this).delay(3000 * index).fadeIn().fadeOut(3000); 
```

hope it will help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:05:36.193

你需要这样吗？也许它会帮助你。请查看[演示](http://jsfiddle.net/muthusamy/RyGKV/156/)

# java - Java：使用掩码检查二进制值然后获取整数

> ID：12473509
> 
> 赞同：2
> 
> 时间：2012-09-18T08:52:48.933
> 
> 标签：java, bit-manipulation, bitmask

这是我的问题：

我有一个二进制值

```
101001 
```

和一个面具

```
011100 
```

我想比较它们并将结果作为整数。在这种情况下，这将给出：

```
 1 **010** 01
 0 **111** 00

= 010 => 2 
```

我的第一个想法是处理一个字符数组。但我想知道是否有更好的方法可以在 Java 中实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T08:57:09.787

> 我想比较它们并将结果作为整数

假设您的意思是“掩码”而不是“比较”：

```
int result = 0B011100 & 0B011100; 
```

不需要 char 数组。

这是相当微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:11:35.410

我刚刚改进了算法，使其能够在可以分割一个位的地方使用掩码，例如：

```
00111011011 
```

这是我从掩码和掩码值中获取值的函数

```
 private static long getMaskedValue(long maskedValue, long mask){
        long definitiveMaskedValue = 0;
        int count=0;

        maskedValue = mask & maskedValue;

        while (mask != 0){
            while ((mask & 1) == 0){
                mask = mask >>> 1;
                maskedValue = maskedValue >>> 1;
            }
            while ((mask & 1) == 1){
                definitiveMaskedValue = definitiveMaskedValue + ((maskedValue & 1) << count);
                count++;

                mask = mask >>> 1;
                maskedValue = maskedValue >>> 1;
            }
        }

        return definitiveMaskedValue;
    } 
```

这是我通过位掩码将值存储在变量中的函数，它返回旧变量以及存储在其中的值。我不得不使用 BigInteger，因为移位运算符在 Java 中不能移动超过 32 位。

```
private static long setMaskedValue (long maskedValue, long mask, long valueToAdd) {
            int nbZero=0;
            int nbLeastSignificantBit=0;
            long tmpMask=mask;
            maskedValue = maskedValue & ~mask;

            while (tmpMask != 0){
                while ((tmpMask & 1) == 0){
                    tmpMask = tmpMask >>> 1;
                    nbLeastSignificantBit++;
                    nbZero ++;
                }

                while ((tmpMask & 1) == 1){
                    tmpMask = tmpMask >>> 1;

                    BigInteger bigValueToAdd = BigInteger.valueOf(valueToAdd).shiftLeft(nbZero);
                    long tmpValueToAdd = bigValueToAdd.longValue();
                    BigInteger bigMaskOneBit = BigInteger.valueOf(1).shiftLeft(nbLeastSignificantBit);
                    long maskOneBit = bigMaskOneBit.longValue();

                    long bitValueToSet = getMaskedValue(tmpValueToAdd, maskOneBit);
                    maskedValue = maskedValue | bitValueToSet << nbLeastSignificantBit;
                    nbLeastSignificantBit++;
                }
            }
        return maskedValue;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T08:59:18.923

当然。

1.  你需要先和你的位。
2.  右移以避免掩码右侧的那些零。

您已经需要将值作为整数。

然后执行 AND：`int masked = value & mask;`

然后右移直到掩码中的第一个 1。

```
while (mask % 2 == 0) {
   mask = mask >>> 1;
   masked = masked >>> 1;
} 
```

`while (mask & 1 == 0) {`如果您愿意，可以使用:)

* * *

```
& is bitwise AND.
| is bitwise OR.
^ is bitwise XOR (if my memory doesn't fail :).
>>> is shifting right (unsigned integer) 
```

# websphere - 如何在 Websphere 中部署公共库？

> ID：12473510
> 
> 赞同：0
> 
> 时间：2012-09-18T08:52:50.897
> 
> 标签：websphere, websphere-8

我刚刚学习 Websphere 8.5，想知道添加库（例如 iText 库）的最简单方法是什么，以便它可用于在 WAS 上运行的所有应用程序。我可以看到管理控制台中提供了共享库选项和一些更高级的东西，例如由多个资产组成的“业务级应用程序”。
实现我的目标的正确方法是什么？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:25:17.677

您不应该使用实际上是显式的隐式依赖来开发应用程序。如果依赖项对您的应用程序至关重要，则应该以某种方式将其标记为这样。

话虽如此，WebSphere 中有两种方法——共享库或 OSGi 包。

对于共享库的概念，请阅读将[共享库与应用程序或模块关联](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.nd.multiplatform.doc/ae/tcws_sharedlib_app.html)。

如果您使用 OSGi 来开发您的应用程序，我建议您在 APPLICATION.MF 的 Application-Content 中声明依赖项，并让它们在[Internal 或 External bundle repositories](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.osgi.doc/topics/ta_admin_obr_int_console.html)中可用。

我认为 BLA 不适用于您的场景，但看到我错了也不会感到惊讶。

ps 想知道为什么这个问题被标记为 websphere-7，因为它指的是 WebSphere 8.5？

# python - matplotlib `imshow(interpolation='nearest')` 有什么作用？

> ID：12473511
> 
> 赞同：16
> 
> 时间：2012-09-18T08:52:52.363
> 
> 标签：python, image-processing, numpy, matplotlib

我在灰度图像上使用`imshow`函数`interpolation='nearest'`并得到一张漂亮的彩色图片，看起来它为我做了某种颜色分割，到底发生了什么？

我也想得到这样的图像处理，在 numpy 数组上有一些功能`interpolate('nearest')`吗？

**编辑：**如果我错了，请纠正我，它看起来像简单的像素聚类（集群是相应颜色图的颜色），并且“最近”这个词表示它采用最接近的颜色图颜色（可能在 RGB 空间中）到决定像素属于哪个簇。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-18T09:15:48.083

`interpolation='nearest'` simply displays an image without trying to interpolate between pixels if the display resolution is not the same as the image resolution (which is most often the case). It will result an image in which pixels are displayed as a square of multiple pixels.

There is no relation between `interpolation='nearest'` and the grayscale image being displayed in color. By default `imshow` uses the `jet` colormap to display an image. If you want it to be displayed in greyscale, call the `gray()` method to select the gray colormap.

# html - Django-form：更改 Html 选项：form

> ID：12473512
> 
> 赞同：0
> 
> 时间：2012-09-18T08:52:53.197
> 
> 标签：html, django, django-forms

好的，例如，我的 formModel 中有这个字段

```
RItitle = models.CharField(max_length=100) 
```

在我的模板中：

```
 <tr>
                <th>RI Title </th><th>  {{ wizard.form.RItitle }} {{ wizard.form.RItitle.errors }}</th>
            </tr> 
```

现在 HTML ：

```
<tr>
    <th>RI Title </th><th>  <input id="id_0-RItitle" type="text" name="0-RItitle" value="csss" maxlength="100"> </th>
            </tr> 
```

如何更改此字段的 html 选项？我的意思是例如 style="width:150px" 或类似的东西。我不能使用 css 示例：.input{ width:150px;} 因为我在这个表单中有超过 1 个输入

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:57:08.483

样式应该通过 CSS 进行。

因为你有可用的 ID，你可以这样做：

```
#id_0-RItitle {
    width: 150px;
    /* some other styles here */
} 
```

为了以编程方式执行此操作，我建议使用一些 CSS 类。要修改用于显示特定字段的小部件（例如，通过更改其类属性，如果绝对必要，还可以更改样式属性）遵循以下问题的提示：[Django 表单中的 CSS 样式](https://stackoverflow.com/questions/5827590/css-styling-in-django-forms)

# google-analytics - Google Analytics - 目标 URL 的头部匹配是实际 URL 的任何子字符串

> ID：12473518
> 
> 赞同：3
> 
> 时间：2012-09-18T08:53:20.733
> 
> 标签：google-analytics

我有 2 个要在一个目标下跟踪的网址：

```
/vpv/purchase_item
/vpv/purchase_coupon 
```

因此，我将头部匹配设置为 /vpv/purchase。

这是正确的吗，因为**/vpv/purchase**是我需要跟踪的两个网址的子字符串？或者头部匹配是否考虑除了查询字符串之外的完整 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T21:55:24.583

*这是正确的吗，因为 /vpv/purchase 是我需要跟踪的两个网址的子字符串？* **是的**

*或者头部匹配是否考虑除了查询字符串之外的完整 URL？* **不**

> > 头**匹配**匹配从字符串的开头开始到您指定的字符串中的最后一个字符（包括最后一个字符）的相同字符。
> > 
> > **头部匹配**
> > 
> > 假设您的宠物商店网站在一个目录中有多个页面，并且您想使用头部匹配 URL 为与鱼相关的页面创建一个目标，这些页面都具有相同的结构：
> > 
> > `/supplies/fishFood.html`
> > 
> > `/supplies/fishTanks.html`
> > 
> > `/supplies/fishTankDecorations.html`
> > 
> > 要确定您的头部匹配 URI 是否有效，请转到您网站的页面报告，单击“搜索”按钮并选择“开始于”作为您的搜索类型。要匹配上面的 URL，您需要`/supplies/fish`在搜索字段中输入。如果您的搜索返回您希望匹配的页面，您可以使用与目标 URL 相同的 URI 字符串。

请参阅[验证目标的正确 URL 表达式](https://support.google.com/analytics/bin/answer.py?hl=en&answer=1116091#urlMatchTypes)

# c# - OpenQA.Selenium.Support.PageObjects.FindsBy 参数

> ID：12473520
> 
> 赞同：1
> 
> 时间：2012-09-18T08:53:39.323
> 
> 标签：c#, selenium-webdriver

OpenQA.Selenium.Support.PageObjects 的 FindsBy 属性的 Priority 参数有什么作用？我对该库的 C# 版本感兴趣。

有没有关于这方面的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:16:13.063

根据 Arran 的评论，答案是：

```
 /// <summary>
    /// Gets or sets a value indicating where this attribute should be evaluated relative to other instances
    /// of this attribute decorating the same class member.
    /// </summary>
    [DefaultValue(0)]
    public int Priority { get; set; 
```

# clojure - 如何在clojure中将序列拆分为每3个相邻元素？

> ID：12473521
> 
> 赞同：4
> 
> 时间：2012-09-18T08:53:38.950
> 
> 标签：clojure

给定一个序列，如：

```
[1 2 3 4 5 6] 
```

如何将其拆分为clojure中的每3个相邻元素？就像下面这样：

```
([1 2 3] [2 3 4] [3 4 5] [4 5 6]) 
```

clojure.core 中的函数是首选！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-18T08:59:56.377

见[分区](http://clojuredocs.org/clojure_core/clojure.core/partition)：

```
user=> (partition 3 1 [1 2 3 4 5 6])
((1 2 3) (2 3 4) (3 4 5) (4 5 6)) 
```

# c# - Metro App 处理 webview 中的打开链接 / url 加载

> ID：12473527
> 
> 赞同：0
> 
> 时间：2012-09-18T08:53:47.123
> 
> 标签：c#, url, webview, event-handling, microsoft-metro

我有一个横幅，其中包含点击区域到 url，如下所示：

```
playMusic://123456 
```

我如何捕捉链接打开或 url 加载以管理应用程序中的此类链接？

似乎没有针对此的 webview 事件，并且我还没有设法找到覆盖方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:57:00.050

我希望您的 webview 动态更改 url，并且您需要捕获动态导航的 url。如果是这样，

```
 WebView1.LoadCompleted += WebView1_LoadCompleted;
 void WebView1_LoadCompleted(object sender, NavigationEventArgs e)
 {
            new MessageDialog(e.Uri.ToString()).ShowAsync();
 } 
```

此代码将显示当 webview 导航到 url 时加载的 url 的消息框...
如果这不是您要找的，请详细说明您的场景..

# python - 用于 Web 应用程序的 Python 开发环境 (Django)

> ID：12473531
> 
> 赞同：-1
> 
> 时间：2012-09-18T08:54:07.137
> 
> 标签：python, django, eclipse, ide

我读得越多，情况就越糟……我从 Python 开始，我无法决定如何设置我的开发环境。我想使用 Python 和 Django 来构建 Web 应用程序。

理想情况下，我喜欢在 Win7 上使用和 IDE（这将有助于工具提示和有关方法、类等的帮助）并让 Web 应用程序在虚拟 linux 机器上运行（需要 apache+mysql）。我已经为 Django 下载了交钥匙 linux 设备，它似乎工作正常。

所以，最后，我不清楚这里的人是否建议在运行应用程序的同一台机器上编辑我的代码。我更喜欢在 Win7 机器上编写代码，然后将应用程序/文件即时发布到 linux 虚拟机，然后通过浏览器访问应用程序。

这是我当前工作中的 php 项目的设置，我认为它运行良好。

请澄清人们是否通常只在一台机器上编码和运行他们的网络应用程序。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:58:39.580

我不知道你怎么会不清楚“如果这里的人建议在运行应用程序的同一台机器上编辑我的代码”。简单的答案是**不，不可能，永远，永远**。对此不能有歧义。

**编辑**啊，为误解道歉 - 你在评论中澄清你不是在谈论你的生产环境。在这种情况下，是的，在开发应用程序正在运行的同一台机器上进行编辑是一个非常好的主意——甚至更可取。没有理由不这样做，它让生活变得轻松多了。

请注意，您不应该在开发中真正使用 Apache：它需要大量配置，并且在代码更改后不会自动重新加载，无需更多配置。使用开发服务器。如果您担心的话，所有这些都可以在 Windows 机器上完美运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T08:58:36.237

我同意评论。就个人而言，我使用 Aptana Studio (http://www.aptana.com/) 和 GIT 来进行本地版本控制（很好地集成到 Aptana 中）。从那里开始，很容易在本地部署或将更改推送到远程 GIT 存储库。

# c# - " 代替引号 (")

> ID：12473534
> 
> 赞同：2
> 
> 时间：2012-09-18T08:54:14.517
> 
> 标签：c#, asp.net, character-encoding, sign, quote

我用 C# 编写了 asp.net web projet。

问题在于将报价符号保存`"`在数据库中并在页面中再次显示。

例如有一个文本框，我输入以下内容：

```
"abcd" 
```

并将其保存在数据库中。

但是，当我再次阅读并在页面中显示它时，我看到：

```
&quot;abcd&quot; 
```

那么这里有什么问题？有人知道解决方案吗？

我使用的字符集是 utf8 和 colattion 是 utf8generalci

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:58:17.737

尝试使用 HTML 解码和编码

HttpUtility.HtmlDecode

请参阅[http://msdn.microsoft.com/en-us/library/aa332854%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa332854%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T08:57:10.840

这实际上是所需的行为 -`&amp;quot;`是转义的 html 实体`"`。输出文字 " 是一个安全问题，因为它可以启用跨站点脚本或跨站点请求伪造。

// 对不起，请注意下面freefaller的正确答案。

# java - 属性文件中属性的命名约定

> ID：12473537
> 
> 赞同：39
> 
> 时间：2012-09-18T08:54:18.033
> 
> 标签：java, naming-conventions

Java 中属性文件中定义的属性名称的命名约定是什么？我可以使用大写还是只使用小写？

例如：bankAccountNumber 还是 bank.account.number？

它是在互联网上的某个地方定义的吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-18T08:56:29.417

命名约定建议在属性文件中使用小写。 `bank.account.number`这是更可观的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-18T09:17:54.650

据我了解，没有为`.properties`文件写入任何标准规则，`java.` 但是如果您看到其中大多数`.properties`文件`lib`夹中的文件`Java\jre`都有小写的`.properties`文件名。并且`properties`它们本身也是小写的。 **如**：

```
psfontj2d.properties 
```

**关键值**

```
courier_new=courier
courier_new_bold=courier_bold 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-18T08:58:35.430

命名属性没有特定的标准，但约定似乎是形式

```
a.b.c.d = x 
```

小写。我期望某种非正式的等级制度，例如

```
bank.
bank.account.
bank.account.name.
bank.account.pin. 
```

等等

如果它是直接影响特定类的属性，我可以在该类之后命名它（或至少使用包名称）。然而，这也是实现泄漏的一个例子，在这样做之前我会认真考虑。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-18T08:59:50.713

在 JSF 中，您可以在 ValidationMessages.properties 中看到一些东西

```
javax.validation.constraints.Pattern.message 
```

或在 JsfMessages.properties

```
javax.faces.component.UISelectOne.INVALID 
```

所以你可以在任何你喜欢的地方使用，我喜欢小写，包格式

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-18T09:00:49.753

我想属性文件没有这样的通用约定。**但是，以符合条件/易于理解的**格式（例如**bank.account.number** ）使用小写字母听起来不错，并且还建议使用带有原始扩展名（**.properties ）的属性文件。**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-31T19:13:28.733

**推荐烤肉串盒**

根据[Spring Boot 文档](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.typesafe-configuration-properties.relaxed-binding)（参见表中的注释`relaxed binding`），建议在 .properties 和 .yml 文件中使用 kebab case。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-28T04:58:58.313

实际上，资源包只接受包的完全限定的基本名称，没有文件扩展名。在这种情况下，它将尝试像这样加载文件包

**消息/EN/properties.properties**

我敢肯定你打算做一些不同于传统国际化的东西，但约定应该是**“messages_en.properties”**（语言时为en，国家时为EN）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-29T15:26:40.523

在属性文件中命名属性没有标准约定。

**参考：** [https ://en.wikipedia.org/wiki/.properties](https://en.wikipedia.org/wiki/.properties)

作为 Java 用户，您可以使用**camelCase**。

*对于给定的示例，名称可以是**bankAccountNumber**。*

如果要求遵循层次结构，可以使用点，如下所示。

*   *银行*
*   *银行帐户名称*
*   *银行帐号*
*   *银行部门名称*

# java - 奇怪的字符而不是常规的空格

> ID：12473547
> 
> 赞同：2
> 
> 时间：2012-09-18T08:55:36.890
> 
> 标签：java, php, encoding, tinymce

我有一个奇怪的问题。我使用 tinyMCE 编辑器构建 HTML 格式的字符串。带格式的字符串如下所示：
`<p>$      Ag$:      s:          p:</p>`
然后我通过 system() 调用将这段代码发送到我的 Java 类，该类只打印出位置、字符及其 int 值。

```
POS: 0 CHAR:'<' NUM: 60 
POS: 1 CHAR:'p' NUM: 112 
POS: 2 CHAR:'>' NUM: 62 
POS: 3 CHAR:'$' NUM: 36 
POS: 4 CHAR:' ' NUM: 32 
POS: 5 CHAR:'�' NUM: 194 
POS: 6 CHAR:'�' NUM: 160 
POS: 7 CHAR:' ' NUM: 32 
POS: 8 CHAR:'�' NUM: 194 
POS: 9 CHAR:'�' NUM: 160 
POS: 10 CHAR:' ' NUM: 32 
POS: 11 CHAR:'�' NUM: 194 
POS: 12 CHAR:'�' NUM: 160 
POS: 13 CHAR:'A' NUM: 65 
POS: 14 CHAR:'g' NUM: 103 
POS: 15 CHAR:'$' NUM: 36 
POS: 16 CHAR:':' NUM: 58 
POS: 17 CHAR:' ' NUM: 32 
POS: 18 CHAR:'�' NUM: 194 
POS: 19 CHAR:'�' NUM: 160 
POS: 20 CHAR:' ' NUM: 32 
POS: 21 CHAR:'�' NUM: 194 
POS: 22 CHAR:'�' NUM: 160 
POS: 23 CHAR:' ' NUM: 32 
POS: 24 CHAR:'�' NUM: 194 
POS: 25 CHAR:'�' NUM: 160 
POS: 26 CHAR:'s' NUM: 115 
POS: 27 CHAR:':' NUM: 58 
POS: 28 CHAR:' ' NUM: 32 
POS: 29 CHAR:'�' NUM: 194 
POS: 30 CHAR:'�' NUM: 160 
POS: 31 CHAR:' ' NUM: 32 
POS: 32 CHAR:'�' NUM: 194 
POS: 33 CHAR:'�' NUM: 160 
POS: 34 CHAR:' ' NUM: 32 
POS: 35 CHAR:'�' NUM: 194 
POS: 36 CHAR:'�' NUM: 160 
POS: 37 CHAR:' ' NUM: 32 
POS: 38 CHAR:'�' NUM: 194 
POS: 39 CHAR:'�' NUM: 160 
POS: 40 CHAR:' ' NUM: 32 
POS: 41 CHAR:'�' NUM: 194 
POS: 42 CHAR:'�' NUM: 160 
POS: 43 CHAR:'p' NUM: 112 
POS: 44 CHAR:':' NUM: 58 
POS: 45 CHAR:'<' NUM: 60 
POS: 46 CHAR:'/' NUM: 47 
POS: 47 CHAR:'p' NUM: 112 
POS: 48 CHAR:'>' NUM: 62 
```

我需要做的就是保留 HTML 中的所有空格，除了美元符号之间的空格 - $$ 之间的所有内容都应该被修剪。但是当我在它上面调用 trim() 时，什么都没有发生，并且 $$ 里面的部分仍然没有被修剪。
我想，这是由于奇怪的空间编码（194、160）？
文本应为 UTF-8。
感谢您的任何帮助

# java - 如何将字符串日期转换为长毫秒

> ID：12473550
> 
> 赞同：95
> 
> 时间：2012-09-18T08:55:38.853
> 
> 标签：java, android, epoch, milliseconds, date-conversion

我在字符串中有一个日期，例如“2012 年 12 月 12 日”。如何将其转换为毫秒（长）？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-09-18T08:58:55.817

使用[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

```
String string_date = "12-December-2012";

SimpleDateFormat f = new SimpleDateFormat("dd-MMM-yyyy");
try {
    Date d = f.parse(string_date);
    long milliseconds = d.getTime();
} catch (ParseException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-18T08:59:49.033

```
SimpleDateFormat formatter = new SimpleDateFormat("dd-MMM-yyyy");
Date date = (Date)formatter.parse("12-December-2012");
long mills = date.getTime(); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-11-22T07:45:55.697

是时候有人为这个问题提供现代答案了。2012年问这个问题的时候，当时贴出来的答案也是很好的答案。为什么 2016 年发布的答案也使用了当时早已过时的课程`SimpleDateFormat`，`Date`这对我来说有点神秘。`java.time`，现代 Java 日期和时间 API，也称为 JSR-310，使用起来非常好用。您可以通过 ThreeTenABP 在 Android 上使用它，请参阅[这个问题：How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。

*对于大多数目的，我建议使用UTC*中自一天开始时的纪元以来的毫秒数。要获得这些：

```
 DateTimeFormatter dateFormatter
            = DateTimeFormatter.ofPattern("d-MMMM-uuuu", Locale.ENGLISH);
    String stringDate = "12-December-2012";
    long millisecondsSinceEpoch = LocalDate.parse(stringDate, dateFormatter)
            .atStartOfDay(ZoneOffset.UTC)
            .toInstant()
            .toEpochMilli();
    System.out.println(millisecondsSinceEpoch); 
```

这打印：

```
1355270400000 
```

如果您需要某个特定时区的一天开始时间，请指定该时区而不是 UTC，例如：

```
 .atStartOfDay(ZoneId.of("Asia/Karachi")) 
```

正如预期的那样，这给出了稍微不同的结果：

```
1355252400000 
```

还有一点需要注意，记得为你的`DateTimeFormatter`. 我把 12 月当作英语，还有其他语言的那个月被称为相同的月份，所以请自己选择正确的语言环境。如果您没有提供语言环境，格式化程序将使用 JVM 的语言环境设置，这可能在许多情况下都有效，然后有一天当您在具有不同语言环境设置的设备上运行应用程序时会意外失败。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-09-18T08:57:47.227

看一下`SimpleDateFormat`可以解析 a`String`并返回 a的类`Date`和类的`getTime`方法`Date`。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-09-18T08:59:31.437

*   首先将字符串转换为`java.util.Date`使用日期[格式化程序](http://developer.android.com/reference/java/text/SimpleDateFormat.html)
*   使用[getTime()](http://developer.android.com/reference/java/util/Date.html#getTime%28%29)从日期获取毫秒数

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-18T08:58:32.540

您可以使用 simpleDateFormat 来解析字符串日期。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-03T05:49:42.487

最简单的方法是使用 Date Using Date() 和 getTime()

```
 Date dte=new Date();
    long milliSeconds = dte.getTime();
    String strLong = Long.toString(milliSeconds);
    System.out.println(milliSeconds) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-02T17:49:46.700

使用 simpledateformat 您可以轻松实现它。

1）首先使用simpledateformatter将字符串转换为java.Date。

2) 使用 getTime 方法获取日期的毫秒数

```
 public class test {
      public static void main(String[] args) {
      String currentDate = "01-March-2016";
      SimpleDateFormat f = new SimpleDateFormat("dd-MMM-yyyy");
     Date parseDate = f.parse(currentDate);
     long milliseconds = parseDate.getTime();
  }
        } 
```

更多示例点击[这里](https://qamanual.blogspot.in/2016/06/how-to-convert-string-date-into.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-19T12:06:37.910

试试下面的代码

```
 SimpleDateFormat f = new SimpleDateFormat("your_string_format", Locale.getDefault());
        Date d = null;
        try {
            d = f.parse(date);
        } catch (ParseException e) {
            e.printStackTrace();
        }
        long timeInMillis = d.getTime(); 
```

# ruby-on-rails - 在 RoR 中创建 spree_products_taxons 记录：Spree

> ID：12473552
> 
> 赞同：0
> 
> 时间：2012-09-18T08:55:54.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, spree

我想用 ActiveRecord（不是纯 SQL）在 spree_products_taxons 表中创建新记录，但是：

```
1.9.3-head :003 > Spree::ProductsTaxon.create(product_id: 666, taxon_id: 777)
NameError: uninitialized constant Spree::ProductsTaxon 
```

我哪里错了？

附言。在我的架构文件中：

```
create_table "spree_products_taxons", :id => false, :force => true do |t|
    t.integer "product_id"
    t.integer "taxon_id"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:38:07.447

你可以试试这样的

```
product = Spree::Product.find(666)
taxon = Spree::Taxon.find(777)
product.taxons << taxon
product.save
taxons = product.taxons 
```

# c# - 在解析完成之前遇到流结束但流位置 = 0

> ID：12473553
> 
> 赞同：0
> 
> 时间：2012-09-18T08:55:54.477
> 
> 标签：c#, parsing, serialization, stream, formatter

我正在尝试序列化一个对象，但我不断收到以下错误：

> 解析完成前遇到的流结束

我在读取之前将流位置设置为 0，我确保在读取和写入时使用相同的格式化程序（二进制格式化程序），并且我还确保我正在刷新流。我还可以做些什么。下面，你可以找到我的代码。

```
Stream stream = File.Open("MyFile.bin", FileMode.Create);
BinaryFormatter bFormatter = new BinaryFormatter();
bFormatter.Serialize(stream, searchPage);
stream.Flush();
stream.Close(); 
```

# sql - 对特定范围内的数值数据进行分组

> ID：12473557
> 
> 赞同：0
> 
> 时间：2012-09-18T08:56:06.420
> 
> 标签：sql, crystal-reports

我想对 SQL 数据库中一张表中的数据进行分组。用于分组的字段是数字的，我想要的组不遵循任何数学公式，例如

组 0 值未知 (NULL)

第 1 组值 0 - 499

第 2 组值 500 - 999

第 3 组值 1000 - 1999

第 4 组值 2000 - 4999

第 5 组价值 5000 +

如何使用 TSQL 实现这一目标？

顺便说一句，我想这样做以显示在 Crystal Reports 中，所以如果有更好的方法在 Crystal Reports 中执行此操作而不是通过 SQL Select 语句，请告知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:58:33.950

您可以使用 a`case`创建自定义组。如果`case`在子查询中定义，则不必重复定义：

```
select  Grp
,       sum(col2)
,       avg(col3)
from    (
        select  case
                when col1 is null then 0
                when col1 between 0 and 499 then 1
                when col1 between 500 and 999 then 2
                ...
                end as Grp
        ,       *
        ) as SubQueryAlias
group by
        Grp 
```

# c# - OrderByDesc col1 除以 col2

> ID：12473558
> 
> 赞同：0
> 
> 时间：2012-09-18T08:56:10.850
> 
> 标签：c#, linq, entity-framework, lambda

我需要`sort`一个基于`col1`除以`col2`..的结果所以我想做的是这样的：

```
var x = uploadsQuerySelectionBuilder.Where(e => e.uploadNumberOfVotes 
> 0)**.OrderByDescending(e=>(e.uploadScore/e.uploadNumberOfVotes))
** : uploadsQuerySelectionBuilder; 
```

至于现在..它似乎根本没有订购结果，但它只是随机的..这甚至可能吗，我该如何让它工作？

编辑：

```
var x = tSearch.SortByDate != false ? uploadsQuerySelectionBuilder.Where(e => e.uploadNumberOfVotes > 0).OrderByDescending(e => (e.uploadScore / e.uploadNumberOfVotes)) : uploadsQuerySelectionBuilder; 
```

是非常有效且“可编译”的代码:)..另一个不是用VS编写的，所以我的错..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:23:33.243

就像是：

```
var x = uploadsQuerySelectionBuilder
           .Where(e => e.uploadNumberOfVotes > 0)
           .Select(e => new { Val = e, ScoreishThing = e.uploadScore/e.uploadNumberOfVotes })
           .OrderByDescending(e=> e.ScoreishThing)
           .Select(e=>e.Val); 
```

# php - 使用正则表达式在php中查找密码和换行符

> ID：12473562
> 
> 赞同：1
> 
> 时间：2012-09-18T08:56:25.637
> 
> 标签：php, regex

假设我有一个名称列表和具有以下模式的相应随机生成的密码：

`name:sucz2ReiG name:ox9ZxnIka`

如何使用正则表达式获取密码部分？

我知道这里有一个类似的线程：[你如何在 php 中找到换行符？](https://stackoverflow.com/questions/5972863/how-do-you-find-a-line-break-in-php)，但我需要为列表中的每个名称应用模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:10:39.910

挺容易：

```
$f = "name:sucz2ReiG name:ox9ZxnIka";

$p = preg_match_all('/[^:]*?:([^\s]+)/', $f, $matches);

var_dump($matches[1]); 
```

# parameters - 哈德逊的参数

> ID：12473564
> 
> 赞同：1
> 
> 时间：2012-09-18T08:56:34.960
> 
> 标签：parameters, hudson

我在哈德逊有 2 个项目，我想在它们之间有所作为。我可以用他们的名字来做，但我不能在哈德森使用它。我尝试使用“此构建已参数化”中的字符串参数，但我无法在“属性”的“调用蚂蚁”中使用它们。我发送了 myparam= ${env.BSYST}，BSYST-是我在字符串参数中的名字，并且在我构建后写入 ${env.BSYST} 这个值，而不是我在“此构建需要参数：BSYST：”中写入的值。您是否知道出了什么问题，或者您能否给我另一个解决方案，说明如何发送我的项目名称并在 build.xml 中创建“if”并执行不同的操作？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:52:11.680

Hudson 中的参数只是本地环境变量；您不能将变量从其他来源拉入参数中。

但是，在 Hudson 中作业的配置区域内，您可以添加构建步骤。您应该可以选择调用 Ant 和 Maven 目标（至少您在 Jenkins 中这样做），您可以在其中指定构建文件。至少你可以执行shell。在shell 中，您的SVN 工作副本在范围内并且可以读取，即您可以读取和解析您的build.xml。请记住，这是普通的 shell，所以如果你想回显一个变量，你可以这样做。

# java - 创建与传递给方法的类型相同的数组

> ID：12473565
> 
> 赞同：1
> 
> 时间：2012-09-18T08:56:39.147
> 
> 标签：java, generics

我在java中有一个排序器类，它接受一组可比较的对象并对它们进行排序。我需要为排序创建一个临时数组（这是合并排序），并且该数组需要与传入的类型相同（我认为？）无论我做什么，我都会从 eclipse 中收到各种警告.

我的方法声明是

```
public <E extends Comparable<? super E>> void sort(E[] data); 
```

我读了一些关于泛型的文章，但我仍然感到困惑。任何指向完整泛型教程的链接也会有很大帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:30:31.823

这里不需要使用泛型，也不需要创建与参数类型相同类型的临时数组。

```
public void sort(Comparable[] data) {
  Comparable[] temp=new Comparable[data.size()];
  ...
} 
```

# iphone - UIPickerView 高度不可更改

> ID：12473566
> 
> 赞同：8
> 
> 时间：2012-09-18T08:56:40.527
> 
> 标签：iphone, ios, frame, uipickerview

我正在尝试更改 PickerView 的高度

```
self.pickerView = [[UIPickerView alloc] init];
self.pickerView.frame = CGRectMake(0, 0, frame.size.width, frame.size.height); 
```

Xcode 日志显示以下消息：

```
-[UIPickerView setFrame:]: invalid height value 274.0 pinned to 216.0 
```

我怎样才能改变它的高度？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-18T09:02:26.187

这里只`three` `valid` `heights`为`UIPickerView` `(162.0, 180.0 and 216.0)`。

您可以使用`CGAffineTransformMakeTranslation`和`CGAffineTransformMakeScale`函数来适当地调整选择器以方便您使用。

例子：

```
CGAffineTransform t0 = CGAffineTransformMakeTranslation (0, pickerview.bounds.size.height/2);
CGAffineTransform s0 = CGAffineTransformMakeScale       (1.0, 0.5);
CGAffineTransform t1 = CGAffineTransformMakeTranslation (0, -pickerview.bounds.size.height/2);
pickerview.transform = CGAffineTransformConcat          (t0, CGAffineTransformConcat(s0, t1)); 
```

`change`上面的代码`height`和它`picker` `view to half`的`re-position`确切`(Left-x1, Top-y1)`位置。

[在这里](https://stackoverflow.com/questions/573979/how-to-change-uipickerview-height?rq=1)参考更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T09:00:08.993

的有效高度只有三个`UIPickerView (162.0, 180.0 and 216.0)`。

[更多详情。](https://stackoverflow.com/a/7672577/616094)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T09:03:12.540

UIPicker 的高度只有三个有效值 162.0、180.0 和 216.0。即使您设置了不同的高度，它也会将高度设置为这三个高度中最接近给定高度的一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T09:27:13.687

像这样试试。我还用谷歌搜索了很多例子，找到了这个。

```
pickerView = [[UIPickerView alloc]initWithFrame:CGRectMake(0,250,320,230)];//to change the height
pickerView.delegate =self;
pickerView.dataSource =self;
pickerView.showsSelectionIndicator = YES;
[self.view addSubview:pickerView]; 
```

# jquery - 如何使用 jQuery 将按钮的类型从“按钮”更改为“提交”？

> ID：12473567
> 
> 赞同：3
> 
> 时间：2012-09-18T08:56:41.550
> 
> 标签：jquery

我有以下表格：

```
<form id="xx">
<button type="button">Submit</button>
<button type="button">Submit and Close</button>
<button type="button">Close</button>
</form> 
```

如何将包含“提交”一词的按钮类型从“按钮”类型更改为“提交”类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:01:12.760

```
$('button').filter(function(){
    return $(this).text().toLowerCase().indexOf('submit') != -1;
}).prop('type','submit'); 
```

首先过滤具有“提交”为文本的按钮，然后更改属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T09:00:10.853

我您的按钮有一个 id，例如“按钮”，这可以通过以下方式实现：

```
$('#button').prop('type', 'submit'); 
```

如果您希望使用文本“提交”更改所有按钮的属性，可以通过以下方式实现：

```
$('button').each(function(){
    if($(this).text().indexOf("Submit") != -1){
        $(this).prop('type','submit');
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T09:00:29.067

在按钮中创建 id 并执行以下操作

```
$('#buttonid').replaceWith($('#buttonid').clone().attr('type', 'submit')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T09:04:34.180

像这样的东西应该可以工作（未经测试）：

```
$('button').each(function() {
    if($(this).text().match(/submit/i)) {
        $(this).prop('type', 'submit');
    }
}); 
```

**编辑**

值得指出的是，这里的所有其他答案**都不**适用于 Internet Explorer：

> 注意：jQuery 禁止更改 or 元素的 type 属性，并且会在所有浏览器中抛出错误。这是因为不能在 Internet Explorer 中更改类型属性。

[http://api.jquery.com/attr/](http://api.jquery.com/attr/)

（我也对此进行了测试`.prop()`，虽然没有抛出错误，但它不起作用）

# javascript - 使用 ExpressJS 上传文件

> ID：12473569
> 
> 赞同：0
> 
> 时间：2012-09-18T08:56:43.847
> 
> 标签：javascript, node.js, express

我正在使用最新的 NodeJS 和 ExpressJS 来编写一个小应用程序。目前我坚持上传文件。:>

路由是这样配置的

```
app.get('/Share', share.index);
app.post('/Share/Process', share.processFile); 
```

索引视图如下所示

```
form.form-horizontal(action='/Share/Process', method='post')
  legend share a file
  div.control-group
    label.control-label(for='item[actual]') File
    div.controls
      input(type='file', name='item[actual]', required='required') 
```

当我遵循 ExpressJS API 文档时，我应该可以使用**req.files**访问该文件，这在 share.processFile 方法中是未定义的

```
exports.processFile = function(req,res){
  console.log(req.files); // undefined
  console.log(req.body.item.actual); // filename as string
  res.render('share/success', {navigation: { shareClass : 'active'}, downloadKey: 'foo'});
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:10:30.707

尝试将表单编码更改为`multipart/form-data`, IIRC 这应该设置为传输文件。

# javascript - 如何在节点上分配新的鼠标事件而不覆盖之前设置的那些？

> ID：12473570
> 
> 赞同：0
> 
> 时间：2012-09-18T08:56:47.423
> 
> 标签：javascript, javascript-events

例子：

```
domNode.onmouseover = function() {
  this.innerHTML = "The mighty mouse is over me!"
}
domNode.onmouseover = function() {
  this.style.backgroundColor = "yellow";
} 
```

在此示例中，文本不会更改。但问题是我并不总是知道之前分配了什么，所以有没有办法告诉 js：运行最终分配的所有内容而不知道那是什么，然后运行我的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:31:46.043

可以通过将当前事件处理程序传递给新处理程序来做到这一点：

```
domNode.onmouseover = function()
{
    console.log('first handler');
}
domNode.onmouseover = (function (current)
{
    return function()
    {
        current();//call handler that was set when this handler was created
        console.log('new handler');
    };
})(domNode.onmouseover);//pass reference to current handler 
```

[**看到这个小提琴**](http://jsfiddle.net/ymxK9/)，看看它在行动
你可以继续这样做，只要你想要/需要：

```
domNode.onmouseover = function()
{
    console.log('first handler');
}
domNode.onmouseover = (function (current)
{
    return function()
    {
        current();
        console.log('second handler');
    };
})(domNode.onmouseover);
domNode.onmouseover = (function (current)
{
    return function()
    {
        current();
        console.log('third handler');
    };
})(domNode.onmouseover); 
```

这将记录：

```
first handler
second handler
third handler 
```

这里的所有都是它的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:01:36.537

首先，将它放在一个document.ready中。（不确定你是否这样做）如果你想要一个动作有 2 个动作，请将它放在一次函数中。

您还可以创建 2 个函数并在鼠标悬停时调用它们。

```
$(document).ready(function(){
   domNode.onmouseover = function() {
     this.innerHTML = "The mighty mouse is over me!"
     this.style.backgroundColor = "yellow";
   }
}); 
```

# jquery - 对话框内的选项卡不会呈现

> ID：12473572
> 
> 赞同：0
> 
> 时间：2012-09-18T08:56:58.477
> 
> 标签：jquery, jquery-ui, tabs

我正在尝试初始化对话框中的选项卡，但它们不起作用。对话框 html 通过初始化附加。我正在取回原始 html。我尝试的代码如下所示。但是在带有断点的萤火虫中，代码可以工作

```
//HTML
<div id="tabs">
    <ul>
        <li><a href="#tab-1">Edit</a>
        </li>
        <li><a href="#tab-2">Send Email</a>
        </li>
    </ul>

    <div id="tab-1">

        <form action="#" method="post" id="edit_form"></form>
    </div>
    <div id="tab-2">
        <div id="contact-wrapper">
            <form method="post" action="mailer.php" id="contactform"></form>
        </div>

    </div>

</div> 
```

和 Javascript

```
 // Init Dialog
        $('a.open_dialog').click(function() {
            $('#tabs').tabs();

            $('<div />').appendTo('body').load($(this).attr('href')).dialog({
                title: $(this).attr('title'),
                modal: true,
                draggable: false,
                width: 800,
                position: 'top',
                buttons: {
                    "Save": function() {
                        $.ajax({
                               type: "POST",
                               url: 'action.php',
                               data: $("#edit_form").serialize(), // serializes the form's elements.
                               success: function(data)
                               {
                                   alert(data); // show response from the php script.
                               }
                             });

                    },
                    "Send Email": function() {

                        $.ajax({
                               type: "POST",
                               url: 'mailer.php',
                               data: $("#contactform").serialize(), // serializes the form's elements.
                               success: function(data)
                               {
                                   alert(data); // show response from the php script.
                               }
                             });
                    }
                },
                close: function() {
                    location.reload(true);
                    allFields.val( "" ).removeClass( "ui-state-error" );

                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:59:02.337

对话框打开后，您需要初始化选项卡。

```
$('<div />').dialog({
    open : function(){  //In case of autoOpen = true
      $('#tabs').tabs();
    }
}); 
```

`.tabs()`如果没有，您可以在之后依次调用`.dialog()`

# c# - 多个列表的组合

> ID：12473575
> 
> 赞同：0
> 
> 时间：2012-09-18T08:57:04.980
> 
> 标签：c#, combinations

我不完全确定“组合”一词是否正确，但是我需要从一个或多个列表中构建一个组合列表。每个列表将包含不同数量的元素，例如

```
List<string> lBag1 = ["1_0, 1_1, 1_3"]
List<string> lBag2 = ["11_0, 11_1, 11_8"]
List<string> lBag3 = ["3_0"] 
```

我需要的是列表从 1 到 n 个元素的所有组合，每个列表中不超过一个元素，例如

```
"1_0"
"1_1"
"1_3"
"11_0"
"11_1"
"11_8"
"3_0"
"1_0 11_0"
"1_0 11_1"
"1_0 11_8"
"1_0 3_0"
...
"1_3 11_8 3_0" 
```

顺序并不重要，因此“1_0 11_0”被认为与“11_0 1_0”相同。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:06:13.510

这对你有用吗：

```
var empty = new string[] { null, };

var query =
    from b1 in empty.Concat(lBag1)
    from b2 in empty.Concat(lBag2)
    from b3 in empty.Concat(lBag3)
    let bs = new [] { b1, b2, b3 }.Where(b => b != null)
    let result = String.Join(" ", bs)
    where result != ""
    select result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:11:27.317

这两种扩展方法将让您将多个枚举链接在一起，计算您想要的组合。

每个组合都是一个枚举，而不是一个串联的字符串。

```
// This method takes two sequences of T, and returns
//  - each element of the first sequence,
//        wrapped in its own one-element sequence
//  - each element of the second sequence,
//        wrapped in its own one-element sequence
//  - each pair of elements (one from each sequence),
//        as a two-element sequence.
// e.g. { 1 }.CrossWith({ 2 }) returns { { 1 }, { 2 }, { 1, 2 } }
public static IEnumerable<IEnumerable<T>> CrossWith<T>(
    this IEnumerable<T> source1,
    IEnumerable<T> source2)
{
    foreach(T s1 in source1) yield return new[] { s1 };
    foreach(T s2 in source2) yield return new[] { s2 };
    foreach(T s1 in source1)
        foreach(T s2 in source2)
            yield return new[] { s1, s2 };
}

// This method takes a sequence of sequences of T and a sequence of T,
//     and returns
//  - each sequence from the first sequence
//  - each element of the second sequence,
//        wrapped in its own one-element sequence
//  - each pair, with the element from the second sequence appended to the
//        sequence from the first sequence.
// e.g. { { 1, 2 } }.CrossWith({ 3 }) returns
//      { { 1, 2 }, { 3 }, { 1, 2, 3 } }
public static IEnumerable<IEnumerable<T>> CrossWith<T>(
    this IEnumerable<IEnumerable<T>> source1,
    IEnumerable<T> source2)
{
    foreach(IEnumerable<T> s1 in source1) yield return s1;
    foreach(T s2 in source2) yield return new[] { s2 };
    foreach(IEnumerable<T> s1 in source1)
        foreach(T s2 in source2)
            yield return s1.Concat(new[] { s2 }).ToArray();
}

var cross = lBag1.CrossWith(lBag2).CrossWith(lBag3);
// { "1_0" }, { "1_1" }, { "1_3" } ...
// ... { "1_0", "11_0" }, ... 
```

或者，有[这篇经典的 Eric Lippert](http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx)博客文章也做了类似的事情。（类似的结果，非常不同的方法。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:11:44.180

这只是我的意见。你必须自己决定如何实现它，但我会：

1）创建一个类来表示你的对 X_Y

2) 让你的类实现 IEquatable

3) 提供 Equal 的实现

4) 实现一个构造函数，给定一个 X_Y 形式的字符串，返回一个 YourClass 对象。

5) 实现一个公共静态函数，给定一个包含逗号分隔的 X_Y 列表的字符串返回一个列表

6) 使用前面的方法创建三个列表。

7) 创建一个空列表

8) 使用 yourList.Append 从三个列表中添加元素。

可能是我用枪杀死苍蝇。

# java - 如何在 JAX-WS 客户端中禁用证书验证？

> ID：12473576
> 
> 赞同：20
> 
> 时间：2012-09-18T08:57:05.287
> 
> 标签：java, ssl, https, jax-ws

如何使用 JAX-WS 客户端禁用证书验证`javax.xml.ws.Service`？

我尝试在 SSLSocketFactory 中创建一个全信任的 TrustManager 并尝试将它与 BindingProvider 绑定

```
SSLContext sc = SSLContext.getInstance("SSL"); 
sc.init(null, trustAllCerts, new java.security.SecureRandom()); 

Map<String, Object> ctxt = ((BindingProvider) wsport ).getRequestContext(); 
ctxt.put(JAXWSProperties.SSL_SOCKET_FACTORY, sc.getSocketFactory()); 
```

但我仍然得到`Exception: unable to find valid certification path to requested target`

但是当我只使用它时它会起作用

```
HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory()); 
```

或者有没有办法`javax.xml.ws.Service`利用`HttpsURLConnection`我创建的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-28T19:58:13.103

我在这里找到了解决方案：http: [//schrepfler.blogspot.com.br/2009/06/relaxing-ssl-validation-for-jaxws.html](http://schrepfler.blogspot.com.br/2009/06/relaxing-ssl-validation-for-jaxws.html)

我正在使用该解决方案在主类的静态块上调用两个静态方法，如下所示：

```
static {
    SSLUtilities.trustAllHostnames();
    SSLUtilities.trustAllHttpsCertificates();
} 
```

希望这可以帮助

**编辑：**正如 David J. Liszewski 指出的那样，这**会破坏来自该 JVM 的所有连接的 SSL/TLS**。所以记住这一点。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-05T13:30:50.667

可以从 Erik Wramner 的博客中找到真相[http://erikwramner.wordpress.com/2013/03/27/trust-self-signed-ssl-certificates-and-skip-host-name-verification-with-jax- ws](http://erikwramner.wordpress.com/2013/03/27/trust-self-signed-ssl-certificates-and-skip-host-name-verification-with-jax-ws)

我包含了完整的解决方案，其中使用 Apache CXF 向自签名的 SharePoint https 服务发出 SOAP Web 服务请求：

**NaiveSSLHelper.java**

```
import org.apache.cxf.configuration.jsse.TLSClientParameters;
import org.apache.cxf.transport.http.HTTPConduit;

import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.KeyManager;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSession;
import javax.net.ssl.SSLSocketFactory;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;
import javax.xml.ws.BindingProvider;
import java.security.GeneralSecurityException;
import java.security.SecureRandom;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;
import java.util.Map;

public class NaiveSSLHelper {
  public static void makeWebServiceClientTrustEveryone(
    Object webServicePort) {
    if (webServicePort instanceof BindingProvider) {
      BindingProvider bp = (BindingProvider) webServicePort;
      Map requestContext = bp.getRequestContext();
      requestContext.put(JAXWS_SSL_SOCKET_FACTORY, getTrustingSSLSocketFactory());
      requestContext.put(JAXWS_HOSTNAME_VERIFIER,
        new NaiveHostnameVerifier());
    } else {
      throw new IllegalArgumentException(
        "Web service port "
          + webServicePort.getClass().getName()
          + " does not implement "
          + BindingProvider.class.getName());
    }
  }

  public static SSLSocketFactory getTrustingSSLSocketFactory() {
    return SSLSocketFactoryHolder.INSTANCE;
  }

  private static SSLSocketFactory createSSLSocketFactory() {
    TrustManager[] trustManagers = new TrustManager[] {
      new NaiveTrustManager()
    };
    SSLContext sslContext;
    try {
      sslContext = SSLContext.getInstance("TLS");
      sslContext.init(new KeyManager[0], trustManagers,
        new SecureRandom());
      return sslContext.getSocketFactory();
    } catch (GeneralSecurityException e) {
      return null;
    }
  }

  public static void makeCxfWebServiceClientTrustEveryone(HTTPConduit http) {
    TrustManager[] trustManagers = new TrustManager[]{
      new NaiveTrustManager()
    };
    TLSClientParameters tlsParams = new TLSClientParameters();
    tlsParams.setSecureSocketProtocol("TLS");
    tlsParams.setKeyManagers(new KeyManager[0]);
    tlsParams.setTrustManagers(trustManagers);
    tlsParams.setDisableCNCheck(true);
    http.setTlsClientParameters(tlsParams);
  }

  private interface SSLSocketFactoryHolder {
    SSLSocketFactory INSTANCE = createSSLSocketFactory();
  }

  private static class NaiveHostnameVerifier implements
    HostnameVerifier {
    @Override
    public boolean verify(String hostName,
                          SSLSession session) {
      return true;
    }
  }

  private static class NaiveTrustManager implements
    X509TrustManager {

    @Override
    public void checkClientTrusted(X509Certificate[] certs,
                                   String authType) throws CertificateException {
    }

    @Override
    public void checkServerTrusted(X509Certificate[] certs,
                                   String authType) throws CertificateException {
    }

    @Override
    public X509Certificate[] getAcceptedIssuers() {
      return new X509Certificate[0];
    }
  }

  private static final java.lang.String JAXWS_HOSTNAME_VERIFIER =
    "com.sun.xml.internal.ws.transport.https.client.hostname.verifier";
  private static final java.lang.String JAXWS_SSL_SOCKET_FACTORY =
    "com.sun.xml.internal.ws.transport.https.client.SSLSocketFactory";
} 
```

**SoapTester.java**

```
import crawler.common.sharepoint.stubs.sitedata.ArrayOfSList;
import crawler.common.sharepoint.stubs.sitedata.GetListCollectionResponse;
import crawler.common.sharepoint.stubs.sitedata.SList;
import crawler.common.sharepoint.stubs.sitedata.SiteData;
import crawler.common.sharepoint.stubs.sitedata.SiteDataSoap;
import org.apache.cxf.configuration.security.AuthorizationPolicy;
import org.apache.cxf.endpoint.Client;
import org.apache.cxf.frontend.ClientProxy;
import org.apache.cxf.transport.http.HTTPConduit;
import org.apache.cxf.transport.http.asyncclient.AsyncHTTPConduit;
import org.apache.cxf.transport.http.auth.HttpAuthHeader;
import org.apache.cxf.transport.http.auth.SpnegoAuthSupplier;
import org.apache.cxf.transports.http.configuration.HTTPClientPolicy;
import org.ietf.jgss.GSSName;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import javax.security.auth.login.AppConfigurationEntry;
import javax.security.auth.login.Configuration;
import javax.xml.namespace.QName;
import javax.xml.soap.SOAPMessage;
import javax.xml.ws.BindingProvider;
import javax.xml.ws.Holder;
import javax.xml.ws.Service;
import javax.xml.ws.handler.Handler;
import javax.xml.ws.handler.MessageContext;
import javax.xml.ws.handler.soap.SOAPHandler;
import javax.xml.ws.handler.soap.SOAPMessageContext;
import java.io.ByteArrayOutputStream;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Set;

/**
 * This example will invoke a web service on SharePoint 2013+ with optional kerberos auth.
 */
public class SoapTester {

  private static final Logger LOG = LoggerFactory.getLogger(SoapTester.class);

  public static void main(String[] args) {

    String endpointAddress = args[0];
    String keytabFilePath = args.length > 2 ? args[1] : null;
    String principalName = args.length > 2 ? args[2] : null;
    String servicePrincipalName = args.length > 3 ? args[3] : null;

    if (!endpointAddress.endsWith("/")) {
      endpointAddress += "/";
    }

    endpointAddress += "_vti_bin/SiteData.asmx";

    final String endpointAddressFinal = endpointAddress;

    Service service = Service.create(SiteData.SERVICE);
    SiteDataSoap soap = service.getPort(SiteDataSoap.class);
    NaiveSSLHelper.makeWebServiceClientTrustEveryone(soap);
    BindingProvider bindingProvider = (BindingProvider) soap;
    bindingProvider.getRequestContext().put(AsyncHTTPConduit.USE_ASYNC,
      Boolean.TRUE);
    bindingProvider.getRequestContext().put(
      BindingProvider.ENDPOINT_ADDRESS_PROPERTY, endpointAddress);

    List<Handler> chain = bindingProvider.getBinding().getHandlerChain();
    chain.add(new SOAPHandler<SOAPMessageContext>() {
      @Override
      public boolean handleMessage(SOAPMessageContext context) {
        String endpointAddress = (String) context.get(BindingProvider.ENDPOINT_ADDRESS_PROPERTY);
        SOAPMessage msg = context.getMessage();
        Boolean outbound = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
        try (ByteArrayOutputStream out = new ByteArrayOutputStream()) {
          msg.writeTo(out);
          String str = new String(out.toByteArray());
          LOG.info("Sharepoint xml [" + endpointAddress + "]" + (outbound ? " (Outbound)" : " (Inbound)") + ": " + str);
        } catch (Exception e) {
          LOG.error("Cannot get soap xml from message ", e);
        }
        if (outbound.booleanValue()) {
          try {
            context.getMessage().setProperty(SOAPMessage.CHARACTER_SET_ENCODING, "UTF-8");
          } catch (Exception e) {
            throw new RuntimeException(e);
          }
        }
        return true;
      }

      @Override
      public boolean handleFault(SOAPMessageContext context) {
        return true;
      }

      @Override
      public void close(MessageContext context) {
      }

      @Override
      public Set<QName> getHeaders() {
        return null;
      }
    });
    bindingProvider.getBinding().setHandlerChain(chain);
    Client client = ClientProxy.getClient(bindingProvider);

    client.getEndpoint().put("org.apache.cxf.stax.maxChildElements", System.getProperty("org.apache.cxf.stax.maxChildElements") != null ? System.getProperty("org.apache.cxf.stax.maxChildElements") : "5000000");
    HTTPConduit http = (HTTPConduit) client.getConduit();
    NaiveSSLHelper.makeCxfWebServiceClientTrustEveryone(http);

    AuthorizationPolicy authorization = new AuthorizationPolicy();
    authorization.setAuthorizationType(HttpAuthHeader.AUTH_TYPE_NEGOTIATE);
    http.setAuthorization(authorization);

    SpnegoAuthSupplier authSupplier = new SpnegoAuthSupplier();
    if (servicePrincipalName != null) {
      authSupplier.setServicePrincipalName(servicePrincipalName);
      authSupplier.setServiceNameType(GSSName.NT_HOSTBASED_SERVICE);
    }

    Map<String, String> loginConfig = new HashMap<>();
    loginConfig.put("useKeyTab", "true");
    loginConfig.put("storeKey", "true");
    loginConfig.put("refreshKrb5Config", "true");
    loginConfig.put("keyTab", keytabFilePath);
    loginConfig.put("principal", principalName);
    loginConfig.put("useTicketCache", "true");
    loginConfig.put("debug", String.valueOf(true));
    authSupplier.setLoginConfig(new Configuration() {
      @Override
      public AppConfigurationEntry[] getAppConfigurationEntry(String name) {
        return new AppConfigurationEntry[] {
          new AppConfigurationEntry("com.sun.security.auth.module.Krb5LoginModule",
            AppConfigurationEntry.LoginModuleControlFlag.REQUIRED,
            loginConfig)};
      }
    });
    http.setAuthSupplier(authSupplier);

    HTTPClientPolicy httpClientPolicy = new HTTPClientPolicy();
    httpClientPolicy.setAllowChunking(false);
    httpClientPolicy.setAutoRedirect(true);

    http.setClient(httpClientPolicy);

    Holder<ArrayOfSList> vLists = new Holder<>();
    Holder<Long> getListCollectionResult = new Holder<>();
    soap.getListCollectionAsync(getListCollectionResult, vLists, res -> {
      try {
        GetListCollectionResponse listCollectionResponse = res.get();
        ArrayOfSList arrayOfSList = listCollectionResponse.getVLists();
        LOG.info("Successfully got {} lists from {}", arrayOfSList.getSList().size(), endpointAddressFinal);
        for (SList slist : arrayOfSList.getSList()) {
          LOG.info("Successfully got list {}", slist.getTitle());
        }
        System.exit(0);
      } catch (Exception e) {
        LOG.error("List collection response", e);
      }
    });
  }
} 
```

这是关于 JDK7 和 glassfish 的另一个示例。请注意 Nikolay Smirnov 的评论。我使用 jdk 7 和 glassfish 3.1.2。在这种环境中，如果服务器处理自签名证书，则建议的解决方案非常有效。

```
// import com.sun.xml.ws.developer.JAXWSProperties;
import java.security.GeneralSecurityException;
import java.security.SecureRandom;
import java.util.Map;
import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.KeyManager;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSession;
import javax.net.ssl.SSLSocketFactory;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;
import javax.xml.ws.BindingProvider;
import org.apache.cxf.configuration.jsse.TLSClientParameters;
import org.apache.cxf.endpoint.Client;
import org.apache.cxf.frontend.ClientProxy;
import org.apache.cxf.transport.http.HTTPConduit;

/**
 *
 * Usage examples (BindingProvider port):
 * NaiveSSLHelper.makeWebServiceClientTrustEveryone(port); // GlassFish
 * NaiveSSLHelper.makeCxfWebServiceClientTrustEveryone(port); // TomEE
 * 
 * Based on Erik Wramner's example frome here:
 * http://erikwramner.wordpress.com/2013/03/27/trust-self-signed-ssl-certificates-and-skip-host-name-verification-with-jax-ws/
 *
 * I have extended the functionality when Apache CXF is used.
 */
public class NaiveSSLHelper {

    private static final String JAXWS_HOSTNAME_VERIFIER = "com.sun.xml.ws.transport.https.client.hostname.verifier"; // JAXWSProperties.HOSTNAME_VERIFIER;
    private static final String JAXWS_SSL_SOCKET_FACTORY = "com.sun.xml.ws.transport.https.client.SSLSocketFactory"; // JAXWSProperties.SSL_SOCKET_FACTORY;

    // In Glassfish (Metro) environment you can use this function (Erik Wramner's solution)
    public static void makeWebServiceClientTrustEveryone(Object webServicePort) {
        if (webServicePort instanceof BindingProvider) {
            BindingProvider bp = (BindingProvider) webServicePort;
            Map requestContext = bp.getRequestContext();
            requestContext.put(JAXWS_SSL_SOCKET_FACTORY, getTrustingSSLSocketFactory());
            requestContext.put(JAXWS_HOSTNAME_VERIFIER, new NaiveHostnameVerifier());
        } else {
            throw new IllegalArgumentException(
                    "Web service port "
                    + webServicePort.getClass().getName()
                    + " does not implement "
                    + BindingProvider.class.getName());
        }
    }

    // In TomEE (Apache CXF) environment you can use this function (my solution)
    public static void makeCxfWebServiceClientTrustEveryone(Object port) {
        TrustManager[] trustManagers = new TrustManager[]{
            new NaiveTrustManager()
        };
        Client c = ClientProxy.getClient(port);
        HTTPConduit httpConduit = (HTTPConduit) c.getConduit();
        TLSClientParameters tlsParams = new TLSClientParameters();
        tlsParams.setSecureSocketProtocol("SSL");
        tlsParams.setKeyManagers(new KeyManager[0]);
        tlsParams.setTrustManagers(trustManagers);
        tlsParams.setDisableCNCheck(true);
        httpConduit.setTlsClientParameters(tlsParams);
    }

    public static SSLSocketFactory getTrustingSSLSocketFactory() {
        return SSLSocketFactoryHolder.INSTANCE;
    }

    private static SSLSocketFactory createSSLSocketFactory() {
        TrustManager[] trustManagers = new TrustManager[]{
            new NaiveTrustManager()
        };
        SSLContext sslContext;
        try {
            sslContext = SSLContext.getInstance("SSL");
            sslContext.init(new KeyManager[0], trustManagers, new SecureRandom());
            return sslContext.getSocketFactory();
        } catch (GeneralSecurityException e) {
            return null;
        }
    }

    private static interface SSLSocketFactoryHolder {

        public static final SSLSocketFactory INSTANCE = createSSLSocketFactory();
    }

    private static class NaiveHostnameVerifier implements
            HostnameVerifier {

        @Override
        public boolean verify(String hostName,
                SSLSession session) {
            return true;
        }
    }

    private static class NaiveTrustManager implements
            X509TrustManager {

        @Override
        public void checkClientTrusted(java.security.cert.X509Certificate[] certs,
                String authType) throws java.security.cert.CertificateException {
        }

        @Override
        public void checkServerTrusted(java.security.cert.X509Certificate[] certs,
                String authType) throws java.security.cert.CertificateException {
        }

        @Override
        public java.security.cert.X509Certificate[] getAcceptedIssuers() {
            return new java.security.cert.X509Certificate[0];
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-08T07:44:25.820

如果有人仍然想在 JAX-WS 客户端中禁用证书验证，则抛开所有随之而来的安全问题。我就是这样做的。

注意：这样，**您不会中断所有连接的 SSL/TLS，而是仅禁用该客户端的证书验证。**

```
import java.security.cert.X509Certificate;

import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;

import org.apache.cxf.configuration.jsse.TLSClientParameters;
import org.apache.cxf.endpoint.Client;
import org.apache.cxf.frontend.ClientProxy;
import org.apache.cxf.jaxws.JaxWsProxyFactoryBean;
import org.apache.cxf.transport.http.HTTPConduit;

/** Custom JAX-WS client factory used to ignore certificate validation */
public class NotSecureClientFactory extends JaxWsProxyFactoryBean {

    @Override
    protected ClientProxy clientClientProxy(Client c) {
        // Create a client factory that does not validate certificate chains
        ClientProxy cp = super.clientClientProxy(c);
        HTTPConduit httpConduit = (HTTPConduit) cp.getClient().getConduit();
        httpConduit.setTlsClientParameters(tlsClientParameters());
        return cp;
    }

    public TLSClientParameters tlsClientParameters() {
        TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {
            public X509Certificate[] getAcceptedIssuers() {
                return null;
            }

            public void checkClientTrusted(X509Certificate[] certs, String authType) {
            }

            public void checkServerTrusted(X509Certificate[] certs, String authType) {
            }
        } };

        TLSClientParameters tlsClientParameters = new TLSClientParameters();
        tlsClientParameters.setTrustManagers(trustAllCerts);
        return tlsClientParameters;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-25T16:10:54.810

实际上 CXF 带有一个[InsecureTrustManager](https://cxf.apache.org/javadoc/latest/org/apache/cxf/transport/https/InsecureTrustManager.html)用于测试目的。

对于 Spring Boot 应用程序，在所有 CXF 客户端中禁用 TLS 验证就像下面这样简单。不用说，你**永远**不应该在产品环境中这样做。

```
import org.apache.cxf.configuration.jsse.TLSClientParameters;
import org.apache.cxf.endpoint.Client;
import org.apache.cxf.frontend.ClientProxy;
import org.apache.cxf.transport.http.HTTPConduit;
import org.apache.cxf.transport.https.InsecureTrustManager;
import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;
import org.springframework.context.annotation.Configuration;

import javax.inject.Inject;
import javax.xml.ws.BindingProvider;
import java.util.Set;

@ConditionalOnProperty(value = "soap.validate-tls.client", havingValue = "true")
@Configuration
class DisableTlsCxfClientConfig {
    @Inject
    DisableTlsCxfClientConfig(Set<BindingProvider> soapClients) {
        var insecureTlsParam = new TLSClientParameters();
        insecureTlsParam.setTrustManagers(InsecureTrustManager.getNoOpX509TrustManagers());
        insecureTlsParam.setDisableCNCheck(true);
        soapClients.stream()
                .map(ClientProxy::getClient)
                .map(Client::getConduit)
                .map(HTTPConduit.class::cast)
                .forEach(c -> c.setTlsClientParameters(insecureTlsParam));
    }
} 
```

向提供所有作品的@addiene、@jontro 和@Miklos Krivan 大喊！非常感谢！

# php - 如何在 php 中比较这种格式？12 年 4 月 30 日 03.46.59.000000000 下午？

> ID：12473577
> 
> 赞同：0
> 
> 时间：2012-09-18T08:57:06.750
> 
> 标签：php, oracle

如何在 PHP 中比较这种日期格式？12 年 4 月 30 日 03.46.59.000000000 下午

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:04:01.307

您可以从该格式创建一个 DateTime 对象，然后以您想要的任何格式获取日期 - [http://us2.php.net/manual/en/datetime.createfromformat.php](http://us2.php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:12:03.253

I am not sure what the last 9 digits are for. If it's milli seconds php supports just up to 6 digits with *u* thats why I'd used * to drop the last digits.

```
$date = DateTime::createFromFormat('j-M-y H.i.s.u*', '30-APR-12 03.46.59.000000000 PM'); 
```

Further information can be found here: [http://php.net/manual/en/datetime.createfromformat.php](http://php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:03:02.873

您可以使用 DateTime 函数`createfromformat()`（[此处](http://us2.php.net/manual/en/datetime.createfromformat.php)）。如果您从中制作时间戳（使用[strtotime](http://php.net/manual/en/function.strtotime.php)或[getTimeStamp](http://www.php.net/manual/en/datetime.gettimestamp.php)），则很容易与其他时间戳进行比较。

# java - 如何从 java File 在终端上执行我自己的命令

> ID：12473582
> 
> 赞同：1
> 
> 时间：2012-09-18T08:57:20.200
> 
> 标签：java, terminal, ros

我正在尝试用 Java 制作一个 Eclipse 项目来启动带有一些按钮的命令。Ros fuerte 的库（我想使用的这些库）已正确安装，具体来说，我正在尝试使用以下方法从 Java 文件启动 ros 命令：

```
String cmd = "roscore";

Runtime rt = Runtime.getRuntime();

Process p = rt.exec(cmd); 
```

如果我从当前终端启动此命令，它可以工作，但如果我从 java 文件执行此命令，我会遇到问题，因为终端无法识别该命令。

```
java.io.IOException: Cannot run program "roscore": java.io.IOException: error=2, No such file or directory
at java.lang.ProcessBuilder.start(ProcessBuilder.java:475)
at java.lang.Runtime.exec(Runtime.java:610)
at java.lang.Runtime.exec(Runtime.java:448)
at java.lang.Runtime.exec(Runtime.java:345)
at LaunchTerminal.main(LaunchTerminal.java:24) 
```

我认为我需要添加一些路径或类似的，但我没有找到信息。有人知道怎么做吗？

感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:15:58.207

only normal commands are possible to execute like rm or cd ... al others must be referenced with full path of context

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:08:54.177

如果您使用的是 groovy 发行版，请执行以下操作：

```
String cmd = "source /opt/ros/groovy/setup.bash && roscore"; 
```

# java - T 不理解 `java.lang.reflect.Type` 或 java.lang.Class

> ID：12473583
> 
> 赞同：1
> 
> 时间：2012-09-18T08:57:26.340
> 
> 标签：java, generics

我希望我的`T`类型是`java.lang.reflect.Type`接口的实例或`java.lang.Class<T>`

我创建了如下示例代码

```
public class Car<T extends Type> {
private T t;
public Car(T t) {
    this.t = t;
}
public static void main(String[] args) {
    Car<String.class> car = new Car(String.class);//Error String.class
}
} 
```

**我知道在上面的例子中我可以使用`Class<T>`而不是使用`T`**. 我想知道是否有任何方法`T`可以理解它是`Type`or `Class`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:01:52.327

而不是`Car<String.class>`，写`Car<Class<String>>`。

`String.class`是一个**对象**。在尖括号之间，您必须指定一个**类型**。您要查找的类型是`Class<String>`.

# matlab - matlab中k-means之前的图像预处理

> ID：12473584
> 
> 赞同：0
> 
> 时间：2012-09-18T08:57:29.263
> 
> 标签：matlab, cluster-computing, k-means

我在实现 K-means 时遇到了问题，如何将第一个参数安排到 kmeans，假设这是 kmeans..

```
[cidx center] = kmeans(F, 3, 'distance','sqEuclidean','Replicates',5); 
```

如何以正确的格式获得 F，如果 size(F)==[d,n]，其中 'd'` 是每个 n 变量的一组数据点。怎么，得到这样的F？

这些“d”（数据点）和“n”（变量）是什么。

如何将普通灰度图像转换为这种格式。

输出**中心**是一个 3*n 矩阵（3 是簇数，'n' 是变量数）。结果与变量有什么关系，有什么变量？

我能够理解第一个输出**cidx**，每个数据点的集群索引（每个数据点，属于第一个或第二个或第三个集群，对吗？）

帮我解决一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:16:50.753

我认为您的问题不是F的大小，而是类型。kmeans 需要双倍。试试这条线，它适用于我的 MATLAB

```
[cidx center] = kmeans(double(F), 3, 'distance','sqEuclidean','Replicates',5); 
```

# web-services - 在端点处理程序（spring ws）中访问 jaxb2 编组器

> ID：12473585
> 
> 赞同：1
> 
> 时间：2012-09-18T08:57:31.013
> 
> 标签：web-services, spring, spring-mvc, spring-webflow

我正在使用 Spring-WS 1.5。我的 spring-servlet.xml 中有以下配置。

```
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:sws="http://www.springframework.org/schema/web-services"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd                                                 
  http://www.springframework.org/schema/web-services http://www.springframework.org/schema/web-services/web-services-2.0.xsd                                                       
  http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

  <context:component-scan base-package="com.test.mypackage"/>

  <bean class="org.springframework.ws.server.endpoint.adapter.GenericMarshallingMethodEndpointAdapter">
        <constructor-arg ref="jaxbmarshaller"/>
  </bean>

  <bean id="jaxbmarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
        <property name="classesToBeBound">
                <list>
                        <value>com.test.myclass1</value>
                        <value>com.test.myclass2</value>
                </list>
        </property>
  </bean>

  <bean id="endpointMapping" class="org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping">
    <property name="interceptors">
            <list>
                <bean class="org.springframework.ws.server.endpoint.interceptor.PayloadLoggingInterceptor"/>
            </list>
    </property>
  </bean>

</beans> 
```

“GenericMarshallingMethodEndpointAdapter”正在解组请求并使用此配置编组响应并按预期工作。但是，我想在我的端点方法处理程序中编组请求并希望访问编组器。如何访问编组器。我是否可以访问提供给 GenericMarshallingMethodEndpointAdapter 的那个。

```
@Endpoint
public class MyEndpoint {

        private static final String NAMESPACE_URI =  "http://www.test.org/9";

        @PayloadRoot(namespace = NAMESPACE_URI, localPart = "RequestData")
        public JAXBElement<ResponseType> myEndpointHandler(JAXBElement<RequestType> request) {
            /* how do I access the marshaller here to marshal the request */
         }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:26:06.883

您可以自动装配它：

```
@Service
public class MarshallingServiceImpl implements MarshallingService{

    @Autowired
    private Jaxb2Marshaller jaxbmarshaller;

    @Override
    public String marshal(Entity entity) {
        StringResult marshalled = new StringResult();
        jaxbmarshaller.marshal(entity, marshalled);
        return marshalled.toString();
    }

} 
```

# magento - 如何在 Magento 中调整大小后显示类别图像？

> ID：12473586
> 
> 赞同：1
> 
> 时间：2012-09-18T08:57:43.707
> 
> 标签：magento

我正在显示任何尺寸的图像以适合 175x175 框架，因此它会在类别页面上失去其原始形状。

我想在调整大小后显示类别图像，以调整和显示类似产品图像的大小。

如何在 Magento 1.7.0.2 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:15:47.760

You will have to maually resize using Magento's image libs, herwes an example (http://blog.chapagain.com.np/magento-resize-image/):

```
// actual path of image
$imageUrl = Mage::getBaseDir('media').DS."myimage".DS.$post->getThumbnail();

// path of the resized image to be saved
// here, the resized image is saved in media/resized folder
$imageResized =     Mage::getBaseDir('media').DS."myimage".DS."resized".DS.$post->getThumbnail();

// resize image only if the image file exists and the resized image file doesn't exist
// the image is resized proportionally with the width/height 135px
if (!file_exists($imageResized)&&file_exists($_imageUrl)) :
    $imageObj = new Varien_Image($_imageUrl);
    $imageObj->constrainOnly(TRUE);
    $imageObj->keepAspectRatio(TRUE);
    $imageObj->keepFrame(FALSE);
    $imageObj->resize(135, 135);
    $imageObj->save($imageResized);
endif;

$newImageUrl = Mage::getBaseUrl('media')."catalog/category/resized/".$imageName; 
```

If you take a look at Varien_Image you will see there's a few different methods to help resize images. Unfortunately there's no helper to use as there is for product images, although it wouldn't be difficult to make a helper to do this.

# facebook - 如何使用以电子邮件 ID 作为参数的 Facebook API 获取 Facebook 个人资料？

> ID：12473601
> 
> 赞同：1
> 
> 时间：2012-09-18T08:58:15.130
> 
> 标签：facebook, facebook-graph-api, eclipse-rcp

我正在开发一个 RCP 应用程序，它采用电子邮件 ID 并使用 Browser 类的实例在视图中显示与其关联的 Facebook 个人资料。Facebook API 是否提供通过电子邮件 ID 进行搜索的这种选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:30:02.090

Facebook 的 FQL User 表只有 uid、username 和 Name（用户的全名）作为可索引列。Facebook 的公共 API 不支持通过电子邮件地址进行搜索。

[FQL 用户表文档](https://developers.facebook.com/docs/reference/fql/user/)

# c# - DynamoDB：不使用主键删除项目

> ID：12473603
> 
> 赞同：4
> 
> 时间：2012-09-18T08:58:19.150
> 
> 标签：c#, amazon-dynamodb

我正在我们的项目中实施 DynamoDB。我们必须将大数据字符串放入数据库，因此我们将数据分成小块并插入多行，其中仅更改一个属性值 - 字符串的一部分。一列（范围键）包含多个部分。插入和选择数据对于小字符串和大字符串都非常有效。问题是删除一个项目。我读到，当您想删除一个项目时，您需要为该项目指定主键（散列键或散列键和范围键 - 取决于表）。但是，如果我想删除对某个属性具有特定值的项目怎么办？我是否需要扫描（扫描，而不是查询）整个表并为每一行运行删除或批量删除？或者是否有其他不使用两个查询的解决方案？我想要做的是避免扫描整个表。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:54:34.047

**无法删除 DynamoDB 中的任意**元素。你确实需要知道`hash_key`和`range_key`。

如果`query`不符合您对此的需求（即您甚至不知道`hash_key`），那么您将陷入困境。

最好的办法是**重新构建您的数据建模**。构建**[自定义索引](http://blog.coredumped.org/2012/01/amazon-dynamodb.html)**或执行“**延迟删除**”。

要实现“延迟删除”，请使用表作为要删除的元素队列。定期在其上运行 EMR 以在一次扫描操作中执行批处理中的所有删除操作。这真的不是最好的解决方案，而是我能想到的避免重新建模的唯一方法。

**TL;DR**：除了变通方法之外没有真正的方法。我强烈建议您至少重新建模部分数据。

# javascript - 画布游戏仅在窗口处于非活动状态时才开始绘制

> ID：12473604
> 
> 赞同：0
> 
> 时间：2012-09-18T08:58:19.647
> 
> 标签：javascript, canvas

我注意到我的画布代码中有一些奇怪的东西：我正在制作一个带有小飞鬼的游戏。鬼的课程如下。当我通过手动添加代码来绘制 1 或 2 个 em 并通过每帧更新 x 让 em 向右飞行时，例如一切运行顺利且正常。

现在我运行另一个测试，每 100 帧向数组添加一个重影，将其 x 更新 100，然后将该重影绘制到帧中。（代码在第一个块下方，即绘制函数）。

**现在的问题是它们实际上是被添加和绘制的，但是直到我通过单击任务栏使窗口处于非活动状态之前，我才在板上看到它们。**

Any1 知道这里出了什么问题？

```
 /* 
 * Class for little ghosts
 */
function Ghost (name) {
    this.name = name;
    this.ghost = new Image();
    this.ghost.src = "img/ghost.png";
    this.ghostWidth = 150;
    this.ghostHeight = 100;
    this.ghostSpriteOffsetX = 0;
    this.ghostSpriteOffsetY = 0;
    this.ghostX = 0;
    this.ghostY = 0;
}
Ghost.prototype.drawGhost = function() {
    context2D.drawImage(this.ghost, this.ghostSpriteOffsetX, this.ghostSpriteOffsetY, this.ghostWidth, this.ghostHeight, this.ghostX, this.ghostY, this.ghostWidth, this.ghostHeight);
};
Ghost.prototype.goToX = function(x) {
    this.ghostX = x;
};
Ghost.prototype.goToY = function(y) {
    this.ghostY = y;
};
Ghost.prototype.turnPink = function() {
    this.ghostSpriteOffsetX = 0;
};
Ghost.prototype.turnBlue = function() {
    this.ghostSpriteOffsetX = 150;
};
Ghost.prototype.turnPurple = function() {
    this.ghostSpriteOffsetX = 300;
 }; 
```

-

```
function draw()
{
// clear board
context2D.clearRect(0, 0, canvas.width, canvas.height);

if(frame%100==0){
    ghosts[ghostId] = new Ghost("g-"+frame);
    ghosts[ghostId].goToX(frame-100);
    ghostId++;
}
// Draw ghost
for (i=0; i<ghosts.length; i++)
{
    ghosts[i].drawGhost();
}

frame++;
} 
```

# unix - 从文件运行 date +%s 命令

> ID：12473613
> 
> 赞同：0
> 
> 时间：2012-09-18T08:58:54.463
> 
> 标签：unix, date

当我`date +%s`直接在 unix 终端上运行命令时，它会正确执行并给出自 1970 年以来的秒数。

但是，当同一命令位于脚本文件中时，请说 temp.sh，如下所示：

```
business_dt=date +%s
echo $business_dt 
```

在执行上述脚本时，它会引发如下错误：

```
-ksh: +%s: not found [No such file or directory] 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:08:21.447

您需要使用**命令替换**将命令的输出分配给变量。语法是`var=$(command)`. 因此，尝试将脚本更改为：

```
business_dt=$(date +%s) 
```

# python - 我的python版本有什么问题吗？

> ID：12473615
> 
> 赞同：-2
> 
> 时间：2012-09-18T08:58:55.473
> 
> 标签：python, datetime

当我输入python代码时：

```
today=datetime.datetime.now()
toda
today.weekday(), 
```

结果是：

```
datetime.datetime(2012, 9, 18, 16, 53, 35, 124836)    
1 
```

但是，应该是2吗？有什么不对还是我的错？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T09:02:52.710

从[文档](http://docs.python.org/library/datetime.html)中，

> 以整数形式返回星期几，其中星期一为 0，星期日为 6。例如，`date(2002, 12, 4).weekday() == 2`星期三。另请参阅`isoweekday()`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T09:00:56.597

不，今天是星期二，那是[工作日 1](http://docs.python.org/library/datetime.html#datetime.datetime.weekday)，遵循文档：

> 以整数形式返回星期几，其中星期一为 0，星期日为 6。同`self.date().weekday()`. 另请参阅`isoweekday()`。

所以星期一是`0`，星期二是`1`，等等。

如果您想`2`在星期二使用，请[`.isoweekday()`](http://docs.python.org/library/datetime.html#datetime.datetime.isoweekday)改用：

```
>>> datetime.datetime.now().isoweekday()
2 
```

> 以整数形式返回星期几，其中星期一为 1，星期日为 7。同`self.date().isoweekday()`. 另请参阅`weekday()`，`isocalendar()`。

# c++ - 在 C++ 中作为参数传递时，变量何时被复制？

> ID：12473621
> 
> 赞同：0
> 
> 时间：2012-09-18T08:59:21.047
> 
> 标签：c++, pointers, assembly, reference

> **可能重复：**
> [参考是如何在内部实现的？](https://stackoverflow.com/questions/3954764/how-is-reference-implemented-internally)

```
void f (int& a)
{
    a ++;
}

int main ()
{
    int b = 5;
    f(b);
    cout << b << endl; //prints 6
} 
```

当我看到 C++ 中引用的语法时，最初看起来变量 b（如果它是一个对象）将被复制到 f 中。这些引用实际上是如何在幕后工作的？（一些简单的 asm 会很棒。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:01:41.543

在这种情况下，按引用传递最有可能使用指针语义 - 即对象的地址可能作为参数传递。\

> 当我看到 C++ 中引用的语法时，最初看起来变量 b（如果它是一个对象）将被复制到 f 中。

没有。这是参考文献的好处之一——没有复制。

```
 f(b);
00DF1405  lea         eax,[b]  
00DF1408  push        eax  
00DF1409  call        f (0DF1177h)  
00DF140E  add         esp,4 
```

`eax`将包含 的地址`b`，然后被压入函数参数堆栈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:04:24.283

C++ 引用的底层实现与指针完全一样。唯一的区别是一些编译时检查和不同的语法。因此，在您的情况下，函数 f 获得一个指向整数 b 的“指针”并增加 b 的值。

# java - NullPointerException 在 android.widget.AbsListView.contentFits(AbsListView.java:722)

> ID：12473625
> 
> 赞同：7
> 
> 时间：2012-09-18T08:59:35.323
> 
> 标签：java, android, android-listview, nullpointerexception, android-ui

我得到一个奇怪的`NullPointerException`. 我的代码中没有任何指向。我也知道我的应用程序仅在以下情况下提供此 NullPointerException：

**制造商：索尼爱立信
产品：MT11i_1256-3856
Android版本：2.3.4**

有任何想法吗？

```
java.lang.NullPointerException
    at android.widget.AbsListView.contentFits(AbsListView.java:722)
    at android.widget.AbsListView.onTouchEvent(AbsListView.java:2430)
    at android.widget.ListView.onTouchEvent(ListView.java:3447)
    at android.view.View.dispatchTouchEvent(View.java:3952)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:995)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1034)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1034)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1034)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1034)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1711)
    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1145)
    at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1695)
    at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2217)
    at android.view.ViewRoot.handleMessage(ViewRoot.java:1901)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3701)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T13:28:12.143

我们的应用程序中有很多类似的例外情况。我对Android OS源代码做了一些研究，得出了一个结论——这是Android OS Gingerbread及以下的bug，已经在Ice Cream Sandwich中修复了。

如果您想了解更多详细信息，请查看[`AbsListView.contentFits`](http://androidxref.com/2.3.6/xref/frameworks/base/core/java/android/widget/AbsListView.java)Gingerbread 源代码树中方法的源代码：

```
private boolean contentFits() {
    final int childCount = getChildCount();
    if (childCount != mItemCount) {
        return false;
    }

    return getChildAt(0).getTop() >= 0 && getChildAt(childCount - 1).getBottom() <= mBottom;
} 
```

很明显，`NullPointerException`如果为空列表调用此方法将抛出，因为`getChildAt(0)`将返回 NULL。这已在[ICS 源代码树中修复](http://androidxref.com/4.1.1/xref/frameworks/base/core/java/android/widget/AbsListView.java)

```
private boolean contentFits() {
    final int childCount = getChildCount();
    if (childCount == 0) return true;
    if (childCount != mItemCount) return false;

    return getChildAt(0).getTop() >= mListPadding.top &&
            getChildAt(childCount - 1).getBottom() <= getHeight() - mListPadding.bottom;
} 
```

如您所见，有一个检查`(childCount == 0)`.

关于此问题的**解决方法**- 您可以使用 try-catch 块声明自己的类`MyListView extends ListView`、覆盖方法`onTouchEvent`和环绕调用。`super.onTouchEvent()`当然，您需要在应用程序的所有位置使用您的自定义 ListView 类。

# iphone - iPhone应用程序中退出时结束时出现运行时错误

> ID：12473626
> 
> 赞同：-2
> 
> 时间：2012-09-18T08:59:45.253
> 
> 标签：iphone, ios, ios5, ios4

有谁知道为什么当我点击 iphone 键盘上的返回按钮时出现运行时错误。完成对 UITextField 的值编辑后，我需要隐藏键盘。所以我分配了在退出时结束到 IBAction 和下面的 IBAction 代码

```
-(IBAction)FinishEditing:(id)sender
{
    [folderName resignFirstResponder];
} 
```

运行 ma 项目时，我面临运行时错误和如下所示的变量值

```
argv char ** 0xbffff58c
*argv char * 0xbffff6b8
**argv char '/' 
```

控制台值 `(lldb)`

任何想法来克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:00:18.963

您可以使用文本字段委托方法来执行此过程。无需为此使用固定 IBActions

```
– textFieldShouldBeginEditing:
– textFieldDidBeginEditing:
– textFieldShouldEndEditing:
– textFieldDidEndEditing: 
```

参考[这个](https://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html) 和

[这是一个很好的教程](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uitextfield-uitextfielddelegate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:26:32.540

谢谢你们帮助我。最后我弄清楚我的问题..

最初我的代码是这样的

```
AddFolder *addButton = [[AddFolder alloc] initWithNibName:@"AddFolder" bundle:[NSBundle mainBundle]];
[self.view addSubview:addButton.view];
[addButton release]; 
```

现在ma代码是这样的

```
AddFolder *addButton = [[AddFolder alloc] initWithNibName:@"AddFolder" bundle:[NSBundle mainBundle]];
[self.view addSubview:addButton.view]; 
```

添加子视图后我们不需要释放内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:30:35.293

根据您的问题，您希望`keyboard`在单击**返回按钮**`keyboard`时隐藏。所以不需要为此做任何**按钮操作**。你可以通过`UITextField`委托方法来做到这一点。添加文件，然后简单地在文件中写入以下方法`UITextFieldDelegate`：-`ViewController.h``ViewController.m`

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
} 
```

它会在点击时**返回**。`return button``keyboard`

# c++ - 序列化异构映射

> ID：12473627
> 
> 赞同：1
> 
> 时间：2012-09-18T08:59:47.427
> 
> 标签：c++, map

我必须将映射序列化为文件。首先，我将映射放入字节缓冲区，然后将字节缓冲区写入文件。在 load 方法中，首先将整个文件读入 bytebuffer，然后从 bytebuffer 中填充映射。目前我有这个代码（没有文件处理）：

保存方法：

```
map<int, BaseClass*> myMap;
map<int, BaseClass*>::iterator it;
ByteBuffer bb;

bb.putUInt(myMap.size());
for (it = myMap.begin(); it!= myMap.end(); it++){
  bb.putUInt(it->first);
  it->second->save(bb); // the save method put the static type first, then the data
} 
```

加载方法

```
...// get the map size from bb
for (int i=0; i<size; i++){
  int key = bb.getUInt() // in the real code there isn't signed/unsigned mismatch
  BaseClass* value = MyFactory.create(bb) // detailed later
  myMap.insert(key,value);
} 
```

MyFactory.create：

```
BaseClass* MyFactory::create( ByteBuffer& bb){
  TypeEnum type = static_cast<TypeEnum>(bb.getUInt());
  BaseClass* value;

  switch (type){
    case DerivedClass1:
      value = new DerivedClass1()
      break;

    case DerivedClass2:
      value = new DerivedClass2()
      break;

    // etc...
  }

  value->load(bb);
  return value;
} 
```

使用这个解决方案，我有一个很大的枚举 TypeEnum、一个长开关，并且对于基类的每个新派生类，我都必须增加它们。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:19:57.060

I think your approach is correct. However you migth want to consider following improvement:

Use smart pointer inside the factory::create. Because now it is not exception safe:

```
 std::auto_ptr<BaseClass> MyFactory::create(ByteBuffer& bb)
    {
        TypeEnum type = static_cast<TypeEnum>(bb.getUInt());
        std::auto_ptr < BaseClass > value;
        switch (type)
        {
            case DerivedClass1:
                value.reset(new DerivedClass1());
                break;
            case DerivedClass2:
                value.reset(new DerivedClass2());
                break;
        }
        value->load(bb);
        return value;
    } 
```

This way if it fails on loading you will not have memory leak.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:25:52.550

在您的位置，我会考虑使用[Boost.Serialization](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html)库。

# php - 在 symfony 2 功能测试中找不到路由

> ID：12473639
> 
> 赞同：4
> 
> 时间：2012-09-18T09:00:07.253
> 
> 标签：php, symfony, phpunit

我正在尝试编写 symfony 2 功能测试。这是我的代码：

```
<?php

namespace WebSite\MainBundle\Tests\Controller;

use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;

class ProductControllerTest extends WebTestCase
{

    public function testPageContents()
    {
        $domCategoryLinksExpr = '.catalog-col-block > ul > li > a';

        $client = static::createClient();

        $crawler = $client->request('GET', '/catalog/');
        $this->assertTrue($client->getResponse()->getStatusCode() == '200');

        $countCategories = $crawler->filter($domCategoryLinksExpr)->count();
        $this->assertTrue($crawler->filter($domCategoryLinksExpr)->count() > 0);

        $categoryLink = $crawler->filter($domCategoryLinksExpr)->eq(rand(1, $countCategories))->link();
        $crawler = $client->click($categoryLink);
    }
} 
```

但是当我运行这个测试时：

```
phpunit -c app src/WebSite/MainBundle/Tests/Controller/ 
```

我懂了：

> 1) WebSite\MainBundle\Tests\Controller\ProductControllerTest::testPageContents Symfony\Component\HttpKernel\Exception\NotFoundHttpException: No route found for "GET /app_dev.php/catalog/psp" ...

`/app_dev.php/catalog/psp`是 的动态值`$categoryLink->getUri()`。并且这条路线存在并且在网络浏览器中正确工作。有任何想法吗？

升级版：

这是我的路由规则：

```
routing_dev.yml:
   ... 
   _main:
       resource: routing.yml
   ....

routing.yml:
    ....
    WebSiteCategoryBundle:
       resource: "@WebSiteCategoryBundle/Controller/"
       type:     annotation
       prefix:   /    
    ....

src/WebSite/CategoryBundle/CategoryController.php:
    /**
    * @Route("/catalog")
    */
    class CategoryController extends Controller
    {
        /**
        * @Route("/{alias}", name="show_category" )
        * @Template()
        */
        public function showAction( $alias )
        {
           // some action here
        }
    } 
```

它在浏览器中工作正常，但似乎 $crowler 没有看到这个注释规则。

UPD2：问题出在 Symfony 2 标准版中缺少的“routing_test.yml”中。所以我创建它：

```
routing_test.yml:
    _main:
        resource: routing_dev.yml 
```

异常消失。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:22:01.553

echo $client->getResponse()->getContent() 将帮助您进行调试（即使有异常）。它将输出请求的html。

看起来您的路线不存在并且可能位于错误的位置（指定了错误的环境？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:05:41.713

如果您发布了您的 routing.yml，那就太好了

你也可以看看： [http ://symfony.com/doc/master/bundles/SensioFrameworkExtraBundle/annotations/routing.html](http://symfony.com/doc/master/bundles/SensioFrameworkExtraBundle/annotations/routing.html)

您可以在您的操作中使用路由注释。

为了解决您的问题，我想查看您的路由配置。

# java - sh脚本中的nohup不起作用

> ID：12473641
> 
> 赞同：0
> 
> 时间：2012-09-18T09:00:08.617
> 
> 标签：java, shell, quartz-scheduler, nohup

我的 sh 脚本有问题。我正在编写一个允许我在后台执行 java 脚本的 sh 脚本，并在执行它之前检查它是否正在运行。

代码在这里：

```
## START ##
start)
echo $" "
echo $"Checking for agents running, wait please..."
MI_PS=$(ps -ef|grep $JAR_NAME |awk '{print $2, $7}' |egrep -v "00:00:00" |awk '{print$1}')

sleep 1
for kill_process in $MY_PS; do
/bin/kill -9 $kill_process
done

# Verificamos que se ha realizado correctamente
VERIFY=$?
if [ "$?" = "0" ]; then
    echo -n "Jar instance stopped correctly"
    echo -ne "\033[0;32m                     [OK] \033[0m"
    echo $" "
else
    echo -n "Jar instance stopped incorrectly"
    echo -ne "\033[0;31m                     [Error] \033[0m"
    echo ""
    echo "It is required to kill process "$MY_PS" manually."
    echo "Ask your administrator"
    echo $" "
fi

echo $" "
echo -n "Starting Jar"
echo $" "

nohup java -Dprops.dir=conf -jar func.jar &

echo $" "
echo -n "Jar running"
echo -ne "\033[0;32m                                            [OK] \033[0m"
echo $" "
;; 
```

我遇到的问题是，在设置*nohup ... &*以便在后台 jar 文件中执行时没有做任何事情。如果我写：

```
java -Dprops.dir=conf -jar func.jar 
```

然后它工作。我的 jar 文件正在使用石英库（Java 的调度程序库），我不知道你们中是否有人知道 nohup 和石英之间是否有任何不兼容...

*或者，设置 JVM 变量（ -Dprops.dir=conf*）可能存在某种问题

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T16:50:24.923

我发现了我的问题，结果证明它根本与 Quartz 无关。我将 SwingUtilities.invokeLater() 用于一些廉价的异步任务。出于某种原因，该程序只有在我的桌面上运行 xwindows 时才能运行，但在我关闭计算机（也关闭 xwindows）时会终止且不会记录任何错误。解决方法是使用 -Djava.awt.headless=true 启动程序

# ruby-on-rails - Rails 正则表达式：validates_format_for 具有两个不同分隔符的日期格式

> ID：12473648
> 
> 赞同：0
> 
> 时间：2012-09-18T09:00:31.123
> 
> 标签：ruby-on-rails, regex

我想在我的模型中验证`"10.02.2012"`或验证欧洲日期格式。`"10-02-2012"`

因此我使用这条线：

```
validates_format_of :matchdate, :with => /\A\d{2}(\.|-)\d{2}(\.|-)\d{4}\Z/i, :message => "Date incorrect" 
```

正则表达式必须是正确的，但无论我输入什么，它总是返回`"Date incorrect"`.

我从我使用的表单中获取输入

```
<%= f.text_field :matchdate, :size => '10' %> 
```

与 Datepicker UI 一起输出正确的格式。（我想同时使用“.”和“-”分隔符，因为我在另一个范围内收集日期，应该允许两个版本。）

参数看起来也正确，它说：`"...matchdate"=>"29.09.2012"`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:32:53.937

当您从 启动模型的新实例时`params`，Rails 会将您的日期转换为`Date`对象（使用我自己的模型的示例）：

```
i = Invoice.new due_date: "29.09.2012"
i.due_date                              #=> Sat, 29 Sep 2012 
i.due_date.class                        #=> Date 
```

但是您无法`Date`使用`Regex`. 你真正需要的是

```
validates :matchdate, presence: true 
```

因为`nil`如果 Rails 无法解析它，可能会在需要时添加一些[自定义验证器](http://guides.rubyonrails.org/active_record_validations.html#validates-with)。

# ios - iOS：使用 NSTask 检查 SVN 签出是否成功

> ID：12473651
> 
> 赞同：2
> 
> 时间：2012-09-18T09:00:51.013
> 
> 标签：ios, objective-c, svn, svn-checkout

所以我目前正在使用以下代码来签出 SVN 目录：

```
NSTask *task = [[NSTask alloc] init];
NSPipe *checkoutPipe = [[NSPipe alloc] init];
[task setLaunchPath:@"/usr/bin/svn"];
[task setArguments:[NSArray arrayWithObjects:@"checkout",SVN_URL_OF_PRJECT_DIR,DEST_DIR,@"--username",SVN_USER,@"--password",SVN_PASSWORD,nil]];
[task setStandardOutput:checkoutPipe];
[task launch];

NSFileHandle *file = [checkoutPipe fileHandleForReading];
NSData *data = [file readDataToEndOfFile];
NSString *checkoutResult = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

NSLog(@"Result: %@",checkoutResult); 
```

此代码工作正常，但我想以编程方式检查结帐是否真的成功？如果签出成功， NSLog 会打印“ `Checked out revision XY.`”，但我观察到即使文件实际上无法放入指定的目录（如果目标路径有点糟糕），它也会打印。它将打印 Checked out revision XY 消息以及目标目录不好的消息。

**所以我的问题是：**什么是测试结帐是否完全正常的可靠方法以及如何确保在结帐过程完成后完成检查（我不确定，但它不是异步的吗？或者会必须在 bg 线程中才能异步？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:47:20.083

首先等到任务完成。这可以同步完成：

```
[task waitUntilExit]; 
```

或通过注册并等待`NSTaskDidTerminateNotification`.

然后获取进程退出状态：

```
int status = [task terminationStatus]; 
```

对于大多数命令，退出状态`0`表示没有错误，退出状态`> 0`表示有错误。我很确定这适用于`svn`命令，但您可以使用 svn 文档进行检查。

# html - 覆盖 div 块的 CSS 链接

> ID：12473654
> 
> 赞同：3
> 
> 时间：2012-09-18T09:01:00.990
> 
> 标签：html, css

> **可能重复：**
> [链接到完整的 div - html 和 css](https://stackoverflow.com/questions/1516552/link-into-full-div-html-and-css)

我正在尝试构建`<a>`标签覆盖整个`<div>`块的CSS，以便`<div>`可以点击任何地方。

这是最终 div 的外观（图像为 64×64px）：

![在此处输入图像描述](../Images/ae2b7763087a5ff93b1f0df630195beb.png)

这是HTML：

```
 <div>
        <img src="" alt=""/>
        <h3><a>On The Beach</a> <span class="exclusive">Exclusive</span></h3>
        <span class="details">Save 10% off all package holidays</span>
    </div> 
```

任何 CSS 大师的帮助？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T09:05:12.783

也许你可以这样写：

```
<a href="#">
        <img src="" alt=""/>
        <h3><span>On The Beach</span> <span class="exclusive">Exclusive</span></h3>
        <span class="details">Save 10% off all package holidays</span>
    </a> 
```

**CSS**

```
a{
 display:block;
} 
```

*注意：根据 html5，您可以在`<a>`标签内定义块元素*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:06:58.230

如果你想锚覆盖整个块，你的 HTML 应该反映这一点。虽然块级锚点是 XHTML2/HTML5 的一个新想法，但它们几乎可以在所有现代浏览器（甚至 IE 7）中使用。

只需将所有 DIV 的内容与锚点括起来：

```
<div>
    <a href="#nohref">
        <img src="" alt="" />
        <h3>On The Beach <span class="exclusive">Exclusive</span></h3>
        <span class="details">Save 10% off all package holidays</span>
    </a>
</div>

div a {
    display: block;
} 
```

另请参阅：[http ://html5doctor.com/block-level-links-in-html-5/](http://html5doctor.com/block-level-links-in-html-5/)

> 闪亮，但不是新的
> 
> 这种技术的另一个非常有趣的地方在于，这实际上并不新鲜：你现在就可以做到。[…] 这是 HTML 5 的有趣之处之一——它记录了现有的浏览器行为。由于浏览器已经处理围绕块级元素的包装链接，并且有一个明显的用例，没有理由人为地保持结构无效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T09:05:22.677

用锚标签包裹

```
 <div>
 <a href="#" class="cont-wrap-link">
 <img src="" alt=""/>
 <h3><a>On The Beach</a> <span class="exclusive">Exclusive</span></h3>
 <span class="details">Save 10% off all package holidays</span>
 <a>
 </div> 
```

**CSS**

```
div a.cont-wrap-link
{padding:0px; margin:0px;
 display:block;
 text-decoration:none;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T09:23:26.060

**看看这篇** [文章](https://stackoverflow.com/questions/1827965/is-putting-a-div-inside-an-anchor-ever-correct)

**记住**：确保当 CSS 不存在时文档的结构仍然有意义。

**更新**

**您可以使用HTML5**实现此目的。检查[这个](http://html5doctor.com/block-level-links-in-html-5/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-18T09:33:49.643

看到您的文档类型是 HTML5，您可以将整个块包装在一个锚点中：

```
<a href="yourURL">
<div>
        <img src="" alt=""/>
        <h3><a>On The Beach</a> <span class="exclusive">Exclusive</span></h3>
        <span class="details">Save 10% off all package holidays</span>
    </div>
</a> 
```

不需要任何JS :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T09:03:24.247

虽然这可能可以用有点 hacky 的 CSS 来完成，但我相信 JS (jQuery) 在这种情况下更容易：

```
$('#the-div').click(function () {
    $(this).find('a').eq(0).click();
}); 
```

或类似的东西：

```
var theDiv = document.getElementByID('the-div');

theDiv.onclick = function () {
    window.location = theDiv.getElementsByTagName('a')[0].href;
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-18T09:05:15.003

我建议添加`onclick="location.href='http://google.com';" style="cursor:pointer;"`到您的 div 标签。

# special-characters - “？”的出现 导致身体与主体相结合？

> ID：12473667
> 
> 赞同：0
> 
> 时间：2012-09-18T09:01:33.950
> 
> 标签：special-characters, mailto

“？”的出现 在正文内容中导致正文与主题相结合，并且在“？”之后也是内容 被截断

```
<a href="mailto:someone@example.com?Subject=Your Friend Wants to Share A Link&body=   <%=str%>">Email to a friend</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:06:43.510

href 中的最后一个问号用于从路径中拆分查询。您应该对参数进行 url 编码。由于您似乎正在使用 ruby​​，因此您可以使用 url_encode ( [http://rdoc.info/stdlib/erb/1.8.7/ERB/Util:url_encode](http://rdoc.info/stdlib/erb/1.8.7/ERB/Util:url_encode) )。

# html - css中的相对URL损坏

> ID：12473677
> 
> 赞同：1
> 
> 时间：2012-09-18T09:02:24.050
> 
> 标签：html, css

在来自外部项目的每个 css 中，我必须像这样替换 url：

```
url(image.jpg) 
```

到

```
url(../image.jpg) 
```

也许这与我必须在斜杠中包含 css 的方式有关：

```
<link rel="stylesheet" type="text/css" href="/project1/style.css/"  th:href="@{ /project1/style.css/ }" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:04:42.207

你不需要包括额外的`/`

**试试这个：**

```
<link rel="stylesheet" type="text/css" href="/css/style.css"   th:href="@{ /css/style.css }" /> 
```

# c++ - 如何“跟踪”丢失的 ctor 初始化列表参数？

> ID：12473680
> 
> 赞同：4
> 
> 时间：2012-09-18T09:02:27.703
> 
> 标签：c++, constructor, initialization

我敢肯定，每个人都会不时面对丑陋的事情。

问题是向类添加一个字段并忘记扩展初始化列表，例如：

```
class T{
  private:
    field1;
    ...
    field10;
};

T::T( int speedValue ):
field1( Speed::MphToMps(speedValue) ),
field2( new OtherClass(14,5,15) ),
field3( PublicValueGenerator::generateNewFieldValue(0,15) ),
...,
field10( "unpredictable value" ); 
```

如果我匆忙添加一些字段，比如 newForgottenField，有时我会忘记设置初始化值。我记得有些 IDE 可以给出提示，但 vim+addons 是我的选择 :)

所以mb有一些提示可以简化跟踪这种情况或一些经验法则或粗鲁的宏，它们会给出警告或编译时错误（这将是惊人的:)）？你如何克服这个障碍？

最好的祝福

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T09:12:23.933

如果您使用的是 g++，那么它提供了一个选项，可以对违反 Scott Meyer 的有效 C++ 指南的构造发出警告：)
选项是：

```
-Weffc++ 
```

请注意，它还会启用许多其他警告。此外，并非所有标准库头文件都遵循 Meyers 准则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:15:23.760

获得所需内容的一种方法是确保所有字段都是类的实例，这些类要么具有执行所需操作的默认构造函数，要么仅具有需要参数的构造函数。

这并不总是很方便，但它肯定会解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:15:57.920

这是一个很好的问题，能够轻松检查会很有用，但总的来说，C++ 可以实际支持的解决方案结合了易错性、冗长性和混淆性，这使得它们比您要解决的问题更加繁琐. 尽管如此 - 为了讨论起见 - 这里有一些方法......

您可以创建一个没有默认构造函数的类：

```
template <typename T>
class Explicitly_Initialised
{
  public:
    Explicitly_Initialised(const T& t) : t_(t) { }
    T& operator T() { return t_; }
    const T& operator T() const { return t_; }
  private:
    T t_;
}; 
```

或者，如果对象在被赋予值之前被读取，您可以有一个抛出的类（如果您有这样的概念，可能仅在“调试”构建中）。您可以决定 from 的值是否`operator=`正常。您需要一个`bool has_been_initialised_;`成员来跟踪它，在默认构造函数中设置为 false。一个麻烦是`operator T()`在写入之前不知道变量是否即将被读取，因此要完成一项彻底的工作，您可能需要一个代理对象来管理这种情况：痛苦。

或者，实际上推荐的太混乱了——您可能可以将一个接受类型列表的类组合在一起，为每种类型都有一个成员对象，并坚持在构造函数中使用匹配列表；让泛型类接受普通的任意标识符来访问数据成员是很困难的（如果类型是唯一的，则很容易允许数字访问，甚至是基于类型的访问）（您可能可以让它与宏黑客一起使用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T09:40:59.947

在 C++11 中解决这个问题的最简单方法是为所有原始成员提供元素初始化器：

```
class T {
private:
    int field1{};
    ...
    int field10{};
}; 
```

# c# - 用另一个 EntityObject 更新一个 EntityObject

> ID：12473681
> 
> 赞同：1
> 
> 时间：2012-09-18T09:02:30.323
> 
> 标签：c#, entity-framework

我有一个小问题，我需要你的帮助。我正在使用实体框架进行数据库处理，并且我想更新此数据库中的数据集。

我有一个包含所有更改的 EntityObject，并希望能够使用现有对象更新此对象。

我正在使用以下代码来更新数据：

```
IQueryable<Competitors> getCompetitor = DatabaseObject.Competitors.Where(SelectOnly => SelectOnly.competitorID == competitorObject.competitorID);
Competitors competitor = getCompetitor.First();
competitor = competitorObject;
DatabaseObject.SaveChanges(); 
```

但这不起作用。如何更新数据库中的日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:09:20.903

假设您`competitorObject`的`Competitors`类型为 ( `competitor = competitorObject`)，您必须将其附加到您的上下文中，将其标记为已修改，然后保存更改：

```
DatabaseObject.Competitors.Attach(competitorObject);
DatabaseObject.Entry(competitorObject).State = EntityState.Modified;
DatabaseObject.SaveChanges(); 
```

在您的情况下，无需检索源对象，但如果不附加，上下文对您更新的对象一无所知。

如果您使用`ObjectContext`API 而不是`DbContext`API，则将对象标记为已修改的代码可能会有所不同：

```
DatabaseObject.ObjectStateManager.GetObjectStateEntry(competitorObject).SetModified(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:39:33.557

您需要对代码进行的唯一更改以使其正常工作是更新获取的实体上的至少一个属性。您正在更新参考，而不是像这样的属性值：

```
IQueryable<Competitors> getCompetitor = DatabaseObject.Competitors.Where(SelectOnly =>       SelectOnly.competitorID == competitorObject.competitorID);
Competitors competitor = getCompetitor.First();
competitor.Name = competitorObject.Name;
competitor.Contact = competitorObject.Contact;
DatabaseObject.SaveChanges(); 
```

或者正如丹尼斯所说，您可以将 附加`CompetitorObject`到上下文并将其标记为已修改。这样做会`Competitors`用 的值覆盖现有记录的所有属性`CompetitorObject`。

# jsf-2 - Richfaces 使用 a4j:ajax 的多种形式

> ID：12473684
> 
> 赞同：1
> 
> 时间：2012-09-18T09:02:49.250
> 
> 标签：jsf-2, richfaces

我有这个页面：

```
 <h:head></h:head>
    <h:body>
        <h:form id="someForm">
            Form is here
        </h:form>
        <h:form>
            <a4j:commandButton id="editButton" value="editSomeString"
                            execute="@this"
                            action="#{testBean.edit('afterEdit')}"
                            oncomplete="#{rich:component('editPanel')}.show()"
                            render="editPanel"/>
            <rich:popupPanel modal="true" id="editPanel" autosized="true"
                          domElementAttachment="form">
                <f:facet name="controls">
                    <a4j:ajax event="show" oncomplete="alert('#{testBean.someString}')" />
                </f:facet>
                Changed value is          
                #{testBean.someString}
            </rich:popupPanel>
        </h:form>
    </h:body> 
```

使用这个 bean：

```
@ViewScoped
@ManagedBean(name = "testBean")
public class TestBean implements Serializable {

public TestBean() {
    someString = "initValue";
}
private String someString;

public String getSomeString() {
    return someString;
}

public void setSomeString(String someString) {
    this.someString = someString;
}

public void edit(String value) {
   someString = value;
} 
```

}

现在，如果我单击弹出窗口中的按钮，我将获得正确的值（afterEdit），并在警报框中获得旧的值（initValue）。如果我删除第一个表单（id=someForm）或将 bean 范围更改为会话，它就可以正常工作（afterEdit 值显示在警报框中）。有什么想法吗？

我将此依赖项用于 jsf：

```
 <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-api</artifactId>
        <version>2.1.1-b04</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-impl</artifactId>
        <version>2.1.1-b04</version>
        <scope>compile</scope>
    </dependency> 
```

以及richfaces 4.0.0.Final 和 GlassFish Server 开源版 3.1.2（内部版本 23）

同一页面的另一个变体（添加了 onhide 和 onshow 方法）

```
<h:head></h:head>
    <h:body>
        <h:form id="someForm">
            Form is here
        </h:form> 
        <h:form>
            <a4j:commandButton id="editButton" value="go"
                            execute="@this"
                            action="#{testBean.edit('afterEdit')}"
                            oncomplete="#{rich:component('editPanel')}.show()"
                            render="editPanel,y"/>
            <rich:popupPanel modal="true" id="editPanel" autosized="true"
                             styleClass="taskEditPanel" domElementAttachment="form" onhide="alert('from on hide #{testBean.someString}')" onshow="alert('from on show #{testBean.someString}')">
                <f:facet name="controls">
                    <a4j:ajax event="show" oncomplete="alert('show complete #{testBean.someString}')"  />
                    <a4j:ajax event="hide" oncomplete="alert('hide complete  #{testBean.someString}')"/>
                </f:facet>
                Changed value is           
                #{testBean.someString}
                 <a4j:commandButton id="exitButton" value="exit"
                            execute="@this"
                            oncomplete="#{rich:component('editPanel')}.hide()"
                            />
            </rich:popupPanel>
        </h:form> 
    </h:body> 
```

如果您尝试打开和关闭弹出窗口，则会出现这些警报：

1.  “来自编辑后的节目”
2.  “显示完整的 initValue”
3.  “从编辑后隐藏”
4.  “隐藏完整的 initValue”

所以看起来 a4j:ajax 从其他地方获取价值而不是弹出窗口上的方法？是 ViewState 问题吗？有两个隐藏的 javax.faces.ViewState 字段具有相同的 id 和不同的值。它们是代表整体视图的状态还是仅代表它们所包含的形式？如果整个视图这两个字段应该具有相同的值，并且可能 a4j:ajax 正在查看未更新的第一个表单的视图状态？任何关于如何处理视图状态以及它代表什么的资源链接都会很棒（即使这里的视图状态不是这种情况）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:05:53.317

您可以尝试使用相同的表单并`a4j:region`分隔不同的表单，因为 jsf 不喜欢更新其他表单，因为它们的状态不会发送到服务器当您使用时`sessionScope`，状态会保存在服务器中，这使得这成为可能，但它是不是真正的网络应用程序的最佳解决方案

# delphi - 刷新 cxGrid 中的颜色

> ID：12473687
> 
> 赞同：1
> 
> 时间：2012-09-18T09:02:59.807
> 
> 标签：delphi, devexpress, tcxgrid

我有一个 cxGrid，我在其中根据某些字段中的值更改某些字段的背景颜色。这一切都很好。但是，如果我在网格数据中更改某些内容，则在我关闭重新打开表单之前颜色不会更新。

如果记录发生变化，要调用什么程序来更新它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:16:44.170

根据我的经验，当您切换行时它会更新。但我用 TClientDataSet 在 DB 模式下使用它。

检查方法如

*   TcxControl.InvalidateRect
*   TcxControl.InvalidateRgn
*   TcxControl.InvalidateWithChildren

您还可以使节点无效：

*   TcxGrid.ActiveView.Invalidate；
*   TcxGrid.ViewData.Records[0].Invalidate;
*   TcxGridViewData.Rows[0].Invalidate
*   TcxCustomGridTableController.FocusedRecord.Invalidate;

像这样的事件

*   TcxCustomGridTableViewStyles.OnGetContentStyle
*   TcxCustomGridTableItem.OnCustomDrawCell

还会在参数之间或内部公开这些项目（及其 Invalidate 方法），例如

*   ARecord：TcxCustomGridRecord；
*   ViewInfo -> TcxGridTableCellViewInfo.GridRecord

换句话说 - 打开 cxTL 单元并 grep 查找“无效”单词并记下每个匹配项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:26:33.997

如果您的网格附加到数据集，并且数据集中的数据发生更改，则会自动调用 OnGetContentStyle 事件。确保您的数据集知道数据已更新。听起来您的编辑表单并没有告诉网格数据集自行刷新。您可以通过回调过程或实现[观察者模式](https://stackoverflow.com/questions/4041106/best-way-to-implement-observer-pattern-in-delphi)来做到这一点。

以下代码演示了如何为网格列实现 OnGetContentStyle 事件。

```
procedure TFormWithGrid.cxGrid1DBTableView1LASTNAMEStylesGetContentStyle(
  Sender: TcxCustomGridTableView; ARecord: TcxCustomGridRecord;
  AItem: TcxCustomGridTableItem; var AStyle: TcxStyle);
begin
  if ARecord.Values[cxGrid1DBTableView1FIRSTNAME.Index] = 'test' then
  begin
    AStyle := TcxStyle.Create(nil);
    AStyle.Color := clRed;
    AStyle.Font.Style := [fsBold];
  end;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-21T11:16:05.233

在我的情况下，这将起作用 cxGridDBTblVwContenido.DataController.Refresh;

# c# - C#GetConstructor() 不返回父构造函数

> ID：12473692
> 
> 赞同：4
> 
> 时间：2012-09-18T09:03:11.663
> 
> 标签：c#, reflection, constructor

我正在尝试找到具有特定签名的构造函数。此构造函数在当前类型中不存在，但在其父类型中存在。为了显示：

```
public class Base
{
    public Base()
    {

    }

    public Base(string a1, string a2, string a3)
    {
        ...
    }
}

public class Child : Base
{

} 
```

问题是，我似乎无法找到`.ctor`带有字符串参数的`.GetConstructor`，即使尝试如下：

```
typeof(Child).GetConstructor(BindingFlags.FlattenHierarchy | BindingFlags.Public | BindingFlags.Instance, null, new Type[] { typeof(string), typeof(string), typeof(string) }, null); 
```

`typeof(Child)`用代替`typeof(Base)`，自然有效。

在寻找父构造函数方面我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:06:38.823

构造函数不是继承的，所以你不能通过孩子找到它们，即使是`FlattenHierarchy`.

您必须遍历孩子才能找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:09:05.287

Child 类根本没有您要查找的构造函数。你不能写：

```
Child c = new Child("a", "b", "c"); 
```

所以寻找不能用于实例化给定类型的构造函数是没有意义的。

Child 类所拥有的只是默认构造函数：

```
Child c = new Child(); 
```

如果您从`Base`类中删除默认构造函数，则`Child`该类将具有您正在寻找的构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T09:09:54.343

试着打电话

```
var child = new Child("1", "2", "3") 
```

你会明白为什么构造函数在`Child`.

# java - 从其封闭类的静态方法中实例化一个内部类

> ID：12473694
> 
> 赞同：1
> 
> 时间：2012-09-18T09:03:18.890
> 
> 标签：java, inner-classes, scjp

我们知道静态上下文不能引用任何类型的任何实例，但是 main 方法会发生什么，以下代码示例如何编译没有问题：

```
public class MyOuter
{
    public static void main(String[] args) 
    {
        MyOuter mo = new MyOuter(); // gotta get an instance!
        MyOuter.MyInner inner = mo.new MyInner();
        inner.seeOuter();

        //Or

        MyOuter.MyInner inner = new MyOuter().new MyInner();
    } 

    class MyInner
    {
        public void seeOuter(){}
    }
 } 
```

是否禁止在其封闭类的静态上下文中实例化内部类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T09:05:32.790

> 是否禁止在其封闭类的静态上下文中实例化内部类？

不 - 禁止实例化*没有封闭类实例的内部类*。在您的情况下，您*确实*有一个封闭类的实例：

```
new MyOuter().new MyInner(); 
```

这完全没问题。

您通常可以在不从实例方法中指定封闭类的情况下逃脱的唯一原因是它相当于

```
// Within an instance method
this.new MyInner(); 
```

有关详细信息，请参阅[JLS 的第 15.9.2 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.9.2)您的构造函数调用是“合格的类实例创建表达式”。

# java - 如何在 Eclipse SWT 向导中获取 bean 定义？

> ID：12473698
> 
> 赞同：2
> 
> 时间：2012-09-18T09:03:26.960
> 
> 标签：java, eclipse, spring, eclipse-plugin, swt

我正在开发一个 SWT 组件，其中有一个子组件，用户可以通过它查看 Spring 引用并可以更改 Spring bean 定义、属性等。

我面临两个问题：

1.  如果bean的定义是在其他一些Spring XML而不是选定的Spring文件中定义的，那么如何进行。
2.  如何从定义的`beanClass`例如获取类的源代码（用于预览） `com.xyz.abc.def.Foo`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:42:05.627

正如 codejammer 所说，您将不得不通过不同的机制解析所有 xml 文件，并且可能还包括文件。最安全的方法是使用 Spring 自己的类来处理它。更具体地说，请参阅`XmlBeanDefinitionReader`[1] 以阅读和使用`BeanDefinitionRegistry`[2] 的可能自定义实现来保存有效 bean 的映射。

加载类源的第二个问题，就像将类的数据包名称更改为完全限定路径一样简单：`com.xyz.abc.def.Foo`->`com/xyz/abc/def/Foo.java`

1.  [http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/xml/XmlBeanDefinitionReader.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/xml/XmlBeanDefinitionReader.html)
2.  [http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/support/BeanDefinitionRegistry.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/support/BeanDefinitionRegistry.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:30:23.503

要从 spring xmls 中获取信息，您必须进行一些解析，没有任何问题。但是，您可以使用 O/X 映射器来简化此过程[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/oxm.html](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/oxm.html)

# xcode - xcode 4.2左右两侧的动画按钮

> ID：12473700
> 
> 赞同：0
> 
> 时间：2012-09-18T09:03:31.553
> 
> 标签：xcode, animation, button

在我的界面中有一个名为 Forme1 的按钮和两个箭头，在我想要的按钮的左侧和右侧当我单击右侧/左侧的箭头时向我显示另一个按钮：带有动画的按钮 2(Forme2)

# c# - 从列表视图获取子项

> ID：12473701
> 
> 赞同：3
> 
> 时间：2012-09-18T09:03:35.003
> 
> 标签：c#, listview, c++-cli

我正在尝试从列表视图中获取 Subitem，我这样做了但不起作用：

```
curItem1=listView2->Items[i]->Text;

curItem2=listView2->SubItem[i]->Text; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T09:08:43.260

```
ListViewItem selItem = listView1.Items[i];
string txt = selItem.SubItems[index].Text; 
```

`Text`在第一行得到错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:08:47.820

您想访问 ListViews ItemTemplate 中某个控件的 Text 属性。这与此类似：

```
string curItem = ((TextBox)listView2.Items[i].FindControl("TextBox1")).Text; 
```

其中“TextBox1”是您尝试获取其 Text 属性的控件。您还需要确保您正在转换为您尝试为其获取属性的正确类型的控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:10:39.470

尝试这个...`ListView1.SelectedItems(0).SubItems(i).Text`

# joomla - joomla 使用 htaccess 重命名组件 url

> ID：12473702
> 
> 赞同：0
> 
> 时间：2012-09-18T09:03:35.827
> 
> 标签：joomla, components, rewrite, sef

我正在使用 Joomla 2.5 和一个商业组件为一个想要拥有多个 vendros 的人构建一个 eshop，但我一直坚持如何更改组件的 url。

我要更改的是用户使用鼠标从链接传递时显示的 url。

例如，该组件有一个 SEF 函数，它重写 url 并使它们像这样：

1.  [http://www.site.com/componentname/products/productname-productid-productcategoryid-vendorid.html](http://www.site.com/) **_** _
2.  [http://www.site.com/componentname/catalog/categoryname-categoryid-numberofpage.html](http://www.site.com/) **_** _

我想要的是做到这一点：

1.  [http://www.site.com/shop/products/productname-productid-productcategoryid-vendorid.html](http://www.site.com/) **_** _
2.  [http://www.site.com/shop/catalog/categoryname-categoryid-numberofpage.html](http://www.site.com/) **_** _

因此，当用户通过链接时，它将向他显示新的 url。.htaccess 和重写规则是否可以做到这一点，或者只能通过组件来完成？我问这个是因为组件是用 ioncube 编码的，所以我自己不能这样做。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:27:13.910

虽然您可以使用 .htaccess 重写任何 URL，但它不适用于 Joomla！因为 SEF URL 是由 JRoute 创建的，它使用核心路由功能和`route.php`组件的组合。

URL 段用于查找正确的组件来处理请求，因此要更改 URL 的构建方式，您必须修改`route.php`组件的 （当然还有其他部分）。

有关[SEF 支持如何工作的更多信息，请在 docs.joomla.org 上阅读此内容](http://docs.joomla.org/Supporting_SEF_URLs_in_your_component)

# git - Git拉入“远程”目录

> ID：12473707
> 
> 赞同：4
> 
> 时间：2012-09-18T09:03:49.063
> 
> 标签：git

在 Git 中，您可以将给定目录克隆到给定目录：

```
git clone ssh://gitolite@dev.bipper.com:3687/com/bipper/kids/portal <dir> 
```

当我运行我们的一个构建脚本时，“cd”命令会出现一些复杂问题，我想使用 git pull 如下所示：

```
git pull <dir-to-the-git-folder> 
```

Ergo 在执行拉取（或获取/合并）时不必在 git 文件夹中，是否有可能以某种方式实现（我上面的示例不起作用）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:06:24.360

我认为你应该看看，`git-dir`也许还有`work-tree`选项。如果您愿意，也可以使用`GIT_DIR`/变量。`GIT_WORK_TREE`

请参阅手册：

> `--git-dir=<path>` 设置存储库的路径。这也可以通过设置 GIT_DIR 环境变量来控制。它可以是当前工作目录的绝对路径或相对路径。
> 
> `-work-tree=<path>` 设置工作树的路径。它可以是绝对路径或相对于当前工作目录的路径。这也可以通过设置 GIT_WORK_TREE 环境变量和 core.worktree 配置变量来控制（有关更详细的讨论，请参阅 git-config(1) 中的 core.worktree）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:06:51.493

尝试

```
GIT_DIR=<dir-to-the-git-folder>/.git GIT_WORK_TREE=<dir-to-the-git-folder> git pull 
```

您还可以分别使用`--git-dir`和指定这些选项`--work-tree`。

来自`man git`：

> ```
>  --git-dir=<path>
>        Set the path to the repository. This can also be controlled by setting the GIT_DIR environment
>        variable. It can be an absolute path or relative path to current working directory.
> 
>    --work-tree=<path>
>        Set the path to the working tree. It can be an absolute path or a path relative to the current
>        working directory. This can also be controlled by setting the GIT_WORK_TREE environment variable
>        and the core.worktree configuration variable (see core.worktree in git-config(1) for a more
>        detailed discussion). 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-16T11:20:50.073

从 git 1.8.5 开始，您可以使用该`-C`选项来更改目录上下文。

```
sudo -u www-data -H git -C /var/www/ status 
```

`-H`将为您的命令设置主目录。它是可选的，但在您想避免以下错误时很有用：

```
warning: unable to access '/root/.config/git/attributes': Permission denied
or
warning: unable to access '/home/user/.config/git/attributes': Permission denied 
```

# android - Android：GridLayout 的分隔线

> ID：12473709
> 
> 赞同：2
> 
> 时间：2012-09-18T09:03:56.640
> 
> 标签：android, android-layout, android-gridlayout

在我的应用程序中，我有一个 Listview，Listview 中的每个项目都有一个 GridLayout。我通过适配器类向 GridLayout 添加了一个自定义视图。添加到 GridLayout 的视图大小不同。它可能因一种观点而异于另一种观点。我在 getView() 适配器中的代码是，

```
for (int i = 0,j=0; i < (data.get(position).getItems().size() * 2) && j< (data.get(position).getItems().size()); i=i+2,j++) {
            View childView=getChildView(position, j);
            childView.setBackgroundColor(Color.CYAN);
            Log.i("ChildView Height",childView.getLayoutParams().height+" length");
            holder.order_row.addView(childView, i);
            holder.order_row.addView(getItemSeparatorView(minHeight),i+1);
        }

private View getChildView(int pos, int i) {

        //Log.i("position in child", pos + "");

        View child = inflater.inflate(R.layout.order_item, null);
        InnerViewHolder inholder = new InnerViewHolder();
        inholder.name = (TextView) child.findViewById(R.id.order_name);
        inholder.items = (ListView) child.findViewById(R.id.order_list);

        inholder.name.setText(data.get(pos).getItems().get(i).getItemName()+":");
        inholder.name.setTextColor(itemColor);
        inholder.items.setAdapter(new OrderItemOptionAdapter(context, data
                .get(pos).getItems().get(i).getOptions(),itemColor));
        int size = data.get(pos).getItems().get(i).getOptions().size();
        Log.i("childview", "called" + i+ "size is "+size);
        if (size > 7) {
            child.setLayoutParams(new GridLayout.LayoutParams(new LayoutParams(
                    260, 80 + (size * 20))));

        } else if(size <=7 && size>=4 ){
            child.setLayoutParams(new GridLayout.LayoutParams(new LayoutParams(
                    260, 450)));
        } else {
            child.setLayoutParams(new GridLayout.LayoutParams(new LayoutParams(
                    260, 250)));
        }

        return child;
    }
    public View getItemSeparatorView(int h){
        //Log.i("seperator","called and height is "+h);
        View sep = inflater.inflate(R.layout.item_seperator, null);
        sep.setLayoutParams(new GridLayout.LayoutParams(new LayoutParams(2,h)));
        return sep;
    } 
```

我的 xml 代码是。

```
<GridLayout
        android:id="@+id/order_row"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:columnCount="6"
        android:orientation="horizontal"
>    </GridLayout> 
```

我想添加一个分隔线，它具有 childViews 的最大高度。并且在某些情况下，gridlayout 可能有超过 1 行，因此分隔视图的高度应根据 GridLayout 行中视图的最大高度而变化。

*如果我可以先添加索引为 0、2、4 等的所有子视图。然后计算子视图的最大高度。计算最大高度后，我可以添加索引为 1、3、5、7 等的分隔视图。*

请为我提供正确的方法来做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：-6
> 
> 时间：2012-09-18T09:07:10.553

set Verticalspacing and Horizontal spacing in grid view xml file

```
 <GridView
        android:horizontalSpacing="10dp"
        android:horizontalSpacing="10dp" >

    </GridView> 
```

I hope it will help you.

# java - 如何在android中建立UDP连接

> ID：12473711
> 
> 赞同：4
> 
> 时间：2012-09-18T09:04:03.130
> 
> 标签：java, android, udp

我正在尝试在 my`galaxy tab`和 my之间建立联系`laptop`。所以我试图在我的笔记本电脑上运行服务器活动，在我的选项卡上运行客户端活动，但它不起作用。这是服务器和客户端代码。错误在哪里？

**服务器：**

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    TextView txt = (TextView)findViewById(R.id.textView1);

    int port = 12345;
    byte [] message = new byte [1500];
    DatagramPacket p = new DatagramPacket (message,message.length);
    try {
        InetAddress serveraddr = InetAddress.getByName("192.168.1.116");
        DatagramSocket s = new DatagramSocket (port,serveraddr);
        while (true){
            s.receive(p);
            String text = new String (message,0,p.getLength());
            txt.setText(text);
        }
    } catch (SocketException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

**客户：**

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final EditText edt = (EditText)findViewById(R.id.editText1);
    Button btn = (Button)findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            String msg = edt.getText().toString();
            int port = 12345;
            try {
                DatagramSocket s = new DatagramSocket();
                InetAddress local  = InetAddress.getByName("192.168.1.116");
                int msg_lenght = msg.length();
                byte []message = msg.getBytes();
                DatagramPacket p = new DatagramPacket(message,msg_lenght,local,port);
                s.send(p);
            } catch (SocketException e) {                   
                e.printStackTrace();
            } catch (UnknownHostException e) {                  
                e.printStackTrace();
            } catch (IOException e) {               
                e.printStackTrace();
            }               
        }
    });
} 
```

这是**日志**：

> 09-17 23:49:55.190：D/dalvikvm(5892)：后期启用 CheckJNI 09-17 23:49:55.690：D/CLIPBOARD(5892)：在开始输入时隐藏剪贴板对话框：由其他人完成... ！09-17 23:49:59.590: D/AndroidRuntime(5892): 关闭 VM 09-17 23:49:59.590: W/dalvikvm(5892): threadid=1: 线程退出未捕获异常 (group=0x40c4f1f8) 09 -17 23:49:59.590: E/AndroidRuntime(5892): 致命异常: main 09-17 23:49:59.590: E/AndroidRuntime(5892): android.os.NetworkOnMainThreadException 09-17 23:49:59.590: E /AndroidRuntime(5892): 在 android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099) 09-17 23:49:59.590: E/AndroidRuntime(5892): 在 libcore.io.BlockGuardOs.sendto(BlockGuardOs. java:175) 09-17 23:49:59.590: E/AndroidRuntime(5892): 在 libcore.io.IoBridge.sendto(IoBridge.java:463) 09-17 23:49:59。137) 09-17 23:49:59.590: E/AndroidRuntime(5892): 在 android.app.ActivityThread.main(ActivityThread.java:4507) 09-17 23:49:59.590: E/AndroidRuntime(5892): 在java.lang.reflect.Method.invokeNative(Native Method) 09-17 23:49:59.590: E/AndroidRuntime(5892): at java.lang.reflect.Method.invoke(Method.java:511) 09-17 23 :49:59.590: E/AndroidRuntime(5892): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:978) 09-17 23:49:59.590: E/AndroidRuntime(5892): 在com.android.internal.os.ZygoteInit.main(ZygoteInit.java:745) 09-17 23:49:59.590: E/AndroidRuntime(5892): at dalvik.system.NativeStart.main(Native Method) 09-17 23 ：50：34.320：I / Process（5892）：发送信号。PID：5892 SIG：9 4507) 09-17 23:49:59.590: E/AndroidRuntime(5892): 在 java.lang.reflect.Method.invokeNative(Native Method) 09-17 23:49:59.590: E/AndroidRuntime(5892): 在 java .lang.reflect.Method.invoke(Method.java:511) 09-17 23:49:59.590: E/AndroidRuntime(5892): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java: 978) 09-17 23:49:59.590: E/AndroidRuntime(5892): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:745) 09-17 23:49:59.590: E/AndroidRuntime( 5892): 在 dalvik.system.NativeStart.main(Native Method) 09-17 23:50:34.320: I/Process(5892): 发送信号。PID：5892 SIG：9 4507) 09-17 23:49:59.590: E/AndroidRuntime(5892): 在 java.lang.reflect.Method.invokeNative(Native Method) 09-17 23:49:59.590: E/AndroidRuntime(5892): 在 java .lang.reflect.Method.invoke(Method.java:511) 09-17 23:49:59.590: E/AndroidRuntime(5892): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java: 978) 09-17 23:49:59.590: E/AndroidRuntime(5892): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:745) 09-17 23:49:59.590: E/AndroidRuntime( 5892): 在 dalvik.system.NativeStart.main(Native Method) 09-17 23:50:34.320: I/Process(5892): 发送信号。PID：5892 SIG：9 E/AndroidRuntime(5892): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:978) 09-17 23:49:59.590: E/AndroidRuntime(5892): 在 com.android.internal .os.ZygoteInit.main(ZygoteInit.java:745) 09-17 23:49:59.590: E/AndroidRuntime(5892): at dalvik.system.NativeStart.main(Native Method) 09-17 23:50:34.320: I/Process(5892)：发送信号。PID：5892 SIG：9 E/AndroidRuntime(5892): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:978) 09-17 23:49:59.590: E/AndroidRuntime(5892): 在 com.android.internal .os.ZygoteInit.main(ZygoteInit.java:745) 09-17 23:49:59.590: E/AndroidRuntime(5892): at dalvik.system.NativeStart.main(Native Method) 09-17 23:50:34.320: I/Process(5892)：发送信号。PID：5892 SIG：9

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:17:25.040

```
09-17 23:49:59.590: E/AndroidRuntime(5892): android.os.NetworkOnMainThreadException
09-17 23:49:59.590: E/AndroidRuntime(5892):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
09-17 23:49:59.590: E/AndroidRuntime(5892):     at libcore.io.BlockGuardOs.sendto(BlockGuardOs.java:175) 
```

您不应该在 ui 线程中进行网络或时间密集型操作

另请参阅： [Android：针对某些应用用户的 NoClassDefFoundError](https://stackoverflow.com/questions/11133457/android-noclassdeffounderror-for-some-app-users/11133767#11133767)或 [android 开发者信息](http://developer.android.com/reference/android/os/StrictMode.ThreadPolicy.Builder.html)

结帐： [activity.runOnUi](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:10:43.337

您在服务器的 onCreate 中有一个无限循环。你不应该！创建一个用于轮询套接字的线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T16:31:31.243

*   您不能在 ui 线程上发送 udp 数据包，因此必须创建一个新的单独线程。

只是一个快速的解决方案...

创建一个 udpOutputData 字符串：
`String udpOutputData;`

在您的代码中创建一个新线程：

```
 //-----UDP send thread
Thread udpSendThread = new Thread(new Runnable() {

        @Override
        public void run() {

                while (true) {  

                    try {
                        Thread.sleep(100);
                    } 

                    catch (InterruptedException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }

                        if (sendUdp == true) {

                            try {

                                // get server name
                                InetAddress serverAddr = InetAddress.getByName(outputIP);
                                Log.d("UDP", "C: Connecting...");

                                // create new UDP socket
                                DatagramSocket socket = new DatagramSocket();

                                // prepare data to be sent
                                byte[] buf = udpOutputData.getBytes();

                                // create a UDP packet with data and its destination ip & port
                                DatagramPacket packet = new DatagramPacket(buf, buf.length, serverAddr, broadcastPort);
                                Log.d("UDP", "C: Sending: '" + new String(buf) + "'");

                                // send the UDP packet
                                socket.send(packet);

                                socket.close();

                                Log.d("UDP", "C: Sent.");
                                Log.d("UDP", "C: Done.");

                            } 

                            catch (Exception e) {
                                Log.e("UDP", "C: Error", e);

                            }

                                try {
                                    Thread.sleep(100);
                                }

                                catch (InterruptedException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }

                                sendUdp = false;
                        }

                }
        }

}); 
```

每次要发送一些 udp 数据时创建一个调用方法：

```
 public void sendUdp(String udpMsg) {

       udpOutputData = udpMsg;
       sendUdp = true;
    } 
```

每次要发送 udp 数据包时调用该方法并为输出数据传递一个字符串：

```
String s = "hello from app";
sendUdp(s); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-10T15:22:04.807

您的代码有 2 个问题

1.  在主线程（UI 线程）上使用网络

> 09-17 23:49:59.590: E/AndroidRuntime(5892): 致命异常: main 09-17 23:49:59.590: E/AndroidRuntime(5892): android.os.NetworkOnMainThreadException

2.  `while(true)`在主线程上循环：

    ```
    while(true) {
        s.receive(p);
        String text = new String (message,0,p.getLength());
        txt.setText(text);
    } 
    ```

# html - FIREFOX - HTML - 密码输入 - 页面加载时字段包含数据？

> ID：12473712
> 
> 赞同：5
> 
> 时间：2012-09-18T09:04:03.683
> 
> 标签：html, firefox, input, passwords

使用 firefox 查看网站时，我在网站上输入密码时遇到问题，这里是 html：

```
<div class="passField">
    <label for="password">Password : </label>
    <input type="password"
        name="password" id="password" 
        title="6 to 20 characters, one uppercase and numbers allowed." placeholder="APassword123"
        maxlength="20" pattern="^[A-Za-z0-9]{6,20}$"
    />
    <span class="inputDesc">'.$passwordDesc.'</span>
</div> 
```

通过电子邮件中的链接将用户定向到包含此输入的页面，如下所示：

[http://www.mysite.com/reset.php?theId=1&theKey=699acfc121edfd91df48d5d99044d74d](http://www.mysite.com/reset.php?theId=1&theKey=699acfc121edfd91df48d5d99044d74d)

执行数据库检查，如果详细信息与我的数据库中与该用户 ID 相关的详细信息匹配，则向用户显示两个输入。一个用于初始密码，一个用于确认输入的密码。

我遇到的问题是，当页面加载时，初始密码输入包含几个点（数据），而第二个输入包含占位符......两者都是密码类型。

这是一个屏幕截图，看看我在说什么：

![怪癖 1](../Images/0e6f16d5fcc17e93deb4e1d5a4995918.png)

这是 IE 中的同一页面：

![怪癖 2](../Images/18526307a896c345c2872a496e3443b3.png)

据我了解，它们都应该统一显示，无论输入类型如何，都像往常一样显示占位符，并且由于我没有为此输入分配任何值，为什么在没有分配值时以这种方式呈现一个值甚至根据页面来源？

任何与此相关的帮助、理解或信息将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T09:07:33.797

Use autocomplete="off" on the fields to avoid pre-filling of the fields. Of course this does not account for possible JavaScript or anything else populating the field.

**Edit - Further explanation (because it was asked for)**

Most browsers have a built in function to automatically fill form fields. They fill in fields that have standard names a user has filled in often(this is often asked first) For example address fields are often filled like this.

2nd part of the feature is filling saved passwords, but browsers are not really smart. When you save a password on, for example, [http://example.com/phpmyadmin](http://example.com/phpmyadmin) they will also fill in a password field on the homepage of [http://example.com/](http://example.com/) Which is often incorrect because the login on the homepage is pretty sure not the login for the admin area.

You can solve this issue by either setting autocomplete=off which turns this feature off for the input field(could be that this also works on entire forms if you want) or giving the fields different names. Whereas using autocomplete=off is far more reliable.

# vim - Ubuntu Linux 中的 Sed，通过在新行中打印来替换模式

> ID：12473713
> 
> 赞同：3
> 
> 时间：2012-09-18T09:04:05.970
> 
> 标签：vim, ubuntu, sed

使用 Sed，我想替换这条长线：

```
http://download.lenovo.com/UserFiles/Driver/en/Downloads%20and%20Drivers/Z570/Win7/IN3ETN46WW5.exehttp://download.lenovo.com/UserFiles/Driver/en/Downloads%20and%20Drivers/Z570/Win%207%20Update/IN1AUD25WW5.exehttp://download.lenovo.com/UserFiles/Driver/en/Downloads%20and%20Drivers/Z570/Win7/IN2VDO61WW6.exehttp://download.lenovo.com/UserFiles/Driver/en/Downloads%20and%20Drivers/Z570/Win7/IN1SRM38WW5.exehttp://download.lenovo.com/UserFiles/Driver/en/Downloads%20and%20Drivers/Z570/Win7/IN2VDO63WW5.exehttp://download.lenovo.com/UserFiles/Driver/en/Downloads%20and%20Drivers/Z570/Win7/IN6WLN49WW5.exe 
```

进入这个：

```
http://download.lenovo.com/UserFiles/Driver/en/Downloads%20and%20Drivers/Z570/Win7/IN3ETN46WW5.exe
http://download.lenovo.com/UserFiles/Driver/en/Downloads%20and%20Drivers/Z570/Win%207%20Update/IN1AUD25WW5.exe
http://download.lenovo.com/UserFiles/Driver/en/Downloads%20and%20Drivers/Z570/Win7/IN2VDO61WW6.exe 
```

我试过（在vim里面）

```
:%s#http://#\nhttp://#g 
```

它不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:11:42.550

For some reason `vim` wants `\r` in the replacement, so if you change your substitution to:

```
:%s#http://#\r&#g 
```

it will work.

If you don't mind the extra whitespace, this will work in `sed`:

```
sed 's#http://#\n&#g' infile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T00:12:05.353

如果多余的空格很烦人，您可以使用`GNU awk`：

```
awk -F "http" '{ for (i=2; i<=NF; i++) print FS $i }' file.txt 
```

结果：

```
http://download.lenovo.com/UserFiles/Driver/en/Downloads%20and%20Drivers/Z570/Win7/IN3ETN46WW5.exe
http://download.lenovo.com/UserFiles/Driver/en/Downloads%20and%20Drivers/Z570/Win%207%20Update/IN1AUD25WW5.exe
http://download.lenovo.com/UserFiles/Driver/en/Downloads%20and%20Drivers/Z570/Win7/IN2VDO61WW6.exe
http://download.lenovo.com/UserFiles/Driver/en/Downloads%20and%20Drivers/Z570/Win7/IN1SRM38WW5.exe
http://download.lenovo.com/UserFiles/Driver/en/Downloads%20and%20Drivers/Z570/Win7/IN2VDO63WW5.exe
http://download.lenovo.com/UserFiles/Driver/en/Downloads%20and%20Drivers/Z570/Win7/IN6WLN49WW5.exe 
```

# c# - MonoTouch - 没有将应用程序部署到 iPad 设备的选项？

> ID：12473716
> 
> 赞同：2
> 
> 时间：2012-09-18T09:04:28.567
> 
> 标签：c#, iphone, ipad, deployment, xamarin.ios

我有一个需要在 iPad 设备上测试的应用程序，但似乎没有执行此操作的选项。我最初确实将我的应用程序创建为 iPhone，但我添加了一个 iPad 故事板，并且我调整了 info.plist 文件中的设置以识别这一点，但是我仍然没有部署到的选项iPad 设备。我可以部署到模拟器，但在这个阶段我真的需要部署到设备上。请告诉我，我不必从头开始重新创建解决方案并从一开始就将其声明为通用的？..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:15:14.787

It appears that deploying to the iPhone works as if you have deployed to the iPad.

# java - JAVA中的日志语句

> ID：12473717
> 
> 赞同：0
> 
> 时间：2012-09-18T09:04:31.863
> 
> 标签：java

> **可能重复：**
> [logger.info 和 logger.debug 之间的区别](https://stackoverflow.com/questions/2342280/difference-between-logger-info-and-logger-debug)

何时应该使用 Log.INFO 和 Log.DEBUG 在 JAVA 中打印日志语句？我可以为这些日志提供一些示例吗？我还需要澄清日志，同时显示 Balance 是否需要使用 Log.INFO 或 Log.DEBUG

```
Log.write("BALANCE"+bal, Log.INFO); 
```

# c++ - Qt QSignalMapper 不起作用

> ID：12473718
> 
> 赞同：2
> 
> 时间：2012-09-18T09:04:32.727
> 
> 标签：c++, qt

我正在尝试使用 QSignalMapper 在单击时将信号发送器（QPushButton）发送到插槽。但它不起作用，我真的不知道为什么。

如果您知道执行此操作的不同方法，很高兴通知我，但我真的很想知道如何使用 QSignalMapper，因为它在将来会很有用。

电影库.h

```
 #ifndef MOVIEBASE_H
    #define MOVIEBASE_H

    #include <QtGui/QMainWindow>
    #include <Qt\qsignalmapper.h>

    #include "ui_moviebase.h"
    #include "include\DBAdapter.h"
    #include "include\objView.h"

    class MovieBase : public QMainWindow
    {

        Q_OBJECT

    public:
        MovieBase(QWidget *parent = 0, Qt::WFlags flags = 0);
        ~MovieBase();

    private:

        Ui::MovieBaseClass ui;

        DBAdapter *db;
        DBAdapter::Type type;
        QPushButton *buttonChecked;
        QSignalMapper *pushButtonMapper;

        void setMainButtonsFunct();

    private slots:
        void button_pushed(const QPushButton &);

    };

    #endif // MOVIEBASE_H 
```

电影库.cpp

```
#include "moviebase.h"

MovieBase::MovieBase(QWidget *parent, Qt::WFlags flags)
    : QMainWindow(parent, flags)
{
    ui.setupUi(this);
    db = new DBAdapter();

    this->type = DBAdapter::Movie;

    this->setMainButtonsFunct();

    ObjView *obj = new ObjView(this->ui.objView);

    obj->view(db->get_All_Elements(this->type));
}

void MovieBase::setMainButtonsFunct()
{
    this->buttonChecked = ui.watchedButton;

    this->pushButtonMapper = new QSignalMapper(this);

    connect(this->ui.watchedButton, SIGNAL(clicked()), this->pushButtonMapper, SLOT(map()));
    connect(this->ui.towatchButton, SIGNAL(clicked()),  this->pushButtonMapper, SLOT(map()));
    connect(this->ui.availableButton, SIGNAL(clicked()),  this->pushButtonMapper, SLOT(map()));
    connect(this->ui.allButton, SIGNAL(clicked()),  this->pushButtonMapper, SLOT(map()));

    this->pushButtonMapper->setMapping(this->ui.watchedButton, this->ui.watchedButton);
    this->pushButtonMapper->setMapping(this->ui.towatchButton, this->ui.towatchButton);
    this->pushButtonMapper->setMapping(this->ui.availableButton, this->ui.availableButton);
    this->pushButtonMapper->setMapping(this->ui.allButton, this->ui.allButton);

    connect(this->pushButtonMapper, SIGNAL(mapped(const QPushButton &)), this, SLOT(button_pushed(const QPushButton &)));
}

void MovieBase::button_pushed(const QPushButton &sender)
{
    qDebug() << "button pushed";
    this->ui.watchedButton->setChecked(false);
}

MovieBase::~MovieBase()
{

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T09:15:17.390

您只能使用 QSignalMapper 中存在的信号。没有这样的信号`mapped(const QPushButton&)`。使用`mapped(QWidget*)`并更改您的插槽以具有相同的签名：`button_pushed(QWidget*)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:29:20.007

看起来一切都很好。见编译器输出。也许你定义错误你的信号/槽签名

# jquery - Drupal 中类似于 Facebook 的弹出通知

> ID：12473720
> 
> 赞同：0
> 
> 时间：2012-09-18T09:04:34.320
> 
> 标签：jquery, drupal-7, popup

对于 Drupal 7 项目，我需要显示类似于 facebook 中显示的弹出通知。例如，如果在任何时间点 3 位用户 A、B 和 C 登录到 drupal 网站，并且用户 A 在站点的任何位置发表评论，那么用户 B 和 C 应该会看到弹出通知，而无需刷新页面。就像 facebook 通知不断弹出一样。

我正在使用规则模块来找出有人评论的时间。我可以使用一个 jquery 通知插件来显示通知，但是要使其正常工作，您需要刷新页面，并且该插件将通知显示给发表评论的同一用户，而不是显示给其他登录用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:11:44.460

you could do this with AJAX. jQuery has [some helpful functions](http://api.jquery.com/jQuery.ajax/) for that. So make a php file that checks if there is a new comment that applies to the current user and let it return true (or the amount of comments). Then fetch that using javascript (for example every second) and display the popup.

Ajax and google are your friend here! Good luck!

# java - maven：无法在 tomcat 应用程序中加载图像/css/js

> ID：12473725
> 
> 赞同：0
> 
> 时间：2012-09-18T09:05:09.727
> 
> 标签：java, maven, web

我是 maven 新手，我们正在使用 maven3 开发 Spring 应用程序。我们在使用 Maven Web 应用程序 Web 资源时遇到问题，我们无法在我们的应用程序中加载任何资源。将应用程序部署到 tomcat 后，我​​可以看到应用程序需要的文件，但是当应用程序尝试将它们加载为图像时，它无法加载图像。

在我的 webapp 文件夹中，我有这个目录结构：

```
-rw-r--r-- 1 erkin.unlu domain users  360 Sep 18 11:54 index.jsp
drwxr-xr-x 2 erkin.unlu domain users 4096 Sep 18 11:54 resources/
drwxr-xr-x 3 erkin.unlu domain users 4096 Sep 18 11:54 WEB-INF/ 
```

资源文件夹中有一个 magni.png。

部署应用程序后，项目文件夹在 tomcat/webapps 中如下所示：

```
-rw-r--r-- 1 erkin.unlu domain users  360 Sep 18 11:54 index.jsp
-rw-r--r-- 1 erkin.unlu domain users  518 Sep 18 11:06 magni.png
drwxr-xr-x 3 erkin.unlu domain users 4096 Sep 18 11:54 META-INF/
drwxr-xr-x 2 erkin.unlu domain users 4096 Sep 18 11:54 resources/
drwxr-xr-x 5 erkin.unlu domain users 4096 Sep 18 11:54 WEB-INF/ 
```

但是即使我可以从浏览器中看到 index.jsp，当我想看到 magni.png 时，我也会从 Tomcat 收到 404 错误。

有一个类似的项目使用 ant，我们在那个项目上没有这个问题。

顺便说一句，我的 pom.xml 有一个如下所示的战争插件：

```
<plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <webResources>
                        <resource>
                            <directory>src/main/webapp/resources</directory>
                        </resource>
                    </webResources>
                </configuration>
            </plugin> 
```

那么这种行为的原因是什么？我是否缺少一些 Maven 或 Tomcat 的默认配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:14:28.160

WEB-INF 文件夹外的任何文件都可以直接访问，如下所示。无需身份验证

```
http://localhost:8080/project/magni.png 
```

似乎是tomcat或权限问题。Maven 只是构建工具。

# google-drive-api - 如何使用 Google Drive SDK 访问“与我共享”根列表？

> ID：12473726
> 
> 赞同：6
> 
> 时间：2012-09-18T09:05:09.997
> 
> 标签：google-drive-api

在 Google Drive SDK 文档中，我不知道如何访问其他人与我共享的文件/文件夹的*根*列表，知道吗？

我试图搜索不属于我的文件，这意味着使用以下参数查询文件/列表：

```
"q=not 'me' in owners" 
```

但这会返回其他人拥有的所有文件，而不仅仅是这些文件的“根列表”。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T08:52:51.387

显然，有一个新的[搜索参数](https://developers.google.com/drive/search-parameters?hl=en)，称为`sharedWithMe`。将 Q 设置为“sharedWithMe”就足以接收与用户共享的父文件夹和文件。它也可以与其他参数结合使用——例如“sharedWithMe 和垃圾=假”。

您可能已经发现了它，但对这个问题有一个答案可能会很有用。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-19T15:44:01.670

更像是：

“q=不是所有者中的'我'和父母中的'根'”

# web-services - 使用 MTOM 设置特定的 MIME 类型

> ID：12473734
> 
> 赞同：0
> 
> 时间：2012-09-18T09:05:38.097
> 
> 标签：web-services, jax-ws

在 MTOM 中，我们通常使用内容类型为“application/octet-stream”来表示将发送任意二进制数据，然后我们使用 DataHandler API 检索它。

但我的问题是我们能否将内容类型指定为“image/jpeg”并避免在基于 Java 的 SOAP Web 服务中使用 DataHandler API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T01:02:16.347

IBM 红皮书提供了一个很好的详细示例/讨论：开发 Web 服务应用程序，请参阅第 64-74 页

[http://www.redbooks.ibm.com/redpapers/pdfs/redp4884.pdf](http://www.redbooks.ibm.com/redpapers/pdfs/redp4884.pdf)

在示例中：

PDF 映射到：type="xs:base64Binary" mime:expectedContentTypes=" */* "

Word 文件映射到：type="xs:base64Binary"

图片映射到：xmime:expectedContentTypes="image/jpeg"

```
sendWordFile will be mapped to byte[] in Java.
sendPDFFile will be mapped to javax.activation.DataHandler.
sendImage will be mapped to java.awt.Image 
```

另见： [http ://www.w3.org/2005/05/xmlmime](http://www.w3.org/2005/05/xmlmime)

# erlang - Tsung：无法启动newbeam（原因：no_rsh）

> ID：12473738
> 
> 赞同：0
> 
> 时间：2012-09-18T09:05:51.773
> 
> 标签：erlang, tsung

我尝试在 EC2 机器上启动 tsung slaves。钥匙就位，测试用

```
erl -rsh ssh -sname root -setcookie mycookie
slave:start('i-d6807c9d',root,"-setcookie mycookie").
> {ok,'root@i-d6807c9d'} 
```

正在工作中。

当我现在执行 tsung 时，我收到以下错误消息：no_rsh。Erlang 文档写道 no_rsh 的意思是“计算机上没有 rsh 程序”。

```
78 =INFO REPORT==== 18-Sep-2012::10:51:15 ===
79     ts_config_server:(5:<0.52.0>) SYSINFO:Current path: /usr/lib/erlang/lib/tsung-1.4.2/ebin/tsung.beam
80 
81 =INFO REPORT==== 18-Sep-2012::10:51:15 ===
82        ts_job_notify:(5:<0.64.0>) No listen port defined, can't open listening socket·
83 
84 =INFO REPORT==== 18-Sep-2012::10:51:15 ===
85            ts_os_mon:(5:<0.49.0>) os_mon disabled
86 =INFO REPORT==== 18-Sep-2012::10:51:15 ===
87               ts_mon:(5:<0.53.0>) Activate clients with text backend
88 
89 =INFO REPORT==== 18-Sep-2012::10:51:15 ===
90     ts_config_server:(0:<0.73.0>) Can't start newbeam on host 'i-d6807c9d' (reason: no_rsh) ! Aborting! 
```

有谁知道如何让它运行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:20:53.750

我发现了错误。我使用 tsung 参数“-r”将远程连接器设置为此处提到的调试脚本：[Tsung error: can't start newbeam on host](https://stackoverflow.com/questions/11129080/tsung-error-cant-start-newbeam-on-host)。

该脚本在 EC2 实例上不可用。在没有“-r”选项的情况下运行测试有效。

# jsf-2 - f:调用动作之前的事件类型

> ID：12473742
> 
> 赞同：0
> 
> 时间：2012-09-18T09:06:05.600
> 
> 标签：jsf-2

我在页面中使用它：

```
<f:event type="preRenderView" listener="#{bean.logoutIfNotAuthenticated}"/> 
```

有用。但是，侦听器是在调用动作之后调用的（例如，通过单击命令按钮）。

是否有首先调用的系统事件？

我已经尝试使用“preValidate”，但如果表单没有验证要求，这将不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:09:39.587

为什么不尝试使用过滤器来实现会话管理？这样所有请求都可以自动获取，然后被重定向或处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:17:51.770

尽管使用过滤器是一个很好的解决方案，但 preRenderView 事件应该可以正常工作，并且侦听器应该在视图呈现之前触发。例如，如果用户无权访问请求的页面，我多次使用它来导航离开请求的视图。

# css - 受力高度 匹配图像

> ID：12473744
> 
> 赞同：2
> 
> 时间：2012-09-18T09:06:09.447
> 
> 标签：css, responsive-design, fluid-layout

我正在构建一个具有图像并`<div>`并排的响应式页面：

![在此处输入图像描述](../Images/1d1d5aff44b6b67e010c1fb67dc6702c.png)

图像的宽度和高度保持它们的比例并随着浏览器窗口扩展/收缩。

的宽度是`<div>`一样的，但我希望它在高度方面与图像相匹配。

有没有办法做到这一点？这是一个问题的小提琴：http: [//jsfiddle.net/alecrust/xwJHw/](http://jsfiddle.net/alecrust/xwJHw/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:39:43.733

您可以为此使用**display:table**属性。像这样写：

```
section{
    display:table;
    width:100%;
}
.text-box,.image{
    display:table-cell;
    vertical-align:top;
} 
```

检查这个[http://jsfiddle.net/xwJHw/8/](http://jsfiddle.net/xwJHw/8/)

注意：**display:table**工作到 IE8 及以上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:23:09.060

您可以使用 jQuery。

使用 $('#imgId').height() 计算图像的高度，并将其设置为 Div。

另请参阅代码，此处如何调整高度[http://filamentgroup.com/examples/equalHeights/](http://filamentgroup.com/examples/equalHeights/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T09:24:48.227

编辑：

**@alecrust：**这是一个很好的解决方案，也在你的小提琴中实现，[**见这里**](http://jsfiddle.net/akhurshid/xwJHw/6)

纯 css 解决方案：[**SEE DEMO**](http://jsfiddle.net/akhurshid/EbxkX/)

**CSS：**

```
#wrapper {
    overflow: hidden;
    background: #ccc;
}

.placeholder_image {
    float: left;
    width: 430px;
    height: 264px;
    background: #fff;
    padding: 0 20px 0 0;   
}

.placeholder_text {
    background: #ccc;
    margin-left: 450px;
    display: block;
} 
```

**HTML：**

```
<div id="wrapper">
    <div class="placeholder_image">
        <img src="http://www.qesign.com/templates/designs/christmas-after-effects-animated-e-card-template-31966.jpg" alt="" />
    </div>

    <div class="placeholder_text">
        A block of text
    </div>
</div> 
```

​</p>

​</p>

# hibernate - JPA2 从 persistence.xml 中提取信息

> ID：12473748
> 
> 赞同：0
> 
> 时间：2012-09-18T09:06:17.607
> 
> 标签：hibernate, jpa, xml-parsing, persistence.xml

我使用 JPA2 并使用我的 persistence.xml 中表示的多个持久性单元配置，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0">                           
  <persistence-unit name="FirstPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>entities.Book</class>
    <properties>        
      <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
      ...
    </properties>
  </persistence-unit>  
  <persistence-unit name="SecondPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>entities.Book</class>
    <properties>        
      <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
      ...
    </properties>
  </persistence-unit>  
</persistence> 
```

是否有任何方法可以以编程方式从 persistence.xml 中提取持久性单元名称（使用 Hibernate 或 JPA2）？像这样：

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("manager1");

// or

Map<String, Object> configOverrides = new HashMap<String, Object>();
configOverrides.put("hibernate.hbm2ddl.auto", "create-drop");
EntityManagerFactory programmaticEmf =
    Persistence.createEntityManagerFactory("manager1", configOverrides); 
```

但我不仅需要**阅读**属性。

# jquery - jquery点击和一键事件

> ID：12473756
> 
> 赞同：0
> 
> 时间：2012-09-18T09:06:39.170
> 
> 标签：jquery

基本上我有一个 Jquery 功能，因此当您单击“返回旅程”时，它会检查**目的地**是否是机场。如果是机场地址，它会提示用户输入他们的航班详细信息。当用户点击“Return Journey”时，文本变为“One Way”，这就是我使用 .one click 功能的原因，这样当您再次点击它时，它就不会询问您的航班详细信息。

虽然这很有效，但如果用户决定第二次点击“单程”，然后点击“返程”，显然不会提示他们输入航班号。有没有一种方法可以模拟这一点，以便在文本显示为“返回旅程”时询问他们的航班号，而不是在文本显示为“单程”时不询问用户的航班详细信息？

这是jQuery：

```
 $('#href-rtn-jny').one('click', function(){

    if (checkIsAirport(label.html()) != null &&
        label.parent().parent().attr('title') == "Dropoff") {

        $('#href-edit-flightno').css('display','block');

        // Flight info dialog
        $("#cp-div-flight-info").dialog({
            autoOpen: false,
            width: 620,
            height: 305,
            modal: true,
            draggable: false,
            resizable: false,
            closeOnEscape: false,
            closeText: 'show',
            show: 'clip',
            title: 'Online Booking',
            close: function() {

                $('#div-flight-info-row').css('display','none');
                $(".ui-dialog-titlebar").show();

                // Give next search box focus
                rowdiv.next().find('.addr-ho-input').focus();

            }

        });

        $('#btn-flight-ok').bind('click', function() {

            $('#cp-div-flight-info').dialog('close');

        }); 
```

这是可点击的 HTML

元素：

```
<p class="p-row-functions left bg-image-return">
    <a id="href-rtn-jny" class="bg-link-style" href="#">Return Journey</a>
</p> 
```

更改为：（点击时）：

```
<p class="p-row-functions left bg-image-arrowright">
    <a id="href-rtn-jny" class="bg-link-style" href="#">One Way</a>
</p> 
```

# android - 设置长按键监听器的持续时间

> ID：12473757
> 
> 赞同：1
> 
> 时间：2012-09-18T09:06:41.413
> 
> 标签：android

我们可以设置长按键监听器的持续时间吗？我想要的是，如果用户持续触摸屏幕 3 秒，那么我的长按键监听器应该触发并打开我的弹出窗口进行设置。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:16:29.527

覆盖 onTouch 侦听器，然后在按钮按下期间处理按下、释放事件并设置计时器（事件 ==“按下”）

```
private Timer timer;

 public LongClickTimer(int seconds) {
            timer = new Timer();
            timer.schedule(new LongClickTask(), seconds *1000);         
        }
 class LongClickTask extends TimerTask {
            public void run() { 
             // do what you want            
                timer.cancel(); 
            }
        }
     button.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Log.v(TAG, "EVENT" + event.toString());
                    if(event.getAction == 2) {// pressed                        
                    new LongClickTimer(5); // schedule for 5 seconds
                    }else{          
                     timer.cancel();
                    }
               return false;
              }
           }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:11:39.337

Inside the Long Press Listener u can set a Handler with 3 Sec Limit and if it reaches 3 sec time then u can run your method in it or else make default method

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:16:54.003

从 Android 2.0 开始，Activity 包含方法

```
public boolean onKeyLongPress(int keyCode, KeyEvent event) 
```

例如，长按后退按钮将是：

```
@override
public boolean onKeyLongPress(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) 
    {
        // do your stuff here
        return true;
    }
    return super.onKeyLongPress(keyCode, event);
} 
```

现在要打开设置选项卡，您可以在里面执行以下代码和活动...

```
Intent intent = new Intent(android.provider.Settings.ACTION_SETTINGS);
intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
activityContext.startActivity(intent); 
```

有关详细信息[，您可以访问](http://developer.android.com/reference/android/provider/Settings.html)以更好地了解。

# titanium-mobile - 钛数据库创建

> ID：12473760
> 
> 赞同：0
> 
> 时间：2012-09-18T09:06:46.523
> 
> 标签：titanium-mobile

我需要创建一个数据库，例如在 Titanium 开发上使用 android SqliteOpenHelper 数据库创建。如何在运行时创建和运行 db。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T22:03:34.710

这是非常有据可查的，你没有先检查文档/谷歌吗？

*   这是 Appcelerator 的长但非常好的教程：[Appcelerator DB 指南](http://docs.appcelerator.com/titanium/2.1/index.html#!/guide/Working_with_a_SQLite_Database)
*   如果您不喜欢阅读，这是 Appcelerator 关于本地数据的视频教程。[钛本地存储](http://docs.appcelerator.com/titanium/2.1/index.html#!/video/Working%20with%20Local%20Data)
*   这是博客上的简短教程：[Labrum.co 教程](http://labrum.co/articles/titanium/using-a-local-database-with-titanium/)
*   这是足以开始使用的实际文档：[Titanium.Database](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.Database)
*   最后，这里有一个常见的误解，即问答环节形式的数据库。[问答](http://developer.appcelerator.com/question/3431/basic-question-about-titaniumdatabase)

# apache - Apache 自动重定向到不同的文件

> ID：12473763
> 
> 赞同：0
> 
> 时间：2012-09-18T09:06:52.573
> 
> 标签：apache, redirect

当在我的 apache 服务器上找不到文件时，服务器会自动将 (http 301) 重定向到具有相似名称的文件。

例如，如果文件

```
http://myserver.com/files/image012.jpg 
```

被请求，但不存在，服务器重定向到

```
http://myserver.com/files/image021.jpg 
```

（确实存在）。

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T01:17:57.390

您的服务器可能默认激活了自动拼写检查。尝试将以下行添加到您的 .htaccess 文件中

```
CheckSpelling off 
```

# android-layout - ListView with custom view as item only shows one element

> ID：12473775
> 
> 赞同：0
> 
> 时间：2012-09-18T09:07:46.573
> 
> 标签：android-layout, android-listview

I have an `AlertDialog` that I inflate from this layout:

```
<?xml version="1.0" encoding="utf-8"?>    
    <ListView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/List"
        android:layout_alignParentTop="true"
        android:layout_width="match_parent"
        android:layout_height="400dp"/> 
```

I need every item of the list to be a view described by this xml:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#20f0f0f0"
    android:orientation="horizontal" >

    <CheckBox 
        android:layout_gravity="center_vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:id="@+id/cb_persistent"/>

    <TextView
        style="@style/Label"
        android:layout_gravity="center_vertical"
        android:gravity="center_horizontal|center_vertical"
        android:layout_width="fill_parent"
        android:layout_height="@dimen/button_height"
        android:layout_toLeftOf="@+id/btn_connect"
        android:layout_toRightOf="@+id/cb_persistent"
        android:id="@+id/lbl_name_address"/>

    <Button
        android:layout_gravity="center_vertical" 
        style="@style/Button.Plain"
        android:layout_width="wrap_content"
        android:layout_alignParentRight="true"
        android:id="@+id/btn_connect"
        android:text="@string/Connect"/>
</RelativeLayout> 
```

And this is the adapter I'm trying to use for it. I've also tried implementing `ListAdapter`, result was the same: only 1 list row is showing, the dialog is exactly 1 row high. With this adapter it's the last row, with `ListAdapter` - the first. What am I doing wrong?

```
private class ListItem extends View {

        public ListItem(Context context) {
            super(context);
            View content = ((LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.list_element, null);
            setView(content);

            m_cbPersistent = (CheckBox) content.findViewById(R.id.cb_persistent);
            m_btnConnect   = (Button)   content.findViewById(R.id.btn_connect);
            m_lblName      = (TextView) content.findViewById(R.id.lbl_name_address);
        }

        public CheckBox m_cbPersistent = null;
        public Button   m_btnConnect   = null;
        public TextView m_lblName      = null;
    }

class NewAdapter extends ArrayAdapter<ListItem> 
    {

        public NewAdapter(Context context) {
            super(context, 0);
            m_context = context;
        }

        @Override
        public int getCount() {
            return m_items.size();
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            if (position < getCount())
                return m_items.elementAt(position);
            else
                return null;
        }

        void addNewItem ()
        {
            m_items.add(new NetworkCameraEntry(m_context));
        }

        void removeItem (int index)
        {
            if (index < getCount())
            {
                m_items.remove(index);
            }
        }

        @Override
        public boolean isEmpty() {
            return m_items.size() <= 0;
        }

        @Override
        public boolean areAllItemsEnabled() {
            return true;
        }

        @Override
        public boolean isEnabled(int position) {
            return true;
        }

            private Context m_context = null;

        private Vector<ListItem> m_items = new Vector<ListItem>();
    } 
```

This is how I initialize it in the AlertDialog's constructor:

```
public class MyDialog extends AlertDialog {

public MyDialog(Context context) {
        super(context, 0);

        View content = ((LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.network_cameras_list_window, null);
        setView(content);

        m_adapter = new NewAdapter(context);
        m_list = (ListView) content.findViewById(R.id.List);
        m_list.setAdapter(m_adapter);   

        m_adapter.addNewItem();

        m_adapter.addNewItem();
    }

    private ListView m_list = null;
    private NewAdapter m_adapter = null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:12:50.623

`m_items.size` is 1 when the adapter is constructed and gets populated over time. `m_items.size` is cached so you have to invalidate the adapter on each `m_items.add`

Yet this is not the way to go. **A better option is to get your data populated before constructing the adapter and pass is to the adapter**. Any altering of the data you have to `notify` / `invalidate` the adapter with

```
notifyDataSetInvalidated();
notifyDataSetChanged(); 
```

# iphone - iOS 中的搜索机制

> ID：12473777
> 
> 赞同：0
> 
> 时间：2012-09-18T09:07:53.033
> 
> 标签：iphone, ios, ipad, uitableview, uisearchbar

> **可能重复：**
> [如何对 UITextView 实现搜索功能？](https://stackoverflow.com/questions/11914282/how-to-implement-search-function-to-uitextview)

我有一个 UIViewContoller ，其中包含大量 UITextView 数据。用户很难阅读屏幕上的整个文本。所以我在想如何在这种情况下提供搜索功能？

我想知道 iOS 中可能的搜索机制。我知道一种方法是带有 uitableview 的 uiSerachBar。是否有其他可用的搜索机制？

是否可以搜索以模仿 MSWord 或 PDF 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:13:42.347

是的，可以模仿 MSWord 或 PDF 文件搜索方式搜索所有类型的文档。您只需要根据您的计划自定义它们。这里有一些链接，请检查它们......

[在 iOS 应用中搜索 UITextView 以查找特定单词](https://stackoverflow.com/questions/9234857/search-uitextview-for-a-specific-word-in-ios-app)

[UITextView如何实现搜索功能？](https://stackoverflow.com/questions/11914282/how-to-implement-search-function-to-uitextview)

此外，请在[google](http://www.google.com)和本网站本身进行进一步查询。

# android - 按字母顺序快速滚动

> ID：12473778
> 
> 赞同：0
> 
> 时间：2012-09-18T09:07:57.243
> 
> 标签：android, listview, fastscroll

我正在尝试用字母创建一个快速滚动。有人可以告诉我如何在另一个课程[中使用这个问题中的代码吗？](https://stackoverflow.com/questions/10658591/is-there-any-mistake-in-this-code-which-shows-fast-scroll-list-with-alphabet-pr/)我有一个类，它的方法返回我需要放入快速滚动的字母，所以我想在另一个类中使用这个类，如下所示：

```
MyListAdaptor mla = new MyListAdaptor(getApplicationContext(), itemsBP);
mla.xyz(); 
```

但后来我不知道如何让这些字母出现。

如果可以，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:45:26.583

在一些研究结束时，我意识到缺少的是以下代码，它必须放在 OnCreate() 中：

```
LinkedList <String> mLinked <String> = new LinkedList ();
for (int i = 0; i <nomes.length: i + +) {
mLinked.add (names [i]);
}

setListAdapter (new MyListAdaptor (this, mLinked));

ListView lv = getListView ();
lv.setFastScrollEnabled (true);

lv.setOnItemClickListener (new OnItemClickListener () {
public void onItemClick (AdapterView <?> parent, View view,
int position, long id) {
/ / When clicked, show a toast with the TextView text

Toast.makeText (getApplicationContext (), ((TextView) view). GetText (). ToString (), Toast.LENGTH_SHORT.) Show ();
}
}); 
```

并将类代码放在类[MyListAdaptor](https://stackoverflow.com/questions/10658591/is-there-any-mistake-in-this-code-which-shows-fast-scroll-list-with-alphabet-pr/) Main OnCreate() 中。

感谢您的帮助，希望这可以在未来帮助其他人。

# python - 滤锅中的变量字典

> ID：12473779
> 
> 赞同：2
> 
> 时间：2012-09-18T09:07:59.820
> 
> 标签：python, colander

如何使用[滤锅](http://docs.pylonsproject.org/projects/colander/en/latest/)库验证以下数据结构？

```
[
    {
        'bar': ['a', 'b', 'c'],
        'variable2': ['b', 'c'],
        'foo': ['a', 'c'],
    },
    {
        'something': ['foo', 'bar'],
    },
] 
```

问题是这些映射可以有任意数量的键值对，并且键名称空间不受限制。我还想确保每个键都是一个字符串，每个值都是一个字符串序列。

我可以使用`Mapping(unknown='preserve')`，但它不会验证类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-12T20:30:00.957

我这样做了，但它没有接缝工作：

```
class PolicyValidator(SchemaNode):
    def __init__(self):
        super(PolicyValidator, self).__init__(
            Mapping(unknown='preserve'), validator=self.policy_range)
        # self.add(SchemaNode(Range(min=0, max=0xFFFF), name="preserved"))

    def policy_range(self, node, policy):
        for value in policy.itervalues():
            if value < 0 or value > 0xFFFF:
                raise Invalid(node, '%r is not a valid permission.' % value) 
```

我找到了另一个解决方案：

```
class PolicyValidator(SchemaNode):
    def __init__(self, policy):
        super(PolicyValidator, self).__init__(Mapping(unknown='preserve'))
        for key in policy.iterkeys():
            self.add(SchemaNode(Int(), name=key,
                                validator=Range(min=0, max=0xFFFF))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:44:44.903

查看文档，我认为您不能。您可以通过[定义自己的验证器](http://docs.pylonsproject.org/projects/colander/en/latest/extending.html#defining-a-new-validator)来解决您提到的限制：

> 验证器是一个可调用的，它接受两个位置参数：`node`和`value`. `None`如果值有效，则返回。`colander.Invalid`如果值无效，它会引发异常。

# knockout.js - read nested arrays from json string in Knockoutjs

> ID：12473782
> 
> 赞同：0
> 
> 时间：2012-09-18T09:08:04.453
> 
> 标签：knockout.js

I am facing a problem will reading a json string containing nested arrays.

```
{
    "invoiceSet": {
        "lines": [
            {
                "line": "Business Partner had two or more interactions in the last 30 days",
                "togState": "true",
                "links": [
                    {
                        "linktxt": "Interaction History",
                        "linkid": "IRHIST"
                    }
                ]
            },
            {
                "line": "Open CRC Complaints Exist",
                "togState": "false",
                "links": [
                    {
                        "linktxt": "Interaction History",
                        "linkid": "IRHIST"
                    }
                ]
            },
            {
                "line": "Open Complaints Exist",
                "togState": "true",
                "links": [
                    {
                        "linktxt": "Interaction History",
                        "linkid": "IRHIST"
                    }
                ]
            },
            {
                "line": "Business Partner is a landlord",
                "togState": "false",
                "links": []
            },
            {
                "line": "Remotes Business Partner",
                "togState": "true",
                "links": [
                    {
                        "linktxt": "Interaction History",
                        "linkid": "IRHIST"
                    }
                ]
            },
            {
                "line": "Recent move has occurred in the last 60 days",
                "togState": "false",
                "links": []
            }
        ]
    }
} 
```

I am using ajax call to get this json in a string

```
var setJsonText = jQuery.ajax({ url: ajxUrl,
                                            cache: false,
                                            async: false,
                                            type:"POST",
                                            dataType: "html" }).responseText;
var sets = jQuery.parseJSON( setJsonText );

viewModel.invLines(sets.invoiceSet.lines) 
```

And my viewmodel

```
var viewModel = {
           invLines: ko.observableArray([]),
}; 
```

HTML

```
<table width="100%" >
 <tbody data-bind="foreach: invLines" style="width:100%">
  <tr>
   <td data-bind="text: line"></td>
   <td>
    <ul data-bind="foreach:links">
     <li>
      <a><span  data-bind="text:linktxt"></span></a>
     </li>
    </ul>
 </tbody>
</table> 
```

The line are getting correctly printed but problem in coming on corresponding links. Please let me know what m i doing wrong.

Thanks, Anshul Kaistha

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:42:25.007

您的问题可能出在您的 ajax 调用中。为什么要以 HTML 格式获取数据，然后将其转换为 JSON？为什么不直接以 JSON 格式获取数据？

无论如何，这个 jsFiddle 演示了您的代码工作（减去 ajax 调用），因此您发布的所有绑定似乎都是有效的：

[http://jsfiddle.net/unklefolk/g9Q9V/3/](http://jsfiddle.net/unklefolk/g9Q9V/3/)

希望这有助于解决您的问题。

# javascript - html页面在DOM操作过程中抖动很大，如何处理？

> ID：12473785
> 
> 赞同：1
> 
> 时间：2012-09-18T09:08:18.220
> 
> 标签：javascript, html, dom

我是根据后端JSON数据使用DOM对页面进行操作，比如说页面上的一些表可能有10-50行数据，期间我看到页面抖动很多，看起来不太好各位用户，有什么好的办法解决吗？

演示效果的代码是这样的......我中间有一张桌子，大小未知......

测试

```
window.onload = function(){
    setTimeout(createTable, 3000);
}

function createTable(){
    var table = document.createElement("table");
        for(var i = 0; i < 10; ++i){
        var tr = document.createElement("tr");
        var td = document.createElement("td");
        td.innerHTML = "row " + i;

        tr.appendChild(td);

        table.appendChild(tr);
        }

        document.getElementById("tablewrapper").appendChild(table);

}
</script>
</head>
<body>
    <div style="width:300px; background-color:blue;">
       hello
    </div>

    <div id="tablewrapper">
    </div>

    <div style="width:300px;background-color:red">
    world
    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:59:04.017

通常你应该在它上面放一个加载遮罩，这样用户就看不到晃动了。

[在大多数框架中，都有像这里](http://aboukone.com/2011/08/08/extjs-show-a-loading-mask-during-ajax-calls/)描述的用于 ExtJS 或作为jQuery[插件](http://code.google.com/p/jquery-loadmask/)的实用程序功能，但您可以轻松地自己完成（只需在您的区域或整个页面顶部的 div，当您的代码完成时隐藏 div）。

# tfs - TFS 2010 Team Build 在构建机器上删除源目录后获取源

> ID：12473786
> 
> 赞同：2
> 
> 时间：2012-09-18T09:08:18.913
> 
> 标签：tfs, tfsbuild

我有一个通宵运行的 TFS 构建。可以在 c:\build\3\poject\build def\Sources 中的代理上找到构建源。

\Sources 文件夹被意外删除（有罪）。我本来希望 TFS 在下一次构建之前“获取”最新的源代码。它似乎没有这样做 - 它只是抱怨它找不到任何要构建的源。

谁能告诉我如何强制 TFS 将最新的源代码获取到构建代理 \sources 文件夹中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T20:27:07.393

在 Build Definition -> Process 下 Clean Workspace 参数设置为什么？如果它设置为 All 它应该会导致在每个构建上下载整个源。

![清洁工作区选项](../Images/58dc57fbeae70f5b27987c64c521ea8d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:39:12.023

应该有一种方法可以从构建定义中完全重新下载源代码，但我现在没有看到一个选项。您应该能够在构建机器本身上解决此问题。如果您 cd 进入 Source 目录，然后运行 ​​tf get /force 它应该重新下载所有内容。在此之后的后续构建应该可以工作。

# vb.net - SharePoint Web 服务 GetListItems

> ID：12473790
> 
> 赞同：0
> 
> 时间：2012-09-18T09:08:28.323
> 
> 标签：vb.net, web-services, sharepoint

我正在制作一个 Windows 窗体应用程序来检索有关列表项的详细信息。我编写了代码并且它的运行没有错误，但是即使列表中有项目，它也返回 0 个项目谁能告诉我可能是什么原因？

这是我得到的 xml 响应：

```
<listitems xmlns:s="uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:rs="urn:schemas-microsoft-com:rowset" xmlns:z="#RowsetSchema" xmlns="http://schemas.microsoft.com/sharepoint/soap/">
<rs:data ItemCount="0">
</rs:data>
</listitems> 
```

这是代码：

```
Dim listService As New Lists()
listService.Credentials = System.Net.CredentialCache.DefaultCredentials

listService.Url = "http://sitename/_vti_bin/lists.asmx"

    Dim xmlDoc As New System.Xml.XmlDocument()
    Dim listName As String = "{83FEDC7E-1DDA-4A36-910A-D5140E51F0ED}"
    Dim viewName As String = "{77A23176-5CD4-46E9-BE57-AEB4D4279AD4}"
    Dim rowLimit As String = "150"
    Dim query As System.Xml.XmlNode = xmlDoc.CreateElement("Query")
    Dim viewFields As System.Xml.XmlNode = xmlDoc.CreateElement("ViewFields")
    Dim queryOptions As System.Xml.XmlNode = xmlDoc.CreateElement("QueryOptions")
    query.InnerXml = "<Query><Where><Contains><FieldRef Name='Title'/><Value Type='Text'>lol</Value></Contains></Where></Query>"
    viewFields.InnerXml = ""
    queryOptions.InnerXml = "<ViewAttributes Scope='Recursive' />"
    Dim nodeListItems As XmlNode
    nodeListItems = listService.GetListItems(listName, viewName, query, viewFields, rowLimit, queryOptions, Nothing)
    TextBox1.Text += nodeListItems.OuterXml 
```

**更新：** **错误是我在凭据的同一字段中提供了域和用户名。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:38:36.973

我相信这条线是错误的：

```
query.InnerXml = "<Query><Where><Contains><FieldRef Name='Title'/><Value Type='Text'>lol</Value></Contains></Where></Query>" 
```

该节点本身就是“查询”，所以这将以这个 xml 结束：

```
<Query><Query>
      <Where><Contains><FieldRef Name='Title'/><Value Type='Text'>lol</Value></Contains></Where>
 </Query></Query> 
```

# mongodb - Doctrine MongoDB 结果缓存

> ID：12473797
> 
> 赞同：5
> 
> 时间：2012-09-18T09:08:47.247
> 
> 标签：mongodb, caching, doctrine, doctrine-orm, doctrine-odm

如何缓存 Doctrine MongoDB 结果？查看 Configuration 的代码，它似乎没有像标准 Doctrine 那样的内置结果缓存，只有一个查询缓存。

我曾想过在应用程序中创建自己的缓存层，但返回的对象非常重，因为它们包含视图不需要的大量 Doctrine 逻辑。如何配对对象，使它们实际上只是数据容器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T18:31:49.807

Doctrine MongoDB ODM 不支持查询缓存，因此这绝对是您暂时需要在应用程序中处理的事情。

如果您对重对象有疑问，则很可能是代理实例（用于引用的文档），因为它们包含对内部 Doctrine 服务（例如 UnitOfWork）的引用。如果你想有效地缓存这些，你基本上需要在存储之前剔除这些引用，然后在从缓存中获取它们之后恢复它们。这可能比它的价值更麻烦，但它会将对象减少到您想要的数据容器。

或者，如果您使用查询生成器，您可以禁用水合，然后为返回的数组结果实现缓存。除此之外，您可以查看应用程序中的缓存视图（这在 Symfony2 中是理想的，其中一个请求可能会到达多个控制器，每个控制器都可以应用自己的缓存规则并选择性地使用 ESI）。

# perl - 使用 Perl 从网站下载多个文件

> ID：12473800
> 
> 赞同：0
> 
> 时间：2012-09-18T09:08:56.827
> 
> 标签：perl, download, www-mechanize, lwp

我开始在 Perl 中玩弄 Web。我使用 Windows 和 ActivePerl。我写了一个脚本，它可以下载 mp3 文件（这是一个电台脱口秀的档案，所有合法的，以防你想知道 :)）它（理论上）

*   解析网站
*   将指向 mp3 文件的所有链接收集到一个数组
*   遍历数组并下载所有文件

但是脚本找到了所有链接，数组没问题，但只下载一个文件。这一定是一个基本错误，但我找不到它。请指出我的错误，谢谢。

```
use strict;
use warnings;
use WWW::Mechanize;
use LWP::Simple;
use File::Basename;

my $mech = WWW::Mechanize->new( autocheck => 1 );  
$mech->get("http://something_or_other.html");

my @mp3links = $mech->find_all_links(    
    tag       => "a",
    url_regex => qr/\.mp3$/,  
);  
print "\n";                 
foreach my $link (@mp3links) {  

    my $url       = $link->url();  
    my $localfile = basename($url);  
    my $localpath = "d:\\Downloads\\$localfile";

    print "$localfile\n";   
    getstore($url, $localpath);   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:33:17.353

哦，对不起，伙计们。这与 Perl 无关。我的互联网连接很糟糕，下载第一个文件时连接总是丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:43:20.943

尝试这个：

```
my $status = getstore($url, $localpath);
die "Error $status on $url" unless is_success($status); 
```

另一个可能的罪魁祸首 - 如果链接包含查询字符串 (?-mark + params) basename 不会将其删除。问题是这将使它在 Windows 上无效的文件名。

# r - 按组子集前 500 行，用于组子集

> ID：12473801
> 
> 赞同：4
> 
> 时间：2012-09-18T09:08:58.043
> 
> 标签：r, data.table, subset

这必须是一个简单的答案。我想对我的数据进行子集化以进行测试。我有一个数据框，我想在其中保留所有信息列，只需减少每个人的观察次数。所以，我有一个唯一标识符和大约 50 个人。我只想选择 2 个人并且我只想从这 2 个人中选择 500 个数据点。

我的数据框称为`wloc08`. 有 50 个唯一 ID。我只选择其中 2 个人，但在这 2 个人中，我只需要每个人的 500 个数据点。

```
subwloc08=subset(wloc08, subset = ID %in% c("F07001","F07005")) 
```

我可以在此声明的某处使用`[`吗？

```
 reduced= subwloc08$ID[1:500,] 
```

不工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T09:32:58.977

如果您只与 2 个人打交道，则可以分别对每个人进行子集化，然后`rbind`对每个子集进行 ing：

```
wloc08F07001 <- wloc08[which(wloc08$ID == "F07001")[1:500], ]

wloc08F07005 <- wloc08[which(wloc08$ID == "F07005")[1:500], ]

reduced <- rbind(wloc08F07001, wloc08F07005) 
```

为了使其更通用，尤其是在处理大量数据时，您可能会考虑查看`data.table`包。这是一个例子

```
library(data.table)

wloc08DT<-as.data.table(wloc08)  # Create data.table

setkey(wloc08DT, "ID")           # Set a key to subset on

# EDIT: A comment from Matthew Dowle pointed out that by = "ID" isn't necessary
# reduced <- wloc08DT[c("F07001", "F07005"), .SD[1:500], by = "ID"]
reduced <- wloc08DT[c("F07001", "F07005"), .SD[1:500]] 
```

分解最后一步的语法：

1.  `c("F07001", "F07005")`：这将通过查找键等于`F07001`或的所有行来子集您的数据`F07005`。还会煽动“by without by”（详见`?data.table`）

2.  `.SD[1:500]`：这将`.SD`通过选择 1:500 行来子集对象（子集的 data.table）。

3.  **编辑**由于 Matthew Dowle 的更正，此部分已被删除。“by without by”由第 1 步启动。以前：（`by = "ID"`：这告诉`[.data.table`您在第 2 步中对每个 ID 单独执行操作，在这种情况下，只有您在第 1 步中指定的 ID。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T09:21:11.053

你可以使用`lapply`：

```
do.call("rbind",
        lapply(c("F07001", "F07005"),
               function(x) wloc08[which(wloc08$ID == x)[1:500], ])) 
```

你的命令`reduced = subwloc08$ID[1:500,]`不起作用，因为`subwloc08$ID`它是一个向量。但是，`reduced = subwloc08$ID[1:500]`它会起作用，但会返回`subwloc08$ID`（而不是 的整行`subwloc08`）的前 500 个值。

如果要对前 30 个主题运行此命令，可以使用以下命令`unique(wloc08$ID)[1:30]`代替`c("F07001", "F07005")`：

```
do.call("rbind",
        lapply(unique(wloc08$ID)[1:30],
               function(x) wloc08[which(wloc08$ID == x)[1:500], ])) 
```

# php - PCRE/PHP 正则表达式与最后一个“项目”不匹配

> ID：12473813
> 
> 赞同：2
> 
> 时间：2012-09-18T09:09:38.207
> 
> 标签：php, regex, pcre

这是我拼凑的正则表达式：

```
/(.*={76}\s)?\s*(.*?)\s\-\-\s(\d{2}\/\d{2}\-\d{2}\s\d{2}:\d{2})\s\s(.*?)\s(http:\/\/service.*?)\s(\-{76})/is 
```

这是我将要解析的文本：http: [//p.linode.com/7015](http://p.linode.com/7015)

这是匹配文本的替换：

```
<item>\n\t<title>$2</title>\n\t<pubDate>$pubDate</pubDate>\n\t<description>$4</description>\n\t<link>$5</link>\n</item>\n\n 
```

最后，这是我得到的输出：http: [//p.linode.com/7016](http://p.linode.com/7016)

我*几乎*想出了将文本块解析为 RSS 2.0 XML 标记所需的正则表达式。我已经用[RegExr](http://gskinner.com/RegExr/)和 RegexBuddy 对其进行了测试，*除了*链接后没有换行符的最后一个“项目”（[第 269 行](http://p.linode.com/7015)）外，它运行良好。

简而言之，**问题是文本中的“iProperty”文章不匹配**。

任何正则表达式专家愿意帮助我解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:24:12.220

我试过了，我想我已经找到了解决方案（我可以用它生成正确的输出文件），只需像这样修改你的正则表达式：

```
/(.*={76}\s)?\s*(.*?)\s\-\-\s(\d{2}\/\d{2}\-\d{2}\s\d{2}:\d{2})\s\s(.*?)\s(http:\/\/service.*?)(\s(\-{76})|$)/is 
```

我刚刚`|$`在最后添加了一些`()`OR 语句。

# xml - Paypal/Flash 按钮集成 as3 问题

> ID：12473816
> 
> 赞同：0
> 
> 时间：2012-09-18T09:09:54.043
> 
> 标签：xml, actionscript-3, paypal

在发现一些看起来很奇怪的问题后，我一直在网上寻找将贝宝整合到 Flash 中的方法，并希望其他人能理解为什么让这些工作如此痛苦

由于 xml 验证称为“错误的 xml 结构”，显示 Paypal 代码的动态文本文件似乎不起作用。尽管对此进行了整理并使其同时满足 Paypal 和 xml 的要求，但您似乎无法显示按钮或 xml 以超出错误：#1085。

如果没有第 3 方购物车，尝试让 Flash 加入到 addToCart 或引用您的购物车详细信息而不每次都进入贝宝页面似乎是不可能的，并尝试将他们的按钮生成器中的代码融合到 xml 数组中以实现与按钮相同的结果你自己的画廊是我似乎无法解决的另一个问题。

我想知道是否有某种方法可以从 flash 中触发 ExternalInterface 以承诺对 Paypal Button 代码进行操作，从而使 as3 和 Paypal 能够轻松同步。

我玩过Paypal minicart，这似乎是连接两者的好方法，但是因为我无法将Paypal 按钮代码放入Flash 中，使其行为方式与其代码要求的方式相同。

任何帮助我指向正确方向的帮助都会很棒，因为我相信很多人都在努力让这两者以这种方式工作。

*   （另外，考虑到 Paypal 和 Flash 已经存在了多久，很难理解为什么它们的按钮代码不能通过 xml 访问！）

**修改示例**

如果您通常尝试加载下面的代码（来自 Paypal 代码生成器）并将其包含在标准 info.xml 文件中以将其与典型的 html 设置一起使用，则会引发以下错误代码：

错误：#1085 这是 xml 标记不佳的症状，据我所知，结束标记尚未关闭，如果使用以下结尾“/>”进行更正，则无法在屏幕上显示。

我尝试更正标签并验证它以检查错误并仍然得到相同的结果，并使用多种方法将数据导入为 html、txt 等，但仍然没有乐趣。

**贝宝代码**

```
<![CDATA[<form target="paypal" action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_cart">
<input type="hidden" name="business" value="WHATEVER YOUR BUSINESS IS">
<input type="hidden" name="lc" value="GR">
<input type="hidden" name="item_name" value="Card - Birthday">
<input type="hidden" name="item_number" value="BC 01-00-01">
<input type="hidden" name="amount" value="3.25">
<input type="hidden" name="currency_code" value="EUR">
<input type="hidden" name="button_subtype" value="products">
<input type="hidden" name="no_note" value="0">
<input type="hidden" name="cn" value="Add special instructions to the seller:">
<input type="hidden" name="no_shipping" value="2">
<input type="hidden" name="tax_rate" value="23.000">
<input type="hidden" name="shipping" value="1.75">
<input type="hidden" name="add" value="1">
<input type="hidden" name="bn" value="PP-ShopCartBF:btn_cart_LG.gif:NonHosted">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_cart_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>]]> 
```

我也尝试过不使用标签和原始代码，但它们都会抛出错误，或者无法显示数据。

我已经成功地分解了 AS3 变量，以将相同的效果传递给数组中的按钮上的贝宝，但这会导致打开一个浏览器，每个实例都将您带到贝宝，因为所需的结果是继续购物按钮代码，而不是每次都有 10 个窗口添加一个项目。

使用 Paypal 的 Minicart 可以获得相同的结果，并且可以在标准 html 中使用上面的代码正常工作，但在 AS3 中似乎失败了，并且 MiniCart 或类似的购物车也无法识别。

包含按钮代码并在 xml 中显示自定义或 Paypal 按钮的选项似乎很简单，我不敢相信它没有在任何地方完成，如果是这样，在任何地方都找不到提及或示例来参考。

如果可能的话，我的想法是提供一个 ExternalInterface，从外部源、Javascript 或（如果可能的话）调用代码来访问/模拟相同的效果或能够直接从 Flash 传递相同的信息。

我知道 xml 还依赖于其他因素，例如 'utf-8' 标记和 AS3 中明显严格的错误管理，但是管理导入本质上是简单按钮代码的内容似乎非常困难。

任何反馈将是一种祝福，

谢谢，

西蒙

**修改后的代码 - 一半工作**

```
function onBtnClick(e:Event):void  {
//Setup the data.
var req:URLRequest = new URLRequest("https://www.paypal.com/cgi-bin/webscr");
var reqVars:URLVariables = new URLVariables();
reqVars.cmd = "_cart";
reqVars.business = "7BRY3X5XVSZ9Y";
reqVars.lc = "GR";
reqVars.item_name = "Card - Birthday";
reqVars.item_number = "BC 01-00-01";
reqVars.amount = "3.25";
reqVars.currency_code = "BC 01-00-01";
reqVars.button_subtype = "products";
reqVars.no_note = "0";
reqVars.cn = "Add special instructions to the seller:";
reqVars.no_shipping = "2";
reqVars.tax_rate = "23.000";
reqVars.shipping = "1.75";
reqVars.add = "1";
reqVars.bn = "PP-ShopCartBF:btn_cart_LG.gif:NonHosted";

//and so on

req.data = reqVars;
sendToURL(req);
trace(reqVars);
} 
```

它现在在我查看购物车时在 Paypal 上注册，但是 Paypal Minicart 错过了它，所以可能是有问题的发送方法，这两种方法之间是一种有效的方法，我只需要用其他项目测试它以确保它们全部注册。

很近！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:24:03.177

好的，所以我想我已经正确理解了您的问题。而且我会说，不是为了发布一些数据而导入大量数据并不是真正必要的。相反，我会做类似下面的事情。但请记住，我没有使用 paypal 的经验，所以我的解决方案可能并不可取。

所以这是我的代码：

```
private function init(e:Event = null):void 
{
removeEventListener(Event.ADDED_TO_STAGE, init);
btn = new Sprite();
btn.graphics.beginFill(0x000000);
btn.graphics.drawRect(50, 50, 100, 50);
btn.graphics.endFill();
btn.addEventListener(MouseEvent.CLICK, onBtnClick);

addChild(btn);
}

private function onBtnClick(e:Event):void 
{
//Setup the data.
var req:URLRequest = new URLRequest("http://www.acme.com");
var reqVars:URLVariables = new URLVariables();
reqVars.cmd = "_cart";
reqVars.business = "WHATEVER YOUR BUSINESS IS";
reqVars.lc = "GR";
//and so on
req.data = reqVars;
req.method = URLRequestMethod.POST;

var loader:URLLoader = new URLLoader();
loader.load(req); //Send the post data.
trace("fooo");
} 
```

此代码将 POST 一条消息到相关的`url`. 我希望这有帮助。

# sencha-touch - 如何在 Sencha Touch 1 中通过拖放重新排列容器中的项目

> ID：12473818
> 
> 赞同：1
> 
> 时间：2012-09-18T09:09:56.707
> 
> 标签：sencha-touch

我需要在 Sencha Touch 1.0 应用程序中创建一个可以使用拖放重新排列的列表。所以到目前为止我所做的是创建一个面板，其中项目列表由交替的可拖放面板组成。我可以将一个项目拖到一个新位置，我可以弄清楚我需要在哪里插入它，但问题是我不知道如何在面板中实际移动项目。

我试图删除该项目并将其插入新位置，但它有点慢，一旦我将 Draggable 对象上的 eventTarget 更改为指向该项目的子项（您必须用于拖动它）。

```
var paragraphText = p.el.dom.outerText;
paragraphPanel.remove(paragraph, true);
paragraphPanel.insert(dropIndex, createParagraph(paragraphText));
paragraphPanel.doLayout(); 
```

我还尝试不破坏该项目，只是将其移除并将其重新插入新位置。这根本不起作用，因为拖动被重置并且列表中没有任何事情发生，即使下面的代码被执行。

```
paragraphPanel.remove(paragraph, false);
paragraphPanel.insert(dropIndex, paragraph);
paragraphPanel.doLayout(); 
```

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T14:02:22.183

最后我放弃了尝试为此使用 Panel ，而是使用了 Ext.List ：

```
this.paragraphList = new Ext.List({
    xtype: 'list',
    store: this.paragraphStore,
    itemTpl : '<div class="paragraph-content" >{text}</div><div class="paragraph-handle" ></div>',
    cls: 'paragraph-list',
    disableSelection: true,
    height:'100%',
    scroll: 'vertical'
}); 
```

这样我就不必担心渲染这个东西，我可以更新商店，渲染会自己发生。列表中的每个项目都有一个 Draggable 但没有 Droppable 对象。相反，在 'beforedragend' 事件中，我计算物品被丢弃的位置并相应地更新商店。一旦你弄清楚了 dragIndex 和 dropIndex 你可以做这样的事情：

```
//if item is moving down in the list dropIndex is decremented
//because the item is first removed and then added to new position
if (dropIndex > dragIndex) {
    dropIndex--;
}

//in case the item isn't being dropped in an appropriate place
//just return and let Sencha reset the draggable object (snap back to place)
if (dropIndex == null || dropIndex == dragIndex) {
    return;
}

//this will stop the item from resetting  
//it is not in the Sencha documentation
draggable.cancelRevert = true;
this.resetAll();

var store = this.paragraphStore;
var paragraph = store.getAt(dragIndex);
store.suspendEvents(false);
store.remove(dragIndex);
store.resumeEvents();
store.insert(dropIndex, paragraph); 
```

这里有一些额外的事情值得一提：

在 Draggable 对象上，您可以使用“eventTarget”来指定将启动拖动操作的 HTML 元素。这样您就可以添加一些图形，当您想要拖动它时，它就像每个元素的句柄一样。

您还可以使用“代理”属性来指定在拖动项目时显示的 html 元素。因为拖动实际上使用 css 翻译，如果您拖动列表的一个元素，例如在列表滚动时，它会变得相当复杂。代理可以是不属于列表的 div。

有关更多信息，请参阅 Sencha 文档并查看他们的源代码，因为有很多没有记录的内容： [http ://docs.sencha.com/touch/1-1/#!/api/Ext.util.Draggable](http://docs.sencha.com/touch/1-1/#!/api/Ext.util.Draggable)

# sql - 不处理用户输入时，无参数查询可以吗？

> ID：12473820
> 
> 赞同：0
> 
> 时间：2012-09-18T09:10:05.870
> 
> 标签：sql, database, parameters

我了解 SQL 注入的概念，它们是什么，它们为什么不好以及如何通过参数化查询和中断查询等方法来防止它们，但是如果您在代码中仅使用直接查询字符串会发生什么情况没有用户输入的地方。

例如，如果您在用户登录时存储了一些关于用户的信息，并且它是自动完成的，并且用户没有意识到或做任何事情，也许是这样的；

```
UPDATE tblUser SET lastLogged = blahblah WHERE userID = blahblah2; 
```

这会在开发人员的脑海中引起任何担忧的威胁吗？

我的主要猜测是，如果黑客闯入程序或网站，也许他可以将这些信息进一步用于其他攻击？查询/字符串容易混淆吗？

提前喝彩。

编辑：这纯粹是为了理论，所以尽量不要说“如果你要做一份工作，就好好做”之类的说法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:16:05.330

在查询中使用参数时，即使参数已更改，数据库引擎也会将查询识别为相同的查询，从而允许它使用缓存的执行计划，这将带来更好的性能。所以，是的，总是使用参数。

关于安全性，如上所述，更新声明没有真正的问题，除非当然某些输入可以被用户篡改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T09:20:12.573

~~如果你要做...~~

通过允许程序像上面定义的更新查询一样执行任意 SQL，如果您的程序曾经受到威胁，那么您就不能再依赖数据的完整性。

通过使用存储过程（例如`SetUserLastLoggedInDate`）并拒绝对您的数据库执行任意 SQL 的权限，您可以减轻在发生妥协时的潜在损害。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T09:17:49.197

问题不是无参数查询：而是字符串连接。所以如果你这样做：

```
myQuery = "UPDATE tblUser SET lastLogged = blahblah WHERE userID = " + blahblah2 
```

你是在自找麻烦。你能绝对确定这`blahblah2`不是来自外部来源吗？通常参数是从其他方法传递到方法中的，而真正的来源是在许多类之外的地方。其他开发人员可以在不知道后果的情况下更改这些类和源。

不参数化查询有什么好处？在大多数语言中，这很容易做到，你只需养成习惯并坚持下去。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T09:17:32.023

从安全的角度来看，我不会担心，只要您的 blahblahs 都不受用户控制。但是从效率的角度来看，我仍然会使用参数化查询。

大概您要担心的用户不止一个，因此查询将为不同的用户运行。参数化语句允许 DBMS 进行更有效的缓存。

# objective-c - release vs autorease vs drain

> ID：12473821
> 
> 赞同：0
> 
> 时间：2012-09-18T09:10:11.990
> 
> 标签：objective-c, ios, xcode, cocoa-touch, xcode4

有什么区别。什么是最好的？您是否**排空**了相同的**版本**但排空不保存**保留**，而释放保存保留？ **autorelease**将对象保存在内存中一段时间​​。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:25:04.697

什么是最好的？答案当然是“视情况而定”。

对于大多数 Cocoa 的新手来说，我的意见是“以上都不是”——它是 ARC。尽管即使使用 ARC，对引用计数内存管理的一些了解也很重要，但您不必担心丢失 a`release`或`autorelease`, 过度释放。

在上面@Anshuk Garg 描述的情况下，您在线程的自动释放池耗尽之前创建了大量临时对象，您可以将有问题的代码包装在一个`@autorelease { ... }`块中。仪器可以告诉您您的内存占用是否是这些设置中的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T06:32:45.047

排出相同的释放但不同的排出不保存保留，而释放保存保留，自动释放将对象保存在内存中一段时间​​。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-09-18T09:17:16.470

**release**：在引用计数环境中，由于无法保留自动释放池，因此此方法会减少保留计数。当自动释放池被释放时，它会向其所有自动释放的对象发送“释放”消息。此外，在垃圾收集环境中，此方法是不可以的。

```
- (void)release 
```

**drain**：在引用计数环境中，释放和弹出接收器；在垃圾收集环境中，如果自上次收集后分配的内存大于当前阈值，则触发垃圾收集。

```
- (void)drain 
```

结论：从上面的简短讨论中可以清楚地看出，对于自动释放池（可以是 Cocoa 或 Cocoa touch），我们应该始终使用“drain”而不是“release”。

**release vs autorelease** 在大多数情况下，无论哪种方式都无关紧要。因为 -autorelease 仅仅意味着对象将在运行循环的当前迭代结束时被释放，所以对象将以任何一种方式被释放。

使用 -autorelease 的最大好处是您不必担心方法上下文中对象的生命周期。因此，如果您稍后决定要在对象最后一次使用几行后对其执行某些操作，则无需担心将调用移至 -release。

与使用 -autorelease 相比，使用 -release 的主要实例是如果您在方法中创建了大量临时对象。

# android - 从 xml 和每个片段膨胀夏洛克操作栏菜单

> ID：12473823
> 
> 赞同：2
> 
> 时间：2012-09-18T09:10:21.750
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在我的主要活动中创建操作栏菜单：

```
public boolean onCreateOptionsMenu(Menu menu) {
    // Used to put dark icons on light action bar
    SubMenu sub = menu.addSubMenu(null);
    sub.add(0, R.style.Theme_Sherlock, 0, "Default");
    sub.add(0, R.style.Theme_Sherlock_Light, 0, "Light");
    sub.add(0, R.style.Theme_Sherlock_Light_DarkActionBar, 0,
            "Light (Dark Action Bar)");

    MenuItem ShareButton = sub.getItem();
    ShareButton.setIcon(R.drawable.ic_action_overflow);
    ShareButton.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS
            | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    return true;

} 
```

然后在我的片段活动中，我尝试更改第二个片段的菜单：

```
first i do this:
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setHasOptionsMenu(true);
    } 
```

我这样做：

```
@Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        // TODO Auto-generated method stub
        //final MenuInflater inflater2 = getMenuInflater();
        //inflater.inflate(R.menu.historymenu, menu);
        Log.v("Some Log", "I'm in on Create Options Menu");

        SubMenu sub = menu.addSubMenu(null);
        sub.add(0, R.style.Theme_Sherlock, 0, "HistoryCheck");

        MenuItem ShareButton = sub.getItem();
        ShareButton.setIcon(R.drawable.ic_action_overflow);
        ShareButton.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS
                | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        super.onCreateOptionsMenu(menu, inflater);
    } 
```

如您所见，我很想为每个片段和主要活动从 .xml 膨胀菜单，但由于某种原因，膨胀没有任何作用。

使用添加新子菜单的代码，当我切换到第二个选项卡/片段时，我会得到 2 个菜单，我很想更改现有菜单，而不是添加额外的菜单。

请帮我更改正确的行。

肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T09:47:28.903

如果你想改变菜单，不要在你的主要活动中添加一个，只在你的片段中添加菜单。这样当你切换片段时，菜单也会相应地切换。

您可以从*xml*扩展菜单：

```
@Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        super.onCreateOptionsMenu(menu, inflater);
        inflater.inflate(R.menu.the_menu, menu);
    } 
```

只要确保你导入`com.actionbarsherlock.view.Menu`和`com.actionbarsherlock.view.MenuInflater`.

**the_menu.xml**（带有子菜单）

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/menu_item"
        android:showAsAction="always"
        android:title="Menu">
        <menu>
            <item
                android:id="@+id/submenu_1"
                android:showAsAction="always"
                android:title="submenu 1"/>
            <item
                android:id="@+id/submenu_2"
                android:showAsAction="always"
                android:title="submenu 2"/>
        </menu>
    </item>

</menu> 
```

# visual-studio-2010 - 如何在没有安装 wix 3.6 的情况下配置 Visual Studio 的解决方案以打开/编译 wix 项目？

> ID：12473833
> 
> 赞同：0
> 
> 时间：2012-09-18T09:10:46.823
> 
> 标签：visual-studio-2010, wix

如何在机器上不安装 wix 3.6 的情况下配置 Visual Studio 的解决方案以打开/编译 wix 项目？

换句话说，我想要得到的情况是：“获取最新”之后的开发人员，连同源，在解决方案准备好时获取所有 wix 工具，然后使用它们（构建 msi）。

我在半年前看过有关该文章的文章，但现在没有您的帮助我找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:30:45.243

你不能。Visual Studio 需要一个单独的 VSPackage 来理解不在“盒子里”的项目类型（如 .wixproj）。对于 WiX，这需要安装 Votive，这是 VS 的 WiX 项目系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T19:43:25.393

您提到的文章可能是描述如何在未以通常方式（通过 MSI 包）安装 WiX 工具集的构建服务器上构建 WiX 项目的文章。它被称为[将 WiX 项目集成到日常构建](http://wix.sourceforge.net/manual-wix3/daily_builds.htm)中，也可以在使用 MSBuild 文件夹下的 WiX.chm 中找到。

您将能够在构建服务器上和本地开发人员机器上构建 WiX 项目，但不能从 Visual Studio 构建——原因由 Bob 在他的回答中解释。

# android - 如何增加联系人列表

> ID：12473838
> 
> 赞同：0
> 
> 时间：2012-09-18T09:11:01.363
> 
> 标签：android, sqlite, listview

我的应用程序显示了联系人列表，我想显示一些联系人的一些额外动态信息。到目前为止我想到的选项包括以下内容。

1.  创建一个矩阵光标，其中包含所有联系人以及我的附加信息。我不喜欢这个想法，因为可能有大量的联系人。但是在渲染视图时应该很快。
2.  当我获得联系人的光标时，还会使用我的附加信息构建一个哈希表。然后将两者都传递给 CursorAdapter 并让它在绑定视图时在哈希表中查找。我想这应该足够快，因为哈希表很快。

我倾向于2。有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:01:20.373

我选择了哈希表路线。我还尝试构建一个“增强”游标，通过内部化哈希表来添加一个额外的列。

# python - 导入变量

> ID：12473840
> 
> 赞同：0
> 
> 时间：2012-09-18T09:11:06.287
> 
> 标签：python, wxpython

attrubu 我是 python 新手，但不知道如何解决这个问题：

```
import wx

class myclass(wx.Frame):

    def __init__(self,parent,id):
        wx.Frame.__init__(self,parent,id,'Frame',size=(300,200))
        panel=wx.Panel(self)

        button=wx.Button(panel,label="click me",size=(120,60))
        self.Bind(wx.EVT_BUTTON, self.clickbutton, button)

        value=1

    def clickbutton(self, event):
        if self.value == 1:
            print("success")

if __name__=='__main__':
    app=wx.PySimpleApp()
    frame=myclass(parent=None,id=-1)
    frame.Show()
    app.MainLoop() 
```

当我单击按钮时，我收到此错误：“AttributeError：'myclass' 对象没有属性'值'”。我究竟做错了什么？/ 如何将“价值”导入我的“点击按钮”功能？

编辑：好的，这个已经解决了。之后我想稍微修改一下：

```
 self.dropdown=wx.Choice(panel,pos=(130,60))
    list = ['banana', 'apple', 'strawberry']
    self.dropdown.AppendItems(strings=list)

def clickbutton(self, event):
    if self.dropdown.GetStringSelection() == 'apple':
        print("success") 
```

实际上这可行....但是我花了很长时间才弄清楚我必须在最后一行中使用“GetStringSelection()”。如何为“wx.Choice”（和其他 wx 类）显示具有可能属性（如“GetStringSelection()”）的列表？或者是否存在一个好的网站？

编辑2：再次感谢！我有最后一个问题（抱歉一步一步问）：

```
dir(wx.Choice) 
```

工作，但我有一个名为“VarDecl”的对象的给定代码。为此，如果我问，我会收到错误

```
dir(wx.VarDecl) 
```

我正在为这个 VarDecl 对象寻找像“HasChanged”这样的属性。

```
Traceback (most recent call last):
File [...]    
if self.theVariable.HasChanged():
AttributeError: 'VarDecl' object has no attribute 'HasChanged' 
```

Edit3：好的，我认为它与“wx”无关，我认为它来自“re”。（或者仍然是“wx”？我很困惑）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:12:44.197

更改`value=1`为`self.value = 1`。您现在拥有的`value`是一个局部变量，它在退出构造函数时被丢弃。

**编辑：**至于您的第二个问题，内置函数`dir(object)`将为您提供给定对象范围内的名称列表（包括方法）。 [更多信息在这里](http://docs.python.org/library/functions.html#dir)

**编辑 2：** [wxPython 文档也可能对您有用](http://wxpython.org/docs/api/)

**编辑 3：**关于 theVariable 的事情：你试过`dir(self.theVariable)`吗？

# visual-studio-2010 - What are the files and folder I should automatically exclude?

> ID：12473841
> 
> 赞同：1
> 
> 时间：2012-09-18T09:11:13.227
> 
> 标签：visual-studio-2010, svn, tortoisesvn

I have a Visual Studio 2010 project with Unit Test project.

We have 5 peoples working in a team.

I am using SVN and TortoiseSVN client for source control.

What are the files and folder I should automatically exclude from the soruce control?

Below is the folder I am excluding:

1.  bin
2.  obj

Should I exclude files like sln, suo, csproj, and TestResults?

Thank you.

* * *

Edited:

I think below is the list:

global-ignores = bin obj *.suo *.obj *.pdb *.exe *.dll *.csproj.user

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:20:43.470

Sln is the solution file, so no, you do not want to exclude this.

Suo should be excluded, as this is user defined Visual Studio settings.

CsProj is the project file for one of the projects within your solution, so again no, do not exclude this.

TestResults are used by Visual Studio's Test Runner, so you will want to exclude this.

You may also want to exclude any Resharper settings file, if you use Resharper.

If you use Stylecop and want shared StyleCop settings, make sure the stylecop files are in there.

If you have any third party libraries, make sure they are in one place.

# jquery - $.ajax() function working in IE but not in Chrome and FF

> ID：12473844
> 
> 赞同：0
> 
> 时间：2012-09-18T09:11:21.657
> 
> 标签：jquery

I guess this question is not asked in this forum before, tried searching alot but none matched or worked for me. Below is the JSFiddle link of code:

[JSFiddle](http://jsfiddle.net/qh5Nv/)

Everything is working well in IE8 and IE9 but not in any other browsers. I tried looking for the problem in Chrome from which I got

```
XMLHttpRequest cannot load http://v3.actisku.com/GetUserPostData?pid=Test-37&surv=1170\. Request header field X-Requested-With is not allowed by Access-Control-Allow-Headers 
```

I tried searching for necessary solution i.e CORS but couldn't figure out the solution. I am side by side looking for the same.

EDIT:

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<html><head>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            var contents = $.ajax({
                url: 'http://v3.actisku.com/GetUserPostData?pid=Test-37',
                cache: false,
                crossDomain: true,
                dataType: 'html',
                data: { surv: '1170'},
                async: false
            }).responseText;

            var test = contents;
            alert(test);
            test = test.replace(/\t/g, ';');
            alert(test);
            test = test.replace(/\n/g, 'break');
            alert(test);
            $('#contentArea').attr('value', test);
        });
    </script>
</head>

<body>
<textarea id="contentArea" rows="10" cols="50"></textarea>
</body>
</html>​ 
```

Can we manually add headers so that the server feels like it is getting request from IE itself.

Regards, icr

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:13:41.427

ok as says there... "Request header field X-Requested-With is not allowed by Access-Control-Allow-Headers" **all AJAX/XHR requests are blocked by the server**. Please try to contact the server administrator about the server configuration

the IE uses a different way to send ajax request(so they were not blocked) because they are using `ActiveXObject("Msxml2.XMLHTTP")` or `ActiveXObject("Microsoft.XMLHTTP")` which the server maybe reads them differently as they are passed to the headers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:17:47.720

There is nothing in your code, to create Browser incompatibility. In fact they ware working fine in Firefox, and chrome. However, This seems unnecessary.

```
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
} 
```

As mentioned by Mahan, this looks to be like Server Configuration problem.

# maven - Maven 版本插件：版本比较在哪里

> ID：12473846
> 
> 赞同：2
> 
> 时间：2012-09-18T09:11:36.227
> 
> 标签：maven, versions-maven-plugin

我正在阅读有关 Maven 版本插件的信息：http: [//mojohaus.org/versions-maven-plugin/examples/advancing-dependency-versions.html](http://mojohaus.org/versions-maven-plugin/examples/advancing-dependency-versions.html)

为了这个目标：“versions:use-next-releases 在 pom 中搜索所有非 SNAPSHOT 版本，这些版本都是较新的版本，并用下一个版本替换它们。”

“已经是较新的版本”是什么意思，它在哪里寻找较新的版本？它是否在检查中央存储库是否有更新的版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:53:04.340

是的，或者您的存储库管理器（例如 Nexus 或 Artifactory），如果您设置了一个。您还可以使用[display-dependency-updates](http://mojohaus.org/versions-maven-plugin/examples/display-dependency-updates.html)来查看结果，而无需实际更改 pom 本身。我发现这更有价值，因为有时项目使用的编号方案与 Maven 所期望的略有不同，因此您最终可能会得到一个您并不真正想要的版本。

# android - 如何获得具有 Uri 的文件的 mime 类型？

> ID：12473851
> 
> 赞同：98
> 
> 时间：2012-09-18T09:11:44.407
> 
> 标签：android, uri, mime-types

我有一个使用画廊和相机获得的 Uris 列表。这些 Uris 是这样的：`content://media/external/images/media/94`. 我怎样才能得到它的 mime 类型？

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2012-09-18T09:19:54.157

你可以试试

```
ContentResolver cR = context.getContentResolver();
MimeTypeMap mime = MimeTypeMap.getSingleton();
String type = mime.getExtensionFromMimeType(cR.getType(uri)); 
```

**编辑 ：**

```
mime.getExtensionFromMimeType(cR.getType(uri)) 
```

返回->“jpeg”

```
cR.getType(uri); 
```

返回“image/jpeg”，即预期值。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-04-09T09:09:46.427

此方法返回文件的扩展名（jpg、png、pdf、epub 等）。

```
 public static String getMimeType(Context context, Uri uri) {
    String extension;

    //Check uri format to avoid null
    if (uri.getScheme().equals(ContentResolver.SCHEME_CONTENT)) {
        //If scheme is a content
        final MimeTypeMap mime = MimeTypeMap.getSingleton();
        extension = mime.getExtensionFromMimeType(context.getContentResolver().getType(uri));
    } else {
        //If scheme is a File
        //This will replace white spaces with %20 and also other special characters. This will avoid returning null values on file name with spaces and special characters.
        extension = MimeTypeMap.getFileExtensionFromUrl(Uri.fromFile(new File(uri.getPath())).toString());

    }

    return extension;
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-03-30T09:30:28.260

为`Content` `Uri`.

```
ContentResolver cr = context.getContentResolver();
mimeType = cr.getType(contentUri); 
```

为`File` `Uri`.

```
String fileExtension = MimeTypeMap.getFileExtensionFromUrl(fileUri
            .toString());
mimeType = MimeTypeMap.getSingleton().getMimeTypeFromExtension(
            fileExtension.toLowerCase()); 
```

对于两者，`Content`同样适用于`File`.

```
public String getMimeType(Context context, Uri uri) {
    String mimeType = null;
    if (ContentResolver.SCHEME_CONTENT.equals(uri.getScheme())) {
        ContentResolver cr = context.getContentResolver();
        mimeType = cr.getType(uri);
    } else {
        String fileExtension = MimeTypeMap.getFileExtensionFromUrl(uri
                .toString());
        mimeType = MimeTypeMap.getSingleton().getMimeTypeFromExtension(
                fileExtension.toLowerCase());
    }
    return mimeType;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-28T11:05:14.983

而不是这个：

```
String type = mime.getExtensionFromMimeType(cR.getType(uri)); 
```

做这个：

```
String type = cR.getType(uri); 
```

你会得到这个：`image/jpeg`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-25T09:28:52.210

我将使用 Kotlin 扩展和返回类型模仿 Bhavesh 的答案`okhttp3.MediaType`：

```
fun Uri.mimeType(contentResolver: ContentResolver)
        : MediaType? {
    if (scheme.equals(ContentResolver.SCHEME_CONTENT)) {
        // get (image/jpeg, video/mp4) from ContentResolver if uri scheme is "content://"
        return contentResolver.getType(this)?.toMediaTypeOrNull()
    } else {
        // get (.jpeg, .mp4) from uri "file://example/example.mp4"
        val fileExtension = MimeTypeMap.getFileExtensionFromUrl(toString())
        // turn ".mp4" into "video/mp4"
        return MimeTypeMap.getSingleton()
                .getMimeTypeFromExtension(fileExtension.toLowerCase(Locale.US))
                ?.toMediaTypeOrNull()
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-13T04:20:45.803

例如返回“image/jpeg”

```
fun Uri.getMimeType(context: Context): String? {
    return when (scheme) {
        ContentResolver.SCHEME_CONTENT -> context.contentResolver.getType(this)
        ContentResolver.SCHEME_FILE -> MimeTypeMap.getSingleton().getMimeTypeFromExtension(
            MimeTypeMap.getFileExtensionFromUrl(toString()).toLowerCase(Locale.US)
        )
        else -> null
    }
} 
```

# meta - 各种元标记的含义

> ID：12473853
> 
> 赞同：1
> 
> 时间：2012-09-18T09:11:56.023
> 
> 标签：meta

我想知道以下元标记的含义和作用：

*   `<meta name="revised" content="Alpha, 9/18/2013" />`
*   `<meta http-equiv="refresh" content="30" />`
*   `<meta http-equiv="content-type" content="text/html;charset=UTF-8" />`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:17:38.727

```
<meta http-equiv="refresh" content="30" /> 
```

用于使浏览器在 30 秒后刷新页面

```
<meta name="revised" content="Alpha, 9/18/2013" /> 
```

修改后的元标记记录上次更新站点的时间

```
<meta http-equiv="content-type" content="text/html;charset=UTF-8" /> 
```

用于定义 HTML 文档的字符集

# sql - SQL 选择语句。？

> ID：12473856
> 
> 赞同：-2
> 
> 时间：2012-09-18T09:12:09.663
> 
> 标签：sql, database

我想知道用存储过程编写的两个选择语句的实际区别？

```
Select COUNT(1) from ref_user where nm_user=@nm_user and password=@password; 
```

和

```
 Select * from ref_user where nm_user=@nm_user and password=@password; 
```

请正确指导我，因为我是数据库新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:13:08.680

一个会返回一个计数。另一个将返回数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:14:16.573

```
Select COUNT(1) from ref_user where nm_user=@nm_user and password=@password; 
```

这个返回`ref_user`表中的计数值。

```
Select * from ref_user where nm_user=@nm_user and password=@password; 
```

这个返回所有 [datas] 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:19:01.610

第一个查询返回表中的行数，而第二个查询返回表中的整个行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T09:21:28.547

COUNT函数用于计算行数

```
Select COUNT(1) from ref_user where nm_user=@nm_user and password=@password; 
```

返回与输入条件匹配的记录数

```
 Select * from ref_user where nm_user=@nm_user and password=@password; 
```

返回与输入条件匹配的整行

# java - 如何设计一个包含 java.lang.String 的不可变值类？

> ID：12473859
> 
> 赞同：8
> 
> 时间：2012-09-18T09:12:20.333
> 
> 标签：java, guava, immutability

## 客观的

创建一个类以用作**[String](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html "JDK：java.lang.String")**对象的不可变列表。

## 方法

我决定利用**[Google Guava](http://code.google.com/p/guava-libraries/ "Guava：用于 Java 的 Google 核心库")**的**[ImmutableList<E>](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableList.html "番石榴：com.google.common.collect.ImmutableList<E>")**集合，而不是用**[Collections.unmodifiableList(List<? extends T> list)包装一个简单的](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableList(java.util.List) "JDK: java.util.Collections.unmodifiableList(List<? extends T> list)")****[List<E>因为我知道这可以避免对支持](http://docs.oracle.com/javase/7/docs/api/java/util/List.html "JDK：java.util.List<E>")****[List<E](http://docs.oracle.com/javase/7/docs/api/java/util/List.html "JDK: java.util.List<E>")**进行不必要的并发检查**[>](http://docs.oracle.com/javase/7/docs/api/java/util/List.html "JDK: java.util.List<E>")**，它不知道被包装（来源：[ImmutableCollectionsExplained](http://code.google.com/p/guava-libraries/wiki/ImmutableCollectionsExplained)）。

## 要求

*   具有跨线程使用的“价值持有者”的类
*   不应允许任何代码在创建后更改内部值

### 锦上添花

*   该类应实现**[Iterable<E>](http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html "JDK：java.lang.Iterable<E>")**以按创建顺序对值进行迭代
*   **[给定的一组String](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html "JDK：java.lang.String")**应该只有一个类。

## 尝试

这里有一些尝试，虽然更多的组合是可能的。原谅幽默的演绎。

### 尝试#1（包括使用示例）

```
import java.util.List;
import com.google.common.collect.ImmutableList;
class BritnetSpearsSpellings implements Iterable<String> {
  public static BritnetSpearsSpellings of(String... spellings) {
    BritnetSpearsSpellings britneySpears = new BritnetSpearsSpellings();
    britneySpears.spellings = ImmutableList.copyOf(spellings);
    return britneySpears;
  }
  private List<String> spellings;
  private BritnetSpearsSpellings() {
  }
  public List<String> getSpellings() {
    return spellings;
  }
}
@Override
public Iterator<String> iterator() {
  return spellings.iterator();
}
public class Usage {
  public static void main(String[] args) {
    for (String sepllin : BritnetSpearsSpellings.of("Brittany Spears", "Brittney Spears", "Britany Spears"))
      System.out.printf("You spel Britni like so: %s%n", sepllin);
    }
  }
} 
```

### 尝试#2

```
class BritnetSpearsSpellings implements Iterable<String> {
  public static BritnetSpearsSpellings of(String... spellings) {
    BritnetSpearsSpellings britneySpears = new BritnetSpearsSpellings();
    britneySpears.spellings = ImmutableList.copyOf(spellings);
    return britneySpears;
  }
  private ImmutableList<String> spellings;
  private BritnetSpearsSpellings() {
  }
  public ImmutableList<String> getSpellings() {
    return spellings;
  }
  @Override
  public Iterator<String> iterator() {
    return spellings.iterator();
  }
} 
```

### 尝试#3

```
class BritnetSpearsSpellings implements Iterable<String> {
  public static BritnetSpearsSpellings of(String... spellings) {
    BritnetSpearsSpellings britneySpears = new BritnetSpearsSpellings(ImmutableList.copyOf(spellings));
    return britneySpears;
  }
  private final ImmutableList<String> spellings;
  private BritnetSpearsSpellings(ImmutableList<String> spellings) {
    this.spellings = spellings;
  }
  public ImmutableList<String> getSpellings() {
    return spellings;
  }
  @Override
  public Iterator<String> iterator() {
    return spellings.iterator();
  }
} 
```

### 差异总结

*   # 1 将**[List<E>](http://docs.oracle.com/javase/7/docs/api/java/util/List.html "JDK：java.util.List<E>")**保留在公共接口中，记录 JavaDoc 中的不变性。

*   # 2 将所有内容存储并公开为**[Google Guava](http://code.google.com/p/guava-libraries/ "Guava：用于 Java 的 Google 核心库")**的**[ImmutableList<E>](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableList.html "番石榴：com.google.common.collect.ImmutableList<E>")**

*   # 3 以创建专用构造函数为代价将内部引用保持为最终引用，这可能会使静态工厂方法初始化在没有其他初始化选项的情况下看起来很傻（实际上在真实类中存在）

## 问题

请帮助我在其中一种实现中进行选择，并说明您的选择背后的原因。

我认为方法 2 的主要缺点是客户需要了解/了解专门的**[Google Guava](http://code.google.com/p/guava-libraries/ "Guava：用于 Java 的 Google 核心库")**类型，而他们可能不应该这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:52:33.570

显然，在我看来，#3 是最好的选择。强制并记录类（该字段）的不可变性，而不仅仅是其本身不可变`final`的事实。`List`

`List`无论您是使用一些 javadoc 还是`ImmutableList`在 getter 中公开一个实际值，都是另一回事。我已经看到一些意见认为返回`ImmutableList`文档的意图很明确，但是，您仍然将自己绑定到实现而不是接口，以实现低级别并且将来可能需要更改的东西（即使不变性是“通常”好的）。因此，对于您的应用程序而言，它更像是一种全球设计选择，而不仅仅是一个用例。如果您确实使用`ImmutableList`，我认为这对客户来说不是一个真正的问题，名称是明确的，并且可以通过您的 IDE 轻松看出它是 的实现`List`，如果他们想要更多信息，他们可以访问 javadoc。谁知道呢，他们可能会喜欢它并开始使用它，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T21:34:20.923

从您的问题陈述（“给定的一组字符串应该只有一个类”），听起来您真正想要的是一个`Interner<ImmutableSet<String>>`.

*   [Interner](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Interner.html)是一种实用程序（用 构造一个`Interners.newStrongInterner()`），用于确保您只有一个具有任何给定数据的对象实例。
*   如果您的集合是不可变的并且支持成员资格测试的任意顺序的集合，则[ImmutableSet是正确的选择。](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableSet.html)

或者，您可能想查看一个`Cache<ImmutableSet<String>>`（有关详细信息，请参阅[Caches Explained](http://code.google.com/p/guava-libraries/wiki/CachesExplained)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:50:27.213

我会使用`Attempt #2`over `Attempt #1`，因为它记录了您总是返回 ImmutableList 实例。一般来说，选择尽可能具体的返回类型和尽可能通用的参数类型是有用的。但是对于这两种情况，都更喜欢接口而不是具体的类。

嗯，`ImmutableList`是一个抽象类而不是一个接口。但是由于它的性质，它的行为非常像一个界面。

`Attempt #3``spellings`当您的类成员引用在对象的生命周期内无法更改和/或您希望使整个类本身不可变时，这是有意义的。否则，`spellings`在对象生命周期内何时可以将其分配给另一个 ImmutableList 则没有意义。

鉴于您示例中的用例，我倾向于说#3 是最佳选择。

# c# - Cannot find dll entry-point. Run-time error 453

> ID：12473862
> 
> 赞同：-1
> 
> 时间：2012-09-18T09:12:34.170
> 
> 标签：c#, vb6

Based on the challenge I asked on this forum through the link [Consuming .NET dll in VB6 application](https://stackoverflow.com/questions/12465306/consuming-net-dll-in-vb6-application) I was successfully able to consume my .NET dll within VB6 by registering the dll and it's .tlb files, referencing the tlb file within my application and using the code below:

```
Dim dObject as new DllName.ClassName
dObject.MethodName(filename) 
```

The issue is I want to be able to use the code below

```
Declare Sub MethodNameLib "DllName" (ByVal ff As String) 
MethodName(filename) 
```

However, I get the error "Run-time error 453: Cannot find dll entry-point. Please could any help as this is urgent?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:22:05.170

请检查 Microsoft 链接，它将告诉您如何开发一个 Dot Net DLL，它将与 COM Objects(VB6) 一起使用 [链接](http://msdn.microsoft.com/en-us/library/zsfww439%28v=VS.71%29.aspx)

和其他一些解决方案在这里[链接](http://www.velocityreviews.com/forums/t20314-use-net-created-dll-in-vb6.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:50:07.763

您不能使用`Declare ...`调用 COM（或 .NET/COM 互操作）库。`Dim Obj As LibName.ClassName`这些需要使用等来创建。

如果要使用，`Declare ...`则需要查看使用 StdCall 在导出表中公开 .NET DLL 中的各个方法。

# javascript - jQuery script crashing web page

> ID：12473868
> 
> 赞同：0
> 
> 时间：2012-09-18T09:12:56.387
> 
> 标签：javascript, jquery

I have a page with a carousel on using the infinite-carousel plugin.

When I run the page it crashes my browser and asks if I want to stop the unresponsive script.

In my JS file to call the action I have...

```
$(document).ready(function(){
    $('#viewport').carousel('#simplePrevious', '#simpleNext');
    $('.gallery-viewport-ext').carousel('.gallery-viewport-ext #simplePrevious', '.gallery-viewport-ext #simpleNext');
    $('.gallery-viewport-int').carousel('.gallery-viewport-int #simplePrevious', '.gallery-viewport-int #simpleNext');
    $('.gallery-viewport-gw').carousel('.gallery-viewport-gw #simplePrevious', '.gallery-viewport-gw #simpleNext');
    $('.gallery-viewport-theroofterrace').carousel('.gallery-viewport-theroofterrace #simplePrevious', '.gallery-viewport-theroofterrace #simpleNext');
    $('.gallery-viewport-photos').carousel('.gallery-viewport-photos #simplePrevious', '.gallery-viewport-photos #simpleNext');
    $('.gallery-viewport-onebedroomapartment').carousel('.gallery-viewport-onebedroomapartment #simplePrevious', '.gallery-viewport-onebedroomapartment #simpleNext');
    $('.gallery-viewport-twobedroomapartment').carousel('.gallery-viewport-twobedroomapartment #simplePrevious', '.gallery-viewport-twobedroomapartment #simpleNext');
    $('.gallery-viewport-externals').carousel('.gallery-viewport-externals #simplePrevious', '.gallery-viewport-externals #simpleNext');

    $('#slider-stage').carousel('#previous', '#next');  
    $('#tab-container').easytabs();

                //Examples of how to assign the ColorBox event to elements
                $(".group1").colorbox({rel:'group1'});
                $(".group2").colorbox({rel:'group2', transition:"fade"});
                $(".group3").colorbox({rel:'group3', transition:"none", width:"75%", height:"75%"});

    // Dropdown, show more text
    $('.useful-links ul li a').on('click', function () {
        $(this).next('p').toggle();   
        return false;  
    });
}); 
```

If I remove the

```
$('.gallery-viewport-int').carousel('.gallery-viewport-int #simplePrevious', '.gallery-viewport-int #simpleNext'); 
```

which starts the action for that page the page then loads.

Has anybody an idea on what could be going wrong? or how I can debug it?

* * *

```
<section class="gallery-viewport-int">
            <ul style="">
                <li style=""><img alt="image" src="_includes/images/slide-1.jpg"></li>
                <li style=""><img alt="image" src="_includes/images/slide-2.jpg"></li>
                <li style=""><img alt="image" src="_includes/images/slide-3.jpg"></li>
                <li style=""><img alt="image" src="_includes/images/slide-1.jpg"></li>
                <li style=""><img alt="image" src="_includes/images/slide-2.jpg"></li>
                <li style=""><img alt="image" src="_includes/images/slide-3.jpg"></li>
            </ul>
            <a id="simplePrevious"><img alt="Left Arrow" src="_includes/images/larr.png"></a>
            <a id="simpleNext"><img alt="Right Arrow" src="_includes/images/rarr.png"></a>
        </section> 
```

# java - Java IB API/ TWS get mulitple quotes/price of the company

> ID：12473869
> 
> 赞同：0
> 
> 时间：2012-09-18T09:13:02.177
> 
> 标签：java

Am using java ib api / traders workstaion, now am getting current price for company using ticketprice, is there anyway to get multiple quotes

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T20:44:06.567

这不是 IB API 的工作方式。每个证券报价都有一个与之关联的唯一 ID。因此，请求必须一次发送一个。

# parameters - NSIS LogicLib 参数失败

> ID：12473879
> 
> 赞同：1
> 
> 时间：2012-09-18T09:13:38.307
> 
> 标签：parameters, nsis

我正在尝试制作一个安装程序，该安装程序在初始化安装程序时会进行多项检查，例如检查您的 Windows 是否为 64/32 位。如果嵌入式安装程序在 EXEDIR 中。这是一段代码。

```
${If} ${RunningX32}
    MessageBox MB_OK "running on x32"
  ${AndIf} ${FileExists} "$EXEDIR\VDF2012-17.0.22.8.Client.exe" #32 bit version
    !insertmacro UnselectSection ${SEC02}
     SectionSetText ${SEC02} ""
    !insertmacro SelectSection ${SEC03}
  ${Else}
    !insertmacro UnselectSection ${SEC03}
      SectionSetText ${SEC03} ""
      MessageBox MB_OKCANCEL "${PRODUCT_NAME} misses the Visual DataFlex setup. \
                                      Do you wan't to download it?" IDOK true IDCANCEL false
        true:
          StrCpy $2 "$EXEDIR\VDF2012-17.0.22.8.Client.exe"
          inetc::get /caption "Downloading Visual DataFlex" /popup "" "ftp://ftp.dataaccess.com/pub/products/vdf/Software/VDF2012-17.0.22.8.Client.exe" "$EXEDIR\VDF2012-17.0.22.8.Client.exe" $2
          Pop $R0 ;Get the return value
          StrCmp $R0 "success" +3
          ExecWait $2
          Delete $2
        false:
    ${EndIf} 
```

但是在第一行代码已经给了我这个错误，我尝试了一切来修复它..

```
!insertmacro: _If
!insertmacro: macro "_If" requires 4 parameter (s), passed 2!
Error in script "Path" Aborting blabla... 
```

我希望我说清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:26:55.930

没有名为 RunningX32 的宏，需要使用 RunningX64 宏：

```
!include x64.nsh

...

${IfNot} ${RunningX64}
  ... 
```

# android - How to use rest web services

> ID：12473887
> 
> 赞同：1
> 
> 时间：2012-09-18T09:14:10.163
> 
> 标签：android, rest

Generally, I used the Soap web service. Now I want to use rest web services. I tried but I am unable to understand it. Here I provided the soap web service for the login.

How can I write it for Rest?

It means can anyone provide the sample rest service. Is it clear? If you need more info please let me know.

**Code :**

```
public String AuthenticateUser() throws SoapFault   
{    

    String data = "";
    String serviceUrl = DH_Constant.RB_Webservice_URL;
    String serviceNamespace = DH_Constant.RB_Webservice_Namespace; 
    String soapAction = "https://www.dicomhub.com/AuthenticateUser";
    String type_of_soap = "AuthenticateUser";      

    try
    {
        SoapObject Request = new SoapObject(serviceNamespace, type_of_soap);
        Request.addProperty("strUserName", DH_Constant.strLoginUserName);   
        Request.addProperty("strPassword", strPassword);            
        System.out.println("AuthenticateUser Request:"+Request.toString());
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(Request);

        try
        {
            HttpTransportSE androidHttpTransport = new HttpTransportSE(serviceUrl);
            androidHttpTransport.call(soapAction, envelope);
        }
        catch(Exception e)
        {
            System.out.println("Webservice calling error ->"+e.toString());
        }

        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        data = response.toString();
        System.out.println("AuthenticateUser:"+response.toString());    
    }
    catch(Exception e)
    {
        System.out.println("Soap Method Error ->"+e.toString());    
    }

    return data;
} 
```

# django - 用于循环并显示第一个 X 匹配项的 Django 模板

> ID：12473888
> 
> 赞同：3
> 
> 时间：2012-09-18T09:14:12.557
> 
> 标签：django, templates

不确定如何准确表达我的问题，但我基本上想遍历一个列表并仅显示前 4 个匹配项。

```
{% for reward_type in reward_types %}
    <h2>{{ reward_type.name }}</h2>
    <div class="reward_category">
    {% for category in reward_categories %}
        {% if category.reward_type == reward_type %}
            .
            .
            Show the first 4 matches
            .
            .
        {% endif %}
    {% endfor %}
    </div>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-18T09:28:33.413

如果[`slice`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#slice)没有`{% if category.reward_type == reward_type %}`.

即，如果您有`category_matching_rewards`哪个列表，`category.reward_type == reward_type`则在模板中可以这样做

```
{%for category in category_matching_rewards|slice:"4" %}
       Show catgory
       ....
{%endfor%} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T09:17:37.167

您可以使用`forloop.counter`,`for`循环设置循环内可用的许多变量：

`forloop.counter` 循环的当前迭代（1-indexed）

`forloop.counter0` 循环的当前迭代（0-indexed）

`forloop.revcounter` 从循环结束的迭代次数（1-indexed）

`forloop.revcounter0` 从循环结束的迭代次数（0-indexed）

`forloop.first` **如果这是第一次通过循环，则为**真****

 **`forloop.last` **如果这是最后一次循环，则为**真****

 **`forloop.parentloop` 对于嵌套循环，这是当前循环*之上*的循环

[来源](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#for)

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-09-18T13:31:30.583

在将列表传递给模板之前，使用您的视图函数准备列表。

Django 模板不适用于像这样的复杂匹配。

与讨论的完全一样；-)****

# cassandra - Cassandra 行缓存 - 它是否总是从 ram 提供数据？

> ID：12473898
> 
> 赞同：1
> 
> 时间：2012-09-18T09:14:59.243
> 
> 标签：cassandra

行缓存在首次访问单列时将整行加载到内存中。新列的更新和插入更新行缓存 - 它可以被视为直写。

假设我有足够的内存来缓存我的行，我可以确定读取访问将始终从内存提供，而与缓存行上的更新/插入无关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:58:14.190

简短的回答：是的。行缓存将使您降低到微秒，而不是毫秒。

更长的答案：从技术上讲，只有在第一次读取之后，写入才会被添加到缓存中，除非它有一个现有的条目。Cassandra 确实支持定期保存其缓存，以便在下次重新启动时对其进行预热。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:17:54.783

是的，但我也读到它只能将性能提高 5% 左右，而且在 95% 的情况下，你永远不应该打开它。

在 playOrm 项目中，我们想知道它是否会将性能提高 40% 左右甚至 100%，因为我们只会缓存索引表中的行，当这些行分布在集群中时会加速我们的所有查询。我们已经在 60 毫秒内使用 S-SQL（可扩展 SQL）对分区中的 1,000,000 行进行查询，并且一旦 playOrm 添加嵌套的前瞻循环连接，它可能会变得更快，这可能比旧的 DBMS 嵌套块更快循环加入。

# php - Zip文件未在php中上传

> ID：12473901
> 
> 赞同：1
> 
> 时间：2012-09-18T09:15:07.560
> 
> 标签：php, file-upload, wamp

我正在尝试上传 zip 文件，但无法上传，但是当我尝试上传其他类型的扩展文件时，它已正确上传。以下是上传 zip 文件的代码：

```
<?php  

    if(isset($_FILES['fupload'])) {  
        $filename = $_FILES['fupload']['name'];  
        $source = $_FILES['fupload']['tmp_name'];  
        $type = $_FILES['fupload']['type'];  
        $name = explode('.', $filename);  
        $target = 'extracted/' . $name[0] . '-' . time() . '/';  
        // Ensures that the correct file was chosen  
        $accepted_types = array('application/zip',  
                                    'application/x-zip-compressed',  
                                    'multipart/x-zip',  
                                    'application/s-compressed');  
        foreach($accepted_types as $mime_type) {  
            if($mime_type == $type) {  
                $okay = true;  
                break;  
            }  
        }  
      //Safari and Chrome don't register zip mime types. Something better could be used here.  
        $okay = strtolower($name[1]) == 'zip' ? true: false; 
        if(!$okay) { 
              die("Please choose a zip file, dummy!"); 
        } 
        mkdir($target); 
        $saved_file_location = $target . $filename; 
        if(move_uploaded_file($source, $saved_file_location)) { 
            openZip($saved_file_location); 
        } else { 
            die("There was a problem. Sorry!"); 
        } 
    // This last part is for example only. It can be deleted. 
        $scan = scandir($target . $name[0]); 
        print '<ul>'; 
        for ($i = 0; $i<count($scan); $i++) { 
            if(strlen($scan[$i]) >= 3) { 
                $check_for_html_doc = strpos($scan[$i], 'html'); 
                $check_for_php = strpos($scan[$i], 'php'); 
                if($check_for_html_doc === false && $check_for_php === false) { 
                    echo '<li>' . $scan[$i] . '</li>'; 
                } else { 
                    echo '<li><a href="' . $target . $name[0] . '/' . $scan[$i] . '">' . $scan[$i] . '</a></li>'; 
                } 
            } 
        } 
        print '</ul>';  
    }  
    ?>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">  
<html>  
   <head>  
      <title>How to Upload and Open Zip Files With PHP</title>  
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  
   </head>  
   <body>  
      <div id="container">  
      <h1>Upload A Zip File</h1>  
      <form enctype="multipart/form-data" action="" method="post">  
      <input type="file" name="fupload" /><br />  
      <input type="submit" value="Upload Zip File" />  
      </form>  
      </div><!--end container-->  
    </body>  
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:13:42.000

**你必须使用**

```
if(is_dir($target . $name[0]))
{

  $scan = scandir($target . $name[0]);

}else{

 $scan = scandir($target);
} 
```

**插入的**

```
 $scan = scandir($target . $name[0]); 
```

和增加`memory_limit, 'upload_max_filesize, post_max_size, max_input_time and max_execution_time`等

**下面的代码在您的 php 文件中使用。**

```
ini_set( 'memory_limit', '128M' );
ini_set('upload_max_filesize', '128M');  
ini_set('post_max_size', '128M');  
ini_set('max_input_time', 3600);  
ini_set('max_execution_time', 3600); 
```

**或在.htaccess**文件中设置以下代码

```
php_value upload_max_filesize 128M  
php_value post_max_size 128M  
php_value max_input_time 3600  
php_value max_execution_time 3600 
```

**我已经修改了您的代码，请尝试一下。**

```
 <?php  

ini_set( 'memory_limit', '128M' );
ini_set('upload_max_filesize', '128M');  
ini_set('post_max_size', '128M');  
ini_set('max_input_time', 3600);  
ini_set('max_execution_time', 3600);

function openZip($file_to_open) {  
    global $target;  
    $zip = new ZipArchive();  
    $x = $zip->open($file_to_open);  
    if($x === true) {  
        $zip->extractTo($target);  
        $zip->close();  
        unlink($file_to_open);  
    } else {  
        die("There was a problem. Please try again!");  
    }  
} 

    if(isset($_FILES['fupload'])) {  
        $filename = $_FILES['fupload']['name'];  
        $source = $_FILES['fupload']['tmp_name'];  
        $type = $_FILES['fupload']['type'];  
        $name = explode('.', $filename);  
        $target = 'extracted/' . $name[0] . '-' . time() . '/';  
        // Ensures that the correct file was chosen  
        $accepted_types = array('application/zip',  
                                    'application/x-zip-compressed',  
                                    'multipart/x-zip',  
                                    'application/s-compressed');  
        foreach($accepted_types as $mime_type) {  
            if($mime_type == $type) {  
                $okay = true;  
                break;  
            }  
        }  
      //Safari and Chrome don't register zip mime types. Something better could be used here.  
        $okay = strtolower($name[1]) == 'zip' ? true: false; 
        if(!$okay) { 
              die("Please choose a zip file, dummy!"); 
        } 
        mkdir($target); 
        $saved_file_location = $target . $filename; 
        if(move_uploaded_file($source, $saved_file_location)) { 
            openZip($saved_file_location); 
        } else { 
            die("There was a problem. Sorry!"); 
        } 

        if(is_dir($target . $name[0]))
        {

          $scan = scandir($target . $name[0]);

        }else{

            $scan = scandir($target);
        } 
        print '<ul>'; 
        for ($i = 0; $i<count($scan); $i++) { 
            if(strlen($scan[$i]) >= 3) { 
                $check_for_html_doc = strpos($scan[$i], 'html'); 
                $check_for_php = strpos($scan[$i], 'php'); 
                if($check_for_html_doc === false && $check_for_php === false) { 
                    echo '<li>' . $scan[$i] . '</li>'; 
                } else { 
                    echo '<li><a href="' . $target . $name[0] . '/' . $scan[$i] . '">' . $scan[$i] . '</a></li>'; 
                } 
            } 
        } 
        print '</ul>';  
    }  
    ?>  
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">  
    <html>  
      <head>  
        <title>How to Upload and Open Zip Files With PHP</title>  
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  
      </head>  
      <body>  
        <div id="container">  
        <h1>Upload A Zip File</h1>  
        <form enctype="multipart/form-data" action="" method="post">  
            <input type="file" name="fupload" /><br />  
            <input type="submit" value="Upload Zip File" />  
        </form>  
        </div><!--end container-->  
      </body>  
    </html> 
```

# php - 在 the_content() 中转义 WordPress 的 HTML 字符；

> ID：12473902
> 
> 赞同：0
> 
> 时间：2012-09-18T09:15:12.493
> 
> 标签：php, html, facebook, wordpress, facebook-graph-api

我正在尝试在 WordPress 主题上创建自定义 Facebook 分享按钮

```
<a title="Facebook This" href="http://www.facebook.com/sharer.php?s=100&p[title]=MY%20TITLE%20-%20<?php the_title(); ?>&p[summary]=<?php the_content(); ?>&p[url]=<?php the_permalink(); ?>&p[images][0]=<?php bloginfo('template_url'); ?>/images/logo.png" target="_blank">Facebook This</a> 
```

除了 Facebook 坚持在描述中显示 HTML 字符外，我的一切工作都非常出色：

```
<h3>Intro</h3><p>it shows all the tags here and it won't stop!!!</p>... 
```

它也使用 the_excerpt() 来做到这一点。

有谁知道为此删除html标签的快速方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:24:27.463

[使用 Strip 标签，详情请访问： http](http://php.net/manual/en/function.strip-tags.php) ://php.net/manual/en/function.strip-tags.php

```
strip_tags(get_the_excerpt()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T15:09:11.010

Saifuddin Sarker 的回答是一个很好的方法，另一种方法是：

[`wp_strip_all_tags( get_the_excerpt() );`](http://codex.wordpress.org/Function_Reference/wp_strip_all_tags.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-16T00:12:03.703

在 the_content() 中转义 WordPress 的 HTML 字符；是使用：

```
ob_start();
the_content();

$old_content = ob_get_clean();

$new_content = strip_tags($old_content);

echo $new_content; 
```

# asp.net-mvc - Custom Views in Multi-Tenant ASP.NET MVC Application

> ID：12473909
> 
> 赞同：0
> 
> 时间：2012-09-18T09:15:29.327
> 
> 标签：asp.net-mvc, razor, scalability

I want to start a new web project where the user can create and share content, which is displayed on a portal site and on a custom site for each user. This custom sites can be configured, for example you can choose a design and you can also override the templates.

I want to use ASP.NET MVC with Razor, because I have a alot of experience with C#, .NET and ASP.NET.t.

I see the following requirements: 1\. You need very fast access to the templates. 2\. Changing the templates means a new assembly that is loaded and cannot be unloaded. 3\. The system should be ready for hundreds of sites.

At the beginning I thought It would be a good idea to have only one site, but If I need multiple servers I have to clone the templates. I only see the option to run a custom instance for each site, but this means that making updates becomes hard. Any ideas? How would you solve the problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:18:25.540

You may take a look at [DotLiquid](http://dotliquidmarkup.org/) which is a templating engine you could use without giving too much power to your users (which is what would happen if you give them the possibility to use Razor).

# android - Working with json to consume a dot net web service from android

> ID：12473917
> 
> 赞同：0
> 
> 时间：2012-09-18T09:15:58.347
> 
> 标签：android, web-services

How to consume this web service "http://54.251.60.177/TMSOrdersService/TMSDetails.asmx" in android using JSON.So far i searched and found JSON is he best approach to consume a web service.

But i cannot find any good samples from Google.

Can any one please give me the step by step method or at-least give me one sample program or code to consume this web service.

Suggestions please!..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:19:12.277

May be this [http://www.josecgomez.com/2010/04/30/android-accessing-restfull-web-services-using-json/](http://www.josecgomez.com/2010/04/30/android-accessing-restfull-web-services-using-json/) can help
or [http://www.androidsnippets.com/retrieve-json-from-a-rest-web-service](http://www.androidsnippets.com/retrieve-json-from-a-rest-web-service)

# google-maps - Google MAP V2 自定义信息气泡

> ID：12473918
> 
> 赞同：1
> 
> 时间：2012-09-18T09:16:02.353
> 
> 标签：google-maps, mapstraction

有没有可能我们可以添加一个自定义信息气泡，就像在这个网站上找到的那样？[http://app.bg](http://app.bg)。该网站使用v3。但是，我需要有一个自定义信息气泡，我使用的是 maptraction，它使用的是 v2 api 而不是 v3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:58:01.777

您是指 Mapstraction 的 v2 还是 Google 地图？

如果您使用的是 Mapstraction，那么相同的代码应该适用于您使用的任何版本的 Google 地图。

您正在寻找的 Mapstraction 方法是 Marker.setInfoDiv - Mapstraction v2 的文档在[这里](http://mapstraction.com/mxn/build/latest/docs/symbols/mxn.Marker.html#setInfoDiv)。

# java - 在java中的两个字符之间拆分

> ID：12473923
> 
> 赞同：0
> 
> 时间：2012-09-18T09:16:12.170
> 
> 标签：java, string-split

我想在两个分号 (:) 之间分割一个字符串。IE，

> 布尔值：咖啡先生 - 召回：8a42bb8b36a6b0820136aa5e05dc01b3:1346790794980

我在尝试

```
split("[\\:||\\:]"); 
```

但它不工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:18:19.543

使用带有“：”的拆分作为正则表达式。

更确切地说：

```
 String splits[] = yourString.split(":");
  //splits will contain: 
  //splits[0] = "BOOLEAN";
  //splits[1] = "Mr. Coffee - Recall";
  //splits[2] = "8a42bb8b36a6b0820136aa5e05dc01b3";
  //splits[3] = "1346790794980"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:18:45.590

您可以使用`split()`，参考此代码，

```
String s ="BOOLEAN: Mr. Coffee - Recall:8a42bb8b36a6b0820136aa5e05dc01b3:1346790794980";

String temp = new String();

    String[] arr = s.split(":");

    for(String x : arr){
      System.out.println(x);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:20:10.420

这：

```
 String m = "BOOLEAN: Mr. Coffee - Recall:8a42bb8b36a6b0820136aa5e05dc01b3:1346790794980";
  for (String x : m.split(":"))
    System.out.println(x); 
```

返回

```
BOOLEAN
 Mr. Coffee - Recall
8a42bb8b36a6b0820136aa5e05dc01b3
1346790794980 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T09:24:22.097

正则表达式风味：

```
 String yourString = "BOOLEAN: Mr. Coffee - Recall:8a42bb8b36a6b0820136aa5e05dc01b3:1346790794980";
    String [] componentStrings = Pattern.compile(":").split(yourString);

    for(int i=0;i<componentStrings.length;i++)
    {
        System.out.println(i + " - " + componentStrings[i]);
    } 
```

# mysql - mySQL 从一个表中选择，该表在另一个表中不存在，并且不是第三个表中的子表

> ID：12473929
> 
> 赞同：1
> 
> 时间：2012-09-18T09:16:22.773
> 
> 标签：mysql, yii, rbac

我正在使用 Yii RBAC 来控制用户对我的应用程序的访问，它由三个 mySql 表组成；

`authitem`（RBAC 角色项）

`authitemchild`（属于其他角色的任何 RBAC 规则）

`authitemassignment`（为用户分配角色）

例如，我们可能有这样的表：

授权：

```
|   name (pk)   |
 areaASuperUser
 areaACreateOnly
 areaAReadOnly
 areaAUpdateOnly
 areaADeleteOnly

 areaBSuperUser
 areaBCreateOnly
 areaBReadOnly
 areaBUpdateOnly
 areaBDeleteOnly 
```

authitemchild

```
|   parent (pk)   |   child (pk)   |
 areaASuperUser    areaACreateOnly
 areaASuperUser    areaAReadOnly
 areaASuperUser    areaAUpdateOnly
 areaASuperUser    areaADeleteOnly

 areaBSuperUser    areaBCreateOnly
 areaBSuperUser    areaBReadOnly
 areaBSuperUser    areaBUpdateOnly
 areaBSuperUser    areaBDeleteOnly 
```

auithitemassignment

```
|    itemname (pk)   |   userid (pk)   |
 areaASuperUser       1 
```

在上述场景中，id 为 1 的用户在 areaA 中具有完整的 CRUD 访问权限。我需要的是用户*无权*访问的所有角色的列表，我还需要考虑他们也有权访问的任何角色的子级。

我可以轻松获取用户无权访问的所有角色：

```
SELECT DISTINCT `ai`.`name`
FROM `authitem` `ai`
LEFT JOIN `authassignment` `aa`
ON `aa`.`itemname` = `ai`.`name` AND `aa`.`userid` = 1
WHERE  `aa`.`itemname` IS NULL 
```

但这会返回：

```
 |   name    |
 areaACreateOnly
 areaAReadOnly
 areaAUpdateOnly
 areaADeleteOnly

 areaBSuperUser
 areaBCreateOnly
 areaBReadOnly
 areaBUpdateOnly
 areaBDeleteOnly 
```

而且因为所有 areaA* 角色都是 areaASuperUser 的孩子，所以我不希望它们返回。

任何建议或推动正确方向将不胜感激！

***编辑：

谢谢@SuVeRa，你的回答：

```
SELECT DISTINCT `ai`.`name`
FROM `authitem` `ai`
LEFT JOIN `authassignment` `aa`
ON `aa`.`itemname` = `ai`.`name` AND `aa`.`userid` = 1
WHERE  
`aa`.`itemname` IS NULL 
AND `ai`.`name` NOT IN (
    SELECT
    `aic`.`child` itemname
    FROM `authitemchild` `aic`
    JOIN `authassignment` `aa`
    ON `aa`.`itemname` = `aic`.`parent`
    WHERE `aa`.`userid` = 1
) 
```

非常适合上面的示例，但是我刚刚扩展了应用程序以包含多个儿童级别，即

授权：

```
|   name (pk)   |

 areaABSuperUser

 areaASuperUser
 areaACreateOnly
 areaAReadOnly
 areaAUpdateOnly
 areaADeleteOnly

 areaBSuperUser
 areaBCreateOnly
 areaBReadOnly
 areaBUpdateOnly
 areaBDeleteOnly

 areaCSuperUser
 areaCCreateOnly
 areaCReadOnly
 areaCUpdateOnly
 areaCDeleteOnly 
```

authitemchild

```
|   parent (pk)   |   child (pk)   |
 areaABSuperUser   areaASuperUser
 areaABSuperUser   areaBSuperUser

 areaASuperUser    areaACreateOnly
 areaASuperUser    areaAReadOnly
 areaASuperUser    areaAUpdateOnly
 areaASuperUser    areaADeleteOnly

 areaBSuperUser    areaBCreateOnly
 areaBSuperUser    areaBReadOnly
 areaBSuperUser    areaBUpdateOnly
 areaBSuperUser    areaBDeleteOnly

 areaCSuperUser    areaCCreateOnly
 areaCSuperUser    areaCReadOnly
 areaCSuperUser    areaCUpdateOnly
 areaCSuperUser    areaCDeleteOnly 
```

auithitemassignment

```
|    itemname (pk)   |   userid (pk)   |
 areaABSuperUser      1 
```

原来的答案会回来；

```
 |   name    |
 areaACreateOnly
 areaAReadOnly
 areaAUpdateOnly
 areaADeleteOnly

 areaBCreateOnly
 areaBReadOnly
 areaBUpdateOnly
 areaBDeleteOnly

 areaCSuperUser
 areaCCreateOnly
 areaCReadOnly
 areaCUpdateOnly
 areaCDeleteOnly 
```

因为它过滤掉了父母和孩子，而不是孩子的孩子。我追求的结果（在第二个例子中）是：

```
 |   name    |
 areaCSuperUser
 areaCCreateOnly
 areaCReadOnly
 areaCUpdateOnly
 areaCDeleteOnly 
```

***编辑2：

专门针对 Yii：

我对 Yii 做了更多的阅读，[CAuthManager](http://www.yiiframework.com/doc/api/1.1/CAuthManager)有许多有用的方法，包括[hasItemChild()](http://www.yiiframework.com/doc/api/1.1/IAuthManager#hasItemChild-detail)、[isAssigned()](http://www.yiiframework.com/doc/api/1.1/IAuthManager#isAssigned-detail)、[getItemChildren()](http://www.yiiframework.com/doc/api/1.1/IAuthManager#getItemChildren-detail)等，它们可以帮助抓取我需要的数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:00:19.993

此查询可能对您有所帮助

```
SELECT DISTINCT `ai`.`name`
FROM `authitem` `ai`
LEFT JOIN `auithitemassignment` `aa`
ON `aa`.`itemname` = `ai`.`name` AND `aa`.`userid` = 1
WHERE  
`aa`.`itemname` IS NULL 
AND `ai`.`name` NOT IN (
    SELECT
    `aic`.`child` itemname
    FROM `authitemchild` `aic`
    JOIN `auithitemassignment` `aa`
    ON `aa`.`itemname` = `aic`.`parent`
    WHERE `aa`.`userid` = 1
) 
```

# android - 在android中使用html电子邮件中的标签 可能重复： android - 如何在电子邮件正文中创建表格 我想从我的 android 问问题 问问题 2012-09-18T09:16:29.450 1645 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 可能重复： android - 如何在电子邮件正文中创建表格 我想从我的 android 应用程序发送一封 html 电子邮件。我在这个 html 中使用标签。我知道 Html.fromHtml() 方法不支持标签。所以邮件显示为纯文本。我想将此数据作为表格发送并且从不附加。我该如何实现这一点。我在用 Intent emailIntent = new Intent(Intent.ACTION_SEND); emailIntent.setType("text/html"); emailIntent.putExtra(Intent.EXTRA_EMAIL, new String[] { "" }); emailIntent.putExtra(Intent.EXTRA_SUBJECT, ""); emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,Html.fromHtml(emailContent)); startActivity(Intent.createChooser(emailIntent,"Send mail...")); 提前致谢。 我认为您的问题不是F的大小，而是类型。kmeans 需要双倍。试试这条线，它适用于我的 MATLAB [cidx center] = kmeans(double(F), 3, 'distance','sqEuclidean','Replicates',5); androidhtmlemail 4 1 回答 1 This answer is useful 1 你有没有试过这样： String body = new String("

"+"Get **Best Score** in your Android Phone.
"+"[" + text_value+ "](\"")"); emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, html.fromHtml(body)); 于 2012-09-18T09:22:11.833 回答 Related 0 c++ - 使用 Poco C++ 库，如何强制 POST 使用 SSL v3？ 1 r - 如何在R中保存列表对象 1 .htaccess - 同一文件中的 URL 重写规则（使用锚列表） 2 reverse-engineering - 如何在 IDA Pro 中设置数组元素的大小？ 1 xcode - Xcode：有没有让编辑器有焦点的键盘快捷键？ 1 java - 选项菜单按钮代码卡住并挂起 1 jquery - jQuery 如果单击包含单击的类 1 java - VLCJ NullPointer（我只想要一个简单的跨平台java视频播放器） 3 jquery - 如何使用 css3 创建悬停效果 3 android - 我无法为 Eclipse 安装 PhoneGap 插件 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12473931
> 
> 赞同：1
> 
> 时间：
> 
> 标签：android, html, email

> **可能重复：**
> [android - 如何在电子邮件正文中创建表格](https://stackoverflow.com/questions/12051125/android-how-to-create-table-in-the-email-body)

我想从我的 android 应用程序发送一封 html 电子邮件。我在这个 html 中使用标签。我知道 Html.fromHtml() 方法不支持标签。所以邮件显示为纯文本。我想将此数据作为表格发送并且从不附加。我该如何实现这一点。我在用

```
Intent emailIntent = new Intent(Intent.ACTION_SEND);
 emailIntent.setType("text/html");
 emailIntent.putExtra(Intent.EXTRA_EMAIL, new String[] { "" });
 emailIntent.putExtra(Intent.EXTRA_SUBJECT, "");
 emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,Html.fromHtml(emailContent));
 startActivity(Intent.createChooser(emailIntent,"Send mail...")); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:22:11.833

你有没有试过这样：

```
String body = new String("<html><body><table><tr><td><br/>" +header+"</td></tr><br/><br/>"+"Get <b> Best Score </b> in your Android Phone.<br/>"+"<a href=\"" + link_val + "\">" + text_value+ "</a>");

emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, html.fromHtml(body)); 
```

|  " +header+" |

# sql - SQL命令查找一年中的月数

> ID：12473948
> 
> 赞同：2
> 
> 时间：2012-09-18T09:17:44.877
> 
> 标签：sql, oracle, plsql

Oracle 支持六种日历系统。以下是不同的日历。

*   阿拉伯语回历
*   英语回历
*   公历
*   日本帝国
*   波斯语
*   中华民国官员（中华民国）
*   泰国佛

我想知道每个日历中每年的月数。是否有任何 sql 命令来获取该信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:53:15.317

SQL - 据我所知。对于这类事情，我最喜欢的参考是[Calendrical Calculations](https://rads.stackoverflow.com/amzn/click/com/0521777526)。还有日历表，它提供了许多不同日历之间 300 年（ [1900-2200](https://rads.stackoverflow.com/amzn/click/com/0521782538)年）的逐日等效性。上述书籍的作者之一 Ed Reingold 确实有一个相当漂亮的小程序，它允许您在许多不同的日历系统中查看当前日期（这当然引出了一个问题，“哪一个是真正**正确**的日历系统？”） - 在[这里](http://emr.cs.iit.edu/home/reingold/calendar-book/Calendrica.html)找到它。[您也可以在这里](http://emr.cs.iit.edu/home/reingold/calendar-book/second-edition/CIIT.html)购买用于小程序的软件，或者如果您想在免费软件中使用它，可以[联系作者]（mailto：reingold@iit.edu?subject=日历代码使用（免费软件））。可以在[这里](http://emr.cs.iit.edu/home/reingold/calendar-book/papers/)找到 Reingold 博士关于日历和相关数字资料的论文集。

派对就像是 1999 年...

# javascript - Javascript：提取 URL 的一部分

> ID：12473951
> 
> 赞同：2
> 
> 时间：2012-09-18T09:17:52.783
> 
> 标签：javascript

在源自 Facebook 的 URL 中，原始 URL 如下所示。

1.  example.com/post.htm?fb_action_ids=
2.  example.com/post/?fb_action_ids=
3.  example.com/post?fb_action_ids=
4.  example.com/post.php?id=1&fb_action_ids=

**如果使用 javascript 的一般 URL 表单看起来像那样，我们如何提取?fb_action_ids=**之前的部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:20:33.187

```
url.split('?')[0]; 
```

`url`是包含`URL`

# xtext - 如何在xtend的字符串中嵌入换行符？

> ID：12473957
> 
> 赞同：-1
> 
> 时间：2012-09-18T09:18:08.570
> 
> 标签：xtext, xtend

我在 xtend 的 JvmModelinferrer 中生成一个类字段：

```
val exp = NodeModelUtils::getNode(rule.expression);
members+=rule.toField("text",rule.newTypeRef('java.lang.String'))[
                            ^static = true
                            val Procedure1<ITreeAppendable> b = [
                                 append('''"«exp.text.replace('"','').replaceAll("\n"," \\n ")»"''')
                            ]
                            initializer = b
                            setFinal(true)
                            setVisibility(JvmVisibility::PUBLIC)
                        ] 
```

鉴于最初的 exp.text 是

```
'a
 b' 
```

我希望生成的字段如下所示：

```
String text = "a \n b"; 
```

但它看起来像这样：

```
String text = "a n b"; 
```

好像我根本不替换换行符然后我得到：

```
String text = "a
               b"; 
```

这当然不会编译。问题似乎是 xtend 正在评估 java 字符串，所以即使“\n”在 java 中被编译为“\n”，在 xtend 中它也会评估为“n”

如何让 xtend 不评估 \n 以便将其保留在生成的 java 字符串中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:30:20.323

结果你需要用“\\\\n”替换，因为你正在编写的源代码也将通过词法分析器，反斜杠需要再转义一次。

弗拉德·杜米特雷斯库提供

# html - proxy omit the Range field in the POST request

> ID：12473961
> 
> 赞同：1
> 
> 时间：2012-09-18T09:18:20.540
> 
> 标签：html

we use POST request to upload data to our own webserver which is not implemented obey the strictly HTTP standard.And we add the Range field in the POST request to tell our server the offset of the uploading file and now we found that some proxy omit this field.Is this a standard way?I looked up the RFC and didn't find out it's invalid to use Range in the POST request.How can i solve this problem?Any advance will be preciated.

# asp.net - VS2012 智能感知不适用于自定义控件

> ID：12473962
> 
> 赞同：4
> 
> 时间：2012-09-18T09:18:24.750
> 
> 标签：asp.net, intellisense, visual-studio-2012

自从安装 VS2012 以来，我发现当我编辑标记时，智能感知无法列出我的任何控件（在命名空间“ctl”下的 Web.config 中注册）。此外，当我格式化文档时，页面上的所有自定义控件实例都更改为小写。

我试过了：

*   清除临时 ASP.NET 文件
*   清除 ReflectedSchemas
*   重置所有 Visual Studio 设置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:21:23.457

[我相信这个Microsoft Connect 错误报告](https://connect.microsoft.com/VisualStudio/feedback/details/758383/problems-with-intellisense-when-mixing-usercontrols-and-controls-in-the-same-tagprefix)描述了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T02:13:12.087

这已在 Visual Studio 2012 Update 1 中得到确认，但我建议下载 Update 2，因为它是累积的 - [http://support.microsoft.com/kb/2797912](http://support.microsoft.com/kb/2797912)

# caching - Is (Azure) DataCache.Increment thread safe?

> ID：12473966
> 
> 赞同：1
> 
> 时间：2012-09-18T09:18:34.290
> 
> 标签：caching, azure, azure-caching

Does anybody know if [DataCache.Increment](http://msdn.microsoft.com/en-us/LIbrary/jj613635.aspx) is thread safe? (I.e. can I call it simultaneously in parallel on different machines and/or threads without worrying about the calls overwriting each other?)

The documentation doesn't mention anything about Thread Safety even though I'm guessing the methods is there just for this reason. But still, I don't want to rely on assumption when building my app.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:53:43.157

API 是线程安全的（内部锁定确保所有这些）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:23:24.017

在这种情况下，Azure 缓存通过锁定在内部处理并发。不幸的是，我无法通过链接支持这一点，只是过去的经验，因为我们目前在生产中使用此功能。

为了更加确定，您始终可以编写一个快速工作角色，该角色并行递增，然后验证返回的 Int64。

# c - xv6 rev6 page fault handler

> ID：12473968
> 
> 赞同：-3
> 
> 时间：2012-09-18T09:18:42.717
> 
> 标签：c, unix, assembly, operating-system, x86

I can't find the page fault handler in xv6-rev6 source code. Is it I missed it or there is no page fault handler at all? I do acctually found " #define T_PGFLT 14 // page fault " in Traps.h (line 2817 on the sheet), but I can't find it anywhere except in line 2817.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:59:35.327

异常处理从 开始，在[这个 Perl 脚本](http://code.google.com/p/xv6-vm/source/browse/trunk/vectors.pl)`vector14()`生成的 vector.S 中定义。

`vector14()`然后将控制权转移到[`alltraps()`](http://code.google.com/p/xv6-vm/source/browse/trunk/trapasm.S)，这是所有进一步异常和系统调用处理的公共入口点。

`alltraps()`最后调用一个 C 处理程序，[`trap()`](http://code.google.com/p/xv6-vm/source/browse/trunk/trap.c)它分析事件并分派适当的处理程序（系统调用、I/O、异常）。

`trap()`[`pgfault_handler()`](http://code.google.com/p/xv6-vm/source/browse/trunk/proc.c)处理页面错误的调用。

# jquery - HDIV Refresh Displays Error

> ID：12473969
> 
> 赞同：0
> 
> 时间：2012-09-18T09:18:43.467
> 
> 标签：jquery, spring-mvc, spring-security, hdiv

I am using Spring3 security, Spring3 mvc with jquery and HDIV 2.1.2.

When I run the application and press any menu or open any page in console I got the following exception, but in the browser application is working fine.

Exception is.......

org.apache.jasper.JasperException: javax.servlet.ServletException: javax.servlet.jsp.JspException: org.hdiv.exception.HDIVException: IDataComposer has not been initialized in request.

Any help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:00:27.193

HDIV 的过滤器似乎尚未处理该请求。您能否验证 HDIV 的过滤器配置正确并且请求已被它处理？

# android - setMargins() 不适用于 tableRow 设置边距

> ID：12473971
> 
> 赞同：1
> 
> 时间：2012-09-18T09:18:45.853
> 
> 标签：android, tablerow

我经历了不同的例子，但我无法找到我的要求的确切答案。下面是我的代码。让我知道我哪里出错了。

```
 TableLayout tableLayout = (TableLayout) findViewById(R.id.tableLayout);
                    TableRow tableRow = new TableRow(this);
                    TableLayout.LayoutParams params=
                              new TableLayout.LayoutParams
                              (TableLayout.LayoutParams.MATCH_PARENT,TableLayout.LayoutParams.WRAP_CONTENT);
                    params.setMargins(20,20, 20, 5);
                    tableRow.setLayoutParams(params);

tableLayout.addView(tableRow, new TableLayout.LayoutParams(
                    LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT)); 
```

谢谢..，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:14:24.480

当你打电话给`addView`你创建新`LayoutParams`的并根据文档`addView`

> 添加具有指定布局参数的子视图。

我认为您应该在`addView`通话中发送参数而不是创建新的`LayoutParams`

# java - 添加我的数据源后将项目添加到 selectItem

> ID：12473978
> 
> 赞同：1
> 
> 时间：2012-09-18T09:19:18.417
> 
> 标签：java, gwt, datasource

我试图在我的 selectItem 中为每个默认添加一个选项，它绑定了一个数据源，然后我尝试在每个默认值中添加一个选项。我的问题是我总是看到数据源中的项目，但从来没有看到我的默认选项。这些是我的代码行：

选项1

```
LinkedHashMap<String, String> valueMap= new LinkedHashMap<String, String>();
valueMap.put("null","null3");
branchSelectionItem.setValueMap(valueMap); 
```

选项 2

```
Record rec = new Record();
rec.setAttribute("Name","asdad");
branchDs.addData(rec);
branchSelectionItem.setOptionDataSource(branchDs); 
```

我曾经使用第一个方法尝试使用 valueMap 选项添加，第二个方法是向我的数据源添加一条记录，但它们中的任何一个都有效。任何的想法 ？

多谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:27:20.820

好的，我解决了这个问题，为选择再次添加一个空值作为默认值。

```
 branchSelectionItem.setAllowEmptyValue(true); 
```

# java - 我如何在 java 中解析 JSON

> ID：12473982
> 
> 赞同：0
> 
> 时间：2012-09-18T09:19:36.540
> 
> 标签：java, android

我坚持使用 org.json 在 Java 中解析 JSON。我的 JSON 看起来像这样

```
[{"id" : "1",
  "type" : "City",
  "description" : [ "short_description" : "some data",
                    "long_description" : "some data",
                    "postal_code" : "49045",
                    "population" : "900000",
                  ],
     }
 ], 
```

例如，我如何解析标签描述的元素，例如 long_description ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:22:51.740

使用[json-lib](http://json-lib.sourceforge.net/)，您可以简单地将其作为库添加到现有项目中，然后执行以下操作：

数据（JSON）：

> {'foo':'bar','coolness':2.0,'altitude':39000,'pilot':{'firstName':'Buzz','lastName':'Aldrin'},'mission':'apollo 11 '}

解析数据的代码：

```
import java.io.InputStream;

import net.sf.json.JSONObject;
import net.sf.json.JSONSerializer;

import org.apache.commons.io.IOUtils;

public class JsonParsing {

    public static void main(String[] args) throws Exception {
        InputStream is = 
                JsonParsing.class.getResourceAsStream( "sample-json.txt");
        String jsonTxt = IOUtils.toString( is );

        JSONObject json = (JSONObject) JSONSerializer.toJSON( jsonTxt );        
        double coolness = json.getDouble( "coolness" );
        int altitude = json.getInt( "altitude" );
        JSONObject pilot = json.getJSONObject("pilot");
        String firstName = pilot.getString("firstName");
        String lastName = pilot.getString("lastName");

        System.out.println( "Coolness: " + coolness );
        System.out.println( "Altitude: " + altitude );
        System.out.println( "Pilot: " + lastName );
    }
} 
```

**参考：**

*   [http://answers.oreilly.com/topic/257-how-to-parse-json-in-java/](http://answers.oreilly.com/topic/257-how-to-parse-json-in-java/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:23:08.233

```
JSONArray values = new JSONArray(yourstring);
for(int i = 0 ; i < values.length(); i++){
    JSONObject object= values.get(i);
    JSONArray desc = object.getJSONArray("description");

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:29:01.673

你可以在没有图书馆的情况下做到这一点 -

```
try  {
    JSONTokener tokener = new JSONTokener(yourString);
    JSONObject jsonObj = (JSONObject) tokener.nextValue();
    String output = jsonObj.getString("streamUrl");
} catch (JSONException e) {
    Log.v("Logtag", "Problem in decoding json");
    e.printStackTrace();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-04T18:03:15.523

```
 //import java.util.ArrayList;
 //import org.bson.Document;

 Document root = Document.parse("{ \"foo\" : \"bar\", \"coolness\" : 2.0, \"altitude\" : 39000, \"pilot\" : { \"firstName\" : \"Buzz\", \"lastName\" : \"Aldrin\" }, \"mission\" : \"apollo 11\" }");

 System.out.println(((String)root.get("foo")));
 System.out.println((root.get("coolness")));
 System.out.println((root.get("altitude")));
 System.out.println(((String)((Document)root.get("pilot")).get("firstName")));
 System.out.println(((String)((Document)root.get("pilot")).get("lastName")));
 System.out.println(((String)root.get("mission"))); 
```

# mysql - Access multiple DBs using one connection and one query via codeigniter

> ID：12473984
> 
> 赞同：0
> 
> 时间：2012-09-18T09:19:47.937
> 
> 标签：mysql, codeigniter

I have a question regarding mysql db and codeigniter framework

I want to use one query accessing multiple DBs using **codeigniter** which returns one resultset Example as follow:

```
SELECT A.name, B.class_name
FROM DB1.Table1 AS A, DB2.Table1 AS B
WHERE A.id = B.id 
```

Return one result????

Following are my connection setting in codeigniter

```
$db['DB2']['hostname'] = 'localhost';
$db['DB2']['username'] = 'connection_name';
$db['DB2']['password'] = 'connection_password';
$db['DB2']['database'] = 'DB2';
$db['DB2']['dbdriver'] = 'mysql';
$db['DB2']['dbprefix'] = '';
$db['DB2']['pconnect'] = TRUE;
$db['DB2']['db_debug'] = TRUE;
$db['DB2']['cache_on'] = FALSE;
$db['DB2']['cachedir'] = '';
$db['DB2']['char_set'] = 'utf8';
$db['DB2']['dbcollat'] = 'utf8_general_ci';
$db['DB2']['swap_pre'] = '';
$db['DB2']['autoinit'] = TRUE;
$db['DB2']['stricton'] = FALSE;

$active_group = 'default';
$active_record = TRUE;

$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'connection_name';
$db['default']['password'] = 'connection_password';
$db['default']['database'] = 'DB1';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

Kindly provide me some sample code which helps to run the above query.

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:24:16.413

使用该数据库的 MySQL 用户创建到 DB1 的 1 个连接，例如用户`x`并在 MySQL 中授予用户`x`权限`DB2`，这样您就可以使用一个连接并在查询中访问多个数据库...

# class - Converting to an extended class

> ID：12473990
> 
> 赞同：0
> 
> 时间：2012-09-18T09:20:20.360
> 
> 标签：class

Imagine I have a class like so:

```
public class MyClass {
    public string MyString { get;set; }
} 
```

And then I extend this like so:

```
public class MyExtender : MyClass {
    public string MyString2 { get;set; }
} 
```

How can I convert a MyClass into the extended one, I tried:

```
item = (MyExtender)classitem; 
```

But this didn't work.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:38:51.183

最后，我没有找到转换它的方法，而是找到了一种将所有属性复制到扩展类的方法：

```
MyClass orig = GetItem(x);
MyExtender copy = new MyExtender();
PropertyInfo[] infos = typeof(MyClass).GetProperties();
foreach (PropertyInfo info in infos)
{
    info.SetValue(copy, info.GetValue(orig, null), null);
} 
```

# android - 如何创建带有手势效果的提示对话框？

> ID：12473991
> 
> 赞同：0
> 
> 时间：2012-09-18T09:20:23.767
> 
> 标签：android, android-dialog

我经历了许多应用程序，他们在其中提供了一些文本和功能的`dialog`覆盖。`gesture`我试图找出是否有任何`android framework`相同的小部件，但没有任何成功。

我正在使用**froyo API 8**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:31:47.913

您可以创建一个[透明的活动](https://stackoverflow.com/a/12192314/1117415)来显示您的演示屏幕。

还可以查看一个名为 [ShowcaseView](https://github.com/Espiandev/ShowcaseView)的库。

# ios - Cocoa iOS 使 UIView 中的 CGPoints “更大”

> ID：12473994
> 
> 赞同：0
> 
> 时间：2012-09-18T09:20:31.130
> 
> 标签：ios, cocoa-touch, uiview, subclass, cgpoint

`CGPoint`是否可以将iOS 应用程序的默认大小设置为“更大”？

*例如*，iPhone 的主视图是 320 点宽 - 是否可以将其更改为 100 点，并基于这 100 点进行所有计算（如仍然能够正常使用`CGRectMake`、获取尺寸等）。

那么有没有人知道如何以`UIView`使上述工作的方式进行子类化，更重要的是，Apple 会允许它吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:31:02.953

将`CGAffineTransformMakeScale(320/100, 320/100)`变换应用到您的视图，使其被缩放，100 个点将被缩放为`100 * (320/100) = 320`点宽。

*或者当然，不要像上面那样使用幻数，而是使用一些常量作为值`100`和类似`[UIScreen mainScreen].applicationFrame.size.width`（`view.window.screen.applicationFrame.size.width`或任何类似的东西）来获取屏幕宽度而不是值`320`（因为幻数不好，我们永远不知道如果屏幕的大小将来会发生变化，比如 iPhone5 刚刚改变的高度）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:26:14.250

看一下`UIView`s的`transform`属性。但这可能是个坏主意：如果重新调整坐标系，几乎所有视图都将与屏幕像素错位。这将导致文本、线条和其他图形的模糊显示。

你为什么要首先这样做？